# StackOverflow 问答 15700000-15700999

# c++ - 关于 pthread_exit 释放自动变量的困惑

> ID：15700000
> 
> 赞同：0
> 
> 时间：2013-03-29T08:45:02.200
> 
> 标签：c++, pthreads

据此[_](http://www.advancedlinuxprogramming.com/alp-folder/alp-ch04-threads.pdf)

“但是，如果线程调用`pthread_exit`，C++ 不保证为线程堆栈上的所有自动变量调用析构函数。恢复此功能的一个聪明方法是通过抛出特殊异常在线程函数的顶层调用 pthread_exit ”。

紧随其后的是随附的代码

```
class ThreadExitException
{

public:
ThreadExitException (void* return_value)
                    : thread_return_value_ (return_value) { }

void* DoThreadExit ()
{
 pthread_exit (thread_return_value_);
}

private:
void* thread_return_value_;

};

void do_some_work ()
{
while (1) 
{
 /* Do some useful things here...*/
 if (should_exit_thread_immediately ())
 throw ThreadExitException (/* thread’s return value = */ NULL);
}
}

void* thread_function (void*)
{
 try 
 {
  do_some_work ();
 }
catch (ThreadExitException ex) 
{
 ex.DoThreadExit ();
}

return NULL;
} 
```

据我了解...如果调用 pthread_exit ，则有可能不会调用堆栈的所有自动变量的析构函数。因此我们使用异常处理来确保为所有变量调用析构函数。（引自解释：**“通过抛出 ThreadExitException 而不是直接调用 pthread_exit，异常被顶级线程函数捕获，线程堆栈上的所有局部变量都将随着异常的渗透而被正确销毁。”**

根据手册页`pthread_exit`

“任何由 pthread_cleanup_push(3) 建立的尚未被弹出的清理处理程序，都会被弹出（与它们被推送的顺序相反）并执行。 **如果线程有任何线程特定的数据，那么，在清理处理程序已被执行，相应的析构函数被调用，以未指定的顺序**“。

这表示函数调用了析构函数，所以自动变量会被释放？那么为什么有必要使用代码所展示的异常处理呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T08:47:57.163

线程特定的数据与您所理解的不同。线程特定数据是已设置的**全局**数据，以便每个线程获得全局数据的单独副本。因此，线程特定的数据并不像您假设的那样存在于堆栈中。

有关更多信息，请参见[此处](http://publib.boulder.ibm.com/infocenter/iseries/v5r3/index.jsp?topic=/rzahw/rzahwe21rx.htm)（以及 pthread 示例）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T08:49:13.513

不，它说为线程特定的数据调用*析构函数。*这与在线程调用堆栈中的自动变量上调用 C++ 析构函数完全不同。

`man pthread_key_create`有关与线程特定数据关联的析构函数的文档，请参阅。

```
int pthread_key_create(pthread_key_t *key, void (*destructor)(void*)); 
```

> [...] 可选的析构函数可能与每个键值相关联。在线程退出时，如果键值具有非 NULL 析构指针，并且线程具有与该键关联的非 NULL 值，则将键的值设置为 NULL，然后调用指向的函数以前关联的值作为其唯一参数。如果线程退出时存在多个析构函数，则未指定析构函数调用的顺序。[...]

# android - 在没有收件人的情况下启动短信意图

> ID：15700004
> 
> 赞同：0
> 
> 时间：2013-03-29T08:45:30.873
> 
> 标签：android

我想在没有预定义收件人的情况下打开短信意图，这是我的代码。

```
Uri myuri = Uri.parse("to:");
Intent smsintent = new Intent(Intent.ACTION_SENDTO, myrui);
smsintent.putExtra("sms_body", "new sms here boddy");  
startActivity(smsintent); 
```

我得到了例外

```
myuri can't be parsed 
```

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:47:07.263

我想你想要这个。

```
Use Uri myuri = Uri.parse("smsto:"); instead of Uri.parse("to:"); 
```

或者

```
Intent sendIntent = new Intent(Intent.ACTION_VIEW);         
sendIntent.setData(Uri.parse("sms:"));
sendIntent.putExtra("sms_body", "new sms here boddy");  
startActivity(sendIntent); 
```

# iphone - iOS - 创建照片幻灯片

> ID：15700007
> 
> 赞同：2
> 
> 时间：2013-03-29T08:45:37.823
> 
> 标签：iphone, ios, objective-c, ipad

我为我的应用制作了一个简单的照片幻灯片，问题是我的代码在最后一张图像之后不再重复图像！这是我的代码：

```
- (IBAction)start:(id)sender {

    _button.hidden = YES;
    [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(photoCounter) userInfo:nil repeats:YES];

}

- (void)photoCounter {

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.90];
    [UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:self.view cache:NO];
    [self updatePhoto];
    imageCount ++;
    [UIView commitAnimations];

}

- (void)updatePhoto {

    switch (imageCount) {

        case 0:
            _images.image = [UIImage imageNamed:@"wall1.jpg"];
            break;

        case 1:
            _images.image = [UIImage imageNamed:@"wall2.jpg"];
            break;
        case 2:
            _images.image = [UIImage imageNamed:@"wall3.jpg"];
            break;
        case 3:
            _images.image = [UIImage imageNamed:@"wall4.jpg"];
            break;
        case 4:
            _images.image = [UIImage imageNamed:@"wall5.jpg"];
            break;

        default:
            break;
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T08:56:45.580

从 photoCounter 方法中删除 imageCount++ 和

```
- (void)updatePhoto 
{
    switch (imageCount) 
    {
        case 0:
            _images.image = [UIImage imageNamed:@"wall1.jpg"];
            break;
        case 1:
            _images.image = [UIImage imageNamed:@"wall2.jpg"];
            break;
        case 2:
            _images.image = [UIImage imageNamed:@"wall3.jpg"];
            break;
        case 3:
            _images.image = [UIImage imageNamed:@"wall4.jpg"];
            break;
        case 4:
            _images.image = [UIImage imageNamed:@"wall5.jpg"];
            break;

        default:
            break;
    }
    imageCount ++;
    if (imageCount > 4)
        imageCount = 0;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T10:14:13.387

可能更好

```
- (void)updatePhoto {
    NSString *imageName = [NSString stringWithFormat:@"wall%d", imageCount];
    _images.image = [UIImage imageNamed:imageName];
    (imageCount > 4) ? imageCount = 0 : imageCount++; 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T08:52:10.963

在函数`- (void)photoCounter`... 而不是`imageCount++`，尝试把

```
if(imageCount > 4){ 
    imageCount = 0;
} else { 
    imageCount++;
} 
```

# javascript - 如何处理浏览器刷新、后退按钮

> ID：15700015
> 
> 赞同：1
> 
> 时间：2013-03-29T08:46:09.233
> 
> 标签：javascript, refresh, handle, back

*   我正在为网上银行系统开发一个网站，登录后我有主页（会话在这里维护）和几个标签/链接作为主页的子项，

*   我已经有 js 来终止会话或注销，但问题出在事件处理程序上

*   当页面刷新或点击返回按钮时，我必须处理如下

    ```
    window.onbeforeunload = function() {
       if( confirm("This page will be close") ){
             //called the logout fn to kill session
       }
    } 
    ```

*   上面的 js 工作正常，但上面代码的问题是，每当在主页中单击其他链接/选项卡时都会调用它，所以它保持注销

*   如果我的问题不清楚或重复，我很抱歉，有没有人可以建议处理这个问题的方法

*   为了您的信息，我正在使用带有 js 的 jsp 和 servlet，这个项目不能使用 jquery，也不能禁用后退按钮和刷新按钮

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:52:41.103

*   您可以将以前访问过的 URL（信息）保存为下一页中的散列输入标签，因此无论何时再次访问它，您都可以了解已按下后退按钮。

*   另一种解决方案是使用*document.referrer*。

*   您还可以使用名为*History*的 JQuery 插件。可在[https://github.com/browserstate/History.js获得](https://github.com/browserstate/History.js)

# spring - 没有为依赖项找到类型为 [org.hibernate.SessionFactory] 的匹配 bean

> ID：15700017
> 
> 赞同：7
> 
> 时间：2013-03-29T08:46:24.263
> 
> 标签：spring, hibernate, maven, sessionfactory

我是 Spring MVC 的初学者。我遇到了一个问题“**没有为依赖找到类型为 [org.hibernate.SessionFactory] ​​的匹配 bean：预计至少有 1 个 bean 有资格作为此依赖的自动装配候选者。** ”并花费了很多时间。

我使用了 Maven 构建管理。我的项目有一个包含 2 个模块的项目：springcore (jar) 和 springmvc (web app)。而springmvc（web app）一直是依赖spring core。在模块 spring 核心中，我定义了所有包，例如 dom、dao、service 及其实现，我还在 src/main/resources 中定义了 applicationContext.xml 如下：

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:tx="http://www.springframework.org/schema/tx" 
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/tx 
           http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!-- Activates scanning of @Autowired -->
    <context:annotation-config />

    <context:component-scan base-package="com.netvn" /> 

    <bean id="propertyConfigurer"
         class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
         p:location="classpath:jdbc" />

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
            destroy-method="close" p:driverClassName="${jdbc.driverClassName}"
            p:url="${jdbc.databaseurl}" p:username="${jdbc.username}"                    p:password="${jdbc.password}" />

    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
            <property name="dataSource" ref="dataSource" />
            <property name="annotatedClasses">
                    <list>
                         <value>com.netvn.dom.Contact</value>
                    </list>
            </property>
            <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.max_fetch_depth">3</prop>
            <prop key="hibernate.jdbc.fetch_size">50</prop>
            <prop key="hibernate.jdbc.batch_size">10</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">update</prop>
        </props>
    </property>
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager" />
    <bean id="transactionManager"
            class="org.springframework.orm.hibernate3.HibernateTransactionManager">
         <property name="sessionFactory" ref="sessionFactory" />
    </bean>
</beans> 
```

ContactDaoImpl.java

```
@Repository
public class ContactDaoImpl implements ContactDao {
    private Log log = LogFactory.getLog(ContactDaoImpl.class);

    @Autowired
    private SessionFactory sessionFactory;

    public List<Contact> listContact() {
        Session session = sessionFactory.getCurrentSession();
        Query q = session.createQuery("select g from Contact g order by id desc");
        List<Contact> contactList= q.list(); 
        return contactList; 
    }
} 
```

ContactServiceImpl.java

```
@Service
@Transactional
public class ContactServiceImpl implements ContactService {

    @Autowired
    private ContactDao contactDao;

    @Transactional(propagation=Propagation.REQUIRED)
    public List<Contact> listContact(){
        return contactDao.listContact();
    }
} 
```

在 springmvc （网络应用程序）中，我定义了 web.xml 和 dispatcher-servlet.xml

调度程序-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
                 http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                 http://www.springframework.org/schema/mvc 
                 http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
                 http://www.springframework.org/schema/context
                 http://www.springframework.org/schema/context/spring-context-3.0.xsd">
    <context:annotation-config />

    <mvc:annotation-driven />
    <context:component-scan base-package="com.netvn.dao" />
    <context:component-scan base-package="com.netvn.service" />
    <context:component-scan base-package="com.netvn.controller" />

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver"
            p:prefix="/WEB-INF/jsp/" p:suffix=".jsp" />

 </beans> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
version="3.0">
    <context-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>
                 classpath*:*.xml
             </param-value>
    </context-param>
    <servlet>
            <servlet-name>dispatcher</servlet-name>
            <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
            <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
            <servlet-name>dispatcher</servlet-name>
            <url-pattern>/</url-pattern>
    </servlet-mapping>

    <listener>
          <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener> 
</web-app> 
```

当我尝试在 Tomcat 6.0 服务器中运行它时，这是我的问题

```
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.hibernate.SessionFactory com.netvn.dao.impl.ContactDaoImpl.sessionFactory; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.hibernate.SessionFactory] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:502)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:282)
    ... 86 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.hibernate.SessionFactory] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:920)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:789)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:703)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:474) 
```

有人可以告诉我，Web 应用程序上下文无法创建 SessionFactory 的原因是什么，或者当我配置 SessionFactory 时出现任何问题。

任何支持将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-25T15:16:16.017

一般来说，无论是您自己的库，类路径中都缺少配置/类。再次检查正确的导入和配置：

1.  使用类路径扫描来自动检测实体类：
    `<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"> <property name="dataSource" ref="dataSource"/> <property name="packagesToScan" value="test.package"/> </bean>`

2.  或最重要的：AnnotationSessionFactoryBean 类需要 Hibernate 3.2 或更高版本，具有 Java Persistence API 和 Hibernate Annotations 附加组件。

参考：[https ://docs.spring.io/spring/docs/3.2.8.RELEASE/javadoc-api/org/springframework/orm/hibernate3/annotation/AnnotationSessionFactoryBean.html](https://docs.spring.io/spring/docs/3.2.8.RELEASE/javadoc-api/org/springframework/orm/hibernate3/annotation/AnnotationSessionFactoryBean.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-05T15:05:12.053

尝试将您的应用程序上下文直接导入到 dispatcher-servlet.xml 中（它正在被正确加载），如下所示。

`<import resource="classpath:WEB-INF/applicationContext.xml" />`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-12T19:50:34.587

您的 sessionfactory 未正确初始化。

阅读你的错误在哪里以及什么被抛出。这是

> 无法自动装配字段：私有 org.hibernate.SessionFactory

您需要正确初始化 SessionFactory

现在如何测试它非常简单。首先删除代码中添加的 sessionfactory。测试数据源是否正确初始化

将数据源添加为自动装配。@Autowired DataSource 数据源；

在您的方法中，您可以轻松地执行 dataSource.getConnection。如果您能够使用普通的 jdbc 进行测试，那么您就更近了一步。

如果您的数据源配置正确，您可以在第二步中测试您的 sessionfactory。

我认为 conext 扫描不会给您带来任何问题，因为它说自动连线失败。因此，您的数据源和 sessionfactory bean 未在 xml 中正确设置

# iphone - 如何在 iOS6 中制作与 iOS5 相同的地图

> ID：15700020
> 
> 赞同：0
> 
> 时间：2013-03-29T08:46:49.097
> 
> 标签：iphone, ios, ios6, mkmapview

我有一个应用程序，我在其中使用 MkMapView，它在 iOS6 和 iOS5 上的显示方式不同。我附上了下面的截图

iOS 6 ![在此处输入图像描述](../Images/fe616b497314d9d265a1808cb520734a.png)

iOS 5

![在此处输入图像描述](../Images/7bc73475e93f0a77da72396f14b4ae90.png)

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T08:51:11.477

这是因为 IOS 5 使用谷歌地图，而 IOS 6 使用苹果地图，你唯一能做的就是在 IOS 5 和 IOS6 上使用谷歌地图 API 这样它们的外观和工作方式相同

[IOS的谷歌地图](https://developers.google.com/maps/documentation/ios/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T10:00:00.767

如果您想使用 Apple 的 Mapkit 框架并显示 IOS 6.0 及更高版本的谷歌地图，那么您可以使用叠加层。

这是可以帮助您的示例项目。

[https://github.com/mladjan/GoogleMapsOverlayiOS/tree/master/GoogleMapsiOS6Demo](https://github.com/mladjan/GoogleMapsOverlayiOS/tree/master/GoogleMapsiOS6Demo)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T08:51:21.987

根据设备或 iPhone/iPad 上安装的 IOS，地图显示是默认的。如果您仍想使用 Google 地图，请在网络视图中使用您的位置加载地图。

# javascript - 如何在Javascript中为多个文本框编写函数

> ID：15700021
> 
> 赞同：1
> 
> 时间：2013-03-29T08:46:53.253
> 
> 标签：javascript, asp.net, textbox

我正在编写验证货币价值的代码

```
 function monyValid()
       {

       var valw=document.getElementById("<%=txtID4.ClientID%>").value;
       var regex  = /(?:^\d{1,3}(?:\.?\d{2})*(?:,\d{2})?$)|(?:^\d{1,3}(?:,?\d{3})*(?:\.\d{2})?$)/            
       if (!isNaN(valw) && isFinite(valw)) 
       {
         document.getElementById("<%=txtID4.ClientID%>").value=parseFloat(valw).toFixed(2);
       }           
         if (regex.test(valw))
         {          
           alert("valid");
         }
         else
         {
           alert("Number is invalid");
         }
       } 
```

现在我想对多个文本框应用相同的验证。如何对不同的文本框使用相同的功能。我想要类似的东西

```
 function monyValid(txtVal)
       {           
       var valw=document.getElementById(txtVal).value;
       } 
```

我怎样才能实现这个功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:50:53.410

传入`this`并将其用作函数中的参数，而不是调用`document.getElementById`.

**JavaScript**

```
function monyValid(item) {
    var valw = item.value;
    var regex = /(?:^\d{1,3}(?:\.?\d{2})*(?:,\d{2})?$)|(?:^\d{1,3}(?:,?\d{3})*(?:\.\d{2})?$)/
    if (!isNaN(valw) && isFinite(valw)) {
        item.value = parseFloat(valw).toFixed(2);
    }
    if (regex.test(valw)) {
        alert("valid");
    } else {
        alert("Number is invalid");
    }
} 
```

**HTML 用法**

```
<asp:TextBox ID="txtID4" runat="server" onFocus="onEnter(this)" onblur="onLeave(this);monyValid(this);" TabIndex="4"></asp:TextBox> 
```

# sql-server - 在 sp_xml_preparedocument 中读取中文作为 XML 输入的问题

> ID：15700022
> 
> 赞同：1
> 
> 时间：2013-03-29T08:46:59.253
> 
> 标签：sql-server, sql-server-2008, tsql, stored-procedures

我正在尝试为我的插入存储过程读取中文，XML 读取 SP 将批量输入参数作为 XML，然后使用“sp_xml_preparedocument”解析/读取它并插入表中。这里的问题是将中文读为“？？？” 人物。

下面是xml读取SP：

```
 DECLARE @idoc int;
    DECLARE @cnt int = 0;           

    EXEC sp_xml_preparedocument @idoc OUTPUT, '<?xml version="1.0" encoding="ISO-8859-1"?><DocumentElement><Specifications><ID>1</ID><Name>维&lt;/Name><Value>123</Value></Specifications><Specifications><ID>2</ID><Name>重量</Name><Value>123123</Value></Specifications></DocumentElement>'

    SELECT @cnt = COUNT(*)
    SELECT  ID, Name, Value
    FROM OPENXML (@idoc, '/DocumentElement/Specifications', 2)
    WITH (ID int, Name nvarchar(MAX), Value nvarchar(MAX)) 
```

输出是： -

```
 ID    Name     Value

   1     ?    123

   2     ??   123123 
```

你可以看到 Name 是作为 ??s in-place of Chinese characters 来的。我尝试将 XML 编码更改为 UTF-8 和 UTF-16，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:54:45.087

您能否将文档显示为 UTF-16 而不是 ISO-8859-1？以下工作正常：

```
 DECLARE @xml XML = N'<?xml version="1.0" ?><DocumentElement><Specifications><ID>1</ID><Name>维&lt;/Name><Value>123</Value></Specifications><Specifications><ID>2</ID><Name>重量</Name><Value>123123</Value></Specifications></DocumentElement>'

    SELECT  x.value(N'ID[1]', 'int') as ID,
      x.value(N'Name[1]', 'nvarchar(max)') as Name,
      x.value(N'Value[1]', 'nvarchar(max)') as Value
    FROM @xml.nodes (N'/DocumentElement/Specifications') T(x); 
```

见[SqlFiddle](http://sqlfiddle.com/#!6/d41d8/3269)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T10:00:57.140

首先，需要将 XML 定义为 Unicode 字符串，使用`N''`.

其次，SQL Server 的 XML 处理不允许该`encoding`属性，因为它会发出错误

> 消息 6602，级别 16，状态 2，过程 sp_xml_preparedocument，第 1 行错误描述为“不支持从当前编码切换到指定编码。”。

我猜这个论点是因为 SQL Server 将 UCS-2 用于 NVARCHAR，所以不能有任何其他编码。

修复这两个错误将为您提供所需的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-31T09:41:55.720

将变量声明为 XML 为我解决了这个问题。

解析“Käufer garantierte”的字符 ä 时调用 sp_xml_preparedocument 失败。将编码设置为 UTF-16 会引发错误“不支持从当前编码切换到指定编码”。我将 XML 字符串作为参数从 C# 代码作为 NVARCHAR(MAX) 传递。

# c# - C# 基本表单事件

> ID：15700027
> 
> 赞同：0
> 
> 时间：2013-03-29T08:47:37.710
> 
> 标签：c#, winforms, validation

您好，我有 C# 窗口应用程序，其中一个`BaseForm`继承了所有其他子窗体。

现在我想编写通用验证，所有子表单都将使用它......（其他特定于子表单的验证写在提交按钮事件中）

因此，改为为所有子表单写下通用验证事件，希望它写在 Baseform 提交按钮中......

但问题是，如果验证失败，它不会从 BaseForm 按钮事件返回。它每次都转到子按钮事件。

那么有什么方法可以直接从基本表单按钮事件返回或退出。（不会调用该子按钮事件）

## 示例代码：

```
 private void buttonBaseStart_Click(object sender, EventArgs e)
{
    if(selectedRows.count > 0)
    {
       // go in child form buttonBaseStart_Event
    }
    else
    {
     MessageBox.Show("Please select Row");
     Return;
    }
} 
```

# java - mysql的hsql休眠方言

> ID：15700028
> 
> 赞同：0
> 
> 时间：2013-03-29T08:47:37.930
> 
> 标签：java, mysql, hibernate, hsqldb

我使用hibernate来管理我项目中的一些类。MySQL 5.5 是底层 RDMS。

因此，对于常规操作，我使用 org.hibernate.dialect.MySQL5InnoDBDialect 作为休眠方言。

但是对于单元测试，我使用的是 hsql 1.8.0.8，并且我使用 org.hibernate.dialect.HSQLDialect 作为测试的方言。

在我团队中的一位开发人员将“varchar”列更改为“mediumtext”之前，这不是问题。

现在我不能使用下 HSQLDialect 或 MySQL5InnoDBDialect 进行单元测试。

我尝试编写自己的方言，它从 HSQLDialect 扩展并将类型注册为

```
registerColumnType( Types.VARCHAR, 16777215, "mediumtext" ); 
```

在构造函数中，但这似乎不起作用。

我写的自定义方言如下

```
import org.hibernate.dialect.HSQLDialect;

public class HSqlMySqlDialect extends HSQLDialect{
     public HSqlMySqlDialect() {
            super();
            registerColumnType( Types.VARCHAR, "mediumtext" );
     }

} 
```

我的测试 hibernate.cfg.xml 如下所示

```
<property name="dialect">com.alcatel.util.hibernate.HSqlMySqlDialect</property>
<property name="connection.driver_class">org.hsqldb.jdbcDriver</property>
<property name="connection.url">jdbc:hsqldb:mem:testDB</property> 
```

启动 ibernate sessionfactory 时出现的错误如下

```
ERROR [SchemaExport] Wrong data type: MEDIUMTEXT in statement [create table TABLE_NAME (ID bigint not null, VALUE mediumtext] 
```

所以看起来创建表时没有使用方言。

有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:55:59.900

我认为最好的解决方案是不设置“方言”属性，让 Hibernate 在运行时自动检测正确的方言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T13:11:16.013

您可以使用 HSQLDB 2.x 并为 MEDIUMTEXT 定义一个类型。例如：

将类型 MEDIUMTEXT 创建为 VARCHAR(100000)

HSQLDB 2.x 具有 MySQL 语法兼容模式，目前支持 TEXT 和 CTEXT 类型定义。下一版本可能会支持 MEDIUMTEXT。

1.8 和 2.x 版本有一个单一的 Hibernate 方言。您应该能够在方言子类中将 MEDIUMTEXT 类型定义为 LONGVARCHAR。

registerColumnType( Types.LONGVARCHAR, "longvarchar" );

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T10:46:50.200

当您按如下方式注册 varchartype 时

```
registerColumnType( Types.VARCHAR, 16777215 , "mediumtext" ); 
```

您实际上是在说所有大小 <=16777215 的 varchars 都将注册为 mediumtext，而不是相反。所以改变列注释的想法是错误的。此外，ne 不应该将特定于 DB 的东西推到休眠状态。

所以我的解决方案是在休眠注释中使用 varchar() 本身，但通过自定义方言将它们转换为我需要的任何类型。

# sql - 使用 CTE 的复杂查询

> ID：15700038
> 
> 赞同：0
> 
> 时间：2013-03-29T08:48:21.887
> 
> 标签：sql, sql-server-2008

我有一个表，其中包含如下数据，

```
Date            Custid  CreditDebit     Units   Value
2013-03-29 06:21:46.903     1       C   1   10
2013-03-29 06:21:46.903     1       C   2   11
2013-03-29 06:21:46.903     1       C   1   12
2013-03-29 06:21:46.903     1       C   2   13
2013-03-29 06:21:46.903     1       D   1   20
2013-03-29 06:21:46.903     1       D   2   21
2013-03-29 06:21:46.903     1       C   1   20
2013-03-29 06:21:46.903     1       C   2   21 
```

我需要得到一个临时表输出如下，

```
Date            Custid  CreditDebit     Units   Value Balance
2013-03-29 06:21:46.903     1       C   1   42      42-20
2013-03-29 06:21:46.903     1       c   2   45      22+45-21
2013-03-29 06:21:46.903     1       D   1   20      ---
2013-03-29 06:21:46.903     1       D   2   21      --- 
```

这是基于“CreditDebit”和单位的 Value 列的总和。我如何使用 CTE sql 查询来实现这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:06:24.313

```
;WITH summary_table_cte
     AS (SELECT Date,
                Custid,
                CreditDebit,
                Units,
                sum(value) AS [Value]
         FROM   YourTable
         GROUP  BY Date,
                   Custid,
                   CreditDebit,
                   Units)
SELECT *
FROM   summary_table_cte; 
```

注意语句开头的分号。CTE 之前的语句必须以分号结束。通过添加前缀`WITH`，您可以将其放在任何地方。

# c# - C# 相当于 WM_CHAR 按键事件？

> ID：15700042
> 
> 赞同：0
> 
> 时间：2013-03-29T08:48:31.590
> 
> 标签：c#, .net, visual-c++, key, keypress

在 C++ 应用程序中，`PeekMessage/TranslateMessage`您可以调用`WM_CHAR`消息，告诉您根据当前 IME 按下了哪个字符。这使您免于将键码转换为字符码，这对于非英语 IME 来说可能具有挑战性。

.NET 窗口是否具有与`WM_CHAR`windows 消息事件等效的功能？我能以某种方式获得它吗？显然，我可以监听关键事件[并将键码转换为字符码](https://stackoverflow.com/questions/318777/c-sharp-how-to-translate-virtual-keycode-to-char)，但它可能不如 windows 在内部执行它那么健壮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T08:52:47.860

您似乎正在寻找[KeyPress](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keypress.aspx)事件，以及提供的[KeyPressEventArgs](http://msdn.microsoft.com/en-us/library/system.windows.forms.keypresseventargs.aspx)实例的[KeyChar](http://msdn.microsoft.com/en-us/library/system.windows.forms.keypresseventargs.keychar.aspx)属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T08:52:49.710

最接近的方法`MFC`是使用 WndProc：

```
protected override void WndProc(ref Message m)
{

    if (m.Msg == WM_CHAR) //define WM_CHAR properly 
    {

    }
    base.WndProc(ref m);
} 
```

# amazon-web-services - 在 Amazon WS 上监控和扩展 WebSphere AS

> ID：15700054
> 
> 赞同：0
> 
> 时间：2013-03-29T08:49:35.700
> 
> 标签：amazon-web-services, amazon-ec2, websphere, amazon-cloudfront

我已经使用 WebSphere Application Server 在 AWS 服务器中部署了一个 Web 应用程序。

1.  是否可以监控：
    *   WebSphere Applicaiton Server 服务器状态容量监控？
    *   使用 Amazon CloudWatch 指标的正常运行时间？
2.  Autoscaling 也可以处理单个应用程序服务器的负载平衡吗？还是我们应该自己做？

更新：

1.  所以您（Jeevan Dongre）的意思是说 ELB 足以处理同一个 Web 应用程序的多个 AWS 实例（例如，在 3 个 AWS 实例中运行 3 个不同的应用程序服务器）。

2.  ELB 可以报告和处理实例，但不能报告和处理应用服务器的健康状况？如何处理？

3.在成本方面，当我选择 ELB 时，我需要运行 3-4 个实例吗？但我可以使用应用服务器负载平衡在两个 AWS 实例中运行 4 个应用服务器。

请告知哪个好做决定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:57:28.513

有很多工具可用于监控您的 ec2 实例，我个人使用 monit 和 munin 以及 pagerduty 和 pingdom 在停机期间发送警报和电话。您可以使用相同的工具或使用 GOD、nagios 和许多其他工具来监控您的应用服务器，因为大多数监控工具都可以灵活地监控您想要的任何内容。

负载均衡器根据与实例的最少连接数来处理流量。当您在一个实例中仅运行一个应用程序时，我认为不需要应用程序服务器负载平衡。ELB 足够聪明，可以访问您的实例的健康状况并据此转移流量，还有一个非常诚实的建议，确保您的应用程序操作系统状态更少并且不要坚持会话。它会影响应用性能的负载。AWS 本身就暗示了这一点。

如果您想处理应用服务器的运行状况，您可以使用 monit，monit 基本上有助于监控所需的应用服务器并据此采取必要的措施。

多个应用服务器之间的负载平衡必须手动完成。

但是我对在同一个实例中运行多个应用程序服务器并在它们之间进行负载平衡持怀疑态度，而不是我所做的是，我只运行一个应用程序服务器，但如果我获得更多流量，我会产生多个线程。

# javascript - 为什么 IE7 javascript array.indexOf 不起作用？

> ID：15700071
> 
> 赞同：4
> 
> 时间：2013-03-29T08:50:44.363
> 
> 标签：javascript, arrays, internet-explorer-7, indexof

为什么在 IE7 javascript array.indexOf 中不起作用？这是一个示例

```
function loaderFn()
{
    var arr=["0","1","2"];
    var b = arr.indexOf("1")
    alert("Index of 1 is "+b);
} 
```

在 IE7 第 4 行 (arr.indexOf("1"))

对象不支持属性或方法“indexOf”错误抛出

为什么只在 IE7 中出现这种情况？使用 IE7 的 javascript 在数组中查找索引值的方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T08:53:49.350

`document.ready`在你的方法中添加这个：

```
if(!Array.prototype.indexOf) {
    Array.prototype.indexOf = function(obj, start) {
         for (var i = (start || 0), j = this.length; i < j; i++) {
             if (this[i] === obj) { return i; }
         }
         return -1;
    }
} 
```

这是必需的，因为 IE 直到 IE8 才包含此方法。上面的函数检查它是否存在，如果不存在，它会用它扩展 Array 原型。

# vb.net - vb.net如何模拟键盘的keydown和keyup

> ID：15700073
> 
> 赞同：0
> 
> 时间：2013-03-29T08:50:53.737
> 
> 标签：vb.net, automation

我想知道如何模拟 keydown 和 keyup。就像我希望我的程序按住 ctrl 按钮 5 秒然后释放它。我使用自动热键完成了这项工作，这很容易，但我想为此制作一个 gui。这是我来自 autohotkey 的示例代码，我希望有人可以将其翻译到 vb.net 或帮助我进行 keydown 和 keyup。

```
INSERT::
    Sendinput, {LControl Down}
    Sleep 2000
    Sendinput, {LControl Up}
Return 
```

在上面的代码中，当我按下 INSERT 按钮时，它将按住左控制按钮 2 秒然后松开它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:37:57.720

您可以使用以下`keybd_event`功能：

```
Private Declare Sub keybd_event Lib "user32.dll" (ByVal bVk As Byte, ByVal bScan As Byte, _
ByVal dwFlags As Long, ByVal dwExtraInfo As Long) 
```

您可以在这里找到一些参考资料：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms646304%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646304%28v=vs.85%29.aspx)

# c# - C# Datareader 到 DTO？

> ID：15700075
> 
> 赞同：2
> 
> 时间：2013-03-29T08:50:58.700
> 
> 标签：c#, ado.net, dto

数据

```
Name | Value |  Date |

cat1 |     3 | date1 |
cat1 |     5 | date2 |
cat1 |     2 | date5 |
cat2 |     6 | date8 |
cat2 |     7 | date1 |
cat2 |     2 | date6 | 
```

DTO

```
public class MeterReadingsChartData
{
    public string name { get; set; }
    public List<DateTime> dates { get; set; }
    public List<double> values { get; set; }
} 
```

转换

```
 // first, I fetching datas from db to dataTable
 // second, I convert to datatable to another object list
 // for example IEnumerable<Readings> readings
 // third, like following; one more conversation too
 var chartSeries = readings.GroupBy(x => new { x.Name })
                   .Select(g => new
                    {
                        name = g.Key.Name ,
                        values = g.Select(x => x.Value).ToArray(),
                        dates = g.Select(x => x.Date).ToArray()
                    }).ToArray(); 
```

经过这三个对话，我的数据如下所示：

```
cat1: { values: {3 ,5, 2}, dates: {date1, date2, data5}
cat2: { values: {6 ,7, 2}, dates: {date8, date1, data6} 
```

我可以直接从数据库数据到 DTO 对话吗？例如，我想要像下面这样的东西。（可能有另一个对 db 的数据访问）

```
IEnumerable<MeterReadingsChartData> MeterReadingsChartData;
while (reader.Read())
{
     // fill chart data DTO
} 
```

有可能吗？如何？我希望，我可以解释...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T09:03:02.917

鉴于您的`dates`和`values`属性是可变列表，您可以一次读取一行（未分组），并键入一个按名称键入的字典，随时添加日期和值：

```
var readings = new Dictionary<string, MeterReadingsChartData>();
while (reader.Read())
{
     string name = reader.GetString(0);
     DateTime date = reader.GetDateTime(1);
     double value = reader.GetDouble(2);

     MeterReadingsChartData group;
     if (!readings.TryGetValue(name, out group))
     {
         group = new MeterReadingsChartData {
             Name = name, 
             Values = new List<double>(),
             Dates = new List<DateTime>()
         };
         readings[name] = group;    
     }
     group.Values.Add(value);
     group.Dates.Add(date);
} 
```

几点注意事项：

*   我已经对您的属性名称进行了 PascalCased 以遵循 .NET 命名约定
*   在您使用的 LINQ 代码中`ToArray`，如果您的属性确实是列表，则实际上不会编译...如果您的属性实际上是数组，则上述方法将不起作用
*   与其拥有两个单独的列表，不如使用一个列表，`List<Tuple<DateTime, double>>`甚至创建一个`Reading`仅包含日期和值的单独类。
*   您可以为您的 DTO 提供一个接受名称的构造函数，在构造函数中初始化列表，将列表属性设置为只读，还可以创建一个`AddReading(DateTime, double)`方法来使调用代码更简洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:16:35.833

@JonSkeet，我尝试按照您的建议进行操作，并且有效。但我不知道以下代码与您的建议完全一样...

DTO

```
public class MeterReadingsChartData
{
    public string Name { get; set; }
    public string TypeName { get; set; }
    public string Unit { get; set; }
    public List<Tuple<DateTime, double>> DateAndValue { get; set; }

    public MeterReadingsChartData(string name, List<Tuple<DateTime, double>> dateAndValue, string typeName, string unit)
    {
        this.Name = name;
        this.DateAndValue = dateAndValue;
        this.TypeName = typeName;
        this.Unit = unit;
    }
} 
```

数据获取和转换

```
var readings = new Dictionary<string, MeterReadingsChartData>();

while (reader.Read())
{
    string name = reader.GetString(5);
    DateTime date = reader.GetDateTime(1);
    double value = reader.GetDouble(2);
    string typeName = reader.GetString(3);
    string unit = reader.GetString(4);

    MeterReadingsChartData group;
    if (!readings.TryGetValue(name, out group))
    {
        group = new MeterReadingsChartData(name, new List<Tuple<DateTime, double>>(), typeName, unit);
        readings[name] = group;
        readings[typeName] = group;
        readings[unit] = group;
    }
    group.DateAndValue.Add(new Tuple<DateTime, double>(date, value));
} 
```

结果是我的预期。

非常感谢。

# java - servlet [com.jagrut.GroupServlet] 在路径 [/jaagrut] 的上下文中的 Servlet.service() 引发异常

> ID：15700085
> 
> 赞同：0
> 
> 时间：2013-03-29T08:51:48.680
> 
> 标签：java, mysql, servlets, jdbc

为什么这个错误来了..

```
Mar 29, 2013 2:04:26 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [com.jagrut.GroupServlet] in context with path          [/jaagrut] threw exception
   java.lang.NullPointerException
at com.jagrut.GroupServlet.doPost(GroupServlet.java:170)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

这是代码

```
 try {  
                        String queryString = "INSERT INTO groups(course_id,group_name,location,batch_no)"
                                + " VALUES ('"
                                + ccode
                                + "','"
                                + group
                                + "','"
                                + loc
                                + "','" + batch + "')";

                                st = con.createStatement();

                                last_id = st.executeUpdate(queryString);

                                 System.out.println(">>>>>>>llll" + last_id);
                                /* Getrting Group_id from groups table */

                                 if(last_id == 0){

                                        out.print("Group Already Available.");
                                        //return;
                                 }

                                    try{
                                    st1 = con.createStatement();
                                    rs1 = st1.executeQuery("SELECT group_id from groups Where group_name='"+ group + "'");
                                    while (rs1.next()) {
                                    group_id = rs1.getInt(1);
                                    }
                                    System.out.print(">>>>>>>" + group_id);
                                    /* Inserting DATA to Student Group */
                                    }catch (SQLException ex1) {

                                        System.out.print("Unable to Create Group.Duplicate Entry ");
                                        ex1.printStackTrace();

                                    }
                                    try {
                                            stmt1 = con.createStatement();
                                            for (int i = 0; i < stud.length; i++) {
                                                //System.out.println(stud[i]);
                                                String sql = "Insert into student_group(group_id,s_id)Values('" + group_id + "','" + stud[i] + "')";
                                                stmt1 = con.createStatement();
                                                updateQuery = stmt1.executeUpdate(sql);
                                            }
                                        } catch (Exception ex1) {

                                            out.println("Unable to Insert Student Into Group.");
                                            ex1.printStackTrace();
                                        }

                                        /* Inserting teacher into the group */
                                        try {
                                        String query = "Insert into teacher_group(group_id,t_id,join_date)Values('" + group_id + "','" + teacher + "','" + sqlDate + "')";

                                                st2 = con.createStatement();

                                                updateQuery = st2.executeUpdate(query);

                                                if (updateQuery != 0) {
                                                    out.println("Group Created Successfully");
                                                }
                                            } catch (Exception ex2) {

                                                out.println("Unable to Insert Teacher Into Group.");
                                                ex2.printStackTrace();
                                            }
                                        } catch (SQLException ex) {
                                            out.print("Group Already Available.");
                                                System.out.print("Unable to Create Group.Duplicate Entry ");
                                                ex.printStackTrace();

                                            }
                                        finally {
                                             // close all the connections.
                                            try {
                                                rs.close();
                                                stmt.close();
                                                st.close();
                                                rs1.close();
                                                stmt1.close();
                                                st1.close();
                                                st2.close();
                                                con.close();
                                            } catch (SQLException e) {

                                        e.printStackTrace();
                                    }
                                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:05:25.277

您的 finally 块应该是：

```
finally {
   try {
   if(rs != null) {
    rs.close();
   }

  if(stmt != null) {
     stmt.close();
  }

   if(st != null) {
    st.close();
   }
  } catch (SQLException e) {
  }//end try
}//end finally 
```

# extjs - 选项卡面板内的不同视图 - Sencha touch 2

> ID：15700087
> 
> 赞同：1
> 
> 时间：2013-03-29T08:51:54.960
> 
> 标签：extjs, sencha-touch, sencha-touch-2, sencha-architect

![图像](../Images/f0d2aaa4e2836a5db01506c3863b283d.png)

大家好，

我是 ST2 的新手，如果这是一个非常愚蠢的问题，我很抱歉。

我需要像这张图片一样制作一个用户界面。当按下侧栏中的按钮时，右侧的视图会发生变化。侧边栏也可以隐藏。

ST2 中是否有任何方法可以在运行时在容器中添加另一个视图，就像在 ios 中我们使用“[self.view addSubView:tV_coverage_view]？

例如，如果用户按下“TV Coverage”按钮，我应该创建一个“TV_Coverage_View”实例并将其添加到右侧容器中。而“TV_Coverage_Controller”将处理该视图中的所有内容。

我应该为左侧按钮面板和右侧使用哪种容器。

一些代码示例会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:34:00.787

对于左右部分，您应该使用 hbox 容器。例子：

```
Ext.create('Ext.Container', {
    fullscreen: true,
    layout: 'hbox',
    items: [
        {
            xtype: 'panel',
            html: 'message list',
            width : 250
        },
        {
            xtype: 'panel',
            html: 'message preview',
            flex: 1,
            layout : 'card'
        }
    ]
}); 
```

现在，因为您需要右侧的多个面板，所以您需要一个卡片布局作为父级。因此第二个面板。对于任何 sencha 应用程序，理解布局概念非常重要。请为此咨询煎茶指南。

现在要在右侧页面之间切换，请使用 add() 和 animateActiveItem() 函数。

# ios - UISwipeGestureRecognizer 工作方向错误

> ID：15700095
> 
> 赞同：0
> 
> 时间：2013-03-29T08:52:13.963
> 
> 标签：ios, cocoa-touch

我在图像视图中添加了 4 个 UISwipeGestureRecognizer。但是当我向右滑动时，会触发向上 UISwipeGestureRecognizer。当我向左滑动时，不会触发 UISwipeGestureRecognizer。当我向上滑动时，会触发左侧 UISwipeGestureRecognizer。当我向下滑动时，会触发向下 UISwipeGestureRecognizer。这是我的代码

```
 - (void)viewDidLoad
{
    [super viewDidLoad];
    //imageView is an outlet of image view
    imageView.userInteractionEnabled=YES;
    UISwipeGestureRecognizer *swipeRight=[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeRightAction)];
    swipeRight.direction=UISwipeGestureRecognizerDirectionRight;
    [imageView addGestureRecognizer:swipeRight];

    UISwipeGestureRecognizer *swipeLeft=[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeLeftAction)];
    swipeLeft.direction=UISwipeGestureRecognizerDirectionLeft;
    [imageView addGestureRecognizer:swipeLeft];

    UISwipeGestureRecognizer *swipeUp=[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeUpAction)];
    swipeLeft.direction=UISwipeGestureRecognizerDirectionUp;
    [imageView addGestureRecognizer:swipeUp];

    UISwipeGestureRecognizer *swipeDown=[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeDownAction)];
    swipeDown.direction=UISwipeGestureRecognizerDirectionDown;
    [imageView addGestureRecognizer:swipeDown];
}

- (void)swipeRightAction
{
    NSLog(@"swipe right");

}

- (void)swipeLeftAction
{
    NSLog(@"swipe left");

}

-(void)swipeUpAction
{

    NSLog(@"swipe up ");
}

-(void)swipeDownAction
{

    NSLog(@"swipe down ");
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ((interfaceOrientation == UIInterfaceOrientationLandscapeRight) ||
        (interfaceOrientation == UIInterfaceOrientationLandscapeLeft))
        return YES;
    return NO;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:54:04.610

你这里有一个错字：

```
UISwipeGestureRecognizer *swipeUp=[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeUpAction)];
// HERE
swipeLeft.direction=UISwipeGestureRecognizerDirectionUp;
[imageView addGestureRecognizer:swipeUp]; 
```

它应该是 swipeUp 而不是 swipeLeft。

# javascript - 在 QML 中加载页面时运行 javascript 函数

> ID：15700101
> 
> 赞同：23
> 
> 时间：2013-03-29T08:52:43.387
> 
> 标签：javascript, qt, qml

我想像这样运行js函数

```
function setPersonalInfoValue(){
        console.debug("setPersonalInfoValue()");
    } 
```

当页面以 QML 加载时。

我试过这个：

```
Rectangle {
    id: page2
    width: 100
    height: 62

    function setPersonalInfoValue(){
        console.debug("setPersonalInfoValue()");
    }
} 
```

当我在第 1 页和第 2 页之间切换时，我想运行 setPersonalInfoValue() 函数。我该怎么做？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-29T09:07:27.390

最后，我使用了：

```
Component.onCompleted: {
    setPersonalInfoValue();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T14:55:47.373

这个问题的答案取决于您切换页面的准确程度。如果您正在动态加载页面，那么您可以使用 Component.onCompleted。这将在 QML 完成加载对象时执行。如果您正在使用其他方法，例如更改可见性以显示不同的页面，那么您应该依赖该属性的 onChanged 信号。

# android - 使用 android 在朋友的 facebook 墙上发帖

> ID：15700108
> 
> 赞同：-1
> 
> 时间：2013-03-29T08:53:21.567
> 
> 标签：android, facebook

我需要使用 android 应用在朋友墙上发布一些东西。我找到[了这个链接](https://stackoverflow.com/questions/6479763/post-to-specific-friends-facebook-wall "发布到特定的朋友 Facebook 墙")。

我正在使用 Facebook Android SDK 3.0，现在我可以使用 app 成功登录 Facebook。

我想知道上面链接中提到的**mFacebook是什么。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:15:55.493

该库（Facebook Graph API）中有一个名为“Facebook”的类，它有几个方法。
其中之一是“授权”。

**mFacebook**是**Facebook**类的对象。

请参阅链接[http://developers.facebook.com/docs/reference/androidsdk/](http://developers.facebook.com/docs/reference/androidsdk/)和[https://graph.facebook.com/me/feed](https://graph.facebook.com/me/feed)

# python - XML PARSER - 为特定格式输出解析大文件

> ID：15700109
> 
> 赞同：1
> 
> 时间：2013-03-29T08:53:24.663
> 
> 标签：python, xml, xml-parsing, large-files, seek

我正在尝试解析一个*大的 xml*文件并将标签打印到输出文件。我正在使用*minidom*，我的代码对于 30Mb 文件运行良好，但对于较大的文件，它会出现内存错误。所以我使用缓冲读取文件，但现在我无法获得所需的输出。

## XML 文件

```
> <File> <TV>Sony</TV> <FOOD>Burger</FOOD> <PHONE>Apple</PHONE> </File>   
> <File> <TV>Samsung</TV> <FOOD>Pizza</FOOD> <PHONE>HTC</PHONE> </File>  
> <File> <TV>Bravia</TV> <FOOD>Pasta</FOOD> <PHONE>BlackBerry</PHONE> </File> 
```

## 期望的输出

索尼、汉堡、苹果
三星、披萨、HTC
Bravia、意大利面、黑莓

使用缓冲区阅读时，它给了我一个输出：-
Sony，Burger，Apple
*Samsung，Piz* Bravia，Pasta，BlackBerry

```
while 1:
    content = File.read(2048)
        if not len(content):
            break
         else:
             for lines in StringIO(content):
                lines = lines.lstrip(' ')
                if lines.startswith("<TV>"):
                   TV =  lines.strip("<TV>")
                   tvVal = TV.split("</TV>")[0]
                   #print tvVal
                   w2.writelines(str(tvVal)+",")
                elif lines.startswith("<FOOD>"):
                   FOOD =  lines.strip("<FOOD>")
                   foodVal = FOOD.split("</FOOD>")[0]
                   #print foodVal
                   w2.writelines(str(foodVal)+",")
                   ............................
                   ........................... 
```

我尝试使用**seek()**但仍然无法获得所需的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:26:54.630

您一次读取 2048 个字节，这会将读取光标放在一行的中间。在下一次读取中，该行的其余部分被丢弃，因为它不是以标签开头。

与其滚动您自己的解析器，不如考虑使用[`iterparse`](http://effbot.org/zone/element-iterparse.htm#incremental-parsing). 下面是一个示例，`iterparse`其中包含更快的版本[`lxml`](http://lxml.de/parsing.html)

```
import cStringIO
from xml.etree.ElementTree import iterparse

fakefile = cStringIO.StringIO("""<temp>
  <email id="1" Body="abc"/>
  <email id="2" Body="fre"/>
  <email id="998349883487454359203" Body="hi"/>
</temp>
""")
for _, elem in iterparse(fakefile):
    if elem.tag == 'email':
        print elem.attrib['id'], elem.attrib['Body']
    elem.clear() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:51:09.987

感谢您的支持，我终于编写了我的代码，它在这里工作得很好

```
import lxml import etree    
for event, element in etree.iterparse(the_xml_file):
    if 'TV' in element.tag:
        print element.text 
```

# magento - 与观察者更改商品价格后如何更新购物车总数？

> ID：15700112
> 
> 赞同：1
> 
> 时间：2013-03-29T08:53:35.923
> 
> 标签：magento, shopping-cart, subtotal

我想在购物车中添加一些免费礼物，所以我创建了一个观察者，代码是：

```
<?php
 class Free_Checkout_Model_Observer
{
    public function modifyPrice(Varien_Event_Observer $observer)
    {
        $event = $observer->getEvent();
        $quote = Mage::getModel('checkout/session')->getQuote();
        $quote_item = $event->getQuoteItem();
        $productId  = $event->getQuoteItem()->getProduct()->getId();

        $product        = Mage::getModel('catalog/product')->load($productId);
        $productData    = $product->getData();

        if($productData['gift']){
            $new_price = 0;
            $quote_item->setOriginalCustomPrice($new_price);
            $quote_item->setCustomPrice($new_price);
            $quote_item->save();
        }

    }

} 
```

但是当我将一个项目添加到购物车时，在购物车中，小计为 0，有人告诉我如何解决这个问题吗？当我再添加一项或刷新购物车页面时，小计是正确的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:37:27.237

尝试

```
$quote->collectTotals()->save() 
```

在你的函数结束时

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T10:36:59.753

试试这个

```
$quote = Mage::getSingleton('checkout/session')->getQuote();
foreach($quote->getAllItems() as $quote_item) {
    $product = Mage::getModel('catalog/product')->load($quote_item->getProductId());
    $productData  = $product->getData();
    if($productData['gift']){
        $new_price = 0;
        $quote_item->setOriginalCustomPrice($new_price);
        $quote_item->setCustomPrice($new_price);
        $quote_item->getProduct()->setIsSuperMode(true);
    }
}
$quote->save(); 
```

# jquery - jquery焦点功能不起作用

> ID：15700119
> 
> 赞同：1
> 
> 时间：2013-03-29T08:54:19.160
> 
> 标签：jquery

我做了一个 jquery 函数，当我们专注于文本框时，它的背景颜色应该改变，但它不起作用看看我的代码

```
<script type="text/javascript" src="jquery/jQueryv1.9.1.js"></script>

<script type="text/javascript">

$(document).ready(function(){

$('TextBox').focus(function(){

$(this).css('background-color', '#cccccc');

});

});

</script>

 <asp:TextBox ID="TextBox1" runat="server" CssClass="TextBox" meta:resourcekey="TextBox1Resource1"></asp:TextBox> 
```

帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:55:49.747

**替换**

```
$('TextBox').focus(function(){ 
```

**和**

```
$('#TextBox1').focus(function(){ 
```

使用 Jquery`ID`选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T08:58:42.040

改变

```
$('TextBox').focus(function(){ 
```

到

```
$('.TextBox').focus(function(){ // class selector
$('#TextBox1').focus(function(){ // id selector 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T08:56:49.553

您的 jQuery 应该用于控件的类（如果该类是您计划使用的）：

正确的语法：`$('.Textbox').focus(function()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T09:06:32.957

请根据页面配置尝试

> $('#TextBox1').focus(function(){ // id 选择器 });

如果您使用 MasterPage

> $('#<%=TextBox1.ClientID%>').focus(function(){ // id 选择器 });

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T09:56:39.783

注意：这并不是对原始问题的真正答案，但是在阅读了您的评论后，这可以更好地解决您的情况！

根据您的情况，使用选择器使用纯 css 解决这个问题会更好`:focus`。

```
input:focus
{ 
    background-color:yellow;
} 
```

# python - python json-rpc

> ID：15700121
> 
> 赞同：2
> 
> 时间：2013-03-29T08:54:37.237
> 
> 标签：python, json, rpc, json-rpc, squeezebox

在长时间停止编写软件之后，我开始为一个家庭自动化项目做出贡献，添加了一个用 Python 编写的挤压箱服务器客户端。

我有一些基础工作——开/关、播放/暂停/停止——但我真正想做的是能够响应来自挤压服务器的事件。

有一个可用的监听/订阅 rpc 方法：

```
curl -i -X POST -d '{"id":1,"method":"slim.request","params":["",["listen", "1"]]}' http://127.0.0.1:9000/jsonrpc.js 
```

我不知道从哪里开始编写 Python 代码，要执行以下操作：

*   拨打电话并收听任何通知

我看过 Twisted；看起来它会有所帮助，但似乎无法弄清楚发生了什么。

# php - symfony2 中的表单和电子邮件问题

> ID：15700123
> 
> 赞同：0
> 
> 时间：2013-03-29T08:54:49.347
> 
> 标签：php, symfony, fosuserbundle

当我点击提交按钮（POST 请求操作）时，我执行了以下代码：

```
public function earlySignupAction(Request $request)
{
    $user = new User();

    $form = $this->createFormBuilder($user)
        ->add('username', 'text')
        ->add('email', 'text')
        ->add('password', 'password')
        ->getForm();

    $form->bind($request);

    if ($form->isValid()) {
        $em = $this->getDoctrine()->getEntityManager();
        $userRepository = $em->getRepository('SiteUserBundle:User');
        $userFoundByUsername = $userRepository->findOneBy(array('username' => $user->getUsername()));

        if ($userFoundByUsername) {
            $this->get('session')->getFlashBag()->add('notice', "Already registered!\n We will notify you soon!");
        } else {
            $session = $this->getRequest()->getSession();
            $session->set('user', $user);
        }

        return $this->redirect($this->generateUrl('SiteMainBundle_signup_additional_info'));
    }else{
        foreach($form->getErrors() as $key => $error){
            $this->get('session')->getFlashBag()->add('error', $error->getMessage());
        }    
    }

    return $this->redirect($this->generateUrl('ShopiousMainBundle_signup_fail'));
} 
```

在树枝里面我有以下内容：

```
<form id="registerMiniForm" class="clearfix"  action="{{ path('SiteMainBundle_early_signup') }}" method="post" {{ form_enctype(userForm) }} novalidate>
                        {{ form_widget(userForm.username, { 'attr': {'class': 'validate[required,minSize[3]] arvo-regular', 'placeholder': 'Username'} }) }}
                        {{ form_widget(userForm.password, { 'attr': {'class': 'validate[required] arvo-regular', 'placeholder': 'Password'} }) }}
                        {{ form_widget(userForm.email, { 'attr': {'class': 'validate[required,custom[email],ajax[ajaxEmailCall]] input', 'placeholder': 'Email'} }) }}
                        {{ form_rest(userForm) }}
                        <div class="register-wrap">
                            <input class="arvo-bold button" type="submit" value="Register" />
                        </div>
                    </form> 
```

当我尝试打印 $user 变量时，我没有看到任何电子邮件，为什么？

```
class Site\UserBundle\Entity\User#367 (47) { protected $id => NULL protected $firstname => NULL protected $lastname => NULL protected $dni => NULL protected $birthday => NULL protected $website => NULL protected $biography => NULL protected $address => NULL protected $city => NULL protected $state => NULL protected $zipcode => NULL protected $phone => NULL protected $isFirstTimeAuthUsingFB => bool(true) protected $facebookId => NULL protected $profilePicture => NULL protected $shop => NULL protected $notification => NULL protected $shippingInfo => NULL protected $shoppingCart => NULL protected $paymentInfo => NULL private $followers => NULL private $following => NULL protected $invitedFriends => NULL protected $itemlikes => NULL protected $likeCount => int(0) protected $itemComments => NULL protected $commentCount => int(0) protected $shopTestimonials => NULL private $fullName => NULL protected $username => string(11) "alksdjasdla" protected $usernameCanonical => string(11) "alksdjasdla" protected $email => NULL protected $emailCanonical => NULL protected $enabled => bool(false) protected $salt => string(31) "jjkgwyjbnv488ccskk80wkc8gk4w080" protected $password => string(14) "lkasjdaslkdasd" protected $plainPassword => NULL protected $lastLogin => NULL protected $confirmationToken => NULL protected $passwordRequestedAt => NULL protected $groups => NULL protected $locked => bool(false) protected $expired => bool(false) protected $expiresAt => NULL protected $roles => NULL protected $credentialsExpired => bool(false) protected $credentialsExpireAt => NULL } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:06:34.710

绑定属性后 $user 不会持久化并刷新到数据库

添加`persist()`和`flush()`调用关闭此行

```
 $session = $this->getRequest()->getSession();
 $session->set('user', $user) ;

 $em->persist($user);
 $em->flush(); 
```

# python - python pandas groupby：key1的key2值的百分比

> ID：15700128
> 
> 赞同：0
> 
> 时间：2013-03-29T08:55:12.870
> 
> 标签：python, pandas

我有一个数据框，并按两个键对其进行分组`df.groupby(['key1',key2'])`。对于每个 key2 条目，如何显示其 key1 值的百分比？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T13:08:37.037

Here's an alternative method using one groupby statement.

Group by k1, select column k2 and apply a lambda function. The lambda gets frequency counts for each level of k2 *within* k1 and then we divide by the count of k1:

```
In [1]: df.groupby('k1')['k2'].apply(lambda x: pd.value_counts(x)/x.count().astype(float))

Out[1]:
k1
a   x    0.500000
    y    0.500000
b   y    0.666667
    x    0.333333 
```

Performance:

HYRY's method:

```
100 loops, best of 3: 3.07 ms per loop 
```

My method:

```
1000 loops, best of 3: 1.98 ms per loop 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T11:29:25.697

为“k1”和（“k1”，“k2”）调用 groupby 两次，然后执行`div`：

```
import pandas as pd
k1 = ["a", "a", "a", "a", "b", "b", "b"]
k2 = ["x", "x", "y", "y", "x", "y", "y"]
df = pd.DataFrame({"k1":k1, "k2":k2})

df.groupby(["k1", "k2"]).k2.count().div(
    df.groupby("k1").k1.count().astype(float), level=0) 
```

输出：

```
k1  k2
a   x     0.500000
    y     0.500000
b   x     0.333333
    y     0.666667 
```

# c - 在C中使用strcpy函数，不知道长度

> ID：15700129
> 
> 赞同：1
> 
> 时间：2013-03-29T08:55:14.053
> 
> 标签：c, string, strcpy

我试图编写一个简单的函数来获取名称并在添加扩展名后返回它。例如，如果我有指向“abcd”的 char 指针，该函数应该返回“abcd.as”

我试图编写这个函数来获取 char 指针并在添加扩展后返回指向新 char 的指针。但是不工作有人知道为什么吗？

```
char* AddFileExtension(char* FileName)
{
    char* FixFileName=NULL;
    char* Extension = ".as";
    strcpy(FixFileName, FileName);
    strcat(FixFileName, Extension);
    return FixFileName;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:57:10.253

您必须为以下内容分配内存`FixFileName`：

```
char* Extension = ".as";
char* FixFileName = malloc(strlen(FileName) + strlen(Extension) + 1); 
```

完成后不要忘记`free()`记忆。由于显而易见的原因，这必须在函数之外完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:01:59.140

你必须分配内存，分配内存`FixFileName`的大小应该是 `FileName`+`sizeof(".as")`

**注意：**将`sizeof`计算字符串的空字符，`".sa"`因此无需为字符串的空字符加 1`FixFileName`

```
char* AddFileExtension(char* FileName)
{
#define EXTENSION_AS ".as"    
    char* FixFileName= malloc(strlen(FileName) + sizeof(EXTENSION_AS));

    sprintf(FixFileName, "%s%s", FileName, EXTENSION_AS);
    return FixFileName;
} 
```

当分配的内存在您的程序中变得无用时，不要忘记释放分配的内存`free()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:08:13.243

```
char* AddFileExtension(char* FileName)
{
    char* FixFileName=NULL;
    char* Extension = ".as";
    FixFileName=(char *) malloc(strlen(FileName)+strlen(Extension)+1);
    strcpy(FixFileName, FileName);
    strcat(FixFileName, Extension);
    return FixFileName;
} 
```

试试上面的代码。完成后必须释放内存

# c - 两个看似相同的代码具有不同的结果（将指针传递给结构）

> ID：15700130
> 
> 赞同：0
> 
> 时间：2013-03-29T08:55:17.653
> 
> 标签：c, pointers, struct, typedef

我刚刚创建了以下代码来帮助调试我们必须编写的 C 项目，该项目最终应该模拟 UNIX 文件系统。我一直在努力弄清楚为什么两个看似相同的代码块会产生不同的输出。当我通过在 main() 文件中键入相同的代码行来模拟我的函数 mkfs() 应该具有的相同行为时，它可以完美地工作，但是当我尝试使用该函数时（实际上是相同的代码行！ !!!!!），它只是说运行失败。当我在我的 main() 函数中执行当前已注释掉的代码时，它运行良好并且确实将“/”打印到控制台，但是当我尝试创建指向文件系统的指针时，在其上调用 mkfs()，然后打印出相同的字符串，它只是不起作用。

我一定是不明白什么。这是代码，但如果您更喜欢语法突出显示，那么这里有一个指向 pastebin 的小链接：http: [//pastebin.com/9yCB1iND](http://pastebin.com/9yCB1iND)

```
#include <stdio.h>
#include <stdlib.h>

typedef struct directory {
    const char *name;
    struct file *f;
    struct directory *dir;
} Directory;

typedef struct file {
    const char *name;
    struct file *next;
    struct file *prev;
    Directory *parent;
} File;

typedef struct filesystem {
    Directory *rt;
    Directory *cd;
} Filesystem;

/* The function mkfs() initializes the Filesystem. It takes a pointer to a 
 * filesystem as its single parameter and allocates the memory needed ( it 
 * allocates the space needed to accomodate the two Directory pointers 
 * that a filesystem has). */
    void mkfs(Filesystem *files){

    /*The first malloc creates enough space for Filesystem itself*/
    files = malloc(sizeof(Filesystem));

    /*The second malloc creates enough space for a root Directory*/
    files->rt = malloc(sizeof(Directory));

    /*We make a character array with a single slash that represents root*/
    char nv[] = "/";
    /* nv is a pointer to the first element in the array nv[]. 
     * We point 'files->rt->name' to the first character in the array nv[]. */
    files->rt->name = nv;
    /* Finally, we set files->cd to point to whatever files->rt pointed too, 
     * which is the current directory "/" */
    files->cd = files->rt;
}

int main(void) {
    /*
    Filesystem *files;
    files = malloc(sizeof(Filesystem));
    files->rt = malloc(sizeof(Directory));
    char nv[] = "/";
    files->rt->name = nv;
    files->cd = files->rt;
    printf("%s", files->cd->name);

        ---------------------------------------------------------------------------
        Why does the FOLLOWING code not work when the ABOVE code should be "the same" ?
        ---------------------------------------------------------------------------
    */

    Filesystem *f;
    mkfs(f);
    printf("%s", f->cd->name);

    return (EXIT_SUCCESS);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:58:46.910

当你这样打电话时

```
mkfs(f); 
```

的副本`f`被传递给 mkfs。该副本是更改的副本（即 malloc 的返回值用于初始化该副本。但是，`f`in`main`没有更改。

因此，当你这样做

```
printf("%s", f->cd->name); 
```

在 main - 这是未定义的行为，因为您正在访问未初始化的指针。

你的程序还有其他问题

您`nv`是该功能的本地人。它的生命只有在函数返回之前。所以这是错误的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:00:15.273

在`mkfs`功能上：

```
char nv[] = "/";
files->rt->name = nv; 
```

`nv`是一个具有自动存储持续时间的数组，当执行超出此函数的范围时，其生命周期结束，`files->rt->name`成为*悬空指针*，取消引用会导致***未定义的行为***。您需要`files->rt->name`动态分配。

另请注意，`mkfs`函数需要指向 的指针`Filesystem`，这只是传递给它的指针的副本。对指针本身所做的更改对调用者是不可见的，这意味着当您调用时`printf("%s", f->cd->name);`，您正在取消引用未初始化的指针，这也会导致***未定义的行为***。如果要`mkfs`分配内存并正确初始化指针，则应传递此指针的地址：

```
void mkfs(Filesystem **files) {
    *files = malloc(sizeof(Filesystem));
    (*files)->rt = malloc(sizeof(Directory));
    char nv[] = "/";
    (*files)->rt->name = malloc(strlen(nv) + 1);
    strcpy((*files)->rt->name, nv);
    (*files)->cd = (*files)->rt;
}

int main(void) {
    Filesystem *f = NULL;  // <-- it's good to keep your variables initialized
    mkfs(&f);
    ...
} 
```

如果你不需要你的函数来改变这个指针指向的内存，而不是指针本身，它可能看起来像这样：

```
void mkfs(Filesystem *files) {
    files->rt = malloc(sizeof(Directory));
    char nv[] = "/";
    files->rt->name = malloc(strlen(nv) + 1);
    strcpy(files->rt->name, nv);
    (*files)->cd = files->rt;
}

int main(void) {
    Filesystem *f;
    f = malloc(sizeof(Filesystem));
    mkfs(f);
    ...
} 
```

# css - 如何修复 div 的长标题

> ID：15700131
> 
> 赞同：0
> 
> 时间：2013-03-29T08:55:39.470
> 
> 标签：css, html, fonts

标题有点棘手哈哈抱歉……想不出更合适的标题。

所以我在这个网站上工作：http: [//www.whybaguio.com/php/profile/businessprofile.php?id=1603](http://www.whybaguio.com/php/profile/businessprofile.php?id=1603)

我有一个小问题...如果企业名称太长，像这样： [http](http://www.whybaguio.com/php/profile/businessprofile.php?id=164) ://www.whybaguio.com/php/profile/businessprofile.php?id= 164 类别和 Facebook 喜欢按钮消失，可能会下降...

比如可能会自动更改字体大小或其他什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:59:57.930

给`#cat2b`标签`display:block`（或使用`div`代替）并从div`span`中删除所有`br`标签。`#buscontent`

* * *

不确定您的页面布局是如何发生的。无论如何，为了避免未来的错误给`overflow-x: auto`和。（我不推荐这个，但我认为你的布局确实需要从一开始就修复）`height: 15px``#cat2b`

# java - 极端条件下如何连接java代码和c++库

> ID：15700135
> 
> 赞同：0
> 
> 时间：2013-03-29T08:55:44.810
> 
> 标签：java, c++, java-native-interface

我有 Java 代码，它调用 C++ 库（dll）。连接架构是

```
Java - > wrapper.dll(Win32) -> target.dll(Win32) 
```

wrapper.dll - 以前程序员的库。我没有实际的代码，并在 Win32 平台上编译库。target.dll - 第三方库，其中没有源代码，但有适用于所有平台的版本。

我怎样才能用它迁移到 Linux？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:33:23.410

您也许可以通过 Wine 运行 Windows 版本的 java。目前至少在 Linux 上无法链接到 Windows DLL。

否则，您将不得不重写包装器或使用 JNA 直接调用原始库中的函数。这可能比您想象的要容易。

# java - 如何在android中的两个活动之间切换？

> ID：15700142
> 
> 赞同：0
> 
> 时间：2013-03-29T08:56:11.503
> 
> 标签：java, android

嗨，我有两个片段活动？主要活动启动第二个活动？现在我经常在这些之间切换两次。

在正常活动中这是不可能的。如果我从第二个活动切换到主要活动，第二个活动将从堆栈中弹出并被销毁。这里有片段活动，这可能吗？如果是这样，如何实现这一目标？

在启动主要活动并按下主要活动上的按钮后，我启动了第二个片段活动。然后我已经使用android手机上的后退键移动到主要片段活动，但现在我想回到我通过按下主要活动上的按钮启动的第二个片段活动。请帮忙？

以下是我的代码：-

以下是主文件。

```
 <application android:allowBackup="true" >
    <activity
        android:theme="@android:style/Theme.Dialog"
        android:name="com.ymd.ipmsg.main.MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:theme="@android:style/Theme.Dialog"
        android:name="com.ymd.ipmsg.activities.ChatActivity"
        android:label="@string/title_activity_chat"
        android:parentActivityName="android.support.v4.app.FragmentActivity" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="android.support.v4.app.FragmentActivity" />
    </activity>
</application> 
```

以下是我的activity_chat.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:orientation="vertical"   >

<fragment android:name="com.ymd.ipmsg.fragments.DeviceFragmentTB"
          android:id="@+id/tb_fragment"
          android:layout_weight="1"
          android:layout_width="match_parent" 
          android:layout_height="30dp"/>

    </LinearLayout> 
```

以下是我的activity_main.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:orientation="vertical"   >

<fragment android:name="com.ymd.ipmsg.fragments.DeviceFragmentTB"
          android:id="@+id/tb_fragment"
          android:layout_weight="1"
          android:layout_width="match_parent" 
          android:layout_height="30dp"/>

    </LinearLayout> 
```

以下是我的 device_frag.ml

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/device_layout"
android:layout_width="match_parent"
android:layout_height="wrap_content" 
android:orientation="horizontal" >

<TextView
    android:id="@+id/name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:text="@string/device_name" 
    android:textIsSelectable="true" 
    android:tag="name" />

<TextView
    android:id="@+id/device"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:text="@string/device_type" 
    android:textIsSelectable="true" 
    android:tag="device"/>

<TextView
    android:id="@+id/ipadd"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:text="@string/device_ip" 
    android:textIsSelectable="true"
    android:tag="ipadd" />  

    </LinearLayout> 
```

下面是我的 DeviceFragmentTB.java

```
 package com.ymd.ipmsg.fragments;

    import android.content.Intent;
    import android.graphics.Color;
    import android.os.Bundle;
    import android.support.v4.app.Fragment;
    import android.view.Gravity;
    import android.view.LayoutInflater;
    import android.view.View;
    import android.view.ViewGroup;
    import android.view.ViewTreeObserver;
    import android.widget.TextView;

    import com.ymd.ipmsg.activities.ChatActivity;
    import com.ymd.ipmsg.main.R;

    public class DeviceFragmentTB extends Fragment  {

private Boolean flag=true;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    super.onCreateView(inflater, container, savedInstanceState);
    View view=inflater.inflate(R.layout.device_frag, container, false); 
    TextView nameView = (TextView)view.findViewById(R.id.name);
    nameView.setOnClickListener(new View.OnClickListener() {            
        @Override
        public void onClick(View v) {
            Intent intent=new Intent(v.getContext(),ChatActivity.class);
            startActivity(intent)   ;

        }
    });
    view.findViewById(R.id.device_layout).getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {

        @Override
        public void onGlobalLayout() {
            if(flag){
                View deviceLayout = getView().findViewById(R.id.device_layout);
                int deviceFragWidth=deviceLayout.getWidth();
                int eachViewWidth=deviceFragWidth/3;                    
                TextView nameView = (TextView)getView().findViewById(R.id.name);
                nameView.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL);
                nameView.setTextSize(25);
                nameView.setBackgroundColor(Color.DKGRAY);
                nameView.setTextColor(Color.RED);
                nameView.setWidth(eachViewWidth);
                TextView deviceView = (TextView)getView().findViewById(R.id.device);
                deviceView.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL);
                deviceView.setTextSize(25);
                deviceView.setTextColor(Color.RED);
                deviceView.setBackgroundColor(Color.DKGRAY);
                deviceView.setWidth(eachViewWidth);
                TextView ipaddView = (TextView)getView().findViewById(R.id.ipadd);
                ipaddView.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL);
                ipaddView.setTextSize(25);
                ipaddView.setBackgroundColor(Color.DKGRAY);
                ipaddView.setTextColor(Color.RED);
                ipaddView.setWidth(eachViewWidth);                      
                flag=false;
                System.out.println("ok sir");
            }               
        }
    });

    return view;
}   

    } 
```

以下是我的 MainActivity.java

```
 package com.ymd.ipmsg.main;

    import android.annotation.TargetApi;
    import android.content.Intent;
    import android.os.Build;
    import android.os.Bundle;
    import android.support.v4.app.FragmentActivity;
    import android.support.v4.app.NavUtils;
    import android.view.Gravity;
    import android.view.Menu;
    import android.view.MenuItem;
    import android.view.View;
    import android.view.Window;
    import android.view.WindowManager;
    import android.widget.LinearLayout;
    import android.widget.TextView;

    import com.ymd.ipmsg.activities.ChatActivity;
    import com.ymd.ipmsg.fragments.DeviceFragment;

    public class MainActivity extends FragmentActivity implements DeviceFragment.DeviceFragmentListener{

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    // Show the Up button in the action bar.
   // setupActionBar();

}   

@Override
public void onDeviceSelected(View view){
    String ip=null;
    if(((String)view.getTag()).equalsIgnoreCase("ipadd")){
        TextView tv=(TextView)view;
        ip=tv.getText().toString();
    }else{
        LinearLayout llo=(LinearLayout)view.getParent();
        TextView tv= (TextView)llo.getChildAt(2);
        ip=tv.getText().toString();
    }       
}

@Override
public void onWindowFocusChanged(boolean hasFocus) {
    // TODO Auto-generated method stub
    super.onWindowFocusChanged(hasFocus);
    Window win=getWindow();     
    WindowManager.LayoutParams wlp=win.getAttributes();
    wlp.gravity=Gravity.LEFT | Gravity.TOP;
    wlp.x=10;
    wlp.y=10;
    wlp.width=200;
    wlp.height=400;
    win.setAttributes(wlp);

}

    } 
```

以下是我的聊天活动 ChatActiviy.java

```
 package com.ymd.ipmsg.activities;

    import android.annotation.TargetApi;
    import android.os.Build;
    import android.os.Bundle;
    import android.support.v4.app.FragmentActivity;
    import android.support.v4.app.NavUtils;
    import android.view.Gravity;
    import android.view.Menu;
    import android.view.MenuItem;
    import android.view.Window;
    import android.view.WindowManager;

    import com.ymd.ipmsg.main.R;

    public class ChatActivity extends FragmentActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_chat);
    // Show the Up button in the action bar.
    //setupActionBar();
}

@Override
public void onWindowFocusChanged(boolean hasFocus) {
    // TODO Auto-generated method stub
    super.onWindowFocusChanged(hasFocus);
    Window win=getWindow();     
    WindowManager.LayoutParams wlp=win.getAttributes();
    wlp.gravity=Gravity.LEFT | Gravity.TOP;
    wlp.x=10;
    wlp.y=450;
    wlp.width=200;
    wlp.height=400;
    win.setAttributes(wlp);

}

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:29:53.590

假设我们有两个活动 A 和 B。在你的清单文件中添加这个

```
 <activity
        android:name=".B"
        android:theme="@android:style/Theme.Dialog" /> 
```

它会正常工作。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:06:10.210

如果你想从

1 `-A -> B`（都是活动）

在按钮点击上使用它

```
Intent intent = new Intent(this,B.class);
startActivity(intent); 
```

2-`B -> A`

在按钮单击上使用它

```
finish() 
```

couse`finish()`将完成您当前的活动。你会得到你以前的屏幕

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-17T08:22:38.483

`activity`您的假设是错误的，如果您导航到第二个活动，Android 不会破坏。它不会`onDestroy`仅仅因为一个新的活动被带到前台而调用它的方法。

# ios - 如何从混合应用程序打开推文表？

> ID：15700144
> 
> 赞同：0
> 
> 时间：2013-03-29T08:56:13.013
> 
> 标签：ios, ipad, twitter-bootstrap, sencha-touch, sencha-touch-2

我想要从我的 Sencha Touch 混合应用程序中发布一些链接/文本的功能，就像本教程中显示的那样（不离开当前应用程序，从弹出窗口中发布推文）：

[http://www.raywenderlich.com/21558/beginning-twitter-tutorial-updated-for-ios-6](http://www.raywenderlich.com/21558/beginning-twitter-tutorial-updated-for-ios-6)

这可能来自混合应用程序吗？有人可以给我看一些代码或指向一个解释这个的教程吗？我更喜欢非 phonegap 解决方案，但如果没有其他出路，请建议我如何使用 phonegap 来做到这一点，因为我对此不太了解。

我尝试过的一种方法是像这样使用 Twitter 的 URL 方案

```
twitter://post?message=SomeText 
```

但这会打开整个 Twitter 应用程序并且我的应用程序会关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:18:33.060

使用此 url 在 twitter 中分享：

```
var url = http://www.twitter.com/share?text=your text goes here 
```

如果您使用的是 Phonegap，那么他们可能在 phonegap 2.3 中添加了 inAppBrowser 选项，您只需要在 window.open() 函数中打开 url。

```
window.open(url, '_blank'); 
```

请参阅此[链接](http://docs.phonegap.com/en/2.5.0/cordova_inappbrowser_inappbrowser.md.html)以获取 inAppBrowser 文档。

# mysql - Mysql语句返回没有外键的主键？

> ID：15700147
> 
> 赞同：0
> 
> 时间：2013-03-29T08:56:26.663
> 
> 标签：mysql, phpmyadmin

我想在数据库中查询没有关系（即外键）的节点。我尝试了这个加入声明，但它没有用

```
SELECT nodes.*, relationships.* FROM nodes inner JOIN relationships ON nodes.id = null; 
```

如何只显示没有关系的节点？谢谢你

```
nodes                 Relationships                      
-----                 -------------
id int(11),           id int(11),
name varchar(35),     to int(11), //this is the destination node from the id relation 
color varchar(7),     data varchar(0) null
type varchar (12),    Foreign key (id) references nodes(id)
Primary key (id)       

engine = innodb 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:58:37.817

您的问题是您必须在带有连接的语句中`ON nodes.id = null`使用列名。`ON`如果你想设置`nodes.id = null`，使用它`where`

```
SELECT 
    nodes.*
FROM 
    nodes left JOIN relationships ON nodes.id = Relationships.id
where
    Relationships.id is null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:59:10.350

```
SELECT * FROM nodes WHERE id NOT IN (SELECT `to` from Relationships); 
```

这将返回关系表中没有 id 的节点

最佳实践也是在您的数据库中仅使用小写字母，因为某些数据库区分大小写，而另一些则不区分大小写。

# c# - 从 html 单选按钮获取价值 - 在 aspx-c#

> ID：15700148
> 
> 赞同：13
> 
> 时间：2013-03-29T08:56:37.337
> 
> 标签：c#, asp.net, html, radio-button, radiobuttonlist

我有以下 HTML 源

```
<form name="Register1" action="Register.aspx" id="registerform" method="post" 
      runat="server" style="margin-top: 15px;">
    <input type="radio" name="Gender" value="male" />male
    <input type="radio" name="Gender" value="female" />female
</form> 
```

我的问题是如何在 c# 页面中将选定的值转换为变量？

我试过这个：

```
Gender = Request.Form["Gender"].ToString(); 
```

但它没有用...

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-29T09:09:07.230

像这样放置您的代码：

```
 if (Request.Form["Gender"] != null)
 {
     string selectedGender = Request.Form["Gender"].ToString();
 } 
```

请注意，`Request.Form["Gender"]`如果未选择任何 RadioButtons，则该值将为 null。

请参阅下面的标记

```
<form id="form1" runat="server" method="post">
    <input type="radio" name="Gender" value="male" id="test" checked="checked" />
    male
    <input type="radio" name="Gender" value="female" />female
    <input type="submit" value="test" />
    <asp:Button ID="btn" runat="server" Text="value" />
</form> 
```

对于按钮 ie`input type="submit"`和通常`asp:button`，`Request.Form["Gender"]`将在 上具有一些值`PostBack`，前提是选择了 RadioButtons 中的任何一个。

是的，`PostBack`仅当您按下任何一个按钮而不是第一次加载时。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T09:11:57.367

首先，您需要发布表单，表单集合在页面加载时不会有任何内容，因此假设您有一个按钮并单击以提交表单，然后在单击事件处理程序中您可以使用代码获取所选值你试过了。

我猜这个集合是空的，因此当你访问它时会出现 NullReference 异常。

最好像这样访问它

```
if(!string.IsNullOrEmpty(Request.Form["Gender"]))
{

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T09:00:30.680

用一个`RadioButtonList`

```
<asp:RadioButtonList id="RadioButtonList1" runat="server">
    <asp:ListItem value="male">male</asp:ListItem>
    <asp:ListItem value="female">female</asp:ListItem>
</asp:RadioButtonList> 
```

并获得价值

```
RadioButtonList1.SelectedValue; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-18T17:49:23.600

如果您正在使用 asp.net，请确保 Request.Form 的 HTML 控件名称包含这些 ct100$ 以及您正在评估的名称或 id。检查下面的例子。

```
int rbratebyname = 0;

if (Request.Form["ctl00$ContentPlaceHolder1$rate"] != null)
{
    rbratebyname = int.Parse(Request.Form["ctl00$ContentPlaceHolder1$rate"]);
} 
```

# javascript - 剪贴板和拖放文件上传器（HTML + JS）

> ID：15700150
> 
> 赞同：0
> 
> 时间：2013-03-29T08:56:40.297
> 
> 标签：javascript, jquery, html, file-upload, blueimp

我正在寻找具有 HTML 和 JS 技术的文件上传器的实现。目标是让它在大多数平台上运行，但至少在 Google Chrome、FireFox 和 IE9+ 上运行，并具有复制和粘贴屏幕截图以及拖放的能力。

不幸的是，那里的人并不多。我更喜欢[blueimp](http://blueimp.github.com/jQuery-File-Upload/)，因为它易于实现。另一种可能是[imgur](http://imgur.com)使用的一种。但因此我没有找到任何 git-repo。

主要目标是在GC、FF和IE9+中使用它，具有截屏和粘贴功能，并且具有拖放功能。即使有silverlight或flash之类的后备。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:02:14.550

我过去用过这个

[https://github.com/valums/file-uploader](https://github.com/valums/file-uploader)

如果我没记错的话，效果很好。

现在它移到了 [https://github.com/Widen/fine-uploader](https://github.com/Widen/fine-uploader)

它不使用闪光灯，并且具有拖放功能。

“制作截图并粘贴的功能”是什么意思？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T13:06:54.657

[Fine Uploader](http://fineuploader.com)在 3.4 中支持复制和粘贴图像上传，该版本将在未来几天发布。此支持最初仅适用于 Chrome。让它在 Firefox 和其他不正确支持剪贴板 API 的浏览器中工作可能会在另一个版本中发生，因为这将需要更多的工作，并且可能需要一些服务器端的魔法。

[您可以在我写的关于该主题的博客文章](http://blog.fineuploader.com/2013/03/upload-image-via-paste-in-34.html)中阅读有关 Fine Uploader 中复制/粘贴图像支持的更多信息。如果您有兴趣，还可以[在 Github 中查看和评论相关的功能案例](https://github.com/Widen/fine-uploader/issues/487)。

完全披露：我是 Fine Uploader 的主要维护者。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T12:05:47.407

所以，我有自己的解决方案。

我将它实现到[blueimp fileuploader](http://blueimp.github.com/jQuery-File-Upload/)中。

@Ray Nicholus，以防万一您需要任何帮助，请尝试在 FF 中粘贴图像：

插入内容可编辑的 div：

```
<div id="editable" style="position: absolute; left: -99999;" contenteditable></div> 
```

在粘贴的情况下使用这个：

```
document.onpaste = function(event){
                    $('#editable').focus();

                    setTimeout(function()
                    {
                       //get the base64 image
                       var src = $('#editable').find('img:first').attr('src');
                       //doing something with the image... and clearing the div
                       $('#editable').empty();
                    }, 10); 
```

**编辑**：当然你必须验证它是否是图像。

非常感谢您的努力。如果您的优秀上传者在线使用新功能，我会试一试；）我也希望会有更具体的演示，我可以在不下载示例的情况下试一试。

丹尼尔

# c++ - 重复几乎相同代码的宏

> ID：15700159
> 
> 赞同：5
> 
> 时间：2013-03-29T08:57:12.160
> 
> 标签：c++, c-preprocessor

我必须根据编译时间常数参数编写相同的代码，例如：

```
map["text 0"] = vec[0];
map["text 1"] = vec[1];
...
map["text n"] = vec[n]; 
```

问题是我不知道`n`何时编写代码，我将其作为模板参数接收。显而易见的解决方案是使用一个循环并`"text k"`在循环内部生成并使用`vec[k]`，但这会在编译时完成时会产生运行时开销。另一种解决方案是将函数专门用于不同的`N`值，但这样我将不得不多次手动编写相同的代码，并且没有理由将其设为模板。

我知道有一些智能宏可以重复类似的事情 N 次（如`BOOST_PP_REPEAT`宏系列），但我找不到针对我的具体问题的解决方案。

你有解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T09:17:11.517

除非您有非常*非常*严格的性能限制，否则没有理由担心运行时开销。无论如何，插入都将在运行时执行，并且插入时间肯定会支配更改字符串中的字符所需的时间。

此外，宏很难调试和维护：尽可能避免使用它们。在这里，我建议展开一个简单的循环：

```
std::string s = "text 0";
std::map<std::string, int> m;
for (int i = 0; i < N; i++)
{
    m[s] = vec[i];
    s[5] = '1' + i; // This is going to be the run-time overhead...
} 
```

如果您的数字高于`9`，在 C++11 中，您可以使用该`to_string()`函数将整数转换为字符串：

```
std::string const s = "text ";
std::map<std::string, int> m;
for (int i = 0; i < N; i++)
{
    m[s + std::to_string(i)] = vec[i];
} 
```

*如果性能被证明是一个问题*，那么您可以尝试基于宏的更核心的方法。但是，如果您的测量结果不会显示显着的开销，**则更喜欢简单明了**，并展开一个简单的循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:06:50.550

我相信以下应该有效：

```
#include <boost/preprocessor.hpp> 
//... or just the required sub-headers

// Will generate code for 0, 1, ... (N_END - 1)
#define N_END 10

#define ONE_ASSIGNMENT(maZ, maIter, maData) \
    if (maIter <= n) map["text " BOOST_PP_STRINGIZE(maIter)] = vec[maIter];

BOOST_PP_REPEAT(N_END, ONE_ASSIGNMENT, %%) //this generates the code

#undef ONE_ASSIGNMENT
#undef N_END 
```

请注意，`if()`将文字与模板参数 ( `n`) 进行比较，因此任何值得其加盐的优化器都会从中生成无分支代码。

我将`%%`其用作“从未使用过此值”。它被传递到`maData`参数中，所以如果你有一些有用的东西可以实际传递（例如`"text "`），你可以这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:33:08.300

重复对我来说似乎不是问题，但是 int 到 string 的编译时转换和随后的连接确实如此。可以通过以下技术（未经测试）解决重复问题：

```
template<k,l> struct fill_vector {
    static void doIt (... & vec) {
        vec [INT_TO_TEXT (k)] = k;
        fill_vector<k+1,l-1>::doIt (vec);
    }
};

template<k> struct fill_vector<k,0> {
    static void doIt (... & vec) {
        vec [INT_TO_TEXT (k)] = k;
    }
};

//...

fill_vector<0,n>::doIt (vec); 
```

也许有人知道如何实施`INT_TO_TEXT`

# libgit2 - 在 libgit2 中存储 pop

> ID：15700162
> 
> 赞同：2
> 
> 时间：2013-03-29T08:57:32.947
> 
> 标签：libgit2

`git_stash_save()`允许保存更改，类似于`git stash`. 回退有什么功能`git stash pop`吗？

我可以看到`git_stash_foreach()`和`git_stash_drop()`。有没有办法使用它们来实现这个功能？

* * *

编辑：根据[nulltoken 的](https://stackoverflow.com/users/335418/nulltoken)回答，我预计以下代码可以工作：

```
void tstStashPop ( const char * repo_path )
{
  git_repository *repo;
  git_commit * top_cmt;
  git_oid saved_stash;
  git_tree * top_tree;
  git_signature *signature;

  // open a repository
  if ( git_repository_open(&repo, repo_path) != 0 )
  {
    assert(false);
  }
  else
  {
    // create a signature
    git_signature_new(&signature, "no name", "no.name@gmail.com", 1323847743, 60);

    if ( git_stash_save( &saved_stash, repo, signature,
               "message for this stash", /*GIT_STASH_INCLUDE_UNTRACKED*/0) 
       != GIT_ENOTFOUND )
    {
      // get the commit that was saved by git stash save
      if ( git_commit_lookup( &top_cmt, repo, &saved_stash ) != 0 ) 
      {
        assert(false);
      }
      else
      {
        // get the tree for this commit
        if ( git_commit_tree( &top_tree, top_cmt ) != 0 )
        {
          assert(false);
        }
        else
        {
          // checkout the tree
          git_checkout_opts opts;
          opts = GIT_CHECKOUT_OPTS_INIT;
          opts.checkout_strategy = GIT_CHECKOUT_SAFE_CREATE;
          if ( git_checkout_tree( repo, (git_object*)top_tree, &opts ) != 0 )
          {
            assert(false);
          }
        }
      }
      // remove the stashed commit
      git_stash_drop( repo, 0 );
    }

    // free signature
    git_signature_free(signature);

    // free repo
    git_repository_free(repo);
  }
} 
```

没有报告错误，但未恢复更改。`git_stash_save()`有效（我可以看到消息`git stash list`）并且`git_stash_drop()`也有效。但是，`git_checkout_tree()`不会产生任何效果。

另外，我应该免费`top_tree`吗`top_cmt`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:44:43.263

> 是否有**git stash**将更改弹出的功能？

还没有。实际上，`git stash (pop | apply)`会将存储的内容与工作目录的当前内容合并。

不幸的是，在 libgit2 中**尚不**`merge`可用。

 **## 更新

> 但是， git_checkout_tree() 没有任何效果。

您可能希望通过`opts.checkout_strategy`. 默认值是试运行，不会更新任何内容。

您可以参考**[include/git2/checkout.h](https://github.com/libgit2/libgit2/blob/development/include/git2/checkout.h#L23-L153)**以获取有关选项的更多详细信息。

> 另外，我应该释放 top_tree 和 top_cmt 吗？

确实`git_tree_free()`，`git_commit_free()`在这里会很有用。

或者，您可以避免调用并直接传递将其剥离到树中`git_commit_tree()`的提交。`git_checkout_tree()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T14:23:01.383

最终变体作为未来搜索者的复制粘贴片段：

```
void tstStashPop ( const char * repo_path )
{
  git_repository *repo;
  git_commit * top_cmt;
  git_oid saved_stash;
  git_tree * top_tree;
  git_signature *signature;

  // open a repository
  if ( git_repository_open(&repo, repo_path) != 0 )
  {
    assert(false);
  }
  else
  {
    // create a signature
    git_signature_new(&signature, "no name", "no.name@gmail.com", 1323847743, 60);

    if ( git_stash_save( &saved_stash, repo, signature,
               "message for this stash", /*GIT_STASH_INCLUDE_UNTRACKED*/0) 
       != GIT_ENOTFOUND )
    {
      // get the commit that was saved by git stash save
      if ( git_commit_lookup( &top_cmt, repo, &saved_stash ) != 0 ) 
      {
        assert(false);
      }
      else
      {
        // get the tree for this commit
        if ( git_commit_tree( &top_tree, top_cmt ) != 0 )
        {
          assert(false);
        }
        else
        {
          // checkout the tree
          git_checkout_opts opts;
          opts = GIT_CHECKOUT_OPTS_INIT;
          opts.checkout_strategy = GIT_CHECKOUT_SAFE_CREATE;
          if ( git_checkout_tree( repo, (git_object*)top_tree, &opts ) != 0 )
          {
            assert(false);
          }
          git_tree_free(top_tree);
        }
        git_commit_free(top_cmt);
      }
      // remove the stashed commit
      git_stash_drop( repo, 0 );
    }

    // free signature
    git_signature_free(signature);

    // free repo
    git_repository_free(repo);
  }
} 
```**

# r - 使用 R 程序进行 Excel 电子表格操作

> ID：15700164
> 
> 赞同：1
> 
> 时间：2013-03-29T08:57:39.183
> 
> 标签：r, excel

我想知道 R 是否可以在 excel 中操作表格？例如，在一个 excel 电子表格中，我有 3 张不同的工作表......如果我想找到特定列的每一行的平均值/平均值并将输出放在不同的工作表中......这可能吗？我将如何去做？....将 XLConnect 用作​​我的函数或不同包的来源是否明智？

# c# - 在 wcf 安全模式设置中设置时钟偏差的目的是什么

> ID：15700166
> 
> 赞同：1
> 
> 时间：2013-03-29T08:57:47.480
> 
> 标签：c#, wcf

我的 WCF 应用程序中出现了由时钟偏差引起的问题。我很困惑微软为什么要设置这个规则。为什么当服务器和客户端之间的时钟偏差超过设置的最大值时服务拒绝请求。（我不确定它是否被服务器拒绝，它以任何方式引发异常）。

在 wcf 安全模式设置中设置时钟偏差的目的是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T09:05:50.983

这是一项防止[重放攻击](http://en.wikipedia.org/wiki/Replay_attack)的安全功能。本质上，创建消息时的安全时间戳仅在有限的时间内有效，并在此之后过期。但是为了使服务和客户在一个公差范围内的共同时间上工作，服务和客户必须达成一致。这就是 maxclockskew 设置的作用。

这里有一些信息[http://msdn.microsoft.com/en-us/library/ms733063.aspx](http://msdn.microsoft.com/en-us/library/ms733063.aspx)

# vmware - 在我的 ESX 中部署 OVA 时出错

> ID：15700168
> 
> 赞同：1
> 
> 时间：2013-03-29T08:58:15.780
> 
> 标签：vmware, esx, vsphere

当我尝试将我的 OVA 部署到我的 ESX 中时出现此错误：

![截屏](../Images/4849da8a674dc7f4c8c78f2e6e7a96a8.png)

第 33 行：

```
 <System>
   <vssd:ElementName>Virtual Hardware Family</vssd:ElementName>
   <vssd:InstanceID>0</vssd:InstanceID>
   <vssd:VirtualSystemIdentifier>PF9SOSNA1</vssd:VirtualSystemIdentifier>
   <vssd:VirtualSystemType>vmx-09</vssd:VirtualSystemType>
 </System> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:53:24.603

vmx-09 仅与 vSphere5 或 Workstation8 兼容 - 但它可能会在对 ovf 文件进行少量编辑的旧主机上运行。

编辑 ovf 文件（在任何文本编辑器中 - 例如写字板）。将 vmx-09 替换为 vmx-07。关闭并保存。

但是，当您现在运行 ovftool 进行导入时，您将收到错误消息“文件 xxxx.ovf 的 SHA1 摘要与清单不匹配”。

您可以通过简单地删除或重命名清单文件来解决此问题 - ovftool 会发出警告说没有清单文件，但会继续导入 VM。我使用了线程顶部给出的导入命令 -

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-31T04:08:21.180

清除此错误的步骤：

1.  提取所需的 .ova 文件，提取后将创建 .ovf 和 .mf 文件。

2.  编辑 .ovf 文件，在以文本模式打开后将 vmx-09 更改为 vmx-7 并保存更改。

3.  删除 .mf 文件。

4.  使用 VMWare 工作站打开 .ovf 文件。

5.  VM 未检测到 ide0 错误，因此在 VM ware 上打开机器时选择“否”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-13T17:47:44.407

您可以在原始虚拟机中（在导出为 OVA 之前）将 VMX 文件中的项目更改`<<virtualHW.version = "10">>`为`<<virtualHW.version = "7">>`. 之后导出为 OVA 并在 ESX 上部署您的 OVA。它适用于在 VMPLAYER 中创建为 VMX 的机器。如果没有这个技巧，就不可能在 ESX 上部署它。

# sql - 我无法从数据库中选择值

> ID：15700169
> 
> 赞同：0
> 
> 时间：2013-03-29T08:58:19.033
> 
> 标签：sql, vb.net

我想在gridview中获取那些完成= 0的数据

我写了这个查询

```
select * from tbl where done=0 
```

但我从数据库中获取所有数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:18:35.107

我有一个例子：

```
SELECT * FROM `bat` WHERE `b_runs`= 0; 
```

在这里，您可能必须更改列的数据类型。

它适用于`INT`数据类型。

或者你可以使用：

```
SELECT * FROM `bat` WHERE `b_runs`LIKE '0' ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:21:34.307

如果我没记错的话；done 是保留字。
尝试以下操作：

```
 select * from tbl where [done]=0 
```

# java - 如何从表中获取属性

> ID：15700170
> 
> 赞同：0
> 
> 时间：2013-03-29T08:58:27.453
> 
> 标签：java, javascript, dom

我有下表

```
<table>
  <thead>
    <tr>
      <th col="value2"></th>
    </tr>
   </thead>
  <tbody>
     <tr id="value1">
       <td></td>
      </tr>
   </tbody
<table> 
```

我使用以下内容从`<tr>`

```
"row_id": this.parentNode.getAttribute('id') 
```

我正在尝试使用以下内容从中获取 col 值，`<th>`但它返回一个空值。

```
"colName": this.getAttribute('col') 
```

我将如何正确获取 col 属性值`<th>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:02:31.457

试试这个dom函数：

```
document.getElementsByTagName("th")[0].getAttribute("col"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:09:29.650

```
$(document).ready(function () {
      console.log($('table thead tr th').attr('col'));

}); 
```

这将给第一个 tr 你可以做的是检查行数或使用 foreach 循环

# ruby - New Relic 不发送数据

> ID：15700175
> 
> 赞同：0
> 
> 时间：2013-03-29T08:58:50.880
> 
> 标签：ruby, ruby-on-rails-3, heroku, newrelic, linode

我在 linode 上安装了我的 rails 应用程序的 newrelic 代理。应用程序正在使用独角兽，我做了一些魔术（[https://newrelic.com/docs/ruby/no-data-with-unicorn](https://newrelic.com/docs/ruby/no-data-with-unicorn)），但我的仪表板上仍然没有数据。另一方面 - 我已经将我的应用程序从 heroku 迁移到 linode 并且在 heroku 上它工作正常（我已经从仪表板中删除了旧的应用程序配置文件）。

你能给我任何想法 - 我怎样才能确定问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:03:46.117

很难调试这种情况，但是缺少 newrelic 日志文件似乎存在一些基本设置问题。

尝试再次查看安装说明。如果这无助于通过 newrelic 提高支持票。他们是一群乐于助人的人，你会很快得到答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:56:21.493

我找到了我的问题的解决方案。这是因为我忘记从应用程序配置文件中删除一些环境变量 - NEW_RELIC_APP_NAME、NEW_RELIC_ID、NEW_RELIC_LICENSE_KEY、NEW_RELIC_LOG。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-30T07:57:07.450

如果您在 heroku 上使用新的遗物插件，您的数据将位于[https://heroku.newrelic.com](https://heroku.newrelic.com)。 **尝试去应用程序资源并单击新的遗物插件。**

# css - CSS优化，提取公共部分？

> ID：15700177
> 
> 赞同：1
> 
> 时间：2013-03-29T08:59:07.977
> 
> 标签：css

对于以下 CSS 样式：

```
#div a {color:red}
#div li {width:100px}
#div span {font-size:10px} 
```

有没有办法把上面的规则写成

```
#div{
a {color:red}
li {width:100px}
span {font-size:10px}
} 
```

所以只需要编写一次#div 并且易于删除或模块化网页的不同区域

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:01:47.077

你听说过“少”（[http://lesscss.org/](http://lesscss.org/)）这可以为你做这样的事情。

更少，您的样式代码正是您在上面编写的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:03:56.953

不，你不能用纯 CSS 做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:04:44.983

这在现在用 CSS 是不可能的（浏览器不支持这种语法），但作为开发人员，可以使用**[LESS](http://lesscss.org/)**或**[SASS](http://sass-lang.com/)**（它们是最常见的）。

LESS 扩展了 CSS 的动态行为，例如变量、mixin、操作和函数。

SASS 是 CSS3 的扩展，添加了嵌套规则、变量、mixin、选择器继承等。使用命令行工具或网络框架插件将其转换为格式良好的标准 CSS。

您也可以在**[这里](http://css-tricks.com/sass-vs-less/)**比较两者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T09:05:16.370

有一种方法可以做到这一点，但不是纯 css。作为替代方案，您可以使用这些：

*   [较少的](http://www.lesscss.org)
*   [萨斯](http://sass-lang.com/)

网络上有更多这样的超集，但 LESS 和 Sass 可能是最常见的。

语法以您要求的方式嵌套，并且与本机 css 兼容。

# java - 了解 BTree 容量

> ID：15700182
> 
> 赞同：1
> 
> 时间：2013-03-29T08:59:48.913
> 
> 标签：java

我对 BTrees 的理解是：

> *   如果根 BTree 大小为 32，则级别 1 有 1024 个键容量
> *   级别 2 可以排序 1048576 个键
> *   第 1 层的实际容量为 512，第 2 层的实际容量为 524288，因为叶子已填满一半。

我还好还是很明显是出于担心？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-04-08T09:22:02.953

计算Btree容量的公式：假设最大子节点数为D，则任何节点的最大键数为D-1。级别 1（根级别）始终有一个具有 D-1 键的节点。级别 2 最多可以有 D 个节点，每个节点最多可以有 D-1 个键，所以级别 2 有 D*(D-1) 个键。级别 3 最多可以有 D^2 个子节点（因为级别 2 中的任何节点都可以有 D 个子节点，而级别 2 中最多有 D 个节点）。第 3 层中的每个节点最多可以有 D-1 个键，因此第 3 层中的键数为 D^2 * (D-1)，依此类推……对于任何第 i 层，最大键数为键是 D^(i-1) *(D-1)。因此，树的容量是通过将每个级别的容量相加得到的。

# c++ - 在 dll 上使用 CppUnit 运行单元测试

> ID：15700184
> 
> 赞同：0
> 
> 时间：2013-03-29T08:59:55.363
> 
> 标签：c++, unit-testing, cppunit

我有一个 Visual Studio 项目，其中包含我们的一个模块的 CppUnit 测试用例。该项目在构建时会创建一个 dll（类似于 ModuleUnitTest.dll）。我没有得到如何运行这些测试？CppUnit 中是否有任何现成的存根可以从这个 dll 中读取并运行测试？还是我必须自己写？由于这些单元测试用例很早就可以使用并且没有存根代码，我相信我不需要编写一个。有人可以告诉我如何从 dll 执行测试吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:19:44.780

在您的测试代码中的某个地方，您需要一个测试运行器。标准答案是创建一个像 CppUnitTestMain.cpp 这样的文件并添加类似这样的代码（直接来自 cppunit 文档）：

```
#include <cppunit/extensions/TestFactoryRegistry.h>
#include <cppunit/ui/text/TestRunner.h>

int main( int argc, char **argv)
{
  CppUnit::TextUi::TestRunner runner;
  CppUnit::TestFactoryRegistry &registry = CppUnit::TestFactoryRegistry::getRegistry();
  runner.addTest( registry.makeTest() );
  bool wasSuccessful = runner.run( "", false );
  return wasSuccessful;
} 
```

因为如果这是一个单独编译的项目，则 TestRegistry 信息不可用，我认为您最终会使用 LoadLibrary 进行一些编码以引入 DLL，然后从中获取信息以添加到测试运行程序。并非不可能，但这是您必须自己解决的工作。

但是手动处理测试注册表是宏应该为您轻松处理的额外工作。这导致了我要问的更大的问题，这就是为什么您的测试当前位于 DLL 项目中？如果他们没有被处决，你对他们做什么？是否有其他可执行文件加载和运行它们可以利用？

我们通常使用的答案是让测试项目本身成为可执行文件，而不是 DLL，并包含所有测试代码。它通过链接器附加依赖项设置静态链接业务逻辑：$(SolutionDir)businessProject\debug\obj*.OBJ 文件，并在解决方案中添加对正在构建的主要 businessProject 代码的项目依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-18T17:59:15.827

Visual Studio 的Youse **Test Explorer**浮动面板。

# php - 三字符搜索不起作用

> ID：15700186
> 
> 赞同：1
> 
> 时间：2013-03-29T08:59:56.670
> 
> 标签：php, mysql, full-text-search, character-limit

我在我的数据库表引擎类型中使用`FullText`搜索是.`MySQL``MyISAM`

现在的问题是，如果他们输入了三个单词，我想允许使用搜索记录。

但问题是`FullText`不允许我搜索少于 4 个字符的记录。

> **我知道我可以进行更改`ft_min_word_len`以使其正常工作，但是当我上传它时，我需要在服务器上进行更改，而且我使用的是共享主机，所以很难。**

那么我怎样才能让它在 mysql Query 中工作。

我认为当 word 少于 4 个字符 use`LIKE`子句并且当它大于 4 个 use 时`fulltext`，这是正确的方法吗？

**代码**

```
App::import('Sanitize');

if(strlen($this->params['named']['q']) <= 4)
{
    $lessWord = "+".$this->params['named']['q'];
}
else
{
    $lessWord = $this->params['named']['q'];
}

$escapedQuery = str_replace(" ","* ",Sanitize::escape($lessWord)).'*';

array_push($this->paginate['conditions'],"MATCH(ServiceRequest.title, ServiceRequest.description) AGAINST ('".$escapedQuery."' IN BOOLEAN MODE)");

$this->paginate['fields'] = array
(
    '*',
    "MATCH(ServiceRequest.title, ServiceRequest.description) AGAINST ('".$escapedQuery."' IN BOOLEAN MODE) AS score"
);
$this->paginate['order'] = "score DESC"; 
```

我已经使用了上面的代码。

是否可以搜索三个字符？

我也尝试过`+str*`，但现在仍在工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:15:13.363

ft_min_word 是 MySQL 服务器的设置。在托管服务器的情况下，您无法在 ini_set（用于 PHP）中更改它。服务器是独立的，如果您的主机有多个用户使用同一服务器（这是共享服务器的标准），他们将使用相同的设置。

.htaccess 设置也是如此：这只能更改 apache 的反应方式（如果允许更改），而不是数据库服务器的配置方式。

[手册](http://dev.mysql.com/doc/refman/5.1/en/server-system-variables.html#sysvar_ft_min_word_len)中描述的变量不是可以在运行时设置的[动态变量](http://dev.mysql.com/doc/refman/5.1/en/dynamic-system-variables.html)

所以你可以试试：

检查搜索词的长度，如果小于 ft_min_word 允许的长度，则使用 LIKE('%searchterm%')

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:08:17.210

更改此行

```
if(strlen($this->params['named']['q']) <= 3) 
```

# joomla - 如何知道模块是否实际显示在活动菜单项下

> ID：15700189
> 
> 赞同：0
> 
> 时间：2013-03-29T08:59:58.117
> 
> 标签：joomla, joomla2.5

在我的模板的 index.php 中，我输入了代码：

```
<?php
if ($this->countModules('position-8')) {
    if($this->countModules('position-7')) $wdth = 660;
        else $wdth = 890;
?>
<jdoc:include type="modules" name="position-8" style="widemodule" width=$wdth />
<?php }; ?> 
```

但是第二个条件总是成立，因为我在其他页面上的位置 7 有一个模块。如何知道位置 7 中的模块不仅存在且处于活动状态，而且实际显示在*当前*菜单项下的该页面上？

# c# - 将 JavaScript 转换为 C# 时遇到问题

> ID：15700197
> 
> 赞同：-1
> 
> 时间：2013-03-29T09:00:20.820
> 
> 标签：c#, javascript, converter

在将此 javascript 转换为 C# 时，我有点困惑...

任何帮助，将不胜感激！

这是javascript：

```
function wphc(){
var wphc_data = [1017872750,833265020,934642472,816229227,732988517,619502701,716280186,1843763834,1861340473,1843781160,1861340473,1810226984,1777451834,2142819379,1018004607,850040663,984711544,2147409184];
for (var i=0; i<wphc_data.length; i++){
wphc_data[i]=wphc_data[i]^1606808584;
}
var a = new Array(wphc_data.length);
for (var i=0; i<wphc_data.length; i++) {
a[i] = String.fromCharCode(wphc_data[i] & 0xFF, wphc_data[i]>>>8 & 0xFF, wphc_data[i]>>>16 & 0xFF, wphc_data[i]>>>24 & 0xFF);
}
return eval(a.join(''));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:13:43.030

将数字转换为文本的部分很简单：

```
int[] wphc_data = { 1017872750, 833265020, 934642472, 816229227, 732988517, 619502701, 716280186, 1843763834, 1861340473, 1843781160, 1861340473, 1810226984, 1777451834, 2142819379, 1018004607, 850040663, 984711544, 2147409184 };
for (var i = 0; i < wphc_data.Length; i++) {
  wphc_data[i] = wphc_data[i] ^ 1606808584;
}
var a = new StringBuilder();
for (var i = 0; i < wphc_data.Length; i++) {
  a.Append((char)(wphc_data[i] & 0xFF));
  a.Append((char)(wphc_data[i] >> 8 & 0xFF));
  a.Append((char)(wphc_data[i] >> 16 & 0xFF));
  a.Append((char)(wphc_data[i] >> 24 & 0xFF));
}
string code = a.ToString(); 
```

现在你有了一段 JavaScript 代码。您需要一个 Javascript 引擎来评估它。

但是，您可以使用以下方法获得相同的结果：

```
int wphc(){
  return 481450227;
} 
```

# xslt-1.0 - 如何使用 xslt 去除节点名称中“_”右侧的字符

> ID：15700200
> 
> 赞同：0
> 
> 时间：2013-03-29T09:00:26.133
> 
> 标签：xslt-1.0

我的要求是将所有包含 _ 的节点名称重命名为新名称。如何去除节点名称中 _ 的右侧字符并将名称的左侧保留为新节点名称？例如

```
<abc_2013></abc_2013> to be renamed as <abc></abc> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T05:06:22.610

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="*[contains(name(), '_')]">
  <xsl:element name="{substring-before(name(),'_')}"
               namespace="{namespace-uri()}">

     <xsl:apply-templates select="node()|@*"/>
  </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于此 XML 文档时**：

```
<abc_2013>xYz</abc_2013> 
```

**产生想要的正确结果**：

```
<abc>xYz</abc> 
```

**说明**：

1.  正确使用和覆盖**[身份规则](http://www.dpawson.co.uk/xsl/sect2/identity.html)**。

2.  正确使用功能**[`substring-before()`](http://www.w3.org/TR/xpath/#function-substring-before)**

# ios - 如何在 3D 世界中绘制 2D 对象

> ID：15700202
> 
> 赞同：0
> 
> 时间：2013-03-29T09:00:27.323
> 
> 标签：ios, opengl-es

我正在尝试使用 OpenGL ES 1.1 在我的 3D 世界中绘制粒子（在 2D 中）。

3D 世界（没有 2D 粒子）如下所示： [3D 世界没有粒子](https://www.dropbox.com/s/dujs9bsrcv1l233/iOS%20Simulator%20Screen%20shot%20Mar%2028,%202013%2010.18.26%20PM.png)

当尝试在 3D 世界中绘制 2D 粒子时，它看起来像这样（注意网格现在以某种方式移动到左下角）： [3D 世界尝试使用粒子](https://www.dropbox.com/s/erv5vopspa5lt2e/iOS%20Simulator%20Screen%20shot%20Mar%2028,%202013%2010.17.56%20PM.png)

但是，我希望它直接在 3D 网格上绘制。关于如何实现这一点或为什么将其移至左下角的任何想法？

这是我到目前为止的工作。

```
- (void)drawFrame
{    
    [(EAGLView *)self.view setFramebuffer];

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

/////////////  3D Drawing the Grid floor

    glDisable(GL_BLEND);
    glDisable(GL_TEXTURE_2D);
    glEnable(GL_DEPTH_TEST);
    glDepthFunc(GL_LESS);
    glDepthMask(GL_TRUE);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    static GLfloat z = 0;
    gluLookAt(0, 5, -10, 0, 0, 0, 0, 1, 0);
    z += 0.075f;

    // Rotate the scene
    glRotatef(angle, 0, 1, 0);

    // Draw the Floor
    glColor4f(1.0f, 1.0f, 1.0f, 1.0f);
    glDisableClientState(GL_COLOR_ARRAY);
    glEnableClientState(GL_VERTEX_ARRAY);
    glVertexPointer(3, GL_FLOAT, 0, zFloorVertices);
    glDrawArrays(GL_LINES, 0, 42);
    glVertexPointer(3, GL_FLOAT, 0, xFloorVertices);
    glDrawArrays(GL_LINES, 0, 42);

////////////  2D drawing the particle system

    glMatrixMode(GL_MODELVIEW); 
    glLoadIdentity();
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();

    glOrthof(0.0f, 320.0f, 0.0f, 480.0f, -100.0f, 100.0f);

    glDisable(GL_DEPTH_TEST);
    glDisable(GL_CULL_FACE);
    glEnable(GL_TEXTURE_2D);
    glEnable(GL_BLEND);

    [explosion1 update:UPDATE_INTERVAL];

    if (explosion1.active != YES)
    {
        explosion1.sourcePosition = Vector2fMake(200, 200);
        explosion1.active = YES;
        explosion1.duration = 1;
        explosion1.sourcePositionVariance = Vector2fMake(0, rand() % 20);
    }

    [explosion1 renderParticles];

    [(EAGLView *)self.view presentFramebuffer];
}

- (void)initOpenGLES1
{
    // Set the clear color
    glClearColor(0, 0, 0, 1.0f);

    // Projection Matrix config
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    CGSize layerSize = self.view.layer.frame.size;
    gluPerspective(45.0f, (GLfloat)layerSize.width / (GLfloat)layerSize.height, 0.1f, 750.0f);

    // Modelview Matrix config
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    // This next line is not really needed as it is the default for OpenGL ES
    glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glDisable(GL_BLEND);

    // Enable depth testing
    glEnable(GL_DEPTH_TEST);
    glDepthFunc(GL_LESS);
    glDepthMask(GL_TRUE);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:34:02.650

想通了，不得不重置 3D 渲染的 gluPerspective。

```
// 3D
glMatrixMode(GL_PROJECTION);
glLoadIdentity();

CGSize layerSize = self.view.layer.frame.size;
gluPerspective(45.0f, (GLfloat)layerSize.width / (GLfloat)layerSize.height, 0.1f, 750.0f);

glMatrixMode(GL_MODELVIEW);
glLoadIdentity(); //gets rid of any rotations, movement, or other changes to the virtual world and puts us back at the origin standing upright

.... 
```

# ios - CoreData NSFetchResult 问题

> ID：15700204
> 
> 赞同：1
> 
> 时间：2013-03-29T09:00:33.890
> 
> 标签：ios, core-data, nspredicate, nsfetchrequest

我在编写正确的 NSPredicate 时遇到了一个非同寻常的问题。我有以下模型结构（仅显示了一个相关模型） ![在此处输入图像描述](../Images/4fc8b8d0b8c21997c7cf7993665e831b.png)

如您所见，有四个 AttributeValue 实体继承自父实体。现在我需要使用谓词执行请求。

```
NSFetchRequest *request = [[[NSFetchRequest alloc] init] autorelease];
[request setEntity:[NSEntityDescription entityForName:@"Entity" inManagedObjectContext:managedObjectContext];
[request setIncludesPropertyValues:NO];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ANY attributeValues.value = %@",@"Certain value"];

[request setPredicate:predicate];
NSArray *results = [managedObjectContext executeFetchRequest:request error:&error]; 
```

当然这个请求会导致异常：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'keypath attributeValues.value not found in entity <NSSQLEntity Entity id=11>'
*** 
```

因为基础实体确实没有`value`属性。有没有办法绕过这种情况？我需要从实体端以这种方式填充数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:54:58.757

您正在引用类型的实体`AttributeValue`。这个实体有一个`value`字段，但从模式中不清楚它是什么类型或它引用什么。我认为您不能在子实体中有意义地重复相同的属性名称。

如果要引用字符串，则必须通过关系`AttributeValueString`将实体连接到您的`Entity`实体。您不能将父实体用作“包罗万象”。子实体从其父实体继承属性，但不用于代替关系。（您可能会因为模型模式视图中的漂亮箭头而感到困惑；-）。

因此，在您的情况下，您将需要来自`Entity`实体的四种不同关系来表示所有值类型。

让我建议一个不同的设置。恕我直言，将适当的属性添加到`AttributeValue`类本身并取消子实体更为可行。您始终可以将未使用的留空。如果需要，您甚至可以添加`type`指示类型的属性（某种枚举）。

```
AttributeValue
|_____ stringValue
|_____ integerValue
|_____ doubleValue
|_____ binaryValue
|_____ type 
```

这似乎是一个更加健壮和易于管理的设置。

在您的谓词中，您必须**明确说明您要查询的数据类型**。从良好的编程实践的角度来看，这似乎也是有道理的。

# wpf - 无法在 ComboBox WPF 中使用多选项目保存

> ID：15700205
> 
> 赞同：2
> 
> 时间：2013-03-29T09:00:45.307
> 
> 标签：wpf, entity-framework, mvvm, combobox

`Entity Framework`我正在使用and创建一个应用程序`MVVM`。在我的应用程序中，我`combobox`使用[以下链接创建了一个](http://www.c-sharpcorner.com/UploadFile/1a81c5/multi-select-combobox-in-wpf/)

在这个链接中，这正是我想要实现的。使用户能够从组合框中选择多个项目。下面的图片将使您更好地理解我想要创建的内容。

![组合框](../Images/ef7187cfc99231311888c7d013f13886.png)

到现在为止还挺好。但是在我的应用程序中，我将我分配给我`Properties`的`EntityFramework`实体中的数据对象，以将数据保存到数据库中。

虚拟机构造函数；

```
 public EmployeeViewModel(DataObjects.Employee e)
        : base("")
    {
        EmployeeID = e.EmployeeID;
        Title = e.Title;
        FirstName = e.FirstName;
        Surname = e.Surname;
        Position = e.Position;
     } 
```

但就像在示例网络链接中一样，组合框绑定的类型如下；

```
private Dictionary<string, object> _items;
public Dictionary<string, object> Items
    {
        get
        {
             return _items;
        }
        set
        {
             _items = value;
             OnPropertyChanged("Items");
        }
    } 
```

因此，如果我在构造函数中执行以下操作，则会产生以下错误；

```
 Items = e.BenefitsProvided; 
```

*错误 1 ​​无法将类型“字符串”隐式转换为“System.Collections.Generic.Dictionary”*

这引出了我的问题。我如何设法将类型分配给`Dictionary<string, object>`我的名为 BenefitsProvided 的 Employee 表中的类型，它是一个 nvarchar？有没有可以使用的转换器？

任何帮助或实现这一目标的替代方法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:04:50.447

如果我正确理解您的模型，则该属性`BenefitsProvided`是一个`string`包含员工的各种福利的字符串，以逗号分隔的列表形式显示，例如`"Voucher,Accomodation,Medical"`. 在这种情况下，您可以将字符串拆分为子字符串数组并使用此数组创建字典：

```
Items = new Dictionary<string, object>();
string[] elements = e.BenefitsProvided.Split(',');
foreach (var element in elements)
    Items.Add(element, element); 
```

或者使用 LINQ 以更紧凑的形式：

```
Items = e.BenefitsProvided.Split(',').ToDictionary(s => s, s => (object)s); 
```

我在这里假设字典的`string`键和`object`值都应该是相同的文本。

# java - 使用 apache POI 在 IDE 中无法识别 workbook.createSheet() 方法

> ID：15700209
> 
> 赞同：0
> 
> 时间：2013-03-29T09:01:01.023
> 
> 标签：java, apache, apache-poi

我正在尝试学习 apache poi，但方法 workbook.createSheet() 似乎无法被 IDE 识别。查看那里的建议，许多方法可用于工作簿对象，但不适用于 createSheet 方法。

```
Workbook wb = Workbook.createWorkbook((List<Record>) response.getOutputStream());
Sheet s = wb.createSheet(); <<-- not working for me. 
```

我的导入语句看起来像这样，我不知道是什么问题。也许我需要打盹。

```
import org.apache.*;
import org.apache.poi.hssf.model.Sheet;
import org.apache.poi.hssf.model.Workbook;
import org.apache.poi.hssf.record.Record; 
```

编辑：

我正在使用的库，我刚刚下载了它，并将其添加为 eclipse 中的外部库

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T12:57:05.710

您正在导入错误的类！

`org.apache.poi.hssf.model.*`应该只用于低级处理。您想要的课程在`org.apache.poi.ss.usermodel`. 在那里你会找到正确的[createSheet 方法](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/Workbook.html#createSheet%28%29)

如果您遵循[Apache POI 示例](http://poi.apache.org/spreadsheet/quick-guide.html#NewSheet)，您最终会得到类似的结果：

```
import org.apache.poi.ss.usermodel.*;

Workbook wb = WorkbookFactory.open(new File("myfile.xls")); // or .xlsx
Sheet s = wb.createSheet();

// Add some more data, then save 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:07:17.820

根据此[文档](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/Workbook.html#createSheet%28%29)，您应该导入

```
import org.apache.poi.ss.usermodel.Workbook; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T12:14:16.507

考虑到我没有太多时间，以及两个 API 之间的功能比较，我现在只使用 JXL。

# android - 在android中自动生成dimen.xml

> ID：15700212
> 
> 赞同：2
> 
> 时间：2013-03-29T09:01:13.383
> 
> 标签：android, android-layout, android-widget

我已经使用硬编码值（填充、度量和等）构建了所有布局。有没有办法自动将值传输到dimen.xml？

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:23:00.213

AFAIK，您无法自动为硬编码项目生成 dimen.xml。您需要根据需要为 ldpi、mdpi、hdpi、xhdpi 手动创建 dimen.xml 文件，并使用该维度引用而不是硬编码值。没有其他方法可以做到这一点。

# jquery - Jquery 打开 div onclick 底部按钮

> ID：15700215
> 
> 赞同：-1
> 
> 时间：2013-03-29T09:01:30.303
> 
> 标签：jquery, html

```
<div id="Slider-First Slider-Common">

    <div class="Slider-Item Slider-First">
        <img src="img/pet1.jpg"/>
    </div>
    <div class="Slider-Item Slider-Second">
        <img src="img/pet2.jpg"/>
    </div>

</div>

<div class="Bottom-Button">

<a href="">Click</a>

</div> 
```

在这里我像上面一样... onclik滑块首先应该打开，然后如果我单击该页面滑块第二应该打开如何...我需要jquery解决方案。每页应该只有一个滑块项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:08:56.870

试试这个：

```
$(document).ready(function() {
    $('[id="Slider-First Slider-Common"]').hide();

    $(".Bottom-Button a").click(function() {
        $('[id="Slider-First Slider-Common"]').show(); 
        return false;
    });
}); 
```

PS你不应该在元素中使用空格`id`。

**编辑**再次阅读您的问题，需要进行一些修改。

```
$('.Slider-Item').hide();

$('.Bottom-Button a').on('click',function(){
    $(this).hide();
    $('.Slider-First').show();
    return false;
});

$('.Slider-First').on('click',function(){
    $('.Slider-First').hide();
    $('.Slider-Second').show();
    return false;
}); 
```

**进一步编辑**

```
$('.Slider-Item').hide();

$('.Bottom-Button a').on('click',function(){
    $(this).hide();
    $('.Slider-First').show();
    return false;
});

$('.Slider-Item').on('click',function(){
    if ($(this).next().length > 0) {
        $(this).hide();
        $(this).next().show();
    }

    return false;
}); 
```

小提琴：http: [//jsfiddle.net/9p9sg/](http://jsfiddle.net/9p9sg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:10:23.717

据我了解，以下 JQ 应该对您有用...我认为您想在点击时显示图像...对吗？

你可以试试这个：

```
$('.Slider-Item').on('click',function(){
 $('.Slider-Item:visible').slideUp(200);
 $(this).slideDown(200);
}); 
```

如果你还有什么要评论的......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:19:40.110

你可以这样做

HTML

```
<div id="Slider-First Slider-Common">

    <div class="Slider-Item Slider-First">
        <img src="img/pet1.jpg"/>
    </div>
    <div class="Slider-Item Slider-Second">
        <img src="img/pet2.jpg"/>
    </div>

</div>

<div class="Bottom-Button">

<a href="#" class="click_me">Click</a>

</div> 
```

jQuery部分

```
$(document).ready(function(){
 $(".Slider-Item Slider-First").hide();
 $(".Slider-Item Slider-Second").hide();
 $(".click_me").click(function(){
  $(".Slider-Item Slider-First").show(); 
 });
 $(".Slider-Item Slider-First").click(function(){
  $(".Slider-Item Slider-Second").show(); 
 });
}); 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T09:40:36.990

这是一个参考，请随时更新此代码，只需将这些文本替换为`<img src="...."/>`.

**CSS：**

```
#slider{list-style-type:none}
.slider-item{display:none;}
.slider-show{display:block;} 
```

**html:**

```
<ul id="slider">
    <li class="slider-item">a</li>
    <li class="slider-item">b</li>
    <li class="slider-item">c</li>
    <li class="slider-item">d</li>
    <li class="slider-item slider-show">e</li>
</ul>
<a href="">Click</a> 
```

**jQuery：**

```
$('a').click(function(){
    var indexLength = $('.slider-item').length-1;
    var currentIndex = $('.slider-item:visible').index();
    var log = $('#log');
    $('.slider-item:visible').hide();    
    if(currentIndex<indexLength){         
         currentIndex = currentIndex + 1;
    }
    else{
        currentIndex = currentIndex - indexLength;        
    }
    log.append(currentIndex);
    $('.slider-item:eq('+currentIndex+')').show();
    return false;
}); 
```

我为你创建了一个小提琴，[点击这里](http://jsfiddle.net/aGp8n/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T14:12:44.427

```
<ul id="slider">
<li class="slider-item">a</li>
<li class="slider-item">b</li>
<li class="slider-item">c</li>
<li class="slider-item">d</li>
<li class="slider-item slider-show">e</li> 
```

点击

上面的代码是我的 flexslider.Slider 工作得很好，但是对于这个滑块，我需要制作底部控件来跳转特定的滑块，比如波纹管（滑块寻呼机）

```
<ul><li>1</li><li>2</li><li>3</li></ul> 
```

# jquery - 悬停时的摆动元素动画

> ID：15700222
> 
> 赞同：0
> 
> 时间：2013-03-29T09:02:07.367
> 
> 标签：jquery, css, animation

我的目标是通过使用 CSS 和一些 jQuery 仅在悬停时摆动一个项目（当然应该在鼠标移出时停止）。

在互联网上搜索我找到了在文档准备好时摆动元素的代码（[完整的 jsFiddle](http://jsfiddle.net/PFH9c/)）。

```
$(document).ready(function() {

    function swing(){
        $('.swing').toggleClass('right');
        setTimeout(swing, 1000);
    }
    swing();
}); 
```

我尝试使用 .hover() 方法，但似乎不起作用。我该如何解决这个小问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:11:40.880

像这样的东西：

```
$(document).ready(function() {
    var id;
    function swing(){
        $('.swing').toggleClass('right');
        id = setTimeout(swing, 1000);
    }
    $(".swing").hover(function() {
        swing();
    },
    function() {
        clearTimeout(id);
    });
}); 
```

# javascript - 函数内javascript中的setTimeout

> ID：15700224
> 
> 赞同：2
> 
> 时间：2013-03-29T09:02:21.823
> 
> 标签：javascript, function, settimeout

我有两个功能，如下所示，

```
func1 = function(){
    console.log("func1 is called"); 
}

func2 = function(){
    console.log("func2 is called");
    setTimeout(func1(),10000) 
} 
```

当我打电话时`func2()`。我得到了输出，但没有得到预期的输出。如您所见，我使用了`setTimeout()`in并且我希望在执行`func2`之前指定一些延迟。`func1`

但是没有观察到延迟，两条线同时打印到控制台。我在这里做错了什么还是我错过了什么？请帮忙..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T09:04:00.003

引用函数时，需要去掉括号。

```
setTimeout(func1,10000); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T09:04:23.477

删除调用 setTimeout中*func1之后的括号。*

*setTimeout*函数需要一个函数*引用*。

您的代码在打印警报后将**调用 func1 的结果**传递给*setTimeout() 。*

当括号跟在函数名后面时，它们会导致函数被调用。

```
func1 = function () {
    alert('func1 is called');
}

func2 = function(){
    console.log("func2 is called");
    // Invoke func1 and pass the return value (which is undefined) to setTimeout.  
    // An alert will be displayed immediately when func1 is invoked.
    setTimeout(func1(),10000) 
}

func2 = function(){
    console.log("func2 is called");
    // Pass a reference to func1 to setTimeout to be invoked later.
    setTimeout(func1,10000) 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T09:05:22.310

您还可以指定一个匿名函数：

```
setTimeout(function(){func1();},10000); 
```

# html - 使用多个 Jquery 滑块绘制图形

> ID：15700225
> 
> 赞同：1
> 
> 时间：2013-03-29T09:02:29.963
> 
> 标签：html, jquery-mobile, graph, slider, flot

我正在使用多个 Jquery UI 滑块将值填充到我使用 Jquery FLot 绘制的图形上。我面临的问题是我需要为图形设置一个最大值，并且每个滑块都会为图形贡献一些值，即图形会累积填充。但是每次我尝试使用多个滑块填充图形时，jquery 滑块都会给出错误的值，并且图形也会填充多个值。如果我删除逻辑并使用任何滑块填充图表，那么图表会给我单独的值。这是我正在处理的代码部分：

```
var plot_val=0;
        function plot(val) {
        value_plot=val;

        var d2 = [[0, value_plot]];
        var d3 = [[0, value_plot/2]]
        var options_blue = {
                series: {color: '#0000ff',
                bars: { show: true,  barWidth :20*20}},
                  xaxis:  {show:false, min: 1} ,
                  yaxis:  { show:true,min: 0,max:500} 

              };
        var options_red = {
                series: {color: '#FF0000',
                bars: { show: true,  barWidth : 20*20}},
                  xaxis:  {show:false, min: 1} ,
                  yaxis:  { show:true,min: 0,max:500 } 

              };
        $.plot($("#placeholder"),  [d2],options_blue);
        $.plot($("#placeholder1"),  [d3],options_red);

    };

        $(function() {
            $( "#slider-range-min_1" ).slider({
              range: "min",
              value: 1,
              min: 1,
              max: 500,
              slide: function( event, ui ) {

                plot(ui.value);
              }
             });
          });
        $(function() {
            $( "#slider-range-min_2" ).slider({
              range: "min",
              value: 1,
              min: 1,
              max: 500,
              values: [1,500],
              slide: function( event, ui ) {

                plot(ui.value);
               }
             });
          }); 
```

# r - CCDF在igraph中使用degree.distribution函数和ecdf函数的区别

> ID：15700227
> 
> 赞同：1
> 
> 时间：2013-03-29T09:02:42.383
> 
> 标签：r, social-networking, igraph

我使用了两种方法来分析网络中节点的度分布。一种方法是在 igraph 包中使用 degree.distribution 函数。另一种方法是在 R 中使用 ecdf 函数。这两个结果是相似的。但是当度数超过 1000 时，这两个结果是不同的。为什么这两个结果不同？回应将不胜感激。 ![igraph 中的度数分布函数](../Images/05dfb3442506ecf4140d04ffb2313a52.png)

![R中的ecdf函数](../Images/5406af968123eaaec96eb29ae340ae85.png)

# java - 为 ListView 设置适配器时出现 NullPointerException

> ID：15700232
> 
> 赞同：0
> 
> 时间：2013-03-29T09:03:03.820
> 
> 标签：java, android, sdk

我需要帮助我的第一次滑动`Layout`和`ListView`...我会在其中显示一些文本，`ListView`但它不起作用:(

**MainActivity.java**：

```
package com.evolutio.blocklaunch;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.Locale;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.app.NavUtils;
import android.support.v4.view.ViewPager;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class MainActivity extends FragmentActivity {

/**
 * The {@link android.support.v4.view.PagerAdapter} that will provide
 * fragments for each of the sections. We use a
 * {@link android.support.v4.app.FragmentPagerAdapter} derivative, which
 * will keep every loaded fragment in memory. If this becomes too memory
 * intensive, it may be best to switch to a
 * {@link android.support.v4.app.FragmentStatePagerAdapter}.
 */
SectionsPagerAdapter mSectionsPagerAdapter;

/**
 * The {@link ViewPager} that will host the section contents.
 */
ViewPager mViewPager;

  private ListView mainListView ;  
  private ArrayAdapter<String> listAdapter ;  

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    // Create the adapter that will return a fragment for each of the three

    // Find the ListView resource.   
    mainListView = (ListView) findViewById( R.id.mainListView );  

    // Create and populate a List of planet names.  
    String[] planets = new String[] { "Mercury", "Venus", "Earth", "Mars",  
                                      "Jupiter", "Saturn", "Uranus", "Neptune"};    
    ArrayList<String> planetList = new ArrayList<String>();  
    planetList.addAll( Arrays.asList(planets) );  

    // Create ArrayAdapter using the planet list.  
    listAdapter = new ArrayAdapter<String>(this, R.layout.news, planetList);  

    // Add more planets. If you passed a String[] instead of a List<String>   
    // into the ArrayAdapter constructor, you must not add more items.   
    // Otherwise an exception will occur.  
    listAdapter.add( "Ceres" );  
    listAdapter.add( "Pluto" );  
    listAdapter.add( "Haumea" );  
    listAdapter.add( "Makemake" );  
    listAdapter.add( "Eris" );  

    // Set the ArrayAdapter as the ListView's adapter.  
    mainListView.setAdapter(listAdapter);

    // primary sections of the app.
    mSectionsPagerAdapter = new SectionsPagerAdapter(
            getSupportFragmentManager());

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

/**
 * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
 * one of the sections/tabs/pages.
 */
public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        // getItem is called to instantiate the fragment for the given page.
        // Return a DummySectionFragment (defined as a static inner class
        // below) with the page number as its lone argument.
        Fragment fragment = new DummySectionFragment();
        Bundle args = new Bundle();
        args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, position + 1);
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        // Show 3 total pages.
        return 3;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        Locale l = Locale.getDefault();
        int tabLayout = 0;
        switch (position) {
        case 0:
            return getString(R.string.title_section1).toUpperCase(l);
        case 1:
            return getString(R.string.title_section2).toUpperCase(l);
        case 2:
            return getString(R.string.title_section3).toUpperCase(l);
        }
        return null;
    }
}

/**
 * A dummy fragment representing a section of the app, but that simply
 * displays dummy text.
 */
public static class DummySectionFragment extends Fragment {
    /**
     * The fragment argument representing the section number for this
     * fragment.
     */
    public static final String ARG_SECTION_NUMBER = "section_number";

    public DummySectionFragment() {
    }

     public static final String ARG_OBJECT = "object";

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

            Bundle args = getArguments();
            int position = args.getInt(ARG_OBJECT);

            int tabLayout = 0;
            switch (position) {
            case 0:
            tabLayout = R.layout.news;
            break;
            case 1:
            tabLayout = R.layout.news;
            break;
            case 2:
            tabLayout = R.layout.news;
            break;
            }

            View rootView = inflater.inflate(tabLayout, container, false);
            return rootView;
        }
}

} 
```

* * *

XML 文件

**activity_main.xml**

```
<android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:tools="http://schemas.android.com/tools"
   android:id="@+id/pager"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   tools:context=".MainActivity" >

    <!--
   This title strip will display the currently visible page title, as well as the page
   titles for adjacent pages.
   -->

    <android.support.v4.view.PagerTitleStrip
       android:id="@+id/pager_title_strip"
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:layout_gravity="top"
       android:background="#33b5e5"
       android:paddingBottom="4dp"
       android:paddingTop="4dp"
       android:textColor="#fff" />

</android.support.v4.view.ViewPager> 
```

**项目.xml**

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"  
android:id="@+id/rowTextView"  
android:layout_width="fill_parent"  
android:layout_height="wrap_content"  
android:padding="10dp"  
android:textSize="16sp" >  
</TextView> 
```

**新闻.xml**

```
<?xml version="1.0" encoding="utf-8"?>  
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"  
 android:orientation="vertical"  
 android:layout_width="fill_parent"  
 android:layout_height="fill_parent">  

    <ListView android:layout_width="fill_parent"  
     android:layout_height="fill_parent"  
     android:id="@+id/mainListView">  
    </ListView>  
</LinearLayout> 
```

和**错误**：

```
03-29 10:01:39.827: D/AndroidRuntime(6902): Shutting down VM
03-29 10:01:39.827: W/dalvikvm(6902): threadid=1: thread exiting with uncaught exception (group=0x2b521930)
03-29 10:01:39.827: E/AndroidRuntime(6902): FATAL EXCEPTION: main
03-29 10:01:39.827: E/AndroidRuntime(6902): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.evolutio.blocklaunch/com.evolutio.blocklaunch.MainActivity}: java.lang.NullPointerException
03-29 10:01:39.827: E/AndroidRuntime(6902):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2307)
03-29 10:01:39.827: E/AndroidRuntime(6902):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2357)
03-29 10:01:39.827: E/AndroidRuntime(6902):     at android.app.ActivityThread.access$600(ActivityThread.java:153)
03-29 10:01:39.827: E/AndroidRuntime(6902):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1247)
03-29 10:01:39.827: E/AndroidRuntime(6902):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-29 10:01:39.827: E/AndroidRuntime(6902):     at android.os.Looper.loop(Looper.java:137)
03-29 10:01:39.827: E/AndroidRuntime(6902):     at android.app.ActivityThread.main(ActivityThread.java:5226)
03-29 10:01:39.827: E/AndroidRuntime(6902):     at java.lang.reflect.Method.invokeNative(Native Method)
03-29 10:01:39.827: E/AndroidRuntime(6902):     at java.lang.reflect.Method.invoke(Method.java:511)
03-29 10:01:39.827: E/AndroidRuntime(6902):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
03-29 10:01:39.827: E/AndroidRuntime(6902):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
03-29 10:01:39.827: E/AndroidRuntime(6902):     at dalvik.system.NativeStart.main(Native Method)
03-29 10:01:39.827: E/AndroidRuntime(6902): Caused by: java.lang.NullPointerException
03-29 10:01:39.827: E/AndroidRuntime(6902):     at com.evolutio.blocklaunch.MainActivity.onCreate(MainActivity.java:74)
03-29 10:01:39.827: E/AndroidRuntime(6902):     at android.app.Activity.performCreate(Activity.java:5104)
03-29 10:01:39.827: E/AndroidRuntime(6902):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-29 10:01:39.827: E/AndroidRuntime(6902):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2261)
03-29 10:01:39.827: E/AndroidRuntime(6902):     ... 11 more
03-29 10:01:42.327: I/Process(6902): Sending signal. PID: 6902 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:06:08.603

您使用了错误的布局，`MainActivity`因为您已添加 `ListView`但`News.xml`设置`activity_main`为`MainActivity`. 您应该使用`News.xml`MainActivity 的布局来初始化带有`mainListView` ListView 的 mainListView：

```
setContentView(R.layout.News); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:17:51.597

LogCat 说问题出在 MainActivity 的第 74 行，但我认为真正的问题出在第 53 行：

`mainListView = (ListView) findViewById( R.id.mainListView );`

我认为 mainListView 是空的，因为这个布局元素在 activity_main.xml 中不存在（也许它是在第 82 行加载的？）

您可以尝试将第 53 和 74 行移到第 82 行之后...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:22:57.017

尝试这个：

```
package com.kt.listviewexample;

import java.util.ArrayList;
import java.util.Arrays;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class MainActivity extends Activity {

   /** Here two object are created mainListView and fruits of class ListView and String respectively 
    *   fruits is contains a set of data as array type
    */
    private ListView mainListView;
    String[] fruits = {
            "Mango",
            "Pine-Apple",
            "Guava",
            "Apple",
            "Banana",
            "Grapes",
            "Orange",
            "watermilon",
            "Dates",
            "Olive", 
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // called main UI
        setContentView(R.layout.activity_main);

        //Binding the object of ListView
        mainListView = (ListView) findViewById( R.id.mainlistview ); 

       /**
        * A fruitslist object is created of ArrayList type Which holds all element of array(Mango ,Pine-Apple...) , 
        *  in friutlist object
        */

       ArrayList<String> fruitlist = new ArrayList<String>();  
       fruitlist.addAll(Arrays.asList(fruits)); 

       /** Now all these data are bind with a ListView's object for appearance in android device or emulator
        *  with a parameter of current class , name of Xml file which contain TextView , id of that TextView
        *  and finally object of ArrayList in which we all those data
        */
        mainListView.setAdapter(new ArrayAdapter<String>(this, R.layout.list_view, R.id.rowTextView, fruitlist));

        /** Call of listener when we click on every item of ListView
         * 
         */
        mainListView.setOnItemClickListener(new OnItemClickListener() {
             public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

                // When clicked, show a toast with the TextView text
                if (position == 0) {
                      // do this on first item click
                }

                if (position == 1) {
                      // do this on second item click   
                } else {
                      Toast.makeText(getApplicationContext(), "You have selected " + fruits[position], Toast.LENGTH_SHORT).show();
                }
            }
        });
    }

} 
```

# php - 将选择项保存到变量中

> ID：15700238
> 
> 赞同：0
> 
> 时间：2013-03-29T09:03:15.910
> 
> 标签：php, jquery, html

我有这段代码来编写我的选择选项，但是如果我想将选择保留在一个变量中并在我的 PHP 代码的同一页面中使用它，我必须做什么？

```
<html>
<head>
<style>
div { color:red; }
</style>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
</head>
<body>
<select name="garden" multiple="multiple">
<option>Flowers</option>
<option selected="selected">Shrubs</option>
<option>Trees</option>
<option selected="selected">Bushes</option>
<option>Grass</option>
<option>Dirt</option>
 </select>
<div></div>
<script>
$("select").change(function () {
var str = "";
$("select option:selected").each(function () {
str += $(this).text() + " ";
});
$("div").text(str);
})
.trigger('change');
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:50:11.280

创建一个隐藏字段：

```
<input id="Hidden1" type="hidden" /> 
```

将选定的值存储在 onchange 函数中：

```
$('#Hidden1').val($("select option:selected").val()); 
```

稍后您可以通过以下方式访问此值： `$('#Hidden1').val()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:53:10.890

在您通过普通的 GET/POST/Ajax 再次向 php 发送请求之前，PHP 不会访问 javascript 所做的更改。对于表单 GET 或 Ajax，您可以使用隐藏字段或 js 全局变量来存储所选值。对于表单 POST，您应该选择隐藏字段。

# visio - DFD 比页面大得多

> ID：15700242
> 
> 赞同：1
> 
> 时间：2013-03-29T09:03:32.253
> 
> 标签：visio

我正在为项目管理软件设计 DFD。一个进程在第二级拆分时有太多的子进程和太多的外部参与者。一页对于设计来说太短了。我应该怎么做才能应对这种情况，我可以为一个过程描述使用多个页面还是有任何其他建议？我在visio中绘图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T19:03:33.213

我在互联网上搜索了很多关于这个问题的信息，但找不到任何解决方案。但是一旦我与一位非常资深的程序员讨论，他告诉我，我们可以根据您需要的视图在 Page Setup 中简单地增加页面大小。我在设计 DMD 时也遇到了这个问题，所以我在两者上都使用了这个技巧:)

如果有人有其他更好的想法，请分享。

# java - 方法本地类有什么用？

> ID：15700243
> 
> 赞同：1
> 
> 时间：2013-03-29T09:03:34.057
> 
> 标签：java, inner-classes

```
public void foo() {
    class Bar {
    }
    Bar b = new Bar();
} 
```

我看不出方法本地类是最佳设计选择的任何情况。你用过吗？在什么情况下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:06:46.580

当我需要附加到不同摆动组件的同一事件侦听器的参数化版本略有不同时，我使用过一次或两次，但除此之外，我倾向于使用匿名类而不是命名本地类。

一个简化的例子是

```
public void attachListeners(final JLabel label) {
  class ButtonListener implements ActionListener {
    private String value;
    public ButtonListener(String val) { value = val; }
    public void actionPerformed(ActionEvent e) {
      label.setText(value);
    }
  }

  button1.addActionListener(new ButtonListener("value1"));
  button2.addActionListener(new ButtonListener("value2"));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:11:36.227

一个用例是，当您对具有接口类型作为参数的方法进行循环调用时，并且该方法仅在该方法中使用。因此，您可以定义一个方法本地类，而不是编写一个单独的类。（匿名类方法可能有效，但如果它在循环中，最好创建一个类。）

```
interface A{ public int getValue();}
....
public void processValue(A a){}
....
public void showResults(){
    class B implements A{
        int getValue(){
            return value;
        }
    }
    for (int i=0;i<10;i++){
        processValue(new B())
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:10:51.237

我在需要键值对并且我的键没有映射到现有类的情况下使用它。我不想让我的“关键类”在我的方法之外可用。

例如，键可以由 a`Employee`和 a组成`Date`，值是该员工在该日期的预订小时数。在这种情况下，它可能如下所示：

```
public void doExcitingCalculation() {
    class EmployeeDateKey {
        private Employee employee;
        private Date date;
        // Getters and setters ommited for brevity
    }

    Map<EmployeeDateKey, Double> bookedHours = new HashMap<>();
    Map<Empoyee, Map<Date, Double>> temp = fetchData();
    // This isn't a useful datastructure, so we remodel it
    for (Map.Entry<Employee, Map<Date, Double>> entry : temp.entrySet()) {
        for (Map.Entry<Date, Double> hours : entry.getValue().entrySet()) {
            bookedHours.put(new EmployeeDateKey(entry.getKey(), hours.getKey()), hours.getValue());
        }
    }

    // process data
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T09:31:38.980

使用方法本地类可以通过将相关部分放在一起来增加代码的可读性。作为一个人为的示例，假设您有一个方法需要创建一个线程来在后台执行某些操作：

```
class Test {
 void f() {
    // lots of stuff
    new Thread(new Runnable() {
        public void run() {
            doSomethingBackgroundish();
        }
    }).start();
    // lots more stuff
  }
} 
```

如果没有方法本地类，您将不得不：

在 Test 中创建一个新的命名类来做后台处理，或者在一个单独的源文件中创建一个新的命名类来做后台处理。这两个选项都可以通过将相关处理移动到源树中的其他位置来降低代码的可读性（可能在同一个源文件中，也可能完全在另一个源文件中）。使用方法本地类可以将处理逻辑保持在使用它的位置。

这当然不是适用于所有情况，但它在许多常见情况下非常有用。此类代码通常用于 GUI 操作侦听器，它们是非常小的类，通常只是将操作方法​​调用从一个地方中继到另一个地方。

# c - shmat() 返回的虚拟内存地址指向不同的硬件内存位置

> ID：15700246
> 
> 赞同：2
> 
> 时间：2013-03-29T09:03:47.353
> 
> 标签：c, linux, memory, arm, shared-memory

**我有两个进程，每个进程都`shmid`**可以从`shmget()`.

在这两个进程中，`shmat()`给出了不同的内存地址。

每个进程的地址始终相同：

```
Process1: 0x41b31000
Process2: 0x4017d000 
```

我不认为地址是虚拟地址，正如下面问题中所写的答案所述，此外，如果这些地址是虚拟地址，则它们必须指向相同的硬件地址。**但是，这些地址的内容并不相同。**

我正在为 ARM 处理器进行交叉编译，我的程序在 x86 Debian Lenny 中运行没有错误或问题。

我知道这个问题，但问题并不容易 - [shmat() 为相同的“shmkey”返回不同的“shmaddr”](https://stackoverflow.com/questions/8434974/shmat-is-returning-a-different-shmaddr-for-same-shmkey) -

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T11:32:36.847

返回的地址`shmat`是虚拟地址。

同一个物理内存可能在不同的进程中映射到不同的虚拟地址。（甚至可以将同一物理内存映射到一个进程内的不同虚拟地址；操作系统可以设置虚拟到物理的转换，以便多个虚拟地址映射到同一物理内存。）

如果`shmat`返回`a`进程中的地址`A`和映射相同的共享内存段返回进程中的地址`b`，`B`那么进程中的数据应该与`a`进程中的数据相同。如果不是，则有问题，可能包括：您实际上没有映射相同的共享内存段，您没有正确比较数据，或者（非常不可能）共享内存软件中存在错误或操作系统。`A``b``B`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T12:39:02.147

这是关于内存对齐的。

我有一个庞大的数据，从 1 字节开始，无论它是否干净，但 1 字节的成本为 2 周。

ARM 或操作系统上的共享内存没有问题。

一个原因，我的错。

# iphone - “创建添加语句时出错”没有这样的表

> ID：15700251
> 
> 赞同：3
> 
> 时间：2013-03-29T09:04:13.650
> 
> 标签：iphone, objective-c, ipad, iphone-5

我正在使用 SQLite 数据库来存储一些信息，例如图像名称、日期我在尝试插入数据时遇到异常并且它使应用程序崩溃。

我已经通过放置断点和异常断点来检查它，它崩溃了，因为它无法找到表但表已经存在。

看到这个： ![在此处输入图像描述](../Images/34aa2df96c9ca918f163ae0de99a1842.png)

这是我得到的崩溃报告：

```
*** Assertion failure in -[PhotosPage savePhotosToDB], /Users/apple/Desktop/Mayur_iPhone/My Home Projects/Daily Photos Application/29thMar2013_DailyPhotos/iPhone/PhotosPage.m:168
2013-03-29 14:21:53.398 DailyPhotos[881:c07] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Error while creating add statement. 'no such table: PhotosTable''
*** First throw call stack:
(0x1b11012 0x1606e7e 0x1b10e78 0x5e5f35 0x9014 0x870d 0x161a705 0x92f920 0x92f8b8 0x9f0671 0x9f0bcf 0x9efd38 0x95f33f 0x95f552 0x93d3aa 0x92ecf8 0x26d7df9 0x26d7ad0 0x1a86bf5 0x1a86962 0x1ab7bb6 0x1ab6f44 0x1ab6e1b 0x26d67e3 0x26d6668 0x92c65c 0x7cad 0x1d45)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

这是我用于插入数据的代码：

```
-(void)checkAndCreateDatabase
{
    BOOL success;
    databaseName = @"DailyPhotosDB.rdb";
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);
    NSString *documentsDir = [documentPaths objectAtIndex:0];
    databasePath = [documentsDir stringByAppendingPathComponent:databaseName];
    NSFileManager *fileManager = [NSFileManager defaultManager];
    success = [fileManager fileExistsAtPath:databasePath];
    if(success) return;
    NSString *databasePathFromApp = [[NSBundle mainBundle] pathForResource:@"DailyPhotosDB" ofType:@"sqlite"];
    [fileManager copyItemAtPath:databasePathFromApp toPath:databasePath error:nil];
    [fileManager release];
}

-(void)savePhotosToDB
{
    [self checkAndCreateDatabase];
    sqlite3 *database;
    static sqlite3_stmt * addStmt ;
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error;
    databaseName = @"DailyPhotosDB.rdb";
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);
    NSString *documentsDir = [documentPaths objectAtIndex:0];
    databasePath = [documentsDir stringByAppendingPathComponent:databaseName];
    BOOL success = [fileManager fileExistsAtPath:databasePath];
    NSDateFormatter* df = [NSDateFormatter new];
    [df setDateFormat:@"dd-MM-yyyy"];
    NSString *strCurDate = [df stringFromDate:[NSDate date]];

    if(!success)
    {
        NSString *defaultDBPath = [[NSBundle mainBundle] pathForResource:@"DailyPhotosDB" ofType:@"sqlite"];
        success = [fileManager copyItemAtPath:defaultDBPath toPath:databasePath error:&error];
        if (!success)
            NSAssert1(0, @"Failed to create writable database file with message '%@'.", [error localizedDescription]);
    }
    if (sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK)
    {
        const char *sql = "insert into PhotosTable(PhotoName,CreationDate) Values(?,?)";
        if(sqlite3_prepare_v2(database, sql, -1, &addStmt, NULL) != SQLITE_OK)
            NSAssert1(0, @"Error while creating add statement. '%s'", sqlite3_errmsg(database));
        sqlite3_bind_text(addStmt, 1, [timeString UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(addStmt, 2, [strCurDate UTF8String], -1, SQLITE_TRANSIENT);
        if(SQLITE_DONE != sqlite3_step(addStmt))
            NSAssert1(0, @"Error while inserting data. '%s'", sqlite3_errmsg(database));
        else
            sqlite3_reset(addStmt);
    }
    sqlite3_close(database);
} 
```

提前致谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T10:25:50.073

试试这个代码

```
NSString *strquery=[NSString stringWithFormat:@"insert into foodfinder(nameOfRestaurants,contacts,address,lats,longs) values(\"%@\",\"%@\",\"%@\",\"%@\",\"%@\")",nameOfRestaurants,contacts,address,lats,longs];
return [AppDelegate_iPhone executeQuery:strquery]; 
```

***编辑->下面的代码来自评论***

```
NSString *strsrspath=[[NSBundle mainBundle]pathForResource:@"food" ofType:@"rdb"]; 
NSString *strdestpath=[NSString stringWithFormat:@"%@/Documents/food.rdb",NSHomeDirectory()]; 
NSFileManager *manager=[NSFileManager defaultManager]; 
if ([manager fileExistsAtPath:strdestpath]) {
 NSLog(@"File Already Exist");
 } else { 
NSError *err; [manager copyItemAtPath:strsrspath toPath:strdestpath error:&err]; 
NSLog(@"file successfully copied"); 
return YES; 
} 
return NO; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-08T11:36:27.443

实际上你需要删除你之前创建的数据库，然后将 sqlite 文件添加到你的包中，这将解决你的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T07:32:17.440

我在实现数据库时遇到了同样的问题并通过以下方式解决了它。

-> 转到目标 -> 构建阶段 -> 复制捆绑资源单击 + 并从资源中选择 Sqlite 数据库 rdb 文件。

希望这可以帮助。

# jquery - jQuery向嵌套列表中的所有最后一个孩子添加一个类

> ID：15700252
> 
> 赞同：2
> 
> 时间：2013-03-29T09:04:14.487
> 
> 标签：jquery, list, jquery-selectors, nested, css-selectors

我有一个结构如下的列表：

```
<ul class="tree" id="tree">
    <li>1</li>
        <ul>
            <li><a href="?character=?">2</a></li>
            <li><a href="?character=?">3</a></li>
                <ul>
                    <li><a href="?character=?">4</a></li>
                    <li><a href="?character=?">5</a></li>
                </ul>
            <li><a href="?character=?">6</a></li>
                <ul>
                    <li><a href="?character=?">7</a></li>
                    <li><a href="?character=?">8</a></li>
                </ul>
        </ul>
</ul> 
```

我需要做的是使用 jQuery 选择`last:childs`列表中的所有（即 1、5、6、8）并给出所有`class="last"`.

由于某种原因，使用 CSS`ul:last child`根本不起作用，我已经尝试过

```
<script type="text/javascript">
   $(document).ready(function () {
        $("ul li:last-child").addClass("last");
   });
  </script> 
```

这没有用。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T09:17:01.243

已选择 1、5、6 和 8

```
 $(document).ready(function () {
        $("ul > li:last-of-type").addClass("last");
    }); 
```

[http://jsfiddle.net/42v8A/](http://jsfiddle.net/42v8A/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:07:28.600

你有没有尝试过 ？？

```
$('ul > li:last-child').addClass("last"); 
```

或者你可以做

```
$('ul li').last().addClass("last"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:07:59.040

您可以使用`>`：

```
$('ul > li:last-child').addClass('last'); 
```

或者你可以[`.last()`](http://api.jquery.com/last/)像这样使用 jQuery 方法：

```
$('ul li').last().addClass('last'); 
```

就像@ashley 的回答一样，请参阅[last-of-type](http://api.jquery.com/last-of-type-selector/)，这将有效：

```
$('ul > li:last-of-type').addClass('last'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T09:09:29.463

```
$('ul > li:last-child').addClass("last"); 
```

您需要考虑 ul 的子元素

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T09:13:41.750

你有错误的`<ul>` `<li>`结构。这是正确的结构

```
 <ul class="tree" id="tree">
           <li>1</li>
             <li>
                  <ul>
                    <li><a href="?character=?">2</a></li>
                    <li><a href="?character=?">3</a></li>
                    <li>
                        <ul>
                           <li><a href="?character=?">4</a></li>
                           <li><a href="?character=?">5</a></li>
                        </ul>
                    </li>
                    <li><a href="?character=?">6</a></li>
                    <li>
                       <ul>
                         <li><a href="?character=?">7</a></li>
                         <li><a href="?character=?">8</a></li>
                       </ul>
                    </li>
                 </ul>
             </li>
        </ul> 
```

JSFIDDLE：http: [//jsfiddle.net/5QBYW/2/](http://jsfiddle.net/5QBYW/2/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-29T09:15:52.537

将您的 HTML 更改为

```
<ul class="tree" id="tree">
<li>1</li>
<li>
    <ul>
        <li><a href="?character=?">2</a></li>
        <li><a href="?character=?">3</a></li>
        <li>
            <ul>
                <li><a href="?character=?">4</a></li>
                <li><a href="?character=?">5</a></li>
             </ul>
        </li>
        <li><a href="?character=?">6</a></li>
        <li>
            <ul>
                <li><a href="?character=?">7</a></li>
                <li><a href="?character=?">8</a></li>
            </ul>
        </li>
    </ul>
</li>
</ul> 
```

**JS**

```
$("ul").each(function(){
$(this).find('li:last-child').addClass("last");
}); 
```

但这里不会发生所需的结果（选择 1、5、6、8）。它只选择每个无序列表中的最后一个列表项

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-29T09:20:39.063

你的 HTML 有点奇怪。您正在关闭`li`并完全创建一个新列表。这不是嵌套列表的功能。标记应如下所示：

## HTML

```
<ul class="tree" id="tree">
    <li>1
        <ul>
            <li><a href="?character=?">2</a>

            </li>
            <li><a href="?character=?">3</a>

                <ul>
                    <li><a href="?character=?">4</a>

                    </li>
                    <li><a href="?character=?">5</a>

                    </li>
                </ul>
            </li>
            <li><a href="?character=?">6</a>

                <ul>
                    <li><a href="?character=?">7</a>

                    </li>
                    <li><a href="?character=?">8</a>

                    </li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

然后，您的普通 CSS`ul > li:last-child`将起作用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-29T09:20:56.730

我认为这应该有效。试试这个。

```
<script type="text/javascript">
   $(document).ready(function () {
        $("#tree li:not(:has(li)").last().addClass("last");
   });
  </script> 
```

# c# - 如何以字节或千字节为单位获取远程文件大小？

> ID：15700261
> 
> 赞同：1
> 
> 时间：2013-03-29T09:05:06.620
> 
> 标签：c#, http

我的问题与此问题中的问题相同：

[获取 http://.../文件大小](https://stackoverflow.com/questions/122853/get-http-file-size)

但我的问题是该`Content-Length`属性包含`Content-Length`响应返回的标头的值，而不是确切的文件大小。

我尝试使用`FileInfo`，但它只能将本地文件名作为参数 - 而不是远程文件。

有人可以告诉我如何以字节或千字节为单位获取远程文件大小吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:27:19.470

好的，我会尝试一些东西

首先尝试这段代码：

```
//I am assuming Prg.source_path is the url of the file you want
// Something like : http://www.example.com/my_file.zip
HttpWebRequest wrq = (HttpWebRequest)WebRequest.Create(Prg.source_path); 
//You should be getting only the response header
wrq.Method = "HEAD";

using(var wrs = (HttpWebResponse)wrq.GetResponse()){
    //Do something logic here...
    Console.WriteLine("Content Length is : {0}", wrs.ContentLength);
} 
```

请确保您尝试下载的文件的url 是该文件的**DIRECT** url。如果您被重定向到另一个位置，响应的标头将是重定向响应的大小。

如果该代码仍然无法为您提供正确的文件大小，我的猜测是您要么被重定向，要么响应确实有缺陷且不准确（这不太可能，但可能）。

您能否提供您尝试下载的文件的网址，或者至少提供您发送和获取的请求和响应？

**编辑 2013 年 2 月 4 日**：还要检查这个问题：[CSS、Javascript 和图像的长度为零](https://stackoverflow.com/questions/2305732/css-javascript-and-images-have-zero-length)

请参阅 Adrian Grigore 的答案，检查“控制面板 -> Windows 功能 -> 万维网服务 -> 通用 HTTP 功能 -> 静态内容”是否已选中。如果没有，请检查它，重新启动 IIS（或整个机器，你永远不知道），然后重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-26T21:33:13.340

我知道这是一个旧帖子。也许我没有清楚地理解 C# 代码或误解了这个问题。如果我做对了，他想以字节为单位获取远程文件的大小？我使用这个 VB.NET 代码，它对我有用：

```
Imports System.Net

Dim theResponse As HttpWebResponse
Dim theRequest As HttpWebRequest
theRequest = WebRequest.Create("https://www.yoururl.co.za/" & YourFilename)
theResponse = theRequest.GetResponse
Dim FileSizeInBytes As Long = theResponse.ContentLength 
```

希望这可以帮助某人。

# javascript - 从网格视图的数据列表之一中查找链接按钮

> ID：15700262
> 
> 赞同：2
> 
> 时间：2013-03-29T09:05:11.243
> 
> 标签：javascript, asp.net, c#-4.0

我有一个网格视图和一个数据列表（机器人分别包含一些列和链接按钮）我如何通过单击网格视图中的链接按钮找到数据列表链接按钮控件（网格视图数据由数据生成列表链接按钮和两者都提到了相同的数据密钥）我拥有的相关代码是这个

```
protected void Gird1_Click(object sender, GridViewDeleteEventArgs e)
{
    Label id = (Label)Grid1.Rows[e.RowIndex].FindControl("lbl_PID");

    DataTable dt = (DataTable)ViewState["DataTable"];
    if (dt.Rows.Count > 0)
    {
        for (int i = 0; i < dt.Rows.Count; i++)
        {
           if (dt.Rows[i]["P_ID"].ToString() == id.Text)
            {
                dt.Rows[i].Delete();
            }
        }
    }
   // LinkButton lnkbtn = (LinkButton)DataList1.Items[e.RowIndex].FindControl("lnk_Add"); 

    LinkButton lnkbtn = (LinkButton)DataList1\.  [Convert.ToInt32(id.Text)];//FindControl("lnk_Add"); 
    lnkbtn.Enabled = true;
    ViewState["DataTable"] = dt;
    Grid1.DataSource = ViewState["DataTable"];
    Grid1.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:25:14.650

为这 2 个链接按钮和网格视图中链接按钮的 onclick 赋予相同的名称

```
{
   linkbutton lnkGridview=(linkbutton)sender;
   foreach(datalistitem item in datalist1.items)
  {
     linkbutton lnkDatalist=(linkbutton)item.findcontrol(lnkGridview.ClientID);
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T06:33:32.830

最后....

```
 int increment = 0;
    int count = DataList1.Items.Count-1;
    while (increment<=count)
    {

        Label datalist_id = (Label)DataList1.Items[increment].FindControl("lbl_PID");
        if (id.Text == datalist_id.Text)
        {
            LinkButton lnkbtn = (LinkButton)DataList1.Items[increment].FindControl("lnk_Add");
            lnkbtn.Enabled = true;
        }
        increment = increment + 1;
    } 
```

# php - 接收订单详情和付款确认（电子商务网站）

> ID：15700263
> 
> 赞同：0
> 
> 时间：2013-03-29T09:05:13.340
> 
> 标签：php, html, mysql, paypal, e-commerce

我是在我的第一个网站上工作的新手开发人员。我也为普通用户和管理员创建了一个登录环境。管理员可以看到普通用户看不到的页面。我已经创建了购物车 (PHP)，它将所有选定的项目加起来。我不知道现在如何进行。我知道我必须使用 PayPal，但我不确定从哪里开始。我也不知道客户如何收到客户的订单。这会通过他可以在管理页面上看到的通知来实现吗？或者详细信息会发送到他的电子邮件地址吗？另外如何收到付款确认？我真的很感激一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:37:02.880

> 我知道我必须使用 PayPal，但我不确定从哪里开始。

查看他们的网站以获取他们的 API 和代码片段。

> 我也不知道客户如何收到客户的订单。这会通过他可以在管理页面上看到的通知来实现吗？或者详细信息会发送到他的电子邮件地址吗？

两者都做，并使其成为管理员选择的选项。

> 另外如何收到付款确认？

和上面一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T10:17:05.847

不要删除任何记录。只需使用[分页](http://www.9lessons.info/2009/09/pagination-with-jquery-mysql-and-php.html)并将付款确认从最近的付款排序到最早的付款，即按付款日期和时间的降序排列。还为您的客户提供基于时间范围获取记录的选项，即使它是可选的，它也会让您的客户满意。如果您想了解有关贝宝集成的更多说明，请参阅[**此**](http://www.evoluted.net/thinktank/web-development/paypal-php-integration)。

# ruby-on-rails - 动态子类化和 ActiveRecord 与 PostgreSQL 数据库建立连接

> ID：15700269
> 
> 赞同：0
> 
> 时间：2013-03-29T09:05:28.357
> 
> 标签：ruby-on-rails, activerecord

我正在尝试创建一个实用程序来将记录子集从一个 PostgreSQL 数据库的单个表复制到另一个 PostgreSQL 数据库中的同一个表。我正在使用动态子类化来执行此操作，但它不起作用：它引发错误“xxx 数据库未配置”（其中 xxx 是我的数据库 URL，类似于“postgres://username:password@computername:5432/databasename” 。我知道这个 URL 很好，因为我从 Heroku 配置中复制了它，我可以从本地机器上的 pgAdmin3 访问数据库。这是代码：

```
puts "Enter the database URL"
url = gets.chomp
db_conn = Class.new(ActiveRecord::Base) do
  establish_connection url
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:57:01.137

Rails 3.2 中添加了对建立连接（url）的支持；我正在运行 Rails 3.1.3。

# asp.net-mvc - 如何在 Ajax 弹出窗口中实现 Google ReCaptcha

> ID：15700273
> 
> 赞同：1
> 
> 时间：2013-03-29T09:05:48.880
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery, recaptcha, mvcrecaptcha

我在 MVC3.0 中工作，我想在弹出窗口中实现验证码（谷歌服务）。现在的问题是弹出窗口是由 ajax 调用产生的。

在 AJAX 调用中，不会出现 Re captcha 弹出窗口，但在正常弹出窗口中，它会正确出现。

我按照以下步骤操作：

第 1 步：我将其包含在 Email.cshtml 中

```
@Html.Raw(Html.GenerateCaptcha()) 
```

第 2 步：在我的 .cs 文件中生成此函数：

```
public static string GenerateCaptcha(this HtmlHelper helper)
{
    var captchaControl = new RecaptchaControl
    {
        ID = "recaptcha",
        Theme = "clean", //http://wiki.recaptcha.net/index.php/Theme
        PublicKey = ConfigurationManager.AppSettings["ReCaptchaPublicKey"],
        PrivateKey = ConfigurationManager.AppSettings["ReCaptchaPrivateKey"]
    };
    var htmlWriter = new HtmlTextWriter(new StringWriter());
    captchaControl.RenderControl(htmlWriter);
    return htmlWriter.InnerWriter.ToString();
} 
```

第 3 步：然后在 web.config 中添加公钥和私钥，并添加必要的命名空间

我遵循了所有步骤。

有人可以建议是否弹出是由 Ajax 调用产生的，如果我必须在 Ajax 弹出中实现验证码，那么我该怎么办？

问候， 萨希尔

# drupal - 如何使用 Highcharts Drupal 7 模块

> ID：15700276
> 
> 赞同：3
> 
> 时间：2013-03-29T09:05:52.750
> 
> 标签：drupal, highcharts, views

如何使用 Highcharts Drupal 7 模块。我尝试使用视图集成，但设置不可用。但我看到了这样的图像[http://drupal.org/files/views_settings.png](http://drupal.org/files/views_settings.png)。在我的 Drupal 安装中，当我单击 Highchart 的设置时，这些选项不存在。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T11:40:07.183

这两个教程可能会对您有所帮助.. 只需按照确切的说明进行操作

[http://webwash.net/tutorials/intro-visualization-api-part-1-views-and-gva](http://webwash.net/tutorials/intro-visualization-api-part-1-views-and-gva) [http://webwash.net/tutorials/intro-visualization-api-part-2-highcharts-and-code](http://webwash.net/tutorials/intro-visualization-api-part-2-highcharts-and-code)

# .net - 在 WPF 中显示日志文件的最简单方法是什么

> ID：15700277
> 
> 赞同：1
> 
> 时间：2013-03-29T09:05:53.217
> 
> 标签：.net, wpf

我在内存流中有一个日志文件，可以很容易地将其读取为字符串。但我不确定如何在 WPF 中最好地显示这个文件。我尝试了一个 TextBlock 并将其绑定到 text 属性。但是应用程序在加载文件时就死了。

是否有其他控件可以很好地在其中显示日志文件。没有参数，它只是我想显示并在其中轻松滚动的一行文本记录。

时不时地在日志中添加一个新行，我需要更新视图。

# 解决方案

使用 AvalonEdit ，TextEditor 加载速度快并且运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T09:18:36.700

我会`ListView`用`ItemsSource`你在你的日志文件中的记录列表来做一个。当您使用`ObservableCollection`as`ItemsSource`时，您可以通过将新记录添加到`ObservableCollection`.

`TextBlock`编辑：对于 100000 条记录，由于创建每条记录，这种方式需要一些时间来初始化。你可以试试`TextBox`控制。也许这对你的情况有用。绑定文本属性并将新记录添加到绑定字符串。

或者也许[这](http://www.codeproject.com/Articles/34405/WPF-Data-Virtualization)对你有帮助。

# java - 以下声纳问题的解决方案？

> ID：15700280
> 
> 赞同：2
> 
> 时间：2013-03-29T09:05:57.620
> 
> 标签：java, sonarqube

我的代码段中的以下代码行被声纳检测为问题。

代码段：

```
final int Pending=1; 
```

声纳问题：

> ```
>  Name 'Pending' must match pattern '^[a-z][a-zA-Z0-9]*$'. 
> ```

为什么声纳检测到这是一个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T10:13:33.027

好吧，Sonar 给出了违规的明确消息：变量“Pending”与给定的正则表达式模式“^[az][a-zA-Z0-9]*$”不匹配。这种模式意味着：任何以小写字母开头，后跟任何字母或数字的字符串。所以你的变量应该被称为“待定”，而不是“待定”。

更重要的是，正如 Juvanis 所说，这是 Java 中变量的标准命名约定。

# ruby-on-rails - 使用 Bootstrap 和 Rails 时遇到问题 - 单选按钮无法正常工作

> ID：15700281
> 
> 赞同：0
> 
> 时间：2013-03-29T09:06:01.950
> 
> 标签：ruby-on-rails, twitter-bootstrap, radio-button, toggle

我在 Rails 中使用引导程序时遇到了麻烦。

当我运行以下代码时，我只能选择一次单选按钮。

```
var ss = "<form accept-charset='UTF-8' action='/add_funds' \
class='simple_form new_fund' id='new_fund' method='post' \
novalidate='novalidate'> \
<input class='radio_buttons optional' id='fund_amount_1' name='fund[amount]' type='radio' value='1' /> \
<input class='radio_buttons optional' id='fund_amount_2' name='fund[amount]' type='radio' value='2' /> \
<input class='radio_buttons optional' id='fund_amount_3' name='fund[amount]' type='radio' value='3' /> \
<input class='radio_buttons optional' id='fund_amount_4' name='fund[amount]' type='radio' value='4' /> \
</form>";
$('.message-dialog-content').html(ss); 
```

有关更多信息，请参阅此视频链接。

[http://screencast.com/t/3D2Bxj6f37g](http://screencast.com/t/3D2Bxj6f37g)

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:50:19.560

我自己解决了这个问题。那是因为 jQuery 版本。我使用的是 jQuery 1.9.1，对一些方法（例如 jQuery 中的 attr 与 prop）进行了微小的更改。这是一个链接，您可以参考。[修复使用 Rails 和 jQuery1.9.1 的问题](https://github.com/caarlos0/rails-bootstrap-toggle-buttons/commit/70f8c25cf52a1cf80785086d874605798c0655d1)

# ios - 在表示 URL 的 NSString 的两个斜杠字符之间提取子字符串

> ID：15700287
> 
> 赞同：0
> 
> 时间：2013-03-29T09:06:22.203
> 
> 标签：ios, nsstring, extract

我有一个 NSString 对象，它是包含一长串随机字符的网页的 URL。我想提取字符串中仅有的两个斜杠之间包含的字符。任何人都可以帮我做到这一点吗？例如，我想在下面的字符串中提取 somewebpage.com 和 nextlink 之间的字符串。

[链接](https://somewebpage.com/687474703a2f2f696e74726163782e636174686179706163696669632e636/nextlink/home)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T09:17:58.527

```
 NSString *data = @"https://somewebpage.com/687474703a2f2f696e74726163782e636174686179706163696669632e636/nextlink/home";
    data = [data substringFromIndex:[data rangeOfString:@"somewebpage.com/"].location + [@"somewebpage.com/" length]];
    data = [data substringToIndex:[data rangeOfString:@"/nextlink"].location];

    NSLog(@"%@",data); 
```

*注意：我假设 somewebpage.com 和 nextlink 是您的 URL 的已知组成部分*。所以在此处替换该部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:16:21.547

```
NSRange rr2 = [content rangeOfString:@"https://somewebpage.com/"];
    NSRange rr3 = [content rangeOfString:@"/nextlink/home"];
    int lengt = rr3.location - rr2.location - rr2.length;
    int location = rr2.location + rr2.length;
    NSRange aa;
    aa.location = location;
    aa.length = lengt;
    theString = [theString substringWithRange:aa]; 
```

# java - Servlet 3.0 API - 注册一个 servlet

> ID：15700296
> 
> 赞同：2
> 
> 时间：2013-03-29T09:06:46.607
> 
> 标签：java, servlets, servlet-3.0

我正在 tomcat 7.0.37 和 eclipse 3.7 上开发一个示例 servlet。我目前的问题是让它可运行:(

```
//...imports and so on...

@WebServlet(value="/Hello")
public class AdminServlet extends HttpServlet
{
    private static final long serialVersionUID = -1139419481702036147L;

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        super.doGet(req, resp);

        PrintWriter writer = resp.getWriter();
        writer.write("HelloWorld");
        writer.close();
    }
} 
```

当我调用 URL 时，`"http://localhost:8080/{webappname}/Hello"`一个窗口变为“状态 404 - 资源不可用”。有什么问题吗？

就像在大多数 Servlet 3.0 示例中一样 :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:14:18.020

以下是一些原因：

*   确保您的 Servlet 容器支持 Servlet 3.0。他们中的大多数应该支持，
*   确保您的 web.xml 版本为 3.0。对于 web.xml 版本 < 3.0，注释可能不会得到处理。
*   确保 metadata-complete 属性为 false。如果为真，则注释可能不会被处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:14:25.623

创建`{webappname}.war`，将其放入`webapps`目录并重新启动服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T10:25:10.870

我发现了我的问题：我不得不删除“super().doGet();”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T09:23:16.207

问题是您没有将 servlet 映射到正确的 url 模式。servlet 名称应该映射到 URl 模式。但是在你的代码中它还没有完成。

要使用注释正确执行此操作，请参阅以下内容。

```
@WebServlet( name="AdminServlet", displayName="Admin Servlet", urlPatterns ={"/Hello","*.do"})
public class AdminServlet 
```

# c# - 如果更新，则更新 xml 数据库

> ID：15700303
> 
> 赞同：1
> 
> 时间：2013-03-29T09:07:25.410
> 
> 标签：c#, windows-phone-7

美好的一天，我有这个应用程序可以读取 7 个小 xml 并存储结果，但现在它会下载所有内容，即使 xml 文件未更改。

我很想检查 xml 是否更新或已修改，但我找不到解决方案，也许这是一个简单的解决方案，我正试图以更难的方式实现这一目标

有人可以帮忙吗？

谢谢'的建议:)

这是我的ATM代码：

```
WebClient downloader = new WebClient();
downloader.DownloadStringAsync(new Uri("http://feeds.feedburner.com/bluey/eventi20" + "?" + System.DateTime.Now.ToString(), UriKind.RelativeOrAbsolute));
downloader.DownloadStringCompleted += new DownloadStringCompletedEventHandler(EventiDownloaded); 
```

我尝试以这种方式在 xml 的标头中查找 lastmodify 或我可以使用的东西

```
WebClient downloader = new WebClient();
downloader.DownloadStringAsync(new Uri("http://feeds.feedburner.com/bluey/eventi20" + "?" + System.DateTime.Now.ToString(), UriKind.RelativeOrAbsolute));
downloader.DownloadStringCompleted += new DownloadStringCompletedEventHandler(EventiDownloaded);
WebHeaderCollection myWebHeaderCollection = downloader.ResponseHeaders;
 foreach(var x in myWebHeaderCollection)
   for (int i = 0; i < myWebHeaderCollection.Count; i++)
      MessageBox.Show("\t" + myWebHeaderCollection.AllKeys.GetEnumerator() + " = " + myWebHeaderCollection.AllKeys.ElementAt(i)); 
```

但我在 myWebHeaderCollection 中得到一个空引用错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:06:33.433

也许你可以尝试使用 ETag [http://en.wikipedia.org/wiki/HTTP_ETag](http://en.wikipedia.org/wiki/HTTP_ETag)

您可以仅请求标头（而不是全部内容）并获取 ETag 并保存该值。因此，您应该只在 ETag 更改时才执行完整请求。我个人没有这样做过。我和你有同样的问题，但我的提要每周更新一次，所以我做了一些不涉及这个实现的解决方法。

无论如何，这是一个演示仅标头请求的快速示例，您应该看到 ETag 并且您可以提取值以供您使用。

```
static void Main(string[] args)
{
    WebRequest webRequest = HttpWebRequest.Create("http://www.forexfactory.com/ffcal_week_this.xml");

    // Only request the headers, not the whole content
    webRequest.Method = "HEAD";
    var response = webRequest.GetResponse();

    for (int i = 0; i < response.Headers.Count; i++)
    {
        Console.WriteLine(response.Headers.Keys[i] + " : " + response.Headers[i]);
    }

    Console.Read();
} 
```

# linux - 应该如何将需要 root 权限的功能添加到 Common Lisp 库中？

> ID：15700311
> 
> 赞同：2
> 
> 时间：2013-03-29T09:07:40.270
> 
> 标签：linux, macos, unix, common-lisp, elevated-privileges

### 原始问题

我正在尝试创建一个 Lisp 库，除其他外，它可以编辑我的系统`/etc/hosts`文件和 nginx 配置。我面临的问题是，因为我的 Lisp 图像作为非特权用户运行，所以我的库不能做这些事情。理想情况下，当需要 root 权限时，我能够为我的库提供密码，以便它可以暂时提高其访问权限以完成任务。唉，我还没有找到任何与`sudo`. 有吗？我是以错误的方式接近这个吗？我该如何解决这个问题？

在代码中，我想要做的基本上是这样的：

```
(with-sudo (:username "root" :password (securely-read-line))
  (with-open-file (f "/etc/hosts" :direction :output :if-exists :append)
    (format f "127.0.0.1 mywebsite.local~%"))) 
```

### 澄清

我在 OS X 上使用 SBCL。我正在尝试创建一个库，它基本上是网站快速项目的专业化。目前，每次我在本地计算机上设置一个新的 Web 项目时，我都必须编辑分布在我系统中的配置文件。我希望尽可能多地自动化，并且我希望能够在我通常打开并连接到单个 SBCL 实例的 SLIME 会话中执行此操作。

以下是其他一些注意事项：

1.  我不希望我的 SBCL 主要实例成为`setuid`root
2.  我不介意生成一个新进程，无论是小型 C 程序还是加载几行代码然后退出的 SBCL 裸实例。
3.  我想使用保持 Lisp 与 C 的比率尽可能高。
4.  某些文本编辑器（例如 TextMate）在访问需要更高权限才能查看的文件时会提示输入用户名和密码，从而提供相应的访问权限。我想知道如何让我的 Lisp 库做同样的事情？
5.  起初我无法`sudo`（实际程序本身）在 SBCL 中工作：

    `(inferior-shell:run/ss '("sudo" "ls" ".")) ;; how can I pass sudo a password?`

    现在看起来可以使用`sudo`'s`-S`选项（谢谢 JustAnotherCurious）。我想我可能会走这条路；这绝对是我现在所倾向的。

不管怎样，谢谢大家！我从你们所有人那里学到了很多东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T10:58:15.067

如果您需要在您的进程中获得 root 访问权限，您首先需要以 root 身份启动您的 Lisp 进程。回想起来，通常不可能使非根进程运行。

幸运的是，Unix 有一种机制允许进程在运行时在 root 和非 root 权限之间切换。该机制称为有效用户 ID。以 root 身份运行的进程可以使用系统调用切换到非 root 有效 uid `seteuid`，也可以通过这种方式切换回“成为”root。

当然，如果您以 root 身份启动 Lisp 进程，则该进程可以完全控制机器，并且根据您正在处理的数据和机器，您需要考虑由此打开的可能的安全漏洞。幸运的是，在 Lisp 中很难产生缓冲区溢出，所以从这个角度来看，你处于更安全的一边:)

对系统调用接口的访问在 Common Lisp 中没有标准化，但大多数实现都有系统的本机接口，如果你计划让你的程序在基于 Linux/Unix 的 Lisps 之间移植，你也可以使用 CFFI [。](http://common-lisp.net/project/cffi/ "CFFI")

这是以 root 身份运行的 SBCL 的成绩单，演示了[seteuid](http://linux.die.net/man/3/seteuid "seteuid 手册页")的使用：

```
CL-USER> (defun write-file-in-filesystem-root ()
           (handler-case
               (with-open-file (f "/only-root-may-write-to-root"
                                  :direction :output
                                  :if-exists :supersede)
                 (write "hello" :stream f))
             (error (e) (format t "error: ~A~%" e))))
WRITE-FILE-IN-FILESYSTEM-ROOT
CL-USER> (sb-posix:seteuid 0)
0
CL-USER> (write-file-in-filesystem-root)
"hello"
CL-USER> (sb-posix:seteuid 1000)
0
CL-USER> (write-file-in-filesystem-root)
error: error opening #P"/only-root-may-write-to-root": Permission denied
NIL
CL-USER> (sb-posix:seteuid 0)
0
CL-USER> (write-file-in-filesystem-root)
"hello"
CL-USER> (delete-file "/only-root-may-write-to-root")
T 
```

如果您只需要访问受保护的文件，如果保持特定于 OSX 是可以接受的，并且如果您希望用户使用标准身份验证请求程序进行身份验证，则可以使用特定于 OSX的[authopen命令。](http://www.manpagez.com/man/1/authopen/ "授权打开手册页")

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T09:44:45.650

首先，您不能也不应该能够违反 Linux 权限系统。如果有某种方法可以滥用权限和身份验证系统，那将是一个巨大的安全漏洞：实际上，每个人都将拥有 root 访问权限。如果您想要这种不安全感，请返回 MSDOS！

然后，您可以配置您的系统以授予对几乎所有内容的 root 访问权限。您可以`sudo`将命令或`super`命令配置为不询问任何密码（我实际上是在某些机器上故意这样做的，但我确实知道这是 - 或可能被滥用为 - 一个安全漏洞）。这意味着信任运行该  `sudo`命令的实体（人或程序）。

此外，某些程序（例如`/bin/login`, `/usr/bin/sudo`, `/usr/bin/super`....）可以是[setuid](http://en.wikipedia.org/wiki/Setuid)（另请阅读[credentials(7)](http://man7.org/linux/man-pages/man7/credentials.7.html)和[execve(2)](http://man7.org/linux/man-pages/man2/execve.2.html)手册页），您的 Common Lisp 实现可能为[setuid(2)](http://man7.org/linux/man-pages/man2/setuid.2.html)或[setreuid( 2）](http://man7.org/linux/man-pages/man2/setreuid.2.html)系统调用（或者你可以自己编写调用*C*系统调用的包装器）。

但是，您似乎只是想将`127.0.0.1 mywebsite.local`条目添加到`/etc/hosts`; 为什么不能将这样的条目作为先决条件（因此，在安装 Common Lisp 软件的人工过程中，您需要 - 对人工系统管理员 - 应该添加这样的条目）。然后，您所要做的就是以某种方式将`mywebsite.local`名称传递给您的 Common Lisp 程序，这应该很容易。

我会警告不要使用用 Common Lisp 编写的*setuid二进制程序。*因为，除非您采取特殊预防措施，否则大多数 Common Lisp 二进制文件都包含（间接通过`eval`）整个 Common Lisp 编译器。并且授予对像 Common Lisp（例如 SBCL）这样的动态且强大的编译器的 root 访问权限是一个安全漏洞。

如果您坚持以`mywebsite.local`编程方式`/etc/hosts`从您的 Common Lisp 库中添加，您可以编写一个小型*C*帮助程序，其可执行文件例如`/usr/local/libexec/helperbinary`是root- *setuid*（即您`chown root /usr/local/libexec/helperbinary`在*安装*`chmod u+s /usr/local/libexec/helperbinary`时显然需要 root 才能运行这些和），其中正是这样做的，并且只能通过适当的技巧从您的 Common Lisp 二进制文件中启动。*在用C*编写那个微小的帮助程序时要非常小心，例如阅读[Advanced Linux Programming](http://advancedlinuxprogramming.com/) ，并多次校对你的*C代码（你很容易在**setuid*程序中制造安全漏洞）。*`chown``chmod`*

 **** * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T09:13:31.800

问题是您没有“提高”访问权限：您从超级用户权限开始，当您不再需要它们时将其删除（`sudo`您所指的程序被标记为[setuid root](http://en.wikipedia.org/wiki/Setuid)来实现这一点）。

因此，您想要实现的目标需要以 root 身份启动您的 LISP 解释器，然后让它派生另一个解释器进程并让该进程立即放弃其超级用户权限。从那里开始，非特权进程可以像往常一样运行您的代码，并使用[IPC](http://en.wikipedia.org/wiki/Inter-process_communication)到特权进程来拥有它，例如，写入`/etc/hosts`.

不幸的是，这不会是微不足道的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-29T09:52:06.477

如果您具有 root 访问权限的操作仅限于一些小而简单的操作，并且您可以编写一些特定于平台的代码，那么，我认为它会起作用，您可以尝试使用 sudo 从代码中执行 bash（或其他 shell）命令-S。

来自须藤人

```
The -S (stdin) option causes sudo to read the password from 
the standard input instead of the terminal device. 
The password must be followed by a newline character. 
```

但我认为最好不要做这样的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-08T21:42:38.760

如果您只是想以 root 身份使用命令执行某些任务，则无需以 root 身份启动 Lisp 解释器，就像您的 bash/zsh 未以 root 身份启动但仍然可以`sudo`正常运行一样。

> 如何传递 sudo 密码？

如果您正在使用[`inferior-shell`](https://github.com/fare/inferior-shell)：

```
(inferior-shell:run/interactive '("sudo" "ls" ".")) 
```

否则，使用普通 UIOP：

```
(uiop:run-program '("sudo" "whoami")
                  :input :interactive
                  :output :interactive) 
```

* * *

如果你确实想运行 Lisp 代码而不仅仅是一个外部命令，你将不得不做一些像这样丑陋的事情：

```
(string-trim
 '(#\space #\return #\linefeed)
 (uiop:run-program
  ;; Notice how "sbcl" is hardcoded. Making this portable is also non-trivial.
  '("sudo" "sbcl" "--noinform" "--non-interactive" "--eval" "(print (+ 1 2))")
  :input :interactive
  :output :interactive)) 
```

通过足够的努力（以某种方式捕获当前环境并在新进程中重新建立它，也许处理输出值以便您可以例如列出特权目录并将其作为路径列表返回......），可能有可能实现一个`with-sudo`宏，透明地要求用户获得更多权限以以 root 身份运行更多 Lisp 代码。但这不是微不足道的。***

# php - Wordpress - 链接附件以使用原始 php sql 查询发布

> ID：15700313
> 
> 赞同：0
> 
> 时间：2013-03-29T09:07:57.890
> 
> 标签：php, mysql, wordpress

我正在开发一个 wordpress 网站的移动版本（它将在子域上运行并共享 WP 数据库），只有几个静态页面和 2 个动态页面，一个列出 WP 帖子，一个带有允许的表单用户发布带有附件的内容。它是原始 PHP，所以我没有使用 WP 函数；列出/创建新帖子和创建附件很容易，但我在将附件链接到帖子时遇到问题......

当我发布附件时，我在 wp_posts 中创建一个具有“附件”自定义类型的条目，并且父 ID 设置为我之前创建的帖子的 ID，然后我在 wp_postmeta 中创建一个带有附件 ID 的条目，meta_key '_wp_attached_file ' 和附件路径。

问题是附件似乎没有与帖子链接......实际上，它甚至没有出现在媒体库中。所以我想还有更多事情要做，但我不知道是什么，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:41:58.910

我刚刚发现了问题，而且像往常一样，它真的很愚蠢：我为“post_type”写了“attachment”（注意额外的“e”）而不是“attachment”……这就是法国人的问题。

# php - 在安卓设备上显示数学公式

> ID：15700315
> 
> 赞同：0
> 
> 时间：2013-03-29T09:08:00.187
> 
> 标签：php, android

我正在创建一个学校申请。其中主要有 2 个版本，一个用于服务器端，另一个用于 android 设备。现在我必须从服务器端添加数学公式，我需要在 android 设备上显示它们。我在服务器端使用 fckeditor 插入问题，我添加了来自“ [http://www.codecogs.com/latex/integration/fckeditor/install.php](http://www.codecogs.com/latex/integration/fckeditor/install.php) ”的公式。但我正在寻找任何解决方案来在 android 设备上显示它们。

所以，我正在寻找一些更好的方法来显示/插入数学公式......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:14:16.937

我不知道 android 设备支持或看不到[http://www.mathjax.org/](http://www.mathjax.org/)是一个用于数学公式演示的 JavaScript 程序：http: [//www.mathjax.org/demos/mathml-samples/](http://www.mathjax.org/demos/mathml-samples/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:14:30.300

您从 Android 设备查询服务器的公式，并将响应作为 JSON 数据或 XML 数据发送到 Android 设备。在您的 Android 客户端中解析 JSON 或 XML。然后根据需要在设备中显示它。

有很多 JSON/XML 解析器可用于解析它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:29:50.487

我已经在同类型的 App 上工作过。我的应用程序基于 RestFull 架构，并且在我的应用程序通信中，以 JSON 对象的形式从客户端到服务器。我希望这个建议对你有帮助

# java - JSF 零件

> ID：15700316
> 
> 赞同：0
> 
> 时间：2013-03-29T09:08:03.617
> 
> 标签：java, jsf-2, primefaces

我想做简单的下拉列表。

```
<p:selectOneMenu id="starter" value="#{reportRegisterManagedBean.starter}" style="width:160px" converter="#{reportStarterConverter}" required="true" requiredMessage="Select Report Starter">
                           <ui:repeat value="#{reportRegisterManagedBean.startersSelectItems}" var="dss">
                                <f:selectItem  itemLabel="#{dss}" itemValue="#{dss}" itemDescription="TEST" />
                           </ui:repeat>
                        </p:selectOneMenu> 
```

`DropDownList`是 enpty，如果我使用`<f:selectItems>`而不是`<ui:repeat>`效果很好，但是`<f:selectItems>`Component `itemDescription`=（这是简单的工具提示类比）不起作用。`<f:selectItem>`组件`itemDescription`=（这是简单的工具提示类比）工作正常。这就是为什么我决定将 and`<f:selectItem>`与它的`itemDescription`属性一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:34:22.067

`<f:selectItem>`需要在视图构建时添加。但是，`<ui:repeat>`在视图渲染期间运行。您需要一个在视图构建期间运行的中继器。JSTL`<c:forEach>`就是这样一个。

```
<p:selectOneMenu ...>
    <c:forEach items="#{reportRegisterManagedBean.startersSelectItems}" var="dss">
        <f:selectItem ... />
    </c:forEach>
</p:selectOneMenu> 
```

或者，创建自定义渲染器。这是一个完全相同的示例`<p:selectManyCheckbox>`：[Primefaces tooltip for p:selectManyCheckbox](https://stackoverflow.com/questions/11780397/primefaces-tooltip-for-pselectmanycheckbox/12512353#12512353)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T14:21:44.210

因为你不喜欢 String 数组。这是用户类的测试和工作示例：

```
public class FilterBean {

private List<User> uList = new ArrayList<User>();
private User selectedUser = new User();

public List<User> getuList() {
    User u1 = new User();
    u1.setName("Tom");
    u1.setDesc("worker");
    User u2 = new User();
    u2.setName("Peter");
    u2.setDesc("owner");

    uList.add(u1);
    uList.add(u2);

    return uList;
}

public void setuList(List<User> uList) {
    this.uList = uList;
}   

public User getSelectedUser() {
    return selectedUser;
}

public void setSelectedUser(User selectedUser) {
    this.selectedUser = selectedUser;
}
} 
```

这是JSF

```
 <p:selectOneMenu value="#{filterBean.selectedUser}"> 
        <f:selectItem itemLabel="Select One" itemValue="" />   
        <f:selectItems  value="#{filterBean.uList}" var="n" itemValue="#{n}" itemDescription="#{n.desc}" itemLabel="#{n.name}" />  
    </p:selectOneMenu> 
```

这显示了 Tom 和 Peter 的 desc :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T09:30:10.563

以下是在 中创建下拉列表的方法`primefaces`：

```
<p:selectOneMenu id="starter" value="#{reportRegisterManagedBean.starter.selectedItem}">  
        <f:selectItems value="#{reportRegisterManagedBean.starter.startersSelectItems}" />  
</p:selectOneMenu> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T10:16:26.360

我尝试了几个例子并得到了这个结果：

我在pojo中有这个：

```
private String selectL;
private String[] listas;

public String[] getListas() {
    listas = new String[2];  
    listas[0] = "pirmas";
    listas[1] = "antras";
    return listas;
} 
```

这个 jsf 有效（itemDescription 必须是字符串）：

```
 <p:selectOneMenu value="#{formBean.selectL}">   
        <f:selectItems  value="#{filterBean.listas}" var="n" itemDescription="#{n}2" />  
    </p:selectOneMenu> 
```

这不是：/：

```
 <p:selectOneMenu value="#{formBean.selectL}">   
        <f:selectItems  value="#{filterBean.listas}" itemDescription="test2" />  
    </p:selectOneMenu> 
```

编辑：

经过一些测试，我刚刚将 var 添加到第二个 selectOneMenu 中，它现在也可以工作了：

```
 <p:selectOneMenu value="#{formBean.selectL}">   
        <f:selectItems  value="#{filterBean.listas}" var="n" itemDescription="test2" />  
    </p:selectOneMenu> 
```

# java - MonoDroid Java 绑定：控制常量命名

> ID：15700318
> 
> 赞同：0
> 
> 时间：2013-03-29T09:08:09.087
> 
> 标签：java, binding, xamarin.android

使用 MonoDroid 创建 Java 绑定时，它将包含下划线的 Java 常量名称转换为 C# 驼峰式名称：

[Register ("SOME_CONSTANT_NAME")] public const int SomeConstantName = (int) 3;

我知道这是 .NET 中的“通用”命名约定，但我想保留原始名称。

是否可以控制命名转换，即。全局关闭驼峰转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:11:19.163

Xamarin.Android（以前称为 MonoDroid）允许您使用元数据转换控制生成的 C# 绑定的各个方面。相关文档在这里：

[http://docs.xamarin.com/guides/android/advanced_topics/java_integration_overview/binding_a_java_library_%28.jar%29/api_metadata_reference/](http://docs.xamarin.com/guides/android/advanced_topics/java_integration_overview/binding_a_java_library_%28.jar%29/api_metadata_reference/)

具体来说，该`EnumFields.xml`文件控制基于 java int 常量生成枚举时使用的转换。例子：

```
<type enum-type="Some\Package\MyClassEnumType" java-class="some/package/MyClass$MyConstants">
   <member enum="CONSTANT_ONE" java="CONSTANT_ONE" value="1" />
   <member enum="CONSTANT_ZERO" java="CONSTANT_ZERO" value="0" />
</type> 
```

# php - php中非常简单的套接字代码 - 放入数据是可以的，但什么也不返回

> ID：15700319
> 
> 赞同：0
> 
> 时间：2013-03-29T09:08:08.963
> 
> 标签：php, sockets

我需要将一些数据发布到监听服务器并使用 php 中的套接字获取答案。

把工作做好（接收者得到他需要的东西），但是当我试图得到任何 serwer answear 时，我就是不能。它只是一遍又一遍……看起来`while`永远不会结束，但为什么呢？（在服务器端团队检查并说响应是提交给我的）。

我使用 Php 但 serwer 是 c++（我听说这可能是问题所在）

编码：

```
ini_set('max_execution_time', 36000); // to test the shile for a longer time, but aparentry responce goes right away

$fp = fsockopen("192.168.x.x", 9999, $errno, $errstr, 30);
if (!$fp) {
    echo "$errstr ($errno)<br />\n";
} else {

    echo "Connected<br />\n";

$out = chr(11)."MSH|....some fields there....|".chr(28).chr(13); //chr(x) are ruquired by serwer

if ( fputs($fp, $out, strlen($out)) )
{

    echo "<br />\nwriting message<br />\n";//if I eomment the while below this will show without problem

    while (!feof($fp)) {
       echo fgets($fp, 1024);
    }//just goes and goes... never finding end of file (I gues)
}

    fclose($fp);
} 
```

我在 php 中使用了 3 种不同的方式来打开套接字，它们似乎都有类似的问题。我如何测试出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:14:23.160

我会尝试使用 fwrite 而不是 fputs，但是您的代码看起来不错，您应该描述一下您使用它的目的、哪个服务器等等，以获取有关它的一些文档。

并选择 TCP/UDP。

```
$fp = fsockopen('udp://192.168.X.X', '9999', $errno, $errstr, 10);
fwrite($fp, '\\xff\\xff\\xff\\xff\\'); 
```

试试这个。

```
 do {
      $contents .= fgetc($fp);
      $socketstatus = socket_get_status($fp);    
    } while($socketstatus["unread_bytes"]); 

 echo $contents; 
```

# java - 西塔有什么作用？

> ID：15700323
> 
> 赞同：3
> 
> 时间：2013-03-29T09:08:23.303
> 
> 标签：java, math, floating-point, lwjgl, slick2d

所以我在 Slick2D 中找到了这个名为 Vecter2f 的类，其中有一个名为 getTheta 的方法。我不知道这是做什么的，但如果有帮助的话，我得到了方法的来源。而这种方法有什么用？

```
public strictfp double getTheta() {
    double theta = StrictMath.toDegrees(StrictMath.atan2(this.y, this.x));
    if ((theta < -360.0D) || (theta > 360.0D)) {
        theta %= 360.0D;
    }
    if (theta < 0.0D) {
        theta += 360.0D;
    }

    return theta;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:12:12.087

考虑[以下直角三角形](http://hyperphysics.phy-astr.gsu.edu/hbase/ttrig.html)：

![直角三角形](../Images/c83eb390c199094c7fca36a9dc962094.png)

给定`Rx`和`Ry`，函数计算`θ`。结果以[度数](http://en.wikipedia.org/wiki/Degree_%28angle%29)表示并归一化为`[0; 360)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T09:11:39.817

它返回 x 轴与连接给定点和坐标系原点的线段形成的（标准化）角度（以度为单位）。因此，当点转换为[极坐标形式](http://en.wikipedia.org/wiki/Complex_number#Polar_form)时，此函数返回其[参数](http://en.wikipedia.org/wiki/Arg_%28mathematics%29)。

# php - 对所有对象属性进行 foreach

> ID：15700325
> 
> 赞同：3
> 
> 时间：2013-03-29T09:08:34.070
> 
> 标签：php, loops

如何从该类内部或外部对一个类的所有字段执行 foreach？例如，给定以下类：

```
class Foo
{
    public $a;
    public $b;
    private $c;
    private $d;

    public function __construct($params)
    {
        foreach($params as $k=>$v){
            $this->$k = $v;
        }
    }

    public function showAll()
    {
        $output = array();
        foreach (this as $k=>$v) {    // How to refer to all the class properties?
            $output[$k] = $v;
        }
        return $output;
    }

} 
```

`foreach()`方法中的in如何`showAll()`引用`$a`、`$b`、`$c`和`$d`属性？

就此而言，可以从类外获取所有公共属性吗？

```
$params = array();
$foo = new Foo($params);

foreach ($foo->allProperties as $f=>$v) {    // how to do this?
    echo "{$f}: {$v}\n";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T09:14:19.363

从 PHP4 开始，您可以使用它[`get_object_vars`](http://php.net/manual/en/function.get-object-vars.php)来迭代对象的公共属性。

```
foreach (get_object_vars($foo) as $f => $v) {
    echo "{$f}: {$v}\n";
} 
```

从 PHP5 开始[，您可以](http://php.net/manual/en/language.oop5.iterations.php)直接遍历对象：

```
foreach ($foo as $f => $v) {
    echo "{$f}: {$v}\n";
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T09:16:35.353

使用反射类：[类反射类手册](http://www.php.net/manual/en/class.reflectionclass.php)（PHP 5）

```
<?php
class Foo {
   public    $foo  = 1;
   protected $bar  = 2;
   private   $baz  = 3;
}

$foo = new Foo();

$reflect = new ReflectionClass($foo);
$props   = $reflect->getProperties(ReflectionProperty::IS_PUBLIC | ReflectionProperty::IS_PROTECTED);

foreach ($props as $prop) {
   print $prop->getName() . "\n";
}

var_dump($props);

?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T09:15:48.570

可能您正在寻找[get_object_vars()](http://php.net/manual/en/function.get-object-vars.php)

```
$params = array();
$foo = new Foo($params);

foreach (get_object_vars($foo) as $f=>$v) {    // how to do this?
echo "{$f}: {$v}\n";
} 
```

从 php5 开始，您还可以使用简单对象进行迭代。它还将遍历所有公共属性

```
$foo = new Foo($params);

foreach($class as $key => $value) {
print "$key => $value\n";
} 
```

见[http://php.net/manual/en/language.oop5.iterations.php](http://php.net/manual/en/language.oop5.iterations.php)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-29T09:50:15.780

从对象外部获取所有属性及其值（包括私有属性）且不依赖于未记录的行为或实现细节的唯一方法是[反射](http://www.php.net/manual/en/book.reflection.php)：

```
$ref=new ReflectionObject($object);
foreach ($ref->getProperties() as $prop)
{
    $prop->setAccessible(true);
    $name=$prop->getName();
    $value=$prop->getValue($object);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-29T09:12:20.617

您可以使用[get_class_vars](http://www.php.net/manual/en/function.get-class-vars.php) — 获取类的默认属性您可以执行以下操作：

```
<?php
class myclass {
    var $var1; // this has no default value...
    var $var2 = "xyz";
    var $var3 = 100;
    private $var4; // PHP 5    
    // constructor
    function myclass() {
        // change some properties
        $this->var1 = "foo";
        $this->var2 = "bar";
        return true;
    }
}
$my_class = new myclass();
$class_vars = get_class_vars(get_class($my_class));
foreach ($class_vars as $name => $value) {
    echo "$name : $value\n";
}
?> 
```

欲了解更多信息，只需检查[PHP](http://www.php.net/manual/en/function.get-class-vars.php)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-29T09:22:20.650

[虽然您可以使用get_object_vars](http://php.net/manual/en/function.get-object-vars.php)迭代公共对象属性，但必须这样做可能是一个糟糕的设计，也是重新考虑您的实现的理由。你想对对象的属性做的事情很可能属于类/对象本身，以编程方式。

# eclipse - 无法为 Eclipse 安装 eUML2 免费版？

> ID：15700327
> 
> 赞同：2
> 
> 时间：2013-03-29T09:08:50.773
> 
> 标签：eclipse, eclipse-plugin

我将 url 放在我的更新管理器中。我有一个错误 -

```
Cannot complete the install because one or more required items could not be found.
Software being installed: eDepend 3.7.1.20110624 (com.soyatec.edepend.feature.
group 3.7.1.20110624)
Missing requirement: eDepend 3.7.1.20110624 (com.soyatec.edepend.feature.group 
3.7.1.20110624) requires 'org.eclipse.platform.feature.group 
[3.3.0.v20070608-_19UEkLF-XsdF9jJrkPi,4.0.0)' but it could not be found 
```

我搜索了谷歌，但一无所获。我该如何解决 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-08T15:16:38.677

你使用正确的版本吗？

要求可以在这里找到 >> [eUML2 安装要求](http://www.soyatec.com/euml2/installation/)

（ps我使用了本地安装，这对我有用）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-29T09:13:02.197

先安装“Graphical Modeling Framework (GMF) Runtime”，重启Eclipse，安装eUML2。

# php - Highcharts 使用 php 将图表导出为服务器端的图像

> ID：15700329
> 
> 赞同：3
> 
> 时间：2013-03-29T09:09:06.653
> 
> 标签：php, highcharts, export

我在网上搜索了我的问题，发现了一些关于 phantomjs 或 batik 的解决方案。我尝试使用这些方法，但失败了。我认为这是因为我不太了解我必须做什么。

有人可以清楚地解释我并逐步说明我该怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-08-29T02:40:00.507

如果您不介意调用第三方服务器，还有一个更简单的选择（即您必须同意您的数据在互联网上不受保护地传递）。Highcharts 有自己的导出服务器，您可以使用 highcharts 配置对象调用它。

[在http://export.highcharts.com/](http://export.highcharts.com/)查看他们的演示。您可以使用 chrome 检查的网络选项卡查看呼叫的样子并自己复制它。基本上，您只需执行以下操作：

*   [向http://export.highcharts.com/](http://export.highcharts.com/)发出 POST 请求
*   传递一个 x-www-form-urlencoded 主体，您可以在其中将选项键更改为与图表匹配的 highcharts 配置对象。这是一个例子：

    ```
    async:true
    content:options
    type:image/png
    width:
    scale:
    constr:Chart
    callback:
    options: {{Your config Object here}} 
    ```

*   他们的服务器将响应类似“files/somename.png”的字符串，然后您可以通过调用[http://export.highcharts.com/files/somename.png检索该字符串](http://export.highcharts.com/files/somename.png)

我建议立即将该图像保存在您的服务器上，因为我不确定它们可以保存多久。

他们的服务在[http://www.highcharts.com/docs/getting-started/frequently-asked-questions的常见问题页面上进行了解释](http://www.highcharts.com/docs/getting-started/frequently-asked-questions)

他们解释了您可以通过[http://www.highcharts.com/component/content/article/2-news/52-serverside-generated-charts#post-param传递给服务器的参数](http://www.highcharts.com/component/content/article/2-news/52-serverside-generated-charts#post-param)

如果您仍然需要运行自己的导出服务器，请查看这篇文章。Highcharts 对如何使用示例代码进行了很好的说明：[http ://www.highcharts.com/component/content/article/2-news/52-serverside-generated-charts](http://www.highcharts.com/component/content/article/2-news/52-serverside-generated-charts)

# css - 为什么右侧的div会启用水平滚动条？

> ID：15700331
> 
> 赞同：1
> 
> 时间：2013-03-29T09:09:12.433
> 
> 标签：css, html, css-position

**我想要达到的目标**

*   我居中的文本内容后面有两个重叠的背景 div。
    *   文本内容 div 左下方的一个。
    *   一个在文本内容 div 的右上角。
    *   两者都应该稍微落后于文本内容。
    *   两者都应附加到文本 div。
*   只有当窗口的宽度小于`div.text`' 的宽度时，水平滚动条才应该可见。
*   因此，另外，如果两个背景 div 超出可见区域，它们不应该启用水平滚动条。

**我已经拥有的**

*   请参阅这个[简单的 JsFiddle 示例](http://jsfiddle.net/UBdp3/6/)。在 Chrome 25 和 FireFox 19 中测试。

**问题**

现在，如果我减小窗口宽度以使蓝色和红色框超出可见区域，则会显示水平滚动条。但是，如果我设置`display: none;`on `div.right`，则不会显示滚动条。

我如何获得所需的功能`div.right`，以便如果蓝色和红色框被窗口框架切断，水平滚动条保持隐藏状态？有没有一个很好的、跨浏览器兼容的解决方案？

**编辑**

在我的实际站点上，红色和蓝色框将包含一个图像，所以我也在考虑将 bg 图像切成两半并将较小的部分设置`background-image`为内容 div 的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:21:41.267

您`CSS`只能通过使用`CSS3 Calc`并将主体设置为`position: relative`.

现场演示：http: [//jsfiddle.net/AMC93/](http://jsfiddle.net/AMC93/)

HTML

```
<div class="wrapper">
    <div class="left"></div>
    <div class="right"></div>
</div>
<div class="text">Lorem ipsum dolor sit amet, etc</div> 
```

CSS

```
html, body {
    padding: 0;
    margin: 0;
    position: relative;
}
.wrapper {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
}
.right {
    margin: 0 auto;
    position:absolute;
    background-color: red;
    width: 100px;
    height: 100px;
    z-index: -1;
    top: 0;
    right: calc(50% - 230px);
}
.left {
    margin: 0 auto;
    position:absolute;
    background-color: blue;
    width: 100px;
    height: 100px;
    z-index: -2;
    left: calc(50% - 230px);
    bottom: 0;
}
.text {
    width: 300px;
    min-height: 500px;
    height: auto;
    z-index: 800;
    text-align: justify;
    margin: 0 auto;
    overflow-x: auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:00:29.597

请使用以下内容，希望它能解决您的问题

```
$('.left').css('left', 0);
$('.right').css('right', 0); 
```

试试这个解决方案

# c# - 如何在复制到文本文件之前删除特殊字符？

> ID：15700332
> 
> 赞同：0
> 
> 时间：2013-03-29T09:09:17.617
> 
> 标签：c#

下面是用于从 Document 读取数据并移植到 Textfile 的代码，

但是，在写入文本文件之前，我想删除或忽略文档中存在的特殊字符。特殊字符是指箭头、项目符号、复制符号等。当涉及到文本文件时，它会显示一些随机字符.所以，我想在写入文本文件之前删除或忽略那些字符或符号。

```
object file;

file = filepathtb.Text;

object Target = Path.GetDirectoryName(System.Windows.Forms.Application.ExecutablePath) + "\\Temp_str.txt";
Microsoft.Office.Interop.Word.Application newApp = new Microsoft.Office.Interop.Word.Application();

object Unknown = Type.Missing;
newApp.Documents.Open(ref file, ref Unknown, ref Unknown, ref Unknown, ref Unknown, ref Unknown, ref Unknown, ref Unknown, ref Unknown, ref Unknown, ref Unknown, ref Unknown, ref Unknown, ref Unknown, ref Unknown, ref Unknown);
object format = Microsoft.Office.Interop.Word.WdSaveFormat.wdFormatText;

// if(newApp.ActiveDocument.Content.Characters = a

newApp.ActiveDocument.SaveAs(ref Target, ref format, ref Unknown, ref Unknown, ref Unknown,
    ref Unknown, ref Unknown, ref Unknown,
    ref Unknown, ref Unknown, ref Unknown,
    ref Unknown, ref Unknown, ref Unknown,
    ref Unknown, ref Unknown); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:24:13.127

尝试这样的事情：

```
string myText = "sample text...";
string formattedText = String.Empty;

foreach(char c in myText)
{
    if(Char.IsLetterOrDigit(c) || Char.IsWhiteSpace(c) || Char.IsPunctuation(c))
        formattedText += c;
} 
```

# iphone - 检查日期是否在 iOS 目标 c 中的 2 月 5 日之前

> ID：15700336
> 
> 赞同：-4
> 
> 时间：2013-03-29T09:09:31.687
> 
> 标签：iphone, ios, objective-c

我如何检查日期选择器输入的日期是否在存储为变量的某一天之前，年份无关紧要。

例如，我需要检查在日期选择器上选择的日期，让我知道它是在 1 月 5 日之前还是 1 月 5 日之后。如果结果为真，则结果应触发 IF 函数。

```
NSDate * dateOne = [NSDate date];
NSDate *dt1 = NSDate date];

if([dateOne compare:dateTwo] == NSOrderedAscending) {
    NSLog(@"TRUE");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T09:26:41.237

您想要做的是将当前日期拆分为[NSDateComponents](https://developer.apple.com/library/iOS/#documentation/Cocoa/Reference/Foundation/Classes/NSDateComponents_Class/Reference/Reference.html)。

```
NSCalendar *currentCalendar = [NSCalendar currentCalendar];
NSDateComponents *components = [currentCalendar components:NSDayCalendarUnit | NSMonthCalendarUnit fromDate:[NSDate date]];

if (components.month < 2 || (components.month == 2 && components.day < 5) ){
    // Before the 5th of february.
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-29T09:22:43.070

您可以只获得所选日期的日期和月份，如下所示..

```
NSInteger sDay = [[[yourDatePicker date] stringFromDateWithFormat:@"dd"] integerValue];
NSInteger sMonth = [[[yourDatePicker date] stringFromDateWithFormat:@"MM"] integerValue];
if ( sMonth < 2 || (sMonth  == 2 && sDay < 5) ) {
        NSLog(@"yes its further");
} 
```

以下是一种可用于将任何日期转换为任何日期格式的方法。

```
-(NSString*)stringFromDateWithFormat:(NSString*)strDateFormat{
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
     //[formatter setTimeZone:[NSTimeZone systemTimeZone]];
    [formatter setDateFormat:strDateFormat];
    NSString *str = [formatter stringFromDate:self];
    [formatter release];
    return str;
} 
```

# php - 正则表达式问题

> ID：15700337
> 
> 赞同：1
> 
> 时间：2013-03-29T09:09:32.983
> 
> 标签：php, regex

我有下面的正则表达式，我试图把它分成两部分，但可能并不总是这两部分。

> 部分级别：非常低。类型：动物。

我正在使用以下内容按字符进行拆分，但我需要能够按字符串拆分，识别级别和类型，以便可以将它们返回到两个单独的数据库列中。例如，我需要检查字符串并查看是否有任何与“Section Level: {text}”匹配的内容。并将其插入数据库的级别列中，类型相同，我需要检查字符串中的“类型：{text}”。并将其插入类型列。

```
(?<=\:)(.*?)(?=\.) 
```

我已经能够使用第一部分，`(\w*)(.*?)(?=\.)`但仍然无法为我的生活获得第二部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:19:55.787

以下正则表达式应该适合您：

```
(?=\w)(?:Section\s+Level:\s*([^.]+)\.)?\s*(?:Type:\s*([^.]+)\.)? 
```

将`Level`和`Type`字段作为可选字段。

### 现场演示：[http ://www.rubular.com/r/GpSHs69YHy](http://www.rubular.com/r/GpSHs69YHy)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:14:34.157

我可能会使用[`strtok`](http://php.net/manual/en/function.strtok.php)而不是正则表达式：

```
$string = 'Level: Very Low. Type: Animal.';

$parts = array();

for ($s = strtok($string, '.'); $s; $s = strtok('.'))
{

  $array = explode(':', $s);

  $parts[trim($array[0])] = trim($array[1]);

}

print_r($parts); 
```

那会给你：

```
Array
(
    [Level] => Very Low
    [Type] => Animal
) 
```

好处是，如果您曾经添加过其他内容，`Gender: Male`那么您就不必修改代码（很多）。

# ruby - 我可以/应该编写一个返回对象的 RSpec 匹配器吗？

> ID：15700339
> 
> 赞同：1
> 
> 时间：2013-03-29T09:09:44.680
> 
> 标签：ruby, rspec, capybara

我想为其中一个浏览器自动化库（Capybara）编写几种方法，以使使用它的人们的生活更轻松。

特别是我想添加两种方法：

*   期望用户操作打开窗口的一种。API 用户应该能够知道打开了哪个窗口

    ```
    window_handle = window_opened_by(wait: 3) { find('#open-window').click } 
    ```

*   另一个期望用户操作关闭窗口

    ```
    expect { find('#close-window').click }.to close_this_window(wait: 3) # clicking element with id 'close-window' should close window in no more than 3 seconds 
    ```

但我希望这些方法彼此更相似。有没有可能让它们更相似？例如，是否可以让 RSpec 匹配器返回 window_handle？

```
window_handle = expect { find('#open-window').click }.to open_window(wait: 3) 
```

# c# - 从隔离存储加载图像时出现内存不足异常

> ID：15700340
> 
> 赞同：1
> 
> 时间：2013-03-29T09:09:55.033
> 
> 标签：c#, windows-phone-7, out-of-memory, bitmapimage

我正在*`OutofMemoryException`*输入这个特定的代码。

```
public BitmapImage GetImage(int pageNo)
        {
            if (!this._isLoaded)
            {
                this.Load();
            }
            using (IsolatedStorageFileStream stream = IsolatedStorageFile.GetUserStoreForApplication().OpenFile(this.FileNames[pageNo], FileMode.Open, FileAccess.Read))
            {
                BitmapImage image = new BitmapImage();
                image.SetSource(stream);            

                return image;

            }
        } 
```

内存不足异常发生在`image.SetSource(stream)`。我无法将 uri 设置为，`null`因为我必须返回图像。

解决方法是什么？在这里帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:56:01.940

我有这个位图图像列表。

```
 private List<BitmapImage> _images = new List<BitmapImage>(); 
```

我在离开页面时清除了uri。

```
 protected override void OnNavigatedFrom(NavigationEventArgs e)
        {
            base.OnNavigatedFrom(e);
            this.DataContext = null;
            foreach (var obj in this._images)
            {
                if (obj != null)
                {
                    obj.ClearValue(BitmapImage.UriSourceProperty);
                }

            } 
```

# c++ - openCV SURF 错误

> ID：15700342
> 
> 赞同：1
> 
> 时间：2013-03-29T09:09:55.737
> 
> 标签：c++, opencv

**我正在使用 opencv 2.44 ， viusal studio c++ 2010** 当我编译时我得到这个错误

> 错误 1 ​​错误 LNK2019：函数 _main C:\Users\user\Desktop\proiect\ 中引用的未解析外部符号“public: __thiscall cv::SURF::SURF(void)”(??0SURF@cv@@QAE@XZ) prj\prj\sh1.obj prj

```
#include <opencv2\imgproc\imgproc_c.h>
#include <stdio.h>
#include <math.h>
#include <opencv\highgui.h>
#include <opencv\cv.h>
#include <opencv2/features2d/features2d.hpp>
#include <opencv2/calib3d/calib3d.hpp>
#include <opencv2/core/core.hpp>
#include <opencv2/nonfree/features2d.hpp>
using namespace cv;
void main(){
char i; 
Mat image,img,ref;
ref=imread("hh.jpg");
// create window to show image 
namedWindow("window", CV_WINDOW_AUTOSIZE);
namedWindow("costel", CV_WINDOW_AUTOSIZE);
namedWindow("fanel", CV_WINDOW_AUTOSIZE);
Mat ig,ib,ibb;
Mat bkg;
Mat prev;
Mat stor;
cvtColor(ref, ref, CV_BGR2GRAY);
FastFeatureDetector detector(15);
vector<KeyPoint> keypoints1;
detector.detect(ref, keypoints1);
SurfDescriptorExtractor extractor;
Mat descriptors1;
extractor.compute(ref, keypoints1, descriptors1);

.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:20:55.367

对我来说，设置项目属性似乎有问题。VS中的属性->链接器->输入->附加依赖项。可能是你仔细检查你是否添加了 opencv_features2d244.lib 和 opencv_nonfree244.lib

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:05:07.983

1.  将您需要使用的所有 DLL 复制到 DEBUG 文件夹或您的 exe 所在的位置。
2.  检查所有的源路径和头路径

祝你好运。您可能在丢失 DLL 的神话中，在您的 cv 安装文件夹中找到 opencv_nonfree244.dll 、 opencv_features2d244.dll 和所有其他 dll 并将它们复制到应该修复它的文件夹中。

# javascript - 如何删除 p 元素内的文本？

> ID：15700344
> 
> 赞同：1
> 
> 时间：2013-03-29T09:10:16.583
> 
> 标签：javascript, jquery

假设我有这样的事情：

```
<p>
 <h1>Coming events</h1>
 <br>
 randomtext
randomtext
randomtext
<h1>Past events</h1>
<br>
randomtext
randomtext
randomtext
</p> 
```

我想删除包含过去事件的 h1 以及之后的每一行文本，直到`<p>`关闭。我试过环绕一个 div 但这似乎对我不起作用。我还在学习jQuery的过程中。

所以我期望在 jQuery 运行后输出如下：

```
<p>
     <h1>Coming events</h1>
     <br>
     randomtext
    randomtext
    randomtext
</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:42:37.780

正确的方法是包装一个`div`：

```
<p>
 <div id="sectionA">
    <h1>Coming events</h1>
    <br>
    randomtext
    randomtext
    randomtext
</div>
 <div id="sectionB">
    <h1>Past events</h1>
    <br>
    randomtext
    randomtext
    randomtext
</div>
</p> 
```

然后像这样删除它：`$('#sectionB').remove();`

但如果你不能，你可以删除这样的文字：

```
var text = $('p').html();
text = text.substr(0,text.indexOf("<h1>Past events</h1>"));
$('p').html(text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:10:43.960

```
var $parent = $('p:first').parent();
var text = $parent.html();
$parent.html(text.substr(0, text.indexOf("<h1>Past events</h1>"))); 
```

# c# - 在年龄受限的 Facebook 粉丝页面上获取 cron 作业的信息

> ID：15700347
> 
> 赞同：8
> 
> 时间：2013-03-29T09:10:23.143
> 
> 标签：c#, facebook, facebook-graph-api, facebook-access-token

我有一个应用程序会在某个时间刷新 Facebook 应用程序信息，假设每天一次并将它们写入数据库。应用程序试图从中获取信息的一些页面是年龄限制的，情况变得复杂。

到目前为止，我发现一种方法是使用用户 access_token 获取页面信息。

例如：[https](https://graph.facebook.com/BrandCigarettes?access_token=) ://graph.facebook.com/BrandCigarettes?access_token= {user_access_token}

但这是不可能的，因为应用程序应该每天运行一次，并且令牌有时间限制（默认为两小时），并且离线访问令牌不再可用。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:07:26.660

普通令牌通常在两小时后过期，但使用该短期令牌，您可以请求一个新的长期令牌，该令牌的有效期为 60 天。

得到之后，您只需要在数据库中保存 user_id 和相应的扩展令牌，因此，如果您只想获取某些页面的一些信息，您不需要为应用程序的每个用户都这样做，您只需要为自己做，你可以在你的应用程序上创建一个私人区域，你每 59 天去一次，只是为了更新令牌。

要将短期访问令牌换成长期访问令牌，只需向图形 API 发出请求

```
https://graph.facebook.com/oauth/access_token?             
    client_id=APP_ID&
    client_secret=APP_SECRET&
    grant_type=fb_exchange_token&
    fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

在这个问题上，接受的答案解释了如何在不使用 C# facebook sdk 的情况下做到这一点

[饲料离线访问](https://stackoverflow.com/questions/15682974/feed-offline-access/15691858#15691858)

正如 CBroe 评论的那样，我还建议您阅读有关扩展令牌的 facebook 文档

[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

# python - 在 MySQL Workbench 脚本外壳中更改列标志

> ID：15700351
> 
> 赞同：0
> 
> 时间：2013-03-29T09:10:46.890
> 
> 标签：python, mysql-workbench

为了保证数据库的一致性，我想批量设置每个表的最后一列的类型为`TINYINT(1) UNSIGNED NOT NULL`.

我发现了如何遍历表并定位最后一列，更改其类型并设置`NOT NULL`标志，但我找不到如何设置`UNSIGNED`标志。

我都试过了：

```
column = grt.root.wb.doc.physicalModels[0].catalog.schemata[0].tables[1].columns[7]
column.flags = ['UNSIGNED']
column.simpleType.flags = ['UNSIGNED'] 
```

但我得到一个`TypeError: flag is read-only`. `UNSIGNED`我还尝试将列的 dataType 属性设置为对具有标志（通过 GUI 定义）的列的 dataType 属性的引用。

最后我尝试了：

```
column.setParseType('TINYINT(1) UNSIGNED') 
```

但它返回 0 并且不会改变任何东西（如果我删除它会返回 1，`UNSIGNED`所以我认为它不适用于标志）。

有没有办法在 MySQL Workbench 中使用 Python 脚本更改列标志（即： `UNSIGNED`、 ）？`ZEROFILL`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:51:01.953

你需要使用 `grt.root.wb.doc.physicalModels[0].catalog.schemata[0].tables[1].columns[7].flags.append('UNSIGNED')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-15T05:08:01.710

要添加的是白色 column.isNoNull=1

```
# -*- coding: utf-8 -*-
# MySQL Workbench Python script
# <description>
# Written in MySQL Workbench 6.3.4

import grt
#import mforms

# get a reference to the schema in the model. This will get the 1st schema in it.
schema = grt.root.wb.doc.physicalModels[0].catalog.schemata[0]
# iterate through all tables
for table in schema.tables:
    # create a new column object and set its name
    column = grt.classes.db_mysql_Column()
    column.name = "auditoria_fecha_creacion"
    # add it to the table
    table.addColumn(column)
    # set the datatype of the column
    column.setParseType("TIMESTAMP", None)
    column.defaultValue = "CURRENT_TIMESTAMP"
    column.isNotNull=1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-03T10:25:52.500

我知道这个问题被问到已经 2 年了

```
import grt
#import mforms

# tables you want to skip
skip_tables = ["main_defs","some_other_table"]

def addColumn(table,name,datatype,defaultvalue):
    # skip this column_name if there is already a column with this name
    column_names = [x.name for x in table.columns]
    if name in column_names:
        return
    column = grt.classes.db_mysql_Column()
    column.name = name
    table.addColumn(column)
    column.setParseType(datatype, datatypes)
    column.defaultValue = defaultvalue
    column.isNotNull=1

# get a reference to the schema in the model. This will get the 1st schema in it.
schema = grt.root.wb.doc.physicalModels[0].catalog.schemata[0]
datatypes = grt.root.wb.rdbmsMgmt.rdbms[0].simpleDatatypes
# iterate through all tables
for table in schema.tables:

    # skip the current table if it is in skip_tables
    if table.name in skip_tables:
        continue
    addColumn(table,"created_at","varchar(45)","")
    addColumn(table,"updated_at","varchar(45)","") 
```

这提供了有关如何执行此操作的基本理解

# java - 使用泛型的子类型覆盖继承接口中的方法

> ID：15700354
> 
> 赞同：5
> 
> 时间：2013-03-29T09:10:54.597
> 
> 标签：java, generics, inheritance, overriding

我在java中有以下层次结构：

```
interface ObserverA {}

interface A {
  void method1();
  addObserver(Observer o);
} 
```

我想像这样扩展它：

```
interface ObserverB extends ObserverA{}

interface B extends A {
   void method2();
   addObserver(ObserverB  o);
} 
```

这样， 的`addObserver()`方法`B`将覆盖 . 中的相同方法`A`。因为它不起作用，所以`B`需要实现 的两个版本`addObserver()`，我不想只有一个。

这可以以一种不需要参数化的巧妙方式完成，`A`例如：

```
interface A<O extends Observer> { 
    addObserver(O o);
} 
```

最欢迎黑客解决方案！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:54:33.070

您不能缩小子接口或子类中的方法参数类型。您只能扩展它们，因为子类型的实现必须能够履行超类型的合同。

同样，出于同样的原因，您可以缩小返回类型和异常，但不能扩大它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T09:39:38.927

尽管您的示例显示了不同的内容，但我想您希望获得由不同类实现的通用接口。看看这个：

```
public interface Observer<T> {
    void addObserver(T t);
}

public class First implements Observer<First> {
    @Override
    public void addObserver(First t) {
    }
}

public class Second implements Observer<Second> {
    @Override
    public void addObserver(Second t) {
    }
} 
```

如您所见，First 和 Second 类都实现了相同的接口，但具有不同类型的参数。他们用自己对实现的接口进行参数化，但不是写`Observer<Frist>`你可以写`Observer<Integer>`或任何你想要的。

**编辑**

考虑到您的说明，这将是您提供的接口层次结构中代码的通用实现。

```
interface ObserverA {}

interface A<T> {
    void method1();
    void addObserver(T o);
}

interface ObserverB extends ObserverA {}

interface B extends A<ObserverB> {
    void method2();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T09:15:05.847

怎么样 -

```
interface ObserverA {}

interface A {

    <T extends ObserverA> void addObserver(T o);
} 
```

和 -

```
interface ObserverB extends ObserverA{}

interface B extends A{

    // do nothing, or omit this interface entirely.

} 
```

这样您就可以将继承的任何类型`ObserverA`作为参数传递给该`addObserver`方法。

如果您正在寻找一些解释，请继续阅读。

我已将第一个界面中的方法更改为使用[Bounded Type Parameter](http://docs.oracle.com/javase/tutorial/java/generics/bounded.html)。它的声明方式允许任何对象作为参数传递给`addObserver`方法，只要它的类型是`ObserverA`，或者它继承自`ObserverA`. 由于您`ObserverB`继承自`ObserverA`，因此您可以安全地将两者`ObserverA`和`ObserverB`类型的对象作为参数传递给此方法。

**编辑**

根据您的说明，您似乎应该创建两个不同的接口，它们之间没有任何层次关系。它们似乎不相关，因为您只想为第二种方法提供实现，同时避免第一种方法。因此，与其强迫自己从第一个接口中提供方法的实现，不如将它们分开。这个还有一个面向对象的原则——[接口隔离原则](http://en.wikipedia.org/wiki/Interface_segregation_principle)。

# sql - 仅从 sql 中的 Datetime 字段更新时间

> ID：15700355
> 
> 赞同：33
> 
> 时间：2013-03-29T09:11:08.843
> 
> 标签：sql, sql-server-2008

我的表中有一个日期 2013-12-14 05:00:00.000。

现在我只想更新那个日期的时间。EG 至 2013-12-14 04:00:00.000

是否有任何查询仅从日期时间字段更新时间？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-29T09:26:48.403

```
UPDATE MyTable 
SET MyDate = DATEADD(HOUR, 4, CAST(CAST(MyDate AS DATE) AS DATETIME)) 
```

或这个

```
UPDATE MyTable 
SET MyDate = DATEADD(HOUR, 4, CAST(FLOOR(CAST(MyDate AS FLOAT)) AS DATETIME)) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-05-24T04:49:52.063

使用以下内容仅更新`datetime`列的时间 -

```
select  CONVERT(varchar(10),datecolumn, 120) + ' 12:34:56', 
        CONVERT(varchar(10),datecolumn, 120) + ' 00:00:00', 
        RSLV_LTR_INITIAL_DUE_DT, *
from twhere able1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-29T09:28:34.413

```
UPDATE TABLE_NAME SET DATETIME_FIELD = CAST(CAST(CONVERT(DATE, DATETIME_FIELD,101) AS VARCHAR) + ' 2' + ':' +  '22' AS DATETIME) WHERE (OUR_CONDTTION) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-10T11:08:25.230

```
DECLARE @Time as TIME;
DECLARE @Date as DATETIME;

SELECT @Time = CONVERT(TIME, '2016-01-01 09:30:00.000');
SELECT @Date = CONVERT(date, GETDATE()); --2017-03-10 16:37:34.403

SELECT DATEADD(MINUTE, DATEPART(MINUTE, @Time), DATEADD(HH, DATEPART(HOUR, @Time), @Date)) 
```

**输出：** 2017-03-10 09:30:00.000

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-02-13T08:18:27.603

如果只是更新日期时间的特定部分，您可以使用`SMALLDATETIMEFROMPARTS`如下：

```
UPDATE MyTable 
SET MyDate = SMALLDATETIMEFROMPARTS(YEAR(MyDate), MONTH(MyDate), DAY(MyDate), <HoursValue>, <MinutesValue>) 
```

在其他情况下，可能需要将部分日期时间复制到其他或仅更新日期时间的某些部分：

```
UPDATE MyTable 
SET MyDate = SMALLDATETIMEFROMPARTS(YEAR(MyDate), MONTH(MyDate), DAY(MyDate), DATEPART(hour, MyDate), DATEPART(minute, MyDate)) 
```

有关更多此类功能，请参阅[SQL Server 日期/时间相关 API 参考](https://docs.microsoft.com/en-us/sql/t-sql/functions/date-and-time-data-types-and-functions-transact-sql?view=sql-server-2017)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-09-01T13:03:22.277

使用它来更改字符串的整个时间部分：

```
UPDATE MyTable SET MyColumn = DATEADD(DAY, DATEDIFF(DAY, 0, MyColumn), '04:00:00') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-10T16:04:01.763

```
DECLARE @d datetime;
SELECT @d = DATEADD(dd, DATEDIFF(dd, 0, GETDATE()), 0);

DECLARE @t time(7);
SET @t = CAST('10:10:10' AS time);

SELECT CONVERT(datetime, CONVERT(varchar(10), CONVERT(date, @d, 101)) + ' ' + CONVERT(varchar(8), @t)); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-06T05:26:30.347

使用这个脚本：

```
declare @curDate datetime=getdate() --or any other datetime 
declare @time time='22:31'
declare @hour int ,@min int
set @hour=datepart(hh,@time)
set @min=datepart(mm,@time)
select @curDate=Dateadd(HOUR,@hour,convert(datetime,convert(Date,@curDate)))
select @curDate=Dateadd(MINUTE,@min,@curDate)
Select @curDate 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2018-08-30T07:00:39.450

上一个查询仅更新小时部分，但此查询将更新时间的所有部分，即小时、分钟、秒：

```
UPDATE TABLE_NAME
SET DATETIME_FIELD = CONCAT(CAST(DATETIME_FIELD AS Date), ' ', CAST('2016-02-01 09:20:00.0000000' AS TIME)) 
```

# iphone - 如何将 iCloud 中的 sqlite 数据库同步为 zip 并从 iCloud 访问该 zip

> ID：15700357
> 
> 赞同：1
> 
> 时间：2013-03-29T09:11:22.377
> 
> 标签：iphone, ipad

```
#import <UIKit/UIKit.h>

@interface MyDocument : UIDocument

@property (strong) NSData *zipDataContent;
@property (nonatomic, assign) id delegate;
@end

#import "MyDocument.h"

@implementation MyDocument
@synthesize zipDataContent;
@synthesize delegate = _delegate;

- (BOOL)loadFromContents:(id)contents ofType:(NSString *)typeName
                   error:(NSError **)outError
{
    if ([contents length] > 0)
    {
        self.zipDataContent = [[NSData alloc] initWithBytes:[contents bytes] length:[contents length]];
        [[NSNotificationCenter defaultCenter] postNotificationName:@"noteModified" object:self];
        return YES;
    }
    else
    {
    }
    return YES;
}
- (id)contentsForType:(NSString *)typeName error:(NSError **)outError
{
    return self.zipDataContent;
}
@end
#import <UIKit/UIKit.h>
#import "MyDocument.h"
#import "ZipArchive.h"

@interface ViewController : UIViewController<UITextViewDelegate>
{
    NSMetadataQuery *_query;
}
@property (nonatomic,retain) IBOutlet UIButton * btnLoadDatabase;
@property (strong) NSMetadataQuery *_query;

-(IBAction) iCloudSyncing:(id)sender;
- (void)loadDocument ;
@end
#import "ViewController.h"
#define kFILENAME @"DiaryDB"

@interface ViewController ()

@end

@implementation ViewController
@synthesize btnLoadDatabase;
@synthesize _query;

-(void)dealloc
{
    [btnLoadDatabase release];
    [super dealloc];
}
- (void)viewDidLoad
{
    self.view.backgroundColor=[UIColor whiteColor];
    [super viewDidLoad];

}

-(BOOL)zipFolder:(NSString *)toCompress zipFilePath:(NSString *)zipFilePath
{
    BOOL isDir=NO;
       NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
/    NSString *pathToCompress = [[NSBundle mainBundle] pathForResource:@"DiaryDB" ofType:@".sqlite"];

    NSArray *subpaths;
    NSFileManager *fileManager = [NSFileManager defaultManager];
    if ([fileManager fileExistsAtPath:pathToCompress isDirectory:&isDir] && isDir){
        subpaths = [fileManager subpathsAtPath:pathToCompress];
    } else if ([fileManager fileExistsAtPath:pathToCompress]) {
        subpaths = [NSArray arrayWithObject:pathToCompress];
    }

    zipFilePath = [documentsDirectory stringByAppendingPathComponent:zipFilePath];
        ZipArchive *za = [[ZipArchive alloc] init];
    [za CreateZipFile2:zipFilePath];
    if (isDir) {
        for(NSString *path in subpaths){
            NSString *fullPath = [pathToCompress stringByAppendingPathComponent:path];
            if([fileManager fileExistsAtPath:fullPath isDirectory:&isDir] && !isDir){
                [za addFileToZip:fullPath newname:path];
            }
        }
    } else {
        [za addFileToZip:pathToCompress newname:toCompress];
    }

    BOOL successCompressing = [za CloseZipFile2];
    if(successCompressing)
        return YES;
    else
        return NO;
}
-(IBAction) iCloudSyncing:(id)sender
{
    NSURL *ubiq = [[NSFileManager defaultManager]
                   URLForUbiquityContainerIdentifier:nil];
    if (ubiq)
    {
        NSLog(@"iCloud access at %@", ubiq);
               NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

        if([self zipFolder:@"DiaryDB" zipFilePath:@"iCloudPictures"])
            NSLog(@"DiaryDB Folder is zipped");

        NSURL *ubiq = [[NSFileManager defaultManager]URLForUbiquityContainerIdentifier:nil];
        NSURL *ubiquitousPackage = [[ubiq URLByAppendingPathComponent:@"Documents"]  URLByAppendingPathComponent:@"DiaryDB"];

        MyDocument *mydoc = [[MyDocument alloc] initWithFileURL:ubiquitousPackage];
        NSString *zipFilePath = [documentsDirectory stringByAppendingPathComponent:@"DiaryDB"];
        NSURL *u = [[NSURL alloc] initFileURLWithPath:zipFilePath];
        NSData *data = [[NSData alloc] initWithContentsOfURL:u];
        // NSLog(@"%@ %@",zipFilePath,data);
        mydoc.zipDataContent = data;

        [mydoc saveToURL:[mydoc fileURL] forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success)
         {
             if (success)
             {
                 NSLog(@"PictureZip: Synced with icloud");
                 [self loadDocument];
             }
             else
                 NSLog(@"PictureZip: Syncing FAILED with icloud");

         }];
    }
    else
    {
        NSLog(@"No iCloud access");
    }

}
- (void)loadDocument {

    NSMetadataQuery *query = [[NSMetadataQuery alloc] init];
    _query = query;

    [query setSearchScopes:[NSArray arrayWithObject:NSMetadataQueryUbiquitousDocumentsScope]];

    NSPredicate *pred = [NSPredicate predicateWithFormat: @"%K == %@", NSMetadataItemFSNameKey, kFILENAME];
    [query setPredicate:pred];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(queryDidFinishGathering:) name:NSMetadataQueryDidFinishGatheringNotification object:query];
    [query startQuery];

}
- (void)queryDidFinishGathering:(NSNotification *)notification {

    NSMetadataQuery *query2 = [notification object];
    [query2 disableUpdates];
    [query2 stopQuery];

    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:NSMetadataQueryDidFinishGatheringNotification
                                                  object:query2];
    [self loadData:query2];

}
- (void)loadData:(NSMetadataQuery *)queryData {
    for (NSMetadataItem *item in [queryData results])
    {
        NSString *filename = [item valueForAttribute:NSMetadataItemDisplayNameKey];   
        NSURL *url = [item valueForAttribute:NSMetadataItemURLKey];
        MyDocument *doc = [[MyDocument alloc] initWithFileURL:url];

        if([filename isEqualToString:@"DiaryDB"])
        {
            [doc openWithCompletionHandler:^(BOOL success) 
             {
                if (success) 
                   {
                    NSLog(@"Pictures : Success to open from iCloud");
                    NSData *file = [NSData dataWithContentsOfURL:url];

                    NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
                    NSString *zipFolder = [documentsDirectory stringByAppendingPathComponent:@"DiaryDB.zip"];
                    [[NSFileManager defaultManager] createFileAtPath:zipFolder contents:file attributes:nil];
                    NSString *outputFolder = [documentsDirectory stringByAppendingPathComponent:@"DiaryDB"];//iCloudPics
                    ZipArchive* za = [[ZipArchive alloc] init];
                    if( [za UnzipOpenFile: zipFolder] ) 
                      {
                        if( [za UnzipFileTo:outputFolder overWrite:YES] != NO ) 
                        {
                            NSLog(@"Pics : unzip successfully");
                        }
                        [za UnzipCloseFile];
                    }
                    [za release];
                     NSError *err;
                    NSArray *files = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:outputFolder error:&err];
                    if (files == nil) 
                    {
                        NSLog(@"EMPTY Folder: %@",outputFolder);
                    }
                    for (NSString *file in files)
                    {
                        NSLog(@" Pictures %@",file);
                    }

                }
                else
                {
                    NSLog(@"Pictures : failed to open from iCloud");
                                   }
            }]; 
        }
    }
}
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

@end 
```

**这是我用来制作 zip 到 sqlite 数据库并将 zip 同步到 iCloud 以及从 iCloud 中检索数据库的 zip 的代码，它无法通过此代码正常工作我无法从数据库访问 zip 文件，我还想在 mainbundell 上保存 zip 文件 **

# python - PIL IOError：使用 ZLIB 支持构建后，解码器 zip 不可用

> ID：15700359
> 
> 赞同：1
> 
> 时间：2013-03-29T09:11:37.943
> 
> 标签：python, python-imaging-library, zlib

我已将 setup.py 指向 /lib 我的 libz.so 所在的位置。然后，当我运行时`setup.py install`，我确认了 ZLIB 支持：

```
--------------------------------------------------------------------
PIL 1.1.7 SETUP SUMMARY
--------------------------------------------------------------------
version       1.1.7
platform      linux2 2.7.2 (default, Feb  8 2013, 11:05:21)
              [GCC 4.1.2 20061115 (prerelease) (Debian 4.1.1-21)]
--------------------------------------------------------------------
*** TKINTER support not available
*** JPEG support not available
--- ZLIB (PNG/ZIP) support available
*** FREETYPE2 support not available
*** LITTLECMS support not available
-------------------------------------------------------------------- 
```

但是，安装后，我仍然收到错误：

```
IOError: decoder zip not available 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:31:18.590

我已经通过下载 zlib 源、构建它并将 Image 构建指向它来解决这个问题。

# google-bigquery - 尽管 SocketTimeoutException，BQ 导入成功？

> ID：15700364
> 
> 赞同：1
> 
> 时间：2013-03-29T09:11:56.413
> 
> 标签：google-bigquery

在某些（罕见）情况下，BQ 导入 API 调用 (GAE java) 会引发 SocketTimeoutException。

```
java.net.SocketTimeoutException: Timeout while fetching URL: https://www.googleapis.com/bigquery/v2/projects/{projectId}/jobs 
```

尽管出现异常，但数据似乎已成功导入 BQ 表。问题是“导入”任务重新启动（由于异常）-> 导致重复。

亲切的问候，莎莎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:26:35.500

如果您担心重试由于网络错误而失败的导入，您可以将作业 ID 与加载作业一起传递，在这种情况下，您可以在重试之前查看作业的状态。

# c# - 如何使用 asp.net 在 twitter API 上获取用户信息

> ID：15700372
> 
> 赞同：4
> 
> 时间：2013-03-29T09:12:29.727
> 
> 标签：c#, asp.net, twitter

我目前正在使用 twitter API 开发一个项目。

我有这样的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using Newtonsoft.Json.Linq; // Added for JSON Library   ( Doc)
using System.Xml;
using oAuthExample;
public partial class twitterInfo : System.Web.UI.Page
{
    string url = "";
    string xml = "";
    public string name = "";
    public string username = "";
    public string profileImage = "";
    public string followersCount = "";
    public string noOfTweets = "";
    public string recentTweet = "";

    //Source    http://www.aspdotnet-suresh.com/2012/05/add-twitter-login-authentication-to.html

    protected void Page_Load(object sender, EventArgs e)
    {
        GetUserDetailsFromTwitter();
    }
    private void GetUserDetailsFromTwitter()
    {
        if (Request["oauth_token"] != null & Request["oauth_verifier"] != null)
        {
            imgTwitter.Visible = false;
            tbleTwitInfo.Visible = true;
            var oAuth = new oAuthTwitter();
            //Get the access token and secret.
            oAuth.AccessTokenGet(Request["oauth_token"], Request["oauth_verifier"]);
            if (oAuth.TokenSecret.Length > 0)
            {
               url = "https://api.twitter.com/1.1/account/verify_credentials.json";
               xml = oAuth.oAuthWebRequest(oAuthTwitter.Method.GET, url, String.Empty);

             JObject o = JObject.Parse(xml);
             name = Convert.ToString(o["name"]);
             username = Convert.ToString(o["screen_name"]);
             profileImage = Convert.ToString(o["profile_image_url"]);
             followersCount = Convert.ToString(o["followers_count"]);
             noOfTweets = Convert.ToString(o["statuses_count"]);
             noOfTweets = Convert.ToString(o["birthday"]);

            }
        }
    }
    protected void imgTwitter_Click(object sender, ImageClickEventArgs e)
    {
        var oAuth = new oAuthTwitter();
        if (Request["oauth_token"] == null)
        {
            //Redirect the user to Twitter for authorization.
            //Using oauth_callback for local testing.

                        // R_ use the dynamic url director
            // Call back URL to direct the user to the page
            oAuth.CallBackUrl = "http://localhost:518/Account/TwitterInfo.aspx";

            Response.Redirect(oAuth.AuthorizationLinkGet());
        }
        else
        {
            GetUserDetailsFromTwitter();
        }
    }
} 
```

此代码是要返回的 Twitter API 项目的一部分（名称、twitter 用户名、个人资料图像、关注者和推文数量）。我知道 Twitter API 不会检索用户的电子邮件地址。但我想检索用户的个人资料 ID 和用户的个人资料链接......谁能告诉我我应该从上面的代码中更改什么来检索这两个数据？

这是完整源代码[的链接](http://www.aspdotnet-suresh.com/2012/05/add-twitter-login-authentication-to.html) 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T19:13:09.517

您用于 account/verify_credentials 的代码看起来没问题，如果可行，您可以使用相同的代码，但更改 URL。account/verify_credentials 将适用于经过身份验证的用户，但您必须使用[users/show](https://dev.twitter.com/docs/api/1.1/get/users/show)来指定任何用户。有一个[帐户/设置](https://dev.twitter.com/docs/api/1.1/get/account/settings)端点，但同样仅适用于经过身份验证的用户。

只有个人用户可以看到他们自己的设置页面。您可以将用户发送到[https://twitter.com/settings/account](https://twitter.com/settings/account)，这是他们自己的个人资料页面，但他们需要登录才能查看。我不知道这是否能满足您的要求，但您可以做的其中一件事是识别个人的公共 Twitter 页面，如下所示：

```
string publicTwitterPage = "https://twitter.com/" + username; 
```

# php - WP_Query，其中包括帖子的自定义元字段

> ID：15700373
> 
> 赞同：0
> 
> 时间：2013-03-29T09:12:29.790
> 
> 标签：php, wordpress, wordpress-theming

下面是我写给 WP_Query 一堆过滤器的代码，这些过滤器涉及帖子的自定义元字段，

```
 <?php
            global $post;
            $month=date("m", time());    //current month
            $month=intval($month);       //converting '03' to int 3
            $args = array( 'meta_key'=>"city", 'meta_value'=>'NY',   'numberposts' => 100, 
'cat'=>"read", "monthnum" => $month, 'post_status' =>  "publish", 
'order'=>"ASC", "orderby" => "meta_value_num", "meta_key" => "article_order");      
            $posts = WP_Query( $args );
        ?> 
```

我想从上面的查询中实现的是，“从 'read' 类别中选择本月发布的帖子，元键 'city' 的值为 'NY' 并按 meta_key 'article_order' 的 'meta_value_num' 排序”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:23:57.440

可能会尝试一些事情，比如

```
<?php
            global $post;
            $month=date("m", time());    //current month
            $month=intval($month);       //converting '03' to int 3
            $args = array( 'meta_query' => array(
        array(
            'key' => 'city',
            'compare' => '==',
            'value' => 'NY',
        )
    ), 'numberposts' => 100, 
'cat'=>"read", "monthnum" => $month, 'post_status' =>  "publish", 
'order'=>"ASC", "orderby" => "meta_value_num", "meta_key" => "article_order");      
            $posts = WP_Query( $args );
        ?> 
```

希望这项工作以及在您的代码中您缺少 '' 在您的`'meta_key'=>city`as`'meta_key'=>'city'`

希望这对你有用

# google-app-engine - 谷歌应用引擎：在特定键值之后从数据存储中检索值？

> ID：15700375
> 
> 赞同：1
> 
> 时间：2013-03-29T09:12:56.860
> 
> 标签：google-app-engine, app-engine-ndb

我是 GAP（Python）的新手。我正在使用 NDB 从数据存储中检索特定键值之后的所有值。

如果有人可以帮助我解决这个问题，请提前致谢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:23:50.420

我假设您正在设置密钥或正在使用分配 ID，否则这样的要求将没有多大意义。

您可以将键用作 order 参数。

例如我有一个产品模型

```
x = models.Product.query().order(models.Product.key) 
```

鉴于此，我可以得到所有大于特定键的键

```
x = models.Product.query(models.Product.key > ndb.Key('Product','001132')).order(models.Product.key) 
```

顺序有点无关紧要，但是嘿;-)

# javascript - jquery 和 ajax 请求

> ID：15700378
> 
> 赞同：1
> 
> 时间：2013-03-29T09:13:02.320
> 
> 标签：javascript, jquery, asp.net-mvc

我有js函数将ajax请求发送到控制器并成功。返回结果并将该结果附加到部分页面内的所需 div 中。现在我想实现分页，`$("#dataList").on("click", ".pagedList a".getPage);`当用户点击分页链接以确定点击了哪个页码时，我正在使用它来监听

```
var getPage = function () {
    var $a = $(this);
    GetTabData(a);
    return false;
} 
```

最后我将 pagenumber 发送到下一个函数，该函数将 pagenumber 和 activeTab 变量一起发送到控制器

```
function GetTabData(xdata, pageNumber) {
    $.ajax({                    
        url: ('/Home/GetTabData'),
        type: 'POST',
        contentType: 'application/json',
        dataType: 'html',
        data: JSON.stringify({ activeTab: xdata, page: pageNumber }),
        success: function (result) {
            $("[id^='tab-'] div").remove();
            var currentTab = $("#tab-" + xdata).html(result);
        },
        error: function () { alert("error"); }
    });
} 
```

有些东西是确定的。这里错误，因为我正在使用控制器端

```
Request.IsAjaxRequest() 
```

只允许 ajax 请求对数据进行分页，我得到`Not ajax request`. 再一次，如果我完全删除分页选项并只发送 activeTab 一切正常。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:21:46.870

您的`GetTabData`函数需要 2 个参数：`xdata`但是`pageNumber`在调用它时您只传递了一个：

```
var $a = $(this);
GetTabData(a); 
```

因此，您可能会收到一个 javascript 错误，并且`return false`永远不会到达该语句。

# c# - 正则表达式匹配文字逗号文字逗号文字..模式

> ID：15700387
> 
> 赞同：0
> 
> 时间：2013-03-29T09:13:49.453
> 
> 标签：c#, regex

我想强制用户在与精确模式匹配的文本框中写入数据。数据用于可能为空的数据库列，所以我需要的是：

```
A,B,C,D,Z,E...Y 
```

必须记住的是 - 归档是可以为空的，所以第一个字符可以是文字或什么都没有。在第一个字符之后，我可能有也可能没有逗号（取决于后面是否有更多文字），但如果有的话，必须只有一个。之后我可以接受多次`Literal comma`插入，但文本必须以文字再次完成。我想这一切都可以从上面的示例模式中看到，但只是想弄清楚。

这是我的尝试：

```
string RegExPattern = @"^[A-Z]?,?[A-Z],*[A-Z]" 
```

遗憾的是，这不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T09:17:16.387

在第一个参数之后，将逗号和参数放在一起，并对它们应用中继器。不要忘记`$`匹配字符串的结尾。

```
string RegExPattern = @"^[A-Z]?(,[A-Z])*$" 
```

# ios - UITextView 链接是可点击的，但是当我点击它时，Safari 没有打开

> ID：15700388
> 
> 赞同：1
> 
> 时间：2013-03-29T09:13:49.940
> 
> 标签：ios, objective-c, uitextview

我已经为可点击链接设置了这两个重要的变量，但是当我点击 中的内容链接时`UITextView`，Safari 没有打开。

有人知道问题是什么吗？

```
@property (strong, nonatomic) UITextView *attachmentDescription;

{
    self.attachmentDescription.editable = NO;
    self.attachmentDescription.dataDetectorTypes =UIDataDetectorTypeLink;
} 
```

# erlang - Yaws websocket 向所有连接的用户发送消息

> ID：15700389
> 
> 赞同：3
> 
> 时间：2013-03-29T09:13:53.263
> 
> 标签：erlang, websocket, yaws

我正在使用 yaws（Erlang 框架）进行套接字通信。**我可以使用websocket_send**从服务器将消息发送回用户，但是我需要指定用户的 PID，这意味着我可以将消息发送回该用户。但是，我想向所有连接的用户发送消息。有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:31:48.587

每次建立 websocket 连接时，都会为该连接创建一个新的 gen_server 进程。因此，这些服务器中的每一个都对应一个 websocket 连接。因此 websocket_send 需要 gen_server 的 PID。

为了向所有连接的客户端发送消息，您需要维护所有 gen_servers 的 PID。这可以通过拥有自己的 gen_server 或使用 ets 来完成。

与[将 Pid 发送到 gen_server](https://stackoverflow.com/questions/12038546/using-yaws-and-websockets-to-subscribe-to-data)类似， 您可以在 websocket 回调初始化函数中发送 Pid

```
init(Args) ->
  gen_server:cast(?YOURSERVER,{connection_open, self()}),
  {ok, []}. 
```

终止期间

```
terminate(Reason, State) ->
  gen_server:cast(?YOURSERVER,{connection_close, self()}). 
```

您的 gen_server handle_cast 可能看起来像这样

```
handle_cast({connection_open, Pid}, Pids) ->
      {noreply, [Pid | Pids]};
handle_cast({connection_close, Pid}, Pids) ->
      {noreply, lists:delete(Pid, Pids)};
handle_cast({send_to_all, Msg}, Pids) ->
      [yaws_api:websocket_send(Pid, Msg) || Pid <- Pids, is_process_alive(Pid)],
      {noreply, Pids}. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T01:57:02.060

搞定了！！！使用 GProc :)

Gproc 是 Erlang 的进程字典，它提供了许多超出内置字典所具有的有用功能：

```
Use any term as a process alias

Register a process under several aliases

Non-unique properties can be registered simultaneously by many processes

QLC and match specification interface for efficient queries on the dictionary

Await registration, let's you wait until a process registers itself

Atomically give away registered names and properties to another process

Counters, and aggregated counters, which automatically maintain the total of all counters with a given name

Global registry, with all the above functions applied to a network of nodes 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:32:13.990

这将需要一种涉及内存存储的综合方法。例如，每个用户可能有一个进程持有套接字连接，因此，您可以在 中保存`mnesia`一条`ets table`记录，例如：`#connected_user{pid = Pid,username = Username,other_params = []}`。

稍后在加深对这个问题的认识之后，您将转向会话管理、如何处理离线消息，以及最重要的`presence`. 无论如何，当一条消息进入时，具有目标用户名，然后您将从我们的表中查找并获取相应的`Pid`，然后将这条消息发送给它，然后它会通过它的实时 Web Socket 发送它。

# hippocms - 通过（正则表达式）模式限制文件夹名称

> ID：15700391
> 
> 赞同：0
> 
> 时间：2013-03-29T09:14:14.953
> 
> 标签：hippocms

我想根据模式限制我的文件夹名称。例如，我希望文件夹名称为年份。目前这在河马 7.8.x 中是可能的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:00:38.410

这应该可以使用folderWorkFlowplugin，不幸的是没有（很好）记录，但你可以看看[https://issues.onehippo.com/browse/CMS7-6652](https://issues.onehippo.com/browse/CMS7-6652)

# git - 如何配置远程存储库以接受本地创建的分支？

> ID：15700399
> 
> 赞同：0
> 
> 时间：2013-03-29T09:14:34.047
> 
> 标签：git

这个问题：

[如何推送本地创建的分支](https://stackoverflow.com/questions/15692239/git-how-to-push-a-locally-create-branch)

收到 +1 评论：

> 看起来远程存储库已配置为不允许您推送新分支。

现在，我使用这个 ASP.NET 项目创建了远程存储库：

[http://www.jeremyskinner.co.uk/2010/06/25/hosting-a-git-server-under-iis7-on-windows/](http://www.jeremyskinner.co.uk/2010/06/25/hosting-a-git-server-under-iis7-on-windows/)

那么，如何配置远程仓库来接受新的分支呢？作为记录，我无法想象 Jeremy 的代码会做任何事情来禁用推送分支。

在我尝试推送本地创建的分支之前，远程仓库一直运行良好。

**更新 1**

*   远程仓库在配置文件中有 bare = true 。
*   在服务器 refs\heads 文件夹中还有一个包含我的分支名称的文件夹，所以它一定是推送了一些东西。

卢克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:17:47.870

似乎远程仓库已损坏。那是一个词。在服务器上，在 refs/heads/ 中是分支的一个文件夹，这使得它看起来已经到了推送和死亡的地步。

所以我重命名它并再次推送，它很好。

**更新**

实际上，问题似乎再次出现。就像我只能推送一次分支一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T02:38:27.727

另一个原因（仅供参考，不是答案！）是远程存储库由例如[gitolite](https://github.com/sitaramc/gitolite)处理，它确实允许对允许远程用户执行的操作进行细粒度控制。无法将普通 git 存储库配置为禁止访问 AFAIK。您要么拥有完全的读/写权限，要么没有。限制写入的唯一方法是使用文件/目录权限。

# jquery - 如何读取和更新 ajax 页面中的 url 哈希更改，使用 jquery 跟踪 url 中的 ajax 查询

> ID：15700402
> 
> 赞同：0
> 
> 时间：2013-03-29T09:14:41.270
> 
> 标签：jquery, ajax

每当我在不重新加载页面的情况下进行 ajax 查询时，我都希望更新浏览器 url，这样人们就可以轻松地转到 url 并通过 url 查询查看生成的页面。使用jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:42:32.273

```
if (typeof (window.history.pushState) == 'function') {
   window.history.pushState({ "html": response.html, "pageTitle": response.pageTitle }, "", urlPath);
   } else {
      window.location.hash = '#!' + urlPath;
   } 
```

但是 IE 不支持 Url PushState 所以你可以使用 '#' 后跟你的 Url

# iphone - iOS - 显示电池状态的问题

> ID：15700403
> 
> 赞同：1
> 
> 时间：2013-03-29T09:14:57.020
> 
> 标签：iphone, ios, objective-c, ipad

我试图用 UILabel 显示电池百分比，但结果是胡说八道！这是我的代码：

```
UIDevice *myDevice = [UIDevice currentDevice];
    [myDevice setBatteryMonitoringEnabled:YES];
    int i=[myDevice batteryState];
    _battery.text = [NSString stringWithFormat:@"%i",i]; 
```

标签显示数字 2 !!!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:26:48.237

使用以下代码获取电池电量

```
UIDevice *myDevice = [UIDevice currentDevice];
[myDevice setBatteryMonitoringEnabled:YES];
float batteryLevel = [myDevice batteryLevel];
_battery.text = [NSString stringWithFormat:@"%f",batteryLevel*100]; 
```

`[myDevice batteryLevel];`将为您提供 0.0（空）和 1.0（100% 充电）之间的电池

希望能帮助到你..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:16:20.260

`iPhone OS`提供两种类型的电池监控事件，一种用于状态变化时（*例如，充电、拔掉、充满电*），另一种用于在电池电量变化时更新。与接近监控的情况一样，您注册回调以接收通知：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(batteryChanged:) name:@"UIDeviceBatteryLevelDidChangeNotification" object:device];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(batteryChanged:) name:@"UIDeviceBatteryStateDidChangeNotification" object:device]; 
```

另请参阅此[链接。](http://iosdevelopertips.com/device/display-battery-state-and-level-of-charge.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:34:08.193

```
[myDevice batteryState];//return is a variable of UIDeviceBatteryState 
```

the labels shows number 2 means"UIDeviceBatteryStateCharging, // plugged in, less than 100%",if you want to display battery percentage. The code in the first answer will help you.

# nhibernate - 从 NHibernate 3.2 获取/构建 SQL（带参数）

> ID：15700406
> 
> 赞同：1
> 
> 时间：2013-03-29T09:15:04.037
> 
> 标签：nhibernate

我正在做一个需要以下内容的项目：

*   从特定的 NHibernate 3.2 会话中提取完整的 SQL 查询。
*   对查询执行特定操作（即不必记录它）
*   不影响整个系统的NHibernate，避免引入性能问题

我检查了几种方法，其中许多已经出现在 StackOverflow 上。这是我现在看到的选项：

**手动的**

在最幼稚和最烦人的解决方案中，我可以只遵循业务逻辑并自己构建查询 - 例如，如果 BL 构建了一个对 ID=5 进行限制的条件，我将使用`SELECT ... WHERE ID = 5`. 由于我们有一个相当复杂的 BL，我真的很想避免这种情况。

**NHibernate 拦截**

最初，使用`OnPrepareStatement`似乎是最好的选择。但是，我很快[发现](https://stackoverflow.com/questions/6048835/intercept-sql-statements-containing-parameter-values-generated-by-nhibernate)查询的参数没有被记录，这使得它变得毫无用处。

**内省 NHibernarnate 的 ICriteria**

当使用 NHibernate 执行查询时，我们使用包含限制、排序和聚合定义的 ICreteria 对象来执行此操作。[似乎我可以在此处](https://stackoverflow.com/questions/554481/how-to-get-sql-from-hibernate-criteria-api-not-for-logging)描述的 CriteriaWalker 时对其进行检查。但是，它似乎对复杂的查询感到困惑。此外，在某些情况下，我们使用 NHibernate 3 新的“QueryOver”语法，这个解决方案对我没有帮助。

**使用 ILoggerFactory**

从 NHibernate 3 开始，您可以编写自定义日志工厂（[示例](https://nh3sqllogger.codeplex.com/)）。这得到了完整的 SQL，但是，它也影响了整个 NHibernate 系统，[似乎不可能](https://stackoverflow.com/questions/15690154/nhibernate-using-logging-for-a-specific-isession-or-isessionfactory)有工厂来申请特定的 ISession，甚至是 ISessionFactory。

**自定义 NHibernate 驱动程序**

我考虑过编写代理 NHibernate 驱动程序并将其分配给特定的 SessionFactory（如此[处](https://stackoverflow.com/a/6122813/126574)所述）。但是，友好的评论警告说它在 Nhibernate 3.2 中的工作时间更长。

**使用动态代理**

[此代码](https://code.google.com/p/nhqueryviewer/)使用 Castle 的动态代理将自身注入到 ISession 中。我还没有尝试在我的服务器上运行它，但我对使用这种激烈的措施有点警惕。但是，如果没有其他方法可行，我想这是需要考虑的事情。

**建议？**

现在我有点坚持选择最好的方式，因为似乎没有什么在做它的工作，完全正确。如果还有其他建议，我很想听听。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:09:15.500

我将使用标准或自定义日志框架，并应用自定义过滤器从线程数据中检索标志（例如），以确定是否应记录会话。

这样，您根本不会弄乱 NH 内部，只要您不设置标志，就不会记录任何内容。

# android - 将图像放入 xhdpi 但看起来模糊

> ID：15700410
> 
> 赞同：0
> 
> 时间：2013-03-29T09:15:19.403
> 
> 标签：android, drawable, hdpi

我制作了矩形可绘制并放入 drawable-xhdpi 文件夹。但在我的设备中，它看起来很模糊。我的设备屏幕尺寸为 1280x720，密度为 344 dpi。我将该 xml 文件放在所有文件夹中，但看起来仍然模糊。请帮我。

```
<item>
    <shape android:shape="rectangle" >
        <solid android:color="#00000000" />

        <stroke
            android:width="0.5dip"
            android:color="#ADADAD" />
    </shape>
</item> 
```

这是我放在drawable-xhdpi文件夹中的drawable。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:33:19.603

您必须以`rectangleimage.xml`这种方式创建和使用。

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
   android:shape="rectangle">
 <corners
    android:bottomLeftRadius="15dp"
    android:bottomRightRadius="15dp"
    android:topLeftRadius="15dp"
    android:topRightRadius="15dp" />
  <solid android:color="@color/blue"/>

</shape> 
```

你必须把它`xml`放到**res/drawable**

如果您发现任何问题，请告诉我。

# c++ - C++ 标准化网络 TS1 和 Filesys TS

> ID：15700412
> 
> 赞同：6
> 
> 时间：2013-03-29T09:15:40.290
> 
> 标签：c++

我有一些关于标准化的问题，尤其是今年即将推出的 Net TS1 原型（请参阅[此处](http://isocpp.org/std/status)）。

*   具体什么时候来？
*   它是否支持**便携式**二进制序列化？
*   它可以序列化为`iostreams`喜欢的文件/std::cout 等吗？
*   除了邮件列表，还有其他地方可以找到当前状态吗？
*   GCC/Clang 什么时候实现？

关于文件系统（Filesys TS）：

*   本来这个月就可以做样机了，怎么找不到了？
*   和 boost::filesystem 一样吗？（所以它可以很容易地移植。）

我希望我没有问太多问题，我也希望有些可以回答！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T10:26:12.497

2007 年发布了基于 Boost.Asio的[最新完整网络库提案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2175.pdf)。当时，C++0x 仍计划在 2010 年之前的某个时间，并且还有 C++ 技术报告 2 的计划。这个想法是将网络库导入 TR2。

在 C++0x 上的工作显然吸引了所有人的注意力，因为在网络库发布之前，它并没有发生太多其他事情。2012 年，他们制作了一份[网络库状态报告](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3360.pdf)，并注意到在过去 5 年中，Boost.Asio 发生了很多变化。[成立了一个研究小组](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3374.htm)(SG4) 来研究网络图书馆。

现在 TR2 似乎并没有发生，它在 C++14 及更高版本中全速前进。据我所知，没有明确提及 SG4 的计划时间框架。然而，自从它成立以来，这些是来自邮件的最新文件：

*   [将 Asio 与 C++11](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3388.pdf) (N3388)一起使用
*   [Urdl：用于访问 Web 内容的简单库](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3477.pdf)(N3477)
*   [C++ Internet 协议类](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3477.pdf)(N3477)
*   [C++ 的 URI 库](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3507.html)(N3507)
*   [IP 地址设计约束](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3565.pdf)(N3565)
*   [三类 IP 地址建议](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3603.html)(N3603)
*   [网络字节顺序转换](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3620.pdf)(N3620)

因此，将这些与[完整的 TR2 提案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2175.pdf)结合起来，您就可以很好地了解当前的状态。

1.  具体什么时候来？

    似乎没有具体的时间框架。希望我们能在 C++14 之前的某个时候（甚至可能在 2013 年）看到技术规范，但这只是猜测。完成后就会完成。

2.  它是否支持可移植二进制序列化？

    我不这么认为。我在任何论文中都找不到任何关于序列化的内容。我认为这可能超出了网络库的范围。

3.  它可以序列化为 iostreams，如 files/std::cout 等吗？

    往上看。

4.  除了邮件列表，还有其他地方可以找到当前状态吗？

    现在不行。但是，他们已经逐渐将每个研究组的邮件列表公之于众，所以也许 SG4 很快就会公之于众。如果是这样，我们将更好地了解当前的进展。

5.  GCC/Clang 什么时候实现？

    还没有！

* * *

2013 年 1 月，[文件系统库提案的修订版 4 出现](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3505.html)在邮件列表中。同样，我没有看到明确的时间框架，但这个和网络图书馆是目前最受关注的两个图书馆研究小组。希望我们也能在今年某个时候或至少在 2014 年之前看到这方面的技术规范。

1.  本来这个月就可以做样机了，怎么找不到了？

    我还没有看到任何关于原型的东西，但我想有时事情会比计划的时间长一点。也许它还没有公开。[布里斯托尔会议](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3496.pdf)将于下个月举行，所有研究组的进展报告都已列入议程。我敢肯定，当它准备好时，我们会看到技术规范。

2.  和 boost::filesystem 一样吗？

    差不多！看看[最新版本](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3505.html)；它提到它在很大程度上基于[Boost Filesystem Library](http://www.boost.org/libs/filesystem)版本 3。有一小部分关于差异：

    > 在 Boost 库中，类路径中用于处理具有操作系统本机编码以外的编码的窄（即字符）字符串的工具取决于 codecvt 参数。在提案中，这些设施取决于语言环境参数，并添加了额外的 UTF-8 设施。文件系统研究组认为这种方法更加可靠和有用，特别是随着 UTF-8 的使用不断普及。
    > 
    > 否则，该提案与 Boost 库非常相似。事实上，大多数提议的措辞都是从与 Boost 库的参考文档相同的来源生成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T10:24:22.043

与所有正式的 ISO C++ 文档一样，技术规范在完成后就会出现。很难说它会支持什么。如果功能还没有准备好，它们可能会被删减，或者相反，发布可能会延迟以获得想要的功能。例如，C++98 被延迟了大约 2 年才合并到 STL。

FileSystem TS 确实是从 Boost FileSystem 派生的，所以很有可能有高度的共性。

# java - 如何在不刷新页面的情况下将当前页面的 url 发送到 servlet

> ID：15700418
> 
> 赞同：0
> 
> 时间：2013-03-29T09:16:05.037
> 
> 标签：java, javascript, ajax, jsp

我想在不刷新或重新加载页面的情况下将当前页面的 url 发送到 servlet。这是代码-

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Action Onclick </title>

    <!--        <script>
                $('#contactForm').submit(function () {
                    alert('sdafjb');
                    return false;
                });            
            </script>-->
</head>
<body>

    <form id="contactForm" >
        <fieldset>
            <label for="Name">Name</label>
            <input id="contactName" type="text" />
        </fieldset>

        <fieldset>
            <label for="Email">Email</label>
            <input id="contactEmail" type="text" />
        </fieldset>

        <fieldset class="noHeight">
            <textarea id="contactMessage" cols="20"></textarea>

            <a href="#" onclick="document.getElementById('contactForm').submit();"> submit </a>
        </fieldset>

    </form>        
    <small id="messageSent">Your message has been sent.</small>

</body> 
```

我的 servlet 的名称是 scriptservlet。请帮我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:21:47.700

AJAX 是为与服务器通信而构建的，而无需重新加载或更改浏览器中的当前页面。您应该能够创建一个对您的服务器的 AJAX 调用并向您的服务器发送您想要的任何数据，而不会影响当前页面。

在正常情况下，AJAX 调用仅限于“同源”，这意味着您只能与与当前网页位于同一域的服务器进行通信，因此您还必须确保满足此安全限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:25:29.217

对 servlet 进行 ajax 调用，并通过 (request.getRequestUri()) 将当前页面的 Url 传递给 servlet。

```
var requestUri = '<% request.getRequestUri()%>';
var hostname = location.host;

$.ajax({
  type: "POST",
  url: "/scriptServlet",
  data: { "host": hostname, "uri": requestUri  }
  }).done(function( msg ) {
  alert( "Data Saved: " + msg );
 }); 
```

请注意，语法可能不正确，但您必须进行 ajax 调用才能获得结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T16:18:42.407

您可以在表单中使用隐藏字段。

```
<input type="hidden" name="currentPage" value="<%=request.getRequestURL()%>"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T09:18:56.160

这可以通过将适当的响应代码（我猜是 204）从服务器（servlet）发送回客户端来实现。这样，即使提交了请求，页面也不会刷新/重新加载。

# javascript - 将数组中的值分配给键

> ID：15700419
> 
> 赞同：2
> 
> 时间：2013-03-29T09:16:06.993
> 
> 标签：javascript, arrays, google-maps

在这方面很新...我正在尝试使用数组中的数据在谷歌地图上生成一个动态标记列表（稍后将从 Wordpress 网站上的帖子信息动态填充）。

下面是使用静态数据的代码的简化版本。我遇到的问题是我似乎无法用数组中的第五个值（即 pinImageX）分配“图标”键。

以下工作正常......但显然显示所有标记与一个针样式

```
icon: pinImage1, 
```

但是使用以下方法不起作用

```
icon: locations[i][4], 
```

我觉得我缺少一些语法来正确地为键分配数组中的值:(

```
var locations = [
['Marker1', -50, 100, 1, 'pinImage1'],
['Marker2', -51, 101, 2, 'pinImage2'],
['Marker3', -52, 102, 3, 'pinImage3'],
];

    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 8,
      center: new google.maps.LatLng(-50, 100),
      mapTypeId: google.maps.MapTypeId.TERRAIN
    });

    var infowindow = new google.maps.InfoWindow();

    var marker, i;
        var pinColor1 = "FF0000";
        var pinColor2 = "00FF00";
        var pinColor3 = "0000FF";

            var pinImage1 = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|" + pinColor1,
            new google.maps.Size(21, 34),
            new google.maps.Point(0,0),
            new google.maps.Point(10, 34));

            var pinImage2 = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|" + pinColor2,
            new google.maps.Size(21, 34),
            new google.maps.Point(0,0),
            new google.maps.Point(10, 34));

            var pinImage3 = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|" + pinColor3,
            new google.maps.Size(21, 34),
            new google.maps.Point(0,0),
            new google.maps.Point(10, 34));

    for (i = 0; i < locations.length; i++) {  
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
        icon: locations[i][4],
        map: map
      });

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
        }
      })(marker, i));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:21:17.790

`icon`不接受字符串，而是直接引用`google.maps.MarkerImage`对象。您需要做的是将所有图标`MarkerImage`对象存储在一个关联数组或对象中（无论您喜欢哪个。对象对于甜蜜的原型函数可能很方便），然后从那里返回。

以下是我在前雇主的网站上解决此问题的方法：

```
 if (markerInfo.icon == undefined || markerInfo.icon == "") {
            for(var i=0; i<this.options.categories.length;i++) {
                if (this.options.categories[i].id == markerInfo.category) {
                    markerURLpic = this.options.categories[i].icon;
                }
            }
        } 
```

这是标记生成功能的一部分。本质上，它允许用户随便提交一个字符串，然后让其余的人进行查找。所有`MarkerImage`对象都存储在`this.options.categories`.

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:24:30.900

如果没有范围，变量变量的概念就不能很好地工作，所以您需要做的是创建一个包含您的 pin 图像的对象，该对象将用作范围：

```
var pinImages = {
    pinImage1:
        new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|" + pinColor1,
        new google.maps.Size(21, 34),
        new google.maps.Point(0,0),
        new google.maps.Point(10, 34)),

    pinImage2:
        new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|" + pinColor2,
        new google.maps.Size(21, 34),
        new google.maps.Point(0,0),
        new google.maps.Point(10, 34)),

    pinImage3:
        new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|" + pinColor3,
        new google.maps.Size(21, 34),
        new google.maps.Point(0,0),
        new google.maps.Point(10, 34))
}; 
```

然后你可以像这样引用图像：

```
marker = new google.maps.Marker({
    position: new google.maps.LatLng(locations[i][1], locations[i][2]),
    icon: pinImages[locations[i][4]],
    map: map
}); 
```

# powershell - 使用 PowerShell 2.0 检查 DNS 记录

> ID：15700421
> 
> 赞同：4
> 
> 时间：2013-03-29T09:16:18.803
> 
> 标签：powershell

除了使用以下方法之外，解决计算机名称的最佳方法是什么：

```
[System.Net.DNS]::GetHostByName('MachineName').HostName 
```

我不想导入任何特定的 DNS 模块。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T10:15:48.650

您可以尝试 GetHostEntry 方法：

```
[Net.DNS]::GetHostEntry("MachineName") 
```

另一种方法是使用`Test-Connection`cmdlet 对其进行 ping 操作，[请参阅此提示](http://www.powershellmagazine.com/2013/01/07/pstip-resolving-ip-addresses-with-wmi/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-17T12:55:15.540

我曾遇到过必须查询特定 DNS 服务器的情况，而直接使用 .net / powershell 则无法做到这一点。所以我最终使用了旧的 nslookup ：

```
$client="10.110.10.10"
$ns="10.20.1.10"
(nslookup $client $ns |sls name).toString().split(":")[1].trim() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-03T12:59:43.020

以下两种将 IP 解析为 DNS 地址的方法是唯一的。重要的是你如何使用它。

```
 [Net.DNS]::GetHostEntry("MachineName")
    [System.Net.DNS]::GetHostByName('MachineName').HostName 
```

就像我说的，这就是你如何使用它们。我为此编写了一个脚本。

它需要一个 IP 地址列表并在那里解析 DNS。稍后在脚本中，它将输出转换为 Excel 工作表，向您显示结果。您可以根据过滤器设置布局。

现在我知道并不是所有的 IP 都可以用这些方法解决，这就是为什么我在我的脚本中包含一个函数来过滤掉未解析的 IP 并将它们放在 Excel 表的底部。（为每个 IP 提供指向 who.is/whois/ipadress 的直接链接

这是脚本，如果您有兴趣。

```
#Get current date
$Date = date -format yyyy-MM-dd
$Company = "Company"
    $Company2 = "Company2"
        ########################

#Define all Paths.
$Path = "C:\inetpub\wwwroot\BlockedIP" #This is where your file's will be saved.
    md "$Path\HTML\$Date" -Force |Out-Null
    $path2 = "$Path\HTML\$Date"
$PathWeb = "/ResolvedIp/HTML/$Date"
########################

#Define File's used or created in this script.
$File = "$Path\IP-$Date.txt"
    $FileHtml = "$Path2\IP-$Date.htm"
        $FileXML = "$Path\IP-$Date.xlsx"
            $FileHTMLWeb = "$PathWeb\IP-$date.htm"
            ######################################

#Define error actions.
$erroractionpreference = "SilentlyContinue"
###########################################

#Since the script used COM objects it will need the following 2 folders:

#(32Bit)
MD "C:\Windows\System32\config\systemprofile\Dektop" -force
    MD "C:\Windows\System32\config\systemprofile\AppData\Local\Microsoft\Windows\Temporary Internet" -force
#(64Bit)
MD "C:\Windows\SysWOW64\config\systemprofile\Desktop" -force
    MD "C:\Windows\SysWOW64\config\systemprofile\AppData\Local\Microsoft\Windows\Temporary Internet" -force
#Once successfull the script will run without a problem if scheduled.

cls

            (gc $File) | ? {$_.trim() -ne "" } | set-content $File
            $IPCount =  (gc $File)
            $IPCount =  $IPCount.count

 write "$IPCount unique IP addresses detected."

#Define error actions.
$erroractionpreference = "SilentlyContinue"

#Get content from given IP list.
$colComputers = @(gc $File | sort |Select -unique)
    $SourceCount = $colComputers.Count
    write "$SourceCount IP's detected."

Function Set-KnownIPs{
Param([Object]$DNSLookupObject)
Switch($DNSLookupObject){
    {$_.Source -Match "(108.162.254|141.101.(?:104|105)|199.27.128|173.245(?:53|52|51))"}{$_.HostName = "CloudFlare, Inc."}
    {$_.Source -Match "(64.18.[0-18])"}{$_.HostName = "Google, Inc."}
    {$_.Source -Match "(192.168|127.0.0)"}{$_.HostName = "Internal Infrastructure"}
}
$DNSLookupObject
}

#Get DNS Results
$Progress=1
$DNSResults = $colComputers | %{
Write-Progress -Activity "Creating a usable 'Blocked IP' list ($Progress/$sourcecount)" -PercentComplete ($Progress/$sourceCount*100) -Status "Please stand by"
try {
    ($dnsresult = [System.Net.DNS]::GetHostEntry($_))
}
catch {
    $dnsresult = "Fail"
}
Set-KnownIPs -DNSLookupObject ([PSCustomObject][Ordered]@{
Source=$_.ToUpper()
HostName=$(if(!([string]::IsNullOrEmpty($dnsresult.HostName))){$dnsresult.HostName})
IPAddress=$(if(!([string]::IsNullOrEmpty($dnsresult.AddressList))){$dnsresult.AddressList[0].ToString()})
})
$Progress++
}

$Keywords = @("Google","Cloudflare","Cloud","Ping", 
"Easy-Voyage","McAfee","Pingdom","Panopta","Scoot","Uniglobe", 
"Internal")

$Filter = "($(($Keywords|%{[RegEx]::Escape($_)}) -join "|"))"

$DNSLookupFailed = $DNSResults | 
?{[string]::IsNullOrEmpty($_.HostName) -and !($_ -match $filter)}

$DNSWithKeyword = $DNSResults | 
?{$_ -match $Filter}

$DNSNoKeyword = $DNSResults | 
?{!($_.HostName -match $Filter) -and !([string]::IsNullOrEmpty($_.IPAddress))}

#$count = ($DNSResults|?{$_ -match $filter}).count
$count = $SourceCount
#####################

#start Excel.
$a = New-Object -comobject Excel.Application

# set interactive to false so nothing from excel is shown.
$a.DisplayAlerts = $False
$a.ScreenUpdating = $True
$a.Visible = $True
$a.UserControl = $True
$a.Interactive = $True
###########################

#Create sheets in Excel.
$b = $a.Workbooks.Add()
    $c = $b.Worksheets.Item(1)
    $c.Activate() | Out-Null

#Create a Title for the first worksheet and adjust the font
$c.Cells.Item(1,1)= "Blocked IP's $Date"
    $c.Cells.Item(1,1).Font.ColorIndex = 55
    $c.Cells.Item(1,1).Font.Color = 8210719

$c.Cells.Item((3+$DNSWithKeyword.Count+1),1) = "IP's not in whitelist"
    $c.Cells.Item((3+$DNSWithKeyword.Count+1),1).Font.ColorIndex = 55
    $c.Cells.Item((3+$DNSWithKeyword.Count+1),1).Font.Color = 8210719

$c.Cells.Item((3+$DNSWithKeyword.Count+$DNSNoKeyword.Count+3),1)= "IP's without DNS return"
    $c.Cells.Item((3+$DNSWithKeyword.Count+$DNSNoKeyword.Count+3),1).Font.ColorIndex = 55
    $c.Cells.Item((3+$DNSWithKeyword.Count+$DNSNoKeyword.Count+3),1).Font.Color = 8210719
    #######################################

$range = $c.Range("a1","e1")
$range.Style = 'Title'
$range.Select()
$range.MergeCells = $true
$range.VerticalAlignment = -4108
################################

            $Linkedin = "https://www.linkedin.com/profile/view?id=96981180" #Look me up! :D
#Define row to be used for linkedin link.
$CounterRow = $Count+5
######################

#Define subjects.
$c.Name = "Blocked IP's ($Date)"
$c.Cells.Item(2,1) = "Given IP"
$c.Cells.Item(2,2) = "Resolved DNS"
$c.Cells.Item(2,3) = "Returned IP"
$c.Cells.Item(2,5) = "$Company"
$c.Cells.Item((3+$DNSWithKeyword.Count+$DNSNoKeyword.Count+$DNSLookupFailed.Count+5),1) = "Created by"
########################################

$link = "http://www.$Company"
    $link2 = "$Linkedin"

$r = $c.Range("E2") 
    [void]$c.Hyperlinks.Add($r, $link) 

$r = $c.Range("A$(3+$DNSWithKeyword.Count+$DNSNoKeyword.Count+$DNSLookupFailed.Count+5)") 
    [void]$c.Hyperlinks.Add($r, $link2)
    ###################################

#Define cell formatting from subjects.
$c.Range("A2:E2").Interior.ColorIndex = 6
$c.Range("A2:E2").font.size = 13
$c.Range("A2:E2").Font.ColorIndex = 1
$c.Range("A2:E2").Font.Bold = $True
###################################

#Define the usedrange, excluding header and footer rows
$KeyRange = $c.Range("A3:c$(3+$DNSWithKeyword.Count)")
$NoKeyRange = $c.Range("A$(3+$DNSWithKeyword.Count+2):c$(3+$DNSWithKeyword.Count+$DNSNoKeyword.Count+2)") 
$NoDNSRange = $c.Range("A$(3+$DNSWithKeyword.Count+$DNSNoKeyword.Count+4):c$(3+$DNSWithKeyword.Count+$DNSNoKeyword.Count+$DNSLookupFailed.Count+4)")
$SheetRange = $c.Range("A3:e$(4+$DNSWithKeyword.Count+$DNSNoKeyword.Count+$DNSLookupFailed.Count+4)")
$Investigate = $c.Range("c$(3+$DNSWithKeyword.Count+$DNSNoKeyword.Count+4):c$(3+$DNSWithKeyword.Count+$DNSNoKeyword.Count+$DNSLookupFailed.Count+4)")
    ################################

#Set background color for the IP list.
$SheetRange.interior.colorindex = 6
$KeyRange.interior.colorindex = 4
$NoKeyRange.interior.colorindex = 15
$NoDNSRange.interior.colorindex = 8
####################################

#Populate data into spreadsheet
$DNSWithKeyword | Select Source, HostName, IPAddress | Sort HostName -Descending | 
ConvertTo-Csv -Delimiter "`t" -NoTypeInformation | 
Select -Skip 1 | Clip
$c.Paste($KeyRange,$false)

$DNSNoKeyword | Select Source, HostName, IPAddress | Sort HostName -Descending | 
ConvertTo-Csv -Delimiter "`t" -NoTypeInformation | 
Select -Skip 1 | Clip
    $c.Paste($NoKeyRange,$false)

$DNSLookupFailed | Select Source, HostName, IPAddress | sort Source -Descending|
ConvertTo-Csv -Delimiter "`t" -NoTypeInformation | 
Select -Skip 1 | Clip
    $c.Paste($NoDNSRange,$false)
    ############################

ForEach($Cell in $Investigate){
If([String]::IsNullOrWhitespace($Cell.value2)){
$Cell.Item($_) = "N/A"
[void]$cell.Hyperlinks.Add($Cell)
    }
}

###########################################################################

#Define borders here.
$xlOpenXMLWorkbook = 51
$xlAutomatic=-4105
$xlBottom = -4107
$xlCenter = -4108
$xlRight = -4152
$xlContext = -5002
$xlContinuous=1
$xlDiagonalDown=5
$xlDiagonalUp=6
$xlEdgeBottom=9
$xlEdgeLeft=7
$xlEdgeRight=10
$xlEdgeTop=8
$xlInsideHorizontal=12
$xlInsideVertical=11
$xlNone=-4142
$xlThin=2 
#########    

$selection = $c.range("A2:C$(1+$DNSResults.Count-9)")
    $selection.select() |out-null
    $selection.HorizontalAlignment = $xlRight
    $selection.VerticalAlignment = $xlBottom
    $selection.WrapText = $false
    $selection.Orientation = 0
    $selection.AddIndent = $false
    $selection.IndentLevel = 0
    $selection.ShrinkToFit = $false
    $selection.ReadingOrder = $xlContext
    $selection.MergeCells = $false
    $selection.Borders.Item($xlInsideHorizontal).Weight = $xlThin
    #############################################################

#Define the usedrange for autofitting.
$d = $c.UsedRange
#################

#Make everything fit in it's cell.
$d.EntireColumn.AutoFit() | Out-Null
####################################

$c.usedrange | Where{$_.Value2 -match "(\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b)"} | 
ForEach{$IPLink = "http://who.is/whois-ip/ip-address/$($Matches[1])";[void]$c.Hyperlinks.Add($_, $IPLink)}

#Define html code for Excel save to .htm.
$xlExcelHTML = 44
#################

#Save final result as an .xlsx file.
$b.SaveAs("$FileXML")
#####################

#Save final result as a .htm file
$b.SaveAs("$FileHTML",$xlExcelHTML)
################################### 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-21T17:22:51.243

在 powershell 5.1 中，您可以使用

```
Resolve-DnsName 
```

# iphone - NSLayoutConstraint 错误：制作完整的子视图

> ID：15700427
> 
> 赞同：0
> 
> 时间：2013-03-29T09:16:32.963
> 
> 标签：iphone, objective-c, cocoa, autolayout

我正在制作全帧子视图，（子视图的框架=超级视图的边界）

我做了如下的扩展

> ```
> [self addConstraints:[NSLayoutConstraint
>                            constraintsWithVisualFormat:@"H:|-0-[subview]-0-|"
>                            options:NSLayoutFormatDirectionLeadingToTrailing
>                            metrics:nil
>                            views:NSDictionaryOfVariableBindings(subview)]];
> [self addConstraints:[NSLayoutConstraint
>                       constraintsWithVisualFormat:@"V:|-0-[subview]-0-|"
>                       options:NSLayoutFormatDirectionLeadingToTrailing
>                       metrics:nil
>                       views:NSDictionaryOfVariableBindings(subview)]]; 
> ```

但是出现运行时错误，显示如下错误。

> ```
> "<NSAutoresizingMaskLayoutConstraint:0x1001bb700 h=--& v=--& H:[IUView:0x10015dcc0(960)]>",
> "<NSLayoutConstraint:0x1001911d0 H:|-(0)-[IUBGView:0x1001783f0]   (Names: '|':IUView:0x10015dcc0 )>",
> "<NSLayoutConstraint:0x1001910e0 H:[IUBGView:0x1001783f0]-(0)-|   (Names: '|':IUView:0x10015dcc0 )>",
> "<NSLayoutConstraint:0x10017bbf0 H:|-(0)-[NSImageView:0x100160050]   (Names: '|':IUBGView:0x1001783f0 )>",
> "<NSLayoutConstraint:0x10015d7f0 H:[NSImageView:0x100160050]-(0)-|   (Names: '|':IUBGView:0x1001783f0 )>",
> "<NSAutoresizingMaskLayoutConstraint:0x1001a6a80 h=--& v=--& H:[NSImageView:0x100160050(0)]>" 
> ```
> 
> 将尝试通过打破约束来恢复
> 
> 将 NSUserDefault NSConstraintBasedLayoutVisualizeMutuallyExclusiveConstraints 设置为 YES 以在发生这种情况时自动调用 -[NSWindow VisualizeConstraints:]。和/或，中断 objc_exception_throw 以在调试器中捕获它。

你能解释一下我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:28:17.330

您似乎没有关闭您手动创建的视图的“translatesAutoresizingMaskInotConstraints”功能。

```
someView.translatesAutoresizingMaskIntoConstraints = NO; 
```

如果您没有将其设置为 NO，那么 iOS 会将 springs-and-struts（例如，自动调整大小的遮罩）设置转换为约束。这些约束与您使用视觉格式语言制作的约束相冲突。

每当您在约束错误输出中看到“NSAutoresizingMaskLayoutConstraint”类时，您就可以确定您没有关闭翻译。

好的做法是，在您以编程方式创建的每个视图上，您​​还需要进行翻译。

# c++ - 从字符串中返回某些字符 - BOOST STRING

> ID：15700431
> 
> 赞同：0
> 
> 时间：2013-03-29T09:17:09.203
> 
> 标签：c++, string, boost

如果指定了字符串的位置，boost string 是否有任何方法可以帮助我从字符串中返回一定数量的字符。例如像

```
Left(std::string("Hello"),2) 
```

可能会返回“他”。[我在这里](http://www.boost.org/doc/libs/1_39_0/doc/html/string_algo.html)查看了图书馆页面，但找不到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T09:21:17.440

只需使用`std::string`的成员函数[`substr()`](http://en.cppreference.com/w/cpp/string/basic_string/substr)：

```
std::string("Hello").substr(0, 2); 
```

这是一个[活生生的例子](http://liveworkspace.org/code/48Ihhx%2445)。

# javascript - Backbone.js 和 Require.js 工具 r.js

> ID：15700432
> 
> 赞同：1
> 
> 时间：2013-03-29T09:17:10.047
> 
> 标签：javascript, backbone.js, requirejs, r.js

所以在我的 TODO 应用程序中，我使用了 Backbone 和 require.js。一切都很酷。我将所有模型、视图、集合分离为单个文件并使用 require.js 加载它们。在我尝试使用控制台 require.js 优化器 r.js 将所有文件合并到一个之后。结果，我得到了一个包含所有库和类的文件。但是当我尝试运行时，我遇到了 Backbone 未定义的错误。我检查了文件，看到 r.js 生成了下一件事： 1\. 首先它将主干源添加到 app-built.js 文件，然后放置下一个字符串

```
define("lib/backbone", function(){}); 
```

因此，我在窗口中有 Backbone 变量，但在我的模块中，我以 require.js 的方式使用它 `define('models/todo',['jquery','underscore','lib/backbone'],function ($, _, Backbone) {`

不作为全局变量，导致我的模块主干局部变量未定义。underscore.js 也有同样的问题。R.js 以相同的方式导入它。

所以问。将来如何避免其他库出现这个问题或现在如何解决这个问题？一些技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:50:36.400

您可能需要使用 shim，因为根据 RequireJS 的 Backbone 期望 Backbone 位于基本 url 目录中。在您的情况下，它似乎在 /lib 中。[配置垫片](http://requirejs.org/docs/api.html#config-shim)。根据您使用的 RequireJS 版本，您只需要确保您使用的库与 AMD 兼容。

在您的 requireJS 配置中：

```
shim: {
  backbone: {
    deps: ["underscore", "jquery"],
    attach: "Backbone"
  },
  underscore: {
    attach: "_"
  }
} 
```

# android - FileTransfer 在尝试处理响应时导致异常

> ID：15700434
> 
> 赞同：1
> 
> 时间：2013-03-29T09:17:15.807
> 
> 标签：android, cordova, native

尝试使用 Android(2.3.3) 上传图像时出现 BufferedInputStream 错误。

**示例代码**

```
var options = new FileUploadOptions();
options.fileKey = "image";
options.chunkedMode = false;

var ft = new FileTransfer();
ft.upload(imageURI, "https://192.168.1.128:5000/", function(resp) {
    console.log(JSON.stringify(resp));
, function(e) {
    console.log(JSON.stringify(e));
}, options); 
```

**例外**

```
> java.io.IOException: BufferedInputStream is closed    at
> java.io.BufferedInputStream.streamClosed(BufferedInputStream.java:116)
>   at java.io.BufferedInputStream.read(BufferedInputStream.java:274) 
>   at
> org.apache.harmony.luni.internal.net.www.protocol.http.UnknownLengthHttpInputStream.read(UnknownLengthHttpInputStream.java:40)
>   at
> org.apache.harmony.luni.internal.net.www.protocol.http.AbstractHttpInputStream.read(AbstractHttpInputStream.java:56)
>   at java.io.DataInputStream.readLine(DataInputStream.java:310)   at
> org.apache.cordova.FileTransfer.upload(FileTransfer.java:286)     at
> org.apache.cordova.FileTransfer.execute(FileTransfer.java:85)     at
> org.apache.cordova.api.PluginManager$1.run(PluginManager.java:192) 
>   at java.lang.Thread.run(Thread.java:1019) 
```

经过一番搜索，这似乎是 Android 2.3.x 中的一个问题（我在 2.3.3 上进行测试）。但我真的很想为我的应用程序找到解决方案。

因此，请帮助找到解决方案。

# yii - DHTMLX 与 yii 框架的集成不起作用？

> ID：15700437
> 
> 赞同：3
> 
> 时间：2013-03-29T09:17:33.557
> 
> 标签：yii, dhtmlx

我根据他们网站中给出的说明将 dhtmlx 与 yii 框架集成在一起。( [DHTMLX With YII](http://docs.dhtmlx.com/doku.php?id=tutorials:dhtmlxconnector_and_yii) )

这是我的控制器文件代码，

```
include_once(YII_BASE_PATH . "/dhtmlx/connector/grid_connector.php");
 include_once(YII_BASE_PATH . "/dhtmlx/connector/scheduler_connector.php");
 include_once(YII_BASE_PATH . "/dhtmlx/connector/db_phpyii.php");

class EventsController extends Controller
{
          public function accessRules()
    {
        return array(
            array('allow',  // allow all users to perform 'index' and 'view' actions
                'actions'=>array('index','view','grid','scheduler'),
                'users'=>array('*'),
            ),
            array('allow', // allow authenticated user to perform 'create' and 'update' actions
                'actions'=>array('create','update'),
                'users'=>array('@'),
            ),
            array('allow', // allow admin user to perform 'admin' and 'delete' actions
                'actions'=>array('admin','delete'),
                'users'=>array('admin'),
            ),
            array('deny',  // deny all users
                'users'=>array('*'),
            ),
        );
    }

           public function actionGrid()
        {            
            // $this->render('grid'); //loads the 'grid' view that we will create later
               $model = new Events();   

               $this->render('grid',array(
                    'model'=>$model,
                ));
        }

        public function actionGrid_data()
        {
                //$model = new Events;
            $grid = new GridConnector(Events::model(), "PHPYii");
            $grid->configure("-","event_id", "start_date, end_date, event_name");
            $grid->render();
        }
} 
```

==================================================== ==============================

我的视图文件

```
<script src="<?php echo AT::getAdminBaseUrl()?>/dhtmlx/grid/dhtmlxcommon.js"    type="text/javascript" charset="utf-8"></script>
<script src="<?php echo AT::getAdminBaseUrl()?>/dhtmlx/grid/dhtmlxgrid.js"  type="text/javascript" charset="utf-8"></script>
<script src="<?php echo AT::getAdminBaseUrl()?>/dhtmlx/grid/dhtmlxgridcell.js"  type="text/javascript" charset="utf-8"></script>

<script src="<?php echo AT::getAdminBaseUrl()?>/dhtmlx/dhtmlxdataprocessor.js"  type="text/javascript" charset="utf-8"></script>
<script src="<?php echo AT::getAdminBaseUrl()?>/dhtmlx/connector/connector.js"  type="text/javascript" charset="utf-8"></script>

<link rel="stylesheet" href="<?php echo AT::getAdminBaseUrl()?>/dhtmlx/grid/dhtmlxgrid.css" type="text/css" media="screen" title="no title" charset="utf-8">
<link rel="stylesheet" href="<?php echo AT::getAdminBaseUrl()?>/dhtmlx/grid/skins/dhtmlxgrid_dhx_skyblue.css" type="text/css" media="screen" title="no title" charset="utf-8">  

<div id="grid_here" style="width:600px; height:400px;"> </div>
 <?php 
                                    // $this->widget('zii.widgets.CListView', array(
                                        // 'dataProvider'=>$dataProvider,
                                        // 'itemView'=>'_view',
                                    // )); 
                                ?>
        <script type="text/javascript">
          mygrid = new dhtmlXGridObject('grid_here'); 
          mygrid.setHeader("Start date,End date,Text");
          mygrid.init();                           
          mygrid.loadXML("./grid_data"); //refers to the 'Grid_data' action we created in the previous step

          var dp = new dataProcessor("./grid_data"); //refers to the 'Grid_data' action as well
          dp.init(mygrid);

        </script> 
```

==================================================== ==========================

我的模态文件

```
<?php

/**
 * This is the model class for table "vendor".
 *
 * The followings are the available columns in table 'vendor':
 * @property integer $id
 * @property string $vendor_name
 * @property string $vendor_description
 * @property string $status
 */
class Events extends CActiveRecord
{
    /**
     * Returns the static model of the specified AR class.
     * @param string $className active record class name.
     * @return Vendor the static model class
     */
    public static function model($className=__CLASS__)
    {
        return parent::model($className);
    }

    /**
     * @return string the associated database table name
     */
    public function tableName()
    {
        return 'events';
    }

    /**
     * @return array validation rules for model attributes.
     */
    public function rules()
    {
        // NOTE: you should only define rules for those attributes that
        // will receive user inputs.
        return array(
            array('event_name', 'length', 'max'=>255),
                      // The following rule is used by search().
            // Please remove those attributes that should not be searched.
                    array('start_date,end_date,event_name', 'safe', 'on'=>'search'),
        );
    }

    /**
     * @return array relational rules.
     */
    public function relations()
    {
        // NOTE: you may need to adjust the relation name and the related
        // class name for the relations automatically generated below.
        return array(
        );
    }

    /**
     * @return array customized attribute labels (name=>label)
     */
    public function attributeLabels()
    {
        return array(
            'event_id' => 'Event Id',
                    'start_date' => 'Start Date',
                    'end_date' => 'End Date',
                    'event_name' => 'Event Name',

        );
    }

    /**
     * Retrieves a list of models based on the current search/filter conditions.
     * @return CActiveDataProvider the data provider that can return the models based on the search/filter conditions.
     */
    public function search()
    {
        // Warning: Please modify the following code to remove attributes that
        // should not be searched.

        $criteria=new CDbCriteria;

        $criteria->compare('event_id',$this->event_id);
        $criteria->compare('start_date',$this->start_date,true);
        $criteria->compare('end_date',$this->end_date,true);
        $criteria->compare('event_name',$this->event_name,true);

        return new CActiveDataProvider($this, array(
            'criteria'=>$criteria,
        ));
    }
} 
```

当我运行动作网格时，弹出窗口中出现错误，如下所示，

![在此处输入图像描述](../Images/bdcc433f68984ea3c5d0277ba73e644d.png)

不知道是什么问题。。我怀疑这可能是`'$grid = new GridConnector(Events::model(), "PHPYii"); '`导致问题的原因。

我该如何解决这个问题？谁能帮我？。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:48:29.823

是的。我找到了答案，我需要`dhtmlx/connector/db_phpyii.php` 像下面这样编辑核心扩展文件（删除 &-reference 运算符）。

```
Shows – $temp[]=&$obj->getAttributes();
Should read – $temp[]=$obj->getAttributes(); 
```

参考：[http ://www.dhtmlx.com/blog/?p=1648](http://www.dhtmlx.com/blog/?p=1648)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:58:43.343

请看一下问题：[严格标准：只有变量应该通过参考 PHP 5.4 分配](https://stackoverflow.com/questions/11777908/strict-standards-only-variables-should-be-assigned-by-reference-php-5-4)

看起来您正在使用严格的标准并在第 16 行中使用引用运算符传递对象`/dhtmlx/connector/db_phpyii.php`。

# com - 通过 .reg 文件添加注册表项

> ID：15700440
> 
> 赞同：0
> 
> 时间：2013-03-29T09:17:40.877
> 
> 标签：com, registry, key

我有一个小问题，我确信它有一个简单的解决方案，尽管只有当你知道怎么做时它才会简单。

使用 Windows8，我想注册我的 COM dll。我正在通过 .reg 文件执行此操作。添加 InprocServer32 条目时会出现问题。由于某种原因，指向我的 .dll 文件的值实际上并未添加到注册表中。InprocServer32 键被添加但不是值。

我在 .reg 文件中有这个条目...

```
[HKEY_CLASSES_ROOT\Wow6432Node\CLSID\{15C9923A-7847-4249-95C5-E521D8D614C9}\InprocServer32]
@="D:\COMTest\TestIObject.dll"
"ThreadingModel" = "Both" 
```

还有其他几个条目可以正确添加，而不是 InprocServer32 的“值”。ThreadingModel 键和值按预期添加。'InprocServer32' 键值是否受到保护，不会在 Windows8 中添加/更改？如果是这样，正确的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:30:15.553

您需要转义路径中的反斜杠字符：

```
@="D:\\COMTest\\TestIObject.dll" 
```

# ruby-on-rails - Bundler install 需要更长的时间来执行

> ID：15700449
> 
> 赞同：0
> 
> 时间：2013-03-29T09:18:34.663
> 
> 标签：ruby-on-rails, bundler

获取 gem 元数据和完整的源索引需要非常多的时间。我正在使用最新的捆绑器。

1.  有没有办法在笔记本电脑或整个 LAN 中的多个用户之间共享此信息。
2.  有什么机制可以让这个运行得更快。

    bundle install从[https://rubygems.org/](https://rubygems.org/)
    获取 gem 元数据。

    对依赖项 API 的请求期间出现错误 Bundler::HTTPError

    [从https://rubygems.org/](https://rubygems.org/)获取完整的源索引

    使用 rake (10.0.3)

    使用抽象 (1.0.0)

    安装 i18n (0.6.1)

    安装 multi_json (1.7.2)

    Gem::RemoteFetcher::FetchError: 连接重置太多（[https://s3.amazonaws.com/production.s3.rubygems.org/gems/activesupport-3.2.13.gem](https://s3.amazonaws.com/production.s3.rubygems.org/gems/activesupport-3.2.13.gem)）

    安装 activesupport (3.2.13) 时出错，Bundler 无法继续。

    `gem install activesupport -v '3.2.13'`在捆绑之前确保成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T16:57:53.700

出于某种原因，编辑您的 gemfile 以使用[http://rubygems.org](http://rubygems.org)而不是 https 会大大加快速度

# javascript - 单击链接文本时，jQuery函数（事件）event.target.id为空

> ID：15700452
> 
> 赞同：10
> 
> 时间：2013-03-29T09:18:39.777
> 
> 标签：javascript, jquery, jquery-events

我有一个侧边菜单，单击该菜单会滑出以显示内容面板。根据单击的菜单项，我显然需要在面板中填充不同的内容。

我写了一个函数来操作菜单/面板，它部分工作。但是，我试图确定要加载的内容`event.target.id`（作为函数需要`event`），但是当我单击非常靠近链接正方形的边缘时，它只有一个值。当我在实际文本附近单击`h1`并且`h6`没有`id`'s 时，它不起作用。

现场演示（单击“样式”正方形的边缘附近，然后单击中间）：http: [//jsfiddle.net/mANuD/](http://jsfiddle.net/mANuD/)

```
<div id="application-frame">
  <div class="panel"></div>
  <ul id="slide-out-menu">
    <li>
      <a href="#" class="item" id="styles-menu">
        <h1>S</h1>
        <h6>Styles</h6>
      </a>
    </li>
    <li>
      <a href="#" class="item" id="designers-menu">
        <h1>D</h1>
        <h6>Designers</h6>
      </a>
    </li>
    <li>
      <a href="#" class="item" id="code-menu">
        <h1>C</h1>
        <h6>Code</h6>
      </a>
    </li>
    <li>
      <a href="#" class="item" id="help-menu">
        <h1>?</h1>
        <h6>Help</h6>
      </a>
    </li>
  </ul>
</div> 
```

如何修复/改进此问题，以便我单击链接区域的哪个位置无关紧要？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-29T09:22:36.480

更改`event.target.id`为`event.currentTarget.id`或`this.id`。

`event.target`总是单击最深的元素，而or`event.currentTarget`将`this`指向处理程序绑定到的元素，或者指向委托选择器匹配的元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T09:23:33.760

听起来某些后代元素上有边框或填充，`event.target`处理程序（有效）连接到的元素的后代也是如此。

两种选择：

1.  用于`this.id`获取`id`处理程序（有效）绑定到的元素。这通常可以满足您的要求。[更新小提琴](http://jsfiddle.net/mANuD/1/)

2.  我认为在这种情况下你不需要它，但是工具包中另一个方便的工具是`closest`，它通过查看你给它的元素，然后是它的父级，然后*是它的*父级等来找到与选择器匹配的第一个元素. 例如，`$(this).closest(".item").attr("id")`或者`$(event.target).closest(".item").attr("id")`（因为你想要的项目有类`item`）。[更新了 Fiddle](http://jsfiddle.net/mANuD/2/)但是，我相信 #1 在这种情况下是你想要的。

# javascript - 页面加载时打开第一部分

> ID：15700453
> 
> 赞同：0
> 
> 时间：2013-03-29T09:18:45.393
> 
> 标签：javascript, jquery

HTML：

```
<li class="page_item ">
    <a href="javascript:">A</a>
    <ul class="children">
        <li class="page_item"><a href="">1</a></li>
        <li class="page_item"><a href="">2</a></li>
    </ul>
</li>
<li class="page_item ">
    <a href="">B</a>
    <ul class="children">
        <li class="page_item"><a href="">1</a></li>
        <li class="page_item"><a href="">2</a></li>
        <li class="page_item"><a href="">3</a></li>
        <li class="page_item"><a href="">4</a></li>
    </ul>
</li>
<li class="page_item ">
    <a href="">C</a>
    <ul class="children">
        <li class="page_item"><a href="">1</a></li>
        <li class="page_item"><a href="">2</a></li>
        <li class="page_item"><a href="">3</a></li>
        <li class="page_item"><a href="">4</a></li>
    </ul>
</li> 
```

JS：

```
$('.page_item').click(function() {
    var that = this;
    $('.page_item').each(function() {
        if (that == this) return true; //continue
        $('.children:not(:hidden)', this).slideToggle();
    });
    $('ul.children', this).slideToggle();
}); 
```

在线演示：http: [//jsfiddle.net/kHLuR/1/](http://jsfiddle.net/kHLuR/1/)

如何使第一部分`li`默认打开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:23:17.377

添加此代码以在页面加载时模拟单击事件：`**[LIVE DEMO](http://jsfiddle.net/kHLuR/5/)**`

```
$(document).ready(function () {
    $('a').eq(0).trigger('click');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:27:21.643

**变体 #1**纯 CSS 解决方案：

```
.page_item:first-child .children {
    display: block;
} 
```

演示：http: [//jsfiddle.net/dfsq/kHLuR/7/](http://jsfiddle.net/dfsq/kHLuR/7/)

注意：`:first-child`适用于 IE8+。如果您需要支持旧版本，您可以为您的第一个 li 提供另一个类，例如：http: `<li class="page_item page_item-first">` [//jsfiddle.net/dfsq/kHLuR/9/](http://jsfiddle.net/dfsq/kHLuR/9/)

**变体 #2。**在第一个触发点击事件`.page_item`：

```
$('.page_item').click(function () {
    // ...
})
.filter(':first').click(); 
```

演示：http: [//jsfiddle.net/dfsq/kHLuR/8/](http://jsfiddle.net/dfsq/kHLuR/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:23:48.007

您可以使用 jQuery 的 .ready() 在页面加载后立即执行代码。看看[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

# css - CSS 背景重复

> ID：15700454
> 
> 赞同：0
> 
> 时间：2013-03-29T09:18:50.703
> 
> 标签：css, background-repeat

假设我有一个宽度和高度为 1700 x 1129px 的图像。能够重复此图像的最佳方法是什么，以便您无法判断它已被重复。我试过使用`repeat-y`，但它看起来像另一个图形。

![在此处输入图像描述](../Images/59e8169a99160252523c62298c55c893.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:20:53.280

与css无关。您的图像不允许重复。要在没有不良影响的情况下重复图像，您的图像必须在您希望它重复的方向上具有相同的开始和结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:24:37.613

有一个非常简单的技巧：以静态颜色结束图像侧面（例如示例中的黑色或深棕色），将背景图像居中并填充背景

`body { background: black url(image.png) no-repeat center top; }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:24:51.570

您必须制作*无缝*图像，这意味着图像的上下边缘以及左右边缘完美匹配它们的相对边缘，因此看不到角度和颜色过渡。使用的 css 方法`background-repeat`完全没问题。

这经常在 CG 中使用，主要是在 3D 世界中。有很多关于使图像无缝的教程，在[这里](http://graphicssoft.about.com/library/weekly/aa080499p2.htm)找到一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T09:29:46.323

使用[`background-size`](https://developer.mozilla.org/en-US/docs/CSS/background-size)财产。

如果你有一个你认为可以通过水平重复来伪装的背景，那么请执行以下操作。

```
background-size: 50% 100%; background-repeat: repeat-x; 
```

如果您认为可以通过垂直重复来伪装背景，请执行以下操作：

```
background-size: 100% 50%; background-repeat: repeat-y; 
```

# javascript - 如何添加打卡时间和实际时间

> ID：15700456
> 
> 赞同：2
> 
> 时间：2013-03-29T09:19:02.287
> 
> 标签：javascript, jquery, html, time, jquery-validate

我有两个时间，打孔时间和实际时间。离开时间是这两者的总和。[您可以在http://jsfiddle.net/FHhDQ/5/](http://jsfiddle.net/FHhDQ/5/)上查看我的代码

```
$( "#btn" ).click(function() {
        $( "#dialog" ).dialog( "open" );
        var sum = 0;

        var intime=$('#intime').val();
        var outtime=$('#brktime').val();
        alert(intime);
        var actualtime='08:00';
        var result = add(intime, actualtime);
        alert(actualtime);
        alert(result);
        $('#result').val(result);
        }); 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:30:23.123

我想出了这种使用 Date.parse 解析时间的肮脏方式：

```
function timeToDate(time) { 
    return Date.parse('1970-01-01 ' + time + ' UTC'); 
}

var date = new Date(timeToDate('08:00') + timeToDate('02:34'));
date.getHours()   // 11
date.getMinutes() // 34 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:24:34.287

你不能像那样直接做那些事情。

您必须使用几个函数进行验证。

在这里您可以找到添加 N 次计时

[如何使用 jQuery/Javascript 获取两个时间值？](https://stackoverflow.com/questions/5285172/how-to-get-of-two-time-values-using-jquery-javascript)

# android - NineOldAndroids 中的 LayoutTransition 类..？

> ID：15700465
> 
> 赞同：2
> 
> 时间：2013-03-29T09:19:46.810
> 
> 标签：android, animation, nineoldandroids

我想在`ViewGroup`. 所以我使用`LayoutTransition.class`但它不支持`minSdk 8`。所以我找到了这个[NineOldAndroids](https://github.com/JakeWharton/NineOldAndroids)，并且想知道我是否可以使用它来实现我想要的。

像这样的东西，

```
LayoutTransition layoutTransition = new LayoutTransition();
        AnimatorSet set = (AnimatorSet) AnimatorInflater.loadAnimator(getApplicationContext(),
                R.anim.slide);
        layoutTransition.setAnimator(LayoutTransition.APPEARING, set); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T23:45:26.513

不幸的是 NineOldAndroids 不支持 LayoutTransitions，因为它无法在 Gingerbread 中实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-05T07:43:36.947

添加没有 LayoutTransition 的视图时，我还需要设置动画。我不知道什么时候开始动画，所以我使用 LayoutAnimationController 来做：

```
     // 一个假的 AlphaAnimation 让我们知道如何开始添加视图的动画
      动画动画 = new AlphaAnimation(0, 0);
        动画.setDuration(1);
        动画.setFillAfter(true);
        animation.setAnimationListener(new Animation.AnimationListener() {
            @覆盖
            公共无效onAnimationStart（动画动画）{ 

            }

 `@Override
        public void onAnimationEnd(Animation animation) {
           // start the animation here
           startAddingViewAnimation();
        }

        @Override
        public void onAnimationRepeat(Animation animation) {

        }
    });
   ViewGroup viewroot = findViewById(R.id.viewroot);
   LayoutAnimationController layoutAnimationController = new LayoutAnimationController(animation);
    viewRoot.setLayoutAnimation(layoutAnimationController);    
    viewRoot.addView(btn);` 

设置一个 LayoutAnimationController 来通知我视图已添加并完成绘制。然后我可以通过nineoldanimator启动动画。

```

# gwt - GWT RequestFactory 并将服务器端更改传播到客户端

> ID：15700467
> 
> 赞同：4
> 
> 时间：2013-03-29T09:19:53.220
> 
> 标签：gwt, server-push

我需要一些关于如何最好地使用 GWT 的 RequestFactory 处理将服务器端更改传播到客户端的建议。

让我们假设我们有两个 EntityProxies，一个 PersonProxy 和一个 PersonListProxy（它有一个用于 List 的 getter）。假设客户端已经从服务器获取了一个 PersonList 和一个 Person。

如果客户端正在编辑这些代理之一并触发请求，RequestFactory 的机器（如果我正确理解了原理）将在检测到服务器代码所做的更改时触发 EntityProxyChange 事件（以便客户端可以更新其显示的实体，例如）。

现在假设服务器在此客户端的请求之外更改其实体（例如，由于另一个客户端调用服务器），以便该客户端在再次获取 Person 或 PersonList 时会看到另一个版本。

我的问题是在 RequestFactory 框架内告诉客户更改（并尽可能多地重用机器）的最佳方式是什么？我们可以假设我有一种方法可以将简单的消息从服务器发送到客户端（例如 Google App Engine 的通道 API 或服务器发送的事件）。

一个想法可能是服务器通过此通道发送一条消息，告知具有特定 id 的 Person 或 PersonList 已更改。处理接收这些消息的客户端代码然后可以使用 RequestFactory 重新获取（例如查找）实体。然后应该通过 EntityProxyChange 事件将此更改传播到客户端的其他部分。

这是要走的路吗？（并且如果客户端已经拥有实体的当前版本，例如因为服务器是哑的并且通知客户端客户端本身所做的更改，那么触发的重新获取是否只会传输一些元数据而不是整个又是实体？）

添加：

再想一想，我想知道如何为服务器发送的事件通道生成 EntityProxyId。当服务器上的实体发生变化时，服务器只有服务器 id。当然，它可以将其发送给客户端，但客户端只知道 EntityProxyId。当然，我可以为每个 EntityProxy 添加一个 getId()（除了 getStableId()），但看起来这会给每个服务器响应添加冗余数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-08T18:01:37.580

好吧，我意识到我的帖子并不能准确回答您的问题，但这只是我的经验。实际上，如何将数据从服务器传递到客户端只是一个问题。几年前我面临一些任务，并为自己找到了一种让我的生活更轻松的方法。为了解释它，我想说明我的原因：

*   您必须通过向客户请求来交付完整的数据——这是请求数据的直接、自然的方式；
*   您不想创建和支持 2 种不同的完整数据交付模型：一种来自客户端的请求，另一种来自服务器的推送；
*   但是您需要通知客户端有关服务器端的一些更改；

所以，现在我正在使用以下方法构建我的架构：

1.  构建完整的经典客户端-服务器 API 以进行数据传输 - 即使您的推送功能被阻止或损坏，您也可以以自然的方式加载和刷新您的应用程序。
2.  定义可能在服务器端更改并应通过推送机制传递给客户端的关键信息。
3.  创建小型推送消息结构，仅向客户端发送有关更改的*通知-**不应以这种方式发送任何有价值的数据*- 只需键入哪些数据已更改。
4.  当客户端收到此类通知时，它需要做的只是以已经支持的自然客户端-服务器方式从服务器获取/刷新数据。
5.  服务器逻辑不应该通过大量通知来打扰客户端 - 有时更有效的是不提供更改，而只是刷新所有内容。

希望这可以帮助。

# c - 不要使用 clang 管理链接库

> ID：15700471
> 
> 赞同：4
> 
> 时间：2013-03-29T09:20:24.863
> 
> 标签：c, compiler-construction, linker, makefile, clang

我想用[libuv](https://github.com/joyent/libuv)和[http-parser](https://github.com/joyent/http-parser)构建一个网络服务器。

目前的项目结构是

```
Makefile

/src
  /main.c

/deps
  /libuv (git clone of libuv)
  /http-parser (git clone of http-parser) 
```

在 main.c 我定义了以下包括：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "uv.h"
#include "http_parser.h" 
```

Makefile 看起来像：

```
LDFLAGS = -L deps/libuv

main: libuv http-parser
    $(CC) src/main.c -o main.out deps/libuv/libuv.a deps/http-parser/http_parser.o $(LDFLAGS)

libuv:
    $(MAKE) -C deps/libuv libuv.a

http-parser:
    $(MAKE) -C deps/http-parser http_parser.o

clean:
    rm deps/libuv/libuv.a
    rm deps/http-parser/http_parser.o 
```

当编译器尝试链接 http_parser 时会发生这种情况。

```
make -C deps/libuv libuv.a
make[1]: `libuv.a' is up to date.
make -C deps/http-parser http_parser.o
make[1]: `http_parser.o' is up to date.
cc src/main.c -o main.out deps/libuv/libuv.a deps/http-parser/http_parser.o
src/main.c:5:10: fatal error: 'http_parser.h' file not found
#include "http_parser.h"
         ^
1 error generated.
make: *** [main] Error 1 
```

当我从包含和 Makefile 中删除 http_parser 时，我得到一个奇怪的 libuv 构建错误：

```
Undefined symbols for architecture x86_64:
  "_CFArrayCreate", referenced from:
      _uv__fsevents_init in libuv.a(fsevents.o)
  "_CFRunLoopAddSource", referenced from:
      _uv__cf_loop_runner in libuv.a(darwin.o)
  "_CFRunLoopGetCurrent", referenced from:
      _uv__cf_loop_runner in libuv.a(darwin.o)
  "_CFRunLoopRemoveSource", referenced from:
      _uv__cf_loop_runner in libuv.a(darwin.o)
  "_CFRunLoopRun", referenced from:
      _uv__cf_loop_runner in libuv.a(darwin.o)
  "_CFRunLoopSourceCreate", referenced from:
      _uv__platform_loop_init in libuv.a(darwin.o)
  "_CFRunLoopSourceSignal", referenced from:
      _uv__cf_loop_signal in libuv.a(darwin.o)
  "_CFRunLoopStop", referenced from:
      _uv__platform_loop_delete in libuv.a(darwin.o)
  "_CFRunLoopWakeUp", referenced from:
      _uv__cf_loop_signal in libuv.a(darwin.o)
  "_CFStringCreateWithCString", referenced from:
      _uv__fsevents_init in libuv.a(fsevents.o)
  "_CFStringGetSystemEncoding", referenced from:
      _uv__fsevents_init in libuv.a(fsevents.o)
  "_FSEventStreamCreate", referenced from:
      _uv__fsevents_init in libuv.a(fsevents.o)
  "_FSEventStreamInvalidate", referenced from:
      _uv__fsevents_close in libuv.a(fsevents.o)
  "_FSEventStreamRelease", referenced from:
      _uv__fsevents_close in libuv.a(fsevents.o)
  "_FSEventStreamScheduleWithRunLoop", referenced from:
      _uv__fsevents_schedule in libuv.a(fsevents.o)
  "_FSEventStreamStart", referenced from:
      _uv__fsevents_schedule in libuv.a(fsevents.o)
  "_FSEventStreamStop", referenced from:
      _uv__fsevents_close in libuv.a(fsevents.o)
  "_kCFRunLoopDefaultMode", referenced from:
      _uv__cf_loop_runner in libuv.a(darwin.o)
      _uv__fsevents_schedule in libuv.a(fsevents.o)
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [main] Error 1 
```

从昨天开始我就被这个问题困住了，完全失去了希望..

**Makefile 的当前状态：**

```
LDFLAGS = -Ldeps/libuv
INCLFLAGS = -Ideps/http-parser

main.o: libuv.a http-parser.o
    $(CC) src/main.c $(INCLFLAGS) -o main.o deps/libuv/libuv.a deps/http-parser/http_parser.o $(LDFLAGS)

libuv.a:
    $(MAKE) -C deps/libuv libuv.a

http-parser.o:
    $(MAKE) -C deps/http-parser http_parser.o

clean:
    rm deps/libuv/libuv.a
    rm deps/http-parser/http_parser.o 
```

详细输出：

```
#include "..." search starts here:
#include <...> search starts here:
 deps/libuv
 deps/http-parser
 /usr/local/include
 /usr/bin/../lib/clang/4.2/include
 /usr/include
 /System/Library/Frameworks (framework directory)
 /Library/Frameworks (framework directory)
End of search list.
 "/usr/bin/ld" -demangle -dynamic -arch x86_64 -macosx_version_min 10.8.0 -o main.o -Ldeps/libuv /var/folders/4l/zj55m1gn289f6v04zfbl59bm0000gn/T/main-sRhCLM.o deps/libuv/libuv.a deps/http-parser/http_parser.o -lSystem /usr/bin/../lib/clang/4.2/lib/darwin/libclang_rt.osx.a
Undefined symbols for architecture x86_64:
  "_CFArrayCreate", referenced from:
      _uv__fsevents_init in libuv.a(fsevents.o)
  "_CFRunLoopAddSource", referenced from:
      _uv__cf_loop_runner in libuv.a(darwin.o) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T09:30:23.017

我怀疑 http_parser.h 与 main.c 不在同一目录中。要么复制那个文件，要么最好更新你的 INCLUDE 路径。

```
HTTP_PARSER_INCLUDE= -I/home/wherever/http_parser

main: libuv http-parser
    $(CC) src/main.c -o main.out $(HTTP_PARSER_INCLUDE) deps/libuv/libuv.a deps/http-parser/http_parser.o $(LDFLAGS) 
```

由于删除 http_parser.h 而得到的另一个错误可能只是由于一开始就没有构建干净而产生的噪音。您在上面声明的“main”规则构建“main.out”而不是“main”。这也可能与 Make 试图无中生有有关。

**更新**- 您需要添加`-framework CoreFoundation`到命令行以删除链接器错误。

# xslt - 在 xs:schema 元素输出中使用 xsl:param 变量

> ID：15700473
> 
> 赞同：0
> 
> 时间：2013-03-29T09:20:46.127
> 
> 标签：xslt, xsd

我正在尝试从 XSLT 脚本输出以下行。它是紧随其后的第一行`xsl:template match="/"`。我要做的是将 XML 文档转换为 XML 模式，并且需要以`xs:schema`特定方式输出标签。

```
<xs:schema xmlns:ed="http://test1"  xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" targetNamespace="{$ns_name}" xmlns:tns="{$ns_name}" elementFormDefault="qualified" attributeFormDefault="unqualified" xsi:schemaLocation="http://test1 file://XmlSchemaAppinfo.xsd"> 
```

是`$ns_name`一个`xsl:param name="ns_name"`。它被正确解析，`targetNamespace="{$ns_name}"`但在`xmlns:tns="{$ns_name}"`字面上输出

```
<xs:schema targetNamespace="akolodk" elementFormDefault="qualified" attributeFormDefault="unqualified" xsi:schemaLocation="http://test1 file://XmlSchemaAppinfo.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:ed="test1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tns="{$ns_name}"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:27:55.917

在 XSL 中，只有一些属性可以使用[属性值模板](http://www.w3.org/TR/xslt#attribute-value-templates)（使用 '{}' 符号）来编写。特别是，xmlns 属性不支持该表示法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:59:28.397

命名空间声明与属性不同，即使它们看起来相同。在`xmlns:tns`样式表被解析时，XML 解析器在它到达 XSLT 处理器之前已经对它进行了处理。

如果您有 XSLT 2.0，您可以使用

```
<xsl:namespace name="tns" select="$ns_name"/> 
```

在结果树中创建命名空间节点，但我知道没有简单的方法可以在 XSLT 1.0 中生成动态命名空间。你不能使用[`xsl:attribute`](http://www.w3.org/TR/xslt#creating-attributes)，规范明确指出，虽然

```
<xsl:attribute name="xmlns:xsl" namespace="whatever">http://www.w3.org/1999/XSL/Transform</xsl:attribute> 
```

不是错误，它将生成一个属性，而不是命名空间声明 - 处理器需要忽略 中`xmlns`指定的前缀，`name`并且必须使用不同的前缀来输出属性。

如果您的处理器支持 exslt`node-set`扩展功能，那么以下*可能会*起作用：

```
<xsd:schema .....>
  <xsl:variable name="tnsElement">
    <xsl:element name="tns:dummy" namespace="{$ns_name}"/>
  </xsl:variable>
  <xsl:copy-of select="exsl:node-set($tnsElement)/*/namespace::tns"/> 
```

但是再次允许处理器忽略`xsl:element` `name`属性的前缀并使用绑定到同一 URI 的不同前缀，您必须使用处理器对其进行测试。

（并且您必须添加`xmlns:exsl="http://exslt.org/common" exclude-result-prefixes="exsl"`到您的`xsl:stylesheet`元素中）。

# c# - 在 ASP.net 内网中以登录的 windows 用户身份运行 powershell

> ID：15700485
> 
> 赞同：0
> 
> 时间：2013-03-29T09:21:49.550
> 
> 标签：c#, powershell, impersonation, credentials, intranet

我正在使用 Windows authentification 在 ASP.NET C# 中创建 MVC Intranet 应用程序，并且我需要使用用户凭据运行外部 powershell 脚本。

我添加了我的 web.config 文件。

```
<system.web>
    <authentication mode="Windows" />
    <identity impersonate="true"/>
</system.web>
<runtime>
    <!--http://blogs.msdn.com/b/powershell/archive/2007/09/10/impersonation-and-hosting-powershell.aspx-->
    <legacyImpersonationPolicy enabled="false"/>
    <alwaysFlowImpersonationPolicy enabled="true"/>
</runtime> 
```

在我的控制器中

```
 // http://support.microsoft.com/kb/306158
        System.Security.Principal.WindowsImpersonationContext impersonationContext;
        impersonationContext = ((System.Security.Principal.WindowsIdentity)User.Identity).Impersonate();

        ViewBag.Message = "User Powershell : " + PSRunner.ExecuteScript("Whoami;") + "   > user C# : " + System.Security.Principal.WindowsIdentity.GetCurrent().Name + "    User Authentifier : " + User.Identity.Name + " type " + User.Identity.GetType();

        impersonationContext.Undo(); 
```

但我总是在PowerShell中使用IIS用户

```
User Powershell : iis apppool\www.site.com > user C# : DOMAIN\alopez User Authentifier : DOMAIN\alopez type System.Security.Principal.WindowsIdentity 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:08:27.747

我不知道 PSRunner 如何初始化 powershell 运行时，但是作为其他用户使用启动 powershell 进程呢：**[Runas](http://ss64.com/nt/runas.html)**

# php - 使用序列化函数发送表单数据

> ID：15700488
> 
> 赞同：1
> 
> 时间：2013-03-29T09:22:13.773
> 
> 标签：php, javascript, jquery

我想将表单的所有输入字段发送到 process/do_submitattendance.php，在那里我可以使用 来存储在数据库中。但是我在这样做时遇到了麻烦。我的 jQuery 代码是-

```
 <script type="text/javascript">
    $("#submitattendance").submit(function(){

        var_form_data=$(this).serialize();
        $.ajax({
            type: "POST",
            url: "process/do_submitattendance.php",
            data: var_form_data,
            success: function(msg){
                alert("data saved" + msg);

            });

    });       
</script> 
```

submitattendance 是表单元素的 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:27:35.753

我猜表单正在提交，您必须阻止默认提交操作：

```
<script type="text/javascript">
  $(function() {
    $("#submitattendance").on('submit', function(e){
        e.preventDefault();
        $.ajax({
           type: "POST",
           url : "process/do_submitattendance.php",
           data: $(this).serialize()
        }).done(function(msg) {
            alert("data saved" + msg);
        });
    });
  });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:33:38.427

为什么不尝试通过会话传递值？

通过使用会话，您可以将值从一个页面传递到您想要的任何其他页面。

典型的代码如下所示：

主页.php

```
 <?php
    session_start(); // You should start session 
    $_SESSION['UserName']="YourTextfield"; 
    ?> 
```

第二页.php

```
<?php
session_start();
$var = $_SESSION['UserName'];
?> 
```

保存数据后...然后您需要重置会话

```
$_SESSION['UserName']=""; 
```

这就是我通常使用的。我希望它会帮助你...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:24:53.977

```
var var_form_data=$(this).serialize(); 
```

是我能找到的，或者你的代码在其他地方一定有错误。您可以查看您的 chrome 控制台以查看是否有错误 (f12)。还添加`return false;`以停止表单提交本身。

# emacs - 使用 w3m 在 gnus 中的 html 电子邮件中显示图像

> ID：15700508
> 
> 赞同：1
> 
> 时间：2013-03-29T09:23:30.917
> 
> 标签：emacs, gnus

我刚开始使用 gnus，想在 html 电子邮件中查看图像。我设置

```
(setq mm-text-html-renderer 'w3m)
(setq gnus-inhibit-images nil) 
```

在我的 .gnus.el 中，但我仍然看不到图像。如果我在文章中按 T，它会告诉我

```
"There are some images considered unsafe; use the prefix arg to force display." 
```

不幸的是，我不知道如何处理这些信息。

如果我认为可以保存而不使用 KH，有什么方法可以在 w3m 中显示图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:01:45.317

您可以通过在命令之前按来设置前缀参数`C-u`（因此您应该`C-u``T`在您的情况下按）。

有关前缀参数的更多信息，请参阅[emacs 手册](http://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Arguments)。

# insert - Cassandra 使用 map reduce 插入失败

> ID：15700511
> 
> 赞同：1
> 
> 时间：2013-03-29T09:23:37.020
> 
> 标签：insert, mapreduce, cassandra

尝试使用 MapReduce 程序将记录插入 cassandra，从减少作业中得到以下错误。

```
13/03/29 07:39:34 INFO mapred.JobClient: Task Id : attempt_201303281807_0009_r_000000_0, Status : FAILED
java.io.IOException: InvalidRequestException(why:TimeUUID should be 16 or 0 bytes (3))
    at org.apache.cassandra.hadoop.ColumnFamilyRecordWriter$RangeClient.run(ColumnFamilyRecordWriter.java:309)
Caused by: InvalidRequestException(why:TimeUUID should be 16 or 0 bytes (3))
    at org.apache.cassandra.thrift.Cassandra$batch_mutate_result.read(Cassandra.java:20350)
    at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:78)
    at org.apache.cassandra.thrift.Cassandra$Client.recv_batch_mutate(Cassandra.java:926)
    at org.apache.cassandra.thrift.Cassandra$Client.batch_mutate(Cassandra.java:912)
    at org.apache.cassandra.hadoop.ColumnFamilyRecordWriter$RangeClient.run(ColumnFamilyRecordWriter.java:301 
```

slicePredicate 定义是

```
SlicePredicate predicate = new SlicePredicate().setSlice_range(new SliceRange(ByteBuffer.wrap(new byte[16]), ByteBuffer.wrap(new byte[16]), false, 150));
        ConfigHelper.setInputSlicePredicate(conf, predicate); 
```

我已经尝试了其他几个 api 来设置 sliceRange 而不使用。例如其他 api：[https://code.google.com/p/skltpservices/source/browse/Components/log-analyzer/trunk/src/main/java/se/skl/skltpservices/components/analyzer/domain/TimeUUID。 java?spec=svn1939&r=1939](https://code.google.com/p/skltpservices/source/browse/Components/log-analyzer/trunk/src/main/java/se/skl/skltpservices/components/analyzer/domain/TimeUUID.java?spec=svn1939&r=1939)

列族定义为：

```
create column family myColumnFamily
  with column_type = 'Standard'
  and comparator = 'TimeUUIDType'
  and default_validation_class = 'UTF8Type'
  and key_validation_class = 'UTF8Type'
  and read_repair_chance = 0.1
  and dclocal_read_repair_chance = 0.0
  and gc_grace = 864000
  and min_compaction_threshold = 4
  and max_compaction_threshold = 32
  and replicate_on_write = true
  and compaction_strategy = 'org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy'
  and caching = 'KEYS_ONLY'
  and compression_options = {'sstable_compression' : 'org.apache.cassandra.io.compress.SnappyCompressor'}; 
```

感谢在 Column 系列中使用 TimeUUIDType 比较器并使用 Mapreduce 插入的任何帮助。

# java - 使用Apache POI和eclipse作为编辑器读取excel文件的java程序

> ID：15700512
> 
> 赞同：2
> 
> 时间：2013-03-29T09:23:44.240
> 
> 标签：java, eclipse, apache-poi

我创建了这段代码来使用 APACHE POI 读取包含布尔值、字符串和数值的 excel 文件。

```
import java.io.*;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import org.apache.poi.hssf.usermodel.HSSFCell;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.poifs.filesystem.POIFSFileSystem;

public class ExcelRead {

public static void main(String[] args) throws Exception {
    File excel = new File ("C:\\Users\\...\\Documents\\test.xls");
    FileInputStream fis = new FileInputStream(excel);

    HSSFWorkbook wb = new HSSFWorkbook(fis);
    HSSFSheet ws = wb.getSheet("Input");

    int rowNum = ws.getLastRowNum()+1;
    int colNum = ws.getRow(0).getLastCellNum();
    String[][] data = new String[rowNum][colNum];

    for (int i=0; i<rowNum; i++){
        HSSFRow row = ws.getRow(i);
            for (int j=0; j<colNum; j++){
                HSSFCell cell = row.getCell(j);
                String value = cellToString(cell);
                data[i][j] = value;
                System.out.println("The value is" + value);

            }
       }
    }

public static String cellToString (HSSFCell cell){

int type;
Object result;
type = cell.getCellType();

     switch(type) {

    case 0://numeric value in excel
        result = cell.getNumericCellValue();
        break;
    case 1: //string value in excel
        result = cell.getStringCellValue();
        break;
    case 2: //boolean value in excel
        result = cell.getBooleanCellValue ();
        break;
    default:
        throw new RunTimeException("There are no support for this type of 
                                                cell");                      
}

return result.toString();

} 
```

当我使用 eclipse 运行它时，我收到以下警告：

> 用法：AddDimensionedImage imageFile outputFile

谁能帮我？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T09:27:45.347

您正在尝试运行名为“AddDimensionedImage”的不同项目/类。

右键单击 Eclipse 上的 ExcelRead 文件，然后选择 Run As -> Java Application

# html - 响应式 CSS 不工作

> ID：15700513
> 
> 赞同：0
> 
> 时间：2013-03-29T09:23:44.453
> 
> 标签：html, css, xhtml

这是我的css，作为测试：

```
*{margin:0;padding:0;outline:0;border:0;}

body{background:#686465;font-family:Arial,Verdana,sans-serif;font-size:100%;}
@media screen and (max-device-width:320px){
    body{background:red !important;}
}

@media screen and (max-device-width:800px){
    body{background:organge !important;}
} 
```

我有 2 个使用 SDK 运行的 android 设备来测试它。一个是 3.2 英寸 HVGA Slider 320x480，第一条规则在此设备上启动并将主体背景设置为红色。第二个设备是 Nexus 7 800x1280，但是这个忽略了两个媒体规则；但是，如果我删除了第一个媒体规则，那么它会拾取它。为什么？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-25T13:30:25.200

你有没有把这个链接放在你的 html 文件中： -

```
<meta name="viewport" content="width=device-width, initial-scale=1.0;"> 
```

您可以使用-

```
@media only screen and (max-width:800px){ } 
```

代替-

```
@media screen and (max-device-width:800px){ } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:28:28.460

**换成这个**

```
*{margin:0;padding:0;outline:0;border:0;}

body{background:#686465;font-family:Arial,Verdana,sans-serif;font-size:100%;}
@media screen and (max-device-width:320px){
    body{background:red !important;}
}

@media screen and (max-device-width:800px){
    body{background:organge !important;}
} 
```

**这个**

```
*{margin:0;padding:0;outline:0;border:0;}

body{background:#fcfcfc;font-family:Arial,Verdana,sans-serif;font-size:100%;}

@media screen and (max-device-width:800px){
    body{background:orange;}
}

@media screen and (max-device-width:320px){
    body{background:red ;}
} 
```

更多关于**[媒体查询-1](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)**

**[媒体查询-2](http://css-tricks.com/css-media-queries/)**

# c++ - 树容器迭代器接口

> ID：15700518
> 
> 赞同：2
> 
> 时间：2013-03-29T09:23:49.620
> 
> 标签：c++, stl, iterator

我正在制作自己的类似 STL 的容器 - 带有任意数量孩子的树

```
template<typename Type>
class Node
{
    Type value;
    Iterator AddChild(const Type & value);
    void Remove(const Iterator & where);
    ...
}; 
```

我决定迭代器`operator*`应该返回`value`当前节点，但是应该返回`operator->`什么？目前，它返回`Node<Type>*`并且在这种情况下非常有用

```
Node<int>::Iterator it = tree.begin();
it->AddChild(4); 
```

但是我的导师说我，那`operator->`应该回来`Type*`。访问 Node 方法的类似 STL 的方式是什么？类似的东西看起来`it.Ref().MyMethod()`不太好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T09:44:56.543

你的导师是对的，返回类型`operator->()`应该是`Type*`.

迭代器背后的重要思想是它们只是指向容器内某些位置的智能指针。您可以更改存储在该位置的值（通过分配 to `*it`）或访问其成员，但要对容器内容进行更剧烈的（即结构性）更改，您必须直接访问容器本身。

这就是为什么在 STL**中没有节点的方法**。相反，有容器的方法（以及算法）接受迭代器作为参数。

换句话说，做你想做的事情的 STL 方式是：

```
Node<int>::Iterator it = tree.begin();
tree.AddChild(it, 4); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:42:07.127

`operator->`应该返回`YourTree::value_type*`并且`operator*`应该返回`YourTree::value_type&`。（实际上是`YourTree::pointer`and `YourTree::reference`，但这些通常只是值类型的`*`and的别名）。`&`注意一致性。没有它，标准算法将无法工作。

由您决定 value_type 是什么。`Node`如果你愿意，它很可能是。然而，这可能会令人困惑并且难以始终如一地实施。我会将其保留为`Type`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T10:02:44.497

程序员期望`it->method`等价于`(*it).method`，因此应该返回指向返回引用`operator->`的同一事物的指针。`operator*`通常这应该是迭代器的值，因为这是获得该值的预期方式。

您可以将节点的方法公开为指针的方法，即称为 as `it.method`，但这有点令人困惑，并且在大多数情况下，与将迭代器作为参数的容器方法相比，它需要迭代器中的额外数据。这就是为什么 STL 总是使用带有迭代器的容器的方法。例如在 .之后`container.insert(iterator, value)`插入。`value``iterator`

# javascript - Javascript 警报抑制其他 javascript 函数

> ID：15700520
> 
> 赞同：1
> 
> 时间：2013-03-29T09:23:52.027
> 
> 标签：javascript, alert

我有以下问题：我想通过警报警告用户即将到来的会话超时。当实际会话超时发生时，我想弹出另一个警报并转发到任何网站。我的方法适用于 Firefox 和 IE。使用 Safari 和 Chrome，当我在第二次超时发生之前没有提交第一个警报时，第二个函数实际上永远不会执行。有什么提示吗？

```
setTimeout(function() {
    alert('Session timeout in 5 minutes...');
}, 30 * 1000);

setTimeout(function() {
    alert('Session timeout, sorry');
    location.href = 'http://google.com';      
}, 60 * 1000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:28:23.097

警报会暂停您的 javascript 执行。使用[Growl](http://growl.info/)或顶栏消息类型的通知被认为对 UI 更友好。

编辑：为此有很多库，但这是另一个问题的一部分。
[独立于库/框架的咆哮式通知？](https://stackoverflow.com/questions/4400113/growl-style-notifications-that-are-library-framework-independent)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:33:56.397

此问题将通过创建自定义警报框来解决。但是如果你想用浏览器警报框来做，你可以试试这个。

```
var nStartTime = new Date().getTime();

setTimeout(function() {
    alert('Session timeout in 5 minutes...');
    var nRemainingTime = 60 * 1000 -  (new Date().getTime() - nStartTime);
    nRemainingTime = nRemainingTime < 0 ? 0 : nRemainingTime ;
    setTimeout(function() {
        alert('Session timeout, sorry');
        location.href = 'http://google.com';         
    }, nRemainingTime); 
}, 30 * 1000);var nStartTime = new Date().getTime(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:44:55.133

alert() 和 confirm() 是两个停止 java 脚本执行的提示。

# android - 无法获取 Facebook Graph API 好友详细信息

> ID：15700527
> 
> 赞同：0
> 
> 时间：2013-03-29T09:24:32.523
> 
> 标签：android, facebook-graph-api

我试图从图表中获取用户和他的朋友的分数，但我遇到了错误。“只有创建视图层次结构的原始线程才能触及它的视图。” 执行时。

```
JSONArray responseJSONArray = new JSONArray(response); 
```

我拥有所需的所有权限。我通过使用以下方法成功将分数发布到图表中：

```
fbParams.putString("score", "" + 555);
    Request postScoreRequest = new Request(Session.getActiveSession(),
            "me/scores",
            fbParams,
            HttpMethod.POST,
            new Request.Callback() {
...
... 
```

当我试图得到分数时。即使从使用这种模式的浏览器

```
https://graph.facebook.com/{userid}/scores?access_token={app_access_token} 
```

我有

```
{"data":[{"user":{"name":"MYUSERNAME","id":"MIID"},"score":555,"application":{"name":"Tomato Smasher","namespace":"tomatosmasher","id":"354552234651550"}}]} 
```

我从以下网址获得了访问代码： [https ://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)

但在 android 应用程序中使用：

```
Session.getActiveSession().getAccessToken();

// Execute the HTTP Get to our server for the scores of the user's friends
                HttpClient client = new DefaultHttpClient();
                String getURL = "https://graph.facebook.com/" + currentUserFBID + "/scores?access_token=" + currentUserAccessToken;
                HttpGet get = new HttpGet(getURL);
                HttpResponse responseGet = client.execute(get);
                System.out.println("ALL GOOD2");
                // Parse the response
                HttpEntity responseEntity = responseGet.getEntity();
                String response = EntityUtils.toString(responseEntity);
                System.out.println("ALL GOOD3");
                if (!response.equals(null)) {
                    System.out.println("ALL GOOD4");
                    System.out.println(response);
                    JSONArray responseJSONArray = new JSONArray(response);  // <----------------got EXEPTION HERE
                    System.out.println("ALL GOOD4.5"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-10T06:02:28.517

您可以使用此代码使用 facebook 3.0 访问朋友分数

String fqlQuery = "SELECT value FROM score WHERE user_id = "+"Enter_User_Id_Here"+" AND app_id = "+"Enter App Id Here";

```
 Bundle params = new Bundle();
            params.putString("q", fqlQuery);
            Session session = Session.getActiveSession();

            Request request = new Request(session,
                    "/fql",                         
                    params,                         
                    HttpMethod.GET,                 
                    new Request.Callback(){       
                public void onCompleted(Response response) {
                    Log.i("Result: ",response.toString());

                    try{
                        GraphObject graphObject = response.getGraphObject();
                        JSONObject jsonObject = graphObject.getInnerJSONObject();

                        JSONArray array = jsonObject.getJSONArray("data");

                            JSONObject data = array.getJSONObject(0);
                            Score = data.getString("value");

                    }catch(JSONException e){
                        e.printStackTrace();
                    }
                }                  
            }); 
            Request.executeBatchAsync(request); 
```

# android - 从 SD 卡获取数据库的问题

> ID：15700534
> 
> 赞同：0
> 
> 时间：2013-03-29T09:24:50.713
> 
> 标签：android, android-sqlite, android-sdcard

我正在尝试读取存储在 SDCard 上的 SQLite 数据库。部分代码如下：

```
public String getTables() {
    String dbFullPath = Environment.getExternalStorageDirectory().toString() + "/external_sd/database.db";
    String query = "SELECT name from sqlite_master where type='table'";
    SQLiteDatabase mDatabase = SQLiteDatabase
            .openDatabase(dbFullPath, null, SQLiteDatabase.OPEN_READONLY
                    + SQLiteDatabase.NO_LOCALIZED_COLLATORS);
    Log.d(TAG, "Is db open? " + mDatabase.isOpen());
    Cursor cursor = mDatabase.rawQuery(query, null);
    String tables = cursor.getString(0);
    cursor.close();

    return tables;
} 
```

但是，在运行此代码时，出现以下错误

> java.lang.RuntimeException：无法启动活动 ComponentInfo{...}：android.database.sqlite.SQLiteException：无法打开数据库文件：，编译时：SELECT name from sqlite_master where type='table'

上`Cursor cursor = mDatabase.rawQuery(query, null);`线。

调试日志返回`Is db open? true`，意味着我找到了正确的路径并且数据库已成功打开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:32:40.297

```
Cursor cursor = mDatabase.query(sqlite_master, new String[] { "name" }, "type=" + table, null,
                null, null, "name asc"); 
```

# windows-phone-7 - 如何为windows phone 7中的所有页面放置一个通用标题？

> ID：15700537
> 
> 赞同：1
> 
> 时间：2013-03-29T09:24:55.053
> 
> 标签：windows-phone-7, mvvm

我正在尝试制作一个 Windows Phone 应用程序。在此，我想为所有页面放置一个共同的标题。请建议它有多大可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:01:41.170

我不明白你到底想要什么，但我会说如果你想要一个通用名称，请在所有页面上说出你的公司名称。然后，您需要做的就是在创建新页面时更改每个页面的应用程序标题。或者如果您想通过代码进行更改，请订阅加载的事件并编写

```
ApplicationTitle.Text = "company-name"; 
```

# wpf - 窗口关闭后wpf窗口事件继续引发

> ID：15700538
> 
> 赞同：3
> 
> 时间：2013-03-29T09:24:59.557
> 
> 标签：wpf, dispose

我对 wpf 事件有疑问。在 xaml 中，我有以下带有 selectionchanged 事件的组合框：

```
<ComboBox Grid.Column="1" Grid.Row="1" Name ="comboBox"
          SelectedItem="{Binding CurrentEventBinding.ControlId, ValidatesOnDataErrors=True}"
          ItemsSource="{Binding ControlsNames}" SelectionChanged="ComboboxSelectionChanged"> 
```

在代码隐藏中，我有以下代码：

```
private void ComboboxSelectionChanged(object sender, System.Windows.Controls.SelectionChangedEventArgs e) {
      (DataContext as EventBindingEditViewModel).VmCommands.UpdateSourceCommand.Execute(null);
  } 
```

我有以下工作场景： Window.ShowDialog(); -> ComboboxSelectedChanged（引发事件）-> CloseWindow(); 再说一遍：Window.ShowDialog(); -> ComboboxSelectedChanged（**事件被引发两次**）如果在即时窗口中我写`sender.GetHashCode()`它第一次从当前窗口返回组合框的哈希码，第二次返回“死”窗口的哈希码。因此，在显示窗口时，该事件被多次引发。看起来旧的组合框没有被处理或类似的东西。希望你能理解我的问题。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T10:29:58.213

原因是您正在使用绑定，并且在关闭窗口后它仍在工作。然后您在一个窗口中更改所选项目，它正在通过绑定更改另一个窗口（已关闭）中的所选项目。要解决此问题，您应该在关闭的窗口中设置 DataContext = null。或者你可以每次都使用同一个窗口，只是不关闭它，而是隐藏它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:58:43.553

为组合框命名并从代码而不是 XAML 订阅 SelectionChanged。在窗口关闭时，取消订阅该事件以确保它得到处理。

```
<ComboBox Name="MyComboBox"....... /> 
```

然后在代码中：

```
protected override void OnSourceInitialized(EventArgs e)
{
    MyComboBox.SelectionChanged += ComboBoxSelectionChanged;
}

protected override void OnClosing(CancelEventArgs e)
{
    MyComboBox.SelectionChanged -= ComboBoxSelectionChanged;
} 
```

您是每次都使用 new Window() 创建窗口，还是单例？确保以相同的方式从您订阅的所有事件中取消订阅。否则，您关闭的窗口将永远不会被释放。

# javascript - 如何使用 JavaScript 开发 Eclipse RCP、Eclipse 插件？

> ID：15700539
> 
> 赞同：0
> 
> 时间：2013-03-29T09:24:59.980
> 
> 标签：javascript, eclipse-plugin, eclipse-rcp

如何使用 JavaScript 开发 Eclipse RCP、Eclipse 插件？

我知道[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)运行时基于[Equinox](http://en.wikipedia.org/wiki/Equinox_%28OSGi%29)并且完全用 Java 实现。

问题是**JavaScript 代码在多大程度上可以用于**开发 Eclipse RCP、Eclipse 插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:29:29.743

我想你正在寻找[犀牛](https://developer.mozilla.org/en-US/docs/Rhino)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:54:15.070

使用现有的 RCP 基础架构，我认为编写本机小部件是不可能的。但是，您可以在内部创建一个带有浏览器的视图并使用 javascript（您需要一个网络服务器）。[有](http://www.vogella.com/blog/2009/12/21/javascript-swt/)一个小教程如何使用浏览器小部件。

远景：您还可以看看 Eclipse RAP。他们使用 RCP 基础架构来创建 Web 应用程序。

另一种选择是使用代码到代码的转换（javascript 到 java）。

# jquery - 隐藏变量未发送到 php 文件

> ID：15700540
> 
> 赞同：0
> 
> 时间：2013-03-29T09:25:08.170
> 
> 标签：jquery, variables, hidden

我正在尝试将隐藏变量发送到 php 文件。由于某些原因，php 不接收这些变量。下面是旨在发送这些变量的代码。关于为什么它不起作用的任何想法？谢谢你的帮助。

```
 ////// For the form of training data
  // bind 'myForm1' and provide a simple callback function
       $('.myForm1').ajaxForm(options);

  // attach handler to form's submit event
       $('.myForm1').submit(function() {       // .myForm1 is a class so applies to all forms of this page

  // passing PK/FK as hidden value to php (drop down menu displays values, here I get the PK-PF via key and send them to php for upload)
  var sown=$('#selpersonO').find(":selected").attr('key');  // finds the value of key of the selected choice in the drop down menu. Key is sent back by the php code that send info to drop down menu
             //console.log(tmp);
             //console.log(this);
            $(this).append('<input/>').attr('type','hidden').attr('selpersonO',sown);  // makes key value as hidden and passed to the php form that uploads data
            //console.log( $('.myForm')) ;
  var saccess=$('#selaccess').find(":selected").attr('key');
            $(this).append('<input/>').attr('type','hidden').attr('selaccess',saccess);
  var scountry=$('#selcountry').find(":selected").attr('key');
            $(this).append('<input/>').attr('type','hidden').attr('selcountry',scountry);
  var sprod=$('#selpersonP').find(":selected").attr('key');
            $(this).append('<input/>').attr('type','hidden').attr('selpersonP',sprod);

  // submit $the form
     $(this).ajaxSubmit();
  // return false to prevent normal browser submit and page navigation
     return false;
     }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T09:28:16.197

您没有`name`为输入指定属性，因此它们不会添加到请求参数集中。尝试通过以下方式添加隐藏参数：

```
var saccess=$('#selaccess').find(":selected").attr('key');
$(this).append('<input/>')
       .attr('type','hidden')
       .attr('name', 'selaccess')
       .attr('value', saccess); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:28:38.460

在您的代码中：

`$(this).append('<input/>').attr('type','hidden').attr('selpersonO',sown);`

为元素（或所指的任何东西）`.attr()`设置了，而不是元素；返回您附加的元素，而不是新创建和附加的元素。`form``$(this)``input``.append()`

使用此表示法创建节点并设置它们的属性：

```
$(this).append(
    $('<input>', {
         type : 'hidden',
         selpersonO : sown,
         name : 'required', // YOU NEED TO SET NAME AND VALUE
         value : 'required' // FOR PHP TO RETRIEVE THEM
    })
); 
```

设置`value`属性而不是自定义命名属性。如果你真的需要使用自定义属性，你可以，但你必须在它们前面加上`data-`. 然后你可以使用 jQuery 的 .data(); 来访问它们。

```
<input type="hidden" id="test" name="test" value="3" data-key="44" /> 
```

通过 jQuery 处理：

```
var key = $('#test').data('key') // Get value of data-key
var key = $('#test').attr('data-key') // DON'T DO THIS. Will work, but use data()
$('#test').data('key', 'test') // Set value
var value = $('#test').val() // Gets the `value` attribute 
```

发送到 PHP 的只有`name`和`value`属性：

```
$val = $_GET['test'] // refers to `name` attribute. gets `value` attribute 
```

# c# - 是否可以在 windows phone 8 的键盘内添加完成按钮？

> ID：15700542
> 
> 赞同：2
> 
> 时间：2013-03-29T09:25:19.293
> 
> 标签：c#, windows-phone-8

目前我正在使用电话 8 应用程序，使用带有数字输入范围的文本框输入电话号码，用户输入电话号码，那么如何隐藏键盘？因为这里没有返回按钮，是否可以在键盘内添加完成按钮，请帮助我

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:34:44.470

要直接回答您的问题 - 您不能更改手机的键盘按钮（更改输入范围除外）

只需按照人员中心在您编辑电话号码时所做的操作 - 他们在应用程序栏中添加保存/取消/删除按钮。

# git - 从源代码中删除旧提交

> ID：15700548
> 
> 赞同：3
> 
> 时间：2013-03-29T09:25:41.507
> 
> 标签：git, extract, history

据我了解，每个 git commit 都会存储自上次提交以来对跟踪文件所做的更改。有没有办法让你从源代码中删除一个旧的提交？例如，如果您有一个文本文件

*文本文件.txt*

```
Text line one
More text line 
```

你继续承诺`git commit -m "Initial Commit"`

然后您再次编辑 textfile.txt

*文本文件.txt*

```
Text line one
More text line
Even more lines
Just one more line 
```

你继续承诺`git commit -m "Added new lines 2"`

然后，您进行了最终编辑

*文本文件.txt*

```
Text line one
More text line
Even more lines
Just one more line
These are the last lines
In this file 
```

并承诺`git commit -m "Added new lines 3"`

**有没有办法删除提交号 2 中的所有更改（“添加新行 2”），以便文件看起来像：**

*文本文件.txt*

```
Text line one
More text line
These are the last lines
In this file 
```

（请注意已删除的行`Even more lines`以及`Just one more line`在提交 2 中所做的更改）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T09:42:25.297

您可以使用 rebase 来做到这一点（您不需要交互式 rebase）：

```
git rebase HEAD --onto HEAD~2 
```

这基本上意味着：

从 HEAD 获取所有提交并进一步（因此提交），并将它们应用于父级的父级（您的第一次提交）。因此，父提交（您的第二次提交）被跳过。

前：

```
 HEAD
      |
A--B--C 
```

后：

```
A--B--C
 \
  C'
  |
 HEAD 
```

您的 HEAD 现在指向`C'`（原始 C 的副本），但`C'`现在`A`作为父级而不是`B`.

*编辑：*

从您对 Klas Mellbourn 的回答的评论来看，您似乎想要保留提交，但想要撤消它的更改。就是[`git revert`](http://jk.gs/git-revert.html)这样。

```
git revert HEAD~1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T02:33:05.657

其他答案（由 KlasMellbourn 和 Ikke 提供）删除了提交，“它从未发生过”。像这样重写历史并不好（但有时是必要的......）。您可以使用`git revert`（只需发出它以`--help`获取详细信息）创建一个新的提交来撤消旧的提交。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T09:36:35.323

进行交互式变基并删除该提交

```
git rebase -i HEAD~2 
```

这将在编辑器中向您显示两个提交的列表。完全删除您不想要的提交行。保存并关闭编辑器以完成变基。提交和更改将从您的可见历史记录中消失（原始提交仍在存储库中，但最终将被垃圾收集）

# javascript - Google Maps API - 地图未加载

> ID：15700550
> 
> 赞同：10
> 
> 时间：2013-03-29T09:25:43.273
> 
> 标签：javascript, html, google-maps, google-maps-api-3

我一直在尝试在我的网站中嵌入谷歌地图，但收效甚微。我使用了下一个代码部分：（我在我自己的计算机上使用了一个实际的 api 密钥）

```
<script type="text/javascript"
  src="https://maps.googleapis.com/maps/api/js?key=myapikey&sensor=true">
</script>
<script type="text/javascript">
  function initialize() {
    var mapOptions = {
      center: new google.maps.LatLng(-34.397, 150.644),
      zoom: 8,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map-canvas"),
        mapOptions);
  }
  google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

`<body>`我添加的内部部分`<div id="map-canvas" style="width: 40%; height: 40%"></div>`

我该如何处理这个问题？提前致谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-29T10:45:32.920

将画布的宽度和高度指定为绝对长度，而不是`%`.

例如 ：

```
<div id="map-canvas" style="width: 300px; height: 400px"></div> 
```

或者，坚持使用`%`画布，但将其放在宽度和高度指定为绝对长度的容器中。

```
<div style="width:1000px; height:800px;">
    <div id="map-canvas" style="width: 40%; height: 40%"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-27T12:41:01.683

如果您不想将大小固定为以 px 为单位的绝对宽度和高度，请确保所有父标签的高度为 100%

例如 html -> body -> some_ids -> map-id

它们都有以 % 为单位的高度和宽度

参考：[https ://developers.google.com/maps/documentation/javascript/tutorial](https://developers.google.com/maps/documentation/javascript/tutorial)

# c# - XNA 键盘西里尔文输入

> ID：15700551
> 
> 赞同：2
> 
> 时间：2013-03-29T09:25:51.167
> 
> 标签：c#, encoding, xna, keyboard-hook

我想增加在我的 XNA 游戏中输入西里尔字母的可能性。我不能使用默认 Input.KeyboardState 因为 Input.Keys 枚举只包含英文字母。因此，我使用键盘挂钩来处理 Windows 输入。但它返回键码，可用于英文字母（因为 ASCII 码与键码匹配），但不适用于西里尔字母。对于 "a-я" 可以使用 848 偏移量，但对于更具体的字母，如 "і" 或 "ї" 有不同的值。

*是否有有效的方法将键码转换为 ASCII 中的西里尔字母？或者也许有没有讨厌的键盘挂钩的解决方案？*

顺便说一句，这里的键盘挂钩类列表：

```
#region EventArgs

public class CharacterEventArgs : EventArgs
{
    private readonly char character;
    private readonly int lParam;
    private readonly int keyLayout;

    public CharacterEventArgs(char character, int lParam, int keyLayout)
    {
        this.character = character;
        this.lParam = lParam;
        this.keyLayout = keyLayout;
    }

    #region Properties

    public int KeyLayout
    {
        get { return keyLayout; }
    }

    public char Character
    {
        get { return character; }
    }

    public int Param
    {
        get { return lParam; }
    }

    public int RepeatCount
    {
        get { return lParam & 0xffff; }
    }

    public bool ExtendedKey
    {
        get { return (lParam & (1 << 24)) > 0; }
    }

    public bool AltPressed
    {
        get { return (lParam & (1 << 29)) > 0; }
    }

    public bool PreviousState
    {
        get { return (lParam & (1 << 30)) > 0; }
    }

    public bool TransitionState
    {
        get { return (lParam & (1 << 31)) > 0; }
    }

    #endregion
}

public class KeyEventArgs : EventArgs
{
    private Keys keyCode;

    public KeyEventArgs(Keys keyCode)
    {
        this.keyCode = keyCode;
    }

    public Keys KeyCode
    {
        get { return keyCode; }
    }
}

#endregion

#region delegats

public delegate void CharEnteredHandler(object sender, CharacterEventArgs e);
public delegate void KeyEventHandler(object sender, KeyEventArgs e);

#endregion

public static class EventInput
{
    #region events

    /// <summary>
    /// Event raised when a character has been entered.
    /// </summary>
    public static event CharEnteredHandler CharEntered;

    /// <summary>
    /// Event raised when a key has been pressed down. May fire multiple times due to keyboard repeat.
    /// </summary>
    public static event KeyEventHandler KeyDown;

    /// <summary>
    /// Event raised when a key has been released.
    /// </summary>
    public static event KeyEventHandler KeyUp;

    #endregion

    delegate IntPtr WndProc(IntPtr hWnd, uint msg, IntPtr wParam, IntPtr lParam);

    static bool initialized;
    static IntPtr prevWndProc;
    static WndProc hookProcDelegate;
    static IntPtr hIMC;

    static GameWindow gameWindow;

    #region constants

    const int GWL_WNDPROC = -4;
    const int WM_KEYDOWN = 0x100;
    const int WM_KEYUP = 0x101;
    const int WM_CHAR = 0x102;
    const int WM_IME_SETCONTEXT = 0x0281;
    const int WM_INPUTLANGCHANGE = 0x51;
    const int WM_GETDLGCODE = 0x87;
    const int WM_IME_COMPOSITION = 0x10f;
    const int DLGC_WANTALLKEYS = 4;

    #endregion

    #region Win32-functions

    //to handle input

    [DllImport("Imm32.dll")]
    static extern IntPtr ImmGetContext(IntPtr hWnd);

    [DllImport("Imm32.dll")]
    static extern IntPtr ImmAssociateContext(IntPtr hWnd, IntPtr hIMC);

    [DllImport("user32.dll")]
    static extern IntPtr CallWindowProc(IntPtr lpPrevWndFunc, IntPtr hWnd, uint Msg, IntPtr wParam, IntPtr lParam);

    [DllImport("user32.dll")]
    static extern int SetWindowLong(IntPtr hWnd, int nIndex, int dwNewLong);

    //to get keyboard layout

    [DllImport("user32.dll", SetLastError = true)]
    static extern int GetWindowThreadProcessId(
        [In] IntPtr hWnd,
        [Out, Optional] IntPtr lpdwProcessId
        );

    [DllImport("user32.dll", SetLastError = true)]
    static extern ushort GetKeyboardLayout(
        [In] int idThread
        );

    #endregion

    static ushort GetKeyboardLayout()
    {
        return GetKeyboardLayout(GetWindowThreadProcessId(gameWindow.Handle, IntPtr.Zero));
    }

    #region Initialize

    /// <summary>
    /// Initialize the TextInput with the given GameWindow.
    /// </summary>
    /// <param name="window">The XNA window to which text input should be linked.</param>
    public static void Initialize(GameWindow window)
    {
        if (initialized)
            throw new InvalidOperationException("TextInput.Initialize can only be called once!");

        gameWindow = window;

        hookProcDelegate = new WndProc(HookProc);
        prevWndProc = (IntPtr)SetWindowLong(window.Handle, GWL_WNDPROC,
            (int)Marshal.GetFunctionPointerForDelegate(hookProcDelegate));

        hIMC = ImmGetContext(window.Handle);
        initialized = true;
    }

    #endregion

    static IntPtr HookProc(IntPtr hWnd, uint msg, IntPtr wParam, IntPtr lParam)
    {
        IntPtr returnCode = CallWindowProc(prevWndProc, hWnd, msg, wParam, lParam);

        switch (msg)
        {
            case WM_GETDLGCODE:
                returnCode = (IntPtr)(returnCode.ToInt32() | DLGC_WANTALLKEYS);
                break;

            case WM_KEYDOWN:
                if (KeyDown != null)
                    KeyDown(null, new KeyEventArgs((Keys)wParam));
                break;

            case WM_KEYUP:
                if (KeyUp != null)
                    KeyUp(null, new KeyEventArgs((Keys)wParam));
                break;

            case WM_CHAR:
                if (CharEntered != null)
                {
                    CharEntered(null, new CharacterEventArgs((char) wParam, lParam.ToInt32(), GetKeyboardLayout()));
                }
                break;

            case WM_IME_SETCONTEXT:
                if (wParam.ToInt32() == 1)
                    ImmAssociateContext(hWnd, hIMC);
                break;

            case WM_INPUTLANGCHANGE:
                ImmAssociateContext(hWnd, hIMC);
                returnCode = (IntPtr)1;
                break;
        }

        return returnCode;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T14:28:59.737

您是否考虑过使用 Windows 窗体进行字符输入？我不会说俄语，但我只能假设 KeyPress 事件必须在俄语语言环境中正确处理 Cyrillic，而且它比自己发送 Windows 消息要简单得多。

```
using System.Windows.Forms;

...

var form = (Form)Form.FromHandle(window.Handle);
form.KeyPress += form_KeyPress;

...

private void form_KeyPress(Object sender, KeyPressEventArgs e)
{  
    Console.WriteLine(e.KeyChar);
    e.Handled = true;
} 
```

# sql - Varchar 的变量在我的 sql server 中的 UDF 中始终为 NULL

> ID：15700553
> 
> 赞同：2
> 
> 时间：2013-03-29T09:26:08.703
> 
> 标签：sql, sql-server-2008

我现在正在使用 SQL Server 2008 中的函数，我正在尝试编写类似的东西

```
 create function [dbo].[GetDaysStringForPivot](@date varchar(10))
   returns varchar(7000)
   as
  begin
declare @date_pivot varchar(3000)
declare @week varchar(10)
    set @week = 'week 15'
    set @date_pivot = @date_pivot + @week + @date

  return @date_pivot 
```

当我调用该函数时，返回值始终为空。通过调试我发现@date_pivot 没有分配任何东西。奇怪的是，如果我在这里添加一个语句，它可以正常分配

```
 set @date_pivot = ''
  set @date_pivot = @date_pivot + @week + @date 
```

有谁知道为什么？

感谢您的通知

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:35:10.420

这是因为您要连接到一个空值，您需要分配`@date_pivot`一些东西或者您可以`SET CONCAT_NULL_YIELDS_NULL OFF`（您不能在函数中这样做）。

```
When you concatenate null values, either the concat null yields null setting of 
sp_dboption or SET CONCAT_NULL_YIELDS_NULL determines the behavior when one expression 
is NULL. With either concat null yields null or SET CONCAT_NULL_YIELDS_NULL enabled ON,
'string' + NULL returns NULL. If either concat null yields null or 
SET CONCAT_NULL_YIELDS_NULL is disabled, the result is 'string'. 
```

*   [字符串连接](http://msdn.microsoft.com/en-us/library/aa276862%28v=sql.80%29.aspx)
*   [CONCAT_NULL_YIELDS_NULL](http://msdn.microsoft.com/en-us/library/aa259202%28v=sql.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:12:03.080

用 NULL 连接值始终为 NULL。

解决方法：

```
declare @date_pivot varchar(3000) = '' 
```

或者

```
set @date_pivot = @week + ISNULL(@date, '') 
```

# xml - 在 indesign 中使用 xml 文件定位和调整大小框

> ID：15700554
> 
> 赞同：1
> 
> 时间：2013-03-29T09:26:10.247
> 
> 标签：xml, adobe-indesign

我有一个网站，可以用 div 制作地图，将 div 的位置和大小从数据库中提取出来，然后使用 jquery 构建到大小和位置。现在我想通过导出一个 xml 文件来制作一个可打印的版本，然后我可以将其导入到 indesign 中以获得与在浏览器窗口中相同的结果。基本上 xml 文件会生成盒子和位置，并像 web 版本一样缩放它们，然后在 indesign 中

网页版如下所示： ![在此处输入图像描述](../Images/0eb2182945302d13e05ea406a697d149.png)

我一直在谷歌搜索，试图找到与我试图完成的类似的事情，但我找不到任何关于如何在 indesign 中构建盒子以及使用 xml 文件定位和缩放它们的任何内容。因此，如果有人能带领我朝着正确的方向前进，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:45:21.637

我想看看 InDesign 的 IDML 功能。IDML 文件是压缩文件夹中的 XML 文件包。以下是一些 IDML 参考资料：

[IDML 文件格式规范](https://www.adobe.com/content/dam/Adobe/en/devnet/indesign/cs55-docs/IDML/idml-specification.pdf)

[IDML 手册](http://www.adobe.com/content/dam/Adobe/en/devnet/indesign/cs5_docs/idml/idml-cookbook.pdf)

InDesign 也有一些 XML 对象可以嵌入到 IDML 中或与 Javascripting DOM 一起使用，但我认为对于您的情况，尝试直接创建 IDML 文件会更容易，因为它很容易使用。您还可以查看导入仅包含一段 IDML 的 IDML 片段文件，而无需将其捆绑在 zip 文件中。

`Rectangle`尤其是查看可能是您正在寻找的元素。我在下面包含了一个示例 IDML 片段文件示例，当您导入它时会创建一个红色矩形。将其保存在带有`.idms`扩展名的文本文件中。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<?aid style="50" type="snippet" readerVersion="6.0" featureSet="257" product="8.0(370)" ?>
<?aid SnippetType="PageItem"?>
<Document DOMVersion="8.0" Self="d">
   <Color Self="Color/u13b" Model="Process" Space="CMYK" ColorValue="0 100 100 0"/>
   <Spread Self="uc6">
      <Rectangle Self="u133" StrokeWeight="0" FillColor="Color/u13b" ItemTransform="1 0 0 1 0 0">
         <Properties>
            <PathGeometry>
               <GeometryPathType PathOpen="false">
                  <PathPointArray>
                     <PathPointType Anchor="36.5 -359.5" LeftDirection="36.5 -359.5" RightDirection="36.5 -359.5" />
                     <PathPointType Anchor="36.5 -190.0" LeftDirection="36.5 -190.0" RightDirection="36.5 -190.0" />
                     <PathPointType Anchor="160.0 -190.0" LeftDirection="160.0 -190.0" RightDirection="160.0 -190.0" />
                     <PathPointType Anchor="160.0 -359.5" LeftDirection="160.0 -359.5" RightDirection="160.0 -359.5" />
                  </PathPointArray>
               </GeometryPathType>
            </PathGeometry>
         </Properties>
      </Rectangle>
   </Spread>
</Document> 
```

您可以通过在 InDesign 中制作对象、选择它们，然后将它们导出为 Snippet 文件或 IDML 文件来为自己创建更多示例。

# c# - 在 iOS 设备中启动应用程序时，Unity3d iPhone SQLite 数据库为空

> ID：15700556
> 
> 赞同：0
> 
> 时间：2013-03-29T09:26:15.590
> 
> 标签：c#, ios, database, sqlite, unity3d

我正在 Unity3d 游戏中创建数据库连接，并将其部署在 iOS 设备上。数据库连接工作正常，但我的数据库是空的，尽管我在启动前预先填充了它。

我正在使用 Unity 4.0.1 Pro 和我的 xCode 4.6 以及 C# 语言的代码。

这是我在 C# 中的代码

```
void Start ()
    {

        string connectionString;    

        if (Application.platform == RuntimePlatform.IPhonePlayer) {

            connectionString = "URI=file:" + Application.persistentDataPath + "/Database.db";

        } else {

            connectionString = "URI=file:Database.db";          

        }

        Debug.Log ("Connection String = " + connectionString);

        IDbConnection dbcon;
        dbcon = (IDbConnection)new SqliteConnection (connectionString);
        dbcon.Open ();

        Debug.Log ("Start DB");

        IDbCommand dbcmd = dbcon.CreateCommand ();

        string sql =
          "SELECT * from Test ";
        dbcmd.CommandText = sql;
        IDataReader reader = dbcmd.ExecuteReader ();

        while (reader.Read()) {
            Debug.Log ("IN WHILE");
            string FirstName = reader.GetString (0);

            // Print to Console
            Debug.Log (FirstName);
        }
        // clean up                                                                                                                                 
        reader.Close ();
        reader = null;
        dbcmd.Dispose ();
        dbcmd = null;
        dbcon.Close ();
        dbcon = null;

    } 
```

我在控制台中收到以下错误。

```
SqliteException: SQLite error
no such table: Test
  at Mono.Data.Sqlite.SQLite3.Prepare (Mono.Data.Sqlite.SqliteConnection cnn, System.String strSql, Mono.Data.Sqlite.SqliteStatement previous, UInt32 timeoutMS, System.String& strRemain) [0x00000] in <filename unknown>:0 
  at Mono.Data.Sqlite.SqliteCommand.BuildNextCommand () [0x00000] in <filename unknown>:0 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:08:17.583

android 和 IOS 的连接字符串是不同的，在你查询你的数据库之前，你需要这样做：

```
connectionString= "Data Source=" + Application.persistentDataPath + "/Database.db";

switch (Application.platform)
{
    case RuntimePlatform.IPhonePlayer:
         datasource = "Data Source=" + Application.persistentDataPath + "/Database.db";
         break;
    case RuntimePlatform.Android:
         datasource = "URI=file:" + Application.persistentDataPath + "/Database.db";
         break;
} 
```

在IOS中连接字符串应该是这样的“Data Source=xxxxxxxx”，所以你可以试试这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T05:46:06.993

最后我解决了这个问题。

实际上，当我在 iPhone 中运行应用程序时，我的预填充数据库存储到 unit3d.app 包中，并且我正在访问 Document 文件夹。所以它正在为 Document 文件夹创建一个新数据库，因此我的数据库是空的。

现在如何连接该预填充数据库：

我创建了一个函数，它将返回路径，直到 unity3d.app 并且函数在这里：

```
public static string GetiPhoneDocumentsPath ()
    { 

        string path = Application.dataPath.Substring (0, Application.dataPath.Length - 5); 
        return path; 
    } 
```

现在连接到数据库的最终代码：

字符串连接字符串；

```
 if (Application.platform == RuntimePlatform.IPhonePlayer) {

        connectionString = "URI=file:" + GetiPhoneDocumentsPath() + "/SqliteTestDB.db";

    } else {

        connectionString = "URI=file:SqliteTestDB.db";          

    }

    Debug.Log ("Connection String = " + connectionString);

    IDbConnection dbcon;
    dbcon = (IDbConnection)new SqliteConnection (connectionString);
    dbcon.Open (); 
```

如果有人对连接数据库有问题，那么他们可以联系我。

谢谢雅舍什。

# javascript - 如何检查项目属性并使用 jQuery 将其交换为图像？

> ID：15700559
> 
> 赞同：0
> 
> 时间：2013-03-29T09:26:24.233
> 
> 标签：javascript, jquery, if-statement, attributes

我有一个项目列表，每个项目都有一个包含位置列表的属性。

我基本上想做的是某种类型的“if 语句”（我假设）来检查“容器”属性，换出文本并用图像替换它。

因此，如果容器属性为“英国，西班牙”，我想说，如果容器属性等于“英国”，则删除文本并替换为英国国旗的图像。因此，如果属性包含多个位置，而不是文本，它将包含每个位置标志的图标。出于演示目的，我包括以下内容；

```
$('.location.container').attr('location'); 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:34:30.637

试试这个：[链接](http://codepen.io/anon/pen/ckjtJ)

**html:**

```
<div class="location-container" Location="Spain">
  <div class="text-container">United Kingdom, Spain</div>
</div>

<div class="location-container" Location="United Kingdom">
  <div class="text-container">United Kingdom, Spain</div>
</div> 
```

**JS**

```
$('.location-container').each(function(){

  if( $(this).attr('Location').toString().indexOf("United Kingdom")!=-1) {
   $(this).find('.text-container').text(  
   $(this).find('.text-container').text().replace('United Kingdom','<img src="http://northcyprusfreepress.com/wp-content/uploads/2011/06/flag_icon_uk.gif"/>'));
 //   $(this).find('.text-//container').html($(thi//s).find('.text-container').text());

  }
if($(this).attr('Location').toString().indexOf("Spain")!=-1) {

  $(this).find('.text-container').text(  $(this).find('.text-container').text().replace('Spain','<img src="http://www.images2.welproma.com/spain_flag_icon.png"/>'));

  }
   $(this).find('.text-container').html($(this).find('.text-container').text());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:36:27.603

尝试 ：

jQuery[数据](http://api.jquery.com/jQuery.data/)

HTML：

```
<span data-name = "United Kingdom" data-location = "Europe">XYZ</span>
<span data-name = "United States" data-location = "America">XYZ</span> 
```

Javascript：

```
var location = $('.location.container').data('location');
//similarly also get name = $('.location.container').data('name'); 

if(location === "United Kingdom"){
//replace flag
}
else{
//retain flag
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:39:26.730

```
<div class="location">
  <span class="text">United Kingdom</span>
</div>

$(".location").each{
  function(){
    var text = $(this).closest(".text");
    text.hide();
    var flagUrl = 'http://blabla/flags/' + text.text() + '.jpg'; 
    $(this).append('<img />').attr('src', flagUrl );
  }
} 
```

如果有多个位置，您还必须拆分“文本”，并对其进行迭代，但这应该可以帮助您入门。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T09:42:08.127

假设你有一张国家地图：

```
var flags = {
    "United Kingdom": "/images/uk.gif",
    "Spain": "/images/spain.gif"
}

$('.location.container').each(function() {
    var locations = $(this).attr('location').split(/,\s*/);

    for (var i = 0, n = locations.length; i < n; ++i) {
        $(this).append('<img src="' + flags[locations[i]] + '" />');
    }
}); 
```

# javascript - 调整输入字段的宽度

> ID：15700560
> 
> 赞同：0
> 
> 时间：2013-03-29T09:26:28.620
> 
> 标签：javascript

我有基本的 javascript prompt() 函数

```
function askUser() {

if(confirm('Are you sure you want to add this item?')) {
   if(prompt('How many of this would you like to order?', '')) {
...... 
```

我想要实现的是在屏幕上弹出提示消息时将输入字段的宽度调整为30px？用户只需输入一个数值或 2 个整数的数量。

还有我如何检查输入的值是否为整数？如果不是，我想提醒用户他输入了无效值。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:31:19.610

如果你真的想制作一个自定义对话框，你应该使用类似[http://jqueryui.com/dialog/](http://jqueryui.com/dialog/)的东西。你不能真正编辑确认（）；

要检查值是否为整数，您可以使用 parseInt() 或 parseFloat()
[http://www.w3schools.com/jsref/jsref_parseint.asp](http://www.w3schools.com/jsref/jsref_parseint.asp)

或测试输入数据是否仅包含数字：`inputData.match(/\d/)`

# actionscript-3 - actionscript 3.0 从加载的 swf 的自定义类中引用主 swf 的自定义类

> ID：15700569
> 
> 赞同：0
> 
> 时间：2013-03-29T09:27:03.567
> 
> 标签：actionscript-3

我正在编写使用单个“应用程序”swf 的教育软件，它加载外部“主题”swf 文件（包含特定于主题的库项目）。这些外部“主题” swf 文件中的每一个还利用自定义类来解决特定于主题的计算（例如 trigonometry.swf 主题文件的三角类）。

我希望 trigonometry.swf 的三角类能够引用存在于主“应用程序”swf 中的自定义类方法。如果有助于了解上下文，我希望从事三角学工作的用户能够输入认为正确的三角函数（sin、cos 或 tan）并“检查”以查看它们是否正确。“indicate_right_wrong”方法存在于主“应用程序”swf 的“grader”自定义类中（因此我对此类所做的任何更改都将在所有主题中更新）。那么...如何从外部加载的 swf 文件自己的自定义类中引用主 swf 的自定义类方法？

当我将“grader”自定义类导入每个“topic”swf 并直接引用它时，结果确实有效，但如果我对“grader”进行更改，我不想重新发布每个主题 swf “自定义类。因此，当它存在于主“应用程序”swf 中时，我试图让每个主题都能够引用“grader”自定义类。

当我尝试使用 parent 或 parent.parent 的变体时得到的错误是`property grader_class not found on flash.display.Stage`（对于 parent）和`Cannot access a property or method of a null object reference.`（当使用 parent.parent 时）。

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:44:11.837

您无法编译调用在正在编译的代码中找不到的方法的代码。但是，您可以通过评估方法来进行运行时调用。例如：

```
stage["myfunction"](args); 
```

然而，虽然您可以创建某种路径逻辑来引用您的方法，正如[George Profenza](https://stackoverflow.com/users/89766/george-profenza)指出的那样，如果您只是将函数侦听器传递给已调度的事件或方法调用，您的成功将会更高（并且更容易使用）。

例如，假设您有一个`CHECK_ANSWER`在用户输入答案时触发的自定义事件。您的`gradeAnswer()`函数（存在于“application.swf”中）需要在加载子“trigonometry.swf”后注册该事件。随后，数据将被传递。

但是，这可能并不理想，因为它可能导致子 SWF 由于父注册到子对象而无法从内存中正确卸载（必须首先删除所有注册）。

就个人而言，我建议创建一个用作应用程序目录的静态类。每个 swf 都会加载这个类，并根据需要列出它们的相关方法。例如：

```
package com.atriace {
    public class Directory {
        public static var methods:Object = {

        }
    }
} 
```

当 application.swf 加载时，它会使用您的评分函数填充方法对象。随后的子 swfs 也加载这个静态类，并期望找到您预先填充的等级方法。

**应用程序.swf**

```
import com.atriace.Directory;
Directory.methods["grade"] = gradeAnswer; 
```

**儿童.swf**

```
import com.atriace.Directory;
Directory.methods["grade"](answers); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:03:21.573

不知道是不是因为这种问题在 Stack Overflow 上已经回答过很多次了。无论如何，这是我的看法。

> 我希望从事三角学工作的用户能够输入认为正确的三角函数（sin、cos 或 tan）并“检查”它们是否正确。

我假设因为他们必须输入答案，所以你有一个输入文本框？另外，当他们回答后，他们按下按钮“提交”他们的答案？假设我在正确的路线上，我们可以这样做......

> 注意： answer_txt (string) = 用户在外部类中给出的答案，input_txt = 用户输入的文本字段

在主课上有类似的东西

```
import flash.display.Stage;
import flash.display.MovieClip;
import flash.events.*;

import ExternalClass; //your class file attached to relevant topic swf

public class Main extends MovieClip 
{
    private var _extClass = new ExternalClass(); //create reference to external Class

    public function Main() 
   {
    //Ref 1 means do that function when trigger event received from external class 
    stage.addChild(_extClass); //gives access to "stage" for ExternalClass.as
    _extClass.addEventListener("Check_Answer", indicate_right_wrong); //see Ref 1
   }

 private function indicate_right_wrong (e:Event)
{
 //your answer checking code. 
 //Access answer_txt variable from external class like example below
 //_extClass.answer_txt.text = " ";
} 
```

现在在外部类（Trigonometry.as??）中，您可以设置这样的东西。确保 answer_txt 存在 ( `public var answer_txt:String;`)..

```
public function  Question_1 () : void
{
 //your code for question + set submit button
 submit_BTN.addEventListener(MouseEvent.CLICK, send_Answer);
}

function send_Answer(e:MouseEvent):void 
{
 answer_txt = input_txt.text; //set input text as final answer
 trace("final answer is..." + answer_txt); //just to test it's there  

 dispatchEvent (new Event ("Check_Answer")); //Main class is waiting for this event (ref 1)
 trace ("event dispatched.." + dispatchEvent); //to confirm it was despatched
} 
```

# c# - 如何从后面的代码中获取属性的值？

> ID：15700571
> 
> 赞同：1
> 
> 时间：2013-03-29T09:27:11.130
> 
> 标签：c#, asp.net

我有一个复选框，负责显示/隐藏一个 div。我创建了一个自定义属性“myDiv”并将复选框负责的 div 的名称放在那里。

```
<asp:CheckBox ID="CheckBox1" myDiv="divRegisteration" myText=" הרשמה - " runat="server" AutoPostBack="true" Font-Size="18px" Font-Bold="true" Text=" הרשמה - הצג" OnCheckedChanged="CheckBox_CheckedChanged"/> 
```

当我尝试从后面的代码中获取 div 的名称时，出现错误：

```
 protected void CheckBox_CheckedChanged(object sender, EventArgs e)
    {
        if (((CheckBox)(sender)).Checked==true)
        {
            CheckBox chk = (CheckBox)(sender);            
            object div = chk.Parent.FindControl(chk.Attributes["myDiv"]); 
```

它没有找到属性“myDiv”。由于某种原因，它只找到 2 个我什至不知道它们来自哪里的属性。还有另一种获取自定义属性的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:34:23.093

您只能将属性设置为在客户端呈现，当 from is 时无法直接访问属性值（在服务器端）`POSTED`。要访问属性值，您可以使用可以通过javascript在客户端设置的隐藏字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:48:33.087

您可以通过使用 jquery 来做到这一点

```
if ($('#CheckBox1').is(':checked')) {

    $("#Urdiv").show();
} else {
    $("#Urdiv").hide();
} 
```

在 CheckBox1 使用 clientId

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-19T11:18:19.343

是的，您可以从后面的代码中获取属性的值。例如，如果您有一个这样的复选框控件：

```
<input type="checkbox" runat="server" id="chkBoxCreate" class="item" itemid="1" onclick="Create();" /> 
```

然后你可以在下面的代码中得到它的值：

```
string itemId = chkBoxCreate.Attributes["itemid"]; 
```

享受 ：）

# php - 装饰盒与否？

> ID：15700572
> 
> 赞同：2
> 
> 时间：2013-03-29T09:27:13.630
> 
> 标签：php, design-patterns

我有一个合同“ArticleStorage”，每个存储都必须订阅才能对模型有效。没错，这不是问题，我的问题是：分页......或“结果修改”，在这种情况下**fetchAll**，我想修改它的行为但不添加参数等

```
<?php

interface ArticleStorage
{
    // public function insert();
    // public function update();
    // public function delete();
    public function fetchAll();
}

class MySQLArticleStorage implements ArticleStorage
{
    public function fetchAll()
    {
        // SELECT * FROM `articles`;
    }
} 
```

?>

我的模型是如何工作的。

```
class ArticlesModel
{
    public function __construct(ArticleStorage $storage)
    {

    }
} 
```

在这种情况下，我希望有一个“ArticleStorage”，但不知道给出了哪个“Storage”，真的……我想使用 Storage 进行分页或应用结果修改。

```
class MySQLArticleResultsModifier
{
    public function __construct(MySQLArticleStorage $storage)
    {

    }
    public function fetchAll() 
    {
        // ...
    }
} 
```

在分页的情况下，我如何修改 ArticleStorage fetchAll 并应用我修改后的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T06:36:28.783

是否存在您的模型要求可以在另一个 fetchall 之上进行 fetchall 的情况？我不这么认为，事实上这就是你决定是否需要装饰器的方式，通过自己回答这个问题

*   您正在考虑制作的装饰器功能是否像装饰品一样{就像真正的装饰品一样，您可以在圣诞树上放星星{decoration1}，同时在树上放一些玩具{decoration2}？否则，制作装饰器模式毫无意义，装饰器的本质是从外部装饰具体实现，并更改输出，而不受应用于具体实例的其他装饰的影响。

现在关于当前的实现，我认为@mrhobo 是非常正确的，你的 fetch 函数可能看起来像

```
public function fetch($limit, $order,$sort) 
```

一个非常智能的获取还可以期望用户发送一个键值哈希表，列名 = 列的值，您可以使用它即时进行自己的选择查询。

# delphi - 文件拖放不适用于 Lazarus 中的表单

> ID：15700573
> 
> 赞同：3
> 
> 时间：2013-03-29T09:27:17.723
> 
> 标签：delphi, lazarus

我在 TForm1.FormDropFiles 中遇到了一个非常奇怪的问题。

我附上了整个项目。我无法找到问题所在。

执行项目form1后显示系统托盘图标，当在form1上拖放文件时，显示文件名。这行得通。但是当从系统托盘调用 frmDrop 表单时 - 显示拖放平台菜单，并将文件拖放到 frmDrop 上，然后显示垃圾。

请查看项目和指南，看看我错过了什么。该项目附在下面。

[演示项目](https://www.dropbox.com/s/tmzim3ccfwwfqwc/demoproject.zip)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T14:47:01.533

formdrop 单元的顶部如下所示：

```
unit formdrop;

{$mode objfpc} 
```

但它应该看起来像这样：

```
unit formdrop;

{$mode objfpc}{$H+} 
```

默认情况`objfpc`下，字符串是短字符串。要使用长字符串，您需要添加`{$H+}`. LCL 是为长字符串编译的，因此您需要匹配它。如果您不这样做，那么您在`OnDropFiles`活动中收到的字符串与 LCL 发送给您的字符串不匹配。

# silverlight - 将 Silverlight 5 Web 应用程序屏幕截图保存到磁盘

> ID：15700577
> 
> 赞同：0
> 
> 时间：2013-03-29T09:27:39.203
> 
> 标签：silverlight, screenshot

我想从基于 Web 的 Silverlight 5 应用程序中截取屏幕截图并将其保存在磁盘上，我有哪些选择？我搜索了很多，但没有发现任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:32:04.823

[这](http://www.silverlightshow.net/items/Capturing-a-Silverlight-Screen.aspx)似乎捕获并将其保存到磁盘

**捕获**

```
 // create a WriteableBitmap

 WriteableBitmap bitmap = new WriteableBitmap(

     (int)this.LayoutRoot.ActualWidth,

     (int)this.LayoutRoot.ActualHeight);

 // render the visual element to the WriteableBitmap

 bitmap.Render(this.LayoutRoot, this.transform);

 // request an redraw of the bitmap

 bitmap.Invalidate(); 
```

**节省**

```
 private void ThumbnailClicked(object sender, MouseButtonEventArgs e)

 {

     // pause the capture timer

     this.timer.Stop();

     try

     {

         // locate the WriteableBitmap source for the clicked image

         WriteableBitmap bitmap = ((Image)sender).Source as WriteableBitmap;

         if (null == bitmap)

         {

             MessageBox.Show("Nothing to save");

             return;

         }

         // prompt for a location to save it

         if (this.dialog.ShowDialog() == true)

         {

             // the "using" block ensures the stream is cleaned up when we are finished

             using (Stream stream = this.dialog.OpenFile())

             {

                 // encode the stream

                 JPGUtil.EncodeJpg(bitmap, stream);

             }

         }

     }

     finally

     {

         // restart the capture timer

         this.timer.Start();

     }

 } 
```

# android - 无法在列表视图中显示图像

> ID：15700579
> 
> 赞同：1
> 
> 时间：2013-03-29T09:27:48.240
> 
> 标签：android, listview, imageview

我无法显示图像，但会显示文本。

我已将代码从[http://mobile.dzone.com/news/android-tutorial-how-parse](http://mobile.dzone.com/news/android-tutorial-how-parse)修改 为下面的代码。

我宁愿只使用 SimpleAdapter 。这可能吗？因为我在任何地方都实现了与下面相同的代码。

或者对下面的代码稍加修改就可以了。

如何显示图像？

```
public class MainActivity extends ListActivity {

    ArrayList<HashMap<String, String>> mylist;
    SimpleAdapter adapter;

    ProgressDialog pd ;
     ListView lv;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listplaceholder);

        mylist = new ArrayList<HashMap<String, String>>();

        new loadingDisplayClass().execute();
    }

    public class loadingDisplayClass extends AsyncTask<String, Integer, String> {

        protected void onPreExecute() {
             pd = new ProgressDialog(MainActivity.this);
            pd.setTitle("Loading......");
            pd.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            pd.show();

        }

        @Override
        protected String doInBackground(String... params) {
            // TODO Auto-generated method stub

            String url = "https://itunes.apple.com/us/rss/topalbums/limit=50/json";

            JSONObject json = JSONfunctions.getJSONfromURL(url);

            try {
                JSONObject arr2 = json.getJSONObject("feed");
                JSONArray arr = arr2.getJSONArray("entry");

                for (int i = 0; i < arr.length(); i++) {
                    JSONObject e1 = arr.getJSONObject(i);

                    JSONArray jsar = e1.getJSONArray("im:image");

                    JSONObject jsname = e1.getJSONObject("im:name");
                    String name = jsname.getString("label");

                    JSONObject jso = e1.getJSONObject("im:artist");
                    String lbl = jso.getString("label");

                        JSONObject e12 = jsar.getJSONObject(0);

                    String icon = e12.getString("label");

                     HashMap<String, String> hashmapnew = new HashMap<String, String>();

                    hashmapnew.put("icons", icon);

                    hashmapnew.put("name", name);
                    hashmapnew.put("artist", lbl);

                    mylist.add(hashmapnew);

                    publishProgress(((int) ((i + 1 / (float) arr.length()) * 100)));

                }

            } catch (JSONException e) {

                Toast.makeText(getBaseContext(),
                        "Network communication error!", 5).show();
            }

             adapter = new SimpleAdapter(getBaseContext(), mylist,
                    R.layout.list, new String[] {
                            "icons","name","artist" },
                    new int[] { R.id.image,R.id.name,R.id.artist });

            return null;
        }

        protected void onProgressUpdate(Integer... integers) {

            pd.incrementProgressBy(integers[0]);

        }

        @Override
        protected void onPostExecute(String result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);

            setListAdapter(adapter);

            pd.dismiss();

               lv = getListView();

            lv.setTextFilterEnabled(true);
            lv.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {
                    @SuppressWarnings("unchecked")
                    HashMap<String, String> o = (HashMap<String, String>) lv
                            .getItemAtPosition(position);

                }
            });
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:46:51.160

> 我无法显示图像，但显示文本

图像不会显示，因为您只是将 url 传递给 SimpleAdapter。为了显示图像，您需要首先下载上面返回的 url 中的图像 service 。

您需要创建一个自定义适配器并通过下载它们来显示图像

下载每个图像并在 imageView 中显示图像需要很多时间，并且由于列表视图回收视图，您的图像将始终在列表滚动时下载。所以你需要做的是使用[-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader) 或者[Lazy List](https://github.com/thest1/LazyList)来提供自动下载和缓存图片。

# crystal-reports - 水晶报表中的准确 Y 定位 2008

> ID：15700582
> 
> 赞同：1
> 
> 时间：2013-03-29T09:28:06.960
> 
> 标签：crystal-reports, crystal-reports-2008

如果我在水晶报表 2008 中选择对象（文本框）的大小和位置，以设置 he x 和 y 位置。X 位置设置在准确位置，但未设置 Y 位置。Y 位置与我实际设置的位置略有不同。例如：x:5.25 ang y=0.07 保存后，它会自动将 y 轴重新定位为 0.083

# sass - SASS - 嵌套父选择器连接？

> ID：15700584
> 
> 赞同：2
> 
> 时间：2013-03-29T09:28:18.143
> 
> 标签：sass

好的，这是我想要得到的输出：

```
.class-1, .class-2, .class-3 {
    z-index: 1;
}

.class-1-et-cetera, .class-2-et-cetera, .class-3-et-cetera {
    z-index: 5;
} 
```

我想通过嵌套一个选择器并使用 SASS`&`来获取父选择器。所以我一直在尝试这样的事情（首先是SASS语法）：

```
.class-1, .class-2, .class-3
    z-index: 1
    &-et-cetera
        z-index: 5 
```

SCSS 语法：

```
.class-1, .class-2, .class-3 {
    z-index: 1;
    &-et-cetera {
        z-index: 5;
    }
} 
```

唯一的问题是，这不起作用。我尝试在`&`...之后弄乱文本，例如`&#{"-et-cetera"}`, `&#{-et-cetera}`, `& + "-et-cetera"`... 你明白了。

以为有可能，但似乎找不到。有什么办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T14:21:22.837

考虑利用元素可以有多个类的事实。

```
<div class="class-1 et-cetera"></div>
<div class="class-1"></div>
<div class="class-2 et-cetera"></div>
<div class="class-3"></div>
... 
```

* * *

```
.class-1, .class-2, .class-3
  z-index: 1

.et-cetera 
  z-index: 5 
```

这是较少的 CSS，使用 Sass 或其他方式。

如果你需要额外的特殊性，你总是可以像这样嵌套它：

```
.class-1, .class-2, .class-3
  z-index: 1
  &.et-cetera 
    z-index: 5 
```

这会给你：

```
.class-1, .class-2, .class-3 {
    z-index: 1;
}
.class-1.et-cetera, .class-2.et-cetera, .class-3.et-cetera {
    z-index: 5;
} 
```

### 编辑

如果你*真的*想用 Sass 来做，你可以这样做，我不建议这样做：

```
%class
  z-index: 1

%etc
  z-index: 5

@each $i in class-1, class-2, class-3
  .#{$i}
    @extend %class
  .#{$i}-et-cetera
    @extend %etc 
```

我认为只使用两个不同的类会更容易、更灵活且面向未来。

# android - Eclipse - Android 项目名称

> ID：15700600
> 
> 赞同：1
> 
> 时间：2013-03-29T09:30:10.850
> 
> 标签：android, eclipse

我正在基于数据库生成 Android 项目，其中包含创建新项目所需的所有数据。我的 Android 项目生成成功，但是当我将此项目文件夹导入到我的 eclipse 以生成“签名的 APK”文件时，eclipse 将所有项目命名为相同的名称（与启动器活动相同的名称）。有什么方法可以强制 eclipse 为每个项目命名与其他项目不同的项目名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:55:21.820

Eclipse 将每个导入的项目命名为启动器活动的名称。但是你可以在 Eclipse 中手动重命名你的项目，使用 context_menu->Refactor->Rename。

# javascript - 不一致的 ajax 加载/渲染

> ID：15700603
> 
> 赞同：1
> 
> 时间：2013-03-29T09:30:19.643
> 
> 标签：javascript, jstree

我已经使用 jstree 几个星期了，我的所有用户都报告了一个奇怪的不一致行为。

大多数情况下，使用 ajax 可以很好地渲染树。像这样： ![在此处输入图像描述](../Images/246298f5c129625a4983dd4d79fdfb23.png)

但有时它会在没有任何 + 或节点之间的链接的情况下呈现，如下所示： ![在此处输入图像描述](../Images/d61adf9103cbfe59d254b640f22f69eb.png)

一个简单的刷新 (F5) 通常可以解决我的问题，但一些用户报告即使在刷新后也无法渲染正常的树。

此外，加载标志（因为我使用的是 ajax）在无法正确呈现时是不同的，而是在标签中。

正常加载：

![在此处输入图像描述](../Images/6704720f737edffb99535f89555718ca.png)

无法正常加载时加载（绿色为 的样式）：

![在此处输入图像描述](../Images/8538157d304ef93f5e750eb1292cbaab.png)

有人遇到过这个bug吗？任何人都可以帮助我吗？

作为参考，这里是[jstree 论坛上的相同帖子](https://groups.google.com/forum/?fromgroups=#!topic/jstree/MGatIISpCjw)

# ios - 将 NSString 转换为 NSDate 会生成错误的值

> ID：15700607
> 
> 赞同：0
> 
> 时间：2013-03-29T09:30:36.580
> 
> 标签：ios, objective-c

目前我有一个 NSString 值，其中包含以下日期作为当前日期

```
(lldb) po self.currentDate
(NSString *) $5 = 0x002ca8d0 2013-03-29 
```

但是当我将此 NSString 转换为 NSDate 时，它​​显示错误的值

```
NSDate *myCurrentDate  = [dateFormatterForCurrentDate dateFromString:self.currentDate];

(lldb) po myCurrentDate
(NSDate *) $4 = 0x002cf030 2013-03-28 18:30:00 +0000 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T09:36:27.290

尝试使用此代码，以考虑本地时区....

```
NSDateFormatter *dateFormatterForCurrentDate = [[NSDateFormatter alloc] init];
[dateFormatterForCurrentDate setDateFormat:@"yyyy-MM-dd"];
[dateFormatterForCurrentDate setTimeZone:[NSTimeZone localTimeZone]];
NSDate *myCurrentDate  = [dateFormatterForCurrentDate dateFromString:self.currentDate]; 
```

希望这会有所帮助...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T09:36:12.037

设置此日期格式：

```
 [dateFormatterForCurrentDate setDateFormat:@"yyyy-MM-dd"]; 
```

并检查developer.apple.com 中的[日期格式化程序](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html#//apple_ref/doc/uid/TP40002369-SW1)

可能对你有用。

# java - 管理 jsp mvc 登录和注册表单

> ID：15700608
> 
> 赞同：0
> 
> 时间：2013-03-29T09:30:39.230
> 
> 标签：java, forms, jsp, model-view-controller, jakarta-ee

我有这个验证功能。它根据数据库验证登录表单。java是否测试表达式`username.isEmpty()`和`password.isEmpty()`两次？前者在 `if ((!username.isEmpty()) && (!password.isEmpty()))`，后者在

```
if(username.isEmpty())
    error.addError("username", "Username is mandatory.");
if(password.isEmpty())
    error.addError("password", "Password is mandatory."); 
```

?

是否有任何内部机制可以“存储”第一个测试的结果，避免重做相同的测试？我想保持性能，同时，我必须填充错误 bean。如果我想放置更多带有更多检查的字段，并使用正则表达式（例如注册表单），该怎么办？那个功能还会好吗？我要遵循的基本原则是：仅当我通过所有测试时才将 true 分配给标志（或输入一段代码）。否则，它将为假（默认情况下）。反之亦然（默认情况下标志为真，可能变为假）。

如果听起来不好，请随时纠正我的英语。谢谢。

```
public boolean validate(FormBean bean, FormErrorBean error)
    {
        // the validation flag
        boolean valid = false;

        if (bean instanceof LoginFormBean)
        {
            // check not null
            if (!bean.isEmpty())
            {
                String username = ((LoginFormBean) bean).getUsername();
                String password = ((LoginFormBean) bean).getPassword();

                if ((!username.isEmpty()) && (!password.isEmpty()))
                {
                    // create the DAO
                    UserDao uDao = new UserDao();

                    // check the user
                    valid = uDao.checkUser((LoginFormBean) bean);

                    // set the validation status of the bean
                    ((LoginFormBean) bean).setValid(valid);

                    // add the error, if any
                    if (!valid)
                        error.addError("Either the username is not valid or the password is wrong.");
                }
                else
                {
                    if(username.isEmpty())
                        error.addError("username", "Username is mandatory.");
                    if(password.isEmpty())
                        error.addError("password", "Password is mandatory.");
                }
            }
            else
            {
                // add the empty error...
                error.addError("Both the username and password are missing.");
            }
        }
        return valid;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:45:09.027

据我所知，测试表达式将运行两次。

如果您打算多次运行 username.isEmpty() 和 password.isEmpty()，您可以首先将它们存储为布尔值。从理论上讲，这可以为您节省少量开销。但是，鉴于您可能不需要多次获得该结果*，因此任何性能提升都可以忽略不计。*

如果您使用正则表达式添加更多独特的检查，我无法想象您需要重用他们的结果。我认为你的代码结构很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:46:03.473

> java 是否两次测试表达式 username.isEmpty() 和 password.isEmpty() ？

是的，如果您调用相同的方法 2 次。

> 是否有任何内部机制可以“存储”第一个测试的结果，避免重做相同的测试？

您可以尝试将结果存储到两个不同的布尔值（每个 1 位）：

```
boolean isPasswordEmpty = password.isEmpty();
boolean isUsernameEmpty = username.isEmpty(); 
```

并将它们用于您的测试。

> 如果我想放置更多带有更多检查的字段，并使用正则表达式（例如注册表单），该怎么办？那个功能还会好吗？

如果您想推动自己前进，请尝试使用 Spring Web 或 Apache Struts 进行表单验证和身份验证方法。

> 我要遵循的基本原则是：仅当我通过所有测试时才将 true 分配给标志（或输入一段代码）。否则，它将为假（默认情况下）。反之亦然（默认情况下标志为真，可能变为假）。

我认为您的下一步将是：“该死的，我需要的不仅仅是一面旗帜。我需要用户 ID、姓名和姓氏......”。因此，请尝试使用一些模式（例如 DTO 来存储您需要的内容并通过应用程序级别传输数据）。

我想建议您注意您的代码：

> if (!bean.isEmpty()), username.isEmpty() 等等

因为 NullPointerException 是可行的。在尝试访问它之前，您应该确保您的 Object 不为空。

希望有帮助，

再见

# iphone - 关于目标 c 中保留计数的多个问题

> ID：15700610
> 
> 赞同：-2
> 
> 时间：2013-03-29T09:30:48.407
> 
> 标签：iphone, ios, objective-c, ipad, retaincount

这是我的代码。

```
- (void)viewDidLoad{
    [super viewDidLoad];

    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(100, 100, 240, 280)];
    [view setTag:101];
    UIImageView *imgView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 10, 220, 260)];
    [view setBackgroundColor:[UIColor redColor]];
    [view addSubview:imgView];
    [self.view addSubview:view];
    [self getimageFromView:view];
    [view release];
    [imgView release];

    [self getimageFromView];
}

-(void)getimageFromView:(UIView *)view{
    for (UIView *view123 in [view subviews]) {
    if ([view123 isKindOfClass:[UIImageView class]]) {
        UIImageView *imgView = (UIImageView *)view123;
        imgView.image = [UIImage imageNamed:@"img.png"];
        NSLog(@"retain cnt 1 = %d",[imgView retainCount]);
    }
    }
}

-(void)getimageFromView{
    for (UIView *view in [self.view subviews]) {
    if (view.tag == 101) {
        for (UIView *view123 in [view subviews]) {
            if ([view123 isKindOfClass:[UIImageView class]]) {
                UIImageView *imgView = (UIImageView *)view123;
                imgView.image = [UIImage imageNamed:@"img.png"];
                NSLog(@"retain cnt 2 = %d",[imgView retainCount]);
            }
        }
    }
    }
} 
```

nslog 如下所示

```
retain cnt 1 = 3
retain cnt 2 = 2 
```

现在我的问题

```
1) Why UIImageView's object retain count is displayed like this ? 
2) Is that correct count ?
3) If yes how can i send the release message till it become 0 ?
4) Can I do like this ? Is this proper way ?

for(int i=0;i<[imgView retainCount];i++){
    [imageView release];
} 
```

我有很多这样的视图，并且必须对 UIImageView 进行操作，如图所示。我也收到内存警告，我的应用程序崩溃了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:54:30.150

的文档以`retainCount`“请勿使用此方法”声明开头。虽然这有点苛刻，但警告是存在的，因为很难解释其结果。

回答您的问题：

1）因为那是它当时的价值。值 3 表示在返回的那一刻，三个对象已经表达了对该对象的所有权权益，并且该所有权权益仍未完成*，但*这些对象可能已经表明他们希望通过发出一个取消该权益`autorelease`- 这是其中一个`retainCount`不应使用理由。

2) 计数在给出时总是正确的，但可能很难解释。

3）您**永远不会**尝试将计数减少到零，这与保留/释放模型完全不一致，并且会造成严重破坏或更糟。规则是，如果您创建它（使用 alloc，或名称中带有 create 或 copy 的方法）或保留它，那么您拥有所有权权益，并且必须将该所有权交给其他人或释放/自动释放该对象以取消所有权权益.

4）见3，你永远不会到这里。

您应该阅读有关保留/释放模型的文档并了解所有权。即使在 ARC 下，保留/释放是为您自动处理的，您也需要了解所有权。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:51:43.640

1) 之所以这样显示，是因为这是保留计数。
2) 是
3) 绝对不是
4) 请参阅 3 的答案

# git - Gitg 行为为 gitk --all

> ID：15700618
> 
> 赞同：3
> 
> 时间：2013-03-29T09:31:29.143
> 
> 标签：git, gitk, gitg

我从 gitk 切换到[gitg](https://git.gnome.org/browse/gitg/)以可视化我的 git 树。有一点我受不了。

假设我有两个分支 ( `dev`, `master`)，如下所示：

![在此处输入图像描述](../Images/81b28901621f68e6c1592e0ce8a91a4f.png)

每当我检查`master`可视化更改时：

![在此处输入图像描述](../Images/1e860f56c508e8c284bb83ae48037da6.png)

这意味着我当前所在的分支位于树的顶部。换句话说，我现在看不到`dev`分支。

这与默认行为相同`gitk`，但可以使用`--all`属性进行更改，这使其成为我想要的方式。可以使用 gitg 来实现吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T11:27:57.687

[该线程](https://mail.gnome.org/archives/gitg-list/2012-August/msg00000.html)[`gitg`](https://git.gnome.org/browse/gitg/)提到了以“所有分支”模式打开的可能性：

```
gitg -- --all 
```

它还提到它可能无法在当前版本中运行`gitg`（[错误报告](https://bugzilla.gnome.org/show_bug.cgi?id=681751)仍未确认）

正如[OP aGr](https://stackoverflow.com/users/494468/agr) [提到](https://stackoverflow.com/questions/15700618/gitg-behavouir-as-gitk-all#comment22303941_15702295)的，分支组合框中有一个选项“所有分支”：

![gitg所有分支](../Images/3c9ddbcf51561f453513e46440d44b66.png)

但这不是结帐后的持久选择。

# php - 如何在 zendFramework 2 中连接到数据库

> ID：15700626
> 
> 赞同：0
> 
> 时间：2013-03-29T09:32:32.133
> 
> 标签：php, zend-framework2

我在ZF2中找不到连接到数据库的位置，在哪里创建application.ini来设置所需的数据或在模块->引导方法中，请帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T01:06:28.107

正如其他人指出的那样，您可以将以下内容添加到您的`config/autoload/global.php`or`config/autoload/local.php`中。

```
'db' => array(
    'driver' => 'Pdo',
    'dsn' => 'mysql:dbname=mydb;host=localhost',
    'username' => 'root',
    'password' => '',
    'driver_options' => array(
        PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
    ),
), 
```

请注意，最好将敏感信息（例如密码）添加到`local.php`文件中。原因是版本控制软件应该忽略此文件，如果您使用 Zend Skeleton Application，则默认情况下 Git 会忽略此`.gitignore`文件。

要使用连接，您可以从服务管理器获取数据库适配器。例如，您可以在控制器操作中执行以下操作：

```
public function someAction() {
    $dbAdapter = $this->serviceLocator->get('Zend\Db\Adapter\Adapter');

    // Do something with the database adapter, e.g.:
    $dbAdapter->query('SELECT username FROM user WHERE id = ?', array(37));
} 
```

该[手册](http://framework.zend.com/manual/2.1/en/index.html#zend-db)应该让您开始了解如何使用数据库适配器执行查询；您可能会想要使用`Zend\Db\Sql`，所以上面只是一个示例。请注意，理想情况下，您最好不要直接在控制器中访问数据库（即执行数据库查询），但以上只是一个示例；如果您使用任何这些设计模式，将数据库适配器注入[数据访问层(DAL) 或服务层非常容易。](http://en.wikipedia.org/wiki/Data_access_layer)

上面发生的`Zend\Db\Adapter\AdapterServiceFactory`是调用了。发生这种情况是因为该类实现了`Zend\ServiceManager\FactoryInterface`，服务管理器会检查它（有关更多信息，请参阅[服务管理器的源代码](https://github.com/zendframework/zf2/blob/master/library/Zend/ServiceManager/ServiceManager.php#L867)）。

`Zend\Db\Adapter\AdapterServiceFactory`工厂从服务管理器[获取配置并读取 'db' key](https://github.com/zendframework/zf2/blob/master/library/Zend/Db/Adapter/AdapterServiceFactory.php#L25-L26)。然后将此配置（如第一个代码示例所示）传递给配置实例化数据库适配器`Zend\Db\Adapter\Adapter`的[构造函数。](https://github.com/zendframework/zf2/blob/master/library/Zend/Db/Adapter/Adapter.php#L80)

因此，您所要做的就是`db`在配置文件中的密钥下配置您的数据库连接，并使用服务管理器中的密钥获取它`Zend\Db\Adapter\Adapter`- 然后其余的会自动为您完成。

**编辑：**

确保您已`AdapterServiceFactory`在配置中启用上述功能。如果您使用的是 ZendSkeletonApplication，请在`config/autoload/global.php`.

```
return array(
    'service_manager' => array(
        'factories' => array(
            'Zend\Db\Adapter\Adapter' => 'Zend\Db\Adapter\AdapterServiceFactory',
        ),
    ),
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T09:37:13.813

配置（global.php 等）：

```
'db' => array(
  'driver' => 'Pdo',
  'dsn'            => 'mysql:dbname=mydb;host=localhost',
  'username'       => 'mydb',
  'password'       => '',
  'driver_options' => array(
      PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
  ), 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T09:44:19.620

转到目录：you_application_folder/config/autoload/

在 global.php 中

```
<?php
return array(
'db' => array(
  'driver' => 'Pdo',
  'dsn'            => 'mysql:dbname=mydb;host=localhost',
  'driver_options' => array(
      PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
  ),
);

?> 
```

in local.php //这里保存重要数据

```
<?php
return array(
'db' => array(
  'username'       => '*****',
  'password'       => '*****',
);

?> 
```

# python - Tkinter 菜单中的单选按钮

> ID：15700627
> 
> 赞同：3
> 
> 时间：2013-03-29T09:32:36.993
> 
> 标签：python, tkinter

**目标**

了解 Tkinter 菜单中的单选按钮如何工作

**代码**

我在选项菜单中有一个单选按钮，如下所示：

 `````
v = BooleanVar()

v.set(True)

options.add_radiobutton(label="change pop up", command =togglePopUp,variable=v,onvalue=True,offvalue=False)

````  ``togglePopUp`是一个函数，将变量的值`v`从更改`True`为，`False`反之亦然。主窗口已打开，此菜单稍后将添加到窗口中。这只是与单选按钮相关的代码片段。

**问题**

现在我的问题是当我按下单选按钮时（在运行代码之后）变量的值会被改变还是会调用函数 togglePopUp？如果将调用该函数，那么单选按钮的状态会怎样？单选按钮的状态会立即更新还是会有延迟？

**研究**

我从 effbot.org 的 Tkinter 书中了解了单选按钮和布尔变量。但我不相信它是如何工作的。我尝试了一个程序，但没有得到我想要的输出。所以我决定更深入地了解它是如何工作的。

**规格**python 2.7 Tkinter 8.5 Linux Mint 14

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T23:44:08.513

这两个动作都会发生。当您单击单选按钮时，首先变量将更改其值，然后`command`调用作为选项传递的事件处理程序（如果存在）。

您的示例也不起作用，因为`add_radiobutton`不允许`onvalue`and`offvalue`选项 - only `value`。``

# vb.net - 在 VB 中试图理解反射.. 或将字符串作为控件

> ID：15700630
> 
> 赞同：0
> 
> 时间：2013-03-29T09:32:46.297
> 
> 标签：vb.net, string, casting, controls

我正在查看关于反射的[https://stackoverflow.com/a/4132070/1529149](https://stackoverflow.com/a/4132070/1529149) ..

特别是这个

```
Public Sub setProperty(ByVal obj As Object, ByVal propName As String, ByVal newValue As Object)
    Dim prop As Reflection.PropertyInfo = obj.GetType().GetProperty(propName)
    If Not prop Is Nothing AndAlso prop.CanWrite Then
    prop.SetValue(obj, newValue, Nothing)
    End If
End Sub 
```

但我需要输入第一个变量作为字符串或动态的东西..

我看不到点设置

```
setProperty(FixedObject, "Dynamic Property", "Dynamic Results") 
```

什么时候它会更强大

```
setProperty("Dynamic Object", "Dynamic Property", "Dynamic Results") 
```

例如：

```
Dim billy As String = "Label"
Dim bob   As Integer = 1

setProperty(billy+bob, "Text", "Results") 
```

创建 Label1.Text = "results"

对获得类似的东西有任何帮助吗？（ps 我知道我可能必须在某处将 bob 转换为字符串，但我还是 VB 的新手）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:38:17.960

我不明白你为什么要使用反射，但这有效：

```
Public Class Form1
    Private Sub Form1Load(sender As Object, e As EventArgs) Handles Me.Load
        Dim billy As String = "Label"
        Dim bob As Integer = 1
        Dim label As Object = Me.Controls(billy & bob)
        SetProperty(label, "Text", "Results")
    End Sub

    Public Sub SetProperty(obj As Object, propName As String, newValue As Object)
        Dim prop As Reflection.PropertyInfo = obj.GetType().GetProperty(propName)
        If Not prop Is Nothing AndAlso prop.CanWrite Then
            prop.SetValue(obj, newValue, Nothing)
        End If
    End Sub
End Class 
```

# android - 使 Intent.ACTION_VIEW 接受多个 URI

> ID：15700631
> 
> 赞同：0
> 
> 时间：2013-03-29T09:33:05.043
> 
> 标签：android

我想启动一些接受地理坐标的应用程序（[http://developer.android.com/training/sharing/send.html](http://developer.android.com/training/sharing/send.html)）。问题是他们想要不同的 URI。

**示例**（伪代码）：

```
 Intent intent = new Intent(android.content.Intent.ACTION_VIEW);
            intent.addSomeUri("http://maps.google.com/maps/?daddr="+myAddress);
            intent.addSomeUri("http://someotherservice.com/?coordinates="+myLat+":"+myLng+"&address=myAddress"); 
```

编辑：当然，目标是让两个应用程序出现在同一个活动选择器中。 ![在此处输入图像描述](../Images/29e65c80aeef03ac3085306d88a64211.png)

**我怎样才能实现它？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:26:40.523

> 我怎样才能实现它？

每个呼叫`startActivity()`（或`startService()`其他）一次`Uri`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:07:59.570

您真的要启动每个应用程序吗？如果没有，你有更简单的方法

```
 Intent intent = new Intent(Intent.ACTION_VIEW);
 intent.setData(Uri.parse("geo:30.0, 120.0"));
 startActivity(intent); 
```

# java - 连接字符串中的绝对文件路径

> ID：15700633
> 
> 赞同：0
> 
> 时间：2013-03-29T09:33:07.127
> 
> 标签：java, concatenation, filepath

我需要在一个字符串中连接多个绝对文件路径。但是如果我使用字符，那可能是文​​件名或路径的一部分，字符串会被弄乱。可以使用哪种分隔符？

现在我使用 File.pathSeparator，对于 Windows 7，它是 ';'。但是这个字符可以是文件名的一部分。

[所以问题](https://stackoverflow.com/questions/3869594/semi-colons-in-windows-filenames)

[NTFS 文件路径中的分号是合法的。](http://msdn.microsoft.com/en-us/library/aa365247%28VS.85%29.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:39:18.767

您可以使用[File.pathSeparator](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#pathSeparator)：

> 系统相关的路径分隔符，为方便起见表示为字符串。该字符串包含一个字符，即[pathSeparatorChar](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#pathSeparatorChar)：
> 
> *系统相关的路径分隔符字符。该字段被初始化为包含系统属性 path.separator 值的第一个字符。此字符用于分隔作为路径列表给出的文件序列中的文件名。在 UNIX 系统上，这个字符是 ':'；在 Microsoft Windows 系统上它是 ';'。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:39:00.900

ASCII NUL 字符`\0`不能成为 Windows 或 Unix（包括 Mac）上路径名的一部分，因此您可能可以将其用作分隔符。

NUL 字符不能用于文件路径，因为它是 C 中的字符串终止符，并且这些操作系统的 API 被定义为使用字符串表示文件路径的 C 库。

如果您想使用可打印字符作为分隔符，则必须使用转义码方案。最简单的方法之一是将分隔符加倍：假设您使用 # 作为分隔符；要将路径添加到列表中，请将路径中已经存在的任何 # 替换为 ##。

# android - 为应用程序设置自定义内部存储要求 - android

> ID：15700637
> 
> 赞同：1
> 
> 时间：2013-03-29T09:33:18.913
> 
> 标签：android, installation, storage, customization

我正在开发一个应用程序，安装后将根据用户需要下载文件。

有没有办法设置android应用程序安装所需的自定义内部存储量？（将来可能需要的最大内存量，大于实际的 apk）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:25:17.660

> 有没有办法设置android应用程序安装所需的自定义内部存储量？

不，所有应用程序都具有相同的“未来可能需要的最大内存量，大于实际的 apk”，即“整个内部存储空间”。Android 中没有配额系统——任何应用程序都可以根据需要使用尽可能多的内部存储空间，直到内部存储空间用完为止。

# android - 带有链接等于 BaseURL 的 Android WebView loadDataWithBaseURL 工作不正确

> ID：15700639
> 
> 赞同：0
> 
> 时间：2013-03-29T09:33:23.207
> 
> 标签：android, webview, href

我将 HTML 加载到我的 WebView

```
this.webViewer.loadDataWithBaseURL(BASE_URL, completeNewsTemplate,
                "text/html", "UTF-8", null); 
```

其中 BASE_URL = " [http://www.example.ru](http://www.example.ru) " 我用它来加载带有相关图像 src 的图像的 WebView

如果在 HTML 源中我得到了类似的 href 链接

```
<a href="http://www.example.ru" target="_blank">Example</a> 
```

然后它只是重新加载当前的 webview，并且 target 属性确实为打开新窗口做任何事情。

如何让 webview 在新窗口中打开链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:39:56.403

这是解决方案。

如果您的链接等于基本 url WebView 认为您只想使用当前页面。

你可以试着抓住它

```
webViewer.setWebViewClient(new WebViewClient() {
            @Override
            public void onPageStarted(WebView view, String url, Bitmap favicon) {
                System.out
                    .println("DetailViewActivity.onCreate(...).new WebViewClient() {...}.onPageStarted()");
                    super.onPageStarted(view, url, favicon);

            }

            @Override
            public void onPageFinished(WebView view, String url) {
                            System.out
                    .println("DetailViewActivity.onCreate(...).new WebViewClient() {...}.onPageFinished()");
                super.onPageFinished(view, url);

            }

            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
            System.out
                    .println("DetailViewActivity.onCreate(...).new WebViewClient() {...}.shouldOverrideUrlLoading()");
                return false;

            }

        }); 
```

但是然后您单击 webView 中的链接，您永远不会被解雇**shouldOverrideUrlLoading**或**onPageStarted**仅**onPageFinished**与您的 base_url。

所以我的解决方案是用于基本 url 另一个没有**www**前缀的域。

例如，如果您的域 www.example.com 使用基本 url example.com

# c++ - 了解子集的总和

> ID：15700642
> 
> 赞同：4
> 
> 时间：2013-03-29T09:33:26.317
> 
> 标签：c++, algorithm, backtracking, subset-sum

我刚开始`Backtracking`在大学学习算法。不知何故，我设法为子集和问题制作了一个程序。工作正常，但后来我发现我的程序*并没有给出所有可能的组合*。

例如：目标总和可能有一百个组合，但我的程序只给出 30 个。这是代码。如果有人能指出我的错误是什么，那将是一个很大的帮助。

```
int tot=0;//tot is the total sum of all the numbers in the set.
int prob[500], d, s[100], top = -1, n; // n = number of elements in the set. prob[i] is the array with the set.
void subset()
{
    int i=0,sum=0; //sum - being updated at every iteration and check if it matches 'd'
    while(i<n)
    {
        if((sum+prob[i] <= d)&&(prob[i] <= d)) 
        {
            s[++top] = i;
            sum+=prob[i];
        }
        if(sum == d) // d is the target sum 
        {
            show(); // this function just displays the integer array 's'
            top = -1; // top points to the recent number added to the int array 's'
            i = s[top+1];
            sum = 0;
        }
        i++;
        while(i == n && top!=-1)
        {
            sum-=prob[s[top]];
            i = s[top--]+1;
        }
    }
}

int main()
{
    cout<<"Enter number of elements : ";cin>>n;
    cout<<"Enter required sum : ";cin>>d;
    cout<<"Enter SET :\n";
    for(int i=0;i<n;i++)
    {
        cin>>prob[i];
        tot+=prob[i];
    }
    if(d <= tot)
    {
        subset();
    }
    return 0;
} 
```

当我运行程序时：

```
Enter number of elements : 7
Enter the required sum : 12
Enter SET : 
4 3 2 6 8 12 21

SOLUTION 1 : 4, 2, 6
SOLUTION 2 : 12 
```

虽然 4、8 也是一种解决方案，但我的程序并没有显示出来。输入数量为 100 或更多时，情况更糟。至少会有 10000 个组合，但我的程序显示 100 个。

我试图遵循的逻辑：

1.  只要子集的总和保持小于或等于目标总和，就将主 SET 的元素纳入子集。
2.  如果将特定数字添加到子集总和使其大于目标，则不接受它。
3.  一旦它到达集合的末尾，并且没有找到答案，它就会从集合中删除最近使用的数字，并开始查看最近删除的数字位置之后的位置中的数字。（因为我存储在数组's'中的是主SET中所选数字的位置）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:38:02.000

可能有一个无堆栈的解决方案是可能的，但是实现回溯算法的通常（通常也是最简单的！）方法是通过递归，例如：

```
int i = 0, n;    // i needs to be visible to show()
int s[100];

// Considering only the subset of prob[] values whose indexes are >= start,
// print all subsets that sum to total.
void new_subsets(int start, int total) {
    if (total == 0) show();    // total == 0 means we already have a solution

    // Look for the next number that could fit
    while (start < n && prob[start] > total) {
        ++start;
    }

    if (start < n) {
        // We found a number, prob[start], that can be added without overflow.
        // Try including it by solving the subproblem that results.
        s[i++] = start;
        new_subsets(start + 1, total - prob[start]);
        i--;

        // Now try excluding it by solving the subproblem that results.
        new_subsets(start + 1, total);
    }
} 
```

然后你会从`main()`with调用它`new_subsets(0, d);`。递归一开始可能很难理解，但理解它很重要——如果上面没有任何意义，请尝试更简单的问题（例如递归生成斐波那契数）。

改为使用您给出的解决方案，我可以看到的一个问题是，一旦找到解决方案，您就会将其清除并开始从包含在此中的第一个数字右侧的数字中寻找新的解决方案解决方案（`top = -1; i = s[top+1];`暗示`i = s[0]`，并且有后续`i++;`）。这将错过以相同第一个数字开头的解决方案。你应该这样做`if (sum == d) { show(); }`，以确保你得到他们所有。

我最初发现您的内部`while`循环非常混乱，但我认为它实际上是在做正确的事情：一旦`i`到达数组的末尾，它将删除添加到部分解决方案中的最后一个数字，如果这个数字是数组中的最后一个数字，它将再次循环以从部分解决方案中删除倒数第二个数字。它永远不会循环超过两次，因为部分解决方案中包含的数字都在不同的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T12:47:10.067

由于步骤 1 中的“只要”子句，您要找到的解决方案取决于集合中条目的顺序。

如果你接受条目，只要它们没有让你超过目标，一旦你接受了例如'4'和'2'，'8'就会让你超过目标，只要'2'在你在'8'之前的集合，你永远不会得到'4'和'8'的子集。

您应该添加跳过添加条目的可能性（或将其添加到一个子集但不添加到另一个子集）或更改集合的顺序并重新检查它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T15:01:00.807

我没有详细分析算法，但让我印象深刻的是，你的算法没有考虑到这样一种可能性，即在有一个以数字 X 开头的解决方案之后，可能会有多个以该数字开头的解决方案。

第一个改进是避免`s`在打印解决方案后重置堆栈和运行总和。

# html - 中心 div 上的水平滚动

> ID：15700644
> 
> 赞同：0
> 
> 时间：2013-03-29T09:33:31.620
> 
> 标签：html, css, scrollbars

我有一个关于简单 HTML 和 CSS 的问题。首先，看这个插图：

![在此处输入图像描述](../Images/8fd41978957036e055ebdf079d041c41.png)

我正在制作一个包含多个背景图像的页面，每个背景图像的宽度：1600px（图片上的蓝色、粉红色和绿色）。

页面的主要区域（黄色）居中（边距：0 auto;），宽度：800px。

如果浏览器窗口小于中心区域（800px），我希望它是这样的，浏览器水平滚动条只出现。

任何想法如何做到这一点？

感谢您对糟糕的布局和颜色的任何帮助和抱歉；）

编辑：

到目前为止我做了什么：

我试图在包装器中制作典型的中心 div：

```
<div id="wrap">
  <div id="child"> 
```

* * *

```
#wrap{ width:1600px; }
#child{ width: 800px; margin: 0 auto;} 
```

但是，滚动自然会出现在整个 wrape div 中，我不知道从这里做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:41:24.157

像这样的东西

```
if ( $(window).width > 800 ){
    $("#thediv").css("overflow-x","hidden");
}
else{
    $("#thediv").css("overflow-x","scroll");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:46:21.700

**我认为是****可能****抛出** `position`

**像这样**

**HTML**

```
<div class="one"></div>
<div class="one2"></div>
<div class="one3"></div>

<div class="parent">
Hello i m cente div <br>
Hello i m cente div <br>Hello i m cente div <br>Hello i m cente div <br>Hello i m cente div <br>Hello i m cente div <br>Hello i m cente div <br>Hello i m cente div <br>Hello i m cente div <br>
</div> 
```

**CSS**

```
.one, .one2, .one3{
    height:200px;
}
.one{
    background:red;
}
.one2{
    background:green;
}
.one3{
    background:yellow;
}
.parent{
    background:blue;
    position:absolute;
    width:200px; // width according to your design
    left:50%;
    margin-left:-100px; // according to your width / 2 and define -margin
    top:0;

} 
```

**[现场演示](http://jsfiddle.net/xnJ4m/)**

# jquery - jquery-mobile 是“移动优先”吗

> ID：15700648
> 
> 赞同：5
> 
> 时间：2013-03-29T09:33:52.583
> 
> 标签：jquery, jquery-mobile, web-applications, mobile

我已经阅读了 Luke WROBLEWSKI 的《Mobile first》一书以及有关该主题的许多其他读物。我是一名网络开发人员，现在我真的坚信“移动优先”或“渐进式增强”是要走的路。

现在我正在寻找一个框架来实现这一点。

JQuery mobile 宣布它们是“移动优先”，但我已经尝试了几天，现在我倾向于说“不，它不是”。您不能将其与其他框架混合使用；它确实有一些技巧，比如将所有页面保留在 DOM 中（使用 ajax 强制加载），所以它不会让我的生活更轻松。尝试使用它进行渐进式增强并通过桌面版本完成而不卸载它似乎是不可能的。我的意思是你不想在台式电脑上有大按钮，所以我想我只需要删除框架的 js&css，这听起来很奇怪。我什至不知道这是否可能。

JQuery mobile 看起来像一个框架，用于实现您网站的专用移动 Web 版本，其外观和感觉更像是原生应用程序，而不是移动优先网站。

所以请有人告诉我我错在哪里：* jQuery mobile 真的是“移动优先”吗？* 我可以使用 jquery mobile 进行渐进式增强（以桌面作为最后一个目标）吗？如果是，请告诉我如何。

这是相应的页面，告诉 jquerymobile 首先是移动设备：http: [//view.jquerymobile.com/1.3.0/docs/intro/#ProgressiveEnhancement](http://view.jquerymobile.com/1.3.0/docs/intro/#ProgressiveEnhancement)

我也尝试过 zurb 的基础，它运行良好，但没有提供足够的小部件或工具来提供漂亮的 mobiel UI。混合两者将是一个很好的点，但它需要很多工作（CSS冲突+可能是JS冲突），我什至不知道这是否可能。

欢迎任何关于如何在移动优先环境中使用 jquery mobile 的建议！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T12:25:49.190

# 基本理念

让我们从头说起，让大家明白，**移动优先**的定义是：

> 移动优先是指网站首先应针对移动设备设计，仅包括网站访问者最常使用的任务/项目。然后随着屏幕空间的增加，根据用户优先级根据需要添加任务/功能。

引用自[**这里**](http://mobilegovwiki.howto.gov/Mobile+First)。

# jQuery Mobile 的优缺点

根据我的经验，没有任何现有框架可以完全归类为**mobile first**。jQuery Mobile 已关闭但还不够。

首先，我同意您的说法，即 jQuery Mobile 不能与其他框架一起使用。jQM 是一个高度可定制的框架，它可以完全定制到几乎非常其他可用的框架。

如果您想使用骨干网或淘汰赛，可以将其定制为他们的 MVP 或 MVC 架构。如果您想将它与类似的框架一起使用，他们只使用您想要的 jQM[**功能**](http://jquerymobile.com/download-builder/)。你只需要谷歌它。

但是，我会不断重复，目前 jQM 不是一个好的“开箱即用”桌面开发平台。这就是事实。虽然它确实提供了适用于桌面浏览器的小部件，但它们看起来仍然像超大的移动小部件。

第二大缺点是他们的官方文档。虽然在某些部分非常详细，但它有大量错误、不存在的示例、缺乏 API 描述。看起来有人向您解释了什么是汽车，但忘记提及如何正确驾驶它。

# 好例子

这可以修复，不幸的是只能通过大量定制。根据定义，这不是**移动优先**框架。但是为了让我的观点更准确，这里有一个在移动/桌面环境中使用 jQM 的好例子：[**Mobile Songmeanings**](http://www.songmeanings.net/m)。尊重那些开发人员，他们在将移动设备与桌面合并方面做得非常出色。不幸的是，这只是平庸海洋中美丽的一滴水。

# 通用解决方案

最常见的解决此问题的方法是将 jQM 用于移动设备，将 jQ UI 用于桌面环境。我们还应该在这个组合中添加一个[Modernizer](http://modernizr.com/)，因为我们需要它：

*   将移动环境与桌面环境分开
*   根据检测到的环境创建动态内容加载器（js 和 css）

# 最后的想法

如果您想要简单*的开箱即用*解决方案，那么我不建议使用**jQuery Mobile**。需要几个月的学习、开发和测试，好的和坏的方面，如何将它与其他框架一起使用等等，才能完全理解它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-20T10:32:28.693

[Moff.js](http://moffjs.com) - Javascript 移动优先框架。它遵循所有移动优先技术和要求。您可以轻松创建移动首页。首先为移动设备创建页面，然后根据用户请求或通过将窗口扩展到平板电脑或台式机等大型设备来加载页面的其他部分。这是关于其功能的[文章。](http://moffjs.com/blog/why-mobile-first.html)

# php - 直接链接访问但通过 mysql/php 跟踪？

> ID：15700654
> 
> 赞同：0
> 
> 时间：2013-03-29T09:34:18.633
> 
> 标签：php, mysql, .htaccess

我有一个指向我想提供给访问者的文件的直接链接，例如：

```
http://www.mydomain.com/mynewmix.mp3 
```

当上面的链接被 ping/点击/下载时，有什么方法可以运行以下查询？

```
UPDATE `db` SET `downloaded`=`downloaded`+1 WHERE `url`='http://www.mydomain.com/mynewmix.mp3' 
```

非常感谢我能得到的任何帮助。非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:38:44.217

是的，这是可能的。您可以在 apache 中使用重写模块。所以你可以说对于所有（mp3）文件，服务器不应该返回mp3文件，而是运行一个php文件/脚本来执行你的查询并返回mp3文件。

这可能对您有所帮助：[http ://www.workingwith.me.uk/articles/scripting/mod_rewrite](http://www.workingwith.me.uk/articles/scripting/mod_rewrite)

在您的 .htaccess 文件中：

```
RewriteEngine on
RewriteRule ^\.mp3$ index.php [L] 
```

这会将所有以 .mp3 结尾的链接发送到 index.php（实际上它仍然是相同的链接，但 index.php 将被执行）

您还有其他选择：

```
RewriteRule ^.*/(\w)*\.mp3$ index.php?filename=$1 [L] 
```

这将使用带有文件名的 GET 可验证文件名执行 index.php，例如。`$_GET['filename'] = "filename"`（当文件：filename.mp3）

在 index.php 中让用户下载 mp3 文件（请参阅：[我可以使用 PHP 提供 MP3 文件吗？](https://stackoverflow.com/questions/1516661/can-i-serve-mp3-files-with-php)）：

```
header("Content-Transfer-Encoding: binary"); 
header("Content-Type: audio/mpeg, audio/x-mpeg, audio/x-mpeg-3, audio/mpeg3");
header('Content-length: ' . filesize("[file location eg: /home/files/sometrack.mp3]"));
header('Content-Disposition: attachment; filename="sometrack.mp3"');
header('X-Pad: avoid browser bug');
header('Cache-Control: no-cache');
readfile("[file location eg: /home/files/sometrack.mp3]");
exit(); 
```

您可以使用以下代码动态执行此操作：

```
$fileName = $_GET['filename']."mp3"; //we stripped .mp3 in the apache rewrite (might not be so smart)
$fileLocation = "/your/location/".$filename;
header("Content-Transfer-Encoding: binary"); 
header("Content-Type: audio/mpeg, audio/x-mpeg, audio/x-mpeg-3, audio/mpeg3");
header('Content-length: ' . filesize($fileLocation));
header('Content-Disposition: attachment; filename="'.$fileName.'"');
header('X-Pad: avoid browser bug');
header('Cache-Control: no-cache');
readfile($fileLocation);
exit(); 
```

您可以通过以下方式访问请求的链接：

```
$_SERVER['REQUEST_URI']; 
```

或新的（生成的网址）：

```
$_SERVER['REDIRECT_URL']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-03T20:47:07.207

我认为还有另一种方法可以满足您的要求：

1.  创建一个新的 php 文件“下载”以使用参数开始下载内容如下所示（日期和时间是获取我的 mp3 文件的关键）：

    ```
    <?php
        if (isset($_GET['date']) && is_string($_GET['date']) && isset($_GET['time']) && is_string($_GET['time']))
        {
            require_once($_SERVER['DOCUMENT_ROOT'] . "/bin/functions.php");
            DownloadFile($_GET['date'],$_GET['time']);
        }
    ?> 
    ```

2.  使用函数“DownloadFile”创建一个不同的 php 文件“functions.php”：

    ```
    function DownloadFile($Date,$Time)
    {
        require('connection.php');
        mysql_select_db($database, $instance);

        $qry = "
            UPDATE `table` 
            SET `Field1` = `Field1` + 1
            WHERE `Field2` = '$Date' AND `Field3` = '$Time'
            ";
        $result = mysql_query($qry, $instance) or die(mysql_error());

        header('Content-type: Application/mp3');
        header("Content-Length: " .(string)(filesize($file)));
        header('Content-Disposition: attachment; filename=' . $file);
        readfile($file); 
    ```

    }

3.  使用不同的 url 进行下载（无锚点）

[http://www.yoursite.com/xxx/download.php?date=2000-01-01&time=12:00:00](http://www.yoursite.com/xxx/download.php?date=2000-01-01&time=12:00:00)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:42:18.740

是的，你可以这样做。点击 url 需要调用 ajax 来运行更新查询，成功后继续下载文件。

# javascript - 结合两个csv（d3）

> ID：15700658
> 
> 赞同：1
> 
> 时间：2013-03-29T09:34:24.413
> 
> 标签：javascript, d3.js

我正在使用以下代码加载两个 csv 文件

```
 d3.csv("sqrt100train.csv", function(error, data2) {
    d3.csv("sqrt100test.csv", function(error, data) { 
```

sqrt100train 看起来像这样：

```
 Trees   Train
    1   0.059286
    2   0.057857
    3   0.032857
    4   0.03619
    5   0.022619 
```

sqrt100test 看起来像这样：

```
 Trees   Test
    1   0.072222
    2   0.072778
    3   0.044444
    4   0.049444
    5   0.042778 
```

我如何组合这些数组来得到这个：

```
 Trees   Train   Test
    1   0.059286    0.072222
    2   0.057857    0.072778
    3   0.032857    0.044444
    4   0.036190    0.049444
    5   0.022619    0.042778 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-12T03:30:03.420

问题：长度或X值不同

```
serie1
X,  Y
1,  11
3,  13
5,  15
6,  16

serie2
X,  Y
1,  21
2,  22
4,  24
6,  26
7,  27

BothSeries
X,  Y1, Y2
1,  11, 21
2,    , 22
3,  13, 
4,    , 24
5,  15, 
6,  16, 26
7,    , 27 
```

此代码修复它。

```
var serie1 = [];
var serie2 = [];
var BothSeries = [[null,null,null]];

function merge() {
    BothSeries = [];
    var i, j, aux;
    //copy serie1 a BothSeries
    if(serie1.length!=0){
        for (var i = 0; i < serie1.length; i++) {
            //null represent the serie2 value
            BothSeries[i] = [serie1[i][0], serie1[i][1],null];
        }
    }
    //set the value Y of serie2 in the BothSeries when their X are equals.
    if(serie2.length!=0){
        for (var i = 0; i < serie2.length; i++) {
            for (var j = 0; j < BothSeries.length; j++) {
                if(BothSeries[j][0] == serie2[i][0]){
                    BothSeries[j][2] = serie2[i][1];
                }
            }
        }
    }
    //set the value X and Y of serie2 in the BothSeries when their X aren't equals or doesn't exist.
    var cont=0;
    if(serie2.length!=0){
        for (var i = 0; i < serie2.length; i++) {
            for (var j = 0; j < BothSeries.length; j++) {
                if(BothSeries[j][0] != serie2[i][0]){
                    cont++;
                }
            }
            if(cont==BothSeries.length)
            {
                BothSeries[BothSeries.length] = [serie2[i][0],null,serie2[i][1]];
            }
            cont=0;
        }
    }
    //order with bubble method by X
    if(BothSeries.length!=0){
        for(i=0;i<BothSeries.length-1;i++){
            for(j=0;j<BothSeries.length-i-1;j++){
                if(BothSeries[j+1][0] < BothSeries[j][0])
                {
                    aux=BothSeries[j+1];
                    BothSeries[j+1]=BothSeries[j];
                    BothSeries[j]=aux;
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T10:06:41.420

如果要创建新数组：

```
var newArray = [];
for(var i = 0; i < data.length; i++) {
    newArray.push({Trees: data[i].Trees,
                   Train: data[i].Train,
                   Test: data2[i].Test});
} 
```

# javascript - AJAX ModalDialogBox IE 7 及更高版本不支持

> ID：15700664
> 
> 赞同：1
> 
> 时间：2013-03-29T09:34:47.937
> 
> 标签：javascript, ajax, internet-explorer-7

```
 I am trying to achive a ause functionality in javascript. 
```

我正在进行异步 AJAX 调用并尝试实现 AJAX 的同步功能。我想暂停 javascript，直到收到 AJAX 异步调用的 AJAX 响应。由于某种原因，我没有使用 AJAX 同步调用来解决我的问题。

一旦我打电话，我会使用以下两个函数来暂停 JS

```
function pause2(numberMillis) {
            var dialogScript = "window.setTimeout(" +
                               " function () { document.write(' '); window.close(); }, "
                               + numberMillis + ");";
            var result = window.showModalDialog('javascript.document.writeln(' +
                        '"<script>' + dialogScript + '<' + '/script>")');
 }

function pause3()
{

do
{
 if(lmsCommitTimeOut<9000){
 lmsCommitTimeOut=lmsCommitTimeOut+1000;    
 pause2(1000);
 }
 else
 {
   //alert("TimeOut"); 
   lmsCommitStatus="false"; 
   return;
 }

}while(readStateAchived=="false")

} 
```

我称之为 pause3(); 每 1 秒在内部调用 pause2(1000) 的函数，直到我得到 ajax 响应，我在 js 变量“readStateAchived”的帮助下检查。

这在 IE6 中运行良好，但在 IE7 中它弹出模式窗口并且没有关闭，我必须手动关闭它。

谁能帮我这个？

谢谢你。

# smartgit - 使用 smartgit 恢复对先前版本的更改？

> ID：15700668
> 
> 赞同：7
> 
> 时间：2013-03-29T09:35:17.763
> 
> 标签：smartgit

如何使用 smartgit 恢复对以前版本的更改？我在那里找不到选项

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-13T11:48:23.920

我想您想返回过去的提交之一。

单击窗口右侧的“日志”，然后选择要返回的提交并选择“签出”。旧版本现已签出。

![在此处输入图像描述](../Images/4db4b6447096217b72b5c0ef21920ac5.png)

然后您可以提交并推送该文件。

# c# - 如何在 C# 中用空格分割字符串？

> ID：15700669
> 
> 赞同：-3
> 
> 时间：2013-03-29T09:35:26.330
> 
> 标签：c#

我怎样才能用空格分割它。（第一行是它的标题）

![在此处输入图像描述](../Images/8510ba74194199edd98f02e665a94bbc.png)

我尝试此代码，但在 cbay.ABS = columnsC[5] 处出现错误“索引超出范围”，因为第二行仅返回 4 而不是第一行中的 6 个元素。我希望第二行也返回 6 个元素。

```
using (StringReader strrdr = new StringReader(strData))
{
    string str;
    while ((str = strrdr.ReadLine()) != null)
    {
        //  str = str.Trim();
        if ((Regex.IsMatch(str.Substring(0, 1), @"J")) || (Regex.IsMatch(str.Substring(0, 1), @"C")))
        {
            columnsC = Regex.Split(str, " +");
            cbay.AC = columnsC[1];
            cbay.AU = columnsC[2];
            cbay.SA = columnsC[3];
            cbay.ABS = columnsC[5];
            // cbay.ABS = str;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:49:54.427

为了只获得没有多余空格的单词，您可以将`StringSplitOptions.RemoveEmptyEntries`其作为`Split`方法的第二个参数传递`string`，如果将删除所有多余的“空格”，因为它将在每个空格上拆分。而不是使用正则表达式检查这个简单的例子：

```
string inputString = "Some string   with  words     separated with multiple    blanck   characters";
string[] words = inputString.Split(new char[] { ' ' }, StringSplitOptions.RemoveEmptyEntries);
string resultString = String.Join(" ", words); //joins the words without multiple whitespaces, this is for test only. 
```

**编辑**在您的特定情况下，如果您使用此字符串，其中部分用多个空格（至少三个）分隔，它将起作用。检查示例：

```
string inputString = "J   16   16   13   3   3";
string[] words = inputString.Split(new char[] { ' ' }, StringSplitOptions.RemoveEmptyEntries); 
```

**EDIT2**：这是解决您的问题的最简单和最愚蠢的解决方案，但我认为它会起作用：

```
if(str.Length>0 && ((str[0]=="J") || (str[0]=="C")))
{
   columnsC = str.Split(new char[] { ' ' }, StringSplitOptions.RemoveEmptyEntries);
   if((str[0]=="J")
   {
            cbay.AC = columnsC[1];
            cbay.AU = columnsC[2];
            cbay.SA = columnsC[3];
            cbay.ABS = columnsC[5];
   }
   else
   {
            cbay.AU = columnsC[1];
            cbay.SA = columnsC[2];
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:02:23.743

您可以首先用零替换多个空格，然后拆分剩余的单个空格；

```
 var test = "test 1 2    3";
        var items = test.Replace("  ", "0").Split(' '); 
```

如果有很多空格，你可能会得到一些 00 位置，但我猜这仍然有效

# php - 在magento的前端创建ajax更新选项卡

> ID：15700678
> 
> 赞同：0
> 
> 时间：2013-03-29T09:36:09.550
> 
> 标签：php, jquery, magento-1.7

我想为前端 magento 中的用户配置文件选项卡创建 ajax 更新选项卡，例如产品管理中的类别选项卡。我正在使用此代码：

```
<ul id="page_tabs" class="tabs"> 
    <li>
        <a id="page_tabs_account" class="tab-item-link ajax active" href="http://localhost/magento/customer/account/" name="account">Account Dashboard</a>
    </li>
    <li>
        <a id="page_tabs_account_edit" class="tab-item-link ajax notloaded" href="http://localhost/magento/customer/account/edit/" name="account_edit">Account Information</a>
   </li>
</ul>

<script>
    var FORM_KEY="<?php echo Mage::getSingleton('core/session')->getFormKey() ?>";
    var varienGlobalEvents=false;
    page_tabsJsTabs = new varienTabs('page_tabs', 'tabcontainer', 'page_tabs_account',[]);
</script> 
```

还要在 page.xml 中添加 js 文件，例如：

```
 <action method="addJs"><script>mage/adminhtml/tabs.js</script></action> 
```

当我们单击选项卡时，会调用 ajax，但返回数据是整个页面数据，如页眉、页脚、左侧边栏。我们只想要分配`.phtml`文件数据的特定选项卡（右侧栏）。

那么我们如何得到它。如果其他方法很简单，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T17:13:41.633

您需要创建一个处理 AJAX 布局的自定义控制器。

请注意，varienTabs 将获取`href`链接上设置的页面。拥有`http://localhost/magento/customer/account/`标签链接将使 varienTabs 只获取该 URL 的内容。

此外，您将需要特殊标记来发布内容。应该有一个 div，其 ID 由您的选项卡链接 ID + '_content' 的 ID 组成。例如：

```
<div id="page_tabs_account_content" style="display: none;"></div>
<div id="page_tabs_account_edit_content" style="display: none;"></div> 
```

**（编辑）**你也需要'tabcontainer' div。它是传递给 varienTabs 函数的第二个参数。只需将上面的 div 包裹在上面即可。

# sql-server - 解决 SQL Server 事务日志填满磁盘空间的最佳方法是什么？

> ID：15700680
> 
> 赞同：3
> 
> 时间：2013-03-29T09:36:14.990
> 
> 标签：sql-server, transaction-log

我需要尽可能短的最佳方式来处理 SQL Server 事务日志文件，因为我的磁盘将来在保存它们时会出现问题。我不知道如何解决这个磁盘空间不足的问题，因为我的驱动器的可用空间已经在 MB 中。

现在，我不知道如果将日志移动到其他驱动器是否会丢失或影响日志，或者如果磁盘空间已满，是否会影响事务或如何根据以前的事务保存未来的日志. 有人请帮忙！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T10:11:46.027

让我们首先从表中删除一些东西：**不要删除或移动任何数据库 mdf 或 ldf 文件**。您最终会损坏和丢失数据库。

1.  您需要调查日志增长的原因。去阅读[可以延迟日志截断的因素](http://msdn.microsoft.com/en-us/library/ms345414.aspx)。按照文章中的步骤确定日志增长的原因。

2.  如果原因不是“LOG_BACKUP”，请发布您发现的原因的更新，我们可以提供进一步的建议。

3.  如果原因**是**LOG_BACKUP，那么我们可以继续。您有一个未正确备份的非简单恢复模式的数据库。你需要回答一个问题：为什么数据库*不*处于 SIMPLE 恢复模式？这是一个商业决策问题，所以我们不可能知道答案。

4.  **如果**您不知道上述问题的答案，或者您意识到简单恢复模式是可以接受的，那么我们可以进行快速修复。将恢复模式更改为 SIMPLE，然后运行[​​DBCC SHRINKFILE](http://msdn.microsoft.com/en-us/library/ms189493.aspx)以收缩日志。

5.  **如果**您需要一个非简单的恢复模型，那么您需要设置一个适当的日志备份计划并开始进行日志备份。阅读[事务日志备份](http://msdn.microsoft.com/en-us/library/ms191429.aspx)并[使用维护计划向导](http://msdn.microsoft.com/en-us/library/ms191002.aspx)。请参阅[如何收缩 SQL Server 日志](http://rusanu.com/2012/07/27/how-to-shrink-the-sql-server-log/)以了解由于日志的循环性质，为什么需要重复日志备份直到 SHRINKFILE 生效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T13:09:37.073

首先，您应该阅读[Remus Rusanu 撰写的出色答案](https://stackoverflow.com/a/15701212/6884)。

一开始，他写道：

> 让我们首先从表中删除一些东西：**不要删除或移动任何数据库 mdf 或 ldf 文件。**您最终会损坏和丢失数据库。

澄清：**可以**将日志文件移动到另一个驱动器以释放当前驱动器上的空间。
只是当 SQL Server 正在使用数据库时，您不能/不应该只在 Windows 资源管理器中移动文件。

**免责声明：如果您按照 Remus 回答中的步骤进行操作，您可能不需要这样做。**

但是您仍然可能希望将日志文件移动到不同的驱动器。
出于性能原因*（如果数据库和日志文件位于两个不同的物理驱动器上，SQL Server 会更快，因为有大量写入日志文件）*，或者如果您仍然有磁盘空间问题*（即使您缩小日志文件或定期备份它，有一天数据库大小会增长，以至于驱动器太小而无法容纳两个文件）*。

要将日志文件（或数据库文件）移动到另一个位置，您需要：

1.  从 SQL Server 分离数据库
2.  移动文件
3.  重新附加数据库并指定新文件位置

这是两个带有屏幕截图的教程如何执行此操作：

*   [通过 TSQL 和 SSMS 将 SQL Server 事务日志文件移动到不同的位置](http://www.mssqltips.com/sqlservertip/1774/move-sql-server-transaction-log-files-to-a-different-location-via-tsql-and-ssms/)
*   [将 SQL Server 事务日志移动到另一个磁盘](http://geekswithblogs.net/jpl/archive/2011/06/20/move-sql-server-transaction-log-to-another-disk.aspx)

# php - 无法检索部分 uri（我正在研究 kohana）

> ID：15700683
> 
> 赞同：0
> 
> 时间：2013-03-29T09:36:28.700
> 
> 标签：php, uri

我有以下 uri`intranet/student/main/schedule` 我必须只取目录的名称`student`，但是当我尝试

```
basename($_SERVER['SCRIPT_NAME']); 
```

它返回`index.php`，当我尝试

```
basename($_SERVER['REQUEST_URI']); 
```

它返回`schedule`。我怎样才能采取只是`student`或至少`student/main/schedule`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:40:07.930

你可以得到这样的目录-

```
dirname('c:/Temp/x'); // returns 'c:/Temp' 
```

或者你可以试试这个——

```
<?php
$url = 'http://username:password@hostname/path?arg=value#anchor';
print_r(parse_url($url));
echo parse_url($url, PHP_URL_PATH);
?> 
```

它会给你

```
Array
(
    [scheme] => http
    [host] => hostname
    [user] => username
    [pass] => password
    [path] => /path
    [query] => arg=value
    [fragment] => anchor
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T00:43:24.877

试试这个....

```
$url = 'http://www.examplewebsite.com/intranet/student/main/schedule';
$parsed = parse_url($url);

$exploded = explode('/', $parsed['path']);
$directory = $exploded[2];

echo $directory; 
```

希望这可以帮助。

# ruby - 如何接口更复杂的共享库？

> ID：15700685
> 
> 赞同：3
> 
> 时间：2013-03-29T09:36:34.487
> 
> 标签：ruby, ctypes, ffi

我正在尝试在 Linux/Unix 系统上动态调用外部库的函数。

我在`dl`库方面取得了一些成功，但只有在使用原始 C 类型并且参数按值传递时：

```
require 'dl/import'
module LibM
  extend DL::Importer
  dlload 'libm.so'
  extern 'double sin(double)'
end

puts LibM.sin(3.14159265358979323846 / 2)    # 1.0 
```

但是，如果参数是存储调用结果的指针，如何使用更复杂的类型（如 C 结构）来接口函数？

```
module LibX11
  extend DL::Importer
  dlload 'libX11.so.6'
  extern 'Display *XkbOpenDisplay (char *display_name, int *event_rtrn, int *error_rtrn, int *major_in_out, int *minor_in_out, int *reason_rtrn)'
end 
```

`Display`是一个很大的结构，`event_rtrn`其中存储了一些结果等。

我查看了[DL::CStructBuilder](http://ruby-doc.org/stdlib-1.9.3/libdoc/dl/rdoc/DL/CStructBuilder.html)，它看起来可以完成这项工作，但由于文档非常简短并且没有找到工作示例，我在这里迷失了如何正确使用它。

我必须添加必须使用的标准 Ruby 1.9 模块（如果可能），因为禁止在目标机器上安装额外的 gem。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:03:13.527

在此期间，我面临着与 C 库的交互（我正在[为 libgtop 编写一个包装器](https://github.com/ProGNOMmers/gtop)），并且我选择使用[ffi](https://github.com/ffi/ffi)，它有[很好](https://github.com/ffi/ffi/wiki)的文档记录（尽管文档有时有点过时），最重要的是它的邮件列表是当你遇到困难时，到处都是帮助你的人。

所以我建议你一个使用 ffi 的解决方案：

```
require 'ffi'

module LibX11
  extend FFI::Library
  ffi_lib 'libX11.so.6'

  # Display *XkbOpenDisplay (char *display_name, int *event_rtrn, int *error_rtrn, int *major_in_out, int *minor_in_out, int *reason_rtrn)
  attach_function :XkbOpenDisplay, [:pointer, :pointer, :pointer, :pointer, :pointer, :pointer], :pointer

end 
```

然后你必须描述`Display`结构布局，就像写[在这里](https://github.com/ffi/ffi/wiki/Structs)：

```
class Display < FFI::Struct
  layout  :value,       :double,
          :other_value, :char,
          ...
end 
```

然后你做这样的事情：

```
p1 = FFI::MemoryPointer.new(:char)
p2 = FFI::MemoryPointer.new(:int)
p3 = FFI::MemoryPointer.new(:int)
p4 = FFI::MemoryPointer.new(:int)
p5 = FFI::MemoryPointer.new(:int)
p6 = FFI::MemoryPointer.new(:int)

# write to pointer if needed, otherwise it is a null pointer
# p1.write_char('a')
# p2.write_int(1)
# ...

struct_pointer = LibX11.XkbOpenDisplay(p1, p2, p3, p4, p5, p6)

# read the struct
struct = Display.new(display_struct_pointer)
p Hash[ s.members.map { |m| [ m, s[m] ] } ] 
```

我没有测试代码，但它应该大致正确。如果不是，现在让我来。

* * *

在对 ruby​​ 2.0 上的 DL 进行了一些研究之后，我发现它已被弃用并被 fiddle 取代，如果你不能使用 FFI，你会考虑使用它而不是 DL。Fiddle 似乎也可用于 ruby​​ 1.9.3 和 1.9.2

# actionscript-3 - ActionScript 3 - 检测从一个电影剪辑的注册点接触到许多其他电影剪辑的最近命中点

> ID：15700688
> 
> 赞同：0
> 
> 时间：2013-03-29T09:36:40.117
> 
> 标签：actionscript-3, flash-cs6

我有一个名为 ray 的影片剪辑。用户可以旋转光线影片剪辑。有周围的墙壁和一些物体 - 所有的电影剪辑。现在我想如果射线接触到任何墙壁或其他物体，它应该在那里结束。所以基本上我想用不同的物体检测光线电影剪辑的命中点，然后想计算离光线注册点最近的命中点。因此，我可以重新调整射线影片剪辑的大小。

我可以找到射线是否击中任何墙壁或其他物体。但不知道如何找到物体的接触点以及与射线原点的距离。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:06:25.347

当光线接触到物体时，您可以`hitTestPoint`与`for`循环和循环一起使用。`break`

`MovieClip`此外，使用 AS3 代码生成该射线。

以下链接显示了一个示例，（尽管您需要转换示例中的旋转光线以满足您的需要。）

[它显示了产生的光线和与物体的碰撞](http://www.google.co.in/url?sa=t&rct=j&q=active%20tuts%20laser&source=web&cd=1&cad=rja&sqi=2&ved=0CDMQFjAA&url=http://active.tutsplus.com/tutorials/actionscript/laser-generator-obstacles-and-accurate-hit-detection/&ei=i2VVUZaDG4SOrQfh9oBA&usg=AFQjCNELNpl-fhJ19xw60DtoG-DcuB1SIA)

谢谢。

# linux - shell 脚本应该在运行脚本时验证当前登录用户的密码

> ID：15700690
> 
> 赞同：0
> 
> 时间：2013-03-29T09:36:46.010
> 
> 标签：linux, shell, unix

运行我的脚本后，我将密码作为脚本的输入。

第一个脚本验证我给定的密码是否正确，然后脚本应该开始剩余的过程

在我的脚本中。

```
echo -n "Enter Password: "
stty -echo
read passwd
stty echo

#Here i want to evaluate $passwd having corresponding user's system password or not

# <Then some process start> 
```

# sql-server-2008 - sql查询获取记录数

> ID：15700691
> 
> 赞同：0
> 
> 时间：2013-03-29T09:36:56.957
> 
> 标签：sql-server-2008

我的表中有“结果”列。结果列包含以下三个值之一：通过、失败、未完成。我需要编写一个查询，它给出以下三个结果 1\. 通过记录的总数 2\. 失败记录的总数 3\. 不完整记录的总数

是否可以？如果是，请指导我写。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:40:51.820

```
SELECT  COUNT(CASE result WHEN 'Pass' THEN 1 END) AS passed,
        COUNT(CASE result WHEN 'Failed' THEN 1 END) AS failed,
        COUNT(CASE result WHEN 'Incomplete' THEN 1 END) AS incomplete
FROM    mytable 
```

# linux - Linux进程内存方案

> ID：15700694
> 
> 赞同：0
> 
> 时间：2013-03-29T09:37:08.037
> 
> 标签：linux, unix, memory-management, process, linux-kernel

AFAIK有一个存储内核相关数据的进程内存分区，它被标记为只读。

我找不到关于为什么会发生这种情况的事实解释，该区域的目的是什么以及为什么要将它包含在每个进程内存空间中？

![在此处输入图像描述](../Images/5fbafa7265caf3e99b68238fba5d6181.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T11:06:02.713

就像用户模式内存空间一样，内核需要自己的代码段 (RX)、数据段 (R/RW) 和线程堆栈帧 (RW)。

我不会说它需要包含在进程内存空间中，而是说它是内核始终驻留的地方。与在进程之间发生上下文切换时被替换的进程内存空间不同，内核空间（在 32 位中 >=0xC0000000 和在 64 位中 >=0xFFFFFFFF80000000）从整体上不会被替换。

这是必要的要求，因为系统上只有一个内核，并且它必须始终保持在内存（虚拟）中的同一位置，以处理系统调用、中断和运行各种内核任务。

# operating-system - 如何对虚拟地址空间进行分页？

> ID：15700704
> 
> 赞同：0
> 
> 时间：2013-03-29T09:38:12.870
> 
> 标签：operating-system, virtual-address-space

当我阅读这篇 Wikipedia 文章[http://en.wikipedia.org/wiki/Memory_management_unit#How_it_works](http://en.wikipedia.org/wiki/Memory_management_unit#How_it_works)时，我遇到了**将虚拟地址空间（处理器使用的地址范围）划分为页面**。但我了解到只有物理内存（RAM）被分成页面。那么进程的虚拟地址空间是如何划分的呢？

此外，这里虚拟地址空间的定义是处理器使用的地址范围。*处理器使用的地址范围是*指处理器*中地址总线的长度*，对吗？因此，如果我有一个 32 位地址总线的处理器和一个 4 GB (2^32) 的 RAM，我的物理地址空间和虚拟地址空间是否相同？

如果问题太天真，请耐心等待。我仍然没有得到非常清晰的地址空间可视化。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:53:46.193

答案是针对每个操作系统的，但一般来说，这意味着虽然每个进程都获得了价值 32 位的可寻址内存，但该内存空间被划分为一定大小的范围或页面。

简单地说，当您的进程访问地址时，该位置将位于某个页面中。操作系统将确保存在映射到该位置的物理内存。但是它可能不在物理内存中的相同地址中。

当一些其他进程寻址该位置时，操作系统将映射到物理内存的页面中，以便该位置也可以寻址。

物理内存页面一直被映射到磁盘和从磁盘映射（以便您可以拥有大于 32 位的内存值_\，并且虚拟内存页面被映射到刚刚描述的物理页面。

我真的建议阅读这个问题中的链接[https://stackoverflow.com/questions/1437914/best-book-on-operating-systems](https://stackoverflow.com/questions/1437914/best-book-on-operating-systems)

# qt - 使用 wheelEvent 缩放 GraphicsView

> ID：15700705
> 
> 赞同：0
> 
> 时间：2013-03-29T09:38:24.277
> 
> 标签：qt, qgraphicsview

我使用 wheelEvent 实现我的 QGraphicsView 的缩放

```
void View::wheelEvent(QWheelEvent *e)
{
    if (e->modifiers().testFlag(Qt::ControlModifier)){ // zoom only when CTRL key pressed

        int numSteps = e->delta() / 15 / 8;

        if (numSteps == 0) {
            e->ignore();
            return;
        }
        qreal sc = pow(1.25, numSteps); // I use scale factor 1.25
        this->zoom(sc);

        e->accept();
    }
} 
```

和缩放项

```
void View::zoom(qreal scaleFactor)
{

     scale(scaleFactor, scaleFactor);

} 
```

在这里我不想缩小得太深，我需要它来限制缩放到某个点，我必须限制缩小所以我试图找到变换点

```
qreal
View::zoomScale() const
{
    return transform().m11();
} 
```

但有了这个我不能限制缩放。请帮我找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:03:16.583

您可以计算相对于“正常缩放”的缩放因子并决定是否可以缩放。

例如，您可以参考 QRect 并在缩放后检查其大小：

```
void ClassA::scale(qreal scaleFactor) {
    QRectF(0, 0, 1, 1); // A reference
    qreal factor = transform().scale(scaleFactor, scaleFactor).mapRect(r).width(); // absolute zoom factor
    if ( factor > 20 ) { // Don't zoom more than 20x
        return;
    }

    this->scale(scaleFactor, scaleFactor);
} 
```

# android - 如何从 UnityPlayerActivity 打开透明活动？

> ID：15700713
> 
> 赞同：4
> 
> 时间：2013-03-29T09:39:01.673
> 
> 标签：android, android-activity, transparency, unity3d

我正在为 Unity3D 编写 Android 插件。我需要从 UnityPlayerActivity 打开我的自定义活动，使其透明并且游戏在后台可见。但是当我打开我的活动时，UnityPlayerActivity 变成黑色，所以我的背景是黑色的而不是透明的。我需要帮助如何在 Unity3D 中使用此透明度功能。

```
<activity android:name="com.example.activities.MyActivity" 
    android:configChanges="keyboardHidden|orientation" 
    android:theme="@android:style/Theme.Translucent.NoTitleBar.Fullscreen"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:59:21.840

使 Activity 透明的一种方便方法是指定

```
<activity
  ...
  android:theme="@android:style/Theme.Translucent.NoTitleBar" /> 
```

在 中`AndroidManifest.xml`，结合`ViewGroup`活动布局根的透明背景颜色。

如果您已经尝试过这个（或类似的活动透明度方法），请在您的问题中发布您尝试过的内容的描述，包括您的确切代码和相关的 XML 位。它将帮助每个人提供更具体的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-20T11:24:42.903

Unity Engine 特意添加了dim量，所以我们需要在activity的**onCreate**`Window`之后让它透明。

 **例如，

```
protected void onCreate(Bundle savedInstanceState) {
    Window window = getWindow();
    window.setDimAmount(0); //Making the window dim transparent
    window.addFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
} 
```**

# android - 在android中的位图中互换蓝色和红色通道

> ID：15700714
> 
> 赞同：2
> 
> 时间：2013-03-29T09:39:02.887
> 
> 标签：android, image-processing, bitmap, cocos2d-x

我正在使用以下代码从位图中获取像素数据，然后通过 JNI 将数组传递给 cocos2dx。当我在 cocos2d-x 中渲染图像时，红色和蓝色通道是相反的。有没有办法从像素的 int 值分别访问红色、蓝色通道，然后相互交换它们？

**JAVA代码**

```
 int[] pixels = new int[bitmap.getWidth() * bitmap.getHeight()];
    bitmap.getPixels(pixels, 0, bitmap.getWidth(), 0, 0, bitmap.getWidth(), bitmap.getHeight());
    int len = bitmap.getWidth() * bitmap.getHeight();
    onFacebookImageNative(pixels, len, bitmap.getWidth(), bitmap.getHeight(), bitsPerComponent); 
```

**JNI 代码**

```
JNIEXPORT void JNICALL Java_com_xxxx_yyyyo_yyyyo_onFacebookImageNative(JNIEnv* env, jobject,
    jintArray pixels, jint dataLen, jint width, jint height, jint bitsPerComponent)
{
yyyyo *yyyyo = yyyyo::singleton();

jint *jArr = env->GetIntArrayElements(pixels, NULL);
int pixelsInt[dataLen];
for (int i=0; i<dataLen; i++){
    pixelsInt[i] = (int)jArr[i];
}

yyyyo->onFacebookImage(pixelsInt, (int) dataLen,
        CCImage::kFmtRawData, (int) width, (int) height, (int) bitsPerComponent);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:59:15.620

好吧，可能是我问得太早了，没有太努力。

**JAVA代码**

```
 int[] pixels = new int[bitmap.getWidth() * bitmap.getHeight()];
    bitmap.getPixels(pixels, 0, bitmap.getWidth(), 0, 0, bitmap.getWidth(), bitmap.getHeight());

    int[] finalArray = new int[bitmap.getWidth() * bitmap.getHeight()];

    for(int i = 0; i < len; i++) {

    int red = Color.red(pixels[i]);
    int green = Color.green(pixels[i]);
    int blue = Color.blue(pixels[i]);
    finalArray[i] = Color.rgb(blue, green, red);//invert sequence here.
    }

    int len = bitmap.getWidth() * bitmap.getHeight();
    onFacebookImageNative(pixels, len, bitmap.getWidth(), bitmap.getHeight(), bitsPerComponent); 
```

如果有人有更好的答案，不涉及迭代每个像素，请在此处分享。

# java - Java 正则表达式“-[0-9]{0,}”似乎匹配“-abc”

> ID：15700717
> 
> 赞同：0
> 
> 时间：2013-03-29T09:39:10.503
> 
> 标签：java, regex

正则表达式：

```
"-[0-9]{0,}" 
```

细绳：

```
"-abc" 
```

根据[这里](http://www.regexplanet.com/advanced/java/index.html)的测试，这不应该发生。我假设我在代码中做错了什么。

代码：

```
public static void main(String[] args) {
    String s = "-abc";

    String regex = "-[0-9]{0,}";

    Pattern pattern = Pattern.compile(regex);
    Matcher matcher = pattern.matcher(s);
    while (matcher.find()) {
        if (matcher.group().length() == 0)
            break;

        // get the number less the dash
        int beginIndex = matcher.start();
        int endIndex = matcher.end();
        String number = s.substring(beginIndex + 1, endIndex);

        s = s.replaceFirst(regex, "negative " + number);
    }

    System.out.println(s);
} 
```

一些上下文：我使用的语音合成程序无法发音带有前导负号的数字，因此必须将其替换为“负”一词。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T09:41:27.610

```
-[0-9]{0,} 
```

表示您的 sting 必须有`-`，然后可能是**`0`或`more`**数字。

数字大小写`-abc`也是如此**`0`**

你没有指定，所以`^ and $`你的正则表达式匹配`foo-bar`甚至同样`lll-0``abc-`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T09:41:46.233

`{0,}`与 具有完全相同的含义`*`。因此，您的正则表达式的意思是“***可以****后跟数字**的破折号***” 。`-abc`包含破折号，因此可以找到该模式。**

 **`-\d+`应该更好地满足您的需求（不要忘记转义 java: 的反斜杠`-\\d+`）。

如果您希望整个字符串与模式匹配，请使用`^`and `$`:锚定您的正则表达式`^-\d+$`。**

# java - messagebodyreader 运动衫

> ID：15700720
> 
> 赞同：1
> 
> 时间：2013-03-29T09:39:21.963
> 
> 标签：java, web-services, jersey, jax-rs

我正在为restful webservice制作一个java客户端，我想在请求正文中发送一个字符串。

这是我的课。

```
 public class params {
    private String test;

  public String getTest() {
    return test;
  }

  public void setTest(String test) {
    this.test = test;
  } 
```

这是我的主要功能类。

```
 public class testclient implements MessageBodyReader<params> {
    public static void main(String[] args) {
        ClientConfig config = new DefaultClientConfig();
        Client client = Client.create(config);
        WebResource service = client.resource(getBaseURI());
        params pobj = new params();
        pobj.setTest("myname");
        System.out.println(service.path("interface").post(params.class);
     }

      private static URI getBaseURI() {
        return UriBuilder.fromUri("http://localhost:8080/ivrservices").build();
      }

    public boolean isReadable(Class<?> params, Type genericType, Annotation[] arg2,
            MediaType arg3) {
        return false;
    }

    public params readFrom(Class<params> arg0, Type arg1,
            Annotation[] arg2, MediaType arg3,
            MultivaluedMap<String, String> arg4, InputStream arg5)
            throws IOException, WebApplicationException {
        // TODO Auto-generated method stub
        return null;
    }
} 
```

我在默认函数中传递什么参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-24T09:27:56.150

看来您完全误读了**MessageBodyReader**的用法。它由**提供者**而不是客户端来实现。对于您的情况，不需要自定义提供程序。例如，您可以使用带有 POJO 功能的 Jackson Json 提供程序来发送/接收**参数**。因此，您的客户端配置将是：

`ClientConfig cc = new ClientConfig().register(JacksonFeature.class)`
**这会将参数**序列化为Json。不要忘记在服务器上注册**JacksonFeature**以反序列化请求。

如果您只想发送**测试**字符串，则不需要包装它。String 是**Jersey**中的默认实体类型。

# android - 无法在 Eclipse 中启动 android sdk 管理器

> ID：15700724
> 
> 赞同：2
> 
> 时间：2013-03-29T09:39:25.063
> 
> 标签：android, eclipse, sdk

我的 eclipse+android 安装成功，但在过去的几天里，我无法在 eclipse 中启动 android sdk manager

所以当我启动时，我得到：

```
[2013-03-29 14:45:00 - SDK Manager] [SDK Manager] 'D:/Program' is not recognized as an internal or external command,
[2013-03-29 14:45:00 - SDK Manager] [SDK Manager] operable program or batch file.
[2013-03-29 14:45:00 - SDK Manager] [SDK Manager] Invalid path 
```

我的日食版本是：

版本：Indigo Service Release 2 内部版本 ID：20120216-1857

操作系统：Windows 7（32 位）

我确实检查了我的环境变量，它显示：

D:\Java\jdk1.7.0_13\bin;D:\Android\android-sdk\tools

并且 AVD 运行良好，但有警告：

```
[2013-03-29 14:46:09 - SDK Manager] Warning: Ignoring platform 'android-1.5': build.prop is missing. 
```

（安装了 api 1.5，这样我就可以针对从 1.5 到 4.2.2 果冻豆的 ose 应用程序）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:49:10.457

您似乎已将 Android SDK 的位置更改为无效路径。尝试以下操作：`Window -> Preferences -> Android`并在`SDK Location`浏览包含 SDK 的文件夹下并单击`Apply`。确保所选文件夹中有一个名为`SDK Manager`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T11:06:36.450

通过将 java 路径重新设置为出现在 system32 路径之前使其工作，在`environment variables`.

可能是eclipse在我以前的位置（在system32，现在已经过时）搜索java

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-18T14:28:35.417

我遇到了同样的问题，但是通过将我的 eclipse 文件夹从“E 驱动器”移动到“C 驱动器”并且 SDK 管理器工作正常，我得到了很好的解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-20T03:42:52.580

该错误可能意味着 Android 正在“D:\Program Files\”下寻找某个文件夹，可能是 Java。也就是说，您可能在“D:\Program Files\”下安装了另一个Jre。

# python - 如何摆脱我的python输出中的“\ n”

> ID：15700726
> 
> 赞同：0
> 
> 时间：2013-03-29T09:39:29.093
> 
> 标签：python, string

```
u'The disclosure relates to systems and methods for detecting features on\n     billets     of laminated veneer lumber (LVL). In some embodiments, an LVL\n     billet is provided and passed through a scanning assembly. The scanning\n     assembly includes anx-raygenerator and anx-raydetector. Thex-raygenerator generates a beam ofx-rayradiation and thex-raydetector\n     measures intensity of the beam ofx-rayradiation after is passes through\n     the LVL billet. The measured intensity is then processed to create an\n     image. Images taken according to the disclosure may then be analyzed todetectfeatures on the LVL billet.' 
```

以上是我的输出。现在我想摆脱 Python 中的“\n”。

我怎么能意识到这一点？我应该使用 re 模块吗？我`text`用来代表上面所有的文字，`text.strip("\n")`完全没有用。为什么？

谢谢你！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T09:42:53.223

对于一个字符串, `s`, 做：

```
s = s.strip("\n") 
```

只会删除前导和尾随换行符。

你想要的是

```
s = s.replace("\n", "") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:45:32.720

你试过替换功能吗？

```
s = u'The disclosure relates to systems and methods for detecting features on\n     billets     of laminated veneer lumber (LVL). In some embodiments, an LVL\n     billet is provided and passed through a scanning assembly. The scanning\n     assembly includes anx-raygenerator and anx-raydetector. Thex-raygenerator generates a beam ofx-rayradiation and thex-raydetector\n     measures intensity of the beam ofx-rayradiation after is passes through\n     the LVL billet. The measured intensity is then processed to create an\n     image. Images taken according to the disclosure may then be analyzed todetectfeatures on the LVL billet.'

s.replace('\n', '') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:43:15.940

试试这个

```
''.join(a.split('\n')) 
```

a 是输出字符串

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-29T09:45:56.780

```
str = 'The disclosure relates to systems and methods for detecting features on\n     billets     of laminated veneer lumber (LVL).'
str.replace('\n', '')
' '.join(str.split()) 
```

输出

```
The disclosure relates to systems and methods for detecting features on billets of laminated veneer lumber (LVL). 
```

# jqgrid - 带有动态滚动的 jqGrid 内联编辑 - 滚动问题

> ID：15700740
> 
> 赞同：1
> 
> 时间：2013-03-29T09:40:26.087
> 
> 标签：jqgrid, scroll, jqgrid-inlinenav

我正在使用带有动态滚动的 jqGrid，我想使用带有`inlineNav`incl 的内联编辑。[Oleg](https://stackoverflow.com/users/315935/oleg)的[解决方案](https://stackoverflow.com/a/8518501/904846)使内联编辑最终变得有用。

我发现动态滚动有问题，因为并非所有行都被加载（和渲染）并且滚动时内联编辑方法出错。为避免出现问题，用户不能滚动：

*   选择行然后使用添加/编辑后无法滚动
*   即使不选择行也无法滚动，因为没有选择，`first`就会应用位置（第三个视频）
*   添加/编辑行时无法滚动（一种解决方案可能是暂时禁用滚动条）

链接：

*   演示：http: [//jsfiddle.net/dmnc_net/tNGJn/](http://jsfiddle.net/dmnc_net/tNGJn/)
*   滚动`beforeSelected`：http: [//youtu.be/osvwiykcuME](http://youtu.be/osvwiykcuME)
*   滚动`first`和`last`：http: [//youtu.be/Du_TBrlrzSI](http://youtu.be/Du_TBrlrzSI)
*   滚动而不单击任何行：http: [//youtu.be/pCzpk1SvQNA](http://youtu.be/pCzpk1SvQNA)

我使用了这些 addRow 位置设置`beforeSelected`：`first`和`last`; `before`并且`after`根本不工作。

我正在考虑通过修补`addRow`和`editRow`方法来解决这个问题，方法是告诉他们滚动位置并在用户滚动得太远并且卸载所选记录时处理加载/卸载的“页面”。但我不确定这是否可能，或者使用模式添加/编辑对话框会更好。

# razor - 如何在 razor MVC 4 中添加具有条件值的第二个 css 类

> ID：15700741
> 
> 赞同：184
> 
> 时间：2013-03-29T09:40:29.127
> 
> 标签：razor, asp.net-mvc-4, html

虽然 Microsoft 在 razor MVC4 中创建了一些[html 属性的自动渲染](https://stackoverflow.com/questions/8061647/conditional-html-attributes-using-razor-mvc3#answer-8071699)，但我花了很长时间才了解如何根据条件 razor 表达式在元素上渲染第二个 css 类。我想和你分享。

基于模型属性@Model.Details，我想显示或隐藏一个列表项。如果有详细信息，则应显示 div，否则应将其隐藏。使用 jQuery，我需要做的就是分别添加一个类 show 或 hide。出于其他目的，我还想添加另一个类，“详细信息”。所以，我的标记应该是：

`<div class="details show">[Details]</div>`或者`<div class="details hide">[Details]</div>`

下面，我展示了一些失败的尝试（假设没有细节导致标记）。

这：`<div @(@Model.Details.Count > 0 ? "class=details show" : "class=details hide")>`，

将呈现这个：`<div class="details" hide="">`。

这：`<div @(@Model.Details.Count > 0 ? "class=\"details show\"" : "class=\"details hide\"")>`。

将呈现这个：`<div class=""details" hide&quot;="">`。

这：`<div @(@Model.Details.Count > 0 ? "class='details show'" : "class='details hide'")>`

将呈现这个：`<div class="'details" hide&#39;="">`。

这些都不是正确的标记。

* * *

## 回答 #1

> 赞同：360
> 
> 时间：2013-03-29T10:01:53.393

我相信观点上仍然存在有效的逻辑。但是对于这种事情我同意@BigMike，最好放在模型上。话虽如此，这个问题可以通过三种方式解决：

您的答案（假设这有效，我还没有尝试过）：

```
<div class="details @(@Model.Details.Count > 0 ? "show" : "hide")"> 
```

第二种选择：

```
@if (Model.Details.Count > 0) {
    <div class="details show">
}
else {
    <div class="details hide">
} 
```

第三个选项：

```
<div class="@("details " + (Model.Details.Count>0 ? "show" : "hide"))"> 
```

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2013-03-29T09:40:29.127

这：

```
 <div class="details @(Model.Details.Count > 0 ? "show" : "hide")"> 
```

将呈现这个：

```
 <div class="details hide"> 
```

并且是我想要的标记。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-07-23T19:36:57.927

您可以按如下方式向模型添加属性：

```
 public string DetailsClass { get { return Details.Count > 0 ? "show" : "hide" } } 
```

然后您的视图将更简单，并且根本不包含任何逻辑：

```
 <div class="details @Model.DetailsClass"/> 
```

这甚至适用于许多类，并且如果它为空，则不会呈现类：

```
 <div class="@Model.Class1 @Model.Class2"/> 
```

具有 2 个非空属性将呈现：

```
 <div class="class1 class2"/> 
```

如果 class1 为空

```
 <div class=" class2"/> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-11-13T13:18:26.967

您可以使用 String.Format 函数根据条件添加第二类：

```
<div class="@String.Format("details {0}", Details.Count > 0 ? "show" : "hide")"> 
```

# javascript - setTimeout 仅在 1000ms 以下有效

> ID：15700743
> 
> 赞同：4
> 
> 时间：2013-03-29T09:40:32.320
> 
> 标签：javascript, jquery, settimeout

我想要一个超时功能，所以当提交表单时，警报会在提交后两秒显示。我使用的代码不起作用：

```
$(document).ready(function() {
  $("#newsletter").submit(function() {
     setTimeout(function() {
      alert("submitted");             
    }, 2000);
   });
}); 
```

但是当我将 2000ms 更改为 900 时似乎工作正常：

```
$(document).ready(function() {
  $("#newsletter").submit(function() {
    setTimeout(function() {
     alert("submitted");              
   }, 900);
  });
}); 
```

我怎样才能让 2000 毫秒工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T09:41:45.703

唯一可能的原因是您正在提交并且用户在 2 秒过去之前`form`被带到新页面（表单的）。`action`

正如 Thilo 的评论中所建议的，如果显示警报是不可避免的，请通过 AJAX 提交它，以便当前页面（包含要警报的代码）保持不变并因此执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:52:32.913

您可以将代码更改为：

```
$(document).ready(function() {
  $("#newsletter").submit(function(event) {
     var element = this;
     event.preventDefault();
     setTimeout(function() {
      alert("submitted");

      //rest of the code

      element.submit();
    }, 2000);
   });
}); 
```

**[JSFIDDLE](http://jsfiddle.net/DJDavid98/Uv9tb/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:58:37.663

你可以这样使用。您的原始代码的问题在于，它在分配的时间之前提交。

```
$(document).ready(function() {
    $("#newsletter").submit(function(e) {
        e.preventDefault();
        setTimeout(function() {
            alert("submitted");
        }, 2000);
    });
}); 
```

# flash - Actionscript Metro 应用程序开发

> ID：15700746
> 
> 赞同：0
> 
> 时间：2013-03-29T09:40:39.740
> 
> 标签：flash, windows-8, actionscript, windows-phone, microsoft-metro

也许这不是一个好问题，但我正在研究使用线框的动作脚本。

那么，是否可以使用 adobe flash pro 导出 windows 8 Metro 应用程序和 windows phone？

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:24:51.263

不可以为任何一个平台将应用程序导出到 Adob​​e Flash 或从其中导出应用程序。

但是，Windows 8 和 RT 上的浏览​​器都支持 Flash，但 Windows Phone 不支持。

资料来源：[Adobe 开发。路线图](http://www.adobe.com/devnet/flashplatform/whitepapers/roadmap.html)

# vba - 如何将 .xls 附件（尤其是邮件）复制到硬盘？

> ID：15700755
> 
> 赞同：0
> 
> 时间：2013-03-29T09:41:27.380
> 
> 标签：vba, outlook

此代码复制指定文件夹中的所有 .xls 附件。

我想要来自特定电子邮件地址的邮件或具有特定主题的邮件的附件。

```
Sub GetAttachments() 
' This Outlook macro checks a the Outlook Inbox for messages
' with attached files (of any type) and saves them to disk.
' NOTE: make sure the specified save folder exists before
' running the macro.

On Error GoTo GetAttachments_err

' Declare variables
Dim ns As NameSpace
Dim Inbox As MAPIFolder
Dim Item As Object
Dim Atmt As Attachment
Dim FileName As String
Dim i As Integer

Set ns = GetNamespace("MAPI")
Set Inbox = ns.GetDefaultFolder(olFolderInbox)
i = 0

' Check Inbox for messages and exit of none found
If Inbox.Items.Count = 0 Then
    MsgBox "There are no messages in the Inbox.", vbInformation, _
        "Nothing Found"
    Exit Sub
End If

' Check each message for attachments
For Each Item In Inbox.Items ' Save any attachments found
    For Each Atmt In Item.Attachments
        ' This path must exist! Change folder name as necessary.
        FileName = "D:\New Folder\" & Atmt.FileName
        Atmt.SaveAsFile FileName
        i = i + 1
    Next Atmt
Next Item

' Show summary message
If i > 0 Then
    MsgBox "I found " & i & " attached files." _
    & vbCrLf & "I have saved them into the C:\Email Attachments folder." _
    & vbCrLf & vbCrLf & "Have a nice day.", vbInformation, "Finished!"
Else
    MsgBox "I didn't find any attached files in your mail.", vbInformation, "Finished!"
End If

' Clear memory GetAttachments_exit:
Set Atmt = Nothing
Set Item = Nothing
Set ns = Nothing
Exit Sub

' Handle errors
GetAttachments_err:
MsgBox "An unexpected error has occurred." _
    & vbCrLf & "Please note and report the following information." _
    & vbCrLf & "Macro Name: GetAttachments" _
    & vbCrLf & "Error Number: " & Err.Number _
    & vbCrLf & "Error Description: " & Err.Description _
    , vbCritical, "Error!"
Resume GetAttachments_exit
End Sub

Sub SaveAttachmentsToFolder()
' This Outlook macro checks a named subfolder in the Outlook Inbox
' (here the "Sales Reports" folder) for messages with attached
' files of a specific type (here file with an "xls" extension)
' and saves them to disk. Saved files are timestamped. The user
' can choose to view the saved files in Windows Explorer.
' NOTE: make sure the specified subfolder and save folder exist
' before running the macro.

    On Error GoTo SaveAttachmentsToFolder_err
    ' Declare variables
    Dim ns As NameSpace
    Dim Inbox As MAPIFolder
    Dim SubFolder As MAPIFolder
    Dim Item As Object
    Dim Atmt As Attachment
    Dim FileName As String
    Dim i As Integer
    Dim varResponse As VbMsgBoxResult
    Set ns = GetNamespace("MAPI")
    Set Inbox = ns.GetDefaultFolder(olFolderInbox)
    Set SubFolder = Inbox.Folders("Sales Reports")

    ' Enter correct subfolder name.
    i = 0 ' Check subfolder for messages and exit of none found
    If SubFolder.Items.Count = 0 Then
        MsgBox "There are no messages in the Sales Reports folder.", vbInformation, _
        "Nothing Found"
        Exit Sub
    End If

    ' Check each message for attachments
    For Each Item In SubFolder.Items
        For Each Atmt In Item.Attachments
        ' Check filename of each attachment and save if it has "xls" extension
            If Right(Atmt.FileName, 3) = "xls" Then
            ' This path must exist! Change folder name as necessary.
                FileName = "C:\Email Attachments\" & _
                Format(Item.CreationTime, "yyyymmdd_hhnnss_") & Atmt.FileName
                Atmt.SaveAsFile FileName
                i = i + 1
            End If
        Next Atmt
    Next Item

    ' Show summary message
    If i > 0 Then
        varResponse = MsgBox("I found " & i & " attached files." _
        & vbCrLf & "I have saved them into the C:\Email Attachments folder." _
        & vbCrLf & vbCrLf & "Would you like to view the files now?" _
        , vbQuestion + vbYesNo, "Finished!")

        ' Open Windows Explorer to display saved files if user chooses
        If varResponse = vbYes Then
            Shell "Explorer.exe /e,C:\Email Attachments", vbNormalFocus
        End If
    Else
        MsgBox "I didn't find any attached files in your mail.", vbInformation, "Finished!"
    End If

    ' Clear memory SaveAttachmentsToFolder_exit:
    Set Atmt = Nothing
    Set Item = Nothing
    Set ns = Nothing
    Exit Sub

    ' Handle Errors SaveAttachmentsToFolder_err:
    MsgBox "An unexpected error has occurred." _
        & vbCrLf & "Please note and report the following information." _
        & vbCrLf & "Macro Name: GetAttachments" _
        & vbCrLf & "Error Number: " & Err.Number _
        & vbCrLf & "Error Description: " & Err.Description _
        , vbCritical, "Error!"
    Resume SaveAttachmentsToFolder_exit
End Sub 
```

此代码将收件箱中的所有 .xls 附件复制到指定文件夹。

我不想要所有的附件，只需要来自特定用户的......比如电子邮件或主题或类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:04:41.373

**对GetAttachments**过程的以下调整将仅从*John Doe*或主题包含*Weekly Status Report的**电子邮件*附件中提取。

 **请注意我在您的文件保存操作附近添加的评论。除非您绝对确定不会遇到任何重复的文件名，否则您应该在文件名上附加一个日期戳，否则您将在每次保存具有重复名称的文件时覆盖文件。

```
Option Explicit
Option Compare Text

Sub GetAttachments() ' This Outlook macro checks a the Outlook Inbox for messages ' with attached files (of any type) and saves them to disk. ' NOTE: make sure the specified save folder exists before ' running the macro.
        On Error GoTo GetAttachments_err ' Declare variables
        Dim ns As NameSpace
        Dim Inbox As MAPIFolder
        Dim Item As Object
        Dim Atmt As attachment
        Dim FileName As String
        Dim i As Integer
        Set ns = GetNamespace("MAPI")
        Set Inbox = ns.GetDefaultFolder(olFolderInbox)
        i = 0 ' Check Inbox for messages and exit of none found
        If Inbox.Items.Count = 0 Then
            MsgBox "There are no messages in the Inbox.", vbInformation, _
                   "Nothing Found"
            Exit Sub
        End If ' Check each message for attachments
        For Each Item In Inbox.Items ' Save any attachments from specfic senders or subjects
            If TypeName(Item) = "MailItem" And (Item.SenderName = "John Doe" Or Item.Subject Like "*Weekly Status Report*") Then
                For Each Atmt In Item.Attachments
                ' This path must exist! Change folder name as necessary.
                    FileName = "D:\New Folder\" & Atmt.FileName             'CONSIDER WHETHER YOU WILL HAVE ANY FILES BY THE SAME NAME!!!
                    Atmt.SaveAsFile FileName
                    i = i + 1
                 Next Atmt
             End If
        Next Item ' Show summary message
        If i > 0 Then
            MsgBox "I found " & i & " attached files." _
            & vbCrLf & "I have saved them into the C:\Email Attachments folder." _
            & vbCrLf & vbCrLf & "Have a nice day.", vbInformation, "Finished!"
        Else
            MsgBox "I didn't find any attached files in your mail.", vbInformation, "Finished!"
        End If ' Clear memory GetAttachments_exit:
        Set Atmt = Nothing
        Set Item = Nothing
        Set ns = Nothing

GetAttachments_exit:
        Exit Sub

GetAttachments_err:
        ' Handle errors GetAttachments_err:
        MsgBox "An unexpected error has occurred." _
            & vbCrLf & "Please note and report the following information." _
            & vbCrLf & "Macro Name: GetAttachments" _
            & vbCrLf & "Error Number: " & Err.Number _
            & vbCrLf & "Error Description: " & Err.Description _
            , vbCritical, "Error!"
        Resume GetAttachments_exit
End Sub 
```

如果您需要评估大量发件人或主题，您可能需要考虑创建[字典对象](http://support.microsoft.com/kb/187234)并检查电子邮件是否符合您的条件。**

# wso2 - 配置 WSO2 AS 和 BAM - 新错误

> ID：15700758
> 
> 赞同：1
> 
> 时间：2013-03-29T09:41:42.353
> 
> 标签：wso2, wso2bam

我按照 WSO2 文档中提到的相同步骤配置 BAM 服务器和 WSO2 AS。两者都在不同的计算机中。仍然无法解决错误。现在，当我单击 BAM EVENT_KS 时出现新错误。我的 BAM 服务器偏移地址默认为 0。我在 carbon.xml 中将我的 WSO2 AS 偏移量更改为 2。

> 错误 {org.wso2.carbon.databridge.agent.thrift.AsyncDataPublisher} - 连接到事件接收器 org.wso2.carbon.databridge.agent.thrift.exception.AgentException 时出错：无法为 TCP 借用客户端，203.252.180.178:9443 ,TCP,203.252.180.178:9543 at org.wso2.carbon.databridge.agent.thrift.internal.publisher.authenticator.AgentAuthenticator.connect(AgentAuthenticator.java:58)
> 
> 还有很多 .....

请帮助 BAM 的配置问题。我尝试了所有最新的 3 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:36:47.900

阅读 [1] 了解配置详情。如我所见，您使用了端口 9443 和 9543 而不是正确的 Thrift 服务器端口 7611 或 7711。当 BAM 中未应用端口偏移时，将 7611 用于不安全端口，将 7711 用于安全端口。

[1] [http://docs.wso2.org/wiki/display/AS501/Collecting+Data+Statistics+of+Services](http://docs.wso2.org/wiki/display/AS501/Collecting+Data+Statistics+of+Services)

# php - 在 PHP 中的日期中添加小时数

> ID：15700759
> 
> 赞同：1
> 
> 时间：2013-03-29T09:41:43.343
> 
> 标签：php

想要在日期中添加小时数。请帮忙。

PHP代码是：

```
$createdDate=date_create("2013-03-17 07:11:00");
$hour = 4; 
```

我尝试使用 strtotime。但它给出了一个错误。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T09:45:04.147

使用 DateTime 修改方法。

```
$date = new DateTime("2013-03-17 07:11:00");
$date->modify("+4 hours");
echo $date->format("Y-m-d H:i:s"); 
```

[演示。](http://codepad.viper-7.com/rsXA2a)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T09:44:02.647

你可以使用[`DateInterval`](http://php.net/dateinterval)：

```
$iv = new DateInterval("PT{$hour}H");
$createdDate->add($iv);
// $createdDate is now modified 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:44:57.977

您可以使用[date_modify](http://www.php.net/manual/en/datetime.modify.php)：

```
date_modify($createdDate, "+4 hours"); 
```

# c# - 通过 T4Scaffolding 生成 CustomScaffolder 时找不到“DynamicTransform”

> ID：15700764
> 
> 赞同：0
> 
> 时间：2013-03-29T09:41:56.377
> 
> 标签：c#, .net, t4scaffolding

我正在尝试将 T4Scaffolding 用于我当前的项目，但一开始就失败了。

[我在此链接](http://average-uffe.blogspot.com/2011/06/basics-in-t4scaffolding-in-visual.html)上逐步执行相同的过程，该过程教如何将 T4Scaffolding 用于基本控制台应用程序。

**我做的步骤**

**1-**我创建了一个新的控制台应用程序（.NET 4.0）

**2-**我使用包管理器控制台成功安装了 T4Scaffholding (install-package t4scaffolding)

**3-**我尝试使用包管理器控制台创建一个演示自定义模板

*`Scaffold CustomScaffolder T4Demo`*

然后它抛出下面的异常

```
Add-ProjectItemViaTemplate : c:\Users\ryu\Desktop\SpiderWeb\ConsoleApplication2\packages\T4Scaffolding.Core.1.0.0\tools\CustomScaffolder\DefaultPs1Script.ps1.t4(1,48) : error CS0246: Com
piling transformation: The type or namespace name 'DynamicTransform' could not be found (are you missing a using directive or an assembly reference?)
At C:\Users\ryu\Desktop\SpiderWeb\ConsoleApplication2\packages\T4Scaffolding.Core.1.0.0\tools\CustomScaffolder\T4Scaffolding.CustomScaffolder.ps1:15 char:1
+ Add-ProjectItemViaTemplate $outputPath -Template DefaultPs1Script -Model @{
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [Add-ProjectItemViaTemplate], Exception
    + FullyQualifiedErrorId : T4Scaffolding.Cmdlets.AddProjectItemViaTemplateCmdlet

Add-ProjectItemViaTemplate : c:\Users\ryu\Desktop\SpiderWeb\ConsoleApplication2\packages\T4Scaffolding.Core.1.0.0\tools\CustomScaffolder\DefaultT4Template.cs.t4(1,48) : error CS0246: Com
piling transformation: The type or namespace name 'DynamicTransform' could not be found (are you missing a using directive or an assembly reference?)
At C:\Users\ryu\Desktop\SpiderWeb\ConsoleApplication2\packages\T4Scaffolding.Core.1.0.0\tools\CustomScaffolder\T4Scaffolding.CustomScaffolder.ps1:22 char:1
+ Add-ProjectItemViaTemplate $outputPath -Template DefaultT4Template -Model @{
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [Add-ProjectItemViaTemplate], Exception
    + FullyQualifiedErrorId : T4Scaffolding.Cmdlets.AddProjectItemViaTemplateCmdlet 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:16:05.523

在我将 Windows 区域设置从母语更改为美国后，问题就消失了。不要忘记重新启动 Visual Studio。

真是烦人的问题！

# ruby-on-rails - 如何让模块“扩展”到我的模型类中

> ID：15700779
> 
> 赞同：0
> 
> 时间：2013-03-29T09:42:48.517
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

### lib/modules/sport_time.rb

```
module SportTime

    def to_race_time(secs)
      m = (secs/60).floor
      s = (secs - (m*60))
      t = sprintf("%02d:%.2f\n",m,s)
      return t
    end

    def time_to_float(tim)
      dirty = tim.to_s
      min, sec = dirty.split(":")
      seconds = (min.to_i * 60) + sec.to_f
      seconds.round(4)
    end

end

class Event
  extend SportTime
  before_save :sporty_save

  private

  def sporty_save
    self.goal_time = self.class.time_to_float(goal_time)
  end
end 
```

### events.rb 模型

```
class Event < ActiveRecord::Base
   validates_presence_of :course, :goal_time, :race_length, :user_id
   attr_accessible :course, :goal_time, :race_length, :user_id
   belongs_to :user
end 
```

* * *

**问题：**当我尝试创建一个目标时间为“1:15.55”（字符串）的事件时，它不是被保存为 75.55（浮点数），而是被保存为 1.0（浮点数）......所以无论我在做什么类 mixin 显然不起作用。

我对使用模块很陌生，所以我很难弄清楚为什么我不能理解我在这里做错了。任何帮助表示赞赏，谢谢。

*注意：视图的浮点到字符串转换确实有效。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:57:01.160

```
module SportTime
  extend ActiveSupport::Concern

  included do
    before_save :sporty_save
  end

  private
  def sporty_save
    self.goal_time = time_to_float(goal_time)
  end

  def to_race_time(secs)
    m = (secs/60).floor
    s = (secs - (m*60))
    sprintf("%02d:%.2f\n",m,s)
  end

  def time_to_float(tim)
    dirty = tim.to_s
    min, sec = dirty.split(":")
    seconds = (min.to_i * 60) + sec.to_f
    seconds.round(4)
  end

end

class Event < ActiveRecord::Base
   include SportTime
   validates_presence_of :course, :goal_time, :race_length, :user_id
   attr_accessible :course, :goal_time, :race_length, :user_id
   belongs_to :user
end 
```

并确保你的 lib 目录是自动加载的，或者你可以将你的 mixin 放在 Mixin::SportTime 模块中的 models/mixin 目录下

# objective-c - 如何使用 UTF-8 字符串打印 NSData

> ID：15700783
> 
> 赞同：3
> 
> 时间：2013-03-29T09:43:04.003
> 
> 标签：objective-c, encoding, printing, utf-8

我有一台 Star Micronics SM-S220i 蓝牙打印机。我正在使用它从我的 iPad 应用程序中打印收据。我不能让像 åäö 这样的 UTF-8 字符工作。

这是我的代码：

```
NSMutableData *commands = [[NSMutableData alloc] init];

[commands appendData:[@"\nåäö\n" dataUsingEncoding:NSWindowsCP1252StringEncoding]]; 
```

当使用这种编码时，它会在 DOS 字符中打印 åäö。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T10:53:37.750

如果转换为 CP1292 的“å”打印为“σ”，则打印机可能需要 CP437 编码的数据。CP437`kCFStringEncodingDOSLatinUS`可以转换为 NSString 编码：

```
NSMutableData *commands = [[NSMutableData alloc] init];
NSStringEncoding cp437 = CFStringConvertEncodingToNSStringEncoding(kCFStringEncodingDOSLatinUS);
[commands appendData:[@"\nåäö\n" dataUsingEncoding:cp437]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T09:49:48.417

尝试使用不同的编码，例如：

```
[commands appendData:[@"\nåäö\n" dataUsingEncoding:NSUTF8StringEncoding]]; 
```

# ruby - 如何修复错误的 URI 不是 URI

> ID：15700784
> 
> 赞同：59
> 
> 时间：2013-03-29T09:43:04.080
> 
> 标签：ruby, ruby-on-rails-3, uri

我正在使用 ruby​​ 版本`1.9.3`，我喜欢从下面的视频 url 中获取主机名，

我试过代码

```
require 'uri'
url = "https://ferrari-view.4me.it/view-share/playerp/?plContext=http://ferrari-%201363948628-stream.4mecloud.it/live/ferrari/ngrp:livegenita/manifest.f4m&cartellaConfig=http://ferrari-4me.weebo.it/static/player/config/&cartellaLingua=http://ferrari-4me.weebo.it/static/player/config/&poster=http://pusher.newvision.it:8080/resources/img1.jpg&urlSkin=http://ferrari-4me.weebo.it/static/player/swf/skin.swf?a=1363014732171&method=GET&target_url=http://ferrari-4me.weebo.it/static/player/swf/player.swf&userLanguage=IT&styleTextColor=#000000&autoPlay=true&bufferTime=2&isLive=true&highlightColor=#eb2323&gaTrackerList=UA-23603234-4"  
puts URI.parse(url).host 
```

它抛出异常 URI::InvalidURIError: bad URI(is not URI?):

我尝试对 URL 进行编码然后解析如下

```
puts URI.parse(URI.parse(url)).host 
```

它抛出一个异常`URI::InvalidURIError: bad URI(is not URI?)`

但上面的代码适用于下面的 URL。

网址 = [http://www.youtube.com/v/GpQDa3PUAbU?version=3&autohide=1&autoplay=1](http://www.youtube.com/v/GpQDa3PUAbU?version=3&autohide=1&autoplay=1)

如何解决这个问题？请有任何建议。谢谢

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2013-03-29T10:24:13.193

这个 url 无效，但它可以在浏览器中使用，因为浏览器本身对特殊字符（如 :、/ 等）的要求不那么严格。

您应该首先对您的 URI 进行编码

```
encoded_url = URI.encode(url) 
```

然后解析它

```
URI.parse(encoded_url) 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-29T11:15:06.607

Addressable::URI 是 URI 的更好、更符合 rfc 的替代品：

```
require "addressable/uri"
Addressable::URI.parse(url).host
#=> "ferrari-view.4me.it" 
```

`gem install addressable`第一的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-11T03:03:17.423

试试这个：

```
safeurl = URI.encode(url.strip)
response = RestClient.get(safeurl) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T10:35:53.293

您的 URI 查询无效。有[几个字符](http://en.wikipedia.org/wiki/Query_string#URL_encoding)应该用`URI::encode()`. 例如，`#`、`或`&`在查询中无效。`

 `在您的代码的工作版本下方

```
 require 'uri'

    plContext = URI::encode("http://ferrari-%201363948628-stream.4mecloud.it/live/ferrari/ngrp:livegenita/manifest.f4m")
    cartellaConfig = URI::encode("http://ferrari-4me.weebo.it/static/player/config/")
    cartellaLingua = URI::encode("http://ferrari-4me.weebo.it/static/player/config/")
    poster = URI::encode("http://pusher.newvision.it:8080/resources/img1.jpg")
    urlSkin = URI::encode("http://ferrari-4me.weebo.it/static/player/swf/skin.swf?a=1363014732171")
    target_url = URI::encode("http://ferrari-4me.weebo.it/static/player/swf/player.swf")
    url = "https://ferrari-view.4me.it/view-share/playerp/?"
    url << "plContext=#{plContext}"
    url << "&cartellaConfig=#{cartellaConfig}"
    url << "&cartellaLingua=#{cartellaLingua}"
    url << "&poster=#{poster}"
    url << "&urlSkin=#{urlSkin}"
    url << "&method=GET"
    url << "&target_url=#{target_url}"
    url << "&userLanguage=IT"
    url << "&styleTextColor=#{URI::encode("#000000")}"
    url << "&autoPlay=true&bufferTime=2&isLive=true&gaTrackerList=UA-23603234-4"
    url << "&highlightColor=#{URI::encode("#eb2323")}"  
    puts url
    puts URI.parse(url).host 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T11:10:56.007

`URI.parse`是对的：那个 URI 是非法的。仅仅因为它意外地在您的浏览器中运行并不意味着它是合法的。您无法解析该 URI，因为它*不是*URI。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-23T12:06:30.540

```
uri = URI.parse(URI.encode(url.strip)) 
````

# c# - 如何在 GUI (WPF) 中选择 MS SQL Server 数据库？

> ID：15700793
> 
> 赞同：0
> 
> 时间：2013-03-29T09:43:38.017
> 
> 标签：c#, sql-server, wpf, database, user-interface

我正在开发 WPF 应用程序，并希望有机会通过用户界面更改数据库。我只使用 MS SQL Server，不想为此目的选择 Odbc 数据源。我也不想手动编辑连接字符串 - 我认为这对普通用户来说太难了。

该问题的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:52:45.880

在 gui 中添加您想要的所有连接字符串。并查询视图模型中的所有连接字符串

```
foreach(var con in ConfigurationManager.Connectionstrings)
{
    Connections.Add(con.Name);
} 
```

像这样的东西。

# php - 如何从其他数组中仅选择一个数组

> ID：15700794
> 
> 赞同：-3
> 
> 时间：2013-03-29T09:43:38.270
> 
> 标签：php, arrays

我有 3 个数组

```
$arr_1 = array('a','b','c');
$arr_2 = array('d','e','f');
$arr_3 = array('g','h','i'); 
```

假设这 3 个数组用于来自表单中 3 个选择菜单的值。我想实现以下。

如果提交了表单，如果选择了一个元素`$arr_1`并再次从其中一个元素中选择了任何元素，`$arr_2`或者`$arr_3`它会警告错误，您只能从 3 个数组中的一个`$arr_1`或`$arr_2`或`$arr_3`而不是混合元素中选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:53:42.933

```
$valid = array('a', 'b');
$invalid = array('a', 'd');

$arrays = array(
    '1' => array('a', 'b', 'c'),
    '2' => array('d', 'e', 'f'),
    '3' => array('g', 'h', 'i'),
);

foreach ($valid as $input) {
    $inArray = array();
    foreach ($arrays as $key => $array)
        if (in_array($input, $array))
            $inArray[] = $key;
}

foreach ($invalid as $input) {
    $numberOfArrays = array();
    foreach ($arrays as $key => $array)
        if (in_array($input, $array))
            $inArray[] = $key;
} 
```

`$inArray`你可以用ie的长度来证明

```
if (length($inArray) === 1) { 
    echo 'Valid'; 
} else { 
    echo 'Invalid'; 
} 
```

**编辑：**

并证明所有值是否来自一个数组：

```
if ((length($inArray) === 1) and (length($valid) === length($arrays['1']))) {
    echo 'Valid';
} else {
    echo 'Invalid';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:52:34.297

你可以这样做

```
if($arr_1 && $arr_2 && $arr_3){

    alert("error ");

} else if ($arr_1 && $arr_2){

    alert("error");
} else {

   alert("good to go");

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T10:03:45.827

您只需要检查与选择菜单对应的表单值有多少与其默认值不同（不应在这些数组中）：

```
<?php
$form_select = array('select1' => 'none','select2' => 'none','select3' => 'none');
if (count(array_intersect_assoc($_REQUEST, $form_select)) < count($form_select) - 1)
    display_error();
else
    process_form($_REQUEST); 
```

其中`$form_select`包含不能一起使用的选择菜单的默认值。

对应的 html 如下所示：

```
 <form>
  <select name='select1'>
    <option value ='none' selected>none</option>
    <?php array_walk($arr_1, function ($v) { echo '<option value="'.$v.'">'.$v.'</option>'; }); ?>
  </select>
  <!-- etc. --> 
```

# java - Java获取x和y坐标

> ID：15700795
> 
> 赞同：0
> 
> 时间：2013-03-29T09:43:47.010
> 
> 标签：java, location, cell

我正在尝试制作扫雷游戏。但我有点困惑如何为游戏中的每个单元格获取 x 和 y 坐标以便为每个单元格绘制图像。此代码仅绘制具有位置 (0,0) 的第一个单元格。我怎样才能获得对其他单元格的引用？这是我的代码：

```
 public  class Cell {
     private int row, col;
     private int ulx, uly, w, h;
     private boolean marked, covered, mined;
     private int adjcount;

     private Cell(int r, int c) {
        marked=false;
        covered=true;
        mined=false;
        row=r;
        col=c;
        w=h=16;
        adjcount=0;
     }

     public int getX(){
         return ulx;     
     }

     public int getY(){
         return uly;     
     }

     public boolean getMarked() {
        return marked;
     }

     public void setMarked(boolean value) {
        marked=value;
     }

     public boolean getCovered() {
        return covered;
     }

     public void setCovered(boolean value) {
        covered=value;
     }

     public boolean getMined() {
        return mined;
     }

     public void setMined(boolean value) {
        mined=value;
     }

     public void setAdjCount(int count) {
        adjcount = count;
     }

     public int getAdjCount() {
        return adjcount;
     } 
```

这是我在游戏中绘制每个单元格的地方

```
 if (getCovered() == true && getMarked () == false) {    // gray rectangle
           g.drawImage(gRec,getX(),getY(),w,h,null);

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:47:12.290

看来你没有分配`ulx`和`uly`任何地方。您可以将以下代码放在构造函数的末尾：

```
ulx = col * w;
uly = row * h; 
```

# c++ - 如何使继承层次结构中的成员函数始终返回相同的值？

> ID：15700798
> 
> 赞同：1
> 
> 时间：2013-03-29T09:43:52.827
> 
> 标签：c++, design-patterns

我有一个继承层次结构，我想让这个层次结构中的每个类都有一组属性，这些属性是该类特有的，并且在程序运行期间不会改变。例如：

```
class Base
{
public:
    const std::string getName() const;
    bool getAttribute1() const;
    int getAttribute2() const;
}; 
```

现在我希望这些函数始终返回相同的结果。此外，当另一个类继承`Base`这个类时，应该有它自己的一组属性，并且这个派生类的任何实例都应该有相同的属性。每个类的名称也应该是唯一的。

我想知道一种方法让它尽可能透明和优雅。到目前为止，我已经考虑了两个可以使用的想法：

1.  做一些锁系统。

那就是为这些属性提供设置器，但是当它们被多次调用时，它们会引发运行时异常。

1.  使 getter 成为纯虚拟的。

在这种情况下，函数的结果不会存储在对象本身内。这将模糊地表明结果取决于动态类型。

这两个想法听起来都非常糟糕，所以我需要你的帮助。

我是 C++ 新手，但我知道有很多习语和模式可以解决像这样的一般问题。你知道任何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T09:55:09.707

> 我有一个继承层次结构，我想让这个层次结构中的每个类都有一组属性，这些属性是该类特有的，并且在程序运行期间不会改变

好吧，那么只需将相应的值作为参数提供给类构造函数，并且不要在公共接口上公开任何 setter 方法。这将确保值在对象的整个生命周期内保持不变。

为了防止可能的错误会从您的类的成员函数（当然可以访问私有数据）中改变这些数据成员的值，请将这些数据成员设为`const`. 请注意，这将强制您在构造函数的初始化列表中初始化这些成员。

```
class Base
{
public:
    // Forwarding constructor (requires C++11)
    Base() : Base("base", true, 42) { }
    const std::string getName() const { return _s; }
    bool getAttribute1() const { return _a1; }
    int getAttribute2() const { return _a2; }

protected:
    // Constructor that can be called by derived classes
    Base(std::string s, bool a1, int a2)
    : _s(s), _a1(a1), _a2(a2) { }

private:
    const std::string _s;
    const bool _a1;
    const bool _a2;
}; 
```

然后，派生类将使用适当的参数构造基本子对象：

```
class Derived : public Base
{
public:
    // Provide the values for the constant data members to the base constructor
    Derived() : Base("derived", false, 1729) { }
}; 
```

这样您就不会产生虚函数调用的开销，并且您不必为派生类中的每个成员重写类似的虚函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T09:49:37.487

使它们成为虚拟并硬编码函数应返回的结果：

```
class Base
{
public:
    virtual const std::string getName() const { return "BaseName"; }
    virtual bool getAttribute1() const { return whatEverAttributeValueYouWant; }
    virtual int getAttribute2() const { return attributeValueHere; }
};

class Derived : public Base {
public:
    virtual const std::string getName() const { return "DerivedName"; }
    virtual bool getAttribute1() const { return whatEverOtherAttributeValueYouWant; }
    virtual int getAttribute2() const { return otherAttributeValueHere; }
}; 
```

如果您想描述*类*而不是对象，请使用（种类）特征：

```
template<class T> struct AttributeValues;

template<> struct AttributeValues<Base> {
    static const std::string name () { return "BaseName"; }
};

template<> struct AttributeValues<Derived> {
    static const std::string name () { return "DerivedName"; }
};

//...

auto nameBase = AttributeValues<Base>::name ();
auto nameDerived = AttributeValues<Derived>::name (); 
```

# java - org.apache.hadoop.mapreduce 未找到——Hadoop

> ID：15700799
> 
> 赞同：0
> 
> 时间：2013-03-29T09:43:54.650
> 
> 标签：java, hadoop, mapreduce

我正在研究 Hadoop。我需要使用大数据的力量来处理图像。为了解决这个问题，我参考了这个[例子](http://eldadlevy.wordpress.com/2011/02/05/hadoop-binary-files-processing-entroduced-by-image-duplicates-finder/)。我需要在处理图像副本之前创建序列文件。所以我用[这个](http://pastebin.com/m1EuBaqj)源代码来创建序列文件。

当我在 Hadoop 环境中编译它时，我缺少一些包。我正在使用 Hadoop-0.18.0。

```
/tmp/BinaryFilesToHadoopSequenceFile.java:12: package org.apache.hadoop.mapreduce does not exist
import org.apache.hadoop.mapreduce.Job;
                                  ^
/tmp/BinaryFilesToHadoopSequenceFile.java:13: package org.apache.hadoop.mapreduce does not exist
import org.apache.hadoop.mapreduce.Mapper;
                                  ^
/tmp/BinaryFilesToHadoopSequenceFile.java:14: package org.apache.hadoop.mapreduce.lib.input does not exist
import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
                                            ^
/tmp/BinaryFilesToHadoopSequenceFile.java:15: package org.apache.hadoop.mapreduce.lib.input does not exist
import org.apache.hadoop.mapreduce.lib.input.TextInputFormat;
                                            ^
/tmp/BinaryFilesToHadoopSequenceFile.java:16: package org.apache.hadoop.mapreduce.lib.output does not exist
import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;
                                             ^
/tmp/BinaryFilesToHadoopSequenceFile.java:17: package org.apache.hadoop.mapreduce.lib.output does not exist
import org.apache.hadoop.mapreduce.lib.output.SequenceFileOutputFormat; 
```

我是否做错了什么？或者它在 0.18.0 中不可用。我知道这个版本是非常旧的版本。由于一些限制，我正在使用已配置的 VM 来使用，它具有此版本的 hadoop。任何帮助，将不胜感激！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:49:00.243

我不能再轻易地找到要下载的 0.18.0 的副本，但看起来 mapreduce 包在此版本（或 0.19）中不可用：

*   [http://www.java2s.com/Code/Jar/h/Downloadhadoop0180corejar.htm](http://www.java2s.com/Code/Jar/h/Downloadhadoop0180corejar.htm)
*   [http://www.java2s.com/Code/Jar/h/Downloadhadoop0190corejar.htm](http://www.java2s.com/Code/Jar/h/Downloadhadoop0190corejar.htm)

它肯定在 0.20.2 虽然

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:59:43.910

尝试使用 0.20.X hadoop 核心包版本来使用 org.apache.hadoop.mapreduce.* 类

# java - 连接到 java RMI 服务器

> ID：15700800
> 
> 赞同：0
> 
> 时间：2013-03-29T09:43:58.057
> 
> 标签：java, netbeans, rmi

我是 java RMI 的新手，我正在按照教程来了解它。它使用服务器，获取服务器的代码清单如下

1.  计算器服务器.java

    ```
     public class CalculatorServer {
            public CalculatorServer(){
                try {
                    Calculator c = new CalculatorImpl();
                    Naming.rebind("rmi://localhost:1099/CalculatorService", c);
                } catch (Exception e) {
                    System.out.println("Trouble"+e);
                }
            }
            public static void main(String args[]){
                new CalculatorServer();
            }
        } 
    ```

2.  CalculatorImpl.java

    ```
     public class CalculatorImpl extends UnicastRemoteObject implements Calculator {

        //constructor
        public CalculatorImpl() throws RemoteException {
            super();
        }

        //@Override
        public long add(long a, long b) throws RemoteException {
            return a + b;
        }

        //@Override
        public long sub(long a, long b) throws RemoteException {
            return a - b;
        }

        //@Override
        public long mul(long a, long b) throws RemoteException {
            return a * b;
        }

       // @Override
        public long div(long a, long b) throws RemoteException {
            return a / b;
        }
    } 
    ```

3.计算器.java

```
 public interface Calculator extends Remote{
    public long add(long a, long b) throws RemoteException;
    public long sub(long a, long b) throws RemoteException;
    public long mul(long a, long b) throws RemoteException;
    public long div(long a, long b) throws RemoteException;
  } 
```

当我调试程序时，这是netbeans ide控制台的错误；它说这个错误：Troublejava.rmi.ServerException：RemoteException发生在服务器线程中；嵌套异常是：java.rmi.UnmarshalException：错误解组参数；嵌套异常是：java.lang.ClassNotFoundException: rmi.Calculator

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:51:14.283

听起来您没有运行 RMI 注册表，这是与 CalculatorServer 程序分开的进程。它位于您的 java bin 目录中。请稍等片刻，然后再次尝试您的代码。

# node.js - 将 Express.js 3 与数据库模块一起使用，在哪里初始化数据库客户端？

> ID：15700802
> 
> 赞同：3
> 
> 时间：2013-03-29T09:44:05.010
> 
> 标签：node.js, model-view-controller, express, redis

[知道Express.js](https://stackoverflow.com/questions/8428212/nodejs-expressjs-app-structure)几乎让开发人员决定应用程序结构，并且在阅读了很多关于 SO 的建议（例如参见链接 1和链接 2 ）以及检查[官方 repo 中的示例之后](https://github.com/visionmedia/express/tree/master/examples/mvc)[，](https://stackoverflow.com/questions/5778245/expressjs-how-to-structure-an-application)我仍然不确定是否是什么我正在做的是最好的前进方式。

假设我在我的应用程序中广泛使用 Redis，并且我有多个需要 redis 客户端运行查询的“模型”，在主 app.js 中初始化 redis 客户端会更好，如下所示：

```
var db = redis.createClient();
var models = require('./models')(db);
var routes = require('./controllers')(models); 
```

还是只在每个模型中初始化 redis，然后让每个控制器都需要感兴趣的模型会更好？

后一种方法是我正在使用的，它看起来不那么干燥。但是传递模型实例是最好的方法吗？请注意，我在这里加载了多个模型/控制器 - 我不确定如何修改我的设置以将 redis 客户端正确地传递给每个模型。

```
//currently in models/index.js

exports.home = require('./home.js');
exports.users = require('./user.js'); 
```

**TL；DR，我的问题是**：

1.  在 MVC 模式应用程序中最好在哪里初始化 redis 客户端？
2.  如何将此redis客户端实例传递给多个模型`require('./models')(db)`

*更新：*

我尝试了一种不同的方法`index.js`，用于`module.exports`返回模型/控制器的对象：

```
module.exports = function(models){

  var routes = {};

  routes.online = require('./home.js')(models);
  routes.users = require('./user.js')(models);

  return routes;

}; 
```

现在似乎是一个更好的主意？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T14:06:47.930

[如果我分享一下我最近如何使用Patio](http://c2fo.github.com/patio/)（一种 SQL ORM）实现一个项目，也许会很有用。更多背景知识：我使用的 MVC 框架是[Locomotive](http://locomotivejs.org/)，但这绝对不是必需的（Locomotive 没有 ORM，它将如何处理模型和数据库留给开发人员，类似于 Express）。

Locomotive 有一个名为“initializers”的构造，它只是在应用启动期间加载的 JS 文件；他们做什么取决于开发人员。在我的项目中，一个初始化程序配置了数据库。

初始化器建立了实际的数据库连接，还负责加载`model`目录中的所有 JS 文件。在伪代码中：

```
registry = require('model_registry'); // see below
db       = createDatabaseConnection();
files    = fs.readDirSync(MODEL_DIRECTORY);
for each file in files:
  if filename doesn't end with '.js':
    continue
  mod = require(path.join(MODEL_DIRECTORY, filename));
  var model = mod(db);
  registry.registerModel(model); 
```

模型如下所示：

```
// models/mymodel.js
module.exports = function(db ) {
  var model = function(...) { /* model class */ };
  model.modelName = 'MyModel'; // used by registry, see below
  return model;
}; 
```

模型注册表是一个非常简单的模块来保存所有模型：

```
module.exports = {
  registerModel : function(model) {
    if (! model.hasOwnProperty('modelName'))
      throw Error('[model registry] models require a modelName property');
    this[model.modelName] = model;
  }
}; 
```

因为模型注册表将模型类存储在`this`（即`module.exports`）中，所以它们可以从您需要访问模型的其他文件中导入：

```
// mycontroller.js
var MyModel = require('model_registry').MyModel;
var instance = new MyModel(...); 
```

免责声明：这对我有用，YMMV。此外，上面的代码示例没有考虑任何异步要求或错误处理，因此在我的案例中实际实现要复杂一些。

# android - 在谷歌地图android api v2中设置最大缩放级别

> ID：15700808
> 
> 赞同：41
> 
> 时间：2013-03-29T09:44:24.517
> 
> 标签：android, maps, zooming

我目前正在使用 Google maps android API v2 开发应用程序。我的代码如下。假设地图有几个标记并放大以显示所有标记。

```
LatLngBuilder.Builder builder = LatLngBounds.builder();
for(Marker m : markers){
    builder.include(m.getPosition());
}
LatLngBounds bounds = builder.build();
map.animateCamera(CameraUpdateFactory.newLatLngBounds(bounds, 10); 
```

此代码工作正常，但我想在缩放级别达到 17.0f 时停止动画；似乎地图 API 没有这种方法来控制缩放级别。有人知道解决这个问题的任何想法吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2016-08-02T05:07:45.970

Google Maps API的最新[更新](https://developers.google.com/maps/documentation/android-api/releases#august_1_2016)引入了您需要的功能：

```
GoogleMap.setMaxZoomPreference()

GoogleMap.setMinZoomPreference() 
```

但是，它仍然不会阻止动画播放。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-06-18T17:39:11.857

我在 Google Maps API 中没有找到任何直接的解决方案。这个问题的一个潜在解决方案是监听[OnCameraChange 事件](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.OnCameraChangeListener)：只要这个事件触发并且缩放级别高于最大缩放级别，就可以调用[animateCamera()](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap#animateCamera%28com.google.android.gms.maps.CameraUpdate%29)。结果代码如下：

```
@Override
public void onCameraChange(CameraPosition position) {
    float maxZoom = 17.0f;
    if (position.zoom > maxZoom)
        map_.animateCamera(CameraUpdateFactory.zoomTo(maxZoom));
} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-10-15T16:41:58.963

来自 Android 文档： [https ://developers.google.com/maps/documentation/android-api/views](https://developers.google.com/maps/documentation/android-api/views)

> 您可能会发现设置首选的最小和/或最大缩放级别很有用。例如，如果您的应用在兴趣点周围显示定义的区域，或者如果您使用具有一组有限缩放级别的自定义图块叠加，这对于控制用户体验很有用。
> 
> ```
> private GoogleMap mMap;
> // Set a preference for minimum and maximum zoom.
> mMap.setMinZoomPreference(6.0f);
> mMap.setMaxZoomPreference(14.0f); 
> ```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-10-13T09:47:07.007

这是 Arvis 解决方案的相应 Java 代码，对我来说效果很好：

```
private LatLngBounds adjustBoundsForMaxZoomLevel(LatLngBounds bounds) {
  LatLng sw = bounds.southwest;
  LatLng ne = bounds.northeast;
  double deltaLat = Math.abs(sw.latitude - ne.latitude);
  double deltaLon = Math.abs(sw.longitude - ne.longitude);

  final double zoomN = 0.005; // minimum zoom coefficient
  if (deltaLat < zoomN) {
     sw = new LatLng(sw.latitude - (zoomN - deltaLat / 2), sw.longitude);
     ne = new LatLng(ne.latitude + (zoomN - deltaLat / 2), ne.longitude);
     bounds = new LatLngBounds(sw, ne);
  }
  else if (deltaLon < zoomN) {
     sw = new LatLng(sw.latitude, sw.longitude - (zoomN - deltaLon / 2));
     ne = new LatLng(ne.latitude, ne.longitude + (zoomN - deltaLon / 2));
     bounds = new LatLngBounds(sw, ne);
  }

  return bounds;
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-10-29T14:33:05.047

与 Arvis 解决方案相同，但使用[`Location`](http://developer.android.com/reference/android/location/Location.html)[ `distanceBetween()`]( [http://developer.android.com/reference/android/location/Location.html#distanceBetween(double](http://developer.android.com/reference/android/location/Location.html#distanceBetween(double) , double, double, double, float[])) 方法计算距离到点之间：

```
@Override
public void zoomToMarkers(Set<Marker> markers) {

    LatLngBounds.Builder builder = new LatLngBounds.Builder();
    for (Marker marker : markers) {
        builder.include(marker.getPosition());
    }
    LatLngBounds bounds = builder.build();

    // Calculate distance between northeast and southwest
    float[] results = new float[1];
    android.location.Location.distanceBetween(bounds.northeast.latitude, bounds.northeast.longitude,
            bounds.southwest.latitude, bounds.southwest.longitude, results);

    CameraUpdate cu = null;
    if (results[0] < 1000) { // distance is less than 1 km -> set to zoom level 15
        cu = CameraUpdateFactory.newLatLngZoom(bounds.getCenter(), 15);
    } else {
        int padding = 50; // offset from edges of the map in pixels
        cu = CameraUpdateFactory.newLatLngBounds(bounds, padding);
    }
    if (cu != null) {
        mMap.moveCamera(cu);
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-08-13T10:44:46.387

在为相机设置动画之前，您可以检查边界的 SW 和 NE 点是否不太接近，并在必要时调整边界：

```
 ...
        LatLngBounds bounds = builder.Build();

        var sw = bounds.Southwest;
        var ne = bounds.Northeast;
        var deltaLat = Math.Abs(sw.Latitude - ne.Latitude);
        var deltaLon = Math.Abs(sw.Longitude - ne.Longitude);

        const double zoomN = 0.005; // set whatever zoom coefficient you need!!!
        if (deltaLat < zoomN) {
            sw.Latitude = sw.Latitude - (zoomN - deltaLat / 2);
            ne.Latitude = ne.Latitude + (zoomN - deltaLat / 2);
            bounds = new LatLngBounds(sw, ne);
        }
        else if (deltaLon < zoomN) {
            sw.Longitude = sw.Longitude - (zoomN - deltaLon / 2);
            ne.Longitude = ne.Longitude + (zoomN - deltaLon / 2);
            bounds = new LatLngBounds(sw, ne);
        }

        map.animateCamera(CameraUpdateFactory.NewLatLngBounds(bounds, 10); 
```

附言。我的示例是用于 Xamarin 的 c#，但您可以轻松地为 java 调整它

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-07-31T10:44:26.317

这来自您正在使用的[API 参考：](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/LatLngBounds.Builder)`include(position)`

“包括这一点以建立边界。边界将以最小的方式扩展以包括这一点。更准确地说，它将考虑在东西方向上扩展边界（其中一个可能环绕世界）并选择两者中较小的一个。如果两个方向产生相同大小的 LatLngBounds，这会将其向东扩展。

地图将缩小，直到它可以显示您在 for 循环中添加的所有标记。

如果您只想缩小到 17 并仍然显示标记，请先动画到缩放级别 17，然后获取它的边界，然后添加标记。

```
@Override
public void onCameraChange(CameraPosition camPos) {

    if (camPos.zoom < 17 && mCurrentLoc != null) {
        // set zoom 17 and disable zoom gestures so map can't be zoomed out
        // all the way
        mMap.animateCamera(CameraUpdateFactory.newLatLngZoom(position,17));
        mMap.getUiSettings().setZoomGesturesEnabled(false);
    }
    if (camPos.zoom >= 17) {
        mMap.getUiSettings().setZoomGesturesEnabled(true);
    }

    LatLngBounds visibleBounds =  mMap.getProjection().getVisibleRegion().latLngBounds;

//add the markers 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-06-18T12:37:03.833

我不确定这是否可行，但你可以试试这个

```
map.animateCamera(CameraUpdateFactory.zoomTo(10), 2000, null); 
```

希望能帮助到你

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-10-20T23:01:10.060

@kasimir 的方法在纬度或经度中设置了最小度数，并且感觉有点难以阅读。所以我对其进行了调整，只设置了纬度的最小值，我觉得它更具可读性：

```
private LatLngBounds adjustBoundsForMinimumLatitudeDegrees(LatLngBounds bounds, double minLatitudeDegrees) {
    LatLng sw = bounds.southwest;
    LatLng ne = bounds.northeast;
    double visibleLatitudeDegrees = Math.abs(sw.latitude - ne.latitude);

    if (visibleLatitudeDegrees < minLatitudeDegrees) {
        LatLng center = bounds.getCenter();
        sw = new LatLng(center.latitude - (minLatitudeDegrees / 2), sw.longitude);
        ne = new LatLng(center.latitude + (minLatitudeDegrees / 2), ne.longitude);
        bounds = new LatLngBounds(sw, ne);
    }

    return bounds;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-04-19T08:18:59.290

缩放级别如下：

> ```
> 1f: World
> 5f: Landmass/continent
> 10f: City
> 15f: Streets
> 20f: Buildings 
> ```

```
val setMin = 10f
val setMax = 20f

googleMap.setMaxZoomPreference(setMax)
googleMap.setMinZoomPreference(setMin) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-11-19T07:06:40.663

我最终做的是创建自己的按钮并禁用默认按钮，这样我就可以完全控制。

在布局中放置按钮的内容如下：

```
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:layout_gravity="bottom"
    android:layout_alignParentRight="true"
    android:layout_alignParentBottom="true">

    <Button
        android:id="@+id/bzoomin"
        android:layout_width="55dp"
        android:layout_height="55dp"
        android:gravity="center"
        android:textSize="28sp"
        android:text="+" />
    <Button
            android:id="@+id/bzoomout"
            android:layout_width="55dp"
            android:layout_height="55dp"
            android:gravity="center"
            android:textSize="23sp"
            android:text="—" />
</LinearLayout> 
```

然后在代码中禁用默认按钮并设置我们的新按钮：

```
map.getUiSettings().setZoomControlsEnabled(false);

// setup zoom control buttons
Button zoomout = (Button) findViewById(R.id.bzoomout);
zoomout.setOnClickListener(new OnClickListener(){

    @Override
    public void onClick(View v) {
        if(map.getCameraPosition().zoom >= 8.0f){
            // Zoom like normal
            map.animateCamera(CameraUpdateFactory.zoomOut());
        }else{
            // Do whatever you want if user went too far
            Messages.toast_short(MapsActivity.this, "Maximum zoom out level reached");
        }
    }

});

Button zoomin = (Button) findViewById(R.id.bzoomin);
zoomin.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        if (map.getCameraPosition().zoom <= 14.0f) {
            // Zoom like normal
            map.animateCamera(CameraUpdateFactory.zoomIn());
        } else {
            // Do whatever you want if user went too far
            Messages.toast_short(MapsActivity.this, "Maximum zoom in level reached");
        }
    }
}); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-10-05T12:43:12.993

```
map.setMinZoomPreference(floatValue); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-08-03T14:24:33.723

`com.google.android.gms:play-services-maps:9.4.0`您可以轻松设置最小/最大缩放。使用`GoogleMap.setMinZoomPreference()`和`GoogleMap.setMaxZoomPreference()`您可以设置首选的最小和/或最大缩放级别。更多请看[这里](https://developers.google.com/maps/documentation/android-api/views#changing_zoom_level)。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-12-27T14:01:03.213

我们不能直接限制地图放大功能，但我们可以尝试像这样获得相同的功能。

添加 map.setOnCameraChangeListener

```
final float maxZoom = 10.0f;

@Override
public void onCameraChange(CameraPosition position) {

    if (position.zoom > maxZoom)
        map.animateCamera(CameraUpdateFactory.zoomTo(maxZoom));
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-03-23T05:27:00.087

在新的谷歌地图 9.8 上

`com.google.android.gms:play-services-maps:9.8.0`

这就是我的工作方式

```
 googleMap.setOnCameraMoveListener(new GoogleMap.OnCameraMoveListener() {
        @Override
        public void onCameraMove() {
            Log.d(App.TAG, "onCameraMove");

            CameraPosition position = googleMap.getCameraPosition();

            float maxZoom = 9.0f;
            if (position.zoom > maxZoom) {

                googleMap.setMinZoomPreference(maxZoom);
            }

            Log.d(App.TAG, "position.zoom = " + position.zoom);

        }
    }); 
```

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2013-06-18T12:46:46.787

您可以通过调用它来获得最大缩放级别，`getMaxZoomLevel()`然后设置该值：

```
mGoogleMap.animateCamera(CameraUpdateFactory.newLatLngZoom(fromPosition, getMaxZoomLevel())); 
```

* * *

## 回答 #17

> 赞同：-4
> 
> 时间：2013-03-29T09:50:44.827

该地图有一个名为 maxZoom 的属性。只需在创建地图时将其设置为您的值

# java - HttpPost 向服务器发送 GET

> ID：15700813
> 
> 赞同：0
> 
> 时间：2013-03-29T09:44:53.707
> 
> 标签：java, android, http-post

我的问题已解决 服务器的所有者删除了一些代码，以检查发送 POST/GET 方法的基本原理是否正常工作并且工作正常。

我仍然不知道问题是什么，但这肯定不是我的问题哈哈

* * *

我正在尝试将`POST`方法发送到服务器，但事实证明服务器获得了一个`GET`方法。我们让它在 iphone 上工作，所以服务器是正确的。

这是我为发送数据而编写的代码：

```
 HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://myurl.nl/casus");
    httppost.setHeader("Authorization", "xxxxxxxxxxxxxxx");
    try {
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        //casus
        nameValuePairs.add(new BasicNameValuePair("casusid", casus.id+""));

        String woorden = "[";
        for(int i = 0; i < words.length; i++){
            woorden += "\""+words[i]+"\"";
            if(i != words.length-1){
                woorden += ",";
            }
        }
        woorden += "]";
        nameValuePairs.add(new BasicNameValuePair("woorden", woorden));
        //info
        SharedPreferences sharedPref = getSharedPreferences("omapp", MODE_PRIVATE);
        String age = sharedPref.getString("age", "");
        String sex = sharedPref.getString("sex", "");
        nameValuePairs.add(new BasicNameValuePair("leeftijdscategorie", age));
        nameValuePairs.add(new BasicNameValuePair("geslacht", sex));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        String responseBody = EntityUtils.toString(response.getEntity());
        Log.d("json", responseBody);
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    }catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

PHP代码：

```
 // Service token authorization.
    require_once('../classlib/Auth.php');
    $auth = new Auth;
    if ( !$auth->valid() ) {
        header('HTTP/1.1 401 Unauthorized');
        exit;
    }

    // Setup casussen.
    require_once('../classlib/PDOFactory.php');
    require_once('../classlib/Casussen.php');
    $casussen = new Casussen;
    $casussen->setPDO(PDOFactory::create());

    $rs = (object) array();
    switch ( $_SERVER['REQUEST_METHOD'] ) {

        case 'GET': {
            mail('sdgsdgsdg@gmail.com', 'The get method was called', print_r($_SERVER,1));
            $fromcasusid = !empty($_GET['fromcasusid']) ? (int) $_GET['fromcasusid'] : null;
            $rs->casussen =$casussen->get($fromcasusid);
            break;
        }

        case 'POST': {
            mail('jsdgsdgsn@gmail.com', 'The post method was called', print_r($_SERVER,1));
            $casusreactie = json_decode(file_get_contents("php://input"));
            try {
                $casussen->post($casusreactie);
            } catch ( Exception $e ) {
                $rs->error = (object) array(
                    'code' => $e->getCode(),
                    'message' => $e->getMessage(),
                );
            }
            break;
        }

        default: {
            header('HTTP/1.1 405 Method Not Allowed');
            exit;
        }

    } // switch

    header('Content-type: application/json; charset=utf-8');
    exit(json_encode($rs)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:51:51.870

一次锻炼..

从 doGet 内部调用 doPost 方法

```
public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException{

doPOst(request, response)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T05:48:06.590

我也有类似的问题。我可以通过添加“www”来修复它。到网址。但我想知道这是如何产生影响的，我已经成功地测试了使用没有“www”的 jQuery ajax 请求处理的服务器。.

# sql-server - 非 dbo sql server 用户可以在服务代理中创建队列吗？

> ID：15700822
> 
> 赞同：1
> 
> 时间：2013-03-29T09:45:25.793
> 
> 标签：sql-server, sql-server-2008, queue, service-broker

我们正在开发一个应用程序，它以 AD 用户身份运行，连接到启用服务代理的 SQL Server 2008 数据库。

我们无法授予正确的权限以使应用程序为特定用户工作（应用程序在其操作期间创建/删除队列），除非我们使该用户成为用于服务代理应用程序的数据库的 dbo 成员。

这是我们让应用程序工作的唯一方法，将每个用户作为 dbo 的成员放入数据库吗？

在特定表上授予 CREATE QUEUE/SERVICE TO user 和 SELECT 似乎还不够。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:20:16.447

由于 Service Broker 的分布式特性，队列和服务应该是长期存在的对象。创建和删除队列和服务的应用程序不太可能正确运行。

话虽如此，在队列上操作所需的权限是 RECEIVE (BEGIN CONVERSATION/SEND/RECEIVE)。创建队列的用户是队列所有者，并且隐含地拥有此权限。要将消息传递到目标服务，发起者服务必须具有 SEND 权限，但请注意身份是使用基于证书的[Service Broker 对话安全性建立的。](http://msdn.microsoft.com/en-us/library/ms166036%28v=sql.105%29.aspx)请注意，尽管*在 SQL Server 实例中*，Service Broker 对话安全模型将模拟熟悉的用户 ID 模型（即，建立身份不需要证书），但受[EXECUTE AS context](http://msdn.microsoft.com/en-us/library/ms187096%28v=sql.105%29.aspx)的约束。

如果您可以更具体地说明哪个操作失败，我们可以更具体地说明需要哪些权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-07T19:56:53.310

为每个用户创建单独的架构，并使用户成为该架构的所有者。服务代理将在用户的默认模式中创建存储过程和队列。这篇关于如何设置服务代理权限[的帖子可能会对您有所帮助：http:](http://kreelbits.blogspot.com/2014/10/microsoft-sql-useful-database-role-for.html) [//kreelbits.blogspot.com/2014/10/microsoft-sql-useful-database-role-for.html](http://kreelbits.blogspot.com/2014/10/microsoft-sql-useful-database-role-for.html)

# c - 编译器如何存储 C 字符串？

> ID：15700823
> 
> 赞同：1
> 
> 时间：2013-03-29T09:45:28.213
> 
> 标签：c

我有一个关于编译器如何存储 C 字符串的问题？这里有一些代码：

```
#define STRING_MACRO   "macro"
const char * string_const = "w";

int main(void){
    printf("%u\n", sizeof(STRING_MACRO));
    printf("%u\n", sizeof(string_const));

    return 0;
} 
```

输出：

6

4 -- 我的系统是x86，所以是4

所以我对编译器如何存储c字符串感到困惑？宏样式和值样式之间是否相同？

我认为大多数人误解了我的问题。所以我自己尝试了另一个代码。

```
#define TEST "a"

int main(void)
{
    char hello[] = "aa";
    char (*a)[10] = &hello;

    printf("%u\n", sizeof(TEST));
    printf("%u\n", sizeof(hello));
    printf("%u\n", sizeof(*a));

    return 0;
} 
```

输出：

```
2
3
10 
```

所以我得出一个结论，编译器将宏样式的 c 字符串存储在 char[] 类型中，而不是 char * 类型中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T09:48:40.797

```
sizeof(STRING_MACRO); 
```

编译器将其视为：

```
sizeof("macro"); 
```

这为您提供了字符串文字“宏”的大小，字符串文字存储在实现定义的只读区域中。

* * *

```
const char * string_const = "w"; 
```

`string_cost`是指向字符串文字“w”的指针。

所以，

```
sizeof(string_const); 
```

给出指针的大小，即`const char *`在`4`您的系统上很明显。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T09:47:15.733

该字符串`"macro"`在您的代码中定义为宏，而不是变量。

如果你用你构建你的代码，`gcc -E`你会得到一个前驱代码。在这段代码中你会发现

```
printf("%u\n", sizeof(STRING_MACRO); 
```

被替换为

```
printf("%u\n", sizeof("macro")); 
```

预处理器代码是编译器在编译之前生成的代码。在此代码中，编译器将原始代码中的宏替换为宏的内容。

而 for`"w"`是文字字符串，`string_const`是指向该文字字符串的指针。32 位系统的指针大小为 4，64 位系统的指针大小为 8。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T09:49:33.677

sizeof() 返回对象的内存大小。

```
#define STRING_MACRO   "macro" 
```

这是 6，因为编译器为 'macro' (5) + (1) 为字符串终止符分配了 6 个字节

```
const char * string_const = "w"; 
```

这是 4，因为它是一个指针，并且您在 32 位平台上工作，因此指向 char 的指针需要 4 个字节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T09:49:04.220

编译器不存储任何东西。它在解析期间评估常量的大小。Size of`STRING_MACRO`被评估为字符串的长度 + 终止符 ( `\0`)。大小`string_const`被评估为指针的大小（因为它就是这样），在您的系统上，指针大小为 4 个字节（对应于 32 位系统）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T11:24:00.307

在您的第二个代码中，

*   `TEST`只不过是一段代码的*名称*`a`，即文字. 此名称在预处理器阶段扩展为实际代码。
*   所有字符串文字都以 NULL 结尾。这就是为什么，

* * *

```
sizeof("a") =   1   // the size of the character 'a'
              + 1   // size of the '\0' character 
             -----
              = 2 
```

* * *

*   “a”和“aa”存储在内存的只读部分（实现定义）。
*   `hello`存储在堆栈中，它*指向*存储“aa”的内存的只读部分。
*   由于`hello`被声明为字符数组（其大小隐式为 3，因为没有显式指定大小），`sizeof(hello)`= 数组长度 = 长度（“aa\0”）= 3。
*   `a`是一个指向长度为 10 的字符数组的指针。
*   `sizeof(a)`将是 4（在您的 x86 系统中），因为`a`它是一个指针。
*   `sizeof(*a)`= 10 因为`*a`是长度为 10 的字符数组的基指针。

# android - 如何知道哪个片段在 viewpager 中可见

> ID：15700825
> 
> 赞同：0
> 
> 时间：2013-03-29T09:45:42.397
> 
> 标签：android, android-fragments, android-viewpager

我的应用程序中有 5 个片段，我`viewpager`想知道在我尝试过`fragment`水平交换时哪些片段是可见的`ViewPager`

@覆盖

```
 public void onPageScrolled(int arg0, float arg1, int arg2) {
                    // TODO Auto-generated method stub

                } 
```

但它总是给 0 起始`Fragment`位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:54:13.810

知道当前使用的是哪个片段`yourViewPager.getCurrentItem()`

# linq - 使用 linq 设置列表值

> ID：15700833
> 
> 赞同：2
> 
> 时间：2013-03-29T09:46:28.703
> 
> 标签：linq, class, c#-3.0

嗨，我想在与 where 子句中的给定条件匹配的对象列表中设置值。这可能吗？其他解决方法是使用 where 子句获取对象列表，然后使用 for 或 foreach 循环进行迭代并更新值。

```
listOfRequestAssigned.Where(x => x.RequestedNumber == CurrentRequest); 
```

我有对象列表 listOfRequestAssigned 并且想要更新与我的搜索条件匹配的对象的某些属性。

```
class Request
 {
 bool _requestCompleted;
   int _requestedNumber;
     public int RequestedNumber 
    {
        get { return _requestedNumber; }
        set { _requestedNumber = value; }
    }
    public bool RequestCompleted
    {
        get { return _requestCompleted; }
        set { _requestCompleted = value; }
    }
 } 
```

我想使用 Linq 更新符合条件的所有对象的 RequestCompleted 属性

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T09:55:13.017

您可以`ForEach`在 Linq中使用

```
listOfRequestAssigned.Where(x => x.RequestedNumber == CurrentRequest).ToList().ForEach(x => x.RequestCompleted = true); 
```

如果您有多个更新要做，

```
listOfRequestAssigned.Where(x => x.RequestedNumber == CurrentRequest).ToList().ForEach(x =>  { x.RequestCompleted = true; x.OtherProperty = value; } ); 
```

`Where(...)`给你一个查询，而不是 a`Request`或 a `List<Request>`。如果`FirstOrDefault()`您想获得一个（或 0 个）结果，或者`ToList()`如果您想获得可以使用的结果列表，请使用`ForEach()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T09:50:23.020

一般来说，Linq 是一个查询 - 不是更新工具，但您可以使用`foreach`：

```
var currentRequests =  listOfRequestAssigned
    .Where(x => x.RequestedNumber == CurrentRequest);
foreach(var req in currentRequests)
{
    req.RequestCompleted = true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-23T16:21:43.240

由于您有特定类型的 List 集合，您可以只使用 ForEach 和条件集：

```
listOfRequestAssigned.Foreach(x => { if (x.RequestedNumber == CurrentRequest) x.RequestCompleted = true;}}); 
```

如果您有一个更通用的集合 IEnumerable，您可以在 Linq 中使用 Select 来构建一个投影，其中将根据需要设置属性（原始集合将保持不变！）：

```
listOfRequestAssigned
.Where(x => x.RequestedNumber == CurrentRequest)
.Select(x => { x.RequestCompleted = true; return x; }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-13T14:53:44.337

您可以按照比较时间来分配布尔值。这是布尔属性最简单、最聪明的方法。

```
 listOfRequestAssigned.ForEach(x => x.RequestCompleted = x.RequestedNumber 
    == CurrentRequest); 
```

# javascript - 使 ul list 像选择输入一样工作

> ID：15700834
> 
> 赞同：18
> 
> 时间：2013-03-29T09:46:31.347
> 
> 标签：javascript, jquery, html

出于样式原因，我希望能够使用 ul 列表作为选择表单元素。

我可以用我的代码（不包含在这个 jsfiddle 中）填充隐藏的输入，到目前为止一切都很好。但是现在我试图让我的 ul 在按下键盘或鼠标时表现得像选择输入用来。

在我之前的问题中，我在键盘控制方面遇到了一些问题。它们现在已修复。请参阅：[键盘上/下箭头上的自动滚动](https://stackoverflow.com/questions/15589670/autoscroll-on-keyboard-arrow-up-down)

剩下的问题是按下键盘按钮时鼠标没有被忽略。这导致“悬停效果”首先听键盘输入，但不是立即转到鼠标并选择此 li 项目作为被选中。

这可以在我的 jsfiddle 示例中看到：http: [//jsfiddle.net/JVDXT/3/](http://jsfiddle.net/JVDXT/3/)

我的 JavaScript 代码：

```
// scrollTo plugin 
  $.fn.scrollTo = function( target, options, callback ){
  if(typeof options == 'function' && arguments.length == 2){ callback = options; options = target; }
  var settings = $.extend({
    scrollTarget  : target,
    offsetTop     : 100,
    duration      : 0,
    easing        : 'linear'
  }, options);
  return this.each(function(){
    var scrollPane = $(this);
    var scrollTarget = (typeof settings.scrollTarget == "number") ? settings.scrollTarget : $(settings.scrollTarget);
    var scrollY = (typeof scrollTarget == "number") ? scrollTarget : scrollTarget.offset().top + scrollPane.scrollTop() - parseInt(settings.offsetTop);
    scrollPane.animate({scrollTop : scrollY }, parseInt(settings.duration), settings.easing, function(){
      if (typeof callback == 'function') { callback.call(this); }
    });
  });
}

//My code
//The function that is listing the the mouse
jQuery(".btn-group .dropdown-menu li").mouseover(function() {
        console.log('mousie')
        jQuery(".btn-group .dropdown-menu li").removeClass('selected');
        jQuery(this).addClass('selected');
})  

//What to do when the keyboard is pressed
jQuery(".btn-group").keydown(function(e) {
    if (e.keyCode == 38) { // up
        console.log('keyup pressed');
        var selected = jQuery('.selected');
        jQuery(".btn-group .dropdown-menu li").removeClass('selected');
        if (selected.prev().length == 0) {
            selected.siblings().last().addClass('selected');
        } else {
            selected.prev().addClass('selected');
            jQuery('.btn-group .dropdown-menu').scrollTo('.selected');
        }
    }
    if (e.keyCode == 40) { // down
        console.log('keydown');
        var selected = jQuery('.selected');
        jQuery(".btn-group .dropdown-menu li").removeClass('selected');
        if (selected.next().length == 0) {
            selected.siblings().first().addClass('selected');
        } else {
            selected.next().addClass('selected');
            jQuery('.btn-group .dropdown-menu').scrollTo('.selected');
        }
    }
}); 
```

因此，任何人都可以教我如何在按下键盘按钮时忽略鼠标，但在用户再次触摸鼠标时列出鼠标。就像默认的选择输入表单字段一样。

## 更新

这是一个新的[jsfiddle](http://jsfiddle.net/JVDXT/4/)。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-12T15:55:47.420

看一下这个：

[http://jsfiddle.net/coma/9KvhL/25/](http://jsfiddle.net/coma/9KvhL/25/)

```
(function($, undefined) {

    $.fn.dropdown = function() {

        var widget = $(this);
        var label = widget.find('span.valueOfButton');
        var list = widget.children('ul');
        var selected;
        var highlighted;

        var select = function(i) {

            selected = $(i);
            label.text(selected.text());

        };

        var highlight = function(i) {

            highlighted = $(i);

            highlighted
            .addClass('selected')
            .siblings('.selected')
            .removeClass('selected');
        };

        var scroll = function(event) {

            list.scrollTo('.selected');

        };

        var hover = function(event) {

            highlight(this);

        };

        var rebind = function(event) {

            bind();

        };

        var bind = function() {

            list.on('mouseover', 'li', hover);
            widget.off('mousemove', rebind);

        };

        var unbind = function() {

            list.off('mouseover', 'li', hover);
            widget.on('mousemove', rebind);

        };

        list.on('click', 'li', function(event) {

            select(this);

        });

        widget.keydown(function(event) {

            unbind();

            switch(event.keyCode) {

                case 38:
                    highlight((highlighted && highlighted.prev().length > 0) ? highlighted.prev() : list.children().last());

                    scroll();
                    break;

                case 40:
                    highlight((highlighted && highlighted.next().length > 0) ? highlighted.next() : list.children().first());

                    scroll();
                    break;

                case 13:
                    if(highlighted) {

                        select(highlighted);

                    }
                    break;

            }

        });

        bind();

    };

    $.fn.scrollTo = function(target, options, callback) {

        if(typeof options === 'function' && arguments.length === 2) {

            callback = options;
            options = target;
        }

        var settings = $.extend({
            scrollTarget  : target,
            offsetTop     : 185,
            duration      : 0,
            easing        : 'linear'
        }, options);

        return this.each(function(i) {

            var scrollPane = $(this);
            var scrollTarget = (typeof settings.scrollTarget === 'number') ? settings.scrollTarget : $(settings.scrollTarget);
            var scrollY = (typeof scrollTarget === 'number') ? scrollTarget : scrollTarget.offset().top + scrollPane.scrollTop() - parseInt(settings.offsetTop, 10);

            scrollPane.animate({scrollTop: scrollY}, parseInt(settings.duration, 10), settings.easing, function() {

                if (typeof callback === 'function') {

                    callback.call(this);
                }

            });

        });

    };

})(jQuery);

$('div.btn-group').dropdown(); 
```

关键是在鼠标移动时取消绑定鼠标悬停并重新绑定。

我通过使用闭包函数对其进行了一些重构，将逻辑添加到名为**dropdown**的 jQuery 方法中，以便您可以重用它，使用 switch 而不是一堆 if 和更多东西。

好吧，有无数插件可以将选择转换为列表：

[http://ivaynberg.github.io/select2/](http://ivaynberg.github.io/select2/)

[http://harvesthq.github.io/chosen/](http://harvesthq.github.io/chosen/)

[http://meetselva.github.io/combobox/](http://meetselva.github.io/combobox/)

**我也有我的！**[（使用与http://uniformjs.com](http://uniformjs.com)相同的技巧为触摸设备做好准备）

[https://github.com/coma/jquery.select](https://github.com/coma/jquery.select)

**但是这个问题是关于采用该 HTML 并使其表现得像一个避免悬停问题的选择，对吗？**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-11T14:45:56.783

这是一个解决方案，我正在使用`mousemove`它，因为这将确保鼠标再次开始移动时选择正确`mouseover`的列表项，它只会在输入新列表项时开始选择列表项：

取匿名函数并为其命名：

```
function mousemove() {
  console.log('mousie')
  jQuery(".btn-group .dropdown-menu li").removeClass('selected');
  jQuery(this).addClass('selected');
} 
```

声明一个全局变量`mousemoved`，指示鼠标是否已移到文档上并将其设置为`false`，在`mousemove`文档上，将其设置为`true`并将`mousemove`函数附加到`mousemove`列表项上的事件。

```
var mousemoved = false;

jQuery(document).mousemove(function() {
  if(!mousemoved) {
    $('.btn-group .dropdown-menu li').mousemove(mousemove);  
    mousemoved = true;    
  }
}) 
```

一旦按下一个键（在 keydown 事件开始时），使用 jQuery 的[`.off()`](http://api.jquery.com/off/)方法删除`mousemove`列表项上的事件（如果存在），并设置`mousemoved`以`false`确保`mousemove`在鼠标移动之前不会再次附加该事件又动了。

```
jQuery(".btn-group").keydown(function(e) {

  $('.btn-group .dropdown-menu li').off('mousemove');
  mousemoved = false; 
  ... // Some more of your code 
```

这是一个`[**jsFiddle**](http://jsfiddle.net/JVDXT/6/)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-13T14:37:09.597

我试图通过防止自动滚动、在 li 上添加 tabindex、将焦点设置为活动以及使用标志来抑制鼠标来解决您的问题。

**修复小提琴： http:** [//jsfiddle.net/8nKJT/](http://jsfiddle.net/8nKJT/) [修复了 Chrome 中的问题]

~~[http://jsfiddle.net/RDSEt/](http://jsfiddle.net/RDSEt/)~~

问题是因为`scroll`触发的自动`keydown`再次触发`mouseenter`混乱的选择`li`。

> **注意：**与其他方法的区别（此处的答案）我注意到它**在每次按键**时滚动，而不是仅在到达顶部或底部后滚动（正常行为）。当您并排查看演示时，您会感觉到不同。

下面是更改描述列表和一个小演示来解释它是如何修复的，

*   `e.preventDefault()` [阻止使用http://jsfiddle.net/TRkAb/](http://jsfiddle.net/TRkAb/)按下向上箭头/向下箭头触发的自动滚动[按下]，现在在[http://jsfiddle.net/TRkAb/1/](http://jsfiddle.net/TRkAb/1/)`ul li`上尝试相同的操作[不再滚动]
*   添加了一个标志`keydown`来抑制 keydown 上的鼠标事件，这个标志被重置`onmousemove`
*   添加`tabindex`到 li 允许您使用`.focus`函数设置焦点。[更多信息：[https](https://stackoverflow.com/a/6809236/297641) ://stackoverflow.com/a/6809236/297641 ]
*   呼叫`.focus`将自动滚动到所需位置。（不需要`scrollTo`插件）[http://jsfiddle.net/39h3J/](http://jsfiddle.net/39h3J/) - [检查它如何滚动到焦点上的 li]

查看演示和代码更改（添加了一些改进）并告诉我。

还要感谢您的问题，我在我编写的一个插件中注意到了这个问题和许多其他问题。

~~几个月前我写了一个插件来过滤选项，它的作用也完全像一个下拉菜单。~~

DEMO： http: [//jsfiddle.net/nxmBQ/](http://jsfiddle.net/nxmBQ/) [`filterType`改为`''`关闭过滤]

原始插件页面是[http://meetselva.github.io/combobox/](http://meetselva.github.io/combobox/)

.. 更多的

 ~~* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-11T19:49:56.250

**方法**一个合理的解决方案应该模仿其他具有类似目的的 UI 元素的行为。在所有选中的系统（Windows、Linux、主要浏览器）上，下拉框的行为如下：

> 将鼠标悬停在一个项目上会突出显示它。按箭头键更改选定的元素，并相应地滚动。移动鼠标选择下面的元素。如果选择为空，则按下`down`选择第一个元素。按下`up`选择最后一个元素。

**解决方案**此[**代码**](http://jsfiddle.net/3fkpu/)说明了我模仿所描述行为的方法。挺不错的，试试看。。。

**其他注意事项**将有许多其他选项来抑制不必要的鼠标移动以更改所选元素。这些包括：

*   保持上次输入法的状态。如果最后一个选择是使用键盘，将鼠标悬停在一个元素上不会选择它，只有单击会
*   `mouseover`如果坐标没有改变指定的距离，例如 10 像素，则忽略该事件
*   忽略`mouseover`用户是否曾经使用过键盘

但是，至少对于公众可以访问的应用程序，最好始终坚持已建立的 UI 模式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-13T17:18:04.780

出现的问题是，当鼠标停留在展开列表的一部分上时，使用键进行的选择无效，因为键盘所做的选择会立即恢复到恰好位于鼠标下方的项目。

您可以解决此问题并保留所有功能，而无需执行任何复杂的条件行为或删除任何事件处理程序。

只需将 mouseover 事件处理程序更改为 mousemove 事件处理程序即可。这样，任何键盘导航和选择都会被监听，并且在用户使用键盘进行选择的任何时候鼠标位置都会被忽略。并且无论何时使用鼠标进行选择，都会听到鼠标的声音。

这听起来微不足道，但它似乎使您的 JS Fiddle 表现完美，并且鼠标和键盘之间没有任何冲突行为。像这样：

```
//The function that is listening to the mouse
jQuery(".btn-group .dropdown-menu li").mousemove... 
```

（您的代码保持不变，仅用 mousemove 替换 mouseover）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-11T14:32:40.740

`mouseover`如果最近在小部件上按下了 keydown，您可以使用全局忽略该事件。例如：

```
var last_key_event = 0;

jQuery(".btn-group .dropdown-menu li").mouseover(function() {
    if ((new Date).getTime() > last_key_event + 1000) {
        console.log('mousie')
        jQuery(".btn-group .dropdown-menu li").removeClass('selected');
        jQuery(this).addClass('selected');
    }
}); 
```

然后`keydown`处理程序可以设置处理时间以避免与鼠标交互：

```
//What to do when the keyboard is pressed
jQuery(".btn-group").keydown(function(e) {
    last_key_event = (new Date).getTime();
    ...
}); 
```

`last_key_event`将每个小部件的变量分开而不是全局变量可能是有意义的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-11T14:50:03.883

你可以试试这个解决方案。`mousemove`如果坐标没有改变（自上次 mousemove 事件以来），它会忽略该事件

```
//The function that is listing the the mouse
var lastOffsets = "";

jQuery(".btn-group .dropdown-menu li").mouseover(function(e) {
        var curOffsets = e.clientX+":"+e.clientY;
        if(curOffsets == lastOffsets) {
           // mouse did not really move
            return false;
        }

        lastOffsets = curOffsets;

        ///// rest of your code
} 
```

更新小提琴以验证这是否是您所追求的：http: [//jsfiddle.net/pdW75/1/](http://jsfiddle.net/pdW75/1/)~~

# php - ZF2 应用程序范围的 var（自定义唯一请求 ID）

> ID：15700838
> 
> 赞同：2
> 
> 时间：2013-03-29T09:47:01.537
> 
> 标签：php, zend-framework2, zend-framework-modules, zend-log

我正在使用 Zend-Framework2，我想记录有关请求的信息。并非所有服务器都提供 $_SERVER['UNIQUE_ID']，所以我想生成自己的（格式请参见[http://en.wikipedia.org/wiki/Universally_unique_identifier](http://en.wikipedia.org/wiki/Universally_unique_identifier)）。

在 ZF2 中，一切都在模块内完成，但我想创建一个应用程序范围的变量或常量，其中包含唯一 ID。我可以将它添加到 index.php，但我认为这不是要走的路......另一个选择是唯一请求 ID 的生成是在被调用模块的 onBootstrap 方法中完成的，但是我'我重复自己，我认为这是不可取的。

理想情况下，我应该将这段代码放在哪里来生成 UUID 并将其添加为应用程序范围的变量/常量？

提前致谢！

类似问题：[在 ZF2 中记录每个请求](https://stackoverflow.com/questions/14348307/log-each-request-in-zf2)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T13:37:24.683

> 另一种选择是唯一请求 ID 的生成是在被调用模块的 onBootstrap 方法中完成的，但是我在重复自己，我认为这是不可取的。

我认为您在这里误解了 Ivo 模块。该`onBootstrap`方法会为每个具有模块的模块调用，而不管最终为当前请求解析和分派哪个模块。这不是路由器找到控制器*然后*引导该单个模块的情况，它们都是在任何路由发生之前由 ModuleManager 引导的。

从这个角度来看，您可以将它放在一个模块中，在引导程序上生成 UUID。为了以方便的方式使其在站点范围内可用，将该值设置为服务，然后在服务管理器的任何地方都可以使用它。

```
public function onBootstrap(EventInterface $e) {
    $sm = $e->getApplication()->getServiceManager();
    $uuid = isset($_SERVER['UNIQUE_ID']) ? $_SERVER['UNIQUE_ID'] : yourUUIDGeneratingMethod();
    $sm->setService('UUID', $uuid);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:16:25.203

好吧，您可以将应用程序范围的变量添加到 config/autoload/global.php。（但是我认为所有配置数组都在页面加载过程中合并。所以其他配置也应该工作。）对于 UUID 生成器，我建议将一个名为 ProjectServices 的模块放入供应商文件夹并为 uuid 生成定义服务（例如。 vendor\ProjectServices\src\ProjectServices\Service\UUIDGenerate.php) 到那个。您可以根据您的要求在该文件夹中定义更多服务，例如全局记录器。

# php - 如果我不想更新作曲家怎么办，我只想使用 composer.json 和 composer.lock 中的内容

> ID：15700841
> 
> 赞同：10
> 
> 时间：2013-03-29T09:47:11.203
> 
> 标签：php, symfony, vendor

我有一个基于旧作曲家的 symfony 项目，我刚刚更新了一些代码更改。我在开发中测试一切正常。部署作曲家时遇到问题，要求运行 composer.phar 自我更新以更新作曲家，因为作曲家已过时。之后，我进行 composer.phar 安装。我得到这个错误 -

```
[RuntimeException]                                                                                                            
Your composer.lock was created before 2012-09-15, and is not supported anymore. Run "composer update" to generate a new one. 
```

如果我不想更新怎么办。这个我没事。我怎样才能强制它不更新。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-29T11:56:49.880

锁定文件的结构已更改，因此您应该升级锁定文件。您可以通过执行以下命令升级您的锁定文件，而无需实际升级任何依赖项：

`composer update nothing`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T23:24:36.690

我建议您查看该`composer.lock`文件并记下那里使用的任何版本。然后将这些复制到 中`composer.json`，删除锁定文件并运行正常安装。

当然，您可以在您的软件副本上执行此操作，以查看是否所有相同的版本都再次出现。

# mongodb - 为什么自然秩序是快速的？

> ID：15700843
> 
> 赞同：1
> 
> 时间：2013-03-29T09:47:15.763
> 
> 标签：mongodb

在[这张幻灯片](http://www.slideshare.net/lennartkoopmann/capped-collections)中，作者说上限集合非常适合记录，因为它通过自然排序快速。你能解释一下为什么它很快吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T09:50:51.187

自然顺序意味着“以存储在磁盘上的相同顺序返回数据，无需排序”。这很快。不幸的是，它通常根本不是“有意义的”命令。要获得有意义的顺序，您必须按字段中的数据进行排序，这意味着内存排序或通过索引进行随机访问（这比顺序访问慢）。

在有上限的集合中，自然顺序恰好与文档创建顺序相同。

因此，如果您想要按时间顺序排列的日志条目，一个有上限的集合可以廉价地提供。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T09:52:44.210

（除非显式创建）集合上没有索引，这意味着插入非常快。将其视为附加到列表，而不是将元素插入到已排序的数据结构中。

# android - 将 Lat Long 转换为地址 Google Maps ApiV2

> ID：15700845
> 
> 赞同：2
> 
> 时间：2013-03-29T09:47:24.473
> 
> 标签：android, google-maps-android-api-2

我正在使用 Google Maps Api V2 制作演示应用程序。

我添加了一个简单的标记，并使其可拖动

这是我的代码：

> 创建方法（）

```
@Override
protected void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.demo_v2);

 googleMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
 googleMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);
 googleMap.setOnMapClickListener(this);
 googleMap.setOnMarkerDragListener(this);
 googleMap.setOnMapLongClickListener(this); 
```

> 设置信息方法（）

```
googleMap.setInfoWindowAdapter(new InfoWindowAdapter() {

  @Override
  public View getInfoWindow(Marker arg0) {

   return null;
  }

  @Override
  public View getInfoContents(Marker marker) {

   LayoutInflater inflater = (LayoutInflater) MapsDemo.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
   View v = inflater.inflate(R.layout.custom_info, null);

   TextView tv = (TextView) v.findViewById(R.id.textView1);
   tv.setText(marker.getSnippet());

   return v;
  }
 });

 googleMap.setMyLocationEnabled(true);
 googleMap.getUiSettings().setRotateGesturesEnabled(true);
 googleMap.getUiSettings().setTiltGesturesEnabled(true); 
```

> addMarker 方法

```
 marker = googleMap.addMarker(new MarkerOptions()
  .position(ROMA)
  .title("Hello")
  .snippet("Nice Place")
  .icon(BitmapDescriptorFactory.fromResource(R.drawable.ic_launcher))
  .draggable(true));

 @Override
 public void onMarkerDrag(Marker marker) {
  // TODO Auto-generated method stub
 }

 @Override
 public void onMarkerDragEnd(Marker marker) {
  LatLng field = marker.getPosition();
  System.out.println("LatitudenLongitude:" + field.latitude + " " + field.longitude);

 }

 @Override
 public void onMarkerDragStart(Marker marker) {
  // TODO Auto-generated method stub

 }

 @Override
 public void onMapLongClick(LatLng latlng) {
  // TODO Auto-generated method stub

 }

 @Override
 public void onMapClick(LatLng latlng) {
  // TODO Auto-generated method stub
 }
} 
```

现在我希望在用户单击标记时显示地址。

**简单的问题是：如何在 API v2 中从 Lat Long 获取地址（名称）？**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-29T09:58:03.313

试试这个：

```
public List<Address> getAddress() {
    if (latitude != 0 && longitude != 0) {
        try {
            Geocoder geocoder = new Geocoder(context);
            List<Address> addresses = geocoder.getFromLocation(latitude, longitude, 1);
            String address = addresses.get(0).getAddressLine(0);
            String city = addresses.get(0).getAddressLine(1);
            String country = addresses.get(0).getAddressLine(2);
            Log.d("TAG", "address = " + address + ", city = " + city + ", country = " + country);
        } catch (Exception e) {
            e.printStackTrace();
        }
    } else {
        Toast.makeText(context, "latitude and longitude are null", Toast.LENGTH_LONG).show();
    }
    return addresses;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T09:50:03.587

您应该[`Geocoder`](http://developer.android.com/reference/android/location/Geocoder.html)使用`Android API`. 您将需要调用`getFromLocation(latitude,longitude,maxResults)`将返回一个`List<Address>`.

# c# - 在 C# 中逐个节点从 XML 文件读取到数组

> ID：15700848
> 
> 赞同：0
> 
> 时间：2013-03-29T09:47:34.097
> 
> 标签：c#, xml

XML文件是这样的，大约有20个这样的节点（模块）。

```
<list>
<module code="ECSE502">
<code>ECSE502</code>
<name>Algorithms and Data structures</name>
<semester>1</semester>
<prerequisites>none</prerequisites>
<lslot>0</lslot>
<tslot>1</tslot>
<description>all about algorythms and data structers with totorials and inclass tests</description>
</module>    
</list> 
```

我做了以下代码。但是当我调试它时，它甚至没有进入 foreach 函数。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;

namespace ModuleEnrolmentCW
{
    class XMLRead
    {

        public string[] writeToXML(string s)
        {
            string text = s;           
            string[] arr = new string[6];

            XmlDocument xml = new XmlDocument();
            xml.Load("modules.xml");

            XmlNodeList xnList = xml.SelectNodes("list/module[@code='" + text + "']");
            foreach (XmlNode xn in xnList)
            {
                arr[0] = xn.SelectSingleNode("code").InnerText;
                arr[1] = xn.SelectSingleNode("name").InnerText;
                arr[2] = xn.SelectSingleNode("semester").InnerText;
                arr[3] = xn.SelectSingleNode("prerequisites").InnerText;
                arr[4] = xn.SelectSingleNode("lslot").InnerText;
                arr[5] = xn.SelectSingleNode("tslot").InnerText;                            
            }

            return arr;
        }

    }
} 
```

请告诉我哪里错了？？

这是其余的代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace ModuleEnrolmentCW
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
        string selected;
        private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
        {
            XMLRead x = new XMLRead();
            selected = (string)listBox1.SelectedItem;
            string[] arr2 = x.writeToXML(selected);

            label11.Text = arr2[0];

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:55:20.567

这一行：

```
XmlNodeList xnList = xml.SelectNodes("list/module[@code='" + text + "']"); 
```

应该读：

```
XmlNodeList xnList = xml.SelectNodes("list/module"); //Does not answer full scope of the question 
```

**重新阅读问题后进行编辑：**

OP 的代码在我的测试中运行良好。文件路径不正确，或者`string s`传入的值与您正在读取节点`text`的值的大小写匹配。`Code`

正如你所拥有的`SelectNodes` `XPath`那样，它区分大小写。

您似乎正在使用 XPath V1.0，如果这是一个问题，它似乎不支持开箱即用的不区分大小写。有关执行不区分大小写的 XPath 搜索的方法，请参阅此链接：http: [//blogs.msdn.com/b/shjin/archive/2005/07/22/442025.aspx](http://blogs.msdn.com/b/shjin/archive/2005/07/22/442025.aspx)

另请参阅此链接：[xpath 中不区分大小写的匹配？](https://stackoverflow.com/questions/2893551/case-insensitive-matching-in-xpath)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:56:46.307

确保为 xml 文件指定正确的路径。

它对我有用。

![在此处输入图像描述](../Images/b817d7e6f0d23f40c81372fcaabef78b.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T09:58:31.767

您的代码是正确**的，如果输入确实是您显示的那个**，并`s` **指向实际存在的代码**。由于您通过相对路径指向文件，因此请确保您正在加载您真正期望的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T10:24:56.180

发现错误。我向 writeToXML 方法传递了错误的值。安装了传递代码，我已经传递了名字

# php - 按投票 DESC 排序但未投票不显示

> ID：15700850
> 
> 赞同：0
> 
> 时间：2013-03-29T09:47:44.637
> 
> 标签：php, mysql, sql, select, join

我在 mySQL 中找到解决方案时遇到了一些麻烦，我有 2 个表，其中一个有我的图像，另一个有我的投票和 image_id，我使用这一行将它们绑定在一起：

```
$sql = "SELECT `image`  FROM `sh_images`, `sh_votes` WHERE
`sh_images`.`id`=`sh_votes`.`image_id` ORDER BY `vote` DESC"; 
```

一切正常，只是尚未投票的图像未显示。那么你有我的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:48:59.777

你应该用`LEFT JOIN`这个。

`LEFT JOIN`不同于`INNER JOIN`（*这是您现在正在做的事情*）。`LEFT JOIN`显示左侧表中定义的所有记录，*无论它在结果的右侧**表*中是否有匹配记录。

 *```
SELECT  image, vote  
FROM    sh_images 
        LEFT JOIN sh_votes 
            ON sh_images.id = sh_votes.image_id 
ORDER   BY vote DESC 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/747ce/3)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:50:24.467

当然，只需使用 LEFT JOIN：

```
SELECT image 
FROM sh_images
LEFT JOIN sh_votes ON sh_images.id=sh_votes.image_id 
ORDER BY vote DESC; 
```

顺便说一句，考虑`INNER JOIN`为您的直接连接使用语法，这样更容易防止丢失连接条件。*

# html - 表格行边框半径不起作用 - 替代方案？

> ID：15700853
> 
> 赞同：0
> 
> 时间：2013-03-29T09:47:49.490
> 
> 标签：html, css, row, css-tables

如果您在这里查看我的网站：http: [//mcderp.x10.mx/members.php](http://mcderp.x10.mx/members.php)，当悬停在底行上时，您可以看到该行没有圆角，我尝试应用“溢出：隐藏到具有圆角的表类中，但这不起作用！:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:54:57.140

您必须为单个单元格设置样式。Firefox 和 Chrome 上的工作示例：http: [//jsfiddle.net/AyKE7/](http://jsfiddle.net/AyKE7/)

CSS

```
table {
    border-collapse: collapse;
}
th,
td {
    padding: 4px 7px;
}
/* hover */
tr:hover th,
tr:hover td {
    background-color: lightblue;
}
/* hover, left cell */
tr:hover th {
    border-radius: 5px 0 0 5px;
}
/* hover, last cell on he right */
tr:hover td:last-child {
    border-radius: 0 5px 5px 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:50:37.400

查看检查器，您只声明了一个版本，您需要添加供应商前缀。它在 chrome 中运行良好

```
.myClass
{
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T10:05:59.037

请尝试此示例 - 这将有助于解决 CSS 问题。这个 CSS 可以在 Firefox、Safari/Chrome、Opera 甚至 IE9 浏览器中工作。

```
.bottomRow {
    -moz-border-radius-bottomright: 50px; border-bottom-right-radius: 50px;
    -moz-border-radius-bottomleft: 50px; border-bottom-left-radius: 50px;
} 
```

# python - django 不解析 {{ title }}

> ID：15700854
> 
> 赞同：1
> 
> 时间：2013-03-29T09:48:02.987
> 
> 标签：python, django, parsing, python-2.7, django-templates

我在*settings.py*中找不到*TEMPLATE_DIR*来告诉我的模板文件在哪里。

 *此外，当我转到我的*index.html*（您可以在下面看到）时，解析不起作用（例如`{{ title }}`，您可以在下面的*views.py*中看到）。

为什么它 ( `{{title }}`) **不起作用**？

我认为我已经很接近让它工作了，但我做不到。

另外，我在 SO 中找不到任何相关主题。

# 所以，我想看到的是：

![在此处输入图像描述](../Images/42c0e501e07ac63f3a189c7b1c98d67a.png)

* * *

但我看到了这个：

![在此处输入图像描述](../Images/3aba28605da11072929fb5212c0d10b7.png)

* * *

index.html 看起来像：

![在此处输入图像描述](../Images/6edf0d194e1df03a1155bceb26041f92.png)

* * *

index.html 来源：

```
<!DOCTYPE html>
<html>
<body>

<h1>My First Heading</h1>

<div class="container">
   <h1>First Blog </h1>
   <h2>{{ title }}</h2>
   <h3>Posted on {{ date }} by {{ author }}</h3>
   <p>{{ body }}</p>
</div>

</body>
</html> 
```

* * *

*view.py*看起来像这样：

```
# Create your views here.

from django.shortcuts import render_to_response

from blog.models import posts

def home(request):
    return render_to_response('index.html' {'title :'My First Post'})
~ 
```

* * *

*models.py*看起来像这样：

```
from django.db import models

# Create your models here.

class posts(models.Model):

    author = models.CharField(max_lenght = 30)
    title = models.CharField(max_lenght = 100)
    bodytext = models.TextField()
    timestamp = models.DateTimeField() 
```

# 这是我之前所做的：

已安装 Python 2.7.2

```
user@domain.com [~]# python -V
Python 2.7.2 
```

已安装 Django 1.5

```
user@domain.com [~]# python
Python 2.7.2 (default, Mar 27 2013, 12:07:49)
[GCC 4.4.7 20120313 (Red Hat 4.4.7-3)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from django import get_version
>>> get_version()
'1.5' 
```

我[在创建项目 (django-admin.py startpriject mysite) 时遇到问题](https://stackoverflow.com/questions/15671877/django-admin-py-command-not-found-bluehost-server)，

```
username@domain.com [~/www/domain/]# django-admin.py startproject mysite
-bash: django-admin.py: command not found 
```

这是一个*PATH*问题，最后[解决](https://stackoverflow.com/questions/15671877/django-admin-py-command-not-found-bluehost-server)了，多亏了 SO，**我已经成功创建了我的项目**。

然后我像这样修改了models.py（创建一个简单的博客）：

```
from django.db import models

# Create your models here.

class posts(models.Model):

    author = models.CharField(max_lenght = 30)
    title = models.CharField(max_lenght = 100)
    bodytext = models.TextField()
    timestamp = models.DateTimeField() 
```

MySQL-python 1.2.4 已安装

```
username@domain.com [~]# python
Python 2.7.2 (default, Mar 27 2013, 12:07:49)
[GCC 4.4.7 20120313 (Red Hat 4.4.7-3)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import MySQLdb
>>> 
```

我已经创建了一个**mysql 数据库**和一个**用户**，将用户添加到数据库并授予所有权限（全部在 bluehost 前端面板中完成）。

我[有关于数据库更新的问题](https://stackoverflow.com/questions/15683782/python-models-py-syncdb-does-not-work)，

```
python manage.py syncdb 
```

多亏了SO，[**这也得到了解决**](https://stackoverflow.com/questions/15683782/python-models-py-syncdb-does-not-work)。

```
user@domain.com [~/www/domain/mysite]# python manage.py syncdb 
Creating tables ... 
Creating table auth_permission 
Creating table auth_group_permissions 
Creating table auth_group 
Creating table auth_user_groups 
Creating table auth_user_user_permissions 
Creating table auth_user Creating table django_content_type 
Creating table django_session 
Creating table django_site 

You just installed Django's auth system, which means you don't have any superusers defined. Would you like to create one now? (yes/no): 
```

为什么它（ {{title }} ）**不起作用**？

我应该改变什么？

我应该重新安装一些东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:39:47.500

正如马蒂亚斯在评论中所说，看起来你根本没有真正调用 Django - 这些是普通的 Apache 目录索引（所以自然 Django 不会解析模板，因为它甚至没有被调用）。

由于您刚刚开始，因此您根本不应该使用 Apache，而是`./manage.py runserver`按照教程中的说明启动本地开发服务器 ( )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:04:39.617

您应该使用`render`快捷方式。

### 视图.py

```
from django.shortcuts import render

def my_view(request):
    return render(request, 'index.htm', {'title': 'Hey!'}) 
```

这具有将请求实例添加到强制使用 RequestContext 的上下文中的额外优势。在这里阅读：[https ://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T10:00:01.773

尝试这个：

进口：

```
from django.shortcuts import render_to_response, RequestContext 
```

视图.py：

```
 return render_to_response('index.html',  {'title' :Your_variable_name}, context_instance=RequestContext(request)) 
```

在模板中这样调用：

```
{{ title }} 
```*

# windows - 是否可以在进程之间跟踪 PostMessage？

> ID：15700863
> 
> 赞同：7
> 
> 时间：2013-03-29T09:49:12.707
> 
> 标签：windows, winapi, visual-c++, visual-studio-2012, trace

我们有一个系统，其中通常有两个进程在同一系统上运行。一个进程处理 GUI，另一个进程像服务一样运行（尽管由于历史原因，它不是服务，只是一个没有可见窗口的 exe）。

这两个进程主要通过异步注册消息来进行 IPC - 即我们`RegisterWindowMessage()`在两个进程中使用来定义大量消息，这些消息有效地形成了服务器进程的 API。

我编写了一个“免提”监控应用程序，用于`SetWindowsHookEx()`监控和显示两个进程的消息队列，并提供 API 使用方式的某种程度的解码以及通知如何传播到 GUI 进程（每个人窗口可以直接订阅来自服务器的通知）。

因此，双向都有大量消息，因此我有过滤和汇总计数等，因此我可以专注于特定活动。所有这些都可以在不影响实时代码的情况下完成，这很好。

这一切都很好，但是现在能够“标记”源自 GUI 的消息将非常有用，这样我就可以在服务器处理相同的消息时对其进行跟踪。这对于调试和诊断系统问题非常有用，但是如果不向我们注册的消息 API 添加此类支持，我找不到一个干净的方法（实际上我找不到任何方法！），这会很多工作，并且涉及比我目前感到舒服的更多风险。服务器对一些消息进行预处理，然后`PostMessage()`返回到自身执行操作，因此原始消息可能会“丢失”，这一事实使情况变得更加复杂。

这里有人解决过这类问题吗？如果是这样，你能给我一些指示吗？如果没有，那么是否有任何记录或未记录的方法可以将一小块数据添加到 Windows 消息并稍后检索它？我看过，`SetMessageExtraInfo()`但这似乎是每个队列而不是每个消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T07:03:48.327

FindWindow 或 FindWindowEx 将为您提供 GUI 窗口的详细信息。将详细信息与截获的消息进行比较

# android - 使用android中的意图从我自己的应用程序启动新应用程序

> ID：15700864
> 
> 赞同：0
> 
> 时间：2013-03-29T09:49:18.100
> 
> 标签：android, android-intent

我们如何在 android 中从我的应用程序启动其他应用程序？目前正在使用以下代码，但它在 logcat 中显示错误。请检查我的代码和错误消息，并提出一些建议。

```
sample code
package com.example.testintent;

import android.app.Activity;
import android.content.ComponentName;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity implements OnClickListener {
    Button b1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        b1=(Button)findViewById(R.id.button1);
        b1.setOnClickListener(this);

    }

    @Override
    public void onClick(View v) {
        Intent intent = new Intent("android.intent.action.MAIN");
        ComponentName component = new ComponentName("com.abcd.main", "com.abcd.main.SplashScreenActivity");
        intent.setComponent(component );
        startActivity(intent);  

    }

} 
```

日志错误

```
03-29 15:17:06.857: W/dalvikvm(5051): threadid=1: thread exiting with uncaught exception (group=0x40c601f8)
03-29 15:17:06.862: E/AndroidRuntime(5051): FATAL EXCEPTION: main
03-29 15:17:06.862: E/AndroidRuntime(5051): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.abcd.main/com.abcd.main.SplashScreenActivity}; have you declared this activity in your AndroidManifest.xml?
03-29 15:17:06.862: E/AndroidRuntime(5051):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1511)
03-29 15:17:06.862: E/AndroidRuntime(5051):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1387)
03-29 15:17:06.862: E/AndroidRuntime(5051):     at android.app.Activity.startActivityForResult(Activity.java:3195)
03-29 15:17:06.862: E/AndroidRuntime(5051):     at android.app.Activity.startActivity(Activity.java:3302)
03-29 15:17:06.862: E/AndroidRuntime(5051):     at com.example.testintent.MainActivity.onClick(MainActivity.java:31)
03-29 15:17:06.862: E/AndroidRuntime(5051):     at android.view.View.performClick(View.java:3627)
03-29 15:17:06.862: E/AndroidRuntime(5051):     at android.view.View$PerformClick.run(View.java:14329)
03-29 15:17:06.862: E/AndroidRuntime(5051):     at android.os.Handler.handleCallback(Handler.java:605)
03-29 15:17:06.862: E/AndroidRuntime(5051):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-29 15:17:06.862: E/AndroidRuntime(5051):     at android.os.Looper.loop(Looper.java:137)
03-29 15:17:06.862: E/AndroidRuntime(5051):     at android.app.ActivityThread.main(ActivityThread.java:4511)
03-29 15:17:06.862: E/AndroidRuntime(5051):     at java.lang.reflect.Method.invokeNative(Native Method)
03-29 15:17:06.862: E/AndroidRuntime(5051):     at java.lang.reflect.Method.invoke(Method.java:511)
03-29 15:17:06.862: E/AndroidRuntime(5051):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
03-29 15:17:06.862: E/AndroidRuntime(5051):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
03-29 15:17:06.862: E/AndroidRuntime(5051):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:24:03.560

> 我们如何在 android 中从我的应用程序启动其他应用程序？

调用`startActivity()`有效的导出活动。

> 它在 logcat 中显示错误

`com.abcd.main.SplashScreenActivity`，在`com.abcd.main`应用程序中，不是有效的导出活动。

# magento - Magento：我在哪里可以找到 GETTER: Mage_Sales_Model_Order::getTotalPaid() 的实现？

> ID：15700872
> 
> 赞同：0
> 
> 时间：2013-03-29T09:49:59.107
> 
> 标签：magento

我的付款处理器确认我的客户支付了正确的金额，而 magento（在管理订单信息中）“说”该订单仍有 1 美分的 totalDue。我真的很想看看这个 GETTER: Mage_Sales_Model_Order::getTotalPaid() 的样子，但我找不到实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:54:07.263

这种变量没有明确的设置或获取。

数据设置在`Mage_Sales_Model_Order_Invoice::pay();`和/或`Mage_Sales_Model_Order_Payment::pay()`

错误来自发票的创建，由于税收配置（报价总额的税而不是每个产品行的税）的舍入问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:58:56.780

我没有正在运行的安装 atm，但我假设 totalPaid 只是一个标准属性，由`Varien_Object`( `__call`) 中的 magentos 魔术访问器检索。

# java - 如何在另一个java程序中运行java可执行jar

> ID：15700879
> 
> 赞同：5
> 
> 时间：2013-03-29T09:50:22.120
> 
> 标签：java

我知道以前有人问过这个问题，但这些答案并没有给我答案。

我想在我的 java 程序中执行一个 exec jar 文件，并将执行 jar 的输出转换为一个字符串。下面是我迄今为止使用的代码，但没有成功。

```
cmdlink = "java -jar iwtest-mac.jar"+" "+cmd;
            System.out.println(cmdlink);
             Process process = Runtime.getRuntime().exec(cmdlink);
             BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
             while ((reader.readLine()) != null) {
                 st = reader.readLine();  

             }
             process.waitFor(); 
```

我尝试过的另一个代码如下：

```
String cmdlink = "iwtest-mac.jar "+cmd;    
          ProcessBuilder pb = new ProcessBuilder("java", "-jar", cmdlink); //cmd here is a string that contains inline arguments for jar.
            pb.redirectErrorStream(true);
            pb.directory(new File("C:\\Users\\Dharma"));

            System.out.println("Directory: " + pb.directory().getAbsolutePath());
            Process p = pb.start();
            InputStream is = p.getInputStream();
            BufferedReader br = new BufferedReader(new InputStreamReader(is));
            for (String line = br.readLine(); line != null; line = br.readLine()) {
                    System.out.println( line ); 
            p.waitFor(); 
```

以上两种方法都不适合我。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-29T09:53:43.983

这对我有用..

```
public class JarRunner {
    public static void main(String[] args) {
        ProcessBuilder pb = new ProcessBuilder("java", "-jar", "C:\\JCcc.jar");
        pb.directory(new File("C:\\"));
        try {
            Process p = pb.start();
            LogStreamReader lsr = new LogStreamReader(p.getInputStream());
            Thread thread = new Thread(lsr, "LogStreamReader");
            thread.start();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

class LogStreamReader implements Runnable {

    private BufferedReader reader;

    public LogStreamReader(InputStream is) {
        this.reader = new BufferedReader(new InputStreamReader(is));
    }

    public void run() {
        try {
            String line = reader.readLine();
            while (line != null) {
                System.out.println(line);
                line = reader.readLine();
            }
            reader.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

这就是文档所说的-

```
ProcessBuilder pb = new ProcessBuilder("myCommand", "myArg1", "myArg2"); 
```

您可以在构造函数中传递任意数量的参数。

[在此处](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)阅读有关流程构建器的更多信息。

# html - 如何将用户 url 输入显示为缩略图？

> ID：15700884
> 
> 赞同：0
> 
> 时间：2013-03-29T09:50:34.837
> 
> 标签：html, ruby-on-rails, url

我想从用户那里获取图像 URL，并在提交时在同一页面中显示该图像的缩略图这是我从用户那里获取 URL 的方式

```
<%= form_for([@project, @project.uploads.build]) do |f| %>
 <div class="field">
    <%= f.label :url %><br />
    <%= f.text_field :url %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

然后我在同一页面中显示 URL

```
<p>
  <%= upload.url %>  |

  <%= link_to 'Delete', [upload.project, upload],
            :confirm => 'Are you sure?',
            :method => :delete %> 
</p> 
```

但是我想显示一个缩略图..我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:45:56.680

image_tag 是您正在寻找的 Rails 方法。（[http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-image_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-image_tag)）。只需使用上传的 URL 作为来源。然后，使用 :size 选项，或在图像标签上设置一个类并通过 CSS 处理调整大小。

该方法当然不会调整实际图像的大小，用户的浏览器会下拉较大的文件，然后在浏览器中调整它的大小。它消耗的带宽与全尺寸版本相同，因为它是全尺寸版本。

要对图像进行后期处理并实际调整其大小（真正的缩略图），我推荐使用 CarrierWave Gem（[https://github.com/jnicklas/carrierwave](https://github.com/jnicklas/carrierwave)）。它的文档非常好，所以我不会在这里深入探讨如何使用它。

# ios - 我可以在两个 UITableViewCell 之间构建一个 UITableView 吗？

> ID：15700887
> 
> 赞同：0
> 
> 时间：2013-03-29T09:50:47.267
> 
> 标签：ios, uitableview

我创建了一个标准的 UITableView，一个单元格的选择必须在两个 tableviewCell 之间留下一个详细的子表。我能怎么做？你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:00:49.917

使用 insertRowsAtIndexPaths 在所选单元格的上方/下方插入新行，如下所示。

```
[tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationBottom]; 
```

并根据您的要求自定义方法。

# architecture - ARM CPSR - 5 位模式？

> ID：15700890
> 
> 赞同：2
> 
> 时间：2013-03-29T09:50:51.970
> 
> 标签：architecture, arm, processor, cpu-registers

我正在学习手臂架构。
1\. 我认为 CPSR 分配了 5 位来指定它正在执行的当前模式。因为我们只有大约 6-7 种不同的模式，3 位就足够了。那么为什么我们有 5 个相同的位呢？
2\. system/supervisor模式有什么区别？操作系统在哪种模式下执行它的代码？
3\. 另外我想知道是否可以手动从用户模式切换到系统/主管模式，无需 swi 调用等。什么会限制我这样做？
4\. 当我切换到超级用户模式时，我如何使用用户模式寄存器以及该模式已经存在的存储寄存器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:38:18.010

1.  为什么要将当前模式压缩为尽可能少的位？或许设计者认为如果模式位更分散，ARM 的设计会更简洁。此外，CPSR 中的备用位并不短缺。

    但是，您可能会注意到[此处列出的所有 8 种模式都将第 4 位设置为 1](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0204j/Chdddhea.html)。这是因为 ARM6（和 ARM7？）处理器支持四种额外的“26 位”模式，以便与 ARM2/ARM3 代码兼容。这四种 26 位模式的第 4 位设置为 0，并且是模拟 ARM2/ARM3 行为的用户、IRQ、FIQ 和主管模式的版本。在 ARM2/ARM3 中，没有 CPSR 也没有 SPSR，N、Z、C、V、I 和 F 标志位在 PC 的前 6 位，处理器模式在 PC 的低 2 位。由于 26 位模式未在我上面链接的文章中列出，我只能假设它们在以后的 ARM 中不受支持。

2.  主管和系统模式不同，请参阅上面链接文章中的列表。至于操作系统使用哪种模式，这取决于操作系统。在系统模式出现之前的旧日子里，会使用管理员模式。我不能说系统模式的出现是否改变了这一点。

3.  我相信如果不使用 SWI，就无法从用户模式切换到主管模式。这是故意的，它是一种安全/稳定性功能，可以防止没有适当权限的进程通过访问它们不应该能够访问的内存位置而导致系统不稳定。

4.  为什么要在主管模式下使用分组用户模式寄存器？您无法从管理员模式中获取的唯一用户模式寄存器是 R13 和 R14。

# android - 调试 Android 应用程序

> ID：15700891
> 
> 赞同：0
> 
> 时间：2013-03-29T09:50:55.590
> 
> 标签：android

在 Eclipse 中调试效果很好，但是，我的应用程序导致我的整个系统在未知情况下以未知的时间间隔崩溃。在与我的计算机连接时，我从未能够复制此问题，因此我找不到问题。

关于如何处理此类问题还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:56:45.907

我的一个朋友使用这个[Bootlog Uptime](https://play.google.com/store/apps/details?id=se.mumu21.bootlog&feature=search_result#?t=W251bGwsMSwxLDEsInNlLm11bXUyMS5ib290bG9nIl0.)应用程序从系统崩溃中获取崩溃日志。

我从未测试过它，但据我所知，您也可以从系统崩溃中获取日志。至少值得一试...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:06:49.180

假设您的应用程序在它关闭设备之前崩溃，一个通用的错误报告解决方案，如[ACRA](http://acra.ch/)（您可能希望作为应用程序的一部分）可能会为您提供相关的信息位以找到问题的根源（logcat 的位，内存使用等）。

如果应用程序没有崩溃，您可以将其设置为定期发送相同的信息。可能有一个趋势可见，直到它消亡。

# jquery - jQuery - 终止动画

> ID：15700892
> 
> 赞同：0
> 
> 时间：2013-03-29T09:50:58.513
> 
> 标签：jquery, animation, terminate

当我有如下代码时遇到问题：

```
 $("#clickme").click(function () {
  $("#status").fadeIn(250).delay(2500).fadeOut(250);
   }); 
```

这在用户成功保存一些信息后显示 - 问题是当您多次（快速）单击 #clickme 按钮时，动画会进入某种队列并且它们一个接一个地执行。那很不好。我想要像当用户多次单击按钮时，前一个动画会停止并且新动画从头开始。

同样，当#status 当前可见并且用户再次单击它时 - 状态将消失并且新动画将重新开始。

谁能给我一些指导？几天来，我一直在努力解决这个问题。

[在这里提琴](http://jsfiddle.net/z3FvL/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:54:36.827

您必须确保您的状态尚未动画化：

```
$("#clickme").click(function () {
  var $status = $("#status");
  $status.stop(true).hide();
  $status.fadeIn(250).delay(2500).fadeOut(250);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:52:51.333

尝试使用 .clreaQueue(); 这对你有用

```
$("#clickme").click(function () {
     $("#status").clearQueue();
     $("#status").fadeIn(250).delay(2500).fadeOut(250);
   }); 
```

[看这里](http://api.jquery.com/clearQueue/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:54:50.580

您可以像这样使用[.stop](https://stackoverflow.com/questions/3328712/jquery-disable-ignore-hover-event-during-fade-in-out)方法：

```
$("#status").stop(true).fadeIn(250).delay(2500).fadeOut(250); 
```

在[Fiddle](http://jsfiddle.net/z3FvL/9/)中，它可以工作。（带`true`参数。）

[编辑]（添加许多状态）
这个[小提琴](http://jsfiddle.net/z3FvL/10/)做你正在尝试的吗？

# php - PHP小改图片

> ID：15700895
> 
> 赞同：0
> 
> 时间：2013-03-29T09:51:11.720
> 
> 标签：php, gd

我想用不同的 md5 (md5_file) 获得相同的图像。这个怎么做 ？我不想调整图像大小。也许在随机位置添加一个像素（但如何）？

# actionscript-3 - 2 个版本的一个代码库

> ID：15700898
> 
> 赞同：0
> 
> 时间：2013-03-29T09:51:19.717
> 
> 标签：actionscript-3, structure, directory-structure

我在 AS3 中制作一个项目，但我已经到了需要分支的地步，因为我希望它发布到 2 个地方，每个地方都需要一些不同的附加代码才能正常运行。那么是否有可能实现我不需要制作2个项目并维护2个类似的项目？

我希望我写得足够清楚。感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:11:26.833

这是**OOP**的一大原因！编写基类并根据需要为您的项目扩展它们。
另请查看[条件编译](http://www.yeahbutisitflash.com/?p=257)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:28:32.853

您可以做几件事，具体取决于您是在 Flash IDE、Flash Builder 还是其他工具之一（如 IntelliJ）中工作。

如果您在 Flash IDE 中工作和/或在 Flash Builder 中设置了 Flash Professional 项目，则可以进入 ActionScript 属性面板并设置指向任何位置的源路径（我通常尝试保持相对，但它是由你决定）。

如果您在没有 fla/xfl 的情况下工作，那么您可能需要查看设置[库项目](http://help.adobe.com/en_US/Flex/4.0/UsingFlashBuilder/WS6f97d7caa66ef6eb1e63e3d11b6c4d0d21-7fe6.html)。

# css - Metro UI CSS 框架 - 轮播不工作

> ID：15700899
> 
> 赞同：1
> 
> 时间：2013-03-29T09:51:36.127
> 
> 标签：css, frameworks, carousel

我刚刚开始使用这个 Metro UI CSS，但无法让 carousel 工作。

轮播仅显示最后一张幻灯片，没有其他内容！没有动画！没有什么。即使我单击下一个和上一个按钮，也没有任何反应！请帮忙！

我的代码：

英特法兹视窗 8

```
<body class="metrouicss">           
    <div class="carousel" data-role="carousel" data-param-auto="false" data-param-effect="fade" style="height:300px; width:450px">
        <div class="slides">
            <div class="slide image" id="slide1">
                <img src="imagenes/00384059-000730_catl_500.jpg">
                <div class="description">
                    Description text here...
                </div>
            </div>

            <div class="slide mixed" id="slide2">
                <img src="imagenes/00384059-000730_catl_500.jpg">
                <div class="description">
                    Description text here...
                </div>
            </div>
            ...
        </div>

        <span class="control left">‹&lt;/span>
        <span class="control right">›&lt;/span>     
</div>
</body> 
```

# phantomjs - PhantomJS：查看 .js 等依赖项，而不仅仅是最终的 html

> ID：15700900
> 
> 赞同：0
> 
> 时间：2013-03-29T09:51:43.487
> 
> 标签：phantomjs

在 PhantomJS 中，有没有办法查看家属？例如，一个页面会导致加载一个 JS 脚本。我不想只查看最终的浏览器 html 结果，而是希望查看 js 脚本。

我想看的有 Content-Type: application/json

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T08:49:14.470

有可能的。

在 phantomjs 中，您拥有完整的[页面回调](http://phantomjs.org/api/webpage/)列表。

每次页面尝试加载任何内容时，连接到 onResourceRequested 和 onResourceReceived 都会为您提供所需的信息。

# javascript - 如何使用 vanilla javascript 检查 html5 表单的有效性？

> ID：15700902
> 
> 赞同：0
> 
> 时间：2013-03-29T09:51:46.177
> 
> 标签：javascript, html, validation

HTML：

```
<form id="myform"  method="post">
    <input name="email"  type="email" required=""/>
    <input name="fname" type="text" required="" />
    <input name="zip" type="text" />
    <input  type="button" value="button" />
</form> 
```

在这里，我想通过为**html5**应用 javascript 函数来检查电子邮件，我们可以这样做吗？

**编辑**
以前一直不清楚/误解。我的问题是我们是否有布尔有效检查，`form.email.valid()`以便我们只能使用 javascript 检查电子邮件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:54:59.557

你应该改变你的按钮输入。HTML5 提交按钮需要如下所示：

```
<button type="submit">Submit</button> 
```

此外，给您的电子邮件一个占位符会很好：

```
<input name="email" type="email" placeholder="me@example.com" required=""/> 
```

示例[jsFiddle](http://jsfiddle.net/JFNdV/2/)。

# javascript - 修改DOM后的window.onload等效？

> ID：15700903
> 
> 赞同：5
> 
> 时间：2013-03-29T09:51:49.793
> 
> 标签：javascript, jquery, dom

当页面第一次加载时，我们可以使用`window.onload`它来确保在我们做某事之前所有资源都已加载。

我的问题是，**如果我们修改 DOM（例如，根据 ajax 请求插入一些 html），当文档再次处于“加载”状态时是否会触发任何事件？** （例如，当插入的 html 包含多个图像时）。

（使用 jQuery 的解决方案会很好）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:56:29.243

简短的回答：不。

长答案：如果你知道你在找什么，你可以使用突变观察者（[https://developer.mozilla.org/en-US/docs/DOM/MutationObserver](https://developer.mozilla.org/en-US/docs/DOM/MutationObserver)）。它仅在新浏览器中支持，并且在某些版本的 chrome 中与闭包一起使用时会出现内存泄漏。

顺便说一句，document.ready 不会告诉您是否所有（或任何..）资源都已加载。它只会告诉你，dom 已准备好（即加载函数，它只会在*所有*资源（嗯，任何不使用 javascript 请求的资源）都被下载后触发）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:56:46.277

您可以使用[`.done()`](http://api.jquery.com/deferred.done/).

> **描述：**添加解析延迟对象时要调用的处理程序。

还有jQuery插件[**`See Here`**](http://benalman.com/projects/jquery-hashchange-plugin/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T10:18:10.820

我会说是（我不知道所有浏览器是否都支持。我在 safari 和 chrome 中使用它）

测试用例你可以在这里找到：http: [//maakmenietgek.nl/testcases/domready/](http://maakmenietgek.nl/testcases/domready/)请注意，我不能让它在小提琴中工作，这就是为什么一个独立的测试用例

index.html 看起来像这样

```
<!DOCTYPE html>
<head>
  <title>Testcase</title>
  <script src="jquery-1.8.2.js" type="text/javascript" charset="utf-8"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      $('#clickme').click(function() {
        $.get('ajaxdata.html', function(data) {
            $('#addhere').html(data);
        });
      });
    })
  </script>
</head>
<body>
  <p id="clickme">clickme</p>
  <div id="addhere">
  </div>
</body>
</html> 
```

调用加载的数据`$.get`如下所示

```
<p>added data</p>
<script type="text/javascript">
    $(document).ready(function() {
        alert('added data');
    });
</script> 
```

将 html 添加到 DOM 后会显示警报

# google-app-engine - 如何在 GAE Go 中对切片进行排序

> ID：15700908
> 
> 赞同：1
> 
> 时间：2013-03-29T09:52:13.677
> 
> 标签：google-app-engine, sorting, interface, go, slice

我正在尝试对切片进行排序。如何在 gae 中使用 go？

我有结构

```
type courseData struct {
  Key         *datastore.Key
    FormKey         *datastore.Key
  Selected    bool
  User        string
  Name        string
  Description string
  Date        time.Time
} 
```

我想在名称字段中对该实体类型的切片进行排序。

```
q := datastore.NewQuery("Course")
    var courses []*courseData
    if keys, err := q.GetAll(c, &courses); err != nil {
        http.Error(w, err.Error(), http.StatusInternalServerError)
        return
    } else {
      for i := range courses {                 
          courses[i].Key = keys[i]
      }                           
    } 
```

我试过了

```
Sort(data Interface) 
```

但不确定如何使用它。请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:31:20.590

为什么不直接从数据存储中以正确的顺序请求实体呢？

```
q := datastore.NewQuery("Course").Order("Name") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T12:05:15.383

例如，

```
package main

import (
    "fmt"
    "sort"
    "time"
)

type Course struct {
    Key         string // *datastore.Key
    FormKey     string // *datastore.Key
    Selected    bool
    User        string
    Name        string
    Description string
    Date        time.Time
}

type Courses []*Course

func (s Courses) Len() int      { return len(s) }
func (s Courses) Swap(i, j int) { s[i], s[j] = s[j], s[i] }

type ByName struct{ Courses }

func (s ByName) Less(i, j int) bool { return s.Courses[i].Name < s.Courses[j].Name }

func main() {
    var courses = Courses{
        &Course{Name: "John"},
        &Course{Name: "Peter"},
        &Course{Name: "Jane"},
    }
    sort.Sort(ByName{courses})
    for _, course := range courses {
        fmt.Println(course.Name)
    } 
```

输出：

```
Jane
John
Peter 
```

`Course`并且`Courses`需要导出以供`sort`包使用。

为避免使示例依赖于 GAE，类型`*datastore.Key`已更改为`string`.

# paypal - 数字商品沙盒账户

> ID：15700914
> 
> 赞同：1
> 
> 时间：2013-03-29T09:52:38.517
> 
> 标签：paypal, paypal-sandbox

我有一个 PayPal 帐户，可以说“myemail@mycompany.com”。该账户内有两个沙盒账户，一个供卖家使用，另一个供买家使用。根据我的阅读，我需要启用我的帐户以接受数字商品的付款。

我可以知道我需要在哪个帐户上启用此功能（PayPal / Sandbox 帐户）吗？因为我相信我已经在我的 PayPal 帐户上启用了它，但我仍然收到与以下相同的错误

`You are not signed up to accept payment for digitally delivered goods.`

**更新**

测试沙盒卖家账户邮箱为 ucmasS_1361258557_biz@ucmas.com。顺便说一句，在生产环境中重复使用相同的电子邮件是否仍然安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:57:13.207

您需要在测试沙盒卖家账户上启用此功能。如果您可以提供您的测试沙盒卖家帐户的电子邮件地址，我可以在您的帐户上启用此功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-21T10:39:34.460

通过在登录沙盒帐户时点击以下 URL，我设法将 Express Checkout 沙盒帐户更改为“PayPal Digital Goods (Express Checkout)”帐户：

[https://www.sandbox.paypal.com/us/cgi-bin/?cmd=_product-go&product=additional_payment&signup_profile=dg](https://www.sandbox.paypal.com/us/cgi-bin/?cmd=_product-go&product=additional_payment&signup_profile=dg)

这有点逆向工程（在访问 www.paypal.com/digitalgoods 并点击链接以启用数字商品帐户后，将“sandbox.”放在 paypal.com 前面）但看起来它有效。

# java - For循环获取多个值

> ID：15700915
> 
> 赞同：0
> 
> 时间：2013-03-29T09:52:38.567
> 
> 标签：java, for-loop, arraylist

我有一个 for 循环

```
for (int i = 0; i < knowledgeD.size(); i++ )
        knowledgeD.get(i).get(0);

        for (int k = 0; k < knowledgeD.size(); k++ )
            knowledgeD.get(k).get(1); 
```

但是，我对如何将 for 循环的所有结果存储到我猜的一个变量感到困惑？

例如说我这样做

```
 for (int i = 0; i < knowledgeD.size(); i++ )
        w =knowledgeD.get(i).get(0);

        for (int k = 0; k < knowledgeD.size(); k++ )
            y = knowledgeD.get(k).get(1); 
```

然后在我的 toString() 我做

```
String s = "{true@" + w + " " +"false@"  + w.complement() + "}" + "@" + this.y; 
```

其中补码（）是 w 分数的补码，在本例中为 9/11。

这给了我

```
 {true@135/163 false@28/163}@163/1680} 
```

这太棒了，但这只是数组数组的最后一个值

```
[[2/11, 11/48], [8/35, 35/288], [16/43, 43/288], [75/152, 19/210], [4/5, 5/16], [135/163, 163/1680]] 
```

如果有人能阐明这一点，将不胜感激。基本上@true 和@false 是硬币翻转是正面还是反面的概率。

Cheers Sim PS w 和 y 的数据类型是 BigFractions，它们基本上是分数，这个数据类型在另一个类中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:03:34.300

试试这个

只需像这样将下一个值附加到 s

```
StringBuilder str="";

for (int i = 0; i < knowledgeD.size(); i++ )
{
        w =knowledgeD.get(i).get(0);
            y = knowledgeD.get(i).get(1);

    str.append("{true@" + w + " " +"false@"  + w.complement() + "}" + "@" + this.y);
     str.append(" ");
} 
```

在您的`toString()`方法中只需调用 `s=str.toString()`;

# asp.net-mvc-3 - 从基于 SQL 查询的方法转移到 Linq

> ID：15700917
> 
> 赞同：2
> 
> 时间：2013-03-29T09:52:41.890
> 
> 标签：asp.net-mvc-3, linq, linq-to-sql, linq-to-entities

我不太擅长 Linq 和 SQL。但我更多地使用 SQL 而更少使用 LINQ。我浏览了许多支持 LINQ 的文章。我不想走 SQL 的方式（即写存储过程和操作数据等）

对于与数据相关的每个操作，我想从 LINQ 开始。以下是我想这样做的原因：

1.  我想通过应用程序而不是通过编写存储过程来完全控制我的数据库（因为我不太擅长编写存储过程）
2.  我想将我的项目创建为易于维护的视图
3.  想要更快的发展

为此，我知道：

1.  我需要添加一个 dbml 文件，将表拖放到该文件中
2.  使用 dbContext 类等

但我想知道，有没有办法：

1.  我可以避免创建 dbml 文件并且仍然可以访问数据库吗？
2.  我是否需要同样使用 Linq to Entities？
3.  这会是避免使用 dbml 文件的好方法吗？因为对于每个数据库更改，我每次都需要删除和删除表
4.  我还遇到过很多帖子，其中 linqToSql 被认为已弃用，而不是 .net 的未来？

我有很多疑问，但我认为在开始使用新技术时这很明显？

我发现这篇有用的文章对初学者很有用：

```
[http://weblogs.asp.net/scottgu/archive/2010/08/03/using-ef-code-first-with-an-existing-database.aspx][1] 
```

在做了更多研究后，我得出结论：

1）我可以避免创建dbml文件并且仍然可以访问数据库？？

ANS 是，但现在将创建 edmx 文件而不是 dbml。

2）我是否需要同样使用 Linq to Entities？

ANS 是的，您可以使用 linq 到实体。

3）避免使用dbml文件是个好方法吗？因为对于每个数据库更改，我每次都需要删除和删除表

ANS 不需要删除并再次创建表。它们是您可以更新数据库的选定部分并且您不会避免使用 dbmls 的选项。它将创建 edmx 文件，并且在许多方面几乎与 dbmls 相似。

4）我还遇到过很多帖子，其中 linqToSql 被认为已弃用，而不是 .net 的未来？

ANS 是的，在未来的发展中会贬值。它只支持 sql server 作为后端。

我希望我是对的。如果有任何其他建议，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:57:43.840

LINQ 是一种查询和项目数据集合的方法。例如，您可以使用 LINQ 从数据库或数组中查询和调整数据。LINQ 本身与底层数据库无关。

您使用 ORM（对象关系映射器）技术将存储在数据库表中的数据投影为对象集合。一旦你有了对象的集合，你就可以使用 LINQ 来查询它们。

现在，您有许多 ORM 技术可供选择，例如 Entity Framework、NHibernate、Linq2Sql。如果您不喜欢维护 dbml 文件，请查看**Entity Framework 提供的代码优先方法**。

然后是称为 LINQ 数据提供程序的东西。他们会采用 LINQ 查询，将其转换为针对特定数据库的 SQL，执行查询并将结果作为一组对象返回。上面的许多 ORM 都内置了 LINQ 数据提供程序作为它们的一部分，并将在后台获取数据。

我建议您查看一些模式，例如数据层的存储库和工作单元。如果使用得当，这些模式会将您的数据访问代码与您的应用程序上层隔离开来。这将帮助您更改您的数据访问技术，如果它变得过时，而不影响应用程序的其余部分。

LINQ 是一项很棒的技术，您绝对应该尝试一下

我根据自己的经验撰写了上述答案，我相信有很多 SO 用户比我自己更了解上述技术，他们可能希望添加自己的意见

祝你好运

# javascript - 单击空白区域返回所选部分

> ID：15700922
> 
> 赞同：0
> 
> 时间：2013-03-29T09:53:04.340
> 
> 标签：javascript, jquery

```
<li class="list "><a href="javascript:">A</a>

    <ul class="names">
        <li class="list"><a href="javascript:">1</a>
        </li>
        <li class="list"><a href="javascript:">2</a>
        </li>
    </ul>
</li>
<li class="list "><a href="javascript:">B</a>

    <ul class="names selected">
        <li class="list selected"><a href="javascript:">1</a>
        </li>
        <li class="list"><a href="javascript:">2</a>
        </li>
        <li class="list"><a href="javascript:">3</a>
        </li>
        <li class="list"><a href="javascript:">4</a>
        </li>
    </ul>
</li>
<li class="list "><a href="javascript:">C</a>

    <ul class="names">
        <li class="list"><a href="javascript:">1</a>
        </li>
        <li class="list"><a href="javascript:">2</a>
        </li>
        <li class="list"><a href="javascript:">3</a>
        </li>
        <li class="list"><a href="javascript:">4</a>
        </li>
    </ul>
</li>

    $('.list').click(function () {
        var that = this;
        $('.list').each(function () {
            if (that == this) return true; //continue
            $('.names:not(:hidden)', this).slideToggle();
        });
        $('ul.names', this).slideToggle();
    })
ul.names{display: none;}
li.list{
    width:150px;
       background:#A9FF7A;
}
ul.names {
    width:150px;
    background:#A9FF7A;
}
ul.selected{
    display: block;
}
li.selected{
    background:red;
} 
```

在线示例：http: [//jsfiddle.net/gyYyd/](http://jsfiddle.net/gyYyd/)

**B**的子菜单**1**突出显示。如果我点击菜单A或C，那么A或C部分将被打开，但是我如何点击PAGE BLANK区域（背景颜色之外）回到B部分（打开B部分）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:59:47.890

您可以在对象上捕获`click`s并在所需的列表项上`document`触发 a 。`click`

```
$(document).click(function() {
    var selected = $('.selected:first');
    if(!selected.closest('ul.names').is(':visible')) {
        selected.closest('.list').trigger('click');
    }
}); 
```

此外，请确保`return false`从您当前的列表项`click`处理程序开始 - 以便对列表项的正常点击不会传播到上述处理程序。

**演示**：http: [//jsfiddle.net/gyYyd/2/](http://jsfiddle.net/gyYyd/2/)

# ios - 试图限制iOS中UITextField的字符数

> ID：15700933
> 
> 赞同：1
> 
> 时间：2013-03-29T09:53:49.290
> 
> 标签：ios, uitextfield, uitextfielddelegate

我的 iOS 应用程序中有一个 UITextField，我已经在其中修改了用户的输入。我现在意识到我还需要确保 UITextField 可以容纳一定数量的字符。我正在实现委托方法如下：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

    if([[string stringByTrimmingCharactersInSet:[NSCharacterSet controlCharacterSet]]
        isEqualToString:@""])
        return YES;

    NSString *previousValue = [[[textField.text stringByTrimmingCharactersInSet:[[NSCharacterSet decimalDigitCharacterSet] invertedSet]] stringByReplacingOccurrencesOfString:@"." withString:@""] stringByReplacingOccurrencesOfString:@"," withString:@""];
    string = [string stringByTrimmingCharactersInSet:[[NSCharacterSet decimalDigitCharacterSet] invertedSet]];
    NSString *modifiedValue = [NSString stringWithFormat:@"%@%@", previousValue, string];

    if ([modifiedValue length] == 1) {

        modifiedValue = [NSString stringWithFormat:@"0.0%@", string];

    }

    else if ([modifiedValue length] == 2) {

        modifiedValue = [NSString stringWithFormat:@"0.%@%@", previousValue, string];

    }

    else if ([modifiedValue length] > 2) {

        modifiedValue = [NSString stringWithFormat:@"%@.%@",[modifiedValue substringToIndex: modifiedValue.length-2],[modifiedValue substringFromIndex:modifiedValue.length-2]];

    }

    NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
    [formatter setNumberStyle:NSNumberFormatterCurrencyStyle];
    NSDecimalNumber *decimal = [NSDecimalNumber decimalNumberWithString:modifiedValue];
    modifiedValue = [formatter stringFromNumber:decimal];
    [textField setText:modifiedValue];

    return NO;

} 
```

我不确定上面的代码如何考虑 22 个字符的限制。谁能看到我需要做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T09:57:48.890

试试这样

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
if([textField.text length]<=22)
   return YES;
else
   return NO;
} 
```

或者

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

return (textField.text.length <= 22);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-20T14:41:09.447

这是最适合我的解决方案，因为一旦达到最大字符数，上面的答案将不允许您删除。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    // allow adding of chars
    if (textField.text.length < MAX_CHARS) {
        return YES;
    }
    // allow deleting
    if (textField.text.length == MAX_CHARS && string.length == 0) {
        return YES;
    }

    return NO;
} 
```

这不是最漂亮的解决方案，可能会被改进以处理其他案例，但这很适合我的需求，并认为它可能对其他人有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-23T05:35:41.813

```
 if ((string.length == 0) || textField.text.length <= MAX_LIMIT)
        return YES;
    else
        return NO; 
```

这是我发现完美的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-16T11:13:56.317

试试这个：-

```
 func textField(textField: UITextField, shouldChangeCharactersInRange range: NSRange, replacementString string: String) -> Bool {

        print("chars \(textField.text!.characters.count) \( string)")

        if(textField.text!.characters.count > 20 && range.length == 0) {
            print("Please summarize in 20 characters or less")
            return false;
        }

        return true;
} 
```

# android - 用片段填充 ArrayAdapter 的行

> ID：15700934
> 
> 赞同：2
> 
> 时间：2013-03-29T09:53:53.027
> 
> 标签：android, android-fragments, android-arrayadapter, android-listfragment

我有一个片段`ArticleFragment`，它传递了一个`Article`对象。通常显示在 Activity 中，`ArticleFragment`但我想在 ListView 中重用片段。ListView 的每一行都应该包含一个`ArticleFragment`. 我知道我可以使用`getView()`适配器的方法自定义一行，但是显示的 UI 与`ArticleFragment`一行非常相似，因此如果 UI 发生更改，必须在两个位置更新它会很烦人。

`ArticleFragment.java`

```
public class ArticleFragment extends SherlockFragment {
    static final String ARTICLE_PARCEL_KEY = "parcelable_article";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    protected static ArticleFragment newInstance(Article article) {
        ArticleFragment f = new ArticleFragment();
        Bundle args = new Bundle(Article.class.getClassLoader());
        args.putParcelable(ARTICLE_PARCEL_KEY, article);
        f.setArguments(args);
        return f;
    }

    Article getArticle() {
        return getArguments().getParcelable(ARTICLE_PARCEL_KEY);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View layout = (View) inflater.inflate(R.layout.article, container, false);
        ArticleImagesFragment imagesFragment = ArticleImagesFragment.newInstance(getArticle().getImages());
        FragmentTransaction ft = getChildFragmentManager().beginTransaction();
        ft.add(R.id.images_fragment_container, imagesFragment);
        if (getActivity() instanceof ArticleActivity) {
            DisqusCommentsFragment disqusFragment =  DisqusCommentsFragment.newInstance(getArticle().getCommentsUrl());
            ft.add(R.id.comments_fragment_container, disqusFragment);
        }
        ft.commit();
        return layout;
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);

        Article article = getArticle();

        TextView kickerView = (TextView) view.findViewById(R.id.kicker);
        kickerView.setText(article.getKicker().toUpperCase());

        TextView titleView = (TextView) view.findViewById(R.id.title);
        titleView.setText(article.getTitle());

        String commentsText = "Jetzt kommentieren!";
        if (article.getNumComments() == 1) {
            commentsText = article.getNumComments().toString() + " Kommentar";
        } else if (article.getNumComments() > 1) {
            commentsText = article.getNumComments().toString() + " Kommentare";
        }
        TextView numCommentsView = (TextView) view.findViewById(R.id.num_comments);
        numCommentsView.setText(commentsText);

        TextView pubDateView = (TextView) view.findViewById(R.id.pub_date);
        String dateText = new SimpleDateFormat("dd. MMMM, hh:mm").format(article.getPubDate());
        pubDateView.setText(dateText);

        TextView authorNameView = (TextView) view.findViewById(R.id.author_name);
        authorNameView.setText(article.getAuthorName());

        TextView articleTextView = (TextView) view.findViewById(R.id.text);
        articleTextView.setText(Html.fromHtml(article.getHtmlContent()));
    }
} 
```

我注意到可以将自定义行布局传递给，`ArrayAdapter`但这会再次重复显示文章 UI 的逻辑。相反，我更愿意将片段传递给适配器的构造函数并使用它来显示行。

是否有可能通过一个来实现这一点`ArrayAdapter`？如果不是，那么在 ListView
中实现重用的正确路径是什么？`ArticleFragment`

谢谢你的帮助！

# java - #Pentaho 开源 BI 工具

> ID：15700935
> 
> 赞同：1
> 
> 时间：2013-03-29T09:53:56.363
> 
> 标签：java, pentaho

我以前曾在基于 C# 的 ASP.net Web 应用程序上使用 MSSQL Server 2008 R2、SSAS 和 SSIS 从事 BI 项目。我想尝试使用 Java 的开源工具。谁能给我推荐工具？？我通过谷歌搜索浏览了 Pentaho 和 SpagoBI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:59:08.410

```
Open source free products 
```

1.  Eclipse BIRT 项目
2.  快速矿工
3.  SpagoBI
4.  R
5.  刀
6.  战术

    **开源商业产品**

7.  项目清单

8.  Jaspersoft：报告、仪表板、数据分析和数据集成

9.  Palo（OLAP 数据库）：OLAP Server、Worksheet Server 和 ETL Server

10.  Pentaho：报告、分析、仪表板、数据挖掘和工作流功能
11.  TACTIC：报告、分析、仪表板、数据挖掘和集成、工作流功能

我建议你访问[链接](http://en.wikipedia.org/wiki/Business_intelligence_tools)

# android - 如何在安卓应用中实现支付功能

> ID：15700936
> 
> 赞同：0
> 
> 时间：2013-03-29T09:54:06.193
> 
> 标签：android

我正在使用乘客应用程序。乘客可以通过这个应用程序预订车辆，他也可以通过应用程序支付他的公平。我希望乘客通过这个应用程序用他的信用卡 onL9 支付钱，但我以前使用过任何类型的支付功能。有没有人为此帮助过我？只要告诉我任何链接、任何教程、任何用于支付的 APi 或任何其他示例链接等。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:58:25.017

1.您可以通过集成`PayPal`，并接受付款`Paypal`。您可以`Paypal`使用[`ExpressCheckoutSDK`](https://www.x.com/developers/paypal/documentation-tools/express-checkout/integration-guide/ECOnMobileDevices). 您将必须创建一个`Paypal`卖家帐户，并`Paypal`在您的服务器上集成以检查付款是否已完成等。

2.您可以使用[`Google In-App Billing`](http://developer.android.com/google/play/billing/api.html)通过`PlayStore`.

# rebol - 如何在 Rebol3 中实现 UDP 方案

> ID：15700937
> 
> 赞同：1
> 
> 时间：2013-03-29T09:54:08.000
> 
> 标签：rebol, rebol3

据我了解源代码，网络设备已经准备好支持UDP，但是如何制作UDP方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:40:25.767

在源代码的这一行[https://github.com/rebol/r3/blob/master/src/core/c-port.c#L612](https://github.com/rebol/r3/blob/master/src/core/c-port.c#L612)，评论说

```
In order to add a port scheme: 
In mezz-ports.r add a make-scheme. 
Add an Init_*_Scheme() here. 
Be sure host-devices.c has the device enabled. 
```

我认为第一条指令是指 mezz/sys-ports.r。所以，我们有这个例子[https://github.com/rebol/r3/blob/master/src/mezz/sys-ports.r#L254](https://github.com/rebol/r3/blob/master/src/mezz/sys-ports.r#L254)，我们可以添加类似

```
make-scheme [
  title: "UDP Networking"
  name: 'udp
  spec: system/standard/port-spec-net
  info: system/standard/net-info ; for C enums
  awake: func [event] [print ['UDP-event event/type] true]
] 
```

然后，您必须为 TCP [https://github.com/rebol/r3/blob/master/src/core/p-net.c#L299](https://github.com/rebol/r3/blob/master/src/core/p-net.c#L299)编写一个像这样的 INIT_UDP_SCHEME ，其中 TCP_Actor 从这里开始[https://github。 com/rebol/r3/blob/master/src/core/p-net.c#L92](https://github.com/rebol/r3/blob/master/src/core/p-net.c#L92)，然后在这里初始化[https://github.com/rebol/r3/blob/master/src/core/c-port .c#L626](https://github.com/rebol/r3/blob/master/src/core/c-port.c#L626)

正如你所说，UDP 似乎已经准备好了。

# android - Android 容器以编程方式

> ID：15700940
> 
> 赞同：3
> 
> 时间：2013-03-29T09:54:29.773
> 
> 标签：android, android-layout

我正在执行 HTTP 请求并获得结果。然后我想滚动浏览这些结果并为每个结果创建以下内容：（RL = 相对布局）

![在此处输入图像描述](../Images/7dd01b2270402285b650422335f4eed5.png)

一个相对布局（图中的 RL），里面有一个 TextView 和一个 ImageView。然后，我想将所有这些“容器”添加到列表中并将它们传递给解释。

```
//inside onPostExecute - given a list

List<RelativeLayout> containers = new ArrayList<RelativeLayout>();

for(i=0; i<alist.size();i++){
  RelativeLayout newLayout = new RelativeLayout(getApplicationContext());
  TextView tv = new TextView(getApplicationContext());
  ImageView iv = new ImageView(getApplicationContext());
  newLayout.addView(tv);
  newLayout.addView(iv);

  containers.add(newLayout);
}

otherClass.send(containers); 
```

我本质上想以编程方式创建一个容器，在其中放入两件东西，然后将其发送出去以进行进一步处理。

（这可能吗，或者有更好的方法吗？）*已编辑

在此先感谢您的帮助，我已经花了很多时间

* * *

*我已经尝试过了，它在尝试传递我认为的布局列表时会引发异常

* * *

只是要在这里添加更多：

```
public void send(List<RelativeLayout> containers) {

        for(int i=0; i<containers.size(); i++){
            RelativeLayout rl = new RelativeLayout(mContext);
            rl = containers.get(i);
            icons_row.addView(rl);
        }
    } 
```

和例外

```
03-29 10:20:32.290: E/AndroidRuntime(29782): FATAL EXCEPTION: main
03-29 10:20:32.290: E/AndroidRuntime(29782): java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
03-29 10:20:32.290: E/AndroidRuntime(29782):    at android.view.ViewGroup.addViewInner(ViewGroup.java:3618)
03-29 10:20:32.290: E/AndroidRuntime(29782):    at android.view.ViewGroup.addView(ViewGroup.java:3489)
03-29 10:20:32.290: E/AndroidRuntime(29782):    at android.view.ViewGroup.addView(ViewGroup.java:3434)
03-29 10:20:32.290: E/AndroidRuntime(29782):    at android.view.ViewGroup.addView(ViewGroup.java:3410) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:04:45.443

好的，我们开始吧。请记住，这是在 HTTP 请求之后完成的，所以它正在实现一个异步任务，我只是省略了那一点，因为它与我的问题无关。

首先，创建 3 个事物列表。1 个布局列表（像容器一样的外部 div）、1 个文本视图列表和 1 个图像视图列表。对于我的示例，我遍历了我自己的名为 business 的类的列表：

```
 private List<RelativeLayout> layoutContainers = new ArrayList<RelativeLayout>();
 private List<TextView> textContainers = new ArrayList<TextView>();
 private List<ImageView> imageContainers = new ArrayList<ImageView>();

....

@Override
protected void onPostExecute(List<Business> blist){

  for(int i=0;i<blist.size();i++){

     RelativeLayout newLayout = new RelativeLayout(mContext);

    TextView tv = new TextView(mContext);
    ImageView iv = new ImageView(mContext); //// or getApplicationContext()

    tv.setId(1); iv.setId(2);

    newLayout.addView(tv);
    newLayout.addView(iv);
    icons_row.addView(newLayout); // this is another relative layout created via XML as standard

    RelativeLayout.LayoutParams layoutParms = (RelativeLayout.LayoutParams)newLayout.getLayoutParams();
    RelativeLayout.LayoutParams textParms = (RelativeLayout.LayoutParams)tv.getLayoutParams();
    RelativeLayout.LayoutParams imageParms = (RelativeLayout.LayoutParams)iv.getLayoutParams();

    layoutParms.height = RelativeLayout.LayoutParams.MATCH_PARENT;
    layoutParms.width = 175;
    newLayout.setGravity(Gravity.CENTER_VERTICAL);

    // Text Styling         
    textParms.height = RelativeLayout.LayoutParams.WRAP_CONTENT;
    textParms.width = RelativeLayout.LayoutParams.MATCH_PARENT;
    tv.setBackgroundColor(R.drawable.my_border);
    tv.setPadding(1, 5, 1, 2);
    tv.setTextColor(Color.GREEN);
    tv.setGravity(Gravity.CENTER_HORIZONTAL); // center text

    // Image Styling - background set deeper inside         
    imageParms.addRule(RelativeLayout.BELOW, tv.getId());
    imageParms.setMargins(35, 0, 0, 0);
    imageParms.height = RelativeLayout.LayoutParams.WRAP_CONTENT;
    imageParms.width = RelativeLayout.LayoutParams.WRAP_CONTENT;

    // set the params   
    tv.setLayoutParams(textParms);
    iv.setLayoutParams(imageParms);
    newLayout.setLayoutParams(layoutParms);

    // add them to the lists (created above)
    textContainers.add(tv);
    imageContainers.add(iv);
    layoutContainers.add(newLayout);
            }

        bearingTextView = (TextView)findViewById(R.id.bearingTextView);
        gps.calculateBearing(compass, bearingTextView ,blist, textContainers, imageContainers,layoutContainers);

} // end on Post Execute 
```

* * *

我将它们发送到我的 GPS，然后将它们发送到我的指南针。要对它们进行更改，例如更新文本，请执行以下操作...以上述 calculateBearing 方法为例...忽略其他值，仅 Containers。

* * *

```
public class Gps{
    private List<TextView> textContainers;
    private List<ImageView> imageContainers;
    private List<RelativeLayout> layoutContainers;

...

public void calculateBearing(Compass compass, TextView bearingText, List<Business> blist,                   List<TextView> textContainers,List<ImageView> imageContainers,List<RelativeLayout> layoutContainers){
    this.textContainers = textContainers;
    this.imageContainers = imageContainers;
    this.layoutContainers = layoutContainers;

    //eg. change the text
        for(int i=0; i<textContainers.size(); i++){
        textContainers.get(i).setText("This is text field: " + Integer.toString(i)); // will return, 1,2,3 etc depending on whatever textField is there
    }

   }
 } 
```

请记住，我从 onPostExecute 调用这些外部方法，因此 UI 将被更新。如果我不清楚任何事情，请告诉我

# linux - 备份一个正在运行的 Docker 容器？

> ID：15700943
> 
> 赞同：60
> 
> 时间：2013-03-29T09:54:32.890
> 
> 标签：linux, docker, linux-containers

是否可以备份正在运行的 Docker 容器？该`export`命令适合这样做吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2014-01-24T03:28:48.740

由一位朋友在评论中发表

嗨 Slava，很抱歉您的问题已关闭。作为记录，Slava 正在谈论 docker.io，一个 linux 容器的运行时。是的，`docker export`是一种合适的方法。它将生成整个容器文件系统状态的 tarball，并将其转储到 stdout。所以

`docker export $CONTAINER_ID > $CONTAINER_ID-backup.tar`

将产生一个可用的压缩包。您可以使用重新导入 tarball

`docker import - slava/$CONTAINER_ID-backup < $CONTAINER_ID-backup.tar`

请注意，原始元数据（例如原始图像的 id）将丢失。这应该在未来版本的 docker 中修复。– **所罗门海克斯 2013 年 4 月 2 日在 6:35**

在此处添加以便可以从摘要中找到该问题已得到解答。谢谢所罗门！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-01-26T07:04:52.550

`export`有一些限制：它不会导出*数据量*。

这里的*数据量*是指：

1.  镜像的 Dockerfile 中有一个`VOLUME`定义。
2.  容器以这样的参数开始：`-v /webapp`

有关数据的更多信息：[https ://docs.docker.com/userguide/dockervolumes/](https://docs.docker.com/userguide/dockervolumes/)

处理这种情况的方法是启动一个带有' **--volumes-from** '参数的新容器来挂钩该容器，这样你就可以访问数据卷了。

例子：

1.  访问数据：（在 bash 中）

`docker run -it --volumes-from target_container ubuntu bash`

2.  备份到主机：（一个 postgres 容器）

`docker run -it --volumes-from some_postgres -v /host/path:/container/path --rm ubuntu bash -c "tar -cvf /container/path/postgres-backup.tar /var/lib/postgresql/data"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-12T00:42:31.757

使用`docker commit`是我备份容器（已启动或已停止）的首选方式。创建一个您可以命名的图像：

```
docker commit - p <container_id> <backup-name> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-01-19T08:54:36.927

你也可以使用保存和加载..这是示例

1.  `sudo docker images`

    ```
    awan@google-dev:~/StarCenter/_docker$ sudo docker images
    REPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
    google_star/_version_1.10           latest              1067d6689697b2        4 days ago          1.666 GB 
    ```

2.  `sudo docker save google_star/_version_1.10 > my_docker-backup.tgz`

3.  `sudo docker load < my_docker-backup.tgz`使用 ( )恢复它

4.  `sudo docker images`在您的新 docker 机器中检查您的图像

# python - 如何使用 M2Crypto 从 PKCS7 信封中获取签名内容？

> ID：15700945
> 
> 赞同：6
> 
> 时间：2013-03-29T09:54:43.107
> 
> 标签：python, m2crypto

我需要获取 PKCS#7 信封的摘要来手动检查它。

通常，当您想要验证 pkcs#7 信封的签名时，您会这样做：

```
from M2Crypto import SMIME, X509, BIO

sm_obj = SMIME.SMIME()
x509 = X509.load_cert(join(PATH, 'QualifiedChain.crt'))
sk = X509.X509_Stack()
sk.push(x509)
sm_obj.set_x509_stack(sk)

st = X509.X509_Store()

st.load_info(join(PATH, 'QualifiedChain.crt'))

sm_obj.set_x509_store(st)

# re-wrap signature so that it fits base64 standards
cooked_sig = '\n'.join(raw_sig[pos:pos + 76] for pos in
                       xrange(0, len(raw_sig), 76))

# now, wrap the signature in a PKCS7 block
sig = "-----BEGIN PKCS7-----\n%s\n-----END PKCS7-----\n" % cooked_sig

# and load it into an SMIME p7 object through the BIO I/O buffer:
buf = BIO.MemoryBuffer(sig)
p7 = SMIME.load_pkcs7_bio(buf)

signers = p7.get0_signers(sk)
certificat = signers[0]
data_bio = BIO.MemoryBuffer(MSG)
sm_obj.verify(p7, data_bio)  # This is the line that count. 
```

但就我而言，摘要类型是 md5sha1，openssl 无法识别：

```
$ openssl list-message-digest-commands
md4
md5
rmd160
sha
sha1 
```

我需要做的是获取 pkcs#7 signedContent 并手动检查它。

我需要的是一个相当于`org.bouncycastle.cms.CMSSignedDataParser`.

如何让摘要能够手动验证而无需使用`sm_obj.verify`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-04T07:09:32.973

好的，所以我能够在 bash 中做到这一点：

```
#!/bin/bash

if [ $# -ne 1 ]; then
    echo "USAGE: $0 sig.pkcs7.pem"
    exit 1
fi

rm -fr /tmp/pkcs7tosignature
mkdir /tmp/pkcs7tosignature
cp "$1" /tmp/pkcs7tosignature/sig.pkcs7
cd /tmp/pkcs7tosignature/

# Convert PEM pkcs7 to DER
openssl pkcs7 -in sig.pkcs7 -inform PEM -out sig.der -outform DER

# Extract x509 certificate
openssl pkcs7 -in sig.pkcs7 -inform PEM -print_certs > cert.pem

# Look for signed signature offset
offset=$(openssl asn1parse -inform der -in sig.der | python -c "import sys; l = sys.stdin.readlines()[-1]; print int(l.split(':')[0]) + int(l.split('hl=')[1].split()[0])")
count=$(openssl asn1parse -inform der -in sig.der | python -c "import sys; l = sys.stdin.readlines()[-1]; print int(l.split('hl=')[1].split('l=')[1].split()[0])")

# Copy signed signature
dd if=sig.der of=signed-sha1.bin bs=1 skip=$[ $offset ] count=$count 2>/dev/null

# Extract public key from certificate
openssl x509 -inform pem -in cert.pem -noout -pubkey > pubkey.pem

# Decrypt signed signature
openssl rsautl -verify -pubin -inkey pubkey.pem < signed-sha1.bin > verified.bin

# Print pkcs7 algorithm
openssl asn1parse -inform der -in verified.bin | python -c "import sys; l = sys.stdin.read(); print l.split('OBJECT')[1].split('\n')[0].split(':')[1].strip()"

# Print pkcs7 signature
openssl asn1parse -inform der -in verified.bin | python -c "import sys; l = sys.stdin.read(); print l.split('[HEX DUMP]:')[1].split('\n')[0].strip()" 
```

现在只需要在 Python 中转换它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-04T19:47:31.520

尝试以下方法，深受这篇[博文的](http://www.v13.gr/blog/?p=303)启发：

```
import OpenSSL
from Crypto.Util import asn1

c=OpenSSL.crypto

certbuffer = # get your PEM here, e.g. by cert = open("/path/to/file.pkcs7.pem", 'rb').read()

# This is the certificate to validate
# an OpenSSL.crypto.X509 object
cert=c.load_certificate(crypto.FILETYPE_PEM, certbuffer)

# Get the signing algorithm
algo=cert.get_signature_algorithm()

# Get the ASN1 format of the certificate
cert_asn1=c.dump_certificate(c.FILETYPE_ASN1, cert)

# Decode the certificate
der=asn1.DerSequence()
der.decode(cert_asn1)

# The certificate has three parts:
# - certificate
# - signature algorithm
# - signature
# http://usefulfor.com/nothing/2009/06/10/x509-certificate-basics/
der_cert=der[0]
der_algo=der[1]
der_sig=der[2]

# The signature is a BIT STRING (Type 3)
# Decode that as well
der_sig_in=asn1.DerObject()
der_sig_in.decode(der_sig)

# Get the payload
sig0=der_sig_in.payload

# Do the following to see a validation error for tests
# der_cert=der_cert[:20]+'1'+der_cert[21:]

# First byte is the number of unused bits. This should be 0
# http://msdn.microsoft.com/en-us/library/windows/desktop/bb540792(v=vs.85).aspx
if sig0[0]!='\x00':
    raise Exception('Number of unused bits is strange')

# Now get the signature itself
sig=sig0[1:]

# and do the actual verification against your custom hash
# ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-06T08:36:38.013

PKCS7 有一组 SignerInfos。每个 SignerInfo 可能有不同的消息摘要算法。

请参阅[https://github.com/erny/pyx509](https://github.com/erny/pyx509)。这需要 pyasn1 和 pyasn1-modules。

```
./pkcs_parse <pkcs7 signature in DER format> 
```

这将提取每个签名者信息的摘要算法。

# iphone - 仅在归档时出现链接器错误

> ID：15700949
> 
> 赞同：3
> 
> 时间：2013-03-29T09:54:49.760
> 
> 标签：iphone, ios, linker-errors, archive, ipa

当我使用 iOS 设备构建项目时，没有错误。我什至可以在带有调试模式的模拟器上运行该项目。但是当我尝试使用存档创建 ipa 时，会出现此错误。![在此处输入图像描述](../Images/a1ade8ec6dc68d0c7161ccaef9330be6.png) 我刚刚在配置文件中添加了另一个设备，下载了新配置文件并将其添加到管理器中。现在它不允许我创建 ipa。我尝试再次下载证书，重新启动 Xcode。但它没有用。

**编辑** 当我删除调用 QuotedPrintable::decode() 方法的行时，它工作正常。如何在构建设置中设置quotedPrintable.h 的路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:07:09.507

我在 * *Library Search Paths **中给出了多个路径，这让 xcode 感到困惑。删除不需要的和错误的解决了这个问题。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:04:13.800

似乎您对 Debug 和 Release 配置有不同的体系结构相关设置（默认情况下，在模拟器上运行使用 Debug 和 Archive 使用 Release）。尝试使您找到的所有与体系结构相关的设置（带有 armv%x% 的设置）都与 Debug 类似，并检查会发生什么。

# c# - RFC2898DeriveBytes 未解密

> ID：15700954
> 
> 赞同：2
> 
> 时间：2013-03-29T09:55:04.433
> 
> 标签：c#, encryption, rfc2898

我在使用 RFC2898DeriveBytes 时遇到了一些问题。情况如下：我正在使用 RSACryptoProvider 创建一个公钥/私钥对，并使用 Rfc2898 来加密私钥文件。我正在使用以下代码进行加密：

```
 Rfc2898DeriveBytes key = new Rfc2898DeriveBytes(frm2.txtPassphrase.Text, saltbyte);

 // Encrypt the data.
 TripleDES encAlg = TripleDES.Create();
 encAlg.Key = key.GetBytes(16);

 // Create the streams used for encryption. 
 byte[] encrypted;
 using (FileStream fsEncrypt = new FileStream(@"D:\test.xml", FileMode.Create, System.IO.FileAccess.Write))
 {
     using (CryptoStream csEncrypt = new CryptoStream(fsEncrypt, encAlg.CreateEncryptor(), CryptoStreamMode.Write))
     {
          using (StreamWriter swEncrypt = new StreamWriter(csEncrypt))
          {
               //Write all data to the stream.
               swEncrypt.Write(privateKeyXml);
          }
      }
 } 
```

这是为了解密：

```
TripleDES decAlg = TripleDES.Create();
Rfc2898DeriveBytes key1 = new Rfc2898DeriveBytes(frm1.txtPassphrase.Text, saltbyte);
decAlg.Key = key1.GetBytes(16);

// Create the streams used for decryption. 
using (FileStream fsDecrypt = new FileStream(@"D:\test.xml", FileMode.Open, System.IO.FileAccess.Read))
{
    using (CryptoStream csDecrypt = new CryptoStream(fsDecrypt, decAlg.CreateDecryptor(), CryptoStreamMode.Read))
    {
        using (StreamReader srDecrypt = new StreamReader(csDecrypt))
        {

             // Read the decrypted bytes from the decrypting stream 
             // and place them in a string.
             decPrivateKeyXml = srDecrypt.ReadToEnd();
         }
     }
} 
```

现在的问题是，当我得到 decPrivateKeyXml 时，除了前几个单词之外的所有单词都是正确的。前几句话只是打乱了：

```
"�� ���dalue><Modulus>u9N+amIgXTw1zzJ+bxXoKaaGwCVFeXkKvdx0vhd24X7vvcJpnkA6gFgOeypbTTGm3if1QM/lyLN3qoprBkHJKDo7ldzj5a4L2Xb1tP1yUyNDban/KzkzsGK0h3fLO8UxRE6cHIB5cyEUmgmkjpFoXzz7DovUrZh3Z3qV20AHZLs=</Modulus><Exponent>AQAB</Exponent><P>5pCr4yPtn8ZyZskIpFM9pgZI1BUBIJYYhnYPywrMTj1smsQGuCswXNrcKsGvF6c9KrrXFF69AgbzcAsQwI449Q==</P><Q>0IvXoP8uELT/v8lG5R0YmvrgTfVQNJp8n8PT7J1dN3dsCDUHa+rK2Q4XSehFHT8XQgiENICkYg6xsdJqXXxY7w==</Q><DP>KwpSrAIm966J6JoanOJVHcsKiVyqazTZuzAK3rJTVT+uKG3zeynEy3CnrOufDeFQT8u1Hr5YtioqA35tUCS8iQ==</DP><DQ>UXZOxJTpaZ1KSaBWESlMcz2MYOdybRnrlHzqS4Ms5n2/tXUBcSZGFoNqlXQli0cZzrGE8v1NOQCEaPHImrv4AQ==</DQ><InverseQ>rX3TlQMreZvjm+fNS5UK90tj/KQQAlP0u5xxgEAUVfr8ZE/hsSOcB0MuXPyeGExRyRiBdSUsj64BHOVPH9+mcw==</InverseQ><D>H04JtNtz/3YolccZsZQaJM7/iIjtwmg9NRXIU2J/yueoN51ukxSra3bBux99JimPYVmRk+LSrpfS6xa07c8LIqMaC6nFQCVF6yJH3sHuDuL7Hob2dVZ+egyjeCVu8vyn1R4/SAZ4AaWtmc8c0Zt3hSvdDMCtN61HWegFmugvRkk=</D></RSAKeyValue>" 
```

我不知道代码有什么问题......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T13:09:05.177

.NET 使用随机 IV 进行 CBC 加密。您需要将此 IV 与密文一起存储并用它初始化您的解密器。通常，IV 以密文为前缀。

# vb.net - 数据访问层 - 实用程序类和数据传输对象

> ID：15700960
> 
> 赞同：0
> 
> 时间：2013-03-29T09:55:30.717
> 
> 标签：vb.net

我有一本书，它讨论了设计模式和层的使用，特别是表示层、业务逻辑层和数据访问层。

我现在了解了实用程序类和数据传输对象的概念。但是，本书中的所有示例和信息都在讨论它们如何应用于业务逻辑层。

我假设它们也适用于数据逻辑层，还是有另一种我不知道的设计模式？

这个问题是我昨天问的一个问题，这里是：[VB.NET - Creating objects on each loop](https://stackoverflow.com/questions/15692912/vb-net-creating-objects-on-every-loop)。

如果需要，我将发布一些代码来澄清我要问的内容，尽管这更像是一个概念性问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:01:51.973

实用程序类和 DTO 在数据和表示层中同样适用。我经常使用数据层中定义的 DTO 将数据“向上”传递到业务层。

# android - 使用专用线程获取新内容后，Android 无限列表视图未更新

> ID：15700961
> 
> 赞同：0
> 
> 时间：2013-03-29T09:55:33.230
> 
> 标签：android, commonsware-cwac

我在使用[cwac-endless 时](https://github.com/commonsguy/cwac-endless)遇到问题 请注意，我正在使用支持库和操作栏 sherlock（我的问题可能与此无关）。我的自定义适配器在 SherlockListFragment 中工作正常（扩展 BaseAdapter）。

当我向下滚动并最终获取新内容（使用自己的类扩展 Thread）时，一切似乎都工作正常（任务在 DemoAdapter（扩展 EndlessAdapter）的 onItemsReady() 中返回，新内容在那里（不显示，但对象不为空） ，并添加到我的对象中）。

所以当我调用 onDataReady() 时，什么也没有发生。几个小时以来一直在努力解决这个问题。

你看到我的代码有什么问题吗？没有错误，只是没有显示新内容。

片段类

```
public class BusinessListFragment extends SherlockListFragment {
private DemoAdapter adapter;
static public List<Business> items;

public static final String TAG = BusinessListFragment.class.getName();

public interface IItemsReadyListener {
    public void onItemsReady(List<Business> data);
}

public BusinessListFragment() {
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setRetainInstance(true);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment_business_list, null);
    return view;
}

@Override
public void onViewCreated(View arg0, Bundle arg1) {
    super.onViewCreated(arg0, arg1);
    RestoApplication app = (RestoApplication) (getActivity().getApplication());
    if (adapter == null) {
        adapter = new DemoAdapter(getSherlockActivity(), app, items);
        adapter.setRunInBackground(false);
    }
    setListAdapter(adapter);
}

static public void start() {
}
} 
```

无限功能的适配器

```
public class DemoAdapter extends EndlessAdapter implements IItemsReadyListener {

private RotateAnimation rotate = null;
ArrayList<String> tempList = new ArrayList<String>();
private final Context ctx;
private final RestoApplication app;
private List<Business> items;
private static final String LOG_TAG = DemoAdapter.class.getName();
private boolean hasMoreData = false;

private int page = 1;

final Handler mHandler = new Handler();

void setDataFromAnyThread(final List<Business> newData) {
    // Enqueue work on mHandler to change the data on
    // the main thread.
    mHandler.post(new Runnable() {
        @Override
        public void run() {
            items.addAll(newData);
            onDataReady();
            hasMoreData = items.isEmpty();
            Log.d(LOG_TAG, "ok done, items size: " + items.size());
        }
    });
}

public DemoAdapter(Context ctx, RestoApplication app, List<Business> items) {
    super(new SearchBusinessAdapter(ctx, app, items));
    this.ctx = ctx;
    this.app = app;
    this.items = new LinkedList<Business>(items);
    rotate = new RotateAnimation(0f, 360f, Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);
    rotate.setDuration(600);
    rotate.setRepeatMode(Animation.RESTART);
    rotate.setRepeatCount(Animation.INFINITE);
    page++; // the moment cacheInBackground will be called for the first
            // time we'll need to download page 2;
}

@Override
protected View getPendingView(ViewGroup parent) {
    View row = LayoutInflater.from(ctx).inflate(R.layout.list_item_business, null);

    View child = row.findViewById(R.id.info_container);
    child.setVisibility(View.GONE);
    child = row.findViewById(R.id.throbber);
    child.setVisibility(View.VISIBLE);
    child.startAnimation(rotate);

    return (row);
}

@Override
protected boolean cacheInBackground() {
    Log.d(LOG_TAG, "cacheInBackground");

    String path = new SearchBuinessUrlBuilder().businessType("1").lang(AbstractActivity.FRENCH).pageNumber(page).location("londres").build();
    new SearchBusinessLoader(mHandler, DemoAdapter.this, ctx, path).start();

    return hasMoreData;
}

@Override
protected void appendCachedData() {
    Log.d(LOG_TAG, "appendCachedData");
}

@Override
public void onItemsReady(final List<Business> data) {
    Log.d(LOG_TAG, "onItemsReady in DemoAdapter new data.size()= "+data.size());

    setDataFromAnyThread(data);

    page++;
}

} 
```

自定义适配器

```
public class SearchBusinessAdapter extends BaseAdapter {

private final static String BUS_TAG = SearchBusinessAdapter.class.getSimpleName();
private final static String LOG_TAG = SearchBusinessAdapter.class.getSimpleName();
private final Context ctx;
 private final RestoApplication app;
private final List<Business> items;

public SearchBusinessAdapter(Context ctx, RestoApplication app, List<Business> items) {
    this.ctx = ctx;
    this.items = new LinkedList<Business>(items);
    this.app = app;
}

@Override
public int getCount() {
    return items.size();
}

@Override
public Object getItem(int position) {
    return items.get(position);
}

@Override
public long getItemId(int position) {
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    final View view;
    if (convertView == null) {
        view = LayoutInflater.from(ctx).inflate(R.layout.list_item_business, null);
    } else {
        view = convertView;
    }

    Business item = items.get(position);

    ImageView imgThumbmail = ((ImageView)   view.findViewById(R.id.newsListItemThumbnail));
    imgThumbmail.setImageDrawable(ctx.getResources().getDrawable(R.drawable.ic_launcher));

    TextView nameTf = ((TextView) view.findViewById(R.id.name));
    FontsWrapper.setBoldTf(ctx, new TextView[] { nameTf });
    nameTf.setText(item.getName());

    TextView adressTf = ((TextView) view.findViewById(R.id.adress));
    FontsWrapper.setCondensedTf(ctx, new TextView[] { adressTf });

    StringBuilder adressSb = new StringBuilder();
    adressSb.append(item.getStreet());
    adressSb.append("\n");
    adressSb.append(item.getZip() + " " + item.getCity());
    adressTf.setText(adressSb.toString());

    TextView cuisineTypeTf = ((TextView) view.findViewById(R.id.cuisineType));
    FontsWrapper.setLightTf(ctx, new TextView[] { cuisineTypeTf });

    StringBuilder cuisinesSb = new StringBuilder();
    cuisinesSb.append(ctx.getText(R.string.cuisine_type_label));
    cuisinesSb.append(": ");
    if (item.getCuisinesList() != null) {
        for (int i = 0; i < item.getCuisinesList().size(); i++) {
            cuisinesSb.append(item.getCuisinesList().get(i).getCuisine());
            if (i < item.getCuisinesList().size() - 1) {
                cuisinesSb.append(", ");
            }

        }

    } else {
        cuisinesSb.append("/");

    }
    cuisineTypeTf.setText(cuisinesSb);

    return view;
}

} 
```

搜索业务加载器：

```
public class SearchBusinessLoader extends AbstractSearchBusinessLoader {
static final String LOG_TAG = SearchBusinessLoader.class.getSimpleName();

public SearchBusinessLoader(Handler handler, SearchBusinessListener listener, Context ctx, String path) {
    super();
    super.ctx = ctx;
    this.handler = handler;
    this.listener = listener;
    this.path = path;
}

public SearchBusinessLoader(Handler handler, IItemsReadyListener listener, Context ctx, String path) {
    super();
    super.ctx = ctx;
    this.handler = handler;
    this.endlessListener = listener;
    this.path = path;
}

@Override
InputStream getStream() throws IOException, Exception {
    DefaultHttpClient client = new DefaultHttpClient();
    Log.d(LOG_TAG, "path= "+path);
    HttpGet request = new HttpGet(path);
    HttpResponse response = client.execute(request);
    return response.getEntity().getContent();
}
} 
```

抽象类（完成后解析和调用监听器）

```
public abstract class AbstractSearchBusinessLoader extends Thread {
protected Handler handler;
protected SearchBusinessListener listener;
protected IItemsReadyListener endlessListener;
protected Context ctx;
protected String path;
private List<Business> businessesList = new ArrayList<Business>();

public interface SearchBusinessListener {
    public void onSearchResult(List<Business> bizList);
}

protected final static String LOG_TAG = AbstractSearchBusinessLoader.class.getSimpleName();

public final static int MSG_ERROR = 201;
public final static int MSG_FINISHED = 200;
public final static String BUNDLE_KEY_ERROR = "bundleKeyError";

abstract InputStream getStream() throws IOException, Exception;

@Override
public void run() {
    InputStream stream = null;
    try {
        stream = getStream();
    } catch (IOException e) {
        Log.e(LOG_TAG, "IOException while getting: " + path, e);
        handler.sendEmptyMessage(MSG_ERROR);
        return;
    } catch (Exception e) {
        Log.e(LOG_TAG, "Exception while getting: " + path, e);
        handler.sendEmptyMessage(MSG_ERROR);
        return;
    }

    try {
        XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
        XmlPullParser parser = factory.newPullParser();
        parser.setInput(stream, null);

        parser.next();
        while (!(parser.getEventType() == XmlPullParser.END_TAG && XmlTags.SEARCHRESPONSE.equals(XmlTags.fromString(parser.getName())))) {
            if (parser.getEventType() == XmlPullParser.START_TAG && XmlTags.TOTALRESULTS.equals(XmlTags.fromString(parser.getName()))) {
                String totalRes = parser.nextText();
            }
            if (parser.getEventType() == XmlPullParser.START_TAG && XmlTags.SEARCHSEED.equals(XmlTags.fromString(parser.getName()))) {
                String searchSeed = parser.nextText();
            }

            if (parser.getEventType() == XmlPullParser.START_TAG && XmlTags.BUSINESSES.equals(XmlTags.fromString(parser.getName()))) {
                parseBusinesses(parser);
            }
            parser.next();
        }
    } catch (XmlPullParserException e) {
        Log.e(LOG_TAG, "XmlPullParserException while processing business result xml", e);
        handler.sendEmptyMessage(MSG_ERROR);
        return;
    } catch (IOException e) {
        Log.e(LOG_TAG, "IOException while processing business result xml", e);
        handler.sendEmptyMessage(MSG_ERROR);
        return;
    }
    if (listener != null) {
        listener.onSearchResult(businessesList);
    }
    if (endlessListener != null) {
        Log.d(LOG_TAG, "endlessListener : onItemsReady");
        endlessListener.onItemsReady(businessesList);
    }
}

private void parseBusinesses(XmlPullParser parser) throws XmlPullParserException, IOException {
    ...

}

private List<Cuisine> parseCuisines(XmlPullParser parser) throws XmlPullParserException, IOException {
    ...

}

private List<Picture> parsePictures(XmlPullParser parser) throws XmlPullParserException, IOException {
    ....
}

private void parseBusiness(XmlPullParser parser) throws XmlPullParserException, IOException {
    ... 
```

}

# sql - 列表视图中的 VB.NET 空白记录

> ID：15700962
> 
> 赞同：0
> 
> 时间：2013-03-29T09:55:49.477
> 
> 标签：sql, vb.net, ms-access, record, blank-line

我正在尝试将 MS Access 数据库中的项目显示到列表视图中，但由于某些奇怪的原因，我无法找出原因，我的列表视图确实显示了所有记录，但它使一些记录为空白

[![在此处输入图像描述](../Images/41c7e63488fd718f2d19b8f2d3dd1517.png)](https://i.stack.imgur.com/hcgex.png)

这是我用来加载我的项目的子：

```
 Public Sub LoadItems()

    If tcOverzicht.SelectedIndex = 0 Then
        Dim strQuery As String = "SELECT tblItems.itemID, tblItems.Referentie, tblType.Type, tblItems.Stock, tblItems.Barcode, tblItems.Omschrijving, tblItems.Merk, tblItems.Opmerking " & _
                                 "FROM tblItems INNER JOIN tblType ON tblItems.typeID = tblType.typeID WHERE tblItems.typeID=" & intType & ";"
        Dim da As New OleDbDataAdapter
        Dim cmd As New OleDbCommand(strQuery, cnConnectie)
        Dim TABLE As New DataTable

        With da
            .SelectCommand = cmd
            .Fill(TABLE)
        End With

        'Listview leeg maken
        lvItems.Items.Clear()

        'Listview vullen met de gegevens uit de DB
        For i As Integer = 0 To TABLE.Rows.Count - 1
            With lvItems
                .Items.Add(TABLE.Rows(i)("itemID"))
                With .Items(.Items.Count - 1).SubItems
                    .Add(TABLE.Rows(i)("Referentie"))
                    .Add(TABLE.Rows(i)("Type"))
                    .Add(TABLE.Rows(i)("Stock"))
                    .Add(TABLE.Rows(i)("Barcode"))
                    .Add(TABLE.Rows(i)("Omschrijving"))
                    .Add(TABLE.Rows(i)("Merk"))
                    .Add(TABLE.Rows(i)("Opmerking"))
                End With
            End With
        Next
    End If

    If tcItems.SelectedIndex = 0 Then
        Dim strQuery As String = "SELECT tblItems.itemID, tblItems.Referentie, tblType.Type, tblItems.Stock, tblLeveranciers.Leverancier, tblItems.Barcode, tblItems.MinStuks,tblItems.Omschrijving, tblItems.Merk,  tblItems.Opmerking " & _
                                 "FROM (tblItems INNER JOIN tblLeveranciers ON tblItems.leveranciersID = tblLeveranciers.leveranciersID) INNER JOIN tblType ON tblItems.typeID = tblType.typeID;"

        Dim da As New OleDbDataAdapter
        Dim cmd As New OleDbCommand(strQuery, cnConnectie)
        Dim TABLE As New DataTable

        With da
            .SelectCommand = cmd
            .Fill(TABLE)
        End With

        'Listview leeg maken
        lvArtikel.Items.Clear()

        'Listview vullen met de gegevens uit de DB
        For i As Integer = 0 To TABLE.Rows.Count - 1
            With lvArtikel
                .Items.Add(TABLE.Rows(i)("itemID"))
                With .Items(.Items.Count - 1).SubItems
                    .Add(TABLE.Rows(i)("Referentie"))
                    .Add(TABLE.Rows(i)("Type"))
                    .Add(TABLE.Rows(i)("Stock"))
                    .Add(TABLE.Rows(i)("Leverancier"))
                    .Add(TABLE.Rows(i)("Barcode"))
                    .Add(TABLE.Rows(i)("MinStuks"))
                    .Add(TABLE.Rows(i)("Omschrijving"))
                    .Add(TABLE.Rows(i)("Merk"))
                    .Add(TABLE.Rows(i)("Opmerking"))
                End With
            End With
        Next
    End If

End Sub 
```

我完全迷路了..也许你们中的一些人知道为什么？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:18:50.077

您可以在手动将列添加到 listView 后使用此代码。

```
For i As Integer = 0 To TABLE.Rows.Count - 1
    Dim str(7) As String
    Dim itm As ListViewItem
    str(0) = TABLE.Rows(i)("itemID")
    str(1) = TABLE.Rows(i)("Referentie")
    str(2) = TABLE.Rows(i)("Type")
    str(3) = TABLE.Rows(i)("Stock")
    str(4) = TABLE.Rows(i)("Barcode")
    str(5) = TABLE.Rows(i)("Omschrijving")
    str(6) = TABLE.Rows(i)("Merk")
    str(7) = TABLE.Rows(i)("Opmerking")
    itm = New ListViewItem(str)
    listView.Items.Add(itm)
Next 
```

# php - 使用 preg_replace 带括号的负值格式

> ID：15700965
> 
> 赞同：3
> 
> 时间：2013-03-29T09:56:05.633
> 
> 标签：php, regex, preg-replace

我想要一个将使用 preg_replace 进行转换的正则表达式

```
=> -1121234.56 to (1,121,234.56)
=> -1121 to (1,121.00)
=> 1121 to 1,121.00 
```

现在我用过

```
$number = -12121234.56;
$replaced = preg_replace('/(-?\d+)(\d\d\d)/', '$1,$2', $number);

O/P -12,121,234.56 
```

我也想要上述功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T10:05:05.557

您可以使用`number_format()`：

```
function myformat($nr)
{
    $nr = number_format($nr, 2);
    return $nr[0] == '-' ? "(" . substr($nr, 1) . ")" : $nr;
}

myformat(-1121234.56);
myformat(-1121);
myformat(1121); 
```

也可以看看：[`number_format()`](http://php.net/number_format)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T11:22:13.700

我可以用`preg_replace`, 和`number_format`

```
$replace = preg_replace(
               '/(-)([\d\.\,]+)/ui',  
               '($2)',                          
               number_format($number,2,'.',',')       
           ); 
```

一些测试：

```
$number                     $replace
12121234.56                 12,121,234.56
-12121234.56                (12,121,234.56)
-1234567.89                 (1,234,567.89) 
```

我希望这可以帮助你。

# mysql - 需要 MySQL 查询返回结果与数组使用组的原因

> ID：15700966
> 
> 赞同：0
> 
> 时间：2013-03-29T09:56:13.033
> 
> 标签：mysql, sql

我有两张桌子孩子和父母

子表

```
Id data parent_id
----------------------
1      a1       1
2      abc      2
3      abcd     1
4      xyz      1
5      zxyy     2 
```

父表

```
Id     data
----------------
1      p1
2      p2 
```

使用单个 MySql 查询我想要像这样的输出

```
parentID   parentData    childData
--------------------------------------
1          p1            a1
                         abcd
                         xyz
2          p2            abc
                         zxyy

------------------------------------- 
```

如果这对任何人都很重要，我正在使用 PHP。

## 编辑

任何人都可以在这里帮助我... [SQLFiddle](http://sqlfiddle.com/#!2/05126/3)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:58:25.763

你可以这样做-

```
Select parent.id,parent.data,child.data from parent
  LEFT JOIN child ON parent.id = child.parent_id 
```

或者，您也可以执行以下操作（如果您希望所有数据都在一行中）

```
Select parent.id,parent.data,group_concat(child.data SEPARATOR ' ') as cdata from parent
  LEFT JOIN child ON  parent.id = child.parent_id group by parent_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:58:50.287

```
SELECT pt.id,pt.data,ct.data FROM parent_table pt 
LEFT JOIN child_table ct 
ON pt.ID = ct.parent_id 
GROUP BY ct.data 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:59:14.390

```
SELECT p.parent_id, p.data, c.data
FROM parents p INNER JOIN childs c ON p.id = c.parent_id
ORDER BY p.parend_id ASC, p.data ASC, c.data ASC 
```

# android - 不显示滚动视图内的 RelativeLayout 的最后一个 LinearLayout

> ID：15700970
> 
> 赞同：3
> 
> 时间：2013-03-29T09:56:34.853
> 
> 标签：android, android-linearlayout, android-relativelayout, android-scrollview

首先，我在网上漫游以寻求答案，但无法解决我的问题。

我在布局中有以下滚动视图：

```
<ScrollView 
    android:id="@+id/scrollview"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">
    <RelativeLayout 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:padding="16dp">

        <ImageView
            android:id="@+id/img_cover_picture"
            android:layout_width="128dp"
            android:layout_height="128dp"
            android:layout_centerHorizontal="true"

            android:layout_marginBottom="12dp"/>

        <LinearLayout 
            android:id="@+id/list_flags"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_alignBottom="@id/img_cover_picture"
            android:layout_marginBottom="-12dp"
            android:orientation="horizontal"
             />

        <TextView
            android:id="@+id/txt_title"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/img_cover_picture"
            android:gravity="center_horizontal"
            android:textColor="#F5F5F5"
            android:textSize="28sp" />

        <TextView 
            android:id="@+id/list_infos"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_below="@id/txt_title"
            android:textColor="#BABBBB"
             />

        <LinearLayout 
            android:id="@+id/view_blog_count"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_below="@id/list_infos"
            android:layout_marginTop="8dp"
            android:orientation="horizontal"
             />

        <TextView
            android:id="@+id/txt_description"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/view_blog_count"
            android:gravity="center_horizontal"
            android:textColor="#F5F5F5"
            android:textSize="18sp" />

        <LinearLayout 
            android:id="@+id/list_categories"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/txt_description"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="8dp"
            android:orientation="horizontal"
             />

    </RelativeLayout>

</ScrollView> 
```

**空的 LinearLayouts 以编程方式填充。**

我期望的是，当 RelativeLayout 中显示的内容太大时，ScrollView 允许用户滚动查看所有内容。

问题是：当它发生时，他可以滚动，但最后一个 LinearLayout（由 list_categories 标识）*永远不会显示*。我已经尝试了各种各样的事情：

*   也许因为它以编程方式填充它是空的？我试图把它放在@id/view_blog_count 下面来检查，它被显示了（覆盖了描述）
*   我尝试使用 set fillViewport 为 true
*   我试图改变权重
*   我尝试使用布局（_width|_height）
*   ...

到目前为止没有成功:(

谢谢你的帮助！

加斯顿

* * *

**更新**

我知道 LinearLayouts 是空的，但它们是以编程方式填充的（我确信它们是）。此外，我尝试在空的 LinearLayout 中添加一个 TextView 作为测试，但 LinearLayout 仍然隐藏。

* * *

**更新 2**

我正在使用RelativeLayout，以便标志（list_flags）在封面图片（img_cover_picture）上方。然而，正如@lelloman 所建议的那样，我确实尝试使用水平线性布局。它仍然没有工作:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:47:42.963

找到了一个可以解决问题的调整：

在 ScrollView 内的 RelativeLayout 末尾，我添加了以下元素。

```
 <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/list_categories"
        android:visibility="invisible"
        android:text="TEST"/> 
```

而且..它起作用了，最后一个线性布局现在就在那里。看起来它真的是*最后一个*没有显示的视图。

现在我知道这是调整，所以我不会验证这一点，以防有人提出更清晰的想法。但如果有人坚持这一点，这是我发现的最好的！

无论如何感谢您的帮助:)

干杯

加斯顿

# android - 打开谷歌地图应用程序并从我自己的应用程序活动中显示标记

> ID：15700971
> 
> 赞同：3
> 
> 时间：2013-03-29T09:56:37.613
> 
> 标签：android, google-maps

我正在尝试从我自己的应用程序活动中打开谷歌地图应用程序。我想在地图应用程序的特定位置上显示一个标记。到目前为止我发现的是这段代码。

```
 String label = "shop";
        String uriBegin = "geo:" + lat + "," + lng;
        String query = lat + "," + lng + "(" + label + ")";
        String encodedQuery = Uri.encode(query);
        String uriString = uriBegin + "?q=" + encodedQuery + "&z=16";
        Uri uri = Uri.parse(uriString);
        Intent intent = new Intent(android.content.Intent.ACTION_VIEW,uri);
        startActivity(intent); 
```

它的作用是打开地图应用程序，但不断向我显示我提供的值在哪里的`loading messagebox`说法。这有什么问题？`searching for:<lat>,<lng>(shop)``<lat> and <lng>`

我从另一个[stackoverflow 帖子](https://stackoverflow.com/questions/13053352/android-how-to-launch-google-map-intent-in-android-app-with-certain-location)中复制了这段代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-24T18:49:59.800

更新您的谷歌地图应用程序。

然后（如果还没有工作），您可以尝试使用以下代码：

```
String uri = String.format(Locale.ENGLISH, "geo:%f,%f?z=17&q=%f,%f", latitude,longitude,latitude,longitude);
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(uri)); 
```

基于以下问题： [使用提供的位置和标记启动 Google Maps App 以](https://stackoverflow.com/questions/7168522/starting-google-maps-app-with-provided-location-and-marker)使标记出现，将查询标记添加到 URI

# javascript - Chrome 浏览器卡在 javascript 执行上

> ID：15700972
> 
> 赞同：0
> 
> 时间：2013-03-29T09:56:39.463
> 
> 标签：javascript, google-chrome, mootools, lazy-loading, freeze

我使用 chrome 版本 26.0.1410.43 m。我对这样的html代码有疑问：

```
<div class="visos_prekes">
    <ul class="block-list list-1">
        <li class="simple">
            <div class="tac">
                <a href="link" title="STRING">
                    <img src="/img/blank.gif" style="background:url(link) center no-repeat;" alt="STRING" width="190" height="128" />
                </a>
            </div>
            <p>PRODUCT NAME</p>
            <div class="tt">
                STRING.<br /><br />
                STRING
                <strong>999999999</strong>
                <br />
                <div class="clear2"><strike class="mazkaina fr">999999999</strike></div>
            </div>
            <form method="post" action="link">
                <input name="klauskite" type="hidden" value="true" />
                <input name="klpatvirtinti" type="submit" style="cursor:pointer;border:none;margin-left:2px;margin-right:13px;width:80px;height:33px;display:inline-block;padding-bottom:20px;" value="Klauskite" title="Pateikite klausima apie šia preke" class="button-3 posrel block fl" />
                <a rel="nofollow" style="cursor:pointer;border:none;margin-right:4px;padding-bottom:10px;" title="Pridėti prekę i krepšeli" class="green-button-2 block posrel fr" onclick="checkCart()">
                    <span></span>
                    I krepšeli
                </a>            
            </form>
            <div class="clr">&nbsp;</div>
        </li>
        <li id="beforePagination"></li>
    </ul>
</div> 
```

我使用延迟分页在块中加载产品`<ul>`，当`<ul>`块中出现大约 400 多个元素时`<li>`，我使用之前复制的代码，我尝试使用 mootools 在 javascript 中执行该功能：

```
$$('.visos_prekes').set('html', '<ul class="block-list list-1"><li id="beforePagination"></li></ul>'); 
```

但是当我在 Chrome 中执行该功能时，它会冻结大约 3 秒。我在 IE8、Firefox 和它的工作正常没有任何冻结的代码尝试。我该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:04:46.023

mootools 中的 $$ 函数返回 Elements 实例 - 尝试调用你想要的元素并将其设置为 html - 我猜你想要这个：

```
$$('.visos_prekes')[0].set('html', '<ul class="block-list list-1"><li id="beforePagination"></li></ul>'); 
```

# c - “#define PACK_OFFSET ((size_t)((pack_t *)0)->data)”是什么意思

> ID：15700975
> 
> 赞同：4
> 
> 时间：2013-03-29T09:56:45.990
> 
> 标签：c, pointers, c-preprocessor

有一个结构

```
typedef struct _pack_t {
    char tag[4];     
    int type;                
    size_t size;              
    size_t offset;           
    char data[0];           
} __attribute__((packed)) pack_t; 
```

并且有一个定义

```
#define PACK_OFFSET ((size_t)((pack_t *)0)->data) 
```

定义是什么意思？以及如何理解指针“0”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T10:01:02.167

这是一个预处理器宏。`data`它产生结构成员的偏移量`pack_t`。当其封闭结构的基地址为零时，它通过获取该成员的绝对地址来做到这一点。

对于非 NULL 指针，这可以通过声明任何类型的变量`pack_t`然后获取结构地址和成员地址的差异来完成，两者都以字节为单位，如下所示：

```
pack_t dummy;
size_t offset = (char *)&dummy.data - (char *)&dummy; 
```

（但这不仅是无效的，因为减去的两个指针不指向同一个数组的元素，而且它还需要一个多余的局部变量，由于各种原因，人们不想要它。这就是为什么它巧妙地使用 a空指针。）

（不要因为没有看到 addressof ( `&`) 运算符而感到困惑 -`data`是一种数组类型，因此它会衰减为指向其第一个元素的指针。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T10:01:35.833

这是您的字段数据的偏移量`struct _pack_t`； `(pack_t *) 0`是 NULL 指针，类型为 pack_t。请注意，字段数据的长度为 0，表示“变量”：它必须由某个函数填充。

前任：`memcpy((char *) packet + PACK_OFFSET, data, data_len);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T10:04:22.040

让我们想象一个黑板

老师看到的地方

```
PACK_OFFSET 
```

(s)他把橡胶板拿出来擦洗`PACK_OFFSET`并用

```
((size_t)((pack_t *)0)->data) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T10:17:05.133

我不是在回答你的问题，我只是举一个例子来支持 H2CO3 的观点。要正确获取结构成员的偏移量，它必须是 0 指针。代码如下：

```
typedef struct _pack_t {
    char tag[4];     
    int type;                
    size_t size;              
    size_t offset;           
    char data[0];           
}pack_t;

#define OFFSET_0 ((size_t)((pack_t *) 0)->data)
#define OFFSET_1 ((size_t)((pack_t *) 1)->data)
#define OFFSET_2 ((size_t)((pack_t *) 2)->data)

int main(void){

    printf("%lu\n", OFFSET_0);
    printf("%lu\n", OFFSET_1);
    printf("%lu\n", OFFSET_2);
    return 0;
} 
```

输出：

```
24
25
26 
```

# php - 带有连接的mysql选择查询

> ID：15700978
> 
> 赞同：0
> 
> 时间：2013-03-29T09:56:56.690
> 
> 标签：php, mysql

我需要一些数据库中的数据，但我无法执行查询。我正在解释数据库表，然后我想要的结果任何人都可以帮助我执行正确的查询。我将非常感激。

表 - 账单状态

```
bill no    saleman    shop           amount
-------------------------------------------
1          umer       Best Mart      3000
2          umer       E-mart         4000
3          umer       Shopping Club  2000
4          umer       The Store      1000
5          umer       Rachna S/S     1500 
```

表 - 分类帐

```
bill no    saleman    shop          credit    debit
---------------------------------------------------    
1           umer    Best Mart                  200
2           umer    E-mart          100    
            umer    Royal Store     1000    
            umer    Chenab Store    1800    
            umer    Elite Mart      3500    
            umer    The Mart        5000 
```

期望的结果

```
billno    saleman    shop            amount    credit    debit
--------------------------------------------------------------    
1         umer       Best Mart       3000                 200
2         umer       E-mart          4000      100    
3         umer       Shopping Club   2000        
4         umer       The Store       1000        
5         umer       Rachna S/S      1500        
          umer       Royal Store               1000    
          umer       Chenab Store              1800    
          umer       Elite Mart                3500    
          umer       The Mart                  5000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:09:08.173

假设关系是基于推销员和商店然后尝试类似

```
SELECT 
    b.bill_no
    , b.saleman
    , b.shop
    , b.amount
    , l.credit
    , l.debit
FROM bill_status b
INNER JOIN ledger l
        ON l.saleman = b.saleman
       AND l.shop = b.shop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:13:24.167

您正在寻找 UNION：

```
SELECT *, '' as credit, '' as debit
FROM bill_results

UNION ALL

SELECT *, '' as amount
FROM ledger 
```

确保表格具有相同的列

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T10:04:23.033

您可以使用关注。

**select * from table1 INNER JOIN table2 ON table1_billno=table2_billno;**

您可以使用此查询从两个表的账单编号相同的两个表中获取数据。你明白我的观点了吗？

# css - 如何让网格看起来像 CRM 网格？

> ID：15700979
> 
> 赞同：1
> 
> 时间：2013-03-29T09:57:00.527
> 
> 标签：css, dynamics-crm-2011, dynamics-crm, dynamics-crm-online

在 Html Web 资源中，我使用的是表格。是否有可能获得与 CRM 2011 网格相同的网格。我已经尝试过 SDK 中的 css。结果并不令人满意。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:02:37.080

为您自己的 Html 设置样式以匹配是非常棘手的，那是在您考虑 CRM 中的选项以更改纯美感或可访问性（高对比度）的配色方案之前。

话虽如此，我写了一篇关于创建自定义对话框以匹配默认战舰灰色样式的[博客。](http://frozenorange.wordpress.com/2012/04/13/custom-web-pages-with-crm-2011-look-and-feel-using-knockout-js/)当我概述所有涉及的样式表时，它可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:20:40.567

CRM 中的网格只是不同 HTML 控件的组合，所以是的，这是可能的。事实上，这是唯一的方法。

现在，我了解到您正在寻找一种快速应用 CSS 文件并使其工作的方法。我尝试过一次，但并没有真正发挥作用（可能是因为这是我使用 CRM 的第一个月）。我怀疑有很多不同的 CSS 文件需要合作。

我们所做的基本上是“足够接近”的外观，我们告诉客户它看起来的差异是由于“更改进”的方法。他们接受了。

# cakephp - CakePHP 根据时间可用性过滤字段

> ID：15700983
> 
> 赞同：0
> 
> 时间：2013-03-29T09:57:21.050
> 
> 标签：cakephp, datetime, time, cakephp-2.3

我正在使用蛋糕 2.3.1。
我正在开发一个管理客户运输的应用程序。由于我们的人力和物力资源有限，我需要为每个操作员和车辆实施“可用性标志”。即，如果“operator1”和“vehicle3”被安排到服务中（2013 年 2 月 31 日，从 8:30 到 12:30），则在该时间段内它们不应该被分配到其他服务中。

我完全迷失在“时间段”管理中。我想制作一个新表（“可用性”）来管理每个“可用标志”，但与我的实际技能相比，结果太复杂了（迈出一小步后会有更多问题阻碍我）。

我刚开始使用 PHP 和 CakePHP，所以如果可能的话，我需要你指出正确的方向。
在我看来，有没有办法根据他们的可用性过滤运营商和车辆`service/add`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:03:51.723

是的，有一种方法，但是 - 它会变得有点复杂。您只需要存储他们计划的时间，然后检查您尝试计划的时间（可能是 Ajax，但取决于您的 CMS 的布局）。

一旦你开始沿着这条路走下去，就会带着更具体的问题回来，但只要知道 1) 是的，这当然是可行的，但是 2) 没有什么神奇的“findButFilterOutNotAvailable()”方法（不幸的是）:)

# java - 如何在java中循环并显示拆分字符串中的元素？

> ID：15700985
> 
> 赞同：1
> 
> 时间：2013-03-29T09:57:26.233
> 
> 标签：java, string, jtextarea

我必须为大学做一个项目，从外部文本文件中读取数据，并有一个下一个/上一个/退出按钮来循环浏览各种文本块。这是我第一次遇到 gui，我发现显示项目非常困难。在各种迭代中，我使正确的文本块出现，但无法循环浏览它们。现在他们甚至没有显示。我有足够的时间，所以如果我只是走错了路，完全重建不是不可能的，欢迎提出任何建议。它编译得很好，但在 JTextArea 中没有显示任何内容。

这是我的代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.io.*;
import javax.swing.border.*;
import java.util.Scanner;

public class MainFrame extends JFrame
{
//Main panels declaration
private JPanel main1;
private JPanel main2;
private JPanel main3;

//Label Declaration
private JLabel topBar;

//Text area declaration
private JTextArea mainText;
int page = 0;

//Buttons declaration
private JButton prev;
private JButton next;
private JButton exit;

String output = "";
String [] hero = output.split("@");

//Constructor
public MainFrame() throws IOException
{   //Declare Layouts
    GridLayout grid = new GridLayout(2,1);
    BorderLayout bor = new BorderLayout(50, 10);
    FlowLayout flo = new FlowLayout();

    //Set frame layout
    setLayout(flo);
    setSize(800, 600);
    setVisible(true);

    //Initialise main panel 1
    main1 = new JPanel();
    main1.setLayout(grid);
    add(main1);
    main1.setBorder(new EtchedBorder());

    //Initialise main panel 2
    main2 = new JPanel();
    main2.setLayout(bor);
    main1.add(main2);

    //Text area
    mainText = new JTextArea(20,50);
    JScrollPane JSP = new JScrollPane(mainText);
    main2.add(bor.CENTER,mainText);
    mainText.setBorder(new EtchedBorder());
    mainText.setEditable(false);
    mainText.setText(hero[page]);

    //File Handling
    File inputFile = new File ("ProjectInputFile.txt");
    Scanner scanner = new Scanner(inputFile);

    while(scanner.hasNextLine())
    {
        output = output + (scanner.nextLine() + "\n");
    }

    //Top Bar
    topBar = new JLabel("Hero Viewer", SwingConstants.CENTER);
    main2.add(topBar, bor.PAGE_START);

    //Initialise main panel 3
    main3 = new JPanel();
    main3.setLayout(flo);
    main1.add(main3);

    //Prev Button
    prev = new JButton("Prev");
    main3.add(prev);
    ActionListener PrevList = new PrevButton(); //Call Button Listener
    prev.addActionListener(PrevList);

    //Exit Button
    exit = new JButton("Exit!");
    main3.add(exit);
    ActionListener ExitList = new ExitButton(); //Call Button Listener
    exit.addActionListener(ExitList);

    //Next Button
    next = new JButton("Next");
    main3.add(next);
    ActionListener NextList = new NextButton(); //Call Button Listener
    next.addActionListener(NextList);
}

//Prev button event listener
public class PrevButton implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        page = page --;
        mainText.setText(hero[page]);

    }
}

//Exit button event listener
public class ExitButton implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        setVisible(false);
        dispose();
        System.exit(0);
    }
}

//Next button event listener
public class NextButton implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        page++;
        mainText.setText(hero[page]);
    }
}

//Main Method
public static void main (String [] args) throws IOException
{
    MainFrame MF = new MainFrame();
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:16:25.970

后

```
while(scanner.hasNextLine())
{
    output = output + (scanner.nextLine() + "\n");
} 
```

尝试添加

```
hero = output.split("@"); 
```

我怀疑你的英雄数组是否为空。

# jquery - jQuery 插件 - 如果未填写任何选项，则返回 css 属性

> ID：15700987
> 
> 赞同：0
> 
> 时间：2013-03-29T09:57:32.660
> 
> 标签：jquery, jquery-plugins

我不明白为什么如果我试图返回 css 边框属性，它会返回一个空字符串，即使我已经用 css 设置了边框。我也尝试使用内联方法设置边框样式，但仍然无法正常工作..知道吗？谢谢！

```
(function($){

    var methods = {
    init : function( options, callbacks) {
        if(options === undefined) {
            return this.css("border");
        }

        return this.each(function(){
            if(options === null) {
                $(this).css("border","none");
                return;
            } else if(typeof options === "string") {
                $(this).css("border", options);
                return;
            } else if(typeof options === "object") {

                if(typeof options.style !== "undefined") {
                    $(this).css("border-style", options.style);
                } else {
                    $(this).css("border-style", "solid");
                }

                if(typeof options.width !== "undefined") {
                    $(this).css("border-width", options.width); 
                }

                if(typeof options.color !== "undefined") {
                    $(this).css("border-color", options.color); 
                }

                if(typeof options.radius !== "undefined") {
                    $(this).css("border-radius", options.radius);   
                }
            }
        });
    }
};

$.fn.border = function(method) {
    if ( methods[method] ) {
        return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else {
        return methods.init.apply( this, arguments );
    }
};

})(jQuery); 
```

如果我试图返回元素的颜色..一切似乎都很好..但不是边框属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:50:10.933

我已经像这样解决了这个问题：

```
(function($){

    var methods = {
        init : function( options, callbacks) {

            return this.each(function(){
                        if(options === null) {
                    $(this).css("border","none");
                } else if(typeof options === "string") {
                    $(this).css("border", options);
                } else if(typeof options === "object") {

                                if(typeof options.style !== "undefined") {
                                    $(this).css("border-style", options.style);
                                } else {
                                    $(this).css("border-style", "solid");
                                }

                    if(typeof options.width !== "undefined") {
                        $(this).css("border-width", options.width); 
                    }

                    if(typeof options.color !== "undefined") {
                        $(this).css("border-color", options.color); 
                    }

                    if(typeof options.radius !== "undefined") {
                        $(this).css("border-radius", options.radius);   
                    }
                }
            });
        },
            getBorderStyle: function(options, callback) {

                    var elements = new Array();

                    this.each(function(){

                        var borderProperties = {};

                        borderProperties.style = this.style.borderStyle;
                        borderProperties.color = this.style.borderColor;
                        borderProperties.width = this.style.borderWidth;
                        borderProperties.radius = this.style.borderRadius;
                        borderProperties.element = this;
                        elements.push(borderProperties);
                    });

                    return elements;
            }
    };

    $.fn.border = function(method) {
            if ( methods[method] ) {
                return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
            } else if(method === undefined) {
                return methods["getBorderStyle"].apply(this, arguments);
            } else {
                return methods.init.apply( this, arguments );
            }
    };

})(jQuery); 
```

# android - 获取同步服务后刷新片段视图

> ID：15700991
> 
> 赞同：0
> 
> 时间：2013-03-29T09:57:52.497
> 
> 标签：android, android-fragments, synchronize

我有一个同步服务，它以一定的时间间隔运行并根据服务器数据更新客户端。现在，如果用户对服务器数据进行任何更改，例如从列表视图中删除项目，那么该更改应该反映到相应的视图片段。

问题是 - 我在我的片段中得到了变化，但这不是自动的。这意味着我必须来回返回相关片段才能看到我的更新。

那么我应该如何从后台运行的同步服务获得通知，我的相应片段视图现在已更改，以便我可以在片段视图上调用刷新功能？

注意：我不想以一定的时间间隔一次又一次地刷新片段。我只想在我的片段视图更改时刷新。

更新：

我得到了适配器计数，它给出了片段中列表视图项的计数。因此，每当我获得更改的计数时，我都需要更新/刷新/重新加载片段。所以我的计数将作为更改片段视图的触发器。

它类似于：

```
if adapter.getCount() gets changed  //how to get notified about this change
{
        FragmentTransaction transactionOld =getActivity().getSupportFragmentManager().beginTransaction();

        transactionOld.detach(this).commit();

     FragmentTransaction transactionNew = getActivity().getSupportFragmentManager().beginTransaction();

        transactionNew.attach(this).commit();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:03:52.513

您应该[`BroadcastReceiver`](https://developer.android.com/reference/android/content/BroadcastReceiver.html)在您的 中使用 a ，在`Fragment`中注册`onStart()`并取消注册`onStop()`。

当您`SyncServices`完成并更新数据后，只需使用`sendBroadcast()`, 发送广播以通知您`Fragment`它是否可见。

当然，您必须为您的`Broadcast`, like设置自定义操作`com.myapp.ACTION_SYNC`，但您将在阅读[文档](http://developer.android.com/reference/android/content/BroadcastReceiver.html)时了解这一点。

# c++ - 使用 gcc 的 C++ 编译恶作剧

> ID：15700992
> 
> 赞同：0
> 
> 时间：2013-03-29T09:57:53.603
> 
> 标签：c++, gcc, compilation, g++

我目前面临一个奇怪的问题，我想找到有关它发生的原因以及如何防止它的文档。

简单地说，我正在使用动态加载的库开发一个框架，这就是发生的事情：

> ```
> void function()
> {
>   Object* object = new Object();
> 
>   call_dynamic_library(object);  
> }
> 
> // Dynamic library source:
> void dynamic_library_callback(Object* object)
> {
>   // The following would crash:
>   object->method();
>   // While the following would work:
>   object = new Object();
>   object->method();
> } 
> ```

指针当然是相同的，没有问题，标题也是。

就我对 C 编译的了解而言，如果这两个二进制文件是使用相同标头的不同版本编译的，这并不奇怪。然而事实并非如此。

我在使用虚拟纯方法和模板时大多会遇到这些问题。我想了解更多关于什么可能导致编译器以两种不同的方式编译这些对象的信息，即使它基于相同的头文件。

# php - PHP regex 在我的网站上不起作用，但在正则表达式编辑器上工作

> ID：15700993
> 
> 赞同：-1
> 
> 时间：2013-03-29T09:57:55.840
> 
> 标签：php, regex, utf-8, preg-match, spaces

## 我的目标

对于“作者姓名输入”，确保只输入空格和 utf-8 字母。我的网站语言是土耳其语，土耳其语字母表有非英语字符。

## 我奇怪的问题

**此正则表达式适用于 rubular.com**
如果输入字符串：“Selim Çınar”结果：匹配
如果输入字符串：“Selim Çınar 12”结果：不匹配
正则表达式：**`/^[\p{L} ]+$/u`**

**然后我在我的网站上创建了 trial.php 并在下面运行代码**

## 1

```
echo '<br /><br /><br />';
    $str ='Selim Cinar';
    if (!preg_match("/^[\p{L} ]+$/u", $str))
    {echo 'no, not only utf-8 letters and spaces';}
    else {$str.' yes utf-8 letters and spaces';}
echo '<br /><br /><br />'; 
```

**上面代码的结果**`<br />`：在源页面只有标签的空页面

## 2

```
echo '<br /><br /><br />';
    $str ='Selim Çınar'; //includes Tr characters
    if (!preg_match("/^[\p{L} ]+$/u", $str))
    {echo 'no, not only utf-8 letters and spaces';}
    else {$str.' yes utf-8 letters and spaces';}
echo '<br /><br /><br />'; 
```

**上面代码的结果**`<br />`：在源页面只有标签的空页面

## 3

## 代码来源： http: [//php.net/manual/en/function.ctype-alpha.php](http://php.net/manual/en/function.ctype-alpha.php)

```
 $str ='Selim Çınar'; //includes Tr characters
    $str =trim($str);
    $str = str_replace(' ', '', $str);
    setLocale(LC_CTYPE, 'TR_tr.UTF-8');
    if (ctype_alpha($str)) {echo 'yes utf-8 letters';}
    else {echo 'no, not only utf-8 letters';} 
```

**上面代码的结果**：不，不仅是 utf-8 字母

## 4

## 代码来源： http: [//php.net/manual/en/function.ctype-alpha.php](http://php.net/manual/en/function.ctype-alpha.php)

```
 $str ='Selim Cinar';
    $str =trim($str);
    $str = str_replace(' ', '', $str);
    setLocale(LC_CTYPE, 'TR_tr.UTF-8');
    if (ctype_alpha($str)) {echo 'yes utf-8 letters';}
    else {echo 'no, not only utf-8 letters';} 
```

**上面代码的结果**：是 utf-8 字母

## 我的phpinfo

PHP 版本 5.4.10
Apache 2.0 处理
程序 Apache API 版本：20051115
PCRE（Perl 兼容正则表达式）支持启用
PCRE 库版本 8.20 2011-10-21

## 关于 trial.php

trial.php 是纯 php。没有 html 标头声明。

# 我的问题

1.  为什么我的案例 1 和案例 2 **{! 更新：由 MikeM 解决 }**
2.  为什么案例 3 不将“SelimÇınar”理解为 utf-8？我的代码是假的吗（`setLocale`部分可能）？

# 更新

**问题 1 由 MikeM 解决。**

**问题 2 仍然作为问题存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:28:44.283

对于案例 1 和 2，您只会得到一个空页面，因为正则表达式成功匹配`$str`，因此`else`分支被执行，但是没有`echo`，所以没有打印任何内容。

我不知道你的第二个问题的答案。对`setLocale`我来说看起来不错，但它的行为取决于系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:04:52.303

不要使用`setlocale`or `utf8_decode`，你的问题很简单，因为你的 php 源文件没有以 UTF-8 保存。这取决于您的文本编辑器。

当您正确保存文件时，这将起作用：

```
$str = 'Selim Çınar'; //Since this is a string literal, its encoding is determined by
                     //how this source file was saved
if (preg_match("/^[\p{L} ]+$/u", $str)) {
    echo 'yes only utf-8 letters or spaces';
} else {
    echo 'no, not only utf-8 letters or spaces';
} 
```

# php - PHP将整数添加到字符串变量

> ID：15700995
> 
> 赞同：-4
> 
> 时间：2013-03-29T09:57:58.310
> 
> 标签：php

例如，如果我想在 PHP 中为某个变量赋予值 item5，但值 5 存储在变量 $num 中，我该怎么做？

我试过：

```
$item = 'item'$num; 
```

但这行不通

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:59:09.300

对于字符串连接，请使用`.`运算符。

```
$item = 'item'.$num; 
```

或者你可以使用双引号（解析字符串）方式：

```
$item = "item$num"; 
```

值得一提的是，虽然舒适，

*   通过语法突出显示，更容易看到谁是谁...
*   这不适用于数组！
*   会引起很多争议，并且调试混乱
*   如果您需要将变量与字符串连接，并且*之间没有空格*，则解析器将无法识别您的变量
    *   当然，您可以将它括在括号中`{$variable}`，但它不再那么方便了 - 几乎与`bla'.$variable.'bla`

一些注意事项：

*   PHP 有[一个非常好的文档库](http://php.net/manual/en/index.php)，请使用它。
*   在提出问题之前，请务必使用 Google，并在 StackOverflow 上进行搜索（我确信这是本网站上一个*大量*重复的问题）
*   下次请不要忘记添加**您得到的确切错误**

最*重要的一点*，虽然有点离题：**永远不要使用连接来组装 SQL 查询，因为它可能会打开一个 SQL 注入安全漏洞！！！** [最好把这个问题扼杀在萌芽状态...]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:59:11.783

您需要在这里进行连接..或使用双引号，以便可以解析 php 变量

```
$item = 'item'.$num; 
```

或者

```
$item = "item{$num}"; 
```

或者

```
$item = sprint('item.%d',$num); 
```

考虑到我的队友的建议..我会建议你使用 sprint().. 你可以阅读下面的评论..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:58:56.187

这根本不是你在 PHP 中连接的方式......

```
$item = 'item'.$num; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T10:01:07.100

你可以这样做：

```
echo 'item' . $num;
echo "item{$num}";
echo sprintf('item%d', $num); 
```