# StackOverflow 问答 15099000-15099999

# html - 背景图像未显示在 jquery 移动页面中

> ID：15099002
> 
> 赞同：0
> 
> 时间：2013-02-26T20:51:00.510
> 
> 标签：html, css, jquery-mobile

我正在使用 jQuery 手机。我最初尝试设置背景图像，`html{background: url("bg.png") repeat fixed 0 0;}`但没有成功，然后我尝试使用 body 标签

```
 body {background: url("bg.png") repeat fixed 0 0;} 
```

但是，如果我定义一个自定义类`.myclass{background: url("bg.png") repeat fixed 0 0;}` ，然后在我的标签中使用它，那么它就可以正常工作。

我只是想知道为什么 body 或 html 标签不起作用？它是被覆盖还是什么？有什么想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-27T09:49:02.940

由于 jQuery Mobile 独特的页面处理方式，您将无法看到对正文容器的更改。每个可见页面都有一个更大的 z-index 并且它浮动在正文上方。

基本上你对 body css 的更改是正确的，但它们不会是可见的。

你想要做的是改变这个类：**.ui-page**。这是每个 jQuery Mobile 页面的基类。

每个自定义更改都必须使用 !important 覆盖经典 css。

像这样：

```
.ui-page {
    background: url('http://subtlepatterns.com/patterns/escheresque_ste.png') repeat scroll 50% 50% #112233 !important;
    color: #aabbcc !important;
} 
```

这是一个有效的 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/u3E6K/](http://jsfiddle.net/Gajotres/u3E6K/)

# java - 内容提供者查询构造和默认表

> ID：15099004
> 
> 赞同：0
> 
> 时间：2013-02-26T20:51:10.223
> 
> 标签：java, android, sql

我有一个包含表的内容提供程序，并且我想使用键值*"key1"*查询特定条目，因此我在`query()`内容提供程序的方法中执行了以下操作：

```
 @Override
    public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {
        SQLiteQueryBuilder qb = new SQLiteQueryBuilder();
        SQLiteDatabase db = dbHelper.getReadableDatabase();
        qb.setTables(TABLE_NAME);
        Cursor c = qb.query(db, projection, selection, null, null, null, sortOrder);
        c.setNotificationUri(getContext().getContentResolver(), uri);
        return c;
    } 
```

如何构造`String selection`第二个参数？我试图将选择设置为*“key='key1'”*但失败了。

我目前有一个内容提供商，其中只有一张表。有没有办法直接通过 引用表格`URI`？现在我必须使用`URI/Table_name`.

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:35:12.887

您的问题尚不清楚，但可能是额外的引号是问题所在。您的选择字符串应该类似于*key="key1"*（或*key='key1'*）。

此外，您的提供者可以以任何它想要的方式解释 Uri，但标准方式是使用 UriMatcher 并使用表名指定它（就像您使用 URI/Table_name 一样）。

# php - 将文本文件解析到 mySQL 数据库中

> ID：15099009
> 
> 赞同：0
> 
> 时间：2013-02-26T20:51:27.363
> 
> 标签：php, sql, database, parsing, logfile

我想使用 PHP 将日志文件解析到数据库中的表中，但我一直收到错误消息

> php 解析错误，意外的 mysql_select_db 命令

有任何想法吗？？

这是我的代码；

```
<?
$handle = @fopen("NeXposeResults.txt","r");
$conn = mysql_connect("localhost")
mysql_select_db("resultsdb.mwb",$conn);

$values=;

while (!feof($handle))
{
    $buffer = fgets($handle, 4096);
    list ($a,$b,$c)=explode("|",$buffer);
    values.=($a,$b,$c);

    INSERT INTO storage (Description, Severity, Risk Score,)
    VALUES ($a,$b,$c,)
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:56:22.100

您在第 3 行缺少分号。

`$conn = mysql_connect("localhost")`应该`$conn = mysql_connect("localhost");`

# github - 你如何完全删除github上的文件

> ID：15099010
> 
> 赞同：0
> 
> 时间：2013-02-26T20:51:28.983
> 
> 标签：github

我已经看到了删除文件并将其从 git 历史记录中删除所需的命令。有没有办法用 github 网站做到这一点？如果没有，看起来我需要知道文件在哪里才能使用 git 命令执行此操作。github 在哪里存储本地存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:55:47.270

见：[https ://help.github.com/articles/remove-sensitive-data](https://help.github.com/articles/remove-sensitive-data)

要获取存储库的本地版本，请从 Github 上的存储库页面查找 URL，并按照上面链接中的说明进行克隆。

# javascript - 统计对 JavaScript 中各个站点的访问次数

> ID：15099012
> 
> 赞同：0
> 
> 时间：2013-02-26T20:51:33.417
> 
> 标签：javascript, google-chrome

我正在尝试编写一个 Chrome 扩展程序来跟踪一个人访问给定新闻站点的次数，并在用户经常阅读同一个站点时将其引导到其他站点。有没有办法通过查看每个页面加载的 URL 来做到这一点？以纽约时报为例，伪代码是：

```
var nytimesCount = 0; 
if (URL includes "nytimes.com")
{
    nytimesCount++;
} 
```

很简单。有没有办法做到这一点？使用 cookie（根据这个问题：[使用 javascript 和 cookies 计数页面访问](https://stackoverflow.com/questions/8331607/counting-page-visits-with-javascript-and-cookies)）或其他一些方法会更容易吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:01:17.950

您可以使用 javascript 使用 window.location.origin 获取 URL 来源，并将您的数据存储在一个数组中，索引是来源的名称，例如：

```
if (typeof visitedSites[window.location.origin] !== 'undefined') {
    visitedSites[window.location.origin] += 1;
} else {
    visitedSites[window.location.origin] = 1;
} 
```

在保存数据方面，我会考虑使用 HTML5 本地存储，这在 Chrome 中效果很好。[http://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)

# kendo-ui - 剑道网格，为什么 e.model.set 不起作用

> ID：15099014
> 
> 赞同：2
> 
> 时间：2013-02-26T20:51:40.763
> 
> 标签：kendo-ui, kendo-grid

在我的剑道网格中，我有 3 列，平衡、调整和调整平衡。调整平衡是平衡和调整的总和。它将被计算。如果我对调整字段进行更改。调整平衡应自动改变。

我将保存事件绑定到网格。

```
$("#DebtGrid").data("kendoGrid").bind("save", onDebtGridEditComplete); 

function onDebtGridEditComplete(e) {

    debugger;

    var grid = $('#NonrecourseDebtGrid').data().kendoGrid;        
    var dataItem = e.model;
    e.model.set('TaxAdjustments', e.values.TaxAdjustments);

    var newBalance = getAdjBalance(dataItem.TaxBalance, e.values.TaxAdjustments);
    e.model.set('TaxAdjustmentBalance', newBalance);
    //grid.refresh();
} 
```

我调试了以下函数，我看到 newBalance 被计算，并且在我设置了 textadjustmentbalance 之后。我检查了 e.model，没有任何改变。它仍然具有旧的价值。

```
e.model.set('TaxAdjustmentBalance', newBalance); 
```

这是我的网格。

```
@(Html.Kendo().Grid<LiabilityVM>()
  .Name("DebtGrid")
  .HtmlAttributes(new { style = "height: 300px;" })
  .Columns(columns =>
               {
                   columns.Bound(i => i.Id).Visible(false);
                   columns.Bound(i => i.AccountId).Visible(false);

                   columns.Bound(i => i.AccountNumber)
                       .Title("Account #")

                       .HtmlAttributes(new { nowrap = "nowrap" })
                       .Width(70);
                   columns.Bound(i => i.TaxBalance)
                       .Title("Balance")
                       .HtmlAttributes(textAlign)
                       .Width(70);
                   columns.Bound(i => i.TaxAdjustments)
                       .Title("Adjustments")
                       .EditorTemplateName("AmountEditor")
                       .HtmlAttributes(textAlign)
                       .Width(70)
                       .ClientFooterTemplate("<span><b> Total: </b></span>")
                       .FooterHtmlAttributes(textAlign);
                   columns.Bound(i => i.TaxAdjustmentBalance)
                       .Title("Adj. Balance")
                       .ClientTemplate("<span href='\\#' style='white-space:nowrap'>#= TaxAdjustmentBalance #</span>")
                       .HtmlAttributes(textAlign)
                       .Width(70)
                       .ClientFooterTemplate("#= formatAmount(getTotalAdjBalance('NonrecourseDebtGrid'), '{0:c0}') #").FooterHtmlAttributes(textAlign);
                   columns.Bound(i => i.IsSuppressed)
                       .Title("Suppress")
                       .ClientTemplate("#= showCheckBox(IsSuppressed,Source, Id) #")
                            .Width(50)
                            .Sortable(false)
                            .Filterable(false);

               })
      .Editable(editable => editable.Mode(GridEditMode.InCell))

      .DataSource(grid => grid.Ajax()
                              .Batch(true)
                              .Model(model => { 
                                                model.Id(i => i.Id);
                                                model.Field(p => p.AccountNumber).Editable(false);
                                                model.Field(p => p.TaxBalance).Editable(false);
                                                model.Field(p => p.TaxAdjustmentBalance).Editable(false);
                              })
                              .ServerOperation(true)
                              .Create(create => create.Action("Update", "test", parameters))
                              .Read(read => read.Action("Get", "test", parameters))
                              .Update(update => update.Action("Update", "test", parameters))
                              .Aggregates(aggregates =>
                                         {
                                             aggregates.Add(p => p.TaxAdjustmentBalance).Sum();
                                         })
  )
  .Sortable()
  .Filterable()
  .Selectable(s => s.Mode(GridSelectionMode.Single))
  .Resizable(resize => resize.Columns(true))
  .Reorderable(reorder => reorder.Columns(true))
  .ColumnMenu()
  .Scrollable()
  ) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T17:49:04.737

发生这种情况是因为您已将该字段设置为不可编辑。

```
model.Field(p => p.TaxAdjustmentBalance).Editable(false); 
```

您可以尝试使字段可编辑并创建仅显示值的自定义[编辑器，因此用户无法对其进行编辑。](http://demos.kendoui.com/web/grid/editing-custom.html)

# c# - Convert.ToInt32 适用于 if 语句，但不适用于 ? 操作员

> ID：15099017
> 
> 赞同：1
> 
> 时间：2013-02-26T20:51:44.980
> 
> 标签：c#, visual-studio-2010

出于某种原因，Visual Studio 对这一行有问题：

```
MandatoryStakeholder.SupportDocTypeID = (String.IsNullOrEmpty(allIDValues[1]) || (allIDValues[1] == "0")) ?  null : Convert.ToInt32(allIDValues[1]); 
```

具体`Convert.ToInt32(allIDValues[1])`部分。错误是“C#：这些类型不兼容'null'：'int'”

但是，如果我用下面的方法模拟该逻辑，则没有问题：

```
if (string.IsNullOrEmpty(allIDValues[1]) || Convert.ToInt32(allIDValues[1]) == 0)
                stakeHolder.SupportDocTypeId = null;
            else
                stakeHolder.SupportDocTypeId = Convert.ToInt32(allIDValues[1]); 
```

`MandatoryStakeholder.SupportDocTypeID`是 int 类型的？不知道为什么我可以在 if 语句中将字符串转换为 int，但不能使用 ? 操作员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T20:55:45.920

将 更改`? null`为`? (int?) null`。

```
MandatoryStakeholder.SupportDocTypeID = (String.IsNullOrEmpty(allIDValues[1]) || (allIDValues[1] == "0")) ?  (int?)null : Convert.ToInt32(allIDValues[1]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T20:56:04.900

尝试`null`将`int?`

```
MandatoryStakeholder.SupportDocTypeID = 
    (String.IsNullOrEmpty(allIDValues[1]) || (allIDValues[1] == "0")) ?  
       (int?)null : 
       Convert.ToInt32(allIDValues[1]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T20:59:59.237

那是因为在 if 版本中，

```
 stakeHolder.SupportDocTypeId = Convert.ToInt32(allIDValues[1]); 
```

正在默默地转换为

```
 stakeHolder.SupportDocTypeId = new int?(Convert.ToInt32(allIDValues[1])); 
```

要获得三元等效项，您需要将代码更改为：

```
MandatoryStakeholder.SupportDocTypeID = (String.IsNullOrEmpty(allIDValues[1]) || (allIDValues[1] == "0")) ?  null : new int?(Convert.ToInt32(allIDValues[1])); 
```

# mysql - Mysql加入多个表，where子句问题

> ID：15099019
> 
> 赞同：0
> 
> 时间：2013-02-26T20:51:50.217
> 
> 标签：mysql, join, where-clause

关于使用 SQL 查询获取结果，我的数据库有一点问题。我有 5 个表，我想通过特定的连接来获取有关它的所有信息。有我的桌子：

**课程**

*   标识（整数）
*   课程名称（varchar）
*   id_class (int)
*   id_section (int)

**教师**

*   标识（整数）
*   名称（varchar）

**课老师**

*   标识（整数）
*   id_lesson (int)
*   id_teacher (int)

**班级**

*   标识（整数）
*   类（varchar）

**部分**

*   标识（整数）
*   部分（varchar）

事实是我的课可以有不止一位老师，所以我在他们两个之间制作了一个 1-n 关系表。

每节课只有一节课和一节课，所以我不必与新表建立链接。

我想我的做法是好的。当我在我的数据库中选择信息时，一切正常，除非我想使用“WHERE”子句来指定一个或多个参数。

这是我的查询：

```
SELECT teachers.name, lessons.lesson_name, classes.classe, sections.section FROM lesson_teacher
JOIN teachers ON lesson_teacher.id_teacher = teachers.id
JOIN lesson ON lesson_teacher.id_lesson = lessons.id
LEFT OUTER JOIN sections ON lesson.id_section = sections.id
LEFT OUTER JOIN classes ON lesson.id_classe = classes.id 
```

我的所有数据都有 4 列，我的课程显示得很好，一切正常。

为什么，当我使用“WHERE”子句时，我的 return 中没有行？前任：

```
WHERE classes.classe = 'BMMP33' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T20:53:57.110

该`WHERE`子句导致您的`LEFT JOIN`on表现`classes`得像一个`INNER JOIN`可能不是您想要的行为。

尝试将`WHERE`过滤器移动到`JOIN`：

```
SELECT teachers.name, 
  lessons.lesson_name, 
  classes.classe, 
  sections.section 
FROM lesson_teacher
JOIN teachers 
  ON lesson_teacher.id_teacher = teachers.id
JOIN lesson 
  ON lesson_teacher.id_lesson = lessons.id
LEFT OUTER JOIN sections 
  ON lesson.id_section = sections.id
LEFT OUTER JOIN classes 
  ON lesson.id_classe = classes.id 
  AND classes.classe = 'BMMP33' 
```

# python - 如何使用 FOR/LIST/DICTIONARY 理解（不是 SQL）使用 Python 左外连接？

> ID：15099022
> 
> 赞同：6
> 
> 时间：2013-02-26T20:52:00.783
> 
> 标签：python, left-join, list-comprehension, dictionary-comprehension

我有两个元组，详细信息如下：

```
t1 = [
['aa'],
['ff'],
['er']
] 
```

```
t2 = [
['aa', 11,],
['er', 99,]
] 
```

我想使用类似于 SQL 的 LEFT OUTER JOIN 的 python 方法获得如下结果：

```
res = [
['aa', 11,],
['ff',  0,],
['er', 99,]
] 
```

请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T20:58:43.093

```
d2 = dict(t2)
res = [[k[0], d2.get(k[0], 0)] for k in t1] 
```

# ios - 多次使用 NSURLConnection

> ID：15099023
> 
> 赞同：1
> 
> 时间：2013-02-26T20:52:01.217
> 
> 标签：ios, objective-c, nsurlconnection, nsrunloop, nsurlconnectiondelegate

我正在尝试在启动第一个 NSURLConnection 后启动第二个。我的第一个工作完美：适当的代表都被调用，一切都按计划执行。但是，在第一个完成后，我创建了第二个，但什么也没有发生（代表永远不会被调用）。会发生什么？我知道我不能重用相同的 NSURLConnection，但我在再次使用它之前重新初始化它，所以它应该是一个全新的连接。

这是我启动（两个）连接的代码。它是相同的实例变量，但它已重新初始化。另请注意，在第一个完全完成运行之前，第二个不会启动。

```
if (connection) {
    [connection cancel];
}

currentResponse = nil;
error = nil;

connection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:NO];
if (!connection) {
    NSLog(@"Connection could not be initialized.");
    [self connectionFinished];
} else {
    [connection scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [connection start];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:30:14.527

您还没有分享如何“在不同的线程上”运行它，但典型的问题是，如果您使用调度队列或操作队列，您的连接本身是异步运行的，因此调度的操作正在完成并获得释放，您将失去连接。

几个可能的解决方案：

1.  您可以在您的这个后台操作中同步执行您的网络操作（这是您唯一应该执行同步网络操作的时间）。这是最简单的解决方案，尽管您还没有解释您在做什么`NSURLConnection`，所以这种技术可能适合您，也可能不适合您。但如果你只是想从 URL 下载一些东西，你可以这样做：

    ```
    NSData *data = [NSData dataWithContentsOfURL:url
                                         options:0
                                           error:&error]; 
    ```

    [`NSURLConnectionDataDelegate`](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSURLConnectionDataDelegate_protocol/Reference/Reference.html)如果您正在做任何需要方法的更复杂的操作，例如质询-响应身份验证，或者如果您正在使用流式传输以减少应用程序的内存占用或出于性能原因等，则此方法不起作用`didReceiveData`。但如果您是只是尝试从远程服务器下载数据（例如检索图像、XML/JSON 提要等），这是最简单的。

2.  以类似的方式（即您不需要这些`NSURLConnectionDataDelegate`方法），但是您正在`NSURLRequest`为您的连接创建一些丰富的内容，那么您可以使用[`sendAsynchronousRequest`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/doc/uid/20001697-SW10)或[`sendSynchronousRequest`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/doc/uid/20001697-BAJHAHGI)。

3.  如果您需要`NSURLConnectionDataDelegate`调用，您可以使用[`setDelegateQueue`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/doc/uid/20001697-SW3)（指定 a `NSOperationQueue`）或[`scheduleInRunLoop`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/doc/uid/20001697-SW2)（指定 a `NSRunLoop`），它会自动将连接更新分派到适当的队列/运行循环。只需确保`initWithRequest`使用`startImmediately`选项`NO`，设置委托队列或运行循环，然后`start`设置连接。`NSURLConnectionDataDelegate`使用这种技术，如果您绝对需要它，您可以保留完整的丰富性。

4.  或者，如果您不使用操作队列，您也可以让后台操作保持活动状态，直到连接完成。这种方法在后台操作中为您提供同步行为（保持连接活动），同时保留`NSURLConnectionDataDelegate`方法。[Apple 的 XMLPerformance Sample](http://developer.apple.com/library/ios/#samplecode/XMLPerformance/Introduction/Intro.html)演示了这种技术（请参阅`downloadAndParse`CocoaXMLParser.m 和 LibXMLParser.m 的方法），它们在其中启动`NSURLConnection`并使用以下构造来保持后台操作处于活动状态，直到`NSURLConnectionDataDelegate`方法最终设置`done`实例变量：

    ```
    do {
        [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode 
                                 beforeDate:[NSDate distantFuture]];
    } while (!done); 
    ```

我承认我发现这种最终方法有点不满意，并且会倾向于其他替代方案，这取决于您需要从`NSURLConnection`. 为了让我们提供更有意义的建议，您只需要提供有关 (a) 您在`NSURLConnectionDataDelegate`方法中所做的工作类型的更多信息；(b) 您使用哪种技术在后台运行代码。

对于更多选项，也可以随意查看[GCD 和 async NSURLConnection](https://stackoverflow.com/questions/8918501/gcd-and-async-nsurlconnection)。

# java - JComboBox 无法在 JTable TableHeader 中展开

> ID：15099029
> 
> 赞同：5
> 
> 时间：2013-02-26T20:52:27.033
> 
> 标签：java, swing, jtable, jcombobox, jtableheader

我已经阅读了大多数 JTable/JComboBox 对此类其他问题的回复，但还没有找到解决我的问题的方法。

我创建了一个包含 JComboBox TableHeader 元素的表。任何 JComboBox 元素都不会打开以显示项目列表。如何获取要显示的各个 JComboBox 元素的项目列表？

请注意，这个问题的一个显着元素是 JComboBox 在 TableHeader 中，而不是嵌入在 JTable 单元格中。

任何帮助表示赞赏。

SSCE

```
import java.awt.Component;
import java.awt.Dimension;
import java.util.Enumeration;

import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.ListSelectionModel;
import javax.swing.SwingUtilities;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableColumn;

public class ComboHeaderTest extends JScrollPane {

private static final Dimension DEFAULT_SIZE = new Dimension(200, 200);

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {

        @Override
        public void run() {
            new ComboHeaderTest().initComponents();
        }
    });
}

private ComboHeaderTest() {

    final String[][] data = { {"Header 1", "Header 2", "Header 3"},
                                {"A", "B", "C"},
                                {"D", "E", "F"},
                                {"G", "H", "I"}};

    setViewportView(getTable(data));
    setPreferredSize(DEFAULT_SIZE);
}

private void initComponents() {

    JFrame frame = new JFrame("ComboHeaderTest");
    frame.add(this);
    frame.pack();
    frame.setVisible(true);
}

private JTable getTable(final String[][] data) {
    final String[] items = data[0];

    final ComboHeaderRenderer[] columnHeaders = new ComboHeaderRenderer[items.length];
    for(int i = 0; items.length > i; ++i) {
        columnHeaders[i] = new ComboHeaderRenderer(items);
    }

    final JTable table = new JTable(data, columnHeaders);

    final Enumeration<TableColumn> tableEnum = table.getColumnModel().getColumns();
    for (int columnIndex = 0; tableEnum.hasMoreElements(); ++columnIndex) {
        final TableColumn column = tableEnum.nextElement();

        final ComboHeaderRenderer combo = columnHeaders[columnIndex];
        column.setHeaderValue(combo.getItemAt(columnIndex));
        column.setHeaderRenderer(combo);
    }

    table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
    table.setRowSelectionAllowed(true);
    table.setColumnSelectionAllowed(false);
    table.setCellSelectionEnabled(false);
    table.setFillsViewportHeight(true);

    table.setSize(DEFAULT_SIZE);
    table.validate();

    return table;
}

private static class ComboHeaderRenderer extends JComboBox implements TableCellRenderer{
    public ComboHeaderRenderer(final String[] entries) {
        for (int i = 0; entries.length > i; ++i) {
            addItem(entries[i]);
        }
    }

    @Override
    public Component getTableCellRendererComponent(final JTable table, final Object value,
            final boolean isSelected, final boolean hasFocus, final int row, final int column) {
        setSelectedItem(value);
        return this;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T22:21:01.010

这实际上完全按预期工作。我认为线索是`TableCellRenderer`。

渲染器通常是非交互式组件。它们通常只是绘制在表面上的组件的“快照”，用户通常无法与它们交互。

这是预期的行为。

为了给表头提供可编辑的功能，你需要提供你的实现`JTableHeader`

看看这个[例子](http://www.java2s.com/Code/Java/Swing-Components/EditableHeaderTableExample.htm)以获得一些想法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T14:38:09.133

[这](http://www.java2s.com/Code/Java/Swing-Components/EditableHeaderTableExample2.htm)是一个在 JTable TableHeader 中使用 JComboBox 的示例。

对于其他类型的组件更容易，看看[这里](https://stackoverflow.com/a/29963916/1201614)。

![在此处输入图像描述](../Images/88e85b446f31d18403a22fc932d68b06.png)

# command-line - 如何使用 vbc 命令行编译器（无 IDE）引用 shdocvw 之类的 COM lib？

> ID：15099031
> 
> 赞同：3
> 
> 时间：2013-02-26T20:52:29.150
> 
> 标签：command-line, compiler-construction, com, reference, vbc

这个问题的基础来自support.microsoft.com上的本教程：http: [//support.microsoft.com/kb/176792](http://support.microsoft.com/kb/176792)

```
To run the following code, it is necessary to add a reference to
"Microsoft Internet Controls" (Shdocvw.dll) and "Microsoft HTML Object
Library" (Mshtml.dll) to the Visual Basic project:
Dim SWs As New SHDocVw.ShellWindows 
Dim IE As SHDocVw.InternetExplorer 
```

这在 Visual Studio 2010 中运行良好，但它似乎依赖于一些我无法使用直接命令行 vbc 编译器复制的幕后魔法。

显然，命令行编译器没有“添加引用”对话框。我天真地尝试添加：

**/参考：“C:\windows\system32\shdocvw.dll”**

到命令行，但这没有帮助。在这两种情况下，我得到：

**错误 BC30002：未定义类型“SHDocVw.ShellWindows”。**

**错误 BC30002：未定义类型“SHDocVw.InternetExplorer”。**

我已经成功地使用了来自 vbscript 和 autohotkey 等其他语言的 shdocvw.dll，AKA Shell.Application，但我目前对 VB.NET 的了解太少，无法知道我是做错了还是不可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:50:54.313

您必须首先运行 Tlbimp.exe 实用程序。这是从嵌入在 shdocvw.dll 中的类型库生成互操作库的工具，通常在您在 IDE 中添加引用时自动完成。它生成 interop.shdocvw.dll，您需要使用 /reference 选项传递该文件。

# c# - 在不阻塞 UI 线程的情况下异步使用 HttpWebRequest

> ID：15099038
> 
> 赞同：3
> 
> 时间：2013-02-26T20:52:56.510
> 
> 标签：c#, winforms, asynchronous, httpwebrequest, httpwebresponse

我正在尝试在 WinForms 应用程序中异步使用`HttpWebRequest`而不`HttpWebResonse`阻塞我的 UI 线程。

我看到了这个[类似的 SO Question](https://stackoverflow.com/questions/202481/how-to-use-httpwebrequest-net-asynchronously)解释了如何去做。但是，我不能 100% 确定接受的答案是正确的方法。接受的答案是使用`BeginGetResponse`.

根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetresponse(v=vs.90).aspx)：

> BeginGetResponse 方法需要在此方法变为异步之前完成一些同步设置任务（例如 DNS 解析、代理检测和 TCP 套接字连接）。因此，永远不应在用户界面 (UI) 线程上调用此方法，因为它可能需要一些时间，通常是几秒钟。

有人可以为我提供正确的方法来做到这一点。这是我试图在不阻塞 UI 线程的情况下“正确”工作的 C# 函数：

```
 private IDictionary<string, object> CreateWebRequest(string endPoint, string method, string data, bool addAuthHeader)
    {
        var req = (HttpWebRequest)WebRequest.Create(endPoint);
        req.Method = method;
        if (addAuthHeader)
        {
            req.Headers.Add(HttpRequestHeader.Authorization, "Bearer " + _accessToken.AccessToken);
        }

        if (!string.IsNullOrEmpty(data))
        {
            var utfenc = new UTF8Encoding();
            byte[] buffer = utfenc.GetBytes(data);
            req.ContentLength = buffer.Length;
            req.ContentType = "application/x-www-form-urlencoded";

            using (Stream strm = req.GetRequestStream())
            {
                strm.Write(buffer, 0, buffer.Length);
                strm.Close();
            }
        }

        HttpWebResponse response = null;
        try
        {
            response = (HttpWebResponse)req.GetResponse();
        }
        catch (WebException e)
        {
            if (_accessToken == null)
            {
                throw;
            }
            var responseError = (HttpWebResponse)e.Response;
            if (responseError.StatusCode == HttpStatusCode.Unauthorized)
            {
                var stackTrace = new StackTrace();
                var q = stackTrace.GetFrame(1).GetMethod().Name;
                RefreshAccessCode();

                req = (HttpWebRequest)WebRequest.Create(endPoint);
                req.Method = method;
                if (addAuthHeader)
                {
                    req.Headers.Add(HttpRequestHeader.Authorization, "Bearer " + _accessToken.AccessToken);
                }
                response = (HttpWebResponse)req.GetResponse();
            }
        }

        string jsonResponse = null;

        if (response != null)
            using (Stream stream = response.GetResponseStream())
            {
                if (stream != null)
                {
                    using (var reader = new StreamReader(stream))
                    {
                        jsonResponse = reader.ReadToEnd();
                    }
                }
            }

        return DeserializeResponse(jsonResponse);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:25:27.360

如果你对 WebRequest 以外的东西持开放态度，我是[System.Net.WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)的粉丝。它使用 System.Threading.Tasks 而不是 BeginGetResponse() 和 EndGetResonse()。

```
public async Task<Dictionary<string, object>> CreateWebRequest(string endPoint, string method, string data, bool addAuthHeader)
{
    WebClient client = new WebClient();

    if (addAuthHeader)
    {
        client.Headers.Add(HttpRequestHeader.Authorization, "Bearer " + _accessToken.AccessToken);
    }

    byte[] buffer = null;

    if (!string.IsNullOrEmpty(data))
    {
        var utfenc = new UTF8Encoding();
        buffer = utfenc.GetBytes(data);
    }
    else
    {
        buffer = new byte[0];
    }

    return await client.UploadDataTaskAsync(endPoint, method, buffer)
        .ContinueWith((bytes) =>
            {
                string jsonResponse = null;

                using (var reader = new StreamReader(new MemoryStream(bytes)))
                {
                    jsonResponse = reader.ReadToEnd();
                }

                return DeserializeResponse(jsonResponse);
            });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:11:15.877

要使用您现有的代码，只需添加一个旨在在 UI 线程上执行的方法，并在单独的线程上创建您的 Web 请求。Web 请求完成后，您将调用 UI 线程上的 final 方法。所以，一个简单的版本是：

```
//do some stuff that wont block the ui thread here
ThreadPool.QueueUserWorkItem((o) => 
{
    IDictionary<string, object> result = 
        CreateWebRequest("lalala", "lol", "butts", true);
    BeginInvoke(OnAsyncWebRequestComplete, result);
}, null);

private void OnAsyncWebRequestComplete(IDictionary<string, object> result)
{
    //do some stuff on the UI thread here
} 
```

# android - ListView、BaseAdapter、getViewTypeCount() - 如何强制适配器再次检查 getViewTypeCount()？

> ID：15099041
> 
> 赞同：6
> 
> 时间：2013-02-26T20:52:58.247
> 
> 标签：android, listview, android-listview, adapter, baseadapter

我用我自己`BaseAdapter (standingsListAdapter)`的`ListView (standingsLV)`。当我设置适配器时：

```
standingsLV.setAdapter(standingsListAdapter); 
```

`getViewTypeCount()`叫做。但后来，当我在适配器中设置新数据时：

```
standingsListAdapter.setData(data); 
```

在`setData(data)`设置新数据调用后`notifyDataSetChanged()`：

```
public void setData(StandingsModelWrapper data) {
    groupsData.clear();
    if (data != null) {
        groupsData.addAll(data.getModel());
    }
    notifyDataSetChanged();
} 
```

**不再调用getViewTypeCount()**方法。为什么？ **如何强制适配器再次检查 getViewTypeCount()？**

* * *

为什么我需要这个？

*   我在列表的每一行中显示表格。表格有不同的长度（行数）。
*   我想在适配器中设置新数据，以便表的长度可以改变

这就是为什么每次新数据到达列表适配器时都应该重新计算我的视图类型的数量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T21:36:51.623

我不认为这是可能的。

Get `getViewTypeCount()` implementation is part of the **definition** of your adapter; it defines, regardless of what the actual data of the adapter is at any given moment, all the possible **types** of data it can hold.

`getViewTypeCount` is called by the framework to properly recycle list-item views that could be very different between different types of the data held by the adapter. When you change data in the adapter, views are still recycled according to the existing definition/implementation of the `getViewTypeCount`.

If you want a `getViewTypeCount` to be called again, create a brand new adapter and set this new one as your listview's adapter.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:05:36.770

我会尝试：

```
standingsListAdapter.notifyDataSetChanged(); 
```

# python - Pywebsocket 错误

> ID：15099048
> 
> 赞同：1
> 
> 时间：2013-02-26T20:53:23.433
> 
> 标签：python, mod-pywebsocket

我是 python 和 websockets 的新手，想了解更多关于如何使用 pywebsocket 的信息。

目前，我正在编辑 pywebsocket 包中的示例，不幸的是，我无法理解以下代码中的错误：

```
_GOODBYE_MESSAGE = u'Goodbye'

def web_socket_do_extra_handshake(request):
    request.ws_stream.send_message("Welcome", binary=False) # Error line
    pass  # Always accept.

def web_socket_transfer_data(request):
    while True:
        line = request.ws_stream.receive_message()
        if line is None:
            return
        if isinstance(line, unicode):
            request.ws_stream.send_message("Sending", binary=False)
            request.ws_stream.send_message(line, binary=False)
            if line == _GOODBYE_MESSAGE:
                return
        else:
            request.ws_stream.send_message(line, binary=True) 
```

我想在连接初始化时向客户端发送“欢迎”消息。但是当我从 Handshake 发送任何消息时，我的 websocket 用**代码 1006关闭了**

**为什么呢？**

我认为问题可能是，握手期间无法发送任何数据，所以我尝试了这种方式：

```
_GOODBYE_MESSAGE = u'Goodbye'
welcome = True

def web_socket_do_extra_handshake(request):
    pass  # Always accept.

def web_socket_transfer_data(request):
    while True:
        if welcome:
            welcome = False
            request.ws_stream.send_message("Welcome !", binary=False)

        line = request.ws_stream.receive_message()
        if line is None:
            return
        if isinstance(line, unicode):
            request.ws_stream.send_message("Sending", binary=False)
            request.ws_stream.send_message(line, binary=False)
            if line == _GOODBYE_MESSAGE:
                return
        else:
            request.ws_stream.send_message(line, binary=True) 
```

我在第一种或第二种情况下都没有成功，你能解释**一下我做错了**什么吗？谢谢

PS：我将 mod_pywebsocket 作为 Apache 的模块运行（不是独立的），我的 python 版本是 2.6.6；我试图运行我的两个脚本`$python script_wsh.py`来检查语法错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:11:55.543

我在示例中发现了这个错误：

**第一个代码**

握手期间无法向客户端发送任何消息

> web_socket_do_extra_handshake 在成功解析标头并将 WebSocket 属性（ws_location、ws_origin 和 ws_resource）添加到请求后，在握手期间调用。处理程序可以通过引发异常来拒绝请求。

**第二个代码**

可能，我的代码中有不好的缩进

* * *

调试 websocket 处理程序的最简单方法是在调试模式下运行 websocket：

```
# Run standalone server with "--log-level debug"
./standalone.py -p 12345 --allow-draft75 -d example --log-level debug

# For apache module version, add LogLevel directive to httpd.conf
LogLevel debug 
```

我正在将 websockets 作为 apache 模块运行，我现在可以在 apache 的错误日志中看到解析（和其他）错误

# c - 从缓冲区中删除字节的快速方法

> ID：15099049
> 
> 赞同：1
> 
> 时间：2013-02-26T20:53:29.653
> 
> 标签：c, optimization

有没有更快的方法来做到这一点：

```
 Vector3* points = malloc(maxBufferCount*sizeof(Vector3));
    //put content into the buffer and increment bufferCount        
    ...

    // remove one point at index `removeIndex`
    bufferCount--;
    for (int j=removeIndex; j<bufferCount; j++) {
        points[j] = points[j+1];
    } 
```

我问是因为我有一个巨大的缓冲区，我经常从中删除元素。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T20:56:49.670

不，抱歉 - 从数组中间删除元素需要`O(n)`时间。如果您真的想经常修改元素（即删除某些项目和/或添加其他项目），请改用链表 - 它具有恒定时间的删除和添加。相比之下，数组具有恒定的查找时间，而链表可以在线性时间内访问（读取）。因此，决定您将更频繁地做什么（阅读或写作）并根据该决定选择适当的数据结构。

但是请注意，我（好心地）假设您并没有试图犯下过早优化的罪行。如果您还没有基准测试这是**瓶颈**，那么可能就不用担心它了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T21:01:10.353

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T21:20:51.783

有几件事要说。memmove 函数可能会比您复制得更快，通常它由您的特定编译器的编写者优化以使用在没有内联汇编程序的 C 语言中不可用的特殊指令。我相信这些指令被称为 SIMD 指令（单指令多数据）？如果我错了，有人纠正我。

如果您可以保存要删除的项目，那么您可以通过对要删除的项目列表进行排序来优化，然后执行一次。这并不难，但只需要一些有趣的算术。

您也可以将每个项目存储在一个链表中，删除一个项目是微不足道的，但您会失去对数组的随机访问。

最后，您可以拥有一个额外的指针数组，与数组大小相同，每个指针指向一个元素。然后你可以通过双重间接访问数组，你可以通过交换指针对数组进行排序，你可以通过使它们的指针为空来删除项目。

希望这能给你一些想法。通常有一种方法可以优化事物，但随后它变得更加特定于应用程序。

# c++ - 为什么 C++ 中的数组在 C++11 之前没有成员函数 size()？

> ID：15099053
> 
> 赞同：0
> 
> 时间：2013-02-26T20:53:58.913
> 
> 标签：c++, arrays, methods, c++11

为什么 C++ 中的数组在 C++11 (std::array) 之前没有成员函数 size() ？这背后的原因是什么？诸如“如何获取数组的大小？”之类的问题 相当频繁。

**版本** 由于普通数组是从 C 继承而来的，它没有这样的功能的原因是什么？因为我们可以检查数组中的数据类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T20:56:34.703

因为它们来自 C，而 C 没有成员函数（数组甚至不是类类型）。

与 C 的兼容性至关重要，因为允许现有的 C 代码库编译为 C++ 大大提高了该语言的采用率。当您需要设计新的语言功能时，在考虑兼容性的同时处理一些有用的东西在优先级列表中很低。

在 C++11 中，语言达到了所有这些美好的小东西都应运而生的地步。那么为什么不现在添加*呢*？因为 C 数组仍然可以正常工作，要改变它需要大量的工作。引入一个新容器（而且是一个非常简单的容器）要容易得多，而这正是发生的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T20:59:21.907

C++ 中的数组（不是 std::array）与 C 中的数组没有什么不同。它们只是分配用于在内存中保存一些数据（相同类型）的连续内存区域。

类型可以是原始数据类型，如 int、float、char 等，也可以是复杂数据类型，如结构或类。不管访问数组的元素是否都只是转换为：

```
base address + (sizeof(datatype) * index) 
```

相比之下，std::array 是一个重载 [] 运算符以进行数组访问的类，并且具有检索大小的特殊方法。它与 std::vector 非常相似。在内部，这些类可能使用数组来访问元素，但通过重载 [] 运算符巧妙地隐藏了这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T20:57:21.360

`std::array`是一个模板类，与其他容器类一样。普通数组在 C++11 中仍然没有成员。

> 由于普通数组是从 C 继承的，它没有这样的功能的原因是什么？

您*可以*使用运算符找出普通数组中的元素数量`sizeof`：

```
int a[10];
std::cout << sizeof(a) / sizeof(*a); 
```

这将打印“10”。您可能会将数组与指针混淆。这里：

```
int* a = new int[10]; 
```

`a`不是*数组*。这是一个指针。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-26T20:57:36.530

原始数组不是对象，因此没有成员函数。这`std::array`是一个包装数组的类，因此可以具有成员函数和逻辑来获取数组的长度。

如果您声明一个数组，如：

```
int * myArray = new int[5]; 
```

它将没有任何方法来获得它的长度。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-26T21:28:42.923

C 数组确实有一个已知的和可检索的大小——由`sizeof`操作员访问。您似乎混淆了数组和指针。我们不再知道指针指向的内存块有多大，如果我告诉你我住在唐宁街 10 号，你可以告诉我街上有多少房子。

C 数组实际上只是指针的一种特殊情况。它们直接分配在堆栈上，虽然它们声明的原始数组变量是可见的，但编译器能够告诉我们数组的大小。但是，数组经常分解为指针。这可能是因为它被传递给另一个方法或存储在另一个变量中。发生这种情况时，因为编译器不能再 100% 确定指针指向一个数组（即在所有情况下），我们就无法知道指针所引用的数组的大小。

# algorithm - CUDA dijkstra 算法

> ID：15099054
> 
> 赞同：4
> 
> 时间：2013-02-26T20:54:12.377
> 
> 标签：algorithm, cuda, dijkstra

是否有人为给定的稀疏矩阵 (cuSPARSE) 图实现了 Dijkstra 算法的 CUDA 并行化版本，并且对于源节点和目标节点，找到最小 K 路径？

我真的需要它来解决我将要构建的一般图表。

文森特

# database - 部分堆排序以在 5GB 文件中查找 k 个最频繁的单词

> ID：15099055
> 
> 赞同：3
> 
> 时间：2013-02-26T20:54:16.753
> 
> 标签：database, algorithm, data-structures, hash, large-files

我知道我想使用什么算法，但想知道我必须改变什么，因为文件太大了。

我想使用散列来存储单词的频率，并使用最小堆来存储最常见的单词，并在我遍历单词时相应地调整最小堆。我认为这应该需要 O(nlogk)。如果我有太多数据要存储在内存中，我的算法需要如何更改。这是一个我一般难以理解的问题，不仅针对这个特定问题，而且我只是提供上下文，以便它可能有助于解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T21:02:40.440

我认为如果没有将整个文件放在内存中（或进行某种昂贵的合并排序），就没有确定的方法可以做到这一点。

但是有一些很好的概率算法。看看[Count-Min Sketch](http://en.wikipedia.org/wiki/Count-Min_sketch)。

[在这个库](https://github.com/clearspring/stream-lib)中有一个很好的实现这个和其他算法。

解释合并排序的事情：如果您的文件已经排序，您可以使用最小堆轻松找到最频繁的 k。是的，当您发现一个更具竞争力的术语时，能够丢弃不太频繁的术语的最小堆。您可以这样做，因为您无需阅读整个文件即可知道当前单词的频率。如果您的文件未排序，则必须保留整个列表，因为最常用的术语可能会出现在文件中的任何位置，并且过早地被视为“非竞争性”而被丢弃。

您可以很容易地在有限内存的情况下进行合并排序，但这是一个 I/O 密集型操作，可能需要一段时间。实际上，您可以使用任何类型的[External Sort](http://en.wikipedia.org/wiki/External_sorting)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T21:36:56.033

在您需要计算频率的评论之后添加。

你没有说你期望在数据中有多少个单词，或者什么构成一个单词。如果是英文文本，我会惊讶地看到 50 万字。在 5 GB 的文本中肯定不会有 10 亿个单词。但是无论有多少单词，技术并没有真正改变。

您首先构建一个包含键值对的字典或哈希映射：单词、计数。当你阅读每个单词时，在字典中查找它。如果它在那里，增加它的数量。如果不存在，则将其添加为 1。

如果你有很多记忆或相对较少的单词，它都会适合记忆。如果是这样，您可以执行我在下面描述的堆操作。

如果您的内存已满，那么您只需将键值对写入文本文件，每行一个单词，如下所示：

```
word1, count
word2, count 
```

然后清理你的字典并继续，添加单词或增加它们的计数。根据需要对每个单词块重复，直到您到达输入的末尾。

现在您有一个包含单词/计数对的巨大文本文件。按单词排序。有许多外部排序工具可以做到这一点。想到的两个是 Windows SORT 实用程序和 GNU 排序。两者都可以轻松地对非常大的短行文件进行排序。

文件按单词排序后，您将拥有：

```
word1, count
word1, count
word2, count
word3, count
word3, count
word3, count 
```

现在只需按顺序浏览文件，累积单词计数就很简单了。在每个单词中断处，按如下所述检查其对堆的计数。

整个过程需要一些时间，但效果很好。您可以通过对单词块进行排序并将它们写入单个文件来加快速度。然后，当您到达输入的末尾时，您对几个块进行 N 路合并。这更快，但迫使你编写一个合并程序，除非你能找到一个。如果我这样做一次，我会选择简单的解决方案。如果我经常这样做，我会花时间编写自定义合并程序。

在你计算出频率之后......

假设您的文件包含单词及其频率，并且您要做的就是获取`k`频率最高的单词，那么是的，它是 O(n log k)，并且您不必将所有项目存储在内存中。您的堆只需要 k 个项目。

想法：

```
heap = new minheap();
for each item
    // if you don't already have k items on the heap, add this one
    if (heap.count < k)
        heap.Add(item)
    else if (item.frequency > heap.Peek().frequency)
    {
        // The new item's frequency is greater than the lowest frequency
        // already on the heap. Remove the item from the heap
        // and add the new item.
        heap.RemoveRoot();
        heap.Add(item);
    } 
```

处理完每个项目后，堆中将包含`k`频率最高的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:37:39.873

您可以使用选择算法 ( [http://en.wikipedia.org/wiki/Selection_algorithm](http://en.wikipedia.org/wiki/Selection_algorithm) ) 来计算第 k 个最大数。然后进行线性扫描，只选择 k 个大数。

在实践中，您可能希望从 kth min false 的估计范围开始，然后从那里继续。例如。读取前 M 个数字并计算 M 个数字中的估计 kth max = (k*M/N)th max。如果您认为数据有偏差（即部分排序），那么随机选择那些 M 个数字。

# php - Doctrine2 - “类”不是有效的实体或映射的超类

> ID：15099060
> 
> 赞同：35
> 
> 时间：2013-02-26T20:54:32.037
> 
> 标签：php, doctrine-orm

`Uncaught exception 'Doctrine\ORM\Mapping\MappingException' with message 'Class "Users" is not a valid entity or mapped super class`每次运行下一个代码时都会出现异常：

**测试.php**

```
<?php
require_once "vendor/autoload.php";

use Doctrine\ORM\Tools\Setup;
use Doctrine\ORM\EntityManager;

$paths = array(dirname(__FILE__)."/entities");
$isDevMode = false;

// the connection configuration
$dbParams = array(
    'driver'   => 'pdo_mysql',
    'user'     => 'root',
    'password' => 'pass',
    'dbname'   => 'snabcentr',
);

$config = Setup::createAnnotationMetadataConfiguration($paths, $isDevMode);
$em = EntityManager::create($dbParams, $config);

$user = $em->find("Users", 5); 
```

**实体/Users.php**

```
<?php
use Doctrine\ORM\Mapping as ORM;

/**
 * Users
 *
 * @ORM\Table(name="users")
 * @ORM\Entity
 */
class Users
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @var string
     *
     * @ORM\Column(name="email", type="string", length=255, nullable=true)
     */
    private $email;

    /**
     * @var string
     *
     * @ORM\Column(name="password", type="string", length=255, nullable=true)
     */
    private $password;

    /**
     * @var string
     *
     * @ORM\Column(name="type", type="string", nullable=true)
     */
    private $type;

    /**
     * @var string
     *
     * @ORM\Column(name="client_inn", type="string", length=255, nullable=true)
     */
    private $clientInn;

    /**
     * @var string
     *
     * @ORM\Column(name="client_ogrn", type="string", length=255, nullable=true)
     */
    private $clientOgrn;

    /**
     * @var string
     *
     * @ORM\Column(name="client_rs", type="string", length=255, nullable=true)
     */
    private $clientRs;

    /**
     * @var string
     *
     * @ORM\Column(name="client_ks", type="string", length=255, nullable=true)
     */
    private $clientKs;

    /**
     * @var string
     *
     * @ORM\Column(name="client_bik", type="string", length=255, nullable=true)
     */
    private $clientBik;

    /**
     * @var string
     *
     * @ORM\Column(name="client_uaddress", type="string", length=255, nullable=true)
     */
    private $clientUaddress;

    /**
     * @var string
     *
     * @ORM\Column(name="client_faddress", type="string", length=255, nullable=true)
     */
    private $clientFaddress;

    /**
     * @var string
     *
     * @ORM\Column(name="client_daddress", type="string", length=255, nullable=true)
     */
    private $clientDaddress;

    /**
     * @var string
     *
     * @ORM\Column(name="name", type="string", length=255, nullable=true)
     */
    private $name;

    /**
     * @var string
     *
     * @ORM\Column(name="notes", type="text", nullable=true)
     */
    private $notes;

    /**
     * @var \DateTime
     *
     * @ORM\Column(name="added_date", type="datetime", nullable=true)
     */
    private $addedDate;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set email
     *
     * @param string $email
     * @return Users
     */
    public function setEmail($email)
    {
        $this->email = $email;

        return $this;
    }

    /**
     * Get email
     *
     * @return string 
     */
    public function getEmail()
    {
        return $this->email;
    }

    /**
     * Set password
     *
     * @param string $password
     * @return SnabUsers
     */
    public function setPassword($password)
    {
        $this->password = $password;

        return $this;
    }

    /**
     * Get password
     *
     * @return string 
     */
    public function getPassword()
    {
        return $this->password;
    }

    /**
     * Set type
     *
     * @param string $type
     * @return SnabUsers
     */
    public function setType($type)
    {
        $this->type = $type;

        return $this;
    }

    /**
     * Get type
     *
     * @return string 
     */
    public function getType()
    {
        return $this->type;
    }

    /**
     * Set clientInn
     *
     * @param string $clientInn
     * @return SnabUsers
     */
    public function setClientInn($clientInn)
    {
        $this->clientInn = $clientInn;

        return $this;
    }

    /**
     * Get clientInn
     *
     * @return string 
     */
    public function getClientInn()
    {
        return $this->clientInn;
    }

    /**
     * Set clientOgrn
     *
     * @param string $clientOgrn
     * @return SnabUsers
     */
    public function setClientOgrn($clientOgrn)
    {
        $this->clientOgrn = $clientOgrn;

        return $this;
    }

    /**
     * Get clientOgrn
     *
     * @return string 
     */
    public function getClientOgrn()
    {
        return $this->clientOgrn;
    }

    /**
     * Set clientRs
     *
     * @param string $clientRs
     * @return SnabUsers
     */
    public function setClientRs($clientRs)
    {
        $this->clientRs = $clientRs;

        return $this;
    }

    /**
     * Get clientRs
     *
     * @return string 
     */
    public function getClientRs()
    {
        return $this->clientRs;
    }

    /**
     * Set clientKs
     *
     * @param string $clientKs
     * @return SnabUsers
     */
    public function setClientKs($clientKs)
    {
        $this->clientKs = $clientKs;

        return $this;
    }

    /**
     * Get clientKs
     *
     * @return string 
     */
    public function getClientKs()
    {
        return $this->clientKs;
    }

    /**
     * Set clientBik
     *
     * @param string $clientBik
     * @return SnabUsers
     */
    public function setClientBik($clientBik)
    {
        $this->clientBik = $clientBik;

        return $this;
    }

    /**
     * Get clientBik
     *
     * @return string 
     */
    public function getClientBik()
    {
        return $this->clientBik;
    }

    /**
     * Set clientUaddress
     *
     * @param string $clientUaddress
     * @return SnabUsers
     */
    public function setClientUaddress($clientUaddress)
    {
        $this->clientUaddress = $clientUaddress;

        return $this;
    }

    /**
     * Get clientUaddress
     *
     * @return string 
     */
    public function getClientUaddress()
    {
        return $this->clientUaddress;
    }

    /**
     * Set clientFaddress
     *
     * @param string $clientFaddress
     * @return SnabUsers
     */
    public function setClientFaddress($clientFaddress)
    {
        $this->clientFaddress = $clientFaddress;

        return $this;
    }

    /**
     * Get clientFaddress
     *
     * @return string 
     */
    public function getClientFaddress()
    {
        return $this->clientFaddress;
    }

    /**
     * Set clientDaddress
     *
     * @param string $clientDaddress
     * @return SnabUsers
     */
    public function setClientDaddress($clientDaddress)
    {
        $this->clientDaddress = $clientDaddress;

        return $this;
    }

    /**
     * Get clientDaddress
     *
     * @return string 
     */
    public function getClientDaddress()
    {
        return $this->clientDaddress;
    }

    /**
     * Set name
     *
     * @param string $name
     * @return SnabUsers
     */
    public function setName($name)
    {
        $this->name = $name;

        return $this;
    }

    /**
     * Get name
     *
     * @return string 
     */
    public function getName()
    {
        return $this->name;
    }

    /**
     * Set notes
     *
     * @param string $notes
     * @return SnabUsers
     */
    public function setNotes($notes)
    {
        $this->notes = $notes;

        return $this;
    }

    /**
     * Get notes
     *
     * @return string 
     */
    public function getNotes()
    {
        return $this->notes;
    }

    /**
     * Set addedDate
     *
     * @param \DateTime $addedDate
     * @return SnabUsers
     */
    public function setAddedDate($addedDate)
    {
        $this->addedDate = $addedDate;

        return $this;
    }

    /**
     * Get addedDate
     *
     * @return \DateTime 
     */
    public function getAddedDate()
    {
        return $this->addedDate;
    }
} 
```

你有什么想法为什么？eAccelerator 未设置。Doctrine v 2.2，PHP v 5.3.22，zend 引擎 2.3.0

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-02-27T09:34:18.513

您正在使用 a`Doctrine\Common\Annotations\SimpleAnnotationReader`而不是 a `Doctrine\Common\Annotations\AnnotationReader`。

使用`SimpleAnnotationReader`默认命名空间并以格式读取注释`@Entity`，而`AnnotationReader`可以使用导入的类和命名空间（通过[`use`语句](http://php.net/manual/en/language.namespaces.php)）和注释，例如`@ORM\Entity`.

您可以在[文档](http://docs.doctrine-project.org/projects/doctrine-common/en/latest/reference/annotations.html)中阅读更多相关信息。

这是您的固定版本`test.php`

```
<?php

use Doctrine\ORM\Tools\Setup;
use Doctrine\ORM\EntityManager;
use Doctrine\ORM\Mapping\Driver\AnnotationDriver;
use Doctrine\Common\Annotations\AnnotationReader;
use Doctrine\Common\Annotations\AnnotationRegistry;

require_once __DIR__ . '/vendor/autoload.php';
require_once __DIR__ . '/entities/Users.php';

$paths            = array(__DIR__ . '/entities');
$isDevMode        = false;
$connectionParams = array(
    'driver'   => 'pdo_mysql',
    'user'     => 'root',
    'password' => 'pass',
    'dbname'   => 'dbname',
);

$config = Setup::createConfiguration($isDevMode);
$driver = new AnnotationDriver(new AnnotationReader(), $paths);

// registering noop annotation autoloader - allow all annotations by default
AnnotationRegistry::registerLoader('class_exists');
$config->setMetadataDriverImpl($driver);

$em = EntityManager::create($connectionParams, $config);

$user = $em->find('Users', 5); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-10-23T17:29:33.407

就我而言，我只是忘记添加`@ORM\Entity`，如下所示：

```
/**
 * Project\BackendBundle\Entity\Pedido
 *
 * @ORM\Table
 * @ORM\Entity
 * @ORM\HasLifecycleCallbacks
 */
class Pedido 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-02-08T18:41:34.150

`/***`就我而言，我收到此错误是因为我使用而不是打开 doc 块`/**`：

```
/***
 * @entity
 * @table(name="bans")
 */ 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-09-08T02:20:50.933

您可以使用您的配置，只需提供 FALSE 以使用简单的注释阅读器，就像那样。

```
<?php

//same code

$isSimpleMode = FALSE;
$proxyDir = null;
$cache = null;
$config = Setup::createAnnotationMetadataConfiguration(
$paths, $isDevMode, $proxyDir, $cache, $isSimpleMode
);

//same
?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-13T11:57:59.670

按照奥克拉米乌斯的回答（这也救了我）

如果您的实体上有一些自定义命名空间，请确保注释出现在命名空间声明之后，这是我的实体有效：

```
<?php

namespace App\Models;

/**
  * Books
  *
  * @ORM\Table(name="books")
  * @ORM\Entity
  */

  use Doctrine\ORM\Mapping as ORM;

  class Books
  {
  /**
   * @var integer
   *
   * @ORM\Column(name="id", type="integer", nullable=false)
   * @ORM\Id
   * @ORM\GeneratedValue(strategy="IDENTITY")
   */
  private $id;

  /**
   * @var string
   *
   * @ORM\Column(name="name", type="string", length=20, nullable=true)
   */
  private $name;

  /**
   * @var string
   *
   * @ORM\Column(name="isbn", type="string", length=20, nullable=true)
   */
  private $isbn; 
```

然后在我的控制器中：

```
 $entityManager->find('App\Models\Books', 1) 
```

成功！

# xml - dtd 文件不影响 xml 文件

> ID：15099061
> 
> 赞同：0
> 
> 时间：2013-02-26T20:54:32.333
> 
> 标签：xml, dtd

我有简单的 xml 文档。但我也需要使用 DTD 文件。但是当我添加或不添加时 - 它什么都没有改变。文件不会影响我的 xml 页面。

```
<?xml version="1.0"?>
<?xml-stylesheet  type="text/css" href="stylesheet.css"?>
<!DOCTYPE software SYSTEM "software.dtd">
<software>
<application>
    <suite>
        <office>
            <app>
                <title>Microsoft Office</title>
                <developer>Microsoft</developer>
                <os>Microsoft Windows</os>
                <license>Trialware</license>
            </app>
            <app>
                <title>iWork</title>
                <developer>Apple</developer>
                <os>Mac OS</os>
                <license>Proprietary</license>
            </app>
            <app>
                <title>Open Office</title>
                <developer>StarOffice,OpenOffice.org,Apache OpenOffice</developer>
                <os>Linux, Mac OS, Microsoft Windows</os>
                <license>LGPL,Apache License</license>
            </app>
        </office>
    </suite>
</application> 
```

这里是我的 .dtd 文件

```
<!DOCTYPE software
[
<!ELEMENT software(application)>
<!ELEMENT application(suite)>
<!ELEMENT suite(office)>
<!ELEMENT office(app)>
<!ELEMENT app(title,developer,os,license)>
<!ELEMENT title(#PCDATA)>
<!ELEMENT developer(#PCDATA)>
<!ELEMENT os(#PCDATA)>
<!ELEMENT license(#PCDATA)>
] 
> 
```

当我把它改成这样的时候——xml页面仍然显示一切正常。

```
<!DOCTYPE software
[
<!ELEMENT look ANY>
] 
> 
```

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:06:00.563

XML 解析器是否执行验证取决于您如何调用它。很有可能（并且很常见）有一个 DTD，但仍然不做验证。您需要指出您正在使用什么解析器以及如何调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:44:14.060

如果您尝试使用 DTD 来限制在浏览器中查看 XML 文件时显示的元素，那不是 DTD 的用途，而且它不会起作用。DTD 用于文档的基本验证。

您可以使用 XML 样式表或（最好）XSLT 来转换 XML 以进行显示。

# ios - 回到之前的 UITextfield , IOS

> ID：15099064
> 
> 赞同：0
> 
> 时间：2013-02-26T20:54:47.580
> 
> 标签：ios, objective-c, uitextfield

我的应用程序有一个注册视图，我比较字符串`password textfield`和`confirm password textfield`，如果它们不匹配我希望用户返回`password textfield`

这个问题是通过使用标签 [UITextField 跳转到上一个来完成的](https://stackoverflow.com/questions/6256801/uitextfield-jump-to-previous)

有没有办法在不使用标签的情况下做到这一点？

```
//call next textfield on each next button
- (BOOL) textFieldShouldReturn:(UITextField *) textField {

    BOOL didResign = [textField resignFirstResponder];
    if (!didResign) return NO;

    if ([textField isKindOfClass:[SOTextField class]])
        dispatch_async(dispatch_get_current_queue(),
                       ^ { [[(SOTextField *)textField nextField] becomeFirstResponder]; });

    return YES;

}

-(void)textFieldDidEndEditing:(UITextField *)textField{

    if (textField==self.confirmPassword) {

        if ([self.password.text isEqualToString:self.confirmPassword.text]) {
            NSLog(@"password fields are equal");

        }
        else{
            NSLog(@"password fields are not equal prompt user to enter correct values");
            //[self.password becomeFirstResponder]; doesnt work 
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:22:48.950

在不使用标签的情况下，您可以创建一个 NSArray 的 textfield outlets 来描述所需的顺序。

像这样声明和初始化......

```
@property(nonatomic,strong) NSArray *textFields;

- (NSArray *)textFields {
    if (!_textFields) {
        // just made these outlets up, put your real outlets in here...
        _textFields = [NSArray arrayWithObjects:self.username, self.password, nil];
    }
    return _textFields;
} 
```

您需要获取当前具有焦点的文本字段，如果有...

```
- (UITextField *)firstResponderTextField {

    for (UITextField *textField in self.textFields) {
        if ([textField isFirstResponder]) return textField;
    }
    return nil;
} 
```

然后像这样推进焦点......

```
- (void)nextFocus {

    UITextField *focusField = [self firstResponderTextField];

    // what should we do if none of the fields have focus?  nothing
    if (!focusField) return;
    NSInteger index = [self.textFields indexOfObject:textField];

    // advance the index in a ring
    index = (index == self.textFields.count-1)? 0 : index+1;
    UITextField *newFocusField = [self.textFields objectAtIndex:index];
    [newFocusField becomeFirstResponder];
} 
```

然后像这样向后移动焦点......

```
- (void)previousFocus {

    UITextField *focusField = [self firstResponderTextField];

    // what should we do if none of the fields have focus?  nothing
    if (!focusField) return;
    NSInteger index = [self.textFields indexOfObject:textField];

    // backup the index in a ring
    index = (index == 0)? self.textFields.count-1 : index-1;
    UITextField *newFocusField = [self.textFields objectAtIndex:index];
    [newFocusField becomeFirstResponder];
} 
```

# ios - 输入控件同时工作。如何在不循环的情况下同时更新另一个值？

> ID：15099065
> 
> 赞同：0
> 
> 时间：2013-02-26T20:54:48.447
> 
> 标签：ios, objective-c, algorithm

我有两个输入控件同时工作，**A**和**B**。如果**A**的值发生变化，则**B**应移至该值。如果**B**改变了**A**应该转移到这个值。如何设置算法？

我尝试创建一个，但它的行为不正确，因为更改会造成循环。任何帮助表示赞赏。

```
if(A Changed)
change B's value to value of A
if( B Changed)
change A's value to value of B 
```

编辑：真实场景..A：旋转木马 B：滑块

```
- (void)carouselDidEndScrollingAnimation:(iCarousel *)carousel
{
        [self.slider setValue:self.carousel.currentItemIndex];
}
-(IBAction) sliderChanged:(id) sender{    
    [self.carousel scrollToItemAtIndex:self.slider.value animated:YES];
} 
```

问题：sliderChanged：方法连接到动作`valuechanged`

因此，每当轮播移动时，将滑块设置为轮播中的值。当轮播改变时，更改滑块的值

要求：使用滑块滚动轮播，以便对于较大的值，可以通过移动滑块来减少滑动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:16:38.400

所以现在，按照你的方式，系统有两种响应状态，A-change 和 B-change。当然，A-change 会导致 B-change，反之亦然，所以无论何时发生任何变化，您都会陷入无限循环。

但怎么可能是其他方式呢？好吧，您可以考虑的一件事是更改本身，以及谁在进行更改。在一种情况下，用户输入数据，这是一种变化。显然，你知道你想如何处理这种情况。但是随后发生了另一个变化，程序本身实际上会根据用户的变化而改变一些东西。在这种情况下，您可能想要以不同的方式处理。

这有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:16:48.973

执行此操作的通常方法是在 A 和 B 都更新的幕后拥有一个模型值，然后让 A 和 B*观察*该模型值并相应地进行更改。您可以通过仅更新现有代码来更改值来执行前者，而后者可以通过使用[键值观察](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)来实现。

# regex - 用正则表达式排除一些单词

> ID：15099066
> 
> 赞同：0
> 
> 时间：2013-02-26T20:54:49.523
> 
> 标签：regex

我有文字：

> 文本 文本 文本 文本 [文本] 文本 文本 -.[text1] -.[text2]

我只想提取带有括号 [] 的单词，排除带有 -.[ 的单词

对于这个例子，我只想要 [text] 而没有 -.[text1] 和 -.[text2]

泰！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:57:03.953

假设您使用的语言或库支持lookbehind，以下应该可以工作：

```
(?<!-\.)\[[^\]]*\] 
```

解释：

```
(?<!-\.)    # fail if the previous characters are '-.'
\[          # match a literal '['
[^\]]*      # match any number of characters that are not ']'
\]          # match a literal ']' 
```

示例：[http ://www.rubular.com/r/HqdR3tZy9R](http://www.rubular.com/r/HqdR3tZy9R)

# java - Android - java.lang.ArrayIndexOutOfBoundsException

> ID：15099069
> 
> 赞同：0
> 
> 时间：2013-02-26T20:54:56.443
> 
> 标签：java, android

我是 Java 新手，但我之前在 C 中做过一些 PSP 编码。这似乎完全不同。

下面是我所看到的堆栈跟踪：

```
java.lang.RuntimeException: An error occured while executing doInBackground()
enter code hereenter code here`at android.os.AsyncTask$3.done(AsyncTask.java:299)
enter code here`at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
at java.util.concurrent.FutureTask.run(FutureTask.java:137)
at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
at java.lang.Thread.run(Thread.java:856)
Caused by: java.lang.ArrayIndexOutOfBoundsException: length=1; index=1
at com.adev.abmp3.ViewSongDialog$FindLyrics.doInBackground(ViewSongDialog.java:173)
at com.adev.abmp3.ViewSongDialog$FindLyrics.doInBackground(ViewSongDialog.java:1)
at android.os.AsyncTask$2.call(AsyncTask.java:287)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 
```

这是代码补丁：

```
@Override
protected Void doInBackground(Void... arg0) {
    String searchQuery = title.replaceAll("[^ \\w]", "");
    searchQuery = searchQuery.replace(" ", "+");
    String searchResult = httpRun("http://search.azlyrics.com/search.php?q="+searchQuery).toString();
    System.out.println("http://search.azlyrics.com/search.php?q="+searchQuery);
    if(!searchResult.contains("Sorry, no results") && !searchResult.equals("")) {
        String link = searchResult.split("<table width=100%>")[1];
        link = link.substring(link.indexOf("<a href=\""), link.indexOf("\" rel"));
        link = link.replace("<a href=\"", "");

        String lR = httpRun(link).toString();
        if(lR != "" && lR.contains("<!-- start of lyrics -->")) {
            lR = lR.substring(lR.indexOf("<!-- start of lyrics -->"), lR.indexOf("<!-- end of lyrics -->"));
            lR = lR.replace("<!-- start of lyrics -->", "");
            lyrics = lR;
        } else {
            fail = 1;
            lyrics = "Couldn't find lyrics";
        }
    } else {
        fail = 1;
        lyrics = "Couldn't find lyrics";
    }
    return null;
} 
```

我做了一些研究，并读到你不能在里面打印到屏幕上`doInBackground`——但我不确定从这里去哪里。任何帮助，将不胜感激。

编辑：java.lang.String.startEndAndLength 中的 java.lang.StringIndexOutOfBoundsException

继承人的新堆栈：

```
java.lang.RuntimeException: An error occured while executing doInBackground()
at android.os.AsyncTask$3.done(AsyncTask.java:299)
at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
at java.util.concurrent.FutureTask.run(FutureTask.java:137)
at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
at java.lang.Thread.run(Thread.java:856)
Caused by: java.lang.StringIndexOutOfBoundsException: length=7338; regionStart=537; regionLength=-538
at java.lang.String.startEndAndLength(String.java:593)
at java.lang.String.substring(String.java:1474)
at com.adev.abmp3.ViewSongDialog$FindLyrics.doInBackground(ViewSongDialog.java:174)
at com.adev.abmp3.ViewSongDialog$FindLyrics.doInBackground(ViewSongDialog.java:1)
at android.os.AsyncTask$2.call(AsyncTask.java:287)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T20:56:40.977

您的 split 调用返回一个大小为 1 的数组，但您正试图获取其中的第二个项目（使用 [1]）。您必须考虑您的拆分字符串不在输入中的可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:12:43.067

```
String link = searchResult.split("<table width=100%>")[1]; 
```

错误正在那里发生。索引从 0 开始，并且您的拆分返回一个大小为 1 的数组，因此元素 1 超出范围，因此引发异常。如果将其更改为`String link = searchResult.split("<table width=100%>")[0];`将不再抛出异常。

# python - 如何更有效地使用 blobstore.BlobReader

> ID：15099075
> 
> 赞同：0
> 
> 时间：2013-02-26T20:55:08.213
> 
> 标签：python, google-app-engine, file-io, python-2.7, blobstore

我在 GAE 上使用 python 2.7，我需要读取 25 到 35 MB 大小的文件。我已将它们上传到 Blobstore，并使用以下代码读取文件：

```
blob_reader = blobstore.BlobReader(blob_key)
for line in blob_reader:
     # ... 
```

我的问题是，如何使用 BlobReader 属性 buffer_size 和 position 来更有效地执行此操作。文档不是很详细，而且我对文件 I/O 没有太多经验。给出的例子是：

```
# Instantiate a BlobReader for a given Blobstore value, setting the
# buffer size to 1 MB.
blob_reader = blobstore.BlobReader(blob_key, buffer_size=1048576) 
```

和

```
# Instantiate a BlobReader for a given Blobstore value, setting the
 # initial read position.
 blob_reader = blobstore.BlobReader(blob_key, position=4194304) 
```

但目前尚不清楚如何使用它来更快地读取文件。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:52:16.503

更大的缓冲区大小将导致读取行时的 blobstore 操作更少，这将更有效。只需将缓冲区大小设置为尽可能大，然后您就可以排序了。

# iphone - 如何使用自定义 inputViews 设计 iOS 程序

> ID：15099076
> 
> 赞同：2
> 
> 时间：2013-02-26T20:55:08.947
> 
> 标签：iphone, ios, objective-c, design-patterns

请注意，这是一个设计问题，而不是功能问题。我已经知道如何实现以下内容，我只是想找出设计它的最佳方法。

我有一个 iOS 应用程序，`UIViewControllers`整个应用程序中的一些应用程序都有`UITextFields`输入`UIDatePicker`视图。代码如下：

```
- (void) viewDidLoad
{
    self.dateField.inputView = [self createDatePicker];
}

- (UIView *) createDatePicker
{
    UIView *pickerView = [[UIView alloc] initWithFrame:CGRectMake(0, self.view.frame.size.height, self.view.frame.size.width, TOOLBAR_HEIGHT + KEYBOARD_HEIGHT)];

    UIDatePicker *picker = [[UIDatePicker alloc] init];
    [picker sizeToFit];
    picker.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight);
    picker.datePickerMode = UIDatePickerModeDate;
    [picker addTarget:self action:@selector(updateDateField:) forControlEvents:UIControlEventValueChanged];
    [pickerView addSubview:picker];

    // Create done button
    UIToolbar* toolBar = [[UIToolbar alloc] init];
    toolBar.barStyle = UIBarStyleBlackTranslucent;
    toolBar.translucent = YES;
    toolBar.tintColor = nil;
    [toolBar sizeToFit];

    UIBarButtonItem *flexibleSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
    UIBarButtonItem* doneButton = [[UIBarButtonItem alloc] initWithTitle:@"Done"
                                                                   style:UIBarButtonItemStyleDone target:self
                                                                  action:@selector(doneUsingPicker)];

    [toolBar setItems:[NSArray arrayWithObjects:flexibleSpace, doneButton, nil]];
    [pickerView addSubview:toolBar];
    picker.frame = CGRectMake(0, toolBar.frame.size.height, self.view.frame.size.width, pickerView.frame.size.height - TOOLBAR_HEIGHT);
    toolBar.frame = CGRectMake(0, 0, self.view.frame.size.width, TOOLBAR_HEIGHT);
    return pickerView;
}

- (void) doneUsingPicker
{
    [self.dateField resignFirstResponder];
}

- (void) updateDateField: (UIDatePicker *) datePicker
{
    self.dateField.text = [self.formatter stringFromDate:datePicker.date];
} 
```

问题是，我一直不得不在整个应用程序中将这段代码粘贴到具有 UITextFields 和 UIDatePicker 输入视图的不同类中。什么是最好的设计方法，以尽量减少重复代码。我曾想过拥有一个`UIDatePickerableViewController`包含此代码的超类，但这似乎不可扩展。例如，如果我很快就会有其他类型的输入视图可以附加到文本字段。我应该如何设计这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:00:08.627

您可以重构公共超类中的类之间共享的代码/方法，并继承子类，您只需在其中修改需要不同的部分。

或者，如果您从不同的角度处理问题：创建一个自定义`InputWiewWithDatePicker`类并将（自）配置和初始化代码移动到`- init`该类的方法中。这样您就不必将所有这些都粘贴到任何地方，并且只会复制一行：

```
customControl = [[InputViewWithDatePicker alloc] init]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T21:11:19.733

我的第一个想法是创建一个新的 UIView 子类，其中包含日期选择器和文本字段以及您想要的布局。这可以用笔尖或代码来完成。任何你想添加这种新视图的地方，它要么是 viewDidLoad 中的单线，要么将 UIView 绘制到 nib 中并将它的类更改为你的新视图类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T22:02:22.610

子类化您想要的布局，然后当您分配它时，它将带有您定义的所有选项。

# java - 扩展 java 比较器以比较实现它所比较的 接口的特定类

> ID：15099077
> 
> 赞同：3
> 
> 时间：2013-02-26T20:55:09.183
> 
> 标签：java, inheritance, interface, comparator

我有一个像这样的比较器：

```
public class XComparator implements Comparator<X>, Serializable {
} 
```

当前用于对 Y 实现 X 的 Y 对象列表进行排序

我想为 Y 创建一个扩展 XComparator 的比较器，以便我可以基于 Y 的布尔数据成员进行比较，然后调用 super.compare。

我已经尝试了几种不同的方法，但似乎都没有。这甚至可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T21:02:45.120

无法将`XComparator`泛型参数扩展和更改`Comparator`为`Y`，但您可以创建一个`YComparator`只有`XComparator`内部并委托给它的类。就像是：

```
public class YComparator implements Comparator<Y>, Serializable {
    private XComparator xComparator = new XComparator();

    @Override
    public int compare(Y y1, Y y2) {
         // compare y1.booleanData with y2.booleanData
         if (...)
             ...;

         // else otherwise:
         return xComparator.compare(y1, y2);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:02:55.540

使用委托而不是继承。

您的 YComparator 应该包含并委托给 XComparator。

# codeigniter-2 - Codeigniter 模型无法连接到数据库

> ID：15099081
> 
> 赞同：0
> 
> 时间：2013-02-26T20:55:18.823
> 
> 标签：codeigniter-2

我的控制器可以连接到数据库，但我的模型不能。我已经在 autoload.php 文件中自动加载了数据库，但模型中没有运气。

所以如果我做类似 $this->db->insert('table', $data);

我在以前使用过 Codeigniter 但从未遇到过这个问题*的非对象上*收到对成员函数 insert() 的调用，在我的另一个项目中我什至没有使用 parent::__construct()

```
class Bucketlist extends CI_Model {

private $data = array();

public function __construct(){
    parent::__construct();
}

// Setter Function
public function __set ($var, $val) {
    $this->data[$var] = $val;
}

// Getter Function
public function __get($var) {
    return (isset($this->data[$var])) ? $this->data[$var] : null;
}

// Create WishList
function createBucketList($bucketlist) {
    $this->db->insert('_bucketlist', $bucketlist->data);
} 
```

}

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:10:19.850

您可能需要自动加载数据库连接（[http://ellislab.com/codeigniter/user-guide/database/connecting.html](http://ellislab.com/codeigniter/user-guide/database/connecting.html)），因为在您尝试使用 db 变量之前似乎没有实例化它。

# java - 休眠或数据库：外键约束哪个更好？

> ID：15099082
> 
> 赞同：2
> 
> 时间：2013-02-26T20:55:32.893
> 
> 标签：java, sql, database, hibernate

我必须对我的两个实体创建一些`Foreign key`约束，我已经`one to many mapping`在休眠层中使用了这些关系，我的问题是

1.  放置此类约束的更好地方是：Hibernate 或 Database Tables 或两者兼而有之？

我会很感激一些细节，因为我不确定实施约束的正确方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:09:35.580

这些外键必须由数据库中的适当约束来强制执行。没有办法解决这个问题。

您的应用程序（以及 Hibernate）不会是唯一访问数据的应用程序，也不会是最后一个。

# java - 在字符串中查找锚点并用标题包装它们

> ID：15099084
> 
> 赞同：0
> 
> 时间：2013-02-26T20:55:33.457
> 
> 标签：java, html, jsp

嗨，我对 Java 很陌生。而且我无法弄清楚我的问题有什么好的解决方案。我想添加一个标题，在这种情况下，`H2`在以下字符串中的锚点周围。

可以说`li.getContent().toString`包含以下内容：

```
<a href="http://test">TEST</a><div class="description">lorem ipsum</div> 
```

使用以下代码：

```
for (Element li : liS) {
    out.append("<div class=\"result\">\n" +
               "\t\t\t<ul class=\"resultset\">\t\n" +
               "\t\t\t\t<li><div class=\"item\"> " + 
               li.getContent().toString() + "</div></li>\n" +
               "\t\t\t</ul>\n" + "\t\t</div>");
} 
```

我想要的是这样`li.getContent().toString`显示，通过添加`H2`标题：

```
<h2><a href="http://test">TEST</a></h2><div class="description">lorem ipsum</div> 
```

是否有某种包装功能，我可以在其中找到 Anchor 并用标题包装它？

# javascript - 如何从同一视图中的 Openlayers 事件调用我的backbone.js 视图中的函数？

> ID：15099087
> 
> 赞同：1
> 
> 时间：2013-02-26T20:55:37.700
> 
> 标签：javascript, backbone.js, openlayers

希望我在这里不会太混乱。我有一个 Backbone.js 应用程序并一起使用 Openlayers。

我有一个矢量视图。在那个视图中，我有一个 openlayers featuresAdded 事件。在该事件中，我试图调用视图中的另一个函数（地理查询）。以下代码不起作用。有任何想法吗？

```
//event setup
this.layer.events.on({
"beforefeaturesadded": this.beforeFeaturesAdded,
"featuresadded": this.featuresAdded
});

featuresAdded: function(event){
    this.geoquery(polystring);      
},

geoquery: function(polystring){
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:03:14.083

问题的最可能原因是 OpenLayers 没有`this`为回调函数设置正确的上下文值。当您注册到`featuresadded`事件时，您需要将范围值提供给`events.register`.

来自 OpenLayers[文档](http://dev.openlayers.org/apidocs/files/OpenLayers/Events-js.html#OpenLayers.Events.register)：

```
register: function (type,obj,func,priority) 
```

> 当事件被触发时，将在 'obj' 的上下文中调用 'func' 函数。假设我们要注册一个事件，将 OpenLayers.Bounds 对象指定为“obj”。当事件被触发时，回调函数中的上下文将是我们的 Bounds 对象。这意味着在我们的回调函数中，我们可以通过“this”变量访问 Bounds 对象的属性和方法。

因此，如果您希望`this`范围指向您的视图，则需要将视图作为第二个参数传递。假设您正在从视图中注册事件：

```
layer.events.register('featuresadded', this, this.featuresAdded); 
```

或从视图外部：

```
layer.events.register('featuresadded', view, view.featuresAdded); 
```

# php - 身份验证令牌安全

> ID：15099089
> 
> 赞同：0
> 
> 时间：2013-02-26T20:55:43.037
> 
> 标签：php, security, authentication, login, access-token

遵循以下逻辑的身份验证的主要缺陷是什么。

用户登录`a.example.com`并单击“登录到 b.example.com”。此链接生成一个随机字符串并将其保存在`b.example.com`数据库中。然后它重定向到`b.example.com/remotelogin.php?token=therandomstring`which 检查数据库中的字符串并将用户登录。

我能想到的唯一安全问题是令牌有效的时间限制，可能是 30 秒或其他时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:01:31.560

这几乎不是用户认证方案。用户身份验证是关于用户是谁。也不是很实用。

例如，如果它在 30 秒内到期，而用户在 40 秒内刷新？然后怎样呢？

恶意用户发送链接并让人们登录网页怎么办？或者恶意用户用登录信息淹没你的数据库怎么办？

你打算拥有 ssl 还是在这 30 秒内你可以重放攻击？你提出的方案一点都不好，还有很多可能出错的东西。

我想我说的主要是这个（不要试图冒犯）：

如果您没有任何与用户相关的信息，为什么还要麻烦进行身份验证？反对谁做什么？例如，您不能在社交网络应用程序或银行应用程序或这样的论坛中使用此方案。如果您不做任何安全敏感的事情，那么是的，您的方案没有安全流程，但它没有缺陷，因为它不包含敏感信息。

# http - 使用 CORS 的 HTTP 站点到 HTTPS Web 服务

> ID：15099093
> 
> 赞同：5
> 
> 时间：2013-02-26T20:55:49.320
> 
> 标签：http, iis, https, ssl-certificate, cors

我在域上有一个 HTML5/JS 网站，它使用 asp.mvc Web 服务在另一个域上进行 CORS 查询。

HTTP -> HTTP 一切正常，但是因为我们现在正在为我们希望启用 HTTPS 的用户特定内容添加登录和身份验证机制。然而，它只是拒绝将选项请求发送到 Web 服务，只是给出“中止”状态。

我正在使用 Firefox 进行测试，并且 Web 服务托管在具有自我证书（使用 SelfSSL7 生成）的 IIS7 上。

是否有任何已知问题？我确实检查了：

[从 HTTP 到 HTTPS 的跨域请求立即中止](https://stackoverflow.com/questions/11690191/cross-domain-request-from-http-to-https-aborts-immediately)

但是它提到解决方案是确保证书是可信的，据我所知，SelfSSL 在我调用它时使用 /T 选项来执行此操作。那么还有什么需要改变才能让它工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T14:03:36.203

不幸的是，您需要在 Firefox 中手动设置它，尽管我相信如果您手动设置配置文件配置，您可以覆盖此行为。

# sql - Oracle SQL 触发器 - 更新日期

> ID：15099094
> 
> 赞同：0
> 
> 时间：2013-02-26T20:55:50.563
> 
> 标签：sql, oracle, triggers

我有两张桌子：

评估与评估_公告

```
CREATE TABLE  "ASSESSMENT" 
  (     "ASSESSMENT_NAME" VARCHAR2(50) NOT NULL ENABLE, 
        "DEADLINE_DATE" DATE NOT NULL ENABLE, 
        CONSTRAINT "ASSESSMENT_PK" PRIMARY KEY ("ASSESSMENT_NAME") ENABLE
  )

CREATE TABLE  "ASSESSMENT_ANNOUNCEMENT" 
   (    "ASSESSMENT_NAME" VARCHAR2(50) NOT NULL ENABLE, 
        "DEADLINE_DATE" DATE NOT NULL ENABLE, 
        "ATTENTION" VARCHAR2(500) NOT NULL ENABLE, 
  CONSTRAINT "ASSESSMENT_ANNOUNCEMENT_PK" PRIMARY KEY ("ASSESSMENT_NAME")  ENABLE
   ) 
```

我正在考虑实现一个触发器，当 ASSESSMENT 表的 DEADLINE_DATE 列中的日期在 7 天内时更新到 'ASSESSMENT_ANNOUNCEMENT' 表。数据可能已经存储了 14 天，但是当它在截止日期的 7 天内 - 它会触发。除非插入日期在截止日期的 7 天内，否则不应在插入时触发。

到目前为止，我有以下代码：

```
CREATE OR REPLACE TRIGGER  "TEST" 
AFTER INSERT ON ASSESSMENT
FOR EACH ROW
BEGIN
insert into ASSESSMENT_ANNOUNCEMENT(ASSESSMENT_NAME, DEADLINE_DATE, ATTENTION)
values (:new.ASSESSMENT_NAME, :new.DEADLINE_DATE, 'DEADLINE IS 7 DAYS OR LESS');
WHERE DEADLINE_DATE >= (SYSDATE) - 7 
```

任何帮助和指导将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:01:31.017

听起来你想要

```
BEGIN
  IF :new.deadline_date >= sysdate + 7
  THEN
    INSERT INTO assessment_announcement( assessment_name, deadline_date, attention )
      VALUES( :new.assessment_name, :new.deadline_date, 'Deadline is 7 days or less' );
  END IF;
END; 
```

请注意，Oracle`DATE`始终包含一个日期组件和一个时间组件。所以`sysdate + 7`正好返回 24*7 = 168 小时前。如果当前是 2 月 26 日下午 4:00，它将在 3 月 5 日下午 4:00 返回。如果您希望触发器在 3 月 5 日的任何时间插入一行，`assessment_announcement`则需要. `deadline_date``trunc(sysdate) + 7`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T18:36:17.070

我不相信你可以用触发器完成你想要的，因为你不能保证表格会在你想要的时间范围内更新。相反，您应该寻求运行一个存储过程来执行此操作，该过程可以按适当的时间间隔安排；每天或每 12 小时说一次。我已经使用 MSSQL 而不是 oracle 完成了此操作，但[本文](http://www.oracle-base.com/articles/10g/scheduler-10g.php)应该可以帮助您开始使用。

您要安排的 PL-SQL 块是您上面的查询。您可以将其修改为

```
insert into ASSESSMENT_ANNOUNCEMENT(ASSESSMENT_NAME, DEADLINE_DATE, ATTENTION)
Select ASSESSMENT_NAME, DEADLINE_DATE, 'Deadline is 7 days or less'
FROM ASSESSMENT
WHERE DEADLINE_DATE >= (SYSDATE) - 7 
```

# google-apps-script - 我是否正确使用了文件夹类的 find 方法？

> ID：15099095
> 
> 赞同：1
> 
> 时间：2013-02-26T20:55:53.923
> 
> 标签：google-apps-script

我有一个使用文件夹类的 find 方法的脚本，它已经运行了很长一段时间。今天突然停止工作了。我收到“很抱歉，发生服务器错误。请稍等，然后重试”消息。今天早上它停止工作了。

我能够在新的小脚本中用几行代码重新创建这个错误。

```
function myFunction() {
 folder = DocsList.getFolder('test');
 folder.find('testfile');
 Logger.log('anything');
} 
```

我确保我有一个名为 test 的文件夹和一个名为 testfile 的文件。

任何想法为什么我会收到此错误？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T23:20:52.143

这最近被报告为一个问题 -

[https://code.google.com/p/google-apps-script-issues/issues/detail?id=2482](https://code.google.com/p/google-apps-script-issues/issues/detail?id=2482)

请给它加星标，以便您收到更新通知。

# objective-c - Cocos2D无限背景图片

> ID：15099096
> 
> 赞同：4
> 
> 时间：2013-02-26T20:55:54.843
> 
> 标签：objective-c, background, cocos2d-iphone

我很好奇如何在 cocos2d 中创建无限的背景。例如，假设我正在构建一个应用程序，其中一个人从左到右运行，我希望他无限运行。那么在那种情况下，我必须有一个无尽的背景，这样这个人才能继续奔跑。我一直在搜索这件事，但没有发现任何真正有效的东西。

非常感谢任何类型的建议、答案和提示。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T05:41:30.917

尝试这个：

```
 #define IS_IPAD (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
 #define MM_BG_SPEED_DUR       ( IS_IPAD ? (6.0f) : (2.0f) )

-(void)onEnter
{
    [super onEnter];
    [self initBackground];

    [self schedule: @selector(tick:)];
}

-(void)initBackground
{
   NSString *tex = @"BG/Background.png";//[self getThemeBG];

    mBG1 = [CCSprite spriteWithFile:tex];
    mBG1.position = ccp(s.width*0.5f,s.height*0.5f);
    [self addChild:mBG1 z:LAYER_BACKGROUND];

    mBG2 = [CCSprite spriteWithFile:tex];
    mBG2.position = ccp(s.width+s.width*0.5f,s.height*0.5f);

    mBG2.flipX = true;
    [self addChild:mBG2 z:LAYER_BACKGROUND];

}

-(void)scrollBackground:(ccTime)dt
{
    CGSize s = [[CCDirector sharedDirector] winSize];

    CGPoint pos1 = mBG1.position;
    CGPoint pos2 = mBG2.position;

    pos1.x -= MM_BG_SPEED_DUR;
    pos2.x -= MM_BG_SPEED_DUR;

    if(pos1.x <=-(s.width*0.5f) )
    {
        pos1.x = pos2.x + s.width;
    }

    if(pos2.x <=-(s.width*0.5f) )
    {
        pos2.x = pos1.x + s.width;
    }

    mBG1.position = pos1;
    mBG2.position = pos2;

}

-(void)tick:(ccTime)dt
{
    [self scrollBackground:dt];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T22:13:26.290

最简单的方法是包含两个无缝融合在一起的背景图像。（CCSprite 可以正常工作）在您的更新方法中，一旦第一个背景完全离开屏幕，就将其移回屏幕的另一侧，紧邻第二个背景，并不断移动两个背景图像。对第二个背景也重复此过程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T22:22:31.317

`CCTMXTiledMap`可以帮助你，但恐怕你必须处理地图的结尾并手动添加另一个。查看本教程如何在横向滚动游戏中使用平铺地图，希望对您有用：

[http://www.raywenderlich.com/15230/how-to-make-a-platform-game-like-super-mario-brothers-part-1](http://www.raywenderlich.com/15230/how-to-make-a-platform-game-like-super-mario-brothers-part-1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T01:08:04.270

试试[这个](https://github.com/jasonmarziani/CCParallaxScrollNode)。它很容易实现并且运行良好。只需按照阅读我的教程进行操作即可。

# python - 在 Pyqt 中，如何通过空的小部件空间启用拖动/移动窗口？

> ID：15099097
> 
> 赞同：1
> 
> 时间：2013-02-26T20:56:01.470
> 
> 标签：python, qt, pyqt4, kde4

主要的 Qt 应用程序和 AFAIK 大多数 KDE 应用程序让您不仅可以通过标题栏拖动窗口，还可以使用窗口上的任何空白空间。出于某种原因，像这样的基本 Pyqt 应用程序似乎不允许您这样做：

```
from PyQt4.QtGui import *
import sys

a = QApplication(sys.argv)
w = QWidget()
w.show()
sys.exit(a.exec_()) 
```

我希望能够通过其中的小部件拖动窗口。[我发现了一个现有的 StackOverflow 问题和答案](https://stackoverflow.com/questions/7138773/draggable-window-with-pyqt4)，但它并没有使用窗口管理器来实际移动窗口，这 (1) 不像其他应用程序，(2) 不像窗口管理器那样漂亮.

所以我的问题是，我错过了什么？如何将未使用的单击/拖动事件传递给窗口管理器以移动窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:16:11.587

事实证明，要让窗口上的额外空间可拖动，您需要从 QMainWindow 或 QDialog 继承它，而不仅仅是 QWidget。你有它。

# java - 类路径声明中的点

> ID：15099109
> 
> 赞同：1
> 
> 时间：2013-02-26T20:56:45.180
> 
> 标签：java, classpath

我读到基本上是为了通过使用命令行来激活当前文件夹中的搜索功能，`javac -cp`必须指定一个点（。），如下所示`javac -cp . File.java`。我注意到，如果我省略了点，它仍然可以工作。在最新的 Java 7 升级中是否发生了变化？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:22:00.447

默认情况下，Java 类路径将始终包含当前文件夹以及其中的任何 jar 文件，`./lib/`即使您指定并清空了类路径`javac -cp File.java`

我认为从 Java 5 开始就是这样。

# grails - instance.validate() 返回真

> ID：15099117
> 
> 赞同：0
> 
> 时间：2013-02-26T20:57:00.570
> 
> 标签：grails

不知道我在这里错过了什么，恐怕它是愚蠢的。非常简单的设置，我发布`/reference/save`并没有传递任何东西......期望得到一个`required error.` [文档](http://www.grails.org/doc/latest/ref/Constraints/nullable.html)状态，`nullable:true`默认情况下但我开始认为那是不正确的。

```
#domain
class Reference{
    String name;
    String publication;
    String year;
    String section;
    String description;
    String link;
    static constraints = {
        year nullable: true
        section nullable: true
        link url: true
    }   
}

#controller:
Reference referenceInstance = new Reference(params)
println(params)
println(referenceInstance.validate()) 
```

输出：

```
>>[description:, link:, name:, year:, section:, publication:, action:save, controller:reference]
>>true 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:24:05.543

尝试将`blank`约束添加到您的属性中。

您的参数映射包含每个属性的键。Grails 将它们视为空字符串，而不是`null`.

```
static constraints = {
    year nullable: true
    section nullable: true
    link url: true, blank: false
    description blank: false
    name blank: false
    publication blank: false
} 
```

# javascript - javascript：尝试仅将数组展平一层

> ID：15099123
> 
> 赞同：10
> 
> 时间：2013-02-26T20:57:16.077
> 
> 标签：javascript, flatten

我正在尝试编写一个函数来展平数组。我有一部分功能正在工作，而另一半我需要帮助。

```
flatten: function(anyArray, singleLevel) {
  if (singleLevel == true) {
      flatArray = Array.prototype.concat.apply([], anyArray);
      return flatArray;
  }
  flatArray = Array.prototype.concat.apply([], anyArray);
  if (flatArray.length != anyArray.length) {
      flatArray = someObject.array.flatten(flatArray);
  }
  return flatArray;
} 
```

如果我输入

```
.flatten([[[1],[1,2,3,[4,5],4],[2,3]]], true); 
```

我希望它只展平一个级别：

```
[[1],[1,2,3,[4,5],4],[2,3]] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2019-05-28T14:03:39.947

现代 JavaScript 允许我们使用各种技术非常轻松地处理这个问题

使用`Array.prototype.flat`-

```
const arr =
  [ [ 1 ], [ 2, 3, [ 4, 5, [ 6 ] ] ], [ 7, [ 8, 9 ] ] ]

const flatArr =
  arr.flat(1) // 1 is default depth

console.log(JSON.stringify(arr))
console.log(JSON.stringify(flatArr))
// [[1],[2,3,[4,5,[6]]],[7,[8,9]]]
// [1,2,3,[4,5,[6]],7,[8,9]]
```

使用`Array.prototype.flatMap`-

```
const arr =
  [ [ 1 ], [ 2, 3, [ 4, 5, [ 6 ] ] ], [ 7, [ 8, 9 ] ] ]

const flatArr =
  arr.flatMap(x => x)

console.log(JSON.stringify(arr))
console.log(JSON.stringify(flatArr))
// [[1],[2,3,[4,5,[6]]],[7,[8,9]]]
// [1,2,3,[4,5,[6]],7,[8,9]]
```

使用传播参数`Array.prototype.concat`

```
const arr =
  [ [ 1 ], [ 2, 3, [ 4, 5, [ 6 ] ] ], [ 7, [ 8, 9 ] ] ]

const flatArr =
  [].concat(...arr)

console.log(JSON.stringify(arr))
console.log(JSON.stringify(flatArr))
// [[1],[2,3,[4,5,[6]]],[7,[8,9]]]
// [1,2,3,[4,5,[6]],7,[8,9]]
```

* * *

旧版本的 JavaScript（ECMAScript 5 及更低版本）可以使用以下技术`Function.prototype.apply`-

```
var arr =
  [ [ 1 ], [ 2, 3, [ 4, 5, [ 6 ] ] ], [ 7, [ 8, 9 ] ] ]

var flatArr =
  Array.prototype.concat.apply([], arr)

console.log(JSON.stringify(arr))
console.log(JSON.stringify(flatArr))
// [[1],[2,3,[4,5,[6]]],[7,[8,9]]]
// [1,2,3,[4,5,[6]],7,[8,9]]
```

使用`Array.prototype.reduce`-

```
var arr =
  [ [ 1 ], [ 2, 3, [ 4, 5, [ 6 ] ] ], [ 7, [ 8, 9 ] ] ]

var flatArr =
  arr.reduce((r, a) => r.concat(a), [])

console.log(JSON.stringify(arr))
console.log(JSON.stringify(flatArr))
// [[1],[2,3,[4,5,[6]]],[7,[8,9]]]
// [1,2,3,[4,5,[6]],7,[8,9]]
```

使用原始`for`循环 -

```
var arr =
  [ [ 1 ], [ 2, 3, [ 4, 5, [ 6 ] ] ], [ 7, [ 8, 9 ] ] ]

var flatArr =
  []

for (var i = 0; i < arr.length; i = i + 1)
  flatArr = flatArr.concat(arr[i])

console.log(JSON.stringify(arr))
console.log(JSON.stringify(flatArr))
// [[1],[2,3,[4,5,[6]]],[7,[8,9]]]
// [1,2,3,[4,5,[6]],7,[8,9]]
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T21:23:06.637

[`concat`array 方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/concat)需要一个或多个数组作为参数，其元素将被附加：

```
[1].concat([2, 3], [4]) // [1, 2, 3, 4] 
```

因此，如果您使用[`apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)，那将变平另一个级别：

```
[].concat.apply([1], [[2], [3]]) // === [1].concat([2], [3]) 
```

因此，您可以使用`push`而不是`concat`，或`call`（或直接调用）而不是`apply`仅获得一个展平级别。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-03-25T12:48:59.147

如果你使用 ES6/ES2015，你可以使用[扩展](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator)运算符。像这样的东西

```
console.log(...[[[1],[1,2,3,[4,5],4],[2,3]]])
```

# java - 对象级和类级锁定

> ID：15099124
> 
> 赞同：1
> 
> 时间：2013-02-26T20:57:17.433
> 
> 标签：java, multithreading, locking

我发现一个代码片段可以正常工作，直到锁定处于对象级别并且当相同的锁定成为静态最终（即添加静态关键字）时，代码开始失败并出现与并发相关的错误。

在对象级别工作的锁是否应该在其范围变为静态后重新工作？我认为将锁设置为静态只会使其更具限制性，并且不应开始导致比在对象级别时更多的并发问题。我发现相反的情况正在发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:11:34.707

> 在对象级别工作的锁是否应该在其范围变为静态后重新工作？

如果您将锁从实例锁变为静态锁，则不会*导致*并发问题。您是正确的，它应该使代码更具限制性，因为将使用单个锁而不是多个实例锁。当然，这是如果有问题的锁是`static final`并且您的代码中的所有位置都适当地锁定了它。

```
public static final Object lockObject = new Object(); 
```

可能发生的情况是，移动锁发现了以前存在的错误，但应用程序计时导致它被隐藏。通过锁定一个`static`锁（或一个`static`方法），应用程序中线程的时间很可能会发生显着变化。

如果您发布有关代码或您遇到的错误的更多详细信息，我们可以提供更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:13:28.320

静态级别的锁比对象级别的锁更有可能在不同线程之间共享（以一种非常通用的方式 - 因为它取决于实际代码和所涉及的线程）。

实际上，静态锁与类相关联，换句话说，单个锁对象在所有线程之间共享。通常，当更多线程需要访问同一个锁时，如果代码中存在错误，您就越有可能遇到并发问题（如死锁和饥饿）。

概括地说，如果您在使用对象级锁时遇到并发问题，那么在将锁升级到类级别时可能会遇到更多麻烦。

# asp.net-mvc-4 - ASP.NET MVC 4 网络安全种子

> ID：15099126
> 
> 赞同：1
> 
> 时间：2013-02-26T20:57:27.050
> 
> 标签：asp.net-mvc-4, dbcontext

我有一些简单的 DbContext：

```
public class AuthContext : DbContext
{
    public AuthContext() : base("AuthContext")
    {
    }

    public DbSet<User> Users { get; set; }
} 
```

和简单的用户模型：

```
[Table("User")]
public class User
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }

    public string Login { get; set; }
} 
```

我需要的是始终或在模型创建之后将数据播种到 WebSecurity。我试过了：

```
 Database.SetInitializer(new AuthDbSeeder()); 
```

//------------------------------------------------ --------

```
 <add name="AuthContext" connectionString="Data Source=.\SQLEXPRESS; Initial Catalog=ChatAuth; Integrated Security=SSPI; MultipleActiveResultSets=True;" providerName="System.Data.SqlClient" /> 
```

`<system.web>`我补充说：

```
<roleManager enabled="true" defaultProvider="SimpleRoleProvider">
  <providers>
    <clear/>
    <add name="SimpleRoleProvider" type="WebMatrix.WebData.SimpleRoleProvider, WebMatrix.WebData"/>
  </providers>
</roleManager>
<membership defaultProvider="SimpleMembershipProvider">
  <providers>
    <clear/>
    <add name="SimpleMembershipProvider" type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData" />
  </providers>
</membership> 
```

//------------------------------------------------ --------

```
public class AuthDbSeeder : DropCreateDatabaseAlways<AuthContext>
{
    protected override void Seed(AuthContext context)
    {       
        WebSecurity.InitializeDatabaseConnection("AuthContext", "User", "UserId", "Login",
                                                         autoCreateTables: true);
        WebSecurity.CreateUserAndAccount("Sergey", "1234"); 
```

但毕竟我有错误数据库不能被删除，因为它已经在使用中。我需要一些工作方法来将数据播种到 WebSecurity。对我来说也非常重要的是：如何将我的自定义模型添加到相同的 DbContext 中，并将种子数据正确地添加到该上下文中。

还有任何想法如何对 WebSecurity 进行单元测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:54:45.813

这里有一个[关于如何播种和自定义 WebSecurity 的示例](http://kevin-junghans.blogspot.com/2013/01/seeding-customizing-aspnet-mvc.html)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T15:27:47.987

我找到了种子问题的解决方案

我重新设计了 SimpleMembershipInitializer：

```
 private class SimpleMembershipInitializer
        {
            public SimpleMembershipInitializer()
            {
                try
                {
                    WebSecurity.InitializeDatabaseConnection("AuthContext", "User", "UserId", "Login",
                                                             autoCreateTables: true);
                }
                catch (Exception ex)
                {
                    throw new InvalidOperationException("The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588", ex);
                }
            }
        } 
```

在我的种子方法调用中

```
 public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        LazyInitializer.EnsureInitialized(ref initializer, ref isInitialized, ref initializerLock);
    } 
```

以 null 作为参数。

单元测试仍然是个问题

# c# - 在设计时动态返回接口

> ID：15099128
> 
> 赞同：0
> 
> 时间：2013-02-26T20:57:46.933
> 
> 标签：c#, dynamic, fluent-interface

我正在尝试编写一个流畅的接口，该接口能够在设计时检测作为 Linq 表达式传递的属性类型，并根据对该类型的评估返回一个接口。

例如：

```
public class Searchable<Person>
{
    public Searchable()
    {
        CanSearch(x => x.Name)
            .Include(StringOperations.Contains);

        CanSearch(x => x.Age)
            .Exclude(NumericOperators.GreaterThan);
    }
} 
```

在 CanSearchMethod 中，我希望能够执行以下操作：

```
public IOperations CanSearch(Expression<Func<T, object>> expression)
{
    var type = (/* Code to pick apart expression */); 

    if(type == typeof(int))
        return new ClassImplementingINumericOperations();
    if(type == typeof(string))
        return new ClassImplementingIStringOperations();
    if(type == typeof(IEnumerable))
        return new ClassImplementingIIEnumerableOperations();

    return null;
} 
```

不同接口的 Include 和 Exclude 方法的区别仅在于作为参数接受的枚举：

```
public interface IOperations
{
}

public interface INumericOperations : IOperations
{
    INumericOperations Include(NumericOperationsEnum op);
    INumericOperations Exclude(NumericOperationsEnum op);
}

public interface IStringOperations : IOperations
{
    IStringOperations Include(StringOperationsEnum op);
    IStringOperations Exclude(StringOperationsEnum op);
}

public interface IIEnumerableOperations : IOperations
{
    IIEnumerableOperations Include(CollectionOperationsEnum op);
    IIEnumerableOperations Exclude(CollectionOperationsEnum op);
} 
```

我怀疑这是不可能的，但我不能完全解决，因为动态可以做一些时髦的魔法。

我查看了其他一些流畅的接口，但似乎没有一个评估表达式以确定在设计时返回什么类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:11:00.480

您可以使用重载通过编译时类型安全来做到这一点：

```
public IStringOperations CanSearch<T>(Expression<Func<T, string>> expression);
public IIEnumerableOperations<TItem> CanSearch<T, TItem>(Expression<Func<T, IEnumerable<TItem>> expression); 
```

但是，对于数字类型，您需要为 7 种数字类型中的每一种都单独重载，或者需要一个泛型`INumericOperations<TNumber>`，这会令人讨厌地不灵活。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:12:19.983

您可以利用重载和类型推断。像这样的东西：

```
IStringOperations CanSearch(
    Expression<Func<T, string>> expression)
{ /* ... */ }

INumericOperations CanSearch<TCompare>(
    Expression<Func<T, TCompare>> expression)
    where TCompare : IComparable<TCompare>
{ /* ... */ }

IIEnumerableOperations CanSearch<TSeq>(
    Expression<Func<T, IEnumerable<TSeq>>> expression)
{ /* ... */ } 
```

现在，`CanSearch(x => x.Name)`将返回一个`IStringOperations`while`CanSearch(x => x.Age)`将返回一个`INumericOperations`对象。

# sublimetext2 - sublime text 2 有链接创建器吗？（例如手动设置：fn1 因为 X 原因被 fn2 调用）

> ID：15099133
> 
> 赞同：1
> 
> 时间：2013-02-26T20:58:03.773
> 
> 标签：sublimetext2

sublime text 2 有链接创建器吗？

例如手动设置：fn1 由于 X 原因被 fn2 调用

我想知道谁在我的项目内部（也可能在外部）调用此方法以及为什么调用此方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:39:33.967

这取决于编程语言。不幸的是，了解被调用者需要对源代码进行完整的编译和分析，即使这样也不总是可能的。这不仅限于 Sublime，这个问题在别处讨论。

静态编译的语言，如 C，是否可以进行静态分析，这可以使用 CTags [https://github.com/SublimeText/CTags等现有插件完成](https://github.com/SublimeText/CTags)

由于语言的性质，PHP、Python 和 Ruby 等动态语言无法获得这样的功能，因为您只能在运行时解析对象 (this) 的内容。

您可以手动提取类型和呼叫信息。在这篇（我的）博客文章中，一个项目创建 .sublime-complete 文件：

[http://opensourcehacker.com/2013/03/04/javascript-autocompletions-and-having-one-for-sublime-text-2/](http://opensourcehacker.com/2013/03/04/javascript-autocompletions-and-having-one-for-sublime-text-2/)

# java - PApplet内存增加..！

> ID：15099138
> 
> 赞同：1
> 
> 时间：2013-02-26T20:58:30.707
> 
> 标签：java, memory

我有一个与我的`PApplet`对象相关的相当严重的内存问题。我相信，我正在适当地对它们进行`destroy()`ing 和`stop()`ing，但是每次调用 时`PApplet`，对象内存都会继续增加。

任何帮助找出原因将不胜感激。

下面是我的程序层次结构：

```
// This button is component of MAIN JFRAME 
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) { 
    TechnicPicForm tech=new TechnicPicForm ();
    tech.setVisible(true);
} 
```

* * *

```
public class TechnicPicForm extends javax.swing.JFrame {        

     private createHexMirror crm;

     /**
     * Creates new form ResultForm
     */
    public TechnicPicForm() {
        crm = new createHexMirror(12,4.3,324,45,1);
        crm.init();
        this.setIconImage(new ImageIcon("images/logokanat.png").getImage());

        initComponents();
        jPanel1.add(crm);
}

    @SuppressWarnings("unchecked")
    Generated Code
    ------------Code for Init Components------------- 
    ---------------------------------------------------------------
    private void formWindowClosing(java.awt.event.WindowEvent evt) {                                   
        // TODO add your handling code here:
        crm.destroy();
    }                                  
} 
```

* * *

```
import processing.pdf.*;
import processing.core.*;

public class createHexMirror extends PApplet {

   private float outC,littlePipeC,triangleLine,mirrorC ;
   private int mode;

    public createHexMirror(float outC, float littlePipeC , float triangleLine, float mirrorC , int mode) {
        this.outC= outC;
        this.littlePipeC = littlePipeC ;
        this.triangleLine= triangleLine;
        this.mirrorC = mirrorC;
        pmode = mode;
    }

    @Override
    public void setup() {
        noLoop();
        size(1000, 650);
        background(255);
    }

    public void draw() {

    ----------------SOME DRAW CODES------------------------
    }
} 
```

# maven-3 - 无法将我的 Maven 转换为 Eclipse

> ID：15099145
> 
> 赞同：2
> 
> 时间：2013-02-26T20:58:50.247
> 
> 标签：maven-3

拜托，我是 Maven 新手，正在尝试构建我的第一个 Maven 项目。所以，我做了以下几件事：

从我的命令行进入我创建的名为 MavenProject 的目录： mvn archetype:generate 然后选择一个数字来应用数字，然后我输入 15；选择 com.dyuproject.protostuff.archetype:basic-webapp 版本：我选择了 1.0.7 版本 groupId: com.henry artifactId: HibernateTest 其余的，我刚进入..

并且该项目已创建，但随后我输入了 mvn eclipse:eclipse，我收到一个错误，即没有 pom.xml 文件，即使我可以看到我的 mavenProject 中有一个文件。所以，我进入了 HibernateTest 目录，在那个目录中，我再次尝试了 mvn eclipse:eclipse 命令，但这一次，它给出了错误：

```
Plugin com.dyuproject.protostuff:protostuff-maven-plugin:1.0.2-SNAPSHOT or one of its 
dependencies could not be resolved: Failed to read artifact descriptor for 
com.dyuproject.protostuff:protostuff-maven-plugin:jar:1.0.2-SNAPSHOT: Could not find artifact 
com.dyuproject.protostuff:protostuff-maven-plugin:pom:1.0.2-SNAPSHOT 
```

我试图通过访问 mvnrepository.com 来解决这个问题，并找到了 protostuff maven 并添加了依赖项，但仍然无法解决。这是我的 pom.xml 文件：

pom.xml

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLS$
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_$
    <parent>
    <artifactId>Hibernate</artifactId>
    <groupId>com.henry</groupId>
    <version>1.0-SNAPSHOT</version>
    <relativePath>../pom.xml</relativePath>
     </parent>
      <modelVersion>4.0.0</modelVersion>
       <groupId>com.henry</groupId>
       <artifactId>Hibernate-model</artifactId>
       <name>Hibernate :: model</name>
       <packaging>jar</packaging>

       <build>
      <defaultGoal>install</defaultGoal>
     <plugins>
    <plugin>
    <groupId>com.dyuproject.protostuff</groupId>
    <artifactId>protostuff-maven-plugin</artifactId>
    <version>${protostuff.version}</version>
    <configuration>
    <protoModules>
        <protoModule>
          <source>src/main/resources/com/henry/model/model.proto</source>
          <outputDir>src/main/java</outputDir>
          <output>java_bean</output>
          <encoding>UTF-8</encoding>
          <options>
            <property>
              <name>generate_field_map</name>
            </property>
            <property>
              <name>separate_schema</name>
            </property>
            <property>
              <name>builder_pattern</name>
            </property>
            <property>
              <name>generate_helper_methods</name>
            </property>
          </options>
        </protoModule>
        </protoModules>
    </configuration>
    <executions>
      <execution>
        <id>generate-sources</id>
        <phase>generate-sources</phase>
        <goals>
          <goal>compile</goal>
        </goals>
      </execution>
    </executions>
  </plugin>
</plugins>
 </build>

  <dependencies>
  <dependency>
  <groupId>com.dyuproject.protostuff</groupId>
  <artifactId>protostuff-core</artifactId>
  </dependency>
   <dependency>
    <groupId>com.dyuproject.protostuff</groupId>
    <artifactId>protostuff-maven-plugin</artifactId>
    <version>1.0.7</version>
   </dependency>
   <dependency>
   <groupId>com.dyuproject.protostuff</groupId>
   <artifactId>protostuff-codegen</artifactId>
   <version>1.0.7</version>
   </dependency>
   <dependency>
   <groupId>com.dyuproject.protostuff</groupId>
   <artifactId>protostuff-core</artifactId>
</dependency>
<dependency>
    <groupId>com.dyuproject.protostuff</groupId>
    <artifactId>protostuff-maven-plugin</artifactId>
    <version>1.0.7</version>
  </dependency>
  <dependency>
   <groupId>com.dyuproject.protostuff</groupId>
   <artifactId>protostuff-codegen</artifactId>
  <version>1.0.7</version>
  </dependency>
  <dependency>
  <groupId>com.dyuproject.protostuff</groupId>
  <artifactId>protostuff-compiler</artifactId>
   <version>1.0.7</version>
   </dependency>
   </dependencies>

 </project> 
```

任何帮助将不胜感激。对不起，我是新手：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T09:48:21.590

首先尝试在命令行上构建项目：`mvn install`. 那应该会成功。

但它看起来不会，因为它正在寻找`${protostuff.version}`. 当我[查看](http://search.maven.org/#search|gav|1|g%3A%22com.dyuproject.protostuff%22%20AND%20a%3A%22protostuff-maven-plugin%22)Maven 中央存储库时，实际上只有发布版本（应该如此）。你必须以某种方式解决这个问题，可能在你的父项目中。

POM 文件应位于项目的根目录中并名为`pom.xml`. 您在其中找到名为的 POM 文件`pom.xml`是项目的根目录 :)

仅`eclipse:eclipse`作为最后的手段使用。如果您可以自由选择 Eclipse，并且在您的 Maven 项目中没有魔法，您应该能够使用[m2e (m2eclipse) Eclipse 插件](http://eclipse.org/m2e/)。

这是一个 Eclipse 插件，而不是 Maven 插件，因此在命令行上不需要额外的步骤。只需进入 Eclipse，确保已[安装](http://eclipse.org/m2e/download/)m2e 插件。然后导入您的项目（导入，“现有 Maven 项目”）。

Eclipse 自己记账所需的所有文件都应在导入时创建并基于 POM 文件。即`.classpath`，`.project`和`.settings`（文件夹）。如果您在导入 Eclipse 之前有任何这些，最好删除它们（它们可能是您`eclipse:eclipse`尝试的残余。

# regex - 正则表达式：查找一位数

> ID：15099150
> 
> 赞同：19
> 
> 时间：2013-02-26T20:59:07.207
> 
> 标签：regex

我需要找到所有一位数字的文本。

我的代码：

```
$string = 'text 4 78 text 558 my.name@gmail.com 5 text 78998 text';
$pattern = '/ [\d]{1} /'; 
```

（结果：4 和 5）

一切正常，只是想问使用空格是否正确？也许还有其他方法可以区分一位数。

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-26T21:03:55.737

首先，`[\d]{1}`等价于`\d`。

至于您的问题，最好使用零宽度断言，例如[后向/前瞻](http://www.regular-expressions.info/lookaround.html)或单词边界（`\b`）。否则，您将不会匹配连续的单个数字，因为第二个数字的前导空格将与第一个数字的尾随空格匹配（并且不会找到重叠匹配）。

这是我将如何写这个：

```
(?<!\S)\d(?!\S) 
```

这意味着“仅当数字之前没有非空白字符且其后没有非空白字符时才匹配数字”。

我使用了双重否定，`(?!\S)`而不是`(?=\s)`这样你也将匹配字符串开头或结尾的单个数字。

对于你的例子，我更喜欢这个，`\b\d\b`因为看起来你真的只想在数字被空格包围时匹配，并且`\b\d\b`会匹配字符串中的`4`和`5``192.168.4.5`

要在末尾允许标点符号，您可以使用以下内容：

```
(?<!\S)\d(?![^\s.,?!]) 
```

在字符类的数字之后添加您希望允许的任何其他标点字符（在方括号内，但确保它在 之后`^`）。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-26T21:01:58.080

使用[单词边界](http://www.regular-expressions.info/wordboundaries.html)。请注意，范围量词`{1}`（单个`\d`将只匹配一个数字）和字符类`[]`是多余的，因为它只包含一个字符。

```
\b\d\b 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-26T21:01:33.543

搜索单词边界：

```
\b\d\b 
```

正如其他人所解释的那样，这将提取单个数字，这意味着某些特殊字符可能不被尊重，例如“。” 在一个 IP 地址中。要解决这个问题，请参阅 FJ 和 Mike Brant 的回答。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T21:05:32.130

这实际上取决于数字可以出现在哪里以及您是否关心它们是否与其他字符相邻（例如`.`在句子的末尾）。至少，我会使用单词边界，以便您可以在输入字符串的开头和结尾获取数字：

```
$pattern = '/\b\d\b/'; 
```

但您可能会在结尾考虑标点符号，例如：

```
$pattern = '/\b\d(\b|\.|\?|\!)/'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-07T22:31:18.350

如果一位数字前面或后面可以跟数字以外的字符（例如，`"a1 cat"`或`"Call agent 7, pronto!"`），请使用

```
(?<!\d)\d(?!\d) 
```

[演示](https://regex101.com/r/sN8xFv/1)

正则表达式读取，匹配一个`\d`既不是在数字之前也不是在数字之后的数字 ()，是`(?<!\d)`一个*否定的lookbehind*和`(?!\d)`一个*否定的lookahead*。

# delphi - 在 Delphi 中使用条码扫描器

> ID：15099151
> 
> 赞同：4
> 
> 时间：2013-02-26T20:59:12.510
> 
> 标签：delphi, delphi-xe2, barcode-scanner, point-of-sale, keypreview

我正在开发一个 POS（宠物项目），我正在考虑添加一个条形码扫描仪以更快地捕获销售。我现在没有扫描仪，想问一些问题，因为我有点卡住了。

在销售屏幕上，我最初的想法是有一个`TEdit`组件，当一个人扫描产品时，它会`TEdit`用字符串填充。现在我遇到的问题是我想让它`TEdit`不可见，这样人就看不到它。但是一旦你把它变成`TEdit`隐形的，你就不能把注意力集中在它上面，所以这个计划就行不通了。

那么谁能建议我可以用什么来“捕获”扫描的字符串？我如何让组件监听并等待扫描仪？我假设扫描仪就像一个普通的键盘事件，比如按下或按下按钮。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T17:28:47.427

TForm 上有[KeyPreview](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Forms.TCustomForm.KeyPreview)属性。将其设置为 true，因此所有按键都在控件之前由表单处理。

Delphi中关于键盘处理的文章：http: [//delphi.about.com/od/objectpascalide/a/keyboard_events.htm](http://delphi.about.com/od/objectpascalide/a/keyboard_events.htm)

相关的 SO 问题：[Delphi 的 KeyPreview 是如何工作的？](https://stackoverflow.com/questions/6509242/how-does-delphis-keypreview-work)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-27T18:00:09.117

我所做的是使用 KeyPreview 来监视像 F9 这样的功能键，条形码扫描仪设置为扫描前缀。收到此信息后，我会弹出一个带有单个编辑框和确定按钮的对话框。然后它会接收其余的条形码信息，扫描仪会使用 Enter 键结束输入。然后我可以确定扫描数据的用途（在我的情况下，一种类型以前缀开头），然后将数据放入主表单上的适当字段中。

我选择 F9 是因为它在大多数应用程序中似乎是惰性的，因此您可以以其他方式使用扫描仪，但我也支持其他键以提高灵活性。我的应用程序还有一个扫描仪测试模式，它显示发送的密钥。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T10:38:05.780

您可以使用高度和宽度为 0 的 TEdit，这样它就不会出现，并确保它在您扫描条形码时获得焦点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-07T16:59:38.120

You can also place the TEdit outside of the visible window, setting the component's Top and Left properties to something like -50\. You can then set focus to it just like a regular visible TEdit box, but it will be invisible to the user.

# sql - 最后修改者字段和外键

> ID：15099155
> 
> 赞同：1
> 
> 时间：2013-02-26T20:59:26.540
> 
> 标签：sql, foreign-keys, foreign-key-relationship

在 SQL Server 2012 中，我有一个 User 表来存储应用程序用户。我还有一个包含 LastModifiedBy 字段的组织表，我想在其中存储最后一个人的用户 ID，以通过 ASPX 页面修改表中的值。我应该在 Users 表中的 LastModifiedBy 字段和 UserID 字段之间创建外键关系吗？

我还想将 LastModifiedBy 字段添加到用户表本身。我应该/可以在这个表上创建一个自引用外键约束吗？如果这是可能的，这是一个可怕的想法吗？

任何关于创建这些外键约束的利弊的观点将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:27:04.310

您所描述的是外键的用途。这些外键是关系数据库的核心。即使它们在插入新行时可能会对性能产生轻微影响，因为它必须检查引用的键是否存在，也不应该避免。

# jquery - jQuery .next 和伪选择器

> ID：15099161
> 
> 赞同：2
> 
> 时间：2013-02-26T21:00:04.410
> 
> 标签：jquery

**简短的问题：**是否有等效的`$this.nextAll().filter(':visible').eq(0)`in`.next`或`.nextUntil`jQuery 函数？

**场景：**我有 3 里，其中隐藏了 2 里。现在我如何选择第三个什么`li`时候`this``#test`

```
<ul>
    <li id="test">Item 1</li> <!-- From this li -->
    <li style="display: none">Item 2</li>
    <li>Item 3</li> <!-- Select this li using :visible -->
</ul> 
```

**演示：http:** [//jsfiddle.net/LgCuk/1/](http://jsfiddle.net/LgCuk/1/)

**注意：**上面只是一个例子，实际列表很大，元素是随机隐藏的。所以我正在寻找可以选择下一个可见的东西`li`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:11:31.330

使用`.next()`and`.nextUntil()`将允许您不必遍历整个列表，并且会在找到第一个匹配项时停止 ( `.nextUntil()`)，然后选择您想要的元素 ( `.next()`)。它比直的便宜`.nextAll()`。

```
var $this = $('#test');
$this.nextUntil(':visible').next().css('color', 'red'); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/LgCuk/4/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:02:42.530

怎么样

```
$this.nextAll(':visible:first') 
```

[**演示**](http://jsfiddle.net/mowglisanu/LgCuk/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:06:00.493

对不起，你是对的。我原来的帖子不正确。不过，这应该可以按您的意愿工作。

```
$(document).ready(function(){
$('li').each(function(index){
    if($(this).is(":visible")){
    alert(index + $(this).text());
    }
}); 
```

});

# javascript - 用于按名称元素更改输入值的 Javascript 简单脚本

> ID：15099164
> 
> 赞同：0
> 
> 时间：2013-02-26T21:00:18.987
> 
> 标签：javascript, html

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:30:43.210

对于初学者，您[不能拥有多个具有相同`id`value](http://www.w3.org/TR/html401/struct/global.html#h-7.5.2)的元素，因此您`id="changer"`必须进行更改。我会提议`class="changer"`。

**编辑：**我实际上给了他们唯一的 ID，因此您可以在固定代码中查找它们以获取检索其属性的复杂方法。如果您希望他们共享 css 或 javascript 定位的通用规则，我仍然建议使用`class="changer"`.

我想你想要的是这样的：

1.  用户单击链接。
2.  不同元素的背景变化
3.  它更改为什么取决于`name`单击链接的属性中的内容。

如果那是准确的，那么，我什至不知道如何在没有 jquery 的情况下干净地做到这一点。试试这个html：

```
<a href="#" id="changer1" name="images/examples/1.jpg" onclick="change_bg(document.getElementById('changer1'))"><u>Example 1 Red</u></a><br />
<a href="#" id="changer2" name="images/examples/2.jpg" onclick="change_bg(document.getElementById('changer2'))"><u>Example 2 Blue</u></a><br /> 
```

这对于 javascript

```
function change_bg(elem){
    document.getElementById('button_bg').value = elem.name;
}
function change_bg_hover(elem){
    document.getElementById('button_bg').value = elem.name;
} 
```

小提琴：http: [//jsfiddle.net/aGCNn/](http://jsfiddle.net/aGCNn/)

询问如何使用 jQuery 进行操作，您会喜欢答案的。我保证！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:23:07.807

我做了一个可以工作的小提琴[http://jsfiddle.net/juzVG/2/](http://jsfiddle.net/juzVG/2/) 请检查这是否是你想要的。

我还对代码做了一些修改。

```
<a href="#" id="changer" name="images/examples/1.jpg" onclick="change_bg();return false;">Example 1 Red</a><br />
<a href="#" id="changer" name="images/examples/2.jpg" onclick="change_bg();return false;">Example 2 Blue</a><br />

<b>Show/Hide HOVERED Background examples list</b><br />
<a href="#" id="changer" name="images/examples/1_hovered.jpg" onclick="change_bg_hover();return false;">Example 1 Blue Hover</a><br />
<a href="#" id="changer" name="images/examples/2_hovered.jpg" onclick="change_bg_hover();return false;">Example 2 Red Hover</a><br /> 
```

# java - 在 JSON 请求中发送列表

> ID：15099167
> 
> 赞同：5
> 
> 时间：2013-02-26T21:00:45.587
> 
> 标签：java, json, spring, spring-mvc

我将 JSON 中的几个“字段”和“列表”发送到 Spring MVC 控制器，如下所示：

```
 var data = {
        'message' : 'Text data',
        '**listOfIds**' : '350234983, 378350950',

        'synchronizerToken' : formTokenId

};

$.ajax({
        url : 'testURL.do',
        type : 'post',
        data : data,
        cache : false,
        dataType : 'json',

        success : function (jsonResponse) {},

        error : function (error) {}
}); 
```

在 Spring MVC 控制器中，URL 处理程序如下所示：

```
 @RequestMapping(value = "/testURL.do", method = RequestMethod.POST)
public ModelAndView executeTest( ListData listData) {
        ModelAndView    modelAndView    = null;
        JsonResponse    jsonResponse    = null;

        modelAndView    = executeTransaction(listData);
        } 

        return modelAndView;
    }

ListData.java

public class ListData{
    private String          message;
    private List<String>    **listOfIds** = new ArrayList<String>();   

//getter/setters 
```

问题是**listOfIds**没有作为列表返回。它以单个字符串**'350234983, 378350950' 的形式返回**

任何人都可以建议这里是否有任何问题，或者有没有更好的方法来接收 JSON 响应中的列表？

谢谢，-方达

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T21:02:40.610

使 listOfIds 成为字符串数组而不是单个字符串。

```
'listOfIds' : ['350234983', '378350950'], 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:12:17.923

1.)

```
Add gson jar 

import com.google.gson.Gson;//import

Gson gson = new Gson();//create instance

gson.toJson(ListData);//convert it to json 
```

2.)

定义下面的 bean 从控制器返回 jsonView。

```
<bean name="jsonView" class="org.springframework.web.servlet.view.json.JsonView"/> 
```

控制器

```
import org.springframework.ui.ModelMap;

@RequestMapping(value = "/testURL.do", method = RequestMethod.POST)
public String executeTest(ModelMap model, ListData listData) {
    ModelAndView    modelAndView    = null;
    JsonResponse    jsonResponse    = null;
    modelAndView    = executeTransaction(listData);
    model.addAttribute("paramName", modelAndView);
    } 

    return "jsonView";
} 
```

ajax的变化

```
$.ajax({
    url : 'testURL.do',
    type : 'post',
    data : data,
    cache : false,
    dataType : 'json',

    success : function (jsonResponse) {
       var jsonValue = $.parseJSON(jsonResponse.paramName);
    },

    error : function (error) {}
}); 
```

mvc-servlet.xml 中的viewsResolver 配置

```
<bean class="org.springframework.web.servlet.view.XmlViewResolver">
   <property name="location">
       <value>/path/views.xml</value>
   </property>
</bean> 
```

# .net - ServiceStack 异常：尝试将条目插入 SqlLite db 时出现“未找到请求的处理程序”

> ID：15099171
> 
> 赞同：1
> 
> 时间：2013-02-26T21:01:04.190
> 
> 标签：.net, web-services, servicestack, ormlite-servicestack

我只是在学习如何使用 ServiceStack，但遇到了一个我无法通过的异常，并且不确定是什么导致了异常。这里是：

```
Handler for Request not found:    

Request.ApplicationPath: /
Request.CurrentExecutionFilePath: /entry/5/11-11-2012
Request.FilePath: /entry/5/11-11-2012
Request.HttpMethod: GET
Request.MapPath('~'): C:\Projects\Tutorials\FirstServiceStackApp\FirstServiceStackApp\
Request.Path: /entry/5/11-11-2012
Request.PathInfo: 
Request.ResolvedPathInfo: /entry/5/11-11-2012
Request.PhysicalPath: C:\Projects\Tutorials\FirstServiceStackApp\FirstServiceStackApp\entry\5\11-11-2012
Request.PhysicalApplicationPath: C:\Projects\Tutorials\FirstServiceStackApp\FirstServiceStackApp\
Request.QueryString: 
Request.RawUrl: /entry/5/11-11-2012
Request.Url.AbsoluteUri: http://localhost:52920/entry/5/11-11-2012
Request.Url.AbsolutePath: /entry/5/11-11-2012
Request.Url.Fragment: 
Request.Url.Host: localhost
Request.Url.LocalPath: /entry/5/11-11-2012
Request.Url.Port: 52920
Request.Url.Query: 
Request.Url.Scheme: http
Request.Url.Segments: System.String[]
App.IsIntegratedPipeline: True
App.WebHostPhysicalPath: C:\Projects\Tutorials\FirstServiceStackApp\FirstServiceStackApp
App.WebHostRootFileNames: [entry.cs,entryservice.cs,firstservicestackapp.csproj,firstservicestackapp.csproj.user,global.asax,global.asax.cs,packages.config,recordipfilter.cs,statusquery.cs,statusservice.cs,web.config,web.debug.config,web.release.config,app_data,bin,obj,properties,scripts,x64,x86]
App.DefaultHandler: metadata
App.DebugLastHandlerArgs: GET|/entry/5/11-11-2012|C:\Projects\Tutorials\FirstServiceStackApp\FirstServiceStackApp\entry\5\11-11-2012 
```

我正在学习 John Sonmez 关于 ServiceStack 的优秀 Pluralsight 课程，并且刚刚将 OrmLite 部分添加到我的项目中。当我尝试添加新条目时会引发此异常。所以我的 App_Data 文件夹中还没有 SqlLite 文件，也没有创建任何文件。当我尝试调试时，它并没有破坏代码，所以不知道在哪里寻找这个......

**编辑：添加了相关的源代码：**

```
[Route("/entry/{Amount}/{EntryTime}", "POST")]
public class Entry { ... }

public class EntryService : Service 
{ 
    public TrackedDataRepository TDRepository { get; set; } 

    public object Any(Entry request) 
    { 
        var id = TDRepository.AddEntry(request); 
        return new EntryResponse {Id = id}; 
    } 
} 
```

**解决方案：**

删除路由定义上的**POST**过滤器，使其适用于所有路由：

```
[Route("/entry/{Amount}/{EntryTime}")] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:21:51.537

嗯 - 不确定这是 OrmLite 问题。如果我正确理解异常消息，则暗示您没有包含正确方法的“服务类**”。在这种情况下，由于 HttpMethod 是 Get，您的服务类需要有一个 Get（或 Any）方法。

你有一个像下面这样的“服务类”。

```
public class EntryService : Service //make sure inheriting from Service or RestServiceBase<Entry> 
{
    public object Get(Entry request)
    {
        //handle request here
    }
} 
```

**更新 1：** 您还需要正确“路由”您的 Entry 类。在您的情况下，由于您要添加 2 个参数（/5/11-11-2012），因此您需要 2 个路由参数（或一个带有通配符的参数）。

```
[Route("/Entry/{P1}/{P2}")] //or use /Entry/{P1*} to use wildcard
public class Entry
{
    public string P1 {get; set;}
    public string P2 {get; set;}
} 
```

**service 类是您的类，它继承自 Service/RestServiceBase，它是“处理”您的请求（在本例中为 Entry）并返回您的响应（通常遵循 {request}Response eg.EntryResponse 的名称约定）的类。

# cakephp - CakePHP：限制组中的数量

> ID：15099175
> 
> 赞同：1
> 
> 时间：2013-02-26T21:01:26.383
> 
> 标签：cakephp

我正在创造一种游戏，我希望人们能够建造一座城镇。
每个用户只能在他们的城镇中建造有限数量的特定建筑物（即只有 2 个邮局、1 个市政厅等）。
我正在为如何实现这一点而苦苦挣扎。

我有一个 UserBuildings 表来跟踪用户/建筑物关联、一个 Buildings 表和一个 User 表。

在我将建筑物添加到我的城市的表单上，我想首先检查建筑物的限制，如果达到，则将其从可用建筑物列表中省略。这是我所拥有的：

```
$buildings = $this->UserBuildings->Buildings->find('list');
$currents = $this->UserBuildings->find('all', array(
    'conditions'=> array(
        'UserBuildings.user_id'=>$this->Auth->user('id')
    )
)); 
```

我可以从 $currents 数组中获得限制。

有没有一种方法，通过查找和查询，我可以在我的 $buildings 列表中添加一些条件，以删除任何已达到容量的条目。

显然，我可以通过循环运行比较，`for`并通过根据 UserBuildings 表中匹配条目的数量检查容量来构建更精确的列表，但是是否有更优雅的方法，也许使用 CakePHP 自己的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:28:49.317

只需计算用户拥有多少个类型的建筑物。通过添加新建筑物，您应该已经知道它的 ID 和其他数据。

假设这是 ja 连接表：

```
$count = $this->UserBuildings->find('count', array(
    'conditions'=> array(
        'UserBuildings.building_id'=>$buildingId,
        'UserBuildings.user_id'=>$this->Auth->user('id')
    )
)); 
```

然后，您可以简单地将计数与您对该建筑物的限制进行比较。顺便说一句，所有这些都应该在模型中发生。

# php - PDO PHP - 查找 2 个日期之间的所有行 - 显示空白

> ID：15099187
> 
> 赞同：1
> 
> 时间：2013-02-26T21:02:03.857
> 
> 标签：php, mysql, pdo, between

使用 PDO php 我试图获取我的数据库表中在当前一周内具有 start_date 的所有行。要计算本周的第一个和最后一个日期，我使用以下命令：

```
$week_start = date('d-m-Y',time()+( 1 - date('w'))*24*3600);  
$week_end =  date('d-m-Y',time()+( 7 - date('w'))*24*3600); 
```

然后在我的 pdo 查询中，我有：

```
$query = " 
    SELECT 
        *
    FROM 
        bookings as bb 
    INNER JOIN 
        reservation as br ON bb.booking_id=br.bookings_id
    INNER JOIN 
        cars as bc ON br.car_id=bc.car_id 
    WHERE 
        payment_success=1 AND 
        is_block=false AND 
        is_deleted=0 AND
        DATE_FORMAT(start_date, '%d-%m-%Y') 
        BETWEEN '".$week_start."' AND '".$week_end."'
"; 

try { 
    $stmt = DB::get()->prepare($query); 
    $stmt->execute(); 

    $rows = $stmt->fetchAll();
}  
catch(PDOException $ex) { 
    die("Failed to run query: " . $ex->getMessage()); 
} 

foreach($rows as $row):
    $row['booking_id'] etc...
endforeach; 
```

问题是我没有在输出中显示任何行，尽管有多个预订的开始日期在本周内

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:09:50.880

`DATE_FORMAT()`返回一个字符串，而不是日期。将 3 个字符串参数传递给`BETWEEN`... 谁知道会返回什么。

要取消您的代码，请使用：

```
$week_start = date('Y-m-d',time()+( 1 - date('w'))*24*3600);  
$week_end =  date('Y-m-d',time()+( 7 - date('w'))*24*3600); 
```

以 mySQL 期望的方式格式化您的日期，并且：

```
WHERE 
  start_date BETWEEN '".$week_start."' AND '".$week_end."' 
```

在查询中。

或者，如果您更喜欢面向对象的方法，请执行以下操作：

```
$week_start = new DateTime; 
$week_end = new DateTime;
$week_start->setTimestamp(time()+( 1 - date('w'))*24*3600)); 
$week_end->setTimestamp(time()+( 7 - date('w'))*24*3600); 
```

然后在您的查询中执行：

```
WHERE 
  start_date 
      BETWEEN '".$week_start->format('Y-m-d')."'
      AND '".$week_end->format('Y-m-d')."' 
```

然后对于其他所有内容，您可以按照自己的意愿回显格式：

```
echo $date->format('d-m-Y'); // etc 
```

# sql - Oracle 行差异

> ID：15099190
> 
> 赞同：-2
> 
> 时间：2013-02-26T21:02:21.390
> 
> 标签：sql, database, oracle, oracle10g

我有一个像这样的 EMPLOYEE_AUDIT 表

```
 Employee_id Revision First_name  Last_Name  Gender    Position
   1           1        David       Hem        Male      Developer
   1           2        David       Hem        Male      Manager
   1           3        David       Alter      Male      Manager
   2           1        Agatha      Christie   Female    Business Analyst
   2           2        Agatha      Christie   Female    Group Manager
   2           3        Agatha      Christie   Female    General Manager 
```

我需要一个带有这样输出的sql查询

```
 Column_name   employee_id Revision Old_Value         new_value
   Position      1           2        Developer         Manager
   Last_name     1           3        Hem               Alter
   Position      2           2        Business Analyst  Group Manager
   Position      2           3        Group Manager     General Manager 
```

我们使用的是 oracle 10g，因此请忽略 11g 的特性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:26:35.823

不一定是最漂亮的 SQL，但这将使用非常通用的`CASE`逻辑来完成。
由于它是一个审计表，因此它假定修订中没有空白以简化事情。

```
SELECT 
 CASE
   WHEN ea1."First_name" <> ea2."First_name" THEN 'First_Name' 
   WHEN ea1."Last_Name"  <> ea2."Last_Name"  THEN 'Last_Name' 
   WHEN ea1."Gender"     <> ea2."Gender"     THEN 'Gender' 
   WHEN ea1."Position"   <> ea2."Position"   THEN 'Position' END "Column_name",
 ea2."Employee_id", ea2."Revision",
 CASE
   WHEN ea1."First_name" <> ea2."First_name" THEN ea1."First_name" 
   WHEN ea1."Last_Name"  <> ea2."Last_Name"  THEN ea1."Last_Name" 
   WHEN ea1."Gender"     <> ea2."Gender"     THEN ea1."Gender" 
   WHEN ea1."Position"   <> ea2."Position"   THEN ea1."Position" END "Old_Value",
 CASE
   WHEN ea1."First_name" <> ea2."First_name" THEN ea2."First_name" 
   WHEN ea1."Last_Name"  <> ea2."Last_Name"  THEN ea2."Last_Name" 
   WHEN ea1."Gender"     <> ea2."Gender"     THEN ea2."Gender" 
   WHEN ea1."Position"   <> ea2."Position"   THEN ea2."Position" END "New_Value"
 FROM EMPLOYEE_AUDIT ea1
 JOIN EMPLOYEE_AUDIT ea2
   ON ea1."Employee_id" = ea2."Employee_id"
  AND ea1."Revision" = ea2."Revision" -1 
```

[一个用于测试的 SQLFiddle](http://sqlfiddle.com/#!4/e1569/1)。

编辑：既然你问了，这是一个使用的版本`LAG`，没有很大的改进；

```
WITH cte AS (
  SELECT "Employee_id", "Revision", "First_name" fn, "Last_Name" ln,
  "Gender" g, "Position" p, 
  LAG("First_name", 1) OVER 
      (PARTITION BY "Employee_id" ORDER BY "Revision") fn2, 
  LAG("Last_Name", 1)  OVER 
      (PARTITION BY "Employee_id" ORDER BY "Revision") ln2,
  LAG("Gender", 1)  OVER 
      (PARTITION BY "Employee_id" ORDER BY "Revision") g2, 
  LAG("Position",1) OVER 
      (PARTITION BY "Employee_id" ORDER BY "Revision") p2
  FROM EMPLOYEE_AUDIT
)
SELECT 
 CASE
   WHEN fn <> fn2 THEN 'First_Name' WHEN ln <> ln2 THEN 'Last_Name' 
   WHEN g  <> g2  THEN 'Gender' WHEN p  <> p2  THEN 'Position' 
 END "Column_name", "Employee_id", "Revision",
 CASE
   WHEN fn <> fn2 THEN fn2 WHEN ln <> ln2 THEN ln2 
   WHEN g  <> g2  THEN g2  WHEN p  <> p2  THEN p2
 END "Old_Value",
 CASE
   WHEN fn <> fn2 THEN fn  WHEN ln <> ln2 THEN ln 
   WHEN g  <> g2  THEN g   WHEN p  <> p2  THEN p 
 END "New_Value"
FROM cte
WHERE fn2 IS NOT NULL; 
```

[另一个 SQLfiddle](http://sqlfiddle.com/#!4/138b4/1)。

# c# - XDocument 到对象列表

> ID：15099197
> 
> 赞同：1
> 
> 时间：2013-02-26T21:02:49.733
> 
> 标签：c#, .net, xml, linq-to-xml

XDocument 的内容是下面的 XML。

我想要一个 List()，请参阅此消息的末尾。

```
<myXml>
  <myDatas code="01">
    <myVar name="myvar" value="A" />
    <myData name="A" value="A1" />
    <myData name="B" value="B1" />
  </myDatas>
  <myDatas code="02">
    <myVar name="myvar" value="B" />
    <myData name="A" value="A2" />
    <myData name="D" value="D2" />
  </myDatas>
</myXml>

public class MyData
{
    public string MainCode { get; set; }
    public string Code { get; set; }
    public string Value { get; set; }
} 
```

我想要一个 List() 这个内容应该是这样的：

```
new MyData { MainCode = "01"; Code = "A"; Value = "A1" };
new MyData { MainCode = "01"; Code = "B"; Value = "B1" };
new MyData { MainCode = "02"; Code = "A"; Value = "A2" };
new MyData { MainCode = "02"; Code = "D"; Value = "D2" }; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T21:06:12.197

当然 - 所以你需要这样的东西：

```
var query = from datas in doc.Root.Elements("myDatas")
            let code = (string) datas.Attribute("code")
            from data in datas.Elements("myData")
            select new MyData {
                MainCode = code,
                Code = (string) data.Attribute("name"),
                Value = (string) data.Attribute("value"),
            };

var list = query.ToList(); 
```

请注意多个`from`子句以使结果变平。

另一种选择是只找到所有“叶子”元素并从父元素中获取代码部分：

```
var query = from data in doc.Descendants("myData")
            select new MyData {
                MainCode = (string) data.Parent.Attribute("code"),
                Code = (string) data.Attribute("name"),
                Value = (string) data.Attribute("value"),
            };

var list = query.ToList(); 
```

编辑：如果您的文档使用名称空间，那也很容易：

```
XNamespace ns = "http://the-uri-of-the-namespace";
var query = from data in doc.Descendants(ns + "myData")
            ... 
```

这使用`XName operator +(XNamespace, string)`重载运算符。

# c# - 缺少 fireball.docking dll 参考

> ID：15099198
> 
> 赞同：-1
> 
> 时间：2013-02-26T21:02:53.217
> 
> 标签：c#, asp.net, visual-studio-2010, c#-4.0

我从网上下载了一个 C# 项目。当我在 VS2010 中打开它并尝试运行它时，它显示错误

> “找不到类型或命名空间名称‘Fireball’（您是否缺少 using 指令或程序集引用？）”

当我检查*参考*文件夹时，它显示了一个**！****Fireball.Docking**和**fireball.Windows.Form**上的符号

 **有人可以帮助我如何获取这些 dll 文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:21:56.013

您的项目中没有包含此电流`DLL`。您可以返回下载项目的位置并尝试找到丢失的`DLL`. 如果您确定项目中有它，请转到您拥有的参考部分`!`并将其删除。然后 ：

*   右键点击`References`
*   点击`Add Reference...`
*   浏览到您的 `Dll`并添加它。**

# javascript - Magento 一页结帐 - 获取 TypeError: checkout undefined (in opcheckout.js)

> ID：15099201
> 
> 赞同：5
> 
> 时间：2013-02-26T21:02:58.513
> 
> 标签：javascript, jquery, magento, checkout

大约一周前，一页结帐工作正常，但现在不行了。毫无疑问，我有错，因为我仍然遇到与管理后端相关的问题，而且我可能在处理该问题的过程中以某种方式犯了这个问题。

在任何情况下，发生的情况是，当（登录、注册）用户单击单页结帐的计费信息步骤中的“继续”按钮时，就好像该按钮没有被单击一样。它不会进行下一步。并且错误控制台（在 Firefox 中）报告“TypeError: checkout is undefined”，并在 opcheckout.js 中显示第 303 行。

[这个问题与在 SO 上发布的另一个](https://stackoverflow.com/questions/14347170/magento-onepage-checkout-steps-not-expanding)问题非常相似，但是 (a) 这个问题没有得到真正的回答，并且 (b) 我没有足够高的分数来发表评论（或添加到那里的问题中）。

虽然解决方案会很棒，但我也真的在尝试学习如何自己调试它。我已经应用了许多通过谷歌搜索（针对其他问题）找到的 magento 解决方案，尽管它们有效并且这是主要的，但我开始希望能够解决我自己的问题。甚至可能最终能够帮助别人......

因此，在这种情况下，鉴于“未定义结帐”，我如何找到应该定义的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-03T18:14:56.697

就我而言，该文件与 pspahn 建议的`/skin/frontend/base/default/js/opcheckout.js`文件不匹配。`/skin/frontend/[yourpackage]/[yourtheme]/js/opcheckout.js`我的主题中的 .js 文件完全是空白的。复制内容修复一切。在此处发表评论，以了解可能正在搜索的其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:00:27.120

这里的解决方案是

1.  更正 onepage.phtml 中的两个错误类引用，以及
2.  重命名一些 css 类以匹配股票 magento 结帐代码所需的内容。

所需的特定 css 类是：

*   步骤标题
*   步
*   数字

以下是更正后的 onepage.html 文件的摘录：

```
<ol id="checkoutSteps" class="one-page-checkout">`<?php $i=0; foreach($this->getSteps() as $_stepId => $_stepInfo): ?>
<?php if (!$this->getChild($_stepId) || !$this->getChild($_stepId)->isShow()): continue; endif; $i++ ?>
    <li id="opc-<?php echo $_stepId ?>" class="section <?php echo !empty($_stepInfo['allow'])?'allow':'' ?> <?php echo !empty($_stepInfo['complete'])?'saved':'' ?>">
        <div class="step-title">
            <h3><span class="step-count"><?php echo $i ?></span> &nbsp;<?php echo $_stepInfo['label'] ?></h3><a href="#"><?php echo $this->__('Edit') ?></a>
        </div>
        <div id="checkout-step-<?php echo $_stepId ?>" class="step <?php if($_stepId=='shipping_method'): ?>-no-padding<?php endif; ?> a-item"  style="display:none;">
            <?php echo $this->getChildHtml($_stepId) ?>
        </div>
    </li>
<?php endforeach ?>
</ol> 
```

这是一个将我现有的 css 类之一复制到新必需的类之一的示例**（**来自文件 boxes.css）：

```
.one-page-checkout .box { border:1px solid #bbb6a5; border-top:0; padding:15px 20px; background:#faf7ee; }
.one-page-checkout .step { border:1px solid #bbb6a5; border-top:0; padding:15px 20px; background:#faf7ee; } 
```

我称这个为“盒子”，但就 Magento 而言，它需要是“步骤”。由于您的 css 类可能有所不同，因此您需要复制

我希望这可以帮助别人。

顺便说一句，我是这样想的：

1.  观察我的主题的问题
2.  使用股票主题进行测试：确认有效
3.  回到我的主题，并有选择地禁用文件以确定哪些文件有所作为，
4.  将其缩小到一个文件：onepage.phtml，仔细检查，与股票进行比较
5.  找到我的主题没有的 css 类名
6.  添加它们，调试

这是漫长而乏味的，但它似乎有效。

# c++ - 搜索/迭代 boost::spirit::qi::symbols

> ID：15099202
> 
> 赞同：5
> 
> 时间：2013-02-26T21:03:04.603
> 
> 标签：c++, boost, boost-spirit, boost-spirit-qi

如果我有一个符号表：

```
struct MySymbols : symbols<char, MyEnum::Fruits>
{
    MySymbols ()
        : symbols<char, MyEnum::Fruits>(std::string("MySymbols"))
    {
        add("apple", MyEnum::Apple)
           ("orange", MyEnum::Orange);
    }
}; 
```

我想遍历表以便按数据值搜索符号。我不能使用 lambda 表达式，所以我实现了一个简单的类：

```
template<typename T>
struct SymbolSearcher
{
    SymbolSearcher::SymbolSearcher(T searchFor)
        : _sought(searchFor)
    {
        // do nothing
    }

    void operator() (std::basic_string<char> s, T ct)
    {
        if (_sought == ct)
        {
            _found = s;
        }
    }

    std::string found() const { return _found; }

private:
    T _sought;
    std::string _found;
}; 
```

我使用它如下：

```
SymbolSearcher<MyEnum::Fruits> search(ct);
MySymbols symbols;

symbols.for_each(search);
std::string symbolStr = search.found(); 
```

如果我设置断点，`_found = s`我可以确认 _found 正在设置，但是 search.found() 总是返回一个空字符串。我猜这与在 for_each 中调用仿函数的方式有关，但我不知道。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T01:26:24.987

可能是这样

*   字符串的实际值是空字符串（不太可能）

*   函子按值传递，使有状态函子无用（因为原始状态实际上不会被传递）。

您可以将该`_found`字段作为参考（要求您确保遵守三规则以使其发挥作用）。

这是一个演示，通过断言往返结果来显示原理：http `SymbolSearcher`: **[//liveworkspace.org/code/4qupWC$1](http://liveworkspace.org/code/4qupWC%241)**

```
#include <boost/spirit/include/qi.hpp>

namespace qi     = boost::spirit::qi;

template<typename T>
struct SymbolSearcher
{
    SymbolSearcher(T searchFor, std::string& result) : _sought(searchFor), _found(result)
    {
    }

    void operator() (std::basic_string<char> s, T ct)
    {
        if (_sought == ct)
        {
            _found = s;
        }
    }

    std::string found() const { return _found; }

private:
    T _sought;
    std::string& _found;
};

int main()
{
    const std::string str("mies");

    typedef std::string::const_iterator It;
    It begin = str.cbegin();
    It end   = str.cend();

    qi::symbols<char, int> symbols;
    symbols.add("aap", 1)("noot", 2)("mies", 3);

    int out;
    bool ok = qi::parse(begin, end, symbols, out);
    assert(ok);

    std::string found;
    SymbolSearcher<int> sf(out, found);
    symbols.for_each(sf);

    assert(str == sf.found());
} 
```

# javascript - angularjs 错误：没有控制器：ngModel

> ID：15099204
> 
> 赞同：0
> 
> 时间：2013-02-26T21:03:08.843
> 
> 标签：javascript, angularjs, angularjs-directive

我已经使用 AngularJS 几天了，我声明了两个指令，如果我不需要任何东西，它们就可以工作。但我需要`ngModel`使用该`$setViewValue`方法。

我的指令如下所示：

```
<corina>
    <properties data-ng-repeat="property in Properties"></properties>
</corina> 
```

这些指令的定义如下：

```
var Application = Application || {};

;(function(window, document, undefined) {

    "use strict";

    var CorinaJSDialog = {};

    Application.CorinaJSDialog = angular.module("CorinaJSDialog", ["ngSanitize"]);

    Application.CorinaJSDialog.constant("CorinaJSAPI", {

        document : {
            load : "/corina/api/loaddocument",
            save : "/corina/api/savedocument"
        }
    });    

    Application.CorinaJSDialog.directive("corina", ["$timeout", function($timeout){

        var object = {

            restrict : "E",
            require : "ngModel",

            transclude : true,
            replace : true,
            priority : 1,
            templateUrl : "corina.html",
            controller : function($scope) {},
            link : function(scope, element, attrs, controller) { console.log(controller); }
        };

        return object;
    }]);

    Application.CorinaJSDialog.directive("properties", ["$timeout", function($timeout){

        var object = {

            restrict : "E",
            require : "?corina",
            transclude : true,
            replace : true,
            priority : 2,
            terminal : true,
            templateUrl : "properties.html",
            controller : function($scope) {},
            link : function(scope, element, attrs, controller) {

                var loadXeditable = function() {

                    $(element).editable({
                        mode: "inline",
                        display: function(value) {

                            controller.$setViewValue(value);

                            scope.$apply();

                            $(this).html(value);
                        }
                    });
                };

                $timeout(function() {
                    loadXeditable();
                }, 10);

            }
        };

        return object;
    }]);

})(window, document); 
```

以及加载的模板：

`corina.html`：

```
<div>
    <div data-ng-transclude></div>
</div> 
```

`properties.html`：

```
<div>
    <div class="row">
        <span class="span4">{{property.Name}}</span>

        <div class="span8">
            <a href="#" data-type="{{property.Type | lowercase}}" data-ng-model="property.Value" data-name="{{ property.Name }}" data-placeholder="{{ property.Value }}">
                <span data-ng-bind-html="{{ property.Value.toString() }}"></span>
            </a>
        </div>
    </div>
</div> 
```

每次我运行上面我得到这个错误：

```
Error: No controller: ngModel
at Error (<anonymous>)
at i (https://ajax.googleapis.com/ajax/libs/angularjs/1.1.3/angular.min.js:41:165)
at l (https://ajax.googleapis.com/ajax/libs/angularjs/1.1.3/angular.min.js:43:252)
at https://ajax.googleapis.com/ajax/libs/angularjs/1.1.3/angular.min.js:47:425
at https://ajax.googleapis.com/ajax/libs/angularjs/1.1.3/angular.min.js:96:330
at h (https://ajax.googleapis.com/ajax/libs/angularjs/1.1.3/angular.min.js:78:207)
at https://ajax.googleapis.com/ajax/libs/angularjs/1.1.3/angular.min.js:78:440
at Object.e.$eval (https://ajax.googleapis.com/ajax/libs/angularjs/1.1.3/angular.min.js:89:272)
at Object.e.$digest (https://ajax.googleapis.com/ajax/libs/angularjs/1.1.3/angular.min.js:87:124)
at Object.e.$apply (https://ajax.googleapis.com/ajax/libs/angularjs/1.1.3/angular.min.js:89:431) <div data-ng-transclude=""> angular.min.js:62 
```

此外，如果我需要类似 的指令`^mydir`，我会得到相同的错误，或者只是类似`mydir`. 只有当我使用`?mydir`我没有得到错误，但我不能使用`ngModule`指令。我会很感激一些关于我做错了什么的意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T06:15:32.880

正如我所解释的那样，您有两个元素指令，`corina`并且`properties`,`properties`需要控制器来自`corina`. 那总是会失败，因为它们需要在同一个元素上`require: 'corina'`才能工作。但是我现在在你的模板中看到`properties`了`corina`，所以你应该做的`properties`是：`require : "^?corina"`代替。这也告诉 Angular 在父元素中寻找 corina 控制器。

但是要求`ngModel`in`corina`不起作用，因为`ng-model`没有在 corina 元素上设置。你`ng-model`是在替换模板内的一个元素上设置的`corina`，因此`corina`指令无法获取该 ngModelController。您只能从同一元素或父元素请求控制器，而不能从子元素请求控制器。如果您真的需要，您应该在具有和需要`ngModelController`的相同元素上添加自己的指令。该指令可以要求控制器（因为控制器位于父元素上）并将 传递给控制器​​。`ng-model``ngModelController``corina``corina``ngModelController``corina`

但我不太确定你为什么首先要在`ng-model`这里使用？您已将其放置在不会做任何事情的锚元素上。你`ng-model`对锚元素的影响是什么？

# ios - 带路径的正则表达式？

> ID：15099205
> 
> 赞同：1
> 
> 时间：2013-02-26T21:03:09.113
> 
> 标签：ios, bash

在进行 iOS 开发时，我发现打开以下文件很有用：

```
/Users/disappearedng/Library/Application Support/iPhone Simulator/6.1/Applications/B957F50E-CF57-4797-AA14-C580F5596E56/Documents/MyApp.sqlite 
```

目前我的 bash_profile 中有以下别名：

```
alias cdi='cd /Users/disappearedng/Library/Application\ Support/iPhone\ Simulator/6.1/Applications' 
```

我必须在这里停下来的原因是因为在我的 iOS 模拟器上每次新安装应用程序时，哈希 B957F50E-CF57-4797-AA14-C580F5596E56 都会发生变化。

有谁知道一个别名的好方法，以便我可以将以下内容别名为我的 bash_profile 中的命令？

```
'/Users/disappearedng/Library/Application Support/iPhone Simulator/6.1/Applications/<any-hash>/Documents/*.sqlite' 
```

我尝试对 has 使用通配符，但文件夹中存在 .DS_Cache 文件导致此操作失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:32:00.013

这显然只是您在模拟器中运行时在开发期间想要的东西。为什么不让您的应用程序在启动时获取文件的路径，然后将路径写入主目录中的文件。更新您`.bash_profile`以获取此文件。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
#if TARGET_IPHONE_SIMULATOR
    NSString *sqlitePath = ... // path to the Documents folder
    NSString *command = [NSString stringWithFormat:@"alias cdi='cd %@'", sqlitePath];
    [sqlitePath writeToFile:@"/Users/disappearedng/.sqlitePath" atomically:YES encoding:NSUTF8StringEncoding error:nil];
#endif
} 
```

然后在你的`.bash_profile`，做：

```
. ~/.sqlitePath 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:09:16.780

怎么样：

```
find /Users/disappearedng/Library/Application Support/iPhone Simulator/6.1/Applications/.{38}/Documents/MyApp.sqlite | xargs <your_text_editor> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:10:21.460

如果有多个匹配的目录，并且您想输入最新的目录，请使用以下脚本：

```
cd "$(find "/Users/disappearedng/Library/Application Support/iPhone Simulator/6.1/Applications/" -name '*.sqlite' -type d -printf '%T@ %p\n' | sort -n | tail -1 | cut -f2- -d" ")" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T22:04:50.430

您可以尝试添加`.DS_Cache`到`FIGNORE`shell 参数。这样，通配符应该只匹配一个目录，并且`cd`仍然可以工作。在您的`.bashrc`文件中：

```
# To avoid adding .DS_Cache multiple times, just to be safe
[[ $FIGNORE =~ .DS_Cache ]] || FIGNORE="$FIGNORE:.DS_Cache" 
```

# oracle - 从 XMLTABLE 获取时，此 SELECT 语句错误中应有 INTO 子句

> ID：15099207
> 
> 赞同：3
> 
> 时间：2013-02-26T21:03:24.453
> 
> 标签：oracle, plsql, oracle11g

我正在尝试运行一个涉及 xmltable 的脚本，我得到了一个

> PLS-00428：此 SELECT 语句中应有一个 INTO 子句

如何更正我的脚本并从 xml 中获取 2 行？

甲骨文 11g

```
DECLARE xml_char xmltype;
BEGIN
xml_char := xmltype.createXML('<xml><ROWSET><ROW UNIQUEID="All0" ALLOWCHG="0"/><ROW UNIQUEID="All1" ALLOWCHG="1"/></ROWSET></xml>');
select UNIQUEID, ALLOWCHG from xmltable ( '/xml/ROWSET/ROW' passing xml_char columns "UNIQUEID" varchar(30) path '@UNIQUEID', "ALLOWCHG" varchar(30) path '@ALLOWCHG' ) ;
END; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T02:39:00.450

在 SQL 中，选择语句从不包含 INTO 子句。

在 PL/SQL 中，选择语句需要一个 INTO 子句*，除非*它在游标中。我修改了您的代码以使用游标：

```
DECLARE 
xml_char xmltype;

cursor c_cursor is
select UNIQUEID, ALLOWCHG 
from xmltable ( '/xml/ROWSET/ROW' 
                passing xml_char 
                columns 
                    "UNIQUEID" varchar(30) path '@UNIQUEID',
                    "ALLOWCHG" varchar(30) path '@ALLOWCHG'
              );

BEGIN

xml_char := xmltype.createXML('<xml><ROWSET><ROW UNIQUEID="All0" ALLOWCHG="0"/><ROW UNIQUEID="All1" ALLOWCHG="1"/></ROWSET></xml>');

for i in c_cursor loop  
  dbms_output.put_line('UNIQUEID: ' || i.uniqueid || ' ALLOWCHG: '|| i.allowchg);
end loop;

END; 
```

别担心，伙计，我们都会犯愚蠢的错误，尽管我有多年的经验。

# jquery - 如何获取当前内容以隐藏它？

> ID：15099209
> 
> 赞同：0
> 
> 时间：2013-02-26T21:03:32.070
> 
> 标签：jquery

我需要隐藏 div 中显示的内容，并在用户单击链接时将其替换为其他内容。所有内容都在 div#content 中。然后，每个内容选择都在另一个 div 中。

```
<div id = content>
    <div id = defaultTabs class = contentContainer>content</div>
    <div id = html5Tabs class = contentContainer>content</div>
    <div id = css3Tabs class = contentContainer>content</div>
    <div id = jqueryTabs class = contentContainer>content</div>
</div> 
```

当页面首次加载时`defaultTabs`，css 设置为`display:block`. 其余的通过 css on 隐藏`.contentContainer { display:none;}`。单击导航链接时，需要隐藏当前显示的内容并显示新的选择。

我不知道如何获取当前显示的内容，如果有人可以解释如何做到这一点，我可以做剩下的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:09:02.513

我认为不可能按照您的要求去做。

[使用 jQuery 选择具有特定 CSS 的所有元素](https://stackoverflow.com/questions/1220834/jquery-how-to-select-all-elements-that-have-a-specific-css-property-applied)

然而，为了达到同样的效果，我只是隐藏了所有的 div，然后显示我希望用户看到的那个。

# .net - 检查 UnauthorizedAccessException 类型的属性值

> ID：15099211
> 
> 赞同：1
> 
> 时间：2013-02-26T21:03:47.873
> 
> 标签：.net, windows, vb.net, security, exception

我试图通过调用以下代码来确定用户是否在特定服务器上具有管理员权限：

```
Dim serverContext As New PrincipalContext(ContextType.Machine, myServerName) 
```

如果他们不这样做，则对象`ConnectedServer`上的`PrincipleContext`属性将变为类型`System.UnathorizedAccessException`并且值为`{"Access is denied."}`

但是我似乎无法运行任何检查代码来查看是否是这种情况，或者连接的服务器属性是否正常设置为字符串。

这些不起作用，我不知道为什么

```
Dim bln1 = serverContext.ConnectedServer = "Access is denied."
Dim bln2 = TypeOf serverContext.ConnectedServer Is System.UnauthorizedAccessException 
```

![在此处输入图像描述](../Images/dbb6c3ba3c7382b0fd45217c44240678.png)

# ruby-on-rails - 创建 Rails 项目时出现捆绑错误

> ID：15099216
> 
> 赞同：0
> 
> 时间：2013-02-26T21:04:08.270
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我在 Mac 上创建**Ruby on Rails**项目时遇到问题。当我使用命令时，命令 bundle install 需要很长时间才能完成`rails new project`。之后，出现以下错误：

> NoMethodError：私有方法`open' called for Gem::Package:Class An error occured while installing rake (10.0.3), and Bundler cannot continue. Make sure that`gem install rake -v '10.0.3'` 在捆绑之前成功。

我已经安装了 rake 10.0.3。我已经检查过使用`gem list`. 关于这个错误的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:32:42.913

我有同样的问题。从我的 Rails 站点目录中运行“gem update”，它更新了 bundler 以及其他一些 gem，然后运行了“bundle install”并且它工作了。

希望这可以帮助！

# c# - 访问参数的属性时使用 ArgumentNullException

> ID：15099218
> 
> 赞同：5
> 
> 时间：2013-02-26T21:04:09.743
> 
> 标签：c#, exception, exception-handling, conventions

假设我有一个`Foo`具有复杂属性的类`Bar`。然后，假设我在其他类中有如下方法：

```
public void DoSomething(Foo foo)
{
    if (foo == null)
        throw new ArgumentNullException("foo");
    if (foo.Bar == null)
        throw new ArgumentNullException("bar");
} 
```

`ArgumentNullException`即使严格来说，`foo.Bar`在这种情况下不是一个论点，这里是否使用适当的？我[已经阅读](https://stackoverflow.com/a/4792296/1043198)`NullReferenceException`并且可以理解手动抛出一个是不合适的。这是在告诉我我需要抽象吗？

```
public void DoSomething(Foo foo)
{
    if (foo == null)
        throw new ArgumentNullException("foo");
    DoSomethingElse(foo.Bar);
}

private void DoSomethingElse(Bar bar)
{
    if (bar == null)
        throw new ArgumentNullException("bar");
} 
```

我的第一个代码片段是“正确”的用法`ArgumentNullException`吗？处理这种情况的常规方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-26T21:09:50.830

理想情况下，`Foo`该类将确保其`Bar`属性永远不会为空。如果那不可能，我会`ArgumentException`在这种情况下抛出一个，因为参数不为空，但它是无效的。

# ms-access - 从 OLE 对象链接 MS Access 2007 获取路径

> ID：15099219
> 
> 赞同：3
> 
> 时间：2013-02-26T21:04:13.260
> 
> 标签：ms-access, ms-access-2007, ole

我在数据库中有几个表，它们使用 OLE 对象作为网络驱动器上文件的链接。我使用来自[http://support.microsoft.com/kb/199​​066](http://support.microsoft.com/kb/199066)的模块尝试从 OLE 对象获取路径，但我得到的只是指向 .ico 或 .exe 的链接，而不是实际路径。如果我双击链接字段值，文件将从网络位置正确打开。![屏幕截图](../Images/1cd89be1c601b60e1d70e29d9a366db1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-25T08:57:08.663

您寻求的属性如下，

你应该

```
Dim Ref As Reference
For Each Ref In References

   MsgBox Ref.Name & " > " & Ref.FullPath 

Next 
```

会给你名字和路径作为消息。

# html - 为什么内联 div 在 p 中表现得这样

> ID：15099220
> 
> 赞同：2
> 
> 时间：2013-02-26T21:04:17.513
> 
> 标签：html

在链接的示例中，我有一个文本和一个段落，每个都包含`span`和`div`元素。尽管所有`div`元素都`display: inline;`应用了样式，但第一个`div`从`<p>`下一行开始。

这是为什么 ？

这是一个例子：http: [//jsfiddle.net/7HAPp/1/](http://jsfiddle.net/7HAPp/1/)

我在这里复制了代码：

```
Cum sociis natoque penatibus et <span>i'm a span</span> parturient montes, nascetur
ridiculus mus. Nulla consequat massa <div>i'm an inline div</div> In enim justo, 
rhoncus ut, <div>i'm an inline div</div> imperdiet a, venenatis vitae, justo. Nullam
dictum felis eu pede mollis pretium.

<p>Cum sociis natoque penatibus et <span>i'm a span</span> parturient montes, nascetur
ridiculus mus. Nulla consequat massa <div>i'm an inline div</div> In enim justo,
rhoncus ut, <div>i'm an inline div</div> imperdiet a, venenatis vitae, justo. Nullam 
dictum felis eu pede mollis pretium.</p> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T21:05:46.537

`div`里面`p`是无效的标记。当浏览器遇到该`div`元素时，它会自动关闭`p`标签并启动新的`div`.

# iphone - awakeFromNib 中的代码被故事板覆盖

> ID：15099221
> 
> 赞同：1
> 
> 时间：2013-02-26T21:04:18.463
> 
> 标签：iphone, ios, ipad, viewdidload, awakefromnib

我有以下代码：

```
- (void) awakeFromNib
{
    CGRect temp = self.buttonOne.frame;
    temp.origin.y += 50;
    self.buttonOne.frame = temp;
} 
```

里面的代码什么都不做；当应用程序加载时 buttonOne 正是它在故事板上的位置。

如果我在 viewDidLoad 中放置相同的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    CGRect temp = self.buttonOne.frame;
    temp.origin.y += 50;
    self.buttonOne.frame = temp;
} 
```

它工作，按钮被向下移动。

这是因为在 awakeFromNib 触发和正在绘制的视图之间发生了一些事情吗？

任何澄清都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:17:36.130

`awakeFromNib`当控制器从 nib 文件中取消归档时`viewDidLoad`将被调用，而当与控制器绑定的视图被创建时将被调用。

因此`awakeFromNib`会在之前调用`viewDidLoad`。当调用 awakeFromNib 时，视图还没有被加载（如果它已经`viewDidLoad`被调用的话），因此对它的任何更改都不会影响它。

# jquery - PhoneGap：文件 API - 在点击事件上加载 json 数据

> ID：15099235
> 
> 赞同：0
> 
> 时间：2013-02-26T21:05:02.247
> 
> 标签：jquery, json, cordova, filereader

我已经实现了从设备上的外部文件加载 json 数据的代码。该程序应该像这样工作：在点击事件首先它会尝试查看本地存储文件（course.txt），如果它存在读取并显示它（标题列表）。

**HTML 代码：**

```
<div data-role="page" id="page1">
    <a href="#page2" onclick="courseList()">Load Course</a></div>
</div>
<div data-role="page" id="page2">
    <p id="text" align="center"></p>
    <div id="print"></div>
</div> 
```

**JS代码：**

```
jsonString = '';
function courseList() {
    readWriteFile();
    var myData = JSON.parse(jsonString);
    if (myData != '' || myData != undefined) {
        var $list = $('#print');
        $.each(myData, function(i, item) {
            $list.html(item.title);
        });​
    } else {
        document.getElementById('text').innerHTML = 'No data in storage';
    }
}

function readWriteFile() {
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFSSuccess, onFSError);
}
function onFSSuccess(fileSystem) {
    fileSystem.root.getFile("course.txt", {create:true, exclusive:false}, gotFileEntry, onFSError);
}
//FileReader Cordova API
function gotFileEntry(fileEntry) {
    fileEntry.file(gotFile, onFSError);
}
function gotFile(file) {
    readAsText(file);
}
function readAsText(file) {
    var reader = new FileReader();
    reader.onloadend = function(evt) {
        console.log("Read as text");
        console.log(evt.target.result);
    };
    reader.readAsText(file);
    jsonString = reader.readAsText(file);
}
function onFSError(err) {
    console.log(err.code);
} 
```

考虑到上述过程，结果是空的。我无法发现我的错误。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:48:26.580

试试这个

```
function readAsText(file) {
  var reader = new FileReader();
  //asnycrhonous task has finished, fire the event:
  reader.onloadend = function(evt) {
    console.log("Read as text");
    console.log(evt.target.result);
    //assign the data to the global var
    jsonString = evt.target.result
    //keep working with jsonString here
  };
  reader.readAsText(file);    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-08T22:42:50.880

这是因为文件读取是异步发生的。在**onloadend**添加您的**readAsText**。

 **尝试添加这个：

```
function readAsText(file) {
    var reader = new FileReader();
    reader.onloadend = function(evt) {
        console.log("Read as text");
        console.log(evt.target.result);
        reader.readAsText(file);
        jsonString = reader.readAsText(file);
    };   
} 
```**

# java - 如何创建视频叠加层？

> ID：15099237
> 
> 赞同：-2
> 
> 时间：2013-02-26T21:05:06.750
> 
> 标签：java, php, javascript, html, overlay

嗨，我看过一些这样做的博客，但我想知道他们是如何做到的，我不知道具体要查找什么。

查看此链接[http://concreteloop.com/2013/02/video-nicki-minaj-french-montanas-freaks-behind-the-scenes](http://concreteloop.com/2013/02/video-nicki-minaj-french-montanas-freaks-behind-the-scenes)

请注意，它们有一个图像和一个播放按钮，一旦您单击播放按钮，图像就会消失并播放视频。我想知道是否有人知道我可以在哪里学习创建此功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:17:50.393

这是您要实现的目标的简单示例。最初隐藏视频，然后在用户单击图像时显示和播放。

```
<div id="container">
    <img src="http://content.internetvideoarchive.com/content/photos/7142/29998006_.jpg" />
    <video width="320" height="240" controls style="display: none;">
        <source src="http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4" type="video/mp4">
    </video>
</div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
    $(function () {
        $('img').click(function () {
            $(this).hide();
            $('video').show()
            $('video')[0].play();
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:13:08.447

我会做的最愚蠢的方法是有一个图像文件和一个链接到它的js函数，基本上在点击时隐藏图像并显示一个包含视频的div块。尽管您确实需要学习使用 firebug 或 web 检查器。

# ios - 存储 UIImages 的持久数组 - CoreData 还是在磁盘上？

> ID：15099239
> 
> 赞同：0
> 
> 时间：2013-02-26T21:05:11.273
> 
> 标签：ios, core-data, uiimage, nsarray

在我的应用程序中，我将拥有最多 50 张可供人们维护的图像数组。他们可以选择创建新图像或删除现有图像。每张图片都会有一些与之相关的东西，例如评分。

我的问题是我应该如何存储它们。我应该创建一个名为“Image”的 CoreData 实体并以这种方式存储它们吗？我是否应该设置一个符合 NSCoding 的 UIView 子类，只对数组进行编码和解码并将其存储在设备上？我应该考虑另一种方法吗？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:15:52.397

您可以创建一个实体来表示图像及其信息，并使用核心数据的外部存储属性作为实体的属性。这样，您无需将图像实际存储在持久存储中即可获得核心数据的便利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:32:02.933

最近我不得不做出类似的决定，我决定将图像存储在 CoreData 中。我有一个名为`photo`二进制数据字段的托管对象`image`：

```
photo.image = UIImagePNGRepresentation(imageFile); // <- imageFile is a UIImage 
```

我使用以下方法重新创建图像：

```
[UIImage imageWithData:self.image]; 
```

一个直接的优势是图像会随对象自动删除，如果您已经查询了记录，则在检索图像时没有额外的开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:35:39.077

对于您想做的事情，Core Data 可能是矫枉过正。选择一些键值对来获取有关图像的描述性信息。一个键是“路径”，值是图像文件的路径（或只是它的名称）。您可以序列化字典数组（或集合）。

当您的应用程序启动时，读取序列化的字典数组。每次发生变化时，序列化并保存信息。编写一个简短的审核例程以确保字典和文件中的图像之间存在一对一的对应关系，如果其中一个或另一个丢失，则删除另一个（将处理您在更新某些内容或其他内容之前崩溃的情况）。

稍后，您可以根据需要向字典添加更多属性，甚至删除一些属性。

[PS：我在一个版本的运输应用程序中这样做了，当信息需要变得关系时，我切换到了 Core Data。]

# php - 从 php 对象类返回多个数据库行

> ID：15099241
> 
> 赞同：0
> 
> 时间：2013-02-26T21:05:20.913
> 
> 标签：php, mysql, arrays

我正在尝试遵循在这个问题中找到的帮助：[如何从 OOP 编程中的一个类返回多个数据库记录，](https://stackoverflow.com/questions/4180051/how-can-i-return-multiple-database-record-from-a-class-in-oop-programming)但我似乎无法让它正常工作。

我有一个名为“jobs”的数据库表，我想从该表中检索所有数据，并将其显示给我的用户。

截至目前，当我使用此代码时：

```
 /* Get All Jobs */
public function getJobs($page) {

    $db = new DBConnection;
    $str = new str_format;
    $validate = new data_validation;

    $sql = "SELECT * FROM jobs ORDER BY job_id DESC";

    $paginate = new Paginate($db, $sql, $page);
    $result = $paginate->get_results();

    $jobArr = array();

    while($row = $result->fetch_array(MYSQLI_ASSOC)) {

        $row = $validate->escapeArray($row);        

        $job = new Job($db);

        $job->$row['job_id'];
        $job->$row['job_title'];
        $job->$row['date'];
        $job->$row['industry'];
        $job->$row['company'];
        $job->$row['photo'];
        $job->$row['content'];

        $jobArr[] = $job;

        return $jobArr ;

    }//close while loop

    /*===  build the pagination links ===*/
    echo "<div class='pagination_container'>";
    echo "<span class='pagination'>";

    echo $paginate->show_pages();

    echo "</span>";
    echo "</div>";
    /*=== end build pagination links ===*/

} 
```

我只得到 1 个条目和一堆看起来像这样的错误`Notice: Undefined property: Job::$4 in /home/hirestar/public_html/builder/classes/job.class.php on line 54`

`Job`如果与它有任何关系，则该类被命名。但我似乎无法正常完成这项工作。

**如何从此函数返回数据库中的所有作业？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:11:01.540

首先，您在 while 循环中调用`return`，因此它将在第一次循环执行时退出。这就是为什么你只得到一个结果。您应该在 while 循环之后调用 return 以便您可以构建整个数组。

`Undefined property`其次，由于此代码，您可能会收到错误：

```
$job->$row['job_id'];
$job->$row['job_title'];
$job->$row['date'];
$job->$row['industry'];
$job->$row['company'];
$job->$row['photo'];
$job->$row['content']; 
```

在这里，您可能想要执行以下操作：

```
$job->job_id = $row['job_id']; 
```

现在您要做的是从`$job`名称中读取属性，该属性的值等于`$row[*]`. 所以说`row_id`是4，你本质上是在表演：

```
$job->4; 
```

这显然是没有意义的。

# sql - 需要 SQL 优化（也许 DISTINCT ON 是原因？）

> ID：15099242
> 
> 赞同：5
> 
> 时间：2013-02-26T21:05:21.823
> 
> 标签：sql, postgresql, query-optimization, aggregate-functions, postgis

相关的，前面的问题：
[在按值（而不是列）分组后从组中选择一个随机条目？](https://stackoverflow.com/questions/15091363/select-a-random-entry-from-a-group-after-grouping-by-a-value-not-column)

我当前的查询如下所示：

```
WITH
  points AS (
    SELECT unnest(array_of_points) AS p
  ),

 gtps AS (
   SELECT DISTINCT ON(points.p)
     points.p, m.groundtruth
   FROM measurement m, points
   WHERE st_distance(m.groundtruth, points.p) < distance
   ORDER BY points.p, RANDOM()
 )

SELECT DISTINCT ON(gtps.p, gtps.groundtruth, m.anchor_id)
  m.id, m.anchor_id, gtps.groundtruth, gtps.p
FROM measurement m, gtps
ORDER BY gtps.p, gtps.groundtruth, m.anchor_id, RANDOM() 
```

**语义：**

1.  有两个输入值：

    *   第 4 行：点数组`array_of_points`
    *   第 12 行：一个双精度数：`distance`
2.  第一段（第 1-6 行）：

    *   从点数组创建一个表以用于...
3.  第二段（第 8-14 行）：

    *   对于表内的每个点`points`：从表中获取一个随机（！）`groundtruth`点`measurement`，其距离 <`distance`
    *   将这些元组保存在`gtps`表中
4.  第三段（第 16-19 行）：

    *   对于表中`groundtruth`的每个值`gtps`：获取所有`anchor_id`值并...
    *   如果一个`anchor_id`值不是唯一的：然后随机选择一个
5.  输出：`id`, `anchor_id`, `groundtruth`, `p`（来自 的输入值`array_of_points`）

**示例表：**

```
id | anchor_id | groundtruth | data
-----------------------------------
1  | 1         | POINT(1 4)  | ...
2  | 3         | POINT(1 4)  | ...
3  | 8         | POINT(1 4)  | ...
4  | 6         | POINT(1 4)  | ...
-----------------------------------
5  | 2         | POINT(3 2)  | ...
6  | 4         | POINT(3 2)  | ...
-----------------------------------
7  | 1         | POINT(4 3)  | ...
8  | 1         | POINT(4 3)  | ...
9  | 6         | POINT(4 3)  | ...
10 | 7         | POINT(4 3)  | ...
11 | 3         | POINT(4 3)  | ...
-----------------------------------
12 | 1         | POINT(6 2)  | ...
13 | 5         | POINT(6 2)  | ... 
```

**示例结果：**

```
id  | anchor_id | groundtruth | p
-----------------------------------------
1   | 1         | POINT(1 4)  | POINT(1 0)
2   | 3         | POINT(1 4)  | POINT(1 0)
4   | 6         | POINT(1 4)  | POINT(1 0)
3   | 8         | POINT(1 4)  | POINT(1 0)
5   | 2         | POINT(3 2)  | POINT(2 2)
6   | 4         | POINT(3 2)  | POINT(2 2)
1   | 1         | POINT(1 4)  | POINT(4 8)
2   | 3         | POINT(1 4)  | POINT(4 8)
4   | 6         | POINT(1 4)  | POINT(4 8)
3   | 8         | POINT(1 4)  | POINT(4 8)
12  | 1         | POINT(6 2)  | POINT(7 3)
13  | 5         | POINT(6 2)  | POINT(7 3)
1   | 1         | POINT(4 3)  | POINT(9 1)
11  | 3         | POINT(4 3)  | POINT(9 1)
9   | 6         | POINT(4 3)  | POINT(9 1)
10  | 7         | POINT(4 3)  | POINT(9 1) 
```

如你看到的：

*   每个输入值可以有多个相等的`groundtruth`值。
*   如果输入值有多个`groundtruth`值，则它们必须全部相等。
*   每个 groundtruth-inputPoint-tuple 都与该 groundtruth 的每个可能情况相连`anchor_id`。
*   两个不同的输入值可以具有相同的对应`groundtruth`值。
*   两个不同的 groundtruth-inputPoint-tuples 可以有相同的`anchor_id`
*   两个相同的 groundtruth-inputPoint-tuples 必须有不同`anchor_id`的 s

**基准**（两个输入值）：

*   第 1-6 行：16 毫秒
*   第 8-14 行：48 毫秒
*   第 16-19 行：600 毫秒

**详细解释：**

```
Unique  (cost=11119.32..11348.33 rows=18 width=72)
  Output: m.id, m.anchor_id, gtps.groundtruth, gtps.p, (random())
  CTE points
    ->  Result  (cost=0.00..0.01 rows=1 width=0)
          Output: unnest('{0101000000EE7C3F355EF24F4019390B7BDA011940:01010000003480B74082FA44402CD49AE61D173C40}'::geometry[])
  CTE gtps
    ->  Unique  (cost=7659.95..7698.12 rows=1 width=160)
          Output: points.p, m.groundtruth, (random())
          ->  Sort  (cost=7659.95..7679.04 rows=7634 width=160)
                Output: points.p, m.groundtruth, (random())
                Sort Key: points.p, (random())
                ->  Nested Loop  (cost=0.00..6565.63 rows=7634 width=160)
                      Output: points.p, m.groundtruth, random()
                      Join Filter: (st_distance(m.groundtruth, points.p) < m.distance)
                      ->  CTE Scan on points  (cost=0.00..0.02 rows=1 width=32)
                            Output: points.p
                      ->  Seq Scan on public.measurement m  (cost=0.00..535.01 rows=22901 width=132)
                            Output: m.id, m.anchor_id, m.tag_node_id, m.experiment_id, m.run_id, m.anchor_node_id, m.groundtruth, m.distance, m.distance_error, m.distance_truth, m."timestamp"
  ->  Sort  (cost=3421.18..3478.43 rows=22901 width=72)
        Output: m.id, m.anchor_id, gtps.groundtruth, gtps.p, (random())
        Sort Key: gtps.p, gtps.groundtruth, m.anchor_id, (random())
        ->  Nested Loop  (cost=0.00..821.29 rows=22901 width=72)
              Output: m.id, m.anchor_id, gtps.groundtruth, gtps.p, random()
              ->  CTE Scan on gtps  (cost=0.00..0.02 rows=1 width=64)
                    Output: gtps.p, gtps.groundtruth
              ->  Seq Scan on public.measurement m  (cost=0.00..535.01 rows=22901 width=8)
                    Output: m.id, m.anchor_id, m.tag_node_id, m.experiment_id, m.run_id, m.anchor_node_id, m.groundtruth, m.distance, m.distance_error, m.distance_truth, m."timestamp" 
```

**解释分析：**

```
Unique  (cost=11119.32..11348.33 rows=18 width=72) (actual time=548.991..657.992 rows=36 loops=1)
  CTE points
    ->  Result  (cost=0.00..0.01 rows=1 width=0) (actual time=0.004..0.011 rows=2 loops=1)
  CTE gtps
    ->  Unique  (cost=7659.95..7698.12 rows=1 width=160) (actual time=133.416..146.745 rows=2 loops=1)
          ->  Sort  (cost=7659.95..7679.04 rows=7634 width=160) (actual time=133.415..142.255 rows=15683 loops=1)
                Sort Key: points.p, (random())
                Sort Method: external merge  Disk: 1248kB
                ->  Nested Loop  (cost=0.00..6565.63 rows=7634 width=160) (actual time=0.045..46.670 rows=15683 loops=1)
                      Join Filter: (st_distance(m.groundtruth, points.p) < m.distance)
                      ->  CTE Scan on points  (cost=0.00..0.02 rows=1 width=32) (actual time=0.007..0.020 rows=2 loops=1)
                      ->  Seq Scan on measurement m  (cost=0.00..535.01 rows=22901 width=132) (actual time=0.013..3.902 rows=22901 loops=2)
  ->  Sort  (cost=3421.18..3478.43 rows=22901 width=72) (actual time=548.989..631.323 rows=45802 loops=1)
        Sort Key: gtps.p, gtps.groundtruth, m.anchor_id, (random())"
        Sort Method: external merge  Disk: 4008kB
        ->  Nested Loop  (cost=0.00..821.29 rows=22901 width=72) (actual time=133.449..166.294 rows=45802 loops=1)
              ->  CTE Scan on gtps  (cost=0.00..0.02 rows=1 width=64) (actual time=133.420..146.753 rows=2 loops=1)
              ->  Seq Scan on measurement m  (cost=0.00..535.01 rows=22901 width=8) (actual time=0.014..4.409 rows=22901 loops=2)
Total runtime: 834.626 ms 
```

实时运行时，它应该运行大约 100-1000 个输入值。所以现在需要 35 到 350 秒，这远远不够。

我已经尝试删除这些`RANDOM()`功能。这将运行时间（对于 2 个输入值）从大约 670 毫秒减少到大约 530 毫秒。所以这不是目前的主要影响。

如果这样更容易/更快，也可以运行 2 或 3 个单独的查询并在软件中执行某些部分（它在 Ruby on Rails 服务器上运行）。例如随机选择？！

# 工作正在进行中：

```
SELECT
  m.groundtruth, ps.p, ARRAY_AGG(m.anchor_id), ARRAY_AGG(m.id)
FROM
  measurement m
JOIN
  (SELECT unnest(point_array) AS p) AS ps
  ON ST_DWithin(ps.p, m.groundtruth, distance)
GROUP BY groundtruth, ps.p 
```

使用此查询它非常快（**15ms**），但缺少很多：

*   我只需要一个随机行`ps.p`
*   这两个数组属于彼此。意思是：里面物品的顺序很重要！
*   这两个数组需要过滤（随机）：
    对于`anchor_id`数组中出现多次的每个数组：保留一个随机数组并删除所有其他数组。这也意味着`id`从`id`-array 中删除每个已删除的对应项`anchor_id`

如果`anchor_id`并且`id`可以存储在元组数组中，那也很好。例如：（`{[4,1],[6,3],[4,2],[8,5],[4,4]}`约束：每个元组都是唯一的，每个 id（== 示例中的第二个值）都是唯一的，anchor_ids 不是唯一的）。此示例显示没有仍必须应用的过滤器的查询。应用过滤器后，它看起来像这样`{[6,3],[4,4],[8,5]}`。

# 进行中的工作二：

```
SELECT DISTINCT ON (ps.p)
  m.groundtruth, ps.p, ARRAY_AGG(m.anchor_id), ARRAY_AGG(m.id)
FROM
  measurement m
JOIN
  (SELECT unnest(point_array) AS p) AS ps
  ON ST_DWithin(ps.p, m.groundtruth, distance)
GROUP BY ps.p, m.groundtruth
ORDER BY ps.p, RANDOM() 
```

这现在给出了非常好的结果，并且仍然非常快：**16ms**
只剩下一件事要做：

*   `ARRAY_AGG(m.anchor_id)`已经随机化，但是：
*   它包含很多重复的条目，所以：
*   我想在上面使用类似 DISTINCT 的东西，**但是：**
*   它必须与`ARRAY_AGG(m.id)`. 这意味着：
    如果 DISTINCT 命令保留数组的索引 1、4 和 7 `anchor_id`，那么它还必须保留数组的索引 1、4 和 7 `id`（当然删除所有其他索引）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T02:05:33.843

> 如果可以将 anchor_id 和 id 存储在元组数组中，那就太好了。

### 多维数组的聚合函数

我想您为此创建了一个**二维数组**。这比`ARRAY of record`. 标准`array_agg()`不能聚合多维数组。但是您可以很容易地为此编写自己的聚合函数：

```
CREATE AGGREGATE array_agg_mult (anyarray)  (
    SFUNC     = array_cat
   ,STYPE     = anyarray
   ,INITCOND  = '{}'
); 
```

阅读此相关答案中的解释：
[Selecting data into a Postgres array](https://stackoverflow.com/questions/11762398/selecting-data-into-a-postgres-array-format/11763245#11763245)

> 对于数组中出现多次的每个anchor_id：保留一个随机的并删除所有其他的。这也意味着从 id-array 中为每个删除的 anchor_id 删除相应的 id

### 询问

```
SELECT DISTINCT ON (p)
       p, groundtruth, array_agg_mult(ARRAY[ARRAY[anchor_id, id]]) AS ids
FROM (
   SELECT DISTINCT ON (ps.p, m.groundtruth, m.anchor_id)
          ps.p, m.groundtruth, m.anchor_id, m.id
   FROM  (SELECT unnest(point_array) AS p) AS ps
   JOIN   measurement m ON ST_DWithin(ps.p, m.groundtruth, distance)
   ORDER  BY ps.p, m.groundtruth, m.anchor_id, random()
   ) x
GROUP  BY p, groundtruth
ORDER  BY p, random(); 
```

*   如果有多个对等点，子查询`x`会变得不同`anchor_id`，`(p, groundtruth)`并随机选择一行。这样连接就`anchor_id - id`保持不变。

*   外部查询聚合一个二维数组，如您所愿，按`anchor_id`. 如果您想`anchor_id`随机订购，请再次使用 random ：

    ```
    array_agg_mult(ARRAY[ARRAY[anchor_id, id]] ORDER BY random()) 
    ```

*   最后，再次随机`DISTINCT ON`选择 1`groundtruth`个。`p`

# python - 迭代列表时出现 KeyError

> ID：15099244
> 
> 赞同：1
> 
> 时间：2013-02-26T21:05:29.360
> 
> 标签：python, google-app-engine

如果这是一个愚蠢的问题，我很抱歉，但我一直在思考这个问题并查看了 Jinja 文档，但到目前为止无济于事。简短背景：我刚刚完成了 Udacity 的 CS101 和 CS253，正准备帮助朋友建立一个瑜伽工作室的预订系统。这一切都在 Google Appengine 上，就像

我想要一个类似这样的可用瑜伽课程列表：

```
Monday

Dynamic Yoga with Mary 6pm

Soft yoga with Susie 8pm

Wednesday

Hatha yoga with Bob 5pm

Hot yoga with Alice 7pm 
```

所以我想获取课程列表，然后看看周一是否有瑜伽课。如果有，我将“星期一”添加到列表和所有星期一的课程中，以此类推。像这样：

`day_output1 = ['Monday',['Dynamic Yoga with Mary 6pm'],['Soft yoga with Su..']]`

```
day_output2 = ['Wednesday',['Hatha yoga with Bob 5pm'],['Hot yoga with Al...']] 
```

然后将这些添加到整个一周的列表中，然后将其发送到模板：

```
weekly_classes = [day_output1, day_output2] 
```

现在我得到一个 KeyError，这意味着它没有找到密钥，但我不明白为什么？

```
 File "/Users/username/YogaSchemat/yogaschema/main.py", line 113, in get
    day = d[n]
KeyError: 1 
```

使用此代码...在此先感谢各位！

```
d = {
"1": 'Monday', 
"2": 'Tuesday', 
"3": 'Wednesday', 
"4": 'Thursday', 
"5": 'Friday', 
"6": 'Saturday', 
"7": 'Sunday'
}
def get_classes():
    yoga_classes = Schema.all() #appengine DB request
    if yoga_classes:
        weekly_classes = [] #list that will be sent to template
        for n in range(1,8):
            for e in yoga_classes:
                if e.weekday == n:
                    day = d[n] #getting weekday from d
                    class_details = [] #
                    class_details.append(e)
                    day_output = [day,class_details]
                    weekly_classes.append(day_output)
    self.response.out.write(weekly_classes) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:06:34.300

您在`d`映射中使用字符串键，但正在查找*整数*。

在这种情况下，您应该改用列表：

```
d = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday']

# ...
for n in range(7):
    day = d[n] 
```

介于 0和`n`6 之间，直接映射到`d`列表中这些位置的星期名称。

或者，您可以使用整数作为键：

```
d = {
    1: 'Monday', 
    2: 'Tuesday', 
    3: 'Wednesday', 
    4: 'Thursday', 
    5: 'Friday', 
    6: 'Saturday', 
    7: 'Sunday'
} 
```

但由于您的键是顺序的，您不妨节省空间。

# dll - tclmagick 加载错误

> ID：15099251
> 
> 赞同：2
> 
> 时间：2013-02-26T21:05:48.970
> 
> 标签：dll, imagemagick, tcl, msvcrt

我尝试调用一个 Tcl 脚本：

```
load tclmagick.dll 
```

并得到

```
couldn't load library "TclMagick.dll": invalid argument 
```

我试过 Dependency Walker，它告诉我 msvcrt.exe 没有导出名为“__adjust_fdiv”的函数。但是，我不知道如何解决这个问题。有什么建议吗？

操作系统：Windows 7、64 位
软件包：TclMagick 和 ImageMagick

# mysql - N个或更多连续年份范围

> ID：15099253
> 
> 赞同：-1
> 
> 时间：2013-02-26T21:05:53.587
> 
> 标签：mysql, vb.net

我必须使用涉及超过 4 个表的 MySql DB 创建一个报告。我有一个带有 S1_ID 和 S1_Year_Range 的表 (S1)（字符串，如 2001-2002）和另一个带有 S2_ID(PK)、S2_Customer_ID、S1_ID (FK) 和其他字段的表 (S2) 以及其他可能出现在我的 Where 子句中的字段询问。S2 中可以有不止一行具有相同的 S2_Customer_ID 但不同的 S1_ID。我的查询是使用 VB.net 创建一个报告并要求用户输入两个值；一个数字表示连续多少年或更大（如 >= 5 年），以及一个年份范围值（如 2011-2012），这是所有客户列表中的最高值。

我的报告在每个客户的一列中列出了该客户的客户名称（通过将上述查询与另一个表连接）、客户排名和所有年份范围值（底部最高）。对此查询的任何帮助将不胜感激。

数据和结果可能如下所示：

S1：

（S1_ID....S1_Year_Range）

(1......2000-2001)

(2......2001-2002)

(3......2002-2003)

(4......2003-2004)

(5......2004-2005)

ETC

S2：

（S2_ID.....S2_Customer_ID.....S1_ID）

(1....1....1)

(2....1....2)

(3....1....3)

(4....2....2)

(5....2....3)

(6....2....5)

(7....3....2)

(8....3....3)

(9....3....4)

(10...3....5)

(11...4....3)

(12...4....4)

(13...4....5)

ETC

当用户输入数字 2 和年份范围 (2003-2004) 时，结果应如下所示：

客户 3 具有 3 年范围值（2003-2004、2002-2003 和 2001-2002）和客户 4 具有 2 年范围值（2003-2004 和 2002-2003）：

cname3
2001-2002

2002-2003

2003-2004

cname4
2002-2003
2003-2004

我希望你能正确地看到报告的栏目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:22:53.550

我终于创建了一个复杂的查询来解决我的问题。在以下查询中，我将用户年份范围值编码为“2010-2011”，将连续年份编码为 14。与问题的一个微小差异是表名；此处的表 CSP 与我的问题中的表 S2 相同，但字段名称与我的问题中的相同。

SELECT CSYWFY.S2_Customer_ID, COUNT(CSYWFY.S2_Customer_ID) FROM (SELECT S1F.S1_Year_Range, S2.S2_Customer_ID, COUNT(S1F.S1_Year_Range) FROM CSP as S2 INNER JOIN S1 as S1F ON S2.S1_ID = S1F.S1_ID WHERE '2010-2011 ' IN (SELECT S1N.S1_Year_Range FROM CSP as S2N INNER JOIN S1 as S1N ON S2N.S1_ID = S1N.S1_ID WHERE S2N.S2_Customer_ID = S2.S2_Customer_ID) GROUP BY S2.S2_Customer_ID ASC, S1F.S1_Year_Range DESC) CSYWFY GROUP BY CSYWFY S2_Customer_ID HAVING COUNT(CSYWFY.S2_Customer_ID) > 14

高温高压

# php - 使用php反转一组数字

> ID：15099257
> 
> 赞同：-4
> 
> 时间：2013-02-26T21:06:07.733
> 
> 标签：php

我想将 1345 显示为数组
[0] => 1 [1] => 3 [2] => 4 [3] => 5

我正在考虑使用 for 循环，但我所拥有的什么也没做。请帮忙

```
$a = 1345;
for ($i=1; $i<=4; $i++)
 {
echo $a%10 . "<br>";
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:08:00.333

试试这个：

```
var_dump(array(1, 3, 4, 5)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:08:10.067

Id 将其转换为字符串并执行[str_split](http://php.net/manual/en/function.str-split.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:09:08.997

使用 var_dump() 怎么样？

```
<?php
$a = array(1, 2, array("a", "b", "c"));
ob_start();
var_dump($a);
$result = ob_get_clean();
?> 
```

结果：

```
array(3) {
  [0]=>
  int(1)
  [1]=>
  int(2)
  [2]=>
  array(3) {
    [0]=>
    string(1) "a"
    [1]=>
    string(1) "b"
    [2]=>
    string(1) "c"
  }
} 
```

[http://php.net/manual/es/function.var-dump.php](http://php.net/manual/es/function.var-dump.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T21:09:34.980

```
$a = array(1,3,4,5);
foreach($a as $value){
    echo $value;
} 
```

你不断改变你的问题，`str_split()`就是当前问题的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T21:13:55.347

```
print_r(array(1,3,4,5)); 
```

就这个人

# java - 如何使用 JFreeChart 创建堆叠间隔图？

> ID：15099261
> 
> 赞同：2
> 
> 时间：2013-02-26T21:06:20.267
> 
> 标签：java, swing, jfreechart

目标是建立一个区间条形图，指示每个类别的可接受值范围（0 - 100% 之间）。

对于每个类别，我想指出 2 个间隔（即一个绿色的中心间隔和一个灰色的周围间隔），我认为使用 IntervalBarRenderer 是不可行的，因此我一直在使用 StackedBarRenderer（透明每个栏的最左侧和最右侧的图层）。

这是正确的方法吗？

此外，如果这是正确的方法，似乎透明的条间隔（在每个条的最左边和最右边）不显示它们的轮廓：他们有什么方法可以为透明涂料提供轮廓？

请参阅下面的主要代码和当前结果的屏幕截图。

非常感谢您的帮助或提示！

托马斯 ![目前的结果 - 不令人满意](../Images/110c747ff190024cbb0fc93b6de0c3e0.png)

 `````
private JFreeChart createChart(LeaksChartSeriesVO data){
    JFreeChart chart = ChartFactory.createStackedBarChart(
            "Leak meters", //Title
            "Leaks", //Domain axis (X) label
            "%", //Range axis (Y) label
            data.bars,
            PlotOrientation.HORIZONTAL, 
            true, //Legend?
            true, //Tooltip?
            false); //Urls?
    CategoryPlot plot = (CategoryPlot) chart.getPlot();

    //Sets X axis sub-legends
    SubCategoryAxis subCat = new SubCategoryAxis("Leak meters");

    //Adds second dataset
    plot.setDataset(1, data.dots);

    //Defines level renderer
    LevelRenderer renderer1 = new LevelRenderer();
    renderer1.setSeriesPaint(0, Color.black);
    plot.setRenderer(1, renderer1);

    //Sets Y axis as %
    ((StackedBarRenderer) plot.getRenderer()).setRenderAsPercentages(true);

    //Sets colors
    ((StackedBarRenderer) plot.getRenderer()).setSeriesPaint(0, new Color(0, 0, 0, 0)); //Transparent for start
    ((StackedBarRenderer) plot.getRenderer()).setSeriesPaint(1, Color.gray); //Grey low
    ((StackedBarRenderer) plot.getRenderer()).setSeriesPaint(2, Color.green); //Green
    ((StackedBarRenderer) plot.getRenderer()).setSeriesPaint(3, Color.gray); //Grey high
    ((StackedBarRenderer) plot.getRenderer()).setSeriesPaint(4, new Color(0, 0, 0, 0)); //Transparent for end
    ((StackedBarRenderer) plot.getRenderer()).setDrawBarOutline(true);
    ((StackedBarRenderer) plot.getRenderer()).setBaseOutlinePaint(Color.black);

    //Setup which items not to see in legend
    ((StackedBarRenderer) plot.getRenderer()).setSeriesVisibleInLegend(0, false);
    ((StackedBarRenderer) plot.getRenderer()).setSeriesVisibleInLegend(3, false);
    ((StackedBarRenderer) plot.getRenderer()).setSeriesVisibleInLegend(4, false);

    //Sets renderer & axis
    plot.setDomainAxis(subCat);

    //Changes plot render sequence so that bars are in the background and shapes in front
    chart.getCategoryPlot().setDatasetRenderingOrder(DatasetRenderingOrder.FORWARD);

    //Sets margins between bars
    chart.getCategoryPlot().getDomainAxis().setCategoryMargin(0.5f);

    return chart;
} 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:15:26.413

[这是用于绘制条形图的GradientBarPainter](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/renderer/category/GradientBarPainter.html)的默认行为：当条形图透明时，它不会绘制轮廓。

您可以改为使用将绘制轮廓的[StandardBarPainter 。](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/renderer/category/StandardBarPainter.html)

只需添加：

```
StackedBarRenderer renderer = (StackedBarRenderer) plot.getRenderer();
renderer.setBarPainter(new StandardBarPainter()); 
```

另一种解决方案是保留`GradientBarPainter`但对条形使用*几乎透明*的颜色：

```
setSeriesPaint(0, new Color(0, 0, 0, 1)); 
`````

# php - 循环遍历 JSON 数组

> ID：15099270
> 
> 赞同：3
> 
> 时间：2013-02-26T21:06:56.423
> 
> 标签：php, javascript, ajax, arrays, json

我有一个要传递给 PHP 的 JSON 数组。最终，我将从我的 PHP 文件中传递和接收更多信息，但目前就是这样。现在它正在接收 1 个数组并发送回同一个数组，没问题。我可以遍历 Javascript 中的数据，但是如何遍历传递给我的 PHP 文件的数组？我在使用 foreach 时遇到错误，而 for 循环似乎没有任何帮助。建议？

**Javascript**

```
var fullName = ["John Doe", "Jane Doe"];

$(window).load(function(){
    getList();
});

function getList(){
    $.getJSON(
        "names.php",
        {names : JSON.stringify(fullName)},
        function(data) 
        {
            for(var i = 0; i < data.test.length; i++)
            {
                window.alert(data.test[i]);
            }
        }
      );
} 
```

**PHP**

```
<?php
    $names=json_decode($_REQUEST['names']);

foreach($names as $name)
{
    echo $name;
}

    $data['test'] = $names;
    echo json_encode($data); 
```

foreach 行上的 foreach 错误告诉我“警告：为 foreach() 提供的参数无效”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T00:38:29.183

`json_decode()`不返回数组。要让它这样做，你需要这样做`json_decode($_REQUEST['names'], true)`

[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:58:22.213

```
/* client-side */
$.ajax({

   /* the request's method: */
   type: 'GET',

   /* the request's location: */
   url:'/names.php',

   /* the request's fields: */
   data: JSON.stringify({names: fullName}),

   /* the request's content-type : */
   contentType: 'application/json; charset=utf-8',

   /* the response's content-type: */
   dataType:'json',

   /* the callback function */ 
   success: function(json){

     if(json.length > 0){
         $.each(json, function(i, v){

            console.info(v);

         });
      }
      else {
         alert('wtf?!');
      }
});

/* server-side */
$req=array_merge($_GET, $_POST);

// die(print_r($req));

$names=json_decode($req['names']);
header('content-type: application/json; charset=utf8;');
echo json_encode($names); 
```

或者，可以为请求设置请求方法，我只是有点懒惰，并且使用该 array_merge() 请求是 POST 还是 GET 都没关系（好吧，函数 $.ajax 默认为 GET） . 最佳实践是使用 FireBug 并检查它的网络面板，尤其是 XHR 选项卡。可能问题应该是：“如何使用 XHR 调试器？” 因为这根本没有什么棘手的。

jQuery API 似乎略有更新（请参阅弃用通知）：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

[https://getfirebug.com](https://getfirebug.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T22:33:20.420

尝试

```
$names=json_decode($_POST['names']); // or $_GET 
```

代替

```
$names=json_decode($_REQUEST['names']); 
```

由于 php.ini conf，有时 $_REQUEST 可能为空。查看[request_order](http://www.php.net/manual/en/ini.core.php#ini.request-order)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T22:23:56.533

**编辑**：jQuery 又疯了。

```
$.getJSON("names.php?names=" + encodeURIComponent(JSON.stringify(fullName)), function(data)
        {
                for(var i = 0; i < data.test.length; i++)
                {
                        window.alert(data.test[i]);
                }
        }
); 
```

问题在于它将数组中的每个项目作为单独的值添加到 URI。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T22:51:12.353

试试这个，在你的javascript函数中替换下面的行

```
 {names : JSON.stringify(fullName)}, 
```

和

```
"{names :"+ JSON.stringify(fullName) +"}", 
```

* * *

调试测试

```
var fullName = ['John Doe', 'Jane Doe'];
console.log({names : JSON.stringify(fullName)});
// gives Object { names="["John Doe","Jane Doe"]"} 
```

但与

```
console.log("{names :"+ JSON.stringify(fullName) +"}");
// gives {names :["John Doe","Jane Doe"]} 
```

//所以我猜第二个是正确的json字符串传递

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T22:03:05.623

使用时似乎发生了一些奇怪的事情：

```
{names : JSON.stringify(fullName)} 
```

`GET`当您使用or发送键值对`POST`时，您可能需要正确编码值。

你可以这样做：

```
{names : encodeURIComponent(JSON.stringify(fullName))} 
```

# c# - XNA 游戏中的进度条

> ID：15099272
> 
> 赞同：1
> 
> 时间：2013-02-26T21:07:04.387
> 
> 标签：c#, .net, xna

有谁知道如何添加计时器来控制进度条的速度？另外，我需要那个时间在另一个功能中使用它，它仅在进度条移动时运行并在进度条停止时停止..所以具体来说，我需要设置一个计时器来控制进度条以及如何获取它?

顺便说一句..我在 Visual Studio 中使用 XNA 游戏开发的 c# 编码

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:14:00.743

XNA 中没有单独的计时器功能，但您可以锁定已经过去的秒数。

中的`Update`和`Draw`方法`Game`提供了一个`GameTime`对象，该对象包含该`TotalTimeElapsed`属性。保留该对象的副本（只需确保其副本而不是引用）作为以前的时间，并将其与“当前时间”进行比较。如果差异超过目标值，请执行您的活动。

```
//at top of class
private TimeSpan previousTime;
private TimeSpan targetTime = new TimeSpan(0, 0, 5); //5 seconds
private bool isFirstUpdate = true;

//later down in your update
public void Update(GameTime gameTime)
{
    if(isFirstUpdate)
    {
        previousTime = new TimeSpan(gameTime.TotalElapsedTime.Ticks);
        isFirstUpdate = false;
    }

    if(gameTime.TotalElapsedTime - previousTime >= targetTime)
    {
        //do some event, and don't forget to re-set previous time
        previousTime = new TimeSpan(gameTime.TotalElapsedTime.Ticks);
    }
} 
```

# android - 碎片，我什么时候“活跃”？

> ID：15099278
> 
> 赞同：5
> 
> 时间：2013-02-26T21:07:21.450
> 
> 标签：android, android-fragments

我一直对此感到沮丧，我找不到一个好的答案，所以希望这里有人可以提供指导。

我有一个使用`AsyncTask`非常广泛的片段。我经常被片段调用的错误所困扰`getActivity()`，它返回null。我假设这些正在发生，因为片段中的某些方法在附加活动之前或分离之后被调用。

在我的代码中处理这个问题的正确方法是什么？我不想让这个成语到处乱扔，

```
Activity activity = getActivity();
if (activity != null) { // do something } 
```

查看文档`Fragment`，我可以想出许多可能的钩子来解决这个问题：`isDetached()`、、、、`onActivityCreated()`等等。什么是正确的组合？`onAttach()``isResumed()`

编辑：

一些人建议在暂停时取消任务，但这意味着标准的成语，

```
new AsyncTask<...>.execute(); 
```

不能使用。这意味着每个 exec 都`AsyncTask`需要被跟踪到完成或取消。我从未在 Google 或其他地方的示例代码中看到过这种情况。就像是，

```
private final Set<AsyncTask<?>> tasks = new HashSet<>;
...
AsyncTask<?> t = new AsyncTask<...>() {
  ...
  public void onPostExecute(...) {
    tasks.remove(this);
    ...
  } 
}
tasks.add(t);
t.execute();
...
@Override
public void onPause() {
  for (AsyncTask<?> t: tasks) {
    t.cancel();
  }
  tasks.clear();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:11:02.860

尝试在`onPause`or`onStop`方法中取消您的 AsyncTasks。这将防止在不再活动`onPostExecute`时调用（返回）。`Fragment``getActivity()``null`

或者您可以`Fragment`通过调用`this.isAdded()`您的`Fragment`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T18:31:15.313

我找不到一个好的解决方案。总之，要么使用 a `Loader`，要么在使用它之前检查它`getActivity()`不返回 null 。我研究过使用`Loader`s，但该模式对应用程序的结构和数据检索的性质做了很多假设，这对我不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:27:04.240

在协调生命周期方面，我将`onActivityCreated`其作为一个心理基准——它标志着底层活动完成它自己的点`onCreate`。在此之前，我不相信有活动可以`getActivity()`从。

获取活动返回 null 听起来像是您调用 getActivity() 太早（即在它创建之前）或太晚（即当它停止与片段交互时）。停止您的任务`onPause()`将阻止 getActivity 返回 null ，因为一旦片段停止与底层活动交互，它将切断任务，因为活动本身已暂停。我认为等待`onStop()`可能为时已晚，因为如果在底层活动暂停时任务仍在运行，它可能仍然返回 null。

# mysql - 使用 join 和 limit 删除 mysql

> ID：15099280
> 
> 赞同：0
> 
> 时间：2013-02-26T21:07:40.443
> 
> 标签：mysql, sql, join, limit

我有这样的sql查询：

```
DELETE `LINK_LA_TYP`
FROM
    `LINK_LA_TYP`
JOIN `LINK_ART` ON `LINK_LA_TYP`.LAT_LA_ID = `LINK_ART`.LA_ID
JOIN `ARTICLES` ON `LINK_ART`.LA_ART_ID = `ARTICLES`.ART_ID
WHERE
    (
        `ARTICLES`.ART_SUP_ID IN(
            10008,
            10439,
            11005,
             ...
             ...
            441
        )
    )
LIMIT 50000; 
```

但是我得到了错误....从mysql-doc中我得到了delete+join+limit我会得到错误....

但是我怎样才能改变我的代码？（对 mysql 和 sql 来说都是新的）。如何更改我的代码？限制要删除的行....

同样在 phpmyadmin 我得到

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“限制 50”附近使用正确的语法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:32:42.163

从 docs 对于多表语法，DELETE 从每个 tbl_name 中删除满足条件的行。在这种情况下，不能使用 ORDER BY 和 LIMIT。dev.mysql.com/doc/refman/5.0/en/delete.html – Michael Berkowski 2 分钟前

我同意这一点。此外，DELETE 命令不能有 LIMIT 子句。此外，一般来说，您不能从多个 JOINed 表中删除。

可以使用子选择来重写语句，例如：

```
delete from LINK_LA_TYP
where LAT_LA_ID in 
    (select LA_ID
    from LINK_ART
    join ARTICLES on ARTICLES.ART_ID = LINK_ART.LA_ART_ID
    where ARTICLES.ART_SUP_ID in (...)); 
```

# java - 使用 Java DOM 调用 getAttributeNS 的正确方法是什么？

> ID：15099281
> 
> 赞同：0
> 
> 时间：2013-02-26T21:07:49.450
> 
> 标签：java, dom, namespaces

我在从 Java DOM 正确调用 getAttributeNS() （和其他 NS 方法）时遇到问题。首先，这是我的示例 XML 文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<bookstore>
    <book xmlns:c="http://www.w3schools.com/children/" xmlns:foo="http://foo.org/foo" category="CHILDREN">
        <title foo:lang="en">Harry Potter</title>
        <author>J K. Rowling</author>
        <year>2005</year>
        <price>29.99</price>
    </book>
</bookstore> 
```

这是我使用 DOM 并调用 getAttributeNS 的小 Java 类：

```
package com.mycompany.proj;

import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.DocumentBuilder;
import org.w3c.dom.Document;
import org.w3c.dom.NodeList;
import org.w3c.dom.Element;
import java.io.File;

public class AttributeNSProblem
{
    public static void main(String[] args)
    {
        try
        {
            File fXmlFile = new File("bookstore_ns.xml");
            DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
            Document doc = dBuilder.parse(fXmlFile);

            System.out.println("Root element: " + doc.getDocumentElement().getNodeName());

            NodeList nList = doc.getElementsByTagName("title");
            Element elem = (Element)nList.item(0);
            String lang = elem.getAttributeNS("http://foo.org/foo", "lang");
            System.out.println("title lang: " + lang);
            lang = elem.getAttribute("foo:lang");
            System.out.println("title lang: " + lang);
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }
} 
```

当我调用 getAttributeNS(" [http://foo.org/foo](http://foo.org/foo) ", "lang") 时，它返回一个空字符串。我也试过 getAttributeNS("foo", "lang")，同样的结果。

检索由命名空间限定的属性值的正确方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:52:09.260

紧接着`DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();`，添加`dbFactory.setNamespaceAware(true);`

# regex - 如何创建一个匹配 3 位或少于 3 位数字的正则表达式？

> ID：15099288
> 
> 赞同：4
> 
> 时间：2013-02-26T21:08:10.573
> 
> 标签：regex

我想删除任何 3 位或少于 3 位的数字。有人可以帮我做一个正则表达式吗？

目前，我的代码删除了它找到的所有数字。

```
 # Cleans Numbers
     def cleanNumbers(stringToClean):
       stringToClean = re.sub(r'[0-9]*', r'', stringToClean)

       print 'String after cleaning : %s' %stringToClean

       return stringToClean 
```

数字将被空格包围。我传递给函数的示例字符串：

一段时间后，Win8 客户端上的连接中断。【坚持】123 1 22 333 4444 554665 645fdgf45 ds3434 457870978934787843 345342kl

我将上述函数调用如下：

```
# Main function, calls other functions          
def main():

   # Parsing the input query
   searchQuery = open('input.txt', 'r').read()
   print 'Input query : %s' %searchQuery

   # Cleaning the input query
   string = CleanUpText.cleanNumbers(searchQuery) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T21:21:28.680

`\b[0-9]{1,3}\b`查找最多包含三位数字的数字块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:16:37.073

```
re.sub(r'[0-9]{,3}',r'',stringToClean) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T21:35:26.813

> 我已更正了“3 或小于 3”的问题

鉴于此，它应该很简单：`\b\d{1,3}\b`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-26T21:11:52.237

你可以使用这样的正则表达式

```
r'\b[0-9]{1,2}\b' 
```

编辑：对不起，我没有真正思考就快速写下了我的答案。例如，您必须使用边界，以免捕获 3456

# php - 在 html/php 中进行三个单独的测验提交会话

> ID：15099289
> 
> 赞同：2
> 
> 时间：2013-02-26T21:08:11.133
> 
> 标签：php, html

我有一个测验，它有两个部分。第一部分是表格，第二部分是测验的确认。

形式：[形式](http://www.interfaithmedical.com/checksite/attCertStartC.php)

我正在使用 POST 方法。因此，如果用户提交表单并进入祝贺页面并刷新它，它将继续发送电子邮件。我试图阻止它。

相关PHP：

我正在尝试更改以下代码中的某些内容：

```
if($fname <> "" and $lname <> "" and $ydept <> "") {
    mail ($myEmail, $mailSubject, $msgBody, $header);
    mail ($userEmail, $sentMailSubject, $sentMailBody, $sentHeader); 
```

像这样：

```
if($fname <> "" and $lname <> "" and $ydept <> "") {
    mail ($myEmail, $mailSubject, $msgBody, $header);
    mail ($userEmail, $sentMailSubject, $sentMailBody, $sentHeader);
header ("redirect me to another php page with the $fname included to be used as a variable");
}
else {
    display not complete exam page and redirect me to the form;
} 
```

我希望将 $fname 或任何其他变量转移到 congratulation.php 页面，因此不会在与祝贺页面相同的页面上发送电子邮件，而是在不同的页面上发送，因此无论用户使用多少次刷新，没有任何反应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:15:20.310

根据您的评论，“我希望将 $fname 或任何其他变量转移到 congratulation.php 页面”，我建议只需将`$_POST`数组传递给会话变量，或者执行计算并将必要的数据保存到单独的数组中，并将该数组作为会话变量传递。那有意义吗？

参考。 [http://www.phpriot.com/articles/intro-php-sessions/7](http://www.phpriot.com/articles/intro-php-sessions/7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:16:19.470

为了防止用户刷新页面并再次发送电子邮件，您需要做的是重定向到您拥有的另一个页面。但是，在重定向页面中，您将使用`GET`而不是`POST`.

```
$name = urlencode($name);
$email = urlencode($email);
header("Location: well_done_chap.php?var1=$name&var2=$email"); 
```

然后在`well_done_chap.php`（或任何你称之为的）中，只需执行以下操作：

```
if (isset($_GET['var1']) && isset($_GET['var2'])) {
    $name = $_GET['var1'];
    $email = $_GET['var2'];

    // Do your other stuff here

} else {
    echo "Invalid access";
} 
```

# python - 使用 Sikuli 自动截取窗口的屏幕截图？

> ID：15099290
> 
> 赞同：1
> 
> 时间：2013-02-26T21:08:26.300
> 
> 标签：python, python-2.7, sikuli

这里有一个简单的问题：我想使用 Sikuli 在 Mac 上截取窗口的屏幕截图，可以通过按 CMD+SHIFT+4 然后按空格，然后单击窗口来完成。

对于 CMD+SHIFT+4 我遇到了麻烦。这不起作用：

```
keyDown(KEY_META)
keyDown(Key.SHIFT)
wait(1)
type("4")
wait(1)
keyUp(Key.SHIFT)
keyUp(KEY_META) 
```

有人有想法么？我对击键组合的其他途径持开放态度，例如，我知道复制这个效果很好：

```
type("c",KEY_META) 
```

但是，它不接受三个参数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T13:13:45.413

```
type("4", KeyModifier.CMD+KeyModifier.SHIFT) 
```

或者，甚至更好：

```
import shutil
import os
screenshotsDir = "absolute-path-to-a-folder"
img = capture(some_region)
shutil.move(img, os.path.join(screenshotsDir, "some-name.png")) 
```

其中 some_region 是：

```
some_region = SCREEN # for whole screen 
```

或者

```
someRegion = App.focusedWindow() # for the frontmost window 
```

这样做的好处是您可以控制镜头的文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-31T08:19:48.007

找到了一个更好的解决方案，它确实有效：

```
screen = Screen()
scr_img = screen.capture(screen.getBounds())
scr_img.save("C:\Screenshots", "screenshot") 
```

Screen.capture() 使用方法返回 ScreenImage 类的实例：'save'、'saveInBundle'、'getFile'、'getFilename'。方法 save() 将唯一编号添加到提供的前缀参数。

# graphics - 如何在 XNA 中消除光/影对我的模型的影响？

> ID：15099295
> 
> 赞同：3
> 
> 时间：2013-02-26T21:08:55.130
> 
> 标签：graphics, model, 3d, xna, game-engine

我正在开发一个小游戏，我会绘制一个具有重复纹理的场地（土地）。我的问题是渲染结果。这给人的印象是我的立方体周围的一切看起来都像是一个光影。是否可以在我的绘图功能中标准化灯光或移除阴影效果？

对不起，我的英语不好..

这是一个屏幕截图，可以更好地理解我的问题。 ![在此处输入图像描述](../Images/b019e1f1e11b84e072a9168305dbd81b.png)

这是我的代码绘制函数（带顶点缓冲区的实例化模型）

```
 // Draw Function (instancing model - vertexbuffer)
    public void DrawModelHardwareInstancing(Model model,Texture2D texture, Matrix[] modelBones,
                                     Matrix[] instances, Matrix view, Matrix projection)
    {
        if (instances.Length == 0)
            return;

        // If we have more instances than room in our vertex buffer, grow it to the neccessary size.
        if ((instanceVertexBuffer == null) ||
            (instances.Length > instanceVertexBuffer.VertexCount))
        {
            if (instanceVertexBuffer != null)
                instanceVertexBuffer.Dispose();

            instanceVertexBuffer = new DynamicVertexBuffer(Game.GraphicsDevice, instanceVertexDeclaration,
                                                           instances.Length, BufferUsage.WriteOnly);
        }

        // Transfer the latest instance transform matrices into the instanceVertexBuffer.
        instanceVertexBuffer.SetData(instances, 0, instances.Length, SetDataOptions.Discard);

        foreach (ModelMesh mesh in model.Meshes)
        {
            foreach (ModelMeshPart meshPart in mesh.MeshParts)
            {
                // Tell the GPU to read from both the model vertex buffer plus our instanceVertexBuffer.
                Game.GraphicsDevice.SetVertexBuffers(
                    new VertexBufferBinding(meshPart.VertexBuffer, meshPart.VertexOffset, 0),
                    new VertexBufferBinding(instanceVertexBuffer, 0, 1)
                );

                Game.GraphicsDevice.Indices = meshPart.IndexBuffer;

                // Set up the instance rendering effect.
                Effect effect = meshPart.Effect;
                //effect.CurrentTechnique = effect.Techniques["HardwareInstancing"];
                effect.Parameters["World"].SetValue(modelBones[mesh.ParentBone.Index]);
                effect.Parameters["View"].SetValue(view);
                effect.Parameters["Projection"].SetValue(projection);
                effect.Parameters["Texture"].SetValue(texture);

                // Draw all the instance copies in a single call.
                foreach (EffectPass pass in effect.CurrentTechnique.Passes)
                {
                    pass.Apply();

                    Game.GraphicsDevice.DrawInstancedPrimitives(PrimitiveType.TriangleList, 0, 0,
                                                           meshPart.NumVertices, meshPart.StartIndex,
                                                           meshPart.PrimitiveCount, instances.Length);
                }
            }

        }
    }
    // ### END FUNCTION DrawModelHardwareInstancing 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T21:15:14.020

问题是您正在使用的立方体网格。法线是平均的，但我想你希望它们与立方体的面正交。

您将不得不使用总共 24 个顶点（每边 4 个）而不是 8 个顶点。每个角将有 3 个顶点，位置相同但法线不同，每个相邻面各有一个：

![两个立方体，一个具有共享法线，一个具有正确的法线](../Images/465fb84b3a9755a9a38588e2dde48603.png)

如果 FBX 导出器无法配置为正确导出法线，只需创建自己的立方体网格：

```
var vertices = new VertexPositionNormalTexture[24];

// Initialize the vertices, set position and texture coordinates
// ...

// Set normals

// front face
vertices[0].Normal = new Vector3(1, 0, 0);
vertices[1].Normal = new Vector3(1, 0, 0);
vertices[2].Normal = new Vector3(1, 0, 0);
vertices[3].Normal = new Vector3(1, 0, 0);

// back face
vertices[4].Normal = new Vector3(-1, 0, 0);
vertices[5].Normal = new Vector3(-1, 0, 0);
vertices[6].Normal = new Vector3(-1, 0, 0);
vertices[7].Normal = new Vector3(-1, 0, 0);

// ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:11:04.717

看起来你的计算不正确/没有法线。 [看这个例子，特别是第 3 部分。](http://msdn.microsoft.com/en-us/library/bb464051%28v=xnagamestudio.10%29.aspx)

法线是一个向量，它描述了光在垂直照射时从该顶点/多边形反射的方向。

[我喜欢这张图片来展示](http://en.wikipedia.org/wiki/File%3aSurface_normal.png)蓝线是曲线上每个特定点的法线方向。

在 XNA 中，您可以计算具有顶点 vert1、vert2 和 vert3 的多边形的法线，如下所示：

```
Vector3 dir = Vector3.Cross(vert2 - vert1, vert3 - vert1);
Vector3 norm = Vector3.Normalize(dir); 
```

在很多情况下，这是由建模软件自动完成的，因此无需计算。如果您在代码中创建多维数据集，您可能确实需要执行该计算。

# database - 从 vb.net 将连接信息和参数传递给基于服务器的 SSIS 作业

> ID：15099301
> 
> 赞同：0
> 
> 时间：2013-02-26T21:09:18.097
> 
> 标签：database, sql-server-2008, parameters, ssis, vb.net-2010

在查看了所有不同的选项后，我仍然感到困惑。这是场景。我们在同一台服务器上有多个数据库，我们希望单个 SSIS 作业处理从文件导入（或导出）到（从）表中。我们从 vb.net 调用它，并且该作业正在服务器上的 SSIS 上运行。我们没有可用的 xp_cmdshell。我们需要向作业传递唯一的作业信息（可能有 2 个人在同一数据库或同一服务器上的不同数据库上运行相同的作业），数据库连接信息（不能在作业，因为可以根据需要添加/删除 db，我们不想重新配置作业）和文件名/路径（在服务器上或允许 SSIS 可用的 UNC 路径）。
我们已经查看了声明作业/作业步骤然后直接执行作业的选项。我们喜欢这个想法，因为 Job 是独一无二的，我们可以让作业调用的 sql proc 将问题通过作业 id 报告回一个公共日志表，然后可以查看。
我不真正关注的是如何传递这份工作所需的信息。
在[http://code.msdn.microsoft.com/Calling-a-SSIS-Package-a35afefb](http://code.msdn.microsoft.com/Calling-a-SSIS-Package-a35afefb)我看到他们使用 set 命令传递参数，但我对事情被处理两次的调用解释感到困惑。此外，在该示例中，我是否会在“添加作业”步骤中更改对我的数据库的主数据库引用？我的问题是没有一个例子是真正干净和简单的传递参数和更改数据库，很多使用不同的选项，如从数据源处理的数据库列表，没有一个真正干净地告诉我如何处理将被传递的变量到一个被调用的存储过程。
我没有时间深入研究和实验，我需要看看它是如何完成的，因为我试图在一个层次上理解它，所以我知道我们可以如何利用它并适应我们需要使用的信息（即我是否需要连接信息来动态分配它），因为我需要知道它以了解我在宏伟计划中从哪里获得该信息。（我们没有将它存储在实际的数据库中，我们在中央数据库中有一个存储库，但我不知道我需要存储什么！）布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:29:03.320

对单个作业运行是动态的参数可以通过配置表传递到 SSIS 包。启动作业的进程会在启动作业之前在配置表中设置任何必要的参数。该作业启动 SSIS 包，该包具有一个连接管理器，用于从配置表中读取值并将其读取到 SSIS 包中的参数值中。

您提到您有数据库连接信息，如果您选择通过表传递参数，请记住将 SQL 登录信息存储在数据库中是不好的做法。SSIS 包中的连接管理器应该使用 windows 身份验证，并且可以将 SSIS 包所需的权限授予 SQLAgent 服务帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:27:04.060

据我了解，您想通过 SQLAgent 作业运行一个（或多个）包，并且它将运行的数据库可能会发生变化。

正如 supergrady 所说，您可以通过配置表将特定参数传递给包。

我所做的是创建一个配置表并添加一个状态列（指示开/关、真/假的位）。这允许我运行一个 sql 脚本来设置我想要的特定数据库的状态并关闭那些我不想要的数据库。对我来说，这比打开工作和摆弄命令行值更容易，这是另一种获得你想要的东西的方式。我希望这有帮助

# c# - 数据网格行的两种颜色不同

> ID：15099302
> 
> 赞同：0
> 
> 时间：2013-02-26T21:09:23.213
> 
> 标签：c#, wpf, xaml, datagrid

我想在我的数据网格上设置不同的背景颜色。我想要两种颜色。第一行颜色 XXXX，第二行颜色 YYYY，第三行颜色 XXXXX，以此类推……

我尝试使用 AlternationIndex 创建样式，但我在行上看到相同的颜色。

任何人都可以帮助我吗？

非常感谢 ：）

```
 <Style x:Key="RowStyleWithAlternation" TargetType="DataGridRow">
    <Setter Property="SnapsToDevicePixels" Value="True" />
    <Setter Property="Background" Value="GhostWhite"/>
    <Setter Property="FontWeight" Value="Normal"/>
    <Setter Property="ContextMenu" Value="{x:Null}"/>
    <Style.Triggers>
        <Trigger Property="AlternationIndex" Value="1">
            <Setter Property="Background" Value="#9f3131"/>
        </Trigger>
        <Trigger Property="IsMouseOver" Value="True">
            <Setter Property="Background" Value="#F9F99F"/>
        </Trigger>
        <Trigger Property="IsSelected" Value="True">
            <Setter Property="Background" Value="#F9F99F" />
        </Trigger>
        <Trigger Property="Validation.HasError" Value="True" >
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="Red" ShadowDepth="0" BlurRadius="20" />
                </Setter.Value>
            </Setter>
            <Setter Property="BorderThickness" Value="2" />
            <Setter Property="BorderBrush" Value="Red" />
            <Setter Property="Foreground" Value="Blue" />
            <Setter Property="FontSize" Value="12" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T00:16:02.260

[DataGrid.AlternatingRowBackground](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.alternatingrowbackground.aspx)

```
<Setter Property="AlternatingRowBackground" Value="#9f3131"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:07:34.910

您需要将`AlternationCount`属性设置`DataGrid`为 2。

并更改您的样式以设置第二个颜色`AlternationIndex`。

```
<Trigger Property="AlternationIndex" Value="0">
   <Setter Property="Background" Value="XXXXX"/>
</Trigger>

<Trigger Property="AlternationIndex" Value="1">
   <Setter Property="Background" Value="YYYYY"/>
</Trigger> 
```

希望这可以帮助！

# java - 是什么导致 java.net.MalformedURLException：无协议：尝试在 weblogic 中部署 .ear 时？

> ID：15099311
> 
> 赞同：1
> 
> 时间：2013-02-26T21:09:52.647
> 
> 标签：java, eclipse, web, weblogic, ear

我正在尝试部署 EAR 文件。我是 weblogic 的新手。我正在为 Eclipse 使用 oracle 企业包。我有一个正在运行的 weblogic 服务器。我创建了一个企业应用程序项目我的 application.xml 是：

```
<?xml version="1.0" encoding="ASCII"?>
<application xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:application="http://java.sun.com/xml/ns/javaee/application_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/application_5.xsd" version="5">
   <display-name>My App</display-name>
<module>
<ejb>appEJB.jar</ejb>
</module>
<module>
<web>
  <web-uri>app.war</web-uri>
  <context-root>app</context-root>
</web>
</module>
</application> 
```

我的 weblogic-application.xml 是：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <wls:weblogic-application xmlns:wls="http://xmlns.oracle.com/weblogic/weblogic- application" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/javaee_5.xsd http://xmlns.oracle.com/weblogic/weblogic-application http://xmlns.oracle.com/weblogic/weblogic-application/1.1/weblogic-application.xsd">
<!--weblogic-version:10.3.3-->
<wls:application-param>
    <wls:param-name>webapp.encoding.default</wls:param-name>
    <wls:param-value>UTF-8</wls:param-value>
</wls:application-param>
</wls:weblogic-application> 
```

我收到错误“名为“EARNAME”的模块无法部署。请参阅错误日志。错误日志有这个堆栈跟踪：

```
java.lang.Exception: Exception received from deployment driver. See Error Log view for more detail.
at oracle.eclipse.tools.weblogic.server.internal.DeploymentProgressListener.watch(DeploymentProgressListener.java:190)
at oracle.eclipse.tools.weblogic.server.internal.WlsJ2EEDeploymentHelper.deploy(WlsJ2EEDeploymentHelper.java:506)
at oracle.eclipse.tools.weblogic.server.internal.WeblogicServerBehaviour.publishWeblogicModules(WeblogicServerBehaviour.java:1466)
at oracle.eclipse.tools.weblogic.server.internal.WeblogicServerBehaviour.publishToServer(WeblogicServerBehaviour.java:898)
at oracle.eclipse.tools.weblogic.server.internal.WeblogicServerBehaviour.publishOnce(WeblogicServerBehaviour.java:686)
at oracle.eclipse.tools.weblogic.server.internal.WeblogicServerBehaviour.publish(WeblogicServerBehaviour.java:539)
at org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publish(ServerBehaviourDelegate.java:774)
at org.eclipse.wst.server.core.internal.Server.publishImpl(Server.java:3108)
at org.eclipse.wst.server.core.internal.Server$PublishJob.run(Server.java:345)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53)
Caused by: java.net.MalformedURLException: no protocol: Files/OracleWebLogic/Middleware/wlserver_10.3/server/lib/../../../modules/features/weblogic.server.modules_10.3.3.0.jar
at java.net.URL.<init>(URL.java:567)
at java.net.URL.<init>(URL.java:464)
at java.net.URL.<init>(URL.java:413)
at sun.rmi.server.LoaderHandler.pathToURLs(LoaderHandler.java:751)
at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:147)
at java.rmi.server.RMIClassLoader$2.loadClass(RMIClassLoader.java:620)
at java.rmi.server.RMIClassLoader.loadClass(RMIClassLoader.java:247)
at sun.rmi.server.MarshalInputStream.resolveClass(MarshalInputStream.java:197)
at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1575)
at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1496)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1732)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1667)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1323)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
at java.rmi.MarshalledObject.get(MarshalledObject.java:142)
at javax.management.remote.rmi.RMIConnectionImpl$6.run(RMIConnectionImpl.java:1513)
at java.security.AccessController.doPrivileged(Native Method)
at javax.management.remote.rmi.RMIConnectionImpl.unwrap(RMIConnectionImpl.java:1505)
at javax.management.remote.rmi.RMIConnectionImpl.access$500(RMIConnectionImpl.java:72)
at javax.management.remote.rmi.RMIConnectionImpl$7.run(RMIConnectionImpl.java:1548)
at java.security.AccessController.doPrivileged(Native Method)
at javax.management.remote.rmi.RMIConnectionImpl.unwrap(RMIConnectionImpl.java:1544)
at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:771)
at javax.management.remote.rmi.RMIConnectionImpl_WLSkel.invoke(Unknown Source)
at weblogic.rmi.internal.BasicServerRef.invoke(BasicServerRef.java:589)
at weblogic.rmi.internal.BasicServerRef$1.run(BasicServerRef.java:477)
at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:363)
at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:147)
at weblogic.rmi.internal.BasicServerRef.handleRequest(BasicServerRef.java:473)
at weblogic.rmi.internal.wls.WLSExecuteRequest.run(WLSExecuteRequest.java:118)
at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
at weblogic.work.ExecuteThread.run(ExecuteThread.java:173) 
```

部署失败的原因可能是什么？我知道服务器正在运行，当我在 localhost:7001/console 成功访问 gui 时

我将 .ear 文件导出到 autodeploy 文件夹。还要在其中放入一个模块（.jar）。

新例外：

```
 java.lang.Exception: Exception received from deployment driver. See Error Log view for more detail.
at oracle.eclipse.tools.weblogic.server.internal.DeploymentProgressListener.watch(DeploymentProgressListener.java:190)
at oracle.eclipse.tools.weblogic.server.internal.WlsJ2EEDeploymentHelper.deploy(WlsJ2EEDeploymentHelper.java:506)
at oracle.eclipse.tools.weblogic.server.internal.WeblogicServerBehaviour.publishWeblogicModules(WeblogicServerBehaviour.java:1466)
at oracle.eclipse.tools.weblogic.server.internal.WeblogicServerBehaviour.publishToServer(WeblogicServerBehaviour.java:898)
at oracle.eclipse.tools.weblogic.server.internal.WeblogicServerBehaviour.publishOnce(WeblogicServerBehaviour.java:686)
at oracle.eclipse.tools.weblogic.server.internal.WeblogicServerBehaviour.publish(WeblogicServerBehaviour.java:539)
at org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publish(ServerBehaviourDelegate.java:774)
at org.eclipse.wst.server.core.internal.Server.publishImpl(Server.java:3108)
at org.eclipse.wst.server.core.internal.Server$PublishJob.run(Server.java:345)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)

 Caused by: weblogic.application.ModuleException: 
at weblogic.ejb.container.deployer.EJBModule.init(EJBModule.java:332)
at weblogic.application.internal.flow.ModuleListenerInvoker.init(ModuleListenerInvoker.java:167)
at weblogic.application.internal.flow.InitModulesFlow.initModule(InitModulesFlow.java:285)
at weblogic.application.internal.flow.InitModulesFlow.initModules(InitModulesFlow.java:298)
at weblogic.application.internal.flow.InitModulesFlow.prepare(InitModulesFlow.java:330)
at weblogic.application.internal.BaseDeployment$1.next(BaseDeployment.java:1221)
at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:41)
at weblogic.application.internal.BaseDeployment.prepare(BaseDeployment.java:367)
at weblogic.application.internal.EarDeployment.prepare(EarDeployment.java:58)
at weblogic.application.internal.DeploymentStateChecker.prepare(DeploymentStateChecker.java:154)
at weblogic.deploy.internal.targetserver.AppContainerInvoker.prepare(AppContainerInvoker.java:60)
at weblogic.deploy.internal.targetserver.operations.ActivateOperation.createAndPrepareContainer(ActivateOperation.java:207)
at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doPrepare(ActivateOperation.java:98)
at weblogic.deploy.internal.targetserver.operations.AbstractOperation.prepare(AbstractOperation.java:217)
at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentPrepare(DeploymentManager.java:747)
at weblogic.deploy.internal.targetserver.DeploymentManager.prepareDeploymentList(DeploymentManager.java:1216)
at weblogic.deploy.internal.targetserver.DeploymentManager.handlePrepare(DeploymentManager.java:250)
at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.prepare(DeploymentServiceDispatcher.java:159)
at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doPrepareCallback(DeploymentReceiverCallbackDeliverer.java:171)
at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$000(DeploymentReceiverCallbackDeliverer.java:13)
at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$1.run(DeploymentReceiverCallbackDeliverer.java:46)
at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:528)
at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
at weblogic.work.ExecuteThread.run(ExecuteThread.java:173)
 Caused by: java.io.FileNotFoundException: Unable to find ejb-jar with uri appEJB.jar in ear at C:\Users\Jonathan.Rosenski\workspace\.metadata\.plugins\org.eclipse.core.resources\.projects\EAR\beadep\base_domain\EAR\split_src

at weblogic.ejb.spi.EJBJar.<init>(EJBJar.java:81)
at weblogic.ejb.container.deployer.EJBModule.buildClassFinder(EJBModule.java:199)
at weblogic.ejb.container.deployer.EJBModule.init(EJBModule.java:311) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T21:37:07.540

这看起来像是由目录名称中的空格引起的问题。查看错误消息：

```
 Caused by: java.net.MalformedURLException: 
    no protocol:
 Files/OracleWebLogic/Middleware/wlserver_10.3/server/lib/../../../modules/features/weblogic.server.modules_10.3.3.0.jar 
```

似乎 jar 文件被 URL 引用为“file://c:/Program Files/OracleWebLogic ...”，并且“Program Files”中的空间导致了异常。

您可以尝试将您的安装移动到不同的目录，例如 c:/OracleWebLogic 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-31T20:04:20.207

这可能会帮助某人。

**从weblogic.xml**中删除所有出现的“ **wls:** ” （在您的情况下是 weblogic-application.xml），希望它应该运行良好。

 **至少它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-04T11:34:21.987

继上述 EJK 的正确答案之后，我只想为遇到类似错误的任何人添加以下解决方法。

解决这个问题的方法是用**%20**替换路径名中的所有**空格**，这是 Java 细微差别的结果：[MaformedURLException Bug](https://bugs.java.com/bugdatabase/view_bug.do?bug_id=4496398)。

 **对我来说，这个问题是在尝试指定 java VM 参数时出现的——更具体地说，是在尝试为我的注册表指定一个包含空格的代码库时。

```
rmiregistry -J-Djava.rmi.server.codebase="file:/Users/matt/Path With Spaces/" 
```

由于路径实际上被视为 URL，因此正确的路径应该是：

```
rmiregistry -J-Djava.rmi.server.codebase="file:/Users/matt/Path%20With%20Spaces/" 
```

为了完整起见，我想指出，在运行 rmiregistry 时实际上不会抛出此错误，而是在您尝试运行连接到注册表的程序时。****

# java - 如何生成由函数支持的列表？

> ID：15099313
> 
> 赞同：2
> 
> 时间：2013-02-26T21:09:53.247
> 
> 标签：java, list, functional-programming, guava

我有一个 的函数`myFunction`，`Function<Integer, T>`我想构造一个`mylist`大小为 的对象`size`，实现`List<T>`（或者可能是某种不可变的列表接口），由该函数支持，从某种意义上说`mylist.get(i) == myFunction.apply(i)`。

我可以手动执行此操作，但是是否有一些（番石榴）代码可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T21:22:13.163

只需使用`java.util.AbstractList`：

```
 new AbstractList<T>() {
   public T get(int i) {
     Preconditions.checkElementIndex(i, size);
     return function.apply(i);
   }
   public int size() {
     return size;
   }
 } 
```

结果不一定是不可变的，因为函数输出可能会有所不同。很可能，您可以完全摆脱，而只需在您的实现`Function`中编写 的实现。`Function``AbstractList`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:12:27.203

也许您应该考虑使用`Iterator<T>`.

```
// Example simple Function that returns each element from the array.
static class Function<T> {
    final T[] t;
    Function(T[] t) {
        this.t = t;
    }
    T apply (Integer i) {
        return t[i];
    }
}

static class FunctionIterator<T> implements Iterator<T> {
    final Function<T> f;
    Integer i;
    Integer to;
    Integer step;

    FunctionIterator(Function<T> f, Integer from, Integer to) {
        this.f = f;
        if ( to > from ) {
            step = 1;
            i = from;
            this.to = to;
        } else {
            step = -1;
            i = to;
            this.to = from;
        }
    }

    @Override
    public boolean hasNext() {
        return i != to + step;
    }

    @Override
    public T next() {
        T next = f.apply(i);
        i += step;
        return next;
    }

    @Override
    public void remove() {
        throw new UnsupportedOperationException("Not supported.");
    }
} 
```

此代码提供了一个`Iterator`. 你可以`Iterable`很容易地从中做出来。[这](https://stackoverflow.com/a/8555153/823393)是一个很好的例子，说明如何做到这一点。

# bash - 如何查找名称以“a”开头的文件？

> ID：15099315
> 
> 赞同：2
> 
> 时间：2013-02-26T21:10:07.763
> 
> 标签：bash, shell, find

我知道我遗漏了一些明显的东西，而且我确定这与我的 -name 部分有关。

这是家庭作业，但我认为我非常接近正确答案。更好的写作方式也总是受到赞赏！

```
find /home/caine/thecopy -user caine -size -10240c -name ^a.* | wc 
```

这给出了`wc`of `0 0 0`，删除名称表达式会产生大量计数。

我试过 ^a 、 '^a' 、 '^a.*' 并且都得出 0 个结果。TIA 伙计们。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T21:11:21.057

您需要包装文件名：

```
find /home/caine/thecopy -user caine -size -10240c -name "a.*" | wc
#                                                        ^   ^ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T21:29:03.283

to 的参数`-name`是 shell 模式，*而不是*正则表达式。`^`and字符将分别`.`匹配文字`^`和`.`字符，而不是名称的开头和任何字符，就像它是正则表达式一样。

如果要匹配以 开头的文件名`'a'`，这应该有效：

```
find /home/caine/thecopy -user caine -size -10240c -name 'a*' | wc 
```

周围的引号`a*`（单引号或双引号）很重要；没有它们，shell 将在`find`看到它之前扩展模式。

如果你真的想匹配一个正则表达式，你可以替换`-name`为`-regex`; 这是一个 GNU 特定的扩展。但在这种情况下，shell 模式可能就足够了。

注意：我假设您要匹配名称以`a`;开头的文件。你实际上并没有这么说。

# python - python打开和内存泄漏

> ID：15099316
> 
> 赞同：0
> 
> 时间：2013-02-26T21:10:09.540
> 
> 标签：python, file-io

什么时候关闭文件？

```
 # Read all data from input file
    mergeData = open( "myinput.txt","r" )
    allData = mergeData.read()
    mergeData.close() 
```

我可以替换此代码吗？

```
allData = read.open( "myinput.txt","r" ) 
```

我想知道文件什么时候关闭？将关闭一个语句运行？或等到程序退出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T21:11:47.460

当对象被删除时，CPython 会自动关闭一个文件对象；当它的引用计数下降到零时它被删除（没有更多的变量引用它）。所以如果你`mergeData`在一个函数中使用，一旦函数完成，局部变量就会被清理掉，文件也会被关闭。

如果您使用`allData = open( "myinput.txt","r" ).read()`引用计数下降到 0 的那一刻`.read()`返回，并且在 CPython 上这意味着文件在那里关闭。

在 Jython 或 IronPython 等其他实现中，对象生命周期的管理方式不同，实际删除对象的那一刻可能要晚得多。

不过，使用文件的*最佳*方式是作为上下文管理器：

```
with open( "myinput.txt","r" ) as mergeData:
    allData = mergeData.read() 
```

它会*自动*调用`.close()`。请参阅[文档](http://docs.python.org/2/library/stdtypes.html#file.close)和[声明](http://docs.python.org/2/reference/compound_stmts.html#with)的文档。`mergeData` *[`file.open()`](http://docs.python.org/2/library/stdtypes.html#file.close)[`with`](http://docs.python.org/2/reference/compound_stmts.html#with)*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T21:12:25.833

是的。是的你可以。没有内存泄漏或类似的东西。

`file`在返回的对象`open()`超出范围并被垃圾回收后，文件句柄将很快关闭。

尽管如果您愿意，您可能希望执行以下操作：

```
with open('myinput.txt') as f:
    data = f.read() 
```

这将确保文件在您完成后立即关闭。*

# asp.net - 将多条记录分组/合并为一个gridview行

> ID：15099320
> 
> 赞同：1
> 
> 时间：2013-02-26T21:10:30.423
> 
> 标签：asp.net, vb.net, gridview, row

我想知道如何将多条记录制作成单个 gridview 行。看看下面的例子。

数据源：

```
FAMILY        GROUP              COLOR
 Dog          Poodle              Blue
 Dog          German Shepherd     Red
 Dog          Pitubll             orange
 Cat          Evil                Green
 Cat          Tabby               purple 
```

我正在尝试在 gridview 中创建以下外观

```
 FAMILY       GROUP              COLOR
===============================================
      |        |   Poodle           |  Blue
ROW1  | DOG    |   German Shepherd  |  Red
      |        |   Pitbull          |  Orange
===============================================
      |        |   Evil             |  green
ROW2  | CAT    |   tabby            |  purple 
```

Family 列（如果有多个）将显示为一个单元格，每个相应的子类别显示为其各自的行。

这样，当用户选择行时，会选择 FAMILY 类型的整行。每一行都基于 FAMILY，因此无论有多少行在组和颜色中，它仍然是一个家庭行。本质上，gridview 主要是显示有关 FAMILY 的信息，而 GROUP/COLOR 仅严格用于有关家庭的详细信息。

这是应该在 SQL 中还是通过 Gridview 绑定事件来完成的？我将如何实现我的目标？

如果我的解释不清楚，请告诉我，我会尽力澄清。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:49:40.463

感谢大家的意见。

经过进一步的研究，我发现了以下内容，我想分享这些内容，以便至少对这个问题有部分答案。

该目标最终是通过合并包含**相同值**的行的单元格来实现的。我使用以下链接作为参考：

[http://forums.asp.net/t/1053747.aspx/1](http://forums.asp.net/t/1053747.aspx/1)

[http://www.c-sharpcorner.com/uploadfile/satyapriyanayak/ghrth/](http://www.c-sharpcorner.com/uploadfile/satyapriyanayak/ghrth/)

现在我希望将每一行（具有多个子类别）视为一行，我还没有弄清楚。

考虑到上述链接回答了这个问题。核心代码如下（快速总结）使用 OP 中的给定示例。

数据源：

```
FAMILY        GROUP              COLOR
 Dog          Poodle              Blue
 Dog          German Shepherd     Red
 Dog          Pitubll             orange
 Cat          Evil                Green
 Cat          Tabby               purple 
```

在gridview rowdatabound中，使用如下结构（VB.NET）

```
CLASS LEVEL VARIABLES
Protected familyName AS String
Protected familyNameCell AS TableCell

If e.Row.RowType = DataControlRowType.DataRow Then

        If Me.familyName <> e.Row.Cells(0).Text Then
            Me.familyName = e.Row.Cells(0).Text
            Me.familyNameCell = e.Row.Cells(0)

        Else
            'remove cells from any column index
            e.Row.Cells.RemoveAt(0)

            'increase rowspan of any cell in column that had a cell removed
            If Me.familyNameCell.RowSpan = 0 Then
                Me.familyNameCell.RowSpan = 2
            Else
                Me.familyNameCell.RowSpan += 1
            End If
        End If
End If 
```

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:25:49.953

您可以在 SQL 中执行您的要求并返回一个数据集，您可以通过数据绑定来控制该数据集

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:32:34.257

我会制作一个自定义类的集合并将其绑定到您的网格。

```
Dim MyDataList As New List(Of MyData)

'Populate list

MyGrid.Datasource = MyDataList
MyGrid.Databind() 
```

...

```
Public Class MyData

    Public Property Family As String
    Private _Groups As List(Of String)
    Private _Colors As List(Of String)

    Public Property Groups() As String
        Get
            Return String.Join(", ", _Groups)
        End Get
        Set(value As String)
            _Groups.Add(value)
        End Set
    End Property

    Public Property Colors() As String
        Get
            Return String.Join(", ", _Colors)
        End Get
        Set(value As String)
            _Colors.Add(value)
        End Set
    End Property

    Public Sub New(family As String)

        Me._Family = family
        Me._Groups = New List(Of String)
        Me._Colors = New List(Of String)

    End Sub
End Class 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T21:44:20.347

您可以使用 gridviewhelper 在 gridview 中进行分组，[Grid View Helper](http://www.agrinei.com/gridviewhelper/gridviewhelper_en.htm)

用c#编写的，你可以在vb中使用它

```
 Dim helper As GridViewHelper = New GridViewHelper(sender)
    helper.RegisterGroup("colname", True, True)
    helper.ApplyGroupSort() 
```

# java - 使用两个线程连续读取数组

> ID：15099324
> 
> 赞同：0
> 
> 时间：2013-02-26T21:10:55.813
> 
> 标签：java, multithreading

我有一个数组： int[] arr = {5,4,3,1,2};

```
 I want to do like this::

 5 should be read by thread one
 4 should be read by thread two
 3 should be read by thread one
 1 should be read by thread two
 2 should be read by thread one 
```

我已经尽力了这个简单的程序：

```
package com.techighost.create.deadlock;

public class ArrayReading implements Runnable {

    volatile int index = 0;

    int[] arr;

    public ArrayReading(int[] arr) {
        this.arr = arr;
    }

    @Override
    public void run() {
        synchronized (arr) {
            for (;index<=(arr.length-1);) {
                if (index % 2 == 0  && Thread.currentThread().getName().equals("Thread-One")) {
                    System.out.println(arr[index] + " " + Thread.currentThread().getName());
                    index++;
                    arr.notify();

                } else if (index % 2 != 0 && Thread.currentThread().getName().equals("Thread-Two")) {
                    System.out.println(arr[index] + " " + Thread.currentThread().getName());
                    index++;
                    arr.notify();

                }else{
                    System.out.println("In else " + Thread.currentThread().getName());
                    try {
                        arr.wait();
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
            }
        }
    }

    public static void main(String[] args) throws InterruptedException {
        int[] arr = { 5, 4, 3, 1, 2 };
        ArrayReading arrayReading = new ArrayReading(arr);
        Thread t = new Thread(arrayReading);
        t.setName("Thread-One");
        Thread t1 = new Thread(arrayReading);
        t1.setName("Thread-Two");

        t.start();
        t1.start();

        t.join();
        t1.join();
    }
} 
```

**我认为这个线程名称检查不应该在那里？任何机构请建议可以做些什么来删除这个检查**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-10-24T19:27:14.313

您可以使用@zzk.Program 提到的条件，因为这可以是

```
import java.util.concurrent.locks.Condition;
import java.util.concurrent.locks.ReentrantLock;

public class PrintSequentially {

private final int[] items;
private final ReentrantLock lock;
private final Condition notEven;
private final Condition notOdd;

private int currentCount = 0;

public PrintSequentially(int[] items) {
    this.items = items;
    this.lock = new ReentrantLock();
    this.notEven = lock.newCondition();
    this.notOdd = lock.newCondition();
}

public void printSeq() throws InterruptedException {

    try {
        lock.lockInterruptibly();
        while (currentCount < items.length) {
            if (currentCount % 2 == 0) {
                System.out.println(Thread.currentThread().getName() + ":"
                        + items[currentCount++]);
                if (currentCount < items.length)
                    notEven.await();
                notOdd.signal();
            } else {
                System.out.println(Thread.currentThread().getName() + ":"
                        + items[currentCount++]);
                notEven.signal();
                if (currentCount < items.length)
                    notOdd.await();
            }
        }

    } finally {
        lock.unlock();
    }
} 
```

}

驱动程序是

```
public static void main(String[] args) {
    int arr[] ={1,2,3,4,5};
    final PrintSequentially p = new PrintSequentially(arr);

    Runnable r1 = new Runnable() {
        @Override
        public void run() {
            try {
                p.printSeq();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    };

    Runnable r2 = new Runnable() {
        @Override
        public void run() {
            try {
                p.printSeq();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    };

    Thread th1 = new Thread(r1);
    th1.setName("thread 1");
    th1.start();

    Thread th2 = new Thread(r2);
    th2.setName("thread 2");
    th2.start();

} 
```

在这里，您可以添加任意数量的线程。它将按顺序打印。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T21:17:14.563

你可以使用条件。线程 1 应等待条件索引 % 2 == 0，线程 2 应等待条件索引 % 2 == 1。

查看此链接以[了解如何使用条件](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Condition.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T21:40:59.610

我知道这可能是某种让你的脚湿透的线程应用程序，但它存在许多问题，使其不太理想。

1.  使用线程的重点是异步操作。希望您的线程处理数组中的所有其他条目听起来就像您正在划分工作，但这可能比单线程运行得慢，因为同步完成彼此。线程的性质也意味着可以在“1”之前打印“2”。这是一件好事，因为您不会放慢线程以使它们井井有条。

2.  您的代码在这里有一些竞争条件。例如，一个线程可以处理列表的最后一个元素并转到，`wait`但另一个线程可能已经完成了列表并且不会在那里`notify`。我敢打赌你的应用程序经常挂在最后。

3.  您应该考虑使用[执行器服务](http://docs.oracle.com/javase/tutorial/essential/concurrency/exinter.html)并为每个条目提交作业。这是执行大多数线程任务的最佳方式：

    ```
    // create a thread pool with 2 workers
    ExecutorService threadPool = Executors.newFixedThreadPool(2);
    for (int entry : arr) {
        threadPool.submit(new `(entry));
    }
    // once we have submitted all jobs to the thread pool, it should be shutdown
    threadPool.shutdown();
    // to wait for the jobs to finish you do
    threadPool.awaitTermination(Long.MAX_VALUE, TimeUnit.MILLISECONDS);
    ... 
    ```

    然后，您`ArrayReading`获取条目*而不是*整个数组，并且可以独立处理它们。

4.  最后，正如其他人已经提到的，您可以传递一个`boolean even`标志来让每个线程处理偶数（如果为真）或奇数（如果为假）项目。

    ```
    Thread t1 = new Thread(new ArrayReading(arr, true));
    Thread t2 = new Thread(new ArrayReading(arr, false)); 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T21:32:09.327

您可以使用`wait`和`notify`这样的线程间通信：

```
class ReadNum
{
    int arr[];
    private volatile int counter = 0;
    public ReadNum()
    {
        counter = 0 ;
    }
    public ReadNum(int size)
    {
        arr = new int[size];
        for (int i = 0; i < size ; i++)
        {
            arr[i] = i;
        }
    }
    public void setArray(int[] arr)
    {
        counter = 0;
        this.arr = arr;
    }
    public synchronized void  readOdd()
    {
        while (counter < arr.length)
        {
            if (counter % 2 != 0)
            {
                System.out.println(Thread.currentThread().getName()+":->"+arr[counter]);
                counter++;
            }
            notify();
            try{
                wait();
            }catch(Exception ex){ex.printStackTrace();}
        }
        notify();//So that other EvenThread does'nt hang if OddThread completes earlier
    }
    public synchronized void  readEven()
    {
        while (counter < arr.length)
        {
            if (counter % 2 == 0)
            {
                System.out.println(Thread.currentThread().getName()+":->"+arr[counter]);
                counter++;
            }
             notify();
            try{
                wait();
            }catch(Exception ex){ex.printStackTrace();}
        }
        notify();//So that other OddThread does'nt hang if EvenThread completes earlier
    }
}
public class SequenceRead
{
    public static void main(String st[])
    {
        final ReadNum rn = new ReadNum();
        int arr[]= {1,2,34,78,99,45,4545,987,343,45};
        rn.setArray(arr);
        Thread th1 = new Thread(new Runnable()
        {
            @Override
            public void run()
            {
                rn.readEven();
            }
        },"EvenReadThread");
        Thread th2 = new Thread( new Runnable()
        {
            @Override
            public void run()
            {
                rn.readOdd();
            }
        },"OddReadThread");
        th2.start();th1.start();
    }
} 
```

**更新**

这是您要求的有关种族条件的解释。

> **竞争条件**：*“在这种情况下，多个线程可以访问相同的资源（通常是对象的实例变量），并且如果一个线程在应该是原子的操作完成之前“竞争”或“潜入”太快，可能会产生损坏的数据。因此，程序的输出是不可预测的，因为它取决于访问同一资源的各个线程的启动、执行和完成的顺序或时间。”*

例如考虑下面给出的代码：

```
class Race
{
    private int counter;
    public void printCounter()
    {
        while(counter < 100)
        {
            try
            {
                Thread.sleep(10);//Added to show Race Effect.
            }
            catch (Exception ex){}
            counter = counter + 1;
        }
        System.out.println(Thread.currentThread().getName() +" : "+counter);//If we don't consider Race condition then the Output should be 100 for all threads. 
    }
}
public class MainClasss
{
    public static void main(String st[])
    {
        final Race race = new Race();
        Thread[] th = new Thread[2];
        //Creating 2 threads to call printCounter of object race
        for (int i = 0 ; i < th.length ; i++)
        {
            th[i] = new Thread( new Runnable()
            {
                public void run()
                {
                    race.printCounter();
                }
            }, "Thread"+i);
        }
        //Starting all Threads
        for (Thread thr : th )          
        {
            thr.start();
        }
    }
} 
```

这是我得到的输出，它可能因您的系统而异。

```
Thread1 : 100
Thread0 : 101 
```

所有线程都没有按预期打印 100 ！！！**为什么**？因为程序无法控制一个正在执行的线程何时会被另一个线程抢占。这完全取决于 JVM 线程调度程序。
上述输出的一种可能解释如下：

> 1.  在 counter = 99 处，Thread1 潜入 while 循环并休眠了 10 毫秒。
> 2.  JVM 调度程序现在由 Thread0 抢占 Thread1。
> 3.  Thread1 进入“while”循环，因为它发现 counter < 100
> 4.  在 Thread.sleep Thread0 被 Thread1 抢占。
> 5.  Thread1 将计数器加 1。
> 6.  Thread1 将计数器值打印为 100 并完成。
> 7.  Thread0 继续执行并将计数器加 1 并使计数器 = 101
> 8.  Thread0 将计数器值打印为 101 并完成。

这是Race Condition的现场展示。
为避免这种竞争条件，您应该将该`ReadNum`方法设置为同步的，这样当一个线程进入该方法时，它会获取监视器并成为同步方法的所有者。并且该线程仅在它**以原子方式**完成所有操作后才被抢占。我希望它现在可以让您对 Race Condition 有一个很好的了解。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-26T21:16:15.653

使用 runnable 中的另一个参数字段告诉它读取偶数或奇数索引，创建 runnable 的两个实例，一个用于偶数，一个用于奇数。设置一个`ExecutorService`至少有两个线程，执行runnables。他们可能完成得太快而无法获得不同的线程。没有测试这个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T08:48:13.350

这是您正在寻找的代码....

```
public class ThreadConcurrent  {
    int []array=new int[]{0,1,2,3,4,5,6,7,8,9};
    volatile int i=0;

public  void checkSum() {
    synchronized (this) {
        for(;i<array.length;){
            System.out.println("thread name "+Thread.currentThread().getName()+ "  : "+array[i]);
            i++;
            notify();
            try {
                wait();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }

        }

    }
}

public static void main(String[] args) {

    final ThreadConcurrent er=new ThreadConcurrent();       
    Thread t1=new Thread(new Runnable() {

        @Override
        public void run() {
            er.checkSum();

        }
    }, "T1");
    Thread t21=new Thread(new Runnable() {

        @Override
        public void run() {
            er.checkSum();

        }
    }, "T2");
    t1.start();
    t21.start();
} 
```

}

# excel - VBA 导入文本文件，其中每个单词都有自己的行

> ID：15099342
> 
> 赞同：0
> 
> 时间：2013-02-26T21:11:50.967
> 
> 标签：excel, vba

我正在尝试创建一个宏来将 .txt 文件导入 excel 并填写 A 列。文本文件中的每个单词都应该有自己的行。到目前为止，我的代码允许用户选择一个 .txt 文件，读取它，并将每个单词写在自己的单元格中。但是，它不会从每个单词开始一个新行。任何和所有的帮助表示赞赏。谢谢！

我从简单的文本文件开始，尽管在导入时知道如何编辑所有标点符号会很好。（见下面的两个例子）

EX1：“敏捷的棕
狐跳过
懒惰的月亮”

EX2：“敏捷的
棕色狐狸，
跳过了？
懒惰的月亮”

而我的代码...

```
Sub TextImport()
Dim fileToOpen As String

Worksheets("Dictionary").Activate
Application.ScreenUpdating = False

Range("a:z").Delete

fileToOpen = Application.GetOpenFilename("Text Files (*.txt), *.txt", , "Select a file to import")

If fileToOpen <> "" Then
    With ActiveSheet.QueryTables.Add(Connection:="TEXT;" _
        & fileToOpen, Destination:=Range("A1"))

        .Name = "mytext"

        .FieldNames = True
        .RowNumbers = False

        .FillAdjacentFormulas = False
        .TextFileStartRow = 1
        .TextFileParseType = xlDelimited
        .TextFileTextQualifier = xlTextQualifierDoubleQuote
        .TextFileSpaceDelimiter = True

        .Refresh BackgroundQuery:=False
    End With
End If

Application.ScreenUpdating = False
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:05:18.943

```
Sub ListWords()
    Dim re As Object
    Dim s As String, matches As Object, match As Object
    Dim rngList As Range

    Set re = CreateObject("VBScript.RegExp")
    re.Pattern = "([a-z]+)"
    re.ignorecase = True
    re.Global = True

    Set rngList = ThisWorkbook.Sheets("Sheet1").Range("A1")
    s = GetContent("C:\blahblah\tmp.txt")

    Set matches = re.Execute(s)
    If Not matches Is Nothing Then
       For Each match In matches
            rngList.Value = match.Value
            Set rngList = rngList.Offset(1, 0)
       Next match
    End If

End Sub

Function GetContent(f As String)
    GetContent = CreateObject("scripting.filesystemobject"). _
                    opentextfile(f, 1).readall()
End Function 
```

# python - 是否可以重新加载（Windows）环境变量？

> ID：15099344
> 
> 赞同：0
> 
> 时间：2013-02-26T21:11:53.937
> 
> 标签：python, windows, environment-variables

正是它所说的。我可以设置每个用户的环境变量，无论是从 Windows > 键入“路径”，还是使用 RegEdit，甚至从 Python 脚本。

但是，如果我运行一个应用程序（例如从 Launchy，或从 Chrome 启动它），它不会获取新变量。我必须启动一个新的`cmd`或 Windows 资源管理器（我认为）来获取新值。

现在，显然我可以在每次使用的基础上设置它们，但我想为我的帐户全局设置它们，也为我当时碰巧使用的任何进程设置它们。这可能吗？是否有可能（或更容易）从 Python 脚本中完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:20:50.873

如果您在注册表中设置环境变量（或通过系统属性 > 高级 > 环境变量 UI），对于从设置变量后创建的顶级上下文启动的每个进程，它将是全局且持久的。但是，除非您将注册表中的值与该上下文中的现有值显式合并，否则在更改之前初始化的外壳和上下文将不会获取这些更改。每个上下文都继承其父环境的环境，但在那之后，对父环境或子环境的更改不会在任一方向传播。在顶层创建的上下文从注册表中获取它们的环境。

# ios - UIDocumentInteractionController 按钮单击

> ID：15099345
> 
> 赞同：5
> 
> 时间：2013-02-26T21:11:54.433
> 
> 标签：ios, email, events, printing, uidocumentinteraction

我的应用程序最初有一个标准操作表，显示正在查看的 PDF 的电子邮件和打印选项。我使用 Google Analytics 跟踪了这些事件。

我现在用 UIDocumentInteractionController 替换了操作表，以允许在外部应用程序中打开 PDF。这很好用，但是，似乎没有办法为我的 Google Analytics 跟踪电子邮件和打印事件。我可以轻松跟踪使用打开的应用程序

```
- (void)documentInteractionController:(UIDocumentInteractionController *)controller willBeginSendingToApplication:(NSString *)application 
```

似乎没有可以用来跟踪电子邮件、打印、复制等的等效功能。有谁知道我如何确定这些按钮是否被点击，或者确定是否触发了这些特定事件之一？

# shell - 如何找到数百万个文件的目录差异以进行脚本维护？

> ID：15099352
> 
> 赞同：1
> 
> 时间：2013-02-26T21:12:25.620
> 
> 标签：shell, directory

我一直在研究如何验证文件系统 A 上的数百万个文件实际上是否已移动到文件系统 B。在进行系统迁移时，很明显需要审核所有文件以证明文件已被移动。这些文件最初是通过 rsync 移动的，它确实提供了日志，尽管不是以有助于进行审计的格式。所以，我编写了这个脚本来索引系统 A 上的所有文件：

```
#!/bin/bash
# Get directories and file list to be used to verify proper file moves have worked     successfully.
LOGDATE=`/usr/bin/date +%Y-%m-%d`
FILE_LIST_OUT=/mounts/A_files_$LOGDATE.txt
MOUNT_POINTS="/mounts/AA mounts/AB"

touch $FILE_LIST_OUT 
echo TYPE,USER,GROUP,BYTES,OCTAL,OCTETS,FILE_NAME > $FILE_LIST_OUT
for directory in $MOUNT_POINTS; do
    # format: type,user,group,bytes,octal,octets,file_name
    gfind $directory -mount -printf "%y","%u","%g","%s","%m","%p\n" >> $FILE_LIST_OUT

done 
```

文件索引工作正常，大约需要两个小时来索引约 3000 万个文件。

B 面是我们遇到问题的地方。我编写了一个非常简单的 shell 脚本，它读取索引文件，测试文件是否存在，然后计算有多少文件，但是在循环遍历索引文件名上的 3000 万行时内存不足. 通过while循环有效地执行下面的这一点代码，并为找到和未找到的文件增加计数器。

```
if [ -f "$TYPE" "$FILENAME" ] ; then
print file found 
++
else 
file not found 
++
fi 
```

我的问题是：

1.  shell 脚本可以从如此大的列表中执行这种类型的报告吗？尝试执行此脚本时，64 位 unix 系统内存不足。我已经考虑将输入脚本分成更小的块以使其更快。目前可以
2.  如果 as shell 脚本不合适，你会建议什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:34:26.453

您刚刚使用了 rsync，再次使用它...

> **--忽略现有**
> 
> 这告诉 rsync 跳过更新目标上已经存在的文件（这不会忽略现有目录，否则什么都不会做）。另请参见 --existing。
> 
> 此选项是传输规则，而不是排除规则，因此它不会影响进入文件列表的数据，因此也不会影响删除。它只是限制接收方请求传输的文件。
> 
> 当需要继续中断的备份运行时，此选项对于使用 --link-dest 选项进行备份的人非常有用。由于 --link-dest 运行被复制到一个新的目录层次结构中（当它被正确使用时），使用 --ignore existing 将确保已经处理的文件不会被调整（这避免了对硬链接文件）。这确实意味着此选项仅查看目标层次结构本身中的现有文件。

这实际上会解决任何问题（至少在相同意义上，文件存在测试上的任何差异列表都可以解决问题。使用`--ignore-existing`意味着`rsync`只执行文件存在测试（因此它会在您请求和使用时构建差异列表）它在内部）。如果您只需要有关差异的信息，请检查`--dry-run`和`--itemize-changes`。

假设您有两个目录，`foo`并且`bar`. 假设`bar`有三个文件，`1`,`2`和`3`. 比方说`bar`，有一个目录`quz`，里面有一个文件`1`。目录`foo`为空：

现在，这是结果，

```
$ rsync -ri --dry-run --ignore-existing ./bar/ ./foo/
>f+++++++++ 1
>f+++++++++ 2
>f+++++++++ 3
cd+++++++++ quz/
>f+++++++++ quz/1 
```

请注意，您对**cd+++++++++**不感兴趣——这只是向您展示`rsync`发布了`chdir`. 现在，让我们在`foo`called中添加一个文件`1`，并让我们使用`grep`删除`chdir`(s)，

```
$ rsync -ri --dry-run --ignore-existing ./bar/ ./foo/ | grep -v '^cd'
>f+++++++++ 2
>f+++++++++ 3
>f+++++++++ quz/1 
```

**f**代表文件。**+++++++++**表示该文件在 DEST 目录中不存在。

这是奖金， remove `--dry-run`，它会继续为您进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:15:22.843

您是否考虑过诸如[kdiff3](http://kdiff3.sourceforge.net/)之类的解决方案，它将区分文件目录？

请注意版本 0.9.84 的功能

> 目录比较：选项“完整分析”允许显示目录树中已解决与未解决的冲突或增量与空白更改的数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:22:08.697

1.  在 shell 脚本中读取 3000 万行文件绝对没有问题。您的进程失败的原因很可能是您试图将文件完全读入内存，例如通过做一些错误的事情，例如`for i in $(cat file)`. 读取文件的正确方法是：

    ```
    while IFS= read -r line
      do
        echo "Something with $line"
    done < someFile 
    ```

2.  shell 脚本是不合适的，是的。您应该使用差异工具：

    ```
    diff -rNq /original /new 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T21:37:01.890

如果您不特别关注作为脚本的解决方案，您还可以查看[meld](http://meldmerge.org/)，它可以让您非常轻松地区分目录树，如果有的话，您还可以设置忽略模式。

# select - 如何将一个表中的值插入到另一个表中？

> ID：15099354
> 
> 赞同：2
> 
> 时间：2013-02-26T21:12:28.133
> 
> 标签：select, insert, sql-server-2008-r2

我有 2 个表，表 A 和表 B。我正在将表 B 中的值插入表 A。表 A 有列（键、ID、名称、LOB、a、b、c、d、e、f）。表 B 具有列（键、ID、名称、LOB、a、b、c、d、组）。现在我有这样的陈述，

```
Insert ##Table A
(Key,
ID,Name,LOB,a,b,c
)

Select
Key,
ID,Name,LOB,a,b,c)
From Table B where Key = "blah" 
```

现在，我不想从表 B 中选择 LOB，而是希望将组列和这些值插入表 A 中的“LOB”列

我怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T21:17:04.743

只需在 SELECT 中将 LOB 替换为 Group

```
INSERT INTO TableA (Key, ID,Name,LOB,a,b,c ) 
SELECT Key, ID,Name,Group,a,b,c 
FROM Table B 
WHERE Key = "blah" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:15:14.577

这是你要找的吗？

```
INSERT INTO TableA (Key,ID,Name,LOB,a,b,c) 
SELECT Key,ID,Name,[Group],a,b,c 
FROM TableB 
WHERE Key = "blah" 
```

假设 LOB 和 GROUP 的数据类型相同，这应该可以工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-04T12:33:40.020

```
<?php 
$db = mysql_connect('localhost', 'root', '') or die("Could not connect.");

if(!$db) 

    die("no db");

if(!mysql_select_db("database",$db))

    die("No database selected.");
$query="SELECT park_id,title FROM table1";
$result=mysql_query($query);
while($rows =mysql_fetch_array($result)){
$sql= "INSERT into table2 (type,id,title) VALUES ('value','$rows[park_id]','$rows[title]')";
mysql_query($sql);
}

?> 
```

# asp.net-mvc - 如何解决mvc数据库

> ID：15099356
> 
> 赞同：1
> 
> 时间：2013-02-26T21:12:36.203
> 
> 标签：asp.net-mvc

我正在使用 Visual Studio 2010 Ultimate Edition 注册版，想开发 ASP MVC 3.0 项目。我需要在 Asp_Data 文件夹中包含数据库。我想使用 .sdf 版本的 SQL server 2005，但是当我在 --> 添加新项目（通过单击解决方案资源管理器）使用数据选项卡时 --> 它仅显示 .mdf 格式。我正在使用 SQL Server 2005。我安装了 SSCERuntime_x86-ENU.exe 4.0（Microsoft SQL Server Compact 4.0 安装程序）

谁能告诉我如何在“添加新项目”的“数据”选项卡中获取 SQL Server 2005 的 .sdf 格式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:37:49.427

您必须在 VS 2010 中使用*Server Explorer* -> *Connect to Database*创建 SDF 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T03:01:37.257

您需要安装 sql server compact 4.0 本地数据库。这是将引导您访问它的链接。[演练：在 Visual Studio 中使用 SQL Server Compact](http://msdn.microsoft.com/en-us/library/gg606540%28v=vs.100%29.aspx)

# android - 图像未在 Android WebView 中显示

> ID：15099360
> 
> 赞同：0
> 
> 时间：2013-02-26T21:12:53.617
> 
> 标签：android, android-webview, photobucket

我有一种情况，我试图在`webview`using中显示用户生成的 HTML `loadData`。我的代码是这样的：

```
String content = "<?xml version=\"1.0\" encoding=\"UTF-8\" ?>" +
    "<html><head>" +
    "<meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\" />" +
    "</head><body>";
content += htmlStr + "</body></html>";
wv.loadData(content, "text/html", "UTF-8"); 
```

在大多数情况下它工作得很好，但我无法显示某些类型的图像。在我的大部分测试中，插入`<img src="..."/>`标签都可以正常工作，但我发现 Photobucket 上的图片链接根本不会显示；我得到一个带有问号的小盒子，而不是图像。

单击 Photobucket 上图像的链接往往会将您带到可以在其网站上查看该图像的页面，而不仅仅是原始图像本身。我感觉这个问题与此有关。我怀疑这可能是一个“推荐人”问题，或者可能是用户代理，或者类似的东西，但我一辈子都无法让它正确显示。

我曾尝试切换到`loadDataWithBaseURL`并提供一个`BaseURL`（因为我相信这将用作引荐网址），但这没有任何区别。我也尝试过使用`loadUrl("http://photobucket..."`并提供`HashMap`手动设置的Referer标头，但这也不起作用。实际上，切换到`loadUrl`使其立​​即重定向到设备的浏览器以加载 Photobucket 页面。我试图提供一个自定义`WebViewClient`和覆盖`shouldOverrideUrlLoading`，但最好的办法是在`WebView`.

我确信这不是 Photobucket 的特定问题，它恰好是我在测试时发现此问题的站点。

我真的很想想办法处理这种情况，以便它可以正常工作，但我一直无法在 SO 或整个互联网上找到任何有用的方向。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T02:06:04.787

我会等到 Photobucket 完成他们最近的更新，然后再进行进一步测试......虽然你说你确定这不是 Photobucket 的特定问题，但互联网现在充斥着无法查看与基于 android 设备的图像链接的 Photobucket 的海报。如果您的代码适用于所有其他未托管在 photobucket 上的图像，那么您的代码就很好。

# javascript - 仅在选定模式下更改选定选项的文本

> ID：15099362
> 
> 赞同：5
> 
> 时间：2013-02-26T21:13:07.723
> 
> 标签：javascript, html

我不确定我是否将每个人都与上述标题混淆了。我的问题如下。

我在我的代码中使用标准的 javascript（没有 jQuery）和 HTML。要求是对于`<select>...</select>`菜单，我有一个不同长度的动态列表。

现在如果`option[selectedIndex].text > 43`字符的长度，我想将其更改 `option[selectecIndex]`为新文本。

我可以通过调用来做到这一点

```
this.options[this.selectedIndex].text = "changed text"; 
```

在工作正常的 onChange 事件中。这里的问题是，一旦用户决定更改选择，下拉列表将显示带有更改文本的先前选定文本。这需要显示原始列表。

我难住了！有没有更简单的方法来做到这一点？

任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:25:50.487

您可以将以前的文本值存储在某些数据属性中，并在必要时使用它来重置文本：

```
document.getElementById('test').onchange = function() {

    var option = this.options[this.selectedIndex];

    option.setAttribute('data-text', option.text);
    option.text = "changed text";

    // Reset texts for all other options but current
    for (var i = this.options.length; i--; ) {
        if (i == this.selectedIndex) continue;
        var text = this.options[i].getAttribute('data-text');
        if (text) this.options[i].text = text;
    }
}; 
```

[http://jsfiddle.net/kb7CW/](http://jsfiddle.net/kb7CW/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T22:58:40.740

你可以用 jquery 很简单地做到这一点。这是一个工作小提琴：http: [//jsfiddle.net/kb7CW/1/](http://jsfiddle.net/kb7CW/1/)

这里也是它的脚本：

```
 //check if the changed text option exists, if so, hide it
$("select").on('click', function(){
   if($('option#changed').length > 0)
   {
        $("#changed").hide()
   }
});
//bind on change
$("select").on('change', function(){
    var val = $(":selected").val(); //get the value of the selected item
    var text = $(':selected').html(); //get the text inside the option tag
    $(":selected").removeAttr('selected'); //remove the selected item from the selectedIndex
    if($("#changed").length <1) //if the changed option doesn't exist, create a new option with the text you want it to have (perhaps substring 43 would be right
          $(this).append('<option id="changed" value =' + val + ' selected="selected">Changed Text</option>');
    else
        $('#changed').val(val) //if it already exists, change its value

   $(this).prop('selectedIndex', $("#changed").prop('index')); //set the changed text option to selected;

}); 
```

# iphone-standalone-web-app - 如何在 IOS 主屏幕 Web 应用程序中加载数据 uri 链接？

> ID：15099364
> 
> 赞同：6
> 
> 时间：2013-02-26T21:13:10.243
> 
> 标签：iphone-standalone-web-app, data-uri

如果我在运行 6.1.2 的 iPad 上的 Safari 中打开以下页面，单击第一个链接会打开一个带有“Hello World！”的新标签，第二个会加载“Hello Again！” 在 iframe 中。

```
<html>
  <head>
    <meta name="apple-mobile-web-app-capable" content="yes" />
  </head>
  <body>
    <p>
      <a href="data:text/plain,Hello World!" target="_blank">data: uri new tab test</a>
    </p>
    <p>
      <a href="data:text/plain,Hello Again!" target="dataframe">data: uri iframe test</a>
    </p>
    <iframe name="dataframe" width="500" height="100"></iframe>
  </body>
</html> 
```

如果我将此页面添加到主屏幕，则在生成的应用程序中，链接什么也不做。

有什么方法可以让数据 URI 链接加载到 IOS 主屏幕 Web 应用程序中，或者通过加载 Safari 来显示内容，或者通过某种方式嵌入它？

或者也许是主屏幕网络应用程序在本地存储和显示 PDF 的其他方法。

# c# - ItemTemplate 中的 AJAX 不起作用

> ID：15099367
> 
> 赞同：0
> 
> 时间：2013-02-26T21:13:21.510
> 
> 标签：c#, asp.net, ajax, asp.net-ajax

在这个 aspx 代码示例中，ListView 中 UpdatePanel 中的 Timer 不会进行异步刷新。在这段代码中，它刷新了整个页面，就像这里不存在 AJAX 一样。我应该怎么做才能消除这个问题？

```
<form id="form1" runat="server">
  <div>
    <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
    <asp:Label ID="Label1" runat="server" Text="SIMPLE FIELD"></asp:Label>
    <br />
    <asp:ListView ID="DataListView" runat="server">
        <ItemTemplate>
            <asp:UpdatePanel ID="UpdatePanel1" runat="server">
                <ContentTemplate>
                    <asp:Timer ID="Timer1" runat="server" Interval="500"></asp:Timer>
                    <asp:Label ID="Label2" runat="server" Text="AJAX"></asp:Label>
                </ContentTemplate>
            </asp:UpdatePanel>
        </ItemTemplate>
    </asp:ListView>
</div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:20:21.503

您应该将整个 ListView 包装在 UpdatePanel 中。

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <asp:ListView ID="DataListView" runat="server">
           <ItemTemplate>            
                <asp:Timer ID="Timer1" runat="server" Interval="500"></asp:Timer>
                <asp:Label ID="Label2" runat="server" Text="AJAX"></asp:Label>                
            </ItemTemplate>
        </asp:ListView>
    </ContentTemplate>
 </asp:UpdatePanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:19:23.990

我认为可能存在一个问题，因为 ListView 自己不进行任何渲染，UpdatePanel 无法确定要更新的“父”项。我认为这是 UpdatePanel 设计的一个不幸结果。

我建议尝试将 UpdatePanel 放在它自己的容器控件中，例如 an 并查看是否会产生正确的结果。

# c++ - 确定远程应用程序访问/更改的内存/值？

> ID：15099368
> 
> 赞同：0
> 
> 时间：2013-02-26T21:13:22.927
> 
> 标签：c++, c, windows, memory, memory-management

让我们举一个在 IT 界众所周知的例子：

我们有一个游戏，例如纸牌，有人为它制作并发布了一个训练器，你的动作总是“0”。

如何以编程方式确定“hack”更改的地址和值？

如果可能的话，最好的方法是什么？

*   从游戏中[注入/加载我自己的 dll？]
*   通过用我自己的进程拦截黑客和目标进程之间的流量？

我问这个问题是因为两件事：

*   保护应用程序免受“黑客攻击”（至少被[脚本小子](http://en.wikipedia.org/wiki/Script_kiddie)）
*   对培训师进行逆向工程（因此您不必[重新发明轮子](http://en.wikipedia.org/wiki/Reinventing_the_wheel)/避免[NIH](http://en.wikipedia.org/wiki/Not_invented_here)综合症）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:20:02.377

你不能。一些失败的尝试可能是设置两个地址，然后比较它们（尽管他们会找到另一个地址）。或者他们可以简单地删除您的比较电话。

他们可以更改您用来“以编程方式确定”的任何保护功能，以始终返回错误结果。他们可以对你的可执行文件做任何事情，所以没有办法。

除非您挂钩打开进程以修改内存的内核函数。但这也是易碎的，如果我没记错的话，你现在需要对你的“保护内核驱动程序”进行数字签名。

还有另一种方法，您可以在每个正在运行和新生成的进程中加载​​ DLL（这可能会警告防病毒程序您的程序是病毒），使用该 DLL 挂钩 OpenProcess（如果还有其他替代方案，也可以）每个进程中的函数并检查它是否针对您的程序，如果是，则阻止它。搜索函数挂钩。我相信有一种叫做“MS Detour”的东西。

而且，游戏甚至不会接近安全。

综上所述，在本地保护你的游戏是没有办法的。如果您要存储分数或其他东西，您应该创建一个服务器程序，客户端应该向服务器报告每一次移动。

即使这样，他们也可以创建一个机器人来自动响应服务器。那么你能做的最好的事情就是以某种方式验证它是一个人在玩。（也许是验证码或将解决速度与人类平均值进行比较？）

# ios - 支持在 UIWebView 中获取对 webBrowserView 的引用的方法？

> ID：15099369
> 
> 赞同：0
> 
> 时间：2013-02-26T21:13:27.500
> 
> 标签：ios, uiwebview

有支持的方法吗？不是 NSStringFromClass。获得该参考的实际支持方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:12:45.290

回答这个问题：不，没有支持的方式来做到这一点。

它可能在那里，但如果它没有通过[`UIWebView`接口](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)（或相关类）公开，它是内部/私有的，并不意味着以受支持的方式访问。

请记住，您*可以*访问它来玩转，但如果您的应用在尝试提交到应用商店时使用任何[内部 API ，它很可能会被拒绝。](https://stackoverflow.com/questions/2842357/how-does-apple-know-you-are-using-private-api)

# html - 脚本异步标记是否保留脚本的执行顺序？

> ID：15099370
> 
> 赞同：0
> 
> 时间：2013-02-26T21:13:28.023
> 
> 标签：html, script-tag

所有关于组合、缩小、压缩和缓存的问题都放在一边。将脚本标记为异步是否仍保留脚本执行顺序？

假设我有一个页面，其中 jquery 包含在顶部，然后是底部的其他脚本，假设存在 jquery。

如果我用 async 属性标记 jquery 脚本，我知道浏览器将继续解析我的 html。但是，浏览器是否会保证在我的其他脚本执行之前加载 jquery，或者可能会发生乱序导致 undefined `$`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:19:53.647

使脚本异步不保证任何同步执行，除了脚本本身。

```
<script async src="jquery.js"></script>
<script>
    $.noop() // will definitely throw an error
</script>

<script async src="jquery.js"></script>
<script src="someOtherNonAsyncScript.js"></script>
<script>
    $.noop() // may or may not throw an error
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:24:33.047

不，它将异步执行。

> async 和 defer 属性是布尔属性，指示应该如何执行脚本。(...)

[http://www.whatwg.org/specs/web-apps/current-work/multipage/scripting-1.html#attr-script-async](http://www.whatwg.org/specs/web-apps/current-work/multipage/scripting-1.html#attr-script-async)

# flexbox - Flexbox 在 FF 和 Opera 中丢失了 flex 项的宽度

> ID：15099371
> 
> 赞同：0
> 
> 时间：2013-02-26T21:13:28.073
> 
> 标签：flexbox

我仔细阅读[了这个stackoverflow主题](https://stackoverflow.com/questions/15057411/flex-box-ignores-wrapped-childrens-margin-margin-collapse)

以及[csstricks中的这篇文章](http://css-tricks.com/using-flexbox/)

并尝试使用 all 前缀使我的布局在现代浏览器中工作，但它只在 Chrome 中工作。在其他浏览器中，flex 项目丢失了 flex 值（宽度）。我不明白这是怎么回事。
我非常感谢和帮助和建议！谢谢！ [演示](http://jsbin.com/usisic/24/edit)

```
 <!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>nested flex</title>
</head>
<body>
  <header>Привет мир!</header>
  <div class="wrap">
    <div class="item1">red</div>
    <div class="item_nested">
    <div class="b">blue</div>
    <div class="c">green</div>
  </div>
    </div>
  <footer>Прощай мир!</footer>

</body>
</html>

.wrap { 
  display: -moz-box;
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  height: 100%; 
  -moz-box-orient: horisontal;
  -webkit-flex-flow: row wrap; 
        -ms-flex-flow: row wrap;
  flex-flow: row wrap;
   max-width: 1200px;
}
.item1 { 
   width: 70%;                     /* No flex here, 
  -moz-box-flex: 1;               /* OLD - Firefox 19- */

  background: #eee;
}
.b { 
  background: #ddd; height:50%;

}
.c { 
  background: #ccc; height:50%;
}
.item_nested {
    -webkit-box-flex: 1;            /* OLD - iOS 6-, Safari 3.1-6 */
  -moz-box-flex: 1;               /* OLD - Firefox 19- */
  width: 20%;                     /* For old syntax, otherwise collapses. */
  -webkit-flex: 1;                /* Chrome */
  -ms-flex: 1;                    /* IE 10 */
  flex: 1;                        /* NEW, Spec - Opera 12.1, Firefox 20+ */
}
@media all and (max-width: 600px) {
  .wrap {-moz-box-orient: vertical;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
 }
  .wrap > .a, .wrap > .item_nested {width: auto;} 
  .b.c {
    height:auto;
  }

    .item1 { 
   width: 100%; 
} 
```

}

# python - 仅将输入限制为整数（文本使 PYTHON 程序崩溃）

> ID：15099379
> 
> 赞同：4
> 
> 时间：2013-02-26T21:13:54.300
> 
> 标签：python

这里是 Python 新手，试图将测验输入仅限于数字 1,2 或 3。
如果输入文本，程序会崩溃（因为无法识别文本输入）
这是我所拥有的改编：非常欢迎任何帮助。

```
choice = input("Enter Choice 1,2 or 3:")
if choice == 1:
    print "Your Choice is 1"
elif choice == 2:
    print "Your Choice is 2"  
elif choice == 3:
    print "Your Choice is 3"
elif choice > 3 or choice < 1:
    print "Invalid Option, you needed to type a 1, 2 or 3...." 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T21:23:49.397

改为使用[`raw_input()`](http://docs.python.org/2/library/functions.html#raw_input)，然后转换为（如果转换失败，则`int`捕获）。`ValueError`你甚至可以包括一个范围测试，`ValueError()`如果给定的选择超出了允许值的范围，则明确提出：

```
try:
    choice = int(raw_input("Enter choice 1, 2 or 3:"))
    if not (1 <= choice <= 3):
        raise ValueError()
except ValueError:
    print "Invalid Option, you needed to type a 1, 2 or 3...."
else:
    print "Your choice is", choice 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T21:16:05.123

试试这个，假设`choice`是一个字符串，就像问题中描述的问题一样：

```
if int(choice) in (1, 2, 3):
    print "Your Choice is " + choice
else:
    print "Invalid Option, you needed to type a 1, 2 or 3...." 
```

# youtube-api - YouTube API 服务条款中的“分离、隔离或修改音频或视频组件”是什么意思？

> ID：15099383
> 
> 赞同：2
> 
> 时间：2013-02-26T21:14:07.193
> 
> 标签：youtube-api

我正在尝试了解有关 YouTube 服务条款的更多信息。进一步来说：

> 二、禁令
> 
> 8：分离、隔离或修改通过 YouTube API 提供的任何 YouTube 视听内容的音频或视频组件；

我在一个谷歌浏览器扩展里面工作，它由一个持久的背景页面和一个前景弹出页面组成。我想在前台向用户显示视听内容。这很好，但是，在关闭前台时可以正常工作——视听内容停止，因为页面已被破坏。

因此，我想同步两个 YouTube 播放器，以便背景中的一个未静音，前景中的一个被静音，但其视觉内容与背景同步。这会违反 YouTube 的服务条款吗？我希望答案是否定的——这似乎类似于打开一个标签。有时可以看到视觉内容（由用户自行决定），但音频内容不会中断。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:18:02.657

如果我正确解释：

*   “分离或隔离”是指切断返回/流媒体的视频或音频部分（或什至它的不同通道，如果有的话）
*   “修改”意味着您以某种方式转换数据并将其显示给用户，而不是原始数据（即禁止您制作视频流应用程序以黑白显示每部电影）。

因此，不幸的是，我认为您的要求确实违反了 TOS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-24T09:58:03.740

简而言之：您无法制作一个应用程序，让您可以在关闭显示器的情况下收听 youtube 歌曲......

（我相信他们希望您看到广告，或者他们想向付钱给他们投放广告的人证明人们看到了他们在所有 youtube 视频上投放的广告）。

# c - 在 C 中创建共享库，sqlite3 的问题

> ID：15099384
> 
> 赞同：1
> 
> 时间：2013-02-26T21:14:10.340
> 
> 标签：c, sqlite, shared-libraries, swi-prolog

我第一次尝试创建一个共享库，以便将它与 SWI-Prolog 外部函数接口一起使用，但我无法正确链接 sqlite3。我实际上是这样做的：

```
gcc -c -fpic task_resources.prolog.c -I/usr/lib/swi-prolog/include/ -lsqlite3
gcc -shared -o task_resources.so task_resources.prolog.o
cp /home/markmb/task_resources.so /usr/lib/swi-prolog/lib/amd64/task_resources 
```

然后我有一个虚拟的序言文件：

```
dbg_task_resources :- 
   use_foreign_library(foreign(task_resources)),
   getTaskState("id01",Result),
   write(Result). 
```

在序言解释器中，我调用文件和仿函数：

```
[prueba].
dbg_task_resources. 
```

我得到了结果：

```
prolog: symbol lookup error: /usr/lib/swi-prolog/lib/amd64/task_resources: undefined symbol: sqlite3_open 
```

那我应该如何链接sqlite3呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:21:01.300

正如科林所说，我在第二个 gcc 语句中需要 -sqlite3 ：

```
gcc -shared -o task_resources.so task_resources.prolog.o -lsqlite3 
```

很抱歉这个简单的问题，但这是一个特定的问题，我在谷歌上找不到解决方案

再次感谢科林

# mysql - SQL 查询未显示所需结果

> ID：15099391
> 
> 赞同：0
> 
> 时间：2013-02-26T21:14:57.803
> 
> 标签：mysql, sql, join

我有一个 SQL 查询，我必须查询三个表（其中一些表两次），但我没有得到我需要的结果：

我需要在“文章”中搜索搜索字符串（“网球”）并为这些文章查找第二个表“订单详细信息”。点击显示订购了多少。

现在我需要检查这些物品是否已经交付。因此，我在“orderdetails”表中查找“orders”，如果这些订单有“delivery”，则查看同一张表。'orders' 和 'delivery' 有一个字段显示它是什么类型。

所以我必须检查“交货”是否由“订单”转发。

接下来检查这个'delivery'是否包含'article'并总结交付的文章。

如果交付的文章数量低于订购的文章数量我想显示这条记录。

到目前为止，除了这些项目之外它还有效： - [已解决] 感谢 HLGEM 没有显示“交货”的“订单” - [已解决] 显示与“交货”相同数量的“订单”，但我没有希望他们。

这是我到目前为止所拥有的：

PrO：流程订单
PrD：流程交付
a：ArticleItem
p：processOrderItem
d：deliveryItem

[更新代码]

```
SELECT 
    a.Articlenumber AS Article,
    PrO.Number AS Order, 
    PrD.Number AS Delivery,
    p.Amount AS Orderamount,
    SUM(d.Amount) AS Deliveryamount,
    (p.Amount - Deliveryamount) AS OpenAmount

FROM Article AS a
    INNER JOIN ProcessesDetails AS p
    ON  (a.ArticleNumber = p.Article)
        AND LEFT(p.Order, 3) = 'OR-'
    INNER JOIN Processes as PrO
    ON  PrO.Number = p.Order
        AND TEXTSEARCH('Delivery:' IN PrO.Forwarded)
    LEFT JOIN Processes as PrD
    ON  PrO.Nummer = PrD.ForwardedFrom
        AND LEFT(PrD.Number,3) = 'DE-' 
    INNER JOIN ProcessesDetails as d
    ON  PrD.Number = d.Order
        AND d.Article = p.Article
WHERE (a.Categorie = 'tennis') 
GROUP BY(Article) 
```

添加以下行解决了第二个问题：

```
HAVING Deliveryamount < Orderamount 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:26:32.347

我不知道在 where 条件下这条线是什么：

`AND TEXTSEARCH('Delivery:' IN PrO.Forwarded)`

我认为`textsearch`mysql中不存在该函数，所以试试这个：

```
 SELECT 
        a.Articlenumber AS Article,        
        PrO.Number AS Order, 
        PrD.Number AS Delivery,    
        p.Amount AS Orderamount,    
        SUM(d.Amount) AS Deliveryamount,    
        (p.Amount - Deliveryamount) AS OpenAmount    
    FROM Article AS a    
        INNER JOIN ProcessesDetails AS p ON (a.ArticleNumber = p.Article)   
        INNER JOIN Processes as PrO ON PrO.Number = p.Order
        LEFT JOIN Processes as PrD ON PrO.Nummer = PrD.ForwardedFrom    
        INNER JOIN ProcessesDetails as d ON PrD.Number = d.Order
    WHERE (a.Categorie = 'tennis') 
    AND LEFT(p.Order, 3) = 'OR-'
    AND PrO.Forwarded like '%Delivery:%'
    AND LEFT(PrD.Number,3) = 'DE-' 
    AND d.Article = p.Article
    GROUP BY(Article) 
```

尝试使用`AND PrO.Forwarded like '%Delivery:%'`而不是`AND TEXTSEARCH('Delivery:' IN PrO.Forwarded)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:42:16.843

```
SELECT 
    a.Articlenumber AS Article,        
    PrO.Number AS Order, 
    PrD.Number AS Delivery,    
    p.Amount AS Orderamount,    
    SUM(d.Amount) AS Deliveryamount,    
    (p.Amount - Deliveryamount) AS OpenAmount    
FROM Article AS a    
    INNER JOIN ProcessesDetails AS p ON (a.ArticleNumber = p.Article)   
    INNER JOIN Processes as PrO ON PrO.Number = p.Order
    LEFT JOIN Processes as PrD ON PrO.Nummer = PrD.ForwardedFrom AND LEFT(PrD.Number,3) = 'DE-'
    INNER JOIN ProcessesDetails as d ON PrD.Number = d.Order
WHERE (a.Categorie = 'tennis') 
AND LEFT(p.Order, 3) = 'OR-'
AND TEXTSEARCH('Delivery:' IN PrO.Forwarded)AND d.Article = p.Article
GROUP BY(Article) 
```

这将解决您的左连接问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:29:13.650

第一个问题可能与这两行有关：

```
LEFT JOIN Processes as PrD ON PrO.Nummer = PrD.ForwardedFrom 
```

和

```
AND LEFT(PrD.Number,3) = 'DE-' 
```

因为如果没有交付，左连接实际上具有 NULL 值，因此 PrD.Number 无法以“DE-”开头。where 子句可能像：

```
AND (PrD.Number is null OR LEFT(PrD.Number,3) = 'DE-') 
```

可能会解决您问题的第一部分。不确定问题的第二部分。我不知道你在哪里进行数字比较。

# ms-access - 访问下拉列表以过滤子表单

> ID：15099392
> 
> 赞同：0
> 
> 时间：2013-02-26T21:15:01.957
> 
> 标签：ms-access, subform

抱歉，如果这个问题已经得到解答，但是我是新手，我看不出有什么可以帮助我，

我有一个访问表单，它作为其中的子表单显示工程师姓名和一个复选框，以便在为工程团队记录停机时间时选择。但是有 4 个团队，而且他们通常越来越大，这意味着我们必须滚动查看名称才能找到我们想要的工程师。

我在一张桌子上有一个所有工程师的列表以及他们与哪个团队相关联，在主表单上有一个包含团队的下拉列表。当我从下拉列表中选择一个团队时，我希望子表单过滤掉任何不属于选择团队的工程师。

**附加信息**

Subform_SelectEngineer

下拉名称是 TeamFilter

希望这是实质性信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:21:59.383

在更新您的 Teamfilter 后，设置您的

```
 subform_selectengineer.filter = "[TeamName] = '" & me.teamfilter & "'"
  subform_selectenginner.filteron = true 
```

# javascript - KnockoutJS - 使用内部函数更新对象

> ID：15099393
> 
> 赞同：1
> 
> 时间：2013-02-26T21:15:09.717
> 
> 标签：javascript, jquery, ajax, knockout.js

我有一个“这个”问题，希望有任何帮助

这是我的基本代码

```
function xxx(val)
{
   this.x = val;
   this.change = function() {
     var self = this;
     $.ajax({
         blah: '',
         blah: '',
         success: function(data) { self.x = 5; },
     });
   };
}

var newX = new x(1);
newX.change();

console.log(newX.x); 
```

希望这是有道理的，

我想要做的是更新 jquery ajax 响应上的原始对象。我无权访问“this”，因此我尝试将其传递给“self”变量，但即使代码按预期运行，对象值似乎也没有更新。

我相信有一个简单的答案，我只是不知道。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:18:47.507

所以解决这个问题的方法是看看你的函数声明。每个函数声明都会给你一个新`this`对象。将您感兴趣的存储在正确的位置。如果我是正确的，看起来您实际上想要访问原始 xxx 函数范围的范围。因此，与其存储`this`在`change`函数中，不如将其存储在原始范围的上方。像这样的东西：

```
function xxx(val)
{
   var self = this;

   this.x = val;

   this.change = function() {
     var that = this;
     $.ajax({
         blah: '',
         blah: '',
         success: function(data) { self.x = 5; },
     });
   };
}

var newX = new x(1);
newX.change();

console.log(newX.x); 
```

这里的另一个问题是您正在使用 AJAX 进行该调用，因此您需要一个 Deferred 对象，或者您可以向该函数添加一个回调，该回调在正确的时间触发，如下所示：

```
 function xxx(val)
        {
           var self = this;

           this.x = val;

           this.change = function(callback) {
             var that = this;
             $.ajax({
                 blah: '',
                 blah: '',
                 success: function(data) { 
                      self.x = 5;
                      if (typeof callback === "function"){
                            callback.call(this);
                      }
                 }
             });
           };
        }

    var newX = new xxx(1);

    newX.change(function(){
        console.log(newX.x);
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T21:29:41.647

在淘汰赛中......你必须做这样的事情：

```
function Xxx(val)
{
   var self = this;

   this.x = ko.observable(val);

   this.change = function() {
     // "that" may be different to "self" in some
     // cases...
     var that = this;
     $.ajax({
         url: '...',
         type: 'get',
         success: function(data) {
             self.x(5);
         },
         error: function(a) {
             console.log('got an error');
         }
     });
   };
}

var newX = new Xxx(1);
newX.change();

ko.computed(function () {
    // This will get called everytime
    // newX.x is changed
    console.log(newX.x());
}); 
```

当您创建一个可能会改变的变量时，您必须将其创建为可观察的。observable 实际上是您调用的函数。当被调用时，它将更新其内部值，并且它还将在可观察对象被“观察到”的任何地方触发任何更改

你绝不应该尝试去做`this.x = 5`。它将覆盖实际的可观察对象，因此它永远不会触发每个观察者的变化。

# 编辑

如果您有兴趣了解计算的工作原理。计算变量是一个`listen`可以观察到的函数。当它`computed`被创建时，它会被调用一次以检查从它内部调用了哪些 observables。这是一种“跟踪”依赖关系的方法。在此示例中，您应该看到至少两个控制台日志。一个加 1，然后加 5。

就我而言，计算变量是一种匿名的，因为它在任何地方都不会受到影响。同样在某些情况下，您可能需要观察一个变量但使用多个可观察对象。防止更新任何其他使用的 observables。有一些方法可以做到这一点。您可以在“观看”所需的 observables 后返回。

或者您可以创建一个子函数，该函数将在用 计算后触发一点`setTimeout(..., 0);`。有几种方法可以实现一些非常好的技巧。

# email - 登录 /var/spool/mail/* 上的邮件脚本

> ID：15099400
> 
> 赞同：1
> 
> 时间：2013-02-26T21:15:28.757
> 
> 标签：email, spool, logrotate

创建这样的脚本是否有意义，或者假脱机文件可能会损坏？

我希望能够将最大邮件假脱机文件大小控制为 500MB 或保留一个月，将其余部分存档，以先到者为准：

```
/var/spool/mail/* {
monthly
size 500M
missingok
rotate 24
notifempty
sharedscripts
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-16T03:21:46.150

我没有为此使用 logrotate。我所做的是将假脱机文件重定向到 /dev/null 以清除它们。我之前也停止了我的电子邮件服务，并在清理后启动了它。你可以根据需要定制这个

```
echo "emailclean.sh starting on $(date)"
echo "Stopping fetchmail service"
#/sbin/initctl stop <service>
pkill fetchmail
sleep 10
echo "Cleaning up old mail"
cat /dev/null > /var/spool/mail/root
cat /dev/null > /var/spool/mail/webalert
sleep 10
echo "Starting fetchmail Service as user webalert"
sudo -u webalert /usr/bin/fetchmail
#/sbin/initctl start <service>
echo "Cleanup Complete! /var/spool/mail/root and webalert files sent to dev0"
echo "emailclean.sh finished cleanup on $(date)" 
```

# jquery - bit.ly 如何实现零剪贴板？

> ID：15099402
> 
> 赞同：1
> 
> 时间：2013-02-26T21:15:31.707
> 
> 标签：jquery, flash, zeroclipboard

在 bit.ly 上复制链接时，他们会使用有趣的 Flash 效果。我创建了一个关于该主题的[截屏视频。](http://youtu.be/6Dtvl4rYXLE)我想知道如何去实现这个效果。

如果有人知道实现零剪贴板的简单方法，请回复。我发现零剪贴板很难在没有问题的情况下实施。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:42:09.853

您是在谈论这种效果吗：http: [//jsfiddle.net/6XfMs/6/](http://jsfiddle.net/6XfMs/6/)？使用 jQuery 动画很容易实现：

```
jQuery('#element').animate(
{
   opacity: 0,
   top: '-=100',
}, 500); 
```

# openam - 如何编写 openam 安装脚本

> ID：15099405
> 
> 赞同：0
> 
> 时间：2013-02-26T21:15:51.960
> 
> 标签：openam

根据上述文档，要创建初始配置，我需要打开 Web 浏览器。这对我来说听起来真的很奇怪。我想编写 OpenAM 部署的脚本，这似乎是不可能的。

[https://wikis.forgerock.org/confluence/display/openam/Deploy+OpenAM](https://wikis.forgerock.org/confluence/display/openam/Deploy+OpenAM)

我的实际脚本执行以下操作

1.  下载 openam
2.  提取openam
3.  在tomcat webapp中复制.war
4.  提取管理工具
5.  提取配置工具
6.  提取诊断工具
7.  下载opendj
8.  使用所有参数启动 opendj 的设置

现在我想使用我想使用的配置文件启动 openam 的配置工具，但似乎 OpenAM 必须已经配置；

配置工具需要`$HOME/openam/boostrap`文件，`$HOME/openam`配置文件夹在哪里，一旦你已经配置它就应该存在。

这是真的 ？要使用配置工具，您必须已经配置您的服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:29:50.753

当然不是……“配置器工具”旨在最初配置 OpenAM。

为简单起见，您不应使用外部数据存储。

如果您真的想使用外部配置存储（OpenDJ 或 Oracle DSEE 是目前唯一受支持的），外部配置存储必须在启动“配置器工具”之前启动并运行。

OpenDJ 也可以自动配置。

如果您不需要外部配置存储，只需部署 OpenAM 网络应用并使用“配置工具”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:54:43.000

一些有用的链接：

*   [使用命令行界面](https://wikis.forgerock.org/confluence/display/openam/Using+the+CLI#UsingtheCLI-CLI)
*   [configurator.jar 文档](http://openam.forgerock.org/openam-documentation/openam-doc-source/doc/reference/index/man-configurator-jar-1.html)
*   [OpenAM 的自动安装和配置](http://blog.profiq.cz/2012/01/19/automated-installation-and-configuration-of-openam/)

# entity-framework - 如何让实体框架让我设置 storegeneratedpatternfield？

> ID：15099407
> 
> 赞同：1
> 
> 时间：2013-02-26T21:15:53.813
> 
> 标签：entity-framework, visual-studio-2012

我的一个实体中有一个字段被用作 id 字段。问题是由于支持版本控制数据支持，这个特定字段可能有重复项。我将字段设置为使用`storegeneratedpatternfield = identity`. 在处理新版本的字段时，我需要能够设置字段。

```
//so some basic psuedo code when I update.
entity myentity = //find the entity via linq

myentity.version = //next version number

db.entitytable.add(new entity() { entityid = myentity.entityid, etc.});

savechanges 
```

现在发生的事情是，如果我使用 storegeneratedpatternfield = identity 或 storegeneratedpatternfield = computed，它会忽略我设置字段

我有一个解决方法，可以在其中查找新实体，但我想知道是否还有其他选择。

# matlab - 从 Web 访问 Matlab gui

> ID：15099414
> 
> 赞同：1
> 
> 时间：2013-02-26T21:16:28.710
> 
> 标签：matlab, user-interface, web

有没有办法将我的 matlab gui 放在网站上，以便用户可以使用或玩，类似于 java 小程序等？我需要在某种意义上以不同的方式编译它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T21:45:12.940

MATLAB Compiler 允许您创建一个独立的 exe，您的 Web 服务器可以使用通用网关接口 (CGI) 调用该 exe。

CGI 脚本通过将 HTML 打印到屏幕上来输出 HTML ( `stdout`)。您可以通过环境变量输入 CGI 脚本`query_string`。可以使用 Matlab 函数`getenv`和`fprintf`.

但是不要忘记检查您是否正确配置了 Web 服务器以运行 CGI 程序，并且您能够独立执行 CGI 程序。

在 Mathworks 网站中有一个[示例](http://www.mathworks.com/support/solutions/en/data/1-30REEY/index.html)演示了如何执行此操作。执行以下步骤来编译和运行此示例：

1.  将 MATLAB 文件编译为独立的应用程序。这可以在 MATLAB 中使用以下命令来完成：`mcc -m mycgimagic.m`
2.  将 HTML 文件复制到 Web 服务器并将其放置在具有适当权限的目录中。请查阅您的 Web 服务器文档以了解如何执行此操作。
3.  将 exe 和 CTF 文件复制到 Web 服务器，并将它们放在您网站的“/cgi-bin”目录中。您需要将 Web 服务器配置为具有适当的权限才能执行 exe 文件。请查阅您的 Web 服务器文档以了解如何执行此操作。
4.  在 Web 服务器上安装 MCR。
5.  第一次从 Web 服务器系统本身执行 exe 文件，以强制提取 CTF 存档。
6.  从远程计算机在 Web 浏览器中加载 HTML 文件并提交表单以执行 CGI 程序。

# css - 引导样式问题。风格在ie9中完全被打破

> ID：15099415
> 
> 赞同：1
> 
> 时间：2013-02-26T21:16:29.780
> 
> 标签：css, twitter-bootstrap, internet-explorer-9

![在此处输入图像描述](../Images/f2fabbf362d8d83f9fef982340db6888.png)

从图片中可以看出，IE9 中的样式完全混乱。我检查了[引导站点](https://github.com/twitter/bootstrap/wiki/Browser-Compatibility)，它似乎与所有浏览器兼容。

[http://i.stack.imgur.com/tYnQE.png](https://i.stack.imgur.com/tYnQE.png)链接到 img 以获得更大的版本。

下面是我的代码：

html页面：

```
<html>

<head>
    ...
    <link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css"/>
    ...
</head>

<body>
    <div id="container">
        <form class="form-signin" id="frm_login">
            <fieldset>                                
                <input type="text" class="input-block-level" id="u" name="username" placeholder="Email address">
                <input type="password" class="input-block-level" id="p" name="password" placeholder="Password">
                <a href="https://www.otciq.com/otciq/forgotPassword">Forgot Password?</a>
                <input class="btn btn-large btn-primary submitButton" id="btn_login" type="button" value="Sign In"/>
            </fieldset>
        </form>
    </div>
</body>

</html> 
```

的CSS：

```
.form-signin
{
    max-width: 300px;
    padding: 19px 29px 29px;
    margin: 0 auto 20px;
    background-color: #f8f8f8;
    border: 1px solid #e5e5e5;
    border-radius: 5px;
    box-shadow: 0 1px 2px rgba(0,0,0,.05);
}

.form-signin .form-signin-heading,
.form-signin
{
    margin-bottom: 10px;
}

.form-signin input[type="text"],
.form-signin input[type="password"]
{
    font-size: 16px;
    height: auto;
    margin-bottom: 15px;
    padding: 7px 9px;
}

.form-signin .submitButton,
.form-signin .submitButton:hover
{
    margin-left: 86px;
    background:#00A88F;
}

p {margin:20px 0;}
a {color:#666;}
a:hover {color: #333;} 
```

什么可能导致这个问题？

我尝试了我在 ie9 调试器控制台中看到的所有设置。使用ie9浏览器模式，ie7标准，ie8标准看起来和我在ff中看到的差不多，ie9标准完全打破了样式。我被告知要添加 html，但这会破坏 ff/chrome/ie9 上的 css。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T19:40:50.540

你需要改变

```
<div id="container"> 
```

至

```
<div class="container"> 
```

# javascript - 从视图中设置一个 cookie，然后从 Rails 中的控制器读取它

> ID：15099420
> 
> 赞同：2
> 
> 时间：2013-02-26T21:16:45.167
> 
> 标签：javascript, ruby-on-rails, cookies

我想使用 Javascript 从 Rails 视图中设置 cookie 值，然后使用 Controller 读取此 cookie。Rails 可以做到这一点，我应该怎么做？

我的情况：我有一个输入字段（例如，地址），用户第一次访问我的网站时需要填写该字段。然后用户使用 Omniauth 登录。我想保留地址，直到他登录后。

更新：我能够在客户端添加到 document.cookies。然而，cookies["something"] 从 Rails 端返回 nil。下面是 cookie 哈希：

`#<ActionDispatch::Cookies::CookieJar:0x007 @secret="f4d518c0b2", @set_cookies={}, @delete_cookies={}, @host="localhost", @secure=false, @closed=false, @cookies={"_myapp_session"=>"BAh7Ck==--776b2fcfcd63d3c84d2b1de5327e277499add6d4", "fbsr_1505068851081"=>"mqZeyvoRC"}, @signed=#<ActionDispatch::Cookies::SignedCookieJar:0x007 @parent_jar=#<ActionDispatch::Cookies::CookieJar:0x007fdf...>, @verifier=#<ActiveSupport::MessageVerifier:0x007fdfa34548d8 @secret="f4d518c0b2e9d8", @digest="SHA1", @serializer=Marshal>>>`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-26T21:23:56.170

要在 javascript 中设置 cookie，您可以执行以下操作：

`document.cookie="something= test";`

因此，您可以添加一个事件（单击、提交、..）以从输入中获取值并按照我上面提到的方式创建一个 cookie。

在 Rails 中，您可以像这样读取值：

`cookies["something"]`

*如果需要，您还可以在 javascript 中指定 cookie 何时过期。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-28T05:04:50.790

**简答**

1.  安装[MDN JavaScript Cookie 框架](https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie/Simple_document.cookie_framework)

2.  在您的 js 文件中：

    ```
    docCookies.setItem('my_cookie', 'my_cookie_value', '', '/'); 
    ```

3.  在您的 Rails 控制器上：

    ```
    cookies[:my_cookie] 
    ```

**不是那么简短的答案**

Rails [ActionDispatch::Cookies](http://api.rubyonrails.org/classes/ActionDispatch/Cookies.html)将 cookie 路径默认为**应用程序的根目录**，而[纯 JavaScript](https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie#Write_a_new_cookie)将其默认为**当前路径**。

这意味着如果你不声明路径，你最终会得到两个不同的 cookie，它们具有相同的名称和令人头疼的问题。

为了解决这个问题，您可以使用 Chrome DevTools 窗口上的“应用程序/Cookies”，这样您就可以查看每个 cookie 的所有详细信息，并在通过“控制台”面板修改它们时重新加载它们的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-22T20:08:12.153

这可以解释你的问题。显然，您需要确保 cookie 的路径对齐。

[我如何读取由 jquery 设置的 rails 中的 cookie](https://stackoverflow.com/questions/9932865/how-can-i-read-cookies-in-rails-that-have-been-set-by-jquery)

# javascript - 困惑 - html5 历史 API 和谷歌爬虫？

> ID：15099421
> 
> 赞同：5
> 
> 时间：2013-02-26T21:16:45.443
> 
> 标签：javascript, html, history.js, html5-history

根据[谷歌抓取、AJAX 和 HTML5](https://stackoverflow.com/questions/7611585/google-crawling-ajax-and-html5) ，谷歌可以抓取使用历史 API 的动态页面，但它表示谷歌不会在页面上执行任何 javascript。对我来说，这意味着不会进行 ajax 请求和 dom 构建，因此 google 将无法索引加载页面的内容。谁能详细说明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:21:22.753

如答案中所述，您需要为机器人**提供硬链接**。

就像没有 JavaScript 的用户一样对待它。您应该支持没有 JavaScript 的用户。随意实现`<noscript>`标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:25:19.157

所以链接在页面上的是[谷歌的指南，](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started?hl=nl)关于如何让你的 ajax 网站可以被谷歌抓取。按照提到的架构，您可以做到这一点。

```
www.example.com/ajax.html#!key=value 
```

通过这种方式，您可以告诉 google 抓取工具您的网站是 ajax 可抓取的，剩下的事情他们会做。

# php - 重新排列php关联数组

> ID：15099425
> 
> 赞同：5
> 
> 时间：2013-02-26T21:17:02.500
> 
> 标签：php, arrays, multidimensional-array, associative-array

我有一个数组：

```
$example = array();

$example ['one']   = array('first' => 'blue',
                           'second' => 'red');

$example ['two']   = array('third' => 'purple',
                           'fourth' => 'green');

$example ['three'] = array('fifth' => 'orange',
                           'sixth' => 'white'); 
```

根据函数的一些输入，我需要在 foreach 循环处理我的输出之前更改示例数组的顺序：

```
switch($type)

case 'a':
//arrange the example array as one, two three
break;

case 'b':
//arrange the example array as two, one, three
break;

case 'c':
//arrange the example array in some other arbitrary manner
break;

foreach($example as $value){
        echo $value;
} 
```

有没有一种简单的方法可以在不重新设计我的所有代码的情况下做到这一点？我有一个非常深入的 foreach 循环来进行处理，如果有一种简单的方法可以简单地每次重新排序数组，那将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:24:02.493

你不会在这里找到灵丹妙药的答案。您可能需要编写自己的函数以用于`uksort()`.

```
uksort($example, function ($a, $b) use $type {
    switch($type) {
        case 'a':
            if ($a === 'one' || $b === 'three') return 1;
            if ($a === 'three' || $b === 'one') return -1;
            if ($a === 'two' && $b === 'three') return 1;
            return -1;
            break;
        // and so on...
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T22:27:56.820

你可以使用[`array_multisort`](http://php.net/array-multisort)你的排列。我假设您知道排列并且不需要从键名派生它。说，你想要 order `two, three, one`，然后**创建一个**像这样的引用数组：

```
$permutation = array(3, 1, 2); 
```

*含义：*第一项到位置 3，第二项到位置 1，第三项到位置 2

然后，在 , 之后`switch`排列：

```
array_multisort($permutation, $example); 
```

这将对`$permutation`数组进行排序并将相同的顺序应用于`$example`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:19:22.967

您需要为每种情况编写自定义排序函数，然后使用[usort](http://www.php.net/manual/en/function.usort.php)。第一种情况可以只使用排序。任意排序需要是您定义的逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T21:42:58.800

我看到了更多解决这个问题的方法，但不知道更多关于我不知道什么更好。

1.  做一个预评分（为每个元素制作一个数值，在你的“相当深入的 foreach 循环”中计算），然后使用它作为主要和单一标准对数组进行排序。

2.  如果您的条件仅基于数字字段，则 ASC/DESC 使用[http://php.net/manual/en/function.array-multisort.php](http://php.net/manual/en/function.array-multisort.php)

3.  为每种情况制作自定义排序功能（[http://www.php.net/manual/en/function.usort.php](http://www.php.net/manual/en/function.usort.php)）

# sitecore - SignalR 和 Sitecore

> ID：15099429
> 
> 赞同：3
> 
> 时间：2013-02-26T21:17:06.417
> 
> 标签：sitecore, signalr

有人让 SignalR 和 Sitecore 一起工作吗？

Sitecore 中存在一个问题，即在 Sitecore 中点击 Application_Start 并使其启动 RouteTable.Routes.MapHubs()。

我已经仔细检查了我是否映射到布局上的 URL/signalR/hubs 默认值。还包括 JQuery、JQuery SignalR 和自定义 JS 的脚本块。

除了 URL/signalr/hubs 没有映射之外，它可以在客户端很好地下拉所有内容。

我注意到 Sitecore 中需要对 MVC RouteTables 进行一些特殊处理，但这些并不能直接解决当前遇到的问题。

谢谢 -

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T15:03:21.930

因此，经过一段时间的努力...

这是使这项工作发挥作用的简单因素。

您必须将 /signalr 和 /signalr/hubs 添加到忽略路径，SignalR 才能与 Sitecore 一起使用。

```
<setting name="IgnoreUrlPrefixes"                value="/sitecore/default.aspx|/trace.axd|.....|/signalr|/signalr/hubs" /> 
```

在我把它就位后，我能够在 Application_Start 中看到 MapHubs 正确连接。之前它不会一直达到断点，因为它无法在不尝试获取 Sitecore 项目的情况下提供 URL。现在我看到它一直在断点。

感谢您的回复！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T08:30:38.080

我假设您使用的是 Sitecore 6.6，因为您提到了 Sitecore MVC RouteTables。尝试使用[WebActivator](https://github.com/davidebbo/WebActivator)在 RouteTable 中注册您的集线器映射。WebActivator 为您提供了将此引导代码添加到 a`PreApplicationStartMethod`或 a 的选项，`PostApplicationStartMethod`以便您可以注册路由并避免 Sitecore 的通配符路由优先。我已经使用这种方法在 Sitecore 下引导 Web API 路由。

```
using System;

[assembly: WebActivator.PreApplicationStartMethod(
    typeof($rootnamespace$.App_Start.MySuperPackage), "PreStart")]

namespace $rootnamespace$.App_Start {
    public static class MySuperPackage {
        public static void PreStart() {
            // Add your start logic here
        }
    }
} 
```

另一种方法是将注册代码添加到自定义管道处理器中，并将此处理器添加到初始化事件管道中`App_Config\Include\Sitecore.Mvc.config`

```
<pipelines>

  <!-- Loader -->

  <initialize>
    <processor type="Sitecore.Mvc.Pipelines.Loader.InitializeGlobalFilters, Sitecore.Mvc"/>
    <processor type="Sitecore.Mvc.Pipelines.Loader.InitializeControllerFactory, Sitecore.Mvc"/>
    <processor type="Sitecore.Mvc.Pipelines.Loader.InitializeRoutes, Sitecore.Mvc"/>
  </initialize> 
```

# r - 如何改变点图的形状？

> ID：15099430
> 
> 赞同：8
> 
> 时间：2013-02-26T21:17:14.260
> 
> 标签：r, ggplot2

我有一个具有这种基本结构的数据文件：

```
Type Tm
A 1
A 2
A 3
B 3
B 3
C 1
C 1
C 2 
```

我正在使用它制作一个点图：

```
ggplot(data=df,aes(x = Tm,fill=Type)) +
geom_dotplot(binwidth=1,method="histodot",stackgroups=TRUE) 
```

它工作正常。但是，我想知道是否可以从默认圆圈中更改点的形状。例如，使 A 为三角形，B 为正方形，并将 C 保留为默认圆形。我尝试了各种组合`scale_shape`但没有成功。有时我会收到各种错误消息，有时什么也没有发生。这使我得出结论，要么我做错了什么，要么甚至不可能。哪一个？

**编辑**

joran 在 2013 年 2 月发表的评论说它尚未实施。在过去的一年半里，这个领域有什么进展吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-06-05T21:16:35.730

不幸的是，对此没有选择，而且听起来也没有任何选择的计划。

坦率地说，我很震惊。

[https://github.com/tidyverse/ggplot2/issues/1111](https://github.com/tidyverse/ggplot2/issues/1111)

也许 Plotly 有一个选择。

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2013-04-19T14:13:12.460

我认为你只需要在你的观点上使用 pch 参数。

```
#create A
x <- sample(1:10, 3, replace=TRUE)
y <- sample(1:10, 3, replace=TRUE)
A <- cbind(x,y)

#create B
x <- sample(1:10, 4, replace=TRUE)
y <- sample(1:10, 4, replace=TRUE)
B <- cbind(x,y)

plot(A, pch=11) # this will plot the points in A as stars of David
points(B, pch=14) # this will add the points in B as triangles inside squares 
```

我见过的关于改变点的形状/图形参数的最佳指导在这里： http: [//www.statmethods.net/advgraphs/parameters.html](http://www.statmethods.net/advgraphs/parameters.html)

希望有帮助。

# .net - 序列化时如何避免使用自定义集合类的名称

> ID：15099439
> 
> 赞同：2
> 
> 时间：2013-02-26T21:17:52.270
> 
> 标签：.net, xml-serialization

我有一个自定义集合类作为另一个类的属性，如下所示：

```
class MyDataClass
{
    CustomCollection<MyType> DataCollection;
} 
```

它实现了 IXmlSerializable，因此可以很好地序列化。我唯一的抱怨是生成的 xml 看起来像这样：

```
<MyDataClass>
  <DataCollection>
    <MyType />
    <MyType />
  </DataCollection>
</MyDataClass> 
```

当我不希望集合在 xml 中时，就像这样：

```
<MyDataClass>
  <MyType />
  <MyType />
</MyDataClass> 
```

我已经读过对于列表和数组，您可以添加 [XmlElement] 属性来告诉 xml 序列化程序将集合呈现为未包装的元素列表，但这对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:34:56.793

这应该有效：

```
public class MyDataClass
{
    [XmlElement("MyType")]
    public CustomCollection<MyType> DataCollection;

} 

public class CustomCollection<T> : List<T> { }
public class MyType { }

public static void Main()
{
    MyDataClass c = new MyDataClass();
    c.DataCollection = new CustomCollection<MyType>();
    c.DataCollection.Add(new MyType { });
    c.DataCollection.Add(new MyType { });

    XmlSerializer xsSubmit = new XmlSerializer(typeof(MyDataClass));
    StringWriter sww = new StringWriter();
    XmlWriter writer = XmlWriter.Create(sww);
    xsSubmit.Serialize(writer, c);
    var xml = sww.ToString(); // Your xml
} 
```

生成的 xml 看起来像

```
 <?xml version="1.0" encoding="utf-16" ?> 
    <MyDataClass xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
      <MyType /> 
      <MyType /> 
   </MyDataClass> 
```

# android - MediaPlayer：prepareAsync() 中的 SecurityException

> ID：15099447
> 
> 赞同：1
> 
> 时间：2013-02-26T21:18:10.657
> 
> 标签：android, android-mediaplayer, securityexception

我目前正在尝试从 SDCard 播放 MP3 文件。不幸的是，我无法做到。

这是我尝试过的：

```
private MediaPlayer _mediaPlayer;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        _mediaPlayer = new MediaPlayer();
    }

    public void playButtonClick(View v) {
        File sdcard = new File(Environment.getExternalStorageDirectory()
                .getAbsolutePath());
        File dir = new File(sdcard, "Music/Undone.mp3");

        _mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
        _mediaPlayer.setOnErrorListener(new OnErrorListener() {

            @Override
            public boolean onError(MediaPlayer mp, int what, int extra) {
                android.util.Log.d("Error", "What? " + String.valueOf(what)
                        + "  Extra?" + String.valueOf(extra));
                return false;
            }
        });
        _mediaPlayer.setOnPreparedListener(new OnPreparedListener() {

            @Override
            public void onPrepared(MediaPlayer mp) {
                _mediaPlayer.start();
            }
        });
        try {
            FileInputStream fileInputStream = new FileInputStream(dir);
            fileInputStream.close();
            _mediaPlayer.setDataSource(fileInputStream.getFD());
            _mediaPlayer.prepareAsync();
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (SecurityException e) {
            e.printStackTrace();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

问题是我`SecurityException`在打电话时得到一个`_mediaPlayer.prepareAsync()`。这是错误消息：

```
02-26 22:11:19.020: W/System.err(26048): java.lang.SecurityException
02-26 22:11:19.020: W/System.err(26048):    at android.media.MediaPlayer.prepareAsync(Native Method)
02-26 22:11:19.025: W/System.err(26048):    at com.bert.bertmusicplayer.MainActivity.playButtonClick(MainActivity.java:53)
02-26 22:11:19.025: W/System.err(26048):    at java.lang.reflect.Method.invokeNative(Native Method)
02-26 22:11:19.025: W/System.err(26048):    at java.lang.reflect.Method.invoke(Method.java:511)
02-26 22:11:19.025: W/System.err(26048):    at android.view.View$1.onClick(View.java:3686)
02-26 22:11:19.025: W/System.err(26048):    at android.view.View.performClick(View.java:4211)
02-26 22:11:19.025: W/System.err(26048):    at android.view.View$PerformClick.run(View.java:17267)
02-26 22:11:19.025: W/System.err(26048):    at android.os.Handler.handleCallback(Handler.java:615)
02-26 22:11:19.025: W/System.err(26048):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-26 22:11:19.025: W/System.err(26048):    at android.os.Looper.loop(Looper.java:137)
02-26 22:11:19.025: W/System.err(26048):    at android.app.ActivityThread.main(ActivityThread.java:4898)
02-26 22:11:19.025: W/System.err(26048):    at java.lang.reflect.Method.invokeNative(Native Method)
02-26 22:11:19.025: W/System.err(26048):    at java.lang.reflect.Method.invoke(Method.java:511)
02-26 22:11:19.025: W/System.err(26048):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
02-26 22:11:19.025: W/System.err(26048):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
02-26 22:11:19.025: W/System.err(26048):    at dalvik.system.NativeStart.main(Native Method) 
```

这是我的权限：

```
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_SETTINGS" > 
```

仅通过 Logcat 输出，我无法弄清楚问题所在。

我希望有人能帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:28:45.320

我猜原因是您正在调用`getFD()`已关闭的`FileInputStream`. 关闭时，流可能有一个无效的文件描述符，并且您将其设置为`MediaPlayer`.

# php - Wordpress：自定义摘录长度

> ID：15099449
> 
> 赞同：2
> 
> 时间：2013-02-26T21:18:29.273
> 
> 标签：php, wordpress, function

我试图弄清楚是否有可能从每个帖子中获取摘录，从每个帖子中获取第一段。我目前正在使用 ACF 插件并具有自定义帖子类型和自定义字段。这是我的代码：

```
function custom_field_excerpt() {
    global $post;
    $text = get_field('news');
    if ( '' != $text ) {
        $text = strip_shortcodes( $text );
        $text = apply_filters('the_content', $text);
        $text = str_replace(']]>', ']]>', $text);
        $excerpt_length = 20; // 20 words
        $text = wp_trim_words( $text, $excerpt_length, $excerpt_more );
    }
    return apply_filters('the_excerpt', $text);
} 
```

这很好用，但它只修剪前 20 个单词（或您指定的任何单词），我正在尝试调整它以拉入每个帖子的第一段而不是前 20 个单词。这是可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:50:20.683

因为我们知道内容是裸露的（只是文本），所以您可以简单地通过`\n`字符分解内容，然后假设新数组中的第一个元素是第一段。您可能能够以更有效的方式执行此操作，但功能如下：

### 你的新功能

```
function custom_field_excerpt() {
  global $post;
  $text = get_field('news');
  if ( '' != $text ) {
    $text = strip_shortcodes( $text );
    $text = apply_filters('the_content', $text);
    $text = str_replace(']]>', ']]>', $text);
    $text_paragraphs = explode("\n",$text);
    $text = $text_paragraphs[0];
  }
  return $text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:32:51.217

这是正确的代码，将其添加到您的 functions.php 文件中

```
// Add custom excerpt length
function custom_excerpt($excerpt_length) {
    $content = get_field('custom_field_name');
        $text = strip_shortcodes( $content );
        //$text = apply_filters('the_content', $text);
        $text = str_replace(']]>', ']]>', $text);
        $text = strip_tags($text);
        $words = preg_split("/[\n\r\t ]+/", $text, $excerpt_length + 1, PREG_SPLIT_NO_EMPTY);
        if ( count($words) > $excerpt_length ) {
            array_pop($words);
            $text = implode(' ', $words);
            $text = $text . $excerpt_more;
        } else {
            $text = implode(' ', $words);
        }

    echo $text;
} 
```

然后使用 < ?php custom_excerpt('12'); ?> 指定模板中的长度（删除上面 php 标记中的空格）

对于其他可能发现这一点的人 - 如果您使用的是 the_content 而不是 ACF，那么只需更改 $content = get_field('blog_article_text'); TO $content = get_the_content();

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-26T21:23:19.493

尝试用 strlen($text) 替换 $excerpt_length

```
 $text = wp_trim_words( $text, strlen($text), $excerpt_more ); 
```

# batch-file - 创建批处理文件以移动和重命名文件（如果存在）

> ID：15099450
> 
> 赞同：0
> 
> 时间：2013-02-26T21:18:33.113
> 
> 标签：batch-file

创建批处理文件

资源：`deploy_pkg\conf\*`

目的地：`E:\conf\*`

第一个场景：

我想移动多个文件（例如`web-config.xml`），如果`web-config.xml`目标重命名中已经存在`web-config.xml.bak`，则将新文件移动`web-config.xml`到目标。

第二种情况：

如果源中不存在`deploy_pkg\conf\*`文件，则保持目标文件不变。

请指教？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:53:41.360

类似的东西：

```
update.bat c:\from c:\to 
```

内容

```
set FROM=%1
set TO=%2

for %%F in (*.*) do (
 rem echo FILE == %%F
 if exist %TO%\%%F ren %TO%\%%F %TO%\%%F.bak
 copy %FROM%\%%F %TO%\%%F
) 
```

大致是

# html - 文本在 Mac 上的 webkit 浏览器中不可见，但在所有其他浏览器中可见

> ID：15099451
> 
> 赞同：3
> 
> 时间：2013-02-26T21:18:38.383
> 
> 标签：html, css, macos, google-chrome, webkit

我有一个奇怪的问题，在 Mac 上的 Chrome 和 Safari 中都看不到某些文本。

在所有其他浏览器中，文本是完全可见的，我不知道为什么会这样。我在 Firebug 和 Chrome Developer 工具中调试过，但没有成功。

这是一个例子：

火狐 ![在此处输入图像描述](../Images/7e98ec9c405ad48b5d0a4a40e55d0810.png)

铬合金 ![在此处输入图像描述](../Images/592b7634ba01a29ba050e2f8991a3eaf.png)

更新：这里是 Javascript：

```
function openProductInfo() {
    closeAllProductInfo();
    $('#overlay').show();
    $('#info').css({visibility: 'visible', opacity: 0});
    $('#info').animate({opacity: 1}, 250);
    $('#options a.info').addClass('active');
    infoVisible = true;
}

$('.info').click(function() {
    if (infoVisible) { 
        $('#info').animate({opacity: 0}, 250, function() {  
            closeAllProductInfo(); 
        }); 
    } else { 
        openProductInfo(); 
    }

    return false;
});

$('#overlay').click(function() {
    if (infoVisible) { 
        $('#info').animate({opacity:0}, 250, function() { 
            closeAllProductInfo(); 
        }); 
    }
}); 
```

这是现场直播：

[http://fine-grain-2.myshopify.com/products/the-bowden-black-walnut](http://fine-grain-2.myshopify.com/products/the-bowden-black-walnut)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T23:20:14.157

我已经在 Chrome 中测试过了。'#info' div 似乎是隐藏的（可见性：隐藏）。您可能要考虑使用“显示”而不是“可见性”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:31:11.427

好的，我终于弄清楚了问题所在。

我正在`@font-face`为这个站点使用字体，并且由于某种原因，当我使用`AvenirLight`而不是`Avenir`正文字体时，它使仅与 CSS3 转换和 JavaScript 转换相关联的文本不可见。

我仍然不知道为什么会发生这种情况，以及为什么它只发生在 Mac 上的 webkit 浏览器中。

**让我们尝试解决这个问题！**

这是我的`@font-face`声明：

```
@font-face {
    font-family: "Avenir";
    font-style: normal;
    font-weight: 600;
    src: url("AvenirLTStd-Medium.otf") format("opentype");
}
@font-face {
    font-family: "AvenirBold";
    font-style: normal;
    font-weight: 600;
    src: url("AvenirLTStd-Black.otf") format("opentype");
}
@font-face {
    font-family: "AvenirLight";
    font-style: normal;
    font-weight: 600;
    src: url("12-Avenir-Light.ttf") format("opentype");
} 
```

这是我声明的地方`body` `font-family`：

```
body {
    background: none repeat scroll 0 0 #999999;
    font-family: Avenir;
    font-weight: normal;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-07T00:45:34.263

如果您将 CSS3`transition`属性应用到应用了属性的`#info`div，即使在某个状态`visibility:hidden;`后应用 a 后，它也不会显示。`visibility: visible;`

我也遇到了这个问题，我不得不`transition`从该 div 中删除该属性。尝试删除 CSS3`transition`属性，看看是否有效。

# php - 如何调试 AWS Elastic Beanstalk 中的性能问题

> ID：15099453
> 
> 赞同：3
> 
> 时间：2013-02-26T21:18:45.587
> 
> 标签：php, performance, amazon-web-services, amazon-rds, amazon-elastic-beanstalk

在过去的几天里，我的 Web 应用程序一直很慢，有时会返回 503 错误。

该应用程序在本地运行良好。

涉及这么多活动部件，我怎么知道该去哪里看？是我的代码吗（如果是，我该如何找到）？是亚马逊？是数据库吗？我超出了我的实例吗？

我正在使用 Amazon Elastic Beanstalk（1 个小实例）和 MySQL RDS（1 个微型实例），代码使用 PHP。该网站的流量相对较低（过去一周的页面浏览量约为 1500 次）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:22:22.883

您需要使用 xdebug 进行分析：[http](http://www.xdebug.org/docs/profiler) ://www.xdebug.org/docs/profiler然后您可以使用查看 cachegrind 文件的程序（例如[http://sourceforge.net/projects/wincachegrind/](http://sourceforge.net/projects/wincachegrind/) ) 找到慢点。也可以打开mysql慢查询日志，看看有没有问题。（在my.cnf中：log-slow-queries = [日志文件路径]，然后重启mysql）

# css - 是否可以使用 css 实现斜边？

> ID：15099456
> 
> 赞同：3
> 
> 时间：2013-02-26T21:18:55.613
> 
> 标签：css

我正在尝试使用 CSS 中的边框，但不知道如何实现以下“四四方方”的外观：

![在此处输入图像描述](../Images/494828782e0c5e95f79fda9a443931fb.png)

是否可以？如果是这样，如何实现（不要使用深色背景，因为它可以增加对比度）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:32:49.857

这是可能的 - 使用`:after`边框和一些额外的 CSS 技巧。

***例子***

[http://jsfiddle.net/EaZ8r/3/](http://jsfiddle.net/EaZ8r/3/)

***CSS***

```
body { 
    background: #000;
}

#box {
    height: 150px;
    width: 200px;
    background: #fff;
    margin: 0 auto;
    position: relative;
}

#box:after {
    display: block;
    background: blue;
    width: 180px;
    height: 0px;
    border: 10px #000 solid;
    border-top: 15px #eee solid;
    content: "";
    position: absolute;
    bottom: 0px;
} 
```

***这个怎么运作？***

这里的主要内容是很好地理解`border`浏览器是如何淹没的。看看这个例子：http: [//jsfiddle.net/n2nsB/](http://jsfiddle.net/n2nsB/)。当两个边界相遇时，画布在它们之间被分割，是什么让某种三角形淹没在那里。这可能非常有用，因为有两件事：

1.  首先，`border-width`可以为所有4个边框分别设置，这样你就可以改变分割的角度！检查示例：http: [//jsfiddle.net/n2nsB/1/](http://jsfiddle.net/n2nsB/1/)
2.  其次，但更重要的是：您可以设置`border-color`equal to`background`使其*不可见*！示例：http: [//jsfiddle.net/n2nsB/2/](http://jsfiddle.net/n2nsB/2/)
3.  您甚至可以设置边框，当元素没有高度时，是什么使边框只是被该元素淹没的东西。示例：http: [//jsfiddle.net/n2nsB/3/](http://jsfiddle.net/n2nsB/3/)

另一方面，你也应该知道`:after`伪元素是如何工作的。你可以在网上找到很多关于这方面的非常好的教程。我建议一开始：[http ://coding.smashingmagazine.com/2011/07/13/learning-to-use-the-before-and-after-pseudo-elements-in-css/](http://coding.smashingmagazine.com/2011/07/13/learning-to-use-the-before-and-after-pseudo-elements-in-css/)

因此，只需将所有这些结合起来，就可以得到你想要的。

# actionscript-3 - AS3 - 将经典文本字段转换为 TLF 文本字段

> ID：15099458
> 
> 赞同：0
> 
> 时间：2013-02-26T21:19:20.907
> 
> 标签：actionscript-3, textfield

我在舞台上有一个**经典**的文本字段，我想把它变成一个**TLF**文本字段。如何才能做到这一点？

谢谢你。乌里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T03:04:44.053

如果在 Flash Pro 的舞台上，您可以简单地更改控件。

来自经典文本：

![经典文本字段](../Images/05622afbe184a95bf41bd4927b30fcc7.png) ![经典文本字段属性](../Images/319d9f89d70db99282de6118fb345041.png)

到 TLF 文本：

![tlf-文本域](../Images/0b88c3249bc480dd37b4db94ede47239.png) ![tlf-textfield-属性](../Images/d7df3d56e57e1af50fa6054234e46817.png)

以编程方式，我不相信`flash.text.TextField`and之间有类型转换`fl.text.TLFTextField`。

两人共享`.text`财产；但是，在 html 和文本流等功能方面有所不同。

# java - 不同类型的二维数组

> ID：15099463
> 
> 赞同：0
> 
> 时间：2013-02-26T21:19:48.410
> 
> 标签：java, arrays, multidimensional-array

我有这个：

```
private float dir = 0f;
private boolean ch = true;
private String = "No";
private int aB = 5; 
```

我现在怎么能用这个值创建一个二维数组？例如`array1[][]`：

```
{ {0f, "true", "No", 5} } 
```

或者我应该做一个这样的数组？

```
private String array1[][]; 
```

将所有值保存为 a`String`然后`parse`每个项目？

但我认为，这不是一个好的编程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:27:03.820

您可以使用抽象数组，IE 使用 Object 作为类型。

```
Object array1[][]; 
```

然而，这看起来更像是你真的想要一堂课。

```
class MyObject {
    private float dir;
    private boolean ch;
    private String str;
    private int aB;
// getters and setters omitted 
} 
```

然后用这个创建一个数组或集合：`MyObject[] array1`。如果您可以存储对象，这通常是更好的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:23:32.320

使用对象而不是原语，例如

```
Object[][] vars = {{ new Float(0f); Boolean.TRUE, "No", new Integer(5) }} 
```

但是，我不得不质疑为什么您实际上需要这样做，可能是设计缺陷？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:25:24.430

大多数时候，混合这样的值并不是一个好主意。它被称为锯齿状数组，许多语言都允许您这样做。这在理论上很好，但在实践中，它会使以后维护您的代码变得非常困难。

您通常希望使用描述性变量名称来很好地定义事物。由于 Java 是一种强类型语言，您可能希望创建一个将这些值作为成员变量的类，然后创建该类的数组。然后，如果您有任何特殊操作要进行，您可以制作仅处理这些值的特殊方法。

那有意义吗？

# magento-1.7 - 订单确认电子邮件中的订单链接

> ID：15099470
> 
> 赞同：1
> 
> 时间：2013-02-26T21:20:21.317
> 
> 标签：magento-1.7

我正在尝试在订单确认电子邮件中添加订单审核链接：

```
<a href="{{store url="sales/order/view/order_id/}}"{{var order.id}}" style="color:#1E7EC8;"> 
```

但是当客户收到电子邮件时，它只是链接到`http://mysite/sales/order/view/`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-03T07:32:22.860

```
Hi,
<a href="{{store url="sales/order/view/order_id/"}}{{var order.id}}" style="color:#1E7EC8;">

This is okay but it still not shows full link. It shows only sales/order/view/.

To show **order_id/**, you have to create Custom Variable.
Go to **System >> Custom Variables**.
Check Image below.
**http://imagizer.imageshack.com/img922/1470/tI8BGv.png**

Now create custom variable shown in image with any name.
Now revise the code and change the line.

<a href="{{store url="sales/order/view/"}}{{customVar code=static_url}}{{var order.id}}" style="color:#1E7EC8;">

It's working fine for me.
Thanks & Regards.
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T22:00:09.400

移动你的报价。

```
<a href="{{store url="sales/order/view/order_id/"}}{{var order.id}}" style="color:#1E7EC8;"> 
```

# javascript - mouseenter 和 mouseleave 停止动画

> ID：15099473
> 
> 赞同：2
> 
> 时间：2013-02-26T21:20:26.747
> 
> 标签：javascript, jquery, html

我正在使用 mouseenter 和 mouseleave 制作动画，问题是如果我在 div 上快速移动鼠标，动画会变得疯狂，就像不停地重复一样，我该如何解决这个问题，任何类型的停止之类的?

这是我的代码：

```
 /* Footer Hover */
    function footerhover(){
        var footer = $('#footer')
        footer.bind({
            'mouseenter' : function(){
                footer_animate(200);
                footer_bottom(145);
            },
            'mouseleave' : function(){
                footer_bottom(0);
                footer_animate(40);
            }
        })
    }
    function footer_animate(h){
        $('#footer').animate({
            height: h
        }, 50 );
    }
    function footer_bottom(b){
        $('#footer').animate({
            bottom: b
        }, 300 );
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:23:57.010

在开始一个新动画之前，最好使用 jQuery 的 stop 函数停止当前动画，否则它们会堆积起来并一遍又一遍地触发。因此，每次为页脚设置动画时，请先停止它。

```
$('#footer').stop().animate({}); 
```

# css - 浮动下一个 div 环绕

> ID：15099474
> 
> 赞同：-1
> 
> 时间：2013-02-26T21:20:26.910
> 
> 标签：css

我对这种风格有问题，内容主体环绕菜单栏，我尝试删除浮动但没有任何反应。

```
.menu {
    float: left;
    padding: 0;
    width: 100%;
    margin: 0 0 1em 0;
}
.menu ul {
    width: 1100px;
    margin: 0 auto;
    padding: 0;
    list-style: none;
}
.menu li {
    float: left;
}
.menu li a {
    font-size: 14px;
    font-weight: bold;
    text-transform: uppercase;
    color: #FFFFFF;
    padding: 2px 10px;
    text-decoration: none;
}
.menu a:hover {
    color: #FFFFFF;
    border-radius: 5px;
    border-style: solid;
    border-color: #666666;
    border-left: 1px;
    border-right: 1px;
    box-shadow: #333 3px 3px 4px;
}
.content {
    width: 1100px;
    margin: 0 auto;
} 
```

内容写下最后一个链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:03:23.970

`clear`您的 CSS 中没有任何内容。确保浮动 div 之后的第一个元素被清除。

# python - 管理员中的 Django 自定义列表视图

> ID：15099476
> 
> 赞同：1
> 
> 时间：2013-02-26T21:20:34.623
> 
> 标签：python, django, django-admin

我在 django 站点中管理的对象之一在数据库中只会有一个实例。因此，我想将列表视图更改为简单地重定向到第一个对象的“编辑”页面。

所以基本上当你点击/admin/my_site/widgets 我想重定向到/admin/my_site/widget/1。我已经尝试过自定义视图、自定义模板等，但我找不到这样做的简单方法（或任何这样做的方法）。

这几乎就像我想做这样的事情（不起作用，因为我不知道如何更改列表视图）：

```
class WidgetAdmin(admin.ModelAdmin):
    def list_view(self, request):
        widget = Widget.objects.all()[0]
        return HttpResponseRedirect('/admin/my_site/widget/%s' % widget.id) 
```

我还尝试更改 url 以匹配列表请求并在那里进行重定向，但我似乎无法将列表请求与完整的一揽子正则表达式匹配，即 (r/^.*$/) 哪个意味着我只是得到一个无限循环重定向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:35:39.760

我需要同样的东西。我使用 ModelAdmin 的 changelist_view 解决了它略有不同。使用您的示例，它看起来像：

```
class MySingleEditAdmin(admin.ModelAdmin):
   def changelist_view(self, request, extra_context=None):
       object, created = self.get_my_object()
       url = reverse('admin:%s_%s_change' %(object._meta.app_label, object._meta.module_name),  args=[object.id] )
       return HttpResponseRedirect(url)

class WidgetAdminAdmin(MySingleEditAdmin):
   def get_my_object(self):
       return Widget.objects.get_or_create(pk=1, ...default_data...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:06:42.900

好的，这就是我整理出来的方式。

```
class WidgetAdmin(admin.ModelAdmin):
    def list_view(self, request):
        widget = Widget.objects.all()[0]
        return HttpResponseRedirect('/admin/my_site/widget/%s' % widget.id)

    def get_urls(self):
        from django.conf.urls.defaults import *
        urls = super(WidgetAdmin, self).get_urls()
        my_urls = patterns('',
                    (r'^$', admin.site.admin_view(self.list_view))
                )
        return my_urls + urls 
```

# sql - 为什么在使用 dbms_random.value 函数时需要在此 Oracle SQL 查询中包含 rownum 字段？

> ID：15099477
> 
> 赞同：2
> 
> 时间：2013-02-26T21:20:34.550
> 
> 标签：sql, oracle, random, sample, rownum

我正在从一些表中抽取一个随机样本，并注意到根据我编写查询的方式，它不起作用。显然，我没有使用 all_tab_columns，我只是提供了一个适用于 vanilla 实例 (9.2.0.8) 的示例。

为什么这行得通？

```
select * from (
    select 
        floor(dbms_random.value(0,1000)) as randomval
    from 
        all_tab_columns where rownum < 10000
) where randomval > 200 and randomval < 300; 
```

但这不会返回任何结果。

```
select * from (
    select 
        floor(dbms_random.value(0,1000)) as randomval
    from 
        all_tab_columns 
) where randomval > 200 and randomval < 300; 
```

查询中的 rownum < 10000 有什么作用？

编辑：澄清什么不起作用。

编辑：添加版本 9.2.0.8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:52:31.000

我没有明确的答案，但我有一个理论......

我的猜测是您的第二个查询正在为此优化：

```
select * 
  from all_tab_columns 
 where floor(dbms_random.value(0,1000))> 200 
   and floor(dbms_random.value(0,1000)) < 300; 
```

并且`rownum`在您的内联视图中以某种方式具有标准正在阻止该优化。

这也可以解释为什么我们中的一些人（包括我在内）无法看到您描述的问题 - 因为我们使用不同版本的 Oracle，并且查询对我们的优化方式不同。

**编辑**

经过一番谷歌搜索，我遇到了[这个 AskTom 问题](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:3181424400346795479)，这似乎是相关的。Tom Kyte 的回答以这一行结束：

> 从 SQL 调用函数时，最好不要依赖函数被调用的频率、调用顺序等。简而言之，什么都不做。请记住 - SQL 重写开始了，我们一直在重写您的 SQL。不要依赖副作用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:27:04.853

我认为@Peter 正在做某事，但需要更多解释。

在 Oracle 中，函数可以是 DETERMINISTIC 也可以不是。这意味着该函数在使用相同的参数调用时返回相同的值。所以，`sqrt()`是确定性的；`dbms_random()`不是。其他数据库使用术语 STABLE 与 VOLATILE 来表示这两个类别。

如果我不得不猜测，Oracle 引擎足够聪明，知道以下查询应该返回行：

```
select * from (
    select 
        dbms_random.value(0,1000) as randomval
    from 
        all_tab_columns 
) where randomval > 200 and randomval < 300; 
```

但是，我怀疑它会因为`floor()`. 也就是说，编译器检测到一个“稳定”函数，所以它只是查找以前的值。而且，它使用缓存的值，多次调用该函数。

如果这是正确的，那么上面的查询将返回行。如果是这样，那么我将把数据库的这个“特性”称为一个错误——不过，可能在某个地方有一个数据库优化工程师，他会认为这是一个非常有用的特性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T20:49:13.080

您的两个查询都在 Oracle 11g R2 中工作。ROWNUM 是 Oracle 中的伪列，有兴趣可以阅读。

# c# - SQLite 非常慢的 ExecuteNonQuery

> ID：15099484
> 
> 赞同：6
> 
> 时间：2013-02-26T21:21:05.963
> 
> 标签：c#, sqlite

好吧，我正在使用 SQLite，但是当我开始执行非查询时，可能有 10k+ 命令 [.sql 文件]。我发现将信息添加到数据库可能需要长达 10 分钟以上的时间，这非常慢。

无论如何，这是我的 ExecuteNonQuery 代码。

```
public int ExecuteNonQuery(string sql)
{
    var cnn = new SQLiteConnection(_dbConnection);
    cnn.Open();
    var mycommand = new SQLiteCommand(cnn) {CommandText = sql};
    int rowsUpdated = mycommand.ExecuteNonQuery();
    cnn.Close();
    return rowsUpdated;
} 
```

我希望有一种方法可以让它在几秒钟内完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T21:25:01.973

SQLite 的问题是您在事务**中**包装了 insert-update-delete 命令，否则它会非常缓慢。您可以使用 .NET 数据提供程序中内置的事务支持来执行此操作，或者由于您正在读取 .sql 文件，因此您可以创建第一行`begin transaction`和最后一行`commit transaction`。无论哪种方式都应该有效。

如果您想在 .sql 文件中执行此操作，那么它可能看起来像这样。

```
begin transaction;

insert into ...;
update ...;
delete ...;

commit transaction; 
```

或者，如果您在代码中执行此操作，它将看起来像这样。

```
public int ExecuteNonQuery(string sql)
{
    var cnn = new SQLiteConnection(_dbConnection);
    cnn.Open();
    var transaction = cnn.BeginTransaction();
    var mycommand = new SQLiteCommand(cnn) {CommandText = sql};
    mycommand.Transaction = transaction;
    int rowsUpdated = mycommand.ExecuteNonQuery();
    transaction.Commit();
    cnn.Close();
    return rowsUpdated;
} 
```

# java - 有重复到没有重复的列表

> ID：15099486
> 
> 赞同：0
> 
> 时间：2013-02-26T21:21:12.503
> 
> 标签：java, collections

我有一个包含重复值的列表。

```
List<valFile> isList = valBo.findId(); 
```

isList 的值类似于 {100, 100, 100, 102, 105, 105}

我想删除这些重复项并使用没有重复项的相同列表。我尝试了 set 但不知道如何使用没有重复的相同列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:23:09.027

创建一个`LinkedHashSet`以维护排序并添加列表中的所有项目。重复的将被丢弃：

```
Set<valFile> set = new LinkedHashSet<valFile>(isList); 
```

然后将其添加回列表：

```
List<valFile> listWithoutDuplicates = new ArrayList<valFile>(set); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:23:23.637

我会使用一个集合并转储回一个列表。

```
List<valFile> unique = new ArrayList<valFile>(new HashSet<valFile>(islist));
Collections.sort(unique); 
```

或者如果你有一个好的比较器，你可以使用 TreeSet

```
Set<valFile> unique = new TreeSet<valFile>(isList); 
```

如果您绝对必须使用相同的列表（可能是因为某处还有其他引用它），您最好的选择是清除它。

```
List<valFile> unique = new ArrayList<valFile>(new HashSet<valFile>(islist));
Collections.sort(unique);
isList.clear();
isList.addAll(unique); 
```

# jsf - 在 JSF 1.2 中使用 Mojarra 配置 JSF 视图状态加密

> ID：15099492
> 
> 赞同：2
> 
> 时间：2013-02-26T21:21:30.190
> 
> 标签：jsf, viewstate, jboss5.x, jsf-1.2, mojarra

我试图弄清楚如何使用 JSF 1.2 和 Mojarra 加密视图状态。奇怪的是，它似乎在某些服务器上默认加密，但在其他服务器上却没有。例如，在我的本地主机上，我看到以下内容：

```
<input type="hidden" name="javax.faces.ViewState" id="javax.faces.ViewState" value="-40233784603124937:-3413182513789758151" autocomplete="off" /> 
```

但是在我们的测试环境服务器上，我得到：

```
<input type="hidden" name="javax.faces.ViewState" id="javax.faces.ViewState" value="j_id4:j_id5" /> 
```

您会注意到这两者之间的两个不同之处：

1.  第一个有 autocomplete="off"
2.  第一个加密了 viewState 值，而第二个没有

问题是我一生都无法弄清楚为什么两者不同。我的本地主机上的代码库与服务器上的代码库相同。我的 web.xml 中没有指定配置选项，所以我会假设我的 localhost 不会被加密（因为这是默认设置，对吗？）。

根据[Mojarra 文档](https://wikis.oracle.com/display/GlassFish/JavaServerFacesRI#JavaServerFacesRI-HowcanIsecureviewstatewhenusingclientsidestatesaving?)，我应该添加：

```
<env-entry>
 <env-entry-name>com.sun.faces.ClientStateSavingPassword</env-entry-name>
 <env-entry-type>java.lang.String</env-entry-type>
 <env-entry-value>[SOME VALUE]</env-entry-value>
</env-entry> 
```

但这似乎专门用于客户端状态保存，而不是服务器端状态保存。除非我误解了事情，否则我正在使用服务器端状态保存（至少，我找不到我们配置 javax.faces.STATE_SAVING_METHOD 的任何地方。

所以，我的问题：

1.  为什么我的配置在 localhost 和服务器之间会有所不同？除了 web.xml，还有其他选项可以指定吗？
2.  如何在我们所有的服务器上启用 viewState 加密（比如在我的本地主机上）？

配置：

*   Jboss 5.1.0.GA
*   莫哈拉 1.2_12-b01-FCS
*   接缝 2.2.0.GA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:20:28.813

根据[issue 1129](http://java.net/jira/browse/JAVASERVERFACES-1129)`autocomplete="off"`在 Mojarra 1.2_13 中引入了视图状态隐藏字段。Mojarra 1.2_14 中引入了不同的视图状态 ID 算法（对 CSRF 攻击不敏感）（我找不到相应的问题报告，我只知道它是第一次为 JSF 2.0 指定的，后来又反向移植到莫哈拉 1.2)。

鉴于这些症状，您的测试环境*实际上*至少在运行 Mojarra 1.2_14。对齐您的 JSF 版本。Mojarra 1.2[目前](http://javaserverfaces.java.net/)已经是 1.2_16。请注意，JBoss 默认附带 Mojarra。

# javascript - 阻止 ng-mouseenter 和 ng-mouseout 触发内部元素

> ID：15099498
> 
> 赞同：3
> 
> 时间：2013-02-26T21:21:56.247
> 
> 标签：javascript, angularjs

我有一个无序列表，其中每个 li 都是固定的小尺寸，但是当您将鼠标悬停在它上面时，它会扩展为完整尺寸。这是通过 ng-mouseover 和 ng-mouseout 完成的。问题是一些 li 文本包含其他标记（例如），当鼠标进入标签时，它会触发 mouseout 事件并折叠 li。

显然，期望的行为是让 li 在鼠标位于其中时保持放大，即使它位于子元素上方。有没有人知道如何基本上忽略内部元素的鼠标悬停？如果要进入子元素，我还需要忽略 li 的 mouseout。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T21:42:05.100

有两种选择：

1.  在您的内部元素上使用 CSS[指针事件](https://developer.mozilla.org/en-US/docs/CSS/pointer-events)（但首先检查它在目标浏览器中的支持程度）。

2.  改用 ngMouseenter/ngMouseleave（有关mouseenter /mouseleave 与 mouseover/mouseout 之间的不同行为，请参阅此[plnkr ）](http://embed.plnkr.co/cUgFOa4E5fp2m28iJU2o)

# mysql - 联合引擎 PHPmyAdmin、MYSQL5、Magento、CPANEL

> ID：15099501
> 
> 赞同：0
> 
> 时间：2013-02-26T21:22:04.697
> 
> 标签：mysql, sql, cpanel, federated-storage-engine

我正在尝试访问远程服务器上旧 magento 数据库上的一些表。我正在尝试使用联合引擎重新创建表，并使用 sql 将它们插入到本地服务器上，如下所示：

```
CREATE TABLE IF NOT EXISTS `fed_customer_address_entity` (   `entity_id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'Entity Id',   `entity_type_id` smallint(5) unsigned NOT NULL DEFAULT '0' COMMENT 'Entity Type Id',   `attribute_set_id` smallint(5) unsigned NOT NULL DEFAULT '0' COMMENT 'Attribute Set Id',   `increment_id` varchar(50) DEFAULT NULL COMMENT 'Increment Id',   `parent_id` int(10) unsigned DEFAULT NULL COMMENT 'Parent Id',   `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'Created At',   `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT 'Updated At',   `is_active` smallint(5) unsigned NOT NULL DEFAULT '1' COMMENT 'Is Active',   PRIMARY KEY (`entity_id`),   KEY `IDX_CUSTOMER_ADDRESS_ENTITY_PARENT_ID` (`parent_id`) ) ENGINE=FEDERATED connection='mysql://user:pass@test.ourwebsite.com/animaln2_MagentoTest/customer_address_entity'; 
```

但是它们默认为 MyIsam 表（导出表时可以看到）。它也不会让我在“操作”选项卡下将引擎类型更改为联合。我正在运行 MYSQL 版本 5.1.68-cll。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:24:12.633

首先，您需要 VPS 或某种专用服务器才能激活联合引擎。一旦我意识到有更好的方法可以做到这一点，我就放弃了使用联合。我实际上只需要访问不同服务器上的旧数据。因此，我也下载了我需要访问的表，并将其添加到本地服务器上的新数据库中。然后我只是创建了两个指向不同数据库的链接，并解析了将它们加在一起的结果。有时你只是希望你一开始就亲吻 :)

# matlab-figure - 如何将 matlab 图形导出为 pdf/eps 而不会丢失图形的任何部分？

> ID：15099502
> 
> 赞同：0
> 
> 时间：2013-02-26T21:22:06.513
> 
> 标签：matlab-figure

如何将 matlab 图形导出为 pdf/eps 而不会丢失图形的任何部分？如果我最大化图形窗口，我会失去一部分图形，如果我最小化，我会得到一个没有填满所有空间的图形，如果我保存为 jpg，我会得到一个非常好的缩放图形，但分辨率很差。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:35:07.320

`Position`您可以使用vector 属性控制纸上图形的大小`[left bottom width height]`。例如：

```
set(gcf,'Position',[0,0,560,900]) 
```

然后将重新调整大小的图形导出为 pdf。

# asp.net-mvc - 关闭 ASP.NET MVC WebApi 中的 AutoDecode

> ID：15099503
> 
> 赞同：0
> 
> 时间：2013-02-26T21:22:07.607
> 
> 标签：asp.net-mvc, asp.net-web-api

似乎 ASP.NET MVC Web API 中的 FormDataCollection 自动解码了这些值。有没有办法关闭它？我正在使用提琴手将以下数据发布到我的网址：

```
.code=2001&Color=Lam%E9%20Purple 
```

不幸的是，颜色已经被解码，结果如下：

```
Lam� Purple 
```

我希望得到的是：

```
Lamé Purple 
```

使用的代码：

```
[HttpPost]
public HttpResponseMessage PostItem(FormDataCollection collection)
{
    int qty = 5000;
    var response = Request.CreateResponse(HttpStatusCode.Created);
    response.StatusCode = HttpStatusCode.OK;
    if (collection == null)
    {
        response.Headers.Add("Available", qty.ToString());
        return response;
    }

    var item = new Item();
    foreach (KeyValuePair<string, string> keyValuePair in collection)
    {
        switch(keyValuePair.Key)
        {
            case ".quantity":
                item.Qty = Convert.ToInt32(keyValuePair.Value);
                break;
            case ".code":
                item.Style = keyValuePair.Value;
                break;
            case "Color":
                item.Color = keyValuePair.Value;
                break;
            case "Size":
                item.Size = keyValuePair.Value;
                break;
        }
    }

    qty = Repository.GetInventory(item);
    response.Headers.Add("Available", qty.ToString());    
    return response;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:25:53.137

您似乎使用了一些特定的请求编码，而不是 UTF-8。因此，使用以下[`<globalization>`](http://msdn.microsoft.com/en-us/library/hy4kkhe0%28v=vs.100%29.aspx)元素相应地调整您的 web.config：

```
<globalization requestEncoding="iso-8859-1" /> 
```

或确保您发送正确的 utf-8 url 编码请求：

```
code=2001&Color=Lam%C3%A9%20Purple 
```

# r - 通过 r 更新 postgresql 数据库中的表

> ID：15099507
> 
> 赞同：7
> 
> 时间：2013-02-26T21:22:15.873
> 
> 标签：r, postgresql

如何通过 R 使用新数据更新 postgresql 数据库中的数据？

我试过了

```
dbGetQuery(con,"UPDATE table SET column1=:1,column2=:2, column3=:3 
              where id=:4", data=Rdata[,c("column1", "column3", "column3","id")]) 
```

我也尝试将冒号替换为 $ 但这也不起作用。我不断得到：

```
Error in postgresqlExecStatement(conn, statement, ...) : 
unused argument(s) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T03:03:33.063

我想通了使用：

```
update <- function(i) {
drv <- dbDriver("PostgreSQL")
con <- dbConnect(drv, dbname="db_name", host="localhost", port="5432", user="chris", password="password")
txt <- paste("UPDATE data SET column_one=",data$column_one[i],",column_two=",data$column_two[i]," where id=",data$id[i])
dbGetQuery(con, txt)
dbDisconnect(con)
}

registerDoMC()

foreach(i = 1:length(data$column_one), .inorder=FALSE,.packages="RPostgreSQL")%dopar%{
update(i)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T21:51:06.157

至少 RODBC 有一个特定的函数**sqlUpdate**：

> sqlUpdate 更新已存在行的表。数据框 dat 应包含名称映射到表中（某些）列的列

见[http://cran.r-project.org/web/packages/RODBC/RODBC.pdf](http://cran.r-project.org/web/packages/RODBC/RODBC.pdf)

# python - Python - 如何使填字游戏求解器更快

> ID：15099510
> 
> 赞同：1
> 
> 时间：2013-02-26T21:22:20.473
> 
> 标签：python

我有以下功能，它是填字游戏求解器的一部分：

```
def CrosswordPossibleWords(p_words, p_cw_words):
    """For each word found in the crossword, find the possible words and keep track of the one with the minimum possible words.

    Keyword arguments:
    p_words    -- The dictionary words.
    p_cw_words -- The crossword word attributes.
    """
    l_min = 999999999
    l_min_index = -1
    l_index = 0
    l_choices = []
    for l_cw_word in p_cw_words:
        if l_cw_word[2] >= l_min_length and '-' in l_cw_word[4]:
            pattern = re.compile('^' + l_cw_word[4].replace('.', '%').replace('-', '.').upper() + '$', re.UNICODE)
            l_choice = []
            for l_word in [w for w in p_words if len(w) == len(l_cw_word[4])]:
                if re.match(pattern, l_word):
                    l_choice.append(l_word)
            l_choices.append(l_choice)
            if len(l_choice) < l_min:
                l_min_index = l_index
                l_min = len(l_choice)
        else:
            l_choices.append([])
        l_index = l_index + 1
    return (l_choices, l_min_index) 
```

填字游戏的形式如下：

```
[row, col, length, direction, word] 
```

`'.'`如果我不能解决那个单词，我有一个单词，`'-'`如果我不知道那个字母。

我怎样才能使这段代码更快？目前运行大约需要 2.5 秒。正在考虑使用 numpy 字符串；因为显然 numpy 快了 10 倍，但我对 numpy 一无所知，也不知道我是否能够使用所有当前的字符串函数。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:54:26.130

您可以在调用此函数之前按字长对字典进行分区，因此不必在每次调用时都重新执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:03:39.517

虽然我同意 Scott Hunter 的观点，但您可能正在寻找这样的东西，其中列表被替换为 dicts：

```
def CrosswordPossibleWords(p_words, p_cw_words):
    """For each word found in the crossword, find the possible words and keep track of the one with the minimum possible words.

    Keyword arguments:
    p_words    -- The dictionary words.
    p_cw_words -- The crossword word attributes.
    """
    l_min = 999999999
    l_min_index = -1
    l_index = 0
    l_choices = {}    # using dict instead of list
    for l_cw_word in p_cw_words:
        if l_cw_word[2] >= l_min_length and '-' in l_cw_word[4]:
            pattern = re.compile('^' + l_cw_word[4].replace('.', '%').replace('-', '.').upper() + '$', re.UNICODE)
                l_choice = {}  # using dict instead of list

            for l_word in [w for w in p_words if len(w) == len(l_cw_word[4])]:
                if re.match(pattern, l_word):

                    l_choice[l_word]=None

            l_choices[l_choice]=None

            if len(l_choice) < l_min:  ##
                l_min_index = l_index  ## Get rid of this.
                l_min = len(l_choice)  ##
        else:
            l_choices.append([])    # why append empty list?
        l_index = l_index + 1
        l_choices=list(l_choices.keys())   # ...you probably need the list again...
    return (l_choices, l_min_index) 
```

# joomla - 使用 Joomla 模块在类中调用函数

> ID：15099513
> 
> 赞同：0
> 
> 时间：2013-02-26T21:22:40.727
> 
> 标签：joomla, joomla2.5

我有一个 Joomla 助手类，我正在使用我试图调用的方法进行模块开发：

```
class modCamcloudReferralHelper
{
        /*
         * Sanitize email form
         */
        public function isInjected($str) {
            $inject = "/(\r|\t|%0A|%0D|%08|%09)+/i";
            return (preg_match($inject, $str) > 0);
        }

        public static function sendEmail() {

            $jinput = JFactory::getApplication()->input;

            $email = $jinput->post->get('email', '', 'STRING');

            //check email is fine
            if (isInjected($email)){ //never get into this code and it causes some sort of failure
                echo "blah";
            }

        }
} 
```

很简单，对吧？但是这段代码只是给了我一个空白页，我看不到任何错误......任何地方。相反，我可以将这段代码直接放入我的`sendEmail`函数中，它工作得很好：

```
 $inject = "/(\r|\t|%0A|%0D|%08|%09)+/i";
        if (preg_match($inject, $email) > 0){
            echo "This works";
        } 
```

我之前构建的 Joomla 组件遇到了这个问题。由于某种原因，从同一类内部调用此函数不起作用。这一定是 Joomla 的事……否则我要疯了。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:45:28.933

您应该使用对其容器的引用来调用该方法，即使它是本地的。

所以这里正确的语法是：

```
if (self::isInjected($email)) 
```

来自另一个班级：

```
modCamcloudReferralHelper::isInjected( 
```

这对助手有好处：只需确保将要调用的方法声明为静态

```
public static function isInjected($str) { 
```

但是，如果您在实例化类（视图、模板、模型）上调用方法，则应使用

```
$this->method() 
```

# c++ - 从配置文件中读取变量

> ID：15099516
> 
> 赞同：0
> 
> 时间：2013-02-26T21:22:46.377
> 
> 标签：c++

我正在尝试确定读取配置文件的最佳方式。这个“Parameters.cfg”文件只是用来定义值并且是这种形式：

```
origin_uniform_distribution 0
origin_defined 1
angles_gaussian 0
angles_uniform_distribution 0
angles_defined 0
startx 0
starty 0
gap 500
nevents 1000
origin_uniform_distribution_x_min -5
origin_uniform_distribution_x_max 5
origin_uniform_distribution_y_min -5
origin_uniform_distribution_y_max 5
origin_defined_x 0
origin_defined_y 0
angles_gaussian_center 0
angles_gaussian_sigma 5
angles_uniform_distribution_x_min -5
angles_uniform_distribution_x_max 5
angles_uniform_distribution_y_min -5
angles_uniform_distribution_y_max 5
angles_defined_x 10
angles_defined_y 10 
```

这些名称是为了让用户知道他们定义了哪些变量。我想让我的程序只读取实际数字并跳过字符串。我知道我可以通过在我的程序中定义大量字符串的方式来做到这一点，然后让它们坐在那里定义但显然未使用。有没有办法在跳过字符串的同时轻松读取数字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T21:27:38.033

显而易见的解决方案有什么问题？

```
string param_name;
int param_value;

while ( fin >> param_name >> param_value )
{
  ..
} 
```

`param_name`您可以在每次迭代后丢弃它，同时将它存储`param_value`在您需要的任何地方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T21:28:26.583

当您读出字符串时，不要将它们存储在任何地方：

```
std::vector<int> values;
std::string discard;
int value;
while (file >> discard >> value) {
  values.push_back(value);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T23:12:32.267

我想我一定是逾期发布一个 ctype facet 来忽略字符串并只读取我们关心的数据：

```
#include <locale>
#include <fstream>
#include <vector>
#include <iostream>
#include <algorithm>
#include <iterator>

struct number_only: std::ctype<char> { 
    number_only() : std::ctype<char>(get_table()) {} 

    static mask const *get_table() { 
        static std::vector<mask> rc(table_size, space);

        std::fill_n(&rc['0'], 10, digit);
        rc['-'] = punct;
        return &rc[0]; 
    } 
};

int main() { 
    // open the file
    std::ifstream x("config.txt");

    // have the file use our ctype facet:
    x.imbue(std::locale(std::locale(), new number_only));

    // initialize vector from the numbers in the file:
    std::vector<int> numbers((std::istream_iterator<int>(x)), 
                              std::istream_iterator<int>());

    // display what we read:
    std::copy(numbers.begin(), numbers.end(), 
        std::ostream_iterator<int>(std::cout, "\n"));

    return 0;
} 
```

这样一来，无关的数据就被真正地忽略了——在将流注入我们的方面之后，就好像字符串根本不存在一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T21:39:44.693

*此方法根本*不存储字符串（就像问题中要求的那样）：

```
static const std::streamsize max = std::numeric_limits<std::streamsize>::max();
std::vector<int> values;
int value;

while(file.ignore(max, ' ') >> file >> value)
{
    values.push_back(value);
} 
```

它使用[忽略](http://en.cppreference.com/w/cpp/io/basic_istream/ignore)而不是读取字符串而不使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T22:31:30.943

您可以定义一个结构，然后`istream` `operator>>`为它重载：

```
struct ParameterDiscardingName {
    int value;
    operator int() const {
        return value;
    }
};
istream& operator>>(istream& is, ParameterDiscardingName& param) {
    std::string discard;
    return is >> discard >> param.value;
}

ifstream file("Parameters.cfg");
istream_iterator<ParameterDiscardingName> begin(file), end;
vector<int> parameters(begin, end); 
```

# html - 避免对电子邮件通信使用行跨度

> ID：15099519
> 
> 赞同：1
> 
> 时间：2013-02-26T21:23:01.067
> 
> 标签：html, email, html-table

我一直使用行跨度进行网站开发，但现在设计和开发电子邮件通信行跨度，它似乎不断中断。在多个客户端中，它以 10/20 像素的间隙显示。即使我需要在电子邮件中并排放置两个图像（例如标题），如何避免使用行跨度？

```
<html>
<head>
<title>StPatricksDAy-PostCard</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>
<body bgcolor="#FFFFFF" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<!-- Save for Web Slices (StPatricksDAy-PostCard.psd) -->
<table id="Table_01" width="657" height="684" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td rowspan="6">
            <img src="images/StPatricksDAy-PostCard_01.gif" width="19" height="643" alt=""></td>
        <td colspan="3">
            <img src="images/StPatricksDAy-PostCard_02.gif" width="636" height="14" alt=""></td>
        <td rowspan="6">
            <img src="images/StPatricksDAy-PostCard_03.gif" width="2" height="643" alt=""></td>
    </tr>
    <tr>
        <td colspan="3">
            <img src="images/StPatricksDAy-PostCard_04.gif" width="636" height="96" alt=""></td>
    </tr>
    <tr>
        <td colspan="3">
            <img src="images/StPatricksDAy-PostCard_05.gif" width="636" height="9" alt=""></td>
    </tr>
    <tr>
        <td rowspan="2">
            <img src="images/StPatricksDAy-PostCard_06.jpg" width="257" height="523" alt=""></td>
        <td>
            <img src="images/StPatricksDAy-PostCard_07.gif" width="368" height="449" alt=""></td>
        <td rowspan="3">
            <img src="images/StPatricksDAy-PostCard_08.gif" width="11" height="524" alt=""></td>
    </tr>
    <tr>
        <td>
            <img src="images/StPatricksDAy-PostCard_09.gif" width="368" height="74" alt=""></td>
    </tr>
    <tr>
        <td colspan="2">
            <img src="images/StPatricksDAy-PostCard_10.gif" width="625" height="1" alt=""></td>
    </tr>
    <tr>
        <td colspan="5">
            <img src="images/StPatricksDAy-PostCard_11.gif" width="657" height="28" alt=""></td>
    </tr>
    <tr>
        <td colspan="5">
            <img src="images/StPatricksDAy-PostCard_12.gif" width="657" 

    height="13" alt=""></td>
        </tr>
    </table>
    <!-- End Save for Web Slices -->
    </body>
    </html> 
```

# c# - 更改控制台窗口的大小会引发 ArgumentOutOfRangeException

> ID：15099523
> 
> 赞同：23
> 
> 时间：2013-02-26T21:23:10.390
> 
> 标签：c#, console, size, console-application

我正在尝试在 ac# 控制台应用程序中设置控制台窗口的大小。我收到一条`ArgumentOutOfRangeException`消息：

> 该值必须小于该维度中控制台当前的最大窗口大小 41。请注意，此值取决于屏幕分辨率和控制台字体。

我正在使用它来设置它：

```
Console.WindowHeight = 480; 
```

如何正确设置控制台窗口的大小？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-02-26T21:33:34.320

来自财产的*MSDN*[`Console.WindowHeight`](http://msdn.microsoft.com/en-us/library/system.console.windowheight.aspx)：

> 控制台窗口的高度，以行为单位。

如您所见，这些不是*像素*。请记住，这些值可能会根据您的屏幕分辨率和控制台字体而改变。您可以使用和属性找到最大*高度*和*宽度*值。[`Console.LargestWindowWidth`](http://msdn.microsoft.com/en-us/library/system.console.largestwindowwidth.aspx)[`Console.LargestWindowHeight`](http://msdn.microsoft.com/en-us/library/system.console.largestwindowheight.aspx)

```
Console.WriteLine(Console.LargestWindowHeight);
Console.WriteLine(Console.LargestWindowWidth); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:52:58.907

控制台高度以行（行）而不是像素为单位指定。

[http://msdn.microsoft.com/en-us/library/system.console.windowheight.aspx](http://msdn.microsoft.com/en-us/library/system.console.windowheight.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-12T20:13:35.503

微软最近发布了一些关于此的信息，请参阅：

1.  [了解 Windows 控制台主机设置](https://devblogs.microsoft.com/commandline/understanding-windows-console-host-settings/)

在 powershell 中试试这个：

```
$windowSize = $(get-item hkcu:\console).GetValue("WindowSize")
$windowHeight = $windowSize -shr 16
$windowWidth = ($windowSize -shl 16) -shr 16 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-02-26T21:41:09.187

您可以将 windowHeight 设置为小于 62，如果您尝试超过此值，则会抛出系统错误。

```
class Pro
{
    public static void fun()
    {
        Console.WindowHeight = 61;
        Console.WriteLine("Welcome to asp .net ");
    }

    static void Main(string[] args)
    {
        Pro.fun();
    }

    // Summary:
    //     Gets the largest possible number of console window rows, based on the current
    //     font and screen resolution.
    //
    // Returns:
    //     The height of the largest possible console window measured in rows.
    public static int LargestWindowHeight { get; }

    // Summary:
    //     Gets the largest possible number of console window columns, based on the
    //     current font and screen resolution.
    //
    // Returns:
    //     The width of the largest possible console window measured in columns.
    public static int LargestWindowWidth { get; } 
```

以上信息捕获控制台[来自元数据]。

# asp.net-mvc - jquerymobile ajax 加载页面的非手动行为

> ID：15099525
> 
> 赞同：2
> 
> 时间：2013-02-26T21:23:18.447
> 
> 标签：asp.net-mvc, jquery-mobile

所以我有一个 asp.net mvc4 jquerymobile 应用程序。页面 A 有一个指向页面 B 的链接。在 PageB.cshtml 文件的底部，我有以下代码

```
<script type="text/javascript">

    console && console.log("portalUser (index) raw!!");

    $(document).live('pageload'), function () {
        console && console.log("portalUser (index) pageload!!");
    }

    $(document).live('pageinit'), function () {
        console && console.log("portalUser (index) pageInit!!");
    }

    $(document).live('pageshow'), function () {
        console && console.log("portalUser (index) pageshow!!");
    }

    $(document).live('pagechange'), function () {
        console && console.log("portalUser (index) pagechange!!");
    }

    $(document).ready(function () {
        console && console.log("portalUser (index) document ready!!");
    });

</script> 
```

从 PageA 访问时（通过 jqm 的 ajax 加载），控制台日志显示：

```
portalUser (index) raw!!
portalUser (index) document ready!! 
```

直接在 PageB 访问时：

```
portalUser (index) raw!!
portalUser (index) document ready!! 
```

完全相同的！现在，根据[jqm 自己的内部文档](http://api.jquerymobile.com/pageinit/)，我们应该使用`$(document).live(....); to create these bindings.... but my tests show that`$(document).ready(function () {}` 是唯一有效的...

那么，我做错了吗？我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:32:22.977

首先，您的代码有错误，所有正常`jQuery Mobile`页面事件都没有关闭**`);`**，这就是您没有控制台输出的主要原因。

还有一件事，**`live`**不推荐使用函数，**`on`**而是使用函数。**[在我的另一篇文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**中找到更多关于它的信息，为了透明，这是我的个人 blob。或者在**[这里](https://stackoverflow.com/a/14469041/1848600)**找到它。

这是您的代码的一个工作示例：http: [//jsfiddle.net/Gajotres/QGnft/](http://jsfiddle.net/Gajotres/QGnft/)

```
$(document).on('pagebeforeshow', '[data-role="page"]', function(){       
    console && console.log("portalUser (index) pagebeforeshow!!");    
});

$(document).on('pageload', '[data-role="page"]', function(){    
    console && console.log("portalUser (index) pageload!!");
});

$(document).on('pageinit', '[data-role="page"]', function(){    
    console && console.log("portalUser (index) pageInit!!");
});

$(document).on('pageshow', '[data-role="page"]', function(){    
    console && console.log("portalUser (index) pageshow!!");
});

$(document).on('pagechange', '[data-role="page"]', function(){    
    console && console.log("portalUser (index) pagechange!!");
});

$(document).ready(function () {
    console && console.log("portalUser (index) document ready!!");
}); 
```

# java - 获取列表网格中过滤结果的数量（smartgwt）

> ID：15099527
> 
> 赞同：0
> 
> 时间：2013-02-26T21:23:19.987
> 
> 标签：java, smartgwt

我有一个充满条目的列表网格，并启用了过滤。当我执行过滤器时，listgrid 会相应地更新。现在我想获取使用过滤器找到的结果数量。我尝试添加`FilterEditorSubmitHandler`但是在过滤器实际执行之前执行（并且`listGrid.getDataSource().getFields()`总是返回`0`.

有没有办法在应用过滤器**后**获取结果数量？更准确地说：在`FilterEditorSubmitHandler`实际过滤之前调用，我需要一个在应用过滤器之后调用的处理程序，或者在网格再次更新之后调用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:12:44.123

您可以使用以下任何一种：

```
grid.getRecords();
grid.getRecordList();
grid.getResultSet();
grid.getDataAsRecordList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:23:36.873

我刚刚找到了正确的处理程序。

`DataArrivedHandler`执行过滤器并获得正确数量的结果后的工作。虽然它在第一次填充`ListGrid`时返回 0，但是在填充 DataSource 时我已经知道`Set`我检索的大小。

作为旁注：我正在使用 RPC 调用从数据库中获取数据，而不是 SmartGWT 服务器的东西。

# ruby-on-rails - 使用 cygwin 在 Windows 7 上运行 rails

> ID：15099529
> 
> 赞同：1
> 
> 时间：2013-02-26T21:23:27.337
> 
> 标签：ruby-on-rails, cygwin

我最近在我的 Windows 7 机器上安装了 rails 和 cygwin。两者都可以自己正常工作，但是当我在 Cygwin 内部时，我无法让轨道运行。我的猜测是我需要以某种方式配置 Cygwin 内部的路径？我得到的错误如下，任何帮助将不胜感激。

```
C:\RailsInstaller\Ruby1.9.3\bin\ruby.exe: No such file or directory -- /cygdrive/c/RailsInstaller/Ruby1.9.3/bin/rails (LoadError) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T22:57:34.033

找到了我自己的解决方案。-_- 。如果有人感兴趣，解决方案是在 cygwin 中运行以下命令：

```
alias rails='C:/RailsInstaller/Ruby1.9.3/bin/rails' 
```

# eclipse - 如何更改所有 Eclipse 工作区的默认 JRE？

> ID：15099530
> 
> 赞同：40
> 
> 时间：2013-02-26T21:23:28.387
> 
> 标签：eclipse, java

我有一个 JRE，`C:\Program Files (x86)\Java\jre6`这是我安装 Eclipse 时唯一的一个。我随后安装了一个完整的 JDK`C:\home\SFTWR\jdk1.6.0_21`并将我的`JAVA_HOME`环境变量更改为那个。但是，每次我启动一个新的 Eclipse 工作区时，它只会选择旧的 JRE，我必须手动删除它并添加新的。

如何将我的 Eclipse 安装绑定到新的 JDK，以便每个新的工作空间都指向它？我查了一下`eclipse.ini`，但没有提到要转到哪个 JRE。

**更新：**

我进了`Prefs->Java->Installed JRE`s，添加了新位置，标记为默认，去掉另一个，只对当前工作区有效。但是，当我打开一个新工作区时，只有旧的 JRE 可用。所以这并没有改变适用于所有（至少是新的）工作区的核心 Eclipse 配置

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-27T22:36:39.330

终于明白了： **Eclipse 获取 JRE 的方式是使用系统的 PATH**。

我以前根本没有`C:\home\SFTWR\jdk1.6.0_21\bin`在路上，我确实有`C:\Program Files (x86)\Java\jre6\bin`。我两者都有`JRE_HOME`，但那两个都不重要`JAVA_HOME`。`C:\home\SFTWR\jdk1.6.0_21`我猜 Eclipse 在**where java**（或UNIX/Linux 上的**which** ）做了（类似的事情）来查看 Java 在路径中的位置，并采用了该 JRE`java.exe`所属的 JRE。就我而言，尽管我已经完成了所有配置调整（包括`eclipse.ini`上面建议的 -vm 选项），但它仍然坚持路径中的内容。

我从路径中删除了旧的 JRE bin，放入新的，它适用于所有工作区。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-27T05:33:38.773

已安装的 JRE 用于为下游 Java 项目和服务器执行哪些 JRE。至于用于执行由您的环境、历史记录和 eclipse.exe 二进制文件控制的 Eclipse 进程（工作台）本身的 JVM 或 JRE。所以 eclipse.exe 自己决定 JRE Eclipse 将使用什么来执行自己，而不是安装的 JRE 首选项，因为在选择 JVM/JRE 后加载的 OSGi 框架启动并运行之前不会读取这些首选项。

因此，对于新的工作空间，Eclipse 将使用其当前正在执行的 JRE 来填充 JRE 首选项。

我知道的最好方法是强制 eclipse.exe 使用您通过`-vm`开关告诉它的 JRE。所以在你的 eclipse.ini 中这样做：

```
-startup
plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.100.v20110502
-vm
/path/to/exactly/what/jre/you/want/as/default/javaw.exe
... 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-02-26T21:25:34.570

> 打开 Java > Installed JREs 首选项页面。选中要在工作台中指定为默认 JRE 的 JRE 对应的复选框。如果要分配为默认值的 JRE 未出现在列表中，则必须添加它。单击确定。

[来源](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Ftasks%2Ftask-assign_default_jre.htm)- http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Ftasks%2Ftask-assign_default_jre.htm

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-08-19T14:53:17.657

在日食中去

**窗口-> Java -> 已安装的 JRE**

您可以通过指定安装 jdk 的路径来删除当前安装的 jre 并添加 jdk。

[![在此处输入图像描述](../Images/f1b3f8d3eeda36a92812f14b9bf764bf.png)](https://i.stack.imgur.com/IFJjj.png)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-02-12T18:23:03.153

我的答案将与两栖动物的答案重叠，同时添加它。

您的 JAVA_HOME 变量很好，但您还需要将以下内容附加到您的 Path 变量：

```
;%JAVA_HOME%\bin 
```

这将允许您在 Windows 环境中的应用程序访问您的 JDK。添加这些环境变量后，您还应该重新启动计算机，然后再检查它们是否有效。就我而言，即使注销然后重新登录也不起作用：我必须完全重新启动。

如果要检查环境变量是否设置正确，可以打开命令提示符并键入 >`echo %JAVA_HOME`和 >`echo %Path%`以查看这些变量是否正常工作。在窥探解决方案时，我还遇到有人声称如果您的 JAVA_HOME 路径包含空格，他们需要在环境变量周围添加引号 (") 以使其正常工作 ( `"%JAVA_HOME%"\bin`)。我认为这是我的情况，但是在完全重新启动后，尽管有空格，但我的变量似乎可以在没有引号的情况下正常工作。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-11-25T16:54:52.253

I ran into a similar issue where eclipse was not using my current `%JAVA_HOME%` that was on the `path` and was instead using an older version. The documentation points out that if no `-vm` is specified in the ini file, eclipse will search for a shared library `jvm.dll` This appears in the registry under the key `HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\JavaSoft\Java Runtime Environment` that gets installed when using the windows java installer (key might be a bit different based on 64-bit vs 32-bit, but search for `jvm.dll`). Because it was finding this shared library on my `path` before the `%JAVA_HOME%/bin`, it was using the old version.

Like others have stated, the easiest way to deal with this is to specify the specific vm you want to use in the `eclipse.ini` file. I'm writing this because I couldn't figure out how it was still using the old version when it wasn't specified anywhere on the `path` or `eclipse.ini` file.

See link to doc below: [http://help.eclipse.org/kepler/topic/org.eclipse.platform.doc.isv/reference/misc/launcher.html?cp=2_1_3_1](http://help.eclipse.org/kepler/topic/org.eclipse.platform.doc.isv/reference/misc/launcher.html?cp=2_1_3_1)

> **Finding a VM and using the JNI Invocation API**
> 
> The Eclipse launcher is capable of loading the Java VM in the eclipse process using the Java Native Interface Invocation API. The launcher is still capable of starting the Java VM in a separate process the same as previous version of Eclipse did. Which method is used depends on how the VM was found.
> 
> **No -vm specified**
> 
> When no -vm is specified, the launcher looks for a virtual machine first in a jre directory in the root of eclipse and then on the search path. If java is found in either location, then the launcher looks for a jvm shared library (jvm.dll on Windows, libjvm.so on *nix platforms) relative to that java executable.
> 
> *   If a jvm shared library is found the launcher loads it and uses the JNI invocation API to start the vm.
> *   If no jvm shared library is found, the launcher executes the java launcher to start the vm in a new process.
> 
> **-vm specified on the command line or in eclipse.ini**
> 
> Eclipse can be started with "-vm " to indicate a virtual machine to use. There are several possibilities for the value of :
> 
> *   **directory:** is a directory. We look in that directory for:
>     *   (1) a java launcher or
>     *   (2) the jvm shared library.
> 
> If we find the jvm shared library, we use JNI invocation. If we find a launcher, we attempt to find a jvm library in known locations relative to the launcher. If we find one, we use JNI invocation. If no jvm library is found, we exec java in a new process.
> 
> *   **java.exe/javaw.exe:** is a path to a java launcher. We exec that java launcher to start the vm in a new process.
>     
>     
> *   **jvm dll or so:** is a path to a jvm shared library. We attempt to load that library and use the JNI Invocation API to start the vm in the current process.

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-02-27T21:55:34.507

当您选择运行配置时，主点击旁边有一个 JRE 点击，选择“ **Workspace default JRE(JDK1.7)** ”。

一定要用jdk在`Prefs->Java->Installed JREs ->Execution Environment`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-11-11T11:53:22.670

我遇到了同样的问题。解决方法：- Window-->Preferences-->Java-->Installed JREs-->Add... - 右键单击​​您的项目-->Build Path-->Configure Build Path-->Add library--> JRE系统库-->下一步-->WorkSpace Default JRE

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-09-02T17:25:39.193

尝试更改顺序：右键单击您的项目-> BuildPath->Configure...->Order and Export 选项卡-> 向上移动 jre7。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-08-11T06:03:20.147

在 Windows 上，我尝试了不同的方法 - 设置 JAVA_HOME、JRE_HOME 并扩展 PATH 以指向所需的 jre18，但没有任何帮助 - 在 java 控制面板中禁用 JRE17 也没有帮助

帮助我的是强制 eclipse 在 eclipse.ini 文件中使用适当的 JRE，例如

-vm C:\java\jdk1.8.0_111\jre\bin\javaw.exe

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2014-04-16T19:48:39.033

我导航到：

```
Eclipse>Pref>Java>Installed JRE>Search... 
```

其中2个弹出，我检查了最新的一个。在我这样做之前，我也去`About>Check for Updates`更新了它。我也不必重新安装任何 JRE 或 JDK。我可能已经做了一段时间了，除了它是 1.6 而不是 1.4。希望有帮助！

# jquery - 一旦对象在视图中，如何延迟 jquery 或 CSS3 动画启动

> ID：15099533
> 
> 赞同：1
> 
> 时间：2013-02-26T21:23:44.703
> 
> 标签：jquery, css, lazy-loading

我想使用[这里看到的这个动画图](http://coding.smashingmagazine.com/2011/09/23/create-an-animated-bar-graph-with-html-css-and-jquery/)

但它存在于首屏之下，我希望它只有在它出现时才进行动画处理。

我尝试使用此处提供的代码，看起来它可以解决问题： [每当 DIV 第一次可见时加载（延迟加载）一个 Div](https://stackoverflow.com/questions/8192651/load-lazy-loading-a-div-whenever-the-div-gets-visible-for-the-first-time/10211585#10211585)

连同其他类似的帖子，但没有成功。

一些帮助将不胜感激。代码的准系统可以在[这里看到](http://www.equicomgroup.com/graphs/comdev-graph2.html)

谢谢。尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:18:47.677

我认为这个lazyLoad() 函数的问题在于它使用元素的offset().top 来确定元素是否在窗口的视图中。

但问题是，如果您的元素显示属性设置为 none，则 offset 方法将返回 0，这将在页面加载时触发事件，从而使您的动画在页面加载时开始。

由于您的动画可能使用 display 属性来控制动画的可见性，因此您可能从 offset 方法中获得 0 值。

试试这个，在调用 offset 方法之后（大约第 13 行）把它放在 lasyLoad() 函数中，看看页面加载时的偏移值是多少

```
console.log("offset top " + ot + " height: " + ob); 
```

在偏移调用之后输入。

你可以看看这个小提琴，我在那里调试了这个问题 [http://jsfiddle.net/jessekinsman/yDybE/5/](http://jsfiddle.net/jessekinsman/yDybE/5/)

您可以尝试使用 css 过渡来制作动画并使用可见性属性而不是显示属性。由于我不知道您要实现哪种类型的动画，因此我不能真正推荐要尝试的动画。

希望这可以帮助

# cordova - 如何将针对移动设备优化的网站转换为可下载的 Android 移动应用程序？

> ID：15099535
> 
> 赞同：0
> 
> 时间：2013-02-26T21:23:51.697
> 
> 标签：cordova, jquery-mobile, mobile

我有一个由 ColdFusion、SQL Server 和 jQuery 提供支持的网站。我构建了一个主站点版本，并使用 jQuery Mobile 针对移动设备对其进行了优化。它完全按照我想要的方式工作。（您可以在此处查看该网站：（[http://www.flyingpiston.com/mobile/](http://www.flyingpiston.com/mobile/)）

我被要求将此站点转换为可以从主站点下载的应用程序。我认为这样做没有任何好处，但我需要完成它。我的客户希望访问者能够在他们的手机上安装该网站，以便它看起来是一个成熟的网络应用程序，通过点击移动设备上的图标开始，而不是像浏览器中的网站。

该站点需要从数据库中提取新内容以及托管在主网站上的新图像。所以，这不是一个静态网站。

有人建议我通过 Phone Gap 运行我的代码，它会为我输出一个 Android 应用程序。这听起来太简单了。

我从哪里开始将这个移动优化网站变成可下载的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T02:50:38.373

如果您不想重建整个站点，您可以随时使用 WebView 并以这种方式加载站点。我只是为一个非常成功的客户做了这个。您甚至可以使用 WebView 直接与 Android 交互，这样您就可以访问 GPS、摄像头、传感器等。我什至添加了一个操作栏和导航抽屉，以赋予它原生应用程序的完整感觉。您无需创建两次，移动网站的所有更新都会在应用程序上自动更新。您应该注意，如果有指向外部站点或手机上其他应用程序（如地图或手机应用程序）的链接，您必须覆盖默认 URL 操作并将其正确加载到您的 WebView 之外，这是使用`shouldOverrideUrlLoading`方法。好处是您拥有一个本机应用程序，可以在必要时利用 Android 的所有功能。

[https://developer.android.com/guide/webapps/webview.html](https://developer.android.com/guide/webapps/webview.html)

# javascript - 在触发下一个功能之前等待 iframe 加载？

> ID：15099537
> 
> 赞同：14
> 
> 时间：2013-02-26T21:23:55.467
> 
> 标签：javascript, jquery

首先：我知道如果可能的话，事情应该异步运行。

我有一个名为 wrap 的函数：

本质上，它将当前页面加载为 iframe。即使单击页面上的链接，我也需要它来保持 javascript 运行。

```
function wrap(){
    event.preventDefault();
    var pathname = window.location.pathname;
    $('body').html('<iframe id="wrapper" src="'+ pathname +'" >')
    $('iframe').load(function (){
           //this is where the magic outght to happen 
    });
} 
```

运行换行时，我想开始操作 iframe 的内容。对于应用程序的结构，我希望从 wrap-function 之外或使用我传递给 wrap 函数的参数来执行此操作。我使用一系列执行动画、播放声音等的功能来做到这一点（这些东西需要时间，也应该按顺序执行）。这就是我理想的样子。

```
wrap();
highlight('#one');
highlight('#two'); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-26T21:29:09.373

jQuery 可以在 iframe 上使用 ready 函数，就像在文档中一样。把它放在你的 highlight 函数中，它会在 iframe 加载完成后运行。

```
$("iframe").ready(function (){
    // do something once the iframe is loaded
}); 
```

* * *

## 回答 #2

> 赞同：-9
> 
> 时间：2013-02-26T21:30:27.907

您可以创建一个函数：

```
 function iframeready() {
     // code after iframe is loaded
 } 
```

并将此函数作为 iframe 加载事件的回调传递，这样您的代码将在 iframe 加载后执行

# rally - 拉力积分累积流程图

> ID：15099544
> 
> 赞同：0
> 
> 时间：2013-02-26T21:24:16.040
> 
> 标签：rally

我正在尝试使用他们较新的 API/SDK 在集会上按故事点制作累积流程图，并在他们的 GitHub 页面[RallyAnalytics GitHub上找到了一些示例代码](https://github.com/RallyCommunity/RallyAnalytics/tree/master/deploy)

所以经过一些工作后，我让它在某种程度上工作，但不理解或找不到任何关于如何配置它的文档。看起来正在生成的报告正在计数，而不是我尝试在 fieldsToSum 中添加的 PlanEstimate。我怎样才能让它通过 c_KanbanState 对 PlanEstimate 字段求和，而不仅仅是给我一个与该周 c_KanbanState 匹配的故事的计数？下面的示例代码减去来自 GitHub 的缩小代码。

```
 var userConfig = {
            title: 'Cumulative Flow Diagram',
            debug: false,
            trace: false,
            // asOf: "2012-11-01",  // Optional. Only supply if want a specific time frame. Do not send in new Date().toISOString().
            granularity: 'week',
            fieldsToSum: ['PlanEstimate'],
            scopeField: "Project",  // Supports Iteration, Release, Tags, Project, _ProjectHierarchy, _ItemHierarchy
            scopeValue: 'scope',
            scopeData: {
              StartDate: new Date("2012-12-01T07:00:00.000Z"),
              EndDate: new Date(new Date()),
              Name: ""
            },
            //fieldNames: ['count', 'PlanEstimate']

            kanbanStateField: 'c_KanbanState',
            chartSeries: [
              {name: 'To Do'},
              {name: 'Dev Ready'},
              {name: 'In Dev'},
              {name: 'Peer Review'},
              {name: 'QA Ready'},
              {name: 'QA Done'},
              {name: 'Accepted'}
            ]
        }
         (function() {

            var charts = {};
            var visualizer;
            var nameToDisplayNameMap;

            createVisualization = function(visualizationData) {

              if (typeof visualizationData !== "undefined" && visualizationData !== null) {
                categories = visualizationData.categories;
                series = visualizationData.series;
                charts.lowestValueInLastState = visualizationData.lowestValueInLastState;

                charts.chart = new Highcharts.Chart({
                  chart: {
                     renderTo: 'chart-container',
                     defaultSeriesType: 'column',
                     zoomType: 'x'
                  },
                  legend: {
                     enabled: true
                  },
                  credits: {
                     enabled: false
                  },
                  title: {
                     text: userConfig.title
                  },
                  subtitle: {
                     text: userConfig.scopeData.Name
                  },
                  xAxis: {
                     categories: categories,
                     tickmarkPlacement: 'on',
                     tickInterval: Math.floor(categories.length / 12) + 1,
                     title: {
                         text: userConfig.granularity.slice(0, 1).toUpperCase() + userConfig.granularity.slice(1) + 's'
                     }
                  },
                  yAxis: [
                     {
                         title: {
                             text: 'Total Points',
                         },
                         min: charts.lowestValueInLastState
                     }                    
                  ],
                  tooltip: {
                     formatter: function() {
                         point = this.point
                         s = point.series.name + ': <b>' + point.y + '</b><br \>';
                         if (point.x == point.series.data.length - 1) {
                             s += point.category.slice(0, point.category.length - 1) + ' to-date';
                         } else {
                             s += point.category;
                         }
                         return s;
                     }
                  },
                  plotOptions: {
                      series: {
                          events: {
                              legendItemClick: function(event) {
                                  if (this.chart.series.length == this.index + 1) {
                                      if (!this.visible) {
                                         this.chart.yAxis[0].setExtremes(charts.lowestValueInLastState);
                                      } else {
                                         this.chart.yAxis[0].setExtremes(0);
                                      };
                                  };
                                  return true;
                              }
                          }                          
                      }
                  },    

                  series: series
                });  // end of chart

              } else {
                // Put a spinner in the chart containers until first fetch returns
                $('#chart-container')
                  .html('<img height="20px" src="https://rally1.rallydev.com/slm/js-lib/ext/2.2/resources/images/default/grid/loading.gif"></img>')
                  .attr("style", "text-align:center");

              };   

            };   

            $(document).ready(function() {
              visualizer = new CFDVisualizer(charts, userConfig, createVisualization);
            });

        })(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:09:40.027

您可能使用的是稍旧的版本，因为最新版本在配置中没有 fieldsToSum 参数，但您可以通过将 CFDVisualizer.coffee 中的几行更改为以下内容来升级图表以求和 PlanEstimate：

```
@config.lumenizeCalculatorConfig.metrics = [
  {f: 'groupBySum', field: 'PlanEstimate', groupByField: @config.kanbanStateField, allowedValues: allowedValues}
] 
```

从：

```
@config.lumenizeCalculatorConfig.metrics = [
  {f: 'groupByCount', groupByField: @config.kanbanStateField, allowedValues: allowedValues}
] 
```

您可能还应该更改 cfd.html 中的轴标签。

如果这被证明太难完成（CoffeeScript 可能不熟悉），请告诉我，我会在 GitHub 上发布一个新版本。

# html - 容器不会停止包装

> ID：15099545
> 
> 赞同：3
> 
> 时间：2013-02-26T21:24:16.357
> 
> 标签：html, css

我目前正在设计一个网站，但我所有的容器都包装在较小的屏幕上。我已经尝试了我知道该怎么做的所有事情，但没有运气修复它。

这是我的 CSS 代码：

```
body {
    background: url("../img/bg_main.jpg") no-repeat top center;
}
#ani2 {
    position: absolute;
    width: 43px;
    height: 66px;
    margin: 0 auto;
    left: 56%;
    top: -1%;
    background-color: transparent;
    z-index: 1;
}
#logimg1 {
    position: absolute;
    width: 250px;
    height: 25px;
    text-align: center;
    top: 0%;
    left: 0%;
    padding-top: 0px;
    display: block;
    font-size: 13px;
    font-family:"Segoe UI Light", "Myriad Pro", Tahoma, Arial, sans-serif;
    z-index: 1;
}
#ani1 {
    position: absolute;
    width: 43px;
    height: 66px;
    margin: 0 auto;
    left: 35.3%;
    top: -1%;
    background-color: transparent;
    z-index: 1;
}
#logo {
    width: 251px;
    height: 107px;
    background: transparent url(../img/plogoW.png) no-repeat top center;
    margin: 0 auto;
    padding-top: 0px;
    display: block;
    text-indent: -9999px;
    cursor: pointer;
}
#menu {
    width: 700px;
    height: 20px;
    border-radius: 4px;
    text-align: center;
    background-color: #FFD900;
    margin: 0 auto;
    padding-top: 0px;
    display: block;
    font-size: 13px;
    font-family:"Segoe UI Light", "Myriad Pro", Tahoma, Arial, sans-serif;
}
#menu a {
    text-decoration: none;
}
#menu a:link {
    color:black;
}
#menu a:visited {
    color:black;
}
#menu a:hover {
    color:#134896;
}
#menu a:active {
    color:black;
}
#container {
    overflow: visible;
    position: absolute;
    width: 400px;
    height: 408px;
    border-radius: 4px;
    background-color: #FFFFFF;
    left: 25.75%;
    top: 22%;
    padding-top: 0px;
    display: block;
    font-size: 13px;
    font-family:"Segoe UI", "Myriad Pro", Tahoma, Arial, sans-serif;
    z-index: 1;
}
#login {
    overflow: visible;
    position: absolute;
    width: 250px;
    height: 200px;
    border-radius: 4px;
    background-color: #FFFFFF;
    left: 65.22%;
    top: 22%;
    margin: 0 auto;
    padding-top: 0px;
    display: block;
    font-size: 13px;
    font-family:"Segoe UI Light", "Myriad Pro", Tahoma, Arial, sans-serif;
    z-index: 1;
}
.centered {
    text-align: center;
}
#eemenu {
    overflow: visible;
    position: absolute;
    width: 250px;
    height: 200px;
    border-radius: 4px;
    background-color: #FFFFFF;
    left: 65.22%;
    top: 52%;
    padding-top: 0px;
    display: block;
    font-size: 13px;
    font-family:"Segoe UI Light", "Myriad Pro", Tahoma, Arial, sans-serif;
    z-index: 1;
    white-space:nowrap;
}
.sep {
    height: 1px;
    width: 200px;
    background: #0093FE;
    margin: 0 auto;
}
#loginstat {
    overflow: visible;
    text-align:center;
    font-family:"Segoe UI", "Myriad Pro", Tahoma, Arial, sans-serif;
    white-space:nowrap;
}
#web {
    min-width:900px;
} 
```

我的 HTML：

```
<div id="web">
    <div id="topcontainer">
        <div id="imga">
            <div id="ani1">
                <img src="img/3__.gif"></img>
            </div>
            <div id="ani2">
                <img src="img/2_.gif"></img>
            </div>
        </div>
        <div id="logo"></div>
        <div id="menu">Home</div>
    </div>
    <div id="container">ContentPlaceholder</div>
    <div id="login">
        <img src="img/bar.png">
        <div id="logimg1">Status</div>
        </img>
        <br />
        <div id="loginstat">Logged in as _________.</div>
    </div>
    <div id="eemenu">
        <div class="centered">Links</div>
        <div class="sep"></div>
    </div>
</div> 
```

很高兴有任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T23:46:49.603

我不确定 - 因为很难准确地确定你在寻找什么......但我的猜测是，根据你的 HTML / CSS，你正在尝试完成这样的事情：

~~[http://jsfiddle.net/TroyAlford/QArPM/3/](http://jsfiddle.net/TroyAlford/QArPM/3/)~~

~~[http://jsfiddle.net/TroyAlford/QArPM/4/](http://jsfiddle.net/TroyAlford/QArPM/4/)~~

[http://jsfiddle.net/TroyAlford/QArPM/5/](http://jsfiddle.net/TroyAlford/QArPM/5/) `<-- Updated based on comments/clarification`

如果准确的话，问题在于您正在做一些非常有针对性的块样式和绝对定位。我继续清理所有代码，将您的 CSS 类组合成更多的 DRY（不要重复自己）表单 - 并以 700 像素的最小宽度布置网站（这似乎是您要进行的操作）为了）。

一般来说 - 避免做`z-index`你正在做的绝对定位的事情。布局几乎总是很糟糕，并成为维护的噩梦。

相反，我建议研究盒子模型并了解更多关于元素、`block`和液体布局的知识。对这些术语中的任何一个进行一些谷歌搜索将为您提供一些有价值的学习资源 - 并且，请随时提出您可能在这里遇到的任何其他问题 - 我将尝试回复以根据需要调整示例以让您确切了解您正在寻找。`inline-block``float`

希望能帮助到你！

特洛伊

# java - Java 在 UTF-16 不适用时的保护措施

> ID：15099548
> 
> 赞同：1
> 
> 时间：2013-02-26T21:24:32.527
> 
> 标签：java, character-encoding, utf-16

我的*理解*是 Java 默认使用 UTF-16（可能还有其他类型），`String`并且`char`UTF-16 是地球上大多数字符编码的主要超集（尽管我可能是错的）。但是我需要一种方法来保护我的应用程序，因为它正在读取使用 UTF-16 不支持的编码生成的文件（我不确定是否有很多，或者根本没有）。

所以我问：

1.  在读取文件之前假设文件是​​ UTF-16 是否安全，或者为了最大限度地避免出现 NPE 或其他格式错误的输入异常，我是否应该使用 JUniversalCharDet 或 JCharDet 或 ICU4J 等字符编码检测器来首先检测编码？
2.  然后，在写入文件时，我需要确保字符/字节没有进入内存中的对象（字符串，`OutputStream`等等），当写入字符串或文件时会产生垃圾文本/字符. 理想情况下，我想有一些方法来确保这个产生垃圾的角色在进入我正在编写的文件之前以某种方式被捕获。我该如何防范呢？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:44:28.610

每当发生字节和字符之间的转换时，Java 都允许指定要使用的字符编码。如果未指定，则使用与机器相关的默认编码。在某些编码中，表示某个字符的位模式与 UTF-16 编码中用于同一字符的位模式没有相似之处。

因此，对于问题 1，答案是“否”，您不能假设文件是​​以 UTF-16 编码的。

这取决于使用的编码哪些字符是可表示的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:46:24.437

Java[通常使用 UTF-16 作为其字符的内部表示](https://stackoverflow.com/questions/9699071/what-is-the-javas-internal-represention-for-string-modified-utf-8-utf-16)。n Java`char`数组是 UTF-16 编码的 Unicode 代码点序列。默认情况下`char`，值被认为是 Big Endian（就像任何 Java 基本类型一样）。但是，您不应使用`char`值将字符串写入文件或内存。您应该使用 Java API 中的字符编码/解码工具（见下文）。

UTF-16 不是编码的主要超集。实际上，UTF-8 和 UTF-16 都可以编码任何 Unicode 代码点。从这个意义上说，Unicode*确实*定义了您可能想在现代通信中使用的几乎所有字符。

如果您从磁盘读取文件并使用 UTF-16，那么您很快就会遇到麻烦。大多数文本文件都使用 ASCII 或 ASCII 的扩展来使用一个字节的所有 8 位。这些扩展的示例是 UTF-8（可用于读取任何 ASCII 文本）或 ISO 8859-1（拉丁文）。然后有很多编码，例如 Windows 使用的这些扩展的扩展。UTF-16与 ASCII*不*兼容，因此不应将其用作大多数应用程序的默认值。

所以是的，如果你想读取大量未知编码的纯文本文件，请使用某种检测器。这应该回答问题#1。

至于问题 #2，想想一个完全是 ASCII 的文件。现在您要添加一个不在 ASCII 中的字符。您选择 UTF-8（这是一个相当安全的选择）。无法知道打开文件的程序是否正确猜测它应该使用 UTF-8。它可能会尝试使用拉丁语或更糟，假设 7 位 ASCII。在这种情况下，你会得到垃圾。不幸的是，没有聪明的技巧可以确保这种情况永远不会发生。

查看[`CharsetEncoder`](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/class-use/CharsetEncoder.html)和[`CharsetDecoder`](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/class-use/CharsetDecoder.html)类以了解 Java 如何处理编码/解码。

# c - cython中的变量实例

> ID：15099549
> 
> 赞同：3
> 
> 时间：2013-02-26T21:24:32.237
> 
> 标签：c, arrays, instance, cython

为了举例，我有这个代码：

```
cimport cython
from libc.stdlib cimport malloc

cdef int i
cdef int ii
cdef int j = 0
cdef int parnum = 6
cdef int sysnum = 2
cdef Particle *parlist = <Particle *>malloc( parnum * cython.sizeof(Particle))
cdef System *psys = <System *>malloc( sysnum * cython.sizeof(System))

for i in range(sysnum):
    psys[i].particles = <Particle *>malloc( (parnum / sysnum) * cython.sizeof(Particle))
    for ii in range(parnum / sysnum):
        psys[i].particles[ii].x = j
        parlist[j] =  psys[i].particles[ii]
        j += 1

print("--- before changes ---")
for i in range(sysnum):
    for ii in range(parnum / sysnum ):
        print(psys[i].particles[ii].x)        

print("--- before changes ---")

for i in range(parnum):
      parlist[i].x = 0

print("--- after changes ---")
for i in range(sysnum):
    for ii in range(parnum / sysnum ):
        print(psys[i].particles[ii].x)
print("--- after changes ---")

cdef struct System:
    Particle *particles

cdef struct Particle:
    int x 
```

当程序运行时，它会在更改 parlist 元素之前和之后打印相同的结果。所以我不知道为什么，当我改变 parlist 的值时， psys.particles 的值根本没有改变。就好像 parlist 是一个副本，而不是一个实例。我如何使它成为一个实例，指向相同的东西？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:36:36.960

好的，我读了一些关于指针的内容，这是我的解决方案：

```
cimport cython
from libc.stdlib cimport malloc

cdef int i
cdef int ii
cdef int j = 0
cdef int parnum = 6
cdef int sysnum = 2
cdef Particle *parlist = <Particle *>malloc( parnum * cython.sizeof(Particle))
cdef System *psys = <System *>malloc( sysnum * cython.sizeof(System))

for i in range(sysnum):
    psys[i].particles = <Particle *>malloc( (parnum / sysnum) * cython.sizeof(Particle))
    psys[i].particles = &parlist[j]
    for ii in range(parnum / sysnum):
        parlist[j].x = j
        j += 1

print("--- before changes ---")
for i in range(sysnum):
    for ii in range(parnum / sysnum ):
        print(psys[i].particles[ii].x)        

print("--- before changes ---")

for i in range(parnum):
      parlist[i].x = i * 10

print("--- after changes ---")
for i in range(sysnum):
    for ii in range(parnum / sysnum ):
        print(psys[i].particles[ii].x)
print("--- after changes ---")

for i in range(parnum):
    change_onebyone(&parlist[i])

print("--- after function one by one ---")
for i in range(sysnum):
    for ii in range(parnum / sysnum ):
        print(psys[i].particles[ii].x)
print("--- after function one by one  ---")

change_all(parlist,parnum)

print("--- after function all---")
for i in range(sysnum):
    for ii in range(parnum / sysnum ):
        print(psys[i].particles[ii].x)
print("--- after function all---")

cdef change_onebyone(Particle *par):
    par.x *= 10

cdef change_all(Particle *parlist2, int num):
    for i in range(num):
        parlist2[i].x *= 10

cdef struct System:
    Particle *particles

cdef struct Particle:
    int x 
```

我不知道它是否正确使用它，但它正在做我所期望的。

# twitter-bootstrap - 为什么 Respond.js 和 CSS3-mediaqueries.js 都不适用于我的 IE 7 和 8？

> ID：15099554
> 
> 赞同：4
> 
> 时间：2013-02-26T21:24:49.707
> 
> 标签：twitter-bootstrap, responsive-design, media-queries

我正在使用 Twitter Bootstrap 2.3.0 版构建一个 HTML 页面。由于 IE 小于 9 不支持媒体查询，我尝试使用 css3-mediaqueries.js。文档说你只需要在所有 css 之后包含脚本。我这样做了。下面是我的页面布局。

```
 <!DOCTYPE html>
    <html lang="en">
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="description" content="Responsive page">
      <meta name="author" content="Author name">
      <title>Responsive page built on Twitter Bootstrap</title>
      <link href="css/bootstrap.min.css" rel="stylesheet" type='text/css'>
      <link href="css/bootstrap-responsive.min.css" rel="stylesheet" type='text/css'>
      <link href="css/my-page.css" rel="stylesheet" type='text/css'>
      <link href="css/my-page-responsive.css" rel="stylesheet" type='text/css'>
     </head>
     <body>
       <div class="container">
         <!-- My html goes here -->
       </div>
       <!--[if lt IE 9]>
        <script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js">
        </script> <![endif]-->
     </body>
    </html> 
```

但仍然没有运气。我没有在我的页面中使用任何 HTML5 元素。javascript控制台中没有记录错误。

然后我尝试使用会引发以下异常的respond.js。

```
Unspecified error.
respond.js, line 309 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T21:28:43.637

您仍然需要将脚本放在您的`<head>`, 样式表之后。将它放在文档的底部会导致页面在脚本加载到内存之前呈现。

```
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Responsive page">
  <meta name="author" content="Author name">
  <title>Responsive page built on Twitter Bootstrap</title>
  <link href="css/bootstrap.min.css" rel="stylesheet" type='text/css'>
  <link href="css/bootstrap-responsive.min.css" rel="stylesheet" type='text/css'>
  <link href="css/my-page.css" rel="stylesheet" type='text/css'>
  <link href="css/my-page-responsive.css" rel="stylesheet" type='text/css'>
  <!--[if lt IE 9]>
  <script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
  <![endif]-->
</head> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T20:02:49.433

如果您想在 IE8 中使用媒体查询，则必须使用 Respond.js。这是为 IE 等浏览器启用媒体查询的 polyfill。另一个不错的选择是[adapt.js](http://adapt.960.gs)。希望这会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-29T06:33:42.893

在结束标记之前添加 respond.js `</body>`。另外，请检查本地主机内的页面，否则会抛出错误。我在许多站点中都使用过这种方式，并且在 IE7 和 IE8 中运行良好。

# c# - 对如何使用 Google Api 有点困惑。卡住了 Oauth

> ID：15099557
> 
> 赞同：4
> 
> 时间：2013-02-26T21:25:02.247
> 
> 标签：c#, .net, google-api

我不确定是否有任何库（如果有人知道，请告诉我）可以更轻松地使用 googles api。我知道他们有 .net 的课程，但他们似乎不适用于 Windows Phone 7。

我试图弄清楚这一切是如何工作的，但我真的发现谷歌的文档很混乱并且缺少很多步骤。

我决定先尝试在 asp.net mvc 应用程序中使用他们的库，然后再尝试弄清楚如何在 WP7 应用程序中使用 REST 请求来完成这一切。

我一直在试图弄清楚如何对验证用户进行 Oauth，以便获取他们的联系人。

```
 RequestSettings settings = new RequestSettings("<var>Test</var>");
            settings.OAuth2Parameters = new OAuth2Parameters
            {
                ClientId = "",
                ClientSecret = "",

            };

            // Need some Code here to validation user so I can then get their contacts.

            ContactsRequest cr = new ContactsRequest(settings);
            var c = cr.GetGroups(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T04:58:03.473

有一个可用的 OAuth NuGet 包 ( [DotNetOpenAuth](https://nuget.org/packages/DotNetOpenAuth) )，通过 Google、Twitter、Facebook、MSN 等提供身份验证。

也许你有更多的运气。

# ruby-on-rails - Rails AREL .where 语句

> ID：15099558
> 
> 赞同：3
> 
> 时间：2013-02-26T21:25:02.997
> 
> 标签：ruby-on-rails, ruby

我有一个 AREL 查询：

```
@group.members.where('member_id != ?', 4) 
```

正如预期的那样，此查询返回 ID 不等于 4 的所有成员。

我将如何构建相同类型的查询以省略多个 ID？例如：

```
@group.members.where('member_id != ?', [4 3]) 
```

理想情况下，这将返回 ID 不等于 4 或 3 的所有成员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:26:47.143

正确的语法是：

```
@group.members.where('member_id NOT IN (?)', [4, 3] ) 
```

如果您只传递一个整数（不是数组），这也有效：

```
@group.members.where('member_id NOT IN (?)', 12) 
```

# css - 替换 li 背景图片

> ID：15099560
> 
> 赞同：0
> 
> 时间：2013-02-26T21:25:09.193
> 
> 标签：css, list, menu, selecteditem

我有一个模仿旧磁带机的菜单。每个列表项都有一个按钮的背景图像。选择项目时，新的背景图像在向下位置显示按钮。但是，我仍然可以看到下面的另一张图片。如何将原始图像替换为所选图像。请参阅[http://www.saintalvia.com](http://www.saintalvia.com)了解我的意思。

谢谢！

```
#access a { 
font-family:Roboto;
text-transform:uppercase;
font-size:12px;
padding: 0 9px 2px 9px;
-moz-border-radius:0 0 0 0 !important;
-webkit-border-radius:0 !important;
-webkit-border-radius:0 !important;
border-radius:0 !important;
border-radius:0 !important;
}

#access .menu-header li,
div.menu li {
margin-top:0px;
height:80px;
}

#access ul li {
margin-right:8px;
background-repeat:no-repeat;
background-position:bottom;
background-image:url(http://www.saintalvia.com/wp-content/uploads/2013/02/newButton.png);
}
#access ul li.current_page_item > a,
#access ul li.current-menu-ancestor > a,
#access ul li.current-menu-item > a,
#access li.selected > a,
#access ul li.current-menu-parent > a,
#access ul li.current_page_item > a:hover,
#access ul li.current-menu-item > a:hover {
height:80px;
background-color:transparent;
background-repeat:no-repeat;
background-position:bottom;
background-image:url(http://www.saintalvia.com/wp-content/uploads/2013/02/buttonDownNew.png)
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:30:16.583

您在 上设置了“向上”图像，在 上`<li>`设置了向下图像`<a>`。将电流设置为向下`<li>`而不是`<a>`

为了改进这一点，我还将按钮的向上和向下版本组合到一个图像中，以创建所谓的 CSS 精灵。然后，当您想将按钮移到向下位置时，您需要做的就是调整`background-position`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:31:51.103

您在标签上有一张图片，在`a`标签上有一张图片`li`，因此当页面转到您单击的链接时，您应该更改之前所在标签上的图片，而不是将其添加到另一个标签的顶部。任何一个标签都应该工作，你只需要选择一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:33:38.073

看起来`li`有向上按钮的背景和`li a`向下按钮的背景。

# twitter-bootstrap - Bootstrap Tabs - 改变身体的背景图片

> ID：15099562
> 
> 赞同：0
> 
> 时间：2013-02-26T21:25:17.207
> 
> 标签：twitter-bootstrap, tabs, background-image

尝试使用引导程序按下选项卡时更改页面的背景图像。我能够将其更改为特定图像，但我想从活动选项卡 ID 中提取背景图像。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:12:45.423

你没有在你的问题中提供太多细节，所以我不能完全确定你想要完成什么，但也许这会有所帮助。

[http://jsfiddle.net/2kDxD/](http://jsfiddle.net/2kDxD/)

这里的方法是`href`从导航列表中获取属性文本，稍微修改文本，然后将修改后的文本作为 CSS 类添加到正文中。然后在 CSS 类中为正文背景设置所需的样式规则，例如 background-image 属性。

**HTML**

```
<ul class="nav nav-tabs" id="myNav">
  <li class="active"><a href="#home" data-toggle="tab">Home</a></li>
  <li><a href="#profile" data-toggle="tab">Profile</a></li>
  <li><a href="#messages" data-toggle="tab">Messages</a></li>
  <li><a href="#settings" data-toggle="tab">Settings</a></li>
</ul>

<div class="tab-content">  
<div id="home" class="tab-pane active">
  <p>home</p>
</div> 
<div id="profile" class="tab-pane">
  <p>profile</p>
</div> 
<div id="messages" class="tab-pane">
  <p>messages</p>
</div> 
<div id="settings" class="tab-pane">
  <p>settings</p>
</div> 
</div> 
```

**JavaScript**

```
$('a[data-toggle="tab"]').on('shown', function (e) {
    var bodyBgClass = $(this).attr("href").replace("#", "") + "-BgBackground";
    $("body").removeClass().addClass(bodyBgClass);
    // what is the new class?
    console.log(bodyBgClass);
});

// make sure the initial page load activates the tabs
$(function () {
    $('#myNav a:first').tab('show');
}); 
```

**CSS**

```
/* add background image to styles as needed */
.home-BgBackground {
  background-color: blue; 
  color: #fff;
}
.profile-BgBackground {
  background-color: yellow; 
  color: #222;
}
.messages-BgBackground {
  background-color: orange; 
  color: #222;
}
.settings-BgBackground {
  background-color: pink; 
  color: #222;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-28T09:01:55.807

请更改js代码：

```
 $('li>a[data-toggle="tab"]').on('click', function (e) {
    var bodyBgClass = $(this).attr("href").replace("#", "") + "-BgBackground";
    $("body").removeClass().addClass(bodyBgClass);
    // what is the new class?
    console.log(bodyBgClass); 
```

# ember.js - Ember.js：在未关联的视图中循环来自 ArrayController 的数据

> ID：15099568
> 
> 赞同：2
> 
> 时间：2013-02-26T21:25:39.860
> 
> 标签：ember.js, handlebars.js

我设置了一个从 REST 端点提取帐户信息的路由：

```
Social.Router.map(function() {
    this.resource('accounts');
});

Social.AccountsRoute = Ember.Route.extend({
    model: function() {
        return Social.Account.find();
    }
});

Social.Account = DS.Model.extend({
    name: DS.attr('string'),
    username: DS.attr('string')
});

Social.AccountsController = Ember.ArrayController.extend(); 
```

我可以像这样在我的模板中循环这些数据：

```
<script type="text/x-handlebars" data-template-name="accountItem">
    {{#each account in controller}}
        <div class="avatar-name">
            <p>{{account.name}}</p>
            <p>{{account.username}}</p>
        </div>
    {{/each}}
</script> 
```

我有另一个模板，我想在其中使用相同的帐户数据。如何从视图中检索与 Account 模型关联的信息，以便可以在相应的模板中使用它？

```
Social.NewPostView = Ember.View.extend({
    tagName: 'div',
    accounts: function(){
        // return Account data here?
    }
}); 
```

**更新 1**

[这是我的 UI 的快速视图](https://www.evernote.com/shard/s11/sh/9e75358e-0f82-4178-aa91-217be835ca13/b1ae194b78b97392d72b972591839706)

左侧是“实时”帐户数据。右侧是静态 HTML。我想重用右边左边的数据。有道理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:35:46.767

您应该查看控制器的**需求**属性。这允许您指定可以从当前控制器访问的控制器列表。

更多信息[`emberjs guides`](http://emberjs.com/guides/controllers/dependencies-between-controllers/)

**新邮政控制器**

```
Social.NewPostController = Ember.ObjectController.extend({
    needs: ['accounts'],

    init: function(){
        this._super();
        console.log(this.get('controllers.accounts'))
    }
}); 
```

然后，从您的模板中：

```
<script type="text/x-handlebars" data-template-name="newPost">
    {{#each account in controller.controllers.accounts}}
        <div class="avatar-name">
            <p>{{account.name}}</p>
            <p>{{account.username}}</p>
        </div>
    {{/each}}
</script> 
```

# c# - SharePoint HttpHandler 调试问题 - AdaptiveImages

> ID：15099569
> 
> 赞同：0
> 
> 时间：2013-02-26T21:25:46.730
> 
> 标签：c#, asp.net, debugging, sharepoint, httphandler

我们正在努力使 SharePoint 具有响应性。交易的一部分是拥有响应式图像。我非常想从 IHttpHandler ala [https://github.com/davemcdermid/AdaptiveImages](https://github.com/davemcdermid/AdaptiveImages)开始并为 SharePoint 进行自定义。

我所做的：把这个自适应图像代码放在一个项目中并部署它。dll在gac中得到确认。

在 web.config 中注册处理程序。当那肯定不起作用时，我在 IIS 中注册了它。它正在提供图像，但根本不允许我调试/单步执行。当我用 VS2010 运行调试器时，我得到的错误是“这个断点当前不会被命中。没有加载任何符号。”

我尝试将调试器附加到备用 w3wp.exe 进程。

代码是从上面引用的 git 中逐字记录的。断点就在 ProcessRequest() 方法中。请让我知道进一步的细节是否会有所帮助。关于如何在调试器中使用共享点进入 httphandler 的一般想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:49:12.050

尝试首先从 Visual Studio 部署您的解决方案，然后立即在调试模式下运行它。我在 SharePoint 中没有加载断点时遇到了很多问题，这很有帮助。

另一种解决方案是下载并安装 WSP Builder。当您在 VS 中右键单击您的项目时，将有一个菜单选项强制将程序集放入 GAC。这也有助于加载断点。还有一个选项可以将进程附加到 w3p，这也有助于调试。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:57:51.700

可悲的是，我的第一个 StackOverflow 问题最终是我自己回答的。我的处理程序没有很好地注册。在 IIS 中执行此操作实际上是有问题的。我最终的 web.config 注册最终是：

```
<add name="AdaptiveImageHandlerGif" path="*.gif" verb="GET" type="AdaptiveImageHandler.AdaptiveImageHandler, AdaptiveImageHandler, Version=1.0.0.0, Culture=neutral,PublicKeyToken=2d12e1909d50e054"  /> 
```

但感谢 Meyer Denney 引导我的大脑走上了不同的道路。我需要一个全新的视角，在研究 wsp builder 之后，我决定最后一次检查我的处理程序是否可靠。而他们不是。

# objective-c - iOS：创建字典时“尝试从对象[1]插入零对象”

> ID：15099574
> 
> 赞同：12
> 
> 时间：2013-02-26T21:25:54.373
> 
> 标签：objective-c, objective-c-literals

我正在创建一个自定义导航栏类​​并使用以下代码自定义它的标题属性：

```
self.titleTextAttributes = @{ UITextAttributeFont: bariol,
                              UITextAttributeTextColor: [UIColor whiteColor]
                            }; 
```

但是，当我运行代码时，它返回以下错误消息：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSPlaceholderArray initWithObjects:count:]: attempt to insert nil object from objects[1]' 
```

我正在使用 Xcode 4.6 并在使用 iOS 6 的设备上运行。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T22:34:44.040

听起来你的`bariol`对象是`nil`. 您不能存储`nil`在字典中。

**编辑：**

实际上，您确定这是正确的代码行吗？您的错误引用`NSPlaceholderArray`，这表明这是文字的问题`@[]`，而不是`@{}`文字的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-26T21:30:33.373

文字的参数（字典的值和键）不能是`nil`.

如果您更喜欢不那么严格的构造函数，则可以考虑`+[NSDictionary dictionaryWithObjectsAndKeys:]`改用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-06-04T00:33:12.813

这个错误似乎在其他地方。它指向对象“1”处的数组错误。在您的情况下，您有一本字典，而对象 '1'`UITextAttributeTextColor: [UIColor whiteColor]`永远不会为零。

# javascript - 多定时器 Javascript

> ID：15099576
> 
> 赞同：0
> 
> 时间：2013-02-26T21:25:58.913
> 
> 标签：javascript, timer, countdown

我有一个页面要显示多个倒计时。我制作了一个 javascript 代码来进行倒计时，它适用于我指定的所有 div，但这仅在最后一个 div 上实时运行。有人能帮我吗？我在下面发布了页面。

```
<html>
<head>
<title>Timer</title>
<head>
<script type="text/javascript">

function Timer(){
this.countdown=function(fineanno, finemese, finegiorno, fineore, fineminuti, finesecondi, nomediv)
{
var_div=nomediv;
var_anno=fineanno;
var_mese=finemese;
var_giorno=finegiorno;
var_ore=fineore;
var_minuti=fineminuti;
var_secondi=finesecondi;
data_scandeza= new Date(var_anno,var_mese-1,var_giorno,var_ore,var_minuti,var_secondi);
data_oggi= new Date();
differenza=(data_scandeza-data_oggi);
giorni=parseInt(differenza/86400000);
differenza=differenza-(giorni*86400000);
ore=parseInt(differenza/3600000);
differenza=differenza-(ore*3600000);
minuti=parseInt(differenza/60000);
differenza=differenza-(minuti*60000);
secondi=parseInt(differenza/1000);
differenza=differenza-(secondi*1000);
if (giorni <= "0" && ore <= "0" && minuti <= "0" && secondi <= "0")
{
document.getElementById(nomediv).innerHTML="Tempo scaduto";
}
else
{
document.getElementById(nomediv).innerHTML=giorni +' giorni '+ore+' ore '+minuti+' min '+secondi+' sec';
setTimeout("t"+var_div+".countdown(var_anno, var_mese, var_giorno, var_ore, var_minuti, var_secondi, var_div)",1000);
}
}
}
</script>

</head>
<body>

<div id="div2"></div>
<script>
var tdiv2 = new Timer();
tdiv2.countdown("2013","04","26", "23","00","00","div2");

</script>

<div id="div3"></div>
<script>
var tdiv3 = new Timer();
tdiv3.countdown("2013","04","26", "23","00","00","div3");

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:03:01.530

`var_div`, `var_anno`, `var_mese`, `var_giorno`, `var_ore`,`var_minuti`和`var_secondi`是全局变量，因为您在声明它们时没有使用`var`关键字。这意味着您的所有调用都`countdown`将访问相同的变量。

不要在你的 中使用变量的名称`setTimeout`，否则你会得到这个全局变量的当前值（第二组）。相反，在构建 settimeout 时使用变量的*值，如下所示：*

```
setTimeout("t"+var_div+".countdown(" + var_anno + ", " + var_mese + ", " + var_giorno + ", " + var_ore + ", " + var_minuti + ", " + var_secondi + ",'" +  var_div + "')",1000); 
```

事实上，我认为这部分根本不需要：

```
var_div=nomediv;
var_anno=fineanno;
var_mese=finemese;
var_giorno=finegiorno;
var_ore=fineore;
var_minuti=fineminuti;
var_secondi=finesecondi; 
```

您可以只使用传入的参数，而不是使用这些新变量。我想您这样做的原因是`setTimeout`有一个变量可以从中读取值，但是根据我上面建议的更改，它不再需要。

# grails - 未加载 Grails 资源（css、js、图像）

> ID：15099579
> 
> 赞同：2
> 
> 时间：2013-02-26T21:26:12.933
> 
> 标签：grails

我有一个似乎知道的问题。

我正在使用 Grails 部署应用程序，就像您使用昨天有效的软件今天无法正常工作时一样。

我的应用程序运行得比牛奶还顺畅，突然间我的 css 无法加载，我的图像也没有加载，而且我的 js 文件变得异常糟糕，并给了我大量此类错误：

```
GET http://www.project.com/static/js/project.js 404 (Not Found) 
```

现在这在过去已经奏效，只是没有任何明确的解释就停止了。它抱怨的文件是不同的，有时它甚至可以工作。

在开发中它工作得很好，但是“生产”被搞砸了。

我用谷歌搜索了这个问题，似乎很多人都经历过同样的事情，但我不知道哪个线程/答案与我的 Grails 2.1.1 版本相关。

干杯!

# python - 操作系统错误：[WinError 10038] 网络服务器

> ID：15099580
> 
> 赞同：1
> 
> 时间：2013-02-26T21:26:14.103
> 
> 标签：python, sockets, webserver

我制作了一个简单的 Python Web 服务器。服务器运行良好，连接到浏览器并发送数据。当我将文件包含到我发送的 HTML 文档中时（例如`<img src="image_path"/>`）

它不想发送数据，也不想发送其他数据，比如样式表。我正在使用 Chrome Web 浏览器，并获得了这些标题：

```
GET /img.jpg HTTP/1.1
Host: localhost
Connection: keep-alive
User-Agent: Mozilla/5.0 (Windows NT 6.0) AppleWebKit/537.17 (KHTML, like Gecko) 
Chrome/24.0.1312.57 Safari/537.17
Accept: */*
Referer: http://localhost/
Accept-Encoding: gzip,deflate,sdch
Accept-Language: pl,en-US;q=0.8,en;q=0.6,nb;q=0.4
Accept-Charset: ISO-8859-2,utf-8;q=0.7,*;q=0.3 
```

我收到此错误消息：

```
Unhandled exception in thread started by <function handler at 0x02C28150>
Traceback (most recent call last):
File "C:\Users\CamIce\Desktop\PyServer v2\server.py", line 16, in handler
data = clientsock.recv(BUFSIZ)
OSError: [WinError 10038] Próbowano przeprowadzić próbę na obiekcie, który nie jest  
gniazdem 
```

此消息的代码太长，所以我不得不将其发布在 pastebin 上：http: [//pastebin.com/n19J0y6A](http://pastebin.com/n19J0y6A)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:42:06.203

您是否尝试将传入套接字绑定到不同的非特权端口而不是端口 80（例如，高于 1024 的端口）？在我看来，这似乎是 Windows 防火墙以某种方式干扰，或者可能是其他一些权限问题。在 recv() 调用之前您没有收到错误对我来说似乎很奇怪，但我不太了解 WINdows。

我没有立即看到您的代码有任何问题。

# ios - 如何将“animationImages”方法与以编程方式创建的 UIImageViews 一起使用

> ID：15099581
> 
> 赞同：2
> 
> 时间：2013-02-26T21:26:15.840
> 
> 标签：ios, animation, uiimageview

我以编程方式创建了 15 个左右`UIImageViews`并给了它们标签。

我已经使用了 [UIView anim...... 方法来移动它们`[self.view viewWithTag:tag]`来引用它们。

但是，`[self.view viewWithTag:tag]`似乎不适用于`animationImages`. Xcode 声明`animationImages`在“UIView”类型的对象上找不到属性。

我试图同时移动它们并为它们设置动画。我花了一整天的时间在网上搜索答案，但无济于事。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:29:19.063

您需要检查是否`[self.view viewWithTag:tag]`为 UIImageView 类型，然后调用该`animationImages`方法。警告指出 UIView 不支持`animationImages`，因为返回类型`viewWithTag:` [是 UIView 而不是 UIImageView](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instm/UIView/viewWithTag%3a)。

您可以尝试类似的方法：

```
UIView *aView = [self.view viewWithTag:tag];

if ([aView isKindOfClass:[UIImageView class]]) {
   UIImageView *imageView = (UIImageView *)aView;
   imageView.animationImages = [NSArray arrayWith....];//some images    
} 
```

# java - 异常处理仅在运行程序中起作用

> ID：15099583
> 
> 赞同：0
> 
> 时间：2013-02-26T21:26:19.560
> 
> 标签：java, exception, formatexception

最初我试图将`try`语句放入`while`循环中，但是遇到了几个错误。该程序运行完美，除非我输入一个不规则字符，一旦它给了我我输入的我创建的打印行，但是，当我再次输入另一个时，该行没有弹出，而是给我一个格式异常错误。

**AddNumbersrealone2.java**

```
import java.io.*;

// create the class
public class AddNumbersrealone2
{
    // allows i/o
  public static void main (String [] args) throws IOException
  {   // initalize variables and strings
    BufferedReader myInput = new BufferedReader  (new InputStreamReader (System.in));
    String sumNumbers;
    //String go;
    double num ;
    double total = 0.0;

    // asks user questions and instructions
    System.out.println("Hello, the following program will ask for your input of a number ");
    System.out.println("Each time you input a number a running total will be added to each previous number")  ;
    System.out.println("Once ready input a number to start!");
    // try and catch block      
    try {

      num = 0;

      // while statement if this occurs stop the program, in this case if a negative integer is inputted

      while (num >= 0) {

        // Contious question asked  
        System.out.println("Input another number..."); 
        sumNumbers = myInput.readLine();
        num = Double.parseDouble (sumNumbers);

        // calculates number (Running total)
        total = total + num;
        System.out.println(total);

        // end error trap
      }
    }
    catch  (Exception e){
      System.out.println("Please refrain from entering regular characters!");
      num = 0;

      // re- while statement if this occurs stop the program, in this case if a negative integer is inputted

      while ( num >= 0) {

        // input question after a character is inputted
        System.out.println("Please input a number: ");
        sumNumbers = myInput.readLine();
        num = Double.parseDouble (sumNumbers);

        total = total + num;
        System.out.println(total);

        // ending statement
      }
    }
    System.out.println("You entered a negative number, the program will exit now");
    System.out.println("Good-bye!");

    // Complete class body
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:33:46.917

你想要一些东西来捕捉 Double.parseDouble 周围的异常

例如。

```
 while(num >= 0)
    {
    // input question after a character is inputted
       System.out.println("Please input a number: ");
       sumNumbers = myInput.readLine();
       try{
            num = Double.parseDouble (sumNumbers);
            total = total + num;
            System.out.println(total);
       } catch(Exception e)
       {
            System.out.println("Please enter a proper number");
       }    

            // ending statement
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:32:46.457

您的问题是，一旦引发第一个异常，您的程序就会被 catch 语句内的 while() 循环所捕获。因此，如果输入了另一个无效输入，则会在没有 try-catch 语句的第二个 while 循环中处理它。一个好的解决方法是让您的 try 语句仅包含您说 num = Double.parseDouble (sumNumbers); 的行。当你捕捉到异常时，以 continue 结束它；语句，以便您的程序循环回到开头并要求另一个输入。

# android - 不使用 Playstore 的多台设备上的远程更新应用程序

> ID：15099584
> 
> 赞同：2
> 
> 时间：2013-02-26T21:26:26.853
> 
> 标签：android, ota, automatic-updates

我正在尝试找到将 APK 远程更新到 80 台平板电脑的解决方案。这应该尽可能自动化，如果这可以完全在后台发生而无需任何用户输入，那就太好了。基本上是 Playstore 目前所做的，但遗憾的是我无法使用。

如果不植根设备，这样的事情可能吗？关于这样做的图书馆/服务有什么建议吗？

我正在运行 Android 4.1.1，它们都将连接到 Wi-Fi。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T21:36:30.177

您可以将新的 APK 文件下载到 SD 卡，然后调用它来安装它：

```
Intent shareIntent = new Intent(Intent.ACTION_VIEW);
shareIntent.setDataAndType(Uri.fromFile(new File("path-to-APK-file")),
        "application/vnd.android.package-archive");

try {
    context.startActivity(shareIntent);
} catch (Throwable t) {
    // handle the exception here
} 
```

只有一件事不是自动的：最后一步。系统会要求用户确认安装。

关于 APK 文件的 MIME 类型，这里是[wiki 页面](http://en.wikipedia.org/wiki/APK_%28file_format%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:37:13.163

不，如果没有生根或至少将设备的签名密钥作为标准的 Android APK 更新，在后台是不可能的。我可以设想类似于此工作的唯一半合理方式是让您的应用程序始终检查/下载要运行的代码，您使用类加载器加载这些代码。这将是大量的工作，并不容易。

然而，如果你愿意接受一些用户交互，那真的不应该那么难（尽管它仍然需要一些基础设施的构建）。保留一个返回最新版本号的网络服务，与当前版本号进行比较，并根据需要下载新的 APK。许多 SO 问题都涉及以[编程方式安装 APK 。](https://stackoverflow.com/questions/4967669/android-install-apk-programmatically)

# mysql - 根据查询中定义的值比较两个字符串

> ID：15099587
> 
> 赞同：2
> 
> 时间：2013-02-26T21:26:34.700
> 
> 标签：mysql

我必须比较两个包含字母但不按字母顺序排列的字符串字段。

我想按照这个顺序比较它们：

```
"J" "L" "M" "N" "P" "Q" "R" "S" "T" "H" "V" "W" "Y" "Z" 
```

因此，如果我将 H 与 T 进行比较，H 将大于 T（与字母顺序不同）

如果我测试一个值是否大于'H'（>'H'），我将得到所有包含这些值的条目（“V”“W”“Y”“Z”）（同样，与字母顺序不同）

如何在一个 SQL 查询中实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:33:28.337

```
SELECT *
FROM yourtable
WHERE
  FIELD(col, 'J', 'L', 'M', 'N', 'P', 'Q', 'R', 'S', 'T', 'H', 'V', 'W', 'Y', 'Z') >
  FIELD('H', 'J', 'L', 'M', 'N', 'P', 'Q', 'R', 'S', 'T', 'H', 'V', 'W', 'Y', 'Z')
         ^ your value 
```

或者还有：

```
SELECT *
FROM yourtable
WHERE
  LOCATE(col, 'JLMNPQRSTHVWYZ')>
  LOCATE('H', 'JLMNPQRSTHVWYZ') 
```

请[在此处](http://sqlfiddle.com/#!2/d7fab/1)查看小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:28:47.110

你可以做

```
SELECT ... FROM ... ORDER BY yourletterfield='J' DESC, yourletterfield='L' DESC, yourletterfield='M' DESC, ... 
```

相等运算符将在其为真时评估为“1”，在为假时评估为“0”，因此这应该会给您所需的顺序。

实际上有一个[`FIELD()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_field)函数可以让这变得不那么冗长。有关详细信息，请参阅[本文](http://www.electrictoolbox.com/mysql-order-specific-field-values/)。

```
SELECT ... FROM ... ORDER BY FIELD(yourletterfield, 'J', 'L', 'M', ...) 
```

# php - 如何使用 VBA 发送单元格内容以在 Facebook Graph API 调用中用作 PHP 变量？

> ID：15099588
> 
> 赞同：-5
> 
> 时间：2013-02-26T21:26:34.677
> 
> 标签：php, facebook-graph-api, excel, vba

我正在构建一个本地 php 页面，以便在朋友的帮助下以 XML 格式从 Facebook 输出公共公司信息，我将创建一个 VBA 宏来网络爬网到该页面并将信息下载到我在 Excel 中的工作簿中。但是，公司名称的输入必须来自电子表格上的一个单元格，除了将其直接写入 PHP 文件之外，我不知道如何将其传递到我发送给 Graph API 的请求中。如何让 VBA 将电子表格单元格中的值（例如 A1=Hilton）传递给 PHP 以替换硬编码的公司名称，以便我可以将其用于任何公司？

要求说明：

1.  VBA 从单元格 A1 读取公司名称
2.  VBA 将公司名称作为变量发送到 PHP
3.  PHP 使用从 VBA 发送的公司名称发布到 Graph API
4.  VBA 宏爬取本地 PHP 页面并将 XML 输出下载到工作簿中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:11:34.250

您可以使用我在下面创建的 VBA 宏。在我的示例中，我将宏绑定到按钮单击

```
Sub Button1_Click()
    Set objHTTP = CreateObject("MSXML2.ServerXMLHTTP")
   URL = "http://www.yourdomain.com/page.php?variable=" & ActiveWorkbook.Worksheets(1).Range("A1").Value
   objHTTP.Open "GET", URL, False
   objHTTP.setRequestHeader "User-Agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)"
   objHTTP.send ("")

End Sub 
```

您服务器上的 PHP 脚本看起来像

```
<?php

$excelCellA1Value = $_GET["variable"];

//Work magic here such as posting to Facebook API

//TO DO: Profit!

?> 
```

# tomcat - Tomcat 6 web 服务未部署 404 错误

> ID：15099595
> 
> 赞同：1
> 
> 时间：2013-02-26T21:26:51.593
> 
> 标签：tomcat, deployment, web, jax-ws

我一直在尝试在 tomcat 上部署一个简单的 Web 服务，但我没有成功，它总是返回 404 错误。

我使用了这个例子中的代码

[http://www.mkyong.com/webservices/jax-ws/deploy-jax-ws-web-services-on-tomcat/](http://www.mkyong.com/webservices/jax-ws/deploy-jax-ws-web-services-on-tomcat/)

但无法使用战争，因为我在 server.xml 中设置了上下文信息

所以我使用与 mkyong 相同的代码，但部署它的步骤如下

[如何在 Tomcat 6 上手动部署 Web 服务？](https://stackoverflow.com/questions/2511547/how-to-manually-deploy-a-web-service-on-tomcat-6)

我一直在努力，直到 catalina.log 中不再有错误，但仍然出现 404 错误

当我查看日志时，有一些这样的消息

2013 年 2 月 26 日下午 12:17:48 com.sun.xml.ws.transport.http.servlet.WSServletContextListener contextInitialized INFO：WSSERVLET12：JAX-WS 上下文侦听器正在初始化 2013 年 2 月 26 日下午 12:17:49 com.sun。 xml.ws.transport.http.servlet.WSServletDelegate 信息：WSSERVLET14：JAX-WS servlet 初始化 2013 年 2 月 26 日下午 12:17:49 org.apache.catalina.startup.HostConfig deployDescriptor 信息：部署配置描述符 trafficschoolgirls.com.xml 2013 年 2 月 26 日下午 12:17:49 com.sun.xml.ws.transport.http.servlet.WSServletContextListener contextInitialized INFO：WSSERVLET12：JAX-WS 上下文侦听器正在初始化 2013 年 2 月 26 日下午 12:17:51 com.sun。 xml.ws.transport.http.servlet.WSServletDelegate 信息：WSSERVLET14：JAX-WS servlet 初始化

所以我的ws设置对了吗？但是我真的不知道为什么它仍然无法正常工作，是否有任何其他日志我可以检查或我需要设置哪些地方才能让 ws 运行？我需要做任何端口设置吗？

感谢您的时间，

多莉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:24:27.810

我在同一个应用程序中的 Tomcat 6 中有两个 WebService。

文件中有两个端点，`/WEB-INF/sun-jaxws.xml`分别是`url-pattern`

```
<?xml version="1.0" encoding="UTF-8"?>
<endpoints xmlns="http://java.sun.com/xml/ns/jax-ws/ri/runtime" version="2.0">
    <endpoint name="HtmlPageService" 
              implementation="org.paulvargas.tools.soap.HtmlPageService" 
              url-pattern="/HtmlPageService" />
    <endpoint name="BinaryFileService" 
              implementation="org.paulvargas.tools.soap.BinaryFileService" 
              url-pattern="/BinaryFileService" />
</endpoints> 
```

这`url-pattern`也是`servlet-mapping`在[`WSServlet`](http://jax-ws.java.net/nonav/jax-ws-20-fcs/arch/com/sun/xml/ws/transport/http/servlet/WSServlet.html)

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
 <display-name>soap</display-name>
 <listener>
  <listener-class>com.sun.xml.ws.transport.http.servlet.WSServletContextListener</listener-class>
 </listener>
 <servlet>
  <servlet-name>Service</servlet-name>
  <servlet-class>com.sun.xml.ws.transport.http.servlet.WSServlet</servlet-class>
  <load-on-startup>0</load-on-startup>
 </servlet>
 <servlet-mapping>
  <servlet-name>Service</servlet-name>
  <url-pattern>/HtmlPageService</url-pattern>
  <url-pattern>/BinaryFileService</url-pattern>
 </servlet-mapping>
 <welcome-file-list>
     <welcome-file>index.jsp</welcome-file>
 </welcome-file-list>
</web-app> 
```

该应用程序具有以下库：

```
commons-io-2.4.jar
gmbal-api-only.jar
ha-api.jar
jaxb-impl.jar
jaxws-api.jar
jaxws-rt.jar
management-api.jar
mimepull-1.3.jar
policy.jar
stax-ex.jar
streambuffer.jar 
```

启动Tomcat的输出是

```
Feb 26, 2013 7:16:58 PM org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-8080
Feb 26, 2013 7:16:58 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 438 ms
Feb 26, 2013 7:16:58 PM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Feb 26, 2013 7:16:58 PM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.35
Feb 26, 2013 7:16:58 PM com.sun.xml.ws.transport.http.servlet.WSServletContextListener contextInitialized
INFO: WSSERVLET12: JAX-WS context listener initializing
Feb 26, 2013 7:16:59 PM com.sun.xml.ws.transport.http.servlet.WSServletDelegate <init>
INFO: WSSERVLET14: JAX-WS servlet initializing
Feb 26, 2013 7:16:59 PM org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
Feb 26, 2013 7:16:59 PM org.apache.jk.common.ChannelSocket init
INFO: JK: ajp13 listening on /0.0.0.0:8009
Feb 26, 2013 7:16:59 PM org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=0/17  config=null
Feb 26, 2013 7:16:59 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 1608 ms 
```

转到 URL`http://localhost:8080/soap/HtmlPageService`

```
 Service Name:   {http://soap.tools.paulvargas.org/}HtmlPageServiceService
           Port Name:   {http://soap.tools.paulvargas.org/}HtmlPageServicePort
             Address:   http://localhost:8080/soap/HtmlPageService
                WSDL:   http://localhost:8080/soap/HtmlPageService?wsdl
Implementation class:   org.paulvargas.tools.soap.HtmlPageService

        Service Name:   {http://soap.tools.paulvargas.org/}BinaryFileServiceService
           Port Name:   {http://soap.tools.paulvargas.org/}BinaryFileServicePort
             Address:   http://localhost:8080/soap/BinaryFileService
                WSDL:   http://localhost:8080/soap/BinaryFileService?wsdl
Implementation class:   org.paulvargas.tools.soap.BinaryFileService 
```

我希望这可以帮助你。

# javascript - Highcharts 3.0 beta 阈值文档？

> ID：15099598
> 
> 赞同：0
> 
> 时间：2013-02-26T21:27:01.903
> 
> 标签：javascript, highcharts, beta

我正在尝试查找新功能的文档（主要是颜色阈值），但似乎无法找到在[提供的 jsfiddle](http://jsfiddle.net/highcharts/YWVHx/)之外记录的位置 。

所提供的只是`negativeColor: '#0088FF'`，我要做的是逐点设置阈值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T23:33:44.287

截至状态（测试版），我认为到目前为止还没有官方文档。

我从 beta 3.0 highcharts 代码的源代码中读到的，没有用于设置颜色的多点基础。

`/**
  * Get the zero plane either based on zero or on the min or max value.
  * Used in bar and area plots
  */`

在源代码中找到了这个。看起来它只是零或最小值或最大值。我也在寻找一种方法，可以说状态“低”、“正常”和“高”。

# javascript - Javascript字符串相等

> ID：15099599
> 
> 赞同：1
> 
> 时间：2013-02-26T21:27:03.167
> 
> 标签：javascript

每个元素都包含相同的值。当他们自己检查这个值时，一切都会检查出来。但是当相互比较时，它们并不相等。帮助！谢谢！

```
time[x] == "2013-02-26 14:00:00"   ? 
```

真的

```
reference[x] == "2013-02-26 14:00:00"  ? 
```

真的

```
time[x] == reference[x]  ? 
```

错误的

```
time[x].valueOf() == reference[x].valueOf()  ? 
```

错误的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:39:17.910

这可能会发生，因为这两个变量的类型不同。

如果其中一个变量包含一个`Date`实例而另一个包含 a `String`，则将它们与字符串文字进行比较将返回 true，而比较它们的`valueOf()`结果将返回 false，因为`valueOf()`a`Date`返回自纪元以来的毫秒数，而不是人类可读的表示日期（相对于`toString()`）。

```
var a = new Date()
a.toString() //"Wed Feb 27 2013 01:41:51 GMT+0300 (MSK)"
a.valueOf()  //1361918511306

var b = "Wed Feb 27 2013 01:41:51 GMT+0300 (MSK)"
b.toString() //"Wed Feb 27 2013 01:41:51 GMT+0300 (MSK)"
b.valueOf()  //"Wed Feb 27 2013 01:41:51 GMT+0300 (MSK)"

a == "Wed Feb 27 2013 01:41:51 GMT+0300 (MSK)" //true
b == "Wed Feb 27 2013 01:41:51 GMT+0300 (MSK)" //true
a == b //true
a === b //false - types are being compared as well
a.valueOf() == b.valueOf() //false - 1361918511306 compared to "Wed Feb 27 2013 01:41:51 GMT+0300 (MSK)" 
```

# web.py - 将“globals()”作为 web.py fvars 传递的目的是什么？

> ID：15099603
> 
> 赞同：6
> 
> 时间：2013-02-26T21:27:04.953
> 
> 标签：web.py

[`web.application`](http://webpy.org/docs/0.3/api#web.application)接受[web.py 教程](http://webpy.org/docs/0.3/tutorial)传递`fvars`给的未记录参数，如下所示：`globals()`

```
import web

class index:
    def GET(self):
        return "Hello, world!"

urls = (
  '/', 'index'
)

if __name__ == "__main__": 
    app = web.application(urls, globals()) 
```

我见过至少一个通过的应用程序`locals()`。这个变量是做什么用的，为什么要传递它`locals()`？`globals()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T22:06:14.117

它被`application.handle()`（反过来调用`application._delegate()`）用来将处理程序类从字符串转换为类对象本身。[源代码在这里。](https://github.com/webpy/webpy/blob/master/web/application.py#L461)

例如，在您上面的代码片段中，`urls = ('/', 'index')`是 URL 到类字符串的映射。所以`web.application`需要你的`globals()`dict 能够查找字符串`'index'`并获取类本身。

我实际上认为这是一个有点非 Pythonic 的设计。为什么不直接通过类呢？我认为 web.py 也支持这种方法。但是，我相信这些类是作为字符串完成的，因此自动重载更简单。自动重载代码`fvars`大量使用。

Re `locals()`: 在模块级别，`locals()`并没有真正的意义，但它返回与 相同的字典`globals()`，这就是为什么它会起作用。

# .htaccess - 为什么此路由会出现 404 错误？

> ID：15099606
> 
> 赞同：0
> 
> 时间：2013-02-26T21:27:15.603
> 
> 标签：.htaccess, codeigniter, routing

在我的网络根目录（var/www）中，我的 .htaccess 文件中有以下内容：

```
RewriteCond %{REQUEST_URI} ^system.*
RewriteCond $1 !^(index\.php|vges|images|robots\.txt)

RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /test/index.php?/$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

然后我有一个带有 codeigniter 项目的子目录（/var/www/test）。它还有一个 .htaccess 文件，其中包含以下内容：

```
RewriteEngine On
RewriteCond $1 !^(index\.php|quiz|vges|buddy|css|fonts|img|images|js|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

当我访问 localhost 时，我可以查看测试目录，当我转到测试目录时，我会显示默认控制器视图。但是当我访问 localhost/test/controller 时，我得到一个 404 not found 错误：

```
The requested URL /index.php/events was not found on this server. 
```

编辑：我通过将最后一行 /var/www/vges.htaccess 更改为：

```
RewriteRule ^(.*)$ test/index.php/$1 [L] 
```

虽然我怀疑如果我要将此**测试**项目上传到服务器，它不是子目录，那么我可能会收到错误。最好的解决方案是什么？我应该在我的 .htaccess 文件中更改什么

1.  我可以在本地机器上有子目录
2.  当我将它们作为单个项目（例如测试项目）上传到服务器时，我不必修改 .htaccess 文件。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:06:28.960

首先，.htaccess 文件适用于它们所在的目录以及每个子目录。您的 CodeIgniter 特定规则应该在`var/www/test/`CI 目录中——通常是 CI 的 index.php 文件所在的位置。

其次，您的根 .htaccess 有点奇怪。`RewriteCond`条件累积直到`RewriteRule`触发规则，然后它们被重置。您的两个`%{REQUEST_URI}`条件相互冲突，因为 URI 不能同时以两者开头。我不太确定这个 .htaccess 规则在做什么，但是如果你从根开始的 URL 对你的 CI 应用程序没有影响，我认为一开始就没有必要把它放在那里。如果不知道您的目录结构以及您希望网站如何运行，我无法确定。

kjetilh 是对的 - 除非您的环境共享完全相同的设置，否则 .htaccess 不太可能通用。您最好的选择是尽可能简单地启动它们，并根据需要进行修改。CI 2.1.x 的一个好的开始 .htaccess 类似于：

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^(favicon\.ico|robots\.txt)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

您可以在第三个中添加您的资产目录或您不想重定向的任何路径`RewriteCond`（请记住正确转义正则表达式字符，例如句点）。如果`RewriteBase`CI 位于子目录中，则规则肯定会派上用场。您也不需要 2.1.x 的系统和应用程序文件夹引用，因为这些文件夹有自己的 .htaccess 文件阻止对它们的访问。

# java - 我应该使用哪个 LayoutManager？

> ID：15099611
> 
> 赞同：4
> 
> 时间：2013-02-26T21:27:29.617
> 
> 标签：java, swing, user-interface, layout

![布局](../Images/905e8730e5cb3dd5dd89ff2b300bf84c.png)

请参阅所附图片。我是 Java GUI 的初学者，希望有人可以指导我为这样的 GUI 选择布局管理器。我知道我可能不得不使用嵌套的布局管理器，但我不确定哪个可以帮助我完成这项工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T21:30:24.677

这是一个想法：

*   在主 JPanel 中使用 BorderLayout。在 CENTER 部分设置 JList
*   在上述布局的 EAST 部分，添加一个新的 JPanel，其 GridLayout 为 6 行 2 列
*   在 GridLayout 上，按照定义的顺序添加每个标签、按钮、文本字段等 - 从上到下和从左到右。

或者：您可以使用 7x2 GridLayout 并用空文本字段填充按钮上方的两个位置，以将上方的标签/字段与下方的按钮分开。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T21:37:06.987

查看[DesignGridLayout](http://designgridlayout.java.net/)，我认为它非常适合这种形式

看看他们的例子：

![在此处输入图像描述](../Images/00ebf1d786cab0bc0a214eec7236092e.png)

只需几行干净的代码：

```
 layout.row().grid(label("Last Name"))   .add(lastNameField) .grid(label("First Name"))  .add(firstNameField);
    layout.row().grid(label("Phone"))       .add(phoneField)    .grid(label("Email"))       .add(emailField);
    layout.row().grid(label("Address 1"))   .add(address1Field);
    layout.row().grid(label("Address 2"))   .add(address2Field);
    layout.row().grid(label("City"), 1)     .add(cityField);
    layout.row().grid(label("State"))       .add(stateField)    .grid(label("Postal Code")) .add(postalField);
    layout.row().grid(label("Country"), 1)  .add(countryField);
    layout.emptyRow();
    layout.row().center().add(newButton).add(deleteButton).add(editButton).add(saveButton).add(cancelButton); 
```

# javascript - 如何按值对 JavaScript 对象进行排序？

> ID：15099613
> 
> 赞同：1
> 
> 时间：2013-02-26T21:27:35.543
> 
> 标签：javascript, sorting, javascript-objects

我有一个看起来像这样的对象：

```
var foo = {
    284366: 3, 
    285286: 1, 
    285614: 2
} 
```

我怎样才能把它变成：

```
var foo = {
    285286: 1, 
    285614: 2,
    284366: 3
} 
```

# javascript - 在 Backbone 上填充集合

> ID：15099617
> 
> 赞同：0
> 
> 时间：2013-02-26T21:27:42.933
> 
> 标签：javascript, backbone.js, backbone.js-collections

```
Tutorial.Views.Layout = Backbone.Layout.extend({
  model: Tutorial.Model,
  });

initialize: function () {
  _.bindAll(this);
  this.model = new Tutorial.Model({id : $("#data").data('user') });
  this.collection = new Tutorial.Collection();
  var success1 = function(){

         console.log('OK');

     };
     this.collection.fetch({success : success1});

},

showTuto: function(){

  step = this.collection.first(1);
  console.log(step);
}, 
```

我的问题是我的收藏是空的。我的模型有 4 个项目，但我没有看到它们。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:44:18.603

我们需要查看更多代码来提出更接近的建议，但希望这个解释能帮助你。您应该将模型直接传递给集合，或者在 fetch 中处理它。

```
//simplified view
YourView = Backbone.View.extend({
    initialize : function(){
         var testModel = new Tutorial.Model({id : $("#data").data('user') });
         this.collection = new Tutorial.Collection();
         this.collection.add(testModel);
    }
}); 
```

在这种情况下，您将直接将该模型添加到您的集合中。如果您想异步调用并从 fetch 中获取数据，然后传递回调，您可以执行以下操作：

```
//simplified view
    YourView = Backbone.View.extend({
        initialize : function(){
             this.collection = new Tutorial.Collection();
             this.collection.fetch(function(){
                  console.log('okay');
             });
        }
    });

    Tutorial.Collection = Backbone.Collection.extend({
        fetch : function(callback){
             // grab a ref to your collection
             var thisCollection = this;

             // call your data function which has the ajax call
             getYourDataFunction(function(data){
                  // if your data returned is an array of objects
                  thisCollection.add(data);

                  if (typeof callback === "function"){
                       //if you included a callback, call it with a reference to the collection
                       callback.call(thisCollection);
                  }
             });
        });
    }); 
```

# mysql - 嵌入式 MySQL DLL 能否支持多个用户进程访问数据库？

> ID：15099619
> 
> 赞同：0
> 
> 时间：2013-02-26T21:27:54.903
> 
> 标签：mysql

我目前正在将 Firebird 与嵌入式 MySQL 进行比较，以便在应用程序中使用。我找到了[Firebird](http://www.firebirdsql.org/file/fb25_architecture_comparison.pdf)的所有规范，并且正在寻找关于嵌入式 MySQL 的类似文档。如果我找不到文档，下面是我对 MySQL 感兴趣的项目

*   嵌入式 MySQL 服务器可以支持多用户（1-10 并发）吗？
*   嵌入式 MySQL 服务器是否支持多线程访问数据库？
*   MySQL 数据库位置可以位于远程共享（CIFS、NFS 等）上吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:29:40.387

我找到了以下[演示文稿](https://docs.google.com/gview?url=http://assets.en.oreilly.com/1/event/21/MySQL%20Embedded_%20Getting%20Started%20with%20libmysqld%20Presentation.ppt&chrome=true)，其中包含我正在寻找的信息。

1.  嵌入式 MySQL 支持一次一个进程访问文件
2.  不确定是否有多个线程，但由于它都在一个进程中运行，这可能没问题
3.  MySQL 可以使用位于任何位置的文件作为驱动器号。

此外，数据库在标准 MySQL 服务器和嵌入式服务器之间使用相同的文件格式，从而可以轻松地将它们集成到客户端/服务器安装中。

希望这些信息对其他人有所帮助。

# iphone - 检测 UIAlert / 通知

> ID：15099627
> 
> 赞同：4
> 
> 时间：2013-02-26T21:28:38.500
> 
> 标签：iphone, ios, cocos2d-iphone, uialertview

我正在使用 Cocos2D 为 iOS 编写游戏。我已经实现了一个暂停功能，允许用户根据请求暂停菜单。当接收到`applicationWillResignActive`. On`applicationWillEnterForeground`并且`applicationDidBecomeActive`我恢复主游戏循环，但随后将播放器放入暂停菜单，迫使他们在准备好时恢复。除了一种情况外，一切似乎都运行良好。当收到日历事件警报（我假设是 UIAlert）时，游戏不会弹出暂停菜单或暂停游戏。

我的三个问题：我必须同时包含`willEnterForeground`和`didBecomeActive`，还是其中一个足以满足我的目的？我必须安排什么电话来接收 UIAlerts（如果这实际上是在上述情况下触发我的错误的原因），我应该如何处理它们？有什么方法可以模拟 UIAlert 以便我可以测试/调试？

非常感激。

* * *

编辑 -

问题在于我对上述事件的整体处理。正如苹果文档中明确说明的那样，`willResignActive`用于暂停游戏（即抛出暂停菜单并停止游戏循环），并`didEnterForeground`恢复游戏循环，但保持暂停菜单向上。通过以这种方式处理事件，无需安排接收 UIAlerts 或本地/远程通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:43:45.423

当您收到日历事件时，您将收到 applicationWillResignActive: 的调用，这是处理 cocos2D 暂停或您在日历事件接收时想做的任何其他事情的地方。如果日历事件被忽略，将调用 applicationDidBecomeActive。如果没有被忽略，那么你将不得不从你正在做的事情中恢复。

# mysql - SQL 在输出中显示额外的列

> ID：15099635
> 
> 赞同：1
> 
> 时间：2013-02-26T21:29:04.863
> 
> 标签：mysql, distinct

我正在尝试执行一个 mySQL 查询，其中 a & b 需要不同，但我也想在输出中显示 c 列。c 与查询无关 - 它更像是一个标记/索引，使 a, b 的结果更有意义。

SQL：

```
select distinct a, b
from tbl 
```

不确定如何将 c 作为第一列强制进入上述查询的 o/p。

有任何想法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:32:15.660

```
SELECT a, b, MAX(c) AS c
FROM tbl
GROUP BY a, b 
```

虽然 MySql 将允许您从不在聚合函数中的列中排除`GROUP BY`，因为它们的“[扩展名](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html)”，但最好将值包装在聚合中`MAX()`，以便使查询可移植并且结果具有确定性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:32:06.863

因为你没有在你的问题中提到`c`必须在结果集中，所以你可以试试这个：

```
select c, a, b
from tbl
group by a, b 
```

# sql - SQL Lookup T1.ColumnA vs T2.ColumnA，如果 T1.ColumnA 中的所有 5 个值都列在 T2.ColumnA 中，则将 T1.ColumnA 替换为“ALL”

> ID：15099636
> 
> 赞同：1
> 
> 时间：2013-02-26T21:29:05.797
> 
> 标签：sql, sql-server, sql-server-2008

我正在尝试查找特定值。如果 Region 的 Table1 的所有值都作为查找表 (Table2) 的一部分列出，则将 Table1.Region 字段替换为 value = 'ALL'，基本上是尝试将所有 5 个区域分组并在全部时用“ALL”替换该值列出了 5 个区域（根据查找表中的值） 当所有区域都未列出时，保留区域代码

```
Year   Region   Value
2012    A1      24
2012    B2      24
2012    C3      24
2012    D4      24
2012    E5      24
2012    A1      36
2012    B2      36
2012    C3      36
2012    D4      36
2012    E5      36
2013    A1      24
2013    B2      24

Lookup Table
Region  Value
1         A1
2         B2
3         C3
4         D4
5         E5 
```

期望的结果

```
Year    Region Term
2012    ALL    24   <-- Note region change to all because there are 5 regions per above 
2012    ALL    36   <-- Note region change to all because there are 5 regions per above
2013    A1     24   <-- Region did not change because there were only 2 regions in source
2013    B2     24   <-- Region did not change because there were only 2 regions in source 
```

我知道如何对数据进行分组，但分组数据需要进一步合并并替换为 ALL

感谢您的任何指导！

卡洛斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:38:56.757

这有一个小技巧：

（@var 为 NULL 或 Table1.Region = @var）

you need to translate 'ALL' to null, so when 'ALL' is selected, it cancels out the filter.

我想你要么使用 SSRS，要么使用上面的下拉菜单，但这里有一个链接：

[https://www.simple-talk.com/content/print.aspx?article=835#hr2](https://www.simple-talk.com/content/print.aspx?article=835#hr2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:54:03.027

将此查询与[APPLY](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx) AND [EXCEPT](http://msdn.microsoft.com/en-us/library/ms188055.aspx)运算符一起使用

```
SELECT t1.Year, CASE WHEN o.Value IS NULL THEN 'ALL' ELSE t1.Region END AS Region,
       t1.Value
FROM dbo.test7 t1 OUTER APPLY (                               
                               SELECT Value
                               FROM test8 
                               EXCEPT                               
                               SELECT Region
                               FROM test7 t2
                               WHERE t1.Year = t2.Year
                                 AND t1.Value = t2.Value                                                             
                               ) o
GROUP BY t1.Year, CASE WHEN o.Value IS NULL THEN 'ALL' ELSE t1.Region END, 
         t1.Value 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/71729/1)上的演示[](http://sqlfiddle.com/#!3/71729/1)

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T22:03:35.947

您没有指定您使用的 RDBMS，但您应该能够在所有数据库产品中使用以下内容：

```
select distinct t1.year,
  case 
    when t2.year is null and t2.value is null
    then t1.region
    else 'ALL' End Region,
  t1.value
from table1 t1
left join
(
  select year, value
  from table1
  group by year, value
  having count(distinct region) = (select count(distinct value)
                                   from table2)
) t2
  on t1.year = t2.year
  and t1.value = t2.value 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/66992/14)**

# c++ - 仅使用“last”参数提升 irange

> ID：15099638
> 
> 赞同：0
> 
> 时间：2013-02-26T21:29:09.217
> 
> 标签：c++, boost

是否有一个扩展`boost::irange`只需要一个`int`参数，使用 0 作为默认`first`参数，而给定`int`作为`last`原始参数`irange`？

例如，我已经可以这样做了：

```
foreach(int i, irange(0, 3))
    cout << i << endl; 
```

但我想要与 Python 的函数相同的`range`功能，如下所示：

```
foreach(int i, irange(3))
    cout << i << endl; 
```

如果这个扩展不存在，我猜自己写应该很容易，但以下不起作用：

```
template<class Integer>
iterator_range< range_detail::integer_iterator<Integer> > irange(int last){
    return irange(0, last);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:35:24.057

您没有使用模板参数。试试这个：

```
template<class Integer>
boost::iterator_range< boost::range_detail::integer_iterator<Integer> > irange(Integer last)
{
    return boost::irange(static_cast<Integer>(0), last);
} 
```

# c# - 如何从字符串中获取特定元素

> ID：15099643
> 
> 赞同：-1
> 
> 时间：2013-02-26T21:29:22.910
> 
> 标签：c#, string, parsing

我需要能够从以花括号开头和结尾的字符串中获取特定元素。如果我有一个字符串：

> “asjfaieprnv{1}oiuwehern{0}oaiwefn”

我怎么能只抓住 1，然后是 0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:37:11.063

正则表达式对此非常有用。

你要匹配的是：

```
\{   # a curly bracket
     # - we need to escape this with \ as it is a special character in regex
[^}] # then anything that is not a curly bracket
     # - this is a 'negated character class'
+    #  (at least one time)
\}   # then a closing curly bracket
     # - this also needs to be escaped as it is special 
```

我们可以将其折叠为一行：

```
\{[^}]+\} 
```

接下来，您可以通过将要提取的部分用括号括起来形成一个*组*来捕获和提取内部内容：

```
\{([^}]+)\} 
```

在 C# 中，你会这样做：

```
var matches = Regex.Matches(input, @"\{([^}]+)\}");
foreach (Match match in matches)
{
    var groupContents = match.Groups[1].Value;
} 
```

第 0 组是整个匹配项（在这种情况下包括`{`and `}`），第 1 组是第一个带括号的部分，依此类推。

一个完整的例子：

```
var input = "asjfaieprnv{1}oiuwehern{0}oaiwef";
var matches = Regex.Matches(input, @"\{([^}]+)\}");
foreach (Match match in matches)
{
    var groupContents = match.Groups[1].Value;
    Console.WriteLine(groupContents);
} 
```

输出：

```
1
0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:38:25.587

使用 Indexof 方法：

```
int openBracePos = yourstring.Indexof ("{");
int closeBracePos = yourstring.Indexof ("}");
string stringIWant = yourstring.Substring(openBracePos, yourstring.Len() - closeBracePos + 1); 
```

那将是您的第一次出现。您需要对字符串进行切片，以便第一次出现不再存在，然后重复上述过程以找到第二次出现：

```
yourstring = yourstring.Substring(closeBracePos + 1); 
```

注意：您可能需要转义花括号：“{” - 不确定；从未在 C# 中处理过它们

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:40:03.100

这看起来像是正则表达式的工作

```
using System.Text.RegularExpressions;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            string str = "asjfaieprnv{1}oiuwe{}hern{0}oaiwefn";
            Regex regex = new Regex(@"\{(.*?)\}");

            foreach( Match match in regex.Matches(str))
            {
                 Console.WriteLine(match.Groups[1].Value);
            }
        }
    }
} 
```

# ruby-on-rails - 我无法在 OSX 10.7.5 上安装 rails

> ID：15099644
> 
> 赞同：4
> 
> 时间：2013-02-26T21:29:26.070
> 
> 标签：ruby-on-rails, ruby, macos, rvm

每当我跑步

```
 sudo gem install rails 
```

我得到以下输出：

```
 ERROR:  Loading command: install (LoadError)
cannot load such file -- openssl
ERROR:  While executing gem ... (NoMethodError)
undefined method `invoke_with_build_args' for nil:NilClass 
```

RVM 版本：rvm 1.18.14 和 Ruby 是 2.0.0p0

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T22:25:38.917

你需要重新安装你的红宝石：

```
rvm get head --autolibs=3
rvm pkg remove
rvm reinstall all --force 
```

新的`autolibs`支持将负责更新依赖项并将它们包含在 ruby​​ 中

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T21:35:18.547

你的系统上安装了 Homebrew 吗？如果是这样，请尝试

```
brew install openssl 
```

在命令行中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T21:47:35.110

嗯，你有 rvm 但为什么需要 sudo？我认为 rvm 处于沙盒模式。无论如何，错误只是意味着它找不到 ssl 路径。首先，确保您已安装 openssl。如果没有，那么您需要安装它（brew、macport 等）或`rvm pkg install openssl`让 rvm 管理其路径（您已经拥有 rvm）。之后，您将需要重新安装 ruby​​。RVM 指南在[这里](https://rvm.io/packages/openssl/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T15:07:02.163

你不使用 sudo。sudo 仅用于进行多用户安装，并且仅在初始安装期间使用，并将您的用户添加到 rvm 组（如果安装程序没有为您执行此操作，这通常表明您首先安装错误)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T17:28:47.550

我想到了！

所以首先我删除了与 RVM 相关的所有内容，正如一些答案中所建议的那样。重新启动。安装了最新版本的 Xcode 和 Xcode 的命令行工具（Xcode-prefereces-downloads）。然后再次重启，终于用上了RailsInstaller。一旦我使用了那个轨道，它就会重新启动，世界上一切都很好。感谢大家的帮助。

# python - 使用递归的集合的叉积

> ID：15099647
> 
> 赞同：7
> 
> 时间：2013-02-26T21:29:39.683
> 
> 标签：python, recursion

我编写了以下递归例程来计算两组的叉积。

```
def combine(input1,input2,output):
    if len(input2)==0:
        return output
    else:
       for num in input1:
           output.append((num,input2[0]))
       combine(input1,input2[1:],output)

input1=[1 2 5]
input2=[2 3]
output=[(1,2), (1,3), (2,2),(2,3),(5,2),(5,3)] 
```

是否有可能使递归更好，例如删除 else 中的循环并尝试在相同的函数中执行。我正在寻找解决问题的不同方法。

编辑：不寻找具有内置功能的解决方案。寻找如何以不同的方式进行递归，而不是使用 itertools.product。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T00:34:03.453

我能想到的笛卡尔积的最简单的递归定义是这样的。你可以看到和你的一样，这有一个循环——实际上，两个循环嵌入到列表推导中。与您的不同，这可以处理两个或更多序列：

```
def product(*seqs):
    if not seqs:
        return [[]]
    else:
        return [[x] + p for x in seqs[0] for p in product(*seqs[1:])] 
```

这是一个演练，让您了解它是如何工作的。根据定义，空序列 ( ) 的笛卡尔积`product()`是包含空序列的序列。换句话说，`product()`== `[[]]`-[请参阅此处](http://en.wikipedia.org/wiki/Empty_product)了解原因。

现在假设我们调用`product([1, 2, 3])`--`seqs`是非空的，所以返回值是列表推导的结果。在这种情况下，`product(*seqs[1:])`== `product(*[])`== `product()`== `[[]]`，所以列表推导等价于：

```
[[x] + p for x in seqs[0] for p in [[]] ] 
```

这相当于所有这些：

```
[[x] + [] for x in seqs[0]]
[[x] for x in seqs[0]]
[[1], [2], [3]] 
```

添加另一个序列，我们有`product([4, 5, 6], [1, 2, 3])`. 现在列表推导如下所示：

```
[[x] + p for x in [4, 5, 6] for p in product(*seqs[1:])]
[[x] + p for x in [4, 5, 6] for p in [[1], [2], [3]]]
[[4, 1], [4, 2], [4, 3], [5, 1], [5, 2], [5, 3], [6, 1], [6, 2], [6, 3]] 
```

模式从那里继续；对于每个附加序列，序列中的每个值都被附加到以下序列的笛卡尔积中的每个值之前。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T21:35:12.750

使用迭代工具

```
import itertools

print list(itertools.product(input1, input2)) 
```

从语义上讲，这相当于：

```
for i_1 in input_1:
    for i_2 in input_2:
        for i_3 in input_3:
            ...
                for i_n in input_n:
                    #do something with i_1, i_2, i_3, ..., i_n 
```

其中 n 是您传递给 的参数数量`product`。

# backbone.js - 目的 ＃ 在 Backbone.js 查看 self.el 中没有方法“附加”

> ID：15099648
> 
> 赞同：1
> 
> 时间：2013-02-26T21:29:40.957
> 
> 标签：backbone.js

```
Window.TableView = Backbone.View.extend({ 
    initialize: function() {
    },
    tagName:"tbody",

    render: function() {  
      var self=this;
      console.log(self.el);//will log <tbody></tbody>self.el.append("<tr></tr>");

      return self.el;
    }
); 

tbView=new TableView();
tbView.render(); 
```

如果我建立一个新视图，并调用渲染函数；我会收到错误 Uncaught TypeError: Object # has no method 'append' has no method 'append' ...有没有办法让它工作？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:31:26.187

Backbone[`view.el`](http://backbonejs.org/#View-el)是对原始 DOM 对象的引用，它没有方法`append`。为了使用 jQuery 操作元素，您应该使用缓存的 jQuery 选择器属性[`view.$el`](http://backbonejs.org/#View-%24el)：

```
self.$el.append("<tr></tr>"); 
```

# dynamics-crm-2011 - 如何更新 Dynamics CRM Online 中已部署的插件

> ID：15099650
> 
> 赞同：2
> 
> 时间：2013-02-26T21:29:47.090
> 
> 标签：dynamics-crm-2011

我是 Dynamics CRM Online 编程的新手，在更新已部署的插件时遇到问题。我使用 Visual Studio 2012 作为我的 IDE。我部署了一个需要修改的插件，当我通过 VS 重新部署它时，CRM 中的修改日期是正确的，但更改不存在。这是我的代码..

```
if (context.InputParameters.Contains("Target") 
  && context.InputParameters["Target"] is Entity)
{
  Entity entity = (Entity)context.InputParameters["Target"];
  if (entity.LogicalName == "lead")
  {
    if (entity.Attributes.Contains("companyname") == true)
    {
      if (entity["firstname"].ToString() != "null")
        firstName = entity["firstname"].ToString();
      else
        firstName = "";

      if (entity["lastname"].ToString() != "null")
        lastName = entity["lastName"].ToString();
      else
        lastName = "";

      entity["companyName"] = "This is a test";
      //entity["companyname"] = firstName + " " + lastName;
    }
    else
      throw new InvalidPluginExecutionException(
        "The company name can only be set by the system.");
  }
} 
```

当我创建潜在客户时，公司名称不是“这是一个测试”。我不确定我做错了什么。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:35:20.063

您通过以下方式检测具有公司名称的字段是否存在：

```
if (entity.Attributes.Contains("companyname") == true) 
```

但你写信给另一个人，即：

```
entity["companyName"] = "This is a test"; 
```

该值被放入实体中，但由于它在元数据中没有对应项，因此没有被存储。将字段名称设置为模式名称，即小写。

* * *

如果您遇到其他错误，还需要考虑其他一些事项。

*   设置字段值后，您需要在服务上调用*Update方法。*
*   该字段应该有某种前缀（例如*new_something*，*beep_something*）。
*   骆驼大小写在这里不适用（模式名称是），所以去*alltolowercase*。

你得到的公司名称是什么**？**你得到抛出的异常吗？

* * *

此外，还有一些关于代码质量的指示。我已经重建了逻辑以消除不必要的范围复杂性。我删除了多余的*else*语句和与*true*的比较。我还建议您将流程拆分为不同的方法，但我相信您已经掌握了这一点。您可能希望使用辅助方法从字段中获取值。请参阅[我的建议在这篇文章中](https://stackoverflow.com/questions/15088408/using-querybyattribute-cannot-retreive-null-values/15088968#15088968)。

```
if (!context.InputParameters.Contains("Target") ||
  context.InputParameters["Target"] is Entity)
  return;

Entity entity = context.InputParameters["Target"] as Entity;
if (entity.LogicalName != "lead")
  return;
if (!entity.Attributes.Contains("companyname"))
  throw new InvalidPluginExecutionException(
    "The company name can only be set by the system.");

String firstName = String.Empty;
if (entity.Contains("firstname"))
  firstName = entity["firstname"] as String;

String lastName = String.Empty;
if (entity.Contains("lastname"))
  lastName = entity["lastname"] as String;

entity["companyname"] = "This is a test";
//entity["companyname"] = firstName + " " + lastName; 
```

编辑：

如果您仍然没有得到请求的行为，请尝试以下操作。（我不确定你的专业水平如何，如果你因为我提到一些你已经尝试过无数次的非常基本的东西而感到侮辱，请接受我的道歉。）

技术技巧。

1.  发布所有自定义（我经常这样做**，**以防万一）。
2.  点击`F5`重新加载。
3.  登录/注销。
4.  重新启动 IIS（如果在本地）。
5.  取消注册插件，看看行为是否仍然存在。**然后**重新注册。
6.  检查被遗忘的工作流程是否正在运行。

可能会有一些延迟和滞后。有一次，我实际上同时触发了旧版本和新版本的插件，这取决于我是从*Settings*还是*Workplace*创建记录。这很奇怪，但几个小时后就自行解决了。严重地。**那**很奇怪！

程序化技巧。

1.  检查是否有您可能忘记停用的其他插件。
2.  删除所有线索并确保插件在创建新线索时触发。
3.  将文本更改为例如*I'm a giant moose*，以确保更改通过。
4.  删除所有代码（或将*return放在**Execute*的开头。然后，逐步将其向下移动以检测怪异何时开始。

在您所展示的内容中，它应该可以正常工作，因此要么您没有提及相关内容（当然，我们**感谢**您没有发布 100000 行代码），要么是 CRM 很奇怪（这同样令人讨厌和令人困惑）。所以，让我们解决这个问题。当您尝试上述技巧时会发生什么？

至于代码存根，是的——我对微软在那里的努力并不感到太自豪。*尝试在Programmers*上的 C# 标签下发布该代码以进行代码审查。为愤怒的讨论做好准备。:)

# iphone - scrollToRowAtIndexPath 在 Top 时必须调用两次

> ID：15099654
> 
> 赞同：0
> 
> 时间：2013-02-26T21:30:14.393
> 
> 标签：iphone, ios, objective-c, ipad, cocoa-touch

我有一个 tableView，允许用户使用一些箭头键导航文本字段。但是，当用户位于表格顶部时，必须按下箭头按钮两次，然后第一响应者才会真正改变。第一次单击显示下一个单元格，第二次单击实际上将焦点移动到上面单元格中的 textField。所有其他方向和箭头都可以在焦点更改和滚动发生的地方单击。用户位于底部时除外。同样的事情也会发生。（但是用户不能这样做，因为当用户选择文本字段时我将滚动设置为顶部）

有没有办法即使在桌子的顶部也能获得相同的视觉效果？

我的代码...

```
switch (arrowButton.tag) {
    case UpArrow:
        destinationIndex =  [NSIndexPath  indexPathForRow:currentIndex.row - 1 inSection:currentIndex.section];
        newTag = currentTextField.tag;
        break;
    case LeftArrow:
            // Move back one textField.
        if (currentTextField.tag == CustomerDetailsOrderViewControllerCellLeftTextField) {
            // Selected text field is on left.  Select right textfield in the row above
            destinationIndex = [NSIndexPath  indexPathForRow:currentIndex.row - 1 inSection:currentIndex.section];
            newTag = CustomerDetailsOrderViewControllerCellRightTextField;
        } else {
            // Selected text field is on right.  Select the left textfield in the same row
            destinationIndex = currentIndexPath;
            newTag = CustomerDetailsOrderViewControllerCellLeftTextField;
            }
        break;
    case RightArrow:
        // Move forward one textField.
        if (currentTextField.tag == CustomerDetailsOrderViewControllerCellLeftTextField) {
            // Selected text field is on Left.  Select right textfield
            destinationIndex = currentIndexPath;
            newTag = CustomerDetailsOrderViewControllerCellRightTextField;
        } else {
            // Selected text field is on right.  Select the left textfield in the row below
            destinationIndex = [NSIndexPath  indexPathForRow:currentIndex.row + 1 inSection:currentIndex.section];
            newTag = CustomerDetailsOrderViewControllerCellLeftTextField;
        }
        break;
    case DownArrow:
        destinationIndex =  [NSIndexPath  indexPathForRow:currentIndex.row + 1 inSection:currentIndex.section];
        newTag = currentTextField.tag;
        break;
    default:
        break;
}
[_tableView scrollToRowAtIndexPath:destinationIndex atScrollPosition:UITableViewScrollPositionNone animated:YES];
newTextFieldSelection = (UITextField *)[[_tableView cellForRowAtIndexPath:destinationIndex] viewWithTag:newTag];
[newTextFieldSelection becomeFirstResponder]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:41:41.550

杰西，是动画杀死了你。

*尝试*：

```
 [_tableView scrollToRowAtIndexPath:destinationIndex atScrollPosition:UITableViewScrollPositionNone animated:NO];
    newTextFieldSelection = (UITextField *)[[_tableView cellForRowAtIndexPath:destinationIndex] viewWithTag:newTag];
    [newTextFieldSelection becomeFirstResponder]; 
```

*或*：

```
 [_tableView scrollToRowAtIndexPath:destinationIndex atScrollPosition:UITableViewScrollPositionNone animated:NO];
    newTextFieldSelection = (UITextField *)[[_tableView cellForRowAtIndexPath:destinationIndex] viewWithTag:newTag];
double delayInSeconds = 1.0;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        newTextFieldSelection = (UITextField *)[[_tableView cellForRowAtIndexPath:destinationIndex] viewWithTag:newTag];
        [newTextFieldSelection becomeFirstResponder];
    }); 
```

那些又快又脏。您可以更进一步，在表格的 contentOffset 上使用 KVO，并在动画完成后执行您的 firstResponder 业务。

# jsf - h:commandLink 拒绝调用方法并随机重定向到项目根目录

> ID：15099655
> 
> 赞同：0
> 
> 时间：2013-02-26T21:30:13.993
> 
> 标签：jsf, jsf-2, commandlink

我一直在为这个问题摸不着头脑......我有很多带有工作 commandLink 元素的项目，但是我一辈子都无法让它在这个项目中工作。我在这里关注了 BalusC 的响应：[commandButton/commandLink/ajax action/listener 方法未调用或输入值未更新](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked)到字母，但仍然没有乐趣。

目前，我已将代码简化为尽可能简单：

```
@ManagedBean
@SessionScoped
public class TestBean {

    private @Inject transient Logger logger; 

    public void testEvent(ActionEvent actionEvent) {
        logger.log(Level.INFO, "Event Fired!!");
        return;
    }
} 
```

在我的 xhtml 文件中，我有：

```
<h:form>
   <h:commandLink id="test" actionListener="#{testBean.testEvent}" value="Test Me!"/>
</h:form> 
```

当我单击链接时，不会调用该方法，并且我被重定向到 web-apps 根目录（登录页面，尽管有登录过滤器：/）如果我将链接更改为 commandButton，它会按预期工作。

当前应用程序使用 ui:composition 标记进行模板化，并且我已经三次检查嵌套的 h:form 标记，我没有使用任何 ajax 调用或其他 JS 库。我的模板在重要的地方实现了 jsf 标记，例如 h:head、h:body 等。任何人都可以为我遇到的奇怪行为提供任何指示或可能的原因吗？

最后，我在我的 web 应用程序的各个页面上测试了这个 commandLink，并且 commandLink 元素通常只是拒绝调用。

如果有人感兴趣，这是我链接的编译后的 html：

```
<form id="j_idt26" name="j_idt26" method="post" action="/my-project/webpages/Login.xhtml" enctype="application/x-www-form-urlencoded">
   <input type="hidden" name="j_idt26" value="j_idt26" />
   <a id="j_idt26:test" href="#" onclick="mojarra.jsfcljs(document.getElementById('j_idt26'),{'j_idt26:test':'j_idt26:test'},'');return false">Test Me!</a><input type="hidden" name="javax.faces.ViewState" id="javax.faces.ViewState" value="-109553560791909389:-730254890454894147" autocomplete="off" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:13:48.120

重建项目后，commandLinks 正常工作，我无法在我的新项目中重现该错误。如果我有时间，我将尝试调试我的原始项目并确定原始问题是什么。

# css - 如何在我的内容脚本完成其 DOM 更改之前隐藏页面？

> ID：15099661
> 
> 赞同：0
> 
> 时间：2013-02-26T21:30:32.550
> 
> 标签：css, dom, google-chrome-extension, content-script

我使用内容脚本基本上浏览文档，提取数据，然后用不同的布局但相同的信息重建页面的大块。所以它是一个看起来很糟糕的特定网站的“preffity”扩展。

问题是，chrome 会在内容脚本完成该过程之前继续渲染页面，因此在某些页面加载时，您可以看到原始页面闪烁了几帧，然后被更好的页面替换。

浏览器不会立即开始渲染。您很少看到没有应用 CSS 的网站，因为“它没有及时完成”。有没有办法让渲染也等待内容脚本？我不需要数百毫秒，只需几毫秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:43:07.400

您没有**发布您的 manifest.json**（总是包含这个），但最可能的原因是您的脚本是[content script 的默认随机触发时间的](http://developer.chrome.com/extensions/content_scripts.html#run_at)受害者。

可能，您需要做的只是在清单中设置`run_at`为。`document_end`

* * *

* * *

但是，如果您绝对肯定在更改完成之前不会显示任何内容，则需要使用多步骤方法：

1.  为您的扩展创建一个 CSS 文件并将其保存为`hide_at_start.css`：

    ```
    body {
        display:    none;
    } 
    ```

    请注意，在极少数情况下，您可能需要使用`display: none !important;`

2.  添加`hide_at_start.css`到您的清单并将清单设置为`run_at` `document_start`：

    ```
    {
        "manifest_version": 2,
        "content_scripts": [ {
            "js":               [ "YOUR_CONTENT_SCRIPT.js" ],
            "css":              [ "hide_at_start.css" ],
            "matches":          [ "http://YOUR_SERVER.COM/YOUR_PATH/*"
                                ],
            "run_at":           "document_start"
        } ],
        "description":  "Blanks a page until our content script is done",
        "name":         "Blank at Start",
        "version":      "1"
    } 
    ```

3.  在您的内容脚本中，任何操作页面上元素的代码都必须等待 DOM 存在`interactive`并且该元素就位。所以修改`YOUR_CONTENT_SCRIPT.js`如下：

    ```
    document.addEventListener ('DOMContentLoaded', onDOM_Ready, false);

    function onDOM_Ready () {
        contentScript_main ();

        //-- Make page visible again.
        document.body.style.setProperty ("display", "inherit", "important");
    }

    function contentScript_main () {
        // PUT YOUR CODE, THAT ALTERS PAGE ELEMENTS, HERE.
    } 
    ```

    此外，如果您的目标内容是在页面加载后通过 AJAX 添加的，则内容脚本必须对这些元素使用额外的策略（计时器、事件侦听器、突变观察器等）。

4.  最后，如果您的代码需要元素的渲染尺寸或位置（不太可能），请使用`visibility: hidden;`而不是`display: none;`.

# magento - 我将如何编辑这个垂直导航菜单 - MAGENTO

> ID：15099663
> 
> 赞同：0
> 
> 时间：2013-02-26T21:30:40.517
> 
> 标签：magento, navigation

行。我现在要做的就是将图像添加到导航栏的顶部。

我对我现在拥有的和我正在努力实现的目标进行了照片处理。

这是[我的网站](http://www.theshirt.org)

这是magento中[导航模块的链接](http://www.magentocommerce.com/magento-connect/vertical-navigation-with-css-classes.html)

谢谢你们在这里总是乐于助人！

![我现在拥有的](../Images/87fc9a08055647c6b658dabbef3490d7.png)

![这就是我想要的](../Images/c0546f5d20ecaa02a96669cd39d406c1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:03:10.303

我觉得这个问题有点具体，因为它与特定的插件有关。我建议您使用模板路径提示来找出您必须编辑的文件。您可以在 System/Configuration/Developer/Debug/Template Path Hints 中为特定商店视图启用模板路径提示。仅当您在左列顶部的当前配置范围中启用特定商店视图时，才会出现此选项。它将在前端的块周围显示提示。您可能还会找到有用的官方 magento 设计指南： http: [//www.magentocommerce.com/design_guide/](http://www.magentocommerce.com/design_guide/)

# asp.net - 对齐同一行上的两个元素

> ID：15099669
> 
> 赞同：0
> 
> 时间：2013-02-26T21:30:58.640
> 
> 标签：asp.net, html, css

我有一个 asp.net 网页，为了视觉目的，我试图将两个元素对齐在同一行。第一个元素是带有页面标题的 span 元素。在同一行的最右侧，我想显示一个注销链接（用于链接的元素是 asp:linkbutton，它在方法后面的页面上调用注销方法）这会导致注销链接移动到下一行（最右边）。如何调整 css 或 html 来做我想做的事。

我现在看到的是

```
 Page Title
                                                                             Logout 
```

我想要的是

```
 Page Title                                                   Logout 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:37:59.437

**标记：**

```
<div id="title">
    Page Title
</div>
<div id="logout">
    Logout
</div> 
```

**CSS：**

```
#title{
width: 200px;
float: left;
}

#logout{
width: 200px;
float: left;
} 
```

[http://jsfiddle.net/s9tFY/](http://jsfiddle.net/s9tFY/)

根据需要调整宽度和样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:41:26.673

[http://jsfiddle.net/9wY5m/2/](http://jsfiddle.net/9wY5m/2/)

```
.logoutlink {float: right;}
#Label1 {float: left;} 
```

请注意，我已经删除了 .logoutlink 上的大边距。

# r - Dataframe, Sum, Mean 帮助：如何求和和平均矩阵？

> ID：15099671
> 
> 赞同：1
> 
> 时间：2013-02-26T21:31:03.530
> 
> 标签：r, sum, dataframe, mean

我需要对数据框、求和和平均命令的解释如果运行下面的代码，我可以获得数据文件列表`Preplist`。然而，由于一些错误，我需要解释的命令不起作用。

我的猜测是我加载的数据没有数据框，而只是每个数据文件的数字列表。为了对每个数据文件求和或取平均值，我需要数据框。（当我检查行数时，除了 NULL 之外什么都没有）。

我想我需要为加载的数据（200x200 矩阵）制作数据框，并且在原始数据中必须忽略第一行和第一列。

这是我的代码：

```
Prepfiles <- list.files(pattern=".csv")
Preplist <- lapply(Prepfiles, read.table, sep = '\t', 
                  na.string = '', header = TRUE, skip=1)
bigPreplist <- do.call(rbind, Preplist) 
```

我需要立即加载数据并绘制数据（将每三个数据文件相加并绘制）。但是，我无法运行命令`sum()`并`mean()`使用我的`Preplist[1:24]`

我使用的都是 200 x 200 矩阵中的数字。有 24 个数据文件。另外，我想在加载数据时保留 200 x 200 矩阵形式，但是通过我的编码，如果我检查`nrow(Preplist[1])`是否可以在加载数据时保留相同的数据框，则没有行数？还是我必须制作新的数据框？

以下是我使用 sum 和 mean 命令得到的错误：

```
> nrow(Preplist)
NULL
> sum(Preplist[1])
Error in sum(Preplist[1]) : invalid 'type' (list) of argument
> mean(Preplist[1])
[1] NA
Warning message:
In mean.default(Preplist[1]) :
  argument is not numeric or logical: returning NA 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:59:46.217

在这里查看和的帮助很有用`[`（`[[`它们是同一页面）

引用相关部分（如`prepList`列表）

> ### 递归（类列表）对象
> 
> [ 索引类似于原子向量并选择指定元素的列表。
> 
> [[ 和 $ 都选择列表的单个元素。主要区别在于 $ 不允许计算索引，而 [[ 允许。x$name 等价于 x[["name", exact = FALSE]]。此外，[[ 的部分匹配行为可以使用精确参数来控制。

所以，

```
prepList[1] 
```

选择长度为 1 的列表。此列表的第一个元素将是您的`data.frame`

```
preplist[[1]] 
```

将选择第一个元素`prepList`是您想要的 data.frame。

话虽这么说，我不确定你是否真的想要取 a 的平均值或总和`data.frame`，你会想确保这些返回你想要的。

例如

```
prepList <- list(data.frame(a=1:5,b=2:6), data.frame(a=2:6,b=1:5))

# this will give a warning
mean(prepList[[1]])

## a b 
## 3 4 
## Warning message:
## mean(<data.frame>) is deprecated.
## Use colMeans() or sapply(*, mean) instead. 

## this will give a single number

sum(prepList[[1]])

## 35 
```

如果您想要每个 data.frame 的列均值`prepList`或每列的总和，请使用`colMeans`,`colSums`或 with mean 的嵌套版本`lapply`，

```
eg 
library(data.table)
rbindlist(lapply(prepList, function(x) lapply(x, mean)))

##    a b
## 1: 3 4
## 2: 4 3 
```

或使用`plyr`和`ldply`

```
library(plyr)
 ldply(prepList, function(x) {sapply(x, mean)}) 
```

或将自己限制为数字列

使用 plyr

```
ldply(prepList,  numcolwise(mean)) 
```

使用过滤器

```
rbindlist(lapply(prepList, function(x) lapply(Filter(is.numeric,x), mean))) 
```

# python - 如何让 Python 记住类之间的用户输入？

> ID：15099672
> 
> 赞同：0
> 
> 时间：2013-02-26T21:31:04.007
> 
> 标签：python

我是一个初学者，像许多初学者一样从事基于文本的游戏。我正在使用 Learn Python The Hard Way 中使用的游戏结构，其中游戏的每个场景都是它自己的类。这就是我的意思： http: [//learnpythonthehardway.org/book/ex43.html](http://learnpythonthehardway.org/book/ex43.html)

我的问题：我希望玩家通过提示来命名主角，并在整个游戏中记住和回忆这个名字。如上图，游戏的进程是通过一系列的类。使用目前我所知道的唯一输入记忆方法，从用户的原始输入接收到的名称只记忆一个类（场景），然后在下一个类中忘记。我什至不知道从哪里开始弄清楚如何解决这个问题，以便该名称将在整个游戏/系列课程中继续存在 - 要搜索哪些术语，要研究什么等等。

我现在知道的唯一记住/回忆名字之类的方法是

```
name = raw_input ("Name: ")
print "My name is %s" % name 
```

之类的事情。这不会通过课程继续下去，所以它被下一个“场景”遗忘了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:34:17.613

非常普遍：显然，您需要将这些数据保存在课堂之外。您可以通过以下几种方式之一执行此操作：

1.  您可以将其保存到全局变量中

2.  您可以将其保存到一个单独的类或变量中，然后传递。

对你来说更多的是一个哲学问题：你的游戏中作为“场景”的“事物”需要用户的名字吗？听起来这个提示属于其他地方。您将事物划分为“属于”在一起的类。也许有一个“用户”类？

# java - Google App Engine 使用 appcfg.sh 进行回滚

> ID：15099674
> 
> 赞同：3
> 
> 时间：2013-02-26T21:31:14.220
> 
> 标签：java, google-app-engine

由于部署失败，我正在尝试回滚，我的服务器代码在 java 上，而且我正在使用 App Engine Eclipse 插件。我的 appcfg.sh 文件位于`/Applications/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.5/appengine-java-sdk-1.7.5/bin/appcfg.sh`

* * *

但是当我尝试这个时我得到“找不到命令”`sudo /Applications/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.5/appengine-java-sdk-1.7.5/bin/appcfg.sh rollback /Documents/workspace/server_side/war`

我无法意识到出了什么问题。我不知道是否是正确的 appcfg，因为有 appcfg.cmd 和 appcfg.sh，我使用的是 imac(Unix enviro)，所以我使用 appcfg.sh 进行回滚。我尝试了几种不同的方式。并没有什么好事发生。也许我错过了一些东西。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T10:49:58.857

默认没有执行权限：

```
-rw-r--r--  1 yorkw  staff   558 11 Dec 06:01 appcfg.sh 
```

运行`chmod 755 appcfg.sh`更改权限：

```
-rwxr-xr-x  1 yorkw  staff   558 11 Dec 06:01 appcfg.sh 
```

然后你应该能够在终端中运行它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-13T22:34:44.793

我也遇到了与这个问题的原始发帖人相同的问题，但是在尝试回滚时，即使更改了 appcfg.sh 文件的权限，我仍然遇到权限被拒绝的错误。

原来我还需要 chmod 755 run_java.sh（与 appcfg.sh 位于同一目录中），然后我能够毫无问题地回滚。

我想我会发布这个，以防有人遇到和我一样的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-25T19:56:30.107

对于任何偶然发现这一点并想要更多细节的人......

在终端中转到 GAE-SDK-PATH/bin（appcfg.sh 所在的位置），例如：

> /Applications/Eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.8.3/appengine-java-sdk-1.8.3/bin

您可能没有使用 appcfg.sh 启用权限，所以如果您在 bin 目录类型中收到“权限被拒绝”，请执行@yorkw 建议的操作：

> chmod 755 appcfg.sh

然后回滚类型

> ./appcfg.sh --email=PROJECT_EMAIL --passin 回滚 ROOT_PROJECT_FOLDER/war

系统将提示您输入项目电子邮件的密码，然后它应该可以工作了！谷歌文档：[https ://developers.google.com/appengine/docs/java/tools/uploadinganapp](https://developers.google.com/appengine/docs/java/tools/uploadinganapp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-27T10:15:42.873

也许你做了和我一样愚蠢的疏忽，一开始就省略了“sh”？IE

```
sh /Applications/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.5/appengine-java-sdk-1.7.5/bin/appcfg.sh rollback /Documents/workspace/server_side/war 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-22T07:45:44.440

***在OSX***上使用以下命令。注意***appcfg.sh 默认没有执行权限***，所以需要通过**chmod**添加。

```
cd /Users/Labuser/Downloads/appengine-java-sdk-1.9.22/bin

chmod 755 appcfg.sh

sh appcfg.sh rollback /Users/Labuser/Ducuments/AndroidWS/AndroidStudioProjects/AndroidProject/modulebackend/src/main/webapp/ 
```

# jquery - jQuery：将css添加到父级

> ID：15099676
> 
> 赞同：0
> 
> 时间：2013-02-26T21:31:24.513
> 
> 标签：jquery

我有以下 HTML：

```
<div class="control-group">
            <input value="" id="email" name="email" type="text" placeholder="E-mail"/> <span class="help-inline"></span>
          </div> 
```

和下面的jQuery：

```
var input = $(this);

$.getJSON("/email", { email: data }, function(json){
                if(json.valid == true){
                    input.parent().addClass("success");
                }
            }); 
```

如何将“成功”类添加到 div 控制组？另外，如何将内容添加到帮助内联范围？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:38:04.753

如果您的代码没问题，添加类`.control-group`是正确的

并向 中添加内容`.help-inline`，您可以使用`.next()`like...

```
input.next(".help-inline").html("your text"); 
```

或者...

```
input.next(".help-inline").html("your text").parent().addClass("success"); 
```

**完整代码：**

```
var input = $(this);

$.getJSON("/email", { email: data }, function(json){
                if(json.valid == true){
                    input.parent().addClass("success");
                    input.next(".help-inline").html("your text");
                }
}); 
```

# php - drupal 6 php数组数组不起作用

> ID：15099678
> 
> 赞同：0
> 
> 时间：2013-02-26T21:31:28.387
> 
> 标签：php, arrays, drupal, drupal-6

我正在尝试将值从表中放入名称数组中，并且数组条目相互覆盖

代码：

```
$list = array();
$name = db_query("SELECT name FROM {name_list}");
while ($num = db_fetch_array($name)){
$list[$num['name']]=array('title'=>$num['name']);
}
$values = db_query("SELECT id,name1,name2 FROM {status}");
while ($val = db_fetch_array($values)){
$list[$val['name1']] = array($val['id'] =>$val['id']);
$list[$val['name2']] = array($val['id'] =>$val['id']);
}
$output .= dprint_r($list); 
```

第一个 while 循环写入每个数组的标题，它们是 name db 表中的名称。
桌子：

```
name
Alice
Kate
Jason
John
Sam 
```

第二个 while 循环进入状态表，如下所示：

```
id name1 name2
1   Alice Kate
2   Jason Kate
3   Kate  Alice
4   Jason John 
```

最终的数组应该类似于：
Alice 数组 ( 1,3);
杰森数组（2,4）；
凯特数组（1,2,3）；
山姆数组 ( );
ETC...

相反，它看起来像
爱丽丝（3）杰森（4）凯特（3）等......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:35:02.590

虽然我没有用于测试错误的 Drupal，但似乎很清楚。使用`[]`运算符将​​元素推送到 id-per-name 数组的末尾。尝试 ：

```
$list = array();
$name = db_query("SELECT name FROM {name_list}");
while ($num = db_fetch_array($name)){
    $list[$num['name']]=array(); // initialize as empty array. you won't need the name
                                 // twice as its already the index to $list
}
$values = db_query("SELECT id,name1,name2 FROM {status}");

while ($val = db_fetch_array($values)){
    $list[$val['name1']][] = $val['id']; // add id to the first name's list
    $list[$val['name2']][] = $val['id']; // add id to the second name's list
} 
```

# javascript - jQuery 是否有用于 mouseenter 或 mouseout 的 on/live hover 功能？

> ID：15099682
> 
> 赞同：0
> 
> 时间：2013-02-26T21:31:36.313
> 
> 标签：javascript, jquery

我基本上在 <li> 的项目上遇到了一些麻烦，我正在运行一个插件，该插件会动态地将数据标签 ID 添加到 data-* 属性中。

由于某种原因，这意味着所有项目都是动态添加的，而我在相同列表元素上运行的另一个函数将不会运行，因为该事件不是动态附加的。

发生的情况是：1）页面呈现 2）我的“其他”功能在 DOM 加载时可用 3）页面加载，插件代码可用，但我的“其他”功能（它添加了一个来自下方的悬停框标题和动画）不再起作用。所以它基本上可以工作，直到另一个插件启动。

到目前为止，我的发现是：

我可以使用 jQuery 'on' 将事件动态附加到动态编辑/创建的项目（#stage li 项目）。使用这个：

```
$('body').on('hover', '#stage li', function() {
    // Do dynamic stuff
} 
```

但这仅适用于 1 次悬停，并没有为我提供我真正需要的 mouseenter/mouseout 解决方案。有没有人对如何做到这一点有任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:35:12.330

是的：

```
$('#stage').on({
    mouseenter: function(){
        // do mouseentery shtuff
    },
    mouseleave: function(){
        // mouse bye bye
    }
},'li'); 
```

将 .on() 事件绑定从那里更改`body`为`#stage`并从那里过滤`li`，因为它会更快。

以这种方式（XML 方式）这样做很酷的一点是，您可以轻松地向其中添加更多内容……添加 mousemove 函数只是同一项目中的另一个逗号和函数，所有内容都包含在一个 .on 中（） 捆绑。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:35:47.047

这就是您要查找的内容。另外，请注意，从 jQuery 1.9 开始不再支持悬停

```
$('mydiv').on('mouseenter', '#stage li', function( event ) {
    // do something
}).on('mouseleave', '#stage li', function( event ) {
    // do something different
}); 
```

# python - 列表聚合列表的python字典

> ID：15099683
> 
> 赞同：0
> 
> 时间：2013-02-26T21:31:39.950
> 
> 标签：python, list, dictionary

我有可用的时间序列字典，我需要计算每个键的所有值，最有效的方法是什么？

> 数据 = {u'604'：[[1361836800，{u'14885549'：52，u'91478624'：127，u'25581439'：12，u'532617990'：4}]，[1361833200，{u'14885549 ': 38, u'91478624': 204, u'25581439': 14, u'40302362': 5, u'532617990': 2}]]}

我尝试这样做是在这里（这肯定是白痴但有效）：

```
total = 0
for i in DATA:
    for j in DATA[i]:
        for k in j[1]:
            total += j[1][k] 
```

请帮忙？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T21:35:37.713

`sum()`与发电机一起使用：

```
total = sum(sum(inner[1].values()) for outer in DATA.values() for inner in outer) 
```

这在行为上等同于以下 for 循环：

```
total = 0
for outer in DATA.values():
    for inner in outer:
        total += sum(inner[1].values()) 
```

# java - 我的用户输入出现“非法开始表达”错误

> ID：15099685
> 
> 赞同：2
> 
> 时间：2013-02-26T21:31:44.007
> 
> 标签：java

我正在尝试获取用户输入，但是我正在 `illegal start of expression` ：

```
public static String askTheUser() throws IOException 
```

完整代码：

编辑：我已经做了你们建议的大部分更改，所以现在我有了这个：

```
import java.io.BufferedReader;

public class Driver
{

public static void main(String[]args)
{
    Dice dice;
    Craps craps;

    userResponse = askTheUser();
    while(userResponse.equalsIgnoreCase("yes"))
    {
        craps = new Craps();
        while(!craps.gameOver())
        {
            craps.roll();
            //print out results of roll
        }
        //print out game results: if(craps.gameWon()...
        userResponse.askTheUser();
    }
}

public static String askTheUser() throws IOException
{
    BufferedReader dataIn = new BufferedReader( new InputStreamReader(System.in) );
    String data;

    System.out.print("Want to play craps? Yes or No");
    data = dataIn.readLine();
    if(data.equals("y") || data.equals("yes"))
    {
        return "yes";
    }
    else
    {
        return "no";
    }
}
} 
```

但是我仍然`cannot find symbol`在`public static String askTheUser() throws IOException`. 那么我可能会错过一个我不知道的进口吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T21:32:57.670

您`askTheUser`在**main 方法中声明了方法**。`rip it`退出主要方法。

```
 public static void main(String[]args)
   {
       //code that goes inside main
   }
   public static String askTheUser() throws IOException
   {
       // code that goes in askTheUser
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:33:23.630

您**不能**在`Java`. 但是你可以在同一个类中有很多方法。

为什么？由于`Java`规格..您根本不允许这样做。

*请注意，您可以`anonymous inner class`在另一种方法下使用 with 方法。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:37:21.730

而且我认为keyboard.readline() 不起作用？

采用：

```
InputStreamReader converter = new InputStreamReader(System.in);
BufferedReader in = new BufferedReader(converter);
in.readLine(); // Convert to string or int needed! 
```

# ajax - 如何显示动态 Primefaces 组件的 ajaxstatus

> ID：15099688
> 
> 赞同：3
> 
> 时间：2013-02-26T21:31:59.013
> 
> 标签：ajax, jsf, primefaces

我注意到几乎所有将“动态”属性设置为“真”的 PF 组件只会在短暂延迟后显示（这是可以理解的），也不会触发 ajax 启动/停止事件。

这是我的（完美运行的）Ajax 状态组件，为简洁起见省略了实际的对话框内容：

```
<p:ajaxStatus onstart="statusDialog.show();" onsuccess="statusDialog.hide();" onerror="errorDialog.show();"/> 
```

这是一个动态加载的对话框。它需要从 backing beans 获取数据：

```
<p:dialog modal="true" widgetVar="confDialog" position="center" id="confD" dynamic="true">
<p:panelGrid>
<p:row>
    <p:column>
        <h:outputText value="Date"></h:outputText>
    </p:column>
    <p:column>
        <h:outputText value="#{myBean.currentDate}">
            <f:convertDateTime locale="#{myBean.currentLanguage}" type="both" dateStyle="full" timeStyle="full" timeZone="#{myBean.currentTimeZone}"></f:convertDateTime>
        </h:outputText>
    </p:column>
</p:row>
</p:panelGrid>
<p:commandButton value="Close" type="button" onclick="confDialog.hide();">
</p:commandButton>
</p:dialog> 
```

执行某些操作并显示动态加载的确认对话框的命令按钮：

```
<p:commandButton value="Do it" type="submit" ajax="true" process="@form"
                action="#{bean.processForm}"
                oncomplete="if(!args.validationFailed){confDialog.show();}"
                update="confD @form"/> 
```

当命令按钮将数据提交到支持 bean 并取回数据时，将显示 Ajax 状态对话框。然后ajax状态对话框消失，有1-2秒的延迟，显示确认对话框。

动态加载的选项卡（在 PF tabView 组件中）也会发生同样的情况。

为什么在动态组件加载期间不显示我的 ajax 状态对话框？我该如何展示它？

编辑：

感谢@partlov，我通过将 JQ ajax 启动/停止处理程序添加到动态加载的对话框中找到了一个不覆盖 PF 函数的解决方案：

```
jQuery(document).ready(function() {
 confDialog.getJQ().ajaxStart(function(){statusDialog.show()});
 confDialog.getJQ().ajaxStop(function(){statusDialog.hide()});
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T22:24:06.390

正如 Primefaces 文档中所写的那样，它`<p:ajaxStatus>`只是拦截全局 AJAX 请求，而这个请求不是全局的。没有简单的方法可以做到这一点。由于对话框的加载时间很短，我真的没有看到这一点。我认为唯一的解决方案是重载 Primefaces 对话框 JavaScript 方法。

Primefaces`loadContents()`在加载对话框内容时调用方法，因此您可以为此覆盖此方法。我不建议您这样做，因为这是未记录的，并且可以在 Primefaces 的未来版本中进行更改：

```
jQuery(document).ready(function() {
  var oldLoadContents = PrimeFaces.widget.Dialog.loadContents;
  PrimeFaces.widget.Dialog.loadContents = function() {
    statusDialog.show();
    oldLoadContents();
  }
}); 
```

这应该会显示您的动态加载对话框。您可以使用`onShow`属性`p:dialog`关闭对话框：

```
onShow="statusDialog.hide()" 
```

# css - 在 CSS3 中创建带有斜边的渐变条

> ID：15099692
> 
> 赞同：0
> 
> 时间：2013-02-26T21:32:03.833
> 
> 标签：css

我正在尝试创建这个渐变填充框，它在 CSS 中有一个倾斜的右侧并且失败了。这可能吗？

![CSS 渐变 - 图解](../Images/10c607ea188d88509154eef6e4a2129c.png)

盒子需要坐在图像上，所以直角需要透明度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:45:02.657

看看[这里，小提琴！](http://jsfiddle.net/mDB2h/)您可以只填充渐变，然后调整`border-right`和`border-left`值以及`left`调整角度形状的值。

HTML：

```
<div></div> 
```

CSS

```
div {
    height: 100px;
    width: 300px;
    background: blue;
}
div:after {
    content: '';
    display: block;
    width: 0;
    height: 0;
    left: 260px;
    position: absolute;
    border-top: 0px solid transparent;
    border-right: 50px solid transparent;
    border-bottom: 101px solid white;  // Make this say red instead of white to see whats going on
    border-left: 50px solid transparent;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:22:03.787

[Jsfiddle 演示](http://jsfiddle.net/Matt_Coughlin/QFUKU/2/)，使用@psu 建议的倾斜内容掩码。测试：IE9/10、Firefox、Chrome、Safari、Opera。

在这种情况下，内部蒙版是倾斜的而不是旋转的，这看起来更简单。

**HTML**

```
<div class="main">
    <div class="outer-mask">
        <div class="skewed-mask">
            <div class="gradient"></div>
        </div>
    </div>
</div> 
```

**CSS**

```
.main {
    width: 500px;
    height: 200px;
    position: relative;
    background: #ddd url(//upload.wikimedia.org/wikipedia/commons/2/20/Background_repeat_unit.png) repeat-y -10px top;
}
.outer-mask {
    position: absolute;
    left: 75px;
    top: 45px;
    width: 330px;
    height: 110px;
    overflow: hidden;
}
.skewed-mask {
    position: absolute;
    left: -20px;
    top: 0px;
    width: 330px;
    height: 110px;
    overflow: hidden;
    -webkit-transform: skew(-20deg, 0deg);
        -ms-transform: skew(-20deg, 0deg);
         -o-transform: skew(-20deg, 0deg);
            transform: skew(-20deg, 0deg);
}
.gradient {
    position: absolute;
    left: 0px;
    top: 0px;
    width: 330px;
    height: 110px;
    background-color: #234e7b;
    background-image: -webkit-linear-gradient(top, #234e7b, #0d2951);
    background-image:    -moz-linear-gradient(top, #234e7b, #0d2951);
    background-image:     -ms-linear-gradient(top, #234e7b, #0d2951);
    background-image:      -o-linear-gradient(top, #234e7b, #0d2951);
    background-image:         linear-gradient(top, #234e7b, #0d2951);
} 
```

请记住，这不适用于 IE8 及更早版本。

# jsf - 分页后如何刷新数据表动态列

> ID：15099697
> 
> 赞同：1
> 
> 时间：2013-02-26T21:32:26.673
> 
> 标签：jsf, jsf-2, primefaces

我使用 primefaces 3.1，并且我有一个显示分页数据的数据表，其列是根据页面数据构造并通过`<p:columns/>`标签呈现的。使用这种方法，同一个数据表的不同页面可以有不同的列。我认为默认情况下它会在分页上重新渲染列，但事实并非如此。我试过了`<p:ajax event="page" update="myTable"/>`，`<p:ajax event="page" update="myTableContainer"/>`运气不错。

有没有办法在触发分页时重新渲染整个数据表，所以不仅内容而且列标题都正确显示？

**编辑：**这是您要求的一些代码示例。

我自己实现了 LazyDataModel 并扩展了它，覆盖了 load 方法的实现：

```
@Override
public List<StockItem> load(int i, int i1, String string, SortOrder sortOrder, Map<String, String> map) {
    List<StockItem> stockItems = super.load(i, i1, string, sortOrder, map);
    inventoryMovements = service.listInventoryMovements(stockItems, fromDate, toDate);
    stockOperations = new HashSet<StockOperation>();
    quantityTypes = new HashSet<QuantityType>();
    for (Map.Entry<StockItem, ItemMovements> entry : inventoryMovements.entrySet()) {
        quantityTypes.addAll(entry.getValue().getStartingQuantities().keySet());
        quantityTypes.addAll(entry.getValue().getEndingQuantities().keySet());
        stockOperations.addAll(entry.getValue().getOperationsApplied().keySet());
    }
    return stockItems;
} 
```

正如您在该方法中看到的那样，我`stockOperations`在`quantityTypes`每个页面加载时都填写。这两个对应于我的实际页面列。（这些是我的 LazyDataModel 实现中的属性及其相应的 getter）

```
<p:dataTable id="movementsTable" var="item" 
                                 value="#{inventoryMovementsBean.view}" 
                                 rowIndexVar="rowIndex" 
                                 paginator="true"
                                 rows="25">
                        <p:column headerText="Item">
                            <h:outputText value="#{item.label}" />
                        </p:column>
                        <p:columns value="#{inventoryMovementsBean.view.quantityTypes}" var="quantityType" columnIndexVar="quantityTypeIndex">
                            <f:facet name="header">
                                #{quantityType.description}
                            </f:facet>
                            <h:outputText value="#{inventoryMovementsBean.view.getStartingQuantity(item, quantityType)} => #{inventoryMovementsBean.view.getEndingQuantity(item, quantityType)}" />
                        </p:columns>
                        <p:columns value="#{inventoryMovementsBean.view.stockOperations}" var="stockOperation" columnIndexVar="stockOperationIndex">
                            <f:facet name="header">
                                #{stockOperation.name}
                            </f:facet>
                            <h:outputText value="#{inventoryMovementsBean.view.getOperationValue(item, stockOperation)}" />
                        </p:columns>
                    </p:dataTable> 
```

inventoryMovementsBean.view 是我的 LazyDataModel 实例，getOperationValue(item, stockOperation)、getStartingQuantity(item, quantityType) 和 getEndingQuantity(item, quantityType) 方法是给定项目和列的内容。

我已经进行了调试，我很确定整个数据都正确加载了，这只是一个显示问题。以下是一些屏幕截图作为附加信息。

![初始渲染](../Images/3f905a85539735dcf729d8936ba21589.png) ![分页后的实际渲染](../Images/0f6a9908e64d28788b0ee9e008d3b90d.png) ![分页后的预期渲染](../Images/95de6f6404ccdbab582527a91e98b13e.png)

这些图像对应于：

*   初始渲染（第 1 页）。
*   分页后的实际渲染（第3页）
*   分页后的预期渲染（第3页）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T04:54:24.743

如果你使用 Primefaces，有一个选项，比如lazyLoading。如果你指定 true，那么所有客户端的东西都将在服务器端处理。更多

[http://www.primefaces.org/showcase/ui/datatableLazy.jsf](http://www.primefaces.org/showcase/ui/datatableLazy.jsf)

# arrays - Matlab 填充一个 3 维数组。

> ID：15099698
> 
> 赞同：1
> 
> 时间：2013-02-26T21:32:26.953
> 
> 标签：arrays, matlab, multidimensional-array

我对 Matlab 很陌生，正在尝试填充一个 3 维数组。基本上我`1x81`在一个矩阵中有 4 个我想要的`4x1x81`矩阵。我尝试使用 for 循环将每个都拼接`1x81`成一个`4x1x81`，但到目前为止还没有任何运气。我敢肯定有一个更简单的方法，但需要一双新的眼睛。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:49:41.753

你到底尝试了什么？`matrix(1,1,:)=myvector;matrix(2,1,:)=anotherone;`或者用循环变量替换第一个索引的循环怎么样？考虑

```
>> m(1,1,:)=rand(1,3)
m =
(:,:,1) =
    0.3478
(:,:,2) =
    0.0276
(:,:,3) =
    0.5313 
```

出于好奇，4x81 矩阵有什么问题？（如果您已经有一个，`permute`可能会帮助您获得一个 4x1x81 3d 数组。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:47:33.253

我会给你一个例子，然后你应用同样的技术。您必须使用`colon`or`:`运算符来完成此任务。

```
a=1;b=2;c=3; 
```

那么一个3-D矩阵可以形成为：

```
new3D_Mat(:,:,1)=a;
new3D_Mat(:,:,2)=b;
new3D_Mat(:,:,3)=c;

Output:

>> new3D_Mat

new3D_Mat(:,:,1) =

     1

new3D_Mat(:,:,2) =

     2

new3D_Mat(:,:,3) =

     3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T03:45:35.193

为什么要使用`4x1x81`矩阵？`4x81`看看从四个矩阵创建一个矩阵是多么容易`1x81`。

```
% Matrix of all ones
a = ones(1, 81);

% Matrix of all twos
b = ones(1, 81); 
b = b .*2;

% Matrix of all threes
c = ones(1, 81); c = c .*3;

% Matrix of all fours
d = ones(1, 81); d = d .*4;

% Aggregate
all_of_em = [a; b; c; d]; 
```

运行`whos`以查看您的变量。

```
Name           Size            Bytes  Class     Attributes

a              1x81              648  double              
all_of_em      4x81             2592  double              
b              1x81              648  double              
c              1x81              648  double              
d              1x81              648  double 
```

# for-loop - Windows Batch For Loop：遇到以下代码问题

> ID：15099699
> 
> 赞同：0
> 
> 时间：2013-02-26T21:32:28.143
> 
> 标签：for-loop, batch-file

```
 set checker=0

for %%a in (%namelist%) do (
:startLoop
    findstr "completed" %%a_Logs.txt
    IF ERRORLEVEL 1 (
        IF %checker%==120 (
            set checker=0
            goto endLoop
        )
        set /a checker=%checker%+1
        @ping 127.0.0.1 -n 1 -w 1000 > nul
        findstr "ERROR" %%a_Logs.txt
        IF ERRORLEVEL 1 (
            echo Waiting 1 second before rechecking (Max 2 mins)
            echo time elapsed %checker% seconds
            echo.
            goto startLoop
        )
        findstr "ERROR" %%a_Logs.txt
        IF NOT ERRORLEVEL 1 (
            echo ERROR: %%a Error found
            goto endLoop
        )
    )
    findstr "completed" %%a_Logs.txt
    IF NOT ERRORLEVEL 1 (
        echo %%a completed
    )
:endLoop
) 
```

上面这段代码是为了做到以下几点：

1.  解析变量名列表（内容以空格分隔）
2.  检查 %%a_Logs.txt 文件中是否存在“已完成”
3.  如果存在，则迭代，如果不存在，则检查同一文件中的字符串“ERROR”
4.  如果存在 ERROR，则输出 ERROR MSG 并结束迭代
5.  如果未找到 ERROR，则在结束迭代之前继续重新检查接下来的 120 秒

我不断收到以下输出

FINDSTR：无法打开 %a_Logs.txt

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T23:42:38.313

您正在尝试在 FOR 循环中转到标签 - 这根本行不通。FOR 循环执行 GOTO 的那一刻，循环终止，FOR 上下文丢失。所以你的`%%a`FOR 变量不再被定义。IF 语句也会发生类似的问题，如[(Windows 批处理) Goto inside if block 中所述，它的行为非常奇怪](https://stackoverflow.com/q/8481558/1012053)。

当您尝试`%checker%`在设置值的同一个带括号的代码块内展开时，您也会遇到问题。这种扩展发生在解析时，整个块被一次解析。因此，您看到的值将始终是输入块之前存在的值。解决方案是启用延迟扩展和使用`!checker!`，而不是`%checker%`.

就个人而言，我可能会对您的代码进行重大更改。但我相信以下最小的更改可以使您的代码工作，假设没有其他错误：

*   启用延迟扩展
*   将您的 DO 循环代码移动到循环外部的例程中，然后让循环调用该例程并将`%%a`其作为参数。CALL 不会中断循环。
*   代替例行公事`%1`_`%%a`
*   代替. `exit /b`_ `goto endLoop`也放在`exit /b`程序的末尾
*   确保 FOR 循环完成时代码不会落入例程。我在 FOR 循环之后使用了 GOTO
*   代替`!checker!`_`%checker%`
*   ***编辑*** *- `)`ECHO 语句中的必须转义*

这是修改后的代码（未经测试）

```
setlocal enableDelayedExpansion
set checker=0
for %%a in (%namelist%) do call :startLoop %%a
goto continue

:startLoop
findstr "completed" %1_Logs.txt
IF ERRORLEVEL 1 (
    IF !checker!==120 (
        set checker=0
        exit /b
    )
    set /a checker=checker+1
    @ping 127.0.0.1 -n 1 -w 1000 > nul
    findstr "ERROR" %1_Logs.txt
    IF ERRORLEVEL 1 (
        echo Waiting 1 second before rechecking (Max 2 mins^)
        echo time elapsed !checker! seconds
        echo.
        goto startLoop
    )
    findstr "ERROR" %1_Logs.txt
    IF NOT ERRORLEVEL 1 (
        echo ERROR: %1 Error found
        exit /b
    )
)
findstr "completed" %1_Logs.txt
IF NOT ERRORLEVEL 1 (
    echo %1 completed
)
exit /b

:continue 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T23:44:28.443

我认为你的 for 循环中的标签把它搞砸了。我只是尝试将循环的内容移动到一个单独的“子例程”中，这样​​就消除了您提到的错误。

试试这个：

```
set checker=0

for %%a in (foo bar baz) do (
    call :loop %%a
)
goto :eof

:loop
set basename=%1
:startLoop
findstr "completed" %basename%_Logs.txt
IF ERRORLEVEL 1 (
    IF %checker%==120 (
        set checker=0
        goto endLoop
    )
    set /a checker=%checker%+1
    @ping 127.0.0.1 -n 1 -w 1000 > nul
    findstr "ERROR" %basename%_Logs.txt
    IF ERRORLEVEL 1 (
        echo Waiting 1 second before rechecking (Max 2 mins)
        echo time elapsed %checker% seconds
        echo.
        goto startLoop
    )
    findstr "ERROR" %basename%_Logs.txt
    IF NOT ERRORLEVEL 1 (
        echo ERROR: %basename% Error found
        goto endLoop
    )
)
findstr "completed" %basename%_Logs.txt
IF NOT ERRORLEVEL 1 (
    echo %basename% completed
)
:endLoop
goto :eof 
```

# c# - 在静态字段中引用自身的类可以被垃圾收集吗？

> ID：15099700
> 
> 赞同：7
> 
> 时间：2013-02-26T21:32:32.840
> 
> 标签：c#, static, garbage-collection, private

```
public class MyClass {
  private static MyClass heldInstance;

  public MyClass() {
    heldInstance = this;
  }
} 
```

假设 MyClass 的实例没有以任何其他方式植根，这里的私有静态引用会阻止它被垃圾收集吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T21:51:04.953

您发布的课程不会被垃圾收集。你可以通过给它一个带有控制台输出的终结器来测试它：

```
public class MyClass
{
    private static MyClass heldInstance;
    public MyClass()
    {
        heldInstance = this;
    }
    ~MyClass()
    {
        Console.WriteLine("Finalizer called");
    }
}
class Program
{
    static void Main(string[] args)
    {
        var x = new MyClass(); // object created

        x = null; // object may be eliglible for garbage collection now

        // theoretically, a GC could happen here, but probably not, with this little memory used
        System.Threading.Thread.Sleep(5000);

        // so we force a GC. Now all eligible objects will definitely be collected
        GC.Collect(2,GCCollectionMode.Forced);

        //however their finalizers will execute in a separate thread, so we wait for them to finish
        GC.WaitForPendingFinalizers();

        System.Threading.Thread.Sleep(5000);
        Console.WriteLine("END");

    }
} 
```

输出将是：

```
END
Finalizer called 
```

这意味着该类仅在应用程序的最终拆卸时被收集，而不是在常规垃圾收集期间。

如果您像这样创建此类的多个实例：

```
var x = new MyClass();
x = new MyClass();
x = new MyClass();
x = new MyClass(); 
```

那么除了最近的一个都将被垃圾收集。

你会得到

```
Finalizer called
Finalizer called
Finalizer called
END
Finalizer called 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T21:57:32.850

垃圾收集器确定哪些对象是*可访问*的，并将收集那些不可访问的。为了确定一个对象是否可达，收集器将从所谓的*根*开始。其中的根是当前在评估堆栈上的东西，还有*静态字段*。收集器将遵循对对象的引用，从根到任何对象，从这样的对象到任何其他对象，依此类推。以这种方式访问​​过的每个对象都是可访问的，因此将保持活动状态。

在您的情况下，静态字段是垃圾收集器的根之一，因此它永远不会收集该字段（间接）引用的任何对象。但是，如果您将该字段设置为，`null`则该字段不再引用该实例，并且*可能*会收集该实例。

# extjs - extjs 的本地存储组合框示例

> ID：15099704
> 
> 赞同：0
> 
> 时间：2013-02-26T21:32:44.007
> 
> 标签：extjs

我是 extjs 的新手，并尝试使以下代码工作：

我按照您的建议尝试了，仍然没有运气：

```
var bookmarks=[];
bookmarks[0] ={id:'111111111', target:'target', title:'title', category:'category', created:'created'};
bookmarks[1] ={id:'22222222222', target:'target', title:'title22222222', category:'category', created:'created'};
localStorage['myapp-bookmarks']=JSON.stringify(bookmarks);

Ext.define("BookMark", {
    extend: 'Ext.data.Model', 
    idProperty: "id",
    fields: ['id','target','title','category','created'] 
});

var bookmarkStore = Ext.create("Ext.data.Store", {
    model: "BookMark",
    autoLoad: true,
    storeId: 'bookmarks',
    proxy: {
        type: 'localstorage',
        id  : 'myapp-bookmarks'
    }
});

// Create the combo box, attached to the above store
Ext.create('Ext.form.ComboBox', {
    fieldLabel: 'Choose State',
    store: bookmarkStore,
    queryMode: 'local',
    displayField: 'title',
    valueField: 'id',
    renderTo: Ext.getBody()
}); 
```

但它不会为我填充列表。任何想法？

# c++ - 如何获取字符串向量中某个元素的位置，将其用作整数向量中的索引？

> ID：15099707
> 
> 赞同：107
> 
> 时间：2013-02-26T21:32:51.800
> 
> 标签：c++

我正在尝试获取向量中元素的索引`strings`，以将其用作另一个`int`类型向量中的索引，这可能吗？

例子：

```
vector <string> Names;
vector <int> Numbers;

 ... 
// condition to check whether the name exists or not
if((find(Names.begin(), Names.end(), old_name_)) != Names.end())  
    {   // if yes
        cout <<"Enter the new name."<< endl;
        cin >> name;
        replace(Names.begin(), Names.end(), old_name_, name);
    } 
```

现在我想获取向量中的位置`old_name`，`Names`以使用它来访问`Numbers`向量中的某些元素。所以我可以说：

```
Numbers[position] = 3 ; // or whatever value assigned here. 
```

我尝试使用：

```
vector <string> :: const_iterator pos;
pos = (find(Names.begin(), Names.end(), old_name_))
Numbers[pos] = 3; 
```

但显然这不起作用，因为`pos`它是字符串类型！

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2013-02-26T21:34:53.443

要在知道指向该元素的迭代器的向量中获取元素的位置，只需`v.begin()`从迭代器中减去：

```
ptrdiff_t pos = find(Names.begin(), Names.end(), old_name_) - Names.begin(); 
```

现在您需要检查`pos`它`Names.size()`是否超出范围：

```
if(pos >= Names.size()) {
    //old_name_ not found
} 
```

向量迭代器的行为类似于数组指针；你所知道的关于指针算法的大部分知识也可以应用于向量迭代器。

从 C++11 开始，您可以使用[`std::distance`](http://en.cppreference.com/w/cpp/iterator/distance)迭代器和指针来代替减法：

```
ptrdiff_t pos = distance(Names.begin(), find(Names.begin(), Names.end(), old_name_)); 
```

* * *

## 回答 #2

> 赞同：97
> 
> 时间：2013-02-26T21:34:42.087

如果你想要一个索引，你可以`std::find`结合使用[`std::distance`](http://en.cppreference.com/w/cpp/iterator/distance).

```
auto it = std::find(Names.begin(), Names.end(), old_name_);
if (it == Names.end())
{
  // name not in vector
} else
{
  auto index = std::distance(Names.begin(), it);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-22T04:27:28.303

我很确定指针算法在此处的应用方式与在数组中的应用方式相同。

```
int getVecPos(std::vector<string> vec, string element){
    int i;
    for(i = 0; i < vec.size(); i++){
        if(vec[i] == element){
            break;
        }
    }
    if(i == vec.size()){
        std::cout<<"No such element as "<<element<<" found. Please enter again: ";
        std::cin>>element;
        i = getVecPos(vec, element);
    }

    return i;
} 
```

您可以将其添加到 vec.begin() 以获取可用于其他向量函数的迭代器，也可用于查找数组中元素的索引。例子：-

```
int getVecPos(std::vector<string>, string);//This was the function from earlier.
std::vector<string> UpdateHealables(std::vector<string> healables, string healing_item){
    auto it = healables.begin() + getVecPos(healables, healing_item);
    healables.erase(it);
    return healables;
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2019-05-10T03:22:29.597

我是初学者，所以这里是初学者的答案。for 循环中的 if 给出 i ，然后可以在需要时使用它，例如另一个向量中的 Numbers[i] 。例如，大多数都是绒毛，for/if 真的说明了一切。

```
int main(){
vector<string>names{"Sara", "Harold", "Frank", "Taylor", "Sasha", "Seymore"};
string req_name;
cout<<"Enter search name: "<<'\n';
cin>>req_name;
    for(int i=0; i<=names.size()-1; ++i) {
        if(names[i]==req_name){
            cout<<"The index number for "<<req_name<<" is "<<i<<'\n';
            return 0;
        }
        else if(names[i]!=req_name && i==names.size()-1) {
            cout<<"That name is not an element in this vector"<<'\n';
        } else {
            continue;
        }
    } 
```

# php - Xpath 上的连接节点

> ID：15099712
> 
> 赞同：0
> 
> 时间：2013-02-26T21:33:10.783
> 
> 标签：php, xpath, domxpath

我有以下html：

```
<td>

  <h1>Headline</h1><br>
  <strong>Subheadline</strong><br>

  Text1<br>
  Text2

  <h2>Subheadline2</h2>
  <div>stuff</div>
  <div>more stuff!</div>

</td> 
```

我试图抓住“Text1”和“Text2”。
在尝试了 Xpath（DOMXPath using php）之后，我
发现`"td/text()[2]"`匹配 Text1
和`"td/text()[3]"`匹配 Text2
我想以某种方式使用 Xpath 连接它们，这可能吗？

我似乎在任何地方都找不到合适的文档。
W3schools 有一些例子，但这还不够。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:41:39.390

我相信， concat() 函数可以完成您想做的事情。类似的东西`concat(/td/text()[2], /td/text()[3])`应该可以工作。

我清理了您的 HTML（制作了所有 <br> 标签 <br/>）并且能够使用 OxygenXML 中的 concat 函数来完成。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T22:14:24.850

好像可以，不过没测试过。
来自 W3 文档 - [http://www.w3schools.com/xpath/xpath_functions.asp](http://www.w3schools.com/xpath/xpath_functions.asp)

```
fn:concat(string,string,...) 
```

返回字符串的连接

示例：`concat('XPath ','is ','FUN!')`
结果：`'XPath is FUN!'`

# jquery - 在 jQuery 中的 $.each 循环中声明变量

> ID：15099713
> 
> 赞同：0
> 
> 时间：2013-02-26T21:33:14.393
> 
> 标签：jquery

我每个循环都有一个简单的 jQuery，我想知道是否可以使用它声明一些变量。像这样的东西：

```
jQuery.each(["var_name1", "var_name2", "var_name3"], function(){
  $[this] = this;
}); 
```

类似于 php 中的变量 varbiale。

我知道我可以将所有内容存储在一个对象中，但这对我没有帮助。

有任何想法吗？

编辑：

```
jQuery.each(["var_name1", "var_name2", "var_name3"], function(key, val){
        var $[val] = val;
    });
alert(var_name1); 
```

错误：

```
SyntaxError: missing ; before statement
[Break On This Error]   
var $[val] = val; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:54:13.720

```
jQuery.each(["var_name1", "var_name2", "var_name3"], function(i, x){
    window[x] = x; // or some object in the global/outer scope
}); 
```

# ssis - ssis 2005，写在excel文件上

> ID：15099716
> 
> 赞同：0
> 
> 时间：2013-02-26T21:33:18.757
> 
> 标签：ssis

我试图这样做：

[如何将值传递给 OLE DB 源组件中的存储过程参数？](https://stackoverflow.com/questions/13961534/ssis-2008-pass-value-to-query)

在 SSIS 2005 上。

我把所有东西都编译好了，但是在执行时，数据不会进入具有新日期的 excel 文件，而是进入模板 excel 文件。

有什么我需要更改以便它在 SSIS 2005 上运行的吗？

谢谢

# javascript - 根据子元素应用 css 类

> ID：15099718
> 
> 赞同：0
> 
> 时间：2013-02-26T21:33:27.123
> 
> 标签：javascript, jquery, angularjs

我想将 css 类设置为列表项，具体取决于子元素是否匹配某个标准。结构类似于以下示例：

```
<ul ng-controller="Navigation">
    <li><a href="#">Category A</a>
        <ul>
            <li><a href="a1.html">a1</a></li>
            <li><a href="a2.html">a2</a></li>
        </ul>
    </li>
    <li><a href="#">Category B</a>
        <ul>
            <li><a href="b1.html">b1</a></li>
            <li><a href="b2.html">b2</a></li>
        </ul>
    </li>
    <li><a href="contact.html">contact</a></li>
</ul> 
```

我的模型是当前页面，比如说`a2.html`。如果链接具有与`href`模型值相同的属性，则它应该具有特定的 css 类 ( `active`)。这可以用这个表达式来完成：

```
<a href="a1.html" ng-class="{'active': currentPage == 'a1.html'}> 
```

但这有点不雅，因为我必须重复文件名（`a1.html`）。是否可以将当前元素传递给函数？像这样的东西：`ng-class="getClass(currentElement)"`

下一个问题是，我想根据孩子是否有班级来选择父元素`active`。如果`<a href="a1.html">a1</a>`在我上面的例子中被选中，那么`Category A`也应该得到这个类`active`。

**结论**

'stewie 的解决方案有效，但我得出的结论是 Angular 不是这项工作的最佳工具。它不是一个网络“应用程序”（Angular 的领域），而是静态 html，应该稍微丰富一下。

这个简单的 jQuery 片段可以完成这项工作：

```
var activeLink = $("a").filter(function() {
  return $(this).attr("href") == currentPage();
});
activeLink.addClass("active");
activeLink.parents("li").children("a").addClass("active"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T22:21:43.457

这可以通过在您的 UL 元素上使用自定义指令来完成，该指令将在模型更改时遍历列表并在匹配项上设置适当的“活动”类。以这个[Plunker 为例](http://embed.plnkr.co/rh7LhYlrqmQhCtFR6HH9)。请注意，该指令可以进一步优化。这只是一个演示。

HTML：

```
<ul menu ng-controller="Navigation">
  <li><a href="#">Category A</a>
    <ul>
      <li><a href="a1.html">a1</a></li>
      <li><a href="a2.html">a2</a></li>
    </ul>
  </li>
  <li><a href="#">Category B</a>
    <ul>
      <li><a href="b1.html">b1</a></li>
      <li><a href="b2.html">b2</a></li>
    </ul>
  </li>
  <li><a href="contact.html">contact</a></li>
</ul> 
```

JS：

```
var app = angular.module('plunker', []);
app.controller('Navigation', 
    function($scope) {}
  );

app.directive('menu',
  function(){
    return {
      link: function ($scope, $element) {
        var link, li;
        $scope.$watch('currentPage', function(page){
          activate(page);
        });

        function activate(page){
          angular.forEach($element.find('li'), function(elm){
            li = angular.element(elm);
            link = li.find('a');
            if(link.attr('href') === $scope.currentPage){
              li.addClass('active');
              li.parents('li').addClass('active');
              return;
            }
            li.removeClass('active');
          });
        }
      }
    };
  }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:38:49.603

我看了一下@Stewei 的解决方案。但是为此使用指令编写解决方案对我来说没有意义。我认为这些指令仅在您创建组件或删除模板时编写。即使是为了消除模板，我也建议人们使用 ng-include 或类似的东西，除非您想要自定义元素提供的语义。

但是，我相信 Angular 的做法是将行为逻辑与“应用程序特定”逻辑完全分开。我认为你编写指令的方式是它们独立于它周围的控制器。

这是一个实际上解决了这个问题的 plunkr，希望以最“有角度的方式”成为可能。如果您可以对所有链接使用某种数据模型并且可能在该模型上重复重复，则可以进一步解耦。但这是开发商的选择。既然你提到它是一个静态页面，这个解决方案可能最适合它。

[http://plnkr.co/edit/DjaYi1ofpFKgKfhtakub?p=preview](http://plnkr.co/edit/DjaYi1ofpFKgKfhtakub?p=preview)

在您最初的问题中，您确实问过是否可以将 currentElement 传递给 getClass 方法。我以前问过这个问题，答案是否定的。唯一可以传递对 currentElement 的引用的地方是指令控制器，但目前不在主题范围内。

这是完成手头任务的代码。

HTML：

```
<div ng-controller="NavController">
  <ul >
    <li ng-class="getCategoryClass('A')">
        <a href="#">Category A</a>
        <ul>
            <li ng-class="getClass('a1.html','A')"><a href="a1.html">a1</a></li>
            <li ng-class="getClass('a2.html','A')"><a href="a2.html">a2</a></li>
        </ul>
    </li>
    <li ng-class="getCategoryClass('B')">
      <a href="#">Category B</a>
        <ul>
            <li ng-class="getClass('b1.html','B')"><a href="b1.html">b1</a></li>
            <li ng-class="getClass('b2.html','B')"><a href="b2.html">b2</a></li>
        </ul>
    </li>
    <li ng-class="getClass('contact.html','contact')"><a href="contact.html">contact</a></li>
  </ul>

  <input ng-model="currentPage" />
  <br>
  currentPage: {{currentPage}}
</div> 
```

JS：

```
app.controller('NavController', 
    function($scope) {
      $scope.currentPage = "";
      $scope.currentCategory = "";
      $scope.pageActive = false;
      $scope.getClass = function(page,category){

        if( page === $scope.currentPage ) {
          $scope.pageActive = true;
          $scope.currentCategory = category;
          return "active";
        }
        else{
          return "";
        }
      };

      $scope.$watch('currentPage',function(val){
        $scope.pageActive = false;
      });

      $scope.onLinkClick = function($event){
        $event.preventDefault();  
      };

      $scope.getCategoryClass = function(category){
        return $scope.currentCategory === category && $scope.pageActive ? "active" : "";
      };
    }
  ); 
```

# string - sed：删除多行变量中的一行

> ID：15099720
> 
> 赞同：1
> 
> 时间：2013-02-26T21:33:27.890
> 
> 标签：string, bash, sed

是否有简单的等价物

```
sed -i '/str/d' /file 
```

但是对于多行变量？

或者我只能使用以下

```
var=`echo "$var" | sed "s/str//"` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T21:37:07.587

利用

```
var=$(echo "$var" | sed '/str/d') 
```

子命令中的引号`$var`对于插入换行符很重要。否则`$var`将全部在一条线上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T22:20:01.510

您不需要 sed、echo 和 pipe 来操作 bash 中的字符串：

```
$ echo "$var" 
foo
str
bar

$ var="${var//str
}" 

$ echo "$var"        
foo
bar 
```

男子重击。

# facebook - API 错误代码 191 使用带有 display=iframe 的提要对话框

> ID：15099721
> 
> 赞同：1
> 
> 时间：2013-02-26T21:33:30.277
> 
> 标签：facebook, dialog, feed

我正在尝试在 IFRAME 中使用 Facebook 提要对话框，但在查看网页时，它显示：

API 错误代码：191 API 错误描述：指定的 URL 不属于应用程序 错误消息：redirect_uri 不属于应用程序。

我找到了类似的帖子，但经过数小时的研究仍然找不到解决方案。

设置 IFRAME src 的 Javascript 代码片段：

```
 FB.Event.subscribe('auth.authResponseChange', function (response) {
            if (response.status === 'connected') {
                // the user is logged in and has authenticated your
                // app, and response.authResponse supplies
                // the user's ID, a valid access token, a signed
                // request, and the time the access token 
                // and signed request each expire
                var uid = response.authResponse.userID;
                var accessToken = response.authResponse.accessToken;

                // TODO: Handle the access token
                if (accessToken) {
                    document.getElementById('fbIframe').src = 'https:// www.facebook.com/dialog/feed? display=iframe &app_id=OMITTED_APP_ID &access_token=accessToken &redirect_uri=http://asp.mydomain.com:8240/socialshare/ &show_error=true';
                }

            } else if (response.status === 'not_authorized') {
                // the user is logged in to Facebook, 
                // but has not authenticated your app
            } else {
                // the user isn't logged in to Facebook.
            }
        }); 
```

对于我在 Facebook 上的应用程序设置：

[BASIC] App Domains: asp.mydomain.com 选择您的应用如何与 Facebook 集成：“使用 Facebook 登录的网站”（站点 URL：[http](http://asp.mydomain.com:8240/socialshare/) ://asp.mydomain.com:8240/socialshare/ ）

[PERMISSIONS] 用户和朋友权限：publish_actions 扩展权限：publish_stream

[高级] 身份验证：“网络”

[1] 请注意，在 IFRAME src 中，redirect_uri 的值是 http://asp.mydomain.com:8240/socialshare/ - 作为域的 asp.mydomain.com 和 asp.mydomain 之间的端口可能不同。 com:8240 作为 redirect_uri 是问题的原因吗？如果是这样，asp.mydomain.com:8240 不允许在 Facebook 设置中设置为应用程序域...

[2] 注意在localhost:59700/socialshare/本地开发网页时会出现同样的错误（使用Visual Studio 2010）

[3] 在 IFRAME 中成功加载提要对话框所需的最少字段到底是多少？

[4] 我可以使用此处记录的 facebook 提要对话框示例成功运行并发布消息：[https ://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

[5] 对于上面的代码片段和这篇文章的正文，我特意在 URL 中添加了空格，以便我发布这个问题。

任何帮助，将不胜感激！

谢谢

# android - java.net.URLEncoder.encode 处的 OutOfMemoryError

> ID：15099722
> 
> 赞同：0
> 
> 时间：2013-02-26T21:33:30.443
> 
> 标签：android, urlencode, out-of-memory

我想使用 URLEncoder.encode 编码一个 Base64 编码的字符串，这个字符串包含图像，它可以是任意大小（1MB-8MB）。

```
String imageDataToUpload = URLEncoder.encode(temp, "UTF-8");

02-27 02:41:45.213: D/dalvikvm(18600): GC_FOR_ALLOC freed 1824K, 12% free 26452K/29831K, paused 161ms
02-27 02:41:45.213: I/dalvikvm-heap(18600): Forcing collection of SoftReferences for 2968580-byte allocation
02-27 02:41:45.383: D/dalvikvm(18600): GC_BEFORE_OOM freed 9K, 12% free 26443K/29831K, paused 138ms
02-27 02:41:45.383: E/dalvikvm-heap(18600): Out of memory on a 2968580-byte allocation. 
```

即使我在块中尝试了这个东西，但随后 StringBuffer.append 制造了 OutOfMemoryError

```
private String encodeChunckByChunck(String str, final int chunkSize) {
    StringBuffer buffer = new StringBuffer();
    final int size = str.length();
    try {
        for (int i = 0; i < size; i += chunkSize) {
            Log.d("Encode", "..........inside loop");
            if (i + chunkSize < size) {
                Log.d("Encode", "..........full chunk");
                buffer.append(URLEncoder.encode(str.substring(i, i + chunkSize), "UTF-8"));
            } else {
                Log.d("Encode", "..........half chunk");
                buffer.append(URLEncoder.encode(str.substring(i, size), "UTF-8"));
            }
        }
    } catch (UnsupportedEncodingException e) {
        Log.d("Encode", "..........exception:" + e.getMessage());
        e.printStackTrace();
    }
    Log.d("Encode", "..........before returning function");
    return buffer.toString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:25:57.153

假设（正如其他人已经指出的那样，我同意）这是一个内存问题，如果我是你，我会实现自定义 OutputStream，它将在一小块数据上即时执行 URLEncoding。

它可能看起来像这样（部分代码，您必须填写它才能编译）：

```
public static class UrlEncOutputStream extends FileOutputStream {

    /* Implement constructors here */

    @Override
    public void write (byte [] b, int off, int len)  throws IOException {
            String s = StringUtils.newStringUsAscii(b);
            super.write(URLEncoder.encode(s, "UTF-8").getBytes());
    }

    /* Implement write(byte [] b) and write(int b) in similar fashion */
} 
```

您还可以（取决于您的用例）通过使用 Tomasz Nurkiewicz[在此处](https://stackoverflow.com/a/9579919/782609)发布的 encode() 方法避免一次将整个文件加载到内存中：

```
public void encode(File file, OutputStream base64OutputStream) {
  InputStream is = new FileInputStream(file);
  OutputStream out = new Base64OutputStream(base64OutputStream)
  IOUtils.copy(is, out);
  is.close();
  out.close();
} 
```

现在你已经准备好了一切，所以你可以调用它：

```
UrlEncOutputStream out = new UrlEncOutputStream("OUT.txt");
encode(new File("SOURCE.IMG"), out); 
```

希望这可以帮助！

* * *

**编辑：**为了让这个代码工作，你需要在你的类路径中有 commons-codec 和 commons-io。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:04:48.790

您可以将其逐个写入文件而不是将其存储在内存中吗？否则，请在应用程序的其他地方使用更少的内存（释放一些大变量）。

# android - 只需要数字软键盘吗？

> ID：15099725
> 
> 赞同：10
> 
> 时间：2013-02-26T21:33:38.937
> 
> 标签：android, android-softkeyboard, ime, android-input-method, qwerty

嗨，我需要一个只有数字值和`0`键的软键盘。不应该显示除这些之外的任何其他内容...`9``Enter``.` `,` `(` `)`

![在此处输入图像描述](../Images/7cbfc1e94c75eb5e5251beacedbedbec.png)

我尝试了[这里建议的几个选项，](https://stackoverflow.com/questions/3357302/only-show-number-buttons-on-soft-keyboard-in-android)但似乎没有什么对我有用。

1.  `setRawInputType(Configuration.KEYBOARD_QWERTY)`
2.  `setRawInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_SIGNED)`
3.  `setRawInputType(InputType.TYPE_CLASS_NUMBER)`
4.  `setRawInputType(InputType.TYPE_CLASS_PHONE)`

我总是在键盘上显示额外的字符，例如：

![在此处输入图像描述](../Images/2d7675cfde7aa6658cbbc7c4bc0cf2ce.png)

`setRawInputType(Configuration.KEYBOARD_12KEY)`显示这样的键盘：

![在此处输入图像描述](../Images/9aacc27108aa8c06548220472d750d67.png)

将不胜感激任何帮助。提前致谢。

笔记：

*   `android:minSdkVersion="14"`: ICS4.0
*   `android:targetSdkVersion="17"`: JB 4.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T21:44:11.797

对于标准键盘，您所能做的就是建议输入类型。键盘仍然可以显示或不显示它想要的任何键。如果您*必须*拥有某些键并且只有这些键，则需要创建自定义软键盘。如果它仅适用于您的应用程序，特别是如果它仅适用于一项活动，我实际上不会实现标准键盘，而只是使用执行适当操作的视图/按钮。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-24T09:16:04.910

我遇到了同样的问题，我发现没有像这样可用的安卓键盘，唯一的方法是实现你自己的。所以我想和你分享我的工具，希望能为你节省一些宝贵的时间：

1.  我已经创建了这个 xml，您可以根据需要修改键盘的颜色、字体和大小：

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="300dp"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true" >

    <LinearLayout
        android:id="@+id/one_to_three"
        android:layout_width="match_parent"
        android:layout_height="60dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:orientation="horizontal"
        android:weightSum="3" >

        <Button
            android:id="@+id/one_btn"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="1"
            android:textSize="25sp" />

        <Button
            android:id="@+id/two_btn"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="2"
            android:textSize="25sp" />

        <Button
            android:id="@+id/three_btn"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="3"
            android:textSize="25sp" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/four_to_six"
        android:layout_width="match_parent"
        android:layout_height="60dp"
        android:layout_below="@+id/one_to_three"
        android:orientation="horizontal"
        android:weightSum="3" >

        <Button
            android:id="@+id/four_btn"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="4"
            android:textSize="25sp" />

        <Button
            android:id="@+id/five_btn"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="5"
            android:textSize="25sp" />

        <Button
            android:id="@+id/six_btn"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="6"
            android:textSize="25sp" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/seven_to_nine"
        android:layout_width="match_parent"
        android:layout_height="60dp"
        android:layout_below="@+id/four_to_six"
        android:orientation="horizontal"
        android:weightSum="3" >

        <Button
            android:id="@+id/seven_btn"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="7"
            android:textSize="25sp" />

        <Button
            android:id="@+id/eight_btn"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="8"
            android:textSize="25sp" />

        <Button
            android:id="@+id/nine_btn"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="9"
            android:textSize="25sp" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/zero"
        android:layout_width="match_parent"
        android:layout_height="60dp"
        android:layout_below="@+id/seven_to_nine"
        android:orientation="horizontal"
        android:weightSum="3" >

        <Button
            android:id="@+id/zero_btn"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="2"
            android:text="0"
            android:textSize="25sp" />

        <Button
            android:id="@+id/back_btn"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="Back"
            android:textSize="25sp" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/done"
        android:layout_width="match_parent"
        android:layout_height="60dp"
        android:layout_below="@+id/zero"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/done_btn"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:text="Done"
            android:textSize="30sp" />
       </LinearLayout>
        </RelativeLayout> 
    ```

![在此处输入图像描述](../Images/608c0f02ce0db2e8f3a083c26a0e4657.png)

2.  我创建了这个片段：

    ```
     package com.galrom.keyboard; //replace it with your package
            import com.example.calculator.R;//import your own R class
            import android.app.Activity;
            import android.os.Bundle;
            import android.support.v4.app.Fragment;
            import android.util.Log;
            import android.view.LayoutInflater;
            import android.view.View;
            import android.view.ViewGroup;
            import android.view.View.OnLongClickListener;
            import android.widget.Button;
            public class KeyBoardFragment extends Fragment {

            private Button one_btn;
            private Button two_btn;
            private Button three_btn;
            private Button four_btn;
            private Button five_btn;
            private Button six_btn;
            private Button seven_btn;
            private Button eight_btn;
            private Button nine_btn;
            private Button zero_btn;
            private Button back_btn;
            private Button done_btn;

            private StringBuilder sb;

            private onKeyBoardEvent keyboardEventListener;

            private int maxLength=10;
            private int currentLength;

            public static KeyBoardFragment newInstance(String EditTextValue)
            {
                KeyBoardFragment fragment=new KeyBoardFragment();
                Bundle bundle=new Bundle();
                bundle.putString("et_value", EditTextValue);
                fragment.setArguments(bundle);
                return fragment;
            }

            @Override
            public void onAttach(Activity activity) {
                try{

                    keyboardEventListener=(onKeyBoardEvent)activity;
                }
                catch(ClassCastException e)
                {
                    Log.e("ClassCastException in KeyBoardFragment row 50",activity.toString()+" must implement onKeyboardEvent");
                    e.printStackTrace();
                }

                super.onAttach(activity);
            }

            @Override
            public View onCreateView(LayoutInflater inflater, ViewGroup container,
                    Bundle savedInstanceState) {
                // TODO Auto-generated method stub
                sb=new StringBuilder(getArguments().getString("et_value"));
                currentLength=sb.length();
                View rootView=inflater.inflate(R.layout.numeric_keyboard_layout, container, false);
                one_btn=(Button)rootView.findViewById(R.id.one_btn);
                one_btn.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        add("1");
                    }
                });
                two_btn=(Button)rootView.findViewById(R.id.two_btn);
                two_btn.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        add("2");
                    }
                });
                three_btn=(Button)rootView.findViewById(R.id.three_btn);
                three_btn.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        add("3");

                    }
                });
                four_btn=(Button)rootView.findViewById(R.id.four_btn);
                four_btn.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        add("4");
                    }
                });
                five_btn=(Button)rootView.findViewById(R.id.five_btn);
                five_btn.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        add("5");

                    }
                });
                six_btn=(Button)rootView.findViewById(R.id.six_btn);
                six_btn.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        add("6");
                    }
                });
                seven_btn=(Button)rootView.findViewById(R.id.seven_btn);
                seven_btn.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        add("7");
                    }
                });
                eight_btn=(Button)rootView.findViewById(R.id.eight_btn);
                eight_btn.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        add("8");

                    }
                });
                nine_btn=(Button)rootView.findViewById(R.id.nine_btn);
                nine_btn.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        add("9");
                    }
                });
                zero_btn=(Button)rootView.findViewById(R.id.zero_btn);
                zero_btn.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        if(sb.length()>0)
                            add("0");
                    }
                });
                back_btn=(Button)rootView.findViewById(R.id.back_btn);
                back_btn.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        if(sb.length()>0)
                        {
                            currentLength--;
                            sb.deleteCharAt((sb.length())-1);
                            keyboardEventListener.backButtonPressed(sb.toString());
                        }
                    }
                });
                back_btn.setOnLongClickListener(new View.OnLongClickListener() {

                    @Override
                    public boolean onLongClick(View v) {

                        currentLength=0;
                        sb=new StringBuilder();
                        keyboardEventListener.backLongPressed();
                        return false;
                    }
                });
                done_btn=(Button)rootView.findViewById(R.id.done_btn);
                done_btn.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        keyboardEventListener.doneButtonPressed(sb.toString());
                    }
                });
                return rootView;
            }
            public interface onKeyBoardEvent
            {
                public void numberIsPressed(String total);
                public void doneButtonPressed(String total);
                public void backLongPressed();
                public void backButtonPressed(String total);
            }

            public int getMaxLength() {
                return maxLength;
            }

            public void setMaxLength(int maxLength) {
                this.maxLength = maxLength;
            }
            public void add(String num)
            {
                currentLength++;
                if(currentLength<=maxLength)
                {

                    sb.append(num);
                    keyboardEventListener.numberIsPressed(sb.toString());
                }
                else
                    currentLength--;
            }
        } 
    ```

3.EditText下弹出键盘的效果是通过创建一个空的RelativeLayout来实现的，该RelativeLayout用作键盘的容器：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<com.galrom.keyboard.EditTextNoKeyBoard
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/Key_board_container"
    android:layout_centerHorizontal="true"
    android:clickable="true"
    android:ems="10" />

<RelativeLayout
    android:id="@+id/Key_board_container"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="38dp"
    android:background="#ffffff" >
</RelativeLayout> 
```

当用户按下 EditText 时，我们将片段添加到容器中，当他按下完成时，我们将其隐藏。键盘片段通过 onKeyBoardEvent 交互与 Activity 通信。注意：托管活动必须实现此接口，否则将抛出 ClassCastException。

非常重要：我没有处理方向更改，如果您在键盘打开时更改为 ladscape，它将崩溃，因此请禁用横向模式或处理方向更改以避免 key_board_fragment 上的 nullPointerException。

这是实现键盘的活动：

```
 package com.galrom.keyboard;

     import com.example.calculator.R;

     import android.content.res.Configuration;
     import android.os.Bundle;
     import android.support.v4.app.FragmentActivity;
     import android.util.Log;
     import android.view.Menu;
     import android.view.View;
     import android.widget.EditText;
     import android.widget.Toast;

     public class MainActivity extends FragmentActivity implements               KeyBoardFragment.onKeyBoardEvent{

private EditText et;
private KeyBoardFragment keyboard_fragment;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    et=(EditText)findViewById(R.id.editText1);
    et.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(keyboard_fragment==null)
            {
                keyboard_fragment=KeyBoardFragment.newInstance(et.getText().toString());

                    getSupportFragmentManager().beginTransaction().add(R.id.Key_board_container, keyboard_fragment).commit();

            }
            else
            {
                if(keyboard_fragment.isVisible())
                    getSupportFragmentManager().beginTransaction().hide(keyboard_fragment).commit();
                else
                {
                    keyboard_fragment=KeyBoardFragment.newInstance(et.getText().toString());
                    getSupportFragmentManager().beginTransaction().add(R.id.Key_board_container, keyboard_fragment).commit();
                }
            }
    });
}

@Override
public void numberIsPressed(String total) {
    // TODO Auto-generated method stub
    et.setText(total);
}

@Override
public void doneButtonPressed(String total) {
    // TODO Auto-generated method stub
    et.setText(total);
    if(keyboard_fragment.isVisible())
        getSupportFragmentManager().beginTransaction().hide(keyboard_fragment).commit();
}

@Override
public void backLongPressed() {
    // TODO Auto-generated method stub
    et.setText("");
}

@Override
public void backButtonPressed(String total) {
    // TODO Auto-generated method stub
    et.setText(total);
}

@Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    if(keyboard_fragment!=null)
    {
        if(keyboard_fragment.isVisible())
            getSupportFragmentManager().beginTransaction().remove(keyboard_fragment).commit();
        else
            super.onBackPressed();
    }
    else
        super.onBackPressed();
}
       } 
```

最后一件事：为了禁用 android 标准键盘的弹出，我创建了一个 CustomEditText，它只在以下位置返回 false： onCheckIsTextEditor() ，这是 CustomEditText 类：

```
 package com.galrom.keyboard;
 import android.content.Context;
 import android.util.AttributeSet;
 import android.widget.EditText;

 public class EditTextNoKeyBoard extends EditText {

public EditTextNoKeyBoard(Context context) {
    super(context);
}

public EditTextNoKeyBoard(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

public EditTextNoKeyBoard(Context context, AttributeSet attrs) {
    super(context, attrs);
}

@Override
public boolean onCheckIsTextEditor() {
    // TODO Auto-generated method stub
    return false;
}
    } 
```

希望它对您有所帮助...如果您有改进的建议，我将很高兴听到。加尔。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T21:45:06.793

除了它在 EditText 上设置**inputType="phone" 。**一旦您开始输入，这将打开数字键盘键盘，但它将包括与数字相关的所有额外字符。您需要实现自己的键盘以仅保留数值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-25T13:45:11.070

此解决方案通过覆盖 EditText 的默认转换方法来使用 numberPassword 以显示字符而不是点。

```
<EditText
    android:id="@+id/userid"
    android:inputType="numberPassword"
    android:maxLength="6"
/> 
```

添加到 OnCreate。

```
// Numeric 6 character user id
EditText input = findViewById(R.id.userid);

// Process input and show characters instead of dots
input.setTransformationMethod(SingleLineTransformationMethod.getInstance()); 
```

[![数字软键盘图像](../Images/d1b2f1d9062fb3067291b2f782684346.png)](https://i.stack.imgur.com/sX8vg.jpg)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-04T10:07:05.557

默认情况下，根据您的设备，键盘也会在数字键盘中显示特殊字符。指定文本字段的键盘类型可以达到预期的结果，例如

```
 InputFieldName.setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_VARIATION_PASSWORD); 
```

**IE**

如果您只需要包含特殊字符的数字，那么您可以使用 `InputType.TYPE_CLASS_NUMBER`

**或者**

如果您也需要排除这些特殊字符，请使用`InputType.TYPE_NUMBER_VARIATION_PASSWORD`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T21:36:56.637

键盘本身选择什么键`layout`。您可以做的最好的事情是指定`InputType.TYPE_CLASS_NUMBER`，但键盘仍会显示它认为适合数字文本字段的任何内容。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-10T20:24:58.747

我遇到了和你一样的问题，只是想出了一个解决方案，也许它不优雅，也不简单，但它确实工作得很好......

首先，唯一可以使用该键盘（至少在 4.3 之前）的 InputType 是“numberPassword”，但这会将您的输入“隐藏”为点。所以我用这个转换方法使用了这个输入：

```
 private class ShowNumbersTransformationMethod implements TransformationMethod {
    public CharSequence getTransformation(final CharSequence charSequence, final View view) {
        return new PassCharSequence(charSequence);
    }

    @Override
    public void onFocusChanged(final View view, final CharSequence charSequence, final boolean b, final int i,
            final Rect rect) {
        //nothing to do here
    }

    private class PassCharSequence implements CharSequence {

        private final CharSequence charSequence;

        public PassCharSequence(final CharSequence charSequence) {
            this.charSequence = charSequence;
        }

        @Override
        public char charAt(final int index) {
            return charSequence.charAt(index);
        }

        @Override
        public int length() {
            return charSequence.length();
        }

        @Override
        public CharSequence subSequence(final int start, final int end) {
            return new PassCharSequence(charSequence.subSequence(start, end));
        }
    }
} 
```

然后将其设置为您的edittext：

```
edittext.setTransformationMethod(new ShowNumbersTransformationMethod()); 
```

现在，如前所述，这不是最快乐的解决方案，但我向你保证，它就像一个魅力。创建自己的自定义键盘会容易 10 倍，但是，我没有那个选项，因为我的客户想要标准键盘，天知道为什么......

希望它有所帮助！

# php - 只得到一种响应 pdo php

> ID：15099728
> 
> 赞同：0
> 
> 时间：2013-02-26T21:33:45.677
> 
> 标签：php, pdo

我正在执行 pdo 请求以从我的数据库中获取数据

```
public function getAll(){
    $req = $this->_bdd->prepare('SELECT * FROM '.$this->_table);
    $req->execute();
    return $req->fetchAll();
} 
```

但我得到重复的答案

例如，如果我做一个 foreach 我有

```
$value[0] = 1;
$value['id'] = 1;
$value[1] = 'Ant';
$value['login'] = 'Ant';
$value[2] = 'aa@aa.aa';
$value['mail'] = 'aa@aa.aa'; 
```

我只想拥有

```
$value['id'] = 1;
$value['login'] = 'Ant';
$value['mail'] = 'aa@aa.aa'; 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T21:36:25.677

将您的代码更改为...

```
 return $req->fetchAll(PDO::FETCH_ASSOC); 
```

仅将结果作为关联数组返回。

# c - 在 sscanf 中使用“-”字符和 gcc

> ID：15099729
> 
> 赞同：1
> 
> 时间：2013-02-26T21:33:45.763
> 
> 标签：c, gcc, scanf

我有以下代码片段：

```
char s[] = "2012-06-01-02";
int nYear;
int nMonth;
int nDay;
int nPass
sscanf(s, "%d-%d%-%d-%d", &nYear, &nMonth, &nDay, &nPass); 
```

此代码使用 Visual Studio 按预期工作，但我使用 gcc 收到以下编译警告

```
warning: unknown conversion type character '-' in format 
```

然后，如果我运行代码，我会得到 nYear、nMonth 的预期值，但 nDay 和 nPass 都是 0。

为什么这不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T21:34:44.970

你有一个`%-`我认为你不想要的东西。删除`%`：

```
sscanf(s, "%d-%d%-%d-%d", &nYear, &nMonth, &nDay, &nPass);
                ^
                |--- delete this '%' 
```

您最终想要的结果如下所示：

```
sscanf(s, "%d-%d-%d-%d", &nYear, &nMonth, &nDay, &nPass); 
```

顺便说一句，如果你是初学者，你可能想研究一下[clang 。](http://clang.llvm.org)在这种情况下，您会收到更好的错误消息，这将帮助您更快地学习。例子：

```
example.c:10:22: warning: invalid conversion specifier '-'
      [-Wformat-invalid-specifier]
    sscanf(s, "%d-%d%-%d", &nYear, &nMonth, &nDay, &nPass);
                    ~^
1 warning generated. 
```

# go - GO编程语言安装环境

> ID：15099730
> 
> 赞同：2
> 
> 时间：2013-02-26T21:33:46.783
> 
> 标签：go

我想开始用 GO 编程。由于我是 Windows 用户，因此我知道使用 NetBeans 的 GO 插件可以做到这一点。

到目前为止，我已经在文本文件中编写了 GO 程序并使用命令提示符运行它们，但我更喜欢使用另一个平台/环境，以便能够调试程序。

此论坛中的代码示例是语法高亮，并且似乎取自 Visual Studio 之类的环境。有人知道环境吗？

我将不胜感激一个简单的解决方案。谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T23:38:41.253

专为 Go 构建并仍在积极维护的 IDE：

*   LiteIDE：[http](http://code.google.com/p/golangide/) ://code.google.com/p/golangide/ 便携且快速，内置调试器

*   GoWorks：[http](http://tunnelvisionlabs.com/products/demo/goworks) ://tunnelvisionlabs.com/products/demo/goworks 基于 NetBeans 7.3，独立应用程序或 NetBeans 插件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T23:38:15.167

您可能会发现这个问题已经结束，因为它非常主观，并且是一个常见问题解答。但是，简单的答案：根据您的描述，您似乎对[goclipse](http://code.google.com/p/goclipse/)感到满意。

更完整的答案：Go 开发没有“一个真正的环境”。您在此处看到的代码示例使用 Stack Overflow 的语法荧光笔着色，并以纯文本形式提交。您可能会发现大多数主要编辑器都可以使用突出显示和实用程序。例如，我使用 Vim，它有一个插件可以在当前缓冲区上运行 gofmt。

我相信有些 Windows 用户喜欢 Sublime Text 2 的[GoSublime](https://github.com/DisposaBoy/GoSublime)插件。可以在[此处](http://go-lang.cat-v.org/)找到更完整的开发工具列表。

你真的*不需要*IDE 来使用 Go 进行开发。我鼓励您花更多时间使用优秀的编辑器和命令行。了解已经随语言分发的工具是必不可少的恕我直言（[go](http://golang.org/doc/articles/go_command.html)、[godoc](http://golang.org/doc/articles/godoc_documenting_go_code.html)、[gofmt](http://golang.org/cmd/gofmt/)）。另请参阅[使用 GDB 调试 Go 代码](http://golang.org/doc/gdb)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T21:41:05.953

谷歌搜索可以找到几个 IDE，例如： http: [//go-ide.com/](http://go-ide.com/) 或 [https://code.google.com/p/goclipse/](https://code.google.com/p/goclipse/)

# javascript - 谷歌地图 API 后备

> ID：15099732
> 
> 赞同：1
> 
> 时间：2013-02-26T21:34:02.380
> 
> 标签：javascript, google-maps, google-maps-api-3

我目前正在使用 Google Maps API 脚本：

```
function loadScript() {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "https://maps.googleapis.com/maps/api/js?v=3.exp&key=KEY&sensor=false&callback=callback";
    document.body.appendChild(script);
} 
```

我已经使用了中的响应`status`进行`callback`了回退，但是如果说 API 由于任何原因无法访问，即当上面的脚本没有加载时，如何创建回退？

或者，这是否有点矫枉过正，是否应该假设 API 将始终为您服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:39:51.470

您需要定义一个超时来确定脚本是否已加载。例如，如果脚本需要 10 秒来加载，那是可以接受的，但如果它需要超过 10 秒，您可以认为它“未加载”。

```
var apiLoaded = false;
function loadScript() { }
function callback() { 
    apiLoaded = true;
}
setTimeout(function() {
    if (apiLoaded === false) {
        // your backup logic here
    }
, 10000); 
```

# css - Float:none 在我的响应式设计中不起作用

> ID：15099734
> 
> 赞同：1
> 
> 时间：2013-02-26T21:34:05.873
> 
> 标签：css, css-float, responsive-design

我暂时把这个直播网址打开，不然这个问题就太难解释了：

[测试网址关闭]

请在支持媒体查询的浏览器中打开它，并将浏览器的大小调整为移动设备，视口宽度约为 400 像素或更低：

![在此处输入图像描述](../Images/44db367f92ff9c0dc7519a65cce30f35.png)

正如您可以（应该）看到的，全局导航菜单中的“标签”选项是可见的、活动的并且向右对齐。这可以正常工作，并通过将其浮动到右侧来完成：

```
.nav-option-active { @include inline-block; float:right; } 
```

（注意：我使用的是 SASS，因此使用了 @include 语法）

到现在为止还挺好。但是，随着视口的增长，有更多空间可用于显示导航选项，包括此活动选项和其他选项，因为它们通常应该出现。有可用空间，它们不应该漂浮。当您将视口调整为更大的尺寸时，您可以看到其他导航选项的工作原理：

![在此处输入图像描述](../Images/ebf221da10dca62b3a5c2e23b831e452.png)

往上看。全局导航选项显示为未浮动，但它们应该显示为未浮动，但活动导航选项（在本例中为标签链接）保持浮动到右侧。我想要在更大的视口中做的就是撤消该浮动，以便链接将表现为内联块，未浮动，并像其他链接一样出现在标记中。我这样做的尝试如下：

```
.nav-option-active, .nav-option-active a, .nav-option-active a em { float:none; } 
```

请注意，代码有点绝望，实际上应该是仅在 .nav-option-active 元素上设置 float:none 的问题。

正如您已经从屏幕截图中看到的那样，浮动并没有撤消，我不知道为什么。在 Firebug 中，我看到确实应用了 float:none，并且 float:right 被删除，被 float:none 否决。所以肯定应用了CSS，但没有效果。Clear:both 也没有效果，尽管我认为这不是正确使用的属性。奇怪的是，如果在 Firebug 中我实际上在运行时摆脱了浮动规则，就会实现所需的行为。

我有一种感觉，我忽略了一些非常基本的东西或误解了一些基本的东西，那么一旦设置了浮动，我该如何撤消？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:36:57.743

您的其他列表项向左浮动。你也需要把那个浮起来。

# sql - Rails 种子：如何截断数据库表？

> ID：15099737
> 
> 赞同：9
> 
> 时间：2013-02-26T21:34:21.067
> 
> 标签：sql, ruby-on-rails, postgresql

在将测试数据播种到数据库表之前，我需要截断表（我需要重置主键），我试图这样做：

```
ActiveRecord::Base.connection.execute("TRUNCATE users") 
```

但是当我从数据库中打印出数据时，我仍然看不到从 1 开始计算主键。

我究竟做错了什么？

**编辑：**

另外，我尝试在终端中手动运行到 PostgreSQL 数据库

```
truncate users 
```

但是主要计数仍然不是从 1 开始的。

**解决方案：**

在 Postgres 中，运行：

```
ALTER SEQUENCE users_id_seq RESTART WITH 1; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-31T13:10:19.350

如果您的数据库是 postgres，您可以执行以下操作来截断模型的数据库表：

```
[
  MyModel1,
  MyModel2,
  MyModel3
].each do |m|
  ActiveRecord::Base.connection.execute("TRUNCATE TABLE #{m.table_name} RESTART IDENTITY;")
end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-26T22:46:39.307

在**MySQL**中，`TRUNCATE table;`删除所有行*并*重置自动增量计数器。

在**PostgreSQL**中，它不会自动执行此操作。您可以使用`TRUNCATE TABLE table RESTART IDENTITY;`.

仅作记录：在**SQLite**中，没有`TRUNCATE`语句，而是

```
DELETE FROM table;
DELETE FROM sqlite_sequence WHERE name='table'; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-09-25T09:16:41.473

*我回答这个问题为时已晚，但我希望这对其他人有帮助。*

您必须安装（或者您可以*添加`gem 'database_cleaner'`到您的 Gemfile）*一个名为[Database Cleaner](https://github.com/DatabaseCleaner/database_cleaner)的 GEM ，它有助于在不影响数据库架构的情况下

清理您的数据库。`rake db:seed`

```
DatabaseCleaner.clean_with(:truncation) 
```

在种子文件的顶部。***它将清除您的数据库并重新开始计数`1`。***

***免责声明：**这个更新的答案已经过测试，并且可以在我的系统中完美运行*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-23T07:03:18.297

From within Rails in a csv_upload.rb I used and it worked.

`ActiveRecord::Base.connection.execute('TRUNCATE model_name RESTART IDENTITY')`

# c# - Nucleon 数据库大师 - #FileInclude (C#/LINQ)

> ID：15099738
> 
> 赞同：0
> 
> 时间：2013-02-26T21:34:23.113
> 
> 标签：c#, nucleon

我正在使用 Nucleon Database Master，到目前为止，它非常适合管理我的 mongodb 服务器。但是，有一些示例显示 LINQ 查询编辑器与您自己的数据类型和类一起使用，但我在任何地方都找不到有关如何执行此操作的任何文档。

它生成的 c# 查询中的注释中有提示：

```
//Linq to MongoDB Help:http://www.mongodb.org/display/DOCS/CSharp+Driver+LINQ+Tutorial
//The following sample shows a LINQ to MongoDB query. Use #FileInclude command to add your entity class for LINQ Query.
//var collection = this.db.GetCollection<Employee>("Employees"); 
//var result = from emp in collection.AsQueryable<Employee>()
//where emp.FirstName == "Andrew"
//select emp;
//Output(result); 
```

编辑器中的所有内容都很好，除了我不知道如何“使用#FileInclude 命令添加您的实体类 LINQ 查询”。

我确信这是可能的，因为他们在他们的网站上有截图展示了它（我已经给他们发了电子邮件，但没有得到回复）。

[http://www.nucleonsoftware.com/images/dm/LinqToEF_Select1.png](http://www.nucleonsoftware.com/images/dm/LinqToEF_Select1.png)

那么，任何人要么知道如何做到这一点，要么知道#FileInclude 事情可能是关于什么的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:51:59.243

已经收到 Nucleon Software 的回复，并认为我会在这里与其他有相同问题的人分享：

您需要在查询编辑器顶部添加注释，例如：

```
//#FileInclude C:\myFile.cs 
using System;
using System;
using System.Collections.Generic;
.... 
```

但是，他们显然很快就会添加一项功能，将您的自定义 DLL 添加到 LINQ 查询中。

# vb.net - 如何从非异步方法异步调用异步方法

> ID：15099742
> 
> 赞同：1
> 
> 时间：2013-02-26T21:34:37.237
> 
> 标签：vb.net, async-await

如何在非异步方法中等待来自异步方法的任务，而不实际调用该方法？

```
Class TestAsync
    Dim workevent As New Threading.ManualResetEvent(False)
    Sub work()
        Dim Task As Task = Test()
        'Do Work which affects Test Here
        Threading.Thread.Sleep(100)
        workevent.Set()
        'wait for Test to complete
        'Task.Wait() -causes the application to hang
    End Sub

    Async Function Test() As Task
        workevent.WaitOne()
    End Function
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:21:54.520

首先，如果可能的话，永远不要那样做。同步等待异步方法破坏了使用异步的全部目的。相反，您应该制作`work()`成`Async Function WorkAsync() As Task`. 然后使调用`work()`异步的方法也如此，依此类推，一直向上。

其次，异步与并行不同。如果你有`Async`没有`Await`s 的方法，它将完全同步执行，就好像它是一个普通方法一样。因此，即使没有`Task.Wait()`.

您可以做的是使用以下命令`Test()`在后台线程上运行`Task.Run()`：

```
Sub work()
    Dim Task As Task = Task.Run(AddressOf Test)
    Threading.Thread.Sleep(100)
    workevent.Set()
    Task.Wait()
End Sub 
```

当`Task`返回自`Run()`完成时，`Task`返回自将`Test()`完成。

`Wait()`（在组合and时还有其他导致挂起的问题`Async`，但在这种特定情况下它们不相关。）

但我再说一遍：你不应该这样做，因为它会阻塞 UI 线程，尽管它只是暂时的。

# ios - Facebook iOS SDK 3.2 获取用户新闻提要

> ID：15099749
> 
> 赞同：3
> 
> 时间：2013-02-26T21:34:53.160
> 
> 标签：ios, facebook, facebook-graph-api

我正在尝试在我的 iOS 应用程序中使用 Facebook SDK 3.2 来获取用户的 Facebook 新闻提要。我已成功让本机 facebook 登录工作并请求扩展读取权限。

我想看看我需要使用 FBRequest 和 FBRequestConnection 类的文档，但我在 facebook 开发人员网站上找不到任何此类事情的示例，至少不足以让我自信地继续下去。必须说 facebook 开发网站上的教程不像以前那么好！

有人可以帮我举个例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:12:24.677

编辑：不推荐使用 FQL（自 2.0 起），我们现在应该使用 Graph API。[这篇文章底部提供的链接](http://developers.facebook.com/docs/reference/fql/stream)显示了有价值的信息，一旦您到达那里，请查看屏幕顶部的红色警报。

您将需要“read_stream”权限。然后使用 FQL 获取新闻提要。

我这样做是这样的：

```
NSString *fqlQuery = @"SELECT post_id, created_time,  type, attachment FROM stream WHERE filter_key in (SELECT filter_key FROM stream_filter WHERE uid=me() AND type='newsfeed')AND is_hidden = 0 LIMIT 300";

// Make the API request that uses FQL
[FBRequestConnection startWithGraphPath:@"/fql"
                             parameters:[NSDictionary dictionaryWithObjectsAndKeys: fqlQuery, @"q", nil]
                             HTTPMethod:@"GET"
                      completionHandler:^(FBRequestConnection *connection,
                                          id result,
                                          NSError *error) 
                      {
                          if (error)
                              NSLog(@"Error: %@", [error localizedDescription]);
                          else
                              NSLog(@"Result: %@", result);               
                      }]; 
```

更多信息请看这里：http: [//developers.facebook.com/docs/reference/fql/stream](http://developers.facebook.com/docs/reference/fql/stream)

# ruby-on-rails - Rails路线没有找到相应的动作

> ID：15099751
> 
> 赞同：0
> 
> 时间：2013-02-26T21:34:56.810
> 
> 标签：ruby-on-rails, routes

在 app/views/participants/index.html.erb 内部：

```
<%= form_tag bulk_add_participants_program_path do %>
  <%= wrap_control_group do %>
    <%= text_area_tag :bulk_add_participants, :size => "60x3" %>
    <% end %>
    <%= submit_tag "Import Participants and Users" %>
<% end %> 
```

但请注意，控制器和路由与 Program 模型相关（出于良好的 UI 原因）。我认为这可能与问题有关。当我渲染该视图时，我收到此错误消息：

```
No route matches {:action=>"bulk_add_participants", :controller=>"programs"} 
```

这很奇怪，因为在 app/controllers/programs_controller.rb 中：

```
 def bulk_add_participants
    puts "yay!"  # because i am troubleshooting
  end 
```

我的 config/Routes.rb 是：

```
RepSurv::Application.routes.draw do

  root to: 'programs#index'

  devise_for :users, path_prefix: 'devise'
  resources :users

  resources :programs do
    resources :participants do
      resources :rounds do
        get 'survey' => 'rounds#present_survey'
        put 'survey' => 'rounds#store_survey'
      end
    end
    resources :questions
    resources :rounds
    member do
      get 'report' => 'reports#report'
      get 'bulk_add_participants'
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:39:25.150

它没有找到路线，因为您已将`programs`其定义为复数资源：

```
resources :programs do 
```

当您这样做并引用`member`您的路线`bulk_add_participants`时，它需要`:program_id`您的情况下的参数。（尝试运行`rake routes`，你会看到类似的路径`/programs/:program_id/bulk_add_participants`。）

所以你的`form_tag`电话应该是这样的：

```
<%= form_tag bulk_add_participants_program_path(@program) do %> 
```

# php - 缓存查询 cakephp

> ID：15099759
> 
> 赞同：3
> 
> 时间：2013-02-26T21:35:16.100
> 
> 标签：php, cakephp, caching

我有一个用 cakephp 开发的网站。我想缓存一个查询。我已经阅读了文档，并且在我的`bootstrap.php`这个：

```
Cache::config('default', array('engine' => 'File'));

Cache::config('short', array(
    'engine' => 'File',
    'duration' => '+1 hours',
    'path' => CACHE,
    'prefix' => 'cake_short_'
));

// long
Cache::config('long', array(
    'engine' => 'File',
    'duration' => '+1 week',
    'probability' => 100,
    'path' => CACHE . 'long' . DS,
)); 
```

我存储查询的控制器是这样的：

```
public function test_view () {
    $product_general = Cache::read('product_general_query', 'longterm');
        if (!$product_general) {
            echo("test");
            $product_general = $this->Product->query('SELECT DISTINCT * FROM products');
            Cache::write('product_general_query', $product_general, 'longterm');
        }

        $this->set('product_general', $product_general);
} 
```

每次我进入页面时，它都会打印我“测试”，因为没有在缓存中找到查询。哪里有问题？我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:47:46.840

您`'long'`在 core.php 中命名了缓存配置，但`'longterm'`在操作中使用了配置

此外，如果您启用了调试（例如，在 core.conf 中将调试设置为 1 或 2），缓存持续时间可能会自动设置为 10 秒。不确定这是否也适用于您自己的缓存定义

# sql-server-2012 - w3wp 因违反外键约束而崩溃

> ID：15099763
> 
> 赞同：-1
> 
> 时间：2013-02-26T21:35:24.910
> 
> 标签：sql-server-2012, w3wp

我已经找到了解决问题的方法，我的问题是“为什么”。

我有一个 .net4 WCF 服务，它使用实体框架和 LINQ 连接到 SQL Server 2012 数据库。我有一段代码将数据插入到表中，它违反了外键约束，当这种情况发生时，它使我的 Web 服务`w3wp.exe`进程崩溃。

我解决了这个问题，它工作正常。我的问题是……真的吗？这就是我的网络服务崩溃的原因？我的理解是，来自 SQL 的异常在 Entity Framework 中得到了很好的处理，如果这真的是我的 Web 服务器崩溃的原因，那让我对 .net 的稳定性感到不安。

我的假设是我做错了什么，但我很难弄清楚我做错了什么。其他人有类似的问题吗？谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:52:30.567

好吧，事实证明是我（怀疑）。在我的代码中，我有很多 try/catch，在 catch 子句中，我有以下内容

```
#if DEBUG
   System.Diagnostics.Debugger.Break();
#endif 
```

我不小心部署了一个打开了 DEBUG 开关的代码版本，因此每当发生任何错误时它都会触发该代码并启动服务器上的 JIT 调试器。呃。傻我。

# php - 尝试将电子表格转换为包含变量和公式的网页，然后提交到数据库

> ID：15099765
> 
> 赞同：0
> 
> 时间：2013-02-26T21:35:31.437
> 
> 标签：php, html, mysql, spreadsheet, xls

我在这方面工作了很长时间，尝试使用 PHPExcel，但只能弄清楚如何做与我想做的相反的事情。

我需要使用带有公式的电子表格并将其转换为网页，并且可以为公式输入您自己的变量。这是基本的东西，只是乘法和加法，但我根本想不通。帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T00:32:27.503

如果您需要能够使用随机电子表格执行此操作，您可能需要一个不错的组件。如果它只是一个电子表格，那么制作自己的电子表格可能最容易。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
    function addThem() {
        x = parseFloat($('#x').val());
        y = parseFloat($('#y').val());
        $('#total').val(x + y);
    }
</script>
<table class="outertable">
    <tr>
        <td>x</td>
        <td><input type="text" id="x"></input></td>
    </tr>
    <tr>
        <td>y</td>
        <td><input type="text" id="y"></input></td>
    </tr>
    <tr>
        <td>=</td>
        <td><input type="text" id="total"></input></td>
    </tr>
</table>
<input type="button" onclick="javascript:addThem()" value="Add"/> 
```

# jquery - JQuery - 添加内容，独立于 wordpress 主题

> ID：15099771
> 
> 赞同：0
> 
> 时间：2013-02-26T21:35:41.527
> 
> 标签：jquery

我想在 JQuery 的帮助下编写一个简单的函数。我创建了这个 jfiddle：

```
<table class="my_table">
    <tr>
        <td class="correct"></td>
        <td>
            <input type="button" class="my_button" />
        </td>
    </tr>
    <tr>
        <td class="incorrect"></td>
        <td>
            <input type="button" class="my_button" />
        </td>
    </tr>
... 
```

[http://jsfiddle.net/Xz3xc/1/](http://jsfiddle.net/Xz3xc/1/)

点击后，在按钮上方添加了一些内容。我的本地机器就是这种情况。我在我的 wordpress 上运行另一个主题，那里的代码如下所示：

```
<table class="my_table">
    <tr>
        <td class="correct"></td>
        <td>
            <div>
            <input type="button" class="my_button" />
            </div>
        </td>
    </tr>
        <tr>
        <td class="correct"></td>
        <td>
            <div>
            <input type="button" class="my_button" />
            </div>
        </td>
    </tr>
... 
```

[http://jsfiddle.net/KuACZ/1/](http://jsfiddle.net/KuACZ/1/)

在那里，当然代码不起作用，因为函数中缺少一个 parent()。我如何编写这个通用函数，它总是在单击按钮的同一个 tr 中获取第一个 td，以便它独立于主题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:14:17.957

这段代码在同一个中找到所有的`td`'s with class 。`correct``tr`

```
$('.my_button').click(function() {
   $(this).parentsUntil("tr").siblings("td.correct").html('Test'); 
}); 
```

[jsFiddle](http://jsfiddle.net/PMs4s/3/)

# php - 按日程安排空闲时间匹配人

> ID：15099775
> 
> 赞同：-3
> 
> 时间：2013-02-26T21:35:56.140
> 
> 标签：php, mysql

我正在尝试建立一个带有表单部分的网站，该部分允许用户指定一周中的哪些时间他们是免费的。（例如：John Smith 周二 4 点到 7 点有空，周三 8 点到 9 点有空）

然后我想运行一些服务器端代码来将具有相似时间块的用户配对在一起。

我想知道我应该如何设计我的数据库来支持这个功能以及什么样的算法可以让我匹配相似的用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:51:29.923

好的，我将尝试制作您的数据库结构。

我认为最好的方法是将一天划分为时间块，例如 00:00 - 01:00、01:00 - 02:00 等。你把它们放在一张桌子上

```
ID | day    | timestart | timeend
1  | Monday | 00:00     | 01:00
2  | Monday | 01:00     | 02:00
..................... 
```

请注意，所有列纯粹是为了让您知道所引用的内容，当然 ID 除外。

然后你有你的用户表

```
ID | username | email             | ...
1  | John     | john@example.com  | ...
..................... 
```

然后你有另一个表，time_off 或 sth

```
 user_ID  | timeblock_ID
    1        | 2
    1        | 8
............... 
```

您在 user_ID 和 timeblock_ID 上都放了一个 FOREIGN KEY 以引用您的其他表

然后可以通过以下方式查询：

```
SELECT GROUP_CONCAT(timeblock_ID SEPARATOR ',') AS timeblocks FROM time_off WHERE user_ID=$id 
```

并使用结果让每个用户获得相同的休息时间：

```
SELECT
   users.ID, users.username
FROM time_off
   LEFT JOIN users ON users.ID=time_off.user_ID
WHERE
    time_off.timeblock_ID IN($timeblocks)
GROUP BY users.ID 
```

没那么难，不是吗？实施取决于您。

# encryption - Solr config，加密数据配置文件

> ID：15099776
> 
> 赞同：3
> 
> 时间：2013-02-26T21:35:59.307
> 
> 标签：encryption, solr, indexing

如何在此处加密数据配置部分？：

```
<dataConfig> 
<dataSource type="JdbcDataSource"  driver="com.microsoft.sqlserver.jdbc.SQLServerDriver"  
url="jdbc:sqlserver://127.0.0.1;databaseName=emp" user="user" password="user"/> 
<document name="reviews"> 
   <entity name="COMMON" query="select id,name from users" > 
       <field column="id" name="id"/> 
       <field column="name" name="name"/>
  </entity> 
</document> 
</dataConfig> 
```

基本上，我不想公开用户和密码。

或者，如果数据配置文件无法加密（部分或完全），我可以使用 SolrJ 对数据库进行索引，这样我就不必配置数据配置文件了吗？也就是说，我使用 SolrJ api 传递 url 和 authentication 参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T12:03:43.377

我建议更安全的选择是在您的网络服务器中配置**JNDI 。**

如何配置 JNDI？[本页](http://tomcat.apache.org/tomcat-6.0-doc/jndi-datasource-examples-howto.html#MySQL_DBCP_Example)解释了如何使用 Tomcat 来执行此操作。它也可以用于其他流行的网络服务器。

您可以在数据配置文件中使用 JNDI 名称，如下所示：

```
< dataSource name="xyz" jndiName="jdbc/xyz" type="JdbcDataSource"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:19:27.113

请参阅：[https ://wiki.apache.org/solr/SolrConfigXml#System_property_substitution](https://wiki.apache.org/solr/SolrConfigXml#System_property_substitution)

您可以将它们作为属性保存在文件中`<solr.home>/conf/solrcore.properties`，并在数据配置中引用它们。所以你的 data-config.xml 会像：

```
<dataSource type="JdbcDataSource"
            driver="com.microsoft.sqlserver.jdbc.SQLServerDriver"    
            url="jdbc:sqlserver://${jdbc.host}:${jdbc.port}/${db.name}" 
            user="${jdbc.username}" 
            password="${jdbc.password}"/> 
```

其中所有内容`${...}`都是 solrcore.properties 中的属性，例如：

```
jdbc.host=http://127.0.0.1
jdbc.port=3306
db.name=emp
... 
```

# c - C - 2D 动态数组（双指针） - 共享内存

> ID：15099778
> 
> 赞同：7
> 
> 时间：2013-02-26T21:36:11.137
> 
> 标签：c, memory, shared, multidimensional-array

我有 2 个进程（客户端和服务器）通过共享内存进行通信。

我需要创建一个动态的二维数组（基于参数）。数组存储在结构中，然后写入共享段。

我可以将数组写入共享内存，但无法从其他进程中检索它。

客户代码：

```
struct shared_use_st {
    int     written_by_you;
    int     **PID_PRI_array;
};
            /* Prepare Dynamic 2D array */
        data_store = malloc(/*ROWS*/ 5 * sizeof(int*));
        for(i=0;i<5; i++)
            data_store[i] = malloc(/*COLS*/ 2 * sizeof(int));

        /* Prepare Dynamic 2D array - Shared Memory Seg */
        shared_stuff->PID_PRI_array = malloc(/*ROWS*/ 5 * sizeof(int*));
        for(i=0;i<5; i++)
            shared_stuff->PID_PRI_array[i] = malloc(/*COLS*/ 2 * sizeof(int));

        /* Write PID and PRI to data_store array */
        data_store[0][0] = pid;
        data_store[0][1] = 1;

        data_store[1][0] = 12345;
        data_store[1][1] = 2;

        data_store[2][0] = 12346;
        data_store[2][1] = 3;

        data_store[3][0] = 12347;
        data_store[3][1] = 4;   

        data_store[4][0] = 12348;
        data_store[4][1] = 5;   

            for(i=0;i<5;i++){
                for(x=0;x<=1;x++){
                    shared_stuff->PID_PRI_array[i][x] = data_store[i][x];
                }
            } 
```

服务器代码：

```
 for(i=0;i<5;i++){
    printf("PID: %d, PRI:%d\n", shared_stuff->PID_PRI_array[i][0], shared_stuff->PID_PRI_array[i][1]);              
} 
```

我收到“分段错误”错误。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T21:44:06.180

即使您的`shared_stuff`对象在共享内存中，您也不会将数组写入共享内存。您正在使用 分配空间`malloc`，将数据写入该空间，然后将指向该空间的指针放入`shared_stuff`. `malloc`在当前进程的正常地址空间中分配空间，而不是在您创建的共享内存段中。您需要将数组内容写入共享内存。

假设共享内存段中的数组有足够的空间，您将不得不自己管理地址，而不是使用`malloc`. （如果没有足够的空间，你必须让共享内存段更大或者随着时间的推移分段传送信息。）

您可以在共享内存段中放置一个可变长度数组，如下所示。

首先，定义一个包含您需要的所有“管理”信息的结构，例如数组大小：

```
struct StuffStruct
{
    size_t NumberOfRows, NumberOfColumns;
    … Other information as desired.
}; 
```

创建指向该结构的指针并将其设置为指向共享内存段：

```
struct StuffStruct *Stuff = shm;    // shm contains the address from shmat, performed previously. 
```

创建一个指向具有所需列数的数组的指针，并将其设置为指向初始结构之后的共享内存段：

```
int (*data_store)[NumberOfColumns] = (int (*)[NumberOfColumns]) ((char *) Stuff + sizeof *Stuff); 
```

（对于 C 纯粹主义者的注意事项：是的，C 标准不保证当您执行这样的指针运算时会发生什么。但是，任何提供共享内存支持的实现都必须提供对这种指针运算的支持。）

注意`sizeof *Stuff + NumberOfRows * NumberOfColumns * size(int)` **一定**不能大于共享内存段的大小。否则，您将在下一步中超出共享内存段。

`data_store`下一步，用数据填充数组：为普通二维数组的元素赋值。

在服务器中，设置`Stuff`方式相同。然后，在客户端写入共享内存段后，从`Stuff`. 然后`data_store`用同样的方法设置。然后从`data_store`.

# jquery - 如何使用 $.each 检查 javascript 对象中的空值？

> ID：15099781
> 
> 赞同：1
> 
> 时间：2013-02-26T21:36:24.483
> 
> 标签：jquery, json

我需要找到一种更有效的方法来访问 javascript 对象，找到空值并用空字符串（或其他内容）替换它们。这就是我所拥有的，并且它起作用，但我需要一种更有效的方法，我只知道必须有一个使用 $.each 但我似乎无法弄清楚。

这是有效的......我想用更优雅的东西替换所有这些 if 语句？

```
 var oMilestone = {
            sTitle: $(this).attr("ows_Title"),
            sStatus: $(this).attr("ows_Status"),
            sOwner: $(this).attr("ows_Assigned_x0020_Owner"),
            sStart: SPConvertDate($(this).attr("ows_Start_x0020_Date")),
            sDue: SPConvertDate($(this).attr("ows_Due_x0020_Date")),
            sPercent: $(this).attr("ows_Percent_x0020_Complete"),
            sComments: $(this).attr("ows_Update_x0020_Comments")
        }
        if (oMilestone.sOwner == null) {
            oMilestone.sOwner = " "
        }
        if (oMilestone.sStart == null) {
            oMilestone.sStart = " "
        }
        if (oMilestone.sDue == null) {
            oMilestone.sDue = " "
        }
        if (oMilestone.sPercent == null) {
            oMilestone.sPercent = " "
        }
        if (oMilestone.sComments == null) {
            oMilestone.sComments = " "
        } 
```

有什么帮助吗？

凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:07:52.517

我的回答没有使用`$.each`.

但是你总是可以内联编写一个小辅助函数，它已经可以访问 $(this) 了。节省重复自己。

```
function attrOrDefault(attribute) {
    return $(this).attr("ows_Title") || " ";
}

var oMilestone = {
    sTitle: attrOrDefault("ows_Title"),
    sStatus: attrOrDefault("ows_Status"),
    sOwner: attrOrDefault("ows_Assigned_x0020_Owner"),
    sStart: SPConvertDate($(this).attr("ows_Start_x0020_Date")),
    sDue: SPConvertDate($(this).attr("ows_Due_x0020_Date")),
    sPercent: attrOrDefault("ows_Percent_x0020_Complete"),
    sComments: attrOrDefault("ows_Update_x0020_Comments")
} 
```

或者如果你认为你会经常使用它，那么也许扩展 jQuery 来拥有这个功能？

```
$.fn.attrOrDefault = function(attribute) {
    return this.attr("ows_Title") || " ";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:37:55.443

用于`for...in`迭代属性。见下文，

```
for (i in oMilestone) {
   if (oMilestone.hasOwnProperty(i) && !oMilestone[i]) {
        oMilestone[i] = " "; //covers undefined, null and ""
   } 
} 
```

# actionscript-3 - 如何在 ActionScript 3 中创建一个接受多种参数类型的函数？

> ID：15099784
> 
> 赞同：4
> 
> 时间：2013-02-26T21:36:29.480
> 
> 标签：actionscript-3, types, parameters, arguments

谁能告诉我如何在 ActionScript3.0 中创建一个像下面这样工作的函数？

```
function test(one:int){ trace(one);}

function test(many:Vector<int>){
  for each(var one:int in many){ test(one); }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T21:41:56.613

您可以使用星号和`is`关键字：

```
function test(param:*):void
{
    if(param is int)
    {
        // Do stuff with single int.
        trace(param);
    }

    else if(param is Vector.<int>)
    {
        // Vector iteration stuff.
        for each(var i:int in param)
        {
            test(i);
        }
    }

    else
    {
        // May want to notify developers if they use the wrong types. 
        throw new ArgumentError("test() only accepts types int or Vector.<int>.");
    }
} 
```

相对于拥有两个单独的、清晰标记的方法而言，这很少是一个好方法，因为如果没有特定的类型要求，很难判断这些方法的意图是什么。

我建议一套更清晰的方法，适当命名，例如

```
function testOne(param:int):void
function testMany(param:Vector.<int>):void 
```

在这种特殊情况下可能有用的是[`...rest`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/statements.html#..._%28rest%29_parameter)参数。这样，您可以允许一个或多个整数，并且还为其他人（以及以后的您自己）提供更多的可读性，以了解该方法的作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:39:35.083

```
function test(many:*):void {
  //now many can be any type.
} 
```

在使用的情况下`Vector`，这也应该有效：

```
function test(many:Vector.<*>):void {
  //now many can be Vector with any type.           
} 
```

# java - 如何在 Eclipse 中编辑 Maven 依赖项中的 .class 文件

> ID：15099790
> 
> 赞同：7
> 
> 时间：2013-02-26T21:36:45.730
> 
> 标签：java, eclipse, maven, jar

好的，所以我有我的 Java 项目，在项目资源管理器的 Maven 依赖项目文件夹下，我遇到了一个`jar`文件夹，其中有一个`.class`文件。现在，我单击了`Download Sources`，我可以将`.class`文件作为 Java 文件查看，但我无法在 Eclipse 中对其进行编辑。

我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:40:40.027

您不能编辑`.class`文件。您只能编辑`java`源代码中包含的文件并重新编译。

下载的源是在给定时间为给定项目`maven`生成的项目快照`maven source plugin`，以帮助调查代码，但肯定不会修改它。

这些源可以绑定到类路径并用于在 IDE 中导航项目源，但它们仍然是只读的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:40:52.607

您不能直接编辑 jar 和源 jar。您需要下载源代码并对其进行编辑。然后，您必须通过构建过程来重新构建 jar，并将其作为新版本安装在您的 maven 存储库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:42:55.733

类文件是编译后的二进制文件，准备成为可执行程序的一部分。

修改它们是修改已编译源代码的艺术。你可能不想这样做。如果要生成替换，请下载整个项目并重新编译。

在这样的行动下，您可能有义务做某些其他事情，根据法律，您必须遵守软件的许可，并且重新编译和重新分发（如果您必须重新编译，您将这样做）通常会给您带来更重的负担开发人员不仅仅是“使用”（取决于许可）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T22:50:56.437

如前所述，您不能修改 .class 文件。如果可用，您可以通过以下方式下载依赖项的源 java 文件：

```
mvn dependency:sources
mvn dependency:resolve -Dclassifier=javadoc 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-31T10:12:13.483

（对于困惑的读者：它是关于 Eclipse 通过 Maven 配置知道如何跳转到已知/可用（可能是自己的）项目源文件来编辑它，当它通过一些以前打包的 jar（其中包含`*.class`文件）实际链接到代码中时）

*（我们有同样的问题，但经过一些调整后它之前已经工作了，我们花了相当长的时间来解决这个问题......）*

我们的（典型的 EAR 原型）目录结构：

```
[projx]
  |- [ejb]
       |- pom.xml
            ...
            <!-- A) PROBLEM: dependency resolution can't work in [web]/src/**/* -->
            <version>1.0-SNAPSHOT</version>

            <!-- B) OK: this is what we (and probably you) wanted -->
            <!-- <version>2.0.1-SNAPSHOT</version> -->
            ...
  |- [web]
       |- pom.xml
            ...
            <version>2.0.1-SNAPSHOT</version>
            ...
            <dependency>
                <groupId>...</groupId>
                <artifactId>projx-ejb</artifactId>
                <type>ejb</type>

                <!-- C) a specific older version here would help it as well 
                        if you need it -->
                <!-- <version>1.0.3.Final</version> -->

                <scope>provided</scope>
            </dependency>
            ...
  |- [ear]
       |- pom.xml
            ...
            <version>2.0.1-SNAPSHOT</version>
            ...
  |- pom.xml

       <project ...>
        ...
        <version>2.0.1-SNAPSHOT</version>
        ...
        <modules>
          <module>ejb</module>
          <module>web</module>
          <module>ear</module>
        </modules>
        ... 
```

所以问题是我们**忘了增加`[ejb]/pom.xml//project/version`(A))**。 **在将其调整为类似于 B) 之后**（我们实际上引用了一个全局`[projx]/pom.xml//project/properties/projx.version`属性），它**再次**像一个魅力一样工作。

（如果我们明确地依赖于较旧的版本，例如 `projx-ejb-1.0.3.Final.jar，JAR 版本，我们可能会选择 C）方法，当然工作区解析再次无法正常工作，这是正确的.)

# python - PyCharm IDE 是否可以像 PyDev 中那样在关键字参数、括号和运算符前后放置一个空格？

> ID：15099795
> 
> 赞同：0
> 
> 时间：2013-02-26T21:37:00.643
> 
> 标签：python, eclipse, pydev, pycharm

在使用 PyDev 的 Eclipse 中，我可以在 PyDev 编辑器中设置首选项，以便在保存时分配关键字参数、括号和运算符之前和之后添加空格。例子：

```
def create_socket(HOST):
    sock = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
    sock.connect((HOST,80))
    return sock 
```

Ctrl + S 后代码如下：

```
def create_socket( HOST ):
    sock = socket.socket( socket.AF_INET, socket.SOCK_STREAM )
    sock.connect( ( HOST, 80 ) )
    return sock 
```

PyCharm 可以做同样的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T07:07:53.823

PyCharm 支持编码风格，可以在 Settings | 代码风格 | 蟒蛇 | 空间 | 内 | 方法调用括号。

不支持且未计划在保存时重新格式化，因为在使用 PyCharm 时，文件会自动保存，并且将保存操作作为其他行为的触发器没有多大意义。如果愿意，您可以将 Ctrl-S 快捷方式分配给重新格式化操作，或者在提交对话框中启用“提交前重新格式化”。

# jquery - 使用 jquery 的 .on 和 jQuery.noConflict 但仍然无法使用 AJAX

> ID：15099804
> 
> 赞同：0
> 
> 时间：2013-02-26T21:37:16.153
> 
> 标签：jquery, ajax, twitter-bootstrap

我正在使用 jquery 来更改我只能部分控制的页面上的标记。

直播页面：[http ://demo.salsalabs.com/o/50531/p/dia/action3/common/public/?action_KEY=7679](http://demo.salsalabs.com/o/50531/p/dia/action3/common/public/?action_KEY=7679)

该页面加载 jquery 1.3.2（我无法控制）并且我还在加载 jquery 1.9.1 以使用 Twitter 的 Bootstrap。

在登陆页面上，您输入您的邮政编码，然后单击提交。然后使用一些 ajax 页面显示您的本地代表和另一种形式。我正在使用 jquery 来调整页面上的 html 标记。

**问题是标记更改不适用于 ajaxed 内容。**

这是没有按预期工作的JS...

```
$(document).ready(function() {
   $bs("#postalCodeForm input[type=button]").on("click", function() {
      alert("Thanks for submitting a zip");
      $bs("#target-page .actioncontent").addClass("span6");
      $bs("#target-page .targets").addClass("span6");
   });
}); 
```

我认为这一切都与初始“提交”按钮使用 onClick 处理程序这一事实有关，我不知道如何使用它。

```
onclick="return submitPostalCode();return false; 
```

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:49:23.190

你可以这样做来摆脱它......

```
$('#postalCodeForm input[type=button]').attr('onclick', null); 
```

如果您需要前面的函数调用，您可以将它存储在一个变量中，然后在代码执行后执行它。

# python - Python zlib不压缩字符串？

> ID：15099808
> 
> 赞同：1
> 
> 时间：2013-02-26T21:37:30.527
> 
> 标签：python, compression, zlib

目前，我正在浏览 python.org 的 python 教程。我在 10.9 上，我正在尝试使用 zlib 库来压缩字符串。但是，`len(compressedString)`并不总是小于`len(originalString)`。我的解释器代码如下：

```
>>> import zlib
>>> s = 'the quick brown fox jumps over the lazy dog'
>>> len(s)
43
>>> t = zlib.compress(s)
>>> len(t)
50
>>> t
'x\x9c+\xc9HU(,\xcdL\xceVH*\xca/\xcfSH\xcb\xafP\xc8*\xcd-(V\xc8/K-R(\x01J\xe7$VU*\xa4\xe4\xa7\x03\x00a<\x0f\xfa'
>>> len(zlib.decompress(t))
43
>>> s2 = "something else i'm compressing"
>>> len(s2)
30
>>> t2 = zlib.compress(s2)
>>> len(t2)
37
>>> s3 = "witch which has which witches wrist watch"
>>> len(s3)
41
>>> t3 = zlib.compress(s3)
>>> len(t3)
37 
```

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-26T21:42:19.030

zlib 压缩算法并不总是有效的：

```
>>> len(zlib.compress('ab'))
10 
```

因为它需要添加*可能*比您尝试压缩的数据更多的元数据（标头、符号表、反向引用）。将它用于更长的、不那么随机的数据，它会很好地压缩数据：

```
>>> lorem = 'Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit'
>>> len(lorem) * 100
9100
>>> len(zlib.compress(lorem * 100))
123 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T04:53:28.160

> 但是，len(compressedString) 并不总是小于 len(originalString)。

那当然是不可能的。至少如果您希望始终能够无损地检索原始字符串。

然而，deflate 算法的扩展永远不会超过一小部分，加上 zlib 头和尾的六个字节。zlib 标头将其标识为 zlib 流，而尾部则提供对数据的完整性检查。

# c# - ABCpdf8 MSHTML 引擎和 SVG

> ID：15099809
> 
> 赞同：1
> 
> 时间：2013-02-26T21:37:31.497
> 
> 标签：c#, asp.net, svg, mshtml, abcpdf

我想使用 MSHTML 引擎将在 img 标记中的 html 中指定的 SVG 图像文件添加到我的 PDF 中。该图像使用相同的 html 在浏览器中正确显示。但是，当我使用 AddImageHtml 添加到 PDF 时，不会出现 SVG（它显示损坏的图像图标）。如果我切换到 Gecko，图像会按预期显示。

我更喜欢使用 MSHTML 作为引擎，因为我必须使用的 HTML 内容已针对 IE 进行了优化。是否有设置或我缺少的东西会导致 IE9 MSHTML 引擎不呈现静态 SVG 图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T23:10:32.187

ABCpdf[组件比较](http://www.websupergoo.com/abcpdf-8.htm)将术语“嵌入式 SVG”链接到仅[ForGecko](http://www.websupergoo.com/helppdf9net/source/5-abcpdf/xhtmloptions/2-properties/2-forgecko.htm)的属性。

# jaxb - JAXB 忽略处理中的字段

> ID：15099811
> 
> 赞同：1
> 
> 时间：2013-02-26T21:37:31.703
> 
> 标签：jaxb

我有以下课程

```
@XmlRootElement
public class Test {

    @XmlTransient
    private String abc;

    @XmlElement
    private String def;

} 
```

我的问题是，我想用这个类来生成两种 XML

```
1\. With <abc>
2\. without <abc> 
```

我可以实现第二个，因为我已将其标记为瞬态。有什么办法可以让我将“abc”标记为`@XMLElement`并且可以在编组时忽略它？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T02:20:06.630

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

您可能对`@XmlNamedObjectGraph`我们在 EclipseLink 2.5.0 中添加的扩展感兴趣。它允许您在域模型上定义多个视图。您今天可以使用每晚构建来尝试一下：

*   [http://www.eclipse.org/eclipselink/downloads/nightly.php](http://www.eclipse.org/eclipselink/downloads/nightly.php)

下面我举个例子：

**测试**

`@XmlNamedObjectGraph`注释用于定义可在编组和解组时使用的对象图的子集。

```
import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.*;

@XmlNamedObjectGraph(
    name="only def",
    attributeNodes = {
        @XmlNamedAttributeNode("def")
    }
)
@XmlRootElement
public class Test {

    private String abc;
    private String def;

    public String getAbc() {
        return abc;
    }

    public void setAbc(String abc) {
        this.abc = abc;
    }

    public String getDef() {
        return def;
    }

    public void setDef(String def) {
        this.def = def;
    }

} 
```

**演示**

可`MarshallerProperties.OBJECT_GRAPH`用于指定应编组的对象图。

```
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.MarshallerProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Test.class);

        Test test = new Test();
        test.setAbc("FOO");
        test.setDef("BAR");

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

        // Marshal the Entire Object
        marshaller.marshal(test, System.out);

        // Marshal Only What is Specified in the Object Graph
        marshaller.setProperty(MarshallerProperties.OBJECT_GRAPH, "only def");
        marshaller.marshal(test, System.out);
    }

} 
```

**输出**

下面是运行演示代码的输出。第一次`Test`编组的实例包含所有属性，第二次仅包含`def`属性。

```
<?xml version="1.0" encoding="UTF-8"?>
<test>
   <abc>FOO</abc>
   <def>BAR</def>
</test>
<?xml version="1.0" encoding="UTF-8"?>
<test>
   <def>BAR</def>
</test> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2013/03/moxys-object-graphs-inputoutput-partial.html](http://blog.bdoughan.com/2013/03/moxys-object-graphs-inputoutput-partial.html)
*   [http://blog.bdoughan.com/2013/03/moxys-object-graphs-partial-models-on.html](http://blog.bdoughan.com/2013/03/moxys-object-graphs-partial-models-on.html)

# c# - 什么是隐含的泛型类型参数

> ID：15099812
> 
> 赞同：12
> 
> 时间：2013-02-26T21:37:36.790
> 
> 标签：c#, generics, syntax

所以，我遇到了Servy（[https://stackoverflow.com/a/15098242/496680](https://stackoverflow.com/a/15098242/496680)）的答案，他的一些代码是这样做的：

```
public static int BinarySearch<TSource, TKey>(...) 
```

对于扩展方法，但他这样称呼它：

```
arr.BinarySearch(...) 
```

我四处询问，有人提到它是一个隐含的泛型类型参数。我用谷歌搜索了它们，但没有找到关于它们的信息。我了解泛型是如何工作的，但我不明白如何/何时使用它们。

1.  为什么servy在他的扩展方法中使用它们？
2.  我可以搜索这些更正式的名称吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-26T21:54:45.370

好吧，您遗漏了使一切正常的最重要部分。类型参数可以通过传入的实际对象参数来推断。

例如：

```
static class Extensions {
  internal static IEnumerable<U> Test<T, U>(
                                   this IEnumerable<T> items,
                                   Func<T, U> converter) {
    foreach (T item in items) {
      yield return converter(item);
    }
  }
} 
```

此扩展方法适用于*任何*IEnumerable 类，并将根据您提供的转换器将枚举中的每个项目转换为另一种类型。这是标准的泛型。

现在，有很多方法可以调用这个方法：

```
IEnumerable<int> values = Enumerable.Range<int>(1, 10);
Func<int, string> converter = i => i.ToString("0.00");

// Variation 1, explicit calling
IEnumerable<string> results1 = Extensions.Test<int, string>(values, converter);

// Variation 2, explicit calling with type inference
IEnumerable<string> results2 = Extensions.Test(values, converter);

// Variation 3, extension method calling, still providing explicit types
IEnumerable<string> results3 = values.Test<int, string>(converter);

// Variation 4, extension method with type inference
IEnumerable<string> results4 = values.Test(converter); 
```

所有四个变体都调用相同的方法并返回相同的结果。类型推断通过查看传递的参数并根据提供的内容自动推断其类型来工作。在我们上面的示例中，它能够确定 type`T`是 type `int`，因为我们将 an 传递`IEnumerable<int>`到参数 for `IEnumerable<T>`。它还能够推断出 type`U`是 type 的，因为我们传入了一个与 with`string`的初始类型匹配的 Func并返回一个字符串。所以用我们的转换器函数来填充。`T``int``Func<T, U>``Func<int, string>`

从上面的推论来看，这是一个标准的通用方法。类型推断和扩展方法只不过是方便/语法糖。事实上，如果您反编译输出，您可以看到扩展方法被静态调用替换，并且通常使用显式填写的类型参数来定义。（这取决于您的反编译器和设置的选项）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-26T21:43:11.227

1.  在这种情况下，他使用了一个[*泛型方法*](http://msdn.microsoft.com/en-us/library/twcad0zb%28v=vs.80%29.aspx)，因为它允许他的方法与包含在`Collection<T>`. 泛型方法使其非常灵活，可用于任何类型。他在调用方法时使用了类型推断，因为它简化了调用站点的代码。

2.  自动处理称为类型推断，在 C# 语言规范第 7.5.2 节：类型推断中有详细介绍。如果您想详细了解它，我建议您下载[C# 语言规范](http://msdn.microsoft.com/en-us/library/ms228593.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T21:39:54.503

我经常听到的术语是“类型推断”。

# c# - 如何使用配置加载自定义 .config 文件

> ID：15099813
> 
> 赞同：1
> 
> 时间：2013-02-26T21:37:39.467
> 
> 标签：c#, asp.net, web-applications, configuration

我不确定我是否正确，但我正在尝试为 asp.NET **Web**项目编写自定义配置文件。我想明确表示这不是 Windows 窗体，因为我找到的一半东西只适用于那些。我正在尝试读取和写入此文件以更改几个应用程序设置。

[我使用本](http://www.codeproject.com/Articles/16466/Unraveling-the-Mysteries-of-NET-2-0-Configuration)教程编写了这个庞大的类。这是一个简化版本：

```
namespace Tedski.Configuration {
    public class TedskiSection : ConfigurationSection {

        private static ConfigurationProperty s_propName;
        private static ConfigurationPropertyCollection s_properties;

        static TedskiSection() {
            s_propName = new ConfigurationProperty(
                "name", 
                typeof(string), 
                null, 
                ConfigurationPropertyOptions.IsRequired
            );
            s_properties = new ConfigurationPropertyCollection();
            s_properties.Add(s_propName);
        }

        protected override ConfigurationPropertyCollection Properties {
            get { return s_properties; }
        }

        [ConfigurationProperty("name")]
        public string Name {
            get {
                return (string)base[s_propName];
            }
            set {
                base[s_propName] = value;
            }
        }
    }
} 
```

我现在不确定在哪里定义我的配置。我可以把它放在我的 Web.config 文件中，如下所示：

```
<configuration>
    <configSections>
        <section name="Tedski" type="Tedski.Configuration.TedskiSection" />
    </configSections>
    <Tedski name="Ted" />
</configuration> 
```

一切都很好：

```
TedskiSection section = ConfigurationManager.GetSection("Tedski") as TedskiSection;
Console.WriteLine(section.Name); //produces "Ted" 
```

但是，我需要能够将它与`Configuration`对象一起加载，以便能够调用`Configuration.Save()`. 我似乎无法加载该特定部分并保存 Web.config（据我所知这是危险的）。我正在尝试的另一个解决方案是创建一个单独的 .config 文件 (Tedski.config)，其 XML 语法与上面定义的相同。

我尝试使用[此](https://stackoverflow.com/questions/505566/loading-custom-configuration-files)答案加载 Tedski.config，但出现错误：

```
ExeConfigurationFileMap configMap = new ExeConfigurationFileMap();
configMap.ExeConfigFilename = Server.MapPath("~/Tedski.config");
Configuration config = ConfigurationManager.OpenMappedExeConfiguration(configMap, ConfigUserLevel.None);
TedskiSection section = config.GetSection("Tedski") as TedskiSection; //fails 
```

> ConfigurationErrorsException“为 Tedski 创建配置节处理程序时出错：无法从程序集“System.Configuration，版本=4.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a”加载类型“Tedski.Configuration.TedskiSection”

如果我得到这个加载，我可以修改`section.Name`并调用`config.Save()`，但我被困在这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:44:27.863

在您的`type`财产中，您必须告诉它哪个程序集包含您的`Tedski.Configuration.TedskiSection`. 例如：

```
<section name="Tedski" type="Tedski.Configuration.TedskiSection, TedskiAssemblyName" /> 
```

将“TedskiAssemblyName”替换为包含该类的程序集的名称。

# wordpress - WordPress | 接受带有可变参数的传入 url

> ID：15099821
> 
> 赞同：1
> 
> 时间：2013-02-26T21:38:06.123
> 
> 标签：wordpress, permalinks

我希望 WordPress 处理带有可变参数的传入 url，而不是抛出 404。基本上，传入的 url 可能如下所示：

```
http://mysite.com/custom-post-type/some-post/?promo=12er34 
```

然后，我将最后一部分传递到促销注册表单中。显然，直接点击这个 url 会抛出 404。

无论如何在我的自定义帖子类型中设置一个条件，如果传入的 url 有一个额外的指定段，则允许匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:43:49.967

在您的自定义帖子类型模板中，您可以这样做：

`$code = isset( $_GET[ 'promo' ] ) ? sanitize_text_field( $_GET[ 'promo' ] ) : '';`

顺便说一句，你的 url 中的参数应该有一个`?`before `promo`。

像这样：`http://mysite.com/custom-post-type/some-post/?promo=12er34`

**更新：**

如果您想获得此值，无论您是使用自定义帖子类型还是默认帖子类型，请在您的`functions.php`:

```
function get_promo_code( $wp ) {
    if( ! is_single() )
        return;

    // Do whatever you want with the promo code here.
    $code = isset( $_GET[ 'promo' ] ) ? sanitize_text_field( $_GET[ 'promo' ] ) : '';
}

add_action( 'wp', 'get_promo_code' ); 
```

# android - 打开/关闭 WiFi

> ID：15099822
> 
> 赞同：2
> 
> 时间：2013-02-26T21:38:10.493
> 
> 标签：android, permissions, wifi

我有一些问题......我需要知道我的设备上的 Wifi 是启用还是禁用，所以我用这个代码检查它：

```
//check for internet connection
    WifiManager wifiManager = (WifiManager) this.getSystemService(Context.WIFI_SERVICE);
    boolean wifiEnabled = wifiManager.isWifiEnabled();
    if (!wifiEnabled)
    {
        wifiManager.setWifiEnabled(true);
    }
    else
    {
        Toast.makeText(getApplicationContext(), "WiFi is disabled!", Toast.LENGTH_LONG).show();
    } 
```

我需要在清单中添加一些权限，这里出现错误，因为`<uses-permission android:name="android.permission.UPDATE_DEVICE_STATS"/>`仅适用于系统程序......

所以我请你帮忙，我怎样才能把我的应用程序变成系统，或者我被添加了一些额外的权限？

我添加的所有 Wifi 权限：

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
<uses-permission android:name="android.permission.UPDATE_DEVICE_STATS"/>
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE"/>
<uses-permission android:name="android.permission.WAKE_LOCK"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:49:29.967

正如您的错误消息所暗示的那样，我建议删除 UPDATE_DEVICE_STATS 权限。

# c++ - C++中带有模板参数的Typedef

> ID：15099826
> 
> 赞同：3
> 
> 时间：2013-02-26T21:38:26.483
> 
> 标签：c++, templates, typedef

我该如何解决这个错误？

我的头文件

```
template<typename T>
class C1 {
public:
typedef std::vector<T::F> TFV;
TFV Function1();
}; 
```

我的 CPP 文件

```
template<typename T>
TFV C1::Function() //error: ‘TFV’ does not name a type
{ } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-26T21:40:53.167

首先，使用`typename`关键字告诉编译器解释`F`为类型的（限定）名称：

```
typedef std::vector<typename T::F> TFV;
//                  ^^^^^^^^ 
```

其次，`TFV`is 不是在全局命名空间中定义的类型，因此您必须在定义中正确限定它`Function1()`：

```
 template<typename T>
    typename C1<T>::TFV C1<T>::Function1()
//  ^^^^^^^^ ^^^^^^^      ^^^
    { } 
```

最后，类模板的成员函数的定义应该放在*头文件*中，除非您为所有将隐式生成的模板实例化提供显式实例化。

如果不这样做，很可能会导致链接器出现未解决的引用错误。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-26T21:42:01.883

有 C++11？然后使用尾随返回类型。

```
template<typename T>
class C1 {
public:
  typedef std::vector<typename T::F> TFV;
  TFV Function1();
};

template<typename T>
auto C1<T>::Function1() -> TFV { } 
```

这是有效的，因为在函数的参数之后，`()`在这种情况下，范围与块内部相同`{}`。您可以访问`this`（与 decltype 结合使用）并且可以`TFV`在没有范围解析运算符的情况下使用。

# git - git clone 后修改的文件

> ID：15099838
> 
> 赞同：4
> 
> 时间：2013-02-26T21:39:20.290
> 
> 标签：git, git-clone

在我的 PC 中克隆 github 存储库后，文件显示为修改后的文件。但是这个文件的最后一次修改是在 8 个月前完成的。怎么可能？我尝试执行“git checkout -- ”。但文件继续像修改后的文件一样。

.gitattribute 文件：
*.java text
*.scala text
*.xml text
*.properties text
*.properties.default text
*.sh text
*.pig text
*.py text
*.md text

有问题的文件是 java 源。我正在使用 Ubuntu 12.10

有人有这个问题的提示/解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T04:26:30.510

只需设置一个 git core.filemode false 即可解决您的问题。

兄弟，蒂姆

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T01:44:41.877

每当`git`签出某个文件时（例如在 a 之后`clone`），它会将修改时间设置为当前时间。

考虑以下场景：您有分支，创造性地称为一和二。您签出 One，然后运行`make`​​. 然后你检查出两个，然后`make`再次运行。有一个特定的文件，叫做那个，最后一次修改是在 1 个月和 2 个月前在各自的分支中。如果用它原来的修改时间`git`签出`file`，那么每次切换分支的时间`file`都已经被修改了*很久*`make`。不是一件好事（TM）。

# java - 在java中使用带有局部变量的显示方法

> ID：15099839
> 
> 赞同：0
> 
> 时间：2013-02-26T21:39:25.050
> 
> 标签：java

所以我必须为发票编写一个程序，在其中我在本地而不是全局定义变量。所以它有点像我的样子。

```
public void setAmount(int anyAmount)
{ 
int amount;
amount = anyAmount;
} 
```

然后我做这样的显示方法并得到一个错误说找不到符号

```
public void displayInvoice()
{
System.out.println("Amount: " + amount); 
```

我可以在全球范围内轻松地做到这一点，但在这方面遇到了麻烦。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:42:52.870

当你在一个函数中声明一个变量时，比如在你的 setAmount 中，它只存在于该函数执行期间；它只存在于 { 和 } 之间。这就是为什么您稍后无法在第二个函数中引用它，因为它不再存在。本质上，您所做的是设置它，然后立即摆脱它，无需对您的代码进行任何努力，而只是通过内存在程序中分配和使用的方式。

解决此问题的方法是使用您所说的“全局”，或者在设置后将其传回，并将其放入另一个变量中，然后将其发送到 displayInvoice 函数。最后一种方法要求 setAmount 和 displayInvoice 本身是更大函数的一部分，并且在其中声明中间变量。总而言之，鉴于您所解释的内容，您所说的“全球”是最简单且可能最好的解决方案。

不工作的例子：

```
main() {
   int amount = 0;
   amount = setAmount(5);
   displayInvoice(amount);
} 
```

但是，在这样做时，您不妨放弃 setAmount 函数，因为您可以看到它相当多余。保持设定的金额，您需要将其更改为

```
Public int setAmount(int anyAmount) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:47:49.533

当您在方法中声明一个变量时，它成为本地变量，这意味着它仅在该方法中可见，这就是您收到该错误的原因，您可以通过使其成为全局变量来纠正它。

# python - 生成具有指定长度的嵌套列表

> ID：15099841
> 
> 赞同：1
> 
> 时间：2013-02-26T21:39:30.250
> 
> 标签：python, list, python-2.7, nested

我想生成一个列表列表，其中包含随机生成的二进制值的渐进数量。

如何添加一个条件来告诉 python 将随机值添加到列表中，直到它达到指定的长度？在这种情况下，每个新列表的长度应该是一个逐渐变大的奇数。

```
from random import randint  

shape = [] 
odds = [x for x in range(100) if x % 2 == 1]

while len(shape) < 300:
    for x in odds:
        randy = [randint(0,1)] * x ??  # need to run this code x amount of times 
        shape.append(randy)            # so that each len(randy) = x 
```

*我宁愿不使用 count += 1

所需的输出：

> > > 形状 [[0],[0,1,0],[1,1,0,1,0],[1,0,0,0,1,1,0]...等]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T21:42:35.420

你想要一个~~*生成器表达式*~~ *列表理解*：

```
randy = [randint(0, 1) for i in range(x)] 
```

问题`[someFunc()] * someNum`在于 Python 首先计算内部表达式，`someFunc()`并在执行外部表达式之前将其解析为某个数字。

# grails - 从视图获取表值到控制器

> ID：15099854
> 
> 赞同：0
> 
> 时间：2013-02-26T21:40:03.523
> 
> 标签：grails

我有一个域类 Report，带有一个引用的子类，提示符。

在编辑报告页面之一，您可以重新排列表格中提示的顺序。然后，当用户开始运行报告时，该页面上的提示按所述顺序排列。

Report edit.gsp 页面上的表格使用一些 jQuery 来允许拖放行，并更新显示顺序号，但仅在 UI 端，还没有返回数据库。

我希望能够将此新订单传递回我的更新命令，但无法弄清楚如何在我的一生中获取表格行数据。

搜索时几乎所有的结果都是如何从控制器获取数据到视图，反之亦然。

这是表格代码的片段

```
<table id="prompts">
            <thead>
                <tr>
                    <th>${message(code: 'prompt.name.label', default: 'Name')}</th>
                    <th>${message(code: 'prompt.description.label', default: 'Description')}</th>
                    <th>${message(code: 'prompt.required.label', default: 'Required')}</th>
                    <th>${message(code: 'prompt.displaySeqno.label', default: 'Display Order')}</th>
                </tr>
            </thead>
            <tbody>
                <g:each in="${reportInstance.prompts.sort{it.displaySeqno}}" status="i" var="prompt">
                    <tr class="${(i % 2) == 0 ? 'even' : 'odd'}" onclick='window.location = "${createLink(controller: "prompt", action: "edit", id: prompt.id)}"'>
                        <td>${fieldValue(bean: prompt, field: "name")}</td>
                        <td>${fieldValue(bean: prompt, field: "description")}</td>
                        <td>${prompt.required}</td>
                        <td class="displaySeqno">${prompt.displaySeqno}</td>
                    </tr>
                </g:each>
            </tbody>
        </table> 
```

然后在控制器中，我尝试了

```
params.list('displaySeqno') 
```

但它只会返回一个空数组。

如何从控制器类中获取 displaySeqno 的值？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T23:04:21.020

这是对 HTTP / Java EE 工作原理的基本了解将允许您非常轻松地解决问题的那些时间之一（这种情况经常发生）。表单或没有表单，您必须将一个值传递到发送到服务器的请求中，以便它最终到达服务器。这怎么样

```
<td class="displaySeqno">${prompt.displaySeqno}</td> 
```

曾经去服务器，表格还是没有表格？答案是，它不是。假设一个典型的表单帖子，您需要将值存储在隐藏字段中

```
<input type="hidden" name="displaySeqno" value="${prompt.displaySeqno}" /> 
```

然后它将到达服务器。如果您使用某种 Ajax 进行处理，则需要通过 API 将其作为参数传递。假设 jQuery，例如：

前面的伪代码：

```
var params = $('#youFormId').serialize();
$.post('some/url/to/post/to', params, function(data) { 
}); 
```

底线是，如果您想将某些内容传递给服务器，则必须提供实现此目的的方法。

# php - Apache 的带有 PHP 标头的 mod_proxy_html("Location:..."); 不重定向

> ID：15099855
> 
> 赞同：1
> 
> 时间：2013-02-26T21:40:06.633
> 
> 标签：php, redirect, http-headers, reverse-proxy, mod-proxy-html

我已经用谷歌搜索了这个问题的废话，但一无所获，所以希望你们能提供帮助。

**目标**
配置反向代理（使用 Apache 的 mod_proxy）以启用通过 Internet 访问内部 PHP 应用程序，*使用 mod_proxy_html 重写我的应用程序中的 URL。*

**问题描述**
考虑仅使用以下代码的landing.php：

```
<a href="redirect.php">redirect.php</a> 
```

和 redirect.php 仅：

```
<?php
    header("Location:http://internal.example.com/landing.php");
?> 
```

使用我的 httpd.conf 中的这个片段

```
UseCanonicalName On

LoadFile /usr/lib64/libxml2.so
LoadModule proxy_html_module modules/mod_proxy_html.so
LoadModule xml2enc_module modules/mod_xml2enc.so

<VirtualHost *:80>
    ServerName example.com

    <Proxy *>
            Order deny,allow
            Allow from all
            AllowOverride None
    </Proxy>

    ProxyPass / http://internal.example.com/
    ProxyPassReverse / http://internal.example.com/
    ProxyHTMLLinks a href #Commenting out this line fixes the problem, but I need it for rewriting
    ProxyHTMLEnable On
    RequestHeader unset Accept-Encoding
</VirtualHost> 
```

当我转到[http://example.com/landing.php](http://example.com/landing.php)并单击“redirect.php”时，它应该带我回到landing.php 页面。相反，我在 Firefox 中收到“此连接已重置”，或在 Chrome 中收到“未收到数据”。（仅供参考，去[http://internal.example.com/redirect.php](http://internal.example.com/redirect.php)重定向正确。）

**问题：**
为什么重定向会通过反向代理失败，我该如何解决这个问题？

**提示**
我发现了一些可能有用的东西......

我知道如果我注释掉“ProxyHTMLLinks a href”，这将正常工作。但显然，这是我需要的重写功能。

我还可以将 redirect.php 页面更改为以下内容，这样可以正常工作：

```
<?php
    header("Location:http://internal.example.com/landing.php");
?>
random text 
```

我猜这个文本以某种方式对页面或 HTTP 标头做了一些事情，使 mod_proxy_html（或更具体地说是 ProxyHTMLLinks）的运行方式与没有它时不同。

我还可以将 redirect.php 页面更改为以下内容并让它工作：

```
<?php
    header("Location:http://internal.example.com/landing.php");
    header("Content-Type:");
?> 
```

这是因为 ProxyHTMLLinks 默认只应用于 Content-Type 文本/html 文件。但是，我不想破解所有对 header("Location:...") 的调用来完成这项工作。我不介意更改对 header("Location:...") 的所有调用，假设我正在更改的是纠正问题，而不是创建 hack。

最后，我在反向代理服务器上进行了一些数据包嗅探，发现标头（“Location：...”）向反向代理服务器发送了 HTTP/1.1 302 Not Found，但它没有通过它到请求redirect.php 的浏览器。当我尝试上述“解决方案”之一时，302 然后从反向代理服务器传递到请求redirect.php 的计算机。我的理解是Location头应该去浏览器，然后浏览器应该请求传回的新位置。所以它失败了，因为 302 没有进入浏览器......

仅供参考，我已经尝试查看错误日志以查看 mod_proxy_html 是否在某处失败，但我没有看到任何内容，尽管我对有关日志记录的具体建议持开放态度，因为我不是 100% 确定我是否'正在正确设置日志记录。

抱歉，这太长了，只是想尽可能具体。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:40:12.293

我解决了这个问题。我需要在标头 Content-Type 中显式传递字符集才能使其正常工作。这是通过添加：

```
AddDefaultCharset utf-8 
```

到我的 Apache 配置文件。这全局修复了对 header("Location:...") 的所有调用，而无需向每个调用添加 header("Content-Type:") 或 header("Content-Type:text/html;charset=utf-8")其中之一。

简而言之，我所说的 mod_proxy_html 的 ProxyHTMLLinks 会导致 302 Found 不会从反向代理服务器转发到客户端，如果 a) 内容类型为 text/html（因此 ProxyHTMLLinks）适用，b) 字符集未设置并且 c) 您的页面没有传回的内容。

在我看来，这是一个正常的情况。处理表单输入的页面通常满足所有三个标准。

出于某种原因，这可能是预期的功能，并且我做错了其他事情，但我看不出那会是什么。至少这里有一个优雅的锻炼，以防有人发现它有用。

# c# - 如何以编程方式查找 PDF 中字符的位置并使用 iTextSharp 将表单域放在其顶部

> ID：15099856
> 
> 赞同：2
> 
> 时间：2013-02-26T21:40:06.740
> 
> 标签：c#, itextsharp

我怎样才能找到每个 SOH 字符，它看起来像 PDF 上的一个框，并在其顶部放置一个复选框表单域。这个问题很接近[使用 itextsharp 从 Pdf 文件中提取文本和文本矩形坐标，](https://stackoverflow.com/questions/4577789/extract-text-and-text-rectangle-coordinates-from-a-pdf-file-using-itextsharp)但我无法让它工作。下面是我正在尝试做的一些代码。如果那里已经有一个表格我不能放一个表格，那也是最好的。

```
StringBuilder text = new StringBuilder();

if (File.Exists(filePath))
{
    using (PdfReader pdfReader = new PdfReader(filePath))
    using (FileStream fileOut = new FileStream(@"C:\Projects\document.pdf", FileMode.Create, FileAccess.Write))
    using (PdfStamper stamp = new PdfStamper(pdfReader, fileOut))
    {

        for (int page = 1; page <= pdfReader.NumberOfPages; page++)
        {
            ITextExtractionStrategy strategy = new PdfHelper.LocationTextExtractionStrategyEx();
            string currentText = PdfTextExtractor.GetTextFromPage(pdfReader, page, strategy);

            currentText = Encoding.UTF8.GetString(ASCIIEncoding.Convert(Encoding.Default, Encoding.UTF8, Encoding.Default.GetBytes(currentText)));
            text.Append(currentText);

            int count = 0;
            foreach (var strat in ((PdfHelper.LocationTextExtractionStrategyEx)(strategy)).TextLocationInfo)
            {
                RadioCheckField checkbox = new RadioCheckField(stamp.Writer, new iTextSharp.text.Rectangle(strat.TopLeft[0], strat.BottomRight[1], (strat.TopLeft[0] + 5), (strat.BottomRight[1] - 5)), ("CheckBoxInserted" + count), "On");
                checkbox.CheckType = RadioCheckField.TYPE_SQUARE;
                stamp.AddAnnotation(checkbox.CheckField, page);
            }

            RadioCheckField checkField = new RadioCheckField(stamp.Writer, new iTextSharp.text.Rectangle(450, 690, 460, 680), "checkboxname", "On");
            checkField.CheckType = RadioCheckField.TYPE_SQUARE;
            stamp.AddAnnotation(checkField.CheckField, 1);
        }
    }
}
return text.ToString(); 
```

# jquery - Ember - RequireJS

> ID：15099857
> 
> 赞同：2
> 
> 时间：2013-02-26T21:40:12.703
> 
> 标签：jquery, ember.js, requirejs, handlebars.js

谁能帮助确定以下 Ember.js/Require.js 应用程序无法呈现索引视图的原因？Ember 部分 100% 独立工作。

**应用程序.html**

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <script data-main="../script/application" src="http://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.4/require.min.js"></script>
  </head>
  <body>
    <script type="text/x-handlebars-template" data-template-name="index">
      login page
      <a href="#" {{action "login"}}>Login</a>
    </script>
    <script type="text/x-handlebars-template" data-template-name="application">
      {{outlet}}
    </script>
  </body>
</html> 
```

**应用程序.js**

```
require(["library/jquery", "library/handlebars", "library/ember"], function() {
    Application = Ember.Application.create({
        LOG_TRANSITIONS: true
    });

    Application.IndexView = Ember.View.extend({});

    Application.IndexController = Ember.Controller.extend({
        login: function() {
            console.log("called login controller method.");
        }
    });

    Application.Router.map(function() {
        this.route("index", {
            path: "/login" 
        });
    }); 
}); 
```

我已确认 Require 已成功加载以下文件，并且 Safari 或 Chrome 浏览器中未显示脚本错误。

*   应用程序.html
    *   应用程序.js
    *   余烬.js
    *   车把.js
    *   jQuery.js
    *   要求.min.js

**版本信息**

要求：2.1.4

jQuery：v1.9.1

余烬：v1.0.0-rc.1

车把：1.0.0-rc.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T10:58:18.150

因此，经过一段时间的头部撞击和一夜情。我终于得到了一个 Ember & Require 玩得很好的例子。

[https://github.com/ben-crowhurst/EmberRequireSetup](https://github.com/ben-crowhurst/EmberRequireSetup)

发现了一些与加载应用程序模块/依赖项有关的问题，以及 Ember 设置和 DOM 解析的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T23:07:48.190

该问题可能是由于未将依赖项传递给函数体引起的。不这样做只有在所有依赖项都“安装”在全局范围内时才有效（这样做的好处之一`requirejs`是您可以完全不用担心这一点）。

试试这个：

```
require(["library/jquery", "library/handlebars", "library/ember"],
  function($, handlebars, Ember) {

    // verify that none of these is undefined
    console.log($, handlebars, Ember);

    var Application = Ember.Application.create({
        LOG_TRANSITIONS: true
    });

    (...)
}); 
```

如果打印到控制台的任何变量仍然存在，则`undefined`表明您的`requirejs`配置不正确。我强烈推荐 Chrome 的开发工具：您可以在函数体的第一行设置断点，并在应用程序冻结时调查本地/闭包范围。“暂停未捕获的异常”也有很大帮助。

此外，最好避免从模块内创建全局对象（这就是我`var`在 Application 变量中添加 a 的原因）；模块的目的之一是严格限制外部“泄漏”的内容。

最后，我不相信`requirejs`会使用`Handlebars`存储在标签内的`<script>`代码。甚至不能保证`Handlebars`在浏览器处理`application.html`. 我从来没有使用过`handlebars`，但如果是这样的话，我确信处理这个问题的正确方法已经在某处了:)。

# windows-store-apps - 打包 Windows 应用商店应用时出现 SignTool 错误

> ID：15099859
> 
> 赞同：3
> 
> 时间：2013-02-26T21:40:22.183
> 
> 标签：windows-store-apps, packaging, windows-store, signtool

在打包 Windows 应用商店应用程序期间，我收到一个未指定的错误 [APPX1204]：

```
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\AppxPackage\Microsoft.AppXPackage.Targets(1139,9): error APPX1204: Failed to sign 'D:\Projects\VS2012\Stroik\Stroik\AppPackages\Stroik_1.0.0.11_AnyCPU_Test\Stroik_1.0.0.11_AnyCPU.appx'. SignTool Error: An unexpected internal error has occurred. 
```

构建输出是指VS2012生成的文件的一部分：

```
<SignAppxPackage AppxPackageToSign="@(FinalAppxPackageItem)"
                 CertificateThumbprint="$(PackageCertificateThumbprint)"
                 CertificateFile="$(PackageCertificateKeyFile)"
                 HashUri="$(_HashUri)"
                 EnableSigningChecks="$(EnableSigningChecks)"
                 >
    <Output TaskParameter="ResolvedThumbprint" PropertyName="ResolvedThumbPrint"/>
    <Output TaskParameter="AppxPackagePublicKeyFile" PropertyName="AppxPackagePublicKeyFile" />
</SignAppxPackage> 
```

昨天打包顺利进行。今天我在我的应用程序中添加了额外的逻辑并更改了清单中的一些数据。从那时起，我收到了提出的错误。我试图在打包菜单中重新生成证书，删除存储/临时密钥（然后重新生成），......更多但没有任何帮助。现在我不知道如何处理它。此外，打包一个新项目（由 vs2012 提供）会导致相同的错误。

你有任何建议如何解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-23T22:36:28.940

如果它对其他人有帮助，我试图在网络共享上进行构建（虚拟化窗口）。在 Windows 分区上创建它解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-13T12:14:31.610

我在 VirtualBox 中的虚拟机上开发并尝试发布到共享文件夹。将输出文件夹更改为虚拟机上的本地文件夹即可解决。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T08:10:30.500

当然这是旧的 - 看看你是否可以尝试使用不同的 live id 你也可以尝试生成一个新的应用程序，并在应用程序之间区分清单。

现在根据：

[http://social.msdn.microsoft.com/Forums/en-US/toolsforwinapps/thread/f25939fb-c48c-4bd0-938e-6a0afbd2dca0/](http://social.msdn.microsoft.com/Forums/en-US/toolsforwinapps/thread/f25939fb-c48c-4bd0-938e-6a0afbd2dca0/)

您可能想退出，使用 IE“在安全的隐私浏览中”并创建一个新的。还要确保在“浏览历史记录->设置”中设置了 IE，以便每次获取新版本的页面。使用新的登录并尝试一下。

我不确定此错误是否与此处相关，但这是基于上述帖子的先前反馈的起点。

这个日本网站列出了相同的错误代码，似乎也有相同的分辨率

[http://coelacanth.heteml.jp/blog/windows-8signtool-error-an-unexpected-internal-error-has-occurred/](http://coelacanth.heteml.jp/blog/windows-8signtool-error-an-unexpected-internal-error-has-occurred/)

值得一试，但我承认这不是 100% 确定的，只是想帮忙:)

# perl - 我可以在哈希键之间搜索并将其值分配给 Perl 中的变量吗？

> ID：15099864
> 
> 赞同：-1
> 
> 时间：2013-02-26T21:40:46.310
> 
> 标签：perl, search, hash, pattern-matching, substr

我想使用 substr 函数来恢复序列中的一些核苷酸。这里我有这些序列的 FASTA 格式：

```
>dvex28051
AAAACAAAAACATTCGCTAGAAAGTAATCAGCTGGTCATTTATTTGAAATGTTAATGATATATTTCATGTTGCTAATTTTTTATGAAAAAAATCATTGCTTATTTAATTACTCTTGGTTCTTGACCAACTATAAAAGCATTGTTTAGTATCAAGTGTCCAGGTATCAGCAGTTTTGTTTGAAAACAAACTTTTATTCATGCAGTCAGTGGCGGATCCAGGTAGAGTGCAGAGGCAGCACCCTCCGTCAGAAAACCAAAAAAAGAAGAAATGAAAAATTATAAAAAAAATTTCTAAACGTTGGTGCACTTAAGTGTAGCAAAAAATTCCTGTTTAGATATTCAGTGGGGAGCGACACCTTTTGGGGCCTATAGCTTCAAATCTTACTTGGTGACCTAAAATCGCTTTTTCGTTGGATCTGCGAAAGCTAGAATTTGGTTGCTGCAAATCGAATCGGTGCATCAACTGCATCAATATCAACGATGTGGTGACTGGTGGTATATTTTGGGTTCGTGCAATGCTACATTTATTTCAATCATATTTCAAGGCAGAAAGGGAAAGAAAACATCAGGTCAAGACAGTGGCGTAGCGAGGGAAGGGGGGCATACGTCCCCGGGCGCAACACGATGTCTTTTTTTTTAATCATCTGCGAAATTCAGACATTTTTTAGAGACTAAATGAAACTATGGAAAACCGGGCCCTTATAAAAGTTGAGACCAAGTGAAAAACTGGGGATAAAACATGAAAATCGGGCTCCAAAAGAATGAGAGTCCGCCCTTGGTCTGTACCAGCATGATTTGAGCGCAAATTTCATTAAGCCCCCGGGCGCAAGACACTCACGCTACGCCCCTGGGTAAAGACAAACAGAGTAGTTTTTCTTATAAACACAAGCATGCACAAACAACATAAAAACAAAACACAGTTTTTTTTAAGACGATGTGCTGCGTGCACCCGCTCAATGTTTTTTTTTTTTTTTTATAGAAAAGCAAAACTTTGAAAGGTTAACGTCAACTCATTTTACAACAATTTGTGGCAAATGGTATCAAGGTATCAAGCAATTAACTAAATGTCTTCCACTAGAACGCAGAACACCATTTTGCAATTATTTATTTGATGTAAACCAGTGTGTTAGATCAAAATCACTTCGACGCCGTTTTTTGACTCCGTGAAAATCTTGGTATTCTTCTCGCATTGCATAATGATGGTTTGTTGAAATAAAATTAAACGCTTAACGTTCTTAAAATGAGCGCGATACTACTTTTCTTTGTAGATTTTCTGCATGCGCTCCTTTTAAGTTGATCCCGAGCTACAAACTTCTTTATGAACGTTTTGGATTTCTCCAAAATAAAGCCTGCAAGCAGTTTTCTAAAAACACCGCACCCCCCATTAGGAATTTCTAGATCCGCCCCTGCATACAGTATTTGTTAATTATTAAAACCAACCAGCAGCAATTGTTTATTCAATGACTATTAAACCAACCTGGATAGTGCGTTTGGTCTTGATTGAAGCGATTGCTGCATTGACGTCTTTCGGAACCACATCACC
>dvex294195
GAATCAGTGGAAAAGTCACAACGCAGCTTGCCGAATTACTGCAGATTCTTTACACTTTTTTTTCTACATTATCACTGTTTTGCTTAATTTTCAATTATAGAAATCAAAATTAATAACTGGTATGTAGTTGGTCGGTGCTTCGAGAAAGTAGCCTACTCAATGATTTCTCAGAATGTTACAGTACTTCAAAAAAACAGACTACCCATTTCAAAAAATATAAACCTAGTA 
```

我想将散列的每个键与该表的命中列 (dvex\d++) 进行比较：

```
#Query Hit  sense start end star_q end_q lenght_q # this line is informative don't make part of the code.
miRNA1 dvex28051 +  205     232     11  38  51
miRNA1 dvex202016 -  75    106  17  48  51
miRNA1 dvex294195 +  55     85     11  48  51 
```

如果存在，我想将其哈希值分配给一个变量（即：$sequence）以应用 substr 函数： `my $fragment = substr $sequence, $start, $length_sequence;`

我用序列制作了一个数组，并尝试读取每个 2 个值并进行比较：

```
while (my $line1 = <$MYINPUTFILE>){ #Entry of the sequences Fasta file
chomp $line1;
push @array_lines, $line1;
}
while (my $line2 = <$IN>){ #Entry of the table
chomp $line2;
push @database_lines, $line2;
}   
foreach my $database_line (@database_lines){ #each value of the table
my @entry = split /\s++/,$database_line;
$pattern = $entry[1];
$query = $entry[0];
$start = $entry[3];
$l_pattern = length $pattern;
$end = $entry[4];
$lng_sequence = ($end - $start) + 1;
$sense = $entry[2];
$l_query = $entry[7];

my $count = 2;
for (my $i = 0; $i <= $#array_lines; $i +=$count){
    chomp $array_lines[$i-2];
    chomp $array_lines[$i-1];   
    $seq = $array_lines[$i-1];
    $header = $array_lines[$i-2];
if($new_header =~ /$pattern/ && $l_header == $l_pattern){
    if(($end+$right_diff+$increment) > $l_query){
        $clean_seq = substr $seq, $start, $l_query;
} else {;} 
} 
```

我的代码的问题是 Perl 将 $seq 识别为最后一个序列。并且总是在这个 $seq 上应用 substr 函数。我需要搜索 $pattern 并在这些序列中搜索，如果存在，将 $seq 分配给它的序列，然后应用 substr 函数。一些建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:10:36.660

我发现您的代码存在两个重大问题。首先，在循环中：

```
for (my $i = 0; $i <= $#array_lines; $i +=$count){
    chomp $array_lines[$i-2];
    chomp $array_lines[$i-1];   
    $seq = $array_lines[$i-1]; 
```

`$i`第一次设置为零，但您访问数组元素`$i-1`和`$i-2`. Element`-1`将是数组的最后一个元素，并且`-2`是倒数第二个元素。因此，在您的循环中第一次看起来`$seq`并且`$header`会有不正确的值。也许您需要从零开始`$i`而`$count`不是从零开始？

其次，在这一行：

```
if(($end+$right_diff+$increment) > $l_query){ 
```

`$increment`仅出现在您的代码中。它永远不会被设置为任何东西。你的意思是在这里使用`$i`吗？

*其他一些建议：*

确保您`use warnings; use strict;`这将捕获诸如上述`$increment`变量之类的错误。

这是将文件读入数组的更简单方法：

```
my @array_lines = <$MYINPUTFILE>;
chomp @array_lines; 
```

在正则表达式中，`++`是一个禁用回溯的特殊量词。如果要拆分一个或多个空白字符，则更典型的是使用`split /\s+/`，或等效的`split ' '`

使用这一行，您似乎只是在检查两个字符串是否相等：

```
if($new_header =~ /$pattern/ && $l_header == $l_pattern) 
```

你可以这样做：

```
if($new_header eq $pattern) 
```

当您有多个条件时，将它们全部放在一个`if`语句中而不是使用嵌套语句会更清楚。如果您有许多条件，您可以将它们放在多行以清楚起见。

It is not necessary to use`else {;}` 如果你不需要在那里做任何事情，只需`else`完全省略该子句。

# three.js - 从 ThreeJS 中的外部文件加载着色器的问题

> ID：15099868
> 
> 赞同：3
> 
> 时间：2013-02-26T21:40:58.487
> 
> 标签：three.js, webgl, shader

之前（2 年前）和 ThreeJS github 和 SO 中的几个地方都曾问过这个问题。但是仍然有很多人（包括我）对此有疑问。这就是我现在得到的（这是更大系统的一部分）：

```
function dataLoader()
{
    this.data_count = 0;
    this.data_array = new Array();
}

function loadFile( file, loader ){
    var FileObject = new Object();
    FileObject.data  = "";
    FileObject.ready = false;
    FileObject.id    = loader.data_count;
    loader.data_array[loader.data_count] = false;
    $.ajax({
        type: "GET",
        url: file,
        dataType: "text"
    }).done( function( msg ) {
        FileObject.data = msg;
        FileObject.ready = true;
        loader.data_array[FileObject.id] = true;
    });
    loader.data_count += 1;
    return FileObject;
} 
```

然后我这样做：

```
var loader = new dataLoader();
var SkyVertexShader = loadFile( "Shaders/sky.frag", loader );
var SkyFragmentShader = loadFile( "Shaders/sky.vertex", loader ); 
```

然后我创建这样的材料：

```
var skyMat = new THREE.ShaderMaterial( { vertexShader: SkyVertexShader.data, fragmentShader: SkyFragmentShader.data, uniforms: uniforms, side: THREE.BackSide } ); 
```

sky.frag 和 sky.vertex 中的着色器是没有任何标签或任何东西的纯文本。当我调试时，我可以看到 SkyFragmentShader.data 和 SkyVertexShader.data 都设置正确。着色器来自[webgl_lights_hemisphere](https://threejs.org/examples/webgl_lights_hemisphere.html)示例。但是当我加载我得到这个错误：

```
ERROR: 0:37: 'modelMatrix' : undeclared identifier
ERROR: 0:37: 'position' : undeclared identifier 
ERROR: 0:37: 'constructor' : not enough data provided for construction 
ERROR: 0:38: 'assign' : l-value required "vWorldPosition" (can't modify a varying) ERROR: 0:40: 'gl_Position' : undeclared identifier 
ERROR: 0:40: 'projectionMatrix' : undeclared identifier 
ERROR: 0:40: 'modelViewMatrix' : undeclared identifier 
ERROR: 0:40: 'constructor' : not enough data provided for construction 
ERROR: 0:40: 'assign' : cannot convert from '4-component vector of float' to 'float' � 
```

但是当我这样做时它会起作用（就像在示例中一样）：

```
var fragmentShader = document.getElementById( 'fragmentShader' ).textContent;
var vertexShader = document.getElementById( 'vertexShader' ).textContent;
var skyMat = new THREE.ShaderMaterial( { vertexShader: vertexShader, fragmentShader: fragmentShader, uniforms: uniforms, side: THREE.BackSide } ); 
```

当然，这最后一部分仅在 HTML 中具有着色器时才有效。因此，即使 .textContent 方法和 Ajax GET 方法之间的内容几乎相同（只是一些制表符和换行符），它也会显示有关未定义变量的语法错误。那么是什么原因造成的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:23:59.473

好的，我想通了。我以相反的顺序加载它们，这使得顶点着色器成为第一个，片段化成为第二个。这使得 ThreeJS 在错误的位置添加代码并导致错误。遗憾的是，它让我调试了很长时间，因为这些错误看起来很笼统，但是可以通过 Firebug 获得完整的生成着色器文本，这很有帮助。但感谢 gaitat，它确实让我在加载时看得更仔细。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-10T22:01:16.273

这是一个不错的轻量级外部着色器加载器：[https ://github.com/codecruzer/webgl-shader-loader-js](https://github.com/codecruzer/webgl-shader-loader-js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T22:19:07.570

如果您指的是这篇文章[https://github.com/mrdoob/three.js/issues/283](https://github.com/mrdoob/three.js/issues/283)（两年前），您并没有完全遵循他们的解决方案。您是否尝试将“async: false”设置为您的 ajax 请求以获得同步请求，因为您可能试图在着色器实际加载之前执行它们。

# python - 将文件读入字典

> ID：15099889
> 
> 赞同：1
> 
> 时间：2013-02-26T21:42:07.183
> 
> 标签：python, file-upload, dictionary, delimiter

我想知道是否有一种方法可以将分隔文本读入字典。我已经能够将它放入列表没问题这里是代码：

```
def _demo_fileopenbox():        
    msg  = "Pick A File!"
    msg2 = "Select a country to learn more about!"
    title = "Open files"
    default="*.py"
    f = fileopenbox(msg,title,default=default)
    writeln("You chose to open file: %s" % f)
    c = []
    a = []
    p = []

    with open(f,'r') as handle:
        reader = csv.reader(handle, delimiter = '\t')  
        for row in reader:
            c = c + [row[0]]
            a = a + [row[1]]
            p = p + [row[2]]
        while 1:
            reply = choicebox(msg=msg2, choices= c )
            writeln( reply + ";\tArea: " + a[(c.index(reply))] + " square miles \tPopulation: " + p[(c.index(reply))] ) 
```

该代码使其成为 3 个列表，因为每一行文本都是一个国家名称、地区和人口。我就是这样，所以如果我选择一个国家，它会给我有关流行和地区的相应信息。有人说字典是更好的方法，但首先我不认为我可以将三件事放在字典中的一个位置。我需要国家名称作为键，然后人口和地区是该键的信息。2个字典可能有用吗？但我只是不知道如何从文件到字典，有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:52:48.277

您可以使用两个字典，但也可以使用这样的 2 元组：

```
countries = {}

# ... other code as before

    for row in reader:
        countries[row[0]] = (row[1], row[2]) 
```

然后你可以像这样遍历它：

```
for country, (area, population) in countries.iteritems():
    # ... Do stuff with country, area and population 
```

...或者您可以访问特定国家/地区的数据，如下所示：

```
area, population = countries["USA"] 
```

最后，如果您打算在将来添加更多信息，您可能希望使用类作为保存信息的更优雅的方式 - 这使得编写在添加新内容时不会中断的代码变得更加容易。你会有这样的课程：

```
class Country(object):

    def __init__(self, name, area, population):
        self.name = name
        self.area = area
        self.population = population 
```

然后您的阅读代码将如下所示：

```
for row in reader:
    countries[row[0]] = Country(row[0], row[1], row[2]) 
```

或者，如果您让构造函数采用整行而不是单个项目，您可能会发现以后扩展格式更容易，但您也将类更紧密地耦合到文件中的表示。这仅取决于您认为以后如何扩展内容。

然后你可以这样查找：

```
country = countries["USA"]
print "Area is: %s" % (country.area,) 
```

这样做的好处是您可以添加新的方法来在将来做更聪明的事情。例如，返回人口密度的方法：

```
class Country(object):

# ...

    def get_density(self):
        return self.population / self.area 
```

一般来说，一旦您超出了存储多个项目的范围，我会推荐使用嵌套字典之类的类。它们使您的代码更易于阅读并且以后更易于扩展。

然而，与大多数编程问题一样，其他方法也可以使用 - 这是选择最适合您的方法的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:46:57.743

像这样的东西应该工作：

```
from collections import defaultdict

myDict = {}
for row in reader:
    country, area, population = row
    myDict[country] = {'area': area, 'population': population} 
```

请注意，您必须添加一些错误检查，以便在每行中有大于或小于三个分隔项时您的代码不会中断。

您可以按如下方式访问这些值：

```
>>> myDict['Mordor']['area']
175000
>>> myDict['Mordor']['population']
3000000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:46:49.760

字典的值可以是人口和地区信息的元组。所以当你读入文件时，你可以做一些事情，比如

```
countries_dict = {}

for row in reader:
        countries_dict[row[0]] = (row[1],row[2]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T21:50:20.737

```
data = []

with open(f,'r') as handle:
    reader = csv.reader(handle, delimiter = '\t')  
    for row in reader:
        (country, area, population) = row
        data.append({'country': country, 'area': area, 'population': population}) 
```

然后数据将是一个*字典列表*。

但我不确定这真的是一个更好的方法，因为它会使用更多的内存。另一个选项只是列表列表：

```
data = list(csv.reader(open(f), delimiter='\t'))
print data
# [['USA', 'big', '300 million'], ...] 
```

# c# - 如何在字典中搜索？

> ID：15099892
> 
> 赞同：0
> 
> 时间：2013-02-26T21:42:17.717
> 
> 标签：c#, search, for-loop, dictionary

我正在尝试在字典中搜索。我有两本词典：

```
Dictionary<int, string> dict = new Dictionary<int, string>()
Dictionary<int, int> temp = new Dictionary<int, int>() 
```

然后我用以下内容填充了这本字典：

```
dict.Add(123, "");
dict.Add(124, ""); //and so on 
```

然后我想遍历这本字典并调用键并将其添加到另一个字典

```
for (int i = 0; i < dict.Count; i++)
{
   if (dict[i] == "")
   {
        temp.Add(dict[dict.ElementAt(i).Key],0);
        dict[dict.ElementAt(i).Value] = "Moved";
   }
} 
```

我将在这个 forloop 中做其他事情，所以我不能将其更改为 foreach 循环。我正在尝试检查 Dictionary dict 的值是否为空，然后获取 Key 并将键值复制到 temp 字典，但我收到错误。请帮忙 ：）

我试图解决的问题是我希望能够在 dict 字典中搜索带有“”的值并获取密钥并将其存储在另一个字典 temp 中（稍后将保存第二个值）。我需要在 for 循环中执行此操作，因为我希望能够通过更改 i 的值返回。

我希望能够使用 i 从 dict 字典中选择键和值。

我得到的错误只是从字符串转换为 int，我什至无法将密钥从 dict 存储到 int 变量中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:50:55.510

我想这就是你要找的：

```
Dictionary<int, string> dict = new Dictionary<int, string>();
List<int> temp = new List<int>();

dict.Add(123, "");
dict.Add(124, ""); //and so on

foreach (int key in dict.Keys.ToList())
{
            if (dict[key] == "")
            {
                temp.Add(key);
                dict[key] = "Moved";
            }
        }
} 
```

* 首先， notice`temp`是*List*，而不是*Dictionary*，因为您只是添加键，没有**key => 值**（如果您可以更好地解释为什么需要将其作为字典，则可以更改）...
其次，请注意我曾经`dict.Keys`获取字典中的所有键。我也使用`ToList()`它，所以它可以在 foreach 循环中工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:51:47.507

您是否收到字典定义的编译错误

```
Dictionary<int, int> temp = new Dictionary<int, temp>(); // int, temp? 
```

如果是这样的话，

```
Dictionary<int, int> temp = new Dictionary<int, int>(); // int, int 
```

?

或者，您会遇到以下错误：

```
 temp.Add(dict[dict.ElementAt(i).Key]); 
```

因为您只是添加了一个键，没有任何价值。它会像

```
 temp.Add(i, dict[i]); ? 
```

如果您只是使用 temp 来保存键值，则不需要字典，您可能需要 HashSet（只有键，没有键+值）

如果您准确地解释您要解决的问题，这可能是您可以使用单个 linq 语句轻松完成的事情？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:51:51.757

为什么是`temp`字典？我会使用`List<int>`带有空（null？）值的字典的所有键。

```
List<int> keysWithEmptyValuesInDictionary = dict
    .Where(kvp => string.IsNullOrEmpty(kvp.Value))
    .Select(kvp => kvp.Key)
    .ToList();
foreach (int key in keysWithEmptyValuesInDictionary)
{
    dict[key] = "moved";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T22:05:06.323

您需要在临时字典中输入一个值。我选择了0。

```
 Dictionary<int, string> dict = new Dictionary<int, string>();
        Dictionary<int, int> temp = new Dictionary<int, int>();

        dict.Add(123, "");
        dict.Add(124, ""); //and so on

        int[] keys = dict.Keys.ToArray();
        for (int i = 0; i < dict.Count; i++)
        {
            if (dict[keys[i]] == "")
            {
                temp.Add(keys[i],0);
                dict[keys[i]] = "Moved";
            }
        } 
```

# django - Django - CharField 中的 Char ' 和 " 在模板中未正确呈现

> ID：15099893
> 
> 赞同：0
> 
> 时间：2013-02-26T21:42:18.170
> 
> 标签：django, django-templates

我有带有 ' 和 " 字符的 CharField。当我在带有 的模板中传递此字段时`{{ charfield }}`，它会呈现为`&quot`而不是 " 和`&#39`而不是 '。

这种行为的根源是什么以及如何避免它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:48:55.040

默认情况下，进入 HTML 模板的所有变量都会[自动转义](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#autoescape)，以避免通过恶意制作的用户输入产生[XSS漏洞。](http://en.wikipedia.org/wiki/Cross-site_scripting)

如果您完全确定变量的内容是安全的，您可以使用标记在块级别关闭自动转义：

```
{% autoescape off %}
    {{ charfield }}
{% endautoescape %} 
```

或带有过滤器的可变级别：

```
{{ charfield|safe }} 
```

# javascript - 声云 CORS

> ID：15099895
> 
> 赞同：3
> 
> 时间：2013-02-26T21:42:23.503
> 
> 标签：javascript, soundcloud, cors

[正如我在文档 ( http://developers.soundcloud.com/docs/api/guide#crossdomain](http://developers.soundcloud.com/docs/api/guide#crossdomain) )中所读到的，Soundcloud api 应该支持 cors 。

但我认为情况并非如此：

```
XMLHttpRequest cannot load http://ec-media.soundcloud.com/fxguEjG4ax6B.128.mp3?longurldata... Cannot make any requests from null. 
```

我究竟做错了什么？我正在尝试使用 aurora.js + mp3.js 播放流。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:44:36.407

支持[CORS](http://www.w3.org/TR/access-control/)不是全有或全无，服务器端选择支持*特定*的来源（以及标头和方法）。

在您的情况下，您似乎是从本地文件（origin `null`）进行调用，例如您通过从文件系统或类似文件中双击加载的 HTML 文档。显然他们不允许这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:25:33.943

不幸的是，目前，从 CDN（子域）传递的 mp3 文件上未启用 CORS 标头`ec-media`。如果您需要通过 XHR 请求这些文件，则需要使用代理。

从 API 返回的 JSON 数据启用了 CORS 标头，但不是 mp3。

如果您尝试使用 Web Audio API，您可以`mediaElementSource`通过设置音频的属性来使用和加载 mp3 `src`，以用作“媒体源”，如此[处](https://stackoverflow.com/a/13459250/236135)所述。

# c++ - gtksourceview 在代码块中编译

> ID：15099897
> 
> 赞同：0
> 
> 时间：2013-02-26T21:42:46.810
> 
> 标签：c++, gtk, codeblocks, gtksourceview

我想在我的 c++ 项目中使用 gtksourceview。我挖掘了 code::blocks 的 IDE，发现它真的很有帮助。我在链接器中指定 gtkmm 目录并包含选项，但是当我寻找 gtksourceview 时，我发现了一个 libgtksourceview-2.0-0.dll 文件，我真的不知道如何在 code::blocks 中添加它并使用 gtksourceview。我刚刚在微控制器的 C 语言方面有编程经验，现在我对 gcc 和 g++ 的编译过程还不太了解。我可以将文件指令添加为

```
 #include <gtksourceview/gtksourceview.h> 
```

如果这对某人来说似乎是一个基本的问题，但我真的坚持编译代码然后问，请帮助抱歉。顺便说一句，我正在使用Windows。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:47:42.113

有两个不同的东西：运行时库和开发头文件。前者允许您运行应用程序（也可以链接它们），后者允许您编译它们。要么您缺少头文件（示例中为 gtksourceview.h），要么在 IDE 中设置 PATH 以查找头文件。

检查[手册](http://www.codeblocks.org/docs/main_codeblocks_en3.html#x3-350001.11.14)中的“包括库”。

# twitter - 推特分享按钮中的问号

> ID：15099899
> 
> 赞同：0
> 
> 时间：2013-02-26T21:42:52.607
> 
> 标签：twitter, share, social

有谁知道 twitter 分享按钮的文本中是否允许使用问号？我有以下代码，当我单击共享并出现弹出按钮时，消息停止在“谁是你最喜欢的候选人”。它不会读取超过问号的文本。

```
<?php
 $text = "Who's your favorite candidate ? This is another message";?>
<a href="https://twitter.com/share?text=<?php echo $text; ?>&url=<?php echo $decoded_url; ?>&hashtags=contesthashtag" class="twitter-share-button" data-lang="<?php echo $lang; ?>" data-hashtags="contesthashtag" data-url="<?php echo $fanpage_url; ?>" data-text="<?php echo $text; ?>">Click here to share on Twitter</a> 
```

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:57:02.217

在将文本作为链接放置之前，您需要对文本进行 urlencode。

```
<?php
$text = urlencode("Who's your favorite candidate ? This is another message");
?> 
```

然后通过 twitter 分享按钮链接传递该 $text 变量。

# silverlight - 有没有办法让 Yslow 与 Silverlight 或 Lightswitch 一起工作？

> ID：15099903
> 
> 赞同：0
> 
> 时间：2013-02-26T21:43:07.783
> 
> 标签：silverlight, visual-studio-lightswitch, yslow

我尝试在 LS/SL 应用程序上运行 Yslow，但每次运行它时，yslow 应用程序都会挂起并且无法处理。我可以做些什么来让 yslow 在 SL/LS 应用程序上工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-30T16:02:01.617

使用以下方法之一：

*   [y慢速书签](https://developer.yahoo.com/yslow/mobile/)

*   [xPerf](http://blogs.msdn.com/b/ie/archive/2010/06/21/measuring-browser-performance-with-the-windows-performance-tools.aspx#10034329)

# sql - 在数据库表的单元格中选择语句

> ID：15099905
> 
> 赞同：0
> 
> 时间：2013-02-26T21:43:11.290
> 
> 标签：sql, select, database-table

我有一个基本的数据库表。我想实现一个允许在表中的随机单元格中插入选择查询的功能。然后，此查询的结果将用作任何其他基本类型的单元格 - 在我的情况下，将其与另一个值进行比较。

问题是我事先不知道这些查询的样子。

这是一个例子。假设我有一个传入参数“score”，它假定一些随机整数值。我想看看参数“score”是否落在 Col1 和 Col2 中的值之间定义的范围内，如果发生这种情况，则返回 Col3 中的值。

```
Table1:

Col1   Col2    Col3
5      10      first row
10     15      second row
20     30      third row
*      50      forth row

    * -> select avg(some_number) from Table2; 
```

这个随机查询可以发生在任何单元格中，并且肯定会返回一个值。这就是为什么我不能使用简单的 JOIN 语句。

编辑：感谢蒂姆建议举个例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:14:23.323

您应该查看 SQL 中的 CASE 语句，以及其值是表达式或函数的结果的虚拟或符号列。

# php - PHP：计算重复并删除重复的行

> ID：15099907
> 
> 赞同：0
> 
> 时间：2013-02-26T21:43:13.570
> 
> 标签：php, mysql

我有一个访问者 IP 的 mysql 数据库，我正在尝试创建一个 HTML 表，显示这些 IP 中有多少来自 X 国家/地区。我可以获得显示访问者来自哪个国家/地区的脚本，但我似乎无法找到一种方法来分组而不是逐行显示它。

例如，目前我得到：

```
Country | Visitors
------------------
US      | Array
UK      | Array
UK      | Array
UK      | Array
US      | Array
MX      | Array
MX      | Array 
```

我想要的是：

```
Country | Visitors
------------------
US      | 2 Visitors
UK      | 3 Visitors
MX      | 2 Visitors 
```

我试过`array_count_values`了，但它仍然逐行列出每个访问者，并为每一行分配一个“数组”值。

IP 位于数据库中，脚本提取 IP，然后根据单独文件中的数据为 IP 分配国家代码值。

这是我用我的业余技能破解的。如果有更好的方法来实现这一点，欢迎提出建议！

```
require_once("geoip.inc");
$gi = geoip_open("GeoIP.dat",GEOIP_STANDARD);

include_once($_SERVER['DOCUMENT_ROOT'] . 'connect.php'); 

/* Performing SQL query */
 $data = mysql_query("SELECT * FROM the_ips LIMIT 100")
 or die(mysql_error());

 echo "<table>";
 echo "<td><strong>Country</strong></td><td><strong>Visitors</strong></td></tr>";

 while($info = mysql_fetch_array( $data ))
     {
      $ip = $info['ip_address'];
      $country_code = geoip_country_code_by_addr($gi, $ip);
      $countrylist = array($country_code);
      $frequency = array_count_values($countrylist);

      echo "<tr><td style='width: 100px;'>".$country_code."</td><td style='width: 100px;'>".$frequency."</td></tr>";
     }
 echo "</table>";
 geoip_close($gi); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:49:27.237

```
SELECT
     Count(Distinct country) As country_number
   , country
 FROM the_ips
 GROUP BY country
 LIMIT 100 
```

试试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T06:51:13.213

对于寻找删除重复条目的确切方法的其他人，这里是。假设您的重复项位于“名称”列中。只需将“名称”和“ID”更改为您的表格各自的列名。

```
// Select duplicate entries
$result = mysql_query("SELECT id, name
                       FROM tble_name
                       GROUP BY name
                       HAVING COUNT(*) > 1");
// Loop through the results
while($rows=mysql_fetch_assoc($result)){
// Delete each row by id
          mysql_query("DELETE FROM tble_name
          WHERE id = ".$rows['id']."");
} 
```

**注意：**这将永久删除选定的结果，如果您不确定，请务必在弄乱任何 DELETE 查询之前备份您的数据。

我希望这有帮助 ：）

# .htaccess - 将 localhost 子地址重定向到另一个文件夹

> ID：15099909
> 
> 赞同：0
> 
> 时间：2013-02-26T21:43:22.507
> 
> 标签：.htaccess, mod-rewrite

我的“htdocs”文件夹设置为： `C:\webserver\xampp\htdocs`
我的所有文件夹都存在于该文件夹的子文件夹中。

我这里有另一个文件夹：`c:\MyProjects\project1`

我需要重写，所以当我写：`http://127.0.0.1/project1/myfile.php` 在我的浏览器上，我会在“project1”文件夹中看到“myfile.php”的结果。

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:34:49.643

> 可能吗？

不，您不能在文档根目录*之外*`C:\webserver\xampp\htdocs`重写 URI ，. 并且位于该目录中的 htaccess 文件`htdocs`将无法指向`htdocs`目录之外的请求。Mod_rewrite 无论如何都不是你想要的。您想在 vhost 配置或服务器配置中使用[mod_alias](http://httpd.apache.org/docs/2.2/mod/mod_alias.html#alias)。类似于以下内容：

```
Alias /project1 C:/MyProjects/project1 
```

另请参阅：[在 htdocs 之外制作 XAMPP/Apache 服务文件](https://stackoverflow.com/q/1408/851273)

# vbscript - 将 vbs 变量传递给批处理文件

> ID：15099910
> 
> 赞同：0
> 
> 时间：2013-02-26T21:43:28.870
> 
> 标签：vbscript, dos

我正在尝试将 vbs 变量作为参数传递到我的批处理文件中：

vbs代码：

```
Set WShShell = CreateObject("WScript.Shell")
dim nextday
nextday= DateAdd("d",1,dtmStart)
strRun = "Batch1.bat" & nextday
WshShell.Run(strRun) 
```

批号：

```
"C:\AscendQrx\bselstmt.exe" NOCONFIRM DATABASE=ddd var=ccc date=nextday 
```

获取错误语法错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:16:24.767

为什么不从 vbscript 运行命令而不是调用批处理文件？在我更熟悉如何使用 .Run 之前，我曾经做过同样的事情

试试这个，让我知道

```
Set WShShell = CreateObject("WScript.Shell")
dim nextday
nextday= DateAdd("d",1,dtmStart)
strRun = "C:\AscendQrx\bselstmt.exe NOCONFIRM DATABASE=ddd var=ccc date=" & nextday
WshShell.Run(strRun) 
```

# wordpress - 将 API 转换为 Wordpress 插件

> ID：15099912
> 
> 赞同：0
> 
> 时间：2013-02-26T21:43:39.580
> 
> 标签：wordpress

我创建了一个表，它使用简单的 JS 和 API 来获取有关我们的 Android 应用程序的信息。我们希望在多个页面上有此代码

```
<div class="api">
<div style="margin: 0 auto; max-width: 700px;">
<div style="float: left;">
<table style="background-color: #e7e7e27; border-color: #e2e2e2;">
<td style="vertical-align: middle; text-align: center; background: #e2e2e2; border-top: 0px; ">
<a rel="nofollow" href="https://play.google.com/store/apps/<!---package name--->" class="no_ul external" target="_blank">
<img src="http://developer.android.com/images/brand/Google_Play_Store_96.png" style="width:90px; border:0" alt="<!---Verbage--->" title="<!---Verbage--->">
</a>
</td>
</table>
</div>
<div style="float: left;">
<div class='appbrain-app'>
<a href='http://www.appbrain.com/app/<!---package name--->' style='font-size: 11px; color: #555; font-family: Arial, sans-serif;'>
</a>
</div> 
<script type='text/javascript' language='javascript' src='http://www.appbrain.com/api/api.nocache.js'></script>
</div>
</div>
</div> 
```

不是最漂亮的代码，但它完成了我们想要的工作。我想把它变成一个带有短代码的插件来引用它。我知道这可能比我预期的要大，而且我对 HTML 和 wordpress 有很好的理解，但这是我创建的第一个插件。

谢谢，格雷迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:35:58.413

执行此操作的插件相当简单，因为您只是在回显静态数据。

```
class My_App_Data {

  function __construct() {
    add_shortcode('app_data',array($this,'app_data_shortcode'));
  }

  function app_data_shortcode() { ?>
    <div class="api">
      <div style="margin: 0 auto; max-width: 700px;">
    <div style="float: left;">
      <table style="background-color: #e7e7e27; border-color: #e2e2e2;">
        <td style="vertical-align: middle; text-align: center; background: #e2e2e2; border-top: 0px; ">
          <a rel="nofollow" href="https://play.google.com/store/apps/<!---package name--->" class="no_ul external" target="_blank">
        <img src="http://developer.android.com/images/brand/Google_Play_Store_96.png" style="width:90px; border:0" alt="<!---Verbage--->" title="<!---Verbage--->">
          </a>
        </td>
      </table>
    </div>
    <div style="float: left;">
      <div class='appbrain-app'>
        <a href='http://www.appbrain.com/app/<!---package name--->' style='font-size: 11px; color: #555; font-family: Arial, sans-serif;'></a>
      </div> 
      <script type='text/javascript' language='javascript' src='http://www.appbrain.com/api/api.nocache.js'></script>
    </div>
      </div>
    </div><?php
  } 
}
new My_App_data(); 
```

您现在可以使用`[app_data /]`来显示标记。

您将需要构建一个[适当的插件头](http://codex.wordpress.org/File_Header#Plugin_File_Header_Example)，并为该类使用更好的名称:)。

## 参考

[https://codex.wordpress.org/Writing_a_Plugin](https://codex.wordpress.org/Writing_a_Plugin)

# html - 在 HTML 中设置新的预渲染或预取的正确方法是什么？

> ID：15099915
> 
> 赞同：12
> 
> 时间：2013-02-26T21:43:43.400
> 
> 标签：html, google-chrome, firefox, prefetch, prerender

```
<!DOCTYPE html>
<meta charset="utf-8">
<title>An HTML Document</title>
<link rel="prefetch" href="https://www.apple.com/">
<link rel="prerender" href="https://www.apple.com/">
<script>
    document.addEventListener('click', function () {
        // Prerendering https://www.apple.com/ipad on Chrome.
        // ...

        // Prefetching https://www.apple.com/ipad on Firefox.
        // ...
    }, false);
</script> 
```

打开页面时，[https](https://www.apple.com/) ://www.apple.com/ 会在不同的浏览器上进行预渲染和预取。单击文档时，我希望预渲染和预取另一个页面[https://www.apple.com/ipad](https://www.apple.com/ipad)。

看来我们有两种方法可供选择。我们可以替换当前 2 个`link`元素中的 URL。或者我们可以在元素中插入 2 个新`link`元素`head`。

在 HTML 中设置新的预渲染的正确方法是什么？

在 HTML 中设置新预取的正确方法是什么？

我试图在 Chrome 上将 prerender`link`元素的 URL 从[https://www.apple.com/](https://www.apple.com/)替换为[https://www.apple.com/ipad](https://www.apple.com/ipad)。我打开了 Chrome 的任务管理器，发现[https://www.apple.com/ipad](https://www.apple.com/ipad)没有被预先设置。唯一的预渲染页面仍然是[https://www.apple.com/](https://www.apple.com/)。所以看来这种方法行不通？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-07-02T15:11:23.233

`<link rel="prefetch">`实际上是[HTML 5 规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#link-type-prefetch)的一部分。

`<link rel="prerender">`看来是[谷歌在做自己的事情](https://developers.google.com/chrome/whitepapers/prerender)。

[贾斯汀](https://stackoverflow.com/users/201853/justin)是不正确的。您确实需要 prefetch 和 prerender （或至少一个将同时输出两者的 polyfill），因为[FF 支持 prefetch](https://developer.mozilla.org/en-US/docs/Link_prefetching_FAQ)而[Chrome 支持 prerender](https://developers.google.com/chrome/whitepapers/prerender)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-06T01:34:07.537

首先，您对`prefetch`&`prerender`用法之间的混合有点困惑。它们的用法应该是这样的：

**`prefetch`用法：**

[根据官方 HTML5 规范](https://html.spec.whatwg.org/multipage/semantics.html#link-type-prefetch)，它应该用于为以后的用户导航获取和缓存资源（即预取一个 css 文件以在用户很可能在即将进行的导航中使用的页面中使用）。*在 Chrome、Firefox 和 IE 中支持*。

**`prerender`用法：**

它应该用于预渲染一个完整的页面，用户很可能会在即将到来的导航中导航到该页面（例如预渲染下一篇文章，用户很可能会点击“下一篇文章”按钮）。*仅在 Chrome 和 IE 中受支持*。

* * *

**回到您的问题**，您可以根据需要添加浏览器提示（即`link`您使用的两个提示），只是不要滥用它们，因为它们会占用大量资源。

因此，您可以在生成页面时注入提示（就像您所做的那样），或者您可以在*运行时*使用 javascript 注入它们，如下所示：

```
var hint = document.createElement("link");
hint.setAttribute("rel", "prerender");
hint.setAttribute("href", "https://www.apple.com/ipad");

document.getElementsByTagName("head")[0].appendChild(hint); 
```

为了更好地了解您可以使用所有`"pre-"`好东西做什么，请参阅 google 的精彩[演示](https://docs.google.com/presentation/d/18zlAdKAxnc51y_kj-6sWLmnjl6TLnaru_WH0LJTjP-o/present?slide=id.p19)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-17T20:47:31.087

1）您不需要同时使用预取和预渲染链接，您只需要预渲染。预渲染链接将加载预取所做的一切，等等。

2) 要回答您的问题，请使用方法 2 并使用 javascript 插入另一个预渲染链接。一些东西链接这个：

```
<script>
var myHead = document.getElementsByTagName('head')[0];
var myLink = document.createElement('link');
myLink.setAttribute('rel', 'prerender');
myLink.setAttribute('href', 'http://apple.com/ipad');
myHead.appendChild(myLink);
</script> 
```

或者，如果您使用 jQuery：

```
$("head").append('<link rel="prerender" href="http://apple.com/ipad">'); 
```

# sqlite - sqlite：查询以从相邻行中添加（减去）单元格并将结果放入新列

> ID：15099916
> 
> 赞同：0
> 
> 时间：2013-02-26T21:43:45.023
> 
> 标签：sqlite, cursor, calculated-columns

我正在检查 FireFox 的 SQLite 管理器中的 .sqlite 文件，需要查看是否没有收集任何数据。一个例子值一千字：

```
ReadDate            ReadValue
1361900350183.00    137
1361899753183.00    139
1361900053183.00    138 
```

它们没有主键，并且表不按 ReadDate 或时间排序。[更改输入表不是一种选择！] 我想做的是用简单的 SQL 生成一个如下所示的表：

```
ReadDate            ReadValue  TimeOffset 
1361899753183.00    139
1361900053183.00    138        300000  // this is ReadDate(1) - ReadDate(0)  
1361900350183.00    137        297000  // this is ReadDate(2) - ReadDate(1) 
```

这将允许我检查数据并查看是否未捕获任何数据值（TimeOffset 将远大于 300000）。我还可以编写一个附加查询来获取超过阈值的所有 TimeOffset 的 COUNT。我无法进行我想象的简单练习。我知道如何进行连接和排序（排序），但在这里我需要将一行与另一行进行比较。我需要一个光标吗？以及如何获得额外的列？我有一种直觉，如果我稍微了解一下词汇，我就能想出搜索词并快速找到答案。非常感谢，戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:15:55.253

首先，在表中[添加一个（空）列](http://www.sqlite.org/lang_altertable.html)：

```
ALTER TABLE MyTable ADD COLUMN TimeOffset NUMERIC; 
```

然后，每条记录的 是*该*记录的列与下一个较小的记录的列`TimeOffset`之间的差异，即最大的记录仍然小于该记录：`ReadDate`*`ReadDate``ReadDate`*

 *```
UPDATE MyTable
SET TimeOffset = ReadDate - (SELECT MAX(ReadDate)
                             FROM MyTable AS t2
                             WHERE t2.ReadDate < MyTable.ReadDate); 
```*

# php - 如何使用 PHP 和 ffmpeg 将 Web 表单上传的 mp3 转换为 wav？

> ID：15099921
> 
> 赞同：-1
> 
> 时间：2013-02-26T21:44:00.427
> 
> 标签：php, ffmpeg, mp3, wav

我有一个表单，管理员可以在其中上传 mp3。当我处理表单提交时，是否可以使用 PHP 中的 ffmpeg 将该 mp3 转换为 wav？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:49:22.993

第二个谷歌结果：`ffmpeg -i foo.mp3 -acodec pcm_s16le bar.wav`。用`shell_exec`.

# python - Django 错误 - 指的是表单中缺少的字段“n”

> ID：15099923
> 
> 赞同：1
> 
> 时间：2013-02-26T21:44:03.050
> 
> 标签：python, django, fieldset

我开始掌握 Django，并通过建立一个俱乐部会员网站来练习。在我为成员创建的应用程序的 admin.py 中，我收到以下错误：

> 'StudentAdmin.fieldsets[3][1]['fields']' 指的是表单中缺少的字段 'n'。

这是它引用的 models.py 部分（_CHOICES 元组工作正常）：

```
firstname = models.CharField(max_length=30)
surname = models.CharField(max_length=30)
dob = models.DateField(default='01/01/2000')
phone = models.CharField(max_length=13)
email = models.EmailField()
address = models.TextField()
grade = models.CharField(max_length=7,
                         choices=GRADE_CHOICES,
                         default='10THGUP')
school = models.CharField(max_length=3,
                          choices=SCHOOL_CHOICES,
                          default='RED')
insurancedate = models.DateField(default='01/01/2001')
emergencycontact = models.CharField(max_length=40)
emergencycontactnumber = models.CharField(max_length=13)
notes = models.TextField() 
```

这是导致问题的 admin.py：

```
from django.contrib import admin
from members.models import Student

class StudentAdmin(admin.ModelAdmin):

fieldsets = (
    ('Personal Details', {'fields': ('firstname', 'surname','dob','address','phone','email')
    }),
    ('Training', {'fields': ('grade', 'school', 'insurancedate')
    }),
    ('Emergency Contact', {'fields': ('emergencycontact', 'emergencycontactnumber',),
                           'classes': ('collapse')
    }),
    ('Other', {'fields': ('notes')
    }),
)

admin.site.register(Student, StudentAdmin) 
```

我错过了什么愚蠢的东西吗？默认日期在 models.py 中，因为我使用 python-evolution 在第一个 syncdb 之后添加字段，它不想创建没有值的字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:50:53.693

可能应该划线

```
('Other', {'fields': ('notes') 
```

变得

```
('Other', {'fields': ('notes',) 
```

所以它知道它是一个元组而不是一个字符串

# php - PHP：如何在 header('location:http://domain.com') 之前使用 alert()；

> ID：15099924
> 
> 赞同：0
> 
> 时间：2013-02-26T21:44:04.103
> 
> 标签：php, javascript

如何使用`alert()`之前`header('location:http://domain.com');`，以便警报工作。问题是 php 代码很强大并且忽略了 alert()

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-26T21:51:44.807

我认为您正在尝试这样做？

```
alert('After this goes away, I will be redirected via JavaScript');
window.location = "http://domain.com"; 
```

参考。 [如何使用 Javascript 重定向？](https://stackoverflow.com/questions/4744751/javascript-redirect)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:46:56.247

要使用像 alert() 这样的 JavaScript，你必须有一个加载的网页。您可以在警报之后可能调用的下一个请求中执行 header() 函数。

# ruby-on-rails - 通过 content_for 在 Rails 中包含 javascript 的最佳方法

> ID：15099927
> 
> 赞同：1
> 
> 时间：2013-02-26T21:44:05.927
> 
> 标签：ruby-on-rails, ruby, refactoring

我的 Rails 应用程序中有一些页面需要包含一些 javascript，最好是在`</body>`标记之前。没有必要在每个页面上都包含这个 javascript，因为大多数人不使用它。我找到了一种方法来完成这项工作，但我认为代码很糟糕。

您将如何做同样的事情，或者您将如何重构现有代码？

查看 gist.github.com 上的简化示例代码： [https ://gist.github.com/scottswezey/ffc7bf52041b976b710a](https://gist.github.com/scottswezey/ffc7bf52041b976b710a)

（或参见下面的相同代码：）

**application.html.erb（布局）：**

```
<!DOCTYPE html>
<html lang="en">
  <head>
  ...
  </head>

  <body>
    ...
    <script>
    $(function() {
      <%= yield(:js) %>
    });
  </script>
</body>
</html> 
```

**some_view_file.html.erb（视图）：**

```
<%
str = <<END_OF_STRING
$('.modal').modal()
END_OF_STRING

content_for :js do
  str.html_safe
end
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-03T18:20:16.337

永远不要这样做：JavaScript 不属于 HTML。只需在页面中放置适当的`<script>`标签，引用外部 JS 文件，如下所示：

应用程序.html.haml

```
!!!
%html
  %head
    = yield :javascript
  %body
    = yield 
```

查看文件

```
- content_for :javascript do
  = javascript_include_tag 'modal' 
```

应用程序/资产/modal.js

```
$(document).ready(function() {
  $('.modal').modal();
} 
```

这使一切都很好地分开。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T21:53:33.947

是否可以在您的 JS 中添加 .js.erb 部分并将其呈现在正文下？

编辑：看看这个答案：[https ://stackoverflow.com/a/10113547/1283742](https://stackoverflow.com/a/10113547/1283742)

# javascript - for 循环内的 set-interval 和 clear-interval

> ID：15099929
> 
> 赞同：0
> 
> 时间：2013-02-26T21:44:13.200
> 
> 标签：javascript, for-loop, setinterval, clearinterval

我在 for 循环中有一个 set-interval 函数，如果在 set-interval 函数内满足条件，则会发出警报并清除间隔。下面是我的代码，但它不起作用任何人都可以告诉这里的错误是什么。

```
var timeCheck = 0;
function matchTime() {
    for (var i=0;i<timers.length;i++) {
        timeCheck = setInterval(function () {
            var theDate = new Date(timers[i][0]*1000); 
            var now = new Date(); 
            if ( (now.getFullYear() === theDate.getFullYear()) && (now.getMonth() === theDate.getMonth()) ) {
                if ( (now.getDate() === theDate.getDate()) && (now.getHours() === theDate.getHours()) ) {
                    if ( now.getMinutes() === theDate.getMinutes() && (now.getSeconds() === theDate.getSeconds()) ) { alert("its Time for "+timers[i][1]); stopCheck(); }
                }
            }
        }, 10);
    }
}

function stopCheck() { clearInterval(timeCheck); } 
```

谢谢。

我要解决的是：每次本地时间与计时器数组中的时间匹配时（第 0 列；计时器 [count] [0]），我都需要收到警报。数组已经排序
`timers.sort(function(a,b) { return a[0] - b[0]; });`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:02:31.620

也许：

```
var timeCheck = {};
function matchTime() {
   for (var i=0;i<timers.length;i++) {
      timeCheck[i] = setInterval(function () {
        var theDate = new Date(timers[i][0]*1000); 
        var now = new Date(); 
        if ( (now.getFullYear() === theDate.getFullYear()) && (now.getMonth() === theDate.getMonth()) ) {
            if ( (now.getDate() === theDate.getDate()) && (now.getHours() === theDate.getHours()) ) {
                if ( now.getMinutes() === theDate.getMinutes() && (now.getSeconds() === theDate.getSeconds()) ) { alert("its Time for "+timers[i][1]); stopCheck(i); }
            }
        }
    }, 10);
    }
}

 function stopCheck(i) { clearInterval(timeCheck[i]); } 
```

也许：

```
var timeCheck = 0;
function matchTime() {
  var timeCheck = setInterval(function () {
    for (var i=0;i<timers.length;i++) {
        var theDate = new Date(timers[i][0]*1000); 
        var now = new Date(); 
        if ( (now.getFullYear() === theDate.getFullYear()) && (now.getMonth() === theDate.getMonth()) ) {
            if ( (now.getDate() === theDate.getDate()) && (now.getHours() === theDate.getHours()) ) {
                if ( now.getMinutes() === theDate.getMinutes() && (now.getSeconds() === theDate.getSeconds()) ) { alert("its Time for "+timers[i][1]); stopCheck(i); }
            }
        }
    }
   }, 10);
}

 function stopCheck(i) { clearInterval(timeCheck); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:06:19.907

看来您的逻辑倒退了。您希望每次当前时间等于 中的时间之一时提醒用户`timers`，对吗？为什么不完全使用`setInterval()`并跳过`for()`循环？如果它们已经排序，这工作得很好。此外，似乎`if()`可以使用更简单的“逐秒比较时间”方法。

我在这个演示中放慢了这个过程以使其明显。

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/tU57F/)]]]

脚本：

```
var timers = [
        [new Date( ( new Date() ).getTime() + 3000),'party!'], 
        [new Date( ( new Date() ).getTime() + 6000), 'sleep']
    ],
    timer = setInterval( checkTime, 300 );

function checkTime() {
    if( timers.length ) {
        if ( parseInt( timers[0][0].getTime() / 1000 ) 
            == parseInt( new Date().getTime() / 1000 ) ) {

            //alert here
            document.getElementById( 'result' ).insertAdjacentHTML(
                'beforeEnd',
                timers[0][0] + ": " + timers[0][1] + '<br />'
            );
            timers.shift();
        };
    } else {
        clearInterval( timer );
    };
}; 
```

HTML：

```
Wait 3 seconds...
<div id="result"></div> 
```

# php - 将元素插入数组中间

> ID：15099933
> 
> 赞同：3
> 
> 时间：2013-02-26T21:44:25.780
> 
> 标签：php, arrays

我想在 PHP 中非关联数组的特定索引之后插入新元素。这是我到目前为止所做的：

```
public function insertAfter($newElement, $key)
{
    // Get index of given element
    $index = array_search($key, array_keys($array));

    $temp  = array_slice($array, $index + 1, null, TRUE);
    $temp2 = array_slice($array, sizeof($array) - $index, null, TRUE);

    // Insert new element into the array
    $array = array_merge($temp, array($newElement), $temp2);
} 
```

但是，它并没有真正做到我想要的......它对数组做了一些奇怪的事情。你能帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T21:53:34.130

```
$array = array_slice($array, 0, $index) 
       + array($newElement)
       + array_slice($array, $index, count($array) - 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:49:48.617

array_slice 的第二个参数应该是数组中子数组开始的偏移量。如果您试图将数组一分为二，您希望第一个子数组从 offset 开始`0`并为 size `$index`，第二个子数组从 offset 开始`$index+1`并为 size `sizeof(array) - index`。不过，重申一下评论`array_splice`更适合您的应用程序。

# c# - 如何通过 LINQ 用有序元素填充字符串？

> ID：15099952
> 
> 赞同：0
> 
> 时间：2013-02-26T21:45:39.377
> 
> 标签：c#, linq, formatting

假设我们有一个像这样的类：

```
 class SystemMember : IEquatable<SystemMember>
    {
        public int Id;
        public string Equation;

        public bool Equals(SystemMember other)
        {
            return other != null && (Id.Equals(other.Id));
        }
    } 
```

在`List<SystemMember> elements`我们已经完成的

```
elements = elements.Distinct().OrderBy(e => e.Id).ToList(); 
```

`IDs`可以`1, 2, 4, 6, 9`和它的确定。

我们想要填充一个字符串结构，就像我们在该列表中`{first (lovest N)}, {next N}, ... , {last N}`的所有内容一样。`IDs`如何用 LINQ 做这样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:50:18.730

如果我正确阅读了您的问题（*不同 ID 的 SystemMember.Equation 的 CSV*），这应该是您想要的：

```
var equations = elements.Distinct().OrderBy(e => e.Id).Select(e => e.Equation);
var asString = string.Join(", ", equations); 
```

# python - Tkinter 使用复选按钮禁用多个条目

> ID：15099954
> 
> 赞同：2
> 
> 时间：2013-02-26T21:45:49.417
> 
> 标签：python, checkbox, tkinter, tkinter-entry

使用 Python 2.7，我想通过一个检查按钮将“条目”小部件的状态变为正常/禁用。

借助这个问题[Disable widget with checkbutton?](https://stackoverflow.com/questions/6129936/disable-widget-with-checkbutton) ，我可以用 1 个复选按钮和 1 个条目来完成

```
#!/usr/bin/env python2.7
# -*- coding: utf-8 -*-

import Tkinter as tk

root = tk.Tk()

class Principal(tk.Tk):
    def __init__(self, *args, **kwargs):
        self.foo = tk.StringVar()
        self.nac = tk.IntVar()

        self.ck1 = tk.Checkbutton(root, text='test',
            variable=self.nac, command=self.naccheck)
        self.ck1.pack()

        self.ent1 = tk.Entry(root, width=20, background='white',
            textvariable=self.foo, state='disabled')
        self.ent1.pack()

    def naccheck(self):
        print "check"
        if self.nac.get() == 0:
            self.ent1.configure(state='disabled')
        else:
            self.ent1.configure(state='normal')

app = Principal()
root.mainloop() 
```

当我想要两对或更多对（检查按钮/条目）时，问题就来了。在我的最终界面中，我可能有 20 个或更多这对，所以我想避免有 20 个或更多相同的“naccheck”方法。

我试过这个：

```
#!/usr/bin/env python2.7
# -*- coding: utf-8 -*-

import Tkinter as tk

root = tk.Tk()

class Principal(tk.Tk):
    def __init__(self, *args, **kwargs):
        self.foo = tk.StringVar()
        self.nac = {}
        self.ent = {}

        self.ent["test"] = tk.Entry(root, width=20, background='white', textvariable=self.foo, state='disabled')
        self.ent["test"].pack()

        self.ent["image"] = tk.Entry(root, width=20, background='white', textvariable=self.foo, state='disabled')
        self.ent["image"].pack()

        self.nac["test"] = tk.IntVar()
        self.ck1 = tk.Checkbutton(root, text='test', variable=self.nac["test"], command=self.naccheck("test"))
        self.ck1.pack()

        self.nac["image"] = tk.IntVar()
        self.ck1 = tk.Checkbutton(root, text='image', variable=self.nac["image"], command=self.naccheck("image"))
        self.ck1.pack()

    def naccheck(self,item):
        print "check "+item
        print self.nac[item].get()
        if self.nac[item].get() == 0:
            self.ent[item].configure(state='disabled')
        else:
            self.ent[item].configure(state='normal')

app = Principal()
root.mainloop() 
```

不幸的是，当我启动此代码时，会立即为每个检查按钮调用方法“naccheck”，而当我单击一个按钮时，则永远不会...

我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T22:03:04.817

有很多方法可以解决这个问题。一种方法是将 entry 和 checkbutton 变量传递到您的检查函数中。首先创建条目小部件和变量。然后，创建检查按钮并将变量和条目传递给您的回调：

```
ent = tk.Entry(...)
var = tk.IntVar()
chk = tk.Checkbutton(..., command=lambda e=ent, v=var: self.naccheck(e,v)) 
```

请注意 lambda 的使用，这是一种用于创建匿名函数的简单技术。这使您能够将参数传递给回调，而无需创建命名函数。另一种选择是使用[functools.partial](http://docs.python.org/2/library/functools.html#functools.partial)。毫无疑问，StackOverflow 上有几十个这样的例子，因为这是一个非常常见的问题。

接下来，您需要修改函数以接受参数：

```
def naccheck(self, entry, var):
    if var.get() == 0:
        entry.configure(state='disabled')
    else:
        entry.configure(state='normal') 
```

# mongodb - 包含复杂对象的 Mongo 集合的数据模型建议

> ID：15099956
> 
> 赞同：0
> 
> 时间：2013-02-26T21:46:09.517
> 
> 标签：mongodb, data-modeling, mlab, mongohq, database

我们将苹果应用程序数据存储在数据库中（[http://www.apple.com/itunes/affiliates/resources/documentation/itunes-enterprise-partner-feed.html](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-enterprise-partner-feed.html)）。

我们想针对一种查询进行优化：查找所有满足某些条件的应用程序。标准：（1）应用的平均评分；(2) 应用评分数量；(3) 应用支持的设备；(4) 应用销售国家；(5) 应用当前价格；(6) 应用程序免费的日期。查询应该尽可能快。示例查询：“查找所有评分超过 600、平均 5 星、支持 iPad 和 iPhone、在美国销售且两天前价格降至 0.00 美元的应用程序。”

基于苹果模式，每个国家都有价格信息。假设苹果支持 100 个国家，每个应用程序将有 100 个价格——每个国家一个。我们还需要存储每个应用程序的历史价格，这意味着具有 10 次价格变化的应用程序将有 1000 个价格（假设 100 个国家/地区）。

三个问题：

1）您如何建议我们将价格数据存储在 mongo 中以快速查询？现在，我们正在考虑将价格存储为对象数组。每个对象由三个元素组成： (1) 日期；(2) 国家；(3)价格。

2) 如果我们将价格数据作为对象存储在一个数组中，我们需要做什么才能非常快速地搜索价格数据。同样，常见的价格搜索类似于“在美国商店中查找所有在 2 天内再次将价格降至 0.00 美元的应用程序”。

3）在存储数据时我们应该注意什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:47:45.790

就个人而言，我会单独收集每日价格数据——每个应用程序每天 1 条记录（复合自然键），该应用程序当天包含 100 个数字。这样，记录将永远不需要增长或重新定位——这是一个巨大的胜利。使用适当的索引，大多数针对此集合的查询都可以很好地执行。保持字段名称较小，以便更有效地存储。

我会为应用程序“主数据”保留一个单独的集合——每个应用程序 1 条记录。在这些记录中，您可以记住应用程序最近免费发布的日期、最近按国家/地区价格向量的快照，以及可能构成应用程序搜索选择标准的任何其他“摘要”数据的类似快照值。如果它们可能变得昂贵，那么可以在方便的时候在后台执行聚合来计算和记录这些值。

希望这是一个帮助！太好了，你提前问了这些问题。:)

# ios - 为 UIView 设置背景颜色

> ID：15099958
> 
> 赞同：0
> 
> 时间：2013-02-26T21:46:12.913
> 
> 标签：ios, objective-c, uiview, uibackgroundcolor

为 UIView 设置背景颜色时出现问题。我正在做的是：

```
- (void) viewDidLoad {
    [super viewDidLoad];

    self.view.backgroundColor = [UIColor clearColor];
} 
```

但我得到黑色背景色，如下所示：

![背景颜色不正确 - 图解](../Images/d145b190628fea882644d483db4c18d3.png)

如果我将背景更改为任何其他颜色，它就会起作用。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T21:54:03.580

您的视图按预期工作。您正在将其设置为使用清晰的背景颜色，这意味着与名称完全相同，清晰，您将在视图下方看到颜色和可能的其他 UI 元素。可以把它想象成在彩色建筑纸（超级视图）上放置透明塑料包装（视图）。如果您想找到黑色的来源，我将从您的根控制器的视图开始。

# css - 如何在两张图片下放置文字

> ID：15099959
> 
> 赞同：0
> 
> 时间：2013-02-26T21:46:19.243
> 
> 标签：css

我已经尝试了各种方法来找到这个问题的答案，但我想要做的是在两个图像下居中放置一些文本。

我尝试使用变成一条线，但我无法让文本位于图像的中心下方。谁能帮我 ？

网页是 www.c5d.co.uk/captain.php

HTML 是：

```
 <img class="social" src="http://www.c5d.co.uk/captain.png" alt="Captain">
 <img class="socialtwo" src="http://www.c5d.co.uk/president.png" alt="President">
 <div><ul class="captain"><li><p>John Lewis: Captain</p><p>Bill Wrigley: President</p>             </li></ul></div>
 <img class="social" src="http://www.c5d.co.uk/ladycaptain.png" alt="Lady Captain">
 <img class="socialtwo" src="http://www.c5d.co.uk/juniorcaptain.png" alt="Junior  Captain">
 <div><ul class="ladycaptain"><li><p>Beryl Harrison: Lady Captain</p><p>Kieran Metcalf: Junior Captain</p></li></ul></div> 
```

相关的CSS是

```
 .captain, .ladycaptain {                /* ul - controls normal comp results& junior open*/
list-style-type:none;
display:table;
padding:0;
margin:0 auto;
}
 .captain li, .ladycaptain li {
display:table-row;
text-align:left;/* ul - controls normal comp results& junior open*/
padding:0;
margin:0;
}
  .ladycaptain p  {
display:table-cell;/* ul - controls normal comp results & junior open*/
text-align:left;
padding:3px 10px 3px 0;  /* padding-right visually separates "columns" */
}

 .captain p  {
display:table-cell;/* ul - controls normal comp results & junior open*/
text-align:left;
padding:3px 10px 3px 0;  /* padding-right visually separates "columns" */
}

 .ladycaptain p  {
display:table-cell;/* ul - controls normal comp results & junior open*/
text-align:left;
padding:3px 20px 3px 0;  /* padding-right visually separates "columns" */
}

.captain p + p {
padding-left:225px;       /* padding-left visually separates "columns" */
}
.ladycaptain p + p {
padding-left:180px;       /* padding-left visually separates "columns" */
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:04:50.733

1.  删除图像的边缘底部。
2.  增加包含文本的 ul 的高度。
3.  将该 li （或一组 'em ）的 line-height 设置为该高度。它将完全居中。当然，如果这是您想要实现的，它将垂直居中。否则，只需将 text-align 设置为 center 就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:59:19.360

@Rob Grzyb 建议：

尝试将图像和标题分组到单个容器/div 中并将内容居中。如果您可以重构 HTML，这将容易得多。

由@Pow-Ian 建议：jsfiddle.net/KV7zT

由我编辑：jsfiddle.net/KV7zT/1 或 [jsfiddle.net/KV7zT/2/](http://jsfiddle.net/KV7zT/2/)

html

```
<div style='text-align:center;width:50%;float:left;'>
    <img src="http://www.c5d.co.uk/president.png" alt="President" />
    <div style="clear:both"> Text Goes Here</div>
</div> 
```

css

```
.none-needed {css:not needed 'yet';} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:56:15.253

现在，您拥有的 HTML 和 CSS 比您需要的多，这使您的代码难以阅读和修复。将每个图像的文本放在自己的`div`位置将使它们更容易居中，并且在语义上更接近您想要实现的目标。然后，您还可以使用更少的 CSS 来使其按您的意愿运行。

重构您的 HTML 和 CSS 应该可以解决问题：

```
<html>
<head>
<style>
#officers {
    width:554px;
}

.officer {
    width:267px;
    position:relative;
    float:left;
    text-align:center;
    margin:3px 10px 3px 0;
}

</style>
</head>
<body>
<div id="officers">
    <div class="officer">
        <img src="http://www.c5d.co.uk/captain.png" alt="Captain" />
        <span class="caption">John Lewis: Captain</span>
    </div>
    <div class="officer">
        <img src="http://www.c5d.co.uk/president.png" alt="President" />
        <span class="caption">Bill Wrigley: President</span>
    </div>
    <div class="officer">
        <img src="http://www.c5d.co.uk/ladycaptain.png" alt="Lady Captain" />
        <span class="caption">Beryl Harrison: Lady Captain</span>
    </div>
    <div class="officer">
        <img src="http://www.c5d.co.uk/juniorcaptain.png" alt="Junior Captain" />
        <span class="caption">Kieran Metcalf: Junior Captain</span>
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T05:29:05.417

我放弃 ！并尝试了一些不同的东西。

现在只是有一个文本间距错误！

感谢您的所有建议

安东尼

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T22:10:06.773

尝试这样的事情：

```
<ul>
    <li>
        <img class="img1" src="" alt="">
        <div>image 1</div>
    </li>

    <li>
        <img class="img2" src="" alt="">
        <div>image 2</div>
    </li>

    <li>
        <img class="img3" src="" alt="">
        <div>image 3</div>
    </li>
    ....
</ul> 
```

用CSS

```
li
{
  display: inline-block;
    margin: 20px;
}
div
{
 text-align: center;
} 
```

这是一个[现场演示](http://jsfiddle.net/danield770/8AdJN/1/)

# android - 打开设置/关于时保存MainActivity的状态

> ID：15099964
> 
> 赞同：0
> 
> 时间：2013-02-26T21:46:25.950
> 
> 标签：android, android-activity, save, state, restore

当我从菜单中打开设置时，我有一些`SeekBars`, a`Switch`和：`CheckBox``MainActivity`

```
Intent settings = new Intent(this, SettingsActivity.class);
startActivity(settings);
return true; 
```

现在，当我返回（ActionBar 或 Back 按钮）时，会丢失`SeekBars`开关的进度和状态`checkbox`。

`onSaveInstanceState`似乎可以保存它，但从`onRestoreInstanceState`未被调用，因此它什么也不恢复。

我不想永久保存这些值，只是在打开“设置”或“关于”时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:25:35.007

`onRestoreInstanceState`仅在操作系统终止您的应用程序（方向更改或内存释放操作）后调用。您只需进入设置对话框并返回应用程序，它仍应在后台运行，并且状态应保持不变.

# picasa - Picasa API – 请求特定大小的缩略图

> ID：15099973
> 
> 赞同：0
> 
> 时间：2013-02-26T21:47:11.780
> 
> 标签：picasa

我正在使用下面显示的 C# 代码使用 Picasa API 从相册中检索缩略图。有人可以告诉我如何通过更改代码来检索更大的缩略图吗？

```
public void getimages (string albumid)
{
    PicasaService service = new Google.GData.Photos.PicasaService("test");
    PhotoQuery query = new PhotoQuery(PicasaQuery.CreatePicasaUri(userName, albumid));
    PicasaFeed feed = service.Query(query);

    foreach (PicasaEntry entry in feed.Entries)
    {

        string title = entry.Title.Text.Substring(0, entry.Title.Text.LastIndexOf("."));
        Albumimages.Add(new AlbumImages(title, entry.Media.Thumbnails[0].Url, entry.Media.Content.Url));    
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T21:36:09.203

不了解 C#，但提要 url 有一个名为 'thumbsize' 的参数：

网址示例：[https](https://picasaweb.google.com/data/feed/api/user/) ://picasaweb.google.com/data/feed/api/user/?kind=album&thumbsize=320

您可以在此处检查有效值：[https ://developers.google.com/picasa-web/docs/1.0/reference#Parameters](https://developers.google.com/picasa-web/docs/1.0/reference#Parameters)

# video.js - 旧版 Android 2.x 中的 VideoJS 事件触发器

> ID：15099980
> 
> 赞同：0
> 
> 时间：2013-02-26T21:47:45.593
> 
> 标签：video.js

我们在 Android 2.x 设备上触发事件时遇到问题。根据我们的测试，Android 4.x 和 iOS 5/6 可以正常工作。但在 Android 2.x 设备上，我们有时会收到“结束”事件，有时会收到“开始”事件。

它说它具有跨浏览器兼容性，但有人遇到这些问题吗？

以下是代码的相关部分

```
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="http://vjs.zencdn.net/c/video-js.css">
  <script src="http://vjs.zencdn.net/c/video.js"></script>
  <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
</head>
<body>
  <div id="videoplayer" style="margin:0 auto; text-align:center;">
    <video id="video" class="video-js vjs-default-skin" controls autoplay preload="auto" width="300" height="300">
    </video>
  </div>
</body>
</html>

<script>
$(document).ready(function() {    
  _V_("video").ready(function() {

    var thePlayer = this;    
    var startVideo = function() {
            // do stuff
    };

    var endVideo = function() {
            // do stuff
    };
    thePlayer.addEvent("play", startVideo);
    thePlayer.addEvent("ended", endVideo);
  });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:52:02.340

我解决了这个问题。我能够在 Android 2.2 和 2.3 模拟器上重现它。视频播放时未触发任何事件，因为加载视频时出错。

问题（适用于 Android 2.x 设备）：

*   从 HTTPS 网址播放链接不起作用。我们使用的链接是链接到 Amazon S3 存储桶的 Amazon Cloudwatch URL。当我将 URL 更改为 HTTP 与 HTTPS URL 时，它起作用了。
*   我不得不删除视频元素上的自动播放属性。不知道为什么，但 Android 2.x 中的视频播放器不喜欢这样。

完成这 2 个修复后，我就能够在 Android 2.x 设备（以及 Android 4.x、iPhone 和 iPod）上流式传输视频

# c# - 将 C# 字符串数组转换为 Javascript 数组

> ID：15099984
> 
> 赞同：4
> 
> 时间：2013-02-26T21:47:55.040
> 
> 标签：c#, javascript, jquery

我将 C# 字符串数组传递给使用 TagBuilder 构建一些 Javascript 的方法。我似乎无法在我的 Javascript 中获取数组中的实际项目：

```
public static IHtmlString NewsTicker(this HtmlHelper htmlHelper, string[] arrTickerContents)
    {
        TagBuilder script = new TagBuilder("script");
        script.Attributes.Add("type", "text/javascript");

        script.InnerHtml = @"

            var rss_scr_contents = new Array();

            $.each('" + arrTickerContents + @"', function (i, objValue) {
                rss_scr_contents[i] = objValue;
        });

        return MvcHtmlString.Create(script.ToString());
    } 
```

这导致以下源代码：

```
var rss_scr_contents = new Array();

            $.each('System.String[]', function (i, objValue) {
                rss_scr_contents[i] = objValue;
        }); 
```

执行此操作的正确语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:09:22.833

问题是`arrTickerCountents.ToString()`没有返回预期的结果。

例如，`(new [] {"hello", "world"}).ToString()`计算结果为`"System.String[]"`，这在这里没有用。

处理此问题的有效方法是使用转换，而不是从合适的 .NET 对象发出有效的 JavaScript 值 - 最常见的工具可能是 JSON 转换器。我喜欢[Json.NET](http://james.newtonking.com/pages/json-net.aspx)，但这应该适用于其他转换器。

```
var jsonArray = JsonConvert.SerializeObject(arrTickerContents);
script.InnerHtml = @"
        var rss_scr_contents = [];
        $.each(" + jsonArray + @", function (i, objValue) {
            rss_scr_contents[i] = objValue;
        })
"; // Please make sure to post valid code 
```

由于上述循环没有按原样进行处理，因此请考虑更简单的替代方案。（我更喜欢不使用`var`全局窗口属性。）

```
script.InnerHtml = @"rss_scr_contents = " + jsonArray + ";"; 
```

我推荐 JSON 的简单性和可用的自动转换，尽管它可能并不总是适用。手动构建 JavaScript 值（即没有 JSON 库）应该小心，因为很容易引入无效、恶意或其他意外输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:37:30.850

我建议使用像 Newtonsoft.Json 这样的库，而不是手动滚动您自己的解决方案。

[http://james.newtonking.com/pages/json-net.aspx](http://james.newtonking.com/pages/json-net.aspx)

为什么要重新发明轮子？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-21T21:32:10.867

我是`Razor`这样用的`NewtonSoft`。

```
var jsonArray=Newtonsoft.Json.JsonConvert.SerializeObject(arrTickerContents);
var rss_scr_contents = @Html.Raw(jsonArray); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T21:50:06.020

```
$.each('[' + string.Join(',', arrTickerContents), + ']', function (i, objValue) { 
```

# oracle - oracle：将子查询与外部查询连接起来

> ID：15099987
> 
> 赞同：0
> 
> 时间：2013-02-26T21:48:06.983
> 
> 标签：oracle, subquery

我有两个关于联合的查询，如下所示：

```
 select   '00/00/0000' as payment_date , h1.customer_no
     from payments h1
     where not exists ( select 1 from payments h2 where h2.customer_no = h1.customer_no and h2.ctype = 'CASH' ) 
     and  h1.customer_no = 400
     group by h1.customer_no

     union

     select to_char(h1.payment_date, 'MM/DD/YYYY') , h1.customer_no
      from payments h1 inner   join ( select customer_no, max(payment_date ) as max_date from payments where ctype = 'CASH'  group by customer_no ) subQ
     on  ( h1.customer_no = subQ.customer_no
           and h1.payment_date = subQ.max_date   ) 
           and  h1.customer_no = 400
     group by h1.payment_date, h1.customer_no 
```

现在，我想在另一个查询中使用这个联合。

```
 select * from (

    select   '00/00/0000' as payment_date , h1.customer_no
    from payments h1
    where not exists ( select 1 from payments h2 where h2.customer_no = h1.customer_no and h2.ctype = 'CASH' ) 
    and  h1.customer_no = p.customer_no 
    group by h1.customer_no

    union

    select to_char(h1.payment_date, 'MM/DD/YYYY') , h1.customer_no
    from payments h1 inner   join ( select customer_no, max(payment_date ) as max_date from payments where ctype = 'CASH'  group by customer_no ) subQ
    on  ( h1.customer_no = subQ.customer_no
    and h1.payment_date = subQ.max_date   ) 
    and  h1.customer_no = p.customer_no 
    group by h1.payment_date, h1.customer_no ) sq,

  payments p
  where  p.customer_no = 400
  and sq.customer_no = p.customer_no 
```

当我运行它时，我得到 ORA-00904: "P"."CUSTOMER_NO": invalid identifier。我需要将 h1.customer_no 加入外部查询 customer_no。

我见过一些有排名的查询，但我不太明白。如何将内部查询与外部查询连接起来？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:45:38.447

您的付款表是否有 customer_no 列？这似乎是你的错误所表明的。

至于如何加入子查询，您可能需要查看[factored subqueries](http://www.oracle-base.com/articles/misc/with-clause.php)。你可以做：

```
WITH z AS (
  SELECT ...
  UNION
  SELECT ...
), y AS (
  SELECT ...
)
SELECT ...
FROM y
JOIN z ON y.x = z.x
JOIN some_other_table t ON z.a = t.a 
```

# javascript - 如何动态命名对象并在 javascript 中使用对象构造函数？

> ID：15099991
> 
> 赞同：0
> 
> 时间：2013-02-26T21:48:23.760
> 
> 标签：javascript, object, firebase

我正在使用每天都在变化的 Ajax 提取数据。我想将数据打包成具有唯一名称的对象。目前我创建了一个看起来像这样的构造函数：

```
function myObject(Id,thing1,thing2,thing3) 
{
    this.Id = Id;
    this.thing1 = thing1;
    this.thing2 = thing2;
    this.thing3 = thing3;
} 
```

然后我将它推送到这样的循环中的数组

```
for(var i=0; i<data.length; i++)
{
    array.push(new myObject(value1,value2,value3,value4));
} 
```

这对我正在做的事情很好，但我只是得到一个里面有 [object,object,object,object] 的数组，我可以用 array[0] ， array[1] 等访问它。

但是现在我想将这些对象存储在 firebase 中并且需要引用它们，那么我怎样才能让它们唯一命名呢？

通常你会做

```
var thingid1 = new myObject(value1,value2,value3,value4));
var thingid2 = new myObject(value1,value2,value3,value4)); 
```

但这一切都是动态创建的，有时会创建 1 个对象，有时会创建 10 个。

我是这方面的新手，我到处都看过，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:56:19.253

如果您的 Id (value1) 是唯一的...

```
var myObjectContainer = {};
for(var i=0; i<data.length; i += 1)
{
    myObjectContainer[value1] = new MyObject(value1,value2,value3,value4);
} 
```

# graphviz - 头部和尾部标签与箭头重叠

> ID：15099993
> 
> 赞同：5
> 
> 时间：2013-02-26T21:48:40.150
> 
> 标签：graphviz

在下面的代码中，头部和尾部标签与箭头重叠，这是我不想要的。我需要做什么？

```
digraph G {
    node [shape = "record"];

    edge [
      arrowhead = "normal"
      headlabel = "0..*"
      taillabel = "longlabel"
    ];

    N1 [ label="N1"];         
    N2 [label = "N2" ];       

    N1->N2;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T07:39:27.613

您不能真正控制头部和尾部标签的位置，因为边缘标签是可能的（使用`labelangle`,`labeldistance`等）

但是，作为一种技巧，您可以在头/尾标签中**添加空格**，这样可以强制标签的中心位于标签文本的左侧或右侧：

```
 headlabel = "        0..*"
  taillabel = "longlabel             " 
```

# jquery - src之后jquery中的这个冒号是什么？

> ID：15099999
> 
> 赞同：2
> 
> 时间：2013-02-26T21:49:07.373
> 
> 标签：jquery

我想知道任何人都可以在代码中为我解释这一行。

```
 $(this).bind('click', {src: $(this).attr('href')}, function (e){
           //commented out since it's irrelevant                    
        }); 
```

这是我的理解：

将函数绑定到 $(this) 的点击事件。e 参数也被传递给函数。然而，这对我来说没有意义的中间部分

```
 {src: $(this).attr('href')} 
```

这是做什么的？我尝试用谷歌搜索冒号在 jquery 中的作用。但是我得到了 li:first 结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T21:50:43.873

这是 javascript 对象表示法：

```
var object = {propertyName : propertyValue}; 
```

它描述了一个对象[字面量](http://en.wikipedia.org/wiki/Literal_%28computer_programming%29)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T21:52:00.470

`{src: $(this).attr('href')}`是一个对象文字，您将一个对象`.bind`作为第二个参数传递给函数。这样做会将所述数据传递到事件处理程序中，您可以在事件发生时使用它访问它，`event.data.src`或者`e.data.src`在您的情况下，因为使用使用`function (e)...`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T21:52:24.160

这就是您定义对象（称为对象字面量）的方式。例如，如果：

```
obj = { src: "Source" }; 
```

然后 obj.src 将包含“源”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-26T21:51:26.350

您正在提供具有属性 src 的内联对象。src 的值为`$(this).attr('href');`您无法找到 jquery 特定文档的原因是这是 javascript 本身存在的约定。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-26T21:50:59.490

从[bind 的文档中](http://api.jquery.com/bind/)，第二个参数：

```
eventData
    Type: Object
    An object containing data that will be passed to the event handler. 
```

所以，你正在传递一个对象。`src:`语法表示该对象的成员，其名称为`src`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-26T21:53:11.883

这只是在事件对象中传递给回调的附加信息，可以使用以下方法访问：

```
// callback function
function(e){ 
    alert(e.data.src);
} 
```