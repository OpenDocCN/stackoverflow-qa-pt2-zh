# StackOverflow 问答 12766000-12766999

# wpf - 绑定到包含 ItemControl 数据的 UserControl

> ID：12766006
> 
> 赞同：1
> 
> 时间：2012-10-07T03:58:08.550
> 
> 标签：wpf, binding, user-controls

我创建了一个 UserControl (MediaList)，其中包含一个绑定到属性“ToolsBar”的 ItemControl。这个想法是允许从 MediaList 控件外部添加自定义按钮/控件。

我的问题是我正在尝试在工具栏中添加一个按钮，该按钮与 UserControl 本身绑定。我不会将 MediaList (UserControl) 的 DataContext 覆盖为“this”，因为我需要使用在根窗口中定义的 DataModel。

也许我这样做的方式完全错误？

这是使用 MediaList 的自定义按钮的窗口示例：

```
<localControls:MediaList x:Name="NewMediaList">
                <localControls:MediaList.ToolsBar>
                    <Button Content="{StaticResource ResourceKey=MoveToPlaylist}" 
                            IsEnabled="{Binding ElementName=NewMediaList, Path=SelectedMedia, Converter={localConverters:ObjectToBool}}"/>
                </localControls:MediaList.ToolsBar>
            </localControls:MediaList> 
```

到目前为止，我尝试了多种绑定但没有成功，例如：

*   {Binding ElementName=MediaListControl, Path=SelectedMedia, Converter={localConverters:ObjectToBool}}"
*   {绑定RelativeSource={x:静态RelativeSource.Self}，Path=SelectedMedia，Converter={localConverters:Debug}}
*   {绑定 SelectedMedia，RelativeSource={RelativeSource FindAncestor，AncestorType={x:Type UserControl}}}
*   {绑定 SelectedMedia，RelativeSource={RelativeSource FindAncestor，AncestorType={x:Type localControls:MediaList}}}

请注意，我将它们从记忆中写回，并且我还尝试将 MediaList.xaml 中的 ItemControl 和 StackPanel（包含 ItemControm）的 DataContext 设置为 MediaList 对象本身。

**媒体列表.xaml：**

```
<UserControl x:Class="MediaPlaylist.Controls.MediaList"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:localConverters="clr-namespace:Suisse.MediaPlaylist.Converters"
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300"
         x:Name="MediaListControl">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <DataGrid Grid.Row="0" 
              AutoGenerateColumns="False"
              ItemsSource="{Binding ElementName=MediaListControl, Path=Playlist.Medias}"
              SelectedItem="{Binding ElementName=MediaListControl, Path=SelectedMedia, Mode=TwoWay}">
        <DataGrid.Columns>
            <DataGridTextColumn Header="Title" 
                                Binding="{Binding Title}"
                                IsReadOnly="True"/>
            <DataGridTextColumn Header="File" 
                                Binding="{Binding FilePath}"
                                IsReadOnly="True"/>
        </DataGrid.Columns>
    </DataGrid>

    <StackPanel Orientation="Horizontal"
                HorizontalAlignment="Right"
                Grid.Row="1">
        <ItemsControl ItemsSource="{Binding ElementName=MediaListControl, Path=ToolsBar}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
        </ItemsControl>
        <Separator Visibility="{Binding ElementName=MediaListControl, Path=ToolsBar.Count, Converter={localConverters:ObjectToVisibility}}" />
        <Button
            HorizontalAlignment="Right"
            Content="Delete"
            Click="OnDelete_Click"
            IsEnabled="{Binding ElementName=MediaListControl, Path=SelectedMedia, Converter={localConverters:ObjectToBool}}"/>
    </StackPanel>
</Grid> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T04:37:13.987

首先，您试图将绑定数据分配给 ItemsControl 的 ItemsSource 属性，这是完全错误的。取而代之的是，您可以在 MedialList.xaml.cs 中声明 ItemsControl 依赖项属性

```
 public partial class MediaList : UserControl
    {
        public MediaList()
        {
            InitializeComponent();

        }

        public static DependencyProperty ToolsBarProperty = DependencyProperty.
   Register("ToolsBar", typeof(ItemsControl), typeof(MediaList));

        public ItemsControl ToolsBar
        {
            get { return (ItemsControl)GetValue(ToolsBarProperty); }
            set { SetValue(ToolsBarProperty, value); }
        }
    } 
```

然后，您可以将 MediaList xaml 更新为

```
 <StackPanel Orientation="Horizontal"
            HorizontalAlignment="Right"
            Grid.Row="1">
        <ContentControl Content="{Binding ElementName=MediaListControl, Path=ToolsBar}">

        </ContentControl> 
```

然后，您可以将外部的任何集合模板分配给 ToolBar 属性

```
<localControls:MediaList>
            <localControls:MediaList.ToolsBar>
                <ItemsControl >
                    <ItemsControl.Items>
                        <Button Content="{StaticResource ResourceKey=MoveToPlaylist}" 
                        IsEnabled="{Binding ElementName=NewMediaList, Path=SelectedMedia, Converter={localConverters:ObjectToBool}}"/>
                        <Label>Hello </Label>
                        <Label> How are you?</Label>
                    </ItemsControl.Items>
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
            </localControls:MediaList.ToolsBar>
        </localControls:MediaList> 
```

希望这能解决您的问题。

注意：我刚刚移出了 MediaList 用户控件中定义的 ItemsControl，并将其替换为 ContentControl。这允许从外部将任何模板设置为 ContentControl 的 Content 属性。

# iphone - iPhone 中的 OpenCV 和 iOS

> ID：12766010
> 
> 赞同：0
> 
> 时间：2012-10-07T03:59:43.473
> 
> 标签：iphone, ios, opencv

我们用 Java 构建了一个使用 OpenCV 的桌面应用程序。我们想为 iPhone 构建一个类似的应用程序。OpenCV 在 iOS 中是否默认可用？如果不是这种情况，用户是否需要为 iPhone 单独下载和安装 openCV 才能使用依赖于 OpenCV 的应用程序？

有没有办法构建应用程序，使其所有依赖项都是自包含的，即即使应用程序使用 OpenCV，用户也不需要单独安装 OpenCV？如果有怎么办？我找不到任何教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T04:38:38.400

默认情况下，没有打开的 CV 不在 Objective-c 中，因此您必须先下载库并安装它，然后他们开发应用程序并使用库编译它。 [http://opencv.org/downloads.html](http://opencv.org/downloads.html)

是的，如果您将框架添加到 Xcode 的依赖项部分，您可以将其构建为自包含应用程序。Apple 将不允许用户在 iphone 上下载和安装东西，每个应用程序都是单独下载的。

# c# - 让我的 Parallel.ForEach 线程安全的更好方法？

> ID：12766011
> 
> 赞同：3
> 
> 时间：2012-10-07T03:59:55.373
> 
> 标签：c#, multithreading, dictionary, parallel.foreach, concurrentdictionary

我想让以下代码线程安全。不幸的是，我尝试在此代码中的各个级别进行锁定，但没有成功。我似乎可以实现线程安全的唯一实例是在整个循环周围放置一个锁，这有效地使 Parallel.ForEach 不会比仅使用 foreach 更快（甚至可能更慢）。该代码相对/几乎安全，没有锁定。在大约每 20 次左右的执行中，geneTokens.Value[-1] 键和 gtCandidates.Value[-1] 键的总和似乎只显示出细微的变化。

我意识到 Dictionary 不是线程安全的。但是，我不能将此特定对象更改为 ConcurrentDictionary 而不会对下游的性能造成重大影响。我宁愿使用常规 foreach 运行这部分代码，也不愿更改该特定对象。但是，我使用 ConcurrentDictionary 来保存各个 Dictionary 对象。我也尝试过进行此更改，但它并没有解决我的种族问题。

**这是我的类级别变量：**

```
//Holds all tokens derived from each sequence chunk
public static ConcurrentBag<sequenceItem> tokenBag = 
  new ConcurrentBag<sequenceItem>();
public BlockingCollection<sequenceItem> sequenceTokens = new 
  BlockingCollection<sequenceItem>(tokenBag);
public ConcurrentDictionary<string, int> categories = new 
  ConcurrentDictionary<string, int>();
public ConcurrentDictionary<int, Dictionary<int, int>> gtStartingFrequencies = new 
  ConcurrentDictionary<int, Dictionary<int, int>>();
public ConcurrentDictionary<string, Dictionary<int, int>> gtCandidates = new 
  ConcurrentDictionary<string, Dictionary<int, int>>();
public ConcurrentDictionary<string, Dictionary<int, int>> geneTokens = new 
  ConcurrentDictionary<string, Dictionary<int, int>>(); 
```

**这是 Parallel.ForEach：**

```
Parallel.ForEach(sequenceTokens.GetConsumingEnumerable(), seqToken =>
{
  lock (locker)
  {
    //Check to see if the Sequence Token is a Gene Token
    Dictionary<int, int> geneTokenFreqs;
    if (geneTokens.TryGetValue(seqToken.text, out geneTokenFreqs))
    { //The Sequence Token is a Gene Token 

      *****************Race Issue Seems To Occur Here**************************** 
      //Increment or create category frequencies for each category provided
      int frequency;
      foreach (int category in seqToken.categories)
      {
        if (geneTokenFreqs.TryGetValue(category, out frequency))
        {   //increment the category frequency, if it already exists
            frequency++;
            geneTokenFreqs[category] = frequency;
        }
        else
        {   //Create the category frequency, if it does not exist
            geneTokenFreqs.Add(category, 1);
        }
      }

      //Update the frequencies total [-1] by the total # of categories incremented.
      geneTokenFreqs[-1] += seqToken.categories.Length;
      ******************************************************************************
    }
    else
    { //The Sequence Token is NOT yet a Gene Token
      //Check to see if the Sequence Token is a Gene Token Candidate yet
      Dictionary<int, int> candidateTokenFreqs;
      if (gtCandidates.TryGetValue(seqToken.text, out candidateTokenFreqs))
      {
        *****************Race Issue Seems To Occur Here****************************
        //Increment or create category frequencies for each category provided
        int frequency;
        foreach (int category in seqToken.categories)
        {
          if (candidateTokenFreqs.TryGetValue(category, out frequency))
          { //increment the category frequency, if it already exists
            frequency++;
            candidateTokenFreqs[category] = frequency;
          }
          else
          { //Create the category frequency, if it does not exist
            candidateTokenFreqs.Add(category, 1);
          }
        }

        //Update the frequencies total [-1] by the total # of categories incremented.
        candidateTokenFreqs[-1] += seqToken.categories.Length;
        *****************************************************************************

        //Only update the candidate sequence count once per sequence
        if (candidateTokenFreqs[-3] != seqToken.sequenceId)
        {
          candidateTokenFreqs[-3] = seqToken.sequenceId;
          candidateTokenFreqs[-2]++;

          //Promote the Token Candidate to a Gene Token, if it has been found >=
          //the user defined candidateThreshold
          if (candidateTokenFreqs[-2] >= candidateThreshold)
          {
            Dictionary<int, int> deletedCandidate;
            gtCandidates.TryRemove(seqToken.text, out deletedCandidate);
            geneTokens.TryAdd(seqToken.text, candidateTokenFreqs);
          }
        }
      }
      else
      {
        //create a new token candidate frequencies dictionary by making 
        //a copy of the default dictionary from
        gtCandidates.TryAdd(seqToken.text, new 
          Dictionary<int, int>(gtStartingFrequencies[seqToken.sequenceId]));
      }
    }
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T06:15:16.820

显然，一场数据竞赛来自于一些线程将在这里添加项目的事实：

```
geneTokens.TryAdd(seqToken.text, candidateTokenFreqs); 
```

其他人将在这里阅读：

```
if (geneTokens.TryGetValue(seqToken.text, out geneTokenFreqs)) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-06T14:54:23.660

我如何在我的项目中使用并发字典：

我在字典中放了一个标志并从另一个线程检查，如果标志存在与否。如果存在标志，我会相应地完成我的任务..

为此，我正在做的是：

1) 声明并发字典 2) 使用 TryADD 方法添加标志 3) 尝试使用 TryGet 方法检索平面。

1) 声明

```
 Dim cd As ConcurrentDictionary(Of Integer, [String]) = New ConcurrentDictionary(Of Integer, String)() 
```

2）添加

```
If cd.TryAdd(1, "uno") Then
        Console.WriteLine("CD.TryAdd() succeeded when it should have failed")
        numFailures += 1
    End If 
```

3) 检索

```
 If cd.TryGetValue(1, "uno") Then
        Console.WriteLine("CD.TryAdd() succeeded when it should have failed")
        numFailures += 1
    End If 
```

# html - 不同宽度的均匀水平分布的图像？

> ID：12766013
> 
> 赞同：0
> 
> 时间：2012-10-07T04:00:43.653
> 
> 标签：html, css, fluid-layout

我有 10 个高度相同但宽度不同的图像。我需要将它们全部显示在一行中。这可能吗？容器的宽度也是可变的。试过[这个](https://stackoverflow.com/questions/6865194/fluid-width-with-equally-spaced-divs)，但由于我的图像宽度不同，它似乎对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T16:11:14.147

以不同的百分比保留每个图像，从而产生相同的效果。

# terminal - 显示详细进度的终端命令是什么？

> ID：12766014
> 
> 赞同：0
> 
> 时间：2012-10-07T04:00:47.530
> 
> 标签：terminal

我对开发还很陌生，但我记得读过一个终端“命令”，它会显示操作的详细输出/进度。

例如，如果我正在安装 ruby​​ 包，我可以将此 -xxxxx 命令添加到“包安装”的末尾，它会显示详细/频繁的进度。

希望这是有道理的...

编辑：我想我明白了！'-细节'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T04:12:23.450

通常一个 -v （详细）选项会为您完成。

# c++ - 从 char * 缓冲区到 wchar_t * 缓冲区的 Memcpy

> ID：12766019
> 
> 赞同：-2
> 
> 时间：2012-10-07T04:02:53.007
> 
> 标签：c++

基本上我有

```
void FileReader::parseBuffer(char * buffer, int length)
{
  //start by looking for a vrsn
  //Header seek around for a vrns followed by 32 bit size descriptor
  //read 32 bits at a time
  int cursor = 0;
  char vrsn[5] = "vrsn";
  cursor = this->searchForMarker(cursor, length, vrsn, buffer);
  int32_t size = this->getObjectSizeForMarker(cursor, length, buffer);
  cursor = cursor + 8; //advance cursor past marker and size
  wchar_t *version = this->getObjectForSizeAndCursor(size, cursor, buffer);
  cout << version << "\n";
  delete[] version;
}

wchar_t* FileReader::getObjectForSizeAndCursor(int32_t size, int cursor, char *buffer) {
  wchar_t *destination = NULL;
  destination = new wchar_t[(size/2)+1];
  memcpy(destination, buffer + cursor, size);
  return destination;
} 
```

在我的例子中说我有以下字节

7672736E - 标记 vrsn

00000040 - 要跟随的字符串的大小

0032002E0030002F00530065007200610074006F002000530063007200610074006300680020004C004900560045002000440061007400610065字符串-2006100730

该字符串每个字符使用 16 个字节，因此我不能将 char * 用于实际字符串，wchar_t 似乎是最好的选择。

但是，当我将这些字节存储到 wchar_t 时，我在 cout 中得到 0x7fe7abc037e0，我认为这是一个指针？

这似乎是错误的。当我使用 wcout 时，我在终端中什么也得不到。

memcpy 不会为此工作吗？

我的 wchar_t 大小也应该减半，因为我的 wchar_t 数量只有我拥有的字符的一半吗？

size 是字节数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T04:18:05.297

您的字符串看起来像是大端顺序，但您（可能）使用的是小端机器。因此，您的`wchar_t`字符串中充满了诸如 U+3200 之类的字符，您的终端可能无法正确打印这些字符。

您将必须正确翻转这些字符中的每一个。您最好的选择是将输入视为 a`unsigned char *`并将元素一次一个地复制到您`wchar_t *`的正确的字节序反转中：

```
int wlen = size/2;
uint16_t *dest = new uint16_t[wlen + 1];
unsigned char *ptr = (unsigned char *)(buffer + cursor);
for(int i=0; i<wlen; i++) {
    dest[i] = (ptr[0] << 8) + ptr[1];
    ptr += 2;
}
dest[wlen] = 0;
return dest; 
```

请注意，您不能假设`wchar_t`是 16 位宽。如果您可以使用 C++11 功能，请使用`char16_t`.

# windows-8 - 是否可以在 Windows 8 中使用 MediaCapture API 捕获屏幕交互？

> ID：12766025
> 
> 赞同：0
> 
> 时间：2012-10-07T04:04:12.357
> 
> 标签：windows-8

这是有关媒体捕获的 Microsoft 文档：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh452798](http://msdn.microsoft.com/en-us/library/windows/apps/hh452798)

我的问题是关于捕捉屏幕上的交互。在这种情况下，我想记录并重播用户刚刚玩过的游戏。

我正在使用 HTML 和 Javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T08:31:12.330

不知道媒体捕获还有其他可以使用的类。

我想你已经听说过 Java 中的一个机器人类，它可以捕获媒体（更常见的是它需要击键）在 C# sendKeys 中有一个类（它也在 JavaScript 中）我在下面分享一个链接，这将有所帮助

这是一个使用 Sendkeys 的 CodeProject 示例 [http://www.codeproject.com/Articles/32556/Auto-Clicker-C](http://www.codeproject.com/Articles/32556/Auto-Clicker-C)

还有另一个使用 HTML 5 捕获媒体的过程，但我在下面分享一个链接，这可能会对您有所帮助 [http://www.w3.org/TR/html-media-capture/](http://www.w3.org/TR/html-media-capture/)

这个 MSDN 链接也会帮助你。

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.media.capture.mediacapture](http://msdn.microsoft.com/en-us/library/windows/apps/windows.media.capture.mediacapture)

HTML 5 Rocks 还解释了如何使用媒体捕获。这里是链接

[http://www.html5rocks.com/en/tutorials/getusermedia/intro/](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)

# python - 使用python进行子进程管理

> ID：12766026
> 
> 赞同：2
> 
> 时间：2012-10-07T04:04:51.020
> 
> 标签：python, parallel-processing

我有一个数据分析脚本，它接受一个参数来指定要执行的分析段。我想在“n”是机器上的核心数的时候运行最多“n”个脚本实例。复杂之处在于，分析的部分比核心多，所以我想最多同时运行“n”个进程，其中一个完成，启动另一个。有没有人在使用 subprocess 模块之前做过这样的事情？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-07T05:07:54.213

我确实认为***多处理***模块将帮助您实现所需的功能。看一下示例技术。

```
import multiprocessing

def do_calculation(data):
    """
    @note: you can define your calculation code
    """
    return data * 2

def start_process():
    print 'Starting', multiprocessing.current_process().name

if __name__ == '__main__':
    analsys_jobs = list(range(10))  # could be your analysis work
    print 'analsys_jobs :', analsys_jobs

    pool_size = multiprocessing.cpu_count() * 2
    pool = multiprocessing.Pool(processes=pool_size,
                                initializer=start_process,
                                maxtasksperchild=2, ) 
    #maxtasksperchild = tells the pool to restart a worker process \
    # after it has finished a few tasks. This can be used to avoid \ 
    # having long-running workers consume ever more system resources

    pool_outputs = pool.map(do_calculation, analsys_jobs)   
    #The result of the map() method is functionally equivalent to the \
    # built-in map(), except that individual tasks run in parallel. \
    # Since the pool is processing its inputs in parallel, close() and join()\
    # can be used to synchronize the main process with the \
    # task processes to ensure proper cleanup.  

    pool.close() # no more tasks
    pool.join() # wrap up current tasks

    print 'Pool :', pool_outputs 
```

您可以从这里找到好的多处理[技术](http://www.doughellmann.com/PyMOTW/multiprocessing/basics.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T04:36:46.653

使用[`multiprocessing`模块](http://docs.python.org/library/multiprocessing.html)，特别是`Pool`类。`Pool`创建一个进程池（默认情况下，与 CPU 一样多的进程），并允许您将作业提交到池中，这些作业将在下一个空闲进程上执行。它负责所有子流程管理和任务之间传递数据的细节，因此您可以以非常直接的方式编写代码。有关使用的一些示例，请参阅文档。

# php - PHP preg_match 或 _replace 从字符串中查找子字符串，同时保留匹配

> ID：12766028
> 
> 赞同：1
> 
> 时间：2012-10-07T04:04:58.710
> 
> 标签：php, regex, string

所以我有这个我正在研究的类似评论的系统，显然我并没有完全考虑到它，但是我暂时和可预见的未来暂时无法使用我的方法。那就是说。

我目前正在使用

```
$pattern = '/\[@(\w+):(.*)\]/';
$subject = '[@keyword:string]';
preg_match($pattern, $subject, $matches); 
```

从特定模式类型中查找特定信息。这是某种程度的东西`[@keyword:string]`，这很好用。然而，在我想出这种方法的搜索中，我没有意识到我正在使用它的字符串还包含其他内容，例如评论。所以整个字符串看起来像 '[@keyword:string]
Hello World`

上面的代码将为我转储一个数组，第一项是我正在寻找的实际匹配项，下一个是关键字，下一个是字符串。这很棒，因为我将它用于其他用途。然而。就像我说的那样，我从来没有补偿过`<br>Hello World part`。我需要做的是与上述非常相似的事情。但只留下`<br>Hello World`部分作为可重复使用的字符串，因为我打算重新加入 2 个字符串。在我的过程完成后。除了，在这种情况下完成后的过程是用匹配的用户名或基于关键字的图像替换我正在寻找的模式，然后调度一个函数来查找正确的名称，或者为图片。这很好，我得到了那部分，它只是从字符串中剥离模式，所以当我得到名称或图像时，我可以将它重新加入字符串。

希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T04:16:36.780

使用以下模式之一：

```
'/\[@(\w+):(.*?)\]/'

'/\[@(\w+):(.*)\]/U' 
```

注意：PCRE_UNGREEDY

# jakarta-ee - Web.xml 错误页面定义优先级

> ID：12766029
> 
> 赞同：1
> 
> 时间：2012-10-07T04:05:36.240
> 
> 标签：jakarta-ee, web-applications

这个我找了一圈，好像没有解决。如果在我的 webapp 中我有一个错误处理位

```
 <error-page>
    <exception-type>javax.faces.ViewExpiredException</exception-type>
    <location>/error.jsp</location>
  </error-page>
  <error-page>
    <error-code>500</error-code>
    <location>/error/maur_error.jsp</location>
  </error-page> 
```

优先级如何确定？按出场顺序？

编辑：请仔细阅读，有**两个**错误页面定义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T09:06:38.500

如果在您的 servlet 中执行“response.sendError(500)”，用户将看到 error.jsp。相反，如果您执行 'throw new MyException()'，用户将看到 maur_error.jsp。这是由 2 个不同页面处理的 2 种不同情况。

500 和 Throwable 的示例确实没有多大意义。但在另一种情况下，例如 AddressNotFoundException、SubscriptionExpiredException 和 401 Not Authorized HTTP 错误代码（由应用程序服务器提供，而不是由应用程序提供），这种映射使错误处理变得容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-01T11:43:58.633

您的配置不应该有优先级问题，因此**如果您的 xml 中有其他错误条目， ViewExpiredException 应该触发重定向到 /error.jsp 和 500 到 /error/maur_error.jsp exept**。

例如，我遇到了与您类似的问题（因此 ViewExpiredException -> 错误页面），这是因为我也有此条目

```
<error-page>
    <exception-type>java.lang.Throwable</exception-type>
    <location>/genericError.xhtml</location>
</error-page> 
```

由于 ViewExpiredException 被包装在更通用的异常中，因此触发了 Throwable 条目。

简而言之，如果您定义了一个针对 500 错误页面的页面，请不要定义通用异常页面。它不是必需的，并且会“吃掉”您更具体的例外页面。

# python - 从 html 中的时髦 span 对象获取文本

> ID：12766031
> 
> 赞同：0
> 
> 时间：2012-10-07T04:06:03.303
> 
> 标签：python, soap, beautifulsoup

我需要从没有 id、class 或 name 标签的跨度中获取文本，而是从像这样的自定义标签中获取文本

```
<span itemprop="name">the text i Need</span> 
```

我已经尝试过休闲：

```
def handle_data(data):
    soup = BeautifulSoup(data)
    info = soup.find('span',itemprop="name").text
    return(info) 
```

但我得到的只是在网络上使用漂亮的肥皂和 python 得到一个空白屏幕。有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T04:30:05.810

尝试使用“内容”属性而不是“文本”：

```
info = soup.find('span', itemprop='name').contents 
```

# android - 从文件夹插入音频剪辑

> ID：12766033
> 
> 赞同：0
> 
> 时间：2012-10-07T04:06:42.293
> 
> 标签：android

我有一个 res/raw 文件夹，里面有 5 个我希望能够在我的应用程序中播放的 wav 文件。这些文件应该在列表视图中播放。我有某种方式，但我几乎可以肯定有更好的方式来做到这一点。这就是我迄今为止所拥有的。

```
package churchapp.acosta;

import android.app.ListActivity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class Services extends ListActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setListAdapter(new ArrayAdapter<String>(this,R.layout.single_item, clips));

    ListView list = getListView();
    list.setTextFilterEnabled(true);
    list.setOnItemClickListener(new OnItemClickListener(){

        public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                long arg3) {
            // TODO Auto-generated method stub

                            //what do i put here in order for user to play clip when 
                            //a list choice is selected?
                            //i tried the above code below but there has to be a better way?
                            /*MediaPlayer mPlayer2;
            if(position==0)
            {
                mPlayer2= MediaPlayer.create(Services.this, R.raw.clip1);
                        mPlayer2.start();
            }*/ 

        }

    });
}

static final String[] clips= new String[]{
    "This Weeks service","Last Weeks Service","3 Weeks Ago Service","4 Weeks ago Service ","5 Weeks Ago Service"
}; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T04:13:00.933

试试下面的代码：

```
 MediaPlayer mp = MediaPlayer.create(getApplicationContext(), R.raw.apple);
        mp.start(); 
```

# css - CSS 挑战：输入超出 DIV

> ID：12766034
> 
> 赞同：0
> 
> 时间：2012-10-07T04:06:44.433
> 
> 标签：css, html, css-float

我正在尝试围绕我所处的平台限制完成一些特定的事情。

[我在http://jsfiddle.net/MrV5M/4/](http://jsfiddle.net/MrV5M/4/)创建了一个有点不言自明的问题的 jsfiddle

具体问题：

*   在 Chrome 上，输入框的右边框被切断。
*   在 Safari 上，内容类单元格的宽度超过了容器，因此溢出了边框。
*   在 IE9 上，标签不会浮动到内容 div 的左侧

我关心 Safari 的主要原因是因为我正在开发一个 JQuery Mobile/PhoneGap 应用程序，它也是一个网络应用程序。我只支持现代浏览器，但这让我发疯。通常我只会为容器使用一个表格，但是内容 div 上的 text-overflow: ellipsis 样式在表格内时不起作用。（基本上，我试图将内容保持在一行并省略号而不强制使用固定宽度或使用 Javascript 计算宽度）

任何人都有 l33t CSS 技能来完成这项工作？我当然不会... :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-31T07:49:01.890

只需将此 CSS 添加到您的样式表中，就可以放心地处理您的问题：D

```
* {
    -webkit-box-sizing: border-box;
       -moz-box-sizing: border-box;
            box-sizing: border-box;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T05:32:29.877

你可能不喜欢这个答案。我对修复 Chrome 和 IE9 问题的 css 进行了一些调整。看一看，

[http://jsfiddle.net/MrV5M/11/](http://jsfiddle.net/MrV5M/11/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-07T04:54:55.087

有很多方法可以做你想做的事情，但如果你坚持使用基本上不受支持的“flex”东西（即使在专业中也[可以看到这里](http://caniuse.com/#search=flex)），你需要将供应商前缀添加到`flex`.

例如.. `-webkit-flex`,`-moz-flex`

另外，我认为您不需要在具有 flex 属性的元素上设置宽度。虽然不是积极的。

所以你的浏览器问题：

-IE 根本不支持 flex，所以你的标签不会浮动，除非你使用浮动。

- 您的输入/内容溢出容器并被切断的原因与 flex 没有任何关系。但 css 的工作方式.. 将元素设置为 100% 宽度意味着将其设置为其父级的宽度。但默认情况下，css 不会将填充/边框宽度计为该宽度的一部分。所以你最终得到 100% 的宽度加上 L/R 填充和边框。但是，由于您只支持现代浏览器..`box-sizing:border-box;`来救援。谷歌它的细节，但把它放在你的输入元素上应该可以解决问题。

# php - php上传多个文件

> ID：12766035
> 
> 赞同：2
> 
> 时间：2012-10-07T04:06:55.527
> 
> 标签：php, file-upload

我对 PHP 不是很熟悉，我有以下代码可以将文件上传到服务器。我怎样才能让这个上传多个文件，在我的html中我已经添加了多个属性。php代码是这样的：

```
<?php
session_start();
$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));

if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
     echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
    }
  else
    {

echo "Upload: " . $_FILES["file"]["name"] . "<br />";
echo "Type: " . $_FILES["file"]["type"] . "<br />";
echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";

if (file_exists($_SESSION['user']."/" . $_FILES["file"]["name"]))
  {
  echo $_FILES["file"]["name"] . " already exists. ";
  }
else
  {
  move_uploaded_file($_FILES["file"]["tmp_name"][$i],
  $_SESSION['user']."/" . $_FILES["file"]["name"]);
  echo "Stored in: " . $_SESSION['user']."/" . $_FILES["file"]["name"];

  }
}

else
  {
  echo "Invalid file";
  } 
```

?>

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-07T04:09:27.613

可以选择多个文件，然后使用

```
<input type='file' name='file[]' multiple> 
```

执行上传的示例 php 脚本：

```
<html>
<title>Upload</title>
<?php
    session_start();
    $target=$_POST['directory'];
        if($target[strlen($target)-1]!='/')
                $target=$target.'/';
            $count=0;
            foreach ($_FILES['file']['name'] as $filename) 
            {
                $temp=$target;
                $tmp=$_FILES['file']['tmp_name'][$count];
                $count=$count + 1;
                $temp=$temp.basename($filename);
                move_uploaded_file($tmp,$temp);
                $temp='';
                $tmp='';
            }
    header("location:../../views/upload.php");
?>
</html> 
```

所选文件作为数组接收

`$_FILES['file']['name'][0]`存储第一个文件的名称。 `$_FILES['file']['name'][1]`存储第二个文件的名称。等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:48:26.597

尝试这个

```
$file = $_FILES['image_file'];
for($i = 0; $i < count($file['name']); $i++){
    $image = array(
        'name' => $file['name'][$i],
        'type' => $file['type'][$i],
        'size' => $file['size'][$i],
        'tmp_name' => $file['tmp_name'][$i],
        'error' => $file['error'][$i]
    );
    // Validate, upload, and save to the DB
} 
```

这样，您就有了一个文件“$image”，就好像它只是选择了一个文件一样，现在您需要通过使用您的代码上传文件来处理该文件。因此，对于代码中的每个 '$_FILES' 只需替换 '$image'

# perl - 为什么我的字典在 Perl 中不显示它的键？

> ID：12766040
> 
> 赞同：0
> 
> 时间：2012-10-07T04:08:20.920
> 
> 标签：perl

```
my %dd;
$dd["foo"]="bar";
print keys %dd;
print %dd; 
```

这是我的代码。这应该`%dd`在最后两行显示字典的键和字典本身，对吗？但事实并非如此！几个小时以来，我一直在为此烦恼，但没有任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T04:11:22.343

正确的语法是：

```
my %dd;
$dd{"foo"}="bar";
print keys %dd;
print %dd; 
```

注意：它是“{}”而不是“[]”

# overlay - 框阴影 - 单击后面的图像 + 慢速滚动

> ID：12766044
> 
> 赞同：1
> 
> 时间：2012-10-07T04:09:04.527
> 
> 标签：overlay, z-index, css, vignette

我有两个相互交织的棘手问题。我在盒子的四个侧面有一个插入框阴影小插图，但我在里面有可点击的图像，我无法点击，因为阴影/小插图在图像上方（位于 z-index：-1）。我读了一些关于使用指针事件的信息：无，但我认为当我尝试使用它时它会影响盒子里的所有东西，所以它没有用。关于如何使这些图像可点击但仍处于阴影后面的任何建议？

另外，我已经阅读了以前有关使用框阴影的滚动速度的帖子。我已经让它尽可能小，但有没有人想出如何让它更快？我真的很喜欢这种外观，但如果滚动速度太慢，该功能将无法正常工作。

以下是迄今为止构建的站点的链接。

[http://www.official-design.com/TEST_PROJECT.html](http://www.official-design.com/TEST_PROJECT.html) http://www.official-design.com/TEST_GRID.html

请客气——我是这方面的新手——我是建筑师而不是网页设计师。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:08:28.233

移除负片`z-index`不适用于嵌入阴影。要实现您的需求，需要做 3 件事：

1.  `float: left`从`#makeMeScrollable div.scrollableArea img`规则中删除多余的东西。这是为了确保`<a>` 元素正确包裹图像。
2.  从规则中删除`box-shadow`属性。`.SHADOW`
3.  为您的链接添加以下 CSS：

    ```
    .SHADOW a {
      display: block;
      -webkit-box-shadow: inset 2px 2px 4px rgba(0,0,0,0.25);
      box-shadow: inset 2px 2px 4px rgba(0,0,0,0.25);
    } 
    ```

请注意，我使用`rgba`了 value 而不是`#ccc`，因为阴影将覆盖在图像上。

作为旁注，没有必要在所有大写中命名类。它降低了可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T02:33:23.150

为什么你有`z-index: -1`链接？删除它，链接工作正常，阴影仍然可见。

我还建议直接将盒子阴影应用于`img`or`a`元素，而不是`td`包含它们的元素。

# objective-c - NSNotification userInfo Dictionary - 它是复制的还是只是一个指针？

> ID：12766045
> 
> 赞同：1
> 
> 时间：2012-10-07T04:09:08.007
> 
> 标签：objective-c, nsnotificationcenter

我在文档中找不到如何`userInfo`为`NSNotification`. 如果您指定一个，这仅仅是一个指向内存中现有位置的指针，还是分配新内存以“携带”此数据到通知中？

如果是后者，如果要引用大字典会影响性能；如果是前者，我希望字典有多大并不重要，因为它已经在内存中。

同样在这一点上，如果字典在添加到通知之前没有保留，它的寿命是多久？我们是否可以安全地假设该通知的接收者在接收到该字典时将有权访问该字典，即使在发送通知之前该字典未被保留？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T05:03:39.377

我相信`userInfo`提供给的对象`+ (id)notificationWithName:(NSString *)aName object:(id)anObject userInfo:(NSDictionary *)userInfo`被保留。而且我确信不会为 store 分配任何额外的内存`userInfo`。

因此，`userInfo`在未发布通知时（由该通知的所有观察者发送并处理），引用的对象将是活动的。是的，您可以假设字典（或您将提供的任何内容`userInfo`）都可以在观察者中访问（当然，如果您没有过度释放它）。

来自[Core Foundation 的内存管理编程指南 -> 所有权政策](https://developer.apple.com/library/mac/#documentation/CoreFOundation/Conceptual/CFMemoryMgmt/Concepts/Ownership.html)

> **实例变量和传递参数**
> 
> 基本规则的一个推论是，当您将一个对象传递给另一个对象（作为函数参数）时，您应该期望接收者在需要维护它时获得传递对象的所有权。

# vb.net - VS 2010：无法启动应用程序

> ID：12766047
> 
> 赞同：0
> 
> 时间：2012-10-07T04:10:25.153
> 
> 标签：vb.net, winforms, visual-studio-2010

我有 vb.net 应用程序并且从过去 1 年开始工作我从未遇到过从 VS 2010 启动应用程序的问题。但最后一天我遇到了由于应用程序配置不正确而无法启动应用程序的问题。详细信息异常图像如下。

![在此处输入图像描述](../Images/9886ba4547884fdab8dd6e7e4659bdd7.png)

已经存在与此相关的[SO](https://stackoverflow.com/questions/8055561/unable-to-start-debug-program)帖子。但没有找到任何答案。在 ReBulild 解决方案之后，我的应用程序工作正常并且不会出现上述错误。但我想知道上述错误背后的原因。

对于上述错误的任何帮助或答案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T04:35:06.403

我在您链接到的[帖子中添加了一个](https://stackoverflow.com/questions/8055561/unable-to-start-debug-program)[答案](https://stackoverflow.com/a/12766146/221111)，应该可以帮助您理解此消息的含义。

# html - Firefox中的额外垂直滚动

> ID：12766049
> 
> 赞同：0
> 
> 时间：2012-10-07T04:10:32.963
> 
> 标签：html, css, firefox

我正在开发一个网站，该网站在除 Firefox 之外的所有浏览器上都能完美运行。在 Firefox 中，末尾添加了额外的空间，并且存在额外的垂直滚动。我的网站托管[在这里](https://projects-sushilkumar.rhcloud.com/geodine/)。谁能告诉我出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T05:24:26.040

I 帧可能是导致它的原因。如果你添加

```
Style="position:fixed;" 
```

在像这样作为背景的 div 中

```
<html><head><title>your title</title></head><body>
<div Style="position:fixed;" name="entire web page">

<p><h1>HI and welcome to my world</p>
<div>some content...</div>
</div> 
```

您也可以将它添加到任何“大”项目（如大图片）中，如果确保所有附加的**高度百分比加起来不超过 100% 尝试显示 140% 的屏幕意味着它需要滚动条。前几天我一直有这个麻烦。**堆叠在另一个之上的任何对象。

# mysql - MySQL Count 如果使用 4 个表或 Perl

> ID：12766054
> 
> 赞同：0
> 
> 时间：2012-10-07T04:11:34.040
> 
> 标签：mysql, sql

嗨，我有一个相对复杂的查询，它依赖于 4 个不同的表，不幸的是我无法控制这些数据，但我必须查询它。

我运行了这个更简单的查询，它只使用表 1 和表 2

```
SELECT actor, receiver, count(IF(t2.group1 = "anxiety behavior", 1,0)) AS 'anxiety'
FROM ethogram_edited_obs_behaviors t1
JOIN ethogram_behaviors            t2 on t1.behavior = t2.behavior_code
GROUP BY actor; 
```

以下是我需要的 4 个表和我尝试过的查询不起作用

```
Table 1           |   Table 2                     | Table 3         |  Table 4           
Actor | Behavior  |   Behavior | type of Behavior |  subject | sex  |  subject |subject_code
 er     frown     |   frown    anxiety behavior   |  Eric       M   |  Eric    |    er 
```

这是失败的查询

```
SELECT actor, count(IF(t2.group1 = "anxiety behavior", 1,0) AND(t3.sex = "M", 1,0)) AS 'anxiety',
FROM ethogram_edited_obs_behaviors t1
JOIN ethogram_behaviors            t2 on t1.behavior = t2.behavior_code
JOIN subject_code                  t3 on t1.actor    = t3.behavior_code1
JOIN subjects                      t4 on t3.subject  = t4.yerkes_code
GROUP BY actor; 
```

任何帮助将非常感激！！谢谢 ：）

PS 如果这在 Perl 中更容易做到，提示也非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T05:31:53.967

`COUNT(IF(...))`没有意义，因为无论 IF 返回什么，它都会计算行。我想你可能想要`SUM(IF(...)) as anxiety`。

此外，您的 IF 的语法是错误的。它应该是：

```
SUM(IF(t2.group1 = "anxiety behavior" AND t3.sex = "M", 1, 0)) AS anxiety 
```

或者简单地说：

```
SUM(t2.group1 = "anxiety behavior" AND t3.sex = "M") AS anxiety 
```

因为条件表达式返回 1 为真，0 为假。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:20:56.503

使用 count(if(...))，应该使用 null 作为 false 部分。将 0 替换为 null。

# ios - 使用 Adob e Air 为 iOS 转换 Flash 文件

> ID：12766058
> 
> 赞同：0
> 
> 时间：2012-10-07T04:12:42.557
> 
> 标签：ios, flash, air, adobe

是否可以使用 Adob​​e Air 将我网站上的 Flash 按钮转换为在 iOS 中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T04:19:12.613

[您可以使用http://www.adobe.com/devnet/air/air_for_ios.html](http://www.adobe.com/devnet/air/air_for_ios.html)转换整个 Flash 应用程序，但如果您要转换单个按钮，则不值得麻烦。

# android - Android 模拟器崩溃或启动

> ID：12766061
> 
> 赞同：1
> 
> 时间：2012-10-07T04:13:17.017
> 
> 标签：android, ubuntu, crash, emulation, stack-trace

我在本地运行 Ubuntu 12.10。我下载了android sdk并安装了oracle java 6 sdk（覆盖了我之前的openjdk）。我为 arm 创建了一个模拟器图像，为 x86 创建了一个。然后我从命令行运行模拟器。

模拟器在启动时崩溃。详细输出发布在下面。有人有想法吗？

```
./emulator -verbose -avd ICS
emulator: found SDK root at /workspace/android/packages/android-sdk-linux
emulator: Android virtual device file at: /.android/avd/ICS.ini
emulator: virtual device content at /.android/avd/ICS.avd
emulator: virtual device config file: /.android/avd/ICS.avd/config.ini
emulator: using core hw config path: /.android/avd/ICS.avd/hardware-qemu.ini
emulator: Found AVD target API level: 16
emulator: found skin 'WVGA800' in directory: /workspace/android/packages/android-sdk-linux/platforms/android-16/skins
emulator: autoconfig: -skin WVGA800
emulator: autoconfig: -skindir /workspace/android/packages/android-sdk-linux/platforms/android-16/skins
emulator: found skin-specific hardware.ini: /workspace/android/packages/android-sdk-linux/platforms/android-16/skins/WVGA800/hardware.ini
emulator: keyset loaded from: /.android/default.keyset
emulator: trying to load skin file '/workspace/android/packages/android-sdk-linux/platforms/android-16/skins/WVGA800/layout'
emulator: skin network speed: 'full'
emulator: skin network delay: 'none'
emulator: autoconfig: -kernel /workspace/android/packages/android-sdk-linux/system-images/android-16/x86//kernel-qemu
emulator: autoconfig: -ramdisk /workspace/android/packages/android-sdk-linux/system-images/android-16/x86//ramdisk.img
emulator: Using initial system image: /workspace/android/packages/android-sdk-linux/system-images/android-16/x86//system.img
emulator: autoconfig: -data /.android/avd/ICS.avd/userdata-qemu.img
emulator: autoconfig: -initdata /.android/avd/ICS.avd/userdata.img
emulator: autoconfig: -cache /.android/avd/ICS.avd/cache.img
emulator: Physical RAM size: 512MB

Content of hardware configuration file:
  hw.cpu.arch = x86
  hw.ramSize = 512
  hw.screen = touch
  hw.mainKeys = yes
  hw.trackBall = yes
  hw.keyboard = no
  hw.keyboard.lid = no
  hw.keyboard.charmap = qwerty2
  hw.dPad = yes
  hw.gsmModem = yes
  hw.gps = yes
  hw.battery = yes
  hw.accelerometer = yes
  hw.audioInput = yes
  hw.audioOutput = yes
  hw.sdCard = yes
  disk.cachePartition = yes
  disk.cachePartition.path = /.android/avd/ICS.avd/cache.img
  disk.cachePartition.size = 66m
  hw.lcd.width = 480
  hw.lcd.height = 800
  hw.lcd.depth = 16
  hw.lcd.density = 240
  hw.lcd.backlight = yes
  hw.gpu.enabled = no
  hw.camera.back = emulated
  hw.camera.front = none
  vm.heapSize = 48
  hw.sensors.proximity = yes
  hw.sensors.magnetic_field = yes
  hw.sensors.orientation = yes
  hw.sensors.temperature = yes
  kernel.path = /workspace/android/packages/android-sdk-linux/system-images/android-16/x86//kernel-qemu
  kernel.parameters =  androidboot.hardware=goldfish clocksource=pit android.checkjni=1
  disk.ramdisk.path = /workspace/android/packages/android-sdk-linux/system-images/android-16/x86//ramdisk.img

  disk.systemPartition.size = 255m
  disk.dataPartition.path = /.android/avd/ICS.avd/userdata-qemu.img
  disk.dataPartition.size = 200m
  avd.name = ICS
.
QEMU options list:
emulator: argv[00] = "./emulator-x86"
emulator: argv[01] = "-android-hw"
emulator: argv[02] = "/.android/avd/ICS.avd/hardware-qemu.ini"
Concatenated QEMU options:
 ./emulator-x86 -android-hw /.android/avd/ICS.avd/hardware-qemu.ini
emulator: registered 'boot-properties' qemud service
emulator: nand_add_dev: system,size=0xff00000,initfile=/workspace/android/packages/android-sdk-linux/system-images/android-16/x86//system.img
emulator: mapping 'system' NAND image to /tmp/android-robert/emulator-htb5FB
emulator: rounding devsize up to a full eraseunit, now ff1b000

emulator: nand_add_dev: userdata,size=0xc800000,file=/.android/avd/ICS.avd/userdata-qemu.img
emulator: rounding devsize up to a full eraseunit, now c810000

emulator: registered 'boot-properties' qemud service
emulator: Adding boot property: 'dalvik.vm.heapsize' = '48m'
emulator: Adding boot property: 'qemu.sf.lcd_density' = '240'
emulator: Adding boot property: 'qemu.hw.mainkeys' = '1'
emulator: Adding boot property: 'qemu.sf.fake_camera' = 'back'
emulator: nand_add_dev: cache,size=0x4200000,file=/.android/avd/ICS.avd/cache.img
emulator: Initializing hardware OpenGLES emulation support
emulator: No kvm device file detected
emulator: Kernel parameters: qemu.gles=0 qemu=1 console=ttyS0 android.qemud=ttyS1 androidboot.hardware=goldfish clocksource=pit android.checkjni=1 ndns=1
emulator:     trying to find: /workspace/android/packages/android-sdk-linux/tools/bios.bin

emulator:     trying to find: /workspace/android/packages/android-sdk-linux/tools/lib/pc-bios/bios.bin

emulator:     trying to find: /workspace/android/packages/android-sdk-linux/tools/vgabios-cirrus.bin

emulator:     trying to find: /workspace/android/packages/android-sdk-linux/tools/lib/pc-bios/vgabios-cirrus.bin

emulator: autoconfig: -scale 1
emulator: Could not open file: (null)/system/build.prop: No such file or directory
emulator: control console listening on port 5554, ADB on port 5555
emulator: sent '0012host:emulator:5555' to ADB server
emulator: ping program: /workspace/android/packages/android-sdk-linux/tools/ddms
emulator: ping command: /workspace/android/packages/android-sdk-linux/tools/ddms ping emulator 20.0.3.0 "ATI Technologies Inc." "AMD Radeon HD 6700M Series" "4.2.11627 Compatibility Profile Context"
goldfish_fb_get_pixel_format:167: display surface,pixel format:
  bits/pixel:  16
  bytes/pixel: 2
  depth:       16
  red:         bits=5 mask=0xf800 shift=11 max=0x1f
  green:       bits=6 mask=0x7e0 shift=5 max=0x3f
  blue:        bits=5 mask=0x1f shift=0 max=0x1f
  alpha:       bits=0 mask=0x0 shift=0 max=0x0
### WARNING: could not find /etc/localtime or /usr/share/zoneinfo/localtime. unable to determine host timezone
*** glibc detected *** ./emulator-x86: munmap_chunk(): invalid pointer: 0x0825c30a ***
======= Backtrace: =========
/lib/i386-linux-gnu/libc.so.6(+0x73e42)[0x183e42]
/lib/i386-linux-gnu/libc.so.6(+0x74525)[0x184525]
./emulator-x86[0x80e2702]
./emulator-x86[0x80e2a3c]
./emulator-x86[0x80fdf2b]
./emulator-x86[0x80fe059]
./emulator-x86[0x8101aa4]
./emulator-x86[0x8101d29]
./emulator-x86[0x80b8362]
./emulator-x86[0x80dd4cf]
./emulator-x86[0x80dd78f]
./emulator-x86[0x81347ba]
./emulator-x86[0x8134b5c]
./emulator-x86[0x815c79d]
[0xae5b9cbc]
======= Memory map: ========
00110000-002af000 r-xp 00000000 08:07 796184     /lib/i386-linux-gnu/libc-2.15.so
002af000-002b1000 r--p 0019f000 08:07 796184     /lib/i386-linux-gnu/libc-2.15.so
002b1000-002b2000 rw-p 001a1000 08:07 796184     /lib/i386-linux-gnu/libc-2.15.so
002b2000-002b5000 rw-p 00000000 00:00 0 
002b5000-002d4000 r-xp 00000000 08:07 1575117    /usr/lib/i386-linux-gnu/libxcb.so.1.1.0
002d4000-002d5000 r--p 0001f000 08:07 1575117    /usr/lib/i386-linux-gnu/libxcb.so.1.1.0
002d5000-002d6000 rw-p 00020000 08:07 1575117    /usr/lib/i386-linux-gnu/libxcb.so.1.1.0
002d6000-002e6000 r-xp 00000000 08:07 1580912    /usr/lib/i386-linux-gnu/libXext.so.6.4.0
002e6000-002e7000 r--p 0000f000 08:07 1580912    /usr/lib/i386-linux-gnu/libXext.so.6.4.0
002e7000-002e8000 rw-p 00010000 08:07 1580912    /usr/lib/i386-linux-gnu/libXext.so.6.4.0
002e8000-002ef000 r-xp 00000000 08:07 1578120    /usr/lib/i386-linux-gnu/libXrandr.so.2.2.0
002ef000-002f0000 r--p 00006000 08:07 1578120    /usr/lib/i386-linux-gnu/libXrandr.so.2.2.0
002f0000-002f1000 rw-p 00007000 08:07 1578120    /usr/lib/i386-linux-gnu/libXrandr.so.2.2.0
002f1000-002f5000 r-xp 00000000 08:07 1573672    /usr/lib/i386-linux-gnu/libXfixes.so.3.1.0
002f5000-002f6000 r--p 00004000 08:07 1573672    /usr/lib/i386-linux-gnu/libXfixes.so.3.1.0
002f6000-002f7000 rw-p 00005000 08:07 1573672    /usr/lib/i386-linux-gnu/libXfixes.so.3.1.0
002f7000-00321000 r-xp 00000000 08:07 7097052    /workspace/android/packages/android-sdk-linux/tools/lib/libEGL_translator.so
00321000-00322000 rw-p 00029000 08:07 7097052    /workspace/android/packages/android-sdk-linux/tools/lib/libEGL_translator.so
00322000-00323000 rw-p 00000000 00:00 0 
00323000-0035e000 r-xp 00000000 08:07 7097020    /workspace/android/packages/android-sdk-linux/tools/lib/libGLES_CM_translator.so
0035e000-0035f000 rw-p 0003a000 08:07 7097020    /workspace/android/packages/android-sdk-linux/tools/lib/libGLES_CM_translator.so
0035f000-0039a000 r-xp 00000000 08:07 1605324    /usr/lib/fglrx/libatiadlxx.so
0039a000-0039c000 rw-p 0003b000 08:07 1605324    /usr/lib/fglrx/libatiadlxx.so
0039c000-003ac000 rw-p 00000000 00:00 0 
003ac000-003ae000 r-xp 00000000 08:07 1578115    /usr/lib/i386-linux-gnu/libXinerama.so.1.0.0
003ae000-003af000 r--p 00001000 08:07 1578115    /usr/lib/i386-linux-gnu/libXinerama.so.1.0.0
003af000-003b0000 rw-p 00002000 08:07 1578115    /usr/lib/i386-linux-gnu/libXinerama.so.1.0.0
003b0000-003b2000 r-xp 00000000 08:07 1578101    /usr/lib/i386-linux-gnu/libXdamage.so.1.1.0
003b2000-003b3000 r--p 00001000 08:07 1578101    /usr/lib/i386-linux-gnu/libXdamage.so.1.1.0
003b3000-003b4000 rw-p 00002000 08:07 1578101    /usr/lib/i386-linux-gnu/libXdamage.so.1.1.0
003b4000-003b5000 r-xp 00000000 08:07 1575985    /usr/lib/i386-linux-gnu/libX11-xcb.so.1.0.0
003b5000-003b6000 r--p 00000000 08:07 1575985    /usr/lib/i386-linux-gnu/libX11-xcb.so.1.0.0
003b6000-003b7000 rw-p 00001000 08:07 1575985    /usr/lib/i386-linux-gnu/libX11-xcb.so.1.0.0
003b7000-003cd000 r-xp 00000000 08:07 1574695    /usr/lib/i386-linux-gnu/libxcb-glx.so.0.0.0
003cd000-003ce000 r--p 00016000 08:07 1574695    /usr/lib/i386-linux-gnu/libxcb-glx.so.0.0.0
003ce000-003cf000 rw-p 00017000 08:07 1574695    /usr/lib/i386-linux-gnu/libxcb-glx.so.0.0.0
003d1000-003d8000 r-xp 00000000 08:07 800311     /lib/i386-linux-gnu/librt-2.15.so
003d8000-003d9000 r--p 00006000 08:07 800311     /lib/i386-linux-gnu/librt-2.15.so
003d9000-003da000 rw-p 00007000 08:07 800311     /lib/i386-linux-gnu/librt-2.15.so
003da000-0042c000 r-xp 00000000 08:07 1575416    /usr/lib/i386-linux-gnu/mesa/libGL.so.1.2
0042c000-0042e000 r--p 00051000 08:07 1575416    /usr/lib/i386-linux-gnu/mesa/libGL.so.1.2
0042e000-00433000 rwxp 00053000 08:07 1575416    /usr/lib/i386-linux-gnu/mesa/libGL.so.1.2
00433000-00436000 r-xp 00000000 08:07 1575929    /usr/lib/i386-linux-gnu/libpulse-simple.so.0.0.3
00436000-00437000 r--p 00002000 08:07 1575929    /usr/lib/i386-linux-gnu/libpulse-simple.so.0.0.3
00437000-00438000 rw-p 00003000 08:07 1575929    /usr/lib/i386-linux-gnu/libpulse-simple.so.0.0.3
00438000-00440000 r-xp 00000000 08:07 787446     /lib/i386-linux-gnu/libwrap.so.0.7.6
00440000-00441000 r--p 00007000 08:07 787446     /lib/i386-linux-gnu/libwrap.so.0.7.6
00441000-00442000 rw-p 00008000 08:07 787446     /lib/i386-linux-gnu/libwrap.so.0.7.6
00442000-00448000 r-xp 00000000 08:07 1578300    /usr/lib/i386-linux-gnu/libogg.so.0.7.1
00448000-00449000 r--p 00005000 08:07 1578300    /usr/lib/i386-linux-gnu/libogg.so.0.7.1
00449000-0044a000 rw-p 00006000 08:07 1578300    /usr/lib/i386-linux-gnu/libogg.so.0.7.1
0044a000-0045d000 r-xp 00000000 08:07 800295     /lib/i386-linux-gnu/libresolv-2.15.so
0045d000-0045e000 ---p 00013000 08:07 800295     /lib/i386-linux-gnu/libresolv-2.15.so
0045e000-0045f000 r--p 00013000 08:07 800295     /lib/i386-linux-gnu/libresolv-2.15.so
0045f000-00460000 rw-p 00014000 08:07 800295     /lib/i386-linux-gnu/libresolv-2.15.so
00460000-00462000 rw-p 00000000 00:00 0 
00468000-00473000 r-xp 00000000 08:07 1573158    /usr/lib/i386-linux-gnu/libdrm.so.2.4.0
00473000-00474000 r--p 0000a000 08:07 1573158    /usr/lib/i386-linux-gnu/libdrm.so.2.4.0
00474000-00475000 rw-p 0000b000 08:07 1573158    /usr/lib/i386-linux-gnu/libdrm.so.2.4.0
00475000-004c1000 r-xp 00000000 08:07 1574348    /usr/lib/i386-linux-gnu/libpulse.so.0.13.5
004c1000-004c2000 r--p 0004b000 08:07 1574348    /usr/lib/i386-linux-gnu/libpulse.so.0.13.5
004c2000-004c3000 rw-p 0004c000 08:07 1574348    /usr/lib/i386-linux-gnu/libpulse.so.0.13.5
004cf000-004e6000 r-xp 00000000 08:07 800284     /lib/i386-linux-gnu/libpthread-2.15.so
004e6000-004e7000 r--p 00016000 08:07 800284     /lib/i386-linux-gnu/libpthread-2.15.so
004e7000-004e8000 rw-p 00017000 08:07 800284     /lib/i386-linux-gnu/libpthread-2.15.so
004e8000-004ea000 rw-p 00000000 00:00 0 
004ea000-0061a000 r-xp 00000000 08:07 1578713    /usr/lib/i386-linux-gnu/libX11.so.6.3.0
0061a000-0061b000 r--p 0012f000 08:07 1578713    /usr/lib/i386-linux-gnu/libX11.so.6.3.0
0061b000-0061d000 rw-p 00130000 08:07 1578713    /usr/lib/i386-linux-gnu/libX11.so.6.3.0
0061d000-0061e000 rw-p 00000000 00:00 0 
0061e000-00681000 r-xp 00000000 08:07 1575791    /usr/lib/i386-linux-gnu/libpulsecommon-1.1.so
00681000-00682000 r--p 00062000 08:07 1575791    /usr/lib/i386-linux-gnu/libpulsecommon-1.1.so
00682000-00683000 rw-p 00063000 08:07 1575791    /usr/lib/i386-linux-gnu/libpulsecommon-1.1.so
00693000-0069b000 r-xp 00000000 08:07 1574683    /usr/lib/i386-linux-gnu/libXrender.so.1.3.0
0069b000-0069c000 r--p 00007000 08:07 1574683    /usr/lib/i386-linux-gnu/libXrender.so.1.3.0
0069c000-0069d000 rw-p 00008000 08:07 1574683    /usr/lib/i386-linux-gnu/libXrender.so.1.3.0
006b2000-006b6000 r-xp 00000000 08:07 1575311    /usr/lib/i386-linux-gnu/libXxf86vm.so.1.0.0
006b6000-006b7000 r--p 00003000 08:07 1575311    /usr/lib/i386-linux-gnu/libXxf86vm.so.1.0.0
006b7000-006b8000 rw-p 00004000 08:07 1575311    /usr/lib/i386-linux-gnu/libXxf86vm.so.1.0.0
006b8000-006ff000 r-xp 00000000 08:07 786514     /lib/i386-linux-gnu/libdbus-1.so.3.5.8
006ff000-00700000 r--p 00046000 08:07 786514     /lib/i386-linux-gnu/libdbus-1.so.3.5.8
00700000-00701000 rw-p 00047000 08:07 786514     /lib/i386-linux-gnu/libdbus-1.so.3.5.8
00701000-0074d000 r-xp 00000000 08:07 1574947    /usr/lib/i386-linux-gnu/libFLAC.so.8.2.0
0074d000-0074e000 r--p 0004b000 08:07 1574947    /usr/lib/i386-linux-gnu/libFLAC.so.8.2.0
0074e000-0074f000 rw-p 0004c000 08:07 1574947    /usr/lib/i386-linux-gnu/libFLAC.so.8.2.0
00758000-0075a000 r-xp 00000000 08:07 1574727    /usr/lib/i386-linux-gnu/libXau.so.6.0.0
0075a000-0075b000 r--p 00001000 08:07 1574727    /usr/lib/i386-linux-gnu/libXau.so.6.0.0
0075b000-0075c000 rw-p 00002000 08:07 1574727    /usr/lib/i386-linux-gnu/libXau.so.6.0.0
0076a000-00771000 r-xp 00000000 08:07 1605337    /usr/lib/fglrx/libatiuki.so.1.0
00771000-00772000 rw-p 00006000 08:07 1605337    /usr/lib/fglrx/libatiuki.so.1.0
0079b000-007a6000 r-xp 00000000 08:07 799916     /lib/i386-linux-gnu/libnss_files-2.15.so
007a6000-007a7000 r--p 0000a000 08:07 799916     /lib/i386-linux-gnu/libnss_files-2.15.so
007a7000-007a8000 rw-p 0000b000 08:07 799916     /lib/i386-linux-gnu/libnss_files-2.15.so
007a8000-00814000 r-xp 00000000 08:07 1574961    /usr/lib/i386-linux-gnu/libsndfile.so.1.0.25
00814000-00815000 r--p 0006c000 08:07 1574961    /usr/lib/i386-linux-gnu/libsndfile.so.1.0.25
00815000-00816000 rw-p 0006d000 08:07 1574961    /usr/lib/i386-linux-gnu/libsndfile.so.1.0.25
00816000-0081a000 rw-p 00000000 00:00 0 
0081a000-00843000 r-xp 00000000 08:07 1574959    /usr/lib/i386-linux-gnu/libvorbis.so.0.4.5
00843000-00844000 r--p 00028000 08:07 1574959    /usr/lib/i386-linux-gnu/libvorbis.so.0.4.5
00844000-00845000 rw-p 00029000 08:07 1574959    /usr/lib/i386-linux-gnu/libvorbis.so.0.4.5
008cd000-008d3000 r-xp 00000000 08:07 1578257    /usr/lib/i386-linux-gnu/libjson.so.0.0.1
008d3000-008d4000 r--p 00005000 08:07 1578257    /usr/lib/i386-linux-gnu/libjson.so.0.0.1
008d4000-008d5000 rw-p 00006000 08:07 1578257    /usr/lib/i386-linux-gnu/libjson.so.0.0.1
008e3000-008e6000 r-xp 00000000 08:07 799810     /lib/i386-linux-gnu/libdl-2.15.so
008e6000-008e7000 r--p 00002000 08:07 799810     /lib/i386-linux-gnu/libdl-2.15.so
008e7000-008e8000 rw-p 00003000 08:07 799810     /lib/i386-linux-gnu/libdl-2.15.so
00936000-0093b000 r-xp 00000000 08:07 1578134    /usr/lib/i386-linux-gnu/libasyncns.so.0.3.1
0093b000-0093c000 r--p 00004000 08:07 1578134    /usr/lib/i386-linux-gnu/libasyncns.so.0.3.1
0093c000-0093d000 rw-p 00005000 08:07 1578134    /usr/lib/i386-linux-gnu/libasyncns.so.0.3.1
009c2000-009d1000 r-xp 00000000 08:07 1573024    /usr/lib/i386-linux-gnu/libglapi.so.0.0.0
009d1000-009d3000 r--p 0000f000 08:07 1573024    /usr/lib/i386-linux-gnu/libglapi.so.0.0.0
009d3000-009d8000 rwxp 00011000 08:07 1573024    /usr/lib/i386-linux-gnu/libglapi.so.0.0.0
009d8000-009f8000 r-xp 00000000 08:07 786492     /lib/i386-linux-gnu/ld-2.15.so
009f8000-009f9000 r--p 0001f000 08:07 786492     /lib/i386-linux-gnu/ld-2.15.so
009f9000-009fa000 rw-p 00020000 08:07 786492     /lib/i386-linux-gnu/ld-2.15.so
00a52000-00a8a000 r-xp 00000000 08:07 7097122    /workspace/android/packages/android-sdk-linux/tools/lib/libGLES_V2_translator.so
00a8a000-00a8b000 rw-p 00038000 08:07 7097122    /workspace/android/packages/android-sdk-linux/tools/lib/libGLES_V2_translator.so
00a8f000-00aab000 r-xp 00000000 08:07 787364     /lib/i386-linux-gnu/libgcc_s.so.1
00aab000-00aac000 r--p 0001b000 08:07 787364     /lib/i386-linux-gnu/libgcc_s.so.1
00aac000-00aad000 rw-p 0001c000 08:07 787364     /lib/i386-linux-gnu/libgcc_s.so.1
00b44000-00b4d000 r-xp 00000000 08:07 1578104    /usr/lib/i386-linux-gnu/libXcursor.so.1.0.2
00b4d000-00b4e000 r--p 00008000 08:07 1578104    /usr/lib/i386-linux-gnu/libXcursor.so.1.0.2
00b4e000-00b4f000 rw-p 00009000 08:07 1578104    /usr/lib/i386-linux-gnu/libXcursor.so.1.0.2
00b63000-00b68000 r-xp 00000000 08:07 1575107    /usr/lib/i386-linux-gnu/libXdmcp.so.6.0.0
00b68000-00b69000 r--p 00004000 08:07 1575107    /usr/lib/i386-linux-gnu/libXdmcp.so.6.0.0
00b69000-00b6a000 rw-p 00005000 08:07 1575107    /usr/lib/i386-linux-gnu/libXdmcp.so.6.0.0
00b6e000-00b98000 r-xp 00000000 08:07 799836     /lib/i386-linux-gnu/libm-2.15.so
00b98000-00b99000 r--p 00029000 08:07 799836     /lib/i386-linux-gnu/libm-2.15.so
00b99000-00b9a000 rw-p 0002a000 08:07 799836     /lib/i386-linux-gnu/libm-2.15.so
00bb4000-00bf7000 r-xp 00000000 08:07 7097086    /workspace/android/packages/android-sdk-linux/tools/lib/libOpenglRender.so
00bf7000-00bfa000 rw-p 00043000 08:07 7097086    /workspace/android/packages/android-sdk-linux/tools/lib/libOpenglRender.so
00cc3000-00cc5000 r-xp 00000000 08:07 800571     /lib/i386-linux-gnu/libutil-2.15.so
00cc5000-00cc6000 r--p 00001000 08:07 800571     /lib/i386-linux-gnu/libutil-2.15.so
00cc6000-00cc7000 rw-p 00002000 08:07 800571     /lib/i386-linux-gnu/libutil-2.15.so
00d16000-00de2000 r-xp 00000000 08:07 1605343    /usr/lib/fglrx/libGL.so.1.2
00de2000-00dee000 rwxp 000cb000 08:07 1605343    /usr/lib/fglrx/libGL.so.1.2
00dee000-00e03000 rwxp 00000000 00:00 0 
00e11000-00ee9000 r-xp 00000000 08:07 1577340    /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16
00ee9000-00eea000 ---p 000d8000 08:07 1577340    /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16
00eea000-00eee000 r--p 000d8000 08:07 1577340    /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16
00eee000-00eef000 rw-p 000dc000 08:07 1577340    /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16
00eef000-00ef6000 rw-p 00000000 00:00 0 
00f1c000-00f32000 r-xp 00000000 08:07 799861     /lib/i386-linux-gnu/libnsl-2.15.so
00f32000-00f33000 r--p 00015000 08:07 799861     /lib/i386-linux-gnu/libnsl-2.15.so
00f33000-00f34000 rw-p 00016000 08:07 799861     /lib/i386-linux-gnu/libnsl-2.15.so
00f34000-00f36000 rw-p 00000000 00:00 0 
00f5b000-00f5c000 r-xp 00000000 00:00 0          [vdso]
00f5c000-032d4000 r-xp 00000000 08:07 1605327    /usr/lib/fglrx/dri/fglrx_dri.so
032d4000-033c5000 rw-p 02378000 08:07 1605327    /usr/lib/fglrx/dri/fglrx_dri.so
033c5000-03493000 rw-p 00000000 00:00 0 
03493000-035f9000 r-xp 00000000 08:07 1574949    /usr/lib/i386-linux-gnu/libvorbisenc.so.2.0.8
035f9000-0360a000 r--p 00165000 08:07 1574949    /usr/lib/i386-linux-gnu/libvorbisenc.so.2.0.8
0360a000-0360b000 rw-p 00176000 08:07 1574949    /usr/lib/i386-linux-gnu/libvorbisenc.so.2.0.8
08048000-082d6000 r-xp 00000000 08:07 6842098    /workspace/android/packages/android-sdk-linux/tools/emulator-x86
082d6000-082da000 rw-p 0028e000 08:07 6842098    /workspace/android/packages/android-sdk-linux/tools/emulator-x86
082da000-084cf000 rw-p 00000000 00:00 0 
084cf000-084d1000 rwxp 00000000 00:00 0 
084d1000-0850f000 rw-p 00000000 00:00 0 
09ad0000-0a390000 rw-p 00000000 00:00 0          [heap]
79ce5000-7dce6000 r--s 00000000 00:12 22073      /run/shm/pulse-shm-2201308209
7dce6000-7dfff000 rw-s 00000000 00:04 23265286   /SYSV00000000 (deleted)
7dfff000-7e000000 ---p 00000000 00:00 0 
7e000000-7e800000 rw-p 00000000 00:00 0 
7e800000-7e821000 rw-p 00000000 00:00 0 
7e821000-7e900000 ---p 00000000 00:00 0 
7e9b9000-7e9ba000 ---p 00000000 00:00 0 
7e9ba000-7f1ba000 rw-p 00000000 00:00 0 
7f1ba000-831bb000 rw-s 00000000 00:12 320015     /run/shm/pulse-shm-3217607746
831bb000-831bc000 ---p 00000000 00:00 0 
831bc000-839bc000 rw-p 00000000 00:00 0 
839bc000-839c3000 r--s 00000000 08:07 1599665    /usr/lib/i386-linux-gnu/gconv/gconv-modules.cache
839c3000-879c4000 rw-s 00000000 00:12 320824     /run/shm/pulse-shm-3368864694Aborted (core dumped) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:42:02.703

谢谢何塞-罗德里格斯

链接以回答解决了我的问题：

[有没有人看到或知道此错误消息的原因？Android 模拟器无法启动](https://stackoverflow.com/questions/12850006/has-anyone-seen-or-know-the-cause-of-this-error-message-the-android-emulator-wi)

# ruby - 在 rails 中动态添加表单（非嵌套）

> ID：12766064
> 
> 赞同：0
> 
> 时间：2012-10-07T04:13:29.580
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.2

请问有人可以解释我如何在rails中动态添加表单的另一个副本吗？...已经为此工作了将近2个小时。我在 jquery 中弄乱了 .clone() 和 .appendTo ，但它没有用。此外，我在网上找到的大多数材料（如 railscast #196 和 stackoverflow）都主要集中在嵌套表单上。我的表单是嵌套的，但我实际上只是想再次添加父表单。嵌套的照片使用 html 多个属性，所以我猜这将处理每个父表单的多个文件上传（顺便说一句，我使用的是回形针）。

如果我只需要修改 railscast 代码，请告诉我。

谢谢。

```
<%= form_for(@user_book, html: { multipart: true }) do |f| %>
<% if @user_book.errors.any? %>
<div id="error_explanation">
  <h2><%= pluralize(@user_book.errors.count, "error") %> prohibited this user_book from been saved:</h2>
  <ul>
  <% @user_book.errors.full_messages.each do |msg| %>
    <li><%= msg %></li>
    <p>hello</p>
  <% end %>
  </ul>
</div>
<% end %>

<%= f.text_field :title, placeholder: "enter title...", id: "book_title" %>
<%= f.text_field :category, placeholder: "enter category..." %>
<%=  file_field_tag 'user_book[user_book_photos_attributes][][photo]', :multiple => true         do |p| %>
   <%= p.file_field :photo %> 
<% end %>

<div class="actions">
<%= f.submit %>
</div>
<% end %> 
```

# jquery - 如果为空则隐藏 p 元素

> ID：12766066
> 
> 赞同：0
> 
> 时间：2012-10-07T04:14:33.327
> 
> 标签：jquery, hidden

如果 p 元素为空，我想使用 jQuery 隐藏 .last_edit 类的 ap 元素。例子

```
<p class="last_edit"></p>

<p class="last_edit">This would be displayed since there is text in it</p> 
```

有谁知道怎么做

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-30T12:57:45.063

或者你可以像这样用 CSS 隐藏它：

```
.last_edit:empty {display:none;} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T04:15:59.090

有很多方法

```
$(".last_edit:empty").hide(); 
```

或者

```
$(".last_edit").each(function() {

    if($.trim($(this).html()).length > 0) {
       $(this).hide();
    }

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T04:15:44.240

您可以使用`:empty`选择器：

```
$('p.last_edit:empty').hide(); 
```

或`filter`方法：

```
$('p.last_edit').filter(function(){
     return $.trim($(this).text()) === ''
}).hide() 
```

# c# - 如何用 Thread 移动 PictureBox？

> ID：12766068
> 
> 赞同：3
> 
> 时间：2012-10-07T04:15:35.147
> 
> 标签：c#, multithreading, picturebox

我正在学习 C# 中的线程，所以我的第一个程序将是 2 个会移动的图像。但问题是当我尝试在线程中执行新点时出现错误：

这是我的代码：

```
namespace TADP___11___EjercicioHilosDatos
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        int x = 0;
        int y = 0;

        private void Form1_Load(object sender, EventArgs e)
        {
            Thread Proceso1 = new Thread(new ThreadStart(Hilo1));
            Proceso1.Start();
        }

        public void Hilo1()
        {   
            while (true) 
            {
                x = pictureBox1.Location.X - 1;
                y = pictureBox1.Location.Y;
                pictureBox1.Location = new Point(x, y);
            }   
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T04:36:31.083

您只能从创建控件的线程更新控件。控件确实有一个`Invoke`可以从另一个线程调用的方法。此方法接受一个委托，该委托指定您希望在控件线程上执行的工作：

```
var updateAction = new Action(() => { pictureBox1.Location = new Point(x,y); });
pictureBox1.Invoke(updateAction); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T04:45:39.517

你必须[调用](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invoke.aspx)它。由于 [明显] 原因，您无法访问由不同线程创建的控件，因此您必须使用委托。几个类似的SO问题：

1.  [如何从 C# 中的另一个线程更新 GUI？](https://stackoverflow.com/q/661561/938695)（**111 票**）
2.  [使用两个线程写入文本框](https://stackoverflow.com/q/812595/938695)
3.  [如何从 C# 中的另一个线程更新 GUI 上的文本框](https://stackoverflow.com/q/1136399/938695)
4.  [从另一个线程写入文本框？](https://stackoverflow.com/q/519233/938695)

如果您查看第一个链接，Ian 的出色答案将演示您应该如何在 .Net 2.0 和 3.0 中执行此操作。或者您可以向下滚动到下一个答案 Marc's，它将向您展示如何以*最简单*的方式进行操作。

**代码：**

```
//worker thread
Point newPoint = new Point(someX, someY);
this.Invoke((MethodInvoker)delegate {
pictureBox1.Location = newPoint;
// runs on UI thread
}); 
```

# iphone - UIPickerView 不显示

> ID：12766071
> 
> 赞同：0
> 
> 时间：2012-10-07T04:15:57.157
> 
> 标签：iphone, uiimage, ios6, uipickerview

当我运行应用程序时，我有一个`UIPickerView`不会显示的，因为我以编程方式创建它并且我使用 a`UIImage`作为应用程序的背景。我怎样才能让它出现？我努力了

```
 [super.view sendSubviewToFront...]; 
```

它仍然没有出现。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T06:01:11.620

我现在没有我的 Mac 仪式，但我会给你基本的想法。你真正应该做的是在分配 image 和 pickerview 之后；先`addSubView`上`UIImage`上`self.View`然后`addSubView`上`UIPickerView`上之`UIImage`类

```
[self.View addSubView:image];
[image addSubView:pickerView]; 
```

有任何疑问请告诉我。谢谢 。

# javascript - 需要 Javascript 调整中的 EBAY 幻灯片

> ID：12766073
> 
> 赞同：1
> 
> 时间：2012-10-07T04:16:00.090
> 
> 标签：javascript

我一直在寻找适用于 Ebay 的幻灯片脚本，发现[http://xlo.co/blog/web-development/javascript-image-fade?quip_thread=blog-post-19&quip_parent=76](http://xlo.co/blog/web-development/javascript-image-fade?quip_thread=blog-post-19&quip_parent=76)这个似乎有效好的。我想在幻灯片中添加第三张图片，这就是事情开始向南发展的时候。以下是我从原始页面更改以添加第三张图像的代码。

我已经把我插入的任何代码放在旁边。它可以工作，但是，转换在第一张图像之后停止工作。如果有人可以提供帮助，将不胜感激。

```
<div id="test">alpha</div>
<div id="slides" style="display: none;">
<div id="slide0" style="background-image: url('/ebay/images/image1.jpg'); width: 670px; height: 240px;">Content0</div>
<div id="slide1" style="background-image: url('/ebay/images/image1.jpg'); width: 670px; height: 240px;">Content1</div>
<!--ADDITION --><div id="slide2" style="background-image: url('/ebay/images/image1.jpg'); width: 670px; height: 240px;">Content2</div>
</div>

<div id="transition" style="width: 670px; height: 240px;">
<!--ADDITION --><div id="imageholder2" style="position: absolute;"></div>
<div id="imageholder1" style="position: absolute;"></div>
<div id="imageholder0" style="position: absolute;"></div>
<!--first last to avoid messing with z-indices-->
</div>
<!-- SCRIPT FUNCTION -->
<script type="text/javascript">
// <![CDATA[
//image transition
var interval = 3000;
var fadeTime = 10;
var currentImage;
var alpha = 100;
var images = new Array();
images[0]=document.getElementById('slide0');
images[1]=document.getElementById('slide1');
<!--ADDITION -->images[2]=document.getElementById('slide2');
var image0Holder = document.getElementById('imageholder0');;
var image1Holder = document.getElementById('imageholder1');;
<!--ADDITION -->var image2Holder = document.getElementById('imageholder2');;
var currentImageHolder = image0Holder;
var currentImage = 0;

var testId = document.getElementById('test');
image0Holder.appendChild(images[0]);
image1Holder.appendChild(images[1]);
<!--ADDITION -->image2Holder.appendChild(images[2]);

    function transition() {
            function fade() {   
                    if (alpha > 0) {
            alpha = alpha - 1;    
            document.getElementById('test').innerHTML = alpha;
            currentImageHolder.style.opacity = (alpha/100);
            currentImageHolder.style.MozOpacity = currentImageHolder.style.opacity;
            currentImageHolder.style.filter = 'alpha(opacity='+alpha+')';
                    }
                    else {
                        clearInterval(timer0);
                        document.getElementById('test').innerHTML = "xx";
                        if (currentImage == image0Holder) {                
                            image0Holder.style.zIndex = 0;
                            image1Holder.style.zIndex = 1;
                            <!--ADDITION -->image2Holder.style.zIndex = 2;
                            alpha = 100;
              currentImageHolder.style.opacity = (alpha/100);
              currentImageHolder.style.MozOpacity = currentImageHolder.style.opacity;
              currentImageHolder.style.filter = 'alpha(opacity='+alpha+')';                                                            
                            currentImageHolder = image1Holder;
                            image0Holder.removeChild(image0Holder.lastChild);
                            image0Holder.appendChild(images[currentImage]);                    
                        }                   
                        else {
                            image0Holder.style.zIndex = 2;
                            image1Holder.style.zIndex = 1; 
                            <!--ADDITION -->image2Holder.style.zIndex = 0;   
                            alpha = 100;
              currentImageHolder.style.opacity = (alpha/100);
              currentImageHolder.style.MozOpacity = currentImageHolder.style.opacity;
              currentImageHolder.style.filter = 'alpha(opacity='+alpha+')';
              currentImageHolder = image0Holder;
                            image1Holder.removeChild(image1Holder.lastChild);
                            image1Holder.appendChild(images[currentImage]);                            

                        }
                        currentImage = (currentImage+1)%images.length;
            timer1 = setTimeout(transition, interval);                        
                    }
            }
      timer0 = setInterval(fade, 20);
        }  
    timer1 = setTimeout(transition, interval);
// ]]>
</script> 
```

# python-3.x - Python - 使用 forloop 或 while 循环查找列表中的最大数字

> ID：12766077
> 
> 赞同：2
> 
> 时间：2012-10-07T04:16:26.257
> 
> 标签：python-3.x

基本上我们得到了一个数字列表，我们被要求编写一个算法来找到列表中的最大数字，注意：数字不按顺序排列，可能包含小数和负数。这必须使用 python 3.2.3 中的循环语句来完成谢谢。

```
alist=[3,10,90,5,-2,4,18,45,100,1,6]
largest=int()
for large in alist:
    if large >= large+1:
       largest=large
print(largest) 
```

编辑它的作品！谢谢！

```
alist=[-45,0,3,10,90,5,-2,4,18,45,100,1,-266,706]
largest=alist[0]
for large in alist:
    if large > largest:
        largest=large
print(largest) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T20:47:06.387

还有一个名为 max 的内置函数......就像一个魅力

# python - 如何正确测试基于 SQLAlchemy 声明式的 Python Flask 系统

> ID：12766078
> 
> 赞同：4
> 
> 时间：2012-10-07T04:16:26.253
> 
> 标签：python, unit-testing, sqlalchemy, flask, flask-sqlalchemy

我有一个项目我已经做了一段时间了，它是用 Flask 编写的，并使用带有声明性扩展的 SQLAlchemy [http://flask.pocoo.org/docs/patterns/sqlalchemy/](http://flask.pocoo.org/docs/patterns/sqlalchemy/)。我最近决定开始对我的项目进行单元测试，但是对于我的生活，我似乎无法弄清楚如何让它工作。

我查看了[http://flask.pocoo.org/docs/testing/](http://flask.pocoo.org/docs/testing/)，但我似乎无法让它工作。

我尝试了来自不同网站的各种东西，但找不到可以正常工作的东西。

```
class StopsTestCase(unittest.TestCase):

    def setUp(self):
        self.engine = create_engine('sqlite:///:memory:')
        self.session = scoped_session(sessionmaker(autocommit=False,
                                         autoflush=False,
                                         bind=self.engine))
        models.Base = declarative_base()
        models.Base.query = self.session.query_property()

        models.Base.metadata.create_all(bind=self.engine)

    def test_empty_db(self):
        stops = session.query(models.Stop).all()
        assert len(stops) == 0

    def tearDown(self):
        session.remove()

if __name__ == '__main__':
    unittest.main() 
```

不幸的是，我似乎能得到的最好结果会导致以下错误。

```
OperationalError: (OperationalError) no such table: stops u'SELECT stops.agency_id AS stops_agency_id, stops.id AS stops_id, stops.name AS stops_name, stops."desc" AS stops_desc, stops.lat AS stops_lat, stops.lon AS stops_lon, stops.zone_id AS stops_zone_id \nFROM stops' ()

----------------------------------------------------------------------
Ran 1 test in 0.025s

FAILED (errors=1) 
```

对此的任何帮助将不胜感激。如果有人以前经历过这种情况并使它起作用，我想要一些指示！提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-31T17:49:12.377

根据我发现的内容以及我的工作方式，这是一个模板解决方案，可用于使用声明性扩展测试底层 SQLAlchemy 系统。**

```
import unittest
from database import Base
from sqlalchemy import create_engine
from sqlalchemy.orm import scoped_session, sessionmaker

import models

class StopsTestCase(unittest.TestCase):

    def setUp(self):
        self.engine = create_engine('sqlite:///:memory:')
        self.session = scoped_session(sessionmaker(autocommit=False,
                                         autoflush=False,
                                         bind=self.engine))
        Base.query = self.session.query_property()

        Base.metadata.create_all(bind=self.engine)

        #Create objects here
        #These will likely involve something like the following for one of my stops

        # stop1 = models.Stop(id=1, name="Stop 1")
        # self.session.add(stop1)
        # self.session.commit()

        # But adding a stop to the database here will break the test below. Just saying.

    def test_empty_db(self):
        stops = self.session.query(models.Stop).all()
        assert len(stops) == 0

    def tearDown(self):
        self.session.remove() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T08:54:37.563

您`declarative_base`再次实例化，您应该使用与模型基类相同的实例。此外，您似乎正在使用两个不同的`session`实例`self.session`和一些 module-global `session`。也试着清理一下。

# asp.net-mvc - MVC音乐商店商店控制器中的分页

> ID：12766083
> 
> 赞同：0
> 
> 时间：2012-10-07T04:17:15.923
> 
> 标签：asp.net-mvc, pagination

我有大量的产品，如果我真的不应用分页，浏览页面将是挤满数据的方式。

所以我正在寻找一种在 storecontroller 中的浏览操作中应用分页的方法。

我尝试过这样的事情，但它甚至都行不通

```
public ActionResult Browse(string genre, int? page) {
    const int pageSize = 10;
    // Retrieve Genre and its Associated Albums from database
    var genreModel = storeDB.Genres.Include("Albums").Single(g => g.Name == genre);

    var paginatedoutput = genreModel.Skip((page ?? 0) * pageSize).Take(pageSize).ToList();

    return View(paginatedoutput);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:11:31.743

我不会在控制器中对其进行分页。我会在客户端使用[JQuery Databases](http://datatables.net)之类的东西。这样您的应用程序响应速度更快。内置搜索和排序等有用功能。只需将其应用于标准表即可。通常，您的代码将变得更简单，因为您的控制器不会因分页逻辑等而变得混乱。

```
 $(document).ready(function() {
    $('.standard-grid').dataTable();
} ); 
```

给任何你想要的类标准网格表，它现在将是一个样式化的数据表。您还可以在其上启用搜索和排序。

如果您有大量数据，您可以通过 Ajax 请求填充

# java - ANT 创建 jar 文件时出现 getResource + 编码问题

> ID：12766085
> 
> 赞同：0
> 
> 时间：2012-10-07T04:18:39.563
> 
> 标签：java, ant, encoding, build, jar

我正在创建我的 build.xml 文件来用 ant 构建我的 jar。

除了将外部资源作为图像加载之外，一切都很完美。

我想做的就是了解如何以正确的方式创建 jar。实际上我的代码是：

我知道问题出在包含以下内容的每一行： this.getClass().getResource("/img/logo150.png") （我对此很担心，因为我通过日志记录和调试单独测试了每一行，问题出在那）

但我不明白为什么。我尝试了数百种可能性，罐子的许多不同设置，我在 stackoverflow 中尝试了许多不同的答案，但没有解决方案奏效。

我正在使用eclipse，文件夹结构是：

```
src -> source code
res -> img -> images
res -> config.files.txt
db -> database files
lib -> libs 
```

有什么想法吗？如果我运行项目，代码可以完美运行，但是当我运行 ant 构建（运行方式）时它不起作用。

编辑：哦，是的，我终于可以发布代码了！

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="Garby Gestore Clienti" default="try_jar" basedir=".">
    <description>
    This buildfile is used to build the jar of the program.
    </description>

    <!-- ================== Property Definitions ===================== -->
    <property file="${user.home}/Garby.properties" />
    <property file="${user.home}/.Garby.properties" />
    <property file="${basedir}/Garby.properties" />

    <!-- ================= File and Directory Names ==================== -->
    <property name="src" location="${basedir}/src" />
    <property name="build" location="${basedir}/build" />
    <property name="dist" location="${basedir}/dist" />
    <property name="app.name" value="Garby" />
    <property name="dist.jarHome" value="${user.home}/Garby" />
    <property name="app.version" value="1.0" />
    <tstamp />
    <property name="jar.name" value="${app.name}_${app.version}.${DSTAMP}.jar" />
    <property name="jar.completePath" value="${dist.jarHome}/${jar.name}" />

    <!-- Here you must specify the directory in which jar files needed by this plugin to run are stored  -->

    <property name="shared.lib" value="${basedir}/lib" />

    <!-- =============== Custom Ant Task Definitions =================== -->
    <property name="compile.debug" value="true" />
    <property name="compile.deprecation" value="false" />
    <property name="compile.optimize" value="true" />

    <!-- ================== External Dependencies ======================= -->
    <property name="Database" value="hsqldb.jar" />

    <!-- ================== Compilation Classpath ======================= -->

    <path id="compile.classpath">
        <!--<pathelement location="${src.home}"/>-->
        <fileset dir="${src}">
            <include name="**/*.java" />
        </fileset>
        <fileset dir="${shared.lib}">
            <include name="**/*.jar" />
        </fileset>
    </path>

    <!-- =================== All Target ================================ -->

    <!-- ================== Try_jar Target ============================ -->
    <target name="try_jar" depends="compile, dist, signjar, clean_class_files, run" description="Clean build and dist directories, then compile, create and sign jar and finally run Core.jar" />

    <!-- ================== Clean Target ============================== -->

    <target name="clean" description="Delete old build and dist directories">
        <delete dir="${build}" />
        <delete dir="${dist}" />
    </target>

    <!-- ================== Prepare Target ============================= -->

    <target name="prepare" depends="clean">
        <mkdir dir="${build}" />
        <mkdir dir="${build}/classes" />
        <mkdir dir="${build}/lib" />
        <copy todir="${build}/lib">
            <fileset dir="${shared.lib}" includes="${Database}" />
        </copy>
    </target>

    <!-- ================== Compile Target =========================== -->

    <target name="compile" depends="prepare" description="Compile Java sources">

        <mkdir dir="${build}/classes" />
        <javac srcdir="${src}" destdir="${build}/classes" encoding="8859_1" debug="${compile.debug}" deprecation="${compile.deprecation}" optimize="${compile.optimize}" source="1.7" target="1.7">
            <classpath refid="compile.classpath" />
        </javac>
    </target>

    <!-- =================== Dist Target ================================ -->
    <target name="dist" description="Creates Jar archive">
        <!-- Create the time stamp -->
        <tstamp>
            <format property="compile.timestamp" pattern="yyyyMMddHHmm" />
        </tstamp>
        <!-- update core version in manifest -->
        <replaceregexp file="${basedir}/manifest" match="Implementation-Version: .*" replace="Implementation-Version: ${app.version}.${compile.timestamp}" />
        <!-- Create Jar file -->
        <jar destfile="${jar.completePath}" manifest="${basedir}/manifest">
            <fileset dir="${build}/classes" excludes="**/*.bak" />
            <fileset dir="${basedir}/bin"/>
            <zipfileset src="${shared.lib}/${Database}" />
        </jar>

        <copy todir="${dist.jarHome}/db">
            <fileset dir="${basedir}/db" includes="**" />
        </copy>
        <copy todir="${dist.jarHome}/res">
            <fileset dir="${basedir}/res" includes="**" />
        </copy>

    </target>

    <!-- ================== SignJar Target ============================ -->
    <target name="signjar" description="Signs jar with keystore taken from your shared.lib folder">
        <!--<signjar jar="${jar.completePath}" keystore="${shared.lib}/paripari.jks" alias="irc" storepass="${keystore.password}" keypass="${private.password}"/>-->
    </target>

    <!-- ================== Javadoc Target ============================ -->

    <target name="javadoc" depends="compile" description="Create Javadoc API documentation">

        <mkdir dir="${dist}/docs/api" />
        <javadoc sourcepath="${src}" destdir="${dist}/docs/api" packagenames="*">
            <classpath refid="compile.classpath" />
        </javadoc>

    </target>

    <!-- ================== RmBak Target ============================= -->

    <target name="rmbak" description="Delete *.bak files everywhere">

        <delete>
            <fileset dir="${docs}" includes="**/*.bak" />
            <fileset dir="${src}" includes="**/*.bak" />
        </delete>

    </target>

    <!-- ================== RmLog Target ============================= -->

    <target name="rmlog" description="Delete *.log files from build directory">

        <delete>
            <fileset dir="${build.home}" includes="**/*.log*" />
        </delete>

    </target>
    <!-- =================== Delete .class Target===================== -->
    <target name="clean_class_files" description="Delete .class files stored inside build directory and dist folder">
        <delete dir="${build}" />
        <delete dir="${dist}" />
    </target>

    <!-- ================== Run Target =============================== -->
    <target name="run" description="Run Garby">
        <java jar="${jar.completePath}" fork="true">
        </java>
    </target>

</project> 
```

第二个问题：

```
encoding= 8859_1 
```

这行不是我写的。但我的编码有问题（在罐子里我看不到欧元符号）我应该设置什么价值之王？

第三

java项目（也在eclipse中）是否有任何“正确”或“标准”文件夹结构，或者我的项目进展顺利？（还有许多不同的路径）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:35:16.270

使用这样的东西：

```
<copy todir="${yourJarFolder}/folder">
    <fileset dir="${basedir}/folder" includes="**" />
</copy> 
```

此代码将您在工作区中的文件夹直接复制到 jar 的文件夹中，而不是在 jar 中，而是在同一个文件夹中。

之后，您可以使用不使用 getResource() 的标准方法访问任何资源。

希望它对你有用。

# xcode - 在 Mac OS X 上打开 CV，图像加载问题

> ID：12766091
> 
> 赞同：2
> 
> 时间：2012-10-07T04:21:21.897
> 
> 标签：xcode, macos, opencv, macports

我认为我的问题很基本。我试图让 Open CV 安装在我的 OSX Lion 上。我已按照此链接[http://tilomitra.com/opencv-on-mac-osx/上推荐的所有步骤进行操作](http://tilomitra.com/opencv-on-mac-osx/)

但是，当我在 Xcode 中运行网站上推荐的 C++ 代码时，它无法使用 cvLoadImage( ) 函数加载图像。我已将我的图像放在项目文件夹中（如推荐的那样）。这是我正在运行的代码：

```
// Example showing how to read and write images
#include <opencv2/opencv.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv/cvaux.hpp>

int main(int argc, char** argv)
{
IplImage * pInpImg = 0;

// Load an image from file - change this based on your image name
pInpImg = cvLoadImage("my_image.jpg", CV_LOAD_IMAGE_UNCHANGED);
if(!pInpImg)
{
 fprintf(stderr, "failed to load input image\n");
 return -1;
}

// Write the image to a file with a different name,
// using a different image format -- .png instead of .jpg
if( !cvSaveImage("my_image_copy.png", pInpImg) )
{
 fprintf(stderr, "failed to write image file\n");
}

// Remember to free image memory after using it!
cvReleaseImage(&pInpImg);

return 0;
} 
```

因此，在执行过程中，代码构建成功，但总是在以下循环中结束并停止执行：

```
 if(!pInpImg)
{
 fprintf(stderr, "failed to load input image\n");
 return -1;
} 
```

有没有人遇到过这样的问题？我怎么能解决这个问题？

（在安装“Macports”和“Cmake”期间，我收到一条警告说 Xcode 未安装或在没有“命令行工具”的情况下安装。但根据该论坛上的另一个帖子，我已从 Xcode- ->Preferences-->Downloads 安装 Xcode 的文件夹。但是，在安装过程中，“Macports”和“Cmake”给了我警告，但还是安装了。但这可能是问题吗？）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T05:38:14.283

问题是您将图像放入项目文件夹而不是包含可执行文件的文件夹。您可以将图像文件放在包含可执行文件的文件夹中，也可以将图像的完整路径放在对`cvLoadImage`.

旧版本的 Xcode 将可执行文件放在项目文件夹中的`build/Debug`或文件夹中。`build/Release`较新版本的 Xcode 将构建产品放在 DerivedData 文件夹中的项目文件夹中。您可以通过转到 File -> Project Settings... 并单击文件夹路径旁边的箭头来找到 DerivedData 文件夹：

![派生数据截图](../Images/857f7fdbb4b9d655dfddbc411bd588f7.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T06:13:33.230

在项目文件夹中，转到“产品”> 右键单击​​可执行文件>“在 Finder 中显示”> 将输入图像放在那里。输出图像（'.png' 文件）也会放在这里。

# javascript - 在网页上使用自定义字体的最新技术/最佳实践？

> ID：12766095
> 
> 赞同：7
> 
> 时间：2012-10-07T04:22:02.477
> 
> 标签：javascript, html, css, fonts

我上一次建立网站是在 2007 年，使用自定义字体是一件非常丑陋的事情。那时，大多数人使用一些生成图像的 Flash 小程序或 PHP 脚本。

好吧，现在是 2012 年，我相信人们现在正在使用其他技术。我在网上找到了很多不同的东西，从“Google web fonts”到“CSS3 font-face”——但我不确定最好的方法是什么。

那么告诉我，使用自定义字体时最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T05:09:49.793

“......您可以在 Typekit 等高级服务上找到的字体的质量和种类比您免费获得的字体要好得多，但如果它们不在预算之内，那么 Google Web Fonts 绝对是您的最佳选择最好的选择……Google Web Fonts 是一种完全免费且超级简单的方法，可以以适当许可和广泛支持的方式在您的网站上实现非标准字体。”

-- 摘自[Joshua Johnson 撰写的“使用 Google Web 字体的初学者指南”](http://designshack.net/articles/css/a-beginners-guide-to-using-google-web-fonts/) ，于 2012 年 8 月 1日出版。

# javascript - 在 cookie 中存储带有特殊字符的 javascript 数组

> ID：12766097
> 
> 赞同：0
> 
> 时间：2012-10-07T04:22:10.910
> 
> 标签：javascript, jquery, arrays

我搜索了stackoverflow，发现cookie只能存储字符串而不是数组。

我有一个这样的数组：

```
 var myvar = {
   'comment' : '123',
   'blog' : 'blog',
   'test' : '321
  } 
```

然后我使用这个 jquery 插件来管理 cookie： [https ://github.com/carhartl/jquery-cookie/blob/master/jquery.cookie.js](https://github.com/carhartl/jquery-cookie/blob/master/jquery.cookie.js)

我使用下面的代码来存储名为“设置”的 cookie：

```
 $.cookie('setting',  myvar , { expires: 1, path: '/' }); 
```

但是如何将该数组转换为字符串，我知道我可以使用 .join，但是如果我的数组值（例如注释）是特殊字符（如汉字等）怎么办？

以及如何再次访问 cookie 并取出字符串并将其再次转换为数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T04:34:54.020

将对象存储在 cookie 中：

```
var myvar = {
   'comment' : '123',
   'blog' : 'blog',
   'test' : '321'
};

var serialized = JSON.stringify(myvar);

$.cookie('setting', serialized, { expires: 1, path: '/' }); 
```

从 cookie 中检索对象：

```
JSON.parse($.cookie("setting")); 
```

有关 JSON.stringify 和 JSON.parse 的示例，请参阅[此答案](https://stackoverflow.com/questions/191881/serializing-to-json-in-jquery)。

# c# - Neo4jClient 获取连接到根节点的特定类型的所有节点

> ID：12766100
> 
> 赞同：0
> 
> 时间：2012-10-07T04:22:36.793
> 
> 标签：c#, neo4j, neo4jclient

我有一些用户类型的节点连接到根节点，就像这样

```
 var node = _graphClient.Create(new User{Name= "Bob}, new UserBelongsTo(_graphClient.RootNode)); 
```

我想执行一个查询，该查询将返回连接到根节点的所有用户。如何使用 neo4jClient 执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T08:31:55.733

到目前为止，这是我想出的：

```
 var results = new CypherFluentQuery(_client)
           .Start("n", _client.RootNode)
           .Match(string.Format("(n)-[:{0}]-(x)", UserBelongsTo.TypeKey))
           .Return<Node<User>>("x")
           .Results; 
```

注意：这是一个初学者的问题。

# javascript - HTML5 拖放事件和 setDragImage 浏览器支持

> ID：12766103
> 
> 赞同：11
> 
> 时间：2012-10-07T04:23:27.020
> 
> 标签：javascript, html, drag-and-drop, cross-browser

我正在开发一个[小型 jQuery 插件](https://github.com/GeReV/html5dragdrop)，该插件通过原生 HTML5 拖放事件模拟 jQuery UI 可拖放/可拖放行为。

我想添加的一个功能是能够指定将用作拖动代理的节点。

我做了一些研究，[根据 MDN](https://developer.mozilla.org/en-US/docs/DragDrop/DataTransfer#setDragImage%28%29)，要做到这一点需要使用`setDragImage()`，传递图像或元素。不同浏览器
支持什么？`setDragImage`

我注意到有一个名为[jquery.event.drag](http://threedubmedia.com/code/event/drag)的插件与我对这个问题的预期不同。
这个功能是否需要我像上面的插件一样做某种解决方法，或者这是否应该在大多数或所有使用的浏览器中开箱即用`setDragImage`？

***编辑***

在玩弄了这个功能之后，似乎这个功能非常有限。

除了在很多浏览器中不支持之外，使用任意 DOM 元素作为帮助器还需要它*位于 DOM 树中并且可见*，因此您将元素本身放在主体上，并将其副本作为处理程序。对于这种插件来说，这主要是不需要的。

此外，即使满足正确的条件，渲染也是有问题的。当试图从 中创建助手时`<span>TEST</span>`，助手本身只显示一个白色矩形，其尺寸为`span`.

这些问题是否符合规范？它们可以在代码中修复还是需要解决方法？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-12-14T16:40:57.750

setDragImage 是 IMO 任何重要的拖放用例的重要功能。例如，考虑一个多选列表，其中拖动需要包括所有选定的项目，而不仅仅是做出拖动手势的行。奇怪的是，您要设置的东西需要在 DOM 中可见，但更糟糕的是，从 IE 版本 11 开始，此方法根本没有实现。

然而，通过一些努力，我能够让它合理地令人满意地工作。可以在 timeout 0 函数中从 DOM 中删除自定义拖动图像节点。所以将它添加到 Dragstart 中的 DOM，然后在设置拖动图像中使用它，然后将其删除。这在 FF 中完美运行，但在 chrome 中，拖动图像节点会在超时触发之前闪烁。防止这种情况的一种方法是将其定位，以便实际浏览器生成的拖动图像将出现在完全相同的位置，这并不像听起来那么糟糕，因为您可以控制自定义拖动图像相对于光标的位置。

我最近在玩这个，并且能够让它在 IE 上运行。诀窍是让 IE 拖动自定义拖动图像节点，而不是 dragstart 触发的节点。您可以使用 IE 特定的 dragDrop() 方法来执行此操作。

最后要注意的是，在 Windows 上，自定义拖动图像节点的宽度有 300 像素的限制，这适用于所有可拖动对象，而不仅仅是自定义节点。因此，如果拖动图像太大，浏览器会应用较重的径向渐变。

[http://jsfiddle.net/stevendwood/akScu/21/](http://jsfiddle.net/stevendwood/akScu/21/)

```
$(function() {

(function($) {
    var isIE =  (typeof document.createElement("span").dragDrop === "function");
    $.fn.customDragImage = function(options) {

        var offsetX = options.offsetX || 0,
            offsetY = options.offsetY || 0;

        var createDragImage = function($node, x, y) {
            var $img = $(options.createDragImage($node));
            $img.css({
                "top": Math.max(0, y-offsetY)+"px",
                "left": Math.max(0, x-offsetX)+"px",
                "position": "absolute",
                "pointerEvents": "none"
            }).appendTo(document.body);

            setTimeout(function() {
                $img.remove();
            });

            return $img[0];
        };

        if (isIE) {
            $(this).on("mousedown", function(e) {
                var originalEvent = e.originalEvent,
                    node = createDragImage($(this), originalEvent.pageX, originalEvent.pageY);

                node.dragDrop();
            });
        }

        $(this).on("dragstart", function(e) {

           var originalEvent = e.originalEvent,
               dt = originalEvent.dataTransfer;

            if (typeof dt.setDragImage === "function") {
                node = createDragImage($(this), originalEvent.pageX, originalEvent.pageY);
                dt.setDragImage(node, offsetX, offsetY);  
            }
        });

        return this;
    };
}) (jQuery);

$("[draggable='true']").customDragImage({
    offsetX: 50,
    offsetY: 50,
    createDragImage: function($node) {
        return $node.clone().html("I'm a custom  DOM node/drag image").css("backgroundColor", "orange");
    }
}).on("dragstart", function(e) {
    e.originalEvent.dataTransfer.setData("Text", "Foo");
});

}); 
```

# entity-framework - 需要澄清实体框架代码优先和导航属性以及标量键

> ID：12766104
> 
> 赞同：0
> 
> 时间：2012-10-07T04:23:45.440
> 
> 标签：entity-framework, data-annotations, fluent-interface

**据我了解**（如果我弄错了，请纠正我），它们之间有关系的实体类可以通过多种方式定义——（1）通过使用一个属性来表示一个标量键加上一个导航属性或（2 ) 仅使用导航属性。

如果您使用数据注释，我**相信**您唯一的选择是同时使用标量键和导航属性，而使用 Fluent API 两种方法都可用。

我的问题是采取哪种方法？各自的优缺点是什么？（这是关于外键和导航属性的两种选择......**不是**关于数据注释与流利的。

正如我所看到的，它归结为这些因素/担忧

1.  同时拥有标量属性和导航属性可以被视为“弄脏”类。
2.  只有导航属性需要调用 Includes() 才能访问 FK 值。我没有查看正在发送的 SELECT 语句，但我怀疑正在执行 JOIN 并且正在发回不需要的数据。
3.  拥有标量属性将排除对 Include() 调用的需要。
4.  正如我在上一个 SO 问题（[相关问题](https://stackoverflow.com/q/12765542/240372)）中所暗示的那样，看起来导航属性不能用作复合键的一部分，因此将被迫包含额外的标量键。如果你必须为一个属性做这件事，那么在你的所有类中保持一致是有意义的。

我错过了什么吗？一般来说，定义外键和导航属性的推荐方法是什么？为什么要同时提供这两种方法，因为它似乎混淆了水域？我查看了很多教程，并看到了这两种方法的混合。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T09:45:38.163

> (1) 通过使用属性来表示标量键和导航属性，或者 (2) 仅使用导航属性。

[这就是外键和独立关联](https://stackoverflow.com/questions/5281974/code-first-independent-associations-vs-foreign-key-associations/5282275#5282275)之间的区别。

> 如果您使用数据注释，我相信您唯一的选择是同时使用标量键和导航属性，而使用 Fluent API 两种方法都可用。

不，数据注释只是另一个提示。默认约定会自动识别导航属性。

> 同时拥有标量属性和导航属性可以被视为“弄脏”类。

是的，但是由于具有标量属性的两种关联类型的不同性质使得一些开发任务更简单。

> 只有导航属性需要调用 Includes() 才能访问 FK 值。我没有查看正在发送的 SELECT 语句，但我怀疑正在执行 JOIN 并且正在发回不需要的数据。

是的。`Include`意味着获取数据，但如果您只需要在 linq-to-entities 查询中访问 FK，则不需要使用它。例子：

```
 var children = from c in context.Children
                where c.Parent.Id == 123
                select c; 
```

此查询通过并在内部生成联接访问“FK” `Parent`，但不获取父级。

> 拥有标量属性将排除对 Include() 调用的需要。

否`Include`。取决于导航属性，而 FK 属性本身不会创建关联。您始终必须在关系的至少一侧具有导航属性（在我的示例中`Parent`或`Child`在我的示例中）。

> 看起来导航属性不能用作复合键的一部分

是的。如果您需要复合键，则需要在实体上公开外键。

还有[其他相关问题](https://stackoverflow.com/questions/12606948/what-are-independent-associations-and-foreign-key-associations)。

# flash - 在执行 Windows 设置和部署之前安装 Flash Player

> ID：12766107
> 
> 赞同：1
> 
> 时间：2012-10-07T04:24:35.123
> 
> 标签：flash, 32bit-64bit, setup-deployment, prerequisites

在执行我创建的 .net windows 应用程序设置 msi 之前，我想安装一个 flash 播放器（如果尚未在目标机器上）。有什么线索吗？（我有 Flash 安装程序）

# php - PHP在等号之前获取文本作为数组键，之后作为数组值

> ID：12766108
> 
> 赞同：1
> 
> 时间：2012-10-07T04:24:38.277
> 
> 标签：php, arrays

作为下面的示例，有一个内容包含多个等号。PHP函数应该如何将所有等号解析为一个数组，其中键是等号之前的文本，值在它之后？

> Lorem ipsum id="the id" dolor sit amet, consectetur name="the name" adipisicing elit, sed do type="the type" eiusmod tempor incididunt ut labore et dolore magna aliqua。

结果将是这样的：

```
Array ( 
    [id]   => the id
    [name] => the name
    [type] => the type
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T04:40:28.913

我会使用[preg_match_all](http://php.net/manual/en/function.preg-match-all.php)来捕获该字符串中的所有这些实例。

```
preg_match_all('/([^\s]*?)="([^"]*?)"/',$text, $matches); 
```

将找到您想要的变量并将它们设置在两个数组中：`$matches[1]`和`$matches[2]`. 如果需要，可以使用[for](http://php.net/manual/en/control-structures.for.php)或[foreach](http://php.net/manual/en/control-structures.foreach.php)循环将它们放入一个新数组中。

我在键盘上做了一个例子，如果你想看的话，[在这里](http://codepad.viper-7.com/ZKEw0Z)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T04:41:46.677

```
$string; // This is the string you already have.

$matches = array(); // This will be the array of matched strings.

preg_match_all('/\s[^=]+="[^"]+"/', $string, $matches);

$returnArray = array();
foreach ($matches as $match) { // Check through each match.
    $results = explode('=', $match); // Separate the string into key and value by '=' as delimiter.
    $returnArray[$results[0]] = trim($results[1], '"'); // Load key and value into array.
}
print_r($returnArray); 
```

# jquery - Rails AJAX/jQuery，需要帮助更新 div

> ID：12766111
> 
> 赞同：0
> 
> 时间：2012-10-07T04:26:07.597
> 
> 标签：jquery, ajax, ruby-on-rails-3

这是我尝试 AJAX 和 jQuery 的第一天，所以我仍然对基础知识有些摸不着头脑。

我的很多代码都基于在[这个站点](http://stjhimy.com/posts/07-creating-a-100-ajax-crud-using-rails-3-and-unobtrusive-javascript)上找到的内容。

在销毁对象时，我希望更新索引页面上的对象列表。

控制器动作：

```
def destroy
  @artist = Artist.find(params[:id])
  @artist.destroy
  @artists = Artist.all
end 
```

销毁.js.erb：

```
$("#post_errors").hide(300);
$("#flash_notice").html("<%= escape_javascript(flash[:notice]) %>");
$("#flash_notice").show(300);
$("#posts_list").html("<%= escape_javascript( render(partial: "list")) %>"); 
```

_list.html.erb：

```
<% for artist in @artists %>
  <tr>
    <td><%= artist.display_name %></td>
    <td><%= link_to "Destroy", artist, remote: true, confirm: "Are you sure?", method: :delete %></td>
  </tr>
<% end %> 
```

index.html.erb：

```
<div id="artist_list"><%= render partial: 'list' %></div> 
```

单击销毁链接时，将执行销毁对象的数据库操作并删除对象，但如果不刷新页面，索引页面上的列表不会更新。

有什么明显的我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T04:32:36.713

您可以尝试对您的 JS 进行此更改：

```
$("#artist_list").html("<%= escape_javascript( render(partial: "list")) %>"); 
```

因为，如果我正确理解了您的代码，您正在尝试更改 ID 为“posts_list”的 DOM 对象的 html。

# iphone - 加载网站的桌面版本

> ID：12766112
> 
> 赞同：0
> 
> 时间：2012-10-07T04:26:11.547
> 
> 标签：iphone, objective-c, ios, uiwebview

如何加载网站的桌面版本（例如 google、facebook）而不是移动版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T06:58:30.843

你为什么要经历所有这些麻烦？这是错误/长期的方法。

只需创建一个`NSMutableRequest`并将其设置`useragent`在其中而不是在`UIWebView`. 然后只需使用`UIWebView`普通/非私有功能加载请求`loadRequest:`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T04:59:44.347

**编辑：**忽略这一切。亚尼夫是对的。只需使用消息加载实例并将标头设置为您`NSMutableURLRequest`想要的任何内容。`UIWebView``- loadRequest:``"User-Agent"`

```
NSMutableURLRequest *rq = [NSMutableURLRequest requestWithURL:someUrl];
[rq setValue:@"Some desktop user-agent" forHTTPHeaderField:@"User-Agent"];
[webView loadRequest:rq]; 
```

供您参考，桌面用户代理字符串的一个不错选择是 Chrome - 它也是基于 WebKit 的，如 Safari，因此特定于 WebKit 的扩展将起作用。所以尝试将用户代理字符串设置为

> Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.6 Safari/537.11

* * *

原帖：

您可以尝试欺骗 UIWebView 的用户代理，但我不能保证这样的胖黑客会让您通过 AppStore 的薄门......

```
void *object_getIvarPtr(id obj, const char *name)
{
    Ivar iv = object_getInstanceVariable(obj, name, NULL);
    off_t offset = ivar_getOffset(iv);
    return (char *)obj + offset;
}

// In some initialization routine, after having created the web view
id webViewInternal = *(id *)object_getIvarPtr(someWebView, "_internal");
id webBrowserView = *(id *)object_getIvarPtr(webViewInternal, "browserView");
id webKitWebView = [webBrowserView webView];

NSString *desktopUAStr = @"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.6 Safari/537.11"
[webKitWebView setCustomUserAgent:desktopUAStr]; 
```

# javascript - 原型如何在打字稿上扩展？

> ID：12766117
> 
> 赞同：19
> 
> 时间：2012-10-07T04:27:35.293
> 
> 标签：javascript, typescript

我扩展了函数原型，但打字稿无法识别它。

```
Function.prototype.proc = function() {
  var args, target, v;
  var __slice = [].slice;
  args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
  target = this;
  while (v = args.shift()) {
    target = target(v);
  }
  return target;
};
// generated by coffee-script

var foo: (number) => (string) => number
  = (a) => (b) => a * b.length;
console.log(foo.proc("first", "second")) 
```

结果：tsc -e

```
The property 'proc' does not exist on value of type 'Function' 
```

我如何扩展这个对象？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-07T18:03:48.343

标准打字稿库中有一个 Function 接口，它声明了 Function 对象的成员。您需要使用您自己的附加组件将 proc 声明为该接口的成员，如下所示：

```
interface Function {
    proc(...args: any[]): any;
} 
```

需要从您打算使用“proc”的任何地方引用此接口。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-06-25T05:00:11.313

像这样：

```
declare global {
    interface Function {
        proc() : any;
    }
} 
```

如果没有“声明全球”，它就行不通。

这就是模块增强在最近的 TypeScript 版本中的工作方式。查看[文档](https://www.typescriptlang.org/docs/handbook/declaration-merging.html)并向下滚动到该`Module augmentation`部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-17T17:40:53.493

静态方法

```
declare global { 
  interface NumberConstructor {
    formatCurrency(num: number): string;
  }
}

export const formatCurrency = (num: number) => {
  if (!num) return '$0';
  return '$' + num.toFixed(0).replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1,');
};

Number.formatCurrency = formatCurrency; 
```

非静态方法

```
declare global {
  interface Number {
    formatCurrency: () => string;
  }
}

Number.prototype.formatCurrency = function() : string {
  return '$' + this.toFixed(0).replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1,');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-26T02:25:54.607

只需添加一点，如果您尝试添加已声明的定义，那么这是类型安全的方式，也可以防止错误的`for in`实现。

```
export const augment = <U extends (string|symbol), T extends {[key :string] :any}>(
    type  :new (...args :any[]) => T,
    name  :U,
    value :U extends string ? T[U] : any
) => {
    Object.defineProperty(type.prototype, name, {writable:true, enumerable:false, value});
}; 
```

可以用来安全地填充。**例子**

```
//IE doesn't have NodeList.forEach()
if (!NodeList.prototype.forEach) {
    //this errors, we forgot about index & thisArg!
    const broken = function(this :NodeList, func :(node :Node, list :NodeList) => void) {
        for (const node of this) {
            func(node, this);
        }
    };
    augment(NodeList, 'forEach', broken);

    //better!
    const fixed = function(this :NodeList, func :(node :Node, index :number, list :NodeList) => void, thisArg :any) {
        let index = 0;
        for (const node of this) {
            func.call(thisArg, node, index++, this);
        }
    };
    augment(NodeList, 'forEach', fixed);
} 
```

[[不幸的是，由于当前 TS](https://github.com/Microsoft/TypeScript/issues/1863)的限制，它无法对您的 Symbols 进行类型检查，并且如果字符串由于某种原因[与任何定义不匹配](https://www.typescriptlang.org/play/#src=const%20john%20%3D%20%3C%0A%20%20%20%20T%20extends%20%7B%5Bkey%20%3Astring%5D%20%3Aany%7D%2C%0A%20%20%20%20U%20extends%20string%0A%3E(%0A%20%20%20%20obj%20%20%20%3AT%2C%0A%20%20%20%20name%20%20%3AU%2C%0A%20%20%20%20value%20%3AT%5BU%5D%0A)%20%3D%3E%20(%0A%20%20%20%20obj%5Bname%5D%20%3D%20value%0A)%3B%0A%0A%2F%2Fworks%0Ajohn(%7Bbob%3A%207%7D%2C%20'bob'%2C%208)%3B%0A%2F%2Fcorrectly%20error's%0Ajohn(%7Bbob%3A%207%7D%2C%20'bob'%2C%20'')%3B%0A%2F%2Fincorrectly%20doesn't%20error%0Ajohn(%7Bbob%3A%207%7D%2C%20'bab'%2C%20'')%3B%0A%0A%2F%2Fknows%20it%20doesn't%20exist%20(I%20actually%20expected%20'void'%20which%20would've%20still%20work%20for%20above)%0Aconst%20steve%20%3A%7Bbob%20%3Anumber%7D%5B'bab'%5D%20%3D%207%3B)，它也不会对您大喊大叫，我会在查看它们是否已经存在后报告该错误知道的。]

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-05-02T22:52:41.617

我添加这个是为了建议不要像问题中所示的示例那样添加原型，因为很多人都查看这个问题。添加如下：

```
interface Function {
    proc(...args: any[]): any;
}

Object.defineProperty(Function.prototype, 'proc', { value: function(arg: any[]) {
    // Your function body
}}); 
```

原因是如果你直接将它添加到原型中，如果该函数的实例被枚举出来，它可能会被枚举。`for i in ..`. 现在这个块可能在你无法控制的代码中（最近发生在我身上），所以最好让你的代码尽可能安全。

# php - 我的 JSON，PHP 不工作

> ID：12766118
> 
> 赞同：-4
> 
> 时间：2012-10-07T04:28:05.550
> 
> 标签：php, jquery, json

这是我保存为 db2.php 的 php 代码

```
<?php

      mysql_connect("mysql15.000webhost.com","a3189966_root","");

      mysql_select_db("a3189966_pd");
      $firstName = $_GET[firstName];
      echo $firstName;
      $q=mysql_query("SELECT * FROM people where first='$firstName'");

      while($e=mysql_fetch_assoc($q))
              $output[]=$e;

            $json = json_encode($output);
            echo($json);

    mysql_close();

?> 
```

这是我的 html 代码，其中 jquery 和 json 保存为 index2.html

```
 $("#myForm").submit(function(){
                    var postData = $(this).serialize();
                    $.ajax({
                        type: "GET",
                        dataType: "json",
                        data: $("#myForm").serialize(),
                        url: "db2.php",
                        success: function(data){
                            alert("processing now" + data);
                                  $.each(data,function(i,item){
                                                          alert("processing each data now");
                                      $('<li></li>').html(item.first + " " + item.last).appendTo('#data');
                                  });
                        },
                        error: function(data){alert("failed"+data);}
                    });
                return false;
                });

    <form id="myForm" method="GET" action="">
    <input type="textbox" name="firstName" id="firstName">
    <input type="submit" name="myButton" value="submit">
</form>
<ul id="data">
</ul> 
```

在我执行了下面的html代码后，它只会提示错误。我检查了几个小时，我看不到任何错误，这段代码可以正确执行。这是从 php 返回的 json 对象

```
[{"id":"1","first":"wen","last":"hao","age":"123"}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T04:37:03.380

`dataType`将您的从更改`jsonp`为`json`.

```
dataType: "json", 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T05:05:48.363

ajax 调用的错误回调可以采用三个参数。第二个和第三个参数应该让您更好地了解出了什么问题。

来自[jQuery ajax 文档](http://api.jquery.com/jQuery.ajax/)：

> 第二个参数（除了 null）的可能值是“timeout”、“error”、“abort”和“parsererror”。发生 HTTP 错误时，errorThrown 会接收 HTTP 状态的文本部分，例如“未找到”或“内部服务器错误”。

因此，为您的 ajax 调用尝试这样的操作：

```
$.ajax({
    type: "GET",
    dataType: "json",
    data: $("#myForm").serialize(),
    url: "db2.php",
    success: function(data){
        alert("processing now" + data);
        $.each(data,function(i,item){
            alert("processing each data now");
             $('<li></li>').html(item.first + " " + item.last).appendTo('#data');
        });
    },
    error: function(jqXHR, textStatus, errorThrown) {
        alert(textStatus);
        if(errorThrown) {
            alert(errorThrown);
        }
    }
}); 
```

# java - 实现抽象超类Java的麻烦

> ID：12766121
> 
> 赞同：2
> 
> 时间：2012-10-07T04:28:15.523
> 
> 标签：java

我正在做一个任务，我试图实现一个扩展抽象超类的类，但是通过使用

```
 public class B extends A{} 
```

但是，这给了我 B 类型必须实现抽象方法 A.act 的错误，是否有另一种方法可以在不使用扩展的情况下做到这一点？

使用：

```
 public abstract class B extends A{} 
```

在作业的另一部分给我一个不同的错误，应该是正确的。

我应该怎么办？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T04:35:46.903

为了`B`被 JVM 实例化，它不能是`abstract`. 抽象类是关于类如何工作的想法或建议，其中一些（或全部）功能需要由扩展它的类来实现。

为了`B`被实例化，它必须实现所有的抽象方法`A`。

要解决您的问题，您必须提供`A`标记为`abstract`...的方法的实现

```
public abstract class A {
     public abstract void implementMe();
}

public class B extends A {
    public void implementMe() {
        // Your implementation
    }
} 
```

这样做的大部分原因是它允许您传递给使用并改变工作方式的`B`方法和类。这是多态性的一部分，其中一个对象实例可以充当其父级（就像它一样）`A``A``B``A`

我不知道它是否会有所帮助，但您可以阅读[抽象类和方法](http://www.linuxtopia.org/online_books/programming_books/thinking_in_java/TIJ309_007.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T04:41:10.510

如果您不想在 B 中提供行为的实现，请不要将抽象类 A 中的方法行为声明为抽象方法。但这可能不是正确的选择，具体取决于您要实现的目标。在第二种情况下，当抽象类扩展另一个抽象类时，使用“实现”而不是“扩展”。希望能帮助到你

# python - Python Shell - 语法错误

> ID：12766124
> 
> 赞同：0
> 
> 时间：2012-10-07T04:28:41.727
> 
> 标签：python, python-idle, python-2.3

我对 Python 非常陌生。我试图通过编写'python hello.py'来运行python程序，但每次我这样做时都会出现语法错误。这是为什么？

但是，当我打开文件并单击运行模块时，它可以工作。如果我输入“python hello.py”，为什么它不起作用

无论如何我可以导航到存储文件的目录然后运行它吗？我尝试将我的文件直接放在 Python23 文件夹中：P 无论如何都没有用

请帮我。我有 Python 2.3.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T04:31:02.473

我猜你是`python hello.py`在 Python REPL 中运行的。这行不通；`python hello.py`是启动 Python 的东西，你需要在系统 shell 中运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T05:34:11.207

错误是什么？

将 python 的文件路径放在系统的 PATH 中的 python.exe 中，然后你可以从任何地方运行 python 文件。

# javascript - FB.login() 调用弹出窗口被谷歌浏览器阻止

> ID：12766126
> 
> 赞同：2
> 
> 时间：2012-10-07T04:28:53.937
> 
> 标签：javascript, facebook, login, popup, settimeout

非常相关：

[http://code.google.com/p/facebook-actionscript-api/issues/detail?id=256](http://code.google.com/p/facebook-actionscript-api/issues/detail?id=256)

具体来说：

> 我发现除非由用户操作（例如按钮单击）触发，否则弹出窗口会被阻止。所以这个问题的解决方案是只从 MouseEvent.CLICK 处理程序调用 Facebook.login()。

* * *

但是在我的网站上，这就是我所做的，并且弹出窗口*仍然*被阻止：

```
$('#fb-login-button').click(function () {
    FB.logout();
    setTimeout(function() {
        FB.login();
    }, 2000);
}); 
```

是因为`FB.login()`调用是由 setTimeout() 函数调用的，而不是直接在点击处理程序中？

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T04:37:20.557

是的，由于 setTimeout 调用，浏览器会阻止您的弹出窗口。

如果您删除 setTimeout 它不会被阻止。

很好的解释在这里： [https ://stackoverflow.com/a/7060302/384442](https://stackoverflow.com/a/7060302/384442)

# javascript - 使用 JavaScript 重新加载 iframe

> ID：12766127
> 
> 赞同：0
> 
> 时间：2012-10-07T04:29:05.990
> 
> 标签：javascript, css, iframe, reload

我有一个网页**A.html**，它有几个链接和一个带有页面**B.html的 iframe，它在****A.html**加载时加载到**A**的 iframe中。当**A.html加载时，我有一个简单的 javascript 来确定当****A**加载并相应地调整 iframe 时要加载到 iframe 中的文档的高度，这样我就不必使用滚动条。

 ******当我单击**A.html**中的链接之一时，我希望**将 B.html**替换为**A**中的链接将我带到的任何页面（我们将其称为**C.html**）。现在，当**C**加载到**A**的 iframe 中时，**C.html将有一个指向在****A**的 iframe中打开的另一个页面的链接，我将**使用 D.html**。

现在，我可以让**B**、**C**和**D**以我想要的方式出现在**A的 iframe 中。**我试图弄清楚如何做的是应用一点 JavaScript 来计算**A**加载时**B.html**的高度，并将其应用于**C**和**D**等等，这样 iframe 总是足够高显示整个文档而没有空白。

 ******在这一点上，我脑子里想着我需要弄清楚如何重写脚本，并且可能还需要重写页面的一大块。所述代码可应要求提供，以及澄清我提出的任何观点所需的任何其他内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T05:13:53.440

您可以尝试使用页面 A 的 iframe onload 事件。

```
iframeOnPageA.onload = function() {
    //insert resizing code here
}; 
```

每次加载 iframe 时，都应该调用该函数。************

# ruby-on-rails - 在测试中，如何将默认请求参数传递给get/post/put/delete

> ID：12766128
> 
> 赞同：0
> 
> 时间：2012-10-07T04:29:06.490
> 
> 标签：ruby-on-rails, ruby, rspec

考虑这个例子：

```
describe UsersController do
  it "works for something" do
    # some other code
    get :show, {facebook_id: 1000000000}
    # some other code
    put :update, {facebook_id: 1000000000, birthday: "2001-01-01"}
    # some other code
    get :show, {facebook_id: 1000000000}
    # some other code
  end

  it "works for another thing" do
    # some other code
    get :show, {facebook_id: 1000000000}
    # some other code
  end
end 
```

如何干燥，`{facebook_id: 1000000000}`以便我可以简单地写`get :show`，`put :update, {birthday: "2001-01-01"}`等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T05:12:02.973

怎么样

```
def options(*args)
  _options = args.extract_options!
  _options.merge({facebook_id: 1000000000})
end 
```

然后

```
get :show, options
put :update, options(birthday: "2001-01-01") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T00:02:18.147

你的控制器用那个 facebook_id 做什么？当你不测试时，我会存根需要 facebook_id 的方法，就像我在这里建议的那样[RSpec Request - How to set http authorization header for all requests](https://stackoverflow.com/questions/12761544/rspec-request-how-to-set-http-authorization-header-for-all-requests)

# php - 用PHP重写地址栏？

> ID：12766129
> 
> 赞同：0
> 
> 时间：2012-10-07T04:29:07.953
> 
> 标签：php

也许我的做法是错误的，但我会列出我希望我的网站执行的过程，然后看看你们能想到什么解决方案。

在网址

```
example.net/ShellySite/Form/form.php 
```

有一个表格要填写，然后按下提交按钮，然后网站转到

```
example.net/ShellySite/Controller/PHP/submitform.php 
```

它放在这里是因为它将表单中的详细信息提交到数据库，我想做的基本上是在 submitform.php 页面上的代码完成运行后立即将浏览器重新路由到不同的页面，例如

```
example.net/ShellySite/Home/home.php 
```

但我似乎无法让它工作。我已经尝试过类似的东西，`header(Location:"example.net/ShellySite/Home/home.php")` 但它只是将所有内容附加到 的末尾`example.net/ShellySite/Controller/PHP/submitform.php`，这显然不是我想要的。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T04:31:40.960

使用绝对 URL：

```
header('Location: http://example.net/ShellySite/Home/home.php'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T04:36:35.680

可以使用**`.htaccess`**您在重定向中寻找的内容进行重写。

由于您尝试使用绝对 URL，因此您的请求中缺少协议。喜欢`http`和`https`。添加它们

```
header('Location: http://example.net/ShellySite/Home/home.php');
exit; // Dont forget to add this 
```

或使用相对 URL，例如

```
header('Location: /ShellySite/Home/home.php');
exit; 
```

# java - 如何在 Android 设备中未安装任何应用程序的情况下打开 doc 和 ppt 文件？

> ID：12766130
> 
> 赞同：4
> 
> 时间：2012-10-07T04:29:10.613
> 
> 标签：java, android, mobile, io, document

如何在 Android 设备中未安装任何应用程序的情况下打开 doc、ppt 文件？

我正在开发一个文档，我想就如何在没有安装任何应用程序的情况下打开 doc、ppt、pdf 文件提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T06:54:51.607

如果您想要这些文件的可读输出，则需要另一个应用程序。据我所知，股票 android 没有办法自然地读取这些文件中的任何一个。

如果您可以管理一个应用程序，我个人知道的金士顿办公室可以打开这些类型（pdf 不确定） [https://play.google.com/store/apps/details?id=cn.wps.moffice_eng&hl=en](https://play.google.com/store/apps/details?id=cn.wps.moffice_eng&hl=en)

我认为的另一种方式是，如果您有一个可以从中制作网页的外部解释器。也许使用 drive.google.com 可以解决这个问题，但我不知道您设备上的浏览器可以支持多远。

# html - CSS中带有静态图像的静态页脚？

> ID：12766139
> 
> 赞同：2
> 
> 时间：2012-10-07T04:31:43.540
> 
> 标签：html, css, sticky-footer

我的目标：拥有一个具有固定、静态页脚的主页。解释这一点的最简单方法是查看这个网站，[http://www.foxtie.com/](http://www.foxtie.com/)。我正在尝试像他们对狐狸所做的那样，坚持页脚，只是，我希望整个页脚永远不会从实际屏幕的底部移动。

我的代码：我已经改变了，没有改变，又重新改变了这一切。所以我可能比一小时前多 20 步。这就是我所拥有的。（忍受我，第一次在这里发帖，我对 html/css 很生疏）。

任何帮助表示赞赏。

的HTML：

```
<html>
<body>
<div id="container">
  <div id="nav"></div>
  <div id="content"></div>
  <div id="footer">
    <div id="imginthefooter"></div>
  </div>
</div> 
</body>
</html> 
```

CSS：

```
body    {
    height: 100%;
    margin: 0px;
}

html {
    background-color: #999;
    margin: 0px;
    height: 100%;
}

#container {
    min-height: 100%;
    background-color: #666;
    position: relative;
}

#content    {
    overflow: auto;
    background-color:#333;
}

#footer {
    background-color:#000;
    position: absolute;
    bottom: 0px;
    left: 0px;
    width: 100%;
    height:100px;
    overflow: hidden;       
}

#imginthefooter {       
    background: url(Images/Elk.png);
    width:100px;
    height:300px;
    z-index:300;
    bottom: 0px;
    top: -108px;
    right: -150px;
    position: relative;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T07:08:08.137

Alien 先生在他的评论中提供的链接是用于粘性页脚的。如果您希望页脚出现在屏幕底部而不考虑页面上的内容量，这将非常有用。我认为您真正想要的是页脚始终出现在页面底部。这意味着如果您向下滚动，页脚将保持在原位。如果是这种情况，您需要以下代码：

```
#footer {
    position:fixed;
    bottom:0;
    left:0;
    right:0;
    width:100%;
    height:100px;
} 
```

固定位置会将页脚永久放置在屏幕底部。要在页脚中添加固定图像，您将需要相对 div 和绝对 div。以下代码将为您提供所需的内容。

```
​&lt;div id="footer">
  <div id="footerContainer">
    <div id="imginthefooter"></div>

    . . . Any additional footer elements go here . . .

  </div>
</div>​​​​​​​​​

#footer {
    position:fixed;
    bottom:0;
    left:0;
    right:0;
    width:100%;
    height:100px;
}

#footerContainer {
    position:relative;
    width:100%;
    height:100px;
}

#imginthefooter {       
    background: url(Images/Elk.png) no-repeat;
    width:100px;
    height:300px;
    top: -108px;  /* Position element */
    right: 150px; /* Position element */ 
    position: absolute;
}​​​​​​​​​ 
```

固定元素中的相对容器将允许您相对于该容器定位麋鹿图像。

# android - 返回主活动的单个按钮

> ID：12766140
> 
> 赞同：0
> 
> 时间：2012-10-07T04:31:47.913
> 
> 标签：android

几天前我开始了 Android 开发，进展顺利。我没有编写代码，因为我不知道最好的方法。就这样：

我有多项活动。我的主要活动有多个按钮，这些按钮使用意图来显示相关活动。我想要一个可以返回到主要活动的全局按钮。此按钮应该可以从所有其他活动中访问。

我不确定是否有一个全局工具栏或者我可以做些什么来避免在不同的 XML 中声明相同的按钮。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T04:47:05.580

您可以在应用程序中使用操作栏。通常许多应用程序都有操作栏。操作栏具有整个应用程序所需的通用功能。通常在最左侧的操作栏中有您的应用程序图标图像，单击该图像将用户重定向到主页。有一个[Action Bar Sherlock](http://actionbarsherlock.com/)很容易在您的应用程序中实现。

# mysql - 从多个表中检索所有

> ID：12766141
> 
> 赞同：0
> 
> 时间：2012-10-07T04:31:56.860
> 
> 标签：mysql

我有 2 张桌子：

```
Appointments
id serviceId
1  1
2  1

Services
id
1 
```

约会表通过使用 serviceId 列链接到服务表。从约会表中检索数据时，我还想从服务表中检索数据，但每个表中的列数不匹配。

我试过这个：

```
SELECT appointments.*, services.* FROM appointments
INNER JOIN services ON id = appointments.serviceId
WHERE id = ? 
```

但这不起作用。首先，在连接中，如何从约会表中引用一个我什至还没有检索到数据的 ID？其次，如果两个列名匹配，如何从两个表中获取所有数据，然后检索数据？

这不起作用：

```
results.getInt("id"); 
```

因为两个表都有一个 id 字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T04:33:49.490

指定`ID`所属的表名，

```
SELECT appointments.*, services.* 
FROM appointments
     INNER JOIN services 
         ON Services.id = appointments.serviceId
-- WHERE id = ? -- specify also here as the two tables have column ID 
```

或`ALIAS`在它们周围添加

```
SELECT  appointments.id as AppID,
        appointments.serviceId as AppServiceID
        services.id AS ServiceID
FROM    appointments
        INNER JOIN services
            ON Services.id = appointments.serviceId
-- WHERE   id = ? 
```

当你得到他们的值时，现在使用他们的别名，像这样，

```
results.getInt("AppID"); 
```

# android - 从 txt 文件中捕获部分字符串？

> ID：12766143
> 
> 赞同：3
> 
> 时间：2012-10-07T04:32:29.223
> 
> 标签：android

我有一个这样的文本文件，用“;”分隔 1022-3、1603-4、2012-5、2489-6；

必须捕获“-”之前的第一部分并传递给变量，并与毫秒进行比较，如果等于数字，则捕获“-”之后的数字。分号后面的下一个数字也是如此，前面也是如此。

```
public static long MilliSeconds() {
    // get Calendar instance
    Calendar now = Calendar.getInstance();

    return now.getTimeInMillis();

} 
```

和代码的开头来做我需要的

```
private void LerArquivo() {
        String lstrNomeArq;
        File arq;
        String lstrlinha;
        long tempoInicio = 0;
        long tempoDecorrido = 0;
        try {

            tempoDecorrido = (RecordSound.MilliSeconds() - tempoInicio); 

            lstrNomeArq = "/Android/data/br.com.couldsys.drumspro/cache/GravaSound.TXT";

            String conteudotexto = "";

            arq = new File(Environment.getExternalStorageDirectory(),
                    lstrNomeArq);
            BufferedReader br = new BufferedReader(new FileReader(arq));

            // pega o conteudo do arquivo texto
            conteudotexto = br.readLine();

            String capturaIndex = ("Conteudo do texto: "
                    + conteudotexto.substring(
                            conteudotexto.indexOf("-") + 1,
                            conteudotexto.indexOf(";",
                                    conteudotexto.lastIndexOf("-"))));

            if (tempoDecorrido == capturatempo) { 

                DrumsProActivity.vsm.playSound(capturaindex);
                // ler a nova linha
                // se chegar ao final do string então para o while
                if (conteudotexto.length() > 0) {
                    executar = false;
                }

            }

        } catch (Exception e) {
            trace("Erro : " + e.getMessage());
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T04:59:46.563

使用这个更简单的代码：创建一个子字符串数组，每个子字符串都包含一个格式为 ####-# 的字符串

```
string[] MyStr = conteudotexto.split(',');

string sss= MyStr[0];
string sss2= MyStr[1]; 
```

……

现在 sss 是 1022-3 sss2 是 1603-4 等等....

然后重用拆分功能：

```
string[] MyStr2 = sss.split('-'); 
```

现在我们有：MyStr2[0] = 1022 MyStr2[1] = 3

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T05:02:04.000

也许不是特别优雅，但对我来说很实用 - 使用 String split 方法。首先用“，”分割

```
String[] parts = conteudotexto.split(","); 
```

然后是每个部分（这里是第一个）

```
String[] subParts = parts[0].split("-"); 
```

只为您提供您需要查看的所有内容，并且没有危险与位置等混淆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T01:51:16.030

我现在需要的是知道如何捕捉部分文本。

```
arq = new File(Environment.getExternalStorageDirectory(),
                    lstrNomeArq);
            BufferedReader br = new BufferedReader(new FileReader(arq));

            // pega o conteudo do arquivo texto
            conteudotexto = br.readLine(); 
```

文本可能会有所不同，更多分隔符有两个，第一个数字与第二个数字用“-”（破折号）分隔，然后用“，”（逗号）分隔

**549-8,1019-9,1404-3,1764-3,2208-10,2593-5,2938-9,3264-6,3700-0,4174-7,4585-8,4840-2,5192- 9,5540-10,5932-0,**

如图所示

```
String[] parte1 = conteudotexto.split(",");

e em seguida

String[] parte2 = parte1[0].split("-"); 
```

我正在尝试做的规则是：在一毫秒内转动该方法并与文本的第一部分进行比较

**类型**

* ***如果valor_milissegundos第一部分等于文本的数量那么--->进入并运行函数playSound（文本的第二个数字）；------> 转到文本循环中的下一个数字，捕获文本的第二个数字并将其与毫秒进行比较，如果相等则进入 IF 块并捕获破折号后的第二个数字，依此类推，直到你到达文本的结尾。****

**方法返回毫秒计算毫秒**

```
public static long MilliSeconds() {
    // get Calendar instance
    Calendar now = Calendar.getInstance();

    return now.getTimeInMillis();

} 
```

我希望明白我为什么使用谷歌翻译器

谢谢你

# javascript - 检测 div 是否旋转了 30 度

> ID：12766151
> 
> 赞同：2
> 
> 时间：2012-10-07T04:34:24.443
> 
> 标签：javascript, css

我正在使用 css3，我的问题是如何使用 javascript 检测 div 是否旋转了 30 度。有人可以帮我吗？非常感谢！这是我的代码：

```
 if($('.page').css('-ms-transform", rotateY(-30deg)')){
    alert("something here");
    } 
```

# wordpress - Wordpress CSS Main Navigation .current-menu-item transform:

> ID：12766155
> 
> 赞同：0
> 
> 时间：2012-10-07T04:35:00.190
> 
> 标签：wordpress, css, menu, navigation

I have a local install of wordpress and working with a theme. When on a page, the 'current page' has a dynamic colored line with triangle shape. The ultimate goal is to take the triangle and duplicate it across the whole menu item, for a jagged effect, instead of the single centered one.. I found some material on 'Dynamic Menu Highlighting' but can't figure out how to apply it. It's not an image or background image, it seems to be purely css. Below is the css sample from styles.css. When I play around with transform: I can get some results, just not the results desired. Hope someone can help. Thanks!

```
.not-ie #main-nav .current_page_item:after,
.not-ie #main-nav .current_page_parent:after,
.not-ie #main-nav .current-menu-item:after {
    background: #f15a23;
    bottom: -2.5px;
    content: '';
    left: 50%;
    display: block;
    height: 5px;
    margin: 0 0 0 -2.5px;
    -webkit-transform: rotate(45deg);
    -moz-transform: rotate(45deg);
    -ms-transform: rotate(45deg);
    -o-transform: rotate(45deg);
    transform: rotate(45deg);
    position: absolute;
    width: 5px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:42:32.863

there's an nice explanation of css triangles here: [How do CSS triangles work?](https://stackoverflow.com/questions/7073484/how-does-this-css-triangle-shape-work)

but you can't use this technique to create multiple triangles using only one html element.

you could introduce more elements so that you can display more triangles, but this doesn't sound like a great solution to me. so in this case it might be simplest to use an image. the advantage of using an image is also that you can repeat it horizontally if you have elements of varying width.

EDIT:

I've found another css-only solution (heavily influenced by lea verou's 3rd element here: [http://leaverou.github.com/animatable/](http://leaverou.github.com/animatable/)) - however it doesn't work in IE, so it mightn't be a solution for you, but incase you're interested, here it is:

```
#zig_zag {
    width: 140px;
    height: 5px;
    border-top:1px solid #E91010;
    background-repeat: repeat-x;
    background-position:10px 0;
    background-size: 7px 10px;
    background-image:
        linear-gradient(-45deg, #E91010 25%, transparent 25%),
        linear-gradient(45deg, transparent 75%, #E91010 75%),
        linear-gradient(45deg, #E91010 25%, transparent 25%),
        linear-gradient(-45deg, transparent 75%, #E91010 75%);      
} 
```

jsfiddle here: [http://jsfiddle.net/hGy6X/](http://jsfiddle.net/hGy6X/)

[note: it uses lea verou's prefix free script [http://leaverou.github.com/prefixfree/](http://leaverou.github.com/prefixfree/) ]

# r - plot.new() 中的错误：R 中的图形边距太大

> ID：12766166
> 
> 赞同：123
> 
> 时间：2012-10-07T04:37:30.730
> 
> 标签：r, plot

我是 R 新手，但我用较小的数据集制作了许多相关图。但是，当我尝试绘制一个大型数据集（2gb+）时，我可以很好地绘制图，但图例没有出现。有什么建议吗？或替代品？

```
library(gplots)
r.cor <- cor(r)
layout(matrix(c(1,1,1,1,1,1,1,1,2,2), 5, 2, byrow = TRUE))
par(oma=c(5,7,1,1))
cx <- rev(colorpanel(25,"yellow","black","blue"))
leg <- seq(min(r.cor,na.rm=T),max(r.cor,na.rm=T),length=10)
image(r.cor,main="Correlation plot Normal/Tumor data",axes=F,col=cx)
axis(1, at=seq(0,1,length=ncol(r.cor)), labels=dimnames(r.cor)[[2]], 
    cex.axis=0.9,las=2)
axis(2,at=seq(0,1,length=ncol(r.cor)), labels=dimnames(r.cor)[[2]],
     cex.axis=0.9,las=2)
image(as.matrix(leg),col=cx,axes=T) 
```

> 错误`plot.new()`：数字边距太大

```
tmp <- round(leg,2)
axis(1,at=seq(0,1,length=length(leg)), labels=tmp,cex.axis=1) 
```

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2014-09-05T18:46:43.027

在 Rstudio 中可能会发生此错误，这仅仅是因为您的“绘图”窗格太小了。尝试缩放您的“文件、绘图、包、帮助、查看器”，看看是否有帮助！

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2012-10-07T08:38:16.523

问题是您的调用创建的小图形区域 2`layout()`不够大，无法仅包含默认边距，更不用说绘图了。

更一般地说，如果设备上的绘图区域大小不足以实际进行任何绘图，则会出现此错误。对于 OP 的情况，问题是绘图设备太小，无法包含所有子图及其边距**，并**留下足够大的绘图区域来绘制。

如果 Plot 选项卡太小而无法留下足够的空间来包含边距、绘图区域等，RStudio 用户可能会遇到此错误。这是因为该窗格的物理尺寸是图形设备的尺寸。这些不是独立的问题；RStudio 中的绘图窗格只是另一个绘图设备，如`png()`、`pdf()`、`windows()`和`X11()`。

解决方案包括：

1.  减小边距的大小；这可能会有所帮助，特别是如果您尝试像 OP 一样在同一设备上绘制多个图。

2.  增加设备的物理尺寸，无论是在对设备的调用中（例如`png()`，`pdf()`等）还是通过调整包含设备的窗口/窗格的大小

3.  减小绘图上文本的大小，因为这可以控制边距的大小等。

## 减小边距的大小

在导致问题的行之前尝试：

```
par(mar = rep(2, 4)) 
```

然后绘制第二张图像

```
image(as.matrix(leg),col=cx,axes=T) 
```

您需要在`par()`我展示的通话中调整边距的大小才能做到这一点。

## 增加设备尺寸

您可能还需要增加要在其上绘图的实际设备的大小。

最后一个提示，`par()`在更改默认值之前保存它们，因此将现有`par()`调用更改为：

```
op <- par(oma=c(5,7,1,1)) 
```

然后在绘图结束时

```
par(op) 
```

* * *

## 回答 #3

> 赞同：72
> 
> 时间：2015-08-26T00:28:40.783

如果您在 RStudio 中收到此消息，**单击 Plots 选项卡中的“broomstick”图形“Clear All Plots”**并再次尝试 plot() 可能会起作用。

[![在此处输入图像描述](../Images/69deff85b0ba2d56ea2bf6a56b9f42df.png)](https://i.stack.imgur.com/CiGCP.png)

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2016-03-18T17:55:13.247

这有时会在 RStudio 中发生。为了解决它，您可以尝试绘制到外部窗口（仅限 Windows）：

```
windows() ## create window to plot your file
## ... your plotting code here ...
dev.off() 
```

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2015-11-25T17:55:52.960

我在 R Studio 中遇到了这个错误，并且通过单击并从右到左拖动其边缘使侧边栏变大来简单地修复。

图片在这里：[https ://janac.medium.com/error-in-plot-new-figure-margins-too-large-in-r-214621b4b2af](https://janac.medium.com/error-in-plot-new-figure-margins-too-large-in-r-214621b4b2af)

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2013-06-12T19:50:29.640

检查您的对象是列表还是向量。为此，请键入`is.list(yourobject)`。如果这是真的，请尝试重命名它`x<-unlist(yourobject)`。这将使其成为您可以绘制的向量。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-04-27T17:42:17.447

[![在此处输入图像描述](../Images/3e5b798962d7b531a3a3a491f8e3b305.png)](https://i.stack.imgur.com/kUiRC.png)

如果您使用 RStudio，只需缩放此区域。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-09-16T10:41:32.933

我今天发现了这个错误。最初，我试图将其输出到`.jpeg`宽度和高度较低的文件中。

```
jpeg("method1_test.jpg", width=900, height=900, res=40) 
```

后来我将宽度和高度增加到：

```
jpeg("method1_test.jpg", width=1900, height=1900, res=40) 
```

错误不存在。:)

你也可以玩分辨率，如果分辨率高，你需要更多的宽度和高度。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-06-20T17:34:32.793

当我尝试绘制高维数据时出现此错误。如果这就是你的情况，请尝试多维缩放： http: [//www.statmethods.net/advstats/mds.html](http://www.statmethods.net/advstats/mds.html)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-05-01T21:32:41.277

我为这个错误苦苦挣扎了好几个星期（使用 RStudio）。我尝试将绘图窗口移动得越来越小，但这并没有始终如一的帮助。当我将应用程序移动（拖动）到更大的显示器时，问题就消失了！我惊呆了……浪费了这么多时间……我知道我的代码是正确的……

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-03-11T21:20:17.243

如果保证金很低，那么最好从新的绘图设备开始：

```
dev.new()
# plot()
# save your plot
dev.off() 
```

除非您绘制无法容纳的大东西，否则您将永远不会出现边距错误。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-01-29T04:15:54.610

RStudio Plots 画布限制了绘图的宽度和高度。但是，如果您从**Rmarkdown**代码块进行绘图，则它可以不受画布字段限制，因为绘图区域是根据纸张大小设置的。

例如：

```
 ```{r}
#inside of code chunk in Rmarkdown
        grid <- par(mfrow=c(4, 5))
        plot(faithful, main="Faithful eruptions")
        plot(large.islands, main="Islands", ylab="Area")
        ...
        par(grid)
    ``` 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-02-11T13:32:04.670

我今天发现了同样的错误。我试过“清除所有绘图”按钮，但它给了我同样的错误。然后这个技巧对我有用， **尝试通过拖动来增加情节区域。它肯定会帮助你。**

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-07-22T07:19:13.610

我刚刚使用了 Clear all plots 然后再次给出 plot 命令，这很有帮助

# javascript - 在 Angularjs 中操作 {} 内的字符串

> ID：12766167
> 
> 赞同：1
> 
> 时间：2012-10-07T04:37:30.887
> 
> 标签：javascript, angularjs

我是 Angularjs 的新手。我做了一些测试，但我不知道是否有办法做这样的事情：

```
<li ng-repeat="article in articles" class="thumbnail">
    <img  ng-src="{{encodeURI(article.image)}}"></a>
</li> 
```

这个想法是使用原生 JS 函数来操作字符串。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T08:49:16.027

您不必在这些场景中使用 interpolate 指令。你可以使用更容易理解的东西，比如函数。

```
<li ng-repeat="article in articles" class="thumbnail">
<img ng-src="encode(article.image)">
</ii> 
```

现在 encode 应该是包含文章的作用域或内部作用域中的函数（注意：ng-repeat 为它创建的每个项目创建一个新作用域。因此在这个示例中，每篇文章都会有一个新作用域）。

假设您的控制器称为 ArticleCtrl（我将假设）

```
function ArticlesCtrl($scope){
    $scope.articles = [];
    $scope.encode = function(url){
        return encodeURI(url);
    }
} 
```

# jquery - jquery if/else 按钮 动画

> ID：12766168
> 
> 赞同：0
> 
> 时间：2012-10-07T04:38:01.487
> 
> 标签：jquery

我有一些我写的 jquery，上半部分适用于动画。

可以在此处找到动画示例（向下滚动到关于部分并单击“+”：http：damon9.com/dev/DC/index38.php

我尝试了 if/else 语句的多种组合，以查找其中一个元素是否可见运行此函数等。我需要它来回运行。我是 jquery 的新手，但任何帮助将不胜感激。谢谢。

```
html:
<div class="info-box" id="about-box">
  <div class="info-control"> 
    <!-- end .info-control --></div>
  <div class="button-area">
    <div class="open-close-btn" id="oc_about">
      <h2>+</h2>
      <h3>_</h3>
    </div>
    <!-- end #open-close-btn -->
    <p id="open-about">Open</p>
    <p id="close-about">Close</p>
  </div>
  <!-- end .button-area -->
  <header>Damon</header>
  <p class="info-title">Who I am and what I do</p>
  <p class="info-title">oijawoijriaejriejwirjw wr aweo  aw oewi jwo ijew oiweaj iwe </p>
</div>
<!-- end .info-box --> 

css:
.info-box {
background-color: #000;
width: 410px;
height: 100px;
opacity: .75;
position: absolute;
z-index: 60;
overflow: hidden;
}

.info-box header {font-family: 'GeosansLightRegular';
font-size: 42px;
color: #82da9b;
font-weight: 100;
letter-spacing: 1px;
padding: 6px 10px 0px 12px;
margin: 0;

}
.button-area {float: right; width: 180px; height: 50px;  position: relative; padding:     10px 10px 0 0;}

.button-area p {float: right; font-size: 13px; color: white; font-family: 'GeosansLightRegular';letter-spacing: 1px; padding: 4px 0 0 0; margin: 0;}

.open-close-btn {background-image:url(../images/open-close.png); position: relative; width: 53px; height: 53px; z-index: 70; float: right; display: block; cursor: pointer;  }

.open-close-btn:hover {background-position:0 -53px; cursor: pointer;}

.open-close-btn:active {background-postion:0 -106px; cursor: pointer;}

#oc_about h2{font-family:"Trebuchet MS", Arial, Helvetica, sans-serif; font-weight: 100; font-size: 40px; color: white; text-shadow: 3px 3px 2px #000 inset; margin: -2px 0 0 2px; display: block;}

#oc_about h3{font-family:"Trebuchet MS", Arial, Helvetica, sans-serif; font-weight: 100; font-size: 30px; color: white; text-shadow: 3px 3px 2px #000 inset; margin: -6px 0 0 4px; position: absolute; display: none;}

.button-area #open-about{display: block;}

.button-area #close-about{display: none;}

js:
if ($('.button-area #open-about').is(':visible')) {// if ID exists

    $("#oc_about").click(function () {
    $("#oc_about h2").fadeOut("fast" , function () {
    $(".button-area #open-about").fadeOut("fast" , function () {
    $("#oc_about h3").fadeIn("fast" , function () {
    $(".button-area #close-about").fadeIn("fast" , function () {
    $("#about-box").animate({height:"2000px" , paddingTop: "500px", marginTop: "-500px"}, 500);
                    });
                });
            });
        });
    });

    }

    else {
     $("#oc_about").click(function () {
$("#oc_about h3").fadeOut("fast" , function () {
$(".button-area #close-about").fadeOut("fast" , function () {
$("#oc_about h2").fadeIn("fast" , function () {
$(".button-area #open-about").fadeIn("fast" , function () {
$("#about-box").animate({height:"100px" , paddingTop: "-500px", marginTop: "500px"}, 500);
                    });
                });
            });
        });
    });

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T07:37:27.717

顺序是错误的。应该在`if/else`里面点击：

```
$("#oc_about").click(function () {
    if ($('.button-area #open-about').is(':visible')) {
        $("#oc_about h2").fadeOut("fast" , function () {
            $(".button-area #open-about").fadeOut("fast" , function () {
                $("#oc_about h3").fadeIn("fast" , function () {
                    $(".button-area #close-about").fadeIn("fast" , function () {
                        $("#about-box").animate({height:"2000px" , paddingTop: "500px", marginTop: "-500px"}, 500);
                    });
                });
            });
        });
    } else {
        $("#oc_about h3").fadeOut("fast" , function () {
            $(".button-area #close-about").fadeOut("fast" , function () {
                $("#oc_about h2").fadeIn("fast" , function () {
                    $(".button-area #open-about").fadeIn("fast" , function () { 
                        $("#about-box").animate({height:"100px" , paddingTop: "-500px", marginTop: "500px"}, 500); 
                    });
                });
            });
        });
    }
}); 
```

# java - 如何从 Java 中的 Zip 文件中读取 XML

> ID：12766171
> 
> 赞同：0
> 
> 时间：2012-10-07T04:39:33.140
> 
> 标签：java, xml-parsing, zip, inputstream, zipfile

我希望从存储在 zip 文件中的 XML 文件中读取数据。我在理解如何做到这一点时遇到了很多问题。我似乎能做的最好的事情就是让输入流正常工作，但我不明白如何阅读它！所以我知道它是正确的文件，不，我想将数据传递给我拥有的 XML 解析器。但是我真的不明白输入流是什么，或者如何正确操作它。我以前见过它与缓冲区一起使用，然后读入缓冲区，我的问题是如果缓冲区足够大，我们如何正确选择缓冲区的大小？

任何帮助都会很棒，谢谢！

```
ZipFile zf;
    try {
        zf = new ZipFile(directory);
        CharBuffer charBuffer = CharBuffer.allocate(BUFFER_SIZE);
      for (Enumeration<? extends ZipEntry> e = zf.entries();
            e.hasMoreElements();) {
        ZipEntry ze = e.nextElement();
        String name = ze.getName();
        if (name.endsWith(".xml")) {
          InputStream in = zf.getInputStream(ze);
          // read from 'in
        }
      }
    } catch (IOException e1) {
        System.out.println("Sorry we couldn't find the file");
        e1.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T05:09:26.347

你的意思是像这样？

```
DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
Document document = docBuilder.parse(in); 
```

或者你的意思是你已经有一个不接受 InputStream 的特定 XML 解析器 - 它需要什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T05:09:07.090

您可以使用`SAX`或`StAX`解析/读取流 - 参考[JAXP](http://docs.oracle.com/javase/tutorial/jaxp/index.html)

使用流 API，

```
 XMLStreamReader reader=XMLInputFactory.newFactory().createXMLStreamReader(in);
 while(reader.hasNext())
 {
  System.out.println(reader.next());
  System.out.println(reader.getLocalName());
 } 
```

使用 SAX，

```
SAXParserFactory.newInstance().newSAXParser().parse(in, new YourHandler()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T04:49:28.013

一个简单的 google 搜索可以引导您找到大量解释解析 XML 所涉及的代码工作的文章。那为什么不直接搜索呢？

其中之一：[http ://www.java-samples.com/showtutorial.php?tutorialid=152](http://www.java-samples.com/showtutorial.php?tutorialid=152)

我不包括如何解压缩文件，因为你已经提到你已经完成了，但如果你正在寻找选项，我会编辑我的答案。

快乐的 Java 编码。:)

# r - xtable 包：在输出中跳过一些行

> ID：12766173
> 
> 赞同：2
> 
> 时间：2012-10-07T04:39:53.773
> 
> 标签：r, dataframe, latex, xtable

在`xtable`输出中，如果我希望某些行中没有任何内容，我会将`NA`'s 放入与我想要跳过的行相对应的矩阵元素中。

但是，这将导致 xtable 输出类似`& & & & & & & & \\`. 我想知道的是如何做到这一点，所以它只`\\`适用于我想跳过的那一行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T08:27:02.530

仍然不确定我是否理解正确，但我试了一下。

我在这里做的最重要的假设是该模板中的多列行总是在同一个位置。您使用 R 创建一个矩阵或数据框，这些行中没有（有用的）数据。

就本示例而言，多列行是 80 行数据框的 15、30 和 60，对应于 80 行模板。

你可以做什么： 在`R`中，完全消除那些 NA 行，这样我们的数据框现在只有 77 行。

`xtable`您通过with为您的模板插入空行

```
> addtorow <- list()
> addtorow$pos <- list()
> addtorow$pos[[1]] <- c(14,29,59)
> addtorow$command <- "\\\\ \n"
> print( xtable( o ), add.to.row = addtorow, include.rownames=FALSE ) 
```

那应该给你空行，没有，`&`但有`\\`，因此是你要找的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T12:08:22.110

`xtable`如果您想要更大的灵活性，您可以使用和的组合来构建表格`writeLines`。让我们`xtable`将第一部分写入文件 ( `print.xtable`, `file = "bla.txt"`)，然后用 写入，然后`\\`用`writeLines`继续`xtable`。为防止两次写入标题，请设置`only.contents`为`TRUE`. 请注意在对and的调用中设置`append`等于。`TRUE``print.xtable``writeLines`

# powershell - 如何并行执行多次 PowerShell 函数？

> ID：12766174
> 
> 赞同：34
> 
> 时间：2012-10-07T04:39:55.420
> 
> 标签：powershell, asynchronous

我不确定是否将其称为对多线程、基于作业或异步的需求，但基本上我有一个 Powershell 脚本函数，它需要几个参数，我需要用不同的参数调用它多次并让它们运行在平行下。

目前，我这样调用函数：

```
Execute "param1" "param2" "param3" "param4" 
```

如何在不等待每次调用 Execute 返回给调用者的情况下多次调用它？

目前我正在运行 v2.0 但如有必要我可以更新

**编辑：**这是我到目前为止所拥有的，这是行不通的：

```
$cmd = {
    param($vmxFilePath,$machineName,$username,$password,$scriptTpath,$scriptFile,$uacDismissScript,$snapshotName)
    Execute $vmxFilePath $machineName $username $password $scriptTpath $scriptFile $uacDismissScript $snapshotName
}

Start-Job -ScriptBlock $cmd -ArgumentList $vmxFilePath, $machineName, $username $password, $scriptTpath, $scriptFile, $uacDismissScript, $snapshotName 
```

我收到一个错误：

> 无法将“system.object[]”转换为参数“initializationscript”所需的类型“system.management.automation.scriptblock”。不支持指定的方法

**EDIT2：**我修改了我的脚本，但我仍然收到上面提到的错误。这是我的模组：

```
$cmd = {
    param($vmxFilePath,$machineName,$username,$password,$scriptTpath,$scriptFile,$uacDismissScript,$snapshotName)
    Execute $vmxFilePath $machineName $username $password $scriptTpath $scriptFile $uacDismissScript $snapshotName
}

Start-Job -ScriptBlock $cmd -ArgumentList $vmxFilePath, $machineName, $username $password, $scriptTpath, $scriptFile, $uacDismissScript, $snapshotName 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-07T11:32:16.127

无需为此进行更新。定义一个脚本块并`Start-Job`根据需要多次运行脚本块。例子：

```
$cmd = {
  param($a, $b)
  Write-Host $a $b
}

$foo = "foo"

1..5 | ForEach-Object {
  Start-Job -ScriptBlock $cmd -ArgumentList $_, $foo
} 
```

脚本块有 2 个参数`$a`，`$b`由`-ArgumentList`选项传递。在上面的示例中，分配是`$_`→`$a`和`$foo`→ `$b`。`$foo`只是可配置但静态参数的示例。

`Get-Job | Remove-Job`在某个时刻运行以从队列中删除已完成的作业（或者`Get-Job | % { Receive-Job $_.Id; Remove-Job $_.Id }`如果您想检索输出）。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-10-07T11:35:56.807

这是一个用于测试目的的快速伪造脚本块：

```
$Code = {
    param ($init)
    $start = Get-Date
    (1..30) | % { Start-Sleep -Seconds 1; $init +=1 }
    $stop = Get-Date
    Write-Output "Counted from $($init - 30) until $init in $($stop - $start)."
} 
```

然后可以将此脚本块传递给`Start-Job`，例如 3 个参数 (10, 15, 35)

```
$jobs = @()
(10,15,35) | % { $jobs += Start-Job -ArgumentList $_ -ScriptBlock $Code }

Wait-Job -Job $jobs | Out-Null
Receive-Job -Job $jobs 
```

这将创建 3 个作业，将它们分配给`$jobs`变量，并行运行它们，然后等待这 3 个作业完成，并检索结果：

```
Counted from 10 until 40 in 00:00:30.0147167.
Counted from 15 until 45 in 00:00:30.0057163.
Counted from 35 until 65 in 00:00:30.0067163. 
```

这不需要 90 秒来执行，只需要 30 秒。

棘手的部分之一是在 ScriptBlock中`-Argumentlist`提供`Start-Job`并包含一个块。`param()`否则，脚本块永远不会看到您的值。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-25T16:00:18.007

如果函数不是长时间运行的，您可以使用可能比调用作业更快的替代方法。最大线程是 25，我只调用了这个函数 10 次，所以我希望我的总运行时间是 5 秒。您可以将 Measure-Command 包裹在 'results=' 语句周围以查看统计信息。

例子：

```
$ScriptBlock = {
    Param ( [int]$RunNumber )
    Start-Sleep -Seconds 5   
    Return $RunNumber
}
$runNumbers = @(1..10)
$MaxThreads = 25
$runspacePool = [RunspaceFactory ]::CreateRunspacePool(1, $MaxThreads)
$runspacePool.Open()
$pipeLines = foreach($num in $runNumbers){
    $pipeline = [powershell]::Create()
    $pipeline.RunspacePool = $runspacePool
    $pipeline.AddScript($ScriptBlock)    | Out-Null   
    $pipeline.AddArgument($num)  | Out-Null
    $pipeline | Add-Member -MemberType NoteProperty -Name 'AsyncResult' -Value $pipeline.BeginInvoke() -PassThru 
}
#obtain results as they come.
$results =  foreach($pipeline in $pipeLines){
    $pipeline.EndInvoke($pipeline.AsyncResult )
}
#cleanup code.
$pipeLines | % { $_.Dispose()}
$pipeLines = $null
if ( $runspacePool ) { $runspacePool.Close()}
#your results
$results 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-10-21T00:38:03.943

很抱歉每个人都错过了您的问题 - 我知道现在为时已晚，但是...

导致此错误是因为您在列表中缺少 $username 和 $password 之间的逗号。

您可以使用此代码段对其进行测试，该代码段是我根据之前的答案建模的：

```
$cmd = {
  param($a, $b, $c, $d)
}
$foo = "foo"
$bar = "bar"
start-job -scriptblock $cmd -ArgumentList "a", $foo, $bar, "gold" #added missing comma for this to work 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-30T14:14:22.730

我已经为您制作了一个非常通用的功能，并且与其他答案不同，您无需重新调整代码即可使其正常工作。
只需将您的函数作为参数传递给`Async`并通过管道输入，管道上的每个项目都将`scriptblock`异步并行运行，并在每个项目完成时发出它们。

对于你的问题，它看起来像这样

```
@(
    @{vmxFilePath='a';machineName='b';username='c';password='d';scriptTpath='e';scriptFile='f';uacDismissScript='g';snapshotName'h'},
    @{vmxFilePath='i';machineName='j';username='k';password='l';scriptTpath='m';scriptFile='n';uacDismissScript='o';snapshotName'p'}
    ...
) `
| Async `
    -Func { Process {
        Execute $_.vmxFilePath $_.machineName $_.username $_.password $_.scriptTpath $_.scriptFile $_.uacDismissScript $_.snapshotName
    } } 
```

最重要的是，我的函数不仅支持[`[powershell]`](https://docs.microsoft.com/en-us/dotnet/api/system.management.automation.powershell?view=powershellsdk-1.1.0)（@binarySalt 的答案）的自动构造，而且还支持[`Job`](https://docs.microsoft.com/en-us/dotnet/api/system.management.automation.job?view=powershellsdk-1.1.0)s（在 @Joost 中使用，但不要使用它们，因为它们比运行空间慢得多）和[`Task`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task-1?view=netframework-4.8)s 如果你正在使用其他人的代码已经产生它们（使用`-AsJob`标志，我在这个答案的底部解释）。

* * *

所以，这对这个问题的新访问者没有用，让我们做一些更可证明的事情，您可以在您的机器上运行并查看真实世界的结果。
以这个简单的代码为例，它只接收一些网站的测试数据并检查它们是否启动。

```
$in=TestData | ?{ $_.proto -eq 'tcp' }
$in `
| %{
    $WarningPreference='SilentlyContinue'
    $_ `
    | Add-Member `
        -PassThru `
        -MemberType NoteProperty `
        -Name result `
        -Value $(Test-NetConnection `
            -ComputerName $_.address `
            -Port $_.port `
            -InformationLevel Quiet
        )
} `
| Timer -name 'normal' `
| Format-Table 
```

[![在此处输入图像描述](../Images/711c21a5c6232cbb2252961f78fb7f7f.png)](https://i.stack.imgur.com/Q3piB.png)

这是测试数据，只是重复了几个相同的网站。
还有一个计时功能，看看它的性能如何。

```
Function TestData {
    1..20 | %{
        [PsCustomObject]@{proto='tcp'  ; address='www.w3.org'            ; port=443},
        [PsCustomObject]@{proto='https'; address='www.w3.org'            ; port=443},
        [PsCustomObject]@{proto='icmp' ; address='www.w3.org'            ;         },
        [PsCustomObject]@{proto='tcp'  ; address='developer.mozilla.org' ; port=443},
        [PsCustomObject]@{proto='https'; address='developer.mozilla.org' ; port=443},
        [PsCustomObject]@{proto='icmp' ; address='developer.mozilla.org' ;         },
        [PsCustomObject]@{proto='tcp'  ; address='help.dottoro.com'      ; port=80 },
        [PsCustomObject]@{proto='http' ; address='help.dottoro.com'      ; port=80 },
        [PsCustomObject]@{proto='icmp' ; address='help.dottoro.com'      ;         }
    }
}

Function Timer {
    Param ($name)
    Begin {
        $timer=[system.diagnostics.stopwatch]::StartNew()
    }
    Process { $_ }
    End {
        @(
            $name,
            ' '
            [math]::Floor($timer.Elapsed.TotalMinutes),
            ':',
            ($timer.Elapsed.Seconds -replace '^(.)$','0$1')
        ) -join '' | Out-Host
    }
} 
```

好的，15 秒，那么如果我们使用 ，这能快多少`Async`呢？
我们需要改变多少才能让它发挥作用？

```
$in=TestData | ?{ $_.proto -eq 'tcp' }
$in `
| Async `
    -Expected $in.Count `
    -Func { Process {
        $WarningPreference='SilentlyContinue'
        $_ `
        | Add-Member `
            -PassThru `
            -MemberType NoteProperty `
            -Name result `
            -Value $(Test-NetConnection `
                -ComputerName $_.address `
                -Port $_.port `
                -InformationLevel Quiet
            )
    } } `
| Timer -name 'async' `
| Format-Table 
```

它看起来基本相同..
好的，速度是多少？

[![在此处输入图像描述](../Images/0cd76d9c88937bd75ed47c647de06ccb.png)](https://i.stack.imgur.com/dr60F.png)

哇，减三分之二！
不仅如此，因为我们知道管道中有多少项目，我写了一些聪明的东西给你一个进度条和一个 ETA

[![在此处输入图像描述](../Images/b40e7c37dc6170f4fd1ee61a80ee706b.png)](https://i.stack.imgur.com/eF9qU.png)

[不相信我？有视频](https://i.imgur.com/TepGpHP.mp4)
或自己运行代码:)

```
#Requires -Version 5.1

#asynchronously run a pool of tasks,
#and aggregate the results back into a synchronous output
#without waiting to pool all input before seeing the first result
Function Async { Param(
    #maximum permitted simultaneous background tasks
    [int]$BatchSize=[int]$env:NUMBER_OF_PROCESSORS * 3,
    #the task that accepts input on a pipe to execute in the background
    [scriptblock]$Func,
    #because your task is in a subshell you wont have access to your outer scope,
    #you may pass them in here
    [array]$ArgumentList=@(),
    [System.Collections.IDictionary]$Parameters=@{},
    #the title of the progress bar
    [string]$Name='Processing',
    #your -Func may return a [Job] instead of being backgrounded itself,
    #if so it must return @(job;input;args)
    #optionally job may be a [scriptblock] to be backgrounded, or a [Task]
    [switch]$AsJob,
    #if you know the number of tasks ahead of time,
    #providing it here will have the progress bar show an ETA
    [int]$Expected,
    #outputs of this stream will be @(job;input) where job is the result
    [switch]$PassThru,
    #the time it takes to give up on one job type if there are others waiting
    [int]$Retry=5
)   
    Begin {
        $ArgumentList=[Array]::AsReadOnly($ArgumentList)
        $Parameters=$Parameters.GetEnumerator() `
        | &{
            Begin { $params=[ordered]@{} }
            Process { $params.Add($_.Key, $_.Value) }
            End { $params.AsReadOnly() }
        }
        #the currently running background tasks
        $running=@{}
        $counts=[PSCustomObject]@{
            completed=0;
            jobs=0;
            tasks=0;
            results=0;
        }
        #a lazy attempt at uniquely IDing this instance for Write-Progress
        $asyncId=Get-Random
        #a timer for Write-Progress
        $timer=[system.diagnostics.stopwatch]::StartNew()

        $pool=[RunspaceFactory]::CreateRunspacePool(1, $BatchSize)
        $pool.Open()

        #called whenever we want to update the progress bar
        Function Progress { Param($Reason)
            #calculate ETA if applicable
            $eta=-1
            $total=[math]::Max(1, $counts.completed + $running.Count)
            if ($Expected) {
                $total=[math]::Max($total, $Expected)
                if ($counts.completed) {
                    $eta=`
                        ($total - $counts.completed) * `
                        $timer.Elapsed.TotalSeconds / `
                        $counts.completed
                }
            }

            $Reason=Switch -regex ($Reason) {
                '^done$'   { "Finishing up the final $($running.Count) jobs." }
                '^(do|next)$' { "
                    Running
                     $($running.Count)
                     jobs concurrently.
                     $(@('Adding','Waiting to add')[!($Reason -eq 'do')])
                     job #
                    $($counts.completed + $running.Count + 1)
                " -replace '\r?\n\t*','' }
                Default { "
                    Running $($running.Count) jobs concurrently.
                     Emitting
                     $($counts.completed)
                    $(@{1='st';2='nd';3='rd'}[$counts.completed % 10] -replace '^$','th')
                     result.
                " -replace '\r?\n\t*','' }
            }

            Write-Progress `
                -Id $asyncId `
                -Activity $Name `
                -SecondsRemaining $eta `
                -Status ("
                    $($counts.completed)
                     jobs completed in
                     $([math]::Floor($timer.Elapsed.TotalMinutes))
                    :
                    $($timer.Elapsed.Seconds -replace '^(.)$','0$1')
                " -replace '\r?\n\t*','') `
                -CurrentOperation $Reason `
                -PercentComplete (100 * $counts.completed / $total)
        }

        #called with the [Job]'s that have completed 
        Filter Done {
            ++$counts.completed
            $out=$running.Item($_.Id)
            $running.Remove($_.Id)

            Progress

            $out.job=`
            if ($_ -is [System.Management.Automation.Job]) {
                --$counts.jobs
                $_ | Receive-Job
            }
            elseif ($_.pwsh) {
                --$counts.results
                try {
                    $_.pwsh.EndInvoke($_)
                }
                catch {
                    #[System.Management.Automation.MethodInvocationException]
                    $_.Exception.InnerException
                }
                finally {
                    $_.pwsh.Dispose()
                }
            }
            elseif ($_.IsFaulted) {
                --$counts.tasks
                #[System.AggregateException]
                $_.Exception.InnerException
            }
            else {
                --$counts.tasks
                $_.Result
            }

            if ($PassThru) {
                $out
            }
            else {
                $out.job
            }
        }

        $isJob={
            $_ -is [System.Management.Automation.Job]
        }
        $isTask={
            $_ -is [System.Threading.Tasks.Task]
        }
        $isResult={
            $_ -is [IAsyncResult]
        }
        $isFinished={
            $_.IsCompleted -or `
            (
                $_.JobStateInfo.State -gt 1 -and
                $_.JobStateInfo.State -ne 6 -and
                $_.JobStateInfo.State -ne 8
            )
        }
        $handle={
            $_.AsyncWaitHandle
        }

        Function Jobs { Param($Filter)
            $running.Values | %{ $_.job } | ? $Filter
        }

        #called whenever we need to wait for at least one task to completed
        #outputs the completed tasks
        Function Wait { Param([switch]$Finishing)
            #if we are at the max background tasks this instant
            while ($running.Count -ge $BatchSize) {
                Progress -Reason @('done','next')[!$Finishing]

                $value=@('jobs', 'tasks', 'results') `
                | %{ $counts.($_) } `
                | measure -Maximum -Sum
                $wait=if ($value.Maximum -lt $value.Sum) {
                    $Retry
                }
                else {
                    -1
                }

                $value=Switch -exact ($value.Maximum) {
                    $counts.jobs {
                        (Wait-Job `
                            -Any `
                            -Job (Jobs -Filter $isJob) `
                            -Timeout $wait
                        ).Count -lt 1
                        break
                    }
                    Default {
                        [System.Threading.WaitHandle]::WaitAny(
                            (Jobs -Filter $handle | % $handle),
                            [math]::Max($wait * 1000, -1)
                        ) -eq [System.Threading.WaitHandle]::WaitTimeout
                        break
                    }
                }

                (Jobs -Filter $isFinished) | Done
            }
        }
    }

    #accepts inputs to spawn a new background task with
    Process {
        Wait
        Progress -Reason 'do'

        $run=[PSCustomObject]@{
            input=$_;
            job=$Func;
            args=$ArgumentList;
            params=$Parameters;
        }
        if ($AsJob) {
            $run.job=$NULL
            Invoke-Command `
                -ScriptBlock $Func `
                -ArgumentList @($run) `
            | Out-Null
        }

        if ($run.job | % $isJob) {
            ++$counts.jobs
        }
        elseif ($run.job | % $isTask) {
            ++$counts.tasks
        }
        #if we weren't given a [Job] we need to spawn it for them
        elseif ($run.job -is [ScriptBlock]) {
            $pwsh=[powershell]::Create().AddScript($run.job)
            $run.args | %{ $pwsh.AddArgument($_) } | Out-Null
            $pwsh.RunspacePool=$pool
            $run.job=$pwsh.AddParameters($run.params).BeginInvoke(
                [System.Management.Automation.PSDataCollection[PSObject]]::new(
                    [PSObject[]]($run.input)
                )
            )
            $run.job | Add-Member `
                -MemberType NoteProperty `
                -Name pwsh `
                -Value $pwsh `
                -PassThru `
            | Add-Member `
                -MemberType NoteProperty `
                -Name Id `
                -Value $run.job.AsyncWaitHandle.Handle.ToString()
            ++$counts.results
        }
        else {
            throw "$($run.job.GetType()) needs to be a ScriptBlock"
        }

        $running.Add($run.job.Id, $run) | Out-Null
    }

    End {
        #wait for the remaining running processes
        $BatchSize=1
        Wait -Finishing
        Write-Progress -Id $asyncId -Activity $Name -Completed
        $pool.Close()
        $pool.Dispose()
    }
} 
```

* * *

所以你可能已经注意到上面的三件事，我提到`-AsJob`（使用`Job`s、`Task`s 和`scriptblock`s 的混合），测试数据中提到了未使用的协议，并且视频中有第三个测试。

这里是。除了进行基本的 tcp 测试，我们还将使用测试数据进行 http/s 检查和 icmp ping（idk，也许 https 失败，但如果是因为机器停机或只是服务，您想缩小范围）。

*   [`Test-Connection -AsJob`](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.management/test-connection?view=powershell-5.1#parameters)是一个返回 a`Job`并检查 ping 的 cmdlet。

*   [`WebRequest.GetResponseAsync()`](https://docs.microsoft.com/en-us/dotnet/api/system.net.webrequest.getresponseasync?view=netframework-4.8)它连接到一个网络资源，返回一个`Task`

*   最后[`Test-NetConnection`](https://docs.microsoft.com/en-us/powershell/module/nettcpip/test-netconnection?view=win10-ps)，和以前一样，在我们编写的同步脚本块中运行，它将为我们异步运行。

```
$in=TestData
$in `
| Async `
    -Expected $in.Count `
    -PassThru `
    -AsJob `
    <#this would be accessible as a named parameter if needed#>`
    -Parameters @{proxy=[System.Net.WebRequest]::GetSystemWebProxy()} `
    -Func { Param([parameter(Position=0)]$x)
        $x.job=Switch -regex ($x.input.proto) {
            '^icmp$' {
                Test-Connection `
                    -ComputerName $x.input.address `
                    -Count 1 `
                    -ThrottleLimit 1 `
                    -AsJob
            }

            '^tcp$' {
                $x.params=@{address=$x.input.address; port=$x.input.port}
                { Param($address, $port)
                    $WarningPreference='SilentlyContinue'
                    Test-NetConnection `
                        -ComputerName $address `
                        -Port $port `
                        -InformationLevel Quiet
                }
            }

            '^(http|https)$' {
                [Net.ServicePointManager]::SecurityProtocol=[Net.SecurityProtocolType]::Tls12
                $request=[System.Net.HttpWebRequest]::Create((@(
                    $x.input.proto,
                    '://',
                    $x.input.address,
                    ':',
                    $x.input.port
                ) -join ''))
                $request.Proxy=$NULL
                $request.Method='Get'
                $request.GetResponseAsync()
            }
        }
    } `
| %{
    $result=$_
    $result.input `
    | Add-Member `
        -PassThru `
        -MemberType NoteProperty `
        -Name result `
        -Value $(Switch -regex (@($result.input.proto, $result.job.message)[$result.job -is [Exception]]) {
            #[Win32_PingStatus]
            '^icmp$' { $result.job.StatusCode -eq 0 }

            #[bool]
            '^tcp$' { $result.job }

            #[System.Net.HttpWebResponse]
            '^(http|https)$' {
                $result.job.Close()
                Switch ($result.job.StatusCode.value__) {
                    { $_ -ge 200 -and $_ -lt 400 } { $True }
                    Default {$False}
                }
            }

            #[Exception]
            Default { $False }
        })
} `
| Timer -name 'async asjob' `
| Format-Table 
```

正如您可能已经看到的那样，这使原始代码的工作量增加了一倍以上，但仍然在大约一半的时间内完成了 8 秒。

[![在此处输入图像描述](../Images/71de3b8738e00796544381fa50ef0661.png)](https://i.stack.imgur.com/xUXqT.png)

# java - “MyLinkedList”方法中的 NPE

> ID：12766179
> 
> 赞同：0
> 
> 时间：2012-10-07T04:40:36.053
> 
> 标签：java, exception, nullpointerexception, doubly-linked-list

我在扩展 AbstractList 的 MyLinkedList 类中遇到了 NPE 的一些问题。我从这些构造函数开始：

私有 Node 类的构造函数：

```
public Node(T nodeData, Node<T> nodePrev, Node<T> nodeNext)
    {
        this.data = nodeData;
        this.prev = nodePrev;
        this.next = nodeNext;
    } 
```

MyLinkedList 类的构造函数

```
MyLinkedList()
{
    this.head = new Node<T>(null, null, null); 
    this.tail = new Node<T>(null, null, null);
    this.size = 0;
}

MyLinkedList(Node<T> head, Node<T> tail, int size)
{
    this.head = head;
    this.tail = tail;
    this.size = size;
} 
```

在这里我尝试使用这种方法在索引处返回节点：

```
private Node<T> getNth(int index)
{
    Node<T> temp;
    if(index < 0 || index > size)
        throw new IndexOutOfBoundsException();

    if(index < this.size() / 2)
    {
        temp = this.head;
        for(int i = 0; i < index; i++)
        {
            temp = temp.getNext();
        }
    }
    else
    {
        temp = this.tail;
        for(int i = this.size(); i > index; i--)
        {
            temp = temp.getPrev();
        }
    }
    return temp;
} 
```

我认为主要问题与将头部和尾部初始化为空有关，但我不确定这是否是问题，如果是，如何解决。有没有更好的方法来初始化这些节点以避免 NPE？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T05:24:39.933

您正在使用以下内容初始化列表的头部和尾部：

```
MyLinkedList()
{
    this.head = new Node<T>(null, null, null); 
    this.tail = new Node<T>(null, null, null);
    this.size = 0;
} 
```

这似乎是您的 NPE 的主要来源，因为您的迭代不进行任何类型的检查。特别是，您的方法将在边界条件下失败（因为您在尝试迭代之前已经检查了长度）。

通过添加一些检查，您可以避免这些异常：

```
private Node<T> getNth(int index)
{
    Node<T> temp = null; //Always try to initialize your variables if you're going
                         //to return them.
    if(index < 0 || index > size)
        throw new IndexOutOfBoundsException();

    if(index < this.size() / 2)
    {
        temp = this.head;
        for(int i = 0; i < index; i++)
        {
            if(temp.getNext() != null)
                 temp = temp.getNext();
            else
                 break;//Break the iteration if there is not a next node
        }
    }
    else
    {
        temp = this.tail;
        for(int i = this.size(); i > index; i--)
        {
            if(temp.getPrev() != null)
                temp = temp.getPrev();
            else
                break;
        }
    }
    return temp;
} 
```

如果需要，您可以抛出某种异常而不是中断迭代。

# c - 使用 GNU 汇编访问指向结构的 *next 指针

> ID：12766188
> 
> 赞同：1
> 
> 时间：2012-10-07T04:44:56.423
> 
> 标签：c, assembly, struct, gnu, gnu-assembler

我正在使用 GNU Assembly 尝试遍历 C 结构 Linked Listed 并从其中一个结构值中找到某个值。我想知道如何到达结构的 *next 指针以移动到下一个节点并检查值。下面是我编写的一些示例 C 代码以尝试和学习。

```
struct node{
   struct node *next;
   int id;
  };

struct node *root;

void functionToBuildLinkList(){
   //Code to malloc and link 4 nodes
 }

int main(int argc, char *argv[]){

   functionToBuildLinkList();

   int valueOne;

   rootPtr = rootPtr->next;
   valueOne = rootPtr->id;
   printf("The valueOne is: %i\n", valueOne);

   return 0;
} 
```

为了帮助自己弄清楚，我查看了 main 的 objdump。

```
mov    0x804a024,%eax   //Moving the rootPtr->next address into eax
mov    0x4(%eax),%eax   //Offset 4 bytes for id
mov    %eax,0x804a024   //Compiler nonsense?
mov    0x804a024,%eax   //Compiler nonsense?
mov    (%eax),%eax      //Moving the contents of EAX into EAX or more nonsense?
mov    %eax,0x1c(%esp)  //Moving id into the stack
mov    $0x804861c,%eax  //What address is being moved into EAX?
mov    0x1c(%esp),%edx  //Moving id into edx
mov    %edx,0x4(%esp)   //Moving edx (id) into the stack
mov    %eax,(%esp)      //What's the address in EAX? The top of stack - ESP?
call   8048340 <printf@plt>
mov    $0x0,%eax        //Returning O 
```

我有点被甩了，因为看起来编译器正在提供硬编码的内存地址。我怎么知道下一个内存地址或某些节点在哪里？当我通过在堆上分配内存来创建列表时，它是按顺序排列的，所以我可以尝试以这种方式计算它吗？我将如何通过列表工作？同样，当我将内存地址获取到结构的开头时，*next 指针是第一个成员变量，它不会有偏移（访问它）吗？任何帮助表示赞赏。

感谢大家的帮助！因此，使用示例代码中的全局指针根迭代列表将是：

```
movl root, %eax   //Move root into EAX
movl (%eax), %eax //eax = eax->next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T07:19:08.637

使用了两种不同的寻址模式：

```
mov    0x804a024,%eax   //Moving the rootPtr (content) into eax
mov    [%eax], %ebx     //access tmp=rootPtr->next

add    0x4, %ebx        // increment tmp by 4 to get the address of &tmp->id

mov    $0x804861c,%eax  // Moving an address to eax 
```

第一行通常写成

```
mov.l  [0x804a024], %eax 
```

第一个“废话”对应左边的赋值

```
rootPtr = rootPtr->next; 
```

而下一行可以优化掉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T07:57:52.393

让我们正确地注释这个......

```
mov    0x804a024,%eax   // eax = rootPtr (global variable)
mov    0x4(%eax),%eax   // eax = eax->next (offset 4)
mov    %eax,0x804a024   // rootPtr = eax

mov    0x804a024,%eax   // eax = rootPtr
mov    (%eax),%eax      // eax = eax->id (offset 0)
mov    %eax,0x1c(%esp)  // valueOne = eax (local variable, on stack)
mov    $0x804861c,%eax  // eax = "The valueOne is: %i\n" (static string)
mov    0x1c(%esp),%edx  // edx = valueOne
mov    %edx,0x4(%esp)   // put edx on argument stack (position 1, offset 4)
mov    %eax,(%esp)      // put eax on argument stack (position 0, offset 0)
call   8048340 <printf@plt> // call printf(eax, edx) (= printf(string, valueOne))
mov    $0x0,%eax        // return 0 
```

这个例子中有很多无用的动作。如果您在轻量级优化模式下编译（例如`-O`），您通常可以获得更简单的代码。在高层次上`-O3`，由于棘手的优化，代码可能会变得非常难以理解。

请注意，您编写的汇编代码不会使用“硬编码”地址；如果需要引用全局，就在上面打个标签，通过标签来引用。请注意，`->next`例如，访问只是一个访问问题`0x4(%eax)`（假设节点指针在 中`eax`）；这是因为`next`指针距离结构的开头有 4 个字节。

# c - 在函数调用期间结构内的联合内的结构发生变化

> ID：12766190
> 
> 赞同：1
> 
> 时间：2012-10-07T04:45:14.023
> 
> 标签：c, multithreading, function, struct

我正在用 c 语言开发一个实现信号量的多线程生产者-消费者程序。每个缓冲区结构都有两个通用信号量——一个用于空缓冲区，一个用于满缓冲区。但是，当程序进入 readInput 函数时，这两个信号量的值会变为随机值。线程结构内的信号量很好，但是线程结构内的 IO 联合内的缓冲区结构内的信号量由于某种原因发生了变化。知道为什么会这样吗？

```
#include "st.h"
#include "semaphore.h"
#include "buffer.h"

/*Definitions here*/
//Input location.
#define DEFAULT_IN stdin
//Output location.
#define DEFAULT_OUT stdout
//Line width
#define LINE_SIZE 80
#define SLEEP_TIME 333333

//Shorthand for structure components
#define INPUT thread->in
#define MUTEX thread->mutex
#define OUTPUT thread->out

/*Global variables here*/

//The input/output can be a stream or a buffer.
typedef union
{
    buffer *bufferIO;   //Buffer to read from/write to.
    FILE *stream;       //An I/O stream.
} IO;

//Each thread has an input, a semaphore, and an output.
typedef struct
{
        IO in;          //Either an input stream or a buffer to read.
        semaphore *mutex;   //Pointer to a binary semaphore.
        IO out;         //Either an output stream or a buffer to write.
} Thread;

/*Function prototypes here*/
void *readInput(void *s);
void *processLines(void *s);
void *processAsterisks(void *s);
void *writeOutput(void *s);

int main (int argc, char const *argv[])  //The main function  
{
    st_init();

    /*Binary semaphore*/
    semaphore mutex;        //Binary semaphore for mutual exclusion.
    createSem(&mutex, 1);

    printf("Beginning...\n");
    /*The three buffers between threads*/
    buffer B1, B2, B3;
    createBuf(&B1);
    createBuf(&B2);
    createBuf(&B3);

    /*The 5 data locations*/
    IO input, buffer1, buffer2, buffer3, output;    //stdin, 3 buffers, stdout

    /*Set the unions*/
    input.stream = DEFAULT_IN;  //Input stream
    buffer1.bufferIO = &B1;     //Contains raw input
    buffer2.bufferIO = &B2;     //Newlines have become spaces
    buffer3.bufferIO = &B3;     //** has become ^
    output.stream = DEFAULT_OUT;    //Output stream, 80 at a time

    /*Initialize the threads*/
        Thread input_thread = {input, &mutex, buffer1};         //Recieve input
        Thread proc1_thread = {buffer1, &mutex, buffer2};       //Returns to spaces
        Thread proc2_thread = {buffer2, &mutex, buffer3};       //** to ^
        Thread output_thread = {buffer3, &mutex, output};       //Output 80 characters and a newline.

    printf("%i\n", input_thread.out.bufferIO->emptyBuffers->value);
    /*Create the actual threads*/
    if(st_thread_create(readInput, &input_thread, 0, 0) == NULL)
    {
        perror("st_thread_create for input thread failure");
        exit(1);
    }
    printf("%i\n", input_thread.out.bufferIO->emptyBuffers->value);
    if(st_thread_create(processLines, &proc1_thread, 0, 0) == NULL)
    {
        perror("st_thread_create for line thread failure");
        exit(1);
    }
    if(st_thread_create(processAsterisks, &proc2_thread, 0, 0) == NULL)
    {
        perror("st_thread_create for asterisk thread failure");
        exit(1);
    }
    if(st_thread_create(writeOutput, &output_thread, 0, 0) == NULL)
    {
        perror("st_thread_create for output thread failure");
        exit(1);
    }

    st_thread_exit(NULL);
    return 0;
}
/*Function definitions here*/
void *readInput(void *s)
{
    Thread *thread = s;
    char c;                 //An individual character.

    printf("Type some input.\n");
    do
    {
        down(MUTEX);
        c = getc(INPUT.stream);     //Consume a character from input.
    printf("%i\n", OUTPUT.bufferIO->emptyBuffers->value);
        deposit(OUTPUT.bufferIO, c);    //Produce a character.
        up(MUTEX);
        st_usleep(SLEEP_TIME);      //Wait.
    }
    while(c != EOF);            //Do-while in order to pass on the EOF as an exit flag.

    //EOF reached - exit thread.
    //assert(c == EOF);

    printf("\nDone reading.");
    st_thread_exit(NULL);
}... 
```

用gdb查看它后，我发现了这个：

```
Hardware watchpoint 10: (*(*input_thread.out.bufferIO).emptyBuffers).value
(gdb) c
Continuing.
Hardware watchpoint 10: (*(*input_thread.out.bufferIO).emptyBuffers).value

Old value = 80
New value = 4216725
0x000000395221467c in _dl_runtime_resolve () from /lib64/ld-linux-x86-64.so.2 
```

不确定这个 _dl_runtime_resolve 是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:24:58.533

semaphore and buffers are created as stack variables in main thread so when the main thread exits the address pointing to semaphore and buffer are invalid and the behavior is unpredictable. Make the proper design and give proper scope to the variables, for time being make all the variables as global. Make the following things in the above code as global

1.  semaphore mutex; //Binary semaphore for mutual exclusion.

    AND

2.  IO input, buffer1, buffer2, buffer3, output; //stdin, 3 buffers, stdout

recompile and execute

# spring - 如何在spring中使用jqgrid将数据从jsp页面发送到控制器

> ID：12766191
> 
> 赞同：0
> 
> 时间：2012-10-07T04:45:24.787
> 
> 标签：spring, jqgrid

```
var pid = $('#byId').val();

jQuery("#patient").jqGrid({
    mtype: 'GET',
    url : "totalPatientList.html",
    postData :{pid:pid},
    datatype : "json",
    colNames : [ 'Patient Id', 'Name', 'BirthDate', 'Address','City','Mobile' ],
    colModel : [ {
        name : 'patientId',
        index : 'patientId',
        width : 55
    }, {
        name : 'name',
        index : 'name',
        width : 200
    }, {
        name : 'birthdate',
        index : 'birthdate',
        width : 100,
        editable : true
    }, {
        name : 'address',
        index : 'address',
        editable : true,
        width : 80
    }, {
        name : 'city',
        index : 'city',
        editable : true,
        width : 80
    }, {
        name : 'mobile',
        index : 'mobile',
        editable : true,
        width : 80
    } ],
    rowNum : 10,
    rowList : [ 5, 10, 30 ],
    pager : '#pager',
    sortname : 'id',
    viewrecords : true,
    sortorder : "desc",
    caption : "Search Patient's List",
    width : 800,
    cellEdit : true,
}); 
```

我有一个类似上面的代码。

我想`pid`从这个 JSP 页面发送到控制器。我得到了`pid`，但是当我重新加载我的网页时。当我单击按钮时，我想要它而不重新加载页面。

我怎样才能做到这一点？

请帮助我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T09:55:45.020

您应该使用以下“函数”样式`postData`：

```
url: "totalPatientList.html",
postData: {
    pid: function () {
        return $('#byId').val();
    }
} 
```

在这种情况下，`pid`将在对服务器的每个请求上重新评估参数的值。有关更多详细信息，请参阅[答案](https://stackoverflow.com/a/2928819/315935)。`postData`通过在对象中包含多个方法，您可以将多个参数发送到服务器。

# javascript - JavaScript：仅在外部 JavaScript 文件中处理 onclick、onmouseover 和 onmouseout 函数

> ID：12766193
> 
> 赞同：0
> 
> 时间：2012-10-07T04:45:51.043
> 
> 标签：javascript, html, onclick, onmouseover, onmouseout

所以我必须在各种情况下显示普通的 ole 工具提示。我必须处理使用 onclick 事件取消 URL 链接的默认行为，在 mouseover 事件上显示工具提示并在 mouseout 事件上隐藏工具提示。到目前为止，我将包含我所有的 HTML、CSS 和 JavaScript 代码。这只能在外部 JavaScript 文件中完成（即根本无法更改 HTML 或 CSS）。我也不能使用 innerHTML（必须使用 JavaScript 最佳实践）。我试图尽我所能编写代码（我对 JavaScript 真的很陌生）。目前这些功能都不起作用。我必须有 3 个函数，并且它们在 Javascript 中以正确的方式（我认为）布局。好的，我的唠叨够多了，下面是代码：

HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tool Tips</title>
<link href="css.css" rel="stylesheet" type="text/css" />
<script src="js.js" type="text/javascript"></script>
</head>

<body>
<h1>Tool Tips
</h1>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.

<a href="http://en.wikipedia.org/wiki/Randy_Rhoads" class="tip">Randy Rhoads
<span> Randy Rhoads blah blah blah</span></a> 
ut augue risus.
<a href="http://en.wikipedia.org/wiki/Ty_Tabor" class="tip">Ty Tabor
<span> Ty Tabor blah blah blah</span></a> 
cras pharetra. 
<a href="http://en.wikipedia.org/wiki/Andy_Timmons" class="tip">Andy Timmons
<span> Andy Timmons blah blah blah</span></a> proin mattis, s auctor. 
<a href="http://en.wikipedia.org/wiki/Joe_Bonamassa" class="tip">Joe Bonamassa
<span> Joe Bonamassa blah blah blah</span></a> Duis ac est quam.</p>
</body>
</html> 
```

CSS

```
/* styles the anchors that have tooltips*/
.tip {
    font-weight: bold;
    border-bottom: 1px dotted #333;
    cursor: help;
    position: relative;
    color: #600;
}

/* hides all tooltips by default on page load */
.tip span {
    display: none;
/* none of these matter now because the tooltips are hidden */
/* when JS unhides the tooltips, these will already be in place */
    position: absolute;
    top: 1.5em;
    left: 0;
    background: #fff;
    border: 1px solid #333;
    width: 100px;
    padding: 5px;
    color: #333;
}

/* applied by JS to show tips */
.tip span.showTip {
    display: block;
}

/* applied by JS to hide tips */
.tip span.hideTip {
    display: none;
} 
```

JavaScript

```
// *** Use JavaScript best practices ***
// *** This means that the HTML and the CSS are not to be edited at all ***
// *** No <script> tags are to be added to the HTML ***
// *** No inline JavaScript is to be added to the HTML ***
// *** The CSS is to be left alone, no changes are allowed ***

// Step 1: Create the ONLOAD event so that the function prepareTips() runs once the page has finished loading
window.onload = prepareTips;

// Step 2: Declare the prepareTips() function
function prepareTips() {

    // Step 3: Scan the document looking for all anchor tags
    var arrAnchors = document.getElementsByTagName('a');

    // Step 4: Handle browsers that DON'T SUPPORT EITHER CSS OR JAVASCRIPT. 
    // *** If this is the case, the tooltips are hidden and the links open to the Wikipedia pages ***
    if(!document.getElementsByTagName) return false;

    //*** If the browser supports both CSS and JavaScript, the prepareTips() function does the following: ***

    // Step 5: Loop thru all the anchor tags and assigning the events to be handled for all of the links/tooltips
    for (var i=0; i<arrAnchors.length; i++) {

        // Step 6: Bind the showTip() function to the <span> tags' MOUSEOVER event
         arrAnchors.onmouseover = showTip;

        // Step 7: Bind the hideTip() function to the <span> tags' MOUSEOUT event
         arrAnchors.onmouseout = hideTip;

        // Step 8: Bind the showTip() function to the onclick event
        arrAnchors.onclick = showTip;
     }          
}

// *** NOTE: Tooltip triggers are anchor tags and contain the class "tip" ***
// *** NOTE: The .tip class is applied without the use of JavaScript ***
// *** NOTE: The .tip span class formats the tooltip spans but hides them by default.  This is applied without JavaScript ***

// Step 9: Create a separate function called showtip()
function showTip() {

    // Step 10: When an onclick event for a link happens, cancel the default behavior of the link.
    // *** The browser does not go to the URL value contained in the HREF ***
    // *** So the links do nothing when clicked (i.e. return false) instead of going to the Wikipedia page of the guitar player ***
      var arrLinks = document.getElementsByTagName('a');

          for (var i=0; i<arrLinks.length; i++) {
            arrLinks[i].onlick = function() {
            return false;
        }

    // Step 11: The showtip() function changes the anchor class to ".tip span.showTip" located in the CSS file 
    // *** The .tip span.showTip class in the CSS file simply overrides the display property, showing the tooltip span as a block element ***
    // *** This is to be applied using JavaScript (no other properties of the .tip span.showTip will be changed) ***
          arrLinks[i].className === 'showTip';

    // Step 12: Show the associated tooltip when an onmouseover event for a link occurs
    // *** The tooltip that is displayed is the text between the <span>Tooltip text here</span> tags ***
    // *** For example: The tooltip to be displayed when the mouse is hovered over the Randy Rhoads link is: "Randy Rhoads blah blah blah" ***
    // *** The <span> is a child of the anchor (<a>) tags ***
    // *** This means they can be accessed in CSS with a descendant selector .tip span ***
          var tooltip = arrLinks[i].setAttribute('title', arrLinks[i].childName['span'].nodeValue);
     }
}

// Step 13: Create a separate function called hideTip()
function hideTip() {

    // Step 14: The showtip() function changes the anchor class to ".tip span.hideTip" located in the CSS file 
    // *** The .tip span.hideTip class in the CSS file sets the display property back to none, hiding the tooltip ***
      var hideTips = document.getElementsByTagName('a');

    // Step 15: Hide the associated tooltip when the mouseout event for the links occurs.
    // *** The <span> is a child of the anchor (<a>) tags ***
    // *** This means they can be accessed in CSS with a descendant selector .tip span ***
      hideTips[i].className === 'hideTip';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T05:37:22.613

快速浏览一下就会发现你的问题是，`return false`当浏览器不能使用 JS/CSS`return true`时，你却没有。这会导致您遇到的问题。我猜你应该`return false`在它不能处理 JS/CSS 时做一些事情（而不仅仅是），但你试图作为占位符返回。

旁注：如果浏览器不支持 JS ......它应该如何执行 JS 来确定它是否支持它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T05:40:46.417

我假设您正在谈论将文本从跨度文本带到工具提示上，并且您没有将文本放入跨度以显示在锚标记的工具提示上。您没有将 span 文本放入标题栏中，甚至没有在 onload 函数中正确提及函数。您将对以下代码的小错误和更正有更好的了解。注释您的 js 代码并放置此 js 代码。

```
// *** Use JavaScript best practices ***
// *** This means that the HTML and the CSS are not to be edited at all ***
// *** No <script> tags are to be added to the HTML ***
// *** No inline JavaScript is to be added to the HTML ***
// *** The CSS is to be left alone, no changes are allowed ***

// Step 1: Create the ONLOAD event so that the function prepareTips() runs once the page has finished loading
window.onload = prepareTips;

// Step 2: Declare the prepareTips() function
function prepareTips() {

    // Step 3: Scan the document looking for all anchor tags
    var arrAnchors = document.getElementsByTagName('a');

    // Step 4: Handle browsers that DON'T SUPPORT EITHER CSS OR JAVASCRIPT. 
    // *** If this is the case, the tooltips are hidden and the links open to the Wikipedia pages ***
    if(!document.getElementsByTagName) return false;

    //*** If the browser supports both CSS and JavaScript, the prepareTips() function does the following: ***

    // Step 5: Loop thru all the anchor tags and assigning the events to be handled for all of the links/tooltips
    for (var i=0; i<arrAnchors.length; i++) {

        // Step 6: Bind the showTip() function to the <span> tags' MOUSEOVER event
         arrAnchors.onmouseover = showTip();

        // Step 7: Bind the hideTip() function to the <span> tags' MOUSEOUT event
         arrAnchors.onmouseout = hideTip();

        // Step 8: Bind the showTip() function to the onclick event
        arrAnchors.onclick = showTip();
     }          
}

// *** NOTE: Tooltip triggers are anchor tags and contain the class "tip" ***
// *** NOTE: The .tip class is applied without the use of JavaScript ***
// *** NOTE: The .tip span class formats the tooltip spans but hides them by default.  This is applied without JavaScript ***

// Step 9: Create a separate function called showtip()
function showTip() {

    // Step 10: When an onclick event for a link happens, cancel the default behavior of the link.
    // *** The browser does not go to the URL value contained in the HREF ***
    // *** So the links do nothing when clicked (i.e. return false) instead of going to the Wikipedia page of the guitar player ***
      var arrLinks = document.getElementsByTagName('a');

          for (var i=0; i<arrLinks.length; i++) {
            arrLinks[i].onlick = function() {
            return false;
        }

    // Step 11: The showtip() function changes the anchor class to ".tip span.showTip" located in the CSS file 
    // *** The .tip span.showTip class in the CSS file simply overrides the display property, showing the tooltip span as a block element ***
    // *** This is to be applied using JavaScript (no other properties of the .tip span.showTip will be changed) ***
          arrLinks[i].className === 'showTip';

    // Step 12: Show the associated tooltip when an onmouseover event for a link occurs
    // *** The tooltip that is displayed is the text between the <span>Tooltip text here</span> tags ***
    // *** For example: The tooltip to be displayed when the mouse is hovered over the Randy Rhoads link is: "Randy Rhoads blah blah blah" ***
    // *** The <span> is a child of the anchor (<a>) tags ***
    // *** This means they can be accessed in CSS with a descendant selector .tip span ***
          arrLinks[i].setAttribute('title', arrLinks[i].childNodes[1].innerHTML);
     }
}

// Step 13: Create a separate function called hideTip()
function hideTip() {

    // Step 14: The showtip() function changes the anchor class to ".tip span.hideTip" located in the CSS file 
    // *** The .tip span.hideTip class in the CSS file sets the display property back to none, hiding the tooltip ***
      var hideTips = document.getElementsByTagName('a');

    // Step 15: Hide the associated tooltip when the mouseout event for the links occurs.
    // *** The <span> is a child of the anchor (<a>) tags ***
    // *** This means they can be accessed in CSS with a descendant selector .tip span ***
      hideTips[i].className === 'hideTip'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T15:08:00.150

你为什么使用“css”和“javascript”来显示工具提示和隐藏工具提示。这是在 html 中的 url 上显示工具提示的非常简单的方法。只需更改我在下面编写的代码中的几行。您不需要使用 css 和 javascript。

```
<a href="http://en.wikipedia.org/wiki/Randy_Rhoads" title="go to randy rhoad wikipedia  page">Randy Rhoads
<a href="http://en.wikipedia.org/wiki/Ty_Tabor" title="go to Tv Tabor wikipedia page">Ty Tabor
<a href="http://en.wikipedia.org/wiki/Andy_Timmons" title="go to Andy Timmons wikipedia page">Andy Timmons
<a href="http://en.wikipedia.org/wiki/Joe_Bonamassa" title="go to Joe Bonamassa wikipedia page">Joe Bonamassa 
```

# linux - 如何编写 Linux 内核模块？

> ID：12766203
> 
> 赞同：6
> 
> 时间：2012-10-07T04:51:43.787
> 
> 标签：linux, linux-kernel, linux-device-driver

我有几年的 c 编程经验。现在我决定致力于 Linux 内核模块开发。但是，我什至无法开始。我已经在 ubuntu 中编译了这段代码。

```
#include <linux/module.h>
int init_module(void){ printk("<1> hellp"); return 0;}
void cleanup_module(void){ printk("<1> bye");} 
```

但是，insmod 不起作用，错误消息是“无效的模块格式”。谷歌搜索后，我认为版本兼容性可能存在问题。并且没有什么好的方法可以解决。那么一些真正的内核模块开发人员可以给我一些建议吗？在开始学习之前我应该​​准备什么环境？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-07T05:04:38.240

您缺少`module_init()`and`module_exit()`宏和一些关键的`#defines`. 我们还需要更多信息，例如您的 make/gcc 选项。它可能会报告“无效的模块格式”，因为当您的内核是 64 位时您正在编译 32 位，因此请确保您使用 -64 编译和链接标志。

内核模块的一个很棒的 hello world 教程位于：http: [//archive.is/KNkEE](http://archive.is/KNkEE)（文章的[原始链接](http://blog.markloiseau.com/2012/04/hello-world-loadable-kernel-module-tutorial/)已损坏）。

欢迎编写内核模块。与编写 Windows 驱动程序相比，它们很有趣（我都做过）。linux 内核模块接口使用起来要简单得多，并且您可以委托许多基本驱动程序来更快地完成工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-29T17:11:45.347

一个关于 Linux 内核、模块编程和为嵌入式设备编写简单设备驱动程序的完整而简化的博客。

[xploredevicedrivers.blogspot.in](http://xploredevicedrivers.blogspot.in)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-01T19:34:28.313

我建议开始阅读“ [Linux 内核模块编程指南](http://www.tldp.org/LDP/lkmpg/2.6/html/index.html)”

即使它基于相当老的内核版本 (2.6)，即使在今天，它仍然值得您花时间阅读。

# java - Java 正则表达式与句点部分匹配

> ID：12766205
> 
> 赞同：1
> 
> 时间：2012-10-07T04:52:21.703
> 
> 标签：java, regex, find, matcher

在 Java 中，我使用 Pattern 和 Matcher 在一组字符串中查找“.A（数字）”的所有实例以检索数字。

我遇到了问题，因为文件中的单词之一是“PAMX”并且数字返回 0。它不会遍历文件的其余部分。我尝试过使用许多不同的正则表达式，但我无法超越“PAMX”的出现并进入下一个“.A（数字）”

```
for (int i = 0; i < input.size(); i++) {

Pattern pattern = Pattern.compile("\\.A\\s\\d+");
Matcher matcher = pattern.matcher(input.get(i));

while (matcherDocId.find())
    {   
            String matchFound = matcher.group().toString();
            int numMatch = 0;
            String[] tokens = matchFound.split(" ");
            numMatch = Integer.parseInt(tokens[1]); 
            System.out.println("The number is: " + numMatch);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T05:30:28.880

为您提供的简短示例：

```
Pattern pattern = Pattern.compile("\\.A\\s(\\d+)"); // grouping number
Matcher matcher = pattern.matcher(".A 1 .A 2 .A 3 .A 4 *text* .A5"); // full input string
while (matcher.find()) {
    int n = Integer.valueOf(matcher.group(1)); // getting captured number - group #1
    System.out.println(n);
} 
```

# php - 将数据从 Android 发布和解析到 php

> ID：12766207
> 
> 赞同：2
> 
> 时间：2012-10-07T04:52:38.873
> 
> 标签：php, android, sql-server, jakarta-ee

我在我的 android 程序中将一些不同的数据收集到三个不同的变量中，这些变量具有不同的数据类型。

现在我需要将这些数据发布到服务器上，在那里我应该能够解析这些数据并将它们存储在我的本地数据库中。我将 php 用于我的服务器端脚本。

**有人可以给我一个例子如何使用httppost做到这一点吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T05:29:42.813

向服务器发送请求并获取响应 json 是最好的实现方式。

这是将 httppost json 请求发送到服务器并处理 json 响应的一个很好的示例。

[http://www.codeproject.com/Articles/267023/Send-and-receive-json-between-android-and-php](http://www.codeproject.com/Articles/267023/Send-and-receive-json-between-android-and-php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T05:05:07.133

在 Android 端，您不应该[在主 UI 线程中进行网络操作](https://stackoverflow.com/a/9729941/1306012)。

安卓端：

```
public class SendPOSTRequest extends AsyncTask<List<BasicNameValuePair>, Void, String>
{
    private DefaultHttpClient _httpClient;
    private String _url = "";

    public SendPOSTRequest(String url){
        _url = url;
        _httpClient = new DefaultHttpClient();
    }

    @Override
    protected String doInBackground(List<BasicNameValuePair>... postParameters) {
        String responseString = "";

        try
        {
            HttpPost postRequest = new HttpPost(_url);
            postRequest.setEntity(new UrlEncodedFormEntity(postParameters[0]));

            HttpResponse response = _httpClient.execute(postRequest);
            StatusLine statusLine = response.getStatusLine();

            // check if post was successfull
            if (statusLine.getStatusCode() == HttpStatus.SC_OK) {
                ByteArrayOutputStream out = new ByteArrayOutputStream();

                HttpEntity entity = response.getEntity();
                entity.writeTo(out);
                out.close();
                responseString = out.toString();

                if (entity != null) {
                    entity.consumeContent();
                }
            }
        }
        catch(Exception ex)
        {
            ex.getMessage();
        }

        return responseString;
    }
} 
```

在您的活动中，您可以像这样使用“SendPostRequest”类： SendPOSTRequest webPOSTRequest = new SendPOSTRequest(yourWebURLWithYourPHPFunction); 列出 postParams = new ArrayList(); postParams.add(new BasicNameValuePair("Name", "viperbone")); 字符串结果 = webGetRequestUsersEntries.execute(postParams).get();

在服务器端，我将 php-script 与 PDO（PHP 数据对象）一起使用，因为[它有助于防止 sql injection](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)。

服务器端 PHP 脚本：

```
try
{
    $DBH = new PDO("mysql:host=yourWebURL;dbname=yourDBName", username, password);

    # substr(str,pos,len) - Make sure POST-Data aren't too long (255 chars max) because my database-field is 255 chars
    $NameClear = substr($_POST['Name'], 0, 255);

    # named placeholders 
    $STH = $DBH->prepare("INSERT INTO `yourTableName` (Name) VALUES ( :name )");
    $STH->bindParam(':name', $NameClear);

    # setting the fetch mode
    $STH->setFetchMode(PDO::FETCH_ASSOC);
    $STH->execute(); 

    # I return 1 for a successful insertion 
    echo "1";

    $DBH = null;
}  
catch(PDOException $e) {
} 
```

我希望它有帮助...

# javascript - 我可以用 Javascript 中的字段创建一个对象并让 VS2012 在智能感知中显示这些吗？

> ID：12766209
> 
> 赞同：0
> 
> 时间：2012-10-07T04:52:49.353
> 
> 标签：javascript, visual-studio-2012, intellisense

我在我的脚本中声明以下内容

```
function dialog($link) {
    var modal = {};
    ...

    function createModal() {
        modal.$modal = $.modal({
            title: title,
            closeButton: true,
            content: content,
            onClose: onModalClose,
            minWidth: 300,
            maxHeight: false,
            width: false,
            resizeOnLoad: true
        });
        modal.$form = $modal.find('.form');
        modal.$message = $modal.find('.message');
        modal.$submits = $modal.find('.submit-button');
        modal.href = $form.attr('data-href');
    } 
```

这里没有错误检查，所以如果我愿意，我可以继续编写以下内容：

```
var a = modal.$formmmmmmmm; 
```

我习惯于在 C# 中声明一个类并定义所有内容。有什么方法可以在 Javascript 中做到这一点吗？我听说 VS2012 使用 javascript 好多了。有没有人在使用它，它会使用我上面的代码给我智能感知，还是我需要以不同的方式做事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T09:28:03.220

您至少需要初始化对象的属性，并且为了使用智能感知获取更多信息，您需要创建适当的 XML 注释：

```
/// <var>object description</var>
var modal = {
    /// <field type='jQuery'>$modal description</field>
    $modal: null,
    /// <field type='jQuery'>$form description</field>
    $form: null,
    /// <field type='jQuery'>$message description</field>
    $message: null,
    /// <field type='jQuery'>$submits description</field>
    $submits: null,
    /// <field type='String'>href description</field>
    href: null
}; 
```

有关进一步的解释和示例，请参阅[http://msdn.microsoft.com/en-us/library/bb385682.aspx](http://msdn.microsoft.com/en-us/library/bb385682.aspx)。

如果你喜欢冒险，看看[Typescript](http://www.typescriptlang.org/)，它让 JavaScript 开发*最终*变得舒适。

# ruby-on-rails - 如何更改 mongoid.yml 中的数据库名称

> ID：12766212
> 
> 赞同：0
> 
> 时间：2012-10-07T04:53:33.210
> 
> 标签：ruby-on-rails, mongodb, mongoid

是否有任何查询可以更改 mongoid.yml 中的数据库名称？我想制作一个用户可以自己输入数据库名称的系统，用户给出的数据库名称应该是数据库的名称。默认情况下，mongoid 使用 project(_development) 的名称作为 dbs 名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T10:57:24.873

您可以制作用户在设置应用程序时需要运行的生成器， [创建和自定义生成器](http://guides.rubyonrails.org/generators.html)。看看 Mongoid 如何让你运行一个生成器来生成`mongoid.yml` [http://mongoid.org/en/mongoid/docs/installation.html#configuration](http://mongoid.org/en/mongoid/docs/installation.html#configuration)。

所以不是运行那个生成器，它可能是这样的

`rails g app_name:config`

# android - 通过 POST 在 Android 中上传文件时出错

> ID：12766213
> 
> 赞同：0
> 
> 时间：2012-10-07T04:53:38.613
> 
> 标签：android, post, http-post

我编写了一个 Android 程序，通过 HTTP POST 将文件上传到服务器。

早些时候它工作正常，但我不知道为什么它现在不工作。我正在用我的 Android 设备对此进行测试。我刚刚检查过它在模拟器上工作正常。

当我在浏览器中打开该链接时，它仍然可以正常工作并正确打开。

有没有人可以告诉我可能是什么问题？？？

我收到此错误：（没有与主机名关联的地址）

```
 10-07 04:28:14.410: I/System.out(1280): executing request POST http:////path/to/my/server//api/index.php/match HTTP/1.1
10-07 04:28:14.450: W/System.err(1280): java.net.UnknownHostException: Unable to resolve host "//path/to/my/server/": No address associated with hostname 
```

这是我的代码...

```
private class UploadFilesTask extends AsyncTask<File, Void, Void> {
        @Override
        protected Void doInBackground(File... arg0) {

             HttpClient httpclient = new DefaultHttpClient();
                httpclient.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);
enter code here
                    // I have not shown my REAL server address due so some restriction, So assume below URL is correct

                HttpPost httppost = new HttpPost("http://path/to/my/server/"); //Assume path is correct
                //File file = new File("/mnt/sdcard/DCIM/Camera/01.jpg");

                MultipartEntity mpEntity = new MultipartEntity();
                ContentBody cbFile = new FileBody(arg0[0], "image/jpeg");
                mpEntity.addPart("userfile", cbFile);

                httppost.setEntity(mpEntity);
                System.out.println("executing request " + httppost.getRequestLine());
                HttpResponse response = null;
                try {
                    response = httpclient.execute(httppost);
                } catch (ClientProtocolException e) {
                    // TODO Auto-generated catch block

                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block

                    e.printStackTrace();
                }
                HttpEntity resEntity = response.getEntity();

                System.out.println(response.getStatusLine());
                if (resEntity != null) {
                  try {
                      //audioFilename = EntityUtils.toString(resEntity);
                      System.out.println(EntityUtils.toString(resEntity));
                } catch (ParseException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                }
                if (resEntity != null) {
                  try {
                    resEntity.consumeContent();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                }

                httpclient.getConnectionManager().shutdown();
                return null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T05:04:26.593

尝试以下

1.  删除您的 AVD
2.  关闭 Eclipse
3.  通过命令行创建 AVD（例如 android create avd -n my_android1.5 -t 2）
4.  使用 -dns-server 8.8.8.8 选项从命令行启动它（例如 emulator -avd my_android1.5 -dns-server 8.8.8.8）

ps 确保您没有意外删除清单文件中的互联网权限。此外，当您使用它时，请检查并确保该地址在您的 android 浏览器上有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T05:15:53.067

尝试刷新 DNS。（在 Windows 中：ipconfig /flushdns）或更改 DNS 提供程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T06:08:13.327

也许 url 中有一个 2'/' 符号？"...server//api..." 这一定是这样的 "...server/api..."

# wcf - WCF 中消息检查器和值检查器的优势

> ID：12766215
> 
> 赞同：1
> 
> 时间：2012-10-07T04:53:54.550
> 
> 标签：wcf

谁能告诉我在 WCF 中使用消息和值检查器的优点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T05:16:09.333

大多数创建 WCF 服务的人永远不需要它们，但它们在某些情况下非常有用。

您可以在客户端和服务器端都有检查器 - 在客户端，您通常会在消息发出时检查消息，然后在服务器端检查消息。当您检查离开的消息时，您可以执行一些操作，例如将值添加到消息的标题中。

检查传入消息时，您可以执行自己的自定义验证或身份验证等操作，或者如果您的服务充当中继（即您有一个转发（或充当外观）到应用服务器的 Web 服务器），那么您可以再次向消息的标题添加值。

请注意，检查器可能难以正确配置（即很容易出错），并且它们可能难以调试。

# c# - 继续打开 OpenFileDialog 直到选择有效文件

> ID：12766216
> 
> 赞同：4
> 
> 时间：2012-10-07T04:54:20.883
> 
> 标签：c#, .net, while-loop, openfiledialog

我有打开 OpenFileDialog 的代码，我正在检查文件的大小以确保它不超过特定限制。但是，如果用户选择了一个大文件，我需要警告他并引导他返回对话框以选择不同的文件或单击取消。

这是我尝试过的：

```
 OpenFileDialog dialog = new OpenFileDialog();
        dialog.Filter = "Jpeg files, PDF files, Word files|*.jpg;*.pdf;*.doc;*.docx";
        while (dialog.ShowDialog() != DialogResult.Cancel)
        {
                var size = new FileInfo(dialog.FileName).Length;
                if (size > 250000)
                {
                    MessageBox.Show("File size exceeded");
                    continue;
                }
        } 
```

编辑：我也尝试了以下代码，但每次调用 ShowDialog 时都会打开对话框。因此，如果用户选择的文件大小是限制的 3 倍，则对话框将出现 3 次。

```
 OpenFileDialog dialog = new OpenFileDialog();
        dialog.Filter = "Jpeg files, PDF files, Word files|*.jpg;*.pdf;*.doc;*.docx";
        dialog.FileOk += delegate(object s, CancelEventArgs ev)
        {
            var size = new FileInfo(dialog.FileName).Length;
            if (size > 250000)
            {
                XtraMessageBox.Show("File size");
                dialog.ShowDialog();
            }
        };
        if (dialog.ShowDialog() == DialogResult.OK)
        {
            XtraMessageBox.Show("File Selected");
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T14:32:33.087

您已经完成了一半，FileOk 事件就是您想要使用的。您缺少的是将 e.Cancel 属性设置为 true。这样可以使对话框保持打开状态，避免您不得不一遍又一遍地显示它。像这样：

```
 OpenFileDialog dialog = new OpenFileDialog();
        dialog.Filter = "Jpeg files, PDF files, Word files|*.jpg;*.pdf;*.doc;*.docx";
        dialog.FileOk += delegate(object s, CancelEventArgs ev) {
            var size = new FileInfo(dialog.FileName).Length;
            if (size > 250000) {
                MessageBox.Show("Sorry, file is too large");
                ev.Cancel = true;             // <== here
            }
        };
        if (dialog.ShowDialog() == DialogResult.OK) {
            MessageBox.Show(dialog.FileName + " selected");
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T05:25:17.920

ev.Cancel = true; 检查以下代码是否符合您的目的？

```
 public void SomeMethod()
    {
        OpenFileDialog dialog = new OpenFileDialog();
        dialog.FileOk += new CancelEventHandler(dialog_FileOk);
        dialog.Filter = "Jpeg files, PDF files, Word files|*.jpg;*.pdf;*.doc;*.docx";
        dialog.ShowDialog();
    }

    void dialog_FileOk(object sender, CancelEventArgs e)
    {
        OpenFileDialog dialog = sender as  OpenFileDialog;
        var size = new FileInfo(dialog.FileName).Length;
        if (size > 250000)
        {
            MessageBox.Show("File size exceeded");
            e.Cancel = true;
          }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T05:09:17.690

是的，就您的要求而言，这是可以的，但通常在显示大小提示后打开对话框并不是最好的方法。相反，应该显示一个提示，最好是在主窗口中显示大小的验证错误。根据 HCI 的可用性原则，用户有责任通过再次打开文件对话框再次选择正确的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T05:27:03.647

将处理程序添加到[FileDialog.FileOk](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.fileok.aspx)并让验证其内部的文件大小。

# c# - 对动态创建的控件进行 C# 线程安全调用

> ID：12766219
> 
> 赞同：2
> 
> 时间：2012-10-07T04:55:06.410
> 
> 标签：c#, multithreading, user-controls, delegates, thread-safety

我知道如何对用户控件执行线程安全调用，但是当它们是动态生成的时，我不知道。我试图制作它们的数组列表（富文本框），之后我遇到了“参数启动线程”委托的问题。非常感谢您的输入。

```
 private void SetText(string text)
    {
        // InvokeRequired required compares the thread ID of the 
        // calling thread to the thread ID of the creating thread. 
        // If these threads are different, it returns true. 
        if (this.currentBox.InvokeRequired)
        {
            SetTextCallback d = new SetTextCallback(SetText);
            this.Invoke( d, new object[] { text } );
        }
        else
        {
            this.currentBox.Text += text;
        }
    }

  // This method is executed on the worker thread and makes 
    // a thread-safe call on the TextBox control. On a specific text box.....
    private void ThreadProcSafe()
    {
        int i = 0;
        while(_stop_threads == false) {
            this.SetText(String.Format("{0}\n", i));

            ++i;
            Thread.Sleep(100);
        }

        this.SetText(String.Format("Thread Time: {0}:{1}:{2}\n", DateTime.Now.TimeOfDay.Hours, DateTime.Now.TimeOfDay.Minutes, DateTime.Now.TimeOfDay.Seconds)); 

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:43:33.187

问题是，尽管每个 UI 控件都有一个单独的线程，但该窗口窗体在单个线程下工作。因此，从单独的线程更新 UI 控件是不安全的。

也许您可以从这些线程中填充字典或数组，并在表单的单线程下更新该数组的结果。这样，您将同时从更新的值数组中更新所有 UI 控件。它是线程安全的，并且消耗的系统资源更少。

# objective-c - 没有故事板的 iOS 6 保存和恢复

> ID：12766223
> 
> 赞同：1
> 
> 时间：2012-10-07T04:57:18.447
> 
> 标签：objective-c, ios, ios6

我一直在尝试实施状态恢复和保存，但没有任何运气。

我没有使用故事板。我一定是做错了什么。

我为每个 Nib 文件设置了恢复标识符。

我知道状态正在被存储，但从未正确恢复。最后一个状态显示半秒钟，然后返回主视图。我尝试了很多没有运气的事情。请帮忙！

```
-(BOOL)application:(UIApplication *)application willFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSLog(@"will finish");
    return YES;
}
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];

    navigator = [[UINavigationController alloc] initWithRootViewController:self.viewController];
    self.window.rootViewController = navigator;

    [self.window makeKeyAndVisible];
    [navigator release];

    NSLog(@"did finish");
    return YES;
}
// As you can see, I started the process of saving and restoring application state.
// Also, I added the restoration identifier for every class that should be restored.

-(BOOL)application:(UIApplication *)application shouldRestoreApplicationState:(NSCoder *)coder
{
    NSLog(@"restoring");
    return YES;
}
-(BOOL)application:(UIApplication *)application shouldSaveApplicationState:(NSCoder *)coder
{
    return YES;
}
-(void)application:(UIApplication *)application didDecodeRestorableStateWithCoder:(NSCoder *)coder
{
    NSLog(@"restored");
    //navigator = [[UINavigationController alloc] initWithRootViewController:];

    isRestored = YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T10:11:54.193

您应该进行控制器初始化，`application:willFinishLaunchingWithOptions:`因为恢复是在`application:didFinishLaunchingWithOptions:`调用之前完成的。

检查[这个答案](https://stackoverflow.com/a/16867499/1158590)。

此外，您应该以编程方式将 restoreIdentifier 分配给所有控制器。

# eclipse - Eclipse 抱怨“未加载符号表”，而 elf 文件包含调试信息

> ID：12766225
> 
> 赞同：5
> 
> 时间：2012-10-07T04:57:29.693
> 
> 标签：eclipse, gdb, stm32, symbol-table

我正在研究 STM32 处理器。使用 readelf -w，可以从我的 elf 文件中提取大量调试信息。一小段输出如下所示：

```
 <1><3faf>: Abbrev Number: 30 (DW_TAG_variable)
    <3fb0>   DW_AT_name        : (indirect string, offset: 0x24e): ITM_RxBuffer 
    <3fb4>   DW_AT_decl_file   : 19 
    <3fb5>   DW_AT_decl_line   : 1742   
    <3fb7>   DW_AT_type        : <0x3f48>   
    <3fbb>   DW_AT_external    : 1  
    <3fbc>   DW_AT_declaration : 1 
```

dwarfdump 还确认调试信息在 elf 文件中可用。

我正在使用以下软件包：Eclipse Juno arm-2011.03/bin/arm-none-eabi-gdb OpenOCD 和 JTAG 密钥

生成elf文件后，将其烧录到STM32处理器中，并在Eclipse中启动调试会话。JTAG 可以启动和停止，所以我猜 OpenOCD 守护进程很好。由于“未加载符号表”，无法设置断点。我注意到的一件事是在“变量/断点/寄存器/模块”窗口中，显示加载的 elf 文件的模块选项卡包含以下详细信息：类型：可执行符号：未加载符号文件：BuildResult.elf

在调试配置->启动选项卡中，选中/取消选中“加载图像/加载符号”没有区别。我想知道eclipse如何将包含符号信息的elf文件加载到调试过程中？

非常感谢任何建议，提示。

# javascript - 带有 onload 事件的 JavaScript 中的竞争条件

> ID：12766226
> 
> 赞同：0
> 
> 时间：2012-10-07T04:58:03.653
> 
> 标签：javascript

假设我正在加载一个包含以下代码的页面：

```
<script>
    function functionAlert() {
        alert(window.myProperty);
    }

    function functionSetProperty() {
        window.myProperty = "hello!";
    }
    window.addEventListener('load', functionAlert, false);
    functionSetProperty();
</script> 
```

`functionAlert`之前调用的竞态条件是否可能`functionSetProperty`，在这种情况下会显示警报`undefined`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T05:00:50.600

不，这是不可能的。基于浏览器的 JavaScript 是单线程的，它会阻止浏览器在执行时处理事件。

（我在野外看到了一些例外，但它们都以 XmlHttpRequest 为中心。）

# ios - Cordova 1.9 到 2.0 升级导致“#import " 找不到文件错误

> ID：12766227
> 
> 赞同：4
> 
> 时间：2012-10-07T04:58:33.640
> 
> 标签：ios, cordova, phonegap-plugins, cordova-2.0.0

按照此处概述的说明进行操作：http: [//docs.phonegap.com/en/2.1.0/guide_upgrading_ios_index.md.html](http://docs.phonegap.com/en/2.1.0/guide_upgrading_ios_index.md.html)

我正在尝试将现有的 iOS 项目从**Cordova 1.9 升级到 2.0**。

逐行按照说明操作后，尝试运行时仍然出现以下错误：

```
Lexical or Preprocessor Issue -- "#import <Cordova/CDVPlugin.h>" File Not Found 
```

产生此错误的行内容如下：

```
#import <Cordova/CDVPlugin.h> 
```

我已经做了以下尝试来解决这个问题：

*   确保我将 CordovaLib 项目正确导入到我的父项目中
*   仔细检查我是否使用了正确的带括号的导入语法，而不是引号
*   确保我的 CORDOVALIB 目录是准确的
*   是否清理了项目并清理了构建文件夹
*   尝试以递归方式将我的 CORDOVALIB 文件夹添加到用户标题搜索路径。什么也没做

我有一个通过命令行创建的项目来收集 cordova-2.0.0.js 文件。该项目运行良好，我几乎逐行通过构建设置将它与我现有的项目进行比较，并且无法提出任何不同的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:34:39.097

我遇到了类似的问题，对很多人来说，一个解决方法是确保 Xcode 首选项“Xcode Preferences -> Locations -> Derived Data -> Advanced...”设置为“Unique”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T17:57:46.207

（注：Phonegap 2.9.1（2013 年 11 月））

我在尝试使开源“C”电话间隙插件工作时遇到了同样的问题。解决方案是将 Cordovalib.xcodeproj 添加到目标项目，完成后，单击 your_project.xcodeproj - 您需要查看目标设置，在构建阶段选项卡下，确保将 Cordovalib 添加到目标依赖项中。

一旦完成，它应该允许语句#import 工作。

# java - 具有变化对象的 Java instanceof

> ID：12766233
> 
> 赞同：27
> 
> 时间：2012-10-07T04:59:17.183
> 
> 标签：java, dynamic, instanceof

我需要一个方法，我可以传递一个参数，我假设它是一个类（虽然不确定），并且在该方法中，instanceof 将用于检查 x 是否是传递的类的实例。

我该怎么做？我尝试了几件事，但都没有奏效。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-10-07T05:03:00.473

这个怎么样：

```
public boolean checker(Object obj) {
    return obj instanceof SomeClass;
} 
```

或者如果`SomeClass`需要作为参数：

```
public boolean checker(Object obj, Class someClass) {
    return someClass.isInstance(obj);
} 
```

或者，如果您希望实例是`someClass`而不是子类的实例`someClass`：

```
public boolean checker(Object obj, Class someClass) {
    return someClass.equals(obj.getClass());
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-07T05:02:59.330

使用[`Class.isInstance(Object)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Class.html#isInstance%28java.lang.Object%29).

# c++ - 如何设计 C++ 树和节点类？

> ID：12766239
> 
> 赞同：4
> 
> 时间：2012-10-07T05:01:04.503
> 
> 标签：c++, data-structures, tree

我所做的如下所示，但是在破坏树以及尝试打印树时（基本上我需要在树上使用递归的任何地方），我遇到了很多问题。

这是因为在尝试`print`在右子树的左侧递归调用时，我的方法中断了，因为我的左子树和右子树实际上只有`Node`s 而不是`Tree`s。所以，我需要将我的节点类型化为树，或者我需要创建新的树，这两种都是丑陋的解决方案。

我认为这里的问题在于类设计。你能评论一下吗？谢谢！

```
class Node {
    int _data;
public:
    Node* left;       // left child
    Node* right;      // right child
    Node* p;          // parent
    Node(int data) {
        _data = data;
        left = NULL;
        right = NULL;
        p  = NULL;
    }
    ~Node() {
    }
    int d() {
        return _data;
    }
    void print() {
        std::cout << _data << std::endl;
    }
};

class Tree {
    Node* root;
public:
    Tree() {
        root = NULL;
    }
    Tree(Node* node) {
        root = node;
    }
    ~Tree() {
        delete root->left; // this is NOT RIGHT as
                           // it only deletes the node
                           // and not the whole left subtree
        delete root->right;
        delete root;
    }

    void print(int);
    void add(int);
}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T05:05:13.307

你为什么不让`Node`成为你的树类？根据定义，非空节点是某棵树的根。这将大大简化您的代码，因为您不需要为`Tree`和制作不同的案例`Node`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T05:04:00.307

更改 Node 的析构函数，使其删除其左右子节点。然后对于您的 Tree 析构函数，只需删除根目录，因此：

```
~Tree() {
   delete root;
}

~Node() {
   delete left;
   delete right;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T08:28:50.027

```
public:
~Tree() {
        clear();
        delete root;
    }

    void clear()
    {
        recursive_delete(root);
    }
private:
    void recursive_delete(Node* node)
    {
        if (node!=NULL)
        {
            recursive_delete(node->left);
            recursive_delete(node->right);
            deleteNode(node);
        }
    }
    void deleteNode(Node* node)
    {
        delete node;
        node = NULL;
    } 
```

# google-maps - Google Maps API 3 上超过 2 个起点和终点

> ID：12766241
> 
> 赞同：1
> 
> 时间：2012-10-07T05:01:49.667
> 
> 标签：google-maps, google-api

我有这个例子：

> [https://google-developers.appspot.com/maps/documentation/javascript/examples/directions-panel](https://google-developers.appspot.com/maps/documentation/javascript/examples/directions-panel)

我想知道如何通过 2 个或更多航点设置路线？正如您在该应用程序上所知道的，您可以获得航路点：首先，设置起点/起点，然后设置目的地点，地图将生成路线。脚本 ：

```
 function calcRoute() {
    var start = document.getElementById('start').value;
    var end = document.getElementById('end').value;
    var request = {
      origin: start,
      destination: end,
      travelMode: google.maps.DirectionsTravelMode.DRIVING
    };
    directionsService.route(request, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
      }
    });
  } 
```

请参阅：起点：起点，终点：终点。

现在的问题是：我可以自己设置航点吗？从点到点使用 LatLong 或者我只是说街道名称是什么意思？

理解？对不起，我不擅长文字，但我一直在等待答案，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T05:13:15.110

是的，可以将航路点添加到路线请求中：

以下是文档中航点对象的描述： [https ://developers.google.com/maps/documentation/javascript/reference#DirectionsWaypoint](https://developers.google.com/maps/documentation/javascript/reference#DirectionsWaypoint)

这是文档中的请求描述（请参阅航点）： [https ://developers.google.com/maps/documentation/javascript/reference#DirectionsRequest](https://developers.google.com/maps/documentation/javascript/reference#DirectionsRequest)

[带有“地址”航路点的示例](http://www.geocodezip.com/v3_GoogleEx_directions-waypointsD.html)

[由坐标指定的航点示例](http://www.geocodezip.com/v3_GoogleEx_directions-waypointsC.html)

# android - android：无法将广告合并到程序中

> ID：12766244
> 
> 赞同：0
> 
> 时间：2012-10-07T05:02:14.577
> 
> 标签：android, admob, tablelayout, banner

我刚刚完成了我的第一个应用程序，并希望将广告合并到应用程序的底部。广告横幅的编码仅从 Google 网站[https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals](https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals)获得，并添加到 mainactivity jar 中。一切似乎都很好，但是当我运行程序时，它崩溃了，logcat 和 jar 编码如下：

1）如何解决这些问题？（没有广告的程序可以正常运行）

2) 如何设置广告：testDevices="TEST_EMULATOR, TEST_DEVICE_ID" ???

3) 我的 xml 是一个 TableLayout，这有关系吗？（从 logcat 看来，它似乎无法正确夸大广告？）

提前谢谢了！！

# 罐子部分：

```
import com.google.ads.*;
import com.google.ads.AdRequest; 
import com.google.ads.AdSize; 
import com.google.ads.AdView; 

public class MainActivity extends Activity { 
    AdView adView;     
    public static final  String MY_PUBLISHER_ID = "a123123123123123c"; //this one is correct 

    @Override 
    public void onCreate(Bundle savedInstanceState) { 
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.main); 

      //request TEST ads to avoid being disabled for clicking your own ads         
        AdRequest adRequest = new AdRequest();           
      //test mode on EMULATOR         
        adRequest.addTestDevice(AdRequest.TEST_EMULATOR);                  
      //test mode on DEVICE (this example code must be replaced with your device unique ID)         
        adRequest.addTestDevice("4G74FC73D62D42B62A7F7DA61EF5F776"); //how to set this? this one is copied from the tutorial only          
      //create a Banner Ad         
        adView = new AdView(this, AdSize.BANNER, MY_PUBLISHER_ID);           
      //call the main layout from xml         
        TableLayout mainLayout = (TableLayout)findViewById(R.id.tableLayout);           
      //add the Banner Ad to our main layout         
        mainLayout.addView(adView);           
      // Initiate a request to load an ad in TEST mode. 
      //  The test mode will work only on emulators and your specific test device, 
      // the users will get real ads.         
        adView.loadAd(adRequest); 
    } 

// ad   
    @Override  
    public void onDestroy() 
    {    
        if (adView != null) {      adView.destroy();    }    
        super.onDestroy();  
    }   
// ad 
```

# Logcat如下：

```
10-10 01:17:34.230: D/dalvikvm(13612): Late-enabling CheckJNI
10-10 01:17:34.650: E/dalvikvm(13612): Could not find class 'com.google.ads.AdRequest', referenced from method com.pearappx.acctcalc.MainActivity.onCreate
10-10 01:17:34.650: W/dalvikvm(13612): VFY: unable to resolve new-instance 425 (Lcom/google/ads/AdRequest;) in Lcom/pearappx/acctcalc/MainActivity;
10-10 01:17:34.650: D/dalvikvm(13612): VFY: replacing opcode 0x22 at 0x0009
10-10 01:17:34.650: I/dalvikvm(13612): Could not find method com.google.ads.AdView.destroy, referenced from method com.pearappx.acctcalc.MainActivity.onDestroy
10-10 01:17:34.650: W/dalvikvm(13612): VFY: unable to resolve virtual method 3042: Lcom/google/ads/AdView;.destroy ()V
10-10 01:17:34.650: D/dalvikvm(13612): VFY: replacing opcode 0x6e at 0x0006
10-10 01:17:34.650: D/dalvikvm(13612): DexOpt: unable to opt direct call 0x0bdf at 0x0b in Lcom/pearappx/acctcalc/MainActivity;.onCreate
10-10 01:17:34.650: I/dalvikvm(13612): DexOpt: unable to optimize static field ref 0x02e7 at 0x0e in Lcom/pearappx/acctcalc/MainActivity;.onCreate
10-10 01:17:34.700: I/dalvikvm(13612): DexOpt: unable to optimize static field ref 0x02e8 at 0x1a in Lcom/pearappx/acctcalc/MainActivity;.onCreate
10-10 01:17:34.700: D/dalvikvm(13612): DexOpt: unable to opt direct call 0x0be1 at 0x1e in Lcom/pearappx/acctcalc/MainActivity;.onCreate
10-10 01:17:35.085: D/AndroidRuntime(13612): Shutting down VM
10-10 01:17:35.085: W/dalvikvm(13612): threadid=1: thread exiting with uncaught exception (group=0x40c781f8)
10-10 01:17:35.105: E/AndroidRuntime(13612): FATAL EXCEPTION: main
10-10 01:17:35.105: E/AndroidRuntime(13612): java.lang.NoClassDefFoundError: com.google.ads.AdRequest
10-10 01:17:35.105: E/AndroidRuntime(13612):    at com.pearappx.acctcalc.MainActivity.onCreate(MainActivity.java:94)
10-10 01:17:35.105: E/AndroidRuntime(13612):    at android.app.Activity.performCreate(Activity.java:4470)
10-10 01:17:35.105: E/AndroidRuntime(13612):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
10-10 01:17:35.105: E/AndroidRuntime(13612):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
10-10 01:17:35.105: E/AndroidRuntime(13612):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
10-10 01:17:35.105: E/AndroidRuntime(13612):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
10-10 01:17:35.105: E/AndroidRuntime(13612):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
10-10 01:17:35.105: E/AndroidRuntime(13612):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-10 01:17:35.105: E/AndroidRuntime(13612):    at android.os.Looper.loop(Looper.java:137)
10-10 01:17:35.105: E/AndroidRuntime(13612):    at android.app.ActivityThread.main(ActivityThread.java:4511)
10-10 01:17:35.105: E/AndroidRuntime(13612):    at java.lang.reflect.Method.invokeNative(Native Method)
10-10 01:17:35.105: E/AndroidRuntime(13612):    at java.lang.reflect.Method.invoke(Method.java:511)
10-10 01:17:35.105: E/AndroidRuntime(13612):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
10-10 01:17:35.105: E/AndroidRuntime(13612):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
10-10 01:17:35.105: E/AndroidRuntime(13612):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T07:32:54.673

嘿按照这个[教程](http://myandroidsolutions.blogspot.in/2012/06/android-how-to-add-admob-to-android-in.html)

您错过了将 jar 添加到您的 libs 文件夹中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T05:52:58.930

我认为您忘记将 admob jar 添加到类路径

# java - JTextField 在清除时的价值迷失方向

> ID：12766245
> 
> 赞同：2
> 
> 时间：2012-10-07T05:02:15.760
> 
> 标签：java, swing, jtextfield, string, documentlistener

我正在尝试使用 Eclipse 中的 WindowBuilder 插件创建 Java Windows 应用程序。在输入所需值时，我有一个工作正常的 JTextField。但是，当我清除该字段上的所有内容并尝试重新输入其他值时，这些值会迷失方向，即这些值根本没有出现，或者似乎出现在下一行。

我正在使用 DocumentListener，所以是的，这可能会导致空字符串异常。但是，我不确定为什么 JTextField 的内容在重新输入时不合适。

PFB 我的一段代码：

```
void computeTotal(final JTextField jtf){
    jtf.getDocument().addDocumentListener(new DocumentListener(){
        public void changedUpdate(DocumentEvent e) {
            //warn();
            getTotal();
        }
        public void removeUpdate(DocumentEvent e) {
            //warn();
            getTotal();
        }
        public void insertUpdate(DocumentEvent e) {
            //warn();
            getTotal();
        }
        public void getTotal(){
            bt = Float.parseFloat(billTotal.getText());
            bd = Float.parseFloat(billDeduction.getText()) ;
            ta = Float.parseFloat(taxAmt.getText());
            tt = bt - bd+ ta;
             totalTotal.setText(tt+"");
        }

    });
    } 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:19:06.657

> 这里有什么问题？

*   使用由 Number Formatter 格式化的 JFormattedTextField，然后是 DocumentListener 正确的监听器

*   不需要解析，输出不错，千位分隔符没有问题，不允许输入非数字字符

*   将 DocumentFilter 与 Patern 一起使用，您可以在其中删除非数字字符，然后您可以使用包含数字、小数分隔符和负数的非常保存的内容进行解析

# applescript - 用于通过 Apple 的 Automator 切换回之前运行的窗口的代码是什么？

> ID：12766250
> 
> 赞同：2
> 
> 时间：2012-10-07T05:03:39.707
> 
> 标签：applescript, automator

我创建了一个在 Automator 中切换键盘查看器的代码。

```
on run {input, parameters}
    if application "KeyboardViewer" is running then
        quit application "KeyboardViewer"
    else
        activate application "KeyboardViewer"
    end if
    return input
end run 
```

但是，键盘查看器成为当前正在运行的窗口，我无法立即开始输入（我必须切换回上一个窗口）。是否有我可以添加的特定代码，以便再次突出显示上一个窗口？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T12:06:51.610

您可以使用`launch`而不是`activate`：

```
tell application "KeyboardViewer"
    if running then
        quit
    else
        launch
    end if
end tell 
```

如果应用程序未打开，`launch`通常会在其他应用程序上方但最前面的应用程序下方打开一个新窗口。否则，它只会将应用程序保留在后台。在第二种情况下，您可以使用`AXRaise`提升窗口，但它也使它们看起来像活动窗口。

```
launch application "Terminal"
tell application "System Events" to tell process "Terminal"
    perform action "AXRaise" of windows
end tell 
```

您还可以将以前的应用程序保存在变量中：

```
set a to path to frontmost application as text
activate application "Terminal"
activate application a 
```

如果您将焦点转移到后台应用程序，您可以稍后激活最前面的应用程序：

```
try
    tell application "SystemUIServer"
        display dialog "" default answer ""
    end tell
end try
activate application (path to frontmost application as text) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T09:17:47.847

在激活应用程序“KeyboardViewer”行之后尝试此操作...

```
tell application "System Events" to keystroke tab using command down 
```

***编辑***：因为上面的原始帖子没有为你做，所以试试这个。在这种情况下，它使用我用来获取最前面运行的应用程序的子程序。只需将此代码放入您的自动化操作的 applescript 部分...

```
on run {input, parameters}
    if application "KeyboardViewer" is running then
        quit application "KeyboardViewer"
    else
        set frontAppPath to my getFrontAppPath()
        activate application "KeyboardViewer"
        delay 0.2
        tell application frontAppPath to activate
    end if
    return input
end run

on getFrontAppPath()
    set frontAppPath to (path to frontmost application) as text
    set myPath to (path to me) as text

    if frontAppPath is myPath then
        try
            tell application "Finder" to set bundleID to id of file myPath
            tell application "System Events" to set visible of (first process whose bundle identifier is bundleID) to false

            -- we need to delay because it takes time for the process to hide
            -- I noticed this when running the code as an application from the applescript menu bar item
            set inTime to current date
            repeat
                set frontAppPath to (path to frontmost application) as text
                if frontAppPath is not myPath then exit repeat
                if (current date) - inTime is greater than 1 then exit repeat
            end repeat
        end try
    end if
    return frontAppPath
end getFrontAppPath 
```

# c - 如何在C中显示特定的文件扩展名

> ID：12766251
> 
> 赞同：0
> 
> 时间：2012-10-07T05:03:44.140
> 
> 标签：c

如何使用 execl 或 execve 仅在 C 中显示扩展名为“.txt”的文件？

```
#include <stdio.h>
#include <unistd.h>
#include <sys/types.h>

int main(int argc, char **argv) {

 ( execl("/bin/ls","*.txt",NULL); 

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T08:23:40.427

您正在寻找[`glob(3)`](http://unixhelp.ed.ac.uk/CGI/man-cgi?glob+3)：

```
#include <glob.h>

extern char **environ;

int main(int argc, char *argv[]) {
    glob_t g={0};

    g.gl_offs = 1; /* reserve slot for "/bin/ls" */
    glob("*.txt",GLOB_DOOFFS,0,&g);
    g.gl_pathv[0] = "/bin/ls";
    execve(*g.gl_pathv,g.gl_pathv,environ);

} 
```

# r - qqline连接第一和第三四分位数。如何在不同的分位数（即 30% 和 70%）之间画一条线？

> ID：12766253
> 
> 赞同：3
> 
> 时间：2012-10-07T05:04:03.287
> 
> 标签：r, plot

我有一个包含 1000 多个点的数据集的 qqnorm 图。我想一次在两个分位数之间画一条线（比如 30% 和 70%），就像 qqline 对 25% 和 75% 所做的那样，但可以自由选择要使用的分位数。我已经对 ggplot 进行了一些研究，但似乎无法得到有效的东西。最好的方法是什么？

编辑：我的数据是 Ecdat 的 Garch 数据集中美元兑英镑汇率的变化：

```
diffbp = diff(Garch[,5]) 
```

在那之后，我所做的就是

```
qqnorm(diffbp)

qqline(diffbp) 
```

但我还需要qqline可以通过不同分位数的图，以进行比较。

编辑2：我尝试了以下方法：

```
> qqnorm(diffbp)

> quantile(diffbp,probs=c(0.01,0.99))
       1%       99% 
-0.029850  0.032675 

> qqline(c(-0.029850,0.032675)) 
```

我不认为结果线正是我想要的。也就是说，当我希望它通过适当的分位数时，我相信这条线总是通过 x 轴上的 -1 和 1。

编辑3：想通了！手动计算样本和理论分位数，计算通过它们的直线方程，然后使用 绘制直线`abline()`。不过，这样做相当耗时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T18:36:55.160

**编辑：**

以下信息适用于 R（和`stats`包）版本 2.15.1 - 显然更高版本将包含绘制任意分位数的内置功能。

* * *

`qqline`似乎是硬编码来绘制 .25 和 .75 分位数的。但是，如果您不介意创建自己的函数，则可能会这样做：

```
myQqplot <- function(data, probs){
  qqnorm(data)
  theQuants <- quantile(data, probs = probs)
  lm1 <- lm(theQuants~qnorm(probs))
  abline(lm1)
  invisible()
}

myQqplot(diffbp, c(.5,.99)) 
```

![在此处输入图像描述](../Images/0ff6dd2f9ed62c10e8697b65f6ae0688.png)

没有检查以确保您只为`probs`参数提供两个分位数，但您可以根据需要添加它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T17:36:54.617

我想你只需要

```
qqline(diffbp,probs=c(0.3,0.7)) 
```

**编辑**：我从 R 的评论中看到[：qqline 连接第一和第三四分位数。如何在不同的分位数（即 30% 和 70%）之间画一条线？](https://stackoverflow.com/questions/12771988/r-qqline-connects-the-first-and-third-quartiles-how-do-i-draw-a-line-between-d)区别在于我使用的是 R-devel，并且（正如@caracal 指出的那样）这个功能是自 R 2.15.1 修补以来的新功能（参见[http://developer.r-project.org/blosxom.cgi/R -2-15-分支/新闻](http://developer.r-project.org/blosxom.cgi/R-2-15-branch/NEWS)，2012 年 7 月 7 日）

这是一个似乎表明`qqline()`有效的示例（我使用 0.1、0.9 以获得更大的对比度）：

```
set.seed(101)
z <- rgamma(1000,shape=1)
newprobs <- c(0.1,0.9)
## png("qq.png")
qqnorm(z,pch=".")
qqline(z,col="red")
qqline(z,col="blue",probs=newprobs)
## add reference lines
abline(h=quantile(z,c(0.25,0.75)),col="red",lty=2)
abline(h=quantile(z,newprobs),col="blue",lty=2)
abline(v=qnorm(c(0.25,0.75)),col="red",lty=2)
abline(v=qnorm(newprobs),col="blue",lty=2)
## dev.off() 
```

![在此处输入图像描述](../Images/eb8633a5385511cde565ab48d01f5674.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T06:25:44.900

通过复制代码并将第二行更改为：

```
x <- qnorm(c(0.30, 0.70)) 
```

# c - 需要澄清用于编译 C 文件的某些术语

> ID：12766257
> 
> 赞同：4
> 
> 时间：2012-10-07T05:04:50.493
> 
> 标签：c, gcc, compilation, building, geany

我正在使用 GCC 编译器和 Geany（Arch Linux，如果它有所作为）学习 C。但是，我在 Geany 和 Internet 上看到 compile 和 build 这两个词可以互换使用。我要求澄清我理解编译过程的方式是正确的，因为谷歌搜索只会让我更加困惑。

假设我写了一个简单的 helloworld.c 文件：

```
#include <stdio.h>
int main(void)
{
    printf("Hello world!");
    return 0;
} 
```

如果我运行`gcc -c helloworld.c`，编译器会生成一个 helloworld.o 目标文件。Geany将此过程称为*编译*，编译器说`Compilation finished successfully.`

现在，如果我运行`gcc -o helloworld helloworld.c`，编译器会生成一个名为的可执行文件`helloworld`，Geany 将其称为*building*。但是，编译器再次说`Compilation finished successfully.`

我知道 -c 选项会生成一个目标文件，并且其中的多个可以与库链接在一起以生成可执行文件，但我对哪个场景是编译以及哪个场景正在构建感到困惑。

此外，如果我在项目中只有一个源文件，例如单个 helloworld.c 文件，是否`gcc -o helloworld helloworld.c`足以将源代码转换为可执行文件？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T05:16:33.157

回答你的第二个问题：是的，`gcc -o myprog myprog.c`很好。`gcc -o myprog *.c`或也是如此`gcc -o myprog foo.c bar.c baz.c`。

回答你的第一个问题：从技术上讲，没有“构建”这个词:) 但是，“构建”和“编译”这个词可以互换使用来描述从源代码生成最终可执行文件的整个过程。

在更精确的上下文中，您会说有：

*   预处理，当预处理器包含头文件、扩展宏等时。
*   解析，其中解析器标记源文本并生成程序流的结构化数据模型（所谓的抽象语法树）。
*   编译或编译，当代码生成器遍历 AST 并从中生成汇编代码时
*   汇编，当编译器驱动程序调用汇编程序将汇编文本转换为二进制目标代码时
*   链接或链接，当编译器驱动程序调用链接器在库中查找符号、填写缺失的地址等时。

所以，严格来说，只有第三小步是编译；此外，使用 GNU 工具链和 make，人们倾向于将前四个步骤（从 .c 源文件生成目标文件）编译为一个步骤。

[更多关于这一切的...](http://www.tenouk.com/ModuleW.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T05:09:41.990

编译通常被认为是将源代码转换为机器代码，但不一定还链接机器代码以创建最终的可执行文件。构建是一个更通用的术语，用于描述创建最终可执行文件的整个过程。构建将涉及编译和链接。如果您不使用 -c 选项，则链接会自动完成，因此这将被视为构建，但编译也是该过程的一部分。

您可能会发现这些术语的使用有点松散。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T05:10:53.860

当你编译一个程序时，编译器只是检查文件中是否有任何编译时错误（例如语法和语义错误）。当您“构建”程序时，编译器首先检查其中是否有任何错误，然后将源代码转换为机器代码（实际编译）并在此过程中创建一个可执行文件。

对于您的第二个问题，仅“是`gcc -o helloworld helloworld.c`”就足以“将源代码转换为可执行文件”。

# php - PHP数组联合+解释

> ID：12766263
> 
> 赞同：0
> 
> 时间：2012-10-07T05:06:08.130
> 
> 标签：php, arrays, union

我在下面有以下数组，对联合运算符进行了实验。

```
$a = array(1,2,3,6);

$b = array(1, 2, 3, 4, 5);

$c =  $b + $a; 
```

$c 似乎是 1,2,3,4,5

因此，我假设数组 $b 是针对数组 $a 检查的。$b 中不存在 6，因此不会添加到其中。

现在，如果我将其切换为 $c = $a + $b，我只期望 (1,2,3,6)。

但是，实际输出为 (1,2,3,6,5)。

谁能解释一下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T05:26:08.423

用于`+`追加数组，该过程是通过键而不是值来检查的。

与[array_merge](http://php.net/manual/en/function.array-merge.php)不同的是，当你使用 时`+`，第二个数组中的值**不会**用相同的键覆盖第一个数组中的值。

所以对于`$b + $a`，不会`$b`覆盖任何值，所以结果仍然是`array(1, 2, 3, 4, 5)`。

对于`$a + $b`，`1,2,3,6`将保留 ，并附加额外的值`6`，因此结果将为`array(1,2,3,6,5)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T05:32:14.297

我认为您误解了`+`operator 如何使用`array`. 什么时候`+`用于`array`它基本上`keys`不合并2个数组`values`

例如。我将解释为什么`$c`结果与您预期的不同。

```
# $a = array(1,2,3,6);
$a = array(
  0 => 1,
  1 => 2,
  2 => 3,
  3 => 6
);
# $b = array(1, 2, 3, 4, 5);
$b = array(
  0 => 1, 
  1 => 2, 
  2 => 3, 
  3 => 4, 
  4 => 5
);

// the + operator simply do this
$c[0] = $a[0] + $b[0]; // yield 1
...
...
$c[3] = $a[3] + $b[3]; // yield 6

$c; // yield array(1,2,3,6,5) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T05:08:40.963

取`+`最左边的变量并首先使用它的所有值。如果它的所有值都用完了，但左边的条目数量少于右边的条目，它将用右边的条目填充其余部分。

```
$foo = array("foo");
$boo = array(true, "bar");

$foobar = $foo + $boo; 
```

首先，`$foobar`用 中的内容填充`$foo`，但随后，由于 的长度`$boo`大于`$foo`，`$foobar`因此由`$boo`的值填充`$foo`。所以第一个值被忽略，因为它已经被 使用过`$foo`，但是第二个值还没有被合并。

这个概念也适用于定义数组的键时（即，$arr['location'] 而不是 $arr[]）。右边的键不会覆盖左边的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-08T14:22:55.330

**解释$c = $a + $b 的**最简单方法。

**$c**首先获取（第一个操作数）**$a的***“键值对”*。

 **如果（第二个操作数）**$b**的*“键值对”*多于**$a** ..

**然后$c**将多余的**$b**添加 到数组的末尾。

否则，**$c**仍然等同于**$a**。

```
$a =   
  0 => 2,
  1 => 5,
  2 => 8,

$b =   
  0 => 9,
  1 => 2,
  2 => 1,
  3 => 5,
  4 => 6,

$c =   
  0 => 2,
  1 => 5,
  2 => 8,
  3 => 5,  //From $b
  4 => 6,  //From $b 
```**

# javascript - 0:({}) 在 Mozilla Firefox 的对象转储中是什么意思

> ID：12766264
> 
> 赞同：4
> 
> 时间：2012-10-07T05:06:48.130
> 
> 标签：javascript, firefox, object

我在 Mozilla 中转储了一个对象，得到以下结果：

```
({
    length:1, 
    prevObject:{0:({}), context:({}), length:1}, 
    context:({}), 
    selector:"ROOT", 
    0:({})
}) 
```

对象符号中的含义是什么`({})`？我知道这`{}`意味着一个对象，但圆括号是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T05:11:47.747

因为`{}`也可能意味着一个空块，例如：在控制台中，您需要键入`({})`来表示一个对象。

# java - 从 gae blobstore java 在浏览器中查看文本文件的内容

> ID：12766266
> 
> 赞同：1
> 
> 时间：2012-10-07T05:08:37.653
> 
> 标签：java, google-app-engine

我在 GAE Blobstore 中存储了文本文件。现在我想读取文件的内容并在浏览器中查看它们，而无需实际下载文件。

我通过单击访问 servlet 的 HTML 页面上的链接来访问 servlet。

我正在使用 blobKey 提供文件

```
 String blobKey = req.getParameter("blobKey");
    BlobKey blobKey = new BlobKey(blobKey);
    resp.setContentType("text/plain");
    resp.setHeader("Content-Disposition", "attachment; filename=\"" +fileName +"\"");
    blobstoreService.serve(blobKey, resp); 
```

但是上面的代码是通过在浏览器中显示来下载文件。谁能帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T07:19:22.883

删除在标题中设置 Content-Disposition 的行，这应该可以解决问题。

# php - 无法使用数据库。DB_NAME

> ID：12766268
> 
> 赞同：1
> 
> 时间：2012-10-07T05:08:47.300
> 
> 标签：php

我正在尝试连接到数据库，它连接成功但无法使用数据库。我对 PHP 的这个概念非常陌生。请帮助我，让我知道我是否在某个地方出错了

```
<?php
    define('DB_NAME', 'bvh');
    define('DB_USER', 'root');
    define('DB_PASSWORD', '');
    define('DB_HOST', 'localhost');

    $link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);

    if(!$link){
        die('could not connect: '.mysql_error());
    }
    echo 'Connected Successfully<br>';
    $db_selected = mysql_select_db(DB_NAME, $link);

    if(!$db_selected){
        die('Cannot use '.DB_NAME.':'. mysql_error());
    }
    $yname=$_POST['yname'];
    $faculty=$_POST['faculty'];
    $class=$_POST['class'];
    $uname=$_POST['uname'];
    $email=$_POST['email'];
    $pwd=$_POST['pwd'];
    $rpwd=$_POST['rpwd'];

    $sql = "INSERT INTO students (yname, faculty, class, uname, email, pwd, rpwd) VALUES('$yname', '$faculty', '$class', '$uname', '$email', '$pwd', '$rpwd')";

    if(!mysql_query($sql)){
        die('Error: ' .mysql_error());
    }
    mysql_close();
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T05:53:03.530

我尝试执行您的代码片段。一切正常。我确保注意以下事项：

*   数据库 bvh 存在 登录到 MySQL 提示符，使用命令创建数据库 bvh`create database bvh;`
*   然后在数据库 bvh 中创建表学生
*   使用 php 解释器从我的命令行运行你的 php 代码。 `php <filename.php>`
*   输出显示“连接成功”。下面是输出：

    ```
    Connected Successfully<br>PHP Notice:  Undefined index: yname in /var/www/test.php on line 18
    PHP Notice:  Undefined index: faculty in /var/www/test.php on line 19
    PHP Notice:  Undefined index: class in /var/www/test.php on line 20
    PHP Notice:  Undefined index: uname in /var/www/test.php on line 21
    PHP Notice:  Undefined index: email in /var/www/test.php on line 22
    PHP Notice:  Undefined index: pwd in /var/www/test.php on line 23
    PHP Notice:  Undefined index: rpwd in /var/www/test.php on line 24 
    ```

PHP 通知是因为数据没有发布到 PHP。但是连接是成功的，我可以通过确保上述步骤来访问数据库。

# c# - 检测到缓冲区溢出

> ID：12766275
> 
> 赞同：1
> 
> 时间：2012-10-07T05:09:57.583
> 
> 标签：c#, c++, dllimport

当我使用 C# DllImport C++ dll 时，我有一个问题，我使用 Visual Studio 2010 并检查了“启用非托管代码调试”，当它运行时，总是显示消息“检测到缓冲区溢出！...缓冲区溢出已经检测到损坏了程序的内部状态。程序无法安全地继续执行，现在必须终止。”

这个dll是第三方供应商提供的，他们说运行这个dll没有错误，我该如何修复它？

我的 M++ dll 函数是，

```
int  avc_to_avi_convert(char* chPath_avc, char* chPath_avi, int pPrivate, PROGRESS_CALLBACK progress_callback);

void avc_to_avi_close(int* pFd_avi);

typedef void (*PROGRESS_CALLBACK)(int iPercent, int pPrivate); 
```

我在我的 C# dllimport 中使用它，如下所示：

```
public delegate void PROGRESS_CALLBACK(int _iPercent, int _pPrivate);

[DllImportAttribute(@"..\xxx.dll", EntryPoint = "avc_to_avi_convert", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Unicode)]

public static extern unsafe int avc_to_avi_convert([MarshalAs(UnmanagedType.LPStr)] StringBuilder _inputAVC, [MarshalAs(UnmanagedType.LPStr)] StringBuilder _ouputAVI, int pPrivate, PROGRESS_CALLBACK _pg);

[DllImportAttribute(@"..\xxx.dll", EntryPoint = "avc_to_avi_close", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Unicode)]

public static extern unsafe void avc_to_avi_close(int pFd_avi);

private void button1_Click(object sender, EventArgs e)
{
    int i = 0;
    StringBuilder inputFile = new StringBuilder(Application.StartupPath + @"\avc\abc.avc");//(@"C:\avc\abc.avc");
    StringBuilder outputFile = new StringBuilder(Application.StartupPath + @"\avi\abc.avi");//(@"C:\avi\abc.avi");

    if (avc_to_avi_convert(
        inputFile,
        outputFile,
        1,
        progress_func) > 0) { 

    }
}

public void progress_func(int iProgress, int pPrivate)
{
     if (iProgress == 100)
     {
         //success
     }
     else if (iProgress == -1)
     {
         //convert error
     }
     else if (iProgress == -2)
     {
         //Not enough disk space
     }
     else
     {
         //update progress
     }
} 
```

我将代码更改为，

```
[DllImportAttribute(@"..\xxx.dll", EntryPoint = "avc_to_avi_convert", CallingConvention = CallingConvention.StdCall, CharSet = CharSet.Unicode)]

public static extern unsafe int avc_to_avi_convert([MarshalAs(UnmanagedType.BStr)] String _inputAVC, [MarshalAs(UnmanagedType.BStr)] String _ouputAVI, int pPrivate, PROGRESS_CALLBACK _pg);

[DllImportAttribute(@"..\xxx.dll", EntryPoint = "avc_to_avi_close", CallingConvention = CallingConvention.StdCall, CharSet = CharSet.Unicode)]

public static extern void avc_to_avi_close(ref int avi); 
```

并运行它，我仍然得到同样的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T05:49:55.063

1.) 你确定调用约定吗？试试`CallingConvention.StdCall`。读这个：

[http://blogs.msdn.com/b/adam_nathan/archive/2003/05/21/56690.aspx](http://blogs.msdn.com/b/adam_nathan/archive/2003/05/21/56690.aspx)

2.) 为属性尝试不同的值`CharSet`并使用`String`而不是`StringBuilder`路径参数。这是一个很好的参考：

[http://msdn.microsoft.com/en-us/library/s9ts558h.aspx](http://msdn.microsoft.com/en-us/library/s9ts558h.aspx)

3.) 此外，该`avc_to_avi_close`方法应如下所示：

```
[DllImportAttribute("xxx.dll", EntryPoint="avc_to_avi_close")]
public static extern void avc_to_avi_close(ref int avi); 
```

4.）您想尝试的其他事情：

*   `CharSet`使用和的不寻常组合`MarshalAs`。例如，您从上面的链接中知道`Unicode`应该与`LPWStr`和`Ansi`一起使用，`LPStr`但您当然可以尝试其他组合。
*   您的外部方法不需要标记`unsafe`。

如果您已经用尽了所有其他选项，为什么不尝试编写一个类似于您的 C# 代码的 C++ 程序：

*   如果它崩溃，则证明错误在库中。
*   如果它没有崩溃，您就知道错误出在您使用 PInovke 时，您可以从我的答案中一一浏览所有 12 种以上的组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T04:35:50.273

您将委托传递给 p/invoke，然后让垃圾收集器释放它。这会导致崩溃，因为当委托对象最终确定时，设置为允许从本机代码调用的蹦床被释放。然后本机代码调用一个悬空函数指针。

垃圾收集器完全不知道从本机代码内部使用的任何对象。您必须在通话期间保持对代理的引用。尝试添加一个委托变量（不要使用会创建临时变量的隐式转换），然后`GCHandle`只要本机代码正在使用它，就可以使用它来使委托保持活动状态。

# r - 如何一次运行整个 R 脚本

> ID：12766276
> 
> 赞同：45
> 
> 时间：2012-10-07T05:09:57.360
> 
> 标签：r, rstudio

如何在 RStudio 中运行整个 R 代码脚本？

当我单击 RStudio 中的“运行”按钮时，代码仅逐行运行，我希望它一次执行所有代码，而不是逐行运行。

到目前为止，我尝试过的唯一可行的方法是选择整个脚本，然后单击运行按钮。另一种选择是逐行运行。

有没有更简单的方法来使用单个按钮或快捷方式运行整个脚本？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-07T06:32:55.780

或者看看`Rscript`从命令行运行 R 脚本。此外，在 Rstudio 中，您可以通过按 ++ 来运行整个脚本，而`Ctrl`无需选择任何代码。此外，还有一个指向当前脚本文件 ( ++ )的快捷方式，它运行脚本而不回显每一行。`Shift``Enter``source``Ctrl``Shift``s`

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-10-07T05:32:49.537

假设您的脚本名为“myScript.r”，您可以使用类似的东西`source("myScript.r", echo = TRUE)`来运行整个脚本。

# php - 在长文本数据中嵌入变量

> ID：12766283
> 
> 赞同：0
> 
> 时间：2012-10-07T05:11:47.513
> 
> 标签：php, mysql

是否可以在长文本字段中嵌入变量？

例如：

描述（字段）：日期是 $date_var

在 PHP 中：

```
$date_var = date('m/d/Y');
echo $row['description']; 
```

输出：

```
The date is 10/13/2012 
```

请指教。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-07T05:37:11.207

[http://php.net/manual/en/function.sprintf.php](http://php.net/manual/en/function.sprintf.php)

$str = "日期是 %s"

echo sprintf($str, date('m/y/d'));

或者使用 str_replace/preg_replace。不要使用 eval，尤其是在数据库中的一些数据上。

# java - 为我的 java 对象创建一个 xml 文件

> ID：12766285
> 
> 赞同：0
> 
> 时间：2012-10-07T05:12:38.747
> 
> 标签：java, xml, xml-parsing

我正在开发一个游戏，我想将对象的状态保存在 xml 文件中。我没有它的架构。假设我有，Country 有States 对象列表，并且有Cities 对象列表。如何生成保存其信息的 xml 架构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T06:28:07.130

看下面的例子可以帮助你，

1.  主类公共类 CreateXML {

    ```
    public static void main(String[] args) {
        try {
            final JAXBContext context = JAXBContext.newInstance(Country.class);
            final Marshaller marshaller = context.createMarshaller();
            // Create a stringWriter to hold the XML
            final StringWriter stringWriter = new StringWriter();
            CreateXML xml = new CreateXML();
            Country country = xml.createCountry();
            marshaller.marshal(country, stringWriter);
            // Print out the contents of the stringWriter
            System.out.println(stringWriter.toString());
        } catch (JAXBException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    private List<String> createCity(){
        List<String> cities = new ArrayList<String>();
        cities.add("Slough");
        cities.add("Manchestor");
        return cities;
    }
    private List<State> createState(){
        List<State> states = new ArrayList<State>();
        State state = new State();
        state.setStatName("London");
        state.setCityList(createCity());
        states.add(state);
        return states;
    }
    private Country createCountry(){
        Country country = new Country("UK", createState());
        return country;
    } 
    ```

    }

2.Java Beans - 国家

```
@XmlRootElement
public class Country {

    String countryName;
    List<State> states;
    public Country(String countryName, List<State> states) {
        this.countryName = countryName;
        this.states = states;
    }
    public Country() {
    }
    public String getCountryName() {
        return countryName;
    }
    public void setCountryName(String countryName) {
        this.countryName = countryName;
    }
    public List<State> getStates() {
        return states;
    }
    public void setStates(List<State> states) {
        this.states = states;
    }

} 
```

3.Javabean状态

```
String statName;
List<String> cityList;

public State() {
}
public String getStatName() {
    return statName;
}
public void setStatName(String statName) {
    this.statName = statName;
}
public List<String> getCityList() {
    return cityList;
}
public void setCityList(List<String> cityList) {
    this.cityList = cityList;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T07:07:18.700

使用 XMLEncoder/Decoder，我们不必创建模式，而只需以特定形式制作“bean”。EG 一个`City`豆子。

```
import java.util.ArrayList;

public class City {

    public String name;

    public City() {
    }

    public City(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

对于我们希望序列化的所有公共属性，将有一个 public 'no arg' 构造函数和公共 getter 和 setter。类将`State`是相似的。

```
import java.util.ArrayList;

public class State {

    public ArrayList<City> cities;
    public String name;

    public State() {
    }

    public State(String name) {
        this.setName(name);
    }

    public ArrayList<City> getCities() {
        return cities;
    }

    public void setCities(ArrayList<City> cities) {
        this.cities = cities;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

然后我们只需要一个短代码来序列化批次。

```
import java.awt.Desktop;
import java.beans.XMLEncoder;
import java.io.File;
import java.io.FileOutputStream;
import java.util.ArrayList;

public class SerializeObject {

    public static void main(String[] args) throws Exception {
        ArrayList<State> states = new ArrayList<State>();
        State nsw = new State("New South Wales");
        states.add(nsw);
        ArrayList<City> nswCities = new ArrayList<City>();
        nswCities.add(new City("Sydney"));
        nswCities.add(new City("Wollongong"));
        nsw.setCities(nswCities);

        State qld = new State("Queensland");
        states.add(qld);
        ArrayList<City> qldCities = new ArrayList<City>();
        qldCities.add(new City("Brisbane"));
        qldCities.add(new City("Ipswich"));
        qld.setCities(qldCities);

        File f = new File("localities.xml");
        FileOutputStream fos = new FileOutputStream(f);
        XMLEncoder xmle = new XMLEncoder(fos);
        xmle.writeObject(states);
        xmle.close();

        Desktop.getDesktop().edit(f);
        System.out.println("Finished!");
    }
} 
```

生成的序列化文件。

```
<?xml version="1.0" encoding="UTF-8"?> 
<java version="1.6.0" class="java.beans.XMLDecoder"> 
 <object class="java.util.ArrayList"> 
  <void method="add"> 
   <object class="State"> 
    <void property="cities"> 
     <object class="java.util.ArrayList"> 
      <void method="add"> 
       <object class="City"> 
        <void property="name"> 
         <string>Sydney</string> 
        </void> 
       </object> 
      </void> 
      <void method="add"> 
       <object class="City"> 
        <void property="name"> 
         <string>Wollongong</string> 
        </void> 
       </object> 
      </void> 
     </object> 
    </void> 
    <void property="name"> 
     <string>New South Wales</string> 
    </void> 
   </object> 
  </void> 
  <void method="add"> 
   <object class="State"> 
    <void property="cities"> 
     <object class="java.util.ArrayList"> 
      <void method="add"> 
       <object class="City"> 
        <void property="name"> 
         <string>Brisbane</string> 
        </void> 
       </object> 
      </void> 
      <void method="add"> 
       <object class="City"> 
        <void property="name"> 
         <string>Ipswich</string> 
        </void> 
       </object> 
      </void> 
     </object> 
    </void> 
    <void property="name"> 
     <string>Queensland</string> 
    </void> 
   </object> 
  </void> 
 </object> 
</java> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T05:17:13.937

尝试使用 xstream [http://x-stream.github.io/tutorial.html](http://x-stream.github.io/tutorial.html)

XStream 是一个简单的库，用于将对象序列化为 XML 并再次返回。

# python - Python PYPM 安装问题

> ID：12766287
> 
> 赞同：0
> 
> 时间：2012-10-07T05:12:52.970
> 
> 标签：python, pypm

我正在尝试使用 pypm 和 activestate 下载模块。

PYPM 正在`%APPDATA%\Python`Windows 上安装模块。activestate 网站说，如果我想安装到`c:\python32`，它不会这样做，然后“除非指定 -g 选项”：

我已经尝试了终端窗口中的每个组合。该`-g`命令应该是什么样的？

我努力了：

```
-g pypm install pycrypto
 pypm -g install pycrypto
 pypm  install -g pycrypto
 pypm  install  pycrypto -g 
```

> 除非`-g`指定该选项，否则软件包不会安装到 ActivePython 安装目录中。相反，PyPM 遵循 PEP 370 规范并`~/.local`在 Unix 和 Mac 以及`%APPDATA%\Python`Windows 上默认安装包；并且 Python 解释器会自动选择本地包。要查找软件包的安装位置，请使用 show 或 files 命令。

正确的方法是什么？有没有更简单的方法来下载模块（不是手动）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T02:45:12.403

使用 pip 工具：

```
pip install pycrypto 
```

# node.js - 从 postgis 格式化 geojson

> ID：12766289
> 
> 赞同：3
> 
> 时间：2012-10-07T05:13:29.383
> 
> 标签：node.js, postgis, geojson, leaflet

我正在尝试从 SQL 查询到 postgis postgresql 数据库中的一些 GIS 点数据构建 GeoJSON 对象。下面是我的 node.js app.js 的一个片段。

就目前而言，我了解构建类型和功能，但不知道如何将属性数组附加到每个 GeoJSON 记录（在下面，它都在最后呈现，与功能分开（未整理）。

问题：我需要做什么才能为构建 GeoJSON 的循环中的每个记录附加（整理）属性，使其看起来更像这样[http://www.geojson.org/geojson-spec.html#例子](http://www.geojson.org/geojson-spec.html#examples)？

```
`function GrabData(bounds, res){

  pg.connect(conn, function(err, client){

  var moisql = 'SELECT ttl, (ST_AsGeoJSON(the_geom)) as locale from cpag;'

  client.query(moisql, function(err, result){
    var featureCollection = new FeatureCollection();

    for(i=0; i<result.rows.length; i++){
      featureCollection.features[i] = JSON.parse(result.rows[i].locale);
      featureCollection.properties[i] = JSON.parse(result.rows[i].ttl); //this is wrong
   }

   res.send(featureCollection);
   });

});
}

 function FeatureCollection(){
   this.type = 'FeatureCollection';
   this.features = new Array();
   this.properties = new Object;  //this is wrong
 } 
```

`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T23:04:40.080

这应该做的工作：

```
...
for(i=0; i<result.rows.length; i++){
    var feature = new Feature();
    feature.geometry = JSON.parse(result.rows[i].locale);
    feature.properties = {"TTL", result.rows[i].ttl};
    featureCollection.features.push(feature);
}
... 
```

使用：

```
function FeatureCollection(){
    this.type = 'FeatureCollection';
    this.features = new Array();
}

function Feature(){
    this.type = 'Feature';
    this.geometry = new Object;
    this.properties = new Object;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-01T19:01:01.523

我最近为此编写了一个小助手模块。使用起来非常简单——

```
var postgeo = require("postgeo");

postgeo.connect("postgres://user@host:port/database");

postgeo.query("SELECT id, name ST_AsGeoJSON(geom) AS geometry FROM table", "geojson", function(data) {
    console.log(data);
}); 
```

You can find the repo here - [https://github.com/jczaplew/postgeo](https://github.com/jczaplew/postgeo)

# claims-based-identity - 从 IClaimsPrincipal 生成 SWT 令牌并对其进行签名

> ID：12766292
> 
> 赞同：0
> 
> 时间：2012-10-07T05:14:05.220
> 
> 标签：claims-based-identity, windows-identity, simple-web-token

我想根据以下声明创建一个 SWT 令牌：

```
IClaimsPrincipal principal = (IClaimsPrincipal)User;
IClaimsIdentity identity = (IClaimsIdentity)principal.Identity; 
```

我找到了用于验证 swt 令牌的代码，但无法找到从 IClaimsIdentity 声明中创建的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T07:38:00.560

看看我的博客它对你有什么帮助...... [http://lbadri.wordpress.com/2012/07/30/anatomy-of-a-simple-web-token-swt/](http://lbadri.wordpress.com/2012/07/30/anatomy-of-a-simple-web-token-swt/)

# image - 在matlab中将图像添加到动画中

> ID：12766294
> 
> 赞同：3
> 
> 时间：2012-10-07T05:14:39.960
> 
> 标签：image, matlab, animation, background

我创建了一个在 matlab 中行走的 3D 火柴人，我想添加一个图像作为他正在行走的地板。我不知道该怎么做。我查看了一个添加图像作为背景的示例。这有点像我想要的，但我希望它看起来像地板。我要给火柴人一个轨迹，让他穿过地板。谁能指出我正确的方向。

好的，多亏了安德烈，我明白了。

```
clear all

cyl = UnitCylinder(2);
sph = UnitSphere(2);

% Head 
L1 = 2;

Head = translate(scale(sph,L1/2, L1/2, L1/2),0,0,L1+4.5);
Head.facecolor = 'yellow';

%Shoulder 
r2 = 0.3;
L2 = 3;
Shoulder = translate(rotateX(scale(cyl,r2/2,r2/2,L2/2),90),0,0,5);
Shoulder.facecolor = 'red';

%Left Upper Arm
w1_s = [-20:4:20 20:-4:-20];
r3 = 0.3;
L3 = 2;
Upper_Arm_left = translate(scale(cyl,r3/2,r3/2,L3/2),0,0,-L3/2);
Upper_Arm_left.facecolor = 'red';

%Right Upper Arm
Upper_Arm_right = translate(scale(cyl,r3/2,r3/2,L3/2),0,0,-L3/2);
Upper_Arm_right.facecolor = 'red';

%Left Forearm
w2_s = [-5:1:5 5:-1:-5];
L3_f = 2.5;
Fore_Arm_left = translate(scale(cyl,r3/2,r3/2,L3_f/2),0,0,-L3_f/2);
Fore_Arm_left.facecolor = 'red';

%Right Forearm
Fore_Arm_right = translate(scale(cyl,r3/2,r3/2,L3_f/2),0,0,-L3_f/2);
Fore_Arm_right.facecolor = 'red';

%Chest
r4 = 2;
L4 = 2;
Chest = translate(scale(cyl,r4/2,r4/2,L4/2),0, 0, 5-L4/2);
Chest.facecolor = 'yellow';

%Weist
r5 = 1;
L5 = 2;
Weist = translate(scale(cyl,r5/2,r5/2,L5/2),0, 0, 5-L4-L5/2);
Weist.facecolor = 'yellow';

%Hip
L6 = 1.5;
Hip = translate(rotateX(scale(cyl,r2/2,r2/2,L6/2),90),0,0,5-L4-L5-r2/2);
Hip.facecolor = 'green';

%Left Upper Leg
r7 = 0.4;
L7 = 2.5;
L71 = (L6/2+r7/2);
L72 = 5-L7/2-L4-L5;
Upper_Leg_left = translate(scale(cyl,r7/2,r7/2,L7/2),0,0,-L7/2);
Upper_Leg_left.facecolor = 'green';

%Right Upper Leg
Upper_Leg_right = translate(scale(cyl,r7/2,r7/2,L7/2),0,0,-L7/2);
Upper_Leg_right.facecolor = 'green';

%Left Lower Leg
L7_f = 3;
Lower_Leg_left = translate(scale(cyl,r7/2,r7/2,L7_f/2),0,0,-L7_f/2);
Lower_Leg_left.facecolor = 'green';

%Right Lower Leg
Lower_Leg_right = translate(scale(cyl,r7/2,r7/2,L7_f/2),0,0,-L7_f/2);
Lower_Leg_right.facecolor = 'green';

angle1 = 0;
angle2 = 0;

for i = 1:120

    angle1 = w1_s(rem(i,length(w1_s))+1);
    angle2 = w2_s(rem(i,length(w1_s))+1);    

    Arm_left = combine(translate(rotateY(Fore_Arm_left,angle2),0,0,-L3), Upper_Arm_left);
    Arm_right = combine(translate(rotateY(Fore_Arm_right,-angle2),0,0,-L3), Upper_Arm_right);

    Arm_left = translate(rotateY(Arm_left,angle1),0,-L2/2,(5-L3/2)+L3/2);
    Arm_right = translate(rotateY(Arm_right,-angle1),0,L2/2,(5-L3/2)+L3/2);

    Leg_left = combine(translate(rotateY(Lower_Leg_left,-angle2),0,0,-L7), Upper_Leg_left);
    Leg_right = combine(translate(rotateY(Lower_Leg_right,angle2),0,0,-L7), Upper_Leg_right);

    Leg_left = translate(rotateY(Leg_left,-angle1),0,-L71,L72+L7/2);
    Leg_right = translate(rotateY(Leg_right,angle1),0,L71,L72+L7/2);

    Upper_Body = combine(Head, Shoulder, Arm_left, Arm_right, Chest, Weist);
    Lower_Body = combine(Hip, Leg_left, Leg_right);
    walker  = combine(Upper_Body, Lower_Body); 

    cla
    img = imread('peppers.png');
    [X,Y] = ndgrid([-10 10],[-10 10]);
    zImage = [-5 -5; -5 -5];
    surf(X,Y,zImage,'CData',img,'FaceColor','texturemap');
    %     view([1 1 1]);
    hold on
    view(3)
    set(gca,'xlim',[-10 10],'ylim',[-10 10],'zlim',[-6 6]);
    renderpatch(walker);
    camlight
    box on
    drawnow
    pause(0.04)

end 
```

我想得到这样的地板，但我不知道该怎么做。这个人在他们的代码中使用了 .fig。这是他们使用的一部分。

```
F1 = open('background1.fig');
background_gca = gca;
F2 = figure(2);
.
.
.
 clf(F2)
    copyobj(background_gca,F2);
    view([-40,25])
    set(gca,'xlim',[-5 5],'ylim',[-5 5],'zlim',[0 10]);
    renderpatch(walker);
    camlight
    box on
%     axis off
    drawnow; 
```

![我希望我的样子的例子](../Images/17cdc8bf5e0b379179dcf2793756533a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T09:19:38.520

你有一个小的语法错误：

首先，您颠倒了`z`并且`y`：

~~冲浪（xImage，zImage，yImage，...）~~

此外，您应该将`surf`其视为一个表面。因此，都`z`应该是 0

```
img = imread('peppers.png');
[X,Y] = ndgrid([-5 5],[-5 5]);
zImage = [0 0; 0 0];
surf(X,Y,zImage,'CData',img,'FaceColor','texturemap');
view([1 1 1]); 
```

![在此处输入图像描述](../Images/b7fde15200997c316886022035f56f5e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T05:19:04.570

将该背景图像作为`GIF`图像，感觉就像人在地板上行走，
否则请访问这里，有用的[视频：http://www.youtube.com/watch?v=Ztb6_kIkXb8](http://www.youtube.com/watch?v=Ztb6_kIkXb8)

# .net - 为 Intranet 应用程序访问客户端计算机上的 COM 对象

> ID：12766295
> 
> 赞同：0
> 
> 时间：2012-10-07T05:15:15.897
> 
> 标签：.net, asp.net-mvc-3, com, asp.net-mvc-4, intranet

我们有一个第 3 方软件，我想通过他们提供的 COM 对象应用一些自动化。到目前为止，我一直在使用 Windows 窗体应用程序，但我真的很想开始为公司的内部网站工作，这是他们目前缺乏的东西。

那么这是可能的吗？您是否能够在 Intranet 情况下通过 ASP.NET 应用程序（MVC3 或 4）访问 COM 对象？

我已经看过简单地让服务器通过安装在服务器上的软件来控制应用程序，但是应用程序使用我们的 Active Directory 来控制访问，并且它们没有提供传递凭据的好方法，所以除非我'我缺少一些东西，我需要一个拥有任何人都需要的所有访问权限的用户，然后通过代码强制执行限制，这足以让我继续使用 Windows 窗体应用程序而不是 Intranet 应用程序。

编辑：如果可能的话，从 javascript 访问 COM 对象也是一种选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T05:28:27.073

我使用以下 javascript 代码在客户端计算机上启动 Excel 实例。它***仅***适用于 Internet Explorer。也许你可以对你的对象做同样的事情。

```
var excelApp, excelFile;
  function initExcel(filename)
  {
    excelApp = new ActiveXObject("Excel.Application");
    excelFile = excelApp.Workbooks.Open(filename);
  } 
```

# ios - 如何在 iOS 中创建自定义 UIActivity？

> ID：12766300
> 
> 赞同：64
> 
> 时间：2012-10-07T05:16:33.457
> 
> 标签：ios, objective-c, uiactivityviewcontroller, uiactivity

如何`UIActivity`在 iOS 中创建自定义？

我想要这个的原因是在我的一个应用程序中添加一个评论应用程序按钮，将用户带到 App Store 的评论部分。我怎样才能创建这样的自定义`UIActivity`？

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2012-10-07T05:21:41.100

首先，创建文件。我选择命名我的 ActivityViewCustomActivity

使 ActivityViewCustomActivity.h 看起来像这样：

```
#import <UIKit/UIKit.h>

@interface ActivityViewCustomActivity : UIActivity

@end 
```

使 ActivityViewCustomActivity.m 看起来像这样：

```
#import "ActivityViewCustomActivity.h"

@implementation ActivityViewCustomActivity

- (NSString *)activityType
{
    return @"yourappname.Review.App";
}

- (NSString *)activityTitle
{
    return @"Review App";
}

- (UIImage *)activityImage
{  
    // Note: These images need to have a transparent background and I recommend these sizes:
    // iPadShare@2x should be 126 px, iPadShare should be 53 px, iPhoneShare@2x should be 100 
    // px, and iPhoneShare should be 50 px. I found these sizes to work for what I was making.

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {
        return [UIImage imageNamed:@"iPadShare.png"];
    }
    else
    {
        return [UIImage imageNamed:@"iPhoneShare.png"];
    }
}

- (BOOL)canPerformWithActivityItems:(NSArray *)activityItems
{
    NSLog(@"%s", __FUNCTION__);
    return YES;
}

- (void)prepareWithActivityItems:(NSArray *)activityItems
{
    NSLog(@"%s",__FUNCTION__);
}

- (UIViewController *)activityViewController
{
    NSLog(@"%s",__FUNCTION__);
    return nil;
}

- (void)performActivity
{   
    // This is where you can do anything you want, and is the whole reason for creating a custom 
    // UIActivity

    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"itms-apps://ax.itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?type=Purple+Software&id=yourappid"]];
    [self activityDidFinish:YES];
}

@end 
```

这就是我的图像的样子： 这是我制作的 .PSD： -- 删除了恶意链接 -- 这是原始的 250 px .p​​ng [http://i.imgur.com/pGWVj.png](https://i.imgur.com/pGWVj.png)

![](../Images/ab4b43578d537e15555302edaeb7b0cf.png)

现在在您的视图控制器中执行以下操作：

```
#import "ActivityViewCustomActivity.h" 
```

现在无论你想在哪里显示你的`UIActivityViewController`：

```
 NSString *textItem = @"Check out the yourAppNameHere app: itunes http link to your app here";
   UIImage *imageToShare = [UIImage imageNamed:@"anyImage.png"];

   NSArray *items = [NSArray arrayWithObjects:textItem,imageToShare,nil];

   ActivityViewCustomActivity *aVCA = [[ActivityViewCustomActivity alloc]init];

   UIActivityViewController *activityVC =
   [[UIActivityViewController alloc] initWithActivityItems:items
                                                  applicationActivities:[NSArray arrayWithObject:aVCA]];

   activityVC.excludedActivityTypes = @[UIActivityTypePostToWeibo, UIActivityTypeAssignToContact, UIActivityTypePrint, UIActivityTypeCopyToPasteboard, UIActivityTypeSaveToCameraRoll];

   activityVC.completionHandler = ^(NSString *activityType, BOOL completed)
   {
        NSLog(@"ActivityType: %@", activityType);
        NSLog(@"Completed: %i", completed);
   };

   if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
   {
      self.popoverController = [[UIPopoverController alloc] initWithContentViewController:activityVC];

      CGRect rect = [[UIScreen mainScreen] bounds];

      [self.popoverController
                     presentPopoverFromRect:rect inView:self.view
                     permittedArrowDirections:0
                     animated:YES];
   }
   else
   {
       [self presentViewController:activityVC animated:YES completion:nil];
   } 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-05-27T02:33:19.603

这是我的 Swift 版本 - 我需要多个自定义操作，所以我创建了这个类。不需要代表或协议。

**1.添加自定义类**

```
class ActivityViewCustomActivity: UIActivity {

    var customActivityType = ""
    var activityName = ""
    var activityImageName = ""
    var customActionWhenTapped:( (Void)-> Void)!

    init(title: String, imageName:String, performAction: (() -> ()) ) {
        self.activityName = title
        self.activityImageName = imageName
        self.customActivityType = "Action \(title)"
        self.customActionWhenTapped = performAction
        super.init()
    }

    override func activityType() -> String? {
        return customActivityType
    }

    override func activityTitle() -> String? {
        return activityName
    }

    override func activityImage() -> UIImage? {
        return UIImage(named: activityImageName)
    }

    override func canPerformWithActivityItems(activityItems: [AnyObject]) -> Bool {
        return true
    }

    override func prepareWithActivityItems(activityItems: [AnyObject]) {
        // nothing to prepare
    }

    override func activityViewController() -> UIViewController? {
        return nil
    }

    override func performActivity() {
        customActionWhenTapped()
    }
} 
```

**2 在您的视图控制器中使用**

我已将它附加到 UIBarButtonItem，它调用以下内容

```
@IBAction func actionButtonPressed(sender: UIBarButtonItem) {

    var sharingItems = [AnyObject]() // nothing to share...

    let myCustomActivity = ActivityViewCustomActivity(title: "Mark Selected", imageName: "removePin") {
        println("Do something")
    }

    let anotherCustomActivity = ActivityViewCustomActivity(title: "Reset All", imageName: "reload") {
        println("Do something else")
    }

    let activityViewController = UIActivityViewController(activityItems:sharingItems, applicationActivities:[myCustomActivity, anotherCustomActivity])

    activityViewController.excludedActivityTypes = [UIActivityTypeMail, UIActivityTypeAirDrop, UIActivityTypeMessage, UIActivityTypeAssignToContact, UIActivityTypePostToFacebook, UIActivityTypePrint, UIActivityTypeCopyToPasteboard, UIActivityTypeSaveToCameraRoll]

    activityViewController.popoverPresentationController?.barButtonItem = sender

    self.presentViewController(activityViewController, animated: true, completion: nil)
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-12-12T21:47:27.130

我基于 DogCoffee 的**Swift 3实现：**

```
class ActivityViewCustomActivity: UIActivity {

    // MARK: Properties

    var customActivityType: UIActivityType
    var activityName: String
    var activityImageName: String
    var customActionWhenTapped: () -> Void

    // MARK: Initializer

    init(title: String, imageName: String, performAction: @escaping () -> Void) {
        self.activityName = title
        self.activityImageName = imageName
        self.customActivityType = UIActivityType(rawValue: "Action \(title)")
        self.customActionWhenTapped = performAction
        super.init()
    }

    // MARK: Overrides

    override var activityType: UIActivityType? {
        return customActivityType
    }

    override var activityTitle: String? {
        return activityName
    }

    override class var activityCategory: UIActivityCategory {
        return .share
    }

    override var activityImage: UIImage? {
        return UIImage(named: activityImageName)
    }

    override func canPerform(withActivityItems activityItems: [Any]) -> Bool {
        return true
    }

    override func prepare(withActivityItems activityItems: [Any]) {
        // Nothing to prepare
    }

    override func perform() {
        customActionWhenTapped()
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-29T19:24:16.597

这是一个使用 UIActivity 的 -activityViewController 方法建立电子邮件编写器界面的示例。这显示了如何为您选择的任何目的放置 UIKit 视图控制器或您自己的自定义视图控制器。它取代了 -performActivity 方法。

```
#import <MessageUI/MessageUI.h>
#import <UIKit/UIKit.h>

@interface EPSuggestionsActivity : UIActivity <MFMailComposeViewControllerDelegate>

@end

@implementation EPSuggestionsActivity

....

- (UIViewController *)activityViewController{

    MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
    picker.mailComposeDelegate = self;

    NSString *emailAddress = @"developer@apple.com";
    NSArray *toRecipients = @[emailAddress];
    [picker setToRecipients:toRecipients];
    [picker setSubject:@"Suggestions"];

    return picker;
}

#pragma mark - MFMailComposeViewControllerDelegate Method

- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error  {

    [self activityDidFinish:YES];   //  Forces the activityViewController to be dismissed
}

@end 
```

请注意，在用户关闭电子邮件界面后，邮件编写器委托会调用 -activityDidFinish。这是使 UIActivityViewController 界面消失所必需的。如果您编写自己的 viewController，它将需要一个在完成时调用的委托方法，并且您必须将 UIActivity 的子类设置为委托。

# ios - 在一个类中保存永久数据并能够在另一个类中检索它的最佳方法是什么

> ID：12766301
> 
> 赞同：0
> 
> 时间：2012-10-07T05:16:49.943
> 
> 标签：ios

我想保存这个字典数组，并能够在另一个类中检索它并根据它做出决定。

这是数组：

```
NSArray* cellInfoArray = [[NSArray alloc] initWithObjects:[manufacturerTextField text],[lotNumberTextField text],[expirationDateTextField text],[techniqueTextField text],[cellNumberTextField text],[rhhrProfileTextField text],[donorNumberTextField text], nil];
    NSArray* keyNamingArray = [[NSArray alloc] initWithObjects:@"company",@"lot",@"expDate",@"tech",@"whichCell",@"rhTyping",@"donor", nil];

NSArray* resultsArray = [[NSArray alloc] initWithObjects:[capitalDResultLabel text],[capitalCResultLabel text],[capitalEResultLabel text],[cResultLabel text],[eResultLabel text],[fStarResultLabel text],[cwResultLabel text],[vResultLabel text],[capitalKResultLabel text],[kResultLabel text],[kpaResultLabel text],[kpbResultLabel text],[jsaResultLabel text],[jsbResultLabel text],[fyaResultLabel text],[fybResultLabel text],[jkaResultLabel text],[jkbResultLabel text],[xgaResultLabel text],[leaResultLabel text],[lebResultLabel text],[capitalSResultLabel text],[sResultLabel text],[mResultLabel text],[nResultLabel text],[p1ResultLabel text],[luaResultLabel text],[lubResultLabel text], nil];

NSArray* antigenNames = [[NSArray alloc] initWithObjects:@"D",@"C",@"E",@"c",@"e",@"f*",@"Cw",@"V",@"K",@"k",@"Kpa",@"Kpb",@"Jsa",@"Jsb",@"Fya",@"Fyb",@"Jka",@"Jkb",@"Xga",@"Lea",@"Leb",@"S",@"s",@"M",@"N",@"P1",@"Lua",@"Lub", nil];

_cellInfo = [[NSMutableDictionary alloc] initWithObjects:cellInfoArray forKeys:keyNamingArray];
_resultDictionary = [[NSMutableDictionary alloc] initWithObjects:resultsArray forKeys:antigenNames];

finalCellOne = [[NSMutableDictionary alloc] initWithObjectsAndKeys:_cellInfo,@"clerk",_resultDictionary,@"theResults", nil]; 
```

这可能是一些基本的东西，但我一直在尝试几件事（存档器、属性列表、nsuserdefaults）并且我一直得到“null”。

用户应该能够修改数据；因此，如果我们使用文件路径，第二个类也应该知道这一点。

我不一定需要你们提供任何代码；如果我能得到一些关于我的研究重点能够做到这一点的指导，我将不胜感激。多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T06:02:24.737

这听起来像是单例类对您有用的情况。对数据和序列化/反序列化的应用程序范围的访问将由您的单例处理。

```
@interface ApplicationData : NSObject

+ (id)sharedData;

//  your class properties that expose the data

@end

@implementation ApplicationData

+ (id)sharedData {
    static dispatch_once_t pred;
    static ApplicationData *cSharedInstance = nil;

    dispatch_once(&pred, ^{ cSharedInstance = [[self alloc] init]; });
    return cSharedInstance;
}

// you'll need to provide for serialization/deserialization as you are doing now.

@end 
```

此后，您可以通过以下方式访问共享数据：`[[ApplicationData sharedData] cellInfoArray]`等。

# php - MySQLi 查询返回单个结果——应该是结果数组

> ID：12766302
> 
> 赞同：0
> 
> 时间：2012-10-07T05:16:54.720
> 
> 标签：php, mysql, class, mysqli, prepared-statement

以下代码有一些问题。我创建了一个类来管理数据库连接，使用您在下面看到的 queryPreparedQuery 并且在获取单个用户的数据或使用类似这样的返回单个结果的任何数据时工作正常......

```
include 'stuff/class_stuff.php';

function SweetStuff() {

    $foo = new db_connection();
    $foo->queryPreparedQuery("SELECT Bacon, Eggs, Coffee FROM Necessary_Items WHERE Available = ?",$bool);
    $bar = $foo->Load();
    $stuff = 'Brand of Pork is '.$bar['Bacon'].' combined with '.$bar['Eggs'].' eggs and '.$bar['Coffee'].' nectar for energy and heart failure.';

    return $stuff;

}

echo SweetStuff(); 
```

问题是，我想在这里构建功能以允许返回多个结果的 MySQL 查询。我错过了什么？我知道它正盯着我的脸...

```
class db_connection
{
    private $conn;
    private $stmt;
    private $result;

    #Build a mysql connection
    public function __construct($host="HOST", $user="USER", $pass="PASS", $db="DB_NAME")
    {
        $this->conn = new mysqli($host, $user, $pass, $db);

        if(mysqli_connect_errno())
        {
            echo("Database connect Error : "
            . mysqli_connect_error());
        }
    }
    #return the connected connection
    public function getConnect()
    {
        return $this->conn;
    }
    #execute a prepared query without selecting
    public function execPreparedQuery($query, $params_r)
    {
        $stmt =  $this->conn->stmt_init();
        if (!$stmt->prepare($query))
        {
            echo("Error in $statement when preparing: "
            . mysqli_error($this->conn));
            return 0;
        }
        $types = '';
        $values = '';
        $index = 0;
        if(!is_array($params_r))
        $params_r = array($params_r);
        $bindParam = '$stmt->bind_param("';
        foreach($params_r as $param)
        {

            if (is_numeric($param)) {
                $types.="i";
            }
            elseif (is_float($param)) {
                $types.="d";
            }else{
                $types.="s";
            }
            $values .=  '$params_r[' . $index . '],';
            $index++;
        }
        $values = rtrim($values, ',');
        $bindParam .= $types . '", ' . $values . ');';      

        if (strlen($types) > 0)
        {
            //for debug
            //if(strpos($query, "INSERT") > 0)
            //var_dump($params_r);
            eval($bindParam);
        }

        $stmt->execute();       
        return $stmt;
    }
    #execute a prepared query
    public function queryPreparedQuery($query, $params_r)
    {
        $this->stmt = $this->execPreparedQuery($query, $params_r);
        $this->stmt->store_result();
        $meta = $this->stmt->result_metadata();
        $bindResult = '$this->stmt->bind_result(';
        while ($columnName = $meta->fetch_field()) {
            $bindResult .= '$this->result["'.$columnName->name.'"],';
        }
        $bindResult = rtrim($bindResult, ',') . ');';
        eval($bindResult);
    }
    #Load result
    public function Load(&$result = null)
    {       
        if (func_num_args() == 0)
        {
            $this->stmt->fetch();
            return $this->result;
        }
        else
        {
            $res = $this->stmt->fetch();
            $result = $this->result;
            return $res;
        }
    }

    #Load result
    public function Execute(&$result = null)
    {       
        if (func_num_args() == 0)
        {
            $this->stmt->fetch_array();
            return $this->result;
        }
        else
        {
            $res = $this->stmt->fetch_array();
            $result = $this->result;
            return $res;
        }
    }   

    private function bindParameters(&$obj, &$bind_params_r)
    {
        call_user_func_array(array($obj, "bind_param"), $bind_params_r);
    }

} 
```

**更新**

在帕特里克的帮助下得到这个工作。[在这个问题](https://stackoverflow.com/questions/5109517/mysqli-prepared-statement-to-return-nested-arrays)的帮助下能够找到以下代码，并且经过一些调整，它工作得很好。在 ExecPreparedQuery 中的 execute() 语句之后添加以下内容，在最后返回一个数组而不是单个结果：

```
 # these lines of code below return multi-dimentional/ nested array, similar to mysqli::fetch_all()
    $stmt->store_result();

    $variables = array();
    $data = array();
    $meta = $stmt->result_metadata();

    while($field = $meta->fetch_field())
        $variables[] = &$data[$field->name]; // pass by reference

    call_user_func_array(array($stmt, 'bind_result'), $variables);

    $i=0;
    while($stmt->fetch())
    {
        $array[$i] = array();
        foreach($data as $k=>$v)
            $array[$i][$k] = $v;
        $i++;
    }

    # close statement
    $stmt->close();

    return $array; 
```

由于更改了代码，我更改了调用以解释多维数组数据而不是单个结果，当然。再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T05:22:04.100

在您的`Execute`函数中，您正在调用`$this->stmt>fetch_array()`.

该函数仅返回结果集单行的数组。

你可能想要：

`$this->stmt->fetch_all()`

**更新**

从准备好的语句中检索整个结果集：

`$this->stmt->store_result()`

# java - Android Calender.getTimeInMillis() 单位？

> ID：12766304
> 
> 赞同：2
> 
> 时间：2012-10-07T05:17:04.227
> 
> 标签：java, android

我正在使用 Android 的 Calendar 对象，并且正在使用 getTimeInMillis() 方法，但是当我查看 Value 时，它​​给了我一个非常长的数字。我正在尝试复制这种格式，但我不知道当我以 24 小时模式获取当前时间并将其转换为毫秒时我完全关闭了。

例子：

Calendar.getTimeInMillis()：晚上 11:46 = 1,349,585,220,205

时间在晚上 11:46 使用公式 [(23 * 60 * 60 * 1000) + (46 * 60 * 1000)] = 85,560,000

我想知道日历是否使用某种公式将当前时间转换为毫秒，以及如何复制它。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T05:27:40.023

这是自 1970 年 1 月 1 日以来的毫秒[数](http://en.wikipedia.org/wiki/Epoch_%28reference_date%29)。[请参阅有关Unix 时间的](http://en.wikipedia.org/wiki/Unix_time)这篇文章。

```
1,349,585,220,205 milliseconds / (1000 * 3600) = number of hours = 374884.7833902778
374884.7833902778 hours / 24 = 15620.19930792824 days
15620.19930792824 days / 365 days = 42.79506659706368 years

1970 + 42 years = 2012 
```

（由于没有考虑夏令时，这并不精确。使用真正的日期时间库！）

# c - 'C' 显示为 2 个不同的值？

> ID：12766306
> 
> 赞同：0
> 
> 时间：2012-10-07T05:17:21.590
> 
> 标签：c, assembly, att, cmp

我正在尝试比较汇编中的 2 个不同的字符（在 C 程序中调用汇编函数）。其中一个char属于结构，另一个在调用函数时传入。

```
struct node {
    void   *previous;       
    void   *next;   
    unsigned int num;       
    unsigned int A;     
    unsigned int B;
}

node something;
something.A = 'C'; //assume everything else is correct

char A = 'C';
int func( char A ){ }:
find_course:
    pushl   %ebp
    movl    %esp, %ebp
    subl    $28, %esp
    movl    8(%ebp), %ebx
    movl    10(%ebp), %ecx
    movl    16(%ebp), %edx
    movl    something, %edi
    cmpl    10(%edi), %ebx

.END:
    leave
    ret 
```

当我使用 gdb 调试时，%ebx 是 83，而 10(%edi) 是 21315。如果我将它们作为字符打印出来，两者似乎都是“C”。有什么方法可以将 21315 转换为 83？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T05:19:58.467

您只是遇到了一些数据解释问题。查看您正在处理的数字的十六进制值：

```
 Base 10      Base 16
   83           53
  21315        5343 
```

如您所见，`53`在这两种情况下都有第一个字节。您只是碰巧在各处读取的不仅仅是一个字节 - 这就是`l`您指令上的后缀的含义。你可能想读的比这少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T05:20:19.050

是的：你想`movb 10(%edi), %al`改用。

# php - Solr 中的近重复检测

> ID：12766309
> 
> 赞同：1
> 
> 时间：2012-10-07T05:17:50.610
> 
> 标签：php, solr, lucene, duplicates, dataimporthandler

Solr 被用于搜索用户生成列表的数据库。这些清单通过 DataImportHandler 从 MySQL 导入到 Solr。

**问题：**很多时候，用户向数据库报告相同的列表，有时会对其列表帖子进行细微更改，以避免被轻易检测为重复帖子。

我应该如何使用 Solr 实现近似重复检测？只要搜索结果不包含这些近乎重复的列表，我不介意在 Solr 索引中有近乎重复的列表。

我想有 4 个可能的地方可以进行这种近乎重复的检测

1.  当用户提交列表时*（此处使用 PHP）*
2.  在从 MySQL 到 Solr 的数据导入期间
3.  从 MySQL 导入数据后
4.  搜索完成时

推荐的方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T10:40:38.290

我不熟悉 Solr，我会在用户提交列表时实现“近乎重复”。有很多不同的算法可以检测像[Jaccard Indexing](http://en.wikipedia.org/wiki/Jaccard_coefficient)这样的近似重复。

我做了一个小脚本来查看相似系数之间的差异：

```
<?php

$input1 = "Hello there, this is a test 1, you see it's almost the same";
$input2 = "Hello there, this is a test 2, you saw it, it's almost the same";
$input3 = "this is very different from the others, but who knows ?";

echo jackard($input1, $input1) . "<br />"; // results 1

echo jackard($input1, $input2) . "<br />"; // results 0.81481481481481

echo jackard($input1, $input3) . "<br />"; // results 0.25

echo jackard($input2, $input3); // results 0.24

function jackard($a, $b){
    $a_arr = explode(" ", $a);
    $b_arr = explode(" ", $b);
    $intersect_a_b = array_intersect($a_arr,$b_arr);
    return((count($intersect_a_b)/(count($a_arr)+count($b_arr)))*2);
}
?> 
```

您可能会看到，如果结果为 1，则表示它是同一个句子，或者它以不同的顺序使用相同的单词。但是，值越小，“句子”就越独特。这是一个相当简单的实现。您可以设置一个限制值，例如 0.4。如果超过此限制，则将“请求”设置在队列中。然后手动查看清单。这不是“有效的”。但是我给了你这个想法，由你来开发一个更复杂和自动化的系统/算法。也许你也应该看看[这里](http://phpir.com/shingling-near-duplicate-detection)。

# xamarin.ios - Monotouch UISplitViewController 隐藏主视图，如邮件应用程序

> ID：12766312
> 
> 赞同：0
> 
> 时间：2012-10-07T05:18:12.087
> 
> 标签：xamarin.ios, uisplitviewcontroller

在我的应用程序中，我想在横向和纵向模式下显示主视图，并且它适用于任何特殊代码。

但我希望能够使用左/右手势隐藏/显示主视图，类似于邮件应用程序。

有没有一种简单的方法可以实现这一点，还是我需要编写自己的手势识别？

顺便说一句，如果我在 ShouldHideViewController 委托中禁用主视图，则手势会自动工作，但我不希望默认情况下隐藏主视图。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:00:20.477

改用[MTSplitViewController](https://github.com/Krumelur/MTSplitViewController)。它是优秀的[MGSplitViewController的一个端口](https://github.com/mattgemmell/MGSplitViewController)

# cypher - Neo4jClient 从密码查询返回 NodeReference

> ID：12766313
> 
> 赞同：4
> 
> 时间：2012-10-07T05:18:56.680
> 
> 标签：cypher, neo4jclient, nodereference

我有一个查询：

```
 var results = new CypherFluentQuery(_client)
       .Start("n", (NodeReference)0)
       .Match(string.Format("(n)-[:{0}]--(x)", UserBelongsTo.TypeKey))
       .Return<User>("x")
       .Results; 
```

这将返回与 User 类型的查询匹配的所有节点。我将如何执行相同的查询，但返回每个匹配用户的 NodeReferences？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T08:33:20.943

采用：

```
.Return<Node<User>>("x") 
```

它将返回`Node`具有`Reference`属性的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T08:40:05.410

采用：

```
.Return(n => n.Id) 
```

此功能仅存在于最新版本的 neo4jclient (06/2013)

# ruby - codechef drgnbool 解决方案

> ID：12766316
> 
> 赞同：1
> 
> 时间：2012-10-07T05:19:07.020
> 
> 标签：ruby, hash

我正在 codechef 中尝试这个问题 - [http://www.codechef.com/OCT12/problems/DRGNBOOL](http://www.codechef.com/OCT12/problems/DRGNBOOL)

这是我的解决方案

```
def array_sum(a)
    sum=0
    a.each do |x|
        sum=sum+x
    end
    return sum
end

number_of_test_cases=gets.to_i
number_of_test_cases.times do
    n_and_m=gets.split(" ")
    n=n_and_m[0].to_i
    m=n_and_m[1].to_i
    soints=Hash.new{|h, k| h[k]=[]}
    sofloats=Hash.new{|h, k| h[k]=[]}

    n.times do
        x=gets.split(" ")
        a=x.first.to_i
        b=x.last
        soints[b].push(a)
    end
    m.times do
        x=gets.split(" ")
        a=x.first.to_i
        b=x.last
        sofloats[b].push(a)
    end

    result=0
    soints.each_pair do |k, v|
        if v.size>1
            max_value=sofloats[k].max
            v.each do |val|
                if val<max_value
                    result=result+(max_value-val)
                    val=max_value
                end
            end
        end
        l=array_sum(v)
        k=array_sum(sofloats[k])
        if l<k
            result=result+(k-l)
        end
    end
    puts result
end 
```

我在提交时收到“错误答案”。我的解决方案适用于给定的情况。任何人都可以提供我的解决方案失败的测试用例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T06:23:11.360

编辑：我发现你的代码失败了。

```
1
2 1
10 1   
10 1
50 1
110 # => the right answer is 30 
```

以防万一，这是我写的被接受的答案。

```
def get_ints
  gets.chomp.split.map(&:to_i)
end

def gather_warriors(count, hash)
  count.times do
    power, level = get_ints
    (hash[level] ||= []) << power
  end
end

test_cases_count = gets.chomp.to_i
test_cases = []

test_cases_count.times do
  soints = {}
  sofloats = {}
  soints_count, sofloats_count = get_ints

  gather_warriors(soints_count, soints)
  gather_warriors(sofloats_count, sofloats)

  test_cases << [soints, sofloats]
end

def run_test(soints, sofloats)
  needed_chakra = 0

  soints.keys.each do |level|
    soints_summed_power = soints[level].inject(&:+)
    sofloats_summed_power = sofloats[level].inject(&:+)

    needed_chakra += [0, sofloats_summed_power - soints_summed_power].max
  end

  puts needed_chakra
end

test_cases.each do |test_case|
  run_test(test_case.first, test_case.last)
end 
```

# web.py - web.py 表单验证格式

> ID：12766317
> 
> 赞同：0
> 
> 时间：2012-10-07T05:19:21.520
> 
> 标签：web.py

我正在关注使用 web.py`form`模块的 web.py 教程。基本上，这个小应用程序创建了一个由文本框组成的表单，进行一些验证以确保它是一个数字并且它大于 10，并确定该数字是奇数还是偶数。我会在问题之前发布代码，因为它更容易理解。

代码.py

```
import web
from web import form

urls = (
  '/', 'hello')

number_form = form.Form( 
    form.Textbox('number',
             form.notnull,
             form.regexp('^-?\d+$', 'Not a number.'),
             form.Validator('Not greater than 10.', lambda x: int(x)>10),
             description='Enter a number greater than 10:'
             ))

app = web.application(urls, globals(), autoreload=True)

render = web.template.render('templates/')

class hello:
    def GET(self):
        my_form = number_form()
        return render.hello(my_form)

    def POST(self): 
        my_form = number_form() 
        if not my_form.validates(): 
            return render.hello(my_form)
        else:
            number = my_form['number'].value
            if int(number) % 2:
                return "Your number %s is odd." % number
        else:
            return "Your number %s is even." % number

if __name__ == "__main__":
    app.run() 
```

你好.html

```
$def with (form)
<form name="test" method="POST"> 
$if not form.valid: <p><b>Sorry, your input was invalid.</b></p> 
$:form.render()
<input type="submit" value="Go" />
</form> 
```

现在，我的问题是关于我创建时定义的验证器`number_form`。如果我要换行：

```
form.regexp('^-?\d+$', 'Not a number.'), 
```

类似于：

```
form.regexp('^-?\d+$', 'Not          a           number.'), 
```

输出不变！它仍然只是说`Not a number.`如果它没有通过验证。但是，如果我将其更改为：

```
form.regexp('^-?\d+$', 'NOT A NUMBER.'), 
```

它显示`NOT A NUMBER.`，所以我知道它正在解释该行，并且我的更改实际上已经发生了。

我尝试了一些不同的字符串，似乎它正在截断空格或其他东西；除了添加空格、换行符、制表符等之外，我将其更改为一切正常。

是什么赋予了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T08:19:40.660

这就是浏览器显示页面的方式，它将任何空白视为一个空格，除非您将css 中[的空白](http://www.w3schools.com/cssref/pr_text_white-space.asp)`pre`更改为.

# java - for-each 循环索引

> ID：12766318
> 
> 赞同：0
> 
> 时间：2012-10-07T05:19:31.843
> 
> 标签：java, arrays, for-loop, foreach, indexing

我有这段代码：

```
int[] tab2 = {1, 2, 3, 4, 5, 6 ,7, 8, 9, 0};
for(int i : tab2)
    System.out.print(i + " ");

int[] tab3 = {1, 2, 3, 4, 5, 6 ,7, 8, 9, 0};
for(int i : tab3)
    System.out.print(tab3[i] + " "); 
```

第一个循环给了我 1 2 3 4 5 6 7 8 9 0

而第二个给我 2 3 4 5 6 7 8 9 0 1

怎么来的？数组的第一个索引不是 0 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T05:21:30.023

在第二个循环的第一次迭代中，`i`等于`1`.. 因此`tab3[i]`是`2`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T05:28:53.707

在第二个循环中，您通过查看 tab3 的项目来打印价值。

```
tab3[tab3[0]], tab3[tab3[1]], tab3[tab3[2]], ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T05:29:30.047

在每种情况下，for 循环都会导致`i`获取数组中的每个值。如您所料，第一个循环打印每个值。

但是在第二个循环中，这些值被用作`tab3[]`数组的索引。

由于`i`取值 1、2、3、4、5、6、7、8、9、0，
打印的值为`tab3[1]`, `tab3[2]`, ..., `tab3[0]`，
正如您所写，它们是 2, 3, 4, 5 , 6, 7, 8, 9, 0, 1。

`i`如果循环从 0 到 9 的值，您将获得预期的值，如下所示：

```
for (i = 0;  i < 10;  ++i) 
  System.out.print(tab3[i] + " "); 
```

# android - Android，雪碧动画

> ID：12766324
> 
> 赞同：0
> 
> 时间：2012-10-07T05:20:43.543
> 
> 标签：android, sprite

我是 android 和这个论坛的新手。我有个问题：

我设法移动了一个没有任何动画的简单图像。我还设法制作了一个精灵动画，其中我在一个矩形中有 4 个图像，我将其切成 4 块，并一次在屏幕上显示它。

这就是我要剪切位图图像的方法：canvas.drawBitmap(bitmap, sourceRect, destRect, null);

现在我应该如何结合这两个。那就是精灵动画应该发生。图像也需要在屏幕中移动。我该怎么办。请帮我。我看到了一些 tuts 但我无法理解

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:13:44.870

只需`destRest`在绘图前将 中的坐标更改为指向所需的目标坐标即可。

```
Rect destRect = new Rect(topLeftX, topLeftY, topLeftX + spriteWidth, topLeftY + spriteHeight); 
```

# ruby-on-rails - 无法使用活动记录查询删除重复记录

> ID：12766332
> 
> 赞同：3
> 
> 时间：2012-10-07T05:21:56.227
> 
> 标签：ruby-on-rails, activerecord

我有两个模型 Venue 和 Venue_type。每个 Venue 都有许多场地类型，例如

体育场，酒吧，大厅，未分类等。我想从场地表中删除所有行

列在这些类别之一中，也列在未分类下。基本上我不

希望该特定场所出现在未分类标签中，因为它已经有一个类别。我

我正在使用 rails 2.3.4。我试过这个但它不起作用：

> 未分类 = VenueType.get_by_label("未分类")
> 
> 与每个{|v| 将 v 放入 v.venue_types.size>1 和 v.venue_types.collect(&:id}.include(uncategorized.id)}
> 
> v.毁灭！

这是两个模型：

```
class Venue < ActiveRecord::Base
has_and_belongs_to_many:venue_types
end

class Venuetype < ActiveRecord::Base
has_and_belongs_to_many:venues
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T07:15:51.413

您没有给我足够的信息来为您解决所有问题 - 但我可以告诉您，您没有正确使用 Ruby 块，因为您试图访问块之外的块实例变量。你没有这个余地。

这是“语法方面”可行的方法：

```
uncategorized = VenueType.get_by_label("Uncategorized")

vs.each do |v| 
     if (v in v.venue_types.size>1 and v.venue_types.collect(&:id}.include(uncategorized.id))
          v.destroy!
     end
end 
```

虽然我不能给你一个确切的答案，因为我看不到所有的代码。

# javascript - 限制数据（大小）可以存储在 javascript 数组中。

> ID：12766336
> 
> 赞同：7
> 
> 时间：2012-10-07T05:23:36.497
> 
> 标签：javascript

Javascript 数组中可以存储多少数据（按大小计）？我所有的数据都是浮点值。我正在尝试首先将服务器发送到 Web 应用程序客户端的所有数据缓存在数组中，然后每秒从该数组中读取它以将其呈现在图中。这样我将一次渲染多个点，并且每次新数据点到达时都不必渲染一个点（实际上是每 20 毫秒）

请建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T05:24:55.123

由于 Javascript 内存的限制，数组的确切最大限制是 2^32 - 1 或 4294967295。项目的数量，也称为长度属性，不能大于该数量。检查这个：http: [//4umi.com/web/javascript/array.php](http://4umi.com/web/javascript/array.php)了解更多详情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T05:30:20.533

作为整数数据类型的大小，因为length属性是整数数据类型，所以不能大于。即2^32

# sql - 加入 ms 访问

> ID：12766339
> 
> 赞同：0
> 
> 时间：2012-10-07T05:24:23.037
> 
> 标签：sql, join, ms-access-2003

我有 3 张桌子

1.  Payment_Schedule（Event_ID、Event_Type、Event_Incharge、Event_Date）
2.  Product_AMC（AMC_ID、Customer_ID）
3.  Item_Order (Order_ID, Customer_ID)

对于 Payment_Schedule 中的记录，Event_ID 是 AMC_ID 或 Order_ID。如果 Event_ID 是 AMC_ID，则 Event_Type 将为“AMC”，如果是 Order_ID，则 Event_Type 将为“Order”。

现在我的问题是我不知道如何获取 Customer_ID 以及 Payment_Schedule 的所有字段。

我正在使用 MS Access 2003。请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T05:30:54.760

显示所有客户，以及他们所有的 payment_schedules

```
select PS.Event_ID, PS.Event_Type, PS.Event_Incharge, PS.Event_Date, PA.Customer_ID
from (Product_AMC PA
inner join Payment_Schedule PS on (PS.Event_Type='AMC' and PS.Event_ID=PA.AMC_ID))
union all
select PS.Event_ID, PS.Event_Type, PS.Event_Incharge, PS.Event_Date, IO.Customer_ID
from (Item_Order IO
inner join Payment_Schedule PS on (PS.Event_Type='Order' and PS.Event_ID=IO.Order_ID))
order by Customer_ID 
```

对于单个客户，说“ABC”

```
select PS.Event_ID, PS.Event_Type, PS.Event_Incharge, PS.Event_Date, PA.Customer_ID
from (Product_AMC PA
inner join Payment_Schedule PS on (PS.Event_Type='AMC' and PS.Event_ID=PA.AMC_ID))
where PA.Customer_ID = 'ABC'
union all
select PS.Event_ID, PS.Event_Type, PS.Event_Incharge, PS.Event_Date, IO.Customer_ID
from (Item_Order IO
inner join Payment_Schedule PS on (PS.Event_Type='Order' and PS.Event_ID=IO.Order_ID))
where IO.Customer_ID = 'ABC' 
```

# java - Android Overlay onTap() - 确定被点击的是否是这个覆盖层

> ID：12766342
> 
> 赞同：2
> 
> 时间：2012-10-07T05:24:44.747
> 
> 标签：java, android

> **可能重复：**
> [Android - 地图覆盖 onTouchEvent / onTap 如何？](https://stackoverflow.com/questions/2610008/android-map-overlay-ontouchevent-ontap-howto)

我有一个 Android 应用程序，它使用`MapView`带有`Overlay`（蓝色图钉）的 a 来显示从建筑物列表中选择的建筑物的位置。当用户点击覆盖时，我想显示一条显示建筑物名称和编号的 toast 消息。我遇到的问题是我`onTap()`在叠加层中的处理会拾取*所有*点击事件，无论它们是点击蓝色图钉还是地图上完全不同的地方。

我的代码如下所示：

```
searchedPlaceOverlay = new SearchedPlaceOverlay(SearchPlaces.chosenPlace.getLocation(), this) {
    public boolean onTap(GeoPoint p, MapView mapView) {
        Toast toast = Toast.makeText(getApplicationContext(), "<building name and #>", Toast.LENGTH_LONG);
        toast.show();
        return true;
    }
};
mv.getOverlays().add(searchedPlaceOverlay); 
```

`SearchedPlaceOverlay`扩展`com.google.android.maps.Overlay`并且蓝色大头针在地图上显示良好，这只是被称为的非歧视性质`onTap()`导致了问题。有没有一种简单的方法来确定是否是专门点击了这个覆盖层？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T14:18:11.977

As @tabbykitten said ItemizedOverlay would be simpler, but if you must not use it, you can use the the following approach:

1.  Get coordinates X,Y from your marker
2.  Get bounds from your markwe drawable. Depender on marker type, it may not be centered in geopoint.
3.  Adjust bounds to position on geopoint.
4.  Get x,y coordinates ot point tapped.
5.  Check if it's inside adjusted marker bounds.

example code below:

```
public boolean onTap(GeoPoint p, MapView mapView) { 
  Projection projection = mapView.getProjection();
  projection.toPixels(yourMarkerGeopoint, pointTap);
  yourMarker.copyBounds(boundsTap);
  boundsTap.offset(pointTap.x, pointTap.y);
  projection.toPixels(geoPoint, pointTap);
  if(boundsTap.contains(pointTap.x, pointTap.y)){
    //you tap on the marker
    return true;
  }
  return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T05:37:11.127

有带有 onTap(int index) 的 ItemizedOverlay。把你的覆盖物放在里面。然后你知道被点击的索引。

# javascript - Javascript、CSS 和 HTML - 根据内容调整大小的文本对象

> ID：12766345
> 
> 赞同：1
> 
> 时间：2012-10-07T05:25:29.910
> 
> 标签：javascript, html, css

我对 Web 开发非常陌生，我需要在带有圆形边缘的框中创建包含文本的对象，如图像 ![在此处输入图像描述](../Images/7b2e6c129110a67c4508bd0d84032e93.png)中的边框的大小应该随着文本的大小而增长。

我不能使用任何 css 库或 css3 边界半径。有人介意指出我正确的方向吗？我不想要完整的工作代码 - 我想自己弄清楚细节 - 但非常感谢链接或研究主题的列表。

谢谢！

---edit--- 我也不能使用任何css或javascript库。我这样做是为了一项任务而不是现实世界的场景 - 因此存在局限性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T16:31:19.097

好吧，如果你不使用库和 css3.. 你有两个选择：

1.  将圆角矩形的图像切片，将文本放在一个 div 中，然后创建一堆其他 div，并将这些图像设置为背景，可以在[此处找到详细信息](http://cssglobe.com/css-sprites-rounded-corners/)

2.  使用画布参考[这里](https://stackoverflow.com/questions/1255512/how-to-draw-a-rounded-rectangle-on-html-canvas)

别担心，canvas 不是一个库，它是 Html5 规范的一部分（虽然我不知道你是否可以使用 html5）[在这里](https://developer.mozilla.org/en-US/docs/HTML/Canvas)阅读更多关于 canvas 以及如何使用它和一个简单教程的[信息](https://developer.mozilla.org/en-US/docs/Canvas_tutorial)。[此处](http://www.html5tutorial.info/html5-canvas-text.php)解释了如何在画布中绘制文本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T05:56:51.300

如果您不想使用 css 或图像来实现圆角外观，您可以查看[nifty corners](http://www.html.it/articoli/niftycube/index.html)。

基本上它使用javascript在角落覆盖新标签并使用颜色对比来获得曲线。

# actionscript-3 - MovieClips 和 e.target，检索内部文本

> ID：12766349
> 
> 赞同：0
> 
> 时间：2012-10-07T05:26:06.667
> 
> 标签：actionscript-3, flash

我的问题如下：

我有一个由包含动态文本框 (text_txt) 和基本背景矩形的 MovieClip 组成的菜单。

我已经通过将所有项目名称放入一个数组并循环遍历它，为由实例名称（item1_mc 等）定义的每个项目分配了 MouseEvent.CLICK 的事件侦听器。

```
var menuItemsArray:Array = [item1, item2, item3, item4, item5, item6, item7, item8, item9, item10, item11, item12];

for(var i:int = 0; i < menuItemsArray.length; i++){
    menuItemsArray[i].text_txt.text = labelArray[i];
    menuItemsArray[i].addEventListener(MouseEvent.CLICK, menuItem_click);
} 
```

...然后使用以下方法确定正在按下哪个（并从中删除文本）：

```
function menuItem_click(e:MouseEvent){
    unit_name = e.target.text;
    } 
```

...如果我直接单击 MovieClip 中的 TextField（返回文本），一切正常，但如果我单击 MovieClip 的边缘（以及动态文本框区域之外），它只会返回错误 #2007因为它试图从不包含文本的 [object menuItem_button_23] 中提取文本。

理想情况下，我想要发生的是，无论我在哪里单击 MovieClip 的“按钮”，我都会拉出文本，但我已经尝试过包括 e.currentTarget、e.target 以及两者的组合以及 .text , .text_txt.text 等等——但一切都以在外面有一个“死区”的问题告终。

此外，基本上我想要做的是创建一个包含标签文本的数组（通过内部文本字段）标记的电影剪辑“按钮”菜单。然后，当我单击按钮时，我想确定按下的是哪个按钮，并检索标签以允许我访问与所述标签文本相关的更多信息。

如果有人有解决方案，或者我正在尝试做的更好的方法，我会全神贯注。应该注意我的 AS3 经验/知识充其量只是平均水平，我很想学习一些新技术来完成我想做的事情。如果需要，我还可以提供更多信息。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T05:42:58.553

您必须检查您的目标是否实际上是一个 TextField。如果不是，那你就得参考text_txt里面了。

```
function menuItem_click(e:MouseEvent){
    if (e.target is TextField) unit_name = e.target.text;
    else {
        if (e.target.text_txt) unit_name=e.target.text_txt.text; 
        else unit_name='';
    }
} 
```

这首先检查事件的实际目标是什么。如果它是一个 TextField，那么你点击了它，所以让我们获取它的文本。如果不是，那么它应该是一个 MovieClip，我们检查它是否分配了一个“text_txt”属性，因为如果是，它将是一个 TextField，所以我们从中取出文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T09:39:36.993

您还可以做的是打开`mouseChildren`影片剪辑并在其上定义一个 getter/setter 对来读取/写入嵌套文本字段的文本。

### 在 Flash 库中的 MovieClip 中，将以下代码写入剪辑的其中一个图层

```
this.mouseChildren = false;

function get text():String { return text_txt.text; }
function set text(value:String):void { text_txt.text = value; } 
```

第一行禁止你的movieclip 的任何子级成为鼠标事件的目标，并且单击movieclip 可见区域的某个位置会触发一个`click`-event，其`target`属性设置为movieclip。这统一了您必须处理事件的方式。

getter/setter 对封装了对文本字段`text`属性的访问，因此无需`text_txt`从影片剪辑外部读取/写入。

### 您的事件侦听器应该看起来像您预期的那样

```
function menuItem_click(e:MouseEvent):void {
    unit_name = e.target.text;
} 
```

另外，使用这种方式`text_txt`在初始化时也不需要直接访问。您可以稍微简化一下 for 循环并编写：

```
for(var i:int = 0; i < menuItemsArray.length; i++){
    menuItemsArray[i].text = labelArray[i];
    menuItemsArray[i].addEventListener(MouseEvent.CLICK, menuItem_click);
} 
```

希望这是一个最适合您需求的解决方案。告诉我，如果你有任何问题，或者什么时候忘记了什么。;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T18:24:23.613

应 32bitkid 的要求，我发布了我之前的评论作为答案：

尝试使用 e.currentTarget。使用 e.target 可以让您获得 CLICK 事件源自的显示列表中的原始项目。由于 CLICK 是一个冒泡事件，因此它通常不是您所指的 MovieClip，而是 MovieClip 的内部对象（因此 e.target 仅在您实际单击 TextField 时才在您的示例中工作）。如果您使用 e.currentTarget，您正在做的是检索您添加事件的对象，在这种情况下是外部 MovieClip，所以`e.currentTarget.text_txt.text`应该这样做......

# batch-file - ADB Shell Run Iperf 的 Windows 批处理文件

> ID：12766352
> 
> 赞同：3
> 
> 时间：2012-10-07T05:26:37.107
> 
> 标签：batch-file, adb

我正在尝试编写一个 Windows 批处理文件，该文件将打开我的 ADB Shell……然后编写一个命令并在 adb shell 中执行，而不是在 Windows 命令提示符下执行。我试图弄清楚在将 adb shell 打开到该提示符而不是命令提示符后如何让批处理编写命令。当我现在尝试它时，它会打开 adb shell，但随后会在命令提示符而不是 adb shell 中写入我尝试执行的命令。

这是我在打开 Windows 命令提示符后手动执行的操作。

```
cd\
cd adb
adb shell
iperf -s -u -il -p0001 - this line is written in the adb shell prompt $ to open particular port for data 
```

对这个新手的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:51:34.393

尝试这个：

```
adb shell "iperf -s -u -il -p0001" 
```

将您的 shell 命令放在引号中。例如，如果我想在我的安卓手机上运行一个应用程序，我会写：

```
adb shell "am start -n com.package.name/com.package.name.Activity" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:38:40.977

您可以尝试将命令通过管道传输到 shell 中。你的完整批次看起来像这样

```
cd\
cd adb
iperf -s -u -il -p0001 | adb shell 
```

# linux - 每个数组元素存储一行 grep 输出

> ID：12766353
> 
> 赞同：2
> 
> 时间：2012-10-07T05:26:42.643
> 
> 标签：linux, arrays, grep

如果您使用多行和每行多个单词执行 grep 命令，则输出似乎按单词而不是按行存储在数组中。您如何更改它以使其按行存储？

例如：

```
first_title=( $(egrep -o 'class\=\"title\" title\=\"'.\{1,80\} index.html
| egrep -o title\=\".*\"\> | sed 's/title\=\"//g' | sed 's/">//g') )

echo ${first_title[0]} 
```

如果这返回 10 行，并且第一个读取“这是一行”

它只会输出“这个”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T06:11:27.350

您可以使用 IFS 更改字段分隔符：

```
IFS='
'
first_title=( $(egrep -o 'class\=\"title\" title\=\"'.\{1,80\} index.html
| egrep -o title\=\".*\"\> | sed 's/title\=\"//g' | sed 's/">//g') )

echo ${first_title[0]}
unset IFS 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T05:57:39.893

如果要添加带有空格的元素，则需要像以下示例中那样引用它：

```
arr=( "this is a line" "this is another line" this is some words )
echo "${arr[0]}"
this is a line
printf '%s\n' "${arr[@]}"
this is a line
this is another line
this
is
some
words 
```

所以在你的情况下，尝试这样的事情：

```
first_title=(
    $(
        egrep -o 'class\=\"title\" title\=\"'.\{1,80\} index.html |
            egrep -o title\=\".*\"\> |
            sed 's/title\=\"//g;
                s/">//g;
                s/.*/"&"/'
    )
)

echo "${first_title[0]}" 
```

# c# - 如何创建动态图像控制 Metro 应用程序

> ID：12766357
> 
> 赞同：0
> 
> 时间：2012-10-07T05:27:23.753
> 
> 标签：c#, windows-8, microsoft-metro, dynamic-controls

我正在尝试从显示我所有的 Xbox Live 好友信息的 XML 文档中获取信息。我现在想要做的是在动态创建的图像控件中显示头像，但我不确定如何实际让该图像显示在我的应用程序网格上。

到目前为止，我已经尝试过使用玩家标签创建一个动态控件并将我的自定义文本添加到其中。这是到目前为止的代码：

```
 string gamertag, avatarURL;
        foreach (XElement elm in doc.Descendants().Elements("Friends"))
        {

            gamertag = elm.Element("Gamertag").Value;
            avatarURL = elm.Element("AvatarLarge").Value;

            Image friendimage = new Image();
            friendimage.Name = gamertag.ToString() + "ImageControl";

            BitmapImage AccountPicbitmap = new BitmapImage();
            AccountPicbitmap.UriSource = new Uri(avatarURL);

            friendimage.Source = AccountPicbitmap;
            //Some code to display this control with the avatar image using the URL retrieved, I want to play these tiles side by side

        } 
```

关于我如何做到这一点的任何建议？提前致谢！

更新：我已将此控件添加到我的 XAML 中，但现在我遇到了一些奇怪的异常： System.Runtime.Remoting.RemotingException [7756] 设计器进程意外终止！

```
<ItemsControl HorizontalAlignment="Left" Height="100" VerticalAlignment="Top" Width="1249" Margin="55,484,0,0" ItemsSource="{Binding}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Image Source="{Binding avatarURL}" Name="{Binding GamerTag}"/>
        </DataTemplate>
    </ItemsControl.ItemTemplate>

</ItemsControl> 
```

现在，当我调试应用程序时，它会进入无限循环并在初始化时引发异常

```
public MainPage()
    {
        this.InitializeComponent();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T20:22:33.733

在 xaml 中这样做会更容易，如下所示：

首先，将`DataContext`您的页面设置为您的视图模型。然后创建一个属性，将您的朋友集合公开为对象集合，这些对象集合`GamerTag`和`avatarURL`. 使用以下 xaml 显示此集合：

```
<ItemsControl ItemsSource="{Binding}">
    <ItemsControl.DataTemplate>
        <DataTemplate>
            <Image Source="{Binding avatarURL}" Name="{Binding GamerTag}"/>
        </DataTempate>
    </ItemsControlDataTempalte>
</ItemsControl> 
```

后面的代码应该是这样的：

```
public class yourCodeThatGetsYourFriends : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    public void GetFriends()
    {
        //get friends and put into friend objects defined below
        //create an ObservableCollection of them and assign it to the Friends (make sure its 'Friends' not 'friends") property
    }
    public ObservableCollection<friend> friends;
    public ObservableCollection<friend> Friends;
    {
        get
        {
            return friends;
        }
        set
        {
            friends = value;
            NotifyPropertyChanged("Friends");
        }
    }        

    private void NotifyPropertyChanged([CallerMemberName] String propertyName = "")
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

}

public class friend : INotifyPropertyChanged
{        
    public event PropertyChangedEventHandler PropertyChanged;

    string url;
    public string avatarURL
    {
        get
        {
            return url;
        }
        set
        {
            url = value;
            NotifyPropertyChanaged("avatarURL");
        }
    }
    string tag;
    public string GamerTag
    {
        get
        {
            return tag;
        }
        set
        {
            tag= value;
            NotifyPropertyChanaged("GamerTag");
        }
    }

    private void NotifyPropertyChanged([CallerMemberName] String propertyName = "")
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

} 
```

# python - 根据标签分割文本缓冲区文本 python gtk

> ID：12766365
> 
> 赞同：0
> 
> 时间：2012-10-07T05:29:23.530
> 
> 标签：python, tags, split, gtk, pygtk

我有一个带有文本缓冲区的文本视图。我在文本缓冲区中添加了许多标签

```
buffer.get_tag_table().add(tag) 
```

所以我想知道是否有一种方法可以从文本视图中获取所有文本并根据它具有的标签对其进行拆分

我正在使用 gtk 2 顺便说一句

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:09:59.140

从缓冲区开始处的迭代器开始，并在缓冲区中移动`it.forward_to_tag_toggle()`。在每一点，`it.get_tags()`将为您提供适用于当前文本块的标签列表，并`buf.get_text(it, next_it)`为您提供文本本身：

```
def split(buf):
    it = buf.get_start_iter()
    while not it.is_end():
        nextpos = it.copy()
        nextpos.forward_to_tag_toggle(None)
        yield buf.get_text(it, nextpos), it.get_tags()
        it = nextpos 
```

# javascript - 在鼠标悬停时更改图像的通用函数

> ID：12766373
> 
> 赞同：0
> 
> 时间：2012-10-07T05:31:40.540
> 
> 标签：javascript, mouseover, mouseout

我试图制作一个通用脚本来更改鼠标悬停和鼠标悬停时的图像。

这是我正在尝试的，但它不起作用。

```
<script language="javascript" type="text/javascript">
   function mouseOverImage()
   {
      document.getElementById(this.id).src = "/templates/articulistas/images/" + this.id + ".gif";
                        }
   function mouseOutImage()
   {
      document.getElementById(this.id).src = "/templates/articulistas/images/" + this.id + "-off.gif";
   }
</script> 
```

的HTML：

```
<a href="" title="Aumentar o Tamanho da Letra" class="increaseFont">
<img id="aumentar-letra" src="/templates/articulistas/images/aumentar-letra-off.gif" onmouseover="mouseOverImage(this)" onmouseout="mouseOutImage(this)" /></a>
<a href="" title="Diminuir o Tamanho da Letra" class="decreaseFont">
<img id="diminuir-letra" src="/templates/articulistas/images/diminuir-letra-off.gif" onmouseover="mouseOverImage(this)" onmouseout="mouseOutImage(this)" /></a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T05:41:50.737

该代码应该更新图像源，但前提是您将其连接到适当的`img`元素（并且以适当的方式，因为您依赖于`this`）。鉴于`document.getElementById(this.id) is null`您上面提到的错误，您没有正确执行此操作。

检查此处的示例以了解将`img`元素与处理程序函数链接的一种方法：

[http://jsfiddle.net/NdJJZ/2](http://jsfiddle.net/NdJJZ/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T05:35:11.540

您可能需要检查以确保路径正确：

`"/templates/articulistas/images/" + this.id + ".gif";`

这看起来可能是相对路径，因此您需要将其更改为`../templates/articulistas/images/" + this.id + ".gif";`假设这是正确的相对路径。

此外，您需要正确映射函数中的参数：

```
function mouseOverImage(object) // Accepting an object as argument.
   {
      document.getElementById(object.id).src = "/templates/articulistas/images/" + object.id + ".gif";
                        }
   function mouseOutImage(object)
   {
      document.getElementById(object.id).src = "/templates/articulistas/images/" + object.id + "-off.gif";
   } 
```

# r - 删除行名但保留 &

> ID：12766379
> 
> 赞同：3
> 
> 时间：2012-10-07T05:33:06.013
> 
> 标签：r, dataframe, latex, xtable

在 xtable 中，有没有办法打印没有行名的乳胶表，但同时保留`&`在左侧？

我也不想在我的数据矩阵中将行名设置为 NA 来实现这一壮举。

例子：

```
require(xtable)
o <- do.call(cbind,lapply(1:10,function(i) matrix(rnorm(10)) ))
print(xtable(o)) 
```

我们可以在这个输出的 LHS 上看到，有`1,2,3,4,...,10`. 这是不好的。我不想要这个。

然而

`print(xtable(o),include.rownames=FALSE)`

没有给我我想要的，因为它删除`&`了矩阵 LHS 处的 。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T09:50:38.197

这建立在我对[您其他帖子的](https://stackoverflow.com/questions/12766173/xtable-package-skipping-some-rows-in-the-output/)回复之上。正如@Roman Luštrik 指出的那样，我无法解决第一行的问题（抱歉，编辑时间限制让我无法发表评论）但据我了解，它应该在手动插入第一行后解决你的两个问题`&`：

```
o <- matrix( rnorm( 770, 10 ), ncol=10 )
addtorow <- list()
addtorow$pos <- list()
addtorow$pos[[1]] <- c(0:13,15:28,30:58,60:76)
addtorow$pos[[2]] <- c(14,29,59)
addtorow$command <- c( "&", "\\\\ \n &" )
print( xtable( o ), add.to.row = addtorow, include.rownames=FALSE ) 
```

希望这能让您（以及您的合著者）的生活更轻松！

# python - 在Python中按值将一个实例变量分配给同一实例上的另一个？

> ID：12766382
> 
> 赞同：0
> 
> 时间：2012-10-07T05:34:03.267
> 
> 标签：python, variables

```
//pseudo-code
class animshape(object):

    def __init__(self,position):
        self.position= position

    def startupdate(self):
        self.startPosition = self.position //I want to get the value 
                          //of self.position only when startupdate is called
        self.animate()

    def animate:
        self.position += 1 //alter the value of self.position 
```

在我的实际代码位置是 Vector2 类型，使用 pyEuclid 库。

我只想在调用 startupdate 时设置变量 self.startPosition = self.position 。现在发生的情况是，只要位置改变，startPosition 就会改变，这对我来说很有意义。但是python中是否有我想要的行为机制？

# c# - 更改文件的属性表

> ID：12766383
> 
> 赞同：1
> 
> 时间：2012-10-07T05:34:06.527
> 
> 标签：c#, c++, .net

当我们右键单击并选择属性时，如何更改我们看到的文件的属性对话框，我想在那里插入我自己的属性表并读取/设置值。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T06:53:01.747

这不是一个真正的 C++ 问题。您可能想查看[http://msdn.microsoft.com/en-us/library/windows/desktop/cc144106(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144106(v=vs.85).aspx)

# ios - Swiffy 输出透明背景

> ID：12766385
> 
> 赞同：0
> 
> 时间：2012-10-07T05:34:19.250
> 
> 标签：ios, cocoa-touch, background, google-swiffy

我只是想找出一种在 iOS 应用程序中使用快速输出的 HTML5 动画的方法，但我不能放弃灰色背景。我认为这将是一种将动画放入其中并规避在视网膜 iPad 显示器上使用 png 的存储问题的方法。现在我无法使背景清晰。我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T15:03:44.773

在 Swiffy 生成的代码中，查找 backgroundColor 并删除它，包括它的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T12:03:33.720

尝试找到具有纯色背景的元素并将其动态更改为透明，如下所示：

```
document.getElementById('swiffycontainer').childNodes[1].style.background = "rgba(255, 255, 255, 0)"; 
```

或无

```
document.getElementById('swiffycontainer').childNodes[1].style.background = "none"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-10T15:51:53.883

将此添加到您的 CSS 或类似内容中。

```
#containerdivid svg > g > g > rect {
    display: none;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-28T16:42:17.620

根据[http://css-tricks.com/override-inline-styles-with-css/](http://css-tricks.com/override-inline-styles-with-css/)，您可以使用这个 CSS hack

```
div[id=swiffycontainer] > div{
    background-color: transparent!important;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-10T23:04:59.550

删除 backgroundColor: 元素对我不起作用，直到我发现 Google 在当前版本的 Swiffy 运行时中破坏了这样做的能力。如果你也改变：

src="https://www.gstatic.com/swiffy/v5.2/runtime.js"

至

src="https://www.gstatic.com/swiffy/v5.1/runtime.js"

在文件的顶部，您应该会发现透明背景可以正常工作（当然，5.2 库中的任何增强功能都将不再可用）。

编辑：Michael Prescott 已经指出，由于 Swiffy 转换器版本和运行时之间的不匹配，该解决方案将无法可靠地工作。不依赖于 5.1 导出器的替代解决方案是在此处建议的其他解决方案的基础上构建。尝试将以下函数添加到脚本中。它轮询查看 Swiffy 对象何时安装了它的首选背景颜色，然后替换它。

```
(function() {
    var firstNode=document.getElementById('swiffycontainer').childNodes[1];
    //firstNode.style.visibility = "hidden";
    if (firstNode.style.background=="") {
        setTimeout(arguments.callee, 10);
    } else {
        firstNode.style.background = "none";
        //firstNode.style.visibility = "visible";
    }
})(); 
```

当 Swiffy 首先设置一个纯色背景然后它被替换时，这似乎并没有显示出故障。但是，为了更加确定，您可以启用注释掉的行来隐藏第一个节点，直到设置了正确的透明度。

此致

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-28T15:26:25.267

这些都不适合我（使用 5.2 版），通过设置新样式来解决：

```
<script>
    var stage = new swiffy.Stage(document.getElementById('swiffycontainer'),swiffyobject);      
    stage.start();
</script>
<style> 
    div {background: url("../bgimg.jpg") repeat scroll 0 0 transparent !important;} 
</style> 
```

# c# - 使用 MVC3 和 Razor 的不显眼的 jQuery 验证失败

> ID：12766386
> 
> 赞同：0
> 
> 时间：2012-10-07T05:34:35.607
> 
> 标签：c#, jquery, asp.net-mvc, validation

```
<script src="/Scripts/jquery-1.6.2.min.js" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
<script src="/Scripts/jquery.validate.min.js" type="text/javascript"></script>
<script src="/Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>

@model Izdivac.Models.User  
@using(Html.BeginForm("Basics", "User", FormMethod.Post , new { id="aboutme"}))
{
    @Html.ValidationSummary(true)

    <fieldset>
        <ul> 
            <li>
                <label>Username</label>
                @Html.TextBoxFor(m => m.Username, new {@class = "input-text size-xl"})
                @Html.ValidationMessageFor(model => model.Username) 
            </li>
            <li>
                <label>First Name</label>
                @Html.TextBoxFor(m => m.FirstName, new {@class = "input-text size-xl"})
                @Html.ValidationMessageFor(model => model.FirstName) 
            </li>
            <li>
                <label>Last Name</label>
                @Html.TextBoxFor(m => m.LastName, new {@class = "input-text size-xl"})
                @Html.ValidationMessageFor(model => model.LastName) 
            </li> 
            <li>
                <label>Gender</label>
                @Html.EnumDropDownListFor(m => m.BasicInfo.Gender)
            </li>
         <li>
                <input type="submit" class="input-button" />
            </li>
        </ul>
    </fieldset>
}

<script type="text/javascript">
    $(function () {
        $('#aboutme').submit(function () {
            $.ajax({
                url: this.action,
                type: this.method,
                data: $(this).serialize(),
                success: function (result) {

                    $('#ShowResultHere').html(result.s);
                }
            }); 
            return false;
        });
    }); 
</script> 
```

我正在尝试在不访问服务器并失败的情况下进行客户端验证。

我怎样才能解决这个问题？为什么会失败？

编辑：

这是模型：

```
public class User
{ 
    public int Id { set; get; }

    [StringLength(40)]
    [Required]
    public string FirstName { set; get; }

    [StringLength(40)]
    [Required]
    public string LastName { set; get; }

    [StringLength(100)]
    [Required]
    public string FullName { set; get; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T05:51:59.290

```
 var formValid = $("#aboutme").validate().form();

        if (!formValid) return false; 
```

做到了。

# java - Java检测字符串中的双双引号

> ID：12766387
> 
> 赞同：3
> 
> 时间：2012-10-07T05:35:04.903
> 
> 标签：java, string, logic

示例代码

```
public static void main(String args[]){  
String test=null;   
if(some condition)  
   test = "\"abc\"";
else
   test ="def";

// if condition is true , in debug mode when i check the value of test its ""abc"" (double double quote);   
// if condition is false , then value of test is "def" (double quotes only one time);

} 
```

寻找一种逻辑来检查字符串是否有双双引号。试过下面的东西

```
// test.startsWith("\"\""))  // this didn;t work 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-07T05:40:28.473

您正在检查 2`"(double quotes)s`而您的字符串开头只有一个。试试下面：

```
 test.startsWith("\"");
 test.endsWith("\""); 
```

应该管用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T05:44:36.370

我不完全确定您想要实现什么，但请确保在对其执行任何操作之前初始化“测试”。

您只需要检查“test”是否以单个双引号开头，因为第一个双引号不是字符串内容的一部分。

# eclipse - 下载 Android SDK 工具时出错

> ID：12766389
> 
> 赞同：3
> 
> 时间：2012-10-07T05:35:35.433
> 
> 标签：eclipse, adt, android-sdk-2.1, android-sdk-tools

我正在尝试安装 Android SDK Tool(Revision 20) 。但是，如附件所示，达到 59% 后总是失败。

我已经将我的 ADT 插件更新为 20.0.3，如此处[所述](http://developer.android.com/tools/sdk/tools-notes.html)

![在此处输入图像描述](../Images/fb27f8033cd0b40111278d102efb26ec.png)

然后它以这个错误结束： -

```
Downloading Android SDK Tools, revision 20
Download finished with wrong size. Expected 90245472 bytes, got 54106132 bytes. 
```

另外，我想知道这个版本是否存在一些错误，我该如何切换回旧的 SDK 工具版本。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T06:09:11.140

出现此问题主要是由于互联网连接速度较慢。

您可以将其作为一种解决方法

*   [从http://dl.google.com/android/repository/tools_r20.0.3-windows.zip](http://dl.google.com/android/repository/tools_r20.0.3-windows.zip)下载 Android SDK Tools Rev. 20（最新版本）

*   将其复制到`C:\Program Files\Android\android-sdk\temp`然后尝试从 Android SDK Manager 安装包。这样，它就不会下载该文件，因为它已经存在于临时文件夹中。它只会提取并安装它。

希望有帮助！

# ruby-on-rails - 将 Gmaps4Rails 添加到现有站点 - 需要从现有地址数据填充纬度长字段

> ID：12766390
> 
> 赞同：0
> 
> 时间：2012-10-07T05:36:13.897
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gmaps4rails

我正在将 gmaps4rails 集成到现有站点中，并使其在生产站点上运行良好，以获取自推出以来已创建或更新的记录，但是如果用户提取过去创建的记录，则地图将为空白因为 lat 和 long 字段尚未更新。我正在寻找一种通过更新过程运行所有记录的方法，以便它们将自动生成并且地图将正确显示。

模型

```
acts_as_gmappable

def gmaps4rails_address
  "#{self.street}, #{self.city}, #{self.state}"
end 
```

看法

```
<%= gmaps({"map_options" => {"auto_adjust" => true, "auto_zoom" => false, "zoom" => 14},
                  "markers"=> {"data" => @json }}) %> 
```

我可以从控制台运行一些不会更改任何现有记录数据但会更新所需字段的东西吗？下面会得到我想要的吗？

```
Workorder.all.update_attributes 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T19:37:40.407

`process_geocoding` [地理编码在 before_filter: defined here](https://github.com/apneadiving/Google-Maps-for-Rails/blob/master/lib/gmaps4rails/acts_as_gmappable.rb#L6)中触发。

为了性能起见，我会过滤条目并分批加载它们，我会说：

```
Workorder.where("latitude IS NULL").find_each do |order|
  order.save
end 
```

一个原始的方法是：

```
Workorder.all.each do |order|
  order.save if order.latitude.blank?
end 
```

# javascript - 单击另一个 tr 时使用 javascript / jQuery 显示下一个 tr

> ID：12766395
> 
> 赞同：1
> 
> 时间：2012-10-07T05:37:45.043
> 
> 标签：javascript, jquery, hide, show, tablerow

我正在创建一个管理页面，显示待批准的用户注册列表。我有一个表格，列出了每个用户的用户名和一个批准/拒绝复选框（我可能会更改为单选按钮）。每个列出的用户下方都有一个隐藏的表格行，显示他们的详细信息（全名、注册日期等）。

我想要的是使用用户名单击 tr，并在其下方隐藏 tr 以显示所有详细信息，然后当您单击不再隐藏的 tr 时，它再次隐藏。

它实际上在做的是在我单击带有用户名的 tr 时显示所有隐藏的 tr，然后如果我单击以前隐藏的 tr 之一，则该特定 tr 将隐藏。

有没有办法使用 index + 1 告诉它要显示哪个隐藏的 tr ？或者有没有办法用第一个孩子功能做到这一点？还是有更好的方法来做到这一点？

我不能将特定的类名与隐藏的 tr 一起使用，因为无法知道页面加载时会有多少待处理的用户（它们都是从数据库中提取的）。

这是我的代码：

```
<?php
  for ($output_user = 0; $output_user <= $num_pending - 1; $output_user++)
  {
    echo "\n\t<tr class=\"pending_users\">\n\t\t<td class=\"admin\">".$pending_user[$output_user][0]."</td>";
    echo "\n\t\t<td class=\"m_1\"><input type=\"checkbox\" value=\"approve\"/></td>";
    echo "\n\t\t<td class=\"m_l\"><input type=\"checkbox\" value=\"deny\"/></td>";
    echo "\n\t</tr>";
    echo "\n\t<tr class=\"showhide\">\n\t\t<td class=\"admin\" colspan=\"3\">Name:".$pending_user[$output_user][1]." ".$pending_user[$output_user][2]."\nEmail: ".$pending_user[$output_user][3]."\nEnrol Date: ".$pending_user[$output_user][4]."</td>\n\t</tr>";
    echo "\n\t</tr>";
  }
?>
<script>
 $(document).ready(function() {
  //Hides specific user details when the page loads
  $("div.show_user_info tr.showhide:visible").hide();

  //Makes every other row another bgcolor - effects pending user table only
  $("tr.pending_users:odd").css("background-color", "#ffff00");
 });

 $("td.admin").click(function () {
  $("div.show_user_info tr.showhide:hidden").slideDown("slow");
 });

 $("tr.showhide").click(function () {

  $(this).slideUp("slow");          
 });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T05:56:21.687

用于`$(this).parent().next('tr.showhide')`获取单击单元格的父行的下一个 tr.showhide：

```
$('tr.pending_users td.admin')
      .click(function(){$(this).parent()
                        .next('tr.showhide')
                         .slideToggle();}); 
```

`slideToggle()`切换可见性。

演示：http: [**//jsfiddle.net/doktormolle/kCL5A/**](http://jsfiddle.net/doktormolle/kCL5A/)

# php - PHP str 替换

> ID：12766398
> 
> 赞同：0
> 
> 时间：2012-10-07T05:38:56.493
> 
> 标签：php

我尝试替换一个包含特殊字符的文件

从：

```
[v]_CØDE：BREAKER_-_01_[gg][D00B1].mkv 
```

至：

```
[v]_CoDE：BREAKER_-_01_[gg][D00B1].mkv 
```

但是当我尝试下面的代码时

```
if ($handle = opendir($refolder)) {
  while (false !== ($entry = readdir($handle))) {
    $renameTHEfile = $entry;
    $renameTHEfile = str_ireplace("Ø","O",$renameTHEfile);
    $renameTHEfile = str_ireplace('ø','o',$renameTHEfile);
    $renameTHEfile = str_ireplace(":","_",$renameTHEfile);
    $renameTHEfile = str_ireplace("!","",$renameTHEfile);
    $renameTHEfile = str_ireplace("'","",$renameTHEfile);
    $renameTHEfile = str_ireplace('"','',$renameTHEfile);
    $renameTHEfile = str_ireplace(",","",$renameTHEfile);
    $renameTHEfile = str_ireplace("#","",$renameTHEfile);
    $renameTHEfile = str_ireplace("$","",$renameTHEfile);
    $renameTHEfile = str_ireplace('/','',$renameTHEfile);
    $renameTHEfile = str_ireplace("?","",$renameTHEfile);

    $theoldfile_rename = $refolder . $entry;

    $thenewfile_rename = $refolder . $renameTHEfile;

    $cmd_renameit = 'move "' .$theoldfile_rename. '" "'.$thenewfile_rename .'"';

    echo $cmd_renameit;

    exec($cmd_renameit);
  }
} 
```

视频文件将输出为

```
[v]_CØDE 
```

如何将其正确替换为，我还需要将 : 替换为 _

```
[v]_CODE_BREAKER_-_01_[gg][D00B1].mkv 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T09:58:33.457

只需创建一个根据您的需要重命名的函数，您可以考虑这样的事情：

```
<?php
function rename_ani($name){
    $name = str_replace(array("Ø","ø"), "O", $name);
    $name = str_replace(":","_",$name);
    $name = str_replace(array("!","'",'"',",","#","$","/","?"),"",$name);
    return $name;
}

$anime = '[v]_CØDE:BREAKER_-_01_[gg][D00B1].mkv';
echo rename_ani($anime); // output: [v]_CODE_BREAKER_-_01_[gg][D00B1].mkv

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T05:58:57.570

您在文件中有一个空格。将其转义为：“\”或其他字符。在你的情况下，只需删除空间。str_replace(" ", "", $str)

# php - 通过 mysql 为用户分配不同的布局

> ID：12766399
> 
> 赞同：1
> 
> 时间：2012-10-07T05:38:59.577
> 
> 标签：php, mysql, inner-join

我正在一个具有编辑个人资料详细信息页面的网站上工作。我设置为编辑的选项之一是布局。我正在尝试使用 cookie 和 mysql 查询来控制布局的显示。目前，我在通过表单提交传递用户输入后使用 if 和 else 语句来决定为布局设置哪个 cookie。

然后，在显示配置文件的实际视图配置文件页面上，我再次使用 if else 语句和 mysql 查询（以及设置为用户名的 GET 变量）来决定为该用户调用哪个布局。

> 这是问题所在。我在找到正确的方式来显示为使用 GET 变量调用的用户选择的布局（使用 sql 查询）时遇到问题。

我的用户表是用行名排列的：

id (auto incre) 用户名
​​ 姓名
年龄
性别 aboutme
喜欢
不喜欢
音乐
template_id

我的模板表是用行名列出的：

template_id (auto incre)
Head_Open
Head_Close
Page_End
Date

我考虑过在两个表上进行某种类型的连接，但我似乎无法弄清楚。我需要它，因此每个用户也会在模板表中多次添加，或者可能只是在模板表中针对表中的每个唯一布局进行更新。

如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T05:54:01.100

您可以连接两个表，如下所示，以获取登录用户的当前布局。

```
$query = "select t.* from users u, templates t where u.template_id = t.template_id AND u.id = '".$_GET['userid']."'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T05:49:10.593

查询

`"select tpl.* from users u inner join templates tpl on tpl.template_id = u.template_id where u.name = " + $THE_USER_NAME`

应该返回模板。我假设您确实知道如何获取 THE_USER_NAME 以及如何从返回的行中提取信息。

# jquery - 从类中获取 DIV id 以将更改专门应用于当前指向的 div

> ID：12766400
> 
> 赞同：0
> 
> 时间：2012-10-07T05:39:21.230
> 
> 标签：jquery

由于 CSS 原因，我有一个包含多个具有相同类名的 div 的页面。我想改变我指向它们的每一个的边框颜色。我使用 onmouseover 事件做到了这一点，如下所示。但是代码似乎有问题。我想知道是否有办法获取 div 的 id 并仅对其应用颜色。

```
 $('.link')
            .mouseover(function(evt) {
            evt.preventDefault(); 
            $(document.querySelector(this).id).css('border-color', '#FFF');
            })
            .mouseout(function() {
            $(document.querySelector(this).id).css('border-color', "#CCC");
        }); 
```

链接是类名，包含几个子 div

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T05:42:45.140

在鼠标事件处理程序中使用以下内容：

```
$(this).css(...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T05:43:01.233

`$(this)`将完全按照您的意愿工作..您不需要获取 id 然后应用到该选择器..

```
$(this).css('border-color', '#FFF'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T05:44:26.083

尝试这个

```
$('.link')
       .mouseover(function(evt) {
         evt.preventDefault(); 
         $(this).css('border-color', '#FFF');
     })
       .mouseout(function() {
        $(this).css('border-color', "#CCC");
    }); 
```

# jquery - twitter-bootstrap 和 HighCharts 插件之间的冲突

> ID：12766402
> 
> 赞同：2
> 
> 时间：2012-10-07T05:39:36.810
> 
> 标签：jquery, jquery-ui, twitter-bootstrap, highcharts

我正在使用 twitter-bootstrap 框架来实现它的一些功能，例如工具提示、提前输入和日期选择器。

我也在使用`HighCharts`插件在同一页面上显示图表。

但两者之间似乎存在某种冲突。由于 HighCharts 代码，引导功能停止工作，并且我在控制台上收到与引导相关的错误：

```
TypeError: $("a[rel='tooltip']").tooltip is not a function 
```

当我删除 HighCharts 代码时，引导功能就完美地出现了。

所以任何人都可以指导我解决这个问题。

我正在使用以下 js 文件： **HighCharts**

```
<script type="text/javascript" src="js/highcharts.js"></script>
<script type="text/javascript" src="js/exporting.js"></script>

<script type="text/javascript" >    
$(function () {
    $(document).ready(function() {                  

        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'chart',
                type: 'column'
            },
            title: {
                text: 'Monthly Expenditure'
            },
            subtitle: {
                text: ''
            },
            xAxis: {
                categories: ['Months'],
                title: {
                    text: null
                }
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Expenditure',
                    align: 'high'
                },
                labels: {
                    overflow: 'justify'
                }
            },
            tooltip: {
                formatter: function() {
                    return ''+
                        this.series.name +': '+ this.y +' (local currency)';
                }
            },
            plotOptions: {
                bar: {
                    dataLabels: {
                        enabled: true
                    }
                }
            },
            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'top',
                x: -100,
                y: 100,
                floating: true,
                borderWidth: 1,
                backgroundColor: '#FFFFFF',
                shadow: true
            },
            credits: {
                enabled: false
            },
            series: <?=json_encode($series);?>                       
        });
    });

});
</script> 
```

**引导程序**

```
<script type="text/javascript" src="js/jquery-1.8.0.js"></script>
    <script type="text/javascript" src="js/bootstrap.js"></script>
    <link href="css/bootstrap-responsive.css" rel="stylesheet">
    <link href="css/bootstrap.css" rel="stylesheet"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:53:05.757

我将 Twitter 引导工具提示与 HighCharts 一起使用。该方法是为我们希望使用 Twitter 工具提示的所有元素添加一个类，并将 title 属性添加到包含工具提示中所需文本的元素。在我们的例子中，我们为图表图例和图表标题执行此操作。我们使用 mouseover 事件处理程序来设置工具提示：

```
$(function () {
$.fn.tooltip.defaults.placement = "bottom";
$.fn.tooltip.defaults.delay = {
    show: 500,
    hide: 50
};
$.fn.tooltip.defaults.html = true;

//read more at http://stackoverflow.com/questions/8678755
$(document.body).delegate(".Tipsy", "mouseover", function (evt) {
    var elt = $(this).closest(".Tipsy");
    elt.removeClass("Tipsy").addClass("Tipsified");
    elt.tooltip(); //set up tooltip
    elt.tooltip("fixTitle"); //fix titles
    var timeout = setTimeout(function () {
        elt.off("mouseleave.autotipify").tooltip("show");
    }, 500);
    //if the user moves out before tooltip shows
    $(this).on("mouseleave.autotipify", function (evt2) {
        clearTimeout(timeout);
    });

});
//clicking on a trigger should cause the tip to disappear
$(document.body).delegate(".Tipsified", "click", function (evt) {
    $(this).tooltip("hide");
}); 
```

});

# c - 使用 spin_lock 和 spin_lock_irqsave，死锁？

> ID：12766403
> 
> 赞同：1
> 
> 时间：2012-10-07T05:40:11.083
> 
> 标签：c, linux, locking, kernel, deadlock

我正在阅读一些代码，并在函数 foo 中看到：

```
// x is a global variable shared by all functions
spin_lock(&x);
if(some condition)
    function();
spin_unlock(&x); 
```

在函数（）中；

```
// do stuff
spin_lock_irqsave(&x, vals);
.... 
```

如果“某些条件”为真，会不会出现僵局？这似乎太明显了，所以我想也许我错过了什么？

谢谢

编辑：代码不是linux的一部分，只是我在网上找到的一些随机代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T06:40:30.557

自旋锁[*不是递归*](http://www.kernel.org/pub/linux/kernel/people/rusty/kernel-locking/c93.html)的，而且可能永远不会，因为它们旨在成为高性能锁。

因此，如果条件为真，发布的代码将死锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T06:34:26.273

此代码将死锁（假设没有递归锁定并且这是一些 Linux 内核代码）。当你想保护你的代码不被中断抢占时，通常会使用 spin_lock 的 irq 版本。

vals的原因是为了保存当前的中断状态，在调用irqrestore的时候恢复。这是为了避免在获取多个自旋锁或处于禁用中断的块中时过早打开中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T06:26:32.773

这将取决于如何`spin_lock()`以及`spin_lock_irqsave()`已经实施。

例如，他们可能会确定锁是否已经被同一个 CPU 锁定，如果是，则增加一个计数器；然后（当锁被释放时）递减计数器，只有当计数器变为零时才释放锁。这样同一个 CPU 可以多次获取锁，不会导致死锁。

也有可能`spin_lock_irqsave()`是只禁用 IRQ 的东西，实际上并不获取锁（例如，假设/预期`spin_lock()`已经被预先调用的东西）。在这种情况下，锁`&x`可能只是一个方便的地方来存储/跟踪 IRQ 被禁用的事实（`spin_unlock()`如果它们被禁用，可能会检查一些标志并再次启用 IRQ）。

但是，我想不出`spin_lock_irqsave()`需要第二个参数（`vals`）的理由。

另一种可能性是这些函数的名称具有误导性，与它们实际所做的完全无关。例如; 该`spin_lock()`函数可能会订购比萨饼，并且该`spin_lock_irqsave()`函数可能会显示足球结果。

基本上，除了它们的名称之外，没有关于这些函数的信息，因此无法确定它们的作用（或者是否存在死锁）。

# bash - 如何在bash中获取字符串的第一部分

> ID：12766406
> 
> 赞同：6
> 
> 时间：2012-10-07T05:40:51.957
> 
> 标签：bash, substring

`ls`假设我在 bash 脚本中有以下文件名：

```
things-hd-91-Statistics.db
things.things_domain_idx-hd-38-Data.db 
```

在 bash 中，在这两种情况下如何获取字符串的第一部分`'things'`？基本上删除字符串的其余部分超过第一个`-`或`.`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-07T06:11:15.337

您将使用[参数扩展](http://mywiki.wooledge.org/BashGuide/Parameters#Parameter_Expansion)：

```
string="things-hd-91-Statistics.db"
echo "${string%%-*}"
things
```

在`${parameter%%pattern}`“模式”中，( `-*`) 与“参数”的结尾匹配。结果是“参数”的扩展值，最长匹配被删除。

同样，对于您的其他示例，模式将是`%%.*`

# arrays - 将带有空格的字符串存储到数组 Bash 中

> ID：12766408
> 
> 赞同：2
> 
> 时间：2012-10-07T05:40:57.880
> 
> 标签：arrays, bash, whitespace

我正在尝试将带有空格的字符串存储到数组中。我使用过 IFS="" 并通过这样做注意到了这一点。尽管我有多个字符串，但我的 array_size 是 1。有没有办法来解决这个问题？

我正在使用的代码

```
size=0
declare -a new
for t in ${temp};
do
  new[size++]=$t
done;
for n in ${new[@]};
do
  echo $n end
done; 
```

我的输出是..

```
my string 1
my string 2
another string 3
another string 3 end 
```

我想要的输出会像这样..

```
 my string 1 end
 my string 2 end
 another string 3 end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T06:34:55.070

要使用单独行上的每个项目迭代输入，您必须将 IFS 设置为换行。

您可以执行以下操作以将项目读取到数组中。

```
declare -a new
IFS=$'\n'
new=${temp} 
```

# perl - 如何在 Perl 中打印嵌套散列的值？

> ID：12766411
> 
> 赞同：1
> 
> 时间：2012-10-07T05:41:55.917
> 
> 标签：perl

```
$dict{'one'}=1;
print %dict; 
```

这将打印

> 一个1

到终端。但是，如果我的代码在这样的字典散列中有一个~~字典~~散列~~怎么~~办：

```
my %dict;
$dict{'1'}{'1'}=2;

print %dict; 
```

这给出了输出：

```
1HASH(0xb1db78) 
```

即使我将最后一行更改为

```
print $dict{'1'}; 
```

输出是：

> 哈希（0x13ccb78）

如何获取~~字典~~哈希的内容而不是参考位置？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T06:26:33.910

如果您想要整个结构，请使用核心[`Data::Dumper`](https://metacpan.org/module/Data%3a%3aDumper)模块。

```
use strict;
use warnings;

use Data::Dumper;

my %hash;
$hash{1}{1} = 2;

print Dumper( \%hash ); 
```

输出：

```
$VAR1 = {
          '1' => {
                   '1' => 2
                 }
        }; 
```

如果你想在 Perl 中使用嵌套结构（超越任何琐碎的事情），你需要了解*references*。如果您熟悉指针，那么您就成功了一半。

最好的资源在官方文档中：

*   [Perl 参考教程](http://perldoc.perl.org/perlreftut.html)
*   [Perl 数组的数组](http://perldoc.perl.org/perllol.html)
*   [Perl 数据结构手册](http://perldoc.perl.org/perldsc.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T06:25:51.763

`%dict['one']=1;` <<这是错误的

它应该是`$dict{'one'}=1;`

你应该有类似下面的东西。**警告**：这是未经测试的代码，但你明白我想说的意思：

```
#!/usr/bin/perl -w

use strict;
use Data::Dumper;

my %dict;
$dict{'1'}{'1'}=2;
$dict{'2'}{'2'}=3;

#print Dumper(\%dict);

foreach my $keys ( keys %dict )
{
    print "$keys : ";
    foreach my $keys2 ( keys %{ $dict{keys} } )
    {
        print "$keys2 = $dict{keys}{$keys2} \n" ;
    }
    print "\n";
} 
```

# c# - 如何在 C# 中从 sql db 读取结果后预先选择 CheckboxList 并能够选中和取消选中

> ID：12766413
> 
> 赞同：1
> 
> 时间：2012-10-07T05:42:05.053
> 
> 标签：c#, checkboxlist

我是新手，正在建立一个数据库来跟踪我的电影（用于练习）。无论如何，我使用复选框列表来输入类型（动作、喜剧、戏剧、恐怖等）。我得到了复选框列表以保存回数据库表，并且我能够获得保存的结果以预加载复选框列表但我的问题是能够取消选中并检查新类型并保存回数据库。

这是我检查 GenreCheckBox 列表中的项目并保存到 db 表中的代码。

```
for (int i = 0; i < GenreCheckBoxList.Items.Count; i++)
    {

        if (GenreCheckBoxList.Items[i].Selected)
        {
            cmd2.Parameters.AddWithValue("MovieID", MovieID);
            cmd2.Parameters.AddWithValue("@GenreID", GenreCheckBoxList.Items[i].Value);
            cmd2.Parameters.AddWithValue("Status", Status);
            cmd2.ExecuteNonQuery();
            cmd2.Parameters.Clear();
        }

    } 
```

这是我显示以前保存的 GenreCheckBoxList 结果的方法

```
public void LoadGenreCheckBoxList()
        {
            GenreCheckBoxList.DataBind();

            string MovieID = Session["MovieID"].ToString();

            SqlConnection cnn = new SqlConnection("Data Source=STEVE-F32A48EEB;Initial Catalog=Sinema;Integrated Security=True");
            cnn.Open();
            SqlCommand cmd2 = new SqlCommand("SELECT Genre.GenreType, Genre.GenreID, GenreLine.GenreID FROM Genre INNER JOIN GenreLine ON Genre.GenreID = GenreLine.GenreID INNER JOIN Movie ON GenreLine.MovieID = Movie.MovieID WHERE GenreLine.MovieID = @MovieID AND GenreLine.Status = 1", cnn);

            cmd2.Parameters.AddWithValue("@MovieID", MovieID);
            cmd2.ExecuteScalar();

            SqlDataReader rdr2 = cmd2.ExecuteReader();
            while (rdr2.Read())
            {
                ListItem currentCheckBox = GenreCheckBoxList.Items.FindByValue(rdr2["GenreID"].ToString());

                if (currentCheckBox != null)
                {
                    currentCheckBox.Selected = true;
                }
            }

            rdr2.Close();
        } 
```

现在我想做的是在我的编辑页面上显示结果之后，我希望能够取消选中一些检查或检查一些新的流派，而不是让已经选择的检查流派复制并保存回数据库.

我什至不知道从哪里开始。任何方向都会有很大帮助！如何编写 if 语句以满足如果genreCheckBoxList 已被检查然后不保存回数据库并且如果尚未检查则保存回数据库的条件？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T07:09:39.667

我有两个选择给你。

**答案 1**

根据[文档](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.togglebutton.isthreestate%28v=vs.100%29.aspx)，您可以将复选框变成三态复选框。在加载时，您将对基于数据库选中的任何复选框执行此操作，并且您将在三种状态之间切换：“保存未选中”、“不保存任何一种方式”（即保留数据库的原样） , 和“保存检查”。其余的复选框将只有一种状态。

```
checkBox1.IsThreeState = true;
checkBox1.IsChecked = null; 
```

**答案 2**

将每个复选框的原始状态存储在其`Tag`属性中。当您保存回数据库时，请检查是否`(bool)checkBox1.Tag == checkBox1.IsChecked`. 如果是这样，请跳过它。

# facebook - 获取状态列表 Facebook

> ID：12766415
> 
> 赞同：2
> 
> 时间：2012-10-07T05:42:36.787
> 
> 标签：facebook, facebook-opengraph

在 Facebook 开放图上，我可以使用调用

```
/me? fields=statuses.limit(50).fields(likes) 
```

为了获取用户最近 50 个状态的点赞列表。但是，当我尝试在我的 Facebook 应用程序中实际使用调用时

```
FB.api('/me?fields=statuses.limit(50).fields(likes)', function(response) {
          console.log(response);
}); 
```

名单仍然无人问津。我已经获得了用户状态的许可。当我尝试获取用户朋友列表之类的其他内容时，这是可行的。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:31:21.827

您可以尝试使用此**FQL 查询**来获取 Facebook 针对您的个人资料提供的状态消息：

```
**SELECT status_id, message, time  FROM status WHERE uid = me() ORDER BY time asc LIMIT 50** 
```

您也可以使用其他参数对结果进行排序。

**PHP代码：**

```
**$status_q = "SELECT status_id, message, time  FROM status WHERE uid = me() ORDER BY time asc LIMIT 50";
$params = array(
    'method' => 'fql.query',
    'query' => $status_q);
//Run Query
$result =  $facebook->api($params);**

$facbook is the FB object you create while initializing FB sdk. 
```

# css - 使用超链接维护原始格式

> ID：12766418
> 
> 赞同：0
> 
> 时间：2012-10-07T05:42:46.987
> 
> 标签：css, hyperlink, html-heading

我正在尝试在网页中设置指向同一页面部分的链接，但想要保持原始文本格式，这是一个简单的 h4 标题。我尝试了很多事情，包括将 h4 设置和 text-decoration 设置为 none 样式，但是当链接中的下划线被删除时，它不会恢复为 h4 标题的颜色和大小。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T06:37:31.077

如果标记是

```
<h4><a href="...">Some heading</a></h4> 
```

（它使用嵌套`h4`和`a`元素的有效方式），如果`h4`元素的颜色是黑色（默认），以下样式表将删除链接格式，使标题文本看起来就像`a`没有标记一样：

```
h4 a {
  color: black;
  text-decoration: none;
} 
```

如果`h4`元素的颜色不是黑色，则修改设置其颜色的样式表规则，以便`h4 a`添加选择器。例如，如果是`h4 { color: orange }`，则将其更改为`h4, h4 a { color: orange }`。（您可以使用 使链接继承其父级的颜色，`h4 a { color: inherit }`但`inherit`并非所有浏览器都支持该值。）

如果您想在鼠标悬停时隐藏链接，当指针（在 CSS 术语中错误地称为“光标”）默认变为手时，您可以添加以下内容：

```
h4 a {
   cursor: text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T05:49:31.383

我不确定您的代码是什么样的，但是这样的结构可以防止`h4`样式变得混乱（[jsFiddle](http://jsfiddle.net/rTdyt/)）：

HTML：

```
<a href="#contact" class="self_page">
    <h4>Contact Us</h4>
</a> 
```

CSS：

```
h4 {
    color:#666333;
    font-family:Georgia,serif;
}
a.self_page {
    text-decoration:none;
    color:inherit;
} 
```

# javascript - 为什么 JavaScript 数组索引最多为 4294967294 而不是 4294967295？

> ID：12766422
> 
> 赞同：14
> 
> 时间：2012-10-07T05:43:33.447
> 
> 标签：javascript

JavaScript 的索引是 32 位的，所以看起来数组索引应该能够达到 4294967295，总共 4294967296 个元素。但实际上最高索引是 4294967294。由于数组具有`length`属性，所以我看不出将 null 作为最后一个元素的原因。最大索引是 4294967294 但不是 4294967295 是否有原因？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-07T05:57:51.370

这是因为当您使用构造函数创建数组时，`Array`您可以为它提供一个可选`length`参数，如下所示：

```
new Array(length); 
```

`length`数组的 是一个 32 位无符号整数。因此，数组的长度范围可能从`0`到`Math.pow(2, 32) - 1`是`4294967295`。

对于长度数组，`n`索引范围从`0`到`n - 1`。因此，JavaScript 数组的最大索引是`(Math.pow(2, 32) - 1) - 1`或`Math.pow(2, 32) - 2`，即`4294967294`。

因此，一个 JavaScript 数组可能包含最多的`4294967295`元素而不是`4294967296`元素。

我知道。这很不合逻辑，但是再一次，一个元素不会有太大的不同。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-07T06:11:33.653

[ECMA-262 规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)（第15.4 节）说：

> *当且仅当 ToString(ToUint32( P* )) 等于*P*且 ToUint32( *P* ) 不等于 2 ^(32) -1时，属性名称*P*（以字符串值的形式）是数组索引。

 ***规范还说`length`数组的属性总是*小于*2 ^(32)。这似乎将 4294967295 作为数组索引排除在外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T05:48:31.417

javascript 数组可以容纳`2^32-1=4294967295`.
但是数组索引从那开始`0`，`4294967295-1=4294967294`***

# jekyll - 如何分隔液体标记中的列表项？

> ID：12766425
> 
> 赞同：3
> 
> 时间：2012-10-07T05:44:27.393
> 
> 标签：jekyll, liquid

在我的 Jekyll 布局模板中，我正在为帖子中提供的标签列表中的关键字创建一个元标签，如下所示：

```
<meta name="keywords" content="{{page.tags}}"/> 
```

该帖子有以下 YAML 前题：

```
---
layout: post
tags: [personal, blog]
--- 
```

生成的`meta`标签如下：

```
<meta name="keywords" content="personalblog"/> 
```

我必须使用什么过滤器才能使`content`属性反映`personal, blog`而不是`personalblog`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-07T07:36:08.497

我找到了答案。有一个称为过滤器`join`（类似于`join`JavaScript 数组上的方法），它允许您将列表的元素连接到字符串中。

因此，我需要做的就是：

```
<meta name="keywords" content="{{page.tags | join: ', '}}"/> 
```

# java - 在 Java 中捕获泛型类型

> ID：12766428
> 
> 赞同：5
> 
> 时间：2012-10-07T05:44:44.920
> 
> 标签：java, generics, type-erasure

如果我有类似的东西：

```
class Test<T extends X> {
    public T test() {
        T t = /* ... */;
        return t;
    }
} 
```

如何捕获`T`的类以便实例化它？是否有防止类型擦除的解决方法？我什至不需要访问`T`'s 的方法，`X`'s 就可以了，但我需要返回一个`T`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T05:49:20.347

您唯一能做的就是将 T 的类作为额外参数传递给`test()`或设置类中的成员字段`Test`。您无法阻止类型擦除。

```
class Test<T extends X> {
    private Class<T> mClass;
    public Test(Class<T> c) {
        mClass = c;
    }
    public T test() {
        T t = mClass.newInstance();
        return t;
    }
} 
```

或者您可以将工厂对象传递给相同的效果。当您需要使用默认构造函数以外的东西时，这很有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T05:49:09.943

将其定义为：

```
class Test<T extends X>
{
    public T test(Class<T> c)
    {
        T t = c.newInstance();
        return t;
    }
} 
```

并像这样使用它：

```
Test<Foo> t = new Test<Foo>();
t.test(Foo.class); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T05:49:09.870

你不能直接做，但是你可以添加一个T实现的接口来创建一个实例，或者一个T的数组。

# shell - 如何在 shell 脚本中编辑文件的内容？

> ID：12766429
> 
> 赞同：0
> 
> 时间：2012-10-07T05:44:57.007
> 
> 标签：shell

除了 有没有其他的选择`sed`？我的意思是在 shell 脚本中执行此操作的命令

`cat file1`它包含以下内容：

```
How
are
you 
```

但是假设我想把“How”这个词改成“Who”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T06:10:36.883

有多种替代方法`sed`，但`sed`可能是此特定操作的首选工具。替代方案包括：

*   `ed`
*   `ex`
*   Perl
*   Python
*   红宝石
*   `awk`

和`ed`命令`ex`类似：

```
ed ff <<!
g/How/s//Who/g
w
q
! 
```

你可以写`ex`而不是`ed`.

```
perl -i.bak -p -e 's/\bHow\b/Who/g' ff

awk '{ gsub(/How/, "Who"); print }' ff 
```

我在 Python 或 Ruby 方面不够流利，无法提供惯用的解决方案。

但是，特别是带有该选项的`sed`GNU ，也非常方便：`sed``-i`

```
sed -i 's/How/Who/g' ff 
```

如果没有该`-i`选项（并且该`-i`选项并非完全防白痴，如果您有像我这样的白痴，带有符号链接或指向单个文件的多个链接），您可以使用：

```
sed 's/How/Who/g' ff > ff.$$
cp ff.$$ ff
rm -f ff.$$ 
```

或者，使用陷阱确保没有残留的临时文件：

```
tmp=ff.$$
trap "rm -f $tmp; exit 1" 0 1 2 3 13 15
sed 's/How/Who/g' ff > ff.$$
cp ff.$$ ff
rm -f ff.$$
trap 0 
```

# javascript - Raphaeljs javascript错误

> ID：12766432
> 
> 赞同：0
> 
> 时间：2012-10-07T05:46:21.977
> 
> 标签：javascript, function, raphael

我想在函数内使用 raphael.js 绘制一个矩形。我的代码有什么问题？

JsFiddle[代码](http://jsfiddle.net/yka3y/)

```
window.onload = function(){
    var paper = Raphael(0,0,100,200);

    var x = 0;
    var y = 0;
    var a = 10;
    var b = 20;

    function drawRect(x,y,a,b){            
        paper.rect(x,y,a,b);
    }        
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T06:23:43.103

```
window.onload = function(){
    var paper = Raphael(0,0,100,200);

    var x = 0;
    var y = 0;
    var a = 10;
    var b = 20;

    function drawRect(x,y,a,b){            
        paper.rect(x,y,a,b);
    }

    drawRect(x,y,a,b);  //Call the function that you just defined!!
}​ 
```

# python - 与迭代器相比，生成器有什么好处？

> ID：12766436
> 
> 赞同：3
> 
> 时间：2012-10-07T05:47:57.560
> 
> 标签：python, generator

> **可能的重复：**
> [Python 生成器与迭代器之间的区别](https://stackoverflow.com/questions/2776829/difference-between-python-generators-vs-iterators)

生成器在 Python 中似乎很重要，不时向它们添加新功能等等。

据我所见，您总是可以使用带有迭代器接口的对象来代替生成器。（通常）更好的简洁性是生成器的唯一好处还是我错过了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-07T06:29:17.260

是的，迭代器是一种更通用的构造，你可以用生成器做的任何事情都可以用迭代器来完成。

然而，生成器是非常好的工具，可以以非常简洁的方式表达某些想法，迭代器会变得很麻烦。

例如，这是一个简单的函数：

```
def count_to(m):
    n = 0
    while n <= m:
        yield n
        n += 1 
```

好，易于。这与迭代器相同：

```
class CountTo:
    def __init__(self, m):
        self.m = m
        self.n = 0
    def __iter__(self):
        return self
    def next(self):
        if self.n <= self.m:
            cur, self.n = self.n, self.n + 1
            return cur
        else:
            raise StopIteration() 
```

一个是 5 行，另一个是 12 行。生成器非常简洁地表达了迭代过程，而迭代器用显式维护的状态和样板代码对其进行了混淆。

Python 的许多哲学都是基于可读性和简单性。与此一致，我认为生成器为需要迭代器的广泛任务提供了更好的接口。是的，迭代器更强大，但生成器的语法优势当然不容忽视。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T06:36:41.623

迭代器和生成器之间的区别在于生成器执行惰性求值，它按需生成值，迭代器在每次迭代时求值并将它们存储在内存中。生成器更适合大型循环，因为它们一次只“保存”一个值。

# javascript - 更改 div 中所有 h2 元素的 innerhtml

> ID：12766448
> 
> 赞同：4
> 
> 时间：2012-10-07T05:50:01.303
> 
> 标签：javascript, innerhtml

这可能是一个愚蠢的错误，但我似乎无法让它发挥作用。我正在尝试使用 id=variable id 的 div 更改所有 H2 元素的 innerhtml。

```
var numberOfQuestions = $('.question').length;
  var id = "question"+(numberOfQuestions);
  clone.id=id;
  document.documentElement.getElementById(id).getElementsByTagName( "h2" ).innerhtml= "Question"+(numberOfQuestions); 
```

我想我在这里做错了：`document.documentElement.getElementById(id).getElementsByTagName( "h2" ).innerhtml= "Question"+(numberOfQuestions);` nrtire 脚本：

```
 <script type="text/javascript">

function copyAppendRow() {
  var question = document.getElementById("question");
  var clone=question.cloneNode(true);
  var numberOfQuestions = $('.question').length;
  var id = "question"+(numberOfQuestions);
  clone.id=id;
  var questiondiv = document.getElementById(id);
var h2s = questiondiv.getElementsByTagName("h2");
for(var h = 0; h < h2s.length; h++ ) {
  h2s[h].innerHTML = "Question"+(numberOfQuestions); }
  if($('#questionsuccess').css('display') == 'none'){
  $('#questionsuccess').fadeIn('fast');
 $('#questionsuccess').fadeOut(4000);
  }
  }

</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T06:08:14.793

你的意思是这样的：

```
var divEle = document.getElementById("yourDivId");
var h2s = divEle.getElementsByTagName("h2");
for(var h = 0; h < h2s.length; h++ ) {
  h2s[h].innerHTML = "Question"+(numberOfQuestions);
} 
```

或 jQuery 方式：

```
$("#"+yourDivId + " > h2").html("Question"+(numberOfQuestions)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T06:08:48.767

我从您的第一行中看到您已经在使用 jQuery，因此请让自己的生活更轻松，并使用它来完成这项任务。

```
$('#' + id + ' h2').html( 'Question ' + numberOfQuestions ); 
```

jQuery 选择器就像 CSS 选择器一样工作。因此，这行代码会找到以您的变量`id`为 id 的元素，并获取该元素中的所有 h2 标签。`.html`是一个设置元素内部 HTML 的 jQuery 方法。

# c# - 表格布局面板错误的列顺序

> ID：12766450
> 
> 赞同：2
> 
> 时间：2012-10-07T05:50:06.777
> 
> 标签：c#, tablelayoutpanel

我的表格中有一个表格布局面板。它有几行（充满控件）：

```
label10   ---   textbox10     ----    label20
label11   ---    textbox11   ---    label21
label12    ---   textbox12   ---    label22
label13    ---   textbox13    ---   label23
label14    ---   textbox14    ---   label24 
```

现在我想使用以下代码在表格中间添加新行：

```
myLayoutpanel.Controls.Add(label333, 0, 3);

myLayoutpanel.Controls.Add(textbox333, 0, 3);

myLayoutpanel.Controls.Add(label444, 0, 3); 
```

它将在第 3 行之后添加一个新行。通常结果是真实的顺序：

```
label333   ---   textbox333   ---   label444 
```

但对于某些行，它似乎是错误的：例如，如果添加发生在第 4 行之后：

```
label444  ---    label333   ---   textbox333 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:39:51.440

你不会发疯的。这是 .NET Framework 4.5 中引入的错误。请参阅参考资料

[.NET 4.5 不兼容](http://roman.st/Article/Another-NET-4.5-incompatibility)

和

[System.Windows.Forms.TableLayoutPanel 行为更改 .NET 4.5 框架](http://connect.microsoft.com/VisualStudio/feedback/details/767282/system-windows-forms-tablelayoutpanel-behavior-change-net-4-5-framework)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T06:44:51.413

我不知道您为什么会发生这种情况，因为您没有发布任何证据。但请检查此代码是否正确执行。我猜想你的代码没有按正确的顺序执行。

```
myLayoutpanel.Controls.Add(label333, 0, 3); 
Thread.Sleep(100); 
myLayoutpanel.Controls.Add(textbox333, 0, 3); 
Thread.Sleep(100); 
myLayoutpanel.Controls.Add(label444, 0, 3); 
```

# c - 在 '*' 之前缺少 '('

> ID：12766451
> 
> 赞同：-4
> 
> 时间：2012-10-07T05:51:08.167
> 
> 标签：c

我正在为学校制作一个链接列表，但我遇到了很多错误。我确定我的代码可能只有一件事有问题，但我似乎找不到它。我已经注释掉了我的大部分代码，所以我不必在这里粘贴 200 行代码，而且主要错误仍然出现，尽管次数少了很多。

错误是：

```
error C2143: syntax error : missing '{' before '*' 
```

在我注释掉我的代码之前，我可能会沿着这些指南弹出 50-75 个错误，但是这段代码仍然存在一些错误。任何帮助将非常感激。

```
//main.c
#define BUFFER_SIZE 1000
#include<stdio.h>
#include<stdlib.h>
#include"ListElmt.h"
#include"List.h"
#include"ListData.h"

int main(int argc, char *argv[]){
}

//List.c
#include<stdlib.h>
#include"List.h"
#include"ListElmt.h"
#include"ListData.h"

//List.h
struct List{
int size;
struct ListElmt *head;
struct ListElmt *tail;
};

//ListData.h
struct ListData {
int hour;
int min;
double temp;
int AC;
};

//ListElmt.h
struct ListElmt {
ListData *data;
ListElmt *next;
ListElmt *prev;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T05:54:26.277

如果头文件中未声明结构，则需要转发声明结构。

因此，`List.h`需要 的前向声明`struct ListElmt`，并且`ListElmt.h`需要 的前向声明`struct ListData`。

此外，在 C 中，您必须使用`struct`before`ListData`和`ListElmt`in`ListElmt.h`因为结构名称不被视为类型名称，除非您使用显式`typedef`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T05:54:23.023

你错过了 struct 关键字

```
struct ListElmt {
struct ListData *data;
struct ListElmt *next;
struct ListElmt *prev;
}; 
```

# asp.net - Ruby on Rails 以何种方式不是多线程的？

> ID：12766456
> 
> 赞同：24
> 
> 时间：2012-10-07T05:51:45.323
> 
> 标签：asp.net, ruby-on-rails, multithreading, concurrency

**免责声明**：我是 ac# ASP.NET 开发人员，正在学习“RoR”。抱歉，如果这个问题没有“得到” RoR，任何更正都非常感谢！

# 什么是多线程

我对 Web 应用程序中的“多线程”能力的理解是双重的：

1.  每次 web/app 服务器接收到请求时，它都可以为新请求分配一个线程，从而可以同时运行多个请求。
2.  应用程序运行时 + 语言允许在单个请求中使用多个线程（**例如**，在 ASP.NET 中通过“异步”方法和关键字）。

这样，IIS7 + ASP.NET 可以做到点 1 和 2。

# 我对 RoR 感到困惑

我已经阅读了这两篇文章，它们让我感到困惑：

*   [清理有关 LinkedIn 移动从 Rails 迁移到 node.js 的一些事情](http://ikaisays.com/2012/10/04/clearing-up-some-things-about-linkedin-mobiles-move-from-rails-to-node-js/)
*   [如何部署多线程 Rails 应用程序](http://www.jordanhollinger.com/2011/04/23/how-to-deploy-a-multi-threaded-rails-app)

## 问题一。

我想我理解 RoR 不太适合上面的第 2 点，也就是说，在同一个请求中有多个线程，我说对了吗？

## 问题二。

为了清楚起见，RoR 应用程序/Web 服务器也可以做右上方的第 1 点（即多个请求可以同时运行）？RoR 并非总是如此吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-08T02:53:23.077

**问题 1：** 如果需要，您可以在一个请求中生成更多 Ruby 线程，尽管这似乎超出了 Rails 的典型用例。它可用于某些长时间运行的 IO 或外部操作。

**问题 2：** Ruby 并发的限制因素通常是[`Global Interpreter Lock`](http://ablogaboutcode.com/2012/02/06/the-ruby-global-interpreter-lock). Ruby 的这一特性可防止每个进程在任何给定时间执行超过 1 个 Ruby 线程。只要有非 Ruby 代码执行，例如等待磁盘 IO 或 SQL 响应，就会释放锁。您可以通过使用与默认不同的 Ruby 实现来解决这个问题，例如 JRuby，但不是全部。

[PhusionPassenger](https://www.phusionpassenger.com/)使用基于进程的并发来并发处理一些请求，所以严格来说，它不是“多线程的”，但仍然是并发的。

[这个来自 Ruby MidWest 2011 的演讲](http://www.confreaks.com/videos/768-rubymidwest2011-high-performance-ruby-threading-versus-evented)有一些关于让多线程 Ruby on Rails 运行的好想法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-21T12:10:05.010

Since this is about "from ASP.NET to RoR" there is another small but important detail to remember: In *nix environments it's common to achieve concurrency of a service application through multi-processing rather than multi-threading. This is an architecture that goes way back and is related to the relatively cheap cost of multi-processing on *nix systems using [fork](http://en.wikipedia.org/wiki/Fork_%28system_call%29) and [Copy-on-Write](http://en.wikipedia.org/wiki/Copy-on-write). Each process serves one request at a time in a single thread and the main process controls spawning and killing worker child processes. Multiple requests are served concurrently by different child processes.

Modern service applications, for example Apache, have multi-process, multi-threaded, and even combined modes (where the service forks several processes, each running several threads).

In cases where the application was built with portability at mind (examples again: Apache, MySQL, etc) it is customary to run it in multi-process or combined mode on *nix systems, and in multi-threaded mode on Windows servers.

However, admittedly Rails is somewhat lacking on the Windows front. It's not that you can't run it on Windows, it's just that not a lot of effort went into making sure it runs well and smoothly for production use on Windows servers. It's not a common production platform among the RoR community.

As a result, Eventhough Rails itself is thread-safe since version 2.2, there isn't yet a good multi-threaded server for it on Windows servers. And you get the best results by running it on *nix servers using multi-process/single-threaded concurrency model.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-07T15:52:24.013

Rails 作为一个框架是线程安全的。所以，答案是肯定的！

您在此处发布的第二个链接列出了许多在多线程方面表现不佳的 Rails 服务器。他后来提到 nginx 是要走的路（它绝对是最受欢迎的，强烈推荐）。但他没有提到是什么让他得出这个结论。Ruby 1.9.3 最近出现了，并且内置了一些以前不存在的新线程优点。

多线程的使用通常取决于用例。就我个人而言，一年前我曾尝试过一次，它确实有效，但我没有在任何生产代码中使用它，因为我没有遇到过使用多线程比将长时间运行的任务推到一个更有意义的用例后台作业。

我很想对此进行更多探索。所以，如果你能描述你想要达到的目标，那么也许我们可以做一个 POC。

# c - recvfrom() 不阻塞

> ID：12766458
> 
> 赞同：1
> 
> 时间：2012-10-07T05:52:58.420
> 
> 标签：c, sockets

由于某种原因，我用于套接字的 recvfrom() 函数并没有像预期的那样阻塞我的服务器代码。我正在制作一个基本的 UDP 服务器来创建一个滚动会话密钥系统。

我在这里做错了什么？它在这条线之后继续（在我放 (n < 1) 之前）并且正在崩溃。我很确定 recvfrom() 应该停止程序的执行，直到它从客户端得到一些东西......

```
 int sockfd, portNumber;
    socklen_t clilen;
    char buffer[BUFFER_LENGTH];
    struct sockaddr_in serv_addr, from;
    int n;

    // Invalid arguments
    if (argc < 2)
        exit(0);
    else if (atoi(argv[1]) > 65535 || atoi(argv[1]) < 1)
        exit(0);

    sockfd = socket(AF_INET, SOCK_STREAM, 0);
    if (sockfd < 0) 
    {
        printf("Error opening socket.\n");
        exit(0);
    }

    // Taken from reference
    bzero((char *) &serv_addr, sizeof(serv_addr));
    portNumber = atoi(argv[1]);
    serv_addr.sin_family = AF_INET;
    serv_addr.sin_addr.s_addr = INADDR_ANY;
    serv_addr.sin_port = htons(portNumber);
    if (bind(sockfd, (struct sockaddr *) &serv_addr, sizeof(serv_addr)) < 0) 
    {
        printf("ERROR on binding.\n");
        close(sockfd);
        exit(0);
    }

    // Get initial session key request
    int fromlen = sizeof(struct sockaddr_in);
    n = recvfrom(sockfd, buffer, BUFFER_LENGTH, 0, (struct sockaddr *)&from, &fromlen);
    if (n < 0)
    {
        printf("Error in receiving.\n");
        exit(1);
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T06:00:03.507

您正在尝试为 UDP 使用流套接字；

```
sockfd = socket(AF_INET, SOCK_STREAM, 0); 
```

你的意思可能是；

```
sockfd = socket(AF_INET, SOCK_DGRAM, 0); 
```

尝试`recvfrom`在未连接的流套接字上执行操作很可能会立即返回错误。下次，您可能需要检查`errno`提示。

# sql - SQL 问题中的更新

> ID：12766460
> 
> 赞同：0
> 
> 时间：2012-10-07T05:53:00.887
> 
> 标签：sql

谁能帮我解决这个问题？我正在尝试使用下面的 SQL 更新我的数据库，但是当我运行它时，会出现此消息：

> 无法绑定多部分标识符“try_subject.subject_code”。

```
UPDATE try_schoolyear 
SET school_year= '" & drpcurriculumyear.SelectedItem.Text & "' 
FROM try_schoolyear
INNER JOIN try_yearlvl on  
    try_schoolyear.schoolyearID=try_yearlvl.schoolyearId 
WHERE try_subject.subject_code= '" & txtsearchcourse.Text & "' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T05:55:23.177

该表`try_subject`不会在您的查询中加入。这就是引擎找不到它的原因。

# java - 网络应用程序。比。桌面应用程序（Java Swing 应用程序）

> ID：12766464
> 
> 赞同：4
> 
> 时间：2012-10-07T05:53:41.970
> 
> 标签：java, swing, web-applications

我想开发一个应用程序，服务器将大量数据推送到客户端。（每 20 毫秒 20 kb）500kbps。所有数据都是双精度/浮点值。

我试图回答这个问题，如果桌面应用程序（Java Swing 应用程序）有一些固有的东西，与通过 http 推送数据的 Web 应用程序相比，这将使它成为这个用例的更好选择。

是否有关于 Java swing 应用程序以及如何从服务器到客户端的数据传输，这使得它们与 Web 应用程序（tomcat 作为应用程序服务器.. JS 在客户端）相比更快。

如果我说 Web 服务器和应用程序在同一个本地网络上，那么答案会如何变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T06:26:05.427

我的投票是桌面，但我有偏见（当你唯一的工具是锤子时......）

我的第一个想法是线程和自定义网络。您可以根据需要获得推送和拉取协议的额外好处（是的，您可以在 Web 环境中获得它，但 Java 是为此而设计的，AJAX 已经满足了这种需求）

我还会推出一个多样化和可定制的 UI 工具包，但有人可能会争辩说您可以使用 HTML 来实现这一点，但我个人发现 Swing 工具包运行起来更快且更易于维护，恕我直言。

缺点是需要在每台客户端机器上安装应用程序并处理更新

这是我的一般看法，希望对你有帮助

另一个问题是，应用程序需要做什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T10:47:41.550

UI 不太可能同时显示 1000 米。用户很可能一次只查看少量仪表。UI 只需要针对屏幕上显示的仪表进行更新。这应该会大大减少负载。假设网络和缓存数据库组件对于 Web 和桌面应用程序来说大致相同，那么真正的区别在于图表/图形的渲染速度，以及倾向于使用它的频率或多少人。

MadProgrammer 的原型设计建议是有道理的。从原型中获得的测试数据将回答性能问题。

基于网络将更有用/更有价值，因为它可以在任何台式机、平板电脑或智能手机上使用。我假设希望随时随地将数据提供给尽可能多的用户。另外，我认为人眼无法检测到 20 毫秒的更新。你可能会延长它，用户甚至不会注意到它。电影大约每秒 25 帧，即 40 毫秒/帧。

您预计有多少并发用户？我认为这不会影响解决方案，因为两者都可以扩展。

# javascript - javascript 是否有在对象中设置字段的简写方式？

> ID：12766472
> 
> 赞同：1
> 
> 时间：2012-10-07T05:54:52.140
> 
> 标签：javascript, jquery

我正在使用以下内容：

```
var link = {};
link.action = $link.attr('data-action') || '';
link.dialogType = $link.attr('data-dialogType') || '';
link.params = $link.attr('data-params') || '';
link.title = $link.attr('title') || '';
link.viewURL = $link.attr('data-href') || '';
link.entity = $link.attr('data-entity') || '';
link.row = $link.attr('data-row'); 
```

但是有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T06:13:03.670

试试这个：

```
var link = {
   action : $link.data('action') || '',
   dialogType : $link.data('dialogType') || '',
   params : $link.data('params') || '', 
   title : $link.attr('title') || '', 
   viewURL : $link.data('href') || '', 
   entity : $link.data('entity') || '',
   row : $link.data('row') 
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T06:16:43.247

您可以使用数据集属性。

> 允许在读取和写入模式下访问元素上设置的所有自定义数据属性 (data-*)。它是 DOMString 的映射，每个自定义数据属性都有一个条目。

```
var elm = $link[0], data = elm.dataset, link = { title: elm.title };
for (var i in data) link[i] = data[i] 
```

[http://jsfiddle.net/AdzE3/](http://jsfiddle.net/AdzE3/)

# jetty - 在 Jetty 中使用 ResourceHandler 和自定义处理程序时获取 403 根请求

> ID：12766477
> 
> 赞同：4
> 
> 时间：2012-10-07T05:55:30.417
> 
> 标签：jetty, embedded-jetty

在（嵌入式）Jetty 中，我试图使用 ResourceHandler 来提供静态文件和自定义处理程序来响应动态请求。基于[此页面](http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty#Configuring_a_File_Server)，我有一个如下所示的设置：

```
public static void main(String[] args) throws Exception
{
    Server server = new Server();
    SelectChannelConnector connector = new SelectChannelConnector();
    connector.setPort(8080);
    server.addConnector(connector);

    ResourceHandler resource_handler = new ResourceHandler();
    resource_handler.setDirectoriesListed(false);

    resource_handler.setResourceBase(".");

    HandlerList handlers = new HandlerList();
    handlers.setHandlers(new Handler[] { resource_handler, new MyHandler() });
    server.setHandler(handlers);

    server.start();
    server.join();
} 
```

这在正确的意义上是有效的：

*   从我的公共目录中的文件中提供静态内容，例如 /public/style.css
*   在公共目录中不存在的路径上运行 MyHandler，例如 /foo/bar

问题是我得到一个 403 响应根路径 (/)。MyHandler 能够响应这些请求，但它们首先被 ResourceHandler 拦截。有什么方法可以强制 Jetty 向 MyHandler 发送/请求？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T22:15:06.767

Jetty 按顺序尝试每个处理程序，直到其中一个处理程序在请求上调用 setHandled(true)。不知道为什么 ResourceHandler 不对“/”执行此操作。

我的解决方案是颠倒您列出处理程序的顺序，以便首先调用您的处理程序。然后检查 URL 中的特殊情况“/”。如果您想将请求传递给 ResourceHandler，只需返回而不声明请求已处理。

像这样声明处理程序的顺序：

```
Server server = new Server(8080);

CustomHandler default = new CustomHandler();
default.setServer(server);

ResourceHandler files = new ResourceHandler();
files.setServer(server);
files.setResourceBase("./path/to/resources");

HandlerList handlers = new HandlerList();
handlers.setHandlers(new Handler[] {default, files});

server.setHandler(handlers);

server.start();
server.join(); 
```

并像这样定义CustomHandler的handle方法：

```
public void handle(String target, Request baseRequest, HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException
{
    if(!request.getRequestURI().equals("/")){
        return;
    }
    // Do Stuff...
    baseRequest.setHandled(true);
    return;
} 
```

我同意让 ResourceHandler 简单地在“/”上屈服而不是用 403 处理响应是最优雅的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-20T13:22:46.513

我的解决方案：

*   将 MyHandler 放在与“/”不同的上下文路径上，例如“/index”
*   使用重写规则拦截对“/”的调用并将它们重定向到“/index”

我使用的代码如下所示：

```
RewriteHandler rewriteHandler = new RewriteHandler();
rewriteHandler.setRewriteRequestURI(true);
rewriteHandler.setRewritePathInfo(false);
rewriteHandler.setOriginalPathAttribute("requestedPath");
RewriteRegexRule rewriteIndex = new RewriteRegexRule();
rewriteIndex.setRegex("^/$");
rewriteIndex.setReplacement("/index.html");
rewriteHandler.addRule(rewriteIndex);
rewriteHandler.setHandler(rootHandlerCollection);
server.setHandler(rewriteHandler); 
```

正则表达式确保只匹配确切的路径，因此“/whatever”仍然首先由 ResourceHandler 处理。

# arrays - 如何在处理中的对象中包含和访问数组

> ID：12766487
> 
> 赞同：1
> 
> 时间：2012-10-07T05:58:05.347
> 
> 标签：arrays, object, processing

我想知道，在处理中，如何将数组包含为对象的一部分。假设我有一个名为“Node”的对象，并希望它包含它所连接的其他节点的所有 ID 的列表。请注意，此列表的长度可以是可变的。也就是说，一个节点可以连接到两个或七个不同的其他节点。我将如何访问该对象中的特定数组？

这是我正在使用的一些代码：

```
void setup(){
  size(200,200);
  Node node1 = new Node(color(255,0,0),40,80,2,0,.5,5,5,0);
  int neighbor = 6;
  node1.neighbors.add(neighbor);
}

void draw(){

}

class Node {
  Set<Node> neighbors;
  color c;
  float xpos;
  float ypos;
  float xspeed;
  float yspeed;
  float damp;
  float ForceX;
  float ForceY;
  int id;

  // The Constructor is defined with arguments.
  Node(color tempC, float tempXpos, float tempYpos, float tempXspeed, float tempYspeed, float tempDamp, float tempForceX, float tempForceY, int id_temp) {
    c = tempC;
    xpos = tempXpos;
    ypos = tempYpos;
    xspeed = tempXspeed;
    yspeed = tempYspeed;
    damp = tempDamp;
    ForceX = tempForceX;
    ForceY = tempForceY;
    id = id_temp;
    neighbors = new HashSet<Node>();
  } 
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T16:40:04.963

数组可以像任何其他 var 一样包含在类中：

```
 class Node{
       int[] array;
       Node (int[] _array){
           array = _array;
           }
        /// all he stuff
    } 
```

但我认为一个对象不能“意识到”其他相同类型的对象。也许您需要一个其他类 Nodes，它在构造函数中接受一个 Node 数组，或者一个 ArrayList，因为大小必须是可变的。或者我担心你必须处理 draw() 中的节点集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T04:19:19.687

您正在描述一个图表。一个图类应该是这样的：

```
class Node {
    Set<Node> neighbors = new HashSet<Node>();
} 
```

您可能想要创建方法，例如 addNeighbor(Node neighbor)、isNeighbor(Node x) { return neighbors.contains(x); }， ETC。

您描述了 id，但假设您必须将其他节点加载到内存中，这种方法更有效。Set here 容器引用（例如 C++ 指针）到其他节点。

如果你想要 ids 并且只有整数，你也可以做一个 Set 。

# ruby-on-rails - 在 Rails 中实现嵌套表单的正确方法

> ID：12766490
> 
> 赞同：0
> 
> 时间：2012-10-07T05:58:46.630
> 
> 标签：ruby-on-rails, ruby, model-view-controller

抱歉，标题太笼统了，我想不出更好的标题。我正在创建一个运动小费应用程序。我有一个由teamA 和teamB 组成的游戏模型。我还有一个“提示”模型，它将由用户选择的游戏 ID 和团队 ID 组成。小费只与一个团队有关。（一对多）。

我想要的是一个表格，将列出所有开放的游戏，其中 2 个团队是用户可以选择的复选框。
例如 ：

游戏一

. 团队A。B队

游戏 2

.teamC . D队

...... ETC。

我想知道做这种事情的正确“导轨”方式是什么？我想知道处理某事的“正确”方式（为了改变）。我现在正在做的事情似乎正在上班，但感觉可能有更好的方法。

我的想法是让我的tips_controller 中的新方法将游戏传递给表单，然后让create 方法完成创建多个“提示”的工作。我正在查看 nested_form gem，但不确定这是否适合[https://github.com/ryanb/nested_form](https://github.com/ryanb/nested_form)。

谢谢你的任何想法，我是 ruby​​ on rails 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T10:07:50.313

[在这里](https://stackoverflow.com/questions/12767171/rails-jquery-updating-a-div-underneath-a-facebox-div)阅读您的其他问题后，我认为您可以花一些时间在 railscasts（或类似的）学习基础知识。

特别是 Ryan 做了一些关于嵌套表单的很棒的教程：

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

[http://railscasts.com/episodes/197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2)

还有一些关于有很多关系的

祝你好运

# java - 查找具有匹配斜率的点

> ID：12766492
> 
> 赞同：0
> 
> 时间：2012-10-07T05:59:05.470
> 
> 标签：java, points

假设我有一个点 (0,0)，我说它将用作原点。如何检查以下点（在数组中）是否基于原点共享相同的斜率。

要点是：

```
(6000, 7000) (10000, 0) (16000, 17000) (7000, 3000) 
(3000, 7000) (20000, 21000) (3000, 4000) (0, 10000). 
```

基本上我想比较每个点相对于原点，看看哪些点具有相同的斜率，并将这些点组合在单独的列表中。我只是对它背后的算法和逻辑有点困惑。我知道 for 循环是最好的，但它的实现似乎离我越来越远了

```
 for (int j = 0; j < array.length - 1; i++) 
```

这就是我开始失去理智的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T06:07:34.700

您描述的方法是正确的。您想要“查看哪些共享相同的斜率并将这些点组合在单独的列表中”。

您可以使用 a`Map`为您处理分组，例如：

```
Map<BigDecimal, List<Point>> lists = new HashMap<BigDecimal, List<Point>>();
for (Point point : points) {
    BigDecimal slope = new BigDecimal(point.getY()).divide(new BigDecimal(point.getX()));
    List<Point> list = lists.get(slope);
    if (list == null) {
        list = new ArrayList<Point>();
        lists.put(slope, list);
    }
    list.add(point);
} 
```

请注意，这使用了任意精度`BigDecimal`类来避免与原始浮点类型舍入相关的问题。如果你不关心这个，你可以使用`Double`and`double`代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T06:21:45.083

创建点列表，迭代列表，计算斜率并根据地图中每个计算的斜率维护点列表，如下所示：

```
 List<int[]> myPoints = new ArrayList<int[]>();
        int[] point1 = new int[]{6000, 7000};
        myPoints.add(point1);
        int[] point2 = new int[]{10000, 0};
        myPoints.add(point2);
        int[] point3 = new int[]{16000, 17000};
        myPoints.add(point3);

        Map<Float, List<int[]>> myMatchingSlopePoints = new HashMap<Float, List<int[]>>();
        for(int[] point: myPoints){
            Float slope = new Float(point[1]/point[0]);
            if(myMatchingSlopePoints.get(slope) == null){
                //create a new list as this slope doesn't match with previous one
                myMatchingSlopePoints.put(slope, new ArrayList<int[]>());
            }
            //add the slope to match list
            myMatchingSlopePoints.get(slope).add(point);
        }

        //retrieve various slope
        Set<Float> variousFloats = myMatchingSlopePoints.keySet();

        //retrieve mathing points for each slope
        for(Float slope: variousFloats){
            List<int[]> matchingPointsListForSlope = myMatchingSlopePoints.get(slope);
            //use matching points
        } 
```

# ubuntu - 插入自定义 Linux 内核模块时出现“无效的模块格式”

> ID：12766493
> 
> 赞同：0
> 
> 时间：2012-10-07T04:41:37.887
> 
> 标签：ubuntu, drivers

我正在尝试编写一个 Linux 内核模块，但我只是在编写一些存根代码。我在 Ubuntu 中编译了这段代码：

```
#include <linux/module.h>
int init_module(void){ printk("<1> hellp"); return 0;}
void cleanup_module(void){ printk("<1> bye");} 
```

但是，当我尝试`insmod`它时，我得到了错误：

> 无效的模块格式

谷歌搜索后，我认为版本兼容性可能存在问题，但我不确定。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T05:43:48.880

您缺少 MODULE_ 参数，这是一个空的内核项目：

```
#include <linux/module.h>
#include <linux/kernel.h>

static void __exit cleanup(void)
{
}

static int __init startup(void)
{
}

module_init(startup);
module_exit(cleanup);

MODULE_LICENSE("GPL");
MODULE_AUTHOR("Someone Like You"); 
```

# xcode - XCode中的CustomCell不显示值

> ID：12766498
> 
> 赞同：0
> 
> 时间：2012-10-07T06:01:10.710
> 
> 标签：xcode, uitableview

我在具有搜索栏的表格视图中创建了一个自定义单元格。用户输入的文本将用于搜索 SQLite 数据库并在表格视图中显示结果。我现在遇到的问题是，如果我使用自定义单元格，搜索结果不会显示在表格视图中，但在我使用默认单元格时有效。例如，在下面的代码中，如果我使用 [cell setText:currentSubLocality]; 它会显示结果，但如果我使用 cell.lblG.text = currentLocation; 则不会显示结果。请帮忙，已经为此苦苦挣扎了2天。谢谢

```
#import "CustomViewController.h"
#import "FMDBDataAccess.h"
#import "locationCode.h"
#import "CustomCell.h"
@interface CustomViewController ()

@end

@implementation CustomViewController{
    NSMutableArray *searchResults;}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{

    return [searchResults count];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath    
    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:@"vvv"];

    if (cell==nil){
        cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"vvv"];

    }

    if (tableView == self.searchDisplayController.searchResultsTableView)
    {
        locationCode *code = [[locationCode alloc] init];
        code= [searchResults objectAtIndex:indexPath.row];
        NSString *currentLocation = code.location;
        NSString *currentSubLocality = code.subLocality

        //[cell setText:currentSubLocality];
        cell.lblG.text = currentLocation;
        cell.lblL.text = currentSubLocality;
    }

    return cell;

}

- (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope
{
    NSString *databasePath = [[NSBundle mainBundle] pathForResource:@"spr" ofType:@"sqlite"];
    FMDatabase *database = [FMDatabase databaseWithPath:databasePath];

    [database open];
    searchResults = [[NSMutableArray alloc] initWithObjects:nil count:0];

    NSString *query = [NSString stringWithFormat:@"select * from Locations where locationCode like '%@%%'", searchText];

    FMResultSet *results = [database executeQuery:query];

    while([results next]) {

        locationCode *code = [[locationCode alloc] init];
        code.code = [results stringForColumn:@"locationcode"];
        code.subLocality= [results stringForColumn:@"sublocality"];
        code.longitude= [results stringForColumn:@"longitude"];
        code.latitude= [results stringForColumn:@"latitude"];

        [searchResults addObject:code];
    }

    [database close];

}

-(BOOL)searchDisplayController:(UISearchDisplayController *)controller
shouldReloadTableForSearchString:(NSString *)searchString
{
    [self filterContentForSearchText:searchString
                               scope:[[self.searchDisplayController.searchBar scopeButtonTitles]
                                      objectAtIndex:[self.searchDisplayController.searchBar
                                                     selectedScopeButtonIndex]]];

    return YES;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-01T17:56:20.023

试试这个它会工作。将以下代码粘贴到 cellforrowatindexpath 方法中，不要忘记在属性检查器中设置 TableViewCell“标识符”

```
static NSString *CellIdentifier = @"Cell";
    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell==nil) {
        cell = [[CustomCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-07T07:25:56.270

我通过添加 tableview 作为插座解决了这个问题。然后更改以下行

```
CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:@"vvv"]; 
```

至

```
CustomCell *cell = [customTableView dequeueReusableCellWithIdentifier:@"vvv"]; 
```

# ios - 创建 UIImage 线程安全吗？

> ID：12766501
> 
> 赞同：4
> 
> 时间：2012-10-07T06:01:21.260
> 
> 标签：ios, uiimage, thread-safety

调用这样的东西被认为是线程安全的吗？它只是创建一个 UIImage，没有 UI 更新。我找不到任何关于此的文档。

```
UIImage * hiResImage = [[UIImage alloc] initWithContentsOfFile:path]; 
```

仅供参考，我稍后会像这样在主线程上进行 UI 更新...

```
[imageViewForZoom performSelectorOnMainThread:@selector(setImage:) withObject:hiResImage waitUntilDone:NO]; 
```

我已经知道的：

*   从 iOS4 开始，UIKit 的很多绘制方法都变成了线程安全的。从[这里](https://stackoverflow.com/questions/10976424/warn-on-calls-to-uikit-from-background-threads)阅读。
*   我不应该在后台线程上更新 ui（例如 no `[myImageView setImage:image];`）

编辑：让我们看另一个观点。“非线程安全”是否意味着它有可能永远被阻塞？或者只是意味着无法保证开始/持续时间的执行时间。如果是后一种情况，那么如果我们在加载图像时会有一些“不确定量”的延迟是没有问题的。UI 更新在主线程上完成。因此，至少对于创建 UIImage 而言，它仍然被认为是非线程安全的。

我知道这与问题并没有真正的关系，但只是想指出它，因为我担心我原来的问题不会有明确的答案:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-20T02:29:27.187

我在下面的经验不是直接使用，`UIImage initContentsFromFile:`而是使用`UIImage imageWithData`，但您的问题是关于 UIImage 线程安全。

我最近不得不调试一个使用从函数`[UIImage imageWithData:]`调用的问题，以使用多个后台线程下载图像。由于下载的图像用于更新 UI，因此我必须使用以下内容：`NSURLConnetionDelegate``connectionDidFinishLoading``[NSOperationQueue mainQueue] addOperationWithBlock ...`

```
- (void) connection:(URLConnection*)connection didReceiveData:(NSData *) data {
    [imgData appendData:data];
}

- (void) connectionDidFinishLoading:(NSURLConnection*)connection {
    [NSOperationQueue mainQueue] addOperationWithBlock:^{
        UIImage *img = [UIImage imageWithData:imgData];
        // more code here to update the UI
    }];
} 
```

*   在 iOS 7.x 模拟器上运行时，`img`保存有效图像
*   在 iOS 7.x 设备 (iPod Touch) 上运行时，`img`始终`nil`

在调试会话期间，我注意到当调试器一次单步执行每个语句时，问题（暂时）消失了。我的理论是，在调试器步进模式下运行并不能`UIImage`处理正在运行的并发线程 `imageWithData`。因此，我相信`UIImage imageWithData`（也许还有其他类似的功能）不是线程安全的。

使用`@synchronized`块似乎可以解决问题

```
- (void) connectionDidFinishLoading:(NSURLConnection*)connection {
    [NSOperationQueue mainQueue] addOperationWithBlock:^{
        @synchronized(imgData) {
            // Run the following in a synchronized block
            UIImage *img = [UIImage imageWithData:imgData];
        }
        // more code here ....
    }];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-21T06:26:21.477

根据 Apple 的说法，答案是肯定的，从任何线程创建 UIImage 都是安全的：

> 由于图像对象是不可变的，因此您无法在创建后更改它们的属性。大多数图像属性是使用随附图像文件或图像数据中的元数据自动设置的。图像对象的不可变特性也意味着它们可以**安全地从任何线程创建和使用**。

[https://developer.apple.com/reference/uikit/uiimage](https://developer.apple.com/reference/uikit/uiimage)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T06:15:13.903

是的。在后台加载图像是相当普遍的做法，主要是如果它是一个远程文件，或者如果正在加载许多图像。是的，只在主线程上更新 UI。

编辑：

由于一些启发性的评论，我会将我的第一个答案“是”修改为“根据经验和我对加载图像时 UIImage 线程安全性的可行替代方案的评估，我认为这是合理的假设是。然而，每个人都有自己的意见，也许他或她与这里的代码故障相关的风险太高，无法在任何情况下做出假设。

# android - Android Gallery 和 ImageSwitcher 第一个图像

> ID：12766503
> 
> 赞同：2
> 
> 时间：2012-10-07T06:02:15.973
> 
> 标签：android

我在 Eclipse Android Development 中实现了 Gallery 和 Image Switcher。

单击缩略图时，它会加载图像，单击设置壁纸时，它也会设置壁纸。但是一旦应用程序加载，我想将第一张图片从画廊显示到图像切换器。否则，如果您单击设置墙纸，它将引发异常。从图库中选择图像后，它将正常工作。

谁能帮助我如何在图像切换器中显示画廊的第一张图像，以便当我单击设置墙纸而不选择图像时，它应该可以正常工作

还有一件事，在图像切换器初始化后，我设置了第一张图像，但它占用了模拟器中的整个窗口？如果您选择一个图像，它会显示预览。

提前致谢。

# jquery - CSS过渡不起作用

> ID：12766507
> 
> 赞同：2
> 
> 时间：2012-10-07T06:03:09.477
> 
> 标签：jquery, css, jquery-plugins, css-transitions, carousel

我已经使用 css 构建了一个旋转轮播。轮播由“ul”标签构成。在向左/向右导航时，我在列表的左侧或右侧添加一个“li”（克隆相关值并附加/附加它）。然后我正在更正“ul”的左值并使用动画的 css 过渡移动“ul”。这用于通过动画实现无尽的导航效果。
该动画非常适合“下一个”导航，但无法在“后退”上工作。对我来说最令人困惑的部分是，在调试“返回”代码时，动画确实有效！（也许这是一个时间问题，但是，为什么“下一个”有效？？？）

该问题的演示在这里：[jsfiddle](http://jsfiddle.net/efraimya/wBm2R/10/)

*请注意*：这不是我的真实代码。真正的代码封装在一个面向对象风格的插件中，对用户快速向前和向后单击等情况进行验证，并使用 jQuery 'animate' 为 ie 提供一个 polyfill。我也确实考虑过使用现成的插件，但要求不符合我发现的要求......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T06:27:33.443

这个问题让我有些困惑。在中间（`addClass`呼叫周围）添加警报时，它似乎有点工作。这可能与浏览器的 DOM 更新时间有关，至少对我来说，这是一个巨大的兼容性危险信号。

既然您仍然依赖 jQuery *，*我建议您改用 jQuery 动画。代码更小，功能受支持，并且可以在 CSS3 之前的浏览器中运行。我已经模拟了[一个小提琴，基于你](http://jsfiddle.net/wBm2R/11/)的，它完全符合你对自己的期望，只是使用它[`.animate()`](http://api.jquery.com/animate/)。

请注意，我使用了`swing`jQuery 缓动；如果你想要更多的缓动类型（就像`ease-in-out`你在 CSS 中的那样），试试[jQuery easing plugin](http://gsgd.co.uk/sandbox/jquery/easing/)。

使用的代码（在`.prev`按钮上）：

```
$('.prev').on('click', function() {
    var $childelement = $('ul');
    $childelement.children('li').last().clone().prependTo($childelement);
    $childelement.css({
        'left': '-150px'
    }).animate({ 'left': '-50px' }, 400, "swing", function() {
        console.log('transition ended');
        $childelement.children('li').last().remove();
    });
});​ 
```

# lua - 你好 metatable.__len 世界

> ID：12766510
> 
> 赞同：3
> 
> 时间：2012-10-07T06:04:03.440
> 
> 标签：lua, metatable

一个初学者关于 Lua 和*metatables*的问题，举个简单的例子，比如 Hello‑World，涉及`len`事件，不幸的是它没有返回预期的结果（我使用的是从 Ubuntu 官方存储库安装的 Lua 5.1）。

# 案子

这是示例：

```
Test_Type = {};

function Test_Type.__len (o)
   return 1;
end;

function new_test ()
   local result = {};
   setmetatable(result, Test_Type);
   return result;
end;

do
   local a_test = new_test();
   print (#a_test);
   print(getmetatable(a_test).__len(a_test));
end; 
```

我得到的结果是：

```
0
1 
```

我期待第一个打印语句显示`1`，但它显示`0`，令我大吃一惊。

我错过了什么？

根据[Lua Reference Manual — Metatables and Metamethods](http://www.lua.org/manual/5.2/manual.html#2.4)，`#`相当于：

```
function len_event (op)
  if type(op) == "string" then
    return strlen(op)      -- primitive string length
  else
    local h = metatable(op).__len
    if h then
      return (h(op))       -- call handler with the operand
    elseif type(op) == "table" then
      return #op              -- primitive table length
    else  -- no handler available: error
      error(···)
    end
  end
end 
```

所以`print (#a_test);`结果`print(getmetatable(a_test).__len(a_test));`应该是一样的，不是吗？

顺便说一句，为什么参考手册的上述摘录`metatable(op)`应该是指的`getmetatable(op)`？至少我已经尝试过`print(metatable(a_test).__len(a_test));`了，它以错误告终。

# 回答

正如*Nneonneo 所*注意到的，这是使用中的 Lua 版本的问题。上述工作似乎需要 Lua 5.2。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T06:08:38.900

来自[http://lua-users.org/wiki/LuaFaq](http://lua-users.org/wiki/LuaFaq)：

> ### 为什么 __gc 和 __len 元方法不适用于表？
> 
> `__len`on tables 计划在 5.2 中得到支持。请参阅 LuaFiveTwo。

由于您使用的是 5.1，`__len`因此在表上不起作用。事实上，在 Lua 5.2 上运行你的代码会产生

```
1
1 
```

正如预期的那样。

# android - 使用 am startservice 重启 SystemUI

> ID：12766511
> 
> 赞同：8
> 
> 时间：2012-10-07T06:04:10.793
> 
> 标签：android, android-service, adb

我一直在尝试在我的应用程序中使用这些重新启动 SytemUI，但它不起作用，我在 Android 4.0.4 上。有帮助吗？

> 我开始服务 -n com.android.systemui/.SystemUIService

它适用于 adb shell，但不适用于我的应用程序或 android 的终端。

我在我的应用程序中使用的代码：

```
Process mSuProcess; mSuProcess = Runtime.getRuntime().exec("su"); 

DataOutputStream mSuDataOutputStream = new DataOutputStream(mSuProcess.getOutputStream()); 

mSuDataOutputStream.writeBytes("am startservice -n com.android.systemui/.SystemUIService\n"); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-15T04:44:33.520

在互联网上进行大量搜索后，我设法让系统栏出现在 4.2 设备中，使用：

```
am startservice --user 0 -n com.android.systemui/.SystemUIService 
```

或者，有些人使用了 -a（而不是 -n）选项，尽管这会导致错误或我的设备：

错误：未找到；没有服务启动。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T06:40:54.810

运行 shell 而不是 su，比如；

```
Process mSuProcess;  mSuProcess = Runtime.getRuntime().exec("sh"); 
```

# java - Selenium.setTimeout 不等待指定时间

> ID：12766514
> 
> 赞同：0
> 
> 时间：2012-10-07T06:05:58.517
> 
> 标签：java, selenium

我们必须持续监控 URL 以检查其可用性。我使用硒进行模拟。下面粘贴的是一段代码。

```
driver = new InternetExplorerDriver();
selenium = new WebDriverBackedSelenium(driver, mainUrl);
selenium.setTimeout("90000");
selenium.open(mainUrl); 
```

但是，`selenium.timeout`即使 URL 没有在 90000 毫秒内打开也不起作用。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:06:01.543

您还可以使用：

```
driver.manage().timeouts().implicitlyWait(90, TimeUnit.SECONDS); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T08:59:06.960

根据[selenium javadoc](http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/remote/RemoteWebDriver.RemoteWebDriverOptions.RemoteTimeouts.html)，该示例如下所示：

```
driver = new InternetExplorerDriver();
driver.manage().timeouts().pageLoadTimeout(10, TimeUnit.SECONDS);
selenium.open(mainUrl); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-07T09:32:17.243

尝试使用 Thread.sleep()：

```
 final String sUrl = "http://www.google.ca/index.html";

// Instantiate the Internet Explorer browser.
WebDriver oWebDriver = new InternetExplorerDriver();

// Open the main google webpage.
oWebDriver.get(sUrl);

try
{
  Thread.sleep(5000);
}
catch(InterruptedException ex)
{
  System.out.println(ex.getMessage());
} 
```

如果您想检查可用性，请尝试使用 fluentWait：

```
 public WebElement fluentWait(final By locator){
        Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
                .withTimeout(30, TimeUnit.SECONDS)
                .pollingEvery(5, TimeUnit.SECONDS)
                .ignoring(NoSuchElementException.class);

        WebElement foo = wait.until(
new Function<WebDriver, WebElement>() {
            public WebElement apply(WebDriver driver) {
                        return driver.findElement(locator);
                }
                }
);
                           return  foo;              }     ; 
```

*一个 Wait 接口的实现，可以动态配置它的超时和轮询间隔。每个 FluentWait 实例定义等待条件的最长时间，以及检查条件的频率。此外，用户可以将等待配置为在等待时忽略特定类型的异常，例如在页面上搜索元素时的 NoSuchElementExceptions。*

希望这对你有帮助）

# c# - C# 线程处理事件

> ID：12766515
> 
> 赞同：1
> 
> 时间：2012-10-07T06:06:11.530
> 
> 标签：c#, multithreading, events, event-handling

我试图让线程也处理 pricecutEvent，但我无法让线程订阅 priceCutEvent。所以它不是由每个线程处理的。我这样做的原因是当 priceCutEvent 发生时，线程应该“购买”更多的鸡。但它只是由常规的“chickenStore”处理，而不是由 5 个线程处理。我该如何做到这一点，以便线程实际处理事件？我试过了：

```
ChickenFarm.priceCut += new priceCutEvent(reatilers[i].chickenOnSale); 
```

但这不起作用。为你删除了很多。

```
public delegate void priceCutEvent(Int32 pr); //define a delegate
public delegate void orderEvent();

public static void changePrice(Int32 price)
{
    if (price < chickenPrice) //a price cut occured
    {
        if (priceCut != null) //there is at least one subscriber
            priceCut(price); //emit event to subscriber
    }
    chickenPrice = price;
}
public class myApplication
{
    static void Main(string[] args)
    {
        ChickenFarm chicken = new ChickenFarm();
        multiCellBuffer thisBuffer = new multiCellBuffer();

        /*Alternatively we could use this instead of a regular expression:
        ThreadStart starter = delegate{chicken.farmerFunc(thisBuffer);};
        Thread farmer = new Thread(starter);
        farmer.start(); */
        Thread farmer = new Thread(() => chicken.farmerFunc(thisBuffer));
        farmer.Start();     // Start one farmer thread

        Retailer chickenstore = new Retailer();
        Retailer.orderInNeedOfProcessing += new orderEvent(chicken.processOrder);
        Thread[] retailers = new Thread[5];
        ChickenFarm.priceCut += new priceCutEvent(chickenstore.chickenOnSale);
        for (int i = 0; i < 5; i++) // Start N retailer threads
        {
            //Thread thread = new Thread(() => ReadCentralOutQueue("test"));
            retailers[i] = new Thread(() => chickenstore.retailerFunc(thisBuffer, chicken));
            retailers[i].Name = (i + 1).ToString();         
            retailers[i].Start();     
        }
    }
}
public void chickenOnSale(Int32 p) // Event handler
{
    // order chickens from chicken farm - send order into queue
    OrderObject myOrder = new OrderObject();
    myOrder.setID(Thread.CurrentThread.Name);
    Console.WriteLine("Order ID: {0}", Thread.CurrentThread.Name);

    Int64 myRandomCardNo = rng.Next(1000000000);
    Int32 myRandomAmount = rng.Next(0, 100);
    myOrder.setCardNo(myRandomCardNo);
    myOrder.setAmount(myRandomAmount);

    String myOrderString = encoder(myOrder);
    Console.WriteLine("Un-Encrypted Order: {0}", myOrder.toString()); 
    Console.WriteLine("Encrypted Order: {0}", myOrderString);
    sendOrder(myBuffer, myOrderString);

    Console.WriteLine("Store {0} chickens are on sale: as low as ${1} each",
        Thread.CurrentThread.Name, p);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T06:10:45.460

不幸的是，事件不是那样工作的。处理程序始终由引发事件的线程执行，而不是由订阅事件的线程执行。

# c - 双向链表节点中的多个元素是否可能？

> ID：12766518
> 
> 赞同：0
> 
> 时间：2012-10-07T06:06:40.503
> 
> 标签：c

我想知道是否可以在 C 中的双向链表的节点中插入多个元素。我需要这个能够读取具有以下内容的文件：

00:00 67.7

00:01 67.6

00:02 67.7

00:03 67.6

00:04 67.6

00:05 67.3

00:06 67.4

并将前 4 个数字复制为 2 个整数，将第三个数字复制为浮点数。我希望将这 3 个放在双向链表的一个节点中，以便以后能够将它们与其他节点中的数字进行比较。我在想一些类似的事情：

```
while (fscanf(ifp, "%d:%d %d.%d ", &hour, &min, &tempI, &tempD) != EOF) {

int dlist_ins_next(Dlist *list, DlistElmt *element1, *element2, *element3, const void *int1, *int2, *float);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T06:13:39.363

由于您希望第三个作为浮点值，请将您的扫描功能更改为：

```
fscanf(ifp, "%d:%d %f ", &hour, &min, &temp) 
```

您应该将节点实现为结构：

```
struct node
{
  int hour;
  int min;
  float temp;

  struct node *next;
  struct node *prev;    
}; 
```

# google-drive-api - 如何识别更改提要中的确切更改内容

> ID：12766519
> 
> 赞同：1
> 
> 时间：2012-10-07T06:07:13.513
> 
> 标签：google-drive-api

我正在阅读[Manage-changes](https://developers.google.com/drive/manage-changes)文档，并[在此处](https://developers.google.com/apis-explorer/#s/drive/v2/drive.changes.list?includeDeleted=false&_h=4&)尝试过。它显示了在最大更改 ID 之后更改/修改的文件是什么。

但是从这个响应中，我如何准确地确定正在更改的内容！说我的最大更改 ID 请求返回了一个文档链接。现在我回到谷歌驱动器并启动了那个特定的文档。现在，当我使用 (largestChangeId+1) 尝试相同的请求时，它返回了一个新的响应。如何确定此更改是由为文档加星标引起的？这应该只手动比较吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T23:31:26.093

每当更改文件时，更改提要中的相应条目将包含`file`具有更新元数据的属性：

[https://developers.google.com/drive/v2/reference/changes#resource](https://developers.google.com/drive/v2/reference/changes#resource)

而不是手动比较属性，您应该简单地用更新的副本覆盖您的本地副本。

# python - 无法执行 Django runserver 并且没有建议的解决方案似乎有效

> ID：12766520
> 
> 赞同：0
> 
> 时间：2012-10-07T06:07:14.550
> 
> 标签：python, django

我以前在 localhost 上运行过 Django 服务器，但从未遇到过这个问题。我拼命想弄清楚我做错了什么。

我在 Ubuntu 12.04 上使用 Django 1.4 和 Python 2.7。

据我所知，我已经正确配置了所有东西——我实际上正在使用我构建的另一个功能性 Django 项目。

如果我运行以下命令（或其任何推荐的变体），我会收到错误消息。

```
django-admin.py runserver localhost:8000 
```

这是错误：

```
ImportError: Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined. 
```

有人可以告诉我为什么会发生这个错误，如何修复它以及为什么我的其他 Django 项目没有发生它？！？

我只是通过一些快速的谷歌搜索发现了很多关于这个问题的帖子，但是建议的解决方案都没有帮助 - 我也没有真正理解它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T06:08:41.000

我很确定你应该跑

```
manage.py runserver 
```

从您的项目目录中。它会自动加载您的 settings.py 等。

来自[Django 文档](https://docs.djangoproject.com/en/dev/ref/django-admin/)：

> 通常，在处理单个 Django 项目时，使用 manage.py 会更容易。如果您需要在多个 Django 设置文件之间切换，请将 django-admin.py 与 DJANGO_SETTINGS_MODULE 或 --settings 命令行选项一起使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T06:12:09.563

提供更多代码或目录结构示例可能会有所帮助。

首先，命令一般是`manage.py runserver 8000`，所以尝试一下，这可能会有所不同。

其次，在 Django 1.4 中，`settings.py`文件的位置被移动了。在以前的 Django 版本中，目录结构如下所示：

```
myproject/
    settings.py
    views.py
    urls.py
    myapp/
        models.py
        ...
    ... 
```

然而，在 Django 1.4 中，主要的项目设置和文件被移动到了不同的目录：

```
myproject/
    myproject/
        settings.py
        views.py
        urls.py
    myapp/
        models.py
        urls.py
        ...
    ... 
```

因此，如果您使用的是 Django 1.4 但不使用之前的示例，那么您`settings.py`可能来错地方了。此外，我发现在运行时`django-admin.py startproject`，它有时会错误地创建**两个** `settings.py`文件，一个在旧位置，一个在新位置，这可能会让您感到困惑。唯一`manage.py`需要注意的是项目目录中的那个。

如果事实证明您`settings.py`在错误的位置但您不想移动它，正如您的错误所暗示的那样，您可以设置一个环境变量，称为您想要用于项目`DJANGO_SETTINGS_MODULE`的 Django 的路径。`settings.py`我绝对不建议这样做。

# sql - 找出谁在表格中添加了新列

> ID：12766527
> 
> 赞同：1
> 
> 时间：2012-10-07T06:08:20.333
> 
> 标签：sql, sql-server

我有一个非常重要的数据库，其中包含实时客户数据，我们实际上维护了这个数据库。有人在关键表中创建了一个新列。我需要找出是谁创建了这个专栏。

我正在使用 SQL Server2005

这是一个非常关键的问题。我必须如此迅速地回答管理，所以这方面的任何回答都非常有帮助。

非常非常感谢提前。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T11:08:57.657

根据更改发生的时间，您可以从默认跟踪中确定这一点（要求您没有禁用它，并且它没有滚动 5 次并在此期间删除了跟踪文件）。

[请参阅我对确定架构更改如何发生的](https://dba.stackexchange.com/a/10718/3690)回答？有关更多详细信息，请访问 DBA 站点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T06:25:05.983

事后没有办法做到这一点，除非你已经预先配置了数据库来这样做。

[这个问题](https://stackoverflow.com/q/7498459/62576)可以提供更多信息。[这里](https://stackoverflow.com/q/12283370/62576)还有一个链接，提供了更多详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T08:23:27.747

将 EventData() 函数与 DDL 触发器一起使用 创建事件日志表

```
--CREATE TABLE EvtLog  
(
PostTime DATETIME,
LoginName NVARCHAR(100),
EventType NVARCHAR(100), 
TSQLCommand NVARCHAR(2000)  
)
GO
--Create the DDL trigger
CREATE TRIGGER trPreventTblChange 
ON DATABASE
FOR ALTER_TABLE
AS
DECLARE @Data XML
SET @Data = EventData()
INSERT EvtLog (PostTime, LoginName, EventType, TSQLCommand) 
VALUES
(GETDATE(),
CONVERT(NVARCHAR(100), CURRENT_USER),   
@Data.value('(/EVENT_INSTANCE/EventType)[1]', 'nvarchar(100)'),  
@Data.value('(/EVENT_INSTANCE/TSQLCommand)[1]', 'nvarchar(2000)') ) ;
GO 
```

[有关DDL_TABLE_EVENTS 的](http://technet.microsoft.com/en-us/library/ms180713%28SQL.90%29.aspx)更多信息

# casting - 在 TypeScript 中构建具有属性的函数对象

> ID：12766528
> 
> 赞同：124
> 
> 时间：2012-10-07T06:08:33.120
> 
> 标签：casting, typescript, function-object

我想创建一个函数对象，它也有一些属性。例如，在 JavaScript 中，我会这样做：

```
var f = function() { }
f.someValue = 3; 
```

现在在 TypeScript 中，我可以将其类型描述为：

```
var f: { (): any; someValue: number; }; 
```

但是，如果不需要演员表，我实际上无法构建它。如：

```
var f: { (): any; someValue: number; } =
    <{ (): any; someValue: number; }>(
        function() { }
    );
f.someValue = 3; 
```

如果没有演员阵容，你将如何构建它？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2013-09-05T15:12:25.670

更新：此答案是早期版本的 TypeScript 中的最佳解决方案，但在较新版本中有更好的选择（请参阅其他答案）。

接受的答案有效，并且在某些情况下可能需要，但缺点是没有为构建对象提供类型安全性。如果您尝试添加未定义的属性，此技术至少会引发类型错误。

```
interface F { (): any; someValue: number; }

var f = <F>function () { }
f.someValue = 3

// type error
f.notDeclard = 3 
```

* * *

## 回答 #2

> 赞同：109
> 
> 时间：2017-01-25T13:43:14.070

这现在很容易实现（typescript 2.x）`Object.assign(target, source)`

例子：

[![在此处输入图像描述](../Images/ab9fcd46e9ac1984deac635e0120eb82.png)](https://i.stack.imgur.com/9EtVw.png)

这里的神奇之处在于`Object.assign<T, U>(t: T, u: U)`输入返回*交点* `T & U`。

强制将其解析为已知接口也是直截了当的。例如：

```
interface Foo {
  (a: number, b: string): string[];
  foo: string;
}

let method: Foo = Object.assign(
  (a: number, b: string) => { return a * a; },
  { foo: 10 }
); 
```

由于输入不兼容而导致的错误：

> 错误：foo:number 不可分配给 foo:string
> 错误：number 不可分配给 string[]（返回类型）

*警告：如果针对较旧的浏览器，您可能需要[填充](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)Object.assign。*

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2015-10-28T13:47:05.793

TypeScript 旨在通过[**声明合并**](https://www.typescriptlang.org/docs/handbook/declaration-merging.html)来处理这种情况：

> 您可能还熟悉创建函数然后通过向函数添加属性来进一步扩展函数的 JavaScript 实践。TypeScript 使用声明合并以类型安全的方式构建这样的定义。

声明合并让我们说某物既是函数又是命名空间（内部模块）：

```
function f() { }
namespace f {
    export var someValue = 3;
} 
```

这保留了打字，让我们同时写`f()`和`f.someValue`。`.d.ts`为现有 JavaScript 代码编写文件时，请使用`declare`：

```
declare function f(): void;
declare namespace f {
    export var someValue: number;
} 
```

在 TypeScript 中向函数添加属性通常是一种令人困惑或意想不到的模式，因此请尽量避免它，但在使用或转换较旧的 JS 代码时可能需要这样做。这是将内部模块（命名空间）与外部模块混合的唯一一次。

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2012-10-07T16:33:12.423

因此，如果要求是简单地构建该函数并将其分配给“f”而不进行强制转换，那么这是一个可能的解决方案：

```
var f: { (): any; someValue: number; };

f = (() => {
    var _f : any = function () { };
    _f.someValue = 3;
    return _f;
})(); 
```

本质上，它使用自执行函数文字来“构造”一个​​在分配完成之前将匹配该签名的对象。唯一奇怪的是函数的内部声明必须是“any”类型，否则编译器会提示您分配给对象上尚不存在的属性。

编辑：稍微简化了代码。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-11-26T21:38:21.703

老问题，但是对于从 3.1 开始的 TypeScript 版本，您可以像在普通 JS 中一样简单地进行属性分配，只要您使用函数声明或`const`变量的关键字：

```
function f () {}
f.someValue = 3; // fine
const g = function () {};
g.someValue = 3; // also fine
var h = function () {};
h.someValue = 3; // Error: "Property 'someValue' does not exist on type '() => void'" 
```

[参考](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-1.html#properties-declarations-on-functions)和[在线示例](https://www.typescriptlang.org/play/index.html#src=function%20f%20()%20%7B%7D%0D%0Af.someValue%20%3D%203%3B%0D%0Aconst%20g%20%3D%20function%20()%20%7B%7D%3B%0D%0Ag.someValue%20%3D%203%3B%0D%0Avar%20h%20%3D%20function%20()%20%7B%7D%3B%0D%0Ah.someValue%20%3D%203%3B%0D%0A)。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-02-07T23:57:37.367

我不能说这很简单，但绝对有可能：

```
interface Optional {
  <T>(value?: T): OptionalMonad<T>;
  empty(): OptionalMonad<any>;
}

const Optional = (<T>(value?: T) => OptionalCreator(value)) as Optional;
Optional.empty = () => OptionalCreator(); 
```

如果你好奇[，这是我的 TypeScript/JavaScript 版本的要点`Optional`](https://gist.github.com/thiagoh/b3cff3fce3bbadab2231e0e55a74174a)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-11T04:38:37.403

作为快捷方式，您可以使用 ['property'] 访问器动态分配对象值：

```
var f = function() { }
f['someValue'] = 3; 
```

这绕过了类型检查。但是，它非常安全，因为您必须以相同的方式有意访问该属性：

```
var val = f.someValue; // This won't work
var val = f['someValue']; // Yeah, I meant to do that 
```

但是，如果您真的想要检查属性值的类型，这将不起作用。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-03-10T19:14:36.893

更新的答案：由于通过添加交集类型`&`，因此可以动态“合并”两种推断类型。

这是一个通用助手，它读取某个对象的属性`from`并将它们复制到一个对象`onto`上。它返回相同的对象`onto`，但具有包含两组属性的新类型，因此正确描述了运行时行为：

```
function merge<T1, T2>(onto: T1, from: T2): T1 & T2 {
    Object.keys(from).forEach(key => onto[key] = from[key]);
    return onto as T1 & T2;
} 
```

这个低级助手仍然执行类型断言，但它在设计上是类型安全的。有了这个助手，我们就有了一个操作符，我们可以用它来解决完全类型安全的 OP 问题：

```
interface Foo {
    (message: string): void;
    bar(count: number): void;
}

const foo: Foo = merge(
    (message: string) => console.log(`message is ${message}`), {
        bar(count: number) {
            console.log(`bar was passed ${count}`)
        }
    }
); 
```

[单击此处在 TypeScript Playground 中试用](http://www.typescriptlang.org/Playground#src=interface%20Foo%20%7B%0A%09(message%3A%20string)%3A%20void%3B%0A%09bar(count%3A%20number)%3A%20void%3B%0A%7D%0A%0Aconst%20foo%3A%20Foo%20%3D%20merge(%0A%09(message%3A%20string)%20%3D%3E%20console.log(%60message%20is%20%24%7Bmessage%7D%60)%2C%20%7B%0A%09%09bar(count%3A%20number)%20%7B%0A%09%09%09console.log(%60bar%20was%20passed%20%24%7Bcount%7D%60)%0A%09%09%7D%0A%09%7D%0A)%3B%0A%0Afunction%20merge%3CT1%2C%20T2%3E(onto%3A%20T1%2C%20from%3A%20T2)%3A%20T1%20%26%20T2%20%7B%0A%09Object.keys(from).forEach(key%20%3D%3E%20onto%5Bkey%5D%20%3D%20from%5Bkey%5D)%3B%0A%09return%20onto%20as%20T1%20%26%20T2%3B%0A%7D)。请注意，我们已经限制`foo`为 type `Foo`，因此 的结果`merge`必须是完整的`Foo`. 因此，如果您重命名`bar`为，`bad`则会出现类型错误。

**注意**这里仍然有一种类型的孔，但是。TypeScript 没有提供将类型参数约束为“不是函数”的方法。因此，您可能会感到困惑，并将您的函数作为第二个参数传递给`merge`，但这是行不通的。因此，在可以声明之前，我们必须在运行时捕获它：

```
function merge<T1, T2>(onto: T1, from: T2): T1 & T2 {
    if (typeof from !== "object" || from instanceof Array) {
        throw new Error("merge: 'from' must be an ordinary object");
    }
    Object.keys(from).forEach(key => onto[key] = from[key]);
    return onto as T1 & T2;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-21T15:59:26.817

这与强类型不同，但你可以这样做

```
var f: any = function() { }
f.someValue = 3; 
```

如果你想像我发现这个问题时那样绕过压抑的强类型。遗憾的是，TypeScript 在完全有效的 JavaScript 上失败了，所以你必须告诉 TypeScript 退出。

“你的 JavaScript 是完全有效的 TypeScript”计算结果为假。（注：使用 0.95）

# c - push 与 mov 的成本（堆栈与近内存）以及函数调用的开销

> ID：12766534
> 
> 赞同：30
> 
> 时间：2012-10-07T06:08:53.590
> 
> 标签：c, assembly, x86, stack, processing-efficiency

**问题：**

访问堆栈的速度与访问内存的速度相同吗？

例如，我可以选择在堆栈中做一些工作，或者我可以直接使用内存中的标记位置进行工作。

所以，具体来说：`push ax`速度是否与`mov [bx], ax`? 同样`pop ax`速度与`mov ax, [bx]`? （假设 bx 在`near`内存中保存一个位置。）

**提问的动机：**

在 C 中，不鼓励使用参数的琐碎函数是很常见的。

我一直认为这是因为不仅参数必须被压入堆栈然后在函数返回后从堆栈中弹出，而且因为函数调用本身必须保留 CPU 的上下文，这意味着更多的堆栈使用。

但是假设人们知道标题问题的答案，应该可以根据直接内存访问的等效数量来量化函数用于设置自身（推送/弹出/保留上下文等）的开销。因此，标题问题。

* * *

（**编辑**：澄清：`near`上面使用的与 16 位 x86 架构`far`的[分段内存模型相反。）](http://en.wikipedia.org/wiki/Far_pointer)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-07T06:49:13.963

如今，您的 C 编译器可以胜过您。它可以内联简单的函数，如果这样做，将不会有函数调用或返回，并且可能不会有与传递和访问正式函数参数相关的额外堆栈操作（或当函数被内联但可用寄存器已用尽）如果一切都可以在寄存器中完成，或者更好的是，如果结果是一个常量值并且编译器可以看到并利用它。

函数调用本身在现代 CPU 上可能相对便宜（但不一定是零成本），如果它们是重复的，并且如果有单独的指令缓存和各种预测机制，有助于高效的代码执行。

除此之外，我希望选择“local var vs global var”对性能的影响取决于内存使用模式。如果 CPU 中有内存缓存，则堆栈很可能在该缓存中，除非您在其上分配和解除分配大型数组或结构或进行深度函数调用或深度递归，从而导致缓存未命中。如果经常访问感兴趣的全局变量或者经常访问它的邻居，我希望该变量大部分时间也在缓存中。同样，如果您正在访问无法放入缓存的大范围内存，您将遇到缓存未命中并可能降低性能（可能是因为可能有也可能没有更好的缓存友好的方式来执行您的操作想要做）。

如果硬件相当笨拙（没有或很小的缓存、没有预测、没有指令重新排序、没有推测执行，什么都没有），显然你想减少内存压力和函数调用的数量，因为每个人都会算数。

还有一个因素是指令长度和解码。访问堆栈位置（相对于堆栈指针）的指令可以比访问给定地址的任意内存位置的指令短。较短的指令可以更快地解码和执行。

我想说对于所有情况都没有明确的答案，因为性能取决于：

*   你的硬件
*   你的编译器
*   您的程序及其内存访问模式

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-10T12:11:38.860

**对于时钟周期好奇...**

对于那些希望查看特定时钟周期的人，可[在此处](https://stackoverflow.com/a/12766748/181638)获得各种现代 x86 和 x86-64 CPU 的[指令/延迟表](http://www.agner.org/optimize/#manuals)（感谢 hirschhornsalz 指出这些）。

然后，您会在 Pentium 4 芯片上获得：

*   `push ax`和`mov [bx], ax`（红框）的效率几乎相同，延迟和吞吐量相同。
*   `pop ax`和`mov ax, [bx]`（蓝框）同样有效，尽管`mov ax, [bx]`延迟是`pop ax`

![Pentium 4 指令时序表](../Images/6af08d05bdb5b60bfac5941a4d665325.png)

至于评论中的后续问题（第三条评论）：

*   间接寻址（ie `mov [bx], ax`）与直接寻址（ie ）没有本质区别`mov [loc], ax`，其中 loc 是一个保存立即值的变量，例如`loc equ 0xfffd`。

**结论：**将此与[Alexey 的彻底回答](https://stackoverflow.com/a/12766748/181638)结合起来，使用堆栈的效率并让编译器决定何时内联函数是一个非常可靠的案例。

（旁注：事实上，即使早在 1978 年的 8086，使用堆栈的效率仍然不低于相应的 mov 到内存，从[这些旧的 8086 指令时序表](http://my.safaribooksonline.com/book/hardware/9788131732465/instruction-set-and-instruction-timing-of-8086/app_c)中可以看出。）

* * *

**了解延迟和吞吐量**

要了解现代 CPU 的时序表，可能还需要更多知识。这些应该有助于：

*   [延迟和吞吐量的定义](http://www.cadence.com/Community/blogs/sd/archive/2010/09/13/understanding-latency-vs-throughput.aspx)
*   [延迟和吞吐量的有用类比](http://www.futurechips.org/thoughts-for-researchers/clarifying-throughput-vs-latency.html)，以及它们与指令处理管道的关系）

# iphone - 在应用启动期间请求访问照片库

> ID：12766535
> 
> 赞同：4
> 
> 时间：2012-10-07T06:08:56.180
> 
> 标签：iphone, ios

我正在开发一个应用程序，它可以在某些事件期间自动拍照并将它们直接保存到照片库中。不幸的是，当它运行时，用户可能并不总是在看他们的手机，并且第一次拍照时，它会要求获得访问照片的权限。

有没有办法可以在启动期间强制执行此请求并将其排除在外？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T16:05:14.587

是的。您需要请求访问图书馆。
只需在 AppDelegate 中使用此代码`didFinishLaunchingWithOptions`

```
ALAssetsLibraryGroupsEnumerationResultsBlock assetGroupEnumerator =
^(ALAssetsGroup *assetGroup, BOOL *stop) {
    if (assetGroup != nil) {
        // do somthing
     }
};

ALAssetsLibraryAccessFailureBlock assetFailureBlock = ^(NSError *error) {
    LogError(@"Error enumerating photos: %@",[error description]);

};

NSUInteger groupTypes = ALAssetsGroupAll;

[library enumerateGroupsWithTypes:groupTypes usingBlock:assetGroupEnumerator failureBlock:assetFailureBlock]; 
```

# regex - 如何为 cms 重写一个 mod，为静态页面重写另一个 mod？

> ID：12766540
> 
> 赞同：1
> 
> 时间：2012-10-07T06:10:36.993
> 
> 标签：regex, drupal, mod-rewrite

我目前有一个安装了 Drupal 的站点，并且它具有干净的 url，因此 .htaccess 文件包含以下内容：

```
RewriteRule ^ index.php [L] 
```

除此之外，我希望能够发布静态 html 页面并让它们也使用干净的 url。我正在考虑通过添加特定关键字（例如内容）将它们与drupal页面区分开来，并且可能有类似下面的内容（不确定这是否可行） - 我得到一个像www.domainname.com/nice-holiday这样的网址并翻译它到 domainname.com/ftp/pages/nice-holiday.html

```
RewriteRule   ^content/(.+)$   domainname.com/ftp/pages/$1.html   [L] 
```

问题是第一条规则将尝试针对所有请求执行。我尝试将更具体的规则放在更一般的规则之前，但它仍然不起作用。你怎么能有两个基于条件的mod重写规则？例如，某个特定词的存在？更一般地说，有没有人有在一个网站上处理 CMS 和静态页面的经验 - 或者这是自找麻烦？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T00:27:31.470

This is where RewriteCond comes in handy.

```
# make sure no rewriting is done for requests without www
RewriteCond %{HTTP_HOST} !^domainname\.com
RewriteCond %{REQUEST_URI} !^/?content/
RewriteRule ^ index.php [L]

# later on...
# don't want this rule to apply for non-www requests either
RewriteCond %{HTTP_HOST} !^domainname\.com
RewriteRule ^/?content/(.+)$ http://domainname.com/ftp/pages/$1.html [L] 
```

I think this is what you're going for? You can eliminate the %{HTTP_HOST} conditions completely if you don't actually care about the www thing. The two rules can still coexist as long as you keep the `%{REQUEST_URI}` condition on the drupal rewrite, so drupal rewrites explicitly do not apply for URIs beginning with the /content/ prefix.

# c++ - C++：以特定格式从文件中读取内容

> ID：12766541
> 
> 赞同：0
> 
> 时间：2012-10-07T06:10:37.913
> 
> 标签：c++

我有一个文件，其中包含以下格式的像素坐标：

```
234 324
126 345
264 345 
```

我不知道我的文件中有多少对坐标。

如何将它们读入`vector<Point>`文件？我是在 C++ 中使用阅读函数的初学者。

我已经尝试过了，但它似乎不起作用：

```
vector<Point> iP, iiP;

ifstream pFile, rFile;
pFile.open("D:\\MATLAB\\WORKSPACE_MATLAB\\pData.txt");
rFile.open("D:\\MATLAB\\WORKSPACE_MATLAB\\rData.txt");

string rBuffer, pBuffer;
Point rPoint, pPoint;

while (getline(pFile, pBuffer))
{
    getline(rFile, rBuffer);

    sscanf(rBuffer.c_str(), "%d %d", rPoint.x, rPoint.y);
    sscanf(pBuffer.c_str(), "%d %d", pPoint.x, pPoint.y);

    iP.push_back(pPoint);
    iiP.push_back(rPoint);
} 
```

我收到一些奇怪的内存错误。难道我做错了什么？如何修复我的代码以便它可以运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T06:19:29.377

一种方法是`operator>>`为您的类定义一个自定义输入运算符 ( ) `Point`，然后使用它`istream_iterator`来读取元素。这是一个演示该概念的示例程序：

```
#include <iostream>
#include <iterator>
#include <vector>

struct Point {
    int x, y;
};

template <typename T>
std::basic_istream<T>& operator>>(std::basic_istream<T>& is, Point& p) {
    return is >> p.x >> p.y;
}

int main() {
    std::vector<Point> points(std::istream_iterator<Point>(std::cin),
            std::istream_iterator<Point>());
    for (std::vector<Point>::const_iterator cur(points.begin()), end(points.end());
            cur != end; ++cur) {
        std::cout << "(" << cur->x << ", " << cur->y << ")\n";
    }
} 
```

该程序以您在问题中指定的格式从 中获取输入，然后以 (x, y) 格式`cin`输出点。`cout`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T07:19:44.863

感谢 Chris Jester-Young 和 enobayram，我设法解决了我的问题。我在下面添加了我的代码。

```
vector<Point> iP, iiP;

ifstream pFile, rFile;
pFile.open("D:\\MATLAB\\WORKSPACE_MATLAB\\pData.txt");
rFile.open("D:\\MATLAB\\WORKSPACE_MATLAB\\rData.txt");
stringstream ss (stringstream::in | stringstream::out);

string rBuffer, pBuffer;

while (getline(pFile, pBuffer))
{
    getline(rFile, rBuffer);

    Point bufferRPoint, bufferPPoint;

    ss << pBuffer;
    ss >> bufferPPoint.x >> bufferPPoint.y;

    ss << rBuffer;
    ss >> bufferRPoint.x >> bufferRPoint.y;

    //sscanf(rBuffer.c_str(), "%i %i", bufferRPoint.x, bufferRPoint.y);
    //sscanf(pBuffer.c_str(), "%i %i", bufferPPoint.x, bufferPPoint.y);

    iP.push_back(bufferPPoint);
    iiP.push_back(bufferRPoint);
} 
```

# git - 在本地开发环境中使用 git。不推

> ID：12766543
> 
> 赞同：0
> 
> 时间：2012-10-07T06:10:55.980
> 
> 标签：git

刚开始使用 git，我想知道我可以在本地开发机器上使用 git，而无需访问 github.com 帐户。我想通过提交它们来跟踪源，但现在推送到远程。

据我所知，我将拥有所有功能，因为跟踪与提交的文件一起使用，并且仅将发送文件推送到源（远程服务器）。这是正确的吗 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T06:30:07.083

`commit`并且`push`是不同的动作。 `commit`在本地工作，不接触远程存储库。如果您不希望推送您的本地提交，请在您确信自己的更改之前**不要**运行。`git push`

您可能想要创建一个本地分支并进行处理。我建议您阅读“[一个成功的 Git 分支模型](http://nvie.com/posts/a-successful-git-branching-model/)”以获得一些想法。

# drupal-7 - Mailchimp 订阅表单集成

> ID：12766548
> 
> 赞同：0
> 
> 时间：2012-10-07T06:11:43.967
> 
> 标签：drupal-7, mailchimp

我想在我的 drupal 站点中添加一个 mailchimp 订阅，以允许用户根据类别订阅时事通讯，用户将为时事通讯选择类别，然后订阅它们。mailchimp 为特定活动列表提供表单嵌入代码，但我想要一个用于多个活动列表的表单，订阅者可以使用复选框选择活动列表（类别）。我安装了 mailchimp 模块并尝试使用 webforms 订阅表单，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T06:01:52.097

在 mailchimp 上创建了不同的邮件列表，并为所有列表创建了表单，并将它们全部嵌入到我的网站上，但是 mailchimp 上没有这样的功能可以为所有邮件列表创建和嵌入一个表单。

# mysql - 如何在mysql数据库中将引用从父表传递到子表

> ID：12766549
> 
> 赞同：-2
> 
> 时间：2012-10-07T06:11:43.033
> 
> 标签：mysql

我是数据库新手。我的问题是我创建了一个表`signUp`，其列是

> id、名字、姓氏、电子邮件和国家。

我想创建一个名为`accout_recharge`其列的表，`(email,balance)` 并且每当我将记录插入注册表时，注册表中新添加的电子邮件也会使用引用或外键或任何需要但不重复的内容出现在 account_recharge 表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T06:35:45.717

你可以试试这个

```
CREATE TABLE signup (
     id INT NOT NULL,
     firstName varchar(50),
     lastName varchar(50),
     countryName varchar(50),
     emailName varchar(50),
     PRIMARY KEY (id),
     index email_ind(emailName)    -- updated here 
) ENGINE=INNODB;

CREATE TABLE accout_recharge(  
    id INT,
    balance DECIMAL,
    email varchar(50),    
    FOREIGN KEY (email ) REFERENCES signup (emailName)
                      ON DELETE CASCADE
) ENGINE=INNODB; 
```

[MySql 外键](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)在这里你可以找到关于外键参考的更多细节

**更新：**我忘了告诉你外键引用总是某种`indexed`列。所以你需要把你的电子邮件列放在一个索引中。这就是为什么你得到错误：150

# spring - 如何在 jqgrid 中的单个 URL 中传递多个数据？

> ID：12766551
> 
> 赞同：0
> 
> 时间：2012-10-07T06:12:16.183
> 
> 标签：spring, jqgrid

我正在使用此代码向控制器发送数据，但我想再传递一个参数，比如birthDate 如何使用以下语法传递它？？？

jQuery("#patient").jqGrid('setGridParam', {url : "totalPatientList.html?pid=" + $('#byId').val()});

请尽快帮助我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T06:49:11.873

这应该工作

```
jQuery("#patient").jqGrid('setGridParam', {url : "totalPatientList.html?pid=" + $('#byId').val() +"&birthDate="+$("#birthDateId").val() }); 
```

# f# - 旋转或压缩序列 > 在 F# 中

> ID：12766552
> 
> 赞同：6
> 
> 时间：2012-10-07T06:12:18.053
> 
> 标签：f#, functional-programming, pivot, sequence

假设我有一个序列序列，例如

```
{1, 2, 3}, {1, 2, 3}, {1, 2, 3} 
```

旋转或压缩这个序列的最佳方式是什么，所以我有，

```
{1, 1, 1}, {2, 2, 2}, {3, 3, 3} 
```

有没有一种可以理解的方式来做到这一点而不诉诸于操纵底层`IEnumerator<_>`类型？

为了澄清，这些是`seq<seq<int>>`对象。每个序列（内部和外部）可以有任意数量的项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T10:33:35.623

如果您要寻求语义 Seq 的解决方案，您将不得不一直保持懒惰。

```
let zip seq = seq
            |> Seq.collect(fun s -> s |> Seq.mapi(fun i e -> (i, e))) //wrap with index
            |> Seq.groupBy(fst) //group by index
            |> Seq.map(fun (i, s) -> s |> Seq.map snd) //unwrap 
```

测试：

```
let seq =  Enumerable.Repeat((seq [1; 2; 3]), 3) //don't want to while(true) yield. bleh.
printfn "%A" (zip seq) 
```

输出：

```
seq [seq [1; 1; 1]; seq [2; 2; 2]; seq [3; 3; 3]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T06:40:34.247

这似乎很不雅，但它得到了正确的答案：

```
(seq [(1, 2, 3); (1, 2, 3); (1, 2, 3);]) 
|> Seq.fold (fun (sa,sb,sc) (a,b,c) ->a::sa,b::sb,c::sc) ([],[],[]) 
|> fun (a,b,c) -> a::b::c::[] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T07:21:24.107

它看起来像矩阵转置。

```
let data =
    seq [
        seq [1; 2; 3]
        seq [1; 2; 3]
        seq [1; 2; 3]
    ]

let rec transpose = function
    | (_::_)::_ as M -> List.map List.head M :: transpose (List.map List.tail M)
    | _ -> []

// I don't claim it is very elegant, but no doubt it is readable
let result =
    data
    |> List.ofSeq
    |> List.map List.ofSeq
    |> transpose
    |> Seq.ofList
    |> Seq.map Seq.ofList 
```

或者，您可以对 采用相同的方法`seq`，这要感谢这个优雅的 Active 模式的[答案：](https://stackoverflow.com/a/1757340/974789)

```
let (|SeqEmpty|SeqCons|) (xs: 'a seq) =
  if Seq.isEmpty xs then SeqEmpty
  else SeqCons(Seq.head xs, Seq.skip 1 xs)

let rec transposeSeq = function
    | SeqCons(SeqCons(_,_),_) as M ->
        Seq.append
            (Seq.singleton (Seq.map Seq.head M))
            (transposeSeq (Seq.map (Seq.skip 1) M))
    | _ -> Seq.empty

let resultSeq = data |> transposeSeq 
```

另请参阅[此答案](https://stackoverflow.com/a/10849803/974789)以获取技术细节和两个参考：**PowerPack和涉及****mutable data**的`Microsoft.FSharp.Math.Matrix`另一种方法。

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-31T15:45:00.060

这与@Asti 的答案相同，只是稍微清理了一下：

```
[[1;2;3]; [1;2;3]; [1;2;3]] 
    |> Seq.collect Seq.indexed 
    |> Seq.groupBy fst 
    |> Seq.map (snd >> Seq.map snd);; 
```**

# ios - 按钮和滑块在旋转后停止响应

> ID：12766554
> 
> 赞同：0
> 
> 时间：2012-10-07T06:12:26.943
> 
> 标签：ios, uiviewcontroller, screen-rotation

我有一个测试应用程序，它使用自定义容器控制器根据设备的方向在 2 个子视图控制器之间切换。在 PortraitController 中，我有一个按钮和一个滑块——在一次旋转到横向并返回到纵向后，滑块仍然可以工作，但按钮不能。再一次来回之后，两个 UI 元素都停止响应触摸。

同时，在 LandscapeController 中，在切换到该控制器的前 6 次按钮工作正常，但在第 7 次，按钮仅在最左侧响应，而在第 8 次，它根本不再响应。

旋转后视图看起来很好 - 一切都保持在正确的位置。没有与这些 UI 元素相关联的方法，我只是看看它们是否对触摸有响应。我对两个子视图控制器都有很强的引用，所以我在每次旋转时都呈现相同的实例。如果有帮助，我可以发布容器控制器的代码。

有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T16:16:14.567

经过多次试验，我找到了答案——需要取消选中容器控制器视图中的“自动调整子视图”复选框。我不确定这到底是做什么的，但它不恰当地调整了子控制器的视图大小。

# python - python utf-8 行为

> ID：12766555
> 
> 赞同：0
> 
> 时间：2012-10-07T06:12:31.330
> 
> 标签：python, character-encoding

> **可能重复：**
> [Python 在使用特殊字符时返回错误的字符串长度](https://stackoverflow.com/questions/2247205/python-returning-the-wrong-length-of-string-when-using-special-characters)

我从文件中读取了一个多语言字符串`windows-1251`，例如`s="qwe абв"`（俄语的第二部分），然后：

```
for i in s.decode('windows-1251').encode('utf-8').split():
  print i, len(i) 
```

我得到：

```
qwe 3
абв 6 
```

天哪，为什么？o_O

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T06:21:58.813

在编程语言中，您不能总是将字符串视为字符序列，因为通常它们实际上是字节序列。您不能将每个字符或符号存储在 8 位中，字符编码会创建一些规则来将多个字节组合成一个字符。

对于以 utf-8 编码的字符串`'абв'`，您拥有的是代表 3 个字符的 6 个字节。如果要计算字符数而不是字节数，请确保从 unicode 字符串中获取长度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T06:34:46.850

```
>>> print "абв"
абв
>>> print [char for char in "абв"]
['\xd0', '\xb0', '\xd0', '\xb1', '\xd0', '\xb2'] 
```

这就是为什么 ：）

# android - 需要 Soundcloud 音频流的 URL

> ID：12766557
> 
> 赞同：3
> 
> 时间：2012-10-07T06:12:46.710
> 
> 标签：android, ios, audio-streaming, tablet

我正在为我们的蓝调俱乐部创建一个智能手机/平板电脑应用程序，为了让我配置应用程序来播放我们的音乐，它需要一个流媒体音频的 URL。我想从我的 SoundCloud 集流式传输歌曲。

如何找到音频流的 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T23:53:18.373

您的 SoundCloud 集没有 URL。

听起来您指的是一个普通的流 URL，通常您将在其中将 URL 提供给 SHOUTcast/Icecast/HTTP 流。SoundCloud 资源在单独的文件中提供，因此您没有可使用的单个 URL。

然而，一切都没有丢失。如果您想将您的应用程序与 SoundCloud 集成，可以使用 API。您可以在此处找到有关它的更多信息：http: [//developers.soundcloud.com/blog/stream-and-download](http://developers.soundcloud.com/blog/stream-and-download)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T02:31:32.680

使用像 Bash 这样的语言很容易做到。这是一个简单的示例，它打印一组中歌曲的所有流 URL 和标题：

```
#!/bin/bash

ORIGINAL_PAGE="$(echo "$1" | sed 's|https|http|')"
SOURCE="$(curl -s "$ORIGINAL_PAGE")"
SONG_URLS="$(echo "$SOURCE" | grep -oE "(uri\":\"/[^/]*/[^/\"]*\"|href=\"/[^/]*/[^/]*/\?size=large\")" | sed 's|/\?size=large||' | tr '=' '"' | cut -d\" -f3 | sed -e "s|^|http://soundcloud.com|" -e 's|$|/?size=medium|')"

if [ -z "$SONG_URLS" ]; then
    printf "No songs were found at: $ORIGINAL_PAGE\n"
    exit 1
fi

SONG_COUNT=$(echo "$SONG_URLS" | wc -l)

for (( SONG_ID=1; SONG_ID <= SONG_COUNT; SONG_ID+=1 )); do
    SONG_URL="$(echo "$SONG_URLS" | sed -n "$SONG_ID"p)"
    SET_SONG_PAGE_SOURCE="$(curl -s "$SONG_URL")"
    SONG_TITLE="$(echo "$SET_SONG_PAGE_SOURCE" | grep -o "title\":.*\",\"commentable\"" | sed 's|title\":\"||;s|\",\"commentable\"||' | head -1)"
    STREAM_URL="$(echo "$SET_SONG_PAGE_SOURCE" | grep -o "http://media.soundcloud.com/stream/[^\"<]*\?stream_token=[^\"<]*" | head -1)"
    echo "$STREAM_URL#$SONG_TITLE"
done 
```

我不确定这是否会帮助你，但也许会。祝你好运。

# drupal - drupal 7 网站中的推特

> ID：12766558
> 
> 赞同：2
> 
> 时间：2012-10-07T06:12:54.403
> 
> 标签：drupal, twitter

先生

我是drupal的新手。我想将 twitter 按钮放在我的 drupal 7 网站的页脚中。我使用 twitter 按钮代码到 html.tpl.php 文件，并将代码放在页面底部 () 的下方。它可以正常工作。但是按钮显示在下面我网站的页脚。但我想在页脚中显示 twitter 按钮。我该怎么做。单击按钮时，我只想要登录到我网站的 Twitter 页面。

这是我使用的代码（https://twitter.com/about/resources/buttons#follow）

```
<a href="https://twitter.com/twitter" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @twitter</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:03:56.917

您最好使用[Twitter 关注块](https://www.drupal.org/project/twitter_follow)模块或[关注按钮](https://www.drupal.org/project/followbutton)模块或类似的模块来为您执行此操作。他们每个人都会给你一个块，然后你可以把它放在你想要的任何地方，而不必手动将代码添加到你的模板中。然后，您可以转到块页面并将其移动到您希望放置它的区域，并使用左侧的拖动手柄相对于该区域中的其他项目对其进行排序。

如果您真的希望它在您的模板中完全自定义编码，您可能正在寻找`page.tpl.php`，而不是`html.tpl.php`. 但是，您不会对放置进行太多控制。

# xaml - Windows 应用商店应用程序中的选项卡

> ID：12766561
> 
> 赞同：1
> 
> 时间：2012-10-07T06:13:17.547
> 
> 标签：xaml, windows-store-apps

我正在尝试将我的一些旧应用程序转换为新的 Windows 应用商店应用程序设计。其中一些应用程序使用`Tab`s 来表示应用程序的多种功能。例如，我有一个简单的英德词典，它有两个主要功能：

*   将英语翻译成德语
*   将德语翻译成英语

每个都表示在一个单独的`Tab`.

我查看了 Metro 风格的各种应用程序，发现没有与`Tab`s 等效的应用程序。可以`Tab`手动创建 s（使用按钮和...），但他们可能有理由不在默认元素中包含此类内容。

在 Metro 中设计这样的概念的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T14:40:13.730

您可以通过两种方式实现“选项卡”：

1.  使用顶部应用栏，例如 Internet Explorer
2.  在应用程序的标题中提供屏幕按钮（并将它们设置为看起来像 Windows Phone 7 中的 Pivot 项目）

但是，我认为标签应该用于独立活动。在您的情况下，大多数用户都希望轻松地从一种翻译切换到另一种翻译。所以，我建议你实现一个类似于[http://www.bing.com/translator/](http://www.bing.com/translator/)或[http://translate.google.com/的接口](http://translate.google.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T06:31:50.327

您可以考虑使用 FlipView 控件。一个典型的例子展示了它的使用位置是用于在 Windows 应用商店中导航屏幕截图的控件。您可以使用按钮（或您选择的任何控件）来更改和跟踪翻转视图中当前显示的项目。

参考：http: [//msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.flipview](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.flipview)

# wpf - 如何将 DataGrid 添加到 DataGridTemplateColumn.CellTemplate

> ID：12766565
> 
> 赞同：1
> 
> 时间：2012-10-07T06:14:25.837
> 
> 标签：wpf, wpfdatagrid, datatemplate

我需要将DataGrid添加到DataGridTempateColumn，所以我这样做了，但是它不能正常工作，我不知道我是否真的可以将DataGrid添加到DataGridTempateColumn？

```
<datagrid>
....
<DataGridTemplateColumn.CellTemplate>
     <DataTemplate>
        <DataGrid HeadersVisibility="None" AutoGenerateColumns="False" CanUserAddRows="True"                    ItemsSource="{Binding ProjectCollection}">
                                <DataGridTextColumn Binding="{Binding Spec.Rev}" Width="*"></DataGridTextColumn>
                                <DataGridTextColumn  Binding="{Binding Spec}" Width="*"></DataGridTextColumn>

        </DataGrid>
     </DataTemplate>
 </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn>
...
</DataGrid> 
```

已编辑：当 ProjectCollection 为空时，我们看不到 dataGrid，正如您在图片中的第 2 行中看到的那样！

![](../Images/c6a21da63bfa7ed4da043760ef9cfc36.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T08:23:18.130

我怀疑这会奏效。您将得到`InvalidOperationException`-`Items collection must be empty before using ItemsSource.`因为您正在为内部网格设置 ItemsSource，同时您正在将子项添加到 DataGrid。

像这样将列添加到 dataGrid 的 Columns DP 中，它将按您的需要工作 -

```
<DataGridTemplateColumn.CellTemplate>
     <DataTemplate>
        <DataGrid HeadersVisibility="None" AutoGenerateColumns="False"
                 CanUserAddRows="True" ItemsSource="{Binding ProjectCollection}">
           <DataGrid.Columns>
               <DataGridTextColumn Binding="{Binding Spec.Rev}" Width="*"/>
               <DataGridTextColumn  Binding="{Binding Spec}" Width="*"/>
           </DataGrid.Columns>
        </DataGrid>
     </DataTemplate>
</DataGridTemplateColumn.CellTemplate> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T07:57:04.313

`DataGrid`您可以使用`ListView`with view而不是使用`GridView`。

```
<DataGridTemplateColumn Header="Complex Data">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>                    
                        <ListView ItemsSource="{Binding ProjectCollection}">
                            <ListView.View>
                                <GridView>
                                    <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}" />
                                    <GridViewColumn Header="Date" DisplayMemberBinding="{Binding Date}" />
                                </GridView>
                            </ListView.View>
                        </ListView>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn> 
```

# html - 如何自动调整左/右 div 标签宽度以适应屏幕，同时保持中间 div 宽度静态

> ID：12766567
> 
> 赞同：0
> 
> 时间：2012-10-07T06:14:31.850
> 
> 标签：html, css

嗨，我如何让 div 'one' 和 div 'three' 自动调整到屏幕侧，同时在 css 中保持 div 'two' 宽度不变？所有三个 div 应该在同一行

我的 HTML 是这样的；

```
<html>
<header<title></title>
<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<div id="x">
  <div id="one"></div>
  <div id="two"></div>
  <div id="three"></div>
</div><!-- close div 'x' -->
</body>
</html> 
```

到目前为止完成的CSS如下；

```
 #x {height:34px; border:1px solid gray;}
#one {height:30px; border:1px solid red;; width:auto; float:left;}
#two {height:30px; border:1px solid green; width:660px; float:left;}
#thr {height:30px; border:1px solid blue; width:auto; float:left;} 
```

任何建议都非常感谢。感谢您的关注

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T06:54:51.453

你可以这样做[**我的小提琴**](http://jsfiddle.net/DejUn/)

HTML

```
<div class="container">
<div class="first"></div>
<div class="static"></div>
<div class="third"></div>
</div>​ 
```

CSS

```
.container {
    display:-webkit-box;
    -webkit-box-orient:horizontal;
    -webkit-box-align:stretch; 
     display:-moz-box;      
    -moz-box-orient:horizontal;
    -moz-box-align:stretch;
    display:box;
    box-orient:horizontal;
    box-align:stretch;   
    color: #ffffff;    
}    

div {
    height: auto;
}

.first {
    background-color: #546547;   
}

.static {
    background-color: #154d67;
    width: 660px;  
}

.third {
    background-color: #c00000;   
}

.first, .third {
    -webkit-box-flex:1.0;
    -moz-box-flex:1.0;
    box-flex:1.0;
}
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T06:49:32.730

首先，确保您匹配 id。 `thr`不一样`three`。

我对 css 所做的更改：

1.  缩进它。这是一个很好的做法。
2.  以父 div 大小的百分比声明 div 的宽度。您根本没有声明宽度。
3.  加了一点`padding`，让3个内层div停留在外层div的中心

这是CSS：

```
#x 
 {
  position:relative;
  padding:1.5px;
  height:34px;
  border:1px solid gray;
 }
#one 
 { 
  height:30px;
  border:1px solid red;
  width:33%;
  float:left; 
 }
#two 
 {
  height:30px; 
  border:1px solid green; 
  width:33%;
  float:left;
 }
#three 
 {
  height:30px;
  border:1px solid blue;
  width:33%;
  float:left;
 } 
```

# java - 在java中保存随机数

> ID：12766568
> 
> 赞同：0
> 
> 时间：2012-10-07T06:14:40.377
> 
> 标签：java, random

我正在处理中制作动画。我正在使用随机点，我需要为立体视觉执行两次代码。我的代码中有很多随机变量，所以我应该将它保存在某个地方以供第二次运行，或者在我运行程序的任何时候重新生成相同的“随机”数字字符串。（如这里所说：http: [//www.coderanch.com/t/372076/java/java/save-random-numbers](http://www.coderanch.com/t/372076/java/java/save-random-numbers)）

这种方法可行吗？如何？如果我将数字保存在 txt 文件中然后读取它，我的程序会运行得更慢吗？最好的方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T06:20:20.203

如果您只需要能够在有限的时间内生成相同的序列，那么使用相同值的随机数生成器来生成相同的序列很可能是最简单和最快的方法。只要确保任何并行线程总是以相同的顺序请求它们的伪随机数，否则你会遇到麻烦。

请注意，如果您更新 Java VM 甚至运行补丁，afaik 并不能保证相同的序列，所以如果您想要长时间存储您的序列，或者希望能够在您的 Java 程序之外使用它，您需要将其保存到文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T06:19:52.887

这是一个示例：

```
public static void writeRandomDoublesToFile(String filePath, int numbersCount) throws IOException
{
    FileOutputStream fos = new FileOutputStream(new File(filePath));
    BufferedOutputStream bos = new BufferedOutputStream(fos);
    DataOutputStream dos = new DataOutputStream(bos);

    dos.writeInt(numbersCount);
    for(int i = 0; i < numbersCount; i++) dos.writeDouble(Math.random());
}

public static double[] readRandomDoublesFromFile(String filePath) throws IOException
{
    FileInputStream fis = new FileInputStream(new File(filePath));
    BufferedInputStream bis = new BufferedInputStream(fis);
    DataInputStream dis = new DataInputStream(bis);

    int numbersCount = dis.readInt();
    double[] result = new double[numbersCount];

    for(int i = 0; i < numbersCount; i++) result[i] = dis.readDouble();
    return result;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T06:55:15.833

嗯，有几种方法可以解决这个问题。其中之一是将随机变量作为输入保存到文件中，并将该文件名作为参数传递给您的程序。

您可以通过以下两种方式之一来做到这一点，第一种是使用 args[] 参数：

```
import java.io.*;
import java.util.*;
public class bla {
public static void main(String[] args) {
    // You'd need to put some verification code here to make
    // sure that input was actually sent to the program. 
    Scanner in = new Scanner(new File(args[1]));
    while(in.hasNextLine()) {
        System.out.println(in.nextLine());
    }
} } 
```

另一种方法是使用 Scanner 并从控制台输入读取。`Scanner in = new Scanner(new File(args[1]));`和上面的代码都是一样的，只是上面的验证码不是和所有的一样。你会替换`Scanner in = new Scanner(System.in)`，但这只是加载文件。

生成这些点的过程可以通过以下方式完成：

```
import java.util.*;
import java.io.*;
public class generator {
    public static void main(String[] args) {
          // You'd get some user input (or not) here
          // that would ask for the file to save to,
          // and that can be done by either using the
          // scanner class like the input example above,
          // or by using args, but in this case we'll
          // just say:
          String fileName = "somefile.txt";
          FileWriter fstream = new FileWriter(fileName);
          BufferedWriter out = new BufferedWriter(fstream);
          out.write("Stuff");
          out.close();
    }
} 
```

这两种解决方案都是用 Java 读写文件的简单方法。但是，如果您部署这些解决方案中的任何一个，您仍然需要对数据进行某种解析。

如果是我，我会进行对象序列化，并将我已经生成的数据结构的二进制副本存储到磁盘，而不必以低效的方式解析和重新解析该信息。（使用文本文件通常会占用更多磁盘空间。）

这就是你将如何做到这一点（在这里，我将重用已经编写的代码，并在此过程中对其进行评论）[源](http://www.tutorialspoint.com/java/java_serialization.htm)

您声明了一些保存数据的包装类（顺便说一句，您不必总是这样做。）

```
 public class Employee implements java.io.Serializable
{
   public String name;
   public String address;
   public int transient SSN;
   public int number;
   public void mailCheck()
   {
      System.out.println("Mailing a check to " + name
                           + " " + address);
   }
} 
```

然后，序列化：

```
import java.io.*;

public class SerializeDemo
{
   public static void main(String [] args)
   {
      Employee e = new Employee();
      e.name = "Reyan Ali";
      e.address = "Phokka Kuan, Ambehta Peer";
      e.SSN = 11122333;
      e.number = 101;
      try
      {
         FileOutputStream fileOut =
         new FileOutputStream("employee.ser");
         ObjectOutputStream out =
                            new ObjectOutputStream(fileOut);
         out.writeObject(e);
         out.close();
          fileOut.close();
      }catch(IOException i)
      {
          i.printStackTrace();
      }
   }
} 
```

然后，反序列化：

```
import java.io.*;
   public class DeserializeDemo
   {
      public static void main(String [] args)
      {
         Employee e = null;
         try
         {
            FileInputStream fileIn =
                          new FileInputStream("employee.ser");
            ObjectInputStream in = new ObjectInputStream(fileIn);
            e = (Employee) in.readObject();
            in.close();
            fileIn.close();
        }catch(IOException i)
        {
            i.printStackTrace();
            return;
        }catch(ClassNotFoundException c)
        {
            System.out.println(.Employee class not found.);
            c.printStackTrace();
            return;
        }
        System.out.println("Deserialized Employee...");
        System.out.println("Name: " + e.name);
        System.out.println("Address: " + e.address);
        System.out.println("SSN: " + e.SSN);
        System.out.println("Number: " + e.number);
    }
} 
```

另一个不涉及存储数据的问题的替代解决方案是为任何为您提供随机值的函数创建一个惰性生成器，并且每次都提供相同的种子。这样，您根本不必存储任何数据。

但是，这仍然比将对象序列化到磁盘并再次加载它要慢得多（我认为）。（当然，这是一个非常主观的陈述，但我不会列举不正确的情况）。这样做的好处是它根本不需要任何类型的存储。

您可能没有想到的另一种方法是围绕您的生成器函数创建一个包装器来记忆输出 - 这意味着之前已经生成的数据将从内存中检索并且不必再次生成如果相同的输入是正确的。你可以在这里看到一些资源：[Memoization source](http://onjava.com/pub/a/onjava/2003/08/20/memoization.html)

记忆你的函数调用背后的想法是你可以节省时间而不需要持久化到磁盘上。如果一遍又一遍地生成相同的值，这是理想的。当然，对于一组随机点，如果每个点都是唯一的，这将不会很好地工作，但请记住这一点。

考虑到我在这篇文章中描述的所有先前策略可以组合在一起的方式时，真正有趣的部分出现了。

设置一个 Memoizer 类会很有趣，如[2](http://onjava.com/pub/a/onjava/2003/08/20/memoization.html)的第二页中所述，然后在该类中实现 java.io.Serialization。之后，您可以在 memoizer 类中添加方法`save(String fileName)`和`load(String fileName)`使序列化和反序列化更容易，这样您就可以持久化用于 memoize 函数的缓存。很有用。

不管怎样，够了就够了。简而言之，只需使用相同的种子值，并即时生成相同的点对。

# php - 以 php 计的页面浏览量

> ID：12766570
> 
> 赞同：-5
> 
> 时间：2012-10-07T06:15:13.597
> 
> 标签：php, mysql

我正在寻找有关 php 中的页面浏览量计数器的帮助。

假设当用户查看个人资料页面并在该页面上花费最少 10 秒的时间时，我必须将视图计算为 1...那么该怎么做呢？

我已将所有配置文件详细信息存储在数据库中，并且全部通过同一个模板页面提取，例如 profile.php?id=12345。

谁能给我示例

我试过这样的东西..

```
$query = mysql_query(" UPDATE views SET views + 1 WHERE id = '$id' "); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T06:20:37.287

您可以使用 PHP 会话跟踪单个用户到您的站点

[http://us2.php.net/manual/en/intro.session.php](http://us2.php.net/manual/en/intro.session.php)

然后对于页面的每次加载，您可以在数据库中放置一条临时记录，并在一段时间后（您提到的 10 秒）向脚本发送 AJAX 调用，将记录确认为视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T06:21:54.490

您可以在 10 秒后向您的服务器发送 ajax 请求。

请检查[计时事件](http://www.w3schools.com/js/js_timing.asp)。

然后在您指定的时间后向您的服务器发送[ajax 请求。](http://api.jquery.com/jQuery.ajax/)

在服务器收到请求后，您可以做自己的事情，例如更新计数器或任何您想要的。

检查您更新的问题，我相信您的查询需要更正。它会像：

```
$query = mysql_query(" UPDATE views SET views = views + 1 WHERE id = '$id' "); 
```

但是，您应该[逃避](http://www.php.net/manual/en/mysqli.real-escape-string.php)您的`$id`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T06:46:17.823

此外，您可以参考[此](http://www.hotscripts.com/blog/track-your-visitors-using-php/)脚本，该脚本使用`$_SERVER`并将您的计数转储到 MySQL 中。

一个简单的 PHP 页面计数将是这样的：

```
<?php
    $countfile = ("countfile.txt");
    $hits = file($countfile);
    $hits[0] ++;
    $fp = fopen($countfile , "w");
    fputs($fp , "$hits[0]");
    fclose($fp);
    echo $hits[0];
?> 
```

# android - 我可以基于预先存在的自定义对话框创建自定义 DialogPreference 吗？

> ID：12766572
> 
> 赞同：0
> 
> 时间：2012-10-07T06:15:44.667
> 
> 标签：android, android-layout, sharedpreferences, android-ui, android-dialog

在我的 Android 项目中，我已经创建了一个自定义对话框：一个名为`SelectColorDialog`extends的类`Dialog`，它允许用户查看一个大的颜色单元矩阵，以便选择一种特定的颜色。对话框通过回调函数将选定的颜色值（as `Integer`）返回给对话框发起者——通常是一个活动。

我有一个类似的自定义对话框，`SelectTypefaceDialog`可以轻松选择字体。可用字体列表以`ListView`行的形式显示，每个都由名称标识，并带有以该字体呈现的相关简短示例文本。可用的字体包括常用的 droid 字体，例如 NORMAL、MONOSPACE 等，以及用户希望加载到 SDCard 上特定子目录中的任何外部来源的 TTF 字体文件。

这些自定义对话框最初并未设计为直接与 SharedPreferences、首选项定义 XML 文件或任何 PreferenceActivity 一起使用。取而代之的是，每个对话框都可以通过用户按下按钮或菜单项从任何活动中弹出。创建这些对话框的活动类也有内部回调类，选择事件侦听器，以检测用户何时选择颜色或字体。

这两个对话框没有确定和取消按钮。相反，用户只需单击对话框中的某个项目 - 某种视图 - 以选择相应的颜色或字体值（隐式确定），或者按下设备的后退按钮以关闭对话框而不采取任何操作（隐式取消） .

我现在想更进一步，通过 a`preferences.XML`和关联的`PreferenceActivity`.

如果可能的话，我宁愿`DialogPreference`直接在这些现有对话框上建立两个子类，但我不知道该怎么做。我怀疑我做不到，我需要重新开始，并将当前在自定义对话框类中的所有 java 代码（用于颜色或字体显示和选择）直接复制或改编到自定义`DialogPreference`类中，也许通过覆盖`onCreateDialogView()`和/或其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:16:05.220

这个问题可能有点老了，但我希望对那些将来会遇到同样问题的人有所帮助：只需扩展 Preference 而不是 DialogPreference。DialogPreference 的设计很糟糕，并且预期使用自定义 Dialog 的“官方”方式 - 覆盖受保护的 showDialog 方法不起作用，因为这个单一方法包含一半的类逻辑。

# python - 提取 xml 标签名称、属性和值

> ID：12766573
> 
> 赞同：0
> 
> 时间：2012-10-07T06:15:57.147
> 
> 标签：python, xml

我正在寻找一种将 xml 文件中可用的所有信息提取到平面文件或数据库的方法。

例如

```
<r>
                <P>
                    <color val="1F497D"/>
                </P>
                <t val="123" val2="234">TEST REPORT</t>
</r> 
```

我希望这是

```
r
P
color,val,1f497d
t,val,123
t,val2,234 
```

关于如何在 python 中解决这个问题的任何指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T06:41:44.103

然后安装[`lxml`](http://lxml.de/installation.html)：

```
>>> from lxml import etree
>>> parser = etree.XMLParser(remove_blank_text=True)
>>> parsed_xml = etree.XML(s,parser)
>>> for i in parsed_xml.iter('*'):
...    print i.tag
...    for x in i.items():
...       print '%s,%s' % (x[0],x[1])
...
r
P
color
val,1F497D
t
val,123
val2,234 
```

我会留给你来格式化输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T06:17:51.257

我认为你最好的选择是使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)

例如（来自他们的[文档](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)）：

```
from bs4 import BeautifulSoup
soup = BeautifulSoup(html_doc)
soup.title
# <title>The Dormouse's story</title>
soup.p['class']
# u'title'
for link in soup.find_all('a'):
    print(link.get('href'))
# http://example.com/elsie
# http://example.com/lacie
# http://example.com/tillie 
```

您还可以查看[lxml](http://www.lxml.de)，它简单高效，并且是 BeautifulSoup 的基础。具体来说，您可能想看看[这个页面](http://lxml.de/parsing.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T06:49:33.577

我不确定你为什么想要这个，但你应该看看[lxml](http://lxml.de/)或[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/) for Python。

或者，如果您只希望它完全符合您上面提供的形式：

```
def parse_html(html_string):
    import re
    fields = re.findall(r'(?<=\<)[\w=\s\"\']+?(?=\/?\>)', html_string)
    out = []
    for field in fields:
        tag = re.match(r'(?P<tag>\w+?) ?', field).group('tag')
        attrs = re.findall(r' (\w+?)\=[\"\'](.+?)[\"\']', field)
        if attrs:
            for x in attrs:
                out.append(','.join([tag] + list(x)))
        else:
            out.append(tag)

    print '\n'.join(out) 
```

这有点过头了，这就是为什么您通常应该使用 lxml 或 BeautifulSoup，但它可以完成这项特定的工作。

我上面的程序的输出：

```
r
P
c,val,1F497D
t,val,123
t,val2,234 
```

# javascript - 添加 html 元素的简单用户脚本

> ID：12766575
> 
> 赞同：2
> 
> 时间：2012-10-07T06:16:06.060
> 
> 标签：javascript, dom, greasemonkey, href, userscripts

我正在尝试为 Chrome 编写一个用户脚本，它只是将一个元素添加到一个网站，但由于我有限的 Javascript 知识，我真的不是很成功地做到这一点。

主题示例：

```
<html>
<body>
<p class="listcaption">......................................</p>
<p class="listrow" id="listrow_aka_battlep"><span class="small"><b><a href="item.php?action=academy"></a>-: </b> / <b> : </b>0000</span></p>
<p class="listrow" id="listrow_char_mission"><a href="ability.php">text</a> | <a href="item.php?action=missiondesc"> text</a></p>
<p class="listrow" id="listrow_clan"><b>some</b><a href="clanmenu.php?action=manageclan">-------</a> &nbsp;|&nbsp; <a href="fight.php?action=groupjoinrand" target="mainFrame" title="group"></a></p>
<p class="listrow" id="listrow_group"><b>group: </b><a href="clanmenu.php?action=groupmenu">~~~~~</a></p>
<p class="listrow" id="listrow_lifep"><b>LP: </b>(<span class="healthok"><b>000</b></span>/000)</p>
<p class="listrow" id="listrow_money"><b>gold: </b>629 &nbsp;&nbsp;&nbsp;&nbsp;(<a href="item.php?action=moneydrop1"></a> | <a href="item.php?action=moneytransfer1"></a>)</p>
<p class="listrow" id="listrow_int"><b>......</b>0000<span class="healthok" id="speedok">000</span>000</p>
<p class="listrow" id="listrow_attackp"><b>text</b>000<span class="valueincreased">000</span>text</p>
<p class="listrow" id="listrow_attackw" title=""><b>............</b>text</p>
<p class="listrow" id="listrow_defensep"><b>?????????????</b>0000<span class="valueincreased">000000</span></p>
<p class="listrow" id="listrow_defensew" title="100%"><b>000000000000</b>texts</p>
<p class="listrow" id="listrow_neck"><b>neck:</b>something</p>
<p class="listrow" id="listrow_special"><a href="item.php?action=special">Special</a></p><p class="listrow" id="listrow_status"><span class="small"></span></p>
</body></html> 
```

期望的输出：

```
<html>
<body>
<p class="listcaption">......................................</p>
<p class="listrow" id="listrow_aka_battlep"><span class="small"><b><a href="item.php?action=academy"></a>-: </b> / <b> : </b>0000</span></p>
<p class="listrow" id="listrow_char_mission"><a href="ability.php">text</a> | <a href="item.php?action=missiondesc"> text</a></p>
<p class="listrow" id="listrow_clan"><b>some</b><a href="clanmenu.php?action=manageclan">-------</a> &nbsp;|&nbsp; <a href="fight.php?action=groupjoinrand" target="mainFrame" title="group"></a></p>
<p class="listrow" id="listrow_group"><b>group: </b><a href="clanmenu.php?action=groupmenu">~~~~~</a></p>
<p class="listrow" id="listrow_lifep"><b>LP: </b>(<span class="healthok"><b>000</b></span>/000)</p>
<p class="listrow" id="listrow_money"><b>gold: </b>629 &nbsp;&nbsp;&nbsp;&nbsp;(<a href="item.php?action=moneydrop1"></a> | <a href="item.php?action=moneytransfer1"></a>)</p>
<p class="listrow" id="listrow_int"><b>......</b>0000<span class="healthok" id="speedok">000</span>000</p>
<p class="listrow" id="listrow_attackp"><b>text</b>000<span class="valueincreased">000</span>text</p>
<p class="listrow" id="listrow_attackw" title=""><b>............</b>text</p>
<p class="listrow" id="listrow_defensep"><b>?????????????</b>0000<span class="valueincreased">000000</span></p>
<p class="listrow" id="listrow_defensew" title="100%"><b>000000000000</b>texts</p>
<p class="listrow" id="listrow_neck"><b>neck:</b>something</p>
<p class="listrow" id="listrow_newlist"><a href="item.php?action=activate&amp;act_item_id=000029"><img src="../images/items/image1.gif" width="20" height="20" title="1" border="0" align="absmiddle"></a> |&nbsp; <a href="item.php?action=watch&amp;act_item_id=000016"><img src="../images/items/image2" width="20" height="20" title="2" border="0" align="absmiddle"></a>&nbsp;|&nbsp; <a href="item.php?action=watch&amp;act_item_id=0000061"><img src="../images/items/image3" width="20" height="20" title="3" border="0" align="absmiddle"></a>&nbsp;|&nbsp; <a href="item.php?action=watch&amp;act_item_id=000095"><img src="../images/items/image4.gif" width="20" height="20" title="4" border="0" align="absmiddle"></a></p>
<p class="listrow" id="listrow_special"><a href="item.php?action=special">Special</a></p><p class="listrow" id="listrow_status"><span class="small"></span></p>
</body></html> 
```

我只希望用户脚本添加此列表：

```
<p class="listrow" id="listrow_newlist"><a href="item.php?action=activate&amp;act_item_id=000029"><img src="../images/items/image1.gif" width="20" height="20" title="1" border="0" align="absmiddle"></a> |&nbsp; <a href="item.php?action=watch&amp;act_item_id=000016"><img src="../images/items/image2" width="20" height="20" title="2" border="0" align="absmiddle"></a>&nbsp;|&nbsp; <a href="item.php?action=watch&amp;act_item_id=0000061"><img src="../images/items/image3" width="20" height="20" title="3" border="0" align="absmiddle"></a>&nbsp;|&nbsp; <a href="item.php?action=watch&amp;act_item_id=000095"><img src="../images/items/image4.gif" width="20" height="20" title="4" border="0" align="absmiddle"></a></p> 
```

谢谢大家帮助我！

更新：

我尝试从添加此元素开始：

```
<a href="item.php?action=activate&amp;act_item_id=000029"><img src="../images/items/image1.gif" width="20" height="20" title="1" border="0" align="absmiddle"></a> 
```

这可能是错误的方法。（因为它确实有效）：

```
// ==UserScript==
// @name           my script
// @description    ...
// @author         ...
// @version        1.0
// ==/UserScript==
var links = document.getElementsByClassName( 'listrow' );
    ( var i = 0; i < links.length; i++ ) {
    var link = links[i];
    var newlist = document.createElement( 'a' );
    newlist.href = item.php?action=activate&amp;act_item_id=000029
    var the_image = document.createElement('img');
    the_image.src = '../images/image1.gif';
    newlink.appendChild(the_image);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T06:28:00.490

使用 jQuery：

```
<html>
  <head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script>
      $(document).ready(function(){
        function buildLink(url, imagePath){
          var img = $('<img/>').attr('src', imagePath);
          var link = $('<a/>').attr('href', url).append(img);

          return link;
        }

        var newlist = $('<p/>').attr('id', 'listrow_newlist').addClass('listrow');

        newlist.append(buildLink('#url01', 'path_to_image1'));
        newlist.append(buildLink('#url02', 'path_to_image2'));
        newlist.append(buildLink('#url03', 'path_to_image3'));

        newlist.insertAfter('#listrow_neck');
      });
    </script>
  </head>
  <body>
    <p class="listcaption">......................................</p>
    <p class="listrow" id="listrow_aka_battlep"><span class="small"><b><a href="item.php?action=academy"></a>-: </b> / <b> : </b>0000</span></p>
    <p class="listrow" id="listrow_char_mission"><a href="ability.php">text</a> | <a href="item.php?action=missiondesc"> text</a></p>
    <p class="listrow" id="listrow_clan"><b>some</b><a href="clanmenu.php?action=manageclan">-------</a> &nbsp;|&nbsp; <a href="fight.php?action=groupjoinrand" target="mainFrame" title="group"></a></p>
    <p class="listrow" id="listrow_group"><b>group: </b><a href="clanmenu.php?action=groupmenu">~~~~~</a></p>
    <p class="listrow" id="listrow_lifep"><b>LP: </b>(<span class="healthok"><b>000</b></span>/000)</p>
    <p class="listrow" id="listrow_money"><b>gold: </b>629 &nbsp;&nbsp;&nbsp;&nbsp;(<a href="item.php?action=moneydrop1"></a> | <a href="item.php?action=moneytransfer1"></a>)</p>
    <p class="listrow" id="listrow_int"><b>......</b>0000<span class="healthok" id="speedok">000</span>000</p>
    <p class="listrow" id="listrow_attackp"><b>text</b>000<span class="valueincreased">000</span>text</p>
    <p class="listrow" id="listrow_attackw" title=""><b>............</b>text</p>
    <p class="listrow" id="listrow_defensep"><b>?????????????</b>0000<span class="valueincreased">000000</span></p>
    <p class="listrow" id="listrow_defensew" title="100%"><b>000000000000</b>texts</p>
    <p class="listrow" id="listrow_neck"><b>neck:</b>something</p>
    <p class="listrow" id="listrow_special"><a href="item.php?action=special">Special</a></p><p class="listrow" id="listrow_status"><span class="small"></span></p>
  </body>
</html> 
```

**编辑**

以下脚本没有使用 jQuery，而只是纯 JS，我对其进行了测试并且运行良好，我不确定它是否可以与 Greasemonkey 或 Tampermonkey 一起使用，但至少它没有任何库依赖项。

```
 window.addEventListener('load', function(){
    function buildLink(url, imagePath){
      var img = document.createElement('img');
      img.src = imagePath;

      var link = document.createElement('a');
      link.href = url;
      link.appendChild(img);

      return link;
    }

    var newlist = document.createElement('p');
    newlist.setAttribute('id', 'listrow_newlist')
    newlist.className = 'listrow';

    newlist.appendChild(buildLink('#url01', 'path_to_image1'));
    newlist.appendChild(buildLink('#url02', 'path_to_image2'));
    newlist.appendChild(buildLink('#url03', 'path_to_image3'));

    var nextEl = document.getElementById('listrow_special');
    document.body.insertBefore(newlist, nextEl);
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T08:04:18.017

逐渐爱上[jQuery](http://jquery.com/)，尤其[是 Manipulation Functions](http://api.jquery.com/category/Manipulation/)。

这是添加该段落**的完整 Firefox/Greasemonkey 和 Chrome 用户脚本。**请参阅内联注释。

```
// ==UserScript==
// @name     _Add New paragraph at targeted location
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @grant    GM_addStyle
// ==/UserScript==

function GM_main ($) {
    var insertTarget    = $("#listrow_special");

    //-- Insert empty container paragraph before the target paragraph.
    insertTarget.before ('<p class="listrow" id="listrow_newlist"></p>');

    //-- Set this array to the unique parts of the links.
    var linkDatArray    = [
        ["activate&amp;act_item_id=000029", "image1.gif", "title 1"],
        ["watch&amp;act_item_id=000016",    "image2.gif", "title 2"],
        ["watch&amp;act_item_id=0000061",   "image3.gif", "title 3"],
        ["watch&amp;act_item_id=000095",    "image4.gif", "title 4"]
    ];

    //-- Now use the array to insert the links into the container paragraph.
    var contParag       = $("#listrow_newlist");

    $.each (linkDatArray, function (rowIdx, arryRow) {
        //-- Create empty link with correct action.
        var newLink     = $('<a href="item.php?action=' + arryRow[0] + '"></a>');

        //-- Insert the image into it.
        newLink.append (
            '<img src="../images/items/' + arryRow[1] + '" title="' + arryRow[2] + '">'
        );

        //-- Insert the link into the container paragraph.
        contParag.append (newLink);

        //-- Except for the last link, add our seperator characters.
        if (rowIdx  <  linkDatArray.length - 1) {
            contParag.append ('&nbsp;|&nbsp;');
        }
    } );
}

/*--- STYLE THE IMAGES (And anything else) WITH CSS!  NOT ATTRIBUTES.
*/
//-- GM_addStyle() works on both Firefox and Chrome
GM_addStyle ( '                     \
    #listrow_newlist a img {        \
        width:          20px;       \
        height:         20px;       \
        border:         none;       \
        vertical-align: middle;     \
    }                               \
' );

//-- Fire the main/payload code
add_jQuery (GM_main);

//-- This is just a standard utility function
function add_jQuery (callbackFn, jqVersion) {
    jqVersion       = jqVersion || "1.7.2";
    var D           = document;
    var targ        = D.getElementsByTagName ('head')[0] || D.body || D.documentElement;
    var scriptNode  = D.createElement ('script');
    scriptNode.src  = 'http://ajax.googleapis.com/ajax/libs/jquery/'
                    + jqVersion
                    + '/jquery.min.js'
                    ;
    scriptNode.addEventListener ("load", function () {
        var scriptNode          = D.createElement ("script");
        scriptNode.textContent  =
            'var gm_jQuery  = jQuery.noConflict (true);\n'
            + '(' + callbackFn.toString () + ')(gm_jQuery);'
        ;
        targ.appendChild (scriptNode);
    }, false);
    targ.appendChild (scriptNode);
} 
```

# android - 无法在线性布局中水平对齐视图

> ID：12766576
> 
> 赞同：0
> 
> 时间：2012-10-07T06:16:07.730
> 
> 标签：android, android-linearlayout, alignment

我正在尝试将视图水平放置在线性布局中，以便我可以水平对齐这些视图，但不能彼此相邻。我尝试提供边距、填充值等，但对我没有任何作用。所有视图仍然彼此相邻放置。

我想要最右边的数字时钟和中间的 WiFi 图像。请建议我应该使用什么来使用最少的硬代码将视图与其中的分隔对齐。

```
 <LinearLayout
    android:id="@+id/top_bar_id"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/top_bar"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/signal_id"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/signal1" />

    <ImageView
        android:id="@+id/nosim_id"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <ImageView
        android:id="@+id/wifi_id"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/wifi1" />

    <ImageView
        android:id="@+id/battery_id"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/battery1"
        />

    <DigitalClock
        android:id="@+id/digClock_id"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T06:19:18.377

如果你想对齐更多的东西`Relatively`，让一些东西总是在左边缘，等等，你应该使用[RelativeLayout](http://developer.android.com/reference/android/widget/RelativeLayout.html)。它使您可以更灵活地处理此类事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T06:20:08.627

您应该使用相对布局。用它来制作布局要容易得多。在您的情况下，它们保持在每个旁边，因为我猜您已将`android:layout_width="wrap_content"`尝试设置为将其更改为`android:layout_width="match_parent"`并尝试。

# vim - 活跃开发期间的旺盛 Ctags

> ID：12766577
> 
> 赞同：2
> 
> 时间：2012-10-07T06:16:13.120
> 
> 标签：vim, ctags

快速 ctags 问题。谷歌没有透露答案。Ctags 非常适合浏览完整的源文件。但是当前正在处理的文件呢？有没有办法在每次添加新函数/变量时动态更新 ctags 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T06:45:38.437

您可以编写一个在几秒不活动后或每次后`autocmd`触发的：`x``<Esc>`

```
autocmd CursorHold *.js :!ctags -R . 
```

但这有点乱。

有关`:help autocmd`更多信息和可能事件的列表，请参阅。

另请参阅[EasyTags](http://www.vim.org/scripts/script.php?script_id=3114)插件（我使用的）或[AutoTag](http://www.vim.org/scripts/script.php?script_id=1343)或[Indexer](http://www.vim.org/scripts/script.php?script_id=3221)，它们更清洁、更智能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T09:54:58.910

另请参阅[TagList](http://vim-taglist.sourceforge.net/)插件 - 评价最高和下载次数最多的插件；）

# opencl - OpenCL 中零拷贝的访问路径

> ID：12766578
> 
> 赞同：7
> 
> 时间：2012-10-07T06:16:25.110
> 
> 标签：opencl

我对零拷贝的工作原理有点困惑。

1-想确认以下对应opencl中的零拷贝。

```
 .......................
 .           .         .  
 .           .         .
 .           . CPU     . 
 .   SYSTEM  .         .
 .    RAM    . c3 X    .  
 .         <=====>     .  
 ...|...................
   PCI-E     / /
    |       / /
 c2 |X     /PCI-E, CPU directly accessing GPU memory
    |     / /                          copy c3, c2 is avoided, indicated by X. 
 ...|...././................
 .   MEMORY<====>          .
 .   OBJECT  .c1           . 
 .           .     GPU     .
 .   GPU RAM .             .  
 .           .             .  
 ...........................

 .......................
 .           .         .  
 .           .         .
 .           .   CPU   . 
 .SYSTEM RAM .         .
 .           .         .
 .           . c3      .  
 .    MEMORY<====>     .           
 ...| OBJECT............
    |     \  \   
   PCI-E   \  \PCI-E, GPU directly accessing System memory.  copy c2, c1 is avoided
    |       \  \
 C2 |X       \  \
 ...|.........\..\...........
 .  |        .              .
 .       <=======>          . 
 .   GPU    c1 X   GPU      .
 .   RAM     .              .  
 .           .              .  
 ............................ 
```

GPU/CPU 直接访问系统/GPU-RAM，无需显式复制。

2-拥有这个有什么好处？PCI-e 仍在限制整体带宽。或者唯一的好处是我们可以避免在上述情况下复制 c2 和 c1/c3？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-08T17:24:15.543

您对零拷贝工作原理的理解是正确的。基本前提是您可以从设备访问主机内存，也可以从主机访问设备内存，而无需在两者之间进行中间缓冲步骤。

您可以通过使用以下标志创建缓冲区来执行零复制：

```
CL_MEM_AMD_PERSISTENT_MEM //Device-Resident Memory
CL_MEM_ALLOC_HOST_PTR // Host-Resident Memory 
```

然后，可以使用内存映射语义访问缓冲区：

```
void* p = clEnqueueMapBuffer(queue, buffer, CL_TRUE, CL_MAP_WRITE, 0, size, 0, NULL, NULL, &err);
//Perform writes to the buffer p
err = clEnqueueUnmapMemObject(queue, buffer, p, 0, NULL, NULL); 
```

使用零拷贝，您可以通过执行以下操作来实现性能：

1.  将文件复制到主机缓冲区
2.  将缓冲区复制到设备

相反，您可以一步完成

1.  内存映射设备端缓冲区
2.  将文件从主机复制到设备
3.  取消映射内存

在某些实现中，映射和取消映射的调用可以隐藏数据传输的成本。就像我们的例子一样，

1.  Memory Map 设备端缓冲区【实际上创建了一个相同大小的主机端缓冲区】
2.  将文件从主机复制到设备[实际上写入主机端缓冲区]
3.  Unmap memory [实际上是通过 clEnqueueWriteBuffer 将数据从 host-buffer 复制到 device-buffer]

如果实现是以这种方式执行的，那么使用映射方法将没有任何好处。然而，AMD 较新的 OpenCL 驱动程序允许直接写入数据，使得映射和取消映射的成本几乎为 0。对于独立显卡，请求仍然通过 PCIe 总线进行，因此数据传输可能会很慢。

然而，在 APU 架构的情况下，由于 APU 独特的架构（如下图所示），使用零拷贝语义的数据传输成本可以大大提高传输速度。在此架构中，PCIe 总线被统一北桥 (UNB) 取代，从而实现更快的传输。

**请注意**，当使用内存映射的零复制语义时，从主机读取设备端缓冲区时，您将看到绝对可怕的带宽。这些带宽约为 0.01 Gb/s，很容易成为代码的新瓶颈。

对不起，如果这是太多的信息。这是我的论文题目。

![APU 架构](../Images/3026436d248b0e12744493ec1608c527.png)

# image-processing - 如何识别扫描图像中的文本存在模式并进行裁剪？

> ID：12766579
> 
> 赞同：4
> 
> 时间：2012-10-07T06:16:29.830
> 
> 标签：image-processing, imagemagick, photoshop, photoshop-cs4

## 扫描文档的智能裁剪

最近我接手了一个旧书/手稿的保存项目。它们数量庞大，将近 10,000 页。我不得不用便携式扫描仪手动扫描它们，因为它们不适合在自动书籍扫描仪中进行扫描。

当我开始在 Photoshop 中编辑它们时，真正的问题就出现了。请注意，它们基本上都是文档（JPG 格式），并且这些文档中绝对没有图像。它们使用不同的语言（奥里亚语），我相信在不久的将来不会有任何 OCR 软件可用。（如果有请告诉我。）

为了使这些图像（文档）看起来干净优雅，我必须裁剪它们，定位它们，增加一点对比度，用橡皮擦清洁不必要的斑点等等。我能够在 Photoshop 中自动化大部分这些过程，但裁剪是我卡住的地方。我无法自动裁剪，因为该软件无法识别该 img (doc) 的某个区域中是否存在文本或内容；它只是将赋予它的值应用于裁剪。

我想要一个解决方案来自动化这个裁剪过程。我已经想出了一个想法，我不知道它是否足够实用，据我所知，市场上没有软件可以做这种事情。

可能的解决方案：如果工具可以识别图像中文本的存在（这不是很关键，因为它们都是普通文档图像，其中没有图像，没有图案只是普通矩形）并裁剪它，这可能是可能的从每一侧的这些文本的边界开始，因此它可以输出没有任何边距的文档图像。在这之后，其余的任务可以使用 Photoshop 自动完成，例如为边距添加空白，调整对比度和颜色使其更具可读性等。

这是画廊的专辑链接。如果有用的话，我可以发布更多示例图片 - 请告诉我。

> [http://imageshack.us/g/1/9800204/](http://imageshack.us/g/1/9800204/)

这是通过上述链接获得的更大图像样本中的一个示例：

![一个更大的集合的一个例子......](../Images/9b18b4192059b32e108437c6e7fefa80.png "一个更大的集合的一个例子......")

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-09T10:21:13.113

使用来自 tinypic 的样本， ![原始扫描](../Images/743ef6517995c4a689f2efb07cbc7e68.png "原始图像")

使用 ImageMagick，我将按照以下几行构建一个算法：

1.  **对比拉伸原始图像**

    黑点 1% 和白点 10% 的值似乎是正确的。

    **命令：**

    ```
    convert                               \
       http://i46.tinypic.com/21lppac.jpg \
      -contrast-stretch 1%x10%            \
       contrast-stretched.jpg 
    ```

    **结果：** ![对比拉伸结果](../Images/cc4ef0d041e867fad5a87377098656b6.png "对比拉伸图像")

2.  **剃掉一些边界像素以消除那里的黑暗扫描伪影**

    每个边缘上 30 像素的值似乎是正确的。

    ***命令：***

    ```
    convert                   \
       contrast-stretched.jpg \
      -shave 30x30            \
       shaved.jpg 
    ```

    ***结果：*** ![每条边缘剃掉 30 像素](../Images/2ee748134fd1d0f9f724b85de16d384b.png "从每个边缘剃掉 30 像素")

3.  **去斑点图像**

    这里没有更多参数。重复过程 3 次以获得更好的结果。

    ***命令：***

    ```
    convert       \
       shaved.jpg \
      -despeckle  \
      -despeckle  \
      -despeckle  \
       despeckled.jpg 
    ```

    ***结果：*** ![去斑图像](../Images/d94d74ef76f929702908a192ecbeb2ba.png "去斑图像")

4.  **应用阈值以使所有像素变为黑色或白色**

    大约 50% 的值似乎是正确的。

    ***命令：***

    ```
    convert           \
       despeckled.jpg \
      -threshold 50%  \
       b+w.jpg 
    ```

    ***结果：*** ![黑白图像](../Images/686e1431d7a638531122043f602b55b2.png "黑白图像")

5.  **重新添加剃掉的像素**

    使用`identify -format '%Wx%H' 21lppac.jpg`确定原始图像具有`1536x835`像素尺寸。

    ***命令：***

    ```
    convert            \
       b+w.jpg         \
      -gravity center  \
      -extent 1536x835 \
       big-b+w.jpg 
    ```

    ***结果：（*** ![原始尺寸](../Images/db6d2d53a838d96665f2349db813f099.png "图像恢复到原始大小") *请注意，此步骤只是可选的。其目的是返回到原始图像尺寸，如果您从这里开始并将结果与​​原始图像或其他任何东西重叠，您可能需要这样做......）*

6.  **去歪斜图像**

    40% 的阈值（默认值）似乎也适用于此。

    ***命令：***

    ```
    convert        \
       big-b+w.jpg \
      -deskew 40%  \
       deskewed.jpg 
    ```

    ***结果：*** ![歪斜图像](../Images/e4b6a5a05cbc348652ed06ff976207a5.png "去歪斜的图像")

7.  **从每个边缘删除所有纯白色像素的行和列**

    这可以通过简单地使用`-trim`运算符来实现。

    ***命令：***

    ```
    convert         \
       deskewed.jpg \
      -trim         \
       trimmmed.jpg 
    ```

    ***结果：*** ![修剪后的图像](../Images/f57498730abbc52bff8612d46ca0d77c.png "修剪后的图像")

如您所见，结果还不完美：

*   图像底部边缘仍然存在一些随机伪影，并且

*   由于其他最小的伪影，最终的修剪并没有从边缘移除所有的空白；

*   另外，我（还）没有尝试对图像应用失真校正来修复（部分）失真。[**（您可以通过查看“Understanding Perspective Projection Distortion ImageMagick”**](https://stackoverflow.com/a/12278644/359307)的答案来了解它可以实现什么。）

当然，您可以通过使用每个步骤中使用的一些参数轻松获得更好的结果。

当然，您可以通过将每个命令放入 shell 或批处理脚本来轻松地自动化此过程。

* * *

## 更新

好的，所以这里有一个失真来粗略地纠正变形。

***命令：**

```
convert                                                                         \
   trimmmed.jpg                                                                 \
  -distort perspective '0,0 0,0  1300,0 1300,0  0,720 0,720  1300,720 1300,770' \
   distort.jpg 
```

***结果：（***再一次在下面加上原件，使直接的视觉比较更容易） ![未失真的图像](../Images/a9d5e896d37f8ceb9784a69891e3ad55.png "校正失真的图像——最终结果") ![原始图像](../Images/743ef6517995c4a689f2efb07cbc7e68.png "原始图像")

图像中仍有部分*桶状*失真，可能可以通过应用`-barrelinverse`算子来消除——我们只需要找到拟合参数即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T03:31:35.503

从背景中分割文本的一种技术是笔画宽度变换。你会在 Stack Overflow 上找到几篇关于它的帖子，包括这个：

[笔画宽度变换 (SWT) 实现（Java、C#...）](https://stackoverflow.com/questions/4837124/stroke-width-transform-swt-implementation-java-c)

如果 Wikipedia 页面中显示的文本代表书面奥里亚语，那么我相信 SWT（或您的自定义版本）将表现良好。在查看图像后，您可能仍需要进行一些手动调整，但基于 SWT 的方法应该为您完成大量工作。

尽管 SWT 可能无法识别每一个笔画，但它应该可以很好地估计笔画（和字符）所占空间的尺寸。最简单的方法

一种可能对您有用的新算法是“内容感知大小调整”算法，例如“缝合雕刻”，它会自动删除低信息内容像素的路径（例如背景像素）。这是一个关于接缝雕刻的视频：

[http://www.youtube.com/watch?v=qadw0BRKeMk](http://www.youtube.com/watch?v=qadw0BRKeMk)

GIMP 有一个接缝雕刻插件（“液体调整大小”）：http: [//liquidrescale.wikidot.com/](http://liquidrescale.wikidot.com/)

这篇博文报告了一个 Photoshop 插件： [http ://wordpress.brainfight.com/195/photoshop-cs5-content-aware-aka-seam-carving-aka-liquid-resize-fun-marketing/](http://wordpress.brainfight.com/195/photoshop-cs5-content-aware-aka-seam-carving-aka-liquid-resize-fun-marketing/)

对于 OCR 技术的概述，我推荐Cheriet、Kharma、Liu 和 Suen所著的《**字符识别系统》一书。**那本书中的参考资料可能会让你忙上一段时间。

[http://www.amazon.com/Character-Recognition-Systems-Students-Practitioners/dp/0471415707](https://rads.stackoverflow.com/amzn/click/com/0471415707)

最后，考虑加入 LinkedIn 上的光学字符识别小组以发布更具体的问题。业内有学者、研究人员和工程师可以非常详细地回答问题，您还可以通过电子邮件与正在为类似于奥里亚语的语言开发 OCR 的印度研究人员联系，尽管他们可能尚未发表软件呢。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T16:29:15.827

我们在我们的开源[DjVu->PDF](http://pd4ml.com/djvu.htm)转换器中解决了许多“智能裁剪”问题。该转换器还允许您加载一组扫描图像而不是 DjVu（只需按 SHIFT 和 Open 命令）并输出一组结果图像而不是 PDF。

它是一个免费的跨平台 GUI 工具，用 Java 编写。

![图像转换器、智能裁剪和纠偏](../Images/138c6e2dea5787ffb8bc4c636ec24450.png)

# android - Android - webview、禁用或替换 youtube 视频

> ID：12766582
> 
> 赞同：1
> 
> 时间：2012-10-07T06:16:53.903
> 
> 标签：android, youtube, android-webview, youtube-api

我想在 WebView 上禁用 Youtube 嵌入视频，最好用指向 Youtube 页面的链接替换它们（单击时将打开浏览器选择器）...

这是我的（相当通用的）webview：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_parodia);

    BlogView = (WebView) findViewById(R.id.blogview);
    BlogView.setWebViewClient(new CustomClient());
    WebSettings webSettings = BlogView.getSettings();
    webSettings.setJavaScriptEnabled(true);

    BlogView.loadUrl("http://test.blogspot.com/?m=1");
} 
```

**编辑：**我正在寻找[这样](https://stackoverflow.com/questions/4703072/replace-an-embed-or-iframe-youtube-video-by-an-tumbnail-link-to-video)的东西，对如何在android webview上实现它有任何帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:19:36.670

```
$(document).ready(function() {
    $('iframe').each(function() {
        var src = $(this).attr('src');
        // Replace youtube vids
        var ytprefix = "http://www.youtube.com/embed/";

        if(src.indexOf(ytprefix) != -1) {
            replaceYT(this, src.substring(ytprefix.length));
        }
    });

    $('object').each(function() {
        var srcel = $('param[name="src"]', this);
        var src = $(srcel).attr('value');
        // Replace youtube vids
        var ytprefix = "http://www.youtube.com/v/";
        if(src.indexOf(ytprefix) != -1) {
            replaceYT(this, src.substring(ytprefix.length));
        }
    });
});

function replaceYT(el, code) {
    if(code.indexOf("/") != -1) {
        code = code.substring(0, code.indexOf("/"));
    }
    if(code.indexOf("?") != -1) {
        code = code.substring(0, code.indexOf("?"));
    }
    var atag = $("<a href='vnd.youtube:" + code +"'><img class='youtubeimg' src='file:///android_asset/youtube-play-button.png' style='background:url(http://img.youtube.com/vi/" + code + "/0.jpg)'/></a>");
    $(el).replaceWith(atag);
} 
```

Just load in jquery and this script. This will replace youtube iframes and object tags with a screenshot from the video and a link to youtube. Tested on a SE Xperia X10 & Nexus 7.

Set up your webview to handle youtube like this: WebViewClient mWebClient = new WebViewClient() {

```
 @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if (url.startsWith("http://www.youtube.com") || url.startsWith("vnd.youtube")){
            startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(url)));
            return true;
        }
        return false;
    }

}; 
```

# python - 带有集合的python操作

> ID：12766584
> 
> 赞同：1
> 
> 时间：2012-10-07T06:17:28.707
> 
> 标签：python

我只是偶尔使用python，抱歉一个看似微不足道的问题

```
>>> a = set(((1,1),(1,6),(6,1),(6,6)))
>>> a
set([(6, 1), (1, 6), (1, 1), (6, 6)])
>>> a - set(((1,1)))
set([(6, 1), (1, 6), (1, 1), (6, 6)])
>>> a.remove((1,1))
>>> a
set([(6, 1), (1, 6), (6, 6)]) 
```

为什么 ' `-`' 运算符没有删除元素但删除了`remove`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T06:19:45.553

因为你错过了一个逗号：

```
>>> set(((1,1)))
set([1]) 
```

应该：

```
>>> set(((1,1),))
set([(1, 1)]) 
```

或者，为了更具可读性：

```
set([(1,1)]) 
```

甚至（Py2.7+）：

```
{(1,1)} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T06:43:33.140

尝试指定一个元素的元组时错过了逗号。元组的语法确实有点棘手......

*   使用逗号而不是括号构建元组
*   有时必须在其周围添加括号
*   然而，一个空元组由一对空括号表示
*   并不总是一对用逗号分隔的包含零个或多个表达式的括号是一个元组

一些例子

```
w = 1, 2, 3             # creates a tuple, no parenthesis needed
w2 = (1, 2, 3)          # works too, like x+y is the same as (x+y)
x, y, z = w             # unpacks a tuple
k0 = ()                 # creates an empty tuple
k1 = (1,)               # a tuple with one element (note the comma)
k = (1)                 # just a number, NOT a tuple
foo(1, 2, 3)            # call passing three numbers, not a tuple
bar((1, 2, 3))          # call passing a tuple
if x in 1, 2:           # syntax error, parenthesis are needed
   pass
for x in 1, 2:          # ok here
   pass
gen = (x for x in 1, 2) # error, parenthesis needed here around (1, 2) 
```

# debugging - 如何在 VBSCRIPT 中提取相当于 __LINE__、__FILE__ 等的上下文信息

> ID：12766586
> 
> 赞同：1
> 
> 时间：2012-10-07T06:17:48.260
> 
> 标签：debugging, logging, vbscript, introspection, printf-debugging

我想知道如何在 __LINE__ 之类的代码处以编程方式获取 vbscript 中一行的行号，或者更理想的是一种获取当前函数被调用的行号的方法，例如 python 的堆栈模块，所以我可以编写一个可重用的调试函数（以及代码所在的文件），不，我不想知道如何在我的编辑器中打开行号。

我现在还想提取任何类似的有用信息，例如调用函数、变量类型为字符串等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:31:26.483

VBScript 不会公开该信息，因此您无法从脚本中以编程方式访问它（[尽管有边缘情况](http://msdn.microsoft.com/en-us/library/ms976144.aspx)）。您将需要一个[调试器](http://technet.microsoft.com/en-us/library/ee692836.aspx)来提取此类信息。或者您可以让另一个脚本解释第一个脚本并跟踪行号（[像这样](http://www.rlmueller.net/FindLineNumber.htm)）。不过，我不建议将后者用于任何类型的生产环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T08:22:31.587

不幸的是，这不像在 Ruby 和 Python 中那样工作。我想出的下一件最好的事情是在任何可能出错的地方调用错误处理函数。每次我在编辑器中执行宏时，都会调整此函数参数中的数字（我使用文本板，\i 是正则表达式中的自动编号）。如果您的编辑器不支持此功能，您可以编写一个脚本来执行此操作。因此，当发生错误时，会记录调用错误处理函数的编号，您可以通过查找#number# 轻松地在源代码中找到它。

这对 asp 和 vbs 都可用，但对于 vbs 有更简单的方法。一些编辑器，如 textpad 或 sublimle text 让您执行 vbs 脚本，在选项卡中显示输出，如果产生错误，让您双击带有错误消息的行，在该行打开脚本。这也是通过正则表达式完成的。让我知道您是否需要用于文本板的那个。

```
on error resume next
'initialize constants DEBUGLEVEL and LOGFILE
'initialize strHostName

'some code
oConn.execute(sql)

if not LogError("#1#") then
  'do the things if successfull, otherwise log error with number
end if

'again some code
if not LogError("#2#") then
  'do the things if successfull, otherwise log error with number
end if

'the debug and log functions
function LogError(errornumber)
  'LogError\(\"#[0-9]+#\"\) replace by LogError("#\i#")
  if err.number <> 0 then
    call debug("<name of script>/Logerror","","","Errornumber:" _
      & errornumber & " " & err.number & " " & err.description & " " _
      & err.source)
    LogError = True
    err.clear
    errors = errors+1
  else
    LogError = False
  end if
end function

function Debug (pagina, lijn, varnaam, varinhoud)
  if DEBUGLEVEL > 0 then
    const forReading = 1, forWriting = 2, forAppending = 8, CreateFile = True
    dim fs,f, var, strHostName
    set fs=CreateObject("Scripting.FileSystemObject")
    strHostName    = fs.GetFileName(WScript.FullName)
    if fs.FileExists(LOGFILE) then
      set f=fs.OpenTextFile(LOGFILE, forAppending)
    else
      set f=fs.OpenTextFile(LOGFILE, forWriting,true)
    end if
    var = now & " " & pagina & ":" & lijn & ":" & varnaam & ":" & varinhoud
    f.WriteLine var
    if LCase(strHostName) = "cscript.exe" then 'debugging
      if DEBUGLEVEL > 1 then
        wscript.echo var
      end if
    end if
    f.Close
    set f=Nothing
    set fs=Nothing
  end if
  debug = true
end function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-04T01:17:21.780

只要它发生在函数之外，就可以进行以下操作。

自动错误处理在脚本开始时由 关闭`On Error Resume Next`，因此脚本不会在您执行任何操作之前就退出。但是，您随后可以使用`On Error GoTo 0`自己重新启用错误处理并引发异常。除了任何调试消息之外，这还将输出行号。

例如：

```
On Error Resume Next
server = WScript.Arguments(0)
If Err.Number <> 0 Then
    WScript.Echo("Need to pass in an argument!")
    On Error GoTo 0
    Err.Raise(1)
End if 
```

如果你不带任何参数运行它，你会得到以下输出：

```
Need to pass in an argument!
C:\script.vbs(6, 5) Microsoft VBScript runtime error: Unknown runtime error 
```

“6”指的是引发异常的行号。

这样您就可以打印自定义输出，并且您将知道错误发生在哪一行。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-08-20T20:45:15.857

是的！

有一种方法可以获得准确的错误行号，但它非常棒，因为我们正在谈论一个古老的编程工具......

是的，这是值得的，尤其是当您的代码要在许多用户面前运行时。这样你就可以摆脱隔离和重现错误，直接解决它。

仔细查看下面代码行中的最后一个变量“Erl”。它是 VB 脚本处理器持有的一个未记录的全局变量。

```
Dim sErrorMsg as String
sErrorMsg = Err.Description & "(" & Err.Number & ")" & vbNewLine & "Source: " & Err.Source & vbNewLine & "At line number: " & Erl 
```

为了从该全局“Erl”变量中获取任何内容，您需要（手动）** 在每行代码的开头设置其值，如下所示。请注意，您设置了行号，如果您忘记为特定行设置编号，Erl 将报告最后设置的值。查看除以零错误行，它报告了上面设置的行号，因为我没有在导致错误的行的开头设置行号值。

我还没有弄清楚内置调用堆栈，虽然我知道有一个。请让我知道如果你想出来了，现在我使用模块级变量来构建堆栈。

最后的更多提示，在此代码示例下方

```
Sub WhatEverSub ()
2        Const iColIdxPageNbr As Integer = 2
3        Const iColIdxDefinition As Integer = 3

5        Dim oDoc_Source As Document
6        Dim oDoc_Target As Document

10        Dim oTable As Table
11        Dim oRange As Range
12        Dim n As Long
13        Dim strAllFound As String
14        Dim Title As String
15        Dim Msg As String

        On Error GoTo PrepErrorHandler
            Dim xyz As Long
            xyz = Rnd(3) / 0
16
17        Title = "Evil Finder - This program is about doing something important for the world"
18
19        'Show msg - stop if user does not click Yes
20        Msg = "This macro finds all evil things consisting of 2 or more " & _
            "uppercase letters and extracts the hex representation to a table " & _
            "in a new document." & vbNewLine & vbNewLine & _
            "Do you want to continue?"

21        If MsgBox(Msg, vbYesNo + vbQuestion, Title) <> vbYes Then
22            Exit Sub
23        End If

(... whatever code ...)

820        Application.ScreenUpdating = True
830        If n = 1 Then
840            Msg = "No evil things were found. Need to find better detection tool"
850            oDoc_Target.Close savechanges:=wdDoNotSaveChanges
860        Else
870            Msg = "Finished extracting " & n - 1 & " evil thing(s) to a new document."
880        End If

PrepErrorResumeLine:
890        MsgBox Msg, vbOKOnly, Title

        'Clean up
1000        Set oRange = Nothing
1010        Set oDoc_Source = Nothing
1020        Set oDoc_Target = Nothing
1030        Set oTable = Nothing

Exit Sub

PrepErrorHandler:
        Msg = Err.Description & "(" & Err.Number & ")" & vbNewLine & "Source: " & Err.Source & vbNewLine & "At line number: " & Erl
        Resume PrepErrorResumeLine
End Sub 
```

**更多提示：1）至于手动设置错误行号值，我写了一个实用程序（十多年前）通过直接在VB项目上工作来自动添加或删除或重新编号模块中的所有行文件（或独立的 .vbs 文件），但下面会处理基本的，剩下一些手动调整......

使用 MS Excel 设置 VB 代码行 #s a) 在 C 列中粘贴代码 b) 将 A 列的第一个单元格值设置为 10，第二个设置为 20，然后将副本向下拖动以自动递增，直到到达最后一行/行代码列 B c) 在列 B 中粘贴以下公式并向下拖动复制 =A1 & REPT(" ", 8 - LEN(A1)) d) 将列 B 和 C 复制回 VB 代码窗格等瞧！

删除行号以使用 Word 进行主要编辑粘贴代码，按 CTRL + H 并确保选中通配符（单击“更多”按钮）填写以下设置 FIND [^13][0-9]{ 4} 替换 ^p 完成！

2) 至少以 10 的增量为每行编号，这样您就可以在最后一分钟插入几行，而不必在更改下方重新编号每一行

3) On Error Resume Next 是邪恶的，会花费你大量的调试时间！至少 90% 的时间，应该使用特定的处理程序，或者什么都不用。如果您还不知道如何从错误中恢复，请不要使用 RESUME NEXT 将其静音，而是记录所有详细信息（使用 Erl）并从运行时日志中学习并使用 GoTo 0 'Zero，而不是字母 O让其余的错误冒泡调用堆栈。

```
On Error GoTo MyErrorHandlerSection
(... write your risky code here ...)
On Error GoTo 0
'the line immediately above disables all error handling in the current function, if any error happens, it will be passed to the calling function 
```

如果您有另一块有风险的代码使用

```
On Error GoTo MySecondErrorHandlerSection 
```

# java - 从 Int 中获取 n 个最低有效位

> ID：12766590
> 
> 赞同：12
> 
> 时间：2012-10-07T06:18:14.507
> 
> 标签：java, bit-manipulation

这似乎很简单，但我找不到答案。如果我有一个 int X，那么在 Java 中从这个 int 中获取 N 个最低有效位的最佳方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-07T06:19:36.523

这应该适用于所有非负 N < ~~33~~ 32：

```
x & ((1 << N) - 1) 
```

值得详细说明这对`N == 31` ~~和`N == 32`~~是如何工作的。对于`N == 31`，我们得到`1 << N == Integer.MIN_VALUE`。当您从中减去 1 时，Java 会默默地环绕到`Integer.MAX_VALUE`，这正是您所需要的。~~因为`N == 32`, 1 位被完全移出，所以`1 << N == 0`; 然后`(1 << N) - 1 == -1`，这是所有 32 位设置。~~

对于`N == 32`，不幸的是，这不起作用，因为（感谢@zstring！）`<<`运算符仅移动右侧 mod 32。相反，如果您想避免专门针对这种情况进行测试，您可以使用：

```
x & ((int)(1L << N) - 1) 
```

通过移动 a `long`，您得到完整的 32 位移位，在转换回 a 后`int`，得到 0。减去 1 得到 -1 并且`x & -1`仅`x`适用于任何`int`值`x`（并且`x`是 的低 32 位的值`x`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T06:57:04.053

Ted 的方法可能会更快，但这是另一种方法

```
x << -N >>> -N 
```

这将所有位向上移动，然后向下移动以切断最高位。

```
int i = -1;
System.out.println(Integer.toBinaryString(i));
i = i << -5 >>> -5;
System.out.println(Integer.toBinaryString(i)); 
```

印刷

```
11111111111111111111111111111111
11111 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-15T15:11:22.710

您也可以使用面膜。如果您使用 & 按位运算符，则可以删除您想要删除的任何位（例如最高的 x 位）；

```
int mask = 0x7FFFFFFF                 //Example mask where you will remove the 
                                      // most significant bit 
                                      // (0x7 = 0111b and 0xF = 1111b).
int result = numberToProcess & mask;  //And apply the mask with the &bitwise op. 
```

这样做的缺点是您需要为每个位制作一个掩码，因此通常将其视为另一种方法可能更好。

# excel - 实际文件 (CSV) 和 excel 文件中的日期格式不同

> ID：12766595
> 
> 赞同：0
> 
> 时间：2012-10-07T06:19:42.073
> 
> 标签：excel, date-format

我有一个带有日期和时间字段的 csv 文件。现在，如果 CSV 文件在 textpad 或 notepad++ 中打开，则时间格式为 24 小时，但如果使用 excel（2007）打开，则为 12 小时格式。例如，如果在 csv 文件中是 2012 年 6 月 4 日 15:00:00，那么它是 2012 年 6 月 4 日下午 3:00:00

格式单元格选项也没有帮助。

我想在 excel 中使用相同的格式。我想我缺少一些内部设置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T06:24:00.497

如果您希望在 Excel 中格式化时间，以下内容将对您有所帮助

在单元格上，右键单击并转到 Format Cell 将有一个标有数字的选项卡（第一个）从列表中选择适当的类别（时间，在你的情况下）选择列出的格式之一。（底部两个之一，至少在 Office 2003 中）

如果没有一种格式与您想要的匹配，请选择一种与您想要的格式相近的格式，然后选择“自定义”类别。您现在可以使用您选择自定义的格式和其他预定义的自定义格式作为指南来编辑您选择的格式

![在此处输入图像描述](../Images/c5b9b33332512cf3d74f161b7a6f731a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T15:21:51.610

另一种选择是将csv导入Excel，`Data > From Text`然后通过向导并将列作为文本导入（在向导的步骤3中），然后excel不应更改格式

# c# - 如何调用类方法asp.net C#

> ID：12766597
> 
> 赞同：1
> 
> 时间：2012-10-07T06:19:47.083
> 
> 标签：c#, asp.net

此代码摘自 asp.net all in one reference for dummy 第 18 页和第 19 页的书。问题在于它无法编译。编译器说在当前上下文中找不到 txtFirst、txtSecond 和 lblAnswer。我是这个领域的新手，有人可以帮我吗？

```
<%@ Page Language="C#" AutoEventWireup="true"
    CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC “-//W3C//DTD XHTML 1.0
Transitional//EN" “http://www.w3.org/TR/xhtml1/DTD/xhtml1-
transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title>Simple Calculator</title>
</head>
<body>
    <form id="form2" runat="server">
        <div>
            <h1>The Simple Calculator</h1>
            First number:
            <asp:TextBox ID="txtFirst" runat="server" />
            <br />
            <br />
            Second number:
            <asp:TextBox ID="txtSecond" runat="server" />
            <br />
            <br />
            <asp:Button ID="btnAdd" runat="server"
                OnClick="btnAdd_Click" Text="Add" />
            <br />
            <br />
            The answer is:
            <asp:Label ID="lblAnswer" runat="server" />
        </div>
    </form>
</body>
</html>

using System;
using System.Data;
using System.Configuration;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
namespace WebApplication2
{
    public partial class _Default : System.Web.UI.Page
    {

        protected void btnAdd_Click(object sender,EventArgs e)
        {
            decimal a = decimal.Parse(txtFirst.Text);
            decimal b = decimal.Parse(txtSecond.Text);
            decimal c = a + b;
            lblAnswer.Text = c.ToString();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T06:40:41.033

试试这个版本 - 我已经测试过它并且它有效：

**ASPX：**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" 
    Inherits="Test.Default" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <h1>The Simple Calculator</h1>
            First number:
            <asp:TextBox ID="txtFirst" runat="server" />
            <br />
            <br />
            Second number:
            <asp:TextBox ID="txtSecond" runat="server" />
            <br />
            <br />
            <asp:Button ID="btnAdd" runat="server"
                OnClick="btnAdd_Click" Text="Add" />
            <br />
            <br />
            The answer is:
            <asp:Label ID="lblAnswer" runat="server" />
    </div>
    </form>
</body>
</html> 
```

**代码隐藏：**

```
using System;
using System.Data;
using System.Configuration;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;

namespace Test
{
    public partial class Default : System.Web.UI.Page
    {
        protected void btnAdd_Click(object sender, EventArgs e)
        {
            decimal a = decimal.Parse(txtFirst.Text);
            decimal b = decimal.Parse(txtSecond.Text);
            decimal c = a + b;
            lblAnswer.Text = c.ToString();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T06:40:31.693

进行两项更改

1.  在您的 aspx 页面中，更改为`Inherits="WebApplication2.Default"`
2.  在您后面的代码中，将类名更改为`Default`而不是`_Default`.

然后重建解决方案。

*另一个原因可能是复制粘贴问题，有时会弄乱设计器文件。尝试删除控件并手动重新添加它们。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T06:25:31.653

您必须将您的 c# 代码放在 Visual Studio 解决方案资源管理器中的代码隐藏页面中，找到 Default.aspx.cs 并复制

```
using System;
using System.Data;
using System.Configuration;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
namespace WebApplication2
{
    public partial class _Default : System.Web.UI.Page
    {

        protected void btnAdd_Click(object sender,EventArgs e)
        {
            decimal a = decimal.Parse(txtFirst.Text);
            decimal b = decimal.Parse(txtSecond.Text);
            decimal c = a + b;
            lblAnswer.Text = c.ToString();
        }
    }
} 
```

到文件我希望这对你有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T06:33:14.137

如果您不想使用单独的 .cs 文件，那么您必须在您的 aspx 页面中使用脚本标记。

```
<%@ Page Language="C#">

<!DOCTYPE html PUBLIC “-//W3C//DTD XHTML 1.0
Transitional//EN" “http://www.w3.org/TR/xhtml1/DTD/xhtml1-
transitional.dtd">

<script runat="server">
    protected void btnAdd_Click(object sender,EventArgs e)
    {
        decimal a = decimal.Parse(txtFirst.Text);
        decimal b = decimal.Parse(txtSecond.Text);
        decimal c = a + b;
        lblAnswer.Text = c.ToString();
    }
</script>

<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title>Simple Calculator</title>
</head>
<body>
    <form id="form2" runat="server">
        <div>
            <h1>The Simple Calculator</h1>
            First number:
            <asp:TextBox ID="txtFirst" runat="server" />
            <br />
            <br />
            Second number:
            <asp:TextBox ID="txtSecond" runat="server" />
            <br />
            <br />
            <asp:Button ID="btnAdd" runat="server"
                OnClick="btnAdd_Click" Text="Add" />
            <br />
            <br />
            The answer is:
            <asp:Label ID="lblAnswer" runat="server" />
        </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T06:43:12.127

您是在制作网站还是 Web 应用程序？如果是后者，请尝试删除（或删除/重命名，如果您希望先备份它）Default.aspx.cs 文件。然后在解决方案资源管理器中右键单击 Default.aspx 文件并选择“转换为 Web 应用程序”。

# ruby-on-rails - 新手在 ROR 中尝试在一个应用程序中连接两个数据库

> ID：12766600
> 
> 赞同：0
> 
> 时间：2012-10-07T06:20:17.963
> 
> 标签：ruby-on-rails, ruby

继续尝试在 Rails 的一个应用程序中连接多个数据库的能力。这种能力是一个特定的生产要求，我是一个完整的新手......

所以我接受了之前的建议。请注意，我无法让应用程序从 database.yml 中读取“deals_qa”环境，或者至少它是这样出现的。

现在，最终结果是将我发送到应用程序生成的“糟糕”页面，我假设创建该页面是为了解决任何错误，因此没有具体说明为什么这不起作用。

请查看并提供任何建议，或我应该考虑的其他事项以使其正常工作...谢谢！

以下是基于先前建议的代码更改：

这是名为“dealsdb”的新模型文件：

```
module Dealsdb

@abstract_class = true

conn = { :adapter => 'mysql',
 :encoding => 'utf8',
 :reconnect => 'true',
 :database => 'deals_qa',
 :username => 'xxxxxx',
 :password => 'xxxxxx',
 :host => 'xx.xx.xx.xx',
 :port => 'xxxx'
}

establish_connection(conn["deals_qa"])

end
end

class Members < Dealsdb::Base

  def email_exists?(email)
    unless email.blank? || SYSTEM_EMAILS.include?(email)
    returning find_by_email(email) do |user|
    end
    end
  end
end 
```

这是现有 Account Controller 文件中对应的代码片段，文件名为 Account_Controller.rb。请注意，我只是想克服第一个条件。

```
if Dealsdb::Members.email_exists?(@email)
            @Redirect_Flag = true
        else
            flash.now[:error] = 'Didnt MMS database check didnt work'
        end 
```

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:30:47.823

以前有一个问题是关于在 Rails 中连接到多个数据库

[具有多个数据库的 Rails RSpec](https://stackoverflow.com/questions/1528868/rails-rspec-with-multiple-databases/1528956#1528956)

我引用了 Rspec，但该模式通常有效，并且我已经成功使用过很多次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T08:38:18.117

你没有任何继承自`ActiveRecord::Base`. 我这样做的方法是让我的模型继承自`ActiveRecord::Base`（rails 中的规范）。然后在模型内部更改连接`establish_connection(db_name)`。

例子：

```
class Members < ActiveRecord::Base
  establish_connection(:foo)

  def email_exists?(email)
    unless email.blank? || SYSTEM_EMAILS.include?(email)
    returning find_by_email(email) do |user|
    end
    end
  end
end 
```

在 database.yml 中：

```
foo:
  adapter: mysql
  host: localhost
  database: deals_qa
  username: xxxxxx
  password: xxxxxx 
```

这是我找到的参考链接：[https ://groups.google.com/forum/?fromgroups=#!topic/rubyonrails-talk/OpHh6FdNELo](https://groups.google.com/forum/?fromgroups=#!topic/rubyonrails-talk/OpHh6FdNELo)

# python - 切换参与者加入和退出 Google Hangout

> ID：12766603
> 
> 赞同：2
> 
> 时间：2012-10-07T06:20:35.513
> 
> 标签：python, ruby-on-rails, hangout

我需要能够从在线用户数据库中切换参与者进出视频会议。我一直在使用 Hangout，因为它们是我所知道的唯一开源视频会议服务。我知道在环聊中你可以得到一个扩展来“踢”某人，但我似乎无法在他们的 API 中找到它。有谁知道我如何自动或手动踢和添加人员？理想情况下，我想在 Ruby 中完成它，并且由于 Hangout 在 python 中，我已经尝试过使用 Python，但无济于事。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T02:46:43.843

在 api 中，您只能更改广播中的人，但不能更改实际环聊中的人（即没有踢 API）。此功能与环聊直播的内置“Cameraman”应用程序中的功能相同。在开发者网站上的[setParticipantBroadcast](https://developers.google.com/+/hangouts/api/gapi.hangout.onair#gapi.hangout.onair.setParticipantInBroadcast)上阅读有关该 API 的更多信息。

# javascript - 如何从悬停调用类/ID

> ID：12766613
> 
> 赞同：2
> 
> 时间：2012-10-07T06:22:23.650
> 
> 标签：javascript, jquery, html, css

我有一个带有产品网格视图的小型电子商务网站，其中包含：

```
.product-image
.product-price
.product-name 
```

在主产品页面中，它包含与上述相同的类，另外：

```
.product-discount 
```

我在网格视图上尝试做的是在鼠标悬停`.product-discount`时显示标签。`.product-image`

我只想知道如何悬停类标签。我努力了：

```
.product-image:hover { something that would call the .product-discount; } 
```

![在此处输入图像描述](../Images/39385cc50d455daa9926a945a2ebc13c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T06:38:54.763

伪类不必是尾随部分。所以这是有效的，应该可以工作：

```
.product-image .product-discount { visibility:hidden; } /* make sure it takes up space (for whatever reason) */
.product-image:hover .product-discount{ visibility:visible; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T07:23:52.070

尝试这个

```
jQuery('.product-image').bind('hover', function(){ 
    jQuery('.product-discount').show(); 
} 
```

# java - 绘制多个像素/矩形

> ID：12766615
> 
> 赞同：0
> 
> 时间：2012-10-07T06:22:56.833
> 
> 标签：java, pixel

我正在尝试制作一个 java 沙子游戏，但一点也过不去。我已经制作了在 mouseX 和 mouseY 处绘制矩形的方法，并且我已经对其进行了设置，因此它会更新每一帧，因此它会不断地跟随鼠标。

我假设我会使用一个数组来创建每个矩形，然后从那里使用预定义的算法漂浮到地面上，我对此很满意，我只是不明白如何“钩住我的方法'到一个数组。

这是我用来绘制矩形的方法（在它自己的名为方法的类中）

```
import org.newdawn.slick.Graphics;

public class Methods {

public Graphics g = new Graphics();

public int sizeX = 4;
public int sizeY = 4;

public void drawParticle(float x, float y){
    g.drawRect(x, y, sizeX, sizeY);
}
} 
```

**这是我的主要课程**

```
import org.newdawn.slick.GameContainer;
import org.newdawn.slick.Graphics;
import org.newdawn.slick.SlickException;
import org.newdawn.slick.state.BasicGameState;
import org.newdawn.slick.state.StateBasedGame;

public class Control extends BasicGameState {
public static final int ID = 1;

public Methods m = new Methods();

int mouseX;
int mouseY;

public void init(GameContainer container, StateBasedGame game) throws SlickException{
}

public void render(GameContainer container, StateBasedGame game, Graphics g) throws SlickException {
    m.drawParticle(mouseX, mouseY);
}

public void update(GameContainer container, StateBasedGame game, int delta) {
}

public void mouseReleased(int button, int x, int y){
    mouseX = 0;
    mouseY = 0;
}

public void mouseDragged(int oldx, int oldy, int newx, int newy) {
    mouseX = newx;
    mouseY = newy;
}

public int getID() {
    return ID;
}

} 
```

但是当我点击时，只有一个矩形跟随鼠标，而不是在鼠标处创建很多：L

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T02:57:41.567

公共变量：

```
Rectangle boxes[] = new Rectangle[maxnum];
int boxnum = 0; 
```

鼠标移动时：

```
boxes[boxnum] = new Rectangle[e.getX(), e.getY(), sizeX, sizeY);
boxnum = boxnum + 1; 
```

绘制粒子时：

```
counter = 0;
do
{
   g.drawRect(boxes[counter].x, boxes[counter].y, sizeX, sizeY);
   counter = counter + 1;
} while (counter < maxnum); 
```

Where maxnum is the maximum number of boxes you will have. This way you can store multiple rectangles in your array and go through the array and draw them when you update the screen. Hope this helps.

# java - 将子类项添加到超类的 ArrayList 时出错

> ID：12766623
> 
> 赞同：4
> 
> 时间：2012-10-07T06:24:44.940
> 
> 标签：java, eclipse

我有一个带有几个子类的超类。

```
public abstract class SuperClass {
}

public class SubClass1 extends SuperClass {
} 
```

我创建了一个 ArrayList 来包含 SuperClass 类型的对象。

```
private ArrayList<SuperClass> list = new ArrayList<SuperClass>(); 
```

我在 Eclipse 中看到的错误数量很多。
首先，任何添加子类对象的尝试都会出错：

```
SubClass1 object;
object = new SubClass1(parameters);

list.add(object)  //I get error: The method add(SuperClass) in the type 
                  //ArrayList<SuperClass> is not applicable for the arguments 
                  //(SubClass1) 
```

稍后在代码中，当我尝试将一种类型转换为另一种类型时，会遇到更多问题：

```
for (SuperClass obj : list){
    if (obj instanceof SubClass1){ //This gets an error like this:
         ....                      //Incompatible conditional operand types
    }                              // SuperClass and SubClass1 
```

更不用说我调用的一些方法在超类中*明确*定义，这些方法对于类型来说是未定义的。我在这里敲我的头。我完全不知道问题可能是什么。

如果你们可以为我指出一些可能的方向，我将非常感激。我不知道我是否提供了足够的信息，所以请提出您认为可能适用的任何问题。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T08:09:14.813

在查看了所有其他答案和您的问题之后，想到这种行为的唯一可能原因是您有两个用于 SubClass1 的类文件。一种是 SubClass1 扩展了 SuperClass，另一种不是。试图在 ArrayList 中插入 SubClass1 的类似乎正在使用后面的类文件。出于同样的原因，超类方法没有出现在子类实例上。

检查您的导入并确保您使用的是正确版本的 SubClass1。

如果上述方法不能解决问题，也有可能是你的java源文件和你的.class文件不同步。删除eclipse项目中的bin文件夹，重新构建项目。您还可以清理和构建项目以确保没有任何不同步。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T06:41:17.650

以下程序对我来说很好（在 JRE 1.6 上运行）

```
public class Test {
    public static abstract class SuperClass {
    }

    public static class SubClass1 extends SuperClass {
        public SubClass1() {

        }
    }

    public static void main(String[] args) {
        ArrayList<SuperClass> list = new ArrayList<SuperClass>();
        SubClass1 object;
        object = new SubClass1();
        System.out.println("Test1");
        list.add(object); 
        for (SuperClass obj : list) {
            if (obj instanceof SubClass1) { 
                System.out.println("Test2");
            }
        }
    }
} 
```

**编辑：** 即使在将 SuperClass 和 SubClass1 移动到不同的类并删除静态标识符之后，我也会得到相同的输出

输出：

```
Test1
Test2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T06:34:35.820

将其更改`SubClass1 object; object = new SubClass1(parameters);`为

```
SuperClass object;
object= new SubClass1(parameters); 
```

# java - Servlets/JSP 和对数据库的多次插入

> ID：12766624
> 
> 赞同：0
> 
> 时间：2012-10-07T06:25:02.557
> 
> 标签：java, database, jsp, servlets

我有一个需要学生出勤的页面。它打印出一个学生列表，每个学生旁边都有一个复选框。然后该人单击提交并将所选学生的 ID 和实验室 ID 发送到数据库。

我遇到的问题是将最后一个勾选的框发送到数据库，其余的都没有。我假设它会覆盖它之前的那些，但我不确定如何解决这个问题。

这是我的`doPost`方法：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

            int user_id = Integer.parseInt((String)request.getParameter("user_id"));
            int lab_id =  Integer.parseInt((String)request.getParameter("lab_id"));

              System.out.println("I got a blow job");

              String message = null; 
              try {
                  Class.forName("com.mysql.jdbc.Driver");
                  Connection con = 
                    DriverManager.getConnection("jdbc:mysql://localhost:3306/wae","root","");
                System.out.println("got connection"); 

                Statement s = con.createStatement(); 

                String sql = "INSERT INTO user_lab" + 
                          " (user_id, lab_id)" + 
                          " VALUES" + 
                          " ('" +  user_id + "'," + 
                             " '"  +  lab_id + "')"; 

                  System.out.println(sql);
                  int i = s.executeUpdate(sql); 
                  if (i==1) {
                    message = "Successful attendance."; 
                    response.sendRedirect("Tutor_labs");
                  } 

                  s.close(); 
                  con.close(); 
                } 
                catch (SQLException e) {
                  message = "Error." + e.toString(); 
                  boolean error = true; 
                } 
                catch (Exception e) {
                  message = "Error." + e.toString(); 
                  boolean error = true; 
                } 
                if (message!=null) {
                  PrintWriter out = response.getWriter(); 
                  out.println("<B>" + message + "</B><BR>"); 
                  out.println("<HR><BR>"); 
                } 

              } 

    } 
```

这是我的 JSP 页面：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Mars University Lab System</title>
    <link rel="stylesheet" href="style.css" type="text/css" media="screen">
</head>

<body>
<jsp:include page="headerTutor.jsp"/>

<div id = "centrecontent">
<h3>Students In Tutorial</h3>
<h2>Attendance List</h2>

<%
    String[] list1 = (String[])request.getAttribute("res1");
    String[] list2 = (String[])request.getAttribute("res2");
    String[] list3 = (String[])request.getAttribute("res3");
    String[] list4 = (String[])request.getAttribute("res4");

         if(null == list1){%>

<th>Uni Id</th><th>Name</th><th>Email</th>      
<% 
         }else{ %>

        <form name="ViewStudentsTutor" ACTION="http://www.crackman.net.au/ICE/test.php\"  method="post">
<%      for(int i=0; i<list1.length; i++)
        {   
            %>                  <input type="hidden" name="lab_id" value=<%=request.getParameter("labid")%>>
                                <%out.println(list2[i]);%>
                                <%out.println(list3[i]);%>
                                <%out.println(list4[i]); %>
                                <input type="checkbox" name="user_id" value=<%out.println(list1[i]);%>><br>

    <%  }}
    %>  
     <input type="submit" value="Submit" name="Submit"/>
        </form> 

</div>
<jsp:include page="footer.jsp"/>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T06:32:19.157

您只使用一个`user_id`using`request.getParameter("user_id")` 相反，您应该使用它将返回您想要的所有s`request.getParameterValues("user_id")`的数组，而不是您正在获得的单个`String``user_id``user_id`

类似的是`lab_id`

# android - 自定义相机视图

> ID：12766626
> 
> 赞同：0
> 
> 时间：2012-10-07T06:25:21.123
> 
> 标签：android, android-camera, surfaceview

我在实现自定义相机视图时遇到了困难。

我要实现的任务是 - 在相机预览中我得到了一张预览图片（在 previewcallback 函数中）。我缩放它，然后我想在相机视图中绘制图像的缩放版本。

在 previewcallback 函数中，我将图像像素值作为字节数组。但在 canvas.drawImage 它接受 int 数组。谁能建议我如何在 previewcallback 函数中的字节数组中组织像素数据？

我试图锁定surfaceview，但没有帮助。它返回 null 所以我不能在那个表面上画任何东西。

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T07:17:58.523

预览回调中像素数据的组织方式取决于您的预览格式设置。默认情况下，它是[NV21](http://developer.android.com/reference/android/graphics/ImageFormat.html#NV21)，这是 Android 设备上最兼容的选项。[例如，您可以在此处](http://www.fourcc.org/yuv.php#NV21)找到有关此格式的更多详细信息。

但粗略地说，图像数据是 YCbCr 格式——而不是画布想要的更常见的 RGB 颜色编码。你需要

1.  将 YCbCr 字节值转换为 RGB 值（公式可在[Wikipedia](http://en.wikipedia.org/wiki/YCbCr#JPEG_conversion)中找到）
2.  将 Cb 和 Cr（颜色）通道上采样为全分辨率；它们已减少到 Y（亮度）通道的宽度和高度的 1/2。最简单的选择是使用最近邻上采样 - 对 4 个不同的 Y 值使用相同的 Cb 和 Cr 值。因此，您可以将 Cb 和 Cr 通道的像素 (0,0) 与 Y 通道的像素 (0,0)、(1,0)、(0,1) 和 (1,1) 配对，以形成全分辨率图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T07:28:52.767

如前所述，NV21 是默认的，必须始终提供 - 这意味着您可以依赖它，如果您希望与其他设备兼容，您应该依赖它。至于锁定表面视图-您用于预览的表面视图对您来说是禁止的，因为它已经被相机应用程序锁定（这是本机并在自己的进程中运行）-如果您想使用它，您将不得不停止预览所以相机应用程序释放了这个表面（希望）

坏消息是您不能在第一个带有框架布局的表面视图上放置另一个表面视图（这是表面视图的限制，它们不能重叠），但好消息是您可以将图像视图放在上面并在那里绘制位图（通过 `runOnuiThread()`）

[您可以在我们的javaOCR 项目](http://sourceforge.net/projects/javaocr/)中找到如何执行此操作的示例

（请参阅 android 演示，请使用 git repo，因为它是最新的）

# python - 如果满足条件，如何使参数成为可选参数？

> ID：12766628
> 
> 赞同：2
> 
> 时间：2012-10-07T06:25:32.900
> 
> 标签：python, command-line-arguments

我刚从[docopt](http://docopt.org/)开始，我正在尝试编写一个使用命令，如果该命令匹配某些东西，它将接受一个或多个可选参数。这是它的当前状态：

```
Usage:
  script.py voucher (add|del) <code> <credits> [<points>] 
```

在这里，首先使用`voucher`命令，然后使用`add`or `del`。我想更改该行，以便如果`add`使用，则 the`code`和`credits`arguments 都是必需的，但是`points`是可选的。

但是，如果`del`改为使用，则只`code`需要参数。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T06:42:17.663

```
"""S.O. 12766628

Usage:
    script.py voucher add <code> <credits> [<points>]
    script.py voucher del <code>
"""
from docopt import docopt

if __name__ == '__main__':
    arguments = docopt(__doc__, version='S.O. 12766628')
    print(arguments) 
```

做你需要的。

# java - “手动”打开和关闭日志文件与通过“程序”打开/关闭它有什么区别吗？

> ID：12766630
> 
> 赞同：0
> 
> 时间：2012-10-07T06:25:44.417
> 
> 标签：java, windows, file, logging, notepad

`log`这是我在使用 Windows 时如何手动创建文件的方法。

*   打开记事本
*   大写`.LOG`_
*   关闭文件

下次打开文件时，将自动添加当前日期/时间的条目。喜欢 ：

```
.LOG
11:33 AM 07-Oct-12 
```

当您尝试关闭文件时，它会询问您是否要保存。如果我们点击保存，那么下次`12:20 P.M 07-Oct-2012`我们打开那个文件，它看起来像：

```
.LOG
11:33 AM 07-Oct-12

12:20 P.M 07-Oct-2012 
```

如果我们点击下次不保存，文件将如下所示：

```
.LOG
12:20 P.M 07-Oct-2012 
```

以上是手动存储日志的方式。我正在尝试使用程序来做到这一点。我已经创建了一个名为*LOG*的文件，它`.LOG`后面有一个换行符。但是，当我向该文件写入一个条目时，例如`first entry`然后关闭文件/写入器，然后再次打开以写入一个新条目，例如`second entry`，两者都被一个接一个地添加，但不在单独的时间/日期标题下。为什么是这样 ？因为如果我手动（而不是通过程序）打开该特定文件，则会添加当前日期和时间的条目。通过单击打开文件和通过单击打开文件有什么区别`FileReader/FileWriter`吗？

这是我一直在尝试使用单独的日期/时间标题下的每个新条目写入日志文件的方式。

```
 try {
        File f = new File("C:/Users/user/Desktop/LOG.txt");
        if(f.exists()) {
            System.out.println("exists");
            FileWriter writer = new FileWriter(f,true);
            String content = jTextArea1.getText();
            writer.write(content);
            writer.close();

            FileReader reader = new FileReader(f);
            int x;
            while( (x = reader.read() ) > 0) {
                System.out.print((char)x);
            }
            reader.close();
        }
    }catch(Exception exc) {
        System.out.println(exc);
    } 
```

上面的代码片段首先将一个条目写入名为*LOG.txt*的日志文件，然后尝试从该文件中读取。例如，最初的文件如下所示：

```
.LOG 
```

在我添加一个条目后，让它成为*第一个日志*它变成：

```
.LOG
first log 
```

当我期望它看起来像：

```
.LOG
12:20 P.M 07-Oct-2012
first entry..
12:23 P.M 07-Oct-2012
second entry..
12:28 P.M 07-Oct-2012
third entry.. 
```

但随着我不断添加新条目，它继续像这样：

```
.LOG
first entry..second entry..third entry... 
```

当我转到目录并通过双击打开文件时，日期/时间条目将添加到文件中并显示，如下所示：

```
 .LOG
    first entry..second entry..third entry...
    12:20 P.M 07-Oct-2012 
```

这是为什么 ？是指令：

```
FileReader reader = new FileReader(fileObject);
// read
reader.close(); 
```

不等于先双击然后点击十字并保存文件来打开和关闭文件？

*注意：* [〜参考：如何使用记事本创建日志文件（Microsoft）](http://support.microsoft.com/kb/260563)

# c++ - 使用/不使用 ios::binary 模式打开流时使用读/写的区别

> ID：12766636
> 
> 赞同：4
> 
> 时间：2012-10-07T06:27:11.103
> 
> 标签：c++, io, filestream, binaryfiles

在我对以下代码片段的实验中，无论我是否使用 ios:binary 模式创建流，我都没有发现任何特别的区别：

```
int main()
{
    ifstream ostr("Main.cpp", ios::in | ios::binary | ios::ate);
    if (ostr.is_open())
    {
        int size = ostr.tellg();
        char * memBlock = new char[size + 1];
        ostr.seekg(0, ios::beg);
        ostr.read(memBlock, size);
        memBlock[size] = '\0';
        ofstream file("trip.cpp", ios::out | ios::binary);
        file.write(memBlock, size);
        ostr.close();
    }
} 
```

在这里，我试图将原始源文件复制到另一个名称不同的文件中。

我的问题是当使用/不使用 ios::binary 模式打开 fstream 对象时，读/写调用（与二进制文件 IO 相关联）有什么区别？使用二进制模式有什么好处吗？在进行文件 IO 时何时以及何时不使用它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-07T07:34:16.120

`binary`和mode之间的唯一区别`text`是如何处理 '\n' 字符。

在`binary`模式下**没有**翻译。

In `text`mode`\n`在写入时被翻译成`end of line sequence`.
In `text`mode`end of line sequence`在读入时被翻译成`\n`.

`end of line sequence`是平台相关的。

例子：

### 基于 ASCII 的系统：

```
LF    ('\0x0A'):      Multics, Mac OS X, BeOS, Amiga, RISC OS
CRLF  ('\0x0D\0x0A'): Microsoft Windows, DEC TOPS-10, RT-11
CR:   ('\0x0D'):      TRS-80, Mac OS Pre X
RS:   ('\0x1E'):      QNX pre-POSIX implementation. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T06:31:59.113

如果您想以二进制形式写入文件，并且不对数据进行任何修改，请指定该`ios::binary`标志。当您想以文本模式编写文件时，请不要指定`ios::binary`，您可能会得到诸如换行之类的东西。如果您在类 UNIX 平台上，二进制格式和文本格式是相同的，因此您不会看到任何区别。

# django - Django + Heroku + S3

> ID：12766642
> 
> 赞同：5
> 
> 时间：2012-10-07T06:28:12.223
> 
> 标签：django, heroku, amazon-s3

我一直在尝试研究如何让 AWS S3 与 Heroku 一起用于 FileField 和 ImageField 上传。但我一直未能让它工作。

该计划是

1.  使用 FileField 上传一些文件。
2.  将 ImageField 用于个人资料图片。
3.  使用 Sorl 缩略图调整这些图片的大小。

我关注[了这篇](http://aws.amazon.com/articles/1434?_encoding=UTF8&jiveRedirect=1)文章，但它似乎不起作用。有什么我想念的吗？我想要文件上传，尽可能轻松。有没有比 AWS 对 django 和 heroku 更友好的更好选择？在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T08:15:18.853

使用[Django 存储](http://django-storages.readthedocs.org/en/latest/index.html)管理 S3 上的静态文件。然后在部署时遵循[Heroku 静态资产指南](https://devcenter.heroku.com/articles/django-assets)。

首先，使用 AWS 控制台或您喜欢的工具在 S3 中创建一个存储桶。然后，修改您的 settings.py 并添加以下值：

```
import os

AWS_ACCESS_KEY_ID = os.environ.get('AWS_ACCESS_KEY_ID')
AWS_SECRET_ACCESS_KEY = os.environ.get('AWS_SECRET_ACCESS_KEY')
AWS_STORAGE_BUCKET_NAME = '<YOUR BUCKET NAME>'

STATICFILES_STORAGE = 'storages.backends.s3boto.S3BotoStorage'
DEFAULT_FILE_STORAGE = 'storages.backends.s3boto.S3BotoStorage'

STATIC_URL = 'http://' + AWS_STORAGE_BUCKET_NAME + '.s3.amazonaws.com/'
ADMIN_MEDIA_PREFIX = STATIC_URL + 'admin/' 
```

请注意，我们使用环境变量来存储 AWS 访问密钥和密钥。当我们讨论这个主题时，如果您打算开源您正在部署的 Django 应用程序，请考虑将您的 SECRET_KEY 存储在环境变量中。

以上来自[这里](http://offbytwo.com/2012/01/18/deploying-django-to-heroku.html)

# c# - 从后面的代码中每 2 秒刷新一次 UpdatePanel 区域

> ID：12766643
> 
> 赞同：0
> 
> 时间：2012-10-07T06:28:18.410
> 
> 标签：c#, asp.net-ajax, updatepanel, webforms

我正在开发一个小型时事通讯应用程序，它可以向少数用户发送时事通讯，比如说 100-200 个用户。

我希望管理员通过显示计数器并将电子邮件地址添加到列表框，每 2-3 秒查看一次新闻通讯广播的进度。

我正在尝试使用以下代码来实现这一点。我添加了部分代码。它工作正常，但在向所有用户发送电子邮件后显示结果。

```
 <asp:UpdatePanel ID="updPanelNewsletterProgress" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
            <asp:Label ID="lblCounter" runat="server" Text=""></asp:Label><br /><br />
            <asp:CheckBoxList ID="cbListEmailsAddress" runat="server">
            </asp:CheckBoxList>
    </ContentTemplate>
</asp:UpdatePanel>  

protected void btnSendNewsletter_Click(object sender, EventArgs e)
{
    DataSet ds = new DataSet();
    string strSql = "SELECT DISTINCT(Email) FROM Subscribe WHERE unsubscriber=0";
    int counter, totalRows;
    counter = 0;
    ds = DataProvider.Connect_Select(strSql);
    totalRows = ds.Tables[0].Rows.Count;
    DataTable dt = ds.Tables[0];

    foreach (DataRow dRow in dt.Rows)
    {
        to = ds.Tables[0].Rows[0]["Email"].ToString();
        Helper.SendEmailNewsletter(to, subject, message, isHtml);
        counter = counter + 1;
        lblCounter.Text = "Sending " + counter.ToString() + " of " + totalRows.ToString();
        updPanelNewsletterProgress.Update();
        System.Threading.Thread.Sleep(2000);
    } 
```

}

如果有人能指出我更正确的方法并显示我可以在发送电子邮件时从代码后面更新计数，我将不胜感激。

示例：发送 1 of 100 发送 10 of 100

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T09:00:10.750

`Thread.Sleep()`在代码隐藏中使用或计时器对您没有帮助。

ASP.NET 是一个请求/响应模型，UpdatePanel 执行部分页面更新，但也遵循此请求/响应模型。

您可以使用与 UpdatePanel 位于同一选项卡上[的（客户端）计时器。](http://ajax.net-tutorials.com/controls/timer-control/)

# jquery - 使用 JQuery $.ajax 从 HTTPS API 端点检索数据

> ID：12766649
> 
> 赞同：1
> 
> 时间：2012-10-07T06:29:45.197
> 
> 标签：jquery

刚刚开始使用 JQuery ；请原谅我确定是可怕的问题。

我正在尝试使用 JQuery $.ajax API 从 HTTPS API 端点获取一些信息。

我的 API 确实正常运行……它还可以方便地接受标准 GET 请求，因此很容易在我的 JavaScript 中查看我想要获取的数据。

当我发出以下表单的浏览器请求时，忽略 HTTPS 身份验证一秒钟（根据我的理解，应该很容易使用 ajax 设置或 ajaxSetup 处理）： `https://192.168.155.200/json-rpc/1.0?method=GetCompleteStats`

结果，我在浏览器中收到一堆 JSON 文本，其中包含各种信息。我想暂时将其格式化为 HTML 或纯文本，然后将其直接放入浏览器中……这只是暂时的概念验证。

我已经逐步完成了一些导致功能演示的教程，尽管我似乎无法解决这个问题。我的代码……目前什么都没有。我希望它在按下按钮（页面上只有一个按钮）时向 API 端点发出 AJAX POST 请求，然后将结果放入 div 选择器中的段落标记中。

```
<html>
  <head>
    <title>lolsfajaxclient</title>
    <script type="text/JavaScript" src="jquery.js"></script>
    <script type="text/JavaScript">
      $.ajaxSetup({
        url: "https://192.168.155.200/json-rpc/1.0",
        type: "POST",
        username: "admin",
        password: "lolpassword"
      });

      $("#post").click(function(){
        var completestats = $.ajax({
          data: {method: "getCompleteStats"},
          dataType: "html",
          success: function(data) {
            $("#quote p").html(data);
            alert('Load was performed.');
          }

        });
      });
    </script>
  </head>
  <body>
    <input type="submit" id="post" value="ajaxin that shit"><br><br>
    <div id="result"><p></p></div>
  </body>
</html> 
```

和

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-07T06:36:23.167

你需要在这里做两件事，

将此函数调用放在 document.onready 上，甚至在您尝试将 html 推送到 div 之前确保文档已准备好。

接下来是，您如何回复 ajax 调用。您可能无法正确使用 ajax 请求传递计划 html。尝试将数据作为 xml 发送，并将其 HTML 部分封装在 [CDATA] 附件中，以确保它在传输过程中不会损坏。为此，请将数据类型设为 xml。

不过，这应该是一项非常容易的任务。

# javascript - 如何在没有 IDE 的情况下构建和部署三星 SmartTV 应用程序（例如：在 Linux 上）

> ID：12766653
> 
> 赞同：43
> 
> 时间：2012-10-07T06:30:05.530
> 
> 标签：javascript, linux, samsung-smart-tv

**问题：**

我想尝试使用三星 SmartTV SDK 2.5 构建一个概念验证应用程序（我有一台 2011 年型号的电视 - UA55D8000）。

不幸的是，SDK 有两种似乎只能在 Microsoft Windows 上运行。这很奇怪，因为没有理由应该是这样：电视本身运行 Linux，应用程序是用 JavaScript 编写的。

这提出了两个问题：

1.  由于我家里没有 Microsoft Windows，所以我不能使用 SDK 附带的构建环境（也不能使用电视模拟器）。（SDK 文件本身就是 JavaScript）

2.  即使我可以访问 Windows，如果不使用传统的构建工具（例如：Make、Ant、Autotools 等），也很难自动构建和测试应用程序

如何在 Linux 上构建三星智能电视应用程序？（即：不使用 SDK 附带的基于 Windows 的构建工具）

* * *

**到目前为止，我发现了什么：**

据我所知，JavaScript 模式应用程序只是一个 zip 文件，其中包含一个 XML 配置文件、一个或多个 JavaScript 文件（包括为平台 SDK 功能提供的 JavaScript 接口库）以及任何所需的资产（HTML、图像等）。

此外，据我所知，部署涉及将 zip 文件和 XML 清单文件放在电视可访问的 Web 服务器网络上，在电视上以“开发”身份登录，并将应用程序“同步”到已安装的应用程序电视。

* * *

有人可以向我指出完整部署要求和应用程序包要求的来源吗？甚至只是一个工作样本？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-12-12T13:33:18.410

我在我的 Ubuntu 机器上设置开发环境取得了相当大的成功，我想在这里分享我的方法给任何想要做同样事情的人。此答案旨在独立于平台，因此相同的建议应适用于任何成熟的操作系统。

## 介绍

首先，问题关于应用程序结构的假设是正确的。JavaScript 应用程序由以下项目组成：

*   **config.xml**，一个简单的配置文件，定义了各种设置和部署信息。请参阅官方开发者网站上的[*编写 config.xml 文件。*](http://www.samsungdforum.com/upload_files/files/guide/data/html/html_2/getting_started/coding_js.html#config)
*   **widget.info**，一个非常小的文件，有几行用于定义应用程序主体的不透明度。这对于全屏应用程序可能不是必需的。
*   **index.html**，您的应用程序的主要 HTML 文件。
*   **图像、声音和其他资源**。

您可以使用您喜欢的编辑器编写这些文件。我很乐意为我的 JS 和 CSS 使用带有 linting 插件的 *vim 。*

## 测试

从 SDK 4.0 版开始，现在可以使用 Linux 版本的模拟器。这允许您测试您的应用程序，因为它们会出现在 2011-2013 年的电视上。对于较旧的电视，您可以在 Wine 中运行 SDK 1.5 的模拟器，但属于 SDK 2.0 和更新版本的模拟器[将无法运行](http://bugs.winehq.org/show_bug.cgi?id=32414)。

可以在 Windows 虚拟机*中*运行模拟器，并且通过一些技巧，您可以让模拟器使用您自己的应用程序文件夹来查找应用程序。这包括与您的虚拟机共享您的开发文件夹，然后创建指向这些文件夹的符号链接，替换 SDK 安装目录中的“apps”文件夹。[*标题为“您的 Windows IDE 很糟糕？*](http://www.peterfriese.de/your-windows-ide-sucks-replace-it-with-your-favorite-editor-on-the-mac/) ”的文章对此过程进行了快速概述。[*在 Mac 上用您最喜欢的编辑器替换它！*](http://www.peterfriese.de/your-windows-ide-sucks-replace-it-with-your-favorite-editor-on-the-mac/)

## 部署

三星智能电视有一个内置的开发者帐户，允许您从计算机发送应用程序，以便在电视本身上进行实时测试。您输入部署服务器的 IP 地址，电视将在该服务器上查找名为*widgetlist.xml*的文件。格式示例如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<rsp stat="ok">
  <list>
    <widget id="MyTVApp">
      <title>MyTVApp</title>
      <compression size="3383543" type="zip"/>
      <description>A basic application for Samsung TVs</description>
      <download>http://192.168.1.83/Widget/MyTVApp_0.1_America_20120709.zip</download>
    </widget>
  </list>
</rsp> 
```

之后，它将下载使用`<download>`标签中的 URL 列出的每个应用程序。您所要做的就是压缩文件，相应地修改*widgetlist.xml*并确保这两个文件都托管在您机器上运行的 Web 服务器中。你可以使用 Apache、lighttpd 或任何东西。我有一个小型 node.js/connect 应用程序，它将根据我在标记为*deploy的目录中的 zip 文件动态构建**widgetlist.xml*。

 *所以你有它。没有 Windows，三星智能电视应用程序的开发并非不可能。事实上，有很多可用的选项。万岁！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-16T15:32:17.137

他们现在发布了 Smart TV SDK 4.0，其中包括对 Linux 和 Mac OS X 的支持：http: [//www.samsungdforum.com/SamsungDForum/NewsView?newsID=27](http://www.samsungdforum.com/SamsungDForum/NewsView?newsID=27)

“除了基于 Eclipse 的应用程序编辑器之外，还发布了一个新的基于 Linux 的模拟器。
这个模拟器在一个 Ubuntu 虚拟机中执行，该虚拟机在 Virtual Box 虚拟化工具中运行。”

■ Linux 上 2013 平台的功能（第一版）

*   应用程序框架
*   应用引擎/WebKit
*   UniPlayer
*   SEF（服务扩展框架）

您需要注册到三星 D 论坛，然后您可以从[https://www.samsungdforum.com/Devtools/SdkDownload下载 SDK](https://www.samsungdforum.com/Devtools/SdkDownload)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-11-04T13:42:06.953

我在任何答案中都没有提到的一个提示是，电视将尝试在下载应用程序的机器的端口 45634 上打开套接字连接（带有 widgetlist.xml 的机器）。

所有调试（alerts() 调用）都将通过此端口发送，从而允许远程调试。

我使用 NetCat 打开一个端口并转储所有日志，如下所示：

```
nc -l 45634 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-22T11:59:03.323

我已经为一个我一无所知的主题创建了这个答案，但尽管如此，我确实发现了一些向我的方向投掷红旗的东西......*[赏金](/questions/tagged/bounty "显示标记为“赏金”的问题")与否。*

首先，我查看了您的[**WineHQ 错误报告**](http://bugs.winehq.org/show_bug.cgi?id=32414)以查看此问题是否已解决，但在撰写本文时仍处于未决状态。我注意到错误报告有一个指向我点击并关注[**的讨论的参考链接。**](http://forum.winehq.org/viewtopic.php?f=8&t=17835)

`machine-code generated dump-error`在*那个讨论*中查看证明信息丰富。

*参考：*

> Z:\home\andy.wine\drive_c\Program Files (x86)\Samsung\Samsung TV SDK(3.5.2)\Emulator\Emulator2012_v3.5\bin\Emulator2.exe

以上`Path`是导致转储的文件的位置。*那条路径是我提到的危险信号。*

让我稍微备份一下，解释一下我学到了什么`Windows XP SP3`，`IE8`哪些很可能适用于这里，或者你可以跳到带有粗体文本的那一行。

我参与了一个网页项目，该项目使用了一个名为`Shadowbox`. 该项目不在本地服务器上，只是在*subfolder 的子文件夹中*。它在 Firefox 和 Chrome 中运行良好，但 IE 阻塞并且*没有*从插件样式表中呈现任何 CSS。因为我对 Shadowbox 非常熟悉，所以我 100% 确信它*不是插件*。于是我开始跳出思维*定*势，*历尽千辛万苦*才发现，罪魁祸首就是*真正的路径*！

我为在 中使用的项目创建了一个子文件*夹*，这就是破坏。一旦我删除了*括号*，CSS 就被正确加载了。同样的解决方案也是导致使用 的论坛成员出现 CSS 问题的原因，因此*可以想象这些问题也与 Wine 有关*。`/test(v1)/``Path``IE8`*`Vista and IE9`*

 **那是什么问题？它在路径名中使用了**非法字符**，*括号。*我会停下来，只说 URL 名称，因为它是通向文件的文件路径`index.html`（*并且在编码中只使用了相对路径 - 括号不能被转义 - 并且基本标记失败*）。

Firefox 和 Chrome 是宽容的，但不是 IE。即使您可能没有使用 IE，这个问题也可能超出此范围。

我的解决方案是不要使用**`parentheses`**或**`whitespaces`**在文件路径的任何部分中使用。虽然这可能无法解决这个特定的错误，但至少您不会遇到 Wine 沙盒问题，因为这`file path`会成为`URL path`任何要求（*例如，访问 SWF 对象以用作视频播放器*）。如果 IE 浏览器是无情的，那么其他嵌入式浏览器或编程模块也是如此。

*受到推崇的：*

> Z:\home\andy.wine\drive_c\Samsung\Samsung_TV SDK_3.5.2\Emulator\Emulator2012_v3.5\bin\Emulator2.exe

请注意，上述内容不使用该`Program Files (x86)`文件夹，因为无法根据操作系统要求更改该文件夹。拥有这样的路径肯定会减少（如果不能消除）任何不可预见的错误。干杯!

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-01-21T20:15:14.810

我知道这是一个老问题，但由于我正在研究这个过程，我想我会分享一些链接。享受！

关于智能电视平台开发的体面快速入门指南：http: [//www.samsungdforum.com/Guide/c02/index.html](http://www.samsungdforum.com/Guide/c02/index.html)。

这些是最低项目要求和一些示例文件： http: [//www.samsungdforum.com/Guide/art00011/index.html](http://www.samsungdforum.com/Guide/art00011/index.html)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-25T03:41:56.773

对于喜欢用命令行做任何事情的人，smarttvjs ( [http://smarttvjs.org](http://smarttvjs.org) ) 让它变得非常简单：

*   $smarttvjs init #创建示例项目
*   ... 做一些开发（IDE 也不是必需的）
*   $smarttvjs build samsung（为三星创建包）
*   $smarttvjs 运行三星#launch 模拟器***

# android - 如何在android中获取应用程序大小

> ID：12766657
> 
> 赞同：0
> 
> 时间：2012-10-07T06:30:46.440
> 
> 标签：android

我进行了很多搜索，但我没有找到任何获取应用程序大小的最佳解决方案。我们可以通过aidl (IPackageStatsObserver.class,PackageStats) 获取应用程序大小。但我没有这样做。通过aidl 获取应用程序大小是否合法。

任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T06:45:52.577

如果您查看[ManageApplications.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/2.2_r1.1/com/android/settings/ManageApplications.java)，您会发现它们使用了 PackageManager 的隐藏 getPackageSizeInfo 方法。这不是公共 API 的一部分，因此您不应该真正使用它。

[这是](https://stackoverflow.com/questions/1806286/getting-installed-app-size)一个不应该使用它的示例！

# jquery - 重写我制作的.filter代码

> ID：12766659
> 
> 赞同：0
> 
> 时间：2012-10-07T06:31:31.140
> 
> 标签：jquery, find

```
$(document).ready(function() { 
var $a = $('.post td span a'); 
$a.filter(':contains("TheGamer")').closest('td').removeClass('row1 row2').next('td').removeClass('row1 row2').closest('tr').addClass('manager'); 
 }); 
```

嘿家伙只是想知道你是否可以帮助我重写这段代码。

它适用于它所写的内容，但现在我想做一些完全不同的事情！

而不是 :contains 文本字符串，我想找到内联样式，然后按照它的要求做。

```
<span style="color:#0000ff;">TheGamer</span> 
```

我不太了解所有 .find/.attr/.css()

因此，如果有人可以帮助我，那就太棒了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T06:44:19.363

```
 var target = $('span[style]'); 
```

将为您提供所有`span`具有 set 属性的 s `style='...'`。

# sql - 您将如何添加只有一组值选择的列？

> ID：12766666
> 
> 赞同：13
> 
> 时间：2012-10-07T06:32:49.993
> 
> 标签：sql, sql-server, tsql

如果我想添加一个只能是两个值的列，例如，一个名为“性别”的列，其中有两个可能的选项“男性”或“女性”

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-07T06:34:29.000

采用**[`CHECK`](http://msdn.microsoft.com/en-us/library/ms188258%28v=sql.105%29.aspx)**

```
Gender VARCHAR(6) NOT NULL CHECK (Gender IN ('Male', 'Female')) 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!3/03347)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T10:25:10.337

我可能想使用位字段类型，并且不允许空值，因此该值只能是 0 或 1（真/假）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T06:43:45.400

```
 create table abc (
 Gender Varchar(10) check (gender in ('Female','Male')) 
```

# dns - 尝试在应用设置中将其添加到我的应用时一直说无效域

> ID：12766670
> 
> 赞同：1
> 
> 时间：2012-10-07T06:33:42.293
> 
> 标签：dns, facebook-apps

当我尝试在我的应用程序的基本配置中将我的域和网站添加到我的应用程序时，它一直告诉我它是无效域，但它应该可以工作，它曾经...

我尝试将其放入“App Domains”和“Site Url”字段但收到此错误...

“错误应用程序域：illmethods.com 不是有效域。站点 URL 不是有效 URL。”

应用名称是 IllMethods

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:02:53.167

如果您询问`com`权威 DNS 服务器，您会得到这些 NS 记录和相关的粘合 (A) 记录：

```
$ dig +norecurs +noall +auth +answer +additional illmethods.com @a.gtld-servers.net
illmethods.com.     172800  IN  NS  ns1.illmethods.com.
illmethods.com.     172800  IN  NS  ns2.illmethods.com.
ns1.illmethods.com. 172800  IN  A   203.97.122.126
ns2.illmethods.com. 172800  IN  A   125.236.226.87 
```

但如果你问`ns1.illmethods.com`，“ns1.illmethods.com”的 A 记录与上面的不同：

```
$ dig +norecurs +noall +answer +additional illmethods.com @ns2.illmethods.com
illmethods.com.     14400   IN  A   125.236.226.87
ns1.illmethods.com. 14400   IN  A   125.236.226.87
ns2.illmethods.com. 14400   IN  A   125.236.226.87 
```

所以“ns1”和“ns2”本质上是指向同一个IP。

我认为这个问题是几个因素的结果：

*   负缓存。如果您的服务器在某个时候出现故障，则 Facebook 的上游 DNS 可能已将否定响应缓存了一段时间。
*   注册商指定的名称服务器的 A 记录与您托管的区域中的内容不一致。
*   Facebook 在查询 DNS 时可能有一个非常短的超时，因为 ns1 实际上无法访问（至少现在从我所在的位置），它可能会在尝试其他 IP 之前超时。

因此，我建议您在注册商处删除 ns1.illmethods.com，然后在您的区域中删除相同的 NS 记录。然后，至少等待一个小时（如果您想更加确定，请等待 24 小时，因为您已在 SOA 最小值字段中指定了 86400）并重试。

您还应该使用 Sean Kinsey 提供的 dnscheck 链接来确保您的区域没有错误，因为在存在缓存和不同的 DNS 解析器实现的情况下，这些错误变得难以诊断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T09:07:59.983

没有为该域列出有效的 NS 服务器，因此 Facebook 可能无法验证它。目前它有 ns1.illmethods.com 和 ns2.illmethods.com，但这会导致捕获 22，因为您需要 NS 服务器的 IP 才能查找 NS 服务器的 IP ...

有关更多信息，请参阅[http://dnscheck.pingdom.com/?domain=illmethods.com](http://dnscheck.pingdom.com/?domain=illmethods.com)。

# javascript - 如何在 iPad Safari 上的只读 html 元素中启用用户选择？

> ID：12766671
> 
> 赞同：8
> 
> 时间：2012-10-07T06:33:58.707
> 
> 标签：javascript, html, ipad, mobile-webkit

我在 iPad 上的网页中有一个 HTML 元素，它必须是只读的，以防止用户更新内容，使用`readOnly='readOnly'`会使元素无法选择，并且根本无法复制元素的文本内容。

有什么方法可以使元素只读并且用户可以选择/复制文本内容？？？？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-07T08:10:21.147

只是我删除了`readOnly`属性并添加了以下`onkeydown`和`oncut`事件来模拟`readOnly`行为

```
<input type="textarea" 
    onkeydown="event.preventDefault();event.stopPropagation();return false;" 
    oncut="event.preventDefault();event.stopPropagation();return false;"> 
```

# java - Java 用于单独程序参数的单独日志文件

> ID：12766681
> 
> 赞同：1
> 
> 时间：2012-10-07T06:35:43.713
> 
> 标签：java, logging, log4j, fileappender

我有一个文件，它根据传递给它的命令行参数将 SMS 发送到不同的移动网络。沃达丰、3 网络、T-Mobile、O2.. 等。所以，当争论通过时

```
$Run SMSDaemon 3Network  // sends sms to 3 networks's mobile users
$Run SMSDaemon Vodafone  // sends sms to Vodafone  mobile users
$Run SMSDaemon TMobile  // sends sms to TMobile  mobile users
$Run SMSDaemon O2    // sends sms to O2 mobile users 
```

现在，我想为单独的网络创建一个单独的日志文件，这样我就可以根据移动网络分别获得日志信息、调试消息。

因为，我只有一个文件 SMSDaemon 我已经尝试了以下但它没有写入任何文件。它只写入已在 log4j.properties 文件中定义的文件。所以，我很困惑在 log4j.properties 中写什么以及在这个 java 文件中写什么？

```
public static void main(String[] args) {
if( args.length != 1  {  return;}
networkUnique = args[0];
setLogProps(networkUnique);
//other codes and in setLogProps method 

private static void setLogProps(String networkUnique)
{
log = Logger.getLogger(networkUnique);
Properties logprops=new Properties();
logprops.setProperty("log4j.appender.file","org.apache.log4j.FileAppender");
logprops.setProperty("log4j.appender.file.maxFileSize","300MB");
logprops.setProperty("log4j.appender.file.maxBackupIndex","100");
logprops.setProperty("log4j.appender.file.File","/etc/sms/"+networkUnique+".log");
logprops.setProperty("log4j.appender.file.threshold","debug");
logprops.setProperty("log4j.appender.file.layout","org.apache.log4j.PatternLayout");
logprops.setProperty("log4j.appender.file.layout.ConversionPattern","%d [%t] %-5p  [%-35F : %-25M : %-6L] %-C -%m%n"); 
logprops.setProperty("log4j.appender.stdout","org.apache.log4j.FileAppender"); 
PropertyConfigurator.configure(logprops); 
log.info("Log message Starting for "+ networkUnique);
} 
```

在 log4j.properties 文件中写入以下内容。所有日志都写入此属性中定义的 network.log 文件。这不符合我的要求。我需要在 SMSDaemon setLogProps 方法中定义的单独网络的单独日志。

```
# Define the root logger with appender file
#log = /etc/sms/
log4j.rootLogger = info, FILE

# Define the file appender
log4j.appender.FILE=org.apache.log4j.FileAppender
#log4j.appender.FILE.File=${log}/network.log

# Define the layout for file appender
log4j.appender.FILE.layout=org.apache.log4j.PatternLayout
log4j.appender.FILE.layout.conversionPattern=%m%n 
```

请建议。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T06:47:00.983

您需要创建不同的附加程序来实现目标。试试这个配置：

```
<appender name="3Network" class="org.apache.log4j.FileAppender">
    <param name="file" value="logs/3Network.log" />
    <param name="append" value="true" />        
</appender> 
<appender name="Vodafone" class="org.apache.log4j.FileAppender">
    <param name="file" value="logs/Vodafone.log" />
    <param name="append" value="true" />        
</appender> 
<appender name="TMobile" class="org.apache.log4j.FileAppender">
    <param name="file" value="logs/TMobile.log" />
    <param name="append" value="true" />        
</appender> 
```

你也可以这样写：

```
log4j.appender.TMobile=org.apache.log4j.FileAppender
log4j.appender.TMobile.File=logs/TMobile.log.. 
```

等等..

希望这将帮助您解决问题。另请参阅 -[参考](https://stackoverflow.com/questions/9652032/how-can-i-create-2-separate-log-files-with-one-log4j-config-file)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T06:49:24.793

我建议`Logger`根据您的网络创建不同的类，例如

```
 class com.netwrok.Network1Logger{
          public void logMessage(String className, String message, String Level);
     }

     class com.netwrok.Network2Logger{
          public void logMessage(String className, String message, String Level);
     } 
```

然后更新`log4j.properties`如下：

```
 # Root logger option
    log4j.rootLogger=INFO, RootFileAppender

    #Network1 Logger option
    log4j.logger.com.netwrok.Network1Logger=INFO,Network1FileAppender

    #Network2 Logger option
    log4j.logger.com.netwrok.Network2Logger=INFO,Network2FileAppender

    # RootFileAppender - used to log messages in the root.log file.
    log4j.appender.RootFileAppender=org.apache.log4j.FileAppender
    log4j.appender.RootFileAppender.File=root.log
    log4j.appender.RootFileAppender.MaxFileSize=100MB
    log4j.appender.RootFileAppender.layout=org.apache.log4j.PatternLayout
    log4j.appender.RootFileAppender.layout.ConversionPattern= %5p [%t] (%F:%L) - %m%n

    # Network1FileAppender- used to log messages in the shunted.log file.
    log4j.appender.Network1FileAppender=org.apache.log4j.FileAppender
    log4j.appender.Network1FileAppender.File=shunted.log
    log4j.appender.Network1FileAppender.MaxFileSize=10MB
    log4j.appender.Network1FileAppender.layout=org.apache.log4j.PatternLayout
    log4j.appender.Network1FileAppender.layout.ConversionPattern= %5p [%t] (%F:%L) - %m%n

    # Network2FileAppender- used to log messages in the shunted.log file.
    log4j.appender.Network2FileAppender=org.apache.log4j.FileAppender
    log4j.appender.Network2FileAppender.File=shunted.log
    log4j.appender.Network2FileAppender.MaxFileSize=10MB
    log4j.appender.Network2FileAppender.layout=org.apache.log4j.PatternLayout
    log4j.appender.Network2FileAppender.layout.ConversionPattern= %5p [%t] (%F:%L) - %m%n 
```

如果您不希望，根记录器，请将其关闭。

# android - TTS 安卓 4.1 软糖

> ID：12766685
> 
> 赞同：4
> 
> 时间：2012-10-07T06:37:07.503
> 
> 标签：android, text-to-speech

我为 TTS 安装了英语数据并且它可以工作，但是在调用时

```
tts.isLanguageAvailable(Locale.ENGLISH) 
```

在 android 4.1 上总是返回 -2 (CHECK_VOICE_DATA_MISSING_DATA)。我发现使用nexus 7平板电脑使其通过测试的唯一方法是安装所有其他TTS数据文件，法语，意大利语等，然后它会报告正确的结果。我现在向用户显示一条消息以安装文件，并且未显示安装英语的选项，因为它已经安装，换句话说，现在每次使用该应用程序时都会显示此消息，这显然很烦人。

安卓[问题](http://code.google.com/p/android/issues/detail?id=36430)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:56:38.223

尝试检查 Locale.US 或 Locale.UK

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T05:16:01.560

`Locale.US` stands for US English ("en_US"). Try to pass just "en":

```
 tts.isLanguageAvailable(new Locale("en")); 
```

# javascript - 使用 Javascript 将禁用的输入字段转换为只读输入字段

> ID：12766686
> 
> 赞同：3
> 
> 时间：2012-10-07T06:37:20.860
> 
> 标签：javascript, html, css, disabled-input

我在 IE 中的表单有问题。我在表单中禁用了字段，即 具有属性的字段`disabled="disabled"`。这些字段以灰色显示输入文本，看起来非常暗淡/模糊，如果我尝试对这些字段应用 css 更改，它将不适用于 IE，但适用于其他浏览器，如 chrome、firefox。

有什么方法可以使文本在这里更好地字体颜色？

我认为这样做的一种方法是删除属性并使用 javascript`disabled="disabled"`添加属性。`readonly="readonly"`如果这是可能的，那么我怎么能用 Javascript 做到这一点。我是 Javascript 新手，所以请帮助我

下面的 HTML 来解释行为。在 IE 和其他浏览器中运行它以查看差异。

```
<html>
    <head>
        <style type="text/css">

            .col {
                background-color: yellow; 
                color: red;
            }

        </style>
    </head>
    <body>
        <table>
            <tr>
                <td>Editable field: </td>
                <td>
                    <input type="text" id="editable-field-id" value="Editable field" class="col"/>
                </td>
            </tr>
            <tr>
                <td>Disabled field: </td>
                <td>
                    <input type="text" disabled="disabled" id="disabled-field-id" value="Disabled field" class="col" />
                </td>
            </tr>
            <tr>
                <td>Readonly field: </td>
                <td>
                    <input type="text" readonly="readonly" id="readonly-field-id" value="Readonly field" class="col"/>
                </td>
            </tr>
        </table>
    </body>
</html> 
```

我在 IE9 中测试这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-25T04:37:56.647

`.prop()`您可以使用jQuery 中提供的方法将禁用的输入字段更改为只读字段。我通常不鼓励使用`.attr()`，[这就是为什么](https://stackoverflow.com/questions/5874652/prop-vs-attr)。

```
$(function (){
    $('input').prop({
        'disabled': false,
        'readonly': true
    });
}); 
```

尽管该方法`.removeProp()`可用，但[文档鼓励在使用它时不要使用它](http://api.jquery.com/removeProp/)，因为引用它“将完全删除该属性，并且一旦删除，就无法再次将其添加到元素中。用于`.prop()`将这些属性设置为 false。”

在此处查看演示：http: [//jsfiddle.net/teddyrised/tE98z/](http://jsfiddle.net/teddyrised/tE98z/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T06:45:23.127

```
<html>
    <head>
        <style type="text/css">

            .col {
                background-color: yellow; 
                color: red;
            }

        </style>

    </head>
    <body>
        <table>
            <tr>
                <td>Editable field: </td>
                <td>
                    <input type="text" id="editable-field-id" value="Editable field" class="col"/>
                </td>
            </tr>
            <tr>
                <td>Disabled field: </td>
                <td>
                    <input type="text" disabled="disabled" id="disabled-field-id" value="Disabled field" class="col" />
                </td>
            </tr>
            <tr>
                <td>Readonly field: </td>
                <td>
                    <input type="text" readonly="readonly" id="readonly-field-id" value="Readonly field" class="col"/>
                </td>
            </tr>
        </table>
        <script type = "text/javascript">
            document.getElementById("disabled-field-id").disabled = false;
            document.getElementById("disabled-field-id").readOnly = true;
        </script>

    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T06:43:07.077

```
document.getElementById("your_field").readOnly=true; 
```

或者，使用 jQuery：

```
$('#your_field').attr('readonly', true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-08T16:58:22.563

使用 setAttribute 属性。请注意，在示例中，如果选择 1 在文本框上应用只读属性，否则删除属性只读。

[http://jsfiddle.net/baqxz7ym/2/](http://jsfiddle.net/baqxz7ym/2/)

```
document.getElementById("box1").onchange = function(){
  if(document.getElementById("box1").value == 1) {
    document.getElementById("codigo").setAttribute("readonly", true);
  } else {
    document.getElementById("codigo").removeAttribute("readonly");
  }
};

<input type="text" name="codigo" id="codigo"/>

<select id="box1">
<option value="0" >0</option>
<option value="1" >1</option>
<option value="2" >2</option>
</select> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-18T15:16:57.460

如果您以编程方式禁用输入，则可以根据需要设置样式

试试看：

```
 //bloqueo todos los radiobuttons y checkboxs
  //block all radiobuttons and checkbox
    jQuery(document).on("change", 'input:checkbox.yourClass,input:radio.yourClass', function () {
    jQuery(this).prop("checked", false);
  });
  //bloqueo campos de texto
  //block all text fields
  jQuery(document).on("focusin", 'input.yourClass, textarea.yourClass', function () {
    jQuery(this).blur();
  });
  //bloqueo selects
  //block all selects
  jQuery(document).on("focusin", 'select.yourClass', function (event) {
    var $selectDiabled = jQuery(this).attr('disabled', 'disabled');
    setTimeout(function(){ $selectDiabled.removeAttr("disabled"); }, 30);
  }); 
```

如果您想设置样式，它们在技术上不会被禁用

这里可以看到原代码：[https ://jsfiddle.net/9kjqjLyq/](https://jsfiddle.net/9kjqjLyq/)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-07T07:09:19.413

您需要依赖纯 javascript（最好是 jQuery）解决方案。

为所有控件添加自定义属性：

```
<input type="text" disabled="true" /> 
```

现在您可以检查它们是否被禁用，并且可以继续使用 javascript 阻止它们：

```
var value = yourTextBox.value;    //the last value that the control holds,
                                  //before it was disabled?

$('yourTextBox').click(function() {
    value = $(this).value;
});

$('yourTextBox').blur(function() {
    if($(this).attr('disabled') == 'true')
        $(this).value = value;
}); 
```

要增加更严格，请添加另一个函数：

```
$('yourTextBox').keypress(function() {
    if($(this).attr('disabled') == 'true')
        $(this).value = value;
}); 
```

* * *

如果你想要一些简单的东西，我会推荐这个：

```
$('yourTextBox').keypress(function() {
    if($(this).attr('disabled') == 'true')
        return false;
}); 
```

# ruby-on-rails - 尝试保存时 WHERE 条件无效

> ID：12766689
> 
> 赞同：2
> 
> 时间：2012-10-07T06:37:40.327
> 
> 标签：ruby-on-rails, ruby, save, where

我正在开发一个使用多对多关系的 Rails 应用程序，它需要连接表上的额外属性（除了两个相关实体的 id）。

在模型中，一个产品可以属于多个订单，一个订单可以有多个产品。所以我创建了一个将产品分配给给定订单的操作，称为`add_product_order`，并且在发送表单时处理表单的控制器方法是`finish_add_product_order`：

```
def finish_add_product_order
  @order = Order.find(params[:id])
  @product = Product.find(params[:order][:products])

  if @op = OrdersProduct.find_by_order_id_and_product_id(@order.id, @product.id)
    @op.quantity = params['quantity'][0]
  else
    @op = OrdersProduct.new(:order => @order, :product => @product, :quantity => params['quantity'][0])
  end

  respond_to do |format|
    if @op.save
      format.html { redirect_to @order, notice: 'Order was successfully updated.' }
      format.json { head :no_content }
    else
      format.html { render action: "add_product_order", notice: 'No se ha podido grabar.' }
      format.json { render json: @order.errors, status: :unprocessable_entity }
    end
  end
end 
```

orders_products 表（用于存储相关的 id 和数量）具有以下索引：

```
add_index :orders_products, [:order_id, :product_id], :unique => true 
```

如果产品尚未在订单中（即`OrdersProduct.new`正在调用），则上述操作 (finish_add_product_order) 可以正常工作。**但这是我在它已经存在时得到的错误，我尝试保存它**：

```
SQLite3::SQLException: no such column: orders_products.: UPDATE "orders_products" SET "quantity" = 4 WHERE "orders_products"."" IS NULL 
```

请求参数如下，以防万一：

```
{"utf8"=>"✓",
 "_method"=>"put",
 "authenticity_token"=>"TwPMk73MhCM2IeMfmf2g/fdm3+ahpyaxs1InULC/8ig=",
 "order"=>{"products"=>"4"},
 "quantity"=>["4"],
 "commit"=>"Update Order",
 "id"=>"2"} 
```

我相信 WHERE 子句应该同时包含订单和产品 ID，以便识别受影响的行，但我不知道为什么不包含列名，也不知道为什么它以“IS NULL”结尾。

有什么建议么？谢谢

**编辑**

这是涉及的三个类的代码：

```
class Order < ActiveRecord::Base
  belongs_to :user

  has_many :gardens, :dependent => :destroy

  has_many :products, :through => :orders_products
  has_many :orders_products

  attr_accessible :address, :delivery_date, :paid, :user, :orders_products_attributes

  # hid some irrelevant methods
end

class Product < ActiveRecord::Base
  has_many :gardens, :through => :gardens_products
  has_many :gardens_products

  has_many :orders, :through => :orders_products
  has_many :orders_products

  attr_accessible :cost, :description, :stock, :title, :x_size, :y_size, :pivot_x_position, :pivot_y_position, :is_gallery_product

  validates_presence_of :cost, :stock, :title, :x_size, :y_size, :pivot_x_position, :pivot_y_position
  validates_numericality_of :cost, :stock, :x_size, :y_size, :pivot_x_position, :pivot_y_position, :only_integer => true, :message => "Solo puede ser un numero entero"
  validates_inclusion_of :cost, :in => 0..1000000, :message => "Solo puede estar entre 0 y 1 000 000"
  validates_inclusion_of :stock, :in => 0..10000000, :message => "Solo puede estar entre 0 y 10 000 000"
  validates_inclusion_of :x_size, :y_size, :in => 1..200, :message => "Solo puede estar entre 0 y 200"
  # Poner el rango variable en los pivotes (dentro del rango del tamano)
  validates_inclusion_of :pivot_x_position, :in => 1..200, :message => "El pivote debe estar dentro de las dimensiones del producto"
  validates_inclusion_of :pivot_y_position, :in => 1..200, :message => "El pivote debe estar dentro de las dimensiones del producto"
  validates :title, :length => { :minimum => 5},
                            :presence => { :message => "Debe tener un titulo de largo mayor que 5 caracteres" }
end

class OrdersProduct < ActiveRecord::Base
  belongs_to :order, :dependent => :destroy
  belongs_to :product

  attr_accessible :order, :product, :quantity

  validates_numericality_of :quantity,
                            :only_integer => true,
                            :message => "solo puede ser un numero entero"
  validates_inclusion_of :quantity,
                            :in => 1..1000,
                            :message => "solo puede estar entre 1 y 1 000"
end 
```

再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T07:09:28.977

将此 find 调用“ `find_by_order_id_and_product_id`”替换为“ `where`”调用，并通过调用获取返回对象的第一个对象`Relation`。`first`.

```
 if @op = OrdersProduct.where(:order_id => @order.id, :product_id => @product.id).first
    @op.quantity = params['quantity'][0]
  else
    @op = OrdersProduct.new(:order => @order, :product => @product, :quantity => params['quantity'][0])
  end 
```

让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T03:01:12.063

由于创建的 orders_products 表没有 id（带有`create_table :orders_products, :id => :false do |t|...`），所以我所要做的就是向它添加一个 id，通过这个迁移：

```
class AddIdToOrdersProduct < ActiveRecord::Migration
  def change
    add_column :orders_products, :id, :primary_key
  end
end 
```

这样，它在做之后就起作用了 `rake db:migrate`。

# c# - 如何从 NSIS 获取错误消息到 .NET

> ID：12766693
> 
> 赞同：0
> 
> 时间：2012-10-07T06:39:08.353
> 
> 标签：c#, .net, nsis

我有一个运行 NSIS 文件并执行它们的 .NET 应用程序，在 Windows XP 上我遇到了一个问题，即这个窗口，每次运行文件时都会出现

使用 Windows 7 更容易，因为如果 .NET 进程以管理员身份运行，则该窗口不会显示，但在 XP 中令人头疼，我只需要解决其中一个问题，如果我可以阻止此窗口从一直显示？或者我可以从 NSIS exe 文件中读取它的输出，这样 .NET 就会发现存在问题。

我试过点击取消，它使.NET抛出异常，这很好，我可以处理，但不删除“保护我的电脑......”上的标记会导致大问题。

这是图片链接： [https ://docs.google.com/open?id=0B5MtsIuVfrsYT2F1OGZUdHdMSDg](https://docs.google.com/open?id=0B5MtsIuVfrsYT2F1OGZUdHdMSDg)

![在此处输入图像描述](../Images/4aa1c0df00195c888dbafba4ad8655cf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:21:42.060

问题出在 runas 动词上，我们可以删除它，如果它不是以管理员身份运行，我们应该结束程序，我们可以使用此功能测试应用程序是否以管理员权限运行

```
[DllImport("shell32.dll", SetLastError = True)]
return: MarshalAs(UnmanagedType.Bool)
static extern bool IsUserAnAdmin(void); 
```

[http://www.pinvoke.net/default.aspx/shell32.IsUserAnAdmin](http://www.pinvoke.net/default.aspx/shell32.IsUserAnAdmin)

问候，

# openlaszlo - Openlaszlo 拖动问题

> ID：12766694
> 
> 赞同：1
> 
> 时间：2012-10-07T06:39:22.013
> 
> 标签：openlaszlo, lzx

我试图将一个视图拖到另一个包含 html 的视图。但由于某种原因，我无法拖动 html。谁能告诉我这段代码有什么问题。

```
<canvas>
<include href="iFrame.lzx"/> 

<view y="5" width="100" height="50" bgcolor="green">
<handler name="oninit">
this.bringToFront();
</handler>
        <dragstate name="drg"/>
        <text width="100%" bgcolor="gray" onmousedown="parent.drg.apply()" onmouseup="parent.drg.remove()">Drag me</text>

    </view>

<view y="150" width="100%" height="300" bgcolor="blue" >
        <html id="htdevice" src="http://www.openlaszlo.org" x="15" y="15" width="${parent.width - 30}" height="${parent.height - 30}"/>

    </view>
</canvas> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:13:12.513

您在文本标签上编写了鼠标事件侦听器将鼠标放在文本上，然后您可以轻松拖动或为视图标签编写鼠标事件侦听器，然后您可以通过将鼠标指针放在视图上的任何位置来拖动视图（绿色）

# dart - pub install 在 Dart 中不起作用

> ID：12766696
> 
> 赞同：0
> 
> 时间：2012-10-07T06:39:49.567
> 
> 标签：dart

我正在尝试`glmatrix`使用 pub install 进行安装。我的操作系统是 Windows 7，我安装了 Git。

这是我的`pubspec.yaml`

```
name:  WebGLTut1
description:  A sample application
dependencies: 
glmatrix: 
git: git://github.com/pjako/glmatrix.dart.git 
```

当我运行时，`pub install`我收到以下错误：

> 运行 pub install ... Pub 安装失败，FormatException：无法解析“git://github.com/pjako/glmatrix.dart.git”。

我用谷歌搜索了一段时间以找到解决方案，但找不到。请帮忙。

**更新#1：** 我发现了问题。如下指定`git:`url时必须有一个 TAB/空格。`pubsec.yaml`

```
 glmatrix:
      git: git://github.com/pjako/glmatrix.dart.git 
```

这样就解决了之前的问题`FormatException`。但是现在当我`pub install`再次运行时，它会抛出错误。

> 运行 pub install ... Pub 安装失败，Git 失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T12:05:35.407

当您确定更新时，yaml 文件对空格敏感；这就是为什么你不必使用很多像 json 这样的花括号。:)

我在这里看到了一些可能的问题：

**第一的**

Glmatrix 似乎没有定义自己的 pubspec。参与包系统的库会声明一个定义了 name 属性的 pubspec 文件。该名称很重要，因为 pub 在您声明依赖项时使用它。假设您有一个名为**toast**的项目，其中包含以下简单的 pubspec：

```
name: butter
version: 0.0.0 
```

然后你需要像这样声明你对那个项目的依赖：

```
dependencies:
  butter:
    git: git://github.com/foo/toast.git 
```

让项目所有者自己进行更改或分叉，添加 pubspec，然后在您的 pubspec 中引用您的分叉。

**第二**

Glmatrix 不符合[pubspec 包布局约定](http://www.dartlang.org/docs/pub-package-manager/package-layout.html)（您自己的项目也应符合此）。尽管我相信 pub 目前可能会处理不合格的布局，但将来可能不会。同样，您可以要求项目所有者修复，也可以自行分叉并修复。

**第三**

由于您在 Windows 上，请确保 git 在您的系统 PATH 变量中。如果你使用的是 bash shell，git 可以工作，但在你将它添加到你的 PATH 之前，它不会在 bash 之外工作（比如从 Dart 编辑器）。

# python - 在 django 模板中访问项目 url

> ID：12766701
> 
> 赞同：1
> 
> 时间：2012-10-07T06:40:37.307
> 
> 标签：python, django, templates

> **可能重复：**
> [我可以从 Django 中的模板访问 settings.py 中的常量吗？](https://stackoverflow.com/questions/433162/can-i-access-constants-in-settings-py-from-templates-in-django)

我正在尝试创建一个模板，其中包含一些超链接和重定向 url。我有单独的生产和登台服务器。我已经尝试过`request.get_full_path`模板，但它呈现的是查询字符串而不是域名。任何想法？

在 settings.py 我做了以下

```
TEMPLATE_CONTEXT_PROCESSORS = (
     "django.core.context_processors.request",
     "django.contrib.auth.context_processors.auth"

     ) 
```

我的模板如下

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
    <input type="hidden" name="cmd" value="_xclick">
    <input type="hidden" name="business" value="sumit_1349250468_per@ersumit.com">
    <input type="hidden" name="item_name" value="registration charge {{ request.session.username }}">
    <input type="hidden" name="item_number" value="{{ request.session.userid }}">
    <input type="hidden" name="amount" value="9.00">
    <input type="hidden" name="no_shipping" value="0">
    <input type="hidden" name="no_note" value="1">
    <input type="hidden" name="currency_code" value="USD">
    <input type="hidden" name="lc" value="AU">
    <input type="hidden" name="bn" value="PP-BuyNowBF">
    <input type="image" src="https://www.paypal.com/en_AU/i/btn/btn_buynow_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online.">
    <img alt="" border="0" src="https://www.paypal.com/en_AU/i/scr/pixel.gif" width="1" height="1">
    <input type="hidden" name="return" value="{{ request.get_full_path}}accounts/success">
    <input type="hidden" name="cancel_return" value="{{ request.get_full_path}}/accounts/sorry">

</form> 
```

**我不想创建任何自定义视图**

# javascript - 尝试使用骨干网从 express.js 中获取数据

> ID：12766714
> 
> 赞同：0
> 
> 时间：2012-10-07T06:43:15.337
> 
> 标签：javascript, rest, backbone.js, express

我正在尝试使用backbone.js 和express.js 构建一个应用程序。我有一个问题要将值从快递返回到主干。我在一个简单的 Curl 请求中遇到了同样的问题（我可以在服务器端显示 req.params 但在客户端无法获取它，即使在其上使用 JSON.stringify() 也是如此）。

我在 php 中用一个简单的 echo json_ecode() 做了同样的代码，它运行良好......

这是服务器端的一个简单测试的代码：

```
var express = require("express");
var app = express();

app.get('/user/:id/:pass', function(req, res){
res.status(200);
res.send({"id": "1"});
}); 
```

在客户端，我没有得到任何成功或错误回调......

```
 var U1 = new User();
    U1.fetch({
            success: function(data) {
              console.log('User fetched.'); 
            },
            error: function(model, error) {
              console.log('user Error: '+error);
            }
    }); 
```

我对 express.js 的回答有什么问题？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:52:15.473

好的，我通过添加`res.header("Access-Control-Allow-Origin", "*");`我的快速路线找到了解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T07:11:12.717

只要 User 模型将其 url 设置为相同的 /user/login/password 那么它应该可以工作，请参阅：[http](http://backbonejs.org/#Model-url) ://backbonejs.org/#Model-url您是否已经在 User 模型上创建了 url 方法？

我在backbone.js 上发布了几篇文章并表达了... [http://www.pixelhandler.com/blog/2012/02/29/backbone-js-models-views-collections-to-present-api-data/](http://www.pixelhandler.com/blog/2012/02/29/backbone-js-models-views-collections-to-present-api-data/)使用来自 express 应用程序的 API 数据的主干示例：http: [//pixelhandler.com/blog/2012/02/09/develop-a-restful-api-using-node-js-with-express-and-mongoose/](http://pixelhandler.com/blog/2012/02/09/develop-a-restful-api-using-node-js-with-express-and-mongoose/)

# doctrine-orm - 学说2数组结果外键

> ID：12766715
> 
> 赞同：1
> 
> 时间：2012-10-07T06:43:26.667
> 
> 标签：doctrine-orm, foreign-keys

有没有办法在 ArrayResult 中获取外键？我有许多对自我的引用的实体。我想要缓存结果，但如果尝试缓存 ResultObject，我会收到关于序列化和 __sleep 的错误。所以，我尝试缓存arrayResult，但外键不显示在数组中。

感谢您的帮助。

# java - 使用java提取google搜索结果

> ID：12766719
> 
> 赞同：-1
> 
> 时间：2012-10-07T06:43:46.740
> 
> 标签：java, google-maps-api-3

有没有办法让我从谷歌搜索中提取前 10 个结果。

示例：如果我在 maps.google.com 中提供“披萨店”，它会在右侧给我一些结果是否有办法获取/提取这些结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T07:25:49.627

**不**，您不应该通过谷歌界面以外的任何其他方式访问数据。

在谷歌的服务条款中规定：

> 5.3 您同意不通过谷歌提供的界面以外的任何方式访问（或试图访问）任何服务，除非您在与谷歌的单独协议中被明确允许这样做。您明确同意不通过任何自动化方式（包括使用脚本或网络爬虫）访问（或尝试访问）任何服务，并应确保您遵守服务中存在的任何 robots.txt 文件中的说明.

# artificial-intelligence - n 谜题解中的空白位置是否会影响有效谜题集？

> ID：12766720
> 
> 赞同：0
> 
> 时间：2012-10-07T06:43:49.880
> 
> 标签：artificial-intelligence, heuristics, sliding-tile-puzzle

我的 n-puzzle 求解器有问题。以为它有效，但事实证明它正在解决无法解决的难题。我试图追踪它，但这是很多追踪，到目前为止我没有看到任何作弊行为。我想我了解确定溶解度的算法，并且我的实现与网络上一些示例的奇/偶校验一致......也就是说，当我计算给定瓷砖之后小于的瓷砖数量时它，对于每个图块，然后添加空白图块的行索引，我得到的奇数或偶数与其他人得到的相同。

于是，我产生了一个念头。在我的 8 谜题模型中，我的解决方案状态是：

```
_ 1 2
3 4 5
6 7 8 
```

而不是

```
1 2 3
8 _ 4
7 6 5 
```

或者

```
1 2 3
4 5 6
7 8 _ 
```

就像在其他一些配方中一样。这会影响哪些谜题是可解的，哪些不是吗？

谢谢！

z。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:11:12.863

一般来说，是的：如果一个配置可以解决到标准解决方案，它就不能解决到一个不可解决的配置。

特别是，它取决于您用作解决方案的确切配置。您将需要检查是否可以从该配置解决到标准配置。

*编辑：* 这样：

设 A 为标准解。让 B 成为您的首选解决方案。让 C 成为您的起始配置。

如果你可以从 A 到 B，你可以从 C 到 A，那么你可以从 C 到 B。但是如果你不能从 A 到 B，而你*可以*从 C 到 A，那么你不能从 C 到 B。

# android - 在 Android 的代码中快速复制位图的最佳方法？

> ID：12766721
> 
> 赞同：0
> 
> 时间：2012-10-07T06:44:11.190
> 
> 标签：android, android-canvas

背景：使用 Canvas、Paint 和 Path 对象，我在画布上绘制了几个几何图形，主要是多边形和圆形。它们占据了大部分 Android 屏幕。

**问题**：使用 Mathematica，我可以使用平移（在 x 和 y 方向）“快速复制”图形，之后生成的图像会自动缩小，以便所有副本都可见。（例如。画一个填满整个屏幕的正方形，用(2,2)复制它，出现四个正方形。） 前提是复制是一个更快的操作。- **Android 上可以进行类似的操作吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T06:57:37.757

没有什么比这更方便的了，但要实现效果，您可以直接绘制位图并重新使用它 - 自己缩放和翻译它。

```
public void onDraw(Canvas canvas) {
    Bitmap bmp = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
    Canvas bmpCanvas = new Canvas(bmp);

    // draw into bmpCanvas
    // ...

    // draw bitmap using
    // public void drawBitmap (Bitmap bitmap, Rect src, RectF dst, Paint paint)
    canvas.drawBitmap(bmp, ...); 
```

# itext - 我将jsp输出文本转换为pdf

> ID：12766724
> 
> 赞同：-1
> 
> 时间：2012-10-07T06:44:41.377
> 
> 标签：itext

我正在尝试使用 itext 将 jsp 输出转换为 pdf 格式

我已经尝试了一些示例，但是它将jsp代码转换为pdf而不是jsp输出在这里是我的代码

```
 import com.lowagie.text.Document;  
 import com.lowagie.text.Paragraph;  
import com.lowagie.text.Rectangle;
import com.lowagie.text.pdf.PdfWriter;  
 import java.io.File;  
 import java.io.FileOutputStream;  
 public class PDFConversion  
 {  

  private void createPdf(String inputFile, String outputFile, boolean isPictureFile)  
 {  

      Rectangle pageSize = new Rectangle(2780, 2525);  
     Document pdfDocument = new Document(pageSize);  
      String pdfFilePath = "C:\\Users\\hp\\Desktop\\jsp_to_pdf.pdf";  
      try  
      {  
          FileOutputStream fileOutputStream = new FileOutputStream(pdfFilePath);  
         //PdfWriter writer = null;  
         PdfWriter writer = PdfWriter.getInstance(pdfDocument, fileOutputStream);  
          writer.open();  
          pdfDocument.open();  

           if (isPictureFile)  
          {  
           pdfDocument.add(com.lowagie.text.Image.getInstance("C:\\Users\\hp\\Documents\\NetBeansProjects\\pdf_print\\web\\example1.jsp"));  
          }  

          else  
          {  
          File file = new File("C:\\Users\\hp\\Documents\\NetBeansProjects\\pdf_print\\web\\example1.jsp");  
          pdfDocument.add(new Paragraph(org.apache.commons.io.FileUtils.readFileToString(file)));  
          }  
          pdfDocument.close();  
          writer.close();  
      }  
      catch (Exception exception)  
      {  
       System.out.println("Document Exception!" + exception);  
      }  
   }  
   public static void main(String args[])  

   {  

    PDFConversion pdfConversion = new PDFConversion();  

     pdfConversion.createPdf("example1.jsp","jsp_to_pdf.pdf", false);  

    }  

 } 
```

谢谢&问候沙达布·阿克拉姆·汗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T06:54:30.310

如果要提供下载 PDF 的功能，获取内容为`byte[]`，然后执行以下操作：

```
response.setHeader("Content-Disposition", "attachment; filename=\"application.pdf\"");
        response.setHeader("Pragma", "public");
        response.setDateHeader("Expires", 0);
        response.setHeader("Cache-Control", "must-revalidate, post-check=0, pre-check=0");
        response.setHeader("Cache-Control", "public");
        response.setHeader("Content-Description", "File Transfer");
        response.setContentType("application/pdf");
        response.getOutputStream().write(pdfBytes); 
```

# xml - 谁能向我解释反序列化如何将 XML 数据转换为对象？

> ID：12766725
> 
> 赞同：1
> 
> 时间：2012-10-07T06:44:40.893
> 
> 标签：xml, vb.net, xml-serialization

我正在做一个项目，我必须将从 XML 文件读取的数据保存到数据库中，我已经在使用我制作的代码，但它有点原始，我正在使用 XMLTextReader 和其他一些方法来导航通过文件上的代码行并读取我想要的数据，但是如果我在我的程序上使用序列化，我已经读过这将是非常“容易”，现在我已经看到了一些这样的例子，老实说还不太了解它们，甚至以前从未听说过它们，所以如果有人可以笼统地向我解释它并提供一个小例子来说明我如何将它应用到我的项目中，那就太好了。

这就是我现在所拥有的：

```
For y As Integer = 0 To 167
            Dim reader1 As XmlTextReader = New XmlTextReader(dir)

            reader1.ReadStartElement("response")
            reader1.ReadToNextSibling("hourly_forecast")
            reader1.ReadStartElement("hourly_forecast")
            reader1.ReadToNextSibling("forecast")
            reader1.ReadStartElement("forecast")

            CurrentLine= reader1.LineNumber
            If CurrentLine= LastLine Then
                reader1.ReadToNextSibling("forecast")
                CurrentLine= reader1.LineNumber
            End If
            While reader1.LineNumber <= LastLine
                For w As Integer = 0 To y
                    reader1.ReadToNextSibling("forecast")
                    CurrentLine= reader1.LineNumber
                Next w
            End While

            LastLine = CurrentLine
            For x As Integer = 1 To 2
                Dim reader As XmlTextReader = New XmlTextReader(dir)

                reader.ReadStartElement("response")
                reader.ReadToNextSibling("hourly_forecast")
                reader.ReadStartElement("hourly_forecast")
                reader.ReadToNextSibling("forecast")
                Do While reader.LineNumber < CurrentLine
                    reader.ReadToNextSibling("forecast")
                Loop
                reader.ReadStartElement("forecast")

                If x = 1 Then
                    reader.ReadToNextSibling("FCTTIME")
                    reader.ReadStartElement("FCTTIME")
                    reader.ReadToNextSibling("hour")
                    values(y, x) = reader.ReadString()
                    d = values(y, x)
                    reader.ReadToNextSibling("year")
                    year = lector.ReadString()
                    reader.ReadToNextSibling("mon_padded")
                    month = reader.ReadString()
                    reader.ReadToNextSibling("mday_padded")
                    day= reader.ReadString()
                    a = year.Chars(2)
                    b = year.Chars(3)
                    c = a + b
                    x = x - 1
                    values(y, x) = day + "-" + month + "-" + c
                    x = x + 1
                End If
                If x = 2 Then
                    reader.ReadToNextSibling("temp")
                    reader.ReadStartElement("temp")
                    reader.ReadToNextSibling("metric")
                    values(y, x) = reader.ReadString()
                End If

            Next x

        Next y 
```

这是我的 XML 的示例：

```
 <response>
  <version>0.1</version> 
  <features>
   <feature>hourly10day</feature> 
  </features>
  <hourly_forecast>
   <forecast>
    <FCTTIME>
     <hour>16</hour> 
     <year>2012</year> 
     <mon_padded>10</mon_padded> 
     <mday_padded>05</mday_padded> 
    </FCTTIME>
    <temp>
     <english>102</english> 
     <metric>39</metric> 
    </temp>
   </forecast>
  </hourly_forecast>
 </response> 
```

现在，这可行，但是我如何将反序列化应用于它？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T07:13:52.807

序列化是“简单的”，因为您可以用几行代码将 XML 转换为对象。但是根据 XML 和/或对象的复杂性，您可能需要进行一些设置（通过向类定义添加属性）才能使序列化成功。

例如，我认为，对您的 XML 进行一些修饰是必要的。这是一组可以代表您的示例 XML 的类的开始：

```
<XmlRoot("response")>
Public Class Response
    <XmlElement("version")>
    Public Property Version As String
    <XmlArrayItem("feature")>
    <XmlArray("features")>
    Public Property Features As List(Of String)
    <XmlElement("hourly_forecast")>
    Public Property HourlyForecast As HourlyForecast
End Class

Public Class HourlyForecast
    <XmlElement("forecast")>
    Public Property Forecast As Forecast
End Class

Public Class Forecast
    <XmlElement("FCTTIME")>
    Public Property FctTime As FctTime
End Class

Public Class FctTime
    <XmlElement("hour")>
    Public Property Hour As String
    <XmlElement("year")>
    Public Property Year As String
    <XmlElement("mon_padded")>
    Public Property PaddedMonth As String
    <XmlElement("mday_padded")>
    Public Property PaddedMonthDay As String
End Class 
```

您会注意到许多属性和其中一个类都用属性修饰。这些属性帮助序列化程序将 XML 中的每个值的位置协调到对象中的适当属性中。通常，人们会将类和属性命名为与 XML 中相同的名称。这样做时，您通常可以逃脱而不必使用属性。在这种情况下，因为 .NET 的做法是对类和属性名称使用 Pascal 大小写，并且因为您的 XML 使用小写字母，所以我插入了属性以正确地将每个 XML 节点与相应的属性/类相关联。如果不这样做，序列化程序将无法正确地将元素映射到对象。

我提到过从 XML 转移到代码中的对象可以用几行代码完成。这可能是这样的：

```
Imports System.Xml.Serialization
Imports System.IO

Module Module1

    Sub Main()
        Dim serializer As New XmlSerializer(GetType(Response))
        Dim reader As New StreamReader("dump.xml")
        Dim instance As Response = serializer.Deserialize(reader)

        reader.Dispose()
    End Sub

End Module 
```

虽然构造表示 XML 的类的代码确实需要几行代码，但这是不可避免的。在你的方法中你会有类似的东西——当然，除了属性。这里的节省是您可以在一次快速调用`Serialize`方法中转换对象。

# jquery - 如何隐藏包装然后自动显示

> ID：12766728
> 
> 赞同：0
> 
> 时间：2012-10-07T06:45:00.327
> 
> 标签：jquery

我需要一些关于如何自动隐藏元素的帮助，然后它将在几秒钟内自动显示在 jquery 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T06:48:24.013

你可以这样做：

```
$('#toHide').delay(2000).hide(0);​ // delay 2 seconds then hide. 
```

*[**现场演示。**](http://jsfiddle.net/GLxMn/)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T06:48:47.943

使用延迟它很简单，并且会完成它

你可以这样使用

```
$('#foo').hide(300).delay(800).show(400); 
```

并检查这个 [http://api.jquery.com/delay/](http://api.jquery.com/delay/)

# mysql - 如何避免数据库中的完整表扫描？

> ID：12766733
> 
> 赞同：2
> 
> 时间：2012-10-07T06:45:58.333
> 
> 标签：mysql, sql, database, select

我想创建一个网站，用户可以在网站上注册并将 20 张图片上传到他们的帐户。（计划未来允许用户上传无限图片）

我在数据库中有两个表。一种用于保存用户数据表名-成员字段-用户ID、用户名、密码、电子邮件。其他用于保存图片路径表名-图片字段-用户ID、图片路径

所以我可以在他的页面中显示用户的图像，从表“图像”搜索图像路径

一切正常。但如果用户数量增长，这将变得更慢。例如 - 如果有 50000 个用户，我应该检查所有行以查找单个用户上传的图像，即；50000 个用户 ID * 20 个图像/用户 = 1000000 次扫描表行 这将使系统变慢并导致过载。我应该怎么做才能避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T06:49:55.900

创建这样的架构，

```
CREATE TABLE dataTable
(
    `userid` INT NOT NULL, 
    `username` VARCHAR(50) NOT NULL, 
    `password` VARCHAR(50) NOT NULL, 
    `email` VARCHAR(50) NOT NULL
    CONSTRAINT tb_pk PRIMARY (`userID`),
    CONSTRAINT tb1_uq UNIQUE (`username`)
);

CREATE TABLE pathTable
(
    `userid` INT NOT NULL, 
    `imagepath` VARCHAR(50) NOT NULL, 
    CONSTRAINT tb_fk FOREIGN KEY  (`userID`) REFERENCES dataTable(`userid`)
); 
```

`userid`将of指定`pathTable`为引用某个表的（*dataTable*）主键的外键，服务器会自动为其编制索引，这将使其搜索速度更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T06:48:29.520

在第二个表中的用户 ID 字段上创建索引。语法： [http ://dev.mysql.com/doc/refman/5.0/en/create-index.html](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)

[在 mysql 中使用 INDEXES 的最大好处是什么？](https://stackoverflow.com/questions/5696897/what-are-the-biggest-benefits-of-using-indexes-in-mysql)

# php - Wordpress 显示缩略图不正确

> ID：12766749
> 
> 赞同：0
> 
> 时间：2012-10-07T06:49:16.443
> 
> 标签：php, wordpress

对于我上传到 Wordpress 的所有图片，我都会得到这样的图片链接：

```
src='http://myblog.com/wp-content/themes/mytheme/thumb.php?src=wp-content/uploads/2012/06/mypic.jpg&w=100&h=100&zc=1&q=90' 
```

Anf of course Wordpress 没有找到它。

但如果我改用萤火虫：

```
src='http://myblog.com/wp-content/uploads/2012/06/mypic.jpg' 
```

Wordpress 显示图片。我应该在哪里寻找问题？谢谢。

# shell - 没有累积期权的壳牌案例

> ID：12766755
> 
> 赞同：0
> 
> 时间：2012-10-07T06:50:59.107
> 
> 标签：shell

我希望选项 -h 可以单独使用，而不与任何其他选项（例如 -h -l）一起使用。我该怎么做？

```
case $1 in
-h)help;;
-f)aa;;
esac

case $2 in
-l)bb;;
esac

case $3 in
-p)cc;;
esac 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T06:56:45.213

示例代码

```
 #!/bin/bash                                                                                                                                           

    while getopts "ha" opt; do
      case $opt in
        a)
          echo "-a was triggered!" >&2
          ;;
        h)
          echo "-h was triggered!" >&2
          ;;
      esac
    done 
```

测试用例

```
 ./example.bash -a -h
-a was triggered!
-h was triggered! 
```

# php - 如何将表单提交到目标 url 作为目标站点

> ID：12766756
> 
> 赞同：1
> 
> 时间：2012-10-07T06:51:27.677
> 
> 标签：php, url, curl, get

我需要提交一份带有行动的表格：“ **http://www.destination.com/hotelbooking** ”为“ **http://www.destination.com** ”，但我不拥有该网站。

我的网站是**http://www.mysite.com**，提交后，我浏览器中的网址是“ **http://www.mysite.com/bookingstatus** ”而不是“ **http://www.destination.com/bookingstatus** ” .

我猜该网站强迫我从浏览器提交我的表单，因为如果我使用 curl，它就不起作用（但我需要用 php 来做）。（***我的编辑**）

我怎么解决这个问题？这是我的表格：

```
 <form name="booking" method="post" action="https://www.destination.com/hotelbooking" >
    <input name="roomsnum" type="text">
    <input name="adultnum" type="text">
    <input name="childnum" type="text">
    <input name="infannum" type="text">
    <input name="roomsize" type="text">
    <input name="submit" type="submit" value="booking">
 </form> 
```

非常感谢

# html - 图像从一个画布拖放到另一个画布

> ID：12766757
> 
> 赞同：0
> 
> 时间：2012-10-07T06:52:18.173
> 
> 标签：html, html5-canvas

我这几天有个问题。我是 HTML5 新手，我正在尝试将多个图像从一个画布拖放到另一个画布，反之亦然。

我查看了多个链接，但到目前为止没有任何帮助，主要是因为这些链接只有一个画布，用于仅在该画布中拖放。

喜欢这个链接：[http ://simonsarris.com/blog/225-canvas-selecting-resizing-shape](http://simonsarris.com/blog/225-canvas-selecting-resizing-shape)

但我想要在 HTML5 中这样的东西：http: [//www.w3schools.com/html/html5_draganddrop.asp](http://www.w3schools.com/html/html5_draganddrop.asp)

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-07T07:50:57.553

您不能从一个画布拖放到另一个画布。`SVG`对象**绑定到**其父画布容器。

但是，如果您想做一些 CSS 可以满足您的图形需求的事情，那么我可以向您推荐这个：[http ://www.html5rocks.com/en/tutorials/dnd/basics/](http://www.html5rocks.com/en/tutorials/dnd/basics/)

# mysql - 按日期对行排序时缺少记录

> ID：12766758
> 
> 赞同：1
> 
> 时间：2012-10-07T06:52:24.480
> 
> 标签：mysql

这将是我的查询：

`SELECT * FROM Bans ORDER BY Date DESC LIMIT 10`

以下是时间戳（日期）的外观：`September 01, 2012 - 10:33:13`| `May 31, 2012 - 19:28:25`等。现在，我的问题是，我有 6 月份的记录，但没有显示。

![在此处输入图像描述](../Images/22391c01ac74ba94064a54b214f40827.png)

我怎样才能解决这个问题？

编辑：此表应显示“最新”的 10 个禁令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T06:57:37.500

我可能认为日期是按字母顺序排序的，也许你应该试试

```
SELECT * FROM Bans ORDER BY TO_SECONDS(Date) DESC LIMIT 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T06:59:02.787

`Date`可能被认为是 MySQL 中的关键字。将其包裹在反引号内。日期格式不正确。以这种方式使用[`TO_SECONDS`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_to-seconds)和更改查询：

```
SELECT * FROM `Bans` ORDER BY TO_SECONDS(`Date`) DESC LIMIT 10 
```

# java - Foursquare Java API 似乎对“checkinsAdd()”api 调用有错误的参数类型

> ID：12766759
> 
> 赞同：2
> 
> 时间：2012-10-07T06:52:30.437
> 
> 标签：java, android, api, foursquare

我使用的是 FS Java api 1.0.2，我看到第 6 个参数`checkinsAdd()`是“ll-（纬度-经度）”......它需要一个双精度值，但我认为它应该是一个字符串作为复合值。或者有没有办法将 lat 和 lang 值表示为一个双精度值？

将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T20:46:51.283

FS 端点和 JAVA FS API 调用没有 1:1 的参数映射。参数 5 是一个字符串并且期望 lat,lang 参数 6 是一个双重期望精度值。

# ios - 读取 RSSI 会导致对 BLE 设备的任何空中请求吗？

> ID：12766763
> 
> 赞同：1
> 
> 时间：2012-10-07T06:54:25.623
> 
> 标签：ios, bluetooth, bluetooth-lowenergy, heartbeat, rssi

我正在实现使用蓝牙 4.0（AKA 蓝牙智能 AKA BLE）读取心率传感器数据的 iOS 库。

我注意到 RSSI 值仅按需更新（readRSSI） - 否则并不总是相同的。

我的疑问是：“读取或 RSSI 是否会导致对传感器的额外请求？”。我的考虑是关于设备的省电。

我想我的问题通常是针对 BLE，不要认为它是特定于 iOS 的......

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T19:11:26.503

`readRSSI`报告通过活动连接对 RSSI 进行平均。因此，如果您连接到传感器，读取 RSSI 不会导致任何额外开销。即使您没有交换用户数据，您的 BT 设备也会定期通信以与活动连接保持同步，并且可以从这种持续的通信中测量 RSSI。

如果您要断开连接，那么是的，您必须重新连接才能实际测量 RSSI。

# java - %( 在 System.out.printf 中将负数转换为正数

> ID：12766765
> 
> 赞同：4
> 
> 时间：2012-10-07T06:54:42.790
> 
> 标签：java

此代码的输出

```
System.out.printf("%d %(d %+d %05d\n", 3, -3, 3, 3); 
```

是

```
3 (3) +3 00003 
```

有人可以解释为什么 -3 在这个语句中打印为 3 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T06:58:35.650

[格式化](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html)程序帮助说格式“ （”意味着它将用括号括起来负数。

> 在簿记中，欠款通常用红色数字或括号中的数字表示，作为表示负数的替代符号。

来自[维基百科：负数](http://en.wikipedia.org/wiki/Negative_number)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-07T06:59:19.467

> 有人可以解释为什么 -3 在这个语句中打印为 3 吗？

它不是，它被打印为`(3)`

从 Javadoc for [Formatter](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html)说标志`(`

> 结果将用括号括起来负数

# cordova - iOS 上的 PhoneGap 2.1 和 Facebook SDK 3.1 - 设备上的 com.facebook.sdk 错误 2

> ID：12766771
> 
> 赞同：7
> 
> 时间：2012-10-07T06:55:27.370
> 
> 标签：cordova, facebook-javascript-sdk, phonegap-plugins

我刚刚将我的 PhoneGap iOS 应用程序更新到了最新版本 2.1。由于它使用 Facebook 登录，因此我还更新了 Facebook Connect 插件，如此[处所示](https://github.com/davejohnson/phonegap-plugin-facebook-connect/tree/pg2.1-ios3.1)。

Facebook 登录在模拟器上运行顺利（同时使用 iOS 5.1 和 6.0）但我在设备上遇到错误（使用 iOS 6）“无法完成操作 com.facebook.sdk 错误 2”

我的应用程序的 BundleID 与 Facebook 应用程序上的不匹配似乎是一个问题。我检查了info.plist 文件中的**BundleIdentifier**和**BundleURLName**是否与 Facebook 应用程序设置中 Native iOS 应用程序下的 Bundle ID 匹配。

如果有人可以帮助我了解问题所在...非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T11:54:00.487

如果应用程序已在 Facebook iOS6 设置中关闭，也可能会发生此错误。转到设备设置应用程序，检查 Facebook 并查看您的应用程序是否已关闭，方法是检查“允许这些应用程序使用您的帐户：”部分。

有关相关讨论，如果您发现这是问题所在，请参阅[SDK 3.1：如何判断 SDK 是否使用 iOS6 帐户？](http://facebook.stackoverflow.com/questions/12712204/sdk-3-1-how-to-tell-whether-sdk-is-using-ios6-accounts-or-not)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:25:37.840

我遇到了同样的问题。这个答案帮助了我： [Facebook ios sdk 3.0 active session FBiOSSDK error2](https://stackoverflow.com/questions/11591637/facebook-ios-sdk-3-0-active-session-fbiossdk-error2/13964450#13964450)

简而言之，我试图使用测试人员帐户登录沙盒模式 FB 应用程序。尝试使用管理员帐户和/或关闭沙箱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:28:09.470

这对我有用：

1.  在 IOS 设置中删除 facebook 帐户
2.  退出 Facebook 应用程序并从 iPhone 中删除
3.  退出 Facebook Messenger 并从 iPhone 中删除应用程序
4.  将我的应用重新部署到我的 iPhone

经过几天的谷歌搜索 com.facebook.sdk 错误，问题终于解决了

顺便说一下，我在构建设置和 plist 中的捆绑包 ID 不匹配.....

在重新安装 facebook 应用程序，然后尝试从我的应用程序登录到 FB 时，我收到一条消息，告诉我在 developer.facebook.com/app 中设置我的包 ID，所以以前可能是这个问题，但我不确定因为我可以在采取上述步骤后从我的应用程序登录到 fb。

# mysql - 在MySql中提取某些字符后查找主键字段的最大值

> ID：12766772
> 
> 赞同：0
> 
> 时间：2012-10-07T06:55:31.887
> 
> 标签：mysql

我需要在 MySql 数据库中输入主键值，如下所示。

```
B001_V_WB_001
B002_V_WB_002
B003_V_WB_003
B004_V_WB_004
B005_V_WB_005

....
....

B011_V_WB_010
B010_V_WB_011

...
...

B100_V_WB_100
B101_V_WB_101

...
...

B1000_V_WB_1000
B1001_V_WB_1001 
```

等等。我需要遍历该列的所有行并从右侧提取到第一次出现下划线`-`，并从该列中的所有行中找到最大值。

在 MySql 中有没有最好的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T07:40:35.500

```
SELECT MAX(CAST(SUBSTRING_INDEX(id,'_',-1) AS SIGNED)) from foo; 
```

# android - 如何在我的共享库中包含正确的包含文件以使用 libdvm.so？

> ID：12766774
> 
> 赞同：0
> 
> 时间：2012-10-07T06:55:55.133
> 
> 标签：android, c, android-ndk, include, dalvik

我想使用以下位于 dalvik/vm/native/dalvik_system_DexFile.cpp 的 API：

> `static void Dalvik_dalvik_system_DexFile_defineClass(const u4* args, JValue* pResult)`
> 
> `static void Dalvik_dalvik_system_DexFile_openDexFile_bytearray(const u4* args, JValue* pResult)`

但我不知道如何在 libdvm.so 中包含正确的包含文件以使用上述两个 API。

我试图在 android 项目中包含整个标头，但它失败并显示此编译错误消息：“参数列表太长”。

有人知道在 libdvm.so 中使用上述两个 API 应该怎么做吗？谢谢你。

- 添加 -

在 dalvik/vm/native/dalvik_system_DexFile.cpp 中，有一些额外的代码允许其他人使用静态 API。

```
const DalvikNativeMethod dvm_dalvik_system_DexFile[] =
{ 
{ "openDexFile", "(Ljava/lang/String;Ljava/lang/String;I)I", Dalvik_dalvik_system_DexFile_openDexFile },
{ "openDexFile", "([B)I", Dalvik_dalvik_system_DexFile_openDexFile_bytearray },
{ "closeDexFile", "(I)V", Dalvik_dalvik_system_DexFile_closeDexFile },
{ "defineClass", "Ljava/lang/String;Ljava/lang/ClassLoader;I)Ljava/lang/Class;", Dalvik_dalvik_system_DexFile_defineClass },
{ "getClassNameList",   "(I)[Ljava/lang/String;", Dalvik_dalvik_system_DexFile_getClassNameList },
{ "isDexOptNeeded",     "(Ljava/lang/String;)Z", Dalvik_dalvik_system_DexFile_isDexOptNeeded },
{ NULL, NULL, NULL },
}; 
```

我将像这样调用上面的 2 个静态 API：

> `dvm_dalvik_system_DexFile[1].fnPtr(args, &pResult);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T08:30:16.977

这些是 DexFile 类中相应方法的 JNI 实现。它们通常会在 java 级别调用，例如通过调用 DexFile.defineClass() 方法，或者在 JNI 级别，通过使用普通的 JNI 东西来调用该 java 方法。

但是请注意，这些方法都不是公共 api 的一部分，您不能依赖它们的存在或具有特定的原型。

如果您想加载自己的自定义类，请查看[DexClassLoader](http://developer.android.com/reference/dalvik/system/DexClassLoader.html)类。此外，这里有一篇关于使用 DexClassLoader的相关[博客文章。](http://android-developers.blogspot.com/2011/07/custom-class-loading-in-dalvik.html)

# php - 使用php从字符串中删除信息

> ID：12766775
> 
> 赞同：1
> 
> 时间：2012-10-07T06:56:13.700
> 
> 标签：php, regex, preg-replace

我正在尝试使用 php 从字符串中删除以下类型的信息：

```
[url:2q57noz9]http&#58;//www&#46;mysite&#46;com/other/screencaps-from-ddd-t7099&#46;html#p24174[/url:2q57noz9] 
```

有分配给*[url:*位的随机数，这使得它更难。我尝试调整以下适用于图像标签的内容，但我认为它不像我所拥有的那样放入方括号。这是我用于图像的：

```
$message = preg_replace(array("/<img[^>]+\>/i","/<!--[^>]+\-->/i"), "", $message); 
```

这就是我试图修改它但没有成功的方式：

```
$message = preg_replace("/[[^>]+\]/i", "", $message); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T07:17:26.123

在括号前添加反斜杠

```
$message = preg_replace('/\[[^>]+\]/i', "", $message); 
```

并使用单引号来保存字符串

# ruby-on-rails - Rails 中的两步验证

> ID：12766779
> 
> 赞同：2
> 
> 时间：2012-10-07T06:57:04.340
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authentication, rsa

[是否可以使用 Google 的 android 应用程序Google Authenticator](http://code.google.com/p/google-authenticator/)在 Rails 中实现两步身份验证？

[我想实现类似于dropbox](https://blog.dropbox.com/index.php/another-layer-of-security-for-your-dropbox-account/)的两步验证。他们也使用 Google Authenticator。

Rails 中是否有任何示例代码/应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T09:39:31.550

一个小小的谷歌搜索揭示了一个 gem 扩展来设计这样做

[https://github.com/AsteriskLabs/devise_google_authenticator](https://github.com/AsteriskLabs/devise_google_authenticator)

或者有一篇博客文章提供了有关如何滚动自己的提示

[https://moocode.com/posts/5-simple-two-factor-ssh-authentication-with-google-authenticator](https://moocode.com/posts/5-simple-two-factor-ssh-authentication-with-google-authenticator)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-26T16:27:24.397

ActiveModel::Otp 使向模型中添加两​​因素身份验证 (TFA) 变得简单[https://github.com/heapsource/active_model_otp](https://github.com/heapsource/active_model_otp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-20T20:20:10.620

我认为这个宝石更好，因为它是可扩展的。如果需要，可以设置备用代码。

[锡箔两因素](https://github.com/tinfoil/devise-two-factor)

# iphone - iphone-自定义委托方法没有被调用

> ID：12766780
> 
> 赞同：0
> 
> 时间：2012-10-07T06:57:35.363
> 
> 标签：iphone, delegates

我正在尝试在应用程序在线时更新 db，它工作正常，我想在更新完成后重新加载 tableview。我正在使用自定义委托来实现这一点，但是在我的 tableviewcontroller 上，从不调用委托方法。

。H

```
@protocol DBJsonUpdateComplete
  -(void) updateFinished;
@end

@interface UpdateDbJson : NSOperation {
    NSMutableData *responseData;
    NSURLConnection *connect;
    id <DBJsonUpdateComplete> delegate;
}

@property (strong, nonatomic) id <DBJsonUpdateComplete> delegate;

@end 
```

.mi 更新完成时调用。

```
@synthesize delegate;

[delegate updateFinished]; 
```

在我的故事视图控制器中

。H

```
UITableViewController <DBJsonUpdateComplete> 
```

.m

```
- (void) updateFinished  {
    [self addReloadButton:YES];
} 
```

但是 updateFinished 永远不会被调用，除了委托方法之外，一切都工作正常。

我做得不对吗？请帮忙？我该如何调试？

迪帕克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T07:06:29.320

你指派代表了吗？我的意思是……请先检查一下……

```
updateDbJsonObject.delegate = self; 
```

# c# - 如何根据 XML 中先前的组合框选择填充组合框

> ID：12766784
> 
> 赞同：0
> 
> 时间：2012-10-07T06:57:56.767
> 
> 标签：c#, xml, c#-4.0, combobox, dataset

这个问题与我[之前的问题](https://stackoverflow.com/q/12757461/1577396)有关，在那里我得到了使用 LINQ 的答案，但我无法理解。有没有其他方法可以在不使用 LINQ 的情况下做到这一点？（我知道 LINQ 是最好的，但我认为初学者不太好开始）

我想根据之前的组合框选择（`cbProduct`和`cbBrandName`）填充组合框

两个组合框都有来自同一个[XML 文件](http://ideone.com/cIYpC)的值。

在问这里之前，我已经浏览了很多链接，但答案主要是基于 LINQ 或者它与 xml 无关。

我尝试了以下代码：（它只是分配值）

```
 DataSet dsBill = new DataSet();
           dsBill.ReadXml(@"..\..\stock.xml");
 /*ERROR*/ cbProduct.DataSource = dsBill.Tables[0].DefaultView.ToTable(true, "productname"); 
           cbProduct.DisplayMember = "productname"; 
```

还有一个问题，当我没有`name`为 xml 文件分配属性时，这段代码正在工作，现在它显示错误——“*列 'productname' 不属于基础表 'items'。* ”

请帮助
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T07:26:57.280

关于添加`name`属性的问题，我*认为*您只是没有更新代码来支持它。尝试这个：

```
 DataSet dsBill = new DataSet();
       dsBill.ReadXml(@"..\..\stock.xml");
       cbProduct.DataSource = dsBill.Tables[0].DefaultView.ToTable(true, "Product name"); 
       cbProduct.DisplayMember = "Product name"; 
```

# javascript - 这些代码有什么区别？

> ID：12766791
> 
> 赞同：2
> 
> 时间：2012-10-07T06:59:16.023
> 
> 标签：javascript, jquery, prototype-oriented

```
function Demo() {
   this.show1 = function() { alert(1) }
}

Demo.prototype.show2 = function() { alert(2) }

var d = new Demo
d.show1()
d.show2() 
```

`show1`并且`show2`可以同时报警号码。

这两者有什么区别吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T07:02:22.287

是的，如果您在构造函数中初始化该方法，例如 ( `this.method = function () {};`)，您的所有 1000 个对象实例都将拥有一个函数对象作为自己的属性。

好吧，这是最**轻量级**的方法，假设你在某个构造函数的原型中有一个方法，并且你创建了 1000 个对象实例，所有这些对象的原型链中都会有你的方法，并且它们都只会引用一个函数对象。

在第二种情况下，只有那些在 之后创建的对象`Demo.prototype.show2 = function(){alert(2)}`才能获得代码。:)

### 例子

**你的代码**

```
function Demo(){
   this.show1 = function(){alert(1)}
}

Demo.prototype.show2 = function(){alert(2)}

var d = new Demo
d.show1()
d.show2() 
```

**其他案例**

```
function Demo(){
   this.show1 = function(){alert(1)}
}

var d = new Demo

Demo.prototype.show2 = function(){alert(2)}

d.show1()
d.show2() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T07:01:15.763

`show1`在每个新实例上复制。`show2`是共享的。

# python - 使用汤从 div 获取编码内容

> ID：12766798
> 
> 赞同：0
> 
> 时间：2012-10-07T07:01:06.900
> 
> 标签：python, get, find, beautifulsoup, encode

我需要字符串 SKU: E02165 女巫以某种方式编码为

```
SKU:&nbsp;E02165&nbsp;&nbsp; 
```

通过某种方式，这是来自网站的完整 div 海峡

```
<div class="sku">SKU:&nbsp;E02165&nbsp;&nbsp;</div> 
```

我试过了

```
soup = BeautifulSoup(data)
info = soup.find('div' , {'class':'sku'}).contents 
```

以及所有流动的

```
info = soup.findAll('div', { "class" : "sku"})
info = soup.find('div' , class='sku'}).contents
info = soup.find('div' , "class=" + 'sku'}).contents
info = soup.find('div' , {'class':'sku'}).text
info = soup.find('div' , {'class':'sku'}).contents 
```

如果你能帮我把“sku：”从我认为我可以使用 info = (info.split('sku: ')[1]) 的数字中拆分出来，我已经在两行代码上花了 2 个小时，但如果那样的话剂量 nt 工作随时让我知道。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T07:40:52.460

试试这个：

```
>>> div = '<div class="sku">SKU:&nbsp;E02165&nbsp;&nbsp;</div>'
>>> html = BeautifulSoup(div)
>>> div_sku = html.find('div', {'class': 'sku'})
>>> value = div_sku.get_text(strip=True).encode('ascii', 'ignore').split('SKU:')[1]
>>> value
'E02165' 
```

* * *

`get_text(strip=True)`将获取文档或标签的文本部分，并从头到尾去除空格。

`encode('ascii', 'ignore')`将忽略`u'\xa0'`文本中的 unicode，因此允许`split()`返回准确的结果。

或者，您也可以简单地执行以下操作：

```
value =div_sku.get_text(strip=True).replace(u'\xa0', u'').split('SKU:')[1] 
```

其中`replace(u'\xa0', u'')`将替换`u'\xa0'`为空的 unicode 字符串。

# sql-server-2008 - 如何在远程 SQL Server 2005/2008 数据库上创建触发器？

> ID：12766804
> 
> 赞同：0
> 
> 时间：2012-10-07T07:02:19.187
> 
> 标签：sql-server-2008, triggers

我想在远程 SQL Server 2005/2008 数据库中存在的表上创建触发器。我只有对该数据库的只读访问权限。我的第一个问题是，这可能吗？

如果这不可能，我的其他选择是什么，因为我想听该表上的任何更改并执行一些计算。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T07:05:53.933

如果您只有对数据库的只读访问权限，那么不，您不能创建触发器。

如果您只有对远程数据库的只读访问权限，那么我能想到的唯一可能的方法是；

*   [投票](http://en.wikipedia.org/wiki/Polling_(computer_science))（哎哟）
*   要求 DBA 帮助您创建触发器或某种单向复制。
    如果替代方案是投票，他们可能不会完全不愿意这样做。

# mysql - mysql-proxy 0.8.3 负载均衡不能工作

> ID：12766807
> 
> 赞同：0
> 
> 时间：2012-10-07T07:02:58.167
> 
> 标签：mysql, load-balancing, mysql-proxy

我有下面列出的三个 Mysql 节点：

```
Master Address: 192.168.1.77:3306
Slave1 Address: 192.168.1.76:3306
Slave2 Address: 192.168.1.69:3306 
```

在我在 192.168.1.67 上安装 0.8.3 版本的 mysql-proxy 之后，并在下面创建我的配置：

```
[mysql-proxy]
admin-username=proxy
admin-password=proxy
admin-lua-script=/local/software/mysql-proxy/lib/mysql-proxy/lua/admin.lua
proxy-read-only-backend-addresses = 192.168.1.76:3306,192.168.1.69:3306
proxy-backend-addresses=192.168.1.77:3306
proxy-lua-script=/local/software/mysql-proxy/share/doc/mysql-proxy/rw-splitting.lua
log-file=/local/software/mysql-proxy/log/mysql-proxy.log
plugin-dir=/local/software/mysql-proxy/lib/mysql-proxy/plugins
plugins=proxy,admin,debug,replicant
log-level=debug
keepalive=true 
```

编辑文件：rw-splitting.lua

```
min_idle_connections = 1,
max_idle_connections = 2, 
```

然后像这样启动mysql-proxy：

```
./bin/mysql-proxy --defaults-file=mysql-proxy.cnf 
```

登录代理：

```
mysql -uproxy -ppassword -P4040 -h192.168.1.67 
```

当我一次又一次执行 select sql 以打开不同的 mysql-proxy 4040 窗口时，但从日志中我发现所有 select sql 查询都发送到同一个服务器 76，但是只有当我关闭 76 时，它才会发送对从站的查询 69\. 我不知道为什么负载平衡不起作用，是不是有些地方我犯了错误？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T03:48:27.030

rw-splitting.lua 似乎将一些实现留给读者作为练习。有一条评论“选择一个随机后端”，但我没有看到它的实现，或者循环技术。当没有空闲连接时，代码似乎从顶部填充后端服务器到阵列中的下一个。

如果主服务器上总是有空闲连接，那么当前的实现更喜欢去那里。之后，它使用只读后端服务器列表中的第一个空闲连接。在这种情况下，76 直到您将其关闭时，它移至 69。我不明白为什么 77，读/写后端不是首选。这可能与可用的空闲连接数有关。

似乎寻找最低的 proxy.global.backends.connected_clients，即后端当前活动的连接数，将是确定使用的后端优先级的好方法。

你还应该看看平衡模块 lib/mysql-proxy/lua/proxy/balance.lua

# java - 为什么javac源代码是用java写的？

> ID：12766808
> 
> 赞同：6
> 
> 时间：2012-10-07T07:03:24.093
> 
> 标签：java, compiler-construction, javac

我从[这里](http://openjdk.java.net/groups/compiler/)`javac`下载了源代码，发现它本身是用 java 语言编写的。但是，我期待它是用 c/c++ 编写的。

无论如何，在没有java编译器的情况下，这个用java编写的java编译器源代码是如何编译的呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T07:08:05.843

从[这里](http://en.wikipedia.org/wiki/Java_compiler)：

> Sun Microsystems 开发的第一个 Java 编译器是使用 C++ 中的一些库用 C 语言编写的

此外，编译后的字节码由用 c++ 编写的 JVM 解释。从[这里](http://en.wikipedia.org/wiki/Java_Virtual_Machine)：

> 名为 HotSpot 的 Oracle JVM 是用 C++ 语言编写的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T07:07:17.357

用它编译的语言编写的编译器称为引导编译器。

它们的制作方式有点让人头疼，但想想：当原始语言被编写时，没有 java，所以他们不得不用另一种语言创建编译器，实际上，它是用 C/C++ 编写的. 在这里检查一下：[Java 编译器和 JVM 是用哪种语言编写的？](https://stackoverflow.com/questions/1220914/in-which-language-are-the-java-compiler-jvm-and-java-written)

此外，我不知道您是否知道，Java 的工作方式是编译器 ( `javac`) 实际上不生成机器代码文件，它创建然后由 JVM**解释的字节码文件。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T07:08:02.020

您通常需要一个现有的 Java 编译器（和运行时）来引导。但是，还有其他可用的 Java 编译器，例如[Jikes](http://jikes.sourceforge.net/)，它们是用 C++ 编写的。是否可以使用 Jikes 引导 OpenJDK 是另一回事，但理论上应该是可以的。

# php - 使用 php 镜像站点

> ID：12766811
> 
> 赞同：2
> 
> 时间：2012-10-07T07:03:59.090
> 
> 标签：php, mirroring, mirror

我必须使用 php 镜像站点。我正在使用以下链接的谷歌代码 [http://code.google.com/p/php-dynamic-mirror/](http://code.google.com/p/php-dynamic-mirror/)

我已经指定了文档中给出的所有设置。但是当我转到镜像站点 url 时，它总是给我一个 404 page not found 错误。任何帮助将不胜感激，这里是我的镜像站点 [http://tinyurl.com/99p99og的链接](http://tinyurl.com/99p99og)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T07:09:34.437

您可以使用[HTTrack 网站复印机](http://www.httrack.com/)。

> HTTrack 是一个免费（GPL，自由/自由软件）且易于使用的离线浏览器实用程序。
> 
> 它允许您将万维网站点从 Internet 下载到本地目录，递归地构建所有目录，将 HTML、图像和其他文件从服务器获取到您的计算机。HTTrack 安排原始站点的相对链接结构。只需在浏览器中打开“镜像”网站的一个页面，您就可以从一个链接到另一个链接浏览该站点，就好像您在在线查看它一样。HTTrack 还可以更新现有的镜像站点，并恢复中断的下载。HTTrack 是完全可配置的，并具有集成的帮助系统。
> 
> WinHTTrack 是 HTTrack 的 Windows 2000/XP/Vista/Seven 版本，而 WebHTTrack 是 Linux/Unix/BSD 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T07:19:13.787

试试`wget`。如果您没有[cygwin](http://cygwin.org)或 unix 机器可以运行`wget`，则可以使用[win32](http://gnuwin32.sourceforge.net/)软件包。

```
wget --mirror http://www.example.org/ 
```

请参阅[https://serverfault.com/questions/155743/how-to-refresh-an-online-website-mirror-created-with-wget-mirror](https://serverfault.com/questions/155743/how-to-refresh-an-online-website-mirror-created-with-wget-mirror)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T07:35:10.970

我们为此使用[rsync](http://linux.die.net/man/1/rsync)：

> rsync 是一种用于类 Unix 系统的软件应用程序和网络协议，具有到 Windows 的端口，可将文件和目录从一个位置同步到另一个位置，同时在适当的时候使用 delta 编码最小化数据传输。引用官网：“rsync 是 Unix 系统的文件传输程序。rsync 使用 'rsync 算法'，它提供了一种非常快速的方法来同步远程文件。” [3] rsync 的一个重要特性在大多数类似的文件中都找不到程序/协议是镜像发生时每个方向只有一次传输。rsync 可以复制或显示目录内容和复制文件，可选择使用压缩和递归。

# javascript - 如果表格 { width:100%} 的 css，则浮动图表的图例移动到左侧

> ID：12766815
> 
> 赞同：-2
> 
> 时间：2012-10-07T07:05:51.367
> 
> 标签：javascript, jquery, charts, flot

如果表格 { width:100%} 的 css，则浮动图表的图例移动到左侧。

如果我想维护 table { width:100%} 因为它是站点范围内应用的 css，我能做些什么吗？

[jsfiddle](http://jsfiddle.net/TXPWK/59/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T13:42:21.910

如果 Flot 图表的父元素具有 ID 或类，则可以仅覆盖该父元素中表格的宽度，如下所示：

```
#placeholder table { width: 200px !important; } 
```

不过，这确实是一个技巧。局限性是显而易见的。

真正的解决方案是摆脱您现有的规则。全局表规则是一个非常糟糕的主意，这个问题正好说明了原因。迟早你会在不同的环境中再次遇到同样的事情，而且可能更难修复。

您的问题被否决的原因是，任何严肃的网页设计师在听到您有全局表格规则时都会畏缩。

您应该通过以下任一方式解决问题：

1.  给你的表类，即`<table class="myclass" ...>`然后把你的 100% 宽度放在一个`table.myclass`规则中。

2.  如果你的表共享一个父表，给它一个类，然后使用一个规则，比如`.my-tables table`只影响你所在区域的表。

# android - 如何实现像 Gmaps 6 这样的浮动上下文面板

> ID：12766817
> 
> 赞同：0
> 
> 时间：2012-10-07T07:05:56.317
> 
> 标签：android, android-layout, user-interface

当您打开“我的地点”或进行路线搜索时，我想实现类似于 Google Maps 6 中的浮动上下文面板。（不可否认，我对此的体验仅在 Nexus7 平板电脑上）。下面的示例图像显示了我的意思的面板。

谁能告诉我这些是如何完成的？

![示例 Gmap](../Images/f960ef45563bc5158f6653e6cfac8692.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T07:15:55.767

您可以通过简单地显示和隐藏布局（上下文面板）来做到这一点，布局如下：

```
<RelativeLayout
    <MapView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        ...
    />
    <MyContextView
        android:id="@+id/the_context_view"
        android:layout_width="400dp"
        android:layout_height="match_parent"
        android:layout_margin="10dp"
        android:layout_alignParentLeft="true"
        android:visibility="hidden"
        ...
    />
</RelativeLayout> 
```

使用 View.setVisibility() 显示和隐藏它。

# javascript - 有垂直响应画廊插件吗？jQuery 还是 JavaScript？

> ID：12766821
> 
> 赞同：0
> 
> 时间：2012-10-07T07:06:53.287
> 
> 标签：javascript, jquery, css, slider, gallery

谁能指出我水平和垂直响应的画廊滑块插件或 Jscript 的方向？

我尝试过 Flexslider1/2、Galleria 和其他各种插件，但它们都是固定宽度，似乎对垂直调整浏览器大小没有反应？我试过改变所有的 CSS 但没有运气。

任何帮助将不胜感激。

示例（使用 Flexslider）：如果您水平调整浏览器大小，图像将自动调整大小以适合浏览器窗口。如果您垂直调整大小，这将垂直切断图像。

目标：当您垂直调整浏览器窗口大小时，图像将改变宽度和高度以保持比例并适合浏览器窗口。与水平相同。

希望我已经清楚地解释了这一点。如果您需要澄清，请询问而不是投票。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:50:16.467

[浏览一下 Flexslider](http://www.woothemes.com/flexslider/)中的代码后，我找不到任何特别排除在垂直窗口更改时调整图像大小的可能性的东西。图像调整大小似乎完全基于 CSS，然后将宽度/高度信息输入 javascript。看来您遇到了浏览器的 DOM/CSS 问题，没有在垂直窗口更改时调整图像大小，然后有点这不是经过测试的 FlexSlider 设置。

让所有浏览器理解没有垂直滚动的 100% 垂直布局总是有点挑剔，因为这不是正常的布局范例。随后的 CSS 版本有所帮助，但浏览器的反应方式和 100% 解释您的意思之间仍然存在很大差异。

我拿了[滑块演示](http://flexslider.woothemes.com/)并借用了大部分[堆栈答案](https://stackoverflow.com/a/6159063/1318694)来管理 100% 垂直布局，并[最终](http://code.deployable.org/eg/flexslider/flexsliderDemo.html)得到了下面的详细信息。

首先，更改您的图像 CSS 属性以缩放布局的高度并设置宽度自动以保持正确的方面：

```
 width: auto;
 height: 90%; 
```

这本身适用于图像，但 FlexSlider javascript 在页面中添加了一些额外的元素，并且还在演示中为水平布局默认了一些 CSS 宽度值。

```
.flexslider .slides img {width: 100%; display: block;} 
```

变成

```
.flexslider .slides { width: 100%; display: block;}
.img {display: block; } 
```

现在你有一个在 Chrome 中工作的幻灯片。

Firefox 不会将图像 100% 高度应用于包含类似 Chrome 的元素，因此我不得不退后一步并在 CSS 中应用 100% 高度规则

```
.flexslider .slides {height: 100%; width: 100%; display: block;}
.img {display: block; }

.flex-viewport img{ height: 100%;}
.flex-viewport li { height: 100%;}
.flex-viewport ul { height: 100%;}
.flex-viewport { height: 100%;} 
```

你会看到我也在那里做了img。你最终得到[了页面](http://code.deployable.org/eg/flexslider/flexsliderDemo.html)。

该解决方案的一个缺点是您现在拥有的图像将调整大小超过屏幕的水平尺寸。您可能需要构建一些东西来满足这一点，因为如果您使用依赖于工作宽度的基本轮播，您会遇到问题。当您将鼠标移出屏幕添加水平滚动条时，也会发生一些有趣的事情，但我会为您留下那个。也请自担风险尝试 IE。

...这就是我回避前端开发的原因 =)

很抱歉，那篇文章最终成为了我在谈论的一个运行评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T21:19:08.610

我还想要一个垂直响应（和水平）的图像滑块。在没有找到任何可以按照我想要的方式工作的开箱即用的东西之后，我开始摆弄。

这是[结果](http://jsfiddle.net/brettdewoody/QyfuD/)。

这是关键元素（请访问 jsFiddle 获取完整演示）。它不是很完美，但应该足以让你开始。

**HTML**

```
<div id="fader">
    <a href="http://url1.com"><img src="http://placehold.it/600x600&text=Slide1" ></a>
    <a href="http://url2.com"><img src="http://placehold.it/600x600&text=Slide2" ></a>
    <a href="http://url3.com"><img src="http://placehold.it/600x600&text=Slide3" ></a>
    <a href="http://url4.com"><img src="http://placehold.it/600x600&text=Slide4" ></a>
</div> 
```

**CSS**

```
#fader {
    position: relative; 
    width: auto;
    height: 100%;
}

#fader a {
    display:block;
    width:auto;
    height:100%;    
}

@media screen and (orientation: portrait) {
  img { 
      width: 100%; 
      height:auto !important;
  }
}
@media screen and (orientation: landscape) {
  img { 
      height: 100%;
      min-width:10%;
      max-width:100%;
  }
} 
```

特别感谢这个[jsFiddle](http://jsfiddle.net/jtbowden/UNZR5/1/)的轻量级 jQuery 旋转器。

# java - Java命令行编译

> ID：12766823
> 
> 赞同：0
> 
> 时间：2012-10-07T07:07:00.183
> 
> 标签：java, command-line, compilation, terminal

我最近完成了一项使用 Netbeans 和 Java 的编程任务。当我在 Netbeans 中运行程序时，一切都运行得很完美。当我尝试从终端运行它时，我的问题就出现了。我用我所有的 .java 文件运行 javac ，它为每个文件生成一个 .class 文件。然后，当我尝试运行可执行文件时，它会在我身上出错。

```
ls
Board.java          KenKenPuzzleSolver.java 
Solver.java         Cage.java 
Size.java           Values.java

javac KenKenPuzzleSolver.java Board.java Cage.java Size.java Solver.java Values.java

ls
Board.class         Size.class
Board.java          Size.java
Cage.class          Solver.class
Cage.java           Solver.java
KenKenPuzzleSolver.class    Values.class
KenKenPuzzleSolver.java     Values.java

java KenKenPuzzleSolver
Exception in thread "main" java.lang.NoClassDefFoundError: KenKenPuzzleSolver (wrong name: kenkenpuzzlesolver/KenKenPuzzleSolver) 
```

此外，当程序从终端运行时，它应该接受一个输入文件和一个输出文件的名称，即“java KenKenPuzzleSolver input.txt output.txt”，我不太确定如何执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T07:15:02.697

您一定弄乱了案例，因为错误很明显，而不是`KenKenPuzzleSolver`您将类命名为`kenkenpuzzlesolver`in `KenKenPuzzleSolver.java`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T07:11:10.807

为什么不使用 netbeans 生成可执行文件？您不必每次都编译代码。

`input.txt`并且`output.txt`被称为参数。它们将存储在您函数的`String[] args`数组中。`main`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T07:11:19.803

您没有提供类路径参数。

利用`javac -cp YOURCLASSPATH KenKenPuzzleSolver`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T07:13:53.007

您正在运行的类应该是公共的，并且类名应该与您的文件名相同。您的文件名似乎是“KenKenPuzzleSolver”，但您的类名似乎是“KenkenPuzzleSolver”（注意小写的 ken ）。更正并重新编译并重新运行。

# mysql - 我的 sql 中关于状态的 order by 子句

> ID：12766844
> 
> 赞同：4
> 
> 时间：2012-10-07T07:12:17.647
> 
> 标签：mysql, sql

我正在对表进行排序以显示状态为 3 的记录，然后是状态为 4 和 1 的记录。

在当前表中，这是输出

```
id    status
 1     3
 2     4
 3     4
 4     3
 5     1 
```

现在当我应用查询时

```
select * from table order by model.status desc 
```

输出是：

```
id    status
 2     4
 3     4
 1     3
 4     3
 5     1 
```

我想要的实际上是下面的输出。首先是状态 3，然后是状态 4，然后是状态 1。如何实现以下输出

```
id    status
 1     3
 4     3
 2     4
 3     4
 5     1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T07:18:56.663

而不是一个神奇的 9999999 数字，你可以使用 ~0，它代表 big int 的最大可能值......应该足够了；）

```
order by (case when status = 1 then ~0 else status end) 
```

其他解决方案，没有任何幻数

```
order by status = 1 , status 
```

它将首先按“布尔值”（DB 中的 0 或 1）排序，然后按状态排序

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T07:24:04.830

你可以[`FIELD`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_field)在 MySQL 上轻松做到这一点；

```
SELECT * 
FROM model
ORDER BY FIELD(status, 3, 4, 1); 
```

[SQLfiddle 在这里](http://sqlfiddle.com/#!2/bb001/3)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-07T07:47:29.020

如果[`FIELD`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_field)不适合您（可能是由于旧版本的 MySql），那么试试这个。它会工作

```
SELECT * FROM model
ORDER BY CASE status WHEN 3 THEN 1  WHEN 4 THEN 2  WHEN 1 THEN 3
END, id 
```

[**检查它在这个链接上的工作**](http://sqlfiddle.com/#!2/8cd54/6)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-07T07:14:27.037

### 使用 SQL[`FIELD`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_field)

```
SELECT * FROM `table` ORDER BY FIELD (status, 3, 4, 1); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-07T07:25:52.870

以下应该工作

```
 ORDER BY  CASE status WHEN 3 THEN 1
                 WHEN 4 THEN 2
                 WHEN 1 THEN 3
                 END, id asc 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-23T02:58:01.120

```
$invoiceList = InvoicesModel::where('hotel_id', $hotel_id)
                        ->where('status', 'PENDING')
                        ->orWhere('status', 'COOKING_PROCESS')
                        ->orderBy(
                            DB::raw('(CASE WHEN status = "COOKING_PROCESS" 
                            THEN 1 WHEN status = "PENDING"
                            THEN 2 END)')
                        )->get(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-07T07:26:11.680

如果状态值仅为 1,3 和 4，则按子句顺序使用“ [FIELD()](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_field) ”。

```
select * from table order by FIELD( model.status 3,4,1) 
```

# php - PHP的PBKDF2密码散列

> ID：12766852
> 
> 赞同：1
> 
> 时间：2012-10-07T07:14:13.410
> 
> 标签：php, hash, pbkdf2

感谢最近一篇文章中的一些很好的建议，我正在将 [https://defuse.ca/php-pbkdf2.htm](https://defuse.ca/php-pbkdf2.htm)中的 PBKDF2 实现到我正在构建的一个小型 PHP 图像库中，以自学一些 PHP。

我知道您将盐和哈希存储在数据库中，然后在用户输入密码时重建它们以匹配。我不明白的是上述网站上的 validate_password 函数在为同一密码生成不同的唯一盐时如何工作。

例如，我创建了一个测试，重复生成我的名字 (andrew) 的密码。每次最终的哈希值都不一样，大概是因为盐是唯一的？但是，我也比较了密码的哪个生成的哈希并不重要，它验证了它。（它显然没有验证像 Andrew56 或 ndrew1 这样的完全不同的密码）。

谁能向我简单的自己解释为什么会这样？好像我什至不需要储存盐？我希望这不是题外话。

```
<?php
/*
 * Password hashing with PBKDF2.
 * Author: havoc AT defuse.ca
 * www: https://defuse.ca/php-pbkdf2.htm
 */

// These constants may be changed without breaking existing hashes.
define("PBKDF2_HASH_ALGORITHM", "sha256");
define("PBKDF2_ITERATIONS", 1000);
define("PBKDF2_SALT_BYTES", 24);
define("PBKDF2_HASH_BYTES", 24);

define("HASH_SECTIONS", 4);
define("HASH_ALGORITHM_INDEX", 0);
define("HASH_ITERATION_INDEX", 1);
define("HASH_SALT_INDEX", 2);
define("HASH_PBKDF2_INDEX", 3);

function create_hash($password)
{
// format: algorithm:iterations:salt:hash
$salt = base64_encode(mcrypt_create_iv(PBKDF2_SALT_BYTES, MCRYPT_DEV_URANDOM));
return PBKDF2_HASH_ALGORITHM . ":" . PBKDF2_ITERATIONS . ":" .  $salt . ":" . 
    base64_encode(pbkdf2(
        PBKDF2_HASH_ALGORITHM,
        $password,
        $salt,
        PBKDF2_ITERATIONS,
        PBKDF2_HASH_BYTES,
        true
    ));
}

function validate_password($password, $good_hash)
{
$params = explode(":", $good_hash);
if(count($params) < HASH_SECTIONS)
   return false; 
$pbkdf2 = base64_decode($params[HASH_PBKDF2_INDEX]);
return slow_equals(
    $pbkdf2,
    pbkdf2(
        $params[HASH_ALGORITHM_INDEX],
        $password,
        $params[HASH_SALT_INDEX],
        (int)$params[HASH_ITERATION_INDEX],
        strlen($pbkdf2),
        true
    )
);
}

// Compares two strings $a and $b in length-constant time.
function slow_equals($a, $b)
{
$diff = strlen($a) ^ strlen($b);
for($i = 0; $i < strlen($a) && $i < strlen($b); $i++)
{
    $diff |= ord($a[$i]) ^ ord($b[$i]);
}
return $diff === 0; 
}

/*
 * PBKDF2 key derivation function as defined by RSA's PKCS #5:         https://www.ietf.org/rfc/rfc2898.txt
 * $algorithm - The hash algorithm to use. Recommended: SHA256
 * $password - The password.
 * $salt - A salt that is unique to the password.
 * $count - Iteration count. Higher is better, but slower. Recommended: At least 1000.
 * $key_length - The length of the derived key in bytes.
 * $raw_output - If true, the key is returned in raw binary format. Hex encoded otherwise.
 * Returns: A $key_length-byte key derived from the password and salt.
 *
 * Test vectors can be found here: https://www.ietf.org/rfc/rfc6070.txt
 *
 * This implementation of PBKDF2 was originally created by https://defuse.ca
 * With improvements by http://www.variations-of-shadow.com
 */
function pbkdf2($algorithm, $password, $salt, $count, $key_length, $raw_output = false)
{
$algorithm = strtolower($algorithm);
if(!in_array($algorithm, hash_algos(), true))
    die('PBKDF2 ERROR: Invalid hash algorithm.');
if($count <= 0 || $key_length <= 0)
    die('PBKDF2 ERROR: Invalid parameters.');

$hash_length = strlen(hash($algorithm, "", true));
$block_count = ceil($key_length / $hash_length);

$output = "";
for($i = 1; $i <= $block_count; $i++) {
    // $i encoded as 4 bytes, big endian.
    $last = $salt . pack("N", $i);
    // first iteration
    $last = $xorsum = hash_hmac($algorithm, $last, $password, true);
    // perform the other $count - 1 iterations
    for ($j = 1; $j < $count; $j++) {
        $xorsum ^= ($last = hash_hmac($algorithm, $last, $password, true));
    }
    $output .= $xorsum;
}

if($raw_output)
    return substr($output, 0, $key_length);
else
    return bin2hex(substr($output, 0, $key_length));
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-04T18:09:52.777

我发现这是在寻找旧 PHP 版本的 PBKDF2 实现。对于其他碰巧点击此页面的人，如果您直接使用此方法：

```
pbkdf2($algorithm, $password, $salt, $count, $key_length, $raw_output = false) 
```

然后，它不包括输出字符串的盐，只是哈希，这是我想要的。

该`create_hash`方法是原始海报使用的方法，并且使用上面的设置，将返回：

```
sha256:1000:$salt:$hash 
```

这使您可以将其全部保存在一个易于使用的 db 列中。但是，我会注意到，如果您关心存储空间，您“可能”仍想将其拆分。使用十六进制盐和密码，您可以通过将其存储在二进制列中来减少一半的存储空间......例如，在 MySQL 中，这是使用`SET binaryColumn=UNHEX('0F0F')`, 然后`SELECT HEX(binaryColumn) AS binaryColumn`. 这是更多的工作，所以它归结为你自己的偏好和目标，但我想我会把它扔在那里。

# sql-server - 更新有“fromlist”

> ID：12766854
> 
> 赞同：0
> 
> 时间：2012-10-07T07:14:23.820
> 
> 标签：sql-server, join, sql-update, sybase

我有一个sql更新查询如下：

```
update #tree c 
set treetop=p.treetop,
treeptag=p.treeptag,
adjust= 'a2a'
from #tree p ,#regions r 
where c.treeptag=''
and   c.xsreg=r.Region
and    c.xsreg <> c.reg
and c.tradedate=p.tradedate
and p.treeaotag=replace(r.srvid+':'+c.tradedate+':'+c.litag,'  ','') 
```

我正在尝试在不使用“fromlist”的情况下使用连接编写查询，如下所示：

```
update #tree c 
set treetop=(select p.treetop from #tree p ,#regions r 
                      where c.treeptag=''
                      and   c.xsreg=r.Region
                      and    c.xsreg <> c.reg
                      and c.tradedate=p.tradedate
              and p.treeaotag=replace(r.srvid+':'+c.tradedate+':'+c.litag,'  ','')),
treeptag=(select p.treeptag from #tree p ,#regions r 
                      where c.treeptag=''
                      and   c.xsreg=r.Region
                      and    c.xsreg <> c.reg
                      and c.tradedate=p.tradedate
              and p.treeaotag=replace(r.srvid+':'+c.tradedate+':'+c.litag,'  ','')),
adjust= 'a2a'
where exists (select 1 from #tree p ,#regions r  where c.treeptag=''
and   c.xsreg=r.Region
and   c.xsreg <> c.reg
and c.tradedate=p.tradedate
and p.treeaotag=replace(r.srvid+':'+c.tradedate+':'+c.litag,'  ','')) 
```

然而，上面的查询似乎返回了不正确的行数；任何建议都是最有帮助的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T08:43:55.020

翻译是正确的，所以行数应该完全一样。如果表很小，请使用 DDL 和示例数据插入更新问题。否则，这些返回什么？

```
select count(1)
from #tree c, #tree p ,#regions r 
where c.treeptag=''
and   c.xsreg=r.Region
and    c.xsreg <> c.reg
and c.tradedate=p.tradedate
and p.treeaotag=replace(r.srvid+':'+c.tradedate+':'+c.litag,'  ','') 
```

和

```
select count(disctint c.id)  -- or whatever the unique key on #tree is
from #tree c, #tree p ,#regions r 
where c.treeptag=''
and   c.xsreg=r.Region
and    c.xsreg <> c.reg
and c.tradedate=p.tradedate
and p.treeaotag=replace(r.srvid+':'+c.tradedate+':'+c.litag,'  ','') 
```

以及这两个计数与更新相比如何？我原以为它会匹配第二个计数。

对于它的价值，它是 2012 年，所以使用正确的 ANSI 连接：

```
update c 
   set treetop=p.treetop, treeptag=p.treeptag, adjust='a2a'
  from #tree c
  join #tree p on c.tradedate=p.tradedate
  join #regions r on c.xsreg=r.Region 
 where c.treeptag='' and c.xsreg <> c.reg
   and p.treeaotag=replace(r.srvid+':'+c.tradedate+':'+c.litag,'  ','') 
```

而且您的某些条件是直接反对的`c`，那么为什么将它们包含在子查询中呢？

```
update #tree c
   set treetop =(select p.treetop
                   from #tree p
                   join #regions r on c.xsreg=r.Region
                  where c.tradedate=p.tradedate
                    and p.treeaotag=replace(r.srvid+':'+c.tradedate+':'+c.litag,'  ','')),
       treeptag=(select p.treeptag
                   from #tree p
                   join #regions r on c.xsreg=r.Region 
                  where c.tradedate=p.tradedate
                    and p.treeaotag=replace(r.srvid+':'+c.tradedate+':'+c.litag,'  ','')),
       adjust  ='a2a'
 where c.treeptag='' and c.xsreg <> c.reg and -- << these two
exists (select 1
          from #tree p
          join #regions r on c.xsreg=r.Region
         where c.tradedate=p.tradedate
           and p.treeaotag=replace(r.srvid+':'+c.tradedate+':'+c.litag,'  ','')) 
```

# android - 在 EditText 中输入的文本不会立即更改为密码

> ID：12766856
> 
> 赞同：0
> 
> 时间：2012-10-07T07:14:44.723
> 
> 标签：android, passwords, android-edittext

用户输入的密码不会立即变为 * 并且纯文本显示 5 秒左右。我不希望这是我制作自定义锁屏，否则其他人可以看到输入的密码。我在用着

> 安卓：密码=“真”

好心的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T09:11:05.707

据我所知，这在所有移动平台上都是如此，这是“正常”的方式，因为虚拟键盘很小，您可能会输入错误的字符。不过，如果你真的想修改它，你必须创建你自己的 EditText，它将扩展 android 的 EditText。

# java - 是否可以在 OSwor kflow 中动态创建工作流？

> ID：12766857
> 
> 赞同：1
> 
> 时间：2012-10-07T07:14:45.487
> 
> 标签：java, xml, osworkflow

是否可以动态创建工作流？我需要动态生成一个WF。我是否可以在不使用设计器的情况下动态生成 example.layout.xml。我在 java 中需要这个。是否有任何运行时设计方法，以便我可以动态设计工作流并生成相应的 layout.xml 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:48:06.517

我希望即使帖子有点旧，这也可以对其他人有所帮助......寻找类似的解决方案，我在stackoverflow上找到了一些帖子，结论可能是[jBPM](http://www.jboss.org/jbpm)可以提供一种方法来做到这一点。

希望这可以帮助。

# c++ - 如何从 Main 调用 void 函数

> ID：12766858
> 
> 赞同：4
> 
> 时间：2012-10-07T07:14:49.317
> 
> 标签：c++

在我的程序中，我试图从 Main 调用 void 函数，但我无法找出正确的方法。

`Main`位于最底部，`void GetTicketType(char &Choice)`是我需要调用`cout`票证类型的函数。

```
//---------------------------------------------------------------------------
// Purpose: This program simulates a ticket office for sporting events
// Author: TBA
// Date: TBA
//---------------------------------------------------------------------------
#include <iostream>
#include <iomanip>
using namespace std;

const char CASH = 'C';
const char CREDIT = 'D';
const char NOSEBLEED = 'N';
const char BOX_SEAT = 'B';
const char FIFTY_YARD_LINE = 'F';
const char STUDENT_SECTION = 'S';
const float NOSEBLEED_PRICE = 43.42;
const float BOX_SEAT_PRICE = 353.85;
const float FIFTY_YARD_LINE_PRICE = 94.05;
const float STUDENT_SECTION_PRICE = 19.99;

//---------------------------------------------------------------
// Function: ConfirmChoice
// Purpose: Confirms the users ticket purchase before processing payment
// Parameters: TicketType - The type of ticket selected
// Returns: true if the user confirms the selection, false otherwise
//--------------------------------------------------------------
bool ConfirmChoice(const char TicketType)
{
char Choice;
bool Confirmed;

// Print out their selection
cout << "\nYou have chosen to purchase ";
cout << fixed << setprecision(2);
switch (TicketType)
{
case NOSEBLEED:
cout << "Nosebleed ticket(s) at a price of $";
cout << NOSEBLEED_PRICE << ".\n";
break;
case BOX_SEAT:
cout << "Box Seat ticket(s) at a price of $";
cout << BOX_SEAT_PRICE << ".\n";
break;
case FIFTY_YARD_LINE:
cout << "Ticket(s) on the 50 yard line at a price of $";
cout << FIFTY_YARD_LINE_PRICE << ".\n";
break;
case STUDENT_SECTION:
cout << "Ticket(s) in the Student Section at a price of $";
cout << STUDENT_SECTION_PRICE << ".\n";
break;
}

// Confirm the selection
cout << "Do you wish to confirm your purchase? Enter Y or N: ";
cin >> Choice;
Choice = toupper(Choice);
while (Choice != 'Y' && Choice != 'N')
{
cout << "Invalid selection. Please enter either Y or N: ";
cin >> Choice;
Choice = toupper(Choice);
}
Confirmed = (Choice == 'Y');

// Check confirmation 
if (Confirmed)
cout << "You have confirmed your choice.\n" << endl;
else
cout << "You not confirmed your choice.\n" << endl;
return (Confirmed);
}

//-------------------------------------------
// Function: CalculateChange
// Purpose: To output the change due
// Parameters: ChangeDue - The amount of change needed 
// Returns: Nothing
//-------------------------------------------
void CalculateChange(const float ChangeDue)
{
int Change = 0;
int Dollars = 0;
int Quarters = 0;
int Dimes = 0;
int Nickels = 0;
int Pennies = 0;

// Compute change 
Change = ChangeDue * 100;
Dollars = Change / 100;
Change = Change % 100;
Quarters = Change / 25;
Change = Change % 25;
Dimes = Change / 10;
Change = Change % 10;
Nickels = Change / 5;
Pennies = Change % 5;

// Print out change
cout << "Your change is \n\t";
cout << Dollars << " Dollars\n\t";
cout << Quarters << " Quarters\n\t";
cout << Dimes << " Dimes\n\t";
cout << Nickels << " Nickels\n\t";
cout << Pennies << " Pennies\n";
}

//---------------------------------------------------------------------------
// Function: CalculateCost
// Purpose: Calculate the cost of the ticket purchase(s) (num_tickets * price_per_ticket)
// Parameters: PricePerTicket - Ticket price based on the type of ticket
// Returns: The cost of purchasing the chosen number of tickets 
//---------------------------------------------------------------------------
float CalculateCost(const float PricePerTicket)
{
int TicketCount;
float Cost;

cout << "How many tickets would you like? Please enter a positive integer value: ";
cin >> TicketCount;
while (TicketCount < 0)
{
cout << "Invalid entry. Please re-enter: ";
cin >> TicketCount;
}

Cost = PricePerTicket * TicketCount;
cout << "Your bill is: $" << fixed << setprecision(2) << Cost << endl;
return Cost;
}

//---------------------------------------------------------------------------
// Function: GetPaymentType
// Purpose: Ask the user how they want to pay, cash or credit
// Parameters: None
// Returns: Value is CREDIT or CASH (global character constants) 
//---------------------------------------------------------------------------
char GetPaymentType()
{
char Choice;

// Print the main menu describing the ticket payment types 
cout << "+-------------------------------------------------------+\n";
cout << "+ Welcome to our Ticket Office +\n";
cout << "+-------------------------------------------------------+\n";
cout << endl << endl;

// Cash or credit card (in upper case)
cout << "How would you like to pay?\n";
cout << "Enter C for cash or D for credit card: ";
cin >> Choice;
Choice = toupper(Choice);
while (Choice != CASH && Choice != CREDIT)
{
cout << "Invalid choice. Please enter C for cash or D for credit card: ";
cin >> Choice;
Choice = toupper(Choice);
}
return Choice;
}

//---------------------------------------------------------------------------
// Function: GetTicketType
// Purpose: Get the customer's choice between 4 types of tickets
// Parameters: Choice - Set to the user's choice
// Returns: Nothing
//---------------------------------------------------------------------------
void GetTicketType(char &Choice)
{
// Ask the customer what type of ticket s/he prefers to buy 
cout << "\nWhat type of ticket would you like?\n";
cout << "\t" << NOSEBLEED << " for Nosebleed Section, Price = $";
cout << NOSEBLEED_PRICE << endl;
cout << "\t" << BOX_SEAT << " for Box Seats, Price = $";
cout << BOX_SEAT_PRICE << endl;
cout << "\t" << FIFTY_YARD_LINE << " for Seats on the Fifty Yard Line, Price = $";
cout << FIFTY_YARD_LINE_PRICE << endl;
cout << "\t" << STUDENT_SECTION << " for Student Section, Price = $";
cout << STUDENT_SECTION_PRICE << endl;

// Get ticket choice (in upper case)
cout << "Enter choice: ";
cin >> Choice;
Choice = toupper(Choice);   
while (Choice != NOSEBLEED && Choice != BOX_SEAT && 
Choice != FIFTY_YARD_LINE && Choice != STUDENT_SECTION)
{
cout << "Invalid choice. Please re-enter: ";
cin >> Choice;
Choice = toupper(Choice);
}
}

//---------------------------------------------------------------------------
// Function: PayWithCash
// Purpose: Handles payment by cash. Asks the user for the money until
// they enter enough, then updates the ChangeDue parameter
// Parameters: Cost - The amount due for the purchase
// ChangeDue - The amount of change due to customer
// Returns: Nothing
//---------------------------------------------------------------------------
void PayWithCash(const float Cost, float &ChangeDue)
{
float CashOffered;

// Pay in cash
cout << "Please enter enough cash. Your bill is $" << Cost << ": $ ";
cin >> CashOffered;

// Check sufficiency
while (CashOffered < Cost)
{
cout << "That is not enough to pay for your purchase!\n"
<< " Please enter at least $" << Cost << ": ";
cin >> CashOffered;
}

// Calculate change
ChangeDue = CashOffered - Cost;
}

//---------------------------------------------------------------------------
// Function: PayWithCredit
// Purpose: Handles payment by credit. Basically, just prints a statement
// telling them that their card will be charged.
// Parameters: const float Cost - the amount due for the purchase
// Returns: Nothing
//---------------------------------------------------------------------------
void PayWithCredit(const float Cost)
{
cout << "Your credit card will be billed for $" << Cost << ".\n";
}

//---------------------------------------------------------------------------
// Function: main
// Purpose: This is the main program that calls functions above.
// Parameters: None
// Returns: Nothing
//---------------------------------------------------------------------------
int main()
{
// Declarations 

char TChoice ;   // Ticket type: Nosebleed, box seats etc.. 
TChoice << GetTicketType( &TChoice);
char PChoice = GetPaymentType() ;    // Payment choice: cash or credit card
bool Confirmed;  // Did the user confirm the selection
float Cost;  // The cost of the ticket puchased
float ChangeDue;     // The amount of change owed (for cash purchases)

// Print your name and UAID

// Get the choice of payment type

// Get the choice of ticket type
GetTicketType(TChoice );
{
cout << "You have chosen the " << TChoice << "tickets. " <<".\n";
}

// Confirm the selection

// If they confirm the purchase

// Call functions to figure out the price of ticket purchase(s) 

// Be sure to use the named constants

// Handle the payment

// Say goodbye 

// Else

// Cancel the purchase 

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T07:23:50.757

改变

```
TChoice << GetTicketType( &TChoice); 
```

简单

```
GetTicketType( &TChoice); 
```

既然`TChoice << GetTicketType( &TChoice);`这样做`bitwise left shift operation`了，它会在 .Your 函数返回 nothing(void) 之后期望一个整数类型`<<`，因此会导致错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T07:19:29.020

看起来您在这一行遇到了错误：

```
TChoice << GetTicketType( &TChoice); 
```

您正在调用`GetTicketType`并期望使用结果。这真的是你想要做的，因为它是一个`void`函数吗？

# c# - Vpn 上的性能监视器

> ID：12766863
> 
> 赞同：0
> 
> 时间：2012-10-07T07:15:24.767
> 
> 标签：c#, windows, networking

我在我的 C# 项目中使用 Windows 性能监视器类来测量通过网卡发送的字节等，一切似乎都很好。我正在使用网络索引号来确定用于记录性能数据的网络接口。我可以通过命令提示符查看网络索引号（netsh int ipv4 show int）

但是，我已连接到 vpn 并将网络索引号更改为引用 vpn，当我尝试读取性能监视器“nextValue()”时出现异常。

所以我的问题是，我可以使用“System.Diagnostic.PerformanceCounters”来获取从 VPN 发送的数据包等，还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T10:48:10.367

尝试使用 powershell 性能计数器，它们有很多功能......

可以在此处找到 power shell 命令（import-counter）的方式指南。

[http://ss64.com/ps/](http://ss64.com/ps/)

我在下面添加了一些示例代码，供您查看它们是如何调用的：

```
private static void LoadBLG(string CounterPath)
        {
            PowerShell ps = PowerShell.Create();
            ps.AddCommand("import-counter");
            ps.AddArgument(CounterPath);

            Console.WriteLine(CounterPath);
            Console.WriteLine("------------------------");

            foreach (PSObject result in ps.Invoke())
            {
                if (result.ImmediateBaseObject is PerformanceCounterSampleSet)
                {
                    PerformanceCounterSampleSet Counters = result.ImmediateBaseObject as PerformanceCounterSampleSet;
                    foreach (PerformanceCounterSample sample in Counters.CounterSamples)
                        Console.WriteLine("{0,-20}{1}",
                            sample.Path, sample.RawValue);
                }
            } // End foreach. 
```

祝你好运马修

# uiscrollview - 如何在特定点停止滚动视图？

> ID：12766864
> 
> 赞同：2
> 
> 时间：2012-10-07T07:15:25.820
> 
> 标签：uiscrollview

我有一个水平滚动的类别菜单。我想在用户滚动时在某些特定点停止滚动。我怎样才能做到这一点？？提前感谢您的回答。

# java - 搜索方法返回的超时时间，否则将抛出超时消息

> ID：12766865
> 
> 赞同：0
> 
> 时间：2012-10-07T07:15:26.420
> 
> 标签：java, multithreading, timer, timeout

我想通过 java main 执行一个搜索方法，并希望实现搜索方法返回的超时，否则它会抛出一个超时消息。如何使用线程或计时器类实现此超时功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T09:50:48.827

一种方法是将您的搜索任务提交给执行者，并[调用`get(timeout);`返回的未来](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html#get%28long,%20java.util.concurrent.TimeUnit%29)- 本质上是：

*   使用您的任务创建一个 Callable
*   超时运行它
*   如果超时，请取消它 - 为了使取消生效，您的 Callable 需要对中断做出反应

```
Callable<SearchResult> task = ...;
ExecutorService executor = Executors.newFixedThreadPool(1);
Future<SearchResult> f = executor.submit(task);

SearchResult result = null;
try {
    result = f.get(2, TimeUnit.SECONDS); //2 seconds timeout
    return result;
} catch (TimeOutException e) {
    //handle the timeout, for example:
    System.out.println("The task took too long");
} finally {
    executor.shutdownNow(); //interrupts the task if it is still running
} 
```

# android - 使用 PackageManager.setComponentEnabledSetting() 启用其他应用程序的 BroadcastReceiver

> ID：12766866
> 
> 赞同：1
> 
> 时间：2012-10-07T07:15:47.433
> 
> 标签：android, broadcastreceiver, securityexception, android-package-managers

我想从我的应用程序启动安装在我的 android 设备上的其他应用程序的 BroadcastReceiver。这是代码

```
ComponentName componentName  = new ComponentName("com.example.myapp","com.example.myapp.MyBroadcastReceiver");
pkgManager.setComponentEnabledSetting(componentName,
                         PackageManager.COMPONENT_ENABLED_STATE_ENABLED,
                         PackageManager.DONT_KILL_APP); 
```

“com.example.myapp”是包含“MyBroadcastReceiver”的其他应用程序的包名

我参考了帖子中给出的答案[Android PackageManager enable any application](https://stackoverflow.com/questions/8445881/android-packagemanager-enable-any-application) and [Android - can't enable BroadcastReceiver](https://stackoverflow.com/questions/2052589/android-cant-enable-broadcastreceiver)但它们似乎都没有工作。应用程序继续抛出权限拒绝 SecurityException。给定的是logcat

```
05-24 11:37:38.382: E/AndroidRuntime(8746): java.lang.SecurityException: Permission Denial: attempt to change component state from pid=8746, uid=10042, package uid=10041 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:31:02.367

```
public void setComponentEnabledSetting(ComponentName componentName,  
            int newState, int flags) {  
        setEnabledSetting(componentName.getPackageName(),  
                componentName.getClassName(), newState, flags);  
    }  

public void setApplicationEnabledSetting(String appPackageName,  
            int newState, int flags) {  
        setEnabledSetting(appPackageName, null, newState, flags);  
    }  

private void setEnabledSetting(  
            final String packageName, String className, int newState, final int flags) {  
        if (!(newState == COMPONENT_ENABLED_STATE_DEFAULT  
              || newState == COMPONENT_ENABLED_STATE_ENABLED  
              || newState == COMPONENT_ENABLED_STATE_DISABLED)) {  
            throw new IllegalArgumentException("Invalid new component state: "  
                    + newState);  
        }  
        PackageSetting pkgSetting;  
        final int uid = Binder.getCallingUid();  
        final int permission = mContext.checkCallingPermission(  
                android.Manifest.permission.CHANGE_COMPONENT_ENABLED_STATE);  
        final boolean allowedByPermission = (permission == PackageManager.PERMISSION_GRANTED);  
        boolean sendNow = false;  
        boolean isApp = (className == null);  
        String componentName = isApp ? packageName : className;  
        int packageUid = -1;  
        ArrayList<String> components;  
        synchronized (mPackages) {  
            pkgSetting = mSettings.mPackages.get(packageName);  
            if (pkgSetting == null) {  
                if (className == null) {  
                    throw new IllegalArgumentException(  
                            "Unknown package: " + packageName);  
                }  
                throw new IllegalArgumentException(  
                        "Unknown component: " + packageName  
                        + "/" + className);  
            }  
            if (!allowedByPermission && (**uid != pkgSetting.userId**)) {  
                throw new SecurityException(  
                        "Permission Denial: attempt to change component state from pid="  
                        + Binder.getCallingPid()  
                        + ", uid=" + uid + ", package uid=" + pkgSetting.userId);  
            }  
....  
} 
```

**它会比较uid，所以不能禁用或启用其他应用程序。** 来自：/frameworks/base/services/core/java/com/android/server/pm/PackageManagerService.java

# algorithm - 在毁坏之前旋转一棵树有什么好处？

> ID：12766871
> 
> 赞同：2
> 
> 时间：2012-10-07T07:16:17.047
> 
> 标签：algorithm, data-structures, tree

我正在阅读[**这篇文章**](http://adtinfo.org/libavl.html/Destroying-a-BST-by-Rotation.html)，其中提到我们可以通过以特定方式执行旋转来摆脱树的一侧，然后沿一个方向向下遍历树并删除元素。

虽然我理解他们想要做什么，但我不明白**为什么**？

**与简单的后订单删除相比，这种类型的删除可以提供哪些优势？**

我能想到的一个优点是节省了递归使用的内存，但我认为与遍历树两次（一次用于旋转，然后用于删除）相比，这是一个微不足道的开销。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T07:31:56.437

这篇文章似乎认为这种方法的重点是避免递归（以及它对堆栈空间的消耗）：“嗯......如果我们重新排列节点以使它们没有任何左子树怎么办？那么我们可以向右下降，无需跟踪堆栈中的任何内容。”

一般来说，当我不能确定递归的深度是否合理时，我更愿意避免递归，因为在你用完任何其他类型的内存之前很久就会用完堆栈空间——在某些情况下，因为系统被设计为限制递归捕获导致无限递归的错误。但是，我认为这在这里不太重要，您已经承认同一包中的其他例程需要递归。此外，递归的深度取决于树的深度，对于平衡树，这将大致是它的节点数的对数，因此永远不应该太深。

# iphone - Facebook 输入凭据的警告不会出现在真实设备 IOS6 上

> ID：12766872
> 
> 赞同：1
> 
> 时间：2012-10-07T07:16:35.000
> 
> 标签：iphone, objective-c, xcode, ios6, social-framework

当我们在真实设备中测试 IOS6 Facebook 共享功能时，它没有显示带有设置和取消按钮的警报视图，但在 IOS6 模拟器中工作正常。我们在 iphone 4s 和 Iphone5 中进行了测试，在这两款手机中，它都没有显示，并且在设置页面中输入凭据的警报视图。

有没有人发现同样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:22:55.437

使用新的 Social.Framework，如果用户没有在设置中为 Facebook、Twitter 或 Weebo 设置他的帐户，该应用程序将无法识别您有 Facebook 可用。

转到设置，然后转到 Twitter 或 Facebook 选项卡，您可以在其中设置您的帐户凭据。设置完成后，它将正常工作。

如果未设置相关帐户，这在模拟器中可以正常工作，但在手机上则不行。

![在此处输入图像描述](../Images/8569f96d888566ea24a73737e2623506.png) ![在此处输入图像描述](../Images/253467dbecfc20d39a66338cbf1d9415.png) ![在此处输入图像描述](../Images/25b4efa03dcd2ce2dae3f2a3f00b302f.png)

# asp.net - 如何在 gridview 中包含 DatePicker 文本框？

> ID：12766873
> 
> 赞同：2
> 
> 时间：2012-10-07T07:16:51.487
> 
> 标签：asp.net

我用过 Asp.net `GridView`，当然也用我自己的，我用下面的代码从 DB 中选择表并将所有数据读入`Gridview`：

```
 protected void Button2_Click(object sender, EventArgs e) 
    { 
        DataTable dt = DataProvider.ExecuteDataTable("[dbo].[Get_LastInsertedRowHowzeEducation_SP]", CommandType.StoredProcedure); 
        GridView1.DataSource = dt; 
        GridView1.DataBind(); 
    } 
```

其中一个与 BirthDate 相关的列，我设计了 a`Jquery` `DatePicker` `TextBox`所以我想将它`Gridview`作为 a 包含在其中一个列中`TextBox`并删除默认值`GridView` `TextBox`。那么，我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T07:26:55.160

您需要在您的内部使用模板列`GridView`，然后连接 JQuery 日期选择器：

结果如下：

![在此处输入图像描述](../Images/d180e336d01e5545d775261baa51c9e4.png)

```
<asp:GridView runat="server" ID="gvpicker" AutoGenerateEditButton="true" OnRowEditing="gvpicker_RowEditing">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:Label Text='<%# Eval("job_desc") %>' runat="server" />
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox runat="server" Text='<%# Bind("job_desc") %>' ID="myDatePicker" CssClass="myDatePickerClass" />
            </EditItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView>

<script>
    $(function () {
        var $gv = $("table[id$=gvpicker]");
        var $rows = $("> tbody > tr:not(:has(th, table))", $gv);
        var $inputs = $(".myDatePickerClass", $rows);

        $rows.css("background-color", "yellow");

        $inputs.datepicker();
    });
</script>

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!this.IsPostBack)
        {
            this.BindGrid();
        }
    }

    protected void gvpicker_RowEditing(object sender, GridViewEditEventArgs e)
    {
        this.gvpicker.EditIndex = e.NewEditIndex;
        this.BindGrid();
    } 
```

现在，如果您有自定义控件，只需替换

```
<asp:TextBox runat="server" Text='<%# Bind("job_desc") %>' ID="myDatePicker" CssClass="myDatePickerClass" /> 
```

为您的自定义控件

在数据绑定控件内的模板部分中，您可以放置​​您喜欢的任何控件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T07:21:21.403

您必须手动将列指定为`TemplateField`.
例如[http://www.vkinfotek.com/gridview/templatefields-in-gridview.html](http://www.vkinfotek.com/gridview/templatefields-in-gridview.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-27T10:16:50.230

看来，jQuery 库和 jQuery UI 库适用于您的项目。

```
<script type="text/javascript">
  $(document).ready(function () {
    $('.dummy').datepicker();
  });
</script>
```

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" Width="100%">
  <Columns>
    <asp:BoundField DataField="Name" HeaderText="Name" />
    <asp:TemplateField HeaderText="DOJ">
      <ItemTemplate>
        <asp:TextBox ID="txtDate" runat="server" class="dummy"></asp:TextBox>
      </ItemTemplate>
    </asp:TemplateField>
  </Columns>
</asp:GridView>
```

css 中没有“dummy”类的实现。它只是一个虚拟类。我们用它来识别那些在 Gridview 中的文本框，我们希望 jQuery 在那里生成 datepicker。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-31T10:53:12.940

在这里试试这个工作正常

```
<script src="js/jsDatepicker/bootstrap.js"></script>
    <%--<script src="js/jsDatepicker/jquery-1.10.2.js"></script>--%>
    <link href="js/jsDatepicker/jquery-ui.css" rel="stylesheet" />
    <script src="js/jsDatepicker/jquery-ui.js"></script>
    <script type="text/javascript">
        $(function () {
            $(".cal").datepicker({
                changeMonth: true,
                changeYear: true,
                yearRange: "1990:2100"
            });
        });
    </script>

<asp:TextBox ID="TextBox4"   placeholder="DD/MM/YYYY" CssClass="form-control cal" runat="server"></asp:TextBox>
<asp:RequiredFieldValidator ErrorMessage="*" ForeColor="Red" ControlToValidate="TextBox4" Display="Dynamic" runat="server" /> 
```

# c - select() 未检测到传入数据

> ID：12766875
> 
> 赞同：0
> 
> 时间：2012-10-07T07:17:07.290
> 
> 标签：c, unix, pthreads, select-function

**Objective:** N 个节点（运行在不同的机器上）应该通过相互建立 TCP 连接来相互通信。发送和接收消息由进程创建的 2 个线程完成。最初，主进程将所有节点相互连接，创建 2 个线程并为其提供文件描述符列表，线程可以使用这些文件描述符发送和接收数据。下面的结构由主进程填充并传递给线程。

```
typedef struct
{
    char hostName[MAXIMUM_CHARACTERS_IN_HOSTNAME];  /* Host name of the node */
    char portNumber[MAXIMUM_PORT_LENGTH];           /* Port number of the node */
    char nodeId[MAXIMUM_NODE_ID_LENGTH];            /* Node ID of the node */
    int socketFd;                                   /* Socket file descriptor */
    int socketReady;        /* Flag to indicate if socket information is filled */
}SNodeInformation; 
```

PS：socketFd 是由 accept() 或 socket() 接收的套接字描述符，具体取决于连接的建立方式（侦听来自节点的连接或连接到节点）。

使用大小为 MAX_NUM_OF_NODES 的 SNodeInformation 数组。

发送线程通过 nodeInformation 并向所有节点发送消息“Hello”，如下所示。

```
void *sendMessageThread(void *pNodeInformation) {

    int i;
    int ownNodeId;
    int bytesSent = 0;
    char ownHostName[MAXIMUM_CHARACTERS_IN_HOSTNAME];

    SNodeInformation *nodeInformation = (SNodeInformation *) pNodeInformation;
    SNodeInformation *iterNodeInformation;

    printf("SendMessageThread: Send thread created\n");

    if(gethostname(ownHostName, MAXIMUM_CHARACTERS_IN_HOSTNAME) != 0) {
        perror("Error: sendMessageThread, gethostname failed\n");
        exit(1);
    }

    for(i=0, iterNodeInformation=nodeInformation ; i<MAXIMUM_NUMBER_OF_NODES ; i++, iterNodeInformation++) {
        if(strcmp((const char*) iterNodeInformation->hostName, (const char*) ownHostName) != 0)  {
            /* Send message to all nodes except yourself */
            bytesSent = send(iterNodeInformation->socketFd, "Hello", 6, 0);

            if(bytesSent == -1) {
                printf("Error: sendMessageThread, sending failed, code: %s FD %d\n",     strerror(errno), iterNodeInformation->socketFd);
            }
        }
    }

    pthread_exit(NULL);
} 
```

接收线程通过 nodeInformation，设置文件描述符集并使用 select 等待传入数据，如下所示。

```
void *receiveMessageThread(void *pNodeInformation)
{
    int i;
    int fileDescriptorMax = -1;
    int doneReceiving = 0;
    int numberOfBytesReceived = 0;
    int receiveCount = 0;
    fd_set readFileDescriptorList;
    char inMessage[6];

    SNodeInformation *nodeInformation = (SNodeInformation *) pNodeInformation;
    SNodeInformation *iterNodeInformation;

    printf("ReceiveMessageThread: Receive thread created\n");

    /* Initialize the read file descriptor */
    FD_ZERO(&readFileDescriptorList);

    for(i=0, iterNodeInformation=nodeInformation ; i<MAXIMUM_NUMBER_OF_NODES ; i++, iterNodeInformation++) {
        FD_SET(iterNodeInformation->socketFd, &readFileDescriptorList);

        if(iterNodeInformation->socketFd > fileDescriptorMax) {
            fileDescriptorMax = iterNodeInformation->socketFd;
        }
    }

    printf("ReceiveMessageThread: fileDescriptorMax:%d\n", fileDescriptorMax);

    while(!doneReceiving) {
        if (select(fileDescriptorMax+1, &readFileDescriptorList, NULL, NULL, NULL) == -1) {
            perror("Error receiveMessageThread, select failed \n");
            return -1;
        }

        for(i=0 ; i<fileDescriptorMax ; i++) {
            if (FD_ISSET(i, &readFileDescriptorList)) {
                /* Check if any FD was set */
                printf("ReceiveThread: FD set %d\n", i);

                /* Receive data from one of the nodes */
                if ((numberOfBytesReceived = recv(i, &inMessage, 6, 0)) <= 0) {
                    /* Got error or connection closed by client */
                    if (numberOfBytesReceived == 0) {
                        /* Connection closed */
                        printf("Info: receiveMessageThread, node %d hung up\n", i);
                    }
                    else {
                        perror("Error: receiveMessageThread, recv FAILED\n");
                    }

                    close(i);

                    /* Remove from Master file descriptor set */
                    FD_CLR(i, &readFileDescriptorList); 
                    doneReceiving = 1;
                }
                else {
                    /* Valid data from a node */
                    inMessage[6] = '\0';

                    if(++receiveCount == MAXIMUM_NUMBER_OF_NODES-1) {
                        doneReceiving = 1;
                    }

                    printf("ReceiveThread: %s received, count: %d\n", inMessage, rece    iveCount);
                }
            }
        }
    }
    pthread_exit(NULL);
} 
```

**预期输出**：我只尝试了 2 个进程，P1（首先启动）和 P2 在 machine1 上运行，另一个在 machine2 上运行。机器中的两个进程都应该首先连接，然后线程应该发送和接收消息“Hello”并退出。

**观察到**的输出：P1 能够发送消息，P2（接收线程）能够接收消息“Hello”。但是 P1（接收线程）无法从 P2（发送线程）获取消息。两台机器上的应用程序代码是相同的，但每次，首先启动的进程都不会从另一个进程中获取消息。我添加了一个打印来检查是否设置了某些文件描述符，但我没有看到它用于 P1，而仅用于 P2。接收过程中的发送没有失败，它返回6。我检查了文件描述符的最大值，它是正确的。

如果我先启动 P2 然后启动 P1，那么我可以看到 P1 接收到来自 P2 的消息并且存在，而 P2 无限等待来自 P1 的消息。

我不确定问题是因为套接字描述符的使用不正确还是因为线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:06:38.413

两个问题：

1 正在设置的文件描述符的循环测试不包括放入集合中的所有文件描述符。（此编程错误预计是 OP 中描述的故障原因。）

2 传递给的文件描述符集合`select()`被 修改`select()`，因此需要重新初始化集合之前 for`select()`再次。（只有从多个套接字接收到数据时，编程错误才会显着。）

请参阅以下 OP 代码的 mod/s：

```
void *receiveMessageThread(void *pNodeInformation)
{
    ...

    printf("ReceiveMessageThread: Receive thread created\n");

    while(!doneReceiving) {
        /* Initialize the read-set of file descriptors */

        /* Issue 2 fixed from here ... */
        FD_ZERO(&readFileDescriptorList);

        for(i=0, iterNodeInformation=nodeInformation ; i<MAXIMUM_NUMBER_OF_NODES ; i++, iterNodeInformation++) {
            FD_SET(iterNodeInformation->socketFd, &readFileDescriptorList);

            if (iterNodeInformation->socketFd > fileDescriptorMax) {
                fileDescriptorMax = iterNodeInformation->socketFd;
            }
        }
        /* ... up to here. */

        printf("ReceiveMessageThread: fileDescriptorMax:%d\n", fileDescriptorMax);

        if (select(fileDescriptorMax+1, &readFileDescriptorList, NULL, NULL, NULL) == -1) {
            perror("Error receiveMessageThread, select failed \n");
            return -1;
        }

        for(i=0 ; i <= fileDescriptorMax ; i++) { /* Issue 1 fixed here. */
            ... 
```

# ios - 损坏的应用程序，viewWillAppear 之后的 UIViewcontroller EXC_BAD_ACCESS

> ID：12766880
> 
> 赞同：0
> 
> 时间：2012-10-07T07:17:39.517
> 
> 标签：ios, uiviewcontroller, pushviewcontroller

突然之间，我必须更改我的应用程序中的某些内容，导致它随机崩溃。在 viewWillAppear 之后，我得到一个 EXC_BAD_ACCESS。我已经在我的视图加载方法中注释了所有内容，以初始化一个简单的视图。有时它运行良好而其他运行不正常，我附上了两个不同的控制台日志。

```
-(void) loadView {
        UIView *uv = [[UIView alloc] initWithFrame:CGRectZero];
        [self setView:uv];
        [uv release];
        NSLog(@"[BookScrollVC.m] loadView >>>");
} 
```

当它崩溃时

```
2012-10-07 09:07:51.780 DILPStatic[2340:207] [BookScrollVC.m] loadView >>>
2012-10-07 09:07:51.781 DILPStatic[2340:207] [BookScrollVC.m] viewDidLoad
2012-10-07 09:07:51.782 DILPStatic[2340:207] [viewDidLoad] exiting...
2012-10-07 09:07:51.783 DILPStatic[2340:207] [viewWillAppear]
Current language:  auto; currently objective-c
Program received signal:  “EXC_BAD_ACCESS”. 
```

当它起作用时

```
2012-10-07 09:12:54.702 DILPStatic[2385:207] [BookScrollVC.m] loadView >>>
2012-10-07 09:12:54.703 DILPStatic[2385:207] [BookScrollVC.m] viewDidLoad
2012-10-07 09:12:54.704 DILPStatic[2385:207] [viewDidLoad] exiting...
2012-10-07 09:12:54.705 DILPStatic[2385:207] [viewWillAppear]
2012-10-07 09:12:54.706 DILPStatic[2385:207] *** __NSAutoreleaseFreedObject(): release of previously deallocated object (0x4b59fc0) ignored
2012-10-07 09:12:55.058 DILPStatic[2385:207] [viewDidAppear] 
```

它由 pushviewcontroller 加载。

```
BookScrollVC *bookScrollVC = [[BookScrollVC alloc] initWithBook:bookPath];

[self.navigationController setToolbarHidden:YES];
[self.navigationController setNavigationBarHidden:YES];
[self.navigationController pushViewController:bookScrollVC animated:YES];

[bookScrollVC release]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T06:16:27.393

我确实通过清理在其他类中未正确使用的变量来解决问题。这包括丢失 [... release] 和错误地释放 ivars。

希望它提醒某人实际检查这些东西，尽管它可能不再是 ARC 的问题。

# android - 开始 BlackBerry 应用程序开发

> ID：12766881
> 
> 赞同：2
> 
> 时间：2012-10-07T07:17:49.807
> 
> 标签：android, blackberry, java-me, blackberry-playbook, blackberry-10

我是一名移动应用程序开发人员，在 Windows Phone 应用程序开发和 Android 方面拥有相当不错的经验。现在，我也想开始为黑莓开发。

通过[BlackBerry 官方网站，我了解到可以使用各种](https://developer.blackberry.com/)[Runtime for Android 应用程序](https://developer.blackberry.com/android/documentation/Mastertopic_1849583_11.html)工具将我现有的 Android 应用程序移植到 Blackberry 10 和 BlackBerry Playbook 。

**我的问题：**什么是可取的？[我应该使用标准的Blackberry Java SDK](https://developer.blackberry.com/java/)为 Blackberry 开发应用程序，还是可以在 Android 上制作我的应用程序，然后为 BlackBerry-10 和 BlackBerry Playbook 重新打包它们？我知道某些 Android 应用程序可能与 BlackBerry 不兼容，例如依赖 Google Maps 或 Android 文本转语音引擎的软件包，但现在我不打算在我的应用程序中使用它们黑莓。

鉴于我在编程方面的知识，我想我有*三个*选择：

1.  使用 C/C++ NDK 构建
2.  在 Android 上构建应用程序，然后为 BlackBerry 重新打包它们
3.  使用 BlackBerry Java（移动版）构建

哪个是最可取和方便的？

我对 Android 很熟悉，但对 J2ME 一无所知。因此，我认为与其学习在 J2ME 中绕过 UI，不如在 Android 中完成，然后为 Blackberry 重新打包。那是正确的做法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-08T00:55:15.337

您已经将传统的 BlackBerry Java 平台与基于 QNX 的新型 BlackBerry Playbook（平板电脑）和 Blackberry 10（手机）平台混为一谈。您首先必须确定您实际定位的平台。通常，没有任何限定词的“黑莓”是指黑莓 Java 平台，它是目前拥有 8000 万用户的平台。BlackBerry 10 仍在开发中，因此没有用户，而 BlackBerry Playbook 的用户数量远少于 BlackBerry Java 平台。

如果你想针对这 8000 万黑莓用户，那么这里没有真正的决定——只有 Java-ME 应用程序将在该平台上运行。旧版 BlackBerry 平台上没有适用于 Android 的运行时。

如果您展望未来，并且希望以 BlackBerry 10 或 BlackBerry Playbook 为目标，那么是的，如果您已经编写了 Android 应用程序，Android 运行时对您来说是一个不错的选择。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-07T17:27:13.833

您提到了 JavaME，但也提到了重新打包 Android 应用程序。JavaME 对应于基于 java 的 BlackBerry 平台；当前版本是 BlackBerry 7.1。Android 播放器并非基于 JavaME，而是遵循 Android 版本，并且仅适用于新的 BlackBerry 平台，包括 BlackBerry PlayBook OS（2.1 是最新的）和目前处于 beta 3 的 BlackBerry 10（注意 RIM 已经宣布它将在某个时候提供一个 BlackBerry 10 端口）。

许多 Android 应用程序只需要重新打包，甚至不需要重新编译。重新打包并提交到 PlayBook/BlackBerry 10 商店。

有关详细信息，请参阅[https://developer.blackberry.com/android/ 。](https://developer.blackberry.com/android/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-09T09:46:28.720

原生黑莓开发意味着：

1) 适用于 OS 7 及更低版本的 Java ME - 庞大的客户群 2) 适用于 Playbook 的 QNX - 较小的客户群，将在 2013 年第二季度被 BB10 取代 3) 适用于 BB10 的 Cascades/Qt/QML - 难以估计会有多大的用户群是

我个人对黑莓10开发的感受：

我是一名熟练的 Android 开发人员（我的应用程序从 Play Store 总共有超过 600 万次下载），我花了一些时间使用 Cascades/Qt/C++ 开发 BB10 应用程序，我必须说它有时甚至比 Android 开发更容易学习曲线陡峭。

特别是 QML 比 Android 的布局更易于使用和直观。在为 BB10 创建应用程序时，您可以将 QML/Javascript 代码与 C/C++ 混合使用（理论上甚至可以避免 C/C++ 并仅使用 QML/Javascript）。

对我来说最糟糕的是 C++，因为这种语言（与 Java 相比）具有更多特性（如何使用指针的多种方式、如何创建对象实例的多种方式、重写的运算符和预处理器宏），因此它比 Java 更容易迷路。但这仍然是可行的，没有什么重要的。

关于移植 Android 应用程序：我认为这不是一个好主意。它们在 BB10/Playbook 上看起来很丑，所以我认为它们不会给你带来成功。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T18:44:06.793

很高兴听到您对使用 Android 进行编码感到满意。恭喜您，Blackberry 为您在黑莓世界中部署应用程序开辟了道路。

因此，请清除您的想法，留下一些您的应用程序将被黑莓用户接受的东西。

由于您正在为 android 编写代码，这意味着您对 java 很满意。而且您对 J2ME 会很满意。

它几乎一样。

现在 QNX 有点不同，但并没有你无法理解的不同。

最重要的是你知道 c/c++ 。
欢迎来到黑莓世界……别想那么多……试试看

# php - iOS：通过 PHP 在 mysql 数据库中存储 UIWebView 表单的值

> ID：12766883
> 
> 赞同：0
> 
> 时间：2012-10-07T07:18:26.013
> 
> 标签：php, html, mysql, ios, xcode

我在 UIWebView 中创建了一个 html 表单。在 html 表单中点击提交时，我调用了一个 php 脚本，它将值插入到 mysql 数据库中。

我无法通过表单操作中的 POST 方法将值存储在数据库中。当我尝试通过硬编码值来调试我的脚本时，我发现没有调用 php 脚本。

如果我的方法有误，请指导我 - 通过从嵌入 UIWebView 的 html 页面中调用 php 脚本

# .net - ASP.NET MVC 4 测试控制器

> ID：12766884
> 
> 赞同：0
> 
> 时间：2012-10-07T07:18:40.267
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-4

我有一个简单的动作：

```
[HttpPost]
public virtual ActionResult AddVote(string id, sbyte value)
{
   //...
   if (somethingIsWrong)
      ModelState.AddModelError("", "SomethingIsWrong");
   //...
} 
```

现在我想测试 ModelState 是否有效/无效：

```
[Fact]
public void AddVotePostTest()
{
   var controller = new VoteController();
   controller.AddVote("someId", 1);

   Assert.True(controller.ModelState.IsValid); //AccessViolationException here
} 
```

但是我在调​​用controller.ModelState.IsValid 时得到了AccessViolationException。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T07:10:07.907

该错误是由我的测试项目中引用了 System.Web.Mvc 3 引起的。我已经引用了 System.Web.Mvc 4 并且问题消失了

# django - 为什么我的 urls.py 不适用于 Django

> ID：12766889
> 
> 赞同：1
> 
> 时间：2012-10-07T07:19:11.173
> 
> 标签：django, web, django-urls

今天我用'Building_a_blog_in_30_mins_with_Django_Screencast'编码我的博客时，我遇到了一些问题。当我点击文章标题时，它无法出现正确的页面。！

```
Page not found (404)
Request Method:     GET 
```

使用 myblog.urls 中定义的 URLconf，Django 按以下顺序尝试了这些 URL 模式：

```
^$
^(?P<pk>\d+)/$
^admin/
^admin/doc/ 
```

当前 URL app/1 与其中任何一个都不匹配。

您看到此错误是因为您的 Django 设置文件中有 DEBUG = True 。将其更改为 False，Django 将显示标准 404 页面。

这是我的 urls.py：

```
url(r'^$',ListView.as_view(queryset=Post.objects.all().order_by("created[:2]template_name="                                                                               blog.html")), 
url(r'^(?P<pk>\d+)/$',DetailView.as_view( model=Post, template_name="post.html")),
url(r'^admin/', include(admin.site.urls)),
url(r'^admin/doc/', include('django.contrib.admindocs.urls')) 
```

我不知道这是怎么回事。请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T07:24:48.467

您需要添加`'app/'`您的网址。

```
url(r'^app/(?P<pk>\d+)/$',DetailView.as_view( model=Post, template_name="post.html")), 
```

或者您可能需要在`urls.py`您的应用程序中定义这些 url（命名`app`？）并将其包含在站点 main`urls.py`

```
url(r'app/', include('app.urls')) 
```

# c# - 对象的 ActualHeight 和 ActualWidth 始终为零

> ID：12766891
> 
> 赞同：3
> 
> 时间：2012-10-07T07:19:14.780
> 
> 标签：c#, xaml, windows-runtime, actualwidth, actualheight

我有一个`Canvas`这样的`TextBlock`：

```
<Canvas x:Name="ContentPanel" Grid.Row="1" DoubleTapped="ContentPanel_DoubleTapped">
        <TextBlock x:Name="WordBlock" FontSize="226.667" FontFamily="Segoe UI Semilight" TextAlignment="Center"
                   RenderTransformOrigin="0.5, 0.5">
            <TextBlock.RenderTransform>
                <TranslateTransform x:Name="translate"/>
            </TextBlock.RenderTransform>
        </TextBlock>
    </Canvas> 
```

我的应用程序是这样的，当用户导航到此页面时，`TextBlock`将居中，`Canvas`如果`TextBlock`的宽度大于画布的宽度，则会出现选取框动画：

```
private void SetAnimation()
{
    Canvas.SetLeft(WordBlock, (ContentPanel.ActualWidth - WordBlock.ActualWidth) / 2);
    Canvas.SetTop(WordBlock, (ContentPanel.ActualHeight - WordBlock.ActualHeight) / 2);

    if (WordBlock.ActualWidth > ContentPanel.ActualWidth)
    {
        MarqueeAnimation.From = WordBlock.ActualWidth;
        MarqueeAnimation.To = -WordBlock.ActualWidth;
        MarqueeAnimation.Duration = new Duration(new TimeSpan(0, 0, 10));
        MarqueeBoard.Begin();
    }
} 
```

此方法称为 OnNavigatedTo。我不知道为什么`TextBlock`不会居中，因为`ActualHeight`and`ActualWidth`属性总是返回为 0.0。我不想设置固定尺寸，因为这是一个 Windows 应用商店应用程序，并且希望它可以跨不同的屏幕尺寸进行缩放。

有任何想法吗？我被困住了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T10:12:21.953

当 OnNavigatedTo 被调用时，我不相信页面实际上已经被绘制了。在尝试调整大小和重新排列事物时，我也有类似的困惑。答案似乎是等到页面加载完成然后进行计算：

```
public ChallengePage()
{
  this.InitializeComponent();
  this.Loaded += ChallengePage_Loaded;
}

void ChallengePage_Loaded(object sender, RoutedEventArgs e)
{
  *Do your calculations which use ActualWidth and ActualHeight in here*
} 
```

我相信你会需要这样的东西。将 Loaded 处理程序添加到页面的初始化中，然后您可以从那里调用 SetAnimation。

# excel - Excel 组合框不合并来自两列的条目，而是将它们列为两个单独的条目

> ID：12766899
> 
> 赞同：0
> 
> 时间：2012-10-07T07:20:49.137
> 
> 标签：excel, vba

我有下拉需要从 lookupDept 工作簿上的两列中提取信息并合并。例如我有：

```
deptCode deptName
BS       Business School
CD       Design and Technology
CG       Chemical Engineering
CM       Chemistry
CO       Computer Science 
```

我已经设法解决了关于从两个电子表格列中提取信息以在组合框中使用的问题。但不幸的是，组合框列表现在看起来像这样：

```
BS
CD
CG
CM
Business School
Design and Technology
Chemical Engineering
Chemistry 
```

当我希望它看起来像这样时：

```
BS Business School
CD Design and Technology
CG Chemical Engineering
CM Chemistry 
```

这需要合并两列信息（列已命名为*deptCode*和*deptName*），但我不太确定如何完成它。这是我迄今为止尝试过的，来自两列的代码列表信息，而不是合并它们：

```
Private Sub UserForm_Initialize()

Dim c_deptCode As Range
Dim c_deptName As Range
Dim ws_dept As Worksheet
Set ws_dept = Worksheets("lookupDept")

For Each c_deptCode In ws_dept.Range("deptCode")
  With Me.cbo_deptCode
    .AddItem c_deptCode.Value
    .List(.ListCount - 1, 1) = c_deptCode.Offset(0, 1).Value
  End With
Next c_deptCode

For Each c_deptName In ws_dept.Range("deptName")
  With Me.cbo_deptCode
    .AddItem c_deptName.Value
  End With
Next c_deptName

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T08:57:09.213

看起来主要问题是您添加的第二个范围与第一个完全分开（我知道这是您的问题，所以我会为指出明显的:) 道歉）。在任何情况下，您都可以执行以下操作 - 基本上将两个范围的值组合起来，然后将该单个值添加到下拉列表中。主要变化是添加了两个新变量（表示包含命名范围值的数组）并将`For`循环压缩为一个。

```
Private Sub UserForm_Initialize()

Dim c_deptCode As Range
Dim c_deptName As Range
Dim deptCodes As Variant
Dim deptNames As Variant

Dim ws_dept As Worksheet
Set ws_dept = Worksheets("lookupDept")

' Assign each range to an array containing the values
deptCodes = Choose(1, ws_dept.Range("deptCode"))
deptNames = Choose(1, ws_dept.Range("deptName"))

' Note that this blindly uses deptCode as a sort of control.
' This could be handled a bit better, but should work for this case
For i = 1 To ws_dept.Range("deptCode").Rows.Count
  ' Create the combined name (code + space + name)
  CombinedName = deptCodes(i, 1) & " " & deptNames(i, 1)
  cbo_deptCode.AddItem CombinedName
Next i

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T09:02:49.920

将`ColumnCount`组合框的属性设置为，并将数据作为二维数组`2`加载到属性中`List`

您还可以设置列宽以适应使用`ColumnWidths`

```
Private Sub UserForm_Initialize()
    Dim c_deptCode As Range
    Dim c_deptName As Range
    Dim ws_dept As Worksheet

    Dim aDat() As Variant
    Dim i As Long

    Set ws_dept = Worksheets("lookupDept")
    Set c_deptCode = ws_dept.Range("deptCode")
    Set c_deptName = ws_dept.Range("deptName")
    aDat = c_deptCode
    ReDim Preserve aDat(1 To UBound(aDat, 1), 1 To 2)
    For i = 1 To UBound(aDat, 1)
        aDat(i, 2) = c_deptName.Cells(i, 1)
    Next
    With cbo_deptCode
        .ColumnCount = 2
        .ColumnWidths = "20;50"
        .List = aDat
    End With
End Sub 
```

# android - 如何在 syscall(android kernel) 中转储调用堆栈？

> ID：12766901
> 
> 赞同：2
> 
> 时间：2012-10-07T07:20:58.527
> 
> 标签：android, kernel, system-calls

我想知道当手机（android）意外重启时谁叫*sys_reboot*。

有没有办法在**系统调用**（android内核）中转储调用堆栈？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:24:59.953

如果您只想要*内核*调用跟踪，您可以通过[`dump_stack()`](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=blob;f=lib/dump_stack.c). [`panic()`](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=blob;f=kernel/panic.c;hb=HEAD)所谓的，除其他外。`BUG()`/`BUG_ON()` [包装器](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=blob;f=include/asm-generic/bug.h)给它一个更具描述性的消息和一个可选的条件测试。

但是，*用户级堆栈跟踪*，尤其是符号堆栈跟踪，不能直接从内核中可靠地获得。可以将堆栈内存复制到内核空间并记录内容，或者如果没有优化帧指针，甚至可以启发式遍历`SP`/`FP`链接，但是要解析符号，它需要访问和解析 ELF 信息。我不确定是否有人将其作为纯内核端实现。一个更简单的解决方案是从您的系统调用挂钩中停止程序，生成一个附加到它的用户空间调试器，提取堆栈跟踪，完成后继续程序。

有关如何执行此操作的信息，请参阅此 SO 帖子[call_usermodehelper / call_usermodehelperpipe 用法。](https://stackoverflow.com/questions/7143105/call-usermodehelper-call-usermodehelperpipe-usage)

另请参阅此 SO 帖子：[How to print the userspace stack trace in linux kernelspace](https://stackoverflow.com/questions/10199130/how-to-print-the-userspace-stack-trace-in-linux-kernelspace)以获取对同一问题的另一个参考。

# regex - 对正则表达式模式感到困惑

> ID：12766902
> 
> 赞同：1
> 
> 时间：2012-10-07T07:21:05.207
> 
> 标签：regex

search pattern like`[a-zA-Z][a-zA-Z]*`和 和有什么不一样`[a-zA-Z]*` ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T07:22:44.957

第一个匹配一个`[a-zA-Z]`后跟零个或多个`[a-zA-Z]`。

第二个匹配零个或多个`[a-zA-Z]`。

* * *

第一个也可以写成`[a-zA-Z]+`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T07:26:42.430

正则表达式`[a-zA-Z][a-zA-Z]*`意味着您要求应该有一个字母字符**可选地**后跟**任意**数量的字母。另一方面，`[a-zA-Z]*`意味着字母表任务完全关闭。

例如，您的第一个正则表达式匹配 strings `azxxx`，`abccdef`但 failed`2abcd`和`22`空白字符串。但是第二个正则表达式也可以匹配一个空白字符串。

对于第一个正则表达式，您可能只想说：`[a-zA-Z]+`而不是。

# java - 操作没有收到表单的值

> ID：12766910
> 
> 赞同：0
> 
> 时间：2012-10-07T07:23:38.090
> 
> 标签：java, jsp, struts2

jsp中如何获取表单发送的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T07:27:04.663

这是因为您没有将值发送`Name`回控制器。为了将值发送回操作，您只需将它们作为表单字段发送，在您的情况下，您只是显示它们但不将它们发送回来。

一种解决方案是将名称存储为隐藏字段，例如

```
 <s:form action="AddProduct" >
        <tr><td>
                <label for="name">Name:${Product.name}</label>
                <s:hidden name="name" value="%{Product.name}"/>
        </td></tr>
     <s:submit/>
 </s:form> 
```

确保您的操作类中应该有 name 属性，或者如果您的操作类中有一个具有 name 属性的 bean，而不是隐藏字段的名称 shd 是`beanName.name`

# php - 使用 PHP 在数据库中保存 IP 和其他访问者信息

> ID：12766911
> 
> 赞同：0
> 
> 时间：2012-10-07T07:23:38.217
> 
> 标签：php, sql, database, ip

我正在尝试将访问者信息存储在数据库中。如果它不存在，我需要创建一个表，然后存储信息。但是信息没有被存储，我需要代码方面的帮助。代码 -

```
// visitor information
$ip = addslashes((getenv(HTTP_X_FORWARDED_FOR)) ? getenv(HTTP_X_FORWARDED_FOR) : getenv(REMOTE_ADDR));
$visitorReferrer = addslashes(( $_SERVER['HTTP_REFERER'] ) ? $_SERVER['HTTP_REFERER'] : 'Referrer undetectable.');
$visitorBrowser = addslashes(( $_SERVER['HTTP_USER_AGENT'] ) ? $_SERVER['HTTP_USER_AGENT'] : 'Browser undetectable.');

// connect database
$con = mysql_connect("localhost","UNAME","PASS");
if (!$con)
{
  die('Could not connect: ' . mysql_error());
}

// Create table
mysql_select_db("DBNAME", $con);
$sql = "CREATE TABLE IF NOT EXISTS `logs` (
 `id` int(11) unsigned NOT NULL auto_increment,
 `ip` varchar(255) NOT NULL default '',
 `brow` varchar(255) NOT NULL default '',
 `times` varchar(500) NOT NULL default '',
  PRIMARY KEY  (`id`)
  ) ENGINE=MyISAM  DEFAULT CHARSET=utf8";

// query
mysql_query($sql,$con);
mysql_close($con);

mysql_query("INSERT INTO 'logs' (ip, ref, brow, times ) VALUES('{$ip}', '{$visitorReferrer}', '{$visitorBrowser}', now())");
mysql_close($con);

// image header to browser.
header("Content-Type: image/jpeg");

// create image and allocate colors...
$im = @imagecreate(110, 20) or die("Cannot Initialize new GD image stream");
$background_color = imagecolorallocate($im, 0, 0, 0);
$text_color = imagecolorallocate($im, 233, 14, 91);

// IP text
imagestring($im, 1, 5, 5,  "Hello $ip !", $text_color);
imagepng($im);
imagedestroy($im); 
```

仍然无法使用该建议，（此处为屏幕截图） [http://0dae.in/cap1.png](http://0dae.in/cap1.png) "phpadmin"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T07:28:01.197

您的插入语句引用了名为“ref”的列，该列不是您正在创建的表的一部分。

# asp.net - 使用 ASP.NET 动态填充下拉列表

> ID：12766914
> 
> 赞同：0
> 
> 时间：2012-10-07T07:24:01.810
> 
> 标签：asp.net, vb.net

在我的一种形式中，有两个下拉字段。第二个下拉列表必须从数据库中填充，从第一个下拉列表的选择中动态填充。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T07:39:56.510

如果`SelectedIndexChanged`是第一个，添加代码以根据第一个列表的选定值`DropDownList`填充第二个`DropDownList`

像这样：

```
<asp:DropDownList runat="server" ID="from" AutoPostBack="true" CausesValidation="false" OnSelectedIndexChanged="from_SelectedIndexChanged">
</asp:DropDownList>

<asp:DropDownList runat="server" ID="to" />

    protected void from_SelectedIndexChanged(object sender, EventArgs e)
    {
        var selectedValue = this.from.SelectedValue;

        this.to.DataSource = /*get the data of the second list based on: selectedValue*/;
        this.to.DataBind();
    } 
```

# c# - 从 DataList 隐藏已删除的行而不重新绑定 DataSource

> ID：12766916
> 
> 赞同：2
> 
> 时间：2012-10-07T07:24:14.300
> 
> 标签：c#, asp.net

请考虑这些操作 -

1.  **在DataList**中绑定文件列表。
2.  用户单击删除**LinkBut** ​​ton后，在 **ItemCommandEvent**中删除文件。
3.  由于重新绑定整个数据效率低下，我只是隐藏已删除的行。

以下代码显示 DataList 中的文件。每行旁边都有一个删除按钮。

```
<asp:DataList ID="DataList1" OnItemCommand="DataList1_ItemCommand" runat="server">                
    <ItemTemplate>        
        <tr>
            <asp:Label Text='<%# Eval("ContainingFolder") as string + "\\" + Eval("FileName") as string %>' 
                Visible="false" ID="lblFullPath" runat="server" />
            <td><%# Eval("FileName") %></td>
            <td><%# Eval("ContainingFolder") %></td>
            <td><%# Eval("FileSize") %></td>
            <td><%# Eval("Modified") %></td>
            <td>
                <asp:LinkButton Text="Delete" ID="linkDelete" runat="server" />
            </td>
        </tr>            
    </ItemTemplate>
</asp:DataList> 
```

在 ItemCommand 事件处理程序中，此代码从此列表中删除选定的文件。

```
protected void DataList1_ItemCommand(object source, DataListCommandEventArgs e)
{
    if (e.Item.ItemType != ListItemType.Item && e.Item.ItemType != ListItemType.AlternatingItem) return;

    var selectedItem = e.Item.FindControl("lblFullPath") as Label;

    e.Item.Visible = false;       //doesn't work     

    File.Delete(selectedItem.Text);
} 
```

但是**e.Item.Visible = false**不会隐藏该行。作为此处找到的解决方法，[如何隐藏数据列表中的项目](https://stackoverflow.com/questions/9394887/how-to-hide-an-item-in-datalist)

我已将内容包装在占位符控件中。

```
<ItemTemplate>
    <asp:PlaceHolder ID="ph1" runat="server">
        <%--wrapped content--%>
    </asp:PlaceHolder>
</ItemTemplate> 
```

并隐藏占位符控件 -

```
protected void DataList1_ItemCommand(object source, DataListCommandEventArgs e)
{
    if (e.Item.ItemType != ListItemType.Item && e.Item.ItemType != ListItemType.AlternatingItem) return;

    var selectedItem = e.Item.FindControl("lblFullPath") as Label;
    //e.Item.Visible = false;
    e.Item.FindControl("ph1").Visible = false;
    File.Delete(selectedItem.Text);
} 
```

> 通常在 asp.net 中隐藏父控件会隐藏其所有子控件。

但我无法理解，

> 为什么在 DataList 的情况下隐藏父控件 e.Item 不会隐藏其包含的元素？你能给些建议么。

感谢您的帮助。

**编辑：**更新有关生成要在 DataList 中显示的文件列表的更多信息。

*   在按钮单击时在运行时生成 fileList，**此列表当前不是持久的。**

> ```
> protected void btnFindDuplicates_Click(object sender, EventArgs e)
> {
>     DataList1.DataSource = FindDuplicates();
>     DataList1.DataBind();
> } 
> ```

*   在 delete Click 的事件处理程序中，删除操作已经成功完成。
*   所以，只是为了从页面中删除已删除的项目，重新生成数据源并绑定它是不明智的。隐藏对我来说似乎更合乎逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T09:25:56.950

我使用 JQuery 和 PageMethods 创建了这个示例：

### 结果

![在此处输入图像描述](../Images/6661c137df1541f17b22a2310bc26fd7.png)

### ASPX

```
<script>
    $(function () {
        var $list = $("table[id*=myDataListID]");
        var $buttons = $("input:submit[id*=remove]", $list);

        $buttons.click(function (e) {
            e.preventDefault();

            if (!confirm("Are you sure?")) {
                return false;
            }

            var $self = $(this);
            var $jobID = $self.closest("tr").children().find("span[id*=jobID]");

            $buttons.prop("disabled", true);

            $.ajax({
                url: "<%: this.ResolveClientUrl("~/Topics/JQuery/Ajax/RemoveRowUsingJQueryAfterCallingService.aspx/Remove") %>",
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: "{id: " + $jobID.text() + "}",
                async: true,
                cache: false,
                success: function () {
                    $buttons.prop("disabled", false);
                    $self.closest("tr").remove();
                },
                error: function (XHResponse, errorMessage, errorCode) {
                    $buttons.prop("disabled", false);
                    alert(errorMessage);
                }
            });
        });
    });
</script>

<asp:DataList runat="server" DataKeyField="job_id" DataSourceID="lds" ID="myDataListID">
    <HeaderTemplate>
        <tr>
            <th>
                &nbsp;
            </th>
            <th>
                ID
            </th>
            <th>
                Name
            </th>
        </tr>
    </HeaderTemplate>
    <ItemTemplate>
        <tr>
            <td>
                <asp:Button Text="Remove" runat="server" ID="remove" />
            </td>
            <td>
                <asp:Label Text='<%# Eval("job_id") %>' runat="server" ID="jobID" />
            </td>
            <td>
                <asp:Label ID="jobDesc" Text='<%# Eval("job_desc") %>' runat="server" />
            </td>
        </tr>
    </ItemTemplate>
</asp:DataList> 
```

### 背后的代码

```
[WebMethod]
public static void Remove(Int16 id)
{
    // simulate deleting the file
    Thread.Sleep(3000);
} 
```

[我刚刚将完整的工作示例上传到我的 GitHub 站点](https://github.com/jupaol/SO-Answers/blob/master/Visual%20Studio%202012/src/SO/WebForms/WebForms_1/Topics/JQuery/Ajax/RemoveRowUsingJQueryAfterCallingService.aspx)

# c# - 在同一时间 c# 表单中显示/隐藏项目

> ID：12766917
> 
> 赞同：-3
> 
> 时间：2012-10-07T07:24:41.153
> 
> 标签：c#, windows

我有 20 个 C# 表单中的图片框，并将此控件重命名为 p1、p2、p3，现在我应该同时显示/隐藏此控件。现在我需要一个比相同数组更快地更改此控件属性的想法。为此推进我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T07:39:49.420

如果我理解你写的：

```
var PB = this.Controls.ofType<PictureBox>(); 
```

以及返回一个`IEnumerable`PictureBoxes 的，包含表单中的所有内容。

```
foreach (var pb in PB)
  pb.Visible = false; 
```

**编辑**以检查图片框是偶数还是奇数，您可以使用以下内容：

```
String str = pb.name.subString(1);
if (Int32.parse(str) % 2 == 0)
    //even
else 
    //odd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T08:12:32.463

更简单的方法是将这 20 个图片框添加到 a 中`Panel`，然后使用其`Visible`属性同时*显示/隐藏*它们。代码可能是这样的：

```
Panel container = new Panel();
//example, use whatever do you need
container = new Size(100, 100);
container = new Position(0, 0);
//add the panel to the form
this.Controls.Add(container);

//set the pictureboxes here...

//Add the pictureboxes to the panel
container.Controls.AddRange(new Control[]{p1, p2, p3}); //and so on

//Then when you need to show them
container.Visible = true; //false to hide them 
```

# c++ - 哪个浏览器插件框架适用于 Linux 中的所有浏览器

> ID：12766919
> 
> 赞同：1
> 
> 时间：2012-10-07T07:25:18.717
> 
> 标签：c++, linux, browser, opera, firebreath

我正在为 Linux 创建一个浏览器插件。它应该支持所有的浏览器——firefox、chrome、opera。我选择了firebreath，但它似乎不支持Linux 中的opera。有没有更好的选择！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T15:34:16.717

浏览器插件不会做你想做的事。浏览器插件不能“阻止默认 [内置] 下载管理器下载”或“将下载 url 传递给 [an] 外部下载管理器”。浏览器插件只知道单个页面，并且只有当它们被注入到带有 object/embed 标记的页面或加载以处理具有特定 mimetype 的文档时。

有关差异的更多信息，请参阅[http://npapi.com/extensions](http://npapi.com/extensions)

快速谷歌搜索浏览器扩展框架产生了几种可能性：

*   [http://kangoextensions.com/](http://kangoextensions.com/)
*   [http://crossrider.com/](http://crossrider.com/)

我不知道他们是否在linux上工作。

**注意：**尽管您需要浏览器扩展，但最终解决方案可能涉及使用浏览器插件的浏览器扩展，在这种情况下，[FireBreath](http://www.firebreath.org)可能是您最好的选择。我不知道为什么 Opera on linux 不能工作（尽管我以前从来没有人问过这个问题），你只需要弄清楚 Opera 对插件的期望。FireBreath 在 linux 上创建[NPAPI 插件](http://en.wikipedia.org/wiki/NPAPI)，opera 应该支持这些插件。

# visual-studio - 在 Visual Studio 2012 中编译 Firefox 插件

> ID：12766926
> 
> 赞同：0
> 
> 时间：2012-10-07T07:26:13.020
> 
> 标签：visual-studio, firefox-addon, visual-studio-2012, xpcom, gecko

> **可能重复：**
> [从 Visual Studio 2010 编译 MFC 应用程序到 2012 RC 导致 LNK2038](https://stackoverflow.com/questions/11808260/compiling-a-mfc-app-from-visual-studio-2010-to-2012-rc-results-in-lnk2038)

我正在将一个 XPCOM Firefox 附加项目从 Visual Studio 2010 移动到 Visual Studio 2012。当我打开该项目时，Visual Studio 会询问我是否希望该项目使用最新的 C++ 编译器。如果我说不，那么我会得到这个编译错误：

> 错误 1 ​​错误 MSB8020：找不到 Visual Studio 2010 的构建工具（平台工具集 = 'v100'）。要使用 v100 构建工具进行构建，请单击“项目”菜单或右键单击解决方案，然后选择“更新 VC++ 项目...”。安装 Visual Studio 2010 以使用 Visual Studio 2010 构建工具进行构建。C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.Cpp.Platform.targets 42 5 FF (Visual Studio 2010)

如果我说是，那么我会在 xulrunner-sdk\lib 目录中为 xpcomglue_s_nomozalloc.lib 收到其中五个编译错误：

> 错误 LNK2038：检测到“_MSC_VER”不匹配：值“1600”与值“1700”不匹配

我无法安装 Visual Studio 2010。我想我可以自己编译 Gecko，使用 Visual Studio 2012，虽然这看起来工作量很大，而且我不确定它是否会工作。所以请告诉我在 Visual Studio 2012 中编译我的 Firefox 插件的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:49:04.917

当您编译二进制 XPCOM 组件时，您*必须*使用与编译 Firefox 本身相同的编译器 - 否则不会给出二进制兼容性。目前这[意味着使用 Visual C++ 10](https://developer.mozilla.org/en-US/docs/Developer_Guide/Build_Instructions/Windows_Prerequisites)，无论是通过免费的 Visual Studio Express 2010 还是通过其他方式。

如果 XPCOM 组件的目的只是运行一些本机代码，那么您可以考虑编译一个常规 DLL 并通过[js-ctypes](https://developer.mozilla.org/en/js-ctypes)调用它，那么您可以使用任何您喜欢的编译器 - 没有二进制兼容性限制（通常也推荐因为您不再需要为每个 Firefox 版本重新编译）。

# php - 使用 SQL 表欢迎客人

> ID：12766928
> 
> 赞同：1
> 
> 时间：2012-10-07T07:26:33.290
> 
> 标签：php

我的页面中当前有此代码。

```
<?php
        if ($admin->get_permissions()==3)
        echo 'Welcome Administrator';
        elseif ($admin->get_permissions()==1)
        echo 'Welcome User';
        else
        echo 'Welcome Guest';

        ?> 
```

现在，如果您以管理员或标准用户身份登录，它可以正常工作，但如果您以访客身份访问该站点，则会出现错误

```
Call to a member function get_permissions() on a non-object in 
```

错误始于此脚本的开头。我如何确保 get_permissions 函数适用于登录的人并为他们显示自定义数据并为登录的客人显示信息？我一直在为此绞尽脑汁，无济于事。如果有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T07:30:49.217

在我看来，如果此人是客人，您似乎不会启动 $admin 变量。你可以我们 isset() 喜欢：

```
if (!isset($admin)){
    echo 'Welcome Guest';
}
elseif ($admin->get_permissions()==3)
    echo 'Welcome Administrator';
elseif ($admin->get_permissions()==1)
    echo 'Welcome User'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T07:31:23.833

`$admin`如果用户未通过身份验证，则似乎未创建您的对象。要解决此问题，您需要根据用户身份验证独立实例化对象或引入不同的权限检查，可能是这样的：

```
<?php
     if ($admin != null)
     {
        if ($admin->get_permissions()==3) echo 'Welcome Administrator';
        elseif ($admin->get_permissions()==1) echo 'Welcome User';
     }
     else echo 'Welcome guest.';
?> 
```

# android - “无法制作原生字体”仅适用于某些人

> ID：12766930
> 
> 赞同：74
> 
> 时间：2012-10-07T07:26:45.693
> 
> 标签：android, fonts, typeface

我有一个应用程序可以更改某些元素的字体。它适用于大多数人，但可能有 0.5% 的人在尝试更改字体时会出现异常。堆栈跟踪的重要部分是：

```
Caused by: java.lang.RuntimeException: native typeface cannot be made
at android.graphics.Typeface.<init>(Typeface.java:147)
at android.graphics.Typeface.createFromAsset(Typeface.java:121) 
```

正如我所说，它适用于大多数人，所以我认为字体文件或我的代码没有问题。关于如何解决这个问题的任何建议？

**编辑：**这是我的代码：

```
Typeface phoneticFont = Typeface.createFromAsset(getAssets(),
                                                 "fonts/CharisSILR.ttf");
TextView tv;
tv = ((TextView) findViewById(R.id.searchPronunciationTitle));
tv.setTypeface(phoneticFont); 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-10-26T12:43:09.047

Android 操作系统的这个错误可能是您的问题的原因：

[Typeface.createFromAsset 泄露资产流](http://code.google.com/p/android/issues/detail?id=9904)

此错误报告中还有一个解决方法：

> 我更改了 HTH 的解决方法，以便该方法不假定字体路径或格式。字体资源的完整路径必须作为参数提交。我还将对 createFromAsset() 的调用封装在一个 try-catch 块中，这样如果找不到资产，get() 方法将返回 null。

```
public class Typefaces {
    private static final String TAG = "Typefaces";

    private static final Hashtable<String, Typeface> cache = new Hashtable<String, Typeface>();

    public static Typeface get(Context c, String assetPath) {
        synchronized (cache) {
            if (!cache.containsKey(assetPath)) {
                try {
                    Typeface t = Typeface.createFromAsset(c.getAssets(),
                            assetPath);
                    cache.put(assetPath, t);
                } catch (Exception e) {
                    Log.e(TAG, "Could not get typeface '" + assetPath
                            + "' because " + e.getMessage());
                    return null;
                }
            }
            return cache.get(assetPath);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2013-07-20T20:35:07.917

我遵循了此处找到的一些解决方案，但没有成功。我认为这真的很晦涩，就像程序员经常做的那样。然后在某处我读到它可能与字体路径有关，明白了：

代替：

```
Typeface phoneticFont = Typeface.createFromAsset(getAssets(),
                                             "blanch_caps.ttf"); 
```

我改为：

```
Typeface phoneticFont = Typeface.createFromAsset(getAssets(),
                                             "fonts/blanch_caps.ttf"); 
```

我的文件在 assets/fonts/blanch_caps.ttf 中。不是它像一个魅力！

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2013-01-05T09:47:24.130

当字体位于库资产文件夹中时出现此错误。当我将它复制到使用这个库的应用程序的资产中时，错误消失了。

似乎无法导入资产： [Android 库资产文件夹没有被复制](https://stackoverflow.com/questions/5889833/android-library-assets-folder-doesnt-get-copied)

以下是其他一些情况：[使用自定义字体时的问题 - “无法制作原生字体”](https://stackoverflow.com/questions/7531856/issue-when-using-a-custom-font-native-typeface-cannot-be-made)

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2013-08-11T10:19:53.863

我为此苦苦挣扎。我尝试了所有可能性，但没有任何帮助。最后，问题出在其他地方。如果您使用 Gradle 构建项目，请不要忘记在 build.gradle 文件中添加这些行。这解决了我的问题。

```
 sourceSets {
    main {
        assets.srcDirs = ['assets']
    }
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-11-18T07:43:07.640

您必须在 AndroidStudio 的**src** --> **main**中创建 assets 文件夹。这种方法奏效了！

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-01-29T13:36:04.810

就我而言，它基于字体的文件名。由于某种原因，它被命名为 FontName..ttf

我不知道为什么会有双点 - 我查找了原始字体，它们在我的 windows\fonts 文件夹中作为 FontName..ttf。Windows 显然不在乎，但 Android 吓坏了。我重命名了文件，现在一切顺利。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-08-15T14:10:10.827

对于我的情况，我发现**资产**文件夹位于`/main/java/assets`但它们必须位于`/main/assets`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-12-05T06:42:25.573

使用小写：

```
Typeface phoneticFont = Typeface.createFromAsset(getAssets(),
                                             "fonts/charissilr.ttf"); 
```

请记住还要重命名文件。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-02-13T11:38:58.783

> 换这个

```
Typeface phoneticFont = Typeface.createFromAsset(getAssets(),
                                             "fonts/CharisSILR.ttf"); 
```

> 至

```
Typeface phoneticFont = Typeface.createFromAsset(getAssets(),
                                             "CharisSILR.ttf"); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-05-11T05:46:16.580

我在使用 qwerjk 的 MagicTextView 时遇到了这个问题。我试图将 MTV 类放在一个库中并在我的主项目中使用它。这是我如何让它工作的：

1.  在主项目资产文件夹中，创建一个名为 fonts 的子文件夹
2.  将 ttf 文件复制到 assets/fonts 文件夹中。我的文件名是驼峰式（例如 ReservoirGrunge.ttf），所以大写或不大写似乎无关紧要。
3.  在我的主要项目中，我从 xml 扩展了 MTV 视图。确保 MagicTextView 指向正确的库路径。例如，我的 MTV 类库是 com.library.library_magictextview.MagicTextView，所以我的主视图的 xml 必须为：

    ```
     <com.library.library_magictextview.MagicTextView
        android:textSize=           "50dp"
        android:textColor=          "#ffffffff"
        android:layout_width=       "fill_parent"
        android:layout_height=      "wrap_content"

        android:textStyle=          "bold"
        android:padding=            "20dp"
        android:gravity=            "center"

        r:strokeColor=          "#FFff0000"
        r:strokeJoinStyle=      "miter"
        r:strokeWidth=          "5"
        r:typeface=         "ReservoirGrunge"
        android:text=               "BobDillon" /> 
    ```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-10-28T10:49:45.593

就我而言，我刚刚删除了资产文件夹（我手动创建的）并使用向导创建了一个新文件夹。显然它不是作为资产文件夹读取的，而是作为普通文件夹读取的，因此 getAssets() 不起作用并给了我错误。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-10-06T17:47:27.723

在我们的情况下，我们使用了 Hit 的缓存解决方案。我们引入的问题是我们在同一个 try 块中测试 OTF 文件和 TTF 文件；）如果您想要获得 TTF，这显然会在第一次尝试 OTF 时失败，但我认为值得发布只是以防它在某人尝试相同的解决方案时通过了某人的通知。

```
protected static Typeface getTypeface(Context p_context, String p_fontName){
    Typeface tf = null;
    try {
        tf = Typeface.createFromAsset(p_context.getAssets(), "fonts/" + p_fontName + ".otf");
    }catch(Exception e) {}

    if( tf != null ) return tf;

    try {
        tf = Typeface.createFromAsset(p_context.getAssets(), "fonts/" + p_fontName + ".ttf");
    }catch(Exception e) {}

    return tf;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-08-27T00:27:29.740

在 android studio 中：对我有用的是将 ttf 文件直接放入 assets 文件夹而没有字体子文件夹，它不适用于子文件夹（ (getAssets(),"fonts/oldengl.ttf") 时不起作用我在 src/main/assets/fonts 中有 ttf）。这有效： src/main/assets/oldengl.ttf 字体 customfont=Typeface.createFromAsset(getAssets(),"oldengl.ttf");

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-04-19T06:33:00.043

当我导入一个旨在同时支持 eclipse 风格项目和 android studio 风格项目的模块时，我遇到了这个问题。

我通过从源集中删除资产解决了我的问题-

```
defaultConfig {
        minSdkVersion 15
        targetSdkVersion 23
        versionCode 1
        versionName '1.0'

        sourceSets {
            main {
                java.srcDirs = ['src']
                res.srcDirs = ['res']
                //assets.srcDirs = ['assets']//commented this out because modlue was not having this directory
                manifest.srcFile 'AndroidManifest.xml'
            }
        }
    } 
```

或者将项目转换为 android studio 风格也可以解决我猜的问题。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-10-31T09:31:07.067

就我而言，

我只是使用以前的代码..所以我忘记了资产文件夹中的字体文件..

但是我2小时都想不通..

此错误的可能情况，

> 1.  字体文件丢失
> 2.  错误的字体名称或错误的字体扩展名

例如：**fonts/roboto.ttf**而不是**fonts/roboto.otf**

# python - 带有 % 的 Python 代码

> ID：12766937
> 
> 赞同：-1
> 
> 时间：2012-10-07T07:27:44.563
> 
> 标签：python, modulus

谁能解释我下面的代码。我不明白 % 是做什么的。据我所知，它返回余数，但我没有得到我期望的输出。余数本身是什么？能否请您逐步解释输出。

```
for num in range(20):
    if num % 4 == 0:
        print num 
    if num % 16 == 0:
        print('XYZ') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T07:36:30.557

该运算符称为模运算符，基本上，它的作用是继续从左侧减去右侧，直到它不能再减去（因此，再次减去会使结果为负）。留在它不能再减去的点上的数字称为余数。

这就像做除法，但把商扔掉了。

尝试运行代码：

```
 for i in xrange(10):
      print str(i) + " : " + str((i % 2)) 
```

看到图案了吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T07:30:56.283

`%`称为[模运算符](http://docs.python.org/library/operator.html)& 用于获取余数。

`num % 4 == 0`只需检查 num 是否可被 4 整除

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T07:30:42.570

mod, modulous, 余数[http://docs.python.org/library/operator.html](http://docs.python.org/library/operator.html)

# c++ - 多个线程，一次一个读/写

> ID：12766943
> 
> 赞同：0
> 
> 时间：2012-10-07T07:29:03.613
> 
> 标签：c++, qt

有两个`QFile-pointer`指向同一个文件，它们属于不同的线程。一个将数据写入文件，另一个读取。但我只想进行一项操作，读取或写入。

```
if(!this->file->exists()) {
   qDebug()<<"The file is not exists";
}
if(this->file->isOpen()) {
   qDebug()<<"The file is open";
} 
```

让我换一种说法：如何检查文件是否打开？

我测试`file.isOpen()`？它不起作用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T07:44:07.240

在我看来，您正在尝试使用 isOpen 来查看另一个线程是否打开了相同的文件。AFAIK isOpen 只是告诉您当前 QFile 实例是否打开了文件，而不是其他 QFile 实例。

我知道能够防止不同线程读取和/或写入同一个文件的唯一方法是使用文件锁定。

不太确定 Qt 是否有办法做到这一点，而不必深入研究更多依赖于操作系统的 API。

# winapi - 分辨率1024x611，为什么不是1024x600？（或者为什么 SM_CYFULLSCREEN 报告高度略大=）

> ID：12766944
> 
> 赞同：0
> 
> 时间：2012-10-07T07:29:07.827
> 
> 标签：winapi, resolution

我在这里发帖是因为有人知道为什么我的屏幕尺寸报告为 611 而不是 600？

```
GetSystemMetrics(SM_CYFULLSCREEN) 
```

返回 611。我的上网本是 1024x600，所以我预期的是 600，而不是 611。

谷歌搜索 1024x611 也会出现惊人数量的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T07:57:00.193

[SM_CXFULLSCREEN 和 SM_CYFULLSCREEN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724385%28v=vs.85%29.aspx)返回全屏窗口的大小，因此由于任务栏的原因，通常会小于您的屏幕大小：

> 主显示监视器上全屏窗口的客户区宽度，以像素为单位。要获取未被系统任务栏或应用程序桌面工具栏遮挡的屏幕部分的坐标，请使用 SPI_GETWORKAREA 值调用 SystemParametersInfo 函数。

将其与[SystemParametersInfo 中的 SPI_GETWORKAREA](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724947%28v=vs.85%29#Desktop)为您的显示器返回的内容进行比较？或者你在控制面板中的显示设置是什么？

一个 1024x640 的屏幕将是真正的 16:10 比例，相当于大约 611 y 的可用桌面尺寸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T07:58:55.683

从其他论坛主题来看，似乎`GetSystemMetrics(SM_CYFULLSCREEN)`并不总是返回预期的结果。它似乎被调整了，可能不是你想要的值。

尝试使用`GetSystemMetrics(SM_CYSCREEN)`，它将返回您的主显示器的大小。

*（另外，请注意有些人使用多个监视器：注意不要将您的应用程序限制在单个监视器上）*

# c# - LINQ 上 Where 中的 if 语句

> ID：12766945
> 
> 赞同：2
> 
> 时间：2012-10-07T07:29:23.927
> 
> 标签：c#, linq-to-sql

假设我有带有（名称列和编号列）的客户表，如果没有限制，用户可以进行查询以显示一个名称的编号或显示所有编号；

这个例子

```
 void DisplayNumbersOfName(string name)
     {
        using (dataclassDataContext db = new dataclassDataContext())
           {
               if(name=="")
               var Names = from ta in db.table_accounts

                           select ( ta );
                else
                Names = from ta in db.table_accounts
                           where ta.name = name
                           select ( ta );

        }
     } 
```

我不想用这种方式，因为方法是

更复杂，我只想用 IF 改变“where”WHERE

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T07:31:56.907

*您应该使用 LINQ 查询组合*良好的事实- 并且您不需要使用查询表达式语法。所以：

```
// Fixing naming conventions as I go, to make the code more idiomatic...
using (DataClassDataContext db = new DataClassDataContext())
{
    IQueryable<YourDataType> query = db.TableAccounts;
    if (name != "")
    {
        query = query.Where(ta => ta.Name == name);
    }
    // Use query here...
} 
```

walther 的解决方案是另一种可行的替代方案，但它确实意味着在数据库中评估“我们真的希望将其作为查询的一部分” - 你最终会得到更难理解的 SQL。就个人而言，我更喜欢明确说明您是否希望特定过滤器成为查询的一部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-07T07:34:15.690

```
 void DisplayNumbersOfName(string name)
 {
    using (dataclassDataContext db = new dataclassDataContext())
    {
        var Names = from ta in db.table_accounts
                    where (String.IsNullOrEmpty(name) || ta.name == name)
                    select ( ta );

    }
 } 
```

老实说，没有检查过它，但它应该可以工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-07T07:34:27.420

```
db.table_accounts.Where(p=>string.IsNullOrEmpty(name)||p.name = name); 
```

# python - 带有问号文字的 Python 正则表达式

> ID：12766953
> 
> 赞同：12
> 
> 时间：2012-10-07T07:31:39.030
> 
> 标签：python, regex, django

我正在使用 Django 的 URLconf，我将收到的 URL 是`/?code=authenticationcode`
我想使用匹配的 URL `r'^\?code=(?P<code>.*)$'`，但它不起作用。

然后我发现这是'？'的问题。
因为我尝试`/aaa?aaa`使用`r'aaa\?aaa'` `r'aaa\\?aaa'`even进行匹配`r'aaa.*aaa'`，都失败了，但是当它是“+”或任何其他字符时它可以工作。
'?'怎么配，有没有特别的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-07T07:36:00.713

```
>>> s="aaa?aaa"
>>> import re
>>> re.findall(r'aaa\?aaa', s)
['aaa?aaa'] 
```

原因`/aaa?aaa`在您的 URL 中不匹配是因为 a`?`开始了一个新的 GET 查询。

因此，URL 的可匹配部分仅取决于第一个 'aaa'。剩下的 '?aaa' 是一个由 '?' 分隔的新*查询字符串* 标记，包含作为 GET 参数传递的变量“aaa”。

您*可以*在这里做的是在变量进入 URL 之前对其进行编码。的编码形式`?`是`%3F`。

* * *

您也不应该匹配 GET 查询，例如`/?code=authenticationcode`使用正则表达式。相反，将您的 URL 与`/`using匹配`r'^$'`。Django 会将变量`code`作为 GET 参数传递给`request`对象，您可以在视图中使用`request.GET.get('code')`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T07:36:07.157

不允许`?`在 URL 中使用变量值。`?`表示有变量进入。

像：`http://www.example.com?variable=1&another_variable=2`

替换它或逃避它。这是一些不错的[文档](http://www.blooberry.com/indexdot/html/topics/urlencoding.htm)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T07:46:53.777

Django`urls.py`不解析查询字符串，因此无法在`urls.py`文件中获取此信息。

相反，在您的视图中解析它：

```
def foo(request):
   code = request.GET.get('code')
   if code:
      # do stuff
   else:
      # No code! 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T07:37:55.303

“怎么搭配‘？’，有什么特别的吗？” 是的，但是您通过使用反斜杠正确地转义了它。不过，我看不出你在哪里解释了前导斜杠。该位只需要添加：

```
r'^/\?code=(?P<code>.*)$' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T07:39:57.550

抑制正则表达式元字符`[]`

```
>>> s
'/?code=authenticationcode'
>>> r=re.compile(r'^/[?]code=(.+)')
>>> m=r.match(s)
>>> m.groups()
('authenticationcode',) 
```

# ios - NSNotificationCenter 和 mapType

> ID：12766954
> 
> 赞同：0
> 
> 时间：2012-10-07T07:31:41.240
> 
> 标签：ios, xcode, mkmapview, uisegmentedcontrol, nsnotificationcenter

我正在尝试从另一个 ViewController 更改 mapType，但它只显示 HybridType。无论按下分段控件上的按钮，任何其他 mapType 都不会改变。我究竟做错了什么？先感谢您..

```
-(void) receiveTestNotification:(NSNotification *) notification{
_mapView.delegate = self;
if ([[notification name] isEqualToString:@"TestNotification"]) {
    _mapView.mapType = MKMapTypeStandard;
    NSLog(@"Successfully changed maptype");
}
if ([[notification name] isEqualToString:@"TestNotification2"]) {
    _mapView.mapType = MKMapTypeSatellite;
    NSLog(@"Successfully changed maptype");
}
if ([[notification name] isEqualToString:@"TestNotification3"]) {
    _mapView.mapType = MKMapTypeHybrid;
    NSLog(@"Successfully changed maptype");
}

} 
```

在 ViewDidLoad 中：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(receiveTestNotification:) name:@"TestNotification" object:nil];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(receiveTestNotification:) name:@"TestNotification2" object:nil];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(receiveTestNotification:) name:@"TestNotification3" object:nil]; 
```

在我的另一个视图控制器中：

```
- (IBAction)segmentedControl:(id)sender {

switch (((UISegmentedControl *) sender).selectedSegmentIndex) {
    case 0:
        [[NSNotificationCenter defaultCenter] postNotificationName:@"TestNotification" object:self];
        [self dismissModalViewControllerAnimated:YES];
    case 1:
        [[NSNotificationCenter defaultCenter] postNotificationName:@"TestNotification2" object:self];
        [self dismissModalViewControllerAnimated:YES];
    case 2:
        [[NSNotificationCenter defaultCenter] postNotificationName:@"TestNotification3" object:self];
        [self dismissModalViewControllerAnimated:YES];
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T07:52:29.160

一切似乎都很好。在这种情况下，检查分段控件和日志中的所有 iboutlets 可能会更有帮助。您应该使用 break 的另一件事；在 switch 案例中声明，否则它会继续执行下面的代码，所以当你想发送 TestNotification 时，它也会在下面发送其他两个通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T07:55:13.493

你错过了 switch / case 中的“ **break** ”。

# php - PHP递归删除文件夹

> ID：12766961
> 
> 赞同：0
> 
> 时间：2012-10-07T07:32:52.023
> 
> 标签：php, recursion, unlink, rmdir

这是我用于递归删除文件夹和文件的功能

```
function rmdir_recursively($dir) {
    if (!is_dir($dir) || is_link($dir)) return unlink($dir); 
        foreach (scandir($dir) as $file) { 
            if ($file == '.' || $file == '..') continue; 
            if (!rmdir_recursively($dir . DIRECTORY_SEPARATOR . $file)) { 
                chmod($dir . DIRECTORY_SEPARATOR . $file, 0777); 
                if (!rmdir_recursively($dir . DIRECTORY_SEPARATOR . $file)) return false; 
            }; 
        } 
        return rmdir($dir); 
} 
```

问题是，当我在根目录中发送一些文件夹时，它会删除该文件夹。但是当我像这样发送根文件夹本身时

```
rmdir_recursively("./"); 
```

它返回一堆错误，如下所示

```
PHP Warning:  unlink(.//wp/wp-admin/network) [<a href='function.unlink'>function.unlink</a>]: No such file or directory in /home/vefa/public_html/deploy.php on line 52
[07-Oct-2012 02:16:09] PHP Warning:  unlink(.//wp/wp-admin/user) [<a href='function.unlink'>function.unlink</a>]: No such file or directory in /home/vefa/public_html/deploy.php on line 52
[07-Oct-2012 02:16:09] PHP Warning:  unlink(.//wp/wp-content) [<a href='function.unlink'>function.unlink</a>]: No such file or directory in /home/vefa/public_html/deploy.php on line 52
[07-Oct-2012 02:16:09] PHP Warning:  unlink(.//wp/wp-content/plugins) [<a href='function.unlink'>function.unlink</a>]: No such file or directory in /home/vefa/public_html/deploy.php on line 52
[07-Oct-2012 02:16:09] PHP Warning:  unlink(.//wp/wp-content/plugins/akismet) [<a href='function.unlink'>function.unlink</a>]: No such file or directory in /home/vefa/public_html/deploy.php on line 52 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T08:06:00.793

你说你送`rmdir_recursively("./");`？

但是看看代码，你稍后会调用`rmdir_recursively($dir . DIRECTORY_SEPARATOR . $file)`.

这意味着您将尝试消除“.//”中的文件。

这就是为什么您的错误消息包含`unlink(.//wp/wp-admin/user)`

改为使用`rmdir_recursively(".");`。

# android - 如何使用画布制作自定义视图？

> ID：12766964
> 
> 赞同：-1
> 
> 时间：2012-10-07T07:33:02.570
> 
> 标签：android, android-canvas, custom-component

> **可能重复：**
> [用于音频音量的 android 组件](https://stackoverflow.com/questions/12747646/android-component-for-audio-volume)

我是android新手，如果我问一个菜鸟问题，我真的很抱歉，但我真的被卡住了。从现在开始，我使用 android 内置的组件，如 android:button 等。现在我想制作一个自定义视图。我可以使用画布并添加 android 内置组件吗？

我希望能够在视图中画线，但也能够使用 android:button 和其他组件。这是正确的方法吗？任何人都可以帮助我提供一些链接或教程吗？

实际上我的目标是创建一个像这样的语音计：

![在此处输入图像描述](../Images/c148c6c35cdf4609b5031e403c78d8e9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T08:08:49.553

您可以通过扩展 View 类来创建自定义视图。你重写 OnDraw 并使用 Canvas & Paint 来绘制你的视图。

Reto Meier 在 Professional Android Development 4 中有一个很好的例子。您可以从 Wrox 网站 www.wrox.com 下载示例的源代码。搜索 Reto Meier。该示例向您展示了如何为指南针绘制视图（第 4 章）。

# php - 更智能的 if 语句和数组不起作用

> ID：12766965
> 
> 赞同：0
> 
> 时间：2012-10-07T07:33:08.670
> 
> 标签：php, if-statement

我想创建一种更智能的方式来创建 if 语句。我正在编写一个函数来做到这一点：

```
if ( ! function_exists( 'get_meta' ) ) {
    function get_meta($i) {
        $fname_name = array(
                    'copyright_text',
                    'about_name',
                    'archive_name',
                    'contact_name',
                    'lenguage_name',
                    'cc_name',
                    'about_link',
                    'archive_link',
                    'contact_link',
                    'lenguage_link',
                    'cc_link',
                    'about_editors_name',
                    'about_responsibility_name',
                    'about_joinus_name',
                    'about_editors_link',
                    'about_responsibility_link',
                    'about_joinus_link'
                    );
        foreach( $fname_name as $fname )
            include_once( get_option($fname));

        if ( $i ) return $fname_name[$i];
    }
} 
```

但是当这个函数被调用时，它会返回这个错误：

> 警告：include_once() [function.include]：在第 398 行的 local\wp-content\themes\net\0.6\functions.php 中打开“what”以包含 (include_path='.;php\PEAR') 失败

基本上，只想添加`get_option('');`到每个数组，例如返回：

```
get_option('copyright_text'); 
```

或者更具体地说，返回：

```
get_option('copyright_text', ''); 
```

固定的：

好的，我自己解决这个问题，但我非常感谢这里的任何建议。

而不是使用`foreach`and `include_once`，我使用了一个更简单的解决方案：

```
if ($i) return get_option($fname_name[$i], '');
else if ($i == 0) return get_option($fname_name[0], ''); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:28:46.197

这看起来像您正在创建编写访问器方法的快捷方式。看看 PHP 的魔法方法，您会有所帮助。具体注意__get、__set、__call。

[http://php.net/manual/en/language.oop5.magic.php](http://php.net/manual/en/language.oop5.magic.php)

在这种情况下，您正在执行的操作类似于以下内容：

```
class myClass {

    // This could be associated with whatever other data you are interested in
    private $_meta = array(
                'copyright_text',
                'about_name',
                'archive_name',
                'contact_name',
                'lenguage_name',
                'cc_name',
                'about_link',
                'archive_link',
                'contact_link',
                'lenguage_link',
                'cc_link',
                'about_editors_name',
                'about_responsibility_name',
                'about_joinus_name',
                'about_editors_link',
                'about_responsibility_link',
                'about_joinus_link'
                );

    public function __get($name) {
        if (in_array($name, $this->_meta)) {
            return $this->_meta[$name];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T07:45:21.873

用这个

```
 foreach( $fname_name as $fname ){
        include_once( get_option($fname));
       if ( $i ) return $fname;
 } 
```

# java - 编译的包不运行

> ID：12766966
> 
> 赞同：0
> 
> 时间：2012-10-07T07:33:30.757
> 
> 标签：java, classpath, packages

我有一个包，里面有一些类`D:\ProjectGsc\`。包根文件夹被调用`gsc`并包含三个子目录`util`，即`core`和`modules`。它们每个里面都有一些文件，里面`core`有一个名为`gsc.class`. `res`除此之外，文件夹内还有一个文件`gsc`夹，其中包含一些图像，这些图像由我的包类中的 JFrames 和 JDialogs 使用。我设法编译所有内容`-classpath \projectgsc`，并且由于代码已经过调试，所有内容都可以顺利编译。但我根本无法运行它。`java gsc -classpath \projectgsc`我在里面时尝试这样做，`D:\ProjetctGsc\gsc\core\`但它在线程 main 中给了我异常（main 的语法肯定是正确的）`java.lang.NoClassDefFoundError: gsc (wrong name: gsc/core/gsc)`。是不是因为我的班级名称`gsc`在包内`gsc.core`?

提前致谢！（顺便说一句，我不允许我将问题命名为“运行时的类路径问题”，所以这是我能想到的最好的标题，请随时编辑它）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T07:35:58.793

是的，要在包中运行一个名为`gsc`（它违反 Java 命名约定，顺便说一句）`gsc.core`的类（ick - 包含类名的包名；令人困惑！）你会写

```
java -classpath d:\ProjectGsc gsc.core.gsc 
```

但是你必须编译它，以便你有一个目录结构

```
d:\ProjectGsc
             \gsc
                 \core
                      \gsc.class 
```

如果你使用`-d`javac 的选项，你会自动得到这个：

```
javac -d d:\ProjectGsc *.java 
```

（当然，相应地进行调整。）

您可能会发现，如果您是 Java 新手，使用为您处理所有这些的 IDE 会让您的生活更轻松。

# silverlight-3.0 - 如何在 Silverlight 3 中将 SQL Server 数据库数据导出到 Excel

> ID：12766975
> 
> 赞同：0
> 
> 时间：2012-10-07T07:34:34.907
> 
> 标签：silverlight-3.0

我是 Silverlight 的新手。

我将 VS-2008 与 Silverlight 3、SQL Server 2005 一起使用。

我的要求是：我必须从数据库中检索数据并导出到 Excel。

我已经用谷歌搜索了，但我没有得到合适的链接或材料来满足我的要求。

有人可以指导我怎么做吗？

提前谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T07:51:17.347

> 最简单的方法是使用 NPOI (npoi.codeplex.com)..
> 
> 基本上，您可以在 xaml 中定义以下事件：
> 
> ```
> private void Button_Click(object sender, RoutedEventArgs e)
> {
>     WebClient client = new WebClient();
>     client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(client_DownloadStringCompleted);
>     client.DownloadStringAsync(new Uri("DownloadFile.aspx", UriKind.Absolute));
> } 
> ```
> 
> 在您的服务器项目页面 DownloadFile.aspx 中的以下内容之后：

```
using NPOI.HPSF;
using NPOI.POIFS.FileSystem;
using NPOI.SS.UserModel;

public partial class DownloadFile : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{
    string filename = "test.xls";
    Response.ContentType = "application/vnd.ms-excel";
    Response.AddHeader("Content-Disposition", string.Format("attachment;filename={0}", filename));
    Response.Clear();

    InitializeWorkbook();
    GenerateData();
    Response.BinaryWrite(WriteToStream().GetBuffer());
    Response.End();
}

HSSFWorkbook hssfworkbook;

MemoryStream WriteToStream()
{
    //Write the stream data of workbook to the root directory
    MemoryStream file = new MemoryStream();
    hssfworkbook.Write(file);
    return file;
}

void GenerateData()
{
    Sheet sheet1 = hssfworkbook.CreateSheet("Sheet1");

    sheet1.CreateRow(0).CreateCell(0).SetCellValue("This is a Sample");
    int x = 1;
    for (int i = 1; i <= 15; i++)
    {
        Row row = sheet1.CreateRow(i);
        for (int j = 0; j < 15; j++)
        {
            // add you data from the db
            row.CreateCell(j).SetCellValue(x++);
        }
    }
}

void InitializeWorkbook()
{
    hssfworkbook = new HSSFWorkbook();

    ////create a entry of DocumentSummaryInformation
    DocumentSummaryInformation dsi = PropertySetFactory.CreateDocumentSummaryInformation();
    dsi.Company = "NPOI Team";
    hssfworkbook.DocumentSummaryInformation = dsi;

    ////create a entry of SummaryInformation
    SummaryInformation si = PropertySetFactory.CreateSummaryInformation();
    si.Subject = "NPOI SDK Example";
    hssfworkbook.SummaryInformation = si;
    }
} 
```

> 还要检查 NPOI 版本中的示例......我希望它有所帮助！

资料来源： http: [//go4answers.webhost4life.com/Question/easiest-npoi-codeplex-basically-define-817046.aspx](http://go4answers.webhost4life.com/Question/easiest-npoi-codeplex-basically-define-817046.aspx)

# javascript - jquery移动文本输入看不到文字

> ID：12766980
> 
> 赞同：0
> 
> 时间：2012-10-07T07:35:58.293
> 
> 标签：javascript, jquery, html, css, jquery-mobile

> **可能重复：**
> [Phonegap jQuery Mobile 文本输入](https://stackoverflow.com/questions/12767506/phonegap-jquery-mobile-text-input)

我对 jQuery mobile 非常了解……我遇到了文本输入和搜索输入的问题。当我在文本字段内单击或将文本字段聚焦，然后键入时，根本没有文本出现。只是保持白色和空白。这是代码的一小段。如果您发现它有任何问题，请告诉我。谢谢！

```
<div data-role="content">   
  <label for="basic">Text Input:</label>
  <input type="text" name="name" id="basic" value=""  />
</div><!-- /content -->

        update: 
```

在Firefox中工作正常，而不是在chrome中。

# .net - 我应该在哪里创建我的 AutoMapper 映射？

> ID：12766985
> 
> 赞同：1
> 
> 时间：2012-10-07T07:36:23.583
> 
> 标签：.net, asp.net-mvc, automapper

我目前有一个`RegisterMaps`从`Application_Start`.

```
public static class AutoMapperRegistrar
{
    public static void RegisterMaps()
    {
        Mapper.CreateMap<Employee, EmployeeEditModel>();
        Mapper.CreateMap<Employee, EmployeeCreateModel>();
    }
} 
```

我还有一个`MappedViewModel`基类，我的大多数视图模型都派生自：

```
public class MappedViewModel<TEntity>: ViewModel
{
    public virtual void MapFromEntity(TEntity entity)
    {
        Mapper.Map(entity, this, typeof(TEntity), GetType());
    }
} 
```

现在维护一长串映射`RegisterMaps`对我来说有点麻烦。我正在考虑将地图创建委托给`MappedViewModel`. 我可以安全地做到这一点，即它会对性能产生负面影响，还是有任何其他理由不做更多的面向对象并让每个映射类创建自己的映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T08:31:33.547

对于将一种类型映射到另一种类型的东西，它属于两种类型的构造函数中的哪一种？

我对您当前的方法有类似的方法，除了我将每个映射放在自己的 AutoMapper 配置文件中，使用反射来找到它们并初始化它们。

通常我会更进一步，不使用对 AutoMapper 的静态引用，它最终看起来有点像这样

```
Bind<ITypeMapFactory>().To<TypeMapFactory>();
Bind<ConfigurationStore>().ToSelf().InSingletonScope();
Bind<IConfiguration>().ToMethod(c => c.Kernel.Get<ConfigurationStore>());
Bind<IConfigurationProvider>().ToMethod(c => c.Kernel.Get<ConfigurationStore>());
Bind<IMappingEngine>().To<MappingEngine>();

//Load all the mapper profiles
var configurationStore = Kernel.Get<ConfigurationStore>();
foreach (var profile in typeof(AutoMapperNinjectModule).Assembly.GetAll<Profile>())
{
    configurationStore.AddProfile(Kernel.Get(profile) as Profile);
}

public class AccountViewModelProfile : Profile
{
    protected override void Configure()
    {
        CreateMap<Account, AccountListItemViewModel>()
            .ForMember(d => d.AccountType, opt => opt.MapFrom(s => s.GetType().Name));
    }
} 
```

# javascript - Jquery - 使用 Lightbox 在类别页面上显示图像

> ID：12766997
> 
> 赞同：1
> 
> 时间：2012-10-07T07:38:28.213
> 
> 标签：javascript, jquery, jquery-plugins, lightbox

**我现在有什么**...

我有一个页面 X，上面有不同的类别，例如 A、B、C。每个类别都由其图库中的图像表示。现在，当我单击此类别图像时，将打开一个包含该类别中所有图像的新页面，当我单击第二页上的其中一个图像时，Jquery Lightbox 开始发挥作用并开始发挥它的魔力。

**什么，我想做的是**……

当我在页面 X 上单击该类别图像时，我希望 Jquery Lightbox 在页面 X 上使用我单击的类别中的所有图像打开一个新页面，而不是打开一个包含该类别的所有图像的新页面。

**请帮我实现这个**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T07:50:02.153

为什么不试试[jQuery Fancybox](http://fancybox.net/home)？[您需要做的就是按照这里](http://fancybox.net/howto)简单的分步说明进行操作，您也可以在您的网站上拥有相同的精美风格。

您可能会感兴趣的主页（靠近页面底部）上有一些很好的示例。

# php - 如何在 PHP 中进行预选下拉并添加描述？

> ID：12766998
> 
> 赞同：0
> 
> 时间：2012-10-07T07:38:32.080
> 
> 标签：php, html

我喜欢这里贡献的函数： [PHP - PRE-select drop down option](https://stackoverflow.com/questions/3030604/php-pre-select-drop-down-option)

```
function generateSelect($name, $options, $optionToSelect) {
    $html = '<select name="'.$name.'">';
    foreach ($options as $option => $value) {
        if($value == $optionToSelect)
            $html .= '<option value="'.$value.'" selected="selected">'.$value.'</option>';
        else
            $html .= '<option value="'.$value.'">'.$value.'</option>';
    }
    $html .= '</select>';
    return $html;
}

/* And then call it like */
$html = generateSelect('company', $companies, 'Apple'); 
```

但是，这并没有解决有时需要下拉菜单的描述。

例如：

```
<select name="ranges">
<option value="0">All Ranges</option>
<option value="1">Under $10,000</option>
<option value="2">$10,000 - $25,000</option>
<option value="3">$25,000 - $50,000</option>
<option value="4">$50,000 - $75,000</option>
<option value="5">$75,000 - $100,000</option>
<option value="6">$100,000 - $200,000</option>
<option value="7">$200,000 or more</option>
</select> 
```

需要对 generateSelect 函数进行什么修改以允许它分配，例如，连同值“4”，但伴随它的描述是“$75,000 - $100,000”？generateSelect 函数现在的方式是，它会分配一个值“4”并在描述中（因为没有更好的术语）也放置一个“4”。

或者有没有更好的方法在 PHP 中做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T07:53:24.430

我不确定你的描述是什么意思（也许你可以澄清一下；你想要一个包含选项键的附加属性吗？我没有注册，所以除了作为答案我不能问）

例如，如果您想将“描述”显示为 value 属性的一部分，您只需将其附加到 value 属性，如下所示：

```
$html .= '<option value="'.$value.' ('.$option.')" selected="selected">'.$option.'</option>'; 
```