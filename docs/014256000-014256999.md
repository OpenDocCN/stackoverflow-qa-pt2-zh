# StackOverflow 问答 14256000-14256999

# java - 获取 Apache POI java.lang.IllegalStateException：尝试读取 xlsx 文件时，Zip 文件已关闭

> ID：14256001
> 
> 赞同：1
> 
> 时间：2013-01-10T10:43:01.740
> 
> 标签：java, apache-poi, xssf

我收到 java.lang.IllegalStateException: Zip File is closed 当我尝试读取 xlsx 文件时。正在从基于弹簧的应用程序访问代码。我正在使用 apache poi 3.9。使用 apache POI 3.8 我得到无法读取文件。当从我的 Eclipse 本地运行时，相同的代码可以正常工作，但是当应用程序部署在我的 websphere 服务器上并在 websphere 上托管时访问时出现异常。谁能告诉我问题是什么？源代码可以在下面找到。

```
import java.io.IOException;
import java.io.InputStream;
import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;
import java.util.TreeMap;

import javax.xml.parsers.ParserConfigurationException;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;

import org.apache.commons.validator.GenericValidator;
import org.apache.log4j.Logger;
import org.apache.poi.openxml4j.exceptions.OpenXML4JException;
import org.apache.poi.openxml4j.opc.OPCPackage;
import org.apache.poi.ss.usermodel.BuiltinFormats;
import org.apache.poi.ss.usermodel.DataFormatter;
import org.apache.poi.xssf.eventusermodel.ReadOnlySharedStringsTable;
import org.apache.poi.xssf.eventusermodel.XSSFReader;
import org.apache.poi.xssf.model.StylesTable;
import org.apache.poi.xssf.usermodel.XSSFCellStyle;
import org.apache.poi.xssf.usermodel.XSSFRichTextString;
import org.apache.struts.action.ActionMessage;
import org.apache.struts.action.ActionMessages;
import org.xml.sax.Attributes;
import org.xml.sax.ContentHandler;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;
import org.xml.sax.XMLReader;
import org.xml.sax.helpers.DefaultHandler;

public class XSSFListenerUtil {

    private static List<String> allColValList = null;
    private static boolean invalidTemplate = false;
    private final static Logger log = Logger.getLogger(HSSFListenerUtil.class.getName()); // logger for the process.
    private static BaseViewBean baseViewBean$Session;

    /**
     * The type of the data value is indicated by an attribute on the cell.
     * The value is usually in a "v" element within the cell.
     */
    enum xssfDataType {
        BOOL, ERROR, FORMULA, INLINESTR, SSTINDEX, NUMBER,
    }

    class MyXSSFSheetHandler extends DefaultHandler {

        /**
         * Table with styles
         */
        private StylesTable stylesTable;

        /**
         * Table with unique strings
         */
        private ReadOnlySharedStringsTable sharedStringsTable;

        /**
         * Destination for data
         */
        //private final PrintStream output;

        /**
         * Number of columns to read starting with leftmost
         */
        private final int minColumnCount;

        // Set when V start element is seen
        private boolean vIsOpen;

        // Set when cell start element is seen;
        // used when cell close element is seen.
        private xssfDataType nextDataType;

        // Used to format numeric cell values.
        private short formatIndex;
        private String formatString;
        private final DataFormatter formatter;

        private int thisColumn = -1;
        // The last column printed to the output stream
        private int lastColumnNumber = -1;

        // Gathers characters as they are seen.
        private StringBuffer value;

        /**
         * Accepts objects needed while parsing.
         *
         * @param styles  Table of styles
         * @param strings Table of shared strings
         * @param cols    Minimum number of columns to show
         * @param target  Sink for output
         */
        public MyXSSFSheetHandler(
                StylesTable styles,
                ReadOnlySharedStringsTable strings,
                int cols) {
            this.stylesTable = styles;
            this.sharedStringsTable = strings;
            this.minColumnCount = cols;
            this.value = new StringBuffer();
            this.nextDataType = xssfDataType.NUMBER;
            this.formatter = new DataFormatter();
        }

        /*
         * (non-Javadoc)
         * @see org.xml.sax.helpers.DefaultHandler#startElement(java.lang.String, java.lang.String, java.lang.String, org.xml.sax.Attributes)
         */
        public void startElement(String uri, String localName, String name,
                                 Attributes attributes) throws SAXException {

            if ("inlineStr".equals(name) || "v".equals(name)) {
                vIsOpen = true;
                // Clear contents cache
                value.setLength(0);
            }
            // c => cell
            else if ("c".equals(name)) {
                // Get the cell reference
                String r = attributes.getValue("r");
                int firstDigit = -1;
                for (int c = 0; c < r.length(); ++c) {
                    if (Character.isDigit(r.charAt(c))) {
                        firstDigit = c;
                        break;
                    }
                }
                thisColumn = nameToColumn(r.substring(0, firstDigit));

                // Set up defaults.
                this.nextDataType = xssfDataType.NUMBER;
                this.formatIndex = -1;
                this.formatString = null;
                String cellType = attributes.getValue("t");
                String cellStyleStr = attributes.getValue("s");
                if ("b".equals(cellType))
                    nextDataType = xssfDataType.BOOL;
                else if ("e".equals(cellType))
                    nextDataType = xssfDataType.ERROR;
                else if ("inlineStr".equals(cellType))
                    nextDataType = xssfDataType.INLINESTR;
                else if ("s".equals(cellType))
                    nextDataType = xssfDataType.SSTINDEX;
                else if ("str".equals(cellType))
                    nextDataType = xssfDataType.FORMULA;
                else if (cellStyleStr != null) {
                    // It's a number, but almost certainly one with a special style or format 
                    int styleIndex = Integer.parseInt(cellStyleStr);
                    XSSFCellStyle style = stylesTable.getStyleAt(styleIndex);
                    this.formatIndex = style.getDataFormat();
                    this.formatString = style.getDataFormatString();
                    if (this.formatString == null)
                        this.formatString = BuiltinFormats.getBuiltinFormat(this.formatIndex);
                }
            }

        }
        StringBuffer columnvalue = new StringBuffer();

        /*
         * (non-Javadoc)
         * @see org.xml.sax.helpers.DefaultHandler#endElement(java.lang.String, java.lang.String, java.lang.String)
         */
        public void endElement(String uri, String localName, String name)
                throws SAXException {

            String thisStr = null;

            // v => contents of a cell
            if ("v".equals(name)) {
                // Process the value contents as required.
                // Do now, as characters() may be called more than once
                switch (nextDataType) {

                    case BOOL:
                        char first = value.charAt(0);
                        thisStr = first == '0' ? "FALSE" : "TRUE";
                        break;

                    case ERROR:
                        thisStr = "\"ERROR:" + value.toString() + '"';
                        break;

                    case FORMULA:
                        // A formula could result in a string value, so always add double-quote characters.
                        thisStr = '"' + value.toString() + '"';
                        break;

                    case INLINESTR:
                        XSSFRichTextString rtsi = new XSSFRichTextString(value.toString());
                        thisStr = '"' + rtsi.toString() + '"';
                        break;

                    case SSTINDEX:
                        String sstIndex = value.toString();
                        try {
                            int idx = Integer.parseInt(sstIndex);
                            XSSFRichTextString rtss = new XSSFRichTextString(sharedStringsTable.getEntryAt(idx));
                            thisStr = '"' + rtss.toString() + '"';
                        }
                        catch (NumberFormatException ex) {
                            log.error("Failed to parse SST index '" + sstIndex + "': " + ex.toString());
                            throw new SAXException("Failed to parse SST index '" + sstIndex + "': " + ex.toString());
                        }
                        break;

                    case NUMBER:
                        String n = value.toString();
                        if (this.formatString != null)
                            thisStr = formatter.formatRawCellContents(Double.parseDouble(n), this.formatIndex, this.formatString);
                        else
                            thisStr = n;
                        break;

                    default:
                        thisStr = "(TODO: Unexpected type: " + nextDataType + ")";
                        break;
                }

                // Output after we've seen the string contents
                // Emit commas for any fields that were missing on this row
                if (lastColumnNumber == -1) {
                    lastColumnNumber = 0;
                }
                for (int i = lastColumnNumber; i < thisColumn; ++i){
                    //output.print(',');
                    columnvalue.append(",");
                }
                // Might be an empty string.
                columnvalue.append(thisStr);

                // Update column
                if (thisColumn > -1)
                    lastColumnNumber = thisColumn;

            } else if ("row".equals(name)) {

                // Print out any missing commas if needed
                if (minColumns > 0) {
                    // Columns are 0 based
                    if (lastColumnNumber == -1) {
                        lastColumnNumber = 0;
                    }
                    for (int i = lastColumnNumber; i < (this.minColumnCount); i++) {
                        //output.print(',');
                        columnvalue.append(",");
                    }
                }

                // We're onto a new row
                if(!GenericValidator.isBlankOrNull(columnvalue.toString())){
                    String completeVal = columnvalue.toString().replaceAll("\"", "");
                    allColValList.add(completeVal);
                }
                columnvalue  = new StringBuffer("");
                lastColumnNumber = -1;
            }

        }

        /**
         * Captures characters only if a suitable element is open.
         * Originally was just "v"; extended for inlineStr also.
         */
        public void characters(char[] ch, int start, int length)
                throws SAXException {
            if (vIsOpen)
                value.append(ch, start, length);
        }

        /**
         * Converts an Excel column name like "C" to a zero-based index.
         *
         * @param name
         * @return Index corresponding to the specified name
         */
        private int nameToColumn(String name) {
            int column = -1;
            for (int i = 0; i < name.length(); ++i) {
                int c = name.charAt(i);
                column = (column + 1) * 26 + c - 'A';
            }
            return column;
        }

    }

    private OPCPackage xlsxPackage;
    private int minColumns;

    /**
     *
     * @param pkg        The XLSX package to process
     * @param output     The PrintStream to output the CSV to
     * @param minColumns The minimum number of columns to output, or -1 for no minimum
     */
    public XSSFListenerUtil(OPCPackage pkg, int minCol, ArrayList<String> colList, BaseViewBean baseViewBean$Session) {
        this.xlsxPackage = pkg;
        this.minColumns = minCol;
        XSSFListenerUtil.allColValList = colList;
        XSSFListenerUtil.baseViewBean$Session = baseViewBean$Session;
    }

    /**
     * Parses and shows the content of one sheet
     * using the specified styles and shared-strings tables.
     *
     * @param styles
     * @param strings
     * @param sheetInputStream
     */
    public void processSheet(
            StylesTable styles,
            ReadOnlySharedStringsTable strings,
            InputStream sheetInputStream)
            throws IOException, ParserConfigurationException, SAXException {

        InputSource sheetSource = new InputSource(sheetInputStream);
        SAXParserFactory saxFactory = SAXParserFactory.newInstance();
        SAXParser saxParser = saxFactory.newSAXParser();
        XMLReader sheetParser = saxParser.getXMLReader();
        ContentHandler handler = new MyXSSFSheetHandler(styles, strings, this.minColumns);
        sheetParser.setContentHandler(handler);
        sheetParser.parse(sheetSource);
    }

    /**
     * Initiates the processing of the XLS workbook file to CSV.
     *
     * @throws IOException
     * @throws OpenXML4JException
     * @throws ParserConfigurationException
     * @throws SAXException
     */
    public void process()
            throws IOException, OpenXML4JException, ParserConfigurationException, SAXException {

        ReadOnlySharedStringsTable strings = new ReadOnlySharedStringsTable(xlsxPackage);
        XSSFReader xssfReader = new XSSFReader(xlsxPackage);
        StylesTable styles = xssfReader.getStylesTable();
        XSSFReader.SheetIterator iter = (XSSFReader.SheetIterator) xssfReader.getSheetsData();
        int index = 0;
        while (iter.hasNext()) {
            InputStream stream = iter.next();
            processSheet(styles, strings, stream);
            stream.close();
            ++index;
        }
    }

    public static void parseAndRetrieveExcelDetails(String filePath, InvestmentDimDao investmentDao, 
                            BaseViewBean baseViewBean$Session, ActionMessages errors, boolean invalidTemplateIdentifier) throws Exception{

        int minColumns = -1;
        invalidTemplate = invalidTemplateIdentifier;
        ArrayList<String> initialList = new ArrayList<String>();
        //OPCPackage pkg = OPCPackage.open(filePath, PackageAccess.READ);
        OPCPackage pkg = OPCPackage.open(filePath);
        XSSFListenerUtil xssfSheetProcessor = new XSSFListenerUtil(pkg, minColumns, initialList, baseViewBean$Session);
        xssfSheetProcessor.process();

        validateAndExtractExcelData();

        log.info("Finished processing all records");
        if(invalidTemplate){
            errors.add("failure", new ActionMessage("secaccess.file.invaliddata"));
        }else{
            log.info("All records parsed successfully");
        }

        allColValList.clear();
        allColValList = null;
        pkg.close();
        System.gc();
    }

    private static void validateAndExtractExcelData() throws NumberFormatException {
        int rowCnt = 1;
        int colCnt = 0;
        ExcelListenerBean listenerBean;
        ExcelListenerBean bean;
        Map <String, ExcelListenerBean> excelRecords = new TreeMap<String, ExcelListenerBean>();
        for(String colVal : allColValList) {
            if(rowCnt==1 && !AppGlobalConstants.HardCodedValues.G_L_CALC_HEADER1.equals(colVal)) {
                invalidTemplate = true;
            }
            if(rowCnt==2 && !AppGlobalConstants.HardCodedValues.G_L_CALC_HEADER2.equals(colVal) & !invalidTemplate) {
                invalidTemplate = true;
            }
            if(rowCnt==3 && !AppGlobalConstants.HardCodedValues.G_L_CALC_HEADER3.equals(colVal) & !invalidTemplate) {
                invalidTemplate = true;
            }
            if(rowCnt > 3 && !invalidTemplate) {
                listenerBean = new ExcelListenerBean(AppGlobalConstants.HardCodedValues.SQL_TYPE);

                String[] allValues = colVal.split(",");
                for(String cellContents : allValues){

                    switch (colCnt) {
                        case 0:
                            if(GenericValidator.isBlankOrNull(cellContents)){
                                invalidTemplate = true;
                            }else{
                                listenerBean = new ExcelListenerBean(AppGlobalConstants.HardCodedValues.SQL_TYPE);
                                listenerBean.setId(rowCnt);
                                listenerBean.setShortName(cellContents);
                            }
                            break;
                        case 1:
                            if(GenericValidator.isBlankOrNull(cellContents)){
                                invalidTemplate = true;
                                break;
                            }else{
                                listenerBean.setFmrCusip(cellContents);
                            }
                            break;
                        case 2:
                            if(GenericValidator.isBlankOrNull(cellContents) || !GenericValidator.isDouble(cellContents)){
                                invalidTemplate = true;
                                break;
                            }else{
                                listenerBean.setIncorrectTrdShares(Double.valueOf(cellContents));
                            }
                            break;
                        case 3:
                            if(GenericValidator.isBlankOrNull(cellContents) || !GenericValidator.isDouble(cellContents)){
                                invalidTemplate = true;
                                break;
                            }else{
                                listenerBean.setIncorrectTrdPrice(Double.valueOf(cellContents));
                            }
                            break;
                        case 4:
                            if(GenericValidator.isBlankOrNull(cellContents)){
                                invalidTemplate = true;
                                break;
                            }else{
                                listenerBean.setIncorrectTrdBuySell(cellContents);
                            }
                            break;
                        case 5:
                            if(GenericValidator.isBlankOrNull(cellContents) || !GenericValidator.isDouble(cellContents)){
                                invalidTemplate = true;
                                break;
                            }else{
                                listenerBean.setIncorrectTrdCommRate(Double.valueOf(cellContents));
                            }
                            break;
                        case 6:
                            if(GenericValidator.isBlankOrNull(cellContents) || !GenericValidator.isDouble(cellContents)){
                                invalidTemplate = true;
                                break;
                            }else{
                                listenerBean.setIncorrectTrdCommission(Double.valueOf(cellContents));
                            }
                            break;
                        case 7:
                            if(GenericValidator.isBlankOrNull(cellContents) || !GenericValidator.isDouble(cellContents)){
                                invalidTemplate = true;
                                break;
                            }else{
                                listenerBean.setIncorrectTrdFees(Double.valueOf(cellContents));
                            }
                            break;
                        case 8:
                            if(GenericValidator.isBlankOrNull(cellContents.toString()) || !GenericValidator.isDouble(cellContents.toString())){
                                invalidTemplate = true;
                                break;
                            }else{
                                listenerBean.setIncorrectTrdNet(Double.valueOf(cellContents.toString()));
                            }
                            break;
                        case 9:
                            if(GenericValidator.isBlankOrNull(cellContents) || !GenericValidator.isDouble(cellContents)){
                                invalidTemplate = true;
                                break;
                            }else{
                                listenerBean.setCorrectionTrdShares(Double.valueOf(cellContents));
                            }
                            break;
                        case 10:
                            if(GenericValidator.isBlankOrNull(cellContents) || !GenericValidator.isDouble(cellContents)){
                                invalidTemplate = true;
                                break;
                            }else{
                                listenerBean.setCorrectionTrdPrice(Double.valueOf(cellContents));
                            }
                            break;
                        case 11:
                            if(GenericValidator.isBlankOrNull(cellContents)){
                                invalidTemplate = true;
                                break;
                            }else{
                                listenerBean.setCorrectionTrdBuySell(cellContents);
                            }
                            break;
                        case 12:
                            if(GenericValidator.isBlankOrNull(cellContents) || !GenericValidator.isDouble(cellContents)){
                                invalidTemplate = true;
                                break;
                            }else{
                                listenerBean.setCorrectionTrdCommRate(Double.valueOf(cellContents));
                            }
                            break;
                        case 13:
                            if(GenericValidator.isBlankOrNull(cellContents) || !GenericValidator.isDouble(cellContents)){
                                invalidTemplate = true;
                                break;
                            }else{
                                listenerBean.setCorrectionTrdCommission(Double.valueOf(cellContents));
                            }
                            break;
                        case 14:
                            if(GenericValidator.isBlankOrNull(cellContents) || !GenericValidator.isDouble(cellContents)){
                                invalidTemplate = true;
                                break;
                            }else{
                                listenerBean.setCorrectionTrdFees(Double.valueOf(cellContents));
                            }
                            break;
                        case 15:
                            if(GenericValidator.isBlankOrNull(cellContents) || !GenericValidator.isDouble(cellContents)){
                                invalidTemplate = true;
                                break;
                            }else{
                                listenerBean.setCorrectionTrdNet(Double.valueOf(cellContents));
                            }
                            break;
                    }
                    colCnt++;
                }

                bean = excelRecords.get(listenerBean.getShortName());
                if (bean != null){
                    listenerBean.setAcctGainLossAmt(new BigDecimal(Double.valueOf(bean.getAcctGainLossAmt()) + listenerBean.getCorrectionTrdNet() + listenerBean.getIncorrectTrdNet()).toPlainString());
                } else {
                    listenerBean.setAcctGainLossAmt(new BigDecimal(listenerBean.getCorrectionTrdNet() + listenerBean.getIncorrectTrdNet()).toPlainString());
                }

                excelRecords.put(listenerBean.getShortName(), listenerBean);
            }
            colCnt = 0;
            rowCnt++;
        }

        baseViewBean$Session.setExcelRecLst(new ArrayList<ExcelListenerBean>(excelRecords.values()));
        log.info("Number of records for update is "+excelRecords.size());
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-10T17:41:00.970

我遇到了同样的问题，但后来我意识到我的文件名是 TestData.xlsx 并且我使用的是 TestData.csv

# jquery - jquery validate：如何显示和隐藏错误摘要？

> ID：14256004
> 
> 赞同：5
> 
> 时间：2013-01-10T10:43:05.230
> 
> 标签：jquery, jquery-validate

我在这里根据这个[例子实现了一个错误摘要：](http://docs.jquery.com/Plugins/Validation/Validator/numberOfInvalids)

虽然我让它显示，但一旦没有剩余错误，我不知道如何隐藏它。

我在[这里摆弄一下](http://jsfiddle.net/houmie/eDk2m/1/)来演示它：

在两个字段中的任何一个中输入任何内容，当错误消息消失时，摘要仍然存在。一定有一个事件我需要订阅，但我想不通。

```
$(document).ready(function () {

  var validator = validation_rules('#myform');
  validator.form();

  function validation_rules(form) {

    $.validator.addClassRules("fillone", {
      require_from_group: [1, ".fillone"]
    });

    var validator = $(form).validate({
      errorPlacement: function (error, element) {
        var field_error = $(form).find('#id_' + element.attr('name')).siblings('.field_error');
        if (field_error.length > 0) {
          error.appendTo(field_error);
        }

        $(field_error).show();
      },
      invalidHandler: function () {
        $("#validation_summary").text(validator.numberOfInvalids() + " field(s) are invalid");
      }

    });
    return validator;
  }

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T12:25:24.230

使用 errorContainer 选项。当表单变为有效/无效时，这将显示/隐藏指定的元素

> 错误容器：{“#validation_summary”}

示例在[http://jsfiddle.net/eDk2m/7](http://jsfiddle.net/eDk2m/7)

**阅读评论后编辑**

有一个事件要挂钩 - 一个很好的例子是插件演示的[custom-methods-demo.html](https://github.com/jzaefferer/jquery-validation/blob/master/demo/custom-methods-demo.html)页面。看起来像这样

```
var validator = $("form").bind("invalid-form.validate",  
function() { 
 var errorCount = validator.numberOfInvalids(); 
 // do other stuff here
}).validate({...}); 
```

# macos - 将网页另存为 url 文件并使用 chrome 打开

> ID：14256010
> 
> 赞同：8
> 
> 时间：2013-01-10T10:43:19.593
> 
> 标签：macos, google-chrome

如何简单地将 chrome 中的网页保存为基于文本的 url 文件，当在 finder 中单击时，该文件会在 chrome 中打开网页？

这是我迄今为止发现并尝试过的：以下代码：

```
[InternetShortcut]
URL=http://http://stackoverflow.com/ 
```

（它最后也需要一个空行，但我无法在上面的代码中得到它）。当保存为 .url 文件并简单地保存在我的文件系统中时，单击它会直接在 safari 中打开网页（因为我在带有 osx 的 Mac 上）。我希望它在 Chrome 中打开，但更改“打开方式”设置会将文件作为文本文件打开；它不会执行并将我带到那个网页。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-03-31T17:48:09.023

我和你的情况完全一样，杰夫，在浏览了大量论坛后，我找到了这个。

1.  打开 Chrome/Firefox 并转到您要保存的网页。
2.  看地址栏。
3.  找到 URL 字符串左侧的[挂锁](https://en.wikipedia.org/wiki/HTTPS#Browser_integration)图标。它可能看起来像一页纸，或者一把锁，或者一个带有黄色三角形的锁。
4.  单击并将其拖动到桌面，然后将其放下。

这将创建一个 webloc 文件，对我来说，它显示一个 Safari 图标作为文件图像，甚至说 Safari 是打开它的默认程序。但是，当我单击它时，它总是在 Chrome 中打开！:)

希望这可以帮助。

使用 Chrome 版本 29.0.1547.76

OSX 10.9.2

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-07-12T01:48:28.573

[https://stackoverflow.com/a/22768604/10258377](https://stackoverflow.com/a/22768604/10258377)

谢谢@AZRckCrwler。

我想根据他的回答更容易理解。

> 找到 URL 字符串左侧的挂锁图标。它可能看起来像一页纸，或者一把锁，或者一个带有黄色三角形的锁。

您可以看到我标记的圆圈，然后将其拖放到此处。

[![在此处输入图像描述](../Images/a78b550420acbf253d3dc8157c414178.png)](https://i.stack.imgur.com/fUmg4.png)

# java - 将字符串添加到字符串数组的开头

> ID：14256013
> 
> 赞同：35
> 
> 时间：2013-01-10T10:43:25.070
> 
> 标签：java

是否可以在不迭代整个数组的情况下将字符串添加到字符串数组的开头。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-10T10:45:45.187

做到这一点的唯一方法是维护一个环形缓冲区。即你有一个计数器，它记住开始在哪里，你移动它而不是移动数组中的所有条目。这仅适用于您重新定义“开始”的含义。

请参阅具有三个字段的[ArrayDeque](http://www.docjar.com/html/api/java/util/ArrayDeque.java.html)的源代码

```
 86       /**
   87        * The array in which the elements of the deque are stored.
   88        * The capacity of the deque is the length of this array, which is
   89        * always a power of two. The array is never allowed to become
   90        * full, except transiently within an addX method where it is
   91        * resized (see doubleCapacity) immediately upon becoming full,
   92        * thus avoiding head and tail wrapping around to equal each
   93        * other.  We also guarantee that all array cells not holding
   94        * deque elements are always null.
   95        */
   96       private transient E[] elements;
   97   
   98       /**
   99        * The index of the element at the head of the deque (which is the
  100        * element that would be removed by remove() or pop()); or an
  101        * arbitrary number equal to tail if the deque is empty.
  102        */
  103       private transient int head;
  104   
  105       /**
  106        * The index at which the next element would be added to the tail
  107        * of the deque (via addLast(E), add(E), or push(E)).
  108        */
  109       private transient int tail; 
```

所以添加到开始就像这样

```
 224       public void addFirst(E e) {
  225           if (e == null)
  226               throw new NullPointerException();
  227           elements[head = (head - 1) & (elements.length - 1)] = e;
  228           if (head == tail)
  229               doubleCapacity();
  230       }

  312       /**
  313        * @throws NoSuchElementException {@inheritDoc}
  314        */
  315       public E getFirst() {
  316           E x = elements[head];
  317           if (x == null)
  318               throw new NoSuchElementException();
  319           return x;
  320       } 
```

注意：它移动头部而不是将所有元素向下移动到数组中。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-10T10:49:07.593

尝试

```
 String[] a = {"1", "2"};
    String[] a2 = new String[a.length + 1];
    a2[0] = "0";
    System.arraycopy(a, 0, a2, 1, a.length); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-10-10T08:56:51.503

如果你已经在使用 Guava，你可以`ObjectArrays::concat`这样做：

```
String[] args = ...;
ObjectArrays.concat("prepended", args); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-01-09T20:07:13.930

这是@matteosilv 提出的解决方案的更正版本：

```
String[] myArray= {"hi","hi2"};
List<String> list = new LinkedList<String>(Arrays.asList(myArray));
list.add(0, "h3");
myArray = list.toArray(new String[list.size()]); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-10T10:44:13.250

你不能......你必须向前移动它后面的所有字符串以适应新字符串。如果您直接将其添加到第 0 个索引，您将丢失那里的前一个元素

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-10T11:02:22.443

```
String[] myArray= {"hi","hi2"};
List<String> temp = new ArrayList<String>(Arrays.asList(prova));
temp.add(0, "h3");
myArray = temp.toArray(new String[temp.size()]); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-08-20T03:49:07.120

您可以使用流

```
 private Object[] prepend(String prefix, String[] row) {
        Stream<String> stream = Stream.concat(Arrays.asList(prefix).stream(), Arrays.asList(row).stream());
        return stream.toArray();
    } 
```

打电话

```
prepend("one",new String[]{"two","three","four"}) 
```

结果

$1 ==> 对象[4] {“一”、“二”、“三”、“四”}

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-10T10:45:15.137

为此，您应该使用`List`.

如果您想特别使用内部数组，请使用`ArrayList`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-01-10T11:10:18.343

我能做到的最好...

```
public static void main(String[] args) {
        String[] s = new String[] { "a", "b", "c" };
        System.out.println(Arrays.toString(prepend(s,"d")));
}

public static String[] prepend(String[] a, String el) {
        String[] c = new String[a.length+1];
        c[0] = el;
        System.arraycopy(a, 0, c, 1, a.length);
        return c;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-01-10T11:21:20.997

您可以执行以下操作

```
public class Test {

public static String[] addFirst(String s[], String e) {
    String[] temp = new String[s.length + 1];
    temp[0] = e;
    System.arraycopy(s, 0, temp, 1, s.length);
    return temp;
}

public static void main(String[] args) {
    String[] s = { "b", "c" };
    s = addFirst(s, "a");
    System.out.println(Arrays.toString(s));
}
} 
```

# php - 数据未正确存储在数据库中

> ID：14256016
> 
> 赞同：0
> 
> 时间：2013-01-10T10:43:50.723
> 
> 标签：php

我正在使用此代码将值存储在数据库中，但是当我选择多个复选框时，只有一个 eid 值存储在数据库中（这应该不是我选择的复选框），并且 rid 值也存储为 0 在哪里错误？这是php代码

```
<?php //insert selected candidate in table                  
                    //echo "checkcandi".$_POST['check_candi']; 
if(isset($_POST['select_candidate']) && logged_in())
{
  $checkcandi_sel = $_POST['check_candi'];
  if(empty($checkcandi_sel)) 
  {
    echo("You didn't select any Candidates.");
  } 
  else
  {
    $N = count($checkcandi_sel);

    echo("You selected $N Candidate(s): ");
    for($i=0; $i < $N; $i++)
    {
      echo($checkcandi_sel[$i] . " ");
      $eid=$checkcandi_sel[$i];
       echo "candi id".$eid;
    }
  }

//$rid=$value[1];
if(logged_in())
    {
    $emplyrid=$_SESSION['uid'];
    echo "emplyrid".$emplyrid;
    }
//$rid=$_GET['rid'];
//var_dump($emplyrid);
$query = "INSERT INTO selected_candidate (
                            eid,rid
                        ) VALUES (
                             '{$eid}','{$emplyrid}'
                        )";
            $result = mysql_query($query, $connection);
            if ($result) {
                $message = "<p style=\"color:green\">The Candidate selected and saved to your my seleted.</p>";
            } else {
                $message = "Sorry job was not applied.";
                $message .= "<br />" . mysql_error();
            }
}

?> 
```

这是复选框的代码

```
echo "<td><input id=\"select_candi{$i}\" onclick=\"javascript:func(this.id,{$_SESSION['uid']})\" type=\"checkbox\" name=\"check_candi[]\" value=\"{$data_set['eid']}\"/></td>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:50:48.343

将你的 for 循环拉到插入查询附近，试试这个，

```
$N = count($checkcandi_sel);

if($N > 0) {
  for($i=0; $i < $N; $i++)
  {
    $eid=$checkcandi_sel[$i];
    $query = "INSERT INTO selected_candidate (
                        eid,rid
                    ) VALUES (
                         '{$eid}','{$emplyrid}'
                    )";
    $result = mysql_query($query, $connection);

  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:55:21.620

将sql查询放在foreach中...

```
if(count($checkcandi_sel) > 0) {
  for($i=0; $i < count($checkcandi_sel); $i++) {
    $eid=$checkcandi_sel[$i];
    $query = "INSERT INTO selected_candidate ( eid,rid) VALUES ('{$eid}','{$emplyrid}' )";
    $result = mysql_query($query, $connection);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T10:51:45.900

您不能将数组添加到数据库

```
"INSERT INTO selected_candidate (
                            eid,rid
                        ) VALUES (
                             '{$eid}','{$emplyrid}'
                        )" 
```

在此查询中 $eid 将始终包含数组 $checkcandi_sel 的最后一个值，您将数组 $checkcandi_sel 转换为字符串并添加到数据库

或者

通过循环 sql 查询将其添加为多个条目。

# jquery - 带有 JSONP 请求的 jQuery 无限滚动

> ID：14256019
> 
> 赞同：0
> 
> 时间：2013-01-10T10:44:04.993
> 
> 标签：jquery, jsonp, instagram, infinite-scroll

我一直在为自己的网站尝试无限滚动。如果我提供相同的网站网址，它工作正常。但是，如果我改为提供 api.instagram.com，则它不是在请求 jsonp 请求并且请求不成功。

请建议我如何使用 jsonp 请求实现无限滚动，

下面是我的一段代码，

```
$('.thumbnails').infinitescroll({
    navSelector  : "a#next:last",            
    nextSelector : "a#next:last",   
    contentSelector : ".thumbnails",
    itemSelector    : ".thumbnails",
    dataType: 'json'
});     

navSelctor is <a id="next" href="https://api.instagram.com/v1/tags/tamil/media/recent?callback=jQuery18304228946652839459_1357811552825&client_id=f34d9190c452476d931b813c7bc5e368&max_tag_id=1357828120918&access_token=73b038d4a22848c295dc813b37720ada&_=1357811765921">more</a>

Below is Content Selector

<ul class="thumbnails">
    <div style="text-align:center;display:none;" id="no_photo"> No photos found! </div> 
</ul> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:56:46.627

假设您使用的是 Paul Irish 的[Infinite Scroll](https://github.com/paulirish/infinite-scroll)插件，它支持加载 JSON 数据（使用`$.ajax()`with `dataType: 'json'`）但不支持 JSONP。您需要对其进行修补以支持 JSONP（这可能不会太难）或使用不同的插件。

# android - 在来电屏幕上显示来电者位置

> ID：14256020
> 
> 赞同：1
> 
> 时间：2013-01-10T10:44:10.550
> 
> 标签：android

我正在开发一个应用程序，其中来电屏幕上的来电者位置。

为了表明我使用了 Toast，但我想到了一个这样做但不使用 Toast 的应用程序。

它使用其他东西在来电屏幕上显示一些东西。我想知道那个控制是什么。

屏幕截图附在此处

![在此处输入图像描述](../Images/e6fb51f8c5537d8b69f573205e107179.png)

正如您在图像中看到的那样。我想了解控件或视图（位于红线中心）。

这个特定的控件可以上下拖动，并且可以通过单击十字按钮关闭

如何创建此控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:48:06.400

您可以使用系统覆盖在所有屏幕上放置一个视图..

查看以下帖子了解更多信息：

[创建系统覆盖窗口（始终在顶部）](https://stackoverflow.com/questions/4481226/creating-a-system-overlay-always-on-top-button-in-android)

[创建主页按钮仍然有效的系统覆盖？](https://stackoverflow.com/questions/4750814/creating-a-system-overlay-where-the-home-buttons-still-work)

[AirCalc](https://play.google.com/store/apps/details?id=com.myboyfriendisageek.aircalc&hl=en)是另一种概念证明......

# iphone - 从 iPhone 应用程序发布时服务器未获取图像数据

> ID：14256023
> 
> 赞同：0
> 
> 时间：2013-01-10T10:44:15.667
> 
> 标签：iphone, ios, objective-c, http

我将多张图片发布到服务器 url，但我面临一个问题。发布图像数据后，服务器只获取我首先发送的图像数据。其余数据为空。但在发布时我可以打印数据（NSLog）

请帮助我理解问题在这里给出我的代码

**上传ImageViewController.m**

```
-(IBAction)upPic:(id)sender{
UploadImage *up_image = [[UploadFood alloc] init];

  [up_image sendServerRequests:[NSDictionary  dictionaryWithObjectsAndKeys:@"pic1.jpg",@"filename",@"pic2.jpg",@"filename2", nil]  file:sharedClass.picData file1:sharedClass.picData2];

   } 
```

**上传图片.m**

```
-(void)sendServerRequests:(NSDictionary *)bits file:(NSData *)file file1:(NSData *)file1 file2:(NSData *)file2 {
 NSLog(@"file  %@",file );

 [postbody appendData:[NSData dataWithData:file]];

 [postbody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data;  name=\"image2\"; filename=\"%@\"\r\n", [bits objectForKey:@"filename2"]]  dataUsingEncoding:NSUTF8StringEncoding]];
 [postbody appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

  NSLog(@"file1 %@",file1);

  [postbody appendData:[NSData dataWithData:file1]];

  [postbody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"image3\"; filename=\"%@\"\r\n", [bits objectForKey:@"filename3"]] dataUsingEncoding:NSUTF8StringEncoding]];
  [postbody appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

  NSLog(@"file2 %@",file2);  // i am able to print data here

  [postbody appendData:[NSData dataWithData:file2]];

  [postbody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

   [request setHTTPBody:postbody];

  conn = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    if (conn) {
    webData = [NSMutableData data];
   }

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:54:28.557

嘿 Nithin MK AS 根据您的代码，您做的一切都很好。

在当前情况下，只有第一个文件在服务器上上传。我认为如果您不上传第一个文件并上传第二个文件，它将被上传。

所以我建议你可以为此使用数组。如果您的 Web 服务使用 php/.net，那么您可以使用数组作为文件名。

所以尝试使用

> 名称=\“图像2 []\”；
> 
> 名称=\“图像3 []\”；

也请检查您的网络服务。

谢谢。

# android - 如何在标签栏图标上添加线条

> ID：14256031
> 
> 赞同：0
> 
> 时间：2013-01-10T10:44:42.087
> 
> 标签：android

这是我的标签栏示例，我想添加如下布局：每个图标的左侧、右侧、顶部和底部的线条，如下图所示：

[![在此处输入图像描述](../Images/472d0721065ccf22c6de485f97fd2d3e.png)](https://i.stack.imgur.com/bMaS5.png)

目前我的屏幕是这样的：

[![在此处输入图像描述](../Images/817e97acbeeedff740eb116df0f45667.png)](https://i.stack.imgur.com/OKmYX.png)

我的完整代码如下，如何在每个图标上添加线条？

```
 public class TabSample extends TabActivity {
/** Called when the activity is first created. */

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    setTabs() ;
}
private void setTabs()
{
    addTab("payments", R.drawable.tab_home, ArrowsActivity.class);
    addTab("My Account", R.drawable.tab_home, ArrowsActivity.class);

    addTab("Spend Analyzer", R.drawable.tab_home, ArrowsActivity.class);
    addTab("Notification", R.drawable.tab_home, ArrowsActivity.class);
    addTab("Help", R.drawable.tab_home, ArrowsActivity.class);
}

private void addTab(String labelId, int drawableId, Class<?> c)
{
    TabHost tabHost = getTabHost();
    Intent intent = new Intent(this, c);
    TabHost.TabSpec spec = tabHost.newTabSpec("tab" + labelId); 

    View tabIndicator =  
     LayoutInflater.from(this).inflate(R.layout.tab_indicator, getTabWidget(), false);
    TextView title = (TextView) tabIndicator.findViewById(R.id.title);
    title.setText(labelId);
    ImageView icon = (ImageView) tabIndicator.findViewById(R.id.icon);
    icon.setImageResource(drawableId);

    spec.setIndicator(tabIndicator);
    spec.setContent(intent);
    tabHost.addTab(spec);
}
 }

          <------------ main.xml-------------------------->

          <?xml version="1.0" encoding="utf-8"?>

         <TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost" 
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<LinearLayout
     android:orientation="vertical"
    android:layout_width="fill_parent"
     android:layout_height="fill_parent">

    <FrameLayout android:id="@android:id/tabcontent"
        android:layout_width="fill_parent" 
        android:layout_height="0dip"
        android:layout_weight="1" />

    <TabWidget android:id="@android:id/tabs"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:layout_weight="0"  />
</LinearLayout>
     </TabHost> 

             <------------------- tab_home.xml---------------------->

         <?xml version="1.0" encoding="utf-8"?>

     <selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:drawable="@drawable/user"
    android:state_selected="true" />
<item android:drawable="@drawable/user_grey" />
     </selector> 

           <----------- tab_indicator.xml------------------->

           <?xml version="1.0" encoding="utf-8"?>
   <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="0dip"
 android:layout_height="40dip"    
 android:layout_weight="1"
 android:orientation="vertical"

    android:padding="1dp">

 <ImageView android:id="@+id/icon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:src="@drawable/icon"

 /> 

   <TextView android:id="@+id/title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" 
    android:layout_centerHorizontal="true"
    android:textSize="8dp"
    style="?android:attr/tabWidgetStyle"
    />    
   </RelativeLayout>

    <!----style.xml--------->

            <?xml version="1.0" encoding="utf-8"?>

 <resources>
<style name="app_theme" parent="android:Theme.NoTitleBar">

</style>    
   </resources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:25:32.197

```
ok..i just edit my new answer

its working..so dont talk that it does nt add line btwn every image

your tab_indicator.xml:--

<?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="0dip"
        android:layout_height="60dip"
        android:background="#ffffff"
         android:layout_weight="1" >

    <View
        android:id="@+id/line1"
        android:layout_width="1dp"
        android:layout_height="60dip"
        android:background="#0066CC" />

    <TextView
        android:id="@+id/title"
        style="?android:attr/tabWidgetStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_below="@+id/icon"
        android:text="abc"
        android:textSize="8dp" />

    <View
        android:id="@+id/line3"
        android:layout_width="fill_parent"
        android:layout_height="1dp"

        android:layout_toRightOf="@+id/line1"
        android:background="#0066CC" />

    <View
        android:id="@+id/line2"
        android:layout_width="1dp"
        android:layout_height="60dip"
        android:layout_toRightOf="@+id/line3"
        android:background="#0066CC" />

    <View
        android:id="@+id/line4"
        android:layout_width="fill_parent"
        android:layout_height="1dp"
     android:layout_alignParentBottom="true"
        android:layout_toRightOf="@+id/line1"
        android:background="#0066CC" />

    <ImageView
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="30dip"
       android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:src="@drawable/icon" />

</RelativeLayout> 
```

首先尝试此代码..并根据您的需要进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:08:53.577

您可以在 tab_indicator 布局文件中手动添加行

您可以根据需要调整我的以下代码：

例如：水平线

```
<View
    android:layout_height="1dp"
    android:id="@+id/line"
     android:layout_width="fill_parent"
      android:background="#0066CC" /> 
```

例如：垂直线

```
<View
    android:layout_height="7dp"
    android:id="@+id/line"
     android:layout_width="1dp"
      android:background="#0066CC" /> 
```

# arrays - 索引超出范围？

> ID：14256032
> 
> 赞同：1
> 
> 时间：2013-01-10T10:44:43.200
> 
> 标签：arrays, actionscript-3, vector

下面是两个 2D 对象，Array 和 Vector。如您所见，两者中描述的信息是相同的。我的游戏使用 Array 对象可以完美运行，但使用 Vector 会引发以下错误：

```
[Fault] exception, information=RangeError: Error #1125: The index 10 is out of range 10\. 

var _platformMap:Array = [
       [10, 10, 10, 10, 10, 10, 10, 10, 10, 10],
       [00, 00, 10, 10, 10, 10, 10, 10, 10, 10],
       [10, 10, 10, 10, 10, 10, 00, 00, 00, 10],
       [10, 10, 10, 00, 00, 10, 10, 10, 10, 10],
       [10, 10, 10, 10, 10, 10, 10, 10, 10, 10],
       [10, 10, 00, 00, 00, 00, 00, 10, 10, 10],
       [10, 10, 10, 10, 10, 10, 10, 10, 10, 10],
       [00, 00, 00, 00, 00, 00, 00, 00, 00, 00]
     ];

var _platformMap:Vector.<Vector.<int>> = Vector.<Vector.<int>>(
        [
            Vector.<int>([10,10,10,10,10,10,10,10,10,10]), 
            Vector.<int>([00,00,10,10,10,10,10,10,10,10]), 
            Vector.<int>([10,10,10,10,01,01,01,10,10,10]), 
            Vector.<int>([10,10,10,00,10,10,10,10,01,10]), 
            Vector.<int>([10,10,10,00,10,10,01,01,01,00]), 
            Vector.<int>([10,10,10,10,01,01,01,01,01,10]), 
            Vector.<int>([00,00,00,00,00,10,10,10,10,10]), 
            Vector.<int>([00,00,00,00,00,00,00,00,00,00])
        ]
    ); 
```

我读到 Vector 对象除了数组之外还有运行时范围检查（或固定长度检查）。这可能是问题吗？

```
public class TileCollisionController
{
    private var _softPlatformOpen:Boolean = true;
    private var _elevatorOpen:Boolean = true;

    public function TileCollisionController()
    {}

    public function platformCollision(gameObject:TileModel, platformMap:Vector.<Vector.<int>>, maxTileSize:uint, platform:uint):void
    {
        var overlapX:Number;
        var overlapY:Number;
        //check top-left corner
        if (platformMap[gameObject.top][gameObject.left] == platform)
        {
            overlapX = gameObject.xPos % maxTileSize;
            overlapY = gameObject.yPos % maxTileSize;
            if (overlapY >= overlapX)
            {
                if (gameObject.vy < 0 && platformMap[gameObject.bottom][gameObject.left] != platform)
                {
                    //Collision on top side of the object
                    gameObject.setY = gameObject.mapRow * maxTileSize;
                    gameObject.vy = 0;
                }
            }
            else
            {
                //Collision on left side of the object
                gameObject.setX = gameObject.mapColumn * maxTileSize;
                gameObject.vx = 0;
            }
        }
        //check top-right corner
        if (platformMap[gameObject.top][gameObject.right] == platform)
        {
            overlapX = maxTileSize - ((gameObject.xPos + gameObject.width) % maxTileSize);
            overlapY = gameObject.yPos % maxTileSize;
            if (overlapY >= overlapX)
            {
                if (gameObject.vy < 0 && platformMap[gameObject.bottom][gameObject.right] != platform)
                {
                    gameObject.setY = (gameObject.mapRow * maxTileSize);
                    gameObject.vy = 0;
                }
            }
            else
            {
                //Collision on right
                gameObject.setX = (gameObject.mapColumn * maxTileSize) + ((maxTileSize - gameObject.width) - 1);
                gameObject.vx = 0;
            }
        }
        //check bottom-left corner
        if (platformMap[gameObject.bottom][gameObject.left] == platform)
        {
            overlapX = gameObject.xPos % maxTileSize;
            overlapY = maxTileSize - ((gameObject.yPos + gameObject.height) % maxTileSize);
            if (overlapY >= overlapX)
            {
                if (gameObject.vy > 0 && platformMap[gameObject.top][gameObject.left] != platform)
                {
                    //trace("Collision on bottom");
                    //Collision on bottom
                    gameObject.setY = (gameObject.mapRow * maxTileSize) + (maxTileSize - gameObject.height);
                    gameObject.vy = 0;
                    gameObject.jumping = false;
                }
            }
            else
            {
                //trace("Collision on bottom left");
                //Collision on left
                gameObject.setX = gameObject.mapColumn * maxTileSize;
                gameObject.vx = 0;
            }
        }
        //check bottom-right corner
        if (platformMap[gameObject.bottom][gameObject.right] == platform)
        {
            overlapX = maxTileSize - ((gameObject.xPos + gameObject.width) % maxTileSize);
            overlapY = maxTileSize - ((gameObject.yPos + gameObject.height) % maxTileSize);
            if (overlapY >= overlapX)
            {
                if (gameObject.vy > 0 && platformMap[gameObject.top][gameObject.right] != platform)
                {
                    //trace("Collision on bottom right");
                    //Collision on bottom
                    gameObject.setY = (gameObject.mapRow * maxTileSize) + (maxTileSize - gameObject.height);
                    gameObject.vy = 0;
                    gameObject.jumping = false;
                }
            }
            else
            {
                //trace("Collision on right");
                //Collision on right
                gameObject.setX = (gameObject.mapColumn * maxTileSize) + ((maxTileSize - gameObject.width) - 1);
                gameObject.vx = 0;
            }
        }
    }

} 
```

看
[例子](http://imageshack.us/photo/my-images/402/picbi.jpg/)

```
 public function platformCollision(gameObject:TileModel, platformMap:Vector.<Vector.<int>>, maxTileSize:uint, platform:uint):void
    {
        var overlapX:Number;
        var overlapY:Number;
        if(gameObject.bottom < platformMap.length && gameObject.right < platformMap[0].length)
        {
        //check top-left corner
        //... 
```

[更新后的示例](http://imageshack.us/photo/my-images/248/pic2cu.jpg/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:51:27.860

您发布的代码没有任何问题，但是它们都没有索引 10 处的对象？也许您应该查看索引 9，因为它从 0 开始？

你能展示你是如何访问数组/向量的吗？我认为这就是错误的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:03:53.910

试试这个代码

```
var platformMap:Vector.<Vector.<int>> = new Vector.<Vector.<int>>(2);(
                [
                    Vector.<int>([10,10,10,10,10,10,10,10,10,10]), 
                    Vector.<int>([00,00,10,10,10,10,10,10,10,10]), 
                    Vector.<int>([10,10,10,10,01,01,01,10,10,10]), 
                    Vector.<int>([10,10,10,00,10,10,10,10,01,10]), 
                    Vector.<int>([10,10,10,00,10,10,01,01,01,00]), 
                    Vector.<int>([10,10,10,10,01,01,01,01,01,10]), 
                    Vector.<int>([00,00,00,00,00,10,10,10,10,10]), 
                    Vector.<int>([00,00,00,00,00,00,00,00,00,00])
                ]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T11:47:14.067

向量长度为​​ 10，因此您可以访问 0 到 9。向量包含向量，也有一个 len。尝试

```
trace("maxnumallowed", platformMap.length-1) 
```

请注意，如果 n 介于 0 和 platformMap.length-1 之间，您只能访问 platformMap[n]

# asp.net - ASP.Net 如何调用未知（动态）WSDL Web 服务并解析它的结果？

> ID：14256033
> 
> 赞同：0
> 
> 时间：2013-01-10T10:44:46.930
> 
> 标签：asp.net, web-services, dynamic, wsdl

将不胜感激这里的任何指示。这种情况听起来可能有点奇怪：我正在尝试编写一个使用用户定义的 Web 服务的程序，而我的程序事先并不知道。

例如，我的程序允许用户在我的数据库中设置/定义他们在网络中拥有的所有 Web 服务。然后，我的程序将显示用户已定义的所有 Web 服务的列表，单击一下，我的程序将调用该 Web 服务（使用可以键入的参数），然后我的程序将显示结果（字符串）。

问题是在设计时，我不知道 Web 服务以及参数和响应是什么。因此，我需要动态创建某种可以使用这些 Web 服务的存根，而无需提前在我的项目中添加引用。

将不胜感激这里的任何指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:57:29.343

听起来您正在尝试在这里构建自己的[SOAP_UI](http://www.soapui.org/About-SoapUI/what-is-soapui.html) :)（用于测试 Web 服务目的的优秀工具），对吗？

我猜你想玩[wsdl.exe](http://www.codeproject.com/Articles/12760/Reverse-Engineering-Through-WSDL-EXE)。

# java - 为什么出现错误无法解析 google app engine for java 中的密钥

> ID：14256040
> 
> 赞同：0
> 
> 时间：2013-01-10T10:45:16.277
> 
> 标签：java, google-app-engine

我尝试过以下方式但失败了，

```
Query query = new Query("Users");
List<Entity> results = datastore.prepare(query).asList(FetchOptions.Builder.withLimit(PAGE_SIZE));
for (Entity user : results){
Key key = user.getKey();
System.out.println(key); // here am getting as Users(151),Users(152)... 
```

从这里将“密钥”作为请求参数传递给 servlet。

在我的 Servlet 中，

```
String keyString = req.getParameter("key");
Key key = KeyFactory.stringToKey(keyString);
datastore.delete(key); 
```

错误显示**“无法解析：Users(151)==”**，错误行是“Key key = KeyFactory.stringToKey(keyString);”

谁能给我一个想法，

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T13:45:13.330

而不是`Key`作为 java 对象传递给 servlet，你应该使用这个片段来序列化

```
String encodedKey = KeyFactory.keyToString(key) 
```

这要反序列化

```
Key key = KeyFactory.stringToKey(encodedKey) 
```

# jquery - 覆盖由 show() 设置的 CSS

> ID：14256042
> 
> 赞同：0
> 
> 时间：2013-01-10T10:45:21.613
> 
> 标签：jquery

我有一个使用 jQuery 隐藏和显示的 div。`display: inline-block;`除了将 div css 更改为使 div 与另一个 div 并排放置时，我的功能代码可以正常工作。

当我单击隐藏按钮时，div 隐藏，但单击显示按钮时，div 不显示。使用谷歌浏览器我检查了元素并注意到这是因为 jQuery 正在将 CSS 添加到`display: block;`. 这使我的 div 不显示并影响动画。

知道如何覆盖 CSSjQuery 添加并使 jQuery 添加`display: inline-block`而不`display: block;`影响动画吗？我的代码在这里 CSS：

```
#taskList-right {
    width: 48%;
    background-repeat: no-repeat;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;
    clear: both;
    display: inline-block;
    padding: 5px 5px 5px 5px;
    float: right;
    margin-right: 7px;
    overflow-wrap: break-word;
} 
```

jQuery：

```
$("#package_buttn").click(function () {
    if ($("#taskList-right").is(":hidden")) {
        console.log('passed here');
        // $("#taskList-right").slideDown();//this function should slide the div down but is commented for bug tracking.
        $("#taskList-right").show();
    } 
    else {
        $("#taskList-right").slideUp();
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:52:13.253

尝试使用 css 函数添加所需的显示样式。

```
$("#taskList-right").css('display','inline-block'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:07:00.433

您可以尝试一些修改，例如：

做一个CSS类

```
.inlineBlock{   
    display:inline-block;
} 
```

进而：

```
$("#package_buttn").click(function () {
  if ($("#taskList-right").is(":hidden")) {
    console.log('passed here');
    $("#taskList-right").addClass('inlineBlock');
  } else {
    $("#taskList-right").slideUp().removeClass('inlineBlock');
  }
}); 
```

# ios - UINavigationController 和后退按钮操作

> ID：14256051
> 
> 赞同：12
> 
> 时间：2013-01-10T10:45:39.613
> 
> 标签：ios, objective-c, uinavigationcontroller

我有两个`controllers`1st is`self`和 2nd is `maincontroller`，我正在推`maincontroller`入**stack**，所以后退按钮会自动出现。

在这里，当用户按下后退按钮时，我需要发出警报。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-10T10:59:32.350

或者您可以使用`UINavigationController`的委托方法。[`willShowViewController`](https://developer.apple.com/library/ios/documentation/uikit/reference/UINavigationControllerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UINavigationControllerDelegate/navigationController%3awillShowViewController%3aanimated%3a)按下 VC 的后退按钮时调用该方法。

```
- (void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-10T10:54:43.367

首先使用隐藏后退按钮

```
self.navigationItem.hidesBackButton = YES; 
```

然后创建自己的自定义按钮：

```
UIBarButtonItem *backBtn =[[UIBarButtonItem alloc]initWithTitle:@"back" style:UIBarButtonItemStyleDone target:self action:@selector(popAlertAction:)];
self.navigationItem.leftBarButtonItem=backBtn;
[backBtn release]; 
```

你的选择器在这里：

```
- (void)popAlertAction:(UIBarButtonItem*)sender
{
    //Do ur stuff for pop up
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-09-18T11:32:21.330

**最好和最简单的方法**

尝试将其放入要检测压力的视图控制器中：

```
-(void) viewWillDisappear:(BOOL)animated {
    if ([self.navigationController.viewControllers indexOfObject:self]==NSNotFound) {
       // back button was pressed.  We know this is true because self is no longer
       // in the navigation stack.  
    }
    [super viewWillDisappear:animated];
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-10T10:53:30.417

创建自己的并将[`UIBarButtonItem`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBarButtonItem_Class/Reference/Reference.html)其设置`leftBarButtonItem`为`viewDidLoad`.`mainController`

例如（这里我使用了一个系统项，但您也可以创建一个不同的项，有关详细信息，请参阅类参考）。

```
UIBarButtonItem *leftBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(showAlertView:)];
self.navigationItem.leftBarButtonItem = leftBarButtonItem;

// only if you don't use ARC
// [leftBarButtonItem release]; 
```

在哪里

```
- (void)showAlertView:(id)sender
{
    // alert view here...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T10:49:23.667

添加带有操作的自定义后退按钮并在该操作方法中设置警报。您可以从此处添加自定义后退按钮：http: [//www.applausible.com/blog/? p=401](http://www.applausible.com/blog/?p=401)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-25T12:36:17.173

**viewControllerCount** - 是保存先前在 UINavigationController 中的 viewController 数量的 var。然后，我们检查**viewControllerCount > [viewControllers count]**如果是，我们就知道我们会返回（即后退按钮模仿）。

```
- (void)navigationController:(UINavigationController *)navigationController
      willShowViewController:(UIViewController *)viewController
                    animated:(BOOL)animated
{
    NSArray *viewControllers = [navigationController viewControllers];

    if (viewControllerCount > [viewControllers count])
    {
        // your code
    }

    viewControllerCount = [viewControllers count];
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-09T08:19:42.560

```
extension ViewController: UINavigationControllerDelegate {
// when the self != viewcontroller ,it's mean back
     func navigationController(_ navigationController: UINavigationController, willShow viewController: UIViewController, animated: Bool) {
          if self != viewController { 
             // your code
           }
}} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-01-10T10:49:50.947

创建一个按钮并给出按钮操作如下。

```
[self alert]; 
```

当显示警报时，点击是后

```
[self.navigationController popViewController]; 
```

在这之后，

```
self.navigationController.LeftBarButton = myButton; 
```

这可能会有所帮助

# iphone - UIView animateWithDuration 干扰其他 CGRectMake

> ID：14256057
> 
> 赞同：0
> 
> 时间：2013-01-10T10:45:57.683
> 
> 标签：iphone, objective-c, uiview, uiviewanimation

我有一个`CGRectMake`用来将图像跳转到不同位置的

```
image.frane=CGRectMake( x,y,w,h); 
```

然后我想将`Label`（在同一个`ViewController`）翻译和缩放到另一个位置

```
CGPoint newCenter = CGPointMake(x,y);
[UIView animateWithDuration: 1.0
    delay: 0
    options: 0
    animations:^{label.center = newCenter ; label.transform = CGAffineTransformScale(CGAffineTransformIdentity, 0.2, 0.2);}
                     completion:^(BOOL finished) {
                         label.transform = CGAffineTransformMakeScale(1.0, 1.0);
                         label.alpha = 0;
    }
]; 
```

我遇到的问题是当我使用图像时`animateWithDuration`，图像不会移动，但会移动`Label`。如果我注释掉动画，图像会再次移动。难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:49:18.520

试试下面的代码......

```
[UIView animateWithDuration:1.0f animations:^{
    imageView.frame = CGRectMake(newCenter.x, newCenter.y, imageView.frame.size.width, imageView.frame.size.height);
}]; 
```

您也可以使用以下代码移动`UIImageView`或其他任何内容...我使用此代码`UIScrollView`在键盘出现时滚动...我根据您的要求添加代码..

```
UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1.0f];
imageView.frame = CGRectMake(newCenter.x, newCenter.y, imageView.frame.size.width, imageView.frame.size.height);
[UIView commitAnimations]; 
```

我希望这对你有帮助......

# vhdl - VHDL FSM 中的状态管理

> ID：14256061
> 
> 赞同：4
> 
> 时间：2013-01-10T10:46:18.463
> 
> 标签：vhdl, fsm

我在 VHDL 中看到的许多 FSM 通过`next_state`在 FSM 逻辑中设置一个变量“”来工作，然后将其单独分配给进程之外的状态变量。

`state <= state_five`如果简单地写“ ;”有什么问题 改为设置下一个状态？我假设有*这么*多人使用单独的下一个状态变量而不是直接分配给我一直看到的状态的原因，但据我所知，除了它使代码之外没有区别更长更复杂的外观。

我错过了什么吗？还是只是风格问题？如果是这样，为什么这种风格更好，对我来说似乎没有必要。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T11:16:58.337

“单纯写有什么问题`state <= state_five;`吗？”

什么都没有——前提是状态分配是在时钟过程中完成的。

这导致了简洁可靠的“单进程状态机”风格，而不是在太多教科书和在线教程中教授的不可靠（因为很容易弄错敏感度列表）的双进程风格。

搜索“单进程状态机”，您应该能够找到很好的示例材料和进一步的讨论。

历史记录：上个世纪可能有一些合成工具存在单进程风格的问题；但这不是现在避免它的理由。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T16:50:42.573

有些人之所以总是写两个进程状态机（即一个同步进程和一个并发进程），可能主要是因为他们在学校就学会了这样做，就像其他人所说的那样。

但是，在某些情况下，这种编码风格实际上可能比单一同步进程更好。简而言之，它允许您在同一上下文中混合同步和并发分配。考虑以下两段代码，它们都完成了同样的事情：

两进程状态机：

```
process (clk)
begin
  if rising_edge(clk) then
    state <= state_next;
  end if;
end process;  

process (all)
begin 
  state_next <= state;
  case state is 
    when s_idle => 
      if req_i = '1' then 
        fifo_read <= '1'; -- Concurrent assignment
        state_next <= s_check_data; -- "Synchronous" assignment 
      end if; 
    when s_check_data =>
      if fifo_out = x"1234" then
        (...)
      end if;
    (...) 
  end case; 
end process; 
```

单进程状态机：

```
process (clk)
begin 
  if rising_edge(clk) then
    case state is 
      when s_idle => 
        if req_i = '1' then 
          fifo_read <= '1';
          state <= s_wait_for_data;
        end if;
      when s_wait_for_data =>
        state <= s_check_data;
      when s_check_data =>
        -- Data word from FIFO now available.
        if fifo_out = x"1234" then
          (...)
        end if;
      (...) 
    end case;
  end if;
end process; 
```

请注意第二个示例中的额外状态。因为没有办法在 VHDL 中的同步进程中进行并发分配（我希望有！），一个寄存器将被添加到 fifo_read 信号中，将其延迟一个周期。虽然这个例子很简单，但始终坚持使用单进程状态机有时会导致代码变得非常混乱且难以理解。它还可能导致您的状态机在硬件上花费更多资源，甚至使代码更长。这两种风格都不是正确的选择，但我通常更喜欢单进程变体。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T14:47:10.893

甚至使用变量：

```
state := state_five 
```

使用变量来存储状态意味着它对进程保持完全本地化，并且不会污染整个`architecture`.

这也意味着如果你在`report`调试时习惯使用 printf（对不起）来跟踪状态机的进度（有时比波形查看器更可取），你可以在状态机结束时报告预期的*下一个*状态过程，可以很方便。

补充：如评论中所述，变量赋值“立即”发生（要清楚 - 这不会导致`case`语句立即切换到下一个状态！）

如果您需要提前一个周期输出，则可以（偶尔）使用此效果 - 通过在过程结束时根据下一个状态分配给所述信号。如果我最终需要这样做，我倾向于有一个显式`next_state`变量，我将它用于除`case`语句和 the之外的所有内容`state := next_state;`（正好在时钟进程结束时）。它向代码审查者展示了您打算这样做！

# java - CountDownLatch 在尝试等待时抛出异常（）

> ID：14256069
> 
> 赞同：0
> 
> 时间：2013-01-10T10:46:33.957
> 
> 标签：java, multithreading, countdownlatch

我有一个线程 A 运行另一个线程 B。线程 A 实现了一个方法“stopExec()”，它试图干净地退出线程 B - 允许它完成一些任务。所以我的 stopExec 方法看起来像这样：

```
private CountDownLatch lock;

public void stopExec() {
  lock = new CountDownLatch(1);
  threadB.finish();
  try {
    lock.await();
  } catch(InterruptedExcetion ie) {
    Log.d(null, "Thread A not locked.");
  }
  Log.d(null, "Finished.");
} 
```

线程 B 引用了线程 A，它调用“threadA.lock.countDown();” 当它完成它正在做的任何事情时。

抛出异常会发生什么......线程A不等待，而只是继续。有人可以解释我为什么/我做错了什么。在其他情况下，我以类似的方式使用了 CountDownLatch，它按预期工作。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:32:35.813

```
lock = new CountDownLatch(1);
threadB.finish(); 
```

此代码已损坏：它包含`lock`变量的数据竞争。尝试通过设置`lock`变量来解决您的问题`volatile`。

# ruby-on-rails - RubyOnRails | ActiveRecord::AssociationType 不匹配

> ID：14256070
> 
> 赞同：0
> 
> 时间：2013-01-10T10:46:34.703
> 
> 标签：ruby-on-rails

我有一个 Stage 模型，它属于用户模型。用户模型 has_many 阶段。

当我尝试使用包含 id 的 hidden_​​field 创建新阶段时，`current_user`出现以下错误：

```
ActiveRecord::AssociationTypeMismatch in StagesController#create
User(#63609336) expected, got String(#16545012) 
```

这是数组：

```
 {"utf8"=>"✓",
 "authenticity_token"=>"YD3VVr9Hntg/LEGjFAzu2roR5NGe6FPclew+zJOvGpY=",
 "stage"=>{"user"=>"8",
 "intitule"=>"er",
 "entreprise"=>"er",
 "secteur"=>"er",
 "mission"=>"er",
 "duree"=>"erea",
 "annee_debut"=>"az",
 "annee_fin"=>"z",
 "comment"=>"az",
 "site_entreprise"=>"az"},
 "commit"=>"Create Stage"} 
```

`user_id`是一个整数字段。

风景 ：

```
<%= f.hidden_field :user, :value => current_user.id %> 
```

哪里有问题 ？我找不到任何解决方案！谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:49:48.763

用。。。来代替

```
<%= f.hidden_field :user_id, :value => current_user.id %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:51:57.157

我不建议为此使用隐藏字段，因为用户可以修改隐藏字段。我建议`current_user.stages.create`改为在控制器中执行类似操作，这将在创建的 Stage 中预先填充 user_id。

# xcode - Xcode 错误“重复符号”导致 Apple Mach-O 链接器错误

> ID：14256074
> 
> 赞同：1
> 
> 时间：2013-01-10T10:46:35.783
> 
> 标签：xcode, linker, mach-o

```
duplicate symbol _leagueTableLoaded in:
/Users/Brendan/Library/Developer/Xcode/DerivedData/2013-dbhrwzgxgwhfbqatgqpfrmqyucyu/Build/Intermediates/2013.build/Debug-iphonesimulator/2013.build/Objects-normal/i386/LTGlobalResultsViewController.o

/Users/Brendan/Library/Developer/Xcode/DerivedData/2013-dbhrwzgxgwhfbqatgqpfrmqyucyu/Build/Intermediates/2013.build/Debug-iphonesimulator/2013.build/Objects-normal/i386/LTJumpToMeViewController.o

duplicate symbol _showGLobalCompany in:

/Users/Brendan/Library/Developer/Xcode/DerivedData/2013-dbhrwzgxgwhfbqatgqpfrmqyucyu/Build/Intermediates/2013.build/Debug-iphonesimulator/2013.build/Objects-normal/i386/LTGlobalResultsViewController.o

/Users/Brendan/Library/Developer/Xcode/DerivedData/2013-dbhrwzgxgwhfbqatgqpfrmqyucyu/Build/Intermediates/2013.build/Debug-iphonesimulator/2013.build/Objects-normal/i386/LTJumpToPositionViewController.o

duplicate symbol _leagueTableLoaded in:

/Users/Brendan/Library/Developer/Xcode/DerivedData/2013-dbhrwzgxgwhfbqatgqpfrmqyucyu/Build/Intermediates/2013.build/Debug-iphonesimulator/2013.build/Objects-normal/i386/LTGlobalResultsViewController.o

/Users/Brendan/Library/Developer/Xcode/DerivedData/2013-dbhrwzgxgwhfbqatgqpfrmqyucyu/Build/Intermediates/2013.build/Debug-iphonesimulator/2013.build/Objects-normal/i386/LTJumpToPositionViewController.o

ld: 3 duplicate symbols for architecture i386

clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

仅当我尝试在模拟器中构建时（在我可以无错误构建的任何 iOS 设备上）时，我才在 xcode 中收到上述错误。我有三个班级：

1.LTGlobalResultsViewController 2.LTJumpToMeViewController 3.LTJumpToPositionViewController

这三个都是在 xcode 中创建的，但是 2 和 3 都在 xcode 之外进行了修改，然后重新构建。

@property bool LeagueTableLoaded 在所有三个的标题中定义。它被声明为：

```
@property bool leagueTableLoaded; 
```

究竟是什么导致了这个错误？我尝试了以下方法：

1.  我曾尝试在不同的类中重命名leagueTableLoaded，但这并不能解决它。

2.  我尝试在 library/developer/xcode 文件夹中手动删除我的派生数据文件。

3.  根据其他问题，我检查了是否要导入 .m 文件。不是这种情况。[Apple Mach-O 链接器错误（“重复符号”）](https://stackoverflow.com/questions/10644927/apple-mach-o-linker-error-duplicate-symbol)

还有其他建议或建议吗？谢谢，詹姆斯

补充：根据要求，请从我的 .h 和 .m 文件中找到所有引用 LeagueTableLoaded 或我在尝试绕过此错误时创建的任何变体的提取：

```
LTJumpToMeViewController.h
@property bool leagueTableLoadedMe;

LTJumpToMeViewController.m
@implementation LTJumpToMeViewController
bool leagueTableLoaded = false;

LTGlobalResultsViewController.h
@property bool globalLeagueTableLoaded;

LTGlobalResultsViewController.m
@implementation LTGlobalResultsViewController
bool leagueTableLoaded = false;

LTJumpToPositionViewController.h
@property bool leagueTableLoadedPos;

LTJumpToPositionViewController.m
@implementation LTJumpToPositionViewController
bool leagueTableLoaded = false; 
```

如果需要，我可以提供更多信息！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-04-30T19:35:08.033

对我来说，当我心不在焉地包含一个 .m 文件而不是一个 .h 时，出现了重复符号错误（为什么 Xcode 的自动提示甚至会显示 .m 文件？！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:40:31.383

为此，这是由在 LTGlobalResultsViewController.m 和 LTJumpToPositionViewController.m 中定义的leagueTableLoaded bool 引起的。

从其中一个中删除它解决了这个问题。虽然我不知道为什么它一开始就在那里！希望这可以帮助遇到同样问题的其他人！詹姆士

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-13T09:14:48.483

Xcode 错误“重复符号”导致 Apple Mach-O 链接器错误是由 Project 中的重复符号引起的。避免错误的步骤

1.  **转到项目**-> **目标**->**构建阶段**->**编译源**
2.  **检查重复文件（实现文件）**
3.  **删除文件并重新添加**
4.  **再次清理并运行项目**

这对我有用。希望能帮助到你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-22T06:56:32.087

在第二个视图控制器中，您错误地***#import "First.m"***，检查它必须是*first.h*文件，因此将其替换为*first.h*。它对我有用。

# mysql - 是否有可能用数值改变字符串的顺序

> ID：14256076
> 
> 赞同：1
> 
> 时间：2013-01-10T10:46:43.537
> 
> 标签：mysql, database, string

我的数据库中有一些字符串。其中一些具有数值（但当然是字符串格式）。我正在显示按升序排列的这些值。

所以我们知道，对于字符串值，例如 10 大于 2，这是正常的。我在问是否有任何解决方案可以在 2 之后显示 10，而不更改代码或数据库结构，只更改数据。

例如，如果我必须显示从 1 到 10 的值，我将拥有：

*   1
*   10
*   2
*   3
*   4
*   5
*   6
*   7
*   8
*   9

我想要的是

*   1
*   2
*   3
*   4
*   5
*   6
*   7
*   8
*   9
*   10

是否有可能添加“将被解释为大于 9 的不可见字符或字符串”。如果我放 a10 而不是 10，a10 将在最后，但是否有任何不可见或不可见的字符。

所以，我再说一遍，我不是在寻找编程或数据库结构解决方案，而是寻找一种简单的解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:56:29.590

您可以尝试将值转换为数字，然后按它排序：

```
select col
from yourtable
order by cast(col AS UNSIGNED) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/14396/9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:51:16.420

您可以尝试将正确数量的零附加到数据的前面：

```
01
02
03
..
10
11
..
99 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T04:29:19.773

由于您在此列中混合了数字和字母 - 即使不是在单行中 - 您真正想要做的是自然排序。这不是 MySQL 本身可以做的事情。但是，有一些解决方法。我遇到的最好的是：

1.  按长度排序，然后按值排序。

    SELECT mixedColumn FROM tableName ORDER BY LENGTH(mixedColumn), mixedColumn;

    更多示例参见： http: [//www.copterlabs.com/blog/natural-sorting-in-mysql/](http://www.copterlabs.com/blog/natural-sorting-in-mysql/)

2.  使用辅助列作为排序键，它将包含某种规范化数据（即只有数字或只有字母）。

    CREATE TABLE tableName (mixedColumn varchar, sortColumn int); 插入表名值 ('1',1), ('2',2), ('10',3), ('a',4),('a1',5),('a2',6 ),('b1',7);

    SELECT mixedColumn FROM tableName ORDER BY sortColumn;

    除非您能找到处理订购的好方法，否则这可能很难维护。

当然，如果您能够脱离数据库，您将能够使用来自各种编程语言的自然排序功能。

# django - django.contrib.auth.user 的唯一电子邮件约束

> ID：14256081
> 
> 赞同：4
> 
> 时间：2013-01-10T10:47:01.133
> 
> 标签：django, django-models, django-south, django-authentication

我已经更改了 django.contrib.auth.user 模型，我已将电子邮件 ID 设为唯一。之后我添加了一个数据迁移以反映相同-

*   python manage.py datamigration appname unique_password。其次是 python manage.py schemamigration appname --auto-->no changes。最后，python manage.py migrate appname。

*   向前迁移到 0003_unique_password

*   应用程序名称：0037_unique_password.py

现在，当我添加一个电子邮件不是唯一的用户时，它会给我一个错误，并且不允许我通过**django admin**创建用户。但是当我这样做时：>

*   python manage.py 外壳

*   从 django.contrib.auth.models 导入用户

*   user=User('cust1','123','xxx@gmail.com') 这会创建一个用户对象，即使 'xxx@gmail.com' 已经存在。

如何为现有项目（带有数据）向 django.contrib.auth.user.email 添加唯一约束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:05:41.470

根据模型验证[文档](https://docs.djangoproject.com/en/dev/ref/models/instances/?from=olddocs#validating-objects)，在模型验证期间检查唯一性。调用`save()`模型不会自动导致模型验证。管理应用程序**将**调用模型验证。

没有什么能阻止您在 Python 中创建`User`对象，例如`user=User('cust1','123','xxx@gmail.com')`然后执行`user.save()`. 如果在数据库级别进行唯一性检查，此时您可能会遇到异常。如果您想在保存之前进行检查，请调用`is_valid()`模型实例。

如果您希望`User`在保存之前自动验证每个对象，请在保存继续之前使用[pre_save](https://docs.djangoproject.com/en/dev/ref/signals/#django.db.models.signals.pre_save) Django 信号进行模型验证。

# jquery - 为什么在 JQuery DOM 操作后我的（不正确的）DOM 结构会自动更正？

> ID：14256084
> 
> 赞同：-1
> 
> 时间：2013-01-10T10:47:07.647
> 
> 标签：jquery, html, dom, dom-manipulation

我已经为此在网上搜索了几个小时，但找不到解释或解决方案。所以让我们看看是否有人可以在这里为我提供一个......

我遇到的问题是我有一些“无效”的旧 HTML，我们目前正在通过 JQuery 注入一些其他 div 等来改造网站。但是在更改了 DOM 之后，一些功能不再起作用。

让我给你举个例子。旧的 HTML 类似于：

```
<table>
   <form method="POST">
   <tr>
      <td><input type="text" value="test" /></td>
   </tr>
   <tr>
      <td><input type="submit" value="SEND!" /></td>
   </tr>
   </form>
</table> 
```

如您所见，在 a`<form>`之外有一个嵌套`<tr>`实际上是无效的。但它被浏览器正确解释并且它正在工作。**但是**，如果我通过 JQuery 操作 DOM，浏览器（在我的情况下为 Firefox）会注意到它是错误的并且按钮不再起作用。检查我的 Firebug 会给出类似的结果：

```
<table>
   <form method="POST"></form>
   <tr>
      <td>... 
```

所以显然该`submit`按钮不再起作用，因为它“自动”关闭了`<form>`标签并且`submit`不再嵌入。

任何人都可以对这个问题有所了解吗？为什么会发生这种情况，我能做些什么来防止这种情况发生（除了更改原始 HTML）。

非常感谢 ！！

**编辑：**

为了避免只得到“无效标记”的答案，让我向您展示第二个示例。

```
<input type="text" id="something" value="" /> 
```

在 onLoad 上加载的 Javascript 函数：

```
function setRequired() {
   document.getElementById('something').setAttribute('aria-required', 'true');
} 
```

在 onload 之后，我可以在 Firebug 中检查它，它可以按预期工作：

```
<input type="text" id="something" value="" aria-required="true" /> 
```

但是，如果我在那之后添加 DOM 操作，它最终会变成：

```
<inputaria-required="true" type="text" value="" id="something"></inputaria-required="true"> 
```

**编辑2：**

至于 DOM 修改，我只是将页面的整个主体包裹在`<div>`标签结构中。所以类似（简化）：

```
$('body').wrapInner('<div class="container">'); 
```

要查看此问题的实际效果，请查看[此页面](http://www.icannotchoose.com/testingWrap.html)（确保您在 Firefox 中查看它，因为它适用于 IE）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:48:56.213

这是由浏览器而不是 jQuery 完成的。您可以阻止它的唯一方法是使您的 HTML 代码有效，即。把`<table>`里面`<form>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:54:12.840

那是一个无效的标记。如果无法更改标记，我建议您更正标记或为此使用 Jquery .submit()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T13:22:13.057

您稍后添加的代码非常混乱。我想说它需要一个非常精确的时间才能正常工作：

```
// Bind a page load event handler
$(document).ready(function() {
    LoadStyle();
});

// Manipulate page with raw HTML 1/2 seconds after page load
function LoadStyle() {
    setTimeout(function () {
    var outerbody = "<div>";
    var outerbodyEnd = "<\/div>";
    var frameHtml = $('body').html();
        var frameHtml = $('body').html();
        document.body.innerHTML = outerbody + frameHtml + outerbodyEnd;
    }, 500);
}

// Override previous onload handlers
window.onload = setRequired;

// Manipulate page with DOM methods right after page load
function setRequired() {
    var field;
    field = document.getElementsByName('required_one')[0];
    setAttrNS(field, "aria-required", "true");
} 
```

无论如何，如果将`setTimeout()`延迟增加到 5000 毫秒，您将看到无效节点是由`LoadStyle()`. 经过进一步调查，我编写了这个仍然存在问题的较短片段（不涉及 jQuery）：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
    <head>
        <title>Test wrapping the content</title>
        <script type="text/javascript" language="javascript">
            window.onload = function(){
                var field = document.getElementsByName('required_one')[0];
                field.setAttributeNS("http://www.w3.org/2005/07/aaa", "aria-required", true);
                alert(document.getElementsByTagName("body")[0].innerHTML);
            };
        </script>
    </head>
    <body>
        <input type="text" name="required_one" value="This should show">
    </body>
</html> 
```

无效的 HTML 由 生成`.innerHTML`。Firebug 的 HTML 面板和 alert() 都不显示命名空间属性。可悲的是，我不熟悉命名空间，所以我无法告诉你出了什么问题：你的代码、Firebug 或 Firefox。

# c++ - 将设备向量归零的更有效方法

> ID：14256087
> 
> 赞同：0
> 
> 时间：2013-01-10T10:47:16.073
> 
> 标签：c++, cuda

将先前使用 cudaMalloc 分配的设备向量归零的最佳（有效）方法是什么？

启动一个线程在 GPU 中执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T11:01:30.887

[链接到 cudaMemset()](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__MEMORY_1ge07c97b96efd09abaeb3ca3b5f8da4ee)

```
cudaError_t cudaMemset ( void* devPtr, int  value, size_t count ) 
```

将设备内存初始化或设置为一个值。用常量字节值填充 devPtr 指向的内存区域的第一个 count 字节。

请注意，此函数相对于主机是异步的，除非 devPtr 指的是固定的主机内存。

笔记：

*   请注意，此函数还可能从以前的异步启动返回错误代码。

*   另请参阅 memset 同步详细信息。

# c# - 是否可以通过 Microsoft.Office.Interop.Excel 命名空间以编程方式单击命令按钮？

> ID：14256091
> 
> 赞同：1
> 
> 时间：2013-01-10T10:47:27.307
> 
> 标签：c#, .net, excel-interop

我有一个 Excel 工作簿，其中包含在工作表上执行某些计算的 VBA 宏。宏受到保护并通过单击命令按钮触发。因为有保护，看不到哪个宏被哪个按钮触发，所以不能直接运行宏。

我需要在 C# 项目中使用计算，因此我使用 Microsoft.Office.Interop.Excel 命名空间打开文件并将输入值写入必要的单元格。但是要获得输出值，我需要运行宏。是否可以以编程方式单击命令按钮，或者是否有其他方法可以做到这一点？

# javascript - 将 Repeater Container.ItemIndex 传递给 Javascript 函数

> ID：14256092
> 
> 赞同：2
> 
> 时间：2013-01-10T10:47:28.933
> 
> 标签：javascript, asp.net, parameters, repeater

`OnClientClick`在 C# Asp.Net 中，当从 ASP 按钮按下时，我需要将我的转发器出现索引传递给 Javascript 函数。这是我的代码

```
<asp:Button ID="btnGetNewQuote" 
            Text="Get New Quote" 
            class="pcbutton" 
            runat="server" 
            OnCommand="GetNewQuote" 
            CommandArgument ='<%# Container.ItemIndex %>'  
            OnClientClick="return getNewQuote(<%# Container.ItemIndex %>) /> 
```

如果我硬编码 ....OnClientClick="return getNewQuote(0)"> 它可以工作并且 JS 被调用，但是只要我把 #Container.ItemIndex # 放在那里，JS就会被忽略并且它只是回发给后面的代码...

将 JS Functions传递`Container.ItemIndex`到页面上除此之外的所有其他地方都有效`OnClientClick`吗？

有谁知道这是为什么以及我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T11:16:24.237

尝试这个

```
OnClientClick='<%# "return getNewQuote(" + Container.ItemIndex + ")" %>' 
```

代替

```
OnClientClick="return getNewQuote(<%# Container.ItemIndex %>) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-05T06:44:23.833

如果我们想在 vb.net 中使用

OnClientClick='<%# "return getNewQuote(" & Container.ItemIndex & ")" %>'

否则会给出异常字符串格式不正确

# excel - Excel 查找在删除重复项时水平返回多个值

> ID：14256096
> 
> 赞同：1
> 
> 时间：2013-01-10T10:47:32.203
> 
> 标签：excel, return-value, multiple-instances, vlookup, vba

我想对查找值列表进行垂直查找，然后将多个值返回到每个查找值的列中。经过长时间的谷歌搜索，我实际上设法做到了这一点，这是代码：

```
=INDEX(Data!$H$3:$H$70000, SMALL(IF($B3=Data!$J$3:$J$70000, ROW(Data!$J$3:$J$70000)-MIN(ROW(Data!$J$3:$J$70000))+1, ""), COLUMN(A$2))) 
```

现在，我的问题是，正如您在公式中看到的，我的查找范围包含 70,000 行，这意味着很多返回值。但是这些返回值中的大多数都是双倍的。这意味着我必须将上面的公式拖到许多列上，直到所有查找值（大约 200）都返回 #NUM！。

有没有可能的方法，我猜 VBA 是必要的，在删除重复项后返回值？我是 VBA 的新手，我不知道该怎么做。计算有这么多细胞也需要很长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:11:23.820

[已编辑]

您可以使用修改后的公式来做您想做的事，但不确定 70,000 行的效率如何。

使用此公式进行第一场比赛

`=IFERROR(INDEX(Data!$H3:$H70000,MATCH($B3,Data!$J3:$J70000,0)),"")`

现在假设**F5**中的公式在 G5 中使用此公式确认`CTRL+SHIFT+ENTER`并复制

=IFERROR(INDEX(数据!$H3:$H70000,MATCH(1,($B3=数据!$J3:$J70000)*ISNA(MATCH(数据!$H3:$H70000, **$F5:F5** ,0)) ,0)),"")

根据公式 1 的位置更改粗体部分

这将为您提供一个没有重复的列表......当您用完值时，您会得到空白而不是错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:39:29.997

不确定您是否仍在寻求 VBA 答案，但这应该可以完成工作 - 在我的机器上运行大约需要 25 秒 - 这个论坛上的人可能会加速它：

```
Sub ReturnValues()

Dim rnSearch As Range, rnLookup As Range, rnTemp As Range Dim varArray
As Variant Dim lnIndex As Long Dim strTemp As String

Set rnSearch = Sheet1.Range("A1:A200") 'Set this to your 200 row value range
Set rnLookup = Sheet2.Range("A1:B70000") 'Set this to your lookup range (assume 2
columns)

varArray = rnLookup

For Each rnTemp In rnSearch
    For lnIndex = LBound(varArray, 1) To UBound(varArray, 1)
        strTemp = rnTemp.Value
        If varArray(lnIndex, 1) = strTemp Then
            If WorksheetFunction.CountIf(rnTemp.EntireRow, varArray(lnIndex, 2)) = 0 Then 'Check if value exists already
                Sheet1.Cells(rnTemp.Row, rnTemp.EntireRow.Columns.Count).End(xlToLeft).Offset(0, 1).Value =
varArray(lnIndex, 2)
            End If
        End If
    Next Next

End Sub 
```

# sql - 具有特定逻辑的选择语句

> ID：14256099
> 
> 赞同：2
> 
> 时间：2013-01-10T10:47:43.500
> 
> 标签：sql, sql-server-2008, tsql

我在**SQL Server 2008 R2**的**Microsoft Dynamics AX ERP**数据库中有一个**表**，它有一些行，表中有一个名为 qty 的字段，一些行的数量为负数，一些行的数量为正数。还有另一个字段 TransactionID，现在我想选择所有那些具有负数量的 TransactionID，以及那些具有正 QTy 和负数量的行的 TransactionID。

 ****TransactionID 是主表的外键字段。

到目前为止，我在下面编写了不起作用的代码。

```
select * from RBOTRANSACTIONSALESTRANS main where main.qty < 0 
                                               and main.DATAAREAID = 'DAT'
and exists 
(
select 1 from RBOTRANSACTIONSALESTRANS where QTY > 0 
and RBOTRANSACTIONSALESTRANS.DATAAREAID = main.DATAAREAID
and RBOTRANSACTIONSALESTRANS.STORE = main.STORE 
and RBOTRANSACTIONSALESTRANS.TERMINALID = main.TERMINALID 
)

order by main.TRANSACTIONID 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:55:40.503

回顾一下，您要选择至少存在一个具有相同 TransactionID 且数量为负数的行的所有行？

```
select * 
from RBOTRANSACTIONSALESTRANS main 
where main.DATAAREAID = 'DAT'
 and exists 
  (
    select 1 
    from RBOTRANSACTIONSALESTRANS sub 
    where sub.QTY < 0 
      and sub.DATAAREAID = main.DATAAREAID
      and sub.STORE = main.STORE 
      and sub.TERMINALID = main.TERMINALID
      and sub.TRANSACTIONID = main.TRANSACTIONID
  )
order by main.TRANSACTIONID 
```

主要区别是，你有一张`main.QTY < 0`支票。我补充说`sub.TRANSACTIONID = main.TRANSACTIONID`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:56:01.690

或多或少的查询应该是这样的

```
select * from 
(
select tansactionID, sum(qty) as q, sum(abs(qty)) as q2
from table2 T
group by tansactionID ) T
where q<> q2 
```

发布架构，以便我可以调整它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T11:09:21.587

JOINed 查询`TRANSACTIONID`根据您的条件定义（请参阅`HAVING`条件）。所以在 JOIN 之后你过滤你的表只留下这些`TRANSACTIONID`。

```
select t.* from RBOTRANSACTIONSALESTRANS t
join
(
select TRANSACTIONID,min(main.qty),max(main.qty) 
    from RBOTRANSACTIONSALESTRANS main 
GROUP BY TRANSACTIONID
HAVING (max(main.qty) < 0) 
         or 
       ((min(main.qty) < 0) and (max(main.qty) > 0))
) t1 on (t.TRANSACTIONID=t1.TRANSACTIONID) 
```

**UPD**在您对问题发表评论后，我认为您只需要在内部查询中使用此条件：

```
HAVING not (min(main.qty) < 0) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T11:23:37.720

在我看来，您可能使问题复杂化了。如果我正确理解标准，您希望所有行

*   数量 < 0

**或者**

*   数量 < 0**并且**存在具有相同交易 ID 且数量为负的行

所以开始

```
SELECT  *
FROM    RBOTRANSACTIONSALESTRANS tr
WHERE   tr.DATAAREAID = 'DAT'
AND     tr.Qty < 0 
```

将满足第一个标准。以下将做第二个。

```
SELECT  *
FROM    RBOTRANSACTIONSALESTRANS tr
WHERE   tr.DATAAREAID = 'DAT'
AND     tr.Qty > 0
AND     EXISTS
        (   SELECT  1
            FROM    RBOTRANSACTIONSALESTRANS neg
            WHERE   neg.TransactionID = tr.TransactionID
            AND     neg.DATAAREAID = 'DAT'
            AND     neg.Quantity < 0
        ) 
```

这可以组合为

```
SELECT  *
FROM    RBOTRANSACTIONSALESTRANS tr
WHERE   tr.DATAAREAID = 'DAT'
AND (   tr.Qty < 0
    OR  EXISTS
        (   SELECT  1
            FROM    RBOTRANSACTIONSALESTRANS neg
            WHERE   neg.TransactionID = tr.TransactionID
            AND     neg.DATAAREAID = 'DAT'
            AND     neg.Quantity < 0
        )
    ) 
```

`< 0`但是，第一个子句是多余的，因为该子句也将满足数量所在的任何行`EXISTS`。所以这可以简化为：

```
SELECT  *
FROM    RBOTRANSACTIONSALESTRANS tr
WHERE   tr.DATAAREAID = 'DAT'
AND     EXISTS
        (   SELECT  1
            FROM    RBOTRANSACTIONSALESTRANS neg
            WHERE   neg.TransactionID = tr.TransactionID
            AND     neg.DATAAREAID = 'DAT'
            AND     neg.Quantity < 0
        ) 
```****

# javascript - 使用javascript循环循环

> ID：14256100
> 
> 赞同：0
> 
> 时间：2013-01-10T10:47:44.207
> 
> 标签：javascript, html5-canvas, setinterval

我想使用 javascript 创建一个具有内部循环的周期性过程。每个周期由相应变化的圆圈表示 - 它们之间具有指定的时间间隔和周期之间的指定时间间隔。问题也越来越难，因为我还需要循环和循环之间的可变时间间隔（我将使用随机数函数来完成）。

目前我有以下代码，它不能正常工作：

```
<html>
<body>

<canvas id="canv" widht="800" height="500"></canvas>
<script>

var ctx=document.getElementById("canv").getContext('2d');
var cnt=0;

var int0=self.setInterval(function(){startDraw()},5000);

function startDraw ()
{
    var int1=self.setInterval(function(){DrawC()},1000);
    cnt++;
    if (cnt==3)
    {
        int0=window.clearInterval(int0);
    }
}

function DrawC()
{
    ctx.beginPath();
    ctx.arc(200, 200, 50, 0, 2*Math.PI, true);
    ctx.fillStyle="yellow";
    ctx.fill();
    ctx.closePath();  
    var int2=self.setInterval(function(){DrawGC()},1000);
    int1=window.clearInterval(int1);
}

function DrawGC() 
{
    ctx.beginPath();
    ctx.arc(200, 200, 50, 0, 2*Math.PI, true);
    ctx.fillStyle="green";
    ctx.fill();
    ctx.closePath();  
    var int3=self.setInterval(function(){DrawWC()},1000);
    int2=window.clearInterval(int2);
}

function DrawWC() 
{
    ctx.beginPath();
    ctx.arc(200, 200, 52, 0, 2*Math.PI, true);
    ctx.fillStyle="white";
    ctx.fill();
    ctx.closePath();  
    int3=window.clearInterval(int3);
}

  function getRandomInt(min, max)
{
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

</script>
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:56:24.037

此代码的问题 1：您正在使用 int2（在 DrawC 中定义），就好像它是全局定义的一样，间隔不会被清除，因为 int2 在 DrawGC 中没有值。尝试将它们定义为全局 `var int1, int2, int3`；作为代码中的第一行

其次，如果要在 1 个循环后取消间隔，为什么要使用间隔，`setTimeout()`而是使用只调用一次方法的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:59:55.830

您应该将计时器变量设为全局变量。尝试：

```
var int0, int1, int2, int3; 
```

从函数中删除这些变量声明。

试试这个代码，这是你需要的吗？

```
<html>
<body>

<canvas id="canv" widht="800" height="500"></canvas>
<script>

var ctx=document.getElementById("canv").getContext('2d');
var cnt=0;

var int0, int1, int2, int3;

circleTime = 1000;
cycleTime = 5000;

int0 = self.setInterval(startDraw, cycleTime);

function startDraw ()
{
    console.log("startDraw...");
    // Start drawing circles
    self.setTimeout(DrawC, circleTime);

    cnt++;
    if (cnt == 4)
    {
        // Stop startDraw
        int0 = window.clearInterval(int0);

        /*
        // Let's draw again
        cnt = 0;
        cycleTime = getRandomInt(5000, 10000);
        circleTime = getRandomInt(1000, 2000);
        int0 = self.setInterval(startDraw, cycleTime);
        */
    }
}

function DrawC()
{
    console.log("Circle...");

    ctx.beginPath();
    ctx.arc(200, 200, 50, 0, 2*Math.PI, true);
    ctx.fillStyle="yellow";
    ctx.fill();
    ctx.closePath();  

    self.setTimeout(DrawGC, circleTime);
}

function DrawGC() 
{
    console.log("greenCircle...");

    ctx.beginPath();
    ctx.arc(200, 200, 50, 0, 2*Math.PI, true);
    ctx.fillStyle="green";
    ctx.fill();
    ctx.closePath();  

    self.setTimeout(DrawWC, circleTime);
}

function DrawWC() 
{
    console.log("whiteCircle...");

    ctx.beginPath();
    ctx.arc(200, 200, 52, 0, 2*Math.PI, true);
    ctx.fillStyle="white";
    ctx.fill();
    ctx.closePath();  
}

function getRandomInt(min, max)
{
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

</script>
</form>

</body>
</html> 
```

# objective-c - 可可WebView中innerhtml和outerhtml的区别

> ID：14256102
> 
> 赞同：7
> 
> 时间：2013-01-10T10:47:53.763
> 
> 标签：objective-c, macos, cocoa, webview

我在我的应用程序中使用 cocoa webview 进行富文本编辑。只是与 webkit 中可用的 innerHtml 和 outerHtml 方法混淆了。

谁能解释一下有什么区别

```
[(DOMHTMLElement *)[[[webView mainFrame] DOMDocument] documentElement] outerHTML]; 
```

和

```
[(DOMHTMLElement *)[[[webView mainFrame] DOMDocument] documentElement] outerText]; 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-10T11:15:45.297

**innerHTML**是 DOM 元素的一个属性，表示元素内部的 HTML，即在开始标签和结束标签之间。它已被广泛复制，但实现有所不同（可能是因为它没有发布的标准[1]），特别是在它们如何处理元素属性方面。

**outerHTML**类似于innerHTML，它是一个元素属性，包括开始和结束标记以及内容。它没有像 innerHTML 那样被广泛复制，因此它或多或少只是 IE。

```
<p id="pid">welcome</p>

innerHTML of element "pid" == welcome
outerHTML of element "pid" == <p id="pid">welcome</p> 
```

和哪里

**innerText** 容器的文本内容。

**outerText** 访问读取时与 innerText 相同；分配新值时替换整个元素。

```
<p id="pid">welcome</p>

innerText of element "pid" == welcome
outerText of element "pid" == welcome 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-10T11:56:39.887

假设我们有一个使用 html 加载到 webview 的页面

```
<html>
<head><title>Your Title</title></head>
<body>
<h1>Heading</h1>
<p id="para" >hi <b>Your_Name</b></p>
</body>
<html> 
```

现在。

```
[(DOMHTMLElement *)[[webView mainFrame] DOMDocument] documentElement] 
```

将返回 DOMHTMLElement "html" 和

**outerHTML**将返回完整的 html 为

```
<html>
<head><title>Your Title</title></head>
<body>
<h1>Heading</hi>
<p id="para">hi <b>Your_Name</b></p>
</body>
<html> 
```

**外文本**将返回 html 作为

标题你好你的名字

例如，如果我们在这种情况下以 p 标签为例

```
outerHTML will return - <p id="para">hi <b>Your_Name</b></p>

outerText will return - hi Your_Name

innerHTML will return - hi <b>Your_Name</b>

innerText will return - hi Your_Name 
```

我已经借助示例进行了解释，其中这四个术语的定义已在下面的答案中进行了解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-23T21:48:32.113

```
<!DOCTYPE html>
<html>
<head>
<title>innerHTML and outerHTML | Javascript Usages</title>
</head>
<body>
<div id="replace">REPLACE By inner or outer HTML</div>
<script>
userwant = "inner";
userwant = "outer";
if (userwant = "inner") {
document.querySelector("#replace").innerHTML;
// this will remove just message: 'REPLACE By inner or outer HTML' //
} else if (userwant = "outer") {
document.querySelector("#replace").outerHTML;
// this will remove all element <div> ~ </div> by the message: 'REPLACE By inner or outer HTML' //
};
</script>
</body>
</html>
```

# cobol - 用于 COBOL 程序的一行中的前 6 个字符是什么？

> ID：14256103
> 
> 赞同：1
> 
> 时间：2013-01-10T10:47:55.997
> 
> 标签：cobol

我正在查看具有以下行的 COBOL 程序：

```
T41037*         SELECT  XX 
```

这是 SQL 语句的一部分。我相信这`*`表明它已被注释掉。但是 T41037 是什么意思？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T11:12:43.503

最初前 6 个字符包含行号，这在打孔卡时代非常重要（尝试将一堆卡片丢在地上，然后将它们按正确的顺序放回，没有行号）。

这些天它可以是任何东西。一些站点将其用于更改号码或其他一些特殊用途。试着问问和你一起工作的人，没有通用的 Cobol 含义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:15:24.157

此外，第 1 列中的“T”可能表示要在您处于测试模式时编译和运行该行。我在某些地方看到过，但我认为它更像是第 7 列中的“T”而不是“*”。

所有系统都不同，不同的商店运行不同的测试软件。

# oop - Scala 不可变 vs 可变。一个人应该走的路是什么？

> ID：14256107
> 
> 赞同：5
> 
> 时间：2013-01-10T10:48:09.330
> 
> 标签：oop, scala, coding-style, functional-programming

我只是在学习用scala编程。我在函数式编程方面有一些经验，就像我在面向对象编程方面一样。我的问题很简单，但很棘手：

Scala 中应该使用哪些结构？我们应该只坚持不可变，例如。通过遍历列表来修改列表并将新列表粘在一起，还是选择可变列表？您对此有何看法，性能方面，内存相关方面是什么，...

我可能会以函数式编程，但它通常会扩展为疯狂的工作量来完成使用可变变量很容易完成的事情。它取决于情况，使用什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T18:12:42.887

更喜欢不可变状态而不是可变状态。仅在绝对必要时使用可变状态。一些值得注意的原因包括：

*   表现。标准库广泛使用 var 和 while 循环，即使这不是 Scala 惯用的。但是，这不应该被模仿，除非您已经*分析*确定将代码修改为更具命令性将带来显着的性能提升的情况。

*   输入/输出。I/O 或与外部世界的交互本质上是依赖于状态的，因此必须以可变的方式处理。

这与所有主要语言（命令式或函数式）中推荐的编码风格没有什么不同。例如，在 Java 中，最好使用只有`private final`字段的数据对象。以不可变（和函数式）方式编写的代码本质上更容易理解，因为当人们看到 a 时`val`，他们知道它永远不会改变，从而减少了任何特定对象或函数可能处于的状态数量。

在许多情况下，它还允许自动并行执行，例如，Scala 中的集合类都有一个`par`函数，该函数将返回一个并行集合，该集合会自动运行对类似`map`或`reduce`并行函数的调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T11:06:22.710

（我认为这一定是重复的，但无法轻易找到较早的类似的，所以我冒昧地回答......）

这个问题没有一般的答案。Scala 的创建者建议的经验法则是从不可变的 val 和结构开始，只要有意义就坚持下去。您几乎总是可以通过这种方式为您的问题创建一个可行的解决方案。但如果不是，当然要务实并使用可变性。

一旦有了解决方案，您就可以对其进行调整、测试、测量其性能等。**如果**您发现例如它太慢或过于复杂，确定它的关键部分，了解它的问题所在，并且 - 如果需要 - 使用可变变量重新实现它，理想情况下使其与程序的其余部分隔离。请注意，在许多情况下，也可以从不可变领域中找到更好的解决方案，因此请先尝试查看那里。特别是对于像我这样的初学者来说，我能想出的最佳解决方案仍然经常发生，看起来扭曲而复杂，没有明显的改进方法——直到在几行代码中看到一个简单而优雅的解决同一问题的解决方案，由经验丰富的 Scala 开发人员创建，他控制了该语言及其库的更多功能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T15:08:32.867

我通常遵守以下规则：

*   永远不要使用静态可变变量

*   保持所有用户定义的数据类型（通常是案例类）不可变，除非它们的复制成本非常高。这将简化很多应用程序逻辑。

*   如果数据结构/集合本质上是可变的（即它被设计为随时间变化），则使用可变数据结构/集合可能是合适的。一个例子可能是一个随着玩家移动而更新的大型游戏世界。请记住（几乎）永远不要在线程之间共享这些数据结构。

*   在方法中使用可变局部变量很好

*   对函数结果使用不可变集合。这些可以根据在使用的上下文中提供最佳性能的内容进行严格或惰性评估。如果您使用依赖于可变集合的延迟评估结果，请小心。

# ruby-on-rails - 如何使黄瓜导轨使用 watir-webdriver 而不是 Capybara

> ID：14256109
> 
> 赞同：1
> 
> 时间：2013-01-10T10:48:09.443
> 
> 标签：ruby-on-rails, cucumber, capybara, watir-webdriver

几天来，我一直在寻找一个简单的答案，但似乎无法在 stackoverflow.com 或谷歌上找到答案。因此，首先，如果在其他地方回答了这个问题，请指出我正确的方向。

因此，我有一个使用 cucumber-rails gem 的相对较新的 Rails 3 项目。我对 Rails 比较陌生，但在 Ruby 和其他 Web 框架（如 Sinatra 和 Ramaze）方面有经验。我的理解是开箱即用，cucumber-rails 使用 Capybara 与 Web 应用程序交互，并且以某种方式在不启动 rails 服务器的情况下执行此操作。它以某种方式与 rack 交互以模拟请求。不确定我是否完全正确，但我很确定它不需要正在运行的 rails 服务器。

我不是 Capybara DSL 的忠实粉丝，我更喜欢我在一些非 Rails 项目（甚至非 Ruby 项目）中使用过的 watir-webdriver。但是，我无法找到任何地方向我展示如何将 Capybara 换成 watir-webdriver。

所以我的问题是：

**cucumber-rails gem 是否有能力将 Capybara 换成 watir-webdriver？**

**如果是这样，最好的方法是什么？**

**如果不是，这是否意味着我需要放弃 cucumber-rails 并在我的项目中手动设置带有 watir-webdriver 的黄瓜？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:22:29.467

[好吧，从项目描述](https://github.com/cucumber/cucumber-rails)中看起来并不乐观：

> 用于 Cucumber 的 Rails 生成器，特别支持 Capybara 和 DatabaseCleaner

果然，它明确地、无条件地[在这里加载 Capybara](https://github.com/cucumber/cucumber-rails/blob/master/lib/cucumber/rails.rb#L23)

我认为这意味着您需要自己连接它。

话虽如此，我认为没有什么能阻止您安装 gem、运行`rails g cucumber:install`，然后替换它生成的文件中的 Capybara 特定位。

# java - 使用 jstl 显示数据表

> ID：14256111
> 
> 赞同：0
> 
> 时间：2013-01-10T10:48:14.863
> 
> 标签：java, sql, jsp, web-applications, jstl

在我的 java web 应用程序中，我有一个名为“sell”的数据表

```
sell(id_sell,id_buyer,id_product,date,final_price,shipping_price,sales_tax) 
```

我创建了一个 jsp 页面，其中显示有关用户的一些信息，例如在拍卖中获胜的产品；这些产品被描述为“销售”。在这个页面中，我必须使用 jstl 库，我的想法是使用 'c:forEach' 标记来迭代表的每一行。

这是我的代码：

```
<table class="table table-bordered">
        <thead>
            <tr>
                <th>Product</th>
                <th>Date</th>
                <th>Final Price</th>
                <th>Shipping Price</th>
                <th>Salex Tax</th>
            </tr>
        </thead>
        <tbody>
            <c:forEach var="s" items="${sell}">
                <tr>
                    <td><c:out value="${s.id_product}"/></td>
                    <td><c:out value="${s.date}"/></td>
                    <td><c:out value="${s.final_price}"/></td>
                    <td><c:out value="${s.shipping_price}"/></td>
                    <td><c:out value="${s.sales_tax}"/></td>
                </tr>
            </c:forEach>
        </tbody>
    </table> 
```

但是这段代码只显示了一个空表。我在哪里做错了？我必须导入一些东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T02:00:08.907

从您的 servlet 中，从您的数据源加载所需的数据，并将其添加到范围。然后，您的 JSP 将能够通过 EL 表达式访问它。例如，在请求范围内添加数据：

```
List<> data = yourDao.list();
request.setAttribute("sell", data); 
```

关于您对自己问题的评论，请明智地使用会话范围。好的做法是使用尽可能小的范围。

# android - Android Intent ACTION.SEND -- 无法向 Twitter 或 Facebook 发送文本

> ID：14256116
> 
> 赞同：3
> 
> 时间：2013-01-10T10:48:29.080
> 
> 标签：android, facebook, android-intent, twitter

当我尝试通过意图将 EditText 中的文本字符串传递到 Facebook 或 Twitter 时遇到问题。事实上，目前唯一可行的选择是电子邮件。我正在使用的代码如下：

```
Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("text/plain");
intent.putExtra(Intent.EXTRA_TEXT, textVariable.getText());
intent.putExtra(Intent.EXTRA_SUBJECT, "Subject Title");

startActivity(Intent.createChooser(intent, "Share Text")); 
```

我已经尝试过使用和不使用主题行。有什么想法吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:51:26.953

以您使用的方式在 Facebook 和 Twitter 上共享文本是不正确的。您需要尝试其他共享方式。

只需参考[链接](http://vnstep.wordpress.com/2012/04/14/share-via-android/)，它将指导您如何使用意图在 facebook 和 twitter 上共享文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-20T22:56:36.800

以下代码应该可以解决问题！

```
 try {
        Intent intent = new Intent();
        intent.setComponent(new ComponentName("com.twitter.android",
                "com.twitter.applib.composer.TextFirstComposerActivity"));
        intent.putExtra(Intent.EXTRA_TEXT, text);
        context.startActivity(intent);
               // Success!

    } catch (Exception e) {
        // official twitter code missing
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T10:51:33.457

使用Intent[在 Android 中的 Twitter、电子邮件和 Facebook 上的位图上使用文本共享位图](http://connectcoders.blogspot.in/2012/12/share-image-with-text-on-twitter.html)

您可以在 twitter 上分享带有文字说明的图片，但`facebook`不能使用 分享文字说明`Intent`，因为您必须使用`Facebook`SDK。

# git - 在 git 中，如何将 MASTER 指针（分支）指向另一个提交而不合并？

> ID：14256119
> 
> 赞同：2
> 
> 时间：2013-01-10T10:48:32.563
> 
> 标签：git, version-control

我在 master 工作，做了一些错误的提交`C`& `D`。

```
A --- B --- C --- D (MASTER) 
```

所以我决定从已知的良好提交重新开始工作，`B`因为我认为这比尝试在`C`和/或`D`提交中找到错误更容易。但我也想在`D`新尝试因任何原因没有成功的情况下重新选择。所以我首先创建了一个分离的 HEAD 指向，`B`然后创建了一个新的分支（RETRY）。我的 git repo 现在看起来像这样：

```
A --- B --- C --- D (MASTER)
       \
        \
         E --- F (RETRY) 
```

事实证明，重新开始工作更容易，`B`而且我的提交`F`工作得很好。所以现在我的问题是：我如何让 MASTER 指向 F 而不合并所有在`C`and中完成的工作`D`（但仍然保留`C`and`D`提交以防我将来想引用它们）？我想结束：

```
A --- B --- C --- D
       \
        \
         E --- F (MASTER) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T10:51:16.003

```
git checkout master
git branch old
git reset --hard retry 
```

将创建（但不切换到）一个新分支（称为`old`），它指向与 master 相同的提交，然后移动`master`以指向与`retry`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:00:54.160

首先，创建一些分支，例如`old_master`将其作为指向您失败工作的指针`master`：

```
git branch old_master master 
```

现在，`master`指出 F：

```
git checkout master
git reset --hard F 
```

稍后，您可以结帐以`old_master`查看旧的错误提交。

# android - 如何禁用 ADT 图形布局编辑器？

> ID：14256120
> 
> 赞同：2
> 
> 时间：2013-01-10T10:48:36.337
> 
> 标签：android, eclipse, adt

如何禁用 Eclipse ADT 图形布局编辑器？

在当前状态下，当在 XML 文件之间切换时会导致长时间停顿，从而导致 Eclipse ADT 在不重新启动的情况下无法使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T15:00:23.480

您必须转到 Preferences -> General->Editors->File Associations 并在 Associated editors 部分中删除 *.XML 扩展名的 Android Layout Editor。

关闭 Eclipse 并重新启动。否则这将不起作用。

# android - 如何让用户选择背景颜色

> ID：14256123
> 
> 赞同：2
> 
> 时间：2013-01-10T10:48:45.120
> 
> 标签：android, android-layout

假设我希望用户更改应用程序的背景颜色。我正在考虑创建几个 xml 布局文件，然后有一个带有布局文件列表的 ListView。然后，当用户选择其中之一时，将加载相应的 xml 文件。

这可能吗？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T10:54:57.447

最简单的方法是在代码中动态化。只需将用户颜色保存到 SharedPreferences 并在代码中用作视图的背景。

所以我建议使用 ColorPikerDialog 来选择任何颜色。例如，您可以使用这个库[https://github.com/gsingh93/android-ColorPickerPreference](https://github.com/gsingh93/android-ColorPickerPreference)

```
SharedPrefrences prefs = getSharedPrefrences(YOUR_SHARED_PREFS, 0);
int colorId = prefs.getInt(BACKGROUND_COLOR, 0);
if(colorId != 0) {
   setBackgroundToColorId(colorId);
} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:15:35.273

我已经这样做了，当用户从 listview 轨道中选择一种颜色时，该 colorid 并将其保存在共享首选项中，正如@llya Demidov 所说。

```
 editor = getSharedPreferences(PREFS_NAME, 0).edit();
    editor.putString(PREF_COLOR, <userselectedcolor>); 
```

在加载每个活动之前这样做

```
 pref = getSharedPreferences(PREFS_NAME, 0);
            int color= pref.getString(PREF_COLOR, null);
    if(color!=0)
    {
    yourlayoutid.setbackgroundColor(Color);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T11:13:59.717

仅将这件事视为建议，

您可以放置​​一个edittext，它采用用户想要的颜色的颜色代码，您可以使用TextWatcher，因为颜色具有十六进制值，并且每种颜色的固定长度为6个字母数字字符，如“FF0000”，只要长度过去到六颜色将适用。

```
searchBox.addTextChangedListener(new TextWatcher() {
        public void onTextChanged(CharSequence s, int start, int before, int count) {}
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {}
        public void afterTextChanged(Editable editable) 
        {

            if(editable.toString().length==6)
                 //set color of background
        }
    });
} 
```

# c# - 面板和滚动条 - 紧凑的框架

> ID：14256128
> 
> 赞同：2
> 
> 时间：2013-01-10T10:49:02.057
> 
> 标签：c#, windows-mobile, scrollbar, panel

我的表单中有一个面板，并且我有一个个人用户控件。我想在我的面板中添加这个 UserControl 的一些实例（一个在另一个之上 - Y 顺序）。我将这些控件的 Dock 属性设置为 Top。类似于以下代码

```
for(int i = 0; i < 10; i++)
{
   panel1.Controls.Add(new MyUserControl
   {
       Dock = DockStyle.Top,
   });
} 
```

问题是，即使控件的数量超过了可以显示的数量，垂直滚动条也不会出现。为什么？控件也以相反的顺序添加。

我该如何解决这些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:54:43.210

将面板的 AutoScroll 属性设置为 TRUE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-20T07:37:39.883

有同样的问题。`AutoScroll`财产没有帮助。添加`VScrollBar`到面板解决了它，但结果我得到了 2 个滚动条。所以最后的食谱：

*   将`AutoScroll`属性设置为 true；
*   添加`VScrollBar`到面板；
*   将`VscrollBar`宽度设置为“0”（有点虚拟 - 但它有效）

# symfony - 向 Symfony2 上的 login_check 发送额外的 GET 数据

> ID：14256130
> 
> 赞同：0
> 
> 时间：2013-01-10T10:49:03.230
> 
> 标签：symfony

我使用 symfony 文档中建议的普通用户身份验证系统：

```
 form_login:
        login_path: /login
        check_path: /login_check 
```

如您所知，您编写控制器`/login`，然后将表单数据发送到`/login_check`由框架处理的表单数据。有时我的用户会附带一种礼物代码，所以写`/login?code=12345678`，鉴于我编写了登录控制器，我可以解析这段代码，但是我将登录数据发送给`/login_check`我失去了对这段代码的控制，因为正如我所说的背后的脚本`/login_check`不是我写的。我需要发送代码，因为如果理想情况下登录完成，我会获取获取数据并存储它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:59:26.543

你的方法不好。阅读本文以了解其工作原理：http: [//blog.logicexception.com/2011/10/symfony2-securitybundle-and.html](http://blog.logicexception.com/2011/10/symfony2-securitybundle-and.html)

您需要创建自己的用户提供程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:09:59.550

我认为你必须创建一个新的 Bundle，扩展 SecurityBundle，然后你只需要覆盖 login_check 操作......官方文档在[这里](http://symfony.com/doc/2.0/cookbook/bundles/inheritance.html)礼物代码似乎有点沉重。

为什么不将礼品代码存储在会话中（如果存在）？无论如何，如果登录失败，用户将无法访问它可能使用的站点部分。为什么不等待它被用来使其无效呢？

# java - 字符串：数字：字符串的Java正则表达式？

> ID：14256131
> 
> 赞同：-1
> 
> 时间：2013-01-10T10:49:04.440
> 
> 标签：java, regex

嗨，我想知道用于解析的正则表达式

```
InputDispatcherTest.TimmyTest_ASSERT
customize/base/services/input/tests/InputDispatcher_test.cpp:153: Failure 
```

我正在使用`\\s[:]\\d[:]\\s`，但它不工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:51:49.870

什么样的号码？整数？浮点？你的输入是什么？

这对我来说不合适。我会为整数这样做：

```
^\\d+$ 
```

我建议在检查之前修剪字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:59:29.700

我认为这就足够了：

```
".+:\\d+:.+" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T10:52:24.350

\s 匹配一个空白字符，试试：

```
\\w+[:]\\d+[:]\\w+ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T11:02:08.787

"\S+[.]\S+:\d+:[]\S+"

我使用上面的正则表达式作为解决方案

# asp.net - ASP.NET 应用程序和 SQL Server Management Studio 都无法连接 SQL Server mdf 文件

> ID：14256133
> 
> 赞同：0
> 
> 时间：2013-01-10T10:49:05.743
> 
> 标签：asp.net, entity-framework, visual-studio-2012, connection-string, sql-server-2012-express

我有一个简单的 ASP.NET 网站应用程序。使用新的实体框架模型优先方法，我创建了一个数据库（`.mdf`文件）。但是，无论何时运行应用程序，SSMS 都无法连接到数据库（错误 5123 或 5120），反之亦然。

这是正常的吗？有没有办法解决这个问题？

我试图以管理员身份运行 SSMS，但这似乎没有帮助。

我正在使用 VS 2012 Professional 和 SQL Server 2012 Express。

这是应用程序的连接字符串。

```
<connectionStrings>
   <add name="MarketingContainer" 
        connectionString="metadata=res://*/App_Code.Marketing.csdl|res://*/App_Code.Marketing.ssdl|res://*/App_Code.Marketing.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=(LocalDB)\v11.0;attachdbfilename=C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQL2012ADV\MSSQL\DATA\MarketingDB.mdf;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" 
        providerName="System.Data.EntityClient"/>
  </connectionStrings> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:55:17.383

当您使用时，`AttachDbFileName`您将锁定文件并用作单用户模式，并且只有一个连接可以使用数据库。

要在 Visual Studio 和 SQL Server 之间使用数据库，您必须： 1\. 将数据库（不是文件）附加到 SQL Server 2\. 使用连接字符串指向 SQL Server

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:47:22.593

最大答案原则上是正确的。我现在已经实现了他的答案，使用这个连接字符串

添加名称="MarketingContainer" connectionString="metadata=res://*/App_Code.Marketing.csdl|res://*/App_Code.Marketing.ssdl|res://*/App_Code.Marketing.msl;provider=System .Data.SqlClient;provider 连接字符串="数据源=SQLSERVERNAME;初始目录=DATABASENAME;集成安全=True;MultipleActiveResultSets=True;App=EntityFramework"" providerName="System.Data.EntityClient"

我应该注意到，我的问题首先出现的原因就是这个。我使用 VS2012 创建实体数据模型（edmx 文件）。将模型放到我想要的位置后，我从模型生成数据库。此时，生成数据库向导出现。新连接。更改数据源。我选择 Microsoft SQL Server 数据库文件（因为那时我只有一个 mdf 文件）。如果你这样做，你最终会得到使用 LocalDB 的应用程序，并且 Attachdbfilename 会像 Max 所说的那样锁定文件。但是，我应该做的是首先使用 SSMS 附加到 mdf 文件，然后根据需要重命名数据库。然后在 VS2012 中，更改数据源，选择 Microsoft SQL Server。现在，VS2012 和 SSMS 都可以访问数据库了。

# php - 正则表达式 preg_match_all() 和 PHP 中的空格

> ID：14256135
> 
> 赞同：1
> 
> 时间：2013-01-10T10:49:08.903
> 
> 标签：php, regex, preg-match-all

我对 RegEx 和 WhiteSpaces 有疑问。

我想在标有 (....) 的数组中拆分文本

```
preg_match_all("/\([a-z0-9\s]+\)/i", $str,$a); 
```

为了抓住空格，我尝试使用 [\040] [\s] 但对我没有任何帮助！

有没有可能说 [ANY Character DIGIT and WHITESPACES and special character] ？

问候

通量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:51:56.020

你也可以说“任何字符，但不是一个`)`”

用你的例子：

`preg_match_all("/\([^\)]+\)/i", $str, $a);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:54:35.247

您可以使用[惰性搜索](http://en.wikipedia.org/wiki/Regular_expression#Lazy_quantification)using `.*?`（与贪婪相比，它将尽快停止匹配，`.*`它将尽可能匹配）。

正则表达式：`\((.*?)\)`

在代码中：

```
preg_match_all("#\((.*?)\)#", $str, $a); 
```

# c# - 控制器中的 Asp .Net 方法获取字符串列表

> ID：14256144
> 
> 赞同：1
> 
> 时间：2013-01-10T10:49:33.557
> 
> 标签：c#, asp.net-mvc

我需要将字符串列表发送到 asp net mvc 中控制器中的方法。我怎样才能做到这一点？

我希望我的控制器中的方法看起来像这样：

```
public ActionResult CutFile(string[] filenames, string target) 
```

或者，我可以将字符串数组参数更改为如下所示：

```
public ActionResult CutFile(IEnumerable<string> filenames, string target) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T10:52:08.497

您需要以这种格式发送数据：

```
<input type="text" name="filenames[0]" value="A"/>
<input type="text" name="filenames[1]" value="B"/>
<input type="text" name="filenames[2]" value="C"/>

<input type="text" name="target" /> 
```

# python - 如何使用 pdf2htmlEX 和 Python 将 PDF 转换为 HTML？

> ID：14256149
> 
> 赞同：4
> 
> 时间：2013-01-10T10:49:45.337
> 
> 标签：python, pdf

如何使用[pdf2htmlEX](https://github.com/coolwanglu/pdf2htmlEX)和 Python 将 PDF 转换为 HTML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:58:18.483

只需使用子流程模块

```
import subprocess
subprocess.call("pdf2htmlEX /path/to/foobar.pdf", shell=True) 
```

它调用可执行文件`pdf2htmlEX`。它必须在你的某个地方`$PATH`，或者你可以把绝对路径放在`call`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-20T13:34:36.067

如果你想单独给出文件的路径而不是在 .call 函数中给出它，你可以这样做：

```
 import subprocess
 >> path = "/home/temp/abc.pdf"
 >> subprocess.call(["pdf2htmlEX" ,path], shell=False) 
```

# actionscript-3 - 当两个向量的 Y 都为零时，Vector3D.angleBetween 返回 NaN

> ID：14256152
> 
> 赞同：1
> 
> 时间：2013-01-10T10:49:53.020
> 
> 标签：actionscript-3, vector

我正在努力使用内置函数找到两个向量之间的角度的一个奇怪的问题

```
var v1:Vector3D = new Vector3D(0, 0, 0);
var v2:Vector3D = new Vector3D(50, 0, 50);
//Vector3D(0, 0, 0) Vector3D(50, 0, 50)
var angle1:Number = Vector3D.angleBetween(v1,v2) * 180 / Math.PI;
var angle2:Number = Vector3D.angleBetween(v2,v1) * 180 / Math.PI;

trace(angle1,angle2); 
```

这将返回角度 1 和角度 2 的 NaN

但是，如果我将一个非零值（任何较小的数字，例如 0.00001）作为 y 属性传递给任何向量，那么我会得到数字/角度

出于这个原因，我正在克隆我的向量并在调用此方法之前向 y 添加一个小数字 (0.00001)。

我不确定我做错了什么还是那里的错误。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T10:58:27.987

Vector(0,0,0) 具有无穷大角度和 0 大小（来自定义）。这就是为什么两者之间没有角度。你可以加

```
if(angle1 == NaN) {
  //fix
} 
```

让它按照你想要的方式工作。

# maven-surefire-plugin - maven-surefire-plugin 和 ReportNG 无法更改测试报告的样式表

> ID：14256153
> 
> 赞同：3
> 
> 时间：2013-01-10T10:49:53.507
> 
> 标签：maven-surefire-plugin, system-properties, reportng

我喜欢使用 Maven 更改来自 ReportNG 的标准报告的样式（使用另一个 .css，而不是 reportng.css）。我的 pom.xlm 看起来像这样

...

```
<build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.12.4</version>
                  <configuration>
                    <properties>
                        <property>
                            <name>usedefaultlisteners</name>
                            <value>false</value>
                        </property>
                        <property>
                            <name>listener</name>
                            <value>org.uncommons.reportng.HTMLReporter,org.testng.reporters.EmailableReporter</value>                             </property>

                    </properties>
                    <systemProperties>
                        <property>
                            <name>org.uncommons.reportng.title</name>
                            <value>My own titel in Test Report</value>
                        </property>
                        <property>
                            <name>org.uncommons.reportng.stylesheet</name>
                            <value>${project.basedir}/src/report/resources/MyTestReport.css</value>
                        </property>
                    </systemProperties> 
```

...

我可以更改标题，但是当我尝试对 systemproperty org.uncommons.reportng.stylesheet 执行相同操作时，我只会得到默认报告。有人遇到过同样的问题，您是如何解决的？

最好的问候安妮卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:56:42.023

我以为我遇到了同样的问题，因为我希望看到我指定的 CSS 文件嵌入在所有页面上。

相反，看起来 ReportNG 从您指定的 css 中获取样式（上面示例中的 MyTestReport.css）并将其放入生成的 custom.css 文件中，该文件嵌入所有页面。

检查 **/surefire-reports/html/custom.css。你的样式应该在那里（假设你的 CSS 的路径是正确的）。

# php - 即使通过 SSH，Magento 也会内存不足

> ID：14256155
> 
> 赞同：1
> 
> 时间：2013-01-10T10:50:03.200
> 
> 标签：php, magento, ssh, export

我有一个相对较小的商店，大约 20k sku 所有简单的产品。我正在使用 magento 1.7.2，但所有旧版本都有同样的问题。我根本无法将我的产品导出到 CSV。直接从magento后端的数据流配置文件运行时内存不足，从shell运行时出现同样的错误。

```
Fatal error: Allowed memory size of 536870912 bytes exhausted (tried to allocate 71 bytes) in /home/public_html/app/code/core/Mage/Eav/Model/Entity/Attribute/Source/Table.php on line 62 
```

我已将 magentos htaccess 中的内存限制和执行时间增加到 512m，将 magentos php.ini 增加到 512m，并将我的 VPS php 配置 ini 增加到 512mb。它仍然会在大约 4 分钟内烧毁并耗尽内存。

我很困惑，我的整个数据库（压缩）只有 28mb！为了使 magento 导出所有产品功能正常工作，我缺少什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T11:00:40.657

Magento 数据流确实倾向于使用大量内存，这使得大型商店的导出变得困难。对于拥有大量产品目录的商店，编写脚本直接从数据库导出而不是通过数据流导出通常要快得多、更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:55:42.693

我通过一次导出 500、1000 或任意数量（使用自定义导出脚本）解决了这个问题。

我制作了一个作为参数 $start 和 $productsToExport 接收的文件。该文件取了产品的集合，然后使用

```
LIMIT ($start-1)*$productsToExport, $productsToExport 
```

此脚本仅返回导出的产品数量。

我制作了第二个主脚本，它对第一个文件执行递归 AJAX，参数 $start = 0，$productsToExport = 500。当 AJAX 完成后，它对 $start = 1 执行相同的操作，依此类推，直到没有产品。

这样做的好处是它不会使服务器过载（只有在前一个完成后才运行一个 ajax） - 如果发生错误，脚本会继续。memory_limit 和 max_execution_time 也是 sa

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T11:07:52.457

这可能是您的`.htaccess`文件没有覆盖`memory_limit`全局设置的问题`php.ini`。

其他选项设置`memory_limit`为无限制在您`index.php`进行测试。然后你会知道 .htaccess 中的更改是否没有生效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T12:27:14.407

如果 20k skus 是指 20.000，那么这是完全可能的。不幸的是，导出非常需要内存。在这种情况下，我总是将 memory_limit 增加到 2000M，然后创建文件需要一段时间，但最终成功。

# c - 如何向 gcc 提供有关循环计数的提示

> ID：14256156
> 
> 赞同：8
> 
> 时间：2013-01-10T10:50:08.157
> 
> 标签：c, optimization, gcc

知道循环将经历的迭代次数允许编译器进行一些优化。例如考虑下面的两个循环：

未知的迭代次数：

```
static void bitreverse(vbuf_desc * vbuf)
{
    unsigned int idx = 0;
    unsigned char * img = vbuf->usrptr;

    while(idx < vbuf->bytesused) {
        img[idx] = bitrev[img[idx]];
        idx++;
    }

} 
```

已知迭代次数

```
static void bitreverse(vbuf_desc * vbuf)
{
    unsigned int idx = 0;
    unsigned char * img = vbuf->usrptr;

    while(idx < 1280*400) {
        img[idx] = bitrev[img[idx]];
        idx++;
    }

} 
```

第二个版本将编译为更快的代码，因为它会被展开两次（在 ARM 上至少使用 gcc 4.6.3 和 -O2）。有没有办法对 gcc 在优化时考虑的循环计数进行断言？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T12:20:24.010

函数上有`hot`属性可以向编译器提示有关热点： http: [//gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)。只是在你的函数之前 abb：

```
static void bitreverse(vbuf_desc * vbuf) __attribute__ ((pure)); 
```

`hot`这里是来自 gcc的关于 ' ' 的文档：

> **hot**函数的hot属性用于通知编译器该函数是编译程序的热点。该功能进行了更积极的优化，并且在许多目标上它被放置在文本部分的特殊小节中，因此所有热门功能看起来都非常接近，从而提高了局部性。当配置文件反馈可用时，通过 -fprofile-use 会自动检测热功能并忽略此属性。
> 
> 函数的 hot 属性在 4.3 之前的 GCC 版本中没有实现。
> 
> 标签上的 hot 属性用于通知编译器标签后面的路径比没有注释的路径更有可能。此属性用于无法使用 __builtin_expect 的情况，例如使用计算的 goto 或 asm goto。
> 
> 标签上的 hot 属性在 4.8 之前的 GCC 版本中没有实现。

您也可以尝试在您的周围添加 __builtin_expect `idx < vbuf->bytesused`- 这将暗示在大多数情况下该表达式是正确的。

在这两种情况下，我都不确定您的循环是否会得到优化。

或者，您可以尝试配置文件引导的优化。`-fprofile-generate`使用;构建程序的配置文件生成版本 在目标上运行它，将配置文件数据复制到构建主机并使用`-fprofile-use`. 这将为编译器提供大量信息。

在某些编译器中（*不在 GCC 中*）有循环编译指示，包括 " `#pragma loop count (N)`" 和 " `#pragma unroll (M)`"，例如在[Intel](http://software.intel.com/en-us/articles/use-pragmas-with-the-intel-c-compiler-for-linux-on-64-bit-architecture)中；[在 IBM 展开](http://publib.boulder.ibm.com/infocenter/comphelp/v7v91/topic/com.ibm.vacpp7a.doc/compiler/ref/rnpgunrl.htm)；[在 MSVC 中向量化编译指示](http://msdn.microsoft.com/en-us/library/vstudio/hh923901.aspx)

ARM 编译器 ( `armcc`) 也有一些循环编译指示： unroll(n) （通过[1](http://wiki.open64.net/index.php/Pragmas_Support_in_Open64)）：

> 循环展开：http://infocenter.arm.com/help/index.jsp [?](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0348b/CJACACFE.html) topic=/com.arm.doc.dui0348b/CJACACFE.html和[http://infocenter.arm.com/help/index.jsp?主题=/com.arm.doc.dui0348b/CJAHJDAB.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0348b/CJAHJDAB.html)

和[__promise](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0205i/BABGJFHA.html)内在：

> 使用 __promise 改进向量化
> 
> __promise(expr) 内在函数是对编译器的一个承诺，即给定表达式是非零的。这使编译器能够通过优化掉基于您做出的承诺的冗余代码来改进向量化。示例 3.21 的反汇编输出显示了 __promise 的不同之处，通过删除标量修复循环将反汇编减少为简单的矢量化循环。
> 
> 例 3.21。使用 __promise(expr) 改进向量化代码

```
void f(int *x, int n)
{
    int i;
    __promise((n > 0) && ((n&7)==0));
    for (i=0; i<n;i++) x[i]++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T12:56:28.393

您实际上可以使用 __builtin_expect 指定确切的计数，如下所示：

```
while (idx < __builtin_expect(vbuf->bytesused, 1280*400)) { 
```

这告诉 gcc`vbuf->bytesused`在运行时预计为 1280*400。

唉，这对当前 gcc 版本的优化没有任何帮助。不过，还没有尝试过 4.8。

编辑：刚刚意识到每个标准 C 编译器都有一种通过断言精确指定循环计数的方法。由于断言

```
#include <assert.h>
...
assert(loop_count == 4096);
for (i = 0; i < loop_count; i++) ... 
```

如果条件不成立，将调用 exit() 或 abort()，任何具有值传播的编译器都会知道 loop_count 的确切值。我一直认为这将是提供此类优化提示的最优雅和符合标准的方式。现在，我想要一个实际使用这些信息的 C 编译器。

请注意，如果您想加快速度，按字节展开可能不如使用更宽的查找表有效。一个 16 位的表将占用 128K，因此通常适合 CPU 缓存。如果数据不是完全随机的，则更宽的表（3 个字节）可能有效。

2 字节示例：

```
unsigned short *bitrev2;
...
for (idx = 0; idx < vbuf->bytesused; idx += 2) {
    *(unsigned short *)(&img[idx]) = bitrev2[*(unsigned short *)(&img[idx]);
} 
```

这是编译器无法执行的优化，无论您提供什么信息。

# jquery - 条件选择隐藏父（）

> ID：14256160
> 
> 赞同：0
> 
> 时间：2013-01-10T10:50:18.453
> 
> 标签：jquery, selection, parent

我有这个条件选择，它工作正常。选择一个项目时，它会隐藏所有其他父 div，但包含所选项目的 div 除外。

但是，在实现此脚本时，每个项目都包含在另一个 div 中，其 class="grid_4" - 这个 div - 即使对于未选择的项目隐藏了内容 - 也会给我带来布局方面的问题。

所以，我想在选择一个项目时隐藏带有 class="grid_4" 的 div。我的脚本在[这里很麻烦](http://jsfiddle.net/N4FKg/6/)。（目前，jsfiddle.net 似乎不适用于 Chrome。）

我试图改变

```
$options.not("#" + $currentSelection).parent().hide(); 
```

至

```
$options.not("#" + $currentSelection).parent().parent().hide(); 
```

- 但这并没有改变任何东西。

任何人都可以帮我解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:26:34.687

您的 jsFiddle 似乎工作正常：如果您想要隐藏`grid_4`div（即将它们设置为`display: none`），那么您需要的正是您建议的：`.parent().parent().hide()`. [我在这个小提琴](http://jsfiddle.net/N4FKg/7/)中试过它并且它有效。当然，您也必须在第一个选择中进行相同的更改。

```
if (!($(this).hasClass($currentSelection))) {
    $(this).parent().parent().hide();
}
...
$options.not("#" + $currentSelection).parent().parent().hide(); 
```

# java - Java - 如何在两个或多个 Web 应用程序之间共享会话？

> ID：14256164
> 
> 赞同：10
> 
> 时间：2013-01-10T10:50:28.033
> 
> 标签：java, spring, session, web-applications

我有两个网络应用程序。我将登录到一个 Web 应用程序，然后通过第一个应用程序的链接或重定向导航到另一个应用程序。最后，在完成应用程序二中的一些步骤后，我将被重定向到应用程序一。我该如何实施？

这里应用程序二是通用的，我将拥有三个应用程序一的实例，它们将与应用程序二进行交互。

请提出更好的方法。我必须使用 spring 和 Spring Webflow 来实现它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-10T14:59:36.633

从技术上讲，两个 Web 应用程序（两个不同的 WAR）之间的会话**不能**共享。这是出于**安全原因**而设计和完成的。我想对您的问题提出以下意见和建议，

1.  会话通常使用**会话 ID**进行跟踪，会话 ID通常存储为浏览器上的 cookie 和服务器端的会话对象。
2.  **每次**您发送请求时，此 cookie 都会发送到服务器端。
3.  cookie 将仅发送**到**它来自的服务器。
4.  因此，由 www.mysite.com/app1 设置的 cookie 将仅发送到 www.mysite.com/app1 而不会发送到 www.mysite.com/app2。
5.  对于您的情况，要使用户会话在两个应用程序中有效，浏览器将需要从 app1 和 app2 设置两个 cookie。
6.  一种方法是，当您使用 java 脚本登录 app1 时，也会向 app2 发送登录请求。当这两个请求都成功返回时，您的浏览器将拥有两个应用程序（app1 和 app2）的会话
7.  现在注销会有自己的挑战，当你从app1注销时，你也需要从app2注销。从技术上讲，这意味着您需要从这两个应用程序中清除 cookie 集。在 java 脚本的帮助下，您可以做到这一点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-10T10:53:23.987

当您必须从 app1 调用 app2 时，通过请求对象（作为请求参数）传递所有必要的信息，然后 app2 可以在那里读取并创建会话（也许可以使用 servlet/过滤器）。

您可以使用集群在跨机器的同一应用程序（app1 和 app1）之间共享会话。

# android - 如何在便携式 android 模拟器中安装 .apk？

> ID：14256166
> 
> 赞同：0
> 
> 时间：2013-01-10T10:50:39.920
> 
> 标签：android, android-emulator, apk

我按照本教程的说明[如何在 Android 模拟器中安装 APK 文件？](https://stackoverflow.com/questions/3480201/how-do-you-install-an-apk-file-in-the-android-emulator)但它不安装apk。相反，它给了我这条消息“adb 未被识别为内部或外部命令”

我认为这里的问题是我使用了一个可移植的 adt 插件和一个可移植的 eclipse。无论如何要在我的便携式模拟器中安装下载的apk文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:57:29.470

从您的 android sdk 目录转到您的平台工具文件夹，然后在**cmd** promt中尝试

```
adb -e install c:/Projectapk_folder/yourapk.apk 
```

**注意**：模拟器处于运行模式。

**编辑：**输入 adb 命令并检查

```
C:\android-sdk-windows\platform-tools>adb devices
List of devices attached
0A3AAD40xxxx2F        device 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:45:09.593

我终于找到了答案。耶！:)[看到这个](http://www.botskool.com/geeks/how-install-apk-files-android-windows-sdk-emulator)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T11:50:41.610

试试这个解决方案....

单击模拟器设置单击应用程序首先卸载您的应用程序并再次安装

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-03T10:11:09.433

有史以来最简单的方法 1-首先从 AVD 管理器播放模拟器 2-只需将 .apk 文件拖放到我在 mac 上尝试过的模拟器屏幕上，效果很好

# android - 如何更改 SherlockActionBar 库的动作模式图标？

> ID：14256167
> 
> 赞同：9
> 
> 时间：2013-01-10T10:50:47.080
> 
> 标签：android, actionbarsherlock

我在我的应用程序中使用了 SherlockActionBar 库，现在我想更改 ActionMode 的图标。下面是屏幕显示，我在其中突出显示了我想设置自己的图标的 ActionMode。

![在此处输入图像描述](../Images/d93c1b26aa111b80675ff1e8ef93a14a.png)

请帮我更改动作模式中的图标。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-10T11:16:14.533

你像这样在样式资源中设置它

/res/values-v11/styles.xml

```
<style name="Theme.YourTheme" parent="Theme.Sherlock">
    <item name="android:actionModeCloseDrawable">@android:drawable/your_drawable</item>
</style> 
```

/res/values/styles.xml   

```
<style name="Theme.YourTheme" parent="Theme.Sherlock">
    <item name="actionModeCloseDrawable">@android:drawable/your_drawable</item>
</style> 
```

注意API < 11 样式的*actionModeCloseDrawable*之前缺少的*android命名空间*

 *显然，如果您不使用 actionbarsherlock，主题会有所不同

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-10T11:07:31.773

您可以通过将其放在可绘制文件夹中来使用任何图标

```
getSupportActionBar().setIcon(R.drawable.nursing); 
```

如果它是菜单图标，那么试试这个 //done_hdpi 是我把它放在可绘制文件夹中的完成图标

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    menu.add("Done").setIcon(R.drawable.done_hdpi).setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);        
    return true;
} 
```*

# c# - 使用 IObservable.GetAwaiter 处理错误

> ID：14256169
> 
> 赞同：0
> 
> 时间：2013-01-10T10:50:49.933
> 
> 标签：c#, .net

```
async Task<packet> getMyPacket()
 {   
    IObservable<packet> packets = ...;
        await packets
                 .Where(x => x.frameType == CMD_ID_0 )
                 .FirstAsync()
                 .GetAwaiter()
                 ;

  } 
```

上面的代码片段工作正常。

但是，如何使用 GetAwaiter 完成错误处理？

例如，如果它应该返回标准错误数据包，则超时。

```
await packets
         .Where(x => x.frameType == CMD_ID_0 )
         .FirstAsync()
         .TimeOut( TimeSpan.FromSeconds(5))
         .GetAwaiter (   , ,OnError: return newErrorPacket(TIMEOUT) ) 
         ; 
```

我曾尝试查看可用的文档，但未能走得更远。我不熟悉将 async/Tasks 与 IObservable 相结合，所以我有一个概念错误，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T12:19:56.727

处理异常的一种可能方法是使用该`ContinueWith`方法，如下面的代码示例所示（我使用了一些虚拟类和枚举来使代码正常工作，您可以将它们替换为您自己现有的类和枚举）。

```
using System;
using System.Collections.Generic;
using System.Collections;

using System.Reactive.Threading;
using System.Reactive.Linq;
using System.Threading.Tasks;

class Program
{
    public static void Main()
    {
        var packets = getMyPacket().ContinueWith((a) =>
        {
            Packet packet = null;
            if (a.Exception != null && a.Exception.InnerException.GetType() == typeof(TimeoutException))
            {
                packet = new ErrorPacket(Error.TIMEOUT);
            }
            else
            {
                packet = a.Result;
            }
            return packet;
        });

        Console.ReadLine();
        Console.WriteLine(packets.Result.GetType());
    }

    static async Task<Packet> getMyPacket()
    {
        var list = new List<Packet>();
        list.Add(new Packet(FrameType.CMD_ID_0));

        IObservable<Packet> packets = list.ToObservable();
        var aw = await packets
                 .Where(x => x.FrameType == FrameType.CMD_ID_0)
                 .FirstAsync()
                 //.Timeout(TimeSpan.FromSeconds(0))
                 .GetAwaiter();

        return aw;

    }
    class Packet
    {
        public FrameType FrameType { get; set; }
        public Packet() 
        {
        }
        public Packet(FrameType frameType)
        {
            FrameType = frameType;
        }
    }
    class ErrorPacket : Packet
    {
        public ErrorPacket(Error error)
        {
        }
    }

    enum FrameType
    {
        CMD_ID_0,
        CMD_ID_1
    }

    enum Error
    {
        TIMEOUT
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:53:04.070

IObservable 有一个 'Catch' 扩展方法来完成这项工作。

```
await packets
         .Where(x => x.frameType == CMD_ID_0 )       
         .TimeOut( TimeSpan.FromSeconds(5))
         .Catch( Observable.Empty<packet>())
         .LastOrDefaultAsync(); 
```

以上等待适当的响应数据包或超时。await 使用 GetAwaiter 在空序列上引发异常，因此 LastOrDefaultAsync() 有助于避免这种情况。或者，在 try-catch 之间封闭也可以。

# python - 在 admin.py 中将一个模型的数据显示到另一个模型中

> ID：14256170
> 
> 赞同：1
> 
> 时间：2013-01-10T10:50:51.857
> 
> 标签：python, django, django-models, django-admin

我有一个模型 shipping_track 与订单模型具有一对一的关系。我可以在管理员中显示 shipping_track 模型，但它只显示他的字段我想向管理员显示订单模型的订单价格、状态、地址和其他字段shipping_track（不可编辑）。

以便管理员在更新运输模型时获得更多信息。

他们有什么方法可以让我在admin.py中做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:03:47.730

可能您可以为您提出的问题提供更多详细信息。据我解释。

您可以通过以下方式进行操作 -

如果您正在编写一个基本的模块化代码，那么您可以将详细信息从订单模型发送到一个元组中的发货模型。

这将有一个安全漏洞，在这种情况下，您可以使用上面答案中描述的 oop 模型。

```
shipment
    track

track
    track

shipment.track

track.shipment

shipment.track.track_details

track.shipment.shipment_details 
```

# java - 使用 ArrayList 存储字符串

> ID：14256172
> 
> 赞同：1
> 
> 时间：2013-01-10T10:50:53.410
> 
> 标签：java, database, generics, arraylist, containers

我必须为任务表创建一个媒体库，其中存储人民信息（普通人、艺术家、乐队）和媒体（音频 [音频长度 - 类型字符串] 视频 [大小 - 类型字符串]）

我开始创建一个 MediaContainer 类，它（通过 ArrayList）允许我存储字符串类型的信息。所以我想我会简单地创建两个类（应该保存数据的 MediaContainer 和具有填充数据的所有方法的 Information Class - 我是一个初学者，所以额外的问题：我做得对吗？）

**我真正需要的帮助是来自更有经验的用户以反馈形式提供的保证或建议（所以我知道我正朝着正确的方向前进）。** 这就是我的距离-

```
import java.util.ArrayList;

public class MediaContainer {

    ArrayList<String> Media = new ArrayList<String>();

    public MediaContainer(String addmedia) {
        Media.add(addmedia);
        System.out.println("this is the list :"+Media);
    }
} 
```

我应该如何进行？提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:59:40.280

我会写一个简单的单元测试来展示你可以添加你需要的信息并检索它。

我也会尝试；

*   遵循 Java 编码约定，例如 camelCase 变量。
*   `final`在可能的情况下制作字段`private`。
*   尽可能使用接口而不是具体类型的集合，例如`List`
*   我假设您将需要一个自定义类`Media`来记录与媒体相关的信息。即一个字符串是不够的。

# ios - iOS强制子视图具有灵活的高度

> ID：14256177
> 
> 赞同：0
> 
> 时间：2013-01-10T10:51:02.490
> 
> 标签：ios, layout, autoresize

我有一个滚动视图，我希望能够根据设备进行压缩或扩展。现在我可以让页面在 iPhone 和 3.5" Retina 或 4" Retina 中看起来不错，但不是全部三个。我尝试过使用 Content Hugging Priority 和 Content Compression Resistance Priority 以及处理所有相关的约束。到目前为止，似乎没有什么对布局有影响。iOS 会忽略所有这些设置吗？试图弄清楚这一点让我发疯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:27:54.513

您需要确保从视图的一侧到另一侧有“弹簧”或“支柱”。例如，针对工具栏，Xcode 没有指示默认间距（10 磅），您必须“对接”，然后微调到默认间距。需要考虑所有间距，如果您保留一个具有灵活高度的项目（例如高度是最低优先级），例如滚动视图，那么该项目将根据需要展开或压缩。与元素交互时的调试输出有时会生成违反间距约束的警告，这些可能会有所帮助。CHP 和 CCRP 在 iOS 中似乎没有太大影响。

# java - 如何获取有关电话号码和位置的数据

> ID：14256181
> 
> 赞同：0
> 
> 时间：2013-01-10T10:51:13.627
> 
> 标签：java, android, location, phone-number

我开发了一个应用程序，可以显示任何电话号码的位置和服务提供商。

点赞`9718202569` 数德里电信圈

我为所有印度电话号码做到了这一点。

现在我想为美国、英国和其他国家的电话号码做这件事。

但我没有在互联网上获得与此相关的数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T10:56:55.723

看到这个：

```
 telephonyManager =  (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
    locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
    lineOne = telephonyManager.getLine1Number();
    Log.d(TAG, "line 1 " + lineOne);

    deviceId = telephonyManager.getDeviceId(); 
    Log.d(TAG, "getDeviceId() " + deviceId);

    networkOperator =  telephonyManager.getNetworkOperatorName();
    Log.d(TAG, "getNetworkOperatorName() " + networkOperator);

    networkType = telephonyManager.getNetworkType();
    Log.d(TAG, "getNetworkType () " + networkType);

    phoneType = telephonyManager.getPhoneType();
    Log.d(TAG, "getPhoneType () " + phoneType);

    simSerialNumber = telephonyManager.getSimSerialNumber();
    Log.d(TAG, "getSimSerialNumber () " + simSerialNumber );

    subscriberId = telephonyManager.getSubscriberId();
    Log.d(TAG, "getSubscriberId () " + subscriberId);

    // Register the listener with the Location Manager to receive location updates
    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, timeBetweenFixes, distanceBetweenFixes, locationListener);
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, timeBetweenFixes, distanceBetweenFixes, locationListener);
    IntentFilter filter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
    context.registerReceiver(batteryReceiver, filter); 
```

# mod-rewrite - 如何从 mod_rewrited url 查询字符串中获取

> ID：14256182
> 
> 赞同：1
> 
> 时间：2013-01-10T10:51:13.587
> 
> 标签：mod-rewrite, get, query-string

我有一个小的 mod_rewrite 问题。

1.  我有 index.php （在根目录中），其中包含简单的 href 链接：

    ```
    <a href="novice/this-is-something">Novice</a> 
    ```

当我单击 Novice 时，将我重定向到 novice.php 文件（它是 mod_rewrited，在 URL 中看起来不像**novice.php?query=this-is-something**，但看起来像**novice/this-is-something**（这个-is-something 是我的查询））问题是，当我试图在 novice.php 文件中获取“this-is-something”查询时。

我在 novice.php 文件中得到这个查询，如下所示：

```
 if (isset($_GET['query'])){
$query=$_GET['query'];

echo $query;
    }else{
echo 'Null parameters.';    
    } 
```

**但它只输出 0**

但是当我在 href 链接中**传递数字时，就像这样：**

```
 <a href="novice/2131">Novice</a> 
```

novice.php 文件中的输出正确：2131

我的 .htaccess 中有这样的代码：

```
 RewriteRule ^novice/([^/\.]+)/?$ novice.php?query=$1 [L] 
```

那么我在 mod_rewrite 中做错了什么，我可以通过 $_GET 方法获取数字，但我无法通过 $_GET 获取字符串或字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:45:00.880

**我自己找到了解决方案。**

我刚刚在 RewriteRule ^novice/([^/.]+)/?$ novice.php? **查询**=$1 [L]

到

“blabla”字-> RewriteRule ^novice/([^/.]+)/?$ novice.php? **blabla** =$1 [L]

然后一切正常......非常奇怪......

```
 if (isset($_GET['blabla'])){
    $blabla=$_GET['blabla'];

   echo $blabla;
}else{
 echo 'Null parameters.';    
} 
```

它现在回显参数**this-is-something** .. 但仍然不知道是什么问题.. 我刚刚更改了包含参数“ **this-is-something ”的变量“** **query** ”的名称..

 **顺便说一句，如果有人感兴趣：我的 .htaccess 看起来像这样：

```
 Options +FollowSymLinks
    RewriteEngine On

    # Unless directory, remove trailing slash
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^([^/]+)/$ http://localhost/local_ageo.si/$1 [R=301,L]

    # Redirect external .php requests to extensionless url
    RewriteCond %{THE_REQUEST} ^(.+)\.php([#?][^\ ]*)?\ HTTP/
    RewriteRule ^(.+)\.php$ http://localhost/local_ageo.si/$1 [R=301,L]

    # Resolve .php file for extensionless php urls
    RewriteRule ^([^/.]+)$ $1.php [L]

    RewriteRule ^novice/([^/\.]+)/?$ novice.php?blabla=$1 [L] 
```**

# php - url重写之谜

> ID：14256185
> 
> 赞同：1
> 
> 时间：2013-01-10T10:51:16.440
> 
> 标签：php, apache, url-rewriting, wamp

我已将项目从服务器复制到本地计算机。

该站点似乎正在使用**url rewriting**，因此我已`rewriting_module`在 WAMP/Apache 中打开。

但是，项目中**没有`.htaccess`文件**。无法弄清楚如何实现 url 重写，所以我无法让它在我的本地机器上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:04:08.533

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:04:33.700

.htaccess 文件是隐藏文件，让您的文件夹视图选项显示隐藏文件。

或者

项目是否在任何框架中完成，即 codeigniter、zend 或 cake 等，在这种情况下，它将在 codeigniter 中拥有自己的 url 结构 url 将如下所示： [http ://domain.com/controller/function](http://domain.com/controller/function)

# c# - 在 DDD 中哪里调用 repository.update？

> ID：14256186
> 
> 赞同：13
> 
> 时间：2013-01-10T10:51:18.613
> 
> 标签：c#, domain-driven-design, ddd-repositories

我有一个真实的场景，它是一个完美的领域模型设计。它是一个具有多个象限的字段，每个象限具有不同的状态。所以我的聚合根是字段。现在我有一个重要的问题：我想要一个持久的无知域模型，我认为这是有道理的。那么我应该在哪里调用存储库方法的更新？不在域模型中，对吧？那么当没有该对象的更改跟踪代理并且不应在实体中调用存储库时，聚合根子实体应如何在数据库中更新？还是我误解了域模型模式？

我的问题清楚了吗？:) 提前谢谢你最好的劳林

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-10T17:36:37.403

> 那么我应该在哪里调用存储库方法的更新呢？

在典型的 DDD 架构中，存储库通常由**应用程序服务**调用。应用程序服务是一个类，它充当封装您的域并通过编排域对象、存储库和其他服务来实现域用例的[外观。](http://en.wikipedia.org/wiki/Facade_pattern)

我不熟悉您的域，但假设有一个用例将 a`State`从一个`Quadrant`转换`Field`为另一个。正如你所说，这`Field`是AR。所以你有一个`FieldApplicationService`引用 a `FieldRepository`：

```
public class FieldApplicationService
{
    readonly FieldRepository fieldRepository;    

    public void ShiftFieldState(int fieldId, string quadrant, string state)
    {
          // retrieve the Field AR
          var field = this.fieldRepository.Get(fieldId);
          if (field == null)
              throw new Exception();

          // invoke behavior on the Field AR.
          field.ShiftState(quadrant, state);

          // commit changes.
          this.fieldRepository.Update(field);
    }
} 
```

应用程序服务本身非常单薄。它不实现任何领域逻辑；它只编排和设置执行域逻辑的阶段，包括访问存储库。所有依赖于您的域的代码，例如表示层或服务，都将通过此应用程序服务调用域功能。

存储库可以以多种方式实现。它可以与诸如 NHibernate 之类的 ORM 一起使用，在这种情况下，更改跟踪是内置的，通常的方法是提交所有更改而不是调用显式更新。NHibernate 还提供了一个[工作单元，](http://martinfowler.com/eaaCatalog/unitOfWork.html)允许对多个实体的更改可以作为一个提交。

正如您所说，在您的情况下，没有更改跟踪，因此需要显式调用更新，并且由存储库实现来处理此问题。如果使用 SQL Server 作为数据库，`Update`存储库上的方法可以简单地将 a 的所有属性发送`Field`到存储过程，该存储过程将根据需要更新表。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-10T13:26:08.090

聚合根 (AR) 在此处更新。使用消息驱动的体系结构，某处是命令处理程序，但我们假设一般用途是服务。该服务从存储库中获取 AR，调用相关方法，然后将 AR 保存回存储库。

AR 不知道存储库，这不是它关心的问题。然后，存储库将所有 AR 修改保存为一个工作单元（即全有或全无）。Repo 如何做到这一点，这取决于你如何决定你的持久性策略。

如果您使用事件溯源，那么 AR 会生成事件，并且 Repo 将使用这些事件来保持 AR 状态。如果您采用更常见的方法，那么 AR 应该在某处作为属性公开的状态数据。它被称为纪念品模式。存储库在一次提交中保留该数据。

但有一件事是肯定的：在处理域对象时，永远不要考虑持久性细节。那就是不要将域耦合到 ORM 或某些数据库特定的东西。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-10T16:57:10.463

“应用程序代码”应该调用存储库。如何托管应用程序代码是一个基础架构问题。应用程序代码如何托管的一些示例包括 WCF 服务、作为 Winforms/WPF 应用程序或在 Web 服务器上。

存储库实现负责跟踪聚合根及其子实体的更改，并将它们保存回数据库。

这是一个例子：

**领域项目**

```
public DomainObject : AggregateRootBase //Implements IAggregateRoot
{
    public void DoSomething() { }
}

public IDomainObjectRepository : IRepository<DomainObject>, IEnumerable
{
    DomainObject this[object id] { get; set; }
    void Add(DomainObject do);
    void Remove(DomainObject do);
    int IndexOf(DomainObject do);
    object IDof(DomainObject do);
    IEnumerator<DomainObject> GetEnumerator();
} 
```

**实施项目**

```
public SqlDomainObjectRepository : List<DomainObjectDataModel>, IDomainObjectRepository
{
    //TODO: Implement all of the members for IDomainObjectRepository
} 
```

**申请项目**

```
public class MyApp
{
    IDomainObjectRepository repository = //TODO: Initialize a concrete SqlDomainObjectRepository that loads what we need.
    DomainObject do = repository[0]; //Get the one (or set) that we're working with.
    do.DoSomething(); //Call some business logic that changes the state of the aggregate root.
    repository[repository.IDof(do)] = do; //Save the domain object with all changes back to the db.
} 
```

如果您需要对多个聚合根的更改进行事务化处理，以便在全有或全无的基础上进行更改，那么您应该研究工作单元模式。

希望这有助于澄清事情！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-10T12:54:23.090

我的解决方案是聚合根会向外部的事件处理程序引发一些事件。这些事件处理程序将调用存储库来更新数据库。您还需要一个 ServiceBus 来注册和分派事件。看我的例子：

```
public class Field: AggregateRoot
{
    public UpdateField()
    {
         // do some business
         // and trigger FieldUpdatedEvent with necessary parameters
         ....
         // you can update some quadrants
         // and trigger QuadrantsUpdatedEvent with necessary parameters
    }
}

public class FieldEventHandlers: EventHandler 
{
    void Handle (FieldUpdatedEvent e)
    {
         repository.Update(e.Field);
    }
}

public class QuadrantEventHandlers: EventHandler 
{
    void Handle (QuadrantsUpdatedEvent e)
    {
         repository.Update(e.Quadrant);
    }
} 
```

# php - mysql/php 搜索标签引擎

> ID：14256189
> 
> 赞同：0
> 
> 时间：2013-01-10T10:51:22.737
> 
> 标签：php, mysql, search

我有两辆摩托车的数据库：

*   雅马哈 R1 白色 2000 和
*   雅马哈 R125 白色 2005

当我发送查询时：

```
SELECT * FROM bikes WHERE title LIKE '%$search%' 
```

然后，当我搜索“yamaha R125”时，一切正常，但当您搜索“yamaha R1”时，您将得到两个结果 yamaha R1 和 yamaha R125。

任何人都可以根据需要指定标题，因此标题可以是“yamaha R1 white 2005”，也可以是“excellent condition yamaha R1”。

知道如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:12:27.547

只要你使用 LIKE，MySQL 就无法理解。只有两个解决方案：-

```
1\. Either segregate model and color from that single field and keep it in separate field 

2\. SELECT * FROM bikes where title like 'yamaha R1%' AND title like '%2000'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:54:07.460

如果这些没有帮助

[仅将整个单词与 LIKE 匹配？](https://stackoverflow.com/questions/6283767/match-only-entire-words-with-like)

[mysql SELECT LIKE 必须仅将整个单词与变量匹配](https://stackoverflow.com/questions/1568068/mysql-select-like-must-match-whole-words-only-to-the-variable)

那么我不确定是否可以在基本的 Mysql 中不更改架构、用户输入等。

如果您在专用服务器上，或者有一个非常好的网络主机，我碰巧知道 Sphinx 搜索引擎[http://sphinxsearch.com/](http://sphinxsearch.com/)可以按照您需要的方式工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T10:53:58.743

为什么要使用 like 子句，请使用 title=$search

```
SELECT * FROM bikes WHERE title='$search' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T10:54:24.150

尝试这个`SELECT * FROM bikes WHERE title = '$search'`

如果您只想要 1 个结果

Like 子句用于通配符搜索。如果使用 % 符号，则搜索通配符

检查以下链接以了解有关 [字符串比较的更多信息](http://dev.mysql.com/doc/refman/5.0/en//string-comparison-functions.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T10:58:42.213

这里的问题是 $search 值：

```
SELECT * FROM bikes WHERE title LIKE '%$search%' 
```

有了这个，您正在尝试搜索等于 'ANYTHING+$search+ANYTHING' 的标题

因为您正在搜索`%yamaha R1%`结果是：

```
yamaha R1 white 2000, yamaha R125 white 2005 
```

这里的问题是：如果你使用`'%search'`它不会工作，因为你最后有'白色2000'，你为什么不在表格的另一个字段中设置颜色和数字，然后像这样搜索它：

```
SELECT * FROM bikes WHERE title LIKE '$search' 
```

这应该返回 yamaha R1 的所有信息，其中一个是颜色“白色”，另一个是数字“2000”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-10T15:54:09.700

这就是你想要的：

```
SELECT * FROM bikes WHERE  title REGEXP '[[:<:]]$search[[:>:]]' = 1; 
```

# bash - Linux通过命令行控制一个正在运行的vlc进程

> ID：14256193
> 
> 赞同：9
> 
> 时间：2013-01-10T10:51:27.360
> 
> 标签：bash, ubuntu, vlc

有什么方法可以控制 ubuntu 上已经运行的 VLC 播放器。例如，我正在尝试使用默认音频启动 vlc 视频全屏。

然后通过netcat或其他一些命令远程控制音量和其他功能。可能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-04-01T11:44:57.900

[exic 答案](https://stackoverflow.com/a/27249039)[`player control`](https://gist.github.com/exic/1d051e3a15f61e06caf4)中的脚本只是某些命令的包装器。要在没有脚本的情况下使用它们，请尝试以下操作：`dbus`

```
dbus-send --type=method_call --dest=org.mpris.MediaPlayer2.vlc /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.PlayPause 
```

最后一个`PlayPause`可以替换为，例如, `Play`, `Pause`, 。`Previous``Next`

如果您已`qdbus`安装，它可以用作以下的替代`dbus-send`：

```
qdbus org.mpris.MediaPlayer2.vlc /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.PlayPause 
```

省略最后一个参数可以获得所有可用调用的列表：

```
qdbus org.mpris.MediaPlayer2.vlc /org/mpris/MediaPlayer2 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-10T10:54:21.073

你看过rc（遥控）界面吗？它通过 Unix Domain Socket 控制 VLC 进程。有关更多信息，请参见[此处](http://getluky.net/2006/04/19/vlcs-awesome-rc-interface/)和[此处](http://n0tablog.wordpress.com/2009/02/09/controlling-vlc-via-rc-remote-control-interface-using-a-unix-domain-socket-and-no-programming/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-09T02:00:55.920

如果您在 VLC 上启用 HTTP 远程接口，您可以使用 Web 浏览器甚至手机上的应用程序远程控制 VLC。

启用 HTTP 接口后，您还可以使用 wget 或 curl 命令发送命令。

例如，启用 VLC 的 HTTP 接口（默认端口：8080），使用“password”作为密码。然后您可以远程或本地发出 curl 命令：

### 卷曲前缀

为简洁起见，我将在此处显示 curl 命令的第一部分（IP 很可能是您的 localhost，但`8080`端口是默认值：

```
 curl -s -o /dev/null -u :password http://192.168.1.11:8080 
```

然后结合动作：

暂停：

```
.../requests/status.xml?command=pl_pause 
```

玩：

```
.../requests/status.xml?command=pl_play 
```

要播放特定的播放列表条目编号：

```
.../requests/status.xml?command=pl_play&id=22 
```

要更改音量：

```
.../requests/status.xml?command=volume&val=133 
```

其他命令信息：[https ://wiki.videolan.org/VLC_HTTP_requests/](https://wiki.videolan.org/VLC_HTTP_requests/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-02T12:05:04.590

我正在使用 dbus 远程控制它。VLC 已经实现了 MPRIS2 规范：

*   [控制播放器](https://gist.github.com/exic/1d051e3a15f61e06caf4)（例如 run `player-control vlc toggle`）

*   [获取当前状态](https://gist.github.com/exic/2e88d1410432af0d43bd)（带参数`vlc`）

# android - 我应该为这个显示指标使用什么分辨率的 Drawable？

> ID：14256199
> 
> 赞同：1
> 
> 时间：2013-01-10T10:51:48.777
> 
> 标签：android, android-layout

我想让我的应用程序支持多屏幕。所以为了实现这一点，我阅读了 Android 开发人员指南[https://developer.android.com/guide/practices/screens_support.html](https://developer.android.com/guide/practices/screens_support.html)，我创建了不同的可绘制和布局文件夹来放置不同大小的图像。

我在不同的设备上测试了该应用程序，在这些设备上看起来不错，而我发现在 7" 平板电脑中的一个中，图像太小了。为了确认这一点，我创建了简单的项目并将相同名称的图像放在不同的文件夹中，发现这个设备使用`ldpi`drawables，通常是`ldpi`drawable的大小`36x36`，这会导致问题，如果我增加这个drawable大小，那么它将与其他低密度设备不兼容。

这是我遇到问题的设备的显示[指标。](http://developer.android.com/reference/android/util/DisplayMetrics.html)

```
{density=0.75, width=800, height=444, scaledDensity=0.75, xdpi=160.0, ydpi=160.42105} 
```

如何处理这个问题？如果有人在此之前有这个问题，请给我一些建议。任何想法和帮助将不胜感激。

感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:56:02.687

您可以对此进行更多控制：

*   [为不同的屏幕分辨率和密度指定多个不同的图像。](http://developer.android.com/guide/topics/resources/providing-resources.html)为此，请阅读[支持多个屏幕](http://developer.android.com/training/basics/supporting-devices/screens.html)。如果您需要更精确的图像缩放和质量，您可以使用屏幕属性的基本尺寸，即`sw<N>dp`- 您可以指定应使用图像的屏幕的最小宽度。这是资源文件夹的限定名称。

您可能会在此处将一些值用于常见的屏幕尺寸：

*   320，适用于具有屏幕配置的设备，例如：
    1.  240x320 ldpi（QVGA 手持设备）
    2.  320x480 mdpi（手机）
    3.  480x800 hdpi（高密度手机）
*   480，适用于 480x800 mdpi（平板电脑/手机）等屏幕。
*   600，适用于 600x1024 mdpi（7" 平板电脑）等屏幕。
*   720，适用于 720x1280 mdpi（10 英寸平板电脑）等屏幕。

**只需指定您的设备宽度并将您编辑的最适合`sw<N>dp`您的情况的图像放在相应的文件夹中`sw<444>dp`。**

您还应该查看使 Android 在运行时选择图像的其他[限定符（屏幕密度、可用宽度、可用高度、屏幕尺寸或屏幕纵横比）。](http://developer.android.com/guide/topics/resources/providing-resources.html)通过结合这些限定符并仔细测试，您将确保用户在每台设备上都能获得最佳体验。

**很快，将您的图像放在 drawable-sw<444>dp 文件夹下。（444 小屏幕公制）**

# ios - 如何编译 libgit2 并创建 xcode 使用的静态库

> ID：14256200
> 
> 赞同：1
> 
> 时间：2013-01-10T10:51:53.373
> 
> 标签：ios, xcode, ios5, libgit2

如何编译 libgit2 并创建 xcode 使用的静态库。我不知道如何使用 LLVM 编译 libgit2 以获取静态 '.a' 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:47:12.117

Objective-C 绑定的自述文件有关于如何在 iOS 应用程序中使用 libgit2 的说明。

[https://github.com/libgit2/objective-git#inclusion-in-ios-projects](https://github.com/libgit2/objective-git#inclusion-in-ios-projects)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T12:59:15.187

我已经通过[这个工具](https://github.com/Eonil/libgit2-make-ios)解决了这个问题。非常有帮助。

# c++ - 处理 CRTP 设计的受保护/私有构造函数/析构函数？

> ID：14256208
> 
> 赞同：3
> 
> 时间：2013-01-10T10:52:35.563
> 
> 标签：c++, constructor, destructor, crtp

考虑以下代码：

```
#include <iostream>
#include <type_traits>

// Abstract base class
template<class Crtp>
class Base
{
    // Lifecycle
    public: // MARKER 1
        Base(const int x) :  _x(x) {}
    protected: // MARKER 2
        ~Base() {}

    // Functions
    public:
        int get() {return _x;}
        Crtp& set(const int x) {_x = x; return static_cast<Crtp&>(*this);}

    // Data members
    protected:
        int _x;
};

// Derived class
class Derived
: public Base<Derived>
{
    // Lifecycle
    public:
        Derived(const int x) : Base<Derived>(x) {}
        ~Derived() {}
};

// Main
int main()
{
    Derived d(5);
    std::cout<<d.set(42).get()<<std::endl;
    return 0;
} 
```

`Derived`如果我想要from的公共继承`Base`，并且如果我不想在基类中使用虚拟析构函数，那么构造函数 ( `MARKER 1`) 和析构函数 ( `MARKER 2`)的最佳关键字是什么，`Base`以保证不会发生任何坏事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T11:32:28.510

无论您使用哪种编程风格，您都可能会做坏事：即使您遵循最好的最佳指南实践。这是其背后的物理因素（并且与减少全球熵的可能性有关）

也就是说，不要将“经典 OOP”（一种方法）与 C++（一种语言）、OOP 继承（一种关系）与 C++ 继承（一种聚合机制）以及 OOP 多态（一种模型）与 C++ 运行时和静态多态（调度机制）。

尽管名称有时匹配，但 C++ 事物不一定要服务于 OOP 事物。

使用一些非虚拟方法从基类进行公共继承是正常的。析构函数并不特殊：只是不要在 CRTP 基础上调用 delete。

与经典的 OOP 不同，CRTP 基对每个派生都有不同的类型，因此拥有“指向基的指针”是毫无头绪的，因为没有“指向通用类型的指针”。因此，调用“删除 pbase”的风险非常有限。

“protected-dtor 范例”仅在您使用 C++ 继承通过基于指针的多态来管理（和删除）对象来编程 OOP 继承时才有效。如果您遵循其他范式，则不应以字面方式对待这些规则。

在您的情况下，受保护的 dtor 只是拒绝您`Base<Derived>`在堆栈上创建一个并在 Base* 上调用 delete。你永远不会做的事情，因为没有“Dervied”的 Base 没有任何意义存在，并且拥有 a`Base<Derived>*`没有任何意义，因为你只能拥有 a `Derived*`，因此同时拥有 public ctor 和 dtor 不会造成特别的混乱。

但是你甚至可以做相反的选择来保护 ctor 和 dtor ，因为你永远不会`Base`单独构造 a ，因为它总是需要知道 Derived 类型。

由于 CRTP 的特殊构造，所有经典的 OOP 东西都会导致一种“冷漠的平衡”，因为不再有“危险的用例”。

您可以使用或不使用它们，但不会发生特别的坏事。如果您按照设计使用的方式使用对象，则不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T13:10:07.177

虽然您的代码有效，但我发现将*析构函数*而不是*构造函数*标记为`protected`. 通常我的理由是你想防止程序员意外地*创建*一个 CRTP 基础对象。当然，这一切都归结为相同，但这几乎不是规范代码。

您的代码唯一可以防止的是通过基指针意外删除 CRTP 对象 - 即这样的情况：

```
Base<Derived>* base = new Derived;
delete base; 
```

但这是一种高度人为的情况，不会出现在实际代码中，因为 CRTP 根本不应该以这种方式使用。CRTP base 是一个实现细节，应该对客户端代码完全隐藏。

所以我对这种情况的配方是：

*   定义一个受保护的构造函数。
*   不要定义析构函数——或者，如果 CRTP 语义需要，将其定义为`public`（和非虚拟的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T11:18:22.250

没有问题，因为析构函数是受保护的，这意味着客户端代码不能删除指向 Base 的指针，所以 Base 的析构函数是非虚拟的也没有问题。

# php - 调用外部控制器，Laravel

> ID：14256212
> 
> 赞同：1
> 
> 时间：2013-01-10T10:52:50.823
> 
> 标签：php, controller, routes, call, laravel

拥有控制器设置的`application/controllers/admin/images/`位置`public function get_upload($id=null)``restful = true`

我如何从我的新闻控制器调用上面的函数。我尝试以下方法，但我得到 404，但它的功能本身可以工作......通过一个简单的`$.post()`作品调用（显然有完整的路线）

```
$image = Controller::call('admin.images@upload', array($news_id)); 
```

有什么想法我应该怎么做？

## 更新

即使使用 HVMC，我仍然可以`404`执行`HMVC::get('admin.images@upload', array('news_id'=>$news_id)`

**应用程序/控制器/管理员/images.php**

```
class Admin_Images_Controller extends Admin_Controller
{
     public $restful = true;
     public function get_upload($news_id)
     { 
```

PS`Admin_Controller`存在且已加载，与此无关

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:01:44.580

您正在寻找的是Lavarel 不支持开箱即用的[HMVC 。](http://en.wikipedia.org/wiki/Hierarchical_model%E2%80%93view%E2%80%93controller)如果我得到任何信息错误，我不使用 Lavarel 非常抱歉，但是快速搜索[会将我定向到此处](http://forums.laravel.io/viewtopic.php?id=1321)，他们建议在其中使用[此捆绑包](http://bundles.laravel.com/bundle/hmvc)。

经过进一步检查，您似乎可以使用[`Route::forward()`](http://laravel.com/api/class-Laravel.Routing.Route.html#_forward)：

> 在大多数情况下，您可以使用 Route::forward() 来实现您想要做的事情。

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T21:14:24.213

我遇到了同样的问题。问题是，如果 http 类型（post、get、put、delete）不同，它将返回 404。

例如，假设您有 2 个控制器、图像和媒体。如果您`POST_UPLOAD`在图像控制器中调用了一个函数，而`GET_RESIZE`在媒体控制器中调用了另一个函数，则调用`GET_RESIZE`from`POST_UPLOAD`将返回 404，反之亦然

但如果`GET_RESIZE`是`POST_RESIZE`错误就不会发生，即相同的http 类型。

这意味着http类型必须相同。

这很糟糕，因为您需要维护`RESIZE`ie `GET_RESIZE`&的 2 个功能`POST_RESIZE`。

这是 Laravel 中没有记录的东西。

# delphi - 在同一项目中链接 DELPHI 中的不同表单

> ID：14256218
> 
> 赞同：2
> 
> 时间：2013-01-10T10:53:12.240
> 
> 标签：delphi, oop, interface, pascal

我目前在**DELPHI 2010**中设计一个数据库接口，我设计了几个表单接口，都封装在一个 Delphi 项目结构中。我首先开始设计一个特定的界面窗体，结果，当我运行 .exe 文件时首先出现一个不相关的窗体，而我希望在加载程序时出现一个菜单窗体。我的问题是：

1.  ***当我编译的项目的 .exe 运行时，如何让我的菜单表单首先打开？***
2.  ***我需要使用什么功能来编程此菜单上的导航按钮以打开新表单？***
3.  ***我应该在每个表单的“退出”按钮上使用什么功能来单独关闭表单，而不关闭整个程序？***

我对 Pascal 有很好的了解，但我对在这个平台上编写面向对象的解决方案是新手。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T11:01:53.770

您应该确定您的表单是自动创建还是按需创建。您还应该决定哪种形式是主要形式。

角落的问题是您是否可以打开同一个类的多个表单，例如，如果您制作了“文件查看器”表单，那么为不同的文件打开其中的几个表单可能是有意义的。

**对于自动创建的表单：**

1.1 打开项目源（.dpr 文件，Project/View Source 菜单）或在 Forms 部分打开 Project 选项。将 MenuForm 设置为创建列表中的第一个（最顶部）。
1.2 检查所有其他表格是否有其`.visible`属性`false`

2：根据程序的逻辑，您应该使用 Form1.Show 或 Form1.ShowModal

3：Self.Close 或 Self.Hide 或 Self.Visible := false。更好的第一个：[http :](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Forms.TCustomForm.Close)
*//docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Forms.TCustomForm.Close 如果您使用这些表单的 OnClose 事件 - 确保您没有更改关闭的默认 caHide 操作*

**对于手动生命周期控制形式：**

1：打开项目源（.dpr 文件，项目/查看源菜单）或在表单部分打开项目选项。设置 MenuForm 是唯一一个创建的。

2.1。`some-temporary-variable := TFormClass.Create(Application);`
2.2\. 然后你调整一些属性，`some-temporary-variable`比如要打开的文件名或一些数据源等等。
2.3\. 然后你做`some-temporary-variable.Show`or `some-temporary-variable.ShowModal`。
*注意：使用 ShowModal 可能会冻结您的应用程序，在这种情况下`TFormClass.Create(SomeAnotherForm)`，请使用 Application 作为父级。*

3：Self.Release [http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Forms.TCustomForm.Release](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Forms.TCustomForm.Release)
或 Self.Close 并`caFree`在 OnClose 事件中指定操作 - [http://docwiki.embarcadero.com/Libraries /XE2/en/Vcl.Forms.TCustomForm.OnClose](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Forms.TCustomForm.OnClose)

# php - PHP jQuery 与 .change 我如何将两者结合起来？

> ID：14256219
> 
> 赞同：-1
> 
> 时间：2013-01-10T10:53:13.390
> 
> 标签：php, jquery

我有这个代码`select name=client`

在 jQuery 的帮助下，我想填充我的文本框和其他字段。这`select`有助于我改变我的客户选项。

因此，例如，我单击选择我将选择客户端 B。之后它将填充文本框和其他字段。信息来自数据库。

我的代码是否正确，我在这里发布问题，因为我不知道为什么我的代码不起作用。

我的 jQuery 代码

```
<script type="text/javascript">
jQuery.noConflict();
jQuery(document).ready(function(){  

    jQuery('select[name=client]').change(function(){
        var com_code = jQuery(this).val();

        <?
        $getClient = "SELECT * FROM jon_com_for";
        $getClient .= "WHERE com_code=";
        $getClient .= "'com_code'";

        $setClient = SET_SQL( $getClient );
        ?>

        jQuery('input[name=com_code]').val( '<?=$setClient['com_code'];?>' );
        jQuery('input[name=set]').val( '1' );
        jQuery('input[name=company_name_for]').val( '<?=$setClient['company_name_for'];?>' );
        jQuery('input[name=street_name]').val( '<?=$setClient['street_name'];?>' );
        jQuery('input[name=post_code]').val( '<?=$setClient['post_code'];?>' );
        jQuery('input[name=city]').val( '<?=$setClient['city'];?>' );
        jQuery('input[name=country]').val( '<?=$setClient['country'];?>' );

    });
});

</script> 
```

我的 html 代码这个 html 在一个对话框中。

```
<div id="dialog" title="Step 1">
    <form id="submit_steps" method="POST" action="new-template.php">
    <input type="hidden" name="user_code" value="<?=$_SESSION['user_code'];?>" />
    <input type="hidden" name="com_code" value="<?=comucode();?>" />
    <input type="hidden" name="footnote" value="1" />
    <input type="hidden" name="set" value="1" />

    <div style="margin:20px auto;">

    <label for="client">Selecteer klant : </label>

    <select name="client">
    <?php
    $list_of_client = mysql_query( "SELECT * FROM jon_com_for" ) or die ( mysql_error() );
    while( $row = mysql_fetch_array( $list_of_client ) ) {
        echo '<option value="'.$row['com_code'].'">'.$row['company_name_for'].'</option>';
    }
    ?>
    </select>
    </div>

    <table cellpadding="3" cellspacing="0" width="100%">
      <tbody>
        <tr>
          <td align="right" valign="middle">BEDRIJFSNAAM :</td>
          <td><input name="company_name_for" size="30" id="company_name_for" class="input" type="text" /></td>
        </tr>
        <tr>
          <td align="right" valign="middle">ONDERWERP VAN OFFERTE :</td>
          <td><input class="input" name="sub_quo" id="sub_quo" size="30" type="text" /></td>
        </tr>
        <tr>
          <td align="right" valign="middle">STRAAT :</td>
          <td><input class="input" name="street_name" id="street_name" size="30" type="text" /></td>
        </tr>
        <tr>
          <td align="right" valign="middle">Postcode :</td>
          <td><input class="input" name="post_code" id="post_code" size="30" type="text" /></td>
        </tr>
        <tr>
          <td align="right" valign="middle">STAD :</td>
          <td><input class="input" name="city" id="city" size="30" type="text" /></td>
        </tr>
        <tr>
          <td align="right" valign="middle">LAND :</td>
          <td><input class="input" name="country" id="country" size="30" type="text" /></td>
        </tr>
      </tbody>
    </table>
    <div align="center">
        <input type="submit" name="save_client_prof" value="Opsslaan" /> or <a href="?c=cprof" id="cancel">Annuleren</a></p>
    </div>
    </form>
</div> 
```

我把PHP放在jQuery里面对吗？

**对不起，代码** 也更新了，我的对话框也不再起作用了。

这是我更改的代码谢谢大家...

```
<script type="text/javascript">
$(function(){   
    $('select[name=clientx]').change(function(e){
        $('<img src="images/ajax-loader.gif" id="loading" style="width:auto;" />').appendTo("#client_details");
        //Cancel the link behavior
        e.preventDefault();
        //Get the A tag
        var com_code = $('select[name=clientx]').val();
        var dia = jQuery( 'input[name=dia]' ).val();

        $.ajax({
            type:"GET",
            url:"forms/company.php",
            data: {dia: dia, com_code: com_code},
            dataType: 'html',
            target: '#dialog',
            success: function(data){
                $("#client_details").find('img#loading').remove();
                $("#client_details").html(data);
            }
        })
    }); 

});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:06:23.053

将 PHP 代码放在 jQuery 更改事件**中并不**意味着 PHP 代码在更改事件发生时运行。

以这种方式编写的 PHP 代码仅在页面加载时运行一次。这意味着它永远不会知道`com_code`点击后 JS 变量包含什么。

为了在 JS 更改事件发生时执行 PHP 代码，您需要使用一种称为 Ajax 的技术。您的 javascript 代码需要调用一个完全独立的 PHP 程序，该程序将查询数据并将结果返回给浏览器以供 javascript 代码使用。

这种技术已经很成熟了，而且 jQuery 提供了使它非常容易使用的功能。查找一些 jQuery Ajax 示例，然后从那里开始学习。

希望有帮助。

# vba - Word：从多页用户窗体中删除页面

> ID：14256221
> 
> 赞同：1
> 
> 时间：2013-01-10T10:53:22.227
> 
> 标签：vba, ms-word

我想要，根据用户先前的选择，让一些选项卡被看到。

一旦我是 VBA 的新手，我开始显示所有选项卡，在用户选择之后，我删除了我不想要的选项卡。为此，我正在使用这行代码

`MultiPage1.Pages.Remove "name of the tab"`

问题是，如果我没有相同的 CAPTION 和选项卡的 NAME 字段，则该选项卡不会被删除。

如果有人对此或另一个有不同的解决方案可以删除而不必更改名称字段的同名标题，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:11:21.143

如果标题是唯一的，您可以使用 Select Case 语句根据标题获取名称。用户实际上是在键入他们想要的选项卡的标题，还是从复选框中进行选择？无论哪种情况，字幕都必须是唯一的，因此您可以执行以下操作：

```
Select Case True
   Case Check1.Value
      MultiPage1.Pages.Remove Pages("kp").Index

   Case Check2.Value
      MultiPage1.Pages.Remove Pages("jp").Index
End Select 
```

这有点粗略，但这是一般的想法吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T12:12:26.353

您可以为多页控件的页面指定与“属性”窗口中的标题不同的名称。您可以从“查看”菜单访问它。

![属性窗口的屏幕截图](../Images/fe1432b89ba7f39e1603e5a9d72ebcb3.png)

我以黄色突出显示控件的名称，并以浅绿色突出显示标题。

# windows-phone-7 - 在 HTML 文件中加载 PNG 图像

> ID：14256230
> 
> 赞同：0
> 
> 时间：2013-01-10T10:53:46.423
> 
> 标签：windows-phone-7, windows-phone-7.1

在我的 Windows Phone7.1 应用程序中，我正在从 WebBrowser 的本地路径加载 HTML 文件。为此，我
使用以下代码将 PNG 图像转换为 base64 格式，问题是图像路径的 base 64 格式未在 webbrowser 中加载图像。请帮助我在哪里犯了错误？

```
string s = "data:image/jpg;base64,";
imgStream = Assembly.GetExecutingAssembly().GetManifestResourceStream("NewUIChanges.Htmlfile.round1.png");
        byte[] data = new byte[(int)imgStream.Length];
        int offset = 0;
        while (offset < data.Length)
        {
            int bytesRead = imgStream.Read(data, offset, data.Length - offset);
            if (bytesRead <= 0)
            {
                throw new EndOfStreamException("Stream wasn't as long as it claimed");
            }
            offset += bytesRead;
        }
        base64 = Convert.ToBase64String(data);

        Stream htmlStream = Assembly.GetExecutingAssembly().GetManifestResourceStream("NewUIChanges.Htmlfile.equity_built.html");
        StreamReader reader = new StreamReader(htmlStream);
        string htmlcontent = reader.ReadToEnd();
        htmlcontent = htmlcontent.Replace("round1.png", s + base64);

        wb.NavigateToString(htmlcontent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:49:43.847

如果您没有错误，`data`包含您的图像，并且`round1.png`存在于 中`htmlcontent`，那么它可能只是图像类型错误，试试这个：

```
string s = "data:image/png;base64,"; 
```

# c# - 如何使 Log4Net 发送一封电子邮件，并将 From 值设置为当前用户的电子邮件地址

> ID：14256231
> 
> 赞同：9
> 
> 时间：2013-01-10T10:53:48.727
> 
> 标签：c#, log4net, log4net-configuration, log4net-appender

在[Log4Net 配置示例](http://logging.apache.org/log4net/release/config-examples.html)网页上，它显示了有关如何设置 SmtpAppender 的示例。

因此，我将以下设置添加到我的 app.config 文件中，并在记录警告或更高级别时成功发送电子邮件（这很好）。

```
<appender name="EmailAppender" type="log4net.Appender.SmtpAppender">
  <to value="me@mycompany.com" />
  <from value="me@mycompany.com" />
  <subject value="test logging message" />
  <smtpHost value="smtpserver.mycompany.com" />
  <lossy value="true" />
  <evaluator type="log4net.Core.LevelEvaluator">
    <threshold value="WARN"/>
  </evaluator>
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%newline%date [%thread] %-5level %logger [%property{NDC}] - %message%newline%newline%newline" />
  </layout>
</appender> 
```

但是**From**值是用我的电子邮件地址硬编码的。

我的应用程序是一个 WinForms 应用程序，它将被部署到用户的 PC 上，因此知道哪个用户遇到了警告/错误会非常方便。

是否可以设置 Log4Net SmtpAppender 以便 From 值使用当前用户的电子邮件地址？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T20:05:09.087

有两个问题

1) 确定用户的电子邮件地址。如果它们是域的一部分，那么您可以尝试

```
 System.DirectoryServices.AccountManagement.UserPrincipal.Current.EmailAddress 
```

2）。在 Log4net 中使用它。应该可以使用属性来做到这一点，例如

如果你改变你的 app.config 从

`<from value="me@mycompany.com" /`>

到

`<from type="log4net.Util.PatternString" value="%property{From}" /`>

并在您的程序中添加一行来设置属性，例如

```
log4net.GlobalContext.Properties["From"] = 
   System.DirectoryServices.AccountManagement.UserPrincipal.Current.EmailAddress ; 
```

您可能还需要将缓冲区大小设置为 1。

为了安全起见，最好将用户名也包含在错误消息中。

这种方法的缺点是，如果发件人地址丢失或不正确，电子邮件可能会丢失。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-01T14:55:39.200

这是如何在运行时设置 SMTP 附加程序的简单示例。您可以设置 Smtp appender 的任何属性。将 FindAppenderByName 中的 appender name 参数设置为与配置中的 appender name 相同的名称。

```
 public static IAppender FindAppenderByName(string name)
    {
        ILoggerRepository rootRep = LogManager.GetRepository();
        foreach (IAppender iApp in rootRep.GetAppenders())
        {
            if (string.Compare(name, iApp.Name, true) == 0)
            {
                return iApp;
            }
        }
        return null;
    }

    private void SetupSmtpAppender()
    {
        IAppender appender = FindAppenderByName("Global.SmtpAppender");
        SmtpAppender smtpAppender = (SmtpAppender)appender;
        smtpAppender.From = "me@domain.com";
        smtpAppender.Subject = "My subject";
        smtpAppender.SmtpHost = "smtp@mydomain.com";
... setup more properties
    } 
```

这是来自 log4net.config 的片段：

```
<appender name="Global.SmtpAppender" type="log4net.Appender.SMTPAppender">
  <threshold value="WARN" />
</appender> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-11T08:50:39.303

经过大量的谷歌搜索，我终于找到了这篇很棒的[CodeProject 文章](http://www.codeproject.com/Articles/15326/log4net-NonBufferedSmtpAppenderWithSubjectLayout)，它展示了如何使用 AppenderSkeleton 抽象类作为基础来创建一个新的自定义 Smtp Appender。

它很简单，并且可以更改，以便在运行时动态设置 From 属性。它还展示了如何为主题属性传递模式，以便您的电子邮件主题可以包含记录的事件级别和其他信息。

例如

```
<subject type="HHR.log4net.Layout.PatternLayout, HHR.log4net">
   <conversionPattern value="%date %level %exceptType at [%logger] on %property{log4net:HostName} by %username" />
</subject> 
```

# opengl - 几何着色器体素化错误

> ID：14256232
> 
> 赞同：0
> 
> 时间：2013-01-10T10:53:50.790
> 
> 标签：opengl, graphics, shader, voxel, geometry-shader

我试图制作一个几何着色器（使用着色器制造商）来使模型合法化。首先，我试图进行体素化，但结果并不好，我找不到它的问题所在。

在下面的代码中，想法是找到输入三角形的重心，然后使其成为我要创建的框的中心。

我知道这不是世界上最优雅的代码，但首先要先行，我需要让它工作......

这就是我得到的：![在此处输入图像描述](../Images/ece4608b12867e1dc3ce9aa1d3f141d8.png) 这就是我应该得到的：![在此处输入图像描述](../Images/784ac508e2b23ae5d44472465bd5c286.png)

```
uniform float stepi;

void main( void ){

    float step = stepi/2.;

    vec3 bari = {(gl_PositionIn[0].x + gl_PositionIn[1].x +gl_PositionIn[2].x)/3,
(gl_PositionIn[0].y + gl_PositionIn[1].y +gl_PositionIn[2].y)/3,
(gl_PositionIn[0].z + gl_PositionIn[1].z +gl_PositionIn[2].z)/3};

    vec3 bar = bari;

    float dist = 0;

    for( int i = 0 ; i < gl_VerticesIn ; i++ )
    {
        gl_FrontColor  = gl_FrontColorIn[ i ];
        gl_TexCoord[0] = gl_TexCoordIn  [ i ][ 0 ];
//-x
        gl_Position    = gl_ModelViewProjectionMatrix * vec4(bar.x-step,bar.y-step,bar.z+step,1) ;
        EmitVertex();
        gl_Position    = gl_ModelViewProjectionMatrix * vec4(bar.x-step,bar.y+step,bar.z+step,1) ;
        EmitVertex();
        gl_Position    = gl_ModelViewProjectionMatrix * vec4(bar.x-step,bar.y-step,bar.z-step,1) ;
        EmitVertex();
        gl_Position    = gl_ModelViewProjectionMatrix * vec4(bar.x-step,bar.y+step,bar.z-step,1) ;
        EmitVertex();
EndPrimitive();

//-y
        gl_Position    = gl_ModelViewProjectionMatrix * vec4(bar.x-step,bar.y-step,bar.z+step,1) ;
        EmitVertex();
        gl_Position    = gl_ModelViewProjectionMatrix * vec4(bar.x+step,bar.y-step,bar.z+step,1) ;
        EmitVertex();
        gl_Position    = gl_ModelViewProjectionMatrix * vec4(bar.x-step,bar.y-step,bar.z-step,1) ;
        EmitVertex();
        gl_Position    = gl_ModelViewProjectionMatrix * vec4(bar.x+step,bar.y-step,bar.z-step,1) ;
        EmitVertex();
        EndPrimitive();

//-z
        gl_Position    = gl_ModelViewProjectionMatrix * vec4(bar.x-step,bar.y+step,bar.z-step,1) ;
        EmitVertex();
        gl_Position    = gl_ModelViewProjectionMatrix * vec4(bar.x-step,bar.y-step,bar.z-step,1) ;
        EmitVertex();
        gl_Position    = gl_ModelViewProjectionMatrix * vec4(bar.x+step,bar.y+step,bar.z-step,1) ;
        EmitVertex();
        gl_Position    = gl_ModelViewProjectionMatrix * vec4(bar.x+step,bar.y-step,bar.z-step,1) ;
        EmitVertex();
EndPrimitive();
//+x
        gl_Position    = gl_ModelViewProjectionMatrix * vec4(bar.x+step,bar.y-step,bar.z+step,1) ;
        EmitVertex();
        gl_Position    = gl_ModelViewProjectionMatrix * vec4(bar.x+step,bar.y+step,bar.z+step,1) ;
        EmitVertex();
        gl_Position    = gl_ModelViewProjectionMatrix * vec4(bar.x+step,bar.y+step,bar.z-step,1) ;
        EmitVertex();
        gl_Position    = gl_ModelViewProjectionMatrix * vec4(bar.x+step,bar.y+step,bar.z-step,1) ;
        EmitVertex();
EndPrimitive();

//+z
        gl_Position    = gl_ModelViewProjectionMatrix * vec4(bar.x-step,bar.y+step,bar.z+step,1) ;
        EmitVertex();
        gl_Position    = gl_ModelViewProjectionMatrix * vec4(bar.x-step,bar.y-step,bar.z+step,1) ;
        EmitVertex();
        gl_Position    = gl_ModelViewProjectionMatrix * vec4(bar.x+step,bar.y+step,bar.z+step,1) ;
        EmitVertex();
        gl_Position    = gl_ModelViewProjectionMatrix * vec4(bar.x+step,bar.y-step,bar.z+step,1) ;
        EmitVertex();
EndPrimitive();

//+y
        gl_Position    = gl_ModelViewProjectionMatrix * vec4(bar.x-step,bar.y+step,bar.z+step,1) ;
        EmitVertex();
        gl_Position    = gl_ModelViewProjectionMatrix * vec4(bar.x+step,bar.y+step,bar.z+step,1) ;
        EmitVertex();
        gl_Position    = gl_ModelViewProjectionMatrix * vec4(bar.x-step,bar.y+step,bar.z-step,1) ;
        EmitVertex();
        gl_Position    = gl_ModelViewProjectionMatrix * vec4(bar.x+step,bar.y+step,bar.z-step,1) ;
        EmitVertex();
        EndPrimitive();

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:26:46.997

我认为问题在于您以错误的顺序发射顶点。图元的顶点应按顺时针顺序发射（从网格外部的角度来看）。例如，在您的 +z 四边形上，您按以下顺序发出顶点（左上）、（左下）、（右上）、（右下），但它应该是（左上）、（右上）、（下右），（左下）。

此外，您应该保留 for 循环内的代码，但摆脱循环本身。每次运行几何着色器时，您应该只发射一个立方体。现在你正在多次发射同一个立方体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T22:54:55.583

它现在工作得很好，主要问题是立方体中心的计算（以及顶点的实际配置以形成立方体。

中心编号计算如下：

```
 vec3 bari = vec3((gl_PositionIn[0].xyz+gl_PositionIn[1].xyz+gl_PositionIn[2].xyz)/3);

vec3 centre = floor((bari/stepi)+(0.5,0.5,0.5));
centre = centre * stepi; 
```

其中 bari 是传入三角形的重心， center 是立方体的中心。不是最好的解决方案，因为在某些形状中会出现孔，但是这是我应该得到的。

谢谢大家的答案！

# iphone - 使用 createScreenIOSurface 获取较低分辨率的 iPad 屏幕显示

> ID：14256238
> 
> 赞同：1
> 
> 时间：2013-01-10T10:54:10.070
> 
> 标签：iphone, ios, ipad, ios4, iphone-privateapi

出于兴趣和需要，我一直在 iOS 设备和系统级 API（如 IOSurface、IOMobileFramebuffer 等）上进行屏幕捕获。[作为从 ios 表面创建图像](https://stackoverflow.com/questions/13872728/creating-an-image-out-of-the-ios-surface-and-saving-it)并由 Victor Ronnin保存中提到的答案的扩展，我有一个问题。如上所述，createScreenIOSurface API 确实有效，并提供了屏幕表面/视频缓冲区以供使用。

新 iPad（我正在使用）的分辨率为 2048 X 1536，因此 createScreenIOSurface 需要大量时间。我做了一些实验，发现这些表面确实支持 1024 X 768 分辨率（可能会发生缩放，而且发生得非常快），因此，使用 IOMobileFramebufferGetLayerDefaultSurface，您可以获得 1024 X 768 分辨率的屏幕表面并且非常快。我的问题是 createScreenIOSurface 是否有任何类似的论点来获得较低分辨率的表面？此外，有关这些显示器如何支持 1024 X 768 的任何输入都会有所帮助。

谢谢。

# grails - -noreloading grails 启动选项的目的是什么？

> ID：14256240
> 
> 赞同：1
> 
> 时间：2013-01-10T10:54:18.543
> 
> 标签：grails

谁能给我一些有关 grails -noreloading 选项的详细信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:49:06.377

正如[Burt Beckwith 在这个答案](https://stackoverflow.com/a/6347134/592139)中所描述的，Grails 2 使用 JVM 代理来支持在开发模式下重新加载修改过的文件，而不是以前版本中使用的自定义类加载器。该`-noreloading`标志是`grails`命令行脚本的指令，告诉它在启动 JVM 时不要启用此代理，当您看到无法解释的行为时，它是一个有用的健全性检查（虽然在大多数情况下，代理方法比旧 1.3 有了很大改进）方法 我在与重新加载代理交互不良的极端案例的邮件列表中看到了各种报告）。

# cordova - 带有phonegap的导航器背景历史

> ID：14256244
> 
> 赞同：0
> 
> 时间：2013-01-10T10:54:25.373
> 
> 标签：cordova, jquery-mobile, history

我有两个页面，第1页和第2页。第1页包含字段将包含值和一个下一步按钮转到第2页。第2页包含一个按钮，然后才允许返回第1页。返回时如何显示第1页从第 2 页开始，之前输入了相同的数据。

我使用这个代码：

```
navigator.app.backHistory();
return false; 
```

我已经使用过这段代码

```
if (typeof(navigator) != 'undefined' && typeof(navigator.app) != 'undefined' && typeof(navigator.app.backHistory) == 'function')
    {
        navigator.app.backHistory();
    }
    // standard
    else
    {
        history.go(-1);
    } 
```

有字段动态填充组合框并动态添加的问题，如果我使用上面的这段代码，它再次包含这些字段的费用是动态的，我丢失了我之前选择的内容。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:29:10.410

在移动到第 2 页之前，您需要保存第 1 页的所有字段和选项的数据。在第 1 页的加载事件中，检查会话中的现有数据，如果存在，则在页面上填充它。这听起来可能很困难而且很长，但事实并非如此。您可以创建所有数据的 json 对象并像这样保存

```
this.setPageData = function(data) {
    if(data == null || data == '')
        store.setStorageItem('PageData', null);
    store.setStorageItem('PageData', JSON.stringify(data));
}
this.getPageData= function() {
    var data = store.getStorageItem('PagetData');
    if(data == null || data == '')
        return data;
    return JSON.parse(data);
} 
```

存储功能将像这样

```
this.Store = function() {
this.setStorageItem = function(name, val) {
    localStorage.setItem(name, val);
}
this.getStorageItem = function(name) {
    return localStorage.getItem(name);
}
this.clearStorage = function() {
    localStorage.clear();
} 
```

}

# ios - iOS 屏幕共享 SDK

> ID：14256249
> 
> 赞同：6
> 
> 时间：2013-01-10T10:54:33.610
> 
> 标签：ios, video

是否有任何 sdk 有助于通过任何服务器或其他方式将 iPad/iPhone 应用程序屏幕共享给其他用户。我正在尝试实现这样的事情，我找不到任何有用的东西所以想到拍摄应用程序的屏幕截图并发送到服务器并在那里创建一个视频文件，这可行吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-11T08:52:43.027

您需要两件事：i）来自 iOS 的屏幕共享 ii）在共享 iOS 设备屏幕的机器上进行屏幕录制。

我不确定 api，但有一些应用程序可用于屏幕共享，例如“ [Airserver](http://www.airserver.com/) ”

和“[反射器](http://www.airsquirrels.com/reflector/)”我个人觉得airserver比反射器好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-08T04:07:54.400

如果您计划在发布的版本中实现该功能，我可以很容易地看到 Apple 拒绝该应用程序。然而[，Soasta Touch Test](http://www.soasta.com/products/touchtest/)可能是一个很好的调试和测试解决方案。Soasta 有一套非常复杂的工具用于在云中进行调试。

# ruby-on-rails - 升级到 3.2.11 后 Rails Edit Route 不起作用

> ID：14256265
> 
> 赞同：0
> 
> 时间：2013-01-10T10:55:50.440
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-routing

我从 Rails 3.1.3 更新到 3.2.11

**路线.rb**

```
 resources :resource, :path=> "files" ,:only=>[:show, :edit, :update] do
  end 
```

因此我的文件编辑的 URL 就像： **files/141/edit/**

它曾经与以前的轨道一起工作，但是升级后的错误如下：

```
No route matches {:action=>"show", :controller=>"resources20/resource", :id=>nil} 
```

注意上面的 id **nil**。

即使从**Rails 控制台** Using Rails.application.routes.recognize_path "/files/1/edit" 正确返回我：

```
{:action=>"edit", :controller=>"resources20/resource", :id=>"1"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T10:57:55.323

这不会来自您的 URL，它很可能来自编辑页面上显示的 URL。日志将准确显示该 URL 正在执行的操作。

# java - Spring Integration - 转发原始消息并在处理后回复

> ID：14256271
> 
> 赞同：1
> 
> 时间：2013-01-10T10:55:59.900
> 
> 标签：java, spring, messaging, spring-integration

在某些情况下，我希望 Spring Integration 组件（服务激活器）接收带有 File 有效负载的消息，并产生一些输出。此外，一旦组件产生了这个输出，我想将原始文件消息传递到不同的通道。

用例是我有一些文件进入，被发送到两个并行处理流（存档到 S3，并解析内容）。感谢 Gary Russel，我`apply-sequence="true"`在原始 File 消息上使用了发布-订阅频道的行为。当两个流都完成了一个文件时，他们应该将带有原始相关标头的文件消息放到一个“已处理”通道上，聚合器从该通道将它们分组，并且当两者都被聚合后，将它们放在一个提供服务激活器的通道上删除文件。

因此，总而言之，我希望服务激活器将其输出放在一个通道上，同时将它收到的原始消息放在另一个通道上。

**更新**

与按属性`publish-subscribe`指定的顺序串行执行的订阅者同步使用会更好吗？`order`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T12:41:44.010

我使用了一个没有*指定*`publish-subscribe`的频道，然后在每个订阅者上放置一个属性。*`task-executor``order`*

 *第一个订阅者做它的事情，并发出自己不同的输出（在我的例子中是解析的文件内容）；我通过使用`ExecutorChannel`它的下游使这个异步的后续部分。

第二个订阅者在第一个订阅者完成之前不会执行，并获得相同的输入消息（在本例中为文件）。我让第二个订阅者 a`Bridge`将其推`File`送到通道，这将导致“我完成的事情”处理管道准备好被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T13:40:31.343

为了获得更大的灵活性，SI 2.2 引入了通过建议机制向端点添加行为的能力，提供的一个标准建议是 ExpressionEvaluatingRequestHandlerAdvice，它允许您根据（例如服务激活器）调用是成功还是失败来采取不同的行动......

[博文](https://spring.io/blog/2012/10/09/what-s-new-in-spring-integration-2-2-part-4-retry-and-more)。

例如，相关的示例应用程序展示了如何在通过 FTP 发送失败后重命名文件，或者在 FTP 操作成功时将其删除。

[示例应用程序](https://github.com/SpringSource/spring-integration-samples/tree/master/intermediate/retry-and-more)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T12:02:12.693

在服务激活器之前使用窃听器来复制消息并将其发送到另一个通道。*

# asp.net - 样式化 GridView cellpadding OnEditing 模式

> ID：14256275
> 
> 赞同：0
> 
> 时间：2013-01-10T10:56:07.230
> 
> 标签：asp.net, html, css

我正在使用 Visual Studio 2010、Asp.Net 和 C#

你知道当你看到你的 GridView 一切都很好，但是当你点击 EDIT 时它会自行扩展并跨越页面上 div 的线条？这就是发生在我身上的事情。

我想知道如何在编辑模式下编辑 CellPadding 和 CellSpacing ？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:19:40.853

更改单元格填充和间距无助于解决您的问题。

gridview 在 div 之外展开的原因是，当一行处于编辑模式时，它会生成冗长的输入控件（文本框、日期时间选择器等）。

## 我可以想到两个解决方案：

1）改变gridview编辑行输入控件的宽度：

```
<style type="text/css">
.editRow input
{
    width:60px;
}
</style> 
```

**将样式添加到您的网格视图：**

```
<asp:GridView EditRowStyle-CssClass="editRow"... 
```

2) 将您的gridview 放在一个div 中，并将div 的`overflow`css 属性设置为auto。当您的gridview 处于编辑模式时，这将生成滚动条。

```
 <style type="text/css">
        .gridParent
        {
            width: 700px;
            height:300px;
            overflow: auto;
        }
    </style>

<div class="gridParent">
    <!--Your grid view-->
    </div> 
```

# sql - 根据列值从表中删除重复行

> ID：14256280
> 
> 赞同：0
> 
> 时间：2013-01-10T10:56:16.853
> 
> 标签：sql, sql-server, sql-server-2008

我有一张桌子说`PromoDescription`：

```
--------------------------------------------------
| PromoId | Value | PromoType  |NightType|
--------------------------------------------------
|   101   |   11  |      a     |     b   |       
|   102   |   12  |      a     |     b   |       
|   103   |   17  |      c     |     d   |       
|   104   |   14  |      c     |     d   | 
```

上表有 4 列，我添加了示例值。

**问题：**对于 和 的相同组合`PromotionType`， `NightType`我必须保留折扣的最高值并删除其余行。

对于样本值，应删除第 1 行和第 4 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:02:29.510

您可以使用 CTE 执行此操作：

```
;with cte as
(
  select promoid, value, promotype, NightType,
    row_number() over(partition by promotype, NightType order by value desc) rn
  from yourtable
)
delete
from cte
where rn > 1; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/c4968/4)

这将从表中删除任何没有最大值的内容：

```
| PROMOID | VALUE | PROMOTYPE | NIGHTTYPE |
-------------------------------------------
|     102 |    12 |         a |         b |
|     103 |    17 |         c |         d | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:02:49.427

请检查：

```
with c as
(
    select *, row_number() over(partition by PromotionType, NightType order by [Value] desc) as n
    from PromoDescription
)
delete from c
where n > 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T11:05:10.897

您也可以像这样使用连接：

```
DELETE table1 
  FROM table1
  LEFT JOIN 
  (SELECT MAX(Value) as MaxValue, Promotype, nighttype FROM table1
   GROUP BY Promotype, nighttype
  )A
  ON table1.value = A.MaxValue
  AND table1.Promotype = A.Promotype
  AND table1.nighttype = A.nighttype
  WHERE A.MaxValue IS NULL; 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!3/42963/1)

结果

```
| PROMOID | VALUE | PROMOTYPE | NIGHTTYPE |
-------------------------------------------
|     102 |    12 |         a |         b |
|     103 |    17 |         c |         d | 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T11:24:46.250

我喜欢使用`NOT EXISTS`，但这只是一般主题的变体：

```
select *
from yourtable a
where not exists
  (
  select 1
  from yourtable b
  where 
      a.PromoType = b.PromoType and
      a.NightType = b.NightType and
      a.Value < b.Value

  ) 
```

[SQL 小提琴在这里](http://sqlfiddle.com/#!3/c4968/6)

# c# - 仅在 MSCHART 中折线图的数据点上显示工具提示

> ID：14256283
> 
> 赞同：2
> 
> 时间：2013-01-10T10:56:20.903
> 
> 标签：c#, asp.net

我在 C#4.0 中使用 mschart 来生成折线图，我正在创建 DataPoint 以在点上显示工具提示，但问题是，工具提示出现在线的每个点上，但是，我只想要我的数据点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-02T17:08:22.113

您可能已经找到了问题的解决方案，因为这篇文章已经很老了。但我想做同样的事情，所以我是这样做的：

首先，当我将数据点添加到 Serie 时，我没有设置数据点的 ToolTip 属性。然后，我使用代码：

```
public void Form1()
{
   //Add a handler for the GetToolTipText event
   chart1.GetToolTipText += new EventHandler<ToolTipEventArgs>(chart1_GetToolTipText);
}

private void chart1_GetToolTipText(object sender, ToolTipEventArgs e)
{
   //Check selected chart element is a data point and set tooltip text
   if (e.HitTestResult.ChartElementType == ChartElementType.DataPoint)
   {   
      //Get selected data point
      DataPoint dataPoint = (DataPoint)e.HitTestResult.Object;

      //Is it my datapoint?
      if (dataPoint == myDataPoint)
      {
         //Yes, set text
         e.Text = "My data point value " + dataPoint.XValue.ToString() + dataPoint.YValues[0].ToString();
      }
      else
      {
         //No, void string
         e.Text = "";
      }
   }
} 
```

# c - 每次执行指令时，如何编写一条指令将两个值转换为变量？

> ID：14256284
> 
> 赞同：1
> 
> 时间：2013-01-10T10:56:22.727
> 
> 标签：c, functional-programming, generic-programming

我想编写一条指令，在每次指令执行时将两个值转换为一个变量；这是一般情况：有两个值`x1, x2`并`i`初始化为`x1`or ，在每次指令执行`x2`之间切换 i 值，即or，如果 i 初始化为 x2，`x1``x2``i= x1, x2, x1 ...;``i = x2, x1, x2, ...;`

例如在 0 和 1 之间切换：`i= 3 % (i+2);`

如何编写通用`x1, x2`案例说明？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T11:18:55.400

这就是你要找的东西？

```
 i=(x1+x2)-i 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T11:19:15.900

位运算非常快，所以如果它是一个整数变量，

```
type z = x1 ^ x2, i = x1;
// do something
while(...) {
    i ^= z;
    // ...
} 
```

XOR 是一种快速的解决方案。

其背后的技巧是 XOR 是关联和交换的，并且`x ^ x == 0`对于所有人`x`以及`0 ^ x == x`.

所以当`i == x1`,

```
i ^= z ~> i = x1 ^ (x1 ^ x2) ~> i = (x1 ^ x1) ^ x2 ~> i = 0 ^ x2 ~> i = x2 
```

当 时`i == x2`，`x2`s`x2 ^ (x1 ^ x2)`取消。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T10:59:32.330

也许像这样简单

```
i = (i==x1)?x2:x1; 
```

会成功的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T11:26:15.703

通过大量讨论，我终于意识到你需要什么：）

这是我的解决方案的代码示例：

```
#define x1 7
#define x2 11

int main(void )

{
  int a = 0;
  int val = x1;
  int xorFactor = x1^x2;

  printf("\n");
  for (a=0; a<10; a++) {
    val = val^xorFactor;
    printf("%d: %d\n", a, val);
  }

  return 0;
} 
```

# svn - 如何svn合并文件中包含的修订列表？

> ID：14256287
> 
> 赞同：1
> 
> 时间：2013-01-10T10:56:23.817
> 
> 标签：svn, merge

我想在分支 2 中合并来自分支 1 的很长的修订列表。这个列表包含在一个文本文件中，比如：

```
1
3
78
… //a long list of revisions here...
324 
```

有没有一个优雅的解决方案，比在我的 branch2 工作副本中做得更好：

```
svn merge -c1 -c3 -c78 … -c324 branch1 
```

?

我知道我不应该走到这一步，但生活就是生活！

编辑：文本文件的格式可以很容易地改变

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:06:23.300

我想出了一个 bash 的解决方案：

```
commande="svn merge http://svn.sfrdev.fr/sfr/applications/bol-entreprise/trunk/"; for line in $(cat ~/listOfRevs); do commande="$commande -c $line"; done;echo $commande;eval $commande 
```

listOfRevs 是一个包含所有修订号的文件，每行一个：

```
r2
r5
…
rN 
```

# maven - Maven 归档器在类路径中使用未锁定的快照，但复制依赖项复制锁定的快照

> ID：14256291
> 
> 赞同：8
> 
> 时间：2013-01-10T10:56:33.153
> 
> 标签：maven, maven-dependency-plugin, maven-jar-plugin

我正在尝试使用 maven-jar-plugin 和 maven-dependency-plugin 创建我的应用程序的可运行“捆绑包”。在大多数情况下它工作正常，但是当我在依赖层次结构中有一个快照时，复制依赖目标似乎将快照依赖转换为锁定快照（带有时间戳的快照）

但是，归档器插件中的 addClasspath 不会转换快照依赖项：

*   在lib中，有foolib-1.0.1-20130108.143522-8.jar
*   类路径包含 lib/foolib-1.0.1-SNAPSHOT.jar

所以我无法运行该应用程序。

我找不到一种方法来告诉复制依赖项不翻译 SNAPSHOT 或告诉归档插件翻译 SNAPSHOT。

这是 pom.xml 的相关片段：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>          
    <artifactId>maven-dependency-plugin</artifactId>           
    <version>2.5.1</version>                  
    <executions>
        <execution>
            <id>copy-libs</id>
            <phase>package</phase>    
            <goals>
                <goal>copy-dependencies</goal>                          
            </goals>
            <configuration>
                <excludeScope>provided</excludeScope>
                <outputDirectory>${package.dest}/lib</outputDirectory>
            </configuration>
        </execution>
    </executions>
</plugin>

<plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <configuration>
        <outputDirectory>${package.dest}</outputDirectory>
        <archive>
            <manifest>
                <addClasspath>true</addClasspath>
                <classpathPrefix>lib/</classpathPrefix>
                <mainClass>${main.class}</mainClass>
            </manifest>
        </archive>
        </configuration>
</plugin> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-09-26T11:48:27.830

maven-dependency-plugin 2.6 中的一个新选项（[useBaseVersion ）可以解决这个问题。](http://maven.apache.org/plugins/maven-dependency-plugin/copy-dependencies-mojo.html#useBaseVersion)所以你至少需要2.6版。

注意：我需要将 useBaseVersion 选项设置为 false，因为我的问题似乎与原始问题相反。所以原始版本可能需要将useBaseVersion设置为true，也就是默认值。

下面是一个关于如何在 pom 中更改版本号并将 useBaseVersion 设置为 false 的示例：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>          
    <artifactId>maven-dependency-plugin</artifactId>
    <!-- need at least 2.6 for useBaseVersion-->           
    <version>2.6</version>                  
    <executions>
        <execution>
            <id>copy-libs</id>
            <phase>package</phase>
            <goals>
                <goal>copy-dependencies</goal>                          
            </goals>
            <configuration>
                <excludeScope>provided</excludeScope>
                <outputDirectory>${package.dest}/lib</outputDirectory>

                <!-- useBaseVersion=false makes the jar names match those 
                     that maven-jar-plugin puts in the manifest classpath -->
                <useBaseVersion>false</useBaseVersion>
            </configuration>
        </execution>                    
    </executions>
</plugin> 
```

# android - 如何在 LibGDx 中加载图像作为背景？

> ID：14256294
> 
> 赞同：4
> 
> 时间：2013-01-10T10:56:42.523
> 
> 标签：android, libgdx, live-wallpaper

我制作动态壁纸，但有一个问题。我想将图像设置为背景和 Eclipse 显示错误：

```
01-10 10:37:18.206: E/AndroidRuntime(1045): FATAL EXCEPTION: GLThread 99
01-10 10:37:18.206: E/AndroidRuntime(1045): com.badlogic.gdx.utils.GdxRuntimeException: Texture width and height must be powers of two: 480x800 
```

我的代码如下所示：

```
public class Tapeta implements ApplicationListener {

    private SpriteBatch batch;
    private Texture texture;
    private TextureRegion region;

    @Override
    public void create() {      
        texture = new Texture(Gdx.files.internal("data/cat.jpg"));
        Texture.setEnforcePotImages(false); 

    }

    @Override
    public void dispose() {
        texture.dispose();
    }

    @Override
    public void render() {
        Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT); 
        batch.begin();
        batch.draw(texture, 0, 0);
        batch.end();
    }

    @Override
    public void resize(int width, int height) {
    }

    @Override
    public void pause() {
    }

    @Override
    public void resume() {
    }
} 
```

我正在寻找我的问题的解决方案，但我没有找到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T17:26:21.950

在这种情况下，libGDX 错误消息实际上很有帮助！

```
Texture width and height must be powers of two: 480x800 
```

所以纹理的宽度和高度必须是以下之一：2、4、8、16、32、64、128、256、512、1024、2048（480 和 800 都不在该列表中......）

你有这条神奇的线：

```
Texture.setEnforcePotImages(false); 
```

但它在纹理加载后。如果你把它放在纹理加载*之前*，异常会消失吗？（在您的问题中包含更多异常回溯会很有帮助）。我相信这种方法仅适用于您知道底层 OpenGL ES 1.0 系统支持非二次幂纹理扩展的情况。设置此标志不会修复真正不支持二次幂纹理的硬件。（我不知道世界上还剩下多少这样的硬件，所以这些天它可能是无害的。）

二次幂纹理要求是硬件和 OpenGL ES 的限制。此要求已从 OpenGL ES 2.0 中删除。

绕过这个要求的另一种方法是构建一个大小为二次方的纹理图集，其中包含非二次方纹理。然后渲染图集图像的子部分。见[http://bitiotic.com/blog/2012/05/10/tutorial-for-texturepacker-and-libgdx/](http://bitiotic.com/blog/2012/05/10/tutorial-for-texturepacker-and-libgdx/)

# javascript - 唯一突出显示用户名

> ID：14256295
> 
> 赞同：2
> 
> 时间：2013-01-10T10:56:45.753
> 
> 标签：javascript, jquery, cross-browser

在我的项目中，我试图突出显示一个文本（仅用户名），只要用`@`. 我正在使用以下功能：

```
function replaceMessage(data, username) {
    return data.replace("@" + username, "<strong>@" + username + "</strong>");
} 
```

上面的这个函数是有效的，但是如果有两个有效的用户名为“Sam”和“Samuel”，那么应用函数后的结果会变成这样：

           **`Sam`**和**`Sam`uel** （而不是`Samuel`）。

如何解决这个问题？

我不太擅长使用正则表达式，我尝试了以下在 IE8 中不起作用的函数。

```
function replaceMessage(data, username) {
    return data.replace(/\b + "@" + username + /g, "<strong>@" + username + "</strong>");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T10:58:53.977

您将需要`\b`在正则表达式中表示分词的特殊符号：

```
function replaceMessage(data, username) {
    var re = new RegExp('@' + username + '\\b', 'g');
    return data.replace(re, "<strong>$0</strong>");
} 
```

# sql - 需要在 SQL 中生成新模式

> ID：14256297
> 
> 赞同：1
> 
> 时间：2013-01-10T10:56:52.063
> 
> 标签：sql

我有一个两行作为（指针，数字）的表，一组数字例如（11111111,23456789,12345678）。

我需要根据我的指针使用新模式更新表中的数字字段。我想要类似的东西：

如果我的指针是 1，我需要 11111111,23456789,12345678,

如果 2 我需要 23456789,12345678,11111111..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:00:28.233

你有这样的桌子吗？

```
create table PointerNumber (
    Pointer int,
    Number1 int,
    Number2 int,
    Number3 int,
    Number4 int
) 
```

你有这样的数据吗？

```
insert into PointerNumber (Pointer, Number1, Number2, Number3, Number4) 
  values (1, 11111111, 23456789, 12345678, 44444444) 
```

现在根据您的指针列，您想将数字更新为新模式吗？究竟是什么逻辑？

更新可能看起来像这样：

```
update PointerNumber set
  Number1 = Number2,
  Number2 = Number3,
  Number3 = Number4,
  Number4 = Number1
where Pointer = 1 
```

核实：

```
select * from PointerNumber 
```

让我们知道

# google-chrome-extension - x-webkit-speech 和 panel/detached_pa nel 窗口

> ID：14256299
> 
> 赞同：1
> 
> 时间：2013-01-10T10:56:56.627
> 
> 标签：google-chrome-extension

我认为发现了一个有趣的错误。使用 x-webkit-speech 制作一个带有语音到文本输入的简单 html 页面，例如：

```
<html><body>
    <input type="text" id="speech" x-webkit-speech />
</body></html> 
```

如果您在 chrome 中打开它并单击输入中的麦克风，则一切正常。

现在，创建一个普通的扩展，使用“permissions”：[“tabs”]，并在弹出脚本的某处创建一个**面板**或**detached_pa​​nel**窗口指向前一个 html 页面。举个例子 ：

```
chrome.windows.create({
    url: "index.html",
    width: 320,
    height: 240,
    focused: true,
    type: "detached_panel"
}); 
```

现在单击输入中的麦克风：没有任何反应，nada。

这是一个已知的错误 ？

另外，我已经用 type="popup" 或 type="normal" 进行了测试，它工作正常，所以这个错误似乎只在面板和 detached_pa​​nel 窗口上。另外，我尝试将它放在面板窗口内的 iFrame 中，但仍然无法正常工作。请注意，x-webkit-speech 在扩展气泡中也不起作用。此外，我开始使用 Chrome 提出的实验性 API，但他们需要启用实验性 api 标志，而 x-webkit-speech 不需要。

感谢您提供任何线索。

# django - 当我实现 i18n 时，块标签无效

> ID：14256301
> 
> 赞同：3
> 
> 时间：2013-01-10T10:57:05.923
> 
> 标签：django

我目前正在我的网站中添加 i18n，但出现了问题。

当我使用来自[djangoproject的代码时](https://docs.djangoproject.com/en/1.5/topics/i18n/translation/#the-set-language-redirect-view)

```
<form action="{% url 'set_language' %}" method="post">
{% csrf_token %}
<input name="next" type="hidden" value="{{ redirect_to }}" />
<select name="language">
{% get_language_info_list for LANGUAGES as languages %}
{% for language in languages %}
<option value="{{ language.code }}">{{ language.name_local }} ({{ language.code }})</option>
{% endfor %}
</select>
<input type="submit" value="Go" />
</form> 
```

我收到这个错误

> 无效的块标签：'get_language_info_list'

我不明白为什么`get_language_info_list`是未知的。Templates_context_processors 没问题。HTML 表单在我的主页上。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T11:18:42.847

在请求任何标签之前，请务必先加载标签库。要使用`get_language_info_list`，您需要确保`{% load i18n %}`在您的模板中。

# php - 插入前检查日期时间字段

> ID：14256306
> 
> 赞同：0
> 
> 时间：2013-01-10T10:57:42.833
> 
> 标签：php, mysql, validation

我希望能够在插入另一条记录之前检查表中最新记录的*日期*时间字段。当插入记录时，我使用它来填充*日期时间字段：*

```
$date = date("Y-m-d H:i:s"); 
```

至于现在，我对其他字段进行了验证，但我也想在*datetime*字段上添加验证。它应该检查我表上的最新记录并检查*datetime*字段和 $date = date("Ymd H:i:s");的差异。如果差异是 5 秒或更短，它现在应该允许向表中插入新记录。将显示如下错误消息：

```
 }else if(trim($checktime) == '') {
    $error = 'Please wait 5 seconds before insert'; 
   } if($error == '') { //Run the code 
```

对于上面的示例，$checktime 会是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:15:34.617

首先查询数据库的最新日期时间。像这样的东西应该可以解决问题：SQL：

```
SELECT MAX(`mydate`) AS mydate FROM `tablename`;
or
SELECT `mydate` FROM `tablename` ORDER BY `mydate` DESC LIMIT 1;
or if you have a primary key auto-increment column called id this may be fastest:
SELECT `mydate` FROM `tablename` ORDER BY `id` DESC LIMIT 1;

<?php
$last_insert_time = strtotime(); # Use the result from the database query as the parameter
$now = time();

# If the difference between the last inserted entry and the current time is less
# than five seconds perform an error action.
if (($now - $last_insert_time) < 5) {
    $error = 'Please wait 5 seconds before insert';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:10:10.253

你可以这样使用

1）首先使用此查询获取最后记录日期值

```
SELECT dateVal FROM tablename ORDER BY id DESC LIMIT 0, 1; 
```

2）通过使用这个找到两个日期的差异

```
$timeFirst  = strtotime($dateVal);
$timeSecond = strtotime(date('Y-m-d H:i:s'));
$checktime= $timeSecond - $timeFirst; 
```

# objective-c - NSSavePanel 没有保存在桌面上？

> ID：14256307
> 
> 赞同：0
> 
> 时间：2013-01-10T10:57:44.083
> 
> 标签：objective-c, cocoa

我可以将 NSSavePanel 与沙盒 OS X 应用程序一起使用，让用户保存在桌面上吗？我为下载和用户选择的文件夹提供了用户读/写权利，由于某种原因，我的应用程序可以很好地保存在下载文件夹中，但是当我更改目录并选择桌面时，它根本不保存。

这是用于 NSSavePanel 的代码

```
if([self.mActiveQRFileName isEqualToString:kQR_DEFAULT_FILE_NAME])
    {
        NSSavePanel *savePanel = [NSSavePanel savePanel];
        //[savePanel setDirectoryURL:[NSURL URLWithString:[Utilities getQRDefaultDirectoryPath]]];
        [savePanel setNameFieldStringValue:kQR_DEFAULT_FILE_NAME];
        [savePanel beginSheetModalForWindow:[self window] completionHandler:^(NSInteger result) {
            if (result == NSFileHandlingPanelOKButton) {
                NSString *qrFilePath = [NSString stringWithFormat:@"%@.%@",[[savePanel URL] path],kQR_FILE_EXT];

                [qrd saveQRFile:qrFilePath];
                self.mActiveQRFileName = [NSString stringWithString:qrFilePath];
                blnChangesSaved = YES;
            }
        }];
    }
    else
    {
        [qrd saveQRFile:self.mActiveQRFileName];
        blnChangesSaved = YES;
    } 
```

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T14:46:06.973

A将在其属性`NSSavePanel`中为您提供用户选择的文件路径。`URL`沙盒将仅授予您访问此文件的权限，该文件的名称由用户指定。

在您的示例代码中，此行可能会通过为其提供不同的文件扩展名来修改所选路径：

```
NSString *qrFilePath = [NSString stringWithFormat:@"%@.%@",[[savePanel URL] path],kQR_FILE_EXT]; 
```

这可能会导致文件名与您在沙盒中无权访问的最初选择的文件不同。尝试记录`qrFilePath`并查看它是否仍然等于所选 URL 的路径。还要检查您的沙箱异常以查看确切的错误是什么。

如果你想限制`NSSavePanel`让用户只指定某种类型的文件，请使用`setAllowedFileTypes:`方法。

如果您希望用户授予您对要写入的目录的访问权限，您可以在其中输出任何文件，而不是特定路径：使用`NSOpenPanel`. 这样做的缺点是用户无法指定特定的文件名，例如`NSSavePanel`.

# html - 如何截断页面 CSS/HTML 的底部溢出

> ID：14256308
> 
> 赞同：0
> 
> 时间：2013-01-10T10:57:48.563
> 
> 标签：html, css

我有几个 div，其中一个覆盖在另外两个之上。所以对于底部的 div，我使用了这样的东西（CSS）：

```
position:relative;
top:-200px; 
```

但现在我在页面底部剩余 200 个像素，它们是空的。我如何削减/删除溢出？完整的 CSS 代码是：

```
div.headertop
{
    background-image:url('images/bkb.png');
    background-repeat:repeat;
    width: 1000px;
    height:200px;
    background-color: black;
    color:white;
    display: block;
    margin-left: auto;
    margin-right: auto;
}
div.headerbottom
{
    background-image:url('images/bkg.png');
    background-repeat:repeat;
    background-position:bottom; 
    width: 1000px;
    height:125px;
    position:relative;
    margin-left: auto;
    margin-right: auto;
}
div.headerlogo
{
    background-image:url('images/bkw.png');
    background-repeat:repeat;
    width: 800px;
    height:200px;
    position:relative;
    top:-200px;
    margin-left: auto;
    margin-right: auto;
}
div.content
{
    background-image:url('images/bkg.png');
    background-repeat:repeat;
    background-position:top; 
    width: 1000px;
    min-height:500px;
    position:relative;
    top:-200px;
    margin-left: auto;
    margin-right: auto;
}
div.footer
{
    background-image:url('images/bkb.png');
    background-repeat:repeat;
    width: 1000px;
    height:100px;
    line-height:100px; 
    background-color: black;
    position:relative;
    top:-200px;
    color:white;
    display: block;
    margin-left: auto;
    margin-right: auto;
    color: white;
    text-align: center;
} 
```

html正文代码：

```
<body>
        <div id="back">
            <div class="headertop">
                Hello!
            </div>
            <div class="headerbottom">
            </div>
            <div class="headerlogo">
                <a href="index.html"><img border="0" src="images/logo.png" alt="Future Me - Home"/></a>
            </div>
            <div class="content">
                Lorem ipsum dolor sit amet, consectetur adipiscing...
            </div>
            <div class="footer">

            </div>
        </div>
    </body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:27:18.743

尝试`margin-top: -200px`而不是使用`top: -200px`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:36:17.480

drmonkeyninja 是正确的！但仅适用于`margin-top`，`.content`否则`.headerlogo`将不可见。此外，在应用 drmonkeyninja 建议的修复程序时删除 - 保留`top`不会将页脚强制到页面底部（当然，除非这是您的意图！）`.footer``top`

我还注意到这`color: white;`是重复的`.footer`=）

# javascript - Javascript：如何在 html 字段中添加和删除值

> ID：14256311
> 
> 赞同：0
> 
> 时间：2013-01-10T10:57:51.970
> 
> 标签：javascript, html

我有一个 HTML 页面，我正在尝试用 javascript 编写一个函数，这样如果特定日期字段为空白，页面上的另一个字段也将为空白。但如果该字段已填充，页面上的其他字段也将填充相同的日期。

我可以让这个工作，所以如果第一个字段被填充，第二个字段也被填充相同的日期。但是当您从第一个字段中删除日期时，第二个字段仍然填充。

所以我的问题是我如何让这个工作，如果第一个字段为空白，第二个字段将为空白

功能：

```
function checkIfDatePresent(date) { 
var theDate = date;
    if (theDate.value != "") {
        document.getElementById("sentDate").value = theDate.value;
    } else {
        document.getElementById("sentDate").style.clear;
    }

} 
```

使用“onchange”事件调用：

```
onchange="javascript:checkIfDatePresent(this)" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:03:41.977

我认为您无需检查条件，因为在所有情况下值都应该相同。因此，您可以更改该条件和 else 部分中的语句。这可能会解决问题。

# windows - 在 Windows 8 上运行 towerjs 会出现 TypeError

> ID：14256315
> 
> 赞同：0
> 
> 时间：2013-01-10T10:58:00.057
> 
> 标签：windows, towerjs

我安装`tower@0.4.2-22`在我的 Windows 8 机器上。在此之后，我尝试验证安装。我启动了mongod服务器，塔式服务器并调用`http://localhost:3000`在我的浏览器中。我收到错误消息（在浏览器窗口和服务器日志中）：TypeError: Object Windows 8 has no method 'match' at Object.Tower.MiddlewareAgent [as handle] (C:\Users\Philipp\Documents\Scripts\tower\Tests \test01\node_modules\tower\lib\tower-middleware\server\agent.js:13:21）在下一个（C:\Users\Philipp\Documents\Scripts\tower\Tests\test01\node_modules\tower\node_modules\connect \lib\proto.js:199:15) 在 Object.handle (C:\Users\Philipp\Documents\Scripts\tower\Tests\test01\app\config\server\bootstrap.coffee:23:14) 在下一个 ( C:\Users\Philipp\Documents\Scripts\tower\Tests\test01\node_modules\tower\node_modules\connect\lib\proto.js:199:15) 在 Object.methodOverride [作为句柄] (C:\Users\Philipp \Documents\Scripts\tower\Tests\test01\node_modules\tower\node_modules\connect\lib\middleware\methodOverride.js:37：

我试图弄清楚发生了什么，并发现在模块 \node_modules\tower\lib\tower-middleware\server\agent.js 方法调用 mac: !!agent.os.match(/mac/i), windows: !!agent.os.match(/win/i), linux: !!agent.os.match(/linux/i) 失败，因为 agent.os 是对象类型而不是字符串。我用 mac 替换了这些行：!!agent.os.toString().match(/mac/i)，windows：!!agent.os.toString().match(/win/i)，linux：!!agent .os.toString().match(/linux/i) 和塔出现并正在运行。

这是代码中的错误还是我的安装有问题？

首先我用 npm install power -g 安装了 tower 然后我用 tower new test01 创建了一个应用程序接下来的步骤是： - cd test01 - npm install - forever server.js（未安装永远失败） - npm install forever -g -永远的 server.js（失败的 mongod 没有启动）-（启动 mongodb）-永远的 server.js（现在正在运行）-蛋糕手表（在另一个提示中-失败，因为 grunt 丢失）-npm install grunt -g -蛋糕手表（现在它正在运行）-（转到浏览器并输入`http://localhost:3000`）-（参见上面的错误描述）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:53:07.323

似乎是最近的一个错误，可能在最近版本的 node.js 或 Tower 的其他依赖项之一中发生了变化，我注意到在过去的几天里，tower 突然收到了一些错误报告，看起来[有人提交了昨晚发布了一个补丁](https://github.com/viatropos/tower/pull/376) ，因此请注意该拉取请求是否被接受，或者将其拉入您自己的 tower.js 分支中，然后重试。

# html - 如何使用 getUserMedia 获取网络摄像头图像的大小？

> ID：14256316
> 
> 赞同：17
> 
> 时间：2013-01-10T10:58:01.010
> 
> 标签：html, webcam, dimensions, getusermedia

我试图找出我使用 getUserMedia 从网络摄像头获得的图像的大小。

现在，在我的 Macbook 中，我应该有一个 720p 相机，但我得到的图像是 640x480。不过，我假设情况并非总是如此，我希望能够处理尽可能多的相机。（我更关心纵横比而不是尺寸本身，我只是想确保图片不会被拉伸）

是否有可能做到这一点？

谢谢！
丹尼尔

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-16T06:05:28.440

您应该能够使用`videoWidth`和`videoHeight`属性，如下所示：

```
// Check camera stream is playing by getting its width
video.addEventListener('playing', function() {
    if (this.videoWidth === 0) {
        console.error('videoWidth is 0\. Camera not connected?');
    }
}, false); 
```

更新：实际上，这在 Opera 中有效，但在 Chrome 中似乎不再受支持，并且尚未在 Firefox 中实现（至少不适用于视频流）。不过，它在[HTML5 规范](http://dev.w3.org/html5/markup/video.html#video-interface)中，因此希望在这些浏览器的路线图上。

更新2：这确实有效，但要监听的事件是“正在播放”而不是“播放”（在上面的代码中修复）。“播放”事件在`play()`方法返回时触发，而“正在播放”事件在播放实际开始时触发。在 Opera、Chrome 和 Firefox 中测试。

更新 3：Firefox 18 似乎反复触发“正在播放”事件，这意味着如果您在侦听器中执行大量代码，浏览器可能会停止运行。最好在触发后删除侦听器，如下所示：

```
var videoWidth, videoHeight;
var getVideoSize = function() {
    videoWidth = video.videoWidth;
    videoHeight = video.videoHeight;
    video.removeEventListener('playing', getVideoSize, false);
};

video.addEventListener('playing', getVideoSize, false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-05T12:28:10.567

挂钩`playing`事件在 Firefox 中不起作用（至少在我使用的 Ubuntu 12.04 LTS 上的 Firefox 26.0 中）。该`playing`事件在视频开始播放后触发一次或两次。`videoWidth`并且在事件触发`videoHeight`时为 0 或未定义。`playing`一种更可靠的检测方法是暂停`videoWidth`和`videoHeight`播放视频，这似乎总是有效的。下面的代码片段对我有用：

```
//Detect camera resolution using pause/play loop.
var retryCount = 0;
var retryLimit = 25;
var video = $('.video')[0]; //Using jquery to get the video element.
video.onplaying = function(e) {
    var videoWidth = this.videoWidth;
    var videoHeight = this.videoHeight;
    if (!videoWidth || !videoHeight) {
        if (retryCount < retryLimit) {
            retryCount++;
            window.setTimeout(function() {
                video.pause();
                video.play();
            }, 100);
        }
        else {
            video.onplaying = undefined; //Remove event handler.
            console.log('Failed to detect camera resolution after ' + retryCount + ' retries. Giving up!');
        }
    }
    else {
        video.onplaying = undefined; //Remove event handler.
        console.log('Detected camera resolution in ' + retryCount + ' retries.');
        console.log('width:' + videoWidth + ', height:' + videoHeight);
    }
}; 
```

# debugging - Set-DefaultScaffolder：调试 T4Scaffolding.Core Nuget 包时无法获取 EnvDTE.DTE 的实例 - 高级 Powershell 调试

> ID：14256318
> 
> 赞同：3
> 
> 时间：2013-01-10T10:58:14.430
> 
> 标签：debugging, visual-studio-2012, nuget-package, powershell-ise, t4scaffolding

我正在尝试从 Visual Studio 2012 外部调试 T4Scaffolding.Core Nuget 包。我正在使用安装了 Powershell 3.0 的 Powershell ISE，并在 CLRVersion 4.0.30319 下运行。

我首先导入几个 Nuget 相关项： - Profile.ps1 - nuget.psm1 - NuGet.Cmdlets.dll

我还将当前位置设置为 set-location "\ClassLibrary1\" 并获得了当前运行的唯一 DTE 实例（我之前在 VS 2012 中打开了 MySolution，其中有一个类库和一个 asp.net MVC 4 应用程序）

```
$dte = [runtime.interopservices.marshal]::GetActiveObject("visualstudio.dte") 
```

我跳过了从 NuGet.Cmdlets.dll 二进制模块导入 Get-Project cmdlet，因此我可以创建自己的 cmdlet：Get-Project 以这种方式获取我的 MVC 项目：

```
$project = $dte.Solution.Projects.Item("MvcApplication1\MvcApplication1.csproj") 
```

我可以进入 init.ps1: \packages\T4Scaffolding.Core.1.0.0\tools\init.ps1 但代码在执行时失败：

```
Set-DefaultScaffolder -Name CustomTemplate -Scaffolder T4Scaffolding.CustomTemplate -SolutionWide -DoNotOverwriteExistingSetting

Set-DefaultScaffolder : Cannot get an instance of EnvDTE.DTE
At line:1 char:1
+ Set-DefaultScaffolder -Name CustomTemplate -Scaffolder T4Scaffolding.CustomTempl ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+ CategoryInfo          : NotSpecified: (:) [Set-DefaultScaffolder], InvalidOperationException
+ FullyQualifiedErrorId : T4Scaffolding.Cmdlets.SetDefaultScaffolderCmdlet 
```

我还尝试指向我的 $project 名称（省略 -SolutionWide），结果相同：

```
Set-DefaultScaffolder -Name CustomTemplate -Scaffolder T4Scaffolding.CustomTemplate -Project ($project).Name -DoNotOverwriteExistingSetting 
```

我可以观察到 EnvDTE.dll 通过使用以下方法加载到 Powershell ISE 环境中：

```
[System.Threading.Thread]::GetDomain().GetAssemblies() 
```

希望有人会对实现相同的目标感兴趣（逐行通过 Visual Studio 外部 Nuget 包的 init.ps1 和 install.ps1）。

谢谢，拉德

[堆栈溢出：我用作起点的问题](https://stackoverflow.com/questions/7031944/how-to-debug-install-ps1-script-of-nuget-package?rq=1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-19T05:23:14.560

我得到了同样的错误信息：

```
Set-DefaultScaffolder : Cannot get an instance of EnvDTE.DTE 
```

但在不同的情况下。我在 VS2015 中使用脚手架，安装了 T4Scaffolding.Core。然后我从[这个链接](https://stackoverflow.com/questions/18727299/is-mvcscaffolding-compatible-with-vs-2013-rc-by-command-line#answer-23673004)
中找到了解决方案， 通过安装[Windows Management Framework 4.0](https://www.microsoft.com/en-us/download/details.aspx?id=40855)，错误消失了，我的脚手架再次工作。希望这能有所帮助。

# javascript - javascript语法错误：未终止的字符串文字

> ID：14256320
> 
> 赞同：-1
> 
> 时间：2013-01-10T10:58:21.023
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何在 JavaScript 中的多行代码中拆分字符串？](https://stackoverflow.com/questions/508269/how-do-i-break-a-string-across-more-than-one-line-of-code-in-javascript)

我收到一个未终止的字符串文字错误。请看我的代码

```
<script type="text/javascript">
function embedVideo(url){
alert(video);
var video= '
<OBJECT ID="player" width="800" height="450" CLASSID="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6" STANDBY="Loading Windows Media Player components..." TYPE="application/x-oleobject">
<PARAM NAME="FileName" VALUE="">
<PARAM name="autostart" VALUE="false">
<PARAM name="ShowControls" VALUE="true">
<param name="ShowStatusBar" value="true">
<PARAM name="ShowDisplay" VALUE="false">
<param name="uiMode" value="full" />
<PARAM NAME="SendPlayStateChangeEvents" VALUE="True" />
<EMBED TYPE="application/x-mplayer2" width="800" height="450" SRC="" NAME="MediaPlayer"
ShowControls="1" displaysize="4" ShowStatusBar="1" ShowDisplay="0" autostart="0"> </EMBED></OBJECT>
';
alert(video);
jQuery("#videoScreen").html(video);
return true;
}
</script> 
```

请帮忙...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-10T11:00:47.473

Javascript 不支持多行字符串，您需要：

*   使该标签成为一大行，或
*   在每一行使用尾随反斜杠表示“继续”，或
*   使用连接在一起的多个字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T11:02:05.157

我已将代码复制并粘贴到我的机器中。我发现了错误。

在第 4 行，

```
var video= '
<OBJECT ID="player" width="800" height="450" CLASSID="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6" STANDBY="Loading Windows Media Player components..." TYPE="application/x-oleobject"> 
```

这导致了错误。您在等号后的第 4 行放置了一个换行符`=`。Javascript 将每个换行符视为新语句。请删除不必要的换行符，它应该可以工作。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T11:01:04.270

js中不能给变量赋值多行值，所以必须这样写：

```
var video = '<OBJECT ...>';
video += '...'; 
```

但是...您创建`object`元素的方式不正确-您最好使用`document.createElement`更清晰的代码。

# batch-file - 使用文件路径作为输入参数创建批处理文件

> ID：14256323
> 
> 赞同：0
> 
> 时间：2013-01-10T10:58:29.217
> 
> 标签：batch-file, console, cmd

我需要创建一个批处理文件，它将运行一个程序（已在 C#.Net 中创建），并将文本文件的路径作为输入。

不太清楚，如何实现这一点。

到目前为止，我有以下命令工作，

```
C:\>Folder Path to executable>xxxx.exe -console 
```

-console 是我在控制台模式下运行该程序的预定义命令参数。

从控制台运行程序之前的部分，使用 -console，与硬编码文件路径完美配合。但是，我想为用户提供他们想要的文件路径并为同一命令创建批处理文件的功能。每次用户都可以使用新的文本文件路径更新批处理文件并简单地运行它。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T22:13:47.290

你只是想使用`-console`参数吗？您还想传入其他参数吗？

如果只需要片段中的内容，请将以下内容保存到批处理文件中。（例如 StartMyProgram.bat）

```
start "C:\Folder path to executable\xxxx.exe" -console 
```

请参阅`start /?`以获取帮助和更多选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T21:41:24.183

您需要添加`%~1`到您的脚本：`C:\Path\to\executable\xxxx.exe -console %~1`

现在你可以这样称呼它：`StartMyApp.cmd C:\Docs\readme.txt`

`%~1`包含文本文件的完整路径。您还可以确保仅将文本文件传递给您的应用程序：

```
if "%~x1"==".txt" (
    C:\Path\to\executable\xxxx.exe -console %~1
) else (
    echo Not a textfile! & pause
) 
```

# jquery - jQuery 只选择 div 中的文本

> ID：14256324
> 
> 赞同：1
> 
> 时间：2013-01-10T10:58:30.923
> 
> 标签：jquery

有没有一种简洁的方法可以使用 jQuery 获取 div 中的文本，其中也有子元素？

例如 - 我将如何从下面的 html 中提取“一些文本”：

```
<div id="mydiv">
   <img src="...
   Some text
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:00:35.847

```
var text = $("#mydiv")
               .clone()    //clone the element
               .children() //select all the children
               .remove()   //remove all the children
               .end()      //go back to selected element
               .text();    //get the text of element 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:04:09.020

我试过你的例子

`$('#mydiv').text();`

对我来说效果很好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T11:27:52.733

对任何元素使用 .text() 函数将提取该标签内的文本

```
$("#elementname").text(); will work 
```

这是示例 [演示](http://jsfiddle.net/XnN7w/)

# c# - 如何访问UserControl的UserControl下的控件

> ID：14256325
> 
> 赞同：0
> 
> 时间：2013-01-10T10:58:31.557
> 
> 标签：c#

我有一个由几个父 UserControls 构建的主页，其中一些父 UserControls 是由多个子 UserControls 构建的。

目前我面临的问题是，我需要从主页访问 RadioButtonList，并且特定的 RadioButtonList 位于子 UserControl 中。

主页包含父用户控件。

父用户控件包含子用户控件。

Child Usercontrol 包含一个 RadioButtonList。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:05:59.587

向您的自定义用户控件添加一个属性以公开内部控件，如下所示：

```
public RadioButtonList RadioButtons { 
  get { return _radioButtons; }
} 
```

相应地命名实例的位置`_radioButtons`。

您可以在层次结构中一直执行此操作，尽管它会因深度复合结构而变得混乱。

# json - AFNetworking：将 AFJSONRequestOperation 与 UTF8 文件一起使用

> ID：14256326
> 
> 赞同：0
> 
> 时间：2013-01-10T10:58:36.220
> 
> 标签：json, utf-8, character-encoding, afnetworking

我正在尝试使用 AFNetworking 异步获取 JSON。

我在 UTF8 中有一个 json 文件编码，AFJSONRequestOperation 用 UTF8 代码返回我的字典：

```
éphémère   -->   \U00c3\U00a9ph\U00c3\U00a9m\U00c3\U00a8re 
```

有没有办法让 UTF8 与 AFJSONRequestOperation 一起工作？

使用 AFJSONRequestOperation 存在第二个问题：他无法使用 BOM 读取 UTF8 文件。

这是我的代码：

```
NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];
    [AFJSONRequestOperation addAcceptableContentTypes:[NSSet setWithObject:@"text/plain"]];
    AFJSONRequestOperation *operation = [AFJSONRequestOperation
                                         JSONRequestOperationWithRequest:request
                                         success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON)
                                         {

                                             NSLog(@"JSON: %@", JSON);
                                         } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON)
                                         {
                                             NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);

                                         }];
    [operation start]; 
```

在此之前我使用的是 JSONKit，它工作得很好（字符集 + BOM）！但我需要进行异步调用。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-25T11:01:17.150

这是 NSLog 的问题，您的 JSON 是有效的，您可以在其中检索键的值并查看其有效字符。

我使用此代码使我的响应 JSON 更具可读性：

```
-(NSString*)stringByReplacingUnicodePoint:(id)jsonObj
{
    NSData *data = [NSJSONSerialization dataWithJSONObject:jsonObj options:0 error:nil];
    NSString *result = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    return result;
}

-(void)networkResponse:(id)JSON
{
    NSLog(@"JSON: %@", [self stringByReplacingUnicodePoint: JSON]);
} 
```

# apache - 在 apache 网络服务器上使用 Node.js socket.io 推送通知

> ID：14256330
> 
> 赞同：1
> 
> 时间：2013-01-10T10:58:48.980
> 
> 标签：apache, node.js, push-notification, socket.io, push

我试图了解所有推送通知的工作原理。我试图对推送技术进行一些测试，但到目前为止我失败了。

基本假设是：
1）使用 Apache web-server 作为主要应用程序 web-server（强制性，因为我们所有的代码都使用它）
2）node.js 技术中的跨浏览器推送通知服务器（提供 socket.io，因为它是跨浏览器）。

到目前为止我失败了，这是我的代码（p1.html）：

> `<!doctype html>`
> `<html>`
> `<head>`
> 
> > `<meta charset="UTF-8">`
> > `<title>P1</title>`
> > `</head>`
> > `<body>`
> > 
> > > `<h1>P1</h1>`
> > > `<section id="content"></section>`
> > > `<script src="/socket.io.js"></script> <!--socket.io-->`
> > > `<script src="/socket.js"></script> <!--socket.io-client-->`
> > > `<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>`
> > > `<script>`
> > > 
> > > > `var socket = io.connect('http://localhost:8080');`
> > > > 
> > > > > `socket.on('notification', function (data) {`
> > > > > `$('#content').append(data.message + '<br>')`
> > > > 
> > > > `});`
> > > 
> > > `</script>`
> > 
> > `</body>`
> 
> `</html>`

和我的服务器脚本（p1.js）：

> `var app = require('http').createServer(handler)`
> `, io = require('socket.io').listen(app)`
> `, url = require('url')`
> `app.listen(8080);`
> 
> `console.log("creating a connection");`
> `io.sockets.on( 'connection', function ( socket ) {`
> 
> > `console.log("runing time");`
> > `sendTimeMessage(socket);`
> > `});`
> 
> `function sendTimeMessage(socket){`
> 
> > `console.log("in time");`
> > `var time= new Date().getTime();`
> > `console.log(time);`
> > `socket.volatile.emit( 'notification' , time );`
> > `setTimeout(sendTimeMessage, 5000);`
> > `}`
> > 
> > `function handler (req, res) {`
> > `res.writeHead(200, {'Content-Type': 'text/plain'});`
> > `res.end("");`
> > `}`
> 
> `function sendMessage(message) {`
> 
> > `io.sockets.emit('notification', {'message': message});`
> > `}`

*   对于示例，我将 IP 更改为本地主机，所以我希望语法没有错误。
*   当我运行时，Apache Web 服务器是显示数据的服务器，其想法是让 socket-io 更新几个字段。

当前状态：
1\. 如果我不添加 socket.io-client js 文件，我会得到 socket.io-client 的引用错误
2\. 如果我添加了 socket.io-client，我会得到“ReferenceError: require is not defined [打破此错误] 'undefined' != typeof io ? io : module.exports

我真的需要帮助来理解它，并让它发挥作用。我也对替代解决方案持开放态度，我真的需要帮助才能完成这项工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:34:52.263

好的，在 IRC 上的人的巨大帮助下，我部分解决了这个问题，我创建了一个：1）通过 Apache 在端口 80 上的 HTML 2）实时通知服务通过端口 8080 更新我的 HTML

（从函数到达的值可能仍然存在代码问题，导致它没有完全调试）

p1.html（客户端）

> `<!doctype html>`
> `<html>`
> 
> > `<head>`
> > 
> > > `<meta charset="UTF-8">`
> > > `</head>`
> > > `<body>`
> > > `<section id="content"></section>`
> > > `<script src="/node_modules/socket.io-client/dist/socket.io.js"></script>`
> > > `<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>`
> > > `<script>`
> > > 
> > > > `var socket = io.connect('http://10.10.10.1:8080');`
> > > > 
> > > > > `socket.on('notification', function (from,msg) {`
> > > > > 
> > > > > > `$('#content').append(msg.message + '<br>')`
> > > > 
> > > > `});`
> > > 
> > > `</script>`
> > 
> > `</body>`
> 
> `</html>`

p1.js（服务）

> `var io = require('socket.io').listen(8080)`
> `console.log("creating a connection");`
> `io.sockets.on( 'connection', function ( socket ) {`
> 
> > `console.log("runing time");`
> > `var oldtime= new Date().getTime();`
> > `while (1){`
> > 
> > > `var newtime= new Date().getTime();`
> > > `if (newtime%5323==0 && newtime != oldtime){`
> > > 
> > > > `oldtime = newtime;`
> > > > `console.log(newtime);`
> > > > `socket.emit( 'notification' , {'message': "the time is - " + newtime} );`
> > > 
> > > `}`
> > 
> > `}`
> 
> `});`

请享用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T11:50:41.360

工作示例，您想要实现的目标。第一个错误是客户端的javascript路径错误，正确的是/socket.io/socket.io.js。第二个错误是使用了不存在的 socket.volatile 。

```
var app = require('http').createServer(handler)
, io = require('socket.io').listen(app)
, url = require('url')

console.log("creating a connection");

io.sockets.on( 'connection', function ( socket ) {
  console.log("runing time");
  sendTimeMessage(socket);
});

function sendTimeMessage(socket){
  console.log("in time");
  var now= new Date().getTime();
  socket.emit('notification', {'message': now});
  setTimeout(function() {
    socket.emit('notification', {'message': "after 5s"});
  },5000);
}

function handler (req, res) {
  res.writeHead(200, {'Content-Type': 'text/html'});
  res.end("<html><script src=\"/socket.io/socket.io.js\"></script> <!--socket.io--><script>io.connect().on('notification', function (data) {console.log(data)});</script></html>");
}

app.listen(8080); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-31T11:53:41.907

谢谢#yanger，您的代码帮助了我。

我想添加评论。但我还不能使用评论。

就我而言，我想发出实时警报。我使用 80 端口 Web 服务器和 81 端口报警服务器。

所以我只使用这段代码。（客户端.js）

```
var socket = io.connect(':81'); 
```

它完全有效。我希望有人会阅读这篇文章并获得帮助。

# c# - 如何转换这些类似类的实例？

> ID：14256332
> 
> 赞同：0
> 
> 时间：2013-01-10T10:58:51.783
> 
> 标签：c#, casting

我有两个派生自相互类 A 的类，其中包含一些属性（主要是字符串和整数）。B 类是包含附加属性的不同类。更确切地说，

```
public class A1 : A {
    private B _bee;
    public B Bee {
        get { return _bee;}
        set { _bee = value;}
    }
}

public class A2 : A {
    private List<B> _beeList;
    public List<B> BeeList {
        get { return _beeList;}
        set { _beeList = value;}
    }
} 
```

现在，给定一个 A1 的实例，我怎样才能使 A2 的实例包含相同的信息（即“A”部分的属性和“B”的实例）。我尝试了以下方法 - 我希望它可以工作，但知道它不会...... - （让我用'一个'和'两个'来调用我的 A1 和 A2 实例）：

```
A _a = (A)one; // This obv works
B _b = one.Bee; 

A2 _a2 = (A2)_a; // Threw away the Bee - information, so should work imo
_a2.BeeList.Add(_b); 
```

那么如何在不手动填充 A 中的所有属性的情况下做到这一点呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:01:28.333

尝试使用[自动映射](http://automapper.org/)器。

automapper 使您能够将一个类的属性复制到另一个类，而无需编写太多代码。

前任：

```
Mapper.CreateMap<X, Y>();    
Y y = Mapper.Map<X, Y>(x); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T11:16:15.847

```
 using System.Reflection;  

  private void Convert(A1 _a1, A2 _a2)
    {
        foreach(PropertyInfo pi in typeof(A).GetProperties())
        {
            pi.SetValue(_a2,
                pi.GetValue(_a1, null)
                            , null);
        }
        _a2.BeeList.Add(_a1.Bee);
    } 
```

这似乎对我有用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T11:11:17.990

[Automapper](http://automapper.codeplex.com/)配置如下所示：

```
Mapper.CreateMap<A1, A2>()
      .ForMember(a2 => a2.BeeList, ctx => ctx.MapFrom(a1 => new List<B>{a1.Bee}));

A a1Object = new A1{Bee = new B()};

A2 a2Object = Mapper.Map<A2>(a1Object); 
```

# jquery - 如何阻止 JqGrid 重新加载

> ID：14256342
> 
> 赞同：0
> 
> 时间：2013-01-10T10:59:12.850
> 
> 标签：jquery, jqgrid

我需要在 jqgrid 中的 onclickonPgButtons 上保存数据，保存数据后需要转到下一行/上一行。下面的函数是在 Edit Form 的 OnClickPgButton 函数上编写的。

```
 jQuery("#table").jqGrid('navGrid', '#pager', { search: false, refresh: false, del: false, add: false, cloneToTop: true }, { height: editFormheight, width: editFormwidth, reloadAfterSubmit: true, closeAfterEdit: true, recreateForm: true, cloneToTop: true,
    onclickPgButtons: function (whichbutton, formid, rowid) { ModificationDataSave(whichbutton, formid, rowid); $("#edithdtable").stop(); }
});
function ModificationDataSave(whichbutton, formid, rowid) {

if ($("#" + $("#PId").val()).closest("td").text().trim() != $("#Name").val()) {
    if (confirm('There is some unsaved data. Would you like to save?')) {
        $("#sData").trigger("click");
    }
    else {
        $("#edithdtable").stop();
    }
} 
```

}

我的问题是保存数据后，我需要在编辑表单中显示下一行/上一行。

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:04:12.270

如果我理解正确您的问题，您应该`false`从回调中返回`onclickPgButtons`：

```
onclickPgButtons: function (whichbutton, formid, rowid) {
    if (...) { // do some tests
        return false;
    }
} 
```

**更新**：如果您不需要*在提交*结果时重新加载网格，您只需使用`reloadAfterSubmit: false`表单编辑选项（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing#properties)）。

# oracle10g - Oracle 10g 中的非活动 SYSMAN 会话过多

> ID：14256346
> 
> 赞同：0
> 
> 时间：2013-01-10T10:59:29.560
> 
> 标签：oracle10g

我有一个新创建的 Oracle 10g 数据库实例。在本例中，我从同一 Oracle 服务器导入了一个较旧的转储。导入后，当我启动服务器时，我注意到用户无法连接到数据库。

在监视会话时，有太多不活动的 SYSMAN 会话，并且计数每分钟都在增加。

我正在尝试了解此问题的根本原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:19:13.060

确定了根本原因并解决了问题。对于数据库实例，企业管理器数据库控制正在运行。SYSMAN 在企业管理器数据库控制中等待某些东西。

关闭 Enterprise Manager Database Control 后，问题就解决了，SYSMAN 会话数正常。

停止 Enterprise Manager Database Control 的命令：

```
./emctl stop dbconsole 
```

# jquery - jQuery：分层标签用户界面

> ID：14256352
> 
> 赞同：0
> 
> 时间：2013-01-10T10:59:47.143
> 
> 标签：jquery, html, css, jquery-ui

我想使用 jQuery 创建层次标签 ui，但我的代码结果显示第二个层次不显示。

[我的结果在这里](http://jsfiddle.net/jsshinya/fSnTm/)

这是我的代码

HTML

```
<div class="itemListContainer">
<ul id="itemListNav">
    <li class="current"><a class="heading active" href="#sec1">Section 1</a>
        <ul id="secMenus">
            <li><a href="#list1">List 1</a></li>
            <li><a href="#list2">List 2</a></li>
            <li><a href="#list3">List 3</a></li>
        </ul>
    </li>

    <li><a class="heading" href="#sec2">Section 2</a>
        <ul id="secMenus">
            <li>List 1</li>
            <li>List 2</li>
            <li>List 3</li>
        </ul>
    </li>

    <li><a class="heading" href="#sec3">Section 3</a>
        <ul id="secMenus">
            <li>List 1</li>
            <li>List 2</li>
            <li>List 3</li>
        </ul>
    </li>

    <li><a class="heading" href="#sec4">Section 4</a>
        <ul id="secMenus">
            <li>List 1</li>
            <li>List 2</li>
            <li>List 3</li>
        </ul>
    </li>
</ul><!-- end #itmeListNav -->

<div class="itemList">
    <div id="sec1">
        <p>text1</p>
        <div id="list1">
            text list1
        </div>
        <div id="list2">
            text list2
        </div>
        <div id="list3">
            text list3
        </div>
    </div>
    <div id="sec2">
        <p>text2</p>
    </div>
    <div id="sec3">
        <p>text3</p>
    </div>
    <div id="sec4">
        <p>text4</p>
    </div>
</div><!-- end .itemList -->
    <div class="giftsSpecificArea">

    </div><!-- end .giftsSpecificArea --> 
```

CSS

```
/* General Utilities */
/* -------------------------------------------------------------------------*/
/* Reset */
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center, dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed,
figure, figcaption, footer, header, hgroup,
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
  font: inherit;
  font-size: 100%;
  vertical-align: baseline;
}

html {
  line-height: 1;
}

ol, ul {
  list-style: none;
}

table {
  border-collapse: collapse;
  border-spacing: 0;
}

caption, th, td {
  text-align: left;
  font-weight: normal;
  vertical-align: middle;
}

q, blockquote {
  quotes: none;
}

q:before, q:after, blockquote:before, blockquote:after {
  content: "";
  content: none;
}

a img {
  border: none;
}

article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section, summary {
  display: block;
}

/* itemListContainer */
.itemListContainer {
    width: 100%;
    display: inline;
}

#itemListNav {
    float: left;
    width: 25%;
    padding: .2em .1em .2em .2em;
    background: #ccc;
    border-radius: 4px 0 0 4px;
    border-right: 1px solid gray;
    margin-right: 1.69492%;
}

.itemList {
    float: left;
    width: 68.30508%;
    border-left: 1px solid gray;
    border-radius: 0;
} 
```

JS

```
$(document).ready(function() {

$("ul#itemListNav li ul:not(:first)").hide(); // display only the first menus groups

/* control itemListNav */
$( "ul#itemListNav a.heading" ).click(function() {
    $(this).css('outline', 'none');
    if($(this).parent().hasClass('current')) {
        $(this).siblings('ul').slideUp('slow', function() {
            $(this).parent().removeClass('current');
        });
    } else {
        $('ul#itemListNav li.current ul').slideUp('slow', function() {
            $(this).parent().removeClass('current');
        });
        $(this).siblings('ul').slideToggle('slow', function() {
        $(this).parent().toggleClass('current');
        });
    }
    return false;
});

// 1st hierarchical contents displays at itemList  
$(".itemList div:not("+$("ul#itemListNav li a.active").attr("href")+")").hide(); // display only the first menus groups contents

    $("ul#itemListNav li a").click(function() {
        $("ul#itemListNav li a").removeClass("active");
        $(this).addClass("active");
        $(".itemList div").hide();
        $($(this).attr("href")).show();
        return false;
    }); 
```

// 第二层的内容显示在 itemList $(".itemList div#sec1 div:not("+$("ul#secMenus li a.active").attr("href")+")").hide( );

```
 $("ul#secMenus li a").click(function() {
        $("ul#secMenus li a").removeClass("active");
        $(this).addClass("active");
        $("#sec1 div").hide();
        $($(this).attr("href")).show();
        return false;
    }); 
```

}); //结束脚本

请给我任何提示。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T03:46:58.883

代替

```
<div id="sec1">
  <p>text1</p>
  <div id="list1">text list1</div>
  <div id="list2">text list2</div>
  <div id="list3">text list3</div>
</div> 
```

到

```
<div id="sec1">
  <p>text1</p>
 </div>
 <div id="list1">text list1</div>
 <div id="list2">text list2</div>
 <div id="list3">text list3</div> 
```

因为，当您隐藏父 div 时，它不会显示内部 div。

# java - 二维坐标系：数学与屏幕

> ID：14256357
> 
> 赞同：0
> 
> 时间：2013-01-10T10:59:59.217
> 
> 标签：java, computational-geometry, coordinate-systems

我们正在开发一个在 2D 空间中进行计算的库。然而，二维坐标系的“自然”解释是增加 Y 值表示位于更高的点，而`awt`坐标则相反。这反映在`Rectangle(10,100).maxY()`返回 0，而数学家希望它返回 100。

我们如何才能正确处理这种差异？是否有另一个 java 库来进行几何计算？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:07:14.390

你应该在问之前尝试一下。以下代码打印100，所以没有问题:)

```
import java.awt.*;

public class A {
    public static void main(String[] args) {
        double maxX = new Rectangle(10, 100).getMaxY();
        System.out.println("A::main: maxX = " + maxX);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:06:56.137

我发现它`maxY`返回“最大的 y 坐标”，这正是直观的行为。我很困惑：只有在实际将其绘制到屏幕上时，对象才有“左上角”和“右下角”只是可视化时的约定。

# sql-server - 无法弄清楚存储过程将数据保存在哪里

> ID：14256362
> 
> 赞同：1
> 
> 时间：2013-01-10T11:00:10.400
> 
> 标签：sql-server, tsql, stored-procedures

在 Transact-SQL 和存储过程方面不那么强。我想知道该程序将数据保存在哪里？

```
ALTER PROCEDURE [dbo].[InsurerCascoConditionsSave]
     @InsurerID int
    ,@Data xml
AS
BEGIN

    declare @DocHandle int
    EXEC sp_xml_preparedocument @DocHandle OUTPUT, @Data

    MERGE InsurerCascoConditions AS target
    USING (SELECT InsurerConditionID, @InsurerID, CascoConditionID, Value
            FROM OPENXML (@DocHandle, '/DocumentElement/Table1', 2)
            WITH (InsurerConditionID int, CascoConditionID int, Value nvarchar(max)))
        AS source (InsurerConditionID, InsurerID, CascoConditionID, Value)
    ON (target.ID = isnull(source.InsurerConditionID, 0))
    WHEN MATCHED THEN 
        UPDATE SET Value = source.Value
    WHEN NOT MATCHED THEN   
        INSERT (InsurerID, CascoConditionID, Value)
        VALUES (source.InsurerID, source.CascoConditionID, source.Value);

    EXEC sp_xml_removedocument @DocHandle
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:01:56.923

到`InsurerCascoConditions`餐桌。

它是通过声明完成的，你可以在[MSDN](http://technet.microsoft.com/en-us/library/bb510625.aspx)`MERGE`上阅读它。一般来说，它会根据条件制造或或。它可以很容易地从语法中读取。`INSERT``UPDATE``DELETE`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:09:13.423

正如@psur 所说， InsurerCascoConditions 是要修改的表。MERGE 允许您将 INSERT/UPDATE/DELETE 作为单个语句的一部分执行，而不是执行 3 个单独的语句。

打破你的陈述......

`MERGE InsurerCascoConditions AS target`-- 这是此操作的目标表

`USING`..... - 这是数据的来源

`ON`.... -- 定义源数据与目标数据的关系（例如，在 ID 上匹配）

`WHEN MATCHED THEN UPDATE`.... -- 如果 SOURCE 中的一条记录根据上述`ON`条件匹配 TARGET 中的一条记录，这将定义匹配的目标记录中的哪些字段，以使用匹配的源记录中的哪些字段进行更新

`WHEN NOT MATCHED THEN INSERT`.... -- 如果 SOURCE 中的记录与 TARGET 中的记录不匹配，则基于上述`ON`条件，这会在目标表中插入新行

# javascript - 滚动时如何获取webview的垂直滚动位置

> ID：14256374
> 
> 赞同：0
> 
> 时间：2013-01-10T11:00:57.390
> 
> 标签：javascript, android, webview, scroll, android-webview

我正在 webView 中制作某种图书阅读器。我使用了 JavaScript，它`<img>`通过 for 循环动态创建标签。查看代码的 for 循环，每个 img 标签都加载了来自 URL 的不同图像。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    wv = (WebView) findViewById(R.id.webView1);
    wv.getSettings().setJavaScriptEnabled(true);

    progressDialog = ProgressDialog.show(MainActivity.this,
            "Loading Book...!", "Please Wait");

    String htnlString = "<!DOCTYPE html><html><body style = \"text-align:center\"><script>var out = '';for (var counter = 1; counter <= 100; counter++){    out += '<img src=\"http://shiaislamicbooks.com/books_snaps/UR335/'+counter+'.jpg\"alt=\"Page No:'+counter+'\" width=\"100%\" />';}document.write(out);</script></body></html>";

    wv.setWebViewClient(new WebViewClient() {

        @Override
        public void onPageFinished(WebView view, String url) {
            progressDialog.dismiss();
            Toast.makeText(MainActivity.this, "Completed",
                    Toast.LENGTH_SHORT).show();
            super.onPageFinished(view, url);
        }

    });

    wv.loadDataWithBaseURL(null, htnlString, "text/html", "UTF-8", null);
} 
```

看看`htnlString`：

*   现在我想在 textView 中显示一本书的页面信息。这意味着，在滚动 webview 时，textView 应该更新 txtPage。
*   这`scrollTo(x,y)`是一些有用的，但我想要 webview 的滚动侦听器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:03:55.953

```
WebView webview;
yPos = webview.getScrollY();
xPos=webview.getScrollX(); 
```

# java - 在 JBoss 7 中添加备用 LDAP 服务器

> ID：14256375
> 
> 赞同：0
> 
> 时间：2013-01-10T11:00:58.230
> 
> 标签：java, jboss, ldap, jboss7.x

我已经使用 LDAP 在我的 JBoss 7.1 服务器中设置了一个登录模块，如下所示：

```
<login-module code="org.jboss.security.auth.spi.LdapLoginModule" flag="required">
    <module-option name="java.naming.factory.initial" value="com.sun.jndi.ldap.LdapCtxFactory"/>
    <module-option name="java.naming.provider.url" value="ldap://ldap.domain.com:port"/>
    <module-option name="java.naming.security.authentication" value="simple"/>
    <module-option name="principalDNPrefix" value="uid="/>
    <module-option name="principalDNSuffix" value=",ou=peoples,dc=domain,dc=com"/>
    <module-option name="searchTimeLimit" value="5000"/>
    <module-option name="searchScope" value="ONELEVEL"/>
</login-module> 
```

但是，有时，我公司维护的这个 LDAP 服务器会崩溃，我想在我的配置中指定一个备用 LDAP 服务器（存在）。

那可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T23:05:27.780

您*可以*使用空格分隔的列表：

IE：

```
<module-option name="java.naming.provider.url" value="ldap://ldap.domain.com:port ldap://ldap2.domain.com:port"/> 
```

请参阅：[JNDI LDAP 和 LDAPS URL](http://docs.oracle.com/javase/jndi/tutorial/ldap/misc/url.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:44:46.713

考虑使用 LDAP 目录代理服务器来管理 LDAP 服务的高可用性。这种方法消除了应用程序服务器对需要了解多个特定 IP 地址或主机名的依赖性，从而使配置更简单，更易于使用、维护和操作。

# matlab - 如图所示，如何绘制带有误差条的分组条形图？

> ID：14256383
> 
> 赞同：5
> 
> 时间：2013-01-10T11:01:24.593
> 
> 标签：matlab, bar-chart, errorbar

我正在尝试绘制一个分组条形图，如下图所示。我找到了 errorbar() 函数，但到目前为止我无法弄清楚如何制作它。

这是我的代码。

```
Y = [0.9322225 0.86225 0.8973;
     0.8953635 0.862868 0.8099605;
     0.7473585 0.675698 0.80484];

bar(Y, 'grouped')
bar(Y, 'BarWidth', 0.5);
set(gca,'XTickLabel',{'', 'ML', '',  'HSV', '', 'NCC'}); 
```

信用：这个数字来自 Sanin 等人的工作。“阴影检测：近期方法的调查和比较评估。”

![条形图](../Images/5bd3b0bea4949a1bf418d1601d89d6da.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-19T10:28:07.793

![在此处输入图像描述](../Images/f3cec01bae63330771139c91ae26f80a.png)![在此处输入图像描述](../Images/9c7ec50ac33350f65b1b386ddbc14195.png) ！[

```
clc;
close all;

%Suppose you have the following data for five different strains across 4
%different experimental conditions (Conditions A,B,C,D, from left to right)

Strain1_Mean=[1.0 1.5 2.0 1.5]; % data
Strain2_Mean=[2.0 2.5 2.0 2.5]; % data
Strain3_Mean=[1.0 0.5 1.0 3.5]; % data
Strain4_Mean=[1.2 2.5 1.0 1.5]; % data
Strain5_Mean=[2.1 1.3 2.0 2.5]; % data

Strain1_std=[0.15 1.3 0.5 0.4];    %errors in data
Strain2_std=[1.0 1.5 0.2 0.5];     %errors in data
Strain3_std=[1.3 0.4 0.3 0.5];     %errors in data
Strain4_std=[0.13 1.36 0.17 0.45]; %errors in data
Strain5_std=[1.8 1.1 0.25 0.38];   %errors in data

% for asymmetric errors:

barwitherr(cat(3,zeros(4,5),[Strain1_std' Strain2_std' Strain3_std'...
    Strain4_std' Strain5_std']),[1 2 3 4],[Strain1_Mean' Strain2_Mean'...
    Strain3_Mean' Strain4_Mean' Strain5_Mean'],'LineWidth',2,...
    'BarWidth',0.8)

%for symmetric errors:

% barwitherr([Strain1_std' Strain2_std' Strain3_std' Strain4_std'...
%    Strain5_std'], [1 2 3 4],[Strain1_Mean' Strain2_Mean'...
%    Strain3_Mean' Strain4_Mean' Strain5_Mean']) 

set(gca,'XTickLabel',{'Group A','Group B','Group C','Group D'})
   legend('Parameter 1','Parameter 2','Parameter 3','Parameter 4',...
       'Parameter 5')
    ylabel('Value')
    grid on
   colormap summer

if you want to add more data sets, change zeros(4,5) to zeros(4,...) 6,7,8... 

I don't know how implement circles and squares like in example, if somebody can do it, you are welcome to improve :)][3] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-10T13:29:25.137

我不是 100% 如何复制该图表，但也许这会帮助您入门。

我在文件交换中找到了这个：http: [//www.mathworks.com/matlabcentral/fileexchange/30639-bar-chart-with-error-bars/content/barwitherr.m](http://www.mathworks.com/matlabcentral/fileexchange/30639-bar-chart-with-error-bars/content/barwitherr.m)，试试绘制条形图带有误差线。它允许不对称的误差线，我认为如果你想让标记不同（比如你的例子中的正方形和圆形），那么你需要在链接的代码中更改这一行：`errorbar(mean(x,1),values(xOrder,col),lowerErrors(xOrder,col), upperErrors(xOrder, col), '.k')`

类似于：

```
errorbar(mean(x,1),values(xOrder,col),lowerErrors(xOrder,col), 'ok');
errorbar(mean(x,1),values(xOrder,col), upperErrors(xOrder, col), '*k') 
```

此外，如果您希望所有三个组都有标签，请尝试`set(gca,'XTickLabel',{'ML', 'HSV', 'NCC'});`

还检查`colormap(summer)`和`help legend`

# custom-view - 在 SP2013 文档集中使用自定义视图

> ID：14256385
> 
> 赞同：2
> 
> 时间：2013-01-10T11:01:27.610
> 
> 标签：custom-view, sharepoint-2013, document-set

在带有库中文档集内容类型的 sp2010 中，我可以在库中有一个默认视图，显示我的文档集内容类型，并且在内容类型的欢迎页面上，我可以定义一个不同的视图，显示文档中的详细信息放...

在 sp2013 中，我看不到这样做的机制。文档集欢迎页面包含一个不允许我设置视图的文档集内容 Web 部件，它采用库的默认视图...有没有人想出如何做到这一点？

我没有使用 Visual Studio 的权限（或技能），但对 sp-designer 和 infopath 非常熟悉，尽管我希望它可以通过 SP UI 来实现

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-10T02:17:50.920

在文档库中创建您的视图，然后在您的库设置中，单击您的文档集内容类型，然后选择文档集设置。

在此页面上，您应该会看到“欢迎页面视图”。您可以从下拉框中选择您的视图。

# java - 快速开发基于 GWT-EJB 的应用程序的方法

> ID：14256387
> 
> 赞同：1
> 
> 时间：2013-01-10T11:01:29.660
> 
> 标签：java, gwt, ejb

我正在寻找开发 GWT-EJB 应用程序的快速方法。

一些要求：

1.  我想在开发过程中使用 gwt dev-mode。
2.  我的 gwt-servlet 必须调用 EJB 的方法（这里的问题是 GWT 的默认 servlet-container 是 Jetty - 与 Java EE 不兼容）。
3.  EJB 的快速发展。

唯一的方法是将 Glassfish（任何应用程序服务器）配置为 GWT 开发模式应用程序服务器？

PS我有多模块Maven项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:07:52.457

将您的 GWT 应用程序开发/构建/组装为 WAR，使用相关 EJB 打包到 EAR 中，并通过 JNDI 查找/调用它们。

干杯，

# jquery - jQuery同位素复选框过滤器，如果全部取消选中则不显示任何项目

> ID：14256390
> 
> 赞同：6
> 
> 时间：2013-01-10T11:01:43.333
> 
> 标签：jquery, checkbox, jquery-isotope

这是关于过滤 jQuery 同位素项目选择器的输入复选框。

[请参阅此处](http://jsfiddle.net/xUU99/3/)的演示，加载页面时会检查复选框。但是，当用户未选中所有内容时，我偶然发现了这个问题，它只会显示所有`.items`内容而不是空容器。

```
$checkboxes.change(function(){
    var filters = [];
    // get checked checkboxes values                
    $checkboxes.filter(':checked').each(function(){
    filters.push( this.value );
    });
    // ['.red', '.blue'] -> '.red, .blue'
    filters = filters.join(', ');
    $container.isotope({ filter: filters });
}); 
```

非常感谢提前，干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T03:07:25.213

同位素库[按预期工作](http://isotope.metafizzy.co/docs/options.html#filter)。

> filter - 设置过滤器，显示匹配选择器的项目元素，并隐藏不匹配的元素。
> 
> 值 '*' 或 ''（空字符串）：**显示所有项目元素**

如果您不想要这种行为，而是希望在选择每个过滤器时不显示任何元素，您应该将过滤器字符串更改为不存在的内容，例如

```
if(filters.length == 0){
    filters = 'purplemonkyeydishwasher';
}
else{
    filters = filters.join(', ');
}
$container.isotope({ filter: filters }); 
```

这将具有您想要的行为。我[更新了小提琴。](http://jsfiddle.net/Danack/xUU99/4/)它现在选择所有过滤器时隐藏所有元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T02:30:43.123

你可以简单地这样做：

```
$container.isotope({ filter: ( filters == null || filters.length == 0 ) ? 'default' : filters });` 
```

哪里`default`总是不用。查看演示[http://jsfiddle.net/G6LRL/](http://jsfiddle.net/G6LRL/)

# function - 正弦函数的八度 fft

> ID：14256396
> 
> 赞同：1
> 
> 时间：2013-01-10T11:02:08.217
> 
> 标签：function, matlab, octave, trigonometry

我需要在 sinus 上使用 FFT 函数。

这是我的窦功能：

```
octave:1> t=(0:1/16000:1);
octave:2> A=2;
octave:3> x=A*sin(2*pi*80*t); 
```

这就是我尝试制作fft的方式：

```
octave:60> l=length(x);
octave:61> k=fft(x,l); 
```

它让我三角哈哈..我怎么能正确地做到这一点？

@edit screen，它看起来不错吗？我可以以某种方式改进它吗？ ![在此处输入图像描述](../Images/4ca4d8e3db243736f85ea703e975e447.png)

@edit2 我可以改进它，让它看起来更好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T11:16:41.097

从屏幕截图来看，一切都很好。

1.  正弦函数的 FFT 幅度是两个尖峰状物体。你所展示的是正确的。

2.  FFT 是一种产生类似于连续傅里叶变换结果的算法，但在一些方面有所不同。除了离散之外，Matlab 的 FFT 还会扭曲这些值。这可以用 撤消`fftshift(k)`。

# database-design - 基于数据库设计的类设计

> ID：14256401
> 
> 赞同：-1
> 
> 时间：2013-01-10T11:02:17.417
> 
> 标签：database-design, class-design, entities

我的 ojt 项目有一点问题。我得到了一个数据库设计，必须为它做一个类设计。但是，我从未根据现有数据库设计过类，所以我对应该设计哪些类感到困惑。

这是对正在发生的事情的一些解释：

db 中的实体：申请人、应用程序、技能、报价、客户。

客户（a 公司）向 b 公司（我在哪里做我的 ojt）发送询问。公司 b 有一个申请人池，所有从他们那里找工作的人的申请都集中在这里。然后，他们根据 a 公司所需的技能寻找合适的申请人。如果匹配成功并且公司 a 对客户感到满意，那么他就会得到一份工作。如果没有，他将被放回池中，状态为暂停。

所以基本上我只想根据数据库设计设计1到1的类。当然，我在这里描述的实体只是整个数据库的一小部分。但这些实体是我也会设计成一个类的实体。像申请人也可以发送文件。文档存储在文件服务器上，指向它们的链接存储在数据库中。这个文档实体是我不会设计到一个类中的，因为它没有任何意义，文件只是被上传，它的属性被存储到数据库中。

我的想法是否朝着正确的方向发展？我会非常感谢一些信息或更正...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T12:51:51.697

每张桌子一节课是一个合理的起点，特别是如果您的桌子已经处于第三范式。但是，有很多地方可能与此有所不同。例如，纯关联实体不一定需要类，这取决于您计划如何对表之间的关系进行建模。

有各种现有的 ORM 框架可以为您做这种事情。您应该考虑使用这些 ORM 框架之一，而不是从空白页开始。这些框架处理*了大量*重复的苦差事，让您专注于应用程序逻辑而不是数据访问逻辑。

# android - 如何使用按钮开始和停止声音？

> ID：14256405
> 
> 赞同：0
> 
> 时间：2013-01-10T11:02:28.397
> 
> 标签：android, media-player

我的项目中有一个按钮。我想在单击按钮时>>>>开始声音，当再次单击按钮时>>>停止声音...我使用此代码但无法停止声音并一次又一次地开始...我该怎么做这个？谢谢你。

```
Button  btritm1 =  (Button) findViewById(R.id.button9991);
btritm1.setOnTouchListener(new View.OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        final MediaPlayer mp1_1 = MediaPlayer.create(MainActivity.this, R.raw.ritm1);
        if (event.getAction() == MotionEvent.ACTION_DOWN  ) 
        {
            if(mp1_1 != null && mp1_1.isPlaying() ) 
            {
                mp1_1.stop();
            }        
            else {      
                //  xritm1 = 1;
                //  snd.stop_s_ritm1(); 
                mp1_1.setLooping(true);
                mp1_1.start(); 
            }
        }  // end of if
        return false;
    }
});  // end of ontouch listener/* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:12:08.350

```
if(sound.isPlaying()){
sound.stop();
}else{
sound.reset();
sound.setDataSource(yourURL);//or InputStream etc.
    sound.prepare();
sound.start();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:22:55.577

要使用良好的做法，请将 MediaPlayer 对象声明为类变量并在 onCreate() 方法中对其进行初始化。您的问题是每次触摸您的控件时都会创建一个新的播放器对象。正如上面已经说过的，这条线

```
 final MediaPlayer mp1_1 = MediaPlayer.create(MainActivity.this, R.raw.ritm1); 
```

应该在侦听器之外。

# cloud - 云对象存储

> ID：14256408
> 
> 赞同：1
> 
> 时间：2013-01-10T11:02:39.770
> 
> 标签：cloud, rackspace-cloud, openstack, openstack-swift, cloud-storage

我希望为我的客户提供基于云的对象存储系统。为此，我需要一个能够处理多用户、多域、多租户和本地 SAN 的软件，因为不能将数据存储在 S3 或其他外部 CDN 等上。多层存储也可能是一种选择。用于访问和存储数据的多协议，例如 WebDAV 或移动设备和操作系统使用的任何其他协议。

到目前为止，我发现 Openstack 似乎对我的用例有用，但是 Openstack 只带来了原始后端 (Swift)，并且所有前端组件都必须进行编码和集成，即使基于用户的容器访问控制也不可用（在至少不在地平线中）。

有没有其他最好的免费和开源软件？您知道 Rackspace 云等类似的解决方案吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:29:51.207

将本地 SAN 用于存储可能会变得很昂贵。我不确定这是免费服务还是付费服务，但您可能需要考虑使用商品高密度存储 (www.45drives.com)。对于软件部分，除了已经提到的之外，您还可以下载 Cloudian 社区版[http://www.cloudian.com/](http://www.cloudian.com/)（免费最高 100 TB，但您可能需要支付支持费用）。最后一部分是与您的对象存储软件一起使用的应用程序。如果您的对象存储与 S3 兼容，那么应该有 300 多个应用程序可以开箱即用。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T21:48:10.100

rackspace 使用了 swift。这与 openstack 使用的相同。

他们的github在这里：

[https://github.com/rackspace](https://github.com/rackspace)

你可能会在那里找到一些有用的补充。

还可以查看 ceph。

[http://ceph.com/ceph-storage/file-system/](http://ceph.com/ceph-storage/file-system/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-14T04:16:36.010

我建议您使用[ownCloud](http://owncloud.org/)，至于存储，您可以继续使用[OpenStack Swift](http://docs.openstack.org/developer/swift/)

您将获得您正在寻找的大部分功能，它是免费和开源的。

# version-control - 学生组之间的代码共享和局域网访问权限，无需命令行

> ID：14256409
> 
> 赞同：0
> 
> 时间：2013-01-10T11:02:39.850
> 
> 标签：version-control, code-sharing

我需要一个可以安装在 windows 机器上的智能代码共享工具。它应该使学生俱乐部能够做到以下几点：

1.  通过局域网启用**EASY文件夹和文件共享，（可以在没有互联网的情况下工作）**
2.  管理个人**和组**的访问级别（读取、写入、创建、删除文件）
3.  将文件夹添加到监视列表，然后自动扫描和更新

可选： 4\. 代码比较 5\. 集成特色代码编辑器

请不要指向我只能通过键入命令工作的应用程序，学生会害怕；）

# android - 如何将视频播放为动态壁纸 android？

> ID：14256412
> 
> 赞同：18
> 
> 时间：2013-01-10T11:02:52.157
> 
> 标签：android, live-wallpaper

有人知道**`how to play .mp4 video as live wallpaper`**吗？

我搜索了很多，但找不到解决方案。我刚刚找到[了这个，](https://stackoverflow.com/questions/9307723/it-is-possible-to-video-live-wallpaper-in-android-application)但我没有从中得到任何想法。

如果您对这个概念有任何想法，请帮助我。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-11T07:44:56.267

花了 3 天后，我终于[在 eclipse 中运行了这个项目](https://github.com/frankandrobot/GLWallpaperVideoDemo)。

我正在分享这些步骤，因为它可能对其他人有所帮助：

首先，最重要的是`Your project path`不`ndk path`应该包含空格，否则在执行这些步骤时会遇到问题。我也遇到了问题，所以请删除空格（如果有）。

**例如 ：-**

> android ndk/动态壁纸

**将其替换为**

> androidndk/动态壁纸

**以下是步骤： -**

1）从[Android NDK页面](http://developer.android.com/tools/sdk/ndk/index.html)安装NDK （我用的是Ubuntu OS）

2) 安装`plugins`NDK ( [https://dl-sl.google.com/android/eclipse/](https://dl-sl.google.com/android/eclipse/) )

3）打开你的终端并转到你的项目目录路径

**例如 ：-** `/yourprojectname$`

4) 现在从您的项目目录路径中写入您的 Android NDk 路径

**例如 ：-**

```
 /home/rainc/android_setup/android-ndk-r8d/ndk-build 
```

然后按 Enter。这会给你一个`.so`文件，这意味着库文件已经生成..

你已经成功地做到了。如果您在此处遇到错误，则安装和其他步骤可能有错误。

以下链接帮助我进行了研究：

[第一的](https://stackoverflow.com/questions/9407224/how-to-install-and-build-ndk-with-eclipse)

[第二](https://stackoverflow.com/questions/4938098/ndk-build-error)

[第三](http://tools.android.com/recent/usingthendkplugin)

还要感谢 Lazy Ninja 对我的帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-10T11:13:17.513

除非您熟悉 android ndk，否则您将面临一个很好的挑战。
图书馆`ffmpeg`可以为您节省一些时间。[视频动态壁纸](http://ikaruga2.wordpress.com/2011/06/15/video-live-wallpaper-part-1/)
教程在这里。完成第 1 -4 部分。 这是项目代码的[链接](https://github.com/frankandrobot/GLWallpaperVideoDemo)。 希望它能帮助您入门。

# java - 如何区分泛型类和类型参数？

> ID：14256413
> 
> 赞同：-1
> 
> 时间：2013-01-10T11:02:57.373
> 
> 标签：java, class, generics, methods

好的，我想要一个以类的对象作为参数的方法。我怎样才能实现这个方法接受一个类的任何对象（以便该方法是通用的）？

我尝试使用类型参数，但总是收到错误消息：“意外类型，必需类，找到类型参数”。我必须使用类似的东西吗

```
Class<R> 
```

有什么好的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:06:13.170

我不确定我是否理解您的问题，但也许是这样：

```
public <T> void foo(T param) 
```

或更复杂的版本：

```
public <T> Class<? extends T> pickOne(Collection<Class<? extends T>> classes) 
```

问候莱昂

# c# - Word 自动化查找和替换不包括文本框

> ID：14256417
> 
> 赞同：6
> 
> 时间：2013-01-10T11:03:19.697
> 
> 标签：c#, ms-word, office-interop

我有一个带有文本框的word文档。当我在主文档中运行自动查找并替换其匹配项时，但在文本框中不匹配任何内容。我如何告诉查找和替换功能包括文本框。

```
Word.Range range = objDoc.Content;

object findtext = Field;
object findreplacement = Value;
object findwrap = WdFindWrap.wdFindContinue;
object findreplace = WdReplace.wdReplaceAll;

range.Find.Execute(findtext, missing, missing, missing, missing, missing, missing, findwrap, missing, findreplacement, findreplace); 
```

我怀疑我需要更改 range = objDoc.content 行。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-10T12:07:50.293

有点凌乱，但这对我有用：

```
using System.Runtime.InteropServices;
using Microsoft.Office.Interop.Word;

namespace ConsoleApplication7
{
    class Program
    {
        static void Main()
        {
            const string documentLocation = @"C:\temp\Foo.docx";
            const string findText = "Foobar";
            const string replaceText = "Woo";

            FindReplace(documentLocation, findText, replaceText);
        }

        private static void FindReplace(string documentLocation, string findText, string replaceText)
        {
            var app = new Application();
            var doc = app.Documents.Open(documentLocation);

            var range = doc.Range();

            range.Find.Execute(FindText: findText, Replace: WdReplace.wdReplaceAll, ReplaceWith: replaceText);

            var shapes = doc.Shapes;

            foreach (Shape shape in shapes)
            {
                var initialText = shape.TextFrame.TextRange.Text;
                var resultingText = initialText.Replace(findText, replaceText);
                shape.TextFrame.TextRange.Text = resultingText;
            }

            doc.Save();
            doc.Close();

            Marshal.ReleaseComObject(app);
        }
    }
} 
```

前：

![前](../Images/f31ce2c3a0b55571b29ef6670328a432.png)

后：

![后](../Images/7089602964764db7d41f0912b7a7aa42.png)

# python - Python libass 还是 VapourSynth？

> ID：14256418
> 
> 赞同：2
> 
> 时间：2013-01-10T11:03:22.123
> 
> 标签：python, pyqt4, ctypes, vapoursynth

我使用[VapourSynth](http://www.vapoursynth.com/)作为 libass 包装器，用于生成特殊 .ass 文件的应用程序的视频预览，返回的视频帧应输出到 pyqt4 的 QImage 对象。

我已经阅读了有关 get_read_ptr 的 VapourSynth 文档，他们说它是编码为 frame.format 的图像的指针，在我的情况下 frame.format 是 RGB24。我的问题是：*如何访问原始帧数据并将其发送到 QImage 对象以显示？*

这是我的代码，我对 ctypes 不太擅长：/

```
import vapoursynth as vs
# needed for stdout
import sys
from PyQt4 import QtGui
import ctypes
# create a core instance
core = vs.Core()

core.std.LoadPlugin(path=r'C:\Shared\VapourSynth\plugins\ffms2.dll')
# open a video file; ret is now a clip object
ret = core.ffms2.Source(source='Fisica.o.Chimica.S01E01.iTALiAN.WWW.ITALIA-LINK.COM .avi')

# output the clip to stdout with y4m headers (useful for x264 encoding/mplayer playback)
# ret.output(sys.stdout, y4m=True)

print(str(ret.width)+"x"+str(ret.height)+"@"+str(ret.fps_den)+"fps")
print(ret.format)

frame = ret.get_frame(10000)

data = frame.get_read_ptr(0)
print(data)
d = ctypes.pointer(data)
print(d)
print(d.contents)
print(frame.props) 
```

目前返回：

```
640x480@1fps
Format Descriptor
    Id: 3000010
    Name: YUV420P8
    Color Family: YUV
    Sample Type: Integral
    Bits Per Sample: 8
    Bytes Per Sample: 1
    Planes: 3
    Subsampling W: 1
    Subsampling H: 1

c_void_p(100597856)
<__main__.LP_c_void_p object at 0x02FD0170>
c_void_p(100597856)
<vapoursynth.VideoProps object at 0x02D78050> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T03:12:36.980

你可能会通过在 Doom9 的 VapourSynth 线程中发帖得到答案。作者很有帮助。

此外，现在还有一个用于 VS 的本机 libass 插件。奇怪的是被命名为assvapour。 [http://code.google.com/p/vapoursynth/source/browse/trunk/src/filters/assvapour/assvapour.c?spec=svn384&r=384](http://code.google.com/p/vapoursynth/source/browse/trunk/src/filters/assvapour/assvapour.c?spec=svn384&r=384)

Doom9 线程： http: [//forum.doom9.org/showthread.php? t=165771](http://forum.doom9.org/showthread.php?t=165771)

# c - 根据其他常数定义常数

> ID：14256420
> 
> 赞同：3
> 
> 时间：2013-01-10T11:03:31.547
> 
> 标签：c

抱歉，如果这个问题看起来很幼稚，但我无法在任何地方找到明确的答案。我必须根据先前定义的常量定义一个常量，例如

```
#define CONST_A 2
#define CONST_B 3
#define CONST_C CONST_A*CONST_B 
```

`CONST_A`和的实际值`CONST_B`作为defineflags提供给gcc，所以我不能只写`#define CONST_C 6`.

如果我理解正确，这将告诉预处理器替换`CONST_C`by`2*3`和 not的任何外观`6`，对吗？我主要担心性能，所以我更喜欢后者。我猜这可以通过使用`static const`而不是 preprocessor来完成`#define`。这是最好的选择吗？

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T11:05:56.453

不必担心像`2 * 3`C 中那样的常量表达式的性能。C 编译器至少 20 年来一直能够通过在编译时评估它们来消除这些表达式。

`static const`可以出于其他原因首选，例如类型安全或不必担心优先级（想想如果`CONST_A`定义为会发生什么`2+2`），但不是出于性能原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:17:29.620

C 说常量表达式可以在编译时求值，而今天任何体面的编译器都会在编译时求值常量表达式。这种编译器操作称为*常量折叠*。

> (C99, 6.6p2) “常量表达式可以在翻译期间而不是运行时进行计算，因此可以在常量可能存在的任何地方使用。”

# mysql - 具有内部连接查询的唯一结果集

> ID：14256421
> 
> 赞同：1
> 
> 时间：2013-01-10T11:03:37.247
> 
> 标签：mysql

```
SELECT 
    * 
FROM `catalog_webdesign_products` t 
INNER JOIN tbl_member_registration t1 ont.userid=t1.fld_loginid 
WHERE 1 
    AND t1.fld_member_category_level<9 
    AND t.product_img IS NOT NULL  
ORDER BY RAND() LIMIT 5 
```

在此查询中，我需要具有唯一用户 ID 的行。我也尝试过“按用户 ID 分组”，但结果集中出现了具有空值的 product_img。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:06:39.447

是的，你可以使用`GROUP BY userid`. 但是您的查询在这里看起来不对

```
 INNER JOIN tbl_member_registration t1 on t.userid=t1.fld_loginid
                                           ^------------------------space here 
```

尝试这个

```
 SELECT 
  * 
  FROM `catalog_webdesign_products` t 
  INNER JOIN tbl_member_registration t1 on t.userid=t1.fld_loginid 
  WHERE  t1.fld_member_category_level<9 
  AND t.product_img IS NOT NULL  
  group by userid
  ORDER BY RAND() LIMIT 5 
```

编辑：

```
 SELECT 
  * 
  FROM (select * from `catalog_webdesign_products` where product_img IS NOT NULL) t 
  INNER JOIN tbl_member_registration t1 on t.userid=t1.fld_loginid 
  WHERE  t1.fld_member_category_level<9 
  group by t.userid
  ORDER BY RAND() LIMIT 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:42:06.273

为了获得更好的性能，您应该将 t1 的条件移动到 join 语句中。您的问题可能是错误的 JOIN 条件。尝试 LEFT JOIN 而不是 INNER JOIN。

有关联接的更多信息：http: [//www.w3schools.com/sql/sql_join.asp](http://www.w3schools.com/sql/sql_join.asp)

```
SELECT * 
FROM `catalog_webdesign_products` t 
LEFT JOIN tbl_member_registration t1 
ON (t.userid = t1.fld_loginid AND t1.fld_member_category_level < 9)
WHERE t.product_img IS NOT NULL 
GROUP BY t.userid 
ORDER BY RAND() LIMIT 5 
```

# google-maps - 谷歌地图分辨率不好，标记看起来很小

> ID：14256424
> 
> 赞同：0
> 
> 时间：2013-01-10T11:03:43.573
> 
> 标签：google-maps

我对谷歌地图有一个问题，地图的分辨率出现奇怪，标记太小了。

这个问题有什么解决办法吗？

![](../Images/36e26d3175149854c11f97bf6d4d81dc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:57:17.117

您必须调整缩放。如果我查看代码，我可以帮你标记

# knockout.js - Kendo-Knockout：嵌套绑定无法使用阻止绑定

> ID：14256425
> 
> 赞同：0
> 
> 时间：2013-01-10T11:03:43.503
> 
> 标签：knockout.js, kendo-ui

我正在使用 RPNiemeyer 的 kendo-knockout 库。我有两个嵌套绑定。我从这里使用 preventBindings 技术：

[http://www.knockmeout.net/2012/05/quick-tip-skip-binding.html](http://www.knockmeout.net/2012/05/quick-tip-skip-binding.html)

我在父 div 上应用绑定，然后阻止嵌套 div 上的绑定。当我单击网格中的行时，我希望触发第二个绑定并弹出打开但没有任何反应。示例代码类似于：[Kendo-Knockout：widget observable 中没有填充实际的widget](https://stackoverflow.com/questions/14213330/kendo-knockout-widget-observable-is-not-filled-with-the-actual-widget)

只有 html 不同（`languageDetails`div 嵌套在`languageList`div 中）：

```
<div data-viewId="languageList">
  <div id="languageList" data-bind="with: viewModel">
    <div id="languageListGrid" data-bind="kendoGrid: { data: languageViewModels, columns: [ 
                { 
                    template: '<a href=\'\' data-bind=\'click: function() { onLanguageSelected(&quot;#=Language#&quot;) }\'>#=Language#</a>', 
                    field: 'Language', 
                    title: 'Language',
                    width: 50
                }

                ], 
            scrollable: false, sortable: true, pageable: false }, preventBinding: true"
    style="height: 380px"></div>
    <div data-bind="preventBinding: true">
      <div data-viewid="languageDetails">
        <div id="languageDetails" data-bind="with: viewModel" class="hidden">
          <form id="languageDetailsForm" action="" style="font-family: Trebuchet MS, Verdana, Helvetica, Sans-Serif;">
              <div data-bind="kendoWindow: {isOpen: isOpen, title:'Language', width: 400, height: 200, modal: true, widget: popUpWindow }">test
                  <button id="cancelLanguage" class="k-button" data-bind="click: cancelLanguage">Cancel</button>
              </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div> 
```

当我在我的应用程序中调试代码时，在`languageList`div 上应用绑定并单击该行以打开弹出窗口时，第二个绑定未应用并且执行未进入函数：

```
if (!elementIsBoundNew(element)) {
      var parentViewModel = {
        viewModel: viewModel
      }; 
```

这可能意味着第一个应用绑定已应用于两个嵌套 div，而第二个阻止绑定不起作用。这只是我的建议。

这是小提琴：

[http://jsfiddle.net/PVMjy/4/](http://jsfiddle.net/PVMjy/4/)

任何帮助将不胜感激。谢谢！

根据 RP Niemeyer 的评论更新：

您的解决方案适用于我在小提琴中提供的示例，但不适用于我的应用程序。在我的真实场景中，我使用网格中的 selectedLanguage 从现有视图模型列表中查找语言视图模型，并将其分配给可观察的 selectedLanguageViewModel。换句话说 selectedLanguageViewModel 永远不会为空。这是我真实应用程序的代码：

```
LanguageListViewModel.prototype.onLanguageSelected = function (selectedLanguage) {
            var languageViewModel = getLanguageViewModel(selectedLanguage);
            self.selectedLanguageViewModel(languageViewModel);
            utils.applyBindings(self.selectedLanguageViewModel, languageDetailsElement);
            self.selectedLanguageViewModel().openPopUp(false);
            //createTreeView();
        }; 
```

我在这里所做的就是将绑定到的 div 的 elementid 保存在一个数组中。然后，当我必须应用绑定时，我会检查元素是否在数组中，如果不在，则应用绑定：

```
var applyedBindingsElements = [];

  var applyBindings = function (viewModel, elementId) {
    if($.inArray(elementId, applyedBindingsElements) == -1)
    {
      var element = $('div[data-viewId="' + elementId + '"]')[0];
      var parentViewModel = { viewModel: viewModel };
      ko.applyBindings(parentViewModel, element);

      applyedBindingsElements.push(elementId);
    }
  }; 
```

我未来的计划是使用 languageList 作为一个单独的组件，它可以在同一页面上出现多次。然后，此解决方案将不起作用，因为我将两个组件绑定到的 div elementIds 将具有相同的名称 ( `"languageList"`)。因此，我将不得不考虑其他解决方案。但这是我将在不久的将来提出的另一个问题的主题，并且非常感谢您对此的反馈。谢谢！

在这个主题上摆弄我的解决方案：

[http://jsfiddle.net/PVMjy/6/](http://jsfiddle.net/PVMjy/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:49:25.873

问题是`ko.dataFor`搜索 DOM 以找到它的值。因此，它实际上超出了跳过绑定的区域并找到了整个视图模型。因此，当您尝试打开弹出窗口时，您对绑定是否已应用的警惕会受到打击。

我做了一些小的更改以摆脱绑定检查，并在第一次单击按钮时将绑定应用于弹出区域。

删除已经绑定的检查后基本上只是这段代码：

```
self.onLanguageSelected = function (selectedLanguage) {
  if (!self.selectedLanguageViewModel()) {
      applyBindings(self.selectedLanguageViewModel, "languageDetails");
  }

  self.selectedLanguageViewModel(self.languageViewModels()[0]);
  self.selectedLanguageViewModel().openPopUp();
}; 
```

示例：http: [//jsfiddle.net/rniemeyer/8hzzn/](http://jsfiddle.net/rniemeyer/8hzzn/)

这对你有用吗？

# c++ - 基类如何禁用派生类的构造函数

> ID：14256429
> 
> 赞同：0
> 
> 时间：2013-01-10T11:03:53.410
> 
> 标签：c++, templates, inheritance, singleton

我尝试编写一个单例类，以便一个类只需要从中派生并自动成为单例：

基类：

```
 template <class T>
 class Singleton
 {
 private:
     static T* instance;
 public:

     static T* getInstance(void)
     {
         if(!instance)
             instance = new T;
         return instance;
     }

     static void release(void)
     {
         if(instance)
         {
             delete instance;
             instance = NULL;
         }
     }
 };

 template <class T>
 T* Singleton<T>::instance = NULL; 
```

我的派生类：

```
#include <iostream>
#include "Singleton.h"

class MySingleton : public Singleton<MySingleton>
{
public:
    void helloWorld(void)
    {
        printf("Hello, World!\n");
    }
}; 
```

主要的：

```
int main(int argc, const char * argv[])
{
    MySingleton* s = MySingleton::getInstance();
    s->helloWorld();
    return 0;
} 
```

这工作得很好，但它不是一个真正的单例，因为我仍然可以使用它的默认构造函数构造 MySingleton。当然，我可以将 MySingleton 的 ctor 设为私有并将 Singleton 声明为朋友，但是我有什么办法可以在基类中做到这一点，以便仅派生而不声明任何 ctor 就足以使类单例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T12:54:09.280

由于您的基类模板必须构造单例对象，因此它需要访问具体类的构造函数。因此，该构造函数应该是公共的，或者基类必须是具体类的朋友。具体类中的公共 Ctor 是每个人都可以访问的，因此您不能在编译时禁止它的使用。但是，您可以确保它在运行时只被调用一次：

```
template <class T>
class Singleton
{
  /* ... */
  static bool instantiating;
protected:
  Singleton()
  {
    if (!instantiating) //not called in instance() function
      throw std::runtime_error("Don't call me!");
  }

public:
  static T* getInstance()
  {
    intantiating = true;
    instace = new T();
    instantiating = false;
  }
};

template <class T>
bool Singleton<T>::instantiating = false; 
```

注意： -`instantiating`我在这里使用的变量不是线程安全的 - 的真/假设置`instantiating`不是异常安全的（`new`或`T::T()`可能抛出） - 您将指针用作实例变量是不安全的并且容易出现内存泄漏。考虑使用`shared_ptr`或参考（Meyers 单例）

# javascript - 本地存储循环

> ID：14256430
> 
> 赞同：0
> 
> 时间：2013-01-10T11:03:54.200
> 
> 标签：javascript, jquery, local-storage

我正在尝试让一些本地存储在我的网站上运行，但我正在苦苦挣扎。

我有几个“切换滑块”（例如：http: [//jquerymobile.com/test/docs/forms/switch/#](http://jquerymobile.com/test/docs/forms/switch/#)），我想将用户的选择保存到本地存储，这样当用户返回时他们仍然可以看到他们以前的选择。

我已经让它适用于列表中的第一个切换滑块，但是我想要做的是循环遍历每个滑块，并将其“id”和“值”保存到本地存储中。然后一旦保存，在页面加载时，恢复它们并根据本地存储中的内容更改拨动开关。

这是我的代码：

```
//code below saves id and value to local storage when save button is clicked
$("#button").click(function() {
    window.localStorage.setItem('flip-min-1', $("#flip-min-1").val());
}); 
```

好的，这样就可以了，在本地存储中我得到以下信息：

```
Key: #flip-min-1    Value: yes or no depending on choice as it is a toggle slider 
```

现在，当浏览器关闭并重新打开时，我从本地存储中检索数据并使用它来切换滑块，具体取决于它的内容：

```
var storedText = window.localStorage.getItem('flip-min-1');

//if the variable in local storage is equal to yes
if(storedText = 'yes') {
    //then switch the toggle slider to the yes state so it appear in red and reads 'Attending'
    $("#flip-min-1").val(window.localStorage.getItem('flip-min-1')).keyup();
    //if the stored text is anything other than yes, the default select option will be no. By default the user is not attending any events
} 
```

我正在努力解决的问题是，我有多个拨动开关，而且我需要将每个拨动开关保存在本地存储中！

我真的需要帮助，如果有人愿意提出他们的时间，我会非常感激，提前谢谢，汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:51:49.813

如果您有固定数量的开关，只需将所有内容放在 for 循环中，例如

```
for(var i = 0; i < 5; i++) {
    $("#button" + i).click(function() {
        window.localStorage.setItem('flip-min-' + i, $("#flip-min-" + i).val());
    });
} 
```

否则，您可能会给它们一个类和一个数据属性，例如：

```
<button class="mySwitch" data-number="1">Switch 1</button>
<button class="mySwitch" data-number="2">Switch 2</button> 
```

并使用这样的代码

```
// find all switches
$(".mySwitch")
// handle click event and save
.click(function() {
  var index = $(this).attr("data-number");
  window.localStorage.setItem('flip-min-' + index, $("#flip-min-" + index).val());
});
// load all states
.each(function() {
  var index = $(this).attr("data-number");
  var storedText = window.localStorage.getItem('flip-min-' + index);

  //if the variable in local storage is equal to yes
  if(storedText = 'yes') {
      //then switch the toggle slider to the yes state so it appear in red and reads 'Attending'
      $("#flip-min-1").val(window.localStorage.getItem('flip-min-' + index)).keyup();
      //if the stored text is anything other than yes, the default select option will be no. By default the user is not attending any events
  }
}); 
```

# android - Android OpenGL 应用程序在第二次启动时显示白屏

> ID：14256434
> 
> 赞同：1
> 
> 时间：2013-01-10T11:03:56.663
> 
> 标签：android, opengl-es

我的游戏在第一次启动时正确显示纹理，然后我退出并再次启动它，只显示白屏。我认为纹理加载和 android 活动生命周期存在一些问题，例如在暂停或销毁时清理东西。有趣的是它只在我运行时显示白屏，但在我调试时显示完美。请给我一些建议，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:14:15.053

到目前为止我的经验：

*   以二的幂创建纹理，并确保在绘制时将它们缩放和剪辑到正确的比例。
*   可以做ALPHA_8（文字渲染）的时候不要坚持RBGA_8888
*   在调用 OnSurfaceDraw 之前，在 OnSurfaceCreated 中做任何你能做的事情
*   避免使用 GL11 上下文强制转换。有些事情不会起作用，例如 glColor4ub 会编译但不起作用。
*   平衡每个组件的启用和禁用调用，将调用绘制到场景图中。
*   预先分配你的 nio 缓冲区
*   使用 DrawElements 但对于一个顶点的最简单的形状
*   在尽可能多的设备上进行测试。只是不要满足于仿真器，例如非双电源在仿真器上工作但在手机上不行。
*   如果您可以使用按需绘图。
*   使用在 onTouchEvent 调用中等待 20 毫秒并在 onDraw 中发出通知的技巧来减少您必须处理的大量运动事件。您可以绕过 onTouchEven 并使用较低的调用来节省一些周期。
*   尽可能多地使用纹理图集，例如绘制乐谱和文本或动画
*   禁用花哨的渲染选项（DITHER_TEST 等），除非您渴望在纹理上进行逼真的渲染。
*   如果您在 2D 中绘制，则禁用 DEPTH_TEST
*   完成绑定纹理后，不要忘记调用 Bitmap.recycle()。
*   在渲染例程中避免对象创建破坏（PointF Rect）。GC 调用会减慢您的帧速率。
*   广泛预加载您的纹理。不要等到你在最后一分钟绘制来绑定你的纹理。如果您这样做，则延迟会很明显，最好在应用程序启动时进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:26:14.687

您应该使用 onPause 和 onResume 方法，如果它不能解决问题，我会添加更多建议。几个月前我遇到了同样的问题。

```
@Override
protected void onPause() {
    super.onPause();

    mGLView.onPause();
}

@Override
protected void onResume() {
    super.onResume();

    mGLView.onResume();
} 
```

好吧，也许：

```
public void onSurfaceChanged(GL10 gl, int w, int h) {
    gl.glViewport(0, 0, w, h);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T02:16:12.317

您是在 onSurfaceCreated() 还是在其他地方重新加载纹理？你会希望在 onSurfaceCreated() 中有这些东西。

# php - 生成的电子邮件进入垃圾邮件和奇怪的标题 Received: from uknown in email

> ID：14256439
> 
> 赞同：3
> 
> 时间：2013-01-10T11:04:10.427
> 
> 标签：php, email, spam

> **可能重复：**
> [如何避免电子邮件标题收到：来自未知和电子邮件进入垃圾邮件](https://stackoverflow.com/questions/14273582/how-to-avoid-email-header-received-from-unknown-and-email-going-to-spam)

我尝试使用 php 和 Zend_Mail 从我们的服务器发送电子邮件。我使用 smtp 传输。这是在我的网站上订阅的确认电子邮件。但由于某种原因，我发送的电子邮件有奇怪的标题，并且电子邮件进入垃圾邮件文件夹：

```
Message-Id: <50f41c80.67e3440a.2d32.6aabSMTPIN_ADDED_MISSING@mx.google.com>
Received: (qmail 18457 invoked from network); 14 Jan 2013 14:55:59 -0000
Received: from unknown (HELO smtp1-1.searchboxindustries.com) (username@searchboxindustries.com@207.162.215.30)
  by searchboxindustries.com with SMTP; 14 Jan 2013 14:55:59 -0000 
```

smtp1.searchboxindustries.com 应解析为 207.162.215.30。那为什么我有这个标题？

列表标题“已收到：来自 uknown”是什么意思？它可以使电子邮件成为垃圾邮件吗？如何避免这个奇怪的标题并使电子邮件避免垃圾邮件文件夹？也许我对这个域的 DNS 设置有一些问题？

Spf 似乎还可以：

```
Received-SPF: pass 
```

设置标题的代码：

```
$mailer->clearFrom();
$mailer->setFrom($params['list_email'], $params['list_from_name']);
$mailer->setReplyTo($params['list_email']);

$mailer->addHeader('Sender', $params['list_email'] . '.emailname.com');                     
$mailer->setReturnPath($params['list_email'] . '.emailname.com');           

$mailer->addTo($params['email_address']); 
```

配置传输的代码：

```
$emailConfig = $this->getOption('email');                                   
        $transport = new Zend_Mail_Transport_Smtp($emailConfig['server'], $emailConfig);
Zend_Mail::setDefaultTransport($transport); 
```

来自 application.ini 的电子邮件配置：

```
email.name  = emailname.com
email.server = emailserver.com
email.username = email@address.com
email.password = password
email.auth = plain
email.port = 999
email.from_address = "address@email.com"
email.from_name = "Mailable"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:48:45.560

您是否尝试删除以下行？这似乎与 ->setFrom 重复（参见[http://framework.zend.com/manual/1.12/en/zend.mail.introduction.html#zend.mail.introduction.sendmail](http://framework.zend.com/manual/1.12/en/zend.mail.introduction.html#zend.mail.introduction.sendmail)）

```
$mailer->addHeader('Sender', $params['list_email'] . '.exampledomain.com'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:57:42.420

根据您提供的信息，“发件人”部分中的发件人域不是从您连接的 IP 注册的域。

从没有注册域名的主机或冒充其他域的主机发送垃圾邮件是一种典型模式，因此此类邮件通常会被标记为垃圾邮件。

如果您希望您的帖子被发送到 gmail 并且不被标记为垃圾邮件，请使用 gmail 或其他电子邮件提供商发送邮件，而不是您的本地 SMTP。请注意，从一个帐户发送的邮件过多可能会使其被标记为垃圾邮件发送者。对于大量通信，您可能需要注册自己的域。

# asp-classic - 在经典asp中的多维数组中添加重复值

> ID：14256440
> 
> 赞同：0
> 
> 时间：2013-01-10T11:04:17.350
> 
> 标签：asp-classic, vbscript

我在经典 asp 中有一个二维数组，例如
1-5
1-3
2-5

我需要以下格式的数组输出
1-8
2-5

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T12:53:14.740

您需要一个字典来总结由 col1 值分组的 col2 值。如：

```
 ReDim aIn(2, 1)
  aIn(0, 0) = 1 : aIn(0, 1) = 5
  aIn(1, 0) = 1 : aIn(1, 1) = 3
  aIn(2, 0) = 2 : aIn(2, 1) = 5
  Dim dicX : Set dicX = CreateObject("Scripting.Dictionary")
  Dim i
  For i = LBound(aIn, 1) To UBound(aIn, 1)
      dicX(aIn(i, 0)) = dicX(aIn(i, 0)) + aIn(i, 1)
  Next
  ReDim aOut(dicX.Count - 1, 1)
  For i = LBound(aOut, 1) To UBound(aOut, 1)
      aOut(i, 0) = dicX.Keys()(i)
      aOut(i, 1) = dicX(aOut(i, 0))
  Next
  For i = LBound(aOut, 1) To UBound(aOut, 1)
      WScript.Echo aOut(i, 0), aOut(i, 1)
  Next 
```

输出：

```
======
1 8
2 5
====== 
```

# jquery - 如何使用 jquery 自定义垂直滚动条？那可能吗？

> ID：14256447
> 
> 赞同：-2
> 
> 时间：2013-01-10T11:04:40.557
> 
> 标签：jquery, jquery-ui, css, scrollbar

是否可以使用 Jquery 和 Css 自定义垂直滚动条？如果是这样，请帮助我解决这个问题..

感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:18:45.467

你 1 小时前问了同样的问题。在多个答案中，已经给出了指向[http://jscrollpane.kelvinluck.com/的链接。](http://jscrollpane.kelvinluck.com/)

我们不会为您编写实际代码，那是您自己的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:08:36.890

如果您喜欢插件，请查看[此](http://jscrollpane.kelvinluck.com/). 这是一个[演示](http://jscrollpane.kelvinluck.com/basic.html)，但还有其他的。

虽然我认为它不会自定义浏览器的滚动条（无法自定义），但它会改变 DOM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T11:09:51.027

检查这个： http: [//manos.malihu.gr/jquery-custom-content-scroller/](http://manos.malihu.gr/jquery-custom-content-scroller/)

还有这个： [使用 css/jquery 自定义垂直滚动条](https://stackoverflow.com/questions/6269131/customizing-vertical-scrollbar-with-css-jquery)

# yii - 我可以将视图、模型、控制器放在不同的 EC2 服务器上吗？

> ID：14256449
> 
> 赞同：2
> 
> 时间：2013-01-10T11:04:55.330
> 
> 标签：yii

我正在 YII 框架中从事一个非常大的社交网络项目，其中负载平衡是正在出现的非常重要的问题。我需要的是：我想将所有三层（模型、视图、控制器）保留在不同的 EC2 亚马逊服务器上，以便可以有效地完成负载平衡。

在 YII 中我能做些什么呢？

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:46:21.393

为了您的负载平衡，您不应将应用程序分开在 3 个不同的实例上。

您应该在多台服务器上拥有相同的应用程序（包含所有模型、视图和控制器），然后根据每个服务器的 CPU 和 RAM 使用情况，负载均衡器将在适当的服务器上重定向最终用户。

我什至不知道单独的应用程序是否可行，如果是的话，用户将不得不等待更长的时间：

*   前端控制器将调用一些模型 => 一次或多次调用模型服务器 = 一段时间
*   前端控制器必须将数据发送到视图 => 更多时间

最后，用户将比在加载的服务器上等待更多！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:29:54.547

我强烈推荐[亚马逊的 Elastic Beanstalk](http://aws.amazon.com/elasticbeanstalk/)服务，因为我正在将它用于我正在开发的项目，该项目也基于 Yii 框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T18:42:53.607

我使用的解决方案是将我的应用程序部署在 3 台服务器上，并使用 rsync 使它们与部署服务器保持同步。我的静态内容来自第 4 台服务器，但这会将您的所有代码放在 3 台服务器上，作为 3 个精确的克隆。Imo 这是最好的，因为如果您需要扩展平衡，使用 amazone 可以生成更多克隆。

负载平衡意味着您将在一台服务器上为一部分用户提供服务，在第二台服务器上为另一部分用户提供服务，依此类推。但是如果您拆分模型/控制器/视图，您将不了解负载平衡的含义。

# scala - Safari 未发送的播放会话 cookie

> ID：14256455
> 
> 赞同：4
> 
> 时间：2013-01-10T11:05:17.683
> 
> 标签：scala, session, safari, playframework-2.0, cors

我在域 a.domain.com (http) 上有一个单页应用程序 (SPA)，它连接到在 Play 2 (scala) 中构建的 b.otherdomain.com (https) 上的 api。

[加载 SPA 后，用户输入凭据，应用程序对https://b.otherdomain.com.com/login](https://b.otherdomain.com.com/login)进行 ajax 调用。

/login 设置了 Play cookie，并且以下请求得到了很好的验证。一切都适用于 Chrome 和 Firefox（不是 IE，因为 CORS 限制）。

它应该可以在 Safari 上运行，但是在 /login 调用之后，cookie 不会随以下请求一起发回，因此 play 返回“401 未授权”响应。

这是我服务器端的错误还是配置错误？我是否必须更改 application.session.httpOnly 和 application.session.secure ？

这是我从 Safari 检查器看到的：

```
/login headers :

URL de la requête:https://b.otherdomain.com//login
Méthode de la requête:POST
Code d’état:200 OK
En-têtes de requêteafficher la source
Accept:application/json, text/plain, */*
Content-Type:application/x-www-form-urlencoded
Origin:http://a.domain.com.com
Referer:http://a.domain.com/
User-Agent:Mozilla/5.0 (Windows NT 6.1) AppleWebKit/534.57.2 (KHTML, like Gecko) Version/5.1.7 Safari/534.57.2
Données du formulaireafficher l’URL codée
email:foo@foo.com
password: foofoo
En-têtes de réponseafficher la source
Access-Control-Allow-Credentials:true
Access-Control-Allow-Origin:http://a.domain.com
Connection:keep-alive
Content-Length:31
Content-Type:text/plain; charset=utf-8
Set-Cookie:PLAY_SESSION=a71f93e3315fa9164dd7112841ccdb4a0f0c447b-     sessionId%3A6gtu7%21z.5i%218d%29v8yxy693n-s6zsuejpav_p67f9hb%7Ej%274h2de*jx3g35p%7Egzo0u;Path=/;HTTPOnly
Strict-Transport-Security:max-age=31536000

following request :

URL de la requête:https://b.otherdomain.com/users
Méthode de la requête:GET
Code d’état:401 Unauthorized
En-têtes de requêteafficher la source
Accept:application/json, text/plain, */* 
Origin:http://a.domain.com
Referer:http://a.domain.com/
User-Agent:Mozilla/5.0 (Windows NT 6.1) AppleWebKit/534.57.2 (KHTML, like Gecko) Version/5.1.7 Safari/534.57.2
En-têtes de réponseafficher la source
Access-Control-Allow-Credentials:true
Access-Control-Allow-Origin:http://a.domain.com
Connection:keep-alive
Content-Length:24
Content-Type:text/plain; charset=utf-8
Strict-Transport-Security:max-age=31536000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-05T14:58:36.600

我有同样的问题。它在 Chrome 中运行良好，但在 Safari 中根本不行。我的理解是，这是 Safari 与[第三方 Cookies](https://webkit.org/blog/7675/intelligent-tracking-prevention/)相关的新限制。

似乎没有（好的）解决方法。

选项： - 使用代理：服务器 a 上的设置和端点调用 b 服务器端。- 为 b 创建一个 c-Name DNS 条目，以将其视为 a

您可能想尝试 PayPal 跨域套件：[https ://medium.com/@bluepnume/introducing-paypals-open-source-cross-domain-javascript-suite-95f991b2731d](https://medium.com/@bluepnume/introducing-paypals-open-source-cross-domain-javascript-suite-95f991b2731d)

# c++ - 搜索已排序的浮点数数组

> ID：14256457
> 
> 赞同：5
> 
> 时间：2013-01-10T11:05:20.017
> 
> 标签：c++, arrays, search, boost

在任何数值库（MKL、Boost、GSL、..etc）中是否有优化函数来搜索排序的浮点数数组以查找与给定浮点数最接近的匹配项？另一个可以为我解决相同问题的函数将从自定义离散概率分布生成随机样本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T11:26:21.147

将评论（我和@betabandido）包装成答案：

您基本上需要找到 2 个候选者，最接近的“上”元素和最接近的“下”元素（假设该元素不在列表中）。这可以有效地使用[二分搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)来实现( `O(logN)`)

通过使用[std::lower_bound()](http://en.cppreference.com/w/cpp/algorithm/lower_bound)您可以获得较高的元素，而较低的是数组中它之前的元素。

比较两个候选人 - 最接近给定浮点数的候选人就是你的答案。

# forms - php邮件发送附件无法打开

> ID：14256458
> 
> 赞同：0
> 
> 时间：2013-01-10T11:05:28.373
> 
> 标签：forms, email-attachments, php

我正在尝试编写一个页面，用户可以在其中发送电子邮件和附件。我想我快到了。现在我收到了电子邮件，但附件的文件大小为空，或者当我尝试打开它时，我收到一条无法打开的消息。任何帮助表示赞赏。

```
 function valid_email($Email)
{
    //new regex, didn't give me any errors...might be a bit more exact
  if (ereg('^[_a-zA-Z0-9-]+(\.[_a-zA-Z0-9-]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.(([0-9]{1,3})|([a-zA-Z]{2,3})|(aero|coop|info|museum|name))$', $Email) != false)
    return true;
  else 
    return false;
}

function sendEmail($email){
    return  mail ($email['to'], $email['subject'], $email['message'], $email['headers']);
}

if ( strlen($_FILES['Resume_File']['name']) > 0 )
{   // If a file was uploaded, do some processing
    $filename = preg_replace('/[^a-zA-Z0-9._-]/', '', $_FILES['Resume_File']['name']);
    $filetype = $_FILES["Resume_File"]["type"];
    $filesize = $_FILES["Resume_File"]["size"];
    $filetemp = $_FILES["Resume_File"]["tmp_name"]; 
    $ext = substr($filename, strpos($filename,'.'), strlen($filename)-1);

    if ( !preg_match('/\.(doc|docx|odt|pdf|rtf|txt)/i', $ext) )
    {   $errors++;
        $errorLog .= "Upload filetype not supported.";
    }
    else if ( $filesize > 2000000 )
    {   $errors++;
        $errorLog .= "File size too high, up to 2MB is allowed.";
    }
    else
    {   // Looks like the file is good, send it with the email
        //$fp = fopen($filetemp, "rb");
        //$file = fread($fp, $filesize);
        //$file = chunk_split(base64_encode($file));

        //$email['headers'] .= "\n--{$num}\n";
        //$email['headers'] .= "Content-Type:{$filetype}";
        //$email['headers'] .= "name={$filename}r\n";
        //$email['headers'] .= "Content-Disposition: attachment; ";
        //$email['headers'] .= "filename={$filename}\n";
        //$email['headers'] .= "{$file}";

    }
}

// get posted data into local variables
$fname = trim(stripslashes($_POST['fname']));
$lname = trim(stripslashes($_POST['lname']));
$emailAddress = trim(stripslashes($_POST['email']));
$company = trim(stripslashes($_POST['company'])); 
$information = trim(stripslashes($_POST['information']));
$subject = trim(stripslashes($_POST['subject']));
$title = trim(stripslashes($_POST['title']));

//setup email
$to = 'me@me.com';
$subject = "Resume Submission";

$headers = "From: {$fname} {$lname} <{$emailAddress}>\r\n";

// prepare email body text
$message = "First Name: {$fname} <br>";
$message .= "Last Name: {$lname} <br>";
$message .= "Email: {$emailAddress} <br>";
$message .= "Title: {$title} <br><br>";
$message .= "Comments: {$information}";

if ( $errors == 0 ) {
    // Attachment headers

    //$to = "myemail@mydomain.com";
    //$from = "Website <website@mydomain.com>";
    //$subject = "Test Attachment Email";

    $separator = md5(time());

    // carriage return type (we use a PHP end of line constant)
    $eol = PHP_EOL;

    // attachment name
    //$filename = "document.pdf";

    //$pdfdoc is PDF generated by FPDF
    $attachment = chunk_split(base64_encode($pdfdoc));

    // main header
    $headers .= "From: ".$from.$eol;
    $headers .= "MIME-Version: 1.0".$eol; 
    $headers .= "Content-Type: multipart/mixed; boundary=\"".$separator."\"";

    // no more headers after this, we start the body! //

    $body = "--".$separator.$eol;
    $body .= "Content-Transfer-Encoding: 7bit".$eol.$eol;
    $body .= "This is a MIME encoded message.".$eol;

    // message
    $body .= "--".$separator.$eol;
    $body .= "Content-Type: text/html; charset=\"iso-8859-1\"".$eol;
    $body .= "Content-Transfer-Encoding: 8bit".$eol.$eol;
    $body .= $message.$eol;

    // attachment
    $body .= "--".$separator.$eol;
    $body .= "Content-Type: application/octet-stream; name=\"".$filename."\"".$eol; 
    $body .= "Content-Transfer-Encoding: base64".$eol;
    $body .= "Content-Disposition: attachment".$eol.$eol;
    $body .= $attachment.$eol;
    $body .= "--".$separator."--";

}

//sendEmail($email);

// validation

if ( $errors == 0 ) {

    if (valid_email($emailAddress) && $fname != "" && $lname != "") { //if return is true...
        mail($to, $subject, $body, $headers);
        echo 0; //Success
    }else { //otherwise
        echo 1; //Error
    }

} else {
    echo 1; //Error
} 
```

我正在使用我在这里找到的部分代码

[PHP mail() 附件问题](https://stackoverflow.com/questions/6275070/php-mail-attachment-problems)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:15:44.057

PHP 的`mail()`功能真的很差，尤其是在尝试添加附件等高级操作时。它真的只值得用于最基本的“向站点管理员发送通知电子邮件”类型的电子邮件，即便如此它并不总是最好的解决方案。

我建议放弃使用该`mail()`函数本身的任何尝试，而是改用一个像样的 PHP 邮件程序类，例如适当命名的[phpMailer](http://code.google.com/a/apache-extras.org/p/phpmailer/)。

phpMailer 使从 PHP 创建电子邮件变得非常容易。我拥有您可能想要的所有功能，包括让添加附件、编写 HTML 电子邮件等变得非常容易。

但是 phpMailer 最好的一点是它消除了所有需要浪费数十行代码格式化电子邮件标题的需要。所有带有分隔符和 mime 类型的东西都变成了几行简单的代码。更易于阅读，更易于维护，并且不太可能出现错误。你赢了全场。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:13:31.543

```
//$pdfdoc is PDF generated by FPDF
    $attachment = chunk_split(base64_encode($pdfdoc)); 
```

$pdfdoc 在页面的任何地方都没有提到。我想这就是问题所在：|

# grid - KendoGrid - MVC - 实体 - 身份列

> ID：14256463
> 
> 赞同：0
> 
> 时间：2013-01-10T11:05:48.023
> 
> 标签：grid, kendo-ui, identity-column

我正在使用 KendoGrids 构建一个 MVC 实体应用程序。

我已经建立了这个 kendoGrid

```
 @(Html.Kendo().Grid<ModelApp.Models.Tickets>()
.Name("ticketgrid")
.Columns(columns =>
    {

        columns.Bound(p => p.TicketID).Title("ID");
        columns.ForeignKey(p => p.CustomerID, (System.Collections.IEnumerable)ViewData["customers"], "CustomerID", "CustomerName").Title("Customer");
        columns.ForeignKey(p => p.AreaOfBusinessID, (System.Collections.IEnumerable)ViewData["areaofbusinesses"], "AreaOfBusinessID", "AreaOfBusiness1").Title("AreaOfBusiness");
         columns.Bound(p => p.OccurredOn).Title("Occured").Format("{0:yyyy-MM-dd}");
        columns.ForeignKey(p => p.SeverityID, (System.Collections.IEnumerable)ViewData["severities"], "SeverityID", "Severity1").Title("Severity");
        columns.ForeignKey(p => p.AssigneeID, (System.Collections.IEnumerable)ViewData["assignees"], "AssigneeID", "AssigneeName").Title("Assignee");
        columns.ForeignKey(p => p.TicketStatusID, (System.Collections.IEnumerable)ViewData["ticketstatuses"], "TicketStatusID", "TicketStatus1").Title("Status");
        columns.Bound(p => p.UserID).Title("User");
        columns.Bound(p => p.DateRegistered).Title("Registered").Format("{0:yyyy-MM-dd}");
})
.DataSource(dataSource => 
    dataSource
.Ajax()
.Model(model => model.Id(p => p.TicketID))
.Read(read => read.Action("Index","Ticket"))
.Create(create => create.Action("Create", "Ticket"))
.Update(update => update.Action("Edit", "Ticket"))
//.Destroy(destroy => destroy.Action("Delete", "Ticket"))        
    )
    .Pageable()
    .Editable(editing => editing.Mode(GridEditMode.InCell))
    .ToolBar(toolbar =>
    {
        toolbar.Create();
        toolbar.Save();
    })
    .Navigatable()
    .Selectable()

    ) 
```

我面临两个问题

1）TicketID 列是一个标识列。当我选择 Create 按钮时，它获取一个零。我怎样才能让 Gid 明白它不应该弄乱这个列并且数据库会处理它？当然，无论如何都没有插入，这将我带到第二个问题

2）编辑不发布到数据库

```
[AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Edit([DataSourceRequest] DataSourceRequest request, IEnumerable<ModelApp.Models.Tickets> models)
    {
        if (models != null)
        {
            try
            {
                foreach (var updatedEntity in models)
                {
                    var itemToUpdate = db.Tickets.Where(p => p.TicketID == updatedEntity.TicketID).FirstOrDefault();
                    if (itemToUpdate != null)
                    {
                        itemToUpdate.CustomerID = updatedEntity.CustomerID;
                        itemToUpdate.AreaOfBusinessID = updatedEntity.AreaOfBusinessID;
                        itemToUpdate.AssigneeID = updatedEntity.AssigneeID;
                        itemToUpdate.OccurredOn = updatedEntity.OccurredOn;
                        itemToUpdate.SeverityID = updatedEntity.SeverityID;
                        itemToUpdate.DateRegistered = updatedEntity.DateRegistered;
                        itemToUpdate.UserID = updatedEntity.UserID;
                        db.SaveChanges();
                        ModelState.Clear();
                    }
                }
            }
            catch (Exception e)
            {
                db.add_exception_log(e.Message, "UPDATE RATES");

            }
        }
        return Json(ModelState.ToDataSourceResult());
    } 
```

因为模型为空。任何线索为什么？

提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:09:37.517

1）您应该在数据源的模型配置器中使该字段不可编辑

```
model=>{
    model.Fiedl(p=>p.TicketID).Editable(false);
} 
```

2）您没有使用批量编辑来期望收集 - 将签名更改为期望单条记录

```
public ActionResult Edit([DataSourceRequest] DataSourceRequest request, ModelApp.Models.Tickets model) 
```

# three.js - 将 3D 模型添加到现有的 THREE.Scene()

> ID：14256466
> 
> 赞同：1
> 
> 时间：2013-01-10T11:05:53.133
> 
> 标签：three.js, webgl

我创建了一个场景，添加了几个框，我可以用键盘很好地移动相机。

我想添加一个 3D 模型。在几个教程中，我看到了类似的内容：

```
var jsonLoader = new THREE.JSONLoader();
jsonLoader.load( "test.js", function( geometry ) { createScene( geometry) } );

function createScene( geometry ) {

  var mesh = new THREE.Mesh( geometry, new THREE.MeshLambertMaterial({color: 0xbbbbbb}) );
  mesh.scale.set(10, 10, 10);
  mesh.position.y = -350;
  mesh.position.x = -650;
  group.add(mesh);
} 
```

但是对于其他元素，我写了类似的内容：

```
MovingCube = new THREE.Mesh(MovingCubeGeom, new THREE.MeshFaceMaterial());
MovingCube.position.set(0, 25, 0);
scene.add(MovingCube); 
```

如何在我的场景中从 .js 转换的 .obj 添加 3D 模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T12:34:36.123

第一个从外部文件加载模型，该文件包含几何的 JSON 表示，并在外部文件完成加载后将其作为 THREE.Geometry 类的实例发送到 createScene 函数。

第二个几何图形已经在变量 MovingCubeGeom 中。

第二个示例与第一个示例的 createScene 函数中的内容基本相同。

您不需要将 obj 转换为 js，只需使用 THREE.OBJLoader 类即可

# javascript - Twitter 列表未显示正确推文的问题

> ID：14256468
> 
> 赞同：5
> 
> 时间：2013-01-10T11:05:55.820
> 
> 标签：javascript, html, twitter, widget

Twitter 列表不起作用？

*   我的客户已经列出了他想要显示推文的人的名单。

*   列表可以在这里查看：[https ://twitter.com/Leidsverzet/top](https://twitter.com/Leidsverzet/top)

*   它包含5个人。

嵌入工作正常，但我遇到了一些非常奇怪的事情：**并非这 5 个人的所有推文都显示**！

为了进一步测试，我制作了一个[单人测试列表]，只有一个人进行测试。该列表正常工作，只是**它不显示该用户的回复**。

我在这里理解有问题吗？推特不是[列出](https://support.twitter.com/articles/76460-how-to-use-twitter-lists)了类似**群组**的东西，您可以在其中放置家人或教授联系之类的人并查看他们的时间表吗？

关于为什么我不想使用列表的一个小页脚说明是因为 twitter 搜索插件也不能正常工作，所以我相信列表可以解决问题，而不是使用搜索查询，但显然不是。或者推特搜索提要和列表不好，或者我在这里的某个地方迷路了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:43:18.210

联系了推特，问题解决了。

*小心*

这些列表也可能已按时间更正，例如（爬行时间等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-01T10:01:54.523

我只想补充一点，我在寻找自己的列表问题的解决方案时发现了这一点，解决我的问题的一件事是编辑列表，删除未显示推文的人，然后将其添加回来。

# jquery - 如何最好地限制固定位置 DIV 的高度以防止与页脚重叠

> ID：14256470
> 
> 赞同：0
> 
> 时间：2013-01-10T11:05:57.850
> 
> 标签：jquery, css-position

所以我有一个固定位置的 div，它的内容必须始终保持在页面的同一部分，但是不希望它`div.fixed`与`div.footer`. 我可以使用什么 jQuery 来操纵高度`div.fixed`以防止它与页脚重叠？

我假设我需要处理与页面或文档垂直位置相关的固定 div，但是我担心它的跨浏览器实现。

这是一个 JSFiddle [http://jsfiddle.net/8CYMn/4/](http://jsfiddle.net/8CYMn/4/)，其中有一个显示效果的示例。如果向下滚动，您会看到全宽页脚重叠。

由于页面容器和 z-index 的原因，如果不进行大量重构以将页脚放置在 z-index 中的固定 div 上方，则实际上是不可能的。

**更新**：更改了小提琴（http://jsfiddle.net/8CYMn/4/）以更接近地代表我遇到的问题。`div.fixer`在页面顶部有一个间隙，并且还有一个定义的 z-index 必须高于页脚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:20:48.487

也许就像这样：

[http://jsfiddle.net/8CYMn/2/](http://jsfiddle.net/8CYMn/2/)

```
$('.footer').css({position:'absolute',top:$('.spacer').height()}); 
```

# android - 使用receiverandroid出错

> ID：14256472
> 
> 赞同：0
> 
> 时间：2013-01-10T11:06:03.433
> 
> 标签：android, android-intent, broadcastreceiver, android-manifest

这是我的`manifest.xml`文件的摘录：

```
<receiverandroid:name=".SmsReceiver">
        <intent-filter>
            <actionandroid:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
</receiver> 
```

编译代码时，控制台中出现以下错误：

```
Element type "receiverandroid:name" must be followed by either attribute specifications, ">" or "/>" 
```

这真的不是我所做的吗？为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T11:08:15.500

`<receiverandroid:name`在和中留出空间 `<actionandroid:name`

```
<receiver android:name=".SmsReceiver">
        <intent-filter>
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
</receiver> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T11:08:20.940

将您的接收器声明为：

```
<receiver android:name=".SmsReceiver">
        <intent-filter>
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
</receiver> 
```

目前你结合了 Tag name 和 Attributes 。在标签和属性之间留出空间

# eclipse - Eclipse & EMF - 元素的子元素也作为属性可见

> ID：14256474
> 
> 赞同：2
> 
> 时间：2013-01-10T11:06:09.140
> 
> 标签：eclipse, xsd, schema, emf, ecore

我有一点 EMF 的问题

```
<xs:complexType name="SomeElement">
    <xs:sequence>
        <xs:element name="SomeContents" type="cfg:SomeContents" />
    </xs:sequence>
</xs:complexType>

<xs:complexType name="SomeContents" abstract="true">
</xs:complexType> 
```

基本上在上面给出的示例中 SomeElement 应该只有孩子，但根本没有属性。不幸的是，这不起作用，所有可能的孩子也显示为属性（无法编辑它们）。代码几乎是由 Eclipse 生成的，所以我认为模式或 ecore 文件可能有问题。

```
<eClassifiers xsi:type="ecore:EClass" name="SomeElement">
    <eAnnotations source="http:///org/eclipse/emf/ecore/util/ExtendedMetaData">
      <details key="name" value="SomeElement"/>
      <details key="kind" value="elementOnly"/>
    </eAnnotations>
    <eStructuralFeatures xsi:type="ecore:EReference" name="SomeContents" lowerBound="1"
        eType="#//SomeContents" containment="true" resolveProxies="false">
      <eAnnotations source="http:///org/eclipse/emf/ecore/util/ExtendedMetaData">
        <details key="kind" value="element"/>
        <details key="name" value="SomeContents"/>
        <details key="namespace" value="##targetNamespace"/>
      </eAnnotations>
    </eStructuralFeatures>
</eClassifiers>
<eClassifiers xsi:type="ecore:EClass" name="SomeContents" abstract="true">
    <eAnnotations source="http:///org/eclipse/emf/ecore/util/ExtendedMetaData">
      <details key="name" value="SomeContents"/>
      <details key="kind" value="empty"/>
    </eAnnotations>
</eClassifiers> 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:17:58.973

我相信，您必须更改生成器模型中的某些内容，而不是更改源模式。

打开您的 genmodel，并查找错误地显示为子元素的属性。然后，在“属性”视图中，查找“编辑”类别，并检查以下设置：

*   孩子们
*   创建孩子
*   财产种类

我相信，当您初始化生成器模型时，这些设置是以错误的方式生成的，并且它们正在控制树编辑器的子行为。

# iphone - UIWebView 不加载 URL

> ID：14256484
> 
> 赞同：2
> 
> 时间：2013-01-10T11:06:39.730
> 
> 标签：iphone, ios, objective-c, uiwebview

我在加载**URL**时遇到了非常小的问题`UIWebView`。我有一个`UIButton`，单击它时，我添加了`UIView`其中包含`UIWebView`, `UIButton`& `Title bar`。使用的代码如下 -

```
 [self.view addSubview:vwOnline];
    vwOnline.bounds = self.view.bounds;

    //Load webview
    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@", objWine.strOnlineURL]];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [wbvwOnline loadRequest:request];

- (void)webViewDidStartLoad:(UIWebView *)webView
{
    //Show activity indicator
    [indicator startAnimating];
}

- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    //Remove Activity indicator
    [indicator stopAnimating];
    [indicator removeFromSuperview];
}

- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
    NSLog(@"Error - %@", error);

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Find A Vino" message:@"Error while loading request." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
    [alert show];
    alert.tag = 1;

    //Remove Activity indicator
    [indicator stopAnimating];
    [indicator removeFromSuperview];
} 
```

通过执行上述代码，大多数情况下`UIWebView`不会加载`URL`我在 object 中传递的内容`objWine.strOnlineURL`。如果我单击后退按钮并再次单击按钮以加载，它将`URL`进入. 如果有人知道解决方案，请帮助我。`- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error``UIWebView`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T11:44:42.767

当您要返回时，向 nil 提出请求并将空加载`htmlstring`到`webview`. 还有一件事，`[indicator removeFromSuperview];`从

```
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error 
-(void)webViewDidFinishLoad:(UIWebView *)webView 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:31:47.210

而不是每次都添加您`webview`的点击。`button`为什么不将您的添加`webview`到您的和`viewDidLoad`点击中`hide`。`show``button`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T11:14:09.907

采用

```
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://www.google.com"]]; 
```

如果它工作正常然后检查`objWine.strOnlineURL`

否则很清楚:)

# c# - 使用我的资源图像 - Compact Framework

> ID：14256486
> 
> 赞同：3
> 
> 时间：2013-01-10T11:06:46.470
> 
> 标签：c#, image, windows-mobile, compact-framework, picturebox

我将图像添加到我的项目资源 (Windows Mobile 6.1)。我想使用此图像来设置我在表单中拥有的一些 PictureBox 的 PictureBox.Image 属性。我尝试以下代码：

```
pictureBox1.Image = Properties.Resources.my_image;
pictureBox2.Image = Properties.Resources.my_image;
pictureBox3.Image = Properties.Resources.my_image;

...

pictureBoxN.Image = Properties.Resources.my_image; 
```

问题是有时图像仅显示在某些 PictureBox 中（我`TargetInvocationException`在尝试设置图像时得到一个），而不是全部显示。为什么？我怎么解决这个问题？

**编辑**：

InnerException 的 StackTrace：

> 在 Microsoft.AGL.Common.MISC.HandleAr(PAL_ERROR ar) 在 System.Drawing.Bitmap._InitFromMemoryStream(MemoryStream mstream) 在 System.Drawing.Bitmap..ctor(Stream stream) 在 System.Reflection.RuntimeConstructorInfo.InternalInvoke(RuntimeConstructorInfo rtci , BindingFlags invokeAttr, Binder binder, Object parameters, CultureInfoculture, Boolean isBinderDefault, Assembly caller, Boolean verifyAccess, StackCrawlMark& stackMark) in System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfoculture) in System System.Resources.ResourceReader.LoadBitmap(Int32 typeIndex) 中 System.Resources.Resources.ResourceReader.CreateResource(Type objType, Type[] ctorParamTypes, Object[] ctorParameters) 中的 .Reflection.ConstructorInfo.Invoke(Object[] 参数) System.Resources .ResourceReader.LoadObjectV2(Int32 pos, ResourceTypeCode& typeCode) in System.Resources.ResourceReader.LoadObject(Int32 pos, ResourceTypeCode& typeCode) in System.Resources.RuntimeResourceSet.GetObject(String key, Boolean ignoreCase) in System.Resources.ResourceManager.GetObject(String名称，CultureInfo 文化）在 Icons_Control.Properties.Resources.get_glass_empty() 在 Icons_Control.ListItem.set_CompletitionStatus(eCompletionStatus value) 在 Icons_Control.ListItem..ctor() 在 Icons_Control.ListItem..ctor(eItemType type) 在 Icons_Control.MainForm。 System.Windows.Forms.Menu.ProcessMnuProc(Control ctlThis, WM wm, Int32 wParam, Int32 lParam) 中 System.Windows.Forms.MenuItem.OnClick(EventArgs e) 中的 menuItem3_Click(Object sender, EventArgs e) System.Windows。 Forms.Form.WnProc(WM wm, Int32 wParam,Int32 lParam) 在 System.Windows.Forms.Control._InternalWnProc(WM wm, Int32 wParam, Int32 lParam) 在 Microsoft.AGL.Forms.EVL.EnterMainLoop(IntPtr hwnMain) 在 System.Windows.Forms.Application.Run(Form fm) ) 在 Icons_Control.Program.Main()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:25:29.647

我的猜测是您的内存或其他资源不足。图片资源有点危险。每次获得资源时，都会创建一个新资源。您可能只想创建一个 my_image 实例，并且您可能希望在使用完它后将其丢弃。

```
Image myImage = Properties.Resources.my_image;

pictureBox1.Image = myImage;
pictureBox2.Image = myImage;
pictureBox3.Image = myImage;
pictureBox4.Image = myImage;
...
pictureBoxN.Image = myImage;

// Later on when you are done using it
myImage.Dispose(); 
```

对于大多数 CF 应用程序来说，不浪费内存非常重要。

# java - 如何在java中检查getter方法的null

> ID：14256493
> 
> 赞同：5
> 
> 时间：2013-01-10T11:07:18.297
> 
> 标签：java

我有一个 POJO 课程。

```
class Activity{
   private String name;

   public String getName()
      return name;
   }

   public void setName(String name){
      this.name=name;
   }
} 
```

我有下面的条件。它没有相应地在这些条件下正确输入

```
 if(stlmtTransRequestVO.getStlmtTransId()!=null && stlmtTransRequestVO.getPaymentTransId()!=null){
stlmtTransDtlsList = (List<StlmtTransResponseVO>) queryForList(
        "GET_STLMTPAY_TRANSACTIONS", stlmtTransRequestVO);

 }else if(stlmtTransRequestVO.getAgentId()!=null && stlmtTransRequestVO.getAgencyId()==null){
stlmtTransDtlsList = (List<StlmtTransResponseVO>) queryForList(
        "GET_AGENT_TRANSACTIONS", stlmtTransRequestVO);

 }else if(stlmtTransRequestVO.getAgencyId()!=null && stlmtTransRequestVO.getAgentId()==null){
stlmtTransDtlsList = (List<StlmtTransResponseVO>) queryForList(
        "GET_AGENCY_TRANSACTIONS", stlmtTransRequestVO);

 }else if(stlmtTransRequestVO.getAgencyId()!=null && stlmtTransRequestVO.getAgentId()!=null){

} 
```

如何检查这个getter方法是否有数据？

我尝试过以下场景但无法正常工作

```
 1) obj.getName()!=null
   2) obj.getName().isEmpty() 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-10T11:08:53.613

`obj.getName() != null`是正确的。但这取决于您对“拥有数据”的定义。可能是：`object.getName() != null && !obj.getName().isEmpty()`。

有一些实用程序可以促进这一点，比如 apache commons-lang`StringUtils.isNotEmpty(..)`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-10T11:11:53.683

```
if( obj.getName() != null && !"".equals(obj.getName()) ){
   //getName is valid
} 
```

上面是检查 name**不是 null**并且它**不是 empty**。此外**"".equals(obj.getName())**被认为比**obj.getName().equals("")**更好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T11:10:06.110

像这样初始化：

```
private String name = ""; 
```

然后你可以检查它：

```
obj.getName().isEmpty(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T11:09:24.457

您的第一次检查是正确的。如下修改您的第二次检查：

```
obj.getName().equals(""); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-10T11:11:53.060

Name 是一个 String 对象，要检查它是否没有数据，请执行以下操作：

```
obj.getName() != null;
obj.getName.equals(""); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-10T11:13:48.110

在 String 的情况下始终使用[StringUtils.isEmpty](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#isEmpty-java.lang.CharSequence-)

# ajax - 为 Ajax 调用实现安全性

> ID：14256494
> 
> 赞同：1
> 
> 时间：2013-01-10T11:07:30.070
> 
> 标签：ajax, security

我在使我的 Ajax 请求安全方面遇到了困难。问题是数据篡改。我已阅读有关此问题的信息，建议永远不要相信来自客户的信息。使用 fiddler 或任何此类工具可以很好地改变它。我们还需要在服务器端进行验证。但我的问题是如何验证。

让我们看一个例子。假设我在数据库中有员工信息，并且我公开了一种方法 GetEmployeeDetailByEmployeeId。在任何员工提出此请求之前，他将通过 userId 和密码进行身份验证，并授权该类型的用户是否允许提出此请求。

但是，如果一名员工提供其他员工的employeeId，他实际上会得到他不应该看到的数据。为了解决这个问题，我们有两个解决方案 1\. 我们应该检查数据库的请求，这个人请求的信息是给他的还是他是那个人的经理 2\. 我们应该以某种方式在应用层本身验证我们是否是否应该拒绝来电。

第一种方法是性能密集型的，我必须发出数据库请求并找到记录的关联，这也会增加开发成本。

请建议走哪条路，我们有没有更好的解决方案来解决这类问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:13:50.703

显然，您需要在后端检查它，否则您的应用程序可能会被孩子利用。

**更新**

你需要在你的后端实现一个授权机制，然后你一开始加载权限后，你就可以将它添加到用户会话中，这样你就不需要每次都查找数据库，你只需要根据任务所需权限检查用户权限。

**更多的**

实现认证机制： 目标，`user`可以看到自己的个人资料，但`supervisor`可以看到他的每个人`department`。

*   `user`A 已经`user_id`在会话中加载了，比如说`user_id = 123`
*   `user`A 只能请求他`if (user_id == req_user_id)`的信息，然后显示信息，否则显示错误。
*   `user`B 的权限值为`100`，那我们就叫他吧`supervisor`。现在`if (user_id == req_profile_id)`不是**真的**，我们将检查权限。假设这个特定任务的任务权限是`10`so `if (user_perm >= task_perm)`，继续检查部门，如果请求的用户和当前用户在同一个部门，则显示信息，否则显示错误。

这应该根据您的信息起作用。

# objective-c - 为什么我必须继承 NSobject 而不是 NSapplication 在 GNUSTEP 上实现委托方法？

> ID：14256502
> 
> 赞同：0
> 
> 时间：2013-01-10T11:08:12.640
> 
> 标签：objective-c, gnustep

我看过几个 Obj-C 教程。委托类都继承自`NSObject`. 例如，`applicationDidFinishLaunching`委托方法，在一些教程中，它继承自它`NSObject`但`NSApplication`要实现它。我认为它不应该继承的原因`NSObject`是我没有在其中找到任何委托协议声明，但我在 NSApplication.xml 中找到了委托协议声明。我的 Objective-C 玩具环境是 GnuSep。

这是一些代码：

```
@interface browserController : NSObject //here. inheriting from NSObject,but NSObject don'have any protocols declaration about applicationDidFinishLaunching.
{
  NSBrowser *browser;
}
@end

@implementation browserController

- (void)menuAction:menuItem
{
  ..............................

}

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
  NSWindow *win;
  ActiveBrowserDelegate * abd;
  WindowDelegate *wd;
  NSRect wf = {{100, 100}, {600, 500}};
  NSRect bf = {{10, 10}, {580, 350}};

  .............................
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:53:42.240

它被称为非正式协议（尽管 GNUstep 出于文档目的将其声明为 GSAppDelegateProtocol）NSApplication 将在运行时简单地检查它，如果您的委托对象将响应消息，（使用 -respondsToSelector :) 委托可以是一个视图，一个字符串，一个代理，只要你让它响应选择器。您不需要让您的委托实现此类协议中的每个方法，因为所有验证都将在运行时完成。为了让它看起来更干净，你可以在 @interface 中重新声明 -applicationDidFinishLaunching: 虽然你并不真的需要，但在 @implementaiton 中创建一个就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:22:56.933

委托可以继承任何适当的东西。它通常应该实现某种协议。协议是在两个类之间实现正式通信接口的一种方式。但是，委托最不可能从其通信伙伴类继承。

换句话说：协议通常用于克服多重继承的不可用性。（很像Java中的接口）

示例：UIViewController 子类的实例控制包含 UITableView 的视图。与其将 UITableView 子类化以实现其外观或数据，不如将两个委托分配给表视图对象。一个委托充当自定义布局的提供者（提供诸如标题视图之类的项目），另一个（？）委托提供正在显示的数据。现在，这个委托可以是任何对象，继承自 NSObject 并实现这两个协议。这个对象冷然后由视图控制器实例化并分配给表。然而，通常的做法是视图控制器本身充当它所控制的表的委托。这是一个很好的模式，但严格来说不是必需的。它可以是任何物体。现在自定义视图控制器继承自 UITableViewController（它已经实现了协议并继承自 ViewController）并充当表视图的委托。表格视图本身可以是 UITableView 的任何子类。（虽然这是一个不好的例子，因为子类化 UITableView 通常是不可取的）

如果委托不需要从任何类继承而只是实现协议，那么它至少应该从可可基类 NSObject 继承。这确保了它继承了任何对象的所有常用功能和行为。（初始化方法、复制方法、描述方法等）可能需要与框架的其他类一起正常工作，例如在 NSArray、NSLog 等中用作对象的beeing。

# innerhtml - JavaScript .innerHTMLworking 仅在手动调用时工作

> ID：14256503
> 
> 赞同：0
> 
> 时间：2013-01-10T11:08:12.880
> 
> 标签：innerhtml, javascript

我有一个非常简单的功能，即替换元素的 innerHTML。我已经尝试调试了好几个小时，但根本做不到，这令人愤怒。

当从按钮调用时，JavaScript（如下）运行良好，但当从另一个函数调用时它不起作用。我完全不知道为什么会这样，它是我应用程序的一个相当核心的部分

```
 // This loaded function in my actual code is a document listener
  // checking for when Cordova is loaded which then calls the loaded function
  loaded();

  function loaded() {
alert("loaded");
changeText();
  }

  function changeText() {
   alert("started");
   document.getElementById('boldStuff').innerHTML = 'Fred Flinstone';
  } 
```

按钮按下和 HTML 替换

```
 <div id="main">
  <input type='button' onclick='changeText()' value='Change Text'/>
  <p>Change this text >>  <b id='boldStuff'> THIS TEXT</b> </p> 
 </div> 
```

它也在[JSFiddle上](http://jsfiddle.net/7ZNKs/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:13:23.977

`changeText()`这里的问题是，当您调用该函数时，您尝试操作的元素还不存在。

为了确保代码仅在页面完成加载（并且所有元素都到位）后执行，您可以`onload`像这样在 body 元素上使用处理程序：

```
<body onload="loaded();"> 
```

此外，您应该知道，使用`innerHTML`属性来操作值是非常糟糕的做法。正确的方法是使用 DOM Manipulations，也许[这](http://www.howtocreate.co.uk/tutorials/javascript/dombasics)可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:14:24.780

您在加载元素 ( `boldStuff`) 之前加载脚本，

[测试链接 - 1](http://jsfiddle.net/7ZNKs/1/) - 将其`js`放在单独的文件中

[测试链接 - 2](http://jsfiddle.net/7ZNKs/3/) - 将 放在`js`最后，然后关闭`<body>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T11:19:08.100

你已经`innerHTML`通过调用函数改变`loaded();`了`onLoad`。将其放在一个空文件中，`.html`与浏览器打开并尝试相同。我已经评论了这个功能`loaded();`。现在它将在 onclick 中更改。

```
<div id="main">
  <input type='button' onclick='changeText();' value='Change Text'/>
  <p>Change this text >>  <b id='boldStuff'> THIS TEXT</b> </p> 
 </div>

<script>

  //loaded();

  function loaded() {
    alert("loaded");
    changeText();
  }

  function changeText() {
   alert("started");
   document.getElementById('boldStuff').innerHTML = 'Fred Flinstone';
  }

</script> 
```

# wcf - 在 IIS 7 上部署时出现 WCF 问题

> ID：14256505
> 
> 赞同：0
> 
> 时间：2013-01-10T11:08:15.080
> 
> 标签：wcf, web-services, .net-3.5

我们正在托管 WCF 服务并使用 .Net 3.5 框架。Visual Studio 服务器上一切正常。但是尝试在 IIS 7 上部署，我们收到以下错误：

CLR 类型“System.ServiceModel.Activation.WebServiceHostFactory, System.ServiceModel.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35”，作为“.svc”文件中 ServiceHost 指令的 Factory 属性提供，不是从 ServiceHostFactoryBase 派生的。

有没有人遇到过这样的问题？

# mysql - 如何在查询值范围mysql时建立索引

> ID：14256509
> 
> 赞同：2
> 
> 时间：2013-01-10T11:08:27.793
> 
> 标签：mysql, indexing

我有一个 sql 查询

```
 SELECT level, data, string, soln, uid 
 FROM user_data 
 WHERE level = 10 AND (timetaken >= 151 AND timetaken <= 217) AND uid != 1
 LIMIT 8852, 1; 
```

它从包含 150 万个条目的表中获取。

我已使用索引

```
alter table user_data add index a_idx (level, timetaken, uid); 
```

所以我面临的问题是在某些情况下查询需要超过 30 秒，在某些情况下不到 0.01 秒。

这里的索引有什么问题吗？

编辑：添加了解释查询详细信息

```
+----+-------------+------------------+-------+---------------+------------+---------+------+-------+--------------------------+
| id | select_type | table            | type  | possible_keys | key        | key_len | ref  | rows  | Extra                    |
+----+-------------+------------------+-------+---------------+------------+---------+------+-------+--------------------------+
|  1 | SIMPLE      | user_data | range | a_idx    | a_idx | 30      | NULL | 24091 | Using where; Using index |
+----+-------------+------------------+-------+---------------+------------+---------+------+-------+--------------------------+ 
```

表中的数据字段是一个文本字段。在大多数情况下，它的长度大于 255 个字符。这会导致问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:10:15.203

首先，您应该尝试使用 EXPLAIN 获取此查询的执行计划：

```
 EXPLAIN SELECT level, data, string, soln, uid 
 FROM user_data 
 WHERE level = 10 AND (timetaken >= 151 AND timetaken <= 217) AND uid != 1
 LIMIT 8852, 1; 
```

这是关于这个主题的一张很棒的幻灯片： [http ://www.slideshare.net/phpcodemonkey/mysql-explain-explained](http://www.slideshare.net/phpcodemonkey/mysql-explain-explained)

尝试添加不同的索引：

*   一个关于 uid 和 level
*   一个单独的时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T13:31:58.007

问题在于高偏移。为了选择第 8853 个结果，MySQL 必须在此之前扫描所有 8852 行。

顺便说一句，使用没有 order by 的 limit 可能会导致意想不到的结果。

为了加快具有高偏移量的查询，您应该使用 since..until 分页策略

# html - 在 Javascript 中生成动态 html 表在 IE 中不起作用

> ID：14256514
> 
> 赞同：1
> 
> 时间：2013-01-10T11:08:38.120
> 
> 标签：html, internet-explorer, html-table

我在 Javascript 中的 div 元素中创建了一个表，其中包含一些行和列

```
var parentElement = document.getElementById('divExcelData');
var tableElement = document.createElement('table');
  tableElement.border = "1";

  for (var r = 1; r <= 3; r++) {
      var rowElement = document.createElement('tr');
      for (var c = 1; c <= 2; c++) {

          var colElement = document.createElement('td');
          colElement.setAttribute("style", "width:80px; height:20px; border:1px solid Black;");              
          var divElement = document.createElement('div');

          divElement.id = r + '_' + c;
          divElement.contentEditable = "true";
          divElement.style.width = "100%";
          divElement.style.height = "100%";       
          colElement.appendChild(divElement);
          rowElement.appendChild(colElement);
          }
          parentElement.appendChild(tableElement);
    } 
```

但问题是当我从 Internet Explorer(9) 开发人员工具中调试页面时，它会将表格元素的内部 html 显示为...

```
<TABLE border=1>
<TR>\r\n
<TD>\r\n
<DIV style=\"WIDTH: 100%; HEIGHT: 100%\" id=1_1 contentEditable=true></DIV>
</TD>\r\n
<TD>\r\n
<DIV style=\"WIDTH: 100%; HEIGHT: 100%\" id=1_2 contentEditable=true></DIV></TD>
</TR>
\r\n
<TR>\r\n
<TD>\r\n
<DIV style=\"WIDTH: 100%; HEIGHT: 100%\" id=2_1 contentEditable=true></DIV>
</TD>
\r\n
<TD>
\r\n
<DIV style=\"WIDTH: 100%; HEIGHT: 100%\" id=2_2 contentEditable=true></DIV>
</TD>
</TR>
\r\n
<TR>
\r\n
<TD>
\r\n
<DIV style=\"WIDTH: 100%; HEIGHT: 100%\" id=3_1 contentEditable=true></DIV>
</TD>
\r\n
<TD>
\r\n
<DIV style=\"WIDTH: 100%; HEIGHT: 100%\" id=3_2 contentEditable=true>
</DIV>
</TD>
</TR>
</TABLE> 
```

我不知道为什么在 HTML 中添加了 \r\n 并且样式元素包含 (\") 而不是 (")。这就是页面什么也不显示的原因。此代码在 Chrome 和 Firefox 中运行良好。

# javascript - jQuery UI Slider 在文档上查找 id 准备好了吗？

> ID：14256517
> 
> 赞同：0
> 
> 时间：2013-01-10T11:08:46.813
> 
> 标签：javascript, jquery, jquery-ui

[我有这样的情况，可以根据其 id 从jquery ui 滑块](http://docs.jquery.com/UI/API/1.8/Slider)中的隐藏元素中预填充存储值，如下所示，

```
jQuery(function(){
    if(jQuery("input[name=color_overlay_nav_bar]").val() != ''){ 
                   jQuery(".slider_global_style_overlay ").slider({
                       create: function(event, ui) {
                            console.log(jQuery(this).attr('id'));
                            if(jQuery(this).attr('id') == 'nav_overlay_id'){
                                value:jQuery("input[name=color_overlay_nav_bar]").val();
                            }
                       }
                   });
 }
}); 
```

这里 input[name=color_overlay_nav_bar] 具有不透明度值，这需要根据滑块 id 预先填充。我已经使用`Create`文档就绪函数上的事件来查找 id

但我仍然无法得到它。我在这里错过了一些东西。我在这方面做错了什么。请指教。

谢谢， 迪内什

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-10T11:58:24.013

对不起，我的英语太差了。嘿嘿嘿

你不能像这样在“create”中使用“value”。

尝试这个...

```
 $(function(){
      if($("input[name=color_overlay_nav_bar]").val() != '')
      { 

          $(".slider_global_style_overlay ").slider
          ({
              create: function(event, ui) 
              {
                    if($(this).attr('id') == 'nav_overlay_id'){
                        $(this).slider("value", $("input[name=color_overlay_nav_bar]").val());
                    }
              }
          })
      }

    }); 
```

或者

在你的幻灯片实例之后试试这个

```
if($("input[name=color_overlay_nav_bar]").val() != '')
{
    $("#nav_overlay_id").slider("value", $("input[name=color_overlay_nav_bar]").val());
} 
```

# java - java客户端应用程序中的2路相互协商

> ID：14256518
> 
> 赞同：1
> 
> 时间：2013-01-10T11:08:46.110
> 
> 标签：java, ssl, httpsurlconnection

我正在尝试为在线购物创建 java 桌面应用程序。到目前为止，我可以使用 httpsurlconnect 登录、选择产品并选择结帐。但结帐网站重定向到银行支付网关后。而且我总是得到响应，无法在重定向后处理您的请求。我认为这是因为支付网关使用双向相互协商（不确定）。那么如何根据第四个请求创建双向相互协商。

我在互联网上做了一些研究。我发现它需要 keystore.jks 和 truststore.jks。我假设 JDK 带有可以接受服务器证书的 CA 信任库。我需要带有客户端密钥和证书的 keystore.jks 文件。如果我创建自签名证书，服务器会接受它吗？服务器用户经过验证的 CA 证书，我无法控制服务器。如何获取客户端 keystore.jks 并在第四次请求时实现握手。下面给出了我的实现的示例代码。

```
 public void query(){
//request 1
        String url_1 = "https://www.shop.com/login.do";
        String ref_1 = "https://www.shop.com/";
        Map<String, String> post = new HashMap<String, String>();
        post.put("userName", var.userName);
        post.put("password", var.password);
        String new_post_1 = Generate_post(post);
        Connect(url_1, ref_1, new_post_1);
//request 2
        String url_2 = "https://www.shop.com/select_product.do";
        String ref_2 = "https://www.shop.com/login.do";
        Map<String, String> post = new HashMap<String, String>();
        post.put("product", var.Name);
        post.put("id", var.id);
        post.put("price", var.price);
        String new_post_2 = Generate_post(post);
        Connect(url_2, ref_2, new_post_2);
//request 3
        String url_3 = "https://www.shop.com/checkout.do";
        String ref_3 = "https://www.shop.com/select_product.do";
        Map<String, String> post = new HashMap<String, String>();
        post.put("product", var.Name);
        post.put("id", var.id);
        post.put("total_price", var.total_price);
        post.put("checkout", var.checkout);
        String new_post_3 = Generate_post(post);
        Connect(url_3, ref_3, new_post_3);              
//request 4     
        String url_4 = "https://secure.payment.com/gateway.do";
        String ref_4 = "https://www.shop.com/checkout.do";
        Map<String, String> post = new HashMap<String, String>();
        post.put("total_price", var.total_price);
        post.put("bank", var.bank);
        post.put("confirm", var.confirm);
        String new_post_4 = Generate_post(post);
        Connect(url_4, ref_4, new_post_4);
        } 
```

连接方法：

```
void Connect(String https_url, String referal, String query) throws IOException{

    URL url = new URL(https_url);
    HttpsURLConnection con = (HttpsURLConnection) url.openConnection();
    CookieHandler.setDefault(new CookieManager(null, CookiePolicy.ACCEPT_ALL));
//set properties
    HttpsURLConnection.setFollowRedirects(true);
    con.setDoOutput(true);
    con.setDoInput(true);
    con.setRequestMethod("POST");
    con.setUseCaches(false);
    con.setAllowUserInteraction(false);
    con.setRequestProperty("User-Agent", "Mozilla/5.0 (Windows NT 6.1; rv:8.0) Gecko/20100101 Firefox/8.0");
    con.setRequestProperty("Accept","text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
    con.setRequestProperty("Accept-Language","en-us,en;q=0.5");
    con.setRequestProperty("Connection","keep-alive");
    con.setRequestProperty("charset","iso-8859-1");
    con.setRequestProperty("Referer",referal);
    con.setRequestProperty("Content-Type","application/x-www-form-urlencoded");
    con.setRequestProperty("Content-Length",String.valueOf(query.length()));

// Create Output streams
    BufferedWriter outStream = new BufferedWriter(new OutputStreamWriter(con.getOutputStream()));
    outStream.write(query);
    outStream.flush();
    outStream.close();

if(con.getResponseCode()==HttpsURLConnection.HTTP_OK ){
// Create Input streams   
    InputStreamReader in = new InputStreamReader(con.getInputStream());
    BufferedReader inStream = new BufferedReader(in, 1024*24);
    String html;
    StringBuffer page = new StringBuffer(); 
    while((html = inStream.readLine()) != null) {
        page.append(html+"\n"); }    

    inStream.close();
}else{ 
    System.out.println(con.getHeaderFields());
    InputStreamReader in = new InputStreamReader(con.getErrorStream());
    BufferedReader inStream = new BufferedReader(in);
    String html;
    StringBuffer page = new StringBuffer(); 
    while((html = inStream.readLine()) != null) {
        page.append(html+"\n"); }
    }
    con.disconnect();
} 
```

# mysql - 创建表抛出错误

> ID：14256519
> 
> 赞同：0
> 
> 时间：2013-01-10T11:08:47.933
> 
> 标签：mysql, sql, phpmyadmin

您好我正在尝试在 Mysql 中使用 SQL 创建一个表，但我不断收到错误消息。这是我的代码：

```
USE e-commerce
  CREATE TABLE `categories` (
`id` SMALLINT NOT NULL AUTO_INCREMENT,
`category` VARCHAR( 30) NOT NULL,
PRIMARY KEY (`id`),
UNIQUE KEY `category` (`category`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

当我尝试在 phpmyadmin SQL 控制台中运行它时，我收到此错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'CREATE TABLE `categories` ( `id` SMALLINT NOT NULL AUTO_INCREMENT, `category` ' at line 2 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T11:10:30.030

后面加分号`use`

```
USE e-commerce;
CREATE TABLE `categories` (
  `id` SMALLINT NOT NULL AUTO_INCREMENT,
  `category` VARCHAR( 30) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `category` (`category`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T11:11:27.077

缺少分号

```
 USE e-commerce;
  CREATE TABLE `categories` (
`id` SMALLINT NOT NULL AUTO_INCREMENT,
`category` VARCHAR( 30) NOT NULL,
PRIMARY KEY (`id`),
UNIQUE KEY `category` (`category`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T11:14:06.907

在您的代码中，您有 2 个查询。您应该始终以分号结束查询。

所以尝试以下

```
USE e-commerce;
CREATE TABLE `categories` (
`id` SMALLINT NOT NULL AUTO_INCREMENT,
`category` VARCHAR( 30) NOT NULL,
PRIMARY KEY (`id`),
UNIQUE KEY `category` (`category`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

# c++ - 给定两个点和两个向量，找到交点

> ID：14256525
> 
> 赞同：4
> 
> 时间：2013-01-10T11:08:55.110
> 
> 标签：c++, math, vector-graphics

> **可能重复：**
> [如何检测两条线段相交的位置？](https://stackoverflow.com/questions/563198/how-do-you-detect-where-two-line-segments-intersect)

给定两个点`a`和`b`两个向量`v`，`u`我想找到第三个点`c`，它是以下方式的交点：

```
vector2 intersection(vector2 a, vector2 v, vector2 b, vector2 u)
{
    float r, s;

    a + r * v = b + s * u;
    r * v - s * u = b - a

    r * v.x - s * u.x = b.x - a.x
    r * v.y - s * u.y = b.y - a.y
} 
```

除了使用高斯消元法来解决这个系统，还有其他方法吗？或者这是处理这个问题的最佳（或至少是可接受的）方式？

**编辑**：定义`vector2`

```
typedef union vector2
{
    float v[2];
    struct { float x, y; };
} vector2; 
```

`a`并且`b`也是 type `vector2`，因为点和向量之间的唯一区别在于它通过仿射变换进行变换的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:24:37.933

对我来说似乎是一个分配问题。这是帮助您编写代码的逻辑。

让我们称第一条射线为`R0`。
点的轨迹`R0`定义为`P`：

```
P = P0 + alpha x V0 
```

对于第二条射线`R1`：

```
P = P1 + beta x V1 
```

因为它们应该相交：

```
P0 + alpha x V0 = P1 + beta x V1 
```

`alpha`和`beta`是未知数，我们在`x`any中有两个方程`y`。

解决未知数并返回交点。

IE，

```
P0.x + alpha * V0.x = P1.x + beta * V1.x
P0.y + alpha * V0.y = P1.y + beta * V1.y 
```

解决`alpha`和`beta`。

如果 和 都有一个真正的正解，则`alpha`光线`beta`相交。
如果 和 都有一个实数但至少有一个负解，则`alpha`扩展`beta`射线相交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T12:04:35.127

这是简单的数学。

但是，首先，检查您是否有交集。如果两个向量都是平行的，您将无法解决：

```
// Edit this line to protect from division by 0 
if (Vy == 0 && Uy == 0) || ((Vy != 0 && Uy != 0 && (Vx/Vy == Ux/Uy)) // => Fail. 
```

然后（我不会显示计算，因为它们很长，但结果是）：

```
R = (AxUy - AyUx + ByUx - BxUy) / (VyUx - VxUy)  
S = (Ax - Bx + RVx) / Ux 
```

希望对你有所帮助。

# asp.net-mvc-4 - 使用没有 global.asax 的结构映射注入 NServiceBus

> ID：14256526
> 
> 赞同：2
> 
> 时间：2013-01-10T11:08:56.640
> 
> 标签：asp.net-mvc-4, dependency-injection, asp.net-web-api, structuremap, nservicebus

我是 NServiceBus 的新手，正在努力使用结构映射在我的控制器中注入 IBus。实际上，在做了一些研究之后，我发现我们可以通过将以下代码放入 global.asax 的 Application_Start 事件中来注入它 -

```
protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);

        Configure.With()
                 .Log4Net()
                 .StructureMapBuilder()
                 .XmlSerializer()
                 .MsmqTransport()
                 .IsTransactional(false)
                 .PurgeOnStartup(false)
                 .UnicastBus()
                 .ImpersonateSender(false)
                 .CreateBus();
    } 
```

在我的控制器中，我可以使用 IBus 作为属性或构造函数注入：

```
private IBus Bus { get; set; }
    private ITest Test { get; set; }

    public MyLinkController(IBus bus, ITest test)
    {
        Bus = bus;
        Test = test;
    } 
```

这工作正常并且注入总线没有任何问题。但我的问题是我无法控制 global.asax，所以我想将配置放在其他地方，例如我尝试将其放在结构映射注册表中，如下所示：

```
For<IBus>().Use(
            () =>
                NServiceBus.Configure.With()
                                         .Log4Net()
                                         .StructureMapBuilder()
                                         .XmlSerializer()
                                         .IsTransactional(true)
                                         .PurgeOnStartup(false)
                                         .UnicastBus()
                                         .ImpersonateSender(false)
                                         .CreateBus()
                                         .Start()
                ); 
```

但这无济于事。看起来结构映射需要在自己初始化之前知道配置。那么没有 application_start 事件有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T11:02:57.853

我能够通过结构图本身来做到这一点。这就是我更改结构映射注册表的方式：

```
public ServiceBusRegistry()
    {
        ForSingletonOf<IBus>().Use(
            NServiceBus.Configure.With()
                       .Log4Net()
                       .DefaultBuilder()
                       .XmlSerializer()
                       .MsmqTransport()
                       .IsTransactional(false)
                       .PurgeOnStartup(false)
                       .UnicastBus()
                       .ImpersonateSender(false)
                       .CreateBus()
                       .Start()
            );
    } 
```

将其放入结构映射的 Registry 类中后，我可以在我的控制器中注入 IBus：

```
public MyController(IRepository<Test, int> repository, IBus bus)
    {
        _repository = repository;
        _bus = bus;
    } 
```

注意，这里我使用 DefaultBuilder 而不是 StructureMapBuilder。我将来可能会尝试进一步改进它，但到目前为止它对我来说工作正常。

**更新**（在我们的项目设计更改后）：

现在我们的 API 项目中有一个启动类（该项目是 ASP.NET Web API）虽然我们不使用 global.asax 的 Application_start，但我们可以将启动代码放在这个启动类中：

```
[assembly: WebActivatorEx.PreApplicationStartMethod(typeof(WebApiPreStartup), "Start", Order = -999)] //make sure we are first

namespace ADP.DS.FrontOffice.Quoting.WebApi
{
    public static class WebApiPreStartup
    {
        public static void Start()
        {
            GlobalFilterConfig.Configure(GlobalConfiguration.Configuration);
            BusConfig.Init();
        }
    }
} 
```

并且配置在单独的类中：

```
public static void Init()
    {
        Configure.Serialization.SystemXml();
        Configure.ScaleOut(s => s.UseSingleBrokerQueue());
        var configUnicastBus = Configure.With()
            .StructureMapBuilder(ObjectFactory.Container)
            .UseTransport<NServiceBus.RabbitMQ>()
            .PurgeOnStartup(false)
            .UnicastBus();
        configUnicastBus.SendOnly();
    } 
```

# jsf-2 - 我的 h:inputText 值在绑定到从 HashMap 收集的参数化类的某个实例的字段时未验证？

> ID：14256530
> 
> 赞同：0
> 
> 时间：2013-01-10T11:09:07.093
> 
> 标签：jsf-2, hashmap, validation, parameterized-constructor

我正在尝试做一些“自定义轻量级”JSF 组件绑定。在我的bean（控制一些JSF页面）中，我声明了一个HahsMap，其中跨越我的`h:inputText`id（出现在页面中）的键将这些id映射到自定义`HInputText<T>`对象（`T`在下面给出的示例中是Long）。然后我使用`HInputText<T>`对象来保存相应 h:inputText 属性的子集：`value`应该是类型`T`, `rendered`,`required`等。在这个方向上，来自`HInputText<T>`对象的字段为属性赋予值`h:inputText`。

我的问题是，当在`h:inputText`内部使用这样的 a时`h:form`，不会发生 JSF 验证：我可以在`h:inputText`（应该包含 Long 值）中键入字母数字字符，并且我的表单提交时不会显示任何错误。请注意，`required`属性`rendered`管理正确（因为`required`设置为 true，所以当我将该`h:inputText`字段留空时出现错误），并且当我尝试`h:inputText`使用一些`h:outputText`字母数字字符显示页面中的值时。

是否有一些技巧可以使 JSF 验证工作而不必为每个显式定义自定义验证器`h:inputText`？

HInputText.class：

```
public class HInputText<T>
{
    private String id;
    private boolean rendered;
    private boolean required;
    private T value;
    private Class<T> myClass;

    // getters and setters for all fields

    public HInputText(Class<T> myClass, String id)
    {
        this.myClass = myClass;
        this.id = id;
        this.rendered = true;
        this.required = true;
    }
} 
```

我的托管 Bean 中的代码片段：

```
@ManagedBean(name="saisieController")
@SessionScoped
public class SaisieController
{
    ...
    private HashMap<String,HInputText<Long>> htagLongInputTexts;

    public HashMap<String, HInputText<Long>> getHtagLongInputTexts()
    {
        return htagLongInputTexts;
    }

    public void setHtagLongInputTexts(HashMap<String, HInputText<Long>> hLongInputTexts)
    {
        this.htagLongInputTexts = hLongInputTexts;
    }

    public void addHtagLongInputText(HInputText<Long> hLongInputText)
    {
        getHtagLongInputTexts().put(hLongInputText.getId(), hLongInputText);
    }

    public HInputText<Long> getHtagLongInputText(String hLongInputTextId)
    {
        return(getHtagLongInputTexts().get(hLongInputTextId));
    }

    @PostConstruct
    public void init()
    {
        setHtagLongInputTexts(new HashMap<String, HInputText<Long>>());
        addHtagLongInputText(new HInputText<Long>(Long.class, "HIT_LongTestHIT"));
    }

    public String doNothing()
    {
        return null;
    }
} 
```

最后是我的 jsf 页面的一个片段：

```
<h:form>
    <h:inputText
        id = "HIT_LongTestHIT"
        value = "#{saisieController.htagLongInputTexts['HIT_LongTestHIT'].value}"
        rendered = "#{saisieController.htagLongInputTexts['HIT_LongTestHIT'].rendered}"
        required = "#{saisieController.htagLongInputTexts['HIT_LongTestHIT'].required}"
    />
    <h:message for = "HIT_LongTestHIT" styleClass = "error-text" />
    <h:commandButton value = "submit" action = "#{saisieController.doNothing()}" />
    <h:outputText value = "#{saisieController.htagLongInputTexts['HIT_LongTestHIT'].value}" />
</h:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:30:17.867

> *是否有一些技巧可以使 JSF 验证工作而不必为每个 h:inputText 显式定义自定义验证器？*

不，那是不可能的。由于*类型擦除*，泛型类型信息在运行时不可用。JSF/EL 不知道它`T`实际上是 a `Long`，更不用说实际上*有一些* `T`. 您确实需要明确指定一个转换器，在此特定示例中[`LongConverter`](http://docs.oracle.com/javaee/6/api/javax/faces/convert/LongConverter.html)，转换器 ID 为[`javax.faces.Long`](http://docs.oracle.com/javaee/6/api/constant-values.html#javax.faces.convert.LongConverter.CONVERTER_ID).

```
<h:inputText ... converter="javax.faces.Long"> 
```

或者，动态地，所以你想要

```
<h:inputText ...>
    <f:converter converterId="#{saisieController.htagLongInputTexts['HIT_LongTestHIT'].converterId}" />
</h:inputText> 
```

[`javax.faces.convert`您可以在包摘要](http://docs.oracle.com/javaee/6/api/javax/faces/convert/package-summary.html)中找到所有可用标准 JSF 转换器的概述。您可以通过导航到公共常量上的*常量字段值*链接来查找它们的转换器 ID `CONVERTER_ID`。

# java - 比较两个数组，只忽略起始元素

> ID：14256533
> 
> 赞同：-5
> 
> 时间：2013-01-10T11:09:17.340
> 
> 标签：java

我必须比较两个数组是否相等，只忽略第一个元素。是否可以在不迭代的情况下实现相同的目标

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T11:11:25.267

您可以使用[`Arrays.copyOfRange()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOfRange%28int%5B%5D,%20int,%20int%29)来获取子数组并[`Arrays.equals()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#equals%28int%5B%5D,%20int%5B%5D%29)执行相等性检查。

请注意，虽然没有明确的迭代 - 在幕后有迭代。

代码快照：

```
int arr1[] = { 1,2,3,4 };
int arr2[] = { 0,2,3,4 };
System.out.println(Arrays.equals(
        Arrays.copyOfRange(arr1, 1, arr1.length), 
        Arrays.copyOfRange(arr2, 1, arr2.length))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:13:46.300

无论您尝试什么，为了检查两个数组是否相等，您必须检查每个元素。为此，您必须通过遍历数组来访问所有元素。尽管如此，您可以通过使用一些内置来避免手动执行此操作功能，相同的逻辑发生在幕后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T11:15:26.500

是的。

假设您的两个数组分别命名为 A 和 B。

1.  创建由 A 中除第一个元素( `System.arraycopy(A, 1, C, 0, A.length();`)之外的所有元素组成的数组 C。
2.  创建由 B 中除第一个元素之外的所有元素组成的数组 D。
3.  调用`Arrays.equals()`比较 C 和 D。

另外，请记住 Renjiths 的观点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T11:16:04.937

```
String[] array1 = {"hi","hi2"};
List<String> temp = new ArrayList<String>(Arrays.asList(array1));

String[] array2 = {"hi3","hi2"};
List<String> temp2 = new ArrayList<String>(Arrays.asList(array2));

boolean condition = temp.subList(1, temp.size()).equals(temp2.subList(1, temp2.size())); 
```

正如阿米特已经指出的那样，**幕后有迭代**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T11:16:34.353

```
Arrays.equals(Arrays.asList(array1).subList(1, array1.length), Arrays.asList(array2).subList(1, array2.length)); 
```

Arrays.equals 将使用循环。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-10T11:45:01.403

我相信您（或您调用的方法）将不得不遍历这些数组，因为数组不是对象并且没有 equals 方法。

运算符 == 仅在原始类型的情况下比较值，在其他情况下它比较指针（内存地址）。这意味着只有当两个数组都是一个且相同时，你才会得到真，如果数组是两个独立但相同的数组，你会得到假。

复制一部分数组并比较它们会导致数组的多次迭代，即使它可能并不明显。（获取两个数组的子数组每个都包含至少 1 次迭代，并将它们进行比较。）

也就是说，您可以使用 1 个周期来遍历数组并逐个比较值，从索引 1 开始跳过第一个元素。在以下代码中将 Object 类型参数替换为您的数组类型：

```
private boolean compareMyArrays(Object[] array1, Object[] array2) {
    if ((array1 == null) && (array2 == null)) {
        return true;
    }

    if ((array1 == null) || (array2 == null)) {
        return false;
    }

    if (array1.length != array2.length) {
        return false;
    }

    for (int i = 1; i < array1.lenght; i++) {
        if ( !array1[i].equals(array2[i]) ) {
            return false;
        }
    }

    return true;
} 
```

希望这可以帮助。

# django - 自定义用户的管理面板权限仅读取（不删除，编辑或添加）

> ID：14256536
> 
> 赞同：4
> 
> 时间：2013-01-10T11:09:25.800
> 
> 标签：django, django-admin, django-permissions

我希望最终用户使用管理面板来查看创建的对象，但我不希望他添加-删除或编辑任何创建的对象。但在 django 管理面板用户设置中，只有添加、删除或编辑权限。有没有办法做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-22T15:10:07.173

首先，您创建一个管理面板用户`python manage.py runserver`并`localhost:your_port/admin`使用帐户登录转到用户更改用户活动，超级用户，管理员状态

# android - 用于自定义文件扩展名的android意图过滤器

> ID：14256537
> 
> 赞同：3
> 
> 时间：2013-01-10T11:09:26.203
> 
> 标签：android, android-intent

我正在尝试制作一个 android 应用程序来打开扩展名为 .abc 的文件，这是我来自 android manifest xml 的应用程序部分

```
<application android:label="@string/app_name" android:icon="@drawable/icon">
    <activity android:name="com.example.app.ActName" android:label="AppName">
        <intent-filter>
            <action android:name="android.intent.action.VIEW"/>
            <category android:name="android.intent.category.DEFAULT"/>
            <category android:name="android.intent.category.BROWSABLE"/>
            <data android:mimeType="image/jpeg"/>
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="file" />
            <data android:mimeType="*/*" />
            <data android:pathPattern=".*\\.abc" />
            <data android:host="*" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>
</application> 
```

我使用了最流行和相关问题中的所有经验

[特定文件扩展名的Android意图过滤器？](https://stackoverflow.com/questions/1733195/android-intent-filter-for-a-particular-file-extension)

[Android意图过滤器：将应用程序与文件扩展名相关联](https://stackoverflow.com/questions/3760276/android-intent-filter-associate-app-with-file-extension)

[Android 如何为自定义文件扩展名创建意图过滤器，这不会使其成为手机上所有内容的选择器的一部分](https://stackoverflow.com/questions/9518318/android-how-to-create-intent-filter-for-custom-file-extension-that-does-not-make)

最后这不起作用 - 当我在 ES 文件浏览器中单击名为“name.abc”的文件时，它会询问我是否要以文本或图像等形式打开文件，而实际上应该只打开文件在我的应用程序中

## 我究竟做错了什么？通过在任何文件管理器中单击具有相应扩展名的文件来启动应用程序的正确意图过滤器是什么？

# 更新。

看起来不同的 android 系统和不同的文件浏览器以不同的方式运行 - 一个意图过滤器在“ES 文件资源管理器”中的 4.2 和默认文件管理器中的 4.0.4 上工作得很好，但在 4.2 和 4.0 上根本不起作用。 “Total Commander”中的 4 和“ES 文件资源管理器”中的 4.0.4

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-26T08:52:12.720

首先，`intent-filter`您的示例中的第一个使用 MIME type `image/jpeg`。你`jpeg`的`.abc`分机是吗？

我认为这不起作用可能有三个原因：

1.  您需要添加更多 MIME 类型。尝试添加以下内容：

    ```
    <intent-filter>
        <action android:name="android.intent.action.VIEW"/>
        <category android:name="android.intent.category.DEFAULT"/>
        <category android:name="android.intent.category.BROWSABLE"/>
        <data android:mimeType="application/abc"/>
    </intent-filter>

    <intent-filter>
        <action android:name="android.intent.action.VIEW"/>
        <category android:name="android.intent.category.DEFAULT"/>
        <category android:name="android.intent.category.BROWSABLE"/>
        <data android:mimeType="application/octet-stream"/>
    </intent-filter> 
    ```

    而且，如果您的`.abc`格式是文本格式：

    ```
    <intent-filter>
        <action android:name="android.intent.action.VIEW"/>
        <category android:name="android.intent.category.DEFAULT"/>
        <category android:name="android.intent.category.BROWSABLE"/>
        <data android:mimeType="text/plain"/>
    </intent-filter> 
    ```

2.  您已注册该`file`计划。您可能还需要该`content`方案：

    ```
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.BROWSABLE" />
        <data android:scheme="content" />
        <data android:mimeType="*/*" />
        <data android:pathPattern=".*\\.abc" />
        <data android:host="*" />
    </intent-filter> 
    ```

3.  [有传言](https://stackoverflow.com/a/12153391/1839209 "SO post声称pathPatterns仅支持单点")说`pathPattern`带有点的文件只匹配包含单个点的文件。在您的示例中，这意味着您的应用程序将与`One.abc`但不与关联`Two.Dots.abc`。尝试添加更多 pathPatterns`.*\\..*\\.abc`等`.*\\..*\\..*\\.abc`：

    ```
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.BROWSABLE" />
        <data android:scheme="file" />
        <data android:mimeType="*/*" />
        <data android:pathPattern=".*\\..*\\.abc" />
        <data android:host="*" />
    </intent-filter> 
    ```

# javascript - 使用计时器调用的javascript函数无法正常工作

> ID：14256545
> 
> 赞同：0
> 
> 时间：2013-01-10T11:10:09.527
> 
> 标签：javascript, timer, setinterval

我写了这段代码来执行简单的操作，但根本不工作

```
<script type="text/javascript">
    var a = 10;

    function add() {
        window.setInterval(a2, 10000);

            alert(a);

    }
    function a2() {

        a = a + 2;
    }

</script> 
```

此警报仅返回值 10 一次。如何通过定时和循环来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:13:07.200

如果您想要更多警报，则需要放入`alert()`定时功能本身。执行不会返回`add()`from `a2()`。

```
function a2() {
    a = a + 2;
    alert(a);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T11:13:13.853

您的警报指令超出间隔，请尝试以下代码：

```
<script type="text/javascript">
    var a = 10;

    function add() {
        window.setInterval(a2, 10000);
   }
   function a2() {
        a = a + 2;
        alert(a);
   }

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T11:16:44.530

试试这个：

```
 var a = 10;

  window.setInterval(add, 1000);

  function add() {
      alert(a);
      a = a + 2;
  } 
```

# javascript - 什么导致模糊？

> ID：14256549
> 
> 赞同：0
> 
> 时间：2013-01-10T11:10:13.423
> 
> 标签：javascript, jquery, click, wysiwyg, blur

我正在尝试制作自己的所见即所得编辑器。

我有一个问题：当我单击控制按钮时，contenteditable div 会失去焦点并执行一些操作，只有在未单击控制按钮时我才想做这些操作。

那么在javascript中是否有这样的东西：

```
$('#tarea').blur(function(event){
    if($(event.reasonelement).is('#bold')) return false;
    //Other actions here...
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:18:03.903

一种方法是捕获文档的点击事件并决定如何处理：

```
$(document).click(function(event){
  elem = $("#tarea");
  if (!elem.is(event.target) && elem.has(event.target).length == 0) {
    // do your stuff here..
  }
}); 
```

*PS：这应该适用于所有类型的元素，而不仅仅是文本区域。*

# mysql - 加入选定的行

> ID：14256560
> 
> 赞同：0
> 
> 时间：2013-01-10T11:10:37.167
> 
> 标签：mysql

首先，我发现了类似的[问题](https://stackoverflow.com/questions/5531560/mysql-join-only-selected-rows)和[答案](https://stackoverflow.com/questions/7630372/join-only-for-specific-rows-where-value-matches-a-variable)，但它们似乎不适用于我的情况。

我有一个项目，我想显示相应的视频。视频链接存储在`fe_media`类型为 的表中`Video`。当前项目也有一些图像，它们存储在同一个表中，但类型为`Image`. 所有这些记录都通过规范化表链接。

对于我所阅读的内容，我的查询应该如下所示：

```
 SELECT project.id, project.title, media.type, media.link
FROM projects AS project
     LEFT JOIN norm_project_media AS norm ON norm.n_project_id = project.id
     LEFT JOIN media AS media ON media.id = norm.n_media_id 
                                 AND media.type = 'Video'
WHERE project.id = '".$item."' 
```

我得到了所有的项目结果，但`NULL`在媒体链接上。我知道`$item`值是正确的，应该显示视频链接，因为当我在子句`AND media.type = 'Video'`后添加行时，它会显示视频链接。`WHERE`这个解决方案的问题是，当某个项目在`fe_media`表格中没有视频时，什么都不会显示（甚至项目数据也不显示）。

:(

**编辑：** 修正了错字，仍然是同样的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:32:25.457

好的，我知道了

我更改了`media.link`记录的顺序，因此视频链接将位于顶部（高于所有`NULL`值），然后将限制设置为 1 条记录，如下所示：

```
 SELECT project.id, project.title, media.type, media.link
FROM projects AS project
     LEFT JOIN norm_project_media AS norm ON norm.n_project_id = project.id
     LEFT JOIN media AS media ON media.id = norm.n_media_id AND media.type = 'Video'
WHERE project.id = '".$item."'
ORDER BY media.link DESC
LIMIT 1 
```

也许不是最漂亮的解决方案，但至少它有效

# git - 如何让作曲家使用精确的 SHA1 值？

> ID：14256563
> 
> 赞同：14
> 
> 时间：2013-01-10T11:10:59.277
> 
> 标签：git, composer-php

我想通过指定提交的 SHA1 来确保作曲家使用的是 git 存储库的确切版本。我怎样才能做到这一点？

我尝试将 sha1 代码放入版本字符串中，但这不起作用：

```
 [UnexpectedValueException]                                                   
 Could not parse version constraint a93cbe224a6922f181f55c7a35bde0cf61a6a5a4 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-10T11:27:04.747

您可以在版本之后指定它，例如（假设您想要主分支）：`"dev-master#a93cbe224"`

[在作曲家文档](http://getcomposer.org/doc/04-schema.md#package-links)中阅读有关要求的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-16T15:55:17.130

对于 Drupal 的东西，如果你想固定到一个特定的版本，你可以这样做：

```
composer require --dev drupal/rules:8.3.x-dev#f089923e84fdbc81f4101a684a3f1418ff1da51e 
```

样式 Drupal 标签在`-unstableN`packagist 上不可用。

# cakephp - 在 CakePHP 1.3 中将视图渲染到变量（生成 pdf 和下载文件）

> ID：14256571
> 
> 赞同：3
> 
> 时间：2013-01-10T11:11:35.533
> 
> 标签：cakephp, cakephp-1.3

我正在尝试将视图呈现给变量。然后，此变量将用于生成 pdf。然后应该使用媒体视图下载该 pdf。

这是我的控制器代码：

```
 $dir = ROOT . '/app/tmp/evaluationpdf/';
        $path = $dir . $evaluationid . '.pdf';

        $evaluation = $this->SelfEvaluation->find('first', array(
            'conditions' => array('SelfEvaluation.id' => $evaluationid),
            'contain' => array('Submission' => array('Application'), 'Applicant', 'Member')));

        $this->set(compact('evaluation'));
        $this->output = '';
        $this->layout = false;
        $html = $this->render('/elements/self_evaluation_pdf');

        $this->_generate_pdf($html, $path);

        $this->view = 'Media';

        $params = array(
                'id' => $evaluationid . '.pdf',
                'name' => $evaluationid,
                'download' => true,
                'extension' => 'pdf',
                'path' => $dir,
        );

        $this->set($params); 
```

该文件按原样创建，但第一个 '$this->render' 输出也会发送到浏览器。

该文件永远不会下载。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:35:40.057

简单的解决方法是在您的第一次 render() 调用之后将 $this->output 设置为 '' 。

更正确的方法是使用 requestAction() 而不是 render()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:59:23.763

在 CakePHP 2.x 中，为了使用视图生成条形码标签格式，我做了以下操作：

```
 $response = $this->render('/Labels/' . $printer['Printer']['model'] . '/manifest', 'ajax');
      $body = $response->body();
      $response->body(''); 
```

这给了我作为 $body 的视图数据。然后我可以重定向，或者如果请求是 ajax，只需将 autoRender 设置为 false 并返回 ''。

这有点混淆了 MVC 水域，但它很简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T07:07:47.027

您只需在 self_evaluation_pdf.ctp 中编写以下代码

```
 header("Content-Disposition: attachment; filename='downloaded.pdf'");
  header('Content-type: application/pdf'); 
```

此视图中的动态内容将在客户端下载为 PDF 文件。

# ruby-on-rails - NHibernate 喜欢用于 Rails 的模型版本控制吗？

> ID：14256572
> 
> 赞同：0
> 
> 时间：2013-01-10T11:11:35.260
> 
> 标签：ruby-on-rails, rails-activerecord

在 NHibernate 中，可以使用同一个表处理版本，只需在该表中添加版本号列，[请参见此处](http://nhforge.org/blogs/nhibernate/archive/2009/04/14/nhibernate-mapping-concurrency.aspx)。出于严重的性能原因，我希望该逻辑包含在同一个表中而不是集合表中。Rails 有类似的东西吗，还是我需要自己动手？

我查看了所有可用的选项，例如 audited、vestal_versions、paper_trail，必须说我对所有这些选项都感到失望。它们不仅使用正确的方法很麻烦，而且还存在性能瓶颈。要恢复 paper_trail 中的版本，我必须对数据库进行 3 次查询以获取要恢复的数据，然后再进行另一个查询以进行更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:36:45.927

你的意思是[乐观锁定](http://guides.rubyonrails.org/active_record_querying.html#optimistic-locking)？

# c# - 多线程 MSMQ 监听

> ID：14256579
> 
> 赞同：3
> 
> 时间：2013-01-10T11:12:04.550
> 
> 标签：c#, msmq

我目前正在从我的 MSMQ 中读取数据（为简洁起见）：

```
public void Start()
{
    this.queue.ReceiveCompleted += this.ReceiveCompleted;
    this.queue.BeginReceive();
}

void ReceiveCompleted(object sender, ReceiveCompletedEventArgs e)
{
    this.queue.EndReceive(e.AsyncResult);

    try
    {
        var m = e.Message;
        m.Formatter = this.formatter;

        this.Handle(m.Body);
    }
    finally
    {
        this.queue.BeginReceive();
    }
} 
```

但是，这只允许我串行处理消息。如何修改此代码以允许并行消息处理？

我知道我可以将其`this.queue.BeginReceive();`移出`finally`并移入顶部，`ReceiveCompleted`但是如何阻止产生与我有消息一样多的线程？如何明智地控制并行度，以免线程池泛滥？是否有一些内置机制，或者我必须编写自己的经理？

**编辑：**我的目标是更快地处理消息。消息的处理涉及对第 3 方的异步调用，因此目前我的实现正在浪费大量时间来通过队列。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T11:29:39.007

我认为只托管更多队列阅读器实例会更简单。然后，您可以根据需要通过部署/取消部署更多实例来快速扩展和缩减。

它也成为管理问题，而不是发展问题，这就是扩展应该是的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:20:20.330

您可以使用“生产者消费者模式”...

.NET 4 及更高版本具有`Concurrent`线程安全的集合，并且实现了“大部分无锁”（因此在多线程中表现良好）......

您可以[`BlockingCollection`](http://msdn.microsoft.com/en-us/library/dd267312.aspx)与 TPL 结合使用来实现您想要的，而不必担心线程池饥饿或类似情况......您只需将线路更改为类似的`this.Handle(m.Body);` 东西`MyBlockingCollection.Add(m.Body);`并启动“消费者线程”，这些线程可以工作`MyBlockingCollection`并执行实际工作（即`this.Handle`调用例如`MyBlockingCollection`，他们通过调用获得的下一个项目`TryTake`）...有关基本示例，请参见上面的链接...

# email - PHPMailer SMTP 配置

> ID：14256582
> 
> 赞同：4
> 
> 时间：2013-01-10T11:12:18.450
> 
> 标签：email, phpmailer, php

在过去的 2 个小时里，我一直在网上查看是否有其他人遇到过这个问题，而且似乎很多，bot 没有一个答案对我有用。

```
SMTP -> FROM SERVER:220 mx.google.com ESMTP vq7sm928004oeb.13 
SMTP -> FROM SERVER: 250-mx.google.com at your service, [50.57.114.141] 250-SIZE 35882577 250-8BITMIME 250-STARTTLS 250 ENHANCEDSTATUSCODES 
SMTP -> FROM SERVER:220 2.0.0 Ready to start TLS 
SMTP -> FROM SERVER: 250-mx.google.com at your service, [50.57.114.141] 250-SIZE 35882577 250-8BITMIME 250-AUTH LOGIN PLAIN XOAUTH XOAUTH2 250 ENHANCEDSTATUSCODES 
SMTP -> FROM SERVER:530-5.5.1 Authentication Required. Learn more at 530 5.5.1 http://support.google.com/mail/bin/answer.py?answer=14257 vq7sm928004oeb.13 
SMTP -> ERROR: MAIL not accepted from server: 530-5.5.1 Authentication Required. Learn more at 530 5.5.1 http://support.google.com/mail/bin/answer.py?answer=14257 vq7sm928004oeb.13 
The following From address failed: my@email.com

$mail->IsSMTP();
$mail->SMTPDebug = 2;
$mail->SMPTAuth = true;
$mail->SMTPSecure = 'tls';
$mail->Host = "smtp.gmail.com";
$mail->Mailer = "smtp";
$mail->Port = 587;
$mail->Username = "my@email.com";
$mail->Password = "password"; 
```

我已经尝试了几乎所有 PHPMailer 的设置，但无法弄清楚仍然出了什么问题，我需要处理任何服务器设置吗？

我也尝试了普通的 php mail() 函数，但这也不是发送邮件，尽管在使用 Drupal 表单时它只是发送一封电子邮件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T11:36:03.283

首先，您必须配置正确的服务器来发送电子邮件（参见 gmail.com）：

```
SMTP server address: smtp.gmail.com
SMTP user name: Your full Gmail address (e.g. example@gmail.com)
SMTP password: Your Gmail password
SMTP port: 465 or 587
SMTP TLS/SSL required: yes 
```

在 PHPMailer 中：

```
$mail->SMTPAuth = true; // There was a syntax error here (SMPTAuth)
$mail->SMTPSecure = 'tls';
$mail->Host = "smtp.gmail.com";
$mail->Mailer = "smtp";
$mail->Port = 465;
$mail->Username = "YOU@gmail.com";
$mail->Password = "YOUR_GMAIL_password"; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T02:20:35.770

我的问题是我使用了两步验证。因此，我必须记住为我的 Google 帐户访问授权访问，然后为我用来发送邮件的域分配一个应用程序特定的密码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T04:13:22.187

刚刚注意到我在这一行中输入了错误的 SMTP `$mail->SMPTAuth = true;`，纠正这个问题解决了我的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T11:23:37.433

在 php 中设置邮件可能非常困难。您是否尝试过使用端口 = 25？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-17T22:44:54.937

建议的端口+协议组合对我来说似乎是错误的，因为它与官方的[phpMailer-wiki](https://github.com/PHPMailer/PHPMailer/wiki/Troubleshooting)不同：

> 不要混淆这些模式；端口 587 上的 ssl 或端口 465 上的 tls 将不起作用。

在 PHPMailer 中：

```
$mail->SMTPAuth = true;
$mail->SMTPSecure = 'tls';
$mail->Host = "smtp.gmail.com";
$mail->Mailer = "smtp";
$mail->Port = 587; //use port 465 when using SMPTSecure = 'ssl'
$mail->Username = "YOU@gmail.com";
$mail->Password = "YOUR_GMAIL_password"; 
```

# php - 创建程序，使用 putty.exe

> ID：14256586
> 
> 赞同：0
> 
> 时间：2013-01-10T11:12:28.950
> 
> 标签：php, mysql, plsql, putty, procedures

我正在做一个 mysql php 应用程序，我需要创建一个程序来使我的外键正常工作，并创建一个用于报告目的的日历。但是，我一直在尝试创建程序，但它在 putty.exe 中不起作用，这是唯一可用于执行我的应用程序的软件。我进行了研究，但没有发现与此相关的任何内容。谁能建议我是否需要额外的腻子文件或这样做的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:26:36.200

您需要使用 mysql 客户端对 mysql 运行命令。在 putty 命令行中运行：

> mysql

您很可能需要向命令添加参数，例如连接所需的用户和密码。有关详细信息，请查看[MySQL 手册](http://dev.mysql.com/doc/refman/5.5/en/mysql.html)。

要运行包含您的过程的脚本文件，首先您必须将文件上传到服务器，然后运行它

> mysql <脚本.sql

# java - 在用户目录中打开 javafx FileChooser

> ID：14256588
> 
> 赞同：9
> 
> 时间：2013-01-10T11:12:40.167
> 
> 标签：java, javafx-2

根据我在[此处](http://blueskyworkshop.com/topics/Java-Pages/java-text-viewer/)找到的示例，我正在尝试在用户目录中打开 javafx FileChooser 。

这是我正在使用的简单代码的片段：

```
FileChooser fc = new FileChooser();
fc.setTitle("Open Dialog");
String currentDir = System.getProperty("user.dir") + File.separator;
file = new File(currentDir);
fc.setInitialDirectory(file); 
```

但是，我不断收到此警告（完整的文件路径已被截断）：

```
Invalid URL passed to an open/save panel: '/Users/my_user'.  Using 'file://localhost/Users/my_user/<etc>/' instead. 
```

我验证了该`file`对象是添加以下行的现有目录：

```
System.out.println(file.exists()); //true
System.out.println(file.isDirectory()); //true 
```

然后我不知道为什么我会收到警告消息。

**更新：**

这似乎是 JavaFX 中的一个错误：[https](https://bugs.openjdk.java.net/browse/JDK-8098160) ://bugs.openjdk.java.net/browse/JDK-8098160 （您需要创建一个免费的 Jira 帐户才能查看错误报告）。这个问题发生在 OSX 中，不知道其他平台。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T20:16:46.450

这就是我最终做的事情，它就像一个魅力。

此外，请确保您的文件夹在尝试阅读时可访问（良好做法）。您可以创建文件，然后检查是否可以读取它。完整的代码将如下所示，`c:`如果您无法访问用户目录，则默认为驱动器。

```
FileChooser fileChooser = new FileChooser();

//Extention filter
FileChooser.ExtensionFilter extentionFilter = new FileChooser.ExtensionFilter("CSV files (*.csv)", "*.csv");
fileChooser.getExtensionFilters().add(extentionFilter);

//Set to user directory or go to default if cannot access
String userDirectoryString = System.getProperty("user.home");
File userDirectory = new File(userDirectoryString);
if(!userDirectory.canRead()) {
    userDirectory = new File("c:/");
}
fileChooser.setInitialDirectory(userDirectory);

//Choose the file
File chosenFile = fileChooser.showOpenDialog(null);
//Make sure a file was selected, if not return default
String path;
if(chosenFile != null) {
    path = chosenFile.getPath();
} else {
    //default return value
    path = null;
} 
```

*这适用于 Windows 和 Linux，但在其他操作系统上可能会有所不同（未经测试）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T02:41:51.493

尝试：

```
String currentDir = System.getProperty("user.home");
file = new File(currentDir);
fc.setInitialDirectory(file); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-07-04T20:14:28.957

```
@FXML private Label label1; //total file path print
@FXML private Label labelFirst; //file dir path print

private String firstPath; //dir path save

public void method() {
    FileChooser fileChooser = new FileChooser();
    if (firstPath != null) {
        File path = new File(firstPath);
        fileChooser.initialDirectoryProperty().set(path);   
    } 
    fileChooser.getExtensionFilters().addAll(
            new ExtensionFilter("Text Files", "*.txt"),
            new ExtensionFilter("Image Files", "*.png", "*.jpg", "*.gif"),
            new ExtensionFilter("Audio Files", "*.wav", "*.mp3", "*.aac"),
            new ExtensionFilter("All Files", "*.*") );
    File selectFile = fileChooser.showOpenDialog(OwnStage);
    if (selectFile != null){
        String path = selectFile.getPath();
        int len = path.lastIndexOf("/"); //no detec return -1
        if (len == -1) {
            len = path.lastIndexOf("\\");
        }
        firstPath = path.substring(0, len);
        labelFirst.setText("file path : " + firstPath);
        label1.setText("First File Select: " + path);   
    }

  } 
```

# python - QApplication 未在 Sublime Text 2 (python) 中执行

> ID：14256590
> 
> 赞同：1
> 
> 时间：2013-01-10T11:12:57.003
> 
> 标签：python, pyqt4, sublimetext2

我最近将 IDE 切换到 Sublime Text 2。
除了尝试为 PyQt4 GUI 运行代码时，它可以在所有方面工作。

除了不执行任何 Qt 库自动完成之外，调用 QApplication.exec_() 也不会启动应用程序。没有窗口产生，也没有输出；没有错误消息，什么都没有。

[此页面http://sublimetext.userecho.com/topic/93277-pyqt-applications-doesnt-show-up-after-build-ctrlb/](http://sublimetext.userecho.com/topic/93277-pyqt-applications-doesnt-show-up-after-build-ctrlb/)中的 OP声称添加`"shell":"true"`到文件中的`python.sublime-build`字典`python.sublime-package`可以解决问题，但是到目前为止，还没有。

根据 Sublime 文档（基于另一个值），实际添加可能应该是`"shell:true`，但这也没有效果。

我发现网上很难找到相关信息；我什至无法开始理解问题的原因。
非常感谢任何帮助！

规格：
Windows 7（64 位）
Python 2.7.1
Sublime Text 2（32 位）
PyQt4.7

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-03T20:49:13.720

其他可能的解决方案是：

转到 Preferences→Browse Packages，打开 Default 目录，然后在编辑器中打开 exec.py。在第 26 行附近，您将看到：

```
# Hide the console window on Windows
startupinfo = None
if os.name == "nt":
    startupinfo = subprocess.STARTUPINFO()
    startupinfo.dwFlags |= subprocess.STARTF_USESHOWWINDOW 
```

注释掉这个块的最后一行。现在，无论何时启动 Python 程序，都会显示控制台。

# c# - 使用单个事件处理程序来引发异步方法的事件比事件更好

> ID：14256591
> 
> 赞同：1
> 
> 时间：2013-01-10T11:12:58.623
> 
> 标签：c#, multithreading

目前调用线程池上的方法并且如果有任何异常仍然会得到异常我正在使用带有单个事件处理程序的事件并使用`BeginInvoke()`.

A 类从 B 类订阅事件。B 类对 A 类一无所知。

我不禁有一种感觉，这是一种愚蠢的hacky方式，那么你如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:18:09.010

切换到使用[任务并行库](http://msdn.microsoft.com/en-us/library/dd460717.aspx)而不是`ThreadPool`，它有很好的[异常处理](http://msdn.microsoft.com/en-us/library/dd997415.aspx)支持。

> 如何在不给 B 类 A 类引用的情况下将 A 类中的方法的“引用”注入 B 类

您需要更新类`B`以将函数作为构造函数参数或作为属性接收，例如

```
public class A
{
    public void MethodToCall(string args)
    {
        Console.WriteLine("I am class A - " + args);
    }
}

public class B
{
    public B(Action<string> action)
    {
        Method = action;
    }

    public Action<string> MethodToCall { get; private set; }
}
...
var a = new A();
var b = new B(a.MethodToCall);
a.MethodToCall("A"); // I am class A - A
b.MethodToCall("B"); // I am class A - B 
```

# python - 从字符串中删除特殊字符

> ID：14256593
> 
> 赞同：0
> 
> 时间：2013-01-10T11:13:06.040
> 
> 标签：python

在以下字符串中如何删除所有特殊字符

```
str1="0Cell Phones: Smartphone,\x02\x05\x0e\x02\x05Mobile Phone - Best Buy13AT&T Wireless: AT&T Phones & Cell Phone Plans - Best Buy4\x02\x05\x0e\x02\x05Cell Phones: Smartphone, Mobile Phone - Best Buy1\x02\x05\x0e\x02\x05AT&T Wireless: AT&T Phones & Cell Phone Plans - Best Buy" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:27:53.203

使用[`ord()`](http://docs.python.org/2/library/functions.html#ord)：

```
In [35]: str1="0Cell Phones: Smartphone,\x02\x05\x0e\x02\x05Mobile Phone - Best Buy13AT&T Wireless: AT&T Phones & Cell Phone Plans - Best Buy4\x02\x05\x0e\x02\x05Cell Phones: Smartphone, Mobile Phone - Best Buy1\x02\x05\x0e\x02\x05AT&T Wireless: AT&T Phones & Cell Phone Plans - Best Buy"

In [36]: "".join(x for x in str1 if 31 < ord(x) <127)

Out[36]: '0Cell Phones: Smartphone,Mobile Phone - Best Buy13AT&T Wireless: AT&T Phones & Cell Phone Plans - Best Buy4Cell Phones: Smartphone, Mobile Phone - Best Buy1AT&T Wireless: AT&T Phones & Cell Phone Plans - Best Buy' 
```

前 32 个是非打印字符，这个范围包括`return`等`backspace`，`32-127`是可打印的 ASCII 字符。

`128-255`: 扩展的 ASCII

`ord()`返回单个字符的整数值，我们可以通过`31 < ord(x) <127`.

![在此处输入图像描述](../Images/f0d90ef9d0cf03950fedc80367dd7ad1.png)

# android - jQueryMobile + Phonegap + Android：打字时跳屏

> ID：14256595
> 
> 赞同：1
> 
> 时间：2013-01-10T11:13:09.003
> 
> 标签：android, cordova, jquery-mobile

几乎相同的问题：[在 Android PhoneGap 应用程序中使用 JQTouch 打字时屏幕滚动？](https://stackoverflow.com/questions/5069463/screen-scrolls-while-typing-using-jqtouch-in-an-android-phonegap-app)

我仍然在我的应用程序中遇到过这种情况，每当用户输入文本输入字段时，屏幕就会跳动。

我包括的唯一固定是：

html:

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" /> 
```

和

安卓清单：

```
android:hardwareAccelerated="true" 
```

有人知道这个跳屏问题的解决方法吗？

# objective-c - GHUnit 访问私有变量

> ID：14256598
> 
> 赞同：1
> 
> 时间：2013-01-10T11:13:13.103
> 
> 标签：objective-c, tdd, private-members, gh-unit

我试图在我的单元测试中访问一个私有类变量：

```
Class
 - private variable abc;

unit test
category/extension above the unittest m file content
 @property (...) variable abc; 
```

但在测试中，我总是得到一个无法识别的选择器错误......有什么技巧可以让私有变量可见/可测试吗？

抱歉，使用谷歌一无所获；）

问候，马蒂亚斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:25:13.917

尝试`[obj valueForKey:@"_ivar"]`

您还可以为该类创建一个类别，并且您可以在该方法期间访问任何私有变量

```
@implementation MyClass (UnitTestAddition)

- (id)getPrivateVariable {
    return _ivar;
}

@end 
```

# java - 在 Springs MVC 中将 UTF-8 字符作为 Json 数组返回时出错

> ID：14256601
> 
> 赞同：0
> 
> 时间：2013-01-10T11:13:17.173
> 
> 标签：java, json, spring, jakarta-ee, spring-mvc

我在返回 Google Cloud SQL 数据库中的某些 UTF-8 字符串时遇到问题。我在下面分享我的代码。

```
public JSONArray getObjectsJsonArrayByCountryCodeAndDestination(String countryCode, String destinationCountryStartingLetter)
        throws JSONException, UnsupportedEncodingException {
    String query = "select * from EMBASSY where COUNTRY_CODE = ? AND DESTINATION LIKE '"+destinationCountryStartingLetter+"%' order by DESTINATION";
    jdbcTemplate = new JdbcTemplate(dataSource);
    List<Embassy> list = jdbcTemplate.query(query,
            new Object[] { countryCode }, new EmbassyMapper());
    JSONArray jsonArray = new JSONArray();
    if (list.isEmpty()) {
        return jsonArray;
    } else {
        for (Embassy embassy : list) {
            String address = new String(embassy.getAddress().getBytes("UTF-8"), "UTF-8");
// Upto here I am getting correct value of Address
            JSONObject jsonObject = new JSONObject();
            jsonObject.put("ID", embassy.getID());
            jsonObject.put("type", embassy.getType());
            jsonObject.put("telephone", embassy.getTelephone());
            jsonObject.put("address", address);
            jsonObject.put("url", embassy.getUrl());
            jsonObject.put("destination", embassy.getDestination());
            jsonObject.put("status", embassy.getStatus());
            jsonObject.put("updatedOn", embassy.getUpdatedOn());
            jsonObject.put("countryCode", embassy.getCountryCode());
            //System.out.println(jsonObject.toString());
            jsonArray.put(jsonObject);
        }
        return jsonArray;
    }
} 
```

我的数据库中保存了所有正确的编码记录，但是当我以 JSONArray 的形式将这些记录返回到我的 Ajax 请求时，我得到了某些 UTF-8 字符的更改。就像我把***Espaňa***当作***Espa 一样？***为什么会这样。

我正在使用 json.org 库生成 JSON。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:30:20.590

最后，我通过你们的评论解决了这个问题。我在我的 spring 控制器方法的 ResponseBody 中添加了这几行，我还在我的 JSP 中进行了这些更改：我在下面分享我的完整代码。

> JSP

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
```

> 检索的道实现

```
public JSONArray getObjectsJsonArrayByCountryCodeAndDestination(String countryCode, String destinationCountryStartingLetter)
        throws JSONException, UnsupportedEncodingException {
    String query = "select * from EMBASSY where COUNTRY_CODE = ? AND DESTINATION LIKE '"+destinationCountryStartingLetter+"%' order by DESTINATION";
    jdbcTemplate = new JdbcTemplate(dataSource);
    List<Embassy> list = jdbcTemplate.query(query,
            new Object[] { countryCode }, new EmbassyMapper());
    JSONArray jsonArray = new JSONArray();
    if (list.isEmpty()) {
        return jsonArray;
    } else {
        for (Embassy embassy : list) {
            String address = new String(embassy.getAddress().getBytes("UTF-8"), "UTF-8");
            String address2 = embassy.getAddress();
            System.out.println(address+" : "+address2);
            JSONObject jsonObject = new JSONObject();
            jsonObject.put("ID", embassy.getID());
            jsonObject.put("type", embassy.getType());
            jsonObject.put("telephone", embassy.getTelephone());
            jsonObject.put("address", address);
            jsonObject.put("url", embassy.getUrl());
            jsonObject.put("destination", embassy.getDestination());
            jsonObject.put("status", embassy.getStatus());
            jsonObject.put("updatedOn", embassy.getUpdatedOn());
            jsonObject.put("countryCode", embassy.getCountryCode());
            System.out.println(jsonObject.toString());
            jsonArray.put(jsonObject);
        }
        return jsonArray;
    }
} 
```

> 弹簧控制器方法

```
@RequestMapping(value = "/admin/listembassy", method = RequestMethod.GET)
public @ResponseBody void listEmbassyByCountryCode(HttpServletRequest req,HttpServletResponse resp, ModelMap modelMap) throws JSONException, JsonGenerationException, JsonMappingException, IOException {
    String countryCode = req.getParameter("searchForCountryCode");
    String destinationCountryStartLetter = req.getParameter("destinationCountryStartLetter");
    EmbassyDao embassyDao = (EmbassyDao) context.getBean("embassyDao");
    JSONArray jsonArray = new JSONArray();
    if(destinationCountryStartLetter != null && !destinationCountryStartLetter.equals("")){
        jsonArray = embassyDao.getObjectsJsonArrayByCountryCodeAndDestination(countryCode, destinationCountryStartLetter);
    }else{
        jsonArray = embassyDao.getObjectsJsonArrayByCountryCode(countryCode);
    }
    resp.setContentType("application/json");
    resp.setCharacterEncoding("UTF-8");
    resp.getWriter().println(jsonArray);
} 
```

# xpath - Xpath 将一个字段从一个项目添加到另一个具有引用 id 的项目

> ID：14256611
> 
> 赞同：1
> 
> 时间：2013-01-10T11:13:53.723
> 
> 标签：xpath

这是我需要导入的文件的结构。

```
<channel>
<item>
  <type>image</type>
  <title>title image</title>
  <id>1</id>
  <image_url>url_to_image</image_url>
</item>

<item>
  <type>page</type>
  <title>node title</title>
  <id>2</id>
  <ref>
    <entity>image_ref</entity>
    <ref_value>1</ref_value>
  </ref>
  <ref>
    <entity>category</entity>
    <ref_value>5</ref_value>
  </ref>
  </item>
</channel> 
```

在页面项目中，标签包含图像项目的 id。如何将图像项中的图像 url 添加到页面项？我正在尝试使用

`/channel/item[id=ref/ref_value[../entity/text() = 'image_ref']]/image_url`但它不起作用......

不导入图像项而仅导入页面项的 XPath 表达式是什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T12:49:47.517

**使用**：

```
 /*/item[type='image' and id=../item[type='page']
           /ref[entity = 'image_ref']/ref_value]
                     /image_url/text() 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/">
     <xsl:copy-of select=
     "/*/item[type='image' and id=../item[type='page']
               /ref[entity = 'image_ref']/ref_value]
                         /image_url/text()"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<channel>
    <item>
        <type>image</type>
        <title>title image</title>
        <id>1</id>
        <image_url>url_to_image</image_url>
    </item>
    <item>
        <type>page</type>
        <title>node title</title>
        <id>2</id>
        <ref>
            <entity>image_ref</entity>
            <ref_value>1</ref_value>
        </ref>
        <ref>
            <entity>category</entity>
            <ref_value>5</ref_value>
        </ref>
    </item>
</channel> 
```

**对 XPath 表达式求值，并将该求值的结果复制到输出中：**

```
url_to_image 
```

**更新**：

OP在评论中*暗示*可能有许多“页面项”和“图像项”，并且他需要一个表达式，仅获取特定页面的图像 url。

**这个 XPath 表达式**：

```
 /*/item[type='image'
        and id=../item[type='page'][1]
                             /ref[entity = 'image_ref']/ref_value
               ]
                /image_url/text()"/> 
```

**为以下 XML 文档中的第一个“页面项”生成所需的图像 url：**

```
<channel>
    <item>
        <type>image</type>
        <title>title image</title>
        <id>1</id>
        <image_url>url_to_image</image_url>
    </item>
    <item>
        <type>image</type>
        <title>title image</title>
        <id>2</id>
        <image_url>url2_to_image</image_url>
    </item>
    <item>
        <type>page</type>
        <title>node title</title>
        <id>3</id>
        <ref>
            <entity>image_ref</entity>
            <ref_value>1</ref_value>
        </ref>
        <ref>
            <entity>category</entity>
            <ref_value>5</ref_value>
        </ref>
    </item>
    <item>
        <type>page</type>
        <title>node title</title>
        <id>4</id>
        <ref>
            <entity>image_ref</entity>
            <ref_value>2</ref_value>
        </ref>
        <ref>
            <entity>category</entity>
            <ref_value>5</ref_value>
        </ref>
    </item>
</channel> 
```

**产生的结果是**：

```
url_to_image 
```

**要获得第二个页面项的所需 url，我们只需将上面的 XPath 表达式修改为：**

```
 /*/item[type='image'
        and id=../item[type='page'][2]
                             /ref[entity = 'image_ref']/ref_value
               ]
                /image_url/text()"/> 
```

**现在结果是**：

```
url2_to_image 
```

# ssl - SSL 握手客户端_Hello 版本

> ID：14256613
> 
> 赞同：1
> 
> 时间：2013-01-10T11:13:59.610
> 
> 标签：ssl, version, handshake

我有一个非常基本的问题：SSL 握手中的 client_hello 或 server_hello 如何确定它可以支持的 SSL/TLS 版本？我的意思是，据我了解，首先是客户端，然后是服务器发送它们支持的最高 SSL 版本。但是，这是如何确定的呢？

它是证书中的版本字段吗？

最好的问候， HL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:22:25.210

[这在TLS 规范的附录 E](https://www.rfc-editor.org/rfc/rfc5246#appendix-E.1)中都有描述。这在 TLS 1.0、1.1 和 1.2 规范中的表述略有不同，但原理保持不变。

本质上，客户端要求它可以支持的最高版本，而服务器则以它可以支持的最高版本进行响应，直到客户端的版本：

```
min(max. client supported version, max. server supported version) 
```

只要双方确实支持生成的版本，这就会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T03:04:10.423

The client is responsible for initiating an SSL handshake by sending the ClientHello message. If this isn't the first message that is sent, the server responds with an error and shuts down the socket.

The client advertises to the server which cipher specs it supports, it's not required to support all of them.

The client sends the server the client's SSL version number, cipher settings, session-specific data, and other information that the server needs to communicate with the client using SSL.

The client also sends a challenge token, which the server must encrypt using the newly negotiated key before sending back the encrypted value, in its hello message. The client verifies that the decrypted token is the same as what was sent. If it's not, the handshake is rejected.

View the complete demo [here](https://www.youtube.com/watch?v=qps5dsNSIbc)

# iphone - 本地通知警报时间

> ID：14256616
> 
> 赞同：1
> 
> 时间：2013-01-10T11:14:07.720
> 
> 标签：iphone, ios, uilocalnotification

```
notificaiton = [[UILocalNotification alloc] init];
notificaiton.fireDate = [NSDate Date];
notificaiton.repeatInterval = 0;
notificaiton.alertBody = @"Alarm";
notificaiton.timeZone = [NSTimeZone defaultTimeZone];
notificaiton.repeatCalendar = [NSCalendar currentCalendar
notificaiton.soundName = @"Alarm.wav"
[[UIApplication sharedApplication] scheduleLocalNotification:notificaiton]; 
```

我的问题是，本地通知警报只停留几秒钟，但是，本地通知警报是否可能停留几分钟？

请任何人有答案

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:04:04.550

不，不可能自定义 AlertView 及其时间。系统做到了，我们无法控制它。我们只能自定义，action button的alertbody和title。

> **配置通知的内容：警报、图标徽章编号和声音。**
> 
> 警报具有消息属性（alertBody 属性）和操作按钮或滑块的标题（alertAction）；这两个字符串值都可以根据用户当前的语言偏好进行国际化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:34:48.890

如果你的意思是你需要播放通知声音超过 30 秒？？？那么这是不可能的。

您写了本地通知警报仅停留几秒钟，但请检查是否正确，这取决于您的声音文件长度。

并且此声音文件的长度必须最长为 30 秒。

如果您尝试让 soundName 超过 30 秒。然后它将在通知中播放默认声音。

找到这条线

“不支持持续时间超过 30 秒的声音。如果您指定的文件的声音播放时间超过 30 秒，则会播放默认声音。” 进入[苹果通知文档。](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html)

# java - 使用 Swing 所见即所得编辑器动态调整按钮网格的大小？

> ID：14256623
> 
> 赞同：1
> 
> 时间：2013-01-10T11:14:32.867
> 
> 标签：java, swing, netbeans

我正在尝试用 Java 编写我的第一个基于 GUI 的游戏，我选择了扫雷。我是 Java 的新手（虽然我可以设法对游戏的逻辑部分进行编程，所以不是“我不知道什么是类”意义上的“新手”）和 Swing 的完整新生，所以我会如果我可以将所见即所得编辑器（如 NetBeans 编辑器）用于图形部分，而不是手动编写布局，我会很高兴。

然而，在玩过编辑器之后，就我目前的理解而言，我只能用 Netbeans 编辑器设置恒定数量的不同容器——我的意思是，我必须提前知道板子必须有哪些尺寸。但是，我希望棋盘能够动态调整大小，以便用户可以在 9x9 网格上播放 31 个炸弹，以及在 100x105 网格上播放 3 个炸弹。你能用所见即所得编辑器创建这样的动态调整大小（当然不是即时调整 - 我的意思是用户可以决定他在开始游戏时要在哪个网格上玩）按钮网格，或者这样的事情需要全部编码自己从头开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:24:16.880

*   手工编写布局，这正是为`GridLayout`

*   使用`JButton`，更好的是使用`JToggleButton`with`Icon`

*   使用正确`setXxxIcon methods`的[`JButton`](https://stackoverflow.com/questions/7918982/jbutton-only-working-when-mouse-hovers/7919280#7919280)/[`JToggleButton`](https://stackoverflow.com/questions/9368147/right-clicking-on-jbutton/9369476#9369476)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:34:09.240

呃 - 请不要使用 GUI 编辑器进行操作。您可能会创建太多可变的功能组件。

请至少自己编写部分代码 - 您可能在扫雷字段上使用的按钮应该很容易在循环中创建。该按钮有一个数据字段，您可以将其用于字段的状态（炸弹、无炸弹、隐藏、标记、空）。因此，当您为按钮创建 ONE Actionlistener 时，您应该能够在那里做出反应。

您真正的问题：是的，这在很大程度上取决于您使用的布局。避免调整大小，当您需要设置按钮大小时，请始终参考 100% 的基数：

```
setButtonSize(){
  int iWindowWidth = 437; // example, can be any value. Stands for 100%
  button1.setWidth((int)(iWindowWidth * 0.2)); // 20%
  button1.setWidth((int)(iWindowWidth * 0.3)); // 30%
  button1.setWidth((int)(iWindowWidth * 0.05));//  5%
  button1.setWidth((int)(iWindowWidth * 0.45));// 45%
} 
```

这也是我创建具有定义列宽的动态宽度的表的方式。

# matlab - 确定用于执行全局阈值的图像的阈值

> ID：14256631
> 
> 赞同：-4
> 
> 时间：2013-01-10T11:14:45.113
> 
> 标签：matlab, image-processing

为了执行全局阈值，必须定义阈值。但是该值与强度直方图有关吗？我应该随机选择它还是有办法确定它？（我的输出将是二进制图像）
非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T05:38:59.763

在 FEX 中的搜索会产生[Jan Motl](http://www.mathworks.com/matlabcentral/fileexchange/authors/303241)的许多贡献，例如：

*   [Bradley 局部图像阈值](http://www.mathworks.com/matlabcentral/fileexchange/40854-bradley-local-image-thresholding)
*   [尼克局部图像阈值](http://www.mathworks.com/matlabcentral/fileexchange/42104-nick-local-image-thresholding)
*   [狼局部阈值](http://www.mathworks.com/matlabcentral/fileexchange/42101-wolf-local-image-thresholding)
*   [meanthresh 局部图像阈值](http://www.mathworks.com/matlabcentral/fileexchange/41787-meanthresh-local-image-thresholding)
*   [冯局部图像阈值化](http://www.mathworks.com/matlabcentral/fileexchange/41771-feng-local-image-thresholding)
*   [Niblack 局部图像阈值](http://www.mathworks.com/matlabcentral/fileexchange/40849-niblack-local-thresholding)
*   [Sauvola 局部图像阈值](http://www.mathworks.com/matlabcentral/fileexchange/40266-sauvola-local-image-thresholding)
*   [Brensen 局部图像阈值](http://www.mathworks.com/matlabcentral/fileexchange/40856-bernsen-local-image-thresholding)

对灰度图像的全局阈值的快速而肮脏的估计`img`将是：

```
 threshold = max([min(max(img,[],1))  min(max(img,[],2))]) ; 
```

[在这个 FEX 文件](http://www.mathworks.com/matlabcentral/fileexchange/38390-basic-global-thresholding)中可以找到另一个详细但基本的处理方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:23:31.403

有许多方法可用于查找图像二值化的阈值。参考：[http](http://en.wikipedia.org/wiki/Thresholding_(image_processing) ://en.wikipedia.org/wiki/Thresholding_(image_processing )

您还可以使用 Otsu 阈值、Kittler 阈值和使用这些阈值的自适应二值化。

# linux - 在无头模式下将 libreoffice 电子表格合并到多页文档中？

> ID：14256635
> 
> 赞同：2
> 
> 时间：2013-01-10T11:15:00.090
> 
> 标签：linux, bash, libreoffice

我们有一个昂贵的报告，我们的系统生成为 XLS 文件，但是当我们尝试运行它一整年时，我们在负责的服务器上遇到了内存问题。

我想探索使用 libreoffice 将多个月度报告合并到一个电子表格中的想法，该电子表格包含一月、二月、三月等标签。

有没有办法在命令行中做到这一点？理想情况下，它将采用名为 jan.xls、feb.xls 等文件的目录，并在最后输出 year.xls。

任何帮助/指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-02T22:08:51.563

一种方法是编写（一堆）LibreOffice 宏，并从命令行调用它们。

以下是您需要执行的操作：

*   [如何在没有 GUI 的情况下从命令行运行 LibreOffice 宏？](https://superuser.com/questions/1135850/how-do-i-run-a-libreoffice-macro-from-the-command-line-without-the-gui)
*   [OpenOffice.org 宏解释](http://www.pitonyak.org/OOME_3_0.pdf)（查看第 497-498 页）

# ios - Titanium中tableview行中的多行文本

> ID：14256637
> 
> 赞同：1
> 
> 时间：2013-01-10T11:15:16.487
> 
> 标签：ios, uitableview, titanium, titanium-mobile, appcelerator-mobile

我正在 Titanium 中开发基于 tableView 的应用程序。我需要在我的表格视图行中显示长文本内容。

当我这样做时，我的行看起来像：

![多行](../Images/8d85f037a5a631d29810bade44c67181.png)

这是我用来创建表格视图行的代码。

```
var row = Ti.UI.createTableViewRow({
        backgroundColor : '#F0F0F0',
        color           : 'black',
        font            : { fontSize:10 ,fontWeight:'bold',fontFamily:'Arial'},
        height          :'80',
        title           : firstRowContent
     }); 
```

我的问题是我需要将文本包装在我的表格视图行中，并且需要以多行显示它。

在 iOS 中有`lineBreakMode`和`numberOfLines`属性。我可以轻松做到。

有什么办法可以用钛做吗？我搜索了很多，但每个人都说在文本之间放置一个“ **\n** ”或添加多个标签。

这些是我提到的链接：

1.  [多行标签](http://developer.appcelerator.com/question/54351/multiline-label)
2.  [按钮和表格视图项中的多行文本 textwrap 换行符](http://developer.appcelerator.com/question/14151/multi-line-texttext-wrapline-breaks-in-buttons-and-table-view-items)
3.  [在标签内显示结果集（文本），多行](http://developer.appcelerator.com/question/59521/display-resultset-text-within-a-label-multiline)
4.  [多行标签？](http://developer.appcelerator.com/question/54351/multiline-label)
5.  [数据库中的多行表行](http://developer.appcelerator.com/question/122819/mutiline-tablerow-from-database)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T00:05:17.893

您需要在行中放置一个标签对象。可以创建标签以包裹文本。

搜索答案时，搜索complex tableviewrow appcelerator

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T04:50:51.990

下面为我​​包装。Titanium 的默认标签行为是对其进行换行。行视图的“标题”属性是单行的。

```
var win = Ti.UI.createWindow({
    backgroundColor: '#fff'
});
var row = Ti.UI.createTableViewRow();
row.add(Ti.UI.createLabel({
    text: 'Gosh golly, this is a label. Cool, huh?',
    color: '#000', font: { fontSize: 32 }
}));
win.add(Ti.UI.createTableView({
    data: [ row ]
}));
win.open(); 
```

如果您要在行上设置一个高度以使包裹线不适合，那么它将为您椭圆化。

```
row.add(Ti.UI.createLabel({
    text: 'Gosh golly, this is a label. Cool, huh?',
    color: '#000', font: { fontSize: 32 },
    height: 40
})); 
```

但默认情况下，它会根据您提供的内容调整大小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T05:12:13.503

我通过添加标签作为 tableview 行的子视图来解决此问题。

```
 var firstRow = Ti.UI.createTableViewRow({
        backgroundColor : '#F0F0F0',
        color           : '#555555',
        font            : { fontSize:10 ,fontFamily:'Arial'},
        height          :'auto',
       // title         : firstRowContent,
        horizontalWrap  : 'true',
        selectionStyle  : Ti.UI.iPhone.TableViewCellSelectionStyle.NONE
     });
      var firstLabel = Ti.UI.createLabel({
        text            : 'Midhun Says: Hi, How are you ? We are currently waiting for you ...',
        height          : 'auto',
        right           : '10',
        top             : '7',
        left            : '10',
        color           : '#555555',
        font            : { fontSize:15 ,fontFamily:'Arial'},
     });

firstRow.add(firstLabel); 
```

不管怎样，谢谢大家的帮助...

# html - 如何将 div 插入到 div 中，文本将与它内联

> ID：14256640
> 
> 赞同：0
> 
> 时间：2013-01-10T11:15:22.573
> 
> 标签：html, css, css-position, inline

我有主页模板，目前有这样的代码：[https](https://www.dropbox.com/s/lrv11sean6y15se/index_backup.txt) ://www.dropbox.com/s/lrv11sean6y15se/index_backup.txt （我无法在帖子中添加代码）

看起来像这样： ![在此处输入图像描述](../Images/766f0063ad3c170442498665088db1c3.png)

***** 第一个问题出现了，如何使 [[Description]] 文本距离左 div 边框 10px？**

然后我有一个我想插入到这个页面的部分，它有这样的代码：

```
<div style="text-align:center; width: 324px; color: #ffffff; background-color:#6b8861; font-size : 34px;">[[Title]]</div>
<div style="border:1px dotted #6b8861; text-align:center; width: 324px; color: #6b8861; background-color:#ffffff; font-size : 34px;">[[Picture1]]</div> 
```

看起来像这样： ![在此处输入图像描述](../Images/13c6216ca33fc3f5645a9f85dfe16468.png)

我希望这部分能很好地出现在 div 的右侧，其中的文本是“[[Description]]”。我不得不提到，这个文本将被更改为更长的文本，我要插入的那部分应该与所有文本内联，看起来像这样：

![在此处输入图像描述](../Images/60b453967f808ea1ca33f21a9c9fad7b.png)

我尝试使用 display inline 和其他方法，但是它们完全使我的模板变得混乱，我达到了没有人可以帮助我的地步，只是告诉我不要使用 inline 并学习其他方法。所以伙计们，我希望你们分享你们的方法，我怎么能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:19:23.083

**第一个问题** style="margin-left:10px"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:25:49.147

如果代码流程是这样的，它应该可以完美运行

```
.wrapper{position:relative; width:100%; overflow:auto}
.descrptn{display:inline-block; background:#fbffe2; float:left; margin-left:10px; width:60%}
.right{display:inline-block;  margin:0 10px; float:right} 
```

**[演示](http://jsfiddle.net/z8zeM/1/)**

* * *

**根据原始码更新**

您需要正确订购 div，这意味着所有子 div 都应该有一个父 div。

**HTML**

```
<div class="wrapper">

<div class="header"> 
<a href="www.one.lt"> <img border="0" src="http://www.gvcdigital.co.uk/images/graphic/header.png" width="985" height="96" alt="header" title="DigiSpot eBay store" /></a>
</div>

<div class="nav_menu"> 
<img border="0" src="http://www.gvcdigital.co.uk/images/graphic/meniu.png" alt="DigiSpot meniu" width="985" height="41" usemap="#mapas" />
  <map name="mapas">
    <area shape="rect" coords="56,0,0,41" href="www.one.lt" alt="DigiSpot eBay store home" title="DigiSpot eBay store home">
    <area shape="rect" coords="539,0,400,41" href="www.one.lt" alt="About Digispot" title="About DigiSpot">
    <area shape="rect" coords="699,0,539,41" href="www.one.lt" alt="Delivery information" title="Delivery information">
    <area shape="rect" coords="845,0,699,41" href="www.one.lt" alt="Returns information" title="Returns information">
    <area shape="rect" coords="985,0,845,41" href="www.one.lt" alt="Contacts information" title="Contacts information">
  </map>
</div>

<div class="desc"><img border="0" src="http://www.gvcdigital.co.uk/images/graphic/description.png" width="232" height="81"></div>

<!--Contaent starts-->
<div class="content">
<div class="left_panel">Lorem ipsum .</div>
<div class="right_panel">
  <div style="text-align:center; width: 324px; color: #ffffff; background-color:#6b8861; font-size : 34px;">[[Title]]</div>
  <div style="border:1px dotted #6b8861; text-align:center; width: 324px; background-color:#ffffff;">[[Picture1]]</div>
</div>
</div>
<!--Contaent ends-->
<div class="footer"><img border="0" src="graphic/buttom.png" width="524" height="42"></div>

</div> 
```

**CSS**

```
body {
    color: #25670c;
    margin: 0 0 0 0;
    padding: 0 0 0 0;
    font-family : Times New Roman;
    font-size : 14px;
    text-align: center;
}
.wrapper{width:1000px; margin:0 auto}
.header{height: 96px; width: 985px; margin: 0 auto;}
.nav-menu{
    height: 41px; width: 985px; margin: 0 auto;
}
.desc{width: 985px; height:81px; text-align: center; background-color:#d6d6a4;margin: 0 auto;}
.content{position:relative; width: 985px; overflow:auto}
.left_panel{ background:#fbffe2; float:left; margin-left:20px; width:600px; text-align:left}
.right_panel {

    text-align: left;
    background-color: #d6d6a4;
    margin: 0 auto; float:right
}
.footer {
    text-align: center;
    width: 985px;
    background-color: #d6d6a4;
    margin: 0 auto;
} 
```

**[演示更新](http://jsfiddle.net/t5gC3/2/)**

# vb.net - 使用循环隐藏多个标签

> ID：14256642
> 
> 赞同：2
> 
> 时间：2013-01-10T11:15:27.393
> 
> 标签：vb.net, label, hide

如何`Label`使用循环隐藏多个控件？我尝试使用以下代码这样做：

```
Dim i As Integer
For i = 1 To 14
    Dim lbl = Controls("Label" & i)
    lbl.Visible = False
Next 
```

但这对我不起作用。当代码执行时，它会在行`NullReferenceException`上抛出一个`lbl.Visible = False`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T12:50:54.690

您收到该错误的原因可能是因为您的表单上的标签少于 14 个。我猜它是`Label14`，甚至是一个较小数字的标签，都不存在。检查那个。

此外，如果您想隐藏表单上的所有标签，那么最好执行以下操作：

```
 For Each lbl As Label In Controls.OfType(Of Label)()
     lbl.Visible = False
 Next 
```

**在您发表评论后：**

您使用的是哪个版本的 Visual Studio？ `OfType`适用于 VS2008 和 2010。可能不适用于早期版本...

另一种方法是这样的：

```
For Each cnt As Control In Me.Controls
    If TypeOf cnt Is Label Then
        cnt.Visible = False
    End If
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T12:51:41.010

当您尝试`Form.Controls`按如下索引从集合中获取控件时：

```
Dim lbl As Control = Controls(100) 
```

如果不存在该索引的控制，它将立即抛出一个`ArgumentOutOfRangeException`，如您所料。但是，出于某种奇怪的原因，实现`ControlCollection`该类的人决定当您尝试按名称获取控件时，如下所示：

```
Dim lbl As Control = Controls("Label100") 
```

如果不存在该名称的控件，而不是抛出异常，它只是简单地返回`Nothing`. 因此，为了安全起见，您应该检查以确保实际返回了控件，如下所示：

```
For i As Integer = 1 To 14
    Dim lbl = Controls("Label" & i.ToString())
    If lbl IsNot Nothing Then
        lbl.Visible = False
    End If
Next 
```

像这样检查 if `lbl`is`Nothing`将阻止`NullReferenceException`抛出。但是，这并不能解释为什么它`Nothing`首先会返回。

我可以想到为什么它可能无法找到您的控制权有两个原因：

*   你有错误的控件名称。您正在寻找名称为“Label1”的控件，但您可能弄错了，这可能不是控件的实际名称。例如，控件的名称可能与引用它的变量名称不同。要确定，请检查 的值`Label1.Name`以查看其名称的实际含义。
*   表单上的`Controls`属性已重载，因此它不会调用基本属性。要解决这个问题，您可以指定`MyBase.Controls`而不是简单地指定`Controls`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T05:26:46.490

我像这样更改我的代码..它现在可以工作了。

```
For i As Integer = 1 To 14
        Dim lbl = EMPGBDATA.Controls("Label" & i.ToString())
        If lbl IsNot Nothing Then
            lbl.Visible = False
        End If
    Next 
```

EMPGBDATA 在我的表单中是一个 GroupBox。所有这些标签都在 EMPGBDATA 中。

# ios - 在后台应用程序时使用推送通知更新徽章

> ID：14256643
> 
> 赞同：94
> 
> 时间：2013-01-10T11:15:29.047
> 
> 标签：ios, apple-push-notifications

当应用程序被带到前台时，我已经让推送通知工作并设法更新图标徽章计数。

不过我对此有点困惑...... iPhone收到通知并且弹出消息似乎激活了我的应用程序，并且徽章仅在我启动应用程序后更新。

就用户体验而言，这听起来并不正确。我的理解是，徽章计数应该通过增加计数来通知用户需要采取的行动，但这要等到应用程序上线后才会发生。

那么有没有办法告诉应用程序在收到推送通知时以及在后台时更新其徽章计数？

请注意，我的应用程序不使用位置，并且我`UIRemoteNotificationTypeBadge`在通知注册请求中使用了位置。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-01-10T11:25:41.020

由于推送通知由 iOS 而不是您的应用程序处理，因此您无法在收到推送通知时更改应用程序徽章。

但是您可以在推送通知的有效负载中发送徽章编号，但您必须在服务器端进行计算。

您应该阅读[本地和推送通知编程指南](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/APNSOverview.html#//apple_ref/doc/uid/TP40008194-CH8-SW1)，尤其是[通知有效负载](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/PayloadKeyReference.html#//apple_ref/doc/uid/TP40008194-CH17-SW1)。

有效载荷可能如下所示：

```
{
    "aps" : {
        "alert" : "You got your emails.",
        "badge" : 9
    }
} 
```

现在应用程序徽章图标将显示 9。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2018-11-05T17:58:43.730

实际上，在 iOS 10 中，远程通知会自动调用`didReceiveRemoteNotification`AppDelegate 中的方法。

您有 2 种方法可以在后台更新徽章计数。
我也为我当前的应用程序做了这个。您也不需要通知服务扩展。

### 第一种方式：

将带有有效负载的 APS 徽章密钥发送到 APN。
这将根据您的徽章有效负载中的整数值更新徽章计数。前任：

```
// Payload for remote Notification to APN
{
    "aps": {
        "content-available": 1,
        "alert": "Hallo, this is a Test.",
        "badge": 2, // This is your Int which will appear as badge number,
        "sound": default
    }
} 
```

### 第二种方式：

您可以切换您的 application.applicationState 并在 applicationState 位于时更新您的徽章计数`.background`。但是当发送到 APN ex 时，您必须注意不要在通知负载中设置徽章密钥参数

```
// Payload to APN as silent push notification
{
    "aps": {
        "content-available": 1
    }
} 
```

### 根据应用程序状态处理徽章更新：

这是我在 APN 的有效负载中没有徽章密钥的徽章计数更新的工作代码。

```
func application(_ application: UIApplication, didReceiveRemoteNotification 
   userInfo: [AnyHashable : Any], fetchCompletionHandler completionHandler: @escaping (UIBackgroundFetchResult) -> Void) {
    print("APN recieved")
    // print(userInfo)

    let state = application.applicationState
    switch state {

    case .inactive:
        print("Inactive")

    case .background:
        print("Background")
        // update badge count here
        application.applicationIconBadgeNumber = application.applicationIconBadgeNumber + 1

    case .active:
        print("Active")

    }
} 
```

### 重置徽章计数：

当您的应用恢复活动状态时，不要忘记重置您的徽章计数。

```
func applicationDidBecomeActive(_ application: UIApplication) {
    // reset badge count
    application.applicationIconBadgeNumber = 0
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-05-09T07:26:11.713

当我们处于后台状态时，我们可以通过在推送通知包中发送**“badge”参数来更改徽章编号。**正如@rckoenes 指出的那样，`JSON`徽章的参数必须是**INTEGER**。

执行相同操作的示例 PHP 代码

```
// Create the payload body
$body['aps'] = array(
        'alert' => $message,
        'badge' => 1,
        'sound' => 'default'
        ); 
```

`badge => 1`其中 1 是整数而不是字符串（即没有撇号）

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-04-19T14:16:26.153

```
 **This is the APNS payload get back from server.**

    {
        "aps" : {
            "alert" : "You got your emails.",
            "badge" : 9,
            "sound" : "bingbong.aiff"
        },
        "acme1" : "bar",
        "acme2" : 42
    } 
```

关键徽章的值自动被视为徽章计数。在 ios 应用端无需计算或处理计数。在上面的示例中，9 是徽章计数。因此您的应用程序图标将显示 9。

注意当您的应用程序关闭时，您无法自行处理徽章。这就是我们使用 APNS Payload 中的徽章密钥的原因 有关通知的更好说明，请参阅文档

如果您想自己减少徽章计数。减少计数并自行更新。如下

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-11-08T08:10:28.723

如果您使用的是 NotificationServiceExtension，您可以在其中更新徽章。

```
var bestAttemptContent : UNMutableNotificationContent? // 
bestAttemptContent.badge = 0//any no you wanna display 
```

每次您的应用程序收到通知时，您的服务扩展都会被调用。将该值保存在用户默认值中并显示它。要在应用程序和扩展程序之间共享用户默认值，您需要在应用程序中启用应用程序组。 [在这里阅读更多](https://developer.apple.com/library/content/documentation/General/Conceptual/ExtensibilityPG/ExtensionScenarios.html)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-10-24T14:05:45.640

对于 Firebase 云消息传递 (FCM)，它应该是这样的：

```
{
  "to": "some_token",

  "notification": {
    "body": "this is a body",
    "title": "this is a title",
    "badge" : 1
  }, 

  "priority": "high", 
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-11-21T08:30:29.260

从 iOS 10 开始，您可以为您的应用开发通知服务扩展。当您收到通知时，系统将启动它，您可以计算徽章的有效编号并设置它。

看看文档： [https ://developer.apple.com/documentation/usernotifications/unnotificationserviceextension](https://developer.apple.com/documentation/usernotifications/unnotificationserviceextension)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-10T11:31:46.517

```
-(void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {

    application.applicationIconBadgeNumber = 0;
    NSLog(@"userInfo %@",userInfo);

    for (id key in userInfo) {
        NSLog(@"key: %@, value: %@", key, [userInfo objectForKey:key]);
    }

    [application setApplicationIconBadgeNumber:[[[userInfo objectForKey:@"aps"] objectForKey:@"badge"] intValue]];
    NSLog(@"Badge %d",[[[userInfo objectForKey:@"aps"] objectForKey:@"badge"] intValue]);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-01T09:49:39.133

在 apns 有效负载中必须定义 "content-available":1 以在后台模式下更新徽章计数

```
func application(_ application: UIApplication, didReceiveRemoteNotification 
   userInfo: [AnyHashable : Any], fetchCompletionHandler completionHandler: @escaping (UIBackgroundFetchResult) -> Void) {

// increase badge count, but no need if you include content-available

application.applicationIconBadgeNumber = application.applicationIconBadgeNumber + 1

}

func applicationDidBecomeActive(_ application: UIApplication) {

// reset badge count

application.applicationIconBadgeNumber = 0

} 
```

例如。

```
"aps":{
    "alert":"Test",
    "sound":"default",
    "content-available":1

} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-16T08:46:25.173

正如@rckoenes 所说，您将不得不在服务器端进行计算，但是您怎么知道何时增加您应该在有效负载中发送的徽章编号值？

当您启动应用程序时，会向您的服务器发送一条消息，指示应用程序已启动。因此，在服务器端，您从徽章 = 0 重新开始，虽然服务器没有收到任何消息，但随着每个推送通知有效负载增加徽章编号。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-11-05T06:19:10.507

在遗产其工作中，“徽章”设置计数

```
{
  "to": "token",
  "notification": {
    "title": "Example",
    "body": "Tiene 22 actualizaciones.",
    "badge":278
  },
  "data": {
    "story_id": "story_12345",
    "count_vaca":22
  }
} 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2014-11-18T13:32:52.877

打开App收到远程通知后，

`didBecomeActive`在您的“”方法中获取当前的徽章编号`AppDelegate`。

使用以下代码文件：

```
int badgeCount = [UIApplication sharedApplication].applicationIconBadgeNumber;
    badgeCount = badgeCount + 1; 
```

# opencv - cv::findContours OPenCV 2.4

> ID：14256652
> 
> 赞同：0
> 
> 时间：2013-01-10T11:15:57.070
> 
> 标签：opencv, kinect, contour

我正在使用 OpenCV 2.4，我想检测手的轮廓并使用 Kinect 绘制它们。我正在使用 cv::findContours(imageContour,contours,CV_RETR_TREE, CV_CHAIN_APPROX_SIMPLE,Point(0,0)); 并且它工作正常，但是当我尝试添加层次结构时，它会导致一些问题。cv::findContours(imageContour,contours,hierarchy,CV_RETR_LIST,CV_CHAIN_APPROX_NONE,Point(0,0));

同样在我尝试访问这些轮廓时使用了第一选择后： double area0 = contourArea(contours,false); 或者 cv::drawContours(drawing, contours, i, color, 1, 8);

我得到访问冲突写入位置 0x00000014。而且我不知道如何绘制它们或获取区域，任何线索？

提前致谢。

# c - ubuntu - 寻找 IDE 编译器来构建和运行 .c 源文件而不创建项目

> ID：14256653
> 
> 赞同：-3
> 
> 时间：2013-01-10T11:15:59.657
> 
> 标签：c, compiler-construction, ide, codeblocks

我有 ubuntu 12.04 和 KDE。

我已经知道可以完成这项工作的 Code::BLocks，但我有一个问题：我使用的任何版本（12.11 或 10.05）都不会在我单击关闭按钮时关闭，如果我尝试对编辑器设置它没有保存。因此，我正在为 c 程序寻找与 c 源文件执行相同工作的 IDE 编译器。我在大学需要它，我的老师在 windows 上使用 Dev-C++，但我有 ubuntu，我需要类似的东西来打开一个 .c 源并尽可能快地构建和运行它。如果没有像代码块这样的 ide，也许像 eclipse、netbeans、codelite 等......有一个插件来构建一个 .c 源代码而不需要创建一个我不知道的项目。请帮忙

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:28:04.640

我通常通过编写 C 代码来做到这一点，`gedit`然后我`gcc`总是通过命令行编译它。我不知道这是否正是你要找的。您可能更喜欢图形界面，但我发现自己以这种方式工作很舒服。
要快速编译和运行代码，您可以编写如下代码：

```
me@mybox:~# gcc -o test test.c
me@mybox:~# ./test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T12:35:43.180

如果您的 .c 文件被调用`test`，您还可以从命令行尝试以下操作：

`$ make test`

它将为您生成一个可执行文件`test`，您可以通过以下方式运行它：

`$ ./test`

# path - 如何在没有 *.exe 文件的情况下使用 installanywhere 8 在路径环境变量中添加位置？

> ID：14256655
> 
> 赞同：0
> 
> 时间：2013-01-10T11:16:01.943
> 
> 标签：path, environment-variables, installanywhere

我浏览了文档，但我不清楚这个过程。就像在 Windows 中一样，我的程序的安装程序喜欢做 - 将它的设置位置添加到路径环境变量中，但是这样做的步骤是什么？作为文档，它需要一个像这样的变量 $lax.nl.env.exact_case.Path$ 但它不起作用。任何人都可以帮助理解或参考一些参考资料吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:48:49.753

使用“设置系统环境变量”操作。

在“变量名”中输入`PATH`. 这必须是您要设置的环境变量名称，而不是该变量的当前值，这是`$lax.nl.env.exact_case.Path$`给您的。

在“将值设置为”中，输入要添加到 PATH 变量中的内容。它可以是一个包含 InstallAnywhere 变量的表达式（例如在 Windows或非 Windows 平台上的`$USER_INSTALL_DIR$$/$bin`计算结果）`<InstallationDir>\bin``<InstallationDir>/bin`

选择是否要替换 PATH 变量（通常不是一个好主意），或者将您的值添加或附加到当前 PATH 变量。

最后，指明这是否应该仅适用于“当前用户”，或者适用于“所有用户”。

**注意**：`$lax.nl.env.exact_case.Path$`可能为空，因为`$lax.nl.env.exact_case.<Name>$`解析`<Name>`变量的 EXACT CASE。使用`$lax.nl.env.exact_case.PATH$`or`$lax.nl.env.Path$`代替。但是，在引用环境变量时最好使用全部大写。*nix 平台区分大小写，而 Windows 不区分大小写。所以，最兼容的形式是`$lax.nl.env.PATH$`.

# ajax - 在ajax中显示来自php的响应

> ID：14256660
> 
> 赞同：1
> 
> 时间：2013-01-10T11:16:09.337
> 
> 标签：ajax

这是我想做的..

1.  使用 ajax 制作表单来提交数据。
2.  存储在文件中的用户键入的文本
3.  当同一用户再次使用表单时，php 文件将检查该单词是否存在于日志文件中。如果存在，则 ajax 显示错误消息。
4.  如果他输入新文本，则可以使用该表格。

我试图谷歌，但我没有找到任何提供此类教程的网站.. 供您参考，我是 jquery 的新手..

请帮我做我上面提到的..

# c# - 如何修复 ChilkatSocket AsyncConnection 中的 System.AccessViolationException

> ID：14256661
> 
> 赞同：3
> 
> 时间：2013-01-10T11:16:11.497
> 
> 标签：c#, sockets, access-violation, asyncsocket, chilkat

下面是我的 Chilkat Sockets Server 和客户端代码，运行时出现以下奇怪错误，请帮助我解决它，客户端和服务器都在同一台机器上运行。

**服务器代码**：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using Chilkat;
using NLog;

namespace SocketsListener
{
    public partial class Form2 : Form
    {
        private Chilkat.Socket _socket;
        private readonly Logger _logger = LogManager.GetCurrentClassLogger();

        public Form2()
        {
            InitializeComponent();
            Init();
        }
        private void Init()
        {
            _socket = new Chilkat.Socket();
            var success = _socket.UnlockComponent("registered customer");
            if (success != true)
            {
                return;
            }

            success = _socket.BindAndListen(5555, 25);

            if (success != true)
            {
                _logger.Error(String.Format("Error: {0}", _socket.LastErrorText));
                return;
            }

            _logger.Info("Service starting...");
            var socket = new Chilkat.Socket();

            success = _socket.AsyncAcceptStart(0);

            while (_socket.AsyncAcceptFinished != true)
            {
                socket.SleepMs(1);
            }

            if (!_socket.AsyncAcceptFinished)
            {
                MessageBox.Show(_socket.LastErrorText);
                return;
            }
            if (!_socket.AsyncAcceptSuccess)
            {
                MessageBox.Show(_socket.LastErrorText);
                return;
            }

            var connectedSocket = new Socket();
            connectedSocket = _socket.AsyncAcceptSocket();

            _logger.Info("Data read from Socket at " + connectedSocket.AsyncReceiveUntilMatch("-EOM-"));

            //backgroundWorker1.RunWorkerAsync();
        }
    }
} 
```

客户代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using NLog;
using Chilkat;

namespace SocketClient
{
    public partial class Form1 : Form
    {
        private readonly Logger _logger = LogManager.GetCurrentClassLogger();
        public Form1()
        {
            InitializeComponent();
            SendMessage();
        }
        private void SendMessage()
        {
            var id = Guid.NewGuid();
            var socket = new Socket();
            var success = socket.UnlockComponent("registered customer");
            try
            {
                if (success != true)
                {
                    return;
                }

                //success = socket.Connect("192.168.113.39", 5555, false, 0);
                success = socket.Connect("localhost", 5555, false, 0);

                if (!success)
                {
                    _logger.Info((String.Format("Error: \nunable to connect to host: {0}", socket.LastErrorText)));
                }

                var message = string.Format("message id {0}\t This is client message -EOM-", id);

                socket.MaxSendIdleMs = 10000;

                success = socket.SendString(message);

                if (!success)
                {
                    _logger.Info((String.Format("Error: \nunable to send message\t MessageId: {0}\nMessage Error {1}",id, socket.LastErrorText)));
                }
                socket.Close(10000);

            }
            catch (Exception)
            {

                throw;
            }
        }
    }
} 
```

**错误：**

```
System.AccessViolationException was unhandled Message="Attempted to read or write protected memory. This is often an indication that other memory is corrupt." Source="ChilkatDotNet2" StackTrace: at ClsSocket.AsyncAcceptSocket(ClsSocket* ) at Chilkat.Socket.AsyncAcceptSocket() at SocketsListener.Form1.startListner() in E:DataVS2008SocketsListenerSocketsListenerForm1.cs:line 72 at SocketsListener.Form1.Init() in E:DataVS2008SocketsListenerSocketsListenerForm1.cs:line 43 at SocketsListener.Form1..ctor() in E:DataVS2008SocketsListenerSocketsListenerForm1.cs:line 22 at SocketsListener.Program.Main() in E:DataVS2008SocketsListenerSocketsListenerProgram.cs:line 18 at System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args) at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args) at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly() at System.Threading.ThreadHelper.ThreadStart_Context(Object state) at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state) at System.Threading.ThreadHelper.ThreadStart() InnerException: 
```

# jquery - 如何使用 jquery 获取图像的索引值？

> ID：14256664
> 
> 赞同：0
> 
> 时间：2013-01-10T11:16:13.947
> 
> 标签：jquery, image

大家好，我正在研究 jquery 我需要避免添加多个图像我在这里编写了代码但是

总是我得到图像的索引值是-1并且总是如果条件触发我做错了一些事情你能帮我做这件事提前谢谢

这是第一个 div 的代码

```
<div><span class="span1">
<img width="30" hieght="30" name="productimage" src="http://panther:805/Computers.jpg"></span>
<span class="span1">Black_xxl_Slim</span>
<span class="span1">1</span>
<a class="pull-right" href="#"><i onclick="Add(this)" class="icon-plus"></i></a>
</div> 
```

这是第二个 div 的代码：

```
<div class="span6" id="separat">
            <ul class="thumbnails pre-scrollable" id="productbundles">
            </ul>
        </div> 
```

这里我的代码如下

```
 function Add(obj) {
           var addedImagesArray = [];
           var img = $(obj).closest('div').find('img').first();

         var image_src = $(img).attr('src');
        var newobj = $('<li class="span2" id="bunle' + id++ + '"><a href="javascript: void(0)"><img hieght=30  width=30 src="' + image_src + '" /></a><h5>' + "Name:" + name + '</h5><span id="pric' + id + '"><b>' + "Price:" + price + '</b></span>');
         if   (addedImagesArray.indexOf(image_src)) {
           alert("Image Already Added");//src present in the array so do nothing or show an alert..
         } else {
           $('#productbundles').append(newobj); //append the image
          addedImagesArray.push(image_src); ///add src to array
         }
      } 
```

在上面我有两个 div 我正在将图像从一个 div 添加到另一个

但问题是我总是得到-1索引值请帮助我提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T11:17:32.550

您需要将[indexOf()](http://www.w3schools.com/jsref/jsref_indexof.asp)的*返回值*与进行比较，还需要在函数外部的全局范围内声明 addedImagesArray。`-1`

改变

```
if(addedImagesArray.indexOf(image_src)) { 
```

到

```
if(addedImagesArray.indexOf(image_src) != -1) { 
```

*在全局范围内声明 addedImagesArray*

```
var addedImagesArray = [];
function Add(obj) {

           var img = $(obj).closest('div').find('img').first(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:18:27.137

改变 ：

```
if(addedImagesArray.indexOf(image_src)) {
  alert("Image Already Added"); 
```

到

```
if(addedImagesArray.indexOf(image_src) > -1 ) {
  alert("Image Already Added"); 
```

# jquery - DOM 中新元素的 jQuery Mobile 格式化

> ID：14256674
> 
> 赞同：0
> 
> 时间：2013-01-10T11:16:34.470
> 
> 标签：jquery, css, jquery-mobile, knockout.js

我在这里有一个小提琴：http: [//jsfiddle.net/marktait/YETGp/](http://jsfiddle.net/marktait/YETGp/)

它被设计为使用 jQueryMobile - 首次显示时很好。但是当我单击 Add Room 按钮时，它会添加一个新行，但 jQuery Mobile CSS 并未应用于新行。

是否有将格式添加到 DOM 中的新元素？

HTML 是：

```
<div class='liveExample'> 

    <table width='100%' border="1">
        <thead>
            <tr>
                <th width='25%'>Room Type</th>
                    <th width='25%'>Occs</th>
                <th class='price' width='15%'>Price</th>
                <th class='quantity' width='10%'>Quantity</th>
                <th class='price' width='15%'>Subtotal</th>
                <th width='10%'> </th>
            </tr>
        </thead>
        <tbody data-bind='foreach: lines'>
            <tr>
                <td>
                    <select data-bind='options: $root.RoomCategories, optionsText: "TypeName", optionsCaption: "Select...", value: category'> </select>
                </td>
                <td data-bind="with: category">
                    <select data-bind='options: Occs, optionsText: "occ", optionsCaption: "Select...", value: $parent.product'> </select>
                </td>
                <td class='price' data-bind='with: product'>

<span data-bind='text: formatCurrency(ratetocharge)'> </span>
                </td>
                <td class='quantity' data-bind="with: category">
                    <select data-bind="visible: $parent.product, options: ko.utils.range(0, TypeCount), value: $parent.quantity"></select>
                </td>
                <td class='price'>
                    <span data-bind='visible: product, text: formatCurrency(subtotal())' > </span>
                </td>
                <td>
                    <a href='#' data-bind='click: $parent.removeLine'>Remove</a>
                </td>
            </tr>
        </tbody>
    </table>
    <p class='grandTotal'>
        Total value: <span data-bind='text: formatCurrency(grandTotal())'> </span>
    </p>
    <button data-bind='click: addLine'>Add room</button>
    <button data-bind='click: save'>Submit booking</button>

</div> 
```

添加新行的 KnockOut 是：

```
// Operations
self.addLine = function() {
self.lines.push(new CartLine())
}; 
```

谢谢你的帮助，

标记

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T11:26:32.220

您应该在[这里查看文档](http://jquerymobile.com/demos/1.2.0/docs/pages/page-scripting.html)。

当您向页面添加内容时，您需要通知框架。在表格行的情况下（根据您的内容猜测），您需要在其上触发 create 事件。

```
$('.line_selector').trigger('create'); 
```

不幸的是，我没有淘汰赛的经验，所以我无法指导你应该在哪里打这个电话。

# jquery - 页面渲染后如何在jquery-tools中销毁.rangeinput对象

> ID：14256675
> 
> 赞同：0
> 
> 时间：2013-01-10T11:16:34.673
> 
> 标签：jquery, jquery-tools

如何在页面渲染后销毁 .rangeinput 滑块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:48:46.240

将范围括在 DIV 中

```
<div id="myRange">
 <input type="range" name="test" min="100" max="300" value="150" />  
</div>

<br /><br/><br />
<button id="remove">Remove</button> 
```

然后在脚本中删除某些事件后的 DIV，例如单击按钮

```
$(":range").rangeinput();
$("#remove").on('click',function(){$("#myRange").remove();}); 
```

# touch - 我在 Sencha Touch Origin 中遇到错误 http://localhost:8080 is not allowed by Access-Control-Allow-Origin

> ID：14256676
> 
> 赞同：0
> 
> 时间：2013-01-10T11:16:35.950
> 
> 标签：touch

我是 sencha 触摸技术的新手。我使用 IBMworklight +Sencha Touch 创建了示例应用程序。其中有一个名称为文本字段和按钮的表单。我希望在单击按钮时将数据存储到 MySQL。但是当单击按钮时它给了我错误。我无法解决错误。我已附加 .js 文件 [表单代码！](https://www.dropbox.com/s/z875spe8wtrq0vf/insert.js)和服务器端代码在这里[“php & error code”](https://www.dropbox.com/s/l0et4gh074jyfx4/insert.php)。请帮助我。我正在等待你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T09:50:31.100

试试这样：

```
Ext.Ajax.request({
                    url : "http://test.com/form.php",
                    params : values,
                    method: 'POST',
                    withCredentials: false,
                    useDefaultXhrHeader: false,
                    success: function (result, request){
                    Ext.Msg.alert('Thx','Form saved!');
                    form.unmask();
                    form.reset();
                    },
                    failure: function (result, request){
                        Ext.Msg.alert('Sorry', 'Error!');
                        form.unmask();
                    }
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:21:29.503

由于浏览器中的跨站点脚本限制，您无法从为应用程序提供服务的位置以外的位置访问资源。您可以做几件事：

*   将您的应用程序资产作为文件资产提供（就像 Phonegap 一样）
*   使用 JsonP 获取数据
*   使用将您的请求转发到远程主机的本地代理（非常适合开发）。例如。[http://benalman.com/projects/php-simple-proxy/](http://benalman.com/projects/php-simple-proxy/)

# irix - 如何在 irix 中配置 nis 客户端

> ID：14256680
> 
> 赞同：0
> 
> 时间：2013-01-10T11:16:45.563
> 
> 标签：irix

谁能告诉我如何在框中配置`nis`客户端。`irix`

如何检查`nis`软件包是否已安装`irix`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:54:16.220

您可以使用以下命令轻松检查是否安装了**NIS ：**

[IRIX inst 命令](http://techpubs.sgi.com/library/tpl/cgi-bin/getdoc.cgi?coll=0650&db=man&fname=/usr/share/catman/a_man/cat1/inst.z)

如果 NIS 已经安装，您应该发出命令：

```
/etc/chkconfig yp on 
```

启用**NIS**服务并编辑：

```
/etc/nsswitch.conf 
```

使用任何标准编辑器。

网络重新启动或系统重新启动将为您激活**NIS**。

只需检查您的配置是否正常

```
ypwhich 
```

更多信息：

[IRIX NIS 配置手册](http://techpubs.sgi.com/library/tpl/cgi-bin/getdoc.cgi/0650/bks/SGI_Admin/books/NIS_AG/sgi_html/ch04.html#LE41506-PARENT)

# java - 生成包含当前日期和计数器的 id

> ID：14256682
> 
> 赞同：2
> 
> 时间：2013-01-10T11:16:53.873
> 
> 标签：java

我正在尝试执行代码来为包含今天日期和连接的计数器的 sql 中的记录生成 id。问题是当我尝试点击生成按钮时，id 会生成当前日期，但我希望计数器在第二天或日期更改时重新初始化为 1，这在没有初始化的情况下请帮助。

```
import java.sql.ResultSet;
import java.text.SimpleDateFormat;
import java.util.Date;

public class MyCalendarUtil {

    private static String buffer = "";
    private static int counter = 1;

    public String nextID() {
        final String datePrefix = new SimpleDateFormat("yyyyMMdd").format(new Date());

        if (Long.parseLong(returnMaxId()) > 0) {
            MyCalendarUtil.counter = Integer.parseInt(returnMaxId().substring(8, returnMaxId().length()));
        }

        if (buffer.equals(datePrefix)) {
            MyCalendarUtil.counter++;
        } else {
            MyCalendarUtil.buffer = datePrefix;
            MyCalendarUtil.counter = 1;
        }

        String suffix = "";

        if (MyCalendarUtil.counter <= 1000) {

            if (validateRange(0, 9, MyCalendarUtil.counter)) {
                suffix += "00" + counter;
            } else if (validateRange(10, 99, MyCalendarUtil.counter)) {
                suffix += "0" + counter;
            } else if (validateRange(99, 999, MyCalendarUtil.counter)) {
                suffix += counter;
            }
        }

        return (datePrefix + suffix);
    }

    public boolean validateRange(int min, int max, int field) {
        return field >= min && field <= max;
    }

    public String returnMaxId() {
        String result = "";
        try {
            DBUtil util = new DBUtil();
            Connection connection = util.getConnection();
            ResultSet rs = connection.createStatement().executeQuery("SELECT MAX(id) AS 'lastId' FROM crap ");
            if (rs.next()) {
                result = (rs.getString(1) != null) ? rs.getString(1) : "0";
            }
        } catch (Exception e) {
            e.printStackTrace();
            System.out.println("Error : " + e.getMessage());
        }
        return result;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:54:56.173

据我了解，您需要听取日历的日变化属性。下面的代码可能会帮助你....

```
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.beans.PropertyChangeSupport;
import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;

public class DateChangeEx {

    private PropertyChangeSupport changeSupport = new PropertyChangeSupport(this);

    private static int counter = 1;
    public static void main(String[] a){

        Calendar cal = MyCal.getInstance();

        System.out.println(cal.getTime());
        System.out.println("before updating counter--->");
        for(int i=0; i<10; i++){
            System.out.println(""+(counter++)+cal.getTime());
        }

        cal.add(Calendar.DATE, 1);
        System.out.println("After updating counter--->");
        for(int i=0; i<10; i++){
            System.out.println(""+(counter++)+cal.getTime());
        }
        System.out.println(cal.getTime());
    }

    private class ChangeListner implements PropertyChangeListener{

        @Override
        public void propertyChange(PropertyChangeEvent evt) {
            counter = 0;

        }

    }

    private class MyCal extends GregorianCalendar{

        public void add(int field, int amount){
            Date oldVal = this.getTime(); 
            super.add(field, amount);

            changeSupport.firePropertyChange("calender", oldVal, this.getTime());
        }
    }

    public void addPropertyChangeListner(PropertyChangeListener listner){
        changeSupport.addPropertyChangeListener(listner);
    }

    public void removePropertyChangeListner(PropertyChangeListener listner){
        changeSupport.removePropertyChangeListener(listner);
    }
} 
```

# java - 通过构造函数抛出异常

> ID：14256684
> 
> 赞同：2
> 
> 时间：2013-01-10T11:16:56.577
> 
> 标签：java, exception

假设我有以下代码：

```
public class Conf{    
  public Conf(String szPath) throws IOException, ConfErrorException{
      ...
  }
  public void someMethod(){
    ...
  }
} 
```

然后我想以这种方式实例化对象：

```
Conf configuration = new Conf("/etc/myapp/myconf.conf"); 
```

如果由于某种原因，构造函数抛出任何定义的异常，会创建对象吗？
我的意思是，我是否仍然能够访问其中的方法，例如，如下面的代码？

```
Conf configuration;
try{
   configuration = new Conf("/etc/myapp/myconf.conf");
}catch(IOException|ConfErrorException e){
   //Suppose we entered here
   configuration.someMethod();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T11:31:20.727

让我从一个对象构造失败的场景开始，它可以举例说明如果你可以使用这样的失败对象可能会出现什么问题：

让我们定义一个类 A，这样：

```
class A {
   private String a = "A";

   public A() throws Exception {
        throw new Exception();
   }
} 
```

现在，假设我们想在一个`try...catch`块中创建一个 A 类型的对象。

```
A a = null;
try{
  a = new A();
}catch(Exception e) {
  //...
}
System.out.println(a); 
```

显然，此代码的输出将是：`null`.

为什么 Java 不返回 A 的部分构造版本？毕竟，当构造函数失败时，它的`name`字段成员已经被初始化了，对吧？

Java 没有这样做，因为该对象没有成功构建。该对象处于不一致状态，因此被 Java 丢弃。您的变量 A 甚至没有初始化，它保持为空。

现在，如您所知，要完全构建一个新对象，必须首先初始化它的所有超类。如果其中一个超类未能构建，那么该对象的最终状态是什么？这是不可能确定的。

看看这个更详细的例子

```
class A {
   private final int a;
   public A() throws Exception { 
      a = 10;
   }
}

class B extends A {
   private final int b;
   public B() throws Exception {
       methodThatThrowsException(); 
       b = 20;
   }
}

class C extends B {
   public C() throws Exception { super(); }
} 
```

当`C`调用 的构造函数时，如果初始化时发生异常`B`，最终变量的值是`int b`多少？

因此，无法创建对象 C，它是伪造的，是垃圾，它没有完全初始化。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-10T11:26:17.817

> 构造函数抛出任何定义的异常，会创建对象吗？

对象总是在构造函数被调用之前创建。否则构造函数中将没有`this`要初始化的对象。

如果你抛出一个异常，你将失去对该对象的引用，除非你做了一些可疑的事情，比如在抛出异常之前将对象存储在构造函数中。

```
public class Main {
    static class ThrowsException {
        static final List<ThrowsException> BAD_LIST = new ArrayList<>();

        ThrowsException() {
            System.out.println("this = " + this);
            BAD_LIST.add(this);
            throw new RuntimeException();
        }
    }

    public static void main(String... args) {
        for (int i = 0; i < 3; i++) {
            ThrowsException te = null;
            try {
                te = new ThrowsException();
            } catch (Exception ignored) {
            }
            System.out.println("te = " + te);
        }
        System.out.println(ThrowsException.BAD_LIST);
    } 
```

印刷

```
this = Main$ThrowsException@22911fb5
te = null
this = Main$ThrowsException@65b8b5cd
te = null
this = Main$ThrowsException@41a7d9e7
te = null
[Main$ThrowsException@22911fb5, Main$ThrowsException@65b8b5cd, Main$ThrowsException@41a7d9e7] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T11:19:51.197

`Conf configuration = new Conf("/etc/myapp/myconf.conf");`

此代码分 3 步完成：

1.  创建所有基础对象。
2.  创建对象 Conf
3.  分配参考`configuration`

由于您**没有**完成第二步，因此第二步也不会完成，这意味着`configuration`不会初始化。这意味着它`configuration` **不是**空的，它**甚至没有被初始化**。您的代码将无法编译。

然而，由于第一步完成，会有一堆丢失的对象（符合 GC 条件）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-10T11:20:28.003

不，构造函数抛出异常会突然完成 try 块。构造函数没有返回任何内容。块中没有更多内容。这意味着，在您的代码中，配置不变。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-10T11:33:38.193

将创建一个对象，但您永远不会收到对它的引用。就目前而言，您的代码永远不会编译：

```
Conf configuration;
try{
    configuration = new Conf("/etc/myapp/myconf.conf");
}catch(IOException|ConfErrorException e){
    //Suppose we entered here
   configuration.someMethod();
} 
```

编译器认识到`configuration`当它到达 catch 块时可能没有初始化。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-10T11:19:15.970

> 如果由于某种原因，构造函数抛出任何定义的异常，会创建对象吗？

不，如果构造函数抛出异常，引用`configuration`将不会被赋值。

请参考：[什么条件导致对象实例化返回 null？](https://stackoverflow.com/questions/9183930/what-conditions-cause-object-instantiation-to-return-null)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-10T11:21:14.043

不，如果对象的构造函数抛出异常，您将无法获取该对象的实例。

*它是不应由构造函数创建的单例对象的“最佳”方法之一。*

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-01-10T11:25:45.340

不，如果初始化对象时抛出异常，则不会创建对象。

# c++ - 如何编写通用 C++ 函数来将 xml 解析为结构？

> ID：14256686
> 
> 赞同：5
> 
> 时间：2013-01-10T11:17:12.053
> 
> 标签：c++, xml, templates, boost

我有一组 xml 数据文件，这些文件表示图像中感兴趣的对象（矩形、点、标记的面等），我想对其进行解析以生成结构向量。这些文件是手动创建的（因此不仅仅是序列化一些 C++ 对象的结果）并且具有以下形式：

```
<root>
<image filename=whatever>
<object>
  <x>1</x>
  <y>2</y>
</object>
<object>
  <x>3</x>
  <y>4</y>
</object>
</image>
<image filename=something>
 ...
</image>
</root> 
```

所以是一组图像，每个图像都包含一个对象子对象的集合，每个子对象都有子对象，它们提供与该对象相关的数据。该数据的结构因文件而异，例如，在一个文件中，每个对象可能只有一个 x 和 ay，而在另一个文件中，每个对象可能包含整数 x1、y1、x2、y2 和双 z。

我想解析这样一个文件以生成一个对象向量，其中 Object 是一个结构，在本例中为 struct Object { int x; 整数y; }。

对于不同的对象选择，我目前有单独的函数，它们使用 rapidxml 以相同的方式解析 xml，除了它们提取的字段。

我想编写一个模板化函数，以便您可以仅以某种方式指定结构的元素并让函数返回适当结构的向量。即用户应该指定一个对（“x1”，int），（“x2”，int）等的列表，并让其余的工作自动完成。

我确信必须有一个很好的解决方案来解决这个问题，避免使用 XML 模式。我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T15:52:28.423

您可以尝试[Boost Property Tree](http://www.boost.org/doc/libs/1_52_0/doc/html/property_tree.html#boost_propertytree.intro)。

它允许您编写自己的加载/保存函数来将 XML（或 INI 或 JSON）数据映射到您自己的结构上。请参阅[教程](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_propertytree/tutorial.html)。

它甚至使用您已经在使用的 RapidXML。

**编辑：**

你可以尝试类似的东西

```
template<typename T>
struct Field
{
    typedef T type;
    std::string name;
};

template<typename... Fields>
std::tuple<typename Fields::type...>
load(const Data& data, Fields... f)
{
    return std::make_tuple( data.get<typename Fields::type>(f.name)... );
} 
```

`Data`输入数据的某些来源在哪里，例如 a `boost::ptree`，您可以像这样使用该函数：

```
load(d, Field<int>{"x1"}, Field<int>{"x2"} ); 
```

然后你只需要每个数据类型都可以从正确类型的元组中构造出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-05T17:40:52.957

如果您可以为您的 XML 文件编写 XML 模式，那么有一些工具可以从该模式生成 C++-API。关键字是“C++ XML 模式绑定”。

我使用过[XSD 编译器](https://www.codesynthesis.com/products/xsd/)，但还有其他类似的工具......

# java - 如何制作我的应用系统

> ID：14256687
> 
> 赞同：8
> 
> 时间：2013-01-10T11:17:16.213
> 
> 标签：java, android

我需要将我的应用程序创建为系统，因为我需要获得许可`android.permission.WRITE_SECURE_SETTINGS`。安装到虚拟设备 (Eclipse) 后，我的应用程序出现在`'/data/app'`. 我尝试手动将他移动到`'/system/app'`，设置权限`644`，但是当我启动我的应用程序时 - toast `'App isn't installed'`。重新启动后（关闭虚拟设备并重新启动）我的应用程序从`'/system/app'`.

*补充：* - 1\. 为什么android 中看不到我的应用程序`'/system/app'`？- 2\. 为什么重启虚拟设备后我的应用消失了`'/system/app'`？

在 Eclipse Emulator 和真实设备上制作我的应用程序系统的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T11:44:53.253

安装在您的 Android 设备上的应用程序可以根据其安装位置大致分为系统应用程序或用户应用程序。用户应用程序只是您通过 Google Play 商店、亚马逊应用程序商店或侧载安装的所有正常应用程序。这些进入您的 Android 手机的 /data 分区，这是可用于用户数据和应用程序的内部存储器的一部分。

系统应用程序基本上是预装在您的 ROM 中的应用程序。在标准的 Android 用户环境中，用户没有对 /system 分区的写入权限，因此无法直接安装或卸载系统应用程序。这个过程并不像听起来那么难。但是，有一个问题。

为了在您的 Android 设备上安装应用程序作为系统应用程序，您的设备必须是 root 或安装了自定义恢复（或两者都安装）。通常几乎每个安装了自定义恢复的人都使用有根 ROM，所以我们将只使用有根手机的方法。转到下面的教程。它可能会对您有所帮助。

[使您的应用成为系统应用](http://www.addictivetips.com/mobile/how-to-install-any-app-as-system-app-on-android/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:43:06.577

您不能将您的应用程序默认设置为系统应用程序。不过，还有其他一些方法可以让您将其他普通应用程序作为系统应用程序在`rooted phones`.

您可以通过以下步骤将 APK 安装到 /system/app。

1.  将 APK 推送到 SD 卡。

    `$ adb push SecureSetting.apk /sdcard/`

2.  进入控制台获取shell

    `$ adb shell`

3.  切换到超级用户。如果您的设备未植根，请先将其植根。（如果您不知道该怎么做，只需谷歌。）

    `$ su`

4.  使用 WRITE 权限重新挂载系统分区。

    `$ mount -o remount,rw -t yaffs2 /dev/block/mtdblock3 /system`

5.  将您的 APK 从 /sdcard/ 转移到 /system/ ，由于不支持 cp，有些人使用 cp 命令失败。所以用 cat 代替。

    `$ cat /sdcard/SecureSetting.apk > /system/app/SecureSetting.apk`

6.  Remout /system 分区回到只读状态，然后退出

    `$ mount -o remount,ro -t yaffs2 /dev/block/mtdblock3 /system
    $ exit`

然后重新启动您的设备，APK 应该已经安装在 /system/app 上。[如此处](https://stackoverflow.com/questions/2007024/push-my-apk-to-system-app/10362072#10362072)所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T11:50:34.983

您不能在模拟器上将应用程序制作为系统应用程序。但是您可以在设备上将应用程序制作为系统应用程序。为此，您需要在您的电脑上设置 git repo，并在设置 repo 后，复制应用程序**repo文件夹/packages/apps**中的文件夹并放入编译。您将在repo的out文件夹中获得system.img。然后您可以将system.img刷到sd卡上，这样您就可以将您的应用程序作为系统应用程序.这是将应用程序作为系统应用程序的唯一方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-07T12:22:47.563

如果设备没有 root，则无法将任何内容复制到系统或数据分区。

使用 root 在命令提示符或 linux shell 中执行以下命令，一切都应该没问题：

```
adb push fileName /data/local/tmp
adb shell
su
mount -o remount, rw /system
cp /data/local/tmp/fileName /system/folderOfYourChoise
chmod 644 (if its an apk and you want the system to use it as a system app)
exit (exits the su shell)
exit (exits the adb shell)
adb reboot (to apply and see changes on the device) 
```

# c# - 如何处理多行字符串

> ID：14256689
> 
> 赞同：0
> 
> 时间：2013-01-10T11:17:19.117
> 
> 标签：c#, asp.net

我有一个返回多行字符串的方法..我已经用参数和不带参数进行了测试..没有参数（带常量）它可以工作..这里是函数

```
public string AppComments()
        {
           string teststring = @"Nelly Thomas (Approve) 12/27/2012 8:50 PM - 12/27/2012 8:52 PM
                               (Nelly Thomas) LazyApproval by nelly.thomas@joshworld.local Approved

                                Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, 
                                when an unknown printer took a galley of type and scrambled it to make a type specimen book";

              Regex reg = new Regex(@"(.+)\(.+\)\s((\d\d\/){2}\d{4}\s\d{1,2}:\d\d\s\w\w)\s-\s.+[\n|\r].+[\n|\r]{2}((?:.|\n)+)", RegexOptions.IgnoreCase | RegexOptions.Multiline);

              string returnstring = reg.Match(teststring).Groups[1].Value + reg.Match(teststring).Groups[2].Value + reg.Match(teststring).Groups[4].Value.ToString();

            return returnstring;
        } 
```

但是当我传递以下文本时，它永远不会返回任何值..它显示为空白..我猜我在方法内部传递的值没有多行文字？

```
Nelly Thomas (Approve) 12/27/2012 8:50 PM - 12/27/2012 8:52 PM
(Nelly Thomas) LazyApproval by nelly.thomas@joshworld.local Approved

Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, 
when an unknown printer took a galley of type and scrambled it to make a type specimen book 
```

这是带参数的函数

```
public string AppComments(string mystring)
        {

              Regex reg = new Regex(@"(.+)\(.+\)\s((\d\d\/){2}\d{4}\s\d{1,2}:\d\d\s\w\w)\s-\s.+[\n|\r].+[\n|\r]{2}((?:.|\n)+)", RegexOptions.IgnoreCase | RegexOptions.Multiline);

              string returnstring = reg.Match(mystring).Groups[1].Value + reg.Match(mystring).Groups[2].Value + reg.Match(mystring).Groups[4].Value.ToString();

            return returnstring;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:40:52.643

尝试使用**$**作为正则表达式中行尾的谓词。如果您不使用 ^ 和 $，RegexOptions.Multiline 将毫无意义

另一种方法：尝试将行尾标记为可选：

`Regex reg = new Regex(@"(.+)\(.+\)\s((\d\d\/){2}\d{4}\s\d{1,2}:\d\d\s\w\w)\s-\s.+[\n|\r]??.+([\n|\r]{2})??((?:.|\n)+)", RegexOptions.IgnoreCase);`

# java - Eclipse RCP 颜色选择器

> ID：14256694
> 
> 赞同：4
> 
> 时间：2013-01-10T11:17:36.307
> 
> 标签：java, swt, eclipse-rcp, jface

在 Eclipse 首选项中，每个语法高亮首选项页面中都有一个颜色选择器控件。它由一个彩色按钮组成

![颜色选择按钮](../Images/10d2bbfe3083c36f182c0d65ce510208.png)

打开一个对话框

![颜色选择器对话框](../Images/06240f1ad74107405faae649e97cf613.png)

我想在我的 RCP 应用程序中使用这些组件，但我不知道它们是什么，或者它们是否可用。

我猜这个按钮可能是一个普通的按钮。这将很容易建立自己。但我想避免自己构建整个对话。

谁能告诉我在哪里可以找到这个组件？

PS：我已经看到了[这个问题](https://stackoverflow.com/questions/1471546/is-there-a-color-picker-plugin-for-eclipse)，但它没有提供“本机”Eclipse 解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T11:29:09.097

现在我自己偶然发现了它（同时寻找完全不同的东西）。它是`org.eclipse.jface.preference.ColorFieldEditor`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T10:44:15.297

相反，您可以直接使用 org.eclipse.jface.preference.ColorSelector 类来使用。以下是有关如何使用的片段。

```
final ColorSelector colorSelector = new ColorSelector(shell);
        colorSelector.getButton().addSelectionListener(new SelectionListener() {
            @Override
            public void widgetSelected(SelectionEvent e) {

                System.out.println(" selected color :: "
                        + colorSelector.getColorValue());

            }
            @Override
            public void widgetDefaultSelected(SelectionEvent e) {
                // TODO Auto-generated method stub

            }
        }); 
```

# c++ - 为什么 sizeof(int) 在不同的操作系统中会有所不同？

> ID：14256695
> 
> 赞同：4
> 
> 时间：2013-01-10T11:17:41.990
> 
> 标签：c++, c, operating-system

我很清楚为什么 int 的大小取决于在 C 和 C++ 中使用的是哪个操作系统。如果指针的大小不同也没关系，但为什么整数的大小。如果 16 位 OS sizeof(int) = 2 字节，则对于 32 位 sizeof(int) = 4 字节。为什么这样？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T12:45:07.693

> 为什么这样？

历史原因。

在 ANSI C 标准和`size_t`1989 年出现之前，`int`是用于索引数组的类型。`malloc`以 an`int`作为参数，`strlen`返回一个。因此`int`必须大到足以索引任何数组，但又小到不会造成太多开销。对于文件偏移，通常是较大的类型，例如`long`was `typedef`'d to `off_t`。

在[PDP-11](https://en.wikipedia.org/wiki/PDP-11)上，C 于 1970 年代初首次实现，与`int`处理器寄存器一样大：16 位。在[VAX](https://en.wikipedia.org/wiki/VAX)等大型机器上，它被扩大到 32 位以允许更大的阵列。

这个约定在很大程度上被放弃了；C 和 C++ 标准使用`size_t`and`ssize_t`表示数组的索引和长度。在 64 位平台上，通常`int`仍然是 32 位宽，而`size_t`64 位。（不过，许多较旧的 API，例如[CBLAS](http://www.netlib.org/blas/)仍然`int`用于索引。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T11:21:28.897

*字节*是目标系统可以处理和唯一寻址的最小内存单元。因此，字节的大小取决于平台和编译器，但在大多数设置中是 8 位。

因此，假设一个字节是 8 位，这意味着 64 位等于 8 个字节，32 位等于 4 个字节，16 位等于 2 个字节。

在模糊级别上，“X 位系统”是默认情况下基本值（寄存器、整数等）为 X 位的系统。因此，您的系统本机使用多少位会立即影响需要多少字节来保存这些值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T11:41:32.987

根据 C++ 标准

1.7.1 规定：

> C++ 内存模型中的基本存储单元是字节。一个字节至少大到足以包含基本执行字符集的任何成员......

然后 3.9.1.1 指出：

> 声明为字符 (char) 的对象应足够大以存储实现的基本字符集的任何成员。

所以我们可以推断它`char`实际上是一个字节。最重要的是 3.9.1.2 还说：

> 有五种有符号整数类型：“signed char”、“short int”、“int”、“long int”和“long long int”。在此列表中，每种类型提供的存储空间至少与列表中它前面的类型一样多。普通整数具有执行环境架构所建议的自然大小；提供其他有符号整数类型以满足特殊需要。

所以换句话说，它的大小`int`是（a）保证至少是一个字节，并且（b）自然地与它运行的操作系统/硬件对齐，所以现在很可能是 64 位或（对于许多旧系统）32 位.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T13:09:11.827

您的问题可以重新表述为为什么不同类型的数据结构取决于 CPU。这可以简单地通过 C 是一种可用于低级编程的语言这一事实​​来证明。您可以在[内核中的数据类型中](http://lwn.net/images/pdf/LDD3/ch11.pdf)看到如何为 Linux 中不同类型的 CPU 定义数据类型。这是链接到处理器的字长。

# java - 解析整数时抛出 NumberFormatException

> ID：14256705
> 
> 赞同：0
> 
> 时间：2013-01-10T11:18:13.487
> 
> 标签：java, numberformatexception

当我执行以下代码时出现以下异常

```
Integer.parseInt(1357679682162)+1

 INFO | jvm 1 | srvmain | 2013/01/08 22:22:09.496 | Caused by: java.lang.NumberFormatException: For input string: "1357679682162"
 INFO | jvm 1 | srvmain | 2013/01/08 22:22:09.496 | at java.lang.NumberFormatException.forInputString(Unknown Source)
 INFO | jvm 1 | srvmain | 2013/01/08 22:22:09.496 | at java.lang.Integer.parseInt(Unknown Source)
 INFO | jvm 1 | srvmain | 2013/01/08 22:22:09.496 | at java.lang.Integer.parseInt(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T11:19:53.490

您传递的数字超出了从 -2,147,483,648 到 2,147,483,647 的整数范围

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T11:20:24.380

这个数字对于整数来说太大了。整数是 32 位值，所以最大值是 2,147,483,647。尝试使用 long 代替。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T11:22:31.090

尝试

```
Long.parseLong(1357679682162); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T11:21:20.563

Java 整数最大值为 2147483647。

你正在尝试解析 1357679682162。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T11:22:02.430

这个数字是不是太大而无法放入 int 中？java中int的范围是-2,147,483,648到2,147,483,647。也许您应该改用 parseLong 。

尝试

```
Long.parseLong(1357679682162)+1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-10T11:22:18.093

号码太长了。

整数应该小于 2 ^31 = 2147483646

[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-10T11:30:06.907

使用以下代码检查自己，并为您的解决方案使用可行的类型。

```
System.out.println(Integer.MAX_VALUE);
System.out.println(Long.MAX_VALUE); 
```

# android - 更改日期选择器、时间选择器和对话框分隔符颜色

> ID：14256706
> 
> 赞同：0
> 
> 时间：2013-01-10T11:18:13.860
> 
> 标签：android, dialog, datepicker, datetimepicker

这是我的日期和时间选择器： ![在此处输入图像描述](../Images/ff858f47d5ab656cf55ab0e146f73c34.png)

我想将分隔符颜色从蓝色更改为红色。我可以这样做吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-10T11:26:41.977

```
 <style name="myStylr" parent="@android:style/Widget.DeviceDefault.DatePicker">
   <item name="android:divider">@drawable/MyDivider</item>
 </style> 
```

将此样式设置为您的时间、日期选择器

# sql - SQL将结果分为2列

> ID：14256712
> 
> 赞同：2
> 
> 时间：2013-01-10T11:18:32.283
> 
> 标签：sql

我有一个关于使用 SQL 检索数据的问题

我想得到

```
count(comments_id) where comment_year = 2012 and 
count(comments_id) where comment_year = 2013 
```

在一个查询中获得如下输出：

```
year12_comments  |  year13_comments
7                |  8 
```

我希望它清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T11:20:23.760

像这样

```
...
SUM(CASE WHEN comment_year = 2012 THEN 1 ELSE 0 END) AS year12_comments,
SUM(CASE WHEN comment_year = 2013 THEN 1 ELSE 0 END) AS year13_comments,
... 
```

* * *

**更新：**

如果要获取它们之间的百分比，可以将它们包含在子查询中，如下所示：

```
SELECT 
   (year12_comments / year13_comments) * 100
FROM
(
  SELECT
     ...
     SUM(CASE WHEN comment_year = 2012 THEN 1 ELSE 0 END) AS year12_comments,
     SUM(CASE WHEN comment_year = 2013 THEN 1 ELSE 0 END) AS year13_comments,
     ...

 ) sub 
```

* * *

## 更新2

如果您想创建`year12_comments, year13_comments`以及百分比新列，只需将它们包含在如下`SELECT`语句中：

```
SELECT 
  year12_comments, 
  year13_comments,
  (year12_comments / year13_comments) * 100 AS ThePercenatge 
FROM
(
  SELECT
     ...
     SUM(CASE WHEN comment_year = 2012 THEN 1 ELSE 0 END) AS year12_comments,
     SUM(CASE WHEN comment_year = 2013 THEN 1 ELSE 0 END) AS year13_comments,
     ...

) sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:22:20.990

```
COUNT(CASE WHEN comment_year = 2012 THEN 1 END) year12_comments,
COUNT(CASE WHEN comment_year = 2013 THEN 1 END) year13_comments, 
```

如果您使用`MS SQL Server 2005`或以上，您可以使用`PIVOT`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T11:30:19.307

除非您可以使用 @HamletHakobyan 建议的 PIVOT 功能，否则恕我直言，这是一个错误的决定。除非（另一个）世界末日发生在 2013 年，否则 2014 年你也必须这样做。我宁愿为用户和年份使用一个简单的 group by：

```
SELECT user_id, comment_year, count(1)
FROM mytable
GROUP BY user_id, comment_year 
```

当然，您必须在应用程序中编写一些代码，但从清晰的角度来看，这似乎是要走的路……

（顺便说一句，我认为这也会比`CASE WHEN`结构更快......）

# php - Paypal IPN 侦听器大部分时间都是无效的

> ID：14256713
> 
> 赞同：0
> 
> 时间：2013-01-10T11:18:35.603
> 
> 标签：php, paypal

我有一个奇怪的问题，一些 IPN 验证返回无效。

IPN 的类型是 subscr_payment。其他类型，如 subscr_eot 或 subscr_cancel 验证得很好。

我用`ipnlistener.php`

没什么好看的。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:16:21.073

There must be something about the way you're sending the data back to PayPal for those types of transactions that it doesn't like. Are you re-formatting amounts or anything like that?

You need to send it back to PayPal exactly as they send it to you in order for it to validate.

# jboss - Jboss HornetQ EJBTransactionRolledbackException

> ID：14256718
> 
> 赞同：3
> 
> 时间：2013-01-10T11:18:48.927
> 
> 标签：jboss, nullpointerexception, hornetq

我看到在我们的生活环境中经常发生以下异常：

```
2013-01-08 00:09:45,886 ERROR [org.jboss.aspects.tx.TxPolicy] (Thread-70534 (HornetQ-   client-global-threads-225905014)) javax.ejb.EJBTransactionRolledbackException
2013-01-08 00:09:45,886 ERROR [org.hornetq.ra.inflow.HornetQMessageHandler] (Thread-    70534 (HornetQ-client-global-threads-225905014)) Failed to deliver message
javax.ejb.EJBTransactionRolledbackException
at org.jboss.ejb3.tx.Ejb3TxPolicy.handleInCallerTx(Ejb3TxPolicy.java:115)
at org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java:130)
at org.jboss.aspects.tx.TxInterceptor$Required.invoke(TxInterceptor.java:194)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
at org.jboss.ejb3.tx.NullInterceptor.invoke(NullInterceptor.java:42)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
at org.jboss.ejb3.security.Ejb3AuthenticationInterceptorv2.invoke(Ejb3AuthenticationInterceptorv2\.    java:79)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
at org.jboss.ejb3.BlockContainerShutdownInterceptor.invoke(BlockContainerShutdownInterceptor.java:67)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
at org.jboss.ejb3.core.context.CurrentInvocationContextInterceptor.invoke(CurrentInvocationContextInterceptor.java:47)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
at org.jboss.aspects.currentinvocation.CurrentInvocationInterceptor.invoke(CurrentInvocationInterceptor.java:67)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
at org.jboss.ejb3.interceptor.EJB3TCCLInterceptor.invoke(EJB3TCCLInterceptor.java:86)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
at org.jboss.ejb3.mdb.MessagingContainer.localInvoke(MessagingContainer.java:281)
at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.delivery(MessageInflowLocalProxy.java:311)
at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.invoke(MessageInflowLocalProxy.java:153)
at org.hornetq.ra.inflow.HornetQMessageHandler.onMessage(HornetQMessageHandler.java:324)
at org.hornetq.core.client.impl.ClientConsumerImpl.callOnMessage(ClientConsumerImpl.java:1028)
at org.hornetq.core.client.impl.ClientConsumerImpl.access$400(ClientConsumerImpl.java:50)
at org.hornetq.core.client.impl.ClientConsumerImpl$Runner.run(ClientConsumerImpl.java:1173)
at org.hornetq.utils.OrderedExecutorFactory$OrderedExecutor$1.run(OrderedExecutorFactory.java:100)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NullPointerException
...
2013-01-08 00:09:45,897 WARN  [org.hornetq.core.server.impl.QueueImpl] (Thread-1   (HornetQ-server-HornetQServerImpl::serverUUID=2de2c2a9-440f-11e2-ae8e-0024e83c51d2-   1125034725)) Message   Reference[160399362]:RELIABLE:ServerMessage[messageID=160399362,priority=9,    bodySize=474,expiration=0, durable=true,   address=jms.queue.phaseQueueFromEngine,properties=TypedProperties[{_HQ_GROUP_ID=S129737044}]     ]@1530618770 has reached maximum delivery attempts, sending it to Dead Letter Address   jms.queue.DLQ from jms.queue.phaseQueueFromEngine 
```

我不确定为什么会发生这种情况，消息大部分时间都得到了正确处理，但有时它们会引发下面的异常。我试图深入研究 Jboss 代码，但我无法弄清楚。有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:29:38.530

我找到了异常的原因，它是代码中的一个空指针，但是没有显示异常的来源（完整的堆栈跟踪）。

# driver - 通过 Visual Studio 构建 Windows 驱动程序时出现 GUID 错误

> ID：14256720
> 
> 赞同：3
> 
> 时间：2013-01-10T11:18:52.623
> 
> 标签：driver, guid, umdf

我正在 Visual Studio 中构建 UMDF 智能卡读卡器驱动程序。我收到这样的奇怪错误：

`error C2374: 'GUID_DEVINTERFACE_DISK' : redefinition; multiple initialization C:\Program Files (x86)\Windows Kits\8.0\Include\UM\winioctl.h 43 1 BixVReader`

文件 winioctl.h 包含不同设备的 DEFINE_GUIDs （实际上我在这里的每个设备都有 1 个错误）：

`DEFINE_GUID(GUID_DEVINTERFACE_DISK, 0x53f56307L, 0xb6bf, 0x11d0, 0x94, 0xf2, 0x00, 0xa0, 0xc9, 0x1e, 0xfb, 0x8b);`

我怀疑我在 Internal.h 中写的那行：

`DEFINE_GUID(SmartCardReaderGuid, 0x50DD5230, 0xBA8A, 0x11D1, 0xBF,0x5D,0x00,0x00,0xF8,0x05,0xF5,0x30);`

但是怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T15:19:11.220

**当我交换#include "winioctl.h"**和**#include**时，这些错误就消失了：

```
//
// Windows IOCTL definitions.
//
#include "winioctl.h"

//
// GUID include
//
#include <initguid.h>

//
// Device Interface GUID
// 0x50DD5230, 0xBA8A, 0x11D1, 0xBF,0x5D,0x00,0x00,0xF8,0x05,0xF5,0x30
//
DEFINE_GUID(GUID_DEVINTERFACE_BixVReader,
    0x50DD5230, 0xBA8A, 0x11D1, 0xBF,0x5D,0x00,0x00,0xF8,0x05,0xF5,0x30); 
```

我不是 C++ 专家，这对我来说似乎很奇怪，但仍然如此。欢迎对这个问题提出任何意见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-01T21:33:53.090

显然，解决这个问题的正确方法是`#include <windows.h>`在`winioctl.h`and之前`initguid.h`。这样做为我解决了这个问题，而无需交换标题。

# amazon-web-services - Amazon SQS（简单排队服务）速度？

> ID：14256723
> 
> 赞同：4
> 
> 时间：2013-01-10T11:19:01.490
> 
> 标签：amazon-web-services, amazon-sqs

Amazon SQS（简单排队服务）的排队速度是多少，格式为每秒 n MB/KB。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T08:52:19.820

最近在 AWS:reInvent 上，消息传递团队使用 EC2 和 SQS 演示了 SQS 吞吐量。SQS 能够在单台 EC2 机器上实现每秒数万条消息。

该视频可在此处获得： [http ://www.youtube.com/watch?v=zwLC5xmCZUs#t=22m53s](http://www.youtube.com/watch?v=zwLC5xmCZUs#t=22m53s)

如果您使用 EC2 微型或小型实例和单线程应用程序，您将无法获得这些数字。我们的客户经常提出比演示应用程序中显示的数字更多的请求。SQS 的速度主要取决于您编写发送者和接收者的可扩展性。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-18T18:16:47.943

如果速度意味着吞吐量，那么每秒几十万次是很容易实现的。Adam Warski 在这里做了一些详细的基准测试

[http://www.warski.org/blog/2014/06/benchmarking-sqs/](http://www.warski.org/blog/2014/06/benchmarking-sqs/)

如果速度意味着延迟，那么在插入和能够读取之间预计会看到约 20 毫秒的第 50 个百分位和 200 毫秒的第 99 个百分位。在此处查看 Paul Colby 的分析：

[http://colby.id.au/benchmarking-sqs/](http://colby.id.au/benchmarking-sqs/)

# c++ - 类外的默认构造函数/析构函数？

> ID：14256726
> 
> 赞同：15
> 
> 时间：2013-01-10T11:19:12.733
> 
> 标签：c++, c++11, constructor, destructor, default-constructor

根据 C++11 标准（`= default`在类定义之外），以下内容是否合法？

```
// In header file
class Test
{
    public:
        Test();
        ~Test();
};

// In cpp file
Test::Test() = default;
Test::~Test() = default; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-16T01:18:04.503

是的，可以在 .cpp 文件中默认定义一个特殊的成员函数。意识到这样做，内联默认函数的某些属性将不适用于您的类。例如，如果您的复制构造函数是默认定义的外联，则您的类将不会被视为可简单复制（这也使其无法被识别为 POD）。类似地，默认定义的外联析构函数将使您的类型不合格（或 POD）。

如果您希望拥有一个非内联复制构造函数并控制它的定义位置（可能控制它需要的生成的模板定义），但不希望自己手动定义它，这可能很有用- 精心制作的成员初始化器列表，这将是费力的，并且在维护时可能会过时。

# javascript - 跨域 AJAX 导致 403 被禁止

> ID：14256732
> 
> 赞同：0
> 
> 时间：2013-01-10T11:19:22.990
> 
> 标签：javascript, jquery, ajax, http-headers

我们正在尝试通过 POST 进行跨域 AJAX 调用。如果我们直接尝试从中访问`bbb.com`，`aaa.com`则会要求提供凭据。只有在提供凭据后，我们才能访问`bbb.com`. 现在以同样的方式，当对不同的域进行 AJAX 调用时，在这种情况下`bbb.com`，我会收到 403 禁止错误。

我尝试添加授权标头，现在在请求标头中，我看到了以下标头，但即使在拥有授权标头之后，我仍然遇到问题。

> Accept text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8
> Accept-Encoding gzip, deflate
> Accept-Language en-US,en;q=0.5
> Access-Control-Request-He。 .. authenticationindicator,authorizationtoken
> Access-Control-Request-Me... POST
> Authorization Basic TG9uZG9uOkJiZ0JlbjE4NTk=
> Cache-Control no-cache
> Host aaa.com
> Origin bbb.com
> Pragma no-cache
> Proxy-Connection keep-alive
> User-Agent Mozilla/5.0 (Windows NT 6.1; rv:17.0) Gecko/20100101 Firefox/17.0

有谁知道我们如何解决 403 禁止问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T11:28:06.067

听起来像是跨域问题 - [https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)

您可能想要添加从 bbb.com 返回的标头，如下所示：

```
Access-Control-Allow-Origin: * 
```

希望有帮助，克里斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:22:46.237

您不能进行跨域 AJAX 调用。

如果您不想从另一个域获取一些信息作为您自己的信息，您可以使用 PHP 作为服务器站点，然后对您自己的 php 脚本进行 ajax 调用。

另一种解决方案是使用[JSONP](https://stackoverflow.com/questions/2067472/what-is-jsonp-all-about)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T11:23:20.857

ajax 不允许跨域调用。为此目的使用 jsonp。 [http://jsonp.jit.su/](http://jsonp.jit.su/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T11:26:09.387

Ajax 不允许跨域调用。如果您想这样做，您可以让您的 Ajax 代码调用 PHP（或任何您选择的）代码，该代码可以访问 bbb.com，您可以将此数据返回给客户端。

# jquery - HTML 菜单分隔符

> ID：14256734
> 
> 赞同：0
> 
> 时间：2013-01-10T11:19:30.047
> 
> 标签：jquery, html, class, menu, superfish

我有一个菜单，我想在按钮右侧插入分隔符，但不想在子菜单上。HTML：

```
<ul id="nav" class ="pull-right">   

    <ul id="menu-menu1" class="sf-menu sf-vertical"><li id="menu-item-278" class="wordpress-classes"><a href="http://localhost/wordpress/">HOME</a>
            <ul class="sub-menu">
                <li id="menu-item-314" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-296"><a href="http://localhost/wordpress/">Home</a></li>
                <li id="menu-item-303" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-296"><a href="http://localhost/wordpress/?page_id=57">Products</a></li>
                <li id="menu-item-302" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-296"><a href="http://localhost/wordpress/?page_id=63">Dreams</a></li>
                <li id="menu-item-301" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-296"><a href="http://localhost/wordpress/?page_id=106">Vouchers</a></li>
            </ul>
        </li>
        <li id="menu-item-285" class="wordpress-classes"><a href="?page_id=66">Plans</a>
            <ul class="sub-menu">
                <li id="menu-item-294" class="wordpress-classes"><a href="http://localhost/wordpress/?page_id=66">Travels</a></li>
                <li id="menu-item-293" class="wordpress-classes"><a href="http://localhost/wordpress/?page_id=103">Pricings</a></li> 
        </li>
    </ul>
</ul>
</ul> 
```

CSS（我想插入）：

```
 background-image: url(images/sep_menu.jpg);
    background-repeat: no-repeat;
    background-position: right; 
```

我无法创建这些类，因为它们在 wordpress 中。这些类是这样的：

```
menu-item menu-item-type-post_type menu-item-object-page menu-item-294 
```

我该怎么办？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:25:53.327

你可以这样用 jQuery 做到这一点：

```
$(function () {
   $('ul:eq(0) li').css({
     'background-image': 'url(images/sep_menu.jpg) right no-repeat'
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:28:34.860

```
#menu-menu1 li {
    background-image: url(images/sep_menu.jpg);
    background-repeat: no-repeat;
    background-position: right; 
}

#menu-menu1 ul li {
    background-image: none; 
} 
```

# c - 这个错误的原因是什么：左侧需要结构。或者 。*？

> ID：14256739
> 
> 赞同：1
> 
> 时间：2013-01-10T11:20:00.190
> 
> 标签：c, structure

```
typedef struct tsk{
    int x;
    int n;
}TSK;

TSK trd[MAX];
 main(){
    while(life!=0){
 randomize();
     for(i=0;i<MAX;i++){
     trd[i].n=rand()%40+10;
         if(trd[i].n<10||trd[i].n>45)
         trd[i].n=rand()%40+10;
         trd[i].x=25;
     }
     for(m=0;m<MAX;m++){
     gotoxy(8,m);printf("%c%c",23,23);
     gotoxy(7,m);printf("%c",17);
     gotoxy(46,m);printf("%c%c",23,23);
     gotoxy(48,m);printf("%c",16);
     }
 for(j=0;j<MAX;j++){
 if(life==0)
     break;
 gotoxy(1,1);
 insline();
 gotoxy(trd[j].n,1);
 printf("%c",3);
 trd[j].x--;
 gotoxy(ply,25);
 printf("%c",1);
 gotoxy(1,26);
 delline();
 score++;
 life=hit(trd,life,ply);
 gotoxy(57,25);
 printf("SCORE: %0.0f  LIFE: %d",score,life);
 gotoxy(8,1);printf("%c%c",23,23);
    gotoxy(46,1);printf("%c%c",23,23);
    gotoxy(7,1);printf("%c",17);
    gotoxy(48,1);printf("%c",16);
    gotoxy(4,1);printf("%c",label[j]);
    delay(200);

        if(kbhit()){
            key=getch();
            key=toupper(key);
            if(key==27)
                life=0;
            if(key=='L')
            ply++;
                if(ply==46)
                ply--;
            else if(key=='K')
            ply--;
                if(ply==9)
                ply++;
            }
   }
  }
}

int hit(int trd[],int life, int ply){
int i;
    for(i=0;i<MAX;i++){
        if((trd[i].n==ply)&&(trd[i].x==0))
            life-=1;
        }
    return life;

  } 
```

任何人都可以帮助我如何纠正这个错误： . 左侧需要结构 或者 。*？当我运行程序时，它给了我这个错误，它指向 hit() 函数。我找不到导致此错误的原因。请帮助。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T11:21:59.623

`trd`是一个`int`数组。`int`没有成员`n`或`x`.

将函数签名修复为`int hit(TSK trd[], int life, int ply)`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-10T11:22:11.807

这是编译时错误，而不是运行时错误。发生这种情况是因为您试图访问`.x`和`.y`类型数组的元素`int[]`。整数不是`struct`s，它们没有字段`x`and `y`，所以编译器会告诉你这是一个错误。

最可能的修复应该是更改函数的`trd`数组参数的类型，`hit`如下所示：

```
int hit(TSK trd[],int life, int ply) {
    ...
} 
```

请注意，由于您在声明之前使用该函数，因此您应该在顶部添加一个原型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T11:22:03.507

在您的`hit`函数中，`trd`参数是一个`int`s 数组。您的意思是改为使用类型参数`TSK[]`吗？

# typo3 - Typo3 在新创建的页面上分配 BE-Group 不能正常工作

> ID：14256741
> 
> 赞同：0
> 
> 时间：2013-01-10T11:20:02.483
> 
> 标签：typo3, rights-management

在我的 Typo3 页面上，我设置了权限管理，直到某一时刻一切正常。我将首先解释一下我的设置。

每个页面（+ 其子页面）都有一个分配给站点组组的组，该组分配给可以分配给 BE 用户的元组。当 BE 用户在他的“区域”中创建新页面时，元组被分配给该页面，但我需要为每个页面分配一个特殊组（再次包括其子页面，它们是相同的）。

我尝试了几种添加方法：

```
TCEMAIN {
    permissions.userid = 1
    permissions.groupid = 20
} 
```

将包含子页面的页面的 TypoScript 自动分配给 id 为 20 的组。

请大家提出您的想法，非常感谢您的每一个答案。

我不得不说，我很抱歉我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:39:25.250

请将其添加到“页面 TSConfig”部分。

# php - 是否使用 utf8 - MySQL 和 PHP 字符编码问题

> ID：14256742
> 
> 赞同：4
> 
> 时间：2013-01-10T11:20:06.000
> 
> 标签：php, mysql, character-encoding

我有一个存储在 MySQL 中的字符串，如下所示：`ï»¿ÛŒÚ©ÛŒ Ø§Ø² Ø`我的表的字符集在哪里`utf8`，排序规则是`utf8_general_ci`.

当我从 MySQL 检索字符串时，浏览器显示如下：`یکی از بهترین راه`没关系（它是波斯语）。

笔记：

*   我`mysql_query("SET NAMES 'utf8_persian_ci'");`在连接到 MySQL 后使用。

*   我把`<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />`标签放在每一页的开头。

现在，我需要使用`mysql_query("SET NAMES 'utf8'");`.

但是在使用它之后，浏览器会显示这样的字符串：（`ï»¿ÛŒÚ©ÛŒ Ø§Ø² Ø`与存储在 MySQL 中的一样）。

如何更改我的 MySQL 存储记录并解决我的问题？或者使用一些 PHP 代码来转换输出编码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T14:22:29.227

您的问题是您的`SET NAMES 'utf8_persian_ci'`命令*无效*（utf8_persion_ci 是 collat​​ion *，*而不是*encoding*）。如果您在终端中运行它，您将看到一个错误`Unknown character set: 'utf8_persian_ci'`。因此，您的应用程序在*存储*数据时使用的是`latin1`字符集。MySQL 将您的输入解释为 latin1 字符，然后将其存储为 utf-8 编码。同样，当数据被拉出时，MySQL 将其从 UTF-8 转换回 latin1 和（希望大部分时间）你给它的原始字节。

换句话说，您在数据库中的所有数据都被完全弄乱了，但它只是碰巧起作用了。

要解决此问题，您需要撤消所做的操作。最直接的方法是使用 PHP：

1.  `SET NAMES latin1;`
2.  从每个表中选择每个文本字段。
3.  `SET NAMES utf8;`
4.  使用不变的相同字符串更新相同的行。

或者，您可以在 MySQL 中执行这些步骤，但这很棘手，因为 MySQL 将数据理解为特定字符集。您需要将文本列修改为 BLOB 类型，然后将它们修改*回*具有 utf8 字符集的文本类型。请参阅 MySQL 文档底部[`ALTER TABLE`标记为红色“警告”的](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)部分。

在您执行上述任一操作后，存储在数据库列中的字节将是它们声称的实际字符集。然后，*确保您始终使用[`mysql_set_charset('utf8')`](http://php.net/manual/en/function.mysql-set-charset.php)*PHP 进行的任何数据库访问，您将来可能会这样做！否则你会再次把事情搞砸。（注意，*不要使用简单的`mysql_query('SET NAMES utf8')`！*在某些极端情况下（例如重置连接），可以在`latin1`您不知情的情况下将其重置为。`mysql_set_charset()`将在必要时设置字符集。）

最好不要使用`mysql_*`函数，`PDO`而是使用[PDO dsn](http://php.net/manual/en/ref.pdo-mysql.connection.php)`charset=utf8`中的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:51:13.953

可能您需要更改列 Charset 和 Collat​​ion。

尝试执行此查询：

```
ALTER TABLE  `YOUR_TABLE_NAME` CHANGE  `YOUR_COLUMN_NAME`  `YOUR_COLUMN_NAME` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL 
```

（在示例中，我假设 VARCHAR 具有 DEFAULT NULL VALUE）

如果这对您有用，那么您可以在 my.conf 文件中插入以下代码以使 utf8 成为默认字符集：

```
default-character-set   = utf8 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T13:30:30.060

可能的解决方案：

1.  将“AddDefaultCharset UTF-8”添加到您网站的 .htaccess 文件中。
2.  添加 header('Content-Type: text/html; charset=utf-8'); 到 PHP 文件的顶部。
3.  对需要以波斯语显示的数据使用 utf8_encode() php 函数。

# python - 如何检查 RSS 提要是否已在 Python 中更新？

> ID：14256745
> 
> 赞同：13
> 
> 时间：2013-01-10T11:20:11.047
> 
> 标签：python, rss, feedparser

我正在使用 Python 中的 feedparser 库从 RSS 提要中获取各种详细信息。假设我从新闻频道的 RSS 提要中提取了 25 个标题。一个小时后，我再次运行 feedparser 命令以获取 25 个新标题的最新标题列表。该列表可能会在我第二次运行 feedparser 命令时更新，也可能不会更新。

有些标题可能是相同的，有些可能是新的。我需要能够检查任何新闻标题中是否有更新，其中标题是在一小时前删除的标题。只有新的标题必须被推入数据库。这是为了避免重复被转储到数据库中。

代码如下所示：

```
import feedparser
d = feedparser.parse('www.news.example.xml')
for item in d.entries:
    hndlr.write(item.title)  #data being dumped into a database 
```

我需要能够每小时运行上述代码并检查标题（标题）中是否有任何更新。如果一小时前提取的数据有任何变化，则只应将新数据转储到数据库中。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-10T11:25:26.400

每个提要项都有一个标识符，在`item.id`. 跟踪这些以及他们的`.updated`（或`.updated_parsed`）条目，以检查新项目。

因此，请查看您是否已经查看过该项目（通过`item.id`），或者自上次检查后它是否已更新（通过`item.updated`或`item.updated_parsed`）。

请确保您利用 feedparser [E-Tag 支持](http://packages.python.org/feedparser/http-etag.html)来检查已更改的提要内容。这只会使您免于下载没有新项目的提要；当您获得新的提要副本时，您仍然需要检测已添加或更新的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:25:54.580

对于“好”的提要，您可以使用 ETag 和 last-modfied-since 机制，此处描述为[http://www.kbcafe.com/rss/rssfeedstate.html](http://www.kbcafe.com/rss/rssfeedstate.html)

但是有些服务器不支持它，所以您只需检查发布日期和 ID 并查看您的数据库中是否有此类帖子。

# configuration - Lighttpd 负载均衡配置

> ID：14256746
> 
> 赞同：6
> 
> 时间：2013-01-10T11:20:15.230
> 
> 标签：configuration, localhost, port, load-balancing, lighttpd

我正在使用 Lighttpd **1.4.30**在 Play Framework 中配置负载均衡器。

我在 lighttpd-inc.conf 中给出了如下条目。

```
$HTTP["host"] =~ "http://10.74.9.109:9020" {
proxy.balance = "round-robin" proxy.server = ( "/" =>
( ( "host" => "10.74.9.109", "port" => 9020 ) ) )
}

$HTTP["host"] =~ "http://10.74.9.109:80" {
    proxy.balance = "round-robin" proxy.server = ( "/" => ( 
          ( "host" => "10.74.9.109", "port" => 9020 ), 
          ( "host" => "10.74.9.109", "port" => 9030 ) ) 
    )
} 
```

我的 play 应用程序在端口 9020、9030 上运行良好。

但是当我尝试`http://localhost:80`我的负载均衡器时，应该将请求转移到这些端口中的任何一个都没有发生。我只得到 Lighttpd 测试页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-16T10:10:43.950

首先确保您的`server.modules`阵列中有 mod_proxy。

我认为使用`$HTTP["host"]`是这里的问题。你应该`$SERVER["socket"]`像这样使用：

```
$SERVER["socket"] == ":9020" {
    proxy.server = (
        "/" => (
            (
                "host" => "10.74.9.109",
                "port" => 9020
            )
        )
    )
}

$SERVER["socket"] == ":80" {
    proxy.server = (
        "/" => ( 
              ( "host" => "10.74.9.109", "port" => 9020 ), 
              ( "host" => "10.74.9.109", "port" => 9030 )
        ) 
    )
} 
```

# ios - App 和 InApp 购买第二次拒绝

> ID：14256752
> 
> 赞同：8
> 
> 时间：2013-01-10T11:20:27.177
> 
> 标签：ios, iphone, in-app-purchase, appstore-approval

应用历史记录：我正在尝试发送已在商店中的应用的更新。此版本是第一个实现应用内购买代码的版本。我已经测试了应用程序和应用程序，都在沙盒环境中工作。Naturraly 在 inapp 获得批准之前我无法测试官方环境，但我确信我使用的 php 脚本验证 recipit 可以工作，因为我仍在将它与商店中的其他应用程序一起使用。

首次提交：我已同时发送审查 inapp 和应用程序，看起来一切正常，但由于无法购买 inapp，我的应用程序被拒绝。同时我的inapp被拒绝了，在itunes中我发现了这个： ![在此处输入图像描述](../Images/3b32c32de8b13e22bc2df0f28707df5e.png)

在inapp的详细信息中： ![在此处输入图像描述](../Images/d2f897c03df5362e9ce536eb2d0b69f8.png)

单击语言详细信息：![在此处输入图像描述](../Images/0c343ca42537757a7ec8828838c06314.png)

在这一点上，我已经搜索了我的 iTunes 应用程序设置，我找到了一个与语言有关的设置，在“应用程序信息”部分，默认语言设置为 inapp 的不同语言。我已更改此设置，现在 app 和 inapp 具有所有相同的语言。我已经删除了 inapp，并创建了另一个同名的标识符 ecc。inapp 状态更改为等待审核，然后我为该应用重新提交了相同的捆绑包。

第二次提交：我的应用和我的应用内再次被拒绝。错误，拒绝的原因是相同的，我在应用程序部分有相同的行为。解决中心的消息是这样的：

* * *

“2.2

我们发现您的应用在运行 iOS 6.0.1 的 iPhone 5 上在 Wi-Fi 和蜂窝网络上审查时出现一个或多个错误，这不符合 App Store 审查指南。

具体来说，我们注意到在尝试购买 In App AddOn 时会显示一条错误消息。

有关更多信息，请参阅随附的屏幕截图。”

* * *

我认为此消息具有误导性，我的应用程序显示的错误消息是我收到 SKPaymentTransactionStateFailed 或无法验证收据时触发的警报。所有这些功能在沙盒中都能正常工作。

我的inapp怎么了？？有人经历过类似的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-17T15:01:53.053

这是引起我注意的一点：

> 我无法验证**收据**。所有这些功能在**沙盒中都能正常工作**

您是否可能忘记将用于验证收据的 URL 从沙盒 URL 更改为实时 URL？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-03T07:57:44.093

我最近在提交给 Apple 的应用程序中遇到了这个问题。在应用程序购买验证中，服务器端需要有一个备用系统。它记录在 Apple 中，但很好地隐藏在技术说明中：http: [//developer.apple.com/library/ios/#technotes/tn2259/_index.html](http://developer.apple.com/library/ios/#technotes/tn2259/_index.html)

这是执行此操作的方法：

“始终首先使用生产 URL 验证您的收据；如果您收到 21007 状态代码，则继续使用沙盒 URL 进行验证。遵循这种方法可确保您在沙盒中测试或审查您的应用程序时不必在 URL 之间切换或者在 App Store 中直播。”

# sql - 如何使用 sql 查询将数据库的子集提取到 dbunit 文件中？

> ID：14256757
> 
> 赞同：4
> 
> 时间：2013-01-10T11:20:42.633
> 
> 标签：sql, oracle, unit-testing, dbunit

## 为什么 ？

我有一个很大的 Oracle 表。我想测试一些 DAO 方法。为此，我使用 dbunit。

## 问题

我想使用 sql 查询将现有数据库的子集提取为 dbunit 平面 xml 文件。查询示例：

```
Select 
      t1.field1 as field1, t1.field2 as field2, t2.field3 as field3
From 
       table1 t1
       Join table2 t2 on t1.fieldX=t2.fieldX
Where 
       t1.field6='value' and t2.field8='value2' 
```

在这种情况下，它将提取作为查询结果的 table1 和 table2 的所有记录，然后它还会提取这些记录的所有依赖项。

## 我试过的

1.  狱卒

我已经测试了 Jailer，这是一个很好的工具。问题是我只能对一个表进行查询并提取它以保持关系。我的 sql 查询有几个连接，以及使用此软件无法解决的条件。

1.  DBUnit 生成

我也尝试过直接使用 DBUnit 来生成数据集，但它需要做很多工作，因为我们不能直接从 sql 查询生成子集，只能通过在每个表上指定一系列小查询来生成。我有很多连接和条件，所以这不是一个可接受的解决方案。

## 问题

**如何使用sql 查询**作为导出的基础来生成数据库的子集（并将其导出到 dbunit 平面 xml 文件中） ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:32:54.477

我认为您想要的可能超出了 DBUnit 的范围。

我认为最好的方法是设置一系列处理连接并通过它提取数据的视图。一旦有了视图，您就可以使用 SQL 查询来[提取数据](http://www.dbunit.org/howto.html)。

# spring - spring web flow sub subflow-state 打开同一个jsp

> ID：14256759
> 
> 赞同：-1
> 
> 时间：2013-01-10T11:20:53.803
> 
> 标签：spring, spring-webflow

打开相同jsp的spring web flow子子流状态我的代码是：

在jsp中点击按钮：

$("#formid").get(0).setAttribute('action','search-comune.htm'); $("#formid").submit();

控制器：

```
 @RequestMapping("/aut/nuovo-operatore-rer")
            public ModelMap start() {

            OperatoreRerVO opVO = new OperatoreRerVO();
            ModelMap model = new ModelMap();
            model.addAttribute("OperatoriRer",opVO);
            return model;
            }

         @RequestMapping(value = "/aut/search-comune", method = RequestMethod.POST)
            public ModelMap searchcomune(@ModelAttribute("OperatoriRer") OperatoreRerVO opVO) {
            List<Comuni> comuniList = new ArrayList <Comuni>() ;
            Comuni comune = new Comuni();
            String descrizione  = "%"+opVO.getComune().getDescrizione().toUpperCase()+"%";
            comuniList = comuniDao.selectByName(descrizione);
            ModelMap model = new ModelMap();
            model.addAttribute("comuniList",comuniList);
            model.addAttribute("OperatoriRer",opVO);
            return model;
            } 
```

流xml：

```
<view-state id="nuovo-operatore-rer" view="aut/nuovo-operatore-rer">
</view-state>
<view-state id="search-comune" view="aut/nuovo-operatore-rer" /> 
```

小服务程序

```
<webflow:flow-location id="aut/nuovo-operatore-rer" path="/WEB-INF/flows/aut/nuovo-operatore-rer.xml" />
        <webflow:flow-location id="aut/search-comune" path="/WEB-INF/flows/aut/nuovo-operatore-rer.xml" /> 
```

jsp 名称：nuovo-operatore-rer.jsp

不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:39:27.500

如果您希望能够使用不同的 id 调用它们，则需要将流程分成 2 部分。
（顺便说一句，您的流程的 ID 不必与您的视图状态相同）

flow1 (aut/nuovo-operatore-rer.xml):

```
<view-state id="view1" view="aut/nuovo-operatore-rer">
</view-state> 
```

flow2 (aut/search-comune.xml):

```
<view-state id="view2" view="aut/nuovo-operatore-rer">
</view-state> 
```

```
<webflow:flow-location id="aut/nuovo-operatore-rer" path="/WEB-INF/flows/aut/nuovo-operatore-rer.xml" />
<webflow:flow-location id="aut/search-comune" path="/WEB-INF/flows/aut/search-comune.xml" /> 
```

# ios - 可转换数据和二进制数据有什么区别

> ID：14256762
> 
> 赞同：18
> 
> 时间：2013-01-10T11:21:05.580
> 
> 标签：ios, objective-c, core-data

我最近开始研究核心数据，请任何人告诉我可转换数据和二进制数据之间的区别。我需要将 myClassObject 存储在核心数据中。我已经创建了属性并将其类型定义为二进制数据，但在存储时出现错误。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-10T18:43:08.047

使用二进制属性，您可以`NSData`直接读取和写入 的实例。

使用可转换属性，您可以读取和写入可以转换为和从`NSData`. 实际的数据存储与二进制属性相同，但 Core Data 在必要时使用 an`NSValueTransformer`进行转换`NSData`。

例如，假设您的托管对象有一个图像属性，可以方便地`UIImage`直接读取和写入。除了，`UIImage`不能保存在 Core Data 中。但`UIImage`可以相互转换`NSData`。`UIImage`因此，如果您使用可转换属性，您可以在仍保留`NSData`在数据存储中的同时进行读写。

# ios - AFHTTPClient 设置 Authorization Header Field 像“Token token='\75845hjhrtje845395748'” 但我只想成为里面的令牌

> ID：14256763
> 
> 赞同：3
> 
> 时间：2013-01-10T11:21:07.423
> 
> 标签：ios, http, network-programming, afnetworking

我目前正在尝试使用 AFNetworking 实施授权。我试图将 access_token 放在 HTTP-Authorizationheader 中。但是到达服务器的内容是这样的：

```
Token token  = "\fdasfjhalsfh4546" 
```

它应该只是 Header 中的令牌值。我的代码如下所示：

```
- (void)setAuthTokenHeader {
    CredentialStore *store = [[CredentialStore alloc] init];
    [self setAuthorizationHeaderWithToken:[store authToken]];
} 
```

`[store authToken]`只是返回 authtoken 本身，所以我不明白为什么 HTTP-Field-Content 看起来像这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T11:32:00.253

问题比我想的要容易得多。似乎 Afnetworking 默认将令牌附加到该字符串：

```
- (void)setAuthorizationHeaderWithToken:(NSString *)token {
    [self setDefaultHeader:@"Authorization" value:[NSString stringWithFormat:@"Token token=\"%@\"", token]];
} 
```

# c# - Linq 和 IEnumerable 惰性查询。效率损失？

> ID：14256764
> 
> 赞同：2
> 
> 时间：2013-01-10T11:21:12.090
> 
> 标签：c#, performance, linq, ienumerable

我一直在阅读 Ienumerables 不会立即运行。所以我试图找到查询列表的最佳方法。

下面是我的 getAll 方法。其次是我的过滤方法。其次是首选的过滤方法（可读性）。

**我的问题是，第三种方法和直接查询一样吗？换句话说，它会，还是不会从数据库加载所有 myObjects 然后过滤？或从数据库获取时进行过滤。**

```
 public static IEnumerable<myObject> getAll()
    {
        using (var db = Database.OpenConnectionString(blahblah))
        {
            var queryResults = db.Query("SELECT * FROM vu_myObjects");

            return queryResults .Select(x => new myObject(x.myObjectName, x.myObjectF));
        }
    }

    public static IEnumerable<myObject> getAllForFilter(String filter)
    {
        using (var db = Database.OpenConnectionString(blahblah))
        {
            var queryResults  = db.Query("SELECT * FROM vu_myObjects WHERE ObjectF = @0", filter);

            return queryResults.Select(x => new myObject(x.myObjectName, x.ObjectF));
        }
    }

   public static IEnumerable<myObject> getAllForFilter(String filter)
    { // Not checked syntax.
        return getAll().Where(x => x.ObjectF = filter);
    } 
```

或者，如果您有更好的建议，我会全力以赴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T11:37:40.523

> 它会，还是不会从数据库中加载所有 myObjects 然后过滤？

它**不会**，因为您还没有真正查询数据库。`IQueryable<T>`已延迟执行，因此为了实际返回结果集，您需要*执行*查询。这可以通过几种方式完成，例如调用`ToList`或迭代列表。

任何过滤，即您的`Where`子句，都将在数据库端完成。

实际上，您目前拥有的代码甚至都无法工作 - 它会抛出一个错误，因为您在处理数据上下文*后*`ObjectDisposedException`尝试对延迟查询应用过滤器。为了使您的代码正常工作，您需要将该子句作为参数传递给您的方法，例如*`where``getAll`*

 *```
public static IEnumerable<myObject> getAll(Expression<Func<myObject,bool>> where)
{
    using (var db = Database.OpenConnectionString(blahblah))
    {
        var queryResults = db.Query("SELECT * FROM vu_myObjects");
        if (where != null)
        {
            queryResults.Where(where);
        }
        return queryResults .Select(x => new myObject(x.myObjectName, x.myObjectF));
    }
}

public static IEnumerable<myObject> getAllForFilter(String filter)
{ // Not checked syntax.
    return getAll(x => x.ObjectF = filter);
} 
```

**更新**

正如您刚刚指出的那样，您使用`WebMatrix.Database`的上述任何方法都不适用，因为这里没有发生延迟执行。[Query](http://msdn.microsoft.com/en-us/library/webmatrix.data.database.query%28v=vs.111%29.aspx)方法立即执行并返回结果集，`IEnumerable<T>`因此任何过滤应用的后记都将在内存中完成。所以就效率而言，第一种过滤方法会更好，因为它在数据库端完成所有工作。

您可以通过将`Where`子句转换为实际字符串并将其附加到查询中来获得可读性和效率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T11:31:35.140

它们基本上都是一样的。在您真正询问从 getAlLForFilter 调用返回的 IEnumerable 之前，它将是一个延迟评估的查询。如果您在其上调用 .ToList() 或访问内容，那么此时它将调用数据库。如果您在第 3 次调用中设置断点，您将看到它不会包含查询结果，直到您告诉调试器评估查询。*

# windows-7 - Gem install rails 为我安装一个空目录

> ID：14256768
> 
> 赞同：0
> 
> 时间：2013-01-10T11:21:22.547
> 
> 标签：windows-7, ruby-on-rails-3.2, ruby-1.9.3

我正在尝试安装 Rails 的更新版本，但过了一会儿我明白问题是 gem install rails 正在为我安装一个空目录。

请注意，我之前没有任何问题，我通过gem install正确安装了所有rails版本，不知道这次发生了什么。

任何人都可以告诉我发生了什么以及如何以及如何解决这个问题？

我已经安装了 devkit。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:58:59.760

我刚刚重新安装了所有东西，似乎是唯一的解决方法。我实际上没有理解这个问题。

如果有人有更好的答案，请发布。

# charts - 如何在 d3 中使用序数比例和一些相同的数据绘制折线图

> ID：14256772
> 
> 赞同：1
> 
> 时间：2013-01-10T11:21:32.797
> 
> 标签：charts, d3.js

如何在 d3 中绘制具有序数比例和一些相同域数据的折线图？这是一个示例演示[http://jsfiddle.net/dfang/CPZzV/](http://jsfiddle.net/dfang/CPZzV/)

这是数据

```
 var scores = [
   {"score":630,"date":"2012-12-22"},
   {"score":680,"date":"2012-12-22"},
   {"score":680,"date":"2012-12-22"},
   {"score":680,"date":"2012-12-23"},
   {"score":1770,"date":"2012-12-24"}
 ]; 
```

但是图表不是我想要的，x 轴上的刻度是重叠的，我想要 x 轴是“2012-12-22”、“2012-12-22”、“2012-12-22”。

谢谢 ！任何帮助将不胜感激 ！

# extjs - 如何为自动完成组合添加必需的验证器？

> ID：14256773
> 
> 赞同：1
> 
> 时间：2013-01-10T11:21:33.727
> 
> 标签：extjs, extjs4, extjs4.1

如何在extjs4中将必填字段验证器添加到自动完成框，我尝试了allowBlank：false，但是当我们输入无效值时它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:37:23.547

您可以使用[forceSelection](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.field.ComboBox-cfg-forceSelection)仅允许列表中的项目

# c# - 如何将二进制数据从数据库转换为字符串（文本）

> ID：14256777
> 
> 赞同：1
> 
> 时间：2013-01-10T11:21:41.917
> 
> 标签：c#, asp.net

我已将我的 MS word 文件以二进制格式上传到数据库中。我可以把它找回来。但我打算以只读模式打开word文件。我对存储在数据库中的文件做了很多操作，例如跟踪修订、保护等。现在我只希望发生一件事。我想将二进制数据有效地转换回原来存储在数据库中的文本（字符串）。以下是我试图从二进制文件中获取文本的一些方法，但它们都返回符号（不支持格式）而不是文本。

```
string str1 = System.Text.ASCIIEncoding.ASCII.GetString(bytes);
string x = Encoding.ASCII.GetString(bytes).ToLower(); 
```

有什么建议么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:44:37.720

MS Word 文件不是 [“纯文本”](http://en.wikipedia.org/wiki/Plain_text)。您不能仅使用文本解码器来阅读它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:40:17.840

1.  将 Word 文档设为只读是您在保存之前要做的事情 (Word.Document.Protect())
2.  如果您使用的是 .docx - 它是 xml，因此已经是文本 (utf8)

# restlet - Restlet 创建不返回 ID

> ID：14256778
> 
> 赞同：0
> 
> 时间：2013-01-10T11:21:45.713
> 
> 标签：restlet, odata4j

我目前正在 PoCing 一个从 Java 进行 OData 交互的解决方案。我们有一个可用的 WCF odata 存储库。我开始使用restlet API进行初步编码，因为它可以生成代码，但是自从使用它以来，我遇到了新创建的对象在创建时没有设置它的ID并且生成的服务类中的addEntity方法没有的情况似乎返回ID？

哪个是更全面的解决方案，来自 Restlet 还是 OData4j？

谢谢，马克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:23:21.633

您可以手动返回执行生产者注册方法的 id

例如：

```
producer.register(yourModelClass.class, "yourModelClass", new Func1<Object,Iterable<yourModelClass>>() { 

            public Iterable<yourModelClass> apply(Object queryInfo) {  
                return null;
                }
            }
      }, "yourID"); 
```

# google-maps-api-3 - 谷歌地图 api v3 添加新的多边形顶点，没有交叉或自相交

> ID：14256779
> 
> 赞同：1
> 
> 时间：2013-01-10T11:21:48.750
> 
> 标签：google-maps-api-3, polygon, vertex, vertices, self-intersection

似乎这个即使对于大师来说也可能太难了，所以我会尝试重新措辞以尝试得到一些回应：我正在尝试智能地向现有多边形添加一个或多个顶点，而没有交叉或自相交，但我所做的只是可以找到以下复杂的 V2 示例： [http ://www.kashey.ru/pages/maps/basic_poly_editor_test.php#](http://www.kashey.ru/pages/maps/basic_poly_editor_test.php#) 我想做同样的事情，但改用 Google Maps api V3。有谁知道检测现有多边形边或多边形边最接近或最接近您在该多边形附近单击的点的方法？我相信这需要一些严肃的数学和三角函数，但到目前为止我找不到任何使用 Google Maps api V3 完成它的人。也许如果有人可以告诉我如何将上面的 V2 代码转换为 V3，那么我可以使用它来运行。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T20:54:26.287

尝试这个：

```
 <html>
 <head>
   <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?v=3&sensor=false"></script>
 </head>
 <body>
 <div id="map-canvas" style="width: 100%; height: 100%; margin: 0; padding: 0;">map</div>
 <script type="text/javascript">
   google.maps.event.addDomListenerOnce(window, 'load', function initialize() {
     var container = document.getElementById('map-canvas');
     var map = new google.maps.Map(container, {
      center: new google.maps.LatLng(37.4419, -122.1419),
     zoom: 13
     });

     var vertexes = [
       new google.maps.LatLng(37.4419     , -122.1419),
       new google.maps.LatLng(37.4419+0.03, -122.1419),
       new google.maps.LatLng(37.4419     , -122.1419+0.03)
     ];

     var polygon = new google.maps.Polygon({
         paths: vertexes,
         editable: true,
         map: map
     });
   });
 </script>
 </body>
 </html> 
```

# android - google places API 查找地点

> ID：14256780
> 
> 赞同：0
> 
> 时间：2013-01-10T11:21:49.510
> 
> 标签：android, google-places-api, reverse-geocoding, google-places

要在我们的 Android 应用程序中使用 google places API，需要一个密钥。我现在有钥匙了。但我不知道如何在我的应用程序中使用它以及如何搜索特定位置。另外，请任何人解释在我的应用程序中使用 Places API 的先决条件是什么。我搜索了很多东西。但我不明白这一点。

```
 1) Can anyone explain please with complete code.

         2) Also, explain how do I search for a place by using latitude and longitude values in Place API 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:44:15.537

请参考我在[Google Places Api上的回答](https://stackoverflow.com/questions/14252476/ho-do-i-use-google-places-to-find-a-place-in-android/14252610#14252610)

将您的位置传递给搜索和 url 中的 api 密钥，我的代码还显示了如何找到最近的地方。

谢谢

# android - 在 android GCM 中获得相同的消息

> ID：14256787
> 
> 赞同：1
> 
> 时间：2013-01-10T11:22:12.540
> 
> 标签：android, .net, push-notification, google-cloud-messaging

我的 android 应用程序收到相同的消息，例如“你收到消息”。即使我正在更改服务器端的数据。

服务器端代码（点网）：

```
string postData = "collapse_key=score_update&time_to_live=108&delay_while_idle=1&data.message="
                + Label1.Text + "&data.time=" + System.DateTime.Now.ToString() + "&registration_id=" + regId + ""; 
```

必须对 GCM 应用程序代码进行任何更改？

```
 protected void onMessage(Context context, Intent intent) {
        Log.i(TAG, "Received message");
        String message = getString(R.string.gcm_message);
        //String message = intent.getExtra("message"); 
        displayMessage(context, message);
        // notifies user
        generateNotification(context, message);
    } 
```

在搜索谷歌时，我发现了一些我们必须替换的东西

```
String message = getString(R.string.gcm_message); 
```

和

```
String message = intent.getExtra("message"); 
```

但我收到这样的错误“Intent 类型的方法 getExtra(String) 未定义”。请指导我在这方面缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:24:24.753

利用

```
String message = intent.getStringExtra("message"); 
```

代替

```
String message = intent.getExtra("message"); 
```

从 Intent 获取字符串消息

**编辑 ：**

如果您在 Bundle 实例中接收数据，则更改您的代码，因为 getExtra 不是 Intent 类中的方法：

```
 Bundle bundle = intent.getExtras("bundle_Name_here"); 
```

现在使用键从包中检索所有值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-19T15:15:16.960

将此添加到您的 **HTTP POST**：

```
data.notId="2" 
```

对于每个不同的 notId，它将被威胁为不同的消息。我很长一段时间都遇到了同样的问题，现在我想将这些消息分组。

# ios - 在带有静态单元格的 UITableView 中使用 reloadSection 时动画出现故障

> ID：14256800
> 
> 赞同：1
> 
> 时间：2013-01-10T11:22:49.740
> 
> 标签：ios, animation, uitableview

我正在使用`UITableView`带有静态单元格的应用程序的设置视图。

此表的一个部分包含两个单元格，第二个部分仅在`UISwitch`第一个部分中包含的 a 打开时可见。

所以`UISwitch`的目标是这样的：

```
- (void)notificationSwitchChanged:(id)sender
{
  UISwitch* switch = (UISwitch*)sender;

  self.bNotify = switch.on;
  [self.settingsTable reloadSections:[NSIndexSet indexSetWithIndex:1] withRowAnimation:UITableViewRowAnimationTop];
} 
```

我是`numberOfRowsInSection:`这样实现的：

```
(NSInteger)tableView:(UITableView*)tableView numberOfRowsInSection:(NSInteger)section
{
  if (section != 1)
    return [super tableView:tableView numberOfRowsInSection:section];

  if (self.bNotify)
    return 2;
  return 1;
} 
```

这个“有效”，但是动画有问题，使第一个单元格消失或在上一部分的一半下方向上滑动，或者根据我选择的动画类型进行各种调整。最干净的是`UITableViewRowAnimationNone`，但仍然不完美。

如果我将该部分滚动出视图并返回，它看起来又正常了。

编辑：对问题进行了一些截图：
![示例图像](../Images/350d057f609c3b8d59fdbc9ae8265eb5.png)

我尝试在之前和之后添加`beginUpdates`和，但它没有改变任何东西。使用而不是作品，但根本没有动画。`endUpdates``reloadSections``reloadData``reloadSections`

是因为表格的单元格是静态的还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:53:38.213

我认为这种方法应该可以解决您的问题。

> ```
> [self.tableView insertSections:<#(NSIndexSet *)#> withRowAnimation:<#(UITableViewRowAnimation)#>]; 
> ```

只需更新数据源（您不必这样做，因为您正在根据某些标志更新节数）并调用它。

也许您必须改用此方法。

> ```
> [self.tableView insertRowsAtIndexPaths:<#(NSArray *)#> withRowAnimation:<#(UITableViewRowAnimation)#>]; 
> ```

# security - XSS 浏览器 JS 执行与通过 iFrame 代理解决方案访问的网站

> ID：14256801
> 
> 赞同：1
> 
> 时间：2013-01-10T11:22:51.743
> 
> 标签：security, iframe, proxy, xss

我对通过 iframe 代理解决方案访问的网站上的 XSS 有疑问...绕过公司代理并在浏览器的受害者中执行代码。

这是在安全测试过程中。

*   我在一家公司的局域网上，该公司使用公司代理（显然），[在下面命名为corporate.proxy]

*   为了说明安全网络钓鱼活动和 XSS，我需要找到一种方法来说明**代理**部分缺乏安全过滤（我知道需要在服务器端纠正漏洞，但作为一家公司，您并不总是选择您的用户的网站去.. ：）

*   我放置了一个 php 代理，以便在我的外部服务器上的 iFrame 中导航，在互联网上，[在下面命名为 my.outsideserver.com]（有点像[miniproxy](https://github.com/joshdick/miniProxy)）。我的 miniproxy 的 url 在我的测试中：h**p://my.outsideserver.com/miniproxy.php

*   如果这次访问了一个传统上被阻止的网页 (youpr0n)，通过从内部转到此 URL：h**p://my.outsideserver.com/miniproxy.php?url=youpr0n.com ==> 我访问该网站...

现在我的问题是：如果一个网站容易受到 XSS [在下面命名为 xss.vulnwebsite.com] 的攻击：h**p://xss.vulnwebsite.com?q= 注意：想象一下网站是 youpr0n..

我可以创建这样的链接：h* *p://my.outsideserver.com/miniproxy.php?url=h* *p://xss.vulnwebsite.com?q=

并将此链接发送给网络钓鱼活动中的公司受害者。如果受害者点击链接，我看到有 2 个漏洞：

1）第一个是代理过滤绕过--->公司的用户访问一个通常被阻止但现在可以访问的网站..

2）真实网站（youpr0n）有一个xss，并利用这个xss代码在受害者的浏览器中执行。注意：我知道由于同源策略，加载到 iFrame 中的内容将无法读取（如果对 xss 有漏洞）......但是......

**这是我的问题，代码在受害者的浏览器中执行** 。SOP（同源策略）将保护攻击者读取的任何用户，youpr0n 上的内容（例如他的会话 cookie），***但不保护它的浏览器！***

如果我发送此链接： h* *p://my.outsideserver.com/miniproxy.php?url=h* *p://xss.vulnwebsite.com?q=alert(1) 我成功看到弹出窗口显示“1 “在我的浏览器中。目前，唯一的浏览器保护是浏览器的 XSS 过滤机制（？）。绕过公司代理机制（正确？/0）

*   你怎么看这一切。这是废话，我确定（或不）不要怪我......
*   企业代理的缓解措施是什么（除了告诉用户不要点击狗屎......）......是否有动态安全内容过滤解决方案工作......？

我的意思是说明**风险**，假设我通过邮件向成千上万的企业用户发送网络钓鱼链接。电子邮件主题是“使用我们的免费代理机制访问贵公司的任何网站”...您可以在工作中看到 pr0n !!!!!

然后用户肯定会点击链接（我会）：D

感谢您的回答：您是否同意代码可以在受害者的浏览器中执行。您同意代理过滤绕过吗？什么是解决方案（对于公司......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:43:29.810

像 Miniproxy 这样的代理充当 HTTP 客户端并在*http://my.outsideserver.com/miniproxy.php*上显示 HTTP 响应，SOP 由浏览器强制执行。*浏览器将http://my.outsideserver.com/miniproxy.php*上显示的所有 JavaScript视为源自该来源，无论 miniproxy 从何处获取内容。

简而言之，这不是 SOP 滥用。企业防火墙很容易绕过，但这是众所周知的。

我建议拿起“A tangled web”的副本并阅读[Google 浏览器安全手册](http://code.google.com/p/browsersec)。

# java - webview 不加载我的 html

> ID：14256802
> 
> 赞同：4
> 
> 时间：2013-01-10T11:22:54.280
> 
> 标签：java, android, html, webview

我正在做一个采用网站 HTML 代码的 Android 应用程序。我有一个`Webview`应该加载这个 HTML 但是当我运行我的程序时，我没有看到我的“HTML”。

这是我的代码：

```
 package com.example.getdonnees;

import android.app.Activity;

import android.os.Bundle;

import android.webkit.WebView;

public class MainActivity extends Activity {

    WebView webview;

    Web web = new Web();

    @Override

    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        webview = (WebView)findViewById(R.id.webView1);

        webview.getSettings().setJavaScriptEnabled(true);

                try {

                    webview.loadData(web.getCode(), "text/html; charset=UTF-8", null);
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

    }

}

    package com.example.getdonnees;

import java.io.BufferedReader;

import java.io.InputStreamReader;

import java.net.URL;

import java.net.URLConnection;

import android.app.Activity;

import android.os.Bundle;

import android.webkit.WebView;

public class Web extends Activity {

    WebView webview;
    String s2 = "";

    public String getCode() throws Exception{
        URL oracle = new URL("http://www.google.com/");
        URLConnection yc = oracle.openConnection();
        BufferedReader in = new BufferedReader(new InputStreamReader(
                                    yc.getInputStream()));
        String inputLine;
        String s1 = "";
        while ((inputLine = in.readLine()) != null)
            s1 = s1 + inputLine;
        in.close();
        System.out.println(s1);
        s2 = "<h1> test </h1>";
        return s1;
    }

} 
```

如果我把`webview.loadData("<h1> Test </h1>", "text/html; charset=UTF-8", null);`它工作如果我在 getCode() 中返回 s2，它就不起作用。当然，如果我返回 s1，它就不起作用。

我发现这部分会使应用程序崩溃。你知道为什么吗 ？

```
 try {
            in = new BufferedReader(new InputStreamReader(
                                        yc.getInputStream()));
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T11:26:20.520

试试这样..

```
import android.app.Activity;
    import android.os.Bundle;
    import android.view.View;
    import android.webkit.WebSettings;
    import android.webkit.WebView;
    import android.webkit.WebViewClient;

    public class AndroidMobileAppSampleActivity extends Activity {
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            WebView mainWebView = (WebView) findViewById(R.id.mainWebView);

            WebSettings webSettings = mainWebView.getSettings();
            webSettings.setJavaScriptEnabled(true);

            mainWebView.setWebViewClient(new MyCustomWebViewClient());
            mainWebView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);

            mainWebView.loadUrl("http://seasonofrejoice.blogspot.com");
        }

        private class MyCustomWebViewClient extends WebViewClient {
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                view.loadUrl(url);
                return true;
            }
        }
    } 
```

添加xml webview ..

```
<WebView android:layout_width="match_parent" 
  android:layout_height="match_parent" 
  android:id="@+id/mainWebView">
 </WebView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:44:09.563

您只需要在`WebView`不使用`Web`您创建的类的情况下加载您的网址：

```
protected WebView webView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        webView = (WebView) findViewById(R.id.myWebView);
        webView.loadUrl("http://www.google.com");
    } 
```

如果你想加载一些 HTML 代码到你的`WebView`下面：

`assets/`1)在项目的文件夹中创建一个 HTML 文件：`example.html`

2）然后像这样调用加载它：

```
webView.loadUrl("file:///android_asset/example.html"); 
```

在您的情况下，您的类`Web`正在扩展一个`Activity`，并且在 Android 中**您不能实例化一个`Activity`类**，您应该*重写*该方法`onCreate()`，然后将您的代码放入其中。

编辑：拆分 HTML 代码后，您可以`WebView`像这样将其加载到您的文件中：

```
public final static void webViewLoadData(WebView web, String html) {
  StringBuilder buf = new StringBuilder(html.length());
  for (char c : html.toCharArray()) {
    switch (c) {
      case '#':  buf.append("%23"); break;
      case '%':  buf.append("%25"); break;
      case '\'': buf.append("%27"); break;
      case '?':  buf.append("%3f"); break;                
      default:
        buf.append(c); break;
      }
  }
  web.loadData(buf.toString(), "text/html", "utf-8");
} 
```

**编辑 2：**

```
public class Web {

    String s2 = "";

    public String getCode() throws Exception{
        URL oracle = new URL("http://www.google.com/");
        URLConnection yc = oracle.openConnection();
        BufferedReader in = new BufferedReader(new InputStreamReader(
                                    yc.getInputStream()));
        String inputLine;
        String s1 = "";
        while ((inputLine = in.readLine()) != null)
            s1 = s1 + inputLine;
        in.close();
        System.out.println(s1);
        s2 = "<h1> test </h1>";
        return s1;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T11:52:26.283

在您的情况下，您的类`Web`正在扩展一个`Activity`，并且在 Android 中您无法实例化一个`Activity`类，您应该重写该方法`onCreate()`。

所以请删除`extends Activity out of Web class`

```
public class Web
{
 String s2 = "";
  public String getCode() throws Exception
  {
    URL oracle = new URL("http://www.google.com/");
    URLConnection yc = oracle.openConnection();
    BufferedReader in = new BufferedReader(new InputStreamReader(
                                yc.getInputStream()));
    String inputLine;
    String s1 = "";
    while ((inputLine = in.readLine()) != null)
        s1 = s1 + inputLine;
    in.close();
    System.out.println(s1);
    s2 = "<h1> test </h1>";
    return s1;
   }
 } 
```

正如**Houcine**举例说明的那样，这是放纵的正确方式`webView.loadData()`

# gwt - 如何在我的 gwt 应用程序中创建 rss 提要

> ID：14256807
> 
> 赞同：0
> 
> 时间：2013-01-10T11:23:17.590
> 
> 标签：gwt, rss, rss-reader

我正在 eclipse 上开发一个 GWT 应用程序，我想在我的应用程序中发布可以在我的应用程序页面中查看的 rss 提要在谷歌搜索时我找到[了本](http://pageaffairs.com/notebook/create-your-own-simple-rss-feed)教程，但我认为本教程适用于 html 网页。我不知道如何实现这一目标。任何帮助表示赞赏任何示例或任何教程

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:26:58.270

由于您无法搜索相关链接。让我们一起尝试如何为您 GOOGLE。然后，我们将引导您在 Stackoverflow 中进行搜索以找到此内容 -[在客户端使用 GWT 构建 RSS](https://stackoverflow.com/questions/12277728/building-rss-with-gwt-on-client-side)

![在此处输入图像描述](../Images/d46bb793b9dfb3f667ec4a7d8cbd0ca0.png)

![在此处输入图像描述](../Images/df6d01b2949ab1c796fc332482b3a0b9.png)

# android - 将捆绑包保存到文件

> ID：14256809
> 
> 赞同：5
> 
> 时间：2013-01-10T11:23:18.407
> 
> 标签：android

```
 Bundle bundle;
  //set data to bundle
  //......

  File file = new File(context.getFilesDir().getAbsolutePath()  + "/data/");
                FileOutputStream fos;
                try {
                     fos = new FileOutputStream(file);
                     //fos.write
                     fos.close();
                } catch (FileNotFoundException exp1) {
                    exp1.printStackTrace();
                } catch ( IOException exp2) {
                    exp2.printStackTrace();
                } 
```

我有上述代码。我要做的就是将捆绑包保存到文件中。我找到了 write 方法，但我不能传递一个包，而只能传递一个字节 []。我试图将包转换为字节 []，但我没有成功。我应该怎么做才能使这项工作？最有效的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T11:36:34.157

没有通用的方法可以从持久存储中保存和恢复包。这是因为 Parcel 类不提供任何 android 版本兼容性保证。所以我们最好不要序列化它。

但如果你真的想要，你可以通过 Parceable 接口对 Bundle 进行序列化。将 bundle 转换为 Parcel (writeToParcel()/readFromParcel())，然后使用 Parcel 的 marshall() 和 unmarshall() 方法获取 byte[]。保存/加载字节数组到文件。但是有一个机会，有一天你将无法恢复你的数据，以防用户将他的 Android 操作系统更新到更新的版本。

使用 ObjectOutput/InputStream 序列化捆绑包有一种合法但非常复杂且不可靠的方法。（获取所有键，遍历键并将可序列化的键=值对保存到文件中，然后从文件中读取键=值对，确定值的类型，通过适当的 putXXX(key, value) 方法将数据放回 Bundle）但它是不值得 ）

我建议您将自定义可序列化结构放在 Bundle 中，以在其中存储所有必需的值，并仅从文件中保存/加载此结构。

或者找到一种更好的方法来管理您的数据，而无需使用 Bundle。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-30T13:23:01.347

我不喜欢上面评论中代码的格式，所以这就是您将其读回的方式：

像这样阅读它：

```
try {
    FileInputStream fis = openFileInput(localFilename);
    byte[] array = new byte[(int) fis.getChannel().size()];
    fis.read(array, 0, array.length);
    fis.close();
    parcel.unmarshall(array, 0, array.length);
    parcel.setDataPosition(0);
    Bundle out = parcel.readBundle();
    out.putAll(out);
} catch (FileNotFoundException fnfe) {
} catch (IOException ioe) {
} finally {
    parcel.recycle();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T11:38:26.400

```
Bundle in=yourBundle;
FileOutputStream fos = context.openFileOutput(localFilename, Context.MODE_PRIVATE);
Parcel p = Parcel.obtain(); //creating empty parcel object
in.writeToParcel(p, 0); //saving bundle as parcel 
fos.write(p.marshall()); //writing parcel to file
fos.flush();
fos.close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-31T14:13:13.790

这是可以帮助您将 a 转换`Bundle`为 a的函数`JSONObject`，请注意，它仅在捆绑包含`int`s 和`String`s 时才有效

```
public static JSONObject bundleToJsonObject(Bundle bundle) {
    try {
        JSONObject output = new JSONObject();
        for( String key : bundle.keySet() ){
            Object object = bundle.get(key);
            if(object instanceof Integer || object instanceof String)
                    output.put(key, object);
            else
                throw new RuntimeException("only Integer and String can be extracted");
        }
        return output;
    } catch (JSONException e) {
        throw new RuntimeException(e);
    }
}

public static Bundle JsonObjectToBundle(JSONObject jsonObject) {
    try {
        Bundle bundle = new Bundle();
        Iterator<?> keys = jsonObject.keys();
        while( keys.hasNext() ){
            String key = (String)keys.next();
            Object object = jsonObject.get(key);
            if(object instanceof String)
                bundle.putString(key, (String) object);
            else if(object instanceof Integer)
                bundle.putInt(key, (Integer) object);
            else
                throw new RuntimeException("only Integer and String can be re-extracted");
        }
        return bundle;
    } catch (JSONException e) {
        throw new RuntimeException(e);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T11:37:32.203

你可以做这样的事情

```
public void write(String fileName, Bundle bundle)
    {
        File root = Environment.getExternalStorageDirectory();
        File outDir = new File(root.getAbsolutePath() + File.separator + "My Bundle");
        if (!outDir.isDirectory())
        {
            outDir.mkdir();
        }
        try
        {
            if (!outDir.isDirectory())
            {
                throw new IOException("Unable to create directory My bundle. Maybe the SD card is mounted?");

    }
        File outputFile = new File(outDir, fileName);
        writer = new BufferedWriter(new FileWriter(outputFile));
        String value=bundle.getString("key");
        writer.write(value);
        Toast.makeText(context.getApplicationContext(), "Report successfully saved to: " + outputFile.getAbsolutePath(), Toast.LENGTH_LONG).show();
        writer.close();
    } catch (IOException e)
    {
        Log.w("error", e.getMessage(), e);
        Toast.makeText(context, e.getMessage() + " Unable to write to external storage.", Toast.LENGTH_LONG).show();
    }

} 
```

在这里，想法很简单。您将 传递`Bundle`给此方法，然后提取其中的任何数据（例如，在这种情况下，我们有一个带有 key 的字符串`key`），然后将其写入文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-17T18:31:07.243

您无法将捆绑包保存到本地文件中。您将获得非序列化异常。可能还有其他快捷方式可以存储。阅读并构造原始对象后，并非100％放心。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-06T23:13:18.400

I thing the best idea is static serializable or everything, as Bundle is iterable from keys, serialized and unserialized on another side, you can use then json, or anything. For example, if You will use the same class in server and receiver, ...

bundle->serializable_object->json->file->serializable_object->bundle

any os version guaranted working

# iphone - 使用 xcode 4.5 进行临时部署

> ID：14256811
> 
> 赞同：0
> 
> 时间：2013-01-10T11:23:20.603
> 
> 标签：iphone, adhoc, cyberduck

我想在我的 iPhone 上测试我自己的应用程序。我在 youtube 上看到了一个视频教程，所以我将我的应用程序分享到了我的设备上。但是，它不起作用。该应用程序在模拟器（版本 5.0、5.1、6）中正常运行。但在我的设备上，它崩溃了，应用程序终止了。

我已完成以下步骤：

创建.ipa：

产品 -> 存档 -> 分发 -> 企业和 Ad-hic 部署 -> 不要重新签名

在iTunes中同步：

保存ipa后，我将它拖到iTunes中进行同步。然后我把它拖出iTunes。

使用cyberduck SSH：

我可以正确连接cyberduck。我从 installous 共享“下载”文件夹中的 ipa 文件，共享后，我手动安装它（从 iphone）。（已安装 appsync 5.0+）

但是，当我想启动应用程序时，它会启动一秒钟然后崩溃。该应用程序终止并将我踢到主屏幕。

我错过了什么吗？

我在用：

xcode 4.5.2 赛博鸭 iTunes 11.0.1

注意：请原谅我的英语:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:27:17.303

不要使用 Don't Resign 使用您的有效临时个人资料，如下图所示：

![在此处输入图像描述](../Images/c1faa2f8fa21cadfdbe976ef56d8b681.png)

然后检查。

# c# - 具有 n 个动态 where 条件的 Linq to XML

> ID：14256812
> 
> 赞同：1
> 
> 时间：2013-01-10T11:23:22.083
> 
> 标签：c#, asp.net, xml, linq, linq-to-xml

嗨，我想为我的解决方案使用**n 个动态 where**条件。

在我的场景中，我必须获取所有*必须包含数组*（arrSearchContents）的所有元素的所有xml元素，这些元素是通过拆分strSearchContent的所有单词而构建的。

```
<Mobiles>
  <Mobile Id="1">
    <MDetails ModelNo="1" Desc="x phone color red"/>
    <MDetails ModelNo="2" Desc="x phone color green"/>
    <MDetails ModelNo="3" Desc="x phone color blue"/>
    <MDetails ModelNo="4" Desc="x phone color black"/>
    <MDetails ModelNo="5" Desc="x phone color yellow"/>
    <MDetails ModelNo="6" Desc="x phone color pink"/>
    <MDetails ModelNo="7" Desc="x phone color gray"/>
    <MDetails ModelNo="8" Desc="x phone color silver"/>
    <MDetails ModelNo="9" Desc="x phone color orange"/>
  </Mobile>
  <Mobile Id="2">
    <MDetails ModelNo="11" Desc="y phone color red"/>
    <MDetails ModelNo="12" Desc="y phone color green"/>
    <MDetails ModelNo="13" Desc="y phone color blue"/>
    <MDetails ModelNo="14" Desc="y phone color black"/>
    <MDetails ModelNo="15" Desc="y phone color yellow"/>
    <MDetails ModelNo="16" Desc="y phone color pink"/>
    <MDetails ModelNo="17" Desc="y phone color gray"/>
    <MDetails ModelNo="18" Desc="y phone color silver"/>
    <MDetails ModelNo="19" Desc="y phone color orange"/>
  </Mobile>
  <Mobile Id="3">
  ......
  <Mobile>
  ......
</Mobiles> 
```

我想要一个类似于下面代码的解决方案。任何机构都可以***纠正***代码

```
public void doSearch(string strSearchContent)
{
string[] arrSearchContents;
arrSearchContents = strSearchContent.Split(' ');

string fileName = HttpContext.Current.Server.MapPath(@"~\XMLFiles/Mobile.xml");
XDocument doc = null;
    if (System.IO.File.Exists(fileName))
    {
        doc = XDocument.Load(fileName);

        IEnumerable<XElement> list1 =
            from elements in doc.Descendants("MDetails")
            where
                for(int i=0;i<arrSearchContents.Length;i++)
                {
                    elements.Attribute("Desc").Value.Contains(arrSearchContents[i]) &&
                }
            select elements;
    }
} 
```

所选列表应包含搜索字符串的所有关键字。

```
as per example : if strSearchContent = "phone color blue"

then as a result it should return :

<MDetails ModelNo="3" Desc="x phone color blue"/>
<MDetails ModelNo="13" Desc="y phone color blue"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T11:29:31.193

```
from d in doc.Descendants("MDetails")
let desc = (string)d.Attribute("Desc")
where desc != null && 
      arrSearchContents.All(keyword => desc.Contains(keyword))
select d; 
```

但它也会匹配“bluephonecolor”。如果要匹配单词，可以使用正则表达式，或按单词拆分描述：

```
!arrSearchContents.Except(desc.Split()).Any() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T11:28:58.143

您应该检查它的**节点属性**是否包含值，而不是 vise-verse

```
var str = @"<Mobiles>
                    <Mobile Id=""1"">
                        <MDetails ModelNo=""1"" Desc=""x phone color red""/>
                        <MDetails ModelNo=""2"" Desc=""x phone color green""/>
                        <MDetails ModelNo=""3"" Desc=""x phone color blue""/>
                        <MDetails ModelNo=""4"" Desc=""x phone color black""/>
                        <MDetails ModelNo=""5"" Desc=""x phone color yellow""/>
                        <MDetails ModelNo=""6"" Desc=""x phone color pink""/>
                        <MDetails ModelNo=""7"" Desc=""x phone color gray""/>
                        <MDetails ModelNo=""8"" Desc=""x phone color silver""/>
                        <MDetails ModelNo=""9"" Desc=""x phone color orange""/>
                    </Mobile>
                    <Mobile Id=""2"">
                        <MDetails ModelNo=""11"" Desc=""y phone color red""/>
                        <MDetails ModelNo=""12"" Desc=""y phone color green""/>
                        <MDetails ModelNo=""13"" Desc=""y phone color blue""/>
                        <MDetails ModelNo=""14"" Desc=""y phone color black""/>
                        <MDetails ModelNo=""15"" Desc=""y phone color yellow""/>
                        <MDetails ModelNo=""16"" Desc=""y phone color pink""/>
                        <MDetails ModelNo=""17"" Desc=""y phone color gray""/>
                        <MDetails ModelNo=""18"" Desc=""y phone color silver""/>
                        <MDetails ModelNo=""19"" Desc=""y phone color orange""/>
                    </Mobile></Mobiles>";

    var doc = XDocument.Parse(str);
    var strSearchContent = "phone color blue";
    IEnumerable<XElement> list1 = doc.XPathSelectElements("//MDetails")
                                     .Where(node => node.Attribute("Desc").Value.Contains(strSearchContent));

    //LinqPad specific print call
    list1.Dump(); 
```

印刷

```
<MDetails ModelNo="3" Desc="x phone color blue" /> 
<MDetails ModelNo="13" Desc="y phone color blue" /> 
```

因此生成的代码将如下所示（请注意，我已经更改了方法的返回类型）：

```
public IEnumerable<XElement> doSearch(string strSearchContent)
{
    string fileName = HttpContext.Current.Server.MapPath(@"~\XMLFiles/Mobile.xml");

    if (File.Exists(fileName))
    {
        XDocument doc = XDocument.Load(fileName);
        return doc.XPathSelectElements("//MDetails")
                  .Where(node => node.Attribute("Desc").Value.Contains(strSearchContent));
    }

    return Enumerable.Empty<XElement>();
} 
```

# asp.net - 如何删除主机根目录名称？

> ID：14256813
> 
> 赞同：3
> 
> 时间：2013-01-10T11:23:22.570
> 
> 标签：asp.net, url, subdirectory

我正在使用 Godaddy 托管多个域。但是一旦我的网站被托管，当我点击我网站内的任何链接时，它会显示根目录名称..

子目录不应该像我的域的根目录一样，因此在我网站内的其他 URL 路径中不可见吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:29:49.927

您应该将主页（或您不想在子目录下看到的文件）放在父文件夹（根目录）中。

# c# - 最大化时如何删除控制框

> ID：14256823
> 
> 赞同：0
> 
> 时间：2013-01-10T11:23:54.083
> 
> 标签：c#, .net

我正在开发一个应用程序，我希望它是全屏的。由于我想在不同的屏幕之间切换，我创建了一个 MDIParent 和一些 MDIChilds。但是当我说我想全屏观看时，我有这个屏幕：

![在此处输入图像描述](../Images/8783b6165d858f7e1350c962d99930be.png)

我已将属性设置为：

**表单边框样式：**无

**窗口状态：**最大化

我有：

**最大化框：** False

**最小化框：** False

**控制箱：**假

对于 MDIParent 和 MDIChild。但是我仍然有那个控制框显示...

怎么隐藏？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:07:24.003

您可以通过重写[Control.CreateParams](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.createparams.aspx)方法来做到这一点。

查看您可以应用[的窗口样式](http://msdn.microsoft.com/en-us/library/ms632600.aspx)。

另请查看您可以应用的[窗口类样式](http://msdn.microsoft.com/en-us/library/windows/desktop/ff729176%28v=vs.85%29.aspx)。

例如（不回答您的问题，而是向您展示如何更改窗口样式）：

```
protected override CreateParams CreateParams
{
    get
    {
        CreateParams param = base.CreateParams;
        const int CS_DROPSHADOW = 0x00020000;
        const int WS_CAPTION    = 0xC00000;
        param.ClassStyle = param.ClassStyle | CS_DROPSHADOW; // Turn on window shadow.
        param.Style = param.Style & ~WS_CAPTION; // Turn off caption.
        return param;
    }
} 
```

# jquery - Disqus 评论：删除“原始标题”属性

> ID：14256825
> 
> 赞同：0
> 
> 时间：2013-01-10T11:24:05.157
> 
> 标签：jquery, disqus

我在重写 Disqus 评论平台的样式时遇到问题。问题源于试图删除“original-title”属性，该属性出现在用户头像图像的悬停上。为了摆脱“原始标题”文本，我使用了这个 CSS：

```
.dsq-avatar[original-title] {
  font-size: 0;
  width: 0;
  height: 0;
  visibility: hidden;
} 
```

这可以很好地删除文本，但是，当您将头像图像悬停时，它现在会删除图像，您可以看到：[http ://disqus.dottalent.co.uk/app/](http://disqus.dottalent.co.uk/app/)

我也尝试过 JQuery 方法来删​​除，但似乎没有一个有效。这些是我也尝试过的方法：

```
$('.dsq-avatar a, .dsq-tt a').unbind('hover mouseenter mouseleave'); 
```

似乎正在发生的事情是从 Disqus 加载了一个 js 文件，我可以删除它，因为我已经从 Disqus 完成了所有其他 CSS 文件，但是 js 文件包括悬停事件和其他关键 javascript，所以完全删除它不会帮不了我。

任何帮助都将不胜感激，因为我既灰又精神！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:29:52.543

从这里调试它有点困难，但是您是否尝试过删除该`original-title`属性？

```
$(document).ready(function(){
 $(".dsq-avatar").removeAttr("original-title");
}); 
```

看起来它消除了文本的悬停，这就是您要寻找的正确吗？

# android - 在谷歌地图 v2 中创建 CustomInfoWindow

> ID：14256828
> 
> 赞同：6
> 
> 时间：2013-01-10T11:24:12.723
> 
> 标签：android, google-maps-android-api-2, infoview

我在创建自己的 CustomInfoWindow 时遇到问题。在不知道在哪里&为什么的情况下获得异常

这是我的简单 customInfoWindow 类

```
public class CustomInfoWindow implements InfoWindowAdapter {

private LayoutInflater mInflater;

public CustomInfoWindow(LayoutInflater inflater) {
    this.mInflater=inflater;

}

@Override
public View getInfoContents(Marker marker) {
    View popup = mInflater.inflate(R.layout.info_window_layout, null);
    TextView tv=(TextView)popup.findViewById(R.id.title);
    tv.setText(marker.getTitle());
    tv=(TextView)popup.findViewById(R.id.address);
    tv.setText(marker.getSnippet());

    return popup;
}

@Override
public View getInfoWindow(Marker marker) {
    View popup = mInflater.inflate(R.layout.info_window_layout, null);
    TextView tv=(TextView)popup.findViewById(R.id.title);
    tv.setText(marker.getTitle());
    tv=(TextView)popup.findViewById(R.id.address);
    tv.setText(marker.getSnippet());

    return popup;
} 
```

}

我在这里设置。（主要活动）

```
mMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.map))
            .getMap();
    mMap.setMapType(GoogleMap.MAP_TYPE_SATELLITE);
    mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(
            Statics.LAT_TLV, Statics.LON_TLV), 13));

    CustomInfoWindow customInfoWindow = new CustomInfoWindow(getLayoutInflater());
    mMap.setInfoWindowAdapter(customInfoWindow); 
```

我没有实现 onMarkerClick 方法。地图可以使用标记（大约 40 个）加载，但是当我单击其中一个标记时，我得到：

```
 01-10 13:15:24.321: E/AndroidRuntime(21162): FATAL EXCEPTION: main
01-10 13:15:24.321: E/AndroidRuntime(21162): java.lang.NullPointerException
01-10 13:15:24.321: E/AndroidRuntime(21162):    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java)
01-10 13:15:24.321: E/AndroidRuntime(21162):    at android.view.View.measure(View.java)
01-10 13:15:24.321: E/AndroidRuntime(21162):    at maps.a.y.i(Unknown Source)
01-10 13:15:24.321: E/AndroidRuntime(21162):    at maps.a.y.a(Unknown Source)
01-10 13:15:24.321: E/AndroidRuntime(21162):    at maps.a.w.a(Unknown Source)
01-10 13:15:24.321: E/AndroidRuntime(21162):    at maps.a.bd.a(Unknown Source)
01-10 13:15:24.321: E/AndroidRuntime(21162):    at maps.y.bw.b(Unknown Source)
01-10 13:15:24.321: E/AndroidRuntime(21162):    at maps.y.bw.a(Unknown Source)
01-10 13:15:24.321: E/AndroidRuntime(21162):    at maps.a.dh.a(Unknown Source)
01-10 13:15:24.321: E/AndroidRuntime(21162):    at maps.a.n.c(Unknown Source)
01-10 13:15:24.321: E/AndroidRuntime(21162):    at maps.a.dw.a(Unknown Source)
01-10 13:15:24.321: E/AndroidRuntime(21162):    at maps.a.bd.c(Unknown Source)
01-10 13:15:24.321: E/AndroidRuntime(21162):    at maps.a.dq.onSingleTapConfirmed(Unknown Source)
01-10 13:15:24.321: E/AndroidRuntime(21162):    at maps.e.v.onSingleTapConfirmed(Unknown Source)
01-10 13:15:24.321: E/AndroidRuntime(21162):    at maps.e.j.handleMessage(Unknown Source)
01-10 13:15:24.321: E/AndroidRuntime(21162):    at android.os.Handler.dispatchMessage(Handler.java)
01-10 13:15:24.321: E/AndroidRuntime(21162):    at android.os.Looper.loop(Looper.java)
01-10 13:15:24.321: E/AndroidRuntime(21162):    at android.app.ActivityThread.main(ActivityThread.java)
01-10 13:15:24.321: E/AndroidRuntime(21162):    at java.lang.reflect.Method.invokeNative(Native Method)
01-10 13:15:24.321: E/AndroidRuntime(21162):    at java.lang.reflect.Method.invoke(Method.java)
01-10 13:15:24.321: E/AndroidRuntime(21162):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java)
01-10 13:15:24.321: E/AndroidRuntime(21162):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java)
01-10 13:15:24.321: E/AndroidRuntime(21162):    at dalvik.system.NativeStart.main(Native Method) 
```

如果有人可以帮助我，将不胜感激，并且如果有一个非常简单的示例说明如何创建自己的信息视图，那就太好了。非常感谢。乌迪

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-10T12:42:46.970

你不应该同时覆盖`getInfoWindow()`and `getInfoContents()`，至少 where`getInfoWindow()`永远不能返回`null`。你的`getInfoContents()`永远不会被使用。

如果我不得不猜测，您的问题在于您的布局文件，但这只是一个猜测。

这是一个示例`InfoWindowAdapter`：

```
class PopupAdapter implements InfoWindowAdapter {
  LayoutInflater inflater=null;

  PopupAdapter(LayoutInflater inflater) {
    this.inflater=inflater;
  }

  @Override
  public View getInfoWindow(Marker marker) {
    return(null);
  }

  @Override
  public View getInfoContents(Marker marker) {
    View popup=inflater.inflate(R.layout.popup, null);

    TextView tv=(TextView)popup.findViewById(R.id.title);

    tv.setText(marker.getTitle());
    tv=(TextView)popup.findViewById(R.id.snippet);
    tv.setText(marker.getSnippet());

    return(popup);
  }
} 
```

将此布局文件用于`InfoWindow`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">

    <ImageView
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:padding="2dip"
        android:src="@drawable/ic_launcher"
        android:contentDescription="@string/icon"/>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="25sp"
            android:textStyle="bold"/>

        <TextView
            android:id="@+id/snippet"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="15sp"/>
    </LinearLayout>

</LinearLayout> 
```

完整的示例应用程序可以在以下位置找到：[https ://github.com/commonsguy/cw-omnibus/tree/master/MapsV2/Popups](https://github.com/commonsguy/cw-omnibus/tree/master/MapsV2/Popups)

# javascript - 从一张桌子淡出并淡入另一张桌子

> ID：14256829
> 
> 赞同：0
> 
> 时间：2013-01-10T11:24:13.537
> 
> 标签：javascript, jquery, fadein, fadeout

我有两个`<ul>`：

```
<ul id="sortable1" class="connectedSortable">
    <li class="ui-state-default">
        // I show the parameters of the row
    </li>
</ul>

<ul id="sortable2" class="connectedSortable">
    <li class="ui-state-highlight">
        // I show the parameters of the row
    </li>
</ul> 
```

当用户按下行的参数时`sortable1`，我希望它淡出并淡入到`sortable2`。

请注意，在淡入淡出我必须改变`<ul id="sortable1" class="connectedSortable">`和`<li class="ui-state-default">`：`<ul id="sortable2" class="connectedSortable">`和`<li class="ui-state-highlight">`。

我试图在我的定义`application.js`：

```
$(document).ready(function(){
    $(this).closest('li').fadeOut(function() {
       $(this).closest('ul#sortable2').fadeIn(3000);
    });
});

$(document).ready(function(){
    $('.highlight_on_success').bind("ajax:success", function(){

      $(this).closest('li').fadeOut(3000);    

    });
}); 
```

但它不起作用。

这是我的`index.html.erb`：

```
<html>
<body>

<div id ="mydiv">

<ul id="sortable1" class="connectedSortable"> 
  <% @tasks_worker_todo.each do |task| %>
        <li class="ui-state-default">
            <%= best_in_place task, :done, :classes => 'highlight_on_success', type: :checkbox,collection: %w[False True] %> | 
            <%= task.admin_mail %> | 
            <%= task.task %>
        </li>
  <% end %>
</ul>

<br><br>

<ul id="sortable2" class="connectedSortable">
  <% @tasks_worker_done.each do |task| %>
        <li class="ui-state-highlight">
            <%= best_in_place task, :done,:classes => 'highlight_on_success', type: :checkbox, collection: %w[False True] %>| 
            <%= task.admin_mail %> | 
            <%= task.task %>
        </li>
  <% end %>
</ul>

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:29:14.057

试试这个 ：

```
jQuery(文档).ready(函数(){
    jQuery("#sortable1").click(function(){
         jQuery("#sortable1").fadeOut(500);
         jQuery("#sortable2").fadeIn(500);
    });

    jQuery("#sortable2").click(function(){
         jQuery("#sortable2").fadeOut(500);
         jQuery("#sortable1").fadeIn(500);
    });
});

```

# python - 将多项选择扩展到 Sublime Text 2 中的所有建议（框、提示）

> ID：14256830
> 
> 赞同：12
> 
> 时间：2013-01-10T11:24:14.290
> 
> 标签：python, plugins, editor, selection, sublimetext2

我想知道是否已经存在一种方法可以将选择扩展到 Sublime Text 2 框建议的所有区域，因此不必一直按`Ctrl`-`D`有时`Ctrl`- `K`-`D`如[使用 Ctrl+D 时如何跳过匹配中所示Sublime Text 2中的多个选择？](https://stackoverflow.com/questions/11548308/skip-ctrld-selection-in-sublime-text-2)

90% 的时间屏幕上的框正是我想要多选的，如果有一个一键选项这样做会非常方便。

例如，如果你有

```
foo(2,42,23,2,2) 
```

然后单击第一个 2，框将仅显示在三个单个 2 周围。这些我想用一个命令/宏来选择。

如果你选择`Ctrl`-`D`你必须跳过 42 和 23 中的 2 和`Ctrl`- `K`- `D`。

如果不存在这样的东西，任何关于为此类功能编写插件的指针将不胜感激。

更新：我得到了一个很好的建议来使用`Alt`+ `F3`，这对于在整个文件中进行更改非常棒。但是，将多选的范围限制为当前可见页面或标签或括号或其他内容也是有益的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-16T15:15:50.870

您可以在任何“2”之前或之后单击，然后在 Windows 和 Linux 上使用`Atl`+或+选择所有 2`F3``Ctrl``⌘</kbd>+`G` on OS X.`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-20T17:26:52.760

对于这种情况，我做了以下操作：

输入一个条目`Key bindings - User`：

```
{ "keys": ["alt+s"], "command": "toggle_in_selection", "context":
    [
        { "key": "setting.is_widget", "operator": "equal", "operand": true }
    ]
}, 
```

注意：您可以选择其他组合键。

然后，选择要搜索的文本。您可以使用`ctrl+L`选择一行，选择您所在的括号内容，或菜单中`ctrl+shift+m`列出的任何其他方式，或任何其他方式。`Selection`

* * *

提示：创建新文件，选择文件名`User.sublime-commands`并将其存储在存储`Packages/User`新插件或用户键绑定的文件夹中。并将此代码段放入该文件中：

```
[
    // Selection Menu
    { "caption": "Selection: Expand to Paragraph", "command": "expand_selection_to_paragraph" },
    { "caption": "Selection: Expand to Scope", "command": "expand_selection", "args": {"to": "scope"} },
    { "caption": "Selection: Expand to Brackets", "command": "expand_selection", "args": {"to": "brackets"} },
    { "caption": "Selection: Expand to Indentation", "command": "expand_selection", "args": {"to": "indentation"} },
    { "caption": "Selection: Expand to Tag", "command": "expand_selection", "args":     {"to": "tag"} }
] 
```

它还将菜单中的那些扩展选择选项添加`Selection`到命令面板中，因此您不必记住快捷方式。您可以将“标题”更改为最适合您的内容。

* * *

选择要搜索的文本后，按`ctrl+f`或`ctrl+i`（搜索或增量搜索），使用上方的快捷方式，切换“选择中”按钮（搜索栏左侧的第六个按钮，看起来像箭头在垂直条上向右和向下指向）。（可选：按 alt+w 切换“whole-words”按钮（看起来像引号），以防您想匹配 free `2`in `foo(2,42,23,2,2)`，而不匹配`2`in `42`）。调整选择后，`alt+enter`选择所有匹配项-> 完成。

你不必写你要搜索的东西，你可以先选择它然后按`ctrl+e`（“slurp_find_string”命令）把它放在搜索栏中，稍后打开搜索栏它就会在那里。

所以整个过程是这样的：

1.  （可选）`ctrl+e`在您要搜索的选定文本上，因此您不必稍后再编写
2.  使用任何方式选择您要搜索的所有文本
3.  `ctrl+f`或者`ctrl+i`打开一个搜索栏，如果你没有做 1.，写下你搜索的内容
4.  如果未切换，则在选择中切换，如果需要，切换整个单词
5.  找到所有，`alt+enter`你就完成了

一开始听起来有点复杂，但是一旦你做了 10 次，整个过程（除了第 2 步）不会花费你超过一秒钟的时间。另外，如果你调整一些崇高的设置，你可以让它为你自动切换一些东西，例如在任何选择时自动 ctrl+e，或者在你打开带有打开选择的搜索栏时自动切换选择。

注意：如果您使用 mac 或 windows，您的快捷方式可能会有所不同。

希望对您有所帮助，如果有什么不清楚的地方，请多问...

编辑：我玩了一段时间的关键设置，最后得到了这个：

```
// without whole-words
{ "keys": ["ctrl+space", "f"], "command": "show_panel", "args": {"panel": "incremental_find", "reverse":false, "in_selection": false, "whole_word": false}, "context":
    [
        { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true }
    ]
},
{ "keys": ["ctrl+space", "f"], "command": "show_panel", "args": {"panel": "incremental_find", "reverse":false, "in_selection": true, "whole_word": false}, "context":
    [
        { "key": "selection_empty", "operator": "equal", "operand": false, "match_all": true }
    ]
},

//with whole-words
{ "keys": ["ctrl+space", "w"], "command": "show_panel", "args": {"panel": "incremental_find", "reverse":false, "in_selection": false, "whole_word": true}, "context":
    [
        { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true }
    ]
},
{ "keys": ["ctrl+space", "w"], "command": "show_panel", "args": {"panel": "incremental_find", "reverse":false, "in_selection": true, "whole_word": true}, "context":
    [
        { "key": "selection_empty", "operator": "equal", "operand": false, "match_all": true }
    ]
}, 
```

如果你把它放在某个地方`Key bindings - User`，它会给你两个快捷方式，`"ctrl+space", "f"`（`ctrl+space`第一个，然后是`f`，与 类似`"ctrl+k", "ctrl+d"`）和`"ctrl+space", "w"`. 第一个为您提供禁用全词的增量搜索面板，第二个启用全词。根据您按下快捷方式时是否选择了某些内容，它们都会预先选择选择中的内容。如果您看一下，您应该几乎了解如何根据自己的需求对其进行调整。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-01-28T17:07:56.113

在给出“foo（2,42,23,2,2）”的示例中，如果您只想多选单个“2”并排除“23” - 您可以将光标放在“,2”之一之后'| 出现，然后在不选择任何文本的情况下按 [CTRL]+[D] 或 [ALT]+[F3]

# google-drive-api - 将 html 文件上传到 Google Drive 时导入 HTML 元标记元素

> ID：14256831
> 
> 赞同：0
> 
> 时间：2013-01-10T11:24:15.673
> 
> 标签：google-drive-api

是否可以选择将带有元标记的 HTML 文件上传到 Google Drive 并在文档中显示元数据（需要将文件转换为 Google Drive，因为我需要对其进行编辑）

这是一个例子：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Title of the document</title>
        <meta name="keywords" content="HTML, CSS, XML, XHTML, JavaScript">
        <meta name="description" content="Free Web tutorials on HTML and CSS">
        <meta name="author" content="AngryBird">
    </head>
    <body>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T23:22:52.543

抱歉，此功能在 Google Drive 中不可用。您可以稍后使用 Google Drive SDK 自己应用元数据，例如`description`字段，但这不会自动完成。

# c++ - C++ 传递 stdcall 函数名作为参数

> ID：14256837
> 
> 赞同：2
> 
> 时间：2013-01-10T11:24:37.637
> 
> 标签：c++, c

我无法将 stdcall 函数名称“TestFunction”作为参数传递给 ExecuteLocalThread 并在 beginthreadex 中使用

```
unsigned __stdcall TestFunction(void* timerPointer)
{
    unsigned result =0;
    printf("thread is running\n");
    return result;
}

void ExecuteLocalThread(unsigned int (_stdcall *_StartAddress)(void *))
{
    HANDLE   heartBeatThread;
    unsigned int hbThreadID;
    heartBeatThread = (HANDLE)_beginthreadex(NULL, 0 , unsigned int (_stdcall *_StartAddress)(void *)/*&TestFunction*/, (void*)this, CREATE_SUSPENDED, &hbThreadID);
    ResumeThread( heartBeatThread );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:53:16.567

尝试：

```
heartBeatThread = (HANDLE)_beginthreadex(NULL, 0 , _StartAddress/*&TestFunction*/, (void*)this, CREATE_SUSPENDED, &hbThreadID); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T12:02:57.630

我强烈建议为函数指针创建一个 typedef，并在其他任何地方使用它：

```
typedef unsigned int _stdcall (*Pfn)(void*); // typedefs to "Pfn"

void ExecuteLocalThread(Pfn _StartAddress)
{
    HANDLE   heartBeatThread;
    unsigned int hbThreadID;
    heartBeatThread = (HANDLE)_beginthreadex(NULL, 0, _StartAddress, (void*)this, CREATE_SUSPENDED, &hbThreadID);
    ResumeThread( heartBeatThread );
} 
```

它更容易打字，更容易阅读，更难搞砸；）甚至铸造也变得更容易：要`somePtr`转换为你的函数指针类型：`(Pfn)somePtr`

# python - Python pandas read_table 将零转换为 NaN

> ID：14256839
> 
> 赞同：2
> 
> 时间：2013-01-10T11:24:43.503
> 
> 标签：python, pandas

假设我有以下文件`test.txt`：

```
Aaa Bbb
Foo 0
Bar 1
Baz NULL 
```

（分隔符实际上是一个制表符，我似乎无法在此处输入。）我尝试使用 pandas（0.10.0）读取它：

```
In [523]: pd.read_table("test.txt")
Out[523]:
   Aaa  Bbb
0  Foo  NaN
1  Bar    1
2  Baz  NaN 
```

注意第一列的零值突然变成了NaN！我期待这样的 DataFrame：

```
 Aaa   Bbb
0  Foo     0
1  Bar     1
2  Baz   NaN 
```

我需要改变什么才能获得后者？我想我可以使用`pd.read_table("test.txt", na_filter=False)`并随后用 NaN 替换“NULL”值并更改列 dtype。有没有更直接的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:35:17.307

我认为这是问题[#2599](https://github.com/pydata/pandas/issues/2599)，“如果列包含任何 nan，read_csv 将零视为 nan”，现在已关闭。我无法在我的开发版本中重现：

```
In [27]: with open("test.txt") as fp:
   ....:     for line in fp:
   ....:         print repr(line)
   ....:         
'Aaa\tBbb\n'
'Foo\t0\n'
'Bar\t1\n'
'Baz\tNULL\n'

In [28]: pd.read_table("test.txt")
Out[28]: 
   Aaa  Bbb
0  Foo    0
1  Bar    1
2  Baz  NaN

In [29]: pd.__version__
Out[29]: '0.10.1.dev-f7f7e13' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:33:59.210

尝试：

```
import pandas as pd
df = pd.read_table("14256839_input.txt", sep=" ", na_values="NULL")
print df
print df.dtypes 
```

这给了我

```
 Aaa  Bbb
0  Foo    0
1  Bar    1
2  Baz  NaN
Aaa     object
Bbb    float64 
```

# sql - 一周中的星期几

> ID：14256854
> 
> 赞同：0
> 
> 时间：2013-01-10T11:25:44.827
> 
> 标签：sql, oracle, date

在 oracle 中，可以更改一周的开始日期。在美国的第一天是太阳，而在欧盟 - 星期一

此更改通过更改 nls_territory 起作用

但是，如果我同时考虑星期几和星期编号，我有以下情况：

```
day week_number
  7          9   <- here it should be still week 8
  1          9
  2          9
  3          9
  4          9
  5          9
  6          9
  7         10  <- here it should still be week 9 
```

您知道哪些 nls 应该会影响一周的 start_day 吗？

类似的帖子 [从周数获取一周的第一天](https://stackoverflow.com/questions/13706558/get-first-day-of-week-from-week-number)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:34:39.053

Oracle 有两种日期格式，它们为我们提供周数。

'WW' 从 1 月 1 日开始，每 7 天递增一次。由于 01-JAN-2013 是星期二，这意味着周数在星期二递增。我想这是您目前使用的版本。

但也有“IW”格式，即 ISO 标准。在此版本中，周数从 1 月 1 日所在的一周的星期一开始。这具有使 31-DEC-2012 成为 2013 年第 1 周的第一个日期的特殊副作用，但这确实意味着周数总是在一周的第 1 天递增。

[了解更多。](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements004.htm#i34510)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:45:19.393

不确定我是否理解您的问题，并且在您的示例中，我认为 day# 和 week# 之间没有联系，抱歉......也许这会帮助您获得 ISO 周。这建立了年度周表。您可以在查询中添加 'WW' 格式并比较日期、星期的差异。NLS 设置：

```
 -- ISO_WK# --
   SELECT mydate
    , TRUNC(mydate, 'w') wk_starts
    , TRUNC(mydate, 'w') + 7 - 1/86400 wk_ends
    , TO_NUMBER (TO_CHAR (mydate, 'IW')) ISO_wk#  
   FROM
   (
    SELECT TRUNC(SYSDATE, 'YEAR')-1 + LEVEL AS mydate
      FROM dual
    CONNECT BY LEVEL <= 
      (
        SELECT TRUNC(SYSDATE, 'YEAR')-TRUNC(ADD_MONTHS (SYSDATE, -12), 'YEAR') "Num of Days"   
         FROM dual
      )
   )
  / 
```

# ios - CTParagraphStyleSetting + CoreText：设置行距

> ID：14256856
> 
> 赞同：3
> 
> 时间：2013-01-10T11:25:45.327
> 
> 标签：ios, core-text, nsattributedstring

我正在尝试设置`NSAttributedString`. 问题是我不能为文本设置一个小的行距。我可以为前导设置很大的值，例如 25 或更多，但忽略较小的值。我正在尝试设置`kCTParagraphStyleSpecifierMinimumLineHeight`or `kCTParagraphStyleSpecifierMinimumLineSpacing`，但它不起作用。

这是我的代码，任何帮助表示赞赏。

```
CGFloat leading = 50.0;
CGFloat minMineHeight = 1;
CTTextAlignment alignment = kCTCenterTextAlignment;

const CTParagraphStyleSetting styleSettings[] = {

    {kCTParagraphStyleSpecifierMinimumLineSpacing, sizeof(CGFloat), &minMineHeight},
    {kCTParagraphStyleSpecifierMinimumLineHeight, sizeof(CGFloat), &minMineHeight},
    {kCTParagraphStyleSpecifierLineSpacing, sizeof(CGFloat), &leading},
    {kCTParagraphStyleSpecifierParagraphSpacing, sizeof(CGFloat), &leading},
    {kCTParagraphStyleSpecifierAlignment, sizeof(CTTextAlignment), &alignment}
};

CTParagraphStyleRef style = CTParagraphStyleCreate((const CTParagraphStyleSetting*) &styleSettings, 5);
[mutableAttributedString addAttribute:(NSString*)kCTParagraphStyleAttributeName value:(__bridge id)style range:NSMakeRange(0, [mutableAttributedString length])];
CFRelease(style);

return mutableAttributedString; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:35:52.077

您还需要设置最大行距。

# iphone - 从应用程序委托访问数组

> ID：14256861
> 
> 赞同：0
> 
> 时间：2013-01-10T11:25:54.827
> 
> 标签：iphone, ios, nsxmlparser

我在应用程序委托中声明了 1 个数组

```
@property(strong,nonatomic)NSMutableArray *books; 
```

我在 XMLParser.m 中向这个数组添加了对象

```
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName 
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

    if([elementName isEqualToString:@"Books"])
        return;
    NSLog(@"i m in didEndElement");

    if([elementName isEqualToString:@"Book"]) {
        [appDelegate.books addObject:aBook]; //here i have added objects to array

        [aBook release];
        aBook = nil;

        NSLog(@"books=%@",appDelegate.books);
    }
    else 
        [aBook setValue:currentElementValue forKey:elementName];

    [currentElementValue release];
    currentElementValue = nil;
} 
```

我已经像这样在 XMLParser.h 中声明了这个数组

```
@interface XMLParser : NSObject {
    NSMutableString *currentElementValue;

    AppDelegate *appDelegate;
    Book *aBook; 
} 
```

现在我必须在 BooksDetailViewController.m 中访问这个数组，我如何访问这个数组。简而言之，我如何从应用程序委托访问数组到 BooksDetailViewController

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T11:34:25.533

首先你应该`alloc`和`init`你的数组，然后你可以在其中添加对象。

您应该`BooksDetailViewController`像这样创建 AppDelegate 实例，

在 .h 文件中

```
AppDelegate *appDelegate; 
```

并在 .m 文件中

```
appDelegate = [[UIApplication sharedApplication]delegate]; 
```

现在你可以像这样访问你的数组，

```
appDelegate.books 
```

# jquery - 设置多张图片的来源

> ID：14256863
> 
> 赞同：1
> 
> 时间：2013-01-10T11:26:01.627
> 
> 标签：jquery

我在一个 div 标签中有 4 个 img。我正在使用 jquery ajax 从数据库中获取图像源，并希望将源设置为一张一张的 img ..我该怎么做……谢谢

```
<div class="item " style="width:450px;">
                <ul class="thumbnails">
                    <li class="span13">
                        <div class="thumbnail" style="margin-left:15px;">
                            <img src="" alt="">
                        </div>
                    </li>
                    <li class="span13">
                        <div class="thumbnail" style="margin-left:15px;">
                            <img src="" alt="">
                        </div>
                    </li>
                    <li class="span13">
                        <div class="thumbnail" style="margin-left:15px;">
                            <img src="" alt="">
                        </div>
                    </li>
                    <li class="span13">
                        <div class="thumbnail" style="margin-left:15px;">
                            <img src="" alt="">
                        </div>
                    </li>
                </ul>
          </div> 
```

这是从数据库中检索源的代码

```
 $.ajax({
        type: "POST",
        url: "/WebServices/BannerImage.asmx/GetAllManufactureImage",
        contentType: "application/json",
        async: false,
        success: function (data) {
            $.map(data.d, function (item) {
               // set the source to image
            });
        },
        failure: function (msg) {
            alert(msg);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:41:24.563

尝试这个：

```
success: function (data) {
    $.each(data.d, function(idx,item){
       $('img').eq(idx).attr('src',item);
    });
} 
```

**注意**：我假设 data.d 是图像源。

# perl - 为什么 split 不返回任何东西？

> ID：14256865
> 
> 赞同：2
> 
> 时间：2013-01-10T11:26:02.567
> 
> 标签：perl, split

我试图让 Perl`split`工作超过 2 小时。我没有看到错误。也许其他一些眼睛可以看到它并看到问题。我敢肯定它是一个愚蠢的：

```
@versionsplit=split('.',"15.0.3");

print $versionsplit[0];
print $versionsplit[1];
print $versionsplit[2]; 
```

我只是得到一个空数组。知道为什么吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-10T11:29:09.763

你需要：

```
@versionsplit=split(/\./,"15.0.3"); 
```

第一个参数`split`是正则表达式，而不是字符串。并且`.`是表示“匹配任何字符”的正则表达式符号。因此，输入字符串中的所有字符都被视为分隔符，并且`split`在它们之间找不到任何要返回的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T12:24:54.057

“ `.`”代表任何字符。您需要对其进行转义，以便拆分功能将其识别为字段分隔符。将您的线路更改为

```
@versionsplit=split('\.',"15.0.3"); 
```

# c++ - 方法名称应该容易记住吗？

> ID：14256877
> 
> 赞同：2
> 
> 时间：2013-01-10T11:26:33.990
> 
> 标签：c++, naming-conventions, method-names

是否有任何官方 C++ 建议涉及应在方法名称中披露的信息量？我问是因为我可以在互联网上找到很多参考资料，但没有一个能真正解释这一点。

我正在使用一个名为 的方法开发一个 C++ 类`calculateIBANAndBICAndSaveRecordChainIfChanged`，它很好地解释了该方法的作用。较短的名称将更容易记住，并且不需要智能感知或复制和粘贴来键入。它的描述性较差，是真实的，但功能应该被记录下来。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-10T11:29:55.427

`calculateIBANAndBICAndSaveRecordChainIfChanged`被认为是一个糟糕的函数名称，它打破了一个功能做一件事的规则。

**降低复杂性**

创建例程的一个最重要的原因是降低程序的复杂性。创建一个例程来隐藏信息，这样你就不需要考虑它了。当然，您在编写例程时需要考虑一下。但是写完之后，你应该能够忘记细节并使用例程，而无需了解其内部工作原理。创建例程的其他原因——最小化代码大小、提高可维护性和提高正确性——也是很好的理由，但如果没有例程的抽象能力，复杂的程序将无法智能管理。您可以简单地将这个函数分解为以下函数：

```
CalculateIBAN
CalculateBIC
SaveRecordChain
IsRecordChainChanged 
```

**要命名一个过程，请使用一个强动词，后跟一个宾语**

具有功能内聚的过程通常对对象执行操作。名称应该反映过程的作用，对对象的操作意味着动词加对象名称。PrintDocument()、CalcMonthlyRevenues()、CheckOrderInfo() 和 RepaginateDocument() 是好的过程名称的示例。

**描述例程所做的一切**

在例程的名称中，描述所有输出和副作用。如果例程计算报告总计并打开输出文件，则 ComputeReportTotals() 不是该例程的适当名称。ComputeReportTotalsAndOpen-OutputFile() 是一个合适的名称，但它太长太傻了。如果你的例程有副作用，你就会有很多又长又傻的名字。解决方法是不要使用描述性较差的例程名称；解决方法是编程，以便让事情直接发生而不是产生副作用。

**避免无意义、含糊或空泛的动词**

有些动词是有弹性的，可以延伸到几乎涵盖任何含义。HandleCalculation()、PerformServices()、OutputUser()、ProcessInput() 和 DealWithOutput() 之类的例程名称不会告诉您例程的作用。这些名称最多告诉您例程与计算、服务、用户、输入和输出有关。例外情况是在处理事件的特定技术意义上使用动词“句柄”时。

以上大部分内容均来自[**Code Complete II**](https://rads.stackoverflow.com/amzn/click/com/0735619670)。其他好书是`Clean Code`罗伯特**·C·马丁**`The Clean Coder`的

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T12:06:09.977

要回答直接问题，我认为函数名称*不需要*令人难忘。如果他们是很好，但就像你说的那样，这些东西应该被记录下来。我可以查一下。

`calculateIBANAndBICAndSaveRecordChainIfChanged`对我的口味来说太长了。除了必须 c/p 或自动完成才能使用它们的不便之外，我对长函数名称的担忧是我也没有正确阅读它们，因此具有相似“形状”的名称开始看起来令人困惑地类似于一个其他。

所以我建议寻找一个更短的名字。这些操作（计算两件事和有条件地保存记录链）被组合在一起肯定是有原因的。问题中没有描述这个原因，它位于规范或项目历史的某个地方。您应该确定该原因并寻找更简洁的函数名称。

在命名函数时，您还可以考虑函数将来可能更改的原因[*]。为什么同时计算两个东西（IBANA 和 BIC）？他们之间是什么关系？你能找出同时做这两件事然后保存的原因吗？

例如：它们是该对象的“首字母缩略词”，通常希望一次重新计算所有首字母缩略词，如果重新计算，那么自然需要保存更改。然后调用函数`refreshAcronyms`。也许将来会有第三个缩写词。

再举一个例子：调用者真正想要的是在更改时保存对象，为了保持存储数据的完整性，我必须*始终*在保存之前重新计算 IBANA 和 BIC。在那种情况下，其余的都是保存的必要前兆，所以我可以调用函数`saveRecordChain`. 公共接口的用户只需要知道保存功能做了需要做的事情。私有接口中可能有一个`serializeToFile()`函数，如果更改而不做额外的事情，它会保存。

[*] 我说“原因”复数，但罗伯特 C 马丁将“单一责任原则”定义为只有一个可能的原因来改变一个设计良好的函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T11:29:55.420

理想情况下，一种方法应该只做一件事。而且您的方法名称应该反映它的作用（那一件事），然后只有您的程序变得可读。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-10T11:51:45.390

这是个人喜好问题，尽管我认为这`calculateIBANAndBICAndSaveRecordChainIfChanged`太长了，因此难以阅读和编码（除非您使用的是可以自动完成的智能编辑器）

还有两点：

1.  正如其他海报所建议的那样，该功能需要分解为更小的部分。
2.  没有法律禁止评论您的标题以在其中提供对功能的更详细描述，因此您不必将其功能的每个方面都构建到名称中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-10T11:37:16.020

在您的职业生涯中，您阅读和编写了太多方法，以至于无法记住它们的名字。大多数程序员需要从他们语言的标准库中查找函数的名称，更不用说他们或他们的团队开发的函数的名称了！对于维护您的代码并第一次看到调用的人来说，最令人难忘的函数名称将毫无用处。此外，很有可能在六个月内你也不会记得它！

这就是为什么我建议首先使用描述性名称，而不是担心记忆的难易程度：毕竟，具有智能感知功能的 IDE 不会很快消失（并且引入它们是有充分理由的 - 以解决我们的内存限制）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-10T11:34:07.010

对于个人交互来说，这将是足够且有用的，但是在完成应用程序之后，您必须以任何方式将每个函数名称重新分解为他们打算做的事情。如果在团队或公司中工作，请确保功能名称反映其功能。

在您的例如函数名称中，我可以将其命名为：`saveRecordWithRespctToIBANandBIC()`**

# debugging - 我们可以在 GCC 4.3.3 中禁用内联支持以进行 linux 内核调试吗

> ID：14256880
> 
> 赞同：1
> 
> 时间：2013-01-10T11:26:36.337
> 
> 标签：debugging, gcc, linux-kernel, inline, trace32

我正在尝试使用 Trace 32 ICD 了解 Linux 内核中的 IPSec 层。为此，我正在尝试跟踪从用户区到以太网驱动程序的数据包流。我面临的问题是 Trace32 无法在堆栈帧输出中显示内联函数，因此是我的流程中的跳转。

![在此处输入图像描述](../Images/2690c4313f13f552f84894113a4baa77.png)

我只是想知道是否：

a) 有一种方法可以在 GCC 中禁用内核函数（或任何程序）的内联功能。

b) 有一种方法可以在 Trace32 ICD 工具中添加对内联函数的支持。

如果 a 和 b 的答案都不是，那么我想知道是否有解决我的问题的方法。

**我的 linux 版本：** Linux (bts) 3.0.1-rt11-svn9237 #2 PREEMPT RT Fri Dec 21 09:58:42 IST 2012 armv7l GNU/Linux

**我的 GCC 版本：** arm-none-linux-gnueabi-gcc-4.3.3

# javascript - video-js _V_ 未定义

> ID：14256894
> 
> 赞同：0
> 
> 时间：2013-01-10T11:27:16.680
> 
> 标签：javascript, html, video, video.js

在一个页面中，我添加了一个 video.js html5 播放器。在一个函数中，我正在这样做：

```
var myPlayer = document.getElementById("example_video_1");
myPlayer.pause(); 
```

它有效。但是当我尝试做类似的事情时：

```
myPlayer.currentTime(30); 
```

它不起作用。即使这有效：

```
alert(myPlayer.currentTime); 
```

我不明白为什么 play() 和 pause() 函数起作用，我可以获取有关播放器状态的一些信息，但我不能使用 video-js API 中的任何其他函数。

我知道我应该得到这样的视频项目：

```
var myPlayer = _V_("example_video_1"); 
```

但如果我这样做，我会得到：*V*未在控制台中定义。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T10:37:13.710

听起来您正在对代码使用较旧的 js 调用，有一个新版本的交叉。由于您没有说明您使用的是哪个版本，因此很难分析。尝试更换：

```
_V_ 
```

和

```
videojs 
```

* ***更新：使用'vjs'；如果您升级或已开始使用 4.4.3 版，它会在开发代码中解释...**

```
*
* **ALIASES** videojs, _V_ (deprecated)
*
* The `vjs` function can be used to initialize or retrieve a player.
* 
```

# javascript - 图表不使用 .resize 出现，但使用 .render

> ID：14256902
> 
> 赞同：0
> 
> 时间：2013-01-10T11:27:37.777
> 
> 标签：javascript, dojo, arcgis-server

我正在使用 dojo 1.7（内置到我正在使用的 Esri API 中）在地图弹出窗口中动态创建图表（当用户单击地图时触发）。

```
 var c = dojo.create("div", {
          id: "demoChart"
        }, dojo.create('div')); 
```

设置图表属性（数据、主题等）后，如果我调用`chart.render`，图表会正确呈现，但大小错误（对于 infoWindow 容器 div 来说太大）。

但是，如果我调用`chart.resize(175, 145)`，图表确实会以正确的大小创建，但不会在第一次单击时创建，而是在第二次单击时创建。

要复制，请[参阅此 JSFiddle](http://jsfiddle.net/jakc/Cwdyn)，并参考 Javascript 中的第 49-53 行。

```
 map.infoWindow.setContent(c);
  // Chart Resize will resize the DIV as needed.
  // However, the initial click will not show the chart
  chart.resize(175, 145);
  // Chart Render shows the chart on first click, but does not resize the div
  //chart.render(); 
```

我的印象是调整大小方法包括在其中调用渲染。因此，我不太确定为什么会出现这种行为。

我需要知道需要更改哪些内容才能创建与它所在的父 div 大小相同的图表 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:01:58.063

图表以默认大小 (400 x 300px) 呈现的原因是图表节点 (div#demoChart) 没有任何尺寸。

此外，在图表节点 div 可见之前，它不会有任何实际尺寸（仅样式尺寸）供图表使用。然后它会回退到 300 x 400 像素的默认大小。

要使您的代码正常工作：

1.  为 div 添加 CSS 样式

    ```
    #demoChart {
      width: 175px;
      height: 145px;
    } 
    ```

2.  在显示信息窗口并且图表节点实际可见后创建图表。图表在实例化时获取它的尺寸（在 constructor() 方法中，而不是在您可能期望的 render() 方法中）。

我已经编辑了您的 JSfiddle 以使其工作（[查看 JSfiddle](http://jsfiddle.net/andymdesign/qPH8W/)）。

# ruby - 在保留格式和类型的同时读取文件

> ID：14256904
> 
> 赞同：0
> 
> 时间：2013-01-10T11:27:40.987
> 
> 标签：ruby

如何保留文件中存储的原始数据的格式和类型？

```
stored_response = File.open('spec/data/response.txt', 'rb') { |f| f.read }
item.get_location.should == stored_response 
```

`#get_location`作为一个 api 调用

response.txt 包含[此](https://gist.github.com/4501489)内容，但一旦读取就会返回[此内容](https://gist.github.com/4501471)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:50:58.193

如果你想使用 json，为什么不将它作为 json 打开呢？

```
JSON.parse(IO.read("data.json")) 
```

然后，您将看不到该 JSON 文件的任何*序列化工件*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:30:13.553

它不会转义字符串本身中的字符，它只是在您`inspect`输入字符串时转义它们（这是`irb`打印结果时所做的）。

尝试使用`puts`来检查数据。

```
irb:001:0> contents = File.read("data.json")
=> "[990]\n"

irb:002:0> puts contents
[990]
=> nil 
```

# android - Phonegap 创建命令生成空项目

> ID：14256908
> 
> 赞同：3
> 
> 时间：2013-01-10T11:27:51.840
> 
> 标签：android, cordova

[我在这里](http://docs.phonegap.com/en/2.3.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android.)关注 android 的 phonegap 指南

我已经能够为 java、ant 和 sdk 设置所有路径。运行`create <project_folder_path> <package_name> <project_name>`命令后，如教程中所述。我收到消息说它正在生成项目，完成后我导航到项目文件夹，cordova.jar 和 cordova.js 文件丢失。

我需要做一些额外的事情吗？

# ruby-on-rails - Rails - 只有一个元素的动态嵌套表单

> ID：14256914
> 
> 赞同：0
> 
> 时间：2013-01-10T11:28:08.740
> 
> 标签：ruby-on-rails, nested-forms, rails-models

我必须模态团队和球员，并且像往常一样球队有很多球员。

在球队的展示页面中，我正在展示球员等等。（我遵循 railscasts.com/episodes/196-nested-model-form-part-1 教程。）

我的问题是，当我在团队显示页面中单击球员姓名时，我想显示球队的编辑表单，但其中只有点击球员的数据。在目前的情况下，我有一个巨大的表格，里面有所有玩家的信息。

如果你能帮助我，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T12:46:43.120

您可以`hidden_field`在团队表单中放置一个，`player_id`在提交时将其作为参数传递给控制器​​。

然后，您可以在控制器中仅搜索`params[:player_id]`并更改您显示的视图。

在您的表格中：

```
<%= form_for .... do |f| %>
  <%= f.hidden_field 'player_id', value: player.id %>
  ...
<% end %> 
```

在您的控制器中：

```
if(params[:player_id])
   @information = Information.find_by_user_id(params[:player_id].to_i)
end 
```

最后，在您看来，您可以根据需要显示@information 变量。

如果您不想提交给控制器，请编写一个 javascript 程序：

```
$(document).ready( function () {
   $(".team_form").live("click", function() {
       $(this).attr("player_id").val //holds the player_id
       //load the other form using the player_id
   }
} 
```

# c# - 更新数据集中的数据表

> ID：14256915
> 
> 赞同：1
> 
> 时间：2013-01-10T11:28:12.013
> 
> 标签：c#, asp.net

我想知道如何更新数据集中的数据表。我有一个数据表，其中有一些项目的详细信息。现在我想出于某种目的将它添加到数据集中并更新它。给我一些解决的建议这..

这是我的代码：

```
 DataRow dr;
                dr = Basket_DataTable.NewRow();
                Basket_DataTable.Rows.Add(dr);
                dr["PId"] = getPId.ToString();
                dr["ProductName"] = getProductName.ToString();
                dr["ImagePath"] = getImagePath.ToString();
                dr["ProductPrice"] = getProductPrice.ToString();
                dr["Quantity"] = getQuantity.ToString();
                dr["ProductDescription"] = getProductDescription.ToString();
                dr["TotalPrice"] = getProductPrice.ToString();
                Basket_DataTable.AcceptChanges(); 
```

Basket_DataTable 是我需要添加到数据集并更新的数据表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:30:18.267

我相信您想将新行添加到数据集中现有的数据表中。`Basket_DataTable`您应该参考数据集中的数据表，而不是创建新的 DataTable 。

就像是。

```
//Create new Row from your DataTable in DataSet
DataRow dr = yourDataSet.Tables["Basket_DataTable"].NewRow();
// here you can refer to your datatable with the index as well 
//e.g. yourDataSet.Tables[0]

Basket_DataTable.Rows.Add(dr);
dr["PId"] = getPId.ToString();
dr["ProductName"] = getProductName.ToString();
dr["ImagePath"] = getImagePath.ToString();
dr["ProductPrice"] = getProductPrice.ToString();
dr["Quantity"] = getQuantity.ToString();
dr["ProductDescription"] = getProductDescription.ToString();
dr["TotalPrice"] = getProductPrice.ToString();

//Remember to add your row to the table. 
yourDataSet.Tables["Basket_DataTable"].Rows.Add(dr); 
```

在您当前的代码中，您没有将新行添加到数据表中。请记住在数据表中包含该行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:35:51.297

如果 DataTable 已经在现有的 DataSet 中，但您想将其添加到另一个 DataSet 中，则需要先创建一个副本 - DataTable 实例只能有一个父 DataSet。

```
DataTable Basket_DataTable_copy = Basket_DataTable.Copy();
yourDataSet.Tables.Add(Basket_DataTable_copy); 
```

然后您可以在 Basket_DataTable_copy 上进行更新

请参阅[MSDN 上的 DataTable.Copy](http://msdn.microsoft.com/en-us/library/system.data.datatable.copy.aspx)

# android - 在应用程序中打开自定义文件类型 Gmail 附件

> ID：14256916
> 
> 赞同：10
> 
> 时间：2013-01-10T11:28:13.170
> 
> 标签：android, android-intent, gmail

我已经为此苦苦挣扎了好几天了。

我正在尝试通过意图过滤器注册我的活动，以使用 gmail 打开特定的自定义文件类型。

问题是无论我尝试什么，要么我没有打开文件的选项，要么任何文件类型（包括我的）的任何附件都可以选择使用我的应用程序打开。

我认为问题在于 gmail 提供的 URI 中没有包含任何文件详细信息。

有很多人问过同样的问题，但是他们的解决方案永远不会将意图过滤器限制为自定义文件类型。

我的 Android 清单中的当前意图过滤器如下...

```
 <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <data
                    host="*"
                    android:mimeType="*/*"
                    android:pathPattern=".*\\.abc"
                    android:scheme="content" />
            </intent-filter> 
```

重申一下，这个意图过滤器添加了使用我的应用程序从 gmail 打开任何附件的选项。

**任何帮助将非常感激**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T12:38:55.440

`content://` `Uri`指向文件的值不一定有文件扩展名。AFAIK，Gmail 不包含他们的文件扩展名，因此它与您的`pathPattern`. 此外，`host`缺少`android:`命名空间前缀。

如果电子邮件将使用您的文件的不同 MIME 类型发送，请使用该类型`android:mimeType`并删除其余`<data>`属性。如果电子邮件不会以您的文件的不同 MIME 类型发送，那么您就不走运了。

# bash - BASH - 选择多行 Div 之间的所有代码

> ID：14256917
> 
> 赞同：2
> 
> 时间：2013-01-10T11:28:19.103
> 
> 标签：bash

我在所有包含 SEO 内容的电子商务网站的页面上都有一个 div。我想计算该 div 中的单词数。它用于诊断大型爬网中的空页面。

div 始终按如下方式开始：

```
<div class="box fct-seo fct-text 
```

然后它包含`<h1>`,`<p>`和`<a>`标签。

然后，显然，它以`</div>`

我如何使用 SED、AWK、WC 等获取 div 开头和结束 div 之间的所有代码并计算出现的单词数。如果它是 90% 准确，我很高兴。

您必须以某种方式告诉它在`</div>`它找到第一次关闭之前停止扫描。

这是一个可以使用的示例页面：

[http://www.zando.co.za/women/shoes/](http://www.zando.co.za/women/shoes/)

非常感激。-P

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T12:03:49.223

当它变得更复杂时（例如嵌套在该 div 中的 div），正则表达式方法[将不再起作用](https://stackoverflow.com/a/1732454/1501222)，您需要一个 html 解析器，就像我的[Xidel 一样](http://videlibri.sourceforge.net/xidel.html)。然后就可以找到文字了

要么用css：

```
xidel http://www.zando.co.za/women/shoes/  -e 'css(".fct-seo")' | wc -w 
```

或模式匹配：

```
xidel http://www.zando.co.za/women/shoes/  -e '<div class="box fct-seo fct-text">{.}</div>' | wc -w 
```

它也只会打印文本，而不是 html 标签。（如果您/某人想要它们，您可以添加 --printed-node-format xml 选项）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T12:40:31.777

尝试：

```
grep -Pzo '(?<=<div)(.*?\n)*?.*?(?=</div)' -n inputFile.html | sed 's/^[^>]*>//' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T11:37:48.693

在 Perl 单行中，您可以使用`..`运算符来指定与您感兴趣的区域的开头和结尾匹配的模式：

```
$ perl -wne 'print if /<div class="box fct-seo fct-text/ .. /<\/div>/' shoes.html 
```

然后，您可以用 计算单词`wc -w`：

```
$ perl -wne 'print if /<div class="box fct-seo fct-text/ .. /<\/div>/' shoes.html | wc -w 
```

如果计算 HTML 标记本身中的“单词”会影响到足以影响准确性的数字，则可以使用以下内容从计数中删除它们：

```
$ perl -wne 'next unless /<div class="box fct-seo fct-text/ .. /<\/div>/; s/<.*?>//g; print' shoes.html | wc -w 
```

# web-services - 在我的网络服务中解压有效载荷

> ID：14256919
> 
> 赞同：0
> 
> 时间：2013-01-10T11:28:30.593
> 
> 标签：web-services, axis, http-compression

如何在我使用 Axis 创建的 Web 服务中处理**COMPRESSED的传入有效负载（SOAP）？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:58:36.273

假设您的内容是 GZip 编码的

1.检查内容编码。如果是**gzip**则

2.将输入流包装为`GZIPInputStream`

像往常一样从输入流中读取。

# c++ - 对向量中的字符串路径进行排序

> ID：14256922
> 
> 赞同：0
> 
> 时间：2013-01-10T11:28:43.720
> 
> 标签：c++, algorithm

我正在通过我的程序扫描一个目录以获取一些图像及其路径。在目录中，图像按以下方式排列：

`1.png 2.png 3.png 4.png 5.png etc.`

扫描目录时：

```
for(int i=0;i<dir.numFiles();++i){
string path = dir.getPath(i);
imageSeq.push_back(CustomImage.loadImage(path));
}
private:
vector<CustomImages> imageSeq; 
```

上面代码的问题是图像是从目录中随机提取出来的。我希望根据图像的名称对图像进行排序并推送到向量中。我在这里有一些限制：

1) CustomImage 没有公开一种方法，当我将 new 推入 imageSeq 向量`imageName`时，我可以用它与最后一个向量进行比较 2) 我无法修改向量 imageSeq 以接收字符串然后再次循环之后加载图像。这样做会增加占用的空间。`paths`

如何对向量中的这些图像进行排序，以便根据它们的名称排列它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:42:52.633

我想，您可以首先读取所有路径，对它们进行排序，然后遍历排序的向量，就像这样：

```
#include<algorithm>
...
vector<string> help_vector;
for(int i=0;i<dir.numFiles();++i){
    string path = dir.getPath(i);
    help_vector.push_back(path);
}
sort(help_vector.begin(),help_vector.end());

for(int i=0;i<help_vector.size();i++)
    imageSeq.push_back(CustomImage.loadImage(help_vector[i])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:33:25.077

要按字典顺序对名称进行排序，请使用[`std::sort`](http://en.cppreference.com/w/cpp/algorithm/sort)：

```
std::sort(imageSeq.begin(), imageSeq.end()); 
```

但是，按字典顺序将意味着`15.png`它将出现*在 之前* `2.png`。为了解决这个问题，您需要实现一个[自然的排序比较器](http://www.codinghorror.com/blog/2007/12/sorting-for-humans-natural-sort-order.html)，除非您知道文件名的确切格式，否则您可以相应地解析它们。

# iphone - 如何重新加载 UIVIew 的 UIViewController 数据

> ID：14256931
> 
> 赞同：1
> 
> 时间：2013-01-10T11:29:23.400
> 
> 标签：iphone, ios, uiview, uiviewcontroller, reload

我如何`UIVIewcontroller`从`UIView`.Actually 重新加载数据。实际上我有`UIVIewController`一个自定义类类。`UIView`现在`UIViewcontroller`我有一个标签，我需要打印标签中定义的值`UIView`。但是首先编译`viewdidload`的然后编译器移动到。那么我该如何打印或重新加载`UIViewController``UIView``UIVIewController`

. `UILabel Text`我已经在`ViewDidLoad`of`UIViewController`和取自`UIView`类的值中定义了

那么如何重新加载`UIViewController`.

我正在做的是：

**UIVIewController** (thirdTab) 类

```
-(void)viewDidLoad{

 [self reloadInputViews1];

    }

-(void)reloadInputViews1{

appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
//  labelPrint.text=appDelegate.dayPrint;

[self.labelPrint setText:labelPrint.text];

} 
```

**UIView**类

```
- (void)drawRect:(CGRect)rect {

AppDelegate* appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    appDelegate.dayPrint=theDate;
    NSLog(@"appde%@",appDelegate.dayPrint);
    [appDelegate.thirdTab reloadInputViews1];
 } 
```

但这不起作用......我无法在标签中打印值。如何做到这一点..从 UIViews 获取值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T11:32:29.493

你可以调用[`setNeedsDisplay`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instm/UIView/setNeedsDisplay)你的视图来强制它被重绘。但我不确定这是不是最好的解决方案，事实上，`setNeedsDisplay`你可以直接调用你的控制器，而不是调用你的视图，`reloadInputViews1`它会是一样的（实际上，它会好得多）。

除此之外，我认为您当前的设计不是很干净。我建议您在视图和控制器之间定义一个委托协议，以使这种关系更加明确。

# ldap - 如何在人工任务的人员目录中使用 LDAP 选项在同一组中声明具有另一个 ID 的任务？

> ID：14256937
> 
> 赞同：1
> 
> 时间：2013-01-10T11:29:36.923
> 
> 标签：ldap, websphere-7

当我在组（人员分配标准）下的潜在所有者中使用由 cn/ou/dc 组成的唯一限定名称来创建流程实例时，我能够声明该任务。日志建议管理员成为潜在所有者。但是，当我尝试使用同一合格组中的另一个 ID 声明任务时，我收到错误消息：“不允许用户对任务执行请求的操作 'claim()'”。

如何在人工任务的人员目录中使用 LDAP 选项在同一组中声明具有另一个 ID 的任务？

# c# - IProducerConsumerCollection .TryAdd/.TryTake - 他们什么时候返回真/假？

> ID：14256944
> 
> 赞同：3
> 
> 时间：2013-01-10T11:29:58.627
> 
> 标签：c#, concurrent-collections

当我调用`IProducerConsumerCollection<T>.TryAdd(<T>)`或者`IProducerConsumerCollection<T>.TryTake(out <T>)`这些是否会因为另一个线程正在使用该集合而失败？

或者，即使在其他线程完成收集之后，如果有空间可以添加或采取某些东西，它总是会返回 true？

我在这里看不到任何东西：http: [//msdn.microsoft.com/en-us/library/dd287147.aspx](http://msdn.microsoft.com/en-us/library/dd287147.aspx)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T11:33:28.493

虽然理论上集合可以出于任何原因拒绝获取/添加请求，但我*知道*的唯一原因是`Add`由于集合已达到其容量而`Take`失败，并且由于集合为空而失败。

集合从一开始就设计为可在多个线程中使用 - 因此，如果有剩余项目，即使两个线程`Take`同时尝试，它们都应该获得一个项目和一个返回值`true`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:51:04.010

例如，***BlockingCollection `<T`>***是对接口的高级抽象（尽管它不实现接口），具有边界和阻塞功能，可能会引发以下情况之一：

*   *****释放集合后， TryAdd(*** T)或***TryTake(T)***上***出现ObjectDisposedException***。**
****   *****如果将TryAdd(T)***标记为添加完成，则出现***InvalidOperationException***。考虑一下当您从 2 个生产者向集合添加值时的情况，一个将集合标记为完成，然后另一个尝试添加到集合。*****

# mysql - 如何根据另一个列表从列表中排除用户？

> ID：14256945
> 
> 赞同：-1
> 
> 时间：2013-01-10T11:30:00.917
> 
> 标签：mysql

我有这个用户 geoloc 列表（id、lat、long）：

```
user1, 123, 456

user2, 321, 123

user3, 456, 462 
```

在我的应用程序中，一个用户（例如 user1）获得了一张地图并可以点击其他用户。这会在我的 geoloc_log (id, lat, long, other_id) 中产生一个条目（other_id 是用户单击的用户的 id :-)）：

```
user1, 321, 123, user2 // user1 clicked on user2 when user2 was at its position

user3, 123, 456, user1 // same, but user3 and user1 
```

因此，当 user1 从 geoloc 中拉出列表时，我想排除他自己和他点击的那些。

当 user1 拉出 geoloc 列表时，它看起来像：

```
user3, 456, 462 
```

我的 SQL 到目前为止看起来像这样：

```
SELECT * FROM geoloc WHERE id != 'user1' AND ... 
```

我不知道如何将其他表格包含在不包含的表格中：-/我该怎么做？

如果 user1 像从 _log 表中那样单击 user2，除非 user2 移动，否则 user1 不会从 geoloc 列表中获取 user2...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T11:34:31.733

如果我理解得很好，应该是

```
and id NOT IN (select other_id from geoloc_log where id = 'user1') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:38:21.660

如果我理解得很好，那么查询将是这样的

```
select * from geoloc where id!='user1' and not in (select other_id from geoloc_log where id='user1' ) 
```

# c# - 根据asp.net中的下拉列表选择选项从文件夹动态加载多个图像

> ID：14256947
> 
> 赞同：1
> 
> 时间：2013-01-10T11:30:06.630
> 
> 标签：c#, javascript, .net, sql, visual-studio-2010

根据 asp.net 中的下拉列表选择选项从文件夹动态加载多个图像。谁能帮我在visual studio中实现这个？这是我尝试过的代码，帮助我更好的选择或修改它，我还需要将图像输出绑定到图像按钮控件作为幻灯片。

```
 <script type="text/javascript">
   function new1(city) {
      switch (city) {
           case "Patna":
               var imlocation = "Patna/";
               var currentdate = 0;
               var image_number = 0;
               function ImageArray(n) {
                   this.length = n;
                   for (var i = 1; i <= n; i++) {
                       this[i] = ' '
                   }
               }
               image = new ImageArray(2)
               image[0] = '2.jpg'
               image[1] = '3.jpg'
               var rand = 60 / image.length
               function randomimage() {
                   currentdate = new Date()
                   image_number = currentdate.getSeconds()
                   image_number = Math.floor(image_number / rand)
                   return (image[image_number])
               }
                                  document.write("<img src='" + imlocation + randomimage() + "'>");

           case "Bhopal":
               var imlocation1 = "Bhopal/";
               var currentdate1 = 0;
               var image_number1 = 0;
               function ImageArray1(n) {
                   this.length = n;
                   for (var i = 1; i <= n; i++) {
                       this[i] = ' '
                   }
               }
               image1 = new ImageArray1(3)
               image1[0] = '2.jpg'
               image1[1] = '4.jpg'
               image1[2] = '1.jpg'
               var rand1 = 100/ image1.length
               function randomimage1() {
                   currentdate1 = new Date()
                   image_number1 = currentdate1.getSeconds()
                   image_number1 = Math.floor(image_number1 / rand1)
                   return (image1[image_number1])
               }
               document.write("<img src='" + imlocation1 + randomimage1() + "'>");

       }
   }

<asp:DropDownList ID="DropDownList1" runat="server" onchange="new1(this.value)"
                DataSourceID="SqlDataSource1" DataTextField="City" DataValueField="City" 
                onselectedindexchanged="DropDownList1_SelectedIndexChanged" 
                AutoPostBack="True" >
            </asp:DropDownList> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T20:18:03.487

最后我自己找到了答案，使用 ajax 幻灯片扩展器在 webservice 中使用下面的代码。

```
[System.Web.Script.Services.ScriptService]
public class WebService1 : System.Web.Services.WebService
{
    [System.Web.Services.WebMethod()]
    [System.Web.Script.Services.ScriptMethod]
    public AjaxControlToolkit.Slide[] GetSlides(string contextKey)
    {

        string[] imagenames = System.IO.Directory.GetFiles(HttpContext.Current.Server.MapPath("~/" + contextKey ));
        AjaxControlToolkit.Slide[] photos = new AjaxControlToolkit.Slide[imagenames.Length];
        for (int i = 0; i < imagenames.Length; i++)
        {
            string[] file = imagenames[i].Split('\\');
            photos[i] = new AjaxControlToolkit.Slide(contextKey + "/" + file[file.Length - 1], file[file.Length - 1], "");
        }
        return photos;

    }

  } 
```

在幻灯片扩展器中

```
 <asp:SlideShowExtender ID="SlideShowExtender1" TargetControlID="Image1"     SlideShowServiceMethod="GetSlides" SlideShowServicePath="~/WebService1.asmx" Loop="true" runat="server"  UseContextKey="true" 
    AutoPlay="True" BehaviorID="b1" >        
</asp:SlideShowExtender> 
```

终于在 page_load

```
 if (Page.IsPostBack)
 {
     SlideShowExtender1.ContextKey = DropDownList1.SelectedValue;
 } 
```

# javascript - 当我在函数参数中声明一个新变量时出现错误：为什么会这样？

> ID：14256955
> 
> 赞同：0
> 
> 时间：2013-01-10T11:30:34.817
> 
> 标签：javascript, function, arguments, syntax-error

对于带参数的函数：

```
function displayCouplet(var couplet) {
   document.write(couplet);
}

displayCouplet("The object of my worship lies beyond perception's reach,For men who see, the Ka'aba is a compass, nothing more."); 
```

显示错误*Uncaught SyntaxError: Unexpected token var*。这是为什么 ？如果我从参数中省略了关键字`var`，那么一切正常。请解释这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:31:58.110

你的问题是两部分的。

首先，您尝试`function`使用关键字声明 a `var`。这是错误的。

正确的方法是

```
function displayCouplet(couplet) {
    //write your body here
} 
```

其次，定义变量不是在函数参数中完成的，而是在函数体中完成的。同样，正确的方法是

```
function displayCouplet(couplet) {
    //write your body here
    var myOtherCouplet = "whateverACoupletIs";
} 
```

编辑：

传递给函数的参数被隐式地创建为函数中的局部变量。

```
function displayCouplet(couplet) {
    //write your body here
    var myOtherCoupletCopy = couplet;
} 
```

函数中需要的新变量应该用 声明`var`，省略`var`关键字将创建一个全局变量。

简而言之，您已经知道了调用此函数。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:32:06.920

你不需要`var`。函数参数隐式成为局部变量。你用`function`not声明一个函数`var`

```
function displayCouplet(couplet) {
   document.write(couplet);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T11:32:03.783

将第一个更改`var`为`function`并删除第二个`var`，然后它应该可以工作！

# windows - Windows Phone：可以使用 :port 打开 URL？

> ID：14256957
> 
> 赞同：6
> 
> 时间：2013-01-10T11:30:45.717
> 
> 标签：windows, mobile

我正在尝试在诺基亚 Lumia 820 (WP8) 上打开 node.js 应用程序。当我在浏览器中输入地址 (mydomain.net:8088) 时出现错误：

> “Internet Explorer Mobile 不支持此类地址，无法显示此页面”。

是否有解决方法或其他方法可以让 WP8 打开该 URL？！我真的不想使用反向代理，因为我正在尝试测试在该端口上运行的 websocket 应用程序。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-04-17T12:32:00.200

*（正如[Luke Puplett 所建议的](https://stackoverflow.com/questions/14256957/windows-phone-possible-to-open-urls-with-port/23133198#comment35367449_14256957)，这是我的回答）*

我的假设是您只是忘记指定协议。所以而不是打字

```
mydomain.net:8088 
```

我建议尝试使用

```
http://mydomain.net:8088 
```

以便浏览器知道如何解释`:`“8088”之前的（即作为端口分隔符，而不是作为协议分隔符）。

# ruby - rbenv、bundler、binstubs……混乱

> ID：14256967
> 
> 赞同：1
> 
> 时间：2013-01-10T11:31:21.413
> 
> 标签：ruby, bundler, rbenv

我正在开发一个应该安装可执行文件的 gem。

目前我有一个文件`bin/myexec`可以完成这项工作。我`gem.executables = 'myexec'`在我的 gemspec 中有这条线，当我构建和安装 gem 时，我可以在`bundle exec myexec`任何地方执行并运行我的代码 - 很好。

我正在使用 rbenv，所以我希望二进制文件有一些轻微的恶作剧，但是当我安装这个 gem 时，我总是需要`bundle exec myexec`而且我不能只是`myexec`. 我已经倾注了其他宝石（如`guard`），看看 .gemspec 是否有一些怪癖，这意味着应该创建一个 rbenv binstub，但我什么也看不到。

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:01:40.103

如果你在另一个项目中使用你的 gem，并且你使用 bundler 安装了它，你必须坚持使用`bundle exec myexec`. 要在您的 gem 系统范围内使用，您应该使用`gem`命令和`rbenv rehash`您的环境来安装它。

我希望这会有所帮助，否则如果您提供更多关于如何使用捆绑器等的信息会很好。

# ajax - 通过ajax（post）向服务器发送大量数据（base64字符串）

> ID：14256968
> 
> 赞同：0
> 
> 时间：2013-01-10T11:31:28.833
> 
> 标签：ajax, post, memory-leaks, base64

我有一个页面，在该页面上我持有一些图像的 base64 表示（每个大约 1mb），现在我通过 ajax 将此数据发布到服务器（contentType 是默认的 - url 编码）。如果我有一个或两个图像要发送，这很好用，但是如果我有超过 2mb 的请求数据，服务器不接受，并且请求参数没有任何内容，所以我增加了我的 tomcat 中的 maxPostSize ，并且它也开始接受更多数据，但我有点担心这是否会造成内存问题，尤其是如果我有很多图像？

我也尝试将 contentType 更改为 multipart/formdata，但它出错了，“说请求被拒绝，因为没有找到多部分边界”。

**编辑**

我想我应该详细说明一下，实际上要求是这样的-用户单击上传链接，他应该能够上传文件，然后他应该能够在页面上看到图像的缩略图（所有这些都无需刷新这页纸）。我为此尝试了以下方法。

1.  使用文件阅读器读取文件，显示缩略图，然后显式触发上传，当用户点击保存时，简单但不跨浏览器，在 IE 中不起作用
2.  允许用户上传文件从服务器发送图像的base64版本，当用户点击保存时，将base64字符串发送回服务器并将其转换回字节数组并保存到数据库。

现在，我有一个屏幕，默认情况下所有记录都是可编辑的，因此单击保存意味着将所有记录的图像字符串发送到服务器，这当然会产生内存问题。

“3”。尚未实现，但考虑先保存其他字段（非图像字段），然后显式逐个保存图像（看起来还可以，但请求数会很高）

等待有人提出第四种方法，希望我已经解释得足够多了

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-01-10T11:33:30.767

免责声明......没有做过这样的事情，但是......

为什么不单独发送每张图片？:)

# iphone - 如何从iphone中的sqlite数据库获取数据计数

> ID：14256969
> 
> 赞同：0
> 
> 时间：2013-01-10T11:31:29.463
> 
> 标签：iphone, objective-c, arrays, sqlite

我有 sqlite 数据库，数据库格式是

表名 = 主项目

```
column 0(M_ID) column 1(M_ISSUE)
M1               i1
M1               i2
M1               i3
M2               x
M2               y 
M2               z
M3               1 
M3               2 
```

在上表中，我需要显示 M_ID 问题计数，（例如：- M_ID（M1）有 3 个问题（i1，i2，i3），如明智的 M2 和 M3。

这是我的源代码

```
for (int i = 0; i < [masterProjIDArray count]; i++)
{
    MySQLite *sqlobj = [[MySQLite alloc] initWithSQLFile:@"myDb"];
    [sqlobj openDb];
    NSString *query = [NSString stringWithFormat:@"SELECT *FROM MASTER_PRJ_DETAILS WHERE M_ID = \'%@\'", [masterProjIDArray objectAtIndex:i]];
    NSLog(@"SQL query:%@", query);
    [sqlobj readDb:query];

    while ([sqlobj hasNextRow])
    {
        NSString *mProjIssuesID = [sqlobj getColumn:1 type:@"text"];

        [masterProjIssueIDArray addObject:mProjIssuesID];
    }
    NSLog(@"issueCount:%@", masterProjIssueIDArray);

    [sqlobj closeDb];
}
[sqlobj release]; 
```

请给我一些关于显示 M_ID 问题个人计数的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:49:45.987

```
 MySQLite *sqlobj = [[MySQLite alloc] initWithSQLFile:@"myDb"];
        [sqlobj openDb];
        NSString *query = [NSString stringWithFormat:@"SELECT *FROM MASTER_PRJ_DETAILS WHERE M_ID = '%@'",M1];

      NSLog(@"SQL query:%@", query);
     NSMutableArray *arrydata= [sqlobj readDb:query];             
       //You got 3 records...

         for (int i = 0; i < [arrydata count]; i++)
         {
               NSMUtableDisctionry *dist=[arrydata objectAtIndex:i];
               NSString *strIsuue=[dist objectforkey:@"M_ISSUE"];
               [masterProjIssueIDArray addObject:strIsuue];

               NSLog(@"issueCount:%@", masterProjIssueIDArray);

  } 
  [sqlobj closeDb];
  [sqlobj release]; 
```

我希望它的工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:35:19.567

NSLog(@"issueCount:%d", [masterProjIssueIDArray count]);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T11:37:41.720

有两种方法可以计数

用数组计数

```
[masterProjIssueIDArray count] 
```

或计入数据库

```
SELECT count(*) FROM MASTER_PRJ_DETAILS 
```

希望对你有帮助

# database - 数据库：带有 SUM 结果的进度条

> ID：14256982
> 
> 赞同：0
> 
> 时间：2013-01-10T11:32:15.653
> 
> 标签：database, progress-bar, sum

我有一个进度条，它以百分比显示我的数据库中的值。我有一个名为 score 的列和一个值为 50 的行。进度条现在是半满的。当我添加一个 50 的新行时，我希望进度条已满，但这不起作用。（它破坏了规模并变成了大约 2000%）有没有办法改变这个查询，所以整个分数的总和 -列会计入进度条吗？`$query = "select * from poeng";`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:33:54.050

```
$query="SELECT SUM(score) AS score FROM poeng" 
```

应该这样做。

# ios - 在 iOS 上使用排队和 Grand Central Dispatch 的一些帮助

> ID：14256987
> 
> 赞同：0
> 
> 时间：2013-01-10T11:32:42.467
> 
> 标签：ios, grand-central-dispatch, nsjsonserialization, queuing

这是我的问题，我正在构建一个带有一些来自服务器的 JSON 返回的 iOS，在这里，没有问题，一切正常。

问题是当我运行程序时，需要很长时间才能将结果解析为`NSMutableArray`：这是日志

```
2013-01-10 12:03:48.627 project[5917:907] <- time begin parser
2013-01-10 12:03:48.755 project[5917:907] <- time finish parser
2013-01-10 12:03:48.756 project[5917:907] <- time begin implement arrays
2013-01-10 12:03:58.522 project[5917:907] <- time finish implement array 
```

如您所见，实现数组**真的很**长。

我知道我必须使用排队和大中央调度来使我的 UI 响应，但我不知道怎么做，你能帮我做吗？

这是我的`viewDidLoad`方法

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    if debug
        NSLog(@"<- time begin parser");
    endif

    NSString *URLStr = @"http://myJsonFile.json";

    NSDictionary *myDictwithReturn = [TOCJSONParser awesomeParserWithStringOfYourJSONFile:URLStr]; //really cool parser, i can put it on gitHub if you want
    NSArray *speakersArray = [myDictwithReturn objectForKey:@"speakers"];

    myArray = [[NSMutableArray alloc]init];

    NSLog(@"<- time finish parser");
    NSLog(@"<- time begin implement arrays");

    for (NSDictionary *myDict in speakersArray) {

        _nextSpeaker = [[TOCSpk alloc]init];
        [_nextSpeaker setName:[myDict objectForKey:@"name"]];
        [_nextSpeaker setBusiness:[myDict objectForKey:@"business"]];
        [_nextSpeaker setDesc:[myDict objectForKey:@"desc"]];
        [_nextSpeaker setTwitter:[NSURL URLWithString:[myDict objectForKey:@"twitter"]]];
        [_nextSpeaker setPicture:[_nextSpeaker retrieveImageFromServer:[myDict objectForKey:@"picture"]]];
        [myArray addObject:_nextSpeaker];
    }

    NSLog(@"<- time finish implement array"); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:38:51.147

我怀疑缓慢来自调用`retrieveImageFromServer`，这让我认为您正在访问网络。如果该访问是同步的，从您在同一语句中分配图像这一事实看来，这肯定会很慢。

您应该检查您的代码并使其在单独的线程上运行或使用异步网络访问。

编辑：

在您对使用 发表评论后`dataWithContentsOfURL`，我的上述假设得到了证实。您可以阅读[这篇关于异步下载图像的方法的 SO 帖子](https://stackoverflow.com/questions/3078765/does-datawithcontentsofurl-of-nsdata-work-in-a-background-thread)，或者您可以使用任何可用的各种网络框架。

可能，最简单的前进路径是使用[SDWebImage](http://github.com/rs/SDWebImage)，这是一个为图像提供异步下载的类，因此您不必为线程管理而烦恼，或者`NSURLConnection`：

> 只需#import UIImageView+WebCache.h 头，并`setImageWithURL:placeholderImage:`从方法中调用`tableView:cellForRowAtIndexPath:` `UITableViewDataSource`方法。从异步下载到缓存管理，一切都将为您处理。

# netezza - Netezza 时间戳失败

> ID：14256989
> 
> 赞同：1
> 
> 时间：2013-01-10T11:32:48.333
> 
> 标签：netezza

我正在尝试将数据库查询为流：

```
select count(distinct(TE_ID)) from TE where LAST_UPDATE_TIME >= '2013-01-08-00:00:00.000000' and LAST_UPDATE_TIME < '2013-01-09-00:00:00.000000' 
```

但是我收到的错误是：

```
 11:25:09  [SELECT - 0 row(s), 0.000 secs]  [Error Code: 1100, SQL State: HY000]  ERROR:  Bad timestamp external representation '2013-01-08-00:00:00.000000' 
```

... 1 条语句执行，0 行受影响，执行/获取时间：0.000/0.000 秒 [0 成功，0 警告，1 错误]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-21T21:11:09.553

您提供的时间戳有一个额外的破折号。

你的：`select cast('2013-01-08-00:00:00.000000' as timestamp)`

应该：`select cast('2013-01-08 00:00:00.000000' as timestamp)`

要控制它可能是一个好主意，像下面的示例一样显式转换：

`to_timestamp('2013-01-08 00:00:00.000000','YYYY-MM-DD HH:MI:SS.US')`

*   HH = 小时
*   MI = 分钟
*   SS = 第二
*   美国 = 微秒

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T13:30:32.033

尝试这个：

```
 select count(distinct(TE_ID)) from TE where LAST_UPDATE_TIME >= '2013-01-08 00:00:00.000000' and LAST_UPDATE_TIME < '2013-01-09 00:00:00.000000' 
```

# php - 这种查询方法有多安全

> ID：14256990
> 
> 赞同：3
> 
> 时间：2013-01-10T11:32:48.063
> 
> 标签：php, mysql

如果我们不能使用 PDO 或 mysqli（出于任何原因），这种方法对于 INSERT 和 SELECT 是否安全？

```
<?php

  if (!empty($_POST[id]) && !empty($_POST[name])) {
    require_once ( 'config.php' );

    // SAFE INTVAL ID
    $id = intval($_POST[id]);

    $connect = mysql_connect("$server", "$user", "$password")
    OR die(mysql_error());
    mysql_select_db("$database", $connect);

    // ESCAPING NAME
    $name = mysql_real_escape_string($_POST[name]);

    $query = "INSERT INTO table (id, name) VALUES ('$id', '$name')";
    $result = mysql_query($query, $connect);

    if (!$result) { echo 'success'; } else { echo 'fail'; }
  }

?> 
```

因为我读过很多次从不使用mysql_query，即使我们小心并及时逃跑是否危险？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T11:36:05.743

据我所知，您的查询非常好。您正在逃避 SQL

```
mysql_real_escape_string($_POST[name]) 
```

这为您的代码增加了额外的安全性。唯一的建议是使用：

```
$_POST['name'] 
```

代替

```
$_POST[name] 
```

因为它会生成 PHP 警告。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:46:49.400

要添加到其他答案，它是“安全的”，因为在查询中不能被利用。不过要注意的一件事是，您相信您的用户会为您提供一个 ID（我假设这里是您的主键）。当然，这意味着您的用户可以覆盖其他记录。

更好的方法是在查询中省略 id 列（及其值），并在创建表时将该列标记为 AUTO_INCREMENT。查询中的任何省略值都将成为其默认值，在这种情况下，*通常*是最后一个值`id`+1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T14:07:47.643

即使你说你不能使用它们，可能是因为它们太复杂了（？），你真的应该做一些研究并了解如何使用它们。我保证一旦你这样做了，你甚至不想回去！:) 我推荐使用 PDO / MySQLi，因为 PHP 5.5 正在贬低 MySQL，您会收到 E_DEPRECIATED 通知。

使用 MySQLi 或 PDO 的准备好的语句意味着您不必转义任何字符串，您只需使用 a 引用每个变量`?`，然后稍后说明是什么数据类型？例如，有`s`字符串。

那时你就不需要使用了`mysql_real_escape_string()`。未来证明您的代码！:)

# java - 使用多个线程将顺序上传并行化到 s3 中？

> ID：14256993
> 
> 赞同：1
> 
> 时间：2013-01-10T11:33:09.263
> 
> 标签：java, multithreading, amazon-s3

同时，我将多个文件上传到 s3，如下所示：

```
public void put(String path, final BufferedImage ... images) {

        for(int i = 0; i < images.length; i++) {
            final BufferedImage image = images[i];
            fileMapper.write(NAMESPACE, new String[] { path, Integer.toString(i) + ".png" }, new FileMapper.Writer() {
                @Override
                public void write(OutputStream out) throws IOException {
                    ImageIO.write(image, "png", out);
                }
            });
        }
    } 
```

我想通过使用多个线程（同时几个图像）上传它。有人可以帮助我并指导我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:16:19.867

您可以使用 Java 5 中的 Executor Framework 或 Java 7 中的 Fork/join 来完成此操作。

请参考以下链接获取示例。

[执行器框架示例](https://stackoverflow.com/questions/13689245/use-threading-to-process-file-chunk-by-chunk/14869544#14869544)

# shell - 对于 ksh 中的变量，for 循环无法按预期工作

> ID：14256995
> 
> 赞同：1
> 
> 时间：2013-01-10T11:33:16.837
> 
> 标签：shell, ksh

以下代码打印 /home/user/dir/* *@(${host}|${hostname})* * 而不是打印目录中的每个文件。

```
#!/usr/bin/ksh

host=foo
hostname=bar 
config_path="/home/user/dir"

search=$config_path/*_@(${host}|${hostname})_*

for file in $search
do                    
  echo $file
done 
```

如果我这样做，它会起作用

```
#!/usr/bin/ksh

host=foo
hostname=bar 
config_path="/home/user/dir"

#search=$config_path/*_@(${host}|${hostname})_*

for file in $config_path/*_@(${host}|${hostname})_*
do                    
  echo $file
done 
```

我有三个问题。

1）为什么当模式分配给变量时它返回字符串？

2）我在很多地方都在使用这种模式，所以最好给它分配一个变量。如何解决这个问题？

3) 在较新版本的 ksh 中是否已修复？

我正在使用 SunOS 服务器 5.10 Generic_147441-23 i86pc i386 i86pc 并通过键入以下命令获取 ksh 版本。

```
$ set -o vi
$ Version M-11/16/88i 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T11:51:25.757

要解决此问题，您可以执行以下操作：

```
for file in $(eval echo $search) 
```