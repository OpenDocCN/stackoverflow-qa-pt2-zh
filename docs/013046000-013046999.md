# StackOverflow 问答 13046000-13046999

# vb6 - 我应该从 VB 的源代码文件夹中编译哪个文件

> ID：13046002
> 
> 赞同：-4
> 
> 时间：2012-10-24T09:04:23.910
> 
> 标签：vb6

我有一个软件的源代码文件夹，它是用 VB 6.0 编写的。

源代码文件夹包含不同的文件。我应该打开和编译哪个文件？

能否请您告诉我在 VB 6.0 的帮助下打开文件的逐步过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T02:47:22.767

当您打开 VB6 时，默认情况下会打开**新项目**窗口。单击**现有**选项卡并浏览到您的源代码文件夹。**Files of type**文件过滤器已设置为默认的 VB6 项目文件类型。

*.mak - 较旧的 VB 项目。我不确定这是什么时候改变的，但 VB3 仍然使用这个扩展。
*.vbp - 默认的 VB6 项目文件扩展名
*.vbg - 一组项目的默认扩展名

如果你有一个 *.vbg 文件，你应该有多个 *.vbp 文件，而 *.vbg 文件可能就是你想要的文件。否则，除非您打开一个非常旧的项目，否则您可能会打开 *.vbp 文件。如果您的源代码文件夹中有多个 *.vbp 文件而没有 *.vbg 文件，请打开名称最接近您尝试将代码编译到的 exe 或 dll 文件的 *.vbp 文件（如果您知道的话） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:33:27.563

在 VB6 IDE 中打开项目文件 (.VBP)。`File`菜单，`Open Project`

建议：阅读一些VB6教程...

# php - 如果单元格值等于 x，如何用图像替换单元格值

> ID：13046004
> 
> 赞同：0
> 
> 时间：2012-10-24T09:04:27.407
> 
> 标签：php

我有一个连接到我的本地主机的表。我正在使用 if 语句来替换一个值。如果用户活动=登录，我想要做的是显示图像。这是我在 PHP 中使用的代码。

```
echo "<td>" . $record['activity']  . "</td>";
if ($record['activity']=='LOGIN') echo "<img src='localhost/on.png' width='24' height='24'/>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:09:26.317

使用这种方式

```
<?php
$default = "<img src='http://localhost/on.png' width='24' height='24'/>";

if (strtolower(trim($record['activity']))!=strtolower('LOGIN')) $default=$record['activity'];
echo "<td>" . $default  . "</td>";

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:09:59.153

图像必须进入`td`标签内部，而不是之后：

```
<?php
  echo sprintf('<td>%s</td>'."\n",
    ($record['activity']=='LOGIN') ? 
      '<img src="localhost/on.png" width="24"height="24"/>' : '' );
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:16:34.730

为每个单元格添加一个类，其值为 ，`$record['activity']`然后使用 CSS 您可以将其添加`localhost/on.png`为背景。

### PHP：

```
echo '<td class="'. $record['activity'] .'">' . $record['activity']  . '</td>'; 
```

### CSS：

```
td.LOGIN{
    background: url(localhost/on.png) no-repeat;
} 
```

这样，如果你有其他`activity`类型，你只需要在你的 CSS 中添加另一个类

# sql - SQL Management Studio 设置（静默安装）

> ID：13046006
> 
> 赞同：3
> 
> 时间：2012-10-24T09:04:28.780
> 
> 标签：sql, settings, ssms, silent-installer

我在配置 sql management studio 时遇到了一些问题。安装没有问题。

配置过程中出现的问题，我需要配置（在选项中）：

*   选项卡文本（文本编辑器 -> 编辑器选项卡和状态栏）
*   结果到网格（查询结果 - > SQL Server）

这些设置存储在哪里？我怎样才能静默安装它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:51:03.350

找到了解决方案，它在此处记录。

[http://social.msdn.microsoft.com/Forums/de-DE/sqlgetstarted/thread/42cd7ff7-60c2-476f-b9ae-580518e845eb](http://social.msdn.microsoft.com/Forums/de-DE/sqlgetstarted/thread/42cd7ff7-60c2-476f-b9ae-580518e845eb)

# hadoop - 使用 hadoop mapreduce 作业从日志文件分析时间范围内的总错误条目发生率

> ID：13046007
> 
> 赞同：3
> 
> 时间：2012-10-24T09:04:29.440
> 
> 标签：hadoop, mapreduce, apache-pig, hdfs, bigdata

我有大量的日志文件存储在 HDFS 中，如下所示：

```
2012-10-20 00:05:00; BEGIN
...
SQL ERROR -678: Error message
...
2012-10-20 00:47:20; END 
```

我想知道某个时间范围内某些 sql 错误代码发生的频率，例如：从 2012 年 10 月 20 日凌晨 0:00 到 2012 年 10 月 20 日凌晨 1:00 发生了多少 678 个 SQL 错误。

由于文件通常被分成几个块，它们可以分布在所有数据节点之间。

这样的查询可能吗？我想使用 hadoop mapreduce Java API 或 Apache Pig，但我不知道如何应用时间框架条件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:10:34.213

HDFS 在将文件拆分为块时不会考虑新行，因此单行可能会被拆分为两个块。但是，MapReduce 确实如此，因此输入文件中的一行将由单个映射器处理。

> 2012-10-20 00:05:00;
> 开始...
> SQL 错误 -678：错误消息
> ...
> 2012-10-20 00:47:20 ; 结尾

如果文件大于块大小，则上述行更有可能位于两个块中并由不同的映射器处理。可以[覆盖](http://wiki.apache.org/hadoop/FAQ#How_do_I_get_each_of_a_job.27s_maps_to_work_on_one_complete_input-file_and_not_allow_the_framework_to_split-up_the_files.3F)[FileInputFormat.isSplitable()](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapred/FileInputFormat.html#isSplitable%28org.apache.hadoop.fs.FileSystem,%20org.apache.hadoop.fs.Path%29)以确保单个日志文件由单个映射器处理，而不是由多个映射器处理。

Hadoop 将使用 KV 对调用用户定义的映射函数，其中 K 是文件偏移量，值是输入文件中的行。需要一个实例变量来存储 BEGIN 时间，以便在稍后调用用户定义的映射函数时检查 END 时间。

这不是一种有效的方法，因为单个映射器正在处理特定的映射文件并且没有分发。

另一种方法是通过将相关行组合成一行来预处理日志文件。这样，日志文件中的相关行将仅由单个映射器处理。

仅供参考，不使用 FileInputFormat.isSplitable() 的更复杂的方法也是可能的，但这需要解决。

必须评估每种方法的优缺点并选择正确的方法。

# java - 当构造函数初始化参数时从泛型类创建实例

> ID：13046012
> 
> 赞同：4
> 
> 时间：2012-10-24T09:04:39.780
> 
> 标签：java, generics

> **可能重复：**
> [如何使用反射在构造函数中创建具有参数的类的实例？](https://stackoverflow.com/questions/6241513/how-to-create-instance-of-a-class-with-the-parameters-in-the-constructor-using-r)

是否有可能发生以及如何发生？我有一堂课`Gerbil`：

```
public class Gerbil {
    private int gerbilNumber;
    public Gerbil(int gn){
        this.gerbilNumber = gn;
    }
    public void hop() {
        System.out.println("It's gerbil number" + this.gerbilNumber + "and it's hopping.");
    }

} 
```

我有一个通用类`TestGenerics`：

```
public class TestGenerics<T> {
    private Class<T> mClass;

    public TestGenerics(Class<T> cls){
        mClass = cls;
    }

    public T get(){
        try{
            return mClass.newInstance();
        }catch(Exception e){
            e.printStackTrace();
            return null;
        }
    }
} 
```

还有一个`main`类：

```
public class HelloWorld {
    public static void main(String[] args) {
        TestGenerics<Gerbil> g = new TestGenerics<Gerbil>(Gerbil.class);
        Gerbil a = g.get();
        a.hop();
    }
} 
```

问题是我需要为的构造函数`Gerbil`提供一个整数值，但不知道如何（如果可能）。否则，如果我留下一个空/默认构造函数，代码工作正常，但是当真实类的构造函数需要传递参数时，是否可以使实例形成一个泛型类？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T09:09:21.697

尝试这个：

```
public T get(){
    try{
        return mClass.getDeclaredConstructor( Integer.TYPE ).newInstance( 10 );
    }catch(Exception e){
        e.printStackTrace();
        return null;
    }
} 
```

# wcf - 有没有办法强制 IIS 调用 CustomServiceHost？

> ID：13046013
> 
> 赞同：0
> 
> 时间：2012-10-24T09:04:41.510
> 
> 标签：wcf, iis-7.5, servicebehavior, service-factory

全部，

我开发了一个 WCF Web 服务并将其托管在 IIS7.5 中。服务行为是 `instanceContextMode=InstanceContextMode.PerSession`，因此 IIS 在第一个请求期间创建一个服务实例，并创建与请求数量一样多的实例。

但是需要在调用服务之前预先缓存一些应用程序数据，即类似于静态初始化。

我不想打扰服务行为属性，但想实现静态初始化。

我确实尝试使用 CustomServiceFactory 并自己承担创建服务工厂实例的工作。但看起来 IIS 也会在第一次请求期间创建服务工厂，或者我不确定这部分。

那么，我想知道当应用程序部署在 IIS 中或在 IIS 重启期间如何创建服务实例/服务工厂实例？

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T08:32:12.283

我们正在使用[AppFabric 的自动启动功能](http://msdn.microsoft.com/en-us/library/ee677285.aspx)来初始化应用程序启动/应用程序池回收时的服务。它在应用程序启动期间调用应用程序内的每个服务一次。

# javascript - 将 JQuery 插件添加到打字稿

> ID：13046015
> 
> 赞同：3
> 
> 时间：2012-10-24T09:04:52.453
> 
> 标签：javascript, jquery, html, typescript

> **可能重复：**
> [在 TypeScript 中使用 jQuery 插件](https://stackoverflow.com/questions/12719529/using-jquery-plugin-in-typescript)

所以我正在用 typescript 制作一个 webapp，我已经用 JavaScript 制作了 webapp，现在我想用 typescript 来做，

在这个 web 应用程序中，我需要一些 jQuery 库，如标准 jQuery 和 jQuerySVG，可以轻松找到 jQuery.d.ts，我可以将它引用到打字稿，问题是 jQuerySVG，我找不到打字稿版本对于 jquery.svg.js（如 jQuery.svg.d.ts）

那么我该如何解决呢？

或者如果我只是在我的html文件的脚本标签中引用jQuery.svg.js，打字稿会起作用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T09:25:44.847

您需要自己生成此文件。通过编写 d.ts 文件来记录您在代码中使用的函数相当简单。
更新：查看 svg 文档，您正在寻找使用 JQuery 选择器的 jquery.svg.d.ts 文件：

```
// from documentation on svg:
//$(selector).svg(loadURL) 
//$(selector).svg(onLoad) 
//$(selector).svg('get') // Retrieve SVG wrapper 
//$(selector).svg('destroy') // Remove SVG functionality 

// this is what you need to put in your jquery.svg.d.ts
interface JQuery {
    svg(loadUrl: string): JQuery;
    svg(x: Function): JQuery;
} 
```

然后，您将能够编写如下语句：

```
$('selector').svg('testLoadUrl');

$('selector').svg(() => {
    // function call
});

$('selector').svg('get'); 
```

# list - 在 Scheme/Racket 中将列表向左旋转

> ID：13046017
> 
> 赞同：6
> 
> 时间：2012-10-24T09:04:58.417
> 
> 标签：list, scheme, racket

试图在方案/球拍中旋转一个列表。例如： (rotate-left '(abc)) 输出 (bca)

这是ze代码！

```
(define (rotate-left LIST)
    (if(null? LIST)'()
        (cons(car LIST)(cons(cdr LIST)'()))))) 
```

不幸的是，这只是输出相同的列表！我敢肯定，这应该是一个简单的解决方法，而且我知道我已经接近了……感谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T14:32:44.757

@laser_wizard 给出的答案不起作用......这是一个正确的实现 - 您必须将第一个替换`cons`为用于在列表*末尾*`append`添加第一个元素。

 *```
(define (rotate-left LIST)
  (if (null? LIST)
      '()
      (append (cdr LIST)
              (cons (car LIST)
                    '()))))

(rotate-left '(a b c))
> '(b c a) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:12:57.757

测试用例！测试用例！此处的检查期望将帮助您了解问题，并帮助其他人了解您在寻找什么。

我觉得我变老了。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-24T09:07:12.003

你有车和 cdr 倒退了！干得好 ：

```
(define (rotate-left LIST)
    (if(null? LIST)'()
        (cons(cdr LIST)(cons(car LIST)'()))))) 
```*

# c# - Winforms：Application.Exit vs Environment.Exit vs Form.Close

> ID：13046019
> 
> 赞同：73
> 
> 时间：2012-10-24T09:05:03.793
> 
> 标签：c#, .net, windows, vb.net, winforms

以下是我们可以退出应用程序的方式：

1.  `Environment.Exit(0)`
2.  `Application.Exit()`
3.  `Form.Close()`

这三种方法有什么区别以及何时使用每种方法？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-10-24T09:08:43.997

正确的方法是`Application.Exit()`. 根据[文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.exit%28v=vs.80%29.aspx)，它终止所有消息循环并关闭所有窗口，从而使您的表单可以执行其清理代码（在 Form.OnClose 等中）。

`Environment.Exit`只会杀死进程。如果某些表单具有例如未保存的更改，它将没有机会询问用户是否要保存它们。资源（数据库连接等）也无法正确释放，文件可能无法刷新等。

`Form.Close`只做它所说的：它关闭一个表单。如果您打开了其他表单（可能不是现在，而是在您的应用程序的某个未来版本中），应用程序将不会终止。

请记住，如果您使用多线程，`Application.Exit()`则不会终止您的线程（因此应用程序将继续在后台工作，即使 GUI 已终止）。因此，您必须采取措施来杀死您的线程，无论是在主函数（即`Program.Main()`）中还是在`OnClose`您的主窗体事件中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T09:12:39.590

他们都很好。但`form.Close()`不会关闭您的应用程序，它会关闭表单，然后主方法返回一个 int（退出代码）。

如果您希望您的应用程序以 exitcodes 退出，请使用 `Environmet.Exit(exitcode)`或返回 main-method 中的 exitcode

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2018-10-05T16:39:27.797

```
Dim forceExitTimer = New Threading.Timer(Sub() End, Nothing, 2500, Timeout.Infinite)
Application.Exit() 
```

**这个方法很完美，让软件先用 application.exit 轻轻关闭，然后再调用暴力的 End 命令强制关闭软件**

# sql-server-2008 - 如何在包含 1000 多条记录的 SQL 表中添加十个新列而不会丢失任何一条记录

> ID：13046020
> 
> 赞同：0
> 
> 时间：2012-10-24T09:05:04.113
> 
> 标签：sql-server-2008

我正在寻找可用于向现有表添加十个新布尔列而不影响数据库中其他任何内容的查询。此外，默认情况下，这些布尔列应默认设置为 true。

寻找最佳实践。

**编辑**

“此外，默认情况下，这些布尔列应默认设置为 true。”

抱歉，我的意思是说对于已经存在的记录，新列的值应该设置为 true，不应该有任何默认值，因为我会自己设置它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T09:08:02.410

只需通过 ALTER 语句添加列：

```
ALTER TABLE MyTable ADD MyColumn bit NULL 
```

或不可为默认值：

```
ALTER TABLE MyTable ADD MyColumn bit NOT NULL default 1 
```

这就是MSSQL。

编辑：

如果要一次添加多个列，可以使用：

```
ALTER TABLE MyTable ADD MyCol1 bit NOT NULL DEFAULT 1, MyCol2 bit NULL
GO 
```

“go”完成了批处理。

# php - 如何估计网站上可能的最大用户数？

> ID：13046027
> 
> 赞同：3
> 
> 时间：2012-10-24T09:05:31.947
> 
> 标签：php, mysql, apache, yii

我正在构建一个以在线竞赛为特色的 PHP-MySQL 网站，我的客户需要估计同时登录的最大可能用户数，该网站可以承受而不会减慢速度。我试图最小化 HTTP 请求的数量，甚至对其进行了非常优化，但我无法给出最大用户数。
我已将 MaxKeepAliveRequests 设置为 0 以禁用最大上限。该站点位于共享托管服务器上。有什么方法可以估计用户数的最大安全限制。
该网站建立在 Yii 框架上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T09:08:58.257

性能估计几乎没有用。

所以不要估计 - 测量。使用[Apache JMeter](http://jmeter.apache.org/)之类的负载测试工具或[Blitz](http://blitz.io/)之类的服务来*实际模拟大量用户*，看看会发生什么。

# algorithm - 模拟许多粒子碰撞的有效方法？

> ID：13046033
> 
> 赞同：15
> 
> 时间：2012-10-24T09:05:49.473
> 
> 标签：algorithm, collision-detection, simulation

我想编写一个模拟许多粒子碰撞的小程序，首先从 2D 开始（稍后我会将其扩展到 3D），以（在 3D 中）模拟向玻尔兹曼分布的收敛，并查看分布如何在 2D 中演变.

我还没有开始编程，所以请不要要求代码示例，这是一个相当普遍的问题，应该可以帮助我开始。这个问题背后的物理原理对我来说没有问题，而是我必须模拟至少 200-500 个粒子，以实现相当好的速度分布。我想实时做到这一点。

现在，对于每个时间步，我将首先更新所有粒子的位置，然后检查碰撞，以更新新的速度向量。然而，这包括很多检查，因为我必须查看每个粒子是否与其他所有粒子发生碰撞。我发现[这篇](https://stackoverflow.com/questions/6811721/efficient-algorithm-for-collisions-in-2d-game)文章或多或少是相同的问题，并且那里使用的方法也是我唯一能想到的。然而，我担心这不会很好地实时工作，因为它会涉及太多的碰撞检查。

所以现在：即使这种方法在性能方面有效（比如 40fps），任何人都可以想出一种方法来避免不必要的碰撞检查吗？

我自己的想法是将板（或 3D：空间）拆分为尺寸至少为粒子直径的正方形（立方体），并实施一种仅在两个粒子的中心在相邻正方形内时检查碰撞的方法在网格中...

我很高兴听到更多的想法，因为我想尽可能多地增加粒子的数量，并且仍然可以进行实时计算/模拟。

**编辑：**所有碰撞都是纯弹性碰撞，没有任何其他力对粒子起作用。我将实施的初始情况由用户选择的一些变量来确定，以选择随机的起始位置和速度。

**Edit2：我在**[这里](http://www.cg.informatik.uni-siegen.de/data/Publications/2004/GH2004.pdf)找到了一篇关于粒子碰撞模拟的很好且很有帮助的论文。希望它可以帮助一些对更深入感兴趣的人。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T09:45:16.620

如果你想一想，在一个平面上移动的粒子实际上是一个 3D 系统，其中三个维度是`x`和`y`时间 ( `t`)。

假设“时间步长”从`t0`到`t1`。对于每个粒子，您可以根据当前粒子的位置、速度和方向创建一个从`P0(x0, y0, t0)`到的 3D 线段。`P1(x1, y1, t1)`

在 3D 网格中划分 3D 空间，并将每个 3D 线段链接到它所穿过的单元格。

现在，应该检查每个网格单元。如果它链接到 0 或 1 个段，则无需进一步检查（将其标记为已检查）。如果它包含 2 个或更多段，则需要检查它们之间的碰撞：计算 3D 碰撞点`Pt`，将两个段缩短到此时结束（并删除它们不再交叉的单元格的链接），创建两个新段根据粒子的新方向/速度从新计算的点开始`Pt`。`P1`将这些新线段添加到网格并将单元格标记为选中。向网格添加线段会将所有交叉的单元格变为未选中状态。

当您的网格中没有更多未选中的单元格时，您已经解决了您的时间步长。

**编辑**

*   对于 3D 粒子，将上述解决方案调整为 4D。
*   在这种情况下，八叉树是 3D 空间划分网格的一种很好的形式，因为您可以“冒泡”选中/未选中状态以快速找到需要注意的单元格。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-24T10:04:33.013

空间划分的一个很好的高级示例是考虑乒乓球比赛，并检测球和桨之间的碰撞。

假设桨在屏幕的左上角，而球在屏幕的左下角附近......

```
--------------------
|▌                 |
|                  |
|                  |
|     ○            |
-------------------- 
```

每次球移动时都不需要检查碰撞。相反，将比赛场地从中间分成两部分。球在场地的左侧吗？（矩形内的简单点算法）

```
 Left       Right
         |
---------|----------
|▌       |         |
|        |         |
|        |         |
|     ○  |         |
---------|----------
         | 
```

如果答案是肯定的，再次分割左侧，这次是水平分割，这样我们就有了左上角和左下角的分区。

```
 Left       Right
          |
 ---------|----------
 |▌       |         |
 |        |         |
-----------         |
 |        |         |
 |     ○  |         |
 ---------|----------
          | 
```

这个球和球拍在屏幕的左上角吗？如果没有，则无需检查碰撞！**只有位于同一分区中的对象才需要进行相互碰撞测试**。通过在矩形内进行一系列简单（且便宜）的点检查，您可以轻松避免进行更昂贵的形状/几何碰撞检查。

您可以继续将空间分成越来越小的块，直到一个对象跨越两个分区。这是 BSP 背后的基本原理（一种在 Quake 等早期 3D 游戏中首创的技术）。网络上有一大堆关于 2 维和 3 维空间划分的理论。

[http://en.wikipedia.org/wiki/Space_partitioning](http://en.wikipedia.org/wiki/Space_partitioning)

在二维中，您通常会使用 BSP 或四叉树。在 3 维中，您通常会使用八叉树。然而，基本原理保持不变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T10:24:37.587

假设在时间 t，对于每个粒子，你有：

```
P   position
V   speed 
```

以及粒子 A(i) 和 A(j) 之间的 N*(N-1)/2 信息数组，其中 i < j；您使用对称性来评估上三角矩阵而不是完整的 N*(N-1) 网格。

```
 MAT[i][j] = { dx, dy, dz, sx, sy, sz }. 
```

这意味着对于粒子 j，粒子 j 的距离由三个分量 dx、dy 和 dz 组成；以及与 dt 相乘的 delta-vee，即 sx、sy、sz。

要移动到瞬间 t+dt，您可以根据所有粒子的速度暂时更新所有粒子的位置

```
px[i] += dx[i]  // px,py,pz make up vector P; dx,dy,dz is vector V premultiplied by dt
py[i] += dy[i]  // Which means that we could use "particle 0" as a fixed origin
pz[i] += dz[i]  // except you can't collide with the origin, since it's virtual 
```

然后检查整个 N*(N-1)/2 数组并初步计算每对粒子之间的新相对距离。

```
dx1 = dx + sx
dy1 = dy + sy
dz1 = dz + sz
DN  = dx1*dx1+dy1*dy1+dz1*dz1  # This is the new distance 
```

如果 DN < D^2 且粒子的直径为 D，则您在刚刚过去的 dt 中发生了碰撞。

然后，您可以准确计算发生这种情况的位置，即计算碰撞的确切 d't，您可以根据旧距离平方 D2 (dx*dx+dy*dy+dz*dz) 和新 DN 来计算：

```
d't = [(SQRT(D2)-D)/(SQRT(D2)-SQRT(DN))]*dt 
```

（以在时间 dt 内覆盖距离 SQRT(D2)-SQRT(DN) 的速度减少从 SQRT(D2) 到 D 的距离所需的时间）。**这使得从粒子 i 的参考系中看到的粒子 j 没有“过冲”的假设**。

这是一个更繁重的计算，但只有在发生碰撞时才需要它。

知道d't，并且d"t = dt-d't，就可以用dx*d't/dt等对Pi和Pj重复位置计算，得到粒子i和j在瞬间的准确位置P碰撞；您更新速度，然后将其整合到剩余的 d"t 并获得时间 dt 结束时的位置。

请注意，如果我们在此处停止，如果发生三粒子碰撞，此方法将中断，并且仅处理两粒子碰撞。

因此，我们不运行计算，而是标记粒子 (i,j) 在 d't 发生碰撞，并且在运行结束时，我们保存发生碰撞的最小 d't 以及发生在谁之间。

即，假设我们检查粒子 25 和 110 并在 0.7 dt 处发现碰撞；然后我们在 0.3 dt 处发现 110 和 139 之间的碰撞。没有早于 0.3 dt 的碰撞。

我们进入碰撞更新阶段，“碰撞”110 和 139 并更新它们的位置和速度。然后对每个 (i, 110) 和 (i, 139) 重复 2*(N-2) 计算。

我们会发现可能仍然与粒子 25 发生碰撞，但现在在 0.5 dt 处，或者说，在 0.9 dt 处可能会在 139 和 80 之间发生另一次碰撞。0.5 dt 是新的最小值，所以我们在 25 到 110 之间重复碰撞计算，然后重复，每次碰撞的算法都会稍微“减速”。

如此实施后，现在唯一的风险是“鬼碰撞”，即粒子在时间 t-dt 距离目标的直径为 D >，而在时间 t*在另一侧*的直径为 D > 。

你只能通过选择一个 dt 来避免这种情况，这样任何粒子在任何给定的 dt 中都不会超过其自身直径的一半。实际上，您可以使用基于最快粒子速度的自适应 dt。鬼扫视碰撞仍然是可能的；进一步的改进是根据任意两个粒子之间的最近距离来减少 dt。

这样，算法在碰撞附近确实会大大减慢，但在不太可能发生碰撞时会大大加快速度。如果两个粒子之间的最小距离（我们在循环期间几乎没有成本计算）使得最快的粒子（我们也几乎没有成本发现）不能在不到 50 dts 内覆盖它，那就是 4900 ％的速度增加就在那里。

无论如何，在无碰撞的通用情况下，我们现在已经完成了五次求和（实际上更像是三十四次，由于数组索引），每个粒子对的三个乘积和几个分配。如果我们包括 (k,k) 对来考虑粒子更新本身，那么到目前为止我们有一个很好的成本近似值。

这种方法的优点是 O(N^2) - 它随粒子数量缩放 - 而不是 O(M^3) - 随所涉及的空间体积缩放。

我希望现代处理器上的 C 程序能够实时管理数万个数量级的粒子。

PS：这实际上与 Nicolas Repiquet 的方法非常相似，包括在多次碰撞的 4D 附近减速的必要性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T09:51:54.097

您可以按照“分而治之”的思路进行思考。这个想法是识别正交参数不相互影响。例如，可以考虑在 2D（3D 中的 3 轴）的情况下沿 2 轴拆分动量分量并独立计算碰撞/位置。识别这些参数的另一种方法可以是将相互垂直移动的粒子分组。因此，即使它们产生影响，沿着这些方向的净动量也不会改变。

我同意上面并没有完全回答你的问题，但它传达了一个基本的想法，你可能会在这里发现它有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T22:29:17.970

直到两个粒子之间（或粒子与墙之间）发生碰撞，积分是微不足道的。这里的做法是计算第一次碰撞的时间，积分到那时，然后计算第二次碰撞的时间，以此类推。让我们定义第一个粒子撞击第一面墙`tw[i]`的时间。`i`尽管您必须考虑球体的直径，但计算起来很容易。

两个粒子之间`tc[i,j]`碰撞时间的计算需要更多的时间，并且从他们的距离的时间研究中得出：`i``j``d`

`d^2=Δx(t)^2+Δy(t)^2+Δz(t)^2`

我们研究是否存在`t`正数，即`d^2=D^2`粒子`D`的直径（或粒子的两个半径之和，如果您希望它们不同）。现在，考虑 RHS 总和的第一项，

`Δx(t)^2=(x[i](t)-x[j](t))^2=`

`Δx(t)^2=(x[i](t0)-x[j](t0)+(u[i]-u[j])t)^2=`

`Δx(t)^2=(x[i](t0)-x[j](t0))^2+2(x[i](t0)-x[j](t0))(u[i]-u[j])t + (u[i]-u[j])^2t^2`

`x`其中出现的新术语定义了坐标的两个粒子的运动定律，

`x[i](t)=x[i](t0)+u[i]t`

`x[j](t)=x[j](t0)+u[j]t`

`t0`是初始配置的时间。设为第 - 个粒子`(u[i],v[i],w[i])`的速度的三个分量。`i`对其他三个坐标做同样的事情并总结，我们得到一个二阶多项式方程`t`，

`at^2+2bt+c=0`,

在哪里

`a=(u[i]-u[j])^2+(v[i]-v[j])^2+(w[i]-w[j])^2`

`b=(x[i](t0)-x[j](t0))(u[i]-u[j]) + (y[i](t0)-y[j](t0))(v[i]-v[j]) + (z[i](t0)-z[j](t0))(w[i]-w[j])`

`c=(x[i](t0)-x[j](t0))^2 + (y[i](t0)-y[j](t0))^2 + (z[i](t0)-z[j](t0))^2-D^2`

现在，有许多标准可以评估是否存在真正的解决方案等……如果您想优化它，您可以稍后评估。在任何情况下，您都会得到`tc[i,j]`，如果它是复数或负数，则将其设置为正无穷大。为了加快速度，请记住它`tc[i,j]`是对称的，并且为了方便起见，您还希望设置`tc[i,i]`为无穷大。

`tmin`然后你取数组`tw`和矩阵的最小值`tc`，并及时积分`tmin`。

您现在减去和 的`tmin`所有元素。`tw``tc`

如果与第 -th 粒子的壁发生弹性碰撞`i`，您只需翻转该粒子的速度，然后仅重新计算`tw[i]`和`tc[i,k]`。`k`

如果两个粒子之间发生碰撞，则重新计算`tw[i],tw[j]`和`tc[i,k],tc[j,k]`。`k`在 3D 中对弹性碰撞的评估并非易事，也许你可以使用这个

[http://www.atmos.illinois.edu/courses/atmos100/userdocs/3Dcollisions.html](http://www.atmos.illinois.edu/courses/atmos100/userdocs/3Dcollisions.html)

关于流程如何扩展，您的初始开销为`O(n^2)`. 那么两个时间步的积分是`O(n)`，撞墙或者碰撞需要`O(n)`重新计算。但真正重要的是碰撞之间的平均时间如何随`n`. 在统计物理学的某个地方应该有一个答案:-)

如果您想根据时间绘制属性，请不要忘记添加更多的中间时间步长。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-30T20:01:36.023

您可以定义粒子之间的排斥力，与 1/（距离平方）成比例。在每次迭代中，计算粒子对之间的所有力，将作用在每个粒子上的所有力相加，计算粒子加速度，然后计算粒子速度，最后计算粒子新位置。碰撞将自然地以这种方式处理。但是处理粒子和墙壁之间的相互作用是另一个问题，必须以其他方式处理。

# xcode - 如何设置 Xcode 以运行 OpenCL 代码，以及如何在构建之前验证内核

> ID：13046035
> 
> 赞同：14
> 
> 时间：2012-10-24T09:05:56.733
> 
> 标签：xcode, opencl

我正在查看 Apple 网站上的官方文档，我看到有一个关于如何在 Xcode 上使用 OpenCL 的快速入门。

也许只有我一个人，但我没有运气构建“hello world OCL”部分提到的代码。

我已经启动了 Xcode 并创建了一个空项目；创建了一个 main.c 和一个 .cl 内核文件，粘贴了 Apple 开发人员网站上的内容，即使添加了目标，我也无法构建任何东西。

AD站点没有要下载的项目，所以我不知道失败的原因（最有可能是我，或者该站点假设了步骤并且没有提及它们）。

我也尝试过 macresearch.org 的示例项目，但它们非常古老，而且第 3 课中的测试项目根本没有运行。

现在，我很确定其他人正在使用 Xcode 运行 OCL 代码，但我找不到任何一个页面（除了前面提到的 macresearch.org），它提供了关于如何使用 OCL 运行 Xcode 项目的清晰设置。有没有人知道如何使用 OCL 和 Xcode 的教程？

我已经购买了 3 本关于 OCL 的书（Gaster 的 OpenCL 异构计算、Scarpino 的 OpenCL in action 和 Munshi 的 OpenCL 编程指南），都没有提到如何设置 Xcode，而它们详细介绍了 Visual Studio 设置甚至 Eclipse 设置.

在一边; 是否有任何应用程序能够在 OCL 应用程序中运行内核代码之前对其进行验证？

提前感谢您提出的任何建议。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-06T00:32:41.613

简短回答：[https ://developer.apple.com/library/mac/#documentation/Performance/Conceptual/OpenCL_MacProgGuide/XCodeHelloWorld/XCodeHelloWorld.html](https://developer.apple.com/library/mac/#documentation/Performance/Conceptual/OpenCL_MacProgGuide/XCodeHelloWorld/XCodeHelloWorld.html)

命令行的长答案：

使用最近的 Xcode（和 Lion 或更高版本），您甚至不需要调用`clCreateProgramWithSource`，只需编写内核并从您的应用程序调用它，但需要一些额外的编译步骤。

我在这里使用默认编译器标志从 Apple 获取 OpenCL Hello World 示例（请参阅[https://developer.apple.com/library/mac/#documentation/Performance/Conceptual/OpenCL_MacProgGuide/ExampleHelloWorld/Example_HelloWorld.html](https://developer.apple.com/library/mac/#documentation/Performance/Conceptual/OpenCL_MacProgGuide/ExampleHelloWorld/Example_HelloWorld.html)）并显示Xcode 会在后台执行的步骤。

为了让您开始，请执行以下操作：

```
/System/Library/Frameworks/OpenCL.framework/Libraries/openclc -x cl -cl-std=CL1.1 -cl-auto-vectorize-enable -emit-gcl mykernel.cl 
```

这将创建 2 个文件，mykernel.cl.h 和 mykernel.cl.c（mykernel.cl.c 完成了将内核加载到应用程序中的所有魔法）。接下来，您需要编译内核：

```
/System/Library/Frameworks/OpenCL.framework/Libraries/openclc -x cl -cl-std=CL1.1 -Os -triple i386-applecl-darwin -emit-llvm-bc -o mykernel.cl.i386.bc mykernel.cl
/System/Library/Frameworks/OpenCL.framework/Libraries/openclc -x cl -cl-std=CL1.1 -Os -triple x86_64-applecl-darwin -emit-llvm-bc -o mykernel.cl.x86_64.bc mykernel.cl
/System/Library/Frameworks/OpenCL.framework/Libraries/openclc -x cl -cl-std=CL1.1 -Os -triple gpu_32-applecl-darwin -emit-llvm-bc -o mykernel.cl.gpu_32.bc mykernel.cl 
```

最后但同样重要的是，构建应用程序本身：

```
clang -c -Os -Wall -arch x86_64 -o mykernel.cl.o mykernel.cl.c
clang -c -Os -Wall -arch x86_64 -o square.o square.c
clang -framework OpenCL -o square mykernel.cl.o square.o 
```

And that's it. You won't see any `clCreateProgramWithBinary` or `clCreateProgramWithSource` in Apple's sample code. Everything is done via mykernel.cl.c generated by `openclc`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-28T22:00:56.567

所以似乎我能够以这种方式部分解决这个问题：

*   创建一个空项目，创建一个main.c文件和一个内核文件

*   创建一个目标作为控制台应用程序

*   在构建设置中，添加 OpenCL 框架（如果添加正确，您将看到它出现在左侧窗格的文件浏览器中）。

*   *指定*内核文件所在的位置，硬编码路径（仅仅说“我的 kernel.cl”是不够的；Xcode 由于某些原因没有得到 cl 文件与主文件在同一个目录中，所以您必须在加载内核文件时指定路径）

我成功使用了这些步骤，同时使用了 Apple 开发人员网站上的示例代码。

我很确定还有其他方法可以做到这一点，但至少这可以帮助像我这样不知道如何开始的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T01:03:04.733

要回答您问题的第二部分，您可以在 Mountain Lion 上运行 OpenCL 编译器，`foo.cl`如下所示：

```
/System/Library/Frameworks/OpenCL.framework/Libraries/openclc \
    -c -Wall -emit-llvm -arch gpu_32 -o foo.bc foo.cl 
```

它将编译`foo.cl`为 LLVM bit-code `foo.bc`。这个二进制文件可以和 一起使用`clCreateProgramWithBinary`，比`clCreateProgramWithSource`. `-arch`的有效值为`i386 x86_64 gpu_32`。

# windows-phone-7 - Vici CoolStorage 便携性：Monotouch、MonoDroid 和 Windows Phone

> ID：13046036
> 
> 赞同：5
> 
> 时间：2012-10-24T09:05:59.587
> 
> 标签：windows-phone-7, xamarin.ios, cross-platform, xamarin.android, vici

跨平台性是使用 Vici CoolStorage 的好理由吗？

理想情况下，您希望编写一次数据模型并在同一应用程序的 MonoTouch、MonoDroid 和 Windows Phone 版本中使用它。在那种情况下，Vici CS 是最好的选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T09:20:49.730

我对其他 ORM 没有太多经验，因此无法将 CoolStorage 与其他选项进行比较。

不过，我可以告诉您，您为 CoolStorage 数据层编写的代码将在 3 个平台上 100% 可重用。只需编写一个单独的数据层库并将其包含在所有 3 个解决方案中。

Vici CoolStorage 使用起来并不复杂，因此您可以在几个小时内轻松试用。没有陡峭的学习曲线。只需为您的表创建匹配的数据类，定义关系并开始 CRUDding :)

任何问题？只需使用 StackExchange 或[支持页面](http://viciproject.com/wiki/support)上提到的支持论坛。

# java - Linux中的Java文件字符编码移动/重命名

> ID：13046038
> 
> 赞同：1
> 
> 时间：2012-10-24T09:06:05.617
> 
> 标签：java, file-io, encoding, utf-8

我有这个重命名文件（或目录）的java代码。当我使用一些特殊字符时，Linux 上会出现问题，它可以在 Windows 上使用这些特殊字符。我尝试的方式是这样的：在windows中

*   我创建了一个名为“326½_6”的目录

*   我构建了一个 jar 文件，并直接在 windows cmd（或 linux shell）中调用它（java -jar），第一个参数是上面的目录，第二个参数是新目录的路径。这有效

然后我使用 SFTP (WinSCP) 将目录传输到 Linux 服务器。我重复上面的步骤，但它不起作用。我得到这个输出：

移动 /home/user/testarea/326ï¿½_6/ 到 /home/user/testarea/test5/

--- 无法执行重命名 -------

有没有办法在 Linux 机器上完成这项工作？？？

编码：

```
 public static void main(String [] args) {
    String source = args[0];
    String dest = args[1];
    System.out.println(" - Moving " + source + " to " + dest);

    File sourceFile = new File(source);
    File destinationFile = new File(dest);

    if (!sourceFile.renameTo(destinationFile)) {
        System.out.println("--- could not perform rename -------");
    }

    System.out.println("Finished moving");
 } 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:09:08.247

看起来 Linux 上的 Java 期望文件和目录名称以 UTF-8 编码，但是当 WinSCP 创建目录时，它会将名称编码为 latin1 或类似的名称，并且新名称在 UTF-8 中无效。显然这是 WinSCP 的默认行为，[较新的版本默认使用 UTF-8](http://winscp.net/eng/docs/faq_utf8)。

使 Java 使用与 SFTP 在创建目录时使用的相同编码的简单解决方案。这是通过在运行 JVM 时更改语言环境来完成的：

```
LANG=en_US.iso8859_1 java -jar YourProgram.jar 
```

但是，必须存在语言环境 en_US.iso8859_1 才能使其正常工作。您可能能够从您的发行版的软件包存储库中安装新的语言环境。如果没有，您可以在我的博客中阅读有关[如何使用特定编码定义语言环境](http://jonisalonen.com/2012/java-and-file-names-with-invalid-characters/)（以及一般有关此文件名问题）的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:45:49.603

可能是文件源不存在。在 renameTo 之前检查存在

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:43:49.850

renameTo() 根本不可靠，尤其是在 windows 中，但在类 unix 系统中也是如此。我建议执行一些检查，创建一些“重试”机制并查看这篇[文章](https://stackoverflow.com/questions/1000183/reliable-file-renameto-alternative-on-windows)。你能指定你使用的是什么编码（通过查看我认为是 UTF-8 的标签）以及你如何启动你的程序？

# objective-c - Objective C - 从 NSString 到 Int 的类型转换

> ID：13046047
> 
> 赞同：22
> 
> 时间：2012-10-24T09:06:30.827
> 
> 标签：objective-c, casting

我有这段 Objective C 代码，我将 a`NSString`转换为`int`：

```
NSString *a=@"123abc";
NSInteger b=(int) a;
NSLog(@"b: %d",b); 
```

并`NSLog`产生此输出：

```
b: 18396 
```

谁能向我解释为什么会这样？

我在印象类型下将字符串转换为整数会从字符串中获取数值。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-24T09:09:13.617

你在那里有指向`NSString`对象的指针的整数值。要将字符串解析为整数，您应该这样做：

```
NSString *a = @"123abc";
NSInteger b = [a integerValue]; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-24T09:09:22.740

要获得数值，请使用：

```
int val = [stringObj intValue]; 
```

或为`NSInteger`：

```
NSInteger val = [stringObj integerValue]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-24T09:07:59.910

当您将对象转换为整数时，您将获得指向内存地址的指针。您可以调用来`[a integerValue]`获取字符串的整数值。

此外，在铸造时最好使用`NSInteger`instate of `int`。因为当使用 64 位操作系统时，a`NSInteger`将是 64 位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T09:14:24.787

或者使用 Objective-C 文字语法：

```
@([a intValue]); 
```

# jquery-ui - jQuery 选项卡 Sqeezable 选项卡，如浏览器（FF、Chrome、Safari）

> ID：13046048
> 
> 赞同：2
> 
> 时间：2012-10-24T09:06:33.457
> 
> 标签：jquery-ui

I am using jQuery tabs but my requirement is as tabs increase it should squeeze to available space like Firefox, chrome when tabs count increase more then 9, 10 all tabs squeeze a little & re-adjust accordingly, all next tabs will be smaller by doing这我可以在我的应用程序上打开更多选项卡。希望我能解释一下我的观点谢谢。

# php - Excel 表格中的 SQL 查询或 PHP 查询

> ID：13046049
> 
> 赞同：1
> 
> 时间：2012-10-24T09:06:38.173
> 
> 标签：php, sql, cs-cart

我在南非的供应商不使用实时 xmls 作为他们的库存清单。

我们每个供应商的库存清单（excel pricelists）都有非常不同的布局。我目前进行更新的唯一方法是将代码和价格复制到新的 excel csv 表中并导入。然后它无法提取的产品代码将自动放入“产品”类别中，仅包含代码和价格。其余的我手动完成。添加简短描述、产品名称和正确的类别。

反正有没有让这更自动化。我们目前有超过 15 个不同的价格表和超过 30k 的产品。

我希望它根据产品名称自动从谷歌获取产品图像。自动将其添加到正确的类别？我假设我必须设置条件，例如以 MO- 开头的代码到计算机///外围设备///鼠标。还是让它要求我设置在产品代码或简短描述中查找的条件，然后它会做剩下的事情？

我还希望当价格表中缺少产品时，它会被隐藏。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:23:24.423

好吧，PHP 拥有您需要的所有工具：

1.  [数据库接口](http://php.net/manual/en/refs.database.php)
2.  [获取网页的内容](http://php.net/manual/en/function.file-get-contents.php)（希望您可以通过 Google 搜索以外的其他方法获取图像，因为那是不可靠的：您怎么知道您得到了正确的结果？但是有很多人使用 PHP 搜索的示例谷歌——只需搜索互联网）。
3.  [编写 Excel 文件](http://phpexcel.codeplex.com/)。

或者在 Perl 中，我的首选工具：[`DBI`](http://search.cpan.org/dist/DBI/DBI.pm)、[`LWP::Simple`](http://search.cpan.org/~gaas/libwww-perl-6.04/lib/LWP/Simple.pm)和[`Spreadsheet::WriteExcel`](http://search.cpan.org/dist/Spreadsheet-WriteExcel/lib/Spreadsheet/WriteExcel.pm).

如果您有其他选择，我不会尝试在 Excel 中使用 VBA 执行此操作。根据我的经验，这会导致反复将头撞到墙上。不过，也有可能这样做。

# c# - 如何在浏览器中查看母版页

> ID：13046052
> 
> 赞同：5
> 
> 时间：2012-10-24T09:06:46.217
> 
> 标签：c#, asp.net, .net, master-pages

刚刚学习母版页，我有一个包含内容的母版页。但是如何在浏览器中查看页面.master？它的网址是什么？

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="MasterPage.master.cs" Inherits="MasterPage" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <asp:ContentPlaceHolder id="head" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server">

        </asp:ContentPlaceHolder>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T09:09:07.723

**不，您不能在浏览器中查看母版页 (.master)** - 因为它`not an actual page`只是一个包含 .aspx 页面内容的控件。

当用户请求内容页 (.aspx) 时，他们与母版页 (.master) 合并以生成将母版页的布局与内容页中的内容相结合的输出。

单个母版页定义了您希望应用程序中所有页面（或一组页面）的外观和标准行为。

![在此处输入图像描述](../Images/826f7b11294315e52a613a46cfbe13a2.png)

有关更多信息，请阅读 - [ASP.NET 母版页](http://msdn.microsoft.com/en-us/library/wtxbf3hh%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:09:13.923

可以单独在aspx页面中使用，直接查看aspx页面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:11:23.123

您不能直接查看母版页。它更像是页面应该是什么样子的外壳\模板。

但是，您可以使用此处的母版页创建一个新页面，并调用该页面的 Url。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T09:11:26.080

您无法在浏览器中查看母版页。它不是可呈现的页面。

母版页由具有 @Page 指令的 Master 属性的常规 .aspx 页引用。渲染过程将页面内容和master合并，结果返回给客户端，但URL是页面的。

如果您希望看到呈现的母版页，请创建一个使用该母版的空页面，然后在浏览器中查看该页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T21:24:19.350

运行此 Default2.aspx 页面以将此页面内容显示到母版页中。

```
<%@ Page Title="" Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true" CodeFile="Default2.aspx.cs" Inherits="Default2" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
    This Is Your Master Page Content....
</asp:Content> 
```

# java - 在 tomcat 中重新部署新版本的 .war 时更改属性值

> ID：13046063
> 
> 赞同：2
> 
> 时间：2012-10-24T09:07:39.477
> 
> 标签：java, tomcat, web-applications, properties, jvm-arguments

在我使用 tomcat 作为应用程序服务器的 Java Web 应用程序中，我对在部署/重新部署应用程序时将不同的值传递给特定属性的应用程序感兴趣。
我知道有几种方法：

1.  一种是通过 JVM 选项传递给 setenv.sh 文件中设置的 tomcat。据我所知，每次重新部署都需要重新启动服务器。
2.  在属性文件中指定属性值。需要在文件中手动设置值，并在每次重新部署相同版本的应用程序之前重建应用程序。
3.  使用 spring 时，在 applicationContext.xml 文件中定义的一些 bean 中指定属性值。再次需要手动方法和应用程序重建。
4.  在数据库中存储配置。这要求我们知道存储此类配置的数据库的连接属性。

现在，如果我计划在每次部署/重新部署应用程序时更改某些属性变量，例如 IP 地址、连接数、端口号或其他一些此类变量，我应该遵循什么策略？是否有一种流行的、被广泛接受的方式将此类属性值传递给部署在 tomcat 中的 Web 应用程序？如果我将属性值作为 JVM 选项传递，是否需要重新启动 tomcat 服务器？

或者有没有其他通用的方式来配置我上面没有提到的部署参数？我更喜欢可以轻松自动化以编程方式完成的过程（例如传递 JVM 选项），而不是在每次部署之前手动设置属性（例如设置属性文件）。它也不应该要求每次在重新部署之前都重新构建相同的版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:35:49.393

我认为 JNDI 的发明正是为了您所要求的目的：

*   您不必修改 JVM 选项
*   您不必每次更改这些选项时都重新启动 Tomcat
*   你不必重建你的应用程序
*   您可以从外部/以编程方式更改这些值。我相信 Tomcat 允许这样做，或者即使不允许 - 编写类似可设置 MBean 之类的东西应该不难，它可以通过 JMX 设置相关属性

# php - 用于比较装甲套装的复杂阵列

> ID：13046072
> 
> 赞同：1
> 
> 时间：2012-10-24T09:07:56.403
> 
> 标签：php, arrays, jagged-arrays

也许我有一个愚蠢的时刻，但我似乎无法在我的脑海中解决这个问题。

我会尝试解释：-

我有三套。每组包含 6 个对象。我需要一个循环（或一系列嵌套循环）来产生这些集合的每个组合。

这是一个游戏，我正在尝试编写一个脚本来比较盔甲套装 - 我知道很伤心。集合数组如下所示：-

```
class => array(
  set1 => array(
    hat item => array(stats)
    glove item => array(stats)
    ...
  set2 => array(
    hat item => array(stats)
    ...
  set3 => array(
    ...

) 
```

这可能比我想象的要简单得多（或者困难得多？）。

欢迎提出想法！

谢谢，鲁。

编辑：-

好的，这是一个数组样本，我去掉了很多额外的统计数据，只为每一块留下一个：-

```
$setinfo = array(
    'rk' => array(
        'set1' => array(
            'hat' => array(
                'will' => 114,
            ),
            'shoulders' => array(
                'will' => 78,
            ),
            'shirt' => array(
                'will' => 78,
            ),
            'gloves' => array(
                'will' => 78,
            ),
            'trousers' => array(
                'will' => 78,
            ),
            'boots' => array(
                'will' => 114,
            ),
        ),
        'set2' => array(
            'hat' => array(
                'will' => 78,
            ),
            'shoulders' => array(
                'will' => 78,
            ),
            'shirt' => array(
                'will' => 114,
            ),
            'gloves' => array(
                'will' => 78,
            ),
            'trousers' => array(
                'will' => 114,
            ),
            'boots' => array(
                'will' => 78,
            ),
        ),
        'set3' => array(
            'hat' => array(
                'will' => 78,
            ),
            'shoulders' => array(
                'will' => 114,
            ),
            'shirt' => array(
                'will' => 78,
            ),
            'gloves' => array(
                'will' => 114,
            ),
            'trousers' => array(
                'will' => 78,
            ),
            'boots' => array(
                'will' => 78,
            ),
        ),
    )
); 
```

从这个例子中（稍后我会担心比较其他统计数据），“理想”的单品是 set1 的帽子和靴子，set2 的衬衫和裤子，以及 set3 的手套和肩膀。

我的查询是如何最好地制定一个循环，该循环可以为每个排列生成一个“结果”数组，以便稍后进行比较。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:44:32.690

这是[这个人](http://www.php.net/manual/en/ref.array.php#54979)的一个实现：

```
function array_cartesian_product($arrays)

{
    $result = array();
    $arrays = array_values($arrays);
    $sizeIn = sizeof($arrays);
    $size = $sizeIn > 0 ? 1 : 0;
    foreach ($arrays as $array)
        $size = $size * sizeof($array);
    for ($i = 0; $i < $size; $i ++)
    {
        $result[$i] = array();
        for ($j = 0; $j < $sizeIn; $j ++)
            array_push($result[$i], current($arrays[$j]));
        for ($j = ($sizeIn -1); $j >= 0; $j --)
        {
            if (next($arrays[$j]))
                break;
            elseif (isset ($arrays[$j]))
                reset($arrays[$j]);
        }
    }
    return $result;
}
$combinations = array_cartesian_product($sets); 
```

这是一个简单的测试用例： http: [//phpfiddle.org/main/code/m1i-w7m](http://phpfiddle.org/main/code/m1i-w7m)

# objective-c - UIImagePickerController 在关闭后继续“录制”视频

> ID：13046075
> 
> 赞同：2
> 
> 时间：2012-10-24T09:08:16.233
> 
> 标签：objective-c, ios, xcode, uiimagepickercontroller

我遇到了一些奇怪的行为`UIImagePickerController`，我用它来捕捉视频。在用户录制并选择视频并关闭视图控制器后，点击 my 之一`UITextField`会使应用程序再次进入“录制”模式，但不`UIImagePickerController`可见。所发生的一切是音量摇杆变成停止/录制按钮（按下时它会播放相应的铃声），键盘停止“点击”（就像在录制过程中一样），当我关闭应用程序时，我可以看到红色的**录音**状态栏闪烁片刻。

同样，`UIImagePickerController`此时不存在，但该应用程序的行为就好像它正在录制某些东西一样。然而，按下音量键来实际“录制”一些剪辑并不会将它们保存在库中（与我的`didFinishPickingMediaWithInfo`方法中发生的情况相反）。

这是我初始化选择器的方法：

```
self.cameraController = [[UIImagePickerController alloc] init];
self.cameraController.sourceType = UIImagePickerControllerSourceTypeCamera;
self.cameraController.mediaTypes = @[(NSString*)kUTTypeMovie];
self.cameraController.videoQuality = UIImagePickerControllerQualityType640x480;
self.cameraController.delegate = self; 
```

这是我的`didFinishPickingMediaWithInfo`（它与另一个`UIImagePickerController`用于用户照片库的共享，因此有一些不相关的逻辑）：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    // Dismiss the picker
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad && [picker isEqual:self.photoLibraryController])
        [self.photoLibraryPopover dismissPopoverAnimated:YES];
    else
        [picker dismissModalViewControllerAnimated:YES];

    // Save the media URL
    if (info[UIImagePickerControllerMediaURL])
        [self.uploadDataDictionary setObject:info[UIImagePickerControllerMediaURL] forKey:@"mediaURL"];

    // Identify the source of the media (camera or library)
    [self.uploadDataDictionary setObject:picker forKey:@"sourcePicker"];

    // If it comes from the camera picker, save the video in the library
    NSString *videoPath = [info[UIImagePickerControllerMediaURL] path];
    if ([picker isEqual:self.cameraController] && UIVideoAtPathIsCompatibleWithSavedPhotosAlbum(videoPath)) {
        UISaveVideoAtPathToSavedPhotosAlbum(videoPath, self, nil, nil);
    }

} 
```

以及触发上述怪异的文本字段的点击反应：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField {
    float textFieldPosition = textField.frame.origin.y - 20;
    [self.formView setContentOffset:CGPointMake(0, textFieldPosition) animated:YES];
} 
```

我在应用程序的那个部分还有一堆其他按钮和一个文本视图，但它们都没有让它进入这种奇怪的“背景记录”模式。

另外，很明显，我在这个项目中使用了 ARC。

知道问题的原因是什么吗？

# svg - AngularJS - 如何触发 bindHtml 更新指令？

> ID：13046084
> 
> 赞同：0
> 
> 时间：2012-10-24T09:08:47.953
> 
> 标签：svg, angularjs, jquery-svg

我有一个我在这里面临的问题的例子：http: [//jsfiddle.net/Siyfion/JxLhX/](http://jsfiddle.net/Siyfion/JxLhX/)

本质上，每当用户单击列表中的文档时，我想使用 jQuerySVG 将一些功能附加到 SVG 文档（onClick 等）。

我知道 DOM 操作不应该在控制器函数中完成，所以我尝试创建一个指令以允许我连接到绑定更新，但是当我期望它时它也不会触发（仅在页面加载 atm 上一次）。

`<div>`包含绑定到 SVG的标记具有`id='drawContainer'`并且也是我附加指令的位置：

```
<div ng-app="module" class="container-fluid">
  <div class="row-fluid" ng-controller="SheetsCtrl">
    <div class="span3 well">
      <input type="text" ng-model="query" />
      <ul class="nav nav-list">
        <li class="nav-header" ng-bind-template="Available Labels ({{getLabelCount()}})">Available Labels</li>
        <div id="sheetList">
          <li ng-repeat="label in labels | filter:query">
            <span>
              <button class="btn btn-mini btn-danger" ng-click="removeLabel(label)">
                <i class="icon-remove-sign"></i>
              </button>
              <a href="#" ng-click="getSVG(label)">{{label.Name}}</a>
            </span>
          </li>
        </div>
      </ul>
    </div>
      <div class="span9" id="drawContainer" bind-to-svg ng-bind-html-unsafe="selectedLabelDesign"/>
  </div>
</div> 
```

但是我不确定这是正确的做事方式，这里是带有占位符的指令，用于 jQuerySVG 代码

```
angular.module('module', []).directive('bindToSvg', function() {
    return {
        link: function(scope, element, attrs, ctrl) {
            var svgDoc = element.children[0];
            alert('SVG Changed! (Or not, as the case may be)');
            // Attach jQuerySVG to svgDoc and register events.
        }
    };
});

function SheetsCtrl($scope, $http) {

    $scope.labels = [];
    $scope.selectedLabelDesign = null;

    $scope.labels[0] = {
        SVG: '<svg xmlns="http://www.w3.org/2000/svg" version="1.1"><circle cx="100" cy="50" r="40" stroke="black" stroke-width="2" fill="red" /></svg>',
        Name: 'Circle'
    };

    $scope.labels[1] = {
        SVG: '<svg xmlns="http://www.w3.org/2000/svg" version="1.1"><rect width="300" height="100" style="fill:rgb(0,0,255);stroke-width:1;stroke:rgb(0,0,0)" /></svg>',
        Name: 'Rectangle'
    };

    $scope.getLabelCount = function() {
        return $scope.labels.length;
    };

    $scope.getSVG = function(label) {
        var index = $scope.labels.indexOf(label);
        $scope.selectedLabelDesign = $scope.labels[index].SVG;
    };

    $scope.removeLabel = function(label) {
        var index = $scope.labels.indexOf(label);
        $scope.labels.splice(index, 1);
    };
}​ 
```

如果有人可以在正确的方向上给我任何指示，那就太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:22:56.013

我不确定当它发生变化时你希望它做什么，但你可以简单地使用 $watch 来触发你需要做的任何事情。

```
$scope.$watch('selectedLabelDesign', function(value) {
    alert('SVG changed to: ' + value);
}); 
```

可以在您的控制器或指令中设置此手表。你的来电。

# c# - 不能等待异步 lambda

> ID：13046096
> 
> 赞同：72
> 
> 时间：2012-10-24T09:09:20.323
> 
> 标签：c#, task-parallel-library, async-await, async-ctp

考虑到这一点，

```
Task task = new Task (async () =>{
    await TaskEx.Delay(1000);
});
task.Start();
task.Wait(); 
```

调用 task.Wait() 不会等待任务完成并立即执行下一行，但如果我将异步 lambda 表达式包装到方法调用中，代码将按预期工作。

```
private static async Task AwaitableMethod()
{
    await TaskEx.Delay(1000);    
} 
```

然后（根据 svick 的评论更新）

```
await AwaitableMethod(); 
```

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-10-24T10:00:10.553

在您的 lambda 示例中，当您调用 时`task.Wait()`，您正在等待您构造的新任务，而不是它返回的延迟任务。要获得所需的延迟，您还需要等待生成的任务：

```
Task<Task> task = new Task<Task>(async () => {
    await Task.Delay(1000);
});
task.Start();
task.Wait(); 
task.Result.Wait(); 
```

您可以避免构建一个新任务，而只需处理一个任务而不是两个：

```
Func<Task> task = async () => {
    await TaskEx.Delay(1000);
};
task().Wait(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-24T10:31:46.433

你需要使用`TaskEx.RunEx`.

它通过在内部等待内部任务来原生支持运行`async`方法。`TaskPool`否则你会遇到你面临的问题，只有外部任务在等待，显然会立即完成，留下一个仍然需要等待的任务，或者在你的情况下（甚至更糟）一个无效的 lambda，它不能等待着。

或者，您可以等待任务两次，前提是您正确构建了外部任务（目前您不是）。

当前代码（固定）：

```
Task task = new Task<Task>(async () =>{
    await TaskEx.Delay(1000);
});

task.Start();
var innerTask = await task;
await innerTask; 
```

使用 TaskEx.RunEx：

```
Task task = TaskEx.RunEx(async () =>{ // Framework awaits your lambda internally.
    await TaskEx.Delay(1000);
});

await task; 
```

# ruby-on-rails - ruby on rails 如何将文件添加到文件夹以供直接使用

> ID：13046103
> 
> 赞同：0
> 
> 时间：2012-10-24T09:09:36.837
> 
> 标签：ruby-on-rails, file, upload, directory

我想在我的网站中`.c files` **手动**添加一些内容，以便其他人能够通过浏览器中的直接链接查看它们...

我在哪里添加这些文件以及如何在视图文件中链接到它们？

我是否只是在资产或网站的根目录中创建一个文件夹并手动链接

`http://www.mysite.com/path/to/file`?

是否有可能使这种使用路线**像**

`this_route_path()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:18:18.490

如果您将文件放在`public`rails 项目的目录中，它将可供世界使用。如果配置好，前端服务器（Web 服务器）可以直接为它们提供服务，而无需加载 Rails 堆栈。

例如，如果您保存`test.txt`在`public`目录中，您可以像访问它一样访问它`http://127.0.0.1:3000/test.txt`。您可以在公共目录中创建自己的目录结构并相应地格式化 URL。

# arrays - extJs：属性网格可以自定义渲染数组值吗？

> ID：13046105
> 
> 赞同：0
> 
> 时间：2012-10-24T09:09:43.160
> 
> 标签：arrays, extjs, propertygrid, renderer

我尝试将字段值设置为数组类型的值，但网格无法显示该行。我的测试代码如下所示：

```
Ext.onReady(function()
{
    new Ext.grid.property.Grid(
    {
        customRenderers:{Test:function(v)
        {
            return Ext.Array.sum(v);
        }},
        source:{Test:[1,2,3]},
        renderTo:Ext.getBody()
    });
}); 
```

但如果字段值是其他类型，则显示该行。

```
Ext.onReady(function()
{
    new Ext.grid.property.Grid(
    {
        customRenderers:{Test:function(v)
        {
            return Ext.Array.sum(v);
        }},
        source:{Test:6},
        renderTo:Ext.getBody()
    });
}); 
```

属性网格可以自定义呈现数组值吗？

感谢您提前提供任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:21:24.413

您可以提前在函数中执行此操作：

```
Ext.onReady(function()
{
    new Ext.grid.property.Grid(
        {
            customRenderers:{Test:function(v)
            {
                return Ext.Array.sum(v);
            }},
            source: sumArraysInObject({Test:[1,2,3]}),
            renderTo:Ext.getBody()
        });
});

function sumArraysInObject(obj) {
    for (var key in obj) {
        if (obj.hasOwnProperty(key) && Object.prototype.toString.call(obj[key]) === "[object Array]") {
            var sum = 0;
            for (var i = 0, l = obj[key].length; i < l; i++) {
                sum = sum + obj[key][i];
            }
            obj[key] = sum;
        }
    }
    return obj;
} 
```

# ios - 在 iPad 设备上运行 iOS 应用程序

> ID：13046106
> 
> 赞同：0
> 
> 时间：2012-10-24T09:09:43.987
> 
> 标签：ios, xcode, ipad

我是 iOS 新手，我正在使用 VMware 运行 MAC OS。我在 xcode 4.5 中开发了一个简单的 iOS 应用程序，它在模拟器中运行良好。

我可以在 iPad 设备上运行和测试我的应用程序吗？如何 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:13:00.090

您需要成为 iOS 开发者计划的一部分，并且应该拥有开发者资料和证书才能在设备中安装应用程序。从苹果[检查这个清单。](https://developer.apple.com/devcenter/ios/checklist//)还要检查这个以了解[开发人员程序。](https://developer.apple.com/programs/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:11:10.510

你需要有苹果开发者证书。

欲了解更多信息，请[访问此](https://developer.apple.com/devcenter/ios/index.action)。

# ios - SIGnalR iOS 客户端为 connectionId 和协议版本返回 null

> ID：13046109
> 
> 赞同：1
> 
> 时间：2012-10-24T09:09:54.940
> 
> 标签：ios, signalr, signalr-hub

我正在尝试将我的 iOS 应用程序集成到我们在本地网络上的开发服务器上设置的 MVC3（框架 4）SignalR 程序。为此创建的网站在我们的网络中运行良好。

但是，当尝试使用 SignalR iOS 客户端时，会出现以下错误：

```
 *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Incompatible Protocol Version' 
```

在 SRConnection.m 中使用了一些 NSLog() 后，我发现当应用程序协商成功但没有获得 connectionId 或协议版本时，这些返回 null

```
 negotiation was successful NegotiationResponse: ConnectionId=(null) Url=/signalr/signalr ProtocolVersion=(null) 
```

我正在应用程序中设置连接：didFinishLaunchingWithOptions：appDelegate 的功能。这就是我设置连接的方式：

```
 SRHubConnection *connection = [SRHubConnection connectionWithURL:
                               @"http://mark-dev"];
    myHub = [connection createProxy:@"ChatHub"];
    [connection start]; 
```

我还查看了服务器上的连接日志。它正在接收请求并每次返回状态码 200..

我为此使用的连接代码已关闭[http://chrisrisner.com/iOS-and-Windows-Azure-Communication-using-SignalR](http://chrisrisner.com/iOS-and-Windows-Azure-Communication-using-SignalR) ..

我尝试在示例中使用 url 和 hub 名称，并且可以与 connectionId 和协议版本协商，如下所示：

```
 negotiation was successful NegotiationResponse: ConnectionId=48a6fcca-429f-4d3e-b374-8f10d6889fe0 Url=/signalr/signalr ProtocolVersion=1.0 
```

这也在 iOS sdk6 上的 iPad Simulator 中，部署目标为 iOS 5.1

对此的任何帮助都会很棒

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:44:35.777

事实证明，尽管我出于某种原因包含`SignalR`了 NuGet 没有下载的参考`SignalR.Hosting.AspNet`，`SignalR.Hosting.Common`并且在手动添加这些之后它工作正常。

不完整的下载一定是侥幸，因为我在另一个项目上尝试过它并完全下载。

# c# - 我可以将使用枚举的方法调用组合成泛型吗？

> ID：13046111
> 
> 赞同：1
> 
> 时间：2012-10-24T09:10:01.400
> 
> 标签：c#

我有以下方法调用：

```
var types = CityTypeExt.GetOptions();
var statuses = CityStatusExt.GetOptions(); 
```

以及以下方法：

```
public static class CityTypeExt
{
    public static SelectList GetOptions()
    {
        var values = EnumUtilities.GetSpacedOptions<CityType>();
        var options = new SelectList(values, "Value", "Text");
        return options;
    }
}

public static class CityStatusExt
{
    public static SelectList GetOptions()
    {
        var values = EnumUtilities.GetSpacedOptions<CityStatus>();
        var options = new SelectList(values, "Value", "Text");
        return options;
    }

} 
```

有没有办法可以制作一个结合 CityTypeExt 和 CityStatusExt 的通用方法？

请注意，CityType 和 CityStatus 是枚举。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T09:12:27.410

试试这个：

```
public static class CityExt
{
    public static SelectList GetOptions<T>() where T : struct, IConvertible

    {
        var values = EnumUtilities.GetSpacedOptions<T>();
        var options = new SelectList(values, "Value", "Text");
        return options;
    }

}

var types = CityExt.GetOptions<CityType>();
var statuses = CityExt.GetOptions<CityStatus>(); 
```

# achartengine - AchartEngine 的 GraphicalView 轴

> ID：13046112
> 
> 赞同：1
> 
> 时间：2012-10-24T09:10:14.003
> 
> 标签：achartengine

我有一个实时更新的图形视图元素。我从一开始就知道我的价值观会保持多久。因此，我希望我的 Y 轴设置为从一开始就显示整个间隔。此时，Y 轴会根据到达的值发生变化。例如，如果我的值的间隔为 (0, 10) 但我只收到 Y 等于 3 的点，则 Y 轴的最大值将为 3，而不是我希望它为 10。

有什么建议吗？我知道我必须设置 XYMultipleSeriesRender 的一些参数，但是哪一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:13:28.693

这将满足您的需要：

```
// TODO: provide your own values here
renderer.setYAxisMin(0);
renderer.setYAxisMax(10); 
```

# c# - 将 struct 与 null 进行比较时出现错误的编译器警告

> ID：13046115
> 
> 赞同：11
> 
> 时间：2012-10-24T09:10:27.483
> 
> 标签：c#, comparison, nullable, compiler-warnings, lifted-operators

考虑以下代码：

```
DateTime t = DateTime.Today;

bool isGreater = t > null; 
```

使用 Visual Studio 2010（C# 4、.NET 4.0），我收到以下警告：

> 警告 CS0458：表达式的结果始终为“布尔”类型的“空”？

这是不正确的；结果总是**`false`**（类型`bool`）：

现在，结构 DateTime 重载了`>`（大于）运算符。任何不可为空的结构（如 DateTime）都可以隐式转换为相应的`Nullable<>`类型。上面的表达式完全等价于

```
bool isGreater = (DateTime?)t > (DateTime?)null; 
```

这也会产生相同的错误警告。这里的`>`算子是被**提升**的算子。`HasValue`如果它的两个操作数中的任何一个是 ，则此方法通过返回 false 来工作`false`。否则，提升的运算符将继续将两个操作数解包到底层结构，然后调用`>`由该结构定义的重载（但在一个操作数没有的情况下，这不是必需的`HasValue`）。

**你能重现这个错误，这个错误是众所周知的吗？我误解了什么吗？**

这对于所有`int`重载相关运算符的结构类型（不是简单类型，如 ，而不是枚举类型）都是相同的。

（现在如果我们使用`==`而不是`>`，一切都应该完全相似（因为 DateTime 也重载了`==`运算符）。但它不相似。如果我说

```
DateTime t = DateTime.Today;

bool isEqual = t == null; 
```

我没有收到**任何**警告 ☹ 有时你会看到人们不小心检查了一个变量或参数是否为 null，而没有意识到他们的变量的类型是一个结构（它重载`==`并且不是一个简单的类型，比如`int`）。如果他们得到警告会更好。）

* * *

***更新：***使用Visual Studio 2015的 C# 6.0 编译器（基于[Roslyn](https://en.wikipedia.org/wiki/.NET_Compiler_Platform)`isGreater` ），上面的不正确消息更改为带有正确且有用的警告消息的 CS0464。`isEqual`此外，在 VS2015 的编译器中修复了上述缺少警告`/features:strict`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T00:26:02.780

我在 Roslyn 中实现提升的操作员行为时独立地发现了这个错误，并在我离开之前在 Roslyn 中修复了它。

很抱歉，当您在 10 月份发布它时，我没有看到这个。感谢您将其提交给 Connect！并为错误道歉；这是算子语义分析中长期存在的错误。

Incidentally, I'll be discussing how Roslyn optimizes lifted expressions on [http://ericlippert.com](http://ericlippert.com) later this month (December 2012), so if this subject interests you, check it out:

[http://ericlippert.com/2012/12/20/nullable-micro-optimizations-part-one/](http://ericlippert.com/2012/12/20/nullable-micro-optimizations-part-one/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T09:39:52.840

你是对的：**这是 Visual Studio 中的一个错误**。C# 4.0 标准（§ 7.3.7 提升运算符）有这样的说法：

> 对于关系运算符
> 
> ```
> <  >  <=  >= 
> ```
> 
> […]**如果一个或两个操作数为空，则****提升的运算符会产生值。`false`**…</p>

事实上，在 MonoDevelop 中，您会收到以下警告：

> 比较类型的`System.DateTime`结果`null`总是`false`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T09:19:21.810

```
DateTime t = DateTime.Today;

bool isGreater = (DateTime?)t > (DateTime?)null; 
```

在这种情况下，警告是关于`t > null`. 那永远不会是真的。因为无法评价。

在这种情况下：

```
bool isGreater = (DateTime?)t > (DateTime?)null; 
```

我们正在评估 `(DateTime?)t > (DateTime?)null`；

或者基本上在最好的情况下`t > null`；和之前一样。DateTime.Now 永远不能大于 Undefined，因此会发出警告。

# sas - 使用 SAS 复制文本文件

> ID：13046116
> 
> 赞同：5
> 
> 时间：2012-10-24T09:10:28.450
> 
> 标签：sas

是否有可用于将*文本*文件从一个位置复制到另一个位置的 SAS 程序/函数？

当然，这可以使用操作系统命令（%sysexec 复制）来实现，但肯定有一种与操作系统无关的方法来做到这一点吗？

从我通过查看文档可以看出，proc copy（或proc cport）仅与SAS文件有关。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T07:35:49.620

最简单的方法是这样的：

```
 data _null_;
    infile 'c:\input.txt';
    file 'c:\output.txt';
    input;
    put _infile_;
 run; 
```

RawFocus 提出的方法可以将任何文件以二进制形式从输入一次一个字节地复制到输出。对于文本文件，这不是必需的，执行上述操作将一次复制文件一行。您可能需要稍微注意记录长度，我相信默认记录长度是 256，因此您可能需要明确

```
 lrecl=32767 
```

声明中的选项或类似内容`infile`，如

```
infile 'c:\input.txt' lrecl=32767; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T09:20:06.797

似乎[Chris Hemedinger](http://blogs.sas.com/content/sasdummy/2011/06/17/how-to-use-sas-data-step-to-copy-a-file-from-anywhere/)有答案！

```
/* these IN and OUT filerefs can point to anything */
filename in "c:\dataIn\input.xlsx"; 
filename out "c:\dataOut\output.xlsx"; 

/* copy the file byte-for-byte  */
data _null_;
  length filein 8 fileid 8;
  filein = fopen('in','I',1,'B');
  fileid = fopen('out','O',1,'B');
  rec = '20'x;
  do while(fread(filein)=0);
     rc = fget(filein,rec,1);
     rc = fput(fileid, rec);
     rc =fwrite(fileid);
  end;
  rc = fclose(filein);
  rc = fclose(fileid);
run;

filename in clear;
filename out clear; 
```

谢谢克里斯

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-01T20:50:34.077

对于 SAS 9.4 及更高版本，请使用 FCOPY 函数。使用 recfm=n（n 表示无或二进制）执行真正的复制。

```
filename src "path-to-src" recfm=n;
filename dst "path-to-dst" recfm=n;
%let rc = %sysfunc(FCOPY(src,dst));
%put %sysfunc(SYSMSG()); 
```

如果文件引用不使用 recfm=n 选项，FCOPY 会将它们视为文本文件，因此会受到控制字符和文件结束标记的影响。

# mongodb - 仅当所有字段都是唯一的时才将文档插入 MongoDB

> ID：13046121
> 
> 赞同：1
> 
> 时间：2012-10-24T09:10:36.810
> 
> 标签：mongodb, mongodb-.net-driver, database

我有以下类结构：

```
public class DBTestItem
{
    public int p0;
    public int p1;
    public int p2;
    public int p3;
    public int p4;
    public int p5;
    public int p6;
    public int p7;
    public string data;
}

public sealed class MongoTestItem : DBTestItem
{
    public ObjectId _id;
} 
```

_id 对我来说毫无意义。p0 - p7 表示复合键，data 表示值。

我想保存`MongoTestItem`数据唯一的文档，理想情况下不执行更新，因为它们没有意义。换句话说，如果集合中不存在数据的值，则保存。

我查看了文档，但不太了解如何编写满足上述要求的语句。

我确实创建了一个不同的结构，其中 p0 - p7 生成一个复合 _id 并且数据是一个列表，在这种情况下，语句如下：

```
var query = Query<MdbData>.EQ(x => x._id, doc._id);
var update = Update<MdbData>.Push(x => x.data, "somenewvalue");
col.Update(query, update, UpdateFlags.Upsert); 
```

这有不同的语义，所以 upsert 是可以的。

我想写以上内容，以便评估性能差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:21:07.657

你是说你只想插入“数据”是唯一的吗？如果是这样，您能否在“数据”上创建一个唯一约束，并使用 safeMode 进行更新？

我也很想像这样构造你的复合键；

```
db.so.insert(
 {
    _id: {
      p0:1,
      p1:0,
      p2:0,
      p3:0,
      p4:0,
      p5:0,
      p6:0,
      p7:0,
    },
    data:"apiceofdata",
 }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:28:38.107

如果您只想检查字段“数据”的值是否未出现在其他文档中，您可以为`data`.

或者，如果您想检查该`data`文档中不存在该字段（更新时），您可以将`$exist`运算符与[查询生成器一起使用](http://www.mongodb.org/display/DOCS/CSharp+Driver+Tutorial#CSharpDriverTutorial-Referencesandnamespaces)

# invite - Facebook 请求对话框：发送请求失败

> ID：13046123
> 
> 赞同：6
> 
> 时间：2012-10-24T09:10:47.547
> 
> 标签：invite, facebook-app-requests

[我只是从https://developers.facebook.com/docs/reference/dialogs/requests/](https://developers.facebook.com/docs/reference/dialogs/requests/)的 JavaScript 示例部分复制源代码，更改为我的 API ID，然后我可以看到对话框。但是当我向一个或多个用户发送请求时，我总是收到错误消息：

xxxx 发生错误。请稍后再试。

API 错误代码：2 API 错误描述：服务暂时不可用 错误消息：用户无法发送此请求：未知错误

有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:54:39.433

我已经在路上解决了这个问题。

您需要一个画布应用程序才能使用 apprequest。

因此，在应用设置页面上单击 Facebook 上的应用。

为包含此代码的应用程序创建一个索引文件

```
<script type="text/javascript">
    top.location.href = 'REDIRECT_URL'
</script> 
```

编写应用程序网址并完成。应用程序请求将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:53:53.893

今天，Facebook 本身似乎出了点问题。我们遇到了类似的问题，我尝试用谷歌搜索可能的解决方案，发现您的问题是在 3 小时前提出的。

更新：在 Facebook 上注册的错误问题超过 30 次重复 - [apprequests 返回 API 错误代码：2 服务暂时不可用](http://developers.facebook.com/bugs/540196825997304?browse=search_508943d97b6433699181841)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:54:31.660

Facebook 一定在过去 12 小时内做出了一些改变。在您的应用设置中，您必须添加“Facebook 上的应用”，这应该可以让您的邀请再次起作用。

我有一个有同样问题的应用程序，在我的应用程序设置中，我只检查了“带有 Facebook 登录的网站”和“页面选项卡”。当我添加“Facebook 上的应用程序”时，邀请又开始起作用了。

**注意：**现在，当用户发送邀请时，邀请将被定向到 Facebook 上的应用程序，而不是定向到您的网站。对于我的应用程序，我必须添加代码以从 Facebook 应用程序重定向回选项卡。

# python - matplotlib 很慢。正常吗？

> ID：13046127
> 
> 赞同：16
> 
> 时间：2012-10-24T09:10:50.417
> 
> 标签：python, performance, matplotlib

我正在使用由 400 个子图组成的 matplotlib 创建几个 pdf 图。每个只有 5 个数据点。在一台好电脑上保存 5 张 pdf 图片需要 420 秒。有什么方法可以优化代码还是对于matplotlib来说是正常的？

绘图部分代码：

```
plot_cnt = 1
for k in np.arange(K_min, K_max + 1):
    for l in np.arange(L_min, L_max + 1):
        ax = plt.subplot(grid[0], grid[1], plot_cnt)
        plot_cnt += 1
        plt.setp(ax, 'frame_on', False)
        ax.set_ylim([-0.1, 1.1])
        ax.set_xlabel('K={},L={}'.format(k, l), size=3)
        ax.set_xlim([-0.1, 4.1])
        ax.set_xticks([])
        ax.set_yticks([])
        ax.grid('off')
        ax.plot(np.arange(5), (data['S1']['Azimuth'][:, k - 1, l + offset_l] + \
                data['S1']['Delta Speed'][:, k - 1, l + offset_l] + \
                data['S1']['Speed'][:, k - 1, l + offset_l]) / 3,
                'r-o', ms=1, mew=0, mfc='r')
        ax.plot(np.arange(5), data['S2'][case][:, k - 1, l + offset_l],
                'b-o', ms=1, mew=0, mfc='b')
plt.savefig(os.path.join(os.getcwd(), 'plot-average.pdf'))
plt.clf()
print 'Final plot created.' 
```

最终图片： ![在此处输入图像描述](../Images/e2c8050843b9207e51a80f647401e3d8.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-25T03:11:04.097

根据@rowman 所说，您可以在一个轴上完成所有操作（当您关闭所有刻度等时）。就像是：

```
K_max = 20
K_min = 0
L_max = 20
L_min = 0
ax = plt.subplot(111)
x_offset = 7 # tune these
y_offset = 7 # tune these
plt.setp(ax, 'frame_on', False)
ax.set_ylim([0, (K_max-K_min +1)*y_offset ])
ax.set_xlim([0, (L_max - L_min+1)*x_offset])
ax.set_xticks([])
ax.set_yticks([])
ax.grid('off')

for k in np.arange(K_min, K_max + 1):
    for l in np.arange(L_min, L_max + 1):
        ax.plot(np.arange(5) + l*x_offset, 5+rand(5) + k*y_offset,
                'r-o', ms=1, mew=0, mfc='r')
        ax.plot(np.arange(5) + l*x_offset, 3+rand(5) + k*y_offset,
                'b-o', ms=1, mew=0, mfc='b')
        ax.annotate('K={},L={}'.format(k, l), (2.5+ (k)*x_offset,l*y_offset), size=3,ha='center')
plt.savefig(os.path.join(os.getcwd(), 'plot-average.pdf'))

print 'Final plot created.' 
```

运行大约一两秒。我认为所有的时间都花在设置`axes`内部相当复杂的对象上。 ![输出假数据](../Images/f6e9dba2e650217190674f813125419e.png)

# ios - 如何检查我们应用的通知提醒样式？

> ID：13046135
> 
> 赞同：2
> 
> 时间：2012-10-24T09:11:08.067
> 
> 标签：ios, uilocalnotification

我真正想要的是将通知警报样式更改为“警报”，但后来知道我们不能以编程方式做到这一点。

现在让我们来看情景，

我`UILocalNotification`有一套`repeatinterval = kCFCalendarUnitMinute`。因此，如果我不取消它，它每分钟都会在通知窗口中显示新通知。

现在说，我让设备闲置了 10 分钟，然后我将被 10 条通知轰炸，尽管我设置了一个带有重复间隔的通知。

**主要问题：有没有办法只显示最后一个通知。**

就像我以同样的方式给出了 1 分钟的例子 以每 7 天重复的例子为例。取消通知也会取消下周即将到来的通知。

所有这 10 条通知中唯一的共同点是每次都有不同的值`fireDate`。`nextFireDate`

因此，我想将警报样式切换为“警报”，但由于我们无法通过代码更改它。

我需要在每次启动时提醒用户将他的**“通知警报样式”更改为“警报”**，默认情况下是横幅，直到他更改它。

所以现在我有两个关于依赖的问题：

1.  有没有办法通过编码**检查**当前的**通知警报样式**，即`None, Banner, Alerts`当前应用程序？
2.  如果 1 是 YES，那么，有什么方法可以让用户直接从我们的应用程序直接进入设置通知警报样式屏幕。

**注意：** 对于第 2 点。

我想到的一件事是向用户显示到达那里的路径**"Settings-> Notifications -> MyAlarmApp -> Alert Style -> Alerts"**。

欢迎任何其他建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T09:15:57.037

您不能以编程方式更改或检测通知的样式，只有用户在设置应用程序中更改它。

您也无法再打开设置应用程序，因此将由显示通知的用户决定。这完全不在你的控制范围内。

就像您所说的那样，您可以要求用户更改通知显示为您的应用程序的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-19T10:33:21.117

1.应用程序可以使用以下方法检查启用了哪些通知类型：

```
UIRemoteNotificationType types = [[UIApplication sharedApplication] enabledRemoteNotificationTypes]; 
```

2.您现在不能直接以编程方式打开设置应用程序屏幕。

您可以在 iOS 版本 5.0 - 5.0.1 中使用它。

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs://"]]; 
```

但后来它在 iOS 5.1 中被贬值了。您不能将其用于 iOS 5.1 及更高版本。

# c++ - 我可以知道 QNetworkAccessManager 是否完成了所有 http 请求的处理吗？

> ID：13046137
> 
> 赞同：1
> 
> 时间：2012-10-24T09:11:10.603
> 
> 标签：c++, qt, http, signals

我在我的应用程序的每个 httpClient 对象创建中使用 QNetworkAccessManager 并在 HttpClass 出栈后将其删除，我有类似 300 个 http 请求
我在循环中执行，我知道从 4.8 开始，http 请求是多线程的，所以我不用担心随心所欲地执行，而且效果很好。
问题是我怎么知道所有线程请求何时完成（所有 300 个）我可以发出一些信号吗？这是请求的循环，在http客户端里面有通常的http信号

```
 QMapIterator<QString,QString> i(m_urlMap);

    while (i.hasNext())
    {
        i.next();        
        QString sUrl = i.value();;
         HttpClient* pHttpClient = new  HttpClient(m_pFileOutput,m_pMutex);
         bool bReturnInvokeHttpClient = false;
         bReturnInvokeHttpClient = pHttpClient->startRequest(sUrl);

    } 
```

完成工作后，我是否需要手动跟踪每个 httpclient m？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:11:44.197

QNetworkAccessManager 只有一个信号在请求完成时熄灭，但没有一个在最后一个请求完成时熄灭**。**所以我担心你必须自己跟踪。

此致

# c++ - 使用 ReadFile() 简单读取文件

> ID：13046140
> 
> 赞同：0
> 
> 时间：2012-10-24T09:11:13.653
> 
> 标签：c++, c, winapi, unicode, byte-order-mark

为什么这段代码不输出任何东西（除了信息字）？文件存在。

```
hReadFile = CreateFile(L"indexing.xml",GENERIC_READ | GENERIC_WRITE, FILE_SHARE_READ |FILE_SHARE_WRITE, NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL);
    wchar_t *wchr = new wchar_t[20];
    DWORD dw;
    ReadFile(hReadFile, wchr, sizeof(wchar_t) * 5, &dw, NULL);
    CloseHandle(hReadFile);
    wchr[dw/sizeof(wchar_t)] = L'\0';
    std::wcout << L"info " << wchr << L"     " << dw << std::endl; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:46:48.010

Unicode 文件可能以可选的[字节顺序标记 (BOM)](http://en.wikipedia.org/wiki/Byte_order_mark)开头。

对于 UTF-16，BOM 说明文件中使用了哪种字节序。

BOM 也可用于区分不同的 Unicode 编码。

来自 OP 的示例文件显然带有这样的 BOM 作为其前两个字节，因为增加指针（指向 2 字节大小的`wchar_t`类型化数组）会跳过它并让数据被打印。

```
std::wcout << L"info " << (wchr+1) << L" " << dw << std::endl; 
```

# python - 创建视图中的表单是否已经绑定？

> ID：13046141
> 
> 赞同：1
> 
> 时间：2012-10-24T09:11:15.907
> 
> 标签：python, django, django-class-based-views

我有这个代码

```
class ObjectCreate(CreateView):

    def form_valid(self, form): 
```

我想知道这个表单是否已经绑定到对象实例，我可以使用 form.save 或者我必须手动将它绑定到模型实例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:24:46.320

是的，里面的表格`form_valid`是绑定的。

您可以通过查看[`ProcessFormView`](https://github.com/django/django/blob/stable/1.4.x/django/views/generic/edit.py#L125).

```
def post(self, request, *args, **kwargs):
    form_class = self.get_form_class()
    form = self.get_form(form_class)
    if form.is_valid():
        return self.form_valid(form) 
```

可以看到绑定的表单是由 实例化的`self.get_form(form_class)`，`form_valid`只有表单有效时才会调用该方法。

请注意，默认情况下[`ModelFormMixin`](https://github.com/django/django/blob/stable/1.4.x/django/views/generic/edit.py#L66)使用的`CreateView`保存对象 - 根据您尝试执行的操作，您可能不必覆盖`form_valid`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:22:29.220

您可以[参加 form 课程](https://github.com/django/django/blob/master/django/views/generic/edit.py)并要求[bounded](https://docs.djangoproject.com/en/dev/ref/forms/api/#bound-and-unbound-forms)：

```
 form_class = self.get_form_class()
    if form.is_bound:
        ... 
```

# c# - 将整数传递给 VSTO 2010 Word Addin

> ID：13046142
> 
> 赞同：9
> 
> 时间：2012-10-24T09:11:22.867
> 
> 标签：c#, vsto, office-interop

我正在尝试开发 VSTO 2010 Word 插件。它有一个自定义任务窗格，其中包含倒数计时器（用户控件）。想法是，当打开一个 word 文档时，总时间（以小时和分钟为单位）被传递给插件，插件又将其传递给倒数计时器控件。当我在 VS2010 中运行插件并通过用户控制两个整数值，即 Addin_Startup 中的小时和分钟时，它工作正常。

现在我正在尝试从 asp.net 页面单击按钮打开一个 word 文档。当我单击按钮时，应该打开一个 word 文档，并且应该将小时和分钟的时间传递给插件，然后插件会将其提供给用户控件，并且计时器应该在给定的时间内运行。

问题是我无法弄清楚如何将两个整数传递给插件以及将它们传递到何处。以下是我的代码，有时会给出“灾难性故障错误”，有时会给出“无法将'System.__ComObject'类型的COM对象转换为接口类型'MyWordAddin.IAddInUtilities'”

ThisAddin 类

```
namespace MyWordAddin
{
    public partial class ThisAddIn
    {
        private ctlClock myUserControl;
        private Microsoft.Office.Tools.CustomTaskPane myCustomTaskPane;
        private int hour, min;
        private AddInUtilities utilities;

        protected override object RequestComAddInAutomationService()
        {
            if (utilities == null)
            {
                utilities = new AddInUtilities();
            }
            return utilities;
        }

        public int Min
        {
            get { return min; }
            set { min = value; }
        }

        public int Hour
        {
            get { return hour; }
            set { hour = value; }
        }

        public Microsoft.Office.Tools.CustomTaskPane MyCustomTaskPane
        {
            get { return myCustomTaskPane; }
            set { myCustomTaskPane = value; }
        }

        public void ThisAddIn_Startup(object sender, System.EventArgs e)
        {
            //MessageBox.Show("Start Up Called");
            myCustomTaskPane.VisibleChanged += new EventHandler(myCustomTaskPane_VisibleChanged);

        }
        public void setTime(int h, int m)
        {
            Hour = h;
            Min = m;
            myUserControl = new ctlClock(Hour, Min);
            //myUserControl = new ctlClock(0, 1);
            myCustomTaskPane = this.CustomTaskPanes.Add(myUserControl, "Remaining Time");
            myCustomTaskPane.Visible = true;
        }

        private void yCustomTaskPane_VisibleChanged(object sender, System.EventArgs e)
        {
            Globals.Ribbons.ManageTaskPaneRibbon.toggleButton1.Checked = myCustomTaskPane.Visible;
        }

        private void ThisAddIn_Shutdown(object sender, System.EventArgs e)
        {
        } 
```

AddinUtilities 类

```
namespace MyWordAddin
{
    [ComVisible(true)]
    [InterfaceType(ComInterfaceType.InterfaceIsDual)]
    public interface IAddInUtilities
    {
        void setAddinTime(int h, int min);
    }

    [ComVisible(true)]
    //[Serializable()]
    [ClassInterface(ClassInterfaceType.None)]
    public class AddInUtilities : StandardOleMarshalObject,IAddInUtilities
    {
        public void setAddinTime(int hour, int min)
        {
            Globals.ThisAddIn.setTime(hour, min);          

        }

   }

} 
```

控制器应用程序尝试打开 word 文档并将两个整数发送到插件

```
namespace ControllerApplication
{
    public class CCWordApp
    {
        private Word._Application oWordApp; // a reference to Word application

        public Word._Application OWordApp
        {
            get { return oWordApp; }
            set { oWordApp = value; }
        }
        private Word.Document oWordDoc;     // a reference to the document

        public Word.Document OWordDoc
        {
            get { return oWordDoc; }
            set { oWordDoc = value; }
        }

        public CCWordApp()
        {
            // activate the interface with the COM object of Microsoft Word
            oWordApp = new Word.Application();
            oWordDoc = new Word.Document();

        }

        // Open a new document
        public void Open()
        {
                object addinName = "MyWordAddIn";
                Microsoft.Office.Core.COMAddIn addin = oWordApp.COMAddIns.Item(addinName);
                IAddInUtilities utils = null;
                    utils = (IAddInUtilities)addin.Object;
                    utils.setAddinTime(0, 8);

            Object oMissing = System.Reflection.Missing.Value;
            oWordApp.Visible = true;
            oWordDoc = oWordApp.Documents.Add(ref oMissing, ref oMissing, ref oMissing, ref oMissing);
            oWordDoc.Activate();
        } 
```

当我运行控制器应用程序时，在单击开始按钮的事件时，有时它会给我“灾难性故障”，有时它给我“无法将'System.__ComObject'类型的COM对象转换为接口类型'MyWordAddin.IAddInUtilities'”和有时它卡在最后一行代码上，上面写着“对象实例未传递给对象”。我已经粗体选择了出现错误的代码。我无法弄清楚这里真正的问题是什么以及为什么我不能将两个简单的整数传递给我的插件。肯定有我在以非常错误的方式做的事情。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:34:20.793

我认为您需要覆盖 RequestCOMAddInAutomationService，因为您使用的是 VSTO。

请参阅这篇文章： [如何从外部应用程序调用加载项功能？](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/91d647f5-38d3-4340-828a-4898b86a101a/)

> Shared Add-In 使用 COMAddIn.Object 方式将其功能暴露给外部应用程序，因此我们的 OnConnection 实现大致如下所示：
> 
> ((COMAddIn)AddInInst).Object = new MyAutomationObject();
> 
> 但是此方法不能在 VSTO 中使用，因为设置 COMAddIn.Object 仅允许在 OnConnection 函数期间使用，并且 OnConnection 在 VSTO 项目中不可见。

它给出了一个覆盖 RequestCOMAddInAutomationService() 的示例

希望有帮助！

# opencl - Nvidia GPU 上的 OpenCL ATI Stream SDK

> ID：13046146
> 
> 赞同：2
> 
> 时间：2012-10-24T09:11:36.563
> 
> 标签：opencl, gpu, nvidia, ati

我可以通过安装 ATI Stream SDK 在 Nvidia GPU 上编写我的 OpenCL 应用程序（因为它也可以让我加速我的 CPU，而 Nvidia 编程 SDK 不会）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T13:47:58.103

您可以在一台机器上安装多个平台（意思是：OpenCL 实现）。因此，即使您有 NVIDIA GPU，您也可以使用 AMD OpenCL 实现 CPU（如果您有 Intel CPU，则可以使用 Intel OpenCL SDK）。但是，您不能使用 AMD OpenCL 实现在 NVIDIA GPU 上运行代码。

使用这个小型实用程序库，您可以轻松选择要使用的实现/平台：[http ://www.thebigblob.com/opencl-utilities/](http://www.thebigblob.com/opencl-utilities/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T21:59:31.467

是的，您可以使用 AMD SDK 构建主机程序，然后根据需要针对任意数量的不同设备 - CPU、NVIDIA GPU 等等。但请确保您有针对每个设备优化的 OpenCL 代码的单独版本。

# c++ - 位交换和指针

> ID：13046147
> 
> 赞同：2
> 
> 时间：2012-10-24T09:11:36.437
> 
> 标签：c++, byte, swap, endianness

我有一个`struct`，它由多个 32 位元素组成。我应用了 a `#pragma pack (4)`，因此以下结构是线性且对齐的。

```
struct
{
  int a; // 4 bytes
  int b; // 4 bytes
  int c; // 4 bytes
} mystruct; // total 16 bytes 
```

如何交换这些元素中的每一个（小 -> 大端）？

方法是`void swap(void* a, int b);`，带有`a`指向结构的指针，以及`b`给出结构大小的整数。

例如 ：

```
void swap(void* a, int b)
{
  //FIXME !
  for (int i = 0; i < b; i+= 32)
  {
    a = (a & 0x0000FFFF) << 16 | (a & 0xFFFF0000) >> 16;
    a = (a & 0x00FF00FF) << 8 | (a & 0xFF00FF00) >> 8;
    a += 32;
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T09:30:03.603

您可以在不使用临时的情况下交换两个字节：

```
void byteswap( unsigned char & a, unsigned char & b )
{
   a ^= b;
   b ^= a;
   a ^= b;
} 
```

现在让我们将它应用于可变长度的数字

```
template< typename T >
void endianSwap( T & t )
{
    unsigned char * first = reinterpret_cast< unsigned char * >( &t );
    unsigned char * last = first + sizeof(T) - 1;
    while( first < last )
    {
       byteswap( *first, *last );
       ++first;
       --last;
    }
} 
```

对于您的结构，您可以：

```
void endianSwap( mystruct & s )
{
     endianSwap( s.a );
     endianSwap( s.b );
     endianSwap( s.c );
} 
```

当然，作为使用 byteswap 的 endianSwap 的替代方案，我们可以只使用 std::reverse。

```
template<typename T> endianSwap( T& t )
{
    unsigned char * begin = reinterpret_cast<unsigned char *>(&t);
    unsigned char * end = begin + sizeof( T );
    std::reverse( begin, end );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:20:56.053

这是您日常工作的可能解决方案

```
void swap(void* a, int b)
{
  for (int i = 0; i < b; i += 4)
  {
    int* p = (char*)a + i;
    *p = (*p & 0x0000FFFF) << 16 | (*p & 0xFFFF0000) >> 16;
    *p = (*p & 0x00FF00FF) << 8 | (*p & 0xFF00FF00) >> 8;
  }
} 
```

未经测试，但我希望更接近正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:21:55.773

如果您在基于 *nix 的机器上。有一个有用的功能可以做到这一点：

```
#include <arpa/inet.h>
uint32_t htonl(uint32_t hostint32);   // from host to network
                                      // means little to big if your machine is x86 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T09:21:56.880

```
void swap(void* A, int b)
{
   //FIXME !
   int *c = (int*)A; // have to cast to an existing type. 'void' doesnt exist
   for (int i = 0; i < b; i+=4)  // we are flipping 4 bytes at a time
   {
        unsigned int a=*c;  // read the content, not the address
         // have to have unsigned, otherwise (a&0xff00ff00)>>8 extends the sign bit
        a = (a & 0x0000FFFF) << 16 | (a & 0xFFFF0000) >> 16;
        a = (a & 0x00FF00FF) << 8 | (a & 0xFF00FF00) >> 8;
        *c++= a;  // write back the content
   }
 } 
```

无论如何：我最喜欢在 c 或类 c 语言中进行字节交换的方法是通过副本：这个概念比内置函数的名称更容易记住。

`void swap(char *d, char *s, int N) { for (i=0;i<N;i++) d[i^3]=*s++;}`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T09:32:18.137

我假设 little->big endian 的意思是颠倒每个 4 字节元素中的字节顺序。我还假设“`a`结构上的空指针”是指“`a`结构上的指针”。您的代码中有一些错误。尝试这个：

```
void swap(void* a, int b)
{
  for (int *pInt = (int *)a; pInt < ((char *)a + b); pInt++)
  {
    *pInt = (*pInt & 0x0000FFFF) << 16 | (*pInt  & 0xFFFF0000) >> 16;
    *pInt = (*pInt & 0x00FF00FF) << 8 | (*pInt & 0xFF00FF00) >> 8;
  }
} 
```

# entity-framework - 为什么要处置 ObjectContext 实例？

> ID：13046149
> 
> 赞同：1
> 
> 时间：2012-10-24T09:11:46.887
> 
> 标签：entity-framework, entity-framework-5

有人可以在这里帮助我，为什么我会收到异常“ObjectContext 实例已被释放，不能再用于需要连接的操作。” 在下一节？

```
 public virtual IEnumerable<TEntity> Get(Expression<Func<TEntity, bool>> filter, Func<IQueryable<TEntity>, IOrderedQueryable<TEntity>> orderBy)
    {
        if (this.CheckAccess(this.OnCanRead))
        {
            try
            {
                Expression<Func<TEntity, bool>> baseFilter = this.GetFilter(this.OnFilter);

                IQueryable<TEntity> result = this.Set.AsQueryable();

                if (baseFilter != null)
                {
                    result = result.Where(baseFilter);
                }

                if (filter != null)
                {
                    result = result.Where(filter);
                }

                if (orderBy == null)
                {
                    return result.ToList();
                }
                else
                {
                    return orderBy(result).ToList();
                }
            }
            catch (Exception)
            {
                throw;
            }
        }
        else
        {
            throw new AccessException("CanRead");
        }
    } 
```

在调用以下点之前仍然存在 ObjectContext：

```
 if (baseFilter != null)
                {
                    result = result.Where(baseFilter);
                }

                if (filter != null)
                {
                    result = result.Where(filter);
                } 
```

为什么不再？

**- 编辑 -**

更多信息：

这里使用出现问题的函数的类： [DbContextRepository](http://entityframeworkext.codeplex.com/SourceControl/changeset/view/16211#382544)

在我的程序中，有一个名为 ShopRepository 的类，它派生自：

```
public class ShopRepository : DbContextRepository<Shop> 
```

此外，我的程序中有一个 DataManager 有问题的函数被称为：

```
public static class DataManager
{
    public static void Initialize()
    {
        Initializer.Initializer.SetInitializer();

        ObjectFactory.Configure(
           x =>
           {
               x.For<DbContext>().Use<DataContext>();
               x.For<IUnitOfWorkFactory>().Use<DbContextUnitOfWorkFactory>();
           }
        );

        DbContextUnitOfWorkFactory.SetDbContext(CreateContext);
    }

    private static DbContext CreateContext()
    {
        return new DataContext();
    }

    private static ShopRepository _shops;

    public static ShopRepository Shops
    {
        get
        {
            if (DataManager._shops == null)
            {
                DataManager._shops = ObjectFactory.GetInstance<ShopRepository>();
            }

            return DataManager._shops;
        }
    } 
```

**- 编辑 -**

我找到了问题，但我不知道如何解决它。如果在 ShopRepository 事件 OnFilter 中返回一个动态值，例如

```
x => x.InstallationId == InstallationRepository.CurrentInstallationId 
```

如果有固定值，则发生错误，例如

```
x => x.InstallationId == 1 
```

返回，没有错误发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:54:22.563

在枚举查询结果之前，在代码中的某个位置处理 DbContext。Is 不在您提供的代码中，但这是唯一的解释。

# java - java.net.URI.relativize 不适用于 JAR URI

> ID：13046150
> 
> 赞同：5
> 
> 时间：2012-10-24T09:11:52.133
> 
> 标签：java, uri

我有两个 URI 对象。一个指向 JAR 文件中的文件夹，另一个指向同一个 JAR 文件中的文件。该文件位于第一个 URI 指定的目录的子文件夹中。我喜欢创建一个相对 URI，因此生成的 URI 只包含 JAR 中文件的相对路径。

*   文件夹 URI

    ```
    jar:file:/C:/Users/inagy/.m2/repository/hu/inagy/my-config-artifact/2.0-SNAPSHOT/my-config-artifact-2.0-SNAPSHOT.jar!/conf/ 
    ```

*   资源 URI

    ```
    jar:file:/C:/Users/inagy/.m2/repository/hu/inagy/my-config-artifact/2.0-SNAPSHOT/my-config-artifact-2.0-SNAPSHOT.jar!/conf/somesubpath/someconfig.xml 
    ```

*   调用后，`folderUri.relativize(resourceURI)`我期待以下 URI：

    ```
    somesubpath/someconfig.xml 
    ```

但是我得到了resourceURI，这意味着根据[URI类的Javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URI.html#relativize%28java.net.URI%29)，JDK代码发现这两个路径彼此不相关。

这是一个错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T22:38:27.893

我也对此感到有点恼火。答案与 JAR 文件的语义*无关*——它与`jar:`URI 的语法有关。要“相对化”，URI 必须是**分层的而不是不透明**的。您将从 java.net.URI 的 JavaDoc 中注意到：

> 在最高级别，字符串形式的 URI 引用（以下简称“URI”）具有以下语法
> 
> ```
> [scheme:]scheme-specific-part[#fragment] 
> ```
> 
> ...
> 
> 不透明 URI 是绝对 URI，其特定于方案的部分不以斜杠字符 ('/') 开头。不透明的 URI 不受进一步解析的影响。
> 
> ...
> 
> 分层 URI 需要根据语法进行进一步解析
> 
> ```
> [scheme:][//authority][path][?query][#fragment] 
> ```

像这样的 JAR URI`jar:file:///home/me/foo.jar!/conf/`被解析为：

*   方案 =`jar`
*   方案特定部分 =`file:///home/me/foo.jar!/conf/`
*   片段=（无）

因为方案特定部分不以“ `/`，”开头，所以不能将其视为分层 URI。URI 类不`jar:`专门处理（或任何）URI，因此它无法识别该部分*是*分层`file://`的嵌套 URI 。

 *由于`jar:`URI 是不透明且不分层的，因此它们受制于[URI#relativize()](http://docs.oracle.com/javase/6/docs/api/java/net/URI.html#relativize%28java.net.URI%29)记录的行为：

> 给定 URI 与此 URI 的相对化计算如下：
> 
> 1.  如果此 URI 或给定 URI 是不透明的，[...]，则返回给定 URI。

**编辑**：省略了关于不透明 URI 的关键部分。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T09:20:15.477

`somesubpath/someconfig.xml`不是 URI；缺少协议（如`file:`）。事实上，只有一个完整的 URL`jar:file:/C:/Users/inagy/.m2/repository/hu/inagy/my-config-artifact/2.0-SNAPSHOT/my-config-artifact-2.0-SNAPSHOT.jar!somesubpath/someconfig.xml`是可以想象的，但是 jar 协议不处理基本文档/目录，比如`/conf`.

所以你只能使用绝对路径。URI 代表唯一资源标识符的结果。

没有带有相关文档 (.js) 的基础文档 (.html)。

* * *

**URI 用于检索数据。**如何为 jar 中的文件编写相对 URI？相对于哪里？由于“jar：”协议仅在 java 代码中使用，因此没有“当前文件”的上下文。*所以没有实现相对 URI。**

# arrays - 在 bash 中排序 - 如何按行中或行尾的字符进行排序

> ID：13046151
> 
> 赞同：2
> 
> 时间：2012-10-24T09:11:56.543
> 
> 标签：arrays, bash, sorting

我有以下要合并的pdf文件。

```
20121024aC004101
20121024a_002101
20121024a_003101
20121024aN006101
20121024aA001101
20121024a_005101
etc... 
```

但我的结果应该是 00101, 002101... 即基于第 11 个字符排序；任何人都可以帮助我。我是 bash 新手，最近开始学习。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T09:18:03.597

利用

```
sort -k1.11 
```

`-k`开关告诉`sort`从第 11 个字符开始对第一个字段进行排序。

# facebook - 将注册插件中注册按钮的文本更改为“下一步”

> ID：13046156
> 
> 赞同：1
> 
> 时间：2012-10-24T09:12:18.557
> 
> 标签：facebook, registration

我使用 facebook 的注册插件作为我网站的中间步骤。我想将“注册”按钮的文本更改为“下一步”，因为在完成注册之前还有另一个步骤。所以我用这个脚本来改变文本

```
$(document).ready(function()
    {     
    $('#iframeID').load(function(){
        $('#iframeID').contents().find('#fbRegistrationRegisterButtonPrefilled').children('input').val('Next');

    }); 
    }); 
```

此代码只能离线使用（即，如果我将浏览器中的页面保存为普通 html）..它不能在线工作，并给出此错误“访问属性'ownerDocument'的权限被拒绝”

有没有办法做到这一点..或者以后可以使用这个选项吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T20:21:19.640

有一种更简单的方法可以做到这一点。你需要做的就是把

```
action="Next" 
```

作为参数之一。如果您使用**iframe**方法，那么您需要将它放在 . 中`src=""`，如果您使用**xfbml**方法，只需像任何其他参数一样将其放入。

# xslt - XSLT 处理多个节点

> ID：13046157
> 
> 赞同：1
> 
> 时间：2012-10-24T09:12:22.840
> 
> 标签：xslt

我有以下 XML，它是一个 12 条目管道分隔值。空白节点中的空格由我添加只是为了解释，否则将不存在。

```
<Base>
  <Span>a|a| |a| |a| | |a| |a|a</Span>
  <Span>b| | |b| | |b| | | | |b</Span>
  <Span> | | | |c| | |c| | |c| </Span>
</Base> 
```

我希望由此实现的输出如下：

```
<Output>
  <Period>a|b</Period>
  <Period>a</Period>
  <Period>a|b</Period>
  <Period>c</Period>
  <Period>a</Period>
  <Period>b</Period>
  <Period>c</Period>
  <Period>a</Period>
  <Period>a|c</Period>
  <Period>a|b</Period>
</Output> 
```

这是通过检查所有跨度中的每一列是否具有值来实现的，如果任何跨度在该列中具有值，则创建条目。因此，例如跨度中的第一列包含`a, b, -`所以输出变为`<Period>a|b</Period>`

我正在使用 XSLT 1.0，其中的值`Span`可以是任何值（a、b 和 c 似乎很简单，便于解释）。

我不完全确定如何处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:02:03.163

**这个 XSLT 1.0 样式表...**

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:exsl="http://exslt.org/common"
  xmlns:so="http://stackoverflow.com/questions/13046157"
  exclude-result-prefixes="xsl exsl so">
<xsl:output indent="yes" omit-xml-declaration="yes" />
<xsl:strip-space elements="*" />

<xsl:template match="/*">
  <Output>
    <xsl:variable name="particles">
      <xsl:apply-templates select="Span" />
    </xsl:variable>
    <xsl:variable name="col-count">
      <xsl:for-each select="exsl:node-set($particles)/so:particle">
        <xsl:sort select="@col" data-type="number" order="descending"/>
        <xsl:if test="position()=1">
          <xsl:value-of select="@col"/>
        </xsl:if>
      </xsl:for-each>
    </xsl:variable>
    <xsl:for-each select="exsl:node-set($particles)/so:particle[position() &lt;= $col-count]">
      <xsl:variable name="col" select="position()" />
      <xsl:variable name="period">
        <xsl:for-each select="exsl:node-set($particles)/so:particle[@col=$col]">
          <xsl:sort select="@row" data-type="number" order="ascending"/>
          <xsl:if test=". != ''">
            <xsl:value-of select="." />
            <xsl:if test="position() != last()">
              <xsl:value-of select="'|'" />
            </xsl:if>  
          </xsl:if>  
        </xsl:for-each>
      </xsl:variable>
      <xsl:if test="$period != ''">
        <Period><xsl:value-of select="$period" /></Period>
      </xsl:if>
    </xsl:for-each>
  </Output>
</xsl:template>

<xsl:template match="Span" name="span">
  <xsl:param name="span-text" select="." />
  <xsl:param name="row" select="position()" />
  <xsl:param name="col" select="1" />
  <xsl:variable name="part" select="
    normalize-space( substring-before( concat( $span-text, '|'), '|'))" />
  <xsl:if test="$part">
    <so:particle row="{$row}" col="{$col}">
      <xsl:value-of select="$part" />
    </so:particle>
  </xsl:if>  
  <xsl:if test="contains($span-text,'|')">
    <xsl:call-template name="span">
      <xsl:with-param name="span-text" select="substring-after( $span-text, '|')" />
      <xsl:with-param name="row" select="$row" />
      <xsl:with-param name="col" select="$col + 1" />
    </xsl:call-template>
  </xsl:if>
</xsl:template>

</xsl:stylesheet> 
```

**...将改变这...**

```
<Base>
  <Span>a|a| |a| |a| | |a| |a|a</Span>
  <Span>b| | |b| | |b| | | | |b</Span>
  <Span> | | | |c| | |c| | |c| </Span>
</Base> 
```

**……进入这个……**

```
<Output>
  <Period>a|b</Period>
  <Period>a</Period>
  <Period>a|b</Period>
  <Period>c</Period>
  <Period>a</Period>
  <Period>b</Period>
  <Period>c</Period>
  <Period>a</Period>
  <Period>a|c</Period>
  <Period>a|b</Period>
</Output> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:20:03.333

使用 EXSLT 应该执行以下操作：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:str="http://exslt.org/strings"
  xmlns:exsl="http://exslt.org/common"
  exclude-result-prefixes="str exsl"
  version="1.0">

<xsl:output indent="yes"/>

<xsl:variable name="table-rtf">
  <table>
    <xsl:apply-templates select="Base/Span" mode="tokenize"/>
  </table>
</xsl:variable>
<xsl:variable name="table" select="exsl:node-set($table-rtf)"/>

<xsl:template match="Base">
  <Output>
    <xsl:apply-templates select="$table/table/row[1]/cell" mode="col"/>
  </Output>
</xsl:template>

<xsl:template match="row/cell" mode="col">
  <xsl:variable name="pos" select="position()"/>
  <xsl:variable name="cols" select="$table/table/row/cell[$pos]"/>
  <xsl:if test="$cols[normalize-space()]">
    <Period>
      <xsl:for-each select="$cols[normalize-space()]">
        <xsl:if test="position() > 1">|</xsl:if>
        <xsl:value-of select="."/>
      </xsl:for-each>
    </Period>
  </xsl:if>
</xsl:template>

<xsl:template match="Span" mode="tokenize">
  <row>
    <xsl:for-each select="str:tokenize(., '|')">
      <cell>
        <xsl:value-of select="normalize-space()"/>
      </cell>
    </xsl:for-each>
  </row>
</xsl:template>

</xsl:stylesheet> 
```

例如，使用 xsltproc 您可以转换输入

```
<Base>
  <Span>a|a| |a| |a| | |a| |a|a</Span>
  <Span>b| | |b| | |b| | | | |b</Span>
  <Span> | | | |c| | |c| | |c| </Span>
</Base> 
```

进入结果

```
<Output>
  <Period>a|b</Period>
  <Period>a</Period>
  <Period>a|b</Period>
  <Period>c</Period>
  <Period>a</Period>
  <Period>b</Period>
  <Period>c</Period>
  <Period>a</Period>
  <Period>a|c</Period>
  <Period>a|b</Period>
</Output> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:33:18.477

此模板不使用扩展 (XSLT 1.0)

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
>
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="Base">
      <Output>
          <xsl:call-template name="Format">
            <xsl:with-param name="One" select="Span[1]" />
            <xsl:with-param name="Two" select="Span[2]" />
            <xsl:with-param name="Three" select="Span[3]" />
          </xsl:call-template>
      </Output>
    </xsl:template>
  <xsl:template name="Format">
    <xsl:param name="One" />
    <xsl:param name="Two" />
    <xsl:param name="Three" />
    <xsl:param name="SOne" select="substring-before($One,'|')"/>
    <xsl:param name="STwo" select="substring-before($Two,'|')"/>
    <xsl:param name="SThree" select="substring-before($Three,'|')"/>
    <xsl:choose>
      <xsl:when test="string-length($One) &gt; 1 or string-length($Two) &gt;1 or string-length($Three) &gt; 1">
        <xsl:if test="not($SOne='' and $STwo ='' and $SThree='')">
          <Period>
            <xsl:call-template name="FormatPipes">
              <xsl:with-param name="One" select="$SOne" />
              <xsl:with-param name="Two" select="$STwo" />
              <xsl:with-param name="Three" select="$SThree" />
            </xsl:call-template>
          </Period>
        </xsl:if>
        <xsl:call-template name="Format">
          <xsl:with-param name="One" select="substring-after($One,'|')" />
          <xsl:with-param name="Two" select="substring-after($Two,'|')" />
          <xsl:with-param name="Three" select="substring-after($Three,'|')" />
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <xsl:if test="not($One='' and $Two ='' and $Three='')">
          <Period>
            <xsl:call-template name="FormatPipes">
              <xsl:with-param name="One" select="$One" />
              <xsl:with-param name="Two" select="$Two" />
              <xsl:with-param name="Three" select="$Three" />
            </xsl:call-template>
          </Period>
        </xsl:if>
      </xsl:otherwise>
      </xsl:choose>
  </xsl:template>

  <xsl:template name="FormatPipes">
    <xsl:param name="One" />
    <xsl:param name="Two" />
    <xsl:param name="Three" />
    <xsl:variable name="node">
      <root>
        <xsl:if test="not($One='')">
          <a><xsl:value-of select="$One"/></a>
        </xsl:if>
        <xsl:if test="not($Two='')">
          <a><xsl:value-of select="$Two"/></a>
        </xsl:if>
        <xsl:if test="not($Three='')">
          <a><xsl:value-of select="$Three"/></a>
        </xsl:if>
      </root>
    </xsl:variable>
    <xsl:apply-templates select="msxsl:node-set($node)"/>
  </xsl:template>

  <xsl:template match="root">
    <xsl:for-each select="a">
    </xsl:for-each>
    <xsl:apply-templates select="a"/>
  </xsl:template>

  <xsl:template match="a">
    <xsl:value-of select="."/>
    <xsl:if test="position() != last()">|</xsl:if>
  </xsl:template>

</xsl:stylesheet> 
```

将产生这个正确的输出

```
 <?xml version="1.0" encoding="utf-8"?>
<Output>
  <Period>a|b</Period>
  <Period>a</Period>
  <Period>a|b</Period>
  <Period>c</Period>
  <Period>a</Period>
  <Period>b</Period>
  <Period>c</Period>
  <Period>a</Period>
  <Period>a|c</Period>
  <Period>a|b</Period>
</Output> 
```

# file - 打印文件中一行的最后一列

> ID：13046167
> 
> 赞同：177
> 
> 时间：2012-10-24T09:13:23.707
> 
> 标签：file, awk, tail

我有一个不断被写入/更新的文件。我想找到包含特定单词的最后一行，然后打印该行的最后一列。

该文件看起来像这样。随着时间的推移，更多的 A1/B1/C1 行将附加到它上面。

```
A1 123 456
B1 234 567
C1 345 678
A1 098 766
B1 987 6545
C1 876 5434 
```

我试着用

```
tail -f file | grep A1 | awk '{print $NF}' 
```

打印值 766，但没有输出。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：258
> 
> 时间：2012-10-24T09:17:30.813

由于缓冲，您什么都看不到。当有足够的行数或到达文件末尾时，将显示输出。`tail -f`意味着等待更多的输入，但没有更多的线路，`file`因此管道`grep`永远不会关闭。

如果您`-f`从`tail`输出中省略，则立即显示：

```
tail file | grep A1 | awk '{print $NF}' 
```

* * *

@EdMorton 当然是对的。[awk](http://www.gnu.org/software/gawk/manual/html_node/index.html)也可以搜索`A1`，这将命令行缩短为

```
tail file | awk '/A1/ {print $NF}' 
```

或不带尾，显示所有包含的行的最后一列`A1`

```
awk '/A1/ {print $NF}' file 
```

* * *

感谢@MitchellTracy 的评论，[`tail`](http://man7.org/linux/man-pages/man1/tail.1.html)可能会错过包含的记录`A1`，因此您根本没有得到任何输出。这可以通过切换`tail`and来解决`awk`，首先搜索文件，然后才显示最后一行：

```
awk '/A1/ {print $NF}' file | tail -n1 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2017-04-05T20:20:28.037

要打印一行的最后一列，只需使用 $(NF)：

```
awk '{print $(NF)}' 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-10-24T10:13:13.247

一种使用方式`awk`：

```
tail -f file.txt | awk '/A1/ { print $NF }' 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-10-24T09:22:17.670

您可以在没有 awk 的情况下仅使用一些管道来执行此操作。

```
tac file | grep -m1 A1 | rev | cut -d' ' -f1 | rev 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-24T09:19:22.130

也许这行得通？

```
grep A1 file | tail -1 | awk '{print $NF}' 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-24T10:29:48.780

您可以在以下位置完成所有操作`awk`：

```
<file awk '$1 ~ /A1/ {m=$NF} END {print m}' 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-02-09T14:08:18.483

使用 Perl

```
$ cat rayne.txt
A1 123 456
B1 234 567
C1 345 678
A1 098 766
B1 987 6545
C1 876 5434

$ perl -lane ' /A1/ and $x=$F[2] ; END { print "$x" } ' rayne.txt
766

$ 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-12-04T14:14:14.787

`awk -F " " '($1=="A1") {print $NF}' FILE | tail -n 1`

`awk`与字段分隔符**-F**一起使用，设置为空格“”。

使用*pattern* `$1=="A1"`和*action* `{print $NF}`，这将打印第一个字段为“A1”的每条记录中的最后一个字段。将结果通过管道传输到尾部并使用该`-n 1`选项仅显示最后一行。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-11-27T09:28:17.883

不是这里的实际问题，但可能对某些人有所帮助：我在做`awk "{print $NF}"`，请注意错误的引号。应该是`awk '{print $NF}'`，这样外壳就不会膨胀`$NF`。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-31T17:14:13.563

在文件上执行：

```
awk 'ORS=NR%3?" ":"\n"' filename 
```

你会得到你正在寻找的东西。

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2017-02-23T19:38:36.840

`ls -l | awk '{print $9}' | tail -n1`

# linux - Linux 调度程序 FIFO 无法按预期工作

> ID：13046172
> 
> 赞同：-1
> 
> 时间：2012-10-24T09:13:29.037
> 
> 标签：linux, pthreads, scheduled-tasks, scheduler

我想以这种方式使用调度程序：

**例子**

*   3 个具有不同优先级的 pthread ( 0 , 50 , 99 )

如果 99 的 pthread 正在运行，则不允许其他 pthread 运行。执行顺序应以优先级为导向

**我的实现：**

每个 pthread 都是使用该序列创建的

```
struct sched_param schedparam;  // thread scheduler parameter

pthread_create(threadPtr,NULL,(void *)entryPt,NULL);

pthread_attr_setschedpolicy(attrPtr, SCHED_FIFO);

schedparam.__sched_priority=priority;

pthread_attr_setschedparam(attrPtr, &schedparam );

pthread_setschedparam(threadId,SCHED_FIFO,&schedparam ); 
```

但它不起作用。

**行为：**

pthread 的执行顺序与创建它们的顺序相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:00:23.230

假设您的线程在 I/O 或产量上没有被阻塞（请显示代码），这可能是由于：

*   非超级用户线程不允许在优先级 19 以上运行
*   `sysctl`设置限制每个线程可用的时间量，例如：
    *   kernel.sched_rt_period_us = 1000000
    *   kernel.sched_rt_runtime_us = 950000，允许线程每秒只运行 95%。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:13:34.970

'pthreads 的执行顺序与创建时的顺序相同'：如果您有三个或更多空闲内核，那么这是预期的行为 - 所有线程都有不同的优先级，但有足够的资源来运行它们，所以它们都运行.

即使您只有一个内核，许多操作系统调度程序也具有抗饥饿算法，可以逐渐提高低优先级线程的动态优先级，以便它们最终可以运行（有点）。如果低优先级线程获得锁，然后被抢占然后无法继续，则此方案可以帮助重载的盒子，从而导致其他地方出现问题（优先级反转）。

如果您在发布时想要这种“奇怪”的行为，则必须使用合适的线程间通信对其进行实际编码，以防止其他线程在重要线程运行时运行。

编辑：

'pthreads 的执行顺序与它们创建的顺序相同' - 你怎么知道的？线程做什么？它们会永远运行吗？

# c# - 我应该如何在异步/等待操作中使用静态方法/类？

> ID：13046174
> 
> 赞同：43
> 
> 时间：2012-10-24T09:13:32.587
> 
> 标签：c#, asynchronous, async-await

我的方法是不在异步操作中使用静态方法和类——除非实施了某种锁定技术来防止竞争条件。

现在 async/await 已被引入 c# 4.5+ 框架 - 它简化了多线程应用程序并鼓励响应式 UI。

但是 - 由于锁不能/不应该被放置在等待方法上（我没有争论）现在使用 async/await 的静态方法是否完全多余？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-10-24T09:16:59.543

> 我的方法是不在异步操作中使用静态方法和类——除非实施了某种锁定技术来防止竞争条件。

为什么？除非您实际使用 shared *state*，否则不应该有任何竞争条件。例如，考虑：

```
public static async Task<int> GetPageLength(string url)
{
    string text = await new WebClient().DownloadStringTaskAsync(url);
    return text.Length;
} 
```

如果你*确实*有共享状态——或者如果你在一个被多个线程使用的实例上的*实例*方法中——你需要弄清楚你*希望*你的异步操作如何工作。一旦你决定了各种种族应该如何表现，实际实施它可能会相当简单。

# javascript - 使用克隆函数 (jQuery)

> ID：13046175
> 
> 赞同：0
> 
> 时间：2012-10-24T09:13:42.243
> 
> 标签：javascript, jquery

> **可能重复：**
> [克隆 jQuery UI 日期选择器时出现问题](https://stackoverflow.com/questions/2441061/problem-when-cloning-jquery-ui-datepicker)

我使用 jQuery clone 函数来克隆一个带有 datepicker 函数的表，但是每次我克隆一个新表并尝试单击它的 datepicker 输入时，它都会出现在克隆的默认表上：

```
$('.clone_table').on("click", function() { 
    var $fromTable = $(this).closest(".contain"); 
    var $cloneTable = $fromTable.clone(true); 
    $(".contain:last").after($cloneTable); 
    var selects = $fromTable.find("select"); 
    $(selects).each(function(i) { 
        var select = this; 
        $cloneTable.find("select").eq(i).val($(select).val()); 
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:17:03.007

[`clone`](http://api.jquery.com/clone/)必须使用`true, true`(`withDataAndEvents`和) 的参数调用该函数才能`deepWithDataAndEvents`使其工作。`withDataAndEvents`不过可能就足够了。

```
$("#element").clone(true, true); //You might not need the last true! 
```

# jquery - 当窗口达到一定宽度时用jquery删除css类

> ID：13046180
> 
> 赞同：0
> 
> 时间：2012-10-24T09:14:15.727
> 
> 标签：jquery, css, twitter-bootstrap

我正在尝试向我拥有的某些元素添加和删除一些类。我正在使用引导程序，我目前有网站 www.iampaulb.com，它在我的 iPhone 等移动设备上看起来相当不错（第一次尝试），但在桌面上却没有那么多。

这是有问题的div：

```
<div id="demo1" class="collapse in">
    <legend class="main-legend">Hello! I am Paul...</legend> 
```

类中的 .collapse 会在加载时关闭 div（因此您需要按下按钮打开） 我想删除该类并使用 .collapse 类，这将使内容在加载时保持打开状态。我已经浏览过这里并尝试了各种事情。如

```
var windowsize = $(window).width();

$(window).resize(function() {
  windowsize = $(window).width();
  if (windowsize > 800) {
    //if window width is greater than 800px make tab visable
      $('#demo').addClass('collapse');
  }
}) 
```

但它似乎不起作用。:(

有什么建议么？仅供参考，我是 jQuery Noob；

#

好的，我在这里使用了其中一个建议，并且效果很好。但只有在手动调整浏览器大小时......这就是我所拥有的

```
$(window).on("resize.showContent", function() {
    windowsize = $(window).width();
    if(windowsize > 800) {
        $(".collapse:first").addClass("in").removeAttr("style");
    }
}).trigger("resize.showContent")

$(window).on("resize.showContent", function() {
    windowsize = $(window).width();
    if(windowsize < 800) {
        $(".collapse:first").removeClass("in").removeAttr("style");
    }
}).trigger("resize.showContent") 

// change of button for top element

$(window).on("resize.showContent", function() {
    windowsize = $(window).width();
    if(windowsize > 800) {
        $("#button1").removeClass("large btn-block").addClass("btn-link").removeAttr("style");
    }
}).trigger("resize.showContent")

$(window).on("resize.showContent", function() {
    windowsize = $(window).width();
    if(windowsize < 800) {
        $("#button1").removeClass("btn-link").addClass("-large btn-block").removeAttr("style");
    }
}).trigger("resize.showContent") 
```

这使该部分能够展开并删除按钮类，使其显示为链接。但是，当在 iphone 或台式机上说时，我会修改它以使其默认。只是删除的情况`resize.`吗？希望这是有道理的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:18:45.987

试试这个解决方案

```
 var resizing = false;

    function doResize() {
        var w=$(window).innerWidth();
        //(UPDATE)do add remove of CSS-classes, according to w / needs
        if (w > 800) {
            $('#demo1').addClass('collapse'); //you have demo1 as id in the code
        } else {
            $('#demo1').removeClass('collapse');
        }
    }

    $(window).resize(function(e) {
        //use timeouts not to trigger event constantly
        if (resizing!==false) {
            clearTimeout(resizing);
        } 
        resizing=setTimeout(doResize, 200);
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:41:18.230

如果你想切换 css 类，你可以使用 jquery [toggeClass](http://api.jquery.com/toggleClass/)：

当您加载页面时，您可以触发调整大小事件：

```
$(window).resize(function() {
    var windowsize = $(window).width();
    $('#demo').toggleClass('collapse', (windowsize > 800));
}).trigger("resize"); 
```

查看您的页面后...不是您要切换的“on”类吗，如果窗口大小小于800，则将“in”类添加到折叠元素？

## 编辑3

```
var displayFirstBlock = function() {
    var windowsize = $(window).width(),
        isDesktop = windowsize > 800;
    $(".collapse:first").toggleClass("in", isDesktop).removeAttr("style");
    $("#button1").toggleClass("large btn-block", !isDesktop).toggleClass("btn-link", isDesktop);
}

$(window).on("resize.showContent", displayFirstBlock);
displayFirstBlock(); 
```

在调整大小时绑定一个事件，应该立即调用。

# coding-style - 在 F# 中，如何处理 (float seq) 和 { ts : DateTime; value: float } 以通用方式？

> ID：13046188
> 
> 赞同：6
> 
> 时间：2012-10-24T09:15:15.923
> 
> 标签：coding-style, f#

编写函数以便它们可以无缝处理的最佳方法是什么：

*   浮动序列
*   类型为 { ts : DateTime; 的时间戳系列；value: float } seq，其中值在 float 中，称为 value

我特别需要编写函数，例如计算时间序列的平均/方差/随机变换，我只想编写这些函数的 1 个版本。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-24T09:26:54.583

正如评论中所问的，关键问题是您想在数据类型上编写什么样的操作。对于基本的数值运算可能会这样做，但如果您需要一些更复杂的计算，那么编写两个单独的函数可能会更容易。

无论如何，如果你想使用基本的数值运算，那么你需要为你的时间戳类型定义标准的数值运算符。我[在最近的一篇文章中对此进行了](http://tomasp.net/blog/fsharp-custom-numeric.aspx)描述。以下实现`+`，除以整数和零：

```
open System

type TimedFloat = 
  { Time : DateTime
    Value : float }
  static member (+) (tf1, tf2) = 
    { Time = DateTime(tf1.Time.Ticks + tf2.Time.Ticks)
      Value = tf1.Value + tf2.Value }
  static member Zero = 
    { Time = DateTime.MinValue
      Value = 0.0 } 
  static member DivideByInt(tf, n) =
    { Time = DateTime(tf.Time.Ticks / int64 n)
      Value = tf.Value / float n } 
```

`+`运算符有点可疑，因为您最终会得到一些非常大的日期（也许从最后一个开始使用会`TimeSpan`更有意义）。但是，一旦定义了运算符，您就可以使用`Seq.average`：

```
[ { Time = DateTime.Now
    Value = 3.0 }
  { Time = DateTime.Now.AddDays(2.0)
    Value = 10.0 } ]
|> Seq.average 
```

该`Seq.average`函数适用于这两种类型，因为它是使用静态成员约束编写的（这意味着它适用于具有必要成员的任何类型）。编写这样的函数比编写普通函数更难，所以我可能不会默认使用这种风格。无论如何，这里[有更多示例的介绍](http://tomasp.net/blog/fsharp-generic-numeric.aspx)，这个[SO 答案显示了更多有用的技巧](https://stackoverflow.com/questions/4732672/how-to-write-a-function-for-generic-numbers)。

**编辑 -**正如 Jon Harrop 指出的那样，这是一种非常复杂的方法，它只给你带来有限的好处。如果您只需要处理这些*值*，那么转换为一系列值是一种更好的方法。如果您需要更复杂的计算，那么我认为不值得编写通用函数。为浮点值和时间戳值编写两个单独的函数可能会更容易。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-24T09:43:37.190

只需将带时间戳的 seq 转换为 float seq，如下所示：

```
xs
|> Seq.map (fun x -> x.value) 
```

# linux - 在 Linux 中更改默认 shell

> ID：13046192
> 
> 赞同：349
> 
> 时间：2012-10-24T09:15:37.913
> 
> 标签：linux, bash, shell, environment, tcsh

如何更改默认外壳？该`env`命令当前说：

```
SHELL=/bin/tcsh 
```

我想将其更改为 Bash。

* * *

## 回答 #1

> 赞同：471
> 
> 时间：2012-10-24T09:21:12.367

试试 linux 命令`chsh`。

详细的命令是`chsh -s /bin/bash`。它会提示您输入密码。您的默认登录 shell`/bin/bash`现在是。**您必须注销并重新登录才能看到此更改。**

以下内容来自手册页：

> chsh 命令更改用户登录 shell。这决定了用户初始登录命令的名称。普通用户只能更改自己帐户的登录 shell，超级用户可以更改任何帐户的登录 shell

此命令将永久更改默认登录 shell。

注意：如果您的用户帐户是远程的，例如 Kerberos 身份验证（例如 Enterprise RHEL），那么您将无法使用`chsh`.

* * *

## 回答 #2

> 赞同：161
> 
> 时间：2012-10-24T09:24:18.307

您可以直接为特定用户更改 passwd 文件或使用以下命令

```
chsh -s /usr/local/bin/bash username 
```

**然后注销并登录**

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-10-24T09:21:04.723

你应该有一个“骨架”在某个地方`/etc`，可能`/etc/skeleton`，或者检查默认设置，可能`/etc/default`或其他东西。这些是定义在登录期间设置的标准环境变量的脚本。

如果只是为了您自己的帐户：检查（隐藏）文件`~/.profile`和`~/.login`. 或者生成它们，如果它们不存在。这些也由登录过程评估。

# cuda - 为什么CUDA会四舍五入线程使用的寄存器数量？

> ID：13046193
> 
> 赞同：2
> 
> 时间：2012-10-24T09:15:42.920
> 
> 标签：cuda, nvidia

我正在分析一个内核，它在 GTX480 中每个线程使用 25 个寄存器和每个块 3568 字节的共享内存。内核配置为启动 16x16 线程，并且线程缓存首选项设置为共享。

根据 GTX480 的规格，该设备每个 SM 有 32768 个寄存器，因此可能有`25 regs x 256 threads per block x 6 blocks per SM`块同时运行。

但是，Compute Visual Profiler 和 Cuda Occupancy Calculator 报告每个 SM 只有 4 个块处于活动状态。我想知道为什么只有 4 个块是活动的，而不是 5 个，正如我预期的那样。

我发现的原因是CUDA将使用的寄存器数四舍五入为26，在这种情况下，活动块的数量为4。

为什么CUDA会四舍五入寄存器的数量？因为每个线程有 25 个寄存器，每个块有 256 个线程，所以每个 SM 最多可以有 5 个块，这显然是一个优势。

环境设置：

```
Device 0: "GeForce GTX 480"
CUDA Driver Version / Runtime Version          5.0 / 4.0
ptxas info: Compiling entry function '_Z13kernellS_PiS0_iiS0_' for 'sm_20'
ptxas info: Used 25 registers, 3568+0 bytes smem, 80 bytes cmem[0], 16 bytes cmem[2]
0 bytes stack frame, 0 bytes spill stores, 0 bytes spill loads
kernel config: 16x16 threads per block
kernel config: cudaFuncCachePreferShared 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T11:46:54.560

您没有正确解释正在发生的事情。这里没有对每个线程的寄存器数量进行四舍五入，而是对*每个 warp*的寄存器数量进行四舍五入。

您的 GPU 在每个 warp 的基础上分配寄存器，寄存器“页面大小”为 64 个寄存器（注意我使用这个术语很松散，我不知道精确的寄存器文件设计）。在您的情况下，warp 需要 25*32 = 800 个寄存器，必须四舍五入到最接近的“页面大小”64，每个 warp 有 832 个寄存器。每个块包含 8 个 warp（256 个线程），因此每个块需要 6656 个寄存器。这个内核的每个 SM 的最大块数是 32768 / 6656，向下舍入到最接近的整数，即。每个 SM 4 个块，而不是您期望的 5 个。

因此，非常简短的答案是寄存器文件分配粒度和页面大小决定了在这种情况下每个 SM 可以运行多少块。

# android - 如何在 Android 中创建此布局

> ID：13046195
> 
> 赞同：2
> 
> 时间：2012-10-24T09:15:49.607
> 
> 标签：android, android-layout, xamarin.android

我正在玩 Mono Droid 并尝试实现以下布局

![在此处输入图像描述](../Images/03a3aa229302408ff1ae7adfcfe71fd8.png)

我会使用什么类型的布局？Android 中是否有诸如锚点和停靠之类的东西，例如 WinForms，所以这可以有点独立？

这仅适用于平板电脑，更适合我的实验。左侧面板内的按钮将重复。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:04:41.193

根布局将如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:baselineAligned="false"
    android:orientation="horizontal"
    android:padding="5dp" >

    <RelativeLayout
        android:id="@+id/leftContainer"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="0.8" >
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/rightContainer"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1" >

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:padding="20dp" >

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:text="btn1" />

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerHorizontal="true"
                android:text="btn2" />

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:text="btn3" />
        </RelativeLayout>
    </RelativeLayout>

</LinearLayout> 
```

在左右布局的顶部添加动态项目作为 ListView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:05:03.063

线性布局将正常工作..您可以指定要捕获的空间的权重..

# php - 在服务器验证发生之前，数据需要自动存储在 html 元素中

> ID：13046203
> 
> 赞同：0
> 
> 时间：2012-10-24T09:16:17.640
> 
> 标签：php, javascript, jquery, html

我只有一个疑问：

我有一个表单，我在其中进行服务器端验证.. 我有带有验证的 np，但问题是：

在表单中，假设我输入了一些 9 个字段（而不是 10 个），它向我显示一个错误，说“缺少第 10 个字段”并且我在 9 个字段中输入的所有数据都必须重新输入..（有时它真的由于小错误，很难重新输入相同的数据）

因此，目标是认为无论之前在 textfield 或 textarea 或其他一些 html 元素中输入的数据，即使在服务器验证完成后，它也应该自动保存.. 这样用户就不需要再次重新输入..

我怎样才能做到这一点..我在谷歌尝试过，但不明白如何搜索这种情况，我还没有找到任何解决方案..

对不起我的英语不好.. 希望你 udnerstood 我的问题..

所以，有什么建议..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:24:15.517

[@Jim，这与您原来的问题](https://stackoverflow.com/questions/13014735/getting-syntax-error-using-jquery)中的情况相同。
（在有人指出这是一个不同的帐户之前，它是同一个人 - 长篇大论！）

当您在回发后将控件发送回浏览器时，PHP 不会保留控件的“状态”。

所以不是每次都发回以下内容......

```
<input type="text" id="mytext" name="mytext"> 
```

您需要发回最初作为控件的一部分输入的内容...

```
<input type="text" id="mytext" name="mytext"
   value="<?php echo $_POST['mytext']; ?>> 
```

使用复选框和收音机（这是您最初的问题），您需要类似...

```
<input type="checkbox" id="mycheck" name="mycheck"
   value="<?php echo (isset($_POST['mycheck']) ? "checked" : ""); ?>> 
```

当你谈论`<textarea>`控制时，你会做类似的事情......

```
<textarea id="mytext" name="mytext"><?php echo $_POST['mytext']; ?></textarea> 
```

* * *

**更新**

当您将 HTML 构建到`$echo`string 变量中时（而不仅仅是直接标记 HTML），您需要将上述代码**作为 string 的一部分**。

如果您在构建字符串**期间**`echo`执行命令，正在编辑的内容将立即发送到屏幕。然后，当您通过命令发送内容时，您会得到其他所有内容。**`echo``$echo``echo $echo;`**

 **所以，对于单行文本框，你会做......

```
$echo = '<input type="text" id="mytext" name="mytext" value="'. $_POST['mytext'] .'">'; 
```

对于一个复选框，你会做......

```
$echo = '<input type="checkbox" id="mycheck" name="mycheck" '. (isset($_POST['mycheck']) ? "checked" : "") .'>'; 
```

对于多行文本框，您会这样做....

```
$echo = '<textarea id="mytext" name="mytext">'. $_POST['mytext'] . '</textarea>'; 
```

因此，您会看到我们将控件的现有值作为您正在构建的字符串的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:50:07.780

它需要是

```
<div id="ArticlesOrderForm" class="formGroup"> 
<legend>Articles Order Form</legend> 
<b><label for="article_keywords">Keywords/Titles<span class="reqd">*</span> : </label></b> 
<textarea rows="6" cols="50" id="article_keywords" name="article_keywords" ><?php echo $_POST["article_keywords"]; ?></textarea> 
<b><label for="article_keywordDensity">Keyword Density (Optional): </label></b> 
<textarea rows="6" cols="50" id="article_keywordDensity" name="article_keywordDensity" ></textarea> 
```

但是为什么不使用 JavaScript 验证呢？

这个 jQuery 插件非常棒且易于使用：

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

您只需添加诸如 required 或 email 之类的类即可添加验证类型。**

# android - 玩转 Android Http 请求和响应

> ID：13046204
> 
> 赞同：0
> 
> 时间：2012-10-24T09:16:26.110
> 
> 标签：android, multithreading, httpresponse

我做了一个测试项目只是测试http请求和响应行为，有一个简单的http类扩展Asynctask来发出请求并获得响应。我正在对 http 响应执行一些字符串操作，在从类获取响应之前执行我的使用 http 响应的代码存在问题，这会导致空指针异常。因此，为了解决这个问题，我创建了一个线程，并且所有依赖于 http 响应的代码都放入了该线程。现在一切正常。但我想知道是否有其他技术来处理这个问题？还是我的方法好？请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:19:02.750

> 我想知道有没有其他技术来处理这个？

对 Android Http 请求使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

# c# - 动态 Linq 日期时间在哪里

> ID：13046211
> 
> 赞同：0
> 
> 时间：2012-10-24T09:16:58.457
> 
> 标签：c#, linq, dynamic-linq

我使用动态 linq 来构建查询并且我遇到了**DateTime问题**

*   queryResults- 包含上一个查询的结果列表。

*   sr.FromDate - 一个日期时间参数

我想做的是获得大于等于 sr.FromDate 参数的所有结果

```
var z = queryResults
            .Where("Min(Datetime) >= @0", sr.FromDate)
            .ToDictionary(g => g.FirstOrDefault().ServiceInstanceId, g => g.ToList()); 
```

例外：

```
ParseError  ,    '.' or '(' expected 
```

**编辑：**

只是为了澄清我们即时使用动态 linq **SR**对象包含字符串 int 和日期参数，如果参数的值不是 null 即时构建查询

**编辑 2**

我弄清楚了我的 privus 问题，但现在我遇到了另一个问题，我正在使用它来构建查询

```
 private static string GetQueryTemplet(string criteria)
    {

        switch (criteria)
        {

            case "FromDate":
                return " Min(Track.Datetime) >= {0} ";
            case "ToDate":
                return " Max(Track.Datetime) <=  {0} ";

             default:
                return "";
        } 
```

比我将数据传递给

```
 var z = queryResolts
             .Where(query)
            .ToDictionary(g => g.Key, g => g.Select(h => h.Track)); 
```

出于某种原因，我得到了这个例外

```
Operator '>=' incompatible with operand types 'DateTime' and 'Int32' 
```

我试图以多种方式解析它，但没有任何效果......

谢谢三木

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:27:51.750

假设您的结果有一个 DateTime 列

```
var z = queryResults
            .Where(result => result.DateTime >= sr.FromDate)
            .ToDictionary(g => g.FirstOrDefault().ServiceInstanceId, g => g.ToList()); 
```

# ubuntu - Smarty 模板不会在 Ubuntu 上刷新

> ID：13046216
> 
> 赞同：0
> 
> 时间：2012-10-24T09:17:12.200
> 
> 标签：ubuntu, smarty, lamp

在 Windows 环境中使用 Smarty 模板（在 WAMP 上）。一切正常。就在我想让它在家里用 Ubuntu 上的 LAMP 工作时，奇怪的事情发生了：我看到我的 Smarty 模板在浏览器中正常工作，但是当我对我的 .tpl 文件进行更改时，Apache 似乎没有赶上使用新的模板状态。我没有收到错误或其他东西，我只是继续看到相同的旧模板，就像它被永久缓存一样。Apache 重启不能解决这个问题。有人对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-03T18:34:23.677

您可以通过在“$smarty = new Smarty;”之后添加这两行来解决它

```
$smarty->caching = false;
$smarty->force_compile = true; 
```

这对开发很方便，但在生产中应该避免。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:23:05.080

清除我的 templates_c 目录后，该文件夹似乎没有写入权限。我给了它一个 chmod 777 现在它工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:23:09.370

家里的 $compile_check 参数不是设置为“false”吗？默认情况下它是“真”，但也许你在某处将它设置为“假”？ [http://www.smarty.net/docsv2/ru/variable.compile.check.tpl](http://www.smarty.net/docsv2/ru/variable.compile.check.tpl)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T09:23:37.390

如果您使用 Smarty 缓存，那么这肯定是问题所在。

尝试刷新缓存。在命令之前`$smarty->display('template.tpl')`尝试放置：

```
// clear only cache for template.tpl
$smarty->clear_cache('template.tpl'); 
```

或者

```
// clear out all cache files
$smarty->clear_all_cache(); 
```

希望这可以帮助！

# ruby-on-rails - Rails 从控制器视图中查看哈希

> ID：13046218
> 
> 赞同：0
> 
> 时间：2012-10-24T09:17:20.983
> 
> 标签：ruby-on-rails, ruby, view, hash

我有这样的控制器动作：

```
@constr_num.each do |o|
      as_oem = get_from_as_oem(o.ARL_SEARCH_NUMBER)
      if as_oem.present?
        oem_art << as_oem
      end
    end    
    @oem_art = oem_art.to_a.uniq 
```

get_from_as_oem 看起来像这样：

```
def get_from_as_oem(oem)  

    require 'mechanize'
   *************************
    html = page.body

    doc = Nokogiri::HTML(html)
    doc.encoding = 'utf-8'

    rows = doc.search('//table[@id = "MainContent_GridView1"]//tr')
      @details = rows.collect do |row|
          detail = {}
          [
            [:car, 'td[1]/text()'],
            [:article, 'td[2]/text()'],
            [:group, 'td[3]/text()'],
            [:price, 'td[4]/text()'],
          ].each do |name, xpath|
            detail[name] = row.at_xpath(xpath).to_s.strip
          end
          detail
      end
    @details  
  end 
```

如果在视图中我写：=@oem_art 我得到

```
[[{:car=>"", :article=>"", :group=>"", :price=>""}, {:car=>"Volkswagen", :article=>"1C0959799B 001", :group=>"STEUERG.", :price=>"274,22"}, {:car=>"Volkswagen", :article=>"1C0959799B 003", :group=>"STEUERG.", :price=>"274,22"}, {:car=>"Volkswagen", :article=>"1C0959799B 00E", :group=>"STEUERG.", :price=>"274,22"}, {:car=>"Volkswagen", :article=>"1C0959799B 00F", :group=>"STEUERG.", :price=>"274,22"}, {:car=>"Volkswagen", 
etc... 
```

那我怎么能正常查看它，例如 .each |c| c.汽车等...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:29:05.517

```
<% @oem_art.each_pair do |oem_key, oem_value| %>
  <%= oem_key %> => <%= oem_value %></br>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:25:51.960

您可以使用终端或浏览器。您可以使用`puts myhash.inspect`将您的“转储”哈希打印到终端。日志文件。

或者你在你的控制器中做这样的事情：`render text: myhash.inspect`

如果您更喜欢解决方案之一，您还可以使用`ap`gem awesome_print 来增强这种体验，它在您的控制台中提供更漂亮和彩色的输出。最重要的是，您可以`pry`尝试一下。有了它，您可以设置断点，然后在该位置启动交互式控制台。

真棒打印：[https](https://github.com/michaeldv/awesome_print)
://github.com/michaeldv/awesome_print 撬：[https ://github.com/pry/pry](https://github.com/pry/pry)

另外： http: [//guides.rubyonrails.org/debugging_rails_applications.html](http://guides.rubyonrails.org/debugging_rails_applications.html)

# php - 如果有像 ucfirst() 这样的 PHP 函数会忽略 html？

> ID：13046229
> 
> 赞同：4
> 
> 时间：2012-10-24T09:18:00.160
> 
> 标签：php, regex

我正在以编程方式清理评论和其他用户提交的内容中的一些基本语法。大写 I、句子的第一个字母等。评论和内容与 HTML 混合在一起，因为用户在格式化文本时有一些选项。

事实证明，这比预期的更具挑战性，尤其是对于 PHP 和 regex 的新手而言。

如果有像 ucfirst 这样的函数会忽略 html 以帮助大写句子？

此外，任何有关在 html 中清理此类文本的链接或教程将不胜感激。请在评论中留下您认为有帮助的任何内容。谢谢！

编辑：示例文本：

```
<div><p>i wuz walkin thru the PaRK and found <strong>ur dog</strong>. <br />i hoPe to get a reward.<br /> plz call or text 7zero4 8two8 49 sevenseven</div> 
```

我需要它（最终）

```
<div><p>I was walking through the park and found <strong>your dog<strong>. <p>I hope to get a reward.</p><p> Please call or text (704) 828-4977.</p> 
```

我知道这比预期的问题要远一些，但我的想法是逐步做到这一点。ucfirst() 只是我用来在每次扫描时进行一次小清理的众多函数之一。即使我必须通过过滤器运行文本 100 次，当站点没有流量时，它也会在 cron 运行中运行。我希望有一个讨论论坛可以继续下去，因为显然会有一些关于继续这种方法的好主意。关于如何通过各种方式将其作为一个整体项目来处理的任何想法，请发表评论。

我想本着问题本身的精神。那么 ucfirst 将不是最好的函数，因为它不能接受要忽略的事物的参数列表。一个标志 IGNORE_HTML 会很棒！

鉴于这是一个 PHP 问题，那么下面推荐的 DOM 解析器听起来是最好的答案吗？想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T09:20:53.683

您还可以将 CSS 伪元素添加到所需的元素，如下所示：

```
div:first-letter {
    text-transform: uppercase;
} 
```

但是您可能需要改变方式，打印出您的句子（如果您将它们全部打印在一个巨大的标签中），因为 CSS 缺乏检测单个标签内新句子开始的能力:(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:30:50.953

您可能应该使用 DOM 解析器（[内置的](http://php.net/manual/en/book.dom.php)解析器或例如[这个](http://simplehtmldom.sourceforge.net/)非常易于使用的解析器）。

`preg_replace_callback`遍历 HTML 中的所有文本节点并使用和`ucfirst`像这样的正则表达式执行清理：

```
'/(\s*)([^.?!]*)/' 
```

这将匹配一串空格，然后匹配尽可能多的非句尾标点符号。`"`然后将在第一个捕获组中找到实际的句子（以字母开头，除非您的句子以 开头，这会使事情变得有点复杂）。

但是从您的问题来看，我想您已经在做类似后者的事情，而您的代码只是在 HTML 标记上窒息。这是一些示例代码，用于使用我链接的第二个 DOM 解析器获取所有文本节点：

```
require 'simple_html_dom.php';

$html = new simple_html_dom();
$html->load($fullHtmlStr);

foreach($html->find('text') as $textNode)
    $textNode = cleanupFunction($textNode);

$cleanedHtmlStr = $html->save(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:25:09.540

在 html 中这将非常困难，因为您将构建某种 html 解析器。我的建议是在将文本转换为 html 之前清理文本，此时您将其从数据库中拉出。或者更好的是，清理一次数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T18:58:51.143

这应该这样做：

```
function html_ucfirst($s) {
    return preg_replace_callback('#^((<(.+?)>)*)(.*?)$#', function ($c) {
            return $c[1].ucfirst(array_pop($c));
    }, $s);
} 
```

转换

*   `<b>foo</b>`到`<b>Foo</b>`,
*   `<div><p>test</p></div>`到`<div><p>Test</p></div>`,
*   还要。`bar`_`Bar`

编辑：根据您的详细问题，您可能希望将此功能应用于每个句子。您必须先解析文本（例如按句点分割）。

# c# - 使用操作创建任务

> ID：13046232
> 
> 赞同：14
> 
> 时间：2012-10-24T09:18:20.707
> 
> 标签：c#, .net, task-parallel-library

我不知何故觉得我缺少一些基本的东西。这是我的问题。

我正在尝试创建一个 System.Threading.Tasks.Task 实例来执行接受某种类型参数的操作。我以为我可以做类似的事情

```
void DoWork(MyClass obj) {} //My action that accepts a parameter of type 'MyClass'

MyClass obj = new MyClass(); 
Action<MyClass> action = DoWork; //action that points to the method
Task task = new Task(action,obj); //task that would execute 'DoWork' with 'obj' as the parameter when I call Start. 
```

显然这不会编译。似乎我只能将 an`Action<object>`而不是 an`Action<T>`用于任务，然后在我的方法中将“对象”转换为 T 。

我怎样才能最有效地实现我想要的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T10:26:28.183

也可以直接使用：

```
MyClass obj = new MyClass();
Task task = Task.Run(() => DoWork(obj)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T09:23:21.297

你可以使用

```
Action<Object> action = o => DoWork((MyClass)o);
Task task = new Task(action, obj); 
```

* * *

~~如果您使用的是 .NET 4.0 或更高版本，则可以使用[逆变器](http://msdn.microsoft.com/en-us/library/dd799517%28v=vs.100%29.aspx)来实现您的目标，而无需引入新的委托~~

 ~~```
//不正确的代码，在运行时抛出 InvalidCastException
动作动作 = DoWork；
任务task = new Task((Action)action, obj);

```~~  ~~**编辑：**

感谢@svick 指出，第二个选项不正确：我太忙于整理，我监督的 Action 是协变还是逆变（实际上是逆变，至少我是对的），那在这种情况下，我需要*协方差。*

逆变意味着你可以做

```
Action<object> action1 = someAction;
Action<SubClass> action2 = action1; 
```

没有明确的铸造。~~

# java - Android：错误没有告诉我任何我可以解决的问题

> ID：13046235
> 
> 赞同：0
> 
> 时间：2012-10-24T09:18:33.127
> 
> 标签：java, android, error-handling

当按下按钮时，我的应用程序开始崩溃，通常错误日志将我指向正确的方向，但这次我无法破译它。任何帮助将不胜感激：

错误：

```
10-24 10:15:31.105: E/AndroidRuntime(22640): FATAL EXCEPTION: main
10-24 10:15:31.105: E/AndroidRuntime(22640): java.lang.IllegalStateException: Could not execute method of the activity
10-24 10:15:31.105: E/AndroidRuntime(22640):    at android.view.View$1.onClick(View.java:3116)
10-24 10:15:31.105: E/AndroidRuntime(22640):    at android.view.View.performClick(View.java:3644)
10-24 10:15:31.105: E/AndroidRuntime(22640):    at android.view.View$PerformClick.run(View.java:14313)
10-24 10:15:31.105: E/AndroidRuntime(22640):    at android.os.Handler.handleCallback(Handler.java:605)
10-24 10:15:31.105: E/AndroidRuntime(22640):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-24 10:15:31.105: E/AndroidRuntime(22640):    at android.os.Looper.loop(Looper.java:137)
10-24 10:15:31.105: E/AndroidRuntime(22640):    at android.app.ActivityThread.main(ActivityThread.java:4517)
10-24 10:15:31.105: E/AndroidRuntime(22640):    at java.lang.reflect.Method.invokeNative(Native Method)
10-24 10:15:31.105: E/AndroidRuntime(22640):    at java.lang.reflect.Method.invoke(Method.java:511)
10-24 10:15:31.105: E/AndroidRuntime(22640):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
10-24 10:15:31.105: E/AndroidRuntime(22640):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
10-24 10:15:31.105: E/AndroidRuntime(22640):    at dalvik.system.NativeStart.main(Native Method)
10-24 10:15:31.105: E/AndroidRuntime(22640): Caused by: java.lang.reflect.InvocationTargetException
10-24 10:15:31.105: E/AndroidRuntime(22640):    at java.lang.reflect.Method.invokeNative(Native Method)
10-24 10:15:31.105: E/AndroidRuntime(22640):    at java.lang.reflect.Method.invoke(Method.java:511)
10-24 10:15:31.105: E/AndroidRuntime(22640):    at android.view.View$1.onClick(View.java:3111)
10-24 10:15:31.105: E/AndroidRuntime(22640):    ... 11 more
10-24 10:15:31.105: E/AndroidRuntime(22640): Caused by: java.lang.NullPointerException
10-24 10:15:31.105: E/AndroidRuntime(22640):    at com.directenquiries.assessment.tool.AddAsset.AddAsset(AddAsset.java:476)
10-24 10:15:31.105: E/AndroidRuntime(22640):    ... 14 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:21:09.803

```
10-24 10:15:31.105: E/AndroidRuntime(22640): Caused by: java.lang.NullPointerException
10-24 10:15:31.105: E/AndroidRuntime(22640):    at com.directenquiries.assessment.tool.AddAsset.AddAsset(AddAsset.java:476) 
```

那是你的代码吗？如果是，请检查 AddAsset.java 中的第 476 行并查找未初始化的空引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:21:21.857

在第 476 行`com.directenquiries.assessment.tool.AddAsset`，有一个引用 的变量`null`。您正在对这个变量调用一些方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:24:25.367

好吧，在没有看到您的代码的情况下，您似乎正在尝试使用反射并正在寻找不存在的东西、方法或值。编辑其实我认为你正在寻找一种方法

# python - ParseError: not well-formed (invalid token) using cElementTree

> ID：13046240
> 
> 赞同：33
> 
> 时间：2012-10-24T09:18:51.633
> 
> 标签：python, parsing, elementtree

我从可能包含未经处理的用户贡献内容的外部源接收 xml 字符串。

以下 xml 字符串在中给出了 ParseError `cElementTree`：

```
>>> print repr(s)
'<Comment>dddddddd\x08\x08\x08\x08\x08\x08_____</Comment>'
>>> import xml.etree.cElementTree as ET
>>> ET.XML(s)

Traceback (most recent call last):
  File "<pyshell#4>", line 1, in <module>
    ET.XML(s)
  File "<string>", line 106, in XML
ParseError: not well-formed (invalid token): line 1, column 17 
```

有没有办法让 cElementTree 不抱怨？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-24T09:25:11.857

它似乎在抱怨`\x08`你需要逃避它。

**编辑：**

或者您可以让解析器使用忽略错误`recover`

```
from lxml import etree
parser = etree.XMLParser(recover=True)
etree.fromstring(xmlstring, parser=parser) 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-11-25T22:24:57.473

我遇到了同样的错误（使用 ElementTree）。在我的情况下，这是因为编码，我能够解决它而无需使用外部库。希望这有助于其他人根据标题找到这个问题。（[参考](https://stackoverflow.com/a/9209547/2697658)）

```
import xml.etree.ElementTree as ET
parser = ET.XMLParser(encoding="utf-8")
tree = ET.fromstring(xmlstring, parser=parser) 
```

**编辑**：根据评论，这个答案可能已经过时了。但是，当它被回答时，这确实起作用了......

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-24T09:35:26.873

请参阅另一个问题的[答案以及 XML 规范的](https://stackoverflow.com/a/5110103/113195)[相应部分](http://www.w3.org/TR/xml/#charsets)。

退格[U+0008](http://codepoints.net/U+0008)是 XML 文档中的无效字符。它必须表示为转义的实体`&#8;`，并且不能简单地出现。

如果您需要处理此 XML 片段，则必须在将其输入 XML 解析器之前替换`\x08`in 。`s`

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-05-08T10:56:24.530

上述修复均不适合我。唯一有效的是使用`BeautifulSoup`而不是`ElementTree`如下：

```
from bs4 import BeautifulSoup

with open("data/myfile.xml") as fp:
    soup = BeautifulSoup(fp, 'xml') 
```

然后你可以搜索树：

```
soup.find_all('mytag') 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-02-25T19:24:18.050

这个代码片段对我有用。我在解析一批 XML 文件时遇到问题。我不得不将它们编码为“iso-8859-5”

```
import xml.etree.ElementTree as ET

tree = ET.parse(filename, parser = ET.XMLParser(encoding = 'iso-8859-5')) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-02-13T14:29:09.520

这很可能是编码错误。例如，我有一个以 UTF-8-BOM 编码的 xml 文件（从 Notepad++ 编码菜单中检查）并收到类似的错误消息。

解决方法（Python 3.6）

```
import io
from xml.etree import ElementTree as ET

with io.open(file, 'r', encoding='utf-8-sig') as f:
    contents = f.read()
    tree = ET.fromstring(contents) 
```

检查 xml 文件的编码。如果它使用不同的编码，请相应地更改“utf-8-sig”。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-09-06T19:35:48.897

使用 Python 的 ElementTree 为我提供了一个解决方案...这有无效的令牌错误：

```
# -*- coding: utf-8 -*-
import xml.etree.ElementTree as ET

xml = u"""<?xml version='1.0' encoding='utf8'?>
<osm generator="pycrocosm server" version="0.6"><changeset created_at="2017-09-06T19:26:50.302136+00:00" id="273" max_lat="0.0" max_lon="0.0" min_lat="0.0" min_lon="0.0" open="true" uid="345" user="john"><tag k="test" v="Съешь же ещё этих мягких французских булок да выпей чаю" /><tag k="foo" v="bar" /><discussion><comment data="2015-01-01T18:56:48Z" uid="1841" user="metaodi"><text>Did you verify those street names?</text></comment></discussion></changeset></osm>"""

xmltest = ET.fromstring(xml.encode("utf-8")) 
```

但是，它可以在编码类型中添加连字符：

```
<?xml version='1.0' encoding='utf-8'?> 
```

最奇怪的。[有人在](https://stackoverflow.com/a/20526524/4288232)[python 文档](http://docs.python.org/2/library/xml.dom.minidom.html#id3)中发现了这个脚注：

> XML 输出中包含的编码字符串应符合适当的标准。例如，“UTF-8”有效，但“UTF8”无效。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-12-13T09:57:01.700

在整个 WWW 中进行了大量搜索后，我才发现如果您希望 XML 解析器正常工作，您必须转义某些字符！以下是我如何做到并为我工作的：

```
escape_illegal_xml_characters = lambda x: re.sub(u'[\x00-\x08\x0b\x0c\x0e-\x1F\uD800-\uDFFF\uFFFE\uFFFF]', '', x) 
```

并像往常一样使用它：

```
ET.XML(escape_illegal_xml_characters(my_xml_string)) #instead of ET.XML(my_xml_string) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-06-23T19:38:21.527

我一直陷入类似的问题。终于弄清楚了在我的特殊情况下的根本原因是什么。如果您从位于同一文件夹中的多个 XML 文件中读取数据，您还将解析 .DS_Store 文件。在解析之前添加这个条件

```
for file in files:
    if file.endswith('.xml'):
       run_your_code... 
```

这个技巧也帮助了我

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-10-24T05:49:26.527

在我的情况下，lxml 解决了这个问题

```
from lxml import etree

for _, elein etree.iterparse(xml_file, tag='tag_i_wanted', unicode='utf-8'):
    print(ele.tag, ele.text) 
```

在另一种情况下，

```
parser = etree.XMLParser(recover=True)
tree = etree.parse(xml_file, parser=parser)
tags_needed = tree.iter('TAG NAME') 
```

感谢[东海岸西](https://stackoverflow.com/a/54228063/1693901)

蟒蛇 2.7

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-08-29T18:28:44.573

唯一对我有用的是我必须在打开文件时添加模式和编码，如下所示：

```
with open(filenames[0], mode='r',encoding='utf-8') as f:
     readFile() 
```

否则，如果我只是这样做，每次都会失败并出现无效令牌错误：

```
 f = open(filenames[0], 'r')
 readFile() 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-02-05T10:20:02.003

帮助我解决这个错误的是 Juan 的回答 - [https://stackoverflow.com/a/20204635/4433222](https://stackoverflow.com/a/20204635/4433222) 但还不够 - 经过努力，我发现需要使用 UTF-8 保存 XML 文件，而不需要 BOM 编码。

该解决方案不适用于“普通”UTF-8。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2018-09-06T13:36:28.190

我在这里的答案中尝试了其他解决方案，但没有运气。由于我只需要从单个 xml 节点中提取值，因此我放弃并编写了我的函数来执行此操作：

```
def ParseXmlTagContents(source, tag, tagContentsRegex):
    openTagString = "<"+tag+">"
    closeTagString = "</"+tag+">"
    found = re.search(openTagString + tagContentsRegex + closeTagString, source)
    if found:   
        start = found.regs[0][0]
        end = found.regs[0][1]
        return source[start+len(openTagString):end-len(closeTagString)]
    return "" 
```

示例用法是：

```
<?xml version="1.0" encoding="utf-16"?>
<parentNode>
    <childNode>123</childNode>
</parentNode>

ParseXmlTagContents(xmlString, "childNode", "[0-9]+") 
```

# android - 将触摸事件绑定到数组创建的元素

> ID：13046246
> 
> 赞同：0
> 
> 时间：2012-10-24T09:19:06.650
> 
> 标签：android, jquery

如何使触摸事件在此函数创建的每个元素的单个元素上起作用。此代码不起作用，因为即使我触摸其中一个，它也会使所有“#demo-1 p”背景颜色一起变化。

```
function token1(r) {
    for (var j = 0; j < r.length; j++) {
        if (r[j].match(srr[0], "g")) {
            $('<p>').html(r[j]).appendTo("#demo-1");
            scnt++;     
            $('#demo-1 p').bind("touchstart", function (event) {
                $('#demo-1 p').css('background-color', 'red')
            });
            $('#demo-1 p').bind("touchmove", function (event) {
                $('#demo-1 p').css('background-color', 'white')
            });
            $('#demo-1 p').bind("touchend", function (event) {
                $('#demo-1 p').css('background-color', 'white')
            });
        } 
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T03:50:42.567

好的，我通过定位它的子元素得到它

```
$("#demo-1").bind("touchstart", function(e) {
            var $target = $(e.target);
            if ($target.is("p")) {
                $target.css('background-color', 'red')
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:59:47.957

你试过了`jQuery.on()`吗？它真的很容易使用：

```
$( '#demo' ).on('touchstart', 'p', function(){
    $(this).css('background-color', 'red');
});
... 
```

**注意**：*这应该只执行一次。所以把它放在 for 循环之外（之前或之后）。*

# ios - “时钟设置为错误日期”错误

> ID：13046247
> 
> 赞同：1
> 
> 时间：2012-10-24T09:19:17.250
> 
> 标签：ios, foursquare

我正在开发一个新的 IOS 应用程序，并且我正在使用 Foursquare API 进行场地。出于某种原因，在下午 4:00（UTC -3）之后，我收到以下错误：“时钟设置为错误日期”。我不明白为什么。有人有解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:06:00.177

找到了解决方案。我正在使用 ASIHHTPRequest ，由于某种原因，错误的发生没有明显的原因。我补充说：

```
[request setValidatesSecureCertificate:YES]; 
```

它解决了这个问题。但我不知道为什么它有时会失败。

见：[这个问题](https://stackoverflow.com/questions/8394293/how-to-accept-self-signed-certificate-with-asihttprequest)

# registration - 使用注册插件扩展权限

> ID：13046253
> 
> 赞同：0
> 
> 时间：2012-10-24T09:19:30.650
> 
> 标签：registration, facebook-social-plugins, facebook-login, facebook-authorization

理想情况下，我想使用 FB 注册插件，但最终会获得一些超出基本权限的额外权限。我知道，这是一个已被多次回答的老问题（例如，[这里](http://facebook.stackoverflow.com/questions/5074701/collecting-wall-posting-permission-when-using-the-facebook-registration-plugin)、[这里](http://facebook.stackoverflow.com/questions/5959229/facebook-registration-plugin-how-to-set-advanced-permissions-offline-access-e)和[这里](http://facebook.stackoverflow.com/questions/4915778/facebook-registration-and-authentication)。

答案总是一样的：你不能这样做，如果你需要额外的权限，你必须在后续步骤中请求它们（这不是一个特别友好的用户体验！）这很好，但一方面: 这显然不是真的（至少不完全是）。

使用 Facebook 注册 Spotify，您会看到他们正在使用 FB 注册插件为其提供动力。点击“注册”后，我的注册就完成了（没有后续的审批步骤）。这是一个全新的原始 FB 帐户。然后我去查看在我的帐户的 FB 应用程序设置中授予 Spotify 的权限，我发现它具有 offline_access 权限。怎么回事？我从未明确授予该权限，并且根据 FB 文档，无法使用注册插件来实现这一点。然而 Spotify 已经成功了吗？现在我知道offline_access 正在消失，但我认为如果他们可以获得此权限，也许有一些通用的方法可以做到这一点。谁能解释一下？是否给了 Spotify 一些神奇的后门，或者我缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T12:24:55.857

如前所述，在评论中，确实，某些合作伙伴和应用程序具有自动设置的特殊权限，例如列入白名单的离线访问。

使用新的登录对话框，权限授予体验应该有所不同。[https://developers.facebook.com/docs/facebook-login/overview/#logindialog](https://developers.facebook.com/docs/facebook-login/overview/#logindialog)

# asp.net - 在 asp.net 中使用会话注销

> ID：13046256
> 
> 赞同：3
> 
> 时间：2012-10-24T09:19:41.750
> 
> 标签：asp.net

我正在尝试使用清除“注销”链接中的会话`Session.Abandon();`。注销后我重定向回登录页面。但即使在注销后我也可以使用浏览器的后退按钮访问以前的页面。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:43:23.620

根据您的评论，您的会话已被放弃。

您看到的是浏览器保存在缓存中的页面“快照”。只要在您的代码中确保在允许用户在您的页面上执行任何任务之前您有一个有效的会话，您应该没问题。

关于如何尝试和禁用缓存有各种答案，因此按下后退按钮不会显示上一页 - 但就您的问题而言 - 您已经注销并且您的会话消失了......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:22:44.817

尝试将其放在您的代码隐藏中：

```
Page.Response.Cache.SetCacheability(HttpCacheability.NoCache) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:37:45.407

您需要为该页面禁用浏览器上的所有类型的缓存：

```
Response.Cache.SetExpires(DateTime.UtcNow.AddYears(-4));
Response.Cache.SetValidUntilExpires(false);
Response.Cache.SetCacheability(HttpCacheability.NoCache);
Response.Cache.SetRevalidation(HttpCacheRevalidation.AllCaches);
Response.Cache.SetNoStore();
Response.ExpiresAbsolute = DateTime.Now.Subtract(new TimeSpan(1, 0, 0, 0));
Response.Expires = 0;
Response.CacheControl = "no-cache";
Response.AppendHeader("Pragma", "no-cache");
Response.Cache.AppendCacheExtension("must-revalidate, proxy-revalidate, post-check=0, pre-check=0"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T09:33:58.113

试试这个代码：

```
// Code disables caching by browser. Hence the back browser button
// grayed out and could not causes the Page_Load event to fire 
Response.Cache.SetCacheability(HttpCacheability.NoCache);
Response.Cache.SetExpires(DateTime.UtcNow.AddHours(-1));
Response.Cache.SetNoStore(); 
```

如果你想把它放在那里，你可以在 aspx 表单中添加类似的东西：

```
<META Http-Equiv="Cache-Control" Content="no-cache">
<META Http-Equiv="Pragma" Content="no-cache">
<META Http-Equiv="Expires" Content="0"> 
```

或者可以在注销事件中设置它：

```
protected void LogOut()   
{       
     Session.Abandon();       
     string nextpage = "Logoutt.aspx";       
     Response.Write("<script language="javascript">");             
     Response.Write("{");       
     Response.Write(" var Backlen=history.length;");       
     Response.Write(" history.go(-Backlen);");       
     Response.Write(" window.location.href='" + nextpage + "'; ");
     Response.Write("}");       
     Response.Write("</script>");   
} 
```

参考见： http: [//www.codeproject.com/Tips/135121/Browser-back-button-issue-after-logout](http://www.codeproject.com/Tips/135121/Browser-back-button-issue-after-logout)

# actionscript-3 - mxmlc load-externs 被忽略

> ID：13046263
> 
> 赞同：2
> 
> 时间：2012-10-24T09:20:18.413
> 
> 标签：actionscript-3, actionscript, flash, mxmlc

我使用 FlashDevelop 4 开发了一个 ActionScript 3 项目。我有一个包含所有代码的主 SWF。我想将一些主要的 SWF 代码导出到模块中。

我创建了一个模块来保存分离的逻辑（通过扩展 ModuleBase）。

我不希望模块 SWF 引用主 SWF 中可用的任何内容，因此我使用 -link-report 运行主 SWF 编译并获得一个包含所有主要 SWF 引用的 report.xml 文件。

我尝试编译模块 (mxmlc)，同时使用 load-externs=report.xml 选项排除主 SWF 中的任何类或库。

编译给了我一个错误，说缺少一些库引用，但错误消息引用了假定只包含在主 SWF 中的类。我检查了 report.xml 文件，它确实显示了这些类被引用。

我尝试以 3 种不同的方式运行编译并且总是得到相同的结果：

1.  使用 FlashDevelope 中的构建当前文件并为文件提供应运行的命令的标题。
2.  使用命令行（Windows）。
3.  使用 Ant 构建脚本。

有谁知道为什么会发生这种情况？如果它可以帮助任何人指导我找到解决方案，我很乐意提供有关我的问题的更多信息。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:47:13.830

事实证明，它并没有忽略 load-externs。

load-externs 排除了一些库，因此在编译期间找不到这些库。

我通过将库路径添加到编译来解决了这个问题。这是通过添加标志来完成的：-l+=lib\

# java - 在 Java 中很难使用泛型类和泛型方法

> ID：13046268
> 
> 赞同：3
> 
> 时间：2012-10-24T09:20:35.010
> 
> 标签：java, generics

java新手，我确实搜索了示例，但我真的很难。

我有一个使用泛型的节点类：

```
public class Node<T> {

    private int key;
    private T data;
    private Node<T> nextNode;

} 
```

节点没问题。

```
public class GenericDictionary implements GenericDictionary_interface {

    private int capacity;
    private Node<T> [] slots;

    public void add (Node<T> newNode) {

    }
} 
```

我想，这就是我会写它的方式。我希望 GenericDictionary 与节点对象一起工作。

我收到一个错误：“T 无法解析为类型”。

问题是我不知道它应该是什么样子。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T09:22:23.007

您的`GenericDictionary`课程也需要是通用的：

```
public class GenericDictionary<T> ...
{
} 
```

到那时，`Node<T>`在课堂上使用就可以了。

如果接口包含该`add`方法，则该接口也应该是通用的：

```
public class GenericDictionary<T> implements Dictionary<T>
{
} 
```

顺便说一句，我建议不要使用名为 的接口`GenericDictionary_interface`......如果只有一个实现，你可以调用接口`GenericDictionary`和实现`GenericDictionaryImpl`- 有点可怕，但相当普遍。如果有多个实现，请通过一些不同的方面来命名实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T09:22:41.680

在您的第二个中，它不知道 T 是什么类型，因此您需要将其添加到声明中

```
public class GenericDictionary<T> implements GenericDictionary_interface {

private int capacity;
private Node<T> [] slot;

public void add (Node newNode) {

} 
```

}

# android - 如何在Android中单击一个选项卡进入主屏幕

> ID：13046270
> 
> 赞同：0
> 
> 时间：2012-10-24T09:20:45.020
> 
> 标签：android, tabs

假设我有两个选项卡 Tab1 和 Tab2
以及 Tab1 A、B、C 中的三个活动
现在用户导航到 A->B->C
如果我在活动 C 中并且我单击 Tab1 我将如何返回活动 A？

我希望它的功能与 iPhone 相同，即当用户单击选项卡时，他将返回该选项卡的主屏幕。

编辑：我正在使用 ActivityGroup

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:37:01.717

有很多问题，例如 [http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)

[这个](https://stackoverflow.com/questions/3338841/how-to-clear-current-activities-in-the-stack)和[这个](https://stackoverflow.com/questions/3408388/how-to-kill-sub-activities-and-bring-activity-to-top-of-stack)

可能这对你有帮助

```
Intent intent = new Intent(this, MainActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); // Removes other Activities from stack
startActivity(intent); 
```

如果要加载旧状态，则需要先保存它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:39:07.653

一个选项卡中不能有 3 个活动。相反，您应该在选项卡中使用片段并在堆栈中添加或删除片段。

我建议您在一个容器中使用 3 个片段，并在您何时返回初始状态时使用您的第`replace`一个片段调用[FragmentTransaction 。](http://developer.android.com/reference/android/app/FragmentTransaction.html)

# windows - 如何在 Windows 7 上使用 PostgreSQL 8.4.7 以“postgres”用户身份登录

> ID：13046284
> 
> 赞同：4
> 
> 时间：2012-10-24T09:21:13.793
> 
> 标签：windows, postgresql

我在 Windows 7 桌面上安装了 PostgreSQL。

通常 PostgreSQL 会在我的桌面上创建新帐户，但是当我想切换用户时，没有名为`postgres`. 然后我检查了目录“C”中的用户文件夹，并且已经有一个名为`postgres`.

`postgres`但是为什么我不能使用帐户登录到我的桌面？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T09:32:29.553

该`postgres`帐户是服务帐户。它没有登录权限，无法登录。您可以使用`runas.exe`PostgreSQL 用户帐户来运行命令，或者右键单击程序并使用“运行方式...”。

在 PostgreSQL 9.2 及更高版本中，安装程序`NETWORKSERVICE`默认将 PostgreSQL 放入，因此不需要`postgres`创建用户帐户。

通常，*无需*`postgres`在 Windows 上以用户身份运行程序。只需指定要连接到 PostgreSQL 服务器的用户，例如：

```
psql -U postgres -h localhost dbname 
```

# objective-c - 核心数据故障

> ID：13046291
> 
> 赞同：7
> 
> 时间：2012-10-24T09:21:59.760
> 
> 标签：objective-c, ios, core-data, nsmanagedobjectcontext, fault

我正在使用 Restkit 从服务器映射 Json 数据，并通过从数据库中获取来显示这些数据。我的视图中有一个刷新按钮，它再次执行上述操作。

场景：我有两个表 Key & Profile 有一对一的关系。我正在使用以下代码从数据库中获取数据

```
NSFetchRequest *fetchRequest = [Key fetchRequest];
[fetchRequest setRelationshipKeyPathsForPrefetching:[NSArray arrayWithObject:@"Profile"]];
[fetchRequest setIncludesSubentities:YES];
NSArray *sortedObjects = [Key executeFetchRequest:fetchRequest]; 
```

上面的数组返回数据库中的所有对象。但是当我使用断点检查时，我遇到了一些核心数据错误，这是没有显示所有数据的原因。

//sortedObjects中的所有数据都是这样的。

```
<Key: 0x889f2f0> (entity: Key; id: 0x889e400 <x-coredata://981A476D-55AC-4CB4-BBD8-E0285E522412/Key/p1489> ; data: <fault>) 
```

任何的想法

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-24T10:40:48.143

这可能是对什么是“故障”的误解。

如[Apple 文档](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreData/Articles/cdFaultingUniquing.html)中所述：

> 故障是 Core Data 用来减少应用程序内存使用的一种机制。

和

> 故障是表示尚未完全实现的托管对象的占位符对象，或表示关系的集合对象：

因此，如果您在使用 Core Data 时在日志中看到“故障”一词，这并不意味着发生了错误。您在您的应用程序中看到了哪些意外行为？

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-25T00:36:34.840

你实际上并没有描述一个问题。Core Data 错误不是错误——它更像是文件系统中的页面错误。这只是意味着尚未读取数据。你所描述的是完全正常和预期的。如果您访问返回对象的任何属性，错误将被自动填充，您将看到结果。因此，如果您的`Key`实体有一个名为 的属性`name`，您仍然可以查找它们的值`name`，甚至可以根据需要记录它们。

您*可以*通过在执行获取请求之前添加它来强制填充错误：

```
[fetchRequest setReturnsObjectsAsFaults:NO]; 
```

但这不是必需的，并且根据您拥有的属性和获取的对象数量，可能会使用比实际需要更多的内存。

# android - Android：使用 facebook API 登录

> ID：13046293
> 
> 赞同：0
> 
> 时间：2012-10-24T09:22:02.997
> 
> 标签：android, facebook

我正在使用Facebook SDK 中的**简单**示例，只是为了让用户电子邮件、姓名、性别、facebookID 登录到我的服务器。

我收到此错误：

**yourApp 为 Facebook 登录配置错误。按确定离开应用程序而无需 facebook 登录**

这只发生在我的设备上已经安装了 facebook 应用程序时。我尝试卸载 facebook 应用程序，然后我得到了正确的详细信息。

我在 facebook 上的应用程序配置为：

![在此处输入图像描述](../Images/23134fac511596a00e4f106392deb795.png)

我在哪里做错了？

代替**类名**，我在我的应用程序中提供了第一个活动，我到底应该在这里提供什么？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:33:09.470

甚至我也面临同样的问题。如果您使用了错误版本的 openssl，就会发生这种情况。我建议你使用

**openssl_0.9.0e_win32**版本并启用日志（使其为 TRUE），稍后您将获得新的密钥哈希。用新的，问题就解决了！:)

# html - 除了 Air SDK 3.4 之外，是否有免费的跨平台 IDE 可以将 HTML5/CSS3 文档打包为 EXE？

> ID：13046295
> 
> 赞同：1
> 
> 时间：2012-10-24T09:22:14.777
> 
> 标签：html, css, windows-7, air, ide

我正在运行两个系统，一个是 Linux，另一个是 Windows 7。我需要一个可以在任何一个平台上运行的**免费**IDE，它可以使用新的 Adob​​e Air SDK（在提出这个问题时为 3.4）并将项目打包为 Windows 可执行文件.

我目前正在使用 Aptana 2.0 和旧的 Air SDK 1.5，但是，它不能识别 HTML5 / CSS3。

到目前为止我已经尝试过了；Eclipse Juno，没什么……Aptana 3.0，没什么……Titanium Studio，没什么……

如果您需要知道原因，我需要制作一个可以在 Windows 上运行的本地应用程序，不，我不希望它在浏览器中本地运行。

我也上网查过了。如果有人可以帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:32:35.063

您可以将最新的 Adob​​e AIR SDK 与 Aptana Studio 2.0 一起使用。

1.  下载最新的 Adob​​e AIR SDK 并将其内容解压缩到 Aptana Studio 程序目录中的“plugins”目录中。
2.  打开 Aptana 并转到“窗口”菜单并选择“首选项”。
3.  展开侧栏中的“Aptana”菜单项并选择“AIR SDKs”。
4.  单击“添加”按钮。
5.  单击“浏览”按钮并选择您在步骤 1 中提取到“插件”目录的目录，然后为 SDK 提供一个名称，例如。“Adobe AIR SDK 3.4”。
6.  点击“确定”保存。
7.  再次单击“确定”以关闭“首选项”窗口。

现在您已成功安装最新的 Adob​​e AIR SDK。

现在，您将希望使用刚刚安装的最新 Adob​​e AIR SDK 运行您的项目：

1.  转到“运行”菜单并选择“运行配置...”。
2.  在显示“Adobe AIR SDK”的地方，从下拉列表中选择您想要运行项目的 SDK 版本。

# google-maps - 如何使用 Google 地理编码 API 获得最佳匹配结果

> ID：13046296
> 
> 赞同：1
> 
> 时间：2012-10-24T09:22:15.360
> 
> 标签：google-maps, geocoding

有任何方法可以从此 url 获取单个、最匹配的元素：

[http://maps.google.com/maps/api/geocode/json?address=Lipinki&sensor=false&components=country:PL](http://maps.google.com/maps/api/geocode/json?address=Lipinki&sensor=false&components=country:PL)

我必须为波兰获得一个结果。我会得到与我在 maps.google.com 上看到的相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:30:48.440

不幸的是，没有办法做到这一点。Google 会向您发送可能匹配的列表，您必须使用它。通常第一个是最接近的，但不能保证。最好的方法是在地图上显示多个地点或只使用第一个。如果您想要完全匹配您的地址=Lipinki 应该包含完整地址（街道地址）。

关于你的第二个问题，是的，你会得到你在谷歌地图搜索中看到的相同位置。看看它们非常接近的地理点。

# windows-8 - 在 wp7 智能手机上部署 wp8 应用程序

> ID：13046302
> 
> 赞同：-1
> 
> 时间：2012-10-24T09:22:31.983
> 
> 标签：windows-8, windows-phone-8

我有一个 Windows 智能手机，版本 7.10。我可以为使用 wp8 sdk 开发的应用程序部署它吗？这些应用程序在 wp8 上可以正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:31:49.590

由于 WP 8 和 Windows 8 将共享共同的核心，我认为我们可以说这样的部署将是可能的，可能需要对设备分辨率进行微调。也许您可以认为您可以将平板电脑上的快照视图用作手机的 UI。

不清楚您为什么提到 WP7，但**Windows Phone 8 应用程序不会在任何 Windows Phone 7.x 设备上运行**。

> 今天最重要的事情是 Windows Phone 8 与 Windows 8 有一个共享的共同核心，”Windows Phone 经理 Joe Belfiore 在旧金山举行的 Windows Phone 峰会上说。“对我们来说，这是一个巨大的发布和巨大的年。

# google-apps-script - GAS：如何在数据库查询中使用字符串？

> ID：13046303
> 
> 赞同：0
> 
> 时间：2012-10-24T09:22:31.453
> 
> 标签：google-apps-script

我尝试在我的脚本中查询我的数据库。查询的参数取决于我在 GUI 中定义的内容。有时我喜欢在查询中使用 NAME，有时喜欢在 CITY 中使用。这是代码：

```
 var query = 'STRUCTTYPE: PERSON';

  if (value1 != 0) {
    query = query + ', NAME: ' + value1;
  }
  if (value2 != 0) {
    query = query + ', CITY: ' + value2;
  } 
```

所以字符串“查询”本身是可以的，但是当我尝试在 db.query 中使用它时，我收到错误消息。

```
var results = db.query(query); 
```

有什么建议么？或者其他方法来处理这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:49:29.043

`query`传递给函数的参数`ScriptDb.query`必须是一个`object`，而不是一个`string`。试试这个：

```
var query = {STRUCTTYPE: 'PERSON'};
if( value1 != 0 ) //this != 0 seems a weird test, but I'm copying from your example
  query.NAME = value1;
if( value2 != 0 )
  query.CITY = value2;

var results = db.query(query); 
```

# python - 无法在 OS X 上使用 boost-python 编译 python 绑定

> ID：13046310
> 
> 赞同：2
> 
> 时间：2012-10-24T09:23:08.060
> 
> 标签：python, macos, boost, homebrew, boost-python

我尝试使用 boost-python 在 C++ 上进行 python 绑定，但我无法编译，也找不到原因。

我正在使用来自 boost-python 的代码示例`hello.cpp`：

```
// Copyright Ralf W. Grosse-Kunstleve 2002-2004\. Distributed under the Boost
// Software License, Version 1.0\. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)

#include <boost/python/class.hpp>
#include <boost/python/module.hpp>
#include <boost/python/def.hpp>
#include <iostream>
#include <string>

namespace { // Avoid cluttering the global namespace.

  // A friendly class.
  class hello
  {
    public:
      hello(const std::string& country) { this->country = country; }
      std::string greet() const { return "Hello from " + country; }
    private:
      std::string country;
  };

  // A function taking a hello object as an argument.
  std::string invite(const hello& w) {
    return w.greet() + "! Please come soon!";
  }
}

BOOST_PYTHON_MODULE(extending)
{
    using namespace boost::python;
    class_<hello>("hello", init<std::string>())
        // Add a regular member function.
        .def("greet", &hello::greet)
        // Add invite() as a member of hello!
        .def("invite", invite)
        ;

    // Also add invite() as a regular function to the module.
    def("invite", invite);
} 
```

有了这个`Jamroot`：

```
exe hello : hello.cpp ; 
```

当我运行`b2 --debug-configuration -n`一切似乎都很好：

```
$ ~/Sites/boost $ b2 --debug-configuration -n
notice: found boost-build.jam at /usr/local/share/boost-build/boost-build.jam
notice: loading Boost.Build from /usr/local/share/boost-build/kernel
notice: Searching /etc /Users/jauneau /usr/local/share/boost-build/kernel /usr/share/boost-build /usr/local/share/boost-build/kernel /usr/local/share/boost-build/util /usr/local/share/boost-build/build /usr/local/share/boost-build/tools /usr/local/share/boost-build/contrib /usr/local/share/boost-build/. for site-config configuration file site-config.jam .
notice: Configuration file site-config.jam not found in /etc /Users/jauneau /usr/local/share/boost-build/kernel /usr/share/boost-build /usr/local/share/boost-build/kernel /usr/local/share/boost-build/util /usr/local/share/boost-build/build /usr/local/share/boost-build/tools /usr/local/share/boost-build/contrib /usr/local/share/boost-build/. .
notice: Searching /Users/jauneau /usr/local/share/boost-build/kernel /usr/share/boost-build /usr/local/share/boost-build/kernel /usr/local/share/boost-build/util /usr/local/share/boost-build/build /usr/local/share/boost-build/tools /usr/local/share/boost-build/contrib /usr/local/share/boost-build/. for user-config configuration file user-config.jam .
notice: Loading user-config configuration file user-config.jam from /Users/jauneau/user-config.jam .
notice: OSX version on this machine is 10.7.5
notice: will use 'g++' for darwin, condition <toolset>darwin-4.2.1
notice: using strip for <toolset>darwin-4.2.1 at /usr/bin/strip
notice: using archiver for <toolset>darwin-4.2.1 at /usr/bin/libtool
notice: available sdk for <toolset>darwin-4.2.1/<macosx-version>10.6 at /Developer/SDKs/MacOSX10.6.sdk
notice: available sdk for <toolset>darwin-4.2.1/<macosx-version>10.7 at /Developer/SDKs/MacOSX10.7.sdk
notice: [python-cfg] Configuring python...
notice: [python-cfg]   user-specified version: "2.7"
notice: [python-cfg] Checking interpreter command "python"...
notice: [python-cfg] running command '"python" -c "from sys import *; print('version=%d.%d\nplatform=%s\nprefix=%s\nexec_prefix=%s\nexecutable=%s' % (version_info[0],version_info[1],platform,prefix,exec_prefix,executable))" 2>&1'
notice: [python-cfg] ...requested configuration matched!
notice: [python-cfg] Details of this Python configuration:
notice: [python-cfg]   interpreter command: "python"
notice: [python-cfg]   include path: "/usr/local/bin/../Cellar/python/2.7.2/include/python2.7"
notice: [python-cfg]   library path: "/usr/local/bin/../Cellar/python/2.7.2/lib/python2.7/config" "/usr/local/bin/../Cellar/python/2.7.2/lib"
notice: [python-cfg] no framework directory found; using library path
...found 13 targets...
...updating 2 targets...
darwin.compile.c++ bin/darwin-4.2.1/debug/hello.o

    "g++"  -ftemplate-depth-128 -O0 -fno-inline -Wall -g -dynamic -no-cpp-precomp -gdwarf-2 -fexceptions -fPIC     -c -o "bin/darwin-4.2.1/debug/hello.o" "hello.cpp"

darwin.link bin/darwin-4.2.1/debug/hello

    "g++"  -o "bin/darwin-4.2.1/debug/hello" "bin/darwin-4.2.1/debug/hello.o"       -g 

...updated 2 targets... 
```

但是当我运行 b2 来编译我的绑定时，他找不到 python 头文件：

```
...found 13 targets...
...updating 2 targets...
darwin.compile.c++ bin/darwin-4.2.1/debug/hello.o
In file included from /usr/local/include/boost/python/detail/prefix.hpp:13,
                 from /usr/local/include/boost/python/class.hpp:8,
                 from hello.cpp:5:
/usr/local/include/boost/python/detail/wrap_python.hpp:50:23: error: pyconfig.h: No such file or directory
/usr/local/include/boost/python/detail/wrap_python.hpp:75:24: error: patchlevel.h: No such file or directory
/usr/local/include/boost/python/detail/wrap_python.hpp:78:2: error: #error Python 2.2 or higher is required for this version of Boost.Python.
/usr/local/include/boost/python/detail/wrap_python.hpp:142:21: error: Python.h: No such file or directory
In file included from /usr/local/include/boost/python/object/pointer_holder.hpp:14,
                 from /usr/local/include/boost/python/to_python_indirect.hpp:10,
                 from /usr/local/include/boost/python/converter/arg_to_python.hpp:10,
                 from /usr/local/include/boost/python/call.hpp:15,
                 from /usr/local/include/boost/python/object_core.hpp:14,
                 from /usr/local/include/boost/python/object/class.hpp:9,
                 from /usr/local/include/boost/python/class.hpp:13,
                 from hello.cpp:5:
/usr/local/include/boost/python/instance_holder.hpp:34: error: ‘PyObject’ has not been declared
/usr/local/include/boost/python/instance_holder.hpp:41: error: expected ‘;’ before ‘(’ token
/usr/local/include/boost/python/instance_holder.hpp:45: error: ‘PyObject’ has not been declared
In file included from /usr/local/include/boost/python/object/pointer_holder.hpp:21,
                 from /usr/local/include/boost/python/to_python_indirect.hpp:10,
                 from /usr/local/include/boost/python/converter/arg_to_python.hpp:10,
                 from /usr/local/include/boost/python/call.hpp:15,
                 from /usr/local/include/boost/python/object_core.hpp:14,
                 from /usr/local/include/boost/python/object/class.hpp:9,
                 from /usr/local/include/boost/python/class.hpp:13,
                 from hello.cpp:5:
... 
```

我已经使用 Homebrew 安装了 boost 和 boost-build。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:45:03.550

这可能与您使用的是自制 python 但 Boost 链接到系统 Python 的事实有关。

# python - python将列表分配给字典返回空列表

> ID：13046313
> 
> 赞同：1
> 
> 时间：2012-10-24T09:23:12.483
> 
> 标签：python, list, dictionary

我有一个问题，我的列表 frameChain 被反映为空（`[]`）。`frameChain`实际上是一个列表，例如：`['C Level', 'Medium Term']`

```
jsonOut[x]= {'TEXT' : node.attrib['TEXT'],
             'ID': node.attrib['ID'],
             'Sessions' : frameChain,} 
```

我已经在我定义的函数之外尝试了这个，它似乎工作得很好。关于为什么这里会有所不同的任何想法？

`x`只是一个计数器来表示外部字典的索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T06:10:34.537

根据您的评论，您可能在将列表添加到字典后对其进行了修改。在 python 中，几乎所有东西，例如。变量名、列表项、字典项等只是引用值，而不包含它们本身。列表是可变的，因此如果您将一个添加到字典中，然后通过另一个名称修改列表，则更改也会显示在字典中。

那是：

```
# Both names refer to the same list
a = [1]
b = a    # make B refer to the same list than A
a[0] = 2 # modify the list that both A and B now refer to
print a  # prints: [2]
print b  # prints: [2]

# The value in the dictionary refers to the same list as A
a = [1]
b = {'key': a}
a[0] = 2
print a # prints: [2]
print b # prints: {'key': [2]} 
```

但是，请注意，为变量分配新值不会更改引用的值：

```
# Names refer to different lists
a = [1]
b = a   # make B refer to the same list than A
a = [2] # make A refer to a new list
print a # prints [2]
print b # prints [1] 
```

您创建了一个新列表，并将旧列表中的项目“手动”一一复制到新列表中。这行得通，但它占用了大量空间，并且有一种更简单的方法可以通过使用切片来实现。切片返回一个新列表，所以如果你不指定开始和结束位置，即。通过 write `list_variable[:]`，它本质上只是返回原始列表的副本。

也就是修改原来的例子：

```
# Names refer to different lists
a = [1]
b = a[:] # make B refer to a copy of the list that A refers to
a[0] = 2
print a  # prints: [2]
print b  # prints: [1]

# The value in the dictionary refers to a different list than A
a = [1]
b = {'key': a[:]}
a[0] = 2
print a # prints: [2]
print b # prints: {'key': [1]} 
```

# java - Java中最细的字体

> ID：13046314
> 
> 赞同：-1
> 
> 时间：2012-10-24T09:23:15.167
> 
> 标签：java, fonts, font-size

想知道Java中哪个字体最薄。我显示字符的空间有限，所以我想采用最细的字体。

我的意思是给定一个字体大小，该字体在 x 维度上占用的空间最小。现在应该清楚了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:28:07.520

您的 Java 将使用系统字体，因此没有最薄的 Java 字体。查看您的字体列表，看看哪个最薄。我认为爱丽儿是你最好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:38:47.683

您显然可以按比例缩小字体以使它们像您喜欢的那样“细”，但这可能无法使用常规字体读取。

您最好的选择可能是找到一种专为极低分辨率设计的自定义字体（5x3、6x4 或 8x5 字体可能是合适的）。然后，您可以将您的自定义字体作为资源包含在您的 Java 项目中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:48:40.927

以下是大量字体示例： [http ://www.wavian.com/font-list.html](http://www.wavian.com/font-list.html)

我的选择是：

*   `Aurora Cn BT`- 不是很可读，但它很薄。
*   `English 111 Vivace BT`除非您使用大量大写字母，否则草书非常薄且可读。
*   `Coronet`非常薄，类似于`English 111 Vivace BT`
*   `Marigold`没有那么薄，但它可能更具可读性
*   `Onyx`并且`OzHandicraft`都非常薄且易读
*   `Ribbon 131 Bd BT`
*   `Sceptre`和`Socket`- 薄而易读

# matlab - MATLAB 纹理映射：使用 imresize 或内置调整大小调整图像大小？

> ID：13046315
> 
> 赞同：0
> 
> 时间：2012-10-24T09:23:17.973
> 
> 标签：matlab, image-resizing, texture-mapping

我正在绘制一个 3D 框，并使用纹理映射将六个面与一些图像进行映射，我使用以下代码行：

```
Z=zeros(height,width);
surface(Z, 'FaceColor','texturemap','EdgeColor','none','Cdata',image);
hold on; 
```

然后是下边等等。到目前为止，我所做的是使用 imresize 调整图像大小。

```
image = imresize(image,[height width]); 
```

我的问题是，如果我只使用原始大小的图像进行纹理映射，在分辨率和速度方面是否会有很大差异？不使用 imresize 会更好吗？问题是我必须在这些行之间更改一些代码，并提出一些其他解决方案，但如果映射图像的分辨率在没有 imresize 的情况下会更好，那将是完全值得的。

# linux - Haskell ghc 编译/链接错误，未创建可执行文件。(Linux)

> ID：13046319
> 
> 赞同：17
> 
> 时间：2012-10-24T09:23:25.150
> 
> 标签：linux, haskell, compilation, linker, ghc

我在 haskel 中编写了一个基本的 hello world 程序，并尝试使用：ghc filename.hs 编译它。它生成 .hi 和 .o 文件，但没有可执行文件，并在链接器中显示此错误：

> marox@IT-marox:~/Marox$ ghc tupel.hs
> 链接 tupel ...
> /usr/bin/ld: --hash-size=31: 未知选项
> /usr/bin/ld: 使用 --help 选项使用信息
> collect2: ld 返回 1 退出状态

谷歌搜索没有返回任何有用的信息。

我在 ubuntu 12.04 上。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-24T09:48:01.157

你`binutils-gold`安装了吗？如果是，这就是问题所在（因为[黄金链接器](http://en.wikipedia.org/wiki/Gold_%28linker%29)不支持`--hash-size`AFAIK）。

可能的解决方案：

1.  去除黄金
2.  您`ld`可能链接到`ld.gold`，因此将符号链接更改为`ld.ld`
3.  明确告诉 haskell 编译器与选项一起使用哪个链接器`-pgml`：`ghc -pgml ld.ld tupel.hs`
4.  从源代码安装，因为随后将构建`ghc`配置脚本，因此它不会使用`ghc``ghc``--hash-size`
5.  根据您的版本，您可以在的设置文件`ghc`中调整链接器设置。`ghc``/usr/lib/ghc-your.ghc.version/settings`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T07:28:16.140

更新 - Ubuntu 12.10 上的黄金似乎将 GNU ld 移至 ld.bfd。为了解决这个问题，我按照建议删除了 ld 链接，并重新制作了链接

```
 ln -s ld.bfd ld 
```

ghc 编译现在正在进行中。

（看不到如何破坏 usr/lib/ghc 中的设置文件，因为该条目是针对 gcc 的，它通过其命令行传递给 ld，尽管这将是我的首选选项，以防万一需要 ld 成为原来如此。）

感谢多米尼克在哪里寻找的指针！它快把我逼疯了……

# r - 如何更改 R 图的标签大小

> ID：13046323
> 
> 赞同：1
> 
> 时间：2012-10-24T09:23:43.253
> 
> 标签：r, plot, dendrogram, hierarchical-clustering

我正在根据我的数据制作一个聚类图。我已经完成了整个情节，但我的标签文本太大，无法正确阅读情节。任何人都知道如何使标签更小。

我正在使用包“sparcl”，我的功能是：

```
ColorDendrogram(fit,y=col.int, main = "Clusters from 216 samples",
                branchlength = 0.20, labels = fit$labels, xlab = NULL,
                sub = NULL, ylab = "", cex.main = NULL) 
```

![在此处输入图像描述](../Images/12249fcff12999da5c1143138306517a.png)

如您所见，分支文本太大，它们相互重叠。我希望叶子的文字小 25%。我已经查看了 Sparcl 包的文档，但这似乎不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T11:51:29.623

在调用情节之前，您应该调用`par()`.

```
par(cex=numericvalue)
ColorDendrogram(parameters) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:44:06.977

您是否尝试过赋予`cex.main`价值？（图主标题放大的数量）

# wix - Wix CheckBox 默认状态

> ID：13046325
> 
> 赞同：7
> 
> 时间：2012-10-24T09:23:57.683
> 
> 标签：wix, windows-installer

下面的对话框显示一个复选框，选中该复选框会启用“下一步”按钮。问题是当表单首次出现时，我无法将其初始状态设置为未选中。我尝试设置 CheckBoxValue = 1 但这也不起作用。

```
 <Dialog Id="DatabaseDialog" X="50" Y="50" Width="373" Height="287" Title="[ProductName]">
                <Control Id="EnableCheckBox" Property="DatabaseBackedUp" Type="CheckBox" X="20" Y="150" Width="290" Height="30" 
                         Text="Has the database been backed up?" CheckBoxValue="0" />
                <Control Id="NextButton" Type="PushButton" X="300" Y="261" Width="66" Height="18" Text="{\VSI_MS_Sans_Serif13.0_0_0}&amp;Next &gt;" TabSkip="no" Default="yes">
                    <Publish Event="EndDialog" Value="Return">DatabaseDialog_NextArgs=""</Publish>
                    <Publish Event="NewDialog" Value="[DatabaseDialog_NextArgs]">DatabaseDialog_NextArgs&lt;&gt;""</Publish>
                 <Condition Action="disable"><![CDATA[DatabaseBackedUp<> "1"]]></Condition>
                 <Condition Action="enable"><![CDATA[DatabaseBackedUp= "1"]></Condition>
                </Control>
</Dialog> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-24T09:31:09.637

这就是我这样做的方式，它对我有用

物业：

```
 <Property Id="CHECKBOX" Secure="yes"></Property> 
```

复选框：

```
<Control Id="CheckBoxId" Type="CheckBox"  Text="Use the proxy server for your LAN" Property="CHECKBOX" Width="180" Height="15" X="25" Y="103" CheckBoxValue="1"/> 
```

我相信这是可行的，因为您首先将链接到复选框的属性设置为空，因此它保持为空，如果单击它，则属性值等于设置的任何值`CheckBoxValue`。（无论如何，这是我的逻辑..:)）希望这会有所帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-11T11:07:10.200

您已经定义了一个控件：

```
<Control Id="EnableCheckBox"
         Type="CheckBox"
         Property="DatabaseBackedUp" 
         X="20" Y="150" Width="290" Height="30" 
         Text="Has the database been backed up?" 
         CheckBoxValue="0" /> 
```

你没有提到你是否还在`DatabaseBackedUp`解决方案的其他地方定义了一个属性，但我假设你已经定义了这样的东西：

```
<Property Id="DatabaseBackedUp" Value="0"></Property> 
```

您可能已经尝试过其他值`Value`。*但是，我相信该复选框会将任何*值的存在解释为“我应该被检查”。

但是，如果您不设置`Value`属性，则会收到警告：`"Property 'CHECKBOX' does not contain a Value attribute and is not marked as Admin, Secure, or Hidden. The Property element is being ignored."`

设置这些属性之一将使警告消失，但会带来可能需要也可能不需要的其他行为。

**解决方案是简单地删除该属性**。

然后该复选框将找不到任何值，并且默认为未选中。检查它仍将按需要工作（即它将创建并设置属性的值）。

我已经用 WiX v3.11.1 成功地尝试了这个。

# c# - 从 C# 调用的 Excel 函数运行缓慢

> ID：13046328
> 
> 赞同：0
> 
> 时间：2012-10-24T09:24:06.907
> 
> 标签：c#, excel, vba, math

我有一个`CalculateLinearRegression()`调用类`LinEst`函数的方法`Excel.Application.WorksheetFunction`。`LinEst`每次调用大约 3,500 次`CalculateLinearRegression()`。我将 WorksheetFunction 类注入到我的方法中，因此我知道只创建了该类的一个实例。

每次调用`CalculateLinearRegression()`大约需要 10 分钟，我确信是该`LinEst`函数正在减慢速度（删除对`LinEst`结果的调用和硬编码意味着该方法将在几秒钟内运行）。

我很欣赏这`LinEst`是在做相当多的计算，但我怀疑它做的太多会导致这种延迟，因此我认为这可能是对 Excel 函数的调用增加了延迟。有谁知道加快速度的方法，或者 C# 直接替换该`LinEst`函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:02:44.390

对 Excel 对象模型（如 WorksheetFunction）的每次调用都必须通过 Interop-Com。由于 Interop 的开销很高，因此多次调用很慢。

一种简单的解决方案可能是使用 Excel-DNA 切换到 XLL 界面（速度快很多倍）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:34:57.017

LinEst 有一些替代的 C# 实现，但我不能直接保证。例如，这里有一个讨论：[C# 相当于 Excel 中的 LINEST 是什么？](https://stackoverflow.com/questions/2691137/what-is-the-c-sharp-equivalent-to-linest-from-excel)

我也想为您的长期运行功能添加一些支持，但您的问题中没有足够的信息来发表评论。你能发布它的样子吗？只是 Excel 调用减慢了一切吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T09:40:37.780

*就个人而言，除非您绝对*需要（例如，将文件保存为二进制 MS excel 格式），否则我会避免使用 Excel 互操作。自动化 Excel 在性能方面涉及一些相当可怕的成本。

如果您只需要 LINEST 提供的功能，请考虑使用以下文章中的代码：http: [//www.codeproject.com/Articles/25335/An-Algorithm-for-Weighted-Linear-Regression](http://www.codeproject.com/Articles/25335/An-Algorithm-for-Weighted-Linear-Regression) 虽然我没有自己用了代码，这篇文章似乎很受重视。

# gwt - smartGWT 覆盖小部件样式

> ID：13046336
> 
> 赞同：0
> 
> 时间：2012-10-24T09:24:47.203
> 
> 标签：gwt

我想覆盖 TreeGrid 对象（和其他默认样式）的背景颜色。但它不允许我更改默认 css。

```
TreeGrid grid = new TreeGrid();
grid.removeStyleName("listGrid"); 
```

或者

```
TreeGrid grid = new TreeGrid();
grid.removeStyleName(grid.getStyleName()); 
```

这段代码似乎不起作用。样式名称保持不变。我想我错过了一些东西，但我似乎无法弄清楚。此外，如果我为小部件设置另一个样式名，它会保留默认样式名。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:40:13.737

我自己找到了答案。

看起来有各种解决方案。但这对我来说是最简单的。

有不同的方法可以为这个组件设置样式的不同部分。要设置车身样式名称，我只需使用以下代码即可。无需在这里创建新的 css 规则。

```
treeGrid.setBodyStyleName("#E0E0E0"); 
```

# haskell - 递归实例定义

> ID：13046337
> 
> 赞同：1
> 
> 时间：2012-10-24T09:24:50.493
> 
> 标签：haskell

我有一个递归数据定义：

```
data Checked a =  forall b. Checked (Either (Warning, Maybe (Checked b), a) a) 
```

我需要递归地定义 Show：

```
instance (Show a) => Show (Checked a) where
  show (Right v) = show v
  show (Left (w, Nothing, v) = show w ++ show v
  show (Left (w, Just ch, v) = show w ++ show v ++ "caused by" ++ show ch --recursive here 
```

GHC给

```
 Could not deduce (Show b) arising from a use of `show'
  from the context (Show a)
  bound by the instance declaration at Checked.hs:29:10-35
  Possible fix:
   add (Show b) to the context of
    the data constructor `Checked'
    or the instance declaration
  In the second argument of `(++)', namely `show ch' 
```

如果我将 (Show b) 添加到实例定义的约束中，GHC 会给出：

```
 Ambiguous constraint `Show b'
  At least one of the forall'd type variables mentioned by the constraint
  must be reachable from the type after the '=>'
In the instance declaration for `Show (Checked a)' 
```

我应该采取下一步来编译它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T09:46:42.157

您需要将`Show b`限制添加到数据类型：

```
data Checked a = forall b. Show b => Checked (Either (Warning, Maybe (Checked b), a) a)

instance Show a => Show (Checked a) where
  show (Checked (Right v)) = show v
  show (Checked (Left (w, Nothing, v))) = show w ++ show v
  show (Checked (Left (w, Just ch, v))) = show w ++ show v ++ "caused by" ++ show ch 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T09:52:47.997

`Show`向数据类型定义添加约束。

```
data Checked a =  forall b. Show b => Checked (Either (Warning, Maybe (Checked b), a) a) 
```

您还可以将约束类型用作

```
{-# LANGUAGE FlexibleInstances #-}
{-# LANGUAGE ConstraintKinds #-}
{-# LANGUAGE ExistentialQuantification #-}

data Checked a c =  forall b. c b =>  Checked (Either (Maybe (Checked b c), a) a)

instance (Show a) => Show (Checked a Show) where
 show (Checked (Right v)) = show v
 show (Checked (Left (Nothing, v))) = show v
 show (Checked (Left (Just ch, v))) = show v ++ "caused by" ++ show ch 
```

# iphone - 检测硬件类型的最佳方法是 iPhone4 还是 iPhone5？

> ID：13046338
> 
> 赞同：7
> 
> 时间：2012-10-24T09:24:50.670
> 
> 标签：iphone, ios, objective-c, cocoa-touch

我正在设置一个应用程序，我想根据正在使用的 iPhone 类型对视图布局进行一些更改。具体来说我想知道竖屏分辨率是`1136`（iPhone5）还是`960`（iPhone4）。我想做的一件事是调整 UITableView 中 UITableViewCells 的高度，以便在任一手机上运行应用程序时都不会显示部分单元格。

**我的问题是：**检测正在使用的手机硬件类型以便我可以对视图布局进行适当更改的最佳方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-24T09:29:28.520

我没有 iphone 5，但在另一部手机上，这段代码效果很好：

```
NSMutableDictionary *devices = [[NSMutableDictionary alloc] init];
[devices setObject:@"simulator"                     forKey:@"i386"];
[devices setObject:@"iPod Touch"                    forKey:@"iPod1,1"];
[devices setObject:@"iPod Touch Second Generation"  forKey:@"iPod2,1"];
[devices setObject:@"iPod Touch Third Generation"   forKey:@"iPod3,1"];
[devices setObject:@"iPod Touch Fourth Generation"  forKey:@"iPod4,1"];
[devices setObject:@"iPhone"                        forKey:@"iPhone1,1"];
[devices setObject:@"iPhone 3G"                     forKey:@"iPhone1,2"];
[devices setObject:@"iPhone 3GS"                    forKey:@"iPhone2,1"];
[devices setObject:@"iPad"                          forKey:@"iPad1,1"];
[devices setObject:@"iPad 2"                        forKey:@"iPad2,1"];
[devices setObject:@"iPhone 4"                      forKey:@"iPhone3,1"];
[devices setObject:@"iPhone 4S"                     forKey:@"iPhone4"];
[devices setObject:@"iPhone 5"                      forKey:@"iPhone5"];

- (NSString *) getDeviceModel
{
    struct utsname systemInfo;
    uname(&systemInfo);
    return [devices objectForKey:[NSString stringWithCString:systemInfo.machine encoding:NSUTF8StringEncoding]];
} 
```

记得导入：

```
#import "sys/utsname.h" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-24T09:30:27.190

您应该真正使用自动布局功能来使您的视图适应屏幕的任何格式。

但是，如果您只想知道设备是否是 iPhone 5（即高度为 1136 像素），您可以使用：

```
[ [ UIScreen mainScreen ] bounds ].size.height 
```

当然可以变成宏。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T09:30:10.320

```
#define IS_IPHONE5 (([[UIScreen mainScreen] bounds].size.height-568)?NO:YES) 
```

在一些 constant.h 文件中定义这个宏，并在任何地方使用它来检查

```
if(IS_IPHONE5)
{
// iphone 5
}
else
{
// earlier
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T09:30:15.940

从您的问题来看，您似乎想根据设备和分辨率来纠正 UI。在这种情况下，这很好，您可以使用下面给定的代码来识别设备。但是对于非 UI 的事情，比如寻找一个设备中存在的设备功能，而另一个设备中不存在，总是建议检查该功能是否存在，而不是设备型号。来自苹果[官方论坛。](https://devforums.apple.com/message/729254#729254)（要求登录）

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone){
  if ([[UIScreen mainScreen] respondsToSelector: @selector(scale)]) {
    CGSize result = [[UIScreen mainScreen] bounds].size;
    CGFloat scale = [UIScreen mainScreen].scale;
    result = CGSizeMake(result.width * scale, result.height * scale);

    if(result.height == 960){
      NSLog(@"iphone 4, 4s retina resolution");
    }
    if(result.height == 1136){
      NSLog(@"iphone 5 resolution");
    }
  }else{
    NSLog(@"iphone standard resolution");
  }
}else{
  if ([[UIScreen mainScreen] respondsToSelector: @selector(scale)]) {
    NSLog(@"ipad Retina resolution");
  }else{
    NSLog(@"ipad Standard resolution");
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T17:24:25.290

我一直在检查纵横比。不像其他一些方法那样通用，但对于未来的设备来说仍然比检查特定分辨率更灵活。

```
// 0.563380 = 16x9 (iPhone 5)
// 0.666667 = 3x2  (iPhone 4S and previous)
CGFloat aspectRatio = [UIScreen mainScreen].bounds.size.width / [UIScreen mainScreen].bounds.size.height;
// Tall Screen
if (aspectRatio > 0.55 && aspectRatio < 0.57) {
    // Tall screen stuff.
    }

    // Short Screen
} else if (aspectRatio > 0.64 && aspectRatio < 0.68) {

    // Short screen stuff.
    }
} 
```

# javascript - 我可以从原始文件加载css吗？

> ID：13046340
> 
> 赞同：0
> 
> 时间：2012-10-24T09:24:58.290
> 
> 标签：javascript, jquery

对我来说似乎应该有一个选项，但我似乎找不到它。

这个问题被问了很多次，但只回答了解决方法，这不是我想要的。

我正在更改我的 css incode，我想加载原始 css 而不是自己编码，如何实现？

我不想重新加载**整个**文件，只是加载一些 div 或 class css。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T09:42:07.433

请参阅[此帖子](https://stackoverflow.com/questions/1053418/jquery-temporarily-change-a-style-then-reset-to-original-class)以获取解决方案。

基于此，您可以执行以下操作：

```
$("#fix").click(function(e) {
    e.preventDefault();
    $("div").removeAttr("style");
});​ 
```

注意：这假设您首先使用 JQuery 来更改样式

[这是一个工作示例](http://jsfiddle.net/TkV6J/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:39:31.163

如果你使用 jQuery 应用

```
$(selector).removeAttr('style') 
```

到你的元素

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T09:41:11.080

> 我想加载原始的 css 而不是自己编码

这不是必需的。您正在尝试重新加载应该继续存在的资源。加载后，您无需再次加载它。如果您需要覆盖样式，请为其应用一个类。要恢复为原始，请删除该类。这就是级联样式表的工作方式。

如果有特定原因需要动态 css，您可以尝试通过 DOM（`document.createElement("style")`等）将 css 加载到 Document 中，但我相信对此的支持有点粗略。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T10:19:53.550

如果你想重置整个样式而不仅仅是 div' 你最好使用[`all selector`](http://api.jquery.com/all-selector/)

```
$('*').removeAttr('style'); 
```

# php - 注入还是新的？

> ID：13046342
> 
> 赞同：17
> 
> 时间：2012-10-24T09:24:59.680
> 
> 标签：php, oop, class, testing, object

关于在另一个类中使用类对象，最佳实践是什么？在 class _construct 语句中传递类对象还是创建一个新的类对象？

示例 1：

```
class Foo {
    private $bar;

    public function __construct($bar){
       $this->bar = $bar;
   }
} 
```

或示例 2：

```
class Foo {

    private $bar;

    public function __construct(){
        $this->bar= NEW bar;
    }    
} 
```

我知道很明显，类文件必须已经包含在其他地方是理所当然的，并且在第一个实例中，这种类型的类对象需要已经存在，但我想知道每种方法的优点是什么，因为我有很多类，我需要编写使用数据库对象的代码，并且我需要将其传递到类中的最佳方法。有没有比这两个更好的第三种选择？

据我了解，第一个的优点可能是少了几行编码，并且在数据库的情况下，没有创建新的连接。然而，第二个可能会更好，因为它更独立？无论如何，我想我会问专家。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-24T09:31:28.760

首先。（这种方法称为**依赖注入**）。

构造函数询问问题中的对象*需要什么才能工作*。这样，仅从方法（它们需要什么，以及它们返回什么）就很清楚它做了什么。甚至不用看源代码。

改进代码的一种方法是在方法中引入类型提示：

```
class Foo {
    private $bar;

    public function __construct(Bar $bar){
       $this->bar = $bar;
   }
} 
```

这样只能`Bar`传入对象。

* * *

### 依赖注入的优点

*   非常可读。
*   无需查看源代码即可判断方法的依赖关系。
*   使单元测试成为可能。
*   ^*将小猫从上帝的愤怒中拯救出来。

[* 免责声明：在此答案的表现过程中没有小猫受到伤害]

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-24T09:30:18.300

您应该选择选项 1，因为这是最简单的*依赖注入*形式。

在选项 1 中：

*   类是相互独立的
*   类可以独立测试，使用 bar 类的模拟

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-24T09:39:49.553

一般来说，出于[如何考虑单元测试的“新”操作员](http://misko.hevery.com/2008/09/30/2008/07/08/how-to-think-about-the-new-operator)中概述的原因，我会加入 DI 人群：

> 但依赖注入如此重要的原因在于，在单元测试中，您希望测试应用程序的一小部分。要求是您可以独立于整个系统构建应用程序的那个小子集。如果您将应用程序逻辑与图形构造（新操作符）混合使用，那么除了应用程序中的叶节点之外，任何东西都无法进行单元测试。

将您的代码分成创建者图和协作者图将有助于保持您的代码可维护和可测试。更好的是，针对接口编写代码，并且很容易将具体实现与其他实现交换。这使得更改代码变得简单，因为您不必费力地寻找硬编码的依赖项。

例如，假设你`Bar`需要一个记录器，你会做

```
class Foo
{
    private $logger;

    public function __construct(LogInterface $logger)
    {
        $this->logger = $logger;
    }
} 
```

然后你传入任何实现它的具体实现`LogInterface`，比如 Database Logger 或 StdOutLogger 或者可能包含这两者的 Composite Logger。另一个例子是数据库对象。您可以在引导程序中创建一次，然后将其传递给使用它的对象。

**如有疑问，请使用依赖注入。**

但是，您不必总是注入东西。这取决于对象（您的 Bar）是[Injectable 还是 Newable](http://misko.hevery.com/2008/09/30/to-new-or-not-to-new/)。引用 Misko Hevery 的话：

> Injectable 类可以在其构造函数中请求其他 Injectable。[…] Injectables 往往有接口，因为我们可能不得不用对测试友好的实现来替换它们。但是，Injectable 永远不能在其构造函数中请求非 Injectable (Newable)。这是因为 DI 框架不知道如何生成 Newable。[...] Newables 的一些示例是：电子邮件、MailMessage、用户、信用卡、歌曲。如果您保持这种区别，您的代码将易于测试和使用。如果您违反此规则，您的代码将难以测试。

简而言之，当你有一些不能被合理注入的东西时，因为它是基于用户提供的或运行时信息，你可以`new`的。对于值对象和数据类型尤其如此：

```
class Foo
{
    private $storage;

    public function __construct()
    {
        $this->storage = new SplObjectStorage;
    }
} 
```

注入没有意义`SplObjectStorage`。它只是一种数据类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T09:48:12.350

其他人已经回答了您的问题 - 绝对采用第一种方法，它使用依赖注入。

我只是想加入另一个你可能不知道的流行替代方案：使用**依赖注入容器**。

一个伟大而简单的例子是[Pimple](http://pimple.sensiolabs.org/)；由 Symfony 框架背后的人 Fabien Potencier 开发。

示例 3：

```
# In a bootstrap file...
require_once '/path/to/Pimple.php';

$container = new Pimple();
$container['bar'] = function ($c) {
    return new Bar(/** If bar has dependencies, put them here **/);
};

$container['foo'] = function ($c) {
    return new Foo($c['bar']);
};

# You'd still inject the service using DI, because it's not good 
# practice for your objects to rely directly on the container

class Foo {
    private $bar;

    public function __construct($bar){
       $this->bar = $bar;
   }
}

# The difference would be how you call Foo...
$foo = $container['foo'];

# So now your code doesn't need to know about the dependencies, and it's easy 
# to change them at any time by making a single change in your configuration 
```

Symfony2 使用更强大的 Container，它[也可以作为独立组件使用](http://symfony.com/doc/current/components/dependency_injection/index.html)。但 Pimple 可能是您最好的选择，除非您正在开发大型应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T14:37:44.317

我会说使用第一个选项。这样做时，我会说对抽象进行编程比对实现进行编程更好。

您的第一个选项是聚合形式，而第二个选项是组合形式。使用抽象可以获得的好处是，使用 FOO 类的客户端类将能够让 FOO 根据它决定发送到构造函数的接口的特定实现来执行某些活动。

下面的 AC# 示例

```
 class Foo {
    private IBar bar;

    public Foo(IBar obj){
       this.bar = obj;
   }

   public void myFooMethod()
   {
      bar.ExecuteMethod();
   }
} 
```

调用 FOO 的类

```
 public class MyCallingClass
    {

       public void CallFooMethod()
       {
          IBar bar1Obj = new BAR1();
          Foo fooObject = new Foo(bar1Obj);
          fooObject.ExecuteMethod();
//or
          IBar bar2Obj = new BAR2();
          fooObject = new Foo(bar2Obj);
          fooObject.ExecuteMethod();
//or
          IBar bar3Obj = new BAR3();
          fooObject = new Foo(bar3Obj);
          fooObject.ExecuteMethod();

       }

    } 
```

现在我的调用类可以将 IBar 的任何实现传递给 FOO 类。

希望这有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T14:55:32.133

好的，[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)非常棒，而且很有帮助并且[可以拯救小猫](https://stackoverflow.com/a/13046443/497418)，所以我不打算详细讨论它。

相反，我将建议您**实施这两种解决方案**：

```
class Foo {
    private $bar;

    public function __construct($bar = null){
       $this->bar = isset($bar) ? $bar : new Bar();
   }
} 
```

这样，您可以默认使用默认类，如果您需要更改功能，您也可以这样做。

# html - 在标签中使用 Arial Black 或 Arial 字体有什么区别吗？

> ID：13046352
> 
> 赞同：3
> 
> 时间：2012-10-24T09:25:41.810
> 
> 标签：html, css, fonts

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T09:30:57.840

关于问题标题（因为问题文本似乎提出了不同的要求）：

`<strong>`标签带有语义含义。[在此引用 MDN](https://developer.mozilla.org/en-US/docs/HTML/Element/strong)

> HTML 强元素 () 赋予文本非常重要的意义，通常以粗体显示。

所以首先你应该使用这个标签来标记你想要强调的内容，而不是让文本被标记为粗体。

然而，大多数浏览器会将这种强调作为粗体打印文本来实现。

如果您只想使用粗体文本，请使用相应的 CSS！

```
font-weight: bold; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T09:29:57.707

`<strong>`具有一定的语义意义（沿着“更重要”的路线），因此应该避免纯粹为了样式化。如果要“加粗”文本，只需添加`font-weight: 700`.

或者您知道，解决 Arial Black 不工作的原因 :P 可能是您没有在 Arial Black 周围添加语音标记。

`font-family: Arial;`

完全可以接受，但是

`font-family: Arial Black;`

不是。确保你有

`font-family: "Arial Black";`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T12:35:20.613

`strong`是的，使用 Arial Black 与 Arial 与元素有很大的不同。我将用 CSS 术语回答，用 CSS 设置`font-weight: bolder`代替 HTML`strong`标记。（在这里，无论您是直接在 CSS 中调用粗体还是使用暗示某个默认设置的 HTML 标记间接调用粗体，这都无关紧要。）

不清楚您所说的“Arial Black 不适用于 Firefox”是什么意思。

为此目的，最合乎逻辑的 CSS 代码是：

```
font-family: Arial; font-weight: 900; 
```

这要求 Arial 字体系列中最大胆的可用字体；可用时为 Arial Black，否则为 Arial Bold。Firefox 似乎并不十分一致地支持这一点，但许多浏览器在字体高度方面存在更严重的问题。（例如，Chrome 将权重 600 显示为比 700 更粗。）

在实践中，使用旧的 kludgy 方式更安全，它指的是特定的字体（字体），就好像它是一个字体系列一样：

```
font-family: Arial Black; 
```

例如，在 IE 8 上，这是获得 Arial Black 的唯一方式，而 IE 9 也支持逻辑方式（在“标准模式”下）。

如果您使用将字体设置为 Arial 并将字体粗细设置为`bolder`，则会得到 Arial Bold。如果您设置`font-family: Arial Black`and `font-weight: bolder`，您会得到 Arial Black，因为没有更粗的字体。Arial Bold 和 Arial Black 非常不同。

不可能说出您第一次尝试时出了什么问题，因为您没有发布实际使用的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T09:30:48.270

我认为您会收到相同的效果，但是我建议您使用 CSS 样式而不是使用强标签。

```
.arial-black{
  font-family: Arial;
  font-weight: bold;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T09:31:42.380

和`<strong>`之间没有视觉差异。`<b>``font-weight:700|bold;`

然而`<strong>`，屏幕阅读器（对于盲人和有视力的人）使用它来强调文本......因此使用“粗体”字体不会为屏幕阅读器带来相同的结果。

如果您不想“强调”屏幕阅读器的文本，那么我建议您改用`<b>`标签。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-24T09:41:26.850

`<strong>`标签不支持所有浏览器，因为 Arial 和 Arial black 的大小或重量都不同，你可以说。

所以你的问题的答案是肯定的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-24T09:40:23.253

在网页中使用 Arial Black 字体仅适用于实际安装了该字体的用户。（当然，使用 Arial 也仅适用于具有该字体的系统）。

Arial Black 不仅仅是 Arial 的大胆版本。虽然相似，但 Arial Black 的外观与 Arial 的粗体版本不同：

[宋体，大胆的](http://www.911fonts.com/font/download_ArialBold_603.htm)
[宋体黑](http://www.911fonts.com/font/download_ArialBlackRegular_608.htm)

您应该为您使用的所有字体使用备用字体，以便浏览器知道在该特定字体不可用时使用什么，但是使用默认粗体字体很棘手，因为您不能指定`Arial bold`为为`Arial Black`. 您将不得不使用`Arial`作为后备：

```
font-family: 'Arial Black', Arial, Helvetica, sans-serif; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-24T09:46:39.840

每当使用 Arial 的粗体时，您都可以使用`@font-face`规则强制使用 Arial Black `font-weight`：

```
@font-face {
    font-family: Arial;
    /* You can add other common names using comma-separated local definitions here */
    src: local('Arial Black');
    font-weight: bold;
}

@font-face {
    font-family: Arial;
    src: local('Arial');
    font-weight: normal;
} 
```

现在，只要将 Arial 设置为元素的字体并且计算出的字体粗细是`bold`（这是用户代理`string`在其定义中为标签设置的`html.css`），就会使用 Arial Black。

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2012-10-24T09:29:22.583

strong 标签基本上以粗体创建您的文本。对于您的情况，这没有什么区别。但是，如果您的字体不同并且您使用的是“强”，则会产生差异

# c# - 如何使用时间间隔在 Windows 窗体中的照片之间切换？

> ID：13046364
> 
> 赞同：5
> 
> 时间：2012-10-24T09:26:41.650
> 
> 标签：c#, winforms, timer, photo-gallery

我在尝试在 Form(1) 中的一组照片之间切换时遇到问题。我正在使用 picturebox.Image 来查看选择的图片，并在一定的时间间隔（比如 4 秒）后，切换到同一组照片中的随机照片。

在每张照片之间切换时，我想显示另一个 Form(2) 1 秒，然后返回 Form(1)。

我在表格（1）中的代码：

```
public partial class Form1: Form
    {
        public static Timer time;
        public static Form mod;
    public Form1()
    {
        InitializeComponent();
        time = new Timer();
        mod = new Form2();

        mod.Owner = this;
        mod.Show();
        this.Hide();

        RunForm1();
    }

    public void RunForm1()
    {
        for (int i = 0; i < groupSize; i++)
        {
                mod.Owner = this;
                mod.Show();
                this.Hide();
        }
    }
} 
```

我在表格（2）中的代码：

```
public partial class Form2: Form
{
        public static Timer time;
        public int index = -1;
        public List<Image> images;
        public DirectoryInfo dI;
        public FileInfo[] fileInfos;

    public Form2()
    {
        InitializeComponent();

        images = new List<Image>();
        time = new Timer();

        dI = new DirectoryInfo(@"C:\Users\Documents\Pictures");
        fileInfos = dI.GetFiles("*.jpg", SearchOption.TopDirectoryOnly);
        foreach (FileInfo fi in fileInfos)
            images.Add(Image.FromFile(fi.FullName));

        index = images.Count;
        time.Start();

        RunForm2();
    }

    public void RunForm2()
    {
        Random rand = new Random();

        int randomCluster = rand.Next(0, 1);

        while (index != 0)
        {
            pictureBox1.Image = images[Math.Abs(index * randomCluster)];
            setTimer();
            index--;
        }
    }

    public void setTimer()
    {
        if (time.Interval == 4000)
        {
            this.Owner.Show();
            this.Close();
        }
    } 
```

}

我在这段代码中的主要问题是： 1.时间没有更新，我的意思是时间。间隔始终设置为 100 2.我不知道为什么，但是，照片从未显示在图片框中。图像虽然，在调试模式它表明照片被正确选择。

谢谢你的帮助！罗伊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:35:43.590

您需要使用计时器中的 Tick 事件来了解时间已过。您检查间隔是否等于 (==) 4000，但您需要将其设置为 4000 ( `time.Interval = 4000`)，然后启动计时器。然后 Tick 事件将在 4 秒后触发。并且图像不显示的问题可以通过调用来解决`pictureBox1.UpdateLayout()`；

# sql-server-2008 - openquery 中的 SQL 语法 - 查询中的撇号

> ID：13046368
> 
> 赞同：1
> 
> 时间：2012-10-24T09:27:16.090
> 
> 标签：sql-server-2008, syntax, remedy

我有以下问题，我试图通过 BMC Remedy 的 sql server 2008 中的链接服务器获取数据

连接一切正常，但是当我添加*WHERE "Assigned Group" LIKE **'*** ***scri%** ' ***时，由于 BMC Remedy 需要使用撇号，我在 sql server 中出现错误。

你知道如何创建正确的语法或强制 sql server 使用引号而不是撇号，或禁用拼写检查

```
SELECT *

FROM OPENQUERY(Remedy, 

**'**

SELECT
 Incident_Number
 FROM
 HPD_Help_Desk
 WHERE
 "Assigned Group" LIKE ' scri% '

 **'**

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:26:53.957

在 Remedy 中执行 SQL 查询时，我通常会创建一个新字段并使用工作流来构建 SQL 查询。

您指定的 where 子句的语法也不正确。试试这个：

```
SELECT
  Incident_Number
FROM
  HPD_Help_Desk
WHERE
  Assigned_Group LIKE 'scri%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T14:48:39.117

可能有一个空白会导致您出现问题。你也可以试试这个：

```
SELECT Incident_Number
FROM HPD_Help_Desk
WHERE Assigned_Group LIKE '%scri%' 
```

或者，如果您在 DB 上运行 sql，您可以尝试运行这个：

```
SELECT r.Incident_Number
FROM ARADMIN.HPD_Help_Desk as r
WHERE r.Assigned_Group LIKE '%scri%' 
```

因为您正在运行 OPENQUERY，所以可能需要双撇号或双引号而不是单引号（“而不是 '）。

祝你好运

# ios - 如何使用 Mapkit 将彼此靠近的位置包装在单个标记中？

> ID：13046371
> 
> 赞同：0
> 
> 时间：2012-10-24T09:27:26.313
> 
> 标签：ios, xcode, mkmapview, mapkit

我正在寻找一种好的快速方法来将 MKMapView 上特定范围内的位置包装在单个标记中。单击该标记会使您更接近该位置的中心点。你可以在下面的图片中看到我的意思。

[mc donalds 应用程序 - 地图示例屏幕](http://i48.tinypic.com/24bt1g6.png)

我的第一个想法是检查每个标记的特定像素范围，隐藏彼此之间比 X 像素更近的像素，并获取它们的中心以创建新标记。

你们中有人做过类似的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:50:18.657

WDC 11 或 10 的演示正是这样做的，并且基于邻近度而不是网格进行合并。比 DTCluster 好看多了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:56:41.917

经过一段时间的搜索测试，我找到了几个这样的框架：

REVClusterMap、SuperPin、DTClusterMaker 等等。目前我坚持使用“REMarkerClusterer”。实现起来非常简单，而且是免费的（MIT 许可证）

[https://github.com/romaonthego/REMarkerClusterer](https://github.com/romaonthego/REMarkerClusterer)

这是一篇关于集群的好文章：http: [//applidium.com/en/news/too_many_pins_on_your_map/](http://applidium.com/en/news/too_many_pins_on_your_map/)

如果其他人在他的书签/github-list 中有很好的框架，请在此处发布。我很想见他们...

# azure - Cloud Foundry eclipse 集成错误消息

> ID：13046372
> 
> 赞同：0
> 
> 时间：2012-10-24T09:27:29.670
> 
> 标签：azure, cloud-foundry

我已经在[http ://paas.azure4j.u​​s 上安装了我的 CF](http://paas.azure4j.us)

现在我想为 CF 使用 eclipse 插件，但是当我添加我的 CF 服务器时出现错误，它说

**当前选择的服务器类型不支持远程主机**

但是当我将它测试到 api.vcap.me / 我的本地 CF 时它可以工作。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:41:46.427

这看起来像是 git 更改中解决的类似问题；

[https://github.com/SpringSource/eclipse-integration-cloudfoundry/pull/2](https://github.com/SpringSource/eclipse-integration-cloudfoundry/pull/2)

我不是真正的 Eclipse 用户，所以这有点像在黑暗中刺伤！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T22:31:02.153

我认为丹在这里是正确的。目前，您针对“localhost”创建 Cloud Foundry 连接（从 Eclipse 的角度来看，这没有多大意义），并在新面板中指定您的实际 API 目标、用户名、密码等。那是什么你在做什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T18:07:06.563

我能够使用 STS 立即连接到您的 Cloud Foundry，没有任何问题。首先我用vmc注册了一个账号。注册帐户后，我转到 STS 并在服务器选项卡上单击鼠标右键，然后从我的 vmware 文件夹中选择 Cloud Foundry。

当您在服务器选项卡上选择 Cloud Foundry 选项时，请保持服务器的主机名相同（即 localhost）。为您的服务器名称命名并保持服务器运行时环境相同。单击下一步移动到下一个屏幕。在下一个屏幕上，您应该会看到电子邮件、密码和 URL。电子邮件和密码非常简单，应该是您在 Cloud Foundry 实例中注册的信息。对于 URL 部分，单击 Manage Cloud... 按钮，然后单击 Add... 按钮。您应该会得到一个包含名称和 URL 的窗口弹出窗口。对于名称，请输入您想要的任何名称，对于 URL，请输入“http://paas.azure4j.u​​s”，然后单击“完成”。现在您已将自定义 Cloud URL 添加到列表中，因此请继续并再次单击“确定”按钮。现在您应该在新服务器窗口中，您可以在其中拥有电子邮件、密码和 URL 选项。对于 URL 选项，继续并选择您刚刚创建的新添加的 url，然后单击“验证帐户”以查看是否所有内容都已验证。您应该收到“帐户信息有效”消息。然后单击 Next 并继续执行向导，直到您完成并将 Cloud Foundry 实例添加到服务器列表中。

我再次执行了与上面提到的完全相同的步骤，并且能够将您的 Cloud Foundry 实例添加到我的服务器选项卡中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T01:50:53.157

我已经完成了这个问题，所以我在 ~/cloudfoundry/.deployment/devbox/config 上编辑了我的 cloud_controller.yml 和 uaa.yml

[然后将http://uaa.cloudfoundry.com](http://uaa.cloudfoundry.com)的uaa uri 更改为[http](http://paas.azure4j.us:8080/) ://paas.azure4j.u​​s:8080/以将其重定向到自己的 uaa。

感谢所有解决方案:))

# c# - 使用一对多 EntityFramework 移除父级

> ID：13046375
> 
> 赞同：0
> 
> 时间：2012-10-24T09:27:46.440
> 
> 标签：c#, database, sql-server-2008, entity-framework, entity-relationship

我有这门课（简体）

```
public class User {
    public string Username { get; set; }
    public virtual Section Section { get; set; }
}

public class Section {
    public int DepartmentNumber { get; set; }
    public virtual ICollection<User> DepartmentMembers { get; set; }
} 
```

我试图实现的是删除一个部分。与此部分相关的所有用户都应该得到一个空值。由于 REFERENCE 约束“FK_Users_Sections_Section”，此剂量现在有效。

这样做的正确方法是什么？在删除之前我是否必须从该部分中删除所有用户？有没有更优雅的方法来做到这一点？我正在使用 EntityFramework。

我对这个领域的流利的 API：

```
modelBuilder.Entity<User>()
            .HasOptional(u => u.Section)
            .WithMany(s => s.DepartmentMembers)
            .Map(m =>
                m.MapKey("Section")
            )
            .WillCascadeOnDelete(false); 
```

WillCascadeOnDelete 我已经尝试过设置为 false，删除该行并添加不带参数的行。

我想解决方案很简单，但我找不到任何好的解释（或者我可能不明白我一直在看的解释。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:21:13.913

尽管 SQL Server 具有用于级联删除的 SET NULL 选项，它将引用已删除记录的所有外键设置为 null，但 Entity Framework 不使用它。

您可以在 SQL Server 中自己在约束上设置此选项，也可以让实体框架通过更新加载的实体来处理它。

如果您希望 EntityFramework 执行此操作，则需要确保`DepartmentMembers`已加载集合，以便所有`User`需要更新的对象都在上下文中。

```
Section s = context.Sections.Include(s => s.DepartmentMembers).First();
context.Delete(s);
context.SaveChanges(); 
```

# c++ - c语言中的简单c风格导出导入

> ID：13046380
> 
> 赞同：0
> 
> 时间：2012-10-24T09:27:54.680
> 
> 标签：c++, dllimport, dllexport

我正在尝试使用 Visual Studios 2012 进行简单的 c 样式函数导出和导入。我做了两个项目。我的最终目标是从 Fortran 程序中调用 c++ 函数，因此我试图使 dll 尽可能简单。第一个项目只包含一个包含以下代码的文件：

```
#include <stdio.h>

extern "C" __declspec(dllexport) void __cdecl hello()
{
  printf("Hello, World!\n");
} 
```

这被编译为 .dll。然后，我将其包含在到第二个项目的链接输入中，该项目仅包含一个文件：

```
extern "C" __declspec(dllimport) void __cdecl hello();

int main(int argc, char *argv[])
{
    hello();
    return 0;
} 
```

当我在没有公共语言运行时支持的情况下链接时，我收到错误：

```
Error   1   error LNK1107: invalid or corrupt file: cannot read at 0x2B8 
```

如果我使用公共语言运行时支持进行编译，则会收到错误消息：

```
Error   1   error LNK1302: only support linking safe .netmodules; unable to link 
```

为了解决互联网希望我使用 /clr:pure 或 /clr:safe 编译的问题，但我的 vs 告诉我这不适用于 c 样式导出。

我的链接命令行调用当前是：

```
/OUT:"c:\users\kevin\documents\visual studio 2012\Projects\Project1\Release\Project2.exe" /MANIFEST /NXCOMPAT /PDB:"c:\users\kevin\documents\visual studio 2012\Projects\Project1\Release\Project2.pdb" /DYNAMICBASE "c:\users\kevin\documents\visual studio 2012\Projects\Project1\Release\*" "kernel32.lib" "user32.lib" "gdi32.lib" "winspool.lib" "comdlg32.lib" "advapi32.lib" "shell32.lib" "ole32.lib" "oleaut32.lib" "uuid.lib" "odbc32.lib" "odbccp32.lib" /DEBUG /MACHINE:X86 /OPT:REF /SAFESEH /PGD:"c:\users\kevin\documents\visual studio 2012\Projects\Project1\Release\Project2.pgd" /MANIFESTUAC:"level='asInvoker' uiAccess='false'" /ManifestFile:"Release\Project2.exe.intermediate.manifest" /OPT:ICF /ERRORREPORT:PROMPT /NOLOGO /TLBID:1 
```

提前感谢您的帮助。

另外，如果你们中的任何人更好地理解 fortran 和 c 之间的链接，那么我是否希望 /clr 在使 .dll 与 fortran 链接时（我假设我不这样做）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:32:42.417

共享库在 Windows 上由*两个文件组成。*一个`.dll`和一个`.lib`。您必须提供`.lib`一个作为链接器输入，并且必须将其放在`.dll`与可执行文件相同的目录中或`%PATH%`在运行时的某个位置。

# .net - 如何创建一个带有按钮的自定义框架......？

> ID：13046382
> 
> 赞同：-2
> 
> 时间：2012-10-24T09:28:04.087
> 
> 标签：.net, winforms

嗨，谁能告诉我如何创建一个类似于我在这里发布的图片的定制框架。框架应根据放置在其中的按钮调整大小。![在此处输入图像描述](../Images/ff2f262be374529a6e891b31cd2a12cb.png)

上传的图片可能会提供更好的主意，我想创建类似的东西。那么如何在windows窗体中创建这样的框架呢？

我的代码：

私人无效按钮1_Click（对象发送者，EventArgs e）{

```
 int start_x = Convert.ToInt32(textbox1.Text);
        int start_y = Convert.ToInt32(textbox2.Text);

        //Clear out the existing controls, we are generating a new table layout
        tableLayoutPanel1.Controls.Clear();

        //Clear out the existing row and column styles
        tableLayoutPanel1.ColumnStyles.Clear();
        tableLayoutPanel1.RowStyles.Clear();

        //Now we will generate the table, setting up the row and column counts first
        tableLayoutPanel1.ColumnCount = start_x;
        tableLayoutPanel1.RowCount = start_y;

        for (int x = 0; x < start_x; x++)
        {
            //First add a column
            tableLayoutPanel1.ColumnStyles.Add(new ColumnStyle(SizeType.AutoSize));

           for (int y = 0; y < start_y; y++)
           {
                //Next, add a row.  Only do this when once, when creating the first column
                if (x == 0)
                {
                    tableLayoutPanel1.RowStyles.Add(new RowStyle(SizeType.AutoSize));
                }

                //Create the control, in this case we will add a button
                Button cmd = new Button();
                cmd.Width = 120;
                cmd.Height = 60;
                cmd.BackColor = Color.LightGreen;
                cmd.FlatStyle = FlatStyle.Popup;
                cmd.Text = string.Format("ds");
                cmd.Click += new EventHandler(this.btnDynamicButton_Click);

                //Finally, add the control to the correct location in the table
                tableLayoutPanel1.Controls.Add(cmd, x, y);
            } 
```

但我不知道如何创建该框架并相应地安排它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T07:04:35.880

1) 创建一个新的 Windows 窗体。

2）在其中放置一些按钮并调整其大小。

3) 在表单中为 Resizing 事件添加一个处理程序。

4）根据resize事件中窗口的新大小调整按钮的大小和位置。

.Net 4 中有 6 个容器控件：Panel、SplitPanel、TabControl、TableLayoutPanel 和 FlowLayoutPanel。我认为 Panel 可以满足您的需求，因此首先将 Panel 控件添加到您的 Form。根据需要调整它的大小。

在面板中放置一个命令按钮。根据需要调整它的大小。选择它并按 F4 激活属性窗口。找到 FlatAppearance 属性并将其更改为 Flat。将背景颜色更改为白色，将文本属性更改为空字符串。现在你有一个白色按钮。复制并粘贴 3 次。根据需要放置按钮。

对于绿色按钮：开始为每个所需图像创建位图。创建一个命令按钮，将其更改为平面样式并像以前一样复制它。对于每个按钮，编辑 Image 属性并导入您创建的图像。

一旦你有了“静态”布局，你需要做一些数学运算。您必须决定使用哪种调整大小策略：

a) 成比例的：所有放大的都与容器成比例地膨胀。

b) 具有固定间距的伪比例。您设置按钮之间的固定间距并调整它们的大小以保持相同的间距。

因为“a”是最简单的方法，所以我会告诉你怎么做。

1）创建一个这样的表。当表单在设计器中（未运行）时，用容器中按钮的位置填充值

![布局中每个按钮的位置](../Images/001408dc39974ea8ce65e4bca5abf1f8.png)

2) 在调整大小事件中：

2.1) 确定 X 和 Y 的比例因子。我们称它们为 factorX 和 FactorY

2.2）每个按钮的新位置将是其原始位置乘以缩放因子。例如，对于 Button1，并假设屏幕宽度扩大 2 倍，高度扩大 3 倍：

顶部：10 x 2 = 20 左侧：10 x 3 = 30

2.3）每个按钮的大小将是原始大小调整因子：

宽度：100 x 2 = 200 高度：100 x 3 = 300

底部：20+200 = 220 右侧：30+300 = 330

等等...

# javascript - Javascript 无法检查 GridView 行中的所有复选框

> ID：13046385
> 
> 赞同：0
> 
> 时间：2012-10-24T09:28:14.607
> 
> 标签：javascript, gridview

我想就以下问题向您寻求帮助。由于某种原因，下面的代码不起作用。当我单击 GridView 行中的最后一个复选框时，未选中该复选框，其他复选框也没有任何反应。

我要实现的目标是检查最后一个复选框，然后应自动检查和禁用GridView行中的所有其他复选框。如果我取消选中最后一个复选框，则不应选中和启用一行中的所有其他复选框。

我会很感激你的帮助。

Javascript代码：

```
function SelectAll(chkBox) {
    var isChecked = chkBox.checked;
    var thisItem = chkBox.id;
    var items = chkBox.parentNode.parentNode.getElementsByTagName("input");

    for (i = 0; i < items.length; i++) {
        if (items[i].id != thisItem && items[i].type == "checkbox") {
            if (isChecked) {
                items[i].checked = true;
                items[i].enabled = false;
            }
            else {
                items[i].checked = false;
                items[i].enabled = true;
            }
        }
    }
} 
```

网格视图：

```
<asp:GridView ID="CountryAccessGrid" runat="server" AutoGenerateColumns="False" DataKeyNames="Country"
        BorderWidth="1" BorderColor="#ece9d8" BorderStyle="solid">
        <HeaderStyle CssClass="GridHeader" />
        <RowStyle CssClass="GridRow" />
        <AlternatingRowStyle CssClass="GridAltRow" />
        <EmptyDataTemplate>
            <div style="padding:10px;">
                There are no data
            </div>
        </EmptyDataTemplate>
        <Columns>
            <asp:TemplateField HeaderText="Country">
                <ItemTemplate>
                    <%#DataBinder.Eval(Container.DataItem, "Country_Descr")%>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Phones" ItemStyle-HorizontalAlign="Center">
                <ItemTemplate>
                    <asp:CheckBox
                        ID="chkPhones"
                        runat="server" />
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Lotus Notes" ItemStyle-HorizontalAlign="Center">
                <ItemTemplate>
                    <asp:CheckBox
                        ID="chkLotus"
                        runat="server" />
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Employee Relationship" ItemStyle-HorizontalAlign="Center">
                <ItemTemplate>
                    <asp:CheckBox
                        ID="chkRelationship"
                        runat="server" />
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Country Administrator" ItemStyle-HorizontalAlign="Center">
                <ItemTemplate>
                    <asp:CheckBox 
                        ID="chkIsAdmin" 
                        runat="server"
                        OnClick="javascript:SelectAll(this);"/>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

# android - 带有片段的 Android FB API 3.0 会话设置

> ID：13046386
> 
> 赞同：4
> 
> 时间：2012-10-24T09:28:21.197
> 
> 标签：android, facebook, facebook-android-sdk

我正在使用适用于 Android 的 FB API 3.0，并且正在尝试以正确的方式设置会话。

但是，似乎我做错了什么，或者说我错过了一些东西。

在我的启动器活动中，我检查是否已经有一个会话，如果它不存在我创建一个新的（如 FB 示例）：

```
Settings.addLoggingBehavior(LoggingBehaviors.INCLUDE_ACCESS_TOKENS);

    Session session = Session.getActiveSession();
    if (session != null){
    String sesija = session.toString();
    Log.w ("ss", sesija);}

    if (session == null) {
        if (savedInstanceState != null) {
            session = Session.restoreSession(this, null, MyGlobals.INSTANCE.statusCallback, savedInstanceState);
            Log.w("No Session found", "Loading saved session as it exists");
        }
        if (session == null) {
            session = new Session(this);
            Log.w("No Session found", "CreatingNewSession");

            String sesija2 = session.toString();
            Log.w ("ss2", sesija2);
        }
        Session.setActiveSession(session);
        if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
            session.openForRead(new Session.OpenRequest(this).setCallback(MyGlobals.INSTANCE.statusCallback));
            Log.w("There is an active session", "Active Session Exists");
        }

    } 
```

在这一点上，我的日志说：

```
10-24 09:11:52.284: W/ss(1404): {Session state:CREATED, token:{AccessToken token: permissions:[}, appId:xxxxxx} 
```

（AppId 正确）

然后在我的片段中，我尝试使用以下代码登录 facebook：

```
 Session session = Session.getActiveSession();
 if (!session.isOpened() && !session.isClosed()) {
            Log.w("Session is not opend", "Session is not closed");
            session.openForRead(new Session.OpenRequest(getActivity()).setCallback(MyGlobals.INSTANCE.statusCallback));
        } else {
            Session.openActiveSession(getActivity(), true, MyGlobals.INSTANCE.statusCallback);
            Log.w("Open Active Session", "Status Callback");
        } 
```

此时出现FB webview，我设置了用户名并通过，它有点工作，然后消失了。

现在，我无处可去，我没有看到响应和令牌接收，如果我再次单击登录（在同一个按钮上）我的应用程序崩溃。

在日志中我有这个：

```
10-24 09:12:31.944: W/ss(1404): {Session state:OPENING, token:{AccessToken token: permissions:[}, appId:xxxxxx} 
```

如果我将它与 FB 提供的 SessionLoginExample 进行比较，我会得到：

```
10-24 09:08:50.004: W/ss(1356): {Session state:OPENED, token:{AccessToken token:AAAFaKtb7Pg4BALYg4B5eosa0ZAE9ZAXB0ZBMFDJdNbsDsZAkGJUfKtGs71OEJikDxT2VBfo4QMXiNASz23ZAa6D76eUxW0mZAMa013HP2kxgZDZD permissions:[}, appId:xxxxxxx} 
```

这意味着我做错了什么，因为我没有捕获返回的 AccessToken，并且它没有正确保存。

那是我认为是错误的，但我不明白我应该如何以正确的方式读取会话信息，或者说在哪里捕获和保存片段中的令牌信息。

我试图放入片段：

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Boolean session = Session.getActiveSession().onActivityResult(getSherlockActivity(), requestCode, resultCode, data);

} 
```

因为这是示例中的“onActivityResult”，但它似乎什么也没做。

总结一下：我在启动器活动后面创建会话。然后如果没有安装 FB 应用程序，在 Tab4（设置）用户应该能够使用 webview 登录到 FB。然后在 Tab1 和 Tab2 上，用户应该能够像在 Instagram 上一样将图像分享到 FB。如果安装了应用程序，我会禁用选项卡 4，并让用户使用 Tab1 和 Tab2 通过 FB 应用程序共享。

肿瘤坏死因子。

已解决：从未写过但应该众所周知的事情。当进行 FB 认证时，必须执行“On Activity Result”代码以将 Token 与 session 一起保存。但是，如果您像我一样处理片段和选项卡，则函数“onActivityResult”永远不会在片段代码中执行，而必须在处理片段/选项卡的 Activity 中执行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T17:51:05.053

所以看起来你已经解决了这个问题并且你的解决方法很好，但是我想在这里提供另一个选项，以防你或其他人使用 Fragment 来代替它。

对于不能或不想从 FacebookActivity 派生的情况，您可以使用 Activity 或 Fragment 来初始化 Session。Activity 和 Fragment 都有可以覆盖的 onActivityResult，而使用哪个取决于您传递给初始化 Session.OpenRequest 的内容。

因此，如果您希望回调到达 Fragment，您可以调用：

```
...new Session.OpenRequest(myFragment)... 
```

然后在您的 Fragment 中覆盖 onActivityResult 并将呼叫转发到您的 Session。

这有点好，因为您的 Fragment 不再需要了解它正在运行的 Activity 的特殊知识。

# svn - 连接和删除 SVN 存储库中的文件夹

> ID：13046392
> 
> 赞同：1
> 
> 时间：2012-10-24T09:28:52.100
> 
> 标签：svn, repository, directory

我对 Subversion (SVN) 存储库具有管理访问权限。

存储库的 URL 如下所示：`http://svn.domain.com/svn/project/`

我已经安装了 SlikSVN（命令行客户端），我想连接到这个远程存储库并删除其中的一些文件夹。

我怎样才能完成这个任务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T09:39:20.373

除非您想从存储库中永久删除一个文件夹（即包含其整个历史记录），否则您可以执行以下命令：

```
svn delete http://svn.domaine.com/svn/project/FolderFoo -m "Deleted 'FolderFoo'" 
```

有关详细信息，请参阅[`svn delete`](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.delete.html)命令行参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:40:39.567

任何命令行 SVN 客户端（您是[Slik SVN](http://www.sliksvn.com/en/home/)，顺便说一句）的工作方式相同：

运行命令`svn help rm`以查看有关命令的帮助页面`svn rm`。

`svn rm <URL>`是你在你的情况下寻求的。

# splunk - Splunk - 合并关联事件

> ID：13046393
> 
> 赞同：1
> 
> 时间：2012-10-24T09:28:57.060
> 
> 标签：splunk

我有一个将单个事件发送到 Splunk 的脚本，每个事件本质上都是关于 HTTP 请求（GET 或 POST）的报告。该事件包含许多字段，但两个关键字段是 StepName 和 Timing：

1.  StepName 将是 HTTPRequest 等的标题。 PostLogin
2.  Timing 将是 HttpRequest 所用毫秒的 int 值

我正在写一份报告，显示过去 15 分钟内每个步骤的平均时间。但是，从最终用户的角度来看，某些步骤是一个过程的一部分，例如

1.  第 1 步 - 获取登录页面
2.  Step2 - PostLoginPage
3.  Step3 - ProcessUserDetails
4.  Step4 - 获取主页

在这种情况下，Step2 和 Step3 将是最终用户的一个过程，因此我希望能够报告这些，就好像它们是一个步骤一样，因此如下：

* * *

GetLoginPage 50
PostLoginPage 100
ProcessUserDetails 250
GetHomePage 80

* * *

会成为

* * *

GetLoginPage 50
PostLoginPage 350
GetHomePage 80

* * *

我可以在 StepName 上使用替换，所以我有

* * *

GetLoginPage 50
PostLoginPage 100
PostLoginPage 250
GetHomePage 80

* * *

然后如何合并这些结果，以便将两个 PostLoginPage 步骤相加，然后为我提供三个单独步骤在一段时间内的平均值？

请注意，每个步骤都有一个名为 TransactionGUID 的字段，它将一组步骤关联起来以进行相同的执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:12:31.873

如果您在[http://splunk-base.splunk.com/answers/](http://splunk-base.splunk.com/answers/)上发布您的问题，您将可以接触到更多的 Splunk 专业知识，我将尝试在那里回答您的问题。

# google-provisioning-api - 如何一步在组织单位中创建新用户？

> ID：13046395
> 
> 赞同：0
> 
> 时间：2012-10-24T09:29:12.273
> 
> 标签：google-provisioning-api

使用 Google Provisioning API，在[管理组织单位](https://developers.google.com/google-apps/provisioning/#managing_organization_users)下，它指出在组织单位内创建用户是一个两步过程。首先我必须创建用户，然后我必须将它们移动到一个 OU 中。

如果我从遗留系统迁移某人，这会产生问题。创建他们的帐户会导致我们的路由立即开始向该帐户发送电子邮件，覆盖他们的旧帐户。但是，我们通常会提前创建这些帐户，因此有一个特定的 OU，其路由将被忽略。

目前，我们必须使用不同的电子邮件地址创建帐户（例如，将“-renamed”附加到用户名），将帐户移动到非路由OU中，再次重命名帐户，最后删除无关的“-renamed”别名这是在重命名期间创建的。对于应该是一个简单的操作来说，这似乎很混乱。

有没有更简单/更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:49:57.590

遗憾的是，您无法立即在特定子组织中创建用户。我认为在创建新用户连接到路由后您有某种回调，您可以告诉该服务在创建用户之前忽略该特定用户名的下一个回调，或者将您的默认组织作为非路由一。

我也可以推荐使用 SAML SSO，尤其是当用户需要任何其他帐户时，正确同步帐户并在这种情况下处理异常可能会很痛苦。

# c++ - 如何测量使用预编译头文件节省的时间

> ID：13046396
> 
> 赞同：1
> 
> 时间：2012-10-24T09:29:13.370
> 
> 标签：c++, visual-c++, stdafx.h

我有一个 Visual C++ 解决方案，其中包含大约 15 个项目，构建时间超过 30 分钟。这是一个很大的解决方案，我们正在做各种各样的坏事，例如在所有地方都包含 windows api 标头，而不是将它们放在 stdafx.h 中

在我进入并将这些标题移动到 stdafx.hi 之前，我想测量一下我的努力会节省多少时间。我正在考虑在更改之前和更改之后进行重建，但我预编译的标头开始在第二次增量构建中得到回报，而不是重建，因为它也会清理 pch 文件。

有什么方法可以衡量这个吗？

# javascript - 如何在把手模板中设置选定的选择选项

> ID：13046401
> 
> 赞同：54
> 
> 时间：2012-10-24T09:29:29.277
> 
> 标签：javascript

使用像这样的 Handlebars.js 模板...

```
<select>
    <option value="Completed">Completed</option>
    <option value="OverDue">OverDue</option>
    <option value="SentToPayer">SentToPayer</option>
    <option value="None">None</option>
</select> 
```

...和这样的数据...

```
{
    "id"     : 1,
    "name"   : "World"
    "status" : "OverDue",
    "date"   : "2012-12-21"
} 
```

我想像这样渲染 HTML。

```
<select>
    <option value="Completed">Completed</option>
    <option value="OverDue" selected="selected">OverDue</option>
    <option value="SentToPayer">SentToPayer</option>
    <option value="None">None</option>
</select> 
```

哪种方式最简单？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-10-24T09:29:29.277

我发现了很多过于复杂的解决方案，并决定使用 Handlebars 助手编写自己的解决方案。

有了这个部分（使用Jquery）......

```
 window.Handlebars.registerHelper('select', function( value, options ){
        var $el = $('<select />').html( options.fn(this) );
        $el.find('[value="' + value + '"]').attr({'selected':'selected'});
        return $el.html();
    }); 
```

您可以使用 {{#select status}}... 在您的 Handlebars 模板中包装选择...

```
<select>
    {{#select status}}
    <option value="Completed">Completed</option>
    <option value="OverDue">OverDue</option>
    <option value="SentToPayer">SentToPayer</option>
    <option value="None">None</option>
    {{/select}}
</select> 
```

并以这个结束...

```
<select>
    <option value="Completed">Completed</option>
    <option value="OverDue" selected="selected">OverDue</option>
    <option value="SentToPayer">SentToPayer</option>
    <option value="None">None</option>
</select> 
```

快！

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-06-04T22:17:52.300

我只是有与 OP 类似的需求——使用一组静态的选择选项，但有一个动态的选择值。我真的很喜欢@janjarfalk 的解决方案，但我使用的是 node.js 并且没有引入 jQuery。所以，我根据 RegExp 组合了我自己的变体。希望这对其他人有帮助。

车把助手：

```
hbs.registerHelper('select', function(selected, options) {
    return options.fn(this).replace(
        new RegExp(' value=\"' + selected + '\"'),
        '$& selected="selected"');
}); 
```

车把模板：

```
<select>
    {{#select CurrentSort}}
    <option value="1">Most Recent First</option>
    <option value="2">Most Recent Last</option>
    <option value="3">Highest Score First</option>
    <option value="4">Highest Score Last</option>
    <option value="5">Most Comments</option>
    <option value="6">Fewest Comments</option>
    <option value="7">Most Helpful Votes</option>
    <option value="8">Fewest Helpful Votes</option>
    {{/select}}
</select> 
```

即使您不使用该`value`属性，您也可以调整帮助程序以使其工作——只需调整正则表达式以搜索元素文本，并在匹配的文本之前进行字符串替换。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-03-12T22:10:37.723

我看到@janjarfalk 发布的极其聪明的解决方案，并意识到它不适用于没有值属性定义的选项（例如`<option>Value</option>`）。我的应用程序需要它，并且我想要一个用 vanilla JavaScript 完成的助手来提高性能，所以我想出了以下内容。

该解决方案将支持`<option>Both a label and a value</option>`并且`<option value="aValue">A label</option>`速度更快，因为它不使用 jQuery。

```
Handlebars.registerHelper('select', function(value, options) {
    // Create a select element 
    var select = document.createElement('select');

    // Populate it with the option HTML
    select.innerHTML = options.fn(this);

    // Set the value
    select.value = value;

    // Find the selected node, if it exists, add the selected attribute to it
    if (select.children[select.selectedIndex])
        select.children[select.selectedIndex].setAttribute('selected', 'selected');

    return select.innerHTML;
}); 
```

用法：

```
<select>
    {{#select status}}
    <option>Option 1</option>
    <option>Option 2</option>
    <option value="Option 3">Option 3 (extra info)</option>
    <option value="Option 4">Option 4 (more extra)</option>
    {{/select}}
</select> 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2017-06-19T09:27:01.877

为我工作

```
<select>
    <option value="{{status}}" hidden="hidden" selected="selected">{{status}}</option>
    <option value="Completed">Completed</option>
    <option value="OverDue">OverDue</option>
    <option value="SentToPayer">SentToPayer</option>
    <option value="None">None</option>
</select> 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-12-06T14:45:15.770

由于上下文的原因，在使用“每个”帮助器构建动态的东西时，我遇到了“选择块”方法的问题。

这是我的解决方案：

```
 Handlebars.registerHelper('option', function(value, label, selectedValue) {
    var selectedProperty = value == selectedValue ? 'selected="selected"' : '';
    return new Handlebars.SafeString('<option value="' + value + '"' +  selectedProperty + '>' + label + "</option>");
  }); 
```

和模板：

```
<select>
  {{#each status}}
    {{option id name ../statusId}}
  {{/each}}
</select> 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-08-21T05:54:08.090

改进了@lazd 的答案，以在没有匹配项时选择第一个选项。

```
Handlebars.registerHelper('select', function(value, options) {
    // Create a select element 
    var select = document.createElement('select');

// Populate it with the option HTML
$(select).html(options.fn(this));

//below statement doesn't work in IE9 so used the above one
//select.innerHTML = options.fn(this); 

    // Set the value
    select.value = value;

    // Find the selected node, if it exists, add the selected attribute to it
    if (select.children[select.selectedIndex]) {
        select.children[select.selectedIndex].setAttribute('selected', 'selected');
    } else { //select first option if that exists
        if (select.children[0]) {
            select.children[0].setAttribute('selected', 'selected');
        }
    }
    return select.innerHTML;
}); 
```

用法保持不变：

```
<select>
    {{#select status}}
    <option>Option 1</option>
    <option>Option 2</option>
    <option value="Option 3">Option 3 (extra info)</option>
    <option value="Option 4">Option 4 (more extra)</option>
    {{/select}}
</select> 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-10-18T04:28:09.207

这可能需要模板中的更多代码，但更容易阅读：

.js

```
Handlebars.registerHelper('select', function(selected, option) {
    return (selected == option) ? 'selected="selected"' : '';
}); 
```

.hbs

```
<select name="status">
    <option value="public" {{{select story.status 'public'}}}>Public</option>
    <option value="private" {{{select story.status 'private'}}}>Private</option>
    <option value="unpublished" {{{select story.status 'unpublished'}}}>Unpublished</option>
</select> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-04-25T06:39:02.437

我只是遇到了这个问题，这里有一个解决方案，用于何时动态。

我没有创建选择助手，而是创建了一个选项助手，它接受您希望选择的项目的值。

```
Handlebars.registerHelper('option', function(value) {
  var selected = value.toLowerCase() === (this.toString()).toLowerCase() ? 'selected="selected"' : '';
  return '<option value="' + this + '" ' + selected + '>' + this + '</option>';
}); 
```

在我的模板中。

```
{{#items}}
    {{{option ../selected_value}}}
{{/items}} 
```

请注意 ../ 以访问父级的范围，因为 selected_value 不太可能位于 items 数组内。

干杯。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-07-16T15:48:17.490

我更喜欢使用模板方法。我的意思是选项标签本身的布局是在车把模板中指定的（有人可能会在其中查找它），而不是在 javascript 帮助程序中。块助手中的模板被传递到助手脚本中，可以通过调用**options.fn()**使用，然后使用您在助手中所做的任何脚本更改。

模板：

```
<select>
  {{#optionsList aStatusList sCurrentStatusCode 'statusCode'}}
    <option {{isSelected}} value="{{statusCode}}">{{statusName}}</option>
  {{/optionsList}}
</select> 
```

稍微修改的数据（不是必需的，但对我来说更“真实世界”）

```
var myOrder = 
{
    "id"     : 1,
    "name"   : "World",
    "statusName" : "OverDue", /* status should NOT be here! */
    "statusCode" : "1",
    "date"   : "2012-12-21"
}

var sCurrentStatusCode = myOrder.statusCode;

var aStatusList =
[
    {
        "statusName"       : "Node",
        "statusCode" : 0
    },
    {
        "statusName"       : "Overdue",
        "statusCode" : 1
    },
    {
        "statusName"       : "Completed",
        "statusCode" : 2
    },
    {
        "statusName"       : "Sent to Payer",
        "statusCode" : 3
     }
] 
```

Javascript注册助手：

```
Handlebars.registerHelper( 'optionsList',
function ( aOptions, sSelectedOptionValue, sOptionProperty, options )
{
  var out = "";
  for ( var i = 0, l = aOptions.length; i < l; i++ )
  {
    aOptions[ i ].isSelected = '';
    if( ( sOptionProperty != null &&  sSelectedOptionValue == aOptions[ i ][ sOptionProperty ] ) || (  sSelectedOptionValue == aOptions[ i ] ) )
    {
      aOptions[ i ].isSelected = ' selected="selected" ';
    }
    out = out + options.fn( aOptions[ i ] );
  }
  return out;
} ); 
```

**optionsList**是我选择给这个助手命名的

**aStatusList**状态对象数组包含多个属性，包括状态值/名称（在大多数情况下，我遇到的这将是状态代码而不是存储的状态名称）

**sCurrentStatus**是先前选择的状态代码（不是值），是我希望在此生成的选项列表中选择的选项值。

**statusCode**是 aStatusList 对象中的字符串属性名称，我将测试它是否与 myStatus 匹配，即 aStutusList[ loopIndex ][ **statusCode** ]

*   字符串选项属性（在这种情况下为 statusCode ）仅对对象是必需的 - 选项列表也可以是字符串数组（而不是反过来包含字符串的对象），在这种情况下，您可以省略第三个属性“statusCode”，它告诉助手要再次测试对象的什么属性。如果您不通过该属性，它只会测试列表项本身。
*   如果 sSelectedOptionValue 未通过，则将生成列表而不将任何项目设置为选中。**这将生成与使用{{#each}}**帮助器几乎相同的列表

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-11-26T20:15:43.050

今天我也面临同样的问题，我正在创建一个内容管理系统并获取我卡住的帖子的状态并在寻找解决方案时，我登陆这个页面我找到了一些相关的答案因为我正在使用服务器-side 数据，当我使用 document.createElement 时，它抛出错误文档未定义。

正则表达式解决方案对我有用，但我想要一个易于理解的解决方案是否冗长，所以我提出了这个解决方案。

```
 Handlebars.registerHelper('getValue', function(value, options) {
   if(options.fn(this).indexOf(value) >= 1){
         return `selected='selected'`;
      }
}); 
```

在模板中以这种方式使用代码

```
 <select name="post-status" id="post-status">
        <option {{#getValue posts.postStatus}} value="Draft" {{/getValue}} >Draft</option>
        <option {{#getValue posts.postStatus}} value="private" {{/getValue}} >private</option>
        <option {{#getValue posts.postStatus}} value="publish" {{/getValue}} >publish</option>
</select> 
```

如果我在某个地方错了，请纠正我。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-08-02T21:25:35.503

如果您的选择很少并且不想编写帮助程序，那么您可以执行以下操作：

```
//app.js
var data = {selectedVal: 'b'}; 

// can also use switch ... case ...
if (data.selectedVal === 'a') {
   data.optionASelected = true;
} else if (data.selectedVal === 'b') {
   data.optionBSelected = true;
}

// assuming you have a template function to handle this data
templateFunc(data); 
```

在您的模板文件中：

```
<!-- template.html -->
<select id="select-wo-helper" >
  <option value="a" {{#if optionASelected}} selected {{/if}}>A</option>
  <option value="b" {{#if optionBSelected}} selected {{/if}}>B</option>
</select> 
```

同样，这可能不是最好的解决方案，但当您处理的选项很少并且想要快速修复时，它可能是一个非常快速的解决方案。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-12-05T23:43:41.773

数据源

```
selectedValue: "8",
option:[
    {id_sub_proyectop: "8", clave: "021", name: "Cliclismo"},
    {id_sub_proyectop: "9", clave: "022", name: "Atletismo"},
], 
```

帮手

```
Handlebars.registerHelper('selected', function(value, prop) {
    if (value === undefined){ return '';};
    return value === this[prop] ? 'selected="selected"' : '';
}); 
```

模板

```
<div class="medium-6 cell">
    <label>Sub Proyecto / Proceso:
        <select name="id_sub_proyectop" required>
            {{#each option}}
            <option value="{{id_sub_proyectop}}" {{{selected ../selectedValue 'id_sub_proyectop'}}}>{{clave}} - {{name}}</option>
            {{/each}}
        </select>
    </label>
</div> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-05-29T20:53:57.700

我知道这并不能直接回答问题，但是在这种情况下，我将未选择的 html 选项传递给模板，并在渲染后使用 jquery 将 json 对象指示的值标记为已选择

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-12-09T12:22:59.457

`<option>`@lazd的答案不适用于`<optgroup>`.

`selectedIndex`对所有`<option>`s 进行单调编号，但`select.children`保留`<optgroup>`s，并将 s`select.children[n].children`保留`<option>`在`<optgroup>`n 内（当然，编号在每个 内重新开始`<optgroup>`）。

此替代版本适用`<option>`于 s 中的元素`<optgroup>`：

```
Handlebars.registerHelper('select-optgrp', function(value, options) {
    var select = document.createElement('select'); // create a select element
    select.innerHTML = options.fn(this);           // populate it with the option HTML
    select.value = value;                          // set the value
    var g = 0, i = select.selectedIndex;           // calculate which index of which optgroup
    while (i >= select.children[g].children.length) { i -= select.children[g].children.length; g++; }
    if (select.children[g].children[i]) {          // if selected node exists add 'selected' attribute
        select.children[g].children[i].setAttribute('selected', true);
    }
    return select.innerHTML;
}); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-10-31T02:59:48.240

另一种使用`express-handlebars`和动态选项的解决方案是这个。

辅助函数（从所有选项中获取我们想要的选项并将其更改为选中）。

```
select: function(selected, options) {
    return options.fn(this)
      .replace( new RegExp(' value=\"' + selected + '\"'), '$& selected="selected"')
      .replace( new RegExp('>' + selected + '</option>'), ' selected="selected"$&');
  } 
```

handlebars 文件（我只是在 select 中使用 #each 来接收我的数据并像魅力一样工作）。

```
<select name="justAname">
  {{#select content.campusId}}
    {{#each campus}}
      <option value="{{id}}">{{name}}</option>
    {{/each}}
  {{/select}}
</select> 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-05-17T03:00:17.827

对于数组

```
function select(selected, options) {
    return options.fn(this).replace( new RegExp(' value=\"' + selected + '\"'), '$& selected="selected"').replace( new RegExp('>' + selected + '</option>'), ' selected="selected"$&');
  }, 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-05-30T06:57:53.890

```
Handlebars.registerHelper('select', function( value, options ){
  return options.fn(this)
  .replace( new RegExp(' value=\"' + value + '\"'), '$& selected="selected"')
  .replace( new RegExp('>' + value + '</option>'), ' selected="selected"$&');
});

user.country from db session
country stored in country.json file

<select id="country" name="country" class="form-control">
<option value="" selected="selected">(please select a country)</option>
{{#select user.country}}
{{#each countries as |value key| }}
<option value="{{ value.code }}">{{ value.name }}</option>
{{/each}}
{{/select}}
</select> 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-11-11T19:49:30.657

应该提到的是，如果您不关心重复......您可以使用香草车把并将所选选项放在第一位，例如：

```
 <select name="ingredient">
        <option value="{{ingredient.id}}" selected>{{ingredient.name}}</option>
        {{#each ingredients}}
        <option value="{{this.id}}">{{this.name}}</option>
        {{/each}}
        </select> 
```

# qr-code - 带有相对日期的二维码日历事件

> ID：13046405
> 
> 赞同：1
> 
> 时间：2012-10-24T09:29:36.593
> 
> 标签：qr-code, icalendar, vcalendar

我正在寻找可以添加 Vcal 事件的 QR 码： 开始日期和时间：截至扫描代码的日期和时间 结束日期和时间：开始日期后正好 xx 周（比如 2 周）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:31:25.627

在 iCalendar 中，您可以使用 DURATION 属性在 VEVENT 中指定持续时间。[（请参阅RFC 2445](http://www.ietf.org/rfc/rfc2445.txt)的第 4.3.6 节。）您可以使用它来代替 DTEND。语法有点难以解释；你可以在 RFC 中看到它。`DURATION:PT1H30M`表示 1 小时 30 分钟。`DURATION:P2W`意味着两周。

因此，您可以将其添加到`VEVENT`您已经要在 QR 码中进行编码的内容中。

当然，读者是否正确阅读是另一回事。我可以告诉你[zxing](http://code.google.com/p/zxing)不读`DURATION`。因为我写了它，我才知道它的`DURATION`存在。我会将其添加为正确解析的待办事项。

# android - 在片段中动态添加文本视图

> ID：13046407
> 
> 赞同：4
> 
> 时间：2012-10-24T09:29:40.353
> 
> 标签：android, android-layout, view, android-fragments

我是android开发的新手..我正在使用片段。我现在面临的问题是-我无法在片段中动态添加视图。当我尝试这样做时，我得到了一个空指针异常......我的代码片段是如下：

```
final LinearLayout linearLayout = (LinearLayout)inflater.inflate(R.layout.connections_layout, container, false);
EditText editText = new EditText(getActivity());

final int i = 5;
editText.setId(i); //Set id to remove in the future.
editText.setLayoutParams(new LayoutParams(
        LayoutParams.FILL_PARENT,
        LayoutParams.WRAP_CONTENT));
editText.setText("Hello");
Log.d("View","Start");
try{
    linearLayout.addView(editText);
}catch(Exception e){
    e.printStackTrace();
} 
```

**connection_layout.xml**文件如下：

```
<?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                      android:id="@+id/connections"
                      android:layout_width="fill_parent"
                      android:layout_height="fill_parent"
                      android:background="#FF0000" >

  </LinearLayout> 
```

该片段是属于片段活动的选项卡组的成员。我在我的代码片段中做错了什么？任何形式的帮助表示赞赏。在此先感谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T10:12:23.813

在片段上试试这个`onCreateView`：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

 mContainer = inflater.inflate(R.layout.connections_layout, null);
 LinearLayout linearLayout = mContainer.findViewById(R.id.connections);
 EditText editText = new EditText(getActivity());

 final int i = 5;
 editText.setId(i); //Set id to remove in the future.
 editText.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
            LayoutParams.WRAP_CONTENT));
 editText.setText("Hello");
 Log.d("View","Start");
 try{
        linearLayout.addView(editText);
 }catch(Exception e){
        e.printStackTrace();
 }

 return mContainer; 
```

}

# xcode - FMDB 在级联在一起的两个项目中充当子模块的冲突

> ID：13046412
> 
> 赞同：2
> 
> 时间：2012-10-24T09:29:59.657
> 
> 标签：xcode, git, fmdb, git-submodules

描述：在 XCode 4.5 for iOS 项目中集成 FMDB。a> Proj A 和 proj B，B 是 A 中的子模块。 b> FMDB 是 A 和 B 的子模块。

问题：冲突！a> 如果 B 中的 FMDB 被删除，则出现文件丢失错误 b> 如果同时保留 FMDB 或将 A 中的 FMDB 用于 B，则出现重复文件错误

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:53:12.750

重命名其中一个 FMDB 项目中的类，为其赋予一个新前缀。我自己不得不这样做几次。

# java - 了解泛型和多态性

> ID：13046413
> 
> 赞同：0
> 
> 时间：2012-10-24T09:30:00.063
> 
> 标签：java, generics, polymorphism

> **可能重复：**
> [`List<Dog>` 是 `List<Animal>` 的子类吗？为什么 Java 的泛型不是隐式多态的？](https://stackoverflow.com/questions/2745265/is-listdog-a-subclass-of-listanimal-why-arent-javas-generics-implicit)

```
public abstract class AbstractServerSession<E extends AbstractPacket> {
[...]
packet = (E) PacketFactory.getPacket(packetClazz); 
```

我得到这个错误，恕我直言没有意义：

`Type mismatch: cannot convert from AbstractPacket to E`

`E`如果我明确指出那是 的孩子，他怎么不能转换`AbstractPacket`？

我可以添加演员表

```
packet = (E) PacketFactory.getPacket(packetClazz); 
```

但是当然我会收到这个警告：

```
Type safety: Unchecked cast from AbstractPacket to E 
```

那是`<E extends AbstractPacket>`为了什么？

编辑：根据要求

```
public static final AbstractPacket getPacket(Class<? extends AbstractPacket> clazz) 
```

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:51:01.380

> 但当然我得到这个警告：类型安全：从 AbstractPacket 到 E 的未经检查的强制转换

我认为该警告是有道理的，因为 E 类型无法在编译时确定，但它不会影响您的运行。

# networking - 根据远程服务器上的端口测试网络带宽

> ID：13046415
> 
> 赞同：0
> 
> 时间：2012-10-24T09:30:00.500
> 
> 标签：networking, bandwidth

我想知道根据远程服务器上的端口测试网络带宽有多容易？感谢和问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:48:17.090

好吧，您需要一个流量生成器来在某个端口上生成最大流量并监视该端口一段时间，然后将数量除以时间以获得平均值。请务必考虑计算 TCP-setup-latency。

例如，这可以通过 nutTCP 或许多其他程序（jperf ...）来完成。

# php - 如何使用 aviary web 小部件和 php 在本地保存编辑后的图像

> ID：13046418
> 
> 赞同：2
> 
> 时间：2012-10-24T09:30:08.450
> 
> 标签：php, jquery

我将羽毛鸟舍网络小部件插入我的网站，它看起来和播放都非常棒。但是我很难使用 php 将编辑后的图像保存在本地（从鸟舍服务器到我的服务器），我想将原始图像覆盖为编辑后的图像.我阅读了 aviary 文档（www.aviary.com/web-documentation），但我不明白如何在本地保存编辑后的图像。这是鸟舍的例子：

```
<script type="text/javascript">

    var featherEditor = new Aviary.Feather({
        apiKey: '1234567',
        apiVersion: 2,
        tools: ['draw', 'stickers'],
        onSave: function(imageID, newURL) {
            var img = document.getElementById(imageID);
            img.src = newURL;
        },
        postUrl: 'http://example.com/featherposturl'
    });

    function launchEditor(id, src) {
        featherEditor.launch({
            image: id,
            url: src
        });
        return false;
    }

</script>                         

<!-- Add an edit button, passing the HTML id of the image
    and the public URL to the image -->
<a href="#" onclick="return launchEditor('editableimage1', 
    'http://example.com/public/images/goat.jpg');">Edit!</a>

<!-- original line of HTML here: -->
<img id="editableimage1" src="http://example.com/public/images/goat.jpg"/> 
```

这是php编码：

```
<?php

    $image_data = file_get_contents($_REQUEST['url']);

    file_put_contents("photo.jpg",$image_data);

?> 
```

# wpf - Silverlight 和 WPF 的官方 Microsoft Metro 主题？

> ID：13046426
> 
> 赞同：0
> 
> 时间：2012-10-24T09:30:30.517
> 
> 标签：wpf, silverlight, themes

Silverlight 和 WPF 是否有任何官方的 Microsoft Metro 主题？

我假设有，因为他们在他们的[Windows 8 用户体验指南中特别提到了](http://download.microsoft.com/download/C/0/A/C0AEF0CC-B969-406D-989A-4CDAFDBB3F3C/Win8_UXG_RTM.pdf)

> # 一个人赢
> 
> 与其他应用程序、设备和系统合作，为人们完成场景，例如从一个应用程序中挑选内容并与另一个应用程序共享。利用人们已经知道的东西，例如标准的触摸手势和魅力，提供熟悉感、控制感和自信感。
> 
> *   适合 UI 模型。
> *   减少 UI 中的冗余。
> *   通过参与应用合约，与其他应用一起完成场景。
> *   **使用我们的工具和模板来提高一致性。**
> 
> 遵循这五个 Metro 风格设计原则将帮助您在设计应用程序时做出最佳选择。

我试图搜索它，但我只找到了一些不是来自微软的资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:16:43.340

我不认为有任何官方的（至少我的谷歌技能不允许我找到一个，尽管经常搜索）。但我以前用过这个，非常好： http: [//mahapps.com/MahApps.Metro/](http://mahapps.com/MahApps.Metro/)

如果您点击链接，就会有关于如何使用的屏幕截图和说明（您将立即启动并运行）。

# coffeescript - 将新元素从表单添加到 Meteor 中的集合

> ID：13046429
> 
> 赞同：2
> 
> 时间：2012-10-24T09:30:46.423
> 
> 标签：coffeescript, meteor

所以我有这个用例：

我在页面上有一个联系人列表，并希望允许用户将新联系人添加到列表中。为了添加联系人，有一个可以填写两个输入的表单，还有一个发送表单的按钮。

这在 Meteor 中非常简单。我将提交事件绑定到表单，如下所示：

```
Template.contacts.events
  'submit #new_contact': (event) ->
    event.preventDefault()

    firstName = $('#first_name').val()
    lastName = $('#last_name').val()

    Contacts.insert(firstName: firstName, lastName: lastName)
    $('#new_contact input').val('') # Clear the inputs 
```

好吧，这也很容易，但我不喜欢在表单中引用特定 id，使用 JQuery 获取它们，然后将新联系人插入列表的想法。我还认为这必须非常糟糕地扩展，如果表单有 20 个字段，我必须在表单中搜索 20 个元素，这看起来不太干净。

我想知道是否有解决此问题的更好方法，例如将表单输入绑定到对象/集合，以便在用户在表单中引入数据时自动更新，然后仅在提交表单时将其持久化.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T01:44:46.993

自动支持这个计划（我认为），但与此同时，您可能可以通过使用模板对象来解决大多数反对意见：

```
Template.contact.events
  'submit form.contact': (event, template) ->
     firstName = template.find('input[name=first_name]').value 
```

或者，在事件助手的主体中，`this.currentTarget`是表单本身。

# msdeploy - 撤消 WMSvc 的 RunCommand 权限更改

> ID：13046433
> 
> 赞同：0
> 
> 时间：2012-10-24T09:30:55.867
> 
> 标签：msdeploy, privileges

[我按照这个问题](https://stackoverflow.com/questions/4380819/msdeploy-runcommand-priviliges)中的建议更改了 WMSvc 帐户的权限，但是在阅读了[MSDN](http://technet.microsoft.com/en-us/library/ee619740%28WS.10%29.aspx)上的文档之后，这似乎不是推荐的做法，最好为我的帐户添加“替换进程级别令牌”权限，其中我已经完成并且它正在工作。

我需要做什么才能将 WMSvc 的权限更改恢复为默认值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:00:34.110

I think it has no extra privileges by default so you could try this command:

```
sc privs wmsvc / 
```

You want to run "sc qprivs wmsvc" to list what it has on it before you remove them.

# jquery - jQuery.siblings 找不到兄弟姐妹

> ID：13046438
> 
> 赞同：0
> 
> 时间：2012-10-24T09:31:14.800
> 
> 标签：jquery, asp.net, dom

我正在维护的网络系统有一个非常特殊的问题。在一个视图中，我想从我的 DOM 中的标签字段中获取问题编号。但是我的代码无法找到标签元素。

这是脚本部分。

```
$(document).ready(function () {
                $(function () {
                var result = $(".answer").click(function () {
                    $(this).editable({
                        className: "",
                        saveUrl: "../api/Results/SaveResults",
                        create: function () {
                            var number = $(this).siblings(".number").text();
                            console.log(number);
                            $(this).editable("option", "questionNumber", number);
                        }
                    });
                });
            });
        }); 
```

这是HTML

```
<div class="questionDiv">
                    <asp:Label ID="questionNumber1" runat="server" CssClass="number"></asp:Label>
                    <asp:TextBox ID="answer1" Wrap="True" runat="server" CssClass="answer" TextMode="MultiLine" Width="100%"
                            Rows="5" MaxLength="2000" Columns="65"></asp:TextBox>
                </div> 
```

并在浏览器中呈现：

```
<span id="questionNumber1" class="number">1</span>
<textarea name="answer1" rows="5" cols="65" id="answer1" class="answer" style="width: 540px; "></textarea> 
```

由于某种原因，create 函数中的数字变成了一个空字符串。使用的原因之一`$(this)`是因为每页不止一个问题。`label.text`是从方法后面的代码中设置的`Page_Load()`。

我一直在尝试多种不同的组合；

```
$(this).prev().text()

$(this).parent().children(".number").text()

$(this).parent().children().find(".number").text() 
```

等等

如果我在 chrome 控制台中尝试这些组合，即。`$("#answer1").siblings().text()`它完美地工作。

有没有人知道为什么会这样？所有元素都应该按照在`document.ready()`函数中完成的方式呈现。

提前致谢。

彼得

编辑：经过更多调查，我注意到即使我使用`var number = $("questionNumber1").text();`我也只是得到一个空字符串。问题是否与 DOM 未完全加载有关。脚本块位于其中，`document.ready()`因此人们会猜测 DOM 已加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:23:01.767

问题是 create: 函数将 $(this) 包装在另一个 div 中。所以， parent().parent().first(".number") 解决了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:34:47.457

也许`this`inside`create`方法指的是除`$(".answer")`?

尝试备份，可能有帮助：

```
var result = $(".answer").click(function() {
    var $this = $(this);
    $this.editable({
        className: "",
        saveUrl: "../api/Results/SaveResults",
        create: function() {
            var number = $this.siblings(".number").text();
            console.log(number);
            $this.editable("option", "questionNumber", number);
        }
    });
}); 
```

# .net - 在 .NET 中加密 XML

> ID：13046440
> 
> 赞同：1
> 
> 时间：2012-10-24T09:31:18.450
> 
> 标签：.net, xml, encryption

我有一个场景，我将 XML 文件从服务器发送到应用程序。

我想确保只有应用程序可以读取 XML 内容，即不仅通信本身应该是安全的，而且当客户端收到加密的 XML 时，**只有应用程序应该能够读取和使用其内容**。

由于我对加密不是很熟悉，我会很感激有关如何实现这一目标的一些指导？

我看过[How to: Encrypt XML Elements with Asymmetric Keys](http://msdn.microsoft.com/en-us/library/ms229746.aspx)。但是，我不太了解客户端如何获取解密密钥。该示例似乎使用了`KeyContainer`在加密之前生成密钥时同时存储公钥和私钥的 a，在不同机器上运行时如何工作？我想我可以生成一次密钥，然后将公共部分保存到 xml，但是，任何拥有 xml 的人都可以解密消息，包括客户端应用程序的用户？有没有一种方法可以以安全的方式将公钥嵌入到客户端应用程序中？

# sql - 关系型数据库与图型数据库的比较

> ID：13046442
> 
> 赞同：113
> 
> 时间：2012-10-24T09:31:26.177
> 
> 标签：sql, relational-database, graph-databases

有人可以向我解释一下关系数据库（如 MySQL）与 Neo4j 等图形数据库相比的优缺点吗？

在 SQL 中，您有多个表，其中有各种 id 链接它们。然后你必须加入连接表。从新手的角度来看，为什么要将数据库设计为需要连接，而不是像图形数据库那样从一开始就将连接显式地作为边。从概念上讲，这对新手来说毫无意义。大概有一个非常技术性但非概念性的原因？

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-10-24T09:51:51.897

这两种风格背后实际上都有概念上的推理。[关于关系模型](http://en.wikipedia.org/wiki/Relational_model)和[图形数据库](http://en.wikipedia.org/wiki/Graph_database)的维基百科对此进行了很好的概述。

主要区别在于，在图形数据库中，关系存储在单个记录级别，而在关系数据库中，结构是在更高级别（表定义）定义的。

这具有重要的影响：

*   在处理大量记录时，关系数据库要快得多。在图形数据库中，必须在查询期间单独检查每条记录以确定数据的结构，而这在关系数据库中是提前知道的。
*   关系数据库使用较少的存储空间，因为它们不必存储所有这些关系。

仅当关系中存在大量变化时，将所有关系存储在个人记录级别才有意义；否则你只是一遍又一遍地复制同样的东西。这意味着图形数据库非常适合不规则的复杂结构。但在现实世界中，大多数数据库都需要规则的、相对简单的结构。这就是关系数据库占主导地位的原因。

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2013-07-30T09:17:31.810

图和关系数据库之间的主要区别在于关系数据库使用集合，而图数据库使用路径。

对于 RDBMS 用户而言，这以意想不到且无益的方式表现出来。例如，当尝试通过递归加入关系数据库来模拟路径操作（例如朋友的朋友）时，查询延迟会像内存使用一样不可预测地大量增长，更不用说它会折磨 SQL 来表达这些类型的操作。在基于集合的数据库中，更多数据意味着更慢，即使您可以通过明智的索引来延缓痛苦。

正如 Dan1111 所暗示的那样，大多数图形数据库不会遭受这种连接痛苦，因为它们在基本级别上表达了关系。也就是说，关系物理上存在于磁盘上，它们被命名、定向，并且可以用属性自己装饰（这称为属性图模型，请参阅：[https ://github.com/tinkerpop/blueprints/wiki/Property-Graph -型号](https://github.com/tinkerpop/blueprints/wiki/Property-Graph-Model)）。这意味着如果您选择这样做，您可以查看磁盘上的关系并了解它们如何“加入”实体。因此，关系是图形数据库中的一等实体，并且在语义上比在运行时在关系存储中具体化的那些隐含关系强得多。

那么你为什么要关心呢？有两个原因：

1.  对于连接数据，图形数据库比关系数据库快得多——这是底层模型的优势。这样做的结果是，图形数据库中的查询延迟与您选择在查询中探索的图形量成正比，与存储的数据量不成正比，从而消除了[连接炸弹](http://blog.neo4j.org/2013/01/demining-join-bomb-with-graph-queries.html)。
2.  图数据库使建模和查询更加愉快，这意味着更快的开发和更少的 WTF 时刻。例如，在 Neo4j 的 Cypher 查询语言中为典型的社交网络表达朋友的朋友就是`MATCH (me)-[:FRIEND]->()-[:FRIEND]->(foaf) RETURN foaf`.

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-10-26T05:12:10.593

Dan1111 已经给出了一个标记为正确的答案。另外还有几点值得注意。

首先，几乎在图数据库的每个实现中，记录都是“固定”的，因为有未知数量的指针指向当前位置的记录。这意味着如果不将转发地址留在旧位置或破坏未知数量的指针，就无法将记录洗牌到新位置。

从理论上讲，可以一次对所有记录进行洗牌，并找出一种方法来定位和修复所有指针。在实践中，在大型图形数据库上执行此操作可能需要数周时间，在此期间数据库必须停止运行。这是不可行的。

相比之下，在关系数据库中，记录可以在相当大的范围内重新洗牌，唯一需要做的就是重建任何受影响的索引。这是一个相当大的操作，但远不及图形数据库的等效操作。

顺便提一下的第二点是，万维网可以看作是一个巨大的图形数据库。网页包含超链接，并且超链接尤其引用其他网页。引用是通过 URL，其功能类似于指针。

当一个网页被移动到一个不同的 URL 而不在旧 URL 上留下一个转发地址时，未知数量的超链接将被破坏。这些断开的链接随后会引发可怕的“错误 404：找不到页面”消息，从而打断了许多冲浪者的乐趣。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-06-16T18:48:12.730

使用关系数据库，我们可以使用外键和自连接对图进行建模和查询。仅仅因为RDBMS'包含关系这个词并不意味着它们擅长处理关系。RDBMS 中的关系一词源于关系代数而不是关系。在 RDBMS 中，关系本身并不作为对象存在。它要么需要显式表示为外键，要么隐式表示为链接表中的值（当使用通用/通用建模方法时）。数据集之间的链接存储在数据本身中。

我们在关系数据库中增加的搜索深度越多，我们需要执行的自联接就越多，我们的查询性能受到的影响就越大。我们在层次结构中走得越深，我们需要加入的表就越多，我们的查询就越慢。从数学上讲，成本在关系数据库中呈指数增长。换句话说，我们的查询和关系越复杂，我们从图与关系数据库中受益越多。导航图形时，我们在图形数据库中没有性能问题。这是因为图形数据库将关系存储为单独的对象。然而，卓越的读取性能是以较慢的写入为代价的。

在某些情况下，在图形数据库中更改数据模型比在 RDBMS 中更容易，例如，在 RDBMS 中，如果我将表关系从 1:n 更改为 m:n，我需要应用 DDL 并可能导致停机。

另一方面，RDBMS 在其他领域具有优势，例如聚合数据或对数据进行时间戳版本控制。

[我在关于用于数据仓库的图形数据库的](https://sonra.io/2017/06/12/benefits-graph-databases-data-warehousing/)博文中讨论了其他一些优缺点

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-10-02T08:18:12.440

虽然关系模型可以很容易地表示包含在图模型中的数据，但我们在实践中面临两个重大问题：

1.  SQL 缺乏轻松执行图遍历的语法，尤其是深度未知或无界的遍历。例如，使用 SQL 确定朋友的朋友很容易，但很难解决“分离度”问题。
2.  当我们遍历图表时，性能会迅速下降。每个级别的遍历都会显着增加查询响应时间。

参考：**[下一代数据库](https://www.apress.com/us/book/9781484213308)**

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-08-10T00:01:19.420

图数据库值得研究它们擅长的用例，但我有理由质疑上述回复中的一些断言。尤其：

在处理大量记录时，关系数据库要快得多（dan1111 的第一个要点）

对于连接数据，图形数据库比关系数据库快得多——这是底层模型的优势。这样做的结果是，图形数据库中的查询延迟与您选择在查询中探索的图形量成正比，与存储的数据量不成正比，从而消除了连接炸弹。（吉姆韦伯的第一个要点）

换句话说，我们的查询和关系越复杂，我们从图与关系数据库中受益越多。（Uli Bethke 的第 2 段）

虽然这些断言可能很有价值，但我还没有找到一种方法来让我的特定用例与它们保持一致。参考：[图数据库或关系数据库公用表扩展：比较非循环图查询性能](https://stackoverflow.com/questions/63112168/graph-database-or-relational-database-common-table-extensions-comparing-acyclic/63213234#63213234)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-10-23T16:16:44.673

关系数据库在存储表格数据方面效率更高。尽管名称中有“关系”一词，但关系数据库在存储或表达存储的数据元素之间的关系方面效率要低得多。关系数据库中的“关系”一词更多地与表中的相关列有关，而不是与不同表中的信息相关。存在列之间的关系以支持集合操作。因此，随着数据库以数百万或数十亿条记录增长，从关系数据库中检索数据变得极其缓慢。

与关系数据库不同，图数据库完全围绕数据关系构建。图数据库不将关系视为模式结构，而是将其视为数据，就像其他值一样。从图形数据库中检索数据非常快。从关系数据库的角度来看，您可以将其视为在插入时预先实现 JOIN，而不是为每个查询计算它们。因为数据完全围绕数据关系构建，所以无论数据集有多大或有多大连接，都可以实现实时查询性能。与关系数据库相比，图数据库占用更多的存储空间。

# maven - 如何使用不同的分类器在 Gradle 中下载多个依赖项？

> ID：13046444
> 
> 赞同：2
> 
> 时间：2012-10-24T09:31:28.813
> 
> 标签：maven, gradle

如何告诉 gradle 下载具有不同分类器的多个依赖项？它只需要最后一个条目：

```
dependencies {
    compile 'org.jogamp.jogl:jogl-all:2.0-rc10'
    compile 'org.jogamp.jogl:jogl-all:2.0-rc10:natives-linux-amd64'
    compile 'org.jogamp.jogl:jogl-all:2.0-rc10:natives-windows-i586'
    .. 
```

我用 maven 测试了同样的东西，它得到了所有的依赖项：

```
<dependency>
  <groupId>org.jogamp.jogl</groupId>
  <artifactId>jogl-all</artifactId>
  <version>2.0-rc10</version>
</dependency>
<dependency>
  <groupId>org.jogamp.jogl</groupId>
  <artifactId>jogl-all</artifactId>
  <version>2.0-rc10</version>
  <classifier>natives-windows-i586</classifier>
</dependency>
<dependency>
  <groupId>org.jogamp.jogl</groupId>
  <artifactId>jogl-all</artifactId>
  <version>2.0-rc10</version>
  <classifier>natives-linux-amd64</classifier>
</dependency> 
```

任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-01T03:16:40.070

您快到了：

```
dependencies{
    compile: 'org.jogamp.jogl:jogl-all:2.0-rc10',
             'org.jogamp.jogl:jogl-all:2.0-rc10:natives-linux-amd64',
             'org.jogamp.jogl:jogl-all:2.0-rc10:natives-windows-i586'

} 
```

[通过 Gradle 文档](http://gradle.org/docs/current/userguide/dependency_management.html#sub:module_dependencies)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:40:48.983

[这是Gradle 文档](http://gradle.org/docs/current/userguide/dependency_management.html)中“分类器”部分下的示例：

```
 otherConf group: 'org.gradle.test.classifiers', name: 'service', version: '1.0', classifier: 'jdk14' 
```

# ruby-on-rails - 导轨导航和部分刷新

> ID：13046448
> 
> 赞同：0
> 
> 时间：2012-10-24T09:31:49.590
> 
> 标签：ruby-on-rails, ajax, frameset, partials

谢谢你的时间！

我手头有一些报告数据，我想在网络上展示这些数据。HTML的视图将分为两部分，左侧部分和右侧部分。左侧有一个树视图，其中包含报告名称。在右侧部分显示了报告的内容。

我想要实现的是当我点击左侧部分的报告名称时，它会调用`Action`中的一个`Controller`，并将报告名称作为参数传递。`Action`将从数据库中获取数据并在右侧表示数据。现在我被困在如何实现这种观点上。

我在互联网上搜索了很多，发现`Frameset`，`Partials`或者`Ajax`可能能够做到这一点。因为我以前从未开发过 Web 应用程序，而且对 Rails 也是新手。那么有人可以给我一些建议或建议吗？

我已经知道的事情：

1.  我曾经`Frameset`完成过这样的视图。但我发现它需要很多`.html`文件，而且所有这些`.html`文件都是静态的。许多人根本不建议这样做。

2.  然后我用谷歌搜索了`Partials`。但它似乎`Partials`不调用Action。它直接加载`_partials.html.erb`到主视图。此外，我如何控制布局？使用`CSS`?

3.  我从来没用过`Ajax`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T13:19:41.740

如果您想在一个报表和另一个报表之间进行流畅、无缝的转换，您应该同时使用 AJAX 和 Partials。

它的工作方式类似于：

*   在 html 中创建一个包含一些链接的左列
*   在局部内制作右列
*   将链接分配给 jQuery 侦听器以调用 AJAX。

我将在这里放一些代码来展示它是如何工作的：

控制器：

```
def index
    reports = Report.all
    if params[:report_id]
        reports = Report.find(params[:report_id]
    end
    respond_to do |format|
        format.html
        format.js { render :template => "update_reports" }
    end
end 
```

update_reports.js.erb（在与报告视图相同的文件夹中）：

```
$('#report_viewer').html('<%= escape_javascript render :partial => "report_detail" %>'); 
```

在您看来：

```
<div style=float:left>
    <ul>
        <li><%= link_to "Some report", "#", :class => "ajax" %></li>
    </ul>
</div>
<div style=float:right id="report_viewer">
    <%= render :partial => "report_detail" %>
</div>

<script type='text/javascript'>
    $(document).ready(function() {
        $(".ajax").click(function(e) {
            $(this).ajax("your route to the action");
        }
    });
</script> 
```

我想基本上是这样，现在让我解释一些事情：

*   我不记得你是否必须这样做，但在我的情况下，我创建了一个新的自定义路由来强制对操作的调用是 json 调用而不是 html 调用。您可以通过添加`:format => "js"`到您的路线来做到这一点
*   您必须将所有部分命名为“_yourname.html.erb”。Rails 不会识别没有前导下划线的部分。
*   在控制器中，“format.js”之后的所有内容都是可选的，您不需要指定模板名称，如果不指定，Rails 将查找文件 index.js.erb。
*   update_reports.js.erb 文件基本上是一个回调 javascript，执行以更新当前页面。它找到部分所在的 div，并更新它以使用新报告呈现新的部分。
*   在视图中，如果您使用的是jQuery.click监听器，则更改报表的链接根本不需要是链接，但如果是链接，则必须将href作为“#”，否则浏览器只会尝试重定向到该位置。
*   有几种方法可以将您的链接与 ajax 函数挂钩，我只是选择了我更喜欢的一种，但您也可以有一个命名函数并在 html 标记“onClick='yourFunction()'”中调用它。
*   你需要 jQuery 来像这样调用 ajax。如果你使用的是 Rails 3.0 或更低版本，你应该用 jQuery 替换默认的 Prototype，因为它更好（恕我直言），但我认为原型也有一些 ajax 特性。
*   它可能看起来很复杂，但是一旦你明白了它就会变得像编写任何其他动作一样简单。
*   在 js 回调文件中，您还可以添加动画以平滑过渡，如淡入淡出。查找 jQuery 淡入淡出功能以获取更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T10:43:08.960

这是一个非常开放的问题，所以不要逐字逐句地回答这个问题，而只是作为一个指导。

**应用程序/视图/布局/reports.html.erb**

```
<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/">
<head>
   # omitted
</head>
<body>
<div id="body-container">
  <div id="left-column">
    <ul id="reports-list">
      <% for report in @reports %>
        <li><%= link_to report.name, report %></li>
      <% end %>
    </ul>
  </div>
  <div id="right-column">
    <%= yield %>
  </div>
</div>
</body>
</html> 
```

**应用程序/控制器/reports_controller.rb**

```
class ReportsController < ApplicationController

  before_filter { @reports = Report.all }

  def index

  end

  def show
    @report = Report.find(params[:id])
  end

  def edit
    @report = Report.find(params[:id])
  end

  def new
    @report = Report.new
  end

  def update
   # omitted
  end

  def create
   # omitted
  end

  def destroy
   @report = Report.find(params[:id])
  end
end 
```

**路线.rb**

```
YourApp::Application.routes.draw do
  resources :reports

  root to: "reports#index"
end 
```

这样就可以达到你只使用rails之后的效果，当然添加ajax可以增加更好的用户体验。

# visual-studio-2010 - 让 SharePoint 项目在 Visual Studio 2010 中工作，而无需在工作站上安装 SP

> ID：13046449
> 
> 赞同：0
> 
> 时间：2012-10-24T09:31:50.197
> 
> 标签：visual-studio-2010, sharepoint-2010

我正在对一组系统（包括 SharePoint 2010 站点）进行一些维护。有一个 Visual Studio 2010 解决方案，其中包含一些我需要能够构建和部署的 SharePoint 项目。

我的开发人员工作站在 Windows 7 上使用 Visual Studio 2010 Professional 进行了基本设置。

不出所料，此项目中对各种 SharePoint 程序集（Microsoft.SharePoint、Microsoft.SharePoint.Publishing 等）的所有引用都已损坏，并阻止我构建和部署该项目。

我发现的 Microsoft 开发人员资源概述了一个曲折的过程，即准备具有各种先决条件的工作站，然后在跳过各种障碍的同时安装 SharePoint——在一些冗长的入门文档中进行了描述，坦率地说，这些文档远远超出了本文的范围。手头的任务。

现在，我需要做的就是做一些小的更正，构建项目并将更新的程序集和文件部署到服务器。在这一点上，我不需要集成调试、模板设计、站点定义或任何类似的东西。

有没有办法简单地安装必要的 SharePoint 程序集以便构建项目？

请？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:49:42.740

您可以将 sharepoint dll 从您的服务器`C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\ISAPI\`文件夹复制到本地计算机并将它们注册到**GAC**。

[资源](http://www.techerator.com/2011/02/how-to-perform-sharepoint-development-on-a-client-workstation/)

# validation - 以 UTF-8 而非 ASCII 编码 - SilverStripe

> ID：13046451
> 
> 赞同：0
> 
> 时间：2012-10-24T09:31:56.227
> 
> 标签：validation, silverstripe

我正在使用 2.4.7，并且我想对两个包含价格的字段进行一些验证（例如，1 欧元或 2 欧元对应 3 欧元）。最初我认为也许我需要求助于验证用户输入，但答案表明这是一个数据库问题。

SilverStripe 中的编码默认为 ASCII，它转换了诸如欧元符号之类的符号。最后我需要添加

```
$this->response->addHeader("Content-Type", "application/json; charset='utf-8'"); 
```

到控制器中的init方法。这更正了编码问题，并防止了一个 hacky 变通办法的发生。非常感谢您对此的见解。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:05:36.743

我假设您想在 CMS 中执行此操作。如果是这种情况，最简单的方法可能是创建一个新类，该类扩展`TextField`该类并添加一个`public function validate()`执行验证的方法（参见[CreditCardField 类](http://api.silverstripe.org/2.4/forms/fields-formattedinput/CreditCardField.html)的示例）。

```
class FancyCurrencyField extends TextField {
    public function validate($validator) {
        // Do your validation
        if ($invalid) {
            $validator->validationError(
                $this->name,
                "Please don't use currency symbols.",
                "validation",
                false
            );
            return false;
        }
        return true;
    }
} 
```

创建类后，您可以修改`getCMSFields()`函数中的表单字段，`DataObject`并使用新类代替`TextField`.

话虽如此，感觉像输出编码而不是输入验证是问题的根本原因。我会检查以确保一切都设置为使用 UTF-8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T00:55:48.497

我遇到了 PHP 函数 substr 的问题。我只是使用了 mb_substr ，它解决了我的问题。

请查看[http://www.silverstripe.org/general-questions/show/11797#post369831](http://www.silverstripe.org/general-questions/show/11797#post369831)

# couchdb - 有没有办法停止 couchdb 索引器进程？

> ID：13046452
> 
> 赞同：5
> 
> 时间：2012-10-24T09:32:09.500
> 
> 标签：couchdb, couchdb-futon

有没有办法停止 couchdb 蒲团处理索引器？当视图中有大量数据时，我发现等待的时间太长且困难。任何评论都非常感谢:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T11:21:52.917

不是通过蒲团。您需要终止处理视图索引的*couchjs*进程：很可能它会被高 CPU 使用率计数器突出显示，但`killall couchjs`也可以。

# django - Django URL Dispatcher 可变数量的组件

> ID：13046458
> 
> 赞同：0
> 
> 时间：2012-10-24T09:32:24.727
> 
> 标签：django, django-views, django-urls

本质上，我有一个接受不同操作和不同数量参数的视图。这以前在以下状态下工作：

```
url(r'^items/(?P<op>[a-zA-Z0-9]+)/(?P<id>[0-9]+)$', login_required(ItemOpView.as_view()), name='my.views.item_op'), 
```

这总是提供`kwargs['op']`和`kwargs['id']`视图。这允许 URL 如下：

*   项目/删除/1
*   项目/节目/1
*   项目/隐藏/1

但是，我想调整规则以接受以下内容：

*   items/relocate/1/2 表示我也想拥有`kwargs['id2']`。

我试图用规则来做到这一点：

```
url(r'^items/(?P<op>[a-zA-Z0-9]+)/(?P<id>[0-9]+)(?/)(?P<id2>[0-9]+)$', login_required(ItemOpView.as_view()), name='my.views.item_op'), 
```

但是，这不起作用，只会给出 404。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:35:19.190

只需添加另一个 url 条目，如下所示：

```
url(r'^items/(?P<op>[a-zA-Z0-9]+)/(?P<id>[0-9]+)/(?P<id2>[0-9]+)$', login_required(ItemOpView.as_view()), name='my.views.item_op') 
```

并确保您的视图接受`None`第二个参数的默认参数（如 ）。

# service - Symfony 基本翻译示例

> ID：13046460
> 
> 赞同：3
> 
> 时间：2012-10-24T09:32:32.227
> 
> 标签：service, symfony, translation

我是 Symfony2 的新手。尝试建立翻译服务。我正在按照官方文档中给出的步骤进行操作。但并不成功。

以下是遵循的步骤

1.  通过定义语言环境在 'symfony/app/config/config.yml' 翻译服务中`"#translator:{ fallback: %locale% }"`

2.  在`'symfony/app/config/parameters.yml'`定义的语言环境参数中`"locale:de"`

3.  在`'src/MyBundle/translateBundle/Resources/translations/messages.de.xlf'`被创建

    ```
    <?xml version="1.0"?>
    <xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2">
    <file source-language="en" datatype="plaintext" original="file.ext">
        <body>
            <trans-unit id="1">
                <source>Symfony2 is great</source>
                <target>J'aime Symfony2</target>
            </trans-unit>
        </body>
    </file>
    </xliff> 
    ```

现在我希望现在通过这个编码我应该得到：'J'aime Symfony2' 执行以下代码。

```
<?php

namespace MyDays\translateBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Response;

class DefaultController extends Controller {
    public function indexAction() {
        $t = $this->get ( 'translator' )->trans ( 'Symfony2 is great' );        
        return new Response ( $t );
    }
} 
```

但仍然得到原始文本，因为“Symfony2 很棒”！除了文档中给出的步骤之外，我还有什么要做的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T10:56:17.667

你之前删除过`#`吗？`translator...``config.yml`

此外，您还需要在添加新的翻译文件后清除缓存。

# drupal-7 - Drupal 7 - entityFieldQuery 订单

> ID：13046468
> 
> 赞同：16
> 
> 时间：2012-10-24T09:33:21.413
> 
> 标签：drupal-7

早上，我试图获得一组最新的节点类型，但似乎无法弄清楚如何按日期订购它们。到目前为止，这是我的功能：

```
function latest_nodes($type, $limit = 15, $offset = 0) {
    $query = new EntityFieldQuery();
    $tmp = $query->entityCondition('entity_type', 'node');
    if( is_string( $type ) )
        $tmp->entityCondition('bundle', $type);
    elseif( is_array( $type ) )
        $tmp->entityCondition('bundle', $type, 'IN');
    $tmp->range($offset, $limit);
    $results = $tmp->execute();
    return node_load_multiple(array_keys($results['node']));
} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-25T08:16:23.130

您正在寻找[`fieldOrderBy()`](http://api.drupal.org/api/drupal/includes%21entity.inc/function/EntityFieldQuery%3A%3AfieldOrderBy/7)成员函数，例如

```
$query = new EntityFieldQuery();
$query->fieldOrderBy('field_name_of_field', 'value', 'DESC'); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-06T22:01:46.580

您可能正在寻找[propertyOrderBy](http://api.drupal.org/api/drupal/includes!entity.inc/function/EntityFieldQuery%3a%3apropertyOrderBy/7)

```
$query = new EntityFieldQuery();
$query->propertyOrderBy('changed', 'DESC'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-27T14:12:42.567

**检索您可以使用的最新帖子**

```
$query = new EntityFieldQuery();
$entities = $query->entityCondition('entity_type', 'node')
                  ->entityCondition('bundle', 'your_content_type')
                  ->propertyCondition('status', 1)
                  ->propertyOrderBy('created', 'DESC'); 
```

# slickgrid - 将数据添加到 DataView SlickGrid

> ID：13046469
> 
> 赞同：2
> 
> 时间：2012-10-24T09:33:22.767
> 
> 标签：slickgrid

我想将数据添加到 SlickGrid 中的 DataView 并且我有一个代码：

```
var columns = [
               {id: "title", name: "Title", field: "title"},
               {id: "duration", name: "Duration", field: "duration"},
               {id: "%", name: "% Complete", field: "percentComplete"},
               {id: "start", name: "Start", field: "start"},
               {id: "finish", name: "Finish", field: "finish"},
               {id: "effort-driven", name: "Effort Driven", field: "effortDriven"}
             ];    

$(document).ready(function() {
        for (var i = 0; i < 200; i++) {
              data[i] = {
                id: "id_" + i,
                title: "Task " + i,
                duration: "5 days",
                percentComplete: Math.round(Math.random() * 100),
                start: "01/01/2009",
                finish: "01/05/2009",
                effortDriven: (i % 5 == 0)
              };
            }

        dataView = new Slick.Data.DataView({ inlineFilters: true });
        grid = new Slick.Grid("#myGrid", dataView, columns, options);
        dataView.beginUpdate();
        dataView.setItems(data);
        dataView.setFilter(filter);
        dataView.endUpdate();
    }); 
```

但是我只看到滚动条和列标题，但我没有看到任何数据，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:52:15.017

试试这个，

```
var columns = [
               {id: "title", name: "Title", field: "title"},
               {id: "duration", name: "Duration", field: "duration"},
               {id: "%", name: "% Complete", field: "percentComplete"},
               {id: "start", name: "Start", field: "start"},
               {id: "finish", name: "Finish", field: "finish"},
               {id: "effort-driven", name: "Effort Driven", field: "effortDriven"}
             ];    

$(document).ready(function() {
        for (var i = 0; i < 200; i++) {
              data[i] = {
                id: "id_" + i,
                title: "Task " + i,
                duration: "5 days",
                percentComplete: Math.round(Math.random() * 100),
                start: "01/01/2009",
                finish: "01/05/2009",
                effortDriven: (i % 5 == 0)
              };
            }

        dataView = new Slick.Data.DataView({ inlineFilters: true });
        grid = new Slick.Grid("#myGrid", dataView, columns, options);
        dataView.beginUpdate();
        dataView.setItems(data);
        dataView.setFilter(filter);
        dataView.endUpdate();
        dataView.render(); //You missed this rendering part. this should work now.
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-11T02:48:01.980

试试这个

```
var data = [];
var options = {};
var columns = [
        {id: "title", name: "Title", field: "title"},
        {id: "duration", name: "Duration", field: "duration"},
        {id: "%", name: "% Complete", field: "percentComplete"},
        {id: "start", name: "Start", field: "start"},
        {id: "finish", name: "Finish", field: "finish"},
        {id: "effort-driven", name: "Effort Driven", field: "effortDriven"}
     ];    

$(document).ready(function() {
    for (var i = 0; i < 200; i++) {
        data[i] = {
            id: "id_" + i,
            title: "Task " + i,
            duration: "5 days",
            percentComplete: Math.round(Math.random() * 100),
            start: "01/01/2009",
            finish: "01/05/2009",
            effortDriven: (i % 5 == 0)
        };
    }

    dataView = new Slick.Data.DataView({ inlineFilters: true });
    dataView.beginUpdate();
    dataView.setItems(data);
    dataView.endUpdate();

    grid = new Slick.Grid("#myGrid", dataView, columns, options);
}); 
```

# javascript - phonegap 插件：Torch 未定义，即使在 android 上加载了 js 文件

> ID：13046471
> 
> 赞同：0
> 
> 时间：2012-10-24T09:33:36.080
> 
> 标签：javascript, cordova, phonegap-plugins

尝试使用[TorchPluging](https://github.com/phonegap/phonegap-plugins/tree/master/Android/Torch)时出现以下错误：

```
 file:///android_asset/www/web/index.html: Line 12 : Uncaught TypeError: Cannot read property 'Torch' of undefined 
```

我将插件添加到 config.xml （我认为在较新的 phonegap 版本中它已从 plugins.xml 更改为 config.xml？）

以下是我的整个 index.html

```
 <!DOCTYPE HTML>
<html>
    <head>
        <title>Flashlight</title>
        <script type="text/javascript" charset="utf-8" src="js/cordova-2.1.0.js"></script>
        <script type="text/javascript" charset="utf-8" src="js/jquery-1.8.2.min.js"></script>
        <script type="text/javascript" charset="utf-8" src="js/Torch.js"></script>
        <script type="text/javascript" charset="utf-8" src="js/bootstrap.min.js"></script>
        <script type="text/javascript">
            function turnTorchOn(){

                window.plugins.Torch.turnOn( 
                function() { console.log( "turnOn" ) }                          // success
                ,   function() { console.log( "error" ) });                           // error
            }
        </script>
    </head>
    <body>
        <button id="turnOnButton" name="turnOnButton" > Turn on Flashlight</button>
        <script>

            $('#turnOnButton').click(function(){
                alert("will turn on now");
                turnTorchOn();
                alert("called turnOn done");

            });
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:31:20.530

实际上，将旧样式的插件更新为可在 2.0.0+ 中运行的插件并不难。您需要：

1.  将 JS 修改为声明插件的新的 cordova.define() 样式。
2.  在 Java 代码中从 com.phonegap.* 更新对 org.apache.cordova.* 的包引用。
3.  确保您没有调用任何已弃用的 API。

我写了几篇涵盖该主题的博客文章。如果你关注他们更新 Torch 插件，你应该提交一个拉取请求，这样每个人都可以享受你的工作。

2.0.0 插件 - [http://simonmacdonald.blogspot.ca/2012/08/so-you-wanna-write-phonegap-200-android.html](http://simonmacdonald.blogspot.ca/2012/08/so-you-wanna-write-phonegap-200-android.html) 已弃用的 API - [http://simonmacdonald.blogspot.ca/2012/07 /phonegap-android-plugins-sometimes-we.html](http://simonmacdonald.blogspot.ca/2012/07/phonegap-android-plugins-sometimes-we.html)

# c# - Xml 反序列化追加到列表

> ID：13046474
> 
> 赞同：5
> 
> 时间：2012-10-24T09:33:53.160
> 
> 标签：c#, properties, xml-serialization, xmlserializer

我正在尝试从 xml 文件中反序列化一些设置。有问题的属性/基础字段是一个名为`AlertColors`. 我将基础字段初始化为白色、黄色和红色，以确保此类的新实例具有有效的颜色设置。但是当我反序列化时，`_colorArgb`最终有六个值，前三个是初始化值，后三个是从 xml 文件中读取的值。但是该属性`AlertColors`不会附加到该字段，而是更改其元素。为什么我最终会得到一个有六种颜色的字段？

这是代码：

```
 private List<int> _colorArgb = new List<int>(new int[] { Color.White.ToArgb(), Color.Yellow.ToArgb(), Color.Red.ToArgb() });   

    public List<int> AlertColors
    {
        get
        {
            return _colorArgb;
        }

        set
        {
            for (int i = 0; i < Math.Min(_colorArgb.Count, value.Count); i++)
            {
                if (_colorArgb[i] != value[i])
                {
                    HasChanged = true;
                }
            }

            _colorArgb = value;
        }
    }

    public bool Deserialize(string filePath)
    {
        if (!File.Exists(filePath))
        {
            Logger.Log("Error while loading the settings. File does not exist.");

            return false;
        }

        FileStream fileStream = null;

        try
        {
            fileStream = new FileStream(filePath, FileMode.Open);
            System.Xml.Serialization.XmlSerializerFactory xmlSerializerFactory =
                new XmlSerializerFactory();
            System.Xml.Serialization.XmlSerializer xmlSerializer =
                xmlSerializerFactory.CreateSerializer(typeof(Settings));

            Settings deserializedSettings = (Settings)xmlSerializer.Deserialize(fileStream);

            GetSettings(deserializedSettings);

            Logger.Log("Settings have been loaded successfully from the file " + filePath);
        }
        catch (IOException iOException)
        {
            Logger.Log("Error while loading the settings. " + iOException.Message);

            return false;
        }
        catch (ArgumentException argumentException)
        {
            Logger.Log("Error while loading the settings. " + argumentException.Message);

            return false;
        }
        catch (InvalidOperationException invalidOperationException)
        {
            Logger.Log("Error while loading the settings. Settings file is not supported." +
                invalidOperationException.Message);

            return false;
        }
        finally
        {
            if (fileStream != null)
                fileStream.Close();

            FilePath = filePath;
        }

        return true;
    }

    protected void GetSettings(Settings settings)
    {
        AlertColors = settings.AlertColors;
    } 
```

以及我正在反序列化的 xml 文件的相关部分：

```
 <AlertColors>
    <int>-1</int>
    <int>-15</int>
    <int>-65536</int>
  </AlertColors> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T09:49:28.807

基本上，这就是`XmlSerializer`工作原理。除非列表是`null`，否则它从不期望尝试设置值。特别是，**大多数**时候，子项列表**没有**设置器——它们是这样的：

```
private readonly List<Child> children = new List<Child>();
public List<Child> Children { get { return children; } } 
```

（因为大多数人不希望外部调用者**重新分配**列表；他们只希望他们更改内容）。

正因为如此，`XmlSerializer`操作基本上像（过度简化）：

```
var list = yourObj.SomeList;
foreach({suitable child found in the data})
    list.Add({new item}); 
```

一种解决方法是使用数组而不是列表；它总是希望将数组分配回对象，因此对于数组，它的实现更像（过度简化）：

```
var list = new List<SomeType>();
foreach({suitable child found in the data})
    list.Add({new item});
yourObj.SomeList = list.ToArray(); 
```

但是，对于固定数量的值，更简单的实现可能只是：

```
public Foo Value1 {get;set;}
public Foo Value2 {get;set;}
public Foo Value3 {get;set;} 
```

（如果你明白我的意思）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-28T00:49:16.207

要在不更改数据类型的情况下获得所需的结果，可以使用 DataContractSerializer（使用 System.Runtime.Serialization；）而不是普通的 XmlSerializer。它不调用默认构造函数，因此您最终会得到 3 种颜色而不是 6 种颜色。

```
var ser = new DataContractSerializer(typeof(Settings));
var reader = new FileStream(@"c:\SettingsFile.xml", FileMode.Open);
var deserializedSettings = (Settings)ser.ReadObject(reader); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-08T12:50:04.063

参加聚会有点晚了，但我也遇到了这个问题。

接受的答案提到每次发生反序列化时都会分配数组。这很有帮助。但我需要一个不需要我更改属性类型和重写一百万行代码的解决方案。所以我想出了这个：

使用 XML 序列化器属性，您可以将序列化器“重定向”到包含原始属性的数组。

```
[XmlIgnore]
public List<int> AlertColors { get; set; } = new List<int>() { Color.White.ToArgb(), Color.Yellow.ToArgb(), Color.Red.ToArgb() });

[XmlArray(ElementName = "AlertColors")]
public long[] Dummy
{
      get
      {
          return AlertColors.ToArray();
      }
      set
      {
          if(value != null && value.Length > 0) AlertColors = new List<int>(value);
      }
} 
```

Dummy 属性必须是公共的，序列化程序才能访问它。然而，对我来说，这是一个很小的代价，原始属性保持不变，所以我不必修改任何额外的代码。

# android - 取消后，吐司还能再显示吗

> ID：13046476
> 
> 赞同：1
> 
> 时间：2012-10-24T09:33:55.093
> 
> 标签：android

我已经运行了这个方法

```
sToast.cancel(); 
```

我可以调用这个方法吗

```
sToast.show(); 
```

我试过了。sToast 可以在 GB 中显示，但不能在 ICS 中显示。这样对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:40:20.577

根据文档，在 cancel() 之后调用 show() 不会在屏幕上显示任何 Toast。做正确的检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:39:37.763

是的，您可以使用`Toast.cancel()`. 通常 Toast 会在超时后自行取消，因此程序员通常不会最终使用取消。如果有需要，您可以继续使用它。

# jquery - 在 Internet Explorer 中使用 jquery 获取 css padding-left 的值

> ID：13046479
> 
> 赞同：0
> 
> 时间：2012-10-24T09:34:10.340
> 
> 标签：jquery, css

当 css 不是内联时，我在使用 jQuery 获取 css padding-left 值时遇到问题。问题仅存在于 Internet Explorer 中（我尝试了版本 8 和 9）。

我想像这样打印这个值：

```
alert($content.css("padding-left")); 
```

$content 包含一个带有类的 <div>，它（在外部 css 文件中）定义了值“padding-left”。如果我将相同的 css 指令放入内联“样式”属性中，我会按预期打印值。

还有一件事......我用开发人员工具检查了我的 div 样式，一切都显示正确。

由于这个问题，我发现 jQuery 的方法 outerWidth() 不能正常工作。

有没有人有解决方案，如何从外部 css 中获取“padding-left”的值？或者这只是 jQuery 中的错误，我必须在那里报告并等待修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:17:23.377

我发现，如果 div 尚不可见，jquery 无法在 Internet Explorer 中获取外部 css 的“padding-left”指令的值。

# php - Zend 框架和 Visual Studio 2012

> ID：13046480
> 
> 赞同：2
> 
> 时间：2012-10-24T09:34:18.030
> 
> 标签：php, visual-studio, zend-framework, visual-studio-2012

我想知道有没有可能`Zend Framework`一起工作`Visual Studio 2012`？我对免费和付费解决方案都感兴趣。我想要对`ZF`in `VS2012`（项目创建 - 目录结构等）的支持。早些时候我曾经一起工作`Netbeans`，但我更愿意`VS`。

有没有人为这种情况尝试过任何集成插件？我找到了[VS.Php](http://www.jcxsoftware.com/vs.php)，但它没有与`Zend`.

# php - 我怎样才能调用我的 PHP 程序的一部分以在以后调用

> ID：13046481
> 
> 赞同：-1
> 
> 时间：2012-10-24T09:34:34.660
> 
> 标签：php, asynchronous

我有一个像这样工作的 PHP 程序

1.  用户上传图片
2.  图像已处理
3.  调用其他时间密集型函数
4.  上传确认发送给用户。

问题是第 2 项和第 3 项占用了大量时间 - 我怎样才能推迟这些进程以异步运行？

我想在图像上传后直接开始运行进程，但仍然继续做其他事情而不是等待。

我知道 cron，但我不想安排任务 - 我只是不想等待它完成。

我有哪些选择？

**编辑**

只是要清楚这个项目只是服务器端。没有javascript选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:54:06.577

首先，我建议您重新排序任务：

1.  用户上传图片
2.  上传确认发送给用户。

3.  图像已处理

4.  调用其他时间密集型函数

然后您有以下选项，如何推迟第 3 和第 4 部分：

选项 1：在第 2 步向用户发送确认，使用`ignore_user_abort()`并继续处理图像（非最佳，因为用户仍会看到“页面加载”消息。

选项 2：IBP 式。执行步骤 1-2，然后将处理作业添加到某种数据库。在随机时间向用户显示图像。图像实际上是链接到执行`ignore_user_abort()`和处理您的项目队列的 php 脚本。

选项 3：与选项 2 相同，但不显示图像。相反，您必须使用 cURL 或类似方法请求拥有服务器。想法是您开始请求，不要等待它结束，只需停止主脚本执行。

选项 4：启动一个每 5-15 分钟启动一次的 cron 脚本并执行所需的任务。它还可以 24 小时在后台运行，并在检查任务之间休眠 20 秒。如果您的网站相对繁忙，此选项可能是最佳选择。

选项 5：在将任务添加到队列后，尝试执行 exec() 或 shell_exec() 之类的操作来破坏后台处理脚本。

如何做选项 2 和 3 的示例： [异步 PHP 调用？](https://stackoverflow.com/questions/124462/asynchronous-php-calls) [如何在 PHP 中发出异步 GET 请求？](https://stackoverflow.com/questions/962915/how-do-i-make-an-asynchronous-get-request-in-php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T09:55:33.957

如果需要，将您的代码一分为二，因此耗时的逻辑位于单独的脚本中，例如`timeConsumer.php`. 然后您可以使用[pcntl-fork()](http://php.net/manual/en/function.pcntl-fork.php)创建一个子进程并在其中执行`timeConsumer.php`。

或者，您可以使用[文档中列出的](http://us.php.net/manual/en/ref.exec.php)[`exec()`](http://us.php.net/manual/en/book.exec.php)任何其他可能方式。在 Unix/Linux 系统上，您可以在命令字符串的末尾添加一个，这样程序就会在后台执行。 `&`

您可以将上传图像的名称`timeConsumer.php`作为命令行参数传递给您，然后可以通过全局变量访问[`$argv`](http://php.net/manual/en/reserved.variables.argv.php)。（这是一个数组）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-24T09:40:37.687

为此，您需要使用 ajax/jquery。上传图片后调用这个。见吹。

```
$.ajax({
     url: 'process.php',
     type: 'post',
     success: function(data) {

          //this is triggered when 2 and 3 is done.

     }

}); 
```

# asp.net-mvc - 有没有简单的方法在控制器操作生成的 url 中使用书签？

> ID：13046483
> 
> 赞同：3
> 
> 时间：2012-10-24T09:34:37.123
> 
> 标签：asp.net-mvc

目前我正在使用 ASP.NET MVC 3 中的简单论坛模块，稍后我将其添加到我的主应用程序中。链接到用于呈现线程回复的某些块（如 div）的可能性非常有用。

我想出了一些可行且可能足以满足我的需求的东西，我只是想知道是否还有更优雅和简单的东西。我找到了一个使用 ActionFilters 的解决方案，并且由于我在 MVC 中非常初学者，我想找到一些更简单的解决方案（如果存在）。好吧，我很快也会学习 ActionFilters :)

所以这就是我所做的：

```
public ActionResult ShowThread(int id, int? postID)
{

    var thread = db.ForumThreads.Find(id);
    if (postID != null)
    {
        return Redirect(Url.Action("ShowThread",new {id=id})+"#post-"+postID.ToString());
    }
    return View(thread);
} 
```

我知道这很简单，但它正在工作。它也不会检查 postID 是否有效，但这不是问题的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T09:17:31.400

解决方案是使用 RedirectToAction 重载之一：http: [//msdn.microsoft.com/en-us/library/dd470154](http://msdn.microsoft.com/en-us/library/dd470154%28v=vs.108%29.aspx) (v=vs.108).aspx 。也许，在你的情况下，下一个会做： http: [//msdn.microsoft.com/en-us/library/dd460291](http://msdn.microsoft.com/en-us/library/dd460291%28v=vs.108%29.aspx)
(v=vs.108).aspx 电话是：

```
    return this.RedirectToAction("ShowThread", new { id = id, post = postID });

```

另一个（更简单，但不安全！）解决方案是格式化您需要重定向到的 URL，并使用 Redirect() 方法，如下所示：

```
    var redirectUrl = string.Format("/Home/ShowThread/{0}?post={1}", id, postID);
    返回 this.Redirect(redirectUrl);

```

不过，请注意您的 URL 映射。上面的例子假设方法

```
    公共 ActionResult ShowThread(int id, int? post)

```

在 HomeController 中，默认路由没有改变。否则你应该

1.  调整控制器名称前面的 URL（无控制器），或
2.  更改您的默认路由以映射到控制器的名称。

# excel - 清除列和行

> ID：13046484
> 
> 赞同：3
> 
> 时间：2012-10-24T09:34:43.817
> 
> 标签：excel, vba, row

需要 vba 代码从 A 到 J 清除列和从 21 到 200 的行。下面的代码是清除列直到结束，需要删除直到列 J

```
Function ClearSummary()

Const TestName_Col = "B"   
Const FirstRow_Num = "21"   

    MaxRowNumber = Range(TestName_Col & "200").End(xlUp).Row

    If (MaxRowNumber > FirstRow_Num) Then
        'select all rows in range & clear
        CellReference = FirstRow_Num & ":" & MaxRowNumber
        Rows(CellReference).Select
        Selection.ClearContents
        Selection.Hyperlinks.Delete
        Selection.Font.Underline = xlUnderlineStyleNone
        Selection.Font.ColorIndex = 0
    End If
End Function 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T09:44:14.720

这应该可以解决问题！

```
Range("A21:J200").Clear 
```

感谢 Chris 教我一种新方法！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-08T18:36:25.397

**t.thielemans**的衍生产品，适用于那些不想丢失格式或数据验证等内容的人

`Range("A21:J200").ClearContents`

这将确保您保留除所选单元格的当前值之外的所有内容。

# dll - gdb 不能通过非系统 dll 函数调用“下一步”

> ID：13046486
> 
> 赞同：0
> 
> 时间：2012-10-24T09:34:45.347
> 
> 标签：dll, gdb, cygwin

问题在于调试代码调用了某个 dll 函数，这个函数和其他函数来自同一个 dll：

```
EdsGetCameraList(&l); 
```

当我打破这一行然后发出`next`命令时，我得到一个

```
(gdb) n
0x1000e620 in ?? () 
```

`0x1000e620`是 EdsGetCameraList 的地址：

```
(gdb) disas find_cam,+20
Dump of assembler code from 0x401783 to 0x401797:
   0x00401783 <find_cam+0>:     push   ebp
   0x00401784 <find_cam+1>:     mov    ebp,esp
   0x00401786 <find_cam+3>:     sub    esp,0x48
=> 0x00401789 <find_cam+6>:     lea    eax,[ebp-0x14]
   0x0040178c <find_cam+9>:     mov    DWORD PTR [esp],eax
   0x0040178f <find_cam+12>:    mov    eax,ds:0x4092dc
   0x00401794 <find_cam+17>:    call   eax
   0x00401796 <find_cam+19>:    sub    esp,0x4
End of assembler dump.
(gdb) x 0x4092dc
0x4092dc <_imp__EdsGetCameraList@4>:    0x1000e620 
```

难怪我`next`再次输入我会得到：

```
(gdb) n
Cannot find bounds of current function 
```

到底是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T23:52:02.090

`next`跨*源代码行*- 如果要执行源代码行步进，则需要正在调试的 dll 的调试信息。在这种情况下，没有可用的调试信息，并且 gdb 不知道源代码行的开始/结束位置——`next`不会做任何事情。

相反，您需要使用指令级单步命令`nexti`和`stepi`( `ni`, `si`) 来单步执行这些例程。您也可以使用`finish`返回调用者函数。

当人们在这个级别使用 gdb 进行调试时，他们通常让 gdb 在他们执行步骤时显示接下来的几条指令——这样做是`disp/3i $pc`为了显示接下来的三个指令。

# django - 从 ModelForm 保存数据

> ID：13046488
> 
> 赞同：2
> 
> 时间：2012-10-24T09:34:47.737
> 
> 标签：django, save, modelform

我是 Django 新手，我正在尝试使用 ModelForm 保存数据。模板“Vlozit”有一个 ModelForm，提交后，我希望将数据保存在数据库中，并重定向到实际从数据库加载数据并列出输出的 base.html。问题是一切正常，但数据未保存。请帮我找到我所缺少的。谢谢你。

这是模型：

```
class Customer(models.Model):
    Name = models.CharField(max_length=30)
    Description = models.CharField(max_length=150)
    Creation_Date = models.DateField(default=datetime.now)
    Active = models.BooleanField(default=False)

def __unicode__(self):
    return self.Name

Customers = models.Manager() 
```

这是模型表单：

```
class CustomerForm(forms.ModelForm):
    Description = forms.CharField(widget=forms.Textarea)

    class Meta:
        model = Customer 
```

这是视图：

```
def vlozit(request):
    if request.method == 'POST':
        form = CustomerForm(request.POST, instance=Customer)
        if form.is_valid():
            form.save(True) 
            return HttpResponseRedirect(reverse('Base.html'))
    else:
        form = CustomerForm()
        return render_to_response("Vlozit.html", {'form': form}, context_instance = RequestContext(request)) 
```

这是模板“Vlozit”：

```
{% extends "base.html" %}

{% block head %}
    {{ form.media }}
    <script>
        $(function() {
            $( "#id_Creation_Date" ).datepicker();
        });
    </script>
{% endblock %}

{% block title %}{{block.super}} - Vlozit{% endblock %}
{% block content %}
<div id="content">
    <form method="POST" action="{% url url_home %}">
    {% csrf_token %}
        <table>
            <tr>
                <td>Name</td>
                <td>{{ form.Name }}</td>
            </tr>
            <tr>
                <td>Description</td>
                <td>{{ form.Description }}</td>
            </tr>
            <tr>
                <td>Creation Date</td>
                <td>{{ form.Creation_Date }}</td>
            </tr>
            <tr>
                <td>Active</td>
                <td>{{ form.Active }}</td>
            </tr>
        </table>
        <input type="submit" value="Vlozit">
    </form>
</div>
{% endblock content %} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T09:46:59.077

正如蒂米在评论中所说，您没有发现表格无效的情况。`form.is_valid()`您不仅不会在模板中显示错误，而且如果为 False ，您甚至不会重新显示模板。将视图的最后一行移回一个缩进级别，并添加`{{ form.errors }}`到模板中。

# php - drupal 7：获取有关帐户创建的用户信息

> ID：13046490
> 
> 赞同：5
> 
> 时间：2012-10-24T09:34:50.267
> 
> 标签：php, drupal, drupal-7, drupal-modules, drupal-fapi

我正在尝试创建一个模块，用户在其中创建他的帐户并在提交时，我获取他的信息并将它们也插入到第二个数据库中。我的意思是他将存在于数据库和 Drupals 用户表以及另一个数据库的用户表中。

如何获取他的信息并将其插入自定义数据库？

我对 Drupal 开发完全陌生。

提前感谢您的任何帮助或建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T10:00:02.293

您将需要实现[hook_form_alter](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_form_alter/7) () 并使用以下代码：

```
function [YOUR_MODULE]_form_alter(&$form, &$form_state, $form_id)
{
    if($form_id == "user_register_form")
    {
        $form['#submit'][] = "your_custom_submit_callback";
    }
} 
```

然后创建自定义提交回调以按照您喜欢的方式操作提交的值：

```
function your_custom_submit_callback($form, &$form_state)
{
    // your code goes here...
} 
```

希望这行得通……穆罕默德。

# symfony-1.4 - Symfony 1.4 Action 没有被击中。为什么？

> ID：13046491
> 
> 赞同：0
> 
> 时间：2012-10-24T09:34:53.780
> 
> 标签：symfony-1.4, url-routing

我正在开发一个需要一些额外功能的旧项目。它使用 symfony 1.4。我是symfony的新手。

现在有4个动作：

executeAdmin、executeDashboard、executeHome、executeView 运行良好。它们位于一个名为 action.class.php 的文件中。

路由看起来像这样（在 routing.yml 中）：

```
editor:
  url: /editor/:action/*
  param: { module: bookeditor } 
```

我的假设是在同一个 action.class.php 中创建一个新的 executeTest 可以开箱即用。

```
 private function executeUpload ( $request ) {
    $this->response->setContent("<h1>Ok!</h1>");
    return sfView::NONE;
 } 
```

转到 mysite/editor/upload 时，我得到 404 页面。

如果我替换 executeAdmin 的代码，例如：

```
 private function executAdmin ( $request ) {
    $this->response->setContent("<h1>Ok!</h1>");
    return sfView::NONE;
 } 
```

转到 mysite/editor/admin 时，我在空白页上得到“确定”。

为什么会这样？我怎样才能解决这个问题？

（我清除了 symfony 缓存并在每次更改后重新启动了 apache。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T11:14:38.833

`execute*`控制器内部的功能必须是`public`.

你这里还有一个错字：`executAdmin`。应该是`executeAdmin`。

# javascript - 限制可变长度

> ID：13046500
> 
> 赞同：0
> 
> 时间：2012-10-24T09:35:31.953
> 
> 标签：javascript, jquery

我试图限制一个变量。如果它包含超过 300 个字母，则应将其修剪，以便只有 300 个。在 jQuery 中有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T09:37:36.520

只是[纯](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substring)JavaScript：

```
myVar = myVar.substring(0, 300); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T09:41:51.880

Javascript 有两种本机方法...

```
string.substring(from, to)

variable_name = variable_name.substring(0,300) 
```

和

```
string.substr(start,length) 

variable_name = variable_name.substr(0,300) 
```

他们俩都应该做到这一点。

**编辑：**正如@freakish 建议的那样

```
string.slice(beginslice, endSlice)

variable_name = variable_name.slice(0,300) 
```

注意：`substring`and`slice`大致相同，除了`slice`可以接受负索引（相对于字符串的末尾），而 as`substring`不能。此外，`substr`将长度作为其第二个参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T09:39:30.837

```
// Assume really_long_string is over 300 characters long
var really_long_string = "abcdefg..."

// Your new string, truncated to fit your desired length
var shortened_string = really_long_string.substring(0, 300) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T09:43:20.310

不需要 jQuery - 只需在 JS 中使用子字符串就可以了

```
var originalString = 'This content is more than 300 characters... This content is more than 300 characters... This content is more than 300 characters... This content is more than 300 characters... This content is more than 300 characters... This content is more than 300 characters... This content is more than 300 characters... This content is more than 300 characters... ';

document.write(originalString.substring(0, 300)); 
```

# c# - 在C#中拆分sql server的列值

> ID：13046505
> 
> 赞同：0
> 
> 时间：2012-10-24T09:35:49.870
> 
> 标签：c#, sql-server-2008

“Route”表中有一个“AppendedData”列。它以这种格式存储数据

```
-------------
ID |  AppendedData
1  |  abc : xyz
2  |  123a : gvk
-------------- 
```

我想要的是在 where 子句中通过将其拆分/子串分成两部分来编写一个搜索查询。“：”之前的部分用于匹配值。

我正在使用的当前应用程序是一个旧应用程序，所以我不能编写存储过程。所以我剩下的就是用 c# 编写查询并执行它并返回一个数据表。那么我怎么能在c#中做到这一点？

我一直在 sql server 中尝试这个，直到现在它返回第二部分，即在“：”之后。

我的查询：

```
select SUBSTRING(AppendedData,CHARINDEX(':',AppendedData)+1, 100) from  route 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:53:24.967

尝试这个，

在`SQL`

```
declare @route  TABLE
(  
    [ID] [int] NOT NULL,  
    [AppendedData] varchar (50) NOT NULL  
)   

insert into @route values (1, 'abc : xyz') 
insert into @route values (2, '123a : gvk') 

select SUBSTRING(AppendedData,CHARINDEX(':',AppendedData)+1, 100) from @route where             SUBSTRING(AppendedData,1, CHARINDEX(':', AppendedData)-1) = '123a' 
```

在`C#`

```
var lstRoutes = new List<Route>
{
    new Route {ID = 1, AppendedData = "abc : xyz"},
    new Route {ID = 2, AppendedData = "123a : gvk"},
                                   };
var result = lstRoutes.Where(r1 => r1.AppendedData.Split(':')[0].Trim() == "abc")
            .Select(r => new { r.ID, right = r.AppendedData.Split(':')[1] }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:43:52.787

如果你想匹配值的第一部分，你可以尝试这样的事情

```
SELECT * FROM Route WHERE AppendData LIKE '123a :%' 
```

它会将您的行与 ID 2 匹配。

# java - webview永远不会在android的webviewclient中调用ShuldOverrideUrlloading

> ID：13046507
> 
> 赞同：0
> 
> 时间：2012-10-24T09:35:58.007
> 
> 标签：java, android

我有一个 webview 和我在该 webview 上加载的 URL 上的链接，我希望这样，如果用户单击此链接，应用程序将转到后台并使用该设备的默认 web 浏览器打开该链接。为此，我做了以下工作：

```
web = (WebView) findViewById(R.id.webview01);
        progressBar = (ProgressBar) findViewById(R.id.progressBar1);

        web.getSettings().setUseWideViewPort(true);

        web.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
        web.getSettings().setPluginState(PluginState.ON);
        web.getSettings().setJavaScriptEnabled(true);
        web.getSettings().setDomStorageEnabled(true);

        web.setWebViewClient(new WebViewClient() {
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                if (url != null
                        && url.startsWith("http://the6figuremarketer.com/apps/androidfb21/thks.html")) {
                    view.getContext().startActivity(
                            new Intent(Intent.ACTION_VIEW, Uri.parse(url)));
                    return true;
                } else {
                    return false;
                }
            }
        });

        web.loadUrl("http://the6figuremarketer.com/apps/androidfb21/index.html"); 
```

但我发现该`shouldoverrideurl`方法是被调用的。我现在该怎么办？谁能帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T02:07:02.077

在 WebView 中查看[shouldOverrideUrlLoading for Android not running](https://stackoverflow.com/questions/6738328/shouldoverrideurlloading-in-webview-for-android-not-running)。

在 webview 上调用 loadurl 时不会调用 shouldOverrideUrlLoading()。只有当您单击 webview 中的链接时才会调用它。

# java - 在显示之前计算 JDialog 组件的大小并设置总大小

> ID：13046508
> 
> 赞同：2
> 
> 时间：2012-10-24T09:35:58.923
> 
> 标签：java, swing, layout, size, components

我有一个 JDialog，我希望它具有一定的给定大小：

```
JDialog dialog = new JDialog();
dialog.setSize(800, 600);
dialog.setResizable(false); 
```

然后我添加一个组件：

```
JLabel label = new JLabel("Test");
dialog.add(label); 
```

现在我可以使对话框可见并检查组件的大小

```
dialog.setVisible(true);
System.out.println(label.getSize()); 
```

答案是“[width=784,height=562]”。显然，该组件已调整大小以填充对话窗口的整个客户区/内容窗格。这很好，正如我想要的那样。

**问题：如何在调用 setVisible(true) 之前获得组件的最终大小？**

*   getPreferredSize() 不会是我想要的大小，因为我希望组件适应给定对话框的大小
*   dialog.pack() 也不是正确的，因为它将对话框调整为我不想要的组件的首选大小
*   dialog.validate() 在这里没有任何用处，组件的大小仍然为 0
*   dialog.getLayout().layoutContainer(dialog) 也没有设置组件的大小

所以我在这里不知所措。我想让布局管理器在显示对话框之前计算所有组件和子组件的正确大小，以适应对话框的整体大小。但我不知道怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T06:29:19.453

我现在发现可以这样做：

```
JDialog dialog = new JDialog();
JLabel label = new JLabel("Test");
dialog.add(label);

// pack(), setSize(), validate() in this order will
// set sizes on all components as wished
dialog.pack();
dialog.setSize(800, 600);
dialog.validate();

System.out.println(label.getSize()); 
```

这里的输出也是“[width=784,height=562]”，但对话框还不可见。重要的部分是按此顺序组合 pack()、setSize(desiredSize) 和 validate()。pack() 可能确定对话框的新大小（所有组件的首选大小），这就是为什么这里必须在之后设置大小，而 validate() 负责调整组件的大小。可能达到相同大小的 setVisible(true) 在内部做类似的事情。

多次调整组件的大小似乎有点浪费，但没有 pack() 也 setSize() 和 validate() 没有任何效果。

我猜其他答案是基于一些误解，因为它们总是隐含地假设您想要具有首选大小，但是在某些情况下，例如，如果用户调整对话框的大小，或者对话框的大小从一开始就固定，而您无法获得首选尺寸和一些组件只需填满可用空间。

这就是这里的布局问题，给定对话框的全局大小，并在组件填充可用空间时确定组件的大小。LayoutManagers 很好地解决了这个问题，但通常只在 setVisible(true) 之后。

我测试了更多：

```
 // new dialog
    JDialog dialog = new JDialog();

    // new label, prints messages if resized or painted
    JLabel label = new JLabel("Test") {
        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            System.out.println("Component painted.");
        }
    };
    label.addComponentListener(new ComponentAdapter() {
        @Override
        public void componentResized(ComponentEvent e) {
            System.out.println("Resized: " + e.getComponent().getSize());
        }
    });
    dialog.add(label);        
    System.out.println("Size after new JLabel: " + label.getSize());

    // pack dialog - necessary for setSize/validate to work
    dialog.pack();
    System.out.println("Size after pack: " + label.getSize());                

    // set a size and validate changes sizes
    dialog.setSize(800, 600);
    dialog.validate();
    System.out.println("Size after setSize and validate: " + label.getSize());        

    // set visible would have also done the trick
    dialog.setVisible(true);
    System.out.println("Size after setVisible(true): " + label.getSize());

    // and another resizing (no validation neccessary)
    dialog.setSize(300, 200);

    // dispose
    dialog.dispose(); 
```

输出是

*   新 JLabel 后的大小：java.awt.Dimension[width=0,height=0]
*   打包后尺寸：java.awt.Dimension[width=116,height=16]
*   setSize 和验证后的大小：java.awt.Dimension[width=784,height=562]
*   setVisible(true) 后的大小：java.awt.Dimension[width=784,height=562]
*   调整大小：java.awt.Dimension[width=284,height=162]
*   调整大小：java.awt.Dimension[width=284,height=162]
*   绘制的组件。

我进一步了解了 Swing 的内部工作原理：

*   ComponentResized 事件不会在 setVisible(true) 之前触发，即使组件被调整大小（它们的大小发生变化）
*   即使大小相同的 ComponentResized 事件也可以连续触发多次
*   如果组件足够快地相互跟随，则组件可能不会在调整大小之间进行绘制
*   在任何情况下，第一次绘画都在 setVisible(true) 之后，届时组件将具有所需的大小（首选大小或由此处的其他约束定义）。
*   如果由于某种原因您必须在第一次绘图之前知道组件的大小，请使用 pack()、setSize()、validate()

* * *

我测试了更多，也使用最大化的帧，现在可以将所有结果组合成：第一个 painComponent() 总是具有正确的大小，相关的 componentResized() 事件总是在之后发生，有时是两次。但是 LayoutManager 必须知道之前，否则将无法正确绘制示例。所以如果一个人自己绘制背景，要么在每个paintComponent中读出正确的大小，要么实现一个自定义布局管理器，或者等待resized事件并调用repaint，所以组件被绘制了两次，但它应该可以工作。应用程序包括要显示的组件数量取决于大小的情况（如在我的地理地图应用程序中）。

* * *

只是为了完成图片，我认为如果用户最大化或调整框架/对话框的大小，流程是这样的：

*   框架/对话框.setSize()
*   LayoutManager.layoutContainer(frame/dialog) 使用实际大小
*   使用布局大小的框架/对话框paint()
*   为所有组件等触发 Resized() 事件。

而 pack() 可能只是调用 setSize(layout.preferredLayoutSize()) 作为第一步。

因此，如果您必须根据大小添加或删除组件，例如，覆盖 setSize() 并在那里监听更改可能是个好主意。我最初是在监听 Resized() 事件，但它们到达第一次绘图时为时已晚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T09:38:31.927

[顶级容器](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)返回自己的`Size`, `PreferredSize`,`Bounds`在两种情况下（如果是的话）

*   已经可见

*   通话后`pack()`，在你的情况下`dialog.pack();`

*   必须计算`Borders`和`ToolBar`来自`Native OS`

*   必须从`Top-Level Containers#getContentPane().getWhatever`

*   大部分都是`JComponents`自己退货的`PreferredSize`，那就没有理由选尺码了`Standard Layout Manager`

# fatal-error - Magento - 致命错误：达到“100”的最大函数嵌套级别，中止

> ID：13046509
> 
> 赞同：1
> 
> 时间：2012-10-24T09:36:03.957
> 
> 标签：fatal-error, magento-1.7, nested

我不知道是什么导致了这个错误。我正在我的 Magento 商店上开发一个自定义模块，并且没有定期检查商店的主页。今天出乎意料的是，我的主页上出现了这个错误。

```
Fatal error: Maximum function nesting level of '100' reached, aborting! in C:\Program Files\EasyPHP-5.3.8.0\www\indieswebs\lib\Zend\Db\Adapter\Pdo\Mysql.php on line 1045 
```

有趣的是这个文件中没有 1045 行号！所以我猜这是某种循环错误。但我不知道是什么原因造成的。谁能帮我找出可能导致此特定错误的原因以及如何将其删除？

编辑：我从商店中删除了缓存并重新加载了主页。现在错误已经改变。它说： **致命错误：在第 281 行的 C:\Program Files\EasyPHP-5.3.8.0\www\indieswebs\lib\Zend\Db\Select.php 中允许的内存大小为 268435456 字节已用尽（试图分配 261904 字节）**

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T09:45:33.893

该错误仅在您安装 xdebug 时出现。

在 php.ini xdebug.max_nesting_level = 200 中使用以下设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T08:39:02.403

通过检查 [webroot]/app/etc/ 中的文件，我能够解决相关问题（导致相同的错误消息）

它正在发生（在企业版上），因为

```
config.xml
enterprise.xml 
```

该目录中缺少。一旦我把它们放回去，就解决了这个问题。

我还在其他地方读到格式错误的 local.xml 可能会导致此问题。

在企业版上，使用类似：

```
 <default_setup>
            <connection>
                <host><![CDATA[localhost]]></host>
                <username><![CDATA[some_user]]></username>
                <password><![CDATA[some_pass]]></password>
                <dbname><![CDATA[database_name]]></dbname>
                <active>1</active>
            </connection>
        </default_setup> 
```

在 CE 上，使用类似：

```
 <default_setup>
        <connection>
            <host><![CDATA[localhost]]></host>
            <username><![CDATA[your_user]]></username>
            <password><![CDATA[your_pass]]></password>
            <dbname><![CDATA[your_db]]></dbname>
            <initStatements><![CDATA[SET NAMES utf8]]></initStatements>
            <model><![CDATA[mysql4]]></model>
            <type><![CDATA[pdo_mysql]]></type>
            <pdoType><![CDATA[]]></pdoType>
            <active>1</active>
        </connection>
    </default_setup> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T14:16:02.237

我在我的 Collection.php 模型中得到了这个，罪魁祸首原来是对`parent::__construct()`. 一旦我把它重新整理出来，错误就消失了。PS：提高 xdebug 嵌套级别限制不起作用。

# php - 使用 CakePHP (params) 提取 URL 值

> ID：13046510
> 
> 赞同：5
> 
> 时间：2012-10-24T09:36:07.420
> 
> 标签：php, mysql, url, cakephp

我知道 CakePHP 参数很容易从这样的 URL 中提取值：

```
http://www.example.com/tester/retrieve_test/good/1/accepted/active 
```

我需要从这样的 URL 中提取值：

```
http://www.example.com/tester/retrieve_test?status=200&id=1yOhjvRQBgY 
```

我只需要这个 id 的值：

> id=1yOhjvRQBgY

我知道在普通的 PHP 中 $_GET 会很容易地检索到这个，但是我不能让它将值插入到我的数据库中，我使用了这个代码：

```
$html->input('Listing/vt_tour', array('value'=>$_GET["id"], 'type'=>'hidden')) 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-24T09:39:40.790

使用这种方式

```
echo $this->params['url']['id']; 
```

它在 cakephp 手册上[http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Controllers.html#the-parameters-attribute-params](http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Controllers.html#the-parameters-attribute-params)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-24T09:46:25.170

您没有指定您使用的蛋糕版本。请始终这样做。不提它会给你带来很多错误的答案，因为在版本中很多事情都会发生变化。

例如，如果您使用的是最新的 2.3.0，则可以使用新添加的查询方法：

```
$id = $this->request->query('id'); // clean access using getter method 
```

在您的控制器中。 [http://book.cakephp.org/2.0/en/controllers/request-response.html#CakeRequest::query](http://book.cakephp.org/2.0/en/controllers/request-response.html#CakeRequest::query)

但旧方法也有效：

```
$id = $this->request->params->url['id']; // property access
$id = $this->request->params[url]['id']; // array access 
```

你不能使用命名为

```
$id = $this->request->params['named']['id'] // WRONG 
```

将要求您的网址为`www.example.com/tester/retrieve_test/good/id:012345`. 所以havelock的答案是不正确的

然后将您的 id 传递给表单默认值 - 或者在您的情况下，在提交表单后直接传递给 save 语句（此处无需使用隐藏字段）。

```
$this->request->data['Listing']['vt_tour'] = $id;
//save 
```

如果您真的需要/想要将其传递给表单，请使用 else 块`$this->request->is(post)`：

```
if ($this->request->is(post)) {
    //validate and save here
} else {
    $this->request->data['Listing']['vt_tour'] = $id;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T09:41:22.223

或者，您也可以使用所谓的[命名参数](http://php.net/manual/en/function.pcntl-fork.php)

```
$id = $this->params['named']['id']; 
```

# cuda - 推力::device_vector 不工作

> ID：13046513
> 
> 赞同：0
> 
> 时间：2012-10-24T09:36:33.120
> 
> 标签：cuda, thrust

我已经使用 Thrust 编写了一个代码。我在下面粘贴代码及其输出。奇怪的是，当执行过程中到达 device_vector 行时，屏幕只是挂起并且没有更多的输出。它在早上工作。请帮我。

```
#include <thrust/host_vector.h>
#include <thrust/device_vector.h>

#include <iostream>

int main(void)
{
// H has storage for 4 integers
thrust::host_vector<int> H(4);

// initialize individual elements
H[0] = 14;
H[1] = 20;
H[2] = 38;
H[3] = 46;

// H.size() returns the size of vector H
std::cout << "H has size " << H.size() << std::endl;

// print contents of H
for(size_t i = 0; i < H.size(); i++)
    std::cout << "H[" << i << "] = " << H[i] << std::endl;

// resize H
H.resize(2);

std::cout << "H now has size " << H.size() << std::endl;

// Copy host_vector H to device_vector D
thrust::device_vector<int> D = H;

// elements of D can be modified
D[0] = 99;
D[1] = 88;

// print contents of D
for(size_t i = 0; i < D.size(); i++)
    std::cout << "D[" << i << "] = " << D[i] << std::endl;

// H and D are automatically deleted when the function returns
return 0;
} 
```

输出为： H 大小为 4 H[0] = 14 H[1] = 20 H[2] = 38 H[3] = 46 H 现在大小为 2

***之后什么都没有发生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:37:04.207

运行设备查询。我相信如果代码在早上工作，问题是由于显卡。

# javascript - 类似于 Asp.net MVC 的 Javascript MVC 框架

> ID：13046514
> 
> 赞同：0
> 
> 时间：2012-10-24T09:36:38.417
> 
> 标签：javascript, asp.net-mvc, model-view-controller

哪个 Javascript MVC 框架在路由、模型、视图和控制器的概念方面与 Asp.net MVC 最接近？

我使用优秀的[Sammy.js](http://sammyjs.org/)和[Mustache.js](http://mustache.github.com/)完成了一个个人项目，并且对 Sammy 感到满意，因为它与[Nancy](https://github.com/thecodejunkie/Nancy) the Micro .net 框架相似。

我想将此项目转换为另一个 Javascript MVC 框架，以便比较优缺点，我想选择一个类似于 Asp.net MVC 的框架，但我面临[选择](http://www.hanselman.com/blog/TheBigGlossaryOfOpenSourceJavaScriptAndWebFrameworksWithCoolNames.aspx)[悖论](http://en.wikipedia.org/wiki/The_Paradox_of_Choice%3a_Why_More_Is_Less)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:00:23.667

[资源](http://coding.smashingmagazine.com/2012/07/27/journey-through-the-javascript-mvc-jungle/)

在过去几年中，发布的此类 MV* 框架的数量出现了巨大的增长。

[Backbone.js](http://backbonejs.org/) , [Ember.js](http://emberjs.com/) , [AngularJS](http://angularjs.com/) , [Spine](http://spinejs.com/) , [CanJS](http://canjs.us/) ...</p>

新的稳定解决方案列表每周都在不断增加，开发人员很快就会发现自己迷失在众多选择中。

为了帮助解决这个问题，我们创建了[TodoMVC——](http://www.todomvc.com/)一个提供在当今大多数流行的 JavaScript MV* 框架中实现的相同 Todo 应用程序的项目 *——将其视为框架的快速约会。*

解决方案的外观和感觉都相同，具有共同的功能集，并且使我们可以轻松比较不同框架的语法和结构，因此我们可以选择我们觉得最舒服的一个，或者至少缩小我们的选择范围。

[JavaScript MVC 丛林之旅](http://coding.smashingmagazine.com/2012/07/27/journey-through-the-javascript-mvc-jungle/)是您的必读之作。

另请访问[TodoMvc](http://www.todomvc.com/) - 它会帮助您选择 MV* 框架。

![在此处输入图像描述](../Images/c51fa59bd7cd3f344dda1548398ead4f.png)

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:23:15.533

这不是一个完整的答案 - 因为有很多我没有亲自使用过的框架 - 但我只是想分享我的经验和个人观察，因为我也来自 ASP.NET MVC 并使用了以下几个 JS 框架：

总的来说，我发现它们与 ASP.NET 尤其是控制器不同，总体趋势似乎是 JS 框架中的模型更智能，它们往往是 ASP.NET 术语中的控制器+模型。另一个区别可能是与 ASP.NET MVC 不同，总是有很多方法可以做同样的事情。与 ASP.NET MVC 不同的是，您通常需要其他部分来补充您的框架选择，例如淘汰赛之上的路由库、具有骨干网的模板引擎等。最后，它比 ASP.NET 动态得多，有这么多的框架，一直在发展，很难跟上时代或找到确切的信息来源（ps：没有）。

Yasser 的资源非常好，还可以将[Addyosmani](http://addyosmani.com/blog/)博客添加到您的 RSS 提要中，他知道他的框架。Yasser 指出的 ToDoMVC 是一个很好的资源，可以让您快速了解所有选项以及如何在不同框架中完成工作。这是一个很好的起点，但这只是一个起点，您需要亲自动手才能学习任何有用的东西。

所以我使用了 Backbone 和 Knockout。

**Backbone**是 MVC，但骨干中的 C 是集合而不是控制器，它提供路由、下划线模板引擎（但您可以将其更改为您想要的任何内容）并且非常适合与 RESTful apis 同步。它还使用下划线库，即使您认为 Backbone 不适合您，它本身也是一个很好的库。模型 - 在主干中 - 是应用程序的核心，它们是 ASP.NET MVC 术语中的控制器+模型。

> 模型是任何 JavaScript 应用程序的核心，包含交互式数据以及围绕它的大部分逻辑：转换、验证、计算属性和访问控制。

**Knockout**是 MVVM 而不是 MVC，但仍然值得尝试学习练习，它只做模型绑定，没有路由，但它做得非常优雅。

只需选择一个框架来尝试下一步，这是最后的学习练习。我会选择 Backbone*只是*因为它很受欢迎，然后如果我有时间尝试其他每个框架。我敢打赌，这将是一个非常令人兴奋的练习。

# redirect - 为什么 IE9 会发送 IE6 的用户代理字符串？

> ID：13046518
> 
> 赞同：0
> 
> 时间：2012-10-24T09:36:44.300
> 
> 标签：redirect, internet-explorer-9, internet-explorer-6, user-agent

我的应用程序出现一堆错误，用户代理字符串为：

```
 Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1) 
```

[在useragentstring.com](http://www.useragentstring.com/pages/Internet%20Explorer/)上查找，这应该是`internet explorer 6`用户声称他正在使用的时候`internet explorer 9`。

我不是用户代理方面的专家，有人可以告诉我为什么 IE9 会伪装成 IE6，或者我在这里还缺少什么？有没有办法“真正”检测浏览器服务器端？我可以在服务器端（使用 Coldfusion）或在 htaccess 中进行重定向吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:46:07.330

这是我可以从几乎所有用户代理字符串的存档中找到的。

说明：这个字符串有一点历史。我们最初将它作为 EudoraWeb 字符串发布 - 因为它是由站点用户自行识别的。然而：

我们收到了一些关于这个字符串的电子邮件，表明它不是 eudora，因为它没有 Eudora。公平地说，字符串的供应商也表达了一些疑问，因为它是留给用户来识别字符串的。如果有人可以对这个主题有更多的了解 - 请给我们发电子邮件，我们会发布。

我们得到了更多评论，说它看起来很像普通的 Win 2K，我们已经移动了它。建议是在使用 MS WindowsUpdate 系统时添加两个 .NET 字符串。Matt Hair 的解释 - 谢谢。

Mozilla/4.0（兼容；MSIE 6.0；Windows NT 5.1）

[http://www.zytrax.com/tech/web/msie-history.html](http://www.zytrax.com/tech/web/msie-history.html)

# postgresql - 对子查询返回的每一行调用一个函数

> ID：13046519
> 
> 赞同：2
> 
> 时间：2012-10-24T09:36:44.557
> 
> 标签：postgresql, postgis

我需要运行以下查询来提取特定点的栅格记录的值。

```
select st_value((select rast from mytable),
    (select st_GeomFromText('POINT(30.424 -1.978)', 4326))) 
```

但我遇到以下错误：

> 错误：用作表达式的子查询返回多行 SQL 状态：21000

此功能只需要一条记录，但我需要提取所有记录的值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T10:00:51.703

如果子查询返回多行，则必须在公用表表达式（CTE /`WITH`查询）中使用它和`FROM alias`，或使用`FROM (SELECT ...) alias`. 但是，在这种情况下，它看起来比这更简单：

```
select st_value(rast, st_GeomFromText('POINT(30.424 -1.978)', 4326))
FROM mytable; 
```

这两个子查询似乎都是不必要的。

如果您真的需要子查询，您会在语法上编写如下内容：

```
WITH sq(rast) AS ( SELECT rast FROM mytable )
SELECT st_value(rast, st_GeomFromText('POINT(30.424 -1.978)', 4326))
FROM sq; 
```

或者

```
SELECT st_value(rast, st_GeomFromText('POINT(30.424 -1.978)', 4326))
FROM (SELECT rast FROM mytable) sq(rast); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-28T11:35:51.633

如果你有一个多列的函数，你可以做这样的事情

```
SELECT (info).column1, (info).column2, (info).column3
FROM   (select st_value(rast, st_GeomFromText('POINT(30.424 -1.978)', 4326)) AS info
        FROM mytable
       ) AS foo 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-24T09:42:45.327

尝试：

```
Select st_value(rast),
       st_GeomFromText('POINT(30.424 -1.978)', 4326)
from mytable 
```

# coldfusion - 如何使用 cfscript 从不同的组件动态调用方法？

> ID：13046520
> 
> 赞同：8
> 
> 时间：2012-10-24T09:36:45.983
> 
> 标签：coldfusion, coldfusion-9

我正在寻找从 cfscript 中的不同组件动态调用方法的最佳方法。请注意，它涉及**不同**组件中的方法。到目前为止，我已经尝试了 3 种不同的方法，但它们似乎都不是我想要的：

所有的案例都写在一个组件方法中的cfscript中。假设我正在尝试动态调用*MyComponent*组件`setName(required string name)`中的方法。所有案例都定义了以下变量：

 *```
var myComp = new MyComponent();
var myMethod = "setName";  
var args = {"name"="foo"}; 
```

*   用于`evaluate()`工作

    ```
    evaluate("myComp.#myMethod#(argumentCollection=args)"); 
    ```

    **优点**：用很少的代码完成
    **缺点**：代码不是很“干净”，并且评估（）的使用似乎在在线社区中有一个“邪恶”的名声。我不希望我的代码是邪恶的。

*   使用 cfml 包装器`<cfinvoke>`

    ```
    invoke("MyComponent", myMethod, args); 
    ```

    **优点**：我可以使用`cfinvoke`
    **缺点**`MyComponent`的所有功能：每次调用都会创建一个新实例。

*   `dynamicMethod`在 MyComponent 中 创建一个方法

    ```
    myComp.dynamicMethod(myMethod, args); 
    ```

    MyComponent 的动态方法：

    ```
    public any function dynamicMethod(required string methodName, required struct argumentColl){  
      var cfcMethod = variables[arguments.methodName];  
      return cfcMethod(argumentCollection=arguments.argumentColl);
    } 
    ```

    **优点**：我终于可以直接调用 myComp 了。迄今为止最舒适的解决方案。
    **缺点**：我现在可以通过 dynamicMethod 调用 MyComponent 的私有方法。
    （我还在 MyComponent 之外尝试了“作为变量的函数”解决方案，但随后该函数失去了它的工作上下文。例如，如果 MyComponent 将扩展一个组件，则“超级”范围将不再引用扩展的组件）。

这些解决方案似乎都不是完美的，所以没有其他方法可以从不同的控制器调用动态函数吗？
如果没有，其中哪一个是最好的解决方案？

欢迎任何建议，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T10:17:56.657

好分析。

您可以在这里做的一件事是更密切地模拟`<cfinvoke>`您的包装函数。 `<cfinvoke>`将在该属性中采用组件路径*或*组件实例（即：对象） 。`COMPONENT`所以你的“骗局”是“每次调用都会创建一个 MyComponent 的新实例”。不是真的有效。

顺便说一句，ColdFusion 10 添加了一个[`invoke()`](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSd8001ae4abdbd911-5c900a4e1350d8b2511-8000.html)功能来实现这一点。我注意到你在 CF9 上，所以这对你没有帮助。但这可能与可能涉及此问题的其他人有关。*

# javascript - Ember.js：使用插座动态切换布局

> ID：13046521
> 
> 赞同：1
> 
> 时间：2012-10-24T09:36:49.680
> 
> 标签：javascript, ember.js

我试图在 Ember.js 中的布局之间动态切换，方法是在 ApplicationView 中有一个名为 layout 的插座，以及在其中有一个未命名插座的几个布局类。请参阅此 JSfiddle：http: [//jsfiddle.net/ElteHupkes/SFC7R/2/](http://jsfiddle.net/ElteHupkes/SFC7R/2/)。

这第一次工作正常，但是在切换布局时内容消失了。这似乎与您简单地重新渲染应用`router.get('applicationView').rerender()`程序[视图](https://stackoverflow.com/questions/13009470/re-rendering-applicationview-with-outlet)（

我想说，由于控制器绑定保持不变，未命名的插座仍应连接，因此应呈现内部视图内容。我希望有人能告诉我为什么他们不是:)。

HTML：

```
<script type="text/x-handlebars" data-template-name="application">
  {{outlet layout}}
  <a href="#" {{action doToggleLayout}}>Toggle layout</a>
</script>

<script type="text/x-handlebars" data-template-name="layout1">
  <h1>Layout 1</h1>
  {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="layout2">
  <h1>Layout 2</h1>
  {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="index">
  Page contents.
</script> 
```

JS：

```
App = Ember.Application.create({
    autoinit: false,
    Router: Ember.Router.extend({
        root: Em.Route.extend({
            index: Em.Route.extend({
                route: '/',
                connectOutlets: function(router) {
                    // Fire toggle once as an initializer
                    router.send('doToggleLayout');

                    router.get('applicationController').connectOutlet('index');
                }
            }),

            doToggleLayout: function(router) {
                this.set('layoutClass', this.get('layoutClass') == App.Layout2View ? App.Layout1View : App.Layout2View);

                router.get('applicationController').connectOutlet({
                    viewClass: this.get('layoutClass'),
                    outletName: 'layout'
                });
            }
        })
    }),

    ApplicationView: Em.View.extend({
        templateName: 'application'
    }),

    ApplicationController: Em.Controller.extend({})
});

App.IndexView = Em.View.extend({
    templateName: 'index'
});
App.Layout1View = Em.View.extend({
    templateName: 'layout1'
});
App.Layout2View = Em.View.extend({
    templateName: 'layout2'
});
App.set('layoutClass', App.Layout2View);
App.initialize(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:45:43.373

我认为由于潜在的泄漏原因，当您切换插座时，前一个视图（及其所有子视图都被破坏。所以您必须重新连接匿名插座才能填充它。

# c# - 绑定到嵌套属性

> ID：13046524
> 
> 赞同：1
> 
> 时间：2012-10-24T09:37:13.317
> 
> 标签：c#, windows-phone-7, xaml

我有一个作为 o 模型的类： Flight 和 flightDetails 类是在 web 服务的代理中定义的两个类：

```
public class FlightView
    {
        public FlightView()
        {
            FlightDetailsElement = new FlightDetails();
            Flight = new Flight();
            VisibleBoarding = false;
            VisibleCheckIn = false;
            Visibleluggage = false;
        }
        public Flight Flight;
        public FlightDetails FlightDetailsElement;
        private bool _visibleCheckIn;
        public bool VisibleCheckIn
        {
            get { return _visibleCheckIn; }
            set { _visibleCheckIn = value; }
        }
        private bool _visibleBoarding;
        public bool VisibleBoarding
        {
            get { return _visibleBoarding; }
            set { _visibleBoarding = value; }
        }
        private bool _visibleluggage;
        public bool Visibleluggage
        {
            get { return _visibleluggage; }
            set { _visibleluggage = value; }
        }
        private DateTime _refreshDate;
        public DateTime RefreshDate
        {
            get { return _refreshDate; }
            set { _refreshDate = value; }
        }
        private string _date;
        public string Date
        {
            get { return _date; }
            set { _date = value; }
        }
        private string _time;
        public string Time
        {
            get { return _time; }
            set { _time = value; }
        }

    } 
```

在代码隐藏中，我设置了网格的 dataxontext：

```
 SelectedFlightView.FlightDetailsElement = e.Result;
        if(!(SelectedFlightView.FlightDetailsElement.IsArrival) && !string.IsNullOrEmpty(SelectedFlightView.FlightDetailsElement.BoardingGate))
        SelectedFlightView.VisibleBoarding= true;
         if(!(SelectedFlightView.FlightDetailsElement.IsArrival) && !string.IsNullOrEmpty(SelectedFlightView.FlightDetailsElement.CheckInArea))
        SelectedFlightView.VisibleCheckIn= true;
         if ((SelectedFlightView.FlightDetailsElement.IsArrival) && !string.IsNullOrEmpty(SelectedFlightView.FlightDetailsElement.LuggageDelivery))
             SelectedFlightView.Visibleluggage = true;
         SelectedFlightView.RefreshDate = DateTime.Now;
         SelectedFlightView.Date = SelectedFlightView.RefreshDate.ToLongDateString();
         SelectedFlightView.Time = SelectedFlightView.RefreshDate.ToLongTimeString();
         ContentPanelDetails.DataContext = SelectedFlightView; 
```

我的问题是当我在 xaml 中绑定时：

```
 <TextBlock  Text="{Binding FlightDetailsElement.DepartureTime}"/> 
```

我没有结果，但是当我绑定时

`<TextBlock Text="{Binding Time}"/>`我有结果。

请问有什么想法吗？？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:13:09.163

要使绑定起作用，您需要使用公共属性。目前，您`FlightDetailsElement`是一个公共领域。要解决您的问题，只需将其声明为属性：

```
public FlightDetails FlightDetailsElement { get; set; } 
```

# c# - 用户代码未处理 Notsupportedexception

> ID：13046526
> 
> 赞同：1
> 
> 时间：2012-10-24T09:37:13.977
> 
> 标签：c#, entity-framework, .net-4.0, exception-handling, linq-to-entities

我的代码：

```
i f(!string.IsNullOrWhiteSpace(gender))
    if (gender == "NULL")
        predicate = predicate.And(x => string.IsNullOrWhiteSpace(gender));
    else
        predicate = predicate.And(x => x.Gender == gender); 
```

当性别为 NULL 并且我正在执行流线时：

```
var filteredUsers = _personExtendedRepository.GetMany(predicate).ToList(); 
```

发生错误：

> “LINQ to Entities 无法识别 'Boolean IsNullOrWhiteSpace(System.String)' 方法，并且该方法无法转换为存储表达式。”

**注意**：当我在 SQL Server Management Studio 中执行以下行时：

```
SELECT * FROM UVW_Sample WHERE Gender IS NULL 
```

正在显示记录。请帮助如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:44:12.253

LINQ-to-Entities 的功能有限，因为它将您的表达式转换为 SQL，并且它不知道如何将 string.IsNullOrWhiteSpace 转换为 SQL。它也不知道如何将 .ToString() 转换为 SQL。

您需要做的是在 LINQ-to-Entities 之外执行翻译。在您的情况下，您的谓词应该是：

```
x=>x==null || x.Trim()=="" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:42:59.627

`string.IsNullOrWhiteSpace`不能被翻译成 SQL，所以如果你想检查列是否为空，请使用类似：

```
predicate = predicate.And(x => x.Gender == null); 
```

# java - 如何在 Java 中对字符串的 ArrayList 进行排序？

> ID：13046532
> 
> 赞同：31
> 
> 时间：2012-10-24T09:37:56.857
> 
> 标签：java, sorting, arraylist

我有随机`String`放入的 s 。`ArrayList`

```
private ArrayList<String> teamsName = new ArrayList<String>();
String[] helper; 
```

例如：

```
teamsName.add(helper[0]) where helper[0] = "dragon";   
teamsName.add(helper[1]) where helper[1] = "zebra";   
teamsName.add(helper[2]) where helper[2] = "tigers" // and so forth up to about 150 strings. 
```

鉴于您无法控制输入（即进入 ArrayList 的字符串是随机的；斑马或龙以任何顺序），一旦 ArrayList 充满输入，我如何按字母顺序对它们进行排序，不包括第一个？

`teamsName[0]`很好；按字母顺序排序`teamsName[1 to teamsName.size]`。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-24T09:40:23.027

```
Collections.sort(teamsName.subList(1, teamsName.size())); 
```

上面的代码将反映已排序的原始列表的**实际子列表。**

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-24T09:40:16.857

检查[`Collections#sort`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List%29)方法。这会根据自然顺序自动对您的列表进行排序。您可以将此方法应用于使用[`List#subList`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#subList%28int,%20int%29)方法获得的每个子列表。

```
private List<String> teamsName = new ArrayList<String>();
List<String> subList = teamsName.subList(1, teamsName.size());
Collections.sort(subList); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-24T09:39:43.957

看看[`Collections.sort(List<T> list)`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List%29)。

您可以简单地删除第一个元素，对列表进行排序，然后重新添加。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-24T09:41:22.537

您可以`helper[]`直接对数组进行排序：

```
java.util.Arrays.sort(helper, 1, helper.length); 
```

对数组从索引 1 到末尾进行排序。保持索引 0 处的第一项不变。

参见[Arrays.sort(Object[] a, int fromIndex, int toIndex)](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28java.lang.Object%5B%5D,%20int,%20int%29)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-24T09:57:34.563

您可以使用`TreeSet`该自动排序列表值：

```
import java.util.Iterator;
import java.util.TreeSet;

public class TreeSetExample {

    public static void main(String[] args) {
        System.out.println("Tree Set Example!\n");

        TreeSet <String>tree = new TreeSet<String>();
        tree.add("aaa");
        tree.add("acbbb");
        tree.add("aab");
        tree.add("c");
        tree.add("a");

        Iterator iterator;
        iterator = tree.iterator();

        System.out.print("Tree set data: ");

        //Displaying the Tree set data
        while (iterator.hasNext()){
            System.out.print(iterator.next() + " ");
        }
    }

} 
```

我最后添加了“a”，但最后一个元素必须是“c”。

# uitableview - UIGestureRecognizer 类型捕获在gestureRecognizerShouldBegin

> ID：13046534
> 
> 赞同：3
> 
> 时间：2012-10-24T09:38:03.087
> 
> 标签：uitableview, uigesturerecognizer

我想抓住`UIGestureRecognizer`. 我可以这样做吗？

```
- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer
{
    NSLog(@"Gesture should begin");
    if ([gestureRecognizer isMemberOfClass:[UIRotationGestureRecognizer class]])
        NSLog(@"rotate");
    if ([gestureRecognizer isMemberOfClass:[UIPinchGestureRecognizer class]])
        NSLog(@"pinch");
    if ([gestureRecognizer isMemberOfClass:[UITapGestureRecognizer class]])
        NSLog(@"tap");
    if ([gestureRecognizer isMemberOfClass:[UIPanGestureRecognizer class]])
        NSLog(@"pan");
    if ([gestureRecognizer isMemberOfClass:[UILongPressGestureRecognizer class]])
        NSLog(@"long");
    if ([gestureRecognizer isMemberOfClass:[UISwipeGestureRecognizer class]])
        NSLog(@"swipe");
    return NO;
} 
```

我在表格视图单元格中有一个长触摸手势。如果我按下单元格，我会收到一条日志：

```
-[FileObjectView gestureRecognizerShouldBegin:] [Line 45] Gesture should begin
-[FileObjectView gestureRecognizerShouldBegin:] [Line 55] long 
```

我希望它以这种方式工作。

但有时当我滚动表格视图时，我会收到一条日志：

```
-[FileObjectView gestureRecognizerShouldBegin:] [Line 45] Gesture should begin 
```

这让我觉得我不知道某种手势。

有人能解释一下情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:18:16.253

我决定以这种方式检查类名：

```
NSLog(@"%@",gestureRecognizer.class); 
```

班级名称是：`UIScrollViewPanGestureRecognizer`

我已经在不同的 iOS 版本上多次检查过这个问题。

这件事只发生在 iOS 6 上。还有一个 iOS 6 错误？！

# ios - IOS AVFoundation - avcapturevideopreviewlayer 预览冻结在第一帧

> ID：13046538
> 
> 赞同：1
> 
> 时间：2012-10-24T09:38:16.373
> 
> 标签：ios, avfoundation, freeze, preview

这很奇怪，超出了我的范围。如果我从 Apple 获取 AVCAM 示例并将其粘贴到我的应用程序（以及所有文件、声明等）上，我可以很好地使用相机。该应用程序捕获静止图像、视频、保存、自动对焦等。一切都很好，但有一件事，预览层（查看相机指向的内容）在加载并保持冻结时立即冻结在第一帧。这是来自 Apple 的代码，它进入了我的主控制器的 viewDidLoad：

```
if ([self captureManager] == nil) {
         AVCamCaptureManager *manager = [[AVCamCaptureManager alloc] init];
         [self setCaptureManager:manager];
         [manager release];

         [[self captureManager] setDelegate:self];

         if ([[self captureManager] setupSession]) {

              // Create video preview layer and add it to the UI
              AVCaptureVideoPreviewLayer *newCaptureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:[[self captureManager] session]];
              UIView *view = [self videoPreviewView];
              CALayer *viewLayer = [view layer];
              [viewLayer setMasksToBounds:YES];

              CGRect bounds = [view bounds];
              [newCaptureVideoPreviewLayer setFrame:bounds];

              if ([newCaptureVideoPreviewLayer isOrientationSupported]) {
                  [newCaptureVideoPreviewLayer setOrientation:AVCaptureVideoOrientationPortrait];
              }

              [newCaptureVideoPreviewLayer setVideoGravity:AVLayerVideoGravityResizeAspectFill];

              [viewLayer insertSublayer:newCaptureVideoPreviewLayer below:[[viewLayer sublayers] objectAtIndex:0]];

              [self setCaptureVideoPreviewLayer:newCaptureVideoPreviewLayer];
              [newCaptureVideoPreviewLayer release];

         // Start the session. This is done asychronously since 
         //    -startRunning doesn't return until the session is running.
              dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
                [[[self captureManager] session] startRunning];     });
          }       
} 
```

现在得到这个：相反，我决定将我的代码粘贴到 Apple 的 AVCAM 中，而不是将 Apple 的代码粘贴到我的应用程序中，看看这是否可行。在移动大量文件并基本上将 AVCAM 变成我的实验应用程序后，一切正常。两个项目（1-Apple 的 AVCAM 和我添加的代码和 2-我的 AVCAM 添加代码的原始项目）具有完全相同的文件和完全相同的代码。可不是闹着玩的。两个项目的类头文件和实现文件是相同的。但是，在我的原始项目中，预览层冻结并保持冻结状态。但在 AVCAM 原始项目上，预览层有效。所以我正在检查框架、构建和链接选项、SDK 版本等......我怀疑这是某个地方的项目设置，但我无法弄清楚。我真的不

有人遇到过这个吗？预览层在视图加载后立即冻结在第一帧。

有什么线索吗？（顺便说一句，我在 SDK 5.1，armv7，在设备上运行）。

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:36:33.990

明白了...放在这里以防有人需要...问题是MainWindow.xib中的连接。

*   解决方案第 1 部分

如果您打开 MainWindow.xib，您应该会看到至少 2 个对象：

“App View Controller”（其中 App 是您的应用名称）

和“窗口”对象。

单击窗口对象。查看“Connections Inspector”，在 OUTLETS 部分下有一个“rootViewController”插座。我的没有映射到任何东西。因此，我单击了该插座连接并将其一直拖到对象列表中的“App View Controller”对象。现在“WINDOW”对象有一个从 rootViewController 到 App View Controller 的连接。如果我单击“App View Controller”对象并查看连接检查器，我还会看到从“引用插座”rootViewController 到 Window 对象的反向连接。

*   解决方案第 2 部分

并非所有应用程序在 MainWINdow.xib 的对象列表中都有 App Delegate。如果您的应用程序没有视图控制器的委托，那么您就完成了。如果您的应用确实有视图控制器的委托，那么您还有一步：仍然查看 MainWindow.xib，单击您的 App Delegate 对象并查看 Connections Inspector。在“OUTLETS”部分下，如果您看到从 viewController 到 App View Controller 的连接，请删除该连接（单击小 x 将其删除）。这应该就是全部了。其他替代方案，如果您根本不使用委托，您可以删除它。

完成上述步骤后，我的应用程序就像一个魅力。预览图层实时显示而不会冻结。

注意：此解决方案禁用委托。所以像 applicationDidEnterBackground 这样的一些方法将不再对你的视图控制器产生任何影响。如果您需要在不冻结 videopreviewlayer 的情况下让 Delegate 方法再次工作，您可能需要更多地使用连接。也许为您的视频项目创建第二个视图控制器。谁知道...出于我的需要，我刚刚删除了委托。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T04:54:49.327

我遇到了类似的问题。我正在使用 AVAudioPlayer 与我的 AVCaptureManager 一起播放声音。我最初将 AVAudioPlayer AVAudioSessionCategory 设置为 AVAudioSessionCategoryPlayback。当我将其更改为 AVAudioSessionCategoryPlayAndRecord 时，冻结停止了。

# grails - Grails - 在单个表单中创建多个嵌套对象

> ID：13046539
> 
> 赞同：1
> 
> 时间：2012-10-24T09:38:23.870
> 
> 标签：grails

我有简单的层次结构。

```
class Atom { String value}

class Unit { 
    List atoms
    static hasMany = [ atoms:Atom ] 
    String name
}

class Block {
    List unitss 
    static hasMany = [ units:Unit ] 
    String name
} 
```

假设我想创建一个块，其中包含两个单元，每个单元有两个原子。所以，首先，我创建了四个原子形式的原子。然后，我创建两个单元，并选择以前创建的原子。最后，我创建块并选择以前创建的单元。这不方便，所以我想以单一形式移动所有创建逻辑。我使用了这篇文章中的方法[http://www.2paths.com/2009/10/01/one-to-many-relationships-in-grails-forms/](http://www.2paths.com/2009/10/01/one-to-many-relationships-in-grails-forms/)

简而言之，我在 Block 类中添加了方法：

```
def getExpandableUnitList() {
    return LazyList.decorate(units,FactoryUtils.instantiateFactory(Unit.class))
} 
```

另外，我添加了调用js函数的按钮：

```
var unitCount = ${blockInstance?.units.size()} + 0;
function addUnit()
{
    var htmlId = "unit" + unitCount;
    var deleteIcon = "${resource(dir:'images/skin', file:'database_delete.png')}";
    var templateHtml = "<div id='" + htmlId + "' name='" + htmlId + "'>\n";
    templateHtml += "Unit "+ (unitCount + 1) + "\n";
    templateHtml += "<input type='hidden' id='expandableUnitList[" + unitCount + "].name' name='expandableUnitList[" + unitCount + "].name' />\n";
    templateHtml += "<span onClick='$(\"#" + htmlId + "\").remove();'><img src='" + deleteIcon + "' /></span>\n";
    templateHtml += "</div>\n";
    $("#UnitList").append(templateHtml);
    unitCount++;
} 
```

现在，我可以用一种形式创建带有单元的块（见下图，抱歉形式设计不佳）

[表格 1 http://imageshack.us/a/img833/8775/screenshotfrom201210241.png](http://imageshack.us/a/img833/8775/screenshotfrom201210241.png)

但是，这种形式也不方便——我们不能将原子添加到单元中。

因此，我在单元类中添加了lazylist，并添加了另一个具有几乎相同js代码的按钮。现在，我有这个：

[表格 2 http://imageshack.us/a/img31/8775/screenshotfrom201210241.png](http://imageshack.us/a/img31/8775/screenshotfrom201210241.png)

但是，当我创建此表单时 - 它不会保存我的原子。这是预期的行为，因为我们单元的惰性列表不知道原子的惰性列表。我不知道如何管理它。我唯一尝试过的 - 下面的代码，但它不起作用。

```
templateHtml += "<input type='hidden' id='expandableBlockList[" + blockId + "].add(expandableUnitList[" + unitCount + "].name)' name='expandableBlockList[0].add(expandableUnitList[" + unitCount + "].name)' />\n"; 
```

所以。我的问题是 - 如何以单一形式创建多个嵌套对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:32:15.320

查看 Grails 文档 - 特别是有关[Gorm 级联行为](http://grails.org/doc/latest/guide/GORM.html#cascades)的部分，它解释了您要查找的内容。

*... 无论是一对一、一对多还是多对多，**定义 belongsTo 都会导致更新从拥有类级联到其依赖类**（关系的另一端），并且对于多/一对一和一对多关系删除也将级联。*

*如果您**没有定义 belongsTo 则不会发生级联，您将不得不手动保存每个对象**（一对多的情况除外，在这种情况下，如果新实例在 hasMany 集合中，保存将自动级联） .*

编辑：

顺便说一句 - 不确定这是否是错字，但您的块定义不包含任何单位

我很快提交了一个答案，可能应该多加考虑 - 听起来你的问题更多是在表单方面而不是域定义。目前，当您的域被定义时，您**应该**能够在创建 Unit 时创建一个 Atom 以及它与 Unit 的关系。这是一个非常简单的表格来说明您在如何定义输入方面需要做的事情。

```
<form ...
  Unit: <input type="text" name="name" value="" /> 
  Atom 1: <input type="text" name="atoms[0].value" value="" />
  Atom 2: <input type="text" name="atoms[1].value" value="" />
 ...
</form> 
```

作为示例，原子集合的大小在这里是硬编码的，但在更具可扩展性的解决方案中，您可以动态定义它们。所以在提交时，这将创建单元，它是 2 个原子。

编辑：你有没有尝试过这样的事情：

```
Block: <g:textField name="name" value=""/>
<br />
Unit 1: <g:textField name="units[0].name" value=""/> atoms:
<g:textField name="units[0].atoms[0].value" value=""/>
<g:textField name="units[0].atoms[1].value" value=""/>
<br />
Unit 2: <g:textField name="units[0].name" value=""/> atoms:
<g:textField name="units[0].atoms[0].value" value=""/>
<g:textField name="units[0].atoms[1].value" value=""/> 
```

# iphone - 以编程方式为网格中的单元格着色

> ID：13046542
> 
> 赞同：0
> 
> 时间：2012-10-24T09:38:29.197
> 
> 标签：iphone, objective-c, ios, grid

我正在开发一个 Iphone 应用程序。我想要一个由看不见的小方块组成的网格。

我希望能够从代码中更改这些方块的颜色。

我怎样才能做到这一点？

附加信息：

网格是静态的（某种国际象棋网格），我需要能够更改其中给定方块的颜色。例如，将正方形 C3 的颜色更改为红色，将 E7 的颜色更改为绿色。

除了着色之外，我不想在正方形中放置任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:40:15.883

您可以继承 UIView，添加一些数据结构来保存单元格信息并覆盖[drawRect:](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-BBCDGJHF)方法。

像这样的东西：

```
// in view

-(void)drawCellAtRow:(int)row column:(int)column 
{
     // draw a cell          
}

-(void)drawRect:(CGRect)rect
{
    // determine which cells have to be drawn for this rect
    // and draw them
}
-(void)changeCellAtRow:(int)row column:(int)column 
{
    // change cell info
    // calculate rect to update
    [self setNeedsDisplayInRect:dirtyRect];
}

// in view controller   
-(void)eventHandler
{
   [cellView changeCellAtRow:row column:column];
} 
```

[iOS 绘图指南](http://developer.apple.com/library/ios/#documentation/2DDrawing/Conceptual/DrawingPrintingiOS/Introduction/Introduction.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:41:41.240

`theView.backgroundColor = color;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:08:59.387

当我想创建一个具有 42 个子视图（在网格中）的视图时 - 我只是使用 drawRect 并在正确的位置绘制了必要的颜色渐变，然后在它们上绘制了必要的文本。（我还需要不同渐变颜色的不同方块，如果您也需要 - 我相信您将能够进一步调整此代码 :)）

```
- (void)drawRect
{
    int mWidth = 99;

    int mHeight = 99;

    //--- now we draw all gradients (will have 1 pix wide space between each)
    for(int i = 0; i < 100; i++)
    {
        for(int j = 0; j < 100; j++)
        {

            //--- gradient color
            CGColorSpaceRef baseSpace = CGColorSpaceCreateDeviceRGB();

            CGFloat colors [] = {  //these values are for a white square block.
                    255/255.0, 255/255.0, 255/255.0, 1.0,
                    255/255.0, 255/255.0, 255/255.0, 1.0
                };

            CGGradient gradient = CGGradientCreateWithColorComponents(baseSpace, colors, NULL, 2);

            CGColorSpaceRelease(baseSpace), baseSpace = NULL;

            CGContextSaveGState(context);

            CGContextAddRect(context, rect);

            CGContextClip(context);

            CGContextAddRect(context, CGRectMake(1+j*(mWidth+1),0+i*(mHeight+1),mWidth,mHeight+i*mHeight+i*1));

            CGContextClip(context);

             //+ 1 values to make sure we have one pix wide space between any two squares
            CGContextDrawLinearGradient (context, gradient, CGPointMake(1+j*(mWidth+1), 0+i*(mHeight+1)), CGPointMake(1+j*(mWidth+1),0+mHeight+i*mHeight+i*1), 0);

            CGGradientRelease(gradient), gradient = NULL;

            CGContextRestoreGState(context);
            //===

            //Here We can draw any string labels we need.
        }
    } 
```

祝你好运！

# php - wkhtmltopdf - libfontconfig.so.1：无法打开共享对象文件

> ID：13046555
> 
> 赞同：36
> 
> 时间：2012-10-24T09:39:25.023
> 
> 标签：php, linux, symfony

我正在尝试在我的 debian linux 服务器上安装 wkhtmltopdf，这样我就可以测试它是否从 url 创建了 pdf。

我已经下载了 wkhtmltopdf-0.9.9-static-i386.tar.bz2 并将其内容提取到一个目录中。

当我尝试测试它是否正常工作时，我遇到了下一个错误：

> /usr/local/bin# wkhtmltopdf [http://google.com](http://google.com) google.pdf wkhtmltopdf：加载共享库时出错：libfontconfig.so.1：无法打开共享对象文件：没有这样的文件或目录

我正在尝试在我的 symfony2 上安装[https://github.com/KnpLabs/KnpSnappyBundle](https://github.com/KnpLabs/KnpSnappyBundle)，我想我需要先在我的 linux 上安装 wkhtmltopdf。我对吗？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-10-24T09:46:13.710

我花了几个小时来解决这个问题，但你还需要安装 libfontconfig1 例如：

```
apt-get install libfontconfig1 
```

# java - log4j 记录器不可见

> ID：13046565
> 
> 赞同：0
> 
> 时间：2012-10-24T09:39:56.807
> 
> 标签：java, log4j, project, structure, visibility

有人使用过 log4j 并且知道“构造函数 () 不可见意味着什么”吗？

这是 Main 类的代码：

```
import org.apache.log4j.xml.DOMConfigurator;
import stdGame.*;
public class Main {
  public static void main(String[] args) {
      DOMConfigurator.configureAndWatch( "data/log/myLoggerConfig.xml", 60*1000 );
      new LogTest();
    }
} 
```

LogTest 类位于 stdGame-package 中，如您所见，它已经导入。当将 LogTest 类与 Main 类放在同一个包中时，代码可以按需要工作。这是 LogTest() 类的代码：

```
package stdGame;
import org.apache.log4j.Logger;
public class LogTest {
    private static Logger logger = Logger.getLogger(LogTest.class);
    LogTest() {
        logger.info("My info-msg in LogTest.");
        logger.error("My error-msg in LogTest.");
    }
} 
```

尝试将它们放入同一个包中，错误消息将消失。但我需要将它们放入单独的包装中。

最后这是 myLoggerConfig.xml 文件：

```
 <?xml version="1.0" encoding="UTF-8" ?>
  <!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
  <log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">
  <appender name="MeinAppender" class="org.apache.log4j.DailyRollingFileAppender">
  <param name="datePattern" value="'.'yyyy-MM-dd_HH-mm" />
  <param name="file" value="data/log/myLogfile.log" />
  <param name="Append" value="true" />
  <layout class="org.apache.log4j.PatternLayout">
  <param name="ConversionPattern" value="%d{ISO8601} %-5p [%t] %c: %m%n" />
  </layout>
  </appender>
  <root>
  <priority value="INFO" />
  <appender-ref ref="MeinAppender" />
  </root>
  </log4j:configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T09:42:08.137

你的类`LogTest`在`stdName`包中，它的构造函数可以`package-private`访问。似乎`Main`类在某个包之外`stdName`，因此编译器抱怨构造函数在's 包`LogTest()`中不可见。`Main`将构造函数更改`LogTest`为公共。

# asp.net - 如何整齐地布局 HTML

> ID：13046567
> 
> 赞同：0
> 
> 时间：2012-10-24T09:39:57.870
> 
> 标签：asp.net, html, css, webforms, css-position

我不会做太多的 HTML。但我需要像 WinForms 一样以精确的方式布置表单。无论如何，这是我使用我所知道的小 CSS 和 HTML 的最佳尝试：

![在此处输入图像描述](../Images/b626a13de113a29f3774a043fbba77ac.png)

问题是，白色区域内的所有东西都是绝对布局的......所以每次我添加新内容时，我都必须调整所有周围的元素才能播放。此外，当我从 ASP.NET 代码隐藏填充复选框列表内容时，我并不总是知道会有多少项目，所以白框有时太短......所以我通过手动修复 CSS 中的新高度来解决这个问题......你知道的不好的方式。

请你能告诉我我*应该*怎么做吗？

CSS：

```
body
{
    margin: 0px;
    font-family: sans-serif;
    font-size: 13px;
    color: #111;
    background: #c4c4c4 url("bgd.jpg");
}

#header
{
    height: 80px;
    background-color: #333;
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.25);
    box-shadow: inset 0 -5px 10px rgba(0, 0, 0, 0.25), 0 1px 1px rgba(255, 255, 255, 0.3);
}

#wrapper
{
    padding: 20px 20px 20px 20px;
    height: auto;
}

#footer
{
    height: 40px;
    background-color: #333;
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.25);
    box-shadow: inset 0 -5px 10px rgba(0, 0, 0, 0.25), 0 1px 1px rgba(255, 255, 255, 0.3);
}

#copyright
{
    font-size: smaller;
    position: relative;
    top: 13px;
    color: #eee;
    text-shadow: 1px 1px #666;
    text-align: center;
}

.block
{
    margin: 0 auto;
    width: 440px;
    background-color: white;
    border-radius: 6px;
    box-shadow: 3px 3px 3px #888888;
}

.block > *
{
    position: relative;
}

#login
{
    width: 215px;
    height: 170px;
}

#login h2
{
    background: #353;
}

#controlpanel
{
    width: 235px;
    height: 175px;
}

#controlpanel h2
{
    background: rgb(165,0,0);
}

#options
{
    width: 273px;
    height:auto;
}

#options h2
{
    background: royalblue;
}

.block h2
{
    padding: 10px 15px;
    color: white;
    background: #261F1F;
    border-top-left-radius: 6px;
    border-top-right-radius: 6px;
}

h1, h2, h3
{
    color: #111111;
    margin: 0px;
}

h1
{
    color: white;
    position: absolute;
    top: 15px;
    left: 15px;
    font-size: 40px;
}

h2
{
    font-size: 22px;
}

a:link, a:visited, a:hover, a:active
{
}

a
{
    -moz-outline: none;
}

hr
{
    background: #dddddd;
    color: #dddddd;
}

.button
{
    font-weight: bold;
    font-size: 11px;
    height: 27px;
    color: #111111;
    padding: 2px 5px;
    background: url('btnbgd.png') top;
    border: 1px solid #C3C4BA;
    border-radius: 3px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    cursor: pointer;
}

.textbox
{
    height: 25px;
    padding: 0px 3px 0px 3px;
    margin: 0;
    border: 1px solid #DDD;
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
}

.label
{
    text-shadow: 2px 2px 2px #eee;
}

select 
{
    border: 1px solid #C3C4BA;
    border-radius: 3px;
    height: 25px;
}

.groupbox
{
    text-shadow: 2px 2px 2px #eee;
    left: 12px;
    width: 250px;
}

fieldset 
{
    border-radius: 3px;
}

.groupbox legend
{
    text-shadow: none;
    padding: 2px 4px 2px 4px;
    color: white;
    background-color: #C3C4BA; 
    border-radius: 3px;
}

#MainContentPlaceHolder_pnlXRefs legend
{
    text-shadow: none;
    padding: 2px 4px 2px 4px;
    color: white;
    background-color: red; 
    border-radius: 3px;
}

.footer
{
    display: table-cell;
    vertical-align: middle;
    text-align: center;
    margin-left: auto;
    margin-right: auto;
    height: 40px;
    background-color: #575654;
} 
```

HTML：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Options.aspx.cs" Inherits="Portal.Options"
    MasterPageFile="Portal.Master" Title="Price File Options" %>

<asp:Content runat="server" ContentPlaceHolderID="MainContentPlaceHolder">
    <div class="block" id="options">
        <h2>
            Options</h2>
        <asp:Label runat="server" Text="Acc No :" Style="top: 15px; left: 15px;" CssClass="label" />
        <asp:TextBox ID="txtAccNo" runat="server" Style="top: 15px; left: 15px; width: 110px"
            CssClass="textbox" />
        <asp:Button ID="btnGetColours" Style="top: 15px; left: 15px" CssClass="button" runat="server"
            Text="Refresh" onclick="btnGetColours_Click" />
        <asp:Panel ID="pnlBrembo" runat="server" GroupingText="BREMBO" Style="top: 25px;"
            CssClass="groupbox">
            <asp:CheckBoxList ID="lstBrembo" runat="server" />
        </asp:Panel>

        <asp:Label ID="Label1" runat="server" Text="Email :" Style="top: 85px; left: 15px;" CssClass="label" />
        <asp:TextBox ID="txtEmail" runat="server" Style="top: 85px; left: 24px; width: 185px"
            Text="a@b.com" CssClass="textbox" />

        </br>
        <asp:Button ID="btnGenerate" Style="top: 100px; left: 12px" CssClass="button" runat="server"
            Text="Generate & Send" OnClick="btnGenerate_Click" />
    </div>
</asp:Content> 
```

**更新 1：**

取后高度：2000px；甚至将其更改为白盒的自动我在底部的一些控件从白盒中推出：

![在此处输入图像描述](../Images/d17d3f1fa58207f6366a9e02e33051e5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:59:40.557

您需要重新设计和使用浮动，当页面上的项目数量不是静态时，它们可以更容易控制。

我做了一个[jsFiddle](http://jsfiddle.net/7SpuA/)来展示你能做什么。复制和粘贴`#item`div 任意多次，定位应该没问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:43:46.890

添加`height:auto`到内部块 div。

**[演示](http://jsfiddle.net/3Tj5x/)**

您可以通过在上面的演示中删除/添加列表项来检查高度变化/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:58:01.693

默认情况下，复选框内联显示（这意味着并排） - 您需要`display: block;`明确设置它们。

为此，我会将每个复选框字段包装在其自己的 div 中，然后对其设置样式以使其显示为块。

这是一个工作示例：http: [//jsfiddle.net/alexpls/Yr87Z/](http://jsfiddle.net/alexpls/Yr87Z/)

这里有一些关于 CSS`display`属性的信息：http: [//www.w3schools.com/cssref/pr_class_display.asp](http://www.w3schools.com/cssref/pr_class_display.asp)

# jquery - this.parent toggleClass 另一个子 div

> ID：13046569
> 
> 赞同：0
> 
> 时间：2012-10-24T09:40:00.647
> 
> 标签：jquery, html, css

我是 jQuery 新手，我无法弄清楚这一点。

当我单击第一个 toggleButton 时，我想定位第一个 textContainerCollapsed 并使用 textContainerExpanded 切换其类。如果我单击第二个 toggleButton，我希望第二个 textContainerCollapsed 用 textContainerExpanded 切换其类，依此类推...

但是，我得到的结果是，无论我单击哪个 toggleButton，所有带有 textContainerCollapsed 的 div 都会受到影响。

js

```
$(function() {
    $(".toogleButton") click(function() {

        $(".textContainerCollapsed").toogleClass("textContainerExpanded",500);

        //Also tried
        //$(this).parent(".textContainerCollapsed").toogleClass("textContainerExpanded",500);

        //Also tried
        //$(this).parent.children(".textContainerCollapsed").toogleClass("textContainerExpanded",500);

        //Also tried
        //$(this).parent.next(".textContainerCollapsed").toogleClass("textContainerExpanded",500);

        //Also tried
        //$(this).parent(".parent").next(".textContainerCollapsed").toogleClass("textContainerExpanded",500);

        //Also tried
        //$(this).parent(".parent").children(".textContainerCollapsed").toogleClass("textContainerExpanded",500);

        //Also tried
        //$(this).parent(".parent").find(".textContainerCollapsed").toogleClass("textContainerExpanded",500);

    });
}); 
```

html

```
<div class="parent">
    <div class="buttonContainer">
        <a href="#" class="toogleButton">
    </div>
    <div class="textContainerCollapsed">
        Some text
    </div>
</div>
<div class="parent">
    <div class="buttonContainer">
        <a href="#" class="toogleButton">
    </div>
    <div class="textContainerCollapsed">
        Some text
    </div>
</div> 
```

css

```
.textContainerCollapsed
{
    height: 0px;
    overflow: hidden;
}
.textContainerExpanded
{
    height: 100%;
    overflow: hidden;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:43:46.893

第一个版本使用`closest()`and `find()`：

```
$(this)
  .closest(".parent")
  .find(".textContainerCollapsed")
  .toogleClass("textContainerExpanded"); 
```

第二个版本使用`parent()`and `next()`：

```
$(this)
  .parent()
  .next()
  .toogleClass("textContainerExpanded"); 
```

第三个版本使用`parent()`and `siblings()`：

```
$(this)
  .parent()
  .siblings()
  .toogleClass("textContainerExpanded"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:56:34.453

```
$('.toogleButton').click(function() {
    $(this).parent().next()
           .toggleClass('textContainerCollapsed textContainerExpanded');
}); 
```

# android - Android 不再需要隐藏 com.test.testservice (pid:5232) #16

> ID：13046570
> 
> 赞同：2
> 
> 时间：2012-10-24T09:40:06.927
> 
> 标签：android

我写了一个**安卓应用（TestApp pid:5231），里面有一个名为“** **testservice** ”（pid:5232）的独立服务。现在，我遇到了一件奇怪的事情......当我在手机上运行我的应用程序超过 30 分钟时，“testservice”将被系统杀死。在日志中，我看到以下键：“**不再需要 com.xxx.xxx** ”。

google了一下那个key，有人说这种情况是内存不足造成的，就是AM机制。从我的日志文件中，我没有看到任何内存不足的通知...TT“**不再需要...** ”是正常情况或内存泄漏问题，有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:52:42.393

据我所知，Android 操作系统可以随时终止服务，具体取决于其策略。即使我已经在没有任何警告的情况下杀死了我长时间运行的进程。低内存问题几乎不是现代智能手机似乎有很多内存的原因。对我有用的唯一技巧是**Foreground Service**。根据 Android 文档，前台服务比后台服务具有更高的优先级。因此，您可能希望转移到前台服务来解决您的问题。

# java - 从字符串中删除某些大括号

> ID：13046572
> 
> 赞同：0
> 
> 时间：2012-10-24T09:40:10.417
> 
> 标签：java, json

我将从服务器接收此值作为字符串值

```
 String responserecivied = {"dummyuser":{"Number":1,"CUSID":1}} 
```

是否可以从上面的字符串中删除第一个和最后一个大括号，使其看起来像

```
 "dummyuser":{"Number":1,"CUSID":1} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:42:00.490

有可能的：

```
String s = yourString.substring(1, yourString.length() - 1); 
```

但是，请注意您的字符串实际上是 JSON，因此您可能需要使用 JSON 阅读器对其进行解析。

# javascript - javascript中的子字符串

> ID：13046575
> 
> 赞同：-6
> 
> 时间：2012-10-24T09:40:16.473
> 
> 标签：javascript

如何根据第 3 个字符子字符串，例如：我有字符串“aaa://Google/gmail”，我想获得一个新字符串，直到第 3 个“/”，新字符串 =“aaa://Google /"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:44:35.357

这样的事情应该做

```
var str = "aaa://Google/gmail",
    matches = str.split('/');
str = matches.slice(0, 3).join('/') + ( matches.length > 3 ? '/' : '' ) 
```

如果你不关心斜杠，它更简单：

```
 "aaa://Google/gmail".split('/').slice(0,3).join('/') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:53:24.097

我会尝试一个正则表达式：

```
var s = "aaa://Google/gmail";
var regex = /.*?\/.*?\/.*?\// // or more sophisticated: /(?:.*?\/){3}/
s.match(regex); 
```

另外，这看起来像你试图得到`document.location.host`（也许`document.location.protocol`）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:51:30.377

您还可以使用匹配：

```
var s = 'http://www.google.com/whatever';
var match = s.match(/^[^\/]*\/[^\/]*\/[^\/]*\//);

alert(match && match[0]);  // http://www.google.com/ 
```

# facebook - 为什么 facebook 脚本包含过于复杂？

> ID：13046580
> 
> 赞同：2
> 
> 时间：2012-10-24T09:40:32.380
> 
> 标签：facebook

Facebook like 按钮的文档建议包含以下脚本：

```
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

当我阅读它时，这只不过是`all.js`在页面上的第一个脚本标记之前添加外部文件。

```
<script id="facebook-jssdk" src="//connect.facebook.net/nl_NL/all.js#xfbml=1"></script> 
```

是否有任何理由不首先将已完成的脚本标签添加到页面源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T10:04:20.303

从[Javascript SDK 页面](https://developers.facebook.com/docs/reference/javascript/)；

> 此代码异步加载 SDK，因此它不会阻止加载页面的其他元素。

换句话说，是的，您很可能会立即将其包含在内，但用户会觉得您的页面加载速度较慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-29T16:21:14.777

这有什么区别：

```
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

还有这个：

```
<script src="//connect.facebook.net/nl_NL/all.js#xfbml=1" async></script> 
```

?

# jquery - Ajax 发布请求正在阻塞其他 ajax 请求

> ID：13046586
> 
> 赞同：1
> 
> 时间：2012-10-24T09:40:51.730
> 
> 标签：jquery, .net, ajax, iis, post

每次我的页面加载时，它都会向 IIS 服务器上托管的 WCF REST API 发送 3 个不同的请求。

2 个请求是 GET（短请求），一个是 POST，大约需要 5-10 秒。

页面加载后，用户可以对页面上的元素进行过滤和排序。

奇怪的是，一旦 post 运行，如果用户尝试过滤或排序，它触发的 get 请求会延迟到 POST 请求完成。

有任何想法吗？

**更新：**

这是发布请求代码：

```
$.ajax({
        url: fullURI,
        cache: false,
        type: 'POST',
        data: dataJson,
        dataType: "json",
        contentType: contentTypeParam,
        processData: true,
        beforeSend: function (xhr) {
            xhr.setRequestHeader('Authorization', Authorization);
            xhr.setRequestHeader('Accept', contentTypeParam);
        },

        success: function (data, textStatus, jqXHR) {
            callbackMethod(data, params);
        },

        error: function (jqXHR, textStatus, errorThrown) {
            restCallFailed(jqXHR, textStatus, errorThrown, isBusy, params, fullURI);
        }
    }); 
```

在加载此数据之前阻止页面不是一种选择，因此用户能够在请求完成之前与页面交互。

**更新：**

我找到了[这篇](https://stackoverflow.com/questions/6903318/multiple-ajax-requests-delay-each-other)文章，所以我开始在 .NET 中寻找等价物并找到了 [SessionMode](http://msdn.microsoft.com/en-us/library/system.servicemodel.sessionmode.aspx)。我尝试将其设置为`NotAllowed`但无济于事:(。任何人都知道.Net 的替代品是`session_write_close`什么？

# iphone - UIWebView 继续加载

> ID：13046588
> 
> 赞同：1
> 
> 时间：2012-10-24T09:41:05.297
> 
> 标签：iphone, objective-c, ios6

[我可以在任何网络浏览器http://pentharine.com/fb-inspiration-show.html](http://pentharine.com/fb-inspiration-show.html)上加载此链接，但是当我尝试在 UIWebView 上加载时，它会继续加载并在委托方法中抛出错误。使用iOS6。我发现了这个错误[https://developers.facebook.com/bugs/464805153548428](https://developers.facebook.com/bugs/464805153548428)但不确定这对我来说是否发生了同样的事情，因为我没有在我的 HTML 中使用 **fb:comments**插件。

`- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error`

错误看起来像这样

> 错误域=NSURLErrorDomain 代码=-999“操作无法完成。（NSURLErrorDomain 错误-999。）”UserInfo=0x1f5a7de0 {NSErrorFailingURLKey=https://m.facebook.com/plugins/comments.php?api_key=209286459119433&locale =en_US&sdk=joey&channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D11%23cb%3Df395f1a37c%26origin%3Dhttp%253A%252F...

# c++ - 在linux上用c ++进行arping

> ID：13046590
> 
> 赞同：0
> 
> 时间：2012-10-24T09:41:06.967
> 
> 标签：c++, linux, ethernet, libpcap, arp

我想知道是否有人知道用 c++ 而不是 c 编写的 arping api 或包装器？我已经查看了 libpcap 库，但如果可能的话，我想要一个 c++ 替代品

[http://www.tcpdump.org/pcap3_man.html](http://www.tcpdump.org/pcap3_man.html)

[ARP 的程序化使用](https://stackoverflow.com/questions/2451737/programmatic-use-of-arp)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:39:27.363

Libpcap 的 API 应该可以从 C++ 调用，至少在`extern "C"`头文件中有包装器的较新版本中是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:36:19.837

这看起来可以工作[http://libpcappp.sourceforge.net/](http://libpcappp.sourceforge.net/) libpcap++

# asp.net - 如何在 asp.net 中的 web.config 中使用连接字符串到 app.config

> ID：13046593
> 
> 赞同：0
> 
> 时间：2012-10-24T09:41:14.470
> 
> 标签：asp.net, web-config, app-config

我有一个带有 web.config 文件的 Web 应用程序和许多类库项目以及一些带有 app.config 文件的 Windows 服务。在每个配置文件中，我将连接字符串硬编码。所以现在，我想，应该只在主 web.config 文件中而不是在每个 app.config 文件中都有连接。并且想在 app.config 中使用来自 web.config 的连接字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:06:36.153

如果您的类库不是可执行项目，那么您可以从所有类库中删除连接字符串并在 web.config 中维护连接字符串。

如果您的类库不可执行，那么您也无法从类库中读取配置值。它将引用可执行的项目配置文件。[读](https://stackoverflow.com/questions/6012457/get-connection-string-from-app-config?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:48:40.223

如果您想要`generalize stringconnection` `section`所有应用程序，您可以在 中设置此部分`machine config`。

注意：

*   每个应用程序都有配置文件，在她的根目录下。
*   `=>`如果您想自定义文件夹元素的行为，您还可以在应用程序的不同文件夹中定义不同的配置文件。

链接： http: [//msdn.microsoft.com/en-us/library/1xtk877y (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/1xtk877y(v=vs.71).aspx)

# xml - 在 Wordpress 中使用 XSLT 解析 XML

> ID：13046601
> 
> 赞同：7
> 
> 时间：2012-10-24T09:41:43.260
> 
> 标签：xml, wordpress, xslt

我目前正在尝试加载外部 XML 文件并使用 XSL 样式表文件将它们解析为 HTML。我正在使用插件 XData Toolkit 来实现这一点，它工作正常。但是，该插件要求我为每个 XML 文件创建一个新查询并使用简码加载内容。由于我有很多 XML 文件，这种方法可能不太适合我。

有没有办法让我加载 XML 内容并通过传递参数（即 XML 文件名）在页面中使用 XSLT 动态解析它？

我可以用 PHP 脚本 XSLTProcessor 来做吗？我可以从 WordPress 的页面调用 PHP 脚本吗？如果是，我在哪里保存 PHP 脚本？也许是这样的？

```
<?php

    // Load the XML source
    $xml = new DOMDocument;
    $xml->load('file.xml');

    $xsl = new DOMDocument;
    $xsl->load('stylesheet.xsl');

    // Configure the transformer
    $proc = new XSLTProcessor;
    $proc->importStyleSheet($xsl); // attach the xsl rules

    echo $proc->transformToXML($xml);

?> 
```

我对 WordPress 和 PHP 不是很熟悉，所以欢迎任何建议。附加信息：使用 Pagelines 主题和 WordPress 3.4.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T05:59:59.217

[Wordpress 有一个内置的 XML 处理器](http://codex.wordpress.org/Function_Reference/fetch_feed)，如果您的最终目标是显示内容，它可能更易于使用。

如果包含您为转换提要或导入库而编写的 PHP 脚本更容易，您可以将脚本放在主题的文件夹中（即 /wp-content/themes/pagelines/）并使用[include_once](http://php.net/manual/en/function.include-once.php)调用它：

`include_once(get_template_directory().'/FILENAME.php');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-04T07:46:06.807

要在 php 脚本中使用参数（get），请使用：

$xmlFile = $_GET['xml-file'];

然后只需将您的代码更改为如下所示：

```
<?php

$xmlFile = $_GET['xml-file'];
$xmlDir  ='dirWithXmlFiles/';
$xmlUri  = $xmlDir . $xmlFile;

if(! file_exists($xmlUri)){
   echo 'some error';
   return;
}

// Load the XML source
$xml = new DOMDocument;
$xml->load($xmlUri);

$xsl = new DOMDocument;
$xsl->load('stylesheet.xsl');

// Configure the transformer
$proc = new XSLTProcessor;
$proc->importStyleSheet($xsl); // attach the xsl rules

echo $proc->transformToXML($xml); 
```

如果你需要添加一些动态内容，你可以通过传递如下参数来做到这一点：

```
$proc->setParam('someNameOfParameter', $someValueOfParameter); 
```

并在 xslt 中使用它，或者构建一个内容为 $xmlUri 且动态内容为 xml 的 xml 文件。

# c# - C# 中 |= 和 &= 赋值运算符的短路

> ID：13046602
> 
> 赞同：29
> 
> 时间：2012-10-24T09:41:44.020
> 
> 标签：c#, short-circuiting

我知道`||`并且`&&`在 C# 中被定义为短路运算符，并且这种行为是由语言规范保证的，但是`|=`和`&=`短路也一样吗？

例如：

```
private bool IsEven(int n)
{
    return n % 2 == 0;
}

private void Main()
{
    var numbers = new int[] { 2, 4, 6, 8, 9, 10, 14, 16, 17, 18, 20 };

    bool allEven = true;
    bool anyOdd = false;

    for (int i = 0; i < numbers.Length; i++)
    {
        allEven &= IsEven(numbers[i]);
        anyOdd |= !IsEven(numbers[i]);
    }
} 
```

当第 9 个条目被命中时，`allEven`变为 false，这意味着所有后续条目都是不相关的 -`allEven`对于将来对该表达式的所有调用，该值保证为 false。也是如此`anyOdd`，当它看到 9 时设置为 true，并且对于该表达式的所有后续调用都将保持为 true。

那么，do`&=`和`|=`shortcut，还是`IsEven`保证在每次迭代时都被调用？在这种情况下，语言规范中是否有任何定义的行为？是否存在这种短路会产生问题的极端情况？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-24T10:16:58.227

C# 规范保证双方从左到右只计算一次，并且不会发生短路。

> **5.3.3.21 嵌入表达式的一般规则**
> 
> 以下规则适用于这些类型的表达式：带括号的表达式（第 7.6.3 节）、元素访问表达式（第 7.6.6 节）、带索引的基本访问表达式（第 7.6.8 节）、递增和递减表达式（第 7.6.9 节） , §7.7.5), cast 表达式 (§7.7.6), 一元 +, -, ~, * 表达式, 二元 +, -, *, /, %, <<, >>, <, <=, >, >=、==、!=、is、as、&、|、^ 表达式（第 7.8 节、第 7.9 节、第 7.10 节、第 7.11 节）、**复合赋值表达式（第 7.17.2 节）**、检查和未检查表达式（第 7.6 节.12），以及数组和委托创建表达式（第 7.6.10 节）。
> 
> 这些表达式中的每一个都有一个或多个以固定顺序**无条件评估的子表达式。**

复合运算符的 C# 规范说：

> **7.17.2 复合赋值**
> 
> ...
> 
> 通过应用二元运算符重载决议（第 7.3.4 节）来处理表单的操作，`x op= y`就好像该操作是编写的一样`x op y`。然后，
> 
> *   如果所选运算符的返回类型可隐式转换为 的类型`x`，则该运算的计算结果为`x = x op y`，但`x`只计算一次。
>     
>     
> *   否则，如果所选运算符是预定义运算符，如果所选运算符的返回类型可显式转换为 的类型`x`，并且如果`y`可隐式转换`x`为`x = (T)(x op y)`，其中 T 是 的类型`x`，除了`x`只计算一次。
>     
>     
> 
> ...

在你的情况下`op`是`&`or `|`。短路行为反映了`&`/`|`而不是`&&`/ `||`。

* * *

请注意，这仅指在单线程场景中可见的行为。因此，如果右侧没有在这种情况下可观察到的副作用，编译器或 JITter 仍然可以自由地省略评估。

在您的示例中，编译器一旦知道结果就可以自由终止循环，因为没有这样的副作用。但这不是必须的。

特别是计时不算作这样的副作用，因此您不能依赖具有恒定运行时间的代码。这在安全环境中可能是有问题的，因为它会引入一个定时边信道。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-24T09:44:28.097

> 但是`|=`也会`&=`短路吗？

不`&=`， and`|=`是操作`&`and的等价物，而`|`不是短路逻辑运算符。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-24T09:47:45.497

不，`&=`and`|=`运算符不进行短路评估。

它们是伪运算符，编译器将其转换为`&`and`|`运算符的使用。

这段代码：

```
allEven &= IsEven(numbers[i]); 
```

完全等同于：

```
allEven = allEven & IsEven(numbers[i]); 
```

如果要进行短路检查，则必须使用运算符的短路版本将其写出来：

```
allEven = allEven && IsEven(numbers[i]); 
```

没有`&&=`伪运算符，但上面的代码正是编译器在有伪运算符时所做的。

# php - 如何从此数组中获取单个值

> ID：13046603
> 
> 赞同：-3
> 
> 时间：2012-10-24T09:41:43.717
> 
> 标签：php, codeigniter

当我打印数组 print_r($post); 时得到了这个结果

```
Array ( [0] => Array ( [0] => stdClass Object ( [subscriber_id] => 80010055 [cto_id] => [name] => n [mobile] => 1234564444 [state] => [city] => fsd [cto_subscriber_id] => 0 [password] => e10adc3949ba59abbe56e057f20f883e [email] => n@n.com [email_verified] => 1 [ip_address] => ::1 [last_login_time] => 2012-10-24 11:37:19 ) ) [1] => Array ( [0] => stdClass Object ( [subscriber_id] => 80010055 [ip_address] => [landline_number] => [sex] => 0 [dob] => 0000-00-00 00:00:00 [marital_status] => hfg [state] => [addres] => fgh [city] => fghfg [pincode] => fghfgh ) ) ) 
```

如何获得单个值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:43:28.170

将其类型转换为数组？

```
$arr = (array)$post[0][0]; 
```

然后你就可以像通过普通数组一样循环遍历它

```
foreach ($arr as $key => $value){....} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:43:21.770

```
foreach $post as $sub {
    foreach $sub as $single {
        echo $single;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T09:48:20.710

认为您应该首先学习[数组](http://nl3.php.net/manual/en/language.types.array.php)和[对象](http://nl3.php.net/manual/en/language.types.object.php)的基础知识。无论如何，为了获得让我们说subscriber_id的值，您应该使用以下内容：

```
$post[0][0]->subscriber_id 
```

首先你进入数组，然后从 Object 中取出值

# objective-c - 创建一个接受块作为参数的块

> ID：13046613
> 
> 赞同：3
> 
> 时间：2012-10-24T09:42:15.737
> 
> 标签：objective-c, syntax, objective-c-blocks

```
void (^block)();
void (^block1)(int); 
```

第一行声明一个块。

第二行声明一个接受整数参数的块。

现在我想要一个接受另一个块作为参数的块：

```
void (^block2)(<another block>); 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T09:44:22.127

使用 typedef，例如

```
typedef void (^BlockTypeToAccept)();
void (^block)(BlockTypeToAccept inner_block); 
```

或直接组合它们：

```
void (^block)( void (^inner_block)() ); 
```

# c# - 使用现有的主明细数据库在 EF 上选择错误

> ID：13046614
> 
> 赞同：1
> 
> 时间：2012-10-24T09:42:17.363
> 
> 标签：c#, sql, entity-framework, master-detail

Entity Framework v5 看起来很酷，我尝试使用**现有的**MSSQL (Azure) 数据库从 Linq 切换到 SQL。但是关于 EF 的教程太复杂了，无法遵循。

数据库模式非常简单，如下所示（由存在数据库生成）。

*Sheets*和*SheetDetails*表以一对多的关系连接。

```
CREATE TABLE [dbo].[Sheets] (
    [Id]          INT            IDENTITY (1, 1) NOT NULL,
    [Grade]       FLOAT (53)     CONSTRAINT [DF_Sheets_Grade] DEFAULT ((0)) NOT NULL,
    [Title]       NVARCHAR (255) CONSTRAINT [DF_Sheets_Title] DEFAULT ('') NOT NULL,
    [Description] NVARCHAR (255) NULL,
    [Difficulty]  SMALLINT       CONSTRAINT [DF_Sheets_Difficulty] DEFAULT ((0)) NOT NULL,
    [Writer]      NVARCHAR (255) CONSTRAINT [DF_Sheets_Writer] DEFAULT ('') NOT NULL,
    [Tag]         NVARCHAR (255) NULL,
    [Duration]    FLOAT (53)     CONSTRAINT [DF_Sheets_Duration] DEFAULT ((0)) NOT NULL,
    [Timestamp]   DATETIME       CONSTRAINT [DF_Sheets_Timestamp] DEFAULT ((0)) NOT NULL,
    [RowVersion]  ROWVERSION     NOT NULL,
    CONSTRAINT [PK_Sheets] PRIMARY KEY CLUSTERED ([Id] ASC)
);

CREATE TABLE [dbo].[SheetDetails] (
    [Id]                   INT        IDENTITY (1, 1) NOT NULL,
    [Score]                FLOAT (53) CONSTRAINT [DF_SheetDetails_Score] DEFAULT ((0)) NOT NULL,
    [Number]               SMALLINT   CONSTRAINT [DF_SheetDetails_Number] DEFAULT ((0)) NOT NULL,
    [SubNumer]             SMALLINT   NULL,
    [IsRandom]             BIT        CONSTRAINT [DF_SheetDetails_IsRandom] DEFAULT ((0)) NOT NULL,
    [AnswerType]           SMALLINT   CONSTRAINT [DF_SheetDetails_AnswerType] DEFAULT ((0)) NOT NULL,
    [RowVersion]           ROWVERSION NOT NULL,
    [SheetDetail_Sheet]    INT        CONSTRAINT [DF_SheetDetails_SheetDetail_Sheet] DEFAULT ((0)) NOT NULL,
    [SheetDetail_Question] INT        CONSTRAINT [DF_SheetDetails_SheetDetail_Question] DEFAULT ((0)) NOT NULL,
    CONSTRAINT [SheetDetail_Sheet] FOREIGN KEY ([SheetDetail_Sheet]) REFERENCES [dbo].[Sheets] ([Id]) ON DELETE CASCADE
); 
```

请注意，FK 名称是 SheetDetails 表中的 SheetDetail_Sheet。

结果图如下。 ![在此处输入图像描述](../Images/9eef1ce3ba3fb40438bea70f962e23a3.png)

接下来，也许我需要编写EntityTypeConfiguration。我将其作为问题 1 进行了尝试。

**问题 1.** 我编写模型创建配置如下，但没有运气。这是错的吗？很难知道如何用这个简单的数据库模型编写正确的配置。

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations.Add(new SheetsConfiguration());
        base.OnModelCreating(modelBuilder);
    }

    public class SheetsConfiguration : EntityTypeConfiguration<Sheets>
    {
        public SheetsConfiguration()
            : base()
        {
            HasKey(p => p.Id);
            Property(p => p.Id).HasColumnName("Id").HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity).IsRequired();
            Property(p => p.RowVersion).IsConcurrencyToken().IsRowVersion();
            HasOptional(p => p.SheetDetails).WithMany().Map(x => x.MapKey("SheetDetail_Sheet"));
            ToTable("Sheets");
        }
    } 
```

我使用执行简单查询

```
var result = _db.Sheets.Where(sheet => sheet.Id == id).ToList(); 
```

然后，执行查询时出现错误“列名 SheetDetail_Sheet 无效”，如下所示。

```
SELECT 
[Extent1].[Id] AS [Id], 
[Extent1].[Grade] AS [Grade], 
[Extent1].[Title] AS [Title], 
[Extent1].[Description] AS [Description], 
[Extent1].[Difficulty] AS [Difficulty], 
[Extent1].[Writer] AS [Writer], 
[Extent1].[Tag] AS [Tag], 
[Extent1].[Duration] AS [Duration], 
[Extent1].[Timestamp] AS [Timestamp], 
[Extent1].[RowVersion] AS [RowVersion], 
[Extent1].[SheetDetail_Sheet] AS [SheetDetail_Sheet]
FROM [dbo].[Sheets] AS [Extent1]
WHERE [Extent1].[Id] = @p__linq__0 
```

我可以理解，因为**SheetDetail_Sheet 只是一个 FK**，并不存在于 edmx 属性和数据库列中。我该如何解决？

我不想编辑自动生成的模型文件，因为它可以被覆盖。也许它似乎是通过 EntityTypeConfiguration 实现的。

**问题2.** 常用的主从数据库模型有什么有用的轻量级参考吗？

我在从现有数据库开始时遇到了麻烦。stackoverflow, asp.net, blogs, etc...很多教程，但很难找到像我这样的例子。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:07:53.930

我建议使用 Model First 来创建您的数据库模型（尽管您首先使用数据库）。获取数据库模型的好文章在[这里](http://msdn.microsoft.com/en-us/data/gg685489.aspx)。只需忽略 MVC 的内容，并在您使用 EF5 时停止“生成强类型实体类”，它将为您生成 POCO 类。Edmx 应该为您处理所有 FK 和属性，您无需担心配置器。

# c - 将数据发送到连接在我的服务器上的多个客户端

> ID：13046615
> 
> 赞同：0
> 
> 时间：2012-10-24T09:42:18.277
> 
> 标签：c, linux, sockets

我有客户端可以连接到的服务器应用程序。现在我希望当客户端连接时我可以向所有客户端发送数据。当我连接我的两个客户端时，我设法做到了。我发送的内容被我的两个客户端接收。但我的问题是当我连接client1然后将数据发送到服务器时，client1可以接收数据然后我连接client2并将数据发送到服务器。现在，当我从服务器向我的客户端发送数据时，只有 client1 可以接收数据，但是当我断开客户端 1 的连接时，client2 可以从服务器接收数据。

我怎样才能让它们同时工作？.. 另外，我怎样才能让我的服务器同时接受来自我的客户端的消息？..

这是我遇到问题的代码部分。

```
for(j=0;j<MAX_CLIENTS; j++)
Clients[j].connected_sock = -1;

do
   {

      fduse = fdin;

      printf("Waiting for Connection\n");
      err = select(sMax + 1, &fduse, NULL, NULL, NULL);

      if (err < 0)
      {
     perror("  select() failed");
     break;
      }

      DescRead = err;
      for (SockStorage=0; SockStorage <= sMax  &&  DescRead > 0; ++SockStorage)
      {

      if (FD_ISSET(SockStorage, &fduse))
      {

        DescRead -= 1;

        if (SockStorage == socketFd)
        {
           printf("  Listening socket is readable\n");

           do
           {

              NewSFD = accept(socketFd,(struct sockaddr *) &cli_addr, &clilen);
              if (NewSFD < 0)
              {
                 if (errno != EWOULDBLOCK)
                 {
                    perror("  accept() failed");
                    DCSERVER = TRUE;
                 }
                 break;
              }

                if(ClientCount < MAX_CLIENTS){

                for(loop = 0; loop <MAX_CLIENTS; loop++){

                if(Clients[loop].connected_sock<0){

                Clients[loop].connected_sock = NewSFD;

                break;

                }

              }

              ClientCount++;
              }
              else
              {

              printf("Maximum Client Reached.\n");
              char *sendtoclient = "Server full. ";
              send(NewSFD, sendtoclient, strlen(sendtoclient),0);
              close(NewSFD);
              break;

              }

                ip = ntohl(cli_addr.sin_addr.s_addr);
                printf("  Connection from %d.%d.%d.%d\n",
                    (int)(ip>>24)&0xff,
                    (int)(ip>>16)&0xff,
                    (int)(ip>>8)&0xff,
                    (int)(ip>>0)&0xff);
                    dlogs(ip);

              FD_SET(NewSFD, &fdin);
              if (NewSFD > sMax)
                 sMax = NewSFD;

           } while (NewSFD != -1);

        }

        else
        {

        int d;
        for(d=0; d<MAX_CLIENTS; d++){

        printf("Descriptor ID: %d\n", Clients[d].connected_sock);

        }

          pfds[0].fd = fd;
          pfds[0].events = POLLIN;
          pfds[1].fd = SockStorage;
          pfds[1].events = POLLIN;
          state = FALSE;

           do
           {
            rc = poll(pfds, 2, -1);

            if (pfds[0].revents & POLLIN)
             {

              while ((nbytes = read(fd, buf, sizeof(buf)-1)) > 0)
               {

                      buf[nbytes] = '\0';
                     printf("%s\n", buf);

                   }

              pfds[0].events = 0;
              pfds[1].events = POLLIN | POLLOUT;

               }

            if (pfds[1].revents & POLLIN)
            {
              err = recv(SockStorage, strbuf, sizeof(strbuf), 0);
              if (err < 0)
              {
                 if (errno != EWOULDBLOCK)
                 {
                    perror("  recv() failed");
                    state = TRUE;

                 }
                 break;
              }

               if (err == 0)
              {
                 printf("  Connection closed\n");
                 state = TRUE;

                 break;
              }

              dSize = err;
              printf("  %d bytes received\n", dSize);
            }

            if (pfds[1].revents & POLLOUT)
            {

             int s;
             for(s=0; s<MAX_CLIENTS; s++){

                if(Clients[s].connected_sock>0){

                err = send(Clients[s].connected_sock, buf, strlen(buf), 0);

              if (err < 0)
              {
                 perror("  send() failed");

                 state = TRUE;

                 break;
              }

                }

            }
            pfds[0].events = POLLIN;
            pfds[1].events = POLLIN;
            }

           } while (TRUE); 
```

这是我如何向我的客户发送数据。

```
 int s;
             for(s=0; s<MAX_CLIENTS; s++){

                if(Clients[s].connected_sock>0){

                err = send(Clients[s].connected_sock, buf, strlen(buf), 0);

              if (err < 0)
              {
                 perror("  send() failed");

                 state = TRUE;

                 break;
              }

                }

            } 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:20:32.093

通常有几种可能的解决方案：

1.  您可以为每个客户端连接使用单独的线程；
2.  您可以使用选择；
3.  您可以使用民意调查；
4.  你可以使用epoll；

在 Windows 环境中，还有一些其他的可能性，例如 IOCP。

每个提到的解决方案都有一些优点和缺点（您通常需要区分简单性和性能）。

您可以阅读一些网络编程教程以获取更多详细信息，例如[this](http://beej.us/guide/bgnet/)。

# iphone - 嵌套 UITableView 滚动结束后滚动 UIScrollView

> ID：13046616
> 
> 赞同：1
> 
> 时间：2012-10-24T09:42:18.980
> 
> 标签：iphone, uitableview, uiscrollview, scroll

我在 UIScrollView 中有可滚动的 UITableView。TableView 单独滚动。当用户滚动到 UITableView 的末尾并继续滚动时，我想让 UIScrollView 向下滚动。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-24T09:51:23.843

设置滚动视图内容大小。scrollview..contentSize = CGSizeMake(320,800);

# sql - 查询以获取我的 SQL Server 中的活动查询列表

> ID：13046619
> 
> 赞同：2
> 
> 时间：2012-10-24T09:42:38.853
> 
> 标签：sql, sql-server, sql-server-2008

我想获取在我的 SQL Server 中运行的活动查​​询的信息列表（以终止其中一些查询）。

我想要一个查询来获取这个必需的信息：

```
| query_id (if possible) | query_text | query_start_time | time_elapsed | host_name | user_group | query_status | 
```

我是 SQL Server 新手，请建议....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T09:47:32.010

尝试这个

```
select 
    r.session_id,
    r.status,
    r.command,
    r.cpu_time,
    r.total_elapsed_time,
    t.text
from sys.dm_exec_requests as r
    cross apply sys.dm_exec_sql_text(r.sql_handle) as t 
```

# html - 过滤用于显示的 HTML 用户输入

> ID：13046621
> 
> 赞同：0
> 
> 时间：2012-10-24T09:42:44.610
> 
> 标签：html, xss, filtering

我有一个表单，用户可以在其中输入文本，稍后将显示在网站的某个位置。我想允许这种类型的格式，而不仅仅是纯文本。我是否认为如果我过滤掉`<script>`,和标签`<link>`，我可以免受用户更改布局或注入 XSS 和其他恐怖事件的影响？`<style>``<object>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:44:08.917

就在发送问题之后，我意识到这显然是不够的，因为任何标签都可以有一个`onClick`带有 JS 代码的属性。
哎呀。

# jmeter - 如何在 JMeter 运行时更改结果文件名？

> ID：13046623
> 
> 赞同：6
> 
> 时间：2012-10-24T09:42:46.077
> 
> 标签：jmeter

我的测试计划中有一个采样器。我还有一个简单的数据编写器来保存请求和响应。

我在简单数据编写器的文件名字段中输入了“Results.xml”。当我运行测试计划时，会在指定路径中生成一个文本文件。

是否可以在运行时将文件名更改为“Threadgroupname_SamplerName_Results.xml”？

例如，我已将 Thread 组重命名为“Search”，将采样器重命名为“CurrencyConverter”。是否可以在运行时以“Search_CurrencyConverter_Results.xml”格式保存结果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T03:20:42.167

您可以在文件名输入字段中使用变量占位符和 __time 函数在运行时动态设置/更改它。像这样的东西：

```
${results.dir}/myresultfile_${__time(YMDHMS)}.xml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-02T22:04:00.380

根据[jmeter bugzilla](https://bz.apache.org/bugzilla/show_bug.cgi?id=55012)，不可能在文件名中包含线程组名称，因为“ResultCollector 在启动任何 ThreadGroup 之前在 StandardJMeterEngine 线程中初始化，因此`ctx.getThreadGroup()`将返回 null。”

# linux - 如何在 Linux 中永久导出变量？

> ID：13046624
> 
> 赞同：202
> 
> 时间：2012-10-24T09:42:50.733
> 
> 标签：linux, environment-variables, redhat

我正在运行 RHEL6，并且我已经导出了一个这样的环境变量：

```
export DISPLAY=:0 
```

当终端关闭时，该变量会丢失。如何永久添加此变量值以使该变量值始终存在于特定用户中？

* * *

## 回答 #1

> 赞同：230
> 
> 时间：2012-10-24T09:45:12.050

您可以将其添加到您的 shell 配置文件中，例如，`$HOME/.bashrc`或者在`/etc/environment`. 添加这些行后，更改不会立即反映在基于 GUI 的系统中，您必须退出终端或创建一个新终端，然后在服务器注销会话并登录以反映这些更改。

* * *

## 回答 #2

> 赞同：155
> 
> 时间：2015-07-21T18:31:55.753

您必须编辑三个文件以设置永久环境变量，如下所示：

*   ### ~/.bashrc

    当您打开任何终端窗口时，该文件将运行。因此，如果您希望在所有终端窗口中都有一个永久环境变量，您必须在此文件末尾添加以下行：

    ```
    export DISPLAY=0 
    ```

*   ### ~/.profile

    与**bashrc**相同，您必须将提到的命令行放在此文件的末尾，以便在您的操作系统的每次登录中都有您的环境变量。

*   ### /etc/环境

    如果您希望在每个窗口或应用程序（不仅仅是终端窗口）中都使用环境变量，则必须编辑此文件。在此文件末尾添加以下命令：

    ```
    DISPLAY=0 
    ```

    请注意，在此文件中您不必编写*导出*命令

通常，您必须重新启动计算机才能应用这些更改。但是您可以通过以下命令在**bashrc**和**配置文件**中应用更改：

```
$ source ~/.bashrc
$ source ~/.profile 
```

但是对于*/etc/environment*你别无选择，只能重新启动（据我所知）

# 一个简单的解决方案

我为这些程序编写了一个简单的脚本来完成所有这些工作。您只需设置环境变量的名称和值。

```
#!/bin/bash
echo "Enter variable name: "
read variable_name
echo "Enter variable value: "
read variable_value
echo "adding " $variable_name " to environment variables: " $variable_value
echo "export "$variable_name"="$variable_value>>~/.bashrc
echo $variable_name"="$variable_value>>~/.profile
echo $variable_name"="$variable_value>>/etc/environment
source ~/.bashrc
source ~/.profile
echo "do you want to restart your computer to apply changes in /etc/environment file? yes(y)no(n)"
read restart
case $restart in
    y) sudo shutdown -r 0;;
    n) echo "don't forget to restart your computer manually";;
esac
exit 
```

将这些行保存在 shfile 中，然后[使其可执行](https://askubuntu.com/questions/229589/how-to-make-a-file-e-g-a-sh-script-executable-so-it-can-be-run-from-termina)并运行它！

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-10-24T09:45:11.567

将该行添加到您的`.bashrc`或`.profile`. 设置的变量`$HOME/.profile`对当前用户有效，其中的变量`/etc/profile`是全局的。`.bashrc`每次 bash 会话开始时都会拉出。

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2013-12-02T16:10:32.650

在 Ubuntu 系统上，使用以下位置：

1.  系统范围的持久变量，格式为`JAVA_PATH=/usr/local/java`store in

    ```
    /etc/environment 
    ```

2.  引用变量的系统范围的持久变量，例如
    `export PATH="$JAVA_PATH:$PATH"`存储在

    ```
    /etc/.bashrc 
    ```

3.  用户特定的持久变量，格式为`PATH DEFAULT=/usr/bin:usr/local/bin`store in

    ```
    ~/.pam_environment 
    ```

有关 #2 的更多详细信息，请查看此 [Ask Ubuntu answer](https://askubuntu.com/questions/78856/referencing-environment-variables-in-etc-environment/385036#385036)。注意：#3 是 Ubuntu 建议，但在现实世界中可能存在安全问题。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2020-04-07T14:06:06.250

如果它适合任何人，这里有一些关于永久添加环境变量的简要指南。

```
vi ~/.bash_profile 
```

将变量添加到文件中：

```
export DISPLAY=:0
export JAVA_HOME=~/opt/openjdk11 
```

立即应用所有更改：

```
source ~/.bash_profile 
```

来源：[https ://www.serverlab.ca/tutorials/linux/administration-linux/how-to-set-environment-variables-in-linux/](https://www.serverlab.ca/tutorials/linux/administration-linux/how-to-set-environment-variables-in-linux/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-03-03T12:35:19.060

一个特定的例子：我安装了 Java 7 和 Java 6，我需要运行一些带有 6 的构建，其他带有 7 的构建。因此我需要动态更改`JAVA_HOME`，以便 maven 为每个构建选择我想要的。我做了以下事情：

*   创建的`j6.sh`脚本只是将`JAVA_HOME=...`路径导出到 j6 安装...
*   然后，正如上述评论之一所建议的那样，每当我需要 J6 进行构建时，我都会`j6.sh`在相应的命令终端中运行源代码。默认情况下，我`JAVA_HOME`的设置为 J7。

希望这可以帮助。

# java - Mybatis 一对多集合映射总是有一个默认实体

> ID：13046625
> 
> 赞同：7
> 
> 时间：2012-10-24T09:42:54.907
> 
> 标签：java, sql, spring, mybatis

我想重写我们的服务以使用 mybatis 映射和连接，以使我们的实体在数据库/mybatis 层上完整并完成。

```
<resultMap id="ParentMap" type="org.example.mybatis.Parent">
    <id column="id" jdbcType="VARCHAR" property="id" />
    <id column="Name" jdbcType="VARCHAR" property="name" />
    <id column="SurName" jdbcType="VARCHAR" property="surName" />

    <collection property="childs" column="ChildId"
        javaType="ArrayList" ofType="org.example.mybatis.Child"
        resultMap="org.example.ChildMap" />    
</resultMap>

<resultMap id="ChildMap" type="org.example.mybatis.Parent">

    <id column="id" jdbcType="VARCHAR" property="id" />
    <id column="Name" jdbcType="VARCHAR" property="name" />
    <id column="SurName" jdbcType="VARCHAR" property="surName" />
    <id column="Age" jdbcType="INTEGER" property="age" />
</resultMap>

<sql id="Parent_Column_List">
    p.Id, p.Name, p.SurName,
</sql>  

<sql id="Child_Column_List">
    c.Id, c.ParentId c.Name, c.SurName, c.Age
</sql>  

<select id="getParent" parameterType="java.lang.String" resultMap="ParentMap" >
    select 
    <include refid="Parent_Column_List"/>

    <include refid="Child_Column_List" />
    from Parent p

    left outer join Child c on p.Id = c.ParentId
    where p.id = #{id,jdbcType=VARCHAR} 
```

接下来的问题是：如果父级没有子级，则会将一些具有 null 或默认字段的默认实体添加到列表中。我知道这是外连接的本质，但是mybatis不是很聪明地理解这是假的吗？

有什么解决方法吗？我不能使用内部连接，因为父实体需要在结果中。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-24T09:59:11.577

您必须将属性`notNullColumn`放入您的集合中。所以你的 resultMap 将是：

```
<resultMap id="ParentMap" type="org.example.mybatis.Parent">
    <id column="id" jdbcType="VARCHAR" property="id" />
    <id column="Name" jdbcType="VARCHAR" property="name" />
    <id column="SurName" jdbcType="VARCHAR" property="surName" />

    <collection property="childs" column="ChildId" notNullColumn="id"
        javaType="ArrayList" ofType="org.example.mybatis.Child"
        resultMap="org.example.ChildMap" />    
</resultMap> 
```

请注意，您可能还会遇到这两个问题`id`，因此您可能必须`c.id as ChildId`在您的选择中有一个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:12:01.643

这应该默认工作。无需添加`notNullColumn`.

`MyBatis`默认检测空对象。

我刚刚在项目中包含了这个测试，请看一下。

[代码](http://code.google.com/p/mybatis/source/detail?r=5642)

# mysql - 在相似记录中选择具有最后创建日期的不同记录

> ID：13046634
> 
> 赞同：3
> 
> 时间：2012-10-24T09:43:45.860
> 
> 标签：mysql, distinct

我有一张桌子：`messages`具有这种结构：

```
`ID`   //  auto increment
`SenderUserID`   // foreign key: `ID` from `User` table
`ReceiverUserID`   // foreign key: `ID` from `User` table
`Message`   
`DateCreated`   // timestamp 
```

我需要通过以下条件从表中获取不同的 ReceiverUserID：

1.  发件人用户应该与收件人用户进行对话。
2.  选择的不同`ReceiverUserID`应该给我们最后的`DateCreated`信息。

因此，在结果中，我将按创建日期 DESC 排序用户最后一次对话。

当我在选择查询中不同时，mysql 返回第一条记录，但我需要`DateCreated`选择的最大 `ReceiverUserID 才能获得结果顶部的最后一条消息。

```
SELECT DISTINCT `m`.`ReceiverUserID` AS `ID` FROM `messages` `m`
WHERE (`m`.`SenderUserID` = :UserID OR `m`.`ReceiverUserID` = :UserID) 
ORDER BY `m`.`DateCreated` DESC

//:UserID means LogedInUserID 
```

**很高兴知道这将与 facebook 留言板完全一样。**

* * *

```
ID, SenderUserID, ReceiverUserID, Message,  DateCreated
1, 12, 11, 'Hi admin', 2012-10-24 11:07:00
2, 11, 12, 'Hi guy',  2012-10-24 11:08:00
3, 11, 13, 'Hello dear customer',  2012-10-24 11:12:00
4, 11, 13, 'Are you there?',  2012-10-24 11:13:00
5, 13, 11, 'Hiiii',  2012-10-24 11:14:00  // last conversation betwen 11 & 13 
```

当前登录用户ID：11

```
SELECT `m`.`ReceiverUserID` AS `ID`, MAX(`m`.`DateCreated`) as `lastmsg` 
FROM `messages` `m` WHERE (`m`.`SenderUserID` = 11 OR `m`.`ReceiverUserID` = 11) 
GROUP BY `m`.`ReceiverUserID` 
```

我们在这部分有问题：当接收者用户回答发送者消息时，它没有返回我们在 11 和 13 之间的最后一次对话，它不会在结果中看到

结果：

```
ID, lastmsg
12, 2012-10-24 11:08:00
13, 2012-10-24 11:13:00  // Should be: 13, 2012-10-24 11:14:00 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:06:45.533

如果您正在寻求一种能够保留所有当前功能和工作流程的方法，同时将数据保留在一个表中，我认为您已经非常接近了。

我不会让 conversationId 成为另一个表的键，而是让它指向开始对话的消息的 ID。这将在开始对话的消息和随后的所有消息之间创建父子关系。为了能够查看所有对话，您只需选择所有 conversationId 为空的消息。下面是 2 条消息对话的表示：

```
+----+---------+------+------------------+----------------+--------+----------+
| id | message | read | time             | conversationId | toUser | fromUser |
+----+---------+------+------------------+----------------+--------+----------+
| 1  |  test 1 |  0   | (some timestamp) |  null          |  3     |   4      |
| 2  |  test 2 |  0   | (some timestamp) |   1            |  4     |   3      |
+----+---------+------+------------------+----------------+--------+----------+ 
```

会话由用户 3 发起。会话中的所有消息都可以通过会话 ID 过滤。这种设计的一个限制是只有 2 个用户可以在对话之外。

更新

您可以通过以下方式获取给定对话 id 的最后一条消息：

```
 SELECT id, message 
   FROM userMessages 
   WHERE conversationId = {conversationId} 
   ORDER BY time DESC 
   LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:06:30.597

只用MAX？

```
 SELECT ReceiverUserID, MAX(DateCreated) AS LatestDateCreated
    FROM messages 
    WHERE (SenderUserID = :UserID OR ReceiverUserID = :UserID)
GROUP BY ReceiverUserID 
```

编辑

试试这个：-

```
SELECT IF( SenderUserID =11, ReceiverUserID, SenderUserID ) AS ID, MAX( DateCreated ) AS LatestDateCreated
FROM messages
WHERE (SenderUserID =11
OR ReceiverUserID =11
)
GROUP BY IF( SenderUserID =11, ReceiverUserID, SenderUserID ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T10:10:39.607

正如我提到的，你必须对 SenderUserID 做同样的事情......

```
SELECT `ID`, MAX(`lastmsg`) FROM 
(   SELECT `m`.`ReceiverUserID` AS `ID`, MAX(`m`.`DateCreated`) as `lastmsg` FROM `messages` `m`
    WHERE `m`.`SenderUserID` = :UserID
    GROUP BY `m`.`ReceiverUserID`
    UNION
    SELECT `m`.`SenderUserID` AS `ID`, MAX(`m`.`DateCreated`) as `lastmsg` FROM `messages` `m`
    WHERE `m`.`ReceiverUserID` = :UserID
    GROUP BY `m`.`SenderUserID`
) as table2 GROUP BY `ID` ORDER BY `lastmsg` 
```

# javascript - 模拟移动连接

> ID：13046639
> 
> 赞同：3
> 
> 时间：2012-10-24T09:44:03.090
> 
> 标签：javascript, ajax, mobile, connection, emulation

我们在移动页面上有大约 3-5 个 XHR 请求 - 有时其中一部分无法正常工作，仅在真实设备上，仅在慢速连接时。我想提高我们移动 Web 应用程序的可持续性。

所以我的问题是..如何模拟边缘连接，随机中断？

在像 MobiOne 这样的模拟器中 - 连接速度限制有效，但连接具有桌面稳定性 - 所以一切都运行缓慢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T16:21:31.840

您可以使用[Charles](http://www.charlesproxy.com)。这允许您模拟较慢的互联网连接，并且是跨平台的？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T00:03:54.053

为什么不写单元测试？您可以为您的 xhr 函数创建一个模拟/间谍。这样做，您可以强制破坏各种基于 ajax 的组件。这会迫使您始终通过重新尝试等操作来解决连接断开的问题，并确保在失败时出现加载屏幕和消息。

我认为通过采取这些步骤，您正在创建一个更简单的应用程序。一个糟糕的连接模拟器只会向你证明事情是不可预测的。如果您要修复一件事，那么下次您运行模拟器时，它只会无限地发现其他错误。

这是一个使用 jasmine/jquery 的示例：

```
it("Will allow failed ajax events", function() {
    var dfd = $.Deferred();
    spyOn($, "ajax").andReturn(dfd);
    dfd.reject(); // calls all failed events
});

it("Will allow done ajax events", function() {
    var dfd = $.Deferred();
    spyOn($, "ajax").andReturn(dfd);
    dfd.resolve(); // calls all done events
}); 
```

您的来源可能如下所示：

```
$.get("url").then(function() { 
    //done
}, function () {
    //fail
}); 
```

或者

```
$.ajax("url")
    .done(function() {})
    .fail(function() {}); 
```

或者

```
var dfd = $.post("url");
$.when(dfd).done(fn).fail(fn); 
```

这可以测试单个 ajax 事件。您还可以尝试潜在地概括一些默认行为。

如果您不使用 jquery，您仍然可以使用延迟。还有其他延迟库，或者您可以从 jquery 源中获取 dfd，这应该有助于解决所有这些问题。如果您正在使用其他 XHR 或自制的东西，您应该能够通过始终返回 dfds 并在正常回调时解决或失败它们来集成 2。

最后，要实际测试您的应用程序的功能，只需将正常的 url 暂时替换为不起作用的东西。并观察您的应用程序如何反应。如果您所有的 URL 都不正确，那基本上应该模拟没有互联网连接。

# vb.net - VBA - “不包含” - 过滤器（excel 2010）

> ID：13046645
> 
> 赞同：0
> 
> 时间：2012-10-24T09:44:14.113
> 
> 标签：vb.net, excel, vba, filter

> **可能重复：**
> [在自动筛选中组合多个排除 (<>) 条件](https://stackoverflow.com/questions/7662659/combine-multiple-exclusion-criteria-in-autofilter)

我正在尝试设置具有多个“不包含”值的过滤器。每次尝试运行它时，我似乎都会收到一个错误。我查了这个错误，这意味着 excel 没有找到任何值。当我尝试运行相同的代码时，只有一个值，它工作正常。有什么帮助/建议吗？

具有多个值的代码：

```
ActiveSheet.Range("$A$1:$J$218").AutoFilter Field:=5, Criteria1:=Array("<>*a*", "<>*b*", "<>*c*"), Operator:=xlFilterValues 
```

只有一个值的代码：

```
ActiveSheet.Range("$A$1:$J$218").AutoFilter Field:=5, Criteria1:="<>*a*", Operator:=xlFilterValues 
```

格列兹布尔基

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:05:01.443

你试过这个吗？

```
ActiveSheet.Range("$A$1:$J$218").AutoFilter Field:=5, Criteria1:="<>*a*", Operator:=xlAnd, Criteria2:="<>*b*", Operator:=xlAnd, Criteria3:="<>*c*", Operator:=xlFilterValues 
```

如果做不到这一点，您是否尝试过将您想要的作为宏录制为复制/调整录制的代码以执行您想要的操作？

# knockout.js - 在arrayA的迭代期间将值绑定到arrayB

> ID：13046646
> 
> 赞同：2
> 
> 时间：2012-10-24T09:44:17.923
> 
> 标签：knockout.js, knockout-2.0

我的视图模型有两个数组（简化版）

```
array_a = ko.observableArray(["a", "b", "c"]);
array_b = ko.observableArray(["Foo", "Bar", "Bash"]); 
```

我想在绑定到另一个值的同时迭代一个，所以我有这个

```
<ul data-bind="foreach: array_a">
<li><input data-bind="value: array_b()[$index()]" type="text"></li>
</ul 
```

这显示了值，但在输入文本更改时似乎没有更新它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T09:53:52.637

如果你想在你的中拥有可更新的值，`array_b`你需要将这些值包装到 observables 中（因为如果绑定源不是 ko 绑定是一种方式`ko.observable`）。

所以这应该工作：

```
array_b: ko.observableArray([ko.observable("Foo"), 
                             ko.observable("Bar"), 
                             ko.observable("Bash")]) 
```

硒在行动中[`JsFiddle`](http://jsfiddle.net/nMpYu/)。

# javascript - 如何使用 JavaScript 验证文本文件的内容？

> ID：13046647
> 
> 赞同：2
> 
> 时间：2012-10-24T09:44:19.490
> 
> 标签：javascript

如何使用 javascript 验证文本文件的内容？例如，我有一个文本文件包括：

```
6594567890
6594567891
6594567892
6594567893
92345678
92345679
92345680 
```

因此，我需要在某些条件下验证内容：

1.  如果它的前缀不等于 659 和 9 那么它将被拒绝。
2.  如果它的前缀等于 659 但长度不等于 10 那么它将被拒绝。
3.  如果它的前缀等于 9 但长度不等于 8 那么它将被拒绝。

目前我有以下使用JS的代码：

```
<input type="file" name="txt_list" id="txt_list" class="inpText" size="26" />
<script>
  var input_file = document.getElementById('txt_list');
  input_file.onchange = function() {
    var file = this.files[0];
    var reader = new FileReader();
    reader.onload = function(ev) {
      // Show content  (ev.target === reader)
      alert(ev.target.result);
    };
    reader.readAsText(file);
  };
</script>
<font color="FF0000" style="font-weight:bolder;">
  <b>* Compulsory</b>&nbsp;&nbsp;&nbsp;&nbsp;
</font>
```

任何想法如何做到这一点？jsfiddle 或示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T10:23:17.087

猜猜它正在阅读您关心的每一行？`ev.target.result`是一长串字符，必须分成字符串。我不太清楚你将如何评估这些线条，所以请耐心等待

```
<input type="file" name="txt_list" id="txt_list" class="inpText" size="26" />
<script>
  var input_file = document.getElementById('txt_list');
  input_file.onchange = function() {
    var file = this.files[0];
    var reader = new FileReader();
    reader.onload = function(ev) {
      var str = '';
      for (var i = 0; i < ev.target.result.length; i++) {
        str += ev.target.result[i];
        if (ev.target.result[i] == "\n") { //new line
          //probably very misunderstood evaluation 
          if (((str.substr(4, 7) == '659') && (str.length != 10)) ||
            ((str.substr(4, 7) != '659') && (str.length == 9)) ||
            ((str.substr(4, 5) == '9') && (str.length != 8))) {
            alert('rejected');
          } else {
            alert('accepted');
          }
          //reset the line
          str = '';
        }
      }
    };
    reader.readAsText(file);
  };
</script>
<font color="FF0000" style="font-weight:bolder;">
  <b>* Compulsory</b>&nbsp;&nbsp;&nbsp;&nbsp;</font>
```

# javascript - 弹出窗口不调整大小？HTML

> ID：13046654
> 
> 赞同：0
> 
> 时间：2012-10-24T09:44:56.640
> 
> 标签：javascript, html, popup

我正在使用从 CRM 系统启动的一个非常简单的表单，该表单打开一个 IE 8 页面，但即使使用 resizeable=yes 它也不允许我调整大小？

有什么我遗漏的，还是只是因为它不是 100% 工作，因为它是从我们的 CRM 系统启动的？

```
<form action="http://intranet-srv02/reports/selecttag.php" method="post" onsubmit="target_popup(this)">
<input name="userid" type="hidden" value="2" />
<input type="submit" value="DO NOT USE - TEST" />
</form>
<script type="text/javascript">
function target_popup(form) {
    window.open('', 'formpopup', 'width=1200,height=750,resizeable=yes,scrollbars');
    form.target = 'formpopup';
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:47:43.287

它是“可调整大小的”而不是“可调整大小的”

用这个：

```
function target_popup(form) {
    window.open('', 'formpopup', 'width=1200,height=750,resizable=yes,scrollbars=yes');
    form.target = 'formpopup';
} 
```

# ios - MPMoviePlayerController 全屏不适用于调整后的 VC 层次结构

> ID：13046657
> 
> 赞同：0
> 
> 时间：2012-10-24T09:44:58.947
> 
> 标签：ios, objective-c, iphone

我们正在动态设置我们的应用层次结构，因此它们不是持久的 Tab/Nav 视图控制器，它依赖于数据库内容。

我们最近添加了一项功能，该功能可以打开 VC 以允许用户选择要显示的数据库（布局/内容），但这会导致在全屏时视频播放中断。

以前（现在）我们在导航控制器（在选项卡中）中播放视频，并带有自定义控件覆盖。这一切都很好。

在控制栏上有一个全屏按钮，可以触发 MPC 标准全屏模式。以前它工作正常，但现在声音继续在后台播放，但没有显示电影或覆盖层 - 我仍然可以看到我们的标签栏，它是可点击的。

这可能与窗口上的视图顺序有关吗？如果是这样，我怎样才能拿起正确的把它向前推进？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:05:02.100

您可以将任何子视图转发`[view_1 bringSubviewToFront:view_2];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:06:55.520

我们发现了问题......

那是我们最终没有将 window.rootViewController 设置为新的视图控制器，我们只是将其视图添加到 windows 子视图中

这解决了这个问题（就在我编写了自定义全屏模式之后）以及我们在旋转时遇到的问题

# java - 未找到 Java-Selenium WebElement 错误

> ID：13046659
> 
> 赞同：0
> 
> 时间：2012-10-24T09:45:00.413
> 
> 标签：java, selenium, element

我对硒有一些问题。

我想`String content`用 id="source" 向我的网络上的一个元素发送一些内容，并在此处提交是我的代码

```
driver.get("http://hiriji.com/");
        WebElement viet = driver.findElement(By.id("source"));
        viet.sendKeys(content);
        viet.submit(); 
```

它运作良好，直到内容太大。

后

```
viet.sendKeys(content); 
```

网页突然变成 404 错误页面。所以它在

```
viet.submit(); 
```

我的问题是如何忽略这个错误并继续下面的代码。我不需要将所有内容都发送到网络上，如果它太大可以忽略...

堆栈跟踪说：

```
Exception in thread "main" org.openqa.selenium.StaleElementReferenceException: Element not found in the cache - perhaps the page has changed since it was looked up
Command duration or timeout: 392 milliseconds
For documentation on this error, please visit: http://seleniumhq.org/exceptions/stale_element_reference.html
Build info: version: '2.25.0', revision: '17482', time: '2012-07-18 21:09:54'
System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.6.0_31'
Driver info: driver.version: RemoteWebDriver
org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:145)
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:498)
    at org.openqa.selenium.remote.RemoteWebElement.execute(RemoteWebElement.java:244)
    at org.openqa.selenium.remote.RemoteWebElement.submit(RemoteWebElement.java:81)
    at RecieveData.TranslateStatus.translateViToEn(TranslateStatus.java:22)
    at RecieveData.htmlParser.parseHtml(htmlParser.java:43)
    at RecieveData.AddressToHtml.parseHtmlStatus(AddressToHtml.java:105)
    at RecieveData.MainProcess.main(MainProcess.java:29)
Caused by: org.openqa.selenium.remote.ErrorHandler$UnknownServerException: Element not found in the cache - perhaps the page has changed since it was looked up
Build info: version: '2.25.0', revision: '17482', time: '2012-07-18 21:09:54'
System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.6.0_31'
Driver info: driver.version: unknown 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:02:45.987

可能原因：手术后

```
driver.get("http://hiriji.com/"); 
```

您没有得到应该在页面上加载的所有元素。添加隐式等待 `driver.manage().timeouts().implicitlyWait(5,TimeUnit.SECONDS);`以验证我是否正确

```
driver.get("http://hiriji.com/");
driver.manage().timeouts().implicitlyWait(5,TimeUnit.SECONDS);
 WebElement viet = driver.findElement(By.id("source"));
        viet.clear();
        viet.sendKeys(content);
        viet.submit();//or as alternative try to click on 'submit' button 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:06:21.710

只需检查内容的长度。如果它的长度超出您的限制，请不要让表单提交。

```
if(content.length()<=acceptableLimit)
viet.sendKeys(content);
    viet.submit(); 
```

# android - 保存滚动页面phonegap

> ID：13046660
> 
> 赞同：3
> 
> 时间：2012-10-24T09:45:07.567
> 
> 标签：android, jquery, ios, cordova, mobile

我在应用程序中使用phonegap，这是listview jquery中的页面显示项目之一。如果我有 50 个项目并且用户滚动并按下项目，则会显示详细页面项目。我的问题，我们是否可以保存上一个最后位置滚动，所以当用户按下后退按钮时，他们不会再看到第一项。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:39:27.193

如果您使用的是 JQuery Mobile，则可以在隐藏页面时存储当前滚动位置（在其中添加了检查，因为您可能希望某些页面保留滚动位置，而在其他时候您想让它重置） ：

```
$("#myListPage").bind('pagebeforehide', function (event, data) {
    if (data.nextPage[0].id === "myItemDetailsPage") {
        // Store the scroll position, in case we want to go back
        myPage.scrollPosition = $("#myListPage-myList").scrollTop();
    }
}); 
```

然后当页面显示时：

```
$("#myListPage").bind('pageshow', function () {
    $("#myListPage-myList").scrollTop(myPage.scrollPosition);
}); 
```

虽然我应该说有时我不需要这样做，而且我经常不得不做相反的事情——调用`scrollTop(0)`强制页面返回顶部。

# html - 100% 容器内 100% 的 Div 高度？

> ID：13046668
> 
> 赞同：0
> 
> 时间：2012-10-24T09:45:34.763
> 
> 标签：html, css

```
<div id="container">

   <div id="content">
   //my content
   </div>

</div>

#container{
 height:100%!important;
 min-height:700px!important;
}
#content{
 height:100%!important;
} 
```

我有一个容器 div，里面有一个内容 div，无论我做什么，我都无法让内容 div 与容器 div 的高度相同。我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:16:37.823

只需将 min-height:inherit 添加到内容样式

```
#content{
 height:100%!important;
 min-height:inherit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:47:23.690

添加`height:100%`到 html 和正文

```
html, body{height:100%} 
```

**[演示](http://jsfiddle.net/vqjYu/1/)**

* * *

您也可以将 min-height:700px （或继承）添加到子 div。我希望它能解决问题。

[**更新的演示**](http://jsfiddle.net/vqjYu/2/)

向内部 div 添加更多内容，以检查`height:100%`内容增加时的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:50:03.627

```
<style>
#container{
height:700px !important;
 border:1px solid red;
}
#content{
 height:100%!important;
 border:1px solid green;
}
</style>
<div id="container">
   <div id="content">
    //my content 
   </div>

</div> 
```

# jakarta-ee - PrimeFaces dataTable：使用 GlassFish + Mojarra 由 ClassCastException（无堆栈跟踪）引起的奇怪 ELException

> ID：13046670
> 
> 赞同：2
> 
> 时间：2012-10-24T09:45:40.857
> 
> 标签：jakarta-ee, jsf-2, primefaces, glassfish, el

我们有一个碰撞实体列表，您可以在 PrimeFaces 中单选`<p:datatable>`。下面是一个显示相关历史记录和文件附件的字段集。

这是 JSF 页面（附件数据表比其他数据表更重要）：

```
<h:panelGrid>

    <p:scrollPanel mode="native">
        <p:dataTable value="#{collisionManager.selectedCollisions}"
                     var="cln"
                     selection="#{collisionManager.selectedStateChangeCollision}" 
                     selectionMode="single"
                     rowKey="#{cln.id}"
                     paginator="true"
                     paginatorPosition="bottom"
                     rows="5">

            <p:ajax event="rowSelect" process="@this" update="@form" />

            <p:column headerText="ID">
                <h:outputText value="#{cln.id}" />
            </p:column>

            ...

        </p:dataTable>
    </p:scrollPanel>

    <p:fieldset legend="History and Attachments">

        <p:tabView widgetVar="stateChangeTabView"
                   dynamic="true"
                   cache="false">

            <p:tab title="History">
                ...
            </p:tab>

            <p:tab title="Attachments">
                <p:dataTable id="attachments-datatable"
                             value="#{attachmentManager.activeAttachments}"
                             var="att"
                             paginator="true"
                             paginatorPosition="bottom"
                             rows="3">

                    <p:column headerText="File Name">
                        <h:outputText value="#{att.fileName}" />
                    </p:column>

                    <p:column headerText="Deleted">
                        <h:outputText value="#{att.deleted}" />
                    </p:column>

                    <p:column headerText="Marked">
                        <h:outputText value="#{attachmentManager.markedToDelete(att)}" />
                    </p:column>

                    <p:column headerText="Actions">
                        <p:commandButton icon="ui-icon ui-icon-trash"
                                         title="Mark to delete"
                                         action="#{attachmentManager.markToDelete(att)}"
                                         process="@this"
                                         update="@form"
                                         rendered="#{not attachmentManager.markedToDelete(att)}">
                        </p:commandButton>
                        <p:commandButton icon="ui-icon ui-icon-cancel"
                                         title="Unmark to delete"
                                         action="#{attachmentManager.unmarkToDelete(att)}"
                                         process="@this"
                                         update="@form"
                                         rendered="#{not attachmentManager.markedToDelete(att)}">
                        </p:commandButton>
                    </p:column>
                </p:dataTable>
            </p:tab>

        </p:tabView>

    </p:fieldset>

</h:panelGrid>

<!-- SAVE + CANCEL buttons here --> 
```

这是bean（在类路径中`AttachmentManager`有 Seam 3 Faces以便兼容，在这里应该无关紧要）：`@Named``@Viewscoped`

```
@Named
@ViewScoped
public class AttachmentManager implements Serializable
{
    // attachments to be deleted
    private List<Attachment> markedAttachments;

    public void markToDelete( Attachment attachment )
    {
        if ( !this.markedAttachments.contains( attachment ) )
        {
            this.markedAttachments.add( attachment );
        }
    }

    public void unmarkToDelete( Attachment attachment )
    {
        this.markedAttachments.remove( attachment );
    }

    public boolean markedToDelete( Attachment attachment )
    {
        return this.markedAttachments.contains( attachment );
    }
} 
```

当评估行中页面中的表达式时问题开始（附件表）：

```
<h:outputText value="#{attachmentManager.markedToDelete(att)}" /> 
```

上面代码中的哪个表达式实际上被执行并不重要，它们基本上都失败了：

```
javax.el.ELException: /view/changeData.xhtml @184,102 value="#{not attachmentManager.markedToDelete(att)}": java.lang.ClassCastException: com.company.project.model.Attachment cannot be cast to com.company.project.model.Collision 
```

请注意，绝对没有堆栈跟踪 - 至少不是我能够找到一个。我什至查看了服务器响应（AJAX），我们注意到一些异常有时会被吞没——什么都没有。

我发现了另外两个与我的问题相关的帖子（也未解决）：

[http://forum.primefaces.org/viewtopic.php?f=3&t=4270](http://forum.primefaces.org/viewtopic.php?f=3&t=4270)

[http://forum.primefaces.org/viewtopic.php?f=3&t=5923](http://forum.primefaces.org/viewtopic.php?f=3&t=5923)

**问：** 有人知道 EL 表达式有什么问题`#{not attachmentManager.markedToDelete(att)}`吗？

*Q2：* 堆栈跟踪可能会消失在哪里，或者更具体地说，我如何/在哪里找到它？

我们所处的环境是：GlassFish 3.1.2.2、Mojarra 2.1.6、PrimeFaces 3.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:18:09.140

我用版本 2.1.14 交换了服务器的 Mojarra，经过几次重新加载/重试后，stacktrace 终于出现了。（在最初的几次尝试中都是一样的，也许 GlassFish 缓存了它的 JAR 的相关部分）

之后它就变得尽可能简单了：我将 equals 方法从`Collision`to复制了出来，`Attachment`并将强制转换`Collision`保持不变。这就是导致CCE的原因。

但是，堆栈跟踪的去向仍然是个谜……

# c# - 当通过 JQuery 输入文本时，在 onLoad() 方法中无法获得正确的文本字段输入

> ID：13046681
> 
> 赞同：0
> 
> 时间：2012-10-24T09:46:11.477
> 
> 标签：c#, jquery, asp.net

我正在尝试将 JQuery 在文本字段中输入的值传递给我的 ASP.NET 后端处理程序的文本 INPUT，该处理程序查看相应的 ASP.NET 控件的 Text 属性。

事实证明

```
 $("#inputid").val(mynewvalue); 
```

call 确实更新了我的文本字段中的可见文本，但是当我在回发后调用的 onLoad() 方法中检查 asp.net 中的控件的 Text 函数时，我没有收到它。

当 onLoad 方法完成并发生进一步的回发工作时，即调用其他例程时，只有文本框的 Text 属性返回 jquery 在此处输入的内容。

也许我只是无权检查 onLoad() 方法中的这些字段？

但是，我需要在 onLoad 阶段获得该 Text 属性。我在想是否有某种方法可以修改 VALUE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:50:04.237

你的文本框控件上有 runat="server" 吗？我的猜测是你没有（如果我理解这个问题！）

# post - 在 httpwebrequest 文件上传中启用 POST

> ID：13046686
> 
> 赞同：0
> 
> 时间：2012-10-24T09:46:39.353
> 
> 标签：post, file-upload, iis-7, httpwebrequest

我需要在服务器上上传文件（具有不同的扩展名，即 .txt、.jpg、.pdf ......）。我创建了一个接受 http 请求的站点，并将虚拟目录映射到物理目录。所有这些在下载中都可以正常工作，现在我必须实现上传。

这是我的代码

```
private void UploadFile(string uploadFileName, string localFileName)
    {
        //long length = 0;
        string boundary = "----------------------------" + DateTime.Now.Ticks.ToString("x");
        HttpWebRequest httpWebRequest2 = (HttpWebRequest)WebRequest.Create(uploadFileName);
        httpWebRequest2.ContentType = "multipart/form-data; boundary=" + boundary;
        httpWebRequest2.Method = "POST";
        httpWebRequest2.KeepAlive = true;
        httpWebRequest2.Credentials = new NetworkCredential("USER", "PASSWORD", "DOMAIN"); 

        Stream memStream = new System.IO.MemoryStream();

        byte[] boundarybytes = System.Text.Encoding.ASCII.GetBytes("\r\n--" +boundary + "\r\n");

        string formdataTemplate = "\r\n--" + boundary +"\r\nContent-Disposition: form-data; name=\"{0}\";\r\n\r\n{1}";

        memStream.Write(boundarybytes, 0, boundarybytes.Length);

        string headerTemplate = "Content-Disposition: form-data; name=\"{0}\"; filename=\"{1}\"\r\n Content-Type: application/octet-stream\r\n\r\n";

        string header = string.Format(headerTemplate, "uplTheFile", localFileName);

        byte[] headerbytes = System.Text.Encoding.UTF8.GetBytes(header);

        memStream.Write(headerbytes, 0, headerbytes.Length);

        FileStream fileStream = new FileStream(localFileName, FileMode.Open, FileAccess.Read);
        byte[] buffer = new byte[1024];

        int bytesRead = 0;

        while ((bytesRead = fileStream.Read(buffer, 0, buffer.Length)) != 0)
        {
            memStream.Write(buffer, 0, bytesRead);
        }

        memStream.Write(boundarybytes, 0, boundarybytes.Length);

        fileStream.Close();

        httpWebRequest2.ContentLength = memStream.Length;

        Stream requestStream = httpWebRequest2.GetRequestStream();
        //error returned in lenght field: "This stream does not support seek operations."

        memStream.Position = 0;
        byte[] tempBuffer = new byte[memStream.Length];
        memStream.Read(tempBuffer, 0, tempBuffer.Length);
        memStream.Close();
        requestStream.Write(tempBuffer, 0, tempBuffer.Length);
        requestStream.Close();

        WebResponse webResponse2 = httpWebRequest2.GetResponse();
        //error returned from getResponse: "The remote server returned an error: (405) Method Not Allowed."
        //I guess cause my folder is in read only

        Stream stream2 = webResponse2.GetResponseStream();
        StreamReader reader2 = new StreamReader(stream2);

        MessageBox.Show(reader2.ReadToEnd());

        webResponse2.Close();
        httpWebRequest2 = null;
        webResponse2 = null; 

    } 
```

首先我得到这个错误：远程服务器返回一个错误：（405）方法不允许。所以我尝试通过在网站上添加映射来启用 POST。

现在在 te 服务器上的文件夹中，我有一个 web.config 文件，即：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <configuration>
    <system.webServer>
    <directoryBrowse enabled="true" />
    <handlers>
        <add name="File TXT" path="*.*" verb="*" modules="IsapiModule" scriptProcessor="C:\Windows\System32\inetsrv\asp.dll" resourceType="Unspecified" requireAccess="Script" preCondition="bitness64" />
    </handlers>
</system.webServer>
</configuration> 
```

这样我没有收到任何错误，但应用程序没有上传任何文件。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:01:54.267

一个更简单的解决方案是使用 System.Net.Webclient 类来上传文件。

```
System.Net.WebClient client = new System.Net.WebClient();

client.UploadFile("www.myfileuploadendpoint.com",@"c:\myfiletoupload.txt"); 
```

客户端还有一个 OnUploadFileCompleted 事件，该事件将在完成后调用处理程序。

```
client.OnUploadFileCompleted  += UploadCompleted(sender,args) => { //do whatever you want} 
```

这将节省您的代码和错误。祝你好运！:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-11T06:19:08.103

上述两个示例都不起作用，

1.  “远程服务器返回错误：(405) Method Not Allowed。” 是在尝试上述两个代码时发现的异常

期待有人分享他们对这些例外的想法，拜托。

rgds, 蒂鲁

# c++ - 与 php zend libs 和 c++ libs(ctime) 冲突以构建 php 扩展

> ID：13046694
> 
> 赞同：0
> 
> 时间：2012-10-24T07:50:40.857
> 
> 标签：c++, php

我要为 PHP 5.3.x 构建一个扩展

当我在没有 vc++ lib 的情况下构建时一切正常。

```
error C2039: 'clock_t' : is not a member of '`global namespace''
error C2873: 'clock_t' : symbol cannot be used in a using-declaration
error C2039: 'asctime' : is not a member of '`global namespace''
error C2873: 'asctime' : symbol cannot be used in a using-declaration 
```

和...

我只包括并得到了这个错误。我知道这个问题来自我在 PHP zend 引擎所需的属性中包含头文件，但我不知道如何解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:22:57.970

更改包含路径，例如：

```
#include "C:\\Program Files\\Microsoft Visual Studio 9.0\\VC\\include\time.h" 
```

# glassfish - Orbeon 4 M11 + GlassFish 3.1.2 导致 HTTPURLConnection 错误

> ID：13046698
> 
> 赞同：0
> 
> 时间：2012-10-24T09:47:22.973
> 
> 标签：glassfish, liferay, orbeon

我正在使用 Orbeon 4 M11（但我也尝试过 M9）、GlassFish 3.1.2 和 Liferay 6.1 GA2。在 GF 上部署 LR 和 Orbeon 并重新启动 GF 后，我去了：

```
 http://host:8080/orbeon/home/ 
```

一切都很好，但是当我尝试使用构建器时

```
 http://host:8080/orbeon/fr/orbeon/builder/summary 
```

我有错误

> 糟糕，找不到请求的页面！

我在 orbeon.log 中找到了这个：

```
2012-10-24 10:39:22,805 INFO  ProcessorService  - /fr/orbeon/builder/summary - Received request
2012-10-24 10:39:28,425 ERROR XFormsServer  - xforms-submit-error - setting throwable {throwable: "
+----------------------------------------------------------------------------------------------------------------------+
|An Error has Occurred                                                                                                 |
|----------------------------------------------------------------------------------------------------------------------|
|Password must not be null                                                                                             |
|----------------------------------------------------------------------------------------------------------------------|
|Application Call Stack                                                                                                |
|----------------------------------------------------------------------------------------------------------------------|
|----------------------------------------------------------------------------------------------------------------------|
|Exception: java.security.UnrecoverableKeyException                                                                    |
|----------------------------------------------------------------------------------------------------------------------|
|sun.security.provider.JavaKeyStore                 |engineGetKey                  |JavaKeyStore.java             | 107|
|sun.security.provider.JavaKeyStore$JKS             |engineGetKey                  |JavaKeyStore.java             |  38|
|java.security.KeyStore                             |getKey                        |KeyStore.java                 | 763|
|com.sun.net.ssl.internal.ssl.SunX509KeyManagerImpl |<init>                        |SunX509KeyManagerImpl.java    | 113|
|com.sun.net.ssl.internal.ssl.KeyManagerFactoryImpl$|engineInit                    |KeyManagerFactoryImpl.java    |  48|
|javax.net.ssl.KeyManagerFactory                    |init                          |KeyManagerFactory.java        | 239|
|com.sun.net.ssl.internal.ssl.DefaultSSLContextImpl |getDefaultKeyManager          |DefaultSSLContextImpl.java    | 170|
|com.sun.net.ssl.internal.ssl.DefaultSSLContextImpl |<init>                        |DefaultSSLContextImpl.java    |  40|
|sun.reflect.NativeConstructorAccessorImpl          |newInstance0                  |NativeConstructorAccessorImpl.|    |
|sun.reflect.NativeConstructorAccessorImpl          |newInstance                   |NativeConstructorAccessorImpl.|  39|
|sun.reflect.DelegatingConstructorAccessorImpl      |newInstance                   |DelegatingConstructorAccessorI|  27|
|java.lang.reflect.Constructor                      |newInstance                   |Constructor.java              | 513|
|java.lang.Class                                    |newInstance0                  |Class.java                    | 355|
|java.lang.Class                                    |newInstance                   |Class.java                    | 308|
|java.security.Provider$Service                     |newInstance                   |Provider.java                 |1221|
|----------------------------------------------------------------------------------------------------------------------|
|Exception: java.security.NoSuchAlgorithmException                                                                     |
|----------------------------------------------------------------------------------------------------------------------|
|java.security.Provider$Service                     |newInstance                   |Provider.java                 |1245|
|sun.security.jca.GetInstance                       |getInstance                   |GetInstance.java              | 220|
|sun.security.jca.GetInstance                       |getInstance                   |GetInstance.java              | 147|
|javax.net.ssl.SSLContext                           |getInstance                   |SSLContext.java               | 125|
|org.orbeon.oxf.resources.handler.HTTPURLConnection |<clinit>                      |HTTPURLConnection.java        | 107|
|----------------------------------------------------------------------------------------------------------------------|
|Exception: org.orbeon.oxf.common.OXFException                                                                         |
|----------------------------------------------------------------------------------------------------------------------|
|org.orbeon.oxf.resources.handler.HTTPURLConnection |<clinit>                      |HTTPURLConnection.java        | 110|
|----------------------------------------------------------------------------------------------------------------------|
|Exception: java.lang.ExceptionInInitializerError                                                                      |
|----------------------------------------------------------------------------------------------------------------------|
|org.orbeon.oxf.resources.handler.HTTPHandler       |openConnection                |HTTPHandler.java              |  28|
|java.net.URL                                       |openConnection                |URL.java                      | 945|
|org.orbeon.oxf.util.Connection                     |connect                       |Connection.scala              |  90|
|org.orbeon.oxf.xforms.submission.RegularSubmission$|call                          |RegularSubmission.java        |  90|
|org.orbeon.oxf.xforms.submission.RegularSubmission$|call                          |RegularSubmission.java        |  71|
|org.orbeon.oxf.xforms.submission.BaseSubmission    |submitCallable                |BaseSubmission.java           | 100|
|org.orbeon.oxf.xforms.submission.RegularSubmission |connect                       |RegularSubmission.java        | 124|
|org.orbeon.oxf.xforms.submission.CacheableSubmissio|load                          |CacheableSubmission.java      | 148|
|org.orbeon.oxf.xforms.XFormsServerSharedInstancesCa|loadAndCache$1                |XFormsServerSharedInstancesCac|  80|
|org.orbeon.oxf.xforms.XFormsServerSharedInstancesCa|apply                         |XFormsServerSharedInstancesCac|  88|
|org.orbeon.oxf.xforms.XFormsServerSharedInstancesCa|apply                         |XFormsServerSharedInstancesCac|  88|
|scala.Option                                       |orElse                        |Option.scala                  | 218|
|org.orbeon.oxf.xforms.XFormsServerSharedInstancesCa|findContentOrLoad             |XFormsServerSharedInstancesCac|  88|
|org.orbeon.oxf.xforms.XFormsServerSharedInstancesCa|findContentOrLoad             |XFormsServerSharedInstancesCac|    |
|org.orbeon.oxf.xforms.submission.CacheableSubmissio|call                          |CacheableSubmission.java      | 119|
|org.orbeon.oxf.xforms.submission.CacheableSubmissio|call                          |CacheableSubmission.java      | 111|
|org.orbeon.oxf.xforms.submission.BaseSubmission    |submitCallable                |BaseSubmission.java           | 100|
|org.orbeon.oxf.xforms.submission.CacheableSubmissio|connect                       |CacheableSubmission.java      | 209|
|org.orbeon.oxf.xforms.submission.XFormsModelSubmiss|doSubmit                      |XFormsModelSubmission.java    | 456|
|org.orbeon.oxf.xforms.submission.XFormsModelSubmiss|performDefaultAction          |XFormsModelSubmission.java    | 294|
|---8<--------8<--------8<--------8<--------8<--------8<--------8<--------8<--------8<--------8<--------8<--------8<---|
|org.apache.catalina.core.StandardPipeline          |invoke                        |StandardPipeline.java         | 595|
|org.apache.catalina.core.StandardHostValve         |invoke                        |StandardHostValve.java        | 161|
|org.apache.catalina.connector.CoyoteAdapter        |doService                     |CoyoteAdapter.java            | 331|
|org.apache.catalina.connector.CoyoteAdapter        |service                       |CoyoteAdapter.java            | 231|
|com.sun.enterprise.v3.services.impl.ContainerMapper|call                          |ContainerMapper.java          | 317|
|com.sun.enterprise.v3.services.impl.ContainerMapper|service                       |ContainerMapper.java          | 195|
|com.sun.grizzly.http.ProcessorTask                 |invokeAdapter                 |ProcessorTask.java            | 860|
|com.sun.grizzly.http.ProcessorTask                 |doProcess                     |ProcessorTask.java            | 757|
|com.sun.grizzly.http.ProcessorTask                 |process                       |ProcessorTask.java            |1056|
|com.sun.grizzly.http.DefaultProtocolFilter         |execute                       |DefaultProtocolFilter.java    | 229|
|com.sun.grizzly.DefaultProtocolChain               |executeProtocolFilter         |DefaultProtocolChain.java     | 137|
|com.sun.grizzly.DefaultProtocolChain               |execute                       |DefaultProtocolChain.java     | 104|
|com.sun.grizzly.DefaultProtocolChain               |execute                       |DefaultProtocolChain.java     |  90|
|com.sun.grizzly.http.HttpProtocolChain             |execute                       |HttpProtocolChain.java        |  79|
|com.sun.grizzly.ProtocolChainContextTask           |doCall                        |ProtocolChainContextTask.java |  54|
|com.sun.grizzly.SelectionKeyContextTask            |call                          |SelectionKeyContextTask.java  |  59|
|com.sun.grizzly.ContextTask                        |run                           |ContextTask.java              |  71|
|com.sun.grizzly.util.AbstractThreadPool$Worker     |doWork                        |AbstractThreadPool.java       | 532|
|com.sun.grizzly.util.AbstractThreadPool$Worker     |run                           |AbstractThreadPool.java       | 513|
|java.lang.Thread                                   |run                           |Thread.java                   | 662|
+----------------------------------------------------------------------------------------------------------------------+"}
2012-10-24 10:39:28,450 INFO  ProcessorService  - Session listener - Session created.
2012-10-24 10:39:28,455 WARN  XFormsServer  - xxforms:instance() - instance not found {instance id: "fr-form-metadata"}
2012-10-24 10:39:28,480 ERROR XFormsServer  - xforms-submit-error - setting throwable {throwable: "
+----------------------------------------------------------------------------------------------------------------------+
|An Error has Occurred                                                                                                 |
|----------------------------------------------------------------------------------------------------------------------|
|Could not initialize class org.orbeon.oxf.resources.handler.HTTPURLConnection                                         |
|----------------------------------------------------------------------------------------------------------------------|
|Application Call Stack                                                                                                |
|----------------------------------------------------------------------------------------------------------------------|
|----------------------------------------------------------------------------------------------------------------------|
|Exception: java.lang.NoClassDefFoundError                                                                             |
|----------------------------------------------------------------------------------------------------------------------|
|org.orbeon.oxf.resources.handler.HTTPHandler       |openConnection                |HTTPHandler.java              |  28|
|java.net.URL                                       |openConnection                |URL.java                      | 945|
|org.orbeon.oxf.util.Connection                     |connect                       |Connection.scala              |  90|
|org.orbeon.oxf.xforms.submission.RegularSubmission$|call                          |RegularSubmission.java        |  90|
|org.orbeon.oxf.xforms.submission.RegularSubmission$|call                          |RegularSubmission.java        |  71|
|org.orbeon.oxf.xforms.submission.BaseSubmission    |submitCallable                |BaseSubmission.java           | 100|
|org.orbeon.oxf.xforms.submission.RegularSubmission |connect                       |RegularSubmission.java        | 124|
|org.orbeon.oxf.xforms.submission.XFormsModelSubmiss|doSubmit                      |XFormsModelSubmission.java    | 456|
|org.orbeon.oxf.xforms.submission.XFormsModelSubmiss|performDefaultAction          |XFormsModelSubmission.java    | 294|
|org.orbeon.oxf.xforms.event.Dispatch$$anonfun$dispa|apply$mcV$sp                  |Dispatch.scala                | 139|
|org.orbeon.oxf.xforms.event.Dispatch$$anonfun$dispa|apply                         |Dispatch.scala                | 139|
|org.orbeon.oxf.xforms.event.Dispatch$$anonfun$dispa|apply                         |Dispatch.scala                | 139|
|org.orbeon.oxf.util.Logging$class                  |withDebug                     |Logging.scala                 |  43|
|org.orbeon.oxf.xforms.event.Dispatch$              |withDebug                     |Dispatch.scala                |  23|
|org.orbeon.oxf.xforms.event.Dispatch$$anonfun$dispa|apply$mcV$sp                  |Dispatch.scala                | 138|
|org.orbeon.oxf.xforms.event.Dispatch$$anonfun$dispa|apply                         |Dispatch.scala                | 124|
|org.orbeon.oxf.xforms.event.Dispatch$$anonfun$dispa|apply                         |Dispatch.scala                | 124|
|org.orbeon.oxf.xforms.event.Dispatch$              |withEvent$1                   |Dispatch.scala                |  39|
|org.orbeon.oxf.xforms.event.Dispatch$$anonfun$dispa|apply$mcV$sp                  |Dispatch.scala                | 124|
|org.orbeon.oxf.xforms.event.Dispatch$$anonfun$dispa|apply                         |Dispatch.scala                |  96|
|---8<--------8<--------8<--------8<--------8<--------8<--------8<--------8<--------8<--------8<--------8<--------8<---|
|org.apache.catalina.core.StandardPipeline          |invoke                        |StandardPipeline.java         | 595|
|org.apache.catalina.core.StandardHostValve         |invoke                        |StandardHostValve.java        | 161|
|org.apache.catalina.connector.CoyoteAdapter        |doService                     |CoyoteAdapter.java            | 331|
|org.apache.catalina.connector.CoyoteAdapter        |service                       |CoyoteAdapter.java            | 231|
|com.sun.enterprise.v3.services.impl.ContainerMapper|call                          |ContainerMapper.java          | 317|
|com.sun.enterprise.v3.services.impl.ContainerMapper|service                       |ContainerMapper.java          | 195|
|com.sun.grizzly.http.ProcessorTask                 |invokeAdapter                 |ProcessorTask.java            | 860|
|com.sun.grizzly.http.ProcessorTask                 |doProcess                     |ProcessorTask.java            | 757|
|com.sun.grizzly.http.ProcessorTask                 |process                       |ProcessorTask.java            |1056|
|com.sun.grizzly.http.DefaultProtocolFilter         |execute                       |DefaultProtocolFilter.java    | 229|
|com.sun.grizzly.DefaultProtocolChain               |executeProtocolFilter         |DefaultProtocolChain.java     | 137|
|com.sun.grizzly.DefaultProtocolChain               |execute                       |DefaultProtocolChain.java     | 104|
|com.sun.grizzly.DefaultProtocolChain               |execute                       |DefaultProtocolChain.java     |  90|
|com.sun.grizzly.http.HttpProtocolChain             |execute                       |HttpProtocolChain.java        |  79|
|com.sun.grizzly.ProtocolChainContextTask           |doCall                        |ProtocolChainContextTask.java |  54|
|com.sun.grizzly.SelectionKeyContextTask            |call                          |SelectionKeyContextTask.java  |  59|
|com.sun.grizzly.ContextTask                        |run                           |ContextTask.java              |  71|
|com.sun.grizzly.util.AbstractThreadPool$Worker     |doWork                        |AbstractThreadPool.java       | 532|
|com.sun.grizzly.util.AbstractThreadPool$Worker     |run                           |AbstractThreadPool.java       | 513|
|java.lang.Thread                                   |run                           |Thread.java                   | 662|
+----------------------------------------------------------------------------------------------------------------------+"}
2012-10-24 10:39:28,495 INFO  PageFlowControllerProcessor  - not found {controller: "oxf:/apps/fr/page-flow.xml", method: "GET", path: "/fr/orbeon/builder/summary"} 
```

我还配置了持久层并尝试调试，但在我的 servlet 之前抛出了这个错误。

我也尝试过 Orbeon v3.91 并且它可以正常工作（我可以构建和保存表单）但我不能将它与 LR 一起使用，因为[这个](https://stackoverflow.com/questions/11506962/orbeon-3-9-liferay-proxy-portlet-java-lang-nullpointerexception-error-with-any-u)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T22:38:28.290

[为避免此错误，您需要按照 Glassfish 3.1 的 Orbeon Forms 安装说明](http://wiki.orbeon.com/forms/doc/developer-guide/admin/installing#TOC-GlassFish-3.1)中的说明更改 Glassfish 配置。

# c - C语言中的HTML标签检查

> ID：13046704
> 
> 赞同：2
> 
> 时间：2012-10-24T09:47:50.727
> 
> 标签：c, parsing

我正在用 C 编写一个小程序，用于检查 HTML 文件是否具有正确的打开和关闭标签？但我有一些问题......我有一个文件，其中包含所有可能的标签，名为 tags.txt（这些只是第一个）：

```
<a>
</a>
<abbr>
</abbr>
<area>
</area>
<aside>
</aside> 
```

我有 htmlfile.html，我必须检查：

```
<!--#echo var="date" -->
<area>
</area>
<area>
</area> 
```

其次，我想将这样的评论替换为 sysdate 之类的，格式可以，我可以做到，但是 prog 将这个文件放入

我的代码：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <time.h>

#define MAX_SIZE 512

void menu();
void check();
void datumos();

int main(int argc,char *argv[])
{
    menu();

    return 0;
}

void menu()
{
    char menu[MAX_SIZE];
    while(1 < 2)
    {
            printf("\npress a button:\n\n");

                    printf("\tFile HTML check..............:c\n");
                    printf("\t<!--#echo var="date" -->...........:d\n");
                    printf("\tExit:\tCTRL + C\n");
                    scanf("%s",menu);

            if( strcmp(menu,"c") == 0 )
            {
                    check();
            }
            else if( strcmp(menu,"d") == 0 )
            {
                    datumos();
            }

    }
}

void check()
{
    FILE *htmlfile;
    FILE *checkfile;

    htmlfile = fopen("htmlfile.html","w");
    checkfile = fopen("tags.txt","r");

char line[MAX_SIZE];
char htmlline[MAX_SIZE];
char tags[189][30];

int i=0;

printf("\tcheck__1\n");

while(fgets(line,sizeof(line),checkfile) != NULL)
    {

        int j;
    for(j=0; j<sizeof(line); ++j)
    {
        tags[i][j]=line[j];
    }
    ++i;

    }
printf("\tcheck__2\n");

int k=0;    char htmlfiletags[MAX_SIZE][30];
    while(fgets(htmlline,sizeof(htmlline),htmlfile) != NULL)
    {
    char currentline[sizeof(htmlline)];
    int j=0;

        if( currentline[j]=="<" )
        {

                while(currentline[j]!=">") 
                {
                    htmlfiletags[k][j]=currentline[j];
                    ++j;
                }
                strcat(htmlfiletags[k][j+1],">"); 
                ++k; 
        }
}
printf("\tcheck__3\n");

 int n;
 for(n=0; n<sizeof(htmlfiletags); ++n)
 {
     int j; int howmanytimesnot=0;

     for(j=0; j<sizeof(tags); ++j)
     {
         printf("\tcheck__3/1\n");

         if(strcmp(htmlfiletags[n],tags[j])==0)
         {
             printf("\t%d\n", howmanytimesnot);

             ++howmanytimesnot;
         }
     }

    printf("\tcheck__3/3\n");

     if(!(howmanytimesnot<sizeof(tags)))
        {
            printf("\tcheck__3/4\n");
          printf("the file is not wellformed");

          exit (1);
        }

 }
 printf("\tcheck__4\n");

}

void copy_file(const char *from,const char *to)
{
    FILE *fr;
    FILE *t;
    fr = fopen(from,"r");
    t = fopen(to,"w");

    char line[MAX_SIZE];

    char row[MAX_SIZE];

    while(fgets(line,sizeof(line),fr) != NULL)
    {
            sscanf(line,"%s",row);
            fprintf(t,"%s\n",row);
    }

    fclose(fr);
    fclose(t);

    remove("tempfile.html");
 }

void datumos()
{
time_t now = time(NULL);
struct tm *t = localtime(&now);
char date_time[30];
strftime( date_time, sizeof(date_time), "%x_%X", t );

FILE *htmlfile;
    FILE *tempfile;
    htmlfile = fopen("htmlfile.html","r");
    tempfile = fopen("tempfile.html","w");
    char line[MAX_SIZE];
    //char datecomment[]="<!--#echo var=date -->";

    while(fgets(line,sizeof(line),htmlfile) != NULL)
    {

            if( strcmp(line,"<!--#echo var="date" -->") == 0 )
            {

            char row[40];
            strcpy(row,"<!--");
            strcat(row, date_time);
            strcat(row,"-->");

    printf("%s",row);
            fputs(row,tempfile);

            }
            else
            {
                    fputs(line,tempfile);
            }
    }

    fclose(htmlfile);
    fclose(tempfile);

    copy_file("tempfile.html","htmlfile.html");

} 
```

它死在这里，在内部 for 循环中，在第 200 次检查的 if 中……我不知道为什么……

```
 int n;
 for(n=0; n<sizeof(htmlfiletags); ++n)
 {
     int j; int howmanytimesnot=0;

     for(j=0; j<sizeof(tags); ++j)
     {
         printf("\tcheck__3/1\n");

         if(strcmp(htmlfiletags[n],tags[j])==0)
         {
             printf("\t%d\n", howmanytimesnot);

             ++howmanytimesnot;
         }
     }

    printf("\tcheck__3/3\n");

     if(!(howmanytimesnot<sizeof(tags)))
        {
            printf("\tcheck__3/4\n");
          printf("the file is not wellformed");

          exit (1);
        }

 } 
```

谢谢大家的回复！！G

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:12:17.040

您的代码非常复杂，它有几个问题。

这是一个：

```
for(j=0; j<sizeof(tags); ++j) 
```

这不会符合我的预期；`sizeof(tags)`不是`tags`（声明为`char tags[189][30];`）的数组长度，而是*变量的总大小*。因此，此循环将从 0 变为 189 * 30 - 1，即 5669，因此索引超出数组末尾。

此外，以`sizeof`任何方式在这里使用的想法都是错误的，因为 的内容`tags`来自文件，因此编译器不可能知道。请记住`sizeof`，对于像这样的表达式，它是在编译时评估的。

您需要有一个变量（例如`size_t num_tags`），为从标记文件解析的每一行增加一个变量，然后您可以使用它来迭代`tags`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:04:54.670

[不要使用 regex](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)或某种字符串解析来解析 HTML。而是在网络[或此站点上](https://stackoverflow.com/questions/1527883/parse-html-using-c)搜索 ac 库来解析 html。然后检查已解析的 HTML 文件中的标记。这将大大简化开发，因为您不必自己解析文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T06:37:51.613

我已经修复了一些问题，但是 - 我仍然无法检查文件的 htmltags，死在同一个循环中，我已经修复了标签数组的分配 - 当 htmlfile 中有 2 个或更多不同的评论并且我正在替换评论该程序将其替换为 sysdate，但该程序严重复制了另一个注释，例如 =>

现在的代码是：

```
 #include <stdlib.h>
    #include <stdio.h>
    #include <string.h>
    #include <time.h>

    #define MAX_SIZE 512

    void menu();
    void check();
    void datumos();

    int main(int argc,char *argv[])
    {
        menu();

        return 0;
    }

    void menu()
    {
        char menu[MAX_SIZE];
        while(1 < 2)
        {
                printf("\npress a button:\n\n");

                        printf("\tFile HTML check..............:c\n");
                        printf("\t<!--#echo var="date" -->...........:d\n");
                        printf("\tExit:\tCTRL + C\n");
                        scanf("%s",menu);

                if( strcmp(menu,"c") == 0 )
                {
                        check();
                }
                else if( strcmp(menu,"d") == 0 )
                {
                        datumos();
                }

        }
    }

    void check()
    {
        FILE *htmlfile;
        FILE *checkfile;

        htmlfile = fopen("htmlfile.html","r");
        checkfile = fopen("tags.txt","r");

        char line[MAX_SIZE];
        char htmlline[MAX_SIZE];

        int i2=0;

        printf("\tcheck__1\n");
        while(fgets(line,sizeof(line),checkfile) != NULL)
        {
            ++i2;

        }

        char tags[i2][20];

        int i=0;

        printf("\tcheck__11\n");
        while(fgets(line,sizeof(line),checkfile) != NULL)
        {
            int j;
            for(j=0; j<sizeof(line); ++j)
            {

                tags[i][j]=line[j];
            }
            ++i;

        }
        printf("\tcheck__2\n");

        int k=0;    char htmlfiletags[MAX_SIZE][30];
        while(fgets(htmlline,sizeof(htmlline),htmlfile) != NULL)
        {
            char currentline[sizeof(htmlline)];
            int j=0;

                if( currentline[j]=="<" )
                {

                        while(currentline[j]!=">")
                        {
                            htmlfiletags[k][j]=currentline[j];
                            ++j;
                        }
                        strcat(htmlfiletags[k][j+1],">");
                        ++k;
                }
        }
        printf("\tcheck__3\n");

         int n;
         for(n=0; n<sizeof(htmlfiletags); ++n)
         {
             int j; int howmanytimesnot=0;

             for(j=0; j<sizeof(tags); ++j)
             {
                 //printf("\tcheck__3/1\n");

                 if(strcmp(htmlfiletags[n],tags[j])==0)
                 {
                   //  printf("\t%d\n", howmanytimesnot);
                     ++howmanytimesnot;
                 }
             }

            printf("\tcheck__3/3\n");

             if(!(howmanytimesnot<sizeof(tags)))
                {
                    printf("\tcheck__3/4\n");
                  printf("the file is not wellformed");

                  exit (1);
                }

         }
         printf("\tcheck__4\n");

    }

    void copy_file(const char *from,const char *to)
    {
        FILE *fr;
        FILE *t;
        fr = fopen(from,"r");
        t = fopen(to,"w");

        char line[MAX_SIZE];
        char row[MAX_SIZE];

        while(fgets(line,sizeof(line),fr) != NULL)
        {
            sscanf(line,"%s",row);
            fprintf(t,"%s\n",row);
        }

        fclose(fr);
        fclose(t);

        remove("tempfile.html");
    }

    void datumos()
    {
    time_t now = time(NULL);
    struct tm *t = localtime(&now);
    char date_time[30];
    strftime( date_time, sizeof(date_time), "%x_%X", t );

        FILE *htmlfile;
        FILE *tempfile;

        htmlfile = fopen("htmlfile.html","r");
        tempfile = fopen("tempfile.html","w");

        char line[MAX_SIZE];
        char* datecomment="<!--#echo var=\"date\" -->";

        while(fgets(line,sizeof(line),htmlfile) != NULL)
        {

            int i3; int db=0;
            for(i3=0; i3<strlen(datecomment); ++i3)
            {
                if(line[i3]==datecomment[i3])
                {
                    ++db;
                }

            }

            if(db==strlen(datecomment))
            {

            char row[30];
            strcpy(row,"<!--");
            strcat(row, date_time);
            strcat(row,"-->\n");

            fputs(row,tempfile);

            }
            else
            {
                fputs(line,tempfile);
            }

        }

        fclose(htmlfile);
        fclose(tempfile);

        copy_file("tempfile.html","htmlfile.html");

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T20:47:05.867

*   当前行没有必要，我也修复了比较

    ```
    while(fgets(htmlline,sizeof(htmlline),htmlfile) != NULL)
    {           
        int j=0;

            if( htmlline[j]=='<' )
            {

                    while(htmlline[j]!='>')
                    {
                        htmlfiletags[k][j]=htmlline[j];
                        ++j;
                    }
                    strcat(htmlfiletags[k][j+1],">");
                    ++k;
            }
    } 
    ```

-另外，另一个问题是只替换合适的评论，不要伤害不同的评论仍然不起作用

“所以它替换

```
 <!--#echo var="date" --> to the sysdate, it's ok, but when there are different comments like

  <!--#include something -->, it wont be copied back well, in the htmlfile will be only <!--#include" 
```

想法？

# google-apps-script - 谷歌应用程序脚本在第一次运行时授予用户权限访问电子表格上的服务，而无需打开脚本编辑器

> ID：13046705
> 
> 赞同：1
> 
> 时间：2012-10-24T09:47:50.160
> 
> 标签：google-apps-script

嗯...我有一个问题，不，我必须说这是客户的要求。

就像每个人都知道，如果脚本访问任何服务，那么您必须在第一次运行该功能时授予他们权限。我的意思是点击“授予”按钮。

问题是我通过电子表格上的自定义菜单执行用户运行脚本的项目，**他们不会打开脚本编辑器**。第一次运行脚本需要点击diablog来授予权限。因此，如果这是第一次用户（不是我）通过 SpreadSheet 菜单运行脚本，则 SpreadSheet 将显示消息“正在运行脚本...”，仅此而已。

因此，如果有任何方法可以在不打开脚本编辑器的情况下授予用户权限访问服务（我不希望他们为了我的利益而查看我的源代码）然后告诉我你们的人。多谢！

P/S：对不起，我的英语很差。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:55:50.203

如果您在新用户第一次尝试运行任何功能时仅使用默认 API（无 o-auth），则会提示他授予对这些服务的访问权限。如果你想让它更明显，你可以在你的自定义菜单中添加一个名为“授权”的菜单项，它会做它所说的:-) 即除了触发过程或最终显示欢迎消息之外什么都没有......在那一步之后将不再有授权请求。

# c# - 时间：2019-04-01 标签：c#mvc DI ninject repository

> ID：13046707
> 
> 赞同：0
> 
> 时间：2012-10-24T09:47:52.407
> 
> 标签：c#, dependency-injection, ninject

我正在使用 .net c# Mvc，使用 ninject 存储库模式。我的问题是，在开发时我在函数中使用重用，每次我想从 db 获取更多信息并需要访问另一个表时，我需要从所有调用此函数的地方传递存储库。我做错了吗？这就是这种方式，它的开发时间要长得多，然后只是打开一个连接并在函数结束时进行处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:20:41.207

如果您的班级需要传入大量的存储库，这有时可能表明您的班级正在做太多事情并且可能违反单一职责原则。也许如果你把这个类分成更小更专业的类，问题就不会那么糟糕了。

另一方面，有时传递大量存储库是不可避免的。您可能会考虑创建一个工厂类来为您创建遭受“构造函数堵塞”的类 - 这应该可以节省一些输入，因为大量的构造函数初始化只是在一个地方（在工厂类中）。

编辑：一个非常简单的“工厂”类可能如下：

```
 public class FactoryClass
    {        
        public ClassWithLotsOfRepositories GetClassWithLotsOfRepositories()
        {
            return new ClassWithLotsOfRepositories(new repository1(), 
                          new repository2(), new repository3() );
        }
    } 
```

因此，您现在可以创建 ClassWithLotsOfRepositories 的实例，而不必每次都在构造函数中指定存储库。

```
ClassWithLotsOfRepositories myClassThatUsesLotsOfRepositories = new FactoryClass().GetClassWithLotsOfRepositories(); 
```

我的示例具有通过构造函数传入的具体类。您正在使用 Ninject，所以大概有需要解析的接口 - 我只是保持这个例子简单来说明这个概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-05T20:58:13.153

使用一个工作单元新建所有的存储库。这样，您可以将 uow 传递到您的控制器中，并在需要时访问所有存储库。

# validation - 如果验证失败则显示 div

> ID：13046710
> 
> 赞同：6
> 
> 时间：2012-10-24T09:48:02.410
> 
> 标签：validation, razor, asp.net-mvc-4, jquery-validate

我希望这个 div 显示表单验证是否不成功。

```
<div class="alert">
  <strong>Warning!</strong> @Html.ValidationSummary(false, "Fix these errors:")
</div> 
```

我试着把它包在里面

```
if(! ViewData.ModelState.IsValid) 
```

但是提交表单时不显示div。可能是因为没有回发由于 jquery 验证。验证逻辑似乎没问题，如果我删除 if 语句验证摘要列出所有不正确的输入字段。

如何根据验证切换 div 的可见性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T17:03:24.440

**更新**

我重写了接受的答案。如果服务器连接速度很慢，则在服务器请求期间将显示错误 div。即使没有错误。我更改了它以在提交表单时检查表单是否有效。此代码片段假定您有一个表单。

```
$(document).ready(function () {
    $(".alert").hide(); //hides the div on page load

    $("form").submit(function () {
        if (!$(this).valid()) {
            $('.alert').show();
        }
    });        
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T13:31:44.310

您可以应用这个简单的脚本。它不是很复杂，但它应该可以解决问题

```
$(document).ready(function () {
    $('.alert').hide(); //hides the div on page load
    $('#submit').click(function () {  //assumes your submit button has id="submit"
        $('.alert').show(); //shows the div when submit is clicked
    });
}); 
```

如您所见，这实际上并不关心验证。它只是在单击提交按钮时使“警报” div 可见。如果存在验证错误，则 div 将显示您的警告。如果表单有效，我假设刷新或重定向，因此 div 将永远不会真正有机会显示。

# c# - 使用 itextsharp 创建的 pdf 中尺寸错误的图像

> ID：13046711
> 
> 赞同：2
> 
> 时间：2012-10-24T09:48:02.173
> 
> 标签：c#, itextsharp

我在从 .tiff 中的图像创建带有 itextsharp 的 pdf 时遇到问题。这是一些代码：

```
 iTextSharp.text.Document d = new iTextSharp.text.Document();
        PdfWriter pw = PdfWriter.GetInstance(d, new FileStream(filename, FileMode.Create));
        d.Open();

        PdfContentByte cb = pw.DirectContent;
        foreach (Image img in imgs)
        {
            d.NewPage();
            d.SetPageSize(new iTextSharp.text.Rectangle(0, 0, img.Width, img.Height));
            iTextSharp.text.Image timg = iTextSharp.text.Image.GetInstance(img, iTextSharp.text.BaseColor.WHITE);
            timg.SetAbsolutePosition(0, 0);
            cb.AddImage(timg);
            cb.Stroke();
        }
        d.Close(); 
```

它创建包含两页的 pdf，但第一页上的图像太大。
该页面具有图像的大小，但它会缩放图像的左下角。它只对 tiff 图像执行此操作，如果我使用 png，它可以正常工作。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:16:42.883

感谢mkl的评论，我找到了。在新建页面命令（NewPage）之前设置页面大小（SetPageSize）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T05:58:50.900

像这样使用

```
string[] validFileTypes = {"tiff"};
string ext = System.IO.Path.GetExtension(FileUpload1.PostedFile.FileName);
bool isValidFile = false;
if (!isValidFile)
{
Label.Text = "Invalid File. Please upload a File with extension " +
                       string.Join(",", validFileTypes);
}
 else
    {
        string pdfpath = Server.MapPath("pdf");
        Document doc = new Document(PageSize.A4, 0f, 0f, 0f, 0f);
        PdfWriter.GetInstance(doc, new FileStream(pdfpath + "/Images.pdf", FileMode.Create));
        doc.Open();

        string savePath = Server.MapPath("images\\");
        if (FileUpload1.PostedFile.ContentLength != 0)
          {
            string path = savePath + FileUpload1.FileName;
            FileUpload1.SaveAs(path);
            iTextSharp.text.Image tiff= iTextSharp.text.Image.GetInstance(path);
            tiff.ScaleToFit(doc.PageSize.Width, doc.PageSize.Height);
            tiff.SetAbsolutePosition(0,0);
            PdfPTable table = new PdfPTable(1);
            table.AddCell(new PdfPCell(tiff));
            doc.Add(table);
          }
         doc.Close();
      } 
```

# php - 使用 Twitter 的新 API 访问公共时间线

> ID：13046713
> 
> 赞同：0
> 
> 时间：2012-10-24T09:48:02.333
> 
> 标签：php, zend-framework, twitter

由于 Twitter 最近[对他们的 API 进行了大修](https://dev.twitter.com/blog/changes-coming-to-twitter-api)，我试图想办法让我的 Zend CMS 应用程序访问客户端的公共时间线。我目前正在使用这个：

```
$twitterSearch = new Zend_Service_Twitter_Search('json');
$output = $twitterSearch->search("from:$username", array('rpp' => $total, 'page' => $page));
return $output['results']; 
```

返回所需的数据 - 这很顺利。然而，问题在于它似乎只返回最近的推文。查看他们的[Twitter 搜索 API](https://dev.twitter.com/docs/using-search)文档，他们指定了只有**6-9 天**的数据可供使用的时间限制。

许多客户都有他们想要显示的旧推文（一些来自 2012 年初）的时间表。除了 Twitter 搜索 API 之外，还有其他方法可以访问第三方时间线吗？我研究了[Zend 的其他 Twitter 功能](http://framework.zend.com/manual/1.12/en/zend.service.twitter.html)，但它们似乎只关心访问需要 oAuth 身份验证的敏感数据（直接消息、朋友、发布到您的时间线等）。我只想访问特定用户名的公共时间表。这可能吗？

# linux - 每个目录的最佳文件数与 EXT4 的目录数

> ID：13046714
> 
> 赞同：20
> 
> 时间：2012-10-24T09:48:03.060
> 
> 标签：linux, ext4

我有一个程序可以生成大量小文件（比如 10,000 个文件）。创建它们之后，另一个脚本会访问它们并一一处理。

问题：

*   就性能而言，文件的组织方式是否重要（都在一个目录或多个目录中）
*   如果是这样，那么每个目录的最佳目录和文件数是多少？

*我用ext4*文件系统运行 Debian

**有关的**

*   [Linux 上的最大文件/文件夹数？](https://stackoverflow.com/questions/8238860/maximum-number-of-files-folders-on-linux)
*   [https://serverfault.com/questions/104986/what-is-the-maximum-number-of-files-a-file-system-can-contain](https://serverfault.com/questions/104986/what-is-the-maximum-number-of-files-a-file-system-can-contain)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-24T16:14:31.770

单个文件夹中的 10k 个文件在 Ext4 上不是问题。它应该`dir_index`默认启用该选项，该选项使用类似 btree 的结构索引目录内容以防止性能问题。

综上所述，除非您创建数百万个文件或使用 ext2/ext3，否则您不必担心系统或 FS 性能问题。

话虽如此，shell 工具和命令不喜欢以大量文件作为参数（`rm *`例如）被调用，并且可能会返回一条错误消息，例如“参数太多”。看看[这个答案](https://stackoverflow.com/questions/657488/what-happens-if-there-are-too-many-files-under-a-single-directory-in-linux)会发生什么。

# python - 拆分数据并将其保存为文本文档

> ID：13046715
> 
> 赞同：1
> 
> 时间：2012-10-24T09:48:04.190
> 
> 标签：python, python-2.7

所以我有一个文本文档[text_input](http://limelinx.com/flgt9) 并且我想使用 python 将文本中的两个值拆分为两个单独的文本文档。.

非常感谢你们为互相帮助而付出的所有努力！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:52:42.803

这应该这样做：

```
>>> with open('input.txt') as f1,open('output1.txt','w') as f2,open('output2.txt','w') as f3:
...     for line in f1:             #read data line by line
...         lin=line.split()        #split the line into ['19490622','14.0'] 
...         f2.write(lin[0]+'\n')   #write first part to output1
...         f3.write(lin[1]+'\n')   #write second part to output2 
```

# visual-studio-2010 - 在 Visual Studio 2010 中调试时应用 web.config 转换

> ID：13046716
> 
> 赞同：1
> 
> 时间：2012-10-24T09:48:06.357
> 
> 标签：visual-studio-2010, web-config, transform, replace

我有一个 mvc4 项目，它有四个解决方案配置和一个转换 web.config 文件。我需要能够更改配置并应用转换，以便可以在 Visual Studio 2010 中进行调试。

我可以使用控制台应用程序轻松做到这一点，因为它们被编译到 bin 文件夹中并应用了配置，但不幸的是 mvc 应用程序没有。

有什么想法吗？

# testing - 运行 MsTest 时在 Visual Studio 中取消隐藏测试资源管理器

> ID：13046717
> 
> 赞同：2
> 
> 时间：2012-10-24T09:48:06.803
> 
> 标签：testing, visual-studio-2012, mstest

在 VS2012 中，我的测试资源管理器窗口设置为自动隐藏

![在此处输入图像描述](../Images/cddea335043e6203df0b54f145c0dd37.png) 如何在我运行测试时显示此窗口，例如：

Ctrl+R，T

我热衷于使用 VS 测试运行器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T06:39:49.633

测试资源管理器未启用自动聚焦/取消隐藏功能

# c# - 使用 ListView 访问 Select 上的数据项

> ID：13046719
> 
> 赞同：2
> 
> 时间：2012-10-24T09:48:14.400
> 
> 标签：c#, asp.net

编写一个 asp.net 文件管理器。

本质上，用户单击 TreeView 控件中的文件夹，该文件夹中的文件显示在 ListView 控件中。

**列表视图**

```
<asp:listview id="lvFiles" runat="server" onitemdeleting="lvFiles_ItemDeleting" 
      onselectedindexchanging="lvFiles_SelectedIndexChanging">
     <layouttemplate>
          <table cellpadding="2" width="520px" border="1" id="tbl1" runat="server">
              <tr id="Tr1" runat="server" style="background-color: #98FB98">
                  <th id="Th0" runat="server"></th>
                      <th id="Th1" runat="server">Filename</th>
                      <th id="Th2" runat="server">Uploaded</th>
                      <th id="Th3" runat="server">Last Accessed</th>
              </tr>
              <tr runat="server" id="itemPlaceholder" />
           </table>
           <asp:datapager id="DataPager1" runat="server" pagesize="25">
                <fields>
                    <asp:nextpreviouspagerfield buttontype="Button" />
                </fields>
           </asp:datapager>
      </layouttemplate>
      <emptyitemtemplate>
          <p>No items</p>
      </emptyitemtemplate>
      <itemtemplate>
          <tr runat="server">
              <td><asp:linkbutton id="itemSelected" runat="server" tooltip='<%# Eval("FullName") %>' autopostback="True" commandname="select" text="Select" />
              </td>
              <td><asp:label id="fNameLabel" runat="server" text='<%# Eval("Name") %>'></asp:label>
              </td>
          </tr>
       </itemtemplate>
       <selecteditemtemplate>
           <tr id="Tr2" runat="server">
               <td>Selected</td>
               <td><asp:label id="fNameLabel" runat="server" text='<%# Eval("Name") %>'></asp:label>
               </td>
               <td><asp:button id="btnDelete" runat="server" text="Delete" commandname="Delete"></asp:button>
               </td>
           </tr>
      </selecteditemtemplate>
</asp:listview> 
```

**绑定文件列表**

所以目前发生的情况是`TreeView_SelectedNodeChanged`，应用程序使用方法获取`DirectoryInfo`由 表示的对象`TreeNode`并获取对象数组。`FileInfo``DirectoryInfo.GetFiles()`

这`FileInfo[]`将传递给以下方法。

```
protected void AddFilesToViewPort(FileInfo[] Files)
{
    List<FileInfo> fList = new List<FileInfo>();
    for (int i = 0; i < Files.Length; i++)
    {
        fList.Add(Files[i]);
    }
    lvFiles.DataSource = fList;
    lvFiles.DataBind();
    upExistingFiles.Update();
} 
```

它将绑定`FileInfo[]`到`ListView`对象 ，`lvFiles`这几乎正是我想要的。

我想要做的是能够在 ListView 中选择一个项目（目前可以完成），然后当用户按下`Delete`按钮时，我希望应用程序能够处理相关文件。本质上，我想将文件移动到“已删除文件”目录并将操作记录在数据库中。

我遇到的问题是获取`FileInfo`与我选择的列表项关联的实际对象。

如果我将调试器附加到并逐步执行，则`lvFiles_ItemDeleting`事件正在触发，并且我得到了`ListItem`应有的选定索引，但是当我通过调试器中的对象时，关于对象的实际信息`ListItem`代表只是不在那里。

![显示调试的 ListView 中缺少 DataKeys 的图像](../Images/6d81649b2cc2bd6e9f16ef432742bdd8.png)

正如您在上图中所见， 的 DataKeys 属性包含`ListView`有关其项目的一些信息，但是当我深入研究该属性时，这些信息不存在。

如何`FileInfo`从 selected 中获取对象`ListViewItem`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:35:31.583

看看这是否回答了你的问题：

```
ListViewDataItem item = lvFiles.Items[e.ItemIndex];
FileInfo fInfo = (FileInfo)item.DataItem; 
```

您还需要指定要传递到 listView 的 DataKeyNames。就像是：

```
<asp:listview DataKeyNames="FullName, Name" id="lvFiles" runat="server" onitemdeleting="lvFiles_ItemDeleting" onselectedindexchanging="lvFiles_SelectedIndexChanging">. read more about it [here][1] 
```

# php - 如何在mysql数据库中存储带有iphone应用程序发送的时区的时间戳

> ID：13046721
> 
> 赞同：1
> 
> 时间：2012-10-24T09:48:18.137
> 
> 标签：php, mysql, objective-c, web-services, timezone

我正在开发一个 iPhone 应用程序，它需要将时间数据与客户端时区一起存储在远程 mysql 数据库中。这是通过调用 php web 服务并将数据存储在 mysql 数据库中来实现的。查找用户时区并发送到 Web 服务的最佳方法是什么。

编辑：

```
 NSTimeZone *tzone  = [NSTimeZone defaultTimeZone];
 NSTimeInterval timeInt = [dateTime timeIntervalSince1970 ];
 NSNumber *timeStamp=[NSNumber numberWithInt:timeInt];

 NSString *zone = [tzone name];
 NSURL *url = [NSURL URLWithString:@"http://localhost/mytask/"];

 ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request setPostValue:[NSString stringWithFormat:@"%@", timeStamp] forKey:@"task_time_stamp"];
[request setPostValue:zone forKey:@"task_time_zone"]; 
```

如何使用客户端时区在 MySql 数据库中保存时间戳。有没有其他方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-30T10:43:36.313

Date().getTimezoneOffset() 这将对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:51:59.020

```
SET time_zone = 'America/New_York'; 
```

这可以在 insert 之前更改 mysql db .execute 的时区设置。如果你想知道 php 中的当前时区，你可以使用`date_default_timezone_get`.

# c# - 获取 System.Net.WebException：底层连接已关闭但无法修复

> ID：13046725
> 
> 赞同：1
> 
> 时间：2012-10-24T09:48:31.537
> 
> 标签：c#, .net, wcf, web-services, iis

我在堆栈中阅读了许多博客和许多问题，但找不到我的确切场景（实际上这是非常简单的场景）。

## 语境

我在 Visual Studio 2010 项目的库中编写了一项服务。我为服务契约和实现该契约的服务类编写了接口。

```
namespace MyNS.WebSrvLibrary {
[ServiceContract(Namespace = "http://schemas.dummy.com")]
public interface IEchoService {
  [OperationContract()]
  EchoMessageResponse Echo(EchoMessage msg);
}
} 
```

服务：

```
namespace MyNS.WebSrvLibrary {
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, ConcurrencyMode = ConcurrencyMode.Multiple)]
public class EchoService : IEchoService {
  public EchoService() {}
  [OperationBehavior()]
  public virtual EchoMessageResponse Echo(EchoMessage msg) {
    return new EchoMessageResponse("Ciccio");
  }
  public static IEchoService GetChannel(string addr = "") {
    // Create the service endpoint
    Binding binding = new BasicHttpBinding();
    ServiceEndpoint endpoint =
      new ServiceEndpoint(
            ContractDescription.GetContract(typeof(IEchoService)),
            binding,
            new EndpointAddress(addr));
    // Create channel factory and get proper channel for service.
    ChannelFactory<IEchoService> channelFactory = new ChannelFactory<IEchoService>(endpoint);
    IEchoService svc = channelFactory.CreateChannel();
    return svc;
  }
}
} 
```

像`EchoMessageResponse`和`EchoMessage`已经`DataContract`应用的类，它们没问题。

正如我之前所说的，该服务被编译成一个 dll（程序集），我只需添加一个引用就可以将其导入 bin 文件夹中的 Web 应用程序中。在这个 Web 应用程序中，我有`svc`Web 服务的文件：

```
<%@ ServiceHost Language="C#" Debug="true" Service="MyNS.WebSrvLibrary.EchoService" %> 
```

这是`Web.config`文件：

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="MyNS.WebSrvLibrary.EchoService">
        <endpoint name="basicHttpBinding" address="" 
                                     binding="basicHttpBinding" 
                                     bindingConfiguration="basicHttpBinding_Svc"
                                     contract="MyNS.WebSrvLibrary.IEchoService"/>
        <endpoint name="mexHttpBinding" address="/Mex"
                                     binding="mexHttpBinding"
                                     contract="IMetadataExchange"/>
      </service>
    </services>
    <bindings>
      <basicHttpBinding>
        <binding maxReceivedMessageSize="2147483647" openTimeout="12:00:00" receiveTimeout="12:00:00" closeTimeout="12:00:00" sendTimeout="12:00:00">
          <readerQuotas maxStringContentLength="1310720"
                        maxArrayLength="16384"
                        maxBytesPerRead="24096"
                        maxDepth="10000"
                        maxNameTableCharCount="16384"/>
        </binding>
        <binding name="basicHttpBinding_Svc" maxReceivedMessageSize="2147483647" openTimeout="12:00:00" receiveTimeout="12:00:00" closeTimeout="12:00:00" sendTimeout="12:00:00">
          <readerQuotas maxStringContentLength="1310720"
                        maxArrayLength="16384"
                        maxBytesPerRead="24096"
                        maxDepth="10000"
                        maxNameTableCharCount="16384"/>
        </binding>
      </basicHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

所以，最后，我有一个客户端应用程序编译成一个可执行`.exe`文件，如下所示：

```
class Program {
  static void Main(string[] args) {
    IEchoService svc = EchoService.GetChannel("http://localhost:80/T/Service.svc");
    EchoMessageResponse rmsp = svc.Echo(new EchoMessage("Hello"));
    System.Threading.Thread.Sleep(10000);
  } /* Main */
} /* Program */ 
```

### 有关服务器端事务的信息

Web 应用程序托管在*默认网站*的 IIS 中，当然侦听端口 80。

## 问题

当我运行我的可执行应用程序时，我得到了这个`System.ServiceModel.CommunicationException`异常：

> 接收对 的 HTTP 响应时出错 `http://localhost/T/Service.svc`。这可能是由于服务端点绑定未使用 HTTP 协议。这也可能是由于服务器中止了 HTTP 请求上下文（可能是由于服务关闭）。有关更多详细信息，请参阅服务器日志。

谁`innerException`是类型`System.Net.WebException`：：

> 底层连接已关闭：接收时发生意外错误。

谁`innerException`（异常树中的最后一个）是类型`System.Net.Sockets.SocketException`：

> 现有连接被远程主机强行关闭。

完整的堆栈如下：

> 服务器堆栈跟踪：在 System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException(WebException webException, HttpWebRequest request, HttpAbortReason abortReason)
> 在 System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply（TimeSpan 超时） 在 System.ServiceModel.Channels.RequestChannel.Request（消息消息，TimeSpan 超时） 在 System.ServiceModel.Dispatcher.RequestChannelBinder.Request（消息消息，TimeSpan超时）在 System.ServiceModel.Channels.ServiceChannel.Call（字符串操作，布尔单向，ProxyOperationRuntime 操作，Object[] 输入，Object[] 输出，TimeSpan 超时）在 System.ServiceModel.Channels.ServiceChannelProxy.InvokeService（IMethodCallMessage methodCall，ProxyOperationRuntime操作）在 System.ServiceModel.Channels.ServiceChannelProxy.Invoke（IMessage 消息）
> 
> 在 [0] 处重新抛出异常：在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) 在 DDBR.DiscoveryServiceLibrary 的 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)。 C:\Data\ROOT_APPS\DistributedDataBackupAndRecovery\TestClient\Program.cs 中 DDBR.TestClient.Program.Main(String[] args) 的 IEchoService.Echo(EchoMessage msg)：System.AppDomain._nExecuteAssembly 的第 20 行（RuntimeAssembly 程序集，字符串[] args) 在 System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args) 在 Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
> 在 System.Threading.ThreadHelper.ThreadStart_Context(Object state)
> 在 System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx) 在 System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state) 在 System.Threading.ThreadHelper.ThreadStart()

可以在`StackTrace`第一个异常的属性中找到（初始异常，而不是内部异常）。

### 很奇怪的东西……

非常奇怪的是，如果我打开浏览器并输入：

```
http://localhost/T/Service.svc 
```

我得到了著名的 Microsoft IIS 屏幕，它公开了有关该服务的一些基本信息。这意味着 Web 服务处于活动状态并在指定地址（端点）运行。

我寻找了这个例外，但没有人有这些特点......通常涉及更详细和复杂的上下文。

该怎么办？

## 还有一件事...

您可能想知道为什么我不使用服务引用...因为我不想。这是有原因的。这里的重点是，`GetChannel`到目前为止，这种方法一直对我有用......不明白为什么我现在有问题......

实际上它应该是一个什么样的问题？不能超时真的不要相信这一点，它是一种简单的方法，在许多可能的方式中最快。很奇怪……真的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:54:00.393

看起来您需要向控制台应用程序添加服务引用并使用代理对象，而不是您正在使用的实际服务类。您正在将服务用作客户端。而不是通过将服务引用添加到客户端项目时创建的自动生成的代理类来调用服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T13:15:16.603

这个问题是`DataContract`相关的。在我用作传递给服务方法的消息的一个类中，我写错了一个属性，导致序列化程序经历循环......这导致`StackOverflow Exception`序列化程序变得狂暴并且连接被关闭。

我认为问题不是与数据相关的问题，并且没有为此提供代码。抱歉打扰各位了。至少我的问题可以提供一些关于错误的有用信息，`DataContracts`但通过查看异常描述无法真正掌握这些信息。

# cocoa - Cocoa (AppKit) 是否为标准 UTI 提供常量？

> ID：13046730
> 
> 赞同：2
> 
> 时间：2012-10-24T09:48:57.607
> 
> 标签：cocoa, uti

只是想知道 Cocoa 是否为标准 UTI 提供常量？目前我正在使用 NSPasteboard.h 中定义的 Pboard 类型，但它们在评论中被标记为弃用。是否有我应该将常量用于 UTI，或者我只是在我的应用程序中硬编码 NSString 值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T12:23:37.413

UTCoreTypes.h 包含一堆 UTI 定义，它们是 CFStringRef 但 NSString 免费

查看[TextEdit](http://developer.apple.com/library/mac/#samplecode/TextEdit/Introduction/Intro.html)示例，了解一些 UTI 用法，如 kUTTypeText、kUTTypeRTF 等

或查看[UTType 参考](http://developer.apple.com/library/mac/#documentation/MobileCoreServices/Reference/UTTypeRef/Reference/reference.html)

# c++ - mfc - 一次打开许多框架

> ID：13046734
> 
> 赞同：1
> 
> 时间：2012-10-24T09:49:35.837
> 
> 标签：c++, mfc

我有一个 C++ mfc 应用程序，我正在尝试使用 CMultiDocTemplate 一次打开许多文档。我发现应用程序在我为第 157 个文档调用 InitialUpdateFrame 时立即崩溃。谁能告诉我这个限制在哪里？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T10:29:13.810

最可能的原因 - 您达到了 Windows USER 或 GDI 对象限制。默认情况下，进程不能创建超过 10000 个 USER 和 10000 个 GDI 对象。如果您的文档视图包含大量控件/图形对象，则很容易超出限制。10000 / 157 = 63。

因此，如果您的文档视图创建了 63 个或更多[USER 对象](http://msdn.microsoft.com/en-us/library/windows/desktop/ms725486%28v=vs.85%29.aspx)（窗口、图标、光标等）或[GDI 对象](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724291%28v=vs.85%29.aspx)（位图、钢笔、画笔、字体等），MFC 将抛出[`CResourceException`](http://msdn.microsoft.com/en-us/library/xx1ef6z1%28v=vs.80%29.aspx)异常，如果您不明确处理它，应用程序将因以下原因中止未处理的异常。

很容易检查这是否是您问题的真正根本原因。打开任务管理器，选择`Processes`选项卡，在菜单`View->Select columns...`检查`USER Objects`和`GDI Objects`. 运行您的应用程序并查看您的应用程序进程消耗的对象数。

有关详细信息，请参阅这篇出色的文章：[突破 Windows 的限制：USER 和 GDI 对象](http://blogs.technet.com/b/markrussinovich/archive/2010/02/24/3315174.aspx)。

# java - 命令行

> ID：13046743
> 
> 赞同：0
> 
> 时间：2012-10-24T09:50:14.657
> 
> 标签：java, classpath

我目前正在使用 linux，我必须以形式运行命令

```
java -cp .:../jarfile.jar doc.DocDump <file> 
```

假设目前我在文件夹 /home/noor/downloads/commands/commandDump 中。假设，我需要从任何地方运行命令，我正在尝试下面的命令，但它没有运行。

假设我现在在家

```
java -cp .:/home/noor/downloads/commands/commandDump/../jarfile.jar doc.DocDump 
```

**“commands”文件夹包含 jarfile.jar，还包含一个文件夹“command”，然后包含一个文件夹“doc”，然后包含类“DocDump”**

我收到此错误：

```
 Exception in thread "main" java.lang.NoClassDefFoundError: Doc/DocDump
Caused by: java.lang.ClassNotFoundException: Doc.DocDump
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: doc.DocDump. Program will exit. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:57:38.727

我建议您查看清单文件文档，特别是[类路径](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html%20classpath)部分。

在清单文件中指定依赖项，除了在从命令行启动时允许更紧凑的语法外，还可以指定相对于主 jar 而不是当前目录的目录中的条目。

请记住，在这种情况下，您必须使用以下命令启动您的应用程序：

```
java -jar <<yourjar.jar>> <<options>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:51:57.380

Linux 在路径上区分大小写。您的路径包含“下载”目录，而在 java 命令中您正在使用“下载”目录。

此外，要运行的类将是相同的：`doc.DOCDump`无处不在。您使用`package.className`而不是类文件的某个路径来指定类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:53:40.710

您作为 main 提供的类文件不需要任何文件路径前缀。只需输入：

```
java -cp .:/home/noor/Downloads/commands/jarfile.jar doc.DocDump <file> 
```

虚拟机将`doc.DocDump`在类路径（您已经指定）中查找该类。

# iphone - facebook sso 3.1.1 与非 arc 启用项目的链接

> ID：13046744
> 
> 赞同：0
> 
> 时间：2012-10-24T09:50:18.773
> 
> 标签：iphone, facebook

我启动了非弧启用项目，并通过取消选择仅在 xocde 项目中引用它来拖放项目中的 /Users/imacfghdf/Documents/FacebookSDK/FacebookSDK.framework/Versions/A/DeprecatedHeaders 文件夹。

实际上我想为非 arc 启用项目实现 facebook SDK 3.1.1，并且也不在我的项目中使用完整的源文件夹项目..

我想要静态链接，因为我希望这只会给我带来问题，如果有任何帮助，那么请就好像有人和我一样有同样的问题..

但得到如下错误：

架构 i386 的未定义符号：“_OBJC_CLASS_$_Facebook”，引用自：AppDelegate.o 中的 objc-class-ref

正如我通过谷歌搜索发现 deprecatedHeaders 在其中使用 facebookSDK 文件夹，所以我只是使用但发现了这个问题：我的代码是：

# 导入“Facebook.h”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:51:20.500

确保您还拖入这些：

~/Documents/FacebookSDK/FacebookSDK.framework

~/Documents/FacebookSDK/FacebookSDK.framework/Versions/A/Resources/FacebookSDKResources.bundle

有关更多信息，请参阅入门文档：[https ://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)

仅当您希望将 Facebook 对话框（提要、请求）与较新的 API 一起使用时，才需要弃用的标头。如果您不需要使用 Facebook 对话框，则不需要包含已弃用的标头。

# android - 外部 jar 文件中的启动活动

> ID：13046747
> 
> 赞同：6
> 
> 时间：2012-10-24T09:50:32.390
> 
> 标签：android, android-activity, jar

假设我们有一个活动，它是 jar 库中的资源，那么我们将从主 apk 应用程序启动它，但它对我不起作用。

结果：android.content.ActivityNotFoundException：找不到明确的活动类 {com.mycompany.myapp/EXTERNAL_ACTIVITIES.OtherActivity}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:55:57.170

首先，您必须将 jar 放入 /libs 然后检查您的应用程序是否管理库：右键单击-> android 工具-> 添加库支持

然后，只需在您的活动清单链接中添加一个经典活动：

```
<activity android:name="com.xxx.yyyyy.zzzzz"
        android:label="@string/app_name"
        android:screenOrientation="portrait"
        android:noHistory="true">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T15:10:22.583

最后，我以类似的方式找到了答案。以前我想将一个 Jar 库（包含一个活动）放入其他 android 项目中，但我发现我可以在以下步骤中将所有库代码包含在新项目中： 1- 右键单击​​ apk 项目并转到属性。2- 从左表中选择“Android”。3-单击“是库”复选框下方底部面板中的“添加...”按钮。4- 从打开的列表中单击适当的库项目。

结果会很有趣。您的“gen”文件夹中将有两个包和两个“R.java”，并且您的 id 将包含在第二个项目中。您可以访问库项目的变量。

当您开始构建命令时，它只会包含使用过的包和类。

# c# - yield return new WaitForSeconds(2) 破坏函数

> ID：13046749
> 
> 赞同：2
> 
> 时间：2012-10-24T09:51:00.240
> 
> 标签：c#, unity3d, yield-return

我决定创建一个像游戏一样的小记忆，用unity3d学习游戏开发。
游戏应在玩家点击卡片后等待 2 秒，然后再将卡片翻转回来。
-statement`yield return new WaitForSeconds(2)`应该是完美的，但它的效果是没有执行函数的任何行。

这是我的代码：

这将构建卡片网格（带有按钮）并在卡片被点击时调用一个函数来翻转卡片。

```
Card card = grid[i, j];

if (GUILayout.Button(new GUIContent((Texture) Resources.Load(card.getImg()), ""), GUILayout.Width(cardWidth))) {
  Debug.Log("Call FlipCard");
  FlipCardFaceUp(card);
  Debug.Log("Returned from FlipCard");
} 
```

这是翻转功能：

```
System.Collections.IEnumerable FlipCardFaceUp(Card card) {
    Debug.Log("This isn't shown in the console");
    card.isFaceUp = true;

    if (!cardsFlipped.Contains(card)) {
        cardsFlipped.Add(card);

        if (cardsFlipped.Count >= 2) {
            playerCanClick = false;
            //Waiting 2 seconds before the cards are flipped back or are removed
            yield return new WaitForSeconds(2);

            if (cardsFlipped[0].id == cardsFlipped[1].id) {
                cardsFlipped[0].isMatched = true;
                cardsFlipped[1].isMatched = true;
            } else {
                cardsFlipped[0].isFaceUp = false;
                cardsFlipped[1].isFaceUp = false;
            }

            cardsFlipped.Clear();
            playerCanClick = true;
        } 
    }
} 
```

这是控制台输出，当我测试我的游戏并单击一张卡片时：

```
Call FlipCard
Returned from FlipCard 
```

如果我删除了 所需的东西，`yield return`一切正常（除了玩家看不到第二张牌，因为它会立即翻转回来）。

我的收益回报有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T09:57:11.283

您需要使用以下命令启动协程[`StartCoroutine`](http://docs.unity3d.com/Documentation/ScriptReference/MonoBehaviour.StartCoroutine.html?from=Coroutine)：

```
StartCoroutine(FlipCardFaceUp(card)); 
```

正如 Marc Gravell 所说，需要枚举一个迭代器块来做任何事情，这就是做的事情`StartCoroutine`（异步，可能还有统一所需的其他东西）。“异步”部分也是`"Returned from FlipCard"`在协程完成之前立即打印的原因。

如果你想在打印之前等待你的协程完成`"Return from FlipCard"`，你也可以使用`yield`：

```
Debug.Log("Call FlipCard");
yield return StartCoroutine(FlipCardFaceUp(card));
Debug.Log("Returned from FlipCard"); 
```

请注意，您不能使用`yield`from inside `Update`or `FixedUpdate`。

编辑：看到您正在尝试在该`OnGUI`方法中执行此操作，更好的方法可能是在那里使用类型变量，`Card`以便您可以记住要翻转的卡片。然后，在 中`Update`，您可以检查该变量，如果它说需要翻转卡片，则可以启动协程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T09:55:03.887

通过添加`yield return`，您已使其成为迭代器块。迭代器块仅**在迭代时**执行——它们展示了“延迟执行”。因此，要使其正常工作，您需要*使用*返回的枚举。最简单的可能是：

```
foreach(var obj in FlipCardFaceUp(card)) {} 
```

然而，unity 可能会以其他方式将其作为协同程序**更新**来使用：*确实；请参阅 Botz3000 的回答*。在大多数 UI 中，阻塞更新代码是不好的（它会阻止绘制），但是如果没有统一知识，我无法就正确的实现提出建议。据我所知，它可能希望您将*调用*代码转换为迭代器块：

```
// the following is COMPLETE GUESSWORK - I've never coded unity
// update: wrong: see Botz3000's answer, and `StartCoroutine`
Card card = grid[i, j];

if (GUILayout.Button(new GUIContent((Texture) Resources.Load(card.getImg()), ""), GUILayout.Width(cardWidth))) {
  foreach(var step in FlipCardFaceUp(card)) yield return step;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T10:01:03.640

只有`yield return new WaitForSeconds(2)`在通过`StartCoroutine`. 您的第一个代码块将立即返回，但 Unity3d 将负责运行您的方法的其余部分（包括 2 秒的等待和之后的继续）。

# android - MediaPlayer 错误代码的完整列表

> ID：13046753
> 
> 赞同：33
> 
> 时间：2012-10-24T09:51:09.383
> 
> 标签：android, android-mediaplayer

我正在实施一个`MediaPlayer`. 一切都很顺利，但每次我遇到一个新错误时，很难找到它的含义。该领域缺乏官方文档，因此像堆栈溢出这样的网站是唯一的解决方案，这一次甚至这不起作用（错误（1；-107）顺便说一句）。

那么是否有一个集中点可以找到所有 MediaPlayer 错误代码的列表？我在官方文档中找不到它，它对快速诊断新错误非常有帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-09-11T11:38:22.583

有几个地方定义了错误。

*   理论上，一切都应该在[MediaPlayer.java中定义](http://developer.android.com/reference/android/media/MediaPlayer.html)
*   但有些代码只是在 C 中定义，在 Java 领域无法访问，请参阅[MediaErrors.h](https://android.googlesource.com/platform/frameworks/av/+/master/media/libstagefright/include/media/stagefright/MediaErrors.h)
*   还有[pvmf_return_codes.h](https://github.com/android/platform_external_opencore/blob/master/pvmi/pvmf/include/pvmf_return_codes.h)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-24T10:12:04.857

只需浏览这些[pvmf 返回代码](https://github.com/aosp-mirror/platform_external_opencore/blob/master/pvmi/pvmf/include/pvmf_return_codes.h)和[每个错误的完整说明](https://github.com/aosp-mirror/platform_external_opencore/blob/master/doc/pvmf_return_codes.pdf)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T10:09:58.520

您可以在[此处](https://github.com/android/platform_external_opencore/blob/master/pvmi/pvmf/include/pvmf_return_codes.h)的源代码中找到它们。并将您的错误编号与那里给出的每个常量进行比较

# java - 如何读取文件夹，计算文件并复制到新文件夹

> ID：13046757
> 
> 赞同：1
> 
> 时间：2012-10-24T09:51:26.773
> 
> 标签：java, copy, location, directory

对我之前的问题的跟进 - [Java：如何读取目录文件夹，计算和显示文件数量并复制到另一个文件夹？](https://stackoverflow.com/questions/13045326/java-how-to-read-directory-folder-count-and-display-no-of-files-and-copy-to-an)，我要读取一个文件夹，统计文件夹中的文件（任何文件类型），显示文件数量，然后将其复制到新文件夹。但是，我收到以下异常：

> 线程“主”java.io.FileNotFoundException 中的异常：C:\project\curFolder（访问被拒绝）C:\project\newFolder 已经存在：继续处理！在 java.io.FileInputStream.open(Native Method) 在 java.io.FileInputStream.(FileInputStream.java:120) 在 filetransfer.FileTransfer.copyFiles(FileTransfer.java:54) 在 filetransfer.FileTransfer.checkDir(FileTransfer.java: 44) 在 filetransfer.FileTransfer.readDirectory(FileTransfer.java:29) 在 filetransfer.FileTransfer.main(FileTransfer.java:12) Java 结果：1 BUILD SUCCESSFUL（总时间：0 秒）

请记住我是学生。这是我到目前为止所做的：

```
public class FileTransfer {

    public static void main(String[] args) throws FileNotFoundException, IOException {
         readDirectory();
    }

public static void readDirectory() throws FileNotFoundException, IOException {
        //create new file object with location of folder
        File curFolder = new File("C:/project/curFolder/");
        int totalFiles = 0;
        //for loop to count the files in the directory using listfiles method
        for (File file : curFolder.listFiles()) {
            //determine if the file object is a file
            if (file.isFile()) {
                //count files ++
                totalFiles++;
            }
        }
        //display number of files in directory
        System.out.println("Number of files: " + totalFiles);
        checkDir();
    }

    public static void checkDir() throws FileNotFoundException, IOException {
        //check if destination directory exist, if not create directory
        //create new file object with copy folder destination
        File newFolder = new File("C:/project/newFolder/");
        //Check if folder exist: True: Println with message(true and continuing)
        if (newFolder.exists()) {
            System.out.println(newFolder + " already exist: Continuing with process!");
        } else {
            //False: Create Dir
            newFolder.mkdir();
            System.out.println(newFolder + " created!");
        }
        copyFiles();
    }

    public static void copyFiles() throws FileNotFoundException, IOException {
        //copy files from specified directory to new directory
        File fromCur = new File("C:/project/curFolder/");
        File toNew = new File("C:/project/newFolder/");
        FileInputStream from = null;
        FileOutputStream to = null;
        try {
            from = new FileInputStream(fromCur);
            to = new FileOutputStream(toNew);
            byte[] buffer = new byte[4096];
            int bytesRead;

            while ((bytesRead = from.read(buffer)) != -1) {
                to.write(buffer, 0, bytesRead);
            }
        } finally {
            if (from != null) {
                try {
                    from.close();
                } catch (IOException e) {
                    System.out.println(e.getMessage());
                }
            }
            if (to != null) {
                try {
                    to.close();
                } catch (IOException e) {
                    System.out.println(e.getMessage());
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:18:56.453

您要做的是复制文件夹本身，而不是其中的文件。尝试更改`copyFiles`方法的这一部分：

```
 File fromCur = new File("C:/project/curFolder/");
        File toNew = new File("C:/project/newFolder/");
        FileInputStream from = null;
        FileOutputStream to = null;

    try {

    to = new FileOutputStream(toNew);
    byte[] buffer = new byte[4096];
    int bytesRead;

    for (File fileTemp : fromCur.listFiles()) {
     if (fileTemp.isFile()) {
        from = new FileInputStream(fileTemp);
         while ((bytesRead = from.read(buffer)) != -1) {
          to.write(buffer, 0, bytesRead);
         }
     }
    } 
```

循环时，这将引用您文件夹**中**的文件，而不是文件夹本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:19:06.060

错误在于以下行：

```
from = new FileInputStream(fromCur); 
```

因为`C:\project\curFolder`是文件夹而不是文件。根据[`FileInputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html#FileInputStream%28java.io.File%29)文档，您看到的异常是正确的。

> 抛出： **FileNotFoundException** - 如果文件不存在，*是目录*而不是常规文件，或者由于某些其他原因无法打开读取。

（我在上面引用的重点）

我相信您可能会想要检查输入文件[是否是一个目录](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#isDirectory%28%29)，然后[列出文件](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles%28%29)并逐个复制它们。

# .net - 使用 MvcSiteMapProvider 未正确显示面包屑级别（超过 2 个）

> ID：13046759
> 
> 赞同：2
> 
> 时间：2012-10-24T09:51:31.523
> 
> 标签：.net, asp.net-mvc-2, sitemap, breadcrumbs, mvcsitemapprovider

我正在使用 MvcSiteMapProvider，它有时只显示 2 级面包而不是 3 或 4 级。

代替：

```
Categories > List > item1 
```

只显示：

```
List > item1 
```

这是我的 Mvc.sitemap：

```
<?xml version="1.0" encoding="utf-8" ?>
<mvcSiteMap xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xmlns="http://mvcsitemap.codeplex.com/schemas/MvcSiteMap-File-2.0"
            xsi:schemaLocation="http://mvcsitemap.codeplex.com/schemas/MvcSiteMap-File-2.0 MvcSiteMapSchema.xsd"
            enableLocalization="true">
<mvcSiteMapNode title="$resources:mvc.sitemap,menu_Home" controller="Home" action="Index" visibility="InSiteMapPathOnly" changeFrequency="Always">
<mvcSiteMapNode title="$resources:mvc.sitemap,menu_Categories" controller="Category" action="Categories">
            <mvcSiteMapNode title="$resources:mvc.sitemap,menu_List" controller="Category" action="Index">
                <mvcSiteMapNode title="$resources:mvc.sitemap,menu_item1" controller="Category" action="Action1" />
                <mvcSiteMapNode title="$resources:mvc.sitemap,menu_item2" controller="Category" action="Action2"/>
            </mvcSiteMapNode>
</mvcSiteMapNode>
</mvcSiteMap> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T20:49:04.070

出现此问题的原因可能是 Mvc.sitemap 文件的内容无效。Home/Index 控制器/操作的`mvcSiteMapNode`标签缺少结束标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-14T03:24:51.143

上面的帖子中有一个错字（第一个 mvcSiteMapNode 中缺少 /），但修复后问题仍然存在。

但是，这个问题在新版本的 MvcSiteMapProvider MVC4（和 MvcSiteMapProvider MVC5）中得到了修复。

工作代码：

```
<?xml version="1.0" encoding="utf-8" ?>
<mvcSiteMap xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xmlns="http://mvcsitemap.codeplex.com/schemas/MvcSiteMap-File-2.0"
            xsi:schemaLocation="http://mvcsitemap.codeplex.com/schemas/MvcSiteMap-File-2.0 MvcSiteMapSchema.xsd"
            enableLocalization="true">
<mvcSiteMapNode title="$resources:mvc.sitemap,menu_Home" controller="Home" action="Index" visibility="InSiteMapPathOnly" changeFrequency="Always" />
<mvcSiteMapNode title="$resources:mvc.sitemap,menu_Categories" controller="Category" action="Categories">
            <mvcSiteMapNode title="$resources:mvc.sitemap,menu_List" controller="Category" action="Index">
                <mvcSiteMapNode title="$resources:mvc.sitemap,menu_item1" controller="Category" action="Action1" />
                <mvcSiteMapNode title="$resources:mvc.sitemap,menu_item2" controller="Category" action="Action2"/>
            </mvcSiteMapNode>
</mvcSiteMapNode>
</mvcSiteMap> 
```

# ios - 如何重叠 UITableViewCells？

> ID：13046762
> 
> 赞同：11
> 
> 时间：2012-10-24T09:51:44.107
> 
> 标签：ios, objective-c, uitableview, overlap

![在此处输入图像描述](../Images/c19a10594ae8e830bdb68ae0aae947a6.png)

如果您查看屏幕截图，您会注意到每个 UITableViewCell 从顶部到上部 tableview 单元格有 20% 的重叠。

有什么方法可以重叠单元格吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-24T10:01:31.790

我从未尝试过，但这种逻辑会起作用。请记住，您不会在重叠区域获得任何触摸。

1）将您的子视图添加到`cell.contentView`，确保子视图高度大于`rowHeight`您的tableView。

```
float overlapHeight  = 10.0;

subView.frame = CGRectMake(0.0, -10.0, 
                  your_subview_width, rowHeight + overlapHeight); 
```

2）添加此代码，以便您的单元格不会在其框架之外剪切内容

```
cell.clipsToBounds = NO;
cell.contentView.clipsToBounds = NO; 
```

3）现在您的单元格将重叠，但单元格的边界周围会有一个剪辑标记。为了避免实现 willDisplayCell 委托函数

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
    cell.backgroundColor = [UIColor clearColor];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:09:10.880

通过将单元格组成两部分，可以在视觉上实现重叠效果：顶部较窄，底部较宽。底部很简单：它是一个灰色的矩形，里面有一个文本/图像组件。诀窍在于顶部的部分。

顶部的高度等于整个彩色标签的高度。您的程序可以在其中放置两个图像中的一个 - 要么是代表前一个单元格底部的窄灰色条顶部的选项卡，要么是棕色背景顶部的选项卡。在你的`tableView:cellForRowAtIndexPath:`检查里面`row`。如果为零，则选择棕色背景的图像；否则，请选择顶部背景中带有灰色条带的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T10:15:00.243

无需重叠单元格。您的顶部单元格应如下所示：

![在此处输入图像描述](../Images/d0a88199b6c8f561c76bcf4e4eae7299.png)

所有剩余的单元格应如下所示：

![在此处输入图像描述](../Images/d7034d14b83464f8f4ef4f0aa8bd4dd8.png)

您`tableFooterView`应该只是一个灰色条（单元格的“底部”）

# requirejs - 如何在尊重 AMD 约定的同时在全局环境中定义模块？

> ID：13046763
> 
> 赞同：0
> 
> 时间：2012-10-24T09:51:44.827
> 
> 标签：requirejs, js-amd

我正在用 JavaScript 构建一个项目，我想尊重 AMD 约定，但我需要我的项目可以从全局环境中使用（只需添加它的名称）。

Dojo 是一个完美的例子，因为它正是我想要的：有效的 AMD，但 Dojo 可以从全局环境中获得。我试图查看他们的来源，但没有找到他们定义 Dojo 的地方。

到目前为止，我想出的唯一解决方案是：

项目.js：

```
var Project = {
    // some stuffs in there
}; 
```

模块.js：

```
require(['project'], function () {
    Project.Module = {
        // some stuffs in there
    };
}); 
```

我知道这不是最好的方法，我相信 module.js 应该返回`{}`，而不是定义它。

什么是最好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:45:21.720

我认为一个不错的选择是检查定义，如果可用，将您的项目定义为模块。

```
if ( typeof define === "function"){
  define('project', [], function(){ return project; })
} 
```

# database - 无法使用 Navicat 从 sqlite db 中删除记录

> ID：13046765
> 
> 赞同：1
> 
> 时间：2012-10-24T09:51:48.973
> 
> 标签：database, sqlite, navicat

我无法使用 Navicat 从 sqlite db 中删除记录。错误内容为：“错误约束失败”

如果我尝试使用 sql 命令在控制台中删除，我会得到同样的结果：

```
sqlite> delete from myTable where sort = '965';
constraint failed
sqlite> 
```

知道为什么会发生这种情况。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:21:09.310

看起来这个表有一个字段，它在另一个表中被引用为 FK，所以 SQlite 说

```
"I can,'t delete it, its inuse in another table" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:27:52.977

使用shell的`.schema`命令来显示所有的表定义。`sqlite3`然后您可以查看哪个约束`myTable`或子表阻止您删除。

如果另一个表中存在外键约束，则必须先删除该表中引用您的`965`记录的所有记录，然后才能删除该记录本身。

# flash - 如何从 adobe flash cs5.5 中的现有按钮制作新按钮？

> ID：13046766
> 
> 赞同：0
> 
> 时间：2012-10-24T09:51:49.197
> 
> 标签：flash, adobe

我有这样一个问题：我有一个 MovieClip A1。在这个影片剪辑上，有三个影片剪辑按钮，其实例名称为：b1、b2、b3。

我想添加新按钮，我希望它与其他 3 个按钮相同，但上面有不同的图像和实例名称 b4。所以我正在使用按钮 b1 对其进行复制，编辑该复制并将其放入影片剪辑 A1 到实例名称为 b4 的其他按钮。但在此之后，没有什么是可行的。如果我把不同的按钮放在那里 - 一切都好，以其他方式 - 它不起作用。如何添加看起来像其他三个按钮的新按钮？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T08:33:30.353

您不能复制/复制“b1”并将其编辑为“b4”，因为它也会更改您的“b1”。因为它就像改变你的班级。

试试看：右键单击您的“b1”，单击“重复符号...”，然后重命名它（您有一个新类）然后您可以更改图片而不更改“b1”

# html - html颜色代码到uicolor

> ID：13046773
> 
> 赞同：-1
> 
> 时间：2012-10-24T09:52:04.697
> 
> 标签：html, uiwebview, colors, uicolor

在 UIWebview 中，我加载了一个背景颜色为#CBCDCF 的 html 页面。在之前的ViewController中（在这个ViewController中我没有使用UIWebview），我想将背景颜色设置为相同的值：#CBCDCF。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T07:23:16.740

你可以使用这样的宏

```
#define HEXCOLOR(c) [UIColor colorWithRed:((c>>24)&0xFF)/255.0 \
                                    green:((c>>16)&0xFF)/255.0 \
                                     blue:((c>>8)&0xFF)/255.0 \
                                    alpha:1.0] 
```

你可以这样做：

```
[yourViewController setBackgroundColor:HEXCOLOR(0xCBCDCF)] 
```

# android - 错误，没有活动来处理意图裁剪图像android

> ID：13046777
> 
> 赞同：0
> 
> 时间：2012-10-24T09:52:27.567
> 
> 标签：android, android-intent

我有像这样裁剪图像的代码

```
crop.setOnClickListener(new OnClickListener(){   

            @Override
            public void onClick(View arg0) {       

                mImageCaptureUri = Uri.parse(path);

                doCrop(); 
```

如果按钮裁剪被点击，它将运行此代码来裁剪图像

```
protected void doCrop(){

           final ArrayList<CropOption> cropOptions = new ArrayList<CropOption>();

            Intent intent = new Intent("com.android.camera.action.CROP");
            intent.setType("image/*");

            List<ResolveInfo> list = getPackageManager().queryIntentActivities( intent, 0 );

            int size = list.size();

            if (size == 0) {
                Toast.makeText(this, "Can not find image crop app", Toast.LENGTH_SHORT).show();

                return;
            } else {
                intent.setData(mImageCaptureUri);
                intent.setType("image/*");
                intent.putExtra("outputX", 200);
                intent.putExtra("outputY", 200);
                intent.putExtra("aspectX", 1);
                intent.putExtra("aspectY", 1);
                intent.putExtra("scale", true);
                intent.putExtra("return-data", true);
                //intent.putExtra("output", mImageCaptureUri);

                if (size == 1) {
                    Intent i        = new Intent(intent);
                    ResolveInfo res = list.get(0);
                    i.setComponent( new ComponentName(res.activityInfo.packageName, res.activityInfo.name));
                    startActivityForResult(i, HASIL_CROP);
                } else {
                    for (ResolveInfo res : list) {
                        final CropOption co = new CropOption();

                        co.title    = getPackageManager().getApplicationLabel(res.activityInfo.applicationInfo);
                        co.icon     = getPackageManager().getApplicationIcon(res.activityInfo.applicationInfo);
                        co.appIntent= new Intent(intent);
                        co.appIntent.setComponent( new ComponentName(res.activityInfo.packageName, res.activityInfo.name));

                        cropOptions.add(co);
                    }

                    CropOptionAdapter adapter = new CropOptionAdapter(getApplicationContext(), cropOptions);

                    AlertDialog.Builder builder = new AlertDialog.Builder(this);
                    builder.setTitle("Choose Crop App");
                    builder.setAdapter( adapter, new DialogInterface.OnClickListener() {
                        public void onClick( DialogInterface dialog, int item ) {
                            startActivityForResult( cropOptions.get(item).appIntent, CROP_FROM_CAMERA);
                        }
                    });

                    builder.setOnCancelListener( new DialogInterface.OnCancelListener() {
                        @Override
                        public void onCancel( DialogInterface dialog ) {

                            if (mImageCaptureUri != null ) {
                                getContentResolver().delete(mImageCaptureUri, null, null );
                                mImageCaptureUri = null;
                            }
                        }
                    } );

                    AlertDialog alert = builder.create();

                   alert.show();
                }    
            } 
```

我从这段代码中得到 mImageCaptureUri

```
String oldFile = path;
            String imageTemp = "E"+System.currentTimeMillis();
            path = tempPath + imageTemp + ".jpg";   //alamat temporari image
            FileOutputStream ostream = new FileOutputStream(path);

            b.compress(CompressFormat.JPEG, 50, ostream);
            ostream.close();

            mImageCaptureUri = Uri.parse(path); 
```

但是当我单击裁剪按钮时，它没有任何反应，Logcat 低于 10-24 16:47:21.669: INFO/ActivityManager(59): Starting activity: Intent { act=com.android.camera.action.CROP typ=image/* cmp =com.android.gallery/com.android.camera.CropImage（有附加功能）}

我认为是因为

```
intent.setData(mImageCaptureUri);
                    intent.setType("image/*"); 
```

但是如果我删除 intent.setType("image/*")，它会显示错误

```
10-24 16:51:24.549: ERROR/UriImage(345): got exception decoding bitmap 
10-24 16:51:24.549: ERROR/UriImage(345): java.lang.NullPointerException
10-24 16:51:24.549: ERROR/UriImage(345):     at com.android.camera.gallery.UriImage.getPFD(UriImage.java:67)
10-24 16:51:24.549: ERROR/UriImage(345):     at com.android.camera.gallery.UriImage.fullSizeBitmap(UriImage.java:93)
10-24 16:51:24.549: ERROR/UriImage(345):     at com.android.camera.gallery.UriImage.fullSizeBitmap(UriImage.java:86)
10-24 16:51:24.549: ERROR/UriImage(345):     at com.android.camera.gallery.UriImage.thumbBitmap(UriImage.java:120)
10-24 16:51:24.549: ERROR/UriImage(345):     at com.android.camera.CropImage.onCreate(CropImage.java:143)
10-24 16:51:24.549: ERROR/UriImage(345):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 
```

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:18:41.430

@ya Lya 检查 mImageCaptureUri 是否为空。如果不为空，则只有您必须执行进一步的任务。我**认为**mImageCaptureUri 为空。

# android - 日食的ADT 18在哪里？

> ID：13046779
> 
> 赞同：2
> 
> 时间：2012-10-24T09:52:28.967
> 
> 标签：android, eclipse, adt

我的 Eclipse 将 ADT 更新为 20，我认为这很糟糕，我希望得到 18。但是找不到从哪里下载。

在这里[https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)它只提供版本 20。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T09:57:12.810

下载此文件：

[http://dl.google.com/android/ADT-18.0.0.zip](http://dl.google.com/android/ADT-18.0.0.zip)

然后在安装新软件时，单击“添加...”，然后单击“存档...”，然后选择文件夹。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T09:58:22.097

你可以从

[http://dl.google.com/android/ADT-18.0.0.zip](http://dl.google.com/android/ADT-18.0.0.zip)

要获得任何其他版本，只需将 18 替换为其他版本。希望这可以帮助！

# android - 如何动态添加布局文件

> ID：13046786
> 
> 赞同：2
> 
> 时间：2012-10-24T09:52:47.263
> 
> 标签：android, android-layout

我有这个布局文件，其中包含用户应该有 1 到 3 个位置的用户位置的详细信息，具体取决于我需要添加 1 到 3 个位置表单的条件

![在此处输入图像描述](../Images/1548a9f6081458d45f8e501cfc829bf4.png)

谁能告诉我如何动态地将这个 xml 布局文件添加到其他布局文件中？

```
<?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:background="@drawable/container"
        android:padding="2dp"
        android:layout_below="@+id/upperBox"
        android:layout_margin="5dp"
        >
        <RelativeLayout 
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:background="@drawable/container_inner"
        android:padding="1dp"
        >

            <TableLayout
                android:layout_width="match_parent"
                android:layout_height="fill_parent"
                android:background="@color/white"
                android:orientation="vertical"
                android:scrollbars="vertical" >

                <TextView
                    style="@style/footerText"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/tracking_settings" />

                <TableRow
                    android:id="@+id/tableRow1"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content" >

                    <TextView
                        android:id="@+id/locationName"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="@string/location_name" />

                    <EditText
                        android:id="@+id/editTextLocationName"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:inputType="text" >

                        <requestFocus />
                    </EditText>
                </TableRow>

                <TableRow
                    android:id="@+id/tableRow2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                    <TextView
                        android:id="@+id/address"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="@string/address" />

                    <EditText
                        android:id="@+id/editextAddress"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:inputType="text" />
                </TableRow>

                <TableRow
                    android:id="@+id/tableRow3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                    <TextView
                        android:id="@+id/alertPref"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="@string/alert_preference" />

                    <Spinner
                        android:id="@+id/spinnerAlertPref"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:entries="@array/alert_pref_arrays"
                        android:prompt="@string/alert_pref_prompt" />
                </TableRow>

                <TableRow
                    android:id="@+id/tableRow4"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                    <TextView
                        android:id="@+id/frequency"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="@string/frequency" />

                    <Spinner
                        android:id="@+id/spinnerFreq"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:entries="@array/freq_arrays"
                        android:prompt="@string/freq_prompt" />
                </TableRow>

                <TableRow
                    android:id="@+id/tableRow5"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                    <TextView
                        android:id="@+id/TrackBetween"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="@string/track_between" />

                    <Spinner
                        android:id="@+id/spinnerTimeFrom"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:entries="@array/time_arrays"
                        android:prompt="@string/time_prompt" />
                </TableRow>

                <TableRow
                    android:id="@+id/tableRow6"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" />

                    <Spinner
                        android:id="@+id/spinnerTimeFrom1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:entries="@array/am_pm_arrays"
                        android:prompt="@string/am_pm_prompt" />
                </TableRow>

                <TableRow
                    android:id="@+id/tableRow7"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                    <TextView
                        android:id="@+id/to"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="@string/to" />

                    <Spinner
                        android:id="@+id/spinnerTimeTo"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:entries="@array/time_arrays"
                        android:prompt="@string/time_prompt" />
                </TableRow>

                <TableRow
                    android:id="@+id/tableRow8"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" />

                    <Spinner
                        android:id="@+id/spinnerTimeTo1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:entries="@array/am_pm_arrays"
                        android:prompt="@string/am_pm_prompt" />
                </TableRow>

                <TextView
                    style="@style/footerText"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/alert_settings" />

                <TableRow
                    android:id="@+id/tableRow9"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                    <TextView
                        android:id="@+id/sexOffenderIsWithin"
                        android:layout_width="100dp"
                        android:layout_height="wrap_content"
                        android:text="@string/sex_offender_is_within" />

                    <Spinner
                        android:id="@+id/spinnerSexOff"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:entries="@array/sex_offender_arrays"
                        android:prompt="@string/sex_offender_prompt" />
                </TableRow>

                <TableRow
                    android:id="@+id/tableRow10"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                    <TextView
                        android:id="@+id/travelAwayFromLocation"
                        android:layout_width="100dp"
                        android:layout_height="wrap_content"
                        android:text="@string/travel_away_from_location" />

                    <Spinner
                        android:id="@+id/spinnerTravelAway"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:entries="@array/sex_offender_arrays"
                        android:prompt="@string/sex_offender_prompt" />
                </TableRow>

                <TableRow
                    android:id="@+id/tableRow11"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                    <TextView
                        android:id="@+id/arriveAtLocation"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="@string/arrive_at_location" />

                    <Spinner
                        android:id="@+id/spinnerArriveAt"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:entries="@array/yes_donttrack_arrays"
                        android:prompt="@string/yes_donttrack_prompt" />
                </TableRow>

                <TableRow
                    android:id="@+id/tableRow12"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                    <TextView
                        android:id="@+id/travelByVehicle"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="@string/travel_by_vehicle" />

                    <Spinner
                        android:id="@+id/spinnerTravelBy"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:entries="@array/yes_donttrack_arrays"
                        android:prompt="@string/yes_donttrack_prompt" />
                </TableRow>

                <TableRow
                    android:id="@+id/tableRow13"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                    <TextView
                        android:id="@+id/phonStatus"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="@string/phon_status" />

                    <Spinner
                        android:id="@+id/spinnerPhonStatus"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:entries="@array/phon_status_arrays"
                        android:prompt="@string/phon_status_prompt" />
                </TableRow>

                <TableRow
                    android:id="@+id/tableRow14"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                    <TextView
                        style="@style/footerText"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="@string/cancel" />

                    <TextView
                        style="@style/footerText"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:gravity="right"
                        android:text="@string/submit" />
                </TableRow>
            </TableLayout>

            </RelativeLayout>
            </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:01:49.013

这个布局文件通过 LayoutInflater 在另一个布局中。

假设，您想在主布局中添加此布局。所以，在主布局中采用线性布局，在主布局中采用这个列表布局`mainlayout.add(view)`，这`view`是 LayoutInflater 视图。

例子 ：

```
private View view;
    view = getLayoutInflater().inflate(R.layout.image_sub_layout,
                null);
     topicLinearLayout.addView(view); // main Layout Linear layout 
```

谢谢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T10:04:19.243

假设您的第一个活动带有`main.xml`，其中是一个空的线性布局。

通过`LayoutInflater`你可以得到这样的布局

```
linearLayout = (LinearLayout) getLayoutInflater().inflate(R.layout.main, null);
layoutToAdd = (LinearLayout) getLayoutInflater().inflate(R.layout.layout_to_add, null); 
```

然后，您只需将所需的 xml-layout-file 添加到该 linearLayout （对于其他类型的布局，单`View`s 或`ViewGroup`s 也是如此）。

```
 linearLayout.add(layoutToAdd); 
```

或者正如 Abdul 建议的那样，您将所需的布局“投射”到视图中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T10:08:18.543

根据我的理解，您希望布局包含 1-3 个位置表单，具体取决于您要实现的条件。如果您确定要处理从 UI 输入的位置数量，则只需添加相同的用不同的 id 与`Visibility` to布局三次`GONE`。在从 UI 处理它时，您可以`view.VISIBLE`根据 UI 线程中的条件更改布局的可见性。

您可以插入 scrollView 的代码以使您的主布局可滚动以供最终用户使用。

# javascript - Javascript 中的 Base64 解码缺少一些在 c++ 中正确解码的字符

> ID：13046787
> 
> 赞同：0
> 
> 时间：2012-10-24T09:52:52.220
> 
> 标签：javascript, base64

我正在尝试解码从网络接收到的字符串-我有一个解码 base64 的 C++ 代码，并且我在 JS 中复制了此代码，但我得到的响应略有不同-重要的是要提到 C++ 响应是一个我需要...

要解码的字符串是：

> aXI4YlB5V2xshfYcsai4DYKFqLTn0KJDk0TTOzNwgKBlyfD7bvnSHuxzICs+ubUyoypzWSZK/vVDEMr+uHw8Of41OESh25ZfRAibxe7zyV+gSTFHBCaCryeb26KjVY6LretgDIWafd+Vvn/iw9aWGr9lT8ZMHY7KX3/Mk1O5I9BHnDiipZAegyp3r6x6yJYIgbYr08gbLD0Chjbkc6BzKhLc6/XK1g==

我需要得到的回应是：

> ir8bPyWll…ö±¨¸ ‚…¨´çÐ¢C“DÓ;3p€ eÉðûnùÒìs +>¹µ2£*sY&JþõCÊþ¸|<9þ58D¡Û–<em>D›ÅîóÉ</em> I1G&,¯'›Û¢£ UŽ‹ë`...š}ß•¾âÃÖ–¿eOÆLŽÊ_Ì“S¹#ÐGœ8¢¥ƒ*w¯¬zÈ–¶+ÓÈ,=†6äs s*ÜëõÊÖ

相反，我得到：

> ir8bPyWllö±¨¸ ¨´çÐ¢CDÓ;3p eÉðûnùÒìs +>¹µ2£*sY&JþõCÊþ¸|<9þ58D¡Û_DÅîóÉ_ I1G&¯'Û¢£Uë`}ß¾âÃÖ¿eOÆLÊ_ÌS¹#ÐG8¢¥*,w¯¬zÈ¶+Ó 6äs s*ÜëõÊÖ

除了特定字符外，它们非常相似：而不是 ‚... 我得到 ¨´ 和其他几个小差异 - 是什么导致了这种差异？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:56:00.927

*在显示*您解码的内容时，这听起来像是某种编码问题。如果您收到有效的编码数据，那么我不明白为什么您会收到错误的解码数据。

# ruby-on-rails-3 - 我可以在设计用户模型中使用acts_as_tenant 吗？

> ID：13046788
> 
> 赞同：0
> 
> 时间：2012-10-24T09:52:55.593
> 
> 标签：ruby-on-rails-3, devise, multi-tenant

我的设计模型名称是用户。当我将它与acts_as_tenant结合使用时，

```
class User < ActiveRecord::Base
   acts_as_tenant(:tenant) 
```

我得到了一些奇怪的行为：当用户登录到一个租户时，一切都很好。一旦有人登录另一个租户，第一个租户的用户就会被踢出。

我想将用户模型设置为acts_as_tenant，因为应该在每个租户内管理用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:59:41.780

问题已解决： [https ://github.com/ErwinM/acts_as_tenant/issues/20](https://github.com/ErwinM/acts_as_tenant/issues/20)

这似乎是线程安全的问题。

# java - Java Runtime.getRunTime().exec(CMD) 不支持管道

> ID：13046789
> 
> 赞同：2
> 
> 时间：2012-10-24T09:52:59.527
> 
> 标签：java, windows, command, cmd, pipe

我正在尝试编写一个程序，该程序将显示并能够使用 JFrame 窗口更新您的 IP 地址设置。我正在考虑纯粹在 Windows 上运行它，所以我试图能够使用 netsh windows 命令来检索/设置详细信息。

windows命令： `netsh interface ip show config name="Local Area Connection" | Find "IP"` 完全返回我想要的，但是我编写的代码无法通过管道运行，只有在我写入“本地连接”部分时它才会起作用。

有没有办法使用管道功能来专门返回 IP 地址？我读到您可以将行作为字符串数组传递，即 String[] cmd = netsh........

```
package ipchanger;

import java.io.BufferedReader;
import java.io.InputStreamReader;

public class test {

    private String CMD;

public void executecommand(String CMD) {
        this.CMD = CMD;

        try {
            // Run whatever string we pass in as the command
            Process process = Runtime.getRuntime().exec(CMD);

            // Get input streams
            BufferedReader stdInput = new BufferedReader(new InputStreamReader(process.getInputStream()));
            BufferedReader stdError = new BufferedReader(new InputStreamReader(process.getErrorStream()));

            // Read command standard output
            String s;
            System.out.println("Standard output: ");
            while ((s = stdInput.readLine()) != null) {
                System.out.println(s);

            }

            // Read command errors
            System.out.println("Standard error: ");
            while ((s = stdError.readLine()) != null) {
                System.out.println(s);
            }
        } catch (Exception e) {
            e.printStackTrace(System.err);
        }
}

public test() {
    String FINDIP = "netsh interface ip show config name=\"Local Area Connection\" | Find \"IP\"";
    //System.out.println(FINDIP);
    executecommand(FINDIP);

}

public static void main(String[] args) {
    new test();
}
} 
```

以为你们能帮上忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-23T02:06:58.597

幸运的是，有一种方法可以运行包含**管道**的命令。该命令必须以 为前缀`cmd /C`。例如：

```
public static void main(String[] args) throws Exception {
    String command = "cmd /C netstat -ano | find \"3306\"";
    Process process = Runtime.getRuntime().exec(command);
    process.waitFor();
    if (process.exitValue() == 0) {
        Scanner sc = new Scanner(process.getInputStream(), "IBM850");
        sc.useDelimiter("\\A");
        if (sc.hasNext()) {
            System.out.print(sc.next());
        }
        sc.close();
    } else {
        Scanner sc = new Scanner(process.getErrorStream(), "IBM850");
        sc.useDelimiter("\\A");
        if (sc.hasNext()) {
            System.err.print(sc.next());
        }
        sc.close();
    }
    process.destroy();
} 
```

* * *

*笔记*

*   Windows 的控制台使用`IBM850`编码。请参阅*[java 控制台输出的默认字符编码](https://stackoverflow.com/questions/24803733/default-character-encoding-for-java-console-output)*。
*   请参阅[*Stupid Scanner 技巧...*](https://weblogs.java.net/blog/pat/archive/2004/10/stupid_scanner.html)了解`useDelimiter("\\A")`.

# php - PHP preg-replace bbcodes

> ID：13046790
> 
> 赞同：1
> 
> 时间：2012-10-24T09:53:08.420
> 
> 标签：php, regex, bbcode

请创建一个 wap 论坛，我希望管理员能够从名为 mycodes 的数据库中添加 bbcodes，其列：id、name、code、html

```
Row1
Name: bold
Code: \[b\](.*?)\[/b]
Html: < b >$1< / b >

Row2
Name: undaline
Code: \[u\](.*?)\[/u]
Html: < u >$1< / u > 
```

当我使用 preg replace 时，它​​仅在我有一行时才起作用，如果我有不止一行，它将不起作用，它只会解析粗体而不是下划线？

```
function myparse($text){
  $q = mysql_query("SELECT * FROM mycodes");
  while($row = mysql_fetch_array($q)) {
    $code=$row['code'];
    $html=$row['html']
    $Result=preg_replace('#'.$code.'#is', $html, $text);
    return $result;
  }
}

myparse("hey am [b]bold[/b] but he is [u]undalined[/u]"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:09:59.837

为什么要重新发明轮子：

[http://www.christian-seiler.de/projekte/php/bbcode/index_en.html](http://www.christian-seiler.de/projekte/php/bbcode/index_en.html)（也有一些替代品的链接）

甚至 PECL 库：[http ://uk1.php.net/manual/en/book.bbcode.php](http://uk1.php.net/manual/en/book.bbcode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:11:59.837

我在您的 myparse 函数中看不到任何循环您的代码行的内容。因此，根据您当前的代码，您需要一个循环来多次调用 preg_replace：

```
function myparse($text){
    // Loop through rows (this might be a database or whatever stores your rows.
    // Since your code doesn't tell us I'll assume it's an array for now
    foreach ($rows as $row) {
        $code=$row['code'];
        $html=$row['html'];
        $Result=preg_replace('#'.$code.'#is', $html, $text);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T10:36:06.447

您的代码中有几个错误。正确的功能应该是这样的：

```
function myparse($text){
    $q = mysql_query("SELECT * FROM mycodes");
    while($row = mysql_fetch_array($q)) {
        $code=$row['code'];
        $html=$row['html']
        $text=preg_replace('#'.$code.'#is', $html, $text);
    }
    return $text;
} 
```

在您的代码中 - 实际上只使用了 mycodes 中的第一行。

# emacs - 如何删除emacs中的重复行

> ID：13046791
> 
> 赞同：28
> 
> 时间：2012-10-24T09:53:12.890
> 
> 标签：emacs, elisp

我有很多行的文本，我的问题是如何删除 emacs 中的重复行？在没有外部工具的 emacs 或 elisp 包中使用该命令。

例如：

```
this is line a
this is line b
this is line a 
```

删除第 3 行（与第 1 行相同）

```
this is line a
this is line b 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2015-02-10T14:27:24.950

如果您有 Emacs 24.4 或更新版本，最简洁的方法就是使用新`delete-duplicate-lines`功能。注意

*   这适用于区域，而不是缓冲区，因此请先选择所需的文本
*   它保持原件的相对顺序，杀死重复件

例如，如果您的输入是

```
test
dup
dup
one
two
one
three
one
test
five 
```

`M-x delete-duplicate-lines`会成功的

```
test
dup
one
two
three
five 
```

您可以选择通过在其前面加上通用参数 ( `C-u`) 来向后搜索。结果将是

```
dup
two
three
one
test
five 
```

[归功于](http://emacsredux.com/blog/2014/03/01/a-peek-at-emacs-24-dot-4-delete-duplicate-lines/)emacsredux.com 。

其他回旋处选项，不给出完全相同的结果，可通过 Eshell 获得：

1.  `sort -u`; 不保持原件的相对顺序
2.  `uniq`; 更糟糕的是，它需要对其输入进行排序

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-24T10:03:45.710

将此代码放入您的 .emacs：

```
(defun uniq-lines (beg end)
  "Unique lines in region.
Called from a program, there are two arguments:
BEG and END (region to sort)."
  (interactive "r")
  (save-excursion
    (save-restriction
      (narrow-to-region beg end)
      (goto-char (point-min))
      (while (not (eobp))
        (kill-line 1)
        (yank)
        (let ((next-line (point)))
          (while
              (re-search-forward
               (format "^%s" (regexp-quote (car kill-ring))) nil t)
            (replace-match "" nil nil))
          (goto-char next-line)))))) 
```

用法：

```
M-x uniq-lines 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-02-07T16:00:50.510

在linux中，选择区域，然后输入

```
M-| uniq <RETURN> 
```

没有重复的结果在新缓冲区中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T11:09:49.807

```
(defun unique-lines (start end)
  "This will remove all duplicating lines in the region.
Note empty lines count as duplicates of the empy line! All empy lines are 
removed sans the first one, which may be confusing!"
  (interactive "r")
  (let ((hash (make-hash-table :test #'equal)) (i -1))
    (dolist (s (split-string (buffer-substring-no-properties start end) "$" t)
               (let ((lines (make-vector (1+ i) nil)))
                 (maphash 
                  (lambda (key value) (setf (aref lines value) key))
                  hash)
                 (kill-region start end)
                 (insert (mapconcat #'identity lines "\n"))))
      (setq s                           ; because Emacs can't properly
                                        ; split lines :/
            (substring 
             s (position-if
                (lambda (x)
                  (not (or (char-equal ?\n x) (char-equal ?\r x)))) s)))
      (unless (gethash s hash)
        (setf (gethash s hash) (incf i)))))) 
```

替代：

*   不会使用撤消历史来存储匹配项。
*   通常会更快（但如果您追求终极速度 - 构建前缀树）。
*   具有替换所有以前的换行符的效果，无论它们是什么`\n`（UNIX 样式）。根据您的情况，这可能是一个好处或一个缺点。
*   `split-string`如果您以接受字符而不是正则表达式的方式重新实现，您可以让它更好一点（更快） 。

* * *

稍长一些，但也许是更有效的变体：

```
(defun split-string-chars (string chars &optional omit-nulls)
  (let ((separators (make-hash-table))
        (last 0)
        current
        result)
    (dolist (c chars) (setf (gethash c separators) t))
    (dotimes (i (length string)
                (progn
                 (when (< last i)
                   (push (substring string last i) result))
                 (reverse result)))
      (setq current (aref string i))
      (when (gethash current separators)
        (when (or (and (not omit-nulls) (= (1+ last) i))
                  (/= last i))
          (push (substring string last i) result))
        (setq last (1+ i))))))

(defun unique-lines (start end)
  "This will remove all duplicating lines in the region.
Note empty lines count as duplicates of the empy line! All empy lines are 
removed sans the first one, which may be confusing!"
  (interactive "r")
  (let ((hash (make-hash-table :test #'equal)) (i -1))
    (dolist (s (split-string-chars
                (buffer-substring-no-properties start end) '(?\n) t)
               (let ((lines (make-vector (1+ i) nil)))
                 (maphash 
                  (lambda (key value) (setf (aref lines value) key))
                  hash)
                 (kill-region start end)
                 (insert (mapconcat #'identity lines "\n"))))
      (unless (gethash s hash)
        (setf (gethash s hash) (incf i)))))) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-23T10:16:21.180

其他方式：

1.  选择文本区域。
2.  Ctrl-U（前缀），M-| （shell-command-on-region），sort -u（在选择上运行并用其输出替换选择的命令）。

# c# - api 控制器中的多个 HttpPost 方法导致 500 Internal server error

> ID：13046793
> 
> 赞同：3
> 
> 时间：2012-10-24T09:53:15.567
> 
> 标签：c#, asp.net-web-api

我的 api 控制器中有两个 HttpPost 方法，当我点击我的 api 时，我收到 500 个内部服务器错误。

但令人惊讶的是，当我删除其中一种 HttpPost 方法时，我能够成功地访问我的 api 并检索我想要的信息。

知道可能是什么问题吗？

这是两种方法

```
 [HttpPost]
    [ActionName("PostUser")]
    public HttpResponseMessage PostUser([FromBody]string id)
    {
        var accessToken = id;
        var client = new FacebookClient(accessToken);
        dynamic result = client.Get("me", new { fields = "name,email" });
        string name = result.name;
        string email = result.email;

        var existingUser = this.Repository.FindByUserIdentity(name);

        if (existingUser == null)
        {
            var newUser = new User
            {
                Username = name,
                Email = email,

            };

            var success = this.Repository.CreateAccount(newUser);

            if (!success)
            {
                return Request.CreateResponse(HttpStatusCode.InternalServerError);
            }

            //return created status code as we created the user
            return Request.CreateResponse<User>(HttpStatusCode.Created, newUser);
        }

        return Request.CreateResponse(HttpStatusCode.OK);

    }

    [HttpPost]
    [ActionName("PostEmail")]
    public HttpResponseMessage PostEmail([FromBody]string id)
    {
        var accessToken = id;
        var client = new FacebookClient(accessToken);
        dynamic result = client.Get("me", new { fields = "email" });
        string name = result.name;
        string email = result.email;

        var existingUser = this.Repository.FindByUserIdentity(name);

        if (existingUser == null)
        {
            var newUser = new User
            {                   
                Email = email

            };

            var success = this.Repository.CreateAccount(newUser);

            if (!success)
            {
                return Request.CreateResponse(HttpStatusCode.InternalServerError);
            }

            //return created status code as we created the user
            return Request.CreateResponse<User>(HttpStatusCode.Created, newUser);
        }

        return Request.CreateResponse(HttpStatusCode.OK);

    } 
```

编辑：

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Competition", action = "all", id = UrlParameter.Optional }
        );
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T10:04:52.830

这是因为您的控制器中有两个 Post 方法，并且约定 WebApi 只允许一个 Post 方法。

要配置两个或多个 Post 方法，您必须配置您的路由设置。

有关详细信息，请查看以下答案

> [MVC4 Web API 控制器中的多个 HttpPost 方法](https://stackoverflow.com/questions/11407267/multiple-httppost-method-in-mvc4-web-api-controller/12703423#12703423)

# apache - 无法让 Memcache 工作

> ID：13046799
> 
> 赞同：0
> 
> 时间：2012-10-24T09:53:24.477
> 
> 标签：apache, memcached, xampp

我刚刚在 OS X Mountain Lion 上的 XAMPP 中安装了 Memcache，我正在尝试使用以下命令运行它：

```
 $memcache = new Memcache();
$memcache>connect('127.0.0.1', 11211) or die ("Could not connect"); 
```

这将返回：

```
Fatal error: Class 'Memcache' not found in /Applications/XAMPP/xamppfiles/htdocs/mysite/myfile.php on line 123 
```

我能做些什么来解决这个问题？

[我使用本指南](http://wiki.cerbweb.com/Setup%3aDevelopment/XAMPP/Mac_OS_X)安装了 Memcache

在我的 php.ini 文件中，我有`extension="memcache.so"`

在 phpinfo.php 我有`mod_mem_cache`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:10:06.950

首先，检查您的语法是否正确。您在提交的示例代码中缺少一个指针。“->”。另外，我无法通过使用“or die”来检查连接是否成功，因此我通常检查连接对象本身。

```
$memcache = new Memcache();
$memcache->connect('127.0.0.1', 11211);

if ($memcache === FALSE){
    echo 'Unable to connect to memcache';
} 
```

如果这不起作用，请检查您是否确实有可用的内存缓存。在你的 OSX 上打开一个终端并运行：

```
php --info | grep '^memcache' 
```

# android - Android：延迟从底部按下按钮

> ID：13046806
> 
> 赞同：1
> 
> 时间：2012-10-24T09:53:56.450
> 
> 标签：android, animation, button

在我的应用程序中，我得到了一个`Activity`从数据库接收一定数量的条目。对于每个条目，都会制作一个按钮并将其添加到布局中。我希望按钮从底部到顶部“推入”。我通过稍微编辑 API 示例实现了这一点`push_up_in.xml`。现在令人不安的是，看起来所有`Button`的 s 都被同时推入了。`Button`为了显得更“不同步”，我会在每次按下 a 之间稍作延迟。

到目前为止，相关代码如下所示

```
public void onCreate(Bundle icicle){
    super.onCreate(icicle);
    getDestinationLayout();
    setContentView(linearLayout);
    challengeName = getIntent().getExtras().getString("challengeName");
    context = this;
    datasource = new CustomDataSource(this);
    showGames();    
}

(...)

private void getDestinationLayout(){
        linearLayout = (LinearLayout) getLayoutInflater().inflate(R.layout.main_all_entries, null);
        scrollView = (ScrollView) linearLayout.findViewById(R.id.rel_all_football);
        buttonHolder = (LinearLayout) scrollView.findViewById(R.id.lin_all_buttonholder);
    }

// is called from showGames() after taking fetched entries, sorted them and so on
private void createAndAddButtons(){
    // the fetched entries are taken in another method
    for(int i=0; i<fetchedEntries.size(); i++){
        (1)
        entryButton = new Button(this) //entryButton is global
        // do some layout stuff
        entryButton.setAnimation(AnimationUtils.loadAnimation(this, R.anim.push_up_in));
        (2)
        buttonHolder.add(entryButton);
    }
} 
```

现在我想，没问题，我只是`Thread.sleep(x)`在点 (1) 分别在点 (2) 放置一个点 (1) 以获得该效果，但在这两种情况下，`Activity`它本身的开始都会延迟（似乎是 x*`fetchedEntries.size()`毫秒），并且按钮仍然被挤在一起。在之前的尝试中，我的 onCreate 就像

```
 public void onCreate(Bundle icicle){
     super.onCreate(icicle);
     challengeName = getIntent().getExtras().getString("challengeName");
     context = this;
     datasource = new CustomDataSource(this);
     showGames();
     setContentView(linearLayout);
} 
```

（而在`getDestinationLayout()`里面`showGames()`），问题是我首先添加按钮然后调用`setContentView(linearLayout)`（我现在认为更接近我的目标确实是错误的），但正如所说的，实际版本也不是我想要的. 我怎样才能做到这一点？显然问题出在使用`Thread.sleep(x)`，但另一方面我不完全理解为什么，因为从逻辑上讲程序应该是

-> `setContentView(linearLayout)` => Activity 显示在屏幕上
-> LOOP
``-> `Thread.sleep(x)` => 程序等待 x 毫秒
``-> 创建和添加按钮 => 按钮 i 在
````REPEAT TILL END中被按下````````

 ```**编辑：**

这是动画xml文件“push_up_in.xml”

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate android:fromYDelta="100%p" android:toYDelta="0" android:duration="300"/>
    <alpha android:fromAlpha="0.5" android:toAlpha="1.0" android:duration="1000" />
</set> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:04:39.877

我不确定，但我认为`Handler`使用 a`Runnable`可以解决您的问题。

```
private void createAndAddButtons(){
    Handler h = new Handler();

    //h.post(
    h.postDelayed(new Runnable(){
        public void run() {
            // the fetched entries are taken in another method
            for(int i=0; i<fetchedEntries.size(); i++){
                entryButton = new Button(this) //entryButton is global
                // do some layout stuff
                entryButton.setAnimation(AnimationUtils.loadAnimation(this, R.anim.push_up_in));
                buttonHolder.add(entryButton);
            }

        }
    }, 3000);

} 
```

还：

-> setContentView(linearLayout) => Activity**不**显示在屏幕上

将在调用方法`Activity`后显示，而`onResume`不是在设置内容时显示，因此您可以调用您`createAndAddButtons`的方法，但更好的是方法，因为该方法只会在您的活动创建时调用。`onResume``Activity``onStart``onStart`

我的建议，使用`Handler`并调用你`createAndAddButtons`的.`onStart``Activity`

罗尔夫

可以使您的代码更容易一点的小改动：

而不是为主布局创建一个 LinearLayout 对象并对其进行膨胀而不是设置它。为什么不这样做呢？

```
private void getDestinationLayout(){
        setContentView(R.layout.main_all_entries);
        scrollView = (ScrollView) linearLayout.findViewById(R.id.rel_all_football);
        buttonHolder = (LinearLayout) scrollView.findViewById(R.id.lin_all_buttonholder);
} 
``````

# symfony - 从具有自引用一对多关联的实体中删除子项

> ID：13046810
> 
> 赞同：4
> 
> 时间：2012-10-24T09:54:07.257
> 
> 标签：symfony, doctrine-orm, mapping, self-reference

我在由“父”映射并由“子”反转的实体（用户）上有一个自引用的一对多关联。我希望能够删除不是父母的用户。我的实体声明如下。

```
class User implements UserInterface
{
   /**
    * @ORM\Column(name="id", type="smallint")
    * @ORM\Id
    * @ORM\GeneratedValue(strategy="AUTO")
    */
   protected $id;

   (...)

   /**
    * @ORM\OneToMany(targetEntity="User", mappedBy="parent")
    */
   protected $children;

   /**
    * @ORM\ManyToOne(targetEntity="User", inversedBy="children")
    * @ORM\JoinColumn(name="parent_id", referencedColumnName="id")
    */
   protected $parent;

   public function __construct()
   {
       $this->parentId = null; // Default value for column parent_id
       $this->children = new ArrayCollection();
   }
} 
```

当我尝试删除不是父母的子用户时，我收到以下错误。

> 带有消息“SQLSTATE [23000]”的异常“PDOException”：违反完整性约束：1451 无法删除或更新父行：外键约束失败

我尝试过进行级联删除，如下所示。

```
/**
 * @ORM\OneToMany(targetEntity="User", mappedBy="parent", cascade={"persist", "remove"})
 */
protected $children; 
```

无论哪种方式都会出现相同的错误。有什么帮助吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T13:54:50.787

用这个：

```
/**
* @ORM\ManyToOne(
*     targetEntity="User", 
*     inversedBy="children", 
*     cascade={"persist", "remove"}
* )
*
* @ORM\JoinColumn(name="parent_id", referencedColumnName="id", onDelete="SET NULL")
*/ 
```

什么`onDelete="SET NULL"`是当您删除父元素时，其子元素将在 parent_id 列中获得 NULL 值。这发生在数据库级别，所以你必须学说：模式：更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-02T16:20:19.717

最后，我设法在保留父类别的同时删除了一个子类别：

```
$parent = $em->getRepository('Category\Entity\Category')->find(1);//parent id
$child = $em->getRepository('Category\Entity\Category')->find(5);// child id
$parent->removeChild($child);
    $em->persist($child);
    $em->remove($child);
    $em->persist($parent);      
    $em->flush(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-24T10:50:58.430

`cascade`必须在[拥有方](http://doctrine-orm.readthedocs.org/en/latest/reference/unitofwork-associations.html)：

```
/**
 * @ORM\ManyToOne(
 *     targetEntity="User", 
 *     inversedBy="children", 
 *     cascade={"persist", "remove"}
 * )
 */
protected $parent; 
```

# javascript - 缩放和旋转后如何确定 Raphael 对象的大小？

> ID：13046811
> 
> 赞同：2
> 
> 时间：2012-10-24T09:54:10.693
> 
> 标签：javascript, svg, raphael

如果我要将图像创建为具有初始大小**[w1,h1]**的 Raphael.js 对象，然后使用该`transform()`方法对其进行缩放，我将如何检索其新大小**[w2,h2]**？因为调用`image.attr("width")`返回 w1，即初始宽度，而不是转换后的宽度。

我知道你可能会说我应该简单地将 w1 和 h1 与缩放因子相乘，但大多数时候，还会应用旋转变换，这会使事情变得更加麻烦。

简而言之，Raphael.js 中是否有一种方法可以检索对象的正确大小，而不管可能对其应用的任何转换？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-28T18:14:36.470

Matt Esch 的示例可能仅适用于一些（矩形）元素，但要获得所有可能元素的度量（以及在元素受父组的嵌套转换影响的情况下），我们必须使用其他方法。为了获得转换后的 SVG 元素的各种指标（宽度、高度、bbox 宽度、bbox 高度、角坐标、边长等），我创建了一个 get_metrics() 函数：

完整功能示例： http: [//output.jsbin.com/zuvuborehe/](http://output.jsbin.com/zuvuborehe/)

下图显示了 get_metrics() 的一种可能用例：

![指标示例](../Images/5615c7ff7a8da1abeb31f0dcca311c22.png)

该函数`get_metrics()`使用纯javascript，没有库。但它可以与像 Raphaël 这样的库一起使用 OC。它基于native `element1.getTransformToElement(element2)`，可以获得两个元素之间的关系矩阵，在这种情况下是转换后的元素（例如`<path>`）和SVG根元素（`<svg>`）。当然你也可以使用其他元素，比如图像、多边形、矩形等。顺便说一句，`getTransformToElement`它非常强大且用途广泛，例如可以使用。以这种方式展平由任何路径命令组成的路径变换（如果它们首先使用 Raphaël 的 path2curve 转换为 Cubics，则甚至是弧线）：http: [//jsbin.com/atidoh/9](http://jsbin.com/atidoh/9)。

```
SVGElement.prototype.getTransformToElement = 
SVGElement.prototype.getTransformToElement || function(elem)
{ 
  return elem.getScreenCTM().inverse().multiply(this.getScreenCTM()); 
};

function get_metrics(el) {
    function pointToLineDist(A, B, P) {
        var nL = Math.sqrt((B.x - A.x) * (B.x - A.x) + (B.y - A.y) * (B.y - A.y));
        return Math.abs((P.x - A.x) * (B.y - A.y) - (P.y - A.y) * (B.x - A.x)) / nL;
    }

    function dist(point1, point2) {
        var xs = 0,
            ys = 0;
        xs = point2.x - point1.x;
        xs = xs * xs;
        ys = point2.y - point1.y;
        ys = ys * ys;
        return Math.sqrt(xs + ys);
    }
    var b = el.getBBox(),
        objDOM = el,
        svgDOM = objDOM.ownerSVGElement;
    // Get the local to global matrix
    var matrix = svgDOM.getTransformToElement(objDOM).inverse(),
        oldp = [[b.x, b.y], [b.x + b.width, b.y], [b.x + b.width, b.y + b.height], [b.x, b.y + b.height]],
        pt, newp = [],
        obj = {},
        i, pos = Number.POSITIVE_INFINITY,
        neg = Number.NEGATIVE_INFINITY,
        minX = pos,
        minY = pos,
        maxX = neg,
        maxY = neg;

    for (i = 0; i < 4; i++) {
        pt = svgDOM.createSVGPoint();
        pt.x = oldp[i][0];
        pt.y = oldp[i][1];
        newp[i] = pt.matrixTransform(matrix);
        if (newp[i].x < minX) minX = newp[i].x;
        if (newp[i].y < minY) minY = newp[i].y;
        if (newp[i].x > maxX) maxX = newp[i].x;
        if (newp[i].y > maxY) maxY = newp[i].y;
    }
    // The next refers to the transformed object itself, not bbox
    // newp[0] - newp[3] are the transformed object's corner
    // points in clockwise order starting from top left corner
    obj.newp = newp; // array of corner points
    obj.width = pointToLineDist(newp[1], newp[2], newp[0]) || 0;
    obj.height = pointToLineDist(newp[2], newp[3], newp[0]) || 0;
    obj.toplen = dist(newp[0], newp[1]);
    obj.rightlen = dist(newp[1], newp[2]);
    obj.bottomlen = dist(newp[2], newp[3]);
    obj.leftlen = dist(newp[3], newp[0]);
    // The next refers to the transformed object's bounding box
    obj.BBx = minX;
    obj.BBy = minY;
    obj.BBx2 = maxX;
    obj.BBy2 = maxY;
    obj.BBwidth = maxX - minX;
    obj.BBheight = maxY - minY;
    return obj;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T10:13:20.257

有一种方法可以检索带有和不带有变换的元素的边界框。

随着转型：

```
var bbox = image.getBBox(),
    width = bbox.width,
    height = bbox.height; 
```

没有转换：

```
var bbox = image.getBBoxWOTransform(),
    width = bbox.width,
    height = bbox.height; 
```

* * *

如果这对您有帮助，您可以使用帮助方法（如果您小心的话）直接提供宽度和高度来扩展 Raphael.el。您可以只使用边界框方法并返回您感兴趣的部分，但为了更高效，我只使用元素上的矩阵属性和属性的位置/宽度/高度计算了请求的属性。

```
(function (r) {
    function getX() {
        var posX = this.attr("x") || 0,
            posY = this.attr("y") || 0;
        return this.matrix.x(posX, posY);
    }

    function getY() {
        var posX = this.attr("x") || 0,
            posY = this.attr("y") || 0;
        return this.matrix.y(posX, posY);
    }

    function getWidth() {
        var posX = this.attr("x") || 0,
            posY = this.attr("y") || 0,
            maxX = posX + (this.attr("width") || 0),
            maxY = posY + (this.attr("height") || 0),
            m = this.matrix,
            x = [
                m.x(posX, posY),
                m.x(maxX, posY),
                m.x(maxX, maxY),
                m.x(posX, maxY)
            ];

        return Math.max.apply(Math, x) - Math.min.apply(Math, x);
    }

    function getHeight() {
        var posX = this.attr("x") || 0,
            posY = this.attr("y") || 0,
            maxX = posX + (this.attr("width") || 0),
            maxY = posY + (this.attr("height") || 0),
            m = this.matrix,
            y = [
                m.y(posX, posY),
                m.y(maxX, posY),
                m.y(maxX, maxY),
                m.y(posX, maxY)
            ];

        return Math.max.apply(Math, y) - Math.min.apply(Math, y);
    }

    r.getX = getX;
    r.getY = getY;
    r.getWidth = getWidth;
    r.getHeight = getHeight;
}(Raphael.el)) 
```

随着用法：

```
var x = image.getX();
var y = image.getY();
var width = image.getWidth();
var height = image.getHeight(); 
```

只需在包含 Raphael 后包含脚本即可。请注意，它仅适用于具有宽度、高度、x 和 y 属性的元素，适用于图像。Raphael 实际上是根据路径数据计算边界框，它会转换路径中的所有点，并在转换后获取最小/最大 x/y 值。

# java - 将单词（由两个或多个单词组成）分成几个部分

> ID：13046812
> 
> 赞同：0
> 
> 时间：2012-10-24T09:54:12.273
> 
> 标签：java

我有这个问题要解决

有一个来自用户的输入词，它由两个不同的词组成，例如

```
AppleCake or BrownPie 
```

现在我们需要开发一个程序，它将接受这个输入并将其与一个词库进行匹配，并将这个词分解成有意义的部分，即 Apple 和 Cake

输入：苹果蛋糕

输出：这个输入有两个词Apple和Cake

输入： RedGrapesWine

输出：这个输入包含三个单词 Red、Grapes 和 Wine

我的问题是：

我应该如何开始解决这个问题？

任何人都可以帮助我解决伪代码/步骤吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:16:59.697

一个非常简单的方法，只有当你的单词数量很少时才有效，那就是遍历单词列表并尝试逐字匹配。

这是一个非常基本的示例（不处理大小写，也不处理单词的多次出现或其他），但它向您展示了如何做：

```
String input = readFromUser();
String[] dictionary = new String[] { "Apple", "Cake" };
List<String> found = new ArrayList<>();
for (String word : dictionary) {
    int index = input.indexOf(word);
    if (index >= 0) {
        input = input.substring(0, index) + input.substring(index + word.length());
        found.add(word);
    }
}
System.out.println("Found " + found.size() + " words: " + found); 
```

这是非常简单的方法，因为它很耗时。

另一种方法是使用[Trie](http://en.wikipedia.org/wiki/Trie)并对其进行导航，直到找到正确的单词（应该是更好的方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T06:34:42.087

为了改进算法，您应该首先创建一个包含字典包含的所有词开头的集合。如果字典中有“Apple”和“Cake”，则该集合必须包含“A”、“Ap”、“App”、“Appl”、“Apple”、“C”、“Ca”和“Cake”。

因此，如果令牌不能是单词，您会很快看到，因为它的开头与已知单词的开头不匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:58:39.670

如果新词使用大写字母，您可以使用它将单词分成您想要的部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T10:23:45.217

一个简单的解决方案是针对哈希图/字典测试每个可能的分区。

例如

thebody -> t hebody（t 和 hebody 存在吗？）、th ebody（th 和 ebody？）、body（the 和 body？）等。

# iphone - 每次点击 4 个按钮标题更改

> ID：13046816
> 
> 赞同：0
> 
> 时间：2012-10-24T09:54:39.893
> 
> 标签：iphone, ios, uibutton, nsmutablearray

我的应用程序中有四个按钮，我从数组中获取按钮标题，我想在单击任何按钮时更改 4 个按钮标题，但是这里单击的按钮标题只改变了，这里是我的代码，

```
-(IBAction)setting:(id)sender
{
int value = rand() % ([arraytext count] -1) ;
UIButton *mybuton = (UIButton *)sender;
[mybuton setTitle:[arraytext objectAtIndex:value] forState:UIControlStateNormal];
} 
```

更新

```
-(IBAction)answersetting:(id)sender
{

UIButton *mybutton = (UIButton *)sender;
static int j = 0;
if(sender == mybutton)
    j++;
if (j >= arcount)
{
    j = 0;
}
else if(j < 0)
{
    j = arcount - 1;
}

CATransition *transition = [CATransition animation];
transition.duration = 1.0f;
transition.timingFunction = [CAMediaTimingFunction    functionWithName:kCAMediaTimingFunctionEaseOut];
transition.type = kCATruncationMiddle;

[animage.layer addAnimation:transition forKey:nil];    
animage.image=[arimage objectAtIndex:j];

for(UIView *view in self.view.subviews)
{
    if([view isKindOfClass:[UIButton class]])
    {
        UIButton *button = (UIButton *)view;
        if(button.tag == 1||button.tag == 2||button.tag == 3||button.tag == 4)
        {
            int value = rand() % ([artext count] -1) ;
            NSMutableDictionary *dictionary = [[NSMutableDictionary alloc]init];
            [dictionary setValue:animage.image forKey:@"button"];
            [button setTitle:[artext objectAtIndex:value] forState:UIControlStateNormal];

        }
    }
} 
```

}

我将此方法与 4 个按钮连接，我想在单击任何按钮时更改所有按钮标题，请帮助编码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:02:59.743

因为`sender`只保存`UIButton`您单击的内容。
要更改 all`UIButton`的标题，您需要一个循环。
设置`tag`为全部 4 `buttons`。

然后这样做 -

```
-(IBAction)setting:(id)sender
{
     int value = rand() % ([arraytext count] -1) ;
     for(UIView *view in self.view.subviews)
     {
        if([view isKindOfClass:[UIButton class]])
        {
            UIButton *button = (UIButton *)view;
            if(button.tag == 1||button.tag == 2||button.tag == 3||button.tag == 4)
            {
                [button setTitle:[arraytext objectAtIndex:value] forState:UIControlStateNormal];
            }
        }
     }  
} 
```

# eclipse - 如何仅将一些文件获取到 Eclipse 'Package Explorer' 树（对于 Scala）

> ID：13046824
> 
> 赞同：1
> 
> 时间：2012-10-24T09:54:57.997
> 
> 标签：eclipse, scala, ide, scala-ide

我发现 Eclipse Juno 中的“包资源管理器”或“项目资源管理器”（它们相同吗？）很奇怪。在 IDE sa Visual Studio 和 XCode 中，我可以选择哪些文件在“项目中”，从而显示在 IDE 树视图中。使用 Eclipse Juno，我可以将*所有*文件和文件夹放在那里，其中许多是无关紧要的。

这是一张图片。

我只希望`src`,`src/math`和`lib`中的文件被列出。具体来说，这些应该是：`Makefile`, `Installing...rtf`, `build.sbt`, `test`, `target`, `project`, `bin`, `_Unused_`.

我期待有一个选项“从项目中删除”（通过右键单击），但我得到的只是有机会真正删除文件/文件夹。这里发生了什么？还是只是我自己和Eclipse不兼容？:)

![项目树截图](../Images/445a612c3eed2f46b1e8edbb86846744.png)

**附录：**

对我来说，不使用 Eclipse 的真正原因是：

*在开始之前，请确保您的 Scala 源代码遵循 Java 包约定。每个包都应该出现在自己的同名目录中。Eclipse 期望在查找类时遵循此约定。*

[http://scala-ide.org/docs/user/gettingstarted.html](http://scala-ide.org/docs/user/gettingstarted.html)

我不想要那个。Scala 不强制执行此操作。再见 Eclipse，10 年后再见——也许（我上次检查你是在 2004 年）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T11:41:00.860

您可以使用过滤器从项目中隐藏这些文件（它们仍将存在于项目中）：

1.  右键单击项目，选择“属性”
2.  选择资源/资源过滤器
3.  “添加...”一个过滤器
4.  选择 f.ex。“排除所有”、“文件夹”、“名称匹配“目标”等。

（我从不使用它，因为我仍然觉得查看项目的所有文件很有用。）

# javascript - 使用 javascript 更改多个图像的样式（不透明度）

> ID：13046828
> 
> 赞同：2
> 
> 时间：2012-10-24T09:55:27.713
> 
> 标签：javascript, html, styles

我正在尝试获取多个元素，这些元素组织在 3 个数组“tops”、“bottoms”、“shoes”下。

我知道我可以使用

```
document.getElementsByClassName("class1 class2"); 
```

如何更改每个对象的样式，我当前的代码是：（我尝试了可见性和不透明度，但它不断收到未捕获的类型错误，因为 document.getelements.... 没有返回任何内容。

```
function filter() {
var this_id = event.target.id;
console.log(this_id);
if (this_id = "filtertops") {
    document.getElementsByClassName("a4 a7 a11 a12 a8").style.visibility="hidden"; //not tops
    document.getElementsByClassName("a1 a2 a3 a5 a9 a10 a14").style.visbility="visible"; // tops
    }
else if (this_id = "filterbottoms") {
    document.getElementsByClassName("a2 a3 a5 a10 a14 a8").style.opacity="0.4"; //not bottoms
    document.getElementsByClassName("a1 a4 a7 a9 a11 a12").style.opacity="1"; //bottoms
    }
else if (this_id = "filtershoes") {
    document.getElementsByClassName("a1 a2 a3 a4 a5 a7 a9 a10 a11 a12 14").style.opacity="0.4"; //not shoes
    document.getElementsByClassName("a8").style.opacity="1"; //shoes
    } 
```

我也尝试将它们分配给一个变量，然后是一个 for 循环来更改每个对象的样式，但这也不起作用。

```
function filterbottoms() {
    var nonbottom = document.getElementsByClassName("a2 a3 a5 a10 a14 a8");
    var bottoms = document.getElementsByClassName("a1 a4 a7 a9 a11 a12");
    for (i in bottoms)
        {
            i.style.visibility='visible';
        }
    for (i in nonbottom)
        {
            i.style.visibility='hidden';
        } 

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T09:58:09.477

你很接近`for`循环：

```
for (i in bottoms){
    bottoms[i].style.visibility='visible';
} 
```

应该`<edit>`但不会`</edit>`工作。每次迭代`i`都是下一个*键，*而不是下一个*值*。

但是您应该使用常规`for`而不是`for..in`：

```
for (var i = 0; i < bottoms.length; i++){
    bottoms[i].style.visibility='visible';
} 
```

编辑：我推荐了一个常规`for`循环，因为 using`for..in`通常不适用于数组或类似数组的对象，因为（取决于特定对象）它将遍历非数字属性。约瑟夫的评论证实，在这种情况下， a`for..in`肯定不会因为这个原因而工作。

# html - 是否有可验证的方式来使用 HTML 标签和输入元素并且输入没有 id？

> ID：13046830
> 
> 赞同：2
> 
> 时间：2012-10-24T09:55:31.457
> 
> 标签：html, validation, input, label

我正在使用`Jquery Mobile`一个应用程序，它在每个页面上都有一个登录弹出窗口。问题是，Jquery Mobile 在 DOM 中总是至少有 2 个页面，所以我在 DOM 中会有两个弹出窗口和登录表单，迫使我想办法避免`duplicate id-attributes`.

我通过省略`id`登录表单输入上的属性来解决这个问题，所以我这样做：

```
 <label for="email" class="inFieldLabel">#tx_email#</label>
 <input autocomplete="off" type="email" name="email" value="#XMLFormat( lostPass.email )#" class="required"> 
```

视觉效果很好，但会产生验证错误，因为：

```
 The for attribute of the label element must refer to a form control. 
```

**问题**：
有没有办法在不使用`id`属性的情况下通过验证？什么是解决方法？

注意：我不能使用全局登录弹出窗口，因为 Jquery Mobile 目前不支持此功能，所以我被困在每个页面上都有一个弹出窗口。

感谢您的见解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:03:57.550

假设两件事：您不会使用 ID 来设置表单样式，并且每个弹出窗口周围都有一个 FORM 标签。此代码将在表单元素的 ID/FOR 中附加一个随机数。您可能还需要将此号码传递给您的验证例程。

```
jQuery("FORM").each(function()
{
  var randomNum = Math.random()*1000;
  var jForm = jQuery(this);
  jForm.find("INPUT").each(function()
  {
    this.id+=randomNum;        
  });
  jForm.find("LABEL").each(function()
  {
    jQuery(this).attr("for",jQuery(this).attr("for")+randomNum);
  });
});

...

validateForm(form, randomNum); 
```

这是使表单上的 ID 保持唯一性的一种方法。

我想我假设您也在使用 Validate 插件。如果有任何帮助，您*可以*为表单/元素使用多个非唯一 ID，只要您通过验证唯一选择器，例如“#page-1 #popup-form #myInput”或“#page-2 #popup-form #我的输入”。

**更多编辑：**

等等，你在找这个吗？您可以使用表单对象通过名称而不是 id 引用表单及其控件。

```
<form name="formNameAttribute">
  <input name="inputNameAttribute" value="some value" />
</form>

<script>
var inputValue=document.forms["formNameAttribute"]["inputNameAttribute"].value;
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T12:05:18.240

将标签应用到的表单控件放在标签内。

```
<label> text <input> </label> 
```

# java - 子类化或实现接口

> ID：13046833
> 
> 赞同：0
> 
> 时间：2012-10-24T09:55:35.000
> 
> 标签：java, oop

因此，假设我正在尝试完成一项需要某种形式的抽象的任务。

这个任务可以通过子类化或实现一个接口来完成。

**有任何理由倾向于他们中的任何一个吗？**

效率方面还是惯例方面呢？

一个例子

**子类化**

```
public abstract class Main {

    public abstract void doSomething();

}
public class SubMain extends Main {

    public static void main(String[] args) {
        new SubMain().doSomething();

    }

    @Override
    public void doSomething() {
        System.out.println("Example Method.");

    }

} 
```

并**实现一个接口**

```
public interface TestInterface {
    public abstract void doSomething();

}
public class MainWithInterface implements TestInterface {

    public static void main(String[] args) {
        new MainWithInterface().doSomething();

    }

    @Override
    public void doSomething() {
        System.out.println("Example Method.");

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T09:56:33.820

如果界面对您有用，那么就倾向于它。它为此类 API 的客户端提供了更多自由，因为他可以使用同一个类实现多个接口。

这里没有要考虑的性能方面。几乎所有用例都可以认为方法分派是免费的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:00:00.117

如果我想要继承的行为，我倾向于倾向于接口，如果我想要继承的结构，我倾向于使用子类。如果有疑问，在这两者之间，我可能会考虑接口，因为它们允许多个接口继承

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:57:16.730

你那里只有方法，所以接口更合适。如果您只关心行为，请使用接口。

# wordpress - 保存具有多个字段的元框

> ID：13046837
> 
> 赞同：1
> 
> 时间：2012-10-24T09:55:49.993
> 
> 标签：wordpress, save, meta

所以，在寻找几个小时来寻找最简单的保存我的元框的解决方案之后，并没有找到任何可以帮助我的东西......我正在尝试保存这些元框（我将第一个放在下面的示例中，其他的都很漂亮很多重复），而我使用的保存方法根本什么都不做。你能告诉我我在这里做错了什么吗？保存方法是我同事做的另一个插件，但我似乎无法让它工作......

```
add_action('admin_init','page_spec_meta');
function page_spec_meta()
{
    $post_id = $_GET['post'] ? $_GET['post'] : $_POST['post_ID'] ;     $template_file = get_post_meta($post_id,'_wp_page_template',TRUE);
    if ($template_file == 'index.php') 
    {
    add_meta_box("career-meta", "Career", "career_meta", "page", "normal", "high");
    add_meta_box("business-meta", "Business", "business_meta", "page", "normal", "high");
    add_meta_box("fabulous-meta", "Fabulous", "fabulous_meta", "page", "normal", "high");
    add_meta_box("network-meta", "Network", "network_meta", "page", "normal", "high");
    add_meta_box("future-meta", "Future", "future_meta", "page", "normal", "high");
    }
}

// --- METABOX: CAREER ... CONTENTS --- //
function career_meta(){
    global $post;
    $career = get_post_meta( $post->ID, 'career', true );
?>
    <label for="career subtitle">Subtitle</label><input type="text" class="widefat" id="career-subtitle" name="career subtitle" value="<?php echo $career; ?>" />
    <label for="career text 1">Left Column</label><textarea class="widefat" id="career-text-1" name="career text 1" value="<?php echo $career; ?>"></textarea>
    <label for="career text 2">Right Column</label><textarea class="widefat" id="career-text-2" name="career text 2" value="<?php echo $career; ?>"></textarea>
<?php }

// --- METABOX: CAREER ... SAVE --- //
add_action('save_post', 'save_career');
function save_career(){
    global $post;
    update_post_meta($post->ID, "career", $_POST["career"]);
}

add_action('save_post','function_save_var');
function function_save_var()
{
  if ( defined('DOING_AUTOSAVE') && DOING_AUTOSAVE )
    return $post_id;

} 
```

什么有效：元框显示在我指定的页面上，并且是可编辑的什么无效：保存...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:08:05.690

访问数组时需要使用（或）字段的`name`属性。您的 s 是“职业副标题”、“职业文本 1”和“职业文本 2”，因此您需要使用、 或 来访问传递的值。`input``textarea``$_POST``name``$_POST["career subtitle"]``$_POST["career text 1"]``$_POST["career text 2"]`

我不确定您是否会遇到浏览器转义空格和 PHP 需要取消转义才能找到它们的问题`$_POST`- 例如，我可能会用下划线替换名称中的空格以防万一

```
<label for="career_subtitle">Subtitle</label><input type="text" class="widefat" id="career-subtitle" name="career_subtitle" value="<?php echo $career; ?>" /> 
```

然后在`save_career`

```
update_post_meta($post->ID, "career", $_POST["career_subtitle"]); 
```

或者，如果您需要单独存储三个值：

```
update_post_meta($post->ID, "career_subtitle", $_POST["career_subtitle"]); 
```

`career_meta`当您检索该值时会发生相应的更改。

# c++ - 在 C++ 中的字符串中定位 STX 和 ETX

> ID：13046853
> 
> 赞同：1
> 
> 时间：2012-10-24T09:56:50.217
> 
> 标签：c++, tcp, recv, stx

有没有办法在 c++ 中的 recv() 接收到的消息中检测 STX（文本开头）和 ETX（文本结尾）字符序列？我正在尝试修复 TCP 中可能发生的任何部分读取，以便我可以修改完整的消息。

谢谢！

编辑1：

根据 unwind 的答案做了以下操作：

```
char c = '\x02';
if(memchr((*it).c_str(), c, numberOfCharactersRead) != NULL) 
    cout << "STX found" << endl; 
```

我仍然没有设法检测到这个角色。这个实现有什么问题吗？'it' 是字符串类型向量的迭代器。

编辑2：

这是接收数据和检查字符的完整代码：

```
int numberOfCharactersRead = 0;

    do {
        char msgBuffer[1000];
        memset(msgBuffer, 0, 1000);
        numberOfCharactersRead = recv(clientSideSocket, msgBuffer, (1000 - 1), 0);
        if (numberOfCharactersRead < 0) {
            close(clientSideSocket);
        }
        else if (numberOfCharactersRead == 0)
            close(clientSideSocket);
        else {
            char c = '\x02';
            if(memchr(msgBuffer, c, numberOfCharactersRead) != NULL) 
                cout << "STX found" << endl;
            memset(msgBuffer, 0, 1000);
        }

    } while (numberOfCharactersRead > 0); 
```

所以，我只是检查 STX，还没有连接缓冲数据。但是，STX 检查仍然失败。请让我知道这种方法中的任何问题。

谢谢。

编辑3：

我得到了示例消息的以下十六进制值：

```
3C 31 34 32 3E 4F 63 74 20 32 35 20 31 31 3A 33 39 3A 31 32 20 6C 6F 63 61 6C 68 6F 73 74 20 5B 20 32 30 31 32 2D 4F 63 74 2D 32 35 20 31 31 3A 33 39 3A 31 32 2C 36 31 33 20 5D 20 20 20 20 49 4E 46 4F 20 7B 20 4D 61 69 6E 2E 6A 61 76 61 20 7D 20 2D 20 74 65 73 74 20 69 6E 66 6F 72 6D 61 74 69 6F 6E 20 6D 65 73 73 61 67 65 20 
```

所以 STX/ETX 的十六进制值不存在。这意味着不能使用 STX 和 ETX 来检查消息的形成。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T10:03:18.087

好吧，STX 和 ETX 不是“序列”，它们是单个字符。因此，您应该能够使用普通`[memchr()](http://linux.die.net/man/3/memchr)`调用来搜索字符。

[字符值](http://www.asciitable.com/)仅`'\x02'`用于 STX 和ETX `'\x03'`。

请注意，您需要传入收到的尺寸。由于（我假设）不能保证部分接收到的消息是 0 终止的，因此您不能使用`strchr()`.

# jquery - jQuery on() 方法触发不止一次

> ID：13046854
> 
> 赞同：1
> 
> 时间：2012-10-24T09:56:52.933
> 
> 标签：jquery

我制作了一些 jQuery 代码来防止用户输入字符，但只能输入数字：

```
 $("div").on("keydown", ":text", checkKey);

    function checkKey(e) {
    var n = e.keyCode;
    if (n == 13) {
        $(this).closest("form").submit();
        console.log('enter');
    }
    else if (e.shiftKey || e.ctrlKey || e.altKey) {
        e.preventDefault();
    } else {
        if (!((n == 8)
                || (n == 46) || (n == 9)
                || (n >= 35 && n <= 40)
                || (n >= 48 && n <= 57)
                || (n >= 96 && n <= 105))
        ) {
            e.preventDefault();
            console.log('ok');
        }
    }
} 
```

以html结尾：

```
 <div>
    <input type="text" id="test" />
</div> 
```

但是每当我输入一些东西时，它似乎被触发了三次，例如，按一次输入，我在控制台中得到三个“输入”，而对于数字，我得到三个“确定”，这是为什么呢？我也将其替换为代表和现场，现场工作正常，但代表也被解雇了 3 次。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:03:08.360

您的输入#test 不是在三个 div 中吗？我认为您可能在 .on() 中有错误的选择器。尝试使用类似的东西：

```
$("div").on("keydown", "input#test", checkKey); 
```

无论如何请贴全身

# iphone - 使用 xcode 4.5 与 iTunes Store 交谈时出错

> ID：13046863
> 
> 赞同：0
> 
> 时间：2012-10-24T09:57:22.423
> 
> 标签：iphone, ios, xcode

我正在使用 Xcode 4.5（Mac OS X 版本 10.7.4）并面临验证和分发我的应用程序的问题。这里的互联网工作正常。我尝试了很多在网上发布的建议，但仍然找不到任何解决方案。请帮助我解决我的问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:09:04.367

在 XCode 4.5 中，您不再使用 Application Loader。这一切都是通过 XCode 的 Organizer（Archives 选项卡）完成的。

请参阅 Apple 文档：http: [//developer.apple.com/library/ios/#recipes/xcode_help-archives_organizer/articles/about_archives_organizer.html#//apple_ref/doc/uid/TP40010547-CH1-SW1](http://developer.apple.com/library/ios/#recipes/xcode_help-archives_organizer/articles/about_archives_organizer.html#//apple_ref/doc/uid/TP40010547-CH1-SW1)

# java - JPA 中的 SQL 查询

> ID：13046868
> 
> 赞同：2
> 
> 时间：2012-10-24T09:57:45.483
> 
> 标签：java, sql, jpa, objectdb

我们有这个学校项目，我们正在创建一个图书库系统，其主要目的是使用数据库连接。在这种情况下，JPA 和 ObjectDB。

我们的问题是我们有 3 张桌子。一个描述一本书（书名、作者和出版年份），第二个是借阅者（名字、姓氏、地址、电子邮件和电话号码），最后一个表是从其他两个获取主 ID 密钥的借出功能表。

问题是当我们使用列表借书功能时，它只打印出另外两个表中的 ID。我们认为问题出在 SQL 查询上，我们还没有机会正确学习 SQL。

所以我们的问题是，我们如何创建一个 SQL 查询，从 book-table 中获取 title 以及从 borrower 表中获取名字和姓氏，而不是 ID。

我们只能设法工作的 SQL 查询是这样的：

```
TypedQuery<BokLån> q = em.createQuery("SELECT bookborrow FROM BookBorrow BookBorrow", BookBorrow.class); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:02:19.727

IT 是 fetch 和 fetch 类型机制的问题。目前您的实体是惰性加载的，您可以在实体类中急切地加载它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:21:03.303

您需要编写一个正确的 JOIN 语句来将借贷表与其他表结合起来，并从那里检索信息。

类似于以下内容：

```
SELECT 
    book.title, 
    person.firstname, 
    person.lastname 
FROM
   borrower
     JOIN book ON book.bookid = borrower.bookID
     JOIN person ON person.personid = borrower.personid 
```

它的工作方式是 ON 条件指定如何将表绑定在一起。在您的情况下，借用者表有一个 personID，它与 person 表中的 PersonID 列相关。建立与 JOIN 的链接，然后您可以访问 Person 表中的其他列。

完全相同的方法适用于书桌。

# java - 获取 KeyEvent 的来源

> ID：13046871
> 
> 赞同：0
> 
> 时间：2012-10-24T09:57:48.237
> 
> 标签：java, swing, jtextfield, keylistener, keyevent

我有两个文本字段（tf1 和 tf2），其中使用 KeyEvent 来获取键入的字符。

```
JTextField tf1 = new JTextField(10);
        JTextField tf2 = new JTextField(10);
        tf1.setFocusable(true);
        tf2.setFocusable(true);
        //regerstring for event
        tf1.addKeyListener(new KeyHandler(tf1, tf2));
        tf2.addKeyListener(new KeyHandler(tf1, tf2));

 class KeyHandler extends KeyAdapter{
    JTextField tf1;
    JTextField tf2;
    KeyHandler(JTextField tf1, JTextField tf2){
    tf1 = this.tf1;
    tf2 = this.tf2;
    }
    public void keyTyped(KeyEvent e){
    char ch = e.getKeyChar();
    System.out.println(e.getKeyLocation());

    if(e.getSource() == tf1)
        System.out.println("tf1");
    else if (e.getSource() == tf2)
    System.out.println("tf2");

    } 
```

我已经尝试过 KeyEvent 类的 getSource() 但它返回 JTextField 的对象，我必须在 tf1 和 tf2 之间进行区分。

如何在 keyTyped() 中获取关联的文本文件引用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T10:24:00.840

很难 100% 确定，但您似乎有范围问题。您的密钥处理程序看不到您的字段。

```
public void someMethod() {
    JTextField tf1 = new JTextField(10);
    JTextField tf2 = new JTextField(10);

    KeyHandler handler = new KeyHandler();
    tf1.addKeyListener(handler);
    tf2.addKeyListener(handler);
}

public class KeyHandler extends KeyAdapter{
    public void keyTyped(KeyEvent e){
        // Error, tf1 is unknown...
        if (e.getSource() == tf1) {...}
    }
} 
```

如果您希望能够比较您拥有的字段，您有两个选择。将字段声明为实例字段或通过其`name`属性标识字段。

## 选项1

```
public class SomeClass extends ... {
    private JTextField tf1;
    private JTextField tf2;
    public void someMethod() {
        JTextField tf1 = new JTextField(10);
        JTextField tf2 = new JTextField(10);

        KeyHandler handler = new KeyHandler();
        tf1.addKeyListener(handler);
        tf2.addKeyListener(handler);
    }

    public class KeyHandler extends KeyAdapter{
        public void keyTyped(KeyEvent e){
            // tf1 is now within scope :D
            if (e.getSource() == tf1) {...}
        }
    }
 } 
```

## 选项 2

```
public void someMethod() {
    JTextField tf1 = new JTextField(10);
    tf1.setName("tf1");
    JTextField tf2 = new JTextField(10);
    tf2.setName("tf2");

    KeyHandler handler = new KeyHandler();
    tf1.addKeyListener(handler);
    tf2.addKeyListener(handler);
}

public class KeyHandler extends KeyAdapter{
    public void keyTyped(KeyEvent e){
        Object source = e.getSource();
        if (source instanceof JTextField) {
            JTextField field = (JTextField)source;
            String name = field.getName();
            if ("tf1".equals(name)) {
                // Hello TextField #1
            }
        }
    }
} 
```

## 免责声明

现在，我不知道你为什么要做你想做的事，但`KeyListener`s 并不是过滤或监视文本字段更改的最合适的选项。一方面，您无法保证以什么顺序调用您的侦听`Document`器，在触发侦听器之前，这些字段可能会更新，也可能不会更新。其次，如果用户将文本粘贴到字段中，它们不会被触发。

更好的选择是使用 a [`DocumentListener`](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)，它可用于监视字段的更改`Document`或 a [`DocumentFilter`](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#filter)，它可用于过滤发送到文档的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T10:01:32.587

*   不要[`KeyListener`](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)用于 Swing JComponents，也不要用于[JTextComponents](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)[`DocumentListener`](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)

*   KeyListener 将忽略插入的文本

*   在里面`Document`你可以`event.getSource()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T09:59:34.827

比较地址如下：

```
if (e.getSource() == tf1) { 
   // Source is the first text field
} 
```

正如 MadProgrammer 指出的那样，您需要在创建范围之外使用文本字段的实例变量（在您的情况下为 tf1 和 tf2）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T10:21:06.843

```
public void keyTyped(KeyEvent e) {
    // retries the typed character
    char ch = e.getKeyChar();
    System.out.println(ch);
    if (e.getComponent().getName().equals("TF1")) {
        // Key Typed in Text Field 1
    } else if (e.getComponent().getName().equals("TF2")) {
        // Key Typed in Text Field 2
    }
    // associated textfield of typed char
} 
```

使用 tf1.setName("TF1") 设置单个文本框的名称

# java - 使用套接字从 HTTP Post 接收数据

> ID：13046872
> 
> 赞同：1
> 
> 时间：2012-10-24T09:57:47.483
> 
> 标签：java, android, http, sockets

我的要求是在 android 中使用 Socket 接收 HTTP Post 请求（内容是 JSON 文件）。当我打印 socket.getInputStream() 时，我得到：

```
POST/HTTP/1.1
Content length:41
Content-type: application/json
Host:10.0.2.15:5001
Connection: Keep Alive
User-Agent: Apache HTTPClient/Unavailable(Java 1.4)

CRLF(Carriage return line feed)-  

Actual Contents of JSON<Data> 
```

我使用了链接[https://forums.oracle.com/forums/thread.jspa?messageID=7076709](https://forums.oracle.com/forums/thread.jspa?messageID=7076709)，但它在 Logcat 中仅打印“Content-type: application/json Host:10.0”（可能长度为 41） .

我的代码是：

```
 serverSocket = new ServerSocket(portNumber);
    while(true){ 
    socket = serverSocket.accept();
    List<String> headers = new ArrayList<String>();
    String str;
    BufferedReader reader = new BufferedReader(new  InputStreamReader(socket.getInputStream()));
    while ((str = reader.readLine()) != null)
    {
    headers.add(str);
    if (str.startsWith("Content-Length: "))
    {
    break; // and don't get the next line!
    }
    }
    int contentLength = Integer.parseInt(headers.get(headers.size() - 1).substring("Content-Length: ".length()));

   for(int j=0;j<headers.size();j++)
   {
    Log.d("Headers:",headers.get(j));
    }
    StringBuilder requestContent = new StringBuilder();
    int ch;
    for (int i = 0; i < contentLength; i++)
    {
    requestContent.append((char) reader.read());
    }
    Log.d("The request content is: ",""+requestContent); 
```

这是我的输出： Headers: POST / HTTP/1.1 Content-Length: 41

请求内容：内容类型：应用程序/json 主机：10。

有人可以指导我怎么做吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T11:37:44.427

```
DefaultHttpServerConnection conn = new DefaultHttpServerConnection();
conn.bind(serverSocket.accept(), new BasicHttpParams());
HttpRequest request = conn.receiveRequestHeader();
conn.receiveRequestEntity((HttpEntityEnclosingRequest)request);
HttpEntity entity = ((HttpEntityEnclosingRequest)request).getEntity();
System.out.println(EntityUtils.toString(entity)); 
```

[http://hc.apache.org/httpcomponents-core-ga/tutorial/pdf/httpcore-tutorial.pdf](http://hc.apache.org/httpcomponents-core-ga/tutorial/pdf/httpcore-tutorial.pdf)以获得更多参考

# ruby-on-rails - 单击喜欢按钮时不显示facebook图像

> ID：13046876
> 
> 赞同：0
> 
> 时间：2012-10-24T09:58:03.777
> 
> 标签：ruby-on-rails, facebook-like

我查看了关于 SO 的其他各种帖子，但对我没有任何帮助。

我在头部：

```
<meta property="og:url" content="http://www.impressionable.me" />
<meta property="og:image" content="http://www.impressionable.me/assets/mirror.png" /> 
```

当我在我的网站上单击“喜欢”按钮时，除了**图像**之外的所有内容都正确显示。我还检查了[facebook](https://developers.facebook.com/tools/debug)的 url 调试工具，这就是我得到的：

响应代码 206
无法下载 无法从 URL 检索数据。

奇怪的是，底部的调试页面显示正确的图像？我很困惑为什么会这样？有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T12:35:33.087

这似乎工作[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.impressionable.me](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.impressionable.me)它返回一个 HTTP 200 响应代码并显示所有项目. 记住刮板每 24 小时检查一次

> Facebook 每 24 小时抓取一次您的页面，以确保属性是最新的。当 Open Graph 页面的管理员单击 Like 按钮以及将 URL 输入 Facebook URL Linter 时，该页面也会被抓取。Facebook 会观察您 URL 上的缓存标头 - 它会按优先顺序查看“过期”和“缓存控制”。但是，即使您指定更长的时间，Facebook 也会每 24 小时抓取一次您的页面。

![调试器](../Images/b7ebd549a583f5ba56ba18f75600a499.png)

![在Facebook上](../Images/dfdb7e39b90956c8222e0306ff3ec682.png)

# java - 考虑提供静态工厂方法而不是构造函数

> ID：13046877
> 
> 赞同：2
> 
> 时间：2012-10-24T09:58:08.450
> 
> 标签：java

类允许客户端获取实例的正常方式是提供公共构造函数。另一种方法是提供一个公共静态工厂方法，它只是一个返回类实例的静态方法。使用静态工厂方法有什么优缺点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T10:00:20.840

《Effective Java》一书中的这一章很好地解释了这一点：[考虑静态工厂而不是构造函数](http://www.informit.com/articles/article.aspx?p=1216151)。它以您能理解的最佳方式解释了它们的所有优点和缺点。

只是引用书中的优点和缺点：

**优点**：

*   静态工厂方法的一个优点是，与构造函数不同，它们有名称。
*   静态工厂方法的第二个优点是，与构造函数不同，它们不需要在每次调用时都创建一个新对象。
*   静态工厂方法的第三个优点是，与构造函数不同，它们可以返回其返回类型的任何子类型的对象。
*   静态工厂方法的第四个优点是它们减少了创建参数化类型实例的冗长性（在 Java 7 中可以忽略这一点）

**缺点**：

*   只提供静态工厂方法的主要缺点是没有公共或受保护构造函数的类不能被子类化

*   静态工厂方法的第二个缺点是它们不容易与其他静态方法区分开来。

您可以在我提供的链接中更详细地研究它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T10:00:52.927

唯一的缺点是要编写更多代码，但它仍然存在，因此拥有工厂至少需要一些好处。

工厂不需要总是返回一个新对象，这是一个优势。

工厂可以实例化它想要的任何子类，那是另一个。

在我的项目中，我经常添加工厂只是为了让我的客户端代码看起来更好。如果您对工厂方法使用静态导入，则调用看起来比`new`表达式更好，尤其是在类名不是特别简洁的情况下，这种情况经常发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T10:02:21.247

优点： - 静态工厂方法的一个优点是，与构造函数不同，它们有名称。- 静态工厂方法的第二个优点是，与构造函数不同，它们不需要在每次调用时都创建一个新对象。- 他们可以返回其返回类型的任何子类型的对象。缺点： - 静态工厂方法的主要缺点是没有公共或受保护构造函数的类不能被子类化。- 它们不容易与其他静态方法区分开来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T00:47:35.013

我会对问题的原作者说静态工厂方法是一种工具。像所有工具一样，它们具有最适合的用途、尚可通过的其他用途以及难以适应的其他用途。举一个现实世界的例子，锤子很擅长打钉子，足以用去钉子的一端顶开一个密封的板条箱（撬棍仍然会好得多），但对于刨平粗糙的表面却无用。

工厂方法是指一组创建设计模式中的一个，即创建对象的范例。在诸如“Builder”和“Prototype”之类的创建设计模式中，不仅不鼓励使用 new 操作符来创建对象，而且认为它对整体设计目标有害。人们谈论的创造设计模式是……

1.  工厂方法
2.  抽象工厂方法
3.  单例模式
4.  建造者
5.  原型

一般来说，工厂方法用于根据用户或设计者提供给方法的数据，从一组相关的子类中创建一个对象。更具体地说，静态工厂方法使您可以控制对象的创建，即使每次返回的对象都相同。例如，当创建对象的过程在时间和资源方面非常昂贵时，这可能非常重要。在这种情况下，使用 new 运算符创建对象可能会导致严重的性能损失。

一种解决方案可能是维护一个可重用的对象池。通过使用静态工厂方法，应用程序设计者可以提供逻辑来返回一个可用的免费现有对象。这将节省构建新对象的潜在高成本。这正是提供“连接池”的连接管理器对网络数据库连接所做的事情。不是在每次客户端发出请求时都建立一个新的数据库连接，而是从现有对象池中分配连接对象（如果可用的话）。这是使用新运算符实际上会损害应用程序性能并破坏软件工程师的设计目标的情况的示例。

考虑使用工厂方法而不是 new 运算符来创建对象的好时机是：

*   将创建的对象属于可以根据提供的数据创建的几个可能的对象子类之一。
*   有充分的理由对对象创建过程进行比在构造函数中更多的控制，例如。Singleton 设计模式需要静态工厂方法。

考虑使用工厂方法的最佳时机是：

*   简单、轻量级的对象

这一切都是关于枚举软件设计问题，然后决定哪些工具最适合解决它。静态工厂方法对某些事情有好处，但对其他事情不太好……就像任何工具一样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-16T14:30:55.237

优点之一是您可以为工厂方法提供易于理解的名称。它将帮助您轻松了解您的函数中的哪些函数在工作，并在将来轻松维护您的代码。看看这个例子，希望对你有帮助。

```
 public class Contact {

    private Contact(String displayName, String phoneNumber, int contactType){
    //do something
    }

    //then we will have few functon static to get constructor private
    public static createContactUnknow(String phoneNumber){
        return new Contact("","00000000",0);
    }

    public static createContactValid(String displayName, String phoneNumber, int contactType){
        return new Contact(displayName, phoneNumber, contactType);
    }
}

    //then
    Contact myGirlFriend = Contact.createContactValid("xxxx","000000",1);
    Contact unknowFriend = Contact.createContactUnknow("45454545"); 
```

# javascript - 有没有办法枚举从 SilverLight 传递到 JavaScript 的集合？

> ID：13046879
> 
> 赞同：0
> 
> 时间：2012-10-24T09:58:09.397
> 
> 标签：javascript, silverlight

现在看起来应该知道访问传递集合中的值的可用键。有时这很不方便，例如当 SilverLight 动态构造对象时？

到目前为止，我找不到任何直接的解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:09:38.103

使用[UnderscoreJS](http://underscorejs.org)对您获得的值进行迭代（以及更多的事情）。

您可以使用`_.keys(myvar)`来获取该对象的键。

# java - Ext GWT 2 - 对网格行进行分组

> ID：13046880
> 
> 赞同：0
> 
> 时间：2012-10-24T09:58:17.137
> 
> 标签：java, gwt, gxt

是否可以按列值对网格行进行分组？

例如我有这个`ModelData`：

```
 ModelData model = new BaseModelData();

    Map<String, String> data = new HashMap<String,String>();
    data.put("Date", "20:55:06");
    data.put("Service", "1001");
    data.put("IP", "127.0.0.1:5003"); 
    data.put("Status", "Good");
    data.put("Code", "0200");

    for (Entry<String, String> entry: data.entrySet()) {
        model.set(entry.getKey(), entry.getValue());
    } 
```

我有一个`List<ModelData>`渲染到网格的，我需要的是对网格中具有相同“IP”、“状态”和“代码”的行进行**分组。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:05:17.290

[您可以对 Ext GWT 2 网格中的项目进行分组，如下所示。](http://www.sencha.com/examples-2/#grouping)

您需要创建[该类的一个实例，](http://dev.sencha.com/deploy/gxt-2.2.5/docs/api/com/extjs/gxt/ui/client/widget/grid/GroupingView.html)[并将`GroupingView`](http://dev.sencha.com/deploy/gxt-2.2.5/docs/api/com/extjs/gxt/ui/client/widget/grid/GroupingView.html)其传递给您的`Grid`.

如果您不需要显示组标题，则只需在将`ModelData`对象添加到`Grid`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:42:02.350

我认为[AggregationRowConfig](http://dev.sencha.com/deploy/gxt-2.2.5/docs/api/com/extjs/gxt/ui/client/widget/grid/AggregationRowConfig.html)是您所需要的。

# c# - httpwebrequest 和 javascript

> ID：13046881
> 
> 赞同：2
> 
> 时间：2012-10-24T09:58:17.387
> 
> 标签：c#, httpwebrequest

当我尝试加载以下页面时：

```
http://www.manta.com/c/mm0mg7z/law-office-of-wendy-kazel 
```

使用 httpwebrequest（我使用下面的代码）

```
try {
    HttpWebRequest _wReq;
    HttpWebResponse _wResp;
    System.IO.StreamReader _sr;
    System.Text.ASCIIEncoding _enc = new System.Text.ASCIIEncoding();
    _wReq = (HttpWebRequest) WebRequest.Create("http://www.manta.com/c/mm0mg7z/law-office-of-wendy-kazel");
    _wReq.UserAgent = "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)";
    _wReq.Timeout = 20000;
    _wReq.ReadWriteTimeout = 20000;

    _wReq.Referer = "http://www.manta.com";

    _wResp = (HttpWebResponse) _wReq.GetResponse();
    _sr = new System.IO.StreamReader(_wResp.GetResponseStream());
    _html = _sr.ReadToEnd();
    _sr.Close();
    _wResp.Close();

} catch (WebException ee) {

} 
```

我从 manta 得到以下返回的 html

```
Oops.
Before you can move on, please activate JavaScript. 
```

它并不总是发生，但大多数时候。

知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:18:51.893

HTTP Webrequest**无法执行**客户端脚本。Javascript 需要执行脚本、加载页面并**构建 DOM 以**执行各种操作。

网络请求和响应只是下载资源，无论如何都不处理或执行它。在这种情况下，您最好使用**WebBrowserControl 。**

# css - 用背景填充整个动态 DIV（可能大小不同）

> ID：13046882
> 
> 赞同：1
> 
> 时间：2012-10-24T09:58:20.617
> 
> 标签：css, background, stretch, shrink

我有一个 div，它的宽度和高度取决于浏览器窗口的大小。

我需要一个跨浏览器解决方案来用背景图像填充整个 div。图像不应重复自身，而是垂直和水平拉伸/收缩。

谢谢！

* * *

我为任何感兴趣的人想出了一个跨浏览器的解决方案。

这是一个代码：

```
<div id="content">    
<div style="width:100%;height:100%;position: fixed;left: 0px;top: 0px;z-index: -1;">
    <img src="wallpaper.jpg" style="width:100%;height:100%;" alt="" /> 
</div>

Line 1<br />Line 2<br />Line 3</div> 
```

祝你好运！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:03:32.040

利用：

```
#myDiv {
    background: url('...XXX') no-repeat;
    background-size: 100% 100%;
} 
```

请注意它是 CSS3：“IE9+、Firefox 4+、Opera、Chrome 和 Safari 5+ 支持 background-size 属性。”

# javascript - 检测特定的 HTML 元素以在其上添加 onclick 事件

> ID：13046886
> 
> 赞同：0
> 
> 时间：2012-10-24T09:58:24.617
> 
> 标签：javascript, html, onclick

我想在我的页面上的许多 HTML 元素上动态添加一个 onclick 事件。搜索和查找这些元素的最佳方式是什么，手头没有它们的 id 并且知道 HTML 元素没有任何共同点。

这样做的一种方法是向所有元素添加一个 CSS 类 ('add-onclick') 并遍历文档，并为每个 HTML 标签 'elem' 执行以下检查：(elem.className.indexOf('add-onclick ') != -1)

我能看到的唯一缺点是，我将 CSS 类用于样式以外的其他内容。这完全违法吗？我还有什么其他选择？

我正在使用 XHTML 1.0 过渡，没有 HTML5 不是一个选项。

非常感谢圣战

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:17:23.003

您可以为类添加前缀，我的意思是`click_redbg`or`click_bluebg`并使用带有 jQ​​uery 或 Prototype 的正则表达式：

```
$("div[class^='click_']").each(function(e) { ... }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:15:37.440

好吧，那里有许多具有“委托”功能的 Javascript 框架，大多数不需要 html5 功能（因为它的正常 ECMA 脚本）。

委托基本上是在更高级别捕获 DOM 事件，然后引发事件（DOM 事件在 dom 中冒泡，直到它们到达最底部的元素，然后再次向上并通知每个事件处理程序他们在路由中传递的元素）

如果你想在不使用框架的情况下实现这些，你可以在文档正文中添加一个点击事件（例如）。此事件会在您的页面上获得所有点击，因为“最底部元素”存储在事件的数据中，您可以为该元素设置 css 规则并委托给您的委托实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:34:20.150

最好的方法取决于上下文和标准。

为此目的使用类没有任何问题。类是一种标记语言概念，没有“CSS 类”——只是在 CSS 中使用类选择器——并且没有要求类仅用于样式。

遍历文档树并检查每个元素的类当然是可能的。然而，这可能是 jQuery 适合的东西。`$('.add-onclick').click(handleClick)`如果类中的所有元素都应具有相同的事件处理函数，则使用 jQuerym 只需要语句`handleClick`。

# php - json_encode 没有给出有效的 json 字符串

> ID：13046888
> 
> 赞同：0
> 
> 时间：2012-10-24T09:58:39.233
> 
> 标签：php, json

我用 json_encode 生成的 json 字符串遇到了这个问题。这是输入：

```
stdClass Object
(
[titles] => stdClass Object
    (
        [nl] => test
        [en] => test
    )

[contents] => stdClass Object
    (
        [nl] => <p>\n   test</p>\n
        [en] => <p>\n   test</p>\n
    )

[languages] => stdClass Object
    (
        [0] => nl
        [1] => en
    )

) 
```

我使用以下 SQL 语句将其放入我的数据库中：

```
INSERT INTO `pages`
                    (`title`, `content`, `lang`)
                    VALUES('{"nl":"test","en":"test"}', '{"nl":"<p>\\n\ttest<\/p>\\n","en":"<p>\\n\ttest<\/p>\\n"}', '{"0":"nl","1":"en"}') 
```

据我所见，没有错，都存储在数据库中，没有问题。

然后我尝试获取我的内容的输出：

```
{"nl":"<p>n test</p>n","en":"<p>n   test</p>n"} 
```

这导致：

```
(
[id] => 10
[title] => stdClass Object
    (
        [nl] => test
        [en] => test
    )

[content] => 
[lang] => stdClass Object
    (
        [0] => nl
        [1] => en
    )

[created] => 2012-10-24 11:49:52
) 
```

所以，我的 json 字符串是无效的。这怎么可能？我真的不知道我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:22:44.983

啊! 你是对的！愚蠢的我没想到这一点，我总是在我的`SELECT`语句中使用一个函数，在我使用的这段代码中，`stripslashes()`这显然使我的 json 字符串无效，因为其中有一些`\n`东西。谢谢！

# php - 如何在 foreach 循环中同时打印两个数组？

> ID：13046892
> 
> 赞同：4
> 
> 时间：2012-10-24T09:58:54.263
> 
> 标签：php, foreach

> **可能重复：**
> [在 PHP 中同时遍历两个关联数组](https://stackoverflow.com/questions/8395889/iterate-through-two-associative-arrays-at-the-same-time-in-php)

我有两个数组`$name[]`和`$type[]`. 我想像这样通过foreach循环打印那些arraya，

```
<?php
foreach($name as $v && $type as $t)
{
echo $v;
echo $t;
}
?> 
```

我知道这是错误的方法，然后告诉我正确的方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T10:00:06.340

你不能那样做。您需要执行以下操作之一：

1.  使用`for`循环并“共享”索引变量，或者
2.  与朋友手动迭代[`each`](http://php.net/manual/en/function.each.php)，或
3.  将两个数组压缩在一起[`array_map`](http://php.net/manual/en/function.array-map.php)

### 示例`for`：

```
for ($i = 0; $i < count($name); ++$i) {
    echo $name[$i];
    echo $type[$i];
} 
```

可能的问题：数组需要进行数字索引，如果它们的长度不同，那么使用哪个数组很重要`count`。您应该以较短的数组为目标，或者采取适当的措施来避免越界索引较长的数组。

### 示例`each`：

```
reset($name);  // most of the time this is not going to be needed,
reset($type);  // but let's be technically accurate

while ((list($k1, $n) = each($name)) && (list($k2, $t) = each($type))) {
    echo $n;
    echo $t;
} 
```

可能的问题：如果数组的长度不同，那么这将在“较短”数组用完后停止处理元素。您可以通过交换 来更改它`||`，`&&`但是您必须考虑其中一个`$n`并且`$t`并不总是具有有意义的值。

### 示例`array_map`：

```
// array_map with null as the callback: read the docs, it's documented
$zipped = array_map(null, $name, $type);

foreach($zipped as $tuple) {
    // here you could do list($n, $t) = $tuple; to get pretty variable names
    echo $tuple[0]; // name
    echo $tuple[1]; // type
} 
```

可能的问题：如果两个数组的长度不同，那么较短的数组将用空值扩展；你无法控制这个。此外，虽然这种方法很方便，但确实会使用额外的时间和内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:02:06.013

如果数组的长度始终相同，并且元素是唯一的，并且如果 的所有值`$name`都是字符串或整数，则可以使用[`array_combine`](http://php.net/manual/en/function.array-combine.php)：

```
foreach (array_combine($name, $type) as $v => $t) {
    echo $v, $t;
} 
```

`array_combine`创建一个新数组，第一个数组的元素提供键，而第二个数组的元素提供值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T10:02:57.277

您可以使用手动数组迭代函数[`next()`](http://www.php.net/manual/en/function.next.php)，[`reset()`](http://www.php.net/manual/en/function.reset.php)并[`current()`](http://www.php.net/manual/en/function.current.php)在 while 循环中：

```
reset($a);
reset($b);

while( (next($a) !== false) || (next($b) !== false)){
    $t = current($a);
    $v = current($b);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-24T10:04:13.190

你可以这样做

```
for ($i = 0; $i < max(count($name), count($type)); $i++) { 
    if(isset($name[$i]))
        echo 'name[' . $i . '] = ' . $name[$i];  
    if(isset($type[$i]))
        echo 'type[' . $i . '] = ' . $type[$i]; 
} 
```

# unicode - 代表“下载”的 Unicode 符号

> ID：13046899
> 
> 赞同：33
> 
> 时间：2012-10-24T09:59:50.430
> 
> 标签：unicode

我正在寻找可用于表示下载的 Unicode 字符。这是一个（U+2B07）看起来相当不错，但它似乎没有默认字体：[http ://www.fileformat.info/info/unicode/char/2b07/browsertest.htm](http://www.fileformat.info/info/unicode/char/2b07/browsertest.htm)

有没有人有替代方案？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-24T10:05:45.403

看看这个网站。你可能会找到你需要的东西。 [http://www.alanwood.net/unicode/arrows.html](http://www.alanwood.net/unicode/arrows.html)

例如：⇓</p>

尽管在我看来，图像会是更好的解决方案。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-24T10:03:43.763

您可以使用 ↓ (U+2193)，它有 Arial 字体。要查看完整列表，请从 Windows 运行 charmap.exe。它将显示所有可用的 unicode 字符。

# javascript - 使用jQuery滚动窗口时添加类

> ID：13046905
> 
> 赞同：1
> 
> 时间：2012-10-24T10:00:08.600
> 
> 标签：javascript, jquery, scroll, offset

当我滚动页面/窗口时，我想为指定元素添加一些类，所以我为此使用了偏移量，但它不是在工作 - 有什么问题？非常感谢您的帮助。这是我的代码：

```
$(window).scroll(function() {
    var top_offset = $('body').offset().top;
    if ((top_offset >= 40)) {
        $('nav').addClass('docked_nav');
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T10:06:15.640

您已经在变量中获取了offest 值`top_offset`，它现在包含数值并且不是对象。所以要么使用

```
if (top_offset>= 40) {
        $('nav').addClass('docked_nav');
    } 
```

或者不使用任何变量

```
if ($('body').offset().top >= 40) {
        $('nav').addClass('docked_nav');
    } 
```

Arun Killu 的回答也是需要考虑的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:05:08.450

```
$('.nav').addClass('docked_nav'); if nav is a class or `#nav` if nav is id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T10:10:18.090

当 window 是实际的滚动元素时，我将假设您从顶部获取 body 的偏移量。在这种情况下，您可能希望通过调用如下函数来获取窗口的滚动位置：

```
function getWindowScrollPos() {
    return (window.pageYOffset !== undefined) ? window.pageYOffset :
    (document.documentElement ||
     document.body.parentNode ||
     document.body).scrollTop;
} 
```

如果您试图使一个或多个元素具有粘性（粘在顶部），您可以轻松地使用我创建的这个库来处理这个问题，而不必担心引擎盖下发生了什么：

[https://github.com/vhiremath4/Balloon](https://github.com/vhiremath4/Balloon)

编辑：

以防万一不清楚，您将要调用该 getWindowScrollPos 函数并将其分配给 top_offset 而不是使用 jQuery 的 offset 方法。

# c# - App.config：用户与应用程序范围

> ID：13046907
> 
> 赞同：96
> 
> 时间：2012-10-24T10:00:11.720
> 
> 标签：c#, .net, winforms, app-config, application-settings

我在我的项目中添加了 App.config 文件。我从 Project > Properties > Settings 面板创建了两个设置 -

[![在此处输入图像描述](../Images/c7c3e99d84d7e150593cc89a5272817e.png)](https://i.stack.imgur.com/FHMTf.png)

我注意到，当我添加设置时，我可以将范围定义为`User`或`Application`。-

1.  用户
2.  应用

如果我`User`在进入部分时定义设置`userSettings`，
如果我`Application`在进入`applicationSettings`部分时定义设置

**应用程序配置**

```
<configuration>

    <userSettings>
        <DemoApp.Properties.Settings>
            <setting name="MySetting1" serializeAs="String">
                <value>Value1</value>
            </setting>
        </DemoApp.Properties.Settings>
    </userSettings>

    <applicationSettings>
        <DemoApp.Properties.Settings>
            <setting name="MySetting2" serializeAs="String">
                <value>Value2</value>
            </setting>
        </DemoApp.Properties.Settings>
    </applicationSettings>

</configuration> 
```

但是，这些设置可以通过相同的方式从`.cs`-

**代码**

```
string mySetting1 = DemoApp.Properties.Settings.Default.MySetting1;
string mySetting2 = DemoApp.Properties.Settings.Default.MySetting2; 
```

`User`范围和范围有什么区别`Application`，在什么情况下应该在这两者之间进行选择？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-10-24T10:05:54.110

基本上，应用程序设置在程序运行期间不能更改，而用户设置可以。然后应保存这些用户设置，以便在用户下次运行应用程序时呈现熟悉的体验。

编辑：例如，您可能使用不同的模块编写应用程序，并且需要确保您的主模块使用正确版本的安全模块。为此，您将设置一个应用程序范围设置，例如：

```
SecurityModuleVersion  string     Application      v1.21 
```

稍后，当您重构安全模块时，**您**可能会在部署时将值更改为 v1.22，以确保实施正确的安全性

另一方面，如果您的应用程序具有不同的“皮肤”，包括颜色变化、字体变化等，那么您可以设置一个用户设置，如下所示：

```
ApplicationSkin        string     User              DefaultSkin 
```

然后，当 Michelle 更改为她喜欢的皮肤时，应用程序会记住**她的**设置。属性现在可能如下所示：

```
ApplicationSkin        string     User              HelloKittySkin 
```

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2012-10-24T10:03:52.863

> 应用程序范围设置是只读的，只能在设计时或通过在应用程序会话之间更改 .exe.config 文件来更改。但是，用户范围设置可以在运行时编写，就像您更改任何属性值一样。新值在应用程序会话期间持续存在。您可以通过调用 Settings.Save 方法在应用程序会话之间保留对用户设置的更改。

msdn 上的来源：[在 C# 中使用设置](http://msdn.microsoft.com/en-us/library/aa730869(v=vs.80).aspx)

用户设置通常用于持久化用户偏好（例如应用通知偏好等）。应用程序设置通常用于 API 密钥等项目。

正如@kmote 所指出的，当用户设置在运行时（通过`settings.Save()`）被修改和持久化时，它们将被写入用户配置文件存储中的一个文件夹（在 Windows 7 及更高版本中通常为 C:\Users\ **Username** \AppData\Local\ **AppName**）。为了以编程方式确定文件的位置，请参阅[这篇文章](https://stackoverflow.com/questions/1075204#1075318)。

# jquery - 选项卡不适用于生成的服务 ID

> ID：13046908
> 
> 赞同：0
> 
> 时间：2012-10-24T10:00:15.640
> 
> 标签：jquery, asp.net, css

我有这个 jQuery 文件

```
 jQuery(document).ready(function() {        
     var orderId= <%= OrderLi.ClientID %>;

    jQuery("#ApprovalTab").css("display", "block");
    jQuery("#ApprovalLi").css("background-color", "#5EA8DE");
    jQuery("#ApprovalLi a").css("color", "#FFF");
    jQuery("#OrdersTab").css("display", "none");
    jQuery("#ApprovalLi a").css("border-bottom", "3px #5EA8DE solid");

    jQuery("#ApprovalLi").click(function() {
        jQuery("#ApprovalTab").css("display", "block");
        jQuery("#ApprovalLi").css("background-color", "#5EA8DE");
        jQuery("#ApprovalLi a ").css("color", "#FFF");
        jQuery("#orderId a").css("color", "black");
        jQuery("#Arrow").css("margin-left", "15px");
        jQuery("#ApprovalLi a").css("border-bottom", "3px #5EA8DE solid");
        jQuery("#orderId a").css("border-bottom", "3px #D8D9DC solid");
        jQuery("#orderId").css("background-color", "#F0F1F4");
        jQuery("#OrdersTab").css("display", "none");

    });

    jQuery("orderId").click(function() {
        jQuery("#ApprovalTab").css("display", "none");
        jQuery("#OrdersTab").css("display", "block");
        jQuery("#Arrow").css("margin-left", "112px");
        jQuery("#orderId").css("background-color", "#5EA8DE");
        jQuery("#orderId a").css("border-bottom", "3px #5EA8DE solid");
        jQuery("#ApprovalLi a").css("border-bottom", "3px #D8D9DC solid");
        jQuery("#ApprovalLi").css("background-color", "#F0F1F4");
        jQuery("#orderId a").css("color", "#FFF");
        jQuery("#ApprovalLi a").css("color", "black");

    });

    jQuery("#orderId").hover(function() {
        jQuery("#orderId a").css("border-bottom", "3px #5EA8DE solid");
    });

    jQuery("#ApprovalLi").hover(function() {
        jQuery("#ApprovalLi a").css("border-bottom", "3px #5EA8DE solid");
    });
  }); 
```

它适用于此：

```
<ul class="etabs">
<li id="ApprovalLi"><a href="#stopAtTop">Approval </a></li>
<li id="OrderLi" runat="server"  ><a href="#stopAtTop">Orders</a></li>
</ul> 
```

如果我不使用 runat="server" 代码就可以正常工作，但是当我使用它时，代码不会呈现。我在互联网上搜索了一些东西，但我发现的唯一一件事是“ID 正在改变”。我已经知道了，您可以在上面的 jQuery 中看到我正在使用服务器 ID。

顺便说一句：我知道我可以优化上面的代码，但我希望它首先工作。

还有什么问题？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:07:42.300

您将变量设置`orderId`为`ClientID`使用：

```
var orderId= <%= OrderLi.ClientID %>; 
```

will的值`ClientID`需要用引号括起来以使其成为字符串文字，尽管（最初错过了这一点，感谢 Yuriy），否则这本身会导致问题：

```
var orderId= '<%= OrderLi.ClientID %>'; 
```

但是似乎根本没有利用它，而是尝试`orderId`使用其他两种方法访问某些东西，这两种方法都在 jQuery 选择器中使用硬编码的字符串文字：

```
 jQuery("orderId") 
```

和

```
 jQuery("#orderId") 
```

现在第一个是寻找一个元素（或者更确切地说是所有元素）`orderId`，第二个是寻找一个标识符为 的元素`"orderId"`。因此，您的代码在*没有* *.*`runat="server"` *`runat="server"`*

 *你想要的是实际使用你的变量：

```
jQuery(orderId) 
```

更准确地说，假设您正在使用选择器中的标识符：

```
jQuery("#" + orderId) 
```

使用散列而不是每次使用（取决于总使用量）为变量值添加前缀可能更有用。*

# mysql - 在 MySQL 中使用 Temp Table 或 Cursor 时没有得到预期的输出

> ID：13046914
> 
> 赞同：6
> 
> 时间：2012-10-24T10:01:01.240
> 
> 标签：mysql, sql, stored-procedures, temp-tables, database-cursor

我正在做一些 POC。我在 MySQL 中编写了一个存储过程。我正在使用 MySQLWorkbench 进行数据库操作，例如创建新表、存储过程、查询执行等。我观察到一些意外的执行行为，即使代码在语法和逻辑上看起来都是正确的。

以下是要点。

**方法 1** -

在第一种方法中，我正在创建临时表并使用带有选定列的 INSERT INTO ...SELECT 语句添加记录。

```
CREATE TEMPORARY TABLE XYZ(....);

INSERT INTO XYZ (....) SELECT (....) FROM ABC WHERE clause; 
```

这样做之后，*我只在临时表的几列中获得空值，并且所有其他临时表列都填充了正确的值*。

如果我在单独的 SQL 选项卡中运行相同的选择语句（对于相同的 where 子句），即使对于在临时表中获得空值的那几列，我也可以看到正确的输出。

如果我用*（所有列）更改上面的 INSERT INTO..SELECT 语句，那么我在临时表中得到正确的输出..

```
INSERT INTO XYZ  SELECT * FROM ABC WHERE clause; 
```

但不希望所有列。我还尝试使用 ENGINE = value 创建临时表。但是没有用。即使我用普通表（没有临时表）尝试了所有这些方法，但不幸的是

**方法 2 -**

在第二种方法中，我用游标而不是临时表修改了相同的存储过程。但即使在这种情况下，游标也没有得到任何记录。

```
DECLARE cur1 CURSOR FOR SELECT (....) FROM ABC WHERE clause; 
```

如果我在单独的 SQL 选项卡中运行相同的选择语句（对于相同的 where 子句），我可以看到正确的输出。

难道我做错了什么？我能得到任何建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T07:15:30.440

我已经在方法 #1 中发现了问题。根本原因是用作 IN 参数之一的变量名。我使用了与我的表列名相同的 IN 变量名。这就是为什么，我相信，不知何故，它是在写实际的表值。我更改了 IN 变量名，并且我的存储过程正确运行。

# .net - windows mobile 6.5中的相机分辨率变化

> ID：13046916
> 
> 赞同：1
> 
> 时间：2012-10-24T10:01:04.457
> 
> 标签：.net, windows-mobile-6.5

我想通过代码更改 windows mobile 6.5 中的相机分辨率。但它不起作用我的代码片段如下。

```
CameraCaptureDialog cameraCaptureDialog = new CameraCaptureDialog(); 
cameraCaptureDialog.Owner = this; 
cameraCaptureDialog.Resolution = new Size(800, 600); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T04:37:58.443

这是我用来启动 CameraCaptureDialog 的片段：

```
cameraDialog.Owner = this;
cameraDialog.InitialDirectory = @"\My Documents";
cameraDialog.DefaultFileName = "test.jpg";
cameraDialog.Title = "iCOMM Camera Demo";
cameraDialog.StillQuality = CameraCaptureStillQuality.Default;
cameraDialog.Mode = CameraCaptureMode.Still; 
```

不同之处在于，我不使用自由定义的 Size 对象，而是使用 CameraCaptureDialog 类给出的现有分辨率常量。

如前所述，注册表中应该有一个受支持的决议列表。在另一个代码中，我使用以下代码来获取已知的资源：

```
public cResolution[] getResolutions(){
cResolution[] cRes;
RegistryKey rKey = Registry.LocalMachine.OpenSubKey(regSubResolution, false);
string[] subKeys = rKey.GetSubKeyNames();
cRes = new cResolution[subKeys.Length];
int i=0;
foreach (string s in subKeys)
{
    RegistryKey rKeySub = Registry.LocalMachine.OpenSubKey(regSubResolution + "\\" + s, false);
    string item;
    int w, h, hqfs, nqfs, lqfs, pw, ph;
    item = (string)rKeySub.GetValue("ItemString");
    w = (int)rKeySub.GetValue("Width");
    h = (int)rKeySub.GetValue("Height");
    hqfs = (int)rKeySub.GetValue("HighQualityFileSize");
    lqfs = (int)rKeySub.GetValue("LowQualityFileSize");
    nqfs = (int)rKeySub.GetValue("NormalQualityFileSize");
    ph = (int)rKeySub.GetValue("PreviewHeight");
    pw = (int)rKeySub.GetValue("PreviewWidth");
    cRes[i] = new cResolution(item, h, w, pw, ph, hqfs, nqfs, lqfs);
    i++;
    rKeySub = null;
} 
```

但如前所述，这取决于相机的 OEM 实施。

~约瑟夫

# python - 从 Tkinter 或 PMW 接口打印

> ID：13046917
> 
> 赞同：3
> 
> 时间：2012-10-24T10:01:11.593
> 
> 标签：python

我在 Python Mega Widgets 和 Tkinter 中创建了一个接口，它是 SQlite3 数据库的接口。查询结果以列表形式返回，并显示在显示器主框架上的备注字段中。

我可以创建一个**从默认打印机打印**备忘录字段内容的按钮启动的小功能吗？

就像是：

```
command = printMemo  #argument within the print button

#the print function I am looking for in pseudocode
def printMemo(memo):
       print memo 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T13:37:06.397

这取决于您使用的是 windows 还是 linux 或 mac/unix。答案将根据您在哪个系统上运行此 python 脚本而相应改变。

**视窗**

要将打印作业发送到 Windows 上的打印机，您将使用`win32print` [http://timgolden.me.uk/python/win32_how_do_i/print.html](http://timgolden.me.uk/python/win32_how_do_i/print.html)

**LINUX/UNIX/MAC**

对于 linux/unix/mac 系统，您可以使用`pkipplib`库并利用 CUPS (http://en.wikipedia.org/wiki/CUPS) 运行 CUPS 的计算机是可以接受来自客户端计算机的打印作业的主机，处理并将它们发送到相应的打印机。有关基于 CUPS 的打印，请参见[http://www.pykota.com/software/pkipplib](http://www.pykota.com/software/pkipplib)。

`pkipplib`是一个可以通过 PyPi 安装的第三方库。如果您熟悉 的使用`pip`，您需要做的就是运行

```
pip install pkipplib 
```

并且`pkipplib`python 模块将可供您导入到您的脚本中。然后，您可以在连接到您的 linux/unix/mac CUPS 打印机后执行打印，类似于上面链接中的示例。像这样：-

```
# CUPS' API
from pkipplib import pkipplib

# Create a CUPS client instance 
# cups = pkipplib.CUPS(url="http://server:631, \
#                      username="john", \
#                      password="5.%!oyu")
cups = pkipplib.CUPS()

# High level API : retrieve info about job 3 :
answer = cups.getJobAttributes(3)
print answer.job["document-format"]
# That's all folks !

# Lower level API :
request = cups.newRequest(pkipplib.IPP_GET_PRINTER_ATTRIBUTES)
request.operation["printer-uri"] = ("uri", 
                                    cups.identifierToURI("printers", "HP2100"))
for attribute in ("printer-uri-supported",                                     
                  "printer-type",
                  "member-uris") :
    # IMPORTANT : here, despite the unusual syntax, we append to              
    # the list of requested attributes :
    request.operation["requested-attributes"] = ("nameWithoutLanguage", attribute)

# Sends this request to the CUPS server    
answer = cups.doRequest(request)    

# Print the answer as a string of text
print answer 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-21T05:45:44.060

我希望这将有所帮助。是的，您可以使用 win32com.client

要发送文件进行打印，您可以使用 openpyxl 来

您的数据到 xl 电子表格并使用默认或所需打印机发送以进行打印以获取更多信息，请阅读 win32com.client 以发送数据以进行打印

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-15T17:17:57.907

最简单的方法是创建一个文本文件，然后使用操作系统的打印命令（例如 *nix 上的 lpr）。如有必要，您可以合并标记（groff 或乳胶）您还可以创建 postscript 或 PDF 文件，但这需要更多的工作！

这具有额外的优势，即可以使打印命令可配置（环境或配置文件），因此可以在多个操作系统上工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-18T03:09:19.453

好问题。希望我的回答会有所帮助。

注意：我使用 python 3.3，所以我们需要导入 tkinter 和 Tkinter ...

在下面的程序代码行中，您需要将文本变量定义为字符串变量（这里是`text1`）和`= StringVar()`.

然后，当您创建条目小部件（此处为它`text_entry`）时，您指示哪个变量采用用户点击按钮时输入的值`(.., textvariable = text1)`。

然后，您使用该功能创建一个按钮小部件`command =`（这里`print_text(*args))`将打印用户键入的内容。

由于 text1 是一个列表（或者可能是元组，不确定），您需要使用属性的`.get`方法来获取输入的值。这里它`print(text1.get())`

我还添加了一些东西：`text_entry.focus()`当您运行程序时将光标放在该小部件中，这样用户就不必在输入空间中单击并`root.bind('<Return>', print_text)`允许用户点击`Enter`打印。

```
from tkinter import *
from tkinter import ttk

def print_text(*args):
    try:
        print(text1.get())
    except ValueError:
        pass

root = Tk()
root.title("Little tkinter app for printing")

mainframe = ttk.Frame(root, padding="3 3 12 12")
mainframe.grid(column = 0, row = 0, sticky = (N,W,E,S))

mainframe.columnconfigure(0, weight = 1)
mainframe.rowconfigure(0, weight = 1)

text1 = StringVar()
text_entry = ttk.Entry(mainframe, width = 20, textvariable=text1)
text_entry.grid(column = 1, row = 2, sticky = (N,W,E,S))

ttk.Button(mainframe, text = "Print!", command =
           print_text(text1)).grid(column = 1, row = 3, sticky = (E))

for child in mainframe.winfo_children():
    child.grid_configure(padx = 5, pady = 5)

text_entry.focus()
root.bind('<Return>', print_text)

root.mainloop() 
```

# java - 错误：[Microsoft][ODBC SQL Server Driverr][SQL Server]插入错误：列名或提供的值的数量与表定义不匹配

> ID：13046920
> 
> 赞同：1
> 
> 时间：2012-10-24T10:01:22.753
> 
> 标签：java, sql-server, netbeans-6.9

我正在为我的 Java 项目使用带有 Netbeans 6.9 的 MS SQL Server 2005。

这是我的表结构（在 SSMS 2005 中）：

[http://i.stack.imgur.com/bwTuH.png](http://i.stack.imgur.com/bwTuH.png)

现在，在 Netbeans 中，我使用此代码片段将输入的名称保存到“名称”列中：

```
 if(e.getSource().equals(submit))
    {
        try
        {
            String str="insert into TETRISUSERS values(?,'0')";
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            Connection con=DriverManager.getConnection("jdbc:odbc:java","sa", "123456");
            PreparedStatement stmt=con.prepareStatement(str);
            stmt.setString(1,username.getText());

            stmt.executeUpdate();
        }
        catch(Exception ex)
        {
            JOptionPane.showMessageDialog(name1,"Error : "+ex.getMessage());
        } 
```

现在，当我运行项目并输入名称时，出现以下错误：

**错误：[Microsoft][ODBC SQL Server Driverr][SQL Server]插入错误：列名或提供的值的数量与表定义不匹配。**

我还尝试在插入命令中使用直接列名，如下所示：

```
 try
        {
            String str="insert into TETRISUSERS(ID,name,highscore) values(?,'0',?)";
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            Connection con=DriverManager.getConnection("jdbc:odbc:java","sa", "007007");
            PreparedStatement stmt=con.prepareStatement(str);
            stmt.setString(1,username.getText());

            stmt.executeUpdate();
        } 
```

但是这样我得到了这个错误：

**错误：[Microsoft][ODBC SQL Server Driver]COUNT 字段不正确或语法错误**

最后，我尝试使用这个：

```
try
        {
            String str="insert into TETRISUSERS(ID,name) values(?,'0')";
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            Connection con=DriverManager.getConnection("jdbc:odbc:java","sa", "007007");
            PreparedStatement stmt=con.prepareStatement(str);
            stmt.setString(1,username.getText());

            stmt.executeUpdate();
        } 
```

我得到了这个错误：

**错误：一般错误**

谁能指导我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:07:32.967

根据您的图片，所有列都不允许空值。如果您为任何列传递空值，它就会出错。因此，尝试为每一列传递一个值，您可能会得到不同且可能更好的结果。

# .net - 哪个接口实现了使用 (MyType) 数组作为数据源？

> ID：13046924
> 
> 赞同：1
> 
> 时间：2012-10-24T10:01:42.070
> 
> 标签：.net, linq, datasource

我有一个 LINQ 查询，如下所示：

```
 allRecords = (From metaset In section.sets
                  From metacell In metaset.cells
                  Let attrib = metacell.attrib
                  Order By attrib.attrib_name
                  Select Attribute = attrib.attrib_name,
                         Type = attrib.attrib_name,
                         Col = metacell.column,
                         Row = metacell.row
                     ).ToArray() 
```

它返回一个`<anonymous type>`数组。
当我写时`myDataGridView.DataSource = allRecords`，网格会正确填充。

但是，如果我修改查询以返回对象数组`CellDetail`，而不是`<anonymous type>`：

```
 allRecords = (From metaset In section.sets
                  From metacell In metaset.cells
                  Let attrib = metacell.attrib
                  Order By attrib.attrib_name
                  Select New CellDetail With {
                         .Attribute = attrib.attrib_name,
                         .Type = attrib.attrib_name,
                         .Col = metacell.column,
                         .Row = metacell.row
                     ).ToArray() 
```

哪里`CellDetail`是这么定义的：

```
Public Class CellDetail

    Public Attribute As String
    Public Type As String
    Public Col As Int32
    Public Row As Int32

End Class 
```

DataGridView 没有找到兼容的数据并且什么也不显示！

我应该实现一个 .Net 接口以使`CellDetail`类与 DataGridView 的 DataSource 兼容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T10:04:11.863

`DataGridView`绑定到***属性***，而不是***字段***。使它们成为属性。

```
Public Class CellDetail    
    Public Property Attribute As String
    Public Property Type As String
    Public Property Col As Int32
    Public Property Row As Int32    
End Class 
```

或者在 C# 中，这将是：

```
public class CellDetail {    
    public string Attribute {get;set;}
    public string Type {get;set;}
    public int Col {get;set;}
    public int Row {get;set;}
} 
```

# sharepoint - Sharepoint 2013 Foundation - Active Directory 导入

> ID：13046929
> 
> 赞同：0
> 
> 时间：2012-10-24T10:02:07.473
> 
> 标签：sharepoint, sharepoint-2010, active-directory, sharepoint-2013

我想知道是否还有其他人与我在这里遇到的问题相同...

我刚刚安装了 Sharepoint 2013 Foundation Preview。我需要做的是将所有用户从 Active Directory 服务器导入 Sharepoint，这样他们就可以登录系统，我可以为他们分配访问级别等。

在不升级到 Sharepoint Server 2013 的情况下，是否有任何明确的方法可以做到这一点？我可以想象这在 2010 年也是一样的......

我没有发现在线教程可以清楚地显示设置方法而不会弄乱 PowerShell，即使是 2010 年也是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:08:32.093

用户配置文件同步不是基础版本（2010 或 2013）的一部分。

您必须使用第三方插件来处理此问题或切换到更高的 SharePoint 版本（标准版或企业版）

# flash - AS3 中的位图命中测试

> ID：13046930
> 
> 赞同：-1
> 
> 时间：2012-10-24T10:02:08.910
> 
> 标签：flash, actionscript, bitmap, hittest

我正在为我的最终项目构建一个 16 位游戏并完成所有对象和环境，我将所有图像作为 png 文件导出到 flash 以及我的角色中，将环境分解为背景、对象和前景。但是，我找不到一个简单的教程来解释如何进行位图命中测试或另一种使我的角色无法移动到对象中的简单方法。

有人可以推荐一个简单的教程或实现这一目标的替代方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:57:48.533

看看这个关于使用`BitmapData.hitTest`碰撞检测的精彩教程：

[http://www.mikechambers.com/blog/2009/06/24/using-bitmapdata-hittest-for-collision-detection/](http://www.mikechambers.com/blog/2009/06/24/using-bitmapdata-hittest-for-collision-detection/)

此外，如果您正在构建 Flash 游戏，我认为您应该考虑使用**Flash Game Engine**，例如 2D 游戏、平台游戏等，我建议您：

*   [闪光朋克](http://flashpunk.net/)

*   或[Flixel](http://flixel.org/)

两者都将在游戏开发特定的东西（例如碰撞检测、用户输入等）方面为您提供很多帮助，这将加快您的工作流程。希望这可以帮助！

# mysql - 连接多张表，显示3张或更多表的数据

> ID：13046934
> 
> 赞同：2
> 
> 时间：2012-10-24T10:02:23.033
> 
> 标签：mysql, join

我有如下三张表，

```
Table1-
num |info
----------
1   |aaaaa  
2   |bbbb
3   |ccc
3   |ccc
4   |dddd

Table2-
num |info
----------
1   |aaaaa
3   |ccc
4   |dddd
5   |eeee
6   |ffff

Table3-
num |info
----------
1   |aaaaa
6   |ffff
2   |bbbb 
```

我想要得到的结果是，

```
Result-
num |info   num |info   num |info
----------- ----------- ----------
1   |aaaaa  1   |aaaaa  1   |aaaaa
2   |bbbb   NULL|NULL   2   |bbbb
3   |ccc    3   |ccc    NULL|NULL
3   |ccc    3   |ccc    NULL|NULL
4   |dddd   4   |dddd   NULL|NULL
NULL|NULL   6   |ffff   6   |ffff 
```

**或者**

```
Result 2-
num |info   num |info   num |info
----------- ----------- ----------
1   |aaaaa  1   |aaaaa  1   |aaaaa
2   |bbbb   NULL|NULL   2   |bbbb
3   |ccc    3   |ccc    NULL|NULL
3   |ccc    3   |ccc    NULL|NULL
4   |dddd   4   |dddd   NULL|NULL
NULL|NULL   5   |eeee   NULL|NULL
NULL|NULL   6   |ffff   6   |ffff 
```

如果有一种方法可以检索给定结果中的任何一个，那就太好了:) 非常感谢:) .. 我尝试像这样使用完全连接，

```
 SELECT *
    FROM tbl_1 AS a
    LEFT OUTER JOIN tbl_2 AS b ON a.num = b.num
    UNION
    SELECT *
    FROM tbl_1 AS a
    RIGHT OUTER JOIN tbl_2 AS b ON a.num = b.num 
```

但它只适用于 2 个表，如果完全连接是解决方案如何执行此操作？如果不是，我如何从给定的三个表中得出我想要的结果？

我尝试搜索，但没有人帮助执行此任务。

我问了[加入多个表格（特殊条件）](https://stackoverflow.com/questions/13043595/join-multiple-tables-special-condition/)的问题，但它没有帮助..认为可能不清楚这就是我再次发布的原因:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:07:11.890

我认为正如您在下面的早期问题中所发布的那样，应该可以正常工作：-

```
 SELECT  a.num numA, a.info infoA,
    b.num numB, b.info infoB,
    c.num numC, c.info infoC
 FROM    table1 a
    LEFT JOIN table2 b
       ON a.num = b.num
    LEFT JOIN table3 c
       ON a.num = c.num
 ORDER BY a.num 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:50:09.163

这个问题由@Andreas Wederbrand 解决，

[3个表的完全连接](https://stackoverflow.com/questions/13061615/full-join-for-3-tables)

实施 a`full join`是我的查询的解决方案。

希望它对遇到这个问题的人有所帮助:)

# svn - 大型版本控制的规模如何？

> ID：13046935
> 
> 赞同：3
> 
> 时间：2012-10-24T10:02:22.760
> 
> 标签：svn, version-control

如果我说要管理 10 TB 的数据，SVN（或 GIT）或其他版本控制系统如何执行？

访问如此大的存储库时，我需要考虑哪些主要事项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:41:25.750

不久前在我们的论坛上对此进行了介绍，并得到了一些 Subversion 提交者的回应，此处供参考 - [http://www.svnforum.org/threads/39795-Is-there-any-inherent-Subversion-repository-size-限制](http://www.svnforum.org/threads/39795-Is-there-any-inherent-Subversion-repository-size-limit)

简短的回答是没有上限，除了文件系统强加的上限。

但在实践中，您会遇到大量存储库（例如您建议的存储库）的问题，尤其是当您需要执行 svnadmin 转储/加载之类的操作或需要搜索非常繁忙的日志文件时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:23:23.050

我想，除了 SVN/Git，您还在考虑使用其他版本控制来处理您的大型项目。如果您要管理相对较大的项目，您可能需要检查以下因素。

1.  数据存储，无论是版本控制工具是文件系统还是使用SQL Server作为后端。从技术上讲，文件系统要脆弱得多。

2.  安全性，包括访问权限的管理、数据库加密、数据库是否容易备份以及网络层面的证券。毕竟，源代码是最宝贵的资产。

3.  并发连接。这取决于您拥有的开发人员。由于您有大型项目，我猜您可能有许多开发人员（甚至位于不同的国家/地区）在从事这些工作。这种情况，你应该考虑版本控制工具是否能巧妙地处理这种情况。

# objective-c - AVPlayerLayer 获取图像到 UIImageView 缓冲区

> ID：13046936
> 
> 赞同：8
> 
> 时间：2012-10-24T10:02:26.980
> 
> 标签：objective-c, ios, screenshot, avplayerlayer

我尝试 [playerLayer renderInContext:UIGraphicsGetCurrentContext()]; 它将显示黑色背景。所以我得到当前的播放器项目作为连续的重击图像它看起来不像视频播放只是静止图像连续流动。所以还有其他选择吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T06:51:14.300

试试这个代码设置阅读器

```
//setUp Reader
    AVURLAsset * asset = [AVURLAsset URLAssetWithURL:urlvalue options:nil]; 
    [asset loadValuesAsynchronouslyForKeys:[NSArray arrayWithObject:@"tracks"] completionHandler: ^{ dispatch_async(dispatch_get_main_queue(), ^{
        AVAssetTrack * videoTrack = nil; 
        NSArray * tracks = [asset tracksWithMediaType:AVMediaTypeVideo];
        if ([tracks count] == 1) {
            videoTrack = [tracks objectAtIndex:0];
            NSError * error = nil; 
            _movieReader = [[AVAssetReader alloc] initWithAsset:asset error:&error]; 
            if (error) 
                NSLog(error.localizedDescription); 
            NSString* key = (NSString*)kCVPixelBufferPixelFormatTypeKey; 
            NSNumber* value = [NSNumber numberWithUnsignedInt:kCVPixelFormatType_4444AYpCbCr16]; NSDictionary* videoSettings = [NSDictionary dictionaryWithObject:value forKey:key];
            [_movieReader addOutput:[AVAssetReaderTrackOutput assetReaderTrackOutputWithTrack:videoTrack outputSettings:videoSettings]]; 
             [_movieReader startReading];

        } 
    }); 
    }]; 
```

获取下一个电影帧

```
- (void) readNextMovieFrame { 

    if (_movieReader.status == AVAssetReaderStatusReading) { 

        AVAssetReaderTrackOutput * output = [_movieReader.outputs objectAtIndex:0]; 
        CMSampleBufferRef sampleBuffer = [output copyNextSampleBuffer];
        if (sampleBuffer) {
            CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer); 
            // Lock the image buffer 
            CVPixelBufferLockBaseAddress(imageBuffer,0);
            // Get information of the image 
            uint8_t *baseAddress = (uint8_t *)CVPixelBufferGetBaseAddress(imageBuffer); 
            size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer); 
            size_t width = CVPixelBufferGetWidth(imageBuffer); 
            size_t height = CVPixelBufferGetHeight(imageBuffer); 

            /*We unlock the  image buffer*/
            CVPixelBufferUnlockBaseAddress(imageBuffer,0);

            /*Create a CGImageRef from the CVImageBufferRef*/
             CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB(); 
            CGContextRef newContext = CGBitmapContextCreate(baseAddress, width, height, 8, bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst); 
            CGImageRef newImage = CGBitmapContextCreateImage(newContext); 

            /*We release some components*/
            CGContextRelease(newContext); 
            CGColorSpaceRelease(colorSpace);

            /*We display the result on the custom layer*/
            /*self.customLayer.contents = (id) newImage;*/

            /*We display the result on the image view (We need to change the orientation of the image so that the video is displayed correctly)*/
            UIImage *image= [UIImage imageWithCGImage:newImage scale:0.0 orientation:UIImageOrientationRight];
            UIGraphicsBeginImageContext(image.size);

            [image drawAtPoint:CGPointMake(0, 0)];

           // UIImage *img=UIGraphicsGetImageFromCurrentImageContext();
            videoImage=UIGraphicsGetImageFromCurrentImageContext();

            UIGraphicsEndImageContext();

//videoImage=image;

          //  if (frameCount < 40) {
                NSLog(@"readNextMovieFrame==%d",frameCount);
                      NSString* filename = [NSString stringWithFormat:@"Documents/frame_%d.png", frameCount];
                      NSString* pngPath = [NSHomeDirectory() stringByAppendingPathComponent:filename];
                     [UIImagePNGRepresentation(videoImage) writeToFile: pngPath atomically: YES];
                     frameCount++;
        //        }

            CVPixelBufferUnlockBaseAddress(imageBuffer,0); 
            CFRelease(sampleBuffer); 
        } 
    } 
} 
```

# javascript - 可以使用 Jquery 构建表

> ID：13046937
> 
> 赞同：1
> 
> 时间：2012-10-24T10:02:31.513
> 
> 标签：javascript, jquery, asp.net-mvc, razor

我在我的 asp.net MVC Web 应用程序中有以下视图：-

```
<table id="tablelist" border="1">
    <tr>

    </tr>
    </table> 
```

我正在尝试使用以下 java 脚本填充表格：-

```
function getprocesslist(result) {
    var str = 'Total Number Of Processes:- ' + result.total.toString();
        $('#total').text(str.toString());
        var str1 = '<th>'+ 'Process Name' + '</th><th>'+ 'Process Requestor ID' + '</th><th>'+ 'Process State' +' </th><th>'+ 'Process Start Date' +' </th><th>'+ 'Process Due Date' +' </th>';
        $('#tablelist tr:last').after(str1);
    $.each(result.data, function (key, val) {
        var str2 = '<tr><td>' + val.name + '</td><td>' + val.requesterId + '</td><td>' + val.state + '</td><td>' + val.startedTime + '</td><td>' + val.due + '</td></tr>';

        $('#tablelist tr:last').after(str2);

    }); 
```

但是我在上面的代码中面临以下问题：-

1.  表头`<th>`将显示在表的末尾而不是第一行。

2.  如果我多次执行相同的脚本，那么表格格式将是错误的，并且表格数据将在每个表格单元格内以多行显示。

3.  尽管我定义了`border="1"`.

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:08:45.033

您的标题显示在表格底部的原因是它不在 a 内`<tr>`，这是无效的，并且您的浏览器不太知道如何处理它。把它包起来，`<tr>`你会没事的。这可能也可以解决您的第二个问题。

至于边框，它们应该在您的标记有效时出现，假设没有其他覆盖样式。

[演示](http://jsfiddle.net/LzUCb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:09:42.010

将您的表格分成`thead`和`tbody`元素。然后只需将一个新`th`单元格附加到`thead tr`

```
<table id="tablelist" border="1">
    <thead>
        <tr>

        </tr>
    </thead>
    <tbody>
    </tbody>
</table> 
```

javascript

```
$('#tablelist thead tr:last').append(str1);
...
$('#tablelist tbody tr:last').append(str1); 
```

对于boder，使用css，兄弟。

编辑：根据@DavidHedlund 的回答，您需要使用`append`而不是`after`. *将在表格行之后*`after`插入元素，但您希望它*在*您需要的行中。**`append`**

# php - PHP echo - 组合短语和撇号

> ID：13046940
> 
> 赞同：0
> 
> 时间：2012-10-24T10:02:46.170
> 
> 标签：php, echo

我对 PHP 很陌生，所以请不要指望我知道高级技术...

我目前有

```
$cat = "A Phrase Here" 
```

结果在哪里

```
A Phrase Here 
```

以及以下代码：

```
$cat = "'$cat'";
echo $cat; 
```

因为我希望它的最终结果是：

```
'A Phrase Here' 
```

然而，出来的是：

```
' A Phrase Here ' 
```

我怎样才能摆脱'A'之前和'Here'之后的额外空间？

谢谢你。

**编辑**

原来`$cat`的空格似乎有问题，需要`trim`修复。对大家造成的误解，我深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:07:09.820

`$cat = "'$cat'"`工作得很好。

如果您看到额外的空格，则表示原始字符串包含它们。[您可以使用trim](http://php.net/manual/en/function.trim.php)删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:06:46.493

`echo`不是唯一的选择。使用`printf()`：

```
$cat = "A Phrase Here"
printf("'%s'", trim($cat) ); 
```

以避免`'`分隔字符串中的变量替换问题。

编辑：`trim()`添加： http: [//php.net/trim](http://php.net/trim)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T10:07:59.103

你不需要第二次分配，所以：

```
$cat = "A Phrase Here";
echo $cat; // this is enough

$cat = "A Phrase here";
$cat = $cat . ", and this should be an extra string";
echo $cat;

$cat = "     this string with many white spaces    ";
echo trim($cat); // will trim the white spaces before and after the string; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T10:11:30.737

您已经有多余的空间了，这不是分配，也不是`echo`行。为确保不会传递额外的空格，您可以使用`trim`：

```
$cat = "'".trim($cat)."'"; 
```

但最好查看您的代码并找到添加空格的位置。（或只是`var_dump`一切）

# image - 使用 libjpeg 在 I/O 暂停模式下加载的图像失真

> ID：13046941
> 
> 赞同：2
> 
> 时间：2012-10-24T10:02:46.490
> 
> 标签：image, loading, jpeg, libjpeg, distortion

几天后，我不得不放弃并提交这个问题。我要做的基本上是非常简单的 - 这是代码：

```
switch ( state )
{
case INIT:
        if (jpeg_read_header(&p_jpeg.info, true) == JPEG_SUSPENDED)
        {   
            return SUSPEND;
        }
        if (  p_jpeg.info.jpeg_color_space == JCS_CMYK  
           || p_jpeg.info.jpeg_color_space == JCS_YCCK ) return UNSUPPORTED;

        p_jpeg.info.out_color_space = JCS_RGB;
        p_jpeg.info.dct_method =  JDCT_FLOAT;
        p_jpeg.info.dither_mode = JDITHER_FS;
        p_jpeg.info.do_fancy_upsampling = TRUE;
        p_jpeg.info.enable_2pass_quant = FALSE;
        p_jpeg.info.do_block_smoothing = TRUE;
        jpeg_calc_output_dimensions(&p_jpeg.info);
        int row_size = p_jpeg.info.output_width * p_jpeg.info.output_components;
        p_jpeg.samples = (*p_jpeg.info.mem->alloc_sarray)((j_common_ptr) &p_jpeg.info,
                          JPOOL_IMAGE,
                          row_size, 1);

        state = START;
case START:
        if (!jpeg_start_decompress(&p_jpeg.info))
        {   
            return SUSPEND;
        }
        state = WORK;
case WORK:
    JSAMPARRAY samples = p_jpeg.samples;

    while (info->output_scanline < info->output_height) {
        if (jpeg_read_scanlines(info, samples, 1) != 1 ) //one scanline only
        {
            return SUSPEND;   // we need more data            
        }
        //copy line to destination
        char* line = (char*)samples[0];
        for (unsigned i = 0; i < info->output_width; ++i)
        {
            (*row).r  = *line++;
            (*row).g  = *line++;
            (*row).b  = *line++;
        }
   } //end while
   state = DONE;
case DONE:
        while (!jpeg_finish_decompress(&p_jpeg.info))
        {
            return SUSPEND;
        }
        return SUCCESS;
} //switch 
```

有了我从各种相机和其他来源获得的所有文件，一切都像魅力一样 - 图像被加载到 RGB 缓冲区中，瞧！然而，真正困扰我的是我遇到某些加载严重失真的 JPG 图像 - 更糟糕的是 - 我正在使用的 libjpeg 的 8d 分发中包含的示例 JPGS 也被扭曲了 - 这意味着我可能做错了什么。有人可以指出我正确的方向吗？上面的代码有什么问题，有时可以，但在 - 让我再次强调，在**极**少数情况下，它会给我带来严重扭曲的图像（查看使用上述代码加载的参考图像的附加示例）。

感谢您的帮助！

**来自 libjpg 8d 发行版的原始图像文件：** ![来自 libjpg 8d 发行版的原始图像文件](../Images/d5c55d1a15dd48750e05ade23e950035.png)

**在这种情况下，我使用上面的代码得到图像失真** ![在这种情况下，我使用上面的代码得到图像失真](../Images/460fbc14fb5f932ffa8239097aabb13a.png)

PS：上面的代码是从真实代码中必不可少的提取物——我想这无论如何都无关紧要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T18:50:00.570

好的，我终于设法解决了。问题不在于图像解码/加载部分，而在于缺少这条小线的纹理生成部分：

```
glPixelStorei(GL_UNPACK_ALIGNMENT, 1); 
```

# cocos2d-iphone - 带有空气摩擦且没有物理引擎的 Cocos2d 弓箭运动，如何？

> ID：13046942
> 
> 赞同：0
> 
> 时间：2012-10-24T10:02:54.133
> 
> 标签：cocos2d-iphone, game-physics

在过去的两天里，我一直在弄清楚从弓上射出的箭的运动，但没有完美的最终结果。这是我到目前为止所拥有的：

```
 - (void) update:(ccTime) dt {
    elapsedTime += dt;
    CGFloat t = elapsedTime;
    float theta = CC_DEGREES_TO_RADIANS(angle);
    velocity = ccp (initialVelocity.x* cos(theta), initialVelocity.y*sin(theta));

    float k = 0.3; //this would be the air resistance factor
    float vvx = sqrtf( velocity.x*velocity.x + velocity.y*velocity.y );
    float vvy = sqrtf( velocity.x*velocity.x + velocity.y*velocity.y );

    CGFloat ax = -k*vvx; //accelerationX
    CGFloat ay = -k*vvy - gravity; //accelerationY

    velocity = ccp(velocity.x + ax * t , velocity.y + ay * t);

    CGPoint oldPosition = self.position;
    CGPoint newPosition = ccp(self.position.x + velocity.x * t + ax * t * t, self.position.y + velocity.y * t + ay * t * t);

    CGPoint v1 = CGPointMake(0.0, 0.0);
    CGPoint v2 = CGPointMake(newPosition.x - oldPosition.x ,  newPosition.y - oldPosition.y);
   CGFloat newAngle = (atan2(v2.y, v2.x) - atan2(v1.y, v1.x));
    self.rotation = CC_RADIANS_TO_DEGREES(-newAngle);
    self.position = newPosition;

} 
```

使用此代码，我得到了这种行为：

使用：k = 0.3，角度 = 0 度，重力 = 9.8

initialVelocity = 100 时，箭头的抛物线轨迹很好

initialVelocity = 200 时，箭头移动得更快，但轨迹与 initialVelocity = 100 完全相同

在 initialVelocity = 300 时，箭头移动得更快，轨迹略有不同，但仍然非常接近 initialVelocity = 100 的轨迹

我的代码有问题吗？请注意，我对所有概念都没有很好的理解，根据我在网上阅读的内容，大部分实现都是命中注定的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:20:45.363

您正在多次添加加速度。你有：

```
velocity = ccp(velocity.x + ax * t , velocity.y + ay * t); 
```

然后在下面：

```
CGPoint newPosition = ccp(self.position.x + velocity.x * t + ax * t * t, self.position.y + velocity.y * t + ay * t * t); 
```

在我看来，您可以将第二行简化为

```
CGPoint newPosition = ccp(self.position.x + velocity.x * t, self.position.y + velocity.y * t); 
```

但是，我认为您的整体算法比它需要的更复杂，这使得错误更难找到。不应该有任何理由跟踪角度；只需分离向量并独立处理。在伪代码中，是这样的：

```
// setup
vx = cos(InitAngle) * InitVelocity;
vy = sin(InitAngle) * InitVelocity;
locx = 0;
locy = 0;
gravity = -1.0;
friction  -0.01;

// loop
Update(t) {
  vx *= 1+(friction * t);
  vy +=gravity * t;
  locx += vx * t;
  locy += vy * t;
} 
```

（我可能把 sin/cos 颠倒了；我总是弄错。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:51:09.167

Horatiu，如果您不想使用物理引擎并且想通过hit&miss，我建议您从没有空气阻力的情况下开始。从简单开始，从简单的物理学中获得帮助：抛出物体的方程（加速度、速度、位置、推导和时间），然后在合适的时候加上空气摩擦。当您拥有正确的方程式时，编码将是一个简单的步骤！

# logic - 查找用户选择点到理想点的准确性的逻辑

> ID：13046951
> 
> 赞同：0
> 
> 时间：2012-10-24T10:03:22.080
> 
> 标签：logic

我被困在我需要找到用户选择的准确性的地方。

这是我的情况：我有一个高度和宽度 $h 和 $w 的图像。并且图像中有一个理想点，即 $x,$y(Co-ordinates)。用户选择一个坐标 $x1,$y1。我想要找到的是。用户选择与理想选择有多接近或有多准确。

寻找百分比的输出。

不找代码，只找逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:18:12.547

您可以测量距理想点的绝对距离，然后应用衰减函数。一种可能的选择是高斯函数`e^-(d^2)`。

所以，一个可能的公式是

`rating = e^{-[(x-xi)^2+(y-yi)^2]/radius^2}`

其中是与给用户评分(38%)`radius`的理想位置的距离。`e^-1`您可以根据自己的喜好选择半径，然后根据您希望评级函数的严格程度对其进行调整。例如，您可以选择半径为图像对角线的 1/5。

解释：

*   `dist^2 = (x-xi)^2 + (y-yi)^2`计算欧几里得距离的平方（毕达哥拉斯公式）。
*   `scaled^2 = dist^2 / radius^2`缩放距离
*   `e^-(scaled^2)`是高斯分布。

如果您愿意，没有比这更好的了：

*   该函数是径向对称的（您必须计算欧几里得距离或其平方）
*   要合理缩放的函数（一个像素不是合理的缩放比例）
*   从 [0;1] 下降到 [+inf;0] 的函数（e^-d^2 完美地做到了这一点）

这是高斯函数的图，上述半径用红色标记。 ![高斯函数](../Images/78866275d33d7e22828f74b244749869.png)

# java - 使用 apache poi 读取 Excel 文件时出现异常

> ID：13046953
> 
> 赞同：3
> 
> 时间：2012-10-24T10:03:30.023
> 
> 标签：java, jakarta-ee, apache-poi

读取 Excel 2007 文件 .xlsx 文件扩展名时出现问题，而我正在尝试使用 apache poi 读取：

```
InputStream file = new FileInputStream(C:\\test.xlsx);

---> XSSFWorkbook workbook = new XSSFWorkbook(file); 
```

请这条线给我一个例外`Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/xmlbeans/XmlObject` ，这个错误可能是什么原因？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-24T10:08:39.947

您需要在类路径中包含一个名为 `xmlbeans-x.x.x.jar`“your_location_of_poi\poi-xx\ooxml-lib\”文件夹下的 jar 文件。

注意：`x.x`是您正在使用的 poi 版本，`x.x.x`是上述文件夹下该 jar 文件的版本号

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T10:10:26.653

您下载额外的 jar 文件。您可以下载：

[http://www.findjar.com/index.x;jsessionid=D9C61BD4B98370C199118B8C53CC689F?query=org.apache.xmlbeans.XmlObject](http://www.findjar.com/index.x;jsessionid=D9C61BD4B98370C199118B8C53CC689F?query=org.apache.xmlbeans.XmlObject)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T10:05:09.973

您缺少 POI 附带的额外 jar 文件。将它们包含在您的类路径中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T10:04:41.453

您的类路径中没有 XMLBeans。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-01T07:28:43.023

我下载了 xmlbeans.jar 并作为外部 Jar 添加到库中。它解决了我的问题。

# python - 初始化和销毁 Python 多处理工作者

> ID：13046956
> 
> 赞同：8
> 
> 时间：2012-10-24T10:03:33.800
> 
> 标签：python, multiprocessing

我有一个模型，我从 Python 中多次调用它。该模型需要很长时间才能启动和关闭，但处理输入数据的时间很短（可以在启动/关闭之间多次完成）。多处理 Pool() 似乎是完成此任务的好方法，但我无法让 Model() 类正确销毁。

下面给出了程序代码的简化结构。实际上，init 和 del 函数需要用 win32com.client 模块做一些巧妙的事情，而 model.y 变量是控制外部应用程序的句柄。

```
#!/usr/bin/env python

import multiprocessing
import random
import time

class Model():
    def __init__(self):
        self.y = random.randint(0,5) # simplification
        time.sleep(5) # initialisation takes a while...
    def __del__(self):
        del(self.y) # simplification
        time.sleep(1) # destruction isn't especially quick either

def init():
    global model
    model = Model()

def f(x): # worker function, runs quickly
    return model.y * x ** 2

def main():
    pool = multiprocessing.Pool(processes=2, initializer=init)
    it = pool.imap(f, range(4))
    for n in range(4):
        print it.next()
    pool.close()

if __name__ == '__main__':
    main() 
```

模型（）从不调用 del 函数，我猜是因为垃圾收集器中保存了一些引用。如何确保模型在程序结束时正确关闭？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:33:46.657

johnthexiii 的解决方案会在工作函数的第一次运行时杀死模型。您可以提供单独的销毁功能：

```
import time

def g(x): # destroy function
    del model
    time.sleep(1) # to ensure, this worker does not pick too many
    return None 
```

`pool.close()`添加之前

```
pool.map_async(g, range(2), 1) # if specified to have two processes before 
```

我不认为，这是一个非常“干净”的解决方案，但它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:39:40.153

怎么样

```
def f(x): # worker function, runs quickly
    y = model.y
    del model
    return y * x ** 2 
```

# r - 如何在一个数组中找到比另一个数组中的给定数字大的最小数字？

> ID：13046959
> 
> 赞同：0
> 
> 时间：2012-10-24T05:37:15.930
> 
> 标签：r

```
larger1temp = wbd663$mbsf[which(wbd663$mbsf > carb663$mbsf[i])]

larger1 = larger1temp[1] 
```

^这就是我现在的做法，但一定有更好的方法。这是一个while循环，解释i。

基本上，`wbd663$mbsf`是一个深度数组，`carb663$mbsf`也是一个深度数组。我想找到`wbd663$mbsf`大于给定值的最小深度`carb663$mbsf[i]`值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T08:05:36.687

我同意@John。作为替代`sapply`，你可以使用`findInterval`，它真的很快

```
As <- sort(A)
id <- findInterval(B, A)
As[id+1] # NA if lub does not exist. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T06:15:29.367

假设我有向量 A 和向量 B 的第 4 项。获得大于向量 B 的第 4 项的最小项的语法是...

```
min(A[A > B[4]) 
```

但我有点担心你的问题真的应该详细说明，因为你已经在循环中获得了 B 的索引。你真的想要这些最低要求中的每一个吗？

在这种情况下，您可以使用

```
sapply( B, function(x) min(A[A>x]) ) 
```

如果结果有点慢，您可能可以通过预排序和使用直接索引来加快速度。一个简单的版本就是。

```
As <- sort(A)
sapply( B, function(x) As[As>x][1] ) 
```

（好吧，实际上，这并没有更快......无论如何我都看不到更快）

# jquery - 页面刷新在 Firefox 中不起作用

> ID：13046978
> 
> 赞同：0
> 
> 时间：2012-10-24T10:04:50.850
> 
> 标签：jquery, tomcat

当我尝试在 Firefox 中使用刷新页面时遇到问题

location.reload(true);

它会更改我的服务器 URL，就像我的服务器 URL 一样

> www.mywebsite.com/login.html

因此，当我通过单击按钮使用 location.reload(0) 刷新我的页面时。它将我的 URL 更改为

> www.mywebsite.com/myproject/login.html

它只发生在 chrome 的 Firefox 浏览器上，它工作正常。

它也可以在我的本地机器上正常工作。唯一的问题是在实时服务器上。

如果您需要任何其他信息，请告诉我。

网站在 apache tomcat 服务器上运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:19:30.380

不知道为什么那行不通。尝试使用：

```
history.go(0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:29:30.787

我的猜测是它`location.reload()`足够了。[在http://jsfiddle.net/f7tA3/1/](http://jsfiddle.net/f7tA3/1/)上查看

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T16:36:46.110

感谢您的答复。但问题是别的，因为它是 jquery 错误。我把 event.preventDefault(); 在表单验证方法中。我刚刚删除了它，它现在正在工作。

# eclipse-cdt - 使用 Subclipse 时，Eclipse CDT 中的“路径和符号”选项卡“包含”和“符号”是否有替代品？

> ID：13046981
> 
> 赞同：1
> 
> 时间：2012-10-24T10:04:54.263
> 
> 标签：eclipse-cdt, subclipse, indexer

我已经成功地使用“路径和符号”中的选项来让索引器能够识别来自编译器目录的 C 标准库中的东西，例如 stdint 的`uint8_t`. 但是现在，当我使用 Subclipse 插件时，进行这些更改的可能性就消失了。项目的“属性”选择很少有选项，它们都与我在这里感兴趣的内容无关。

如何解决这个问题？我愿意接受所有建议。

我正在使用：Eclipse CDT 8.1.0 (Juno) 和 Subclipse 1.8.16

# java - 两个线程写入同一实体的不同字段

> ID：13046985
> 
> 赞同：2
> 
> 时间：2012-10-24T10:05:03.880
> 
> 标签：java, hibernate

我有以下情况。

一个业务实体 (BE) 由 2 个线程异步提供的 2 个部分组成。示例：我们的 BE 具有字段 id 和 A、B、C - 都在数据库的一个表中。id 是实体存入数据库时​​按顺序生成的。B 是唯一字段，在数据库中有限制。Process1 提供字段 A 和 B。Process2 提供字段 B 和 C。因此，在两个过程完成后，我们应该在表格中有一行，所有列都已填写。

使这项工作的好方法是什么？

现在做了什么：

在每个过程中，我们首先从表中选择所有值，其中 B 列中的值是我们现在拥有的值。（如果有的话 - 这意味着其他进程已经保存了它的一部分）。如果有什么东西，它会用缺失的列丰富并持久化。如果什么都没有 - 我们只是坚持我们所拥有的。但是当所有这些都完成时，可能会发生另一个进程完成它的工作，当我们持久化我们的实体时，我们会得到 ConstraintViolationException 和休眠标记事务回滚。并且丢失的列仍然丢失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:33:03.527

您首先必须决定如何处理冲突。对于这个答案，以下问题：

如果在进程 2 运行时进程 1 更改了您的实体，那么 2 的结果是否仍然有效？还是应该重新运行？

如果进程 1 更新字段 B 应该在进程 2 运行时应该进程 2 覆盖它吗？还是只保留流程1的价值？

当然问题也应该用1和2互换来回答。

如果您以他们采用原始实体的方式实现该过程，并生成一个新的修改+他们开始使用的原始实体，您可以有一个添加所有这些结果的队列和一个将这些更改应用到您的数据库的单个进程.

在特定情况下，更简单的方法可能是可能的，但这是我在您在问题中描述的非常一般情况下推荐的方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-26T11:48:19.557

我会这样做

*   在启动线程之前加载或创建实体
*   启动线程并将其分配给每个
*   在两个线程中更新它
*   当两者都完成保存到数据库时

# java - AlertDialog 之后的 AlertDialog

> ID：13046995
> 
> 赞同：0
> 
> 时间：2012-10-24T10:05:31.280
> 
> 标签：java, android

我的代码不断出现错误。我正在尝试在 AlertDialog 中调用一个新的 AlertDialog。显示销售商似乎有问题，但我不明白为什么......

```
public String passA = "";
public String passB = "";

public void createPassword() {
    final AlertDialog.Builder alert = new AlertDialog.Builder(this);
    final AlertDialog.Builder salert = new AlertDialog.Builder(this);
    final EditText input = new EditText(this);
    input.setInputType(InputType.TYPE_TEXT_VARIATION_PASSWORD
            | InputType.TYPE_CLASS_TEXT);

    salert.setView(input); // edit text added to alert
    alert.setView(input); // edit text added to alert
    salert.setTitle("Widerholen Sie Ihre PIN"); // title setted
    alert.setTitle("Geben Sie eine PIN an"); // title setted

    final OnClickListener b = new OnClickListener() {
        public void onClick(DialogInterface arg0, int arg1) {
            passB = input.getText().toString();
            if (passA.equals(passB)) {
                editor = settings.edit();
                editor.putString("password", passA);
                editor.commit();
                logged_in = true;
                return;
            }
        }
    };
    salert.setPositiveButton("OK", b);

    OnClickListener a = new OnClickListener() {
        public void onClick(DialogInterface arg0, int arg1) {
            passA = input.getText().toString();

            salert.show();
            return;
        }
    };

    alert.setPositiveButton("OK", a);

    alert.setOnCancelListener(new OnCancelListener() {

        public void onCancel(DialogInterface dialog) {
            // TODO Auto-generated method stub
            Functions.writeError("Falsche PIN Eingabe.");
            finish();
        }

    });
    alert.show();
} 
```

我得到的错误是：

```
10-24 12:02:32.836: E/AndroidRuntime(2446): FATAL EXCEPTION: main
10-24 12:02:32.836: E/AndroidRuntime(2446): java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
10-24 12:02:32.836: E/AndroidRuntime(2446):     at android.view.ViewGroup.addViewInner(ViewGroup.java:3337)
10-24 12:02:32.836: E/AndroidRuntime(2446):     at android.view.ViewGroup.addView(ViewGroup.java:3208)
10-24 12:02:32.836: E/AndroidRuntime(2446):     at android.view.ViewGroup.addView(ViewGroup.java:3188)
10-24 12:02:32.836: E/AndroidRuntime(2446):     at com.android.internal.app.AlertController.setupView(AlertController.java:401)
10-24 12:02:32.836: E/AndroidRuntime(2446):     at com.android.internal.app.AlertController.installContent(AlertController.java:241)
10-24 12:02:32.836: E/AndroidRuntime(2446):     at android.app.AlertDialog.onCreate(AlertDialog.java:336)
10-24 12:02:32.836: E/AndroidRuntime(2446):     at android.app.Dialog.dispatchOnCreate(Dialog.java:353)
10-24 12:02:32.836: E/AndroidRuntime(2446):     at android.app.Dialog.show(Dialog.java:257)
10-24 12:02:32.836: E/AndroidRuntime(2446):     at android.app.AlertDialog$Builder.show(AlertDialog.java:932)
10-24 12:02:32.836: E/AndroidRuntime(2446):     at de.pixelstein.nativ.NativeTestActivity$5.onClick(NativeTestActivity.java:257)
10-24 12:02:32.836: E/AndroidRuntime(2446):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:166)
10-24 12:02:32.836: E/AndroidRuntime(2446):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-24 12:02:32.836: E/AndroidRuntime(2446):     at android.os.Looper.loop(Looper.java:137)
10-24 12:02:32.836: E/AndroidRuntime(2446):     at android.app.ActivityThread.main(ActivityThread.java:4514)
10-24 12:02:32.836: E/AndroidRuntime(2446):     at java.lang.reflect.Method.invokeNative(Native Method)
10-24 12:02:32.836: E/AndroidRuntime(2446):     at java.lang.reflect.Method.invoke(Method.java:511)
10-24 12:02:32.836: E/AndroidRuntime(2446):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
10-24 12:02:32.836: E/AndroidRuntime(2446):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
10-24 12:02:32.836: E/AndroidRuntime(2446):     at dalvik.system.NativeStart.main(Native Method) 
```

任何帮助或信息都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T10:25:44.047

您正在为多个对话框使用一个视图，一个视图只能有一个父级。

改变：

```
final EditText input = new EditText(this);

salert.setView(input); // edit text added to alert
alert.setView(input); // edit text added to alert 
```

到：

```
final EditText firstInput = new EditText(this);
final EditText secondInput = new EditText(this);

salert.setView(firstInput); // edit text added to alert
alert.setView(secondInput); // edit text added to alert 
```

# c# - 单击 C# 工具栏中的按钮时如何触发 JavaScript 函数

> ID：13046996
> 
> 赞同：1
> 
> 时间：2012-10-24T10:05:33.267
> 
> 标签：c#, javascript, internet-explorer

我的**IE**工具栏中有一个按钮，我想在单击它时触发一个 JavaScript 函数

例子：`$("#start").click();`

`$("#start").click();`当我在 Chrome 控制台中写入时，它正在工作

现在我需要知道如何从我的工具栏按钮触发此代码

我正在用 C# 编写。

* * *

我已经有了 JavaScript 代码。

我只需要知道如何从 C# 调用这个函数

* * *

这是一张图片。

![在此处输入图像描述](../Images/f172a2973e2473bf8ee0e31304f3f997.png)

**编辑3：** 更清楚。这是C#中的函数

```
private void button1_Click(object sender, EventArgs e)
        {
            Fire_Javascript_Into_Html_Page("Alert();");
        } 
```

我猜这更清楚。

* * *

我正在使用一个名为“ **add** -in-express”的 Visual Studio 插件

这个插件为 IE 制作了一个工具栏，编译后我有一个 .msi 文件，我可以安装工具栏

这就是我所拥有的：请看下面的图片 ![在此处输入图像描述](../Images/982065d20afaba4c9c3319cd5ddaee2e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:16:37.347

使用`onclientclick="<scriptname>"`按钮中的属性。

从代码隐藏做，我用这样的东西

```
/// <summary>
/// creates a javascript alert in the browser window.
/// </summary>
/// <param name="message">The message you wish the user to see in the alert.</param>
public void AMessage(string message)
{
    ScriptManager.RegisterStartupScript(this.Page, Page.GetType(), "info only", "alert('" + message + "');", true);
} 
```

随时从代码隐藏中触发 javascript 警报。

相同的原则适用于任何脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:09:20.343

这是 jQuery 点击事件的基本结构。只需将按钮的选择器传递给第二个参数。

```
 $(document).on("click", 'button[id="myButton"]', function () {
        var $this = $(this);
        var elementClicked = $this.attr("id");
        alert(elementClicked);
        callMyJavascriptFunction();
    }); 
```

这是基本的javascript。

```
<html>
<head>
<script>
    function clickButton()
    {
         alert("Button 1 was clicked!");
    }
</script>
</head>
<body>
<form>
    <input type="button" id="button1" onclick="clickButton()" value="Button 1" />
</form>
</body>
</html> 
```