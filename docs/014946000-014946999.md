# StackOverflow 问答 14946000-14946999

# iphone - 应用程序不会从 iTunes 传输到 iPhone

> ID：14946000
> 
> 赞同：0
> 
> 时间：2013-02-18T21:54:32.733
> 
> 标签：iphone, itunes

我们有一个可以工作的应用程序，我们想通过在客户的 iPhone 上对其进行现场测试。我们已经通过 iTunes 将应用程序安装到我们的一部手机上，没有任何问题。当我们试图将它放到另一部手机上时（在将它放到 iTunes 上之后），出现了一个错误。另一台计算机已经在 iTunes 上有配置文件，两部手机都包含在配置文件中，两部手机的型号相同 (4s) 并且运行相同的操作系统。我能想到的唯一区别是我们正在尝试通过 PC 进行传输，而我们使用的是 Mac。我希望这不是问题。有没有办法知道是什么导致了问题？还是解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:40:00.307

请尝试 testflight 或 diawi 安装应用程序。它很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:04:16.407

您是否尝试过在“组织者”下选择设备并选择“用于开发”？

# html - 内容大于 div 本身的 iframe 样式 div

> ID：14946002
> 
> 赞同：1
> 
> 时间：2013-02-18T21:54:56.917
> 
> 标签：html, css

我想制作一个`<div>`非常长的高度（2000px，或多或少），我只想显示其中的一部分（400px-500px），并有一个滚动条来浏览它。

我不知道从哪里开始，有没有人有一些文章/操作方法或指导我如何做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:57:26.800

试试这个它会工作HTML

```
<div id="main_div">

     // Your contents

</div> 
```

CSS

```
<style type="text/css">
    #main_div {
      width:200px;
      height:400px;
      overflow:scroll;
    }
    // stylish scroll bar
    #main_div{
       overflow: scroll;
    }
    #main_div::-webkit-scrollbar {
        background: transparent;
        height: 4px;
        overflow: visible;
        width: 4px;
    }
    #main_div::-webkit-scrollbar-thumb {
        background-color: rgba(0, 0, 0, 0.9);
        -webkit-border-radius:5px;
    }
    #main_div::-webkit-scrollbar-thumb:hover{
        background-color: rgba(0, 0, 0, 0.6);   
    }
    #main_div::-webkit-scrollbar-corner {
        background: transparent;
    }
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:58:14.473

您需要做的就是指定`height`您的容器和`overflow`方法：

HTML

```
<div class="container">
    <!-- content here -->
</div> 
```

CSS

```
.container {
    height: 400px;
    overflow-y: scroll;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:58:22.693

查看 CSS 中的“溢出”属性：[https ://developer.mozilla.org/en-US/docs/CSS/overflow](https://developer.mozilla.org/en-US/docs/CSS/overflow)

这将允许您指定外部容器如何处理其内容的大小。

# java - 条件任务调度 - 多线程 Java 应用程序

> ID：14946008
> 
> 赞同：1
> 
> 时间：2013-02-18T21:55:28.647
> 
> 标签：java, multithreading, concurrency

我有一个包含“资源管理器”类的多线程 Java 应用程序。

为此类提供了可以作为初始化参数请求的资源列表。然后，它检查每个文件的本地文件系统，并将确定为本地的文件添加到列表中。

当类收到资源请求时，会发生以下情况之一：

1.  如果确定资源是本地的（在列表中）：提供可以找到它的 URI。

2.  如果资源是远程的（不在列表中）：安排工作人员获取资源。任务完成后worker会通知manager，本地资源列表也会更新。（请求线程不要等待——它在那里或不在那里）。

由于多个线程可以请求资源，因此使用 ReadWriteLock 来协调列表访问。许多线程可以同时读取列表，当需要更新时，将使用 writeLock。

问题在于为任何特定的远程资源安排后台工作人员。**如果多个线程为同一**资源安排工作人员，则需要不必要的开销（即使重复任务由于检查这种情况而没有完全执行）。为了尽可能实现最高效率，我想知道以下实现：

```
private final ReadWriteLock lock = new ReentrantReadWriteLock();

//assume each resource object has a volatile boolean "scheduled"
//with isScheduled() and setSheduled() setter/getter;

//assume the resource list is thread safe

public URI requestResource(Resource theResource){
  URI resourceId = null;
  //many threads can enter here 
  lock.readLock().lock();
  try{
    //if our resource is not in the list
    if(!localResouces.contains(theResource)){
       //double-check idiom...does it work here?
       //if the resource isn't scheduled
       if(!theResource.isScheduled()){
          //only one thread may enter here
          synchronized(this){
            if(!theResource.isScheduled()){
               //schedule task here...
               theResource.setScheduled(true);                                      
            }
          }  
       }
    } else {
       //its local, return the location
       resouceId = theResource.getURI();
    }
  } finally {
    lock.readLock().unlock();
  }
//requesting object will deal with null value;
return resouceId;
} 
```

当工人完成时：

```
public void update(Resource theResource){
  //ensures no threads in the read block
  lock.writeLock().lock();
  try {
      //update the list (would check result IRL, and not add if problem found)
      localResources.add(theResource);
      //set the scheduled field
      theResource.setScheduled(false); 
  } finally {
       lock.writeLock().unlock();
  }
} 
```

同样，我想最大限度地提高效率。我找不到与这种情况相匹配的示例 - 即允许常见操作的高吞吐量，同时允许以最小的阻塞/开销安排任务。

这种方法有什么问题？第一种方法必须同时获得读锁和同步，但是更新方法只需要获得写锁，因为isScheduled的检查被封装在读块中。这是否提供线程安全调度和数据访问？

编辑：

我已经测试了上述方法，我看到了正确的行为。我仍然不确定这是否真的是“线程安全的”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:54:30.973

我可能会这样做：

```
class Resource

    Uri localUri;
    volatile int state; // REMOTE, FETCHING, LOCAL

    Resource()
        if local
            localUri = ...;
            state = LOCAL;
        else
            state = REMOTE

    URI requestResource()

        if(state==LOCAL)  // volatile read
            return localUri;
        if(state==FETCHING)
            return null;

        synchronized(lock)
            if(state==LOCAL)
                return localUri;
            if(state==FETCHING)
                return null;

            // REMOTE, and it's my job to initiate fetching
            state=FETCHING;
            // do actaul fetching outside synchronized block

        schedule fetching...

    void onFetchingDone()

        synchronized(lock)

            if error
                state=REMOTE; // to retry.
                // if we consider error unrecoverable,
                // we need an ERROR state.
            else
                ...
                loalUri = ...;
                state = LOCAL;  // volatile write 
```

# dart - 如何在 Dart 中运行重复出现的函数？

> ID：14946012
> 
> 赞同：89
> 
> 时间：2013-02-18T21:55:44.953
> 
> 标签：dart

我想一遍又一遍地运行一个函数，中间有一个延迟。我怎样才能用 Dart 做到这一点？

* * *

## 回答 #1

> 赞同：185
> 
> 时间：2013-02-18T21:55:44.953

您可以使用`Timer`该类来安排一次性和重复功能。

## 重复

以下是运行重复函数的方法：

```
import 'dart:async';
main() {
  const oneSec = Duration(seconds:1);
  Timer.periodic(oneSec, (Timer t) => print('hi!'));
} 
```

Timer 有两个参数，一个持续时间和一个运行函数。持续时间必须是 的实例`Duration`。回调必须采用单个参数，即计时器本身。

## 取消重复计时器

用于`timer.cancel()`取消重复计时器。这就是为什么将计时器从重复计时器传递给回调运行的原因之一。

* * *

## 延迟后的一击

在延迟后安排一次性功能（执行一次，在将来的某个时间执行）：

```
import 'dart:async';
main() {
  const twentyMillis = Duration(milliseconds:20);
  Timer(twentyMillis, () => print('hi!'));
} 
```

请注意，一次性计时器的回调不带参数。

* * *

## 尽快一击

您还可以要求尽快运行一个函数，至少在未来一个事件循环滴答声。

```
import 'dart:async';
main() {
  Timer.run(() => print('hi!'));
} 
```

* * *

## 在 HTML 中

计时器甚至可以在 HTML 中使用。事实上，`window.setTimeout`被删除了，所以 Timer 是以后运行函数的唯一方法。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2020-01-02T16:50:13.330

5 秒定时器示例

```
bool isStopped = false; //global

sec5Timer() {
  Timer.periodic(Duration(seconds: 5), (timer) {
    if (isStopped) {
      timer.cancel();
    }
    print("Dekhi 5 sec por por kisu hy ni :/");
  });
} 
```

从任何函数调用

```
sec5Timer(); 
```

停止任何功能

```
isStopped = true; 
```

要处理，您可以使用此代码或技术。

```
 @override
  void initState() {
    _timer = new Timer.periodic(widget.refreshRate, 
      (Timer timer) => _updateDisplayTime(inheritedWidget));
    super.initState();
  }

  @override
  void dispose() {
    _timer.cancel();
    super.dispose();
  } 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2018-03-29T13:26:21.173

[https://api.dartlang.org/stable/1.24.3/dart-async/Stream/Stream.periodic.html](https://api.dartlang.org/stable/1.24.3/dart-async/Stream/Stream.periodic.html)

```
import 'dart:async';

StreamSubscription periodicSub;

void main() {
  periodicSub = new Stream.periodic(const Duration(milliseconds: 500), (v) => v)
      .take(10)
      .listen((count) => print('tick $count'));
} 
```

或者如果不需要计数器

```
import 'dart:async';

StreamSubscription periodicSub;

void main() {
  periodicSub = new Stream.periodic(const Duration(milliseconds: 500))
      .take(10)
      .listen((_) => print('tick'));
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-03-03T17:11:20.980

您还可以使用 Future.delayed 和 await 来延迟执行：

```
Future<Null> delay(int milliseconds) {
  return new Future.delayed(new Duration(milliseconds: milliseconds));
}

main() async {
  await delay(500);
  print('Delayed 500 milliseconds');
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-07-04T17:38:23.690

[替代品](https://dartpad.dev/b8354a85370a53984f39acfd5f1a3e19)；

```
import 'dart:async';

Timer interval(Duration duration, func) {
  Timer function() {
    Timer timer = new Timer(duration, function);

    func(timer);

    return timer;
  }

  return new Timer(duration, function);
}

void main() {
  int i = 0;

  interval(new Duration(seconds: 1), (timer) {
    print(i++);

    if (i > 5) timer.cancel();
  });
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-04-04T09:52:01.243

与 Timer.periodic 和 Stream.periodic 相反，发布我最喜欢的处理此类任务的方式。优点：

*   第一个循环立即运行
*   回调可以工作比间隔更长的时间而没有任何重入头痛

```
Completer<bool> periodic(Duration interval, Function(int cycle) callback) {
  final done = Completer<bool>();
      () async {
    var cycle = 0;
    while (!done.isCompleted) {
      try {
        await callback(cycle);
      } catch (e, s) {
        log("$e", stackTrace: s);
      }
      cycle++;
      await done.future
          .timeout(interval)
          .onError((error, stackTrace) => null);
    }
  }();
  return done;
}

main() {
  final task = periodic(Duration(seconds: 10), (cycle) async {
    /// do the periodic tasks here
  });

  /// main code here
  /// and when going to stop the above periodic call
  task.complete(true);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-08T10:47:46.480

与 JavaScript 功能相同的代码（setInterval、setTimeout、clearInterval 和 clearTimeout）：

```
// ------------------------------
// Import:

import 'dart:async';

// ------------------------------
// Definitions:

void clearTimeout(Timer timer) {
  try {
    timer.cancel();
  } catch (e) {}
}

Timer setTimeout(VoidCallback fn, int millis) {
  Timer timer;
  if (millis > 0)
    timer = new Timer(new Duration(milliseconds: millis), fn);
  else
    fn();
  return timer;
}

void clearInterval(Timer timer) {
  try {
    timer.cancel();
  } catch (e) {}
}

Timer setInterval(VoidCallback fn, int millis) {
  Timer timer;
  if (millis > 0)
    timer = new Timer.periodic(new Duration(milliseconds: millis), (timer) {
      fn();
    });
  else
    fn(); // If millis input is too low, only run function once and stop
  return timer;
}

// ---------------------------------
// Example:

int myValue = 0;

Timer counter = setInterval((){ myValue++; }, 50);
setTimeout((){
    clearInterval(counter);
}, 5000); 
```

# c - (p++)->x 为什么不需要括号？(K&R)

> ID：14946014
> 
> 赞同：5
> 
> 时间：2013-02-18T21:55:51.397
> 
> 标签：c

来自K&R的[The C Programming Language](https://rads.stackoverflow.com/amzn/click/com/0876925964)的第 123 页：

> (p++)->x 在访问 x 后递增 p。（最后一组括号是不必要的。为什么？）

为什么没有必要考虑到`->`bind 比 强`++`？

编辑：将给定的表达式与 进行对比`++p->x`，后者被评估为`++(p->x)`会增加`x`，而不是`p`。所以在这种情况下，括号*是*`(++p)->x`必要的，如果我们想增加，我们必须写`p`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T22:03:08.060

唯一可能的解释是：

```
p++(->x) 
```

这并不意味着什么。它甚至无效。以有效方式解释这一点的*唯一*`(p++)->x`可能方法是.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T21:58:47.333

正是因为`->` ~~绑定~~比强`++`。（它没有，谢谢@KerrekSB。）

> 访问 x**后**增加 p 。

所以首先你访问`x`，`p`然后你增加`p`。这完全符合 the`->`和`+`运算符的求值顺序。

**编辑：哇，这些编辑...**

因此，当您编写时会发生什么`++p->x`，它**可以被**解释为`++(p->x)`或解释为`(++p)->x`（实际选择哪个只是语言设计的问题，K&R 认为让它像第一种情况一样评估是个好主意）。问题是这种歧义在 的情况下不存在`p++->x`，因为它只能解释为`(p++)->x`。其他替代品 ,`p(++->x)`和`p(++->)x`实际上`p++(->x)`只是语法错误的“表达式”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T22:06:19.090

最大咀嚼策略表示`p++->x`分为以下预处理标记：

`p`然后`++`然后`->`_`x`

在`p++->x`表达式中有两个运算符，后缀`++`运算符和后缀运算`->`符。这两个运算符都是后缀运算符，它们具有相同的优先级，并且在解析表达式时没有歧义。`p++->x`相当于`(p++)->x`。

对于`++p->x`表达，情况就不同了。

在`++p->x`中， the`++`不是后缀运算符，它是`++`一元运算符。C 赋予后缀运算符高于所有一元运算符的优先级，这就是为什么`++p->x`实际上等同于`++(p->x)`.

**编辑：**由于史蒂夫的评论，我改变了答案的第一部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-18T22:05:30.303

后增量和成员访问运算符都是后缀表达式并且绑定相同。考虑到它们适用于左侧的主表达式或后缀表达式，因此不会有歧义。

在

```
p++->x 
```

postfix-++ 运算符只能应用于它左边的表达式（即 to `p`）。

同样 ->x 只能访问其左侧的表达式，即`p++`. 不需要写那个表达式`(p++)`，但也没有坏处。

您对效果的描述中的“之后”不表示增量和成员访问的时间顺序。它仅表示 的结果`p++`是`p`增量之前的值，并且该值是用于成员访问的值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-18T22:00:58.703

表达式`p++`产生一个值为 的指针`p`。稍后，该`++`部分被执行，但出于解释表达式的目的，它可能不存在。`->x`使编译器将成员的偏移量添加`x`到原始地址`p`并访问该值。

如果将语句更改为：

```
p->x; p++; 
```

它会做同样的事情。

[从这里](http://en.cppreference.com/w/cpp/language/operator_precedence)可以看出，优先顺序实际上是完全相同的——但这并不重要。

# python - 使用 Apache 代理对 Tornado 的请求 - 502 错误

> ID：14946015
> 
> 赞同：4
> 
> 时间：2013-02-18T21:55:55.507
> 
> 标签：python, apache, proxy, reverse-proxy

试图弄清楚为什么我们会收到`502 ProxyError`我们的请求，尤其是在我们的 Python 服务器上提供长时间运行的请求时。

我们的服务器在 CentOS 上，我们使用`httpd`代理 Web 请求，然后将其路由到运行 WSGI REST 应用程序（在端口 8000 上运行）的 Tornado 服务器。

一般来说，不超过一定时间的请求会成功，但是当请求超时时，我们会`502 ProxyError`在它完成后获得几个s，并且我们的服务器变得无响应。在将我们的应用程序部署到我们的开发服务器时，我们也看到了这种行为，这些服务器也`httpd`以相同的方式使用。

我们的`httpd.conf`VirtualHost 的配置是：

```
<VirtualHost *:80>
    ServerName server_ip
    ServerAlias server
    ServerAdmin admin@server

            DocumentRoot /var/www/

            ErrorLog /var/www/log/error_log

            LogLevel debug

            # Reverse proxy
            ProxyRequests off
            ProxyPass /rest/ http://server_ip:8000/

            # Rewrites
            <Directory />
                            Order allow,deny
                            Allow from all

                            RewriteEngine On
                            #RewriteRule /rest/(.*) http://server_ip:8000/$1 [L,QSA]
            </Directory>
</VirtualHost> 
```

我还在服务器日志中看到这样的条目：

`....[error] proxy: HTTP: disabled connection for (server_ip)`

什么可能导致这种情况？我们应该在这里使用其他东西（不同的库或配置）吗？

我不确定我在这里提供的信息是否足够，所以如果还有其他有用的信息，请告诉我，我会尽快发布。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:38:36.357

试试这个

ProxyPass /rest/ http:// server_ip:8000/ **connectiontimeout=5 timeout=30**

将超时更改为最适合您的。

[有关http://httpd.apache.org/docs/current/mod/mod_proxy.html](http://httpd.apache.org/docs/current/mod/mod_proxy.html)的更多信息

# python - 在 python 和 gettext 中切换翻译

> ID：14946017
> 
> 赞同：3
> 
> 时间：2013-02-18T21:56:04.297
> 
> 标签：python, internationalization, gettext

我有以下代码应该显示两行英文文本和两行英文文本之间的一行罗马尼亚语文本，但它只显示英文文本（翻译切换不起作用）：

主要.py：

```
#! /usr/bin/env python2.7

import gettext
gettext.install('messages', '../i18n', unicode=True)

import card

if __name__ == '__main__':
    x = card.Rank()
    print x.j, x.a, x.q, x.k

    ro = gettext.translation('messages', localedir='../i18n', languages=['ro'])
    ro.install()

    print x.j, x.a, x.q, x.k

    en = gettext.translation('messages', localedir='../i18n', languages=['en'])
    en.install()

    print x.j, x.a, x.q, x.k 
```

卡片.py

```
class Suit(object):
    clubs = _('Clubs'),
    diamonds = _('Diamonds'),
    hearts = _('Hearts'),
    spades = _('Spades')

class Rank(object):
    j = _('Jack')
    q = _('Queen')
    k = _('King')
    a = _('Ace')

class Card(object):
    # ... 
```

我的目录结构如下：

```
.
├── i18n
│   ├── en
│   │   └── LC_MESSAGES
│   │       └── messages.mo
│   ├── en.po
│   ├── en_US.po
│   ├── ro
│   │   └── LC_MESSAGES
│   │       └── messages.mo
│   ├── ro.po
│   └── ro.pot
├── Makefile
├── README.md
└── src
    ├── card.py
    ├── card.pyc
    ├── deck.py
    └── main.py 
```

我使用`xgettext`and`msgfmt`来生成`.po`and`.mo`文件。

问题是如果我只加载一种语言，文本就会被翻译（在显示任何输出之前我必须这样做）。

```
#! /usr/bin/env python2.7
import gettext

if __name__ == '__main__':
    ro = gettext.translation('messages', localedir='../i18n', languages=['ro'])
    ro.install()

    import card
    x = card.Rank()
    print x.j, x.a, x.q, x.k 
```

但是，如果我想即时更改语言，则不会翻译上面显示的第一个代码片段的输出。

我做错了什么？我从文档中理解错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:08:42.463

翻译通常适用于最终用户，而不是开发人员。因此，将您的字符串保留为代码中的文字，并且仅在显示它们时进行翻译：

```
class Rank(object):
    j = 'Jack'
    q = 'Queen'
    k = 'King'
    a = 'Ace' 
```

...

```
 x = card.Rank()
    print _(x.j), _(x.a), _(x.q), _(x.k) 
```

请注意，字符串提取工具将无法再找到这些字符串，除非您在代码中的某处使用 _() 调用它们。

如果您不想手动将字符串添加到翻译文件中，您可以在模块中添加如下内容：

```
if False:
    _('Jack')
    _('Queen')
    _('King')
    _('Ace') 
```

或这个：

```
assert(_('Jack'))
assert(_('Queen'))
assert(_('King'))
assert(_('Ace')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:56:32.557

gettext.install() 所做的只是将 _() 函数定义为翻译文本的东西。在您的第一个示例中，您`x = card.Rank()`在 ro.install() 调用之前执行此操作 - 因此唯一一次`j = _('Jack')`调用 _() 会将其翻译为默认英语。随后， _() 被重新定义为罗马尼亚语 - 但它再也不会被调用，因此永远不会被重新翻译。

我希望这会起作用：

```
#! /usr/bin/env python2.7

import gettext
gettext.install('messages', '../i18n', unicode=True)

import card

if __name__ == '__main__':
    x = card.Rank()
    print x.j, x.a, x.q, x.k

    ro = gettext.translation('messages', localedir='../i18n', languages=['ro'])
    ro.install()

    x = card.Rank()
    print x.j, x.a, x.q, x.k

    en = gettext.translation('messages', localedir='../i18n', languages=['en'])
    en.install()

    x = card.Rank()
    print x.j, x.a, x.q, x.k 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T02:56:11.563

```
x = card.Rank() 
print _(x.j), _(x.a), _(x.q), _(x.k) 
```

*完全有效！*

是的，字符串文字必须在您的代码中的某个位置。

字符串文字*不必位于*显示文本的同一模块中。将字符串文字放在同一个模块中并不好看（不是 OOP）。

使用 py v2.7 / gtk v2.24.10 / gettext 0.18.1 测试成功

```
python
import gtk 
gtk.gtk_version
(2, 24, 10)

gettext --version
gettext (GNU gettext-runtime) 0.18.1 
```

**免责声明** 在让 gettext 为您的 python 应用程序工作之前不要尝试这样做。包括能够即时更改语言环境（语言）。这些都是不小的壮举。这将消除 99% 的混乱。然后它要么工作要么不工作。我说它会起作用的！

# c# - 动态创建的页面中的表单为空

> ID：14946018
> 
> 赞同：0
> 
> 时间：2013-02-18T21:56:10.260
> 
> 标签：c#, asp.net, webforms

我在 ASP.NET 中动态创建一个页面，我想在表单中加载一个控件，但每次我尝试将它添加到 Page.Form.Controls 时，表单为空并给出一个 NullReference

```
Page myPage = new Page();
FormAtt ctrl = (FormAtt)myPage.LoadControl("path/to/my/file.ascx");
myPage.Form.Controls.Add(ctrl); 
```

* * *

我正在尝试这样做，因为我必须解析控件 HTML ，同时触发控件内部的事件和逻辑，并将其转换为字符串以使用 HTML 代码填充（设计非常糟糕的）字符串，如果我只是调用`ctrl.RenderControl(HtmlWriter)`控件将不渲染，似乎没有触发事件，我猜我必须有一个页面才能使事件流工作，但我真的不想为此创建一个新的 aspx。

另外，我确定路径是正确的，因为我测试了相同的负载控制，因为它不会引发异常，因为当我将路径更改为不存在的东西时会引发异常。我无法重新设计组装 HTML 的代码，因为它工作量太大而且超出了我正在做的范围，范围不是由我决定的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:24:24.370

看起来 UserControl 文件路径不正确。

你能试试这个

```
string path = HttpContext.Current.Request.ApplicationPath == "/" ? 
   string.Empty : HttpContext.Current.Request.ApplicationPath;

... (FormAtt)myPage.LoadControl(path + "/path/to/my/file.ascx"); 
```

如果它仍然不起作用，您的 file.ascx 与您的 aspx 页面相关的位置在哪里？

**更新：myPage.Form 将始终为空。请实例化 HtmlForm。**

```
Page myPage = new Page();
HtmlForm form = new HtmlForm();
FormAtt ctrl = (FormAtt)myPage.LoadControl("path/to/my/file.ascx");
form.Controls.Add(ctrl);
myPage.Controls.Add(form); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T01:39:47.123

`Page myPage = new Page();`几乎绝对不是你想要的。听起来您想将控件加载到当前页面中，即`Page.Controls.Add(ctrl)`.

Your title and question are both pretty clear about creating a Page though, so maybe you should explain the big picture more.

# windows - 在 Windows 命令提示符中为目录创建克隆名称

> ID：14946020
> 
> 赞同：0
> 
> 时间：2013-02-18T21:56:12.753
> 
> 标签：windows, batch-file, command-prompt

有没有办法在 cmd （命令提示符）中为目录设置别名。例如，我在 cmd 中使用此目录：

```
C:\Users\joe\Documents\Visual Studio 2010\Projects\example> 
```

但我喜欢它显示为`c:\projects>`或`project>`因为我不希望目录在 cmd 屏幕中占据一整行。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:23:08.640

在 Windows Vista 或 7 中，您可以通过创建目录符号链接来完成此操作。

`C:\>mklink /D projects "C:\Users\joe\Documents\Visual Studio 2010\Projects\example"`

`C:\>cd projects`

您可能需要管理员权限。

# zend-framework - 如何在 Zend 表单元素中包含 js 和 css？

> ID：14946021
> 
> 赞同：2
> 
> 时间：2013-02-18T21:56:21.837
> 
> 标签：zend-framework, zend-form

我创建了自己的 zend 表单元素 - App_Form_Element_Wysiwyg

```
<?php

class App_Form_Element_Wysiwyg extends Zend_Form_Element_Xhtml
{
    /**
     * Default form view helper to use for rendering
     * @var string
     */
    public $helper = 'wysiwyg';

} 
```

然后我为所见即所得创建助手 - App_View_Helper_Wysiwyg

```
<?php

class App_View_Helper_Wysiwyg extends Zend_View_Helper_FormTextarea
{
    public function wysiwyg($name, $value = null, $attribs = null)
    {
        // Here I want to include js and css for wysiwyg editor
        ...
        $xhtml = '<textarea name="' . $this->view->escape($name) . '"'
                . ' id="' . $this->view->escape($id) . '"'
                . $disabled
                . $this->_htmlAttribs($attribs) . '>'
                . $this->view->escape($value) . '</textarea>';

        return $xhtml;
    }
} 
```

如何为所见即所得编辑器包含 js 和 css 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T22:04:55.077

帮助程序允许您在`headScript()`标题中添加或操作脚本标签。因此，在您的助手中，您可以执行以下操作：

```
$this->view->headScript()->appendFile('/path/to/file.js'); 
```

然后只需确保您的布局在头部的某处调用助手：

```
<?=$this->headScript()?> 
```

输出 HTML。还有一个`headStyle()`帮助程序以类似的方式工作，可用于您的 CSS。

相关文档：

*   [标题脚本](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html#zend.view.helpers.initial.headscript)
*   [头型](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html#zend.view.helpers.initial.headstyle)

# android - 未经手动授权从自己的帐户获取谷歌驱动器列表/文件

> ID：14946024
> 
> 赞同：0
> 
> 时间：2013-02-18T21:56:49.730
> 
> 标签：android, google-drive-api

我正在为 android 创建一个应用程序，并想向我的用户展示一些图片。图片的数量和名称可能会发生变化，因此我希望能够获得文件列表和文件内容，但无需授权用户/应用程序。我一直在玩这个，没有任何运气。有什么办法可以使文件夹公开或其他什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T02:49:12.503

如果该文件夹不是公开的，则您无法在未经授权的情况下查看或列出它。这就是权限系统的全部目的。

不过，Android 上的授权非常简单，请查看[Android 快速入门](https://developers.google.com/drive/quickstart-android)了解更多详细信息。

# android - 实施共享意图

> ID：14946030
> 
> 赞同：-2
> 
> 时间：2013-02-18T21:57:15.363
> 
> 标签：android, image, share

我已经创建了一个共享意图实现，这对于正常来说工作正常，但是当我单击共享按钮时，什么都没有发生......任何想法

```
public class radyo extends Activity{

public void onCreate(Bundle savedInstanceState){
super.onCreate(savedInstanceState);
    setContentView(R.layout.radyo);
sharingButton.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
    shareIt();

    }
     private void shareIt() 
     Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
   sharingIntent.setType("text/plain");
       }
});
}
   @Override
     protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:01:10.717

你还需要打电话`startActivity()`

```
 private void shareIt() {
     Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
     sharingIntent.putExtra(Intent.EXTRA_TEXT, "text to share");
     sharingIntent.setType("text/plain");
     startActivity(sharingIntent);
    } 
```

请记住，如果您想实际[发送某些](http://developer.android.com/training/sharing/send.html)内容，则需要将额外内容传递给 Intent。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:13:52.380

您可能需要使用选择器来使用户能够选择执行所需操作的应用程序。

```
String messageToShare = "your String";
        Intent share = new Intent(android.content.Intent.ACTION_SEND);
        share.setType("text/plain");

        share.putExtra(android.content.Intent.EXTRA_TEXT, 
                messageToShare);
        startActivity(Intent.createChooser(share,
                "your Title")); 
```

# c# - C# 是强类型语言还是弱类型语言？

> ID：14946043
> 
> 赞同：5
> 
> 时间：2013-02-18T21:58:00.527
> 
> 标签：c#, strong-typing, weakly-typed

有人可以澄清一下 C# 是强类型语言还是弱类型语言？并解释原因。

如果我有一个`concat`可以接受任何对象的函数，那么这是否被认为是弱类型？

```
function concat(Object stuff)
{
   //do something here to stuff
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-18T22:00:28.173

来自[http://ericlippert.com/2012/10/15/is-ca-strongly-typed-or-a-weakly-typed-language/](http://ericlippert.com/2012/10/15/is-c-a-strongly-typed-or-a-weakly-typed-language/)

> **C# 是强类型语言还是弱类型语言？**
> 
> 是的。
> 
> **那是没有帮助的。**
> 
> 我不怀疑。有趣的是，如果您将问题改写为“和”问题，答案将是相同的。
> 
> **什么？你的意思是，C# 是强类型语言还是弱类型语言？**
> 
> 是的，C# 是一种强类型语言和一种弱类型语言。
> 
> **我很困惑。**
> 
> 我也是。也许您应该准确地告诉我“强类型”和“弱类型”是什么意思。
> 
> **嗯。我实际上并不知道这些术语是什么意思，所以也许这就是我应该问的问题。“弱类型”或“强类型”的语言到底意味着什么？**
> 
> “弱类型”的意思是“这种语言使用了一种我觉得讨厌的类型验证系统”，而“强类型”的意思是“这种语言使用了一种我觉得很有吸引力的类型系统”。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-18T22:07:31.853

C# 是强类型的。

ECMA-334 将 C# 定义为“C#（发音为“C Sharp”）是一种简单、现代、面向对象和类型安全的编程语言。

维基百科定义类型安全

> 类型安全是强类型的众多定义之一。但是类型安全和动态类型是相互兼容的。

维基百科将强类型定义为

> 在计算机科学和计算机编程中，当一个类型系统指定一个或多个对涉及不同数据类型值的操作如何混合的限制时，就被称为具有强类型化特征。强类型的反面是弱类型。

也许最好问问 C# 是否是一种类型安全的语言，因为如果编译器会进行类型检查，没有人可以就“强类型”和“弱类型”的真正含义达成一致。

C# 确实有*一些*动态语言，例如可用的构造，但值得注意的是，这些在编译时仍然是类型安全的。

> 从 Visual C# 3.0 开始，在方法范围内声明的变量可以具有隐式类型`var`。隐式类型的局部变量**是强类型**的，就像您自己声明了类型一样，但编译器确定类型。

[http://msdn.microsoft.com/en-us/library/bb383973.aspx](http://msdn.microsoft.com/en-us/library/bb383973.aspx)

关键字基本上以相同的`dynamic`方式工作，只是它在运行时而不是在编译时进行评估，就像`var`.

> Visual C# 2010 引入了一种新类型动态。该类型是静态类型，但动态类型的对象绕过静态类型检查。在大多数情况下，它的功能就像它具有类型对象一样。在编译时，假定类型为动态的元素支持任何操作。

[http://msdn.microsoft.com/en-us/library/dd264736.aspx](http://msdn.microsoft.com/en-us/library/dd264736.aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-18T22:07:42.483

**一般来说**：C#以强类型的方式使用，*这***意味着**：变量被声明为特定的`Type`（字符串、int、用户定义的类型等），以后不能被赋予不同类型的值.

例如：在 C# 中不能有以下内容：

```
int i = 10;
i = "ten"; 
```

正如下面的评论，C#*可以*有不同的使用方式。

使用“强”类型可以让编辑器/编译器提醒您注意错误，并让编辑器给您提供缩小到您可能需要的建议。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-18T21:59:17.673

[这](http://ericlippert.com/2012/10/15/is-c-a-strongly-typed-or-a-weakly-typed-language/)是 C# 编译器的主要开发人员之一（在他写这篇文章的时候）关于这个主题的博客文章。

简而言之，这个问题本身是有缺陷的，不能以目前的形式得到合理的回答。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-18T22:03:47.230

[强类型](http://en.wikipedia.org/wiki/Strong_typing#Meanings_in_computer_literature)和弱类型的定义有很多很多，以至于您需要在使用它时定义术语的含义。我觉得有用的一个定义是*“语言是否强制我为参数之类的东西指定类型？”* 这将诸如 C# 之类的语言与另一侧分隔开来，而将 Javascript 与另一侧分隔开来，我觉得这种区别很有用。

要求某人命名一个类型而不是依赖于诸如“鸭子类型”之类的东西在静态分析中创造了优势，但在指定共享通用功能的类型时却是不利的。出于这个原因，这些语言中的许多语言都发展出精细的类型关系规范系统，通常首先*是基于类的编程*，然后是精细的*模板系统*或*推理系统*，以便程序员可以说诸如“类型 A 是类型 B 的子集”或“类型 C是一种元类型，可以应用于满足条件 D 和 E" 等的任何其他类型。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-18T21:59:52.930

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms173104.aspx)，C# 是一种强类型语言。

# c# - ToArray() 可以抛出异常吗？

> ID：14946044
> 
> 赞同：10
> 
> 时间：2013-02-18T21:58:02.637
> 
> 标签：c#, multithreading, collections, locking

虽然[这个问题](https://stackoverflow.com/questions/3128889/lock-vs-toarray-for-thread-safe-foreach-access-of-list-collection)的答案非常好，但这意味着您应该将对 List.ToArray() 的调用包围在一个锁中以实现并发。 [这篇博文](http://codewordsharp.nojo.se/2012/12/toarray-isnt-threadsafe.html)还暗示它可能会灾难性地失败（但很少）。在枚举列表或其他集合时，我通常使用 ToArray 而不是锁定，以避免“集合已修改，枚举可能无法完成”异常。这个答案和博客文章对这个假设提出了质疑。

List.ToArray() 的文档没有列出任何异常，所以我一直假设它总是会完成（尽管可能有陈旧的数据）并且虽然从数据一致性的角度来看它不是线程安全的，但它是线程从代码执行的角度来看是安全的——换句话说，它不会抛出异常并且调用它不会破坏底层集合的内部数据结构。

如果这个假设不正确，那么虽然它从未引起问题，但它可能是高可用性应用程序中的定时炸弹。确定的答案是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T22:16:19.050

`ToArray`由于一个简单的原因，您将找不到有关方法可能异常的文档。这是一种具有许多“重载”的扩展方法。它们都具有相同的方法签名，但是对于不同的集合类型（例如`List<T>`和`HashSet<T>`.

但是，我们可以对大多数代码做出一个安全的假设，即 .NET 框架 BCL 出于性能原因不执行任何锁定。我还非常具体地检查了`ToList`for的实现`List<T>`。

```
public T[] ToArray()
{
    T[] array = new T[this._size];
    Array.Copy(this._items, 0, array, 0, this._size);
    return array;
} 
```

正如您可能已经想象的那样，这是一个非常简单的代码，最终在`mscorlib`. 对于此特定实现，您还可以[在 MSDN 页面中查看 Array.Copy 方法](http://msdn.microsoft.com/en-us/library/y5s0whfd.aspx)可能出现的异常。它归结为一个异常，如果列表的等级在刚刚分配目标数组后立即发生变化，则会引发异常。

记住这`List<T>`是一个简单的例子，您可以想象在需要更复杂代码才能存储在数组中的结构上出现异常的机会会增加。的实现`Queue<T>`是一个更可能失败的候选者：

```
public T[] ToArray()
{
    T[] array = new T[this._size];
    if (this._size == 0)
    {
        return array;
    }
    if (this._head < this._tail)
    {
        Array.Copy(this._array, this._head, array, 0, this._size);
    }
    else
    {
        Array.Copy(this._array, this._head, array, 0, this._array.Length - this._head);
        Array.Copy(this._array, 0, array, this._array.Length - this._head, this._tail);
    }
    return array;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T22:12:07.513

当文档或原则未明确保证线程安全时，您不能假设它。如果您确实假设它，您就有可能将一类无法调试的错误投入生产，并且可能会花费您大量的生产力/可用性/金钱。你愿意承担这个风险吗？

**你永远不能测试某些东西是线程安全的。**你永远无法确定。您不能确定未来版本的行为方式是否相同。

以正确的方式进行操作并锁定。

顺便说一句，这些评论是针对`List.ToArray`哪个版本更安全的`ToArray`. 我理解为什么人们会错误地认为它可以与写入列表同时使用。当然`IEnumerable.ToArray` **不可能是线程安全**的，因为这是底层序列的属性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T22:26:12.113

ToArray 不是线程安全的，这段代码证明了这一点！

考虑这个相当荒谬的代码：

```
 List<int> l = new List<int>();

        for (int i = 1; i < 100; i++)
        {
            l.Add(i);
            l.Add(i * 2);
            l.Add(i * i);
        }

        Thread th = new Thread(new ThreadStart(() =>
        {
            int t=0;
            while (true)
            {
                //Thread.Sleep(200);

                switch (t)
                {
                    case 0:
                        l.Add(t);
                        t = 1;
                        break;
                    case 1:
                        l.RemoveAt(t);
                        t = 0;
                        break;
                }
            }
        }));

        th.Start();

        try
        {
            while (true)
            {
                Array ai = l.ToArray();

                //foreach (object o in ai)
                //{
                //    String str = o.ToString();
                //}
            }
        }
        catch (System.Exception ex)
        {
            String str = ex.ToString();                 
        }

    } 
```

由于该行，此代码将在很短的时间内失败`l.Add(t)`。因为`ToArray`不是线程安全的，它会将数组分配`l`给当前`l`大小的元素。抛出一个.`l``ai``ToArray``ArgumentException`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T22:08:37.247

首先，您必须明确调用站点必须位于线程安全区域中。代码中的大多数区域都不是线程安全区域，并且会在任何给定时间假定一个执行线程（对于大多数应用程序代码）。对于（非常粗略的估计）99% 的应用程序代码，这个问题没有任何意义。

其次，您必须弄清楚枚举函数到底是什么，因为这会因您正在运行的枚举类型而异——您是在谈论枚举的正常 linq 扩展吗？

第三，您提供的指向 ToArray 代码的链接及其周围的 lock 语句充其量是无稽之谈：没有显示调用站点也锁定同一个集合，它根本不能保证线程安全。

等等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-18T22:18:32.883

您似乎混淆了两件事：

*   List<T> 不支持在枚举时被修改。枚举列表时，枚举器在每次迭代后检查列表是否已被修改。在枚举列表之前调用 List<T>.ToArray 可以解决此问题，因为您正在枚举列表的快照，而不是列表本身。

*   List<T> 不是线程安全的集合。以上所有假设都来自同一个线程。从两个线程访问一个列表总是需要一个锁。List<T>.ToArray 不是线程安全的，在这里没有帮助。

# java - 选择排序和冒泡排序之间的比较次数保持不变

> ID：14946049
> 
> 赞同：0
> 
> 时间：2013-02-18T21:58:42.777
> 
> 标签：java, sorting

我编写了这个程序来比较使用选择和冒泡排序对随机数进行排序所需的操作数。但是，这些数字一直保持不变，我无法弄清楚我的代码哪里出错了。

```
static int num_comps;   

public static void main(String[] args) 
{
    Random rnd = new Random();

    // max size of array
    // number of N inputs
    int array_size = 32768;
    int num_datasets = 12;

    // allocate array once to the max size
    int[] vals = new int[array_size];

    // temp array with allocated array to max size
    int[] tvals = new int[array_size];

    // array to hold operation counts
    int[] op_counts = new int[num_datasets];
    int[] op_counts2 = new int[num_datasets];

    // array to hold the size of each array
    //
    int[] arraySizes = new int[num_datasets];

    int i;
    int j;
    int sz;

    for (i = 0, sz = 16; i < num_datasets; i++, sz *= 2)
        arraySizes[i] = sz;

    for (int iter = 0; iter < num_datasets; iter++)
    {
        int curr_size = arraySizes[iter];

        // load array with random values
        //
        for (i = 0; i < curr_size; i++)
            vals[i] = rnd.nextInt(4999);

        for (i = 0; i < curr_size; i++)
            tvals[i] = vals[i];

        // run the bubble sort algorithm
        //
        num_comps = 0;
        bubbleSort(tvals, curr_size);
        op_counts[iter] = num_comps;
        //System.out.println("Num comps at " + iter + " is " + num_comps);

        // run the selection-sort algorithm
        num_comps = 0;
        selectionSort(tvals, curr_size);
        op_counts2[iter] = num_comps;
        //System.out.println("Num comps at " + iter + " is " + num_comps);
    }

    System.out.println("Operation Counts (N vs. op Count): ");
    for (int k = 0; k < num_datasets; k++)
        System.out.println(arraySizes[k] + "\t\t" + op_counts[k] + "\t\t" + op_counts2[k]);
}

static void bubbleSort(int vals[], int curr_size)
{
    int temp;
    for (int i = 0; i < curr_size - 1; i++)
    {
        for (int j = 0; j < curr_size - i - 1; j++)
        {
            // swap
            num_comps = num_comps + 1;
            if (vals[j+1] < vals[j])
            {
                temp = vals[j];
                vals[j] = vals[j+1];
                vals[j+1] = temp;
            }
        }
    }
}

static void selectionSort(int vals[], int curr_size)
{
    int temp;
    for(int i=0; i<curr_size - 1; i++)
     {
        for(int j=i+1; j<curr_size; j++)
        {
            num_comps = num_comps + 1;
            if(vals[i] > vals[j] )
            {
                temp = vals[j];
                vals[j] = vals[i];
                vals[i] = temp;
            }
        }
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:14:02.053

您的[选择排序](https://en.wikipedia.org/wiki/Selection_sort)算法不会搜索列表中的最小值。然后用外循环的索引交换它。

你应该这样做：

```
static void selectionSort(int vals[], int curr_size)
{
    int temp;
    for(int i=0; i<curr_size - 1; i++)
    {
        int lowest = i;
        for(int j=i+1; j<curr_size; j++)
        {
            num_comps = num_comps + 1;
            if(vals[lowest] > vals[j] )
            {
                lowest = j;
            }
        }

        // swap lowest with current index
        temp = vals[lowest];
        vals[lowest] = vals[i];
        vals[i] = temp;
     }
} 
```

（当然这可以进一步优化）这个算法的优势不是比较的数量，而是交换的数量（我想这是最少的）。

你的[冒泡排序](https://en.wikipedia.org/wiki/Bubble_sort)算法对我来说似乎没问题。

Both have the same two loops, so comparing the counts of the current implementations indeed result in the same values. But, I think you can optimize the bubble sort, to stop earlier (when no swaps were found). Again, the strength of sorting algorithms depends on the used ones, and are not necessarily the least amount of comparisons. So Using the correct algorithm for your specific task, and thereby circumventing the task-specific high cost operations, is important!

# r - R gWidgets 删除参数和传递参数

> ID：14946053
> 
> 赞同：0
> 
> 时间：2013-02-18T21:58:49.117
> 
> 标签：r, gwidgets

我是 R 世界的新手，在使用 gWidgets 时遇到了一些困难，我希望有人可以帮助我。首先，我的 R 版本是 2.15.2。，我使用的是 Windows 7 32 位。

我想创建一个带有输入/输出和选择（是，否）的 GUI，所以如果用户选择（使用渐变）“是”，将显示一组额外的参数，如果“否”，那么它应该消失（这些参数），或灰显。最后，如果用户单击确定按钮，那么它将传递一些参数，这些参数将用于（稍后）调用另一个函数。以下是我的问题：

1.  您是否知道当用户选择“否”时如何删除参数，现在，如果我单击“否”，它会打印我想要的内容，但是当我再次单击“是”时，它会显示另外三个参数。
2.  你知道当用户单击“确定”时我如何传递参数吗，这是为了稍后单击确定时，它将调用（或源）不同的r代码中的另一个函数

非常感谢您的所有帮助

塞萨尔

PS下面是我的代码：

```
require(gWidgets)
options("guiToolkit"="RGtk2")

#options(expressions=500000)
w <- gwindow("")
g <- ggroup(horizontal = FALSE, container = w)

glabel("Input/Output", container = g)
inputFileDir <- gfilebrowse (text = "Select file...", type = "open", quote = FALSE,
             filter = list("Text File" = list(patterns = c("*.txt"))), container = g)
svalue(inputFileDir)

outputFileDir <- gfilebrowse (text = "Input file name...", type = "save", quote = FALSE,
                             filter = list("Text File" = list(patterns = c("*.txt"))), container = g)
svalue(outputFileDir)

glabel("Direction?", container = g)
DirSelec <- c("Yes","No")
rbF <- function(h,...){
  if (svalue(h$obj, index=TRUE) == 1){
    print ( "define handler here" )

    glabel("Meridional (Raster file):", container = g)
    fieldConstrainDir_v <- gedit("", container = g, default = 0)
    svalue(fieldConstrainDir_v)

    glabel("Zonal (Raster file):", container = g)
    fieldConstrainDir_u <- gedit("", container = g, default = 0)
    svalue(fieldConstrainDir_u)

    glabel("Max. Angle:", container = g)
    maxAng <- gedit("", width = 3, initial.msg = "Paste the path to the raster file (no extensions)", default = 0, container = g)
    svalue(maxAng)
  }else {
    #(svalue(h$obj, index=TRUE) == 2)
    print ( "When User click NO, it needs to go or gray out" )
  }
}

rb <- gradio(DirSelec, container = g)
selected = svalue(rb, index=TRUE) <- 2
rbH <- addHandlerClicked(rb, handler = rbF)

bg <- ggroup(container = g)
addSpring(bg)
onOK <- function(h,...){
  print(svalue(inputFileDir))
  #chartr("\\", "/", print(svalue(inputFileDir)))
  print(svalue(outputFileDir))
  print(svalue(fieldConstrainDir_v))
  print(svalue(fieldConstrainDir_u))
  print(svalue(maxAng))

}

gbutton("    OK    ", container = bg, handler = onOK)
gbutton(" Cancel ", container=bg, handler = function(h,...) dispose(w)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:28:41.257

您有多种选择：

*   您可以将额外的参数放入 gexpandgroup 小部件中并在其上调用 visible<- 方法。这将切换显示它们。

*   在 gWidgetsRGtk2 中，您可以在未附加到父容器的（子）容器中创建小部件（构造函数中没有 cont=...），然后添加（父，子）以添加和删除（父，子）去除。这不应该删除 rm 意义上的小部件，只需将它们从屏幕上删除

*   您可以将额外的参数放入容器中并调用 enabled<- 并使用 FALSE 将它们“变灰”。

前两个可能需要一些屏幕尺寸管理。

在所有情况下，子控件在程序期间仍然是可设置和可读的，因此您应该在其中设置默认值或在使用它们时进行一些检查。

至于在 R 中传递参数的一个好方法是将控件小部件放入一个列表中，比如 l。那么这个成语

```
out <- sapply(l, svalue) 
```

将它们捆绑到可以传递给您的函数的列表中。该`do.call`函数使使用列表作为参数变得容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T03:21:31.770

这是代码：

```
require(gWidgets)
w <- gwindow("") 
g <- ggroup(cont = w, horizontal = FALSE) 
g1 <- ggroup(cont = w) 
Vl <- list () 

fr3 <- gframe ("", cont=g, horizontal=FALSE) 
l3 <- glayout ( cont = fr3 , expand=TRUE) 
l3 [1,1] <- NbS <- glabel("Type", cont = l3) 
l3 [1,2] <- (Vl$NbS <- gcombobox (c("Dis","IDis","K"), cont = l3)) 

fr4 <- gframe ("", cont=g, horizontal=FALSE) 
l4 <- glayout (cont=fr4, expand = TRUE) 
l4 [1,1] <- Dm <- glabel("Dist", cont = l4) 
l4 [1,2] <- (Vl$Dm <- gedit("0", cont = l4))

rbC <- function (h,...){ 
  out <- lapply(Vl, svalue) 
  print(out) 
  if (out$NbS == "Dis") {
    print("Dis") 
    print(out$Dm) 
    # Dm <- get(out$Dm, get(svalue(Dm))) 
    # Dm <- get(out$Dm) 
    # dsrc <- source(".../Dis.r") 
    # print (do.call (dsrc, out)) 
    } else if (out$NbSelec == "IDis") {
      print("IDis") 
      }
  } 
ok <- gbutton("OK", cont = g1, handler=rbC) 
```

当我打印时，向我显示变量名称和值，我想要的是能够使用变量（与我的“Dis.r”中的名称相同）并使用 do.call 运行 r 脚本，具体取决于我的选择。

非常感谢 C

# xslt - BaseX：在哪里声明要执行查询的 XML 文档

> ID：14946060
> 
> 赞同：5
> 
> 时间：2013-02-18T21:59:17.300
> 
> 标签：xslt, xquery, basex

使用 BaseX 程序，我能够使用 XPath 和 XQuery 来查询位于我的主目录中的 XML 文档，但是在 XSLT 中执行相同操作时遇到了问题。

我要查询的文档是[BookstoreQ.xml](https://raw.github.com/elexhobby/dbclass/master/BookstoreQ.xml)。

XPath 版本，运行良好：

```
doc("/home/ioannis/Desktop/BookstoreQ.xml")/Bookstore/Book/Title 
```

我要执行的 XSLT 代码：

```
<xsl:stylesheet version = "2.0" xmlns:xsl = "http://www.w3.org/1999/XSL/Transform">
  <xsl:output method= "xml" indent = "yes" omit-xml-declaration = "yes" />
  <xsl:template match = "Book"></xsl:template>
</xsl:stylesheet> 
```

我在 XSLT 上阅读了[BaseX 的文档](http://docs.basex.org/wiki/XSLT_Module)，但没有找到解决方案。如何运行给定的 XSLT？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:05:44.687

BaseX 没有对 XSLT 的直接支持，您必须使用 XQuery 函数调用它（虽然这很容易）。执行此操作有两个函数，一个用于返回 XML 节点 ( [`xslt:transform(...)`](http://docs.basex.org/wiki/XSLT_Module#xslt%3atransform))，一个用于将文本作为字符串返回 ( [`xslt:transform-text(...)`](http://docs.basex.org/wiki/XSLT_Module#xslt%3atransform-text))。你需要第二个。

```
xslt:transform-text(doc("/home/ioannis/Desktop/BookstoreQ.xml"),
  <xsl:stylesheet version = "2.0" xmlns:xsl = "http://www.w3.org/1999/XSL/Transform">
    <xsl:output method= "xml" indent = "yes" omit-xml-declaration = "yes" />
    <xsl:template match = "Book"></xsl:template>
  </xsl:stylesheet>
) 
```

两者都可以通过将 XSLT 作为节点（在此处使用）来调用，通过将其作为字符串传递或提供包含 XSLT 代码的文件的路径。

# java - 基于布尔bean属性设置struts2复选框

> ID：14946063
> 
> 赞同：0
> 
> 时间：2013-02-18T21:59:26.733
> 
> 标签：java, checkbox, struts2, javabeans

我有一个 struts2 复选框，如下所示：

```
 <s:checkbox id="frequencyBased" name="tramBean.frequencyBased" value="false" onclick="changeFrequency()"/> 
```

我有一个具有以下方法的bean：

```
public void setFrequencyBased(boolean isFrequencyBased) {
     this.isFrequencyBased = isFrequencyBased;
}

public boolean isFrequencyBased() {
     return isFrequencyBased;
} 
```

当我选中该框并提交表单时，布尔值已正确设置（选中 -> true，未选中 -> false）。

但是，当我返回页面时，设置了属性，复选框不会更新以反映设置。我在 isFrequencyBased() 中有一个断点，我可以判断它没有被调用。我究竟做错了什么; 如何让复选框读取 bean 中的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T00:18:51.287

尝试

```
<s:checkbox id="frequencyBased" name="tramBean.frequencyBased" value="tramBean.frequencyBased" fieldValue="true" onclick="changeFrequency()"/> 
```

# php - 在一个输入文本中传递一个数组

> ID：14946064
> 
> 赞同：1
> 
> 时间：2013-02-18T21:59:30.137
> 
> 标签：php, ajax

我的表单中有这部分代码。这是一个动态输入文本。

jQuery：

```
newdiv.innerHTML = '<label for=\'keywords\' style=\'display: inline; margin-left: 40px;\'><input type=\'text\' name=\'keywords[]\'></label> <a href=\'#\' onclick=\'removeElement("'+ divIdName +'")\'>&nbsp;&nbsp;&nbsp; Remove</a>'; 
```

现在，我需要使用这段代码通过 ajax 传递它。
阿贾克斯：

```
var name = $("#name").val();
var username = $("#user_name").val();
var dataString = 'name='+ name + '&username=' + username;
$.ajax({
   type: "POST",
   url: "join.php",
   data: dataString,
   success: function(){
     alert('hello world');
}}); 
```

但是，我不知道如何`keywords[]`使用 dataString 变量传递。有人可以知道如何将它传递给 join.php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:11:50.447

假设所有表单字段都是表单的一部分，您可以使用：

```
$.ajax({
  type: "POST",
  url: "join.php",
  data: $("form").serialize(),
  success: function(){
  alert('hello world');
}}); 
```

但是，这将发送所有表单值，而不仅仅是`name`,`username`和`keywords`字段

# excel - 我想知道 Sheet1 和设置工作表的区别

> ID：14946065
> 
> 赞同：0
> 
> 时间：2013-02-18T21:59:43.900
> 
> 标签：excel, vba

我在 module1 中有一段脚本，用于检查是否单击了选项按钮。

选项按钮放在Sheet1中，名称为“Info”，所以我认为下面的脚本可以工作

```
Sub checkClicked()
    dim Page as worksheet
    set Page as worksheets(“Info”)
    Debug.print Page.optClicked 
End sub 
```

但是当我这样做时，它说找不到方法或数据成员。仅当我将其替换为

```
… 
Debug.print Sheet1.optClicked
… 
```

谁能告诉我为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T00:28:58.950

将 Sheet1 视为“工作表”的“子类” - 当您向工作表添加控件时，您正在添加新成员。通用工作表对象没有代表您的选项按钮的成员，而 Sheet1 有。

```
Sub Test()

    Dim sht As Worksheet
    Dim sht1 As Sheet1

    Set sht = ThisWorkbook.Sheets("Sheet1")
    Set sht1 = Sheet1

    Debug.Print sht.optClicked  'error
    Debug.Print sht1.optClicked 'OK

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:07:51.730

```
Set Page = ActiveWorkbook.Worksheets("Info") should work. I think worksheets is no real property in VBA... 
```

此外，您的调试打印代码看起来很奇怪，请使用 debug.print("bla").. 您是否激活了 Option explicit ？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T22:08:10.127

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T08:26:43.057

其他方法：工作表上的 ActiveX 控件可以从两个集合中访问：**Shapes**和**OLEObjects**。您可以使用**OLEObjects 集合**来访问您的复选框。

```
Sub checkClicked()
    Dim Page As Worksheet
    Set Page = Worksheets("Info")

    ' 1/ ActiveX check box in Shapes collection
    Dim myShape As Shape
    Set myShape = Page.Shapes("optClicked")
    ' --------------------------------------

    ' 2/ ActiveX check box in OLEObjects collection
    Dim myOLEObject As OLEObject
    Set myOLEObject = Page.OLEObjects("optClicked")

    ' Use Object property to get access to your check box
    Dim myCheckBox As Variant
    Set myCheckBox = myOLEObject.Object

    If (TypeOf myCheckBox Is MSForms.CheckBox) Then
      Debug.Print myCheckBox.value
    End If
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T22:04:14.640

Worksheets 中的参数是您感兴趣的工作表的名称，即“Sheet1”。

# android - 在android中重用api访问密钥时Google Maps Android API授权失败

> ID：14946067
> 
> 赞同：2
> 
> 时间：2013-02-18T21:59:46.957
> 
> 标签：android, google-maps-api-2

我创建了一个应用程序并生成了一个 api 密钥，该密钥有效并且我的应用程序正确呈现了地图。

我创建了第二个应用程序，它基于我创建的 Android 库项目，我想重用第一个应用程序的 API_KEY。在[https://code.google.com/apis/console](https://code.google.com/apis/console)中，对于我的 API 调试项目，我选择了“编辑允许的 Android 应用程序...”。

然后在新的一行中，我添加了我的第二个项目的 SHA1 证书指纹和包名称（用分号分隔）。因此，现在 API 访问密钥具有与之关联的两个应用程序的指纹。

但是，当我在我的 android 手机上测试第二个应用程序时，logcat 输出

> Google Maps Android API 授权失败。

我的第二个应用程序的证书指纹是正确的。我的第二个应用程序也引用了 Google Play Services，并且使用的是 Google API Level 16。

第二个应用清单文件的设置与第一个类似，参考调试 API_KEY 并具有相同的 android 权限。我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:42:48.180

> 但是，推荐的做法是使用不同的证书对每个应用程序进行签名，并为每个应用程序获取不同的密钥。

[https://developers.google.com/maps/documentation/android/start#getting_the_google_maps_android_api_v2](https://developers.google.com/maps/documentation/android/start#getting_the_google_maps_android_api_v2)

:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:52:12.370

我以前发现这很有帮助[https://stackoverflow.com/a/13865113/935779](https://stackoverflow.com/a/13865113/935779)

> 确保使用您用于创建 API 密钥的相同密钥导出签名副本

在使用 Google Maps 密钥时，这通常是一个问题，很可能是您的问题。但是，文档中的*Nathvi*也是正确的，如果可能的话，您可以考虑使用单独的密钥。

# browser - 使用官方 flash 插件呈现 swf 文件

> ID：14946080
> 
> 赞同：0
> 
> 时间：2013-02-18T22:00:29.523
> 
> 标签：browser, adobe, flash, browser-plugin

我想在 Windows 上的可执行程序中显示一个 flash 文件 (.swf)。

每一个现代浏览器都可以通过使用 Adob​​e 的官方 flash 插件 DLL 来实现。但是在任何地方都没有关于你如何做的文档！

多年来，我一直在互联网上搜索高低，以寻找关于如何在您的程序中使用官方 FLASH PLAYER 插件的答案？

编程语言无所谓，我可以适应。我只想要有关如何操作的说明。链接到网络上的隐藏资源或您自己的专业知识。假设我制作了一个使用 OpenGL 的程序，我想将 swf 文件的二进制文件发送到 flash 插件，取回数据，然后使用 OpenGL 渲染它。但是怎么做？浏览器是如何做到的？**怎么怎么怎么？？？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:00:24.600

试试这个...如果您使用的是 .NET... 使用 ActiveX dll 并创建一个 activeX 对象，然后在该容器中加载 swf 文件。

干杯。

# python - 使用 pass by referencce 将新字符附加到字符串

> ID：14946086
> 
> 赞同：-1
> 
> 时间：2013-02-18T22:01:00.483
> 
> 标签：python, arrays, string, pass-by-reference

我试图通过将值传递给另一个函数但不附加来将一个字符串添加到另一个字符串。

```
def test2(s1,s2):
   s1 = s1+s2
   s1 = 'z'+s1
   return len(s1)

def test(s1,s2):
   i = test2(s1,s2)
   print(i)
   print(s1)

String1 = raw_input()
String2 = raw_input()

test(String1, String2) 
```

输入 -`a,b` 预期输出 -`3, zab`

但我得到 -`3,a`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:03:16.170

Python 中没有“通过引用传递”之类的东西，字符串对象是不可变的，因此您无法修改传递给函数的字符串。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-18T22:06:53.687

如果您真的想处理通过引用传递的对象，您可以使用列表。然后对您的程序进行小幅修改

```
def test2(s1,s2):
   s1.extend(s2)
   s1.insert(0,'z')
   return len(s1)

def test(s1,s2):
   i = test2(s1,s2)
   print(i)
   print(s1)

String1 = list(raw_input())
String2 = list(raw_input())

test(String1, String2) 
```

# jquery - 无法在 HTML 中加载模板

> ID：14946087
> 
> 赞同：0
> 
> 时间：2013-02-18T22:01:02.810
> 
> 标签：jquery, html, jquery-templates

我正在尝试在 html 中加载我的模板。但这给我在 div 元素中加载模板内容带来了一些麻烦。它给了我**Uncaught TypeError: Object has no method 'appendTo'**

temp.html 是 div 所在的文件。

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />

        <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
        Remove this if you use the .htaccess -->
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

        <title>HTML</title>
        <meta name="description" content="" />
        <meta name="author" content="" />

        <meta name="viewport" content="width=device-width; initial-scale=1.0" />

        <!-- Replace favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
        <link rel="shortcut icon" href="/favicon.ico" />
        <link rel="apple-touch-icon" href="/apple-touch-icon.png" />

        <script type="text/javascript" src="scripts/jquery-1.4.2.min.js"></script>
        <script src="scripts/jquery.tmpl.min.js"></script>

        <script>
            $.get('template.html', function(templates) {
                var template1 = $(templates).filter("tmplFeatures").html();
                $("#tmplFeatures").tmpl(template1).appendTo("carouseldata");
            });
        </script>

    </head>

    <body>

        <div id="carouseldata" style="background-color:#FF0000; width: 100%;height: 100%;z-index: 50">

        </div>

    </body>
</html> 
```

包含模板的 template.html 文件

```
<script id ="tmplFeatures" type="text/x-jquery-tmpl">
   <div id="mydata" style="overflow-x:hidden;width: 100%;height: 100%">
                        <ul id="mycarousel" class="jcarousel-skin-tango">
                            <li><img src="images/image1.jpg" width="400" height="300" alt="" />
                                <div style="color:#FFFFFF;margin-top: -85px;z-index: 60;background-color: #000000;opacity: 0.5;filter: alpha(opacity=50);width: 400;height:80px">
                                    <img src="images/images.jpg" width="200" height="70" align="middle"/>
                                    <img src="images/divider.png" width="2" height="40" align="middle"/>
                                    <img src="images/cbs.png" width="100" height="70" align="middle"/>
                                    <img src="images/lock.png" align="middle" />
                                </div>
                            </li>
                            <li><img src="images/image2.jpg" width="400" height="300" alt="" />
                                <div style="color:#FFFFFF;margin-top: -85px;z-index: 60;background-color: #000000;opacity: 0.5;filter: alpha(opacity=50);width: 400;height:80px">
                                    <img src="images/images.jpg" width="200" height="70" align="middle"/>
                                    <img src="images/divider.png" width="2" height="40" align="middle"/>
                                    <img src="images/thumb-comcast.gif" width="100" height="70" align="middle"/>
                                </div>
                            </li>
                            <li><img id="image3" src="images/image3.jpg" width="400" height="300" alt="" />
                                <div style="color:#FFFFFF;margin-top: -85px;z-index: 60;background-color: #000000;opacity: 0.5;filter: alpha(opacity=50);width: 400;height:80px">
                                    <img src="images/images.jpg" width="200" height="70" align="middle"/>
                                    <img src="images/divider.png" width="2" height="40" align="middle"/>
                                    <img src="images/cbs.png" width="100" height="70" align="middle"/>
                                </div>
                            </li>
                            <li><img src="images/image4.jpg" width="400" height="300" alt="" />
                                <div style="color:#FFFFFF;margin-top: -85px;z-index: 60;background-color: #000000;opacity: 0.5;filter: alpha(opacity=50);width: 400;height:80px">
                                    <img src="images/images.jpg" width="200" height="70" align="middle"/>
                                    <img src="images/divider.png" width="2" height="40" align="middle"/>
                                    <img src="images/cbs.png" width="100" height="70" align="middle"/>
                                </div>
                            </li>

                            <li><img src="images/image5.jpg" width="400" height="300" alt="" />
                                <div style="color:#FFFFFF;margin-top: -85px;z-index: 60;background-color: #000000;opacity: 0.5;filter: alpha(opacity=50);width: 400;height:80px">
                                    <img src="images/images.jpg" width="200" height="70" align="middle"/>
                                    <img src="images/divider.png" width="2" height="40" align="middle"/>
                                    <img src="images/cbs.png" width="100" height="70" align="middle"/>
                                </div>
                            </li>

                            <li><img src="images/image6.jpg" width="400" height="300" alt="" />
                                <div style="color:#FFFFFF;margin-top: -85px;z-index: 60;background-color: #000000;opacity: 0.5;filter: alpha(opacity=50);width: 400;height:80px">
                                    <img src="images/images.jpg" width="200" height="70" align="middle"/>
                                    <img src="images/divider.png" width="2" height="40" align="middle"/>
                                    <img src="images/cbs.png" width="100" height="70" align="middle"/>
                                </div>
                            </li>

                            <li><img src="images/image7.jpg" width="400" height="300" alt="" />
                                <div style="color:#FFFFFF;margin-top: -85px;z-index: 60;background-color: #000000;opacity: 0.5;filter: alpha(opacity=50);width: 400;height:80px">
                                    <img src="images/images.jpg" width="200" height="70" align="middle"/>
                                    <img src="images/divider.png" width="2" height="40" align="middle"/>
                                    <img src="images/cbs.png" width="100" height="70" align="middle"/>
                                </div>
                            </li>

                            <li><img src="images/image8.jpg" width="400" height="300" alt="" />
                                <div style="color:#FFFFFF;margin-top: -85px;z-index: 60;background-color: #000000;opacity: 0.5;filter: alpha(opacity=50);width: 400;height:80px">
                                    <img src="images/images.jpg" width="200" height="70" align="middle"/>
                                    <img src="images/divider.png" width="2" height="40" align="middle"/>
                                    <img src="images/cbs.png" width="100" height="70" align="middle"/>
                                </div>
                            </li>

                            <li><img src="images/image9.jpg" width="400" height="300" alt="" />
                                <div style="color:#FFFFFF;margin-top: -85px;z-index: 60;background-color: #000000;opacity: 0.5;filter: alpha(opacity=50);width: 400;height:80px">
                                    <img src="images/images.jpg" width="200" height="70" align="middle"/>
                                    <img src="images/divider.png" width="2" height="40" align="middle"/>
                                    <img src="images/cbs.png" width="100" height="70" align="middle"/>
                                </div>
                            </li>

                            <li><img src="images/image10.jpg" width="400" height="300" alt="" />
                                <div style="color:#FFFFFF;margin-top: -85px;z-index: 60;background-color: #000000;opacity: 0.5;filter: alpha(opacity=50);width: 400;height:80px">
                                    <img src="images/images.jpg" width="200" height="70" align="middle"/>
                                    <img src="images/divider.png" width="2" height="40" align="middle"/>
                                    <img src="images/cbs.png" width="100" height="70" align="middle"/>
                                </div>
                            </li>
                        </ul>
                    </div>
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:07:46.400

我想你在这里可能有几个问题......

首先，我认为您的模板调用在语法上是不正确的：

```
$("#tmplFeatures").tmpl(template1).appendTo("carouseldata"); 
```

应该（根据文档）看起来像这样：

```
$.tmpl( "tmplFeatures", template1).appendTo("carouseldata"); 
```

但我不确定您是否可以将 HTML (template1) 作为该`.tmpl()`方法的“数据”参数传递：

[https://github.com/jquery/jquery-tmpl](https://github.com/jquery/jquery-tmpl)

**更新**

更仔细地查看上面的代码，您似乎没有将任何数据传递给`.tmpl()`调用。尚不清楚以下行返回什么，但这应该是您的模板将用于显示的可迭代数据。

```
var template1 = $(templates).filter("tmplFeatures").html(); 
```

这看起来（可能）是模板的另一种表示形式。

# html - HTML5 日期选择器是否有任何样式选项？

> ID：14946091
> 
> 赞同：144
> 
> 时间：2013-02-18T22:01:21.210
> 
> 标签：html, input, datepicker

我对 HTML5 日期选择器感到非常兴奋。

需要注意的是，我没有看到或预见太多将颜色应用于选择器本身的方式，这将在大多数网站上使用 datepicker 类型的交易破坏者。`<select>`由于人们无法使其漂亮，因此受到广泛的 JavaScript 替换黑客攻击的困扰。

那么是否有任何已知的 HTML 输入样式选项`type='date'`？

* * *

## 回答 #1

> 赞同：272
> 
> 时间：2013-04-19T14:17:32.460

WebKit 提供了以下八个伪元素，用于自定义日期输入的文本框：

```
::-webkit-datetime-edit
::-webkit-datetime-edit-fields-wrapper
::-webkit-datetime-edit-text
::-webkit-datetime-edit-month-field
::-webkit-datetime-edit-day-field
::-webkit-datetime-edit-year-field
::-webkit-inner-spin-button
::-webkit-calendar-picker-indicator 
```

因此，如果您认为日期输入可以使用更多间距和荒谬的配色方案，您可以添加以下内容：

```
::-webkit-datetime-edit { padding: 1em; }
::-webkit-datetime-edit-fields-wrapper { background: silver; }
::-webkit-datetime-edit-text { color: red; padding: 0 0.3em; }
::-webkit-datetime-edit-month-field { color: blue; }
::-webkit-datetime-edit-day-field { color: green; }
::-webkit-datetime-edit-year-field { color: purple; }
::-webkit-inner-spin-button { display: none; }
::-webkit-calendar-picker-indicator { background: orange; }
```

```
<input type="date">
```

![截屏](../Images/7c278e3f2f2d7996d6b7984839e249d8.png)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-02-18T23:11:45.410

目前，没有跨浏览器、无脚本的方式来设置原生日期选择器的样式。

至于 WHATWG/W3C 内部发生了什么……如果这个功能真的出现了，它很可能是在[CSS-UI](http://www.w3.org/TR/css3-ui/)标准或一些与[Shadow DOM](http://www.html5rocks.com/en/tutorials/webcomponents/shadowdom/)相关的标准之下。[CSS4-UI wiki 页面](http://wiki.csswg.org/spec/css4-ui)列出了一些从 CSS3-UI 中删除的与外观相关的内容，但老实说，似乎对 CSS-UI 模块没有太多兴趣。

我认为现在跨浏览器开发的最佳选择是使用基于 JavaScript 的界面实现漂亮的控件，然后禁用 HTML5 原生 UI 并替换它。我认为在未来，也许会有更好的原生控件样式，但也许更有可能将原生控件替换为您自己的 Shadow DOM“小部件”。

令人讨厌的是，这不可用，并且请求标准支持总是值得的。虽然看起来 jQuery UI 的领导[者已经尝试过但没有成功](http://bugs.jqueryui.com/ticket/8567)。

虽然这一切都非常令人沮丧，但也值得考虑 HTML5 日期选择器的优势，以及为什么自定义样式很困难，也许应该避免。在某些平台上，日期选择器[看起来非常不同](http://www.deque.com/wbcntnt928/wp-content/dquploads/iphone-input-type-date.png)，我个人想不出任何通用的方式来设置原生日期选择器的样式。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-01-24T12:11:30.967

在[Zurb 基金会的 GitHub 上找到了这个](https://github.com/zurb/foundation/issues/1877#issuecomment-15088274 "Zurb 基金会的 GitHub")

> 如果您想做更多自定义样式。这是用于 webkit 渲染日期组件的所有默认 CSS。
> 
> ```
> input[type="date"] {
>      -webkit-align-items: center;
>      display: -webkit-inline-flex;
>      font-family: monospace;
>      overflow: hidden;
>      padding: 0;
>      -webkit-padding-start: 1px;
> }
> 
> input::-webkit-datetime-edit {
>     -webkit-flex: 1;
>     -webkit-user-modify: read-only !important;
>     display: inline-block;
>     min-width: 0;
>     overflow: hidden;
> }
> 
> input::-webkit-datetime-edit-fields-wrapper {
>     -webkit-user-modify: read-only !important;
>     display: inline-block;
>     padding: 1px 0;
>     white-space: pre;
> } 
> ```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2020-06-04T02:29:14.657

仅供参考，我需要更新日历图标的颜色，这似乎无法使用`color`,`fill`等 属性。

我最终确实发现某些`filter`属性会调整图标，所以虽然我最终没有弄清楚如何使它成为任何颜色，幸运的是我需要做的只是让图标在深色背景上可见，所以我能够请执行下列操作：

```
body { background: black; }

input[type="date"] { 
  background: transparent;
  color: white;
}

input[type="date"]::-webkit-calendar-picker-indicator {
  filter: invert(100%);
}
```

```
<body>
 <input type="date" />
</body>
```

希望这对某些人有所帮助，因为大多数情况下 chrome 甚至直接说这是不可能的。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-10-12T06:54:26.320

我结合了上述解决方案和一些试验和错误来得出这个解决方案。

我正在使用 styled-components 呈现透明的日期选择器输入，如下图所示：

[![日期选择器输入的图像](../Images/a992f13986859a2c09cb52634ff391ff.png)](https://i.stack.imgur.com/JbkD0.png)

```
const StyledInput = styled.input`
  appearance: none;
  box-sizing: border-box;
  border: 1px solid black;
  background: transparent;
  font-size: 1.5rem;
  padding: 8px;
  ::-webkit-datetime-edit-text { padding: 0 2rem; }
  ::-webkit-datetime-edit-month-field { text-transform: uppercase; }
  ::-webkit-datetime-edit-day-field { text-transform: uppercase; }
  ::-webkit-datetime-edit-year-field { text-transform: uppercase; }
  ::-webkit-inner-spin-button { display: none; }
  ::-webkit-calendar-picker-indicator { background: transparent;}
` 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-09-05T09:54:52.697

您可以使用以下 CSS 设置输入元素的样式。

```
input[type="date"] {
  background-color: red;
  outline: none;
}

input[type="date"]::-webkit-clear-button {
  font-size: 18px;
  height: 30px;
  position: relative;
}

input[type="date"]::-webkit-inner-spin-button {
  height: 28px;
}

input[type="date"]::-webkit-calendar-picker-indicator {
  font-size: 15px;
}
```

```
<input type="date" value="From" name="from" placeholder="From" required="" />
```

# c - 如何从字符串中提取负数

> ID：14946093
> 
> 赞同：2
> 
> 时间：2013-02-18T22:01:22.227
> 
> 标签：c

我需要帮助从字符中提取数字。可以说我有：

```
char str = "   ( 1   22  -4)"; 
```

我需要提取每个整数并调用另一个方法。

```
while (*p) {
     if (isdigit(*p)) {
         int val = strtol(p, &p, 10);
         on_int(val);
     } else {
         p++;
     }
 } 
```

我已经成功提取了整数，但我不知道如何提取负数。

使用此代码，我提取了 1、22 和 4。如何在 4 前面获得负数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:03:38.947

您应该更改条件以适应减号，如下所示：

```
if ((p[0] == '-' && isdigit(p[1]))|| isdigit(p[0])) ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:13:23.880

```
 while (*p) {
       if (isdigit(*p) || ( (*p == '-' || *p == '+')  && isdigit(*(p+1)) )) {
           int val = strtol(p, &p, 10);
           on_int(val);
       } else {
           p++;
       }
   } 
```

# javascript - 从 osm overpass API 读取和分析 JSON - 获取折线

> ID：14946096
> 
> 赞同：4
> 
> 时间：2013-02-18T22:01:24.330
> 
> 标签：javascript, jquery, json, openstreetmap

使用 Overpass API，我从 OSM 获取此（折线）数据作为 JSON 文件：

```
{
  "version": 0.6,
  "generator": "Overpass API",
  "elements": [
{
  "type": "node",
  "id": 308240514,
  "lat": 52.7074546,
  "lon": 7.1369361
},
{
  "type": "node",
  "id": 308729130,
  "lat": 52.6934662,
  "lon": 7.1353250
},
......
.......
.......
{
  "type": "way",
  "id": 99421713,
  "nodes": [
    1149813380,
    2103522316,
    2103522207,
    2103522202,
    2103522201,
    .....
    ....
    ],
      "tags": {
    "admin_level": "2",
    ......
  }
},
{
  "type": "way",
  "id": 99421718,
  "nodes": [
    647317213,
    2103495916,
    2103495906,
    2103495902,
    2103495901,
    ....
    ....
    ....
    ] 
```

为了在 Google Maps API 等地图应用程序中打印折线（方式），我需要通过节点数组中的数字获取分配给方式（类型：方式）的坐标（JSON 中的纬度，经度） - 这些数字是 id的坐标。结果我需要这样的东西：

```
"coords":{
"way1" : [(37.772323, -122.214897), (21.291982, -157.821856),(-18.142599, 178.431),(-27.46758, 153.027892)],
"way2" : [(37.772323, -122.214897),...........] 
```

我使用 jquery 来获取 JSON 文件，然后遍历数据，所以我可以获得坐标，但没有分配给方式，也没有像节点数组那样以正确的顺序。

```
$.getJSON(url, function(data) {
   $.each(data.elements, function(i,data){
      var coords = (data.lat,data.lon);
      ......... 
```

任何人都知道如何解决我的问题？是 jquery 解决方案还是使用本机 javascript 更好？

... 2 天后：

经过几个小时的测试和尝试，至少我找到了解决问题的方法。这是javascript代码：

```
$.getJSON('test.js', function(data) {

var ways = [];
var way_nodes = [];
var inhalt = [];

for (var x in data.elements) {
    if (data.elements[x].type == "way") {
        var way_tmp = data.elements[x].nodes;
        ways.push(way_tmp);
    }
    if (data.elements[x].type == "node") {
        inhalt = data.elements;
    }
}

for (var h in ways) {
    var mypath = [];
    way_nodes = ways[h];
    for (var k in way_nodes) {
        for (var x in inhalt) {
            if (way_nodes[k] == inhalt[x].id) {
                var coords = new google.maps.LatLng(inhalt[x].lat,inhalt[x].lon);  
                mypath.push(coords);
            }
        }
    }

    var polyline = new google.maps.Polyline({
        path: mypath,
        strokeColor: "#FF0000",
        strokeOpacity: 0.6,
        strokeWeight: 5
    });

    var poly_points = polyline.getPath();
    for (var i = 0; i < poly_points.length; i++) {
        bounds.extend(poly_points.getAt(i));
    }   
    polyline.setMap(map);
}
    map.fitBounds(bounds);
}); 
```

这是一个使用 Google Maps API 显示的工作示例的链接： [http](http://www.ralf-wessels.de/test/apiv3/json/04map_osm_viele_polylines_structured.html#) ://www.ralf-wessels.de/test/apiv3/json/04map_osm_viele_polylines_structured.html# 我不知道这是否是最聪明的方法解决问题，特别是如果我使用大数据。如果有人知道更好的方法，我对此很感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-17T13:17:25.930

对于您的数据操作需求，我建议您研究像*Lodash*这样的功能库。或者更好的是，*拉姆达*。Lodash 更流行，Ramda 更方便，强调柯里化和函数组合。两者都具有将事物分解为易于管理的小部分的好处。

有一点学习曲线，但是在学习了这样一个工具之后，您会发现使用 for 循环进行数据操作是多么痛苦。

例如，使用 Ramda，可以像这样实现相同的功能：

```
var parseWaysFromResponse = (function () {
    // function [{id:1, key1:val1 ...}, {id:2, key2:val2}]
    //    -> {1:{key1:val1 ...}, 2:{key2:val2 ...}}
    var generateIdToNodeMap = R.compose(
        R.mapObj(R.head),
        R.groupBy(R.prop('id'))
    );

    // Filter array of objects based on key "type"
    var elementTypeIs = function(typeVal) {
      return R.propEq('type', typeVal);
    }

    // Create {id:{values}} from the apiResponse elements
    var getNodes = R.compose(
      generateIdToNodeMap,
      R.filter(elementTypeIs('node'))
    );

    // Api elements -> [[way1 node-id1, id2, ...], [way 2 node-id1, ...]]
    var getWayNodes = R.compose(
      R.pluck('nodes'),
      R.filter(elementTypeIs('way'))
    );

    // Map generated by getNodes, node id -> [lat, lon] of given node id
    var linkNodeIdToCoords = R.curry(function (nodes, id) {
        return R.props(['lat', 'lon'], nodes[id])
    });

    return function (apiResponse) {
        var nodes = getNodes(apiResponse.elements);
        var getAllWays = R.compose(
            R.map(R.map(linkNodeIdToCoords(nodes))),
            getWayNodes
        );
        return getAllWays(apiResponse.elements)
    }
})(); 
```

# base64 - 如何使用嵌入式 API 在 svg-edit 中导入图像/光栅

> ID：14946097
> 
> 赞同：1
> 
> 时间：2013-02-18T22:01:29.633
> 
> 标签：base64, svg-edit

我使用核心api确定方法“svgCanvas.importImage(url)可以导入base64编码的图像。

但是嵌入式 API 并没有公开这个私有的方法。看来我也不能使用该方法使用的任何方法（svgFromgJson 等）。

有没有人对我如何在嵌入式 svg-edit 启动时加载代表图像的 base 64 字符串有建议？我正在考虑将该字符串包装在模拟 svg 文件中的 < image> 标记中并以这种方式导入..

[SVG 是否支持嵌入位图图像？](https://stackoverflow.com/questions/6249664/does-svg-support-embedding-of-bitmap-images)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T00:22:00.780

修改现有代码，根据我原来的问题中的答案，我修改了他们的示例导入，它工作得非常好。

1.  在您的页面中包含 embedapi.js
2.  定义一个 iframe 以显示 svg-edit
3.  在 iframe 的 onload 事件中调用如下代码函数

    ```
    // call onLoad for the iframe
     var frame = document.getElementById('svgedit');
        svgCanvas = new embedded_svg_edit(frame);

     // Hide main button, as we will be controlling new/load/save etc from the host document
     var doc;
     doc = frame.contentDocument;
     if (!doc)
     {
       doc = frame.contentWindow.document;
     }

      var mainButton = doc.getElementById('main_button');
      mainButton.style.display = 'none';            
      var embeddedImage='<image xlink:href="data:image/png;base64,..OMITTED FOR BREVITY.." id="svg_2" height="128" width="128" y="0" x="0"/>';

      var svgDef = '<svg width="128" height="128" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><g><title>Layer 1</title>' + embeddedImage +  '</g></svg>';
       svgCanvas.setSvgString(svgDef);

    } 
    ```

# jquery - 如何根据特定条件隐藏 jQuery 中的行？

> ID：14946103
> 
> 赞同：0
> 
> 时间：2013-02-18T22:02:20.163
> 
> 标签：jquery

我想过滤掉/隐藏可能不相关的行。

所有行都有“dataRow”类

每行包含 6 列。第一列包含一个标签，接下来的 5 列都包含值。

如果特定行中的所有值（第 1 列中的标签除外）都包含 0，那么我想隐藏该行。

在 jQuery 中实现这一点的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:13:41.150

您可以尝试计算`sum`每一行，然后相应地隐藏它。

```
$("tr.dataRow").each(function(){
  var hide = false;
  $("td:gt(0)", this).each(function(){
    if(+$(this).text()){
      hide = true;
    }
  });
  $(this).toggle(hide);
}); 
```

很高兴知道是否所有目标`td`元素都是`tr.dataRow`, then 的子元素`.children()`。

* * *

如果是上面的脚本，这里有一个变体使用`parseFloat`代替。虽然，这两个代码都应该工作。

```
$(function () {
  $("tr.dataRow").each(function () {
    var hide = false;
    $("td:gt(0)", this).each(function () {
      if (parseFloat($(this).text()) > 0) {
        hide = true;
      }
    });
    $(this).toggle(hide);
  });
}); 
```

# css - 在 Bootstrap 的主菜单中添加搜索栏

> ID：14946104
> 
> 赞同：0
> 
> 时间：2013-02-18T22:02:32.067
> 
> 标签：css, twitter-bootstrap, navigation

我正在使用 Twitter 的 Bootstrap 制作一个网站，一切都差不多完成了，但我不知道如何将搜索栏定位到主菜单中

这是在线网站 [http://testings.coffeecup.com/index1.html](http://testings.coffeecup.com/index1.html)

每次我把它放在容器上的任何地方，它都会搞砸。

编辑：

我设法添加它：

[http://gyazo.com/e76b7cfa8e25b9ef2913d588b28ea894](http://gyazo.com/e76b7cfa8e25b9ef2913d588b28ea894)

但我仍然无法将其定位在右侧。

我正在使用的 CSS

```
 .navbar-search {
    position: relative;
}

.navbar-search .search-query {
    float:right;
}

.navbar-search .icon-search {
    position: absolute;
    top: 7px;
    background-image: url("");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:12:18.993

在`<div class="navbar-inner">`包含您需要的任何属性的搜索栏`<input>`之后..只需将其浮动到右侧并调整边距，使其在导航栏中垂直居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:11:02.807

您必须在内部`<div class="navbar-inner">`和之后添加搜索栏`<div class="nav-collapse collapse">`。

搜索栏代码：

```
<input id="search" class="span3" type="search" name="search" placeholder="Search"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T22:22:38.930

您可以使用**pull-right**类

我在容器中使用它

 **```
<div class="navbar-inner">
                <div class="container">
                  <a class="btn btn-navbar" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                  </a>
                  <a class="brand" href="#">Title</a>
                  <div class="nav-collapse collapse navbar-responsive-collapse">
                    <ul class="nav">
                      <li class="active"><a href="#">Home</a></li>
                      <li><a href="#">Link</a></li>
                      <li><a href="#">Link</a></li>
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                          <li><a href="#">Action</a></li>
                          <li><a href="#">Another action</a></li>
                          <li><a href="#">Something else here</a></li>
                          <li class="divider"></li>
                          <li class="nav-header">Nav header</li>
                          <li><a href="#">Separated link</a></li>
                          <li><a href="#">One more separated link</a></li>
                        </ul>
                      </li>
                    </ul>
                    <form class="navbar-search pull-right" action="">
                      <input type="text" class="search-query span2" placeholder="Search">
                    </form>
                    <ul class="nav pull-right">
                      <li><a href="#">Link</a></li>
                      <li class="divider-vertical"></li>
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                          <li><a href="#">Action</a></li>
                          <li><a href="#">Another action</a></li>
                          <li><a href="#">Something else here</a></li>
                          <li class="divider"></li>
                          <li><a href="#">Separated link</a></li>
                        </ul>
                      </li>
                    </ul>
                  </div><!-- /.nav-collapse -->
                </div>
              </div> 
```

结果 ： ![在此处输入图像描述](../Images/dd287d10e6a4603bdafae950eafc694a.png)**

# c# - 未找到连接字符串“DefaultConnection”

> ID：14946107
> 
> 赞同：0
> 
> 时间：2013-02-18T22:02:45.857
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

我正在创建一个 MVC 4 Web 应用程序并`ConnectionString`在我的`web.config`文件中有以下内容。

```
<connectionStrings>
<!--<add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;.... />-->
<add name="MyMvcContext" connectionString="Data Source=(LocalDb)\v11.0;.... />
</connectionStrings> 
```

我已经修改了默认`AccountModels.cs`使用`ConnectionString` `MyMvcContext`.

```
public class UsersContext : DbContext
{
    public UsersContext()
        : base("MyMvcContext")
    {
    }

    public DbSet<UserProfile> UserProfiles { get; set; }
} 
```

但是我仍然得到`ConnectionString` `DefaultConnection`未找到的错误。执行时`\Filters\InitializeSimpleMembershipAttribute.cs`。我也应该更改第 41 行吗？或者我应该保留`DefaultConnection`并更改数据库等？

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:04:08.993

只需在 web.config 中取消注释此行：

```
<add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;.... /> 
```

我猜您在应用程序中使用的是单个数据库，因此您应该在代码中使用相同的连接字符串名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T11:12:55.077

您必须使用基础项目（调用您的端层的 Web 项目）连接字符串名称。我希望在您的情况下，您的 Web 项目的连接字符串名称为“X”。但 DAL 项目 dbcontext 库使用不同的连接字符串名称作为“MyMvcContext”。将其更改为 X。这将起作用。始终从基础项目中获取配置详细信息（应用条件）

# python - 如何在 python 中删除转义序列，如 '\xe2' 或 '\x0c'

> ID：14946109
> 
> 赞同：9
> 
> 时间：2013-02-18T22:03:03.267
> 
> 标签：python, regex, escaping, string-literals

我正在开发一个项目（基于内容的搜索），为此我在 Ubuntu 中使用“pdftotext”命令行实用程序，它将所有文本从 pdf 写入某个文本文件。但它也写项目符号，现在当我读取文件以索引每个单词时，它也会获得一些转义序列索引（如'\ x01'）。我知道它是因为项目符号（•）。

我只想要文本，所以有什么办法可以删除这个转义序列。我做了这样的事情

```
escape_char = re.compile('\+x[0123456789abcdef]*')
re.sub(escape_char, " ", string) 
```

但这不会删除转义序列

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T22:20:23.970

问题是这`\xXX`只是控制字符的表示，而不是字符本身。`\x`因此，除非您使用的`repr`是字符串，否则您无法真正匹配。

您可以使用字符类删除不可打印的字符：

```
re.sub(r'[\x00-\x08\x0b\x0c\x0e-\x1f\x7f-\xff]', '', text) 
```

例子：

```
>>> re.sub(r'[\x00-\x1f\x7f-\xff]', '', ''.join(map(chr, range(256))))
' !"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T22:06:42.393

您唯一真正的问题是反斜杠很棘手。在字符串中，反斜杠可能会被特殊处理；例如`\t`会变成一个标签。由于`\+`在字符串中并不特殊，因此该字符串实际上是您所期望的。因此，正则表达式编译器查看了它，`\+`在正则表达式中只是一个普通`+`字符。通常`+`具有特殊含义（“前面模式的 1 个或多个实例”）并且反斜杠将其转义。

解决方案只是将反斜杠加倍，这样就形成了与单个反斜杠匹配的模式。

我将模式放入`r''`, 以使其成为 Python 单独留下反斜杠的“原始字符串”。如果你不这样做，Python 的字符串解析器会将两个反斜杠变成一个反斜杠；就像`\t`变成一个制表符一样，`\\`变成一个反斜杠。因此，请使用原始字符串并准确输入您希望正则表达式编译器看到的内容。

此外，更好的模式是：反斜杠，然后是 x，然后是匹配十六进制字符的字符类的 1 个或多个实例。我重写了这个模式。

```
import re

s = r'+\x01+'
escape_char = re.compile(r'\\x[0123456789abcdef]+')
s = re.sub(escape_char, " ", s) 
```

您可以使用普通字符串而不是使用原始字符串，并且要非常小心使用反斜杠。在这种情况下，我们必须放四个反斜杠！字符串解析器会将每个双反斜杠转换为单个反斜杠，我们希望正则表达式编译器看到两个反斜杠。只使用原始字符串更容易！

此外，您的原始模式将删除零个或多个十六进制数字。我的模式删除了一个或多个。但我认为很可能总是会有两个十六进制数字，或者也许使用 Unicode 可能会有四个。您应该弄清楚可以有多少，并放置一个确保这一点的模式。这是一个匹配 2、3 或 4 个十六进制数字的模式：

```
escape_char = re.compile(r'\\x[0123456789abcdef]{2,4}') 
```

这是一个恰好匹配两个或恰好四个的。我们必须使用竖线来做出两个选择，并且我们需要用括号组成一个组。我在这里使用了一个不匹配的组，`(?:pattern)`而不是只是`(pattern)`（其中`pattern`表示模式，而不是字面意思是单词`pattern`）。

```
escape_char = re.compile(r'\\x(?:[0123456789abcdef]{2,2}|[0123456789abcdef]{4,4})') 
```

这是示例代码。项目符号序列后面紧跟一个`1`字符，这种模式不理会它。

```
import re

s = r'+\x011+'
pat = re.compile(r'\\x(?:[0123456789abcdef]{2,2}|[0123456789abcdef]{4,4})')
s = pat.sub("@", s)
print("Result: '%s'" % s) 
```

这打印：`Result: '+@1+'`

注意：所有这些都假设您实际上是在尝试匹配反斜杠字符后跟十六进制字符。如果您实际上正在尝试匹配可能是或可能不是“可打印”字符的字符字节值，请使用@nneonneo 的答案而不是这个答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T23:14:12.600

如果您正在使用 8 位 char 值，则可以通过预先构建一些简单的表来放弃正则表达式，然后将它们与方法结合使用以*非常*快速轻松地`str.translate()`删除字符串中不需要的字符：

 *```
import random
import string

allords = [i for i in xrange(256)]
allchars = ''.join(chr(i) for i in allords)
printableords = [ord(ch) for ch in string.printable]
deletechars = ''.join(chr(i) for i in xrange(256) if i not in printableords)

test = ''.join(chr(random.choice(allords)) for _ in xrange(10, 40)) # random string
print test.translate(allchars, deletechars) 
```*

# php - 如何动态地向用户呈现动态 zip 文件

> ID：14946110
> 
> 赞同：0
> 
> 时间：2013-02-18T22:03:03.707
> 
> 标签：php, zip, zipfile

我正在编辑一个古老的脚本，它压缩了几个图像并将它们动态地呈现给用户。

我已经重写了几乎所有的代码，但是我找不到输出 zipfile 内容的方法。将其写入服务器是非常不可取的。

我使用以下命令创建文件：

```
$z = new ZipArchive(); 
```

我可以添加内容：

```
$z->addFromString("filename",$string); 
```

我想动态呈现它：

```
header("Content-Type: application/zip;");
header("Content-Disposition: attachment; filename=file.zip;");

// I need a function to read the contents of the zipfile here. Something like:
echo $z->filecontent(); 
```

我找不到为此使用什么功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:09:17.537

如果您阅读文档，请查看[close()](http://www.php.net/manual/en/ziparchive.close.php)方法以实际将文件物理保存到文件系统。然后您可以在保存的文件上使用[readfile()](http://www.php.net/manual/en/function.readfile.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:09:50.150

您将打开文件，最有可能使用临时名称创建它。像这样的东西：

```
$name = tempnam('/tmp','zip');
$z->open($name, ZIPARCHIVE::CREATE) 
```

添加完所有文件后，您将关闭它。

```
$z->close(); 
```

现在，当您准备好发送数据时，您可以这样做：

```
readfile($name); 
```

完成后，您要使用以下命令清理临时文件：

```
unlink($name); 
```

# html - 在 FF18 和 Chrome 中网站文本无法突出显示且链接无法点击，但在 IE 9 中运行良好

> ID：14946111
> 
> 赞同：0
> 
> 时间：2013-02-18T22:03:04.067
> 
> 标签：html, css, hyperlink

我创建了一个网站，由于某种原因它可以在 IE 9 中运行，但是在 Firefox 18 或 Chrome 中没有一个文本可以突出显示，并且没有一个链接可以工作。我尝试将所有带有链接的 div 更改为 999 的 az 索引我已经使用 W3c 验证了代码，我尝试更改用于装饰链接的标签并尝试了不同的 css，但都不起作用。

我只是无法找出问题所在，为什么它在最糟糕的浏览器 IE 中工作是个谜。

如果有人可以提供帮助，我将永远感激不尽。我在这里上传

[http://1400testwebsite.uphero.com/](http://1400testwebsite.uphero.com/)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:05:33.813

尝试从 Wrapper Div 中删除“z-index: -1”。这为我解决了 Chrome 和 FF 中的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:13:52.243

你有错误的属性：#wrapper {z-index: -1} z-index 不能为负数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T22:57:29.590

从 #wrapper 中删除 z-index -1 这将解决您的问题，z-index 应该始终是 1 - 32767 之间的正数。

# android - PhoneGap - 将数据保存到本地文件系统（文件 API）

> ID：14946114
> 
> 赞同：3
> 
> 时间：2013-02-18T22:03:16.730
> 
> 标签：android, file, cordova, save

我刚开始使用PhoneGap 的[File API](http://docs.phonegap.com/en/2.4.0/cordova_file_file.md.html#File)并且在保存过程中已经遇到了一些问题。这是javascript代码：

```
function saveCourseToFile() {
    console.log("checkpoint 1");
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFSSuccess, onFSError);
}
function onFSSuccess(fileSystem) {
    console.log("checkpoint 2");
    console.log("Opened file system: " + fileSystem.name);
    fileSystem.root.getFile("course.oerk", {create:true, exclusive:false}, gotFileEntry, onFSError);
}
function gotFileEntry(fileEntry) {
    console.log("checkpoint 3");
    fileEntry.createWriter(gotFileWriter, onFSError);
}
function gotFileWriter(writer) {
    writer.onwrite = function(evt) {
    console.log("checkpoint 4: write success!");
    };
    writer.write("test test test");
}
function onFSError(err) {
    console.log(err.code);
} 
```

**更新：**

```
<script type="text/javascript">
    function init() {
        document.addEventListener("deviceready", onDeviceReady, false);
    }
</script>
<body onload="init()">
    <div id="page1">
        <a href="#page2">Click me</a>
    </div>
    <div id="page2">
        <script type="text/javascript">
            saveCourseToFile();
        </script>
        <p>Text text text text</p>
    </div>
</body> 
```

但是在设备文件系统中没有这样的文件（course.oerk）。这是一段logcat：

```
02-18 22:36:55.542: D/Cordova(746): onPageFinished(file:///android_asset/www/index.html#coursesPage)
02-18 22:36:55.542: D/Cordova(746): Trying to fire onNativeReady
02-18 22:36:55.552: D/DroidGap(746): onMessage(onNativeReady,null)
02-18 22:36:55.552: D/DroidGap(746): onMessage(onPageFinished,file:///android_asset/www/index.html#coursesPage)
02-18 22:36:56.223: I/Choreographer(746): Skipped 36 frames!  The application may be doing too much work on its main thread. 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T22:40:07.303

固定的。只需将 移动`saveCourseToFile();`到锚点：

```
....
<div id="page1">
    <a href="#page2" onclick="saveCourseToFile()">Click me</a>
</div>
<div id="page2">
    <p>Text text text text</p>
</div>
.... 
```

# sql - 用于比较每月采购金额是增加还是减少的 SQL 查询

> ID：14946115
> 
> 赞同：1
> 
> 时间：2013-02-18T22:03:27.717
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在编写一份报告，该报告应该告诉我在 1 月和 12 月之间购买金额是否有任何增加或减少。帐户的每个实例都有一条记录，因此每个客户通常会有 4 条（如果是季度）到 12 条（如果是月度）记录。我如何进行这样的 SQL 查询？它基本上必须查看所有月份并判断是否有任何月份发生变化。

这是我目前拥有的：

```
Yr/Mnth  Amt    
1212    51.00   
1209    69.00  
1206    69.00       
1203    69.00 
```

这是我想看到的：

```
March    June    September   December    Amount Diff  Increase or Decrease
69.00    69.00    69.00        51.00        18.00          Decrease 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:42:01.220

可能对于您的报告，您可以使用它

```
 ;WITH cte AS
 (
  SELECT *, ROW_NUMBER() OVER (ORDER BY [Yr/Mnth]) AS Id
  FROM dbo.purchase
  )
  SELECT DATENAME(mm, DATEADD(mm, RIGHT(c1.[Yr/Mnth],2)-1, '20010101')) AS [Month], 
         c1.Amt, ISNULL(c2.Amt, c1.Amt) - c1.Amt AS 'Amount Diff', 
         CASE WHEN c2.Amt - c1.Amt > 0 THEN 'Decrease'
              WHEN c2.Amt - c1.Amt < 0 THEN 'Increase'                   
              ELSE '' END AS 'Increase or Decrease'
  FROM cte c1 LEFT JOIN cte c2 ON c1.Id = c2.Id + 1 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/1cd44/3)上的演示[](http://sqlfiddle.com/#!3/1cd44/3)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:20:04.630

你想要这样的东西：

```
select case when amount1 > amount2 then 'increase'
when amount2 < amount1 then 'decrease'
else 'no change'
end changetype
from 
(select t1.something amount1, t2.somethingelse amount2
from yourtable t1 join yourtable t2 on something
etc) alias_required 
```

你应该能够填空。**

# ruby-on-rails - 为活动记录中的一行保存一个属性

> ID：14946116
> 
> 赞同：1
> 
> 时间：2013-02-18T22:03:33.790
> 
> 标签：ruby-on-rails, rails-activerecord

有 5 种方法可以为 ActiveRecord 中的属性保存新值。不幸的是，我只能找到一种工作方式，我不确定这是最有效的方式：

```
review = Review.find(id)
review.status = 'ok'
review.save! 
```

我从更新方法开始，但出于某种奇怪的原因删除了我的评论行

```
review = Review.update(id, :status => 'ok)
review.save! 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T22:27:17.367

你应该使用

```
review = Review.find_by_id(id)
review.update_column(:status, 'ok') 
```

你能看到[文档](http://apidock.com/rails/ActiveRecord/Persistence/update_column)吗？

注意：`ActiveRecord::Base:update`在 Rails 3.2.8 中已弃用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:12:32.383

为属性保存新值的最有效方法是简单地执行以下操作：

```
Review.update_attribute(id, :status => 'ok') 
```

此后无需调用 save 方法，因为 ActiveRecord 会自动使用该`update_attribute`方法保存值。

现在，请记住，这仅在更改仅在通过对象上设置的验证时才有效时才有效。

查看此链接了解更多信息：

[http://apidock.com/rails/ActiveRecord/Base/update/class](http://apidock.com/rails/ActiveRecord/Base/update/class)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T22:36:50.777

它应该是

`review.update_attributes(status: 'ok')`

# sencha-touch-2 - 煎茶触摸2；将值存储到 HTML

> ID：14946122
> 
> 赞同：0
> 
> 时间：2013-02-18T22:03:56.060
> 
> 标签：sencha-touch-2, sencha-architect

我有一个商店和模型来进行 AJAX 调用并获得结果。

这是我的看法

```
Ext.define('kids.view.YouTube', {
  extend: 'Ext.Component',
  alias: 'widget.YouTubePlayer',
  xtype: 'YouTube',

  config: {
    url: 'http://www.youtube.com/embed/',
    videoId: 'qsvpvqvApKo',
    vWidth: 420,
    vHeight: '315',
    styleHtmlContent: true,
    aaa: '1',
},
initialize: function() {
    var prod = Ext.create('kids.store.vids');
    prod.load(function ( ){ 
    prod.each(function (record, id){
        tmp = tmp + record.get('vid_url');
 });

  });
 this.callParent(arguments);
    var out = Ext.String.format(
      [
        '<div align="center">',
        '<iframe width="{0}" height="{1}" src="{2}"',
        'frameborder="0" allowfullscreen></iframe>',
        '</div>'
      ].join(''),
      this.getVWidth(),
      this.getVHeight(),
      **tmp //(the dynamic variable i formed in onLoad event of store**
    );
    console.log(tmp);

   this.setHtml(out);
}
 }); 
```

我使用`prod=ext.create('kids.store.vids');` 并且正在使用`onload`函数，它可以正确获取值。

我如何在 onload 之外使用 tmp 变量，因为该变量正在变为空。在 store.load(function) 里面我不能使用`this.callParent()`

h**我可以在这里传递动态 html，根据商店返回的值吗？**

帮我

帕万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T02:33:42.897

明白了，谢谢我使用 panel.setHtml 从我从商店获得的变量更新 html。

谢谢

# javascript - 在 JavaScript 中封装类定义以实现更简洁的命名空间

> ID：14946124
> 
> 赞同：1
> 
> 时间：2013-02-18T22:04:04.020
> 
> 标签：javascript, class, namespaces

我正在创建一个测验交互，经过几天的研究，我试图确定声明我的对象的最佳方式。有一个主匿名函数（可以称为测验，但不需要公共方法），其中包含场景的类定义，其中包含问题的类定义：

测验 > 情景 > 问题 > 答案（最终）

我更喜欢立即调用（'iffy'）模型来强制执行私有/公共，但我也需要多个实例，所以我相信我应该使用原型？我已将类定义设为私有，因为它们仅用于此交互。这是最好的模型吗？

JsFiddle：http: [//jsfiddle.net/QtCm8/](http://jsfiddle.net/QtCm8/)

```
(function(quizData) {
    var scenarios = [];
    for(var s=0;s<quizData.scenarios.length;s++) scenarios.push(new Scenario(quizData.scenarios[s]));
    function Scenario(scenarioData) {
        console.log("New Scenario: " + scenarioData.title);
        var questions = [];
        for(var q=0;q<scenarioData.questions.length;q++) questions.push(new Question(scenarioData.questions[q]));
        function Question(questionData) {
            console.log("New Question: " + questionData.text);
            // Repeat pattern for future answers object
        }
    }
})({
    scenarios: [
        {
            title: 'Scenario1'
            ,questions: [
                {
                    text: 'What is 1+1?'
                }
                ,{
                    text: 'What is 2+2?'
                }
            ]
        }
    ]
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:05:01.720

首先，Javascript 中没有类，只有对象。它是一种[基于原型的](http://en.wikipedia.org/wiki/Prototype-based_programming)语言（不是基于类的），它的功能是[一流的对象](http://en.wikipedia.org/wiki/First-class_function)。顺便说一句，a`prototype`是一个对象，您创建的每个函数都将它指向一个新的空白对象。只有一个使用函数模拟的“类”概念。

这个**即时模式**（又名匿名函数）对于提供更干净的命名空间非常有用。当有一项工作只需要完成一次时，它也很有用，例如初始化代码，因此没有理由拥有可重用的命名函数。

但是，如果您需要可重用的成员（例如方法），是的，它应该去`prototype`. 向原型属性添加公共属性和方法，允许这些公共部分在使用相同构造函数创建的所有实例之间共享。

也许您正在寻找**[Module Pattern](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript)**，它是诸如

*   命名空间，
*   即时功能，
*   私人会员等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:38:48.777

考虑将你的类打包成对象。以下是我想出的设计模式。由于您有这么多相互依赖的类，我认为最好将它们排列成一个对象。这是代码：

```
var quiz = {};

quiz.init = (function(data) {
    this.scenarios = this.questions = this.answers = [];

    this.data = {
        Question: data.Question.bind(this),
        Answer: data.Answer.bind(this),
        Scenario: data.Scenario.bind(this)
    };

    this.set_data = function(qas) {
        // fill the arrays here
        // Question, Scenario and Answer are now this.data.Question/Answer...
        // you can use a variable to shorten the names here
    };
});

var Quiz = function(data) {
    return new quiz.init(data);
};

var data = { // classes are defined here
    Question: function() {},
    Answer: function() {},
    Scenario: function() {}
};

var q = Quiz( data );

q.data.set_data(/* Big object literal goes here */); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T22:59:57.547

就个人而言，我喜欢使用返回他们希望公开的属性的类定义。以下是您的案例的示例。你可以玩弄这个结构并找到你最喜欢的东西，但它应该给你一些例子：

```
// Namespace
var q = {};

q.Quiz = function Quiz (data) {

    // Private code & variables
    var scenarios = [];
    for (var i = 0; i < data.scenarios.length; i++) {
        scenarios.push(new q.Scenario(data.scenarios[i]));
    }

    // Return public methods & values
    return {
        scenarios: scenarios
    };
};

q.Scenario = function Scenario (sData) {

    // Private inner class
    var Question = function (qData) {
        console.log("New Question: " + qData.text);
        return {
            text: qData.text
        };
    };

    console.log("New Scenario: " + sData.title);
    var questions = [];
    for (var i = 0; i < sData.questions.length; i++) {
        questions.push(new Question(sData.questions[i]));       
    }

    return {
        questions: questions
    };
};

var data = {
    scenarios: [
        {
            title: 'Scenario1'
            ,questions: [
                {
                    text: 'What is 1+1?'
                }
                ,{
                    text: 'What is 2+2?'
                }
            ]
        }
    ]
};

console.log(new q.Quiz(data)); 
```

这里的工作示例：http: [//jsfiddle.net/5M8bp/](http://jsfiddle.net/5M8bp/)

或者，您摆脱 return 语句并使用“this”关键字定义公共属性和方法。例如：

```
q.Quiz = function Quiz (data) {

    this.scenarios = [];

    for (var i = 0; i < data.scenarios.length; i++) {
        this.scenarios.push(new q.Scenario(data.scenarios[i]));
    }
};

q.Scenario = function Scenario (sData) {

    // Private inner class
    var Question = function (qData) {
        console.log("New Question: " + qData.text);
        this.text = qData.text;
    };

    console.log("New Scenario: " + sData.title);
    this.questions = [];
    for (var i = 0; i < sData.questions.length; i++) {
        this.questions.push(new Question(sData.questions[i]));       
    }
}; 
```

# jquery - 使用 jQuery mobile 时，需要刷新页面才能按预期显示

> ID：14946126
> 
> 赞同：0
> 
> 时间：2013-02-18T22:04:13.190
> 
> 标签：jquery, jquery-mobile

我正在使用 JQM 的列表视图作为我正在创建的一个移动网站的导航。没什么花哨的，只是一个普通网站的移动版本。但是，也存在一些问题。

加载页面时，以及单击特定链接时，该站点未以应有的方式显示。例如，名为“我们做什么”的页面使用 fontawesome 图标集，只有在重新加载页面后，才会显示图标。此外，只有在重新加载 jQuery Gallery 插件后才能正常工作。

这是有问题的网站：[http ://www.m.gowb.net](http://www.m.gowb.net)

# c# - wcf 等待对象变为可用

> ID：14946130
> 
> 赞同：1
> 
> 时间：2013-02-18T22:04:19.960
> 
> 标签：c#, multithreading, wcf, locking

我是一个新手程序员，我正在使用 c# 编写一个 WCF 项目。在我的服务器端，它接受呼叫并执行一些复杂的过程。但是，我想确保在服务器执行另一个调用之前完成某些进程。为了让我的问题更容易理解，我将在这里做一个类似的过程，但更简单。比如服务器会做一些复杂的计算，然后登录一个网站，发布一个状态，然后退出网站，再做一些计算。我不在乎多个线程（客户端调用）在计算时是否同时运行。但我确实关心 {login,post,logout} 部分何时执行，因为它们都使用相同的凭据登录网站，所以如果多个线程同时尝试登录，网站将拒绝。

```
[ServiceBehavior(
ConcurrencyMode = ConcurrencyMode.Single,
InstanceContextMode = InstanceContextMode.PerCall)]
public class WCFProject
{
    ComplicatedCalculation();

    Login();    
    Post();
    Logout();

    SomeMoreCalculation();
} 
```

我想确保，如果 Jeff 的客户端调用正在执行 login() post() logout()，所有其他客户端调用将在到达这部分代码时等待，并在 jeff 的调用完成这 3 个方法时继续。然后一次执行一个客户端的这 3 种方法。有没有办法做到这一点？lock() 或 using() 语句会起作用吗？任何帮助将不胜感激。

客户端在电脑上，会有多个来自不同电脑的客户端。

# ruby-on-rails - sunspot:solr:run 和 sunspot:solr:start 有什么区别？

> ID：14946132
> 
> 赞同：1
> 
> 时间：2013-02-18T22:04:33.170
> 
> 标签：ruby-on-rails, solr, sunspot

运行 sunspot:solr:start 会引发错误

“i386-mingw32 不支持此命令。使用 rake sunspot:solr:run 在前台运行 Solr。”

运行 sunspot:solr:run 只是挂起。在“前景”中运行是什么意思？

**编辑**

如何运行 solr:run 和 rails s？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T22:10:03.347

一个`start`在后台运行它，就像在系统上运行的服务一样，`run`只需在控制台（前台）中运行它，你可以通过 ctrl+c 来杀死它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T22:12:39.703

*跑*

在前台运行意味着无论何时调用命令，您都会在控制台中看到日志记录。这在开发模式中非常有用，因此您可以看到系统（重新）索引和拉取查询。对调试很有用。

*开始*

Start 将允许您在后台将其作为服务运行，并且在生产模式下也很有帮助，在这种模式下您无需使用控制台登录即可运行服务。

在生产中运行时，你会想要做这样的事情

`RAILS_ENV=production rake sunspot:solr:start`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T09:20:00.777

按

> 'Ctrl+Shift+T'

在现有打开的终端中打开一个新选项卡。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T10:21:23.843

1.  在控制台中运行该`sunspot:solr:run` 过程，在您的终端中您可以看到它，您可以使用它来停止它`ctrl+c`

2.  在`sunspot:solr:start`后台运行进程并停止您需要使用的进程`sunspot:solr:stop`，如果您不明确停止它，那么它将在您关闭机器时终止。

**注意：**要根据您当前的逻辑和代码获得准确的搜索结果，请`rake sunspot:reindex`在运行过程后使用命令使用`sunspot:solr:run`或`sunspot:solr:start`

# android - USB 调试：如何撤消“始终允许从此计算机”选项

> ID：14946145
> 
> 赞同：4
> 
> 时间：2013-02-18T22:05:20.853
> 
> 标签：android, eclipse, device, adt, offline

我已经开始为android开发。我正在使用具有不同操作系统的不同计算机。（家里有一台 Windows 台式电脑和一台 Macintosh，工作时有一台 Windows 笔记本电脑）

大多数时候我使用我的台式电脑进行开发，但从昨天开始，我的 Nexus 4 在 Eclipse ADT 设备视图中显示为脱机。这个问题只发生在我的台式电脑上。在其他计算机上，让设备在 Eclipse 中联机没有任何问题。

我已经尝试了很多事情，例如：
- 拔下/插入 nexus 4
- 关闭/打开 USB 调试
- 重新启动计算机、nexus 4 和 adb 服务器
- 重新安装 nexus 4 USB 驱动程序（我正在使用 Android Composite ADB Interface Drivers来自Android SDK）

我正要放弃，但后来我想起了什么。通过usb连接nexus后，出现“允许USB调试”对话框，在我的台式电脑上，我选中了“始终允许来自这台计算机”选项。

我希望禁用此“始终允许”权限可以帮助我的设备重新上线。我已经在开发人员选项中进行了搜索，以找到一种方法来重置“始终允许”权限，但没有成功。也许可以通过清除存储此信息的应用程序/服务（设置->应用程序（全部））的数据来重置权限，但我在谷歌中没有找到它的名称。

那么有人知道必须清除其数据以重置权限的应用程序/服务的名称吗？或者是否有另一种方法可以让设备重新上线，而我还没有尝试过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:20:34.117

您也可以将您的设备与启用该功能的多台计算机一起使用。我可以使用我的 Nexus 7 和 Galaxy Nexus，它们都运行 4.2.2 并且现在已经检查了 3 台机器上的始终允许选项。

确保您的所有机器都在运行 ADT 和 SDK 工具的最新更新，因为`adb`之前的版本不支持 4.2.2 安全措施。我的一台机器有同样的问题，当我更新我的工具时它得到了修复。

此外，有时您安装了多个 Eclipse（由于各种原因，我安装了大约 11 个）。如果所有这些工具都没有使用最新工具进行更新，请确保您的`PATH`观点指向`adb`最新更新，而不是任何其他工具。

# vb.net - 使用无限拆分拆分 VB.NET 字符串

> ID：14946146
> 
> 赞同：-1
> 
> 时间：2013-02-18T22:05:23.257
> 
> 标签：vb.net, string, split

在 VB.Net 中，如何按每个实数拆分字符串（数字和字母）。例如

1.  会员申请缺失 2.会员信用评分低 3.无收入申报

进入

1.  会员申请丢失
2.  会员信用评分低
3.  没有报告收入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:30:40.017

```
 Dim source = "1\. Membership application is missing 2\. Members credit score is low 3\. No reported income"

    Dim split = source.Split(New Char() {"1"c, "2"c, "3"c, "4"c, "5"c, "6"c, "7"c, "8"c, "9"c, "0"c})

    For i = 0 To split.GetUpperBound(0)
        If String.IsNullOrWhiteSpace(split(i)) Then
            Continue For
        End If
        Console.WriteLine("{0}. {1}", i, split(i).Trim("."c, " "c))
    Next 
```

请注意，如果有超过 9 个项目（如果包含 10 个`0`），则会中断。实际上有很多方法可以打破这一点，但它们都不属于规范。

# c# - 如何从嵌套 C# 列表中删除重复值

> ID：14946147
> 
> 赞同：1
> 
> 时间：2013-02-18T22:05:24.233
> 
> 标签：c#, list, linq-to-sql, nested-lists

我有一个如下模型设置：

```
public class ReportScheduleModel
{
    public string Day { get; set; }
    public List<ReportTimes> reportTimes { get; set; }
}

public class ReportTimes
{
    public byte hourOfDay { get; set; }
    public byte minuteOfDay { get; set; }
    public string reportType { get; set; }
} 
```

然后我可以使用以下列表格式将整个列表传递回我的控制器：

```
List<ReportScheduleModel> ReportSchedule
    [0]->Day: 'Sunday'
         [ReportTimes]: [0]->hourOfDay: '09'
                        minuteOfDay: '23'
                        reportType: 'Test1'
                   [1]->hourOfDay: '08'
                        minuteOfDay: '11'
                        reportType: 'Test2'
    [1]->Day: 'Sunday'
         [ReportTimes]: [0]->hourOfDay: '09'
                        minuteOfDay: '23'
                        reportType: 'Test1'
                        [1]->hourOfDay: '11'
                        minuteOfDay: '30'
                        reportType: 'Test1'
    [2]->Day: 'Monday'
         [ReportTimes]: [0]->hourOfDay: '09'
                        minuteOfDay: '23'
                        reportType: 'Test1' 
```

在上面的列表中，您注意到`ReportSchedule[0]`两者`ReportSchedule[1]`的报告时间完全相同，即“09:23 Test1”。我想要做的是得到一个没有这些重复值的列表，它只保留一个重复的报告时间值。因此，我基于上述内容的理想过滤列表将是：（`Day`不分组/唯一无关紧要，只是`ReportTimes`基于相同的“日”）

```
 [0]->Day: 'Sunday'
             [ReportTimes]: [0]->hourOfDay: '09'
                            minuteOfDay: '23'
                            reportType: 'Test1'
                       [1]->hourOfDay: '08'
                            minuteOfDay: '11'
                            reportType: 'Test2'
        [1]->Day: 'Sunday'
             [ReportTimes]: [0]->hourOfDay: '11'
                            minuteOfDay: '30'
                            reportType: 'Test1'
        [2]->Day: 'Monday'
             [ReportTimes]: [0]->hourOfDay: '09'
                            minuteOfDay: '23'
                            reportType: 'Test1' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:22:40.153

**重要事项**确保您的**ReportTimes**类以合理的方式实现 GetHashCode 和 Equals：即相同的条目总是散列到相同的值，而不同的时间条目散列到不同的值。

然后，您可以为每一天创建一个 HashSet 数据结构，并线性遍历您的嵌套列表，将所有列表中的所有报告时间添加到按天计算的适当集合中。

以上将确保每天只保留唯一的 ReportTimes 实例。并且它将在 ReportTimes 实例的数量上具有线性时间性能！

当然，您也可以重复使用哈希集，一次只做一天..

```
var sets  = new Dictionary<string, HashSet<ReportTimes>>();

// assuming ReportSchedule is the list of ReportScheduleModel items
foreach(var scheduleItem in ReportSchedule)
{
     if(!sets.ContainsKey(scheduleItem.Day))
        sets.Add(scheduleItem.Day, new HashSet<ReportTimes>());

     foreach(var rt in scheduleItem.reportTimes)
     {
          sets[scheduleItem.Day].Add(rt);
     }
}

// at this point, each set in the sets dictionary will contain only unique items
// if you wanted to get all the unique report times for Sunday you would use something like:
foreach(var rt in sets["Sunday"])
{
    Console.WriteLine("{0}:{1} - {2}", rt.hourOfDay, rt.minuteOfDay, rt.reportType);
} 
```

我希望上面的例子足够清楚。正如我在开始时所说，请确保在 ReportTime 类中实现 GetHashCode 和 Equals。这是一个例子：

```
public class ReportTimes
{
    public byte hourOfDay { get; set; }
    public byte minuteOfDay { get; set; }
    public string reportType { get; set; }

    public override int GetHashCode()
    {            
        return reportType.GetHashCode ^ (hourOfDay << 8) ^ (minuteOfDay);
    }

    public override bool Equals(object other)
    {
        if(other is ReportTimes)
        {
            var ort = (ReportTimes)other;

            // returns true if the 'other' object represents the same time & type
            return    ort.hourOfDay.Equals(hourOfDay);
                   && ort.minuteOfDay.Equals(minuteOfDay);
                   && ort.reportType.Equals(reportType);
        }

        return false;  // if comparing to a non-ReportTimes object always return false
    }
} 
```

# javascript - Telerik mvc 组合框突出显示特定单词

> ID：14946149
> 
> 赞同：0
> 
> 时间：2013-02-18T22:05:29.323
> 
> 标签：javascript, asp.net-mvc-3, jcombobox, telerik-mvc

我的应用程序是 asp.net MVC3。我正在使用 Telerik MVC 组合框；我需要在下拉列表中突出显示一个特定的单词，这是我的脚本：

```
 highlightText(document.getElementById('Cword').value);

function highlightText(htext) {
    var str = document.getElementById("ComboBox-input").innerHTML;
    str = str.replace(htext, '<span style="color:blue;">' + htext + '</span>');
    document.getElementById("ComboBox-input").innerHTML= str;
} 
```

不幸的是，它不起作用，我在 div 上检查了相同的脚本并且它起作用了。我会很感激你的建议，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:11:52.050

请检查突出显示特定组合值的答案。

[Telerik 组合背景](https://stackoverflow.com/questions/14986540/telerik-combo-background)

访问使用后使用上述方法获取该值的索引

```
$("#combobox").select(index); 
```

# c# - 无法使用 this.NavigationService

> ID：14946155
> 
> 赞同：0
> 
> 时间：2013-02-18T22:05:43.767
> 
> 标签：c#, .net, wpf, mvvm, mvvm-light

在[NavigationService.Navigate Method (Uri)](http://msdn.microsoft.com/EN-US/library/ms591053%28v=VS.110,d=hv.2%29.aspx)的文档中是这个代码片段：

```
void goButton_Click(object sender, RoutedEventArgs e)
{
    this.NavigationService.Navigate(new Uri(this.addressTextBox.Text));
} 
```

但是在我想调用它的班级中`this.NavigationService`不可用。`Window`基本上我想使用*MVVM-Light Toolkit*切换页面，所有教程都使用该方法，但我不能。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:11:56.350

您需要使用 a[`NavigationWindow`](http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationwindow.aspx)来使用`NavigationService`

# c# - 如何在两个相同行数的 DataGrid（以及隐藏的 1-1 映射字段）之间维护行的重复排序？

> ID：14946158
> 
> 赞同：0
> 
> 时间：2013-02-18T22:05:58.200
> 
> 标签：c#, .net, wpf

我有两个具有相同行数的 DataGrid。每行还有一个隐藏的整数字段/列，用于保持两者之间的 1-1 对应关系。当用户排序、选择或滚动时，一个 DataGrid 上的操作需要复制到另一个 DataGrid 上。我最关心排序，因为我担心 DataGrid 的排序操作可能会干扰或可能无法反映我自己在幕后的排序。保持这些观点的最佳方式是什么？

（这是一个测量程序，其中一个网格具有 x、y、z 坐标列表，而第二个列表具有应用了变换的相同点。由于屏幕空间的原因，这些点在两个选项卡之间拆分。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:22:42.127

在大型数据集上排序可能很昂贵。如果屏幕空间是问题，您可以拥有一个包含一种类型项目的数据网格并切换项目模板以在两种视图之间切换。这种方式保留了屏幕空间，排序不会进行两次，并且您有一种非常可靠的方式来保持两个视图之间的排序同步。

达到效果的方法有很多，最好的方法要视具体情况而定。

一种方法是将两个不同`<GridView>`的 s 设置为资源，并选择在代码中或通过使用自定义转换器的 Binding 使用哪一个：

```
<Grid>
    <Grid.Resources>
        <GridView x:Key="DefaultView">
             <GridViewColumn Width="120"....etc/>
        </GridView>
        <GridView x:Key="AlternativeView">
               <GridViewColumn Width="50"....etc/>
        </GridView>
    </Grid.Resources>

    <ListView x:Name="MyListView" ItemsSource="{Binding DisplayValues}" View="{StaticResource DefaultView}"/>

</Grid> 
```

在后面的代码中，您可以切换视图，如下所示：

```
 MyListView.View = isDefault ? MyListView.TryFindResource("DefaultView") :  MyListView.TryFindResource("AlternativeView") 
```

也可以使用 Binding 并跳过后面的代码。

另一种方法是为其中一个列项制作用户控件，其中用户控件可以以两种替代状态显示数据。

另一种可能性是使用[ItemTemplateSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemtemplateselector.aspx)

# apache-flex - 具有拆分列的 Spark Datagrid

> ID：14946160
> 
> 赞同：2
> 
> 时间：2013-02-18T22:06:05.863
> 
> 标签：apache-flex, datagrid, flex4.5, flexbuilder

我试图弄清楚如何才能让一个简单的 Datagrid 拆分列。

我需要以下布局：

```
 +-------------------+
   |    Destination    |
   +--------+----------+
   | Dir 1  |  Dir 2   |
   +-------------------+ 
```

关于我该怎么做的任何想法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-28T08:24:28.197

您可以使用标题渲染器。可以创建自定义渲染器。

# mysql-workbench - 如何在列之间绘制关系线？

> ID：14946161
> 
> 赞同：15
> 
> 时间：2013-02-18T22:06:08.063
> 
> 标签：mysql-workbench

MySQL Workbench 中是否有任何选项可以绘制列而不是表之间的关系线？如果我将图表导出为 JPG，我看不到哪些列是外键以及它们与谁相关。

在屏幕截图中，您看不到 id 和 user_id 是连接的。

![在此处输入图像描述](../Images/32fb208cb202e2b2955ca259a7b7cf6d.png)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-11-29T10:31:26.583

在主菜单栏中，转到：模型 -> 关系表示法 -> 连接到列。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T16:22:29.087

我不确定 MySQL Workbench 是否可以在列之间绘制关系线，但您可以知道**Primary Key**显示为**Key Symbol**，**Foreign Key**显示为**Red Diamond Symbol**。

# zend-framework2 - Zend Framework 2 的多个表

> ID：14946165
> 
> 赞同：8
> 
> 时间：2013-02-18T22:06:28.577
> 
> 标签：zend-framework2

我是 Zend Framework 2 的新手。我成功完成了 ZF2 的专辑教程。现在我想只显示数据库中多个表中的特定数据。我有一个带有表格的简单数据库设置，例如人员、书籍、状态等。数据库应该做什么并不重要。我想知道的是，是否有一个教程可以向我展示显示表连接数据的分步指南。我已经看到了显示如何进行连接的代码片段，但我还没有找到任何关于设置类以及如何配置 Module.php 的教程。换句话说，Album 中的模块在 getServiceConfig() 中有一个硬编码的表名。但是我该如何设置它才能知道我正在从多个表中请求数据。另外，如果我想建立关系，我是否仍然像专辑教程中那样为数据库表创建类，还是会有所不同。你能帮忙，或者告诉我正确的路径吗？如果您知道任何解释处理多个表的教程，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T08:07:25.460

alums 教程使用`Zend\Db\TableGateway`不支持加入多个表。

您需要`Zend\Db`直接使用或通过映射器类使用，例如`AbstractDbMapper`在 ZfcBase 模块中。

基本用法如下所示：

```
<?php

// Given that $dbAdapter is an instance of Zend\Db\Adapter\Adapter

use Zend\Db\Sql\Select();
use Zend\Db\ResultSet\ResultSet();

$select = new Select();
$select->from('album')
   ->columns(array('album.*', 'a_name' => 'artist.name'))
   ->join('artist', 'album.artist_id' = 'artist.id');

$statement = $dbAdapter->createStatement();
$select->prepareStatement($dbAdapter, $statement);
$driverResult = $statment->execute();

$resultset = new ResultSet();
$resultset->initialize($driverResult); // can use setDataSource() for older ZF2 versions.

foreach ($resultset as $row) {
        // $row is an ArrayObject
} 
```

该`join()`方法用于执行`album`和`artist`表之间的连接。我们还用于`columns()`选择返回哪些列。`a_name`在这种情况下，我为艺术家表中的`name`列创建了一个别名。

一旦`Select`设置了对象，剩下的就是标准`Db`代码，它将`ResultSet`为您返回一个包含数据的对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T09:18:52.107

只是为了扩展 Rob 的出色答案，更进一步并填充多个对象以形成您需要的关系很简单。

```
<?php

// Given that $dbAdapter is an instance of Zend\Db\Adapter\Adapter

use Zend\Db\Sql\Select();
use Zend\Db\ResultSet\ResultSet();

$select = new Select();
$select->from('album')
   ->columns(array('album.*', 'artist.*'))
   ->join('artist', 'album.artist_id' = 'artist.artist_id');

$statement = $dbAdapter->createStatement();
$select->prepareStatement($dbAdapter, $statement);
$driverResult = $statement->execute(); // execute statement to get result

$resultset = new ResultSet();
$resultset->setDataSource($driverResult);

$albumHydrator = new AlbumHydrator;
$artistHydrator = new ArtistHydrator;

foreach($resultset as $row) { // $row is an ArrayObject
    $album = $albumHydrator->hydrate($row);
    $artist = $artistHydrator->hydrate($row);
    $album->setArtist($artist);
} 
```

您还应该查看水合结果集以直接从 ResultSet 为您构建对象：

[http://framework.zend.com/manual/2.0/en/modules/zend.db.result-set.html](http://framework.zend.com/manual/2.0/en/modules/zend.db.result-set.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-01T05:08:34.853

```
use Zend\Db\Sql\Select;
$select = new Select();
// or, to produce a $select bound to a specific table
// $select = new Select('foo');

$select->join(
     'foo' // table name,
     'id = bar.id', // expression to join on (will be quoted by platform object before insertion),
     array('bar', 'baz'), // (optional) list of columns, same requiremetns as columns() above
     $select::JOIN_OUTER // (optional), one of inner, outer, left, right also represtned by constants in the API
);

$select->from(array('f' => 'foo'))  // base table
    ->join(array('b' => 'bar'),     // join table with alias
    'f.foo_id = b.foo_id');         // join expression 
```

# java - Unicode 数字的字符类

> ID：14946167
> 
> 赞同：4
> 
> 时间：2013-02-18T22:06:43.537
> 
> 标签：java, regex

我需要创建一个`Pattern`匹配所有 Unicode 数字和字母字符的。到目前为止我有`"\\p{IsAlphabetic}|[0-9]"`。

第一部分对我来说效果很好，它很好地将非拉丁字符识别为字母字符。问题是下半场。显然它只适用于阿拉伯数字。字符类`\\d`和`\p{Digit}`也只是`[0-9]`。的 javadoc`Pattern`似乎没有提到 Unicode 数字的字符类。有没有人有一个很好的解决这个问题的方法？

出于我的目的，我会接受一种方法来匹配`Character.isDigit`返回的所有字符集`true`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T22:12:15.143

引用Java[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#isDigit%28int%29)：`isDigit`

> 如果 getType(codePoint) 提供的一般类别类型为 DECIMAL_DIGIT_NUMBER，则该字符是数字。

所以，我相信匹配数字的模式应该是[`\p{Nd}`](http://en.wikipedia.org/wiki/Unicode_character_property#General_Category).

这是 ideone 的一个[工作示例](http://ideone.com/jnxtlR)。如您所见，结果在 和 之间是一致`Pattern.matches`的`Character.isDigit`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-25T18:23:21.183

使用`\d`, 但带有`(?U)`标志以启用预定义字符类和 POSIX 字符类的 Unicode 版本：

```
(?U)\d+ 
```

或在代码中：

```
System.out.println("3๓३".matches("(?U)\\d+")); // true 
```

使用`(?U)`相当于通过[`Pattern.compile()`](https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html#compile-java.lang.String-int-)使用[`UNICODE_CHARACTER_CLASS`](https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html#UNICODE_CHARACTER_CLASS)标志调用来编译正则表达式：

```
Pattern pattern = Pattern.compile("\\d", Pattern.UNICODE_CHARACTER_CLASS); 
```

# amazon-ec2 - Amazon ELB HealthyHostCount 不是整数

> ID：14946168
> 
> 赞同：0
> 
> 时间：2013-02-18T22:06:43.407
> 
> 标签：amazon-ec2, amazon, load-balancing

![在此处输入图像描述](../Images/088c80d217c287bb2ef6bd00f485fd34.png)

我很好奇这怎么可能。一个实例要么是健康的，要么是不健康的，它不可能是部分健康的，不是吗？

# android - Places Autocomplete API 从输入的地址获取 GPS 坐标

> ID：14946169
> 
> 赞同：15
> 
> 时间：2013-02-18T22:06:45.490
> 
> 标签：android, google-places-api, google-geocoder, google-geocoding-api

我的应用程序中有一个地址字段，用户需要在其中输入所需的地址。我使用 google Geocoder 来获取地址的 GPS 坐标。但现在我想通过使用 Places Autocomplete 让用户更轻松。但是 Places Autocomplete 只返回地址、Id 和地址的引用。

有没有办法使用 Places Autocomplete API 获取用户选择的地址的 GPS 坐标？用户从 Places Autocomplete 中选择他的地址后，我是否必须再次使用 Geocoder？

或者我应该在用户选择他的地址后再次使用 Places API 来获取地址的 GPS 坐标吗？由于使用限制，我不想向 Places API 发送多个请求。. 这是 Places API 的预期响应。响应中没有 GPS 坐标。

```
"status": "OK",
  "predictions": [ {
    "description": "Paris, France",
    "id" : "691b237b0322f28988f3ce03e321ff72a12167fd",
    "reference": "CiQYAAAA0Q_JA...kT3ufVLDDvTQsOwZ_tc",
    "terms": [ {
      "value": "Paris",
      "offset": 0
    }, {
      "value": "France",
      "offset": 7
    } ],
    "types": [ "geocode" ],
    "matched_substrings": [ {
      "offset": 0,
      "length": 5
    } ]
  }, {
    "description": "Paris, TX, United States",
    "id" : "518e47f3d7f39277eb3bc895cb84419c2b43b5ac",
    "reference": "CjQjAAAAHnbxZZ...BDR3iIOFdMTxwo1jHg",
    "terms": [ {
      "value": "Paris",
      "offset": 0
    }, {
      "value": "TX",
      "offset": 7
    }, {
      "value": "United States",
      "offset": 11
    } ],
    "types": [ "geocode" ],
    "matched_substrings": [ {
      "offset": 0,
      "length": 5
    } ]
  }, {
    "description": "Paris, Ontario, Canada",
    "id" : "e7ac9c89d4a590305242b0cb5bf43064027223c9",
    "reference": "CjQhAAAAIv_YWYt...F8KZHY36TwMrbyu_g",
    "terms": [ {
      "value": "Paris",
      "offset": 0
    }, {
      "value": "Ontario",
      "offset": 7
    }, {
      "value": "Canada",
      "offset": 16
    } ],
    "types": [ "geocode" ],
    "matched_substrings": [ {
      "offset": 0,
      "length": 5
    } ]
  } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T17:23:20.740

您只需使用 Places API 的[Place Details](https://developers.google.com/places/documentation/details)部分，使用“reference”值从每个建议中的引用中获取实际位置。例如：

```
https://maps.googleapis.com/maps/api/place/details/json?reference=CiQYAAAA0Q_JA...kT3ufVLDDvTQsOwZ_tc&sensor=true&key=AddYourOwnKeyHere 
```

这将为您提供有关该地点的信息，包括其坐标（特定位置的点，区域的边界）。

# c# - 用空值声明用户定义的类型常量有什么用？

> ID：14946172
> 
> 赞同：2
> 
> 时间：2013-02-18T22:06:55.107
> 
> 标签：c#, types, reference, constants

```
public class TestClass
{
    const MyType SOMECONSTANT = null;

    protected string TestString { get; set; }    
}

public class MyType
{
    protected string FieldA { get; set; }
} 
```

上面的代码是有效的并且可以编译。为什么 C# 允许使用 引用`const`类型`null`？我该如何使用它`SOMECONSTANT`，因为这将`null`永远存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:13:17.047

它可以用作占位符，在开发周期后期的某个时间点保存指定对象的实例。通常，常量被用作比较的东西。采用这个想法并假设程序员 B 稍后将实现和实例化对象 PERFECT_TYPE 你可以说类似

```
const MyType PERFECT_TYPE = null; 
```

后来我可能有

```
if (myInstance.Equals(TestClass.PERFECT_TYPE)) { /*do stuff*/ } 
```

虽然在这种情况下我会指出你需要一个实现，`MyType.Equals()`但你明白了。这样的事情在存根中并不少见，尤其是在敏捷开发中。我会说存根更有可能是一个属性而不是一个常量，但是，每个工具都有它的用途......

# zend-form - 保存表单集合中的数据

> ID：14946174
> 
> 赞同：0
> 
> 时间：2013-02-18T22:06:59.620
> 
> 标签：zend-form, zend-framework2, zend-db

我一直在关注[http://framework.zend.com/manual/2.1/en/modules/zend.form.collections.html](http://framework.zend.com/manual/2.1/en/modules/zend.form.collections.html)，它在验证等方面效果很好。

当表单有效时，指南只会在实体上运行**var_dump**，它看起来像这样：

```
object(Application\Entity\Product)[622]
  protected 'name' => string 'Chair' (length=5)
  protected 'price' => string '25' (length=2)
  protected 'categories' =>
    array (size=2)
      0 =>
        object(Application\Entity\Category)[615]
          protected 'name' => string 'Armchair' (length=8)
      1 =>
        object(App1ication\Entity\Category)[621]
          protected 'name' => string 'Office' (length=6) 
```

类别可以多于 2 个或仅 1 个。如何将普通表单保存到我理解的数据库表中并且没有问题。但是这里我们有两个不同表的数据。我想我可以手动读取控制器中的类别并将它们填充到模型中并逐行保存它们。但这感觉不是最好的方法。

如何将数据从实体获取到模型或我的数据库？没有教义可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T08:15:32.063

您有两个选择：`getData()`或`bind()`。

`bind()`是“自动”方式 - 您将实体绑定到表单对象，该对象在该实体上具有与您的集合名称匹配的属性。然后，当`isValid()`调用表单的方法时，绑定机制会将集合元素中的值传递给实体上的匹配属性。

或者，您可以`getData()`在集合对象上使用，然后执行您需要的任何操作。

拥有实体后，要保存它，请考虑使用[ZfcBase](https://github.com/ZF-Commons/ZfcBase)，因为它为您完成了艰苦的工作。

这是一个简单的示例映射器：

```
namespace MyModule\Mapper;

use ZfcBase\Mapper\AbstractDbMapper;
use Zend\Stdlib\Hydrator\ArraySerializable;
use MyModule\Entity\MyEntity;

class MyMapper extends AbstractDbMapper
{
    protected $tableName  = 'my_table';

    public function __construct()
    {
        $this->setHydrator(new ArraySerializable());
        $this->setEntityPrototype(new MyEntity());
    }

    public function save(MyEntity $entity)
    {
        if (!$entity->getId()) {
            $result = $this->insert($entity);
            $entity->setId($result->getGeneratedValue());
        } else {
            $where = 'id = ' . (int)$entity->getId();
            $this->update($entity, $where);
        }
    }

    public function fetchAll($choiceGroupId)
    {
        $select = $this->getSelect($this->tableName);
        return $this->select($select);
    }

    public function loadById($id)
    {
        $select = $this->getSelect($this->tableName)
                       ->where(array('id' => (int)$id));

        return $this->select($select)->current();
    }        
} 
```

此映射器正在使用`ArraySerializable`hydrator，因此您的实体对象（`MyEntity`在示例中）必须实现方法`getArrayCopy()`和`populate()`. `getArrayCopy()`返回要保存`populate()`的数据数组，用于从数据库的数据数组中填充实体。

# maven - 部署到存储库预构建工件 Maven

> ID：14946176
> 
> 赞同：0
> 
> 时间：2013-02-18T22:07:15.973
> 
> 标签：maven

我已经`mvn install`在我的项目上运行，然后最后我想运行`mvn deploy -P profile1`以从项目中部署选择性模块。

问题是当**我只想部署已经编译的工件时， mvn deploy 会重新执行构建。**

我怎么做？

# java - 如何在 Java 中向多页 Tiff 添加文本并保持图像比例？

> ID：14946178
> 
> 赞同：1
> 
> 时间：2013-02-18T22:07:26.817
> 
> 标签：java, text, add, tiff

尝试将文本添加到多页（多图像）tiff 文件。

使过程正确添加了文本，但创建的图像不等于内容更改的原始缩放（比例）。我不知道如何使它等于原始图像。

这是我使用的代码：

```
File file = new File("AA005E57.tif");                           
SeekableStream seekableStream = new FileSeekableStream(file);          
BufferedImage bsrc = ImageIO.read(file);          

ImageDecoder decoder = ImageCodec.createImageDecoder("tiff", seekableStream, null);
int numPages = decoder.getNumPages();
BufferedImage image[]= new BufferedImage[numPages];        
for(int i=0;i<decoder.getNumPages();i++){
    PlanarImage op1 =    new NullOpImage(decoder.decodeAsRenderedImage(i), null, null, OpImage.OP_IO_BOUND);

    BufferedImage pg1 = convertRenderedImage(op1);// (new BufferedImage(op1.getWidth(), op1.getHeight(),BufferedImage.TYPE_BYTE_BINARY));
    image[i] = pg1;
    Graphics2D g2 = image[i].createGraphics();
    float pageWidthInch = image[i].getWidth() * 72 / 200;
    float pageHeightInch = image[i].getHeight() * 72 / 100;
    g2.scale(pageWidthInch, pageHeightInch);
    if (i == 0 ){
        Font font = new Font("Helvetica", Font.BOLD, 12);
        g2.setColor(Color.black);
        g2.setFont(font);
        g2.drawString("RADICADO 1234567890214365-D", 25,pg1.getHeight()-25);
    }

    g2.drawImage(image[i], (image[i].getWidth()),image[i].getHeight() ,null);

    g2.dispose();
}
save(image,"C:/Prueb-18.tif"); 
```

代码`convertRenderedImage`：

```
if (img instanceof BufferedImage) {
    return (BufferedImage)img;  
}   

ColorModel cm = img.getColorModel();

float pageWidthInch = img.getWidth() * 72 / 200;
float pageHeightInch = img.getHeight() * 72 / 100;

WritableRaster raster = cm.createCompatibleWritableRaster( (int)pageWidthInch,(int)pageHeightInch);
boolean isAlphaPremultiplied = cm.isAlphaPremultiplied();
Hashtable properties = new Hashtable();
String[] keys = img.getPropertyNames();
if (keys!=null) {
    for (int i = 0; i < keys.length; i++) {
        properties.put(keys[i], img.getProperty(keys[i]));

    }
}
BufferedImage result = new BufferedImage(cm, raster, false, properties);
img.copyData(raster);

return result; 
```

保存方法的代码：

```
Iterator writers = ImageIO.getImageWritersByFormatName("TIFF");

if (writers == null || !writers.hasNext()) {
    throw new RuntimeException("No writers are available.");
}

FileImageOutputStream fios = new FileImageOutputStream(new File(tif));

ImageWriter writer = (ImageWriter) writers.next();
writer.setOutput(fios);
writer.prepareWriteSequence(null);
ImageWriteParam param = writer.getDefaultWriteParam();  
param.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);  
param.setCompressionType("CCITT T.4");
for (int i = 0; i < b.length; i++) {
    ImageTypeSpecifier imageType = ImageTypeSpecifier.createFromRenderedImage(b[i]);            
    IIOMetadata imageMetadata = writer.getDefaultImageMetadata(imageType, param);
    imageMetadata = createImageMetadata(imageMetadata);
    writer.writeToSequence(new IIOImage(b[i], null, imageMetadata),param);      
}

writer.endWriteSequence();
writer.dispose();
writer = null;
fios.close();

} 
```

createImageMetadata 的代码：

```
char[] COMPRESSION = new char[] { (char) BaselineTIFFTagSet.COMPRESSION_CCITT_T_4 };
char[] INCH_RESOLUTION_UNIT = new char[] { 2 };
char[] BITS_PER_SAMPLE = new char[] { 1 };
long[][] X_DPI_RESOLUTION = new long[][] { { 200, 1 } };
long[][] Y_DPI_RESOLUTION = new long[][] { { 200, 1 } };

TIFFDirectory ifd = TIFFDirectory.createFromMetadata(imageMetadata);

BaselineTIFFTagSet base = BaselineTIFFTagSet.getInstance();

TIFFTag tagResUnit = base.getTag(BaselineTIFFTagSet.TAG_RESOLUTION_UNIT);
TIFFTag tagXRes = base.getTag(BaselineTIFFTagSet.TAG_X_RESOLUTION);
TIFFTag tagYRes = base.getTag(BaselineTIFFTagSet.TAG_Y_RESOLUTION);

TIFFTag tagBitSample = base.getTag(BaselineTIFFTagSet.TAG_BITS_PER_SAMPLE);

TIFFTag tagRowStrips = base.getTag(BaselineTIFFTagSet.TAG_ROWS_PER_STRIP);

TIFFTag tagCompression = base.getTag(BaselineTIFFTagSet.TAG_COMPRESSION);

TIFFField fieldResUnit = new TIFFField(tagResUnit, TIFFTag.TIFF_SHORT, 1, INCH_RESOLUTION_UNIT);
TIFFField fieldXRes = new TIFFField(tagXRes, TIFFTag.TIFF_RATIONAL, 1, X_DPI_RESOLUTION);
TIFFField fieldYRes = new TIFFField(tagYRes, TIFFTag.TIFF_RATIONAL, 1, Y_DPI_RESOLUTION);
TIFFField fieldBitSample = new TIFFField(tagBitSample, TIFFTag.TIFF_SHORT, 1, BITS_PER_SAMPLE);
TIFFField fieldCompression = new TIFFField(tagCompression, TIFFTag.TIFF_SHORT, 1, COMPRESSION);

ifd.addTIFFField(fieldResUnit);
ifd.addTIFFField(fieldXRes);
ifd.addTIFFField(fieldYRes);
ifd.addTIFFField(fieldBitSample);
ifd.addTIFFField(fieldCompression);
return ifd.getAsMetadata();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:37:34.820

以下代码不一致：

```
float pageWidthInch = image[i].getWidth() * 72 / 200;
float pageHeightInch = image[i].getHeight() * 72 / 100; 
```

您的源 DPI 是 200x100 吗？输入一致；选择 100 或 200。这可能是问题的根源，尤其是因为您将两者都保存为 200 以供输出。两者都应该是相同的值，除非您的源对高度和宽度使用不同的 DPI。

请注意，此代码在您上面提交的代码中出现**了两次。**

如果需要，请在源图像上使用[AsTiffTagViewer](http://www.awaresystems.be/imaging/tiff/astifftagviewer.html)（我发现对检查 TIFF 文件非常有用的免费应用程序）来确认每个页面的适当值。

* * *

或者，在进一步审查后，您可以这样做：

```
g2.scale(pageWidthInch, pageHeightInch); 
```

您是否考虑过忽略此呼叫`g2.scale()`？

# javascript - 关于 jquery 追加行为

> ID：14946179
> 
> 赞同：1
> 
> 时间：2013-02-18T22:07:29.527
> 
> 标签：javascript, jquery

我有以下代码：

```
$.getJSON('/api/video/',
      function (resp) {
          $("body").append("<ul/>");

          $.each(resp, function (key, value) {
              $("ul").append("<li/>").append(
                  $("<a/>", {
                      href: value.url,
                      html: value.title
                  }));
          });
      }); 
```

它产生：

```
...
<ul>
    <li></li>
    <a href="http://vimeo.com/1234567">How to Connect a Mobile Broadband Antenna to Data Card</a>
    <li></li>
    <a href="http://www.youtube.com/watch?v=q4Oknc8onG8">40000mW Laser vs. Line of Balloons!!</a>
</ul>
... 
```

正如你所看到的`<a/>`，不在里面`<li/>`，我的问题是为什么（这种行为有充分的理由还是只是这样工作）？在我的世界里面`$("ul").append("<li/>").append($("<a/>", ...))`加了一个。我认为它在无序列表内部创建了一个，并且下一个附加操作对该项目进行操作，因此应该在其中添加链接。然而事实并非如此，我想知道这是否有原因？`<a/>``<li/>``$("ul").append("<li/>")``<li/>``<li/>`

我非常感谢您抽出时间来回答我的问题！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T22:09:51.920

该`.append()`函数不会更新 jQuery 对象引用的元素，因此当您调用第二个时`.append()`，它仍然会针对该`<ul>`元素调用。

你可以像这样重组它：

```
$('<li/>').append('<a/>', {
    href: value.url,
    title: value.title
}).appendTo('ul'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:09:17.647

`$.append()`返回附加到的项目，而不是附加的项目。

# php - 无需身份验证的 Youtube 上传

> ID：14946180
> 
> 赞同：1
> 
> 时间：2013-02-18T22:07:30.050
> 
> 标签：php, api, youtube

我正在对 Youtube API 进行一些研究，但尚未找到我的问题的（否定或肯定）答案。Youtube API Doc 确实给出了一些关于如何进行基于浏览器上传的答案。我对该解决方案的问题是它将用户发送到 youtube-url，并且在上传完成后，它会重定向到我的网站。我想以某种方式跳过必须发送到 Youtube 然后再返回的步骤。

对我来说，理想的解决方案是：

1.  我将用户名和密码保存在我的数据库中。我还保存了用户应该将视频上传到的播放列表的 ID/名称
2.  当用户想要上传视频时，他或她不必对自己进行身份验证，因为已经通过我保存在数据库中的用户名和密码进行了身份验证。Så 他或她选择他们要上传的视频，并将其上传到我也保存到我的数据库中的播放列表中。

我现在不知道这是否可能-所以我想这就是我要问的-甚至可能吗？

另一个解决方案是：

1.  用户将电影上传到我的站点/服务器
2.  一些 cronjob 然后将视频上传到我的频道和特定的播放列表。

那可能吗？

# python - 如何从列表数组 Python 打印

> ID：14946187
> 
> 赞同：-4
> 
> 时间：2013-02-18T22:07:53.030
> 
> 标签：python

我想知道如何从 Python 上的列表数组中获取打印，这就是我目前所拥有的；

```
op =  raw_input('Please enter a number: ')

lista = {"1":"cat",
       "2":"dog"}

for id, value in lista.iteritems():
    print id, value, op 
```

基本上，当您在`op`（例如数字 1）中输入内容时，它会从`lista`

代码`print id, value, op`打印了整个事情，我知道它确实，这只是来自测试列表数组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:09:59.083

你可以这样做：

`print lista[op]`

但是，如果您的字典具有整数键，则可以简单地转换`op`为`int`诸如：`lista[int(op)]`。

您的示例不起作用的原因是它遍历了整个字典的 K:V 并打印了它们。

# android - 什么会导致游标失败？

> ID：14946188
> 
> 赞同：0
> 
> 时间：2013-02-18T22:08:03.107
> 
> 标签：android, android-cursor

我正在使用 Eclipse 创建一个 Android 应用程序并尝试使用 a`Cursor`来查询 SQLite 数据库。我不知道是什么导致这个游标失败：

```
public List<Word> getAllWords() {
    List<Word> words = new ArrayList<Word>(); 

    Cursor cursor = db.query(TABLE_NAME, new String[] {FIELD_PRIMARY_DEFINITION}, null, null, null, null, null);
    cursor.close();

    return words;
} 
```

当我运行此代码时，我的 Android 模拟器说程序已停止。当我注释掉光标行时，它运行良好。数据库存在，表存在，`TABLE_NAME`包含正确的表名和`FIELD_PRIMARY_DEFINITION`包含列名。我有什么遗漏会导致失败吗？

谢谢你。

我不熟悉 Logcat，我是 Android 开发的新手。但是我对我的应用程序名称进行了过滤，它显示了以下内容：

```
02-18 22:26:08.447: I/jdwp(20692): Ignoring second debugger -- accepting and dropping
02-18 22:26:15.107: W/Trace(20989): Unexpected value from nativeGetEnabledTags: 0
02-18 22:26:15.148: W/Trace(20989): Unexpected value from nativeGetEnabledTags: 0
02-18 22:26:15.187: D/AndroidRuntime(20989): Shutting down VM
02-18 22:26:15.187: W/dalvikvm(20989): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
02-18 22:26:15.247: E/AndroidRuntime(20989): FATAL EXCEPTION: main
02-18 22:26:15.247: E/AndroidRuntime(20989): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.source.wordCollector/com.source.wordCollector.MainActivity}: java.lang.NullPointerException
02-18 22:26:15.247: E/AndroidRuntime(20989):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-18 22:26:15.247: E/AndroidRuntime(20989):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-18 22:26:15.247: E/AndroidRuntime(20989):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-18 22:26:15.247: E/AndroidRuntime(20989):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-18 22:26:15.247: E/AndroidRuntime(20989):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-18 22:26:15.247: E/AndroidRuntime(20989):    at android.os.Looper.loop(Looper.java:137)
02-18 22:26:15.247: E/AndroidRuntime(20989):    at android.app.ActivityThread.main(ActivityThread.java:5039)
02-18 22:26:15.247: E/AndroidRuntime(20989):    at java.lang.reflect.Method.invokeNative(Native Method)
02-18 22:26:15.247: E/AndroidRuntime(20989):    at java.lang.reflect.Method.invoke(Method.java:511)
02-18 22:26:15.247: E/AndroidRuntime(20989):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-18 22:26:15.247: E/AndroidRuntime(20989):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-18 22:26:15.247: E/AndroidRuntime(20989):    at dalvik.system.NativeStart.main(Native Method)
02-18 22:26:15.247: E/AndroidRuntime(20989): Caused by: java.lang.NullPointerException
02-18 22:26:15.247: E/AndroidRuntime(20989):    at com.source.dal.WordDAO.getAllWords(WordDAO.java:75)
02-18 22:26:15.247: E/AndroidRuntime(20989):    at com.source.wordCollector.MainActivity.onCreate(MainActivity.java:23)
02-18 22:26:15.247: E/AndroidRuntime(20989):    at android.app.Activity.performCreate(Activity.java:5104)
02-18 22:26:15.247: E/AndroidRuntime(20989):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-18 22:26:15.247: E/AndroidRuntime(20989):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:33:34.957

尝试记录并检查您正在编写的动态查询，并确保没有语法错误。大多数情况下，这可能会导致 android 光标失败。

还要确保与数据库的连接是打开的。我建议你看看这篇文章：

[www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

# perl - 转写为 ASCII 时遇到问题

> ID：14946190
> 
> 赞同：2
> 
> 时间：2013-02-18T22:08:07.763
> 
> 标签：perl, unicode, ascii, iconv

我正在尝试处理一个包含城市名称列表的文件。我的目标是输出一个将这些城市名称音译成标准 ASCII 的列表。出于某种原因，我只是不断遇到问题。我一直在研究 iConv 和 Perl 中的 Text::Unidecode 库，但都让我失望了。

以下是我将调用的文件中的城市名称的示例列表ities.txt：

```
Måløv
Magtenbølle
Zvonarëvka
Denver
Zvëzdka
New York 
```

运行它`iconv`会返回以下内容：

`iconv -fUTF-8 -tASCII//TRANSLIT//IGNORE cities.txt`

```
Mal?v
Magtenb?lle
Zvonarevka
Denver
Zvezdka
New York 
```

这在一些非 ascii 字符上效果很好，但失败了，尤其是在`ø`字符上。我的列表有几千个条目——虽然我实际上没有研究过比小样本集更大的结果，但我确信还有其他失败。

我的 perl 尝试如下所示：

```
#!/usr/bin/perl
use strict;
use warnings;
use utf8;
use Text::Unidecode;

while (<>) {
  print unidecode $_;
} 
```

那里的输出如下所示：

```
MAY=lA,v
MagtenbA,lle
ZvonarA<<vka
Denver
ZvA<<zdka
New York 
```

奇怪的是，如果我使用直接语句，Perl 确实可以工作。例如

```
...
print unidecode("Måløv"); 
```

将按我的预期输出“Malov”。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T22:17:23.417

您需要将输入读取为 UTF-8。根据[这个问题](https://stackoverflow.com/questions/519309/how-do-i-read-utf-8-with-diamond-operator)，尝试添加

```
use open qw(:std :utf8); 
```

在你的`while(<>)`循环之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T01:07:02.550

你也可以试试：

```
use utf8::all; 
```

[utf8::all](https://metacpan.org/module/utf8%3a%3aall)将打开 Unicode - 全部。

# c# - Silverlight only makes one http request

> ID：14946194
> 
> 赞同：1
> 
> 时间：2013-02-18T22:08:21.923
> 
> 标签：c#, silverlight, caching, browser, httpwebrequest

I'm working on a Silverlight app which among other things makes Http requests in which it uploads a zip file from the web server. The zip file is picked up from the web server every n:th minute, a behavior controlled by a timer.

I've tried using the `WebClient` and `HttpWebRequest` classes with the same result. The request only reaches the web server the first time. The second, third, ..., time the request is sent and a response will occur. However, the request never reaches the web server...

```
 void _timer_Tick(object sender, EventArgs e)
    {
        try 
        {
            HttpWebRequest req = WebRequest.CreateHttp(_serverUrl + "channel.zip");
            req.Method = "GET";

            req.BeginGetResponse(new AsyncCallback(WebComplete), req);
        }
        catch (Exception ex)
        {

            throw ex;
        }
    }

    void WebComplete(IAsyncResult a)
    {

        HttpWebRequest req = (HttpWebRequest)a.AsyncState;
        HttpWebResponse res = (HttpWebResponse)req.EndGetResponse(a);
        Stream stream = res.GetResponseStream();

        byte[] content = readFully(stream);
        unzip(content);

    } 
```

Is there some kind of browser caching issue here? I want every request I make to go all the way to the web server.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:16:27.420

是的，浏览器可能正在缓存请求。如果您想禁用它，您可以修改服务器以发送`Cache-Control: no-cache`标头，或者您可以在 URL 中附加某种唯一性，以防止浏览器缓存请求：

```
void _timer_Tick(object sender, EventArgs e)
{
    try 
    {
        HttpWebRequest req = WebRequest.CreateHttp(_serverUrl + "channel.zip?_=" + Environment.TickCount);
        req.Method = "GET";

        req.BeginGetResponse(new AsyncCallback(WebComplete), req);
    }
    catch (Exception ex)
    {
        throw ex;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:18:57.060

可能是您的计时器冻结，而不是网络请求。在您的计时器事件中添加一个`Debug.WriteLine`，确保它被多次调用。

将计时器用于后台任务也是一个坏主意。与其使用计时器，不如创建一个在请求之间休眠的后台任务。这样即使服务器请求太长也不会导致调用重叠。

尝试以下方式：

```
BackgroundWorker worker = new BackgroundWorker();
worker.DoWork+=(s,a)=>{
   try{
      while (true)// or some meaningful cancellation condition is false
      {
          DownloadZipFile();
          Sleep(FiveMinutes);
          // don't update UI directly from this thread
      }
   } catch {
      // show something to the user so they know automatic check died
   }
};
worker.RunAsync(); 
```

# django - 如何在 django 中提升 404 令人讨厌

> ID：14946196
> 
> 赞同：2
> 
> 时间：2013-02-18T22:08:25.250
> 
> 标签：django

`django-annoying`当我使用's时如何出现 404 错误`@render_to`？

例如：

```
@render_to('page.html')
def v_page(request, page_id):
    page = get_object_or_None(Page, id=page_id)
    if page:
         return {'page': page}
    # raise 404 here 
```

我阅读`django-annoying`了文档并没有找到答案。我想答案应该很明显，但对我来说并不明显。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:11:31.357

[请参见此处](https://docs.djangoproject.com/en/dev/topics/http/views/#the-http404-exception)，[get_object_or_404](https://docs.djangoproject.com/en/dev/intro/tutorial03/#a-shortcut-get-object-or-404)更适合这种情况。

```
from django.http import Http404

@render_to('page.html')
def v_page(request, page_id):
    page = get_object_or_None(Page, id=page_id)
    if page:
         return {'page': page}

    # raise 404 here
    raise Http404 
```

# javascript - 如何在每次通过 for 循环时增加动画延迟

> ID：14946197
> 
> 赞同：6
> 
> 时间：2013-02-18T22:08:25.320
> 
> 标签：javascript, jquery, for-loop, jquery-animate, delay

首先，我创建了一个基本演示，说明我目前在[这里](http://jsfiddle.net/ybs76/)拥有的东西。

其次，这是我正在使用的 javascript。

```
var boxes = ["#one","#two","#three","#four"];

boxhover = function(a){
    $("#hover").hover(
        function(){
            $(a).stop(true).delay(250).animate({opacity:1});
        },
        function(){
            $(a).stop(true).delay(250).animate({opacity:0});
        }
    )
}

for(var i=0; i<boxes.length; i++)
{
    boxhover(boxes[i])
} 
```

我希望实现的是让每个框一个接一个地悬停，延迟时间为 250。我尝试为动画功能添加延迟（如上所示）以及 for 中的 setTimeout循环，但没有运气。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:18:19.030

您可以将数组索引作为附加参数传递给您的`boxhover`函数，然后对延迟因子执行乘法运算。

```
var boxes = ["#one","#two","#three","#four"];

boxhover = function(a, i){
    $("#hover").hover(
        function(){
            $(a).stop(true).delay(250 * i).animate({opacity:1});
        },
        function(){
            $(a).stop(true).delay(250 * i).animate({opacity:0});
        }
    )
}

for(var i=0; i<boxes.length; i++)
{
    boxhover(boxes[i], i)
} 
```

[jsfiddle](http://jsfiddle.net/TtgvU/)

**替代解决方案：**

为避免绑定多个悬停事件处理程序`#hover`并不得不维护一组 ID，您可以执行以下操作：

```
$("#hover").on({
    'mouseenter': function(e) {
        // Animate the box set to visible
        animateBoxSet(1);
    },
    'mouseleave': function(e) {
        // Animate the box set to invisible
        animateBoxSet(0);
    }
});

function animateBoxSet(opacity) {
    // For each box
    $('.box').each(function (index, element) {
        // Set the delay based on the index in the set
        var delay = 250 * index;
        // Animate it the visibility after the delay
        $(element).stop(true).delay(delay).animate({
            'opacity': opacity
        });
    });
} 
```

[jsfiddle](http://jsfiddle.net/UadnF/2/)

# jquery - 在动态创建的 ul 上使用 photoswipe

> ID：14946200
> 
> 赞同：0
> 
> 时间：2013-02-18T22:08:33.910
> 
> 标签：jquery, photoswipe

我正在开发一个 jquery 移动网站，该网站将拥有一个由 instagram 中的 JSON/AJAX 填充的图片库。我可以很好地加载图像，但我想更进一步并使用 photoswipe 来渲染画廊。我遇到的问题是，如果我在`ul`从 json 提要填充之后添加对 photoswipe 的调用，`ul`实际上并没有重绘，所以 photoswipe 找不到任何要使用的子元素。下面是我的脚本：

HTML

```
<div data-role="page" id="Photos">
<div data-role="header">
    <a href="javascript:history.go(-1)" data-icon="back" data-direction="reverse">Back</a>      
    <h1>Photos</h1>
</div>
<div data-role="content">   
    <div id="AdBanner">
    </div>
    <ul id="PhotoList">
    </ul>
</div>
</div> 
```

脚本

```
$("#Photos").live("pagebeforeshow", function(){
    $("ul#PhotoList").children().remove('li');
    var tag = MyTag
    $.getJSON("https://api.instagram.com/v1/tags/" + tag + "/media/recent?callback=?&amp;client_id=####",
    function(data){
        $.each(data.data, function(i,item){
            $("ul#PhotoList").append('<li><a href="' + item.images.low_resolution.url + ' rel="external"><img src="' + item.images.low_resolution.url + '" alt="' + item.caption.text + '" width="200" /></a></li>');
        });
    });
    var photoSwipeInstance = $("ul#PhotoList a").photoSwipe();
}); 
```

有没有办法`ul`在调用 photoswipe 发起者之前刷新，或者我应该使用另一个事件来进行 photoswipe 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T02:17:22.017

我确信这不是这个问题的“正确”答案，但我确实找到了一种解决方法来获得我想要的功能。我没有使用 jquery ul.append 添加列表项，而是使用变量将列表项添加到变量中，然后将 UL.innerhtml 设置为变量：

```
var Photos = "";
$.each(data.data, function(i,item){
    Photos += '<li><a href="' + item.images.low_resolution.url + '"><img src="' + item.images.low_resolution.url + '" alt="' + item.caption.text + '" width="80" /></a></li>';
});
document.getElementById('PhotoList').innerHTML = Photos; 
```

同样，我确信这不是正确的方法，但它对我有用，并且在没有更好的解决方案的情况下，它完成了工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:37:12.087

您是在页面加载*之前还是在加载**之后*通过 JSON/AJAX 加载图像？

如果在页面加载之前，您是否查看了在 JavaScript 中加载图像并将其附加到 PhotoSwipe 实例的示例代码？

例如。[http://www.photoswipe.com/latest/examples/12-custom-target.html](http://www.photoswipe.com/latest/examples/12-custom-target.html)

# javascript - 为什么在这个例子中原型函数的执行上下文（“this”）是错误的？

> ID：14946201
> 
> 赞同：2
> 
> 时间：2013-02-18T22:08:34.293
> 
> 标签：javascript, node.js, this, anonymous-function

原型函数`bar`在其他地方执行，在 Node.js 环境中（[`bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)应该可用）。我希望**`this`内部`bar()`函数成为我的对象的实例**：

```
var Foo = function (arg) {
    this.arg = arg;

    Foo.prototype.bar.bind(this);
};

Foo.prototype.bar = function () {
    console.log(this); // Not my object!
    console.log(this.arg); // ... thus this is undefined
}

var foo = new Foo();
module.execute('action', foo.bar); // foo.bar is the callback 
```

...为什么`bar()`记录`undefined`而`this`不是我的实例？为什么调用没有改变执行上下文`bind`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T22:10:08.220

[`Function.bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)返回一个值 - 新绑定的函数 - 但您只需丢弃该值。`Function.bind`不会改变`this`（即它的调用上下文），也不会改变它的参数 ( `this`)。

> 有没有其他方法可以获得相同的结果？

在构造函数内部执行它实际上是错误的，因为`bar`存在于`Foo.prototype`，因此将其绑定到任何一个实例`Foo`都会中断`this`所有其他`Foo.bar`调用！将其绑定到您想要的*位置*：

```
module.execute('action', foo.bar.bind(foo)); 
```

或者——甚至更简单——根本不定义`bar`原型：

```
var Foo = function (arg) {
    this.arg = arg;

    function bar () {
        console.log(this);
        console.log(this.arg);
    }

    this.bar = bar.bind(this);
};

var foo = new Foo();
module.execute('action', foo.bar); 
```

# python - Using Python to copy Flask requests to another Flask app

> ID：14946204
> 
> 赞同：3
> 
> 时间：2013-02-18T22:08:54.997
> 
> 标签：python, flask

Let's say I have a Flask app running. When someone goes to any page, or makes any sort of request on the page, I want that request to be copied to another Flask app. Is there an already existing Flask plugin that would allow me to do so?

By copy I mean this:

My app is test.com. I have another Flask app running on a private machine on a private IP. When I get a GET request on test.com, I want the same GET request to be sent to the Flask app on the private app.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T06:56:01.447

正如其他人在评论中所说，最好的代理是您的 Web 服务器提供的代理。但是有时您实际上需要您的 Web 应用程序来执行代理，在这种情况下，请参阅以下答案：[Proxying to another web service with Flask](https://stackoverflow.com/questions/6656363/proxying-to-another-web-service-with-flask/6666585#6666585)

# php - 将值从 php 传递给 javascript

> ID：14946206
> 
> 赞同：-1
> 
> 时间：2013-02-18T22:09:09.153
> 
> 标签：php, javascript

JS 函数需要一个由 PHP 生成的变量。.js 文件不能解释`<?php ?>`字符串，所以我必须从 .html 代码中传递它。

是的，但是从 HTML 运行 JS 代码被认为是不好的做法（就像`style`元素一样）。那该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:20:01.650

> .js 文件无法解释`<?php ?>`字符串

所以给文件一个`.php`扩展名。（确保通过调用覆盖 PHP 的默认 Content-Type 输出`header()`。

> 但是从 HTML 运行 JS 代码被认为是不好的做法（就像样式元素一样）。

那是因为内联 JS 不利于缓存。如果文件是动态生成的，那么您可能无论如何都无法正常缓存它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:11:46.897

您可以使用[echo](http://php.net/manual/en/function.echo.php)执行以下操作：

```
<? echo('<script type="text/javascript">var hello="world"</script>'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T22:16:58.140

有几个选项。首先，您可以构建您的第一个示例。

```
<?php

$myVariable = array('key' => 'value', 'anotherKey' => 10);

?>

// PHP variable output in javascript's object syntax
var phpData = <?php echo json_encode($myVariable); ?>;

// value
console.log(phpData.key);
// 10
console.log(phpData.anotherKey); 
```

另一种选择是使用对 PHP 脚本的 Ajax 请求来检索数据。根据您的问题，此选项很可能不会有用，因为您在页面加载时拥有数据。

# php - Minecraft RCON 从 Web 服务器运行时不工作，但从 localhost 工作

> ID：14946209
> 
> 赞同：0
> 
> 时间：2013-02-18T22:09:15.570
> 
> 标签：php, remote-access, minecraft, bukkit

我有一个脚本应该从我的网络服务器远程将我的 Minecraft 服务器上的人列入白名单。

此脚本在从我的本地主机运行时完美运行，但在我的 Web 服务器上运行时运行良好（连接超时）。有什么可以让这发生的吗？

```
<?php

    require('../private/config.php');
    function connectDB($user, $pass, $db) {
        try {   
            return(new PDO("mysql:host=localhost;dbname=" . $db . ";charset=utf8", $user, $pass));
        } catch(PDOException $ex) {
            return $ex;
        }
    }
    $db = connectDB($dbUser, $dbPass, $dbName);
    if ($db instanceof PDOException) {
        die ($db->getMessage());
    }

    if(!isset($_GET['user']) || $_GET['user']=='') {
        die('User undefined.');
    }
    if(!isset($_GET['pw']) || $_GET['pw']=='') {
        die('Not Authorised.');
    }
    if($_GET['pw']!=$whitelistpassword) {
        die('Not Authorised.');
    }

    $user = $_GET['user'];

    define( 'MQ_SERVER_ADDR', '[ip]' );
    define( 'MQ_SERVER_PORT', 25605 );
    define( 'MQ_SERVER_PASS', 'passwordtest' );
    define( 'MQ_TIMEOUT', 5 );

    require 'MinecraftQuery/MinecraftRcon.class.php';

    try
    {
        $Rcon = new MinecraftRcon;

        $Rcon->Connect( MQ_SERVER_ADDR, MQ_SERVER_PORT, MQ_SERVER_PASS, MQ_TIMEOUT );

        $Data = $Rcon->Command("whitelist add ".$user);

        if($Data===false) {
            throw new MinecraftRconException("Failed to get command result.");
        }
        else if(StrLen($Data)==0) {
            throw new MinecraftRconException("Got command result, but it's empty.");
        }

        //echo HTMLSpecialChars($Data);
    }
    catch( MinecraftRconException $e )
    {
        header('Location: approve.php?pw='.$whitelistpassword);
        die('Error');
    }
    $Rcon->Disconnect();

    $sql = "UPDATE `Applications` SET `Approved` = 1 WHERE `Minecraft` = :user";
    $stmt = $db->prepare($sql);
    $stmt->bindParam(':user', $user);
    $stmt->execute();
    header('Location: approve.php?pw='.$whitelistpassword);
?> 
```

每次我从网络服务器运行它时，它都会超时。然后我的世界服务器崩溃了。

预期：“用户”已添加到白名单（来自本地主机）实际来自 Web 服务器：

```
Warning: fsockopen() [function.fsockopen]: unable to connect to [ip]:25605 (Connection timed out) in /home/dooog/public_html/MinecraftQuery/MinecraftRcon.class.php on line 38

Warning: Cannot modify header information - headers already sent by (output started at /home/dooog/public_html/MinecraftQuery/MinecraftRcon.class.php:38) in /home/dooog/public_html/whitelistsend.php on line 57 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T00:52:28.553

据我所知，在尝试连接到远程数据库时，您必须首先允许远程计算机进行连接。这是通过将远程计算机添加到 PHPmyAdmin 中的权限列表来完成的，假设您正在运行新版本的 mySQL。

完成此操作后，您应该能够在网络服务器和 MC 数据库之间进行通信。

# ruby-on-rails - ruby 开发工具包的问题

> ID：14946215
> 
> 赞同：1
> 
> 时间：2013-02-18T22:09:52.347
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-4, rubygems

我在使用从 ruby​​installer.org/downloads 获得的 DevKit 时遇到了问题。我正在按照[https://github.com/oneclick/rubyinstaller/wiki/development-kit](https://github.com/oneclick/rubyinstaller/wiki/development-kit)的说明进行操作。当我通过运行来测试我的安装时，`gem install rdiscount --platform=ruby`我得到以下信息：

```
 C:\DevKit>gem install rdiscount --platform=ruby
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing rdiscount:
        ERROR: Failed to build gem native extension.

        "C:/Program Files/ruby-1.9.2/bin/ruby.exe" extconf.rb
checking for random()... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
        --with-opt-dir
        --without-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=C:/Program Files/ruby-1.9.2/bin/ruby
        --with-rdiscount-dir
        --without-rdiscount-dir
        --with-rdiscount-include
        --without-rdiscount-include=${rdiscount-dir}/include
        --with-rdiscount-lib
        --without-rdiscount-lib=${rdiscount-dir}/lib
C:/Program Files/ruby-1.9.2/lib/ruby/1.9.1/mkmf.rb:368:in `try_do': The complier
 failed to generate an executable file. (RuntimeError)
You have to install development tools first.
        from C:/Program Files/ruby-1.9.2/lib/ruby/1.9.1/mkmf.rb:435:in `try_link
0'
        from C:/Program Files/ruby-1.9.2/lib/ruby/1.9.1/mkmf.rb:440:in `try_link
'
        from C:/Program Files/ruby-1.9.2/lib/ruby/1.9.1/mkmf.rb:552:in `try_func
'
        from C:/Program Files/ruby-1.9.2/lib/ruby/1.9.1/mkmf.rb:797:in `block in
 have_func'
        from C:/Program Files/ruby-1.9.2/lib/ruby/1.9.1/mkmf.rb:693:in `block in
 checking_for'
        from C:/Program Files/ruby-1.9.2/lib/ruby/1.9.1/mkmf.rb:280:in `block (2
 levels) in postpone'
        from C:/Program Files/ruby-1.9.2/lib/ruby/1.9.1/mkmf.rb:254:in `open'
        from C:/Program Files/ruby-1.9.2/lib/ruby/1.9.1/mkmf.rb:280:in `block in
 postpone'
        from C:/Program Files/ruby-1.9.2/lib/ruby/1.9.1/mkmf.rb:254:in `open'
        from C:/Program Files/ruby-1.9.2/lib/ruby/1.9.1/mkmf.rb:276:in `postpone
'
        from C:/Program Files/ruby-1.9.2/lib/ruby/1.9.1/mkmf.rb:692:in `checking
_for'
        from C:/Program Files/ruby-1.9.2/lib/ruby/1.9.1/mkmf.rb:796:in `have_fun
c'
        from extconf.rb:5:in `<main>'

Gem files will remain installed in C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9
.1/gems/rdiscount-2.0.7 for inspection.
Results logged to C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/rdiscount
-2.0.7/ext/gem_make.out 
```

如果您需要更多信息，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:22:32.307

将开发工具包安装在带有空格的目录中会带来麻烦。

不要使用`C:/Program Files`其他目录，例如`C:/ProgramFiles`或`C:/bin`...

也可以看看

*   [在 Windows 7 x64 上安装 Ruby、Rails 和 DevKit 的问题 - 需要修复](https://stackoverflow.com/questions/11559912/issues-installing-ruby-and-rails-and-devkit-on-windows-7-x64-fix-needed)
*   [找不到捆绑命令。糟糕的翻译](https://stackoverflow.com/questions/10575644/bundle-command-not-found-bad-interpreter/10575692#10575692)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:34:14.210

我把它放在这里是因为评论中没有足够的空间。

我过去遇到过这样的问题。我能够通过它们，但我很快发现运行 RoR 应用程序的服务器是基于 linux 的。我发现 Windows 中的开发环境运行良好，但在将其推送到生产环境时遇到了一堆问题。为了解决这个问题，我将 DevKit 安装在一个无法确定的路径中。我最终在 C:\railskit 下安装了所有东西

从那时起，在过去的几年里，我一直使用这些工具来开发 RoR 应用程序

*   VirtualBox - 虚拟化开发环境
*   Ubuntu - 开发操作系统
*   KiTTY - 基于 Windows 的 SSH 工具（基于 PuTTY）
*   SublimeText2 - Windows 版本

I installed Ruby on Rails in a development environment and used Samba to share the development folder. I SSH into the box with KiTTY and use that to generate the different controllers and to run the webrick service. I do all of the coding within SublimeText2 within Windows.

# c# - 设置 ViewSheetSetting.InSession.Views 属性

> ID：14946217
> 
> 赞同：1
> 
> 时间：2013-02-18T22:10:00.827
> 
> 标签：c#, revit, revit-api

有没有人处理过设置`InSession.Views`属性？我遇到的问题是，当我在打开文档后立即设置以下属性时，它不起作用（即视图大小仍然为 0，即使`viewSet`有 4 个项目）。

```
revitDocument.PrintManager.ViewSheetSetting.InSession.Views = viewSet; 
```

但是在使用中的打印对话框修改会话中视图/工作表集`revit`之后，我可以分配给它。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-08T15:36:48.513

Revit 将当前视图图纸集存储在变量`Document.PrintManager.ViewSheetSetting.CurrentViewSheetSet`中，这就是它真正使用的 . 在您设置的开始时，`InSession`您应该设置`CurrentViewSheetSet`。使用打印对话框后它工作的原因是它设置`CurrentViewSheetSet`为`InSession`. 我要做的是`ViewSheetSetting`在文档打开时创建一个临时文件，然后在文档关闭时将其删除。下面是我使用的一些代码，尽管我只保留`ViewSheetSetting`了单个函数调用的范围，而不是从文档打开到文档关闭。

**开放式**

```
const string tempoarySheetSetSettingName = "Temp Sheet Set";

ViewSheetSetting viewSheetSetting = _printManager.ViewSheetSetting;

//Save your temporary sheet set
_printManager.ViewSheetSetting.SaveAs(tempoarySheetSetSettingName);

ViewSheetSet selected = null;

FilteredElementCollector viewCollector = new FilteredElementCollector(document);
viewCollector.OfClass(typeof(ViewSheetSet));

//Find the sheet set that you just created
foreach (ViewSheetSet set in viewCollector.ToElements())
{
  if (String.Compare(set.Name, tempoarySheetSetSettingName) == 0)
  {
    selected = set;
    break;
  }
}

//Set the current view sheet set to the one that you just created
viewSheetSetting.CurrentViewSheetSet = selected;

//Set the views to which ever set you would like to print
viewSheetSetting.CurrentViewSheetSet.Views = viewSetToPrint;
viewSheetSetting.Save(); 
```

**印刷用**

您的用户将需要选择您在打印时创建的临时视图集。

**关闭**

```
_printManager.ViewSheetSetting.Delete(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-02T12:09:03.333

在使用 VB.Net 的 Revit 2015 中，我无法强制此 ViewSheetSet Collector 像这样工作：

```
Dim VSSCollector As New FilteredElementCollector(curDoc)
VSSCollector.OfClass(oftype(ViewSheetSet)) 
```

相反，我使用了它并且它有效：

```
Dim VSSCollector As New FilteredElementCollector(curDoc)
VSSCollector.OfClass(GetType(ViewSheetSet)) 
```

# macos - 这个文件应该在哪里？

> ID：14946222
> 
> 赞同：0
> 
> 时间：2013-02-18T22:10:11.407
> 
> 标签：macos, git

当我查看桌面时，我注意到文件“git-credential-osxkeychain”在那里。我假设它是一个 git 文件，但不知道它是如何最终出现在我的桌面上的。它应该在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:14:32.110

我相信它应该在 /usr/local/bin/git-credential-osxkeychain

看这篇文章： [尝试在 OSX 上安装 git：cannont exec 'git-credential-osxkeychain': Permission denied`](https://stackoverflow.com/questions/10867946/trying-to-install-git-on-osx-cannont-exec-git-credential-osxkeychain-permiss)

# php - 优化功能，加速应用

> ID：14946223
> 
> 赞同：1
> 
> 时间：2013-02-18T22:10:26.697
> 
> 标签：php, codeigniter

我使用下面的代码来检查评论中描述的一些案例。不幸的是，它降低了页面加载速度。为了改进功能并正确使用它们，您有什么建议，我该怎么办？

```
function insert() {
    if ($this - > session - > userdata('logged_in')) { //This is for test whether the user is logged in or not?
        if ($this - > siran - > access_level_active()) { //This is because the user name manager is active or not?
            if ($this - > siran - > access_level('1', '5')) { //This is for whether or not permission to access this page?
if($_POST){
                $this - > load - > view('admin/onepage');
}else{
        $this->session->set_flashdata('message_p', $this->lang->line('nopost'));
        redirect($this->session->userdata('previous_page'));
        }
            } else {
                $this - > session - > set_flashdata('message', $this - > lang - > line('notaccess'));
                redirect($this - > session - > userdata('previous_page'));
            }
        } else {
            $this - > session - > set_flashdata('message', $this - > lang - > line('noactive'));
            redirect('login', 'refresh');
        }
    } else {
        $this - > session - > set_flashdata('message', $this - > lang - > line('plslogin'));
        redirect('login', 'refresh');
    }
} 
```

库codeigniter中的这三个函数：

```
public function access_level($mp, $access){
    //$mp = '1';
    $CI = &get_instance();
            $result = $CI->db->get_where('access_level', array('mainpage'=>$mp,'id_relation'=>$CI->session->userdata('id_relation')));
    $data = array();
    $out = array();
    foreach($result->result() as $row){
        $dv = json_decode($row->subpage);       
        $flat = array();        
        foreach ( $dv as $item ) {
            $flat = array_merge( $flat, explode( ',', $item ) );
        }       
        $out = array_merge( $out, $flat );
    }
    if(in_array($access, $out) || in_array('110', $out)){
        return  true;
    }else{
        return false;
    }
}
public function access_level_active(){
    //$mp = '1';
    $CI = &get_instance();
            $result = $CI->db->get_where('users', array('id'=>$CI->session->userdata('id')));
    if ($result->num_rows() > 0){
        $row = $result->row();
        return ($row->active == 1 ? true : false );
    }else{
        return false;
    }
}
function previous_page(){
    $CI = &get_instance();
    if ($CI->session->userdata('logged_in')) {
        if (isset($_SERVER['HTTP_REFERER']))
        {
            $CI->session->set_userdata('previous_page', $_SERVER['HTTP_REFERER']);
        }else
        {
            $CI->session->set_userdata('previous_page', base_url());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:01:33.077

您的代码看起来不是特别密集，我唯一要更改的是限制您在自身内嵌套 if{}else{} 语句的次数，并将任何重复的代码移到另一个函数中。例如，我会亲自重写您的`insert()`代码如下（主要是因为它看起来更干净）。

插入功能：

```
function insert() {

    if (!$this->session->userdata('logged_in')) {
        $this->_flashRedirect('login', $this->lang->line('plslogin'));  
    }

    if (!$this->siran->access_level_active()) {
        $this->_flashRedirect('login', $this->lang->line('noactive'));  
    }

    if (!$this->siran->access_level('1', '5')) {
        $this->_flashRedirect($this->session->userdata('previous_page'), $this->lang->line('notaccess'));       
    }

    if($_POST){
        $this->load->view('admin/onepage');
    } else {
        $this->_flashRedirect($this->session->userdata('previous_page'), $this->lang->line('nopost'), 'message_p'); 
    }

} 
```

`_flashRedirect()`在控制器中创建一个新函数：

```
public function _flashRedirect($page, $message, $message_type = 'message') {
    $this->session->set_flashdata('message', $message);
    redirect($page, 'refresh');
} 
```

至于速度，听起来您的查询（mysql）更有可能是您的性能问题的原因。你要返回多少行，你的表有多大？

# arrays - 数组标识 - 是

> ID：14946225
> 
> 赞同：3
> 
> 时间：2013-02-18T22:10:32.087
> 
> 标签：arrays, identity, d

我在理解 D 中的数组标识时遇到问题。

```
Object s = null; // or new Object
auto a = [s];
auto b = [s];
writeln(a is b); // > false
writeln(a == b); // > true 
```

这打印`false`，然后`true`。我对 没有问题`==`，但在[D2 ref](http://dlang.org/expression.html)中指出

> 对于静态和动态数组，标识定义为引用相同的数组元素和相同数量的元素。

这与我所经历的行为相矛盾。`a`并且`b`两者都有一个元素 which `is s`，所以它们应该是相同的。我误解了什么吗？

**编辑：**我错误地认为*相同的数组元素*意味着它们在 D 中比较相等`is`，哪种模型的身份比较。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T22:20:31.723

在 D 中，数组是指针和长度的元组。如果它们的长度相同并且指向相同的数组，则这些数组是*相同的。*如果它们指向的内容相同，则它们*相等。*

在您的示例中，`a`and`b`是相等的，但不相同，因为它们不指向同一个数组。如果他们这样做了，修改`a[0]`也会修改`b[0]`，但它不会。

如果你有：

```
Object s = null;
auto a = [s];
auto b = a;
writeln(a is b); // > true
writeln(a == b); // > true 
```

那么它们都是真的，因为它们都引用同一个数组。此外，在这种情况下，修改`a[0]`也会修改`b[0]`。

这里的关键误解是每个数组的数组元素并不相同，它们只是引用相同的元素：

```
 s
            ^
            |
       +----+----+
       |         |
      [0]       [0]
       ^         ^
       |         |
       a         b 
```

如果它们是相同的，你会有这样的东西：

```
 s
            ^
            |
           [0]
            ^
            |
       +----+----+
       |         |
       a         b 
```

这里有多个间接级别，这可能是造成混乱的原因。

# xml - 将无限属性映射到 Excel 列

> ID：14946229
> 
> 赞同：1
> 
> 时间：2013-02-18T22:10:34.167
> 
> 标签：xml, excel

我正在尝试使用 Microsoft Excel 2003 来管理我公司历来作为原始文本保存的测试文件。我想使用 XML 映射功能，但我在努力处理 Excel 中的无限属性。我的架构的相关部分：

```
<xs:complexType name="TestCommand">
    <xs:sequence>
        <xs:element name="TrialPercenatage" minOccurs="1" maxOccurs="unbounded">
            <xs:complexType>
               <xs:simpleContent>
                   <xs:extension base="xs:integer">
                       <xs:attribute name="trial" type="xs:integer" use="required" />
                    </xs:extension>
                </xs:simpleContent>
            </xs:complexType>
        </xs:element>
    </xs:sequence>
    <xs:attribute name="type" type="TestCommandType" use="required" />
    <xs:attribute name="name" type="xs:string" use="required" />
    <xs:attribute name="parameters" type="xs:string" use="optional" />
</xs:complexType> 
```

我试图在理想情况下将单个 TestCommands 映射到行，但我正在努力弄清楚如何映射 TrialPercentages 以使其成为电子表格中的无界列。我要做什么的想法：

```
type   name   parameters    Trial1   Trial2   Trial3   Trial4

action read   arg1=2 arg2=4  33       34       35       36 
```

我遇到的问题是，如果我只是拖放属于 TestCommand 类型的架构元素，它将只允许我使用一个 Trial 列。我希望它进行映射，以便 Trial 标题成为分配给 TrialPercentage 试验属性的值，并且列中的值映射到 TrialPercentage 的值。我已经尝试了几件事来使其正常工作，但无济于事。任何见解将不胜感激。

# c - 文件选择器无法识别 GtkWindow - C

> ID：14946232
> 
> 赞同：2
> 
> 时间：2013-02-18T22:10:53.727
> 
> 标签：c, gtk

我正在尝试制作一个 C 程序的测试版本，其中用户可以使用 GTK 文件选择器加载游戏关卡。它似乎可以工作，并且确实打开了文件选择器窗口，但是当用户尝试选择文件时会崩溃。问题似乎是 GtkWindow 没有被识别为 GtkWindow，尽管被声明为：

```
GtkWidget *window;
window = gtk_window_new(GTK_WINDOW_TOPLEVEL); //initialize window 
```

然后我将它保存到 gui 结构中的窗口指针：

```
typedef struct gui gui_t;

struct gui {
    GtkWidget *window;
    GtkWidget *frame;
    GtkWidget *menu_bar;
    GtkWidget *drawing_area;
    GtkWidget *vbox;
    level_t *game;
}; 
```

然后将其传递给下面的 load_menu 回调，该回调当前仅尝试打印选定的文件名：

```
void gui_load_menu(gpointer data) {

    gui_t *gui = (gui_t *)data;

    GtkWindow *window = (GtkWindow *)(gui->window);

    GtkWidget *dialog;

    dialog = gtk_file_chooser_dialog_new("Load Level", GTK_WINDOW(window), GTK_FILE_CHOOSER_ACTION_OPEN, GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL,GTK_STOCK_OPEN, GTK_RESPONSE_ACCEPT, NULL);

    if(gtk_dialog_run(GTK_DIALOG(dialog)) == GTK_RESPONSE_ACCEPT) {
        char *filename = gtk_file_chooser_get_filename(GTK_FILE_CHOOSER(dialog));

        fprintf(stdout, "%s", filename);
    }
} 
```

这些是特定的运行时错误：

> (guitest:4445): GLib-GObject-WARNING **: 无效的不可实例化类型`guchar' in cast to`GtkWindow'
> 
> (guitest:4445): Gtk-CRITICAL **: gtk_window_set_transient_for: 断言`parent == NULL || GTK_IS_WINDOW（父）'失败

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T01:22:38.937

您需要为回调使用正确的签名，应该是

`void gui_load_menu(GtkWidget *widget, gpointer data)`

每个回调可以有不同的签名，您需要查看您使用的信号的文档以了解它是什么。我假设在这种情况下`load`是一个 GtkMenuItem，文档在这里：http: [//developer.gnome.org/gtk3/3.2/GtkMenuItem.html#GtkMenuItem-activate](http://developer.gnome.org/gtk3/3.2/GtkMenuItem.html#GtkMenuItem-activate)

# javascript - 是否有使用 Knockout 绑定页面进行更改跟踪的标准方法？

> ID：14946236
> 
> 赞同：6
> 
> 时间：2013-02-18T22:11:07.667
> 
> 标签：javascript, ajax, json, knockout.js

我有一个相当复杂的网页，其中包含各种选项卡、表单、单选按钮、下拉菜单等。所有这些都使用 Knockout.js 绑定到通过 AJAX 调用加载的非常复杂的 JavaScript 对象。当然，用户可以随心所欲地处理内容，此时他们点击“*保存*”按钮将所有更改保存回服务器。

我正在想出一个好的设计来准确跟踪页面上的更改，以便我可以实现保存。所以，我想出了一些可能的实现。

**选项 1) 只需将所有内容发回并让服务器对其进行整理：**使用此方法，我会让 Knockout 仅更新数据源。*Save*按钮将调用并将该`.toJS()`数据发送回服务器。 **优点：**它非常简单，并且在客户端上花费的工作很少。 **缺点：**服务器并不真正知道发生了什么变化，必须从数据库中加载数据进行比较，或者只是再次保存所有字段。这些字段来自多个表并具有复杂的关系。它还将整个文档视为单个原子单元。如果其他人更改了字段 A 而您更改了字段 B，则一个用户将丢失他们的更改。

**选项 2) 使用 JavaScript 比较原始数据和当前数据：**使用这种技术，当用户单击*保存*按钮时，我会系统地比较原始数据和当前数据并生成变化图。 **优点：**理想情况下，这将导致用户更改的确切内容的紧凑图表，如果没有任何更改，甚至可以无操作。 **缺点：**我绑定的数据很复杂。它由字符串、数组、对象、对象数组、具有其他对象的对象数组等组成。查找更改将是一个相当复杂的嵌套循环。

**选项 3) 在 UI 中进行更改时跟踪更改：**我必须在更改发生时观察更改，并在 UI 元素更改时保持增量。如果有任何未决的更改，*Save*按钮只会将该更改图发送到服务器。 **优点：**无需比较两个巨大的 JavaScript 对象来寻找更改，但仍然具有选项 2 的所有优点。 **缺点：** Knockout 似乎没有*使用*单个事件处理程序来监听所有更改的标准方法。我相信我将不得不求助于绑定到所有 UI 元素，或者`bindingHandlers`在 Knockout 中创建自定义来实现这种实时更改跟踪。

**我的问题：**

我的问题主要是针对 Knockout.js 专家的。是否有解决这种明显常见情况的标准方法或推荐指南？发回所有数据，甚至是未更改的数据，是一种通用设计吗？还是人们正在实施自定义变更跟踪器？Knockout 是否提供任何类型的框架来简化此要求？

**更新：**找到[这个东西](http://kochangetracker.codeplex.com/)，不确定它是否有用或者是否有人对此有任何反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-15T17:01:35.593

我为皮特·史密斯（Pete Smith）大大扩展了淘汰赛的更改跟踪器扩展...

看看这里： [https ://roysvork.wordpress.com/2014/01/12/tracking-changes-to-complex-viewmodels-with-knockout-js/](https://roysvork.wordpress.com/2014/01/12/tracking-changes-to-complex-viewmodels-with-knockout-js/)

它的工作原理是扩展可观察对象以跟踪初始状态与用户在客户端上所做的更改。我认为这非常有效，可以为用户提供实时反馈以了解他们修改了什么。在实践中，我们实际上实现了一个保存面板，它显示所有待处理的更改，甚至允许他们撤消单个更改，所有这些都是通过使用更改跟踪器的可重用功能来实现的。

```
ko.extenders.trackChange = function (target, track) {
    if (track) {
        target.isDirty = ko.observable(false);
        target.originalValue = target();
        target.subscribe(function (newValue) {
            // use != not !== so numbers will equate naturally
            target.isDirty(newValue != target.originalValue);
        });
    }
    return target;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-15T15:40:02.430

我可能会做的是采用选项 2 - 比较本身可以像字符串化 JS 对象并将其与自身的缓存版本进行比较一样简单。

[这里](https://stackoverflow.com/questions/10622707/detecting-change-to-knockout-view-model)讨论了其他几个选项。

PS也许[ko.mapping](http://knockoutjs.com/documentation/plugins-mapping.html)可以帮你管理这个JS对象的怪物？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T19:58:52.220

如果是启用/禁用保存按钮的问题，允许用户“从”该页面/状态导航，那么您可以查看[https://github.com/CodeSeven/kolite](https://github.com/CodeSeven/kolite)

检查 knockout.dirtyFlag.js

希望这可以帮助。

编辑：请记住，您应该“从不”相信来自“UI”的数据。真正的比较和验证最终会在服务器内的“受控”环境中进行。

# java - 为什么 Apache CXF 不编写自定义异常来响应？

> ID：14946239
> 
> 赞同：2
> 
> 时间：2013-02-18T22:11:24.080
> 
> 标签：java, exception, cxf

在使用 Apache CXF v2.7.3 实现 SSL 安全的 WebService 时，我想测试客户端如何处理自定义异常类（例如 MyException）。

因此我有以下服务器端方法：

```
@WebMethod
public void foo() throws MyException {
    throw new MyException("test!");
} 
```

我还配置为通过以下方式在 cxf.xml 中登录和传出消息：

```
<bean id="logInbound" class="org.apache.cxf.interceptor.LoggingInInterceptor"/>
<bean id="logOutbound" class="org.apache.cxf.interceptor.LoggingOutInterceptor"/>
<jaxws:inInterceptors>
 <ref bean="logInbound"/>
</jaxws:inInterceptors>
<jaxws:outInterceptors>
 <ref bean="logOutbound"/>
</jaxws:outInterceptors> 
```

使用客户端调用此函数会导致以下控制台输出

```
INFO: Inbound Message
----------------------------
ID: 1
Address: https://localhost:8443/WebApp/services/ClientService
Encoding: UTF-8
Http-Method: POST
Content-Type: text/xml; charset=UTF-8
Headers: {Accept=[*/*], cache-control=[no-cache], connection=[keep-alive], Content-Length=[184], content-type=[text/xml; charset=UTF-8], host=[localhost:8443], pragma=[no-cache], SOAPAction=[""], user-agent=[Apache CXF 2.7.3]}
Payload: <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><ns2:foo xmlns:ns2="http://services.client.test.cloud.org/"/></soap:Body></soap:Envelope>
--------------------------------------
18.02.2013 22:49:02 org.apache.cxf.phase.PhaseInterceptorChain doDefaultLogging
INFO: Application {http://services.client.test.cloud.org/}ClientService#{http://services.client.test.cloud.org/}foo has thrown exception, unwinding now: org.cloud.test.client.exception.MyException: test!
18.02.2013 22:49:02 org.apache.cxf.phase.PhaseInterceptorChain doDefaultLogging
INFO: Application {http://services.client.test.cloud.org/}ClientService#{http://services.client.test.cloud.org/}foo has thrown exception, unwinding now: java.lang.NullPointerException: null 
```

客户端收到“读取 XMLStreamReader 时出错”。由于“意外的EOF”。我想，服务器没有写任何响应。您知道为什么会抛出**2 个**异常以及为什么对客户端没有任何响应吗？我已经在 Apache CXF 应用程序中搜索了未重定向到客户端的异常，但找不到任何解决方案。

提前致谢！

# magento - 如何在magento的页脚中找到链接

> ID：14946241
> 
> 赞同：1
> 
> 时间：2013-02-18T22:11:32.990
> 
> 标签：magento, magento-1.7

我正在尝试在 magento 网站的页脚中找到链接，但我很难找到 phtml 文件。我在 page.xml 文件中找到了块代码

```
<block type="page/template_links" name="footer_links" as="footer_links" after="footer.newsletter" template="page/template/links.phtml"/> 
```

但我找不到文件 links.phtml 文件，我检查了当前模板

```
website/app/design/frontend/website.com/default/template/page/ 
```

但我在那里看不到任何模板文件夹。

任何人都可以帮我解决这个问题，如何找到文件，我什至尝试打开模板路径提示它没有帮助。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:38:53.717

可能会造成混淆，我 Magento 的页脚链接是通过以下两种方式之一生成的：

**1)**通过 XML 布局添加，这是添加站点地图链接等的方式，例如：

**联系人.xml**

```
<reference name="footer_links">
    <action method="addLink" translate="label title" module="contacts" ifconfig="contacts/contacts/enabled">
          <label>Contact Us</label>
          <url>contacts</url>
          <title>Contact Us</title>
          <prepare>true</prepare></action>
</reference> 
```

您可以添加更多这样的内容，或注释掉以删除每个链接

它们是使用在下面的配置中启用的标准模板文件 (template/page/template/links.phtml) 生成的。上面的每个链接定义（在不同的 xml 配置中有多个）将使用下面的模板来显示实际的 HTML 链接。

**页面.xml**

```
<block type="page/html_footer" name="footer" as="footer" template="page/html/footer.phtml">
     <!-- uncomment this to ditech them.. -->
     <block type="page/template_links" 
            name="footer_links" as="footer_links" 
            template="page/template/links.phtml" />
 </block> 
```

**2）**你会发现一个名为footer_links的静态块，其中还包含一些链接，这是为了让你更容易添加自己的链接。它们在内部启用

**cms.xml**

```
<reference name="footer">
    <block type="cms/block" name="cms_footer_links" before="footer_links">
       <!--
         The content of this block is taken from the database by its block_id.
         You can manage it in admin CMS -> Static Blocks
       -->
       <action method="setBlockId"><block_id>footer_links</block_id></action>
    </block>
</reference> 
```

这两种方法都用于生成可能令人困惑的页脚链接:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T23:16:16.007

试试这个路径：

```
/app/design/frontend/base/default/template/page/template 
```

希望对你有帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T16:36:25.210

要从页脚链接中删除“订单和退货”，我必须从 sales.xml 文件中注释掉该块

```
 <!-- <default>
       <reference name = "footer_links">
       <block type="sales/guest_links" name="return_link"/>
       <action method="addlinkBlock">
       <blockName>return_link</blockName>
       </action>
       </reference>
       </default>
   --> 
```

# java - 如何在视图/显示中模拟点击事件以进行测试？

> ID：14946250
> 
> 赞同：0
> 
> 时间：2013-02-18T22:12:08.173
> 
> 标签：java, gwt, testing, mvp

[GWT 测试](https://developers.google.com/web-toolkit/articles/mvp-architecture#testing)部分描述了如何验证`Presenter`in`Display`对象的输出，但没有解释如何反其道而行之。换句话说，我想检查当用户点击按钮时是否`Presenter`会发出正确的请求。`RPC Service``Display`

如何模拟按钮点击`Display`？触发 GWT 事件并不简单，因为它们具有受保护的构造函数。有没有办法简单地做到这一点，没有子`ClickEvent`类？

```
@Before
protected void setUp() {
    mockRpcService = mock(NegotiationServiceAsync.class);
    eventBus = new HandlerManager(null);
    mockDisplay = mock(NegotiationPresenter.Display.class);
    negotiationPresenter = new NegotiationPresenter(mockRpcService,
            eventBus, mockDisplay);
}

@Test
private void testSth() {        
    when(mockDisplay.getSuppliersEmails()).thenReturn("address@domain.com");
    when(mockDisplay.getTaskDescription()).thenReturn("This is the task to do");

    // This does not work
    mockDisplay.getSubmitButton().fireEvent(new ClickEvent());      

    verify(mockRpcService).startTask(any(NegotiationRequest.class), any(AsyncCallback.class));      
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:52:07.683

当您使用 MVP 时，您通常会在演示者中测试注入视图的模拟实现的方法，因此在您的测试中，显示什么也不做，只是向演示者提供存根方法。另一方面，您的真实显示实现应该将所有操作委托给演示者。

当用户单击提交按钮时，测试演示者行为的方法是调用演示者中的方法，如下所示：

```
@Test
private void testSth() {        
  when(mockDisplay.getSuppliersEmails()).thenReturn("address@domain.com");
  when(mockDisplay.getTaskDescription()).thenReturn("This is the task to do");

  negotiationPresenter.onSubmit();

  verify(mockRpcService).startTask(any(NegotiationRequest.class),
                                   any(AsyncCallback.class));      
} 
```

一个非常不同的情况是，如果您想使用 GWTTestCase 测试您的代码，以便您可以使用真实的视图实现，但在这种情况下，您的测试将持续很长时间，失去使用 MVP 的主要目标之一，即解耦查看以测试应该在 Presenters 中的主应用程序代码和可以在 JVM 中运行的类。

# node.js - Node.JS：处理 postdata 读取错误的正确方法是什么？

> ID：14946251
> 
> 赞同：4
> 
> 时间：2013-02-18T22:12:10.087
> 
> 标签：node.js, http, post, error-handling

如果`ServerRequest`对象发出`error`事件，则意味着无法完全接收 postdata，很可能是由于网络故障。这种类型的网络故障很可能是双向的终端，对吧？那么，我应该如何纠正我的代码？

我可以说`res.writeHead(400); res.end()`

但是有更聪明的方法吗？也许只是“什么都不做”，但不会导致内存泄漏/挂起。这似乎`request.connection.destroy()`是一个好主意，但我不确定这是否安全。

你会推荐什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T08:32:23.430

你不需要做任何事情。在内部，socket/req/res 将被销毁。最终会被垃圾收集。

您不需要发送响应代码 - 连接已经被破坏，所以它不会去任何地方。

# java - Java 代码在执行过程中冻结

> ID：14946253
> 
> 赞同：0
> 
> 时间：2013-02-18T22:12:16.537
> 
> 标签：java

我正在运行我的代码，在它说出第一个打印语句之后它会暂停。它在调用函数“插入”的地方暂停，并且根本不响应任何内容。它打印“添加狗、猫和马”，但随后停止，之后不做任何事情。

主功能

```
package assignment2;
public class Main {
    public static void main(String[] args) {
        OrderedStringList myList = new OrderedStringList(5);

        System.out.println("adding dog, cat, & horse");
        myList.Insert("dog");
        myList.Insert("cat");
        myList.Insert("horse");

        myList.Display();

        System.out.println("Value pig find = "+ myList.Find("pig"));
        System.out.println("Value horse find = "+ myList.Find("horse"));

        System.out.println("Adding mouse & rat");
        myList.Insert("mouse");
        myList.Insert("rat");

        myList.Display();

        System.out.println("myList size: "+ myList.Size());

        if (!myList.Insert("chinchilla"))
            System.out.println("Could not add chinchilla, full");

        System.out.println("Removing dog, adding chinchilla.");
        myList.Delete("dog");
        myList.Insert("chinchilla");

        myList.Display();
    }
} 
```

这是我的函数代码

```
package assignment2;
public class OrderedStringList {
    int length;
    int numUsed;
    String[] storage;
    boolean ordered;

    public OrderedStringList(int size){
        length = size;
        storage = new String[length];
        numUsed = 0;
    }

    public boolean Insert(String value){
        boolean result = false;
                int index = 0;
                if (numUsed < length) {
                    while (index < numUsed) {
                        int compare = storage[index].compareTo(value);
                        if (compare < 0)
                            index++;
                    }
                    moveItemsDown(index);
                    storage[index] = value;
                    numUsed++;
                    result = true;
                }
                return result;
    }
    private void moveItemsDown(int start){
        int index;
        for (index = numUsed-1; index >=start; index--){
            storage[index+1] = storage[index];
        }
    }

    private void moveItemsUp(int start){
        int index;
        for (index = start; index < numUsed-1; index++){
            storage[index] = storage[index+1];
        }
    }

    public boolean Find(String value){
        return (FindIndex(value) >= 0);
    }

    private int FindIndex(String value) {
        int result = -1;
        int index = 0;
        boolean found = false;
        while ((index < numUsed) && (!found)) {
            found = (value.equals(storage[index]));
            if (!found)
                index++;
        }
        if (found)
            result = index;
        return result;
    }

    public boolean Delete(String value){
        boolean result = false;
        int location;
        location = FindIndex(value);
        if (location >= 0) {
            moveItemsUp(location);
            numUsed--;
            result = true;
        }
        return result;
    }

    public void Display() {
        int index;
        System.out.println("list Contents: ");
        for (index = 0; index < numUsed; index++) {
            System.out.println(index+" "+storage[index]);
        }
        System.out.println("-------------");
        System.out.println();
    }

    public void DisplayNoLF() {
        int index;
        System.out.println("list Contents: ");
        for (index = 0; index < numUsed; index++) {
            System.out.print(storage[index]+" ");
        }
        System.out.println("-------------");
        System.out.println();
    }

    public int Size(){
        return numUsed;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T22:16:12.307

在 Insert 函数的 while 语句中，您陷入了无限循环。考虑这段代码：

```
while (index < numUsed) {
    int compare = storage[index].compareTo(value);
    if (compare < 0)
        index++;
} 
```

如果`compare >= 0`为会发生什么`index = 0`？索引不会向上增加，然后在无限期再次调用 while 循环`index = 0`。您需要在 if 语句之外增加 index 并在 if 语句中放置不同的条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:58:00.570

```
 while (index < numUsed && storage[index].compareTo(value) < 0) {
                    index++;
            } 
```

通过这样做解决了我的问题。我只是删除了 for 循环并在 while 循环上添加了一个额外的要求。

# python - 每个实例的 Python LRU 缓存装饰器

> ID：14946264
> 
> 赞同：46
> 
> 时间：2013-02-18T22:12:57.733
> 
> 标签：python, caching, decorator, lru

使用此处找到的 LRU 缓存装饰器：http: [//code.activestate.com/recipes/578078-py26-and-py30-backport-of-python-33s-lru-cache/](http://code.activestate.com/recipes/578078-py26-and-py30-backport-of-python-33s-lru-cache/)

```
from lru_cache import lru_cache
class Test:
    @lru_cache(maxsize=16)
    def cached_method(self, x):
         return x + 5 
```

我可以用它创建一个装饰类方法，但它最终会创建一个全局缓存，适用于类 Test 的**所有**实例。但是，我的意图是为每个实例创建一个缓存。因此，如果我要实例化 3 个测试，我将拥有 3 个 LRU 缓存，而不是所有 3 个实例的 1 个 LRU 缓存。

我知道这种情况发生的唯一迹象是，当在不同的类实例修饰方法上调用 cache_info() 时，它们都返回相同的缓存统计信息（鉴于它们正在与非常不同的参数进行交互，这种情况极不可能发生）：

```
CacheInfo(hits=8379, misses=759, maxsize=128, currsize=128)
CacheInfo(hits=8379, misses=759, maxsize=128, currsize=128)
CacheInfo(hits=8379, misses=759, maxsize=128, currsize=128) 
```

是否有一个装饰器或技巧可以让我轻松地让这个装饰器为每个类实例创建一个缓存？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-18T22:31:16.573

假设您不想修改代码（例如，因为您希望能够仅移植到 3.3 并使用 stdlib [`functools.lru_cache`](http://docs.python.org/3/library/functools.html#functools.lru_cache)，或者使用[`functools32`](http://pypi.python.org/pypi/functools32/)out PyPI 而不是将配方复制并粘贴到您的代码中），有一个明显的解决方案：为每个实例创建一个新的装饰实例方法。

```
class Test:
    def cached_method(self, x):
         return x + 5
    def __init__(self):
         self.cached_method = lru_cache(maxsize=16)(self.cached_method) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-02T14:47:45.547

这个怎么样：一个*函数*装饰器，它在每个实例上第一次调用它时包装方法*？*`lru_cache`

```
def instance_method_lru_cache(*cache_args, **cache_kwargs):
    def cache_decorator(func):
        @wraps(func)
        def cache_factory(self, *args, **kwargs):
            print('creating cache')
            instance_cache = lru_cache(*cache_args, **cache_kwargs)(func)
            instance_cache = instance_cache.__get__(self, self.__class__)
            setattr(self, func.__name__, instance_cache)
            return instance_cache(*args, **kwargs)
        return cache_factory
    return cache_decorator 
```

像这样使用它：

```
class Foo:
    @instance_method_lru_cache()
    def times_2(self, bar):
        return bar * 2

foo1 = Foo()
foo2 = Foo()

print(foo1.times_2(2))
# creating cache
# 4
foo1.times_2(2)
# 4

print(foo2.times_2(2))
# creating cache
# 4
foo2.times_2(2)
# 4 
```

[这是 GitHub 上的要点](https://gist.github.com/z0u/9df24dda2b1fe0613a85e7349d5f7d62)和一些内联文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-05T11:02:48.520

这些天，`methodtools`将工作

```
from methodtools import lru_cache
class Test:
    @lru_cache(maxsize=16)
    def cached_method(self, x):
         return x + 5 
```

你需要安装methodtools

```
pip install methodtools 
```

If you are still using py2, then functools32 also is required

```
pip install functools32 
```

# python - 如何使用多个函数正确绘图并设置线型？

> ID：14946265
> 
> 赞同：1
> 
> 时间：2013-02-18T22:13:04.263
> 
> 标签：python, matplotlib

我写了一个科学包，它有很多不同的绘图功能，可以计算数据然后绘制图表。我经常想在一个图中绘制几条曲线，但我不确定如何正确处理这个问题。代码可能如下所示：

```
plot_temperature_graph_of_day(day='Monday')
plot_temperature_graph_day(day='Tuesday')
plot_week_mean_temperature()
plot_temperature_graph_of_several_days(('Wednesday','Thursday')) 
```

关键是我想为这些绘图中的每一个设置线型 - 前三个函数每个生成一个绘图，第四个函数生成两个。所有的都进入同一个数字。要设置样式，我可以

*   给每个函数一个参数'linestyle'，它将给`pyplot.plot`函数
*   返回 Line2D 对象并使用`setp`
*   不要让函数进行任何绘图，只返回数据
*   提供一个执行实际绘图的回调函数

您对策略有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:52:31.067

从用户的角度来看，我个人的偏好是有一个合理的默认值，并且可以访问包的内部，这样我就可以在我真的需要或想要的时候进行调整。

在这种特殊情况下，您将在 matplotlib 之上添加用户友好的功能。因此，通过不授予用户对行实例的访问权限，您还隐藏了基本包的某些功能，而在我看来，这（几乎）总是一件坏事。由于 matplotlib 本身提供了一大堆有用的`*args`and `**kwargs`，所以应该有理由不在您的功能中接受它们，而只是将它们转发到底层的绘图例程。如果用户提供了无意义的参数，那是他们的问题，而不是您的问题 --- 如果您愿意，您可以尝试捕获绘图引擎引发的异常。

此外，如果您返回的不仅仅是一条线，而是完整的`axes`实例，您可能会为某个可怜的研究生省去很多汗水，她的老板命令她在情节上添加一个网格。

# r - R中的贪心优化

> ID：14946271
> 
> 赞同：3
> 
> 时间：2013-02-18T22:13:28.777
> 
> 标签：r, optimization, greedy

我正在尝试复制 Caruana 等人[从模型库 (pdf) 中选择 Ensemble](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.60.2859&rep=rep1&type=pdf)的方法。该方法的核心是一种用于将模型添加到集成中的贪心算法（模型可以多次添加）。我已经为这个贪婪优化算法编写了一个实现，但它非常慢：

```
library(compiler)
set.seed(42)
X <- matrix(runif(100000*10), ncol=10)
Y <- rnorm(100000)

greedOpt <- cmpfun(function(X, Y, iter=100){
  weights <- rep(0, ncol(X))

  while(sum(weights) < iter) {

    errors <- sapply(1:ncol(X), function(y){
      newweights <- weights
      newweights[y] <- newweights[y] + 1  
      pred <- X %*% (newweights)/sum(newweights)
      error <- Y - pred
      sqrt(mean(error^2))
    })

    update <- which.min(errors)
    weights[update] <- weights[update]+1
  }
  return(weights/sum(weights))
})

system.time(a <- greedOpt(X,Y)) 
```

我知道 R 不能很好地循环，但我想不出任何方法可以在没有循环的情况下进行这种类型的逐步搜索。

有什么改进这个功能的建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T00:05:20.127

我尝试编写此函数的 Rcpp 版本：

```
library(Rcpp)
cppFunction('
  NumericVector greedOptC(NumericMatrix X, NumericVector Y, int iter) {
    int nrow = X.nrow(), ncol = X.ncol();
    NumericVector weights(ncol);
    NumericVector newweights(ncol);
    NumericVector errors(nrow);
    double RMSE;
    double bestRMSE;
    int bestCol;

    for (int i = 0; i < iter; i++) {
      bestRMSE = -1;
      bestCol = 1;
      for (int j = 0; j < ncol; j++) {
        newweights = weights + 0;
        newweights[j] = newweights[j] + 1;
        newweights = newweights/sum(newweights);

        NumericVector pred(nrow);
        for (int k = 0; k < ncol; k++){
          pred = pred + newweights[k] * X( _, k);
        }

        errors = Y - pred;
        RMSE = sqrt(mean(errors*errors));

        if (RMSE < bestRMSE || bestRMSE==-1){
          bestRMSE = RMSE;
          bestCol = j;
        }
      }

      weights[bestCol] = weights[bestCol] + 1;
    }

    weights = weights/sum(weights);
    return weights;
  }
') 
```

它的速度是 R 版本的两倍多：

```
set.seed(42)
X <- matrix(runif(100000*10), ncol=10)
Y <- rnorm(100000)
> system.time(a <- greedOpt(X, Y, 1000))
   user  system elapsed 
  36.19    6.10   42.40 
> system.time(b <- greedOptC(X, Y, 1000))
   user  system elapsed 
  16.50    1.44   18.04
> all.equal(a,b)
[1] TRUE 
```

不错，但我希望在从 R 跃迁到 Rcpp 时能有更大的加速。这是我写过的第一个 Rcpp 函数，所以也许可以进一步优化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T02:03:30.127

这是一个比你的快 30% 的 R 实现。不如你的 Rcpp 版本快，但也许它会给你一些想法，结合 Rcpp 会进一步加快速度。两个主要改进是：

1.  循环`sapply`已被矩阵公式取代
2.  矩阵乘法已被递归替换

* * *

```
greedOpt <- cmpfun(function(X, Y, iter = 100L){

  N           <- ncol(X)
  weights     <- rep(0L, N)
  pred        <- 0 * X
  sum.weights <- 0L

  while(sum.weights < iter) {

      sum.weights   <- sum.weights + 1L
      pred          <- (pred + X) * (1L / sum.weights)
      errors        <- sqrt(colSums((pred - Y) ^ 2L))
      best          <- which.min(errors)
      weights[best] <- weights[best] + 1L
      pred          <- pred[, best] * sum.weights
  }
  return(weights / sum.weights)
}) 
```

另外，我认为您应该尝试升级到 atlas 库。您可能会看到显着的改进。

# ruby - 访问红宝石块内的厨师资源

> ID：14946273
> 
> 赞同：8
> 
> 时间：2013-02-18T22:13:39.887
> 
> 标签：ruby, chef-infra

我一直试图在厨师文档和谷歌中找到这个问题的答案，但我一直没有想出任何东西。我（还）不是一个红宝石人，所以这个问题的答案可能源于我用“刚刚足够的红宝石给厨师”来解决这个问题。这就是我想要做的：在我的`deploy`资源中，在`before_migrate`属性中，我想在我当前的配方中执行一个资源。我目前正在做的只是将资源填充到块本身中，但我知道必须有更好的方法来做到这一点。

```
before_migrate do

    template "#{app_root}/#{applet_name}/local_settings.py" do
        source "local_settings.py.erb"
        owner app_config['user']
        group app_config['group']
        variables(
            :database_name => app_config['postgresql']['database_name'],
            :user => app_config['postgresql']['user'],
            :password => app_config['postgresql']['password']
        )   
        action :create
    end 
end 
```

我的目标是

```
before_migrate do
    "template #{app_root}/#{applet_name}/local_settings.py".execute
end 
```

所以我可以重用那个模板代码。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:19:22.203

感谢#chef IRC 频道中的好人，我解决了我的问题。通知资源需要直接访问，使用

`Chef::Resource::Notification.new("template[#{app_root}/#{applet_name}/local_settings.py", :create)`

这将通知`template`资源运行`:create`操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T14:50:00.813

您可以在“部署”资源之外指定资源，但没有任何操作，然后在 *before_migrate* 中执行以下操作：

```
 before_migrate do

        ruby_block "notify_template" do
            block do
              true
            end
            action :create
            notifies :create, "template[#{app_root}/#{applet_name}/local_settings.py]", :immediately
        end

     end 
```

这样，您可以在需要时通知它。

# sql - SQL - 透视/取消透视？

> ID：14946275
> 
> 赞同：0
> 
> 时间：2013-02-18T22:13:40.213
> 
> 标签：sql, sql-server-2008

我在 SQL Server 2008 中有一个表格，格式如下（简化格式）：

```
日期里程费用
```

我想得到这样的结果

```
        上周 当前周 差异
英里        

成本
```

我怎样才能做到这一点？我是否需要枢轴/取消枢轴或什么是实现这一目标的最简单和性能有效的方法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:20:15.987

```
SELECT 'Miles' AS Type, SUM(CASE WHEN date = lastweek THEN miles ELSE 0 END) as lastweek
, SUM(CASE WHEN date = thisweek THEN miles ELSE 0 END) as thisweek
SUM(CASE WHEN date = lastweek THEN miles ELSE 0 END) - SUM(CASE WHEN date = thisweek THEN miles ELSE 0 END) as variance
FROM yourtable
UNION
SELECT 'Cost' AS Type, SUM(CASE WHEN date = lastweek THEN cost ELSE 0 END) as lastweek
, SUM(CASE WHEN date = thisweek THEN cost ELSE 0 END) as thisweek
SUM(CASE WHEN date = lastweek THEN cost ELSE 0 END) - SUM(CASE WHEN date = thisweek THEN cost ELSE 0 END) as variance
FROM yourtable 
```

这不是 100% 正确，但语法应该是正确的，并且应该让您非常接近您正在寻找的内容

# xcode - xcode 4.6 符号可见性

> ID：14946276
> 
> 赞同：0
> 
> 时间：2013-02-18T22:13:46.187
> 
> 标签：xcode, export, visibility, xcode4.6

我对在 xcode 4.6 中隐藏符号有一点问题或误解。我在网上到处搜索，找不到任何有相同问题的帖子。

目前我已经创建了一个框架项目，其中包含一个简单的头文件，其中包含：

```
class Test
{
public:

    Test(){}
    Test(){}
};

int a(int n) {return n;}

__attribute__((visibility("hidden"))) int b(int n) {return n;}

__attribute__((visibility("default"))) int c(int n) {return n;}

class X
{
public:
    virtual ~X();
};

class __attribute__((visibility("hidden"))) Y
{
public:
    virtual ~Y();
};

class __attribute__((visibility("default"))) Z
{
public:
    virtual ~Z();
};

X::~X() { }
Y::~Y() { }
Z::~Z() { } 
```

在项目设置中，我确保将“默认隐藏的符号”切换为“是”，因此只有函数 int c 和 z 类将被导出或对其他项目可见。

我构建了没有错误或警告的框架，然后将其复制/添加到可可应用程序中进行测试。

我能够包含头文件，但我仍然能够访问所有类和函数。

我希望有人能解释我为什么或哪里出错或以前遇到过这个问题？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:16:03.547

您的问题是，您在**头文件**中声明所有内容。这意味着即使未导出符号，当您将头文件导入另一个文件时，这些符号也会在您导入头文件的项目中重新创建，因此它们当然在该项目中可用。

我试图通过一个更简单的示例向您解释这一点。假设您有两个文件，MyLib.h 和 MyLib.c。

MyLib.h：

```
int add(int a, int b); 
```

MyLib.c：

```
int add(int a, int b) { return a + b }; 
```

如果您现在提供`add`可见`hidden`性并将所有内容编译到库 ( `MyLib`) 中，则该库将没有符号 for `add`（因为它是隐藏的）。结果，如果你包含`MyLib.h`到另一个文件中，调用那里的`add`函数并最终链接这个文件`MyLib`，你会得到一个链接器错误，因为链接器会抱怨它找不到一个实现`add`（它只有一个声明来自 H 文件）。

但是，如果您将函数打包到标头本身中，那么 MyLib.h 是：

```
int add(int a, int b) { return a + b }; 
```

并且您提供`add`了`hidden`可见性，该库也将没有符号`add`，但是当您将标头包含到另一个文件中时，此标头将`add`在导入它的文件中创建一个符号，因此您当然不会收到链接器错误并且能够打电话`add`。

导入 H 文件只是将 H 文件的全部内容复制到找到导入指令的位置。现在考虑一下：如果您将问题中 H 文件的全部内容复制到包含它的文件的顶部，那么在当前项目中声明的所有符号当然都是可见和可用的。为什么它们不可见或不可用？它们不在库中，是的，但它们在标头中，因此在编译其他项目时会被编译。

应该在当前项目之外不可见的符号（“隐藏”符号）永远不应出现在框架的任何公共头文件中。为什么要宣布头文件中存在无论如何都不能使用的符号？实际上，在大多数情况下，不暴露头文件中的符号已经足以阻止人们使用它们。不导出它们的原因只是如果符号存在，则可以使用它，即使它没有被任何头文件公开（因此您只需要编写自己的头文件或`external`直接在代码中将其声明为符号）。因此，隐藏符号只是一种保障措施，以确保它在任何情况下都无法使用。

# javascript - 通过电子表格中的数据创建帐户 - 谷歌应用

> ID：14946279
> 
> 赞同：0
> 
> 时间：2013-02-18T22:13:51.990
> 
> 标签：javascript, google-apps-script, google-docs, google-apps

我正在编写一个简单的脚本，该脚本在域的控制面板中创建一个帐户 - 例如 Gmail - 我正在寻找谷歌应用程序脚本中的一个函数，该函数在将数据插入电子表格时自动创建一个帐户

我搜索了互联网，但我确实找到了这个：[https](https://developers.google.com/apps-script/class_usermanager) ://developers.google.com/apps-script/class_usermanager ，我使用的方法是：`var user = UserManager.createUser("john.smith", "John", "Smith", "password` 我的问题是，如何从我拥有的电子表格中插入参数. 抱歉，如果这听起来有点愚蠢，我只是 Google 应用程序脚本的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:27:26.977

要从电子表格中读取，您将使用[SpreadsheetApp](https://developers.google.com/apps-script/service_spreadsheet)。

读取一组行的示例。（假设所有行）。

```
var sheet = SpreadsheetApp.getActiveSheet();
var data = sheet.getDataRange().getValues(); 
```

`.getValues()`返回一个二维数组。所以你可以通过`data[rowNum][colNum]`. 假设您想将每一行添加为新用户，您可以这样做

```
for (var i in data) {
  UserManager.createUser(data[i][0], data[i][1], data[i][2], data[i][3]);
} 
```

您将如何运行所述脚本？您可以将所有内容放在某个函数 ( `function addAllUsers()`) 中，然后从脚本编辑器的运行菜单中运行它。

# c++ - 数据成员和成员函数的对齐以提高性能

> ID：14946281
> 
> 赞同：1
> 
> 时间：2013-02-18T22:13:55.510
> 
> 标签：c++, performance, optimization, alignment, latency

对齐结构/类的数据成员是否真的不再产生以前的好处，尤其是在 nehalem 因为硬件改进？如果是这样，那么对齐总是会带来更好的性能，与过去的 CPU 相比，只是非常小的显着改进吗？

成员变量的对齐是否扩展到成员函数？我相信我曾经读过（它可能在维基书籍“C++ 性能”上）有规则将成员函数“打包”到各种“单元”（即源文件）中以最佳地加载到指令缓存中？（如果我在这里的术语有误，请纠正我）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T22:37:20.007

处理器仍然比 RAM 可以提供的速度快得多，因此它们仍然需要缓存。高速缓存仍然由固定大小的高速缓存行组成。此外，主内存以页的形式交付，并且使用翻译后备缓冲区访问页。同样，此缓冲区具有固定大小的缓存。

这意味着空间和时间位置都很重要（即你如何打包*东西*，以及你如何访问它）。良好地包装结构（按填充/对齐要求排序）而不是以某种随意的顺序包装它们通常会导致更小的结构尺寸。

较小的结构尺寸意味着，如果您有大量数据：

*   更多结构适合一个高速缓存行（高速缓存未命中 = 50-200 个周期）
*   需要更少的页面（页面错误 = 10-20 百万个 CPU 周期）
*   需要更少的 TLB 条目，更少的 TLB 未命中（TLB 未命中 = 50-500 个周期）

线性处理几 GB 紧密打包的 SoA 数据可能比以糟糕的布局/打包方式以幼稚的方式做同样的事情快 3 个数量级（或 8-10 个数量级，如果涉及页面错误）。

无论您是否将*单个*4 字节或 2 字节值（例如，典型的`int`or `short`）手动对齐到 2 或 4 字节，在最近的 Intel CPU 上都会产生非常小的差异（几乎不明显）。就目前而言，对此进行“优化”似乎很诱人，但我强烈建议不要这样做。
这通常是最好不要担心的事情，并留给编译器来解决。如果没有其他原因，那么因为收益充其量是微不足道的，但是如果您弄错了，其他一些处理器架构会引发异常。因此，如果你试图太聪明，一旦你在其他架构上编译，你就会突然出现无法解释的崩溃。当这种情况发生时，你会感到抱歉。

当然，如果你没有至少几十兆字节的数据要处理，你根本不需要关心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T22:37:10.783

对齐数据以适合处理器永远不会受到伤害，但某些处理器会比其他处理器具有更明显的缺点，我认为这是回答这个问题的最佳方法。

将函数对齐到高速缓存行单元对我来说似乎有点红鲱鱼。对于小型函数，如果可能的话，您真正想要的是内联。如果代码不能被内联，那么它可能比缓存行大。[当然，除非它是一个虚函数]。我不认为这曾经是一个巨大的因素 - 要么代码通常被经常调用，因此通常在缓存中，或者它不经常被调用，并且在缓存中不经常被调用。我敢肯定，可能会想出一些代码来调用一个函数，func1() 也会将 func2() 拖到缓存中，所以如果你总是连续调用 func1() 和 func2()，它会有一些好处。但它' s 真的不是什么大好处，除非你有很多函数，它们的函数对或函数组被紧密地调用在一起。[顺便说一句，我不认为编译器可以保证以任何特定的顺序放置你的函数代码，无论你把它放在源文件中的哪个顺序]。

缓存对齐是一个稍微不同的问题，因为如果你把它做对了，而不是把它弄错了，缓存行仍然会产生巨大的影响。这对于多线程来说比一般的“加载数据”更重要。这里的关键是避免在处理器之间共享同一高速缓存行中的数据。在我大约 10 年前从事的一个项目中，一个基准测试有一个函数，它使用一个由两个整数组成的数组来计算每个线程执行的迭代次数。当它被分成两个独立的缓存线时，基准测试从在单个处理器上运行的 0.6 倍提高到在一个处理器上运行的 1.98 倍。在现代 CPU 上也会发生同样的效果，即使它们速度更快 - 效果可能不完全相同，但速度会大大降低（并且共享数据的处理器越多，效果就越大，所以四核系统会比双核更差，等等）。这是因为每次处理器更新缓存行中的某些内容时，所有其他已读取该缓存行的处理器都必须从更新它的处理器[或过去从内存中]重新加载它。

# c# - 为什么 C# 中的 ArrayList 不安全？

> ID：14946286
> 
> 赞同：-4
> 
> 时间：2013-02-18T22:14:18.137
> 
> 标签：c#, arrays, collections

我最近听说`ArrayList`from`System.Collections`不安全，是什么问题？安全是：可能有错误，或者可能有不想要的行为。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T22:15:48.533

它不是强类型的，也不是固有的线程安全*。有更好的替代方案支持强类型，例如`System.Collections.Generic.List<T>`.

An`ArrayList`不支持编译时类型检查，可能会引入装箱/拆箱开销，并且通常使用起来更加混乱。它是在泛型之前引入的，从而消除了上述问题。

*   [通用列表](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)
*   [线程安全的集合](http://msdn.microsoft.com/en-us/library/dd997305.aspx)

^(*为了准确起见，ArrayList 确实公开了一个`Synchronized`提供线程安全级别的属性（[请参阅文章末尾的注释](http://msdn.microsoft.com/en-us/library/system.collections.arraylist.aspx)）。)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-18T22:16:01.390

它们不安全，因为它们不是强类型的。这意味着您在编译时不知道可以存储在其中的对象的类型。此外，您需要转换为实际类型，这意味着您只会在运行时收到错误。您应该改用通用的强类型等效项[`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)。

请看以下示例，您需要将从 ArrayList 获得的结果转换为实际类型：

```
ArrayList list = new ArrayList();
list.Add(123);
int element = (int)list[0]; 
```

如果您转换为错误的类型，事情可能会变得非常错误，并且您的程序只会在运行时崩溃。

而`List<T>`你不需要这个演员，你会得到编译时安全：

```
List<int> list = new List<int>();
list.Add(123);
int element = list[0]; 
```

现在，如果*安全*是指线程安全（与类型安全相反），那么这是完全不同的事情。两者都不是线程安全的类`ArrayList`。`List<T>`这意味着，例如，如果您尝试从一个线程读取集合，而另一个线程正在修改它，您可能会收到异常或损坏的数据。在 .NET 4.0 中，引入了[线程安全集合](http://msdn.microsoft.com/en-us/library/dd997305.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T22:18:14.123

这是不安全的，因为以下在运行时失败：

```
myArrayList.Add(new Banana());
Airplane obj = (Airplane)myArrayList[0]; 
```

编译器无法检测到您正在尝试将 Banana 用作 Airplane，因为 ArrayList 只接受并返回`object`s，而 .NET 中的所有内容都是`object`.

`ArrayList``System.Collections.Generics.List(T)`自 .NET 2.0 以来，基本上已被替换；它是一种更强类型的替换，不允许出现这种错误。

# ruby-on-rails - 有数百个资产文件时的 Rails 资产管道工作流程

> ID：14946288
> 
> 赞同：4
> 
> 时间：2013-02-18T22:14:28.860
> 
> 标签：ruby-on-rails, ruby-on-rails-3, backbone.js, ruby-on-rails-3.2, asset-pipeline

我们最近将一个 Rails 3.2 项目转换为使用资产管道。我们的应用程序使用*了许多*资产文件（约 250 个 *.js.coffee 文件、另外 200 个左右的 *.jst.hamljs 模板和约 100 个 *.css.sass 样式表）。正如您所料，这些在生产中被打包到数量少得多的资产文件中。

在开发和测试环境中，我们在重新编译和请求单个资产时处理频繁的超时和*缓慢的页面加载。*是否有更好的工作流程仍然允许自动重新编译？

我们使用默认环境设置运行，除了在开发中`debug`设置`false`：

```
config.assets.debug = false 
```

这为我们在开发中重新加载页面时节省了数百个请求，但初始编译仍然会导致超时。应该有更好的方法吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:38:33.640

一些选项：

*   限制通过使用`require_asset`. 请参阅此[问题](https://stackoverflow.com/q/13180417/178651)和 Sprockets [#90](https://github.com/sstephenson/sprockets/issues/90)。

*   预编译资产：

    ```
    $ RAILS_ENV=development bundle exec rake assets:precompile 
    ```

*   增加超时。这取决于您如何进行设置，并且可能会很痛苦和有问题，例如 Heroku[不喜欢](https://stackoverflow.com/a/11963222/178651)长[请求](https://devcenter.heroku.com/articles/request-timeout)。

*   使用更快的解释器。

*   更快的硬件/虚拟机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:22:49.780

您是否正在预编译开发中的资产？

`bundle exec rake assets:precompile`

这应该可以防止资产每次都重新编译。

# javascript - 可以用 xhr.onload 替换 xhr.onreadystatechange 来进行 AJAX 调用吗？

> ID：14946291
> 
> 赞同：56
> 
> 时间：2013-02-18T22:14:37.343
> 
> 标签：javascript, ajax, xmlhttprequest

我只需要支持主流的现代浏览器（IE10+、FF、Chrome、Safari）

我可以做这个替换，因为我想简化我的代码库：

**从：**

```
xhr.onreadystatechange = function () {
    if (this.readyState === 4) {
        if (this.status === 200) {
            o.callback(xhr.responseText);
        } else {
            return false;
        }
    } else {
        return false;
    }
}; 
```

**到：**

```
xhr.onload = function (test) {
    o.callback(xhr.responseText);
}; 
```

我觉得[MDN 文档](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)在这方面不是很清楚。

**澄清：**

我选择不使用框架。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-18T22:32:33.613

也许你看看[这个](https://stackoverflow.com/questions/9181090/does-onload-equal-to-readystate-4-in-xmlhttprequest)，看看[W3C: XMLHttpRequest](http://dvcs.w3.org/hg/xhr/raw-file/tip/Overview.html)如果你的浏览器支持 xhr.onload 也是一样的。需要 XMLHttpRequest 2)

如果 xhr.onload 不存在，您还可以编写一个模拟 xhr.onload 的包装函数。（我认为你需要覆盖`XMLHttpRequest.prototype.onload = function(args){//calling onreadystatechanges somehow}`）。如果您只支持使用 xhr.onload 的现代浏览器，那么最好的解决方案是使用**框架**（如[jquery](/questions/tagged/jquery "显示标记为“jquery”的问题")或[mootools](/questions/tagged/mootools "显示标记为“mootools”的问题") ，它为此提供包装功能。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-18T22:28:40.657

在 MDN 文档中，他们声明了以下内容

> 活动
> 
> 所有浏览器都支持将 onreadystatechange 作为 xhr 对象的属性。
> 
> 从那时起，在各种浏览器中实现了许多额外的事件处理程序（onload、onerror、onprogress 等）。这些在 Firefox 中受支持。特别是，请参阅 nsIXMLHttpRequestEventTarget 和使用 XMLHttpRequest。
> 
> 更新的浏览器，包括 Firefox，除了将 on* 属性设置为处理函数外，还支持通过标准 addEventListener API 侦听 XMLHttpRequest 事件。

所以我认为你可以假设 onreadystatechange 是要走的路，而 onload 是一个附加功能，如果浏览器支持它就可以使用它。@mr.VVoo 答案是正确的，如有疑问请坚持使用 w3c。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-20T19:41:10.503

由于最初的提问者说“我只需要支持主要的现代浏览器（IE10+、FF、Chrome、Safari）”，显然`onload`,`onerror`等是要走的路。此外，到今天`onreadystatechange`为止，它几乎已经过时了，因为您显然不会支持`onreadystatechange`它只支持的任何旧东西。

总结一下，忘掉`onreadystatechange`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-03T08:03:15.893

您可以通过这样做来清理您的第一个示例

```
xhr.onreadystatechange = function () {
    if (this.readyState === 4 && this.status === 200) {
        o.callback(xhr.responseText);
    } else {
        return false;
    }
}; 
```

请注意，如果您正在使用 else 语句做某事，您可能`onload`也想检查一下。`this.status === 200`虽然，如果您正在检查错误，还有`onerror`，您可以编写类似的内容

```
xhr.onerror = function(){
    console.log('Error: Do something else...');
} 
```

# spring - 用于测试的 spring junit 加载应用程序上下文

> ID：14946298
> 
> 赞同：28
> 
> 时间：2013-02-18T22:15:57.187
> 
> 标签：spring, junit, applicationcontext

我的 WEB-INF 目录下有一些 XML 文件：

*   歌词BaseApp-servlet.xml
*   休眠.xml
*   数据源.xml
*   豆类.xml

servlet xml 导入其他 xml 文件：

```
<import resource="dataSource.xml"/>
<import resource="hibernate.xml"/>
<import resource="beans.xml"/> 
```

我希望我的 junit4`JukeboxTest`类包含整个弹簧配置。使用默认文件名我创建了一个`JukeboxTest-content.xml`文件。最后，我不知道该放什么...

我试过了：

```
<import resource="/WEB-INF/dataSource.xml"/>
<import resource="/WEB-INF/hibernate.xml"/>
<import resource="/WEB-INF/beans.xml"/> 
```

或者

```
<import resource="classpath:./WEB-INF/dataSource.xml"/>
<import resource="classpath:./WEB-INF/hibernate.xml"/>
<import resource="classpath:./WEB-INF/beans.xml"/> 
```

和其他一些想法，但都失败了。有人可以指出我如何访问这些文件以及 spring 以什么方式解释这些文件路径？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-02-18T22:25:18.767

**选项 1**（应该是首选，因为它是最佳实践）：
重构您的配置文件`WEB-INF`并将公共部分（您也希望从集成测试访问）移动到`src/main/resources/`. 然后写入测试特定的配置文件`src/test/resources/`（如果你只需要导入几个不同的配置文件`src/main`来组装你的测试上下文，那么跳过这个，`@ContextConfiguration`最好使用）。

**选项 2**（hack）：
使用如下引用：

```
@ContextConfiguration("file:src/main/webapp/WEB-INF/dataSource.xml") 
```

**选项 3**（hack）：
如果您有一个 Maven 项目，您可以配置`maven-surefire-plugin`（在测试阶段使用）`src/main/webapp`在测试执行期间声明为附加的类路径元素。

后两个选项被认为是 hack，因为下面的文件`src/main/webapp`根本不应该在类路径上。

### 现在详细解释：

您不能按原样引用这些文件的原因`classpath:/WEB-INF/*.xml`是它们确实不在类路径中。了解您的 web 应用程序是如何打包的，以及类路径中的最终结果是什么，这一点很重要。假设一个默认的 Maven 项目结构：

1.  Java 类从`src/main/java`go 到`/WEB-INF/classes`编译后。
2.  `src/main/resources`go to的资源`/WEB-INF/classes`也是。
3.  项目依赖项转到`/WEB-INF/lib`.
4.  你所拥有的一切都`src/main/webapp`进入`/`（包的根目录）。这意味着从`src/main/webapp/WEB-INF`go 到的所有文件`/WEB-INF`，当然。

要知道的最重要的事情是，类路径将只包含`/WEB-INF/classes`一个条目，每个 jar 在`/WEB-INF/lib`. 因此，这两个位置之外的资源对于类加载器来说是完全不可见的。*直接在 下* 的 xml 配置文件也是如此`/WEB-INF`，这就是为什么引用`classpath:/WEB-INF/dataSource.xml`永远不会起作用的原因。

您可能会问自己，如果这些 xml 配置文件无法从类路径访问，那么这些 xml 配置文件是如何被 Spring 加载的呢？答案很简单：当你启动你的 webapp（而不是只执行单元/集成测试）时，它运行在一个 Servlet 容器中，它提供了对`ServletContext`（来自 Servlet API 的一个实际类）的访问，所以它`ServletContext.getResourceAsStream()`用来加载这些文件。[理解的关键是该方法的javadoc](http://tomcat.apache.org/tomcat-7.0-doc/servletapi/javax/servlet/ServletContext.html#getResourceAsStream(java.lang.String))中的以下引用：

> 此方法与使用类加载器的 java.lang.Class.getResourceAsStream 不同。此方法允许 servlet 容器从任何位置为 servlet 提供资源，而无需使用类加载器。

对不起，这变得太长了，但这就是整个故事......

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-19T07:46:40.603

尝试这个

```
@ContextConfiguration(locations = {"classpath:**/dataSource.xml",
                               "classpath:**/hibernate.xml", 
                               "classpath:**/WEB-INF/beans.xml"}) 
```

# vbscript - VBScript ASP Input-Type-Hidden，带引号的值

> ID：14946309
> 
> 赞同：1
> 
> 时间：2013-02-18T22:16:52.170
> 
> 标签：vbscript

```
<input type="text" class="originalValues" id="orig_<%=ColumnName%>" value="<%=FldValue%>"> 
```

抱歉，这是我第一次找不到我要找的东西，实际上不得不问一个问题。

我有一个隐藏输入，但如果该值包含引号 (")，vbscript 会删除其余隐藏输入值。

如何转义或替换引号？将这些原始值与 textareas 进行比较，以查看是否已进行更改并添加到审核日志中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T04:24:51.230

在 HTML 中，转义双引号的正确方法是使用`&quot;`字符实体。如果您总是使用双引号将 HTML 属性值括起来，那么您可以使用内置的 ASP 方法[`Server.HTMLEncode`](http://msdn.microsoft.com/en-us/library/ms525347%28v=vs.90%29.aspx)对引号和其他需要转换的字符进行安全编码。

```
Response.Write Server.HTMLEncode(Chr(34) & "surrounded by quotes" & Chr(34)) 
```

输出

```
&quot;surrounded by quotes&quot; 
```

* * *

实际上，更安全的方法是也替换单引号（撇号），因为它们也可用于分隔属性值。这可以通过编写一个简单的包装器`Server.HTMLEncode`并将其包含在您的函数库中来完成。

```
Function HTMLEncode(s)
    HTMLEncode = Replace(Server.HTMLEncode(s), "'", "&#39;")
End Function 
```

# macos - 为什么我在使用本地服务器时收不到使用 codeigniter 电子邮件库的电子邮件？

> ID：14946310
> 
> 赞同：1
> 
> 时间：2013-02-18T22:16:56.397
> 
> 标签：macos, codeigniter, localhost, email

我在 mac os x apache 2 服务器上使用 codeigniter 的电子邮件库。我遇到的奇怪的事情是，当我在 hostgator.com 上的实时服务器上使用它时，电子邮件会通过，但是当我在本地 apache2 服务器上运行相同的代码时，我没有收到任何电子邮件（即使在垃圾邮件箱中） ）。可能是什么问题？这是代码

```
 $this->load->library('email');
        $this->email->from('your@example.com', 'Your Name');
        $this->email->to('myemailhere@gmail.com'); 
        $this->email->subject('Email Test');
        $this->email->message('Testing the email class.');  
        if($this->email->send())
        {    
            var_export($this->email->print_debugger());
        } 
```

在本地和实时服务器上，这是 var_dump 数据

```
'Your message has been successfully sent using the following protocol: mail
From: "Your Name" 
Return-Path: 
Reply-To: "your@example.com" 
X-Sender: your@example.com
X-Mailer: CodeIgniter
X-Priority: 3 (Normal)
Message-ID: <5122a6ed242b8@example.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 8bit
=?utf-8?Q?Email_Test?=
Testing the email class. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T20:31:38.440

你可以试试这个。

在 php.ini 中指定发送邮件的路径

```
sendmail_path = "path/to/php path/to/sendmail.php" 
```

第二步——你可以尝试使用这个脚本

```
define('DIR','path/to/sendmail_dir');
$stream = '';
$fp = fopen('php://stdin','r');
while ($t = fread($fp,2048)) {
    if ($t === chr(0)) {
        break;
    }
    $stream .= $t;
}
fclose($fp);

$fp = fopen(mkname(),'w');
fwrite($fp,$stream);
fclose($fp);

function mkname($i = 0) {
    $fn = DIR.date('Y-m-d_H-i-s_').$i.'.eml';
    if (file_exists($fn)) {
        return mkname(++$i);
    } else {
        return $fn;
    }
} 
```

# cakephp - CakePHP 找到 HABTM

> ID：14946311
> 
> 赞同：2
> 
> 时间：2013-02-18T22:16:56.523
> 
> 标签：cakephp, has-and-belongs-to-many

我有 3 个模型（`User`和`Message`）`Tag`具有以下关系：

*   `User` *有很多* `Message`
*   `Message` *属于* `User`
*   `Message` *HABTM* `Tag`
*   `Tag` *HABTM* `Message`

如果用户已登录，他可能希望查看所有`Message`标记的内容。

```
$messages = $this->Message->find('all', array(
    'conditions' => array("Message.user_id" => $this->uid),
    'contain' => array(
        'Tag' => array(
            'conditions' => array(
                'Tag.id' => $activetag['Tag']['id']
            )
         )
    )); 
```

但是，此查找将返回该用户的所有消息。（两种模型都包含可包含的行为）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T01:44:31.683

子（标签）上的可包含不会对父（消息）执行过滤，这就是返回所有消息的原因。仅包含标签本身的可包含条件，在您的情况下，仍然会返回不匹配 $activeTag 的消息，但附加了空标签数组，而匹配的消息将返回一个仅包含一个标签的数组，即 $activeTag，但所有消息会被退回。

出于您的目的，CakepHP 建议使用连接函数来过滤 HABTM，它会自动为您连接 hasOne 或 belongsTo，但是当涉及到 HABTM 时，如果需要，您可能需要自己执行连接。

假设表按惯例命名：

```
$this->Message->recursive = -1;

$options['joins'] = array(
    array('table' => 'messages_tags',
        'alias' => 'MessageTag',
        'type' => 'INNER',
        'conditions' => array(
            'Message.id = MessageTag.message_id',
        )
    ) );

$options['conditions'] = array(
    'MessageTag.tag_id' => $activetag['Tag']['id'],
    'Message.user_id' => $this->uid );

$message = $this->Message->find('all', $options); 
```

更多信息在这里： [http ://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T23:36:06.550

在您的模型消息中添加

```
**
 * @see Model::$actsAs
 */
    public $actsAs = array(
        'Containable',
    );

/**
 * @see Model::$belongsTo
 */
    public $belongsTo = array(
        'Message' => array(
            'className' => 'Message',
            'foreignKey' => 'message_id',
        ),
        'Tags' => array(
            'className' => 'Tag',
            'foreignKey' => 'tag_id',
        ),
    ); 
```

在您的控制器中：

```
// $tagsId = tags ids
    $message = $this->MessageTag->find('all', array('conditions' => array('MessageTag.tag_id' => $tagsId),'contain' => array('Message'))); 
```

也最好遵循蛋糕命名约定，如果你有标签（复数），message_tags（第一个单数第二个复数），messages（复数）表，你必须有标签，消息标签，消息模型。

# javascript - 在类或文档中添加等效于每个锚点的 HREF 属性的 onMouseDown 属性

> ID：14946313
> 
> 赞同：0
> 
> 时间：2013-02-18T22:17:08.403
> 
> 标签：javascript, jquery, jquery-events, onmousedown

我无法获得一个`onMouseDown`函数，该函数获取每个链接并在页面中复制其各自锚标记的原始 HREF 属性并在关闭事件中加载 URL。

让我们调用这个函数`loadURL()`。

现在我正在测试每个锚点的内联函数，并且无法为每个 HREF 属性获取不同的值。我想做一个`onLoad`函数，基本上将`onMouseDow`n 属性和`loadURL`函数添加到每个锚点。这是我现在拥有的 JQuery 代码。

**问题已解决，显示初始问题以供参考**

脚本：

```
function loadURL()
        {
            var url = $('a').attr('href');
            location.href = url;
        }
function mouseDownerURL () {
    $('a').attr('onmousedown', 'loadURL()' );
} 
```

HTML

```
<body onLoad="mouseDownerURL();">
<a onmousedown="" href="foo.com">Takes you to foo.com on mouseDown</a>
<a onmousedown="" href="bar.com">Leads to foo.com NOT bar.com on mouseDown</a>
</body> 
```

**解决方案**

```
function mouseDownerURL() {
        $(document).ready(function() {
            $('a').mousedown(function() {
                window.location.href = this.href;
            });
        });
    }
<body onLoad="mouseDownerURL();">
<a href="1">1</a>
<a href="2">2</a>
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:21:46.873

摆脱所有这些功能和`onload`事情，然后正常执行：

```
$(document).ready(function() {
    $('a').mousedown(function() {
        windows.location.href = this.href;
    });
}); 
```

你的问题是这一行：

```
var url = $('a').attr('href'); 
```

`$('a')`选择*所有*`<a>`标签，而不是被点击的标签。要解决这个问题，您必须通过参数将元素传递到您的函数中，但这不是一个好主意。

# delphi - 我可以在控制台 Delphi 应用程序中使用 DataModule 吗？

> ID：14946318
> 
> 赞同：4
> 
> 时间：2013-02-18T22:17:19.330
> 
> 标签：delphi

我可以在控制台 Delphi 应用程序中使用 DataModule 表单吗？

我尝试在 uses 子句中将现有单元/表单包含到控制台 Delphi 应用程序中，但 DataModule1 被解析为 nil（未初始化）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T22:23:45.537

通过查看一个表单应用程序，我发现我只需要手动进行初始化：

```
Application.CreateForm(TDataModule1, DataModule1); 
```

**更新**

正如评论中所建议的，我最终实施了：

```
DataModule1 := TDataModule1.Create(nil) 
```

# html - div 垂直和水平定位

> ID：14946322
> 
> 赞同：3
> 
> 时间：2013-02-18T22:17:37.350
> 
> 标签：html, css, horizontal-scrolling

有没有办法像这样定位div：

```
|----------||----------||----------||----------|
|  div1    ||   div5   ||          ||   div10  |
|----------||----------||   div7   ||----------|
|  div2    ||          ||          ||   div11  |
|----------||   div6   ||----------||----------|
|  div3    ||          ||   div8   ||   div12  |
|----------||          ||----------||----------|
|  div4    ||          ||   div9   ||   div13  |
|----------||----------||----------||----------| 
```

所以我想做的是有一个水平扩展的布局，它不会垂直滚动，它只是用它垂直的空间填充它，然后水平移动。所以第一个元素在右上方，第二个在它下面，第三个也是直到没有剩余空间，然后它回到顶部（如 div5）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:03:53.660

你应该看看蓝图 CSS 框架。我用它创建了一个与您的帖子具有相似布局的网站，它非常易于使用且速度也很快。

[http://www.blueprintcss.org/](http://www.blueprintcss.org/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T02:00:19.900

这与浮动元素在容器中的水平流动方式等效（就像`float:top`被支持一样）。

正如@MarcB 所指出的，将来这将通过[CSS3 columns](http://www.w3.org/TR/css3-multicol/)轻松实现。该标准尚未完全定义，但可能类似于以下内容：

```
.container {
    height: 200px;
    column-width: 100px;
    column-gap: 10px;
    column-fill: auto;
} 
```

同时，jQuery 插件可能是最好的选择。例如，jQuery Masonry 具有[一列格式](http://masonry.desandro.com/demos/basic-single-column.html)，可以解决问题。可能有更简单的 jQuery 插件也足够了。

相关搜索词：*jQuery* , *CSS 列*,*多列布局*,*平铺布局*,*马赛克布局*

# c# - 并非所有代码路径都在 C# 中返回值错误

> ID：14946323
> 
> 赞同：-4
> 
> 时间：2013-02-18T22:17:54.510
> 
> 标签：c#, asp.net

我正在尝试从`Page_Load`事件中加载我的图表，但收到此错误“并非所有代码路径都返回值”，我不确定我在这里做错了什么。有人可以帮忙吗。

这是我的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    Literal2.Text = CreateChart_2();
}    

public string CreateChart_2()
{ 
    SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);
    // Initialize the string which would contain the chart data in XML format
    StringBuilder xmlStr = new StringBuilder();

    // Provide the relevant customization attributes to the chart
    xmlStr.Append("<chart decimalPrecision='0' showShadow='1' showborder='1' caption='Number of Lots Assigned (YTD)' subcaption='" + result1 + "'   name='MyXScaleAnim' type='ANIMATION' duration='1' start='0' param='_xscale' showNames='1' labelDisplay='Rotate'  useEllipsesWhenOverflow='1' formatNumberScale='0'>");        
    {
        // Establish the connection with the database
        string sqlStatement = "SELECT count (ID)as TotalCount, cat_name FROM MyTable group by cat_name";
        SqlCommand cmd = new SqlCommand(sqlStatement, con);
        con.Open();
        SqlDataReader reader = cmd.ExecuteReader();
        // Begin iterating through the result set
        //SqlDataReader rst = query.ExecuteReader();

        while (reader.Read())
        {
            // Construct the chart data in XML format
            xmlStr.AppendFormat("<set label='{0}' value='{1}' link='{2}'/>", reader["cat_name"].ToString(), reader["TotalCount"].ToString(), Server.UrlEncode("DrillDown1.aspx?AppName=" + reader["cat_name"].ToString()));
        }

        // End the XML string
        xmlStr.Append("</chart>");

        // Close the result set Reader object and the Connection object
        reader.Close();
        con.Close();

        // Set the rendering mode to JavaScript, from the default Flash.
        FusionCharts.SetRenderer("javascript");

        // Call the RenderChart method, pass the correct parameters, and write the return value to the Literal tag
        Literal2.Text = FusionCharts.RenderChart(
            "FusionChartsXT/Column3D.swf", // Path to chart's SWF
            "", // Page which returns chart data. Leave blank when using Data String.
            xmlStr.ToString(), // String containing the chart data. Leave blank when using Data URL.
            "annual_revenue",   // Unique chart ID
            "640", "340",       // Width & Height of chart
            false,              // Disable Debug Mode
            true);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T22:19:01.323

您的方法签名说它应该返回一个`string`.. 但您在任何地方都没有`return`声明。

您的呼叫站点是：

```
Literal2.Text = CreateChart_2(); 
```

但是你在你的函数中这样做：

```
Literal2.Text = FusionCharts.RenderChart(
            "FusionChartsXT/Column3D.swf", // Path to chart's SWF
            "", // Page which returns chart data. Leave blank when using Data String.
            xmlStr.ToString(), // String containing the chart data. Leave blank when using Data URL.
            "annual_revenue",   // Unique chart ID
            "640", "340",       // Width & Height of chart
            false,              // Disable Debug Mode
            true); 
```

你有两个选择。

1.  将函数的返回类型更改为`void`. 这是可取的，因为您已经`Literal`在方法中设置了 's text 属性。
2.  将函数的最后一部分更改为`return FusionCharts.RenderChart(....`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T22:20:14.993

您需要在您的方法中添加一个返回值：

**选项 1 - 有回报**

```
protected void Page_Load(object sender, EventArgs e)
{
    Literal2.Text = CreateChart_2();
}

public string CreateChart_2()
{

    SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);
    // Initialize the string which would contain the chart data in XML format
    StringBuilder xmlStr = new StringBuilder();

    // Provide the relevant customization attributes to the chart
    xmlStr.Append("<chart decimalPrecision='0' showShadow='1' showborder='1' caption='Number of Lots Assigned (YTD)' subcaption='" + result1 + "'   name='MyXScaleAnim' type='ANIMATION' duration='1' start='0' param='_xscale' showNames='1' labelDisplay='Rotate'  useEllipsesWhenOverflow='1' formatNumberScale='0'>");

    {
        // Establish the connection with the database
        string sqlStatement = "SELECT count (ID)as TotalCount, cat_name FROM MyTable group by cat_name";
        SqlCommand cmd = new SqlCommand(sqlStatement, con);
        con.Open();
        SqlDataReader reader = cmd.ExecuteReader();
        // Begin iterating through the result set
        //SqlDataReader rst = query.ExecuteReader();

        while (reader.Read())
        {
            // Construct the chart data in XML format
            xmlStr.AppendFormat("<set label='{0}' value='{1}' link='{2}'/>", reader["cat_name"].ToString(), reader["TotalCount"].ToString(), Server.UrlEncode("DrillDown1.aspx?AppName=" + reader["cat_name"].ToString()));
        }

        // End the XML string
        xmlStr.Append("</chart>");

        // Close the result set Reader object and the Connection object
        reader.Close();
        con.Close();

        // Set the rendering mode to JavaScript, from the default Flash.
        FusionCharts.SetRenderer("javascript");

        // Call the RenderChart method, pass the correct parameters, and write the return value to the Literal tag
        Literal2.Text = FusionCharts.RenderChart(
            "FusionChartsXT/Column3D.swf", // Path to chart's SWF
            "", // Page which returns chart data. Leave blank when using Data String.
            xmlStr.ToString(), // String containing the chart data. Leave blank when using Data URL.
            "annual_revenue",   // Unique chart ID
            "640", "340",       // Width & Height of chart
            false,              // Disable Debug Mode
            true);

    }
    return xmlStr.ToString();

} 
```

**选项 2 - 不退货**

```
protected void Page_Load(object sender, EventArgs e)
{
    CreateChart_2();
}

public void CreateChart_2()
{

    SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);
    // Initialize the string which would contain the chart data in XML format
    StringBuilder xmlStr = new StringBuilder();

    // Provide the relevant customization attributes to the chart
    xmlStr.Append("<chart decimalPrecision='0' showShadow='1' showborder='1' caption='Number of Lots Assigned (YTD)' subcaption='" + result1 + "'   name='MyXScaleAnim' type='ANIMATION' duration='1' start='0' param='_xscale' showNames='1' labelDisplay='Rotate'  useEllipsesWhenOverflow='1' formatNumberScale='0'>");

    {
        // Establish the connection with the database
        string sqlStatement = "SELECT count (ID)as TotalCount, cat_name FROM MyTable group by cat_name";
        SqlCommand cmd = new SqlCommand(sqlStatement, con);
        con.Open();
        SqlDataReader reader = cmd.ExecuteReader();
        // Begin iterating through the result set
        //SqlDataReader rst = query.ExecuteReader();

        while (reader.Read())
        {
            // Construct the chart data in XML format
            xmlStr.AppendFormat("<set label='{0}' value='{1}' link='{2}'/>", reader["cat_name"].ToString(), reader["TotalCount"].ToString(), Server.UrlEncode("DrillDown1.aspx?AppName=" + reader["cat_name"].ToString()));
        }

        // End the XML string
        xmlStr.Append("</chart>");

        // Close the result set Reader object and the Connection object
        reader.Close();
        con.Close();

        // Set the rendering mode to JavaScript, from the default Flash.
        FusionCharts.SetRenderer("javascript");

        // Call the RenderChart method, pass the correct parameters, and write the return value to the Literal tag
        Literal2.Text = FusionCharts.RenderChart(
            "FusionChartsXT/Column3D.swf", // Path to chart's SWF
            "", // Page which returns chart data. Leave blank when using Data String.
            xmlStr.ToString(), // String containing the chart data. Leave blank when using Data URL.
            "annual_revenue",   // Unique chart ID
            "640", "340",       // Width & Height of chart
            false,              // Disable Debug Mode
            true);

    }

} 
```

或者，如果您不想`CreateChart_2()`从那时起返回任何内容，您可以将签名更改为：

```
public void CreateChart_2() 
```

因此您无需返回。

# javascript - Phonegap 入门

> ID：14946324
> 
> 赞同：0
> 
> 时间：2013-02-18T22:17:56.533
> 
> 标签：javascript, html, cordova

我不明白为什么我没有收到警报。控制台中没有错误，我确定它正在查找 PhoneGap.js 文件。

```
<!doctype html>
<html>
<body> 
<script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script>
<script src="/Matrix/PhoneGap/Inc/js/PhoneGap.js"></script>
<script>
function myDeviceReady() {
    alert('Ready!');
}

document.addEventListener("deviceready", myDeviceReady, false);
</script>
</body>
</html> 
```

编辑：这不适用于使用 Safari 或 Google Chrome 的我的 iPhone。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:42:18.837

尝试：

```
window.addEventListener( 'load', myDeviceReady ); 
```

检查`deviceready`有很多问题。我发现轮询更容易`window.device`（仅在初始化 Phonegap 时才存在）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T02:22:09.747

您可以让它在 Ripple 模拟器中运行（请参阅[此链接](http://www.raymondcamden.com/index.cfm/2013/2/6/Using-Ripple-for-PhoneGap-Development)），但请确保使用 cordova.js 而不是 phonegap.js。

# mongodb - 水壶 mongo _id

> ID：14946325
> 
> 赞同：4
> 
> 时间：2013-02-18T22:17:56.403
> 
> 标签：mongodb, upsert, kettle

我正在尝试使用 Mongo 中的 _id 字段进行更新插入。

我尝试使用 Json Input 步骤首先恢复 _i​​d，但 $._id 或 $._id.$oid 没有运气

任何人都知道如何通过_id进行更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-27T22:19:32.643

获得 _id 后，使用如下脚本将其转换为 Stennie 指示的扩展 JSON 符号`Modified Javascript Value`：

```
var _id = '{ "$oid": "' + _id + '" }'; 
```

在您的`MongoDB Output`步骤中，将`JSON`列设置`Y`为该`_id`行。我不确定这个 JSON 选项是什么时候引入的，但是今天[在 Kettle 的最新 CI 版本中](http://ci.pentaho.com/view/Data%20Integration/job/Kettle/lastSuccessfulBuild/artifact/Kettle/assembly/dist/pdi-ce-TRUNK-SNAPSHOT.zip "Kettle 的最新 CI 版本")找到了它。

# api - 测试 OpenGL API

> ID：14946326
> 
> 赞同：2
> 
> 时间：2013-02-18T22:18:00.283
> 
> 标签：api, testing, opengl

我需要测试 OpenGL API 是否正常工作。例如。glVertex3f()、glEnable() 等...

是否有任何用于测试 Opengl API 的测试套件

有没有一组测试用例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:22:35.483

> 有没有一组测试用例？

看看[`piglit`](http://people.freedesktop.org/~nh/piglit/)和/或[`glean`](http://glean.sourceforge.net/)。

官方的一致性套件背后是一个相当陡峭的[付费墙](http://www.khronos.org/members/)。

# php - 编写处理异常的函数

> ID：14946338
> 
> 赞同：2
> 
> 时间：2013-02-18T22:19:12.077
> 
> 标签：php, exception

[基于我已经问过的关于异常的问题](https://stackoverflow.com/questions/14945789/exceptions-in-php-uncaught#14945828)，我担心我可能会错误地编写 php 函数，或者滥用异常的使用。我之所以这么说，是因为如果要使用 try/catch 块捕获自定义异常，则使用以下函数：

```
public function get_specific_page($page) {
    if (!is_array( $this->_page )){
        throw new AisisCore_Template_TemplateException( "<div class='error'>Trying to get a property from a non array.</div>" );
    }

    return $this->_page[$page];
} 
```

然后将被称为：

```
try{
    get_specific_page($page);
}
catch(Exception $e){
    echo $e->getMessage();
} 
```

这种方法的问题是我有很多这样编写的函数，要么检查文件是否存在，要么抛出错误。检查是否在数组中设置了一个值，抛出一个错误，我的问题是处理这些函数调用的文件可能会因 try catch 而过载.....

所以我的问题是，我将如何更好地编写这样的函数，这样我的 php 文件就不会被 try catch 语句过度加载，但仍然能够拥有自己的自定义函数。

是否像在它自己的函数中编写 try catch 一样明显？

我问的原因是因为我习惯于与成名的工作以及在我们编写功能的公司中工作，如您在上面看到的那样。我如何使用具有大量这些功能的代码库，并且我没有看到使用它们的一半文件执行了一堆尝试捕获......

**更新：**

我正在查看zend源以更好地理解异常并遇到了这个：

```
public function setMessage($messageString, $messageKey = null)
    {
        if ($messageKey === null) {
            $keys = array_keys($this->_messageTemplates);
            foreach($keys as $key) {
                $this->setMessage($messageString, $key);
            }
            return $this;
        }

        if (!isset($this->_messageTemplates[$messageKey])) {
            require_once 'Zend/Validate/Exception.php';
            throw new Zend_Validate_Exception("No message template exists for key '$messageKey'");
        }

        $this->_messageTemplates[$messageKey] = $messageString;
        return $this;
    } 
```

你可以看到他们如何在底部附近抛出一个新的异常消息，这个函数不会被调用：

```
try{}catch(){} 
```

然而，当它抛出异常时，“未捕获的带有消息的异常”没有问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:34:07.677

我认为，您的方法总体上是正确的。但是，有几点注意事项：

1.  您应该避免在异常消息中使用 HTML 格式。通常，您不知道如何处理您抛出的异常。例如，异常处理程序可以将消息写入日志文件（此时您不需要 HTML 格式），在特殊的错误视图中将其呈现给用户（在这种情况下，视图本身应该包含 HTML 格式），或者干脆忽略它（无论如何都不需要格式化）。
2.  仅捕获您可以处理的异常。如果你知道你的函数抛出一个`AisisCore_Template_TemplateException`，你应该只捕获那个异常，然后让所有其他异常冒泡到一个*可以*处理它们的异常处理程序。您可以使用`set_exception_handler`定义这样的异常处理程序，默认情况下捕获所有未捕获的异常（这可能是 Zend Framework 的示例中的情况）。简单地说：**只在你知道如何处理它们的地方捕获异常**。
3.  仅使用名称所暗示的异常：处理控制流中的（意外）异常。使用异常来控制程序的常规流程是可能的，但通常被认为是糟糕的设计（就像旁注一样，您的代码示例看起来还不错）。

为了完整起见，使用异常的一些替代方法：

1.  使用返回码而不是异常。这是老式的 C 风格。优点是您不需要使用 try/catch 语句包装语句。但是，您必须检查每个过程的返回值，这很容易忘记。另一方面，使用异常时，可以降低意外错误的风险，因为未捕获的异常默认会产生致命错误。
2.  使用 PHP 错误。请参阅此[`trigger_error`](http://php.net/manual/en/function.trigger-error.php)功能。然而，在 PHP 中几乎不可能捕获自定义错误（除了 using [`set_error_handler`](http://php.net/manual/en/function.set-error-handler.php)，它仅在全局级别有效）。

# javascript - 将画布序列化与元数据合并

> ID：14946339
> 
> 赞同：3
> 
> 时间：2013-02-18T22:19:12.647
> 
> 标签：javascript, html5-canvas, kineticjs

我正在构建一个基于 kinetic.js 的交互式环境。我希望能够保存和加载画布的状态以及元数据。

我已经知道我可以`stage.toJSON()`用来序列化/保存和`Kinetic.Node.create(stageJson, 'container')`加载。但是我想将任意数据添加到该序列化中，以跟踪我的环境将定义/使用的其他属性。

标准 kinetic.js 序列化示例：

```
{
    "attrs": {
        "width": 578,
        "height": 200,
        "x": 0,
        "y": 0
    },
    "nodeType":"Shape",
    "shapeType":"Rect"
} 
```

我希望能够保存/加载的示例：

```
{
    "attrs": {
        "width": 578,
        "height": 200,
        "x": 0,
        "y": 0
    },
    "nodeType":"Shape",
    "shapeType":"Rect",
    "metaData": {"foo": "bar"}
} 
```

这里最好的方法是什么？我可以在传递元数据之前破解/包装序列化和加载函数以添加/拉出元数据，但这似乎笨重且难以实现，特别是如果有很多嵌套层和形状需要解析。我可以保存两个完全独立的序列化，一个由 kinetic.js 生成，另一个由我自己的代码生成，但同样很笨重。有人有更好的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:36:57.903

`toJSON()`序列化所有 stage ( `Node`) 的属性。
我没有尝试过，但似乎您可以使用`setAttr(key,val)`. 设置它们后，它们将被序列化，我假设也被反序列化......

请注意，这并不是您所要求的，因为额外数据不在 JSON 的根级别，而是在`attrs`子对象中

# android - 从可绘制对象创建位图

> ID：14946340
> 
> 赞同：3
> 
> 时间：2013-02-18T22:19:15.897
> 
> 标签：android, bitmap, android-drawable

我将开发一个需要在`Canvas`. 基本上，我想获取 a`ShapeDrawable`并将其转换为`Bitmap`可以让用户在屏幕上拖动的 a。这本身就是一个简单的练习。

但是，我想在我的形状中添加文本。有没有办法可以将文本添加到`drawable`自身然后转换为位图？我研究了`TextView`以可绘制对象为背景创建一个。

这是最好的方法吗？我有点想避免`TextViews`在我的代码中创建。任何建议表示赞赏。

2013 年 2 月 21 日编辑：

为了回应 JustDanyul 的帖子，我有以下代码：

```
int width = 40;
int height = 40;
Bitmap.Config config = Bitmap.Config.ARGB_8888;
bitmap = Bitmap.createBitmap(width, height, config);
Canvas canvas = new Canvas(bitmap);
Resources res = context.getResources();
Drawable shape = res.getDrawable(R.drawable.miss_scarlet);
shape.draw(canvas);
Paint paint = new Paint();
paint.setTextSize(fontSize);
paint.setColor(Color.BLACK);
canvas.drawText(gameToken.getDbName(), 5, 5, paint); 
```

当我在另一个画布上绘制位图时，我的可绘制对象没有出现。可绘制对象本身很好（我将其作为 TextView 的背景进行了测试）。文字出现。我在这段代码中遗漏了什么吗？

```
<?xml version="1.0" encoding="utf-8"?>
<shape
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <corners
        android:radius="4dp" />
    <solid
        android:color="#FF0000" />
    <stroke
        android:width="3dp"
        android:color="#000000" />
</shape> 
```

编辑#2 2013 年 2 月 21 日：

我补充说：

```
shape.setBounds(0, 0, bitmap.getWidth(), bitmap.getHeight()); 
```

到我的代码，现在drawable出现了，但我的文本消失了（或者只是隐藏了）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:32:50.517

我建议你尝试这样的事情，首先，创建一个空位图：

```
int w = 500  
int h = 500; // or whatever sizes you need
Bitmap.Config config = Bitmap.Config.ARGB_8888;
Bitmap bitmap = Bitmap.createBitmap(w, h, config); 
```

下一步，创建一个新的画布实例，它会渲染到您新创建的位图上

```
Canvas canvas = new Canvas(bitmap); 
```

现在，您可以使用 ShapeDrawable 的 draw 方法将 ShapeDrawable 绘制到空位图上

```
myshapedrawable.draw(canvas); 
```

最后，您可以使用画布实例的 drawText 方法在画布上绘制文本。

# xml - XSLT 生成具有正确命名空间的 SVG

> ID：14946342
> 
> 赞同：0
> 
> 时间：2013-02-18T22:19:40.570
> 
> 标签：xml, xslt, svg, xml-namespaces

对不起，如果我问一个新手问题，但命名空间对我来说真的很令人费解。

我正在尝试从单个 XML/XSLT 生成许多 SVG 文档。

我的样式表：

```
<xsl:stylesheet version="2.0"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:svg="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns="http://www.w3.org/2000/svg"
    >
    <xsl:output method="xml" indent="yes" name="xml" cdata-section-elements="style"/>
    <xsl:template match="/">
        <xsl:apply-templates select="//root/menu"/>
    </xsl:template>
    <xsl:template match="menu">
        <xsl:variable name="filename" select="concat(@name,'.svg')"/>
        <xsl:result-document href="{$filename}" format="xml">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" baseProfile="basic" id="svg-root" width="482" height="600">
              <defs>
                <style type="text/css"><![CDATA[rect {       
                 fill: white;        
                 fill-opacity:1;
continues... 
```

这有效并产生以下输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xs="http://www.w3.org/2001/XMLSchema" version="1.1" baseProfile="basic" id="svg-root" width="482" height="600">
    <defs>
        <style type="text/css"><![CDATA[rect {       
                     fill: white;        
                     fill-opacity:1;        
continues... 
```

但我希望能够根据计算的内容指定高度和宽度属性

我试图将“<svg>”创建为 <xsl:element name="svg"><xsl:attribute name="xmlns"> [http://www.w3.org/2000/svg](http://www.w3.org/2000/svg) </xsl:attribute> </xsl:元素>

这失败了，因为它（xmlspy）不允许我分配 xmlns 属性。

如果我没有在根 (svg) 上指定命名空间，xmlns 会自动添加到根 <svg> 节点，并且所有第一级子节点都应用如下命名空间引用（参见 <defs>）

```
<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" baseProfile="basic" id="svg-root" width="482" height="600">
    <defs xmlns:svg="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xs="http://www.w3.org/2001/XMLSchema">
        <style type="text/css"><![CDATA[rect {       
                     fill: white;        
                     fill-opacity:1;        
continues... 
```

如何在根 svg 元素上指定所需的命名空间，同时计算高度和宽度的值，而无需在一级子分支上使用多余的命名空间引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:26:55.307

查找属性值模板，并阅读它们。使用它们来计算高度和宽度的值，而不是使用硬编码值。因此，您当前的文字结果元素变为：

```
<xsl:variable name="width"
     select="$raw-width * $compression-factor 
             + $fudge"/>            
<svg xmlns="http://www.w3.org/2000/svg" 
     xmlns:xlink="http://www.w3.org/1999/xlink" 
     version="1.1" 
     baseProfile="basic" 
     id="svg-root" 
     width="{$width}" 
     height="{$width * 1.61803}"> 
```

You can also use element and attribute constructors if you like; your attempt to do so went astray because you tried to create a namespace declaration using an xsl:attribute constructor, but the attribute constructor can only create a general attribute, not a namespace attribute. You would want something like this:

```
<xsl:variable name="width"
     select="$raw-width * $compression-factor 
             + $fudge"/>         
<xsl:element name="svg"
             namespace="http://www.w3.org/2000/svg">
  <xsl:attribute name="version"
                 select="'1.1'"/>
  <xsl:attribute name="baseProfile"
                 select="'basic'"/> 
  <xsl:attribute name="id"
                 select="'svg-root'"/> 
  <xsl:attribute name="width"
                 select="$width"/> 
  <xsl:attribute name="height"
                 select="$width * 1.61803"/> 
```

# c - 将 void 指针转换为结构

> ID：14946344
> 
> 赞同：33
> 
> 时间：2013-02-18T22:19:54.330
> 
> 标签：c, casting, void

我开始对 C 感到满意，然后我遇到了类型转换。如果我在 *.h 文件中定义了以下内容

```
struct data {
    int value;
    char *label;
}; 
```

这在另一个 *.h 文件中

```
# define TYPE      void* 
```

如何将 void 指针转换为结构，以便可以使用传递给函数的变量“TYPE val”？例如，如果我想利用 TYPE val 指向的值，我如何转换它以便可以将该值传递给另一个函数？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-18T22:21:41.260

```
(struct data*)pointer 
```

将指向 void 的指针转换为指向`struct data`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-20T09:44:25.537

类型转换 void 指向结构的指针可以按以下方式完成

```
void *vptr;
typedef struct data
{
   /* members */
} tdata; 
```

为此，我们可以将类型转换为 struct 假设您想将此 vptr 作为结构变量发送给某个函数

然后

```
void function (tdata *);
main ()
{
    /* here is your function which needs structure pointer 
       type casting void pointer to struct */

    function((tdata *) vptr);
} 
```

注意：我们可以将 void 指针类型转换为任何类型，这就是 void 指针的主要用途。

# c++ - QtCreator 和 ncurses

> ID：14946345
> 
> 赞同：1
> 
> 时间：2013-02-18T22:19:58.820
> 
> 标签：c++, qt-creator, ncurses

我在 QtCreator 中有一个带有 C++ 和 ncurses 的小程序：

```
#include <ncurses.h>

int main()
{
       initscr();// inicializa pantalla
       printw("Hello world!");
       refresh();
       getch();
       endwin();
} 
```

但是当打开xterm时，它说：打开终端时出错：未知

它发生在Eclipse中......

我已经正确安装了 ncurses 库。

我从控制台运行我的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T20:15:15.760

在项目选项卡上，目标、桌面、运行、运行环境。查找 TERM 变量。如果没有找到，添加它并在它的值上，写**xterm**

# jquery - .hover() 函数。重置动画

> ID：14946350
> 
> 赞同：1
> 
> 时间：2013-02-18T22:20:15.973
> 
> 标签：jquery, animation, hover, jquery-animate

我的问题是我正在使用 jquery 函数'.hover()'，如果我将鼠标缓慢移动到 div 上，它可以正常工作。当我调高并开始快速移动鼠标指针时，动画不会停止，甚至更糟！一切都开始在页面周围移动，而不会重置到其初始位置。

代码位：

```
$('.popProdContainer').hover(function(e){
             $(this).find('.pdtprice').stop().animate({"left": "-=70px"}, "slow");
             $(this).find('.pdtcartBkt, .pdtcartAdd').show('slow');
         },function(e){
             $(this).find('.pdtprice').stop().animate({"left": "+=70px"}, "slow");
             $(this).find('.pdtcartBkt, .pdtcartAdd').hide('slow');
}); 
```

所以，这就是我所拥有的。试图把 .animate 放在后面：

```
.filter(':not(:animated)') 
```

没用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:47:08.100

解决了这个问题。

我希望这对其他人有所帮助：

```
$('.popProdContainer').bind('mouseenter',function(){
    $('.pdtprice', this).animate({
        marginLeft: "-0.6in"
    },500);

    $('.pdtcartBkt', this).fadeIn('fast');
    $('.pdtcartAdd', this).fadeIn('fast');
}).bind('mouseleave',function(){
    $('.pdtprice', this).animate({
        marginLeft: "0.6in"
    },500);

    $('.pdtcartBkt', this).fadeOut('fast');
    $('.pdtcartAdd', this).fadeOut('fast');
}); 
```

# php - PHP 使用变量作用域

> ID：14946352
> 
> 赞同：2
> 
> 时间：2013-02-18T22:20:19.203
> 
> 标签：php, variables, global-variables, slim

我正在使用 slimphp 框架，并且对路由函数的变量范围感到困惑。我有以下内容：

```
$app = new \Slim\Slim(array(
 'templates.path' => '../templates/',
 'view' => new Slim\Extras\Views\Twig()
));

$user = SES\Session::getInstance();

include 'routes.php';

$app->run(); 
```

//`Routes.php`

```
$app->get("/", function() use ($app, $user){
....
} 
```

`Routes.php`如果我不添加`global $user;`到顶部，则失败：

`Notice: Undefined variable: user`

为什么我可以`$app`从此文件访问 var 但无法访问`$user`var？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T02:45:48.367

我已经缩小了问题的范围。我实际上并没有调用 include 'routes.php'；我有一个实用功能，可以加载文件夹中的所有路由。我在我的引导程序中称之为：SES\Util::loadRoutes('../routes'); 这是一个静态函数，它读取一个目录并执行 $filename; 对于每个文件。我过去一定处理过这个问题，因为在这个函数中我声明了 global $app; Sooo ..我仍然不完全理解何时需要调用 global 但这解决了部分混乱！

# runtime - 求解递归：T(n)=3T(2n/3)+1

> ID：14946353
> 
> 赞同：0
> 
> 时间：2013-02-18T22:20:20.890
> 
> 标签：runtime, big-o, recurrence

重复的运行时间是`T(n)=3T(2n/3)+1`多少，你是如何得到它的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-15T08:23:17.673

这种类型的递归可以用[Master theorem](https://en.wikipedia.org/wiki/Master_theorem)解决。这里和。`a=3`_ 您的And 因为大于，所以您属于第一种情况。`b=3/2``f(n) = 1``c = log1.5(3) = 2.709``n^2.709``f(n)`

所以解决方案是`O(n^2.709)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:34:26.740

使用[主定理](http://en.wikipedia.org/wiki/Master_theorem)。这比尝试自己解决重复问题要容易得多，就像您在原始问题中尝试的那样。

OTTOMH 这应该会帮助您`T(n) = Theta(n^2.7)`（主定理的案例 1）。

# java - 在 pom.xml 中定义 wsdl2java 参数

> ID：14946354
> 
> 赞同：2
> 
> 时间：2013-02-18T22:20:23.820
> 
> 标签：java, maven, cxf

我是 Maven 和 CXF 的新手，我正在尝试设置 pom.xml 以使用 wsdl2java 生成代码。我有一些参数需要添加到`wsdl2java`命令中，但我不确定如何添加。

这是命令在终端上的样子：

```
wsdl2java -fe jaxws21 -d gen -validate -p com.example -faultSerialVersionUID FQCN -asyncMethods -bareMethods -exceptionSuper com.example.ExampleException wsdl/objects.wsdl 
```

在我的 pom.xml 我有以下内容：

```
<plugin>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-codegen-plugin</artifactId>
    <version>${cxf.version}</version>
    <executions>
        <execution>
            <id>generate-sources</id>
            <phase>generate-sources</phase>
            <configuration>
                <sourceRoot>${project.build.directory}/generated-sources/cxf</sourceRoot>
                <wsdlOptions>
                    <wsdlOption>
                        <wsdl>${project.basedir}/src/main/resources/wsdl/objects.wsdl</wsdl>
                        <wsdlLocation>classpath:wsdl/objects.wsdl</wsdlLocation>
                    </wsdlOption>
                </wsdlOptions>
                <defaultOptions>
                    <markGenerated>true</markGenerated>
                    <asyncMethods />
                    <bareMethods />
                </defaultOptions>
            </configuration>
            <goals>
                <goal>wsdl2java</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

我很确定我正确地得到了 asyncMethods 和 bareMethods 参数，因为代码生成正常。不过，我对几件事感到好奇。

我想知道如何：

*   将`-fe`参数与`jaxws21`值相加

*   添加`-p`带有`com.example`值的参数

*   添加`-faultSerialVersionUID`与`FQCN`值

*   添加`-exceptionSuper`与`com.example.ExampleException`值

我尝试阅读 CXF 文档、SO、Google 和许多其他地方。我通过谷歌搜索“cxf pom filetype:xml”阅读了许多不同的 xml 文件。不幸的是，我无法弄清楚最后一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T01:49:29.160

这是根据您的问题配置的外观：

```
... ...    

<defaultOptions>
    <markGenerated>true</markGenerated>
    <asyncMethods />
    <bareMethods />
    <!-- add the -fe argument together with the jaxws21 value -->
    <frontEnd>jaxws21</frontEnd>
    <!-- add the -p argument with the com.example value -->
    <packagenames>
        <packagename>com.example</packagename>
    </packagenames>
    <!-- add the -faultSerialVersionUID with the FQCN value -->
    <faultSerialVersionUID>FQCN</faultSerialVersionUID>
    <!-- add the -exceptionSuper with the com.example.ExampleException value -->
    <exceptionSuper>com.example.ExampleException</exceptionSuper>
</defaultOptions>

... ... 
```

您可以反编译 cxf-codegen-plugin.jar 并直接查看源代码以查看它如何解析这些命令行参数，更具体地说，这个类：

[org.apache.cxf.maven_plugin.wsdl2java.WsdlOption](http://cxf.apache.org/javadoc/latest/org/apache/cxf/maven_plugin/wsdl2java/WsdlOption.html)

希望这可以帮助。

# android - 生成特定屏幕尺寸密度的图像

> ID：14946356
> 
> 赞同：1
> 
> 时间：2013-02-18T22:20:26.810
> 
> 标签：android, scaling, pixels, spectral-density

我正在构建一个应用程序，其中包含一个在整个应用程序视图中使用的图像文件。我对 android.developers 中关于将图像缩放到 Android 中不同屏幕密度的信息有点困惑`ldpi = 0.75`：`mdpi = 1.0`; `hdpi = 1.5`; `xhdpi = 2.0`.

我的第一个想法是，我所要做的就是将图像文件插入到适当的密度文件中，然后 Android 会负责缩放；但我不觉得这是正确的。我的问题是：

如果我错了，我必须自己将图像缩放到适当的密度，然后将它们保存到不同的密度文件中，我该怎么做？我可以在 Photoshop 中做到这一点吗？我想是的，但我不确定。如果是这样，我将如何缩放图像？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T00:33:14.457

如果您想让 Android 缩放（我不推荐），您可以简单地将一张图像仅放置在适当的密度文件夹中（最好是您支持的最高 - xhdpi 可能目前），Android 将对其进行缩放。

最好是，您应该事先在选择的 Photoshop/GIMP/编辑器中重新缩放它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T00:30:25.300

给你，这可能会有所帮助，我把它从这里拿下来了，它有时会派上用场：

```
xlarge screens are at least 960dp x 720dp
large screens are at least 640dp x 480dp
normal screens are at least 470dp x 320dp
small screens are at least 426dp x 320dp

Generalised dpi values for screens:

ldpi resources for low-density (ldpi) screens (~120dpi)
mdpi resources for medium-density (mdpi) screens (~160dpi) (this is the baseline density)
hdpi resources for high-density (hdpi) screens (~240dpi)
xhdpi resources for extra high-density (xhdpi) screens (~320dpi)

Therefore generalised size of your resources (assuming they are full screen):

ldpi
Vertical = 426 * 120 / 160 = 319.5px
Horizontal = 320 * 120 / 160 = 240px
mdpi
Vertical = 470 * 160 / 160 = 470px
Horizontal = 320 * 160 / 160 = 320px
hdpi
Vertical = 640 * 240 / 160 = 960px
Horizontal = 480 * 240 / 160 = 720px
xhdpi
Vertical = 960 * 320 / 160 = 1920px
Horizontal = 720 * 320 / 160 = 1440px

Formula used:

px = dp*dpi/160 
```

# ios - 在xcode中制作滚动视图故障？

> ID：14946357
> 
> 赞同：0
> 
> 时间：2013-02-18T22:20:29.447
> 
> 标签：ios, objective-c, xcode

所以我在我的应用程序中制作了一个滚动视图，这样我就可以在一个视图中显示更多内容。故事板最后有很多文字、1 张图片和 3 个按钮。每次我一直滚动到按钮并单击其中一个按钮时，它都会将我带到相应的故事板，但是当我单击按钮以返回包含所有内容的主故事板时，它不会让我向后滚动到顶部。这是滚动视图的 .m 文件中的所有代码：

```
-(void)viewDidAppear:(BOOL)animated{

[myScroll setScrollEnabled:YES];
[myScroll setContentSize:CGSizeMake(320, 940)];
} 
```

这是滚动视图的 .h 文件中的代码：

```
@interface SimplifyingNumericlaExpressionsViewController : UIViewController
@property (strong, nonatomic) IBOutlet UIScrollView *myScroll;

@end 
```

有什么办法可以设置滚动视图的默认坐标？或者可以解决这个问题的东西？

这是显示问题的视频链接[http://youtu.be/TgTaiEEhPhc](http://youtu.be/TgTaiEEhPhc)

任何想法或例子都很重要。我是初学者:(

谢谢！

**更新**

我尝试将相同的代码放在 viewDidLoad 中，这就是发生的情况：

[http://youtu.be/R6M4gGyLxgQ](http://youtu.be/R6M4gGyLxgQ)

我现在有一个不同的问题，它不会一直向下滚动，即使我尝试更改值它仍然不起作用。有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:26:00.033

你正在做的事情应该在 viewDidLoad 而不是 viewDidAppear 中完成。我会假设这个错误是因为当你设置内容大小时你的滚动视图已经超低了，可能会重新锚定你的滚动视图更低？

# html - flexslider 图像尺寸封面

> ID：14946366
> 
> 赞同：1
> 
> 时间：2013-02-18T22:20:54.843
> 
> 标签：html, css, flexslider

对于我的个人网站[http://stevengeorgeharris.com](http://stevengeorgeharris.com)，我创建了一个单页设计，其中多个 div 相互堆叠。div 是 width: 100% 和 height: 100% 因此它们随浏览器缩放，在每个 div 中我使用 flexslider 创建全屏幻灯片。

我的问题是当浏览器变窄 flexslider 容器中的图像缩小时，会在下面留下空白。

这是 flexslider 图像的 CSS。

```
.flexslider .slides img {width: 100%; height:auto; display: block;} 
```

有没有让图像像这样[http://css-tricks.com/examples/FullPageBackgroundImage/css-1.php](http://css-tricks.com/examples/FullPageBackgroundImage/css-1.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T00:45:00.863

为此，您应该使用媒体查询。您可以在此处阅读有关媒体查询的更多信息：[https ://developer.mozilla.org/en-US/docs/CSS/Media_queries](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)

我做了你想做的事；用另一张图片，你可以在这里看到最终结果：http: [//jsbin.com/olakit/2](http://jsbin.com/olakit/2)

这是代码（原始图片为 1024 x 683 px ）：

```
img {
  width: 100%;
  height : 100%;
}

@media (min-width: 2000px) {
  img{
    height: auto;
  }
} 
```

请注意，“最小宽度”应该大于图片的宽度。

# python - 在 matplotlib 中编辑 x 轴刻度标签的日期格式

> ID：14946371
> 
> 赞同：67
> 
> 时间：2013-02-18T22:21:22.597
> 
> 标签：python, matplotlib

我正在寻找编辑 x 轴上日期的格式。下图显示了默认情况下它们在我的条形图上的显示方式。我想删除“Dec”和“2012”的重复，只在 x 轴上有实际的日期数字。

关于我如何做到这一点的任何建议？

![在此处输入图像描述](../Images/dfaa54d3eefbbf898206dce98e5a18d0.png)

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-02-18T22:26:09.010

简而言之：

```
import matplotlib.dates as mdates
myFmt = mdates.DateFormatter('%d')
ax.xaxis.set_major_formatter(myFmt) 
```

matplotlib 网站上有很多例子。我最常用的是[这里](http://matplotlib.org/examples/api/date_demo.html)

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2017-04-26T10:04:39.637

虽然 Paul H 给出的答案显示了基本部分，但它并不是一个完整的例子。另一方面，[matplotlib 示例](http://matplotlib.org/examples/api/date_demo.html)似乎相当复杂，并且没有显示如何使用天数。

因此，对于每个有需要的人来说，这里有一个完整的工作示例：

```
from datetime import datetime
import matplotlib.pyplot as plt
from matplotlib.dates import DateFormatter

myDates = [datetime(2012,1,i+3) for i in range(10)]
myValues = [5,6,4,3,7,8,1,2,5,4]
fig, ax = plt.subplots()
ax.plot(myDates,myValues)

myFmt = DateFormatter("%d")
ax.xaxis.set_major_formatter(myFmt)

## Rotate date labels automatically
fig.autofmt_xdate()
plt.show() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-10-24T04:59:45.597

[从本例](https://matplotlib.org/3.2.1/gallery/text_labels_and_annotations/date.html)所示的包[matplotlib.dates](https://matplotlib.org/api/dates_api.html)中，日期格式可以应用于轴标签和绘图的刻度。

下面我给出了一个为多图标记轴刻度的示例

```
import matplotlib.pyplot as plt
import matplotlib.dates as mdates
import pandas as pd

df = pd.read_csv('US_temp.csv')
plt.plot(df['Date'],df_f['MINT'],label='Min Temp.')
plt.plot(df['Date'],df_f['MAXT'],label='Max Temp.')
plt.legend()
####### Use the below functions #######
dtFmt = mdates.DateFormatter('%b') # define the formatting
plt.gca().xaxis.set_major_formatter(dtFmt) # apply the format to the desired axis
plt.show() 
```

就如此容易

# javascript - 调用 Backbone.Model.Save 将 child-Backbone.Model 转换为对象？

> ID：14946372
> 
> 赞同：1
> 
> 时间：2013-02-18T22:21:24.287
> 
> 标签：javascript, backbone.js

我正在创建一个主干模型，其中有一个子主干模型：

```
console.log("inside add item, video:", video instanceof Backbone.Model);

var playlistItem = new PlaylistItem({
    video: video,
    title: video.get('title')
}); 
```

之后，我保存它：

```
playlistItem.save({}, {
    success: function() {
        console.log("Successfully saved.");
        playlistItem.get('video').get('title');
    }
}); 
```

在这个例子中，我在调用 save 后遇到了一个错误——video is not an instanceof Backbone.Model。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:44:06.890

我认为您将需要覆盖`parse`and `toJSON`。

```
 toJSON: function() {
     var json = Backbone.Model.prototype.toJSON.call(this);

     // replace backbone model with json.
     json.video = this.get('video').toJSON();

     return json;
  },

  parse: function(data) {
     // take json of video and set into model.
     this.get('video').set(data.video);
     delete data.video;

     return data;
  }, 
```

如果您不这样解析 json 数据，backbone 将从 json 中获取“视频”对象并覆盖您的 Backbone 模型。

# javascript - 通过 Javascript 控制 ActiveX 控件

> ID：14946374
> 
> 赞同：0
> 
> 时间：2013-02-18T22:21:36.880
> 
> 标签：javascript, html, activex, wonderware

我正在尝试通过 ActiveX 使用 WonderWare 的一些软件。我已经让对象出现，但我想向它传递一些参数并消除每次都必须设置对象。ActiveX 和.NET 控件有两个版本。我根本没有让 .NET 控件工作，但我可以得到 ActiveX 一个 / 只是没有参数。

以下是手册中的说明：

> aaHistClientTrend 控件允许您从 Wonderware InTouch HMI 软件或 .NET 容器（如 Visual Basic .NET 或 Internet Explorer）中运行 Wonderware Historian Client Trend 程序（或功能子集）。

我拥有的 HTML 代码：

```
<html>
<head>
<body>
   <object id="aTrend1" classid="clsid:E08609F1-58CC-11D3-B1CF-00105AA45077" viewastext="" height="100%" width="100%" />
</body>
</head>
</html> 
```

我尝试通过以下方式传递参数：

```
<script language="JavaScript">
    document.aTrend1.TagPickerVisible = false; 
</script> 
```

它使 Internet Explorer 崩溃。

**编辑：有什么想法吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:36:45.323

我想出了一个办法。不确定这是唯一的方法，但它有效。

```
<html>
<head>
<script>
function fxnTrend()
    {
    aTrend1.ToolBarVisible = false; 
    aTrend1.TagPickerVisible = false; 
    aTrend1.RealTimeMode = true;
    aTrend1.TimeBarVisible = false;
    aTrend1.GridVisible = false;
    }
    fxnTrend();
</script>

<body onLoad="fxnTrend()">
    <object id="aTrend1" classid="clsid:E08609F1-58CC-11D3-B1CF-00105AA45077" viewastext="" height="100%" width="100%" />
</body>
</head>
</html> 
```

# javascript - jQuery - 悬停事件上显示的非嵌套/非后代同级导航

> ID：14946375
> 
> 赞同：1
> 
> 时间：2013-02-18T22:21:36.627
> 
> 标签：javascript, jquery, hover, mouse

我有 2 个导航区域。当第一个元素悬停在第一个元素上时，第二个应该出现，如果鼠标没有移到它上面，它应该消失。

基本上我有：

HTML

```
<ul class="main">
 <li class="1">item 1</li>
 <li class="2">item 2</li>
</ul>

<div class="sub">
 <ul class="1">
  <li>1 sub item 1</li>
  <li>1 sub item 2</li>
 </ul>

 <ul class="2">
  <li>2 sub item 1</li>
  <li>2 sub item 2</li>
 </ul>
</div> 
```

我希望 ul.1 在我悬停在 li.1 上时出现，而 ul.2 在我悬停在 li.2 上时出现，并且我希望它们只有在我没有悬停在 sub uls 上时才会消失。

我已经让它部分工作了：

JAVASCRIPT

```
var sections = new Array('1', '2');

$.each(sections, function(i, section) {
    $('ul.main li.' + section).hover(
        function() {
            $('div.sub ul').hide();
            $('div.sub ul.' + section).show();
        }
    );
}); 
```

这将显示正确的部分并隐藏其他部分，但我无法弄清楚我需要什么，因此，当鼠标离开 ul.main li 时，如果没有将其悬停在 .sub ul 上，它就会消失。

**更新：** *这里的小提琴：http:* [//jsfiddle.net/alluvialplains/XY4mH/](http://jsfiddle.net/alluvialplains/XY4mH/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:29:58.940

```
$( document ).ready( function () {
  $( '.main li' ).on( 'click', function () {
    $( '.sub ul' )
      .hide()
      .eq( $( this ).index() )
        .show();
  });
}); 
```

这应该够了吧。但正如@Mottie 所说，嵌套菜单会更好/更合拍

编辑：对不起，这是在工作`click`。等一下，我会更新的

```
$( document ).ready( function () {
    var $ul = $( '.sub ul' ).hide();
    $( '.main li' ).hover(
        function () {
            $ul
                .hide()
                .eq( $( this ).index() )
                    .show();
        },
        function () {
            $ul.hide()
        }
    );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T23:49:44.667

你是@EpF 的一部分。问题是您上面给出的语义示例（可以遵守）正在尝试捕获`mouseleave`事件，虽然可以使用 jQuery 的[.not()](http://api.jquery.com/not/)函数来实现这一点，但它会很昂贵。确实，最聪明的方法是为您的整个导航使用一个外部包装器（包装您现有小提琴中的所有 div），然后将您的`show()`事件绑定到`mouseenter`，同时单独将您的`.hide()`事件（用于 ALL的事件`.subz`）绑定到`mouseleave`为包装器 div触发的事件。

给定以下 HTML：

```
<div id="nav-wrap">
    <ul class="mainz">
     <li class="1">item 1</li>
     <li class="2">item 2</li>
    </ul>

    <div class="subz">
     <ul class="1">
      <li>1 sub item 1</li>
      <li>1 sub item 2</li>
     </ul>

     <ul class="2">
      <li>2 sub item 1</li>
      <li>2 sub item 2</li>
     </ul>
    </div>
</div><!-- /END #nav-wrap --> 
```

可以用下面的javascript实现效果

```
$( document ).ready( function () {
    var $ul = $( '.subz ul' ).hide();
    $( '.mainz li' ).on( 'mouseenter', function(event){
            $ul.hide().eq( $( this ).index() ).show();
    });
    $( '#nav-wrap' ).on( 'mouseleave', function(event){
        $ul.hide();
    });
}); 
```

这是它的一个 JSFiddle：http: [//jsfiddle.net/XY4mH/4/](http://jsfiddle.net/XY4mH/4/)

另外，我应该注意到，该`.hover()`函数在 jQuery 中已经被弃用了很长一段时间，并且可能很快就会消失。请注意，我使用了`.on()`函数，这是在 jQuery 中绑定此类事件的正确方法。

# c# - C# winforms 绘制位图无效参数

> ID：14946381
> 
> 赞同：1
> 
> 时间：2013-02-18T22:21:50.000
> 
> 标签：c#, winforms, bitmap

我已经做了一个应用程序，我需要函数 drawbitmap 来打印我的面板。当我按下按钮 (btnUpdate) 12 次或更多次时，我在此规则上得到一个参数异常（无效参数）：`panel1.DrawToBitmap(bmp1, new Rectangle(0, 0, 2480, 3508));`

```
private void preview()
        {
            Bitmap bmp1 = new Bitmap(2480, 3508);
            panel1.DrawToBitmap(bmp1, new Rectangle(0, 0, 2480, 3508));
            pictureBox2.Image = bmp1;
        }

        private void btnUpdate_Click(object sender, EventArgs e)
        {
            preview();
        } 
```

有人能帮助我吗？

我无法使用该`bmp1.Dispose();`功能...我在 Program.cs 文件的这一行中得到一个异常：`Application.Run(new Form1());`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:41:49.223

这可能是在您使用完位图后未处理它们的情况。试试这个：

```
panel1.DrawToBitmap(...);

// get old image 
Bitmap oldBitmap = pictureBox2.Image as Bitmap;

// set the new image
pictureBox2.Image = bmp1;

// now dispose the old image
if (oldBitmap != null)
{
    oldBitmap.Dispose();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:44:46.963

你那里有一个很大的内存泄漏，当你点击按钮 12 次点击和最多 1GB 时，请注意你的内存，

尝试将您的 Bitmap 声明为变量并在重新分配之前将其处置。

```
 private Bitmap bmp1;
    private void preview()
    {
        if (bmp1 != null)
        {
            bmp1.Dispose();
        }
        bmp1 = new Bitmap(2480, 3508);
        panel1.DrawToBitmap(bmp1, new Rectangle(0, 0, 2480, 3508));
        pictureBox2.Image = bmp1;
    } 
```

或者在分配新位图之前清除 PictureBox

```
 private void preview()
    {
        if (pictureBox2.Image != null)
        {
            pictureBox2.Image.Dispose();
        }
        Bitmap bmp1 = new Bitmap(2480, 3508);
        panel1.DrawToBitmap(bmp1, new Rectangle(0, 0, 2480, 3508));
        pictureBox2.Image = bmp1;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T13:46:25.860

通过这样做可以解决问题：

```
private void preview()
{

    Bitmap bmp1 = new Bitmap(2480, 3508);
    panel1.DrawToBitmap(bmp1, new Rectangle(0, 0, 2480, 3508));
    Image img = pictureBox2.Image;
    pictureBox2.Image = bmp1;
    if (img != null) img.Dispose(); // the first time it'll be null

}

private void btnUpdate_Click(object sender, EventArgs e)
{
    preview();
    System.GC.Collect();
    System.GC.WaitForPendingFinalizers();
} 
```

# javascript - 在 ID 函数上按类获取元素

> ID：14946387
> 
> 赞同：-2
> 
> 时间：2013-02-18T22:22:12.227
> 
> 标签：javascript, jquery, html, ajax

我正在尝试将此函数应用于很多图像，但现在我不能，因为它通过 ID 获取元素，如何更改函数以使其获取元素类？

```
 /* Canvas multiply effect */
    var multiplyFilter = (function() {
        //** private vars **//
        var multiplyColor,
                imageBottom, imageId,
                canvas;

        //** private functions **//
        function createCanvas() {
            canvas = document.createElement('canvas');
            canvas.width = imageBottom.width;
            canvas.height = imageBottom.height;
            imageBottom.parentNode.insertBefore(canvas, imageBottom);
            // no canvas support?
            if (!canvas.getContext) { return; }

            draw();
        }
        function draw() {
            var context, imgData, pix,
                    w = imageBottom.width,
                    h = imageBottom.height;
            // get 2d context
            context = canvas.getContext('2d');
            // draw the image on the canvas
            context.drawImage(imageBottom, 0, 0);
            // Get the CanvasPixelArray from the given coordinates and dimensions.
            imgData = context.getImageData(0, 0, w, h);
            pix = imgData.data;
            // Loop over each pixel and change the color.
            for (var i = 0, n = pix.length; i < n; i += 4) {
                pix[i ] = multiplyPixels(multiplyColor[0], pix[i ]); // red
                pix[i+1] = multiplyPixels(multiplyColor[1], pix[i+1]); // green
                pix[i+2] = multiplyPixels(multiplyColor[2], pix[i+2]); // blue
                // pix[i+3] is alpha channel (ignored)

                // another check to see if image is still empty
                if(i < 5 && !pix[i] && !pix[i+1] && !pix[i+2] && !pix[i+3]) {
                    canvas.parentNode.removeChild(canvas);
                    setTimeout(function() { multiplyFilter.init(imageId, multiplyColor); }, 500);
                    return false;
                }
            }
            // Draw the result on the canvas
            context.putImageData(imgData, 0, 0);
        }

        //** helper function **//
        function multiplyPixels(topValue, bottomValue) {
            // the multiply formula
            return topValue * bottomValue / 255;
        }

        //** public functions **//
        return {
            init : function(imgId, color) {
                imageId = imgId;
                imageBottom = document.getElementById(imageId);
                multiplyColor = color;

                // lauch the draw function as soon as the image is loaded
                if(imageBottom && imageBottom.clientWidth > 50) { // image loaded
                    createCanvas();
                } else { // not yet ready
                    setTimeout(function() { multiplyFilter.init(imageId, color); }, 1000);
                }
            }
        }
    })();

    multiplyFilter.init('multiply_hover', [255, 105, 0]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:27:30.820

更改`document.getElementById(imageId)`为[`document.querySelectorAll(...)`](http://caniuse.com/#search=queryselectorall)可以通过 CSS 选择器语法支持多个元素。您只需要在您期望单个元素之前迭代返回的元素。

...大致是这样的（**未经测试**）：

```
/* Canvas multiply effect */
var multiplyFilter = (function() {
    //** private vars **//
    var multiplyColor,
            images, imageSelector,
            canvases = [];

    //** private functions **//
    function createCanvases() {
        var canvas, image;

        for (var i=0; i<images.length; i++) {
            canvas = document.createElement('canvas');

            // no canvas support?
            if (i === 0 && !canvas.getContext) { return; }

            image = images[i];

            canvas.width = image.width;
            canvas.height = image.height;
            image.parentNode.insertBefore(canvas, image);
            draw(image, canvas);
        }
    }
    function draw(image, canvas) {
        var context, imgData, pix,
                w = image.width,
                h = image.height;
        // get 2d context
        context = canvas.getContext('2d');
        // draw the image on the canvas
        context.drawImage(image, 0, 0);
        // Get the CanvasPixelArray from the given coordinates and dimensions.
        imgData = context.getImageData(0, 0, w, h);
        pix = imgData.data;
        // Loop over each pixel and change the color.
        for (var i = 0, n = pix.length; i < n; i += 4) {
            pix[i ] = multiplyPixels(multiplyColor[0], pix[i ]); // red
            pix[i+1] = multiplyPixels(multiplyColor[1], pix[i+1]); // green
            pix[i+2] = multiplyPixels(multiplyColor[2], pix[i+2]); // blue
            // pix[i+3] is alpha channel (ignored)

            // another check to see if image is still empty
            if(i < 5 && !pix[i] && !pix[i+1] && !pix[i+2] && !pix[i+3]) {
                canvas.parentNode.removeChild(canvas);
                setTimeout(function() { multiplyFilter.init(imageId, multiplyColor); }, 500);
                return false;
            }
        }
        // Draw the result on the canvas
        context.putImageData(imgData, 0, 0);
    }

    //** helper function **//
    function multiplyPixels(topValue, bottomValue) {
        // the multiply formula
        return topValue * bottomValue / 255;
    }

    //** public functions **//
    return {
        init : function(selector, color) {
            imageSelector = selector;
            images = document.querySelectorAll(imageSelector);
            multiplyColor = color;

            // lauch the draw function as soon as the image is loaded
            if(images.length) {
                var imagesLoaded = true;
                for (var i=0; i<images.length; i++) {
                    if (images[i].clientWidth < 50) {
                        imagesLoaded = false;
                        break;
                    }
                }

                if (imagesLoaded) {
                    createCanvases();
                    return;
                }
            }

            // not yet ready
            setTimeout(function() {
                multiplyFilter.init(imageSelector, color);
            }, 1000);
        }
    }
})();

// selects all images with class 'multiply_hover'
multiplyFilter.init('.multiply_hover', [255, 105, 0]); 
```

# sql - SQL 2 维度透视

> ID：14946389
> 
> 赞同：1
> 
> 时间：2013-02-18T22:22:29.300
> 
> 标签：sql, sql-server, sql-server-2008, tsql, pivot

我想在 MS SQL 2008 中对 2 个表进行透视，以便在一行中检索一个包含所有可用答案的调查问题。

表1是“问题”

```
ID   Text
1    What is your gender
2    Are you married
3    What is your Ethnicity 
```

表 2 为每个问题提供“答案”

```
ID   QuestionID   Text
1    1            Male
2    1            Female
3    2            Yes
4    2            No
5    3            Caucasian
6    3            African/Black
7    3            Hispanic
8    3            Asian
etc. 
```

我希望我的查询结果如下所示：

```
QuestionID  QuestionText             Ans1       Ans2            Ans3      Ans4
1           What is your gender      Male       Female          Null      Null
2           Are you married          Yes        No              Null      Null
3           What is your Ethnicity   Caucasian  African/Black   Hispanic  Asian 
```

我尝试了 10 种不同的 Pivot、CTE 和子查询组合，但都没有成功。

我应该提到没有“答案序列”列（还）。真正的数据库有 200 多个问题和 700 个答案，随时可能发生变化，因此对每个值进行编码是不切实际的。

感谢您的洞察力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:39:55.593

您可以实现该`PIVOT`函数来获得此结果。

`answers`如果您知道每个 将有多少`question`，那么您可以对类似于以下的值进行硬编码：

```
select *
from
(
  select q.id,
    q.text question,
    a.text answer,
    'Answer_'+cast(row_number() over(partition by q.id 
                                      order by a.id) as varchar(10)) col
  from questions q
  left join answers a
    on q.id = a.questionid
) src
pivot
(
  max(answer)
  for col in (Answer_1, Answer_2,
             Answer_3, Answer_4)
) piv
order by id; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/5293e/10)

但是，如果每个问题的答案数量未知，则需要使用动态 sql：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME('Answer_'+cast(row_number() over(partition by q.id 
                                      order by a.id) as varchar(10))) 
                    from questions q
                    left join answers a
                      on q.id = a.questionid
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT id, question, ' + @cols + ' from 
             (
                select q.id,
                  q.text question,
                  a.text answer,
                  ''Answer_''+cast(row_number() over(partition by q.id 
                                                    order by a.id) as varchar(10)) col
                from questions q
                left join answers a
                  on q.id = a.questionid
            ) x
            pivot 
            (
                max(answer)
                for col in (' + @cols + ')
            ) p 
            order by id'

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/5293e/9)

两个查询的结果是：

```
| ID |               QUESTION |  ANSWER_1 |      ANSWER_2 | ANSWER_3 | ANSWER_4 |
---------------------------------------------------------------------------------
|  1 |    What is your gender |      Male |        Female |   (null) |   (null) |
|  2 |        Are you married |       Yes |            No |   (null) |   (null) |
|  3 | What is your Ethnicity | Caucasian | African/Black | Hispanic |    Asian | 
```

# java - 运行时错误：膨胀类

> ID：14946397
> 
> 赞同：0
> 
> 时间：2013-02-18T22:22:42.517
> 
> 标签：java, android, eclipse, maps

这里的问题很简单，但是我遇到了运行时错误，如下所示：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.maptest/com.example.maptest.MainActivity}: android.view.InflateException: Binary XML file line #2: Error inflating class fragment 
```

我以前遇到过这个问题，我的直觉是它可能与库有关，但我不确定。我知道这里有很多这样的问题，但它们非常具体。我只是想知道我的代码是否有任何问题。感谢您的帮助！

我的主要活动文件（MainActivity.java）是：

```
package com.example.maptest;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;  
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;

public class MainActivity extends FragmentActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.main_menu, menu);
    return true;
}

private static final int ACTIVITY_CREATE = 0;

private void configureSettings() {
    Intent intent = new Intent(this, ConfigureSyncActivity.class);
    startActivityForResult(intent, ACTIVITY_CREATE);
}

private void setLimits() {
    Intent intent = new Intent(this, SetLimitsActivity.class);
    startActivityForResult(intent, ACTIVITY_CREATE);
}

private void violations() {
    Intent intent = new Intent(this, ViolationsActivity.class);
    startActivityForResult(intent, ACTIVITY_CREATE);
}

@Override
public boolean onOptionsItemSelected(MenuItem item){

    switch(item.getItemId()) {

    case R.id.limits:
        setLimits();
        return true;

    case R.id.sync:
        configureSettings();
        return true;

    case R.id.violations:
        violations();
        return true;

    }
    return super.onOptionsItemSelected(item);
}

} 
```

最后但并非最不重要的是，我的 xml 布局文件：

```
 <fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:36:56.943

在您的 xml 布局文件中尝试以下更改。它对我有用：

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:name="com.google.android.gms.maps.SupportMapFragment"/> 
```

如果这不起作用，请尝试检查类名层次结构。

# objective-c - 颠覆xib合并错误

> ID：14946403
> 
> 赞同：1
> 
> 时间：2013-02-18T22:23:10.310
> 
> 标签：objective-c, xcode, macos, svn, interface-builder

所以我不太了解 subversion，但我使用 Versions svn 让我的 Xcode 项目在我的笔记本电脑和台式机之间保持同步，这是我遇到的第一个问题。周末外出时，我在笔记本电脑上做了很多工作，回家后尝试同步；但是，当我从笔记本电脑提交更改并在桌面上更新时，发生了一些奇怪的事情。该项目打开（在我的台式计算机上）但给了我以下错误：

```
The document "ClassInputViewController.xib" could not be opened. Could not read archive. 
```

以及该 xib 各行的大约 50 个合并冲突。仔细检查文件后，我发现在更新期间添加了 3 个新文件，这些文件不在我在笔记本电脑上提交的文件中：**ClassInputViewController.xib.mine**、**ClassInputViewController.xib.r101**和**ClassInputViewController.xib.r102**Versions 说不受版本控制。如果我删除这些文件，Xcode 中的合并冲突就会消失，但仍然会出现主要的“无法读取存档”错误。我知道一个简单的解决方案是在我的笔记本电脑上备份项目，从 svn 中删除它并重新添加到工作文件中，但我想弄清楚如何解决这个问题，以防万一它再次发生项目不会那么容易做到这一点。有谁知道在这种情况下该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:32:36.490

哦，我看过很多次了。最佳解决方案 - 它只是丢弃最不严重的变化。

# api - 有没有办法挂钩 Magento 的结帐事件？

> ID：14946405
> 
> 赞同：0
> 
> 时间：2013-02-18T22:23:18.560
> 
> 标签：api, magento

我正在创建一个需要连接到 Magento 中的结帐成功事件的自定义模块。

我需要做的是：

1）。一旦自定义成功签出，我需要在成功页面上使用是/否单选按钮提供特别优惠并提交表格。如果他们选择是，我需要将他们的详细信息添加到我已经创建的 Magento 后端的自定义网格中。

2）。然后，我需要使用 POST 方法对第三方 CRM 进行 API 调用，以验证客户详细信息并将其添加到他们的计费系统中。

3）。完成后，需要有一种方法来更新 Magento 中的 Grid 以将状态从“pending ...”更改为“accepted”

我已经启动了这个模块，但我似乎找不到任何关于从 Magento 发出 API 调用或 POST 请求的明确文档，我开始怀疑这是否真的可能？

如果有人知道如何执行上述操作的扩展或文档，或者他们知道更简单的解决方案，我将不胜感激......

如有必要，如果有人能够帮助我，我可以在 Github 上提交我的模块作为参考

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:41:54.513

1.  通过 XML将自定义块添加到`checkout_onepage_success`布局句柄。此块将包含您的表单。
2.  在处理您的表单的控制器中，您可以使用[**`Zend_Http_Client`**](http://framework.zend.com/manual/1.12/en/zend.http.client.html)向第三方 API 发出 POST 请求。或者[**`Zend_Rest_Client`**](http://framework.zend.com/manual/1.12/en/zend.rest.client.html)，[**`Zend_Soap_Client`**](http://framework.zend.com/manual/1.12/en/zend.soap.client.html)或者[**`Zend_XmlRpc_Client`**](http://framework.zend.com/manual/1.12/en/zend.xmlrpc.client.html)如果使用这些协议中的任何一个。所有这些 Zend 包都可以在 Magento 中轻松获得。
3.  这只是基本的加载和更新模型，您应该已经知道如何执行此操作

# c# - 无论方向如何，始终获得正确的轴继续前进。二维

> ID：14946407
> 
> 赞同：0
> 
> 时间：2013-02-18T22:23:27.160
> 
> 标签：c#, math, xna

我正在努力思考提出这个问题的最佳方式，如果我没有多大意义，请原谅我，但如果我在轴上移动，那么在相反轴上复制该移动的最佳方式是什么？

到目前为止，我的方法是：

获取从 A 点到 B 点的距离。翻转轴（所以 X = Y 和 Y = X）。沿着这个新方向从 A 点移动。

看下图，

我遇到的问题是这个，水平/垂直它工作正常，所以例如如果方向是正确的，当翻转时，如果你翻转轴，给定的方向将向下移动（如果使用笛卡尔坐标系）圆形的。

但是，在对角线上进行操作会遇到问题，如果我移动正 x 和正 y，然后翻转轴，我仍然会在两个正方向上移动。我真正想要的是负 x，正 y 或正 X，负 y。

请有人解释一下数学解释，我觉得我知道这一点，但我的脑袋似乎被不同的尝试和测试的解决方案弄糊涂了。

编辑：

![笛卡尔平面](../Images/08b297310d24573ca1a2a5e5144156cf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:33:59.110

听起来您实际上是在尝试在 y=x 线上反射点（使用 Microsoft 样式的屏幕坐标，其中 (0,0) 是左上角）。如果是这样，(20,20) 不应该改变，因为它位于那条线上。你希望它变成什么？

编辑：我只是仔细检查了我的工作。给定一条从 (x1,y1) 到 (x2,y2) 的无向线，具有相同中点的等长垂线从 `((y2-y1+x1+x2)/2,(x1-x2+y1+y2)/2)`到`((y1-y2+x1+x2)/2,(x2-x1+y1+y2)/2)`

# android - android在Eclipse图形布局中添加设备

> ID：14946408
> 
> 赞同：2
> 
> 时间：2013-02-18T22:23:29.530
> 
> 标签：android, eclipse, user-interface

就像我可以创建自定义`AVD's`一样，我想为我的图形布局创建自定义设备预览。有可能吗？怎么做？

否则，没有其他选项（我知道）可以在不制作 AVD 并在模拟器中查看它的情况下预览自定义设备，这是一个非常漫长的过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:25:03.977

如果您使用的是适用于 Eclipse 的 SDK 工具和 ADT 插件的当前版本，那么您在 AVD 管理器中创建的任何自定义设备定义都应显示在设备定义的预览工具栏下拉列表中。

# twitter-bootstrap - 在引导程序中对齐前置/附加文本框

> ID：14946413
> 
> 赞同：0
> 
> 时间：2013-02-18T22:23:49.460
> 
> 标签：twitter-bootstrap, tablecell

我一生都无法弄清楚如何在表格单元格中排列最多 2 个前置和附加文本框。有没有人成功做到这一点？我弄乱了显示、浮动和宽度选项......

```
<td class="success">
<div class="input-prepend">
   <span class="add-on"> USD $ </span>
    <input type="text" class="input-small pi-dollarchange">
 </div>
 <div class="input-append">
     <input type="text" class="input-small pi-perchange">
    <span class="add-on"> % </span>
  </div>
  </td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:11:14.393

JSfiddle [Jsfiddle 与示例](http://jsfiddle.net/shail/WcTgk/5/)

要正确对齐输入和标签，请执行以下操作：-
1\. 将标签和控件包装在`.control-group`.
2\. 添加`.control-label`到标签
3\. 将所有关联的控件包裹起来`.controls`以正确对齐。

```
<div class="control-group">
    <label class="control-label" for="inputDollars">Dollars</label>
    <div class="controls">
        <div class="input-prepend"> <span class="add-on"> USD $ </span>

            <input type="text" class="input-small pi-dollarchange"
            placeholder="dollar">
        </div>
    </div>
</div>
<div class="control-group">
    <label class="control-label" for="inputPercentage">Percentage</label>
    <div class="controls">
        <div class="input-append">
            <input class="span2 pi-perchange" id="appendedInput" type="text" placeholder="percentage"> <span class="add-on"> % </span>

        </div>
    </div>
</div> 
```

# java - 使用 Spring 和 Maven 的模块化 Web 应用程序

> ID：14946417
> 
> 赞同：10
> 
> 时间：2013-02-18T22:24:17.117
> 
> 标签：java, maven, web-applications, spring-mvc, modular

我正在尝试用 Java 设计一个中型 Web 应用程序的体系结构，我想就如何做到这一点获得一些建议。

该项目包括一个基础网站和一些模块。例如，一个模块将提供用户注册，另一个模块将提供 Web 服务，等等......

每当我需要将应用程序交付给新客户时，理想的做法是挑选他想要的模块，做一些主题（css、图像，也许是 jsp）并开发他可能需要的自定义模块（如果有的话）。

我查看了 maven 多模块项目、战争覆盖，但我发现很难对应用程序进行分区，尤其是在模块配置方面（例如，从模块中合并全局 spring 配置）。有人可以指出这样一个系统的例子吗？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T01:55:39.230

合并弹簧配置很容易。在每个模块中，在其 /WEB-INF/classes 目录中打包一个 spring 上下文文件。当你覆盖时，依赖中的WEB-INF类中的所有类和资源都会被放入你的应用程序中的WEB-INF/classes中。（ps，如果您将其打包为 .jar 也可以，但如果这样做，您将无法覆盖 .jsp 文件）

然后只需导入它们即可。这最好通过使用设置模式来查找文件来完成。这是一个例子：

```
<import resource="classpath*:/module/*-context.xml" /> 
```

这将导入与此模式匹配的所有类路径资源。

基于注释的示例：

```
@Configuration
@ImportResource(value={"classpath*:/module/*-context.xml"})
public class MyConfiguration { ... } 
```

如果您需要在模块中进行任何 web.xml 自定义，那么 web.xml 配置会给您带来更多麻烦。您当然可以为此使用 servlet 3.0，但它需要正确的服务器进行部署。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-30T21:19:13.347

fwiw，经过一些简单的 Spring 导入经验后，我们开发了用于 Spring 的 osgi-less 模块化的微型框架。导入的第一个问题是 bean 名称冲突，您不能在两个上下文中拥有同名单例，以及许多其他麻烦.. tbc [https://github.com/griddynamics/banshun](https://github.com/griddynamics/banshun)

——迈克

# javascript - 如何结合 Backbone.Marionette 和 Backbone-Boilerplate？

> ID：14946418
> 
> 赞同：0
> 
> 时间：2013-02-18T22:24:21.820
> 
> 标签：javascript, backbone.js, javascript-framework, marionette, backbone-boilerplate

有没有关于如何结合 Backbone.Marionette 和 Backbone-Boilerplate 的教程或见解？我遇到了麻烦。用于集成的 Marionette wiki 已过时且尚未完成。

我是否可以维护样板模块设置，但也可以使用 Marionette 视图？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:26:49.283

是的，您可以只使用视图。您不需要使用所有的木偶，只需使用您需要的部分即可。不幸的是，你仍然需要带上所有的木偶——模块和应用程序等等。这是我希望在未来更容易做到的事情......只是拥有视图或只是拥有应用程序结构等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-05T07:18:01.947

对于另一种选择，看看[早午餐](http://brunch.io)

它是一个应用程序构建器/组装器，作为节点模块分发，因此您可以使用 npm 以标准节点方式安装它。

它会为你生成一个样板应用程序，然后它会在你的命令下“编译”它的所有组件到 html/javascript/css。您可以像这样使用默认样板

`brunch new your-project`

或使用许多样板应用程序（早午餐用语中的骨架）中的任何一个，您可以通过以下方式在早午餐骨架上检查它们

`brunch new your-project -s url-of-skeleton`

就您的问题而言，您可能会在骨架页面中找到两个 Marionette 驱动的 - 不过值得注意的是，它们都没有使用 BBB - ：

与 MarionetteJS 的早午餐

和

[木偶早午餐](https://github.com/sandy98/brunch-with-puppets)

即使您要求提供教程，检查生成的应用程序的代码也可能具有很高的教育意义。在我的情况下确实如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T08:12:12.403

[这](https://stackoverflow.com/questions/11410059/suggested-bootstrap-boilerplate-sample-for-backbone-marionette-application/11598371#11598371)是一个起点，它并不完美，但它会帮助您入门。

# html - 为什么webkit浏览器在播放前需要下载整个html5视频（mp4）？

> ID：14946421
> 
> 赞同：12
> 
> 时间：2013-02-18T22:24:40.420
> 
> 标签：html, google-chrome, html5-video

从 Chrome/Safari（最新和 Chrome Canary）开始播放 HTML5 视频需要相当长的时间。似乎需要在开始播放之前下载整个视频文件。

在 Firefox 18.0.2 (HTML5) 和 IE 8,9,10 (Flash) 中，播放几乎是即时的。

在 Chrome 中，我在使用时看到了这个问题：

*   chrome原生播放器
*   VideoJS [http://videojs.com/](http://videojs.com/)
*   MediaElementJS [http://mediaelementjs.com/](http://mediaelementjs.com/)

我发现即使在 Chrome 中打开本地 mp4 (h264) 文件也需要很长时间才能加载：开发人员网络工具显示视频正在加载/挂起，在大文件上需要 10-15 秒。

供参考，这是一个视频： http: [//mediaelementjs.com/](http://mediaelementjs.com/)

在开始播放之前下载完整的视频文件 (5MB)。这个小视频还不错，但是大文件却很痛苦。

我有两个问题：

*   Webkit 是否支持渐进式下载/播放？
*   如果没有，是否有已知的解决方法？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2018-02-09T10:30:08.813

正如福斯特所说，元数据块需要在视频的早期，这样视频就不必加载到它上面（如果它放在最后，可能需要加载整个视频）。

但是您不需要`.exe`来自产品网站的一些黑盒文件来移动元数据块。以下是如何使用 good old 来做到这一点[`ffmpeg`](https://ffmpeg.org)：

```
ffmpeg \
-i input.mp4 \
-codec copy \
-movflags faststart \
-f mp4 output.mp4 
```

这会：

1.  `-i input.mp4`:`input.mp4`作为输入。
2.  `-codec copy`：按原样复制流（没有编码/解码步骤）。
3.  `-movflags faststart`：将元数据块移动到开头。
4.  `-f mp4 output.mp4`: 格式化为 MP4 文件并以名称输出`output.mp4`。

链接到[此处](https://ffmpeg.org/ffmpeg.html)`ffmpeg`的完整文档。[这里](https://github.com/adaptlearning/adapt_authoring/wiki/Installing-FFmpeg)有各种平台的安装说明（ Mac用户一个简单的就够了）。`brew install ffmpeg`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-10T12:23:26.273

问题既不是编解码器也不是浏览器......

**问题是您的视频文件中的元块！**

大多数浏览器只有在下载了元数据后才能播放视频。一些编码工具将此元块放在输出文件的末尾，因此浏览器必须加载整个文件才能“查看”元数据。

**解决方案：**

[http://rndware.info/products/metadata-mover.html](http://rndware.info/products/metadata-mover.html)

获取这个小工具，打开您的视频，让 MetaData 移动器发挥它的魔力。

不需要那么长时间，您的文件就可以流式传输了！

# ruby-on-rails - 通过 has_many 保存时 Rails 在保存时抛出错误（参数 1 表示 0）

> ID：14946422
> 
> 赞同：0
> 
> 时间：2013-02-18T22:24:42.167
> 
> 标签：ruby-on-rails, ruby-on-rails-3, has-many, rails-activerecord

由于我使用“updated_at”的性质（特别是在原子提要中使用），我需要避免在保存记录而没有任何更改的情况下更新 updated_at 字段。为了做到这一点，我阅读并最终得到以下内容：

```
module ActiveRecord
    class Base

    before_validation :clear_empty_strings

    # Do not actually save the model if no changes have occurred.
    # Specifically this prevents updated_at from being changed
    # when the user saves the item without actually doing anything.
    # This especially helps when synchronizing models between apps.
    def save

        if changed?
            super
        else
            class << self
                def record_timestamps; false; end
            end
            super
            class << self
                remove_method :record_timestamps
            end
        end

    end

    # Strips and nils strings when necessary
    def clear_empty_strings
        attributes.each do |column, value|
            if self[column].is_a?(String)
                self[column].strip.present? || self[column] = nil
            end
        end
    end

    end
end 
```

这适用于我的所有模型，除了我的电子邮件模型。一封电子邮件可以有多个发件箱。发件箱基本上是一个两列模型，其中包含一个订阅者（电子邮件收件人：）和一封电子邮件（发送给订阅者的电子邮件）。当我更新发件箱的属性然后保存电子邮件时，我在保存时收到（参数 1 代表 0）错误（它指向保存方法中的“超级”调用）。

电子邮件.rb

```
has_many :outboxes, :order => "subscriber_id", :autosave => true 
```

发件箱.rb

```
belongs_to :email, :inverse_of => :outboxes
belongs_to :subscriber, :inverse_of => :outboxes
validates_presence_of :subscriber_id, :email_id
attr_accessible :subscriber_id, :email_id 
```

更新：我还注意到，当我更改关联模型时，没有填充“更改”数组。

```
@email.outboxes.each do |out|
    logger.info "Was: #{ out.paused }, now: #{ !free }"
    out.paused = !free
end unless @email.outboxes.empty?
@email.save # Upon saving, the changed? method returns false...it should be true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:01:50.450

...叹。在花了无数小时试图找到解决方案后，我遇到了[这个](https://stackoverflow.com/questions/11320723/has-many-autosave-true-skips-validation-when-saving-children)。我是否知道“保存”方法实际上需要一个参数，我会更早地弄清楚这一点。显然在这方面查看[源代码](http://apidock.com/rails/ActiveRecord/Base/save)并没有帮助。我所要做的就是在 save 方法中添加一个 args={} 参数并将其传递给“super”，现在一切正常。保存未修改的记录而不更新时间戳，修改的记录与时间戳一起保存，并且保存关联没有错误。

```
module ActiveRecord
    class Base

    before_validation :clear_empty_strings

    # Do not actually save the model if no changes have occurred.
    # Specifically this prevents updated_at from being changed
    # when the user saves the item without actually doing anything.
    # This especially helps when synchronizing models between apps.
    def save(args={})

    if changed?
        super args
    else
        class << self
        def record_timestamps; false; end
        end
        super args
        class << self
        remove_method :record_timestamps
        end
    end

    end

    # Strips and nils strings when necessary
    def clear_empty_strings
    attributes.each do |column, value|
        if self[column].is_a?(String)
        self[column].strip.present? || self[column] = nil
        end
    end
    end
end 
```

# highcharts - Highcharts Bar 超过 MaxValue

> ID：14946423
> 
> 赞同：1
> 
> 时间：2013-02-18T22:24:49.903
> 
> 标签：highcharts, max

我想在 Highcharts 中制作一个简单的条形图。但是，我希望最大值小于系列中的实际最大值，并提供正在发生的视觉线索。

如果您参考了 highcharts 演示： [http ://www.highcharts.com/demo/bar-basic](http://www.highcharts.com/demo/bar-basic)

我希望刻度以 4,000 结束，即使最长的条延伸到 4054。这部分很简单，只需设置 Max。

但是，我想要一些视觉指示器让用户知道条形图超出了最大值。这是针对系列中的最高值非常高的情况，这使得很难看到图中的其他值相对于彼此。我们基本上不需要关注异常值，但需要知道它位于轴之外。

经过深思熟虑，我可以将刻度设置为小于最大值，并以 tickInterval 为假结束。还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:45:38.000

好吧，但是应该在哪里显示这些信息？

我准备了简单的示例，在工具提示和图表下方的报告 div 中标记了此信息。

[http://jsfiddle.net/sbochan/8sKcs/](http://jsfiddle.net/sbochan/8sKcs/)

```
$(function () {
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'bar'
        },
        title: {
            text: 'Historic World Population by Region'
        },
        subtitle: {
            text: 'Source: Wikipedia.org'
        },
        xAxis: {
            categories: ['Africa', 'America', 'Asia', 'Europe', 'Oceania'],
            title: {
                text: null
            }
        },
        yAxis: {
            min: 0,
            max:4000,
            title: {
                text: 'Population (millions)',
                align: 'high'
            },
            labels: {
                overflow: 'justify'
            }
        },
        tooltip: {
            formatter: function() {
                if(this.y > (this.series.chart.yAxis[0].max))
                    return this.series.name +': '+ this.y + ' max is smaller: '+this.series.chart.yAxis[0].max ;
                else
                    return this.series.name +': '+ this.y;
            }
        },
        plotOptions: {
            bar: {
                dataLabels: {
                    enabled: true
                }
            }
        },
        credits: {
            enabled: false
        },
        series: [{
            name: 'Year 2008',
            data: [973, 914, 4054, 732, 34]
        }]
    },function(chart){

        var max = chart.yAxis[0].max,
            content = '<h2>Points</h2><br/>';

        $.each(chart.series,function(i,serie){
            $.each(serie.data,function(j,data){
               if(data.y > max)
                   content += 'Point: '+data.y+' is bigger than max: '+max;
            });
        });

        $('#report').html(content);

    });
}); 
```

});

编辑：

您还可以添加

```
data.graphic.attr({
                   fill:'yellow'
                 }); 
```

更改条的颜色。

# javascript - 从 html 表中的 Google 工作表访问单个值

> ID：14946427
> 
> 赞同：0
> 
> 时间：2013-02-18T22:25:04.887
> 
> 标签：javascript, jquery

我正在尝试使用 tabletop.js 将数据推送到 HTML 表（TD 有 id [）](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDIQFjAA&url=https://github.com/jsoma/tabletop&ei=BaoiUfDZBqbg0QHcq4CoBw&usg=AFQjCNFxd0PCIhbJP6TuGqEJbebnbTpMKA&bvm=bv.42553238,d.dmQ)。我可以将整个数组拉入其中一个 td，但是如何从 tabletop.js 构建的数组中仅拉入一个值？

```
$.each( tabletop.sheets("schools").all(), function(i, name) {
      var One = $('<p> '+ name.one + '</p>');
      One.appendTo("td[id$=roundOne]");
    }) 
```

这会将列“one”[电子表格](https://docs.google.com/spreadsheet/pub?key=0AulEnFPPj4jWdE5PY2liVS1tbXZfVnBJUU9NWE5QcXc&output=html)中的每个值放在一个带有 roundOne id 的 td 单元格中。我只想要第一个 roundOne td 中的第一个值，然后是第二个 roundOne td 中的第二个值，依此类推。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:44:57.010

将您的选择器包装`td`在 jquery 中，然后仅选择第`i`th 个元素。当您选择 时`"td[id$=roundOne]"`，它会选择`td`具有该 ID 的所有 '。

这是一个工作示例。[http://jsfiddle.net/TshQu/](http://jsfiddle.net/TshQu/)

# javascript - 如何修复“未捕获的 TypeError：无法调用 null 的方法‘appendChild’”

> ID：14946428
> 
> 赞同：3
> 
> 时间：2013-02-18T22:25:05.487
> 
> 标签：javascript, append, appendchild

我试图从 HTML 文本区域中获取文本，并在按下“提交”按钮时调用 create() 方法。该方法试图使用来自文本区域的消息，并将其发布到它自己的带有类的 p 标签，并在它自己的 p 标签和它自己的类中发布一个日期戳。

这些都将在 div 的“评论”中。我得到的错误（使用 Chrome 中的开发人员工具）是

> 未捕获的类型错误：无法调用 null 的方法“appendChild”。

这是针对“cmt.appendChild(divTag);”的。我对 Javascript 很陌生，这只是我提高技能的练习。非常感谢所有帮助！

```
var cmt = document.getElementById('comments');

function create() {

    var username = 'User',
        message = document.getElementById("textBox").value,
        divTag = document.createElement('div'),
        p1 = document.createElement('p'),
        p2 = document.createElement('p');

    divTag.className = 'comment';

    p1.className = 'date';
    p1.innerHTML = new Date();
    divTag.appendChild(p1);

    p2.className = 'message';
    p2.innerHTML = username + ': ' +message;
    divTag.appendChild(p2);

    cmt.appendChild(divTag);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T22:27:54.107

您收到的错误表明您的页面上没有 ID 为“comments”的元素。当没有找到具有此类 ID 的元素时[`document.getElementById`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)将返回，因此将作为.`null``cmd.appendChild(divTag)``null.appendChild(divTag)`

如果您确定该元素存在，则您可能正在执行您的 JavaScript，该 JavaScript**在浏览器创建该元素之前**`cmt`分配了该变量。为防止这种情况发生，标准做法是将包含外部 JavaScript的标记**放在结束****标记**之前。**`<script>`**`</body>`****

 **如果由于某种原因无法移动脚本标记，请尝试运行使用`$(document).ready()`(jQuery)[或等效](https://stackoverflow.com/questions/3989095/javascripthow-to-write-document-ready-like-event-without-jquery)项分配变量的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-27T21:45:49.147

实际上，他的代码很好。只是 JavaScript 在 HTML 之前运行。一个简单的解决方法是将所有代码嵌套在具有任何名称的函数中。然后在 HTML 加载完成后使用 window.onload 运行该函数。所以基本上：

```
window.onload = function any_name()
{
//code to be executed
} 
```

如果您不想移动脚本标记，这尤其有用。我通常喜欢将标签留在原处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T22:30:52.377

如果存在所需的元素，您的代码就可以工作。正如你在[**这个 Fiddle**](http://jsfiddle.net/yDvQp/)中看到的那样。

如果 HTML 类似于：

```
<div id="comments">
    <input id="textBox" type="textBox" value="Hello" />
</div> 
```

我的猜测是其中一个标识符可能拼写错误，或者您期望的元素不存在。

但是，如果您在外部文件中运行脚本，它可能会尝试在文档完全加载之前执行，因此您的脚本指的是 DOM 中**尚未准备好的元素。**

在 jQuery 中，你会环绕一个`$(document).ready(function(){// your code here..})`。
在这篇 SO 帖子中有一些关于如何仅在 JavaScript 中执行此操作的详细信息：[**Documen Ready 等价物没有 jQuery**](https://stackoverflow.com/questions/799981/document-ready-equivalent-without-jquery)。**

# javascript - 图像从 Jscript 到服务器，无需使用 base64 回发

> ID：14946436
> 
> 赞同：0
> 
> 时间：2013-02-18T22:25:34.847
> 
> 标签：javascript, asp.net, base64, webmethod

我有一张画布，上面有一张从网络摄像头拍摄的图像。我想将该图像发送到我的服务器，同时避免任何回发。（通过回发，它会强制客户端在每次保存图像时验证网络摄像头的使用情况，我不希望这样。:()

这是Jscript

```
function sendPicture() {
        event.preventDefault();
        var b64 = document.getElementById("canvas").toDataURL("image/png");
        b64 = b64.replace('data:image/png;base64,', '');
        PageMethods.SaveImage(b64, success, error);
    }

    function success()
    { console.log("hoorah"); }

    function error()
    { console.log("boo"); } 
```

这是尚未编写的代码隐藏，但没关系，因为它永远不会进入内部。

```
[WebMethod]
    public static bool SaveImage(string image)
    {
        return false;

    } 
```

代码永远不会到达 WebMethod，因为 b64 太长了。（超过 2000 个字符）我试过了

```
var imgObj = new Image();
        imgObj.src = b64;
        PageMethods.SaveImage(imgObj, success, error); 
```

不工作。

请帮忙。:(

编辑：忘记放页面html

```
 <div class="formRow">
        <input type="button" id="snap" value="Prendre photo" />
        <input type="button" id="send" value="Enregistrer Photo" />
    <br />
    <video id="video" width="320" height="240" autoplay></video>
    <canvas id="canvas" width="320" height="240"></canvas>

    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:36:44.583

我设法通过制作一个新的asp页面并将b64按参数发送到该页面来完成它。

新页面 ：

```
public partial class SaveImage : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!string.IsNullOrEmpty(Request.Form["data"]))
        {
            string b64 = Request.Form["data"];
            byte[] binary = Convert.FromBase64String(b64);
             writeToFile(binary);
        }
    }

    public void writeToFile(byte[] array)
    {
        var fs = new BinaryWriter(new FileStream(Server.MapPath("~") + "/Images/Photo/" + Session["IdParticipantPhoto"].ToString() + ".png", FileMode.Append, FileAccess.Write));
        fs.Write(array);
        fs.Close();
    }
} 
```

脚本：

```
function sendPicture() {
    event.preventDefault();
    var b64 = document.getElementById("canvas")
    .toDataURL("image/png");
    b64 = b64.replace('data:image/png;base64,', '');
    console.log("Image   " + b64);
    $.ajax({
        type: 'POST',
        url: '/LAN/SaveImage.aspx',
        data: { "data": b64 },
        success: function (msg) {
            alert("Uploaded successfully");
        }
    });
} 
```

# c++ - 运行时检查失败 #2 - 变量“cid1”周围的堆栈已损坏

> ID：14946437
> 
> 赞同：2
> 
> 时间：2013-02-18T22:25:35.960
> 
> 标签：c++, c, visual-studio-2010

我是 C 编程的新手，目前正在大学上课。我遇到了这个错误，并且不确定如何在谷歌数小时后修复它。我正在创建一个打印成绩报告并不断遇到此错误的程序。

这是代码：

```
#include <stdio.h>
#include <stdlib.h>

int main (void)
{   char Name[20];
    char cid1[5]="", cid2[5]="", cid3[5]="", cid4[5]="", cid5[5]="", cid6[5]="";
    char Description1[20]="", Description2[20]="", Description3[20]="", Description4[20]="", Description5[20]="", Description6[20]="";
    int hrs1 = 0, hrs2=0, hrs3=0, hrs4=0, hrs5=0, hrs6=0;
    char grade1[1]="",grade2[1]="",grade3[1]="",grade4[1]="",grade5[1]="",grade6[1]="";

    printf("Enter Students Name ");
    gets(Name);

    printf("Enter Class ID ");
    scanf("%s", &cid1);

    printf("Enter Class Description ");
    gets(Description1);

    printf("%s", Name);
    printf("%s", cid1);
    printf("%s", Description1);

    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:27:10.913

```
scanf("%s", &cid1); 
```

您需要致电：

```
scanf("%s", cid1); 
```

并且您的数组是用`5`元素大小声明的，因此如果您传递的字符数超过`4`（您必须计算尾随`\0`），那么您将调用未定义的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T22:29:26.730

您只能读取数组支持的内容。如果您声明一个 char 数组有 5 个字节 ( `char cid1[5]`)，那么您最多可以输入 4 个字符（第 5 个是空终止符）。如果您输入更多，您将破坏内存并收到该消息。

`gets`也是一个非常不安全的函数，用于从输入中读取字符串，因为不可能避免缓冲区溢出。**永远不要**使用它。`fgets`与. 一起使用`stdin`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T22:34:36.840

我不确定这是否是唯一的问题，但马上我可以看到字符串分配存在问题。

请记住，C 中的字符串存储为一系列 char 值，以 0 结尾。这意味着一个五位数的课程名称将需要六个字符来保存它......类似于 { 'C', 'S', ' 1'，'0'，'1'，'\0'}。这也意味着以字符串形式显示的单个数字等级将需要两个字符。

由于 gets() 函数将该零附加到字符串的末尾，因此您的 Grade1[1] 数组（作为一个示例）正在溢出。它被声明保存一个字符，但正在写入两个字符。除其他外，这最终会破坏您的堆栈。我会将所有数组的大小至少再增加一个字符。

另一个问题是您没有错误检查，因此可能有人会输入超过 20 个字符的名称并导致错误，但这可能只是因为您仍在学习基础知识。在“真实”代码中，您可能永远不会使用gets()。

# java - 自定义 JButton 尺寸不正确？

> ID：14946438
> 
> 赞同：1
> 
> 时间：2013-02-18T22:25:37.733
> 
> 标签：java, swing, jbutton, gridbaglayout

我正在使用 Netbeans 创建一个匹配游戏，但不是 GUI 编辑器（它很烂）。因此，基本上，我创建了一个名为 Card 的新类，它扩展了 JButton 类。在构建时，按钮的大小设置为 100px x 100px 并设置了一个图标。当我将按钮添加到 GridBagLayout 中的 JPanel 时，它不是预期的大小。

这是我的一些代码：

JFRAME 类：

```
package matchinggame;

... imports ...

public class MatchingGameWindow extends JFrame {

    Card[] cards = new Card[16]; //16 game cards

    public MatchingGameWindow() {
         ...
         //Create new game panel (for the cards)
         JPanel gamePanel = new JPanel(new GridBagLayout());
         //gamePanel.setSize(500,500); removed as it is not needed.
         ...
         this.add(gamePanel, BorderLayout.CENTER);
         //Create 16 card objects
         cards = createCards();

         //Create new grid bag constraints
         GridBagConstraints gbc = new GridBagConstraints();

         //Add the cards to the game panel
         int i=0;
         for (int y = 0; y < 4; y++) {
             gbc.gridy = y;
             for (int x = 0; x < 4; x++) {
                gbc.gridx = x;
                gamePanel.add(cards[i], gbc);
                i++;
             }
         }
    }

    public final Card[] createCards() {
        Card[] newCards = new Card[16];
        //New choices array
        ArrayList<Integer> choices = new ArrayList();
        int[] choiceValues = {0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7};
        //Add the initial choice values to the arraylist
        for (int i=0; i < choiceValues.length; i++) {
            choices.add(choiceValues[i]);
        }

        //Create 16 cards
        for (int i=0; i < 16; i++) {
            //Initial value of -1 for error checking
            int iconIndex = -1;
            //Loop until card is created
            while (iconIndex == -1) {    
                //Get a random number from 0 - 7
                Random r = new Random();
                int rInt = r.nextInt(8);
                //If the random number is one of the choices
                if (choices.contains(rInt)) {
                     //the icon # will be the random number
                     iconIndex = rInt;
                     //Get rid of that choice (it is used up)
                     choices.remove(new Integer(rInt));
                     //Create a new Card in the Card[]
                     newCards[i] = new Card(i,iconIndex);
                //If all the choices are gone
                } else if (choices.isEmpty()){
                    iconIndex = -1; //done creating this card (breaks out of loop)
                }
            }
        }
        //Return the created cards
        return newCards;
    }
} 
```

卡类：

```
package matchinggame;

import javax.swing.ImageIcon;
import javax.swing.JButton;

public class Card extends JButton {

    final static ImageIcon defaultIcon = new ImageIcon("cardback.jpg");
    ImageIcon secretIcon;
    boolean isRevealed = false;

    ...

    public Card(final int cardIndex, int secretIconIndex) { 
        //Size is 100px by 100px            
        setSize(100, 100);
        //Default icon is card back image
        setIcon(defaultIcon);
        //Get the secret icon behind the back of the card
        secretIcon = icons[secretIconIndex];    
    }
} 
```

使用这段代码，我得到了这样的结果： ![这就是结果。](../Images/3785659e6c5e3e8acfa10df5eb6f9bf7.png)

关于我在这里做错了什么的任何想法？

编辑：我重写了 getPreferredSize 方法，就像 Hovercraft Full Of Eels 说的那样，它奏效了！我在 Card 类中添加了这段代码：

```
@Override
public Dimension getPreferredSize() {
    return new Dimension(100,100);
} 
```

并得到了我想要的结果： ![固定的！](../Images/4368a55891f6dbd78e659f572231f3c5.png)

现在我必须对图标做错了，因为它们没有按应有的方式显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:26:51.317

您不应`setSize(...)`在类的构造函数中使用，而应覆盖类的`getPreferredSize()`方法以返回 Dimension(100, 100)。实际上，您的程序中应该没有`setSize(...)` *任何位置*。取而代之的是使用合适的布局管理器，`pack()`在添加所有组件之后调用 JFrame，然后再将其设置为可见，并让布局管理器适当地调整 GUI 的大小。

# java - 绘制一个块，而不是 jfreechart 中的一个点

> ID：14946441
> 
> 赞同：1
> 
> 时间：2013-02-18T22:25:56.237
> 
> 标签：java, jfreechart

我正在使用 jfreechart 绘制关于计算机中操作记录器的图表。

例如：1：**2012/09/39/28 06:55:37** 8 S 0x1c0c762 **终端**--geometry=134x35 --display :0.0 --role=Terminal-0x10591b0-16869-1343137248 --show-menubar --show-边界 --hide-toolbars --working-directory /home/termier “终端”，“终端” “终端 - termier@akagi: ~” 2: **2012/09/39/28 06:55:41** 8 S 0x1600313 **/usr /lib/xfce4/notifyd/xfce4-notifyd** "xfce4-notifyd", "Xfce4-notifyd" "xfce4-notifyd"

现在，我可以像 (2012/09/39/28 06:55:37,Terminal) 一样绘制每个点，scilicet: x 轴是 2012/09/39/28 06:55:37，Y 轴是：终端（我使用 1 表示终端，至于其他命令，就像终端... 2:/usr/lib/xfce4/notifyd/xfce4-notifyd 等...）

但我需要的是画一个块，比如：

终端 1: ***_* __ *_* __ *_* _** _S||||||

/usr/lib/xfce4/notifyd/xfce4-notifyd2: ***_* __ *_* __ *_* __ *_* ___** _S||||||

com 3: ***_* __ *_*** _S||||| (S:start ,eg: 2000/12/12 09:22:10 start) .....（当第一个命令结束时，另一个将开始，我只是可以开始，这意味着 post 命令是上一条命令的结束时间）

但不是： 1：S 2：S 3：S

这里有一些代码给你。

```
private XYDataset createDataset() {

    Calendar precal;
    Calendar postcal;

    this.flags = modelfocus.getListflag();
    commands = modelfocus.getListCommand();
    DateFormat formatedate = new SimpleDateFormat("yyyy/MM/ww/dd HH:mm:ss");
    precal = Calendar.getInstance();
    postcal = Calendar.getInstance();

    for (int i = 0; i < countCom; i++) {
        this.series[i] = new TimeSeries(commands.get(i));
    }

    for (Focus listTxt : modelfocus.getList()) {
        try {
            Date d = new Date();
            d = formatedate.parse(listTxt.date2String());
            System.out.println(d);
            precal.setTime(d);
            //postcal.setTime();
        } catch (ParseException e) {
            System.out.println("Can't change this date");
            e.printStackTrace();
        }
        String eachCmd = listTxt.getCommand();
        for (int i = 0; i < countCom; i++) {
            if (eachCmd == commands.get(i)) {
                series[i].addOrUpdate(new Second(precal.getTime()),
                        flags.get(i));
            }
        }

    }
    TimeSeriesCollection dataset = new TimeSeriesCollection();
    for (int i = 0; i < countCom; i++) {
        dataset.addSeries(this.series[i]);
    }
    return dataset;
} 
```

请有人帮忙解决这个问题，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:39:01.853

如本[例](https://stackoverflow.com/a/14822991/230513)所示，您可以更改`Shape`用于呈现时间序列值的值。A`Rectangle`如下所示。

```
r.setSeriesShape(0, new Rectangle(-4, -4, 9, 9)); 
```

![图片](../Images/efa0c90a96b2b0942d78b296d9762d6c.png)

# javascript - DIV 元素光标的行为不一致

> ID：14946447
> 
> 赞同：0
> 
> 时间：2013-02-18T22:26:26.447
> 
> 标签：javascript, html, css, jsp, dhtmlx

我在 JSP 页面上有一个 DIV 元素，其行为在以下 CSS 类中定义：

```
.toolbarRight .shortcut {
background-position: left center;
background-repeat: no-repeat;
width:16px;
height:16px;
margin:0 8px 0 0;
display:inline;
cursor:pointer;
position:relative;
top:6px;
float:left;
border:none;
}

span.toolbarRight .export {
background-image: url('/images/excel.gif');
} 
```

所以基本上当你用鼠标悬停在它上面时，它应该变成一个指针。问题是它只变为元素底部 1/4 上的指针，而不是顶部 3/4 上的指针。查看下面的图片以说明问题。

图 1：鼠标光标在 Excel 图标底部 1/4 处（变为指针）：

![在此处输入图像描述](../Images/568c5d8a990b5a72d5e54862b5b32937.png)

图 2：鼠标光标在 Excel 图标的顶部 3/4 上（不变为指针）：

![在此处输入图像描述](../Images/13b2b658f64f6ea9fd542c72faa1eaf4.png)

另一件奇怪的事情是它只发生在我当前的屏幕配置中，其中包括两个 DHTMLX 网格，一个在屏幕的上半部分，另一个在底部（看下图；出现问题的 Excel 图标以黄色圈出） ：

![在此处输入图像描述](../Images/79401f60a86e207da6e6da6a6cffca4f.png)

如果我有三个网格（两个水平和一个垂直），则不会出现问题：

![在此处输入图像描述](../Images/84572ce571c9ba3deb224353debb3bd0.png)

有人知道这是什么原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:30:11.477

通常当我遇到这个问题时，这是因为您有另一个项目的填充与工具栏（或其他东西）重叠。由于底部 1/4 是可见的，因此它上方的某些东西与下方略有重叠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:32:22.140

其他答案可能是正确的，但您也可能在这里遇到浮动问题。

您可以通过应用强制父容器包裹其浮动的子容器`overflow: hidden;`。试试看。如果失败，请使用[clearfix](http://css-tricks.com/snippets/css/clear-fix/)。

另外，我不知道您`.toolbarRight .shortcut`班级的宽度和高度是否会保持不变，因为您将其设置为`display: inline`. 当您需要对事物应用宽度和高度时，请尝试使用 inline-block 或普通的旧块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T22:31:21.073

这是你的

位置：相对；顶部：6px；

组合 - 元素的位置比您想象的低 6 像素。图像可能会更高，但容器不会。将指针移至图像，而不是图像的容器

# android - Unity 3D Mobile 和 Windows Azure

> ID：14946451
> 
> 赞同：0
> 
> 时间：2013-02-18T22:26:43.253
> 
> 标签：android, ios, azure, unity3d

我正在使用 Unity 3D 编写游戏。目标将是 Windows Phone（最终）、Android 和 iOS。

我知道 Windows Azure SDK 可能是用 C# 编写的。但是，当我尝试导入 DLL 时，它似乎依赖于不属于 Unity .NET 的 .NET 内容。我以前遇到过这个。Unity 主要是 2.0 .NET。有一些 3.5、4.0 甚至 4.5 的东西，但它们都是实验性的，而且大部分都不能很好地工作。

我的问题是我是否可以访问 Azure DLL 的源代码 (C#)？

如果不是这样，那么有人可以帮助我进行 C# 原始调用以访问 Azure 移动实例的所有 Azure Web 服务吗？

我知道有一种 iOS Obj-C 方法可以做到这一点，但我更喜欢直接使用 C#，因此它将是 Android 和 iOS 的跨平台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:29:19.350

澄清一下，您正在寻找 Windows Azure 移动服务 SDK 代码？如果是这样，您可以在这里下载：

[https://github.com/WindowsAzure/azure-mobile-services](https://github.com/WindowsAzure/azure-mobile-services)

或者，您是否在寻找存储或其他 SDK？

# c++ - C++ 中的函数指针和重写函数

> ID：14946455
> 
> 赞同：4
> 
> 时间：2013-02-18T22:26:58.237
> 
> 标签：c++

我是 C++ 新手，现在对多态性概念和函数指针感到困惑。我脑子里有点混。

在下面的代码中，我声明了一个指向 BaseClass 中方法的函数指针。然后我将它分配给 &BaseClass::Print

最后两行是我感到困惑的部分：为什么这两行不会产生相同的结果？我想这是因为指针 myPtr 指向 v-table，但我不确定。另外，如果我想让 myPtr 调用重写的 BaseClass::Print() 函数，我该怎么做？

有人可以向我澄清一下吗？谢谢。

```
#include <iostream>
using namespace std;

class BaseClass{
    public:
        virtual void Print(){
            cout << "Hey!" << endl;
        }
};

class DerivedClass : public BaseClass
{
    public:
        void Print(){
            cout << "Derived!" << endl;
        } 
};

int main()
{
    BaseClass *b = new DerivedClass;

    void (BaseClass::*myPtr)();

    myPtr = &BaseClass::Print;

    (b->*myPtr)(); //print "Derived!"
    b->BaseClass::Print(); //print "Hey!"
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T22:31:08.110

该线路`(b->*myPtr)();`调用 的`BaseClass::Print`成员`b`。`BaseClass::Print`是一个虚函数，并且由于您通过指针类型调用它，因此将以多态方式查找。也就是说，将根据`b`（即`DerivedClass`）的动态类型找到正确的函数。

第二行`b->BaseClass::Print();`显式调用`Print`属于`BaseClass`. 这正是这个语法的用途。它说“嘿，我不在乎动态类型`b`是什么 - 我希望你调用`BaseClass`版本。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:31:39.500

即使您创建了类型的对象，`DerivedClass`它仍然具有有关它继承的类的信息，在这种情况下 - `BaseClass`。因此，当您使用时：

`b->BaseClass::Print();`

您只需要求`Print()`从其父级调用方法 - `BaseClass`。

# css - Blackberry Torch 9860 中的空白空间

> ID：14946459
> 
> 赞同：2
> 
> 时间：2013-02-18T22:27:16.040
> 
> 标签：css, html, cordova, blackberry

我正在使用 Phonegap 制作一个应用程序，该应用程序需要在 Blackberry、Android 和 iOS 中横向运行。在应用程序中，我已经使用 CSS 进行了响应式设计，以横向模式显示在设备上。我已将应用程序配置为以横向模式启动，并且它在 Android 和 iOS 中显示良好。

问题是黑莓，它在 Blackberry 9800 模拟器中显示得很好，但在 Blackberry Torch 9860 模拟器中，它在我的用户界面右侧有一个很大的空白区域。我正在使用这样的javascript设置尺寸：

```
$(document).ready(function(){
    document.body.style.height = Math.min(screen.height, screen.width) + 'px';
    document.body.style.width = Math.max(screen.height, screen.width) + 'px';    
} 
```

我想知道是什么导致了这个空白问题以及如何解决。谢谢！

# asp.net-mvc-4 - 如何将IClock注入MVC 4中的_Layout？

> ID：14946463
> 
> 赞同：3
> 
> 时间：2013-02-18T22:27:40.310
> 
> 标签：asp.net-mvc-4, ninject, nodatime

默认的 MVC 模板使用“@DateTime.Now.Year”来显示版权年份，但我更愿意在任何地方使用 NodaTime。

我目前正在使用 Ninject 将 IClock 的实例注入到执行特定时间或日期的控制器的控制器中。是否有推荐的方法来访问类似于“DateTime.Now”的 MVC 中的“全局 IClock”？我想我可以将 IClock 注入到每个控制器中，然后将其传递到每个视图中，但有时访问全局的东西会很好。

我知道我*可以*在 Layout 模板中使用 SystemClock.Instance ......改为引用一个全局的、可测试的 IClock 会更好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T22:35:37.650

您可以使用[子操作](http://haacked.com/archive/2009/11/17/aspnetmvc2-render-action.aspx)。

首先编写一个控制器，您可以在其中像往常一样使用依赖注入，其中将包含一个子操作：

```
public class CopyrightController: Controller
{
    private readonly IClock clock;
    public CopyrightController(IClock clock)
    {
        this.clock = clock;
    }

    [ChildActionOnly]
    public ActionResult Index()
    {
        // In this example I am directly passing the IClock instance
        // to the partial view as model but in a real application
        // you might want to use a view model here
        return PartialView(this.clock);
    }
} 
```

然后你可以有一个相应的局部视图（`~/Views/Copyright/Index.cshtml`）：

```
@model IClock
<div>Copyright ...</div> 
```

最后在你的 _Layout 中调用这个子动作：

```
<footer>
    @Html.Action("Copyright", "Index")
</footer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T23:09:53.553

如果您正在寻找可测试的`DateTime.Now`，则可以使用`SystemTime.Now()`，如[Ayende Rahien 的这篇文章中](http://ayende.com/blog/3408/dealing-with-time-in-tests)所述。您可以创建一个`Func<DateTime>`默认为`DateTime.Now`但您可以在测试中设置为特定日期的日期。它可以节省您引入另一个依赖项。这是函数：

```
public static class SystemTime
{
public static Func<DateTime> Now = () => DateTime.Now;
} 
```

无论您在哪里使用`DateTime.Now`，都应该使用`SystemTime.Now`。您可以像这样在测试中设置它：

```
SystemTime.Now = () => new DateTime(2012, 7, 1).Date; 
```

如果您对日期的使用有足够的测试覆盖率，您应该捕获您正在使用的任何实例，`DateTime.Now`而不是`SystemTime.Now`

# javascript - 可查询的客户端存储

> ID：14946464
> 
> 赞同：16
> 
> 时间：2013-02-18T22:27:41.467
> 
> 标签：javascript, html, local-storage, web-sql, lawnchair

可查询的客户端数据存储有哪些解决方案？这将用作临时缓存来执行基本操作，例如在客户端中对用户选择的日期范围进行排序和聚合

我找到了一些有前途的候选人，但我不确定最好的选择是什么

*   Lawnchair：各种适配器商店的接口，具有作为插件实现的查询和聚合[http://brian.io/lawnchair/](http://brian.io/lawnchair/)
*   TaffyDB：[http ://www.taffydb.com/](http://www.taffydb.com/)
*   LocalstorageDB：可查询的本地存储 github.com/knadh/localStorageDB
*   Minimongo：短暂的 mongo 实现，用作 Meteor 的缓存（[http://docs.meteor.com/#meteor_collection](http://docs.meteor.com/#meteor_collection)）

还有一些其他不太理想的选择：

*   HTML5 localstorage/sessionstorage（需要在此之上构建一个查询层......如草坪椅或localstoragedb）
*   IndexedDB（浏览器兼容性）
*   谷歌齿轮（停产）
*   WebSQL（规范停止）

我很想知道您对这些选项的体验/是否还有其他我错过的选项

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:17:49.593

您可以将[jStorage](http://goo.gl/IPcU)与[jLinq结合使用](http://goo.gl/35XER)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T14:56:26.173

我编写了两个简单的 API 来处理 Storage API。其中之一是一个包装器，可以轻松使用本地和会话存储：[https ://github.com/chambs/minidb/](https://github.com/chambs/minidb/)

就像是：

`minidb.local.set('name', 'Willian');`

`minidb.local.get('name'); //gives you "Willian"`

`minidb.session.set('userData', {id:333, name: 'Joseph'});`

`minidb.session.get('userData'); //gives that object`

另一种是仅基于 localStorage API 的命名空间（无会话）。基本上，您可以添加分组到命名空间中的“行”，以便您可以根据这些命名空间分离数据：[https ://github.com/chambs/zonjs](https://github.com/chambs/zonjs)

就像是：

`zon('user').insert({name: 'Willian', email: 'o.chambs@gmail.com'});`

`zon('user').del('8739874397494');`

其中“用户”是您定义的命名空间。对于同一个源/域，您可以拥有任意数量的命名空间

希望能帮助到你 ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T02:45:03.447

你有没有尝试过我的开源库[https://bitbucket.org/ytkyaw/ydn-db/wiki/Home](https://bitbucket.org/ytkyaw/ydn-db/wiki/Home)。它支持 IndexedDB、WebSQL 和 localStorage。查询是NoSQL 风格，即索引基键范围查询。多索引查询需要使用复合索引或键连接算法。目前有基本的SQL查询接口，随着时间的推移会更好。

大型网络应用程序，其中大部分是 CRM，在生产中使用该库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T07:50:08.673

我已经将草坪椅用于我工作的一些小型内部工具，总体而言，体验非常积极。

我在这个过程中学到的东西：Douglas Crockford 的[JSON-js cycle.js](https://github.com/douglascrockford/JSON-js/blob/master/cycle.js)解决了我在保存/获取双链接对象时的字符串化问题。

有人在草坪椅 github repo 上发布了一个问题，描述了同样的问题，让我省去了很多麻烦。[https://github.com/brianleroux/lawnchair/issues/105](https://github.com/brianleroux/lawnchair/issues/105)

# ios - 在点击搜索之前不显示 UISearchDisplayController 结果视图

> ID：14946466
> 
> 赞同：3
> 
> 时间：2013-02-18T22:28:10.620
> 
> 标签：ios, objective-c, uisearchbar, uisearchdisplaycontroller

在点击搜索按钮之前，如何禁用显示搜索结果视图？

我也希望黑暗的模态外观保持不变，我不想只看到“无结果”背景。

似乎我将不得不拦截文本字段更改事件，但我希望有一种不那么老套的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:19:32.297

在此事件中做一件事过滤数据：

```
- (void)searchBar:(UISearchBar *)theSearchBar textDidChange:(NSString *)searchText 
```

但是在点击搜索按钮时重新加载 tableview 数据。

# java - 单链表：如何添加头部

> ID：14946468
> 
> 赞同：0
> 
> 时间：2013-02-18T22:28:19.230
> 
> 标签：java

我有一个任务来实现一个单链表。我试图弄清楚如何获得头部，但我最终得到堆栈溢出错误或空指针错误。有人可以帮助我。我已经显示了相关的代码：

```
public class Llist {

    private Object data;
    private Llist next;
    private Llist head = new Llist(null, null);

    public Llist(Object d) {
        this(d, null);
    }

    public Llist(Object d, Llist n) {
        data = d;
        next = n;
    } 
```

我有一个添加节点的方法，它会检查是否有头，如果没有则新节点是头：

```
public static Llist add(Llist l, Object d) {
    Llist n = new Llist(d,l);
    if(l.head == null) {
        l.head = n;
    }
    return n;
} 
```

目前我得到一个堆栈溢出错误......但是如果我在 2 中删除将 head 设置为 null 的行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T01:11:09.823

您的链接列表根本没有正确设置。链表应该只有对头节点的引用，头节点应该持有对下一个节点的引用。它应该看起来更像：

```
public class Llist {

    private Object data;
    private Llist next;

    public Llist(Object d) {
        this(d, null);
    }

    public Llist(Object d, Llist n) {
        data = d;
        next = n;
    } 
```

在这种情况下，您应该始终保留头节点的副本，否则您将丢失整个列表，因为您的列表和节点在此实现中是相同的类型。

更好的实现将有一个单独的 Node 类。就像是：

```
public class Llist {
    private Node head;

    public Llist(Object o) {
        head = new Node(o);
    }

    public void add(Object o){
        curr = head;
        while(curr != null){
             curr = curr.next;
        }
        curr.next = new Node(o)
    }

public class Node{
    Object data;
    Node next;

    public Node(Object o){
        data = o;
        next = null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T23:11:28.560

Stackoverflow 错误的原因是你陷入了无限递归

```
public static Llist add(Llist l, Object d) {
    Llist n = new Llist(d,l); 
```

在这里，您创建一个**对象 n**，它具有Llist 类型的头**对象**，头对象又具有另一个 Llist 类型的头对象

因此，程序继续分配内存空间`n->head->head->head->...`等等，直到达到极限

# python - Python：关于“numpy.ndarray”的两个问题

> ID：14946470
> 
> 赞同：1
> 
> 时间：2013-02-18T22:28:27.167
> 
> 标签：python, arrays, numpy

我创建了一个带有值的 numpy.ndarray

将 numpy 导入为 np 从 numpy 导入非零

```
data = np.zeros((5, 5))
data
array([[ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.]]) 
```

我希望用 1 更改一些值

```
data[0,0] = 1
data[4,4] = 1

data
array([[ 1.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  1.]]) 
```

如果我使用负值将 0 更改为 5

```
data[-5,-5] = 5
data[-4,-4] = 5

>>> data
array([[ 5.,  0.,  0.,  0.,  0.],
       [ 0.,  5.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.]]) 
```

1-我不明白为什么我没有错误消息

```
>>> data[10,10] = 5
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
IndexError: index (10) out of range (0<=index<5) in dimension 0 
```

2-不清楚为什么 data[-5,-5] = 5 和 data[-4,-4] = 5 值 5 插入位置 0,0 和 1,1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:30:33.807

从[文档中](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#basic-slicing)：

> 负索引被解释为从数组末尾开始计数

这是标准的 Python 索引行为（用于 Python 列表等）。

# objective-c - 如何在特定点切割字符串？

> ID：14946472
> 
> 赞同：-1
> 
> 时间：2013-02-18T22:28:36.127
> 
> 标签：objective-c, nsstring

所以，我有大量的`NSString`s ，我的问题是我需要在特定点将它们切成更小的字符串。这听起来可能很复杂，但我基本上需要的是：

```
NSString *test =" blah blah blah - goo goo goo.";
NSString *str1 = "blah blah blah ";
NSString *str2 = "goo goo goo"; 
```

当字符串有一个连字符时，我如何编码以将其截断。有没有办法做到这一点？我找到了在一定数量的字母后切断字符串的方法，但我每次都需要在连字符处使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:37:19.253

```
NSArray *arr = [string componentsSeparatedByString:@"-"]; 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:48:14.250

你可以通过多种方式做到这一点。上面的两个答案显示了一些方法。许多 Objective-C 解决方案将包括 NSRange 的使用。您还可以使用 NSScanner 或 NSRegularExpression 做更灵活的事情。不会有一个正确的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T22:42:24.530

```
NSString *cutString = [text substringFromIndex:3];
cutString = [text substringToIndex:5];
cutString = [text substringWithRange:NSMakeRange(3, 5)]; 
```

# asp.net-mvc - MVC 模型设计与使用

> ID：14946478
> 
> 赞同：0
> 
> 时间：2013-02-18T22:29:04.797
> 
> 标签：asp.net-mvc, model

如果我有一个看起来像这样的模型：

```
public class LoginModel
{
  pulbic List<string> UserNames {get; set; }
  public string SelectedUserName {get; set; }
  public string Password {get; set; }
} 
```

而且我还有一个控制器，其中包含几个如下所示的操作方法：

```
public ActionResult Login()
{
  LoginModel model = null;

  model = new LoginModel();

  // Code to populate the UserNames property of the LoginModel instance (model)...

  return View(model);
}

[HttpPost()]

public ActionResult Login(LoginModel model)
{
  if (ModelState.IsValid == true)
  {
    return RedirectToAction("SomeOtherAction")
  }
  else
  {
    return View(model);
  }
} 
```

在将模型对象传递给 View 方法之前，我需要*重新填充模型对象的 UserNames 属性。*这是我当然可以做的事情，但确实感觉有点*脏*。这让我想到了这个问题。有没有更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:32:33.270

> 这是我当然可以做的事情，但确实感觉有点脏。

它不脏。这就是 MVC 的工作方式 -> 它是无状态的。作为替代方案，您可以将用户名列表作为隐藏字段包含在表单中，以便将它们发布回控制器。但这不是您可以依赖的信息，因为用户可以修改这些值。因此，如果您需要信任这些值，最好在后端查询它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:36:51.390

据我了解，MVC 是您应该在模型中有一个方法更新 UserNames 属性。您的控制器应该做的所有（仅此而已）就是将必要的参数传递给该函数。这样，您的控制器只是将只有它可以知道的信息传递给逻辑应该去的模型。

我不知道任何 asp.net，所以很遗憾我不能为您提供代码示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T22:38:34.890

本质上，这取决于您的视图实际上在做什么。当然，如果您将 UserNames 集合呈现为隐藏表单字段的列表，模型绑定可以在 http 发布时为您执行此操作。也就是说，这就是 http 编程的工作方式。状态并不打算停留在获取和发布之间。

实际上，您的选择是按照您提到的那样重建该列表或渲染一些隐藏字段（我不建议这样做）并让模型绑定完成它的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T22:38:55.493

通常我有一个用于处理数据库访问和填充视图模型的特定模型（和密切相关的实体）的类（尽管您甚至可以添加另一层，以便数据库访问和映射到视图模型是分开的，也许利用映射框架） . 无论哪种方式，它都会有一个像 GetLogins 这样的方法，你可以在任何需要这样列表的地方调用它，甚至可能像 Friends 页面这样需要列出某人可以请求朋友的登录名的其他控制器，这是一个人为的例子，但你明白了.

**由于您的 Get 和 POST 方法都需要重新显示页面（出现错误时为 POST），因此它们都可以调用 GetLogins，这样您就不会在两个地方重复该数据库访问代码。**

# java - 正则表达式拆分 / 被 [] 包围时除外

> ID：14946481
> 
> 赞同：3
> 
> 时间：2013-02-18T22:29:14.517
> 
> 标签：java, regex

我正在尝试在 / 上拆分 Java 中的字符串，但我需要忽略在 [] 之间找到 / 的任何实例。例如，如果我有以下字符串

```
/foo/bar[donkey=King/Kong]/value 
```

然后我想在我的输出中返回以下内容

*   富
*   酒吧[驴=金/金]
*   价值

我看过其他几个类似的帖子，但我没有找到任何适合我正在尝试做的事情。我尝试了 String.split() 方法，如下所示，看到了奇怪的结果：

```
Code:  value.split("/[^/*\\[.*/.*\\]]")

Result:  [, oo, ar[donkey=King, ong], alue] 
```

我需要做什么才能取回以下内容：

```
Desired Result:  [, foo, bar[donkey=King/Kong], value] 
```

谢谢，杰里米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:31:54.947

您需要在`/`后面拆分*0 个或更多* *平衡*的括号对：

```
String str = "/foo/bar[donkey=King/Kong]/value";

String[] arr = str.split("/(?=([[^\\[\\]]*\\[[^\\[\\]]*\\])*[^\\[\\]]*$)");     
System.out.println(Arrays.toString(arr)); 
```

**输出：**

```
[, foo, bar[donkey=King/Kong], value] 
```

**更多用户友好的解释**

```
String[] arr = str.split("(?x)/"        +   // Split on `/`
                     "(?="              +   // Followed by
                     "  ("              +   // Start a capture group
                     "     [^\\[\\]]*"  +   // 0 or more non-[, ] character
                     "      \\["        +   // then a `[`
                     "     [^\\]\\[]*"  +   // 0 or more non-[, ] character
                     "     \\]"         +   // then a `]`
                     "  )*"             +   // 0 or more repetition of previous pattern
                     "  [^\\[\\]]*"     +   // 0 or more non-[, ] characters 
                     "$)");                 // till the end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T00:31:39.230

在以下字符串中，下面的正则表达式将匹配**foo**和**bar**，但不匹配**fox**和**baz**，因为它们后跟一个右括号。研究负前瞻。

```
fox]foo/bar/baz] 
```

正则表达式：

```
\b(\w+)\b(?!]) 
```

# java - Rally Java Rest Unknownhost 异常

> ID：14946483
> 
> 赞同：1
> 
> 时间：2013-02-18T22:29:33.557
> 
> 标签：java, rest, rally

[我复制了Java Toolkit for Rally Rest](http://developer.help.rallydev.com/java-toolkit-rally-rest-api)页面底部的“说明如何查询前 5 个最高优先级缺陷”的代码示例。

我相应地更改了用户名和密码，但我得到了一个`UnknownHostException`.

这是堆栈跟踪：

`log4j:WARN No appenders could be found for logger (org.apache.http.impl.conn.BasicClientConnectionManager). log4j:WARN Please initialize the log4j system properly. Exception in thread "main" java.net.UnknownHostException: rally1.rallydev.com at java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method) at java.net.InetAddress$1.lookupAllHostAddr(InetAddress.java:849) at java.net.InetAddress.getAddressFromNameService(InetAddress.java:1202) at java.net.InetAddress.getAllByName0(InetAddress.java:1153) at java.net.InetAddress.getAllByName(InetAddress.java:1083) at java.net.InetAddress.getAllByName(InetAddress.java:1019) at org.apache.http.impl.conn.SystemDefaultDnsResolver.resolve(SystemDefaultDnsResolver.java:45) at org.apache.http.impl.conn.DefaultClientConnectionOperator.resolveHostname(DefaultClientConnectionOperator.java:278) at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:162) at org.apache.http.impl.conn.ManagedClientConnectionImpl.open(ManagedClientConnectionImpl.java:294) at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:640) at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:479) at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906) at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:805) at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:784) at com.rallydev.rest.RallyRestApi.doRequest(RallyRestApi.java:253) at com.rallydev.rest.RallyRestApi.doGet(RallyRestApi.java:323) at com.rallydev.rest.RallyRestApi.query(RallyRestApi.java:179) at com.jdes.AgileToRally.AgileToRally.main(AgileToRally.java:37)`

第 37 行：`QueryResponse queryResponse = restApi.query(defects);`

我试过更改服务器名称、用户名和密码，但没有运气。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:38:12.470

查看您的堆栈跟踪，您的机器似乎正在尝试查找 IPV6 地址`rally1.rallydev.com`并且它失败了，因为它没有一个（然后没有回退到 IPV4）。这表明您的机器配置（或它正在使用的 DNS 服务器）存在问题，而不是 Java 中的问题。

话虽如此，您可以强制 JVM 更喜欢 IPV4，这应该可以解决您的问题：

```
prompt> java -Djava.net.preferIPv4Stack=true ... 
```

如果您使用的是 IDE，则需要将其配置为`-Djava.net.preferIPv4Stack=true`在运行程序时传递给 java。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T05:22:42.367

看起来你有一个代理服务器。

```
restApi.setProxy(new URI(proxyserver)); 
```

# regex - 使用ant和正则表达式从html页面中提取数字

> ID：14946487
> 
> 赞同：1
> 
> 时间：2013-02-18T22:29:48.517
> 
> 标签：regex, ant

我必须使用 ant 从网页中提取数字。我已经使用任务下载了页面。马页是：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
 <HEAD>
  <TITLE>Index of .......</TITLE>
 </HEAD>
 <BODY>
<H1>Index of .....</H1>
<PRE><IMG SRC="/icons/blank.gif" ALT="     "> <A HREF="?N=A">Name</A>                    <A HREF="?M=D">Last modified</A>       <A HREF="?S=A">Size</A>  <A HREF="?D=A">Description</A>
<HR>
<IMG SRC="/icons/back.gif" ALT="[DIR]"> <A HREF="/projects/i/">Parent Directory</A>            19-Dec-2012 11:39       -  
<IMG SRC="/icons/folder.gif" ALT="[DIR]"> <A HREF="20120114-1731/">20120114-1731/</A>          14-Feb-2012 17:40       -  
<IMG SRC="/icons/folder.gif" ALT="[DIR]"> <A HREF="20120115-1055/">20120115-1055/</A>          15-Feb-2012 11:04       -  
<IMG SRC="/icons/folder.gif" ALT="[DIR]"> <A HREF="20120115-1336/">20120115-1336/</A>          15-Feb-2012 13:44       -  
<IMG SRC="/icons/folder.gif" ALT="[DIR]"> <A HREF="20120115-1656/">20120115-1656/</A>          15-Feb-2012 17:05       -  
<IMG SRC="/icons/folder.gif" ALT="[DIR]"> <A HREF="20120115-2157/">20120115-2157/</A>          15-Feb-2012 22:06       -  
</PRE><HR>
<ADDRESS>Apache/1.3.41 Server at romgsa.ibm.com Port 443</ADDRESS>
</BODY></HTML> 
```

来自：<IMG SRC="/icons/folder.gif" ALT="[DIR]"> <A HREF="20120114-1731/"& gt;20120114-1731/</A> 我要提取“20120114- 1731"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T00:06:20.247

The following example embeds a [groovy](http://groovy.codehaus.org/The+groovy+Ant+Task) script. Groovy has a useful Grab annotation which can be used to download Java libraries like [htmlcleaner](http://htmlcleaner.sourceforge.net/), which enables a HTML page to be parsed as XML.

# Example

The bootstrap target will download and install groovy.

```
$ ant bootstrap 
```

Running the build produces the following expected output:

```
$ ant
..
parse:
   [groovy] 20120114-1731/
   [groovy] 20120115-1055/
   [groovy] 20120115-1336/
   [groovy] 20120115-1656/
   [groovy] 20120115-2157/ 
```

## build.xml

```
<project name="demo" default="parse">

    <target name="bootstrap">
        <mkdir dir="${user.home}/.ant/lib"/>
        <get dest="${user.home}/.ant/lib/groovy-all.jar" src="http://search.maven.org/remotecontent?filepath=org/codehaus/groovy/groovy-all/2.1.1/groovy-all-2.1.1.jar"/>
        <get dest="${user.home}/.ant/lib/ivy.jar" src="http://search.maven.org/remotecontent?filepath=org/apache/ivy/ivy/2.3.0/ivy-2.3.0.jar"/>
    </target>

    <target name="parse"> 
        <taskdef name="groovy" classname="org.codehaus.groovy.ant.Groovy"/>

        <groovy>
            import org.htmlcleaner.HtmlCleaner;
            import org.htmlcleaner.SimpleXmlSerializer;

            @Grab(group='net.sourceforge.htmlcleaner', module='htmlcleaner', version='2.2.1')

            // HTML page to parse
            def address = 'file:///path/to/example/page.html'

            // Clean any messy HTML
            def cleaner = new HtmlCleaner()
            def node = cleaner.clean(address.toURL())

            // Convert from HTML to XML
            def serializer = new SimpleXmlSerializer(cleaner.getProperties())
            def xml = serializer.getXmlAsString(node)

            // Parse the XML into a document we can work with
            def page = new XmlSlurper(false,false).parseText(xml)

            // Retrieve the anchor tag values matching a pattern
            def numbers = page.body.pre.a.findAll { it.toString().startsWith("2012") }
            numbers.each {
                println it
            }
        </groovy>
    </target>

</project> 
```

# java - 编译器合规级别与超类覆盖

> ID：14946489
> 
> 赞同：0
> 
> 时间：2013-02-18T22:30:05.873
> 
> 标签：java, android, eclipse

我正在尝试编译我的项目，但它没有，导致此错误：

```
The method onClick(View) of type new View.OnClickListener(){} must override a superclass method 
```

所以我用谷歌搜索了一下，发现：[OnClickListener() must override a superclass method?](https://stackoverflow.com/questions/9026918/onclicklistener-must-override-a-superclass-method)

它解决了我的问题，但现在我有一个“不可见”的错误，它只是告诉我整个文件中有一个错误，但我看不到在哪里。如果我尝试编译它会告诉我：

```
[2013-02-18 23:25:43 - Datenbank] Android requires compiler compliance level 5.0 or 6.0\. Found '1.7' instead. Please use Android Tools > Fix Project Properties. 
```

好吧，如果我这样做，我又回到了起点，并且在覆盖超类方法时遇到了问题！

该怎么办？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:34:21.547

编译器`1.7`对应`Java 7`。截至目前，Android 不支持`Java 7`. 您必须使用`Java 5`or `Java 6`，但`Java 5`会导致`@Override`注释错误。

要解决此问题，请确保已安装 JDK 6。然后从导航器中右键单击您的项目，转到`Properties -> Java Compiler`. 然后检查`Enable Project Specific settings`并`1.6`从第一个下拉列表中选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:32:10.557

我相信它必须与整个 Android 项目而不是源文件有关。看看 [Android 需要编译器合规级别 5.0 或 6.0。而是找到了“1.7”。请使用 Android 工具 > 修复项目属性](https://stackoverflow.com/questions/7637144/android-requires-compiler-compliance-level-5-0-or-6-0-found-1-7-instead-plea)

# javascript - 在模态中显示 Google AdSense 广告

> ID：14946492
> 
> 赞同：2
> 
> 时间：2013-02-18T22:30:30.313
> 
> 标签：javascript, adsense

我的网站上有一个横幅 AdSense 广告。它是由他们给我的代码片段开始的。

在我的应用程序的另一部分，我弹出一个包含一些信息的模式。我想在该模式中显示另一个广告单元。我在该模式中定义了以下内容：

```
<script type="text/javascript"><!--
google_ad_slot = "xxxxx";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script> 
```

什么都没发生。对我来说很奇怪你必须再次包含那个“show_ads.js”文件。此外，它似乎会覆盖此模式所在的主页上的全局 js 变量。

任何想法如何使这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T22:56:09.617

可能发生的情况是您的模态容器元素在页面加载时不存在。AdSense 会为您网页上的其他广告加载，您以后无法重新加载它们。

一种常见的解决方案是在模型中加载 iframe，并在框架中添加广告。不幸的是，这违反了服务条款。在隐藏的 div 中加载广告也违反服务条款（因为这会降低点击率）。

我认为您最好的选择是将广告放在通常可见的 div 中，然后在需要时将该 div 放置在您的模式上。不理想，但我能想到的唯一方法会让谷歌高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-20T11:12:53.170

我们尝试了 Brad 的解决方案和其他解决方案，但均未奏效，只是**在**显示广告对我们有效的 0.1 秒后**重新加载广告。**

 **PS：请确保您不使用已弃用的重新加载广告功能。**

# wpf - 从 WPF 中的 Silverlight 读取richtextbox XAML

> ID：14946493
> 
> 赞同：0
> 
> 时间：2013-02-18T22:30:31.023
> 
> 标签：wpf, silverlight, xaml, richtextbox, flowdocument

我有将 RichTextBox 保存在 XAML 中的 Silverlight 应用程序，如下所示：

```
 <Comentario>
  <Section xml:space="preserve" HasTrailingParagraphBreakOnPaste="False" xmlns="http://www.schemas.microsoft.com/winfx/2006/xaml/presentation">
  <Paragraph FontSize="22" FontFamily="Arial" Foreground="#FF000000" FontWeight="Normal" FontStyle="Normal" FontStretch="Normal" CharacterSpacing="0" Typography.AnnotationAlternates="0" Typography.EastAsianExpertForms="False" Typography.EastAsianLanguage="Normal" Typography.EastAsianWidths="Normal" Typography.StandardLigatures="True" Typography.ContextualLigatures="True" Typography.DiscretionaryLigatures="False" Typography.HistoricalLigatures="False" Typography.StandardSwashes="0" Typography.ContextualSwashes="0" Typography.ContextualAlternates="True" Typography.StylisticAlternates="0" Typography.StylisticSet1="False" Typography.StylisticSet2="False" Typography.StylisticSet3="False" Typography.StylisticSet4="False" Typography.StylisticSet5="False" Typography.StylisticSet6="False" Typography.StylisticSet7="False" Typography.StylisticSet8="False" Typography.StylisticSet9="False" Typography.StylisticSet10="False" Typography.StylisticSet11="False" Typography.StylisticSet12="False" Typography.StylisticSet13="False" Typography.StylisticSet14="False" Typography.StylisticSet15="False" Typography.StylisticSet16="False" Typography.StylisticSet17="False" Typography.StylisticSet18="False" Typography.StylisticSet19="False" Typography.StylisticSet20="False" Typography.Capitals="Normal" Typography.CapitalSpacing="False" Typography.Kerning="True" Typography.CaseSensitiveForms="False" Typography.HistoricalForms="False" Typography.Fraction="Normal" Typography.NumeralStyle="Normal" Typography.NumeralAlignment="Normal" Typography.SlashedZero="False" Typography.MathematicalGreek="False" Typography.Variants="Normal" TextOptions.TextHintingMode="Fixed" TextOptions.TextFormattingMode="Ideal" TextOptions.TextRenderingMode="Auto" TextAlignment="Left" LineHeight="0" LineStackingStrategy="MaxHeight">
  <Run FontSize="22" FontFamily="Janda Apple Cobbler" Foreground="#FF000000">My TEXT</Run>
  </Paragraph>
  </Section>
  </Comentario> 
```

我还有一个必须读取 XAML 的本地 WPF 应用程序。WPF 中的richtextbox 不支持 XAML，所以我必须将此 XAML 转换为 FlowDocument。我尝试了很多方法，但我也得到一个错误：

代码 1：

```
 StringReader stringReader = new StringReader(xamlString);
        System.Xml.XmlReader xmlReader = System.Xml.XmlReader.Create(stringReader);
        Section sec = XamlReader.Load(xmlReader) as Section;
        FlowDocument doc = new FlowDocument();
        while (sec.Blocks.Count > 0)
        {
            var block = sec.Blocks.FirstBlock;
            sec.Blocks.Remove(block);
            doc.Blocks.Add(block);
        } 
```

错误：

Primera excepción del Tipo 'System.Windows.Markup.XamlParseException' en PresentationFramework.dll

信息 adicional：'无法创建未知类型'{ [http://www.schemas.microsoft.com/winfx/2006/xaml/presentation](http://www.schemas.microsoft.com/winfx/2006/xaml/presentation) }Section'。行号“1”和行位置“2”。

代码 2：使用 ParserContext

```
 System.Windows.Markup.ParserContext parserContext = new System.Windows.Markup.ParserContext();
        parserContext.XmlnsDictionary.Add("", "http://schemas.microsoft.com/winfx/2006/xaml/presentation");
        parserContext.XmlnsDictionary.Add("x", "http://schemas.microsoft.com/winfx/2006/xaml");
        StringReader stringReader = new StringReader(xamlString);
        System.Xml.XmlReader xmlReader = System.Xml.XmlReader.Create(stringReader);
        Section sec = XamlReader.Load(xmlReader,parserContext) as Section;
        FlowDocument doc = new FlowDocument();
        while (sec.Blocks.Count > 0)
        {
            var block = sec.Blocks.FirstBlock;
            sec.Blocks.Remove(block);
            doc.Blocks.Add(block);
        } 
```

错误：错误 14 'System.Windows.Markup.XamlReader.Load(System.IO.Stream, System.Windows.Markup.ParserContext)' 的最佳重载方法匹配有一些无效参数

**请帮助我，我需要找到一种方法来读取在我的本地 WPF 应用程序中的 Sirvelight 中创建的 XAML 字符串。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T07:24:29.630

第一的

> [http://www.schemas.microsoft.com/winfx/2006/xaml/presentation](http://www.schemas.microsoft.com/winfx/2006/xaml/presentation)

应该

> [http://schemas.microsoft.com/winfx/2006/xaml/presentation](http://schemas.microsoft.com/winfx/2006/xaml/presentation)

假设这是一个错字，您的下一个问题是使用 XAML 解析器。即使 WPF 中存在注释、部分和段落，它们也可能存在于不同的命名空间中，并且可能具有不同的属性。

鉴于您已经准备好将 XAML 转换为 FlowDocument，也许最好跳过 XAML 解析器。

为什么不直接使用[XDocument](http://msdn.microsoft.com/en-gb/library/system.xml.linq.xdocument.aspx)而不是 XamlReader？

# pandas - 如何从另一个数据帧中减去一个数据帧？

> ID：14946494
> 
> 赞同：6
> 
> 时间：2013-02-18T22:30:32.320
> 
> 标签：pandas

首先，让我做个铺垫。

我从一个`pandas`dataframe开始`klmn`，它看起来像这样：

```
In [15]: klmn
Out[15]: 
    K  L         M   N
0   0  a -1.374201  35
1   0  b  1.415697  29
2   0  a  0.233841  18
3   0  b  1.550599  30
4   0  a -0.178370  63
5   0  b -1.235956  42
6   0  a  0.088046   2
7   0  b  0.074238  84
8   1  a  0.469924  44
9   1  b  1.231064  68
10  2  a -0.979462  73
11  2  b  0.322454  97 
```

接下来，我根据“K”列中的值拆分`klmn`为两个数据框，`klmn0`并且`klmn1`：

```
In [16]: k0 = klmn.groupby(klmn['K'] == 0)
In [17]: klmn0, klmn1 = [klmn.ix[k0.indices[tf]] for tf in (True, False)]
In [18]: klmn0, klmn1
Out[18]: 
(   K  L         M   N
0  0  a -1.374201  35
1  0  b  1.415697  29
2  0  a  0.233841  18
3  0  b  1.550599  30
4  0  a -0.178370  63
5  0  b -1.235956  42
6  0  a  0.088046   2
7  0  b  0.074238  84,
     K  L         M   N
8   1  a  0.469924  44
9   1  b  1.231064  68
10  2  a -0.979462  73
11  2  b  0.322454  97) 
```

最后，我计算 中列的平均值，按`M`列中`klmn0`的值分组`L`：

```
In [19]: m0 = klmn0.groupby('L')['M'].mean(); m0
Out[19]: 
L
a   -0.307671
b    0.451144
Name: M 
```

现在，我的问题是，***如何`m0`从子数据框的`M`列中减去，尊重列中的值？`klmn1``L`*** （我的意思是从列中的每一行的列中`m0['a']`减去，对于.）`M``klmn1``'a'``L``m0['b']`

可以想象以一种将`M`列中的值替换`klmn1`为新值（在从 中减去值之后`m0`）的方式来执行此操作。或者，可以想象以一种`klmn1`保持不变的方式执行此操作，而是生成一个`klmn11`带有更新`M`列的新数据框。 *我对这两种方法都感兴趣。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T22:57:15.810

如果您将 klmn1 数据框的索引重置为 L 列的索引，那么您的数据框将自动将索引与您从中减去的任何系列对齐：

```
In [1]: klmn1.set_index('L')['M'] - m0
Out[1]:
L
a    0.777595
a   -0.671791
b    0.779920
b   -0.128690
Name: M 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-30T21:14:41.313

选项1：

```
df1.subtract(df2, fill_value=0) 
```

选项#2：

```
df1.subtract(df2, fill_value=None) 
```

# c# - 动态添加复选框时无法调整复选框大小

> ID：14946500
> 
> 赞同：0
> 
> 时间：2013-02-18T22:30:43.753
> 
> 标签：c#, winforms

在 C# 中，我试图将复选框动态添加到表单上的选项卡表中。我试过 AutoSize 属性，但我的一些文本太长了。正在`x.Size.Width`返回：

> 无法修改“System.Windows.Froms.Control.Size”的返回值，因为它不是变量

我搜索了很多论坛，似乎无法找到答案。有任何想法吗？

```
foreach (CheckBoxes i in main)
            {
                CheckBox x = new CheckBox();
                x.Text = i.Data;
                x.Checked = i.Condition;
                x.Location = new Point(main_start_location_x, main_start_location_y);
                x.Size.Width = 570;
                tabControl1.TabPages["main_checklist_tab"].Controls.Add(x);
                main_start_location_y += 40;
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:37:43.153

您必须使用控件的`Width`and`Height`属性或`Size`属性来设置控件的大小，但不能使用属性的`Width`and `Height`，`Size`因为它是按值传递的，不会产生任何影响。

1)`Control.Size = new Size(width, height);`

或者

2)`Control.Width = width;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:37:41.733

代替：

```
x.Size.Width = 570; 
```

用这个：

```
x.Width = 570; 
```

如果您想一次设置整个尺寸，请执行以下操作：

```
x.Size = new Size(570, 20); 
```

或这个：

```
x.Width = 570;
x.Height = 20; 
```

# asp.net-mvc - 我是否应该使用相同的数据传输对象从服务器到客户端并返回

> ID：14946507
> 
> 赞同：1
> 
> 时间：2013-02-18T22:31:16.790
> 
> 标签：asp.net-mvc, asp.net-web-api, client-server, dto

我将数据从不同的域存储库返回到我的服务，并从服务返回到我的 Asp.net WebApi 控制器到客户端。数据被放入 DTO。

我是否应该使用相同的 DTO 将数据从客户端传输到服务器，尽管我必须添加一些服务器到客户端不使用的属性。

这种方法可以吗，还是我应该使用不同的 DTO？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:35:43.683

HTTP 和 WebAPI 处理请求和响应。这是一个见仁见智的问题，但我敢冒险，如果有一点点差异，我会继续制作单个对象/DTO，以在您的代码中呼应 HTTP 请求和响应设计。

这也将遵守[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。

# php - 正则表达式：在给定标记后替换未知次数

> ID：14946509
> 
> 赞同：2
> 
> 时间：2013-02-18T22:31:21.437
> 
> 标签：php, regex, preg-replace

我正在尝试找出一种在 html 文件中的 href 标记的 GET 部分替换 a 的方法，如下所示 `/`：`-`

```
blah blah <a href="aaaaa/aaaaa/aaaaa/?q=43/23"> blah blah <a
href="aaaaa/aaaaa/aaaaa/?q=43/11/1"> blah blah blah 
```

所以基本上我希望这两个 URL 分别以`?q=43-23`and结尾`?q=43-11-1`。

我怎样才能做到这一点`preg_replace`？我显然`43/23`可以`43-23`得到

```
/(\?.+?)\/(.+?)$/is 
```

我可以和`43/11/1`我`43-11-1`在一起

```
/(\?.+?)\/(.+?)\/(.+?)$/is 
```

但是考虑到在`?`. 有什么建议或可以为我指明正确方向的人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:24:39.007

这不是最简单的搜索和替换，因为正则表达式引擎如何处理重复的捕获组。 [应用重复捕获组原则](http://www.regular-expressions.info/captureall.html)，您可以使用正则表达式捕获重复组，然后进行简单的字符串替换。

```
preg_replace_callback('/
    (      # start capture
       \?  # question mark
       .+? # reluctantly capture all until...
    )      # end capture
    (      # start capture
    (?:    # start group (no capture)
       \/  # ...a literal slash
       .+? # reluctantly capture all until...
    )      # end group
    +      # repeat capture group
    )      # end capture
    (      # start capture
    \b     # ...a word boundary
    )      # end capture
    /isx', function ($matches) {
   return $matches[1] . str_replace('/', '-', $matches[2]) . $matches[3];
}, $str)); 
```

您在第二个匹配项（即重复的组捕获）上进行字符串替换。末尾的边界一词是必要的，但可以用更合理或更正确的词代替，例如`"`（如果您知道 URL 以此处结尾），甚至`("|')`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T23:38:26.290

我认为您的内容可能很容易；

```
print preg_replace_callback('~\?q=([^&"]*)~', function($m) {
    return '?q='. str_replace('/', '-', $m[1]);
}, $s);
// for PHP < 5.3.0
print preg_replace_callback('~\?q=([^&"]*)~', create_function(
    '$m', 'return "?q=". str_replace("/", "-", $m[1]);'
), $s); 
```

出去;

```
废话 <a href="aaaaa/aaaaa/aaaaa/?q=43-23"> 废话 <a
href="aaaaa/aaaaa/aaaaa/?q=43-11-1"> 等等等等
哈哈哈哈哈哈哈哈哈哈哈哈

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T23:07:37.630

*您可以使用此正则表达式在查询参数q=*之后匹配无限数量的（斜线）级别。

```
// Using tilde delimiters because hash signs are interpreted as comments here :)
~q=((?:[^/]+|/|)*)$~i 
```

例如，对于字符串*“aaaaa/aaaaa/aaaaa/?q=43/11/1/5/10”*，第一个捕获的组将包含**43/11/1/5/10**。

之后，您可以执行以下操作以用连字符替换斜杠：

```
<?php str_replace( '/', '-', $string ); 
```

# lapack - EPD Free 发行版是否使用 MKL？

> ID：14946512
> 
> 赞同：1
> 
> 时间：2013-02-18T22:31:34.077
> 
> 标签：lapack, blas, enthought, intel-mkl, epd-python

根据 Enthought 网站，EPD Python 发行版将 MKL 用于 numpy 和 scipy。EPD Free 是否也使用 MKL？如果不是，它是否为 BLAS/LAPACK 使用另一个库？我正在使用 EPD Free 7.3-2

另外，可以在 scipy.org 上找到的用于 numpy 的 Windows 二进制安装程序使用什么库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:00:02.970

EPD Free 7.3 安装程序不包括 MKL。他们使用的 BLAS/LAPACK 库是 Linux 和 Windows 上的 ATLAS 和 OSX 上的 Accelerate。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T04:09:40.447

根据[这张表](http://www.enthought.com/products/epdlibraries.php)，EPD Free 7.3 不*包括*Intel 的 MKL。

# java - 如何在实体上添加一系列键？Openjpa

> ID：14946514
> 
> 赞同：0
> 
> 时间：2013-02-18T22:31:41.217
> 
> 标签：java, db2, jpa-2.0, primary-key, openjpa

我有这个名为产品的实体。有没有办法添加一系列多个键？就像序列号的钥匙，序列号和型号的钥匙，型号的钥匙等。你怎么能这样做？非常感谢。

```
*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package lotmovement.business.entity;

import java.io.Serializable;
import java.sql.Timestamp;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Version;

/**
 *
 * @author god-gavedmework
 */
@Entity
public class Product implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long product_Id;

    @Column(name = "SERIAL_NUMBER", nullable = false,length = 30)
    private String serial_Number;

    @Column(name = "DATE_ASSEMBLED", nullable = false,length = 10)
    private String date_Assembled;

    @Column(name = "TIME_ASSEMBLED", nullable = false,length = 20)
    private String time_Assembled;

    @Column(name = "MODEL", nullable = false,length = 20)
    private String model;

    @Column(name = "BATCH_ID", nullable = false,length = 6)
    private int batch_Id;

    @Column(name = "PROCESS_CODE", nullable = false,length = 3)
    private int process_Code;

    @Column(name = "DC_POWER_PCB_SERIAL", nullable = false,length = 20)
    private String dc_Power_PCB_Serial;

    @Column(name = "CONTROL_PWER_PCB_SERIAL", nullable = false,length = 20)
    private String control_Power_PCB_Serial;

    @Column(name = "MAINS_POWER_PCB_SERIAL", nullable = false,length = 20)
    private String mains_Power_PCB_Serial;

    @Column(name = "BLOWER_SERIAL", nullable = false,length = 20)
    private String blower_Serial;

    @Column(name = "HEATERPLATE_SERIAL", nullable = false,length = 20)
    private String heaterPlate_Serial;

    @Column(name = "LAST_PROCESS", nullable = false,length = 3)
    private String last_Process;

    @Column(name = "LAST_DATE", nullable = false,length = 20)
    private String last_Date;

     @Version
    @Column(name = "LAST_UPDATED_TIME")
    private java.sql.Timestamp updatedTime;

    public Timestamp getUpdatedTime() {
        return updatedTime;
    }

    public void setUpdatedTime(Timestamp updatedTime) {
        this.updatedTime = updatedTime;
    }

    public Long getProduct_Id() {
        return product_Id;
    }

    public void setProduct_Id(Long product_Id) {
        this.product_Id = product_Id;
    }

    public String getSerial_Number() {
        return serial_Number;
    }

    public void setSerial_Number(String serial_Number) {
        this.serial_Number = serial_Number;
    }

    public String getDate_Assembled() {
        return date_Assembled;
    }

    public void setDate_Assembled(String date_Assembled) {
        this.date_Assembled = date_Assembled;
    }

    public String getTime_Assembled() {
        return time_Assembled;
    }

    public void setTime_Assembled(String time_Assembled) {
        this.time_Assembled = time_Assembled;
    }

    public String getModel() {
        return model;
    }

    public void setModel(String model) {
        this.model = model;
    }

    public int getBatch_Id() {
        return batch_Id;
    }

    public void setBatch_Id(int batch_Id) {
        this.batch_Id = batch_Id;
    }

    public int getProcess_Code() {
        return process_Code;
    }

    public void setProcess_Code(int process_Code) {
        this.process_Code = process_Code;
    }

    public String getDc_Power_PCB_Serial() {
        return dc_Power_PCB_Serial;
    }

    public void setDc_Power_PCB_Serial(String dc_Power_PCB_Serial) {
        this.dc_Power_PCB_Serial = dc_Power_PCB_Serial;
    }

    public String getControl_Power_PCB_Serial() {
        return control_Power_PCB_Serial;
    }

    public void setControl_Power_PCB_Serial(String control_Power_PCB_Serial) {
        this.control_Power_PCB_Serial = control_Power_PCB_Serial;
    }

    public String getMains_Power_PCB_Serial() {
        return mains_Power_PCB_Serial;
    }

    public void setMains_Power_PCB_Serial(String mains_Power_PCB_Serial) {
        this.mains_Power_PCB_Serial = mains_Power_PCB_Serial;
    }

    public String getBlower_Serial() {
        return blower_Serial;
    }

    public void setBlower_Serial(String blower_Serial) {
        this.blower_Serial = blower_Serial;
    }

    public String getHeaterPlate_Serial() {
        return heaterPlate_Serial;
    }

    public void setHeaterPlate_Serial(String heaterPlate_Serial) {
        this.heaterPlate_Serial = heaterPlate_Serial;
    }

    public String getLast_Process() {
        return last_Process;
    }

    public void setLast_Process(String last_Process) {
        this.last_Process = last_Process;
    }

    public String getLast_Date() {
        return last_Date;
    }

    public void setLast_Date(String last_Date) {
        this.last_Date = last_Date;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:29:16.717

我相信您正在寻找的内容从根本上是不正确的。Key 应该是实体实例的唯一标识符。在您的示例中，您希望为“模型”设置一个键，这听起来不正确。

如果您对“Key”有其他含义，请澄清，我们可能会进一步讨论。

# django - django导入客户端

> ID：14946518
> 
> 赞同：3
> 
> 时间：2013-02-18T22:32:00.937
> 
> 标签：django

我正在尝试在 django 中导入客户端进行测试。但是当我这样做时，我得到了这个奇怪的错误：

ImproperlyConfigured：请求设置 DATABASES，但未配置设置。您必须在访问设置之前定义环境变量 DJANGO_SETTINGS_MODULE 或调用 settings.configure()。

```
from django.utils import unittest
from django.utils import simplejson as json
from django.test.client import Client 
```

这就是我导入客户端的方式，以便我可以使用它进行测试。有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T22:38:26.067

尝试这个：

```
import os
import sys

sys.path.append('/home/username/www/site_folder')
os.environ['DJANGO_SETTINGS_MODULE'] = 'project.settings'

from django.utils import unittest
from django.utils import simplejson as json
from django.test.client import Client 
```

但替换`project`为文件夹名称，您所在的`settings.py`位置

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T22:35:14.907

客户正在寻找`settings.py`. 您可以通过在项目文件夹中键入以下内容来简单地加载客户端：

```
python manage.py shell 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-16T03:19:51.847

在我使用的 Pycharm 中，在遵循此[Running Django tests in PyCharm](https://stackoverflow.com/questions/20399046/running-django-tests-in-pycharm)之后， 我的问题得到了解决。

它在文件 > 设置 > Django 支持中，然后选择正确的设置。

# java - 带有口音的Android读取文件

> ID：14946519
> 
> 赞同：0
> 
> 时间：2013-02-18T22:32:09.063
> 
> 标签：java, android, file, character-encoding, iso-8859-1

我有个问题。我正在使用一个文件来加载一些字符串以在我的应用程序中使用它们。

我有这个功能：

```
 public void lecturaFichero(){

    String linea = null;

    try {
            InputStream in = cntx.getAssets().open("cc.txt");

            if (in != null) {
                InputStreamReader input = new InputStreamReader(in,Charset.forName("iso-8859-1"));
                BufferedReader buffreader = new BufferedReader(input);

                while ((linea = buffreader.readLine()) != null) {
                    rellenaCodigo(linea);
                }
                in.close();
            }
    } catch (IOException e) {
     e.printStackTrace();
    }

} 
```

问题是当我运行应用程序时它会立即崩溃（读取文件是我做的第一件事）。

如果我这样做而不是上面的：

```
InputStreamReader input = new InputStreamReader(in)); //Without specifying the charset 
```

它确实有效，它不会崩溃，但应用程序会显示特殊字符应该在哪里。

我需要解决这个问题，我很欣赏一个可以在我的应用程序中读取特殊字符的解决方案。

提前致谢。

PS：Android 可以打印特殊字符，因为当我手动输入字符串并在屏幕上打印时，它会显示字符，问题在于从 .txt 中读取。

# gnuplot - gnuplot内部的循环结构？

> ID：14946530
> 
> 赞同：87
> 
> 时间：2013-02-18T22:32:51.853
> 
> 标签：gnuplot

有什么方法可以迭代地从多个文件中检索数据并将它们绘制在 gnuplot 的同一张图上。假设我有 data1.txt、data2.txt......data1000.txt 之类的文件；每个具有相同数量的列。现在我可以写一些像 -

```
plot "data1.txt" using 1:2 title "Flow 1", \
     "data2.txt" using 1:2 title "Flow 2", \
      .
      .
      .
     "data1000.txt"  using 1:2 title "Flow 6" 
```

但这真的很不方便。我想知道是否有一种方法可以遍历 gnuplot 中的**情节**部分。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-02-18T23:18:19.490

肯定有（在 gnuplot 4.4+ 中）：

```
plot for [i=1:1000] 'data'.i.'.txt' using 1:2 title 'Flow '.i 
```

该变量`i`可以解释为变量或字符串，因此您可以执行类似的操作

```
plot for [i=1:1000] 'data'.i.'.txt' using 1:($2+i) title 'Flow '.i 
```

如果你想让线条相互偏移。

`help iteration`在 gnuplot 命令行中键入以获取更多信息。

还请务必查看@DarioP 对`do for`语法的回答；这给你一些更接近传统`for`循环的东西。

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2013-07-26T14:53:40.450

看看`do { ... }`自 gnuplot 4.6 以来的命令，因为它非常强大：

```
do for [t=0:50] {
  outfile = sprintf('animation/bessel%03.0f.png',t)
  set output outfile
  splot u*sin(v),u*cos(v),bessel(u,t/50.0) w pm3d ls 1
} 
```

[http://www.gnuplotting.org/gnuplot-4-6-do/](http://www.gnuplotting.org/gnuplot-4-6-do/)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-01-30T15:32:06.613

我有脚本 all.p

```
set ...
...
list=system('ls -1B *.dat')
plot for [file in list] file w l u 1:2 t file 
```

这里最后两行是文字的，而不是启发式的。然后我跑

```
$ gnuplot -p all.p 
```

更改`*.dat`为您拥有的文件类型，或添加文件类型。

下一步：添加到 ~/.bashrc 这一行

```
alias p='gnuplot -p ~/./all.p' 
```

并将您的文件放入您`all.p`的主目录，瞧。您可以通过键入 p 并回车来绘制任何目录中的所有文件。

**编辑**我更改了命令，因为它不起作用。以前它包含`list(i)=word(system(ls -1B *.dat),i)`.

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-05-13T22:53:35.590

如果您有要在图表中绘制的离散列，请使用以下内容

```
do for [indx in "2 3 7 8"] {
  column = indx + 0
  plot ifile using 1:column ;  
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-21T01:24:05.533

我想使用通配符来绘制通常放置在不同目录中的多个文件，同时从任何目录工作。我找到的解决方案是在`~/.bashrc`

```
plo () {
local arg="w l"
local str="set term wxt size 900,500 title 'wild plotting'
set format y '%g'
set logs
plot"
while [ $# -gt 0 ]
        do str="$str '$1' $arg,"
        shift
done
echo "$str" | gnuplot -persist
} 
```

并使用它，例如`plo *.dat ../../dir2/*.out`，绘制`.dat`当前目录中的所有`.out`文件以及恰好是一个级别并被调用的目录中的所有文件`dir2`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-13T14:29:26.220

这是替代命令：

```
gnuplot -p -e 'plot for [file in system("find . -name \\*.txt -depth 1")] file using 1:2 title file with lines' 
```

# linux - Apache - 根据主机名将请求重定向到本地网络上的不同机器

> ID：14946531
> 
> 赞同：-1
> 
> 时间：2013-02-18T22:33:06.163
> 
> 标签：linux, apache, apache2

我的本地网络上有两台服务器 A (192.168.1.100) 和 B(192.168.1.101) 和一个外部 IP。我想根据子域转发 HTTP 请求。例如，我希望对 a.example.com 的任何 http 请求将转到服务器 A 192.168.1.100，对 b.example.com 的任何请求将转到服务器 B 192.168.1.101。我可以在服务器 A Apache 配置文件上实现任何选项来执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:04:21.210

我认为，这可以通过路由器或 iptables 规则更好地处理。

这就是说，您可以在机器 A 上设置一个虚拟主机条目，将所有请求转发到您的第二台机器 B

```
<virtualHost *:80>
    ServerName b.example.com
    RewriteEngine On
    RewriteRule .* http://192.168.1.101$0 [P]
</VirtualHost> 
```

该`[P]`标志将请求转发到`mod_proxy`，因此必须启用此功能。另一个警告是[RewriteRule Flags - P|proxy](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_p)的性能警告。

最后一点，这是未经测试的，所以请小心。

# html - Internet Explorer 中 .png 图像周围的线条

> ID：14946533
> 
> 赞同：0
> 
> 时间：2013-02-18T22:33:18.130
> 
> 标签：html, png, vertical-alignment

我有一个奇怪的问题……在我的工作地点，我负责更新和维护 Spiceworks 用户门户，我们在上面放置公司新闻以及其他一些东西。问题是......我创建了一个 .png 图像来圆角图片，我已将其设置为表格的背景。我让它在 Firefox 和 Chrome 上看起来都很完美，但在 Internet Explorer 上，.png 文件出于某种原因在它们的外部有一个轮廓。附上对比：

可以在以下位置找到图片：http: [//i1099.photobucket.com/albums/g383/zachoxley/CFvsIE_zps1edbce9c.png](http://i1099.photobucket.com/albums/g383/zachoxley/CFvsIE_zps1edbce9c.png)

我已经尝试了我能想到的一切......垂直对齐css类应用于图像，所以我尝试将另一个具有相同样式的类应用于td标签......没有骰子。我什至尝试将 valign="bottom" 属性应用于 td 标签。没有。如您所见，它在 Chrome/Firefox 上看起来不错，但不幸的是，这里的大多数员工都使用 IE。出于专业的目的，并且无论浏览器类型如何，页面看起来都一样，我真的很想解决这个问题。以前有没有人处理过这个问题？这是我正在使用的 HTML：

```
<p><style type="text/css">
    img.rotate90deg
    {
        display: inline-block;
        transform: rotate(90deg);
        -ms-transform: rotate(90deg); /* IE 9 */
            -webkit-transform: rotate(90deg); /* Safari and Chrome */
            -o-transform: rotate(90deg); /* Opera */
            -moz-transform: rotate(90deg); /* Firefox */
        vertical-align: top;
    }
img.rotate180deg
    {
        display: inline-block;
            transform: rotate(180deg);
        -ms-transform: rotate(180deg); /* IE 9 */
            -webkit-transform: rotate(180deg); /* Safari and Chrome */
            -o-transform: rotate(180deg); /* Opera */
            -moz-transform: rotate(180deg); /* Firefox */
        vertical-align: bottom;
    }
img.rotate270deg
    {
        display: inline-block;
            transform: rotate(270deg);
        -ms-transform: rotate(270deg); /* IE 9 */
            -webkit-transform: rotate(270deg); /* Safari and Chrome */
            -o-transform: rotate(270deg); /* Opera */
            -moz-transform: rotate(270deg); /* Firefox */
        vertical-align: bottom;
    }
table.nextevent
    {
        display: block;
        border: none;
        border-collapse: collapse;
    }
</style></p>
<table width="100%">
<tbody>
    <tr width="100%">
        <td width="5%">&nbsp;</td>
        <td width="95%">
        <table width="100%">
            <tbody>
                <tr width="100%">
                    <td width="40%">
                    <h2 align="left">Lunch - Jose Pepper's</h2>
                    <table align="left">
                        <tbody>
                            <tr colspan="2">
                            </tr>
                            <tr>
                                <td>
                                <h3 style="text-align: left; ">&nbsp; When:</h3>
                                </td>
                                <td>
                                <h3>Tuesday, February 19, 2013</h3>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    </td>
                    <td width="20%" align="center">&nbsp;</td>
                    <td width="40%" align="center">
                    <table class="nextevent" height="201" width="300" border="0" cellpadding="0" cellspacing="0" style="background: url(http://blogs.kansas.com/dining/files/2010/07/chiliconqueso-thumb-1-300x201.jpg)">
                        <tbody>
                            <tr>
                                <td height="20" width="20"><img align="left" src="http://i1099.photobucket.com/albums/g383/zachoxley/Untitled_zpsbe7f3ae8.png" width="20" height="20" alt="" /></td>
                                <td height="20" width="260">&nbsp;</td>
                                <td height="20" width="20"><img class="rotate90deg" align="left" src="http://i1099.photobucket.com/albums/g383/zachoxley/Untitled_zpsbe7f3ae8.png" width="20" height="20" alt="" /></td>
                            </tr>
                            <tr>
                                <td height="161" width="20">&nbsp;</td>
                                <td height="161" width="260">&nbsp;</td>
                                <td height="161" width="20">&nbsp;</td>
                            </tr>
                            <tr>
                                <td height="20" width="20"><img class="rotate270deg" align="left" src="http://i1099.photobucket.com/albums/g383/zachoxley/Untitled_zpsbe7f3ae8.png" width="20" height="20" alt="" /></td>
                                <td height="20" width="260">&nbsp;</td>
                                <td height="20" width="20"><img class="rotate180deg" align="left" src="http://i1099.photobucket.com/albums/g383/zachoxley/Untitled_zpsbe7f3ae8.png" width="20" height="20" alt="" /></td>
                            </tr>
                        </tbody>
                    </table>
                    </td>
                </tr>
            </tbody>
        </table>
        </td>
    </tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:41:43.590

在我的脑海中，我确定早期版本的 IE 不太支持透明 png。

您可以使用 css 实现舍入。圆角现在得到相当广泛的支持，您可以使用 css3pie [http://css3pie.com/使其在 ie 6 和 7 上工作](http://css3pie.com/)

尝试将此添加到 css 中的图像中。

```
.img{
    -moz-border-radius: 18px;
    -webkit-border-radius: 18px;
    border-radius: 18px; /* future proofing */
    -khtml-border-radius: 18px; /* for old Konqueror browsers */
} 
```

它应该围绕普通图像的角落，所以你不需要手动做。这适用于 Firefox、Safari、Opera、Chrome 和更新版本的 IE。要让它与 IE6 和 IE7 一起工作，您应该从 css3pie ( [http://css3pie.com/](http://css3pie.com/) ) 获取文件。我通常会为有问题的版本制作单独的 IE 特定 CSS 文件。

在这些 css 文件中定义图像并包含 PIE.htc 文件的路径。就像是

```
.img{
behavior: url(path/to/pie_files/PIE.htc);
} 
```

一旦你掌握了它的窍门，它就很简单了，祝你好运！

# c++ - 使用 CMake 安装的 PDB 文件

> ID：14946536
> 
> 赞同：10
> 
> 时间：2013-02-18T22:33:28.947
> 
> 标签：c++, windows, visual-studio, cmake

我正在使用 CMake 命令安装 PDB 文件，以便在我的 C++ 应用程序的开发人员分发中启用调试。命令如下：

```
INSTALL(DIRECTORY ${PROJECT_BINARY_DIR}/Debug
    DESTINATION bin
    FILES_MATCHING
    PATTERN *.pdb
) 
```

此外，我已设法将用于构建该开发人员分发的相关源代码安装在同一级别的“src”文件夹中，以便我的顶级分发文件夹如下所示：

```
include\
src\
lib\
bin\
share\
doc\
3rdparty\
etc\ 
```

如何让 PDB 文件“知道”源在哪里（我假设这是必需的）？是否有可以实现此目的的 CMake 命令？什么是一个小例子？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-11-29T07:56:32.233

我刚刚[回答了我自己的](https://stackoverflow.com/a/40860436/3154588)类似问题，*[如何让 CMake 为目标安装 PDB 文件](https://stackoverflow.com/questions/40860435/how-to-get-cmake-to-install-pdb-files-for-targets)*。

使用此安装规则将目标的 PDB 文件（如果存在）复制到目标的安装位置 bin 目录。

```
install(FILES $<TARGET_PDB_FILE:${PROJECT_NAME}> DESTINATION bin OPTIONAL) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T11:26:30.600

PDB 文件存储源文件的*绝对*路径名。当不使用符号服务器时，确保某种程度的源代码可重定位性的唯一方法是使用`subst`命令。

这个想法是用来为源树的根`subst`创建一个驱动器号名称（例如`N:\`）。然后从该驱动器进行构建，以便以开头的绝对路径`N:\`嵌入到 PDB 文件中。当您以后需要在另一台机器上调试可执行文件时，请`subst`在该机器上使用以获取到源的相同绝对路径。这将使 PDB 文件能够找到源文件。

例如，如果您有一个文件`C:\MySources\main.cpp`，请执行以下操作：

```
subst N: C:\MySources
N:
run your build 
```

稍后，假设您需要在存储相同文件的机器上进行调试`D:\Devel\Other\main.cpp`。简单地做`subst N: D:\Devel\Other`，然后从`N:`那里的驱动器工作。

* * *

这个答案主要基于来自这个[问题](https://stackoverflow.com/q/27952/1782465)的信息和其中的链接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-18T21:03:12.877

您只需要通知 Visual Studio 源在哪里...它会弹出一个文件浏览器对话框；如果路径与构建时不同，只需指向本地计算机上的源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T23:00:41.773

PDB 文件存储文件的路径，就像编译程序时一样。您无需做任何事情来让他们知道源头*在*哪里。

# delphi - 在 firemonkey 油漆盒上显示插入符号

> ID：14946539
> 
> 赞同：0
> 
> 时间：2013-02-18T22:33:48.597
> 
> 标签：delphi, firemonkey, firemonkey-fm2

有谁知道如何在 Firemonkey 的 TPaintbox 中添加闪烁的插入符号？

# c++ - 将指向枚举的指针传递给函数

> ID：14946540
> 
> 赞同：3
> 
> 时间：2013-02-18T22:33:49.063
> 
> 标签：c++, pointers, enums

我正在尝试将在函数范围之外声明的枚举传递给函数，以便更改函数内枚举的值会更改指向的枚举的值。仅在对象范围内使用枚举本身不是一个选项，因为我希望将此函数与此枚举的多个不同实例一起使用。

我有一个枚举'ColourState'。如此宣告。和一个指向 ColorState 的指针。

```
enum ColourState {COLOUR1, COLOUR2};
ColourState* CS_GO_score; 
```

指针是这样初始化的。

```
CS_GO_score = new ColourState;
*CS_GO_score = ColourState::COLOUR2; 
```

我现在正试图将 CSS_GO_score 指向的 ColourState 传递给函数 'pulsateColour'

像这样。

```
void HUD::pulsateColour(GLfloat *colour1, GLfloat *colour2, GLfloat *objectCol, ColourState goingTo, int timeInFrames)
{
    GLfloat difference[4];
    //give us an array of values to change the array by in the alloted time
    difference[0] = (colour1[0]-colour2[0])/timeInFrames;
    difference[1] = (colour1[1]-colour2[1])/timeInFrames;
    difference[2] = (colour1[2]-colour2[2])/timeInFrames;
    difference[3] = (colour1[3]-colour2[3])/timeInFrames;

    //depending on the state, transform the array in one direction or another

    if(goingTo == ColourState::COLOUR2)//if we're moving toward colour 2
    {
        for(int i = 0; i<4; i++)
        {
        objectCol[i] -= difference[i];//subract the difference till we get there
        //we need to SNAP to the colour as we will not hit it every time using floats
            if( (objectCol[i]>(colour2[i]-(difference[i]*2))) && (objectCol[i]<(colour2[i]+(difference[i]*2)))  )
            {//if we hit this tiny but huuuge target
                objectCol[i] = colour2[i];//SNAP
            }

        }
    }else{
        if(goingTo == ColourState::COLOUR1)
        {
            for(int i = 0; i<4; i++)
            {
                objectCol[i] += difference[i];//add the difference till we get there
                //we need to SNAP to the colour as we will not hit it every time using floats
            if( (objectCol[i]>(colour1[i]-(difference[i]*2))) || (objectCol[i]<(colour1[i]+(difference[i]*2)))  )
            {//if we hit this tiny but huuuge target
                objectCol[i] = colour1[i];//SNAP
            }

            }
        }
    }

    if((objectCol[0] == colour1[0])&&(objectCol[1] == colour1[1])&&(objectCol[2] == colour1[2])&&(objectCol[3] == colour1[3]))
    {//if the objcolour == colour 1
        goingTo = ColourState::COLOUR2;//it's now time to move towards colour 2
    }else{
        if((objectCol[0] == colour2[0])&&(objectCol[1] == colour2[1])&&(objectCol[2] == colour2[2])&&(objectCol[3] == colour2[3]))
        {//if the objcolour == colour 2
            goingTo = ColourState::COLOUR1;//it's now time to move towards colour1  
        }

    }
} 
```

}

这个函数是这样调用的。

```
pulsateColour(white,blue, GO_scoreColour, *CS_GO_score, 10); 
```

但是，当“goingTo”和“CS_GO_score”指向的值指针（它们应该是相同的地址，因此技术上是相同的对象对吗？），在 VS 中观察值监视器我看到只有“goingTo”指向的值（因为它是函数的局部变量）被改变了？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T22:35:32.003

您正在按值传递枚举，因此该函数具有您传递的任何内容的本地副本。如果你想传递一个枚举并修改它的值，我建议通过引用传递。

```
enum ColourState {COLOUR1, COLOUR2};

void change_colour(ColourState& c)
{
  c = COLOUR2;
}

....

ColourState cs = COLOUR1;
change_colour(cs); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:37:31.493

> 但是，当 'goingTo' 和 'CS_GO_score' 指向的值指针（它们应该是相同的地址，因此技术上是相同的对象对吗？），

不...如果您传递指针本身，它将是“相同的对象”。在这里，您正在传递指针指向的值。或者，您可能想要传递参考。

```
void HUD::pulsateColour(GLfloat *colour1, 
                        GLfloat *colour2, 
                        GLfloat *objectCol, 
                        ColourState goingTo, /* pass by value */
                        int timeInFrames) 
```

...

> 我正在尝试将在函数范围之外声明的枚举传递给函数，以便更改函数内枚举的值会更改指向的枚举的值。您将需要更改函数以获取指针或引用：

```
 ColourState *goingTo, /* pass direct the pointer */ 
```

或者

```
 ColourState &goingTo, /* pass a reference-dont need to change the body of the function */ 
```

# lotus-notes - 解密 Lotus Notes NSF

> ID：14946544
> 
> 赞同：2
> 
> 时间：2013-02-18T22:33:59.923
> 
> 标签：lotus-notes, lotus-domino, lotus, interop-domino

我想以编程方式解密 Lotus Notes NSF 文件。假设对于每个 NSF，我都有访问 NSF 所需的 ID 文件和密码。

我使用的是 Lotus Notes 8.5.2、Windows 7 SP1 64 位。我愿意使用 COM、C++ API 或 C API。

我知道 C API 函数`NSFDbIsLocallyEncrypted`，它报告 NSF 是否已加密。但是，我不相信它能够解密 NSF。

我知道 C++ API 函数`LNNotesSession.CreateDatabaseCopy`，它以参数 3 为参数 `DBOptions`，它有一个我可以设置为的成员 `DBOptions.SetLocalEncryption( LNLOCALENCRYPTION::LNLOCALENCRYPTION_NONE )`。但是，此函数会创建一个新的 NSF。如果可能，我想就地解密源 NSF 以节省时间和磁盘空间。

如何从 NSF 中删除本地加密？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:57:06.803

AFAIK，没有用于解密 NSF 文件的公开 API。

此外，由于需要重写整个文件才能解密所有数据，所以我认为复制整个 NSF 不会有任何时间或空间损失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T03:26:06.873

要解密使用中等或强加密加密的 NSF 文件，以便只有特定的 ID 文件可以打开它，请登录到该 ID 文件，选择应用程序属性，然后取消选择“强加密”。然后，选择“压缩数据库”，关闭属性，关闭与该文件关联的所有内容，然后重新打开该文件。压缩过程会更新所有内容以匹配该选项的新状态。（您也可以使用 API 执行此操作。）

要解密使用用户公钥或用户 ID 中存在的共享/命名加密密钥加密的文档，您必须编写一个代理或 API 程序来打开数据库中的每个文档并调用 NSFNoteDecrypt，然后在每个文件上调用 NSFNoteUpdate。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-01-10T18:07:40.433

Ytria 似乎确实有一个软件解决方案（DatabaseEZ），您可以在其中设置数据库加密设置，尽管我没有尝试过。该软件的免费精简版似乎不允许这样做。

# java - 我如何告诉 Beaver 忽略减少/减少冲突？

> ID：14946545
> 
> 赞同：1
> 
> 时间：2013-02-18T22:34:02.780
> 
> 标签：java, beaver

我正在尝试使用[Beaver](http://beaver.sourceforge.net/)解析包含减少/减少冲突的语法。预计会发生冲突。其他解析器生成器支持说一些类似的东西`%expect 0 1`来指定一个减少/减少冲突是预期的，但 Beaver 似乎不支持这一点。如何告诉 Beaver 忽略已知的 reduce/reduce 冲突并生成解析器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-06T11:53:33.203

[Beaver 不能这样做](http://sourceforge.net/p/beaver/code/HEAD/tree/branches/v0.9/beaver-cc/src/main/java/beaver/comp/Action.java#l304)，但您可以使用 %left、%right 或 %nonassoc 指令来定义关联性和优先级规则。

我假设您不在乎在发生冲突时执行哪个 reduce（因为解析树是相同的，或者因为它们对于您的目的是相同的）。因此，定义*哪些*优先级对您来说并不重要，只要定义*足够的*优先级即可。

假设操作员 OP1 和 OP2 之间存在冲突，那么以下指令将解决您的冲突。

```
%nonassoc OP1;
%nonassoc OP2; 
```

但是，如果冲突发生在具有相同运算符 (OP) 的两个扣除规则之间，那么您需要

```
%left OP; 
```

或者

```
%right OP; 
```

# jquery - jquery ajax：何时使用回调挂钩与设置函数？

> ID：14946548
> 
> 赞同：5
> 
> 时间：2013-02-18T22:34:15.023
> 
> 标签：jquery

据我从[文档](http://api.jquery.com/jQuery.ajax/)中可以看出，有两种不同的方式来处理来自`$.ajax()`呼叫的响应。

**1) 将函数传递给`$.ajax()`的设置对象：**

```
$.ajax({
    success: function(){ ... },
    error: function(){ ... }
}); 
```

**2) 作为可链接的*“回调钩子”***

```
$.ajax({...})
    .done(function(){ ... })
    .fail(function(){ ... }) 
```

这两种方法之间的重要区别是什么，我什么时候应该选择其中一种？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:43:30.363

如果您直接在调用中附加该函数，则用法没有太大区别。当您想在其他地方使用回调函数时，区别就来了。

将回调函数发送到方法中：

```
function callForMe(callback) {
  $.ajax({
    url: '...',
    success: callback
  });
}

callForMe(function(data){
  // handle the response
}); 
```

从方法返回承诺，稍后等待响应：

```
function callFormMe() {
  return $.ajax({
    url: '...'
  });
}

var promise = callForMe();
// later on:
promise.done(function(data){
  // handle the response
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:49:39.360

我*总是*使用新的延迟对象（即 chainable`.done`等`.fail`）版本，即使在许多情况下没有节省代码长度。

原因是它允许我将进行 AJAX 调用的细节与响应的后续处理*分离。*

解耦使我能够：

1.  抽象出从数据处理中获取的数据
2.  添加多个处理程序，即使在 AJAX 调用完成之后
3.  `.fail`在没有`error:`参数的 AJAX 助手上使用处理程序
4.  用于`.pipe`在将数据传递给其他处理程序之前对数据进行后处理
5.  与其他异步事件同步

并且无需将回调直接传递给 AJAX 调用。

请参阅[这个答案](https://stackoverflow.com/a/14754681/6782)，我在其中给出了更具体的好处示例。

# dynamics-crm-2011 - 使用 Dynamics CRM 2011 进行敏捷风格开发

> ID：14946551
> 
> 赞同：7
> 
> 时间：2013-02-18T22:34:16.613
> 
> 标签：dynamics-crm-2011, dynamics-crm, microsoft-dynamics

我的团队负责一个中型 CRM 系统（约 1000 个用户）。目前，我们的 CRM 是在 Java Servlet 上内部构建的，我们正在切换到 Microsoft Dynamics CRM 2011。我们将不得不进行大量定制以适应我们的业务逻辑和法规要求。

我们目前每两周发布一次功能和错误修复（交换旧的 jar/jsp 文件，并交换新文件）。我的问题是：

1.  使用 Dynamics CRM，如何完成类似的事情？托管解决方案？
    如果用户基于已部署托管解决方案的 v1 进行了自定义，我可以卸载该解决方案并安装 v2 吗？
2.  如何进行变更控制？
3.  您发现什么是最佳实践和坑？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T08:01:15.323

如果您应该使用托管或非托管解决方案，则存在争议，因此您不会得到“这样做”的答案，或者更正确地说，也许您会得到很多不同的“这样做”。

我的经验是，最好对您拥有或维护的系统使用非托管解决方案，对您销售的产品使用托管解决方案。我认为这是因为很容易在解决方案之间建立依赖关系，这使得它们很难（即使不是不可能）删除，在某些情况下甚至更新。

您将无法卸载具有依赖于它们的资源的解决方案，但您可以使用新版本更新它们。

系统中没有实施变更控制，因此您需要的任何东西都必须在其他地方进行管理。

这些是我对这个主题的想法，你可能会听到更多，如果它们没有不同，我会感到非常惊讶。[我在MSDN](http://msdn.microsoft.com/en-us/library/gg334479.aspx)上找到了一篇文章，其中涵盖了您的一些问题。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T09:34:01.703

这是非常重要的讨论，我认为这不是最佳答案，这取决于您想要什么以及您的工作方式。我同意 Rickard 所说的大部分内容，我会给你一些链接，这些链接对我建立一个发展过程有很大帮​​助：

1和3：

*   [http://gonzaloruizcrm.blogspot.pt/2012/01/managed-or-unmanaged-solutions-in-crm.html](http://gonzaloruizcrm.blogspot.pt/2012/01/managed-or-unmanaged-solutions-in-crm.html)
*   [http://xrmconsultant.blogspot.pt/2011/11/crm-2011-solutions-problems-best.html](http://xrmconsultant.blogspot.pt/2011/11/crm-2011-solutions-problems-best.html)
*   [http://channel9.msdn.com/posts/Merging-CRM-2011-Solutions](http://channel9.msdn.com/posts/Merging-CRM-2011-Solutions)
*   [http://www.dynamicscrmtrickbag.com/2011/05/28/dynamics-crm-2011-solutions-part-1/](http://www.dynamicscrmtrickbag.com/2011/05/28/dynamics-crm-2011-solutions-part-1/)

2：

*   [http://intovsts.net/2012/12/28/integration-of-dynamics-crm-2011-solutions-with-tfs/](http://intovsts.net/2012/12/28/integration-of-dynamics-crm-2011-solutions-with-tfs/)
*   [http://community.dynamics.com/product/crm/crmtechnical/b/crmmusings/archive/2012/05/31/solution-packager-enable-source-control-for-solutions-in-crm-2011.aspx](http://community.dynamics.com/product/crm/crmtechnical/b/crmmusings/archive/2012/05/31/solution-packager-enable-source-control-for-solutions-in-crm-2011.aspx)

我想你可以在这里遇到有用的信息来定义你的开发过程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T13:56:00.667

1.  只是我的拙见：除非您正在开发一个独立的产品，当由客户/随机用户等安装时，您可能希望保护其完整性，否则请不要管理。但如果您正在开发/定制客户特定的解决方案，我看不到管理的任何好处。我的经验是，您可能会遇到依赖问题等，这会让您后悔选择托管。因此，只有在您计划销售需要以某种方式保护的孤立产品时才进行管理。

# android - 如何为我的 Android 应用验证用户身份？

> ID：14946554
> 
> 赞同：0
> 
> 时间：2013-02-18T22:34:29.830
> 
> 标签：android, security, authentication, oauth

我正在为我的大学开发一个 Android 应用程序。我之前参与过几个非常基本和次要的 Android 项目和 PHP 项目，只有 PHP 项目需要任何类型的身份验证。

对于那些项目，我只是使用了一个简单的表单，将填写的密码发送到服务器，该服务器通过检查接收到的密码以及存储在数据库中的 md5 哈希密码来验证登录。

我假设这种设置对于我当前的情况并不理想，尽管我不知道具体原因（如果有人能告诉我为什么那么它真的很有帮助）

那么，我真正想问的是，设置和身份验证机制如何？稍微查找一下，我发现 OAuth 似乎是一个不错的选择，但我不知道如何设置自己的基于 OAuth 的身份验证。有人可以帮我吗？因为我以前从来没有做过这样的事情，而且因为这是为了大学，我不想冒险。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T22:52:49.243

> 有人可以帮我吗？因为我以前从来没有做过这样的事情，而且因为这是为了大学，我不想冒险。

您的问题似乎是说您正在*为*和/或*代表*您的大学做这项工作：

*   他们将拥有用于验证员工和学生身份的系统，作为其 IT 系统的一部分。

*   他们*也可能*有或受规则、法规的约束，甚至有关这些类型的法律都应该实施。隐私政策、访问控制政策等。

在决定用户身份验证和授权的技术和策略之前，您需要了解大学的用途和要求。*与他们*交谈。

OTOH - 如果您为自己做这项工作（例如，作为 CS/SE/IT 课程的一部分的项目），*希望*您大学的其他人会使用它，您在短期内几乎可以忽略上述内容。但从长远来看，您的系统*可能*仍然适用的规则和法规（尤其是政府隐私法……取决于您所在的国家/地区），但如果您有足够多的用户，您可以解决这个问题。

# php - cakephp usermin 密码不保存

> ID：14946556
> 
> 赞同：0
> 
> 时间：2013-02-18T22:34:35.347
> 
> 标签：php, cakephp-2.0

我正在尝试编辑公司并更新 umusers 表中的密码。如果我使用 save 它会更新公司，但不会更新 umusers 表中的密码。如果我使用 saveAll 它会在 umusers 表中创建一个新用户。

这是我的设置

公司模式我有：

```
 public $hasOne = 'Umuser'; 
```

公司控制人

```
public function edit($id = null) {
    $this->Company->id = $id;
    if (!$this->Company->exists()) {
        throw new NotFoundException(__('Invalid company'));
    }
    if ($this->request->is('post') || $this->request->is('put')) {
        if ($this->Company->save($this->request->data)) {
            $this->Session->setFlash(__('The company has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The company could not be saved. Please, try again.'));
        }
    } else {
        $this->request->data = $this->Company->read(null, $id);
    }

} 
```

$this->request->data 的 var_dump：

```
array(2) { ["Company"]=> array(12) { ["id"]=> string(3) "157" ["member_number"]=> string(6) "234234" ["name"]=> string(5) "keith" ["address1"]=> string(5) "keith" ["address2"]=> string(5) "keith" ["county"]=> string(5) "keith" ["limited"]=> string(1) "0" ["tax_number"]=> string(5) "keith" ["contact_name"]=> string(5) "keith" ["phone"]=> string(5) "keith" ["email"]=> string(15) "keith@keith.com" ["payment_start"]=> array(3) { ["month"]=> string(2) "02" ["day"]=> string(2) "01" ["year"]=> string(4) "2013" } } ["Umuser"]=> array(1) { ["password"]=> string(6) "keith1" } } 
```

我知道目前我不会散列密码或取消设置它是否留空。我错过了什么，也许与 id 有某种关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:56:52.490

```
 In this you need to get the "umuser id" & specify the id value as below..
     {
        ["Company"]=> {
            ["id"]=> "157" 
             ......
        }
        ["Umuser"] => {
            ["id"]=> "some value"
            ["password"]=> "keith1"
        }
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T06:09:04.863

请确保您已将 id 作为编辑表单中的隐藏字段传递。

```
echo $this->Form->input('id', array('type' => 'hidden')); 
```

# ruby-on-rails-3 - Rails 无法在 iMac 上安装 PDFkit wkhtmltopdf

> ID：14946558
> 
> 赞同：0
> 
> 时间：2013-02-18T22:34:39.597
> 
> 标签：ruby-on-rails-3, pdfkit

我正在尝试在 Rails 应用程序中使用 PDFkit gem。但是，我无法加载 wkhtmltopdf。我首先尝试了这个：

```
$ brew install wkhtmltopdf 
```

得到了这个：

```
==> Downloading https://downloads.sf.net/project/machomebrew/Bottles/qt-  4.8.0-bottle.tar.gz
########################################################################   100.0%
Error: SHA1 mismatch
Expected: d03b56811d2cac933b6103bd4c8ac636dea3b877
Got: 2bfe00c5112b0d2a680cd01144701f8937846096
Archive: /Users/burtondav/Library/Caches/Homebrew/qt-4.8.0.bottle.tar.gz
(To retry an incomplete download, remove the file above.) 
```

因此，我下载了 wkhtmltopdf.app 并将其放入我的 Applications 文件夹中。然后我在 config/initializers 文件夹中创建了 pdfkit.rb。使用此代码：

```
PDFKit.configure do |config|

config.wkhtmltopdf = 'C:\Applications\wkhtmltopdf.app' #Path to your wkhtmltppdf installation directory

config.root_url = "http://localhost" # Use only if your external hostname is unavailable on the server.

end 
```

现在，我收到以下错误：

```
No wkhtmltopdf executable found at C:\Applications\wkhtmltopdf.app 
```

谢谢您的帮助！！

更新

PDFkit 可以在 Heroku 上运行吗？

更新2

我在命令行中运行了它并且它有效！所以，我知道它在我的 Mac 上。

```
 /Applications/wkhtmltopdf.app/Contents/MacOS/wkhtmltopdf "http://www.google.com" google.pdf 
```

更新3

我将其放入 Applications 中的同名文件夹中并尝试了以下操作：

```
 config.wkhtmltopdf = '/Applications/wkhtmltopdf ' #Path to your wkhtmltppdf installation directory 
```

但是，这也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-08T20:37:02.933

将 wkhtmltopdf 二进制文件设置为`/Applications/wkhtmltopdf.app/Contents/MacOS/wkhtmltopdf`（或安装目录为`/Applications/wkhtmltopdf.app/Contents/MacOS`，它会工作。

为方便起见，您也可以将其添加到您的 PATH 中。

# c# - 使用同一个表的 2 个外键构建模型

> ID：14946559
> 
> 赞同：1
> 
> 时间：2013-02-18T22:34:40.303
> 
> 标签：c#, entity-framework-5, data-modeling

假设我有一个`User`模型，现在我想添加一个`Friend`模型。我想命名我的 FK 字段`RequestorID`和`ResponderID`. 我需要哪些数据注释或流畅的 api 映射来完成此操作并防止 EF 自动生成自己的列？

```
public class Friend
{
    public int FriendID { get; set; }
    public int RequestorID { get; set; }
    public int ResponderID { get; set; }
    public int FriendStatusID { get; set; }
    public DateTime User1RequestDate { get; set; }
    public DateTime User2ResponseDate { get; set; }
    public virtual FriendStatus FriendStatus { get; set; }

    public virtual User Requestor { get; set; }
    public virtual User Responder { get; set; }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:51:53.993

尝试这个

```
public class Friend
    {
        public int FriendID { get; set; }
        public int RequestorID { get; set; }
        public int ResponderID { get; set; }
        public int FriendStatusID { get; set; }
        public DateTime User1RequestDate { get; set; }
        public DateTime User2ResponseDate { get; set; }
        public virtual FriendStatus FriendStatus { get; set; }

        [ForeignKey("RequestorID")] //fixed
        public virtual User Requestor { get; set; }
        [ForeignKey("ResponderID")]
        public virtual User Responder { get; set; }
    } 
```

# fullcalendar - Meteor fullcalendar外拖式崩溃

> ID：14946564
> 
> 赞同：0
> 
> 时间：2013-02-18T22:35:20.283
> 
> 标签：fullcalendar, meteor

我正在尝试在流星应用程序中复制外部拖动示例：http: [//arshaw.com/js/fullcalendar-1.5.4/demos/external-dragging.html](http://arshaw.com/js/fullcalendar-1.5.4/demos/external-dragging.html)

如果您将事件从左侧拖动到日历，则事件将具有蓝色背景。 ![fullcalendar-ok](../Images/1a42400b0af2f97db3fb5b2d2b5b1fab.png)

没关系。

我正在创建新应用程序

```
mrt create test
cd test
mrt add jquery
mrt add fullcalendar 
```

然后我将 jquery-ui 下载到 /client/external

开始流星

```
mrt 
```

当我将事件从左侧拖到日历时，日历事件背景丢失： ![全日历问题](../Images/2c61779aed5fa46ec9f5b15c8c459e33.png)

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:28:57.317

几天前我遇到了确切的问题。这是因为 fullcalendar-print.css 也在被加载。我最终删除了 fullcalendar mrt 包，只将 js 和 css 文件（打印文件除外）包含到我的流星项目中。

# xml - 解析 XML 命名空间节点

> ID：14946566
> 
> 赞同：2
> 
> 时间：2013-02-18T22:35:23.617
> 
> 标签：xml, xml-parsing, go

我对 Go 比较陌生，但在一项基本任务上苦苦挣扎。我正在使用“encoding/xml”包解析 GPX 文件，并具有以下示例 xml 数据；

```
<gpx creator="StravaGPX" version="1.1" xmlns="http://www.topografix.com/GPX/1/1" 

xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd http://www.garmin.com/xmlschemas/GpxExtensions/v3 http://www.garmin.com/xmlschemas/GpxExtensionsv3.xsd http://www.garmin.com/xmlschemas/TrackPointExtension/v1 http://www.garmin.com/xmlschemas/TrackPointExtensionv1.xsd http://www.garmin.com/xmlschemas/GpxExtensions/v3 http://www.garmin.com/xmlschemas/GpxExtensionsv3.xsd http://www.garmin.com/xmlschemas/TrackPointExtension/v1 http://www.garmin.com/xmlschemas/TrackPointExtensionv1.xsd" xmlns:gpxtpx="http://www.garmin.com/xmlschemas/TrackPointExtension/v1" xmlns:gpxx="http://www.garmin.com/xmlschemas/GpxExtensions/v3">
 <metadata>
  <time>2013-02-16T10:11:25Z</time>
 </metadata>
 <trk>
  <name>Demo Data</name>
  <trkseg>
   <trkpt lat="51.6395658" lon="-3.3623858">
    <ele>111.6</ele>
    <time>2013-02-16T10:11:25Z</time>
    <extensions>
     <gpxtpx:TrackPointExtension>
      <gpxtpx:atemp>8</gpxtpx:atemp>
      <gpxtpx:hr>136</gpxtpx:hr>
      <gpxtpx:cad>0</gpxtpx:cad>
     </gpxtpx:TrackPointExtension>
    </extensions>
   </trkpt> 
```

到目前为止，我能够获得以下类型的最基本信息；

```
type Gpx struct {
    Creator string `xml:"creator,attr"`
    Time string `xml:"metadata>time"`
    Title string `xml:"trk>name"`
    TrackPoints []TrackPoint `xml:"trk>trkseg>trkpt"`
}

type TrackPoint struct {
    Lat float64 `xml:"lat,attr"`
    Lon float64 `xml:"lon,attr"`
    Elevation float32 `xml:"ele"`
    Time string `xml:"time"`
    Temperature int `xml:"extensions>gpxtpx>atemp"`
} 
```

我无法解析的地方是 TrackPoint.Temperature。我无法正确匹配扩展名下的命名空间节点。

关于我哪里出错的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:57:04.610

您在 TrackPoint.Temperature xml 指令中以命名空间而不是变量名称为目标。

改变

```
Temperature int `xml:"extensions>gpxtpx>atemp"` 
```

至

```
Temperature int `xml:"extensions>TrackPointExtension>atemp"` 
```

[这是操场上的工作副本](http://play.golang.org/p/992Ozf7fn1)。

```
package main

import (
    "fmt"
    "encoding/xml"
    )

type Gpx struct {
    Creator string `xml:"creator,attr"`
    Time string `xml:"metadata>time"`
    Title string `xml:"trk>name"`
    TrackPoints []TrackPoint `xml:"trk>trkseg>trkpt"`
}

type TrackPoint struct {
    Lat float64 `xml:"lat,attr"`
    Lon float64 `xml:"lon,attr"`
    Elevation float32 `xml:"ele"`
    Time string `xml:"time"`
    Temperature int `xml:"extensions>TrackPointExtension>atemp"`
}

func main() {
    data := `<gpx creator="StravaGPX" version="1.1" xmlns="http://www.topografix.com/GPX/1/1" 

xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd http://www.garmin.com/xmlschemas/GpxExtensions/v3 http://www.garmin.com/xmlschemas/GpxExtensionsv3.xsd http://www.garmin.com/xmlschemas/TrackPointExtension/v1 http://www.garmin.com/xmlschemas/TrackPointExtensionv1.xsd http://www.garmin.com/xmlschemas/GpxExtensions/v3 http://www.garmin.com/xmlschemas/GpxExtensionsv3.xsd http://www.garmin.com/xmlschemas/TrackPointExtension/v1 http://www.garmin.com/xmlschemas/TrackPointExtensionv1.xsd" xmlns:gpxtpx="http://www.garmin.com/xmlschemas/TrackPointExtension/v1" xmlns:gpxx="http://www.garmin.com/xmlschemas/GpxExtensions/v3">
 <metadata>
  <time>2013-02-16T10:11:25Z</time>
 </metadata>
 <trk>
  <name>Demo Data</name>
  <trkseg>
   <trkpt lat="51.6395658" lon="-3.3623858">
    <ele>111.6</ele>
    <time>2013-02-16T10:11:25Z</time>
    <extensions>
     <gpxtpx:TrackPointExtension>
      <gpxtpx:atemp>8</gpxtpx:atemp>
      <gpxtpx:hr>136</gpxtpx:hr>
      <gpxtpx:cad>0</gpxtpx:cad>
     </gpxtpx:TrackPointExtension>
    </extensions>
   </trkpt>
  </trkseg>
 </trk>
`
    g := &Gpx{}
    _ = xml.Unmarshal([]byte(data), g)
    fmt.Printf("len: %d\n", len(g.TrackPoints))
    fmt.Printf("temp: %v\n", g.TrackPoints[0].Temperature)
} 
```

# c# - ASP.NET 托管 Active Directory RSAT powershell 脚本--DC 挂起

> ID：14946575
> 
> 赞同：3
> 
> 时间：2013-02-18T22:36:15.590
> 
> 标签：c#, asp.net, powershell, active-directory, impersonation

我正在制作一个 ASP.NET (C#) 应用程序，它基本上是一个网关，用于为日常管理任务运行 Powershell 脚本。其中一些脚本使用 ActiveDirectory RSAT 模块，我发现其中一些 cmdlet 在通过网关调用时将无法正确运行，并且跟踪似乎暗示与域控制器的连接成功，但随后被关闭由直流电。

下面的代码是一个 ASP.NET Web 表单，它有一个文本输入来指定用户名。基本上，它执行以下操作：

*   假设 web 用户的身份（确认被 powershell 继承）
*   在该运行空间中创建一个 powershell 运行空间和一个管道
*   调用 Get-ADUser cmdlet 并将用户名作为 Identity 参数传递
*   通过将用户名读入表单上的输出元素来确认成功。

    ```
    protected void LookupButton_Click( object sender, EventArgs e ) {
      WindowsImpersonationContext impersonationContext = ((WindowsIdentity)User.Identity).Impersonate();
      Runspace runspace;
      Pipeline pipe;
      try {
        runspace = new_runspace();
        runspace.Open();
        pipe = runspace.CreatePipeline();
        Command cmd = new Command("Get-ADUser");
        cmd.Parameters.Add(new CommandParameter("Identity", text_username.Text));
        pipe.Commands.Add(cmd);

        PSObject ps_out = pipe.Invoke().First();
        output.Text = ps_out.Properties["Name"].Value.ToString();
      }
      catch( Exception ex ) {
        error.Text = ex.ToString();
      }
      finally {
        impersonationContext.Undo();
      }
    }

    private Runspace new_runspace( ) {
      InitialSessionState init_state = InitialSessionState.CreateDefault();
      init_state.ThreadOptions = PSThreadOptions.UseCurrentThread;
      init_state.ImportPSModule(new[] { "ActiveDirectory" });
      return RunspaceFactory.CreateRunspace(init_state);
    } 
    ```

有趣的部分是在 catch 块中暴露的错误消息中的具体措辞（强调我的）：

> System.Management.Automation.CmdletInvocationException：无法联系服务器。这可能是因为此服务器不存在、当前已关闭或没有运行 Active Directory Web 服务。---> Microsoft.ActiveDirectory.Management.ADServerDownException：无法联系服务器。这可能是因为此服务器不存在、当前已关闭或没有运行 Active Directory Web 服务。---> System.ServiceModel.CommunicationException：套接字连接被中止。这可能是由于处理您的消息时出错或远程主机超出接收超时，或者是潜在的网络资源问题造成的。本地套接字超时为“00:01:59.6870000”。---> System.IO.IOException: 读操作失败，见内部异常。---> System.ServiceModel.CommunicationException：套接字连接已中止。这可能是由于处理您的消息时出错或远程主机超出接收超时，或者是潜在的网络资源问题造成的。本地套接字超时为“00:01:59.6870000”。--->**System.Net.Sockets.SocketException：现有连接被远程主机强行关闭**

上层异常表明存在超时，但下层异常没有表明超时（从命令返回只需要几秒钟）。在服务器无法访问的情况下，最低级别的异常消息说明了很多，但是这个特定的措辞让我认为这里存在某种身份验证（或其他安全）问题。

2013 年 2 月 19 日更新：使用[此处](http://support.microsoft.com/default.aspx?scid=kb;en-us;Q306158)描述的模拟方法时，脚本按预期运行。这让我认为问题可能是 Windows 身份验证提供的 WindowsIdentity 对象可能不适合基本上对 AD 进行 RPC 调用的脚本。不幸的是，我真的不希望放弃 Windows 身份验证，因为我必须在我的应用程序代码中处理用户的密码（这不是我想要的责任）。

我还没有找到任何关于 windows auth 到底在做什么或允许使用它的模拟结果的任何文档。是否可以在使用 Windows 身份验证时执行此操作，还是我必须要求用户给我他们的密码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T22:06:44.407

## 原因

此问题的根本原因是当您在 IIS 中使用 Windows 身份验证时，安全令牌仅对 Web 客户端计算机对 Web 服务器计算机的身份验证有效。相同的令牌对于向任何其他机器验证 Web 服务器机器无效，这就是我的应用程序试图做的事情：

1.  客户端获取安全令牌并将其发送到 Web 服务器。
2.  IIS 要求 DC 验证令牌并验证令牌。此时，Web 客户端已通过 Web 服务器的身份验证。
3.  IIS 根据应用程序的授权规则检查经过身份验证的身份。
4.  Web 应用程序使用 IIS 接收到的令牌来模拟身份，并运行一个脚本，该脚本随后将继承相同的安全令牌。
5.  该脚本尝试使用相同的令牌对远程 RPC 服务进行身份验证。
6.  域控制器将身份验证尝试识别为重放攻击（该令牌用于不同的服务）并关闭连接。

将其称为 Kerberos 的“副作用”并不完全正确，但起初对我来说并不明显，尽管事后看来很明显。我希望有人可以从这些信息中受益。

## 解决方案

[对此的解决方案是让应用程序生成它自己的安全令牌，然后通过对LogonUser()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378184%28v=vs.85%29.aspx)进行 API 调用，该令牌可用于作为 Web 用户对其他机器上的服务进行身份验证。您的应用程序代码需要访问用户的明文密码，这可以通过在 IIS 中仅启用 HTTP Basic 身份验证来实现。Web 服务器仍将执行相同的身份验证和授权规则，但用户名和密码都将可用于您的应用程序代码。请记住，这些凭据以**明文**形式传输到 Web 服务器，因此您需要在生产环境中使用它之前要求 SSL。

[我根据此处](http://support.microsoft.com/default.aspx?scid=kb;en-us;Q306158)描述的过程创建了一个小型帮助程序类，以促进此过程。这是一个简短的演示：

登录助手：

```
public class IdentityHelper {
  [DllImport("advapi32.dll")]
  private static extern int LogonUserA( String lpszUserName, String lpszDomain, String lpszPassword, int dwLogonType, int dwLogonProvider, ref IntPtr phToken );

  [DllImport("advapi32.dll",
    CharSet = CharSet.Auto,
    SetLastError = true)]
  private static extern int DuplicateToken( IntPtr hToken, int impersonationLevel, ref IntPtr hNewToken );

  [DllImport("kernel32.dll",
    CharSet = CharSet.Auto)]
  private static extern bool CloseHandle( IntPtr handle );

  public const int LOGON32_LOGON_INTERACTIVE = 2;
  public const int LOGON32_PROVIDER_DEFAULT = 0;
  public const int IMPERSONATION_LEVEL_IMPERSONATE = 2;

  public static WindowsIdentity Logon( string username, string password, string domain = "" ) {
    IntPtr token = IntPtr.Zero;
    WindowsIdentity wid = null;

    if( domain == "" ) {
      split_username(username, ref username, ref domain);
    }

    if( LogonUserA(username, domain, password, LOGON32_LOGON_INTERACTIVE, LOGON32_PROVIDER_DEFAULT, ref token) != 0 ) {
      wid = WIDFromToken(token);
    }
    if( token != IntPtr.Zero ) CloseHandle(token);
    return wid;
  }

  public static WindowsIdentity WIDFromToken( IntPtr src ) {
    WindowsIdentity wid = null;
    IntPtr token = IntPtr.Zero;
    if( DuplicateToken(src, IMPERSONATION_LEVEL_IMPERSONATE, ref token) != 0 ) {
      wid = new WindowsIdentity(token);
    }
    if( token != IntPtr.Zero ) CloseHandle(token);
    return wid;
  }

  private static void split_username( string username, ref string username_out, ref string domain_out ) {
    string[] composite_username = username.Split(new char[] { '\\' });
    if( composite_username.Length == 2 ) {
      domain_out = composite_username[0];
      username_out = composite_username[1];
    }
  }
} 
```

Powershell 助手类：

```
public class PSHelper {
  public static Runspace new_runspace() {
    InitialSessionState init_state = InitialSessionState.CreateDefault();
    init_state.ThreadOptions = PSThreadOptions.UseCurrentThread;
    init_state.ImportPSModule(new[] { "ActiveDirectory" });
    return RunspaceFactory.CreateRunspace(init_state);
  }
} 
```

ASP.NET 表单处理程序：

```
protected void LookupButton_Click( object sender, EventArgs e ) {
  string outp = "";
  WindowsIdentity wid = IdentityHelper.Logon(Request["AUTH_USER"], Request["AUTH_PASSWORD"]);
  using( wid.Impersonate() ) {
    Runspace runspace;
    Pipeline pipe;
    runspace = PSHelper.new_runspace();
    runspace.Open();
    pipe = runspace.CreatePipeline();
    Command cmd = new Command("Get-ADUser");
    cmd.Parameters.Add(new CommandParameter("Identity", text_username.Text));
    pipe.Commands.Add(cmd);
    outp = pipe.Invoke().First().Properties["Name"].Value.ToString();
  }
  output.Text = outp;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T02:42:29.947

在导入 ActiveDirectory 模块和尝试执行命令之间添加延迟是否有帮助？

# php - 用 php 数组完成一个 html 表

> ID：14946578
> 
> 赞同：0
> 
> 时间：2013-02-18T22:36:23.467
> 
> 标签：php, arrays

我正在尝试将行标题插入到 html 表中，该表稍后由 php 数组填充，其内容来自 MYSQL 查询。

我有代码可以做所有事情，除了行标题在每行开头的 4 列中重复，而不仅仅是第一行显示 $item[1]，第二行显示 $item[2]，等等。

这是我的代码：

```
// query the database
$result = mysql_query($query_getproductbrands);

// cols we are interested in (from the SQL query)

$cols = array(
  'productName',
  'brandName',
  'productDescription',
  'productPrice',
);

$titles = array(
  'Product',
  'Brand',
  'Description',
  'Price',
);

// initialize rotated result using cols
$rotated = array();
foreach($cols as $col) {
  $rotated[$col] = array();
}

// fill rotated array
while(($row = mysql_fetch_assoc($result)) !== false) {
  foreach($cols as $col) {
    $rotated[$col][] = $row[$col];
  }
}

// echo html
echo "<table border=1 width=473>";
echo "<tr>";

echo "</tr>";
foreach($rotated as $col => $values) {
 echo "<tr>";

 foreach($titles as $title) {
    echo "<td> " . htmlentities($title) . "</td>";
 }

 foreach($values as $value) {
    echo "<td> " . htmlentities($value) . "</td>";
  }
  echo "</tr>";
}
echo "</table>";

?> 
```

因此，这将生成一个包含以下内容的表格：

产品 品牌 描述 价格 product1 product2 product3

产品 品牌 描述 价格 品牌1 品牌2 品牌3

产品 品牌 描述 价格 描述1 描述2 描述3

产品 品牌 描述 价格 price1 price2 price3

我希望它生成一个包含以下内容的表格：

产品 产品1 产品2 产品3

品牌 品牌1 品牌2 品牌3

描述 描述1 描述2 描述3

价格 价格1 价格2 价格3

我考虑过为第一个“title”数组循环，然后为“values”数组循环，但这不起作用。

如果我在第一个循环中回显 $col，我只会重复第一个值（产品），我可以选择 $title[0]，但我不确定如何将它增加到每一行，然后实现循环剩余的数据查询（值）。

请问有人可以提供一些建议来实现所需的表格吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:40:19.223

将其移到 foreach 循环之外：

```
foreach($titles as $title) {
    echo "<td> " . htmlentities($title) . "</td>";
 } 
```

最好把它放在这里：

```
echo "<tr>";
<-- Put me here.
echo "</tr>"; 
```

如果我理解正确，那应该可以解决问题。

# jquery - .net 创建用户交互式流程图和工作流程图

> ID：14946580
> 
> 赞同：2
> 
> 时间：2013-02-18T22:36:28.180
> 
> 标签：jquery, .net, asp.net-mvc, orchardcms

我正在尝试开发一个新的 asp.net 系统（c#/ vb）：

*   允许用户：绘制工作流/流程图（有框/圆形连接器等），编辑/创建它们。工作流程的每个部分，即盒子将能够有一个名称、描述和上传文件。
*   然后，一旦用户创建了流程并提供了所需的所有详细信息，即文件描述等，我将需要能够在他们选择查看/编辑图表时重新绘制图表。

我一直在搜索和搜索尝试示例，但我什至无法获得基本的绘图和保存工作。我在[orchard CMS](http://www.orchardproject.net/)中看到 Sébastien 提供了一个新的模块工作流程。这看起来非常好，我想尝试做类似的事情，但仅用于绘图/图表我不需要能够创建用户交互式工作流，只需针对每个节点/实体的详细信息图表

任何帮助将不胜感激！

谢谢，乔恩

# xcode - 如何从 Cocoa-Applescript 应用程序启动命令行二进制文件？

> ID：14946582
> 
> 赞同：0
> 
> 时间：2013-02-18T22:36:34.373
> 
> 标签：xcode, applescript

[我想为名为gmsh](http://geuz.org/gmsh/)的命令行二进制文件创建一个简单的 GUI Cocoa-Applescript 应用程序。它可以使用我想通过 GUI 指定的许多参数启动。当它启动时，它会打开一个 X11 窗口。

在创建复杂的 GUI 之前，我创建了一个带有一个文本字段和一个按钮的简单界面。我希望文本字段信息成为传递给二进制文件的一个参数，并且当我单击二进制文件的按钮以使用该参数启动时。

我可以使用显示警报来完成这项工作，例如，当按下按钮时，警报会显示文本字段输入。但是，当我尝试用 do shell 脚本替换显示警报时，应用程序冻结并且没有任何反应。

我不知道添加 gmsh 二进制文件的合适位置，所以我把它放在了 Supporting Files 中。

这是我的非工作 AppDelegate.applscript，

```
script AppDelegate
property parent : class "NSObject"

property argOne : ""

on buttonClicked_(sender)
    -- display alert "Argument one is " & argOne
    do shell script "gmsh " & argOne
end buttonClicked_

on applicationWillFinishLaunching_(aNotification)
    -- Insert code here to initialize your application before any files are opened 
end applicationWillFinishLaunching_

on applicationShouldTerminate_(sender)
    -- Insert code here to do any housekeeping before your application quits 
    return current application's NSTerminateNow
end applicationShouldTerminate_

end script 
```

一旦 X11 应用程序启动，我不需要该应用程序保持打开状态，因为 Cocoa-Applescript 只是一个 gui 启动器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:18:05.240

执行 do shell 脚本时，只要 shell 脚本正在运行，您的 GUI 就会冻结。当程序一直冻结时，这意味着您的 do shell 脚本正在挂起。我看到的第一件事是我错过了命令和您发送来执行 shell 脚本的参数之间的空格。这可能是你的第一个问题，应该是这样的

```
 do shell script "gmsh " & argOne 
```

当您想要保持 GUI 响应时，AppleScriptObjC 中有三个选项：

1.  在后台运行 shell 命令
2.  使用 performSelectorInBackground_withObject_("NameOfHandler:", 参数)
3.  创建一个 NSTask

# symfony - 您请求了一个不存在的服务“jms_serializer”

> ID：14946586
> 
> 赞同：5
> 
> 时间：2013-02-18T22:37:01.003
> 
> 标签：symfony, symfony-2.1, jmsserializerbundle

我正在尝试使用[JMSSerializerBundle](http://jmsyst.com/bundles/JMSSerializerBundle)但运行后未列出该服务`app/console container:debug | grep jms_serializer`

```
$ app/console container:debug | grep jms_serializer
jms_serializer.json_deserialization_visitor   container JMS\SerializerBundle\Serializer\JsonDeserializationVisit
jms_serializer.json_serialization_visitor     container JMS\SerializerBundle\Serializer\JsonSerializationVisitor
jms_serializer.metadata.lazy_loading_driver   container Metadata\Driver\LazyLoadingDriver
jms_serializer.metadata_driver                container Metadata\Driver\DriverChain
jms_serializer.naming_strategy                container JMS\SerializerBundle\Serializer\Naming\CacheNamingStrate
jms_serializer.xml_deserialization_visitor    container JMS\SerializerBundle\Serializer\XmlDeserializationVisito
jms_serializer.xml_serialization_visitor      container JMS\SerializerBundle\Serializer\XmlSerializationVisitor
jms_serializer.yaml_serialization_visitor     container JMS\SerializerBundle\Serializer\YamlSerializationVisitor 
```

安装后

```
composer require jms/serializer-bundle 
```

并配置

```
// in AppKernel::registerBundles()
$bundles = array(
    // ...
    new JMS\SerializerBundle\JMSSerializerBundle($this),
    // ...
); 
```

如果你在某个地方使用

```
$this->get('jms_serializer') 
```

我得到错误`You have requested a non-existent service "jms_serializer".`

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T00:44:50.997

服务的名称是序列化程序。您应该只使用以下内容。

```
$this->get('serializer'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-03T12:25:10.657

捆绑包已安装但未在 bundles.php 中自动启用。必须手动启用它。

启用 JMSSerializerBundle ：

```
JMS\SerializerBundle\JMSSerializerBundle::class => ['all' => true], 
```

访问服务：

```
$serializer = $this->container->get('jms_serializer'); 
```

Symfony 4.4

# java - java循环没有正确结束

> ID：14946591
> 
> 赞同：-2
> 
> 时间：2013-02-18T22:37:21.707
> 
> 标签：java

大家好，我试图用这段代码退出一个循环，但在它结束之前它仍然会打印出我不想要的行：

```
do {
        System.out.println("Would you like to change one of the numbers    (y/n)?");
        choice = kb.next().charAt(0);
        System.out.println("Please enter the index of the number you want to change:");
        indexChange = kb.nextInt();
        System.out.println("Please enter the number you want to change:");
        changedIndex = kb.nextInt();
        elements[indexChange - 1] = changedIndex;
        for (int i = 0; i < elements.length; i++)
            System.out.println(index[i] + elements[i]);

    } while (choice != 'n'); 
```

这两行在循环结束之前仍然打印出来：“请输入您要更改的号码：”&“请输入您要更改的号码：”。你们中的任何人都可以帮助解决这个错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:41:34.520

您需要`break`在循环中使用 a 。在这种情况下，无需`choice`在循环的每次迭代的开始或结束时检查，因此您可以使用`while (true)`to 循环直到`break`达到。

```
while (true) {
        System.out.println("Would you like to change one of the numbers    (y/n)?");
        choice = kb.next().charAt(0);
        if (choice == 'n')
            break;
        System.out.println("Please enter the index of the number you want to change:");
        indexChange = kb.nextInt();
        System.out.println("Please enter the number you want to change:");
        changedIndex = kb.nextInt();
        elements[indexChange - 1] = changedIndex;
        for (int i = 0; i < elements.length; i++)
            System.out.println(index[i] + elements[i]);

    } 
```

不过要小心。很容易不小心写出无限循环！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:41:09.327

您需要在处理剩余输入之前检查退出条件...

```
do {
    System.out.println("Would you like to change one of the numbers    (y/n)?");
    choice = kb.next().charAt(0);
    if (choice != 'n' && choice != 'N') {
        System.out.println("Please enter the index of the number you want to change:");
        indexChange = kb.nextInt();
        System.out.println("Please enter the number you want to change:");
        changedIndex = kb.nextInt();
        elements[indexChange - 1] = changedIndex;
        for (int i = 0; i < elements.length; i++) {
            System.out.println(index[i] + elements[i]);
        }
    }

} while (choice != 'n' && choice != 'N'); 
```

您还应该检查大写字符...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T22:43:03.470

这个检查

```
 while (choice != 'n'); 
```

do 循环的每次迭代仅发生一次。因此，在您的循环中，您询问是否要更改其中一个数字，然后询问其他问题，然后检查他们为第一个问题输入的值。

您可以在获得他们的选择后使用关键字“break”来跳出循环。例如。

```
if (choice == 'n') 
{
   break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T22:51:15.353

尝试...

```
while(!'n'.equals(choice.toLowerCase())){... 
```

# javascript - svg 变换矩阵改变元素的笔画。如何防止这种情况？

> ID：14946594
> 
> 赞同：0
> 
> 时间：2013-02-18T22:37:32.763
> 
> 标签：javascript, html, svg, jquery-svg

我正在对 svg-edit 进行修改，并且我编写了一个函数，用户选择一个元素并单击一个按钮来触发一个要求新尺寸的函数，并且该元素被调整为调整后的尺寸。

然而有一个问题。当尺寸调整大小时，笔画宽度有时也会调整大小。线条显得更细。有什么办法可以防止这种情况发生吗？

这是我的功能：

```
function changeDimensions() 

{

    svgNode = svgCanvas.getSelectedElems()[0];

    var transformw=prompt("Enter your new width");
    var transformh=prompt("Enter your new height");
    var lastw = svgNode.getBoundingClientRect().width;
    var lasth = svgNode.getBoundingClientRect().height;

    newW=transformw/lastw;
    newH=transformh/lasth;
    alert(newH);
    alert(newW);

    svgCanvas.changeSelectedAttribute("transform", "matrix(" + newW + ", 0, 0, " + newH + ", 0, 0)");

    svgCanvas.recalculateAllSelectedDimensions();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T07:18:10.410

Opera、Webkit 和 Firefox 实现了 SVG tiny [vector-effects="non-scaling-stroke"](http://schepers.cc/svg/vectoreffects/nonscalingstroke.svg)。IE 不支持它，但据我所知，所以如果你需要支持，你需要在 javascript 中做一些手动调整笔画的事情。

# c++ - c++对象工厂函数

> ID：14946598
> 
> 赞同：0
> 
> 时间：2013-02-18T22:37:54.547
> 
> 标签：c++, factory, object-slicing

假设我有以下数据结构：

```
struct Base
{
    Base(const int id, const std::string &name, const std::string &category):
        id(id), name(name), category(category) {}

    int         id;
    std::string name;
    std::string category;
};

struct A : public Base
{
    A(const int id, const std::string &name, const std::string &category,
      const int x, const int y) :
     Base(id, name, category), x(x), y(y) {}
    int x, y;
}; 
```

我想创建一个返回派生类向量的**单一**工厂方法，其中 id、名称和类别在函数中是已知的。我遇到的问题是切片......

```
std::vector< Base* > getVector(...) 
```

结构 A 的数据成员丢失了！（dynamic_cast 回 A 在生产代码中可以接受？）

所以我有这个模板方法，但我仍然认为它不是最好的解决方案：

```
template< class T >
std::vector< T > getVector()
{
    std::vector< T > retVal;

    retVal.push_back(T(45, "The Matrix", "Science Fiction"));
    retVal.push_back(T(45, "Good Luck Chuck", "Comedy"));
    ...
    return retVal;
} 
```

除了模板方法，还有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:50:09.343

你所要求的似乎有问题，因为你想要：

*   抽象对象创建直到运行时
*   在编译时创建对象后访问特定成员

所以没有办法让它体面地工作。您的模板代码仍然需要在调用者站点静态知道对象的类型，因此对象的创建不会被抽象掉。

我的建议是重新考虑你的问题：你为什么想要一个动态工厂？为什么`Base`类中的所有对象不能共享访问器？

如果你不能清楚地回答这两个问题，那可能意味着你一开始就不应该有这个类层次结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:58:40.780

我实际上认为您的模板可能是最好的解决方案，至少它是惯用的 C++。

使用 RTTI`dynamic_cast`也可以，但它的安全性较低（运行时与编译时类型检查）并且通常效率较低。然而，有时——或者实际上经常——你只*需要*在运行时决定多态性（例如，当你需要不同的派生对象`std::vector`并且不能使用固定长度时`std::tuple`）。然后，您可以像您已经准备好的那样，通过使用基类*指针*向量而不是对象来解决切片问题。（普通）指针的问题在于它们在某种程度上规避了 C++ 的自动内存管理：当`std::vector<Base*>`超出范围时，指向的派生对象*不会*留在人迹罕至的地方闲逛而被删除：您有内存泄漏。这就是为什么像 Java 这样更多地依赖这种使用继承方式的语言会被垃圾回收。[这个问题在别处讨论过](https://stackoverflow.com/questions/147130/why-doesnt-c-have-a-garbage-collector)，推荐的解决方案是用`Base*`替换`std::unique_ptr<Base>`。

一旦你运行了这个，你就可以使用运行时多态函数。您通常*不需要*`dynamic_cast`，而是将不同派生实例不同的所有内容编写为虚拟成员函数。

# asp.net-mvc - 使用 EF Codefirst 在 MVC4 中删除子项和父项

> ID：14946604
> 
> 赞同：0
> 
> 时间：2013-02-18T22:38:26.970
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, asp.net-mvc-4

我有一些父/子关系如下：

```
public class Card
{
    public virtual int CardId { get; set; }
    public virtual Set ParentSet { get; set; }
    public virtual IList<Side> Sides { get; set; }
}

public class Set
{
    public virtual int SetId { get; set; }
    public virtual Set ParentSet { get; set; }
    public virtual IList<Card> Cards { get; set; }
}

public class Side
{
    public virtual int SideId { get; set; }
    public virtual Card ParentCard { get; set; }
} 
```

因此，一套包含包含边的卡片。一个 Set 还可以包含其他 Set。

我尝试创建一个基本的删除控制器操作：

```
public ActionResult DeleteConfirmed(int cardId)
{
    Card card = _db.Cards.FirstOrDefault(c => c.CardId == cardId);
    if (card == null)
    {
        return HttpNotFound();
    }

    _db.Cards.Remove(card);
    _db.SaveChanges();
    return RedirectToAction("Detail", "Set", new {setId = card.ParentSet.SetId});
} 
```

但我收到一个错误 DbUpdateException：

“保存不为其关系公开外键属性的实体时发生错误。EntityEntries 属性将返回 null，因为无法将单个实体标识为异常源。通过公开外键可以更轻松地处理保存时的异常实体类型中的关键属性。”

如果需要，我可以在此处发布详细信息，但我觉得这是与我的模型或配置相关的问题。我想我不必为每个使父 FK 无效的实体构建级联删除方法......对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:49:34.420

您看到此错误是因为您想使用 Forgein Key 删除项目。

您应该删除 Card==Deleting Card 的所有面。

[在这里您可以找到有关在 EF 中删除的更多信息](http://blog.oneunicorn.com/2012/06/02/deleting-orphans-with-entity-framework/)

# bash - 改进 bash 中的睡眠排序

> ID：14946607
> 
> 赞同：2
> 
> 时间：2013-02-18T22:38:39.003
> 
> 标签：bash, sorting

我遇到了这个漂亮的 bash 脚本，这有点无聊。

```
#!/bin/bash
function f() {
    sleep "$1"
    echo "$1"
}
while [ -n "$1" ]
do
    f "$1" &
    shift
done
wait 
```

它休眠该数字给定的秒数，然后输出该数字。最低的数字首先醒来。

我认为可以通过首先将数字除以列表中的最大数字，然后运行它，并在它退出时乘以最大值来改进它。

这是我的第一次尝试：

```
#!/bin/bash

declare -a to_sort

function f() {
    sleep "$1"
    final_var=$(echo "$1*$2"|bc)
    echo "$1"
}
function max(){
for var in "$@"
do
    if [ "$var" -gt "$max" ] # Using the test condition
    then
        max="$var"
    fi
done
}

echo "$1"| read -a to_sort

let max_var = max to_sort

for i in "${to_sort[@]}"
do
    parsed_var=$(echo "$i/$max_var"|bc)
    f parsed_var max_var &
    shift
done
wait 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T00:50:59.253

语法和逻辑中有 7 个问题阻止了它的工作，如下所述。

```
#!/bin/bash

declare -a to_sort

function f() {
    sleep "$1"
    final_var=$(echo "$1*$2"|bc)
    #Output result after multiplication
    #and skip decimals
    echo "${final_var%.*}"
}
function max(){
# Initialize max so we have something to compare against
max=$1
for var in "$@"
do
    if [ "$var" -gt "$max" ]
    then
        max="$var"
    fi
done
# output the max we found
echo $max
}

# Avoid assigning in subshells
read -a to_sort <<< "$1"
#This is how you assign the output of a command
max_var=$(max "${to_sort[@]}")

for i in "${to_sort[@]}"
do
    # Add scale to avoid truncating all to 0
    parsed_var=$(echo "scale=6; $i/$max_var"|bc)

    # expand variables
    f $parsed_var $max_var &
    shift
done
wait 
```

另请注意，GNU sleep 处理分数，但许多其他操作系统不处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:56:09.337

这条线

```
echo "$1"| read -a to_sort 
```

`to_sort`在管道完成后不再存在的子shell中设置值。要设置 的值`to_sort`并在以后使用它，您需要`read`在当前 shell 中执行该命令。一种可能：

```
read -a to_sort <<< "$1" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T01:05:29.730

我看到 @that other guy 已经回答了，但我还是发布了这个......
这是我个人的做事方式。
**编辑：**粘贴代码时忘记了一些行

```
#!/usr/bin/env bash

# I have learned that the above is prefered over "#!/bin/bash",
# to be more portable I think.

# Do this here (instead of 'echo "$1"| read -a to_sort' below (which was
# wrong anyway) because you chose to use "for i in 'to_sort'" below
# you can't use 'shift' there so you must use all arguments already here.
declare -a to_sort=("$@")
#debug: declare -p to_sort

function f() {
  sleep "$1"

  # This can be done in another way, see below
  # (and "final_var" is not used anywhere else)
  #final_var=$(echo "$1*$2"|bc)
  final_var=$( bc <<< "$1 * $2" )
  #debug: echo "\$1:$1; \$2:$2; final_var:$final_var"

  echo "$1"
}

function max() {
  res=0
  for var in "$@"; do
    # Tip: use (( ... )) when testing numeric values, no need for "$" when
    # using that.
    #if [ "$var" -gt "$max" ] # Using the test condition
    if (( var > max )); then
      # You can't set a return value for the function, echo at the en instead
      #max="$var"
      res="$var"
    fi
  done
  echo "$res"
}

# This is wrong (as @chepner points out)
#echo "$1"| read -a to_sort
# if used here it should be 'to_sort[0]="$1"', when using like this
# there is no need to use "declare -a ..."

# This is wrong
#let max_var = max to_sort
# - no space before or after "="
# - not necessary to us "let"
# - can't assign directly from a function
# Should be
max_var=$(max "${to_sort[@]}")
#debug: echo "max_var:$max_var"

for i in "${to_sort[@]}"; do
  # This is wrong
  #parsed_var=$(echo "$i/$max_var"|bc)
  # - as far as I know bc needs "scale" when divide (* bad english?)
  #   otherwise it's truncated to integer.
  # - nicer to use "command <<< text" than "echo text | command"
  parsed_var=$( bc <<< "scale = 3; $i / $max_var" )

  # You must have "$" here
  #f parsed_var max_var &
  f "$parsed_var" "$max_var" &

  # This is wrong here since you are not using the parameters
  # of the script anymore.
  #shift
done

wait 
```

我离开调试行，当我用调试运行它时，我得到了这个：

```
-$ ./sleeping 1 2 3
declare -a to_sort='([0]="1" [1]="2" [2]="3")'
max_var:3
final_var:.999; $1:.333; $2:3
final_var:1.998; $1:.666; $2:3
final_var:3.000; $1:1.000; $2:3 
```

**编辑 2：** 我用调试输出更改了上一节中使用的名称。我偶然发现了这个：
[http](http://www.talisman.org/~erlkonig/documents/commandname-extensions-considered-harmful)
://www.talisman.org/~erlkonig/documents/commandname-extensions-considered-harmful 在阅读 SO 的帖子时（现在找不到）。所以我不想因为导致任何人使用`.sh`脚本文件而感到内疚:)

# java - 如何在 Java 中的 XSLT 转换期间提供（xmlns）命名空间

> ID：14946616
> 
> 赞同：0
> 
> 时间：2013-02-18T22:39:15.867
> 
> 标签：java, xml, xslt, transform

我需要在xml下面进行转换（没有命名空间）

XML:

```
<?xml version="1.0" encoding="UTF-8"?>
<policy>
 <num-drivers>123</num-drivers>
 <risk-policy-ind>false</policy-ind>
 <premium-amt>23.00</premium-amt>
</policy> 
```

风格：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions" 
xmlns="http://aaa.bbb.com" xmlns:ptws="http://aaa.bbb.com" exclude-result-prefixes="xs fn xsl">
<xsl:namespace-alias stylesheet-prefix="ptws" result-prefix="#default"/>
<xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes" xpath-default-namespace="http://aaa.bbb.com"/>
<xsl:template match="/">
    <xsl:apply-templates/>
</xsl:template>
<xsl:template match="ptws:policy">
<auto-policy-dto>
    <xsl:copy-of select="ptws:num-drivers"/>
    <xsl:copy-of select="ptws:risk-policy-ind"/>
    <xsl:copy-of select="ptws:premium-amt"/>
</policy>
</xsl:template> 
```

JAVA代码：

```
TransformerFactory tfactory = TransformerFactory.newInstance();
Source xslt = new StreamSource(IN_XSLT_FILE_NAME);
Transformer transformer = tfactory.newTransformer(xslt);

SAXSource source = new SAXSource(
                XMLReaderFactory.createXMLReader(),
                new InputSource(IN_XML_FILE_NAME));
transformer.transform(source, new StreamResult(OUT_XML_FILE_NAME)); 
```

输出 xml：

```
<?xml version="1.0" encoding="UTF-8"?>
    123
    false
    23.00 
```

output.xml 中缺少元素。如何在转换时提供命名空间“ [http://aaa.bbb.com](http://aaa.bbb.com) ”？

预期输出.xml：

```
<?xml version="1.0" encoding="UTF-8"?><ptws:policy xmlns:ptws="http://aaa.bbb.com">
  <num-drivers xmlns="http://aaa.bbb.com">123</num-drivers>
  <risk-policy-ind xmlns="http://aaa.bbb.com">false</risk-policy-ind>
  <premium-amt xmlns="http://aaa.bbb.com">23.00</premium-amt>
</ptws:policy> 
```

我试图做这样的事情：

```
public class XMLUtilsTest {

   private static final String IN_XML_FILE_NAME = "C:/sampleXML.xml";
   private static final String IN_XSLT_FILE_NAME = "C:/sample.xslt";

   private static final String OUT_XML_FILE_NAME = "C:/rc/output.xml";

   public static Boolean transformXML() throws SAXException, IOException, URISyntaxException, TransformerException {

    try {
        TransformerFactory tfactory = TransformerFactory.newInstance();
        Source xslt = new StreamSource(IN_XSLT_FILE_NAME);
        Transformer transformer = tfactory.newTransformer(xslt);

        SAXSource source = new SAXSource(
                new NamespaceFilter(XMLReaderFactory.createXMLReader()),
                new InputSource(IN_XML_FILE_NAME));
        transformer.transform(source, new StreamResult(OUT_XML_FILE_NAME));            
    }
    catch(Exception ex){
        System.out.println(ex.getMessage()); 
    }                    

  }

protected static class NamespaceFilter extends XMLFilterImpl {

    String requiredNamespace = "http://aaa.bbb.com";

    public NamespaceFilter(XMLReader parent) {
        super(parent);
    }

    @Override
    public void startElement(String arg0, String arg1, String arg2, Attributes arg3) throws SAXException {
        if(arg0 != requiredNamespace) arg0 = requiredNamespace;
        super.startElement(arg0, arg1, arg2, arg3);
    }       
}
} 
```

但这会产生以下 xml。仍然缺少元素

```
<?xml version="1.0" encoding="UTF-8"?><ptws:policy xmlns:ptws="http://aaa.bbb.com">
< xmlns="http://aaa.bbb.com">123</>
< xmlns="http://aaa.bbb.com">false</>
< xmlns="http://aaa.bbb.com">23.00</>
</ptws:policy> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:40:15.530

我认为您只是想更改所有元素的名称空间？

```
 <xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:ptws="http://aaa.bbb.com"
    exclude-result-prefixes="xsl">

  <xsl:template match="node()|@*">
      <xsl:copy>
          <xsl:apply-templates select="node()|@*" />
      </xsl:copy>
  </xsl:template>

  <xsl:template match="*">
      <xsl:element name="ptws:{local-name()}">
          <xsl:apply-templates select="node()|@*"/>
      </xsl:element>
  </xsl:template>

</xsl:stylesheet> 
```

您的模板不起作用的原因是因为`<xsl:template match="ptws:policy">`不匹配任何内容，并且默认模板只是复制文本节点。

# javascript - 使用 javascript 检索 swf 信息

> ID：14946617
> 
> 赞同：0
> 
> 时间：2013-02-18T22:39:18.620
> 
> 标签：javascript, flash

我需要获取有关瑞士法郎“电子学习”电影的一些信息。我需要知道用户停止观看的部分，或者用户是否已经观看到结束。我不是在开发 LMS，所以我只需要简单的功能。有没有办法用javascript从flash中检索这些信息？如果是这样，您知道我在哪里可以找到有关它的一些文档吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:14:14.850

您可以使用 Adob​​e Flash 的[**`ExternalInterface`**](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)API 在 Javascript 和 ActionScript 之间进行通信。***浏览器支持：*** *IE 5.0+、Firefox 1.0+、Safari 1.3+、Opera、Chrome（版本不适用，但足够老了）。*

### Flash TO Javascript 通信；

在您的**AS3/Flash 中**：

```
function sendToJS(obj:Object):void {
    if (ExternalInterface.available) {
        ExternalInterface.call("onFlashCall", obj);
    }
} 
```

在您的**HTML/Javascript**中：

```
<head>
    <script type="text/javascript">
        function onFlashCall(obj) {
            console.log("Data received from Flash: ", obj);
        }
    </script>
</head> 
```

### Javascript 到 Flash 通信；

在您的**AS3/Flash 中**：

```
public function onJavascriptCall(obj:Object):String 
{ 
    console.log("Data received from Javascript: ", obj);
} 
ExternalInterface.addCallback("sendToFlash", onJavascriptCall); 
```

在您的**HTML/Javascript**中：

```
<head>
    <script type="text/javascript">
        function sendToFlash(obj) {
            var flashElem = document.getElementById("flashObject");
            flashElem.sendToFlash(obj);
        }
    </script>
</head>

<body>
<!-- Embeded Flash SWF -->
<object id="flashObject"...> 
    ... 
    <embed name="flashObject".../> 
</object>
</body> 
```

**重要提示：**在 Flash 中，不要出现安全错误：
在包含 HTML 页面的 SWF 文件的对象标记中，设置以下参数：

```
<param name="allowScriptAccess" value="always" /> 
```

在 SWF 文件中，添加以下 ActionScript：

```
flash.system.Security.allowDomain(sourceDomain); 
```

## 所以，在你的情况下：

`sendToJS()`在播放器的相应事件处理程序中调用方法：

```
protected function onStopClick(event:MouseEvent):void
{
    sendToJS("User has clicked the STOP button.");
}

protected function onPlaybackFinish(event:Event):void
{
    sendToJS("Playback is complete.");
} 
```

# bash - Bash 数组 - 动态添加

> ID：14946621
> 
> 赞同：0
> 
> 时间：2013-02-18T22:39:30.490
> 
> 标签：bash, arguments

有人可以帮我编写一个简单的 bash 脚本来处理以下用法：

```
./application channels;message

eg:  ./application channel1 channel2 channel3;this is a message 
```

所以基本上是分隔符之前的任何内容；是由空格分隔的通道，以及 ; 之后的任何内容 是消息。

基本上，我想将这些中的每一个存储到一个变量中并将它们打印出来......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T23:03:12.740

由于您需要一条消息和一个或多个通道，因此首先指定消息更有意义，然后假设其余参数是通道。就像是

```
#!/bin/bash

message="$1"
shift  # Now each argument in $@ is a channel 
```

然后您的脚本可以按如下方式运行

```
$ ./application "This is a message" channel1 channel2 channel3 
```

虽然这是您通常处理所需参数的方式，但与使用`-m`指定消息相比的一个缺点是更难判断用户是否忘记指定消息

```
# Is "channel1" the message, or did the user forget to specify one?
$ ./application channel1 channel2 channel3 
```

对于实施`-m`，我建议您参考[Jonathan Leffler 的回答](https://stackoverflow.com/a/14946888/1126841)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:50:16.333

您可能想寻找另一种方式来分隔消息，因为分号会导致 bash 读取到分号并“认为这是命令的结尾”。然后 bash 将使用分号之前的参数运行您的程序。随后，它将寻找一个名为“this”的程序或内置程序，并提供“is”、“a”和“message”作为 this 的命令行参数。但是 bash 可能会回答“this: command not found”。[有关更多信息，请查看bash 手册](http://www.gnu.org/software/bash/manual)中的 ';'/分号运算符的含义。

你可能会做如下的事情

```
#!/bin/bash

message=""
outfiles=""

# Loop until all parameters are used up
# shift "eats" one argument at a time
# util there are no arguments left then $1 is a emtpy string
while [ "$1" != "" ]; do

    if [ "$1" == "-m" ] # the message
    then
        shift #"eat one arugment then $1 is your message"
        #you should check if there is a argument after "-m"
        message=$1
    else
        outfiles="$outfiles $1"
    fi

    # Shift all the parameters down by one
    shift

done

# put the message it the other arguments specified.

for i in $outfiles; do
    echo $message > $i
done 
```

该程序所做的是检查“-m”然后它将转移所有参数，因此您的参数减去一次并将此消息写入其他参数，例如 $./program.bash -m "Hello world" output1.txt ouput2.txt该程序将消息“Hello world”放入新创建或（小心）覆盖的文件 output1.txt output2.txt

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T23:01:52.913

```
while getopts m: opt
do
     case "$opt" in
     (m) message="$OPTARG";;
     (*) echo "Usage: $0 [-m 'message'] [chan ...]" >&2; exit 1;;
     esac
done
shift $(($OPTIND-1))

for channel in "$@"
do
    whatever -y because -m "$message" $channel
done 
```

那应该行得通。它使消息可选，并且不需要您指定任何渠道。您可以相当容易地添加更多选项（那些在字母后使用冒号指定参数的选项；那些不使用不带冒号的参数的选项）。您可以坚持`$#`在两个循环之间大于 0（但使用消息必须更改以反映这一点）。您可以坚持传递一条消息（但也必须为此更改使用消息）。所以它继续; 你的选择很多。

* * *

如评论中所述：

> 请注意，这`;`是 shell 的命令分隔符。你必须写：
> 
> `./application 'channels;message'`
> 
> 在分号周围加上引号或在它之前加上反斜杠。那不是很正统的用法。您可以使用更惯用的符号，例如：
> 
> `./application -m "this is a message" channel1 channel2 channel3`

上面的脚本相当准确地实现了这个建议。

> 我看到的唯一问题是，如果消息中有`"`字符怎么办。`./application -m "this isn"t a message" channel1`ETC...

您需要了解 shell 元字符，其中包括`"'`$;(`. 对于所有这些，您需要逃脱罪魁祸首：

```
./application -m 'He said, "Don'\''t do that!"' chan1 
```

通常，在消息周围使用单引号；如果你有一个单引号要写，请输入`'\''`。

```
./application -m 'He said, "This is a message."' chan1
./application -m "This isn't a message." chan2
./application -m 'He said, "This isn'\''t a message", but they disagreed." chan3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T00:09:38.977

您可以使用[剪切](http://en.wikipedia.org/wiki/Cut_%28Unix%29)命令：

```
#!/bin/bash 
variables=`echo $* | cut -d';' -f1`
message=`echo $* | cut -d';' -f2`
echo "variables: " $variables
echo "message: " $message 
```

一定要`\`-escape 分号：

```
$ ./application channels\;message
channels:  channels
message:  message 
```

# android-ndk - 如何在 Mac OSX 10.8.x 上安装 Android NDK 所需的开发工具

> ID：14946622
> 
> 赞同：0
> 
> 时间：2013-02-18T22:39:35.253
> 
> 标签：android-ndk, osx-mountain-lion

在 android 开发者网站 ( [http://developer.android.com/tools/sdk/ndk/index.html#Reqs](http://developer.android.com/tools/sdk/ndk/index.html#Reqs) ) 上有必要的开发工具。

在按照这篇[文章](https://stackoverflow.com/questions/6767481/where-can-i-find-make-program-for-mac-os-x-lion)安装最新的 xcode（在这个问题 v 4.6 时）然后下载“命令行工具”之后，我安装了 GNU Make 3.81。为了确保它已安装以及它是什么版本，我在终端中执行了此命令：

```
$ make --version 
```

**问：您推荐在我的 Mac OSX 10.8.2 上安装最新版本的 GNU Awk 或 Nawk 的最佳方式是什么？你推荐 Awk 还是 Nawk？**

执行此命令后，我检查了我的 Mac 是否安装了“awk 版本 20070501”：

```
$ awk --version 
```

我还看到了这篇[文章](https://stackoverflow.com/questions/4454653/android-ndk-on-mac-osx-quick-install-w-o-developer-tools)，这对于我的两个问题来说似乎都是一个不错的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T00:41:15.313

对于那些对实际安装 GNU awk 感兴趣的人，我执行了以下步骤。

首先，我从此处列出的镜像之一下载了 GNU Awk (gawk)：www.gnu.org/prep/ftp.html

在这个发帖的时候，我得到了 gawk-4.0.2.tar.gz。

然后我按照这里的说明操作：[http ://www.gnu.org/software/gawk/manual/gawk.html#Installation](http://www.gnu.org/software/gawk/manual/gawk.html#Installation)

简而言之，您遵循以下步骤：

```
$ cd Downloads
$ tar -xvpzf gawk-4.0.2.tar.gz
$ cd gawk-4.0.2
$ sh ./configure
$ make
$ make check 
```

[此处](http://www.gnu.org/software/gawk/manual/gawk.html#Unix-Installation)提供了有关上述命令的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:20:52.227

您只需要下载`android-ndk-r8d-darwin-x86.tar.bz2`文件。解压它，你就完成了。它包括 OSX 所需的工具，例如其中的 make 和 awk（`prebuilt/darwin-x86/bin`文件夹下）。不需要 Xcode。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T15:28:45.773

另一个获得 gawk 的地方，直接以 pkg 格式。将安装在 /usr/local/bin 等 [http://rudix.org/packages/gawk.html](http://rudix.org/packages/gawk.html)

# objective-c - -viewWillLayoutSubviews 中调用的方法莫名其妙地运行了两次

> ID：14946623
> 
> 赞同：12
> 
> 时间：2013-02-18T22:39:41.617
> 
> 标签：objective-c, xcode, cocoa-touch

我在详细视图控制器中有以下代码：

```
- (void)viewWillLayoutSubviews {
    [super viewWillLayoutSubviews];
    [self configureView];
} 
```

当我在 的第一行使用断点继续使用此视图控制器时`-configureView`，它似乎`[self configureView]`被调用了两次。然而：

*   两次命中该方法时，堆栈如下所示：

![堆](../Images/26e710894bb9ede5a5aca6be86177b43.png)

*   当我`[self configureView]`在上面的代码中评论时，它被命中零次。
*   很明显，堆栈两次都相同，`-configureView`不会递归调用自身。
*   `-configureView`仅在上述代码中调用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T23:28:03.243

来自[苹果的文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)：

> viewWillLayoutSubviews 方法也会在视图被其父级调整大小和定位后调用。

`viewWillLayoutSubviews`每当控制器视图发生更改时都会调用Given `bounds`，但不能保证它只会被调用一次。例如，每当发生旋转时都会调用它。

根据[Hermann 的建议](https://stackoverflow.com/a/14946716/840428)，您的`configureView`方法可能更好地从其他地方调用，也许是 in `viewWillAppear`，`viewDidAppear`甚至是 item 的自定义 mutator 。`BirdDetail`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:47:28.150

如果您遵循通常的模式，那么 configureView 会在`detailItem`. 检查设置方法。并且`[detailViewController setDetailItem:something]`经常被调用`prepareForSegue:`。

关键是：重要吗？

# java - 如何在 if 语句中传递布尔值并验证布尔值？

> ID：14946624
> 
> 赞同：0
> 
> 时间：2013-02-18T22:39:46.400
> 
> 标签：java

好的，我的游戏进入了最后一部分，然后我会邀请大家一起玩。它绝不是完美的，但它是我 Java 进步的一个巨大里程碑。所以在我的代码中，我调用我的拼图类来验证用户给出的解决方案是否是`equalsIgnoreCase`拼图类中提供的私有变量解决方案。如果它们匹配，则返回 true，否则返回 false。在测试仪上，如果我得到返回的真值，它应该打印出我是对的，如果它返回假我就错了。问题是我输入正确，但它告诉我我错了。为什么？

谜：

```
 public boolean solvePuzzle(String answer)
    {
        if(this.solution.equalsIgnoreCase(answer))
        {
            return true;
        }
        else
        {
            return false;

        }

    }

} 
```

谜题测试者：

```
 if(choice==2)
   {
        System.out.println("Please solve the puzzle");
        input.nextLine();
        String answer=input.next();
        answer=answer.toUpperCase();
        game.solvePuzzle(answer);

        if(game.solvePuzzle(answer)==true)
        {
        System.out.println("That is correct");
        }
        else
        {
        System.out.println("You are wrong");
        }
        }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:02:43.143

好的。解决方案提示：仔细阅读 Scanner 类的 javadoc，尤其是解释默认分隔符是什么的部分，以及该`next()`方法的文档。现在看看解决方案是什么，并问问自己它是否与默认分隔符有关。

要确认，请选择另一个解决方案，看看它是否改变了某些东西。还打印您比较的变量的值以查看它们实际包含的内容，或学习使用 Eclipse 调试器。这并不难，而且我确信 Eclipse 有一个关于它的帮助页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T23:08:59.433

您的问题实际上只是使用扫描仪，默认情况下使用空格分隔。您需要调用 useDelimiter() 方法来正确设置它。您可以使用 BufferedReader：

```
BufferedReader br = new BufferedReader(new InputStreamReader(System.in)) 
```

# jquery - 为什么我所有的 jQuery cookie 都未定义？

> ID：14946625
> 
> 赞同：4
> 
> 时间：2013-02-18T22:39:46.070
> 
> 标签：jquery, google-chrome, cookies, undefined

我在页面正文的末尾找到了 jQuery、jQuery Cookie 插件和我自己的 Javascript（按此顺序）。我无法理解的是为什么当我`console.log`使用 cookie 或将其分配给变量和`console.log`变量时我的 cookie 不会读取。此外，当我在 Chrome 中打开页面并查看资源>Cookies 部分时，它显示我的页面没有创建任何 cookie。

另外，问题可能与我在本地对文件进行的操作有关。它尚未托管。一切都只是坐在我的驱动器上，而不是在互联网上。

这是我的代码：

```
$.cookie('testcookie',1,{expires: 5, path:'/'});
console.log($.cookie('testcookie'));
var variable=$.cookie('testcookie');
console.log(variable); 
```

该函数应该在控制台中记录 '1' 两次，但只给了我两个`undefined`.

我现在已经检查了我的 HTML 四次，并且我 100% 确定我的脚本的来源指向了正确的位置。我还确保该函数被正确调用，等等。我检查了所有可能的问题，但我找不到任何错误。我错过了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T22:52:46.643

是的，这听起来像是因为它是在本地托管的。

请参阅：[为什么 Chrome 会忽略本地 jQuery cookie？](https://stackoverflow.com/questions/335244/why-does-chrome-ignore-local-jquery-cookies?rq=1)

# php - 与 foreach 语句有关的问题

> ID：14946628
> 
> 赞同：-1
> 
> 时间：2013-02-18T22:39:55.493
> 
> 标签：php, foreach

我想更新这个问题：[使用 PHP foreach 代码填充日历](https://stackoverflow.com/questions/14798794/populating-a-calendar-with-php-foreach-code)

由于某种奇怪的原因，问题又回来了，它说我为 foreach 提供了一个无效的参数。奇怪的是，它可以在我的本地主机网站上正常运行。

结果应该是代码应该显示一个填充的日历。它在我的本地主机服务器上运行，但在网站上不在线。我很困惑。

这已经为我的本地主机服务器修复了它：

```
foreach(array_merge(array_values($history), array_values($events)) as $event) 
```

但是当我把网站放到网上时，chrome 只是给了我这个：

```
<b>Warning</b>:  array_values() [<a href='function.array-values'>function.array-values</a>]: The argument should be an array in <b>/home/flyeurov/public_html/lib/skins/flyeuro/events/events_index.tpl</b> on line <b>30</b>
<b>Warning</b>:  array_merge() [<a href='function.array-merge'>function.array-merge</a>]: Argument #2 is not an array in <b>/home/flyeurov/public_html/lib/skins/flyeuro/events/events_index.tpl</b> on line <b>30</b>
<b>Warning</b>:  Invalid argument supplied for foreach() in <b>/home/flyeurov/public_html/lib/skins/flyeuro/events/events_index.tpl</b> on line <b>30</b><br /> 
```

数组 $history 和 $events 被确认可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:43:36.307

要么不是数组，`$history`要么`$events`不是数组，因此 array_values 不返回数组，并且 array_merge 也不返回数组，这会在 foreach 循环中引发另一个警告。

使用 var_dump 检查两个 var 是否真的是数组而不是标量值或对象

# css - CSS匹配元素类元素

> ID：14946631
> 
> 赞同：0
> 
> 时间：2013-02-18T22:39:59.683
> 
> 标签：css, css-selectors

如何匹配where has class 中的所有`td`元素？`tr``tr``my-class`

我试过了

`tr .my-class td`

另外 - 完全符合条件会更好吗？

`table tbody tr td`优于`td`? _

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:46:58.613

总是尽量减少选择器的数量，所以而不是

```
tr.my-class td 
```

只用

```
.my-class td 
```

您的第二个问题与第一个问题有关。当您使用以下选择器时

```
table tbody tr td 
```

您的浏览器首先匹配所有`td`元素。然后它检查这些元素中的哪些放置在`tr`element 中，然后检查哪些是 in `tbody`，最后是 in `table`。由于在结构正确的代码`td`中总是放置在表格中，因此无需过度限定您的选择器。

有很多关于 CSS 选择器效率的文章，例如查看这篇[http://csswizardry.com/2011/09/writing-efficient-css-selectors/](http://csswizardry.com/2011/09/writing-efficient-css-selectors/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:43:25.120

只需使用这个：

```
.my-class td 
```

以你要求的方式完全符合资格通常并不好。这被称为[过度具体](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T22:43:54.543

您可以简单地执行以下操作：

```
.my-class td {
    // your css rules here
} 
```

或者...

```
tr.my-class td {
    // your css rules here
} 
```

或者...

```
table tbody tr.my-class td {
    // your css rules here
} 
```

取决于您想要/需要的具体程度。

我建议你写的 CSS 越少越好，只要它适合你。

# javascript - 如何在 chrome 扩展中匹配 youtube 的 url？

> ID：14946632
> 
> 赞同：3
> 
> 时间：2013-02-18T22:40:05.857
> 
> 标签：javascript, jquery, google-chrome, content-script

我正在尝试使 simples chrome 扩展在 youtube（内容脚本）中工作，但它似乎无法正常工作。

奇怪的是，它在某些时候有效，而有些简单却无效。

我的最终目标是让它只在视频 URL 中工作，但在此之前我被卡住了。

我最初尝试过：

```
"matches": [ "http://www.youtube.com/*" ] 
```

根本没有任何成功，我觉得这很奇怪，所以我想这是我的第一个问题，因为在我所做的另一个扩展中，它非常适合`http://twitter.com/`

我阅读了一些 youtube 扩展的代码，其中一个使用了：

```
"matches": [ "*://*.youtube.com/*" ] 
```

奇怪的是，这只有时有效，我无法重现/理解何时。当我重新加载页面时它肯定不起作用，但在某些 URL 中它只是起作用。

实际脚本是用于调试的基本脚本：

```
$(window).load(function() {
    alert(2);
}); 
```

所以我对这种不一致的行为感到很困惑。

编辑：

这个网址似乎不起作用：

*   [http://www.youtube.com/watch?v=CFxuYWsXrC0](http://www.youtube.com/watch?v=CFxuYWsXrC0)
*   [http://www.youtube.com/watch?v=ZPY6JVcp55s](http://www.youtube.com/watch?v=ZPY6JVcp55s)

这样做：

*   [http://www.youtube.com/watch?v=k8v_l5iGJZM](http://www.youtube.com/watch?v=k8v_l5iGJZM)
*   [http://www.youtube.com/watch?v=ZPY6JVcp55s](http://www.youtube.com/watch?v=ZPY6JVcp55s)

编辑2：

整个清单：

```
{
  "name": "__MSG_extname__",
  "version": "0.1",
  "default_locale": "en",
  "manifest_version": 2,
  "icons": {
    "16": "images/icon16.png",
    "48": "images/icon48.png",
    "128": "images/icon128.png" },
  "content_scripts":[
    {
    "matches": [ "*://*.youtube.com/*" ],
    "js": ["jquery.min.js", "script.js"]
    }
  ],
  "web_accessible_resources": ["images/down-arrow.png"]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T00:40:25.043

您需要发布或链接到您的全部`manifest.json`内容，但最可能的问题是`$(window).load( ...`。
[默认情况下，Chrome 内容脚本会在不可预知的时间触发，可能是在`window.onload`触发之前或之后！](http://developer.chrome.com/extensions/content_scripts.html#run_at)

因此，添加`"run_at": "document_end"`到您的清单以保证您的脚本将在可预测的时间运行，并且在`window.onload`.

~~~
接下来，[有可能是其他扩展阻止了这个警报](https://stackoverflow.com/q/4996394/331508)。根据需要检查并禁用您的其他扩展。

~~~
最后，可能是YouTube通过AJAX加载了一些页面——虽然我目前找不到它这样做的案例。AJAX 加载的页面不会重新触发您的内容脚本。如果您发现 AJAX 加载“新”页面的情况，（1）在此处使用配方评论，（2）您可以[使用 AJAX 感知技术根据需要重新触发代码](https://stackoverflow.com/q/10664669/331508)。（请注意，`waitForKeyElements.js`这将通过清单而不是`@require`指令添加。）

# ruby-on-rails - 使用 rails 资产管道预编译超薄模板

> ID：14946634
> 
> 赞同：7
> 
> 时间：2013-02-18T22:40:12.323
> 
> 标签：ruby-on-rails, asset-pipeline, slim-lang

如果我可以使用 rails 资产管道预编译超薄模板，那将非常方便。我希望将我的模板粘贴在 app/assets/html 中并以这种方式提供它们。

这是我到目前为止所得到的：

```
# config/initializers/slim.rb
Rails.application.assets.register_engine('.slim', Slim::Template)

# config/application.rb
config.assets.paths << "#{Rails.root}/app/assets/html"
config.assets.register_mime_type('text/html', '.html') 
```

运行 rake assets:precompile 会读取 app/assets/html 中的 .html.slim 文件，但它不会编译它们，并且输出文件仍然具有 .slim 扩展名。

有没有办法使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-18T22:24:29.967

抱歉，我迟到了，但狄龙·布坎南[在这里](http://www.dillonbuchanan.com/programming/rails-slim-templates-in-the-asset-pipeline/)回答了这个问题。

转到`config/initializers`目录并创建一个类似`slim_assets.rb`（或类似的）文件并复制以下行：

```
Rails.application.assets.register_engine('.slim', Slim::Template) 
```

我用 HAML（我用它为 Rails/AngJS 应用程序编写模板）做了类似的事情并取得了巨大的成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-09T17:32:50.103

@kurt-mueller 的答案是正确的，但需要针对带有 Sprockets 3+ 的 Rails 4 进行更新。Sprockets 发生了变化，这意味着`assets`在初始化期间该属性不存在。相反，您可以这样做：

```
# config/initializers/slim.rb

Rails.application.config.after_initialize do |app|
  app.config.assets.configure do |env|
    env.register_engine(".slim", Slim::Template)
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T22:28:21.373

您可以尝试在以下位置添加新路径`production.rb`：

```
config.assets.precompile += ["*.js", "*.css", "*.slim"]  #whatever you need 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-05-20T01:29:00.367

您需要将静态文件添加到预编译数组中：

config.assets.precompile += %w(vendor/modernizr 404.html)

# git - 获取远程 git repo 并将最新分支推送到内部远程 git repo

> ID：14946635
> 
> 赞同：0
> 
> 时间：2013-02-18T22:40:12.723
> 
> 标签：git

我对 Git 太陌生了，并且坚持了一些事情。我想要的是：

*   获取大型 GitHub 存储库
*   签出特定**标签**（过去的稳定版本）并删除所有其他信息，例如提交历史记录、分支等。
*   将合并后的仓库推送到内网的另一个 Git 仓库

我试图写类似下面的东西，但它当然不起作用:)

```
git clone git://github.com/rmcardle/mRemoteNG.git
git checkout -b tags/1.69
git rebase -i
git remote add local http://myusername@myserver/scm/LIB/myrepo.git
git push local master 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:44:17.413

在你`remote add`的回购之后，我认为你必须`git add *`然后`git commit -m "[type your message here]`推动主人。如果我们能看到就太好了`git status`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:47:28.177

您可以使用`git merge --squash`将所有提交压缩为一个，然后将其推送。

# python - 使用内置 python 对象的面向主题或改进

> ID：14946636
> 
> 赞同：1
> 
> 时间：2013-02-18T22:40:15.873
> 
> 标签：python, python-3.x, scope, roles, lookup

目标：扩展具有仅在特定上下文中有效的角色的任意类。

这有效：

```
# from https://github.com/niccokunzmann/wwp/blob/master/C_builtinTypes.py
from relative import roleOf, useRoles

@roleOf(int)
class NaturalNumber:
    # int gets successor only in this module
    @property
    def successor(self):
        return 1 + self

@roleOf(tuple)
@roleOf(list)
class MyList:
    @property
    def first(self):
        return self[0]

@useRoles
def test():
    # this is possible if we recompile the code objects
    i = 1
    print(type(i))
    assert i.successor == 2
    assert i.successor.successor == 3
    assert isinstance(i, int) # EDIT3 works
    # check for identity
    t = (3,)
    assert t.first == 3
    l = list() 
    l.append(3)
    assert l.first == 3 # this assertion fails
    assert l.first == 2 + 1

if __name__ == '__main__':
    test() 
```

我的问题：

**EDIT2：**我为通常的 python 类编写了 100 行代码来完成这项工作，但对于内置函数，我添加了 250 行代码，并且看不到完整的解决方案。

我无法为内置对象创建自定义类，因为我可以使用纯 python 类作为[link:A](https://github.com/niccokunzmann/wwp/blob/master/A.py)或[link:B](https://github.com/niccokunzmann/wwp/blob/master/B.py)。这是因为编译器将它们放在任何地方：

```
>>> test.__code__.co_consts
(None, 1, 2, 3, (3,), 3) 
```

我不能用列表替换代码对象，因为它们是内置在代码中的。

这些是我的问题，因为我无法估计：

*   我必须在哪些地方寻找内置对象以用包装器替换它们以便我可以向它们添加角色？

*   C 扩展是否可以帮助我修补属性查找，以便我可以为布尔值创建角色

*   我需要编译自己的 python 来实现这个想法吗？

*   还有其他解决方案吗？

**编辑 1**

这是我的用例之一：`1 .successor.successor == 3`. 我想让拥有不干扰整个程序的小域变得容易=保持类苗条。

例如，我想让数字可调用以创建 lambda 演算。

我想拥有苗条的类，对于特殊用例，我想通过角色扩展它们，这样我就可以在它们上调用自定义函数。我应该在[数据上下文交互](http://de.wikipedia.org/wiki/Data_Context_Interaction)和面向上下文的编程之间结束一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T01:36:44.157

您能否提供有关您的用例的更多信息？我认为您想研究元类，但如果没有有关您的特定需求的更多信息，则不确定。而且我认为如果您想替换内置函数，那就有问题或太聪明了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:26:18.600

我想你想看看抽象基类：

[http://docs.python.org/3/library/abc.html](http://docs.python.org/3/library/abc.html)

# django - 测试键的 Python 快捷方式存在并且还为变量赋值

> ID：14946639
> 
> 赞同：0
> 
> 时间：2013-02-18T22:40:20.117
> 
> 标签：django, variables, conditional-statements, shortcut

假设我有以下代码：

```
if request.POST:
   id = request.POST.get('id')
   # block of code to use variable id
   do_work(id)
   do_other_work(id) 
```

是否有一个快捷方式（一行代码）可以测试条件块是否为 request.POST 并为条件块分配变量 id 以使用 id 变量？

我读了这个[是否有用于变量检查和赋值的 Python 快捷方式？](https://stackoverflow.com/questions/1207333/is-there-a-python-shortcut-for-variable-checking-and-assignment)但并没有真正回答我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:47:28.973

不，您不能在`if`测试表达式中分配任何内容。

如果你没有剩下的`if`街区，

```
id = request.POST and request.POST.get('id') 
```

会工作。

但是，这样做没有多大意义，因为`id = request.POST.get('id')`可以很好地使用 empty `request.POST`。

请记住，它`request.POST`可以为空，即使方法是`POST`. 这是大多数人会写的：

```
if request.method == 'POST':
   id = request.POST.get('id')
   # rest of block 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T23:16:32.653

我喜欢这个：

```
id = request.POST.get('id', False)
if id is not False:
    # do something 
```

# azure - Windows Azure VPN - 如何安装/使用 Azure Connect

> ID：14946643
> 
> 赞同：11
> 
> 时间：2013-02-18T22:40:46.393
> 
> 标签：azure, vpn, azure-connect

我在这里感觉自己像个白痴。我在 Azure 中设置了一个简单的 Windows 虚拟机，12 个远程用户（他们都在家工作）需要通过 VPN 访问它才能简单地访问共享驱动器。我认为这将非常容易，但我花了**几天时间**试图解决这个问题。

我已经设置了服务器，现在我已经意识到（经过几天的搜索）使用 RRAS 的传统 PPTP 或 L2TP VPN 将无法正常工作，因为 Azure 框架阻止了这些协议。我还从类似**[这样](https://stackoverflow.com/questions/12971856/vpn-access-to-an-azures-hosted-virtual-server)**的帖子中看到说要使用 Azure Connect，它应该可以满足我们的需求。但是，该帖子中对**[Herve Roggero 的博客](http://geekswithblogs.net/hroggero/archive/2012/10/18/how-to-create-a-virtual-network-with-azure-connect.aspx)**甚至微软自己的**[Azure 支持站点](http://msdn.microsoft.com/en-us/library/windowsazure/gg508836.aspx)**的引用都谈到了我无法使用的功能，并且屏幕截图看起来与我在 Azure 控制台上看到的完全不同。事实上，微软网站的帮助文档已有 2 到 2.5 年的历史。说真的 MS...更新您的文档！

我的控制台看起来像**[这张图片](http://cdn.ttgtmedia.com/rms/dataCenter-Virtualization/Fig1%20-%20WAzPortalAllItems.png)**（*来自谷歌搜索的示例图片......不是我的真实界面*）

但是，文章引用了类似于**[此图像的控制台](http://i.msdn.microsoft.com/dynimg/IC457980.jpg)**

我不是在正确版本的 Azure 上吗？他们是否更新了界面而不更新他们的文档？最重要的是，我如何（使用我拥有的 Azure 界面）使用 Azure Connect？我尝试创建一个虚拟网络，但那里没有任何选项可以**[使用 Windows Azure Connect 安装本地端点](http://msdn.microsoft.com/en-us/library/windowsazure/gg432964.aspx)**。我是白痴还是我在这里错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-08T09:33:10.390

仅供参考 - 有一篇关于如何在 Azure 上设置 SSTP VPN 提供商的博客文章（无连接）：

[http://blogs.msdn.com/b/notime/archive/2013/06/01/how-to-configure-windows-azure-server-2012-as-an-sstp-vpn-provider.aspx](http://blogs.msdn.com/b/notime/archive/2013/06/01/how-to-configure-windows-azure-server-2012-as-an-sstp-vpn-provider.aspx)

```
1\. Create new Windows Server VM using "Quick Create"
2\. The DNS name, username and password will be used to connect to the VPN
3\. The public port created by default for RDP is a random one between 41952-65535\. But you can edit the endpoint to change the public port to 3389\. Go to Virtual Machines, select the VM, select Endpoints, select RemoteDesktop endpoint, click Edit Endpoint at the bottom and change the public port to 3389.
4\. Create TCP endpoint at port 443
5\. Connect using Remote Desktop (RDP) through the Dashboard

---------- Server Role
1\. Click on Server Manager -> Manage -> "Add Roles and Features"
2\. Add "Remote Access", include VPN and Routing (needed for NAT) role services and restart
3\. Click on Server Manager -> Notifications -> "Open the Getting Started Wizard"
4\. Select "Deploy VPN only"

---------- Server Certificate
1\. Open an elevated CMD prompt
2\. Use SelfSSL (IIS6 Resource Kit, custom install only this component, http://support.microsoft.com/kb/840671 ) to generate an SSL certificate for the SSTP:
C:\>"c:\Program Files (x86)\IIS Resources\SelfSSL\selfssl.exe" /N:cn=<...>.cloudapp.net /V:3650
(3650 == 10 years, "<...>.cloudapp.net" represents the fully-qualified domain name, FQDN)
3\. Confirm prompt with "y", ignore metabase error (if it appears)
4\. Run mmc.exe, add snap-in for Certificates -> Computer account
5\. Click on Personal -> Certificates
6\. Right-click on the <...>.cloudapp.net certificate, then on All Tasks -> Export, include private keys and protect with password

---------- Server RRAS
1\. Run Routing and Remote Access (RRAS) tool
2\. Right-click on the server and then on "Configure and Enable RRAS"
3\. Choose "Custom configuration", select "VPN access" and NAT
4\. Right-click on the server and then on Properties -> Security
5\. Select the <...>.cloudapp.net certificate
6\. Click on the IPv4 tab
7\. Enter a "Static address pool" for the number of clients, e.g.: 192.168.1.1 - 192.168.1.20 (otherwise the connection will fail with error 720)
8\. Don't enter a range that is too short. The OS keeps a lock on a used IP address for a while, so reconnecting often or from multiple devices may use up the pool and the connection will fail with error 0x8007274C
9\. Right-click on IPv4 -> NAT, then on "New Interface", select the external interface (e.g. "Ethernet 2")
10\. Click on "Public interface connected to the Internet" and check "Enable NAT on this interface"

---------- Server User
1\. Open "Computer Management" console
2\. Click on "Local Users and Groups", then on Users, double click on your account
3\. Click on Dial-in and change "Network Access Permission" to "Allow access"

---------- Client Certificate
1\. Manage Computer Certificates
2\. Click on "Place all certificates in the following store", then on Browse
3\. Select "Trusted Root Certificate Authorities", if you store the certificate in the personal store, the connection will fail with error 0x800B0109

---------- Client Connection
1\. Go to Network and Sharing Center, click on "Setup a new connection or network"
2\. Select "Connect to a workplace", then VPN
3\. Enter <...>.cloudapp.net, name and create
4\. Click on Network tray icon
5\. Right-click on new VPN connection, then show properties
6\. Click on Security, set VPN type to SSTP and allow only MS-CHAP v2
7\. Connect using same credentials used to create the VM and for RDP
8\. Test your internet connectivity
9\. Use a web site that shows your external IP, it should be an IP from the Azure datacenter

---------- SSL Certificate
To avoid installing a self-certificate to the trusted store (or for devices with a locked trusted store), do the following:
1\. Open the IIS Manager on the server
2\. Click on the server, then on "Server Certificates"
3\. Click on "Create Certificate Request" (Certificate Signing Request, CSR)
4\. Enter <...>.cloudapp.net as the "Common name", fill the rest and export as text file
5\. Buy an SSL certificate using the CSR (cheap SSL certificates start at around $5/year)
6\. Once the SSL authority issues the certificate:
a) Install to the server's and client's "Local Machine" personal store as described above, skipping the step to copy/move it to the trusted store
b) Select the same certificate in the RRAS tool, on the Security tab 
```

我验证它有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:54:41.957

您是说 Windows Azure 框架正在阻止 PPTP 和 L2TP。您是否将正确的端点添加到 Windows Azure VM（L2TP 的端口 1707 和 PPTP 的端口 1723）？如果您已经这样做了，您还必须确保 Windows Azure VM 上的 Windows 防火墙允许通过这些端口进行通信。这不是自动完成的。

Windows Azure 虚拟网络是一种站点到站点解决方案，需要本地的 VPN 设备。它用于将整个网络连接在一起。您不能将 Windows Azure Connect 与它一起使用。Windows Azure Connect 是一种机器对机器的解决方案。您需要从旧的 (Silverlight) 门户安装本地端点代理。

问候，

帕特里克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T23:24:50.620

要访问 Windows Azure Connect 维护，您仍然需要从管理控制台中的菜单子项通过旧门户访问，如果您单击右上角的 Live Id，您可以看到该菜单。

但我最喜欢的只是浏览[https://windows.azure.com](https://windows.azure.com)

进入旧门户后，在左侧面板上选择“虚拟网络”选项。前段时间我写了一篇关于您正在寻找的内容的博客文章（查看此处[http://davidjrh.intelequia.com/2011/10/conectar-una-azure-cloud-drive.html](http://davidjrh.intelequia.com/2011/10/conectar-una-azure-cloud-drive.html)并使用翻译小部件）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-13T11:12:36.463

如果有人在搜索，我们在连接到点到站点 azure vpn 时在某些机器上遇到 0x8007274d 错误。解决方案：禁用所有由 vbox 或 vmware 创建的虚拟网络适配器（在网络管理中心）。然后尝试再次连接。连接正常后，您可以重新启用虚拟网络适配器。这解决了我们在各种机器上的 0x8007274d 问题，win7 和 win10。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-07T22:21:59.990

这是一个可用于通过全自动 ARM 模板在 Azure 中设置 L2TP VPN 的文档 [https://artisticcheese.wordpress.com/2021/03/01/l2tp-vpn-via-arm-template-in-azure/](https://artisticcheese.wordpress.com/2021/03/01/l2tp-vpn-via-arm-template-in-azure/)

# asp.net - 如何使用 Node Js 测试服务是否启动

> ID：14946644
> 
> 赞同：0
> 
> 时间：2013-02-18T22:40:47.500
> 
> 标签：asp.net, node.js

我正在执行以下代码来测试服务是否启动，但我总是收到错误，请您指出我做错了什么。我试图调用的是一个 dotnet webservice。我也试过给端口，但这也没有用

```
var http = require('http');

     var options = {
     host: 'www.test.com/SomeService.svc'    
     };

 http.get(options, function(res) {
    console.log('got response: ' + res.statusCode);
 }).on('error', function(err) {
 console.log('got error: ' + err.message);
 }); 
```

我得到以下错误。

得到错误：getaddrinfo ENOTFOUND

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:42:58.350

`host`应该只是主机名`www.test.com`......

请求路径不是主机名的一部分。使用最新版本的 Node.js，您只需将字符串 URL 传递给`.get`. 如果您有 URL，则不需要选项对象。

```
http.get('http://www.test.com/SomeService.svc', function (res) { 
```

# ember.js - 在 emberjs 路由中使用 slug

> ID：14946645
> 
> 赞同：6
> 
> 时间：2013-02-18T22:41:01.970
> 
> 标签：ember.js, ember-data

我试图弄清楚如何在我的 ember 路由中使用 slug（我的模型的属性）来获得更清晰的 url。

我希望我的路线看起来像这样：

```
http://www.server.com/#/newsitems/newsitem-title-in-slug-format/1 
```

代替：

```
http://www.server.com/#/newsitems/1/1 
```

如您所见，我想用实际的 slug 属性替换 newsitem 的 id。这是我的`Newsitem`模型的样子：

```
App.Newsitem = DS.Model.extend({
    slug: DS.attr('string'),
    title: DS.attr('string'),
    summary: DS.attr('string'),
}); 
```

slug 属性以这种格式接收一个干净的文本属性：`title-in-slug-format`

这是我目前的路由器地图：

```
App.Router.map(function(){
  this.resource('newsitems', function(){
    this.resource('newsitem', {path:':newsitem_id'});
  });
}); 
```

我尝试将其替换为`newsitem_id`，`newsitem_slug`但这不起作用。还有其他建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T21:01:49.537

非常感谢迈克尔为我指明了正确的方向。但是，我认为这是因为我正在使用 rc-1 版本的 ember，我不必为此重写模型挂钩。我唯一要做的就是：

```
App.NewsitemRoute = Ember.Route.extend({
  serialize: function(model, params) {
    return { newsitem_id: model.get('slug') };
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T23:27:45.870

完成这项工作需要几个步骤。首先，您需要自定义路由以覆盖模型挂钩：

```
App.NewsitemRoute = Ember.Route.extend({
  model: function(params) {
    console.log("Searching for newsitem with slug: ", params.newsitem_id);
    var newsitems = App.Newsitem.findQuery({ slug: params.newsitem_id });
    newsitems.one("didLoad", function() {
      newsitems.resolve(newsitems.get("firstObject"));
    });
    return newsitems;
  }
}); 
```

在上面的示例中，我们查询 App.Newsitem 以获取与指定 slug 匹配的记录。它比简单的基于 id 的查找更复杂，因为我们需要将查询结果数组转换为单个记录。有关其工作原理的更多详细信息，请参阅：[how-to-find-a-model-by-any-attribute-in-ember-dot-js](http://darthdeus.github.com/blog/2013/01/31/how-to-find-a-model-by-any-attribute-in-ember-dot-js/)

您还需要实施`serialize`，以便 ember linkTo 助手能够正确创建链接

# google-maps - Google Maps 示例代码未在 localhost 中运行

> ID：14946647
> 
> 赞同：1
> 
> 时间：2013-02-18T22:41:07.073
> 
> 标签：google-maps, google-maps-api-3

我不确定这是什么原因。我复制了示例代码并尝试在本地主机上的 Dreamweaver 中运行它。但由于某些原因，我没有看到地图被加载。我记得之前它曾经加载它，但现在它没有加载.我有有效的 api 密钥，但我的网站仍未公开。

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Google Maps JavaScript API v3 Example: Geocoding Simple</title>
     <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?sensor=false">
    </script>
    <script type="text/javascript">
      var geocoder;
      var map;
      function initialize() {
        geocoder = new google.maps.Geocoder();
        var latlng = new google.maps.LatLng(-34.397, 150.644);
        var mapOptions = {
          zoom: 8,
          center: latlng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
      }

      function codeAddress() {
        var address = document.getElementById('address').value;
        geocoder.geocode( { 'address': address}, function(results, status) {
          if (status == google.maps.GeocoderStatus.OK) {
            map.setCenter(results[0].geometry.location);
            var marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location
            });
          } else {
            alert('Geocode was not successful for the following reason: ' + status);
          }
        });
      }
    </script>
  </head>
  <body onload="initialize()">
  <!--  <div>
      <input id="address" type="textbox" value="myaddress">
      <input type="button" value="Geocode" onclick="codeAddress()">
    </div>-->
    <div id="map_canvas" style="height:90%;top:30px"></div>
  </body>
</html> 
```

这是最简单的代码，但我仍然无法启动它。

```
enter code here 
```

键值请求 GET /maps/api/js/QuotaService.RecordEvent?1shttp%3A%2F%2Flocalhost%2Fgeoc.html&4e1&5e0&6u1&7sc7c7sc&callback= *xdc* ._papnzo&token=120226 HTTP/1.1

有人可以看看并建议我如何解决这个问题吗？我必须对地址进行地理编码，然后将其传递给 places api。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T22:48:33.663

您需要为地图设置大小，这对我有用：

```
<div id="map_canvas" style="height:500px;width:600px;"></div> 
```

或者这个CSS：

```
body, html, #map_canvas {
  height: 100%;
  width: 100%;
} 
```

[工作示例](http://www.geocodezip.com/v3_SO_geocoderExample.html)

**代码片段：**

```
var geocoder;
var map;

function initialize() {
  geocoder = new google.maps.Geocoder();
  var latlng = new google.maps.LatLng(-34.397, 150.644);
  var mapOptions = {
    zoom: 8,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
}

function codeAddress() {
  var address = document.getElementById('address').value;
  geocoder.geocode({
    'address': address
  }, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
      map.setCenter(results[0].geometry.location);
      var marker = new google.maps.Marker({
        map: map,
        position: results[0].geometry.location
      });
    } else {
      alert('Geocode was not successful for the following reason: ' + status);
    }
  });
}
google.maps.event.addDomListener(window, 'load', initialize);
```

```
body,
html,
#map_canvas {
  height: 100%;
  width: 100%;
}
```

```
<script src="https://maps.googleapis.com/maps/api/js"></script>
<div>
  <input id="address" type="textbox" value="126 Beacon Avenue Jersey City NJ 07306 USA">
  <input type="button" value="Geocode" onclick="codeAddress()">
</div>
<div id="map_canvas"></div>
```

# objective-c - 如何在 SVN 中检查 .framework 删除

> ID：14946656
> 
> 赞同：0
> 
> 时间：2013-02-18T22:41:55.370
> 
> 标签：objective-c, xcode, macos, svn

在我的 XCode 项目中删除 .framework 文件后，我无法签入 SVN 存储库。

svn ci -m '删除未使用的框架。' MyFramework/test.framework svn：提交失败（详情如下）：svn：“/Users/test/Desktop/client/src/MyFramework/test.framework”的条目没有 URL

检查 .framework 删除是否有不同的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T23:23:58.350

在项目上做一个`SVN update`将恢复项目中的 test.framework 文件的项目。之后对此文件执行一个`SVN delete`操作，该文件应将其从本地副本中删除，并应将其标记为从服务器中删除。你可以`SVN commit`在这之后做一个。

# jquery - Jquery动态生成的内容兄弟问题

> ID：14946658
> 
> 赞同：0
> 
> 时间：2013-02-18T22:41:58.473
> 
> 标签：jquery, html, css, siblings

我正在接近我正在寻找的解决方案，但还有一个问题让我很头疼。这是我的小提琴：（[http://jsfiddle.net/CjHAD/10](http://jsfiddle.net/CjHAD/10)）

我需要清理它，以便当打开红色单击 div 并打开黑色单击 div 时，蓝色单击拇指不会在 .parent-box 兄弟内部复制自身。

欢迎任何关于使其更优雅、流畅和高效的一般提示，如果需要，我很乐意澄清！

这是代码： 这是代码： HTML：

```
<div class="parent-box">
    <h3>2013</h3>
    <div class="works-post">
        <div class="x-image" style="color: red">click</div><!--open/close content-->
        <div class="works-thumb">                       
            <img width="150" height="112"  />
        </div><!--.works-thumb-->
        <div class="toggle-content">
            <h4>Content</h4>
        </div><!--.toggle-content-->
    </div><!--.works-post-->
</div><!--.parent-box-->
<div class="parent-box">
    <h3>2012</h3>
    <div class="works-post">
        <div class="x-image" style="color: blue">click</div><!--open/close content-->
        <div class="works-thumb">                       
            <img width="150" height="112"  />
        </div><!--.works-thumb-->
        <div class="toggle-content">
            <h4>Content</h4>
        </div><!--.toggle-content-->
    </div><!--.works-post-->
    <div class="works-post">
        <div class="x-image">click</div><!--open/close content-->
        <div class="works-thumb">                       
           <img width="150" height="112"  />
        </div><!--.works-thumb-->
        <div class="toggle-content">
            <h4>Content</h4>
        </div><!--.toggle-content-->
    </div><!--.works-post-->
</div><!--.parent-box--> 
```

我的CSS：

```
h3 {
clear: both;
width: 100%;
}
.x-image {
border: solid thin #000;
float: left;
padding: 0 2px 0 0;
position: relative;
z-index: 15;    
}
.works-thumb {
margin: 5px 0 0 10px;
width: 25%;
}
.works-thumb img {
border: solid 2px #a8b9b7;  
}
.works-post {
border: none;
float: left;
padding-bottom: 2em;    
}
.toggle-content {
    display: none;
    margin: 0px 0 0 1.5em;
    padding-bottom: 1em;
    min-height: 150px;
}
.open {
background-color: #eee;
clear: both;
width: 100%;
border-top: solid thin #ccc;
border-bottom: solid thin #ccc;
} 
```

和我的 jQuery：

```
$(document).ready(function(){

$('.x-image').on('click', (function(event){
    var other = $(this).parent().siblings('.works-post');
    var beyond = $(this).closest('.parent-box').siblings().find('.works-post');

    $(this).closest('.works-post').find('.works-thumb').toggle('fast');
 $(this).closest('.works-post').find('.toggle-content').slideToggle('fast', function(){
            $(this).closest('.works-post').toggleClass('open',$(this).is(':visible'));

                other.removeClass('open').insertAfter($('.open'));

                other.find('.toggle-content').hide();
                other.find('.works-thumb').show();

                beyond.removeClass('open');

                beyond.find('.toggle-content').hide();
                beyond.children('.works-thumb').filter(':hidden').show();

        })

}))

}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:32:11.860

删除调用`.insertAfter($('.open'))`似乎可以解决您引用的问题。在调用该方法时，该类有两个元素，因此您要在两个地方`open`插入 的内容。`other`您执行插入的意图是什么？

```
other.removeClass('open'); 
```

[jsfiddle](http://jsfiddle.net/jygEv/3/)

**更新：**

如果您试图将打开的对象`works-post`移到其集合的顶部`parent-box`，您可以使用[`.insertBefore()`](http://api.jquery.com/insertBefore/)in 引用来做到这一点`other.first()`。

为了清楚起见，我冒昧地修改了您的代码。除了在末尾删除`.insertAfter()`和添加之外，它基本上与原始版本相同。`.insertBefore()`

```
$(document).ready(function () {
    $('.x-image').on('click', (function (event) {
        var thisPost = $(this).closest('.works-post');
        var thisBox = $(this).closest('.parent-box');
        var otherPosts = thisPost.siblings('.works-post');
        var beyondPosts = thisBox.siblings('.parent-box').find('.works-post');

        thisPost.find('.works-thumb').toggle('fast');
        thisPost.find('.toggle-content').slideToggle('fast', function () {
            thisPost.toggleClass('open', $(this).is(':visible'));

            otherPosts.removeClass('open');
            otherPosts.find('.toggle-content').hide();
            otherPosts.find('.works-thumb').show();

            beyondPosts.removeClass('open');
            beyondPosts.find('.toggle-content').hide();
            beyondPosts.children('.works-thumb').filter(':hidden').show();

            thisPost.insertBefore(otherPosts.first());
        });
    }));
}); 
```

[jsfiddle](http://jsfiddle.net/tpnEr/)

# php - Javascript POST 不会在 PHP 页面中加载

> ID：14946660
> 
> 赞同：0
> 
> 时间：2013-02-18T22:42:15.503
> 
> 标签：php, javascript, post

我有一个 javascript 函数来操作一些表单数据并将 POST 构建到 php 页面。js 执行 xmlHTTP.open 并发送到构建的 url。

php 页面应该接受参数并发送电子邮件，但它似乎不接受参数。

我知道我在这里遗漏了一些愚蠢的东西，但是我还有其他类似的页面，但是参数更少并且它们工作正常。

```
<script>
function submitReg()
{
    var fn = document.getElementById("textfname").value;
    var ln = document.getElementById("textlname").value;
    var e = document.getElementById("textemail").value;
    var p = document.getElementById("textphone").value;
    var pr = document.getElementById("promocode").value;
    var c1 = document.getElementById("st-1").innerHTML + "_" 
    + document.getElementById("c-  1").innerHTML;
    if (document.getElementById("st-2").innerHTML != "")
    {
        var c2 = document.getElementById("st-2").innerHTML + "_" + 
    document.getElementById("c-2").innerHTML;
    }
    if (document.getElementById("st-3").innerHTML != "")
    {
        var c3 = document.getElementById("st-3").innerHTML + "_" + 
    document.getElementById("c-3").innerHTML;
    }
    var myURL = "form-to-email.php?" + "fn=" + fn + "&ln=" + ln + "&e=" + e + 
    "&p=" + p + "&pr=" + pr + "&c1=" + c1 + "&c2=" + c2 + "&c3=" + c3;

    xmlhttp.open("POST", (encodeURI(myURL)), true);
    xmlhttp.send();
}

</script> 
```

和 PHP 代码：

```
<?php

$fname = $_POST["fn"];
$lname = $_POST["ln"];
$email = $_POST["e"];
$phone = $_POST["p"];
$promo = $_POST["pr"];
$county1 = $_POST["c1"];
$county2 = $_POST["c2"];
$county3 = $_POST["c3"];

$email_from = 'support@somesite.com';

$email_subject = "Someone filled out the Splash page";

$email_body = "You have received a new form submission from the user $visitor_email.\n".
                        "Here it is:\n ".
            "First Name: $fname \n".
"Last Name: $lname \n".
"Email: $email \n".
"Phone: $phone \n".
"Promo Code: $promo \n".
"First County: $county1 \n".
"Second County(if Any): $county2 \n".
"Third County(if Any): $county3 \n";

$to = "user@gmail.com";

$headers = "From: $email_from \r\n";

mail($to,$email_subject,$email_body,$headers);
Header("Location: thankyou.html");

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:00:09.150

问题是您正在发送一个设置了很多 GET 参数的空 POST，而您的 php 代码需要 POST 参数。

正确使用帖子：

```
var myURL = "form-to-email.php";
var params = "fn=" + encodeURIComponent(fn) + "&ln=" + encodeURIComponent(ln) + "&e=" + encodeURIComponent(e) + "&p=" + encodeURIComponent(p) + "&pr=" + encodeURIComponent(pr) + "&c1=" + encodeURIComponent(c1) + "&c2=" + encodeURIComponent(c2) + "&c3=" + encodeURIComponent(c3);
xmlhttp.open("POST", myURL, true);
xmlhttp.send(params); 
```

或者准备 PHP 接收“GET”参数：

```
$fname = $_GET["fn"]; 
```

或者如果它们是 GET 或 POST 参数，请不要从 php 方面担心：

```
$fname = $_REQUEST["fn"]; 
```

# numpy - 使用 NumPy 读取大格式文本文件

> ID：14946665
> 
> 赞同：6
> 
> 时间：2013-02-18T22:42:45.557
> 
> 标签：numpy, python-2.7

我自愿帮助某人将有限元网格从一种格式转换为另一种格式（i-deas *.unv 到 Alberta）。我已经使用 NumPy 对网格进行了一些额外的整形，但是在将原始文本文件数据读取到 NumPy 数组中时遇到了问题。到目前为止，我已经尝试过 genfromtxt 和 loadtxt 没有成功。

一些细节：

1) 所有组都由各自行的页眉和页脚标志“-1”分隔。

2) NODE 组在其自己的行上有一个标题“2411”。我只想从该组中读取交替行，用 4 个整数跳过每一行，但用 3 个 Fortran 双精度数字读取该行。

3) ELEMENT 连接组在其自己的行上有一个标题“2412”。所有数据都是整数，只需要读取前 4 列。由于缺少 2 和 3 节点元素的值，NumPy 数组中会有一些空槽。

4）“2477”节点组我想我可以使用正则表达式来处理自己，找到要读取的行。

5) 真实的数据文件将有大约 100 万行文本，所以我非常希望尽可能将其矢量化（或者 NumPy 为快速读取内容所做的任何事情）。

对不起，如果我提供了太多信息，谢谢。

下面的行是 *.unv 文本文件格式的部分示例。

```
 -1
  2411
  146303         1         1        11
  6.9849462399269246D-001  8.0008842847097805D-002  6.6360238055630028D-001
  146304         1         1        11
  4.1854795755893875D-001  9.1256034628308313D-001  3.5725496189239300D-002
  146305         1         1        11
  7.5541258490349616D-001  3.7870257739063029D-001  2.0504544370783115D-001
  146306         1         1        11
  2.7637569971086767D-001  9.2829777518336010D-001  1.3757239038663285D-001
   -1
   -1
 2412
     9        21         1         0         7         2
     0         0         0
     1         9
    10        21         1         0         7         2
     0         0         0
     9        10
  1550        91         6         0         7         3
   761      3685      2027
  1551        91         6         0         7         3
   761      2380      2067
 39720       111         1         0         7         4
 71854     59536     40323     73014
 39721       111         1         0         7         4
 45520     48908    133818    145014
   -1
   -1
   2477
     1         0         0         0         0         0         0      3022
PERMANENT GROUP1
     7         2         0         0         7         3         0         0
     7         8         0         0         7         7         0         0
     7       147         0         0         7       148         0         0
     2         0         0         0         0         0         0      2915
PERMANENT GROUP2
     7         1         0         0         7         5         0         0
     7         4         0         0         7         6         0         0
     7         9         0         0         7        11         0         0
   -1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T09:04:18.613

numpy 方法很难应用于整个文件，因为您的数据具有非常特殊的结构（根据您所在的节点而变化）`genfromtxt`。`loadtxt`因此，我建议以下策略：

*   逐行读取文件，通过分析该行尝试确定您在哪个节点。

*   如果您在一个只有少量数据的节点中（例如，您必须读取交替行，因此您无法连续读取），请逐行读取并处理这些行。

*   当您到达包含大量数据的部分（例如具有“真实数据”的部分）时，请使用 numpys fromfile 方法读取数据，如下所示：

    ```
    mydata = np.fromfile(fp, sep=" ", dtype=int, count=number_of_elements)
    mydata.shape = (100000, 3)    # Reshape it to the desired shape as fromfile
                                  # returns a 1D array. 
    ```

通过这种方式，您可以将逐行处理的灵活性与快速读取和转换大量数据的能力相结合。

更新：关键是，你打开文件，逐行读取，当你到达一个有大量数据的地方时，你将文件描述符传递给 fromfile。

下面是一个简化的例子：

```
import numpy as np

fp = open("test.dat", "r")
line = fp.readline()
ndata = int(line.strip())
data = np.fromfile(fp, count=ndata, sep=" ", dtype=int)
fp.close() 
```

这将从`test.dat`具有以下内容的文件中读取数据：

```
10
1 2 3 4 5
6 7 8 9 10 
```

第一行用 显式读取`fp.read()`、处理（确定要读取的整数数量），然后`np.fromfile()`读取适当的数据块并将其存储在 1D-array`data`中。

UPDATE2：或者，您可以将整个文本读入缓冲区，然后确定大块数据的开始和结束位置并`np.fromstring`直接通过以下方式进行转换：

```
fp = open("test.dat", "r")
txt = fp.read()
fp.close()
# Now determine starting and end positions (startpos, endpos)
# ..
# pass text that portion of the text to the fromstring function.
data = np.fromstring(txt[startpos:endpos], dtype=int, sep=" ") 
```

或者，如果很容易将其表述为一个正则表达式，则可以`fromregex()`直接在文件上使用。

# mysql - 使用 pymysql 和 sqlalchemy 在 mysql 中创建表

> ID：14946666
> 
> 赞同：0
> 
> 时间：2013-02-18T22:42:48.763
> 
> 标签：mysql, python-3.x, sqlalchemy, pymysql

我在使用 python 3.3 在 mysql 中创建表时遇到问题。我正在使用 Pymysql-0.15 和 SQLAlchemy。

目前我正在 Pythonwin 中运行此代码并具有以下输出。

```
from sqlalchemy imort *

    from sqlalchemy import *
    import pymysql
    engine = create_engine("mysql+pymysql://admin:admin@127.0.0.1/dbeerste")

    engine = create_engine("mysql+pymysql://admin:admin@127.0.0.1/dbeerste")
    metadata = MetaData(bind=engine)
    users_table = Table('users', metadata, Column('id', Integer, primary_key=True), Column('name', String(40)), Column('age', Integer), Column('password', String),)
    metadata.create_all(engine)

Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\schema.py", line 2740, in create_all
    tables=tables)
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\engine\base.py", line 1489, in _run_visitor
    conn._run_visitor(visitorcallable, element, **kwargs)
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\engine\base.py", line 1132, in _run_visitor
    **kwargs).traverse_single(element)
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\sql\visitors.py", line 109, in traverse_single
    return meth(obj, **kw)
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\engine\ddl.py", line 56, in visit_metadata
    collection = [t for t in sql_util.sort_tables(tables)
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\engine\ddl.py", line 57, in <listcomp>
    if self._can_create_table(t)]
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\engine\ddl.py", line 35, in _can_create_table
    table.name, schema=table.schema)
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\dialects\mysql\base.py", line 2039, in has_table
    rs = connection.execute(st)
 File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\engine\base.py", line 664, in execute
    params)
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\engine\base.py", line 808, in _execute_text
    statement, parameters
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\engine\base.py", line 878, in _execute_context
    context)
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\engine\base.py", line 1036, in _handle_dbapi_exception
    from e
sqlalchemy.exc.ProgrammingError: (ProgrammingError) (1146, "#42S02Table 'dbeerste.users' doesn't exist") b'DESCRIBE `users`' () 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:58:21.110

您的代码看起来正确，但 MySQL 要求您指定密码字段的长度。修复该问题后，我能够对 MySQL 数据库执行您的查询，这没有问题。如果它仍然对您不起作用，那么这是您的数据库服务器或驱动程序的问题，因此您可以尝试重新安装这些东西。

# sql - SQL 关系数据库设计

> ID：14946670
> 
> 赞同：3
> 
> 时间：2013-02-18T22:43:03.783
> 
> 标签：sql, database-design, relational-database

如果您能充分解释或指出我的方向，我将不胜感激。

我正在尝试创建一个存储企业的数据库，并将它们列为在当地开展的活动。以分层形式，我想将它们存储为：

活动类别

*   活动子类别
*   活动

*   活动类别是：室内、户外、艺术……等

*   活动子类别将是：水族馆，博物馆，公园......等

*   活动将是子类别的列表：佛罗里达水族馆，大英博物馆..

假设我使用上面的 3 个名称作为我的表格，正确的关系是什么？在 ActivitySubCategory 表中，我是否会创建一个与 ActivityCategoryID Pk 相关的 FK？我会在与 ActivitySubCategoryID PK 相关的 Activity 表中创建一个 FK 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:47:12.000

由于您最终可能会建立多对多关系（例如，艺术有许多子类别，但英国博物馆可能在艺术和室内），您应该添加一个 Join 或 Link 表，其中仅包含活动表和子活动表中的 ids 值。确保将两者都用作PK，这样您只能将每个组合输入一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T22:47:39.233

每个活动是否只有一个类别？我的建议是创建一个 Activity 表，然后创建一个带有 ParentCategory 列的 Category 表 - 这将是一个自引用连接。

如果一个活动可以只有一个类别，那么一个简单的 FK 关系就足够了。如果没有，那么您需要第三张表作为关联。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T23:13:50.037

扩展其他答案并让您深入了解我如何解决此类问题。

数据库结构是我考虑的**最后一**件事。归根结底，RDMS 是一个数据存储——当您不使用它们时，它会保存在其中。

首先考虑您正在建模的现实世界问题。现实世界的对象将被建模为软件对象——哪些属性是必不可少的，以及使这些对象进化所需的方法。一旦你有了这个结构，数据库模式就会自然而然地消失。

对于您的问题，您有两个现实世界的东西；活动和类别。忽略它们的独特属性，考虑这些对象如何交互。

**活动**

*   活动总是在一个类别中吗？
*   只有一类？
*   它可以在类别之间移动吗？
*   如果是这样，它是否需要知道它在哪里？
*   什么时候？
*   它是否始终是子类别的一部分，还是可以直接附加到某个类别？

**类别**

*   层次结构中是否只有 2 个级别，或者可能有子子类别？
*   子类别只会成为一个类别的一部分吗？
*   他们可以在类别之间移动吗？
*   如果是这样，它是否需要知道它在哪里？
*   什么时候？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T22:49:15.497

您可以按照建议创建外键：

*   FK 从 ActivitySubCategory 到 ActivityCategory PK
*   FK 从 Activity 到 ActivitySubCategory PK

但是，这会将您的活动限制为仅一个子类别。如果您需要将活动与多个子类别相关联，那么您应该创建一个查找表，其中包含活动和 ActivitySubCategories 的外键。

如果您设想任何更多可能的类别级别，您可以创建一个自身具有 FK 的单个 ActivityCategories 表。这将是同一个表的行之间的父/子关系，因此您可能希望创建引用 ActivityCategories.PK 的 ActivityCategories.ParentKey。顶级 ActivityCategory 将有一个 NULL ParentKey。

此外，我建议在外键上创建索引。例如，在 Activity.ActivitySubCategoryKey 和 ActivitySubCategory.ActivityCategoryKey 上创建索引。如果您不这样做，删除活动类别或子类别可能需要很长时间。

# sql - 在多条记录上选择具有类型的最大日期

> ID：14946677
> 
> 赞同：0
> 
> 时间：2013-02-18T22:43:33.787
> 
> 标签：sql, oracle

```
CREATE TABLE PAYMENTS
(
   CTRL_NO       NUMBER                          NOT NULL,
   CUSTOMER_NO   NUMBER                          NOT NULL,
   CTYPE         VARCHAR2(10 BYTE)               NOT NULL,
   AMOUNT        NUMBER,
   PAYMENT_DATE  DATE
  )

CREATE UNIQUE INDEX TEST1_PK ON PAYMENTS
(CTRL_NO)

ALTER TABLE PAYMENTS ADD (
  CONSTRAINT TEST1_PK
 PRIMARY KEY
 (CTRL_NO)
    USING INDEX 

Insert into PAYMENTS
   (CTRL_NO, CUSTOMER_NO, CTYPE, AMOUNT, PAYMENT_DATE)
 Values
   (266, 272, 'CASH', -47, TO_DATE('12/09/2011 00:00:00', 'MM/DD/YYYY HH24:MI:SS'));
Insert into PAYMENTS
   (CTRL_NO, CUSTOMER_NO, CTYPE, AMOUNT, PAYMENT_DATE)
 Values
   (286, 272, 'CASH', 47, TO_DATE('12/12/2011 00:00:00', 'MM/DD/YYYY HH24:MI:SS'));
Insert into PAYMENTS
   (CTRL_NO, CUSTOMER_NO, CTYPE, AMOUNT, PAYMENT_DATE)
 Values
   (701, 272, 'CASH', -200, TO_DATE('12/13/2011 00:00:00', 'MM/DD/YYYY HH24:MI:SS'));
Insert into PAYMENTS
   (CTRL_NO, CUSTOMER_NO, CTYPE, AMOUNT, PAYMENT_DATE)
 Values
   (752, 272, 'INV', -91, TO_DATE('01/11/2012 00:00:00', 'MM/DD/YYYY HH24:MI:SS'));
Insert into .PAYMENTS
   (CTRL_NO, CUSTOMER_NO, CTYPE, AMOUNT, PAYMENT_DATE)
 Values
   (307, 252, 'AUTO', -9.35, TO_DATE('12/12/2011 00:00:00', 'MM/DD/YYYY HH24:MI:SS'));
Insert into .PAYMENTS
   (CTRL_NO, CUSTOMER_NO, CTYPE, AMOUNT, PAYMENT_DATE)
 Values
   (126, 252, 'AUTO', -128, TO_DATE('12/05/2011 00:00:00', 'MM/DD/YYYY HH24:MI:SS'));
Insert into .PAYMENTS
   (CTRL_NO, CUSTOMER_NO, CTYPE, AMOUNT, PAYMENT_DATE)
 Values
   (86, 252, 'INV', -18, TO_DATE('12/05/2011 00:00:00', 'MM/DD/YYYY HH24:MI:SS'));
Insert into .PAYMENTS
   (CTRL_NO, CUSTOMER_NO, CTYPE, AMOUNT, PAYMENT_DATE)
 Values
   (5890, 400, 'CASH', 120, TO_DATE('03/07/2012 00:00:00', 'MM/DD/YYYY HH24:MI:SS'));
Insert into .PAYMENTS
   (CTRL_NO, CUSTOMER_NO, CTYPE, AMOUNT, PAYMENT_DATE)
 Values
   (5888, 400, 'CASH', 76.41, TO_DATE('03/07/2012 00:00:00', 'MM/DD/YYYY HH24:MI:SS'));
Insert into .PAYMENTS
   (CTRL_NO, CUSTOMER_NO, CTYPE, AMOUNT, PAYMENT_DATE)
 Values
   (5886, 400, 'CASH', 86.34, TO_DATE('03/07/2012 00:00:00', 'MM/DD/YYYY HH24:MI:SS'));
Insert into .PAYMENTS
   (CTRL_NO, CUSTOMER_NO, CTYPE, AMOUNT, PAYMENT_DATE)
 Values
   (5680, 400, 'CASH', 158.97, TO_DATE('03/06/2012 00:00:00', 'MM/DD/YYYY HH24:MI:SS'));
Insert into .PAYMENTS
   (CTRL_NO, CUSTOMER_NO, CTYPE, AMOUNT, PAYMENT_DATE)
 Values
   (5819, 400, 'CASH', -40.94, TO_DATE('03/06/2012 00:00:00', 'MM/DD/YYYY HH24:MI:SS'));
Insert into .PAYMENTS
   (CTRL_NO, CUSTOMER_NO, CTYPE, AMOUNT, PAYMENT_DATE)
 Values
   (718, 400, 'INV', -40.04, TO_DATE('12/21/2011 00:00:00', 'MM/DD/YYYY HH24:MI:SS'));
COMMIT; 
```

我正在尝试获取最后一次现金交易的总和（金额）。如果没有，则只需返回 0。

这是我到目前为止的查询：

```
select p1.customer_no, max( p1.payment_date ) , 
( select nvl(sum(p2.amount), 0) 
  from payments p2
  where p2.ctype = 'CASH' 
  and p2.customer_no = p1.customer_no
   ) as last_payment_date 
 from payments p1
 group by p1.customer_no
  order by p1.customer_no ; 
```

问题是 272 应该是 11-jan-12 -200，但是上面的查询返回 13-dec-11 -200。另外，我应该得到 400 7-mar-12 282.75 而不是 400.78。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:58:00.773

尝试这个

```
WITH CTE AS
(
select p1.customer_no, max(p1.payment_date) max_dt  
from payments p1
group by p1.customer_no
), CTE2 AS
(
select A.customer_no, sum(A.amount) amount 
from payments A 
WHERE ctype = 'CASH' 
AND payment_date = (SELECT max(x.payment_date) 
                    FROM payments X WHERE X.ctype = 'CASH'
                    AND A.customer_no = X.customer_no)
group by A.customer_no
)
SELECT A.customer_no, A.max_dt, nvl(amount,0) amount 
FROM CTE A
LEFT OUTER JOIN CTE2 B 
ON A.customer_no = B.customer_no 
ORDER BY A.customer_no; 
```

[SQL 演示](http://sqlfiddle.com/#!4/ecb56/14)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T23:13:44.273

```
select p1.customer_no, max( p1.payment_date ) , 0
from payments p1
where not exists ( select 1 from payments p2 where p2.customer_no = p1.customer_no and ctype = 'CASH' ) 
group by p1.customer_no

 union

select p1.customer_no, payment_date, nvl(sum(amount),0)
from payments p1 inner   join ( select customer_no, max(payment_date ) as max_date from payments where ctype = 'CASH'  group by customer_no ) subQ
on  ( p1.customer_no = subQ.customer_no
       and p1.payment_date = subQ.max_date 
) 
group by p1.payment_date, p1.customer_no 
```

感觉很痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T16:20:08.763

不确定您的预期输出，但这是我的版本 - 您将看到 ctype = CASH 的每一行的最后付款日期。您可以在主查询中使用 WHERE 限制输出。您可以使用 LAG() 填充空白等... 270 与 CASH 最大日期是 12/13/2011，而不是这个日期 1/11/2012 bcs ctype = INV in JAN。你概率。插入值时出错。希望能帮助到你：

```
SELECT customer_no
 , ctype
 , amount
 , payment_date
 , ( SELECT max(payment_date) 
       FROM stack_test
      WHERE ctype = 'CASH' 
        AND a.customer_no = customer_no
        AND a.ctype = ctype
   ) last_payment_date
 FROM stack_test a
 /

CUSTOMER_NO    CTYPE    AMOUNT    PAYMENT_DATE    LAST_PAYMENT_DATE
-------------------------------------------------------------------
272            CASH       -47       12/9/2011     12/13/2011
272            CASH        47       12/12/2011    12/13/2011
272            CASH      -200       12/13/2011    12/13/2011 -- This is CASH max date --
272            INV       -91        1/11/2012                -- This is INV max date not CASH --
252            AUTO      -9.35      12/12/2011    
252            AUTO      -128       12/5/2011    
252            INV       -18        12/5/2011    
400            CASH      120        3/7/2012       3/7/2012
400            CASH      76.41      3/7/2012       3/7/2012
400            CASH      86.34      3/7/2012       3/7/2012
400            CASH      158.97     3/6/2012       3/7/2012
400            CASH      -40.94     3/6/2012       3/7/2012
400             INV      -40.04     12/21/2011 
```

根据您的评论提供更多示例：

```
-- Max date by trans type --
  SELECT ctype, max(payment_date) max_cash_date
   FROM stack_test
  GROUP BY ctype
 ORDER BY 2
 /

CTYPE    MAX_CASH_DATE
-----------------------
AUTO    12/12/2011
INV     1/11/2012
CASH    3/7/2012

-- Example of using analytic functions - not needed in this case --
SELECT * FROM
(
SELECT customer_no, ctype
    , MAX(payment_date) OVER (PARTITION BY ctype ORDER BY ctype) max_cash_date
    , ROW_NUMBER() OVER (PARTITION BY ctype ORDER BY ctype) rno
    , amount
 FROM stack_test
 )
-- WHERE rno=1  -- Optional - retunrns same rows as above --
ORDER BY ctype
/ 
```

# android - 从服务下载文件（更新 UI）

> ID：14946684
> 
> 赞同：1
> 
> 时间：2013-02-18T22:44:22.937
> 
> 标签：android, service, download

我有一个棘手的用例，我正在尝试为其寻找最佳设计。描述是：

*   应该有一个`FolderListActivity`对应的视图，它显示了可供下载的文件夹列表
    *   用户可以长按项目，并将其添加到下载队列
*   另一个名为的活动`DownloadingQueueActivity`应该可用，其中：
    *   显示队列中的项目列表，带有进度条（下载的文件/总文件）
    *   它是可重新排列的（用户应该能够更改队列中项目的顺序）
    *   可以删除项目（甚至整个队列）
    *   下载可以暂停

此外，这应该由服务处理，因为从应用程序退出后应该继续下载。因此，服务应该能够：

*   从队列中下载文件夹中的文件
*   通知`DownloadingQueueActivity`进度
*   监听队列的变化（由 引起`DownloadingQueueActivity`）

我尝试通过[`Messenger`](http://developer.android.com/reference/android/os/Messenger.html).

非常感谢任何有关实施此操作的建议甚至提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T01:35:58.897

看来您走在正确的轨道上。您将拥有正在处理所有下载的 DownloadService。您`DownloadingQueueActivity`可以绑定到此[Service](http://developer.android.com/reference/android/app/Service.html)。当它绑定时，您可以获得所有必要的信息来更新活动。

至于推送通知，您可以使用监听器。所以为Activiy创建一个新的接口来实现：

```
public static interface DownloadListener {

    void updateViews(int progress);
} 
```

然后将此功能添加到您的活动中。

```
public class DownloadingQueueActivity {

    public void updateViews(int progress) {

        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                //update views
            }
        });
    }
} 
```

然后在绑定后将监听器添加到服务中：

```
private ServiceConnection listenerStarter = new ServiceConnection() {

    public void onServiceConnected(ComponentName name, IBinder service) {

        DownloadService ds = ((DownloadService.LocalBinder) service).getService();
        ds.addListener(DownloadingQueueActivity.this);

    }

    public void onServiceDisconnected(ComponentName className) {
    }

}; 
```

然后在您的 DownloadService 中，当需要更新视图时，只需向已在服务中设置的侦听器发送消息（也不要忘记在服务中创建 addListener 函数以及在 onStop() 中删除侦听器活动）：

```
listener.updateViews(30); 
```

# asp.net - ASP.NET System.OutOfMemoryException

> ID：14946687
> 
> 赞同：5
> 
> 时间：2013-02-18T22:44:33.903
> 
> 标签：asp.net, memory, out-of-memory

这是 Windows server 2008 R2，64 位，32gb RAM，我认为它运行 IIS 7.5。我们已将应用程序池设置为使用 4 个工作进程。

这是一个 ASP.NET 4 应用程序，但在 32 位兼容模式下运行。

当内存使用量超过 650-700MB/工作进程时，我们会收到 oSystem.OutOfMemoryException。

我认为它应该能够处理高达 2gb 或至少 1.5gb 而没有问题？

还有一点，为什么有System.OutOfMemoryException的时候不回收worker进程呢？

**更新：**此应用程序在带有 IIS6.0 的 64 位 windows server 2003 上运行良好。我已经看到它的最大内存使用量约为 700mb/worker 进程。

**更新：**高内存使用的原因是使用 DOM 进行 XML 处理。我们将着手解决这个问题，但这是一个长期计划。我只是觉得它不能超过 650 mb 很奇怪。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T16:58:35.640

更常见的获取原因`System.OutOfMemoryException`是由于内存碎片——内存中没有足够大的**连续**空间。您应该安装一个内存分析器来验证这一点 - 然后您还可以尝试找出哪些对象占用了内存。

如果可能，您可能想要测试 .NET 4.5 - Microsoft 已对垃圾收集器进行了更改，以便自动对服务器应用程序（例如 IIS）的 LOH 进行碎片整理：http: [//blogs.msdn.com/b/dotnet/archive /2011/10/04/large-object-heap-improvements-in-net-4-5.aspx](http://blogs.msdn.com/b/dotnet/archive/2011/10/04/large-object-heap-improvements-in-net-4-5.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-17T12:44:12.767

您是否已将服务器配置为正确处理服务器垃圾收集？对于 asp 4.5，该设置位于 Aspnet.config 文件中的运行时节点下

```
<performanceScenario value="HighDensityWebHosting"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T06:39:38.143

你检查最大值了吗？分配的内存，而不仅仅是查看 taskmanager 时当前分配的内存？

因为最大。分配的内存是它实际保留并因此使用的内存。

这种异常的常见原因是未分页数据网格中显示的大型 DataTable。

# php - 在关联数组中查找最高值

> ID：14946691
> 
> 赞同：1
> 
> 时间：2013-02-18T22:44:40.083
> 
> 标签：php, arrays, multidimensional-array

有没有一种相对简单的方法可以找到关联数组中每个键的最大值？

```
Array(

    0 => Array(
        "avgtime"   => 19.75,
        "bounces"   => 3,
        "pageviews" => 14,
        "visitors"  => 4
    )

    1 => Array(
        "avgtime"   => 1.125,
        "bounces"   => 7,
        "pageviews" => 9,
        "visitors"  => 8
    )

    2 => Array(
        "avgtime"   => 111,
        "bounces"   => 18,
        "pageviews" => 32,
        "visitors"  => 20
    )

    3 => Array(
        "avgtime"   => 6.9375,
        "bounces"   => 14,
        "pageviews" => 18,
        "visitors"  => 10   
    )

    4 => Array(
        "avgtime"   => 191,
        "bounces"   => 11,
        "pageviews" => 57,
        "visitors"  => 24
    )
); 
```

我想创建一个数组来保存每个键的最高值，以便最终结果是。

```
Array(

    "avgtime"   => 191,
    "bounces"   => 18,
    "pageviews" => 57,
    "visitors"  => 24
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:47:49.577

遍历数组并存储每个键的最大值

```
$temp = array();
foreach ($data as $item) {
    foreach ($item as $key => $value) {
        $temp[$key] = max(
                isset($temp[$key]) ? $temp[$key] : $value,
                $value);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T23:09:26.713

```
function maxRecursive(array $arr) {
    $maxArray = array();
    array_walk_recursive($arr, function($val, $key) use(&$maxArray){
        if( ( !$maxArray[$key] ) || $maxArray[$key] < $val ){
            $maxArray[$key] = $val;
        }
    });
    return $maxArray;
} 
```

# shell - 用于 gimp 的 Shell 脚本编程

> ID：14946695
> 
> 赞同：1
> 
> 时间：2013-02-18T22:45:01.160
> 
> 标签：shell, gimp

我想在终端上运行这个 gimp 批处理命令

```
gimp -i -b '(batch-despeckle "check.jpg" "out.jpg" 10 3 -1 255)' -b '(gimp-quit 0)' 
```

我为此编写了一个 shell 脚本，以便我可以重用具有不同参数的命令

```
#!/bin/bash
filename_src=$1
filename_dest=$2
radius=$3
type=$4
black=$5
white=$6
gimp -i -b '(batch-despeckle \"$filename_src\" \"$filename_dest\" $radius $type $black $white)' -b '(gimp-quit 0)' 
```

我使用命令调用这个脚本

```
./gimp_despeckle check.jpg out.jpg 10 3 -1 255 
```

当我直接运行命令时，它可以工作，但是当我运行 shell 脚本时，它会失败。这让我很困惑。有任何想法吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:47:02.843

在 shell 中，不能用单引号将变量括起来：变量不会被插值，所以：

```
#!/bin/bash
filename_src="$1"
filename_dest="$2"
radius="$3"
type="$4"
black="$5"
white="$6"
gimp -i -b "(batch-despeckle \"$filename_src\" \"$filename_dest\" $radius $type $black $white)" -b '(gimp-quit 0)' 
```

了解引号之间的区别。请参阅[http://mywiki.wooledge.org/Quotes](http://mywiki.wooledge.org/Quotes)和[http://wiki.bash-hackers.org/syntax/words](http://wiki.bash-hackers.org/syntax/words)

# r - 列出 R 中给定产品 ID 的所有产品

> ID：14946697
> 
> 赞同：1
> 
> 时间：2013-02-18T22:45:06.010
> 
> 标签：r, matrix, correlation

我对 R 很陌生，所以如果这个问题相对新手，我深表歉意。我有一个大约 33,000 行的列表，其中显示了订单 ID 和在该订单 ID 内订购的产品。结构如下：

```
Order.ID    Product  
193505  Pineapple Cheddar Burger  
193505  Onion Rings  
193564  Pineapple Cheddar Burger  
193623  Hamburger  
193623  French Fries  
193623  Fountain Soda  
193623  Hot Dog  
193631  Hamburger  
193631  French Fries  
193631  Milkshake  
193644  Daily Special  
193726  Hamburger  
193726  French Fries  
193726  Fountain Soda  
193728  Hamburger  
193728  French Fries  
193728  Fountain Soda  
193738  Hamburger  
193738  French Fries  
193762  Hamburger  
193762  French Fries  
193762  Fountain Soda  
193762  Hamburger  
193762  French Fries  
193762  Fountain Soda 
```

我想生成一个相关矩阵，该矩阵反映以与其他项目相同的订单 ID 订购的每个项目的相关性。我首先使用 a`table(ID, Product)`它给了我在每个订单中订购的产品。现在我被困在如何计算每个其他产品（产品 2-k）的订单数量，因为已经订购了产品 1。理想情况下，我想对每个产品进行分析并将其转换为矩阵，但正确评估一个似乎是合乎逻辑的第一步。

我将不胜感激任何关于这个问题的指导。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T23:07:11.023

我建议查看 arules 包（[http://cran.r-project.org/web/packages/arules/index.html](http://cran.r-project.org/web/packages/arules/index.html)）。具体来说，您正在寻找频繁的项目集：

```
sets = apriori(asc, parameter=list(target="freq")) 
```

它将能够找出所有的组合。您将不得不更改数据的格式，但 table() 应该是一个好的开始。

它将不仅能够返回 2 产品分布，而且能够返回所有组合。

您正在寻找一组支持，因此请使用：

```
inspect(sets) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T23:24:03.907

如果您使用 reshape2 包中的 dcast ，您将获得一个矩阵，然后您可以对它执行成对相关函数：

```
data <- read.table(h=T, text="Order.ID    Product  
+ 193505  'Pineapple Cheddar Burger'  
+ 193505  'Onion Rings'  
+ 193564  'Pineapple Cheddar Burger'  
+ 193623  'Hamburger'  
+ 193623  'French Fries'  
+ 193623  'Fountain Soda'  
+ 193623  'Hot Dog'  
+ 193631  'Hamburger'  
+ 193631  'French Fries'  
+ 193631  'Milkshake'  
+ 193644  'Daily Special'  
+ 193726  'Hamburger'  
+ 193726  'French Fries'  
+ 193726  'Fountain Soda'  
+ 193728  'Hamburger'  
+ 193728  'French Fries'  
+ 193728  'Fountain Soda'  
+ 193738  'Hamburger'  
+ 193738  'French Fries'  
+ 193762  'Hamburger'  
+ 193762  'French Fries'  
+ 193762  'Fountain Soda'  
+ 193762  'Hamburger'  
+ 193762  'French Fries'  
+ 193762  'Fountain Soda'")

library(reshape2)

df <- dcast(data, Order.ID ~ Product)
cor(df[,-1], use = "pairwise")

                         Daily Special Fountain Soda French Fries Hamburger Hot Dog
Daily Special                   1.0000       -0.2868      -0.4375   -0.4375 -0.1250
Fountain Soda                  -0.2868        1.0000       0.8030    0.8030  0.2294
French Fries                   -0.4375        0.8030       1.0000    1.0000  0.1250
Hamburger                      -0.4375        0.8030       1.0000    1.0000  0.1250
Hot Dog                        -0.1250        0.2294       0.1250    0.1250  1.0000
Milkshake                      -0.1250       -0.2868       0.1250    0.1250 -0.1250
Onion Rings                    -0.1250       -0.2868      -0.4375   -0.4375 -0.1250
Pineapple Cheddar Burger       -0.1890       -0.4336      -0.6614   -0.6614 -0.1890
                         Milkshake Onion Rings Pineapple Cheddar Burger
Daily Special              -0.1250     -0.1250                  -0.1890
Fountain Soda              -0.2868     -0.2868                  -0.4336
French Fries                0.1250     -0.4375                  -0.6614
Hamburger                   0.1250     -0.4375                  -0.6614
Hot Dog                    -0.1250     -0.1250                  -0.1890
Milkshake                   1.0000     -0.1250                  -0.1890
Onion Rings                -0.1250      1.0000                   0.6614
Pineapple Cheddar Burger   -0.1890      0.6614                   1.0000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T23:20:21.823

我想这就是你想要的。首先，读入数据：

```
# Read in data
df<-read.table(
textConnection('
193505,Pineapple Cheddar Burger
193505,Onion Rings
193564,Pineapple Cheddar Burger
193623,Hamburger
193623,French Fries 
193623,Fountain Soda
193623,Hot Dog
193631,Hamburger
193631,French Fries
193631,Milkshake
193644,Daily Special
193726,Hamburger
193726,French Fries 
193726,Fountain Soda
193728,Hamburger
193728,French Fries
193728,Fountain Soda
193738,Hamburger
193738,French Fries
193762,Hamburger
193762,French Fries
193762,Fountain Soda
193762,Hamburger
193762,French Fries
193762,Fountain Soda
')
,sep=',')
names(df)<-c('id','food') 
```

现在，构建矩阵。

```
# Create a matrix of 1's and 0's with id on left and food and column.
id.by.food<-as.matrix(table(df$id,df$food))
# If someone ordered an item twice, you'll get a '2'. 
# Convert everything to 1's.
id.by.food<-pmin(id.by.food,1)
# Get a correlation matrix
round(cor(id.by.food),2)
                         Daily Special Fountain Soda French Fries Hamburger Hot Dog Milkshake Onion Rings
Daily Special                     1.00         -0.32        -0.50     -0.50   -0.12     -0.12       -0.12
Fountain Soda                    -0.32          1.00         0.63      0.63    0.40     -0.32       -0.32
French Fries                     -0.50          0.63         1.00      1.00    0.25      0.25       -0.50
Hamburger                        -0.50          0.63         1.00      1.00    0.25      0.25       -0.50
Hot Dog                          -0.12          0.40         0.25      0.25    1.00     -0.12       -0.12
Milkshake                        -0.12         -0.32         0.25      0.25   -0.12      1.00       -0.12
Onion Rings                      -0.12         -0.32        -0.50     -0.50   -0.12     -0.12        1.00
Pineapple Cheddar Burger         -0.19         -0.48        -0.76     -0.76   -0.19     -0.19        0.66
                         Pineapple Cheddar Burger
Daily Special                               -0.19
Fountain Soda                               -0.48
French Fries                                -0.76
Hamburger                                   -0.76
Hot Dog                                     -0.19
Milkshake                                   -0.19
Onion Rings                                  0.66
Pineapple Cheddar Burger                     1.00 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T23:40:07.143

您正在查看市场篮子分析（或亲和力分析），特别是定义和寻找支持、信心和提升。[我在这里](http://proc.conisar.org/2011/pdf/1822.pdf)找到的最好的解释它的论文之一。

[kmmats](http://cran.r-project.org/web/packages/arules/arules.pdf)提到的 arules 是要使用的包，使用它的很好的例子来自 CrossValidated 站点[here](https://stats.stackexchange.com/q/21340/8464)。

# java - 从 Servlet 传递 JSP 中的数据：技巧

> ID：14946703
> 
> 赞同：0
> 
> 时间：2013-02-18T22:45:48.020
> 
> 标签：java, jsp, servlets, jstl

我目前正在使用 JSP、JSTL、Servlet 等。我有一个问题。我不明白这种情况。

## 案例1（这个案例非常棒，在JSP文件中显示数据库记录）：

## 小服务程序

```
@WebServlet("/books")
public class IndexController extends HttpServlet {
    private static final long serialVersionUID = 1L;

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        doPost(request, response);
    }

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        ArrayList<Book> books = new BookDAO().getAllBooks();
        request.setAttribute("books", books);
        request.getRequestDispatcher("index.jsp").forward(request, response);
    } 
```

JSP

```
<c:forEach items="${books}" var="book">
        ${book}
    </c:forEach> 
```

## 案例2（这个案例不行，JSP文件中不显示数据库记录）：

## 小服务程序

```
@WebServlet("/")
public class IndexController extends HttpServlet {
    private static final long serialVersionUID = 1L;

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        doPost(request, response);
    }

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        ArrayList<Book> books = new BookDAO().getAllBooks();
        request.setAttribute("books", books);
        request.getRequestDispatcher("index.jsp").forward(request, response);
    } 
```

JSP 文件同上。

案例 1：我尝试 localhost/AppName/books => 它有效。

案例 2：我尝试 localhost/AppName/ => 它不起作用

我想在 localhost/AppName 页面显示数据库记录。我该怎么办？

# python - 在 Python 中创建具有任意参数的类的实例？

> ID：14946705
> 
> 赞同：0
> 
> 时间：2013-02-18T22:46:01.920
> 
> 标签：python, class, instance

我想编写一个函数，该函数将创建一个参数中指定的任何类的实例，并使用任意数量的参数调用该类。

这似乎不起作用：

```
def spawn(tospawn, *args):
    global current_state
    current_state.instance.append(globals()[tospawn](*args)) 
```

我究竟做错了什么？

编辑：伙计们，我是个白痴。制作此函数的原因是，无法访问其他类的类仍然可以创建它们的实例，但它们实际上确实可以访问其他类。所以没关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:54:45.303

```
class MyClass(object):
    def __init__(self, a, b, c, d=None):
        print a, b, c, d

args, kwargs = [1,2], {'c':3, 'd':4}
tospawn = MyClass

tospawn(*args, **kwargs) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T01:50:35.317

为什么不使用`eval`？

```
def spawn(tospawn, *args):
     global current_state
     current_state.instance.append(eval("{}(*{})".format(tospawn, args))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T23:00:15.377

您无法从全局变量中获取类；`tospawn`是一种类型，而不是字符串。类型是一流的对象，您可以直接使用它们。

至于整个代码，我会亲自使用类方法来执行此操作。

```
class Spawner:
    __spawned__ = []

    @classmethod
    def spawn(cls, tospawn, *args, **kwargs):
        obj = tospawn(*args, **kwargs)
        cls.__spawned__.append(obj)

class TestClass:
    def __init__(self, *args):
        print args

Spawner.spawn(TestClass, "these", "are", "args")
print Spawner.__spawned__ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T23:01:36.920

`globals()`返回带有字符串键的字典。就像是

```
 from collection import deque

    args = range(20), 3
    a = globals()['deque'](*args) 
```

将工作，但以下将给出一个关键错误

```
 a = globals()[deque](*args) 
```

因为 deque 是一种类型而不是字符串。

也许您可以执行以下操作：

```
def spawn(tospawn, *args):
    global current_state
    try:
        current_state.instance.append(globals()[tospawn](*args))
    except KeyError:
        current_state.instance.append(tospawn(*args)) 
```

# javascript - ajax 回调 JSON 对象返回未定义

> ID：14946706
> 
> 赞同：0
> 
> 时间：2013-02-18T22:46:27.287
> 
> 标签：javascript, jquery, ajax, object, asynchronous

我看过很多关于这个主题的帖子，并尝试了几种解决方案，但我似乎无法做到正确。

最后一次尝试

```
function checkzip(x){  

       $.ajax({
       type:'POST',
       url:'zipcheck.php',
       data:{zip: x},
       async: false
    }).done(function(r){
        rates(r);
    });
}

function rates(r){
    alert (r);
    if (r !== 'none'){
    m = JSON.parse(r);
    return m;
    }
    else {
        return false;
    }
} 
```

返回的 json 是 {"rateA":"125","rateB":"80","rateC":"150","rateD":"130"}

所以我希望能够：

```
new_rate = checkzip('77090'); 
```

和

```
alert (new_rate.rateA); 
```

但我的返回值未定义

我尝试成功传递函数：AND .done()，我尝试直接从两者返回它，而不是在设置 async:false 时也传递给单独的函数。我尝试将 ajax 调用与 zipcheck() 函数内的函数一起放置，然后也从那里调用它。我在从 ajax 创建对象或使用异步函数方面遗漏了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:51:45.177

你认为你的问题是异步是正确的。您基本上需要在 rates() 函数内对响应进行任何处理，而不是让 checkzip() 返回一个值。如果您将 alert() 调用放在 rates() 方法中，您应该会看到一些输出。

```
function checkzip(x) {  
       $.ajax({
       type:'POST',
       url:'zipcheck.php',
       data:{zip: x},
       async: false
    }).done(function (r) {
        rates(r);
    });
}

function rates(r) {
    alert(r);
    if (r !== 'none') {
        var m = JSON.parse(r);
        // Do something with m now.
        alert(m.rateA);
    }
} 
```

# django - 在 Django 中建模复杂的关系

> ID：14946708
> 
> 赞同：1
> 
> 时间：2013-02-18T22:46:40.660
> 
> 标签：django, orm, many-to-many, data-modeling, django-orm

好的，这是一个挑战，Djangonistas！

我假设我的项目有*3*种类型的数据。

*   项目
*   声音的
*   视频

项目可以引用无限数量的视频和音频对象，*也可以*无限引用其他*项目*。

对此进行建模的最佳方法是什么？它必须以通用方式完成，以便将来可以添加新的对象类型（图像、链接、气味等），并且对象可以被多个项目引用。

我有 3 个关于如何做到这一点的理论。

## #1：继承

创建一个 BaseModel 类并让所有其他对象从它继承。

```
class BaseModel(models.Model)
class Project(BaseModel)
class Video(BaseModel)
etc 
```

然后，对 Project 类中的所有 BaseModel 有一个 ManyToMany 字段。

```
class Project(BaseModel):
    content = models.ManyToManyField(BaseModel) 
```

这会有效吗？

## #2：通用外键

我还可以设置使用 GenericForeignKey 字段的系统，该字段可以使用 ContentTypes 框架

```
content_type = models.ForeignKey(ContentType)
object_id = models.PositiveIntegerField()
content_object = generic.GenericForeignKey('content_type', 'object_id') 
```

（我认为这可能是最糟糕的想法。）

## #3：通用多对多键

最后，我可以有一个单独的表来维护对象之间的所有关系。

```
class RelatedObject(models.Model):
    """
    A generic many-to-many implementation where diverse objects are related
    across a single model to other diverse objects -> using a dual GFK
    """
    # SOURCE OBJECT:
    parent_type = models.ForeignKey(ContentType, related_name="child_%(class)s")
    parent_id = models.IntegerField(db_index=True)
    parent = GenericForeignKey(ct_field="parent_type", fk_field="parent_id")

    # ACTUAL RELATED OBJECT:
    object_type = models.ForeignKey(ContentType, related_name="related_%(class)s")
    object_id = models.IntegerField(db_index=True)
    object = GenericForeignKey(ct_field="object_type", fk_field="object_id")

    alias = models.CharField(max_length=255, blank=True)
    creation_date = models.DateTimeField(auto_now_add=True)

    class Meta:
        ordering = ('-creation_date',)

    def __unicode__(self):
        return '%s related to %s ("%s")' % (self.parent, self.object, self.alias) 
```

接着

```
class Project(models.Model):
    related = RelatedObjectsDescriptor() 
```

Charles Leifer 在这里更详细地阐述了这一点：http: [//charlesleifer.com/blog/connecting-anything-to-anything-with-django/](http://charlesleifer.com/blog/connecting-anything-to-anything-with-django/)和他的 django-generic-m2m 项目：[https ://github.com /coleifer/django-generic-m2m](https://github.com/coleifer/django-generic-m2m)

## 该怎么办？

那么，这些存储关系的方法各自的优缺点是什么？哪个最快，哪个更容易编写和维护？您过去使用过哪些方法？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T02:24:00.707

我会说您将要用作模型`'self'`的参数（而不是示例中的继承）。这允许您定义自引用模型。`Project``ManyToManyField`

如果您查看[https://docs.djangoproject.com/en/dev/ref/models/fields/#foreignkey](https://docs.djangoproject.com/en/dev/ref/models/fields/#foreignkey) - 您会看到下面的两行，有这个注释：

**要创建递归关系（与自身具有多对一关系的对象），请使用 models.ForeignKey('self')。**

...我从 2008 年的这篇博客文章中第一次了解到这一点（现在在某些方面可能已经过时，但在使用这种技术时我仍然会参考它）：

[http://eflorenzano.com/blog/2008/05/17/exploring-mixins-django-model-inheritance/](http://eflorenzano.com/blog/2008/05/17/exploring-mixins-django-model-inheritance/)

确实，祝先生好运。

# spring - NamedQueries Spring 使用 LIKE % %

> ID：14946709
> 
> 赞同：1
> 
> 时间：2013-02-18T22:46:48.630
> 
> 标签：spring, hibernate, hql, entitymanager

我只想编写一个简单的搜索引擎。

在我的 DAO 实现中：

```
@Transactional(readOnly=true)
    public List<Thread> findAllWithReferer(String referer) {
        Map<String, Object> params = new TreeMap<String, Object>();

        log.debug("DAO:findAllWithReferer(String referer) - referer=" + referer);
        params.put("referer", "%" + referer + "%");
        @SuppressWarnings("unchecked")
        List<Thread> threads = EntityManagerUtil.executeNamedQueryInTransaction("Thread.findAllWithReferer", params);
        return (threads);
    } 
```

提供上述方法“executeNamedQueryInTransaction”的 Utils 类：

```
@SuppressWarnings("rawtypes")
    public static List executeNamedQueryInTransaction(String queryName, Map<String, Object> params) {
        EntityManager em = createEntityManagerAndOpenTransaction();
        Query query = em.createNamedQuery(queryName);

        for (String key : params.keySet())
            query.setParameter(key, params.get(key));

        List l = query.getResultList();
        commitTransactionAndCloseEntity(em);

        return l;
    } 
```

并且 Namedquery 链接到我的实体：

```
@NamedQueries({
    @NamedQuery(name = "Thread.findAllWithReferer", query = "SELECT t FROM Thread t WHERE t.title LIKE :referer")
}) 
```

我只想使用我的 DAO 中的运算符 % % 将所有记录与我的实体标题字段中的字符串“toto”进行匹配。

这是一些可以匹配的示例：

托托很棒 托托很棒吗？dghjgdjtotojdashkjdhk

但它不起作用。只是确切的字符串有效。我想确切地说，“executeNamedQueryInTransaction”方法中的代码是正确的并且可以完美运行。我想我的问题来自这里：

```
params.put("referer", "%" + referer + "%"); 
```

有人可以帮助我吗？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:28:33.693

试试这个`params.put("referer", '%' + referer.toLowerCase() + '%');`。用单引号替换双引号。

# jquery - Jquery event.preventDefault 不适用于 shift-click

> ID：14946721
> 
> 赞同：1
> 
> 时间：2013-02-18T22:47:51.423
> 
> 标签：jquery, click, anchor, preventdefault

我只是想让用户点击某个动作的锚标签。问题是浏览器中的 shift-clicking URL 会在新窗口中打开链接。所以，我自然会使用`event.preventDefault()`，但在这种情况下，它似乎在任何浏览器中都不起作用。任何帮助将不胜感激！

这是一个jsfiddle：

[http://jsfiddle.net/zZea9/](http://jsfiddle.net/zZea9/)

这是代码：

```
<a href="#" class="edit">shift-click here</a>

<script>

$('.edit').click(function (e) {
    if (e.shiftKey) {
        e.preventDefault();
        alert('you shift-clicked');
    }
});

<script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T23:20:12.393

您没有在 jsfiddle 中运行 jQuery。包含此内容后，您应该首先阻止默认设置，然后检查 shift 键并运行必要的代码。

您应该尽量避免 stopPropogation ，除非您确实打算阻止事件在 DOM 中冒泡。但是在这个例子中，这看起来不像你想要的。

看看这里：http: [//jsfiddle.net/zZea9/3/](http://jsfiddle.net/zZea9/3/)

```
$('.edit').click(function (e) {
    e.preventDefault();
    if (e.shiftKey) {
        alert('you shift-clicked');
    }
}); 
```

并进一步阅读 preventDefault: [event.preventDefault() vs. return false](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:53:53.173

你没有包括 jQuery，所以你的点击处理程序没有被调用。

HTML

```
<a href="#" class="edit">click here</a> 
```

JS

```
$('.edit').click(function(e) {
    if (e.shiftKey) {
        alert("shift+click")
    } 
}); 
```

[http://jsfiddle.net/fJHug/](http://jsfiddle.net/fJHug/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T22:54:59.087

这是根据您想要的工作的 jQuery 代码。

```
$('.edit').click(function(e) {
    if (e.shiftKey) {
        alert("shift+click");
        e.preventDefault();
    } 
});

$('.edit').click(function(e) {
    e.stopPropagation();
    e.preventDefault();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T00:07:22.677

由于您删除了其他问题：“完整代码”中未阻止默认设置的原因很简单：

> SCRIPT1006：应为 ')'
> _display，第 131 行字符 5

始终检查您的控制台是否有错误。它们是代码不起作用的第一大原因。

在这种情况下，您忘记了`)`关闭`click()`函数调用。

# actionscript-3 - TLF 查找元素位置

> ID：14946722
> 
> 赞同：2
> 
> 时间：2013-02-18T22:47:52.713
> 
> 标签：actionscript-3, tlf, textflow

在将元素添加到显示列表之前，我遇到了 TLF 试图查找元素（例如 LinkElement）位置的问题。

我尝试了以下代码：

1.  创建我的文本流：

    ```
    var textFlow:TextFlow = TextConverter.importToFlow(MY_HTML_STRING,
    TextConverter.TEXT_FIELD_HTML_FORMAT); 
    ```

2.  抓住我需要的所有元素：

    ```
    var lElem:Array = findLinkElement(textFlow, []);

    private function findLinkElement(group:FlowGroupElement, arr:Array):Array {
        var childGroups:Array = [];
        for (var i:int = 0; i < group.numChildren; i++) {
            var element:FlowElement = group.getChildAt(i);
            if (element is LinkElement) {
                arr.push(element as LinkElement);
            } else if (element is FlowGroupElement) {
                childGroups.push(element);
            }
        }

        for (i = 0; i < childGroups.length; i++) {
            var childGroup:FlowGroupElement = childGroups[i];
            findLinkElement(childGroup, arr);               
        }

        return arr;
    } 
    ```

3.  对于找到的每个元素，尝试获取边界：

    ```
    for each (var le:LinkElement in lElem){
        var abs:int = le.getAbsoluteStart(); 
        var tl:TextLine = le.getTextFlow().flowComposer.getLineAt(abs).getTextLine(true);
        var rect:Rectangle = tl.getAtomBounds(tl.getAtomIndexAtCharIndex(abs));   
    } 
    ```

似乎我无法检索 Textline，因为 flowComposer 为空。

知道如何获得界限/为什么作曲家总是为空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:52:14.790

问题不在于 flowComposer 为空。它实际上是一个对象，但是在这个表达式中有这么长的对象链，而该链中的其他东西是空的：

`var tl:TextLine = le.getTextFlow().flowComposer.getLineAt(abs).getTextLine(true);`

问题是你得到了每个字符的索引`LinkElement`——这不是行号。因此，当您这样做时，`flowComposer.getLineAt(abs)`它会返回 null，因为该行不存在。

相反，您想使用`flowComposer.getLineAtPosition(abs)`. 此外，作为优化，可能尚未生成整个流程。所以在你这样做之前，明智的做法是调用`flowComposer.composeToPosition(abs)`.

以下是我为执行上述操作而修改的代码。您可能不需要`composeToPosition()`调用，它实际上可能是在循环内多次调用的性能问题。我会留给你决定。

这是我使用的代码（减去我的`html`变量的声明）。我修改的相关代码在该`for each`循环内：

```
var container:Sprite = new Sprite;
stage.addChild(container);
var textFlow:TextFlow = TextConverter.importToFlow(html, TextConverter.TEXT_FIELD_HTML_FORMAT);
var controller:ContainerController = new ContainerController(container, 200,200);
textFlow.flowComposer.addController(controller);
textFlow.flowComposer.updateAllControllers();
var links:Array = findLinkElement(textFlow, []);

// modified this code
for each (var le:LinkElement in links){
    var abs:int = le.getAbsoluteStart(); 
    var composer:IFlowComposer = le.getTextFlow().flowComposer;
    composer.composeToPosition(abs);
    var textFlowLine:TextFlowLine = composer.findLineAtPosition(abs);
    var tl:TextLine = textFlowLine.getTextLine(true);
    var rect:Rectangle = tl.getAtomBounds(tl.getAtomIndexAtCharIndex(abs));   
} 
```

# objective-c - memcpy 会正确复制字符串吗？

> ID：14946723
> 
> 赞同：3
> 
> 时间：2013-02-18T22:47:53.527
> 
> 标签：objective-c, c, nsstring, memcpy, strcpy

我正在努力实现一些低级文件写入，其中文件格式特定于每一位。我需要将一个字符串从一个`NSString`长度为 16 的以空字符结尾的字符串复制（根据 Xcode，这是不可分配的）。在谈到 时，我是一个完全的*n00b*`c`，并且想确保我正确理解这一点。这就是我目前正在做的事情：

```
//I have a non-null NSString called _friendly_name.
const char *string = [_friendly_name UTF8String];
//profile.friendly is a utf-8 null-terminated string
memcpy(&profile.friendly_name, &string, 16); 
```

这尚未经过测试，但我想确保这会奏效。这会提供我期望的行为吗？或者我应该以不同的方式复制字符串（例如`strcpy`）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T23:11:02.977

您可以使用`memcpy()`or `strcpy()`，但您必须自己检查边界，并且代码中还有其他错误。

所以，我认为你想将一个 NSString 复制到一个`char[16]`数组中。您可以使用`NSString`内置方法来执行此操作，而不必`memcpy()`自己使用：

```
NSString *src;
char dest[16];
NSUinteger destlen;
[src getBytes:dest
    maxLength:sizeof(dest) - 1
    usedLength:&destlen
    encoding:NSUTF8StringEncoding
    options:0
    range:NSMakeRange(0, [src length])
    remainingRange:NULL];
dest[destlen] = '\0'; 
```

如果你想使用`memcpy()`，那么你必须这样做：

```
NSString *src;
char dest[16], *srcUtf8;
size_t len;

srcUtf8 = [src UTF8String];
len = strlen(srcUtf8);
if (len >= sizeof(dest))
    len = sizeof(dest) - 1;
memcpy(dest, srcUtf8, len);
dest[len] = '\0'; 
```

### 代码中的错误

这段代码有两个错误！

```
memcpy(&profile.friendly_name, &string, 16); // Wrong! 
```

首先，`&string`是错误的。应该是`string`，因为`string`它是指向要复制的字符串数据的指针。如果你 copy `&string`，你会得到一个指针和一些随机的堆栈数据位。换句话说，你会得到垃圾。

其次，16 是错误的。如果您知道这`string`指向至少 16 个字节的数据，则只能复制 16 个字节。`string`如果小于 16 个字节，内存中的以下数据不可读，这将导致分段错误（使您的程序崩溃） 。它今天可能不会崩溃，但也许它会在下周崩溃，你会忘记这一切吗？

这是错误的，除非您知道源至少有 16 个字节长，否则不要传递 16。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T22:52:57.267

memcpy() 应该可以正常工作，但 strcpy() 也可以正常工作。您只需要确保 profile.friendly_name 足够大以容纳您要复制的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T22:59:23.307

你读过文档吗？memcpy 将起作用，但您传递要复制的字节数。它将复制您指定的字节数，与 NULL 无关。strcpy 你不传递长度，它将复制字节直到并包括第一个 NULL。

[http://www.cplusplus.com/reference/cstring/memcpy/](http://www.cplusplus.com/reference/cstring/memcpy/)

[http://www.cplusplus.com/reference/cstring/strcpy/](http://www.cplusplus.com/reference/cstring/strcpy/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T22:55:24.980

```
//I have a non-null NSString called _friendly_name.
const char *string = [_friendly_name UTF8String];
//profile.friendly is a utf-8 null-terminated string  : char [17] ??
memcpy(profile.friendly_name, string, 16);
profile.friendly_name[16]='\0'; 
```

编辑：是的，完全正确。在结束时添加一个`NULL`。实际上，`0`在复制之前对 all 进行初始化可能会更好。`strcpy`如果`_friendly_name`没有`'\0'`前位置 16`strncpy`将无法工作。会很好。

编辑2：

出现了一些问题，为什么我们没有所有需要的信息：

1-您需要一个长度为 16 的以 NULL 结尾的字符串（如中的 16 个字符 + 0 `char var[17];`），或者您需要一个以 NULL 结尾的 16 字节字段，如中`char var[16];`？

2-什么是desred“错误”管理：如果原始字符串大于“16”，我们只是截断它，或者我们抛出一个错误？

假设您需要一个 16 字节的字段和一个可以使用的截断字符串：

```
strncpy(profile.friendly_name, string, 15);
profile.friendly_name[15]='\0'; 
```

编辑3：

另外......必须小心截断：我们不想截断多字节字符......

# jquery - jquery 获取元素名称 - prop('name') 或 attr('name')

> ID：14946728
> 
> 赞同：3
> 
> 时间：2013-02-18T22:48:18.720
> 
> 标签：jquery

我正在尝试通过 jquery 获取元素名称-

请检查以下示例代码：（或[http://jsbin.com/usujeq/2/watch](http://jsbin.com/usujeq/2/watch)）

```
<div name = "foo1">
  <div name = "foo2">
    <div name = "foo3">
      <div name = "foo4">
        <button id = "clickme" type="button">
</div></div></div></div>

<script type="text/javascript">
$('#clickme').click( function() {
  $(this).parents().each( function() {
     console.log($(this).prop('name'));
  });
});
</script> 
```

如果我单击`clickme`，它应该从`<div name="foo4">`到整个 DOM`<html>`并记录他们的名字。

预期结果是：

```
foo4
foo3
foo2
foo1
undefined
undefined 
```

`prop('name')`返回 undefined while`attr('name')`给出预期的名称。`prop('name')`上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T23:03:26.763

我认为这里的主要问题是`div`元素默认没有`name`属性（请参阅[全局属性](https://developer.mozilla.org/en-US/docs/HTML/Global_attributes)）。如果您要对`input`元素执行原始 JavaScript 代码，它可能会起作用，因为`input`元素具有`name`属性。

jQuery 的[`.attr()`](http://api.jquery.com/attr/)方法甚至能够解析非标准属性（[示例](http://jsfiddle.net/vF7cb/)）。

jQuery 的[`.prop()`](http://api.jquery.com/prop/)方法主要用于诸如`checked`和之类的属性`disabled`，因此`.attr()`无论如何使用可能是最好的做法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T23:03:45.640

例如，输入元素具有 name 属性。`div`s 没有*属性*of，`name`因为那不是 a 的固有属性`div`。我扔了一个小提琴来解释其中的区别。[http://jsfiddle.net/c7qDC/](http://jsfiddle.net/c7qDC/)

当您添加 a`name="foo1"`时，它会为元素设置一个附加属性。而 an有一个名为`input`的固有*属性*`name`。

[请参阅有关输入元素的文档以了解它们具有的**属性**](https://developer.mozilla.org/en-US/docs/DOM/HTMLInputElement)。

并将其与[div 的文档进行](https://developer.mozilla.org/en-US/docs/DOM/HTMLDivElement)比较。

我很抱歉这么强调“财产”。我只是想说明属性和属性之间的区别。您可以在元素上设置其他*属性*，而*属性*是元素类型的固有属性。

# ruby-on-rails-3 - Rails 从选择中排除 current_user

> ID：14946730
> 
> 赞同：0
> 
> 时间：2013-02-18T22:48:44.037
> 
> 标签：ruby-on-rails-3

我有一个 Rails 应用程序，其中用户 has_one 员工employees_to workgroup workorder belongs_to workgroup workorder belongs_to employee（这是主角）

下面列出了 current_user 工作组中的所有工单。

```
 <% current_user.workgroup.workorders.each do |workorder| %> 
```

我想显示一个组的工单，但不包括 current_user。换句话说，我想显示用户组中他/她不是领导的所有工单。

我试过这个，但没有奏效：

```
<% current_user.workgroup.workorders.where(employee_id != current_user.employee_id).each do |workorder| %> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:01:19.117

我认为这是解决方案：
`<% Workorders.where('employee_id != ?', current_user.id).each do |workorder| %>`

# android - 如何使活动出现在“选择文件”对话框中？

> ID：14946734
> 
> 赞同：6
> 
> 时间：2013-02-18T22:48:54.883
> 
> 标签：android, android-intent, filechooser

示例：当您单击按钮上传图像时，会出现选择文件的对话框。然后你可以选择一个你想要选择它的应用程序。如何让我的应用出现在该对话框中？

![](../Images/1a2997ee6f59cb760cabb7b64ff3ade5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T23:05:57.617

您需要在要处理上传的活动中将 Intent 过滤器添加到清单文件中。例如：我有一个处理图像导入的活动，这是我写的。

```
activity android:name="com.ImportTheme">

    <intent-filter> 
            <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.BROWSABLE" />
        <data android:host="*" android:scheme="file" android:mimeType="image/*" />              
    </intent-filter>

</activity> 
```

如您所见，您需要添加适合您查找内容的 mime 类型，在我的示例中，我只想要图片 - png、jpg 等。

检查下一个[链接](http://www.hosting.com/support/dedicated/iis/mimetypes)，您有一个 mime 类型列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T23:01:39.777

将以下意图过滤器添加到您希望进行采摘的活动中：

```
 <intent-filter >
            <action android:name="android.intent.action.PICK" />

            <category android:name="android.intent.category.DEFAULT" />

            <data android:scheme="file" />
        </intent-filter>
        <intent-filter >
            <action android:name="android.intent.action.GET_CONTENT" />

            <category android:name="android.intent.category.OPENABLE" />
            <category android:name="android.intent.category.DEFAULT" />

            <data android:mimeType="*/*" />
        </intent-filter> 
```

第一个处理 Action Pick，第二个处理 Get Content。

您可能想要更改您的 mimeType 以稍微限制选择。我提供的那个会将您的应用程序放在每种文件类型的选择器中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T18:48:15.043

[打开 TXT 文件时，android 将向用户显示的应用程序的简单而完整的示例代码（少于 50 行）](https://stackoverflow.com/a/15555455/1166727)以及兼容应用程序（北极星、浏览器等）的菜单列表。

免责声明：如果用户之前没有确定默认应用程序

注意：TXT 可能会更改为其他扩展，始终注意 mime 类型。

# c++ - 在析构函数期间提升信号导致 sigabrt

> ID：14946735
> 
> 赞同：0
> 
> 时间：2013-02-18T22:49:12.030
> 
> 标签：c++, reference-counting, pure-virtual, boost-signals, boost-signals2

我开始使用 boost::signals2 跟踪对象破坏。我写了一个小测试，看看我是否仍然可以在析构函数中使用[信号](https://gist.github.com/kcuzner/4981315)。它似乎奏效了。然后我开始使用它来跟踪引用其他对象的对象列表。我的结构或多或少是这样的：

结构简图：http: [//oi50.tinypic.com/16c8cwn.jpg](http://oi50.tinypic.com/16c8cwn.jpg)

我有两个类 IModel 和 IBlock。IModel 有许多 IBlock，一个 IBlock 有一个 IModel 父级。但是，有一个特殊的 IBlock，称为 IModelBlock。除了其父模块外，此模块还有一个引用的 IModel。这是 IModel 之间的“连接器”。我想让 IModel 知道哪些 IModel 正在使用它们，所以我实现了一个引用计数系统，该系统使用在 IModel 和 IBlock 销毁期间发生的信号来跟踪哪些模型正在使用另一个模型。

我有我的 IBlock 纯虚拟类（显然除了析构函数）：

```
class IBlock
{
public:
    virtual ~IBlock() { this->sigBlockDestroying(this); }
    ...
    boost::signals2::signal<void (IBlock*)> sigBlockDestroying; //raised when the destructor is called
}; 
```

我的 IModelBlock 标头（纯虚拟类）：

```
class IModelBlock : public IBlock
{
public:
    virtual ~IModelBlock() {}
    ...
}; 
```

我的 IModel 标头（纯虚拟类）：

```
class IModel
{
public:
    ...
    virtual void nowUsedBy(IModelBlock* block) = 0;
}; 
```

我对 IModelBlock 构造函数（ModelBlock 类）的实现，它通知模型它正在被使用：

```
ModelBlock::ModelBlock(IModel *parent, long id, boost::shared_ptr<IModel> model)
{
    //...lots of stuff happens involving the parent and model...then:

    //tell the model we see them
    model->nowUsedBy(this);
} 
```

**这是毛茸茸的地方**

我的 IModel (Model) 实现定义了以下内容：

```
class Model : public IModel
{
public:
    ...
    virtual ~Model();
    ...
protected:
    ...
    void onModelDestroying(IModel* model);
    void onModelBlockDestroying(IBlock* modelBlock);
    ...
    //counts for this model being used
    std::map<IModel*, int> useCounts;
    std::map<IModel*, boost::signals2::connection> modelDestructionConnections;
    std::vector<boost::signals2::connection> modelBlockDestructionConnections;
};

Model::~Model()
{
    typedef std::pair<IModel*, boost::signals2::connection> ModelDestructionRecord;
    BOOST_FOREACH(ModelDestructionRecord record, this->modelDestructionConnections)
    {
        record.second.disconnect();
    }
    BOOST_FOREACH(boost::signals2::connection& connection, this->modelBlockDestructionConnections)
    {
        connection.disconnect();
    }
}

void Model::nowUsedBy(IModelBlock *block)
{
    if (block->isOrphan())
        return; //if the block is an orphan, there isn't actually a model using it

    if (useCounts.count(block->getParentModel()))
    {
        //increment this use count
        useCounts[block->getParentModel()]++;
    }
    else
    {
        useCounts[block->getParentModel()] = 1;
        //subscribe to the model's destruction
        modelDestructionConnections[block->getParentModel()] = block->getParentModel()->sigModelDestroying.connect(boost::bind(&Model::onModelDestroying, this, _1));
    }

    //subscribe to this modelblock's destruction. we don't need to track this because modelblocks never point to
    //other models and so for its lifetime it will point to us
    this->modelBlockDestructionConnections.push_back(block->sigBlockDestroying.connect(boost::bind(&Model::onModelBlockDestroying, this, _1)));
}

void Model::onModelDestroying(IModel *model)
{
    if (this->modelDestructionConnections.count(model))
    {
        this->modelDestructionConnections[model].disconnect();
        this->modelDestructionConnections.erase(model);
    }
}

void Model::onModelBlockDestroying(IBlock *modelBlock)
{
    if (!this->useCounts[modelBlock->getParentModel()])
        return; //we've never seen this modelblock before as far as we know

    //decrement the the model count
    //note that even if the modelblock's parent pointer is invalid, we are just using it for being a value so its ok to use here
    this->useCounts[modelBlock->getParentModel()]--;

    if (this->useCounts[modelBlock->getParentModel()] <= 0 && this->modelDestructionConnections.count(modelBlock->getParentModel()))
    {
        //we are no longer used by this model
        this->modelDestructionConnections[modelBlock->getParentModel()].disconnect();
        this->modelDestructionConnections.erase(modelBlock->getParentModel());
    }
} 
```

**这是发生的事情**

当我使用 ModelBlocks 创建一堆带有嵌套模型的模型时，每件事都工作得很好。然而，我预料到破坏会出现一些问题，所以我为一个巨大的段错误做好了准备……这从未发生过。相反，当我让所有模型（及其所有块）开始销毁阶段时，我得到了一个 sigabrt，它说它发生在`Model::onModelBlockDestroying`第一个`if`. 我看着控制台，它说`pure virtual method called`。我以前从未见过这个错误，所以我不确定如何修复它。

堆栈跟踪显示它正在调用 ~IBlock 析构函数并发出`sigBlockDestroying`信号，在 10 个函数级别后最终调用该`onModelBlockDestroying`函数。现在，如果模型被销毁，它的所有信号都应该被断开（参见`~Model`参考资料），我会认为 sigBlockDestroying 不会调用任何东西。因此，我可以得出结论，当调用 ~IBlock 析构函数时，模型仍然存在，并且对象仍然有效。我 99.9% 肯定我在这个假设中是错误的，因为显然存在问题，但我不确定它为什么会发生或如何解决它。我知道上面有很多代码，但是有人知道我哪里出错了吗？

编辑：我感觉它与调用传入的 IBlock* 的成员函数有关`onModelBlockDestroying`，但该对象还没有消失（除非，因为它已经通过析构函数进行实际实现，它只剩下用纯虚来调用）。这就是正在发生的事情吗？因为析构函数在 ~IBlock 中，当它在树下很远时，它已经调用了 ~ModelBlock 的析构函数，所以所有实现的函数都不再可访问？

如果我解释得不够好，请告诉我，我会澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T18:48:14.103

当您在析构函数中调用虚函数时，它不会按预期工作 - 您正在调用基类虚函数（很可能是纯的）而不是派生类虚函数。

您的解释中缺少一些内容，但我怀疑这是相关的。

# wordpress - WPAlchemy Media Thickbox 在按下“插入帖子”时变为空白

> ID：14946737
> 
> 赞同：0
> 
> 时间：2013-02-18T22:49:15.107
> 
> 标签：wordpress, custom-post-type, image-upload

我已将 WPAlchemy 媒体访问类添加到我本地托管的 WAMP Wordpress 站点中，如以下链接所示添加：http: [//www.farinspace.com/wordpress-media-uploader-integration/](http://www.farinspace.com/wordpress-media-uploader-integration/)

然后，我通过使用 WPAlchemy 'custom-spec.php' 文件下的'types' 将其添加到我的自定义帖子中，如下所示：

```
<?php

$custom_mb = new WPAlchemy_MetaBox(array
(
'id' => '_custom_meta',
'title' => 'My Custom Meta',
'types' => array('post','my_custom_post'),
'template' => get_stylesheet_directory() . '/metaboxes/custom-meta.php',
));

/* eof */ 
```

如果我转到 wordpress 默认帖子编辑器，按下图像上传按钮会调出媒体厚框，我上传新图像，然后按“插入帖子”按钮，一切正常，图像链接出现在元框中。

但是，如果我为我的“自定义帖子”页面之一转到帖子编辑器，则用于图像上传的元框看起来还可以，按下按钮可以调用厚框媒体页面，可以上传图像，但是当您按下“插入帖子”时' 厚框页面变为空白（白色）并且没有任何反应。您可以通过单击外部等关闭厚框模式，但图像链接不会像在普通帖子编辑器中那样添加到图像输入字段？

因为它在标准的 Wordpress 帖子编辑器中工作，我认为问题可能在于将上传功能添加到自定义帖子类型，但我只是找不到代码中的问题所在以及解决此问题的解决方案。任何帮助将不胜感激。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T22:21:06.793

我找到了解决我的问题的方法，不确定它是否是最好的解决方案，但它似乎对我有用。这是一个链接：[http ://wordpress.org/support/topic/solution-for-media-upload-not-working-on-post-edit-page](http://wordpress.org/support/topic/solution-for-media-upload-not-working-on-post-edit-page)

只需在您的 functions.php 文件下添加以下内容。

```
function enable_media_upload(){
    wp_enqueue_script('media-upload');
}

add_action( 'admin_menu', 'enable_media_upload' ); 
```

# objective-c - 制作自定义 UITableViewCell 的最佳技术是什么？通过笔尖或通过代码以及以什么方式？

> ID：14946739
> 
> 赞同：0
> 
> 时间：2013-02-18T22:49:29.080
> 
> 标签：objective-c, uitableview

制作自定义 UITableViewCell 的方法有很多，但我想知道最好的技术是什么。

网上所有的解释都互相冲突，所以我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:57:05.693

像往常一样，这取决于。我不仅会考虑子视图的数量，还会考虑它们的灵活性。如果子视图相当静态，那么我会选择 nib 文件。如果布局需要对数据做出反应，例如具有各种文本长度的文本项，因此屏幕上的大小不同，要显示或不显示的图像等，那么我会选择编程解决方案。你可以将它们两者结合起来。在 IB 中创建项目并在子类化/覆盖的 layoutSubviews 中动态布局它们，如果您不想对它们进行子类化，甚至在 cellForRowAtIndexPath 中进行布局。

如果有疑问，我会选择子类化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:53:08.423

这取决于有多少子视图将包含您的自定义单元格。如果您的视图结构非常复杂（超过 5 个子视图），您应该使用代码进行绘图以获得更高的性能。在大多数情况下，Nib 是更好的解决方案，因为 iOS 5`UITableView`支持`registerNib:forReuseIdentifier:`并自动从 Nib 加载可重用的 UITableViewCells。

# php - 如果结果为零，则使用先前的。我做错了什么？

> ID：14946742
> 
> 赞同：0
> 
> 时间：2013-02-18T22:49:55.263
> 
> 标签：php, mysql, codeigniter

我正在尝试编写一个函数，该函数返回一个多维数组，其中键是日期，并且日期还有两个项目成本和价值。如果当天股市关闭（即周末或节假日），我正在使用的查询结果将为零行。我想将那一天的成本和价值设置为等于前一天。显然我在这里遗漏了一些东西，但我不明白。

```
function getNetWorth()
{
    // Query for First and Last date
    $query = $this->db->query("SELECT min(date) as start from Transactions ORDER BY date ASC;");
    $date = $query->row_array();
    $current = $date['start'];
    $networth = array();
    while(strtotime($current)<= strtotime(date('Y-m-d')))
    {
        $cost = 0;
        $value = 0;
        $run = date('Y-m-d', $current);
        // Query for net worth for given day
        echo $current;
        $sql = "SELECT Transactions.symbol, sum(shares) AS shares, sum(shares * price) AS cost, History.close as `close`, (sum(shares) * History.close) as value ".
                "FROM Transactions INNER JOIN History ON (History.symbol = Transactions.symbol AND History.date ='".$run."') ".
                "WHERE (action <>5) AND Transactions.date <= '".$run."' GROUP BY Transactions.symbol HAVING sum(shares) > 0";
        $query = $this->db->query($sql);
        if($query->num_rows() < 1)
        {

            $date = strtotime("-1 day", $current);
            $last = date('Y-m-d', $date);
        //  $networth[$current][] = $networth[$last];
        }
        else
        {
            $result = $query->result_array();
            $cost += $result['cost'];
            $value += $result['value'];
            $networth[$current]= array("cost" => $cost, "value" => $value);

        }

        $current = strtotime("+1 day", strtotime($current));    
    }
    return $networth;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T02:06:26.847

看起来您的格式`$last`与 不同`$current`，因此`$networth[$last]`不会匹配任何内容。`$last`并且`$run`格式相同，因此您可能需要更改该行：

```
$networth[$run]= array("cost" => $cost, "value" => $value); 
```

# css - 如何选择 [type=""] 选择器的多个值

> ID：14946749
> 
> 赞同：0
> 
> 时间：2013-02-18T22:50:34.757
> 
> 标签：css, css-selectors

我想选择所有类型的输入`text`，`email`或`tel`。

我可以用一个选择器做到这一点吗？例如：

```
input[type=text][type=email][type=tel] 
```

（我知道这个不起作用）

或者唯一的方法是用逗号分隔它们？

```
input[type=text], input[type=email], input[type=tel] 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:52:17.853

用逗号分隔并重复该`input`部分是目前唯一的方法。正如您可能已经猜到的那样，将所有属性选择器链接在一起本质上意味着类型必须是所有这些值，这不可能发生。

# c - C 编程：如何在动态分配文件后打印文件的内容？

> ID：14946750
> 
> 赞同：0
> 
> 时间：2013-02-18T22:50:38.233
> 
> 标签：c, multidimensional-array, malloc

在程序中，我提示用户打开他想要的文件。然后我将文件的内容动态分配到二维数组中。然后在一个单独的函数中，我应该将文件的内容打印到屏幕上。当我运行它时，我没有收到任何错误，但是文件的内容并没有像我想要的那样打印到屏幕上。如何将文件的内容打印到屏幕上？我是否正确地将其内容动态分配到数组中？

文件的格式是这样的

> 1 0 0 0
> 
> 0 0 0 1
> 
> 1 1 1 1

这是我的代码：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
FILE *get_grid(int ar[3][4]);
FILE *display_grid(int ar[3][4], FILE *fp);

int main()
{
  FILE *fp;
  char **ptr;
  int ar[3][4];

  fp = get_grid(ar);
  display_grid(ar, fp);
}//main ()

FILE *get_grid(int ar[3][4])
{
  FILE *fp;
  int i;
  char file[80]; 
  char **ptr;
  printf("File name: ");
  scanf("%s", file);
  fp = fopen(file, "r");
  ptr = (char **)malloc(3 * sizeof(char *));
  for(i = 0; i < 3; i++)
    ptr[i] = (char *)malloc(3 * sizeof(char *));
  return fp;
}//get grid

FILE *display_grid(int ar[3][4], FILE *fp)
{
  fprintf(fp, "%s", ar);
}//display grid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:40:07.260

您的代码存在一些逻辑问题：

1.  在`ptr[i] = (char *)malloc(3 * sizeof(char *));`中，**3**实际上应该是**4+4**。该数字是您的列数。在每一行中，您有 4 个数字，由 3 个空格分隔。那是 7 个字符（或列）。您还有一个尾随换行符。所以总共有8列。

2.  您没有从任何地方读取文件。

3.  正如 William Pursell 指出的那样，从评论中，您正在为本地数组分配内存`get_grid()`。分配的此内存主要不会影响您`ar[][]`。

4.  你说你需要将文件的内容打印到屏幕上，那你为什么要使用`fprintf(fp, "%s", ar)`？那只会将内容输出回您的输入文件。你可以`printf()`改为。

**解决方案：**

1.  改变

    `ptr[i] = (char *)malloc(3 * sizeof(char *));`

    进入

    `ptr[i] = (char *)malloc(8 * sizeof(char *));`

2.  在 in 的`for`循环中`get_grid()`，在为 分配内存之后`ptr[i]`，逐行读取文件的内容，如下所示：

    `fgets(ptr[i], sizeof(ptr[i]), fp);`

3.  现在您已经从文件中读取，在上述语句之后，更新您`ar`的如下：

* * *

```
/* Make sure you initialize 'p' and 'j' in the beginning */
char *p = strtok(ptr[i], " ");  /* This code gets the numbers from the */
do                              /* space-delimited array you have read from the file */
{                               /* Example: */
    ar[i][j] = atoi(p);         /* ptr[i]: "0 0 0 1" */
    j++;                        /* strtok(ptr[i], " ") will yield the first '0' */
} while(p = strtok(NULL, " ")); /* strtok(NULL," ") will continue where the previous */                 
                                /* strtok() left off */ 
```

* * *

最后，更改`display_grid()`如下：

* * *

```
int i, j;

for(i = 0; i < 3; i++)
{
    for(j = 0; j < 4; j++)
        printf("%d ", ar[i][j]);
    printf("\n");
} 
```

* * *

说了这么多，我必须指出几点：

*   `malloc`在 C 中不需要对调用进行类型转换。阅读[此](http://c-faq.com/malloc/mallocnocast.html)内容以获取更多信息。
*   您的代码中存在问题 - 如果您的行数和列数发生变化，您将难以跟上这些变化。我建议您`#define`使用您的行数和列数，并始终使用这些定义。
*   确保**在结束时释放分配的内存`display_grid()`**以避免内存泄漏情况。
*   您的代码中有几个未使用的变量。（它惹恼了像我这样挑剔的人。）
*   您不需要传递文件指针。只`get_grid()`必须有你的文件指针。当然，如果您的需求发生变化，请忽略此声明。

# math - c++中的算术表达式输入计算

> ID：14946751
> 
> 赞同：0
> 
> 时间：2013-02-18T22:50:42.153
> 
> 标签：math, expression

我总是要求用户输入`x`然后`y`计算结果。这是一个非常简单的例子：

```
int main()
{
int x,y;
cout << "Please enter x" <<endl;
cin >> x ;
cout << "please enter y" <<endl;
cin >> y;

int result = x + y ;
cout << result << endl;
return 0;
} 
```

但是如果用户输入完整的表达式呢？例如要求用户输入一个表达式，用户输入: `4+5`，我们可以直接计算并给出结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:10:30.417

我不会花时间重新发明轮子。我会为用户输入使用现有的脚本语言，我个人的选择是 lua，尽管许多其他语言都是可行的。

这大致就是您的应用程序使用 lua 作为解释器的样子。

```
#include "lua.h"
#include "lualib.h"
#include "lauxlib.h"

#include <string>
#include <iostream>

int main()
{
  using namespace std;
  string x,y;
  cout << "Please enter x" <<endl;
  cin >> x ;
  cout << "please enter y" <<endl;
  cin >> y;

  //TODO: You may want to check that they've entered an expression
  //
  lua_State * L = lua_open();

  // We only import the maths library, rather than all the available
  // libraries, so the user can't do i/o etc.

  luaopen_math(L);
  luaopen_base(L);

  // We next pull the math library into the global namespace, so that
  // the user can use sin(x) rather than math.sin(x).
  if( luaL_dostring(L,"for k,v in pairs(math) do _G[k] = v end") != 0)
  {
    std::cout<<"Error :"<<lua_tostring(L,-1)<<std::endl;
    return 1;
  }

  // Convert x to an integer
  x = "return "+x;
  if( luaL_dostring(L,x.c_str()) != 0 )
  {
    std::cout<<"Error in x :"<<lua_tostring(L,-1)<<std::endl;
    return 1;
  }
  int xv = lua_tointeger(L,-1);
  lua_pop(L,1);

  // Convert y to an integer
  y = "return "+y;
  if( luaL_dostring(L,y.c_str()) != 0 )
  {
    std::cout<<"Error in y :"<<lua_tostring(L,-1)<<std::endl;
    return 1;
  }
  int yv = lua_tointeger(L,-1);
  lua_pop(L,1);

  int result = xv + yv ;
  cout << result << endl;
  return 0;
} 
```

有了这个，您可以输入诸如`1+sin(2.5)*3`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:07:50.657

跟进迈克尔安德森的回答，使用我的 Lua 引擎的[ae](http://www.tecgraf.puc-rio.br/~lhf/ftp/lua/#ae)前端，代码的核心很简单

```
ae_open();
ae_set("x",x);
ae_set("y",y);
int result = ae_eval("x + y");
ae_close(); 
```

当然，有趣的部分是`ae_eval`从用户那里获取包含任意表达式输入的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T22:54:14.533

您应该实现中缀符号解析算法。

例如; [http://en.wikipedia.org/wiki/Shunting-yard_algorithm](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)

# c# - 在我的 Web 应用程序中获取一组图像？

> ID：14946752
> 
> 赞同：0
> 
> 时间：2013-02-18T22:50:48.507
> 
> 标签：c#, entity-framework, ef-code-first

当我需要一张图片时，我有这个：

```
[Column(TypeName = "image")]
public byte[] Photo
{ get; set; } 
```

但是当我需要多个时我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:54:59.750

使用数组或列表。

```
 public class Photo
    {
      public byte[] Binary { get; set; }
    }

     var list=new List<Photo>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:55:06.553

您需要将它们存储在自己的模型中并将其添加为关系，如下所示：

```
public class Photo
{
  public byte[] Binary { get; set; }
}

public class ModelWithPhotos
{
  public virtual IList<Photo> Photos { get; set; }
} 
```

# java - 在 java 中使用监视器时的困惑

> ID：14946753
> 
> 赞同：0
> 
> 时间：2013-02-18T22:50:56.003
> 
> 标签：java, synchronization

我试图了解您如何在 Java 中使用监视器。据我所知，Java 没有提供可以像使用二进制或计数信号量那样创建的监视器。既然是这样，当我看到人们这样做时，这到底意味着什么：

```
while(!B){ 
    x.wait(); 
} 
```

在这种情况下，x 究竟是什么？是他们构建的某个类模仿具有 wait() 方法的监视器操作吗？

为什么不这样做

```
while(!B){
    wait();
} 
```

? 是不是这样你就可以拥有多个显示器？如果是这样，为什么？在这一点上，您似乎还不如只使用信号量......

总的来说，我认为我的问题是真正了解显示器是什么以及如何正确使用它。我很感激你能给我的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:11:58.980

`wait()`是一种方法`java.lang.Object`。每个 Java 对象都有一个内在锁，称为监视器。

`x.wait()`等待变量引用的对象`x`。`wait()`等价于`this.wait()`，因此等待 . 引用的对象`this`。

也就是说，这`wait()`是一个非常低级且难以使用的抽象。您最好使用更高级别的抽象，如`Semaphore`Java 所具有的...。在 javadoc 中查看。

另请查看涵盖这些主题[的 Java 并发教程。](http://docs.oracle.com/javase/tutorial/essential/concurrency/)

# algorithm - 混合左加乘法器，用于有符号乘法的教科书算法

> ID：14946756
> 
> 赞同：0
> 
> 时间：2013-02-18T22:51:11.703
> 
> 标签：algorithm, assembly, multiplication

我正在尝试用汇编语言生成有效的扩展乘法。尽管我的代码运行良好，但有符号乘法存在一些问题。目前，我的数字是基于二补法的，我将我的数字转换为正数进行乘法，然后调整最终大小。它可以工作，但有点虚，因为它需要额外的副本。我打开了一本硬件书籍，发现了对有符号数运行良好的移位加法乘数。

因此，考虑到我使用 4 位数字作为输入，我得到了 8 位作为输出。我想用左移二进制乘法器进行乘法-3 * 3，我有：

```
 1101  // -3
               X     0011  // 3 
         -----------------------
         11111101 // I make the first x with sign extension
         1111101 // I make the a second x with sign extension,
         000000  // 0 no sign extension
         00000   // Later I will subtract this in case "of", as in book
         -----------------------
         11110111 <----------- final addition I get -9 OK it works 
```

因此，现在让我们采用教科书算法的混合解决方案，我将我的第一个数字 1101 分解为 11 和 01，并将 0011 分解为 00 和 11。如果我重写我的算法，正如我们在学校学到的：

```
 11 01
           00 11
           ---------------
           00 11  (unsigned mul 01 x 11 gives 00 11) , no sign extension
        10 01     (11 * 11  gives 10 01)                             
        --------------------
        10 01 11 (sum)
     11 10 01 11 (I made a sign extension until 8 bit)
     00 00 00 00 (the last multiplication only 0)
     -----------------------       
     11 10 01 11 (final sum) 
```

结论 11110111 != 11100111，我输了一点。

那么，铅在哪里？

最好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T00:30:45.233

你在做一些奇怪的事情。

有符号整数相乘的常用方法有以下几种：

1.  正如您所描述的，您可以首先将两个被乘数的绝对值相乘，然后如果预期乘积为负，则将其取反。

2.  您使用无符号乘法将整数相乘，然后如果一个被乘数为负，则从乘积的最高有效一半中减去另一个（然后对称地重复相同的操作，检查另一个被乘数是否小于 0，等等）。

3.  您使用[布斯算法](https://stackoverflow.com/a/8192347/968261)。

# wpf - 视图模型中的方法未在 MVVM 中被调用/到达 - （无法获取字段的值）

> ID：14946760
> 
> 赞同：0
> 
> 时间：2013-02-18T22:51:35.177
> 
> 标签：wpf, mvvm

**如果有对此类问题的回答，请告诉我，然后我将删除它。我没有找到或者我没有使用正确的关键字。我很乐意将其删除，只需将 URL 发布给我即可。

编辑：在调试过程中我注意到了这一点：

> insertCommand = 无法获取字段“insertCommand”的值，因为有关包含类的信息不可用。

我正在编写一个非常简单的 MVVM 项目，在该项目中我将一个按钮绑定到 ViewModel 中的一个方法。

我在 ViewModel 中创建了一个命令对象

```
private ICommamand InsertCommand; 
```

然后

```
 public ICommand insertCommand
    {
        get
        {
            if (this.insertCommand == null)
                this.insertCommand = new RelayCommand(() => this.AddStudent(), () => this.CanAddStudent());

            return this.insertCommand;
        }
    } 
```

另外，请注意

```
 private void AddStudent()
    {
        //do something here

    } 
```

当然，默认情况下 CanAddStudent 返回 true 并且在我的视图中

```
 <Button x:Name="btnShow" Content="Show" Command="{Binding InsertCommand}" .... 
```

然而，它不会被触发。我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T23:53:07.697

问题是您公开的公共属性名为“insertCommand”，并且您绑定到已设为私有的“InsertCommand”。

将您的绑定更改为`<Button x:Name="btnShow" Content="Show" Command="{Binding insertCommand}" />`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:56:28.247

`Command`在 win8 RT 中不能开箱即用。你必须通过行为。

[例如，所有这些在这里](http://blog.tattoocoder.com/2012/08/getting-started-w-windows-8-mvvm-light.html)都得到了很好的解释。

如果您需要更多涉及的答案，您也可以参考[这篇 SO 帖子。](https://stackoverflow.com/questions/12020559/missing-eventtocommand-behaviour-in-mvvmlight-for-windows-8-work-around)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T01:37:56.360

问题出在我编写的 ViewModel 构造函数中。我将一个值传递给未正确初始化且无法访问的构造函数。

在调试代码并放置几个 Add Watches 后注意到此消息：

*insertCommand = 无法获取字段“insertCommand”的值，因为有关包含类的信息不可用。*

我要感谢 nzic 推荐 snoop 来调试 xaml。

谢谢。

# algorithm - scala 函数式快速排序

> ID：14946764
> 
> 赞同：0
> 
> 时间：2013-02-18T22:52:09.087
> 
> 标签：algorithm, scala, functional-programming, quicksort

在本书[http://www.scala-lang.org/docu/files/ScalaByExample.pdf](http://www.scala-lang.org/docu/files/ScalaByExample.pdf)的第 2 章中，M. Odersky 编写了以下快速排序的实现

```
def sort(xs: Array[Int]): Array[Int] = {
 if (xs.length <= 1) xs
 else {
 val pivot = xs(xs.length / 2)
  Array.concat(
   sort(xs filter (pivot >)),
   xs filter (pivot ==),
   sort(xs filter (pivot <)))
 }
} 
```

并说“命令式和函数式实现都具有相同的渐近复杂度——在平均情况下为 O(N log (N))” 但看起来不是，因为我们两次应用过滤谓词来分区数组。在经典的命令式版本中，我们对数组使用一个循环。那么功能实现的运行时间是 O(N log (N)) 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T22:56:53.607

`filter`本身有 O(n) 和 O(3n) = O(n)，因为 3 是一个常数因子。不管 n 有多大，filter 只会被调用 3 次。

**编辑**：过滤器被调用 3 次

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T01:23:36.720

Quicksort and many other divide-and-conquer algorithms work by doing at most `O(n)` work for no more than `O(log(n))` passes over the data. At each step we divide the data approximately in half, so that means we do indeed have only `log2(n)` passes through the data (one where it's not divided, one where it's divided approximately in half, etc.).

Then you just have to check that each pass through the data takes no more than `O(n)` time. filter is `O(n)`, and we filter three times; plus `concat` is `O(n)` and we do it once. Thus we do `4*O(n)` work, which is `O(n)`.

It's not the most efficient algorithm because of all the passes over the same data, but it is the right order.

# codeigniter - CodeIgniter：无循环地插入多条记录

> ID：14946766
> 
> 赞同：31
> 
> 时间：2013-02-18T22:52:26.700
> 
> 标签：codeigniter, activerecord, codeigniter-2

可以在 CodeIgniter Active Record 中使用多个 INSERT 记录，而无需 for、foreach 等。

我当前的代码：

```
foreach($tags as $tag) {
    $tag = trim($tag);
    $data = array(
        'topic_id'  =>  $topic_id,
        'user_id'   =>  $user_id,
        'text'      =>  $tag
    );
    $this->db->insert('topic_tags', $data);
} 
```

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-02-18T23:08:11.327

Codeigniter 活动记录具有`insert_batch`我认为您需要的功能

```
$data = array(
   array(
      'title' => 'My title' ,
      'name' => 'My Name' ,
      'date' => 'My date'
   ),
   array(
      'title' => 'Another title' ,
      'name' => 'Another Name' ,
      'date' => 'Another date'
   )
);

$this->db->insert_batch('mytable', $data); 

// Produces: INSERT INTO mytable (title, name, date) VALUES ('My title', 'My name', 'My date'), ('Another title', 'Another name', 'Another date') 
```

适用于 Codeigniter 3.x 和 Codeigniter 2.2.6

**更新的链接**

[Codeigniter 3.x 的 insert_batch()](http://www.codeigniter.com/user_guide/database/query_builder.html?highlight=active%20record#inserting-data)

[Codeigniter 2.x 的 insert_batch()](https://codeigniter.com/userguide2/database/active_record.html#insert)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-14T09:59:20.263

对于 CodeIgniter 4x 使用`$builder->insertBatch()`

```
$data = [
    [
            'title' => 'My title',
            'name'  => 'My Name',
            'date'  => 'My date'
    ],
    [
            'title' => 'Another title',
            'name'  => 'Another Name',
            'date'  => 'Another date'
    ]
];

$builder->insertBatch($data);
// Produces: INSERT INTO mytable (title, name, date) VALUES ('My title', 'My name', 'My date'),  ('Another title', 'Another name', 'Another date') 
```

[资源](https://www.codeigniter.com/user_guide/database/query_builder.html?highlight=insertBatch#inserting-data)

# c++ - Boost 正则表达式拆分遗漏了最后一句话

> ID：14946768
> 
> 赞同：0
> 
> 时间：2013-02-18T22:52:39.823
> 
> 标签：c++, regex, boost

我正在尝试使用 Boost::regex 将句子拆分为单个单词。但它没有打印最后一个字。有什么想法有什么问题吗？

代码是：

```
#include <iostream>
#include <boost/regex.hpp>
using namespace std;
using namespace boost;

int main() {
smatch matchResults;
regex whiteChars("(.*?)[\\s]");
string p = "This is a sentence";
for(string::const_iterator sit = p.begin(), sitend = p.end(); sit != sitend;)
{
    regex_search(sit, sitend, matchResults, whiteChars);
    if(matchResults[1].matched)
        cout << matchResults[1] << endl;
    sit = matchResults[0].second;
}
return 0;
}

Output: 
This 
is 
a
Expected Output: 
This 
is 
a
sentence 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:53:39.303

你的最后一个词后面跟着`$`and not `\\s`，所以你当前的正则表达式 -`"(.*?)[\\s]"`不会匹配它。

你可以试试这个：

```
"(.*?)(?:\\s|$)" 
```

甚至更好，这也可能有效：

```
([^\\s]*)  // Just get all the non-space characters. That is what you want 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:30:16.127

```
std::regex rgx("\\s");
std::string p("This is a sentence");
std::regex_token_iterator current(p.begin(), p.end(), rgx, -1);
std::regex_token_iterator end;
while (current != end)
    std::cout << *current++ << '\n'; 
```

这也应该适用于 Boost 的正则表达式。我还没有编写该代码，因为我不了解 Boost 的详细信息。

# php - $.post 不更新 php 变量

> ID：14946769
> 
> 赞同：0
> 
> 时间：2013-02-18T22:52:43.800
> 
> 标签：php, jquery, mysql

我正在尝试为我的图像站点创建一个喜欢功能，以便用户可以喜欢或不喜欢图像......他们从主页开始，在那里他们可以看到图像的缩略图。一旦他们点击缩略图，他们就会被带到 viewimage.php 以查看完整尺寸。他们可以喜欢那里。

问题是，相关的 $imgid 没有被更新，所以一旦你加载 viewimage.php，我就被那个 $imgid 困住了，因此相关的总喜欢。

**homepage.php：**包含每个全尺寸图像的小缩略图。如您所见，如果他们单击缩略图，则发送到 viewimage.php 的参数之一是 $row['id']，我通过 $_GET 获得。

```
while ($row = $catResult->fetch_assoc()) {
   ...
   echo '<a href=".?action=viewimage&site='.$site. '&id=' . $row['id'] .'"><img src ... /></a>'
   ...
} 
```

**viewimage.php**单击缩略图后，它们会在 viewimage.php 上显示完整尺寸的图像。用户可以通过按左右箭头来导航图像...这将修改设置为服务器端 $imgid 的 javascript 变量“imgIndex”。

```
$imgid = $_GET['id']; 

include './scripts/keyinput.php'; 

$newID = $_POST['_postID'];
echo $newID; 
```

**keyinput.php**包含在 viewimage.php 中的 Javascript。在这个代码片段中，当用户按下右箭头时，$post 应该改变服务器端的 $imgid，但事实并非如此。

```
<script type="text/javascript">
  var imgArray = [<?php echo implode(',', getImages($site)) ?>];
  var imgIndex = <?php echo $imgid ?>;

  $(document).ready(function() {

     $(document).keydown(function (e) {
         if (key == rightarrow) { 
             imgIndex++;
             $.post('./templates/viewimage.php', { _postID : imgIndex });
         }
         ...
    });
</script>

<?php
function  getImages($siteParam) {
include 'dbconnect.php';
if ($siteParam == 'artwork') { 
    $table = "artwork"; 
}       
else { 
    $table = "comics"; 
}   

$catResult = $mysqli->query("SELECT id, title, path, thumb, views, catidFK FROM $table");   
$img = array();
while($row = $catResult->fetch_assoc()) 
{
    $img[] = "'" . $row['path'] . "'";
}
return $img;
}
?> 
```

它给了我一个错误：`Undefined index: _postID in C:\wamp\www\HTwS\templates\viewimage.php on line 16`

为什么keyinput.php 上的$.post 函数不能将更新的imgid 发送回viewimage.php？

谢谢！

# c# - 用于在 C#.net 后面的代码中发送短信的换行符

> ID：14946774
> 
> 赞同：5
> 
> 时间：2013-02-18T22:53:04.437
> 
> 标签：c#

短信以单个字符串的形式出现，我想将文本分成不同的行，但似乎没有换行符可以解决问题。

sdr.Read();

```
 PrisonerStatus = sdr.GetString(0);
                        LastName = sdr.GetString(1);
                        MiddleName = sdr.GetString(2);
                        FirstName = sdr.GetString(3);
                        Gender = sdr.GetString(4);
                        DateOfBirth = sdr.GetString(5);
                        Genotype = sdr.GetString(6);
                        BloodGroup = sdr.GetString(7);
                        DateOfCommittal = sdr.GetString(8);
                        DateOfNaturalExpirationOfSentence = sdr.GetString(9);
                        ActualDateOfRelease = sdr.GetString(10);
                        CellInfo = sdr.GetString(11);
                        Color = sdr.GetString(12);
                        TribeOrCountryOfOrigin = sdr.GetString(13);

                        sdr.Close();

                        if (tokens[2] == "details")
                        {
                            //This is where i need the formating so sms receiver sees it as shown below
                            //PS. Using Ozeki Message server
                            message = "PrisonerID : " + prisonID + '\n' +
                                      "Full Name : " + LastName + " " + MiddleName + " " + FirstName + '\n' +
                                      "Gender : " + Gender;

                            SendToOutbox(message);
                        }
                        else
                        {
                            message = "Unknown transaction code";
                            output.UpdateDisplay("Error :" + message);
                            SendToOutbox(message);
                            goto Label_021C;
                        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T11:52:38.087

这应该工作，使用`"`而不是`'`

```
message = "PrisonerID : " + prisonID + "\n" +
          "Full Name : " + LastName + " " + MiddleName + " " + FirstName + "\n" +
          "Gender : " + Gender; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:43:53.830

使用此代码：

注意：**@"\0x0A"**

```
message = "PrisonerID : " + prisonID + @"\0x0A" +
"Full Name : " + LastName + " " + MiddleName + " " + FirstName + @"\0x0A" +
"Gender : " + Gender; 
```

# css - 在居中的网页中居中页面内容 div

> ID：14946776
> 
> 赞同：-1
> 
> 时间：2013-02-18T22:53:03.633
> 
> 标签：css, xhtml

请记住，这个问题可能已经以多种形式提出。我只是似乎没有得到它。我想在一个居中的网页中居中标头、顶部导航、页面内容和页脚 div。我是新手，这让我很生气，你知道吗。我到底需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:00:53.070

将所有内部 div 包装在另一个 div 中。通常称为/分类容器或包装器。

然后在容器/包装器上设置宽度并将边距“归零”。

```
<div class="container">
   <!-- all of your site in here -->
</div>

.container {
width:960px;
margin:0 auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T23:07:22.933

你应该使用这样的东西：

```
 .wrapper{
                margin:0 auto;
                width:960px;
} 
```

这会将 div 的顶部和底部的边距设置为 0，并将左右的边距设置为 auto。

# emacs - Emacs 模式特定键绑定 - 符号作为变量的值是 void 错误

> ID：14946778
> 
> 赞同：0
> 
> 时间：2013-02-18T22:53:07.150
> 
> 标签：emacs, keyboard-shortcuts

我试图设置 rst-mode 特定的键绑定，例如：

```
(eval-after-load "rst-mode"
      (define-key rst-mode-map (kbd "<f5>") 
                (lambda ()
                  (interactive)
                  (shell-command "make html")))) 
```

但我得到：

```
Symbol's value as variable is void: rst-mode-map 
```

编辑：感谢帮助，我得到了以下工作版本：

```
(eval-after-load "rst"
  '(progn 
     (define-key rst-mode-map (kbd "<f5>") 
       (lambda ()
         (interactive)
           (shell-command (concat "make " "html")))))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:57:53.520

`eval-after-load`需要引用的表格：

```
(eval-after-load "rst-mode"
  '(define-key ...)) 
```

（否则您将*立即*评估表单，而不是在加载 rst-mode 之后。）

# c++ - 从（成员）函数推断类型

> ID：14946780
> 
> 赞同：0
> 
> 时间：2013-02-18T22:53:10.420
> 
> 标签：c++, c++11, template-meta-programming

有没有一种简单的方法来推断成员函数的“类型”？我想推断以下（成员）函数的类型：

```
struct Sample {
  void func(int x) { ... }
};

void func(int x) { ... } 
```

到以下类型（用于`std::function`）：

```
void(int) 
```

我正在寻找一个支持变量计数（不是可变参数！）的解决方案......

**编辑 - 示例：**

我正在寻找一个类似于`decltype`- 让我们称之为`functiontype`- 具有以下语义的表达式：

```
functiontype(Sample::func) <=> functiontype(::func) <=> void(int) 
```

`functiontype(expr)`应评估为与 兼容的类型`std::function`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T23:02:31.897

这有帮助吗？

```
#include <type_traits>
#include <functional>

using namespace std;

struct A
{
    void f(double) { }
};

void f(double) { }

template<typename T>
struct function_type { };

template<typename T, typename R, typename... Args>
struct function_type<R (T::*)(Args...)>
{
    typedef function<R(Args...)> type;
};

template<typename R, typename... Args>
struct function_type<R(*)(Args...)>
{
    typedef function<R(Args...)> type;
};

int main()
{
    static_assert(
        is_same<
            function_type<decltype(&A::f)>::type, 
            function<void(double)>
            >::value,
        "Error"
        );

    static_assert(
        is_same<
            function_type<decltype(&f)>::type, 
            function<void(double)>
            >::value,
        "Error"
        );
} 
```

# c# - 显示并抓取 DropDownList 中列出的值

> ID：14946784
> 
> 赞同：1
> 
> 时间：2013-02-18T22:53:33.173
> 
> 标签：c#, asp.net-mvc, html-helper

我的控制器类；

在以下示例`returnAllHuman();`中将返回 `List<SelectListItem>`

```
public ActionResult Index()
    {
        var list = returnAllHuman(); // List<SelectListItem>

        ViewData["all_Human"] = list;
        return View();

    } 
```

在视图中

```
 @Html.DropDownList("all_Human") 
```

1.) 值不显示

2.) 我需要获取选定的值并将其显示在文本字段中。我怎样才能做到这一点 ？

更新：我从下面的代码中删除了异常处理部分

```
 public List<SelectListItem> returnAllHuman()
    {
        var i = new List<SelectListItem>();

            using (SqlCommand com = new SqlCommand("SELECT * FROM Names", con))
            {
                con.Open();
                SqlDataReader s = com.ExecuteReader();

                while (s.Read())
                {
                    i.Add(new SelectListItem
                    {
                        Value = s.GetString(0), 
                        Text = s.GetString(1)  
                    });
                }

                           con.Close();

        return i;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T23:04:54.173

首先定义一个视图模型：

```
public class MyViewModel
{
    [Required]
    public string SelectedHuman { get; set; }
    public IEnumerable<SelectListItem> AllHumans { get; set; }
} 
```

然后让你的控制器填充这个模型并传递给视图：

```
public class HomeController: Controller
{
    public ActionResult Index()
    {
        var model = new MyViewModel();
        model.AllHumans = returnAllHuman(); // List<SelectListItem>
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        if (!ModelState.IsValid)
        {
            // there was a validation error => for example the user didn't make
            // any selection => rebind the AllHumans property and redisplay the view
            model.AllHumans = returnAllHuman();
            return View(model);
        }

        // at this stage we know that the model is valid and model.SelectedHuman
        // will contain the selected value
        // => we could do some processing here with it
        return Content(string.Format("Thanks for selecting: {0}", model.SelectedHuman));
    }
} 
```

然后在您的强类型视图中：

```
@model MyViewModel
@using (Html.BeginForm())
{
    @Html.DropDownListFor(x => x.SelectedHuman, Model.AllHumans, "-- Select --")
    @Html.ValidationFor(x => x.SelectedHuman)
    <button type="submit">OK</button>
} 
```

# javascript - 为什么从 Javascript 中的现有对象创建新的 Date() 对象不保留毫秒字段？

> ID：14946786
> 
> 赞同：0
> 
> 时间：2013-02-18T22:53:42.393
> 
> 标签：javascript, google-chrome

为什么以下代码导致 minDate 的毫秒数为零？

```
maxDate = new Date(2013,0,1,0,0,1,200);
minDate = new Date(maxDate.getTime()); 
```

如果这有什么不同，我正在 Chrome 中查看这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T23:04:46.010

`minDate`毫秒不为零。毫秒在那里`maxDate`并进入`minDate`：

```
maxDate = new Date(2013,0,1,0,0,1,200);
console.log(maxDate.getMilliseconds());
minDate = new Date(maxDate.getTime());
console.log(minDate.getMilliseconds()); 
```

输出：

```
200
200 
```

演示：http: [//jsfiddle.net/Guffa/2FCvz/](http://jsfiddle.net/Guffa/2FCvz/)

# html - 自定义滚动条 Internet Explorer 问题

> ID：14946789
> 
> 赞同：0
> 
> 时间：2013-02-18T22:53:52.993
> 
> 标签：html, css, webkit

我有一个由代码完成的自定义滚动条，[如下所示](http://jsfiddle.net/tKfJs/)：

```
::selection {
    background: #333;
    color: #FFF;
}
::-webkit-scrollbar {
    width: 9px;
}
::-webkit-scrollbar-track {
    background:#eee;
    border: thin solid lightgray;
    box-shadow: 0px 0px 3px rgba(0, 0, 0, 0.1) inset;
}
::-webkit-scrollbar-thumb {
    background:#999;
    border: thin solid gray;
} 
```

它在 Chrome、Firefox 上运行良好……但在**Internet Explorer**上不起作用 我应该添加什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T23:31:58.107

指定的 CSS 只会在 Chrome 和 Safari 等 webkit 浏览器上应用自定义滚动条。Internet Explorer 仅支持有限数量的滚动条自定义。请参阅[MSDN 参考](http://msdn.microsoft.com/en-us/library/ff974092%28v=vs.85%29.aspx)和这个[IE 滚动条 CSS 生成器](http://www.spectrum-research.com/V2/projects_scrollbar_generator.asp)。

此外，Firefox 不支持自定义滚动条（[错误报告](https://bugzilla.mozilla.org/show_bug.cgi?id=77790)），所以我不确定您的 CSS 在 Firefox 中是如何工作的——它不适合我。

如果您愿意，您可以使用基于 JavaScript 的[jScrollPane](http://jscrollpane.kelvinluck.com/)在所有浏览器中实现自定义滚动条，但请注意，很多人讨厌 JavaScript 滚动条的用户体验，包括我自己。

# mysql - 将新数据导入主数据库与临时数据库？

> ID：14946790
> 
> 赞同：0
> 
> 时间：2013-02-18T22:53:55.083
> 
> 标签：mysql, database, database-design

我正在为一个新项目设计一个 MySQL 数据库。我将每天导入 50-60 MB 的数据。

将有一个带有主键的主表。然后将有具有自己的主键和指向主表的外键的子表。

新数据必须从一个巨大的文本文件中解析出来，然后在导入主数据库之前进行一些小的操作。解析和导入操作可能涉及大量故障排除，因此我想将新数据导入临时数据库并确保其完整性，然后再添加到主数据库。

出于这个原因，我最初想每天将新数据解析并导入到一个单独的临时数据库中。通过这种方式，我可以在添加到主数据库之前检查数据，同时我可以将每天的数据存储为一个单独的数据库，以便以后需要从各个临时数据库重建主数据库。

我正在考虑在 InnoDB 引擎中使用主键/外键，以保持跨表的关系完整性。这意味着当我每天导入新数据时，我必须担心自动增量 ID（主键）没有任何重复。

那么，在这种情况下，什么是最好的呢？

1.  制作master的副本，每天直接导入master的副本。用新副本替换现有母版。

2.  每天将新数据导入临时数据库，但将主键的自增起始值更改为大于主键中的最大值。然后我还会更改所有表（主表及其子表）的主键的自动增量值吗？

3.  每天将新数据导入临时数据库，无需担心主键值。找到其他方法将临时数据库与主数据库合并而不会发生主键冲突？如果使用此策略，如何在确保与子表的所有关系保持正确的同时更新主表中的主键以获取新数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:20:15.937

我不确定这是否像您制作的那样复杂？

为什么不这样做：

1.  将原始数据导入临时表（为什么它必须是一个单独的数据库？）
2.  Run your transformations/integrity checks on the temporary table.
3.  When the data is good, insert it directly into the master table.
4.  Use auto incrementing ids on the master table that are *not* dependent on your data being imported. That allows you to have a unique id *and* the original ids that might have existed in your import.
5.  Add a field to your master table(s) that gives you a record of which import the records came from.
6.  In addition to copying the data to your master table, make a log that ties back to the data you merged. Helps you back out the data if you find it's wrong/bad and gives you an audit trail.

In the end just set up a sandbox database, write a bunch of stored procedures and test the crap out of it. =)

# file - 使用 MULE 按顺序读取文件

> ID：14946798
> 
> 赞同：1
> 
> 时间：2013-02-18T22:54:33.770
> 
> 标签：file, mule

我在 Mule 中使用文件入站端点来处理来自一个目录的文件，并在处理后将文件移动到另一个目录。我遇到的问题是，有时“传入目录”中有很多文件，当 MULE 启动时，它会尝试同时处理它们。这对流中访问和更新的数据库没有好处。文件是否可以按顺序读取，无论顺序如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T23:00:56.447

将流处理策略设置为同步，以确保文件轮询器线程在流中得到调动。

```
<flow name="filePoller" processingStrategy="synchronous"> 
```

最重要的是，不要在流下游使用任何`<async>`块或`one-way`端点，否则，另一个线程池将启动，导致潜在的（并且不适合您的用例）并行处理。

# python - Python中的递归

> ID：14946803
> 
> 赞同：0
> 
> 时间：2013-02-18T22:54:49.133
> 
> 标签：python, recursion

问题是关于编写一个递归函数“def EhMensuravel (target, weight)”，它确定是否可以在双盘天平上使用给定的一组权重来测量所需的目标值。可用的权重存储在“权重”列表中。请记住，砝码可以放在目标砝码所在的盘子的对面，也可以放在目标砝码的同一盘子上或不使用。

我做的代码是这样的，但是有问题。

```
weights = [1, 2, 3]
matrix = []

def createaMatrix():
    for i in range(len(weights)):
        matrix.append([])
    for j in range(3):
        for i in range(len(weights)):
            if j==0:
                matrix[j].append(weights[i])
            if j==1:
                matrix[j].append(-weights[i])
            if j==2:
                matrix[j].append(0)

createMatrix()

def EhMensuravel(entry, weights, final_weight=0):
    if final_weight == entry:
        return True
    for j in range(3):
        for i in range(len(weight)):
            final_weight += matrix[i][j]
            return EhMensuravel(entry, weight[1:], final_weight) 
```

编辑：例如，当我尝试`print EhMensuravel(4, weights)`时，输出是：

```
>>> 
1
2
3
None
>>> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:34:46.623

即使没有这样的全局矩阵，您也可以使递归非常简单

```
weights = [1, 2, 3]

def EhMensuravel(entry, weights, weight_idx = 0):
    if entry == 0:
        return True

    if weight_idx == len(weights):
        return False

    if EhMensuravel(entry + weights[weight_idx], weights, weight_idx+1):
        return True

    if EhMensuravel(entry - weights[weight_idx], weights, weight_idx+1):
        return True

    if EhMensuravel(entry, weights, weight_idx+1):
        return True

    return False

print EhMensuravel(4, weights) 
```

第一个 if 语句只是说 0 是可测量的。第二个 if 只是确保还有权重。接下来的 3 次递归调用只是`entry`通过添加、减去或忽略当前权重来更新当前权重，并从下一个权重重新开始搜索。如果没有找到解决方案，则返回 False。

# ruby-on-rails - 如何在 Ruby on Rails 中为三个表使用连接？

> ID：14946809
> 
> 赞同：0
> 
> 时间：2013-02-18T22:55:02.503
> 
> 标签：ruby-on-rails, postgresql, join, pg-search

我正在开发一个 Ruby on Rails 应用程序，该应用程序已经具有使用 pg_search 和模型上的其他两个字段进行文本搜索的逻辑。该逻辑从搜索结果创建一个“数组”行。我不记得它的实际名称，因为从技术上讲这不是一个数组。它是选定行的实例变量。我想从另外两个模型中添加搜索条件。我的数据库是 PostgreSQL。

这是所有三个模型定义的子集：

MediaLibrary：名称、media_creator_id、media_type_id（当前搜索中使用的字段；有很多 media_topics 和很多 media_targets）

MediaTopic：media_library_id，topic_id（要搜索topic_id；属于media_library；正在搜索的topic_id来自一个Topic模型（id，name））

MediaTarget：media_library_id，target_id（要搜索target_id；属于media_library；正在搜索的target_id来自一个Target模型（id，name））

我想如果主题和目标都与其他三个搜索条件一起被搜索，我应该能够做这样的事情。我还需要在结果中包含 topic_id 和 target_id，以便我可以在视图中显示 Topic.name 和 Target.name。

```
@media_libraries = MediaLibrary.text_search(params[:query]).where("media_creator_id = ? AND media_type_id = ?", params[:media_creator_id].to_i, params[:media_type_id].to_i).joins(:media_topics.where("media_library_id = ? and topic_id = ?", id_from_media_library_row, params[:topic_id].to_i).joins(:media_targets.where("media_library_id = ? and target_id = ?", id_from_media_library_row, params[:target_id].to_i) 
```

我在 postgresql.org 和 Stack Overflow 上进行了搜索，但没有发现任何人都回答了使用 Ruby on Rails 连接三个表的任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:42:06.230

您可以将 SQL 连接语句传递到`#joins`. 我不确定您的情况是什么，但您可以执行以下操作：

```
@media_libraries = MediaLibrary.joins(%q(
  JOIN media_targets
    ON media_targets.media_library_id = media_libraries.id
  JOIN media_topics
    ON media_topics.media_library_id = media_libraries.id
)).text_search(params[:query])
  .where(
    media_libraries: {
      media_creator_id: params[:media_creator_id],
      media_type_id: params[:media_type_id]
    },
    media_topics: { id: params[:topic_id] },
  ) 
```

# ios - 根据用户是否登录来管理 iOS 应用 UI 状态

> ID：14946811
> 
> 赞同：3
> 
> 时间：2013-02-18T22:55:13.477
> 
> 标签：ios, session, user-interface

我有一个应用程序，它在首次启动时显示登录屏幕。当用户登录时，我给他们一个保持登录状态的选项。这会在我的服务器上建立一个到期的会话。做以下事情的最合适的方法是什么：

1.  存储用户是否登录。
2.  根据用户会话的有效性，在应用程序启动时向用户提供登录或注销选项。
3.  如果他们选择注销（或者他们的会话已过期），则结束他们当前的会话。

我猜这是一种常见的设计模式，应该有经过尝试和测试的方法来做到这一点，但我似乎使用了错误的术语进行搜索，因为我没有找到令人满意的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:02:32.880

一些想法：

1.  我建议您将敏感的会话信息存储在应用程序的 KeyChain 中。我不会在这里存储用户是否登录的状态，只需将其存储在内存中。当会话停止存在或用户已注销时，您的 Web 服务应该能够返回错误。
2.  如果后端确定会话的有效性，那么您应该有一个 RESTful 调用，您可以在其中传递会话信息，返回会话是否仍然有效。
3.  同样，如果他们选择注销，那么您可以再次调用您的后端传递会话信息。

对于钥匙串，请使用 Apple 示例中的[KeychainItemWrapper](http://developer.apple.com/library/ios/#samplecode/GenericKeychain/Listings/Classes_KeychainItemWrapper_m.html)。

# ruby-on-rails - RoR ActiveRecord :through 是向后执行连接 - 我的关系不好吗？

> ID：14946813
> 
> 赞同：0
> 
> 时间：2013-02-18T22:55:31.850
> 
> 标签：ruby-on-rails, rails-activerecord

我有三个表：Devices、Actions 和 ActionTypes。ActionTypes 是一个查找表 - 只有名称和 ID。以下是关系：

**设备**

```
has_many :actions
has_many :action_types, :through => :actions
has_many :tasks 
```

**行动**

```
belongs_to :device
has_one :action_type 
```

**动作类型**

```
has_many :actions
has_many :devices, :through => :actions 
```

我对 Rails 很陌生，所以我觉得这些关系不正确 - 我的目标是能够使用类似 @device.action_types 的东西，这几乎是在做的，但这是它在这种情况下生成的 SQL ：

```
SELECT "action_types".* FROM "action_types" INNER JOIN "actions" ON "action_types"."action_id" = "actions"."id" WHERE "actions"."device_id" = 1 
```

这将是完美的，除了它应该加入 action_types.id = actions.action_type_id 。没有 actiontypes.action_id （不应该有），而且我知道 AR 正在寻找它是因为我的人际关系......我只是不确定哪一部分是错误的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:07:30.617

如果您希望表操作具有 action_type_id，那么您的模型操作需要：

`belongs_to :action_type`

一个有用的资源是关于关联的 Rails 指南：[这里](http://guides.rubyonrails.org/association_basics.html)

# c# - 无法处理来自 ListView 项（标签）的 MouseDown 事件

> ID：14946816
> 
> 赞同：1
> 
> 时间：2013-02-18T22:55:51.563
> 
> 标签：c#, wpf, events

我有一个列表视图，我正在通过代码填充标签。当用户单击我要处理 MouseDown 事件的标签时，它不会触发。预览鼠标按下确实会触发。

我知道这里有一些关于路由/冒泡事件的内容，我猜这会解决我遇到的问题，这是我尚未掌握的概念。

我不能使用预览事件，因为它不包含我需要的对象（直到第二次单击标签才分配标签信息，所以我假设我需要 MouseDown 而不是预览）

珍惜你的时间。

**XAML**

```
 <telerik:RadTabItem x:Name="Media" Header="Media" Height="22" Width="100">
                <Grid x:Name="ListboxMedia">

                    <ListView x:Name="ListViewImages" HorizontalAlignment="Left" Height="303" Margin="697,10,0,0" VerticalAlignment="Top" Width="178" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Auto" IsTabStop="True" TabIndex="3" MouseDown="ListViewImages_MouseDown" PreviewMouseDown="ListViewImages_PreviewMouseDown">
                        <ListView.View>
                            <GridView>
                                <GridViewColumn x:Name="ListViewImageColumn" Header="Images" Width="178" />
                            </GridView>
                        </ListView.View>
                    </ListView>

                    <Button x:Name="BtnUpload" Content="Upload" Height="24" Margin="809,318,38,0" VerticalAlignment="Top" Click="BtnUpload_Click"/>
                    <Button x:Name="BtnDownload" Content="Download" Height="24" Margin="728,318,109,0" VerticalAlignment="Top"/>
                    <Image x:Name="ImageViewPort" HorizontalAlignment="Left" Height="293" Margin="21,20,0,0" VerticalAlignment="Top" Width="581"/>
                </Grid>

            </telerik:RadTabItem> 
```

**将标签填充到 ListViewImages 中的方法**

```
 void PopulateMedia()
        {
            var collectImages = new Media().CollectMediaForAsset(_assetId);

            int i = 1;

            foreach (var collectImage in collectImages)
            {
                var label = new Label();
                label.Tag = collectImage.FileName;
                label.Content = "Image" + i.ToString();
                ListViewImages.Items.Add(label);                
                i++;
            }
        } 
```

**处理程序**

```
 private void ListViewImages_MouseDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
        {
            Debug.WriteLine("Clicked Down"); //does not work

        }

        private void ListViewImages_PreviewMouseDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
        {
            Debug.WriteLine("Clicked Preview"); //works

        } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-02T20:39:02.327

Used selection changed event instead

# c - 从一个txt文件中读取两个矩阵

> ID：14946817
> 
> 赞同：1
> 
> 时间：2013-02-18T22:55:59.480
> 
> 标签：c

我在完成一项任务时遇到了麻烦。

我需要从文本文件中读取两个矩阵并将它们相乘。

问题是我知道如何读取一个矩阵，但我不明白如何读取文件中由两个空格分隔的两个矩阵（例如）。

矩阵.txt：

```
1 2 3  1 2 3
4 5 6  4 5 6
7 8 9  7 8 9 
```

也许有人可以解释我如何做到这一点。

现在我正在尝试读取第一个矩阵：

```
#include <stdlib.h>
#include <stdio.h>

int main(){
FILE *fp;
int eSk = 0, sSk = 0,
matrix1[10][10] = {0}, i, j;
char c;
fp = fopen("matrix.txt", "r+");
while(!feof(fp)) {
    while(getc(fp) != ' ') {
         fscanf(fp, "%d", &matrix1[eSk][sSk]);
         sSk++;
    }
    eSk++;
}

for(i = 0; i < eSk; i++) {
      for(j = 0; j < sSk; j++) {
            printf("%d ", matrix1[eSk][sSk]);
      }
      printf("\n");
}

puts("");

system("pause");
return 0;
} 
```

怎么了 ？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:26:42.710

您需要在阅读第一个矩阵时跳过第二个矩阵，反之亦然。尝试这个：

```
#include <stdio.h>
#include <stdlib.h>

int main(void) {
  FILE *file;
  int matrixA[3][3], matrixB[3][3];
  int garbage[3];
  int i, j, k;

  i = j = k = 0;
  file = fopen("matrix.txt", "rt");

  /* Read the first matrix */
  for (i = 0; i < 3; i++) {
     for (j = 0; j < 3; j++) {
        fscanf(file, "%d", &matrixA[i][j]);
     }
     /* Skip the second matrix */
     for (k = 0; k < 3; k++) fscanf(file, "%d", &garbage[k]);
  }

  /* Reposition the stream */
  fseek(file, 0, SEEK_SET);

  /* Read the second matrix */
  for (i = 0; i < 3; i++) {
     /* Skip the first matrix */
     for (k = 0; k < 3; k++) fscanf(file, "%d", &garbage[k]);      
     for (j = 0; j < 3; j++) {
        fscanf(file, "%d", &matrixB[i][j]);
     }
  }

  /* Multiply them ... */

  /* Show first matrix */
  for (i = 0; i < 3; i++) {
     printf("\n");
     for (j = 0; j < 3; j++) {
        printf(" %d ", matrixA[i][j]);
     }
  }
  printf("\n");

  /* Show second matrix */
  for (i = 0; i < 3; i++) {
     printf("\n");
     for (j = 0; j < 3; j++) {
        printf(" %d ", matrixB[i][j]);
     }
  }
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T23:51:08.150

如果字符串的格式是标准化的，您可以一次读取两个矩阵。对于您上面的示例，请找到如下的修改版本。

```
int main(){
FILE *fp;
int eSk = 0, sSk = 0, i, j;

int  mat1[3][3], mat2[3][3];
char line[256];

char c;
fp = fopen("matrix.txt", "r+");
if(NULL == fp) {
    printf("Can't open the file\n");
    exit(-1);
}

// Read one line
fgets(line, 256, fp);
while(!feof(fp)) {
    // Convert line to array
    sscanf(line,"%d %d %d  %d %d %d", &mat1[eSk][0], &mat1[eSk][1], &mat1[eSk][2], &mat2[eSk][0], &mat2[eSk][1], &mat2[eSk][2]);
// Increment counter
eSk++;
//Read next line
fgets(line, 256, fp);
}

printf("Matrix1\n");

for(i = 0; i < eSk; i++) {
  for(j = 0; j < 3; j++) {
        printf("%d ", mat1[i][j]);
  }
  printf("\n");
}

printf("Matrix2\n");

for(i = 0; i < eSk; i++) {
  for(j = 0; j < 3; j++) {
        printf("%d ", mat2[i][j]);
  }
  printf("\n");
}

puts("");

system("pause");
return 0;
} 
```

# php - PHP准备错误

> ID：14946818
> 
> 赞同：0
> 
> 时间：2013-02-18T22:55:58.893
> 
> 标签：php, mysql, bit, prepare

我很好，真的很难过这一点。这是我用来激活用户帐户的准备绑定命令：

```
$query = "UPDATE `users` SET `active` = b'1' WHERE `UUID` = ?";
$stmt_update = $mysqli->prepare( $query );
$stmt_update->bind_param( 'i' , $uuid );
$stmt_update->execute(); 
```

所以活跃的是 MySQL 中的 bit(1) 字段，UUID 是用户唯一 ID，当我运行它时出现错误：

```
Fatal error: Call to a member function bind_param() on a non-object in /websites/.../activate.php on line 34 
```

我确实有另一个在页面上运行的查询，我确实将其关闭`$stmt->close;`

我尝试了`var_dump($stmt_update);`返回`bool(false)`

查询在 PHPMyAdmin 中运行良好，只是没有准备好设置 =¬(

**更新**

将该字段切换为布尔值并将我的查询更改为：

```
$query = "UPDATE `users` SET `active` = 1 WHERE `UUID` = ?"; 
```

无济于事，因为它仍然没有准备声明。还有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:06:24.147

您的查询不正确，因此无法正确准备。

```
UPDATE `users` SET `active` = 1 WHERE `UUID` = ? 
```

将是正确的查询（如果您不使用`BIT(1)`），明智的做法是从具有隐式布尔值的位字段转移到更明确的布尔值：布尔值。

提示：（`ALTER TABLE users ALTER COLUMN active BOOL DEFAULT FALSE`
是`BOOL`./是 1/0 的别名`tinyint(1)`）`TRUE``FALSE`

这样包装你的准备是一个好习惯，因为准备在失败时返回 false。

`false->method()`总是会抛出一个致命错误。

```
if ($query = $db->prepare($sql)) {
    //work on query
} else {
    echo "Query prepare failed";
    echo $sql;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T19:01:45.743

事实证明，我在前面的语句中缺少我的关闭命令的 ()。我用的`$stmt->close;`不是`$stmt->close();`它总是最小的东西....

无论如何，我将我的领域改回了一点并且`active = b'1'`工作得很好 HUZZAR

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-18T23:09:42.113

利用

```
$query = "UPDATE `users` SET `active` = '1' WHERE `UUID` = :i"; 
```

# date - 表达式引擎 Safecracker 日期格式问题

> ID：14946822
> 
> 赞同：0
> 
> 时间：2013-02-18T22:56:25.150
> 
> 标签：date, format, expressionengine

我遇到了表达式引擎日期变量格式的主要问题，似乎根本不起作用，或者不确定我做错了什么。目前非常非常困惑，不知道这是怎么回事。我目前正在为我的日期字段使用 EEvent 助手。

我的自定义字段名称是：{start_date}

好吧，这是我现在拥有的代码。

```
{exp:safecracker channel="channel" include_jquery="no"}
    {start_date format="%F %d %Y"}
{/exp:safecracker} 
```

它不输出日期字段或格式化它。我只是得到

```
 {start_date format="%F %d %Y"} 
```

在网站上，但如果我删除了格式，我会得到：1361174400 不太确定发生了什么。

对此的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-12T06:42:21.503

令人惊讶的是，即使使用 EE2.9.2 和本机安全破解器（即 exp:channel:form），情况仍然如此。在过去的几个小时里，我也只是把头撞在墙上。谢谢凯文！我会投票赞成你的答案或发表评论，但我需要更多的声誉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T00:25:30.047

这很奇怪，但我想我找到了一个不是很理想的解决方法，但似乎日期格式在安全破解器中效果不佳，我将其更改为

```
{exp:channel:entries} instead of {exp:safecracker} 
```

它可以工作，但我需要它使用安全破解器而不是频道条目，但如果用户对他们提交的内容感到满意，或者返回编辑，这是用户的“预览条目”

这就是我为了让它工作而投入的

```
 {start_date}
    {start_date format="%F %d %Y"} 
```

输出是

```
 {start_date} 1361606400
    {start_date format="%F %d %Y"} February 23 2013 
```

这很奇怪，因为如果您只是放

```
 {start_date format="%F %d %Y"} 
```

它只会输出到页面，它不会显示日期

我最终没有放置一个CSS类，只是隐藏它

```
 <span class="none">{start_date} 1361606400</span>
    {start_date format="%F %d %Y"} February 23 2013 
```

我知道这并不理想，但是被困了几个小时，没有找到解决方案，希望这篇文章能帮助其他遇到这个问题的人。或者如果有人找到了更好的解决方法，请告诉我

# ruby-on-rails - Pik 安装 Ruby Yields：错误：为 nil:NilClass 调用私有方法“gsub”

> ID：14946827
> 
> 赞同：0
> 
> 时间：2013-02-18T22:56:48.537
> 
> 标签：ruby-on-rails, ruby, gem, pik

我刚刚安装了 pik，在尝试时：

```
 pik install ruby 1.9.3-p193 
```

我收到错误：

```
There was an error.
 Error: private method 'gsub' called for nil:NilClass

in: pik/commands/install_command.rb:24:in 'execute'
in: pik_runner:33 
```

谢谢，建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-28T07:39:46.570

我在安装 ruby​​ 2.0.0 64 位版本时遇到了同样的问题。我不得不手动安装 Ruby，然后将其添加到 pik 列表中。

> pik add c:\Ruby200-x64\bin ** 添加：200: ruby​​ 2.0.0p353 (2013-11-22) [x64-mingw32] 位于：C:\Ruby200-x64\bin
> 
> pik 列表 * 193: ruby​​ 1.9.3p392 (2013-02-22) [i386-mingw32] 200: ruby​​ 2.0.0p353 (2013-11-22) [x64-mingw32]

# iphone - 带有标签的 Xcode 链接

> ID：14946833
> 
> 赞同：1
> 
> 时间：2013-02-18T22:57:05.900
> 
> 标签：iphone, ios, xcode, hyperlink

我想像在 html 中一样创建超链接`<a href="...">text</a>`。是否可以在 Xcode 中超链接标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T18:24:23.590

我建议使用`Round Rect Button`then 将背景图像设置为与视图背景颜色相同的图像。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T23:12:07.723

只需在该标签上添加一个 tapGestureRecognizer

```
 UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(labelTapped:)];
    tapGesture.numberOfTapsRequired = 1;
    self.theLabel.userInteractionEnabled = YES;//Since by default, UILabel is not interaction enabled 
    [self.theLabel addGestureRecognizer:tapGesture];

    //Some where in the code
    -(void)labelTapped:(UIGestureRecognizer *)sender
    {
        //Do some stuff
    } 
```

# postgresql - 数据仓库的每小时报告

> ID：14946835
> 
> 赞同：0
> 
> 时间：2013-02-18T22:57:14.270
> 
> 标签：postgresql, report, postgresql-9.1, data-warehouse

我的 Postgresql 9.1 数据库中有以下表格

```
 SELECT * from hour_dimension limit 10;
 id |    date    | hour
 - -+------------+------
 1  | 2013-01-01 |    5
 2  | 2013-01-01 |    6
 3  | 2013-01-01 |    7
 4  | 2013-01-01 |    8
 5  | 2013-01-01 |    9
 6  | 2013-01-01 |   10
 7  | 2013-01-01 |   11
 8  | 2013-01-01 |   12
 9  | 2013-01-01 |   13
10  | 2013-01-01 |   14

SELECT 

shop_id,
trans_date_time::date as date,
extract(hour from trans_date_time) as hour,
round(amount_in_cents/100.1,2) as amount

FROM transaction 
LIMIT 10;

shop_id |    date    | hour | amount
--------+------------+------+--------
 2877   | 2013-01-02 |    9 |   3.50
 2877   | 2013-01-02 |   10 |   4.00
 2877   | 2013-01-02 |   14 |   4.00
 2877   | 2013-01-03 |   11 |   1.40
 2877   | 2013-01-03 |   11 |   4.50
 2877   | 2013-01-03 |   12 |   3.00
 2877   | 2013-01-03 |   13 |   2.00
 2877   | 2013-01-03 |   13 |   2.00
 2877   | 2013-01-03 |   14 |   1.00
 2877   | 2013-01-04 |    9 |   4.00

 SELECT id  from shop limit 3;
 id
 ------
 2877
 2878
 2879 
```

我正在尝试编写一个数据仓库类型查询，这样我就可以生成（并存储）一份每日报告，描述每家商店每小时的表现，类似于以下内容：

```
 date    | hour | shop_id | amount
-----------+------+----------+--------
2013-01-01 |    5 |     2877 |   0.00
2013-01-01 |    6 |     2877 |   0.00
2013-01-01 |    7 |     2877 |   0.00
2013-01-01 |    8 |     2877 |   0.00
2013-01-01 |    9 |     2877 |   3.50
2013-01-01 |   10 |     2877 |   4.00
2013-01-01 |   11 |     2877 |   5.90
2013-01-01 |   12 |     2877 |   3.00
2013-01-01 |   13 |     2877 |   4.00
2013-01-01 |   14 |     2877 |   1.00 
```

示例查询：

```
SELECT hd.date as date, hd.hour as hour, 

shop_id,

round(sum(case when amount is null then 0 else amount end),2) as amount 

FROM (

    SELECT 

    shop_id,
    trans_date_time::date as date,
    extract(hour from trans_date_time) as hour,
    amount_in_cents/100.0 as amount
    FROM
    transaction

) x

RIGHT JOIN hour_dimension hd ON (hd.date = x.date AND hd.hour = x.hour)

AND shop_id = 2877
where hd.date = '2013-01-10'

GROUP BY hd.date, hd.hour, shop_id
ORDER by hd.date, hd.hour
LIMIT 10; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:03:09.197

```
select 
    shop_id,
    trans_date_time::date as date,
    extract(hour from trans_date_time) as hour,
    round(sum(coalesce(amount_in_cents, 0))/100.0, 2) as amount
from transaction
group by 1, 2, 3
order by 1, 2, 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T23:25:43.507

如果您可以从商店表中选择商店 ID 号，您可能会获得更好的性能。我只是使用了一个 SELECT DISTINCT 子查询。交叉连接为您提供日期、小时和 shop_id 的每种组合。

```
with shop_hours as (
  select hd."date", hd."hour", tr.shop_id
  from hour_dimension hd
  cross join (select distinct shop_id from transaction) tr
)
select sh."date"::date, sh."hour", sh.shop_id, coalesce(sum(tr.amount), 0)
from shop_hours sh
left join transaction tr
       on tr.trans_date_time::date = sh."date"
      and tr.hour = sh."hour"
      and tr.shop_id = sh.shop_id
group by sh."date", sh."hour", sh.shop_id
order by sh.shop_id, sh."date", sh."hour" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T23:41:28.630

请尝试以下查询：

```
SELECT hd."date", hd.hour,
       s.shop_id,
       sum(coalesce(round(t.amount_in_cents/100.1,2),0)) amount
  FROM hour_dimension hd
  CROSS JOIN (SELECT DISTINCT shop_id FROM transaction) s
  LEFT JOIN transaction t
    ON hd."date"=t.trans_date_time::date
   AND hd.hour=extract(hour from t.trans_date_time)
 GROUP BY 1,2,3
 ORDER BY 1,2,3; 
```

同样在[SQL Fiddle](http://sqlfiddle.com/#!1/8167e/4)上。

请注意，`date`用作列名/别名并不好，因为它是[保留关键字](http://www.postgresql.org/docs/current/interactive/sql-keywords-appendix.html)。您应该始终将其双引号，但最好避免将其作为列名。

`hour`不是为 PostgreSQL 保留的，尽管 SQL Standard 保留了它。

# php - 使用 SQL 将行元素分组为一列

> ID：14946844
> 
> 赞同：0
> 
> 时间：2013-02-18T22:58:04.353
> 
> 标签：php, mysql, pdo

我当前的表正在像这样从数据库中获取内容，但我想合并这些行，以便所有房间偏好显示在一行中而不是多行中。我该怎么做呢？因此，下表将只有两行。

房间偏好信息是从**ts_roompref**推断出来的。

![在此处输入图像描述](../Images/6534f7d70ec6749e109fd7b72eaaff17.png)

到目前为止，这是我的代码：

```
 $sql = "SELECT 
            *
    FROM ts_request
    INNER JOIN ts_day
    ON ts_request.day_id = ts_day.id
    INNER JOIN ts_period
    ON ts_request.period_id = ts_period.id
    INNER JOIN ts_allocation
    ON ts_request.id = ts_allocation.request_id
    INNER JOIN ts_roompref
    ON ts_request.id = ts_roompref.request_id
    WHERE ts_request.round=:round
    AND ts_request.dept_id=:dept
    ORDER BY ts_request.module_id ASC";
    }
    $stm = $pdo->prepare( $sql );
    $stm->execute( array( ':round' => 'P', ':dept' => $loggedin_id  ) );
    $rows = $stm->fetchAll();   

        foreach ($rows as $row) 
    {               
    echo '<tr align="center">'; 
    echo '<td>'.$row['module_id'].'</td>';
    echo '<td>'.$row['day'].'</td>';    
    echo '<td>'.$row['period'].'</td>';
    echo '<td>';
    if ($row['room_id']=="0")
    {
    echo "Any";
    }
    else
    {
    echo $row['room_id'];
    }
    echo '</td>';           
    echo '<td>'.$row['status'].'</td>';
    echo '</tr>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:06:41.457

好吧，我猜你想用 SQL 来做，但如果你想在你的 PHP 中做，你可以遍历行来观察模块代码的变化。伪代码之类的...

```
$newrows = array()
$tmpCode = ""
foreach $rows as $row
   if $tmpCode != $row['module_code'] {
       $tmpCode = $row['module_code']

       $newrows[] = $row 
   } else {
       $newrows[count($newrows) - 1]['room_preference'] .= $row['room_preference']
   }
} 
```

...粗糙，但你明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T23:36:06.443

如果你想在 SQL 中做，你不能`room_preference`在其他 4 个字段上做一个 GROUP_CONCAT 和 GROUP BY 吗？

# php - 性能 text/html 与 application/json

> ID：14946845
> 
> 赞同：18
> 
> 时间：2013-02-18T22:58:13.160
> 
> 标签：php, jquery, ajax, json

在评估 PHP 框架的性能时，我遇到了一个奇怪的问题

发送 JSON`application/json`似乎比没有额外标头的发送要慢得多（这似乎回退到`text/html`）

示例 #1（应用程序/json）

```
header('Content-Type: application/json');
echo json_encode($data); 
```

示例 #2（文本/html）

```
echo json_encode($data); 
```

用 apache bench ( `ab -c10 -n1000`) 测试给了我：

示例 #1：350 #/秒

示例 #2：440 #/秒

这表明设置额外的标题似乎有点慢。

**但是**：

通过“ajax” `jQuery.getJSON('url', function(j){console.log(j)});`（

示例 #1：340 毫秒/请求

示例 #2：980 毫秒/请求

*这个区别是怎么回事？*

*尽管存在性能差异，是否有理由使用 application/json？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T09:51:14.893

我将回答问题的最后一部分：

> 尽管存在性能差异，是否有理由使用 application/json？

答案：是的

原因：1) text/html 通常是格式错误的 json，并且在您尝试解析它之前不会被捕获。application/json 将失败，只要 json 格式错误，您就可以轻松调试

2) 如果您在浏览器中查看 json，则具有标头类型会将其格式化为用户友好的格式。text/html 将更多地显示为一个 blob。

3) 如果你在你的网页上使用这个 json，application/json 将立即转换为 js 对象，你可以访问它们`obj.firstnode.childnode`等。

4) 回调功能可以工作`application/json`，但不能工作`text/html`

**注意：** 使用 gzip 将充分缓解性能问题。`text/html`仍然会快一点，但不是获取 json 对象的推荐方式

不过，希望看到更多关于性能的见解。标头长度绝对不会导致性能问题。更多地与您的网络服务器分析标题格式有关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T19:33:46.960

您的服务器是否根据内容类型以不同方式处理 gzipping/deflate？我的可以。Believe ab 默认不接受 gzip。（您可以使用带有 -H 标志的自定义标头在 ab 中设置它）。但是 Chrome 总是会说它接受 gzipping。

您可以使用 curl 测试来查看文件是否大小不同：

```
 curl http://www.example.com/whatever --silent -H "Accept-Encoding: gzip,deflate" --write-out "size_download=%{size_download}\n" --output /dev/null 
```

您还可以查看标题以查看是否应用了 gzipping：

```
curl http://www.example.com/whatever -I -H "Accept-Encoding: gzip,deflate" 
```

# java - 如何遍历哈希映射值中的列表

> ID：14946848
> 
> 赞同：1
> 
> 时间：2013-02-18T22:58:23.730
> 
> 标签：java

我有一个作为键和`HashMap`作为值的。`String``List`

的名称`HashMap`是`pageMap`。

假设这`pageMap`具有以下键和值：

```
key = order
value = [page1, page2, page3] 
```

现在我想以以下模式显示：

```
order
   page1
   page2
   page3

key2
   value1
   value2
   value3
   value4 
```

请告诉我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T23:30:43.107

```
import java.util.*;
import java.lang.*;

public class StringListMapExample {

    public static String asTreeFormattedString(HashMap<String,List<String>> map) {
        final StringBuilder builder = new StringBuilder();
        for (String key : map.keySet()) {
            builder.append(key + "\n");
            for (String string : map.get(key)) {
                builder.append("\t" + string + "\n");
            }
        }
        return builder.toString();
    }

    public static void main(String[] args) {
        HashMap<String, List<String>> map = new HashMap<String, List<String>>();
        map.put("order", Arrays.asList(new String[]{"page1", "page2", "page3"}));
        System.out.println(asTreeFormattedString(map));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T23:47:01.490

```
public String formatDictionary(Map<String, List<String>> map){
    String output = '';
    for (String key : map.keySet()){
        output = output + key + "\n";
        for (String value: map.get(s)){
            output = output + "\t" + value + "\n";
    return output 
```

这与 Jeppi 的答案非常相似，但使用了字符串连接，这是我最喜欢的 Java 之一。我没有运行任何基准测试，但我的猜测是他的会快一点，但我的开销会更少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T23:02:28.683

实际上，解决方案非常简单。

```
hashmap.get(key).iterator(); 
```

是给定键列表的迭代器。

你为什么不*试着*自己弄清楚呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T23:04:17.047

```
Iterate using iterator through all keys of hashmap using keyset()

{

  print key

  Iterate through value list using iterator

  {

   print each value

  }

} 
```

# php - 如何获取在 WordPress 多选框 (wp_dropdown_categories) 中预先选择的值？

> ID：14946855
> 
> 赞同：0
> 
> 时间：2013-02-18T22:58:46.613
> 
> 标签：php, wordpress, forms

我正在尝试获取以下 wp_dropdown_categories 调用，以根据用户之前提交的内容预先选择值。这是较大的用户配置文件编辑表单的一部分。这些值被很好地拉入，但如果它们之前被选中，则不会自动突出显示。任何帮助，将不胜感激！！job_ind_pref_call=自定义用户配置文件字段。

```
</label> <?php
    $sel = 0;
    $sel1 = get_user_meta($user_ID, 'job_ind_pref_call', true);
    if(isset($_POST['job_ind_pref_call'])) {

        $sel1 = $_POST['job_ind_pref_call'];
    }
    if (isset($posted['job_term_cat']) && $posted['job_term_cat']>0) $sel = $posted['job_term_cat'];
    global $featured_job_cat_id;
    $args = array(
        'orderby'            => 'name',
        'exclude'            => 3,
        'order'              => 'ASC',
        'name'               => 'job_ind_pref_call[]',
        'hierarchical'       => 1,
        'echo'               => 0,
        'class'              => 'job_cat',
        'selected'           => $sel1,
        'taxonomy'           => 'job_cat',
        'hide_empty'         => false
    );

    $dropdown = wp_dropdown_categories( $args );
    $dropdown = str_replace('class=\'job_cat\' >','class=\'job_cat\' multiple="multiple" size="6" onClick=GetMDDselections("job_ind_pref_call") ><option value="">'.__('Select a Line&hellip;', 'colabsthemes').'</option>',$dropdown);
    echo $dropdown;
?> </p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:56:17.660

首先，WordPress 工作人员建议您将[wp_category_checklist()](https://codex.wordpress.org/Function_Reference/wp_category_checklist)用于多个值。

如果您仍然坚持使用`wp_dropdown_categories()`，您必须准备好使用一种..嗯，非官方的方式来使所选选项起作用。

这是您需要做的：

1- 将一个新的自定义参数和一个新的[Walker](https://codex.wordpress.org/Function_Reference/Walker_Class)类（我们将在步骤 2 中定义）传递给`wp_dropdown_categories()`函数。假设我们这样调用函数：

```
<?php 
wp_dropdown_categories( array( 
    '_selected' => $selected_cats_arr, 
    'walker' => 'CategoryDropdownMultiple'
) ); 
?> 
```

2- 创建一个新的 Walker 类，该类配置为根据我们的新自定义参数选择选项。Walker 的代码基于*wp-includes/category-template.php*`Walker_CategoryDropdown`中的定义。

 *```
<?php
class Walker_CategoryDropdownMultiple extends Walker {
    var $tree_type = 'category';

    var $db_fields = array ('parent' => 'parent', 'id' => 'term_id');

    function start_el( &$output, $category, $depth, $args, $id = 0 ) {
        $pad = str_repeat('&nbsp;', $depth * 3);

        $cat_name = apply_filters('list_cats', $category->name, $category);
        $output .= "\t<option class=\"level-$depth\" value=\"".$category->term_id."\"";

        // HERE IS THE ONLY CHANGE FROM THE ORIGINAL FILE
        // We check our custom parameter which is an array instead of a single value.
        if ( isset( $args['_selected'] ) && in_array( $category->term_id, $args['_selected'] ) )
            $output .= ' selected="selected"';
        $output .= '>';
        $output .= $pad.$cat_name;
        if ( $args['show_count'] )
            $output .= '&nbsp;&nbsp;('. $category->count .')';
        $output .= "</option>\n";
    }
}
?> 
```

* * *

**笔记：**

*   我们不能使用原始*选择*参数的原因是它应该是一个单一的值`wp_dropdown_categories()`。
*   请注意，因为我们为所选选项使用自定义参数，所以本机功能（例如自动选择使用 *show_option_all* 和 *show_option_none* 参数给出的选项）将不起作用。*

# view - 欧拉角到“KML”视角

> ID：14946858
> 
> 赞同：0
> 
> 时间：2013-02-18T22:59:06.327
> 
> 标签：view, kml, translate, angle

有没有人对如何在 ECI Euler Angles 到 KML View Angles 之间转换有很好的描述或参考？任何帮助都是很好的帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T00:16:59.953

Firstly, the KML specification states about kml:Model:

> ```
> The structure and appearance of the textured 3D object are not defined in this specification. 
> ```

However Google Earth roughly models the appearance by applying roll, tilt then heading rotations (in this specific order). I found this out by trial and error, since the GE docs don't describe this anywhere. Unfortunately GE's orientation calculation is buggy and sometimes it spins things by 180 or spins the wrong way or spins a small amount in another axis - this is a known behaviour.

# javascript - 淘汰赛模板未渲染计算的可观察对象

> ID：14946865
> 
> 赞同：1
> 
> 时间：2013-02-18T23:00:09.727
> 
> 标签：javascript, knockout.js

下面是两个淘汰模板plugin和plugin2。两者都依赖于 ko.computed observables，并且两个 observables 的 deferEvaluation 属性都设置为 true。插件**不渲染，****但**plugin2渲染。

需要更改哪些内容才能使插件呈现（保持 deferEvaluation==true）？

在这里[摆弄 http://jsfiddle.net/jeljeljel/YKLGM/](http://jsfiddle.net/jeljeljel/YKLGM/)

**HTML**

```
<div id="plugin" data-bind="template: { name: 'template1', data: $data }" ></div>
<div id="plugin2" data-bind="template: { name: 'template2', data: $data }" ></div>

<script type="text/html" id="template1">
    <div data-bind="foreach: columns()">
        <span data-bind="text: displayText"></span>
    </div>
</script>

<script type="text/html" id="template2">
    <div data-bind="text: dataItem" ></div>
</script> 
```

**Javascript**

```
var gridData = {
    columns: [{
        displayText: 'Name'
    }, {
        displayText: 'Last Login Date'
    }, {
        displayText: 'Email'
    }]
};

function DataModel() {
    var self = this;

    self.columns = ko.observableArray([]);

    self.loadGrid = ko.computed({
        read: function () {
            self.columns(gridData.columns);
        },
        owner: this,
        deferEvaluation: true
    });

    self.id = ko.observable(1);

    self.dataItem = ko.computed({
        read: function () {
            return self.id() * 3;
        },
        owner: this,
        deferEvaluation: true
    });
}

dataModel = new DataModel();
ko.applyBindings(dataModel); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:22:54.930

> 两者都依赖于 ko.computed observables

不，他们不是。`plugin`仅取决于`columns`，它是一个永远不会填充的空 observableArray。也许你应该在某处*使用*你`loadGrid`计算的 observable。

顺便说一句，`loadGrid`在当前状态下计算 observable 并没有多大意义，read 方法甚至不返回任何内容。

# c# - GameTime.ElapsedGameTime 不变

> ID：14946872
> 
> 赞同：2
> 
> 时间：2013-02-18T23:00:36.823
> 
> 标签：c#, xna, microsoft-metro, windows-runtime, monogame

我想弄清楚如何在我的 XNA 游戏中创建一个计时器。我正在使用 MonoGame 并为 Windows 8 RT 开发。当我使用这个检查 GameTime.ElapsedGameTime 时：

```
 protected override void Update(GameTime gameTime)
    {
        TimeSpan mean = gameTime.ElapsedGameTime - last;
        Debug.WriteLine(gameTime.ElapsedGameTime.ToString());
        ... 
```

ElapsedGameTime 始终为 00:00:00.0166666。它不会从此值更改。为什么会这样？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T23:09:14.523

`ElapsedGameTime`测量自上次更新以来的时间（即，已绘制最后一帧）。您可能想要的是`TotalGameTime`，它将为您提供游戏运行的总时间。

# asp.net - 如何在 IIS 7.5 经典模式下限制对静态文件的访问

> ID：14946873
> 
> 赞同：2
> 
> 时间：2013-02-18T23:00:40.073
> 
> 标签：asp.net, iis-7, static-content

我需要在几个 ASP.NET 应用程序中限制对静态 HTML 文件的访问。由于这些应用程序实现了自己的身份验证机制，看起来我只需要让这些文件通过 ASP.NET 请求处理管道而不是“标准”IIS 静态内容处理。一些应用程序是相对现代的 ASP.NET MVC 应用程序，并在 IIS 7.5 上使用集成管道，看起来为它们做我需要的事情并不是什么大不了的事。但其他是在经典管道模式 (IIS 7.5) 上工作的旧版 ASP.NET 网站，由于某些原因，目前无法将它们移动到集成管道。

**UPD：**问题在于应用程序包含一些静态文件（帮助页面），未经授权的用户可以在键入直接 URL 时看到它们。我的任务是让应用程序在这种情况下显示登录页面。

在 Web.config 中添加处理程序：

```
<add name="StaticHTMLHandler" path="*.htm*" verb="*" modules="IsapiModule" scriptProcessor="C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" preCondition="classicMode,runtimeVersionv4.0,bitness32" /> 
```

导致我只是得到这个例外：

```
[HttpException (0x80004005): Failed to Execute URL]
    System.Web.Hosting.ISAPIWorkerRequestInProcForIIS6.BeginExecuteUrl(String url, String method, String childHeaders, Boolean sendHeaders, Boolean addUserIndo, IntPtr token, String name, String authType, Byte[] entity, AsyncCallback cb, Object state) +4136452
    System.Web.HttpResponse.BeginExecuteUrlForEntireResponse(String pathOverride, NameValueCollection requestHeaders, AsyncCallback cb, Object state) +653
    System.Web.DefaultHttpHandler.BeginProcessRequest(HttpContext context, AsyncCallback callback, Object state) +279
    System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +12551795
    System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +288 
```

那么我做错了什么？谁能指出我正确的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:11:43.903

我从来没有尝试过你的方法，但我也有一些 FW 1.1，经典的 asp。和现代网络应用程序混合在我的网络服务器上。我所做的是为每个框架创建一个单独的应用程序池。我在我创建的 1.1 经典模式应用程序池上运行 1.1，并在另一个应用程序池上运行现代应用程序：集成 fw 4.0。经典的 asp 东西超出了这个问题的范围。每个应用程序池都是它自己的进程，因此使用更多应用程序池并没有真正的缺点，例如，每个应用程序 1 个应用程序池是完全可以接受的安全策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-19T02:52:47.307

所以最终没有找到用经典管道模式对静态文件进行身份验证的实用方法。最后，我们决定更新旧的遗留平台并使其与集成管道模式一起工作。

# c# - 查找和删除字符串中的字符

> ID：14946879
> 
> 赞同：0
> 
> 时间：2013-02-18T23:01:05.223
> 
> 标签：c#, findandmodify

我的程序读取注册表项值并将这些值与安装路径结合起来。我还从注册表中读取了安装路径。

即`String dllInstpath = installPath + rKey`等于： `C:\Program Files (x86)\NSi\AutoStore Workflow 6\HpOXPdCaptureRes.dll`

然后我使用`FileVersionInfo`上面的字符串`HpOXPdCaptureRes.dll`从它的安装路径中获取文件信息并将所有值写入记事本。

我的问题是 TRUE dll 名称在文件名中没有“Res”。注册表只有文件名中带有“Res”的文件名。我需要做的是从文本文件中读取并找到所有“Res”并将它们从记事本文件中的文本行中删除。

所以输出应该是这样的：

当前的： `HpOXPdCaptureRes.dll`

新的： `HpOXPdCapture.dll`

我已在线阅读，我认为最好的方法是使用`ReadAllLines`和`WriteAllLines`. 但是我不确定如何实现查找和替换。我已经看到很多关于如何删除空格、无效字符等的示例，但是我无法找到我需要的示例。

概括：

*   读取文本文件
*   在所有文本`Res`行中都可以并删除
*   保留当前文本文件，即删除`Res`并关闭文件

任何帮助是极大的赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:14:35.393

如果您要替换的字符串保证在字符串中是唯一的 - 例如字符串末尾的“res.dll” - 那么您可以使用类的`Replace`方法进行`String`替换：

```
List<string> lines = File.ReadAllLines(sourceFile);
lines = lines.select(l => l.Replace("res.dll", ".dll").ToList(); 
```

或者如果区分大小写是一个问题：

```
lines = lines.Select(l => l.Substring(l.Length - 7).ToLower() == "res.dll" ? l.Substring(0, l.Length - 7) + ".dll" : l).ToList(); 
```

对于更复杂的情况，您可能需要使用正则表达式来标识要替换的字符串部分。或者您可能想要拆分字符串 int 路径和文件名，修改文件名并将其重新连接在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T23:07:47.000

您可以使用`File.ReadAllLines`和`File.WriteAllLines`。

例子：

读取所有行并替换每行所需的值，然后再次写入行

```
File.WriteAllLines("textFilePath",File.ReadAllLines("textFilePath").Select(line => line.Replace("Res.dll", ".dll"))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T23:07:56.700

只需打开文件并使用“File.ReadAllLines”读取所有行。然后使用`Replace`删除`Res`：

```
string[] lines = File.ReadAllLines("yourFileName");
var output = lines.Select(x => x.Replace("Res.dll", ".dll")).ToArray(); 
```

要稍后将它们保存回来，您可以使用`File.WriteAllLines`：

```
File.WriteAllLines("yourFileName", output); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T23:11:12.740

从文件中读取所有内容，替换所有出现的“res”并写入文件：

```
 String filename = "fileName";

        StreamReader sr = new StreamReader(filename);
        String content = sr.ReadToEnd();
        sr.Close();

        StreamWriter sw = new StreamWriter(filename);
        sw.Write(content.Replace("res", ""));
        sw.Close(); 
```

# asp.net-mvc - 仅使用控制器的两个参数之一进行路由

> ID：14946882
> 
> 赞同：0
> 
> 时间：2013-02-18T23:01:19.087
> 
> 标签：asp.net-mvc, asp.net-mvc-3, routing, asp.net-mvc-routing, url-routing

我有一个带有两个参数的 actionresult：

```
 public ActionResult Index(int a,string b)
        {
            //some code

            return View(b);
        } 
```

它会自动创建此 url：

```
 mysite.com/a=1&b=http://site.com/b=1 
```

我只需要在我的网址中显示第一个参数“a”：

```
 mysite.com/a=1 
```

我使用在 global.ascx 中创建的 MVC 的默认路由：

```
 routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            ); 
```

我应该怎么办？谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-25T00:45:25.730

如果您看到“b”参数从当前请求中溢出，您可以将“b”参数显式设置为空字符串以避免这种行为：

```
@Html.ActionLink("Home", "Index", "Home", new { a = 1, b = "" }, null) 
```

我将此“功能”[报告](https://aspnetwebstack.codeplex.com/workitem/1346)为错误，但 Microsoft 的开发人员似乎认为这种行为应该使您的 URL 更易于配置，并且他们不打算修复它。

> 您在这里看到的是路由功能，其中“环境”值（即在传入请求的 URL 中检测到的值）用于简化（有时...）到其他页面的路由的生成。
> 
> 您可以在此 StackOverflow 帖子中查看我们的答案（名称为“Eilon”），我在其中更详细地解释了该行为： [如何阻止 ASP.Net MVC Html.ActionLink 使用现有路由值？](https://stackoverflow.com/questions/1817421/how-can-i-stop-asp-net-mvc-html-actionlink-from-using-existing-route-values)
> 
> 最终，如果您想最大程度地控制为 URL 生成的内容，可以考虑以下几个选项：
> 
> 1.  使用命名路由来确保只有你想要的路由会被用来生成 URL（这通常是一个很好的做法，尽管它在这个特定的场景中没有帮助）
> 2.  明确指定所有路由参数 - 甚至是您希望为空的值。这是解决这个特定问题的一种方法。
> 3.  您可以使用 Razor 的 ~/ 语法或调用 Url.Content("~/someurl") 来确保您尝试生成的 URL 不会发生额外（或意外）处理，而不是使用路由来生成 URL。
> 
> 谢谢，艾隆

# winapi - Namedpipe writeFIle 问题 Win32

> ID：14946885
> 
> 赞同：0
> 
> 时间：2013-02-18T23:01:46.743
> 
> 标签：winapi, named-pipes

我正在编写一个使用 namedpipe 进行进程间通信的 win32 应用程序。当一个进程尝试 writeFile 时，它​​会写入结构（告诉其他进程多少字节和其他信息），然后通过再次调用 WriteFile 来写入实际数据。

另一个进程，在读取的时候，先读取第一个msg，然后根据从第一个msg得到的信息读取第二个msg。

我的问题是：

1.  如果服务器进程正在写入数据，但客户端进程还没有读取数据，那么客户端读取时是否有可能丢失第一个 msg？例如，当服务器第二次调用WriteFile写入实际数据时，之前的msg会被覆盖吗？

2.  有没有使用 waitforsingleobject 同步的最佳解决方案？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T23:18:01.607

管道有点像真正的管道——当您向管道写入更多内容时，它不会覆盖管道中已经存在的内容。它只是将更多数据添加到管道中，这些数据将在您之前写入管道的数据之后传递。

我很少发现`WaitForSingleObject`对管道有用。如果你想阻塞当前线程直到它从管道接收到数据，你可以做一个同步读取，它会阻塞直到有数据。如果你想阻塞直到有来自多个源中的任何一个输入，你通常想要`WaitForMultipleObjects`or `MsgWaitForMultipleObjects`，所以当任何源有输入要处理时，你的线程将运行。

我唯一能回忆起`WaitForSingleObject`在管道上使用的时间是零超时，因此如果没有管道输入，接收器将继续其他处理，并且每隔一段时间检查管道是否有一些数据要处理。虽然它最初似乎`PeekNamedPipe`适用于此，但它对于其他目的确实最有用——尽管它可能对您有用，读取标头数据并找出调用哪些其他代码来读取和处理整个消息。

说了这么多，我觉得有必要指出我已经有一段时间没有使用命名管道编写任何新代码了。我能想到的情况很少，今天我什至会考虑它们——我几乎总是使用套接字。

# java - 在java中存储当前日期和日期1年

> ID：14946886
> 
> 赞同：43
> 
> 时间：2013-02-18T23:01:47.937
> 
> 标签：java, date

我已经完成了所有设置，可以将当前日期存储到 Java 中的变量中。我想弄清楚的是如何存储当前日期后 1 年的日期。

```
import java.util.Date;
import java.text.SimpleDateFormat;
import java.text.DateFormat;
import java.util.Scanner;
import java.util.Calendar; 
```

这是我当前日期的内容：

```
DateFormat newDate = new SimpleDateFormat("MM/dd/yyyy");
Date date = new Date();
startDate = newDate.format(date); 
```

因此，例如，如果它是今天，它将存储 2/18/2013。我正在尝试存储日期 2/18/2014。我该怎么做呢？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2013-02-18T23:03:53.207

如果您不想拖动外部库，只需使用`calendar.add(Calendar.YEAR, 1)`

```
Calendar cal = Calendar.getInstance();
Date today = cal.getTime();
cal.add(Calendar.YEAR, 1); // to get previous year add -1
Date nextYear = cal.getTime(); 
```

请注意，如果日期是`29/Feb/2012`并且您添加了 1 年，您将获得`28/Feb/2013`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-11-28T02:53:10.740

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-18T23:04:40.287

使用[**Calendar#add(int field, int amount)**](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#add%28int,%20int%29)方法。您应该使用 Calendar API 来操作日期和时间操作。

```
Calendar today = Calendar.getInstance(); 
Calendar nextYearToday = today;
nextYearToday.add(Calendar.YEAR, 1); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-01T04:46:27.330

```
 Calendar cal = Calendar.getInstance();
        Date today = cal.getTime();
        cal.add(Calendar.YEAR, 1); // to get previous year add 1
        cal.add(Calendar.DAY_OF_MONTH, -1); // to get previous day add -1
        Date expiryDate = cal.getTime();

        System.out.println("today is --> "+today);
        System.out.println("expiryDate is --> "+expiryDate); 
```

**OutPut** today is --> Fri Dec 01 10:10:52 GMT+05:30 2017

expiryDate is --> Fri Nov 30 10:10:52 GMT+05:30 2018

date today is -> Fri Dec 01 10:10:52 GMT+05:30 2017

expiryDate is -> Fri Nov 30 10:10:52 GMT+05:30 2018

[![enter image description here](../Images/25672bb5e6859c4a15573e10028bb897.png)](https://i.stack.imgur.com/KDySR.png)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-11-27T20:33:02.567

在 Android 中比以往任何时候都简单：

`oneYearAfterDate = new Date(date.getTime() + DateUtils.YEAR_IN_MILLIS )`

# android - 设置 DialogFragment 的大小

> ID：14946887
> 
> 赞同：26
> 
> 时间：2013-02-18T23:01:52.317
> 
> 标签：android, android-dialogfragment

我一直在尝试许多命令来设置我的`DialogFragment`. 它只包含一个颜色选择器，所以我删除了对话框的背景和标题：

```
getDialog().getWindow().requestFeature(Window.FEATURE_NO_TITLE);
getDialog().getWindow().setBackgroundDrawable(
    new ColorDrawable(android.graphics.Color.TRANSPARENT)); 
```

但是，我也想将对话框定位在我想要的位置，这是有问题的。我用：

```
WindowManager.LayoutParams params = getDialog().getWindow().getAttributes();
params.width = LayoutParams.WRAP_CONTENT;
params.height =  LayoutParams.WRAP_CONTENT;
params.gravity = Gravity.LEFT;
getDialog().getWindow().setAttributes(params); 
```

但是一个（大）障碍仍然存在：即使我的对话框窗格是不可见的，它仍然具有一定的大小，并且它限制了我的对话框的位置。这里`LayoutParams.WRAP_CONTENT`是为了将此窗格的大小限制为我的颜色选择器，但由于某种原因它不起作用。

有没有人能够做类似的事情？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-07-29T05:11:00.923

我遇到了一个类似的问题，你不能在代码中设置对话框片段的宽度和高度，经过几次尝试，我找到了解决方案；

这是自定义 DialogFragment 的步骤：

1.inflate自定义视图从xml方法

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState)
{

    getDialog().getWindow().requestFeature(Window.FEATURE_NO_TITLE);
    getDialog().setCanceledOnTouchOutside(true);

    View view = inflater.inflate(R.layout.XXX,
            container, false);
    //TODO:findViewById, etc
    return view;
} 
```

2.在 onResume() 中设置对话框的宽度和高度，记得在 onResume()/onStart() 中，似乎在其他方法中不起作用

```
public void onResume()
{
    super.onResume();
    Window window = getDialog().getWindow();
    window.setLayout(width, height);
    window.setGravity(Gravity.CENTER);
    //TODO:
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-22T16:56:52.850

经过反复试验，我找到了解决方案。

这是我的 DialogFragment 类的实现：

```
public class ColorDialogFragment extends SherlockDialogFragment {

    public ColorDialogFragment() {
    //You need to provide a default constructor
    }

    @Override
    public View onCreateView(LayoutInflater inflater, 
                     ViewGroup container,
                     Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.dialog_color_picker, container);
    // R.layout.dialog_color_picker is the custom layout of my dialog
    WindowManager.LayoutParams wmlp = getDialog().getWindow().getAttributes();
    wmlp.gravity = Gravity.LEFT;
    return view;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setStyle(DialogFragment.STYLE_NO_FRAME, R.style.colorPickerStyle);
    // this setStyle is VERY important.
    // STYLE_NO_FRAME means that I will provide my own layout and style for the whole dialog
    // so for example the size of the default dialog will not get in my way
    // the style extends the default one. see bellow.        
    }

  } 
```

R.style.colorPickerStyle 对应于：

```
<style name="colorPickerStyle" parent="Theme.Sherlock.Light.Dialog">
    <item name="android:backgroundDimEnabled">false</item>
    <item name="android:cacheColorHint">@android:color/transparent</item>
    <item name="android:windowBackground">@android:color/transparent</item>
</style> 
```

我只是根据自己的需要扩展了默认的 Dialog 样式。

最后，您可以使用以下命令调用此对话框：

```
private void showDialog() {
   ColorDialogFragment newFragment = new ColorDialogFragment();
   newFragment.show(getSupportFragmentManager(), "colorPicker");
   } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-19T02:05:39.877

对于我的用例，我希望 DialogFragment 与项目列表的大小相匹配。片段视图是布局中的 RecyclerView，称为`fragment_sound_picker`. 我在 RecyclerView 周围添加了一个包装器 RelativeLayout。

我已经`R.attr.listItemPreferredHeight`在名为 的布局中设置了单个列表项视图的高度`item_sound_choice`。

DialogFragment 从膨胀的 View 的 RecyclerView 中获取 LayoutParams 实例，将 LayoutParams 的高度调整为列表长度的倍数，并将修改后的 LayoutParams 应用到膨胀的父 View。

结果是 DialogFragment 完美地包装了简短的选择列表。它包括窗口标题和取消/确定按钮。

这是 DialogFragment 中的设置：

```
// SoundPicker.java
// extends DialogFragment
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    builder.setTitle(getActivity().getString(R.string.txt_sound_picker_dialog_title));

    LayoutInflater layoutInflater = LayoutInflater.from(getActivity());
    View view = layoutInflater.inflate(R.layout.fragment_sound_picker, null);
    RecyclerView rv = (RecyclerView) view.findViewById(R.id.rv_sound_list);
    rv.setLayoutManager(new LinearLayoutManager(getActivity()));

    SoundPickerAdapter soundPickerAdapter = new SoundPickerAdapter(getActivity().getApplicationContext(), this, selectedSound);
    List<SoundItem> items = getArguments().getParcelableArrayList(SOUND_ITEMS);
    soundPickerAdapter.setSoundItems(items);
    soundPickerAdapter.setRecyclerView(rv);
    rv.setAdapter(soundPickerAdapter);

    // Here's the LayoutParams setup
    ViewGroup.LayoutParams layoutParams = rv.getLayoutParams();
    layoutParams.width = RelativeLayout.LayoutParams.MATCH_PARENT;
    layoutParams.height = getListItemHeight() * (items.size() + 1);
    view.setLayoutParams(layoutParams);

    builder.setView(view);
    builder.setCancelable(true);

    builder.setNegativeButton(android.R.string.cancel, new DialogInterface.OnClickListener() {
        // ...
    });

    builder.setPositiveButton(R.string.txt_ok, new DialogInterface.OnClickListener() {
        // ...
    });

    return builder.create();
}

@Override
public void onResume() {
    Window window = getDialog().getWindow();
    window.setLayout(RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
    super.onResume();
}

private int getListItemHeight() {
    TypedValue typedValue = new TypedValue();
    getActivity().getTheme().resolveAttribute(R.attr.listPreferredItemHeight, typedValue, true);
    DisplayMetrics metrics = new android.util.DisplayMetrics(); getActivity().getWindowManager().getDefaultDisplay().getMetrics(metrics);
    return (int) typedValue.getDimension(metrics);
} 
```

这里是`fragment_sound_picker`：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <android.support.v7.widget.RecyclerView
        android:id="@+id/rv_sound_list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />
</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-23T06:20:45.237

使用此代码调整 Dialog Fragment android 的大小

```
public void onResume() {
        super.onResume();
        Window window = getDialog().getWindow();
        window.setLayout(250, 100);
        window.setGravity(Gravity.RIGHT);
    } 
```

# math - 如何对两个浮点数执行浮点运算？

> ID：14946890
> 
> 赞同：1
> 
> 时间：2013-02-18T23:02:06.500
> 
> 标签：math, floating-point

假设我想对以下两个浮点数进行加、减和/或乘以下列格式：

> 1 位符号
> 
> 3 位指数（偏差 3）
> 
> 6位尾数

有人可以简要解释一下我会怎么做吗？我尝试在网上搜索有用的资源，但我找不到任何太直观的东西。但是，我知道该程序通常应该非常简单。例如，这里有两个数字，我想对它们执行三个操作：

> 0 110 010001
> 
> 1 010 010000

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:55:48.370

首先，采用有效数字编码并在其前面加上“1.”，并将结果写入由符号位确定的符号。因此，对于您的示例数字，我们有：

```
+1.010001
-1.010000 
```

但是，它们具有不同的尺度，因为它们具有不同的指数。第二个的指数比第一个小四（010 [2]与 110 [2]相比）。所以将其右移四位：

```
+1.010001
- .0001010000 
```

现在两个有效数字具有相同的比例（指数 110 [2]），所以我们可以执行正常的算术运算，以二进制形式：

```
+1.010001
- .0001010000
_____________
+1.0011000000 
```

接下来，将有效位四舍五入到可用位（七）。在这种情况下，尾随位为零，因此舍入不会改变任何内容：

```
+1.001100 
```

在这一点上，如果它大于 2 (10 [2] ) 或小于 1，我们可能有一个需要更多移动的有效数字。但是，这个有效数字正是我们想要的，在 1 和 2 之间。所以我们可以保留指数为 (110 [2] )。

将符号转换回位，取前导“1”。关闭有效位，并将位放在一起：

```
0 110 001100 
```

如果数字上溢或下溢正常指数范围，则会出现异常，但这里没有发生这些情况。

# javascript - svg if 语句

> ID：14946894
> 
> 赞同：0
> 
> 时间：2013-02-18T23:02:30.167
> 
> 标签：javascript, image, if-statement, svg

有没有办法可以检查浏览器是否有 SVG 查看器？

我想说的是：if (browser has SVG viewer){//do stuff}

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:11:51.190

以下是[raphael.js](http://raphaeljs.com/) [检测 SVG](https://github.com/DmitryBaranovskiy/raphael/blob/master/raphael.core.js#L323)的方式：

```
if (window.SVGAngle || document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1")) {
    alert('supports SVG');
} 
```

# android - SharedPreferences — 读得不好但写得好

> ID：14946898
> 
> 赞同：1
> 
> 时间：2013-02-18T23:02:52.693
> 
> 标签：android, checkbox, sharedpreferences

我有一个`ListView`包含照片、文本字段和`CheckBox`. 我想保存`CheckBox`. 我通过`setOnCheckedChangeListener()`分配给`CheckBox`. 当我点击复选框时一切正常，我在保存日志后阅读了属性。

当我打开应用程序并选择一个或多个复选框并单击“返回”按钮退出时，就会出现问题。当我打开应用程序时，复选框是错误的，如果我关闭并再次打开会发生。为了保存，我有一个变量的唯一 ID。

你能帮我吗？

*   `ItemListBaseAdapter`：

    ```
    public class ItemListBaseAdapter extends BaseAdapter {

        private static ArrayList<ItemDetails> itemDetailsrrayList;

        private Integer[] imgid = { R.drawable.img1, R.drawable.img2, R.drawable.img3, R.drawable.img4, R.drawable.img5,
                R.drawable.img6 };

        private LayoutInflater l_Inflater;
        private Context _context;

        private SharedPreferences _apref;
        private Editor _editor;
        private String _NOMBREPREF = "perroo";
        private String _CADINICIO = "gatoo";

        public ItemListBaseAdapter(Context context, ArrayList<ItemDetails> results) {
            _context = context;
            itemDetailsrrayList = results;
            l_Inflater = LayoutInflater.from(context);

            _apref = _context.getSharedPreferences(_NOMBREPREF, Context.MODE_PRIVATE);
            _editor = _apref.edit();
        }

        public int getCount() {
            return itemDetailsrrayList.size();
        }

        public Object getItem(int position) {
            return itemDetailsrrayList.get(position);
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(final int position, View convertView, ViewGroup parent) {
            ViewHolder holder;
            if (convertView == null) {
                convertView = l_Inflater.inflate(R.layout.item_details_view, null);
                holder = new ViewHolder();
                holder.txt_itemName = (TextView) convertView.findViewById(R.id.name);
                holder.txt_itemDescription = (TextView) convertView.findViewById(R.id.itemDescription);
                holder.txt_itemPrice = (TextView) convertView.findViewById(R.id.price);
                holder.itemImage = (ImageView) convertView.findViewById(R.id.photo);
                holder.ckb_degustado = (CheckBox) convertView.findViewById(R.id.checkBox1);

                convertView.setTag(holder);
            } else {
                holder = (ViewHolder) convertView.getTag();
            }

            holder.txt_itemName.setText(itemDetailsrrayList.get(position).getName());

            holder.txt_itemDescription.setText(itemDetailsrrayList.get(position).getItemDescription());
            holder.txt_itemPrice.setText(itemDetailsrrayList.get(position).getPrice());

            holder.itemImage.setImageResource(imgid[itemDetailsrrayList.get(position).getImageNumber() - 1]);

            boolean tmprf = readPrefsCheckbox(itemDetailsrrayList.get(position).getIduniko().toString());
            String tmpr2 = Boolean.toString(tmprf);
            holder.ckb_degustado.setChecked(tmprf);
            Log.d("DREKION", "Inicio: " + itemDetailsrrayList.get(position).getIduniko().toString() + " " + tmpr2);

            // Checkbox degustation clickado
            holder.ckb_degustado.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                    // TODO Auto-generated method stub
                    String cad1;
                    boolean cadtmp;
                    String cadtmpp;

                    if (isChecked == true) {
                        cad1 = _CADINICIO + itemDetailsrrayList.get(position).getIduniko().toString();
                        Log.d("DREKION", "True: " + cad1);
                        _editor.putBoolean(cad1, true);
                        _editor.commit();
                        cadtmp = readPrefsCheckbox(itemDetailsrrayList.get(position).getIduniko().toString());
                        cadtmpp = Boolean.toString(cadtmp);
                        Log.d("DREKION", "True despues: " + cadtmpp);
                    } else {
                        cad1 = _CADINICIO + itemDetailsrrayList.get(position).getIduniko().toString();
                        Log.d("DREKION", "False: " + cad1);
                        _editor.putBoolean(cad1, false);
                        _editor.commit();
                        cadtmp = readPrefsCheckbox(itemDetailsrrayList.get(position).getIduniko().toString());
                        cadtmpp = Boolean.toString(cadtmp);
                        Log.d("DREKION", "False despues: " + cadtmpp);
                    }
                }
            });

            convertView.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // do something here
                    // for communication with Fragment/Activity, you can use your
                    // own listener
                    /*
                     * Toast.makeText(v.getContext(), "Has elegido : " +
                     * itemDetailsrrayList.get(position).getItemDescription() + "",
                     * Toast.LENGTH_LONG).show(); Intent intent = new
                     * Intent(v.getContext(), ItemMoreInfo.class);
                     * intent.putExtra("objetito",
                     * itemDetailsrrayList.get(position));
                     */
                    sendMessage(v, itemDetailsrrayList.get(position));
                }
            });
            return convertView;
        }

        private boolean readPrefsCheckbox(String _iduniko) {

            return _apref.getBoolean(_CADINICIO + _iduniko, false);
        }

        public void sendMessage(View view, ItemDetails objID) {
            Intent intent = new Intent(view.getContext(), ItemMoreInfo.class);
            intent.putExtra("objetito", objID);
            view.getContext().startActivity(intent);
        }

        private void showNotificacion(Context c, String t) {
            Toast.makeText(c, t, Toast.LENGTH_LONG).show();
        }

        static class ViewHolder {

            TextView txt_itemName;
            TextView txt_itemDescription;
            TextView txt_itemPrice;
            ImageView itemImage;
            CheckBox ckb_degustado;
        }
    } 
    ```

*   `MainActivity`：

    ```
    public class MainActivity extends Activity {

        private SharedPreferences pref;
        private Editor editor;

        private String _NOMBREPREF = "perroo";
        private String _CADINICIO = "gatoo";

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            ArrayList<ItemDetails> image_details = GetSearchResults();

            // Init shares vars
            pref = getApplicationContext().getSharedPreferences(_NOMBREPREF, 0);
            editor = pref.edit();

            final ListView lv1 = (ListView) findViewById(R.id.listV_main);
            lv1.setAdapter(new ItemListBaseAdapter(this, image_details));
            //
            lv1.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> a, View v, int position, long id) {
                    /*
                     * 
                     * Object o = lv1.getItemAtPosition(position); ItemDetails
                     * obj_itemDetails = (ItemDetails)o;
                     * Toast.makeText(MainActivity.this, "Has elegido : " + " " +
                     * obj_itemDetails.getName(), Toast.LENGTH_LONG).show();
                     * sendMessage
                     * (findViewById(android.R.id.content),obj_itemDetails);
                     */
                }
            });
        }

        private ArrayList<ItemDetails> GetSearchResults() {
            ArrayList<ItemDetails> results = new ArrayList<ItemDetails>();

            ItemDetails item_details = new ItemDetails();
            item_details.setIduniko("tap001");
            item_details.setName("Pizza");
            item_details.setItemDescription("prueba");
            item_details.setPrice("2€");
            item_details.setImageNumber(1);
            results.add(item_details);
        }
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T00:33:10.510

`position`您的`onCheckedChanged()`方法内部的值与循环内部的值不同，因为`position`代码在不同的时间运行......每次滚动 ListView 时循环运行，而`onCheckedChanged()`当用户单击 CheckBox 时运行。

一个简单的解决方法是使用`setTag()`并`getTag()`存储该行的字符串。
循环内部：

```
holder.ckb_degustado.setTag(itemDetailsrrayList.get(position).getIduniko()); 
```

内部`onCheckedChanged()`：

```
cad1 = _CADINICIO + ((String) buttonView.getTag()); 
```

（同时考虑存储一个本地引用`itemDetailsrrayList.get(position)`而不是重复调用相同的方法。）

# jquery - 将数据从数据库添加到文本框 - Jquery

> ID：14946900
> 
> 赞同：4
> 
> 时间：2013-02-18T23:03:09.417
> 
> 标签：jquery, sql, forms, textbox

我在 Jquery 中创建了一个动态列表，当用户单击一个项目时，它会将他们带到一个新页面，其中显示了他们选择的列表选项的特定项目。到目前为止，我让它们显示在各种段落和标题属性等中，只是为了测试。

我想要做的是使用它们的标签获取当前正在显示的数据，而不是将它们放在表单内的文本框中。

呈现数据并将它们提交给属性等的代码示例是：

```
 <script type="text/javascript">
    $(document).on('pagebeforeshow', '#index', function(){
        $("#list").empty();
        var url="http://localhost/test/login/json4.php";
        $.getJSON(url,function(json){
            //loop through deals
            $.each(json.deals,function(i,dat){
                $("#list").append("<li><a id='"+dat.dealid+"' data-restaurantid=" + dat.restaurantid + " data-image=" + dat.image + "><h1>"+dat.name+"</h1><p>"+dat.dname+"</p></a></li>");
                $(document).on('click', '#'+dat.dealid, function(event){  
                    if(event.handled !== true) // This will prevent event triggering more then once
                    {
                        dealObject.dealID = $(this).attr('id'); 
                        dealObject.restaurantid = $(this).attr('data-restaurantid');
                        dealObject.name = $(this).find('h1').html(); 
                        dealObject.image = $(this).attr('data-image');
                        //dealObject.dname = $(this).find('input').html();
                        dealObject.dname = $(this).find('input').val();

                        $.mobile.changePage( "#index2", { transition: "slide"} );
                        event.handled = true;
                    }
                });            
            });
            $("#list").listview('refresh');
        });
    });

    $(document).on('pagebeforeshow', '#index2', function(){       
        //$('#index2 [data-role="content"]').html('You have selected Link' + dealObject.dname);
        $('#index2 [data-role="content"]').find('#deal-img').attr('src',dealObject.dealObject);
        $('#index2 [data-role="content"]').find('#title').html(dealObject.name);
        //$('#index2 [data-role="content"]').find('#description').html(dealObject.dname);
        $('#index2 [data-role="content"]').find('#name').html(dealObject.dname);
    });

    var dealObject = {
        dealID : null,
        restaurantid : null,
        name : null,
        image : null,
        dname : null
    }    
</script> 
```

这是索引 2 html 的片段，直到内容 div 的末尾：

```
 <div data-role="page" id="index2">

<div data-role="header">
        <h1> Find A Deal </h1> 
    </div>

    <div data-role="content">

        <?php
    if( !isset( $_SESSION ) ){
     session_start();
        }

    if( isset( $_SESSION['username'] ) ){
        echo ".";
        } ?>   

        <label for="name">Deal Name:</label>
        <input type="text" value="" name="name" id="name"/>
        <label for="desc">Description</label>
        <input type="text" value="" name="desc" id="desc"/>  
        <a data-role="button" id="submit-button" data-theme="b">Submit</a>

        <img src="" width="100px" height="100px" id="deal-img">
        <h1 id="title"></h1>
        <h3 id="description"></h3>
        <p id="name"></p>
       </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:46:28.323

```
dealObject.dname = $(this).find('input').html(); 
```

您将其设置为 input type='text' 元素的 innerHTML 吗？输入 type='text' 元素的 innerHTML 应始终作为空字符串返回。

我认为你应该使用 .val()

```
dealObject.dname = $(this).find('input').val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T00:39:04.383

哦，等一下，对不起，我看的不够仔细......这可能是因为有多个输入类型='文本元素'......这意味着它匹配多个元素。为了证实我的理论，你应该可以试试这个......

```
dealObject.dname = $(this).find('input').eq(0).val(); 
```

通过添加 .eq(0) 它应该只对第一个输入 type='text' 元素执行此操作，该元素是 id='name'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T13:10:59.120

发现你的问题，name不能作为js对象内的变量名。

改变：

```
var dealObject = {
    dealID : null,
    restaurantid : null,
    name : null,
    image : null,
    dname : null
} 
```

像这样：

```
var dealObject = {
    dealID : null,
    restaurantid : null,
    shortname : null,
    image : null,
    dname : null
} 
```

也使用这个：

```
$('#index2 [data-role="content"]').find('input#desc').val(dealObject.description);
$('#index2 [data-role="content"]').find('input#name').val(dealObject.dealName);
$('#index2 [data-role="content"]').find('input#did').val(dealObject.dealID); 
```

# asp.net - 将打印图标和日期选择器集成到 ASPX 页面中？

> ID：14946905
> 
> 赞同：0
> 
> 时间：2013-02-18T23:03:24.097
> 
> 标签：asp.net

我正在按照在线教程添加[功能 print-icon 和 javascript date-picker](http://www.codeproject.com/Articles/504567/Print-button-Date-picker-in-SSRS-Reports-for-Non-I)。但我无法将其合并到我现有的 .ASPX 项目中。

它告诉我首先，在报告查看器下方放置一个“服务器端 iframe”。

```
 <iframe id="frmPrint" name="frmPrint" runat="server" style = "display:none"></iframe> 
```

然后，它说将“以下 div 标签放在 iframe 声明下方（这是在处理打印的 ajax 请求时显示消息）。”

```
 <div id="spinner" class="spinner" style="display:none;">
    <table align="center" valign="middle" style="height:100%; width:100%">
    <tr>
    <td><img id="img-spinner" src="App_Data/print_icon.png" alt="Printing"/></td>
    <td><span style="font-family:Verdana; font-weight:bold;font-size:10pt;width:86px;">Printing...</span></td>
    </tr>
    </table>
    </div> 
```

所以假设我正在创建一个默认网站，它在“Default.aspx”页面中的什么位置？我有点迷路，任何提示表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T00:39:21.730

我知道 VS2012 中的默认页面与 VS2010 不同，但我刚刚在这里获得了 2010。

只需将它们生成的默认内容清空并替换为您的示例代码即可。它最终应该看起来像这样：

```
<%@ Page Title="Home Page" Language="VB" MasterPageFile="~/Site.Master" AutoEventWireup="false"
CodeFile="Default.aspx.vb" Inherits="_Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:ScriptManager ID="ScriptManager1"  EnablePageMethods="true" 
    EnablePartialRendering="true" runat="server">
</asp:ScriptManager>     

    <rsweb:ReportViewer ID="rvREXReport" runat="server" Width="100%" Height="798px"
Style="display: table !important; margin: 0px; overflow: auto !important;" 
ShowBackButton="true" onreportrefresh="rrvREXReport_ReportRefresh">
</rsweb:ReportViewer>   

 <iframe id="frmPrint" name="frmPrint" runat="server" style = "display:none"></iframe> 

<div id="spinner" class="spinner" style="display:none;">
<table align="center" valign="middle" style="height:100%;width:100%">
<tr>
<td><img id="img-spinner" src="../Images/ajax-loader.gif" alt="Printing"/></td>
<td><span style="font-family:Verdana; font-weight:bold;font-size:10pt;width:86px;">Printing...</span></td>
</tr>
</table>
</div> 
```

# javascript - 如何使用 css、javascript 或 jquery 忽略 html“代码”块中的前导和尾随换行符？

> ID：14946908
> 
> 赞同：13
> 
> 时间：2013-02-18T23:03:26.797
> 
> 标签：javascript, jquery, html, css

在我的 HTML 源代码中，我有一个如下代码块（我在此页面上使用 showdown 和 highlight.js）：

```
<pre><code class="cpp">
double myNumber = (double)4;
</code></pre> 
```

我的问题是第一个换行符仍然是“代码”块的一部分。这可能是因为封闭的“pre”块，但我需要它，因为 highlight.js 需要它（显然 HTML5 标准也[推荐它](http://www.w3.org/TR/html5/grouping-content.html#the-pre-element)）。代码呈现如下（注意前导换行符）：

![在此处输入图像描述](../Images/1764b54966bcd73ec1658d8fe3937549.png)

所以我的问题是，**使用 css、javascript 或 jquery，如何从像这样的“代码”块中删除前导或尾随换行符？**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-19T01:59:34.697

你可以使用这个技巧：

```
pre:first-line {
    line-height: 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T22:31:33.073

这是使用 Javascript 的另一种方法，它也解决了这个问题：

```
<script>
    window.onload = function (){
        // remove leading linebreaks from code blocks.
        var pre = document.getElementsByTagName("code");
        for (var i = 0, len = pre.length; i < len; i++) {
            var text = pre[i].firstChild.nodeValue;
            pre[i].firstChild.nodeValue = text.replace(/^\n+|\n+$/g, "");
        }
    }
</script> 
```

其他人发布了这个，然后删除了他们的答案，但我认为它值得保留。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-19T01:06:55.000

这就是`pre`默认情况下的工作方式：它尊重换行符和空格。如果您不想渲染换行符，则必须将其删除。如果您关心源的外观，请直接将其从源中删除或将其注释掉。

[http://jsfiddle.net/VL8tG/](http://jsfiddle.net/VL8tG/)

```
<pre><code class="cpp"><!--
-->double myNumber = (double)4;<!--
--></code></pre> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-12T22:03:14.523

我只是在荧光笔开始之前手动删除它们。

```
const trimLine = node => 
  node.firstChild.nodeValue = node.firstChild.nodeValue.replace(/^\n+|\n+$/g, "");

window.onload = function () {

  Array.prototype.slice
      .call(document.getElementsByTagName("code"), 0)
      .map(trimLine);

  hljs.initHighlightingOnLoad();

}
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-18T23:21:06.037

演示：http: [//jsfiddle.net/WjVVs/4/](http://jsfiddle.net/WjVVs/4/)。

在 PC 上使用 Chrome 和 FF 进行了测试。将插件应用于元素时，它在 IE 9 中*不起作用*`code`（应用于元素时似乎可以正常工作`pre`）。我找不到合适的解决方法，但请随时发表评论/更新。

这是[另一个答案](https://stackoverflow.com/a/9353201/453277)的修改版本。这个插件试图去除由文档的自然流动引起的额外缩进。我已经对其进行了修改，使其在前导空白方面更加智能。

如果它工作正常，您应该会看到如下内容：

![在此处输入图像描述](../Images/f6a48d42aa5c8e2d226c8a2c6d7c369b.png)

# 用法

`$("code").prettyPre(); // any selector here`

## 带有前导空格和额外缩进的 HTML

```
<div>
        <pre><code class="cpp">
           double myNumber = (double)4;

           // another line

           // another line

                // this is purposely indented further
                for( var i = 0; i < 100; i++ ){

                }            

        </code></pre>
</div> 
```

## 插入

```
(function( $ ) {
    $.fn.prettyPre = function( method ) {

        var defaults = {
            ignoreExpression: /\s/ // what should be ignored?
        };

        var methods = {
            init: function( options ) {
                this.each( function() {
                    var context = $.extend( {}, defaults, options );
                    var $obj = $( this );
                    var usingInnerText = true;
                    var text = $obj.get( 0 ).innerText;

                    // some browsers support innerText...some don't...some ONLY work with innerText.
                    if ( typeof text == "undefined" ) {
                        text = $obj.html();
                        usingInnerText = false;
                    }

                    // use the first line as a baseline for how many unwanted leading whitespace characters are present
                    var superfluousSpaceCount = 0;
                    var pos = 0;
                    var currentChar = text.substring( 0, 1 );

                    while ( context.ignoreExpression.test( currentChar ) ) {
                        if(currentChar !== "\n"){
                            superfluousSpaceCount++;
                        }else{
                            superfluousSpaceCount = 0;
                        }

                        currentChar = text.substring( ++pos, pos + 1 );
                    }

                    // split
                    var parts = text.split( "\n" );
                    var reformattedText = "";

                    // reconstruct
                    var length = parts.length;
                    for ( var i = 0; i < length; i++ ) {

                        // remove leading whitespace (represented by an empty string)
                        if(i === 0 && parts[0]=== ""){
                            continue;   
                        }

                        // cleanup, and don't append a trailing newline if we are on the last line
                        reformattedText += parts[i].substring( superfluousSpaceCount ) + ( i == length - 1 ? "" : "\n" );
                    }

                    // modify original
                    if ( usingInnerText ) {
                        $obj.get( 0 ).innerText = reformattedText;
                    }
                    else {
                        // This does not appear to execute code in any browser but the onus is on the developer to not 
                        // put raw input from a user anywhere on a page, even if it doesn't execute!
                        $obj.html( reformattedText );
                    }
                } );
            }
        }

        if ( methods[method] ) {
            return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ) );
        }
        else if ( typeof method === "object" || !method ) {
            return methods.init.apply( this, arguments );
        }
        else {
            $.error( "Method " + method + " does not exist on jQuery.prettyPre." );
        }
    }
} )( jQuery ); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-11T16:04:21.710

这些函数使用一个类（添加到`pre`）来删除前导和尾随空格

```
function removeWhitespace(indent) {
  // Get a list of all elements that need whitespace removed by indent value (will have class `indent-X`)
  // List may be 0 long - loop simply doesn't run
  var preElements = document.getElementsByClassName('indent-'+indent);
  for (i = 0; i < preElements.length; i++) {
    preElements[i].innerHTML = preElements[i].innerHTML.split('\n'+' '.repeat(indent)).join('\n').split('\n'+' '.repeat(indent-2)+'</code>').join('</code>').split("\n").slice(1,-1).join("\n");
    //split('\n'+' '.repeat(indent)).join('\n') -- Split at every newline followed by X spaces. Then join together with the newlines.
    // .split('\n'+' '.repeat(indent-2)+'</code>').join('</code>') -- The lastline will have 2 less spaces, so remove those, and the newline at the end. Add the tag back in.
    //.split("\n").slice(1,-2).join("\n"); -- Remove the first and last lines.
  }
}

function removeWhitespaces() {
  // Loop over all indents, 2 to 40
  for (indent = 2; indent <= 40; indent+=2) {
    removeWhitespace(indent);
  }
} 
```

只需将要删除的空格数量`indent-X`的类添加到.`X``pre`

[JSFiddle](https://jsfiddle.net/rrtgx094/1/)

```
function removeWhitespace(indent) {
  // Get a list of all elements that need indent removed by indent value (will have class `indent-X`)
  // List may be 0 long - loop simply doesn't run
  var preElements = document.getElementsByClassName('indent-' + indent);

  for (i = 0; i < preElements.length; i++) {
    preElements[i].innerHTML = preElements[i].innerHTML.split('\n' + ' '.repeat(indent)).join('\n').split('\n' + ' '.repeat(indent - 2) + '</code>').join('</code>').split("\n").slice(1, -2).join("\n");
    //split('\n'+' '.repeat(indent)).join('\n') -- Split at every newline followed by X spaces. Then join together with the newlines.
    // .split('\n'+' '.repeat(indent-2)+'</code>').join('</code>') -- The lastline will have 2 less spaces, so remove those, and the newline at the end. Add the tag back in.
    //.split("\n").slice(1,-1).join("\n"); -- Remove the first and last lines.

    // Remove the clickme element.
    document.getElementById('clickme').innerHTML = '';
  }
}

function removeWhitespaces() {
  // Loop over all indents, 2 to 40
  for (indent = 2; indent <= 40; indent += 2) {
    removeWhitespace(indent);
  }
}
```

```
.indent-14 {
  background-color: #ccc;
}
```

```
<body>
  <div id="clickme" onclick="removeWhitespaces()">
    Click Me
  </div>
  <pre class="indent-14">
    <code>
              function createCORSRequest(method, url) {
                var request = new XMLHttpRequest();
                if ('withCredentials' in request) {
                  request.open(method, url, true);
                } else if (typeof XDomainRequest != 'undefined') {
                  request = new XDomainRequest();
                  request.open(method, url);
                } else {
                  request = null;
                }
                return request;
              }
    </code>
  </pre>
</body>
```

# android - Android Webview：如何从 cookie 中检索到期日期

> ID：14946909
> 
> 赞同：1
> 
> 时间：2013-02-18T23:03:32.343
> 
> 标签：android, webview, cookiemanager

在 Android 中，有没有办法检查 webkit 使用的 cookie 是否已过期？`CookieManager.getCookie(url)`没有有效期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:11:36.633

好吧，您必须先将 cookie 检索到 Cookie（org.apache.http.cookie.Cookie）对象，然后使用“

> isExpired(日期日期)

" 如果此 cookie 已过期，则返回 true。

您还可以使用测试日期

> 获取过期日期（）

.

# r - 在 R 中制作极地热图

> ID：14946910
> 
> 赞同：1
> 
> 时间：2013-02-18T23:03:40.877
> 
> 标签：r, heatmap, polar-coordinates

您好我有一组数据（.csv 文件），其中包含距离方向和频率信息，格式为...

```
 30   60   90   120   150   ...
100  131   12   22   201    66
200   45   83  351   180   210
300   99  121   33     3   306
... 
```

我对 R 有一些经验，但在将一些图表放在一起时遇到了麻烦。

我想使用上面的数据制作一个极坐标图。“标题”（行名）跨越前 30、60、90 等，范围在第一列（100、200、300 等）下方，强度是距离方向组合的值，例如 100m @ 30deg = 131 次观察。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:15:22.537

我会以长格式获取您的数据，将行名作为一列，然后使用`ggplot2`和`coord_polar`

```
 library(reshape2) 
 library(ggplot2)
 # add rownames a column 'length'
  DT$length <- rownames(DT)
 # make into long format (the value column will be the intensities
  dtlong <- melt(DT)
 # convert from factor column `X30` etc to numeric showing angle
  dtlong$angle <- as.numeric(gsub(dtlong$variable,pattern = 'X',replacement=''))
# use ggplot with coord_polar to make the plot
ggplot(dtlong, aes(x=length,y=angle, size = value)) + 
 geom_point() + 
 coord_polar(theta = 'y') 
```

![在此处输入图像描述](../Images/9998ba8c18bdc26e2fa3d6e583c4d1df.png)

# c# - 在 MouseDown 事件处理程序中检测 Ctrl+Left（鼠标按钮）

> ID：14946912
> 
> 赞同：6
> 
> 时间：2013-02-18T23:03:45.097
> 
> 标签：c#, winforms, devexpress

当我第一次按下控制键（左键）然后单击鼠标左键时，为什么会执行以下代码。我正在修改现有代码，下面的代码已经存在。我想以前没有人尝试过，按下控制键，它只用于鼠标左键单击，它一直适用于这种情况。但是我希望在按下控制键的同时按下鼠标左键时执行不同的代码。

```
private void treeList1_MouseDown(object sender, System.Windows.Forms.MouseEventArgs e)
{
    TreeList tree = sender as TreeList;

    if (e.Button == MouseButtons.Right && ModifierKeys == Keys.None && tree.State == TreeListState.Regular)
    {
       //the code that is here gets executed 
       MessageBox.Show("I am here");
    }
} 
```

我将非常感谢任何提示或帮助。

PS我想在上述情况下添加它，当我检查 e.button 值时，它显示等于 Right 尽管我按下了鼠标左键和 Ctrl 键。这对我来说是个谜。

亲爱的 StackOverflow 研究员：我发现了问题，因为我在 MAC 上使用虚拟机，所以我不得不在我的虚拟机首选项上禁用一些键映射，现在我的原始代码可以工作了。感谢你的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T00:29:58.340

`Keys.None`值为 0，单独使用时很难检测到“没有按下任何键”。这个：

```
 void Form1_MouseDown(object sender, MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left && (ModifierKeys & Keys.None) == Keys.None)
        {
            MessageBox.Show("No key was held down.");
        }
    } 
```

只要用左键单击，无论组合键是什么，都会弹出一个消息框。

然而，这：

```
 void Form1_MouseDown(object sender, MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left && (ModifierKeys & Keys.Control) == Keys.Control)
        {
            MessageBox.Show("Control key was held down.");
        }
    } 
```

`Control`仅当按住键（并单击鼠标左键）时才会弹出消息框。

尝试反转您的条件并检测`Control`单击时何时按下键（而不是检测何时未按下*任何键*）。话虽如此，我很难使用相同的代码`Keys.ControlKey`或`Keys.LControlKey`出于某种原因，因此隔离*左控制键*需要更多研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:06:10.237

The problem was that there was a key mapping between MAC and my Windows Virtual Machine that needed to be disabled. Thanks for all the help

# c# - 访问 BitmapData 不正常显示“无法访问受保护的内存”

> ID：14946914
> 
> 赞同：0
> 
> 时间：2013-02-18T23:03:48.107
> 
> 标签：c#, memory, bitmap, garbage-collection, bitmapdata

我正在使用 C# 中的位图，并使用不安全的 BitmapData 类直接访问像素数据。

不规律地，没有明显的原因，我得到了这个错误（很少，可能每隔一小时左右）

> 尝试读取或写入受保护的内存。这通常表明其他内存已损坏。

当我尝试使用不安全的代码获取/设置像素时会发生这种情况。有没有办法解决这个问题？我在 Lists 中保留了 Bitmap 和 BitmapData 的对象引用，所以我认为它没有被 GC 破坏，但是 GC 可能已经移动了它。这可能吗？

请注意，这不会发生在任何可预测的时间（例如在启动、初始化或运行图像代码时）。会发生什么？我以为锁定的位图被锁定了，内存不会突然变得不可访问，但事实并非如此。有任何想法吗？

# c# - 如何用等待包装方法调用？

> ID：14946918
> 
> 赞同：1
> 
> 时间：2013-02-18T23:03:54.083
> 
> 标签：c#, methods, proxy, wrapper, async-await

所有对服务的调用都应通过个人渠道进行。所以所有可以访问服务器代理的方法都应该是这样的：

```
public async Task<SDRLocation[]> FindLocationsAsync(string searchString)
    {
        ChannelFactory<IQueryService> channel = new ChannelFactory<IQueryService>("SomeServ_IQuery");
        channel.Open();
        SomeProxy = channel.CreateChannel();
        Location[] locationEntitiesFound = await SomeProxy.FindLocationsAsync(searchString);
        ((IChannel)SomeProxy ).Close();

        return locationEntitiesFound.Select(x => new SDRLocation(x)).ToArray();
    } 
```

但是因为我有很多像这个服务调用这样的方法，所以我试图避免代码重复并创建这个方法包装器：

```
public TResult HandleServiceCall<TResult>(Func<IPlantOrgQueryService, TResult> serviceMethod)
    {
        ChannelFactory<IQueryService> channel = new ChannelFactory<IQueryService>("SomeServ_IQuery");
        channel.Open();
        IQueryService newProxy = channel.CreateChannel();
        TResult results = serviceMethod(newProxy);
        ((IChannel)newProxy).Close();

         return results;
    } 
```

现在我希望像这样到处打电话：

```
public async Task<SDRLocation[]> FindLocationsAsync(string searchString)
    {
        Location[] locationEntitiesFound = await HandleServiceCall(x => x.FindLocationsAsync(searchString));

        return locationEntitiesFound.Select(x => new SDRLocation(x)).ToArray();
    } 
```

但我最终得到错误“通信对象 System.ServiceModel.Channels.ClientReliableDuplexSessionChannel，因为它已被中止，所以不能用于通信。”

不明白出了什么问题，因为没有 HandleServiceCall 的方法工作得很好......

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:54:04.257

的类型`TResult`会让你知道出了什么问题。是`Task<Location[]>`。因此，您在`Close`异步调用完成之前处理代理（通过）。

解决方法是`await`调用`Task`before `Close`，就像您的原始代码正在做的那样。这应该可以解决问题：

```
public async Task<TResult> HandleServiceCall<TResult>(Func<IPlantOrgQueryService, Task<TResult>> serviceMethod)
{
    ChannelFactory<IQueryService> channel = new ChannelFactory<IQueryService>("SomeServ_IQuery");
    channel.Open();
    IQueryService newProxy = channel.CreateChannel();
    TResult results = await serviceMethod(newProxy);
    ((IChannel)newProxy).Close();

     return results;
} 
```

# c++ - 如何让 VS2008 在 C++ 项目中使用 __cdecl 而不是 __thiscall？

> ID：14946921
> 
> 赞同：2
> 
> 时间：2013-02-18T23:04:01.957
> 
> 标签：c++, visual-studio-2008, linker

我正在尝试在 Visual Studio 2008 中构建一个开源 C++ 项目。我加载了解决方案文件并编译了所有内容，但由于找不到某些方法，我遇到了一堆链接错误。在使用 DUMPBIN.EXE 检查有问题的 .lib 文件后，我可以看到问题所在：.lib 中的方法都`__cdecl`在其签名中，而链接器正在寻找与之等效的方法`__thiscall`。

我怎样才能让 VS 2008`__cdecl`代替使用？

注意：该项目是[CCV 的一个分支](https://github.com/pwjones/ccv_pgr)，一个基于 OpenCV 的多点触控跟踪程序。此分支的目的是通过相机制造商提供的 FlyCapture2 库为称为 Flea3 的相机提供支持。以下是链接器错误：

```
1>ofxFlea3.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: __thiscall FlyCapture2::Image::Image(void)" (__imp_??0Image@FlyCapture2@@QAE@XZ) referenced in function "public: __thiscall ofxFlea3::ofxFlea3(void)" (??0ofxFlea3@@QAE@XZ)
1>ofxFlea3.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: virtual __thiscall FlyCapture2::Image::~Image(void)" (__imp_??1Image@FlyCapture2@@UAE@XZ) referenced in function "public: __thiscall ofxFlea3::ofxFlea3(void)" (??0ofxFlea3@@QAE@XZ)
1>ofxFlea3.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: __thiscall FlyCapture2::Camera::Camera(void)" (__imp_??0Camera@FlyCapture2@@QAE@XZ) referenced in function "public: __thiscall ofxFlea3::ofxFlea3(void)" (??0ofxFlea3@@QAE@XZ)
1>ofxFlea3.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: virtual __thiscall FlyCapture2::Camera::~Camera(void)" (__imp_??1Camera@FlyCapture2@@UAE@XZ) referenced in function "public: __thiscall ofxFlea3::ofxFlea3(void)" (??0ofxFlea3@@QAE@XZ)
1>ofxFlea3.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: virtual __thiscall FlyCapture2::Error::~Error(void)" (__imp_??1Error@FlyCapture2@@UAE@XZ) referenced in function "void __cdecl PrintError(class FlyCapture2::Error)" (?PrintError@@YAXVError@FlyCapture2@@@Z)
1>ofxFlea3.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: virtual void __thiscall FlyCapture2::Error::PrintErrorTrace(void)const " (__imp_?PrintErrorTrace@Error@FlyCapture2@@UBEXXZ) referenced in function "void __cdecl PrintError(class FlyCapture2::Error)" (?PrintError@@YAXVError@FlyCapture2@@@Z)
1>ofxFlea3.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: virtual class FlyCapture2::Error __thiscall FlyCapture2::BusManager::GetCameraFromIndex(unsigned int,class FlyCapture2::PGRGuid *)" (__imp_?GetCameraFromIndex@BusManager@FlyCapture2@@UAE?AVError@2@IPAVPGRGuid@2@@Z) referenced in function "public: void __thiscall ofxFlea3::listDevices(void)" (?listDevices@ofxFlea3@@QAEXXZ)
1>ofxFlea3.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: virtual __thiscall FlyCapture2::BusManager::~BusManager(void)" (__imp_??1BusManager@FlyCapture2@@UAE@XZ) referenced in function "public: void __thiscall ofxFlea3::listDevices(void)" (?listDevices@ofxFlea3@@QAEXXZ)
1>ofxFlea3.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: __thiscall FlyCapture2::Error::Error(class FlyCapture2::Error const &)" (__imp_??0Error@FlyCapture2@@QAE@ABV01@@Z) referenced in function "public: void __thiscall ofxFlea3::listDevices(void)" (?listDevices@ofxFlea3@@QAEXXZ)
1>ofxFlea3.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: virtual class FlyCapture2::Error __thiscall FlyCapture2::BusManager::GetNumOfCameras(unsigned int *)" (__imp_?GetNumOfCameras@BusManager@FlyCapture2@@UAE?AVError@2@PAI@Z) referenced in function "public: void __thiscall ofxFlea3::listDevices(void)" (?listDevices@ofxFlea3@@QAEXXZ)
1>ofxFlea3.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: __thiscall FlyCapture2::Error::Error(void)" (__imp_??0Error@FlyCapture2@@QAE@XZ) referenced in function "public: void __thiscall ofxFlea3::listDevices(void)" (?listDevices@ofxFlea3@@QAEXXZ)
1>ofxFlea3.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: __thiscall FlyCapture2::BusManager::BusManager(void)" (__imp_??0BusManager@FlyCapture2@@QAE@XZ) referenced in function "public: void __thiscall ofxFlea3::listDevices(void)" (?listDevices@ofxFlea3@@QAEXXZ)
1>ofxFlea3.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: virtual class FlyCapture2::Error __thiscall FlyCapture2::Image::Save(char const *,enum FlyCapture2::ImageFileFormat)" (__imp_?Save@Image@FlyCapture2@@UAE?AVError@2@PBDW4ImageFileFormat@2@@Z) referenced in function "public: void __thiscall ofxFlea3::initFlea3(int,int,int,int)" (?initFlea3@ofxFlea3@@QAEXHHHH@Z)
1>ofxFlea3.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: virtual class FlyCapture2::Error __thiscall FlyCapture2::Image::Convert(enum FlyCapture2::PixelFormat,class FlyCapture2::Image *)const " (__imp_?Convert@Image@FlyCapture2@@UBE?AVError@2@W4PixelFormat@2@PAV12@@Z) referenced in function "public: void __thiscall ofxFlea3::initFlea3(int,int,int,int)" (?initFlea3@ofxFlea3@@QAEXHHHH@Z)
1>ofxFlea3.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: virtual class FlyCapture2::Error __thiscall FlyCapture2::Image::ReleaseBuffer(void)" (__imp_?ReleaseBuffer@Image@FlyCapture2@@UAE?AVError@2@XZ) referenced in function "protected: virtual void __thiscall ofxFlea3::getNewFrame(unsigned char *)" (?getNewFrame@ofxFlea3@@MAEXPAE@Z)
1>ofxFlea3.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: virtual struct FlyCapture2::TimeStamp __thiscall FlyCapture2::Image::GetTimeStamp(void)const " (__imp_?GetTimeStamp@Image@FlyCapture2@@UBE?AUTimeStamp@2@XZ) referenced in function "protected: virtual void __thiscall ofxFlea3::getNewFrame(unsigned char *)" (?getNewFrame@ofxFlea3@@MAEXPAE@Z)
1>ofxFlea3.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: virtual unsigned char * __thiscall FlyCapture2::Image::GetData(void)" (__imp_?GetData@Image@FlyCapture2@@UAEPAEXZ) referenced in function "protected: virtual void __thiscall ofxFlea3::getNewFrame(unsigned char *)" (?getNewFrame@ofxFlea3@@MAEXPAE@Z)
1>ofxFlea3.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: virtual unsigned int __thiscall FlyCapture2::Image::GetDataSize(void)const " (__imp_?GetDataSize@Image@FlyCapture2@@UBEIXZ) referenced in function "protected: virtual void __thiscall ofxFlea3::getNewFrame(unsigned char *)" (?getNewFrame@ofxFlea3@@MAEXPAE@Z)
1>ofxFlea3.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: virtual void __thiscall FlyCapture2::Image::GetDimensions(unsigned int *,unsigned int *,unsigned int *,enum FlyCapture2::PixelFormat *,enum FlyCapture2::BayerTileFormat *)const " (__imp_?GetDimensions@Image@FlyCapture2@@UBEXPAI00PAW4PixelFormat@2@PAW4BayerTileFormat@2@@Z) referenced in function "protected: virtual void __thiscall ofxFlea3::getNewFrame(unsigned char *)" (?getNewFrame@ofxFlea3@@MAEXPAE@Z) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:07:22.650

问题是我正在链接外部 FlyCapture2 库的 64 位版本。切换到 32 位版本解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T23:19:08.157

默认情况下，Visual Studio 将 __thiscall 用于成员函数。由于它可以正确编译，因此您的库中的标头似乎没有明确声明调用约定。

听起来您需要对库使用 C 链接。尝试用

```
extern "C" { } 
```

# c# - Skype 将什么 System.Windows UIElement 用于其“联系人列表”？

> ID：14946922
> 
> 赞同：1
> 
> 时间：2013-02-18T23:04:08.217
> 
> 标签：c#, wpf, user-interface, skype, uielement

嘿，所以我想知道`UIElement`Skype 使用什么`Contact List`来显示每个内容中的其他详细信息`ListItem`（例如`Status Updates`、`Avatars`等`Online Status`）？

[![Skype 列表框](../Images/403eed2bc687d3a7bac99cd90dbe2ebc.png)](https://i.stack.imgur.com/qbzNR.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/bckdwlmw.aym.png)）]

据我所知，常规`System.Windows.Forms.ListBox`只允许您显示一行文本来表示它`Object`。

[![windows.form.listbox](../Images/e94294027a37649fb2a8d09cf7caf342.png)](https://i.stack.imgur.com/iMYC2.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/sfcfdepr.ujc.png)）]

我正在寻找重新创建类似但出于不同目的的东西，但我在谷歌上找不到很多东西（所以我想看看这里是否有人有修改 a 设计的经验`ListBox`，以获得更好的视角在每个细节上）。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T23:55:47.357

`Datatemplate`这是为 WPF创建自定义的一个非常基本的示例。

首先，您`Model`使用要显示的所有属性创建您的，然后将它们的列表绑定到您的`ListBox`. 然后你可以创建一个`DataTemplate`这基本上是你的 xaml(visual) 表示`Model`，你可以让它看起来像你想要的那样，你可以`Model`使用`DataTemplate`.

例子：

窗口代码：

```
public partial class MainWindow : Window
{
    private ObservableCollection<MyListBoxItemModel> _listBoxItems = new ObservableCollection<MyListBoxItemModel>();

    public MainWindow()
    { 
        InitializeComponent();
        ListBoxItems.Add(new MyListBoxItemModel { Title = "Item 1", Image = new BitmapImage(new Uri("http://icons.iconarchive.com/icons/custom-icon-design/mini/32/Search-icon.png")) });
        ListBoxItems.Add(new MyListBoxItemModel { Title = "Item 2", Image = new BitmapImage(new Uri("http://icons.iconarchive.com/icons/custom-icon-design/mini/32/Search-icon.png")) });
        ListBoxItems.Add(new MyListBoxItemModel { Title = "Item 3", Image = new BitmapImage(new Uri("http://icons.iconarchive.com/icons/custom-icon-design/mini/32/Search-icon.png")) });
    }

    public ObservableCollection<MyListBoxItemModel> ListBoxItems
    {
        get { return _listBoxItems; }
        set { _listBoxItems = value; }
    }
} 
```

模型：

```
public class MyListBoxItemModel : INotifyPropertyChanged
{
    private string _title;
    private string _line2 = "Line2";
    private BitmapImage _image;

    public string Title
    {
        get { return _title; }
        set { _title = value; NotifyPropertyChanged("Title"); }
    }

    public string Line2
    {
        get { return _line2; }
        set { _line2 = value; NotifyPropertyChanged("Line2"); }
    }

    public BitmapImage Image
    {
        get { return _image; }
        set { _image = value; NotifyPropertyChanged("Image"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(string p)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(p));
        }
    }
} 
```

xml:

```
 <Window x:Class="WpfApplication7.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication7"
        Title="MainWindow" Height="351" Width="464" Name="UI" >

 <Window.Resources>
    <!-- The tempate for MyListBoxItemModel -->
    <DataTemplate DataType="{x:Type local:MyListBoxItemModel}">
        <StackPanel Orientation="Horizontal">
            <Image Source="{Binding Image}" />
            <StackPanel>
                <TextBlock Text="{Binding Title}" FontWeight="Medium" />
                <TextBlock Text="{Binding Line2}" />
            </StackPanel>
        </StackPanel>
    </DataTemplate>   
 </Window.Resources>

    <Grid>
        <ListBox ItemsSource="{Binding ElementName=UI, Path=ListBoxItems}" />
    </Grid>

</Window> 
```

这只是一个带有`Image`和一些文本的简单示例，但它应该可以帮助您入门，只需修改`DataTemplate`以及`Model`您希望如何显示`snp code`数据

结果：

![在此处输入图像描述](../Images/ecc15dcea7bc4bafdacf051fca90c692.png)

# ios - 如何缓存表格视图的图像？

> ID：14946923
> 
> 赞同：2
> 
> 时间：2013-02-18T23:04:10.240
> 
> 标签：ios, caching

我有以下代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
//P1
UITableViewCell *cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell Identifier"] autorelease];
cell.textLabel.text = [photoNames objectAtIndex:indexPath.row];

//Check if object for key exists, load from cache, otherwise, load

    id cachedObject = [_cache objectForKey:[photoURLs objectAtIndex:indexPath.row]];

    if (cachedObject == nil) {
        //IF OBJECT IS NIL, SET IT TO PLACEHOLDERS
        cell.imageView.image = cachedObject;
        [self setImage:[UIImage imageNamed:@"loading.png"] forKey:[photoURLs objectAtIndex:indexPath.row]];
        [cell setNeedsLayout];

    } else {
        //fetch imageData
        dispatch_async(kfetchQueue, ^{
            //P1
            NSData *imageData = [NSData dataWithContentsOfURL:[photoURLs objectAtIndex:indexPath.row]];
                dispatch_async(dispatch_get_main_queue(), ^{
                    cell.imageView.image = [UIImage imageWithData:imageData];
                    [self setImage:cell.imageView.image forKey:cell.textLabel.text];
                    [cell setNeedsLayout];
                });
        });
    }
return cell; 
```

}

除此之外，viewDidLoad 方法从 web 获取来自 flickr 的 json 结果，以填充 photoNames 和 photoURLs。我试图将已下载的图像缓存到本地 NSDictionary 中。问题是图像未加载。甚至还没有 loading.png 占位符图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T23:09:52.243

您想将其保存在应用程序的 Documents 目录中：

```
NSData *imageData = UIImagePNGRepresentation(newImage);

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

NSString *imagePath =[documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.png",@"cached"]];

NSLog((@"pre writing to file"));
if (![imageData writeToFile:imagePath atomically:NO]) 
{
    NSLog((@"Failed to cache image data to disk"));
}
else
{
    NSLog((@"the cachedImagedPath is %@",imagePath)); 
} 
```

然后只需将路径保存在 NSMutableDictionary 中：

```
[yourMutableDictionary setObject:theIMagePath forKey:@"CachedImagePath"]; 
```

然后用类似的东西检索它：

```
 NSString *theImagePath = [yourMutableDictionary objectForKey:@"cachedImagePath"];
 UIImage *customImage = [UIImage imageWithContentsOfFile:theImagePath]; 
```

我建议将字典保存在 NSUserDefaults 中。

# php - 检测移动设备，如果移动设备使用替代 CSS 样式表？

> ID：14946924
> 
> 赞同：0
> 
> 时间：2013-02-18T23:04:12.397
> 
> 标签：php, css

嗨，如果用户正在访问我的移动设备网站，​​有人可以帮助我寻找一种将浏览器指向替代 CSS 样式表的方法吗？

我尝试使用以下代码，但它似乎对我不起作用。有没有其他方法可以用javascript或其他方式做到这一点？

如果有人能告诉我这样做的方法，我将不胜感激，因为我所做的一切都行不通。

谢谢

```
<link media="only screen and (max-device-width: 480px)"
href="iPhone.css" type="text/css" rel="stylesheet" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:07:47.097

试试这个（取自[Perishable Press](http://perishablepress.com/the-5-minute-css-mobile-makeover/)）：

```
<link rel="stylesheet" href="http://domain.tld/screen.css" type="text/css" media="Screen" />
<link rel="stylesheet" href="http://domain.tld/mobile.css" type="text/css" media="handheld" /> 
```

与`media="screen"`_ `media="screen"`_`media="handheld"`

# android - 在接受之前取消蓝牙服务器套接字时，整个过程都会死亡。为什么？

> ID：14946927
> 
> 赞同：12
> 
> 时间：2013-02-18T23:04:19.290
> 
> 标签：android, bluetooth, serversocket

我正在为 SDK 10 (2.3.3) 编译：

```
android:minSdkVersion="10"
android:targetSdkVersion="16" 
```

我正在两部索尼爱立信智能手机上进行测试。一个有Android 2.3.7，另一个有4.0.1。

我`listenUsingInsecureRfcommWithServiceRecord`用来在蓝牙上打开一个新的服务器套接字并监听连接。

如果连接被成功接受，那么一切正常。我什至可以尝试取消服务器套接字，但这似乎不会影响刚刚创建的连接套接字。

但是，当我想在接受任何连接之前取消服务器套接字时，一旦`bluetoothServerSocket.close();`执行该行，整个活动就会关闭并且进程终止。此外，这不是我可以处理**的常规异常。**

实际上甚至 logcat 本身也退出了！我必须再次快速执行它以获取您在下面看到的错误：

```
Zygote  D  Process 25471 terminated by signal (11)
  295         InputDispatcher  W  channel '2c2e20a8 com.pligor.test/activities.MainActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
  295         InputDispatcher  E  channel '2c2e20a8 com.pligor.test/activities.MainActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
  295                dalvikvm  D  GC_FOR_ALLOC freed 1299K, 21% free 13252K/16583K, paused 93ms
  295         InputDispatcher  W  Attempted to unregister already unregistered input channel '2c2e20a8 com.pligor.test/activities.MainActivity (server)'
  295        BluetoothService  D  Tracked app 25471 diedType:10
  295        BluetoothService  D  Removing service record 10009 for pid 25471
  132          SurfaceFlinger  D  Release buffer at 0x61c08
  295           WindowManager  I  WINDOW DIED Window{2c2e20a8 com.pligor.test/activities.MainActivity paused=false}
  295         ActivityManager  I  Process com.pligor.test (pid 25471) has died.
  295         ActivityManager  W  Force removing ActivityRecord{2c021800 com.pligor.test/activities.MainActivity}: app died, no saved state
  295           WindowManager  W  Failed looking up window
  295           WindowManager  W  java.lang.IllegalArgumentException: Requested window android.os.BinderProxy@2bf3e798 does not exist
  295           WindowManager  W    at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:7165)
  295           WindowManager  W    at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:7156)
  295           WindowManager  W    at com.android.server.wm.WindowState$DeathRecipient.binderDied(WindowState.java:1545)
  295           WindowManager  W    at android.os.BinderProxy.sendDeathNotice(Binder.java:417)
  295           WindowManager  W    at dalvik.system.NativeStart.run(Native Method)
  295           WindowManager  I  WIN DEATH: null
  295      BluetoothEventLoop  D  Property Changed: UUIDs : 11
  295    hAdapterStateMachine  D  BluetoothOn process message: 51
  295     InputManagerService  W  Got RemoteException sending setActive(false) notification to pid 25471 uid 10040 
```

注意：由信号 (11) 终止的进程意味着分段错误 ( [http://en.wikipedia.org/wiki/SIGSEGV](http://en.wikipedia.org/wiki/SIGSEGV) )。

**编辑**

我使用以下代码（ ）创建*蓝牙*`Scala`服务器套接字：

```
private val bluetoothServerSocket: BluetoothServerSocket = try {
    bluetoothAdapter.listenUsingInsecureRfcommWithServiceRecord(MY_SERVICE_NAME_INSE‌​CURE, MY_UUID_INSECURE); 
} 
catch { 
    case e: IOException => throw new ServerSocketException; 
} 
```

我使用此代码关闭*蓝牙*套接字：

```
try { 
    isCancelled = true; 
    bluetoothServerSocket.close(); 
} catch { 
    case e: IOException => throw new NotClosedException; 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T19:28:08.863

我遇到过类似的问题，问题的根本原因是不止一次在套接字上调用 close。为了纠正这个问题，我将我的蓝牙套接字封装在一个特殊的类中，以防止 close 方法被多次调用。

请注意，关闭由蓝牙套接字创建的流能够在套接字上调用 close。下面解决问题。

```
public class CloseOnceBluetoothSocket 
{
private final BluetoothSocket mSocket;
private boolean mIsClosed;

public CloseOnceBluetoothSocket(BluetoothSocket socket)
{
    this.mSocket = socket;
}

public void connect() throws IOException
{
    mSocket.connect();
}

public InputStream getInputStream() throws IOException
{
    return new FilterInputStream(mSocket.getInputStream()) {
        @Override
        public void close() throws IOException
        {
            CloseOnceBluetoothSocket.this.close();
        }
    };
}

public OutputStream getOutputStream() throws IOException
{
    return new FilterOutputStream(mSocket.getOutputStream()) {
        @Override
        public void close() throws IOException
        {
            CloseOnceBluetoothSocket.this.close();
        }
    };
}

public void close() throws IOException
{
    synchronized (mSocket) {
        if (!mIsClosed) {
            mSocket.close();
            mIsClosed = true;
        }
    }
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T22:18:34.470

如果关闭套接字会造成如此大的损害，那么为什么不创建一个布尔标志，在用户连接时设置为真，在用户断开连接时设置为假；然后仅在用户先前连接时才调用 close 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T00:13:32.697

我想我已经找到了解决这个问题的方法。“我认为”是因为这尚未在许多设备上进行测试。

*下面的代码是 Scala*

对于解决方法，我利用了超时的重载方法**accept(int)**

所以我们有一个变量来表示你在下面看到的无限循环的状态

```
private var toContinue = true; 
```

我们只是在一个while循环中重复接受

```
while (toContinue) {
  try {
    //this is a blocking call and will only return on a successful connection or an exception, or on timeout
    val socket = bluetoothServerSocket.accept(10000); //msec

    connectionAccepted(socket);
  } catch {
    case e: IOException => {
      Logger("accepting timed out");
    }
  }
} 
```

所以现在`bluetoothServerSocket.close()`我们只是将变量设置为 false而不是调用

```
def cancel() {
    toContinue = false;
} 
```

实际代码稍微复杂一些，因为您需要一个回调函数在 while 循环退出时执行某些操作，但主要问题已解决，如上所示

# c# - 在小写和大写之间添加空格？

> ID：14946933
> 
> 赞同：6
> 
> 时间：2013-02-18T23:04:56.907
> 
> 标签：c#, string

当字符串中有大写字符或下划线时，我想添加一个空格。

我该怎么做呢？

***例 1***

**输入**

```
ThisIsAnInputString 
```

**输出（结果）**

```
This Is An Input String 
```

***例 2***

**输入**

```
This_Is_An_Input_String 
```

**输出（结果）**

```
This Is An Input String 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-18T23:14:08.187

您可以使用匹配一个小写字符后跟一个大写字符的正则表达式，并在以下之间添加一个可选的下划线：

```
string output = Regex.Replace(input, "([a-z])_?([A-Z])", "$1 $2"); 
```

您可能还想使用它来处理单个字符的单词：

```
string output = Regex.Replace(input, "(?<!^)_?([A-Z])", " $1"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T23:31:04.687

下划线：

```
string inputString = "This_Is_An_Input_String";
string resultString = inputString.Replace('_', ' '); 
```

首都：

```
string inputString = "ThisIsAnInputString";
//this will put a space before all capitals that are preceded by a lowercase character
string resultString = Regex.Replace(inputString, @"([a-z])([A-Z])", "$1 $2"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T00:47:34.193

根据您的规格，您想在任何大写字符之前添加一个空格。这也应该适用于第一个字母。所有下划线都应替换为空格。这里的大多数答案都省略了第一个空格（之前`This`）。

```
var pattern = "([a-z?])[_ ]?([A-Z])";

var input = "ThisIsATest";
var output = Regex.Replace(input, pattern, "$1 $2");
// output = " This Is A Test"

var input = "This_Is_A_Test";
var output = Regex.Replace(input, pattern, "$1 $2");
// output = " This Is A Test"

var input = "ThisIsAnInputString";
var output = Regex.Replace(input, pattern, "$1 $2");
// output = " This Is An Input String"

var input = "This_Is_An_Input_String";
var output = Regex.Replace(input, pattern, "$1 $2");
// output = " This Is An Input String" 
```

如果您不希望开头有*多余的*空间，请使用[TrimStart](http://msdn.microsoft.com/en-us/library/system.string.trimstart%28v=vs.110%29.aspx)

```
var input = "This_Is_A_Test";
var output = Regex.Replace(input, pattern, "$1 $2").TrimStart(' ');
// output = "This Is A Test" 
```

**编辑（更新）：**

我已将不同的正则表达式建议编译到一个小型测试应用程序中以验证结果：

```
static void Main(string[] args)
{
  const string expectedResult = "This Is A Test";
  var samples = new string[][]
      {
        new [] {"This Is A Test", "This Is A Test"},
        new [] {"ThisIsATest", "This Is A Test"},
        new [] {"This_Is_A_Test", "This Is A Test"},
        new [] {"ThisIsA_Test", "This Is A Test"},
        new [] {"This_IsATest", "This Is A Test"},
        new [] {"_ThisIsATest", "This Is A Test"},
        new [] {"_This_Is_A_Test", "This Is A Test"},
        new [] {"Thi_s_Is_A_Test", "Thi s Is A Test"},
        new [] {"T hi_s_Is_A_Te s_ t", "T hi s Is A Te s  t"}
      };

  foreach (var input in samples)
  {
    Console.WriteLine(input[0] + " => " + input[1]);

    // Guffa 1 1/9 correct.
    Console.WriteLine("Guffa 1:         " + (Regex.Replace(input[0], @"([a-z])_?([A-Z])", "$1 $2") == input[1]));

    // Guffa 2 4/9 correct.
    Console.WriteLine("Guffa 2:         " + (Regex.Replace(input[0], @"(?<!^)_?([A-Z])", " $1") == input[1]));

    // Abe Miesler 1/9 correct.
    Console.WriteLine("Abe Miesler:     " + (Regex.Replace(input[0], @"([a-zA-Z])_?([A-Z])", "$1 $2") == input[1]));

    // AppDeveloper 2/9 correct. (Not entirely fair since it was not meant for underscores).
    Console.WriteLine("AppDeveloper:    " + (Regex.Replace(input[0], @"_([A-Z])", " $1") == input[1]));

    // sparky68967 1/9 correct. (Not entirely fair since it was not meant for underscores).
    Console.WriteLine("sparky68967:     " + (Regex.Replace(input[0], @"([a-z])([A-Z])", "$1 $2") == input[1]));

    // p.s.w.g 4/9 correct.
    Console.WriteLine("p.s.w.g:         " + (Regex.Replace(Regex.Replace(input[0], @"([A-Z]+)([A-Z][a-z])", "$1_$2"), "_", " ") == input[1]));

    // Sani Huttunen 1 7/9 correct.
    Console.WriteLine("Sani Huttunen 1: " + (Regex.Replace(input[0], @"([a-z]?)[_ ]?([A-Z])", "$1 $2").TrimStart(' ') == input[1]));

    // Sani Huttunen 2 9/9 correct.
    Console.WriteLine("Sani Huttunen 2: " + (Regex.Replace(input[0].Replace('_', ' '), @"(?<!^)[ ]?([A-Z])", " $1").TrimStart(' ') == input[1]));

    Console.WriteLine();
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T23:09:57.083

对于输入类型：`ThisIsAnInputString`

```
 string input1 = "ThisIsAnInputString";
        StringBuilder builder = new StringBuilder();

        foreach (char c in input1)
        {
            if (Char.IsUpper(c))
            {
                builder.Append(' ');
                builder.Append(c);
            }
            else
            {
                builder.Append(c);
            }
        }

        string output = builder.ToString().Trim(); 
```

对于输入类型：`This_Is_An_Input_String`

```
string input2 = "This_Is_An_Input_String";
string output = Regex.Replace(input2, "_([A-Z])", " $1"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T23:18:21.877

```
 // check if string is empty
        if (string.IsNullOrEmpty(input))
            return string.Empty;

        if (input.Contains('_'))
        {
            return input.Replace('_', ' ');
        }
        else
        {
            StringBuilder newString = new StringBuilder();
            foreach (Char char1 in input)
            {
                if (char.IsUpper(char1))
                    newString.Append(new char[] { ' ', char1 });
                else
                    newString.Append(char1);
            }

            newString.Remove(0, 1);
            return newString.ToString();
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-18T23:18:26.863

```
 static void Main(string[] args)
    {
        String str = "ThisIsAnInputString";
        String str2 = "This_Is_An_Input_String";

        Console.WriteLine(str);
        Console.WriteLine(str2);

        StringBuilder sb = new StringBuilder();
        StringBuilder sb2 = new StringBuilder();

        str.ToCharArray().ToList().ForEach(c => sb.Append(c == '_' ? " " :  char.IsLower(c) ? c.ToString() : " " + c.ToString()));
        str2.ToCharArray().ToList().ForEach(c => sb2.Append(c == '_' ? " " : char.IsLower(c) ? c.ToString() : " " + c.ToString()));

        str = sb.ToString().Trim(" ".ToCharArray());
        str2 = sb2.ToString().Trim(" ".ToCharArray());

        Console.WriteLine(str);
        Console.WriteLine(str2);

        Console.Read();
    } 
```

# git - 如何让 Git 跟踪 Emacs 组织模式档案？

> ID：14946934
> 
> 赞同：0
> 
> 时间：2013-02-18T23:04:57.777
> 
> 标签：git, emacs, github, org-mode

我正在使用 Git 和 Emacs 组织模式。当我使用 org-mode 归档子树时，它会从`filename.org`一个名为`filename.org_archive`.

在我所有 Emacs 文件的 Git 存储库中，当我`git ls-tree --full-tree -r HEAD`列出 Git 跟踪的所有文件时，`filename.org_archive`确实会出现在该列表中。

但是当我在 上查看我的本地存储库时`OSX GitHub`，它显示了我已删除的文本行，`filename.org`但没有显示`filename.org_archive`或表明我已对其进行了更改——即使该文件现在具有新的行从那里搬到那里`filename.org`。

我究竟做错了什么？解决方案是什么？

# ios - KIF 集成测试：如何单击表格行的子视图？

> ID：14946936
> 
> 赞同：1
> 
> 时间：2013-02-18T23:05:08.030
> 
> 标签：ios, objective-c, integration-testing

我有一个表格视图，其每一行都包含一个“收藏夹”按钮。我想在集成测试中单击这些，但我看不到这样做的好方法。

我正在寻找类似 and 组合的`stepToTapRowInTableViewWithAccessibilityLabel:atIndexPath:`东西`stepToTapViewWithAccessibilityLabel:`。

我可能会称之为`stepToTapSubviewWithAccessibilityLabel:ofRowInTableViewWithAccessibilityLabel:atIndexPath:`.

我看到有一个步骤可以挖掘特定点，但它似乎相当脆弱。有任何想法吗？

# php - 如何在表单配置中获取 GET 参数？

> ID：14946939
> 
> 赞同：0
> 
> 时间：2013-02-18T23:05:39.853
> 
> 标签：php, symfony-1.4, symfony-forms

我在`configure()`方法的中间，我必须为组合框设置一个默认的选定值。该值在 URL 中，但没有请求或任何对象。

如何达到这个变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T07:39:23.500

[在这种情况下使用不是一个好主意`sfContext`。](http://webmozarts.com/2009/07/01/why-sfcontextgetinstance-is-bad/)

最好在表单的构造函数中发送参数。像这样的东西：

```
$form = new Form(array(), array(‘my_form_param’ => $request->getParameter('my_get_param')); 
```

在表格中，您可以使用以下方式调用它：

```
$this->getOption('my_form_param') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T02:48:44.773

您可以从任何地方访问请求，如下所示：

`sfContext::getInstance()->getRequest()->getParameter('foo')`

# ruby - Mac 10.8.2 中的 RVM Ruby 1.9.3 错误

> ID：14946942
> 
> 赞同：1
> 
> 时间：2013-02-18T23:05:59.170
> 
> 标签：ruby, macos, rvm

我正在尝试在 Mountain Lion 中使用 RVM 安装 Ruby，并在运行 make 时不断出错，即使我使用 gcc=clang 这样做（正如其他帖子上推荐的解决方案）。我已经安装了命令行实用程序更新了 XCode。

make.log 读取

```
 [2013-02-18 17:37:00] make
    CC = clang
    LD = ld
    LDSHARED = clang -dynamic -bundle
    CFLAGS = -O3 -ggdb -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Werror=pointer-arith -Werror=write-strings -Werror=declaration-after-statement -Werror=shorten-64-to-32 -Werror=implicit-function-declaration  -pipe 
    XCFLAGS = -include ruby/config.h -include ruby/missing.h -fvisibility=hidden -DRUBY_EXPORT
    CPPFLAGS = -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -I/Users/maraaverick/.rvm/usr/include -I. -I.ext/include/x86_64-darwin12.2.0 -I./include -I.
    DLDFLAGS = -Wl,-undefined,dynamic_lookup -Wl,-multiply_defined,suppress -Wl,-flat_namespace  
    SOLIBS = 
compiling main.c
compiling dmydln.c
compiling dmyencoding.c
compiling version.c
compiling dmyversion.c
compiling miniprelude.c
compiling array.c
compiling bignum.c
bignum.c:2732:26: warning: while loop has empty body [-Wempty-body]
        while (--ny && !zds[ny]); ++ny;
                                ^
bignum.c:2732:26: note: put the semicolon on a separate line to silence this warning
1 warning generated.
compiling class.c
compiling compar.c
compiling complex.c
compiling dir.c
compiling dln_find.c
compiling enum.c
compiling enumerator.c
compiling error.c
compiling eval.c
compiling load.c
compiling proc.c
compiling file.c
compiling gc.c
gc.c:3060:1: warning: unused function 'chain_finalized_object' [-Wunused-function]
chain_finalized_object(st_data_t key, st_data_t val, st_data_t arg)
^
1 warning generated.
compiling hash.c
compiling inits.c
compiling io.c
compiling marshal.c
compiling math.c
compiling node.c
compiling numeric.c
compiling object.c
compiling pack.c
compiling parse.c
compiling process.c
compiling random.c
compiling range.c
compiling rational.c
compiling re.c
compiling regcomp.c
compiling regenc.c
compiling regerror.c
compiling regexec.c
compiling regparse.c
regparse.c:582:15: error: implicit conversion loses integer precision: 'st_index_t' (aka 'unsigned long') to 'int' [-Werror,-Wshorten-64-to-32]
    return t->num_entries;
    ~~~~~~ ~~~^~~~~~~~~~~
1 error generated.
make: *** [regparse.o] Error 1 
```

当我没有指定 gcc 时也是如此，当我尝试按照[此处的建议使用 openssl 和独立 gcc 包进行安装时](https://gist.github.com/zenkay/3237860)

```
rvm install 1.9.3 --with-openssl-dir=$rvm_path/usr 
```

虽然当我尝试指定我的本地 gcc 时，我被告知它不在我的路径中：

```
$ CC=/opt/local/bin/gcc-apple-4.2 rvm install ruby-1.9.3-p194 --enable-shared --without-tk --without-tcl
You requested building with '/opt/local/bin/gcc-apple-4.2' but it is not in your path. 
```

任何帮助将非常感激。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:46:11.257

您在这里使用`clang`的是对问题的更好解释[https://stackoverflow.com/a/14594287/497756](https://stackoverflow.com/a/14594287/497756)并且这里是改进的过程（尚未在 rvm 头上）：[https ://stackoverflow.com/a/14940278/497756](https://stackoverflow.com/a/14940278/497756)

# scheme - 方案范围（定义和让）

> ID：14946945
> 
> 赞同：5
> 
> 时间：2013-02-18T23:06:21.037
> 
> 标签：scheme, scoping, racket

所以我知道在 Scheme 中，define 用于动态范围，而 let 用于静态范围，但以下事情让我感到困惑：

如果我有

```
(let ((x 0))
  (define f (lambda () x))
  (display (f))
  (let ((x 1))
    (display (f))
    )
  ) 
```

它将显示 00。到目前为止一切顺利。但是，如果我像这样为 x 添加额外的定义：

```
(let ((x 0))
  (define f (lambda () x))
  (display (f))
  (define x 4)
  (let ((x 1))
    (display (f))
    )
  ) 
```

它将显示 undefined4。为什么是这样？为什么在计算 f**之后**定义 x会影响 (f) 的返回值？为什么返回值“未定义”？

还值得一提的是，将 f 与 letrec 而不是 define 绑定也可以：

```
(let ((x 0))
  (letrec ((f (lambda () x)))
  (display (f))
  (define x 4)
  (let ((x 1))
    (display (f))
    )
  )
) 
```

返回 00。

注意：我使用 DrRacket 的语言设置为“Pretty Big”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T02:00:14.660

您在第二种情况下遇到的问题是，它为定义它的*整个*`(define x 42)`范围创建`x`了一个变量。现在，虽然*变量*是为整个范围定义的，但它的*值*在实际行之前是未定义的。***`(define x 42)`***

 ***```
(let ()
  ;; up here, `x` is defined but has an undefined value
  ;; ...
  (define x 42)
  ;; down here `x` has the value 42
  ;; ...
  ) 
```

它的行为更像这样：

```
(let ([x 'undefined])
  ;; ... up here, `x` is 'undefined
  (set! x 42)
  ;; ... down here, `x` is 42
  ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T04:18:28.363

您的第二个和第三个代码片段不是方案（R5RS、R6RS 和 R7RS 都不是）。( `<body>`of a `let`and others) 定义为：

```
<body> -> <definition>* <sequence>
<sequence> -> <command>* <expression>
<command> -> <expression> 
```

因此 a `define`(即 a `<definition>`)**不能**跟随`display`(an `<expression>`)。您可能会得到令人困惑的结果，因为编译器/解释器错误地处理了“let”的扩展。

这是一个“好的”R6RS 编译器所做的：

```
> (let ((x 0))
  (letrec ((f (lambda () x)))
  (display (f))
  (define x 4)
  (let ((x 1))
    (display (f))
    )
  )
)
Unhandled exception
 Condition components:
   1\. &who: define
   2\. &message: "a definition was found where an expression was expected"
   3\. &syntax:
       form: (define x 4)
       subform: #f
   4\. &trace: #<syntax (define x 4)>
> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T01:41:33.767

Case 1: the body of f binds to the outermost let in both invocations, resulting in 00 as static scope requires.

Case 2: I'm not very sure about this, but the internal `(define x 4)` shadows the outermost x=0 binding, and is in scope throughout even though it's textually after the call to f. Then some order of evaluation trickiness makes the first call happen before the new x binding is fully initialized, so it's "uninitialized". The second call in the inner let happens after everything is initialized, so 4.

Case 3: Now that we have explicitly put the letrec and the define in separate scopes, f obviously refers to the outermost let. The define does nothing here.***

# java - 泛型扩展 Number，计算

> ID：14946947
> 
> 赞同：2
> 
> 时间：2013-02-18T23:06:30.350
> 
> 标签：java, generics, math

我用一种方法制作了一个数学运算接口，计算，采用各种数量的参数

```
public interface MathOperation {
    public <T extends Number> T calculate(T... args);
} 
```

这个类也有简单的实现，但不起作用：

```
private class Sum implements MathOperation {
    @Override
    public <T extends Number> T calculate(T... args) {
        return args[0] + args[1];
    }
} 
```

问题是：

```
bad operand types for binary operator '+'
  first type:  T
  second type: T
  where T is a type-variable:
    T extends Number declared in method <T>calculate(T...) 
```

我想要实现的是一个简单的类，例如两个 Doubles 并返回 Double 。

有没有可能实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T23:17:53.940

`+`不能应用于`extend Number`. `new Integer(5) + new Integer(5)`由于自动装箱而工作。您将不得不查看 args 的运行时类型并相应地执行操作。

类似的东西：

```
private class Sum implements MathOperation {
    @Override
    public <T extends Number> T calculate(Class<T> clazz, T... args) {
         if (clazz.equals(Integer.class))
         {
             return Integer.class.cast(args[0]) + Integer.class.cast(args[1]);
         } else (....) 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T23:28:53.830

您可以测试运行时类型，如其他答案所示。或者你可以尝试不同的设计：创建一个作为工厂工作的抽象类：

```
interface MathContext<T extends Number> {

    ...

    T valueOf(double d);
    T valueOf(int i);
    T add (T... args);
} 
```

以及您要使用的类型的具体类：

```
DoubleContext implements MathContext<Double> {

    ...

    Double valueOf(int i) {
        return i;
    }

    Double valueOf(double d) {
        return d;
    }

    Double add(Double... args) {
        Double res = 0;
        for (Double arg: args)  {
            res += arg;
        }
        return res;
    }

} 
```

现在您可以使用该类来实现您的 MathOperation。但是，它不再需要了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-17T07:53:38.653

对于加法，我们可以使用类`doubleValue()`的方法`Number`。要返回相同的类型值，想法是使用 a `Function`or`Supplier`或 a`Factory`创建类型 T 的实例。

```
class MathOperation<T extends Number> {

    public double add(T a, T b) {
        double d = a.doubleValue() + b.doubleValue();
        return d;
    }

    public T add(T a, T b, Function<Double,T> function) {
        double d = a.doubleValue() + b.doubleValue();
        return function.apply(d);

    }
} 
```

# c - 遍历链表并返回 char* 值

> ID：14946949
> 
> 赞同：0
> 
> 时间：2013-02-18T23:06:43.937
> 
> 标签：c

我在从链接列表返回 char* 值时遇到问题，请有人帮忙我如何在 while 循环中返回 char* 值？当我尝试运行我的程序时，我从链接列表中获得一个值，并使用以下代码永远循环：

```
char * list_next(list *l)
{    
   list *currentPosition = NULL;    
   currentPosition = l->next; //skipping dummy value in the singly linked list

  while (currentPosition != NULL)
  {
    currentPosition = currentPosition->next;
    return currentPosition->charValue;

  }

   return NULL;
} 
```

这就是我调用函数的方式：

```
char * item;
while(item = list_next(list))    
printf("%s ",item); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:13:35.980

做类似的事情会更容易

```
list* current = list->next; //skip the dummy

while(current)
{
    printf("%s ", current->charValue);
    current = current->next;
} 
```

但是，由于您必须使用函数并以您拥有的格式执行此操作，因此您需要执行以下操作：

```
char* list_next(list **l)
{    
  if (*l != NULL)
  {
    char* value = (*l)->charValue;
    *l = (*l)->next;
    return value;
  }

   return NULL;
} 
```

并这样称呼它

```
list* temp_list = my_list->next; //skip the dummy

char * item;
while(item = list_next(&temp_list))    
    printf("%s ",item); 
```

您只能从函数返回 1 个值。要像您最初在 while 循环中那样重复调用函数以在整个列表中移动，您必须修改输入参数，以便 while 循环中的下一次调用对列表中的下一个元素进行操作。注意`**`函数参数中的 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T23:09:43.200

您正在循环中间返回，因此您没有机会处理其他节点。

你需要改变一些东西来处理多个字符。您可以将它们收集到一个数组中，但这引入了需要提前知道列表中有多少项的问题。正如 ThePosey 建议的那样，您可以内联处理这些项目。

但是，如果您希望函数`list_next`每次都返回一项，那么您需要“返回”两件事：列表值和列表指针。一种方法是修改函数签名： `char * list_next(list **l)`. 如果传入一个指向指针的指针，该函数可以将其用作 out 参数并将其设置为下一个节点。

# css - css 元素的位置不正确（wordpress）

> ID：14946953
> 
> 赞同：1
> 
> 时间：2013-02-18T23:07:13.120
> 
> 标签：css, wordpress

我已经玩了几个小时的 wordpress 插件，并且除了刚刚发生的与 css 相关的问题之外，还设法让大多数事情正常工作。

我相信我错过了关闭一个 div 或者可能有一些我错过的未声明元素。

[这是有问题的网站。](http://norderier.com) 如您所见，它正确显示了内容。另一方面，这个肯定缺少一些东西[。](http://norderier.com/library/)

我一直在研究不同元素的定位，但似乎无法正确解决所有问题。

我猜这很明显，但我现在有一些隧道视野。任何指针将不胜感激！我很乐意分享可能需要的任何代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:11:54.940

仅仅通过对 html 的简短扫描，我看到的第一个危险信号是两个具有相同 id 的元素。我会在那里开始调查，因为即使它没有引起您所描述的问题，它仍然需要引起注意。

```
<div id="primary"></div>
<aside id="primary" role="complementary"></aside> 
```

编辑：正如下面的评论所提到的，只需将 div 的 id 切换为`content`并修复它。

# oracle - 调用 Oracle 函数时，CallableStatement.getResultSet() 始终返回 null

> ID：14946959
> 
> 赞同：1
> 
> 时间：2013-02-18T23:07:28.690
> 
> 标签：oracle, jdbc, callable-statement

我正在执行以下代码：

```
CallableStatement cs;
cs = conn.prepareCall("{ ? = call mypackage.myfunc()}");
cs.registerOutParameter(1, OracleTypes.CURSOR);
System.out.println(cs.execute());
System.out.println(cs.getResultSet());
ResultSet rs = (ResultSet) cs.getObject(1);
System.out.println(rs); 
```

函数声明如下：

```
CREATE OR REPLACE PACKAGE BODY myuser.mypackage AS 
FUNCTION myfunc
return sys_refcursor 
is 
a_cursor sys_refcursor; 
begin 
open a_cursor for select * from mytable; 
return a_cursor; 
end myfunc; 
end mypackage; 
/ 
```

根据文档，如果有结果，则 cs.execute() 将返回 true 并且 cs.getResultSet() 将有一个值。但是，这是我得到的输出：

```
false
null
oracle.jdbc.driver.OracleResultSetImpl@b92a848 
```

我正在使用 Oracle Express 11.2.0 和最新的驱动程序。

任何提示/解释/尝试的事情都将受到欢迎。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:00:30.197

`getResultSet()`通常与`PreparedStatement`从 SQL 查询返回数据的 s一起使用`SELECT`，而不是与对存储过程或函数的调用一起使用。所以我完全期待你看到的`false`和价值观。`null`

如果您有一个返回一个或多个引用游标的存储过程，那么您可以使用获取值`getObject`并将它们转换为`ResultSet`s。实际上，您上面的代码正是这样做的，所以我不明白您为什么需要“尝试的东西”。

SQL`SELECT`语句必须将选定的数据发送到某处，但是由于您不能将绑定参数或类似参数放入 SQL 中以充当数据的目的地，因此您需要一个单独的机制来通过 JDBC 访问该数据。这是`getResultSet()`为了什么。您的函数通过绑定参数返回引用游标，因此不需要隐式“结果”，因为您可以通过绑定参数访问数据。

# android - 如何调整行的大小以使它们始终填满父级的整个高度？

> ID：14946962
> 
> 赞同：0
> 
> 时间：2013-02-18T23:07:38.017
> 
> 标签：android, resize, android-linearlayout

我有`LinearLayout`一个固定大小的父母。在`onCreate()`我加载数据并将行动态添加到父布局中。加载 1-10 行的任何位置。我希望行总是填充父级，例如，如果我有 2 行，每行应该有父级的 50% 高度（50% + 50% = 100%）。如果我有 3 行，每行应该使用父高度的 33% 等。

我尝试使用 an`OnGlobalLayoutListener`来获取父级的高度并动态调整行的大小，不幸的是，当我运行应用程序时，调整大小充其量是任意的。有时行会调整大小，有时会在大约 0.5 秒的明显延迟后调整大小。

有没有更好的方法来实现这一目标？也许已经在 XML 中，例如`layout_weight`（假设行只在代码中添加）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:17:45.227

您可以通过将父 LinearLayout 上的[权重总和设置为您在其中的行数来做到这一点。](http://developer.android.com/reference/android/widget/LinearLayout.html#attr_android%3aweightSum)如果这是一个垂直的项目列表，则将每行的高度设置为 0，并将其[权重](http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html#weight)设置为 1。如果这是一个水平的项目列表，您也可以这样做，但将宽度设置为 0，并将权重设置为 1 .

# python - Tkinter Grid：如何定位小部件，使它们不会粘在一起

> ID：14946963
> 
> 赞同：20
> 
> 时间：2013-02-18T23:07:43.193
> 
> 标签：python, tkinter

我正在尝试创建两个 Label 小部件，它们位于我的测试 UI 的左上角和右上角。问题是小部件粘在一起，我希望它们之间有空间。

在我的研究中，我遇到了使用sticky、padx 和pady 选项的建议。但无论我将什么参数传递给 .grid() ，我似乎都无法在我的小部件之间创建空间。我了解，无论两个小部件之间的列数和行数如何，如果所述行/列为空，那么它们就好像它们不存在并且小部件看起来粘在一起。

使用 .grid() 方法，如何定位小部件以使它们不会粘在一起？

到目前为止，这是我的代码：

```
#!/usr/bin/python
from Tkinter import *

class MyApp:
    def __init__(self, parent):
        self.myParent = parent
        self.main_container = Frame(parent)
        self.main_container.grid(row=0, rowspan=2, column=0, columnspan=4)

        self.top_frame = Frame(self.main_container)
        self.top_frame.grid(row=0, column=0, columnspan=4)

        self.top_left = Frame(self.top_frame)
        self.top_left.grid(row=0, column=0, columnspan=2)

        self.top_right = Frame(self.top_frame)
        self.top_right.grid(row=0, column=2, columnspan=2)

        self.bottom_frame = Frame(self.main_container)
        self.bottom_frame.grid(row=2, column=0, columnspan=4)

        self.top_left_label = Label(self.top_left, text="Top Left")
        self.top_left_label.grid(row=0, column=0, sticky='W', padx=2, pady=2)

        self.top_right_label = Label(self.top_right, text="Top Right")
        self.top_right_label.grid(row=0, column=4, sticky='E', padx=2, pady=2)

        self.text_box = Text(self.bottom_frame, height=5, width=40)
        self.text_box.grid(row=0, column=0)

root = Tk()
root.title("Test UI")
myapp = MyApp(root)
root.mainloop() 
```

~~*更新*~~

我尝试了以下但没有奏效：

```
 self.top_left = Frame(self.top_frame)
    self.top_left.grid(row=0, column=0, columnspan=2)
    for c in range(2):
        self.top_left.columnconfigure(c, weight=2)

    self.top_right = Frame(self.top_frame)
    self.top_right.grid(row=0, column=2, columnspan=2)
    for c in range(2):
        self.top_right.columnconfigure(c, weight=2) 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-02-19T00:12:11.667

您需要使用`grid_columnconfigure`给中间的列一些重量。由于重量比其他柱子更大，它们会膨胀和收缩以填充您拥有的任何额外空间。但是，在您的情况下，确实不需要使用网格。GUI 中的所有内容都沿着`pack`更自然的特定侧对齐。

我将展示如何同时使用 pack 和 grid，从 pack 开始，因为它是最简单的。即使您坚持使用`grid`，请阅读下一节以了解如何将一个大布局问题分解为许多较小的布局问题。

# 分而治之

在 Tkinter 中进行布局的最佳方式是“分而治之”。从最外面的小部件开始，以您想要的方式获得它们。然后，一次处理其中的每一个。

在您的情况下，您有一个最外层的小部件 - 主容器。由于它是窗口中唯一的小部件，因此 pack 是让它填满整个容器的最简单方法。您也可以使用网格，但它需要一些额外的工作：

```
self.main_container = Frame(parent. background="bisque")
self.main_container.pack(side="top", fill="both", expand=True) 
```

它有助于暂时为您的框架提供独特的颜色，以便您可以在开发时将它们可视化。只需将上面的代码添加到您的`__init__`，运行您的应用程序，然后调整窗口大小以查看主框架是否正确增长和缩小。

接下来，您有两个框架——top_frame 和bottom_frame。从他们的名字和你尝试使用网格的方式来看，我认为他们应该在 x 方向填充 GUI。另外，我猜顶部框架是某种工具栏，而底部框架是 GUI 的真正“主要”部分。因此，让我们让底部小部件占据所有额外空间。

由于这些是相互堆叠的，`pack`这又是自然的选择。添加以下代码 - 并且仅添加以下代码 - 以确保这些区域占据您期望的窗口部分，并且它们具有正确的调整大小行为。

```
 self.top_frame = Frame(self.main_container, background="green")
    self.bottom_frame = Frame(self.main_container, background="yellow")
    self.top_frame.pack(side="top", fill="x", expand=False)
    self.bottom_frame.pack(side="bottom", fill="both", expand=True) 
```

接下来是标签的框架。同样，这些占据了容器边缘的空间，因此`pack`最有意义。再一次，添加以下代码，运行程序，并确保仍然正确调整大小并填充窗口的正确部分：

```
 self.top_left = Frame(self.top_frame, background="pink")
    self.top_right = Frame(self.top_frame, background="blue")
    self.top_left.pack(side="left", fill="x", expand=True)
    self.top_right.pack(side="right", fill="x", expand=True) 
```

接下来，你有你的“角落”标签。同样，由于容器只是单行小部件，`pack`因此很容易。由于您想要角落中的标签，我们将为`sticky`每个属性设置一些不同的属性：

```
 self.top_left_label = Label(self.top_left, text="Top Left")
    self.top_right_label = Label(self.top_right, text="Top Right")
    self.top_left_label.pack(side="left")
    self.top_right_label.pack(side="right") 
```

最后，您有文本小部件。它填满了整个底部框架，所以又`pack`是我们的朋友：

```
 self.text_box = Text(self.bottom_frame, height=5, width=40, background="gray")
    self.text_box.pack(side="top", fill="both", expand=True) 
```

# 包还是网格？

您将网格用于原始代码并询问如何修复它。为什么我在示例中使用 pack？

使用 时`pack`，所有配置选项都可以包含在一个调用中。除了`grid`将小部件放入它们的容器中之外，您还必须注意为各种列和行赋予“权重”，以便它们正确调整大小。当您只是将小部件堆叠在一起或将它们排成一排时，`pack`使用起来会容易得多。

在我的 GUI 中，我几乎总是使用`grid`和的组合`pack`。他们都很强大，擅长不同的事情。唯一要记住的——**这是至关重要**的——是你不能在同一个父级中使用它们。以您的代码为例，您不能使用`pack`top_left 框架和`grid`top_right 框架，因为它们都共享同一个父级。但是，您*可以在同一个应用程序中混合使用它们。*

# 再一次，使用网格

好的，所以也许您真的想使用`grid`：也许这是一项学校作业，或者您可能只想一次专注于一个几何管理器。这很酷。这就是我将如何做到的。同样，您必须分而治之：

从主框架开始。用以下几行替换我们打包主容器的一个语句。*请注意，我们必须在parent*上配置行和列，而不是我们创建的框架。

```
 self.main_container.grid(row=0, column=0, sticky="nsew")
    self.myParent.grid_rowconfigure(0, weight=1)
    self.myParent.grid_columnconfigure(0, weight=1) 
```

好的，现在是顶部和底部框架。删除`pack`, 并添加以下行。您仍然只有一列，但这次有几行。注意哪一行的权重为 1：

```
 self.top_frame.grid(row=0, column=0, sticky="ew")
    self.bottom_frame.grid(row=1, column=0,sticky="nsew")
    self.main_container.grid_rowconfigure(1, weight=1)
    self.main_container.grid_columnconfigure(0, weight=1) 
```

角落框架——终于，一个多于一列的容器！让我们在中间创建第三列来填补所有的空缺。将`pack`陈述替换为以下内容，密切注意给予“权重”的内容：

```
 self.top_left.grid(row=0, column=0, sticky="w")
    self.top_right.grid(row=0, column=2, sticky="e")
    self.top_frame.grid_columnconfigure(1, weight=1) 
```

接下来，他们框架中的标签。由于我们不需要它们扩展，我们可以保持默认的权重为零。您可能会觉得这两个标签都在第 0 列很奇怪。请记住，它们位于不同的父级中，并且它们是父级中唯一的小部件，因此每个小部件中只有一列：

```
 self.top_left_label.grid(row=0, column=0, sticky="w")
    self.top_right_label.grid(row=0, column=0, sticky="e") 
```

最后我们有了文本小部件，它是底部框架中唯一的小部件。将最后的`pack`语句替换为以下内容：

```
 self.text_box.grid(row=0, column=0, sticky="nsew")
    self.bottom_frame.grid_rowconfigure(0, weight=1)
    self.bottom_frame.grid_columnconfigure(0, weight=1) 
```

# 结论

布置小部件很容易，但您必须对其进行系统化。想想你在做什么，把你的小部件组织成组，然后一次处理一个组。当您这样做时，您应该使用哪个几何管理器应该会变得很明显。

如您所见，`grid`需要多几行代码，但当您确实有网格时，这是正确的选择。在您的情况下，您已经将您的 GUI 细分为多个部分，因此即使最终结果是一个网格，每个部分也被打包在另一个部分的顶部或下方，或者位于左侧或右侧边缘。在这些情况下，`pack`使用起来会更容易一些，因为您不必担心行和列的权重。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T00:12:22.723

如果您同时添加`bg = "red"`和`top_left`构造`top_right`函数，您将看到它们是如何`Frames`卡在中心的，即使使用该`sticky`选项也是如此。如果它们只包含一个小部件，我建议不要使用它们。

```
#!/usr/bin/python
from Tkinter import *

class MyApp:
    def __init__(self, parent):
        self.top_left_label = Label(parent, text="Top Left")
        self.top_left_label.grid(row=0, column=0, padx=2, pady=2, sticky=N+S+W)

        self.top_right_label = Label(parent, text="Top Right")
        self.top_right_label.grid(row=0, column=1, padx=2, pady=2, sticky=N+S+E)

        self.text_box = Text(parent, height=5, width=40)
        self.text_box.grid(row=1, column=0, columnspan=2)

root = Tk()
root.title("Test UI")
myapp = MyApp(root)
root.mainloop() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-16T18:32:57.217

这是一个简单的方法：

*   首先在纸上设计你的 gui 或使用任何适合你的工具
*   使用网格布局管理器
*   无论您想在哪里创建空白空间，都可以使用布局的 columnspan 或 rowspan 属性，结合粘性属性 columnspan 或 rowspan 可以让您将网格的多个单元格分配给一个 gui 组件，而 sticky 属性可以让您强制该元素坚持一侧并在另一侧留出空间

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-07T23:39:18.320

## 迟到总比不到好 ;）

Tkinter 的“网格”想要把所有东西放在一起。这就是为什么你不能跳过单元​​格。您必须指定宽度，然后锚定文本。我添加了颜色以帮助显示单元格。我把bd放在框架里。然后我必须给左右单元格设置宽度，这样网格就会给它们带来重量。然后锚文本 West 或 East。我不确定为什么必须为每个单元格添加额外的 2 个空格，但我认为这是字体问题。

我相信 Rodas 更干净、更简单，但我试图保持在您询问的参数范围内。

对于小东西，Pack 更容易、更快捷。

```
from tkinter import *

class MyApp:
    def __init__(self, parent):
        self.myParent = parent

        self.main_container = Frame(parent, bg="green")
        self.main_container.grid()

        self.top_frame = Frame(self.main_container)
        self.top_frame.grid()

        self.top_left = Frame(self.top_frame, bd=2)
        self.top_left.grid(row=0, column=0)

        self.top_right = Frame(self.top_frame, bd=2)
        self.top_right.grid(row=0, column=2)

        self.top_left_label = Label(self.top_left, bd=2, bg="red", text="Top Left", width=22, anchor=W)
        self.top_left_label.grid(row=0, column=0)

        self.top_right_label = Label(self.top_right, bd=2, bg="blue", text="Top Right", width=22, anchor=E)
        self.top_right_label.grid(row=0, column=0)

        self.bottom_frame = Frame(self.main_container, bd=2)
        self.bottom_frame.grid(row=2, column=0)

        self.text_box = Text(self.bottom_frame, width=40, height=5)
        self.text_box.grid(row=0, column=0)

root = Tk()
root.title("Test UI")
myapp = MyApp(root)
root.mainloop() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-16T20:21:38.780

如果您需要完全控制 gui 组件的放置，请尝试放置布局；一种高度可管理的方法是将您的组件组织在几个框架中，每个框架都有网格或包布局，然后使用布局布局组织所有这些框架。

# php - PHP内置服务器，有什么方法可以配置它以显示目录文件？

> ID：14946964
> 
> 赞同：13
> 
> 时间：2013-02-18T23:07:43.670
> 
> 标签：php

您可能知道，从 PHP 5.4 开始，有可用的内置服务器。但是，如果您浏览到没有“索引”文件的目录，而不是列出所有可用的文件/目录（例如 apache），它会给您和错误。

现在据我了解，这是设计使然，而不是某种错误。但也许有人知道是否有办法配置它，列出目录的内容？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T23:15:25.890

正如 Colin 在他的评论中提到的，集成服务器仅用于调试目的，因此您应该期望它不具备完整服务器所期望的所有功能。

但是，构建自己的`index.php`来模拟默认的 Apache 索引很容易：

```
<?php
$dir = substr(dirname($_SERVER['PHP_SELF']),strlen($_SERVER['DOCUMENT_ROOT']));
echo "<h2>Index of ".$dir.":</h2>";
$g = glob("*");
usort($g,function($a,$b) {
    if(is_dir($a) == is_dir($b))
        return strnatcasecmp($a,$b);
    else
        return is_dir($a) ? -1 : 1;
});
echo implode("<br>",array_map(function($a) {return '<a href="'.$a.'">'.$a.'</a>';},$g)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-11-15T14:47:25.203

老问题，但我觉得这仍然有用。

我对使用集成网络服务器不仅用于调试，而且还与虚拟机或局域网中的其他电脑共享我电脑上随机文件夹中的文件感到内疚。

这么说，这是我的更新脚本（它可以与任何文件夹中的“php -S localhost:8080 -t .script.php”一起使用）：

```
<style>
  a {
    color: black;
    width: 100%;
    display: flex;
    flex-direction: row;
  }

  a:hover {
    background-color: #77AAFF;
    color: black;
  }

  .linkLeft {
    flex-grow: 0;
  }

  .linkCenter {
    flex-grow: 1;
    margin: -3px 10px 3px;
    border-bottom: 1px dotted black;
  }

  .linkRight {
    flex-grow: 0;
  }
</style>
<?php
$dir = realpath(isset($_GET['dir']) ? $_GET['dir'] : ".");
if (is_dir($dir)) {
  echo "<h2>Index of $dir:</h2>\n";
  $files = array_diff(scandir($dir), array('..', '.'));
  usort($files, function($a, $b) use ($dir) {
    if (is_dir("{$dir}/{$a}") == is_dir("{$dir}/{$b}")) {
      return strnatcasecmp($a, $b);
    } else {
      return is_dir("{$dir}/{$a}") ? -1 : 1;
    }
  });
  echo "<a href='?dir=" . urlencode(realpath("{$dir}/..")) . "'>⏎&lt;/a>\n";
  foreach ($files as $file) {
    if (is_dir("{$dir}/{$file}")) {
      $typef = "[directory]";
    } else {
      $typef = "[" . pathinfo($file, PATHINFO_EXTENSION) . " file]";
    }
    ?>
    <a href='?dir=<?= urlencode("{$dir}/{$file}"); ?>'>
      <div class='linkLeft'><?= $file; ?></div>
      <div class='linkCenter'></div>
      <div class='linkRight'><?= $typef; ?></div>
    </a>
    <?php
  }
} else if (is_file($dir)) {
  header('Content-Description: File Transfer');
  header('Content-Type: application/octet-stream');
  header('Content-Disposition: attachment; filename="' . basename($dir) . '"');
  header('Expires: 0');
  header('Cache-Control: must-revalidate');
  header('Pragma: public');
  header('Content-Length: ' . filesize($dir));
  readfile($dir);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-03T18:44:06.743

要显示具有排序、日期、大小、图标类型、...的文件和目录的高级列表，请将以下内容代码另存为`route.php`文件，然后运行以下命令：

```
php -S localhost:8080 -t . route.php 
```

然后`http://localhost:8080/`在浏览器中打开。

代码：

```
<?php
// This block MUST be at the very top of the page!
@ob_start('ob_gzhandler');
if(isset($_GET['icon']))
{
    $e=$_GET['icon'];
    $I['file']='R0lGODlhEAAPAOYAAIyMlu7u9PHx9vDw9fT0+PPz97u7vvf3+vb2+d/f4vn5+/39/vv7/Pr6+/b29+3t7pCRnI6PmZOVn5ibpZWYopqeqJ2hq6KnsaClr9fZ3ff4+t/g4qSqtKmwuqeuuM3P0vHz9tze4be6vuzv8+vu8urt8eXo7Kuzva61vquyu9/k6uXp7uTo7cvU3dHZ4dDY4Nfe5d3j6dzi6Nvh5+Po7eLn7OHm69HV2ejs8Ofr7+7x9OHk597h5PT2+PP19/Hz9evt7+Lk5t3f4fr7/Pn6+/b3+PX299Tc49rh5+ru8fDz9ff5+vb4+fP19vz9/f////7+/vv7+/Pz8+/v7+zs7Orq6ubm5uHh4d7e3sDAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAFkALAAAAAAQAA8AAAevgFmCJ4SFhDuCiYIdUI1QDQ9NKCGKgh4LjQsOG0smKRmVHAxPUAtGQktLPxxTihcKjU5FQR8iBhdXihgHC05DTEA8NwkYWIoWCENEGj1KJCsIFsaJFQRMPT5KIzk2BBXTghMFIEo6JDk1MQUT4FkUAiVJOCs2MTACFO0SAyw0NiozYLgYIKEdhAAyZiCBceRFiwAQ2kUIQLFixQjtAGjcyBFAuyhSqFgZSXJklSyBAAA7';
    $I['dir']='R0lGODlhEAAOAOYAAP79uv//4/j43f//5f7+5v7+6f//7f//7//8qf/9vf/9wf/+xP/9yf793P/+4f32hP/6iv/6pP/9zP/4kf/4nP/4n/373//1jf/2nP32tvnodfzuff/xhv/3uP/revftrvz32v/ocf/odP/rhPnz0/z44+DAPOHAPe/gnPXrvv3zyM6hAMicAMeaANStJdu4PNy7RODDWN7EaOLIauLIa//10ffuzcudAMiaAMSWAMOVAMGTAL2PALqMAMilLtayPNe2TNW0TNKxTNm7V9e5V82vU9zEd+7jvurfvPXryfbu072NALiKALaIALOEALKDALGCAK+AAMinRMalRMOiRNCuTM6sTMuqTMmnTLyfUdm8ZtW9et3Kl+XUoa19AKp6AK6EG7GHIr2YNr+cQ7iXQ8akTMSjTb6jXs2waMOqbNjEkNDDpM2xctfQwPz8/Pv7+/r6+vX19fHx8ezs7Ovr6+jo6Ofn5+bm5uHh4eDg4N/f397e3t3d3cDAwAAAAAAAACH5BAEAAH0ALAAAAAAQAA4AAAe4gEkzMkNERl19iYqKMSkGjwZbRVJTVGhqijACEJwQEpCPWXKJOBYPp6ioFjh2bn06IBuys7MgOnpwfTwkGiY/QEFCVVZXWGVmYl9MNic0BwHQ0QMOBUhgT0cuJQoJ3d4LAARja15aKAwI6QgRFRQYGVxke1AvDRMXHB4iIfwjSmFt6iz50KGGwYMGVbBJgyeODxYrbrTIsYNHjyZOopzhM8fVHT17QooUmYdOrj5v4KhcyRKOqz6BAAA7';
    $I['doc']='R0lGODlhEAAQAPcAAAEyeCg+bQgviwU2ggg8iAZCmwlLsiFMmjpamDJbtipitzhhrjppuE1qp0BmtERquVVtpF11q2d+s0JuxEl0zFJ3ylV7zl99w1h+0XeKnG6Ov3KQv3KRv3aTvXqVu3uVvH6XulWAyFmBxliCxV2ExF6ExGCBzWGIw2KJw2WKwmeLwWmMwWyOwGeK1XeR1XyX2P8A/4KavIWdvoOc2oCe5oigwIuiwoyiwouk3ZGnxpesyZCu1p2xzYml6ZOr5qO20am71K260K+836q+8a/A2LPD2rfI9MnS4tbc6tLi+tTj+tbk+tfl+9zi9Nnm+9vn+9zo+97p++Dq/OHs/OPt/OXu/Obv/Ojw/erx/evy/e3z/e/0/fDy+vD2/vL3/vT4/vX5/vf6/vn7/////wCpEQAAABLs7NS5srGlQNcVPRQCgBQCQBLtDNdNrxQCgGQCeNdN4xQCgBLtFAAAAJEFyCNr8BLt4JEFURQHqJEFbRLuOAAAABLtPAAAAJEFyFiHuBLuCJEFURQHSBLtWAAAAJEFyFiHuBLuJJEFURQHSJEFbRLuaAAABAAAAOaERAAAAgAABAAAMAAAACNr+NSLsf3QAAAAMAAABBQAABLrmJD7bAAAIAAAAFiHwBLuOAAAAAAAIADwqgAAIAAAAAAAAJDnvJDVhhLuCJD7bJD7cZDVhpDnvBQAABLt5JDnyBLujJDuGJD7eAH//wAABBLtaAAAABLujJDuGJEFcP///5EFbZEJvBQAAAAAAFiHwBLuSJEJkliHwAAAABLunN3tDt3tIGKmyAABxGKm1AAAAAAAAAAAAAAAAAAAABLuaBLu7BS3YBS3YBLuoOb8I8OlLsYaoBLu2MLCzQAABMLC4xS04BS3YAAAAxSwbsXS4BSwABLu1BLupP///xLvQMNclMEgcP///8LC40SV1RS3YGMboGMboEUEtRQAABS04IoASAAAAAAAAOqG1OqG1OqG1OqG1AAC8BLvJN1sdBLvLIoASIoASObgowAACeaCsAAABCH5BAEAADAALAAAAAAQABAAAAjhAGEILALkBw8dOWzIAAFCoEMYRMSEAfPFS5ctIMY0hOHDRw8aL1pgqDBBgZaMGjmOWclypYEsKDX2GDLDBBITTSDgMICFoU8aTWZcaPKgSYMMBq5YqUJlCggXY1w8EHIAB4IjBZY2lQKixRgJDyIMSBBgTIEqO3ZIieLBwhgICIwMGBBkDIGtUaB0oDBGwAIuAxysHDAlLZQnGxi0bAlg7WEnLBQYmFygMoEBAKKkdcJEhcMbWqc4fsJ5CQqHNZimXZ12iZISDmXgfczEdRIRDmN8+NCBg4YVKU6QGBEiREAAADs=';
    $I['xls']='R0lGODlhEAAQAPcAADVJGjRNGTVNGDRSFzRTFzRYFTReEzReFDVeGjNpDzNtDjRtDjRjETRkEjZjGztoHjpvHjNwDTlwHjp3GTx3Hz57HjJoKDtxIjp9Jz99IWB+XEKAJUaELEeFLUKJNUeIO02MNk+OOUiSP1OTQFKXSFiYR1qaSVieUl6YVV+hU1uiWHCbbWGiVGGgWGWnW2eqX2SoYGmtYmqsZW2wZ3SlcG6Ov3KQv3KRv3aTvXqVu3uVvH6XulWAyFmBxliCxV2ExF6ExGGIw2KJw2WKwmeLwWmMwWyOwP8A/4KavIWdvoephZC9i5ywm6Gzn4igwIuiwoyiwpGnxpesyZCu1p2xzaO20am71JPCjpPEjZbEkZrGlq/A2LPD2sDRwMzay8/dz9bi1t/p39Li+tTj+tbk+tfl+9nm+9vn+9zo+97p++Xs5eDq/OHs/OPt/OXu/Obv/Ojw/erx/evy/e3z/e/0/fD2/vL3/vT4/vX5/vf6/vn7/////xLtPAAAAJEFyCLVGBLuCJEFURQHSBLtWAAAAJEFyCLVGBLuJJEFURQHSJEFbRLuaAAABAAAAOaERAAAAgAABAAAMAAAAFeQiNSLsf3QAAAAMAAABBQAABLrmJD7bAAAIAAAACLVIBLuOAAAAAAAIADwqgAAIAAAAAAAAJDnvJDVhhLuCJD7bJD7cZDVhpDnvBQAABLt5JDnyBLujJDuGJD7eAH//wAABBLtaAAAABLujJDuGJEFcP///5EFbZEJvBQAAAAAACLVIBLuSJEJkiLVIAAAABLunN3tDt3tIGKmyAABwGKm1AAAAAAAAAAAAAAAAAAAABLuaBLu7BSuABSuABLuoOb8I8OlLsYaoBLu2MLCzQAABMLC4xSsQBSuAAAAAxSg2MXS4BSgABLu1BLupP///xLvQMNclMEgcP///8LC40SV1RSuAGMboGMboEUEtRQAABSsQKR+UAAAAAAAAOqG1OqG1OqG1OqG1AACBBLvJN1sdBLvLKR+UKR+UObgowAACeaCsAAABCH5BAEAAEcALAAAAAAQABAAAAjhAI8I5GKlChUpUZ4k2bFDoMMjW/TkwXPHTh06O/Y0PDIjhosUJkaA6LChwpyMGjnuWclyZQQ5KDXOuAKDxB4vKFAwURCHoc8XarDI8ECjxQcwCeC8cdOGzQ4We75oUYHBQpc9DJY2XbOjxJ4lJ7KouLAizAE3U6asSZMjxBIKEBwsEfGgSYGtadDg4NBSiQQEGgawSYvmjI0MLVsKWFvYjJEJERYkaGCgAIEAANKkNVOGiEMoWtkwPsOZjBCHTpimXZ2WzBggDpPgbVzGtZgeDpHo0IHjRo0iQ4L88MGDR0AAADs=';
    $I['jpg']=$I['gif']=$I['png']='R0lGODlhEAAQAPcAAPuBhP0RI9fU1r24vL25vn+CmKSxzLfF4cPL28bO3srO1oOk4WF4opyuzpWlwpurx6i30qm30ae1zqa0zb3M57G/2Kq3z6m2zcTR6aSvw9Dd9crW7NPe8tXg88PM3OLs/tXe7+Lr/Njh8eHp98/W4wBe9Yibup+vyZemv6e2z6e2zsXW8rLC26e1zK+91Kezx8jU6Nvo/eDr/dzm9uLs/OTt/MvT4ODn897l8dvi7uvy/gxn7Keyw7K9zsTQ4uPu/t7p+dzm9c/Y5t7n9dri7svb8djh7ejw++vw9+fs87jI2+Hu/lem/vH3/lSp/uTx/vP5/snj9+33/qGoqPz+/v3+/lXSYAC1AH3GdS6qHnDIW1OmL+Hp173JqoGaKby9srurRv3slf7dbf7cc/7Xb/7QZ/3SdP7FVd6wUP7LaP6/SP68SeS7cv6vMP62QNycN+KuWOCuW/vt1fueGf6qL/6vN/6xOf65V+C/jP2XEv6eGvmeH/6gI/6iJOCSKM+WR9ScUPjEff6ZG8qELbB/ROG0f/2EAPeAAf6IAuR5BP6JCP6QENKTTdmseuC7kbBhEKlfFa5iGMR0I8d+M45aJr6BRM2VW9ikcNuugNG8pvLk1v37+f17AO1zAKlUBrNiFqBdHplZHr97PcB/Q690Pc6KTcWHT7F9T9CYY9Opg9KujN25l6NJAJJFBK5sMpNnQcqcdKaGbL+fhPfw6qpKALeDWtijebGReOC4mdm2nKuQe+XDqfjy7tm0nedXBa+ZjPjz8OfOwauSh/BvO/55QcY0AN7a2d4dA+kwFdsTBv7+/v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAMsALAAAAAAQABAAAAj/AJcJXIbDSI6DREDAQKBs4MAgVZRJVNaEwwYbDgUaozJRGZQON46QcLgplaNLmFZpoiLDh5AKHgTuKmVJlzBVqEbBSlIEQgMTy2wxkhOFiZMFXLoQOiWCwgEHuCQ1KvRlRwkGWqxgERVrBYYHkwAF68VmSgE8Wa5sCRQqgYYTg8LEgWOGTJk0YLz8uQOJQAwDptCMEXNmjZs6dIgBGOZpwJIJs3JVeqPGDp0+c5AFSNZKwQ8JAnnV8tOGj6A8vo4VozTjg4qBwFzt0bNIESJDrH49oZHCoaxHiQ5x6kTr1QggIXoPFJCJVKRPoG4hkVJDRwSHQ5T04JHhBQsXF1pYA0AREAA7';
    $I['txt']='R0lGODlhEAAQAPcAAB6Kcm6Ov3KQv3KRv3aTvXqVu3uVvH6XulWAyFmBxliCxV2ExF6ExGGIw2KJw2WKwmeLwWmMwWyOwP8A/4KavIWdvoigwIuiwoyiwo+lxJGnxpKoxpWryJesyZmtypCu1p2xzaO20am71K/A2LPD2tLi+tTj+tbk+tfl+9nm+9vn+9zo+97p++Dq/OHs/OPt/OXu/Obv/Ojw/erx/evy/e3z/e/0/fD2/vL3/vT4/vX5/vf6/vn7/////xLuYAAAQAAAAAAAABLuqBLuaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQBLurJDuGAAAAAAAAgAAAQACEBLuYAACEJEZcAa6SAa6KAAAAAAAAAHskAABHhLsBJDuGBLswNS5TACpEQCpERLs1NS47q0nqACpEQAAABLs7NS5sq0nqNcVPRQCgBQCQBLtDNdNrxQCgCoFBtdN4xQCgBLtFAAAAJEFyCLqgBLt4JEFURQHqJEFbRLuOAAAABLtPAAAAJEFyAcKIBLuCJEFURQHSBLtWAAAAJEFyAcKIBLuJJEFURQHSJEFbRLuaAAABAAAAOaERAAAAgAABAAAMAAAACLqiNSLsf3wAAAAMAAABBQAABLrmJD7bAAAIAAAAAcKKBLuOAAAAAAAIADwqgAAIAAAAAAAAJDnvJDVhhLuCJD7bJD7cZDVhpDnvBQAABLt5JDnyBLujJDuGJD7eAH//wAABBLtaAAAABLujJDuGJEFcP///5EFbZEJvBQAAAAAAAcKKBLuSJEJkgcKKAAAABLunN3tDt3tIGKmyAABsGKm1AAAAAAAAAAAAAAAAAAAABLuaBLu7BR5EBR5EBLuoOb8I8OlLsYaoBLu2MLCzQAABMLC4xR2sBR5EAAAAxRwicXS4BRwABLu1BLupP///xLvQMNclMEgcP///8LC40SV1RR5EGMboGMboEUEtRQAABR2sIPdOAAAAAAAAOqG1OqG1OqG1OqG1AABsBLvJN1sdBLvLIPdOIPdOObgowAACeaCsAAABCH5BAEAABMALAAAAAAQABAAAAipACcIJCEiBIgOGi5UOHBAoMMJI3js0JEDxw0bB3o0nACgo8ePHXto5CiyBwCTKEuKPBCypcmTABgybEkTJowXLljChPnSJM4WOkGCbNGCRQGHHmrQmCEjxk0XRVcQcMhh6YerWD+sUCHA4QamTn+y2JpCgsMMTbNiTYECgkMMYaGOVcH2hAOHFm6qvXrCBAOHFcSSRdG3RAKHFAwYIDAgQIQHDRYoQIAgIAA7';
    $I['avi']=$I['mpg']=$I['mpeg']=$I['mp3']='R0lGODlhEAAQAPcAAEhHSHd2d//+/+/q9+7r9KalqPLx9NrZ3HZ1e4mJjx0dHoeHi+Dg4/n5++np6+jo6tLS1NjY2ZqamxYelholkUBHhIWGjHB2lREwshozpCdDujZPuoOEiIWNqBI7tJWWmdTV2B1NwihTuC9iyDZqzlF60X+Vw/z9/xtbyxZczvb5/h1m0EqA0EZ/z1aP3srd9h502hh24VSc6SuD3oqLjNfY2SGN70ik6cHe9ODn6urv8MTGxnG+AYTVDXiuKaPOX6DEZ+nu4XO3AWWgAU56AYypWoWWaNPcw22pAWacAVyKCTpTCm2bFF+BHHehLEVnAWGNBk9zBXWDV1BhKsbKvZm0VajRMHKKKJG5AUlaBnp9b4ulGoqMgYiIhoKCgLOzseDg325qVf/++dqvAdmvAei7As2oBtCoB8qlB+jAF+jAG6eLE5yDGezHK+fFN4RyIN7AOOTEOuPDO4BuIu3MQ+XIR+rLSuXHSOXHSu3VaO3Wc+7YeIuFa/ry0vz343lxVn16cnh2cMHAvpOOiPjx6evq6eHc2v9zTfV6WfnRxuHLxfvx7v9KG/lHG/hIG/lOIvxNI/dOJP5ZLv5aMexYMvVeOPRjPv9xTP92U/BzU/99Xet2WPKijvWvnu+unvGxofnMwNvLx/r19P////v7+/Ly8uzs7Ojo6Obm5uTk5OLi4uDg4N/f39jY2NbW1tLS0s/Pz87Ozs3NzczMzMfHx7Ozs62traenp56enpycnJqamnl5eWtra2RkZE5OTiEhIRwcHBsbGxMTEwgICAQEBP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAMUALAAAAAAQABAAAAj/AIsJXMRpE6UtPopQMSCwYTFQlRpBeoSFxxAlRg44TBRpEiZNiKz0EJKEiBQIAkVZkoTpU6gINY78QALlCRdVxTw5utSJEK8dDggMAMIkypQCpDIxOqSIEABeu2gJCOKkyRIvq5QeMuTU169hvR5UuZJFC6wWM27kcBqMGDBYDPLAMcNnFosYNnAQUiDsFqwTfuy4OQNolokUMGToGCSowahRe+6oWWMhFggRKFa4eKFCTB89deSM+SOBVbEOHkKMIFGCDh08ccq8+WBLYKELGTBo2NCmTRoyczjkStUQTIIKFCagQcMmDA1crRwWK/WlC4JAARboqnVKekNTrmTJBnqFapTDgAA7';
    $I['pdf']='R0lGODlhEAAQAPcAAFoAAGMAAHMYGG6Ov3KQv3KRv3aTvXqVu3uVvH6XulWAyFmBxliCxV2ExF6ExGGIw2KJw2WKwmeLwWmMwWyOwIwACJQAAJwhIa0ACLUAAL05OZxCQr1KSr1SWsYAAM4ICM4QENYYGM4pMd45OecIEPcQEPcYGO85OfcpKf8xOc5KSt5KStZja+dKSu9CSu9KSudaWu9SUu9SWudaY+dzc+97e/9zc/8A/4KavIWdvoigwIuiwoyiwo+lxJGnxpKoxpWryJesyZmtypywzJ2xzaO20am71Ky+1q/A2LPD2t6EhN61veeMjO+cnO+trdLi+tTj+tbk+tfl+9nm+9vn+9zo+97p++/W1ufv9+Dq/OHs/OPt/OXu/Obv/Ojw/erx/evy/e3z/e/0/fD2/vL3/vT4/vX5/vf6/vn7/////xQCgBQCQBLtDNdNrxQCgBEGqNdN4xQCgBLtFAAAAJEFyCJ8mBLt4JEFURQHqJEFbRLuOAAAABLtPAAAAJEFyFWi2BLuCJEFURQHSBLtWAAAAJEFyFWi2BLuJJEFURQHSJEFbRLuaAAABAAAAOaERAAAAgAABAAAMAAAACJ8oNSLsf3QAAAAMAAABBQAABLrmJD7bAAAIAAAAFWi4BLuOAAAAAAAIADwqgAAIAAAAAAAAJDnvJDVhhLuCJD7bJD7cZDVhpDnvBQAABLt5JDnyBLujJDuGJD7eAH//wAABBLtaAAAABLujJDuGJEFcP///5EFbZEJvBQAAAAAAFWi4BLuSJEJklWi4AAAABLunN3tDt3tIGKmyAACvGKm1AAAAAAAAAAAAAAAAAAAABLuaBLu7BSjUBSjUBLuoOb8I8OlLsYaoBLu2MLCzQAABMLC4xSo8BSjUAAAAxSgLcXS4BSgABLu1BLupP///xLvQMNclMEgcP///8LC40SV1RSjUGMboGMboEUEtRQAABSo8KR+UAAAAAAAAOqG1OqG1OqG1OqG1AACXBLvJN1sdBLvLKR+UKR+UObgowAACeaCsAAABCH5BAEAADcALAAAAAAQABAAAAjcAG8ITGKkCJEgPnbkSJBAoMMbSNCcMVOGzBgxCdI0fHhkYsWLYTJqvNGBgwYVM2DIgOFCBBiRGm28SIHChIkSJkhg+MKw54kQIEB4+OABQ4YKXrpw2aIlgYUAAARsmLrhwgalTLNsvDFETBgwX1Zg1ZLFygGHQr5+uTKiSVYrVQw4BALWSw0sTJyUrUKFgMMfX7xcaeHEyYoWMZRMoeCwR1IYS8jCXcJCigSHPLrMYCKZ7xQpUSA41EGDRmcqn6NAceAwx1vPoKE8WeAQBwIEBgoMmBDhQQMGChQEBAA7';
    $I['rar']=$I['zip']='R0lGODlhDwAQAOYAAMjY9gRLsBJPqRZQpydpx7TP9iFbrSNfsChltixquzt6xEmH0VqU2G2h4HSk4HGc05jC9ZCz3jmF1zqA0EOK106P2JC235S335a535i531am9FOa5FOa4l2l61uZ13Cv7ne09IKx3ziZ81yr9mGz/2i3/2Go62as7XK7/26x7ni+/3W38Ha38HKx5nu88XWx5IjD84HA8oTD84vK+ZvP9YnJ963b+bzl+8fs/fT///79mf//r///uf//xPr2k//9pP/4hv/6kPr1kPr1kf/7mvfvgvPkbdm/Ktm/LPn25dm8L/vwvfvzzt61AfbNLNm3KfzUMdm3Mdu5M9q6Nd6+O/3ZR/vdZPzkhfvnl/roodq0Kv7TOP3VOf3aUfzZWPzebfvedPziffrjj/rprfrrs/juytKgB9SjCNWlC8+hDtWmEM+hENKmFNWmFtSnG9WqH9SqH9WqIdWrItiuKOjRh7J9DrR8D7mFKaptDbJ7I6ttDax0HfEZAf///wAAAAAAACH5BAEAAH0ALAAAAAAPABAAAAe8gH2CgzIxLispJyaCdGmOdCY5ODc2NDAsC31pfJxpBJ+gEyMeAWtaT0dISlFSU1R2fSEvAXI6PTw7P0RBQEZ1fRYyAW8+SWVjYmBeW02/GDMBcENMZFhhVlVQzX3P0dPV19nbF9BxQktZV19dXE7bGTUBbEVzbm1qaGdm2xEtAXd59ODZAwrUgw8dAgwStKgECRQqVHRQsHCQiQQIDhwwoLCiRxOLPA7i4KABgwoUJAgQuQFAAQggNIgYEAgAOw==';
    header('Cache-control: max-age=2592000');
    header('Expires: '.gmdate('D, d M Y H:i:s \G\M\T',time()+2592000));
    header('Content-type: image/gif');
    print base64_decode(isset($I[$e])?$I[$e]:$I['file']);
    exit;
}
// End block

// Start configs
$sitename='My files';
$date='M-d-y'; // date format
$ignore=array('.','..','.htaccess','index.php','icon.php','Thumbs.db','web.config'); // ignore these files
// End configs
$root=dirname(__FILE__);
$dir=isset($_GET['dir'])?$_GET['dir']:'';if(strstr($dir,'..'))$dir='';
$path="$root/$dir/";
$dirs=$files=array();
if(!is_dir($path)||false==($h=opendir($path)))exit('Directory does not exist.');
while(false!==($f=readdir($h)))
{
    if(in_array($f,$ignore))continue;
    if(is_dir($path.$f))$dirs[]=array('name'=>$f,'date'=>filemtime($path.$f),'url'=>'index.php?dir='.rawurlencode(trim("$dir/$f",'/')));
    else$files[]=array('name'=>$f,'size'=>filesize($path.$f),'date'=>filemtime($path.$f),'url'=>trim("$dir/".rawurlencode($f),'/'));
}
closedir($h);
$current_dir_name = basename($dir);
$up_dir=dirname($dir);
$up_url=($up_dir!=''&&$up_dir!='.')?'index.php?dir='.rawurlencode($up_dir):'index.php';
// END PHP ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title><?=$current_dir_name==''?'Directory list':$current_dir_name?></title>
<style type="text/css">
body { font-family: tahoma, verdana, arial; font-size: 0.7em; color: black; padding-top: 8px; cursor: default; background-color: #fff; }
#idx { border: 3px solid #fff; width: 500px; }
#idx td.center { text-align: center; }
#idx td { border-bottom: 1px solid #f0f0f0; }
#idx img { margin-bottom: -2px; }
#idx table { color: #606060; width: 100%; margin-top:3px; }
#idx span.link { color: #0066DF; cursor: pointer; }
#idx .rounded { padding: 10px 7px 10px 10px; -moz-border-radius:6px; }
#idx .gray { background-color:#fafafa;border-bottom: 1px solid #e5e5e5; }
#idx p { padding: 0px; margin: 0px;line-height:1.4em;}
#idx p.left { float:left;width:60%;padding:3px;color:#606060;}
#idx p.right {float:right;width:35%;text-align:right;color:#707070;padding:3px;}
#idx strong { font-family: "Trebuchet MS", tahoma, arial; font-size: 1.2em; font-weight: bold; color: #202020; padding-bottom: 3px; margin: 0px; }
#idx a:link    { color: #0066CC; }
#idx a:visited { color: #003366; }
#idx a:hover   { text-decoration: none; }
#idx a:active  { color: #9DCC00; }
</style>

<script type="text/javascript">
<!--
var _c1='#fefefe'; var _c2='#fafafa'; var _ppg=100; var _cpg=1; var _files=[]; var _dirs=[]; var _tpg=null; var _tsize=0; var _sort='date'; var _sdir={'type':0,'name':0,'size':0,'date':1}; var idx=null; var tbl=null;
function _obj(s){return document.getElementById(s);}
function _ge(n){n=n.substr(n.lastIndexOf('.')+1);return n.toLowerCase();}
function _nf(n,p){if(p>=0){var t=Math.pow(10,p);return Math.round(n*t)/t;}}
function _s(v,u){if(!u)u='B';if(v>1024&&u=='B')return _s(v/1024,'KB');if(v>1024&&u=='KB')return _s(v/1024,'MB');if(v>1024&&u=='MB')return _s(v/1024,'GB');return _nf(v,1)+'&nbsp;'+u;}
function _f(name,size,date,url,rdate){_files[_files.length]={'dir':0,'name':name,'size':size,'date':date,'type':_ge(name),'url':url,'rdate':rdate,'icon':'index.php?icon='+_ge(name)};_tsize+=size;}
function _d(name,date,url){_dirs[_dirs.length]={'dir':1,'name':name,'date':date,'url':url,'icon':'index.php?icon=dir'};}
function _np(){_cpg++;_tbl();}
function _pp(){_cpg--;_tbl();}
function _sa(l,r){return(l['size']==r['size'])?0:(l['size']>r['size']?1:-1);}
function _sb(l,r){return(l['type']==r['type'])?0:(l['type']>r['type']?1:-1);}
function _sc(l,r){return(l['rdate']==r['rdate'])?0:(l['rdate']>r['rdate']?1:-1);}
function _sd(l,r){var a=l['name'].toLowerCase();var b=r['name'].toLowerCase();return(a==b)?0:(a>b?1:-1);}
function _srt(c){switch(c){case'type':_sort='type';_files.sort(_sb);if(_sdir['type'])_files.reverse();break;case'name':_sort='name';_files.sort(_sd);if(_sdir['name'])_files.reverse();break;case'size':_sort='size';_files.sort(_sa);if(_sdir['size'])_files.reverse();break;case'date':_sort='date';_files.sort(_sc);if(_sdir['date'])_files.reverse();break;}_sdir[c]=!_sdir[c];_obj('sort_type').style.fontStyle=(c=='type'?'italic':'normal');_obj('sort_name').style.fontStyle=(c=='name'?'italic':'normal');_obj('sort_size').style.fontStyle=(c=='size'?'italic':'normal');_obj('sort_date').style.fontStyle=(c=='date'?'italic':'normal');_tbl();return false;}

function _head()
{
    if(!idx)return;
    _tpg=Math.ceil((_files.length+_dirs.length)/_ppg);
    idx.innerHTML='<div class="rounded gray" style="padding:5px 10px 5px 7px;color:#202020">' +
        '<p class="left">' +
            '<strong><?=$current_dir_name==''?$sitename:$current_dir_name?></strong><?=$dir!=''?'&nbsp; (<a href="'.$up_url.'">Back</a>)':''?><br />' + (_files.length+_dirs.length) + ' objects in this folder, ' + _s(_tsize) + ' total.' +
        '</p>' +
        '<p class="right">' +
            'Sort: <span class="link" onmousedown="return _srt(\'name\');" id="sort_name">Name</span>, <span class="link" onmousedown="return _srt(\'type\');" id="sort_type">Type</span>, <span class="link" onmousedown="return _srt(\'size\');" id="sort_size">Size</span>, <span class="link" onmousedown="return _srt(\'date\');" id="sort_date">Date</span>' +
        '</p>' +
        '<div style="clear:both;"></div>' +
    '</div><div id="idx_tbl"></div>';
    tbl=_obj('idx_tbl');
}

function _tbl()
{
    var _cnt=_dirs.concat(_files);if(!tbl)return;if(_cpg>_tpg){_cpg=_tpg;return;}else if(_cpg<1){_cpg=1;return;}var a=(_cpg-1)*_ppg;var b=_cpg*_ppg;var j=0;var html='';
    if(_tpg>1)html+='<p style="padding:5px 5px 0px 7px;color:#202020;text-align:right;"><span class="link" onmousedown="_pp();return false;">Previous</span> ('+_cpg+'/'+_tpg+') <span class="link" onmousedown="_np();return false;">Next</span></p>';
    html+='<table cellspacing="0" cellpadding="5" border="0">';
    for(var i=a;i<b&&i<(_files.length+_dirs.length);++i)
    {
        var f=_cnt[i];var rc=j++&1?_c1:_c2;
        html+='<tr style="background-color:'+rc+'"><td><img src="'+f['icon']+'" alt="" /> &nbsp;<a href="'+f['url']+'">'+f['name']+'</a></td><td class="center" style="width:50px;">'+(f['dir']?'':_s(f['size']))+'</td><td class="center" style="width:70px;">'+f['date']+'</td></tr>';
    }
    tbl.innerHTML=html+'</table>';
}
<?php while(list(,$d)=each($dirs))print sprintf("_d('%s','%s','%s');\n",addslashes($d['name']),date($date,$d['date']),addslashes($d['url'])); ?>
<?php while(list(,$f)=each($files))print sprintf("_f('%s',%d,'%s','%s',%d);\n",addslashes($f['name']),$f['size'],date($date,$f['date']),addslashes($f['url']),$f['date']);?>

window.onload=function()
{
    idx=_obj('idx'); _head(); _srt('name');
};
-->
</script>
</head>
<body>
    <div id="idx"><!-- do not remove --></div>
</body>
</html> 
```

预习：

[![截图文件管理器](../Images/6b8a0d559d11ef482ee846a2fa1fc598.png)](https://i.stack.imgur.com/8AYPl.png)

[要旨](https://gist.github.com/NabiKAZ/91f716faa89aab747317fe09db694be8)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-26T08:56:42.733

```
php -S localhost:8080 -t . script.php
Script.php:
<?php
    ini_set("memory_limit","2048M");
    $fi = new finfo(FILEINFO_MIME_TYPE);
    $dir = '.'.$_SERVER['PHP_SELF'];
    if (!is_file($dir)){
        $handle = @opendir($dir) or die("Cannot open " . $dir);
        header("Content-Type:text/html; charset=utf-8");
        echo("<style>a{color:black;width:100%;display:flex;flex-direction:row;}a:hover{color:black;}</style>");
        echo "<b>Index of " . $dir . ": </b><br/>";
        while($file = readdir($handle)){
            if($file != "." && $file != ".."){
                if (is_dir($file)) {
                    echo "<a href=\"".$file."/\">".$file."</a><br/>";
                }else{
                    echo "<a href=\"".$file."\">".$file."</a><br/>";
                }
            }
        }
        closedir($handle);
    } else {
        return false;
    }
?> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-06-26T10:04:43.960

php -S 本地主机：4443 -t 。路由.php

路由.php：

```
$f=preg_replace('/\/$/','',__DIR__."{$_SERVER['REQUEST_URI']}");
if(is_dir($f)){
$abf=preg_replace('/\/$/','',$_SERVER['REQUEST_URI']);
$fs=glob("$f/*");
foreach($fs as $one){
    $one=str_replace($f.'/','',$one);
    echo "<a href='$abf$one'>$one</a><br/>";
}
    return true;
}else{
    return false;
} 
```

# python - 如何在 Tkinter 的当前位置正确插入文本？

> ID：14946972
> 
> 赞同：1
> 
> 时间：2013-02-18T23:08:20.593
> 
> 标签：python, tkinter

**问题**

如何将文本插入 Tkinter 文本框？我正在尝试创建一个在当前位置插入列表的文字处理器。

**到目前为止我尝试过的**

我曾尝试使用该`CURRENT`论点，但这是不可靠的。

```
def listcmd(self): #THIS HAS BUGS!!! FIX IT SOON
    number = self.listentry.get()
    number = int(number)
    listINT = 1

    for x in xrange(number):
        self.write.insert(CURRENT, "%s:" % (str(listINT) )) #This is used for the number
        self.write.insert(CURRENT, "\n") #This inserts the newline
        listINT += 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T00:08:27.627

您需要使用索引“插入”或 Tkinter.INSERT。那总是指插入光标。

# c# - 处理来自 UdpClient.BeginReceive() 的传入消息

> ID：14946974
> 
> 赞同：2
> 
> 时间：2013-02-18T23:08:31.513
> 
> 标签：c#, asynchronous, .net-4.5, udpclient

好的，这是我的第一个堆栈溢出问题，所以请随时提出更好的提问方式或下次我应该包括的内容。大多数时候我可以谷歌得到我的答案，但这一个有点棘手......

我正在用 C# 编写一个 Windows 应用程序，它侦听 UDP 端口，然后处理传入的 UDP 消息。更具体地说，我正在使用`UDPClient`该类并使用 BeginReceive 方法进行侦听。接收回调依次触发它自己的消息接收事件，然后再次重置 UDP 客户端。此“MessageReceived”事件随后由处理器对象处理。

我认为这一切都很聪明，直到我的经理向我提出了一些问题，例如：

*   一次可以接收多少条消息？如果我们得到更多，会发生什么？
*   如果处理时间过长，消息是排队还是会丢失？
*   如果处理时间过长会发生什么？

我们不能丢失消息，因为最后一个消息仍在处理中，并且我们不能在系统崩溃之前进行构建，因为它也内存不足。他想听到（而且理所当然地）是某种验证，即有一种确定性的方式来处理消息的“风暴”。不幸的是，我不知道去哪里得到答案。我已经包含了我认为是下面的相关代码。

所以：

1.  有人知道以上问题的答案吗？
2.  我会在哪里做一些研究来找到这些答案和/或这种事情要遵循的一些模式？
3.  我可以使用什么样的工具来观察调试/性能分析的处理过程？
4.  如果我在设计中犯了一个巨大的错误，我应该怎么做才能解决它（即引入队列、使用线程池等）？

    ```
    public void ReceiveCallback(IAsyncResult ar)
    {
        //Cast the item back to the listener
        UdpListener listener = (UdpListener)ar.AsyncState;

        //If we are supposed to be listening, then get the data from the socket
        //Listen is false during shutdown
        if (Listen)
        {
            //The try catch is placed inside the listen loop so that if there is an error in the processing it will 
            //recover and listen again. this may cause more exceptions but we can be sure that it will not
            // stop listening without us knowing
            try
            {
                //Address and port from the external system
                IPEndPoint ep = listener.EndPoint;

                //Get the data from the async read
                Byte[] receiveBytes = listener.Client.EndReceive(ar, ref ep);

                //Reset the socket to listen again
                listener.Client.BeginReceive(new AsyncCallback(ReceiveCallback), listener);

                //Execute the event to pass external components the message
                HeartbeatEventArgs hea = new HeartbeatEventArgs(DateTime.Now, ep, receiveBytes);
                OnHeartbeatReceived(hea);

                //Ack back to the external system
                HeartbeatAcknowledgement(new IPEndPoint(ep.Address, ep.Port), receiveBytes);
            }
            catch (Exception e)
            {
                log.Error(e.Message);
                //Reset the socket to listen again

            }
        }
    } 
    ```

listner 只是`UDPClient`. 如下：

```
#region UdpClient Wrapper (UdpListener)
/// <summary>
/// UdpListener is used to control the asynchronous processing of a UDPClient object. 
/// </summary>
public class UdpListener
{
    /// <summary>
    /// IPEndpoint on which to accept a connection. Usually set to "Any".
    /// </summary>
    public IPEndPoint EndPoint { get; set; }
    /// <summary>
    /// The socket based client object that is used for communication
    /// </summary>
    public UdpClient Client { get; set; }

    public UdpListener(int port)
    {
        EndPoint = new IPEndPoint(IPAddress.Any, port);
        Client = new UdpClient(EndPoint);
    }
}
#endregion 
```

谢谢，

丁斯代尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:26:18.343

如果丢失消息是一个问题，那么 UDP 不适合您。UDP 只保证如果消息到达，它将是完整的。它不保证消息的顺序或交付。换句话说，如果客户端发送两条消息，您可能会乱序接收它们，或者只接收第一条消息，或者只接收最后一条消息（或根本没有）。如果您需要保证交付和订单，请改用 TCP（TCP 带有它自己的一组保证和陷阱）。

关于它可以处理多少条消息，您将有一个上限。如果您处理消息的速度不快于它们到达的速度，那么它们将在您的应用程序层或 UDP 网络层中排队。一旦网络缓冲区已满，您的网络接口就会开始丢弃消息。

# installshield - 如何使用 InstallShield QuickPatch 将 .NET dll 修补到 GAC？

> ID：14946989
> 
> 赞同：0
> 
> 时间：2013-02-18T23:10:07.740
> 
> 标签：installshield, patch

我正在尝试使用 InstallShield 的 Quick Patch 项目修补 .NET DLL 文件。需要为 COM 互操作注册 DLL。

当我修补文件时，似乎在 GAC 中正确替换了 dll，但是当我尝试从我的应用程序访问它时，我收到一条错误消息，表明应用程序无法连接到 DLL。

我认为它没有为 COM 互操作正确注册，但我不确定。

知道我应该怎么做才能让它工作吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:14:30.730

您可能必须使用正确的参数运行 regasm（它位于 .NET 框架目录中）才能注册 com 互操作。此外，DLL 文件通常在构建时选择了某些 COM 可见选项。自从我处理那个噩梦以来已经很长时间了，所以不记得所有的细节。

[http://msdn.microsoft.com/en-us/library/tzat5yw6(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/tzat5yw6(v=vs.80).aspx)

# c# - 在 Visual Studio 中从单个项目创建两个可执行文件？

> ID：14946991
> 
> 赞同：1
> 
> 时间：2013-02-18T23:10:19.940
> 
> 标签：c#, visual-studio

我在 Visual Studio 2012 中有一个解决方案，目前有两个项目：

1.  主要应用
2.  设置应用程序

它们都引用相同的数据文件并使用相同的数据模型文件（在主应用程序项目中）。

我想做的是允许用户相互依赖地打开设置应用程序或从主应用程序中打开设置窗口。这样他们就可以在应用程序运行时修改设置，也可以不修改。此外，运行时所做的任何更改都会立即反映。

我尝试简单地将设置应用程序项目作为依赖项添加到主应用程序中，这样我就可以打开窗口，但这会创建一个循环依赖项；因为我的设置应用程序依赖于主应用程序数据模型。

如何整理我的代码以允许用户从应用程序内或通过外部可执行文件打开设置窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T23:12:39.947

您可能应该有三个项目：

*   共享数据模型类库
*   主应用程序界面
*   设置界面

这样主 UI 可以依赖于设置 UI 而不会导致循环依赖。

或者，当然您可以将所有三个放在同一个可执行项目中，并且根本没有将设置 UI 作为单独的二进制文件...

# ios - 属性更改时更新标志

> ID：14946992
> 
> 赞同：2
> 
> 时间：2013-02-18T23:10:20.237
> 
> 标签：ios, objective-c, cocoa, core-data, sync

作为同步解决方案的一部分，我将 a`sync status`用于某个类的所有对象。每当该对象的特定（不是全部）属性发生变化时，我都想更新状态。

我正在考虑四种方法：

1.  在我更改需要同步的内容时手动设置代码中的状态。这是最明显的，但也是最费力和最容易出错的（我需要记住，在添加新功能时还要添加同步状态更新）。
2.  使用核心数据通知（例如`willSave`或 `NSManagedObjectContextObjectsDidChangeNotification`）跟踪它。乍一看，这似乎是最合适的——我只需在我的 AppDelegate 中注册通知并每次更新状态。但是是否可以检查更改并仅在我关心的属性更新时才更新同步状态？另外，设置本身不会`sync_status`触发此通知，导致我陷入无限循环吗？我将如何解决这个问题？
3.  我关心的属性的自定义设置器。我之前在尝试让它工作时遇到了麻烦，最终决定尝试不理会标准的核心数据获取器/设置器。但如果它是最合适的，我会深入研究。
4.  KVO。我以前没有使用过这种模式，但最简单的方法可能是为我关心的人注册属性更改通知并在那里设置标志。但是我会在哪里做呢？我需要监视该类的每个对象，那么是否可以开始在同一个对象中观察属性的 KVO 通知`awakeFromInsert`？即，每当创建一个对象时，立即让同一个对象监听attributeA 的更改并`sync_status` 在它触发时将其设置为自己的？

这些方法中哪一种最适合我？也许我错过了其他一些想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T00:31:09.043

> 手动设置状态码

由于您描述的原因，可能是一个坏主意。您需要在各种情况下执行此操作。您可能并不总是应用程序的开发人员。有一天你或其他人会忘记它。即使你不这样做，你也会在可能集中的地方得到额外的代码。

> 使用核心数据通知跟踪它 [...] 另外，设置 sync_status 本身是否也会触发此通知，导致我陷入无限循环？

这取决于你怎么做。`NSManagedObjectContextDidSaveNotification`如果您使用辅助设备，侦听可能会起作用`NSManagedObjectContext`。这样，您可以设置同步标志、保存更改并避免循环，因为您正在保存在您未观察到的不同上下文中。

使用`NSManagedObjectContextObjectsDidChangeNotification`也可以。这将在对象属性更改但实际上尚未进行保存时发布。检查`userInfo`字典以查看您关心的任何内容是否已更改，如果是，请设置您的`sync_status`标志。设置标志会触发一个新的通知，但它会是你不关心的，所以你打破了循环。使用单独的上下文也可以防止在此处循环。

> 我关心的属性的自定义设置器。

绝对可行，尽管取决于您关心的属性数量，您最终可能会使用很多访问器来更新同步状态。在你提到的四个中，这是我会使用的一个。

一种相关但更简单的方法是覆盖`willSave`您的托管对象类。这将在保存之前被调用。将其实施为

1.  查看`[self changedValues]`触发同步的属性。
2.  如果您找到其中任何一个，请设置同步标志。

这样，每个实体只有一个自定义方法，无论有多少属性最终触发同步标志。

> KVO

应该可以工作，但可能不如自定义设置器那么直观。

当我不得不做这样的事情时，我将同步信息放在我的数据存储之外。我会听`NSManagedObjectContextDidSaveNotification`，并且在观察者方法中我会：

1.  仔细`userInfo`查看发生了什么变化
2.  获取`NSManagedObjectID`需要同步的每个对象
3.  将对象 ID 转换为 NSStrings 并将它们添加到保存在单独文件中的列表中。

成功同步后，我会清除对象 ID 列表。

当时的想法主要是同步标志比实际模型数据更多元数据，因此我将其保留在模型之外。如果您更愿意将其保留在模型中，我会选择覆盖`willSave`.

# python - Python - 根据类型将字符过滤到结构中

> ID：14946993
> 
> 赞同：2
> 
> 时间：2013-02-18T23:10:42.797
> 
> 标签：python

几天来我一直在努力解决这个问题，尝试了各种方法，但它们似乎都没有以我可以使用的方式工作......

问题。

我得到一个任意字节流。字节中隐藏着一些语义元素。有大括号、方括号和方括号。这些表示三个不同的东西 - {} 是一个否。字节范围，例如 {17} 是 17 个字节。[] 是字节值，例如 [90:95] 是字节 x90、x91、x92、x93、x94、x95。() 是字节值“或”选项，例如 (46|47) 表示 x46 或 x47。

我必须检测其他语法结构，“！”，“*”，“？” 和 ”：”。

示例字节流：524946(46|58){4}434452367672736E

我正在尝试过滤它，所以我得到了类似的东西：

```
1 string 524946
2 token (46|58)
3 token {4}
4 string 434452367672736E 
```

一旦我把它分开，我就可以进一步处理它。

我最接近它的工作（它丑陋丑陋的代码......）： http: [//pastebin.com/XLg2H0PW](http://pastebin.com/XLg2H0PW)

我尝试了一些正则表达式，但我可以让它不将语法单元内的字符串字节计为普通字符串元素：

```
range_masks_list =  [(m_mask1.span()) for m_mask1 in re.finditer("\{([0-9]+|[0-9]+-[0-9]+|[0-9]+-\*)\}",sequence)] ## looks for {int}, {int-int} and {int-*}
byte_masks_list =  [(m_mask2.span()) for m_mask2 in re.finditer("\[[a-fA-F0-9]{2}:[a-fA-F0-9]{2}]",sequence)] ## looks for [a:b] where a and b are byte ranges
options_sets_list = [(m_mask3.span()) for m_mask3 in re.finditer("\(([a-fA-F0-9]{2})+\|([a-fA-F0-9]{2})+(\|([a-fA-F0-9]{2})+)*\)",sequence)] ## looks for regex or clauses e.g. (a|b)
string_chunk_list = [(m_mask4.span()) for m_mask4 in re.finditer("([a-fA-F0-9]{2})+",sequence)] ## looks for uninterrupted hex byte spans 
```

这看起来像：

```
def do_fragmenter(self,sequence):
    """ converts the grep grammer normalised string into a set of fragments and offsets for sig population"""
    sequence = sequence.replace(" ","")
    range_masks_list =  [(m_mask1.span()) for m_mask1 in re.finditer("\{([0-9]+|[0-9]+-[0-9]+|[0-9]+-\*)\}",sequence)] ## looks for {int}, {int-int} and {int-*}
    byte_masks_list =  [(m_mask2.span()) for m_mask2 in re.finditer("\[[a-fA-F0-9]{2}:[a-fA-F0-9]{2}]",sequence)] ## looks for [a:b] where a and b are byte ranges
    options_sets_list = [(m_mask3.span()) for m_mask3 in re.finditer("\(([a-fA-F0-9]{2})+\|([a-fA-F0-9]{2})+(\|([a-fA-F0-9]{2})+)*\)",sequence)] ## looks for regex or clauses e.g. (a|b)
    string_chunk_list = [(m_mask4.span()) for m_mask4 in re.finditer("([a-fA-F0-9]{2})+",sequence)] ## looks for uninterupted hex byte spans 
    string_chunks = []
    string_chunks_len = []
    for pair in string_chunk_list:
        string_chunks.append(sequence[pair[0]:pair[1]])
        string_chunks_len.append(len(sequence[pair[0]:pair[1]]))
    print zip(string_chunks,string_chunks_len) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:30:47.093

只要考虑到您定义的语法元素，您可能会使用这样的东西（用您需要的处理替换打印）：

```
#! /usr/bin/python3.2

import re

a = '524946(46|58){4}434452[22:33]367672736E'
patterns = [ ('([0-9a-fA-F]+)', 'Sequence '),
    ('(\\([0-9a-fA-F]+\\|[0-9a-fA-F]+\\))', 'Option '),
    ('({[0-9a-fA-F]+})', 'Curly '),
    ('(\\[[0-9a-fA-F]+:[0-9a-fA-F]+\\])', 'Slice ') ]

while a:
    found = False
    for pattern, name in patterns:
        m = re.match (pattern, a)
        if m:
            m = m.groups () [0]
            print (name + m)
            a = a [len (m):]
            found = True
            break
    if not found: raise Exception ('Unrecognized sequence') 
```

产量：

```
Sequence 524946
Option (46|58)
Curly {4}
Sequence 434452
Slice [22:33]
Sequence 367672736E 
```