# StackOverflow 问答 14070000-14070999

# sql-server-2012 - 报告 SQL Server 2012 中的错误和错误

> ID：14070001
> 
> 赞同：-2
> 
> 时间：2012-12-28T13:05:44.877
> 
> 标签：sql-server-2012

如何向 Microsoft SQL Server 团队报告在 SQL Server 中发现的错误或错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T13:08:40.527

错误信息是正确的。

你有两个操作数。

文字`'a'`被视为`varchar(1)`，第二个是`varbinary(30)`（如果在 a 中未指定长度，则默认值为 30 `CAST`）。连接这些**混合**数据类型是无效的。

*   `[var]char`+`[var]char`工作正常
*   `[var]binary`+`[var]binary`也不错

要回答您的问题，尽管错误报告应该出现[在 Connect 网站上，](https://connect.microsoft.com/SQLServer/Feedback)但始终值得首先检查它是否是真正的错误！

# javascript - 下拉菜单的Jquery keyup问题？

> ID：14070003
> 
> 赞同：0
> 
> 时间：2012-12-28T13:05:50.753
> 
> 标签：javascript, jquery

我有这段代码，基本上我有`<input id="register_username" type="text" name="username">`，我想检查用户是否已经存在于数据库中。当用户输入用户名时，代码可以完美运行，但有时某些浏览器（例如 Firefox）会为用户提供下拉菜单，让他们选择过去已经输入的一些值（例如他们的姓名）。问题是当从下拉菜单中选择用户名时，该`keyup`功能不起作用。我该如何解决这个问题？

```
$("#register_username").live('keyup', function() {

    $.post('scripts/register/register_check.php', {
        checkusername: $('#register_username').val()
    }, function(data) {
        if (data == "good") {
            //do something
        } else {
            //do the other thing
        }
    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:46:09.230

从自动完成下拉列表中选择一个选项后，我不认为所有浏览器都会触发事件。

您最好的选择是使用[`.change()`](http://api.jquery.com/change/)在元素失去焦点后触发的。例如，当用户选择自动完成选项并转到下一个字段时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T13:50:25.873

每当字段失去焦点时，我都会使用[onblur](http://api.jquery.com/blur/)事件触发。

# java - 如何使用java更新谷歌应用引擎中数据存储的字段值

> ID：14070007
> 
> 赞同：8
> 
> 时间：2012-12-28T13:06:03.110
> 
> 标签：java, google-app-engine, google-cloud-datastore

我在数据存储中创建了一个登录名（种类）。在登录中，我创建了两个字段用户名和密码。当用户更改密码时，我想更新数据存储区中的字段值。但是当我使用这段代码时，

```
DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
Entity passwordchange = new Entity("Login");
passwordchange.setProperty("password", "admin@123");
datastore.put(passwordchange); 
```

它创建一个新行并插入密码“admin@123”，而不是在同一行中更新新密码。

谁能建议我如何更新字段的数据。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-28T13:50:38.387

如果要更新实体，有两种选择：

A. 通过其 ID 从 Datastore 中检索此实体。更新属性。将其放回数据存储区。

```
try {
    loginEntity = datastore.get(KeyFactory.createKey("login", id));
    loginEntity.setProperty("password", "admin@123");
    datastore.put(loginEntity);
} catch (EntityNotFoundException e) {
// This should never happen
} 
```

B. 使用相同的 id 创建一个新实体。添加所有属性。放入数据存储区 - 它将覆盖旧实体。

```
Entity loginEntity = new Entity("login", id);
loginEntity.setProperty("password", "admin@123");
datastore.put(loginEntity); 
```

在这两个示例中，id 都是您要更改的实体的 id。

**我希望您不要将密码存储为字符串。**

# asynchronous - Apache Kafka：Java Producer 可重用性

> ID：14070008
> 
> 赞同：1
> 
> 时间：2012-12-28T13:06:25.687
> 
> 标签：asynchronous, messaging, apache-kafka

有没有人知道

> kafka.javaapi.producer.Producer

可以在多个方法调用（例如多个 send(...)）之间重用，还是每次都应该关闭？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T12:09:49.930

是的，它肯定可以重复使用。`Producer`创建是非常缓慢的操作，因为它需要建立与所有分区（可能还有 zookeeper）的连接。因此，应尽可能重用生产者。

# javascript - Javascript：在 setInterval 中强制执行新的循环迭代

> ID：14070010
> 
> 赞同：1
> 
> 时间：2012-12-28T13:06:28.517
> 
> 标签：javascript, loops, setinterval

我有一个 setInterval 循环。它设置为 3500 毫秒，如下所示：-

```
var loop = setInterval(function() { /*stuff*/ }, 3500); 
```

如果发生某种情况，在“东西”的某个时刻，我想强制循环进行新的迭代，而不是等待 3500 毫秒。这怎么可能？是继续还是我只需要以不同的方式构建流程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T13:12:18.830

`setTimeout`您可以尝试使用而不是编写匿名自调用函数`setInterval`：

```
var i = 0;

(function() {
    // stuff
    i++;
    if (i % 2 == 0) {
        // If some condition occurs inside the function, then call itself once again
        // immediately
        arguments.callee();
    } else {
        // otherwise call itself in 3 and a half seconds
        window.setTimeout(arguments.callee, 3500);
    }
})();​ // <-- call-itself immediately to start the iteration 
```

* * *

更新：

由于在评论部分表达了反对使用的分歧`arguments.callee`，这里是如何使用命名函数来实现相同的：

```
var i = 0;
var doStuff = function() {
    // stuff
    i++;
    if (i % 2 == 0) {
        // If some condition occurs inside the function, then call itself once again
        // immediately
        doStuff();
    } else {
        // otherwise call itself in 3 and a half seconds
        window.setTimeout(doStuff, 3500);
    }
};
doStuff(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T13:18:09.730

你可以使用这样的东西......使用`setTimeout`而不是`setInterval`......

```
<script type="text/javascript">
    var show;
    var done = false;

    show = setTimeout(showHideForm, 3500);

    function showHideForm() {
        // Do something

        if(done) {
            clearTimeout(show);

            show = setTimeout(showHideForm, 2000);
        }
    }
</script> 
```

`clearTimeout`将返回的句柄作为参数`setTimeout`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T13:19:14.327

Use a named function and call it when you want.

```
var loop = setInterval(loopFunc, 3500);

function loopFunc(){
  //do something
}

function anticipate(){
  clearInterval(loop);  //Stop interval
  loopFunc();  //Call your function
  loop = setInterval(loopFunc, 3500);  //Reset the interval if you want
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T13:20:28.053

```
function looper(t) {
    var loop = setInterval(function() {
        document.write(s++);
        if (mycondition) { // here is your condition
            loopagain(200); // specify the time which new loop will do
            loop = window.clearInterval(loop); // clear the first interval
            return; // exit from this function!
        }
    }, t);
}

window.onload = looper(1000); // this will have default setInterval function time ans will start at window load!

function loopagain(t) {
    looper(t);
}​ 
```

[http://jsfiddle.net/tFCZP/](http://jsfiddle.net/tFCZP/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T13:34:41.250

My contrived example:

```
var time = 3500,
    loops = 0,
    loop;

(function run(){
    var wait = time,
        dontwait = false;

    if (loops++ == 5) {
        loops = 0;
        dontwait = 1000;
    }

    console.log('Interval: ', dontwait || wait);

    return loop = setTimeout(run, dontwait || wait);
})();​ 
```

[http://jsfiddle.net/NX43d/1/](http://jsfiddle.net/NX43d/1/)

Basically, a self-invoking function looping back on a self-calling function, with (!) shorthand variable switching. Nifty.

# deployment - 混淆的 JavaFX JAR 中的 FXML 找不到控制器类

> ID：14070012
> 
> 赞同：4
> 
> 时间：2012-12-28T13:06:48.347
> 
> 标签：deployment, ant, javafx-2, obfuscation, fxml

我正在使用混淆我的 javafx 应用程序 jar，`Proguard 4.8`并且混淆的 jar 显示 jar 中缺少一些类。缺少的类是 FXML 的所有控制器类。`build.xml`用另外两个实用程序 jar 混淆应用程序 JAR 的这一步有什么问题？

```
<target name="Ofuscating" depends="CreatingJars" >
    <taskdef resource="proguard/ant/task.properties" classpath="${WorkingFolder}/proguard.jar" />
    <proguard>
        -dontusemixedcaseclassnames
        -printmapping proguard.map
        -dontshrink
        -dontoptimize
        -dontskipnonpubliclibraryclasses
        -dontskipnonpubliclibraryclassmembers
        <!--flattenpackagehierarchy ''-->
        -libraryjars "${java.home}/lib/rt.jar"
        -libraryjars "${java.home}/lib/javaws.jar"
        -libraryjars "${env.JAVA_HOME}/lib/ant-javafx.jar"
        -libraryjars "${env.JREFX_HOME}/lib/jfxrt.jar"          
        -libraryjars ${WorkingFolder}/libs/BareBonesBrowserLaunch.jar
        :
        :
        -libraryjars ${WorkingFolder}/CustomJars/Lib.jar 
        -injars ${WorkingFolder}/${app.name}.jar
        -injars ${WorkingFolder}/CustomJars/Verifier.jar(!META-INF/MANIFEST.MF)
        -injars ${WorkingFolder}/CustomJars/Utility.jar(!META-INF/MANIFEST.MF)
        -outjars ${WorkingFolder}/Obfuscated.jar
        -ignorewarnings
        -keepattributes Exceptions,InnerClasses,Signature,Deprecated,SourceFile,LineNumberTable,LocalVariable*Table,*Annotation*,Synthetic,EnclosingMethod
        -adaptresourcefilecontents **.fxml,**.properties,META-INF/MANIFEST.MF,images/*.jar,publicCerts.store,production.version
        -keepclassmembernames class * {
            @javafx.fxml.FXML *;
        } 
        -keepclasseswithmembers public class com.javafx.main.Main, com.product.main.EntryFX, net.license.LicenseEntryPoint {
            public *; public static *;
        }
        -keep class * extends org.xml.sax.helpers.DefaultHandler
        -keepclassmembers class * extends org.xml.sax.helpers.DefaultHandler {
            private *;
                public *;
        }
    </proguard>
</target> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T20:26:49.563

`.fxml`文件具有控制器类的确切名称的字符串。

```
<Scene width="550" height="550"
    fx:controller="fxmltableview.FXMLTableViewController" 
    xmlns:fx="http://javafx.com/fxml"> 
```

您需要从混淆中排除控制器，或者找出它们的新名称并更新`.fxml`混淆 jar 中的文件。

# spss - SPSS AnswerTree 如何识别变量类型？

> ID：14070016
> 
> 赞同：1
> 
> 时间：2012-12-28T13:07:01.647
> 
> 标签：spss

我正在使用 AnswerTree 中具有连续、有序和名义变量的数据集来执行 CHAID。但是我的一些序数变量的值从 1 到 10 作为等级。

例如。Estimated_Income 字段的值从 1 到 10，其中 1 代表最低收入组

但我的答案树将此变量读取为连续变量。有人可以说明 answerTree 如何识别每个变量吗？

我正在从 txt 文件中读取输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T03:06:46.383

您可以在测量级别子对话框中明确设置测量级别。请参阅帮助中的“设置测量级别”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T14:18:11.820

假设您正在读取 sav 文件，AnswerTree 使用声明的测量级别。

# reflection - 使用 mono.cecil 向“现有”类型添加新构造函数

> ID：14070017
> 
> 赞同：3
> 
> 时间：2012-12-28T13:07:15.077
> 
> 标签：reflection, reflection.emit, mono.cecil

我正在尝试将新的重载构造函数添加到现有类型。我尝试使用 emit 命名空间来做到这一点，但是创建的类型不会继承基类和所有其他方法。

在阅读了一些文章之后，我认为 .net 框架内置类是不可能的。

所以我得到了 Mono.Cecil，但找不到任何像样的例子来实现这一点。

我遇到了一个复制方法的示例，但不复制道具、字段等。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-05T10:05:43.647

这添加了一个空的构造函数

```
void AddEmptyConstructor(TypeDefinition type, MethodReference baseEmptyConstructor)
{
    var methodAttributes = MethodAttributes.Public | MethodAttributes.HideBySig | MethodAttributes.SpecialName | MethodAttributes.RTSpecialName;
    var method = new MethodDefinition(".ctor", methodAttributes, ModuleDefinition.TypeSystem.Void);
    method.Body.Instructions.Add(Instruction.Create(OpCodes.Ldarg_0));
    method.Body.Instructions.Add(Instruction.Create(OpCodes.Call, baseEmptyConstructor));
    method.Body.Instructions.Add(Instruction.Create(OpCodes.Ret));
    type.Methods.Add(method);
} 
```

您将需要扩展它以传递额外的参数。

从[这里](https://github.com/Fody/EmptyConstructor/blob/a911c5ddd892a0c57727a2a4cee950fc05399aee/EmptyConstructor.Fody/ModuleWeaver.cs#L119)

# z3 - Z3 使用 C-API 设置随机种子

> ID：14070026
> 
> 赞同：1
> 
> 时间：2012-12-28T13:07:57.287
> 
> 标签：z3

在 Z3 选项中，我们得到 -

```
Search heuristics:
  -rd:num     random case-split frequency (default: 2).
  -rs:num     random seed. 
```

我想知道，是否有一个 C API 来设置随机种子？

我使用以下 API 来设置超时。随机种子有类似的东西吗？

```
params = Z3_mk_params(ctx);         
Z3_params_set_uint(ctx, params, Z3_mk_string_symbol(ctx, ":timeout"),  timeout);            
Z3_solver_set_params(ctx, solver, params); 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:52:25.190

参数的名称是`:random-seed`。该值也是一个`unsigned int`。

话虽如此，下一个 Z3 版本（v4.3.2）将对设置参数有更好的支持。这些改进已经在[http://z3.codeplex.com](http://z3.codeplex.com)`unstable`的(work-in-progress) 分支中可用。

# iphone - 在 UIScrollview 中拖动会增加其子视图数

> ID：14070027
> 
> 赞同：0
> 
> 时间：2012-12-28T13:07:59.387
> 
> 标签：iphone, objective-c, ios, ios6

我是iOS的初学者。我创建了一个`UIScrollview`包含 5 个图像的图像，并根据方向设置其宽度、高度和大小变化。添加所有 5 张图像后，滚动视图子视图计数为 5。但是当开始拖动时计数增加到 7。我不知道在哪里添加了空白视图。

* * *

## 代码

```
-(void)addImageWithName:(NSString*)imageString atPosition:(int)position {

    UIImage *image = [UIImage imageWithContentsOfFile:imageString];
    imageView = [[UIImageView alloc] initWithImage:image];
    // imageView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    imageView.frame = CGRectMake(position*scrollview.frame.size.width*2, 0, scrollview.frame.size.width *2,scrollview.frame.size.height );
    imageView.tag = 1000 + position +1;

    [scrollview addSubview:imageView];
}

-(void)imageLoad:(NSInteger)startImage
{

    int Index = -1;
    for (UIImageView *subview in scrollview.subviews)
    {

        [subview removeFromSuperview];
    }

    for (int i = startImage; i < startImage+5; i++) {

        Index++;

        fullPath = [dataPath stringByAppendingString:[NSString stringWithFormat:@"/image%d.jpg",i]];

        [self addImageWithName:fullPath atPosition:Index];
        scrollview.contentSize = CGSizeMake(i*scrollview.frame.size.width, 0);

    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T13:12:04.077

当您开始滚动时，滚动条视图会临时添加为子视图。

# facebook - Facebook 的“Like”按钮在 FireFox 中更改为“Share”

> ID：14070029
> 
> 赞同：2
> 
> 时间：2012-12-28T13:08:09.127
> 
> 标签：facebook, facebook-like, share

我发现了一个有趣的问题——在 FireFox 上（并且只有在那里）我看到 Facebook Like 按钮为 Share。这很正常（因为他们合并了点赞和分享）还是有问题？别人有这个问题吗？我在两台电脑上找到了它。有没有办法解决这个问题？

# liferay-6 - 使用钩子覆盖liferay登录jsp

> ID：14070030
> 
> 赞同：0
> 
> 时间：2012-12-28T13:08:10.967
> 
> 标签：liferay-6

我正在尝试覆盖 Liferay 6.1 中的 JSP，即 html/portlet/login/login.jsp。

我有

```
created a hook (using Eclipse)
added <custom-jsp-dir>/custom_jsps</custom-jsp-dir> to liferay-hook.xml
created the abovementioned directory structure
copied login.jsp there and modified it
deployed the hook
(restarted the server, you never know...) 
```

但是我看不到修改后的登录页面。我在哪里做错了。我对这个 liferay 很陌生。我对此感到非常困惑。谁能告诉我我在哪里做错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T10:13:03.437

[在 Liferay-portal-6.0.5 中实现 Hooks](http://michi-path.blogspot.in/2012/03/implementing-hooks-in-liferay-portal.html)

以上链接的目标是为自定义登录页面创建挂钩。希望这可以帮助..！！！

# sql - 函数计算两行日期之间的间隔

> ID：14070042
> 
> 赞同：0
> 
> 时间：2012-12-28T13:09:03.243
> 
> 标签：sql, postgresql, timestamp, plpgsql, postgresql-9.1

我有一个 plpgsql 块：

```
EXTRACT(day FROM TIMESTAMP (
         Select evt_start_date
         From events
         Where evt_id = oldEvtId)
      - (Select evt_start_date
         From events
         Where evt_id = newEvtId)
     ) INTO evtStartDateDiff; 
```

如何从上面的查询中找到*以天为单位的日期差异，*该查询将`startDate`和`endDate`作为表中的参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T09:17:50.097

可能看起来像这样（**SQL 函数**）：

```
CREATE OR REPLACE FUNCTION f_days_between(
   old_evt_id int, 
  ,new_evt_id int, 
  ,OUT days_diff int) AS
$func$
SELECT EXTRACT(day FROM evt_start_date
                     - (SELECT e.evt_start_date
                        FROM   events e
                        WHERE  e.evt_id = $2)
              )::int
FROM   events
WHERE  evt_id = $1;
$func$ LANGUAGE sql; 
```

我对其进行了简化并将其放入一个普通的 SQL 函数中。也可以是**plpgsql 函数**：

```
CREATE OR REPLACE FUNCTION f_days_between(
   old_evt_id int, 
  ,new_evt_id int, 
  ,OUT days_diff int) AS
$func$
BEGIN
SELECT INTO days_diff
       EXTRACT(day FROM evt_start_date
                     - (SELECT e.evt_start_date
                        FROM   events e
                        WHERE  e.evt_id = old_evt_id)
              )::int
FROM   events
WHERE  evt_id = new_evt_id;
END
$func$ LANGUAGE plpgsql; 
```

*   对于这种简单的情况，将一个子查询嵌套在另一个查询中。

*   在这两种情况下都使用`OUT`参数来简化语法。这里不需要一个`RETURNS`子句。更多关于[`CREATE FUNCTION`手册](http://www.postgresql.org/docs/current/interactive/sql-createfunction.html)。

*   [`extract()`](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT)通常返回`double precision`，`integer`似乎更适合天数，因此转换为整数 ( `::int`) 并使用整数作为 `OUT`参数。

# r - 比较两个表的值相对于 R 中的容差

> ID：14070045
> 
> 赞同：5
> 
> 时间：2012-12-28T13:09:11.087
> 
> 标签：r, compare, intervals

我想比较两张表。如果将表 2 的值置于*表 2的 0.3 容差（+0.3 和 -0.3）内，则称为正常，否则称为异常。*

样本数据：

```
Table 1\.                        

0.17666667
-0.2413333
-0.179666
0.182437
0.012229
0.127333
-0.1180
0.8873
1.24100
1.5213

Table 2.

-1.6
-0.5
-0.4
-0.4
-0.2
2.5
0.6
2.2
2.3
1.3 
```

第一行的预期结果：

如果 0.17666667**-0.3**<-1.6<0.17666667**+0.3**

结果*NORMAL* 否则*异常*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T14:15:43.627

您也可以使用`all.equal`.

```
table.1 <- scan(text="
0.17666667
-0.2413333
-0.179666
0.182437
0.012229
0.127333
-0.1180
0.8873
1.24100
1.5213")

table.2 <- scan(text="
-1.6
-0.5
-0.4
-0.4
-0.2
2.5
0.6
2.2
2.3
1.3")

are.close <- function(x, y, tol) isTRUE(all.equal(x, y, tol))
close <- mapply(are.close, x=table.1, y=table.2, tol=0.3)
result <- ifelse(close, 'N', 'A')
# [1] "A" "N" "N" "A" "N" "A" "A" "A" "A" "N" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T13:21:16.037

使用 和 的组合，`transform`如`ifelse`：

```
DF <- data.frame(Table_1=unname(Table_1), Table_2=unname(Table_2))
DF <- transform(DF, 
                Result = ifelse(Table_1 - 0.3 < Table_2 & Table_2 < Table_1 + 0.3, 'Normal', 'Abnormal'))
      Table_1 Table_2   Result
1   0.1766667    -1.6 Abnormal
2  -0.2413333    -0.5   Normal
3  -0.1796660    -0.4   Normal
4   0.1824370    -0.4 Abnormal
5   0.0122290    -0.2   Normal
6   0.1273330     2.5 Abnormal
7  -0.1180000     0.6 Abnormal
8   0.8873000     2.2 Abnormal
9   1.2410000     2.3 Abnormal
10  1.5213000     1.3   Normal 
```

数据集是：

```
Table_1 <- read.table(text="0.17666667
-0.2413333
-0.179666
0.182437
0.012229
0.127333
-0.1180
0.8873
1.24100
1.5213", header=F)

Table_2 <- read.table(text="-1.6
-0.5
-0.4
-0.4
-0.2
2.5
0.6
2.2
2.3
1.3", header=F) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T14:34:44.657

使用`proxy`pacakge，我们可以将其表述为距离或相似性度量，非常干净且可扩展的解决方案，适用于任何距离。

```
library(proxy)
result <- rep('abnormal',length(Table 1.))     ## initialize mu result vector
result[dist(df[,1], df[,2], 
       method = function(x,y) abs(x -y),       ## I define my own distance
       pairwise = TRUE) < 0.3] <- 'normal'     ## by pair distance

 result
 [1] "abnormal" "normal"   "normal"   "abnormal" "normal"  
     "abnormal" "abnormal" "abnormal"   
     "abnormal" "normal" 
```

# wpf - 如何在 Windows 7 下的 WPF 4.5 中编辑样式？

> ID：14070046
> 
> 赞同：1
> 
> 时间：2012-12-28T13:09:16.173
> 
> 标签：wpf, visual-studio-2012, expression-blend, asp.net-4.5, blend-2012

我刚刚意识到 Blend for Visual Studio 2012 不支持 W7 下的 WPF 应用程序。

打开一个窗口后，我只能看到原始 XAML。

我需要编辑图表数据系列的样式`System.Windows.Controls.DataVisualization.Charting`。我通常将 Blend 用于此类任务 - 因为它从某个地方提取默认样式并在眨眼间将其提供给您。

现在我被卡住了..你们会怎么做？

**PS这里是**未来参考的很好的总结：http: [//blendinsider.com/technical/available-now-blend-for-visual-studio-2012-2012-08-15/](http://blendinsider.com/technical/available-now-blend-for-visual-studio-2012-2012-08-15/)

*（向下滚动查看表格什么版本支持什么）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T00:12:23.533

您需要使用支持 WPF 应用程序的 Blend Preview。

*   [http://expression.microsoft.com/en-us/jj154135](http://expression.microsoft.com/en-us/jj154135)

*   [如何在 Visual Studio 2012 中使用 WPF 项目设计动画？](https://stackoverflow.com/questions/10874005/how-can-i-design-an-animation-with-a-wpf-project-in-visual-studio-2012)

Visual Studio 2012 Update 2 将发布支持 WPF 的 Blend 版本...同时使用预览版。

*   [http://www.microsoft.com/expression/](http://www.microsoft.com/expression/)

# c# - 检查进程是否返回错误 | C＃

> ID：14070051
> 
> 赞同：8
> 
> 时间：2012-12-28T13:09:45.523
> 
> 标签：c#, asp.net, .net

声明并启动如下流程后：

```
System.Diagnostics.Process _p = new System.Diagnostics.Process();
.....
.....
....
_p.Start(); 
```

现在有两种可能性：输出或错误。

如果发生错误，是否有任何`Process`类的属性可以知道是否发生了错误？

我正在重定向标准输出，我不想像[MSDN 中警告的那样](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.redirectstandarderror.aspx)重定向标准错误。我也不想使用：`BeginOutputReadLine();`

有没有其他选择？

谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-28T13:14:15.380

我有一个服务需要启动进程并等待它们退出，我使用类似的东西：

```
process.Start();
int timeout = ... // some normal value in milliseconds

process.WaitForExit(timeout);

try
{
   //ExitCode throws if the process is hanging
   return (CommandErrorCode)process.ExitCode;
}
catch (InvalidOperationException ioex)
{
   return CommandErrorCode.InternalError;
} 
```

`CommandErrorCode`类似的东西在哪里

```
public enum CommandErrorCode
{
    Success = 0,
    //some other values I know from the processes that are managed
    InternalError = 256 // the ExitCode is a byte, so this out of that range
} 
```

顺便说一句，我重定向标准输出和标准错误，并使用 BeginXXXReadLine 和 XXXDataReceived 处理程序，没有任何问题，但我使用的过程是已知的、定义明确的和行为良好的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T03:38:24.943

这是一个代码片段，希望这有帮助

[http://ss64.com/nt/cmd.html](http://ss64.com/nt/cmd.html)获取 cmd.exe 帮助

```
private int CallShell(string exeCommand, string Parameters)
        {
            //http://ss64.com/nt/cmd.html
            /*
            This function will actually take the shell string and envoke the appropriate process
             passing it the arguments to do the work
            */

            // Initialize the process and its StartInfo properties.
            System.Diagnostics.Process ProcessEXE = new System.Diagnostics.Process();

            logger.DebugFormat("About to Start Process - {0} {1}",exeCommand, Parameters);
            try
            {

                ProcessEXE.StartInfo.FileName = exeCommand;

                // Set UseShellExecute to false for redirection.
                //  false if the process should be created directly from the executable file
                ProcessEXE.StartInfo.UseShellExecute = false;
                ProcessEXE.StartInfo.WorkingDirectory = System.Environment.CurrentDirectory;

                //EnableRaisingEvents property indicates whether the component should be notified when the operating system has shut down a process

                ProcessEXE.StartInfo.Arguments = Parameters;

                ProcessEXE.StartInfo.RedirectStandardOutput = true;
                ProcessEXE.StartInfo.RedirectStandardError = true;
                ProcessEXE.EnableRaisingEvents = true;
                ProcessEXE.StartInfo.CreateNoWindow = true;

                ProcessEXE.OutputDataReceived += new System.Diagnostics.DataReceivedEventHandler(ProcessEXE_OutputDataReceived);
                ProcessEXE.ErrorDataReceived += new System.Diagnostics.DataReceivedEventHandler(ProcessEXE_OutputDataReceived);

                logger.DebugFormat("Process Started.");
                ProcessEXE.Start();

                // Start the asynchronous read of the sort output stream.
                ProcessEXE.BeginErrorReadLine();
                ProcessEXE.BeginOutputReadLine();

                //The WaitForExit overload is used to make the current thread wait until the associated process terminates
                logger.DebugFormat("Process Waiting for exit.");
                ProcessEXE.WaitForExit();

                if (ProcessEXE.ExitCode == 0)
                {
                    logger.Debug(string.Format("Shell Process exited with exit code {0}", ProcessEXE.ExitCode));
                }
                else
                {
                // throw error here if required - check the return error code
                    logger.Warn(string.Format("Shell Process exited with exit code {0}", ProcessEXE.ExitCode));
                }
            }
            catch (Exception ex)
            {
                throw new Exception(string.Format("Method:{0}", ex.TargetSite), ex);
            }

            return ProcessEXE.ExitCode;
        }

void ProcessEXE_OutputDataReceived(object sender, System.Diagnostics.DataReceivedEventArgs e)
        {
            try
            {
                StringBuilder sb = new StringBuilder(string.Empty);
                if (e == null) return;

                if (e.Data == null)
                {
                    //No processing
                }
                else
                {
                   // your logic to detect error msg out from output - if at all required
                }

                if (sb.ToString().ToUpper().IndexOf("ERROR") > 0)
                {
                    string smessage = "Error text found in  output.";

                // do your error response action here .

                }
            }
            catch (Exception exp)
            {
                logger.ErrorFormat("Error in ProcessEXE_OutputDataReceived Message:{0}", exp.Message);
                logger.ErrorFormat("Error in ProcessEXE_OutputDataReceived Data Received:{0}", e.Data);

            // either throw error msg or kill the process 
            }
            finally
            {
                // Not throwing the exception
            }
        } 
```

# model - 在 Yii 中的活动记录的模型文件中添加新属性

> ID：14070053
> 
> 赞同：0
> 
> 时间：2012-12-28T13:09:50.867
> 
> 标签：model, yii

我是 Yii 框架的新手，有一个问题。

我有一个名为“节点”的表，其中包含以下字段：

*   ID
*   姓名
*   parent_id

parent_id 包含此表中也存在的节点的父节点的 ID。

我已经使用 Gii 界面创建了模型、控制器和视图文件。在视图文件中显示了 parent 的 id ，但我想显示 parent name 而不是它的 id 。

我想也许我需要在这个表的模型类中添加一个公共属性，所以我可以通过视图文件中的 ->parent_name 访问它。

我该怎么做 ？我应该更改哪些文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:17:59.843

您应该有一个`parent`表和关系的父项，例如：

```
'parent' => array(self::BELONGS_TO, 'Parent', 'parent_id) 
```

或者

```
'parent' => array(self::BELONGS_TO, 'Node', 'parent_id'), 
```

如果它与同一张桌子有关系。然后您将能够像这样访问父名称：

```
echo CHtml::value($node, 'parent.name'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:37:40.923

您应该与您的父节点有关系。

所以在你的 Node::relations 函数中，你应该有类似的东西：

```
'parent' => array(self::BELONGS_TO, 'Node', 'parent_id'), 
```

要从您的孩子那里获取此值，您可以执行以下操作（假设您的子节点变量名为 $childNode）：

```
echo $childNode->parent->name; 
```

如果你真的想能够做到...

```
$childNode->parent_name; 
```

...由于某种原因，您可以在 Node 模型中创建一个属性，如下所示：

```
public function getParent_name()
{
    if ($this->parent == null)
        return '';

    return $this->parent->name;
} 
```

现在你可以打电话...

```
$childNode->parent_name; 
```

或者

```
$childName->getParent_name(); 
```

获取父节点的名称。

# javascript - 如何在创建元素之前更改 CSS 属性？

> ID：14070055
> 
> 赞同：-2
> 
> 时间：2012-12-28T13:10:09.500
> 
> 标签：javascript, html, css

`window.onload`我必须在, 和`body.onload`.之前修改 div 的 css

```
<html>
    <head>
        <style type="text/css">
            html, body {
                width: 100%;
                height: 100%;
                padding: 0px;
                margin: 0px;
            }
            div {
                margin-left: auto;
                margin-right: auto;
            }
        <script>
            HTMLDivElement.prototype.style.marginTop = (window.innerHeight/2 - HTMLDivElement.scaleHeight/2) + "px";
        </script>
    </head>

    <body>
        <div>
        foo<br/>bar
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T13:18:19.703

我不知道这是否适用于所有浏览器，但您可以`style`在您的部分中附加一个新的 -node ，`head`如下所示：

```
var marginTop = ...;
var node = document.createElement("style");
node.setAttribute("rel", "stylesheet");
node.innerHTML = "div { margin-top: " + marginTop + "px; }";
document.head.appendChild(node); 
```

您的`head`元素显然必须存在才能使其正常工作。我知道它很丑，我不推荐使用它，但我认为这是你想要的。

更新：我找到了另一种方式，我认为这更好，因为您可以使用 API：

```
// insert a stylesheet if you don't have one
if (document.styleSheets.length == 0) {
    document.head.appendChild(document.createElement("style"));
}

var marginTop = ...;
var rule = "div { margin-top: " + marginTop + "px; }";
document.styleSheets[0].insertRule(rule); 
```

有关更多信息，您可以访问[http://www.w3.org/TR/DOM-Level-2-Style/css.html](http://www.w3.org/TR/DOM-Level-2-Style/css.html) 我不知道是否所有浏览器都支持这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T13:13:37.100

在加载窗口之前，文档没有加载到 dom 中。

所以从记忆中.. javascript 无法编辑它。

您总是可以在 onLoad 之后对其进行编辑，并且应该不会注意到太大的不同。

例如在 jQuery 中：

```
<script>
(function () {
    var divHeight = ($('div').height())/2,
        windowHeight = window.innerHeight/2;

    $('div').css('margin-top', windowHeight - divHeight);
}())
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T13:14:32.970

未加载元素时，您将如何找到它。这必须在服务器端完成。

顺便说一句，为什么您需要这种功能？

# css - css 随着过渡旋转似乎会影响其他元素的不透明度？

> ID：14070056
> 
> 赞同：3
> 
> 时间：2012-12-28T13:10:12.333
> 
> 标签：css, webkit, transform, css-transitions

我有一个 DIV 使用 1s 转换通过 CSS3 转换旋转的问题：

在 OSX 10.7.5 上的 Chrome 23 和 Safari 6 中，在 .rotate-divs 过渡期间，其他容器中的字体会略微变暗。

关于导致这种情况以及如何避免这种情况的任何想法？

[http://jsfiddle.net/tTa5r/](http://jsfiddle.net/tTa5r/)

```
.rotate{
  background: green;
  -moz-transition: all 1s ease;
  -webkit-transition: all 1s ease;
  -o-transition: all 1s ease;
  transition: all 1s ease;
}
.rotate.flip{
  -moz-transform: rotate(540deg);
  -webkit-transform: rotate(540deg);
  -o-transform: rotate(540deg);
  transform: rotate(540deg);
} 
```

使用 jquery 添加/删除翻转类：

```
$('.rotate').on('click', function(){
  $(this).toggleClass('flip');
});​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T12:51:01.510

> -webkit-backface-visibility：隐藏；

也为我工作......将它添加到我已经转换的元素中

ps我会投票赞成以前的答案，但我不能，因为我没有足够的“声誉”，我也看不到如何评论它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T15:53:00.097

添加

```
-webkit-backface-visibility: hidden; 
```

对于所有受影响的元素，似乎有助于解决这个问题：http: [//jsfiddle.net/tTa5r/2/](http://jsfiddle.net/tTa5r/2/)

虽然我不确定这个属性是做什么的，但它似乎对字体渲染有影响：http: [//jsfiddle.net/tTa5r/](http://jsfiddle.net/tTa5r/) vs [http://jsfiddle.net/tTa5r/2/](http://jsfiddle.net/tTa5r/2/)

...不知道我是否不喜欢那样，不过。

在这里找到：[iPhone WebKit CSS 动画导致闪烁](https://stackoverflow.com/questions/2946748/iphone-webkit-css-animations-cause-flicker)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T11:15:46.817

backface-visibility 属性确定元素在背离屏幕时是否可见，通常在“翻转”元素时使用。

在这种情况下，它似乎与添加时具有相同的效果：

```
-webkit-transform: translate3d(0,0,0); 
```

演示 - [http://jsfiddle.net/tTa5r/4/](http://jsfiddle.net/tTa5r/4/)

这会强制硬件加速为您提供稍微更薄（抗锯齿），但在转换之前和之后更一致的字体渲染。

还有第三种选择，那就是添加：

```
-webkit-font-smoothing: antialiased; 
```

演示 - [http://jsfiddle.net/tTa5r/3/](http://jsfiddle.net/tTa5r/3/)

我之前回答了一个类似的问题，@mddw 发布了一条评论链接到一篇描述抗锯齿方法的博客文章，这似乎是您在转换期间和之后看到差异的原因。

[http://cantina.co/2012/05/18/little-details-subpixel-vs-greyscale-antialiasing/](http://cantina.co/2012/05/18/little-details-subpixel-vs-greyscale-antialiasing/)

希望有帮助！

# python - 在python中将数字转换为意大利语和意大利语到数字

> ID：14070060
> 
> 赞同：2
> 
> 时间：2012-12-28T13:10:47.420
> 
> 标签：python

我需要 Python 代码来将数字与意大利语相互转换。

查看以前的问题，我了解到 pynum2word 在几种语言中以一种方式（num -> words），但唉，不是意大利语。

如果 Python 中不存在这样的代码，我不介意从 Perl/Ruby/Java 翻译这样的代码。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T15:10:41.700

要进行从意大利语到数字的转换，使用正则表达式非常简单：

```
import re

NUMBERS_SEQ = (
    ('dieci', '10'),
    ('undici', '11'),
    ('dodici', '12'),
    ('tredici', '13'),
    ('quattordici', '14'),
    ('quindici', '15'),
    ('sedici', '16'),
    ('diciasette', '17'),
    ('diciotto', '18'),
    ('diciannove', '19'),
    ('venti', '20'),
    ('trenta', '30'),
    ('quaranta', '40'),
    ('cinquanta', '50'),
    ('sessanta', '60'),
    ('settanta', '70'),
    ('ottanta', '80'),
    ('novanta', '90'),
    ('cento', '100'),
    ('mille', '1000'), ('mila', '1000'),
    ('milione', '1000000'), ('milioni', '1000000'),
    ('miliardo', '1000000000'), ('miliardi', '1000000000'),
    ('uno', '1'), ('un', '1'),
    ('due', '2'),
    ('tre', '3'),
    ('quattro', '4'),
    ('cinque', '5'),
    ('sei', '6'),
    ('sette', '7'),
    ('otto', '8'),
    ('nove', '9'),
    )

NUMBERS = dict(NUMBERS_SEQ)

TOKEN_REGEX = re.compile('|'.join('(%s)' % num for num, val in NUMBERS_SEQ))

def normalize_text(num_repr):
    '''Return a normalized version of *num_repr* that can be passed to let2num.'''

    return num_repr.lower().translate(None, ' \t')

def let2num(num_repr):
    '''Yield the numeric representation of *num_repr*.'''

    result = ''

    for token in (tok for tok in TOKEN_REGEX.split(num_repr) if tok):
        try:
            value = NUMBERS[token]
        except KeyError:
            if token not in ('di', 'e'):
                raise ValueError('Invalid number representation: %r' % num_repr)
            continue

        if token == 'miliardi':
            result += '0'*9
        elif token in ('mila','milioni'):
            zeros = '0' * value.count('0')
            piece = result[-3:].lstrip('0')
            result = (result[:-len(piece)-len(zeros)] +
                      piece +
                      zeros)
        elif not result:
            result = value
        else:
            length = len(value)
            non_zero_values = len(value.strip('0'))
            if token in ('cento', 'milione', 'miliardo'):
                if result[-1] != '0':
                    result = (result[:-length] +
                              result[-1] +
                              '0' * value.count('0'))
                    continue
            result = (result[:-length] +
                      value.rstrip('0') +
                      result[len(result) -length + non_zero_values:])
    return add_thousand_separator(result)

def add_thousand_separator(s, sep='.'):
    '''Return the numeric string s with the thousand separator.'''

    rev_s = s[::-1]
    tokens = [rev_s[i:i+3][::-1] for i in range(0, len(s), 3)][::-1]
    return sep.join(tokens) 
```

结果：

```
>>> let2num('unmilione')
'1.000.000'
>>> let2num('unmilionemilleduecento')
'1.001.200'
>>> let2num('unmilionemilleduecentotre')
'1.001.203'
>>> let2num('ventiquattro')
'24'
>>> let2num(normalize_text('Dieci milioni e CentoQuarantaTreMila miliardi di miliardi di miliardi Otto cento e quattro'))
'10.143.000.000.000.000.000.000.000.000.000.804'
>>> let2num('ventiquattromiliardicentotrentatremilionitredicimiladuecentouno')
'24.133.013.201' 
```

请注意，您必须正确拼写数字。在最后一个例子中，如果你输入字符串：`'...centotrentatremilione...'`，用（*错误*的）单数`milione`而不是`milioni`你得到：

```
>>> let2num('ventiquattromiliardicentotrentatremilionetredicimiladuecentouno')
'24.003.013.201' 
```

这不是“正确的”。但拼写实际上是错误的。我相信不应该太难允许`milione`作为精确的同义词`milioni`，或者添加一些错误检查，这样如果发现拼写错误就会引发错误。请注意这一点。

作为调试上述代码（如果要进行更改）的建议是添加如下行：

```
print 'token:', token, 'current result:', result 
```

作为`for`循环的第一条指令。然后观察正在做的事情，您应该能够识别代码背后的“推理”并查看错误所在。

我认为对于其他转换，很容易实现基于`pynum2word`. 如果您不懂意大利语，我可能会尝试帮助编写它。

# java - Java http post：未添加值

> ID：14070067
> 
> 赞同：0
> 
> 时间：2012-12-28T13:11:21.537
> 
> 标签：java, http-post

我尝试发送发布请求，但网络服务器返回我没有添加任何发布值。我花了很多时间试图解决这个问题，但没有结果。这是代码：

```
 public static String post(String url, String postParams)
{
    URLConnection connection = null;
    try
    {
        connection = initializeConnection(url);
        connection.setDoOutput(true);
        ((HttpURLConnection) connection).setRequestMethod("POST");
        connection.setRequestProperty("Content-Type", "text/xml");
        connection.setRequestProperty("Accept", "text/xml");
        connection.setUseCaches(false);
        connection.setDoInput(true);
        DataOutputStream wr = new DataOutputStream(connection.getOutputStream());
        wr.write(postParams.getBytes());

        wr.flush();
        wr.close();

        // Get Response
        InputStream is = connection.getInputStream();
        return inputStreamToString(is);
    }
    catch (Exception e)
    {
        e.printStackTrace();
        return null;

    }
}

protected static HttpURLConnection initializeConnection(String stringUrl)
{
    HttpURLConnection connection;
    URL url = null;
    try
    {
        url = new URL(stringUrl);
    }
    catch (MalformedURLException e1)
    {
        e1.printStackTrace();
    }
    try
    {
        connection = (HttpURLConnection) url.openConnection();
        connection.setConnectTimeout(5000);
    }
    catch (Exception e)
    {
        e.printStackTrace();
        return null;
    }

    return connection;
}

public static String inputStreamToString(InputStream is)
{
    BufferedReader r = new BufferedReader(new InputStreamReader(is));
    StringBuilder total = new StringBuilder();
    String line;
    try
    {
        while ((line = r.readLine()) != null)
        {
            total.append(line);
        }
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }
    return total.toString();
} 
```

我从网络服务器收到一条消息，告诉我没有添加任何后值。据我从代码中了解，添加了值。我被困住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:04:39.353

原来我所要做的就是更换

```
connection.setRequestProperty("Content-Type", "text/xml"); 
```

和

```
connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded"); 
```

如此简单，花费了如此多的时间来清除它......顺便说一句，我怎么知道服务器需要这个标头？我认为对请求至关重要的所有工作都将由 java 自动完成。

PS 安装提琴手帮助解决了这个问题，谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T13:47:51.667

调试“postParams”参数并检查发送的内容。

# php - preg_match、str_replace 和所有爵士乐

> ID：14070068
> 
> 赞同：0
> 
> 时间：2012-12-28T13:11:27.577
> 
> 标签：php, preg-match

我有一个字符串，其中包含方形备份中的几个关键字，我想识别、提取和替换为其他内容：

例如：

> “你将赢得[奖金]或[切片]。”

我想识别正方形内的所有术语，取这些术语并用某些值替换它们。

所以它最终应该是这样的：

> “你将赢得 100 或 95%。”

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T13:16:59.033

小菜一碟

```
$search = array('[winnings]', '[slice]');
$replace = array(100, '95%');

echo str_replace($search, $replace, 'You will win [winnings] or [slice].'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T13:17:58.810

```
$replacements = array(
    'winnings' => '100'
    , 'slice'  => '95%'
    , 'foobar' => 'Sean Bright'
);

$subject = '[foobar], You will win [winnings] or [slice]!';

$result = preg_replace_callback(
    '/\[([^\]]+)\]/',
    function ($x) use ($replacements) {
        if (array_key_exists($x[1], $replacements))
            return $replacements[$x[1]];
        return '';
    },
    $subject);

echo $result; 
```

`[[foo]`请注意，如果您有不平衡的括号（即），这将完全崩溃

对于低于 5.3 的 PHP 版本：

```
$replacements = array(
    'winnings' => '100'
    , 'slice'  => '95%'
    , 'foobar' => 'Sean Bright'
);

function do_replacement($x)
{
    global $replacements;

    if (array_key_exists($x[1], $replacements))
        return $replacements[$x[1]];
    return '';
}

$subject = '[foobar], You will win [winnings] or [slice]!';

$result = preg_replace_callback(
    '/\[([^\]]+)\]/',
    'do_replacement',
    $subject);

echo $result; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T13:21:19.240

如果您想使用正则表达式来查找匹配项：

```
$content = "You will win [winnings] or [slice].";
preg_match_all('/\[([a-z]+)\]/i', $content, $matches);

$content = str_replace($matches[0], array('100', '95%'), $content);

var_dump($content); 
```

# jpa - 删除级联失败时 JTA 不回滚

> ID：14070069
> 
> 赞同：1
> 
> 时间：2012-12-28T13:11:31.177
> 
> 标签：jpa, transactions, ejb, cascade, jta

使用：Glassfish 3.1.2、EclipseLink。

我有以下三类 JPA 模型：

```
@Entity public class Customer implements Serializable {

@Id private Integer id;

@OneToOne(cascade={CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REMOVE}, orphanRemoval=true)
private Person person; 
```

[...]

```
@Entity public class Person implements Serializable {

@Id private Integer id; 
```

[...]

```
@Entity public class Request implements Serializable {

@Id private Integer id;

@ManyToOne private Person person; 
```

我尝试使用以下策略（使用**CMT**）删除客户：

```
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="MyPU" transaction-type="JTA">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties>
        <property name="eclipselink.ddl-generation" value="create-tables"/>
        <property name="eclipselink.ddl-generation.output-mode" value="database"/>

        <property name="eclipselink.logging.level" value="FINE"/>
        <property name="eclipselink.logging.parameters" value="true"/>
        <property name="eclipselink.logging.logger" value="DefaultLogger"/>                  
        <property name="eclipselink.logging.timestamp" value="true"/>
        <property name="eclipselink.logging.session" value="false"/>
        <property name="eclipselink.logging.thread" value="false"/>
    </properties>
</persistence-unit> 
```

[...]

```
@PersistenceContext(unitName="MyPU")
private EntityManager entityManager;   

@Resource private SessionContext context; 
```

[...]

```
public void delete(Entity object) {

    try{

        object = this.getEntityManager().merge(object);
        this.getEntityManager().remove(object);

    } catch (Exception e){

        this.context.setRollbackOnly();
    }
} 
```

当**Customer**对象附加到附加到**Request的****Person**对象时，**Person**的删除级联失败导致事务回滚，但**Customer**会从数据库中**删除。**我收到以下错误：

 ******```
INFO: [EL Fine]: 2012-12-28 10:53:38.1--Connection(27132168)--DELETE FROM CUSTOMER WHERE (ID = ?)
bind => [97]
INFO: [EL Fine]: 2012-12-28 10:53:38.125--Connection(27132168)--DELETE FROM PERSON WHERE (ID = ?)
bind => [111]
INFO: [EL Fine]: 2012-12-28 10:53:38.126--SELECT 1
WARNING: DTX5014: Caught exception in beforeCompletion() callback:
Local Exception Stack:
INFO: [EL Warning]: 2012-12-28 10:53:38.127--Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: org.postgresql.util.PSQLException: ERRO: atualização ou exclusão em tabela "person" viola restrição de chave estrangeira "fk_request_person_id" em "request"
Detalhe: Chave (id)=(111) ainda é referenciada pela tabela "request".
Error Code: 0
Call: DELETE FROM PERSON WHERE (ID = ?)
bind => [111]
Query: DeleteObjectQuery(111)
[...]
SEVERE: javax.ejb.EJBException: Transaction aborted
[...] 
```

那么，当级联删除失败时，如何取消客户删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:34:48.000

这里有两件事可能会出错。

*   未正确指定事务边界

可能由于这个原因，您的应用程序服务器没有正确发出 BEGIN 语句。这可以解释 Postgres 有问题，而 Oracle 没有（它隐式启动事务）。确保您的服务方法带有正确的注释。如果一切都好，也许

*   您的数据源有问题。

它是 JTA 兼容的数据源吗？它是否使用正确的 Postgres 驱动程序？请发布您的配置，以便我们检查。

我发现了一个有趣的链接，它也可能对您有所帮助。这是关于 Postgres 保持自动提交模式（尽管在使用 Spring 时）：

[http://archives.postgresql.org/pgsql-jdbc/2007-07/msg00115.php](http://archives.postgresql.org/pgsql-jdbc/2007-07/msg00115.php)******

# android - 为什么我的 xmpp muc 消息监听器有时无法工作

> ID：14070070
> 
> 赞同：2
> 
> 时间：2012-12-28T13:11:35.843
> 
> 标签：android, xmpp, asmack

我现在正在尝试使用 asmack-android-7.jar api 在 android 中构建 XMPP MUC 房间。首先，我创建了一个即时房间，然后在房间中添加了一个 muc 监听器。代码片段如下：

```
 //create the an instant room if the same room has not been created.
    MultiUserChat muc = new MultiUserChat(mConnection, roomJid);
    muc.create(ownerNickname);
    muc.sendConfigurationForm(new Form(Form.TYPE_SUBMIT));
    // join a room  and add listener 
   mMuc = new MultiUserChat(mConnection, roomJid);
   mMuc.join(vistorNickname);
   addListenerToMuc(mMuc);
   // the listener function
   private void addListenerToMuc(MultiUserChat muc){
    if(null != muc){
        muc.addMessageListener(new PacketListener() {

            @Override
            public void processPacket(Packet packet) {
                Log.i("processPacket", "receiving message");
                }
        });
    }
} 
```

然后事情让我很困惑，首先，有时听众工作得很好，但是当我离开房间然后重新加入时，听众可能总是无法像这样处理消息：

```
 RCV  (723971008): <message id="FdkcR-24" to="寻李白@xjopenfire/KascendVideo" type="groupchat" from="哈特的战争@conference.xjopenfire/nutch"><body> from nutch</body></message> 
```

但是，当出现这样的消息时，侦听器总是能很好地工作：

```
 <message id="S7JfM-111" to="寻李白@xjopenfire/KascendVideo" type="groupchat" from="哈特的战争@conference.xjopenfire/hangzhou@video"><body>I love you</body><x xmlns="jabber:x:event"><offline/><delivered/><displayed/><composing/></x></message> 
```

似乎带有一个或多个扩展名的消息总是运行良好，而没有扩展名的消息有时往往会失败。我真的很困惑，有人可以告诉我发生了什么吗？我会非常感谢你的想法。

我发现的另一个问题是，如果我先创建一个 Instant 房间，然后加入房间而不创建 MulitUserChat 的新对象，那么该房间不能被其他人加入，例如使用 spark 客户端，然后出现错误，说房间不存在，具体来说，代码片段是这样的：

```
MultiUserChat mMuc = new MultiUserChat(mConnection, roomJid);
        muc.create(ownerNickname);
        muc.sendConfigurationForm(new Form(Form.TYPE_SUBMIT));
        // join a room  and add listener 
       mMuc.join(vistorNickname); 
```

我真的对这些事情感到沮丧，欢迎所有想法。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:16:28.563

我对第二个问题有一个简单的解决方案，您不必也不应在创建房间后立即加入。因为它们在某种程度上确实意味着相同的东西，而且我上面描述的现象与 smack 库的 create() 和 join() 函数的实现有关。

# php - 从cakephp中的Url中删除动作名称？

> ID：14070079
> 
> 赞同：-2
> 
> 时间：2012-12-28T13:12:10.827
> 
> 标签：php, .htaccess, cakephp

> **可能重复：**
> [如何从 cakephp 的 url 中删除操作名称？](https://stackoverflow.com/questions/14069601/how-to-remove-action-name-from-url-in-cakephp)

我正在使用 cakephp 在 Cakephp 中开发我的网站，我想从应用程序 URL 中删除操作（或视图）名称我应该怎么做。我的要求是我想添加参数来代替视图名称最近我的 URL 是这样的：

> “域名/控制器名/视图名/param1/param2”

但是我需要

> “域名/控制器名/param1/param2”

我的 .htaccess 文件如下所示

.htaccess 在根文件夹中

```
<IfModule mod_rewrite.c>
   RewriteEngine on 
   RewriteRule    ^$     [L]
   RewriteRule    (.*) app/webroot/index.php/$1 [L]
</IfModule> 
```

.htaccess 在应用程序文件夹中

```
 <IfModule mod_rewrite.c>
  RewriteEngine on
  RewriteBase /liberty_new/app/
  RewriteRule    ^$    webroot/index.php/    [L]
  RewriteRule    (.*) webroot/index.php/$1    [L]
 </IfModule> 
```

.htaccess 在 webroot 文件夹中

```
<IfModule mod_rewrite.c>
 RewriteEngine ON
 RewriteBase /
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteRule ^(.*)$ /$1 [QSA,L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:19:48.397

您在`Config\routes.php`文件中执行此操作。根据需要设置`Router`参数以编写 URL。不要编辑您的 htaccess 文件，否则它可能/将会破坏 CakePHP 路由。

```
Router::connect('/:controller/:param1/:param2', array('action' => 'index'), array('param1' => '[a-zA-Z0-9]+', 'param2' => '[a-zA-Z0-9]+')); 
```

这应该将所有对任何控制器的请求发送到该控制器的索引函数并传递参数 1 和 2。当然，这可以进行大量定制。我强烈建议您阅读文档中有关路由的信息，除非必须，否则不要更改 htaccess。

[http://book.cakephp.org/2.0/en/development/routing.html#routes-configuration](http://book.cakephp.org/2.0/en/development/routing.html#routes-configuration)

# c# - 类型安全地将类名传递给方法

> ID：14070085
> 
> 赞同：5
> 
> 时间：2012-12-28T13:13:00.203
> 
> 标签：c#, class, type-safety

我需要方法中的类名，例如 X。同时，我不想失去类型安全性，也不会允许其他开发人员将字符串（类名）传递给方法。

像这样的东西：

```
void X( ??? class) // --> don't know how
{
 var className = get the name of class // --> which I don't know how
 Console.WriteLine(className);
}

X(tblEmployee); //--> usage of X, where tblEmployee is a POCO class 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-28T13:13:47.957

您正在寻找的是一个名为 a [`Type`](http://msdn.microsoft.com/en-us/library/system.type.aspx)，其中包含有关类的元数据。

您可以在任何实例上使用[`typeof(class)`](http://msdn.microsoft.com/en-us/library/58918ffs%28v=vs.71%29.aspx)or方法。[`.GetType()`](http://msdn.microsoft.com/en-us/library/system.object.gettype.aspx)`object`

不同的是`typeof`静态`GetType`解析并在运行时解析。

```
void X(Type type)
{
    Console.WriteLine(type.FullName);
}

X(typeof(tblEmployee)); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-28T13:16:50.550

您可以使用泛型和 的[`FullName`属性`Type`](http://msdn.microsoft.com/en-us/library/system.type.fullname.aspx)，例如：

```
void WriteClassName<TClass>(TClass item)
  where TClass : class {
    Console.WriteLine(item.GetType().FullName);
} 
```

然后`TClass`根据您的要求应用约束。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T13:23:35.547

```
void X(Type type)
{
    if(type == typeof(DesiredType))
    {
          Do Some Action
    }
} 
```

# html - 如何在不使用 javascript 的情况下将 span 设置为看起来像链接？

> ID：14070086
> 
> 赞同：59
> 
> 时间：2012-12-28T13:13:00.800
> 
> 标签：html, css

对于我的网站，我将需要使用`<span>`而不是`<a>`，因为我主要使用 ajax，因此我将 onclick ajax 事件作为我的跨度中的属性而不是链接。

结果，我不得不手动设置跨度的样式，使其看起来像链接。我已经使用悬停并访问了伪类来更改背景和文本颜色，但是要将鼠标默认更改为悬停时的指针，我需要使用 javascript 吗？或者我可以使用 css 做到这一点吗？

另外，我刚刚意识到：无论如何，我不能只使用`<a>`标签而不是`<span>`，而只是代替 href，我会包含一个 onclick？它应该工作一样，不是吗？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-12-28T13:16:27.783

```
span {
     cursor:pointer;
     color:blue;
     text-decoration:underline;
}
```

```
<a href="#">Hyperlink</a><br />
<span>Span</span>
```

此外，您可以`:hover`在悬停时使用伪类来设置元素的样式（您可以使用任何样式，而不仅仅是最初使用的样式）。例如：

```
span:hover {
     text-decoration:none;
     text-shadow: 1px 1px 1px #555;
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-28T14:06:09.157

请注意，如果您的网站是公开的，并且您指望搜索引擎来抓取您的网站，那么您会因为漏掉链接而损失很多，`href`因为蜘蛛在抓取您的页面时没有任何东西可以抓取。

您应该使用完整的链接 - 如果您的 javascript 发生故障，用户仍然能够浏览页面：

```
<a href="http://www.example.com">Link</a> 
```

比您可以使用[preventDefault()](http://api.jquery.com/event.preventDefault/)禁用与 jquery 的链接- 而且您完全分离了基本 html 和 javascript 部分，这意味着您的网站在没有 javascript 的情况下仍然可用。

比你不需要打扰跨度悬停和任何东西 - 但只是为了它

```
span:hover {
cursor:pointer;
} 
```

将在悬停的跨度上启用悬停手形光标。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-28T13:15:57.913

只需添加`cursor:pointer;`您的`span`CSS。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-12-28T13:19:47.373

# 选项1

只需使用`anchor`如下链接：

```
<a href="#" onclick="someFunction();"> Link </a> 
```

# 选项2

我不知道您为什么要使用 span ，但如果您这样做，您可以使用以下样式使其看起来类似于锚链接。

```
span {
    color: #000000; /* Change this with links color*/
    cursor: pointer;
    text-decoration: underline;
}

span:hover {
    color: #444444; /* Change the value to with anchors hover color*/
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-28T13:16:10.070

使用 CSS 将光标显示为指针：

```
<span style="cursor: pointer;">Pseudolink</span> 
```

[http://jsfiddle.net/kkepg/](http://jsfiddle.net/kkepg/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-28T13:16:25.307

你可以使用锚。但是在javascript中你必须使用`event.preventDefault()`但是有一个更小更容易的CSS方法。保持你的跨度并使用它：

```
span:hover{
    cursor:pointer;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-28T13:19:33.797

`cursor: pointer`您可以通过指定CSS 规则将光标更改为指针。

您也可以使用`<a>`标签代替`<span>`，事实上它们在屏幕阅读器和其他类似设备上表现得更好。如果您在处理程序中使用和JavaScript 函数，则无需省略该`href`属性。通过这种方式，您可以保留与非 JS 启用浏览器的某种程度的向后兼容性。`preventDefault()``stopPropagation()``onClick`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-29T13:36:12.790

您可以使用按钮而不是 span 并使用引导 css 类将其设置为像链接一样的样式：

`<button class="btn btn-link">Link</button>`

它会像普通链接一样对 mouseOver 做出反应。运行代码片段以预览结果：

```
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

<button class="btn btn-link">this is my link styled with bootstrap</button>
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-12-28T14:29:02.660

您可以使用 onClick 事件，但如果我没记错的话，您必须返回 false 以防止页面跳转；就像是：

```
<a href="#" onClick="myfunction();return false;"> 
```

或者：`<a href="#" onClick="return myfunction();">`只要`myfunction`返回 false。

您也可以直接从 href 调用 javascript，但您必须将结果强制转换为 void 以阻止浏览器尝试将结果作为有效链接：

```
<a href="javascript:void(myFunction())"> 
```

即使您仍然想使用 onClick 属性；替换它仍然是一个好主意`href="#"`主意`href="javascript:void(0)" ...>`。

其他人提到使用`event.preventDefault()`and `stopPropagation()`。我不记得曾经使用过其中之一，但我必须承认，自从我上次在 HTML 链接中编写一些 javascript 代码以来已经有很多年了；所以你绝对应该研究这两个功能的使用。

编辑：也许`href="javascript:void(0)"`有时使用 a 可能是个坏主意；见[http://drupal.org/node/1193068](http://drupal.org/node/1193068)。

# php - 阻止用户提交表单

> ID：14070099
> 
> 赞同：2
> 
> 时间：2012-12-28T13:14:24.210
> 
> 标签：php, jquery, html, forms, wordpress

我有我的网站，其中有**电子邮件 pdf**功能

**程序是：**

*   当用户输入电子邮件，然后他必须点击提交按钮
*   点击提交按钮后，表单不会提交，表单会隐藏
*   还有另一个隐藏的 div 包含**感谢消息**，该消息显示为**Ok 按钮**。
*   当用户单击**确定按钮**时，表单将提交。

***但现在问题是：***

当用户输入电子邮件时，如果他不小心按了**ENTER** ，那么表单会被提交而不会显示感谢信息。

当用户按**Enter**键时，我想禁用**ENTER**。

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T13:17:29.790

如果回车键返回假，请检查按下了哪个键。使用 jQuery 这很容易。

```
var field = $('.classname');

field.keydown(function(e){
    if(e.which==13){
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T13:19:07.760

你可以试试这个来禁用按键提交

```
$(function() {

    $("form").on("keypress", function(e) {
            if (e.keyCode == 13) return false;
      });

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T13:22:56.503

使用此代码，肯定会为您工作：

```
var class = $('.classname');
function stopRKey(evt) {
var evt = (evt) ? evt : ((event) ? event : null);
var node = (evt.target) ? evt.target : ((evt.srcElement) ? evt.srcElement : null);
if ((evt.keyCode == 13) && (node.type=="text")) {return false;}
}

class.onkeypress = stopRKey; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T13:18:03.793

使用常规的 html 按钮而不是提交按钮。在按钮的 onclick 事件中编写一些 Javascript 来显示/隐藏 DIV。谢谢 DIV 上的按钮使它成为一个提交按钮。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T13:18:49.813

将其放在脚本中：

```
<script language="JavaScript">
function TriggeredKey(e)
{
    var keycode;
    if (window.event) keycode = window.event.keyCode;
    if (window.event.keyCode == 13 ) return false;
}
</script> 
```**

# .htaccess - htaccess 和 cakephp - 在这种情况下正确的路径/到/应用程序是什么

> ID：14070101
> 
> 赞同：0
> 
> 时间：2012-12-28T13:14:32.997
> 
> 标签：.htaccess, cakephp

我正在尝试在 1&1 帐户上安装 cakephp，但遇到了问题。

我相信我需要添加

```
RewriteBase /path/to/cake/app 
```

到 htaccess 文件，但我不知道路径应该是什么。

我已将 cakephp 文件放在一个名为 scissors 的文件夹中，该文件夹位于我可以使用 filezilla 浏览的最底层文件夹中。考虑到这一点，我尝试了

```
RewriteBase /scissors/app 
```

但这没有用。应该是什么？

**编辑**：

我已经设法让网站工作（有点），但不幸的是，css 似乎没有被加载。我拥有的三个正在工作但没有拉出css的htaccess是：

在/剪刀

```
<IfModule mod_rewrite.c>
       RewriteEngine on
       RewriteBase /app
       RewriteRule    ^$ app/webroot/    [L]
       RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

在剪刀/应用程序中

```
<IfModule mod_rewrite.c>
        RewriteEngine on
        RewriteBase /app/
        RewriteRule    ^$    webroot/    [L]
        RewriteRule    (.*) webroot/$1    [L]
</IfModule> 
```

在剪刀/应用程序/webroot

```
<IfModule mod_rewrite.c>
        RewriteEngine On
        RewriteBase /app/
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

有谁知道为什么这不能正确加载css？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:49:56.873

答案是 cake 2.0，我假设您已经在 public_html 中解压缩了下载的存档，所以 cake 的路径看起来像

```
/home/your_login/public_html/scissors/files_and_folders_unzipped_here 
```

要不就

```
/public_html/scissors/files_and_folders_unzipped_here 
```

作为

```
/home/your_login 
```

可能不可见。

在“剪刀”文件夹（应用程序、库、插件、供应商等文件夹所在的位置）内放置 .htaccess

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

在“应用程序”文件夹内

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule    ^$   webroot/    [L]
    RewriteRule    (.*) webroot/$1    [L]
</IfModule> 
```

在“webroot”文件夹中

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]
</IfModule> 
```

还有另一种安装 cake 的方法（允许在一个“核心配置”上拥有多个站点），但解压缩公用文件夹中的所有内容是最简单的方法。

# javascript - 通过 html 中的 URL 预填写表单字段

> ID：14070105
> 
> 赞同：17
> 
> 时间：2012-12-28T13:14:45.740
> 
> 标签：javascript, html

当用户单击其他页面中给出的链接时，我正在寻找一种简单的方法来预先填写我的联系表单中的字段。

这是我在 html 中的联系表格：

```
<form method="post" action="submit.php" >
    <p>Your name:
    <br /><input name="name" /></p>
    <p>Your email:
    <br /><input name="email" /></p>
    <p>Your message:
    <br /><textarea name="message" id="message" rows="10" cols="50"></textarea></p>
    <p><input type="submit" value="Send" /></p>
</form> 
```

当用户点击类似的网址时，我想用“一些文本”填充“消息”字段`www.xyz.com/contact.html?setmessagefield=some_text`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-28T13:23:49.080

JavaScript 没有内置函数来解析这样的 url 参数（因为这些 GET 参数通常用于向服务器发送数据）。
我建议改用哈希（哈希纯粹是客户端）：

> www.xyz.com/contact.html#name=some_text&email=more%20text

现在，`id`在您的字段中添加一些 's：

```
<p>Your name:
<br /><input name="name" id="name" /></p>

<p>Your email:
<br /><input name="email" id="email" /></p> 
```

然后在加载时设置这样的值：

```
var hashParams = window.location.hash.substr(1).split('&'); // substr(1) to remove the `#`
for(var i = 0; i < hashParams.length; i++){
    var p = hashParams[i].split('=');
    document.getElementById(p[0]).value = decodeURIComponent(p[1]);;
} 
```

**[工作示例](http://fiddle.jshell.net/MEwX6/)**

这样做的最大优点是它很灵活。如果要设置 2 个字段的值，请`id`在哈希中提供这 2 个字段：

> www.xyz.com/contact.html#name=some_text&email=more%20text

4个领域？4个身份证：

> www.xyz.com/contact.html#name=some_text&email=more%20text&username=john&age=23

那么就不需要编辑代码了。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-05-15T12:52:07.993

更现代的方法是使用[`URL()`构造函数](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL)和[searchParams 属性](https://developer.mozilla.org/en-US/docs/Web/API/URL/searchParams)。让浏览器引擎完成工作！

```
(new URL(window.location.href)).searchParams.forEach((x, y) =>
    document.getElementById(y).value = x) 
```

[在线尝试！](https://jsbin.com/fufutexegi/1/edit?html,js,output)或堆栈溢出：

```
const hash = '?name=some_text&email=more%20text';
const example = "http://example.com/" + hash;

(new URL(example)).searchParams.forEach((x, y) =>
    document.getElementById(y).value = x);
```

```
<p>Your name:
<br /><input name="name" id="name" /></p>

<p>Your email:
<br /><input name="email" id="email" /></p>
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-09-09T11:39:10.390

如果您使用的是 PHP，请不要使用 JavaScript。

只需在 HTML 中添加一些内容：

```
<form method="post" action="submit.php" >
  <p>Your name:<br />
  <input name="name" value="<?php echo htmlspecialchars($_GET['name']) ?>" /></p>

  <p>Your email:<br />
  <input name="email" value="<?php echo htmlspecialchars($_GET['email']) ?>"/></p>

  <p>Your message:<br />
  <textarea name="message" id="message" rows="10" cols="50">
    <?php echo htmlspecialchars($_GET['message']) ?>
  </textarea></p>

  <p><input type="submit" value="Send" /></p>
</form> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T13:33:38.117

您可以使用检索当前网址，`window.location.href`然后通过正则表达式获取默认消息：

```
var msg = window.location.href.match(/\?setmessagefield=(.*)/);
document.getElementById("message").value = msg[1]; 
```

# iphone - 一个 NSString 中的多个字符串

> ID：14070106
> 
> 赞同：0
> 
> 时间：2012-12-28T13:14:50.970
> 
> 标签：iphone, ios, ipad

每次将字符串替换为新字符串时，我都会从`HTMl`一个字符串到一个字符串。`NSString`我试过`NSArray`它说`NSString`对阵列很强大。我希望将所有字符串`NSString`一一存储。我怎样才能做到这一点 ？

```
TFHpple *tutorialsParser = [TFHpple hppleWithHTMLData:nsData];
            NSString *tutorialsXpathQueryString = @"//div[@id='NewsPageArticle']/p/span ";
            // NSString *tutorialsXpathQueryString = @"//div[@class='entry']/ul/li/a";
            NSArray *tutorialsNodes = [tutorialsParser searchWithXPathQuery:tutorialsXpathQueryString];

            // 4
            NSMutableArray *newTutorials = [[NSMutableArray alloc] initWithCapacity:0];
            for (TFHppleElement *element in tutorialsNodes) {
                // 5
                Tutorial *tutorial = [[Tutorial alloc] init];
                [newTutorials addObject:tutorial];

                // 6
                tutorial.title = [[element firstChild] content]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T13:19:22.100

您应该`NSMutableString`用于附加字符串

```
NSMutableString aString = [[NSMutableString alloc]initWithString:yourHTMLString];
[aString appendString:parsedHTMLString]; 
```

# php - 如何编写查询以比较具有逗号分隔值的列？

> ID：14070110
> 
> 赞同：2
> 
> 时间：2012-12-28T13:15:07.833
> 
> 标签：php, mysql, sql, joomla2.5

我正在使用 Joomla 2.5。我正在使用 MYSQL 数据库。我有一个`job_field`包含以下列的表格：

```
cat_id  |  location_id
-----------------------
 1,4    |   66,70 
```

我需要将它与另一个表进行比较`job_value`

```
cat_id  |  location_id | name
--------------------------------
 1      |   70         | Atul
 4      |   70,80      | Amit
 4      |   80,66      | Amol
 1      |   66         | Pritam    
 3      |   70         | Rahul
 2      |   66,90      | Ajit
 1      |   74         | Raju
 4      |   65,22      | Manoj 
```

我希望输出将第一个表中`cat_id`的列与第二个表列和.`location_id``job_details``job_value``cat_id``location_id`

它将检查第一个表 ( `job_details`) 中的每个值，即`location_id`列值 (66, 70) 与第二个表 ( `job_value`)`location_id`列分开。我将得到输出数组

```
 Array (
    1 70     Atul
    4 70,80  Amit
    4 80,66  Amol
    1 66     Pritam
 ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T13:33:56.113

这是一个**[坏坏]坏^的**结构。即使问题可以解决，也不应该解决。它会很慢，而且无法维护。

而不是糟糕的结构，应该为这部分数据库创建一些类似的东西：

```
CREATE TABLE PERSON (
    person_id BIGINT,
    name VARCHAR(64),
    PRIMARY KEY (person_id)
);

CREATE TABLE LOCATION (
    location_id BIGINT,
    name VARCHAR(64),
    PRIMARY KEY (location_id)
);
CREATE TABLE CAT (
    cat_id BIGINT,
    name VARCHAR(64),
    PRIMARY KEY (cat_id)
);

CREATE TABLE CAT_LOCATION (
    cat_id BIGINT,
    location_id BIGINT,
    PRIMARY KEY (cat_id,location_id),
    FOREIGN KEY (cat_id) REFERENCES cat(cat_id),
    FOREIGN KEY (location_id) REFERENCES location(location_id)
);

CREATE TABLE CAT_LOCATION_PERSON (
    cat_id BIGINT,
    location_id BIGINT,
    person_id BIGINT,
    PRIMARY KEY (cat_id,location_id,person_id),
    FOREIGN KEY (cat_id) REFERENCES cat(cat_id),
    FOREIGN KEY (location_id) REFERENCES location(location_id),
    FOREIGN KEY (person_id) REFERENCES person(person_id)
); 
```

然后通过简单的连接得到你想要的东西比容易的容易：

```
SELECT cl.cat_id, cl.location_id, p.name
FROM CAT_LOCATION cl 
JOIN CAT_LOCATION_PERSON clp on cl.cat_id = clp.cat_id and cl.location_id=clp.location_id
JOIN PERSON p on clp.person_id = p.person_id 
```

（我*拒绝*编写一个以指定格式提供输出的查询，数值用逗号分隔......（尽管可以通过 MySQL 的 GROUP_CONCAT 功能轻松实现））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T13:32:04.667

试试这个 ：：

```
SELECT 
* 
FROM table1
JOIN table2  ON FIND_IN_SET(table1.location_id, table2.location_id) > 0 
```

您还可以 [在 MySQL "IN" 子句中引用逗号分隔值](https://stackoverflow.com/questions/10480568/comma-separated-values-in-mysql-in-clause)

# c# - 自动化可编辑的 PDF

> ID：14070112
> 
> 赞同：1
> 
> 时间：2012-12-28T13:15:13.290
> 
> 标签：c#, wpf, pdf, pdf-generation

我正在开发一个应用程序，该应用程序需要我创建一个文档，填充在我的 WPF 应用程序中捕获的数据，用于附加到电子邮件并发送给保险公司。

我的客户一直在通过向客户发送可编辑的 PDF 文档来执行此操作，然后在收到完整的表格后进行校对并手动附加到电子邮件中。

我最初想创建一个 word 文档，其格式与现有的和自动化的 word 格式相同，在诸如 etc 等占位符上使用查找/替换...

但是，如果我可以填充现有的 PDF 文档，那就太好了，不是吗....如果可能的话，有人知道吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T13:31:03.073

您可以使用 PDFsharp/MigraDoc 来编辑 pdf 文件。解析现有文档并插入文本/图像很简单，但我不知道是否支持实际占位符。

编辑：找到这种方法，使用 iTextSharp 和表单字段：[使用 itextsharp（或任何 c# pdf 库），如何打开 PDF，替换一些文本，然后再次保存？](https://stackoverflow.com/questions/4221366/using-itextsharp-or-any-c-sharp-pdf-library-how-to-open-a-pdf-replace-some-t)

# xml-parsing - 在ios中解析xml并将解析的数据放入数组中

> ID：14070116
> 
> 赞同：0
> 
> 时间：2012-12-28T13:15:41.420
> 
> 标签：xml-parsing

我正在尝试解析 xcode 中的 xml 文件并将数据存储在不同的数组中以获取不同的键。我的 xml 文件如下所示：

```
<Colleges>
  <College>
    <id>1</id>
    <Name>abc</Name>
    <Branches>
      <Branch>a</Branch>
      <Branch>b</Branch>
    </Branches>
  </College>
..... And many colleges....
</Colleges> 
```

谁能给我示例代码来解析这个文件并放入单独的数组中。我了解委托方法，但未能实现它们。我想我缺少一些介于两者之间的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T13:20:00.920

试试这个：[简单的 XML 到 NSDictionary 转换器](http://troybrant.net/blog/2010/09/simple-xml-to-nsdictionary-converter/)。这两个文件将帮助您转换您的 XML 数据`NSDictionary`，您可以轻松地从中获取您的数组。

# html - 嵌入代码循环不起作用

> ID：14070121
> 
> 赞同：0
> 
> 时间：2012-12-28T13:16:03.617
> 
> 标签：html, loops, embed

```
<embed 
    id="audio_1" 
    src="website.com/music.mp3"  
    loop=TRUE 
    autoplay="true" 
    PLAYCOUNT="3"> 
```

此`embed`代码循环不起作用。我尝试使用`loop`，`playcount`但没有一个属性对我有用，`autoplay`但工作正常。这在 Chrome 或 Firefox 中不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-11-17T03:36:17.450

我刚刚发现：你需要有 playlist="" 才能使用循环

```
src="https://www.youtube.com/embed/peSfCy7HFrM?playlist=peSfCy7HFrM&loop=1;rel=0&amp;autoplay=1&amp;controls=0&amp;showinfo=0" frameborder="0" allowfullscreen> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T13:24:58.640

请`autostart = true`也为它设置。
`Loop`仅Netscape支持。您也可以尝试`LOOP = 3`运行3次。

谢谢

# java - 为什么某些 xhdpi 手机仅显示位于 /res/drawable 中的图像？

> ID：14070124
> 
> 赞同：9
> 
> 时间：2012-12-28T13:16:23.370
> 
> 标签：java, android, android-layout, htc-android

这是一个场景。有文件夹：

*   可绘制的
*   可绘制的 ldpi
*   可绘制的 mdpi
*   可绘制的 hdpi
*   drawble-xhdpi

图像（通常是背景，但不仅限于此类图像）仅位于其中`/res/drawable`。

我在 Galaxy S3 上测试了该应用程序，并且背景显示正确。我在 HTC One X 上测试，但没有显示背景图像。

如果我将图像从 复制`/res/drawable`到`/res/drawable-xhdpi`，One X 将显示图像。

从逻辑上思考，这**不应该发生**，对吧？！如果 中没有图像`drawable-xhdpi`，那么 Android 应该查看其他文件夹，直到它到达默认文件夹，然后`/res/drawable`从那里拉取它。

为什么在某些手机上没有发生这种情况？

PS。我注意到一些平板电脑也存在同样的问题，但我现在不记得是哪些了。

聚苯乙烯。我在这里提到了背景图片，但问题不限于此。其他图像也会发生这种情况。我知道 xhdpi 手机存在大图像问题，我不希望您认为问题在于背景图像太大。其他“正常”大小的图像也会发生这种情况。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-29T11:55:51.577

为什么要将图像文件放入可绘制文件夹中？

根据我在互联网上阅读的提示，您不应该将图像文件放在可绘制文件夹中。

在可绘制文件夹中，您只放置了 xml 类型的可绘制对象。

如果要放置图像文件，请将其放在以下任何文件夹中（或为它们添加额外的限定符，或使用其他限定符）：

*   drawable-nodpi（仅适用于您不知道其大小的图像）
*   可绘制的 ldpi
*   可绘制的 mdpi
*   可绘制的 hdpi
*   可绘制的 xhdpi
*   可绘制的 tvdpi

放入可绘制文件夹的图像被视为默认值，即 mdpi 。因此，如果您想将文件保持在相同的屏幕密度类别中，请将其放入 drawable-mdpi 文件夹中。

不将图像放入drawable文件夹的另一个原因是android会自动将文件转换为某些设备（如三星galaxy s）的16位图像，这会使图像在某些情况下看起来很糟糕。

这是一个解释[此问题](http://android.nakatome.net/)的链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T08:26:34.387

我制作了一个仅在“res/drawable”文件夹中的可绘制项目，在我的 One X 上对其进行了测试，并确认显示了图像：
[https ://github.com/lnanek/Misc/tree/master/TestOneXDrawableFolder](https://github.com/lnanek/Misc/tree/master/TestOneXDrawableFolder)

布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"  
    xmlns:tools="http://schemas.android.com/tools"  
    android:layout_width="match_parent"  
    android:layout_height="match_parent"  
    tools:context=".MainActivity">
    <ImageView  
        android:src="@drawable/drawableonly"  
        android:layout_width="wrap_content"  
        android:layout_height="wrap_content"  
        android:layout_centerHorizontal="true"  
        android:layout_centerVertical="true"  
        />
</RelativeLayout> 
```

资源：

```
res  
res/drawable  
res/drawable/drawableonly.png  
res/drawable-hdpi  
res/drawable-hdpi/ic_launcher.png  
res/drawable-ldpi  
res/drawable-mdpi  
res/drawable-mdpi/ic_launcher.png  
res/drawable-xhdpi  
res/drawable-xhdpi/ic_launcher.png  
res/layout  
res/layout/activity_main.xml  
res/menu  
res/menu/activity_main.xml  
res/values  
res/values/strings.xml  
res/values/styles.xml  
res/values-v11  
res/values-v11/styles.xml  
res/values-v14  
res/values-v14/styles.xml 
```

您可以尝试找出可能会触发其他行为的不同之处。请记住，有一个“drawable”文件夹和一个“ `drawable-mdpi`”文件夹有点奇怪，因为 drawable 文件夹`mdpi`默认是密度。这两个中的哪一个会被使用可能不是确定性的。我知道使用密度说明符确实会在现代构建工具中自动附加一个 -v4 来解决 Android 1.5 不理解这些说明符并正确处理它们的问题，因此`drawable-mdpi-v4`与可绘制相比，可能被认为具有更多说明符并优先匹配。`mdpi`无论如何，这两个文件夹都有一个密度类，所以请记住，如果从那里使用，来自任一文件夹的可绘制对象将自动放大。

# jquery - 在 ajax 加载的页面部分上对 Video.js 播放器进行多次初始化

> ID：14070127
> 
> 赞同：1
> 
> 时间：2012-12-28T13:16:26.833
> 
> 标签：jquery, ajax, dynamic, load, video.js

几个月前，[Jean-François](https://stackoverflow.com/questions/11035946/initialize-a-video-js-player-on-a-ajax-loaded-part-of-the-page)提出了一个类似的问题，但我的问题更加棘手。

我必须在名为“ajax Content”的节点中加载不同的内容。
第一次初始化播放器并且视频显示了它自己的控制栏皮肤。

但是，如果第二次加载另一部电影或相同的电影，则 Video.js 脚本不会初始化并运行。如果我用“remove()”或“empty()”清除节点，也会发生这种情况。

这是外部 html 文件的一部分：

```
<div id="video">
<video id="html5_video" class="video-js vjs-ms-skin" autoplay controls preload>
    <source src="fileadmin/themen/de/iagos.mp4" type='video/mp4' />
</video>
<div class="ajaxLoadClose"></div> 
```

这是 jQuery 脚本

```
$(".ajax-content").load(pfad+"#video",function(responce,status,xhr){
if (status=="success")
{

    _V_("html5_video");
    $(".ajax-content").css("display","block");
    $(".ajaxLoadClose").click(function() {
        var vidBig = $(this).parent().find("video").get(0);
        vidBig.pause();
        $(".ajax-content").fadeOut('slow', function() {
            $('.ajax-content').children().remove();
        });/**/
    });
} 
```

});

有没有什么类型的重置？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T18:06:00.650

如果您为每个视频创建一个新播放器而不转到新页面，它将开始构建播放器实例，因为对播放器的引用`_V_.players`按其 ID 存储在对象中。如果您调用`player.destroy()`它将删除播放器引用。只需确保您没有其他任何引用玩家的东西。您还需要从页面中删除播放器 .video-js div。在以后的版本中， player.destroy() 函数也会这样做。

有关详细讨论，请参阅[此内容。](http://help.videojs.com/discussions/questions/415-init-video-on-ajax-load):)

# javascript - 验证失败时停止触发 asp.net btnsave.click 事件

> ID：14070137
> 
> 赞同：1
> 
> 时间：2012-12-28T13:17:02.423
> 
> 标签：javascript, asp.net, validation

我有这个 java 脚本验证功能，当客户端单击 btnsave 时触发，如果文本框的文本为空，然后显示一个消息框并且焦点在文本框上，但我似乎无法阻止页面回发时验证失败我错过了什么。这是我的代码

```
function validate() 
  {
      var itemscanned;
      itemscanned = document.getElementById('txtItemCode');
      if (itemscanned.value == '') 
      {
          alert("Plz Enter Item Code");
          return false;
         itemscanned.focus
      }
      else 
      {
          alert(itemscanned.value);
      }
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T13:25:43.327

像这样在函数名之前写return

```
 <asp:Button ID="btnSave" runat="server" Text="Save" CssClass="buttons"  OnClientClick="return validate()"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T13:25:53.617

如果这是一个 ASP.NET WebForms 应用程序，您真的应该考虑[使用 Validator 控件](http://msdn.microsoft.com/en-us/library/debza5t0%28v=vs.100%29.aspx)。他们处理您要求的所有客户端逻辑。

如果您使用的是 MVC，还有一种方法可以[在客户端进行模型验证](http://visualstudiomagazine.com/articles/2012/04/09/adding-client-side-validation-in-asp.net-mvc-3.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T13:26:09.047

如果它的 asp.net 按钮控件添加这个

```
OnClientClick = "return validate();" 
```

如果是 html 按钮添加这个

```
onclick = "return validate();" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T13:30:19.013

Ît 属于您处理事件的方式。请显示 asp 标记和 javascript 事件的绑定。

您可以尝试使用 javascript 停止事件传播：

```
event.stopPropagation(); 
```

在这里阅读：[https ://developer.mozilla.org/en-US/docs/DOM/event.stopPropagation](https://developer.mozilla.org/en-US/docs/DOM/event.stopPropagation)

注意：您必须将事件作为 validate 函数的参数：

```
function validate(event) {

    var itemscanned;    
    itemscanned = document.getElementById('txtItemCode');
    if (itemscanned.value == '') {
        alert("Plz Enter Item Code");
        event.stopPropagation();
        itemscanned.focus
        return false;
    }
    else
    {
        alert(itemscanned.value);
    }
}​ 
```

希望这可以帮助。如何将验证功能绑定到按钮非常重要，因为 asp.net 会自行生成大量 javascript（google for asp.net 客户端验证）。

# visual-studio-2012 - 安装包：无法安装包 WPtoolkit 错误

> ID：14070138
> 
> 赞同：6
> 
> 时间：2012-12-28T13:17:11.260
> 
> 标签：visual-studio-2012, nuget, windows-phone-8

> **可能重复：**
> [将 NuGet ndef 库添加到 windows phone 8 项目](https://stackoverflow.com/questions/13342630/adding-nuget-ndef-library-to-windows-phone-8-project)

尝试安装 WPtoolkit 时出现以下错误...

```
PM> Install-Package WPtoolkit
Successfully installed 'WPtoolkit 4.2012.10.30'.
Successfully uninstalled 'WPtoolkit 4.2012.10.30'.
Install failed. Rolling back...
Install-Package : Could not install package 'WPtoolkit 4.2012.10.30'. You are trying to install this package into a project that targets 'WindowsPhone,Version=v8.0', but the packag
e does not contain any assembly references that are compatible with that framework. For more information, contact the package author.
At line:1 char:1 
```

有什么我想念的吗？NuGet 也已更新到最新版本...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-28T19:30:25.967

啊哈！

在常见问题解答部分...

Q - 我有 WP8 SDK 并且我安装了 NuGet 包，它仍在安装 7.1 版本的工具包程序集，或者我收到错误消息 - “您正在尝试将此包安装到针对 'WindowsPhone,Version=v8 的项目中.0'，但包不包含任何与该框架兼容的程序集引用。”</p>

```
A – You have an older version of NuGet. 
Install the latest NuGet from www.NuGet.org . Close and restart all the 
instances of Visual Studio. 
Now install the package. It will install correctly. 
WP8 projects are supported from Nuget 2.1 onwards. 
```

之后转到 xaml 页面类型

# ios - 以png图像为背景的iOS5按钮透明度

> ID：14070155
> 
> 赞同：2
> 
> 时间：2012-12-28T13:18:49.467
> 
> 标签：ios, uibutton

我为我的应用程序自定义的一个按钮遇到了一些问题，我需要一些帮助。当我使用**iOS 6**测试按钮时，按钮透明度没有问题，并且 png 图像看起来像这样

![在此处输入图像描述](../Images/9a214fd34cca74a402c9c1901543f906.png)

**但是当我使用iOS 5**测试我的应用程序时，按钮不透明：

![在此处输入图像描述](../Images/c182b822335535730fa137de5331e29b.png)

我对按钮进行了以下设置：

![在此处输入图像描述](../Images/3062a8ea5a8da3311f4cde06950d0053.png)

提前感谢您提供有关如何解决此问题的任何建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T13:35:36.910

您是否在 UIButton Type 属性中将 Button Type 保留为 UIButtonTypeCustom

# mysql - MySQL选项卡完成不起作用

> ID：14070156
> 
> 赞同：6
> 
> 时间：2012-12-28T13:18:49.417
> 
> 标签：mysql

在 mysql 客户端中，当我按 Tab 时，它曾经显示可能的单词。不知何故，它现在不起作用。无论如何要再次启用它。我在 CentOS 5.5 中使用 mysql 客户端 5.5。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-28T13:27:28.077

找到了解决方案。

在 my.cnf 文件中，添加

```
[mysql]
auto-rehash 
```

添加`no-auto-rehash`以禁用自动完成。

# mysql - 数据库关系表

> ID：14070170
> 
> 赞同：1
> 
> 时间：2012-12-28T13:19:46.017
> 
> 标签：mysql, database

好吧，我正在从事一个在线游戏项目，每个玩家都将拥有一所房子，该项目进展顺利，直到你不得不组织房子认为我将在服务器上限制 10.000 名玩家。

所以这里有一些事实：

**每个玩家最多可以拥有 10 个房屋（最少 1 个）。** 这意味着我需要 100.000 个可能的房屋，这样无论服务器有多满，每个玩家总会有 10 个可能的房屋。

**将有 20 个城市，每个城市将有 200 个社区，每个社区将有 25 个房屋**

所以当问题出现时，**数据库将如何工作？**

每当我想查看 100.000 间房屋中的任何一间时，它都属于一个城市的社区，我需要能够玩弄它，就像我想查看社区 #123 城市#8 的 #5 房子一样，那么我应该能够获取数据。

我正在考虑拥有一张包含所有 100.000 间房屋的桌子，并在这张桌子上设置值来判断它在哪个城市的哪个社区，但感觉必须有更好的方法。（也许使用多个表？我不知道）

所以任何帮助将不胜感激。

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T13:25:54.210

很难回答，因为您的完整要求是未知的。

但我建议您规范化数据库 - 至少是第 3 范式。如果您不知道那是什么，我建议您尽快了解它。

我的最佳猜测如下：

1.  PLAYER 与 HOUSE 是一对多的。如果不止一个玩家拥有同一个房子，那么它是多对多的。
2.  CITY 与 NEIGHBORHOOD 是一对多
3.  NEIGHBORHOOD 与 HOUSE 是一对多的

您将通过 JOINS 将 PLAYER 与城市、社区和房屋相关联。您应该在所有表上都有代理主键和适当的外键。在所有其他候选键组合上添加 UNIQUE 索引。

对所有查询运行 EXPLAIN PLAN 以确保它们不需要 TABLE SCAN 并充分执行。

10,000 名玩家对于数据库来说并不是一个大数字。你不会有任何问题。

以下是您选择附近所有房屋的查询可能如下所示：

```
SELECT *
FROM HOUSE H
INNER JOIN NEIGHBORHOOD N
ON H.HOUSE_ID = N.HOUSE_ID
INNER JOIN CITY C
ON N.NEIGHBORHOOD_ID = C.NEIGHBORHOOD_ID
WHERE C.CITY_ID = 8
AND N.NEIGHBORHOOD_ID = 123
ORDER BY H.HOUSE_ID 
```

# javascript - iframe 表单未提交到其操作 URL，而是提交到浏览器窗口 URL

> ID：14070173
> 
> 赞同：1
> 
> 时间：2012-12-28T13:19:50.970
> 
> 标签：javascript, jquery, html, spring

我有一个使用 ajax 填充的 iframe。

```
$.ajax({
        url: "inbox/search",
        data: dataToSend,
        type: 'POST',
        success: function (serverResponse) {
            //server response came write this to iframe

            var ifrm = document.getElementById('contentframe');
            ifrm = (ifrm.contentWindow) ? ifrm.contentWindow : (ifrm.contentDocument.document) ? ifrm.contentDocument.document : ifrm.contentDocument;
            ifrm.document.open();
            ifrm.document.write(serverResponse);//server response written
            ifrm.document.close();
        },
        error: function (jqXHR, textStatus, errorThrown) {
            removeThrobber();
            alert("Ajax Request Failed!Text Status:" + textStatus + ",errorThrown:" + errorThrown);
        }

    }); 
```

这个新填充的 iframe 包含带有操作的表单标记

```
<form name="inboxSearchForm" id="inboxSearchForm" commandName="userQueueFilter" action="${pageContext.request.contextPath}/inbox/search" method="post">
<a href="#" id="nextPage" onclick="pageJump(document.getElementById('pageNum').value,'up') ">Next ></a>
</form> 
```

iframe 中有一个链接（称为 Next），它使用 javascript 提交表单

```
document.getElementById('inboxSearchForm').submit(); 
```

单击链接请求`http://localhost:8080/Proj/inbox/search`会自动中止，并且萤火虫显示请求提交到新 URL“ `http://localhost:8080/Proj/landing`”这是包含整个内容的主页的 URL。此 URL 位于浏览器 URL 栏。对此行为有任何想法吗？

# java - 初始化对象的首选方法

> ID：14070175
> 
> 赞同：2
> 
> 时间：2012-12-28T13:19:54.773
> 
> 标签：java

> **可能重复：**
> [我应该在构造函数内还是在构造函数外初始化变量](https://stackoverflow.com/questions/3918578/should-i-initialize-variable-within-constructor-or-outside-constructor)

例如我有一个字段`int x`。Java 是否更喜欢在声明字段时对其进行初始化

```
int x = 0; 
```

还是在构造函数中？

```
public foo() {
x = 0;
} 
```

从设计的角度来看，哪个更受欢迎？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:22:45.047

两者都很好，只要你知道会发生什么。

它们将被初始化的顺序是这样的：

1.  班级成员（如`public int x = 0;`：）
2.  构造函数（如`this.x = 0;`：）

但是，将整数初始化为零是无操作的。Java 会自动执行此操作。

一个小演示来演示忽略初始化顺序的错误：

```
class Foo
{
    public String str;
    public String strTwo = "Here is str: " + str;

    public Foo()
    {
        str = "Java";
        System.out.println(strTwo);
    }
} 
```

这将打印`Here is str: null`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T13:21:09.673

公共 foo() { x = 0; }

这会很好。如果你使用这个 int x =0 它将适用于所有对象。但构造函数表示法适用于由该特定构造函数创建的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T13:21:25.760

原始类型的实例变量被隐式初始化，而引用变量被赋予空值。

所以如果你想像 ::

```
int x=0; 
```

对于所有对象，它将是 x=0。

但是对于构造函数，您可以在不同的构造函数中使用不同的值初始化它们，尽管在不同的构造函数中使用不同的值进行初始化并不是一个好习惯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T13:23:08.413

> Java 更喜欢在声明字段时还是在构造函数中初始化字段？

如果您使用默认值进行初始化，那么在构造函数或声明时进行初始化都是多余的。

但是，如果您想使用不同于默认值的值进行初始化，则应使用构造函数而不是声明。

> 从设计的角度来看，哪个更受欢迎？

从设计的角度来看，完全没有区别。它是实现细节。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T13:24:24.150

我的偏好是在构造函数之外初始化默认值，例如

```
int x=0; 
```

因此，如果您有多个构造函数和大量实例变量，您就不会忘记初始化。如果我需要变量的特定值，那么我将在构造函数中重新初始化。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-28T13:24:41.713

据我回忆，编译器在两种情况下生成的字节码几乎相同，这实际上只是偏好和编码风格的问题。就个人而言，我倾向于在构造函数中初始化变量——在某些情况下，无论如何你都必须在构造函数中初始化变量（例如将参数传递给构造函数时），这意味着你只需要查看一个地方就可以理解发生了什么，而不是2。

（附带说明 - 在您的示例中，无需执行“int x = 0”，因为定义“int x;”将自动将其设置为 0。）

# objective-c - 无法在 UIImage 上应用 inputSharpness

> ID：14070181
> 
> 赞同：1
> 
> 时间：2012-12-28T13:20:17.503
> 
> 标签：objective-c, ios, filter, uiimage, ios5.1

我在我的应用程序中使用了一堆`CIFilter`滤镜来调整亮度、饱和度等，它们工作正常。我遇到了一些问题`inputSharpness`。如果我触摸锐度滑块，图片就会消失。相关代码：

```
UIImage *aUIImage = [imageView image];
CGImageRef aCGImage = aUIImage.CGImage;
aCIImage = [CIImage imageWithCGImage:aCGImage];

//Create context
context = [CIContext contextWithOptions:nil];
sharpFilter = [CIFilter filterWithName:@"CIAttributeTypeScalar" keysAndValues: @"inputImage", aCIImage, nil]; 
```

……

```
- (IBAction)sharpSliderChanged:(id)sender
{

    //Set filter value
    [sharpFilter setValue:[NSNumber numberWithFloat:sharpSlider.value] forKey:@"inputSharpness"];

    //Convert CIImage to UIImage
    outputImage = [sharpFilter outputImage];
    CGImageRef cgimg = [context createCGImage:outputImage fromRect:[outputImage extent]];
    newUIImage = [UIImage imageWithCGImage:cgimg];
    CGImageRelease(cgimg);

    //add image to imageView
    [imageView setImage:newUIImage];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:47:26.257

我读过一篇有类似问题的帖子，可能的解决方案是为您要提供的 UIImage 效果添加一个类别。这里唯一的区别是您应该使用`CIColorControls`参数之一：`inputSharpness`和`CISharpenLuminance`过滤器。

回到您的问题：从您的评论看来，您对如何初始化过滤器有一些问题。我看了一下[官方文档](https://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CoreImageFilterReference/index.html#//apple_ref/doc/filter/ci/CISharpenLuminance)，我会`CISharpenLuminance`在初始化阶段使用。它仅在 ios 6 中可用。

**编辑** 就像我说的，如果你想坚持核心图像，你想要的功能只在 iOS 6 上可用。如果您想与 ios 5 兼容，我可以建议您使用第三方库： bradlarson 的[GPU 库。](https://github.com/BradLarson/GPUImage)

# php - Zend Framework 2 - Doctrine 2 - 安装和使用 Gedmo

> ID：14070183
> 
> 赞同：1
> 
> 时间：2012-12-28T13:20:20.520
> 
> 标签：php, doctrine-orm, timestamp, zend-framework2, zend-db

我发现了 Gidmo 扩展，它提供了一个用于创建和更新对象的时间戳功能。

这就是我（奇怪的是没有其他 Zend 人）需要的东西！

我尝试通过[此处](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/timestampable.md)`use`显示的方式包含名称空间。但没有成功。Doctrine 验证在其他地方返回有效且没有错误，但是在创建新对象时，该属性为空。`created_at`

我也尝试过[这种方法](http://juriansluiman.nl/nl/article/116/use-the-gedmo-doctrine-extensions-in-zend-framework-2)，但结果相同。

任何想法我做错了什么？

作曲家.json：

```
"require": {
    ...
    "gedmo/doctrine-extensions": "dev-master" 
```

实体.php：

```
use Gedmo\Mapping\Annotation as Gedmo;
...

class Entity {   

/**
 * @ORM\Column(type="datetime")
 * @Gedmo\Timestampable(on="create")
 * @Form\Attributes({"type":"timestamp"})
 * @Form\Options({"label":"Created at"})
 * @Form\Exclude()
 *
 */
protected $created_at;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:35:36.970

我不知道您是否真的需要扩展来实现您正在寻找的功能，请查看本节中讨论的@Version 注释： Doctrine 文档的[乐观锁定](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/transactions-and-concurrency.html)。

[编辑] @Version 在命名空间下可用（以及所有 Doctrine ORM 映射注释）`Doctrine\ORM\Mapping`

时间戳字段的用法：`@Version @ORM\Column(type="datetime")`

整数字段的用法：`@Version @Column(type="integer")`

> 然而，版本号（而不是时间戳）应该是首选，因为它们在高度并发的环境中不会潜在地发生冲突，这与时间戳不同，这可能取决于特定数据库平台上时间戳的分辨率。（来源：教义文献）

# ruby-on-rails - 我应该如何为类数组编写方法？

> ID：14070186
> 
> 赞同：2
> 
> 时间：2012-12-28T13:20:38.687
> 
> 标签：ruby-on-rails, ruby, methods, rspec

我希望能够使用下面的方法来使用它：`clear_tire_index_for Answer, Question`

```
 def clear_tire_index_for(resource)
    resource.index.delete
    resource.tire.create_elasticsearch_index
    resource.index.refresh
  end 
```

怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T13:24:43.040

```
def clear_tire_index_for(*resources)
    resources.each do |res|
        res.index.delete
        res.tire.create_elasticsearch_index
        res.index.refresh
    end
end

clear_tire_index_for Answer, Question
clear_tire_index_for Answer 
```

# node.js - 运行 node-mysql 教程时出错

> ID：14070188
> 
> 赞同：4
> 
> 时间：2012-12-28T13:20:57.190
> 
> 标签：node.js, node-mysql

我在 node-mysql 的教程部分运行代码，它给了我错误

**代码**

```
var MySQLPool = require("mysql-pool").MySQLPool;
var pool = new MySQLPool({
  poolSize: 4,
  user:     'root',
  password: 'root',
  database: 'test'
});

pool.query("SELECT 'Hello, World!' AS hello", function(err, rows, fields) {
  if(err) throw err;
  console.log(rows[0].hello);
});

for(var i = 0; i < 10; ++i) {
  pool.query("SELECT SLEEP(2), ? AS i", [i], function(err, rows, fields) {
    if(err) throw err;
    console.log("Slept: " + rows[0].i);
  });
} 
```

**错误：**

> /home/comapq/Works/Nodejs/Codes/node_modules/mysql-pool/lib/mysql-pool/pool.js:158 for(var key in Client.prototype) { ^ TypeError: Cannot read property 'prototype' of undefined at MySQLPool._populate (/home/comapq/Works/Nodejs/Codes/node_modules/mysql-pool/lib/mysql-pool/pool.js:158:23) 在新的 MySQLPool (/home/comapq/Works/Nodejs/Codes/ node_modules/mysql-pool/lib/mysql-pool/pool.js:44:7) 在对象。(/home/comapq/Works/Nodejs/Codes/test-mysql-3.js:2:12) 在 Module._compile (module.js:449:26) 在 Object.Module._extensions..js (module.js :467:10) 在 Module.load (module.js:356:32) 在 Function.Module._load (module.js:312:12) 在 Module.runMain (module.js:492:10) 在 process.startup .processNextTick.process。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T15:03:17.420

经过一番研究，我发现了问题所在。您可能像这样安装了mysql：

```
npm install mysql 
```

这抓取了最新的 mysql 包，即 2.0.0-alpha5（开发阶段，大部分未经测试）。你需要安装最新的稳定版mysql：

```
npm install mysql@0.9.6 
```

# c - 如何在服务器上的线程和客户端上的线程之间进行同步？

> ID：14070191
> 
> 赞同：1
> 
> 时间：2012-12-28T13:21:12.940
> 
> 标签：c, linux, pthreads, client-server

我的应用程序在服务器端和客户端创建文件传输线程。现在我在客户端使用延迟策略（一个简单的 for 循环），以便在服务器中的线程创建过程*之后完成客户端中的线程创建。*

该应用程序运行良好。但这很粗糙，如果不是丑陋的话。我需要找到一种技术方法，以便客户端线程在知道服务器线程已启动之前不会启动。

我尝试使用从服务器到客户端的 send() 。客户端`recv()`必须阻止服务器的信号，但显然它没有。客户端控制台上的消息是关于连接被服务器拒绝的。请问有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:42:42.617

`select()`可能是您正在寻找的：您给它一组套接字，它会阻塞，直到这些套接字上发生某些事情（并且您可以提供超时以避免永远等待）。
调用`select()`以等待客户端接收到数据，然后`recv()`确保接收到的是来自服务器的正确消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T13:41:53.437

似乎您使用无连接传输。在这种情况下，我建议玩乒乓游戏，客户端循环发送“ping”udp数据包到服务器（有合理的周期），直到客户端从服务器接收到“pong”UDP数据包或超时。

# python - 在 PyQuery 中获取属性？

> ID：14070197
> 
> 赞同：21
> 
> 时间：2012-12-28T13:21:29.847
> 
> 标签：python, screen-scraping, pyquery

我正在使用 PyQuery 并想打印链接列表，但无法弄清楚如何`href`从 PyQuery 语法中的每个链接获取属性。

这是我的代码：

```
 e = pq(url=results_url)
  links = e('li.moredetails a')
  print len(links)
  for link in links:
    print link.attr('href') 
```

这将打印`10`，然后给出以下错误：

```
AttributeError: 'HtmlElement' object has no attribute 'attr' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-28T13:32:35.223

PyQuery wraps [`lxml`](http://lxml.de/)，因此您使用[ElementTree API](http://docs.python.org/2/library/xml.etree.elementtree.html)来访问属性：

```
e = pq(url=results_url)
for link in e('li.moredetails a'):
    print link.attrib['href'] 
```

或者，要在任何找到的元素上使用 PyQuery API，将元素包装在`pq()`调用中，呼应使用 jQuery`$()`或`jQuery()`包装 DOM 元素所需的方式：

```
 print pq(link).attr('href') 
```

或者

```
 print pq(link).attr['href'] 
```

以更 Pythonic 的方式访问属性。

您也可以`.items()`改为循环该方法，该方法返回 PyQuery 元素：

```
e = pq(url=results_url)
for link in e('li.moredetails a').items():
    print link.attr['href'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T13:27:19.080

就像在 jQuery 中一样，将该链接包装起来：

```
e = pq(url=results_url)
links = e('li.moredetails a')
print len(links)
for link in links:
    print pq(link).attr('href') 
```

# cocos2d-iphone - 如何在调度程序 cocos2d 中传递参数

> ID：14070201
> 
> 赞同：1
> 
> 时间：2012-12-28T13:21:47.303
> 
> 标签：cocos2d-iphone, cocos2d-x

在 cocos2d 或 cocos2dx 中进行调度程序调用时，有人可以找到我如何传递参数的方法吗？我正在使用这个调度程序调用并通过类变量传递它的参数。我想通过这个调用发送参数。谢谢！

scheduler->scheduleSelector(schedule_selector(CFacebookManager::sendRequestAllUpdateUI), CFacebookManager::instance(), 1, false, 1, 1.0f);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:16:03.710

你想做的事情在 cocos2d 中是不可能的。您不能通过计划更新方法传递参数。

LearnCocos2d 对几乎相同的问题给出了很好的答案，在这里[schedule event with multiple arguments in cocos2D](https://stackoverflow.com/questions/11464226/schedule-event-with-multiple-arguments-in-cocos2d)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T08:05:24.520

如果您在 c++11 中使用 cocos2dx，我必须执行一个操作，该操作需要一个 lambda 代码并对其进行调度。Lamdas 可以捕获任意数量的变量，并且该操作将 userData 作为模板，并将其作为指针传递给 lambda，因此您可以对其进行修改并期望在更新之间具有精确性，而无需在类中声明额外的实例变量。请检查一下。 [https://github.com/radif/MCBCallLambda](https://github.com/radif/MCBCallLambda)

# content-management-system - fatwire 的应用服务器是什么？

> ID：14070208
> 
> 赞同：0
> 
> 时间：2012-12-28T13:22:28.383
> 
> 标签：content-management-system, fatwire

fatwire 有自己的应用服务器吗？
或者它使用任何标准的应用服务器，比如**Apache tomcat** （我不是指快速启动工具包）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:07:13.090

理论上，它可以在任何符合 Java EE 的应用程序服务器上运行，但我总是发现它最容易在 Tomcat 上运行，因为它更易于设置和管理；它是 FoC。

从内存来看，JSK 曾经使用 JBoss，但在后来的化身中切换为使用 Tomcat

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:45:06.387

支持 WebLogic、WebSphere、Tomcat、JBoss。

有关 Oracle Web Center Sites（以前称为 FatWire Content Server）的官方支持软件列表，请参阅此认证矩阵：[http ://www.oracle.com/technetwork/middleware/webcenter/sites/owcs-11gr1certmatrix-1609746.xls](http://www.oracle.com/technetwork/middleware/webcenter/sites/owcs-11gr1certmatrix-1609746.xls)

在被 Oracle 收购之前，JSK 与 JBoss 和 Tomcat 服务器实例捆绑在一起，可以选择其中一个作为部署平台。

现在它只随 Tomcat 6 一起提供。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T07:12:41.880

Fatwire 没有自己的应用服务器，但它可以部署在 Apache Tomcat、JBoss、IBM WAS、WebLogic、Sun Java Enterprise System 或 Oracle 应用服务器上。

# php - 如何防止对 assoc_merge 的结果重新编号？

> ID：14070209
> 
> 赞同：0
> 
> 时间：2012-12-28T13:22:30.583
> 
> 标签：php

我使用 array_merge 函数来合并两个数组。在大多数情况下，它可以正常工作

```
$x = array_merge(array('a' => 'x', 'b' => 'x'), array('b' => 'y', 'c' => 'y'));
var_dump($x);

// array(3) { ["a"]=> string(1) "x" ["b"]=> string(1) "y" ["c"]=> string(1) "y" } 
```

但是对于数字情况，它会返回意外的结果

```
$x = array_merge(array('1' => 'x', '2' => 'x'), array('2' => 'y', '3' => 'y'));
var_dump($x);

// array(4) { [0]=> string(1) "x" [1]=> string(1) "x" [2]=> string(1) "y" [3]=> string(1) "y" } 
```

如何防止索引重新编号？有没有办法通过基本 php 函数合并两个数组而不重新编号数字索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:24:45.167

如果要将第二个数组中的数组元素附加到第一个数组，同时不覆盖第一个数组中的元素并且不重新索引，请使用 + 数组联合运算符：

```
<?php
$array1 = array(0 => 'zero_a', 2 => 'two_a', 3 => 'three_a');
$array2 = array(1 => 'one_b', 3 => 'three_b', 4 => 'four_b');
$result = $array1 + $array2;
var_dump($result);
?> 
```

第一个数组中的键将被保留。如果两个数组中都存在数组键，则将使用第一个数组中的元素，而忽略第二个数组中匹配键的元素。

```
array(5) {
 [0]=>
 string(6) "zero_a"
 [2]=>
 string(5) "two_a"
 [3]=>
 string(7) "three_a"
 [1]=>
 string(5) "one_b"
 [4]=>
 string(6) "four_b"
} 
```

[取自这里](http://php.net/manual/en/function.array-merge.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T13:28:28.457

从[手册](http://php.net/manual/function.array-merge.php)：

> 如果输入数组具有相同的字符串键，则该键的后一个值将覆盖前一个。但是，如果数组包含数字键，则后面的值不会覆盖原始值，而是会被追加。

所以，改为使用[array_replace](http://php.net/manual/function.array-replace.php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T13:29:00.943

您可以`array_replace()`为此使用：

```
$x = array_replace(array('1' => 'x', '2' => 'x'), array('2' => 'y', '3' => 'y'));
var_dump($x); 
```

输出：

```
array(3) {
  [1]=>
  string(1) "x"
  [2]=>
  string(1) "y"
  [3]=>
  string(1) "y"
} 
```

# android - 从 android init.rc 执行静态程序

> ID：14070212
> 
> 赞同：2
> 
> 时间：2012-12-28T13:22:40.657
> 
> 标签：android, initialization

我想在这个过程中启动一个自定义程序`init`。我静态编译了这个程序，它从我启动的 android 库存 ROM 中运行良好。

从 android`init.rc`文档中我读到该`exec`命令是我需要的。
顺便说一句，我只能看到`dmesg`我的程序退出代码`-1`（我无法返回）。

`init.rc`片段：

```
on post-fs-data
write /dev/kmsg "launching test"
exec /data/test 
```

我看到的`dmesg`是这样的：

```
<4>[    6.336816] launching test
<6>[    6.336902] init: command 'write' r=0
<6>[    6.337115] init: command 'exec' r=-1 
```

这是可执行的源代码： http: [//pastebin.com/Hym1APWx](http://pastebin.com/Hym1APWx)

* * *

### 更新

我试图静态编译并运行这个程序：

```
int main(){return 0; } 
```

但结果总是`command 'exec' r=-1`。也许用户**uselen**是对的，也许我无法`/data`在早期启动阶段运行可执行文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T22:02:48.073

正如克里斯蒂安所说，看起来 exec 甚至没有实现。我开始认为为 init.rc 记录的许多功能都没有实现。然而，这是一种让您的程序启动的方法。

与其将其作为“exec”命令运行，不如将其设置为服务。

在您的 init.rc 或它包含的另一个文件中：

```
service my_service /data/test
    class main
    oneshot 
```

如果它在 main 类中，并且没有被禁用，它应该在 /data 挂载后运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T16:06:21.063

我今天有同样的问题。就我而言，解决方案很简单：该`exec`功能尚未实现，仅包含一个`return -1`. 您应该查看`builtin.c`并搜索`do_exec()`. 此代码在`init.rc`包含`exec`语句时执行。

# java - java.lang.IllegalAccessError：试图从类 Entity 访问字段 ConcreteEntity.instance

> ID：14070215
> 
> 赞同：14
> 
> 时间：2012-12-28T13:22:50.147
> 
> 标签：java, classloader

> java.lang.IllegalAccessError：试图从类 Entity 访问字段 ConcreteEntity.instance

好的，这就是交易。我正在尝试访问`ConcreteEntity.instance`which 是一个具有访问类型 default 的字段，该字段存在于 default 中`ClassLoader`，并且`Entity.getInstance`是一个存在于 child 中的方法`ClassLoader`。

现在请记住，它们都在同一个包中，但是`IllegalAccessError`正在抛出一个。这个问题有没有解决方案，不涉及我实际加载 Entity`ClassLoader`类`ConcreteEntity`？

```
0 new #14 <Entity>
 3 dup
 4 aload_0
 5 invokevirtual #18 <Adapter.getInstance>
 8 checkcast #20 <sl>
11 getfield #24 <sl.d>
14 invokespecial #25 <Entity.<init>>
17 areturn 
```

通过 jclasslib 检索到的字节码是在“编译后”生成的异常。

*感谢 Gamb 清理帖子。*

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-28T14:21:33.807

请参阅[我](https://stackoverflow.com/a/3387520/139595)对[类似问题的回答](https://stackoverflow.com/questions/3386662/illegalaccesserror-accessing-a-protected-method)，除非您的情况很明显您正在处理多个类加载器：

jvm 认为从不同类加载器加载的类位于不同的“运行时包”中，即使它们具有相同的包名。引用[jvm spceification](http://docs.oracle.com/javase/specs/jvms/se5.0/html/ConstantPool.doc.html)，第 5.3 节：

> 在运行时，一个类或接口不仅仅由它的名称决定，而是由一对：它的完全限定名称和它的定义类加载器决定。每个这样的类或接口都属于一个**运行时包**。类或接口的运行时包由包名和定义类或接口的类加载器决定。

在第 5.4.4 节中：

> 当且仅当以下任一条件为真时，类或接口 D 才能访问字段或方法 R：
> 
> ...
> 
> R 要么是受保护的，要么是包私有的（即既不是公共的，也不是受保护的，也不是私有的），并且由与D相同的**运行时包中的类声明。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T13:55:04.307

*Javadoc：*通常，这个错误会被编译器捕获；如果类的定义发生了不兼容的更改，则此错误只会在运行时发生。

因为我认为尝试了一些困难的类操作，也许是类加载，所以在两个类的加载方式上投入了一些时间。（在极少数情况下，显式的 serialVersionId 可能会有所帮助。）

如果类是相关的（超类/子类），则尝试使用接口删除该关系。可能使用注射。*那不是两次引用/加载一个类。*

抱歉，我无法给出具体答案。

# html - IE8 不显示一张图片

> ID：14070222
> 
> 赞同：0
> 
> 时间：2012-12-28T13:23:36.023
> 
> 标签：html, css, internet-explorer, internet-explorer-8

这真让我抓狂。我在一个网站上工作，所有其他浏览器都会显示这个图像，包括 IE6、7 和 9。但在 IE8 中完全忽略了这个图像。有谁知道出了什么问题？我提高了 z-index，但这似乎没有帮助。

HTML

```
<div id="building">
    <img src="images/someimg.png" alt="some title" height="110" width="626" />
</div> 
```

CSS

```
#building {
float: left;
position: absolute;
z-index: 10000;
margin-left: 384px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:00:01.300

我内联添加了这个样式并且可以工作：

```
<div id="container" style="position: relative !important;">
<!-- [...] -->
<div id="building" style="position: absolute !important; margin: 0px; width: 626px !important; float: none !important; height: 110px !important; right: 0px !important;"> 
```

![图片](../Images/a43e14ecf9f7c19110aadd0f535f5e4a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:49:09.710

一位同事帮我解决了这个问题。我必须将 DIV 的宽度和高度设置为与其中的图像大小相同。浏览器一起忽略了 div。感谢大家的帮助。

# git - 结构脚本/bash：如何检测 git 文件已更改

> ID：14070224
> 
> 赞同：3
> 
> 时间：2012-12-28T13:23:51.983
> 
> 标签：git, bash, symfony, grep, fabric

我正在为我的项目创建一个`fabric`部署脚本。 我想检测自上次提交以来文件是否已更改，以便打开并修改它。`Symfony`

我目前正在尝试：

```
def changes_between_two_diffs_grep(grepval):
    return run("git diff --name-only %s %s > /dev/null | grep '%s'; echo $?" % (env.point, env.old_point, grepval))

if (changes_between_two_diffs_grep('parameters.yml.dist') == "0"):
    edit_config() 
```

但徒劳无功。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T13:51:27.193

在我看来，您错误地将其`> /dev/null`放入命令中。
它不会导致任何内容（通过管道）传递给`grep`命令，因此`grep`.

当`grep`什么都没找到时，它返回 1。

这意味着你将永远得到 1 从`changes_between_two_diffs_grep()`

# jsf-2 - 第一个 JSF 应用程序似乎无法导航到第一页

> ID：14070229
> 
> 赞同：0
> 
> 时间：2012-12-28T13:24:22.693
> 
> 标签：jsf-2, portlet, websphere-portal

我正在尝试让我的第一个 JSF 页面在 was 服务器的本地实例上启动并运行。我似乎无法导航到我的第一页。我想我已经正确设置了一切，除了我从来没有进入我的页面。

我总是得到一个

> “网站无法显示页面”

例外。当我在控制台中查看可能引发了哪些异常时，会显示以下内容：

> E com.ibm.ws.webcontainer.webapp.WebApp logServletError SRVE0293E：[Servlet 错误]-[GenericServletWrapper]：javax.portlet.PortletException：java.lang.NullPointerException

和

> 引起：java.util.Collections.list(Collections.java:2229) 处的 java.lang.NullPointerException

这两个例外后面都是堆栈跟踪条目，对我来说没有真正意义。这些似乎是最相关的条目。

这是整个堆栈跟踪：

```
[12/28/12 8:16:47:719 EST] 00001b27 webapp        E com.ibm.ws.webcontainer.webapp.WebApp logServletError SRVE0293E: [Servlet Error]-[GenericServletWrapper]: javax.portlet.PortletException: java.lang.NullPointerException
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServlet.doDispatch(PortletServlet.java:369)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:82)
    at com.ibm.isclite.container.collaborator.PortletServletCollaborator.doDispatch(PortletServletCollaborator.java:143)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:74)
    at com.ibm.ws.portletcontainer.rrd.RRDServerPortletServletCollaborator.doDispatch(RRDServerPortletServletCollaborator.java:60)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:74)
    at com.ibm.ws.portletcontainer.cache.CacheCollaborator.doDispatch(CacheCollaborator.java:74)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:74)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServlet.dispatch(PortletServlet.java:208)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServlet.service(PortletServlet.java:165)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1214)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:774)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:456)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
    at com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:122)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.invokeTarget(WebAppFilterChain.java:125)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:77)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:926)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1023)
    at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.dispatch(WebAppRequestDispatcher.java:1384)
    at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.include(WebAppRequestDispatcher.java:548)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletInvokerImpl.invoke(PortletInvokerImpl.java:214)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletInvokerCollaboratorChainImpl.doCollaborator(PortletInvokerCollaboratorChainImpl.java:78)
    at com.ibm.ws.portletcontainer.cache.PortletInvokerCacheCollaborator.doRender(PortletInvokerCacheCollaborator.java:58)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletInvokerCollaboratorChainImpl.doCollaborator(PortletInvokerCollaboratorChainImpl.java:67)
    at com.ibm.ws.portletcontainer.ext.PortletInvokerPerformanceCollaborator.invoke(PortletInvokerPerformanceCollaborator.java:313)
    at com.ibm.ws.portletcontainer.ext.PortletInvokerPerformanceCollaborator.doInvoke(PortletInvokerPerformanceCollaborator.java:101)
    at com.ibm.ws.portletcontainer.ext.PortletInvokerPerformanceCollaborator.invokePMI(PortletInvokerPerformanceCollaborator.java:163)
    at com.ibm.ws.portletcontainer.ext.PortletInvokerPerformanceCollaborator.doInvoke(PortletInvokerPerformanceCollaborator.java:91)
    at com.ibm.ws.portletcontainer.ext.PortletInvokerPerformanceCollaborator.doRender(PortletInvokerPerformanceCollaborator.java:74)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletInvokerCollaboratorChainImpl.doCollaborator(PortletInvokerCollaboratorChainImpl.java:67)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletInvokerImpl.render(PortletInvokerImpl.java:97)
    at com.ibm.ws.portletcontainer.PortletContainerImpl.doRender(PortletContainerImpl.java:121)
    at com.ibm.ws.portletcontainer.PortletContainerInvokerCollaboratorChainImpl.doCollaborator(PortletContainerInvokerCollaboratorChainImpl.java:80)
    at com.ibm.ws.portletcontainer.ext.ExtCollaborator.doRender(ExtCollaborator.java:76)
    at com.ibm.ws.portletcontainer.PortletContainerInvokerCollaboratorChainImpl.doCollaborator(PortletContainerInvokerCollaboratorChainImpl.java:67)
    at com.ibm.ws.portletcontainer.cache.CacheInvokerCollaborator.doRender(CacheInvokerCollaborator.java:66)
    at com.ibm.ws.portletcontainer.PortletContainerInvokerCollaboratorChainImpl.doCollaborator(PortletContainerInvokerCollaboratorChainImpl.java:67)
    at com.ibm.ws.portletcontainer.PortletContainerImpl.renderPortlet(PortletContainerImpl.java:91)
    at com.ibm.ws.portletcontainer.pcinvoker.PortletInvokerImpl$2.run(PortletInvokerImpl.java:100)
    at java.security.AccessController.doPrivileged(AccessController.java:254)
    at com.ibm.ws.portletcontainer.pcinvoker.PortletInvokerImpl.invokeRender(PortletInvokerImpl.java:96)
    at com.ibm.ws.portletcontainer.portletserving.PortletServingServlet.invokePortletRender(PortletServingServlet.java:280)
    at com.ibm.ws.portletcontainer.portletserving.PortletServingServlet.service(PortletServingServlet.java:151)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1214)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:774)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:456)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
    at com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:122)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.invokeTarget(WebAppFilterChain.java:125)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:92)
    at com.ibm.ws.portletcontainer.portletserving.filter.PortletDocumentFilterContainer.doFilterEnd(PortletDocumentFilterContainer.java:61)
    at com.ibm.ws.portletcontainer.portletserving.filter.PortletDocumentFilterChain.doFilter(PortletDocumentFilterChain.java:55)
    at com.ibm.ws.portletcontainer.portletserving.filter.DefaultFilter.doFilter(DefaultFilter.java:105)
    at com.ibm.ws.portletcontainer.portletserving.filter.PortletDocumentFilterChain.doFilter(PortletDocumentFilterChain.java:49)
    at com.ibm.ws.portletcontainer.portletserving.filter.PortletDocumentFilterContainer.doFilter(PortletDocumentFilterContainer.java:52)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:89)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:926)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1023)
    at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:87)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:895)
    at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1662)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:195)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:276)
    at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214)
    at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)
    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1659)
Caused by: java.lang.NullPointerException
    at java.util.Collections.list(Collections.java:2229)
    at org.apache.myfaces.util.AbstractThreadSafeAttributeMap$AbstractAttributeIterator.<init>(AbstractThreadSafeAttributeMap.java:208)
    at org.apache.myfaces.util.AbstractThreadSafeAttributeMap$AbstractAttributeIterator.<init>(AbstractThreadSafeAttributeMap.java:200)
    at org.apache.myfaces.util.AbstractThreadSafeAttributeMap$KeyIterator.<init>(AbstractThreadSafeAttributeMap.java:233)
    at org.apache.myfaces.util.AbstractThreadSafeAttributeMap$KeyIterator.<init>(AbstractThreadSafeAttributeMap.java:233)
    at org.apache.myfaces.util.AbstractThreadSafeAttributeMap$KeySet.iterator(AbstractThreadSafeAttributeMap.java:183)
    at org.apache.myfaces.shared_impl.context.flash.SubKeyMap._gatherKeys(SubKeyMap.java:121)
    at org.apache.myfaces.shared_impl.context.flash.SubKeyMap.access$000(SubKeyMap.java:44)
    at org.apache.myfaces.shared_impl.context.flash.SubKeyMap$Entries.iterator(SubKeyMap.java:146)
    at java.util.AbstractMap$1$1.<init>(AbstractMap.java:475)
    at java.util.AbstractMap$1.iterator(AbstractMap.java:474)
    at com.ibm.faces.trace.TracePhaseListener.getMapDump(TracePhaseListener.java:305)
    at com.ibm.faces.trace.TracePhaseListener.getMapDump(TracePhaseListener.java:324)
    at com.ibm.faces.trace.TracePhaseListener.getScopeDump(TracePhaseListener.java:379)
    at com.ibm.faces.trace.TracePhaseListener.getPhaseDump(TracePhaseListener.java:291)
    at com.ibm.faces.trace.TracePhaseListener.beforePhase(TracePhaseListener.java:76)
    at com.ibm.faces20.portlet.FacesPortlet.restoreView(FacesPortlet.java:1429)
    at com.ibm.faces20.portlet.FacesPortlet.doRender(FacesPortlet.java:480)
    at com.ibm.faces20.portlet.FacesPortlet.doView(FacesPortlet.java:540)
    at com.ibm.faces20.portlet.FacesPortlet.doDispatch(FacesPortlet.java:412)
    at javax.portlet.GenericPortlet.render(GenericPortlet.java:233)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServlet.doDispatch(PortletServlet.java:576)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:114)
    at com.ibm.isclite.container.collaborator.PortletServletCollaborator.doRender(PortletServletCollaborator.java:71)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:105)
    at com.ibm.ws.portletcontainer.rrd.RRDServerPortletServletCollaborator.doRender(RRDServerPortletServletCollaborator.java:123)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:105)
    at com.ibm.ws.portletcontainer.cache.CacheCollaborator.doRender(CacheCollaborator.java:92)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:105)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServlet.doDispatch(PortletServlet.java:273)
    ... 78 more 
```

# android - 在 iOS、Android 和 WP 上开发的费用是多少？

> ID：14070239
> 
> 赞同：69
> 
> 时间：2012-12-28T13:24:59.363
> 
> 标签：android, ios, windows-phone

我知道这不是问这个问题的理想场所，但很难找到一个好的答案，我更喜欢问有经验的专业人士。

我们必须支付哪些费用才能在以下位置发布应用程序：

*   Windows 商店（适用于 WP 和 W8）
*   谷歌播放
*   iTunes

这些公司保留的百分比是多少？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-12-28T13:28:29.030

Apple 每年收取 99 美元加入[iOS 开发者计划](https://developer.apple.com/programs/ios/)，该计划允许您为 iPhone、iPod Touch 和 iPad 发布应用程序。如果您免费为您的应用程序定价，则不会再收取任何费用。如果您为您的应用程序收费，Apple 将收取 30%。您需要购买 Mac 来开发您的应用程序（您不能在 Windows 上开发 iOS 应用程序）。开发应用程序所需的所有软件都包含在 iOS 开发者计划会员的价格中（其中大部分还随每台 Mac 免费提供）。

微软每年收取 99 美元加入[App Hub](http://create.msdn.com/en-us/home/membership)，让您可以同时为 Xbox 360 和 Windows Phone 7 进行开发。要开发 Windows Phone 8 应用程序，您需要 Windows 8 64 位和 Visual Studio 2012。与 Apple 一样，微软没有分发免费应用程序收费（您可以免费提交 100 个，之后每次提交费用为 19.99 美元），他们将获得付费应用程序收入的 30%。你需要一台运行 Windows 7 或 Windows Vista 的机器来开发你的应用程序，并且你不需要购买任何软件（如果你需要更高级版本提供的功能，你可以购买 Visual Studio 许可证，但是这将是不寻常的）。

**更新：**上面的 App Hub 链接坏了，我不知道 Xbox 应用程序，但总的来说微软的 App Dev 费用发生了变化，现在个人收费 19 美元（一次性费用），个人收费 99 美元（一次性费用）公司。[Microsoft 开发人员注册页面/详细信息](https://developer.microsoft.com/en-us/store/register)。

谷歌一次性收取 25 美元的费用才能在 Google Play 上获得一个开发者帐户，该帐户可让您发布 Android 应用程序。免费应用免费分发，谷歌将付费应用收入的 30% 用于[“运营商和计费结算费用”](http://android-developers.blogspot.com/2008/10/android-market-now-available-for-users.html)。您可以使用 Windows、Linux 或 Mac 开发 Android 应用程序。应用程序是使用免费提供的[Android SDK编写的。](http://developer.android.com/sdk/index.html)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-12-28T13:29:18.667

Apple iTunes 每年 99 美元，[请在此处查看](https://developer.apple.com/programs/ios/)，

Android 一次性费用为 25 美元，[请在此处查看](https://play.google.com/apps/publish/)

Windows Phone 是一次性费用，个人 19 美元，公司 99 美元。[在这里检查](https://developer.microsoft.com/en-us/store/register)

# c# - 如何在 ServiceStack 中启用 swagger？

> ID：14070246
> 
> 赞同：7
> 
> 时间：2012-12-28T13:25:50.657
> 
> 标签：c#, servicestack, swagger

我发现在介绍性幻灯片中提到了招摇。但没有别的地方。是不是事情还没有完成？

编辑：显然它在待办事项列表中。

有什么好方法可以自动记录 RestAPI 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T08:50:21.007

要为您的服务堆栈启用 Swagger，请关注服务堆栈 wiki 上的[Swagger API](https://github.com/ServiceStack/ServiceStack/wiki/Swagger-API)页面。

### 详细步骤：

1.  `Install-Package ServiceStack.Api.Swagger`在包管理器控制台中运行。
2.  在您的 AppHost.cs 中启用 Swagger 插件：

    ```
    using ServiceStack.Api.Swagger;

    public override void Configure(Container container)
    {
      ...
      Plugins.Add(new SwaggerFeature());
      ...
    } 
    ```

3.  使用 Swagger UI 访问`http://localhost:port/swagger-ui/index.html`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-28T13:34:54.663

根据[Trello](http://bit.ly/WYT1bv)的说法，这是一个“正在做”，但后来又被移回“待做”；并且在 github repo 中有一个 Swagger.Api 模块，所以假设它只是部分完成。

**编辑**

正如已经指出的那样（但为了完整起见，因为这是公认的答案），SwaggerUI 已准备好用于服务堆栈（天哪，它太棒了）。[Github wiki](https://github.com/ServiceStack/ServiceStack/wiki/Swagger-API)已经在最近几天填写完毕，启动和运行非常容易。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T14:53:20.680

看起来它现在已经完成并准备好了，请查看 v3.9.35 的发行说明 @ [https://github.com/ServiceStack/ServiceStack/wiki/Release-Notes](https://github.com/ServiceStack/ServiceStack/wiki/Release-Notes)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T07:41:33.350

嗯......对不起，如果我误解了这一点：

> 有什么好方法可以自动记录 RestAPI 吗？

...但是当我用以下属性装饰我的 DTO 或服务时：

```
[Route("/hello","GET")]
[Route("/hello/{Name}","POST,GET")]
public class Hello : IReturn<HelloResponse>
{
    public string Name { get; set; }
} 
```

servicestack 生成的默认元数据页面记录了使用情况：

![在此处输入图像描述](../Images/284ccbf04d07b90a63fc1e23893f9c04.png)

这不是你要找的吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-04T20:42:52.577

对于.Net Core ServiceStack，所以我为 Swagger UI 安装了 ServiceStack.Api.Swagger.Core nuget。

但这给了我“500：未定义的错误”。

然后我删除了 ServiceStack.Api.Swagger.Core 并安装了 ServiceStack.Api.Swagger。

这是完美的作品。

# c# - 仅从流 c# XP 中创建图像或位图的参数无效

> ID：14070249
> 
> 赞同：1
> 
> 时间：2012-12-28T13:25:55.413
> 
> 标签：c#, stream, windows-xp, gdi+, embedded-resource

我相信我正在做的事情是相当标准的。我通过在资源上调用 GetManifestResourceStream 来从嵌入式资源创建一些图像，并为其提供 .ico 文件的路径：

```
Bitmap bmp = new Bitmap(Assembly.GetEntryAssembly().GetManifestResourceStream("MeterView.Resources.unlocked.ico")); 
```

然后使用该位图在我的表单上显示图像。这在 Windows 7 和 8 上一直运行良好，但现在当我尝试在 XP SP3 盒子上运行应用程序时，我在将流转换为位图的行上得到“无效参数”。我也尝试使用 Image.FromStream，但结果相同。

对资源的构建操作设置为嵌入式资源。任何人都知道如何解决这个问题？我也尝试重置流，这也没有什么区别。

在此先感谢您的任何建议。

图标文件来自这个应用程序的原始版本，它是用 Visual Basic 为 XP 编写的。我相信它们是在 VB 中手动生成的。我已经回收了所有这些图标，以便用 C# 重写这个应用程序。这是我第一次遇到问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T18:44:25.190

感谢所有的建议。我确实尝试将代码分解为单独的行，实际上是从流中创建位图。在几个不同的 XP 系统上失败，所有系统都运行 SP3 并安装了 .NET 4 框架。

将原始 ico 文件转换为 png 文件，然后将它们转换为位图工作，图像质量没有明显损失。

# batch-file - 批处理文件 - 在目录路径中返回两步

> ID：14070252
> 
> 赞同：3
> 
> 时间：2012-12-28T13:26:47.143
> 
> 标签：batch-file, cmd, window

我正在创建一个批处理文件，我在一个路径上

```
C:\Validation\docs\chm 
```

我想搬回

```
C:\Validation part 
```

这是在 %DialogPath% 这是由用户输入的，但是当我写

```
CD /D %DialogPath% 
```

发生错误，告诉此路径不存在

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-29T21:22:52.110

您的问题的直接答案是

```
cd ..\.. 
```

但`cd /D C:\Validation`也有效。

与 then 命令相比，变量更可能出现问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T14:45:24.540

在您提供有关脚本的更多详细信息之前，我们只能猜测问题可能是什么。

但是，由于您只在有限的时间内更改当前目录，您应该使用[`pushd`](http://technet.microsoft.com/en-us/library/cc771180%28v=ws.10%29.aspx)and[`popd`](http://technet.microsoft.com/en-us/library/cc771942%28v=ws.10%29.aspx)命令。

示例：（运行此 .bat 脚本以查看如何`pushd`工作`popd`！）

```
:: Hide Commands
@echo off

:: Display Current Working Directory
echo Current Directory = %CD%

:: Create folders for demonstration purposes only
rd /Q "%Temp%\Test" 2>nul & mkdir "%Temp%\Test" & mkdir "%Temp%\Test\Subfolder"

:: Change the Working Directory
pushd "%Temp%"

:: Display Current Working Directory
echo Current Directory = %CD%

pushd "%Temp%\Test\Subfolder"

:: Display Current Working Directory
echo Current Directory = %CD%

:: Revert back to the previous Working Directory
popd

:: Display Current Working Directory
echo Current Directory = %CD%

:: Revert back to the previous Working Directory
popd

:: Display Current Working Directory
echo Current Directory = %CD%

pause 
```

如需帮助，请键入[`pushd /?`](http://technet.microsoft.com/en-us/library/cc771180%28v=ws.10%29.aspx)或[`popd /?`](http://technet.microsoft.com/en-us/library/cc771942%28v=ws.10%29.aspx)进入命令提示符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-29T20:29:21.350

您可以使用 向上移动一条路径`cd ..`。如果您这样做两次，您将进入`C:\Validation`目录。

在您的示例中，它看起来像这样：

```
C:\Validation\docs\chm> cd ..

C:\Validation\docs> cd ..

C:\Validation> 
```

# asp.net - 管理用户对 ASP.NET 中页面的访问

> ID：14070254
> 
> 赞同：3
> 
> 时间：2012-12-28T13:26:55.960
> 
> 标签：asp.net, membership-provider, roleprovider

我正在使用 MembershipProvider，目前有 3 个角色：用户、超级用户、管理员。

我也有只有管理员和超级用户才能看到的页面。对于这些页面，我在 web config 中使用配置：

```
 <location path="Users.aspx">
    <system.web>
      <authorization>
        <allow roles="Admin, Super User"/>
        <deny users="*" />
      </authorization>
    </system.web>
  </location> 
```

这工作得很好。

但我有一堆页面

```
Evaluations
Actions
Reports
Files 
```

我想要单独访问。我想分别授予对每个页面的访问权限。

有没有比为每个页面创建角色并分配给这些角色更好的方法？

PS 我使用的是 ASP.NET，而不是 MVC

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T13:33:09.410

是的，将您的文件夹结构修改为如下所示：

```
- Super User
  - Admin
    - All 
```

然后你可以做这样的事情：

```
<location path="Super User">
  <system.web>
    <authorization>
      <allow roles="Super User"/>
      <deny users="*" />
    </authorization>
  </system.web>
</location>

<location path="Super User/Admin">
  <system.web>
    <authorization>
      <allow roles="Admin"/>
      <deny users="*" />
    </authorization>
  </system.web>
</location>

<location path="Super User/Admin/All">
  <system.web>
    <authorization>
      <allow users="*" />
    </authorization>
  </system.web>
</location> 
```

现在只需将页面放在适当的文件夹中。根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/b6x6shw7%28v=vs.100%29.aspx)，位置元素适用于所有子目录：

> 指定包含的配置设置应用到的资源。使用缺少路径属性的位置会将配置设置应用于当前目录和所有子目录。如果 location 没有使用路径属性并且 allowOverride 为 False，则配置设置不能被子目录中的 Web.config 文件更改。

所以`Super User`根据定义将可以访问下面的所有其他页面，依此类推。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T13:32:48.740

是的，有更好更简单的方法。将所有受限页面放在一个单独的文件夹中，并在此文件夹中创建一个额外的 web.config。这个额外的 web.config 应该只包含授权部分。

运行时将评估从请求文件夹到应用程序根目录的 web.configs。因为授权部分存在于这个附加的 web.config 中，它将覆盖您的根授权部分。

这样，单个设置（单个 web.config）可以保护任意数量的文件（目录中的所有文件）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T13:33:39.317

You can also assign permissions to a folder instead using the `<location>` element. This way, you can group a bunch of pages into one permission set. Also, you could validate permissions in code; in global.asax, the application_postauthenticaterequest runs for each request to the server (so for each aspx page), and you can write code here to do the validation, and redirect away if the user doesn't have the permissions.

# java - 在 clojure REST+disk-I/O 应用程序中要处理哪些错误？

> ID：14070255
> 
> 赞同：4
> 
> 时间：2012-12-28T13:27:11.560
> 
> 标签：java, exception, clojure, agents

我有一个服务器应用程序，它稍微简化了，它定期通过一个不够强大的服务器的 rest-api 进行测量。这些值应该在本地缓存（并且带有时间戳/不可变），可以存储为[FloatBuffer](http://docs.oracle.com/javase/6/docs/api/java/nio/FloatBuffer.html)，其中每个位置对应于一个测量样本。有一个 webbrowser 应用程序会定期发出 ajax 请求来更新网页上的一些整洁的统计信息，如下图所示：

![描述 REST 测量服务和演示的系统架构的图片](../Images/c554ba15c1ff25fc04555331f912540e.png)

假设服务器已经启动并运行，还有很多地方可能会出现错误

*   REST 测量服务器可能无法访问（服务器只是在本地存储测量值）
*   与测量服务器的网络连接可能已断开
*   存储可能已满或以某种方式损坏
*   浏览器可能会失去与服务器的联系并尝试再次使用它

我处理错误的一般*策略*应该如下：

如果通过 REST 从测量服务获取值时出现问题，则应该每分钟重试一次。如果错误持续超过 30 分钟，则应通知管理员。如果出现磁盘问题，应立即通知管理员，或者最好在磁盘变满之前通知管理员。

最终用户体验应尽可能对错误透明，但应用程序仍应尽可能正常运行*，*通过通知用户发生错误并显示可用的最新数据。

关于网络问题（通过由作业触发的代理使用[clj-http](https://github.com/dakrone/clj-http)`ScheduledThreadPoolExecutor`发出 REST 请求）以及尝试刷新磁盘时的磁盘问题，我如何找到要处理的错误`FloatBuffer`？

什么是实现上述相当有状态但算法策略的明智方法？我应该在报告错误时简单地处理错误`agent`并切换到某种恢复模式作业吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-18T03:54:16.220

在这种涉及不同系统上的多个组件的交互中，应避免最终用户执行许多同步操作。它只是有时间限制并需要立即报告错误的同步操作。

一旦最终用户的交互将系统异步，您在错误处理机制上也有很多选择......在最终用户与系统交互的地方，您可以拥有一个错误映射器来翻译所有错误来自各个组件的用户可以理解的消息。

应该给用户一个 API 来查询他提交的请求的状态。那应该能够判断请求是否完成或是否有错误。如果网络连接需要更多时间，状态消息可以通知用户。

在任何分布式系统中，每个组件都会在某个时刻报告错误。一些 API 为此提供了错误侦听器接口。这将异步向用户报告错误。看看 JMS 之类的 API ( [http://docs.oracle.com/javaee/5/tutorial/doc/bnceh.html](http://docs.oracle.com/javaee/5/tutorial/doc/bnceh.html) )。它们被证明可用于复杂系统，并具有良好的错误处理机制。

# javascript - 使用 javascript 使链接不可点击

> ID：14070259
> 
> 赞同：1
> 
> 时间：2012-12-28T13:27:28.627
> 
> 标签：javascript

我有这段代码，我在网上看到并尝试实现它。我想要做的是使所有与父类的链接不可点击，我的意思是，它应该点击而不是重定向到页面的链接。

这行不通。。

```
<script>
    $(window).load(function(){
        $(document).ready(function(){
            $('.parent').click(function(){
                return false; // prevents default action
            });
        }
    })
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T13:29:10.867

试试这个：

```
$(document).ready(function(){
    $('.parent').click(function(e){
         e.preventDefault();
    });
}); 
```

你不需要`$(window).load(function(){`，因为`$(document).ready(function(){`是一样的！

**稍后编辑：**我必须通过告诉您我编写的代码使用 jQuery 库来完成此答案，该库必须包含在您的项目中。有关 jQuery 的更多信息，请访问[http://jquery.com/](http://jquery.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T13:30:05.963

你需要`event.preventDefault`

```
function unclickable(e) {
    e.preventDefault();
} 
```

或者`return false;`

```
function unclickable() {
    return false;
} 
```

并像这样使用它：

```
<a class="parent" onclick="unclickable(event);">Link</a> 
```

# sql - SQL 默认 ELSE 值

> ID：14070260
> 
> 赞同：1
> 
> 时间：2012-12-28T13:27:45.957
> 
> 标签：sql, sql-server-2008-r2

在下面的 sql 查询中，我有一个选择案例，没有别的

```
 SET dateformat mdy 
    DECLARE @DATE1 DATETIME 
    SET @DATE1 = '12/31/2011' 
    DECLARE @DATE2 DATETIME 
    SET @DATE2 = '06/01/2012' 

    UPDATE tablx
    SET xdate = case WHEN xdate is null and odate BETWEEN @Date1 AND @Date2 then odate end 
```

`NULL`else 的存在是否有区别，在上述情况下，即使我没有写，如果条件不满足，xdate 值是否会被填充`ELSE NULL`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T13:29:51.803

如果省略，它不会产生任何语义差异`ELSE NULL`是默认值。

`ELSE`不过，对于不知道这一事实的潜在读者来说，也许明确地包括冗余可能会更清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T13:30:20.767

从 MSDN 文档中[`CASE`](http://msdn.microsoft.com/en-us/library/ms181765.aspx)：

> ELSE else_result_expression
> 
> 如果没有比较操作计算结果为 TRUE，则返回表达式。如果省略此参数并且没有比较操作的计算结果为 TRUE，则 CASE 返回 NULL。

* * *

在旁注中，将日期文字编写为更好的习惯：

```
DECLARE @DATE1 DATETIME 
SET @DATE1 = '20111231' 
```

因为这样的文字（YYYYMMDD，没有分隔符）没有歧义 - 然后您可以忽略`DATEFORMAT`有效的设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T13:36:48.110

是的，他们会的。

例如，如果您有值

```
create table tablx (xdate datetime, odate datetime)

insert into tablx values ('2012-01-01', '2012-01-02')
insert into tablx values (null,         '2012-01-02')
insert into tablx values (null,         '2013-11-12')
insert into tablx values ('2013-11-11', '2013-11-12') 
```

第一行、第三行和第四行将更新为 null，第二行将更新为 '2012-01-02'，因此实际上

```
case WHEN <something> then odate end 
```

相当于

```
case WHEN <something> then odate else null end 
```

但我更喜欢第二个版本，因为它更明确和明显。

# php - Bootstrap Carousel 不呈现幻灯片

> ID：14070261
> 
> 赞同：0
> 
> 时间：2012-12-28T13:27:49.783
> 
> 标签：php, twitter-bootstrap, yii

我将 Yii 与 Bootstrap 一起使用。并尝试从图像文件夹中幻灯片放映一组图像。这是代码，我用来显示幻灯片图像。

```
$this->widget('bootstrap.widgets.TbCarousel', array(
    'items' => array(
        array(
            'image' => 'images\DSC02786_1.jpg',
            'label' => 'First Thumbnail label',
            'caption' => 'jubiliant mood '),
        array(
            'image' => 'images\siva.jpg',
            'label' => 'Second Thumbnail label',
            'caption' => 'Another caption'),
        array(
            'image' => 'images\siva1.jpg',
            'label' => 'Third Thumbnail label',
            'caption' => 'Yet Another'),
    ),
)); 
```

它显示图像，一个接一个，而不是幻灯片。作为一个新手，我找不到我犯的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T06:07:45.203

我发现了问题并纠正了。上面的编码需要来自 booster - yii 扩展的文件，但是我的文件错误地访问了引导文件。我删除并重新复制了来自 booster 扩展的文件，现在工作正常。

谢谢你的帮助。

# iphone - 如何通过传递手机号码作为参数从通讯录中获取人的联系人图像

> ID：14070265
> 
> 赞同：2
> 
> 时间：2012-12-28T13:28:27.333
> 
> 标签：iphone, objective-c, ios

我们如何通过传递手机号码作为参数从通讯录中获取人员的联系人图像。我不想打开通讯录。

我有一个图像井和另一个带有数字的文本字段和一个用于获取图像的按钮。

我只想在文本字段中输入 10 位数字。然后按下按钮，然后我想从通讯簿中获取具有此号码的人的缩略图。我只想从我的 UIView 传递的手机号码中获取人的缩略图。但我不想打开地址簿并从列表中选择任何联系人到我的 UIView 页面。

请任何人帮助我获取代码。我是 iphone 开发的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T13:39:11.630

检查从电话号码获取图像的示例

```
NSString phoneNumber = @"yourPhoneNumber";
UIImage *myContactImage;
ABAddressBookRef addressBook = ABAddressBookCreate();

    // Get all contacts in the addressbook
    NSArray *allPeople = (__bridge NSArray*)ABAddressBookCopyArrayOfAllPeople(addressBook);

    for (id person in allPeople) {
        // Get all phone numbers of a contact
        ABMultiValueRef phoneNumbers = ABRecordCopyValue((__bridge ABRecordRef)(person), kABPersonPhoneProperty);

        // If the contact has multiple phone numbers, iterate on each of them
        for (int i = 0; i &lt; ABMultiValueGetCount(phoneNumbers); i++) {
            NSString *phone = (__bridge_transfer NSString*)ABMultiValueCopyValueAtIndex(phoneNumbers, i);

            // Remove all formatting symbols that might be in both phone number being compared
            NSCharacterSet *toExclude = [NSCharacterSet characterSetWithCharactersInString:@"/.()- "];
            phone = [[phone componentsSeparatedByCharactersInSet:toExclude] componentsJoinedByString: @""];
            phoneNumber = [[phoneNumber componentsSeparatedByCharactersInSet:toExclude] componentsJoinedByString: @""];

            if ([phone isEqualToString:phoneNumber]) {
                NSData *contactImageData = (NSData*)ABPersonCopyImageData(person);
                myContactImage = [[UIImage alloc] initWithData:contactImageData];
                break;
                break;
            }
        }
    } 
```

# php - 显示来自 MySQL 的信息 - 来自 2 个不同的表...啊！菜鸟有麻烦

> ID：14070271
> 
> 赞同：2
> 
> 时间：2012-12-28T13:28:59.503
> 
> 标签：php, mysql, html-table, echo

我正在尝试从游戏服务器数据库中提取一些统计数据，并将它们返回到一个表中。

我已经设法做到了第一点 - 拉出 10 个结果，显示在 html 的表格中，但是……下一点让我很难过……对于每个玩家，我想从另一个表格中获取一些信息……

这是我到目前为止所拥有的......请原谅凌乱的代码，我只是在学习！

```
// adding ALL info from the first 10 tables 'profile' based on humanity, ascending, to     the variable 'profile_info'

$profile_info = mysql_query("SELECT * FROM profile ORDER BY humanity desc LIMIT 10");

while($row = mysql_fetch_array($profile_info))
  {
// Below I add the players unique ID into the variable $unique, to be used later for         pulling their survival time from the 2nd table, which is called 'survivor' 

  $unique = $row['unique_id'];
  echo "<tr>";
  echo "<td class=\"c1\">" . $row['name'] . "</td>";
  echo "<td class=\"c2\">" . $row['humanity'] . "</td>";
  echo "<td class=\"c3\">" . $row['total_survivor_kills'] . "</td>";
  echo "<td class=\"c4\">" . $row['total_bandit_kills'] . "</td>";
  echo "<td class=\"c5\">" . $row['total_zombie_kills'] . "</td>";
  echo "<td class=\"c6\">" . $unique . "</td>";

//In the line below, I try to get data from the 2nd table (called survivor), checking   for the unique_id for the player (extracted from the first table, called 'profile') which is common across both tables and which have a 0 in the field 'is_dead'

 $result = mysql_query("SELECT * FROM `survivor` WHERE `unique_id` ='.$unique' AND     `is_dead` = 0") or die(mysql_error());

 echo $unique;

  if (mysql_num_rows($result)) {
    $survivors_survival_time = mysql_fetch_assoc($result);
      echo "<td class=\"c7\">" . $survivors_survival_time['survival_time'] . "</td>";

} 
```

我希望，即使上面的代码可能是垃圾，你也能看到我在做什么？

大部分工作正常，只是我尝试从第二个表中获取玩家信息的部分，基于他们在第一个表中的行中的 unique_id，它不起作用:(

有什么想法，或者上面的内容太糟糕了，我应该放弃吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T13:35:32.600

我相信您的查询中有一个拼写错误，它会在此处提取每个玩家的信息：

```
mysql_query("SELECT * FROM `survivor` WHERE `unique_id` ='.$unique' AND     `is_dead` = 0") 
```

具体来说，在 value 字段`unique_id = '.$unique'`中有 extra 的部分。`.`

尝试删除它以获得以下信息：

```
$result = mysql_query("SELECT * FROM `survivor` WHERE `unique_id`='$unique' AND `is_dead` = 0") or die(mysql_error()); 
```

当然，这是假设您没有在表中的`.`每个`unique_id`值前面加上 a 。`survivor`

旁注（未具体回答）：
如果您要更新代码以使用[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)库而不是不推荐使用的`mysql_`函数，您将能够使用准备好的语句。使用这些可以防止像上面提到的那样的小错误，并提供更安全的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:35:00.127

我不了解 MySQL，因为我一直使用 MSSQL，但这是我用 PHP 和 mssql 编写它的方式：

```
'SELECT * FROM survivor WHERE unique_id="'.$unique.'" AND is_dead = 0' 
```

试试看，让我知道；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T14:43:16.027

您可以使用连接来组合这些查询：

```
SELECT 
    * 
FROM 
    profile AS p
LEFT JOIN 
    survivor AS s ON p.unique_id = s.unique_id 
WHERE 
    s.is_dead = 0
ORDER BY 
    humanity DESC 
LIMIT 
    10 
```

然后简单地循环结果。使用 LEFT JOIN 可以为您提供所有结果`profile`以及`survivor`. `profile`如果您将其更改为 JOIN（即删除 LEFT），它将只为您提供AND中存在匹配项的行`survivor`。

几个建议：

1.  明确说明您想要哪些列，即“SELECT name、human、survival_time 等...”而不是 SELECT *。
2.  使用允许您使用准备好的语句的查询方法，例如 PDO。
3.  使用单引号而不是双引号，这样您就不必转义 HTML 输出中的所有双引号。任何阅读您的代码的人都会感谢您！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T13:32:26.570

嵌套你的`while`循环或阅读 mysql LEFT JOIN 并更新你的查询。

# c# - 需要数字和破折号的正则表达式

> ID：14070278
> 
> 赞同：-7
> 
> 时间：2012-12-28T13:29:16.627
> 
> 标签：c#, regex

我需要这种格式的正则表达式，`xxxx-xxx-xx.jpg`其中`x`是 digits `[0-9]`。

以匹配为例：`3402-560-27.jpg`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T13:32:07.150

这`regex`就是你想要的：

```
\d{4}-\d{3}-\d{2}\.jpg 
```

`\d`表示数字，因此`\d{4}`意味着 4 位数字.. in `regex`a`.`匹配任何单个字符，因此要匹配文字`.`，它需要用 a 进行转义`\`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T13:32:29.410

这是最简单的正则表达式之一：`\d`为每个数字、`-`每个破折号和`\.`每个点放置一个。字母对应于它们自己，所以`jpg`保持不变。

当您有更多时间时，您可以通过学习重复组的[*显式量词符号来获得一些“风格分数”。*](http://regexlib.com/CheatSheet.aspx?AspxAutoDetectCookieSupport=1)

# mysql - sequel 永远不会返回 utf-8，只返回 ascii-8bit

> ID：14070281
> 
> 赞同：13
> 
> 时间：2012-12-28T13:29:19.650
> 
> 标签：mysql, ruby, encoding, utf-8, sequel

我正在尝试连接到这个 mysql 数据库。DataMapper 可以很好地以 UTF-8 格式获取所有内容，但 Sequel 总是以 ASCII-8bit 格式返回字符串，这会在 .to_json 中产生错误。

我已经尝试了几件事以使其正常工作。

```
Encoding.default_external = Encoding::UTF_8  
Encoding.default_internal = Encoding::UTF_8  
DB.run 'set names utf8'  
Sequel.mysql 'db', (...), :encoding => 'utf-8' 
```

我有宝石：mysql（2.9.0）（试过），mysql2（0.3.11）和sequel（3.42.0）

唯一可行的方法是手动强制对每个字符串进行编码，这远不如理想。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-30T02:22:19.203

尝试`Sequel.mysql2`代替`Sequel.mysql`. `Sequel.mysql`使用旧`mysql`驱动程序而不是新`mysql2`驱动程序，我不相信`mysql`驱动程序支持编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-03T16:33:13.987

编码可以像 do 一样传递：

```
Sequel.connect("mysql2://user:pass@localhost/the_database?encoding=utf8") 
```

# javascript - 如何在 angular.js 中实现 history.back()

> ID：14070285
> 
> 赞同：191
> 
> 时间：2012-12-28T13:29:41.720
> 
> 标签：javascript, angularjs

我有指令，它是带有后退按钮的站点标题，我想点击返回上一页。我如何以有角度的方式做到这一点？

我试过了：

```
<header class="title">
<a class="back" ng-class="icons"><img src="../media/icons/right_circular.png" ng-click="history.back()" /></a>
<h1>{{title}}</h1>
<a href="/home" class="home" ng-class="icons"><img src="../media/icons/53-house.png" /></a>   
</header> 
```

这是指令js：

```
myApp.directive('siteHeader', function () {
    return {
        restrict: 'E',
        templateUrl: 'partials/siteHeader.html',
        scope: {
            title: '@title',
            icons: '@icons'
        }
    };
}); 
```

但什么也没发生。我查看了有关[$location](http://docs.angularjs.org/api/ng.$location)的 angular.js API，但没有找到有关后退按钮或`history.back()`.

* * *

## 回答 #1

> 赞同：263
> 
> 时间：2012-12-28T13:52:20.447

您需要在指令中使用链接功能：

```
link: function(scope, element, attrs) {
     element.on('click', function() {
         $window.history.back();
     });
 } 
```

请参阅[jsFiddle](http://jsfiddle.net/asgoth/WaRKv/)。

* * *

## 回答 #2

> 赞同：135
> 
> 时间：2012-12-28T13:45:01.027

Angular 路由监视浏览器的位置，因此只需`window.history.back()`单击某些内容即可。

HTML：

```
<div class="nav-header" ng-click="doTheBack()">Reverse!</div> 
```

JS：

```
$scope.doTheBack = function() {
  window.history.back();
}; 
```

我通常在我的应用控制器上创建一个名为“$back”的全局函数，我通常将它放在 body 标签上。

```
angular.module('myApp').controller('AppCtrl', ['$scope', function($scope) {
  $scope.$back = function() { 
    window.history.back();
  };
}]); 
```

然后在我的应用程序中的任何地方我都可以做`<a ng-click="$back()">Back</a>`

（如果您希望它更具可测试性，请将 $window 服务注入您的控制器并使用`$window.history.back()`）。

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2014-04-28T21:04:22.880

理想情况下使用一个简单的指令来使控制器免于多余的 $window

```
app.directive('back', ['$window', function($window) {
        return {
            restrict: 'A',
            link: function (scope, elem, attrs) {
                elem.bind('click', function () {
                    $window.history.back();
                });
            }
        };
    }]); 
```

像这样使用：

```
<button back>Back</button> 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-12-17T10:27:06.123

另一个不错且可重用的解决方案是创建这样的[指令](https://gist.github.com/jakemmarsh/5867727)：

```
app.directive( 'backButton', function() {
    return {
        restrict: 'A',
        link: function( scope, element, attrs ) {
            element.on( 'click', function () {
                history.back();
                scope.$apply();
            } );
        }
    };
} ); 
```

然后像这样使用它：

```
<a href back-button>back</a> 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2013-02-21T01:07:55.403

万一它有用......我正在点击“10 $digest() 迭代达到。中止！” 使用 $window.history.back() 时出错；使用 IE9（当然在其他浏览器中也可以正常工作）。

我通过使用它来工作：

```
setTimeout(function() {
  $window.history.back();
},100); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-02-18T10:57:33.017

或者您可以简单地使用[javascript](/questions/tagged/javascript "显示标记为“javascript”的问题")代码：

```
onClick="javascript:history.go(-1);" 
```

像：

```
<a class="back" ng-class="icons">
   <img src="../media/icons/right_circular.png" onClick="javascript:history.go(-1);" />
</a> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-01-12T16:55:41.343

出现语法错误。试试这个，它应该工作：

```
directives.directive('backButton', function(){
    return {
        restrict: 'A',
        link: function(scope, element, attrs) {
            element.bind('click', function () {
                history.back();
                scope.$apply();
            });
        }
    }
}); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-06-17T07:52:06.723

角度 4：

```
/* typescript */
import { Location } from '@angular/common';
// ...

@Component({
  // ...
})
export class MyComponent {

  constructor(private location: Location) { } 

  goBack() {
    this.location.back(); // go back to previous location
  }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-02-19T06:01:07.693

对我来说，我的问题是我需要导航回来，然后转换到另一个状态。所以使用`$window.history.back()`不起作用，因为由于某种原因，转换发生在 history.back() 发生之前，所以我不得不像这样将我的转换包装在一个超时函数中。

```
$window.history.back();
setTimeout(function() {
  $state.transitionTo("tab.jobs"); }, 100); 
```

这解决了我的问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-13T15:28:20.170

在 AngularJS2 中，我找到了一种新方法，也许只是同一件事，但在这个新版本中：

```
import {Router, RouteConfig, ROUTER_DIRECTIVES, Location} from 'angular2/router'; 

(...)

constructor(private _router: Router, private _location: Location) {}

onSubmit() {
    (...)
    self._location.back();
} 
```

在我的函数之后，我可以看到我的应用程序将从 angular2/router 转到上一页的 usgin 位置。

[https://angular.io/docs/ts/latest/api/common/index/Location-class.html](https://angular.io/docs/ts/latest/api/common/index/Location-class.html)

# batch-file - 将文件夹中的文件批量移动到新创建的文件夹中

> ID：14070287
> 
> 赞同：1
> 
> 时间：2012-12-28T13:29:47.730
> 
> 标签：batch-file, directory, move, subdirectory

我想将某些文件夹中的所有文件移动到同一文件夹中新创建的文件夹中。为了更容易理解，请看下面的例子（输入显示在左边，输出显示在右边）：

```
C:\1\A\file1.tif            C:\1\A\Named\file1.tif
       file2.tif                         file2.tif
       file3.tif     ==>                 file3.tif
C:\1\B\file1.tif            C:\1\B\Named\file1.tif
       file2.tif                         file2.tif
       file3.tif                         file3.tif 
```

在上面的示例中，我只显示了每个文件夹中的前三个文件，但总数可能会有所不同（通常每个文件夹有 1000 个文件）。此外，我只显示了两个文件夹（A 和 B），但文件夹的总数也可能有所不同（通常大约 10 个文件夹）。最后，我只展示了文件夹“1”，但这类文件夹的数量也可能有所不同（通常是“1”到“10”）。所以我一直在寻找一个脚本，它可以独立于文件或文件夹的数量来执行这些操作，并且独立于文件夹/文件的名称（我只选择了“1”、“A”和“file1.tif”作为示例）。

这个想法是，现在，我必须在文件所在的每个文件夹（上例中的“A”和“B”）中手动创建空文件夹（在上例中称为“命名”）。然后我必须手动将所有文件移动到新创建的“命名”文件夹中。我必须为所有文件夹（大约 100 个）执行此操作。如果我只需要做一次，我可以手动完成整个过程，但问题是我必须多次执行此过程:-)。因此，自动化这将节省大量时间。

有谁知道可以做到这一点的脚本？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:45:54.253

在命令文件中进行了一些测试，这可能会起作用

用这些行创建一个 cmd 文件

```
for /r %%a in (*.*) do  call :singlecopy %%a
goto :eof

:singlecopy
set src=%~p1
set dst=%~p1NAMED
set file=%~n1%~x1
rem replace NAMED in src with nothing
set srctst=%src:NAMED=%
rem if src and srctst are still the same, copy 
if %srctst%==%src%  robocopy %src%  %dst% %file% /move /create
goto :eof 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T10:49:44.703

经过彻底的测试，这很好用。但是，由于文件很多，您可能需要设置一个小测试环境，例如在您的示例中，先使用它，然后再将其用于实际数据。

```
setlocal enabledelayedexpansion
cd C:\rootfolder
for /f "tokens=*" %%a in ('dir /s /b /a:d') do (
attrib "%%a\*.*" | find "File not found"
if !errorlevel!==1 (
if not exist "%%a\Named" md "%%a\Named"
xcopy "%%a\*.*" "%%a\Named"
del "%%a\*.*" /f /q
)
) 
```

# javascript - 使用 REST 调用时，Ajax 调用在 Magento 中造成跨域问题

> ID：14070289
> 
> 赞同：0
> 
> 时间：2012-12-28T13:29:51.583
> 
> 标签：javascript, magento, magento-1.7, magento-1.4

我能够在浏览器中呈现 JSON 数据，但是在 Javascript 中将其作为 URL 链接提供时，它不会带来数据。

它显示为空。当我使用 Java 时也发生了同样的事情。我认为这是跨域问题。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:34:00.337

使用 CURL 从 Cross Domaim 获取数据。Curl 是获取跨域数据的更可靠和最佳的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:20:59.800

您可以尝试使用 jsonp。请参阅[将 .ajax() 与 JSONP 结合使用的基本示例？](https://stackoverflow.com/questions/5943630/basic-example-of-using-ajax-with-jsonp)

您还可以在您的 Web 服务器上创建一个代理，一个简单的 php 脚本，用于从远程服务器获取信息。请参阅[http://benalman.com/code/projects/php-simple-proxy/examples/simple/](http://benalman.com/code/projects/php-simple-proxy/examples/simple/)

# android - 媒体播放器不工作

> ID：14070290
> 
> 赞同：1
> 
> 时间：2012-12-28T13:29:52.323
> 
> 标签：android

我创建了一个简单的应用程序。在我的主要活动课程中，我使用它在单击按钮时播放声音

```
MediaPlayer buttonSound = MediaPlayer.create(this, R.drawable.button_sound); 

public void onClick(View arg0){
                buttonSound.start();
                             } 
```

在我的主要活动课程中，我有一个启动背景音乐的服务

```
 Intent svc=new Intent(this, BackgroundSoundService.class);
 startService(svc); 
```

问题是，如果我不启动服务`startService(svc);`，按钮声音就不会播放！为什么？它们是两种不同的东西！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:33:16.400

这里

```
MediaPlayer buttonSound = MediaPlayer.create(this, R.drawable.button_sound); 
                                                    //^^^^^^^ 
```

不要将您的音频或视频文件放在 drawable 文件夹中。将其移动到 res/raw 文件夹并将媒体实例创建为：

```
MediaPlayer buttonSound = MediaPlayer.create(this, R.raw.button_sound); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T13:35:29.843

在其中创建一个原始文件夹`/res/raw`并将您的音频或声音文件存储在此文件夹中。从此文件夹中调用您的音频文件。

像这样

```
MediaPlayer soundBtn = MediaPlayer.create(this, R.raw.sound_btn); 
```

# android - 如何将 jpeg 图像转换为 nv21 帧？

> ID：14070291
> 
> 赞同：2
> 
> 时间：2012-12-28T13:29:51.487
> 
> 标签：android

如何在 android 中将图像（jpeg，png）转换为 nv21/YCbCr 格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T03:52:30.720

这就是我使用的：

```
static inline int _CLAMP(int x) {
    unsigned y;
    return !(y=x>>8) ? x : (0xff ^ (y>>24));
}

void rgbtoyuv(unsigned char * s_ptr,unsigned char* y_ptr, unsigned char* c_ptr, int width, int height) {

int i,j,r,g,b,y,u,v;
for(i=0;i<height;i++)
  for(j=0;j<width;j++) {
    r=*s_ptr++;
    g=*s_ptr++;
    b=*s_ptr++;
    s_ptr++;
    y=((77*r+150*g+29*b+128)>>8);
    *y_ptr++=_CLAMP(y);
    if(i%2 && j%2) {
      u=((-43*r-85*g+128*b+128)>>8)+128;
      v=((128*r-107*g-21*b+128)>>8)+128;
      *c_ptr++=_CLAMP(v);
      *c_ptr++=_CLAMP(u);
    }
  }
}
void Java_nativeBitmaptoYUV(JNIEnv* env, jobject obj, jobject bitmap, jint w, jint h,jbyteArray jdest) {
  char *src=0;
  jboolean isCopy;
  char* buffer = (*env)->GetByteArrayElements(env, jdest, &isCopy);
  AndroidBitmap_lockPixels(env, bitmap, (void**) &src);
  rgbtoyuv(src,buffer,buffer+w*h,w,h);
  AndroidBitmap_unlockPixels(env, bitmap);
  (*env)->ReleaseByteArrayElements(env, jdest, buffer, 0);
} 
```

# drupal-6 - 无法登录 Drupal 网站

> ID：14070293
> 
> 赞同：1
> 
> 时间：2012-12-28T13:30:06.497
> 
> 标签：drupal-6

由于某种我还没有发现的原因，我无法再登录我的 Drupal 网站。尝试这样做会导致加载我的用户页面（像往常一样），但它显示为好像我仍然是客人。我尝试登录的任何用户都是这种情况。密码没有问题。没有空白的死亡页面。一切都很好，除了登录无效：管理页面仍然被 403 禁止并且没有管理栏。有什么想法吗？我已经尝试清除缓存并修复会话表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:21:20.447

它得到了解决。一些聪明的人建议重新启动正在运行 Drupal 的 MySQL 服务器。这成功了，虽然我不明白为什么。

# android - onAttach() 从未在 DialogFragment 中调用

> ID：14070297
> 
> 赞同：5
> 
> 时间：2012-12-28T13:30:32.753
> 
> 标签：android, callback, android-fragments, android-dialog, android-dialogfragment

我尝试从`DialogFragment`. 有一个很好的例子，但他们不会`DialogFragment`从`Fragment`. [http://developer.android.com/guide/topics/ui/dialogs.html#PassingEvents](http://developer.android.com/guide/topics/ui/dialogs.html#PassingEvents)

所以这是我的代码：

```
public class EditDateDialogFragment extends DialogFragment {
    // Use this instance of the interface to deliver action events
    EditDateDialogListener mListener;

    /* The activity that creates an instance of this dialog fragment must
     * implement this interface in order to receive event callbacks.
     * Each method passes the DialogFragment in case the host needs to query it. */
    public interface EditDateDialogListener {
        public void onDialogPositiveClick(DialogFragment dialog);
        public void onDialogNegativeClick(DialogFragment dialog);
    }

    public static EditDateDialogFragment newInstance( int currentCategoryId ) {
        EditDateDialogFragment p = new EditDateDialogFragment();
        Bundle args = new Bundle();
        args.putInt("currentRecordId", currentCategoryId);
        p.setArguments(args);
        return p;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        mCurrentRecordId = getArguments().getInt("currentRecordId");
        super.onCreate(savedInstanceState);
    }

    public void onAttach(SherlockActivity activity) {

        super.onAttach(activity);

        try {
            // Instantiate the EditDateDialogListener so we can send events to the host
            mListener = (EditDateDialogListener) activity;
        } catch (ClassCastException e) {
            // The activity doesn't implement the interface, throw exception
            throw new ClassCastException(activity.toString() + " must implement EditDateDialogListener");
        }

    }

        @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        LayoutInflater inflater = LayoutInflater.from(getActivity());
        final View v = inflater.inflate(R.layout.fragment_dialog_edit_date, null);

        return new AlertDialog.Builder(getActivity()).setTitle("Set Date...").setView(v).setCancelable(true).setPositiveButton("Confirm", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                Log.d("", "Dialog confirmed");

                mListener.onDialogPositiveClick(EditDateDialogFragment.this);

            }
        }).setNegativeButton("Abort", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                Log.d("", "Dialog abort");
                dialog.cancel();
            }
        }).create();
    }
} 
```

在 RecordDetailFragment.java 中，我实现了接口并以这种方式创建了 EditDateDialogFragment 的新实例（只是重要部分）：

```
public class RecordDetailFragment extends SherlockFragment implements EditDateDialogFragment.EditDateDialogListener {
...
 DialogFragment editDateFragment = EditDateDialogFragment.newInstance( recordId );
             editDateFragment.show(getActivity().getSupportFragmentManager(), "EditDateDialogFrame");
@Override
    public void onDialogPositiveClick(DialogFragment dialog) {
        LOGD(TAG, "Overriden Dialog confirmed");
        //((EditDateDialogFragment) dialog).mDatePicker;

    }

    @Override
    public void onDialogNegativeClick(DialogFragment dialog) {
        // TODO Auto-generated method stub

    }
...
} 
```

现在永远不会调用`onAttach(SherlockActivity activity)`中的公共 void ，因为我创建了from a而不是 an ? 如何解决这个问题？ `EditDateDialogFragment``DialogFragment``Fragment``Activity`

更新：在 RecordDetailFragment 中，我将其插入 onCreate()

```
if (savedInstanceState != null) {
    EditDateDialogFragment dpf = (EditDateDialogFragment) getActivity().getSupportFragmentManager().findFragmentByTag("EditDateDialogFragment");
    if (dpf != null) {
        dpf.setListener((EditDateDialogListener) this);
    }
} 
```

我将 DialogFragment 的实例化更改为

```
 EditDateDialogFragment editDateFragment = EditDateDialogFragment.newInstance( recordId );
             editDateFragment.setListener((EditDateDialogListener) this);
             editDateFragment.show(getActivity().getSupportFragmentManager(), "EditDateDialogFragment"); 
```

请注意 EditDateDialogFragment 而不是 DialogFragment。我不确定如何更新对话框中的引用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-05-14T15:46:13.723

刚跳进同样的问题，解决方法很简单。而不是覆盖

```
public void onAttach(Context context) {} 
```

覆盖这个：

```
public void onAttach(Activity activity) {} 
```

现在一切都很好`DialogFragment`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-28T14:12:45.190

> 如何解决这个问题？

我猜你希望`RecordDetailFragment`实例表现得像`EditDateDialogListener`. `DialogFragment`如果是，那么您需要将其显式设置（并更新）作为侦听器：

```
DialogFragment editDateFragment = EditDateDialogFragment.newInstance( recordId );
editDataFragment.setListener(RecordDetailFragment.this);
editDateFragment.show(getActivity().getSupportFragmentManager(), "EditDateDialogFrame"); 
```

像这样`setListener()`的方法在哪里：`EditDialogFragment`

```
public void setListener(EditDateDialogListener listener) {
     mListener = listener;
} 
```

例如，当用户旋转手机时，将重新创建 Activity 及其片段，您需要重新设置侦听器以指向新创建的`RecordDetailFragment`实例（您可能需要使用`WeakReference`for `mListener`）。您可以[在此答案](https://stackoverflow.com/questions/14042495/dialogfragment-retaining-listener-after-screen-rotation/14044934#14044934)中找到类似的内容（您将在 中查找两个片段`onCreate`）。

**编辑**：在`onCreate`方法中`Activity`：

```
if (savedInstanceState != null) {
    RecordDetailFragment df = (RecordDetailFragment) getSupportFragmentManager().findFragmentByTag("rdf"); // "rdf" is the tag used when you add the RecordDetailFragment to the activity
    EditDateDialogFragment s = (EditDateDialogFragment) getSupportFragmentManager().findFragmentByTag("tag"); // "tag" is the string set as the tag for the dialog when you show it
    if (s != null) {
                   // the dialog exists so update its listener
        s.setListener(df);
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-06-16T09:15:30.000

在 onCreateDialog 的某处将 mListener 转换为 getActivity()：

```
try {
    mListener = (EditDateDialogListener) getActivity();
} catch (Exception e) {
    throw new ClassCastException(getActivity().toString()
            + " must implement EditDateDialogListener");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-18T20:11:53.380

一种更“现代”的方法是使用新的[Fragment Result API](https://developer.android.com/guide/fragments/communicate#kotlin)。

在片段 A（父）onCreate 上添加结果侦听器：

```
override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)

    childFragmentManager.setFragmentResultListener("requestKey", this) { key, bundle ->
        val result = bundle.getString("bundleKey")
    }

} 
```

无论您需要，在子片段 B 上设置结果（例如，在按钮单击侦听器上）：

```
button.setOnClickListener {
    val result = "resultSample"

    setFragmentResult("requestKey", bundleOf("bundleKey" to result))
} 
```

有关文档的更多信息：[https ://developer.android.com/guide/fragments/communicate#kotlin](https://developer.android.com/guide/fragments/communicate#kotlin)

# php - PHP memcached 对包含特殊字符的值给出警告“无法压缩值”

> ID：14070298
> 
> 赞同：3
> 
> 时间：2012-12-28T13:30:33.230
> 
> 标签：php, memcached

我有 php memcached 2.0.1 和 libmemcached 1.0.8。

我启用了压缩。当我尝试设置一些包含哈希 (#) 的值时，php memcached 会抛出警告

> Memcached::set(): 无法压缩值

当我删除哈希时，不会出现问题。这在 php memcache 中没有发生。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:34:49.897

键不得包含控制字符或空格。请阅读这个：

[https://github.com/memcached/memcached/blob/master/doc/protocol.txt#LC41](https://github.com/memcached/memcached/blob/master/doc/protocol.txt#LC41)

如果这没有帮助，那么为什么不能在缓存密钥上应用一些加密逻辑（例如“MD5”）并使用它？

# google-maps - 谷歌地图以西里尔字母返回城市

> ID：14070301
> 
> 赞同：0
> 
> 时间：2012-12-28T13:30:57.163
> 
> 标签：google-maps

我想将一些城市从拉丁文翻译成西里尔文，并想使用谷歌地图。

我正在尝试这种方式：

[http://maps.googleapis.com/maps/api/geocode/json?address=Moskau&sensor=false&hl=ru&oe=utf-8](http://maps.googleapis.com/maps/api/geocode/json?address=Moskau&sensor=false&hl=ru&oe=utf-8)

问题是我只收到拉丁文的回复。怎么可能变成西里尔文的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T13:47:37.470

您需要指定`language`参数：

[http://maps.googleapis.com/maps/api/geocode/json?address=Moskau&sensor=false&oe=utf-8&language=ru](http://maps.googleapis.com/maps/api/geocode/json?address=Moskau&sensor=false&oe=utf-8&language=ru)

# python - thrift hbase 客户端 - 支持过滤器和协处理器

> ID：14070303
> 
> 赞同：4
> 
> 时间：2012-12-28T13:31:03.290
> 
> 标签：python, hbase, thrift

可悲的是，我的 hbase 客户端语言是 Python，我现在使用的是基于 thrift AFAIK 的happybase。我知道到目前为止，thrift 仍然不支持过滤器、协处理器（如果我在这里错了，请纠正我）。有人可以指出我可以跟踪计划/进度的任何 Jira 项目（如果有的话）吗？我唯一能找到的是来自“Hbase in Action”：

*   “Thrift 服务器匹配新的 Java API”： [https ://issues.apache.org/jira/browse/HBASE-1744](https://issues.apache.org/jira/browse/HBASE-1744)

*   “从 Thrift 提供端点协处理器”： [https ://issues.apache.org/jira/browse/HBASE-5600](https://issues.apache.org/jira/browse/HBASE-5600)

第一个似乎没有覆盖过滤器，第二个已经很长时间没有更新了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T14:26:27.360

通过 Thrift 支持过滤器。这是一个 HappyBase 示例：

```
table = connection.table("mytable")
g = table.scan(filter="SingleColumnValueFilter ('f', 'column1', =, 'substring:text')")
for key, data in g:
    print data 
```

另请查看[Thrift 书籍](http://hbase.apache.org/book/thrift.html)以获取有关各种过滤器及其配置的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T02:25:18.067

> 家庭过滤器
> 
> 说明：此过滤器采用比较运算符和比较器。它使用比较运算符将每个限定符名称与比较器进行比较，如果比较返回 true，则返回该列中的所有键值
> 
> 语法：QualifierFilter (, '')
> 
> 示例：“QualifierFilter (=, 'Column1')”

我认为这是一个错误

# ruby-on-rails - 在Haml中删除块中的空格

> ID：14070308
> 
> 赞同：0
> 
> 时间：2012-12-28T13:31:56.053
> 
> 标签：ruby-on-rails, haml

我有这个：

```
= link_to user_path(f.object.user) do
  %span.hourly-rate>= f.object.user.hourly_rate.to_currency
  \/hour 
```

呈现为：

```
<a href="/users/44"><span class='hourly-rate'>$16</span>/hour
</a> 
```

关闭标签位于单独的行上。当有下划线时（例如悬停时），这会导致链接看起来很有趣

![下划线用于一个字符太长](../Images/2d50375548e5da5c2ea74bc357a69e82.png)

解决方案是让标记看起来像：

```
<a href="/users/44"><span class='hourly-rate'>$16</span>/hour</a> 
```

但我还没有在 Haml 中找到这样做的方法。如果可能的话，我宁愿继续使用块形式`link_to`（我想不使用块会导致代码更加混乱，但此时我对任何事情都持开放态度）。

**切线**`:ugly`：我想如果我使用Haml 选项，这将得到解决。我`Haml::Template.options[:ugly] = true`的`config/environments/development.rb`,`haml-rails`我的 Gemfile 中有（我知道它不包括`:ugly`，但值得一提），我有一个初始化器；

```
# config/initializers/haml.rb
Haml::Template.options[:format] = :html5
Haml::Template.options[:ugly] = true 
```

...但是代码仍然不难看:(有什么想法为什么不呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:12:53.643

如果您可以接受包含在另一个内容中的内容`div`，则可以使用以下方法：

```
= link_to user_path(f.object.user) do
  %div<>
    %span.hourly-rate>= f.object.user.hourly_rate.to_currency
    \/hour 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T06:00:35.193

javascript 使用 span 来获取它的值（在这种情况下，是用户的每小时费率）——它根本没有用于 CSS。

因此，我最终删除了跨度并将用户的小时费率添加为`data-`单独字段的属性。所以链接的最终标记是

```
= link_to f.object.user.hourly_rate.to_currency + "/hour", user_path(f.object.user) 
```

# c# - 为什么 Graphics.DrawImage 会裁剪我的图像的一部分？

> ID：14070311
> 
> 赞同：9
> 
> 时间：2012-12-28T13:32:18.877
> 
> 标签：c#, graphics, gdi+, drawimage

如果您考虑下图，它是一个相当基本的图标，大小为 32x32。图标周围是一个透明的矩形，虽然我在测试时用纯色填充了四个角。

![源图像](../Images/dbb2bede4c134042366cfb75c5d2645a.png)

现在考虑这段代码，它只是简单地绘制图像，但规模更大：

```
protected override void OnPaint(PaintEventArgs e)
{
  base.OnPaint(e);

  e.Graphics.InterpolationMode = InterpolationMode.NearestNeighbor;
  e.Graphics.DrawImage(Properties.Resources.icon_32a, new RectangleF(0, 0, 512, 512), new RectangleF(0, 0, 32, 32), GraphicsUnit.Pixel);
} 
```

请注意，我正在绘制完整的图像，我并没有试图以任何方式裁剪它，只是放大它。

最后，这是测试给我的输出：

![绘制示例](../Images/65f58b66dc3a1969dd80fdfa251fbe5c.png)

注意到问题了吗？顶行和左列中的一半像素已经消失。如果我然后尝试在上面覆盖一个网格，它看起来很糟糕，因为网格正确对齐，但图像不是。即使只是将大小翻倍至 64，64 也会引入此第一行/列裁剪。

请注意，我还尝试偏移目标矩形，以防它在 0,0 之前绘制，但事实并非如此。

我也尝试过使用不同的插值模式，但据我所知，由于令人头疼的模糊，像素仍然被裁剪，所以我不相信这是由于插值模式造成的。

我也尝试使用不同的图形模式，但除了它似乎没有帮助之外，我还是需要坚持使用像素。

出于好奇，我再次尝试使用 96dpi 的新图像副本并获得相同的效果，所以我认为这不是源图像的分辨率。

紧紧抓住吸管并使用`Rectangle`而不是`RectangleF`也没有效果。

谁能提供任何线索来解释为什么会出现这种明显的作物？

谢谢;

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-28T13:36:52.330

默认情况下[`PixelOffsetMode`](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.pixeloffsetmode.aspx)设置为`PixelOffsetMode.Half`：

> 指定像素在水平和垂直方向上偏移 -.5 个单位，以实现高速抗锯齿。

在您的情况下，原始图像中的半个像素是结果图像中的 8 个像素，这正是您所缺少的。

尝试将其设置为：~~`PixelOffsetMode.None`~~ `PixelOffsetMode.HighQuality`

```
protected override void OnPaint(PaintEventArgs e)
{
     base.OnPaint(e);

     e.Graphics.PixelOffsetMode = PixelOffsetMode.HighQuality;
     e.Graphics.InterpolationMode = InterpolationMode.NearestNeighbor;
     e.Graphics.DrawImage(Properties.Resources.icon_32a, new RectangleF(0, 0, 512, 512), new RectangleF(0, 0, 32, 32), GraphicsUnit.Pixel);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-20T12:33:22.560

只是覆盖了用户确认的回复，我自己尝试了一下，问题解决`PixelOffsetMode.HighQuality`了`none`。

C＃

```
e.Graphics.PixelOffsetMode = PixelOffsetMode.HighQuality; 
```

我的案例 c++ 管理：

```
e->graphics->PixelOffsetMode = System::Drawing::Drawing2D::PixelOffsetMode::HighQuality; 
```

# c++ - 在 Visual Studio 中的托管代码和非托管代码之间切换

> ID：14070315
> 
> 赞同：2
> 
> 时间：2012-12-28T13:32:33.757
> 
> 标签：c++, c, debugging, clr, fann

共有三个项目：

*   项目 A（我的项目，WPF .NET 4.5）
*   项目 B（带 CLR 的托管 C++（[FANN 库的 .NET 包装器](http://code.google.com/p/fanndotnetwrapper/)））
*   项目 C（用 C 制作的非托管项目，（[FANN 库](http://leenissen.dk/)））

在打开项目 A 的 Visual Studio 2012 中，我无法通过项目 B 进入项目 C。

项目 B 和 C 是免费和开源的，我已经成功构建了它们。

项目 A 引用了项目 B 的 DLL，如果找不到项目 C 的 DLL 文件，项目 A 将无法运行 - 所以我已将项目 C 的 DLL 复制并粘贴到项目中，并将“始终复制”设置为输出目录。

在调试过程中进入时，我只能访问项目 B 的源代码。我什至没有看到模块窗口中加载了我完全不理解的项目 C。如果没有包含项目 C 的 DLL，该项目将无法运行，并且当它被包含时，它不会加载，但所有调用都在工作，因此必须在某处加载它。

我试图将项目 C 的 PDB 文件包含到项目 A 的输出目录中，但没有成功，从项目 B 到项目 C 的函数调用仍然会被跳过并且永远不会进入。

注意：

*   仅我的代码已禁用
*   项目 C 以两种方式包含在项目 B 中 - 一个“lib”文件（在链接器设置中）和它在源代码中的“.h”文件被引用......我不知道这是否是问题，但是你可能会。

我知道必须有办法实现这一点，我拥有所有可用的源代码，但我不是 C 或 C++ 代码方面的专家，也不是调试它的专家。我尝试将所有各种项目 C 的文件从 bin 目录包含到项目 A 中，但无法使其正常工作。

感谢您的任何帮助或建议！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T13:36:10.177

如果您使用的是 Visual Studio，则必须显式启用调试非托管代码。你可以从

解决方案资源管理器 -> csproj -> 属性 -> 调试 -> 启用非托管代码调试

# javascript - $.ajax() 函数中的变量在函数外给出未定义的值

> ID：14070316
> 
> 赞同：1
> 
> 时间：2012-12-28T13:32:33.290
> 
> 标签：javascript, html, jquery

我正在使用 html5 制作网页。问题是我从一个 url 中获取一个 json 并在控制台上打印它的结果。我在函数中得到了预期的结果，但没有在函数之外得到它。即使变量是全局的。请看下面的代码

```
<script src="jquery-1.8.3.min.js"></script>

<script>
$(document).ready(function(){
    var result;
    $.ajax({
        type: 'GET',
        url: 'http://192.168.1.5:3333/abc.json',
        async: false,
        jsonpCallback: 'jsonCallback',
        contentType: "application/json",
        dataType: 'jsonp',
        success: function(data) {
            //var result = $(this).html(JSON.stringify(data));
            //console.log(JSON.stringify(data));
            result = JSON.parse(JSON.stringify(data));
            console.log(result); // Result : 1
        },
        error: function(e) {
            alert(e.message);
        }
    });

   console.log("here::"+result); // Result : 2
});
</script> 
```

我得到的结果是

```
 2  here:undefined
    1    object                     (json) 
```

我需要这个 json 来解析。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T13:35:50.000

文档对此非常清楚：

> 跨域请求和 dataType: "jsonp" 请求不支持同步操作。

基本上，这意味着您`async: false`根本没有被使用，这解释了这种行为。

也可以看看：[`jQuery.ajax()`](http://api.jquery.com/jQuery.ajax/)

# php - 反序列化不在生产服务器上运行，在本地主机上工作

> ID：14070322
> 
> 赞同：2
> 
> 时间：2012-12-28T13:33:01.147
> 
> 标签：php, serialization

我通过查询字符串传递序列化数据

```
$msg = $nos.' of '.$recordsExtracted.' records imported';
header('Location: ../import-to-master.php?msg='.serialize($msg)); 
```

我正在使用以下内容来捕获数据

```
if(isset($_GET['msg']))
{
    $msg=unserialize($_GET['msg']);
} 
```

在本地主机上，回`$msg`显消息时将显示在屏幕上。

但是在生产服务器上，虽然消息在 url 中可见

```
import-to-master.php?msg=s:23:"5 of 5 records imported"; 
```

回显`$msg`不显示任何内容。为了确保`$msg`正在处理，我在它后面附加了一个字符串

```
$msg .= 'sdage'; 
```

在刷新页面时，我在`sdage`页面上看到了。所以这意味着`unserialize`在服务器上不起作用。

我的第一个想法可能是生产服务器的 PHP 版本不支持`unserialize`，但版本是 5.2 支持`serialize`和`unserialize`

我想知道问题可能是什么。

**PS：**是的，我没有处理转义数据，但我现在的首要任务是解决当前问题，然后从查询字符串中获取安全输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:33:53.510

经过一系列的试验和错误，我解决了它

```
if(isset($_GET['msg']))
{
    $msg=unserialize(stripslashes($_GET['msg']));
} 
```

# javascript - 在 jquery mobile 中打开外部 HTML 片段作为弹出窗口

> ID：14070324
> 
> 赞同：2
> 
> 时间：2012-12-28T13:33:08.723
> 
> 标签：javascript, jquery, html, jquery-mobile

好的，我对 jquery 和 jquery mobile 的新手有点生疏，所以对我来说放轻松;)。好的，我正在使用 jquery mobile 创建一个移动网站，它有很多页面，所以我没有将所有页面保存在一个大型多页面模板中，而是将它们放在单独的页面模板中。我有一个菜单按钮，当单击它时会出现一个带有 listview 菜单的弹出窗口，这是可行的，但我必须将菜单放在每个页面模板中，但我宁愿将菜单保留在其自己的 html 文件中，甚至只是在dom 位于 jquery 移动页面结构之外，因此我不必在每个页面模板中重复代码。

当菜单位于自己的文件中时，如何将菜单加载到弹出窗口中？失败了，如何将 div 加载到不在 jquery 移动页面内的弹出窗口中？

我的按钮：

```
 <a href="#main-menu" data-rel="popup">Menu</a> 
```

我的列表视图菜单 html：

```
 <div data-role="popup" id="main-menu">
        <ul data-role="listview" data-divider-theme="b" data-inset="true">
            <li data-role="list-divider" role="heading">
                Menu
            </li>
            <li data-theme="c">
                <a href="#how-it-works" data-transition="slide">
                    How it Works
                </a>
            </li>
            <li data-theme="c">
                <a href="http://www.backuptoweb.co.uk/buy-now/levels.html" data-transition="slide">
                    Order Now
                </a>
            </li>
            <li data-theme="c">
                <a href="#faq" data-transition="slide">
                    FAQ
                </a>
            </li>
            <li data-theme="c">
                <a href="#help" data-transition="slide">
                    Help
                </a>
            </li>
            <li data-theme="c">
                <a href="http://www.backuptoweb.co.uk/support.html" data-transition="slide">
                    Support
                </a>
            </li>
            <li data-theme="c">
                <a href="http://www.backuptoweb.co.uk/" data-transition="slide">
                   Main Website
                </a>
            </li>
        </ul>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:05:03.637

我有完全相同的问题，我写了一些显示弹出窗口但部分呈现 CSS [编辑] 的东西，我又尝试了几次，我能够让它完美地呈现 CSS：

```
$('[data-role=page]').live('pageshow', function (event, ui) {

  $('#'+event.target.id).find('[id=main-menu]').load('menu.html', function(){
    $('#'+event.target.id).find('[id=main-menu]').trigger('create');
  });

}); 
```

顺便说一句，您的主 html 页面应包含 div 声明：

```
<div data-role="popup" id="main-menu"></div>
<a href="#main-menu" data-rel="popup">Menu</a> 
```

你的 menu.html 应该只包含 div 里面的内容：

```
<ul data-role="listview" data-divider-theme="b" data-inset="true">
<!-- .... listview content ... -->
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T13:50:29.803

在一般意义上，这是您如何将外部文件中的 html 加载到 div 中的方法，除此之外，我不太确定您正在尝试做什么：

```
$('#myDiv').load('somepath/somefile.html'); 
```

# nsmutablearray - 如何使用自定义对象对 NSMutableArray 进行排序？

> ID：14070326
> 
> 赞同：1
> 
> 时间：2012-12-28T13:33:22.233
> 
> 标签：nsmutablearray, sorting

我有一个带有对象“XX”的可变数组，我想根据对象“XX”中包含的变量对数组进行排序（见下面的对象结构）。

我想按 VALUE1、VALUE2 和 NAME 对数组进行升序排序。

有什么办法吗？

```
@interface XX:NSObject{

float VALUE1;
float VALUE2
NSString* NAME;

}

@end interface 
```

任何帮助，非常感谢！：-） 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:40:11.677

您需要使用的是一种叫做[Comparator 块](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/NSComparator)的东西。当你这样做时，这可以用来对你的数组进行排序

```
array sortUsingComparator: ^(id objA, id obj2){
   if(((XX*)objA).Value1 > ((XX*)obj2).Value1){
        return (NSComparisonResult)NSOrderedDescending;
   }else if(((XX*)objA).Value1 < ((XX*)obj2).Value1){
        return (NSComparisionResult)NSOrderedAscending;
   }else{
      //keep comparing here, because value 1 are equal
   }
   //sorting logic goes here, returning a (NSComparisonResult) type here
}]; 
```

# zend-framework - zf1：链式连接

> ID：14070336
> 
> 赞同：0
> 
> 时间：2012-12-28T13:33:51.817
> 
> 标签：zend-framework

我收到一个查询错误，我的问题是：我可以链接连接吗？

我的第一个连接是主表，但我的第二个连接是连接到主表的表。这是查询：

```
$query = $this->getDbTable()->select()
            ->from(array('ca' => 'contracts_allotment'),
                    array('id',
                        'contracts_rooms_id' => new Zend_Db_Expr("CONCAT(room_type_desc, '-', room_characteristics_desc)")
                        ))
            ->join(array('cr' => 'contracts_rooms'),
                    'ca.contract_rooms_id = cr.id',
                    array())
            ->join(array('rt' => 'room_types'),
                    'cr.room_id = rt.id',
                    array('room_type_desc'))
            ->join(array('rc' => 'room_characteristics'),
                    'cr.char_id = rc.id',
                    array('room_characteristics_desc'))
            ->where('contract_id = ?', $contractId);

        var_dump($this->getDbTable()->fetchAll($query));die; 
```

我越来越：

> 选择查询不能与另一个表连接”

错误来自`Zend/Db/Table/Select::assemble()`

这里有一些内部 assemble()：

```
 // Check each column to ensure it only references the primary table
   if ($column) {
       if (!isset($from[$table]) || $from[$table]['tableName'] != $primary) {
           var_dump($from[$table]['tableName'], $primary);die;
           require_once 'Zend/Db/Table/Select/Exception.php';
           throw new Zend_Db_Table_Select_Exception('Select query cannot join with another table');
       }
   } 
```

`var_dump()`印刷品：

> 字符串（10）“房间类型”字符串（19）“合同分配”

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:44:15.290

进行连接时不要忘记锁定表：

```
$query = $this->getDbTable()->select()
              ->setIntegrityCheck(false)
              ->from(array('ca' => 'contracts_allotment'),
                    array('id',
                        'contracts_rooms_id' => new Zend_Db_Expr("CONCAT(room_type_desc, '-', room_characteristics_desc)")
                        ))
              ->join(array('cr' => 'contracts_rooms'),
                    'ca.contract_rooms_id = cr.id',
                    array())
              ->join(array('rt' => 'room_types'),
                    'cr.room_id = rt.id',
                    array('room_type_desc'))
              ->join(array('rc' => 'room_characteristics'),
                    'cr.char_id = rc.id',
                    array('room_characteristics_desc'))
              ->where('contract_id = ?', $contractId); 
```

`->setIntegrityCheck(false)`至少应该给你一个新的错误。

# java - Apache POI 在阅读 XLSX 工作簿时抛出 IOException

> ID：14070340
> 
> 赞同：0
> 
> 时间：2012-12-28T13:34:05.727
> 
> 标签：java, apache-poi, inputstream, ioexception, xlsx

我正在尝试运行以下代码并得到一个`IOException`：

```
String cellText = null;
InputStream is = null;
try {
    // Find /mydata/myworkbook.xlsx
    is = new FileInputStream("/mydata/myworkbook.xlsx");
    is.close();

    System.out.println("Found the file!");

    // Read it in as a workbook and then obtain the "widgets" sheet.
    Workbook wb = new XSSFWorkbook(is);
    Sheet sheet = wb.getSheet("widgets");

    System.out.println("Obtained the widgets sheet!");

    // Grab the 2nd row in the sheet (that contains the data we want).
    Row row = sheet.getRow(1);

    // Grab the 7th cell/col in the row (containing the Plot 500 English Description).
    Cell cell = row.getCell(6);
    cellText = cell.getStringCellValue();

    System.out.println("Cell text is: " + cellText);
} catch(Throwable throwable) {
    System.err.println(throwable.getMessage());
} finally {
    if(is != null) {
        try {
            is.close();
        } catch(IOException ioexc) {
            ioexc.printStackTrace();
        }
    }
} 
```

在 Eclipse 中运行它的输出是：

```
Found the file!
Stream Closed
java.io.IOException: Stream Closed
    at java.io.FileInputStream.readBytes(Native Method)
    at java.io.FileInputStream.read(FileInputStream.java:236)
    at java.io.FilterInputStream.read(FilterInputStream.java:133)
    at java.io.PushbackInputStream.read(PushbackInputStream.java:186)
    at java.util.zip.ZipInputStream.readFully(ZipInputStream.java:414)
    at java.util.zip.ZipInputStream.readLOC(ZipInputStream.java:247)
    at java.util.zip.ZipInputStream.getNextEntry(ZipInputStream.java:91)
    at org.apache.poi.openxml4j.util.ZipInputStreamZipEntrySource.<init>(ZipInputStreamZipEntrySource.java:51)
    at org.apache.poi.openxml4j.opc.ZipPackage.<init>(ZipPackage.java:83)
    at org.apache.poi.openxml4j.opc.OPCPackage.open(OPCPackage.java:267)
    at org.apache.poi.util.PackageHelper.open(PackageHelper.java:39)
    at org.apache.poi.xssf.usermodel.XSSFWorkbook.<init>(XSSFWorkbook.java:204)
    at me.myorg.MyAppRunner.run(MyAppRunner.java:39)
    at me.myorg.MyAppRunner.main(MyAppRunner.java:25) 
```

异常来自以下行：

```
Workbook wb = new XSSFWorkbook(is); 
```

根据[XSSFWorkbook Java Docs](http://poi.apache.org/apidocs/org/apache/poi/xssf/usermodel/XSSFWorkbook.html)，这是一个有效的`XSSFWorkbook`对象构造函数，我没有看到任何“跳出”的东西表明我使用`InputStream`不正确。任何 POI 专家都可以帮助发现我哪里出错了吗？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T13:36:31.400

问题很简单：

```
is = new FileInputStream("/mydata/myworkbook.xlsx");
is.close(); 
```

您在将输出流传递给构造函数之前将其关闭，并且无法读取它。

只需在此处删除 is.close() 即可解决问题，因为它会在最后的 finally 语句中被清除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T13:36:10.317

你正在关闭流`is.close();`

然后使用它，在你使用它之前不要关闭它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T14:54:57.743

正如其他人所指出的那样，您正在关闭`InputStream`正在破坏的东西

但是，您真的不应该首先使用 InputStream！当直接给定 File 对象而不是通过 InputStream[时，POI 使用更少的内存。](http://poi.apache.org/spreadsheet/quick-guide.html#FileInputStream)

我建议您阅读[有关 File vs InputStream 的 POI 常见问题解答](http://poi.apache.org/spreadsheet/quick-guide.html#FileInputStream)，然后将您的代码更改为：

```
OPCPackage pkg = OPCPackage.open(new File("/mydata/myworkbook.xlsx"));
Workbook wb = new XSSFWorkbook(pkg); 
```

# perl - typeglob 别名

> ID：14070342
> 
> 赞同：4
> 
> 时间：2012-12-28T13:34:24.997
> 
> 标签：perl

好的，所以很容易创建对数组的引用......

```
my @a;
my $b=\@a;
#can now reference the same list of scalars from either @$b or @a 
```

但是我怎么能反过来呢？例如：

```
my $a=[1..4];
my @b;
#some magic happens here and now @b is an alias for @$a
@b=(6..10);
print "@$a\n";  #should print "6 7 8 9 10" 
```

我认为这会通过 typeglobs 发生，但那些只是让我望而却步。想法？

对哈希和数组做同样的事情也会很好。

编辑：这似乎可行，但它有点笨拙，因为它只是将匿名数组元素复制到“别名”，然后将自身重新指向数组：

```
my @b=@$a;
$a=\@b; 
```

有更好的想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T14:59:42.013

三种方式：

1.  重新混淆。

    5.22 添加了一个实验性功能，可以完全满足您的需求。

    ```
    use experimental qw( refaliasing );
    \my @B = $A; 
    ```

    5.26 添加了第二个实验功能，允许以下操作：

    ```
    use experimental qw( refaliasing declared_refs );
    my \@B = $A; 
    ```

    请注意，作为实验性功能，这些功能可能随时更改和删除。

2.  全局混叠

    Perl 将其符号表条目数据结构称为“type glob”，或简称为“glob”。可以将此数据结构中的条目设置为引用以命名该引用。

    ```
    local our @B;
    *B = $A;      # Sets the array slot of "B", @B. 
    ```

    请注意，我们必须使用包变量，因此该变量是全局可见的。

3.  [数据::别名](http://search.cpan.org/perldoc?Data::Alias)

    ```
    alias my @B = @$A; 
    ```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-28T15:32:41.483

perl 程序中的所有变量都存储在*命名空间*中。有两种类型的命名空间：

1.  *符号表*。它是一个全局哈希，存储全局变量的记录。
2.  *词法范围*。它是存储的匿名临时内存，不是特定的符号表，而是附加到程序的块中。它们存储我们只能在该程序块中看到的变量。

Typeglob 用于定义符号表的记录（变量、数组等），但不用于定义词法范围。因此，当您使用这部分代码时：

```
my @b;
*b = $a; 
```

你会得到的：

```
Name "main::b" used only once: 
```

这表明我们没有在符号表中定义记录 main::b，但我们可以使用修饰符“ **our** ”来做到这一点。因此，当你这样写时：

```
our @b;
*b = $a; 
```

我们可以获得对我们有用的结果，因为 *b 存储在符号表中，我们可以使用运算符 * typeglob。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-28T14:43:33.773

我想我明白了...

```
my $a=[1..4];
our @b;
*b=$a;
print "@b\n";
@b=(6..10);
print "@$a\n"; 
```

印刷：

```
1 2 3 4
6 7 8 9 10 
```

“我们的”对我来说仍然有点神秘......我想我有一些阅读要做......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T13:48:53.947

$a 和 @a 不是一回事。$a，当您第一次分配它时，它是对匿名数组的引用。它与@a 没有任何关系，@a 是一个数组（不是引用）。

$b = \@a # $b 持有对@a 的引用，但不持有对$a 的引用。

$a、@a、%a 都是不同的变量。所以，如果你有

我的@a = (1,2,3,4);

然后你声明

我的$a;

$a 不包含对@a 的引用；

变量按其类型保存在符号表中；标量、散列、数组等。这样你就可以拥有$a、@a、%a、&a ...并且它们不会相互冲突。

重点是

```
#some magic happens here and now @b is an alias for @$a 
```

不会发生。它仍然指向内存中存储 @a 的区域，这与存储 $a 的位置不同。

# assembly - 微程序汇编器 (jasmin)

> ID：14070345
> 
> 赞同：-1
> 
> 时间：2012-12-28T13:34:49.870
> 
> 标签：assembly, nasm, jasmin-x86

这个命令在汇编中做了什么？

```
mov ebx, [eax+ecx*4+12] 
```

它是否与以下内容相同？

```
MOV EBX,ECX
ADD EBX,EBX ; *2
ADD EBX,EBX ; *4
ADD EBX,EAX
ADD EBX,12
MOV EBX,[EBX] 
```

如果是，为什么他们在***Jasmin***中不给出相同的结果时`eax = 100h`, `ebx = 0`,`ecx = 100h`

结尾。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:34:21.583

假设我们有这些命令

```
mov eax, 0x1234 ; 1234h
mov ebx, 0
mov ecx, 0x1234 ; 1234h
MOV EBX,ECX ; ebx = 0x1234
ADD EBX,EBX ; *2
ADD EBX,EBX ; *4
ADD EBX,EAX ; ebx = 0x5B04
ADD EBX,12  ; ebx = 0x5B10
MOV EBX, [EBX] ; Error out of range

; Or
mov ebx, [eax+ecx*4+12] ; => mov ebx, [0x1234+0x1234*4+12] 
```

=> 它实际上是***mov ebx, [0x5B10]***其中***0x5B10***是内存中的地址号，但在我的情况下，最大地址是***0xFFC < 0x5B10***，所以它超出了范围，所以出现的结果是最后一个命令的结果

所以通过使用像**0x14**这样更小的值，我们会得到相同的结果

```
mov eax, 0x14 ; eax = 0x14
mov ebx, 0    ; ebx = 0
mov ecx, 0x14 ; ecx = 0x14
MOV EBX,ECX   ; ebx = 0x14
ADD EBX,EBX   ; *2
ADD EBX,EBX   ; *4
ADD EBX,EAX   ; ebx = 0x64
ADD EBX,12    ; ebx = 0x70
MOV EBX, [EBX] ; => mov ebx, [0x70]

; Or
mov ebx, [eax+ecx*4+12] ; => mov ebx, [0x14+0x14*4+12] => mov ebx, [0x70] 
```

我们得到两种情况或方法：

```
eax = 0x14
ebx = 0   => its 0 because the address 0x70 in the memory is empty = 0x0000
ecx = 0x14 
```

**但是**如果我们在最后一行之前添加类似

```
mov [0x70], 0x111 
```

我们将进入***ebx 0x111***

# c# - 用户会话 ID 作为 Ajax 调用中的参数

> ID：14070346
> 
> 赞同：4
> 
> 时间：2012-12-28T13:34:51.550
> 
> 标签：c#, asp.net, ajax, jquery, httphandler

我创建了一个**HttpHandler**，我将在**jquery-Ajax**调用中使用它。

这个**HttpHandler**将访问数据库并检查与**当前用户**相关的内容。

用户被认为是使用 Session 登录的，并带有一个名为**user_id**的属性。

```
Session["user_id"] = userId; 
```

我试图在**HttpHandler中检索此****Session** ，但这似乎不起作用。

 **所以我考虑将 user_id 作为**参数**发送。

```
 var user_id = //Retrieved in some way...
    $.ajax({
        url: 'QuestionRate.ashx?id=user_id',
        success: function (msg, status, xhr) {
            alert(msg);
        },
        error: function () {
            alert(msg);
        }
    }); 
```

但这似乎是个坏主意，任何会阅读代码的人都可以简单地使用他想要的 id 访问 Handler。

那么在这种情况下我能做些什么呢？我希望处理程序获取用于数据库访问的 user_id，但我想确保这个 user_id 是登录用户的实际 id。有没有办法在Handler中访问Session？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T13:42:47.680

使用 ajax 调用传递会话 ID 听起来不太好。

您应该使用标记[IReadOnlySessionState](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.ireadonlysessionstate.aspx)`HttpContext.Current.Session`接口标记您的处理程序，并通过实例以只读方式访问会话。

* * *

代码示例：

```
public class FooHandler : IHttpHandler, IReadOnlySessionState 
{
    public bool IsReusable
    {
        get { return false; }
    }

    public void ProcessRequest(HttpContext context)
    {
        string user_id = context.Session["user_id"].ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T13:43:14.357

使您的处理程序实现**[`IRequiresSessionState`](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.irequiressessionstate.aspx)**，这将通知 ASP.NET 您的处理程序使用会话状态。然后，从客户端发送的会话 cookie 将被处理程序识别，您可以在服务器端访问它，例如在任何其他 aspx 页面中。

您也可以**`IReadOnlySessionState`**用于只读会话访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T13:44:03.347

您要做的是将其转换为 a`POST`并将其添加到`POST`数据中。然后，当与 SSL 密钥结合使用时，`POST`数据将自动加密。所以你可以尝试的是：

```
var user_id = //Retrieved in some way...
$.ajax({
    type: "POST"
    url: 'QuestionRate.ashx',
    data: { userid: user_id }
    success: function (msg, status, xhr) {
        alert(msg);
    },
    error: function () {
        alert(msg);
    }
}); 
```

然后在您的 HTTP 处理程序中，您可以使用该`Request`对象来完成它。

[jQuery AJAX API](http://api.jquery.com/jQuery.ajax/)**

# postgresql - 从 Postgres 中提取 XML 元素值

> ID：14070348
> 
> 赞同：2
> 
> 时间：2012-12-28T13:35:02.417
> 
> 标签：postgresql, xpath, xml-parsing, xquery, plpgsql

鉴于：

```
CREATE TABLE xmltest(xtxt xml); 
```

和：

```
INSERT INTO xmltest values ('<EMP><NAME>Mike</NAME><HIREDATE>12-FEB-96</HIREDATE></EMP><EMP><NAME>Bob</NAME><HIREDATE>13-AUG-97</HIREDATE></EMP><EMP><NAME>Paul</NAME><HIREDATE>17-JUN-94</HIREDATE></EMP><EMP><NAME>Jim</NAME><HIREDATE>01-JUN-94</HIREDATE></EMP>'); 
```

使用 Postgres 9.2 的基本功能，我将如何编写只返回员工姓名的 SELECT 语句，结果集中每行 1 个姓名？还是我必须在 PL/PGSQL 中编写一个函数才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T14:25:16.710

您可以使用该函数将感兴趣的字段提取到一个数组中`xpath`，然后从那里您可以使用`unnest`内置函数将该数组拆分为多行：

```
SELECT unnest(xpath('//name', xtxt))
FROM   xmltest; 
```

[（从这个问题](https://stackoverflow.com/questions/3650391/shredding-xml-in-postgresql)稍微借用）

# jquery - jquery .each() 和 $.post() 仅适用于 1 个元素

> ID：14070349
> 
> 赞同：1
> 
> 时间：2012-12-28T13:35:06.930
> 
> 标签：jquery, ajax

我想抓住我所有的班级“保留”（有表格单元格）。我想通过 jquery $.post() 将每个单元格的 ID 发送到一些 php 方法中。这是我的 JQuery 代码：

```
var cell_id;
$('.reserved').each(function()
{
    cell_id = $(this).attr('id');
    $.post("/controller/method/",{id: cell_id},function(data,status,xhr)
    {
        if(status=="success")
        {
        }
    })
}); 
```

如果只有一个单元格保留了类，它可以完美地工作，但是当有多个时 - 它根本不起作用！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T13:38:36.310

您有一个名为的共享全局变量`cell_id`，它似乎没有任何用途。摆脱它：

```
$('.reserved').each(function()
{
    $.post("/controller/method/",{id: $(this).attr('id')},function(data,status,xhr)
    {
        if(status=="success")
        {
        }
    })
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T13:40:38.540

如果您只想使用一次调用发送所有 id 值，则需要一种不同的方法：

```
var cells = [];

$('.reserved').each(function() {
    cells.push(this.id);
}
$.post("/controller/method/",{ids: cells},function(data,status,xhr) {
    if(status=="success")
    {
    }
}); 
```

这将构建一个 id 值列表，然后您可以将其发送到 PHP（我假设您正在使用它），就像`$_POST['ids']`使用单个调用一样；AJAX requesta 很昂贵，因此最好将它们保持在最低限度。

# linux-kernel - Linux 工作队列是如何工作的？

> ID：14070350
> 
> 赞同：1
> 
> 时间：2012-12-28T13:35:08.460
> 
> 标签：linux-kernel, linux-device-driver

我是 Linux 设备驱动程序编写的新手，我正在尝试制作一个处理 UART 芯片的设备驱动程序。为此，我决定使用工作查询作为我的下半部分处理，因为在处理从 UART 芯片获得的数据时，我必须使用一些信号量。之前在中断中安排的工作队列处理程序现在被执行，并且在执行期间它将在信号量处休眠。在此期间，再次调用中断处理程序并调度相同的工作队列处理程序。工作队列处理程序会在第一次执行完成之前再次执行吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T21:06:18.920

工作队列的默认行为是允许在不同的 CPU 上并发执行。有一个标志 WQ_NON_REENTRANT 可以改变这种行为。更多信息可以在这篇文章中找到[http://lwn.net/Articles/403891/](http://lwn.net/Articles/403891/)

但似乎在最近的内核中，工作队列默认是不可重入的 - 请参阅 [http://lwn.net/Articles/511190](http://lwn.net/Articles/511190)

# c# - ServiceStack 支持反向路由吗？

> ID：14070354
> 
> 赞同：6
> 
> 时间：2012-12-28T13:35:41.520
> 
> 标签：c#, routing, servicestack, reverse

在 REST 之后，建议 API 是可发现的并且应该是相互链接的。

ServiceStack 是否支持任何类型的反向路由？我正在寻找类似`Url.RouteLink`ASP MVC 的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-29T08:38:52.913

这里陈述了一些混合的概念。

1.  在尝试遵守 REST 的过程中，您希望将 URI 嵌入到您的响应中。
2.  如何最好地在您的响应中嵌入 URI。您假设应该采用“反向路由”机制。

### REST 风格与强类型

我想在这里明确提到一个并不意味着另一个。一方面，您希望遵循 REST 架构（使用您正在构建的任何系统），另一方面，您希望遵循使用类型化 API 的强类型化实践，在这种情况下生成外部 URI你的 API。这些风格有些不同，因为 REST 不提倡类型化 API，而是更喜欢绑定到 API 的外部 URI 表面和松散类型的 Content-Type。虽然强类型语言会建议绑定到类型化 API，例如[端到端类型化 API](https://github.com/ServiceStack/ServiceStack/wiki/New-Api) ， ServiceStack 支持开箱即用。

### 在 ServiceStack 中生成强类型 URI

ServiceStack 中没有明确的 ASP.NET MVC“反向路由”概念/功能，但您可以重用[.NET 服务客户端](https://github.com/ServiceStack/ServiceStack/wiki/C#-client)用于生成和使用用户定义的自定义路由的相同功能。要使用它，您需要在 DTO 上指定您的自定义路由（即使用`[Route]`属性而不是 AppHost 中的流畅 API），例如：

```
[Route("/reqstars/search", "GET")]
[Route("/reqstars/aged/{Age}")]
public class SearchReqstars : IReturn<ReqstarsResponse>
{
    public int? Age { get; set; }
}

var relativeUrl = new SearchReqstars { Age = 20 }.ToUrl("GET");
var absoluteUrl = EndpointHost.Config.WebHostUrl.CombineWith(relativeUrl);

relativeUrl.Print(); //=  /reqstars/aged/20
absoluteUrl.Print(); //=  http://www.myhost.com/reqstars/aged/20 
```

或者，如果您只想要绝对网址，您可以使用`ToAbsoluteUri`Extension 方法：

```
var absoluteUrl = new SearchReqstars { Age = 20 }.ToAbsoluteUri(); 
```

# javascript - 当没有选择其中的单选按钮时，如何将表格单元格的背景颜色设置为红色？

> ID：14070366
> 
> 赞同：-3
> 
> 时间：2012-12-28T13:36:23.663
> 
> 标签：javascript, jquery

我是 JavaScript 新手，尤其是 jQuery，需要一些帮助。

我需要编写一个脚本来验证是否选择了单选按钮。如果没有选择任何单选按钮，我希望它们所在的表格单元格以红色突出显示以提醒用户注意它。

```
<table>
  <tr><td><input type="radio"/></td><td>value 1</td></tr>
  <tr><td><input type="radio"/></td><td>value 2</td></tr>
  <tr><td><input type="radio"/></td><td>value 3</td></tr>
</table>
<input type="submit"/> 
```

**编辑**

我只希望突出显示包含单选按钮的单元格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:42:23.543

```
var checked = false;

$('input:radio').each(function(){
    if($(this).prop('checked')){
        checked = true;
    }
});

if(!checked){
    $('table').css('background','red');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T14:35:54.857

您可以只使用 .css() 函数

```
$('input[type=submit]').click(function(){ // <-- this assuming these aren't inside a form
// if it is then do this inside the submit function
// $('yourform').submit(function(){
    $('td').css('background-color',function(){
        return $('input[type=radio]:checked',this).length === 0 ? 'red' : '';
    });
}); 
```

***[小提琴](http://jsfiddle.net/wirey00/Hydt7/)***

您可以使用[:has](http://api.jquery.com/has-selector/)或[.has()](http://api.jquery.com/has/)选择器过滤掉带有输入的 td

```
$('input[type=submit]').click(function() {
// or $('td').has(input[type=radio])
    $('td:has(input[type=radio])').css('background-color', function() {
        return $('input[type=radio]:checked', this).length === 0 ? 'red' : '';
    });
});​ 
```

***[小提琴](http://jsfiddle.net/wirey00/LHhzL/)***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T13:44:59.417

```
$(document).on("click", "input[type='submit']", function(){
    if($("input[type='radio']:checked").size() === 0){
      $("table").css("background-color", "red");
    }else{
      $("table").css("background-color", "white");  
    }
});​ 
```

**[例子](http://jsfiddle.net/pHUpm/3/)**

**编辑**：

仅对于具有输入的表行而不是整个表，请使用以下内容：

```
$(document).on("click", "input[type='submit']", function(){
    if($("input[type='radio']:checked").size() === 0){
        $("table tr").has("input").css("background-color", "red");
    }else{
        $("table tr").has("input").css("background-color", "white");  
    }
});​ 
```

**[更新示例](http://jsfiddle.net/pHUpm/4)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T13:46:20.437

1）首先检查是否选择了任何单选按钮。

```
var any_checked = false;

$("input:radio").each(function() {
    if ($(this).attr("checked") == 0) {
        any_checked = true;
    }
});​ 
```

2）给表格一些ID，说`id="mytable"` 现在检查的值`any_checked`，如果它是假的，那么没有选择单选按钮，所以通过使单元格变为红色来抛出错误。

```
$('#mytable').css('backgroundColor', 'red'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-30T17:14:18.217

我确实以这种方式解决了它：

```
var IsValid = $("input[name=foo]:checked").length > 0;
$('input[name=foo]').parent().toggleClass('error', !IsValid); 
```

# ruby-on-rails - 如何从 Rails 中的名称字符串实例化类？

> ID：14070369
> 
> 赞同：83
> 
> 时间：2012-12-28T13:36:47.777
> 
> 标签：ruby-on-rails, ruby-on-rails-3, string, class, instantiation

**我们如何从 Ruby-on-Rails 中的名称字符串实例化类？**

例如，我们在数据库中有它的名称，格式为“ClassName”或“my_super_class_name”。

我们如何从中创建对象？

**解决方案：**

自己找了，没找到，就在这里。 [Ruby-on-Rails API 方法](http://api.rubyonrails.org/classes/String.html#method-i-constantize)

```
name = "ClassName"
instance = name.constantize.new 
```

它甚至可以不格式化，我们可以使用字符串方法*.classify*

```
name = "my_super_class"
instance = name.classify.constantize.new 
```

当然，也许这不是非常“Rails 方式”，但它解决了它的目的。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-12-28T13:41:31.103

```
klass = Object.const_get "ClassName" 
```

关于类方法

```
class KlassExample
    def self.klass_method
        puts "Hello World from Class method"
    end
end
klass = Object.const_get "KlassExample"
klass.klass_method

irb(main):061:0> klass.klass_method
Hello World from Class method 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2015-03-06T23:53:38.273

其他人也可能正在寻找一种在找不到类时不会引发错误的替代方法。`safe_constantize`就是这样。

```
class MyClass
end

"my_class".classify.safe_constantize.new #  #<MyClass:0x007fec3a96b8a0>
"omg_evil".classify.safe_constantize.new #  nil 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-02-23T11:11:26.023

您可以通过以下方式简单地转换字符串并从中初始化一个类：

```
klass_name = "Module::ClassName"
klass_name.constantize 
```

初始化一个新对象：

```
klass_name.constantize.new 
```

我希望这会有所帮助。谢谢！

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-11-18T16:25:44.140

我很惊讶没有人在他们的回应中考虑安全和黑客攻击。可能甚至间接来自用户输入的任意字符串的实例化是在自找麻烦和黑客攻击。除非我们确定字符串受到完全控制和监控，否则我们都应该/必须将其列入白名单

```
def class_for(name)
  {
    "foo" => Foo,
    "bar" => Bar,
  }[name] || raise UnknownClass
end

class_for(name_wherever_this_came_from).create!(params_somehow) 
```

如何在没有白名单的情况下任意知道适当的参数将是一个挑战，但你明白了。

# video-capture - 如何使用 JavaCV 从网络摄像头捕获和录制视频

> ID：14070370
> 
> 赞同：3
> 
> 时间：2012-12-28T13:36:49.123
> 
> 标签：video-capture, javacv

我是 JavaCV 的新手，我很难找到关于我感兴趣的主题的不同问题的好教程。我已经成功地从我的网络摄像头实现了某种实时视频流，但问题是我使用我在网上找到的这段代码：

```
@Override
    public void run() {

        FrameGrabber grabber = new VideoInputFrameGrabber(0); // 1 for next
                                                                // camera
        int i = 0;
        try {
            grabber.start();
            IplImage img;
            while (true) {
                img = grabber.grab();
                if (img != null) {
                    cvFlip(img, img, 1);// l-r = 90_degrees_steps_anti_clockwise
                    cvSaveImage((i++) + "-aa.jpg", img);
                    // show image on window
                    canvas.showImage(img);
                } 
```

这会导致多个 jpg 文件。

我真正想做的是捕获我的网络摄像头输入，并在显示它的同时将其保存在适当的视频文件中。我了解`FFmpegFrameRecorder`但不知道如何实现它。另外我一直想知道视频文件格式的不同选项是什么，因为`flv`可能对我更有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T12:26:59.763

这真是一段旅程。还有一些事情我不确定它们背后的含义，但这里有一个使用 JavaCV 从网络摄像头捕获和录制视频的工作示例：

```
import com.googlecode.javacv.CanvasFrame;
import com.googlecode.javacv.FFmpegFrameRecorder;
import com.googlecode.javacv.OpenCVFrameGrabber;
import com.googlecode.javacv.cpp.avutil;
import com.googlecode.javacv.cpp.opencv_core.IplImage;

public class CameraTest {

    public static final String FILENAME = "output.mp4";

    public static void main(String[] args) throws Exception {
        OpenCVFrameGrabber grabber = new OpenCVFrameGrabber(0);
        grabber.start();
        IplImage grabbedImage = grabber.grab();

        CanvasFrame canvasFrame = new CanvasFrame("Cam");
        canvasFrame.setCanvasSize(grabbedImage.width(), grabbedImage.height());

        System.out.println("framerate = " + grabber.getFrameRate());
        grabber.setFrameRate(grabber.getFrameRate());
        FFmpegFrameRecorder recorder = new FFmpegFrameRecorder(FILENAME,  grabber.getImageWidth(),grabber.getImageHeight());

        recorder.setVideoCodec(13);
        recorder.setFormat("mp4");
        recorder.setPixelFormat(avutil.PIX_FMT_YUV420P);
        recorder.setFrameRate(30);
        recorder.setVideoBitrate(10 * 1024 * 1024);

        recorder.start();
        while (canvasFrame.isVisible() && (grabbedImage = grabber.grab()) != null) {
            canvasFrame.showImage(grabbedImage);
            recorder.record(grabbedImage);
        }
        recorder.stop();
        grabber.stop();
        canvasFrame.dispose();
    }
} 
```

完成这项工作对我来说有点困难，所以除了那些可能有同样问题的人之外，如果您遵循有关如何在 Windows 7/64 位上设置 JavaCV 的官方指南并希望使用上面的代码捕获视频，您应该创建在`C:\`:中创建一个新目录，然后从官方指南中告诉您下载`C:\ffmpeg`的版本中提取文件。`ffmped`然后你应该添加`C:\ffmpeg\bin`到你的`Enviorment variable PATH`，仅此而已。关于这一步，所有学分都[归于 karlphillip](https://stackoverflow.com/users/176769/karlphillip)

和他的帖子[在这里](https://stackoverflow.com/questions/10790613/javacv-unsatisfiedlinkerror-in-windows-7)

# android - Android 屏幕方向意图

> ID：14070375
> 
> 赞同：0
> 
> 时间：2012-12-28T13:37:13.290
> 
> 标签：android, android-intent, screen-orientation

我的 Android 应用程序被配置为仅在横向模式下工作，因此我想将由我的应用程序的意图创建的电子邮件客户端也设置为横向模式。是否可以？

这是我的代码：

```
Intent i = new Intent(Intent.ACTION_SEND);
i.setType("text/xml");
i.putExtra(Intent.EXTRA_EMAIL, new String[]{"example@mail.com"});
i.putExtra(Intent.EXTRA_SUBJECT, "Feedback");
i.putExtra(Intent.EXTRA_TEXT, "");
try {
    Intent chooser_intent = Intent.createChooser(i, "Send e-mail");  
    startActivity(chooser_intent);
} catch (android.content.ActivityNotFoundException ex) {
    Toast.makeText(getApplicationContext(), "E-mail client not found", Toast.LENGTH_LONG).show();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T14:51:14.843

如果 Activity 在您的应用程序外部，则无法指定 Activity 的方向。如果 Activity 在您的应用程序中是本地的（即在您自己的清单文件中定义） - 那么您可以在那里指定方向。

最重要的是，您无法控制不是您自己的应用程序的方向（即通过系统 Intent 调用）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T13:40:36.747

在 android 清单中将其添加`android:screenOrientation="landscape"`到活动中。

例子：

```
 <activity android:name=".yourClientAddressActivity" android:screenOrientation="landscape"></activity> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T14:42:26.330

如果屏幕设备已经是横向的，那么新的电子邮件活动应该使用它（如果它支持的话）；否则，它会进入纵向模式，但是你不能对此做任何事情，因为它首先不支持横向。

# java - Spring MVC 请求映射传递不应传递的请求

> ID：14070376
> 
> 赞同：1
> 
> 时间：2012-12-28T13:37:15.567
> 
> 标签：java, spring, rest, spring-mvc, http-status-codes

**编辑**- 现在解决了，错误出现在我的弹簧配置中。我错过了`<mvc:annotation-driven/>`标签。添加它时，一切都按预期工作。

我已经使用 Spring MVC 定义了一个控制器，只有当`HTTP GET`请求`/controllertest`的内容类型是`application/json`. 它还返回数据，`application/json`因此只有接受该格式数据的请求才能通过。但是，这不起作用。

这是我使用 Spring 3.2.0 的代码：

```
package test.controllers;

import static org.springframework.http.MediaType.APPLICATION_JSON_VALUE;
import static org.springframework.web.bind.annotation.RequestMethod.GET;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

@Controller
@RequestMapping("/controllertest")
public class TestController {

    @RequestMapping(method = GET, consumes = APPLICATION_JSON_VALUE, produces = APPLICATION_JSON_VALUE)
    @ResponseBody
    public String helloJSON() {
        return "{\"message\":\"HelloWorld\"}";  
    }

} 
```

这是我所期望的：

1.  如果我使用任何 HTTP 方法而不是`GET`我应该收到`405 - Method not allowed`响应
2.  如果我发送不接受的请求，`application/json`我应该会收到`406 Not Acceptable`回复。
3.  如果我发送的请求内容类型不是`application/json`我应该收到`415 Unsupported Media Type`响应。

这是实际结果：

1.  我确实得到了一个`405 - Method not allowed`. 非常好。
2.  当发送带有`Accept`标头的请求时，`text/xml`只有我得到一个`200 - OK`响应，并且响应的内容类型是`text/xml`即使该方法只产生`application/json`.
3.  发送内容类型为的请求时，`text/xml`我得到了`200 - OK`响应。

我可以补充一点，我在泽西岛实现了所有这些，结果都是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:05:27.187

使用 Spring 3.2，行为与您所描述的一致，除了 2 我得到 405（不允许方法）而不是 406。您能否确认您使用哪个版本的 Spring 进行这些测试以及是否可行升级到至少 3.10+ 并再次确认此行为。

# c - C linux pthread需要睡眠才能工作

> ID：14070377
> 
> 赞同：0
> 
> 时间：2012-12-28T13:37:16.797
> 
> 标签：c, linux, gcc, pthreads

我正在使用 gcc 在 linux 上用 c 编写程序。如果我不使用该睡眠语句，它将随机打印 2,3 或 4 次“线程创建”。谁能解释我这种行为？//下面的代码只是一个示例，我知道创建一个线程只是为了打印一个字符串并不是很有用:)

```
void* makeRequest(void* arg) {
    printf("Thread created\n");
}

int main(){
   pthread_t thr[10];
   for(i=0; i<3; i++){  
       pthread_create(&thr[i], 0, makeRequest, &i);
       sleep(1);
    }
 } 
```

ps 我包括了 pthread.h 和编译选项 -pthread

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T13:39:44.133

您应该加入您创建的所有线程，`main`并在您退出整个过程时结束。

或者，您可以`main`以`pthread_exit`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T17:00:18.383

除了其他备注外，

```
 pthread_create(&thr[i], 0, makeRequest, &i); 
```

是不正确的，因为`i`它是一个局部变量，所以你对[pthread_create](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_create.html)`&i`的所有调用都是同一个指针

您通常应该将数据指针指向您的线程例程 - 这里线程例程是`makeRequest`静态指针或唯一指针（每个线程唯一）；在实践中，使其成为指向某些`malloc`-ed 内存的指针。

更好的做法是声明 some `struct my_thread_data_st`，在堆中唯一地分配它

```
struct my_thread_data_st* td = malloc(sizeof(struct my_thread_data_st));
if (!td) perror("malloc td"), exit(EXIT_FAILURE);
memset (td, 0, sizeof(struct my_thread_data_st));
// fill td appropriately, then
pthread_create(&thr[i], 0, makeRequest, td); 
```

`int`或者你可以有一个例如-s的数组，例如`int num[4];`，适当地初始化它，然后`pthread_create(&thr[i], 0, makeRequest, &num[i]);`

当然，如果`td`是 heap-allocated thru `malloc`，请不要`free`在适当的时候忘记它，例如在线程结束之后（例如在[pthread_join](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_join.html)之后）。您可能还对[Boehm 的 GC](http://www.hpl.hp.com/personal/Hans_Boehm/gc/)感兴趣并使用`GC_malloc`而不是`malloc`（然后，不要担心释放内存，GC 会这样做）。

如果线程正在访问共享数据，您应该使用一些[全局或静态]互斥锁（使用`pthread_mutex_lock`& `pthread_mutex_unlock`）序列化对它的访问

不要忘记`pthread_join`在退出之前调用所有线程 - 例如从`main`.

我建议阅读一些[pthreads 教程](https://computing.llnl.gov/tutorials/pthreads/)和一些关于[高级 linux 编程](http://advancedlinuxprogramming.com/)的书。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T13:39:58.817

你需要：

```
for(i = 0; i < 3; i++)
{
   pthread_join(thr[i], NULL);
} 
```

正如您所写的那样，在 main 返回并退出整个进程之前，没有任何东西等待您的线程完成，从而杀死线程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T13:43:34.747

**先用join:，**`&i`不用就不用发了。

> 随机打印“线程创建”2,3 或 4 次。

当主线程死亡时，所有子线程也会死亡。所以你需要等待加入。

**随机。**：因为我们不知道在线程上下文切换中哪个会获得机会。它可能是主线程或子线程。

```
for(i=0; i<3; i++){  
       pthread_create(&thr[i], 0, makeRequest, &i);   
}

for(i=0; i<3; i++){  
       pthread_join(thr[i], NULL);
} 
```

~~**第二次**使用`-lpthread` **非**-pthread~~

```
$ gcc file.c -lpthread -o output 
```

**已编辑**

`-pthread` 使用“pthreads”库添加对多线程的支持。此选项为预处理器和链接器设置标志：[Jens Gustedt 评论](https://stackoverflow.com/questions/14070377/c-linux-pthread-needs-sleep-to-work/14070451#comment19452326_14070451)

[**-pthread 和 -lpthread 之间的区别**](https://stackoverflow.com/questions/2127797/gcc-significance-of-pthread-flag-when-compiling?answertab=oldest#tab-top)

# xquery - 在 XQuery 中使用布尔运算符（and、or、not）选择元素属性

> ID：14070379
> 
> 赞同：1
> 
> 时间：2012-12-28T13:37:20.167
> 
> 标签：xquery, boolean-logic

我想过滤以下 XQuery 的结果：

```
for $units in $data//*[@id = $ids and (@xref = $a or @xref = $b)]/@id 
```

如何选择具有匹配的**@id**值和匹配$a*或*$b 但*不匹配$a 和$b 的***@xref**属性的元素。

 **$a 和 $b 都是具有标记值的节点集，它们都充当标识符。想要的标识符可以存储在 $a 或 $b 中。

我的意图是，如果 $a 与**@xref**属性匹配，则查询不会检查 $b。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:20:05.567

最好是使用异或。可惜没有异或...

但是 != 和 ne 也是一样的：

```
 for $units in $data//*[@id = $ids and ((@xref = $a) ne (@xref = $b))]/@id 
```

对于单个值，使用 eq 而不是 = 应该更快：

```
 for $units in $data//*[@id = $ids and ((@xref eq $a) ne (@xref eq $b))]/@id 
```**

# vb.net - vb.net oledbdataadapter 将字段格式为整数而不是双精度

> ID：14070384
> 
> 赞同：0
> 
> 时间：2012-12-28T13:37:42.337
> 
> 标签：vb.net, oledbdataadapter

我在 Visual Studio 2005 中使用 oledbdataadapter 加载 CSV 文件。我遇到的问题是，如果任何给定字段的第一行的值为 0，则 oledbdataadapter 会将此字段转换为整数。它将所有后续值四舍五入为一个整数，去除小数点。作为测试，我用记事本手动打开 csv 并将第一行更改为 0.0 而不是仅 0，然后文件正确打开，使该字段成为双倍。打开 CSV 和格式字段加倍的正确方法是什么？

这是打开代码：

```
Sub LoadDB2Graph(ByVal DaFilename As String)
    Dim DaTable As String
    Try
        MyDataAdapter.Dispose()
        dsPressScope.Tables.Clear()
    Catch e1 As Exception
    End Try
    MySelectCommand.CommandText = "SELECT * FROM [" & DaFilename & "] WHERE [Time] <> 0"
    MyDataAdapter.SelectCommand = MySelectCommand
    Try
        Call DeleteTestLine(1)
        Call DeleteTestLine(2)
        DaTable = Replace(DaFilename, ".", "_")
        MyDataAdapter.Fill(dsPressScope, DaTable)
        dgPressScope.DataSource = dsPressScope
        dgPressScope.DataMember = DaTable
        dgPressScope.Refresh()
        ZedGraph.GraphPane.CurveList.Clear()
        InitializeTestLines()
        ZedGraph.GraphPane.Title.Text = DBDirectory & DaFilename
        ZedGraph.GraphPane.AxisChange()
        tabMain.SelectTab("tbSelectPens")
        Me.Text = "Press Scope - " & DBDirectory & DaFilename
    Catch e1 As Exception
        MessageBox.Show("Load Failed")
    End Try
    LoadPens2List()
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:08:46.123

诀窍是使用文件**schema.ini**

使用此文件（[此处](http://msdn.microsoft.com/en-us/library/ms709353%28v=vs.85%29.aspx)由 Microsoft 记录的格式），当文本驱动程序参与数据访问操作时，您可以指定一组信息来补充您的连接字符串

例如，您可以像这样编写 schema.ini：

```
[data.txt]
Format=Delimited(;)
MaxScanRows=0
Col1=ID Integer
Col2=ProductName Text Width 100
Col3=Price Double 
```

这假定您的文本文件名为 Data.txt，由三列 Integer、Text 和 Double 组成。该文件应保存在文本文件所在的同一目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:00:52.320

作为替代方案，您可以使用[TextFieldParser](http://msdn.microsoft.com/en-us/library/cakac7e6)类来加载 CSV 文件，而不是使用`OleDbDataAdapter`该类。这样做可以让您更好地控制整个过程。

例如，您可以执行以下操作：

```
Using reader As New TextFieldParser("my csv file Path")
    reader.TextFieldType = FieldType.Delimited
    reader.SetDelimiters(",")
    While Not reader.EndOfData
        Try
            For Each field As String In reader.ReadFields()
                Dim value As Double = 0
                If Double.TryParse(field, value) Then
                    ' Process this field value
                Else
                    ' Handle the invalid value
                End If
            Next
        Catch ex As MalformedLineException
            ' Handle exception ...
        End Try
    End While
End Using 
```

# symfony - 英语语言环境关键字翻译

> ID：14070389
> 
> 赞同：0
> 
> 时间：2012-12-28T13:38:35.657
> 
> 标签：symfony, locale

我阅读了教程，翻译工作正常。我的问题是处理关键字。在这里你可以看到一个例子：

[http://symfony.com/doc/current/book/translation.html#creating-translations](http://symfony.com/doc/current/book/translation.html#creating-translations)

`symfony.is.great -> J'aime Symfony2`当我的语言是法语时，我可以运行关键字。但是我该如何翻译`symfony.is.great -> Symfony2 is great`呢？把它翻译成英文。我错过了文档中的那部分，或者我真的不明白！我的默认语言是英语！

我确实有messages.fr.xliff 和messages.en.xliff。

我的部分messages.en.xliff：

```
<?xml version="1.0" encoding="UTF-8" ?>
    <xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2">
        <file source-language="en" datatype="plaintext" original="file.ext">
            <trans-unit id="3">
                <source>symfony2.is.great</source>
                <target>Symfony is great</target>
            </trans-unit>
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T13:48:33.757

您共享的[文档部分](http://symfony.com/doc/current/book/translation.html#creating-translations)仅向您展示了定义翻译键（真实消息或关键字）的不同方式。

看看文档的[这一部分](http://symfony.com/doc/current/book/translation.html#message-catalogues)。要使[翻译过程](http://symfony.com/doc/current/book/translation.html#the-translation-process)正常工作，您必须在两个消息目录文件中使用相同的键。然后根据`_locale`会话中存储的内容加载正确的翻译。

此外，每次创建新的翻译资源时，请务必清除缓存，以便将新文件考虑在内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-05T09:08:39.463

尝试设置翻译服务

```
$translator = $this->get('translator'); 
```

然后设置用户语言环境（$language = 'en' 或 'fr'）

```
$translator->setLocale($language); 
```

或者

```
$translator->setFallbackLocales(array($language)); 
```

在此之后，您可以调用翻译功能

```
$translator->trans('symfony.is.great'); 
```

确保您在法语和英语目录中使用相同的关键字，并尝试清除缓存

```
php bin/console cache:clear --no-warmup 
```

# java - 调用方法？

> ID：14070393
> 
> 赞同：0
> 
> 时间：2012-12-28T13:38:58.707
> 
> 标签：java, swing, jdbc, methods, jtable

好的。我写了上面的代码，我需要从另一个类中调用它。我该怎么做？加上它给了我这个错误`DefaultTableModel prodt = (DefaultTableModel) protable.getModel();` 。错误是非静态变量 protable 无法从静态上下文中引用。

```
public static void refreshProtable() {
    try {
        Statement s1 = Db.connectDb().createStatement();
        ResultSet rs1 = s1.executeQuery("SELECT * FROM product WHERE status='" + 0 + "'");

        DefaultTableModel prodt = (DefaultTableModel) protable.getModel();
        while (rs1.next()) {
            Vector v1 = new Vector();
            v1.add(rs1.getString("pid"));
            v1.add(rs1.getString("pname"));
            v1.add(rs1.getString("sp_rt"));
            v1.add(rs1.getString("sp_wh"));
            v1.add(rs1.getString("um"));
            Statement s2 = Db.connectDb().createStatement();
            ResultSet rs2 = s2.executeQuery("SELECT * FROM stock WHERE pid='" + rs1.getString("pid") + "'");
            if (rs2.next()) {
                v1.add(rs2.getString("qty"));
            }
            prodt.addRow(v1);
            s2.close();
        }
        s1.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T13:41:03.773

将变量标记`protable`为静态或使方法为非静态。

`private static DefaultTableModel protable;`

`public static void refreshProtable() { ... }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T13:42:34.490

由于该方法是静态的，因此您可以使用它所在的类名来调用它。

例如

```
class A {
    public static void b() {
        // do something
    }
} 
```

将被称为如下：

```
A.b(); 
```

重新了解静态变量的工作方式可能会很方便，这将是一个起点：[http ://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T13:43:15.120

您需要将其`protable`设为静态，因为您只能从静态方法访问静态变量。

```
private static DefaultTableModel protable;

public static void refreshProtable() { } 
```

您尝试调用的变量是实例级变量；

**静态变量**

*   它是一个属于类而不属于对象（实例）的变量

*   静态变量只在执行开始时初始化一次。这些变量将首先被初始化，在初始化任何实例变量之前

*   由类的所有实例共享的单个副本

*   静态变量可以通过类名直接访问，不需要任何对象

*   句法 ： 。

**静态方法**

*   它是属于类而不属于对象（实例）的方法
*   静态方法只能访问**静态**数据。它不能访问非静态数据（实例变量）

*   静态方法只能调用其他静态方法，不能从中调用非静态方法。

*   静态方法可以通过类名直接访问，不需要任何对象

*   句法 ： 。

*   静态方法无论如何都不能引用“this”或“super”关键字

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T13:45:12.253

您可以将函数设为非静态或将可移动对象设为静态。

总之，你不能在静态函数中引用非静态变量。

但您可以在非静态函数中引用静态变量

# c# - 在 C# Linq 中进行赋值的 While 循环

> ID：14070396
> 
> 赞同：4
> 
> 时间：2012-12-28T13:39:23.223
> 
> 标签：c#, linq, loops, syntax, random

我想为变量分配`vStreamID`一个随机数。只要我的字典`md_StreamDict`包含生成的数字，这个数字就应该是新生成的。

长版：

```
vStreamID = (new Random()).Next(1000, 9999).ToString();
while (md_StreamDict.ContainsKey(vStreamID)) {
    vStreamID = (new Random()).Next(1000, 9999).ToString();
} 
```

我想看看 LINQ 风格的东西

```
md_StreamDict.ContainsKey(vStreamID)
    .while( x => x = (new Random())
    .Next(1000, 9999)
    .ToString(); 
```

我知道上面的例子是香蕉。但是，如果有真正的方法可以实现这一目标，我会很高兴。不，我们不会再次开始通常的关于可读性的讨论。;)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T13:48:00.373

您需要一种为流式随机数生成无限可枚举的方法。您可以使用`Enumerable.Range(0, int.MaxValue`) 进行近似计算：

```
var rand = new Random();
var r = Enumerable.Range(0, int.MaxValue)
    .Select(s => rand.Next(1000, 9999))
    .SkipWhile(s => md_StreamDict.ContainsKey(s.ToString()))
    .First(); 
```

然后`r`将包含字典中未包含的新键值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-28T13:48:54.410

如果我理解正确，您只需要一个众所周知范围内的数字，并且该数字不应该已经在字典中，所以不要这样做`Random`：

```
Enumerable.Range(1000, 9999)
          .Where(n => !dict.ContainsKey(n))
          .FirstOrDefault(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-28T13:50:01.150

这里还有一些香蕉：

您可以创建一个 IEnumerable 来生成随机数，例如：

```
public class RandomList : IEnumerable<int>
{
    public IEnumerator<int> GetEnumerator()
    {
        Random r = new Random();

        while (true)
            yield return r.Next(1000, 9999);
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        return this.GetEnumerator();
    }
} 
```

然后你可以这样做：

```
// I guess one could implement a seed constructor, if one was so inclined
RandomList rl = new RandomList(); 

int vStreamID = rl.SkipWhile(i => md_StreamDict.ContainsKey(i)).First(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-28T13:45:30.993

现在我已经将您的问题读了 3 遍，但我仍然不知道为什么（或如何）有人会使用 LINQ 表达式来做到这一点。我看到的唯一较短的解决方案是我在评论中写的：

```
var r = new Random();

do {
    vStreamID = r.Next(1000, 9999).ToString();
} while (md_StreamDict.ContainsKey(vStreamID)); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-28T13:50:06.450

一种方法是使用 yield 返回值

```
 private static Random rand = new Random();

    private static void Test()
    {
        Dictionary<string, string> values = new Dictionary<string, string>();
        string vStreamId = GetNewValues().Where(x => !values.ContainsKey(x)).First();
    }

    public static IEnumerable<string> GetNewValues()
    {
        While(true)
        {
           yield return rand.Next(1000, 9999).ToString();
        }
    } 
```

请注意，如果您在每个循环上生成一个新的 Random，则每次都将获得相同的值，因为它基于系统时钟。

# c# - SharePoint 2013 - MyProfile - 自定义功能区

> ID：14070399
> 
> 赞同：0
> 
> 时间：2012-12-28T13:39:30.653
> 
> 标签：c#, visual-studio, sharepoint, visual-studio-2012, sharepoint-2013

嘿，我希望我的问题不是太傻。

我正在使用 Visual-Studio 2013，我想询问是否可以为 SharePoint 2013 MyProfile 网站创建自定义功能区，以在其中添加一个运行 C# 代码的按钮。如果有可能怎么做。

我希望有人能够帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:43:55.893

你的意思是Visual Studio 2012。VS 2013 不存在。是的，这是可能的，而且并不难。您需要将自定义操作添加到 Elements.xml 文件并使用包进行部署。

您可以使用客户端对象模型/ecmascript 获取页面上的选定项目（如果有），并将参数传递到您可以运行代码的自定义页面。您还可以使用 Web 部件或任何其他参数在同一页面上执行回发并处理您的自定义代码。

请参阅此博客，了解如何在功能区上创建自定义操作... [http://blogs.msdn.com/b/jfrost/archive/2009/11/06/adding-custom-button-to-the-sharepoint-2010 -ribbon.aspx](http://blogs.msdn.com/b/jfrost/archive/2009/11/06/adding-custom-button-to-the-sharepoint-2010-ribbon.aspx)

您也可以在设计器中执行此操作。请参阅此博客。 [使用 SharePoint Designer 2010 将自定义操作添加到 SharePoint 2010 中的功能区 UI](https://www.nothingbutsharepoint.com/sites/eusp/Pages/adding-custom-actions-to-the-ribbon-ui-in-sharepoint-2010-using-sharepoint-designer-2010.aspx)

# entity-framework - 实体框架缓存

> ID：14070400
> 
> 赞同：0
> 
> 时间：2012-12-28T13:39:32.260
> 
> 标签：entity-framework, caching

我正在阅读一篇关于 Nhibernate 和 EF 之间差异的文章。但我无法理解他们想在字段上缓存时说什么。

> 对于实体框架，ObjectContext/DbContext 保存配置、模型并充当工作单元，保存对所有已知实体实例的引用。因此，这个类不像它的 NHibernate 对应物那样轻量级，并且看到实例缓存在字段上的示例并不少见。

我没有创建文章链接，因为我不是 100% 确定它是允许的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:51:15.053

仔细注意措辞；他们在谈论`DbContext`它本身，并评论说看到“实例”（DbContext）缓存在字段上的示例并不少见。

`DbContext`他们的意思是，您将看到人们将`DbContext`实例保存到更广泛对象的字段并重用它，而不是在方法中创建和销毁具有本地范围的对象。

# python - 如果存在终止行，则使用 Python 提取数据

> ID：14070402
> 
> 赞同：0
> 
> 时间：2012-12-28T13:39:52.507
> 
> 标签：python, python-2.4

我目前正在尝试使用 Python 在输入文件的两行之间提取一些数据。infile 的设置使得有一行 -START- 当且仅当 -END- 条件出现在下一个 -START- 之前，我需要接下来的 10 行代码。-START- 行多次出现在 -END- 之前。这是我的意思的一般示例：

等等
等等
-START-
10 行我不需要
等等
-START-
10 行我需要
等等
等等
-END-
等等
等等
-START-
10 行我不需要
等等
-START-

.... 等等等等

到目前为止，我只能为每次迭代获得 -START- + 10 行，但是在指定仅在 -END- 条件出现在另一个 -START- 条件之前才写入的条件时，我完全不知所措。我有点新手，所以任何帮助将不胜感激。

奖励：我需要将每个 START + 10 行块打印到一个新的/唯一的输出文件中。但我还没有真正玩过这个，所以请随意忽略这部分。

这是我用于打印 -START- + 10 行的代码：

```
in = open('input.log')
out = open('output.txt', 'a')

lines = in.readlines()
    for i, line in enumerate(lines):
        if (line.find('START')) > -1:
            out.write(line)
            out.write(lines[i + 1])
            out.write(lines[i + 2])
            out.write(lines[i + 3])
            out.write(lines[i + 4])
            out.write(lines[i + 5])
            out.write(lines[i + 6])
            out.write(lines[i + 7])
            out.write(lines[i + 8])
            out.write(lines[i + 9])
            out.write(lines[i + 10]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:58:48.210

你在正确的轨道上。您要做的是密切关注您看到的行列表，并随时检查它们：如果您在十行之前看到另一个 START，则丢弃当前列表并重新开始。所以你的循环看起来像这样：

```
lines_to_write = []
for line in lines:
    if line.find('START') > -1:
        lines_to_write = [] # Empty anything that was in the list before
    if line.find('END')  > -1:
        out.writelines(lines_to_write) # Write all useful lines
        lines_to_write = []
        continue
    lines_to_write.append(line) 
```

这是假设`END`总是发生在正确的地方。如果您总是想要在开始后十行，无论它们是什么（只要它们不是更多`START`行），那么您的第二个条件将如下所示：

```
if len(lines_to_write) == 10:
    out.writelines(lines_to_write)
    lines_to_write = []
    continue 
```

要将每个块打印到新的输出文件，只需`out`在每次调用`out.writelines`. 这样，您只需根据需要制作尽可能多的新文件。要使它们成为唯一文件，如果您不需要特定的方法，只需[在文件名中添加时间戳即可](https://stackoverflow.com/questions/5218261/python-how-to-rename-a-text-file-with-datetime)。

# workflow-foundation-4 - 在 WF4 中重用 Receive/SendReply

> ID：14070404
> 
> 赞同：0
> 
> 时间：2012-12-28T13:39:59.857
> 
> 标签：workflow-foundation-4, workflow-foundation

WF(4)中如何复用Receive/SendReply？例如

```
Receive/SendReply (Start)
Process data
Decision (data is valid?)
  True
    Pick
      1) Receive/SendReply (Confirm)
      2) Receive/SendReply (Input data)
      3) Receive/SendReply (Restart)
  False
    Pick
      1) Receive/SendReply (Input data)
      2) Receive/SendReply (Restart) 
```

应该可以在两个不同的 s中调用`Input data`and 。`Restart``Pick`

目前我正在使用 WF 4，但我想知道 4.5 是否有更简单的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T18:11:45.993

只需创建一个自定义复合活动并将 Receive/SendReply 对添加到其中并在多个位置重用该自定义活动。这一直是 WF4 自发布以来的基本重用机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T22:27:46.583

PickBranch 是密封的，所以你不能走 x:Class 路线。这是一个 hack，但您可以使用自定义 MarkupExtension 来满足您的需求。

# objective-c - UITableViewCell 高度计算和委托？

> ID：14070407
> 
> 赞同：0
> 
> 时间：2012-12-28T13:40:15.630
> 
> 标签：objective-c, ios, uitableview, delegates

我知道这个问题之前已经被问过数百次，但从未真正得到解决（或者至少是我希望的方式）。我有一个相当复杂的 UITableViewCell 设置。从 UIView 子类加载，该`cell.backgroundView`子类使用了相当多的 CoreGraphics 和 CoreText。代码中到处都是`CTFramesetterSuggestFrameSizeWithConstraints`，所以我不愿意在`heightForRowAtIndexPath`方法中复制类。

我想我可以通过创建一个以 indexPath 作为键、以高度作为值的 NSMutableDictionary 来解决这个问题。但后来我面临着`heightForRowAtIndexPath`先被叫到的问题。我相信我可以通过猜测单元格的高度来解决这个问题，然后一旦单元格的 UIView 子类完成渲染，使用委托来设置单元格的高度。

但这给我留下了一个问题，我到底该怎么委派这个？而且，如何防止滚动非常不稳定？因为单元格将在瞬间创建和调整大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:48:41.077

过去，我使用过虚拟单元。我有一个单独的方法`-fillInCell:forRowAtIndexPath:`将数据放入单元格中。这样我就可以填写虚拟单元格`-tableView:heightForRowAtIndexPath:`和真实单元格`-tableView:cellForRowAtIndexPath:`。

如果这对您不起作用，那么还有其他选择。

首先想到的是创建真正的单元格`-tableView:heightForRowAtIndexPath:`而不是`-tableView:cellForRowAtIndexPath:`. 您可以将完成的单元格存储在可变字典中。`-tableView:cellForRowAtIndexPath:`只会从字典中提取完成的单元格。您还应该检测滚动何时停止，以便您可以清空字典（仅仅因为`-tableView:heightForRowAtIndexPath:`被调用并不意味着`-tableView:cellForRowAtIndexPath:`会调用相同的 indexPath）。

希望有帮助。

# c - 使用 cl.exe unicode 转换错误进行编译

> ID：14070408
> 
> 赞同：1
> 
> 时间：2012-12-28T13:40:16.707
> 
> 标签：c, visual-studio, winapi

首先代码用VS2010编译和运行

但是当我用 cl.exe 编译时，它给出了

```
cannot convert parameter 1 from 'WCHAR [10]' to 'LPCTSTR' 
```

代码是

```
char *fileName = "12.txt";
WCHAR ufileName[10];
MultiByteToWideChar(CP_ACP, MB_COMPOSITE, fileName, -1, ufileName, 10);

postFile(ufileName, clientSock);
postFile(LPCTSTR lpFileName, SOCKET clientSock) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T13:53:50.370

您正在尝试将`WCHAR`数组传递给需要`LPCTSTR`. [本文](http://www.codeproject.com/Articles/2995/The-Complete-Guide-to-C-Strings-Part-I-Win32-Chara)解释了这`LPCTSTR`是一个`TCHAR`s 数组，它`TCHAR`的大小因 unicode 和非 unicode 版本而异。

您的代码依赖，`sizeof(TCHAR) == sizeof(WCHAR)`因此您需要启用 unicode 支持。

我猜想您在 IDE 中的构建启用了 unicode，而您的命令行构建却没有。`-DUNICODE -D_UNICODE`您可以通过添加到命令行来启用 unicode 支持。

# python - 没有主键时的左连接（如果可能，将 2 个给定的查询粘合到一个）

> ID：14070410
> 
> 赞同：0
> 
> 时间：2012-12-28T13:40:24.827
> 
> 标签：python, sqlalchemy

在游戏中有两个简单的实体 Player 和 Alliance，我需要使用联盟名称获取同一国家的所有用户（如果他们在任何联盟中获取名称，否则联盟名称为空）。

```
class Base(object):
     def __tablename__(self):
       return self.__name__.lower()

     id = Column(Integer, primary_key=True, nullable=False)

class PlayerModel(Base):
    __tablename__ = 'players'
    alliances_id = Column(Integer, nullable=True)
    username = Column(String(30), nullable=False)
    nation = Column(String(20), nullable=False)
    score = Column(String(20), default=0)

class AllianceModel(Base):
    __tablename__ = 'alliances'
    name = Column(String(50), nullable=False)
    nation = Column(String(20), nullable=False)

//query

for player in session.query(PlayerModel).filter(PlayerModel.nation.like(nation)):
    alliance =session.query(AllianceModel).filter(AllianceModel.id==player.alliance_id).first()
    result.append({'username':player.username, 'alliance':alliance.name}) 
```

我可以将其仅连接到一个查询吗？（我知道当有外键时使用 join，但玩家可以不在任何联盟中，alions_id 可以为空）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:51:02.023

将列标记`alliances_id`为外键：

```
from sqlalchemy import ForeignKey
from sqlalchemy.orm import relationship

class PlayerModel(Base):
    __tablename__ = 'players'
    alliances_id = Column(Integer, nullable=True, ForeignKey('AllianceModel.id'))
    alliance = relationship('AllianceModel')
    username = Column(String(30), nullable=False)
    nation = Column(String(20), nullable=False)
    score = Column(String(20), default=0) 
```

然后简单参考`player.alliance`：

```
for player in session.query(PlayerModel).filter(PlayerModel.nation.like(nation)):
    result.append({'username':player.username, 'alliance': player.aliance.name if player.aliance is not None else ''}) 
```

如果您不愿意或无法将`ForeignKey()`约束添加到`alliances_id`，您还可以将该信息添加到`relationship()`声明中：

```
 alliances_id = Column(Integer, nullable=True)
    alliance = relationship('AllianceModel', foreign_keys='AllianceModel.id') 
```

# jquery - 免费的jQuery层滑块？

> ID：14070414
> 
> 赞同：5
> 
> 时间：2012-12-28T13:40:45.420
> 
> 标签：jquery, slider

有没有类似的免费 jquery 插件

[http://codecanyon.net/item/layerslider-the-parallax-effect-slider/922100?sso?WT.ac=search_item&WT.seg_1=search_item&WT.z_author=kreatura](http://codecanyon.net/item/layerslider-the-parallax-effect-slider/922100?sso?WT.ac=search_item&WT.seg_1=search_item&WT.z_author=kreatura)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-28T13:47:32.627

并不是我们鼓励这类问题，但您可能想看看[WOWSLIDER](http://wowslider.com/)。谷歌应该永远是你的首选。

# java - 将 LongBlob 数据显示为图像

> ID：14070415
> 
> 赞同：3
> 
> 时间：2012-12-28T13:40:47.587
> 
> 标签：java, blob

我有以下代码来读取 blob 数据并将结果显示为图像。但我得到了错误`java.lang.IllegalStateException: getWriter() has already been called for this response`。

```
while (rs2.next()) {
    Blob image = null;
    byte[] imgData = null;
    j++;
    qPaperOptions = rs2.getString(1);
    int qDetailId = rs2.getInt(2);
    image = rs2.getBlob(5);

    ServletOutputStream sout = response.getOutputStream();
    // o.close();
    // imgData = image.getBytes(1,(int)image.length());
    // Blob cnt_data=rs2.getBlob("cimg.ctn_data");
    if (image != null) {
        // imgData = image.getBytes(1,(int)image.length());
        response.setContentType("image/gif");
        InputStream in = image.getBinaryStream();
        int length = (int) image.length();
        int bufferSize = 1024;
        byte[] buffer = new byte[bufferSize];
        while ((length = in.read(buffer)) != -1) {
            sout.write(buffer, 0, length);
        }
    }
} 
```

我能做些什么来解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:08:15.970

哪一行抛出异常？一般来说，代码看起来是正确的。只是几个想法：可能是您要迭代此代码两次（结果集中有两个或更多结果）？此外，请尝试在获取输出流之前设置 contentType。

# c++ - 这个 8 皇后计划中的错误是什么？

> ID：14070416
> 
> 赞同：0
> 
> 时间：2012-12-28T13:40:48.223
> 
> 标签：c++, algorithm

该代码用于在 8*8 棋盘上放置 8 个皇后，这样它们就不会进行水平、垂直和对角线攻击。有关更多详细信息，您可以参考维基百科链接[http://www.google.co.in/url?sa=t&rct =j&q=8%20queens%20problem&source=web&cd=1&cad=rja&sqi=2&ved=0CDEQFjAA&url=http%3A%2F%2Fen.wikipedia.org%2Fwiki%2FEight_queens_puzzle&ei=XKbdUMbqLIn4rQfCoICACA&usg=AFQjCNEXFxAwqTUrl19GJ9Y9yh97g5hGFg&bvm=bv.1355534169,d.bmk](http://www.google.co.in/url?sa=t&rct=j&q=8%20queens%20problem&source=web&cd=1&cad=rja&sqi=2&ved=0CDEQFjAA&url=http%3A%2F%2Fen.wikipedia.org%2Fwiki%2FEight_queens_puzzle&ei=XKbdUMbqLIn4rQfCoICACA&usg=AFQjCNEXFxAwqTUrl19GJ9Y9yh97g5hGFg&bvm=bv.1355534169,d.bmk)

```
#include<iostream>
#include<conio.h>
using namespace std;
int recu(int i,int k);
void place(int i,int k);
void unplace(int i,int k);
int q[8][8];
/*flags for blocks*/
int row[8]; 
int column[8]; /*flag for column*/
int c[15];  /*flag for diagonls*/
int d[15];
int main()
{
    for(int i=0;i<8;i++) /*initalize flags */
    {
        row[i]=0;
        column[i]=0;
        c[i]=0;
        d[i]=0;
    }
    for(int i=8;i<15;i++)  /*initalize flag diagonals*/
    {
        c[i]=0;d[i]=0;
    }
    int i=0;
    int k=0;
    recu(i,k);  

    for(int i=0;i<8;i++)    /*for display output*/
    {
        for(int k=0;i<8;i++)
        {
            if(q[i][k]==1)
            {
                cout<<"(";
                cout<<i;
                cout<<",";
                cout<<k;
                cout<<")";
            }
        }
    }
    getch();
    return 0;
}

int recu(int i,int k)
{ 
    if(k<8)
    {
        if(column[i]==0 && row[k]==0 && c[i+k]==0 && d[i-k+7]==0)
        {
            place(i,k);
            k=0;
            recu(i+1,k);
        }
        else
            k++;
    }
    else
        unplace(i,k);
    return 0;
}

void place(int i,int k)
{
    q[i][k]=1;
    row[i]=1;
    column[k]=1;
    c[i+k]=1;
    d[i-k+8]=1;
}

void unplace(int i,int k)
{
    q[i][k]=0;
    row[i]=0;
    column[k]=0;
    c[i+k]=0;
    d[i-k+7]=0;
} 
```

我得到了输出，但它只是 (0,0) 和 (7,0)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:44:26.860

据我所知，问题是肯定的：

```
int q[7][7] 
```

这有来自索引的整数

> [0-6][0-6]

它模拟了一个 7*7 的字段。

你需要`int q[8][8]`有一个 8*8 的字段。

此外，您的对角线数组的大小也需要为 15 而不是 14。

# javascript - three.js - 使用 CanvasRenderer 提高性能 (FPS)

> ID：14070418
> 
> 赞同：2
> 
> 时间：2012-12-28T13:40:59.490
> 
> 标签：javascript, json, html5-canvas, three.js

我有一个管几何。JSON 文件中有 18738 个点。Tube 有 2000 个点（考虑每 9 个点）。Tube 有 2000 个段（强制），每个段有 12 个面，每个面都应用了颜色。

当我`THREE.WebGLRenderer`在桌面浏览器上渲染模型时，FPS 在 54-60 之间。当我`THREE.CanvasRenderer`在桌面浏览器上渲染相同的模型时，FPS 为 1-2。

我必须在 iPad 上运行这个模型。所以我需要使用`THREE.CanvasRenderer`. 如果我减少段数，FPS 会增加，但 2000 段是必要的要求。

JSON 文件具有以下结构：

```
{"id":"0",
"r30" :"5.247","r60" :"5.088","r90" :"4.77","r120" :"5.724","r150" :"5.83","r180" :"5.459","r210" :"5.194","r240" :"5.035","r270" :"5.247","r300" :"5.565","r330" :"5.618","md":"20","point" :new THREE.Vector3(0,0,20)} 
```

类似地，我有 18738 个点并绘制每 9 个点来构建一个管。

```
tubeMesh = new THREE.Mesh(tube, new THREE.MeshBasicMaterial({
    color: 0xffffff,
    shading: THREE.FlatShading,
    side: THREE.DoubleSide,
    wireframe: false,
    transparent: false,
    vertexColors: THREE.FaceColors,
    overdraw: false
}));​ 
```

**如何使用 提高 FPS 的性能`THREE.CanvasRenderer`？**

r53

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:37:26.857

可悲的是，`CanvasRenderer`无法处理这样的数字。在 iPad 上更是如此。

# sencha-touch - DOM 似乎是在“绘制”事件之后呈现的？

> ID：14070420
> 
> 赞同：1
> 
> 时间：2012-12-28T13:41:12.107
> 
> 标签：sencha-touch, sencha-touch-2, sencha-touch-2.1

在数据视图中，我在“绘制”事件上更改了一些 dom 元素的宽度和高度。这有时有效。有时，新值会被 CSS 文件的定义覆盖。

```
setOverviewImages: function( e , element ) { // called after "painted" event

    var overview = this.getMyoverviewView();
    var newWidth = parseInt(overview.element.getWidth() / 2 - 50);
    var overviewImages = Ext.select( '.myoverview-container' );

    overviewImages.each( function(el , c , index) {
        el.setSize( newWidth , newWidth );
    });
}, 
```

渲染 DOM 时会触发哪个事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T12:09:10.953

处理“显示”事件时，DOM 应该已准备就绪

[http://docs.sencha.com/touch/2-1/#!/api/Ext.dataview.DataView-event-show](http://docs.sencha.com/touch/2-1/#!/api/Ext.dataview.DataView-event-show)

如果这不是您想要的，您也可以使用初始化或激活。

# android - Android UI如何对齐文本视图？

> ID：14070421
> 
> 赞同：0
> 
> 时间：2012-12-28T13:41:16.893
> 
> 标签：android, xml, textview, uitextview

我有这个线性布局，在线性布局内我有几个文本视图。现在我要做的是在左侧显示信息文本，然后在它旁边显示值，但值应该在最长的信息文本之后对齐。

我看不出如何在线性布局中使用另一个线性布局。

```
 <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="5dp"
            android:layout_marginLeft="5dp"
            android:orientation="vertical" >

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="#ff00ff"
                android:text="Room:"
                android:textSize="12dp" />

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="#ff00ff"
                android:text="{value}"
                android:textSize="12dp" />

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="#ff00ff"
                android:text="Date:"
                android:textSize="12dp" />

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="#ff00ff"
                android:text="{value}"
                android:textSize="12dp" />

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="#ff00ff"
                android:text="Time:"
                android:textSize="12dp" />

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="#ff00ff"
                android:text="{value}"
                android:textSize="12dp" />

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="#ff00ff"
                android:text="Location"
                android:textSize="12dp" />

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="#ff00ff"
                android:text="{value}"
                android:textSize="12dp" />
        </LinearLayout> 
```

就像一个 html 表格。一个带有信息文本，然后另一个带有值。具有文本值的文本视图应在最长的信息文本之后对齐。

等效的 HTML

```
<table>
<tr>
<td>Room:</td>
<td>{value}</td>
</tr>
<tr>
<td>Date:</td>
<td>{value}</td>
</tr>
...
</table> 
```

除了放入固定的 dp 宽度之外，是否可以对齐它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:47:04.677

像这样的东西，

```
Room: Value
Date: Value 
```

你可以使用这样的布局，

```
 <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="5dp"
            android:layout_marginLeft="5dp"
            android:orientation="vertical" >

     <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="5dp"
            android:layout_marginLeft="5dp"
            android:orientation="horizontal" >
            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="#ff00ff"
                android:text="Room:"
                android:textSize="12dp" />

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="#ff00ff"
                android:text="{value}"
                android:textSize="12dp" />
      </LinearLayout>
     <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="5dp"
            android:layout_marginLeft="5dp"
            android:orientation="horizontal" >
            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="#ff00ff"
                android:text="Date:"
                android:textSize="12dp" />

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="#ff00ff"
                android:text="{value}"
                android:textSize="12dp" />
        </LinearLayout>
     <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="5dp"
            android:layout_marginLeft="5dp"
            android:orientation="horizontal" >
            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="#ff00ff"
                android:text="Time:"
                android:textSize="12dp" />

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="#ff00ff"
                android:text="{value}"
                android:textSize="12dp" />

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="#ff00ff"
                android:text="Location"
                android:textSize="12dp" />

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="#ff00ff"
                android:text="{value}"
                android:textSize="12dp" />
        </LinearLayout>
        </LinearLayout> 
```

如果你想创建一个像 strucutre 这样的表格，那么你应该看看[Table Layout](http://developer.android.com/reference/android/widget/TableLayout.html)。你会[在这里找到一个很好的例子](https://stackoverflow.com/questions/2108456/how-can-i-create-a-table-with-borders-in-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T13:48:30.177

试试这个代码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:background="#0099cc"
    tools:context=".FullscreenActivity" >

    <TableLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="#ff00ff"
                android:text="Room:"
                android:textSize="12dp" />

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="#ff00ff"
                android:text="{value}"
                android:textSize="12dp" />
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="#ff00ff"
                android:text="Date:"
                android:textSize="12dp" />

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="#ff00ff"
                android:text="{value}"
                android:textSize="12dp" />
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="#ff00ff"
                android:text="Time:"
                android:textSize="12dp" />

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="#ff00ff"
                android:text="{value}"
                android:textSize="12dp" />
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="#ff00ff"
                android:text="Location"
                android:textSize="12dp" />

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="#ff00ff"
                android:text="{value}"
                android:textSize="12dp" />
        </TableRow>
    </TableLayout>

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T13:46:56.977

您可以使用表格布局。为清楚起见，请参阅下面的链接，因为我无法在此处编写整个代码。

[http://mobile.tutsplus.com/tutorials/android/android-sdk_table-layout/](http://mobile.tutsplus.com/tutorials/android/android-sdk_table-layout/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T13:47:06.737

您可以将 textViews 放在 LinearLayout 中，如下所示

```
 <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="5dp"
                android:layout_marginLeft="5dp"
                android:orientation="vertical" >

    <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="#ff00ff"
                    android:text="Room:"
                    android:textSize="12dp" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="#ff00ff"
                    android:text="{value}"
                    android:textSize="12dp" />
    </LinearLayout>

    // add  the rest of textviews similarly as above
</LinearLayout> 
```

# c++ - 串口计数器

> ID：14070424
> 
> 赞同：0
> 
> 时间：2012-12-28T13:41:25.980
> 
> 标签：c++, serial-port, counter

我想使用串行端口将一个简单的交换机连接到我的计算机。每当开关关闭时，我想增加一个变量。我正在为该项目使用 Visual C++。

谁能告诉我这个任务的方法？我使用 Google 并找到了通过串行接口读取和写入数据的示例，但我不知道如何实现计数器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:47:59.997

我不认为这适用于普通的串口，因为串口通常使用脉冲（对于连续的 1 或 0，几个脉冲可能是相同的电平，但至少会有一个脉冲的开始/结束顺序，通常在中间）。消息中有一定数量的位，通常是 1 个开始位、8 个数据位和 1 个停止位。

如果您正在处理的系统上有这样的东西，您可以使用并行端口或 GPIO 引脚来执行此操作。

或者您必须实现一些比简单开关更多的逻辑，以便该事物发送一系列脉冲以组成一个完整的数据包，并具有“关闭”消息和“打开”消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:18:39.860

可以通过开关或电线将串口的 DTR 引脚连接到 DSR 或 RI 等引脚。使用.NET框架的串口类可以很容易的控制串口。代码示例可以在 msdn 串口类条目中找到。

# javascript - 从用户输入动态创建表

> ID：14070429
> 
> 赞同：0
> 
> 时间：2012-12-28T13:41:56.087
> 
> 标签：javascript, tabular

我正在从表单中获取用户输入并尝试从该输入创建一个表。输入应确定行数和列数。我尝试了以下方法，但我什么也没得到。我有点难过。任何帮助表示赞赏。

JS

```
function makeChart(){
    var table = document.createElement("table");
    var taskName = document.getElementById("taskname").value + "</br>";
    var numDays = document.getElementById("days").value + "</br>";
    var howOften = document.getElementById("times").value + "</br>";
    var rows=table.insertRow(howOften);
    var cols=rows.insertCell(numDays);
    document.getElementById("holdTable").appendChild(table);
    table.appendChild(rows);
    table.appendChild(cols);
} 
```

HTML

```
<div id="holdTable">
    <form id="chartInput">
        <label for="taskname">Task</label>
        <input id="taskname" type="text" placeholder="Enter the task name here"> <br>

        <label for="days">How many days</label>
        <input id="days" name="days" type="number" min="1" max="7"> <br>

        <label for="times">How many times a day</label>
        <input id="times" name="times" type="number" min="1" max="4"> <br>

        <input id="createChart" type="button" value="Make the chart" onClick="makeChart();"> <br>
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:48:53.553

我认为你需要使用循环。

```
for(var i = 1;i<=howOften;i++)
{
    var row = table.insertRow(-1)
    for(var i = 1;i<=numDays;i++)
    {
        row.insertCell(-1)
    }
    table.appendChild(row);//edited
} 
```

尝试使用它代替这 2 行：

```
var rows=table.insertRow(howOften);
var cols=rows.insertCell(numDays); 
```

**EXPLANATION**函数在括号中指定的索引位置
`insertRow`插入新表行（ ）。`<tr>`它只插入一行。因此，如果索引为 0 `<tr>`，则将作为第一行附加到表的开头。同样 -1`<tr>`作为表中的最后一行追加。

`insertCell`函数将 cell( ) 插入`<td>`到 row() 的索引位置`<tr>`。与上面相同 -1 表示它在行的最后一个位置添加新单元格。

每一行都必须附加到表中或存储在数组中以供以后使用，因此我添加`table.appendChild(row);`了将每个连续行添加到数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:26:40.897

[`table.insertRow`](https://developer.mozilla.org/en-US/docs/DOM/table.insertRow)并将[`tableRow.insertCell`](https://developer.mozilla.org/en-US/docs/DOM/tableRow.insertCell)您希望插入的索引作为参数。相反，您将传递一个字符串，其中包含附加到 HTML`BR`标记的字段值（那是一个格式错误的标记）。

此外，要将文本添加到元素，您需要创建文本节点[`document.createTextNode`](https://developer.mozilla.org/en-US/docs/DOM/document.createTextNode)并将这些节点附加到相关元素。

最后，`cols`应该是 的孩子`rows`，而不是 的`table`。所以你的线，`table.appendChild(cols)`也是错误的。

除了这些评论，我不能再进一步了。我不确定您在输出的表结构中到底在寻找什么。在我看来，你想要一行两列，但达曼的回答表明他读它就像你想要多行一样。考虑使用一些显示所需表格的标记来更新您的问题。

**编辑：**使用您的评论获取更多信息，我编写了以下代码演示供您尝试：http: [//jsfiddle.net/Kkb7n/](http://jsfiddle.net/Kkb7n/)。为了演示，我让它使用“任务名称”作为创建单元格的文本内容。

*修改 JS 以防 JSFiddle 宕机：*

```
var makeChart = function () {
    var table = document.createElement('table'),
        taskName = document.getElementById('taskname').value,
        numDays = document.getElementById('days').value, //columns
        howOften = document.getElementById('times').value, //rows
        row,
        r,
        col,
        c;

    for (r = 0; r < howOften; r++) {
        row = table.insertRow(-1);

        for (c = 0; c < numDays; c++) {
            col = row.insertCell(-1);
            col.appendChild(document.createTextNode(taskName));
        }
    }

    document.getElementById('holdTable').appendChild(table);
}; 
```

# c# - 使用单独的对象进行同步

> ID：14070431
> 
> 赞同：2
> 
> 时间：2012-12-28T13:42:07.907
> 
> 标签：c#, multithreading, synchronization, locking

我经常看到这个：

```
object lockObj;
List<string> myStrs;

// ...

lock(lockObj)
{
    myStrs.Add("hello world");
} 
```

为什么要有单独的对象？当然你可以这样做：

```
List<string> myStrs;

// ...

lock(myStrs)
{
    myStrs.Add("hello world");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T13:49:22.323

仅当`myStrs`是 public 时直接在列表上锁定是一个问题，因此也可以被其他调用者锁定，从而导致可能的死锁。

如果是私人成员，那应该没有问题，但无论如何锁定一个单独的成员`object`是一个好习惯。

请参阅此类似问题以获得更详细的答案： [为什么 lock(this) {...} bad?](https://stackoverflow.com/questions/251391/why-is-lockthis-bad)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T14:05:55.710

> 通常，避免锁定公共类型或超出代码控制范围的实例。常见的构造 lock (this)、lock (typeof (MyType)) 和 lock ("myLock") 违反了此准则：
> 
> 1.  如果实例可以公开访问，lock (this) 是一个问题。
> 2.  如果 MyType 可公开访问，则 lock (typeof (MyType)) 是一个问题。
> 3.  lock(“myLock”) 是一个问题，因为进程中使用相同字符串的任何其他代码都将共享相同的锁。
> 
> 最佳实践是定义一个私有对象来锁定，或者一个私有静态对象变量来保护所有实例共有的数据。

形成文档[锁 c#](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T13:51:13.760

您的字符串列表是用于内部实现细节的列表。

如果您更改实现以重新初始化字符串列表的方式，则第二个版本的问题可能会上升。

那么你的实现的线程安全性可能会被破坏。

因此，最好使用单独的对象进行同步并将该对象声明为只读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T13:55:30.040

这个想法是始终锁定只能由我们正在查看的代码访问的私有成员。而当我们锁定我们无法控制的成员（如公共成员或类似成员）时，很可能代码的其他部分已经可以锁定。这可能会导致意外的阻塞行为。

所以，我认为这导致了经验法则/拥有私有对象的最佳实践，特别是用于锁定。

我很想看看是否还有更多原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T14:04:45.887

如果将列表用作锁定对象，并将其重置为**null**，则 lock(myStringList) 将引发 ArgumentNullException。下面是控制台应用程序的简单测试代码。

```
 private static IList<string> mystringList = new List<string>();

static void Main(string[] args)
{
    new Thread(() =>
        {
            try
            {

                while (true)
                {
                    //Acquire the lock
                    lock (mystringList)
                    {
                        //Do something with the data
                        Thread.Sleep(100);
                        Console.WriteLine("Lock acquired");
                    }
                }
            }
            catch (Exception exception)
            {
                Console.WriteLine("Exception: " +exception.Message);
            }
        }).Start();

    new Thread(() =>
        {
            //Suppose we do something
            Thread.Sleep(1000);

            //And by some how reset the list to null
            mystringList = null;

        }).Start();

    Console.ReadLine();
} 
```

# c# - MVC3 C# Entity Framework 填充基于下拉列表选择的文本框

> ID：14070437
> 
> 赞同：2
> 
> 时间：2012-12-28T13:42:29.147
> 
> 标签：c#, jquery, asp.net-mvc-3, entity-framework

我试过几个链接，这让我找到了我的代码......这是行不通的：D

[获取 DropDownLists](http://www.mikesdotnetting.com/Article/128/Get-The-Drop-On-ASP.NET-MVC-DropDownLists)和 [创建级联下拉列表](http://stephenwalther.com/archive/2008/09/07/asp-net-mvc-tip-41-creating-cascading-dropdown-lists-with-ajax.aspx)

我试图让用户从下拉列表中选择一个零件号 (itemnmbr)，并在他们选择后，让页面用正确的值刷新零件描述 (itemdesc) 文本框。下面是我得到的最接近的。

**查看代码：**

```
 <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $("#ITEMNMBR").change(function () {
            $.get("/PartsLabor/GetPartDesc", $(this).val(), function (data) {
                $("#ITEMDESC").val(data);
            });
        });
    });
</script>

@using (Html.BeginForm()) 
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Add part to call: @ViewBag.CALLNBR</legend>

            @Html.LabelFor(model => model.ITEMNMBR, "Item Number")
            @Html.DropDownList("ITEMNMBR", (SelectList) ViewBag.Items, "Please Select a Part #")
            @Html.ValidationMessageFor(model => model.ITEMNMBR)
        <br />
            @Html.LabelFor(model => model.ITEMDESC, "Description")
            @Html.EditorFor(model => model.ITEMDESC)
            @Html.ValidationMessageFor(model => model.ITEMDESC)
        <br />
            <input type="submit" class="submit" value="Add Part" />

    </fieldset>
} 
```

**控制器代码：**

```
 [Authorize]
    public ActionResult PCreate(string call)
    {

        var q = db.IV00101.Select(i => new { i.ITEMNMBR});
        ViewBag.Items = new SelectList(q.AsEnumerable(), "ITEMNMBR", "ITEMNMBR");
        ViewBag.CALLNBR = call;
        return View();
    }

    public ActionResult GetPartDesc(char itemnmbr)
    {
        var iv101 = db.IV00101.FirstOrDefault(i => i.ITEMNMBR.Contains(itemnmbr));
        string desc = iv101.ITEMDESC;
        return Content(desc);
    } 
```

Firefox 错误控制台返回：

> 时间戳：2012 年 12 月 28 日下午 2:40:29 警告：不推荐使用属性的指定属性。它总是返回 true。源文件： [http](http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.6.4.min.js) ://ajax.aspnetcdn.com/ajax/jquery/jquery-1.6.4.min.js行：2
> 
> Timestamp: 12/28/2012 2:40:34 PM Warning: Use of getAttributeNode() is deprecated. Use getAttribute() instead. Source File: ~/Scripts/jquery-1.6.4.min.js Line: 3

Firefox Web Console returns those two, as well as the below (which lands between the above two):

> Request URL: ~/PartsLabor/GetPartDesc?002N02337 Request Method: GET Status Code: HTTP/1.1 500 Internal Server Error

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:14:36.673

I think you are on the right track. Check out the examples on [this page](http://api.jquery.com/jQuery.get/) on how to use get().

guessing GetPartDesc is never getting hit or it's not getting the parameter that you are expecting. It will probably work if you change:

```
 $.get("/PartsLabor/GetPartDesc", $(this).val(), function (data) {
            $("#ITEMDESC").val(data);
        }); 
```

to:

```
 $.get("/PartsLabor/GetPartDesc", { itemnmbr: $(this).val() }, function (data) {
            $("#ITEMDESC").val(data);
        }); 
```

But I haven't tested it. Also I personally use the jquery .ajax method for this kind of thing. I've never used get, though reading a little seems like what you have should work. Anyway you can try something like this:

```
 $.ajax({
            url: '/PartsLabor/GetPartDesc',
            data: { itemnmbr: $(this).val() }
        }).done(function (data) {
            $("#ITEMDESC").val(data);
        }); 
```

# extjs - extjs 4 和翻译

> ID：14070438
> 
> 赞同：2
> 
> 时间：2012-12-28T13:42:30.200
> 
> 标签：extjs, extjs4, translation

我正在使用 extjs 4 进行编码。我想为法语和英语提供两种语言按钮。我已经用谷歌搜索了这个问题，但我没有找到解决方案。我希望我能在这里找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:55:49.827

Sencha 介绍了以下方法：

将可翻译文本保存在单独的配置中：

```
Ext.define('MyForm',
    extend: 'Ext.form.Panel',

    // the next config is translatable
    submitBtnText: 'Submit',

    // ... 
```

创建另一个覆盖语言环境配置的 js 文件并将其（js 文件）包含在 html 页面中：

```
// MyForm-fr.js
Ext.define('MyFormFr', {
    override: 'MyForm',
    submitBtnText: 'soumettre'
}); 
```

看看[Sencha 的官方例子](http://cdn.sencha.com/ext-4.1.1a-gpl/examples/locale/dutch-form.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T13:55:50.233

您可以将翻译（例如作为替代）放在不同的文件中，并根据语言加载它们。你可以在这里看到一个例子：http: [//docs.sencha.com/ext-js/4-0/# !/example/locale/multi-lang.html](http://docs.sencha.com/ext-js/4-0/#!/example/locale/multi-lang.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T11:58:38.080

我看了一下[Sencha 的官方示例](http://cdn.sencha.com/ext-4.1.1a-gpl/examples/locale/dutch-form.html)，但现在我想将翻译添加到我的应用程序中。在我遵循的示例中，files.js 和 file.html 位于同一目录中，但我的应用程序遵循 MVC 架构，因此有所不同。我有一个 js 文件，其中包含要翻译的单词：

```
if (Ext.app.ContactForm) {
Ext.apply(Ext.app.ContactForm.prototype, {
    formTitle: 'Contact Informatie (Dutch)',
    firstName: 'Nom',
    lastName: 'Prénom'
}); 
```

而我的应用程序只包含一个file.html，所以我不知道把file.js 放在哪里，在file.html 的同一目录中还是在view 文件夹中！以及它如何在所有应用程序中都可以阅读

# javascript - Internet Explorer 中的 JavaScript 数组索引“未定义”

> ID：14070442
> 
> 赞同：3
> 
> 时间：2012-12-28T13:42:41.047
> 
> 标签：javascript, internet-explorer, google-chrome

以下脚本为字符串中的每个字符将*undefined打印到控制台，但在 Chrome 中可以正常工作。*

```
<script>
function main()
{
    var x = "hello world";
    for ( var i = 0; i < x.length; ++i ) {
        console.log( x[i] );
    }
}
main();
</script> 
```

我是否必须对数组做一些事情才能让它在所有浏览器中正常工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T13:44:48.137

某些浏览器`[]`支持，但不是全部：

> 类似数组的字符访问（上面的第二种方式）不是 ECMAScript 3 的一部分。它是 JavaScript 和 ECMAScript 5 的特性。

为了获得最大的兼容性，请[`String.charAt()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/charAt)改用：

```
<script>
function main()
{
    var x = "hello world";
    for ( var i = 0; i < x.length; ++i ) {
        console.log( x.charAt(i) );
    }
}
main();
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T13:44:59.957

旧版本的 IE 不支持使用数组表示法 ( `string[x]`) 来访问字符串，请改用：[`charAt()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/charAt)。

```
<script>
    function main() {
        var x = "hello world";
        for ( var i = 0; i < x.length; ++i ) {
            console.log( x.charAt(i) );
        }
    }
    main();
</script> 
```

此外，如果您直接执行您的函数，您还可以创建一个自执行匿名函数（以​​保留范围/不污染全局命名空间）

```
<script>
    (function main() {
        var x = "hello world";
        for ( var i = 0; i < x.length; ++i ) {
            console.log( x.charAt(i) );
        }
    }());
</script> 
```

当然，除非您还必须从其他地方运行它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-28T13:48:12.260

这是`console`这里的问题。该对象在 IE Javascript 引擎中不存在。

如果你这样做，它适用于两者

```
<script>
function main()
{
    var x = "hello world", result = "";
    for ( var i = 0; i < x.length; ++i )
       result += x[i];
    document.write(result); //it prints "hello world" on page
}
main();
</script> 
```

* * *

**编辑：**

*   `console`对象在 IE10 之前不存在（正如 Cerbrus 正确指出的那样，除非您打开 IE 开发人员工具，在这种情况下它也存在于 IE8 上）
*   `[]`访问字符串 字符可以在 IE8+ 中使用（在 IE7 上它还不能工作）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-09-16T10:16:28.727

如果您使用以下代码，请尝试将 TimeOut 值增加到最大值...

```
window.setTimeOut('Your Js function(), 150) 
```

现在，它增加到

```
window.setTimeOut('Your Js function(), 2000) 
```

# css - 具有动态高度的 CSS 和 DIV

> ID：14070446
> 
> 赞同：1
> 
> 时间：2012-12-28T13:43:12.790
> 
> 标签：css, html, dynamic, height

我有一个像这样的网页结构：

```
<div class="total">
    <div class="menu">
    </div>
    <div class="content">
    </div>
</div> 
```

所以“菜单” div 包含我的左侧菜单，“内容” div 包含一些动态文本。实际上，我所做的结构都以正确的方式定位在我的“总”div中。我实际上在我的 CSS 上编辑了我的“总”div，如下所示：

```
.total{
position:relative;
top:50px;
margin: 0 auto;
background-color:#eeeeee;
height:auto;
border:2px solid #000;
border-color:rgb(82,115,154);
} 
```

问题是我无法获得我真正想要的东西：边框都在顶部（它就像一个水平行）并且我的具有不同背景颜色的 div 没有出现。

如何使“总” div 的高度动态化？

**编辑：**链接到[jsFiddle](http://jsfiddle.net/CJZCt/2/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T13:56:21.757

该`.total`元素已完全折叠，因为它的所有子元素都是浮动的。您需要做的就是添加一个clearfix。

[http://jsfiddle.net/CJZCt/3/](http://jsfiddle.net/CJZCt/3/)

```
.total{
position:relative;
top:50px;
margin: 0 auto;
background-color:#eeeeee;
height:auto;
border:2px solid #000;
border-color:rgb(82,115,154);
    overflow: hidden;
} 
```

其他清除浮动的方法可以在这里找到： [https ://stackoverflow.com/a/1633170/1652962](https://stackoverflow.com/a/1633170/1652962)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:00:22.053

您可以使用 clearfix 解决此问题：http: [//nicolasgallagher.com/micro-clearfix-hack/](http://nicolasgallagher.com/micro-clearfix-hack/)

将此添加到您的 css，并将 cf 类添加到您的 div.content

```
/**
 * For modern browsers
 * 1\. The space content is one way to avoid an Opera bug when the
 *    contenteditable attribute is included anywhere else in the document.
 *    Otherwise it causes space to appear at the top and bottom of elements
 *    that are clearfixed.
 * 2\. The use of `table` rather than `block` is only necessary if using
 *    `:before` to contain the top-margins of child elements.
 */
.cf:before,
.cf:after {
    content: " "; /* 1 */
    display: table; /* 2 */
}

.cf:after {
    clear: both;
}

/**
 * For IE 6/7 only
 * Include this rule to trigger hasLayout and contain floats.
 */
.cf {
    *zoom: 1;
} 
```

测试：http: [//jsfiddle.net/CJZCt/4/](http://jsfiddle.net/CJZCt/4/)

# javascript - 音频文件在页面加载时不起作用

> ID：14070453
> 
> 赞同：1
> 
> 时间：2012-12-28T13:43:46.550
> 
> 标签：javascript, loops, audio

```
document.getElementById('audio_1').addEventListener('ended', function() {
    this.play();
    this.currentTime = 0;

}, false); 
```

在此音乐中，不会在页面加载时开始，它会重复 n 次，一旦开始..但不是一次页面加载

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:45:15.177

您永远不会开始播放。您需要调用`.play()`onload 或使用标签`autoplay`中的属性。`<audio>`

哦，你可以在没有任何 JavaScript 的情况下更容易地实现循环。只需使用标签`loop`中的属性。`<audio>`

# php - 在 PHP 中评估类似 MongoDB 的 JSON 查询

> ID：14070460
> 
> 赞同：9
> 
> 时间：2012-12-28T13:44:26.523
> 
> 标签：php, arrays, multidimensional-array, iterator, evaluation

考虑在这个 JSON 对象中表达的以下（相当复杂的）查询：

```
{
    "name": "Kindle Fire",
    "sale": true,
    "price": {
        "$gt": 199,
        "$lt": 264
    },
    "price.vat": { // bogus, just to show $a['price.vat'] == $a['price']['vat']
        "$lte": 1.2
    },
    "$or": {
        "qty": {
            "$gt": 30
        },
        "eta": {
            "$or": {
                "$lt": 3,
                "$gt": 30
            }
        }
    },
    "countriesAvailable": {
        "$in": [
            "US",
            "CA"
        ]
    }
} 
```

## 客观的

* * *

我想解析该 JSON，以便它评估为 PHP 等效项（`$a`我的目标数据在哪里）：

```
$a['name'] == 'Kindle Fire' &&
$a['sale'] == true &&
(
    $a['price'] > 199 && $a['price'] < 264
) &&
$a['price']['vat'] <= 1.2 &&
(
    $a['qty'] > 30 ||
    (
        $a['eta'] < 3 || $a['eta'] > 30
    )
) &&
in_array($a['countriesAvailable'], array('US', 'CA')) 
```

我几乎没有构建表达式评估器的经验。我的想法是从最内层到最外层遍历查询，根据需要调用对应的[MongoDB算子](http://docs.mongodb.org/manual/reference/operators/)方法。

假设`$a`匹配查询，这将是评估计划：

```
$query = array();
$query['name'] = true;
$query['sale'] = true;
$query['price'] = array();
$query['price']['$gt'] = true;
$query['price']['$lt'] = true;
$query['price']['vat'] = array();
$query['price']['vat']['$lte'] = true;
$query['$or'] = array();
$query['$or']['qty'] = array();
$query['$or']['qty']['$gt'] = false;
$query['$or']['eta'] = array();
$query['$or']['eta']['$or'] = array();
$query['$or']['eta']['$or']['$lt'] = true;
$query['$or']['eta']['$or']['$gt'] = false;
$query['countriesAvailable'] = array();
$query['countriesAvailable']['$in'] = true; 
```

第二步：

```
$query = array();
$query['name'] = true;
$query['sale'] = true;
$query['price'] = array();
$query['price']['$gt'] = true;
$query['price']['$lt'] = true;
$query['price']['vat'] = true;
$query['$or'] = array();
$query['$or']['qty'] false;
$query['$or']['eta'] = array();
$query['$or']['eta']['$or'] true;
$query['countriesAvailable'] = true; 
```

第三步：

```
$query = array();
$query['name'] = true;
$query['sale'] = true;
$query['price'] = true;
$query['$or'] = array();
$query['$or']['qty'] false;
$query['$or']['eta'] true;
$query['countriesAvailable'] = true; 
```

第四步：

```
$query = array();
$query['name'] = true;
$query['sale'] = true;
$query['price'] = true;
$query['$or'] = true;
$query['countriesAvailable'] = true; 
```

由于所有值都是布尔值，因此评估结束返回`!in_array(false, $query, true)`。

如果存在更好的方法，请告诉我。

## 问题：访问父数组键

* * *

我一直试图获取最里面的元素和相关的（忽略运算符）数组索引*路径*，例如，如果我使用 a`RecursiveIteratorIterator`我得到第一次迭代的正确值：

```
$nodes = new ArrayIterator($query);
$iterator = new RecursiveArrayIterator($nodes);
$iteratorIterator = new RecursiveIteratorIterator($iterator, RecursiveIteratorIterator::LEAVES_ONLY);

print_r(iterator_to_array($iteratorIterator));

Array
(
    [name] => Kindle Fire HD
    [sale] => 1
    [$gt] => 30
    [$lt] => 3
    [$lte] => 1.2
    [0] => US
    [1] => CA
) 
```

但是，它几乎没有用，因为我无法确定`$a`键所指的索引，更不用说键值被后面的条目覆盖以及我无法更改它们的值的事实。

我也尝试过使用[`RecursiveArrayIterator`](http://php.net/manual/en/class.recursivearrayiterator.php)，但是如果没有`hasParent()`/`getParent()`方法，与简单地对数组进行 foreach 相比，它似乎并没有给我太多优势。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:45:30.250

我很快就阅读了您的问题，听起来您想访问叶子并了解它们的关键路径。

所以在这里：

```
$ritit = new RecursiveIteratorIterator(new RecursiveArrayIterator($myArray));
foreach ($ritit as $leafValue) {
    $keyPath = array();
    foreach (range(0, $ritit->getDepth()) as $depth) {
        $keyPath[] = $ritit->getSubIterator($depth)->key();
    }
    // do something with $keyPath

    // or
    $hasParent = $ritit->getDepth() > 0;
    $parentIter = $ritit->getSubIterator($ritit->getDepth() - 1);
    $parentKey = $parentIter->key();
} 
```

# hibernate - 在与 Hibernate 和 Criteria 的一对多关系中查询后，我无法访问列表

> ID：14070465
> 
> 赞同：0
> 
> 时间：2012-12-28T13:44:37.053
> 
> 标签：hibernate, list, criteria, one-to-many

我对 Hibernate、一对多关联和列表有疑问。在我的模型中，我有国家，对于每个国家，我都有多个描述该国家地址结构的信息。我想访问这些元素的列表。

这是我的班级国家：

```
public class Country {
  private Long id;
  private String name;
  private List<AddressElement> addressElementList = null;
  ...
} 
```

我的班级地址元素：

```
public class AddressElement {
  private Long id;
  private int pos;
  private int line;
  private String name;
  private String mask;
  ...
} 
```

我的映射：

```
<hibernate-mapping  package="org.devtutos.tuto5.domaine">
  <class  name="Country" table="tuto.COUNTRY">
    <id name="id" type="java.lang.Long" column="COUNTRY_ID" unsaved-value="null">
      <generator class="native">
        <param name="sequence">tuto.SEQ_COUNTRY</param>
      </generator>
    </id>
    <natural-id mutable="true">
      <property name="name" column="COUNTRY_NAME" type="java.lang.String"/>
    </natural-id>
    <list name="addressElementList" table="tuto.ADDRESS_ELEMENT" lazy="false">
      <key  foreign-key="country_address_element_fk">
        <column name="COUNTRY_ID" not-null="true"/>
      </key>
      <list-index>
        <column name="ADDRESS_ELEMENT_POS" not-null="true" />
      </list-index>
      <one-to-many class="AddressElement"/>
    </list>
  </class>
</hibernate-mapping>
<hibernate-mapping  package="org.devtutos.tuto5.domaine">
  <class name="AddressElement" table="tuto.ADDRESS_ELEMENT">
    <id name="id" type="java.lang.Long" column="ADDRESS_ELEMENT_ID" unsaved-value="null">
      <generator class="native">
        <param name="sequence">tuto.SEQ_ADDRESS_ELEMENT</param>
      </generator>
    </id>
    <property name="line" column="ADDRESS_ELEMENT_LINE" not-null="true" type="java.lang.Integer" />
    <property name="name" column="ADDRESS_ELEMENT_NAME" not-null="true" type="java.lang.String" />
    <property name="mask" column="ADDRESS_ELEMENT_TYPE_MASK" not-null="true" type="java.lang.String" />
    <property name="pos" column="ADDRESS_ELEMENT_POS" not-null="true" type="java.lang.Integer" />
  </class>
</hibernate-mapping> 
```

这是我的代码：

```
criteria = getSessionFactory().getCurrentSession().createCriteria(Country.class);
criteria.add(Restrictions.eq("name", countryName));
criteria.setFetchMode("addressElementList",FetchMode.JOIN);
Country country = (Country) criteria.list().get(0);
if (country == null) {
  logger.log(Level.INFO, "ERREUR DE COHERENCE INTERNE : Pays '".concat(countryName).concat("'non trouvé:"));
} else {
  logger.log(Level.INFO, "Pays trouvé.");
  logger.log(Level.INFO, "Nom du Pays :".concat(country.getName()));
  logger.log(Level.INFO, "Code du Pays :".concat(String.valueOf(country.getId())));
  liste = country.getAddressElementList();
  logger.log(Level.INFO, "Taille de la liste des éléments d'adresse :".concat(String.valueOf(liste.size())));
  for (AddressElement elem : liste) {
    if (elem == null) {logger.log(Level.INFO, "L'élément d'adresse est null.");}
    logger.log(Level.INFO, "Element de la liste : ID = ".concat(String.valueOf(elem.getId())));    **** Line of the error
    logger.log(Level.INFO, "Element de la liste : POS = ".concat(String.valueOf(elem.getPos())));
    logger.log(Level.INFO, "Element de la liste : NOM = ".concat(elem.getName()));
  }
} 
```

这是我的日志：

```
Hibernate: 
select 
this_.COUNTRY_ID as COUNTRY1_2_1_, 
this_.COUNTRY_NAME as COUNTRY2_2_1_, 
addressele2_.COUNTRY_ID as COUNTRY6_2_3_, 
addressele2_.ADDRESS_ELEMENT_ID as ADDRESS1_3_, 
addressele2_.ADDRESS_ELEMENT_POS as ADDRESS5_3_, 
addressele2_.ADDRESS_ELEMENT_ID as ADDRESS1_0_0_, 
addressele2_.ADDRESS_ELEMENT_LINE as ADDRESS2_0_0_, 
addressele2_.ADDRESS_ELEMENT_NAME as ADDRESS3_0_0_, 
addressele2_.ADDRESS_ELEMENT_TYPE_MASK as ADDRESS4_0_0_, 
addressele2_.ADDRESS_ELEMENT_POS as ADDRESS5_0_0_ 
from 
tuto.COUNTRY this_ left outer join tuto.ADDRESS_ELEMENT addressele2_ 
on this_.COUNTRY_ID=addressele2_.COUNTRY_ID 
where 
this_.COUNTRY_NAME=?
27 déc. 2012 16:19:09 org.devtutos.tuto5.dao.CountryHibernate getCountryByName
INFO: Pays trouvé.
27 déc. 2012 16:19:09 org.devtutos.tuto5.dao.CountryHibernate getCountryByName
INFO: Nom du Pays :FRANCE
27 déc. 2012 16:19:09 org.devtutos.tuto5.dao.CountryHibernate getCountryByName
INFO: Code du Pays :1
27 déc. 2012 16:19:09 org.devtutos.tuto5.dao.CountryHibernate getCountryByName
INFO: Taille de la liste des éléments d'adresse :4
27 déc. 2012 16:19:09 org.devtutos.tuto5.dao.CountryHibernate getCountryByName
INFO: L'élément d'adresse est null.
27 déc. 2012 16:19:09 org.apache.catalina.core.StandardWrapperValve invoke
GRAVE: Servlet.service() for servlet [tuto5] in context with path [/tuto-5] threw exception [Request processing failed; nested exception is org.springframework.webflow.execution.ActionExecutionException: Exception thrown executing [AnnotatedAction@3f610944 targetAction org.devtutos.tuto5.mvc.webflow.action.receptionAction@4dc6bbd3, attributes = map['method' -> 'enregistrerLUtilisateur']] in state 'enregistrerLUtilisateur' of flow 'reception' -- action execution attributes were 'map[[empty]]'] with root cause
java.lang.NullPointerException
at org.devtutos.tuto5.dao.CountryHibernate.getCountryByName(CountryHibernate.java:103)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:319)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
...
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

我无法访问某个国家/地区的地址元素信息。我尝试了几件事：我打开了惰性模式并使用 JOIN 指定了一个获取模式，但它不起作用。最令人惊讶的是列表已填充（有 4 个元素）并且以下代码运行良好（因此，信息在数据库中，setter 和 getter 工作）：

```
logger.log(Level.INFO, "Lecture de tous les éléments d'adresse.");
criteria = getSessionFactory().getCurrentSession().createCriteria(AddressElement.class);
liste = criteria.list();
logger.log(Level.INFO, "Taille de la liste des éléments d'adresse : ".concat(String.valueOf(liste.size())));
for (AddressElement elem : liste){
  if (elem == null) {logger.log(Level.INFO, "L'élément d'adresse est null.");}
  logger.log(Level.INFO, "Element de la liste : ID = ".concat(String.valueOf(elem.getId())));
  logger.log(Level.INFO, "Element de la liste : POS = ".concat(String.valueOf(elem.getPos())));
  logger.log(Level.INFO, "Element de la liste : NOM = ".concat(elem.getName()));
} 
```

这是这段代码的结果：

```
INFO: Lecture de tous les éléments d'adresse.
Hibernate: select this_.ADDRESS_ELEMENT_ID as ADDRESS1_0_0_, this_.ADDRESS_ELEMENT_LINE as ADDRESS2_0_0_, this_.ADDRESS_ELEMENT_NAME as ADDRESS3_0_0_, this_.ADDRESS_ELEMENT_TYPE_MASK as ADDRESS4_0_0_, this_.ADDRESS_ELEMENT_POS as ADDRESS5_0_0_ from tuto.ADDRESS_ELEMENT this_
27 déc. 2012 16:19:09 org.devtutos.tuto5.dao.CountryHibernate getCountryByName
INFO: Taille de la liste des éléments d'adresse : 6
27 déc. 2012 16:19:09 org.devtutos.tuto5.dao.CountryHibernate getCountryByName
INFO: Element de la liste : ID = 1
27 déc. 2012 16:19:09 org.devtutos.tuto5.dao.CountryHibernate getCountryByName
INFO: Element de la liste : POS = 1
27 déc. 2012 16:19:09 org.devtutos.tuto5.dao.CountryHibernate getCountryByName
INFO: Element de la liste : NOM = Code Postal
27 déc. 2012 16:19:09 org.devtutos.tuto5.dao.CountryHibernate getCountryByName
INFO: Element de la liste : ID = 2
27 déc. 2012 16:19:09 org.devtutos.tuto5.dao.CountryHibernate getCountryByName
INFO: Element de la liste : POS = 2
27 déc. 2012 16:19:09 org.devtutos.tuto5.dao.CountryHibernate getCountryByName
INFO: Element de la liste : NOM = Ville
27 déc. 2012 16:19:09 org.devtutos.tuto5.dao.CountryHibernate getCountryByName
INFO: Element de la liste : ID = 3
27 déc. 2012 16:19:09 org.devtutos.tuto5.dao.CountryHibernate getCountryByName
INFO: Element de la liste : POS = 3
27 déc. 2012 16:19:09 org.devtutos.tuto5.dao.CountryHibernate getCountryByName
INFO: Element de la liste : NOM = Batiment
27 déc. 2012 16:19:09 org.devtutos.tuto5.dao.CountryHibernate getCountryByName
INFO: Element de la liste : ID = 4
27 déc. 2012 16:19:09 org.devtutos.tuto5.dao.CountryHibernate getCountryByName
INFO: Element de la liste : POS = 1
27 déc. 2012 16:19:09 org.devtutos.tuto5.dao.CountryHibernate getCountryByName
INFO: Element de la liste : NOM = District
27 déc. 2012 16:19:09 org.devtutos.tuto5.dao.CountryHibernate getCountryByName
INFO: Element de la liste : ID = 5
27 déc. 2012 16:19:09 org.devtutos.tuto5.dao.CountryHibernate getCountryByName
INFO: Element de la liste : POS = 2
27 déc. 2012 16:19:09 org.devtutos.tuto5.dao.CountryHibernate getCountryByName
INFO: Element de la liste : NOM = Zone
27 déc. 2012 16:19:09 org.devtutos.tuto5.dao.CountryHibernate getCountryByName
INFO: Element de la liste : ID = 6
27 déc. 2012 16:19:09 org.devtutos.tuto5.dao.CountryHibernate getCountryByName
INFO: Element de la liste : POS = 1
27 déc. 2012 16:19:09 org.devtutos.tuto5.dao.CountryHibernate getCountryByName
INFO: Element de la liste : NOM = City
27 déc. 2012 16:19:09 org.devtutos.tuto5.dao.CountryHibernate getCountryByName 
```

我在第一次执行时注意到我的列表的大小是错误的（4 而不是 3）。在我的示例中， 的值为`countryName`“FRANCE”。这是我的表格的内容：

国家：

```
COUNTRY_ID      CONTRY_NAME 
1                    "FRANCE"
2                    "HYPERION"
3                    "ATLANTIS" 
```

地址_元素：

```
ADDRESS_ELEMENT_ID      COUNTRY_ID       ADDRESS_ELEMENT_POS    ADDRESS_ELEMENT_NAME        ADDRESS_ELEMENT_MASK    ADDRESS_ELEMENT_LINE
1                       1               1                       "Code Postal"               "\d{5}"                 1
2                       1               2                       "Ville"                     "[A-Z\-]{1,50}"         1
3                       1               3                       "Batiment"                  "[A-F]"                 1
4                       2               1                       "District"                  "[A-Z]{1,20}"           1 
5                       2               2                       "Zone"                      "[A-5]{1,5}"            2
6                       3               1                       "City"                      "[A-Z]{1,9}"            1 
```

我究竟做错了什么？我不明白为什么`elem`在第一次执行时为空。有人可以帮助我吗？

提前致谢。

祝新年快乐。;-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T12:43:07.700

谢谢你的帮助！

这是 Country 实体的完整代码。只有getter和setter。hashCode() 和 equals(Object obj) 方法已由 Eclipse 自动生成。

```
package org.devtutos.tuto5.domaine;

import java.util.ArrayList;
import java.util.List;

public class Country {

    private Long id;
    private String name;
    private List<AddressElement> addressElementList = null;

    public Country(){}

    public Long getId() {
        return id;
    }  

    public void setId(Long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }   

    public void addAddressElement( int pos, int line, String name, String mask){
        addressElementList.add(new AddressElement(pos,line,name,mask));
    }

    public List<AddressElement> getAddressElementList() {
        return addressElementList;
    }

    public void setAddressElementList(List<AddressElement> addressElementList) {
        this.addressElementList = addressElementList;
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((id == null) ? 0 : id.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
             return false;
        if (getClass() != obj.getClass())
            return false;
        Country other = (Country) obj;
        if (id == null) {
            if (other.id != null)
                return false;
        } else if (!id.equals(other.id))
            return false;
        return true;
    }
} 
```

我不知道问题出在哪里。再次感谢...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T13:13:45.297

您的列表由 column 索引`ADDRESS_ELEMENT_POS`。因此，如果 Hibernate 加载 country 的所有地址列表`1`，它将`1`在索引 1 处设置地址（因为它是`ADDRESS_ELEMENT_POS`该地址的值），`2`在索引 2 处设置地址，在索引 3 处设置地址 3。因为有没有地址`ADDRESS_ELEMENT_POS = 0`，列表的索引 0 将为空。

`list-index`将数据库中 ADDRESS_ELEMENT_POS 的值减 1，或在配置元素中添加以下属性： `base="1"`. 请参阅[http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#d0e10924](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#d0e10924)。

# c# - 通过 ElementName 绑定的 Listview 保持为空

> ID：14070469
> 
> 赞同：1
> 
> 时间：2012-12-28T13:44:53.630
> 
> 标签：c#, xaml, data-binding, windows-store-apps, elementname

我再次陷入了一些数据绑定问题。
这次我想将 a 绑定`ListView`到`SelectedItem`a 的`GridView`。我已经成功使用了这种类型的数据绑定，但现在 my`ListView`应该显示有关我在 my 中所选项目的一些详细信息`GridView`只是保持空白。尽管它们应该存在，但其中没有任何项目。
在 my 中的`GridView`属性绑定就好了`MainViewModel`。
用替换`ElementName`属性`x:Resouces`似乎不是一个选项，因为它也不起作用。
源码视图：

```
<GridView x:Name="gridViewOrderYears" 
          ItemsSource="{Binding SelectedCustOrders, Mode=TwoWay}"
          HorizontalAlignment="Left" 
          Grid.Row="1" 
          VerticalAlignment="Top" 
          Width="316" 
          Height="63" 
          Margin="657,316,0,0"
          SelectionMode="Single">
    <GridView.ItemTemplate>
        <DataTemplate>
            <Grid>
                <Border BorderThickness="1" BorderBrush="Aquamarine">
                    <StackPanel>
                        <TextBlock Text="{Binding Year}" FontSize="20"/>
                        <TextBlock Text="{Binding OrderCount}"/>
                    </StackPanel>
                </Border>
            </Grid>
        </DataTemplate>
    </GridView.ItemTemplate>
</GridView> 
```

此视图不绑定：

```
<ListView HorizontalAlignment="Left" 
          Height="231" 
          Margin="657,401,0,0" 
          Grid.Row="1" 
          VerticalAlignment="Top" 
          Width="316"
          DataContext="{Binding SelectedItem, ElementName=gridViewOrderYears}">
    <ListView.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding DoneOrders.Order_Date, ElementName=gridViewOrderYears}" />
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

`SelectedCustOrders`财产是一个`IList<OrderYears>`。
`OrderYears`遵循 my 中定义的数据值对象`MainViewModel`：

```
public class OrderYears
    {
        public int? Year { get; set; }
        public IList<Orders> DoneOrders { get; set; }
        public int OrderCount { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:49:08.427

我认为问题出在 ListView 绑定中，因为您尝试绑定到名为“Orders”的属性，该属性在 OrderYears 对象中不存在。您有一个可以绑定到的名为 DoneOrders 的属性（不要将属性名称与列表中元素的类型混淆！），但是如果您将 TextBlock 绑定到 IList，您将只获得 IList 对象的 guid。

尝试这样的事情，用 ListBox 替换你的 ListView （这对于你在这里尝试做的事情已经足够了）：

```
 <ListBox DataContext="{Binding ElementName=gridViewOrderYears, 
                                Path=SelectedItem.DoneOrders}" 
          DisplayMemberPath="Order_Date"/> 
```

无需创建模板，ListBox 内的项目将像文本块一样显示。请注意，您可以从绑定到 MainProperty.SubProperty 等嵌套属性中受益。

让我知道这是否有帮助，当您开始时，绑定可能会让人头疼......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T01:45:50.157

终于我明白了。
经过数小时的反复试验，终于`DataContext`用`ItemsSource`做的伎俩代替......
有时事情比你想象的要容易:)

# glsl - CG/GLSL 如何计算每个像素的相机距离？

> ID：14070470
> 
> 赞同：0
> 
> 时间：2012-12-28T13:44:55.513
> 
> 标签：glsl, shader, distance, hlsl, cg

我想在我的像素着色器中输出每个像素的实际相机距离。这意味着，结果应该（除了精度和夹紧的一些细微变化）不取决于近/远裁剪平面。

此外，一个正好位于近平面（并与之平行）的平面因此不应输出统一的结果，因为近平面中间的像素比边界上的像素更靠近相机。

如何计算像素着色器中每个像素的实际相机距离？（实际的着色器语言无关紧要）

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-12-28T14:16:38.093

您发送的相机位置是统一的。您将位置发送到可变的片段着色器。您可以对这些向量使用内置的距离函数。

[它看起来像这样](http://en.wikibooks.org/wiki/GLSL_Programming/Unity/Shading_in_World_Space)，但如果您不需要它，请不要使用 .w 使其过于复杂。

或者，将顶点位置乘以 ModelView 矩阵，然后使用 length() 。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-12-30T10:58:30.590

这是 Cg 中的示例[http://developer.download.nvidia.com/shaderlibrary/packages/DepthColor.cgfx.zip](http://developer.download.nvidia.com/shaderlibrary/packages/DepthColor.cgfx.zip)

它是为 FX Composer 设置的，对于任何其他格式都应该很容易采用。

# asp.net - 当原始 URL 包含查询字符串时，ASP.Net Context.RewritePath 不起作用

> ID：14070479
> 
> 赞同：1
> 
> 时间：2012-12-28T13:45:30.683
> 
> 标签：asp.net, rewritepath

我正在编写 IHttpModule 以允许对我们的详细信息页面之一进行友好的 URL 访问。当用户尝试使用[http://xyx.com/hotels/123/hotel-name.aspx](http://xyx.com/hotels/123/hotel-name.aspx)页面访问详细信息页面时，将在 IHttpModule 的 OnBeginRequest 方法中应用重写规则。

在这里，我使用 Context.RewritePath("~/DetailPages/DetailPage.aspx", "", "Code=123") 将路径更改为“~/DetailPages/DetailPage.aspx”，其中 123 是取自原始 URL 的代码.

现在，如果原始 URL 不包含任何查询字符串，则会调用详细信息页面。但是当用户尝试访问[http://xyz.com/hotels/123/hotel-name.aspx?show=advance](http://xyz.com/hotels/123/hotel-name.aspx?show=advance)时，重写代码将被执行为`Context.RewritePath("~/DetailPages/DetailPage.aspx", "", "Code=123&show=advance")`. 在这里，我们收到一条错误消息，提示“/hotels/123/hotel-name.aspx”页面不存在。

在调用“ `Context.RewritePath`”方法之前和之后，我从`Context.Request`下面给出的对象中获取了详细信息。如果原始 URL 中没有查询字符串，两者看起来都很完美且相同。但是，当原始 URL 包含查询字符串时，在“Context_Error”（侦听此请求执行的任何错误的事件）方法中，当获取时`Server.GetLastError()`说“/hotels/123/hotel-name.aspx”页面不存在。

请参阅以下来自`Context.Request`对象的跟踪详细信息。欢迎您的帮助/输入，因为我已经花了 8 小时没有任何积极的结果。

**--------------------------------------- 之前 - RewritePath 调用 ------------------- --------**

RawUrl : - /Hotels/123/hotel-name.aspx?a=b

AppRelativeCurrentExecutionFilePath : - ~/Hotels/123/hotel-name.aspx

CurrentExecutionFilePath : - /Hotels/123/hotel-name.aspx

参数：-a=b&__utma=221736730.1213284380.1356606190.1356674469.1356687004.4.....(Windows+NT+5.1%3b+rv%3a7.0.1)+Gecko%2f20100101+Firefox%2f7.0.1

路径： - /Hotels/123/hotel-name.aspx

物理路径：- D:\AppRoot\Hotels\161\hotel-name.aspx

网址：- [http://xyz.com/Hotels/123/hotel-name.aspx?a=b](http://xyz.com/Hotels/123/hotel-name.aspx?a=b)

**--------------------------------------- 之后 - RewritePath 调用 ------------------- --------**

RawUrl : - /Hotels/123/hotel-name.aspx?a=b

AppRelativeCurrentExecutionFilePath : - ~/DetailPages/DetailPage.aspx

CurrentExecutionFilePath : - /DetailPages/DetailPage.aspx

参数：-代码=123&a=b&__utma=221736730.1213284380.1356606190.1356674469.1356687004.4.....(Windows+NT+5.1%3b+rv%3a7.0.1)+Gecko%2f20100101+Firefox%2f7.0.1

路径： - /DetailPages/DetailPage.aspx

物理路径：- D:\AppRoot\DetailPages\DetailPage.aspx

网址：- [http://xyz.com/DetailPages/DetailPage.aspx?Code=123&a=b](http://xyz.com/DetailPages/DetailPage.aspx?Code=123&a=b)

**--- `Server.GetLastError`- Trace - 内部 IHttpModule 的错误事件--**

RawUrl : - /Hotels/123/hotel-name.aspx?a=b

AppRelativeCurrentExecutionFilePath : - ~/Hotels/123/hotel-name.aspx

CurrentExecutionFilePath : - /Hotels/123/hotel-name.aspx

参数：-a=b&__utma=221736730.1213284380.1356606190.1356674469.1356687004.4....(Windows+NT+5.1%3b+rv%3a7.0.1)+Gecko%2f20100101+Firefox%2f7.0.1

路径： - /Hotels/123/hotel-name.aspx

物理路径：- D:\AppRoot\Hotels\161\hotel-name.aspx

网址：- [http://xyz.com/Hotels/123/hotel-name.aspx?a=b](http://xyz.com/Hotels/123/hotel-name.aspx?a=b)

**错误消息** 文件“/Hotels/123/hotel-name.aspx”不存在。

**堆栈跟踪**

```
at System.Web.UI.Util.CheckVirtualFileExists(VirtualPath virtualPath)
       at System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile)
       at System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile)
       at System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean noAssert)
       at System.Web.Compilation.BuildManager.CreateInstanceFromVirtualPath(VirtualPath virtualPath, Type requiredBaseType, HttpContext context, Boolean allowCrossApp, Boolean noAssert)
       at System.Web.UI.PageHandlerFactory.GetHandlerHelper(HttpContext context, String requestType, VirtualPath virtualPath, String physicalPath)
       at System.Web.UI.PageHandlerFactory.System.Web.IHttpHandlerFactory2.GetHandler(HttpContext context, String requestType, VirtualPath virtualPath, String physicalPath)
       at System.Web.HttpApplication.MapHttpHandler(HttpContext context, String requestType, VirtualPath path, String pathTranslated, Boolean useAppConfig)
       at System.Web.HttpApplication.MapHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
       at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

谁能找出可能是什么问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T10:30:48.777

在原始 URL 中找到查询字符串时，还有另一个 IHttpModule 更改 URL。因此，我得到了我需要的东西。

感谢大家的善意建议和兴趣。

# .net - System.StackOverflowException 发生与 LinqToHtml

> ID：14070481
> 
> 赞同：3
> 
> 时间：2012-12-28T13:45:36.333
> 
> 标签：.net, vb.net, stack-overflow

我继承了一个带有所有源代码的网络蜘蛛应用程序。看来，对于普通的宣传册样式网站（比如 15 页以下），该软件运行得非常好。

对于其他人（超过 20 页），该软件会在下面代码中标记的行上引发 StackOverflowException。

它似乎没有使用递归，不幸的是，不支持正在使用的 LinqToHtml (SuperStarCoders) 库。

以下是发生异常时正在运行的代码：

```
 Private Function ExportXml(Optional ByVal _Worker As ComponentModel.BackgroundWorker = Nothing) As Boolean
    Dim _L = PopulateSEOList(_Worker)
    Try
        Dim _TmpStr As New Text.StringBuilder
        Dim _X As New XDocument, _ct As Long = 0, _Elements As Typing.SEO.Elements = Nothing
        ReportProgress(0, _Worker)
        With _TmpStr
            .Append("<?xml version=""1.0"" encoding=""UTF-8""?>")
            .Append("<o7th.Web.Design.Web.Spider>")
            For i As Long = 0 To _L.Count - 1
                _ct += 1
                .Append("   <Page>")
                .Append("       <Link>" & XmlEscape(_L(i).Link) & "</Link>")
                .Append("       <Title>" & XmlEscape(_L(i).Title) & "</Title>")
                .Append("       <Keywords>" & XmlEscape(_L(i).Keywords) & "</Keywords>")
                .Append("       <Description>" & XmlEscape(_L(i).Description) & "</Description>")
                .Append("       <Elements>")
                _Elements = _L(i).ContentElements
                If _Elements IsNot Nothing Then
                    If _Elements.H1 IsNot Nothing Then
                        .Append(<H1>
                                    <%= (From n In _Elements.H1.AsParallel()
                                        Select
                                        <Content><%= XmlEscape(n) %></Content>).ToList() %>
                                </H1>)
                    End If
                    If _Elements.H2 IsNot Nothing Then
                        .Append(<H2>
                                    <%= (From n In _Elements.H2.AsParallel()
                                        Select
                                        <Content><%= XmlEscape(n) %></Content>).ToList() %>
                                </H2>)
                    End If
                    If _Elements.H3 IsNot Nothing Then
                        .Append(<H3>
                                    <%= (From n In _Elements.H3.AsParallel()
                                        Select
                                        <Content><%= XmlEscape(n) %></Content>).ToList() %>
                                </H3>)
                    End If
                    If _Elements.H4 IsNot Nothing Then
                        .Append(<H4>
                                    <%= (From n In _Elements.H4.AsParallel()
                                        Select
                                        <Content><%= XmlEscape(n) %></Content>).ToList() %>
                                </H4>)
                    End If
                    If _Elements.H5 IsNot Nothing Then
                        .Append(<H5>
                                    <%= (From n In _Elements.H5.AsParallel()
                                        Select
                                        <Content><%= XmlEscape(n) %></Content>).ToList() %>
                                </H5>)
                    End If
                    If _Elements.H6 IsNot Nothing Then
                        .Append(<H6>
                                    <%= (From n In _Elements.H6.AsParallel()
                                        Select
                                        <Content><%= XmlEscape(n) %></Content>).ToList() %>
                                </H6>)
                    End If
                    If _Elements.UL IsNot Nothing Then
                        .Append(<UL>
                                    <%= (From n In _Elements.UL.AsParallel()
                                        Select
                                        <Content><%= ConvertToCDATA(n) %></Content>).ToList() %>
                                </UL>)
                    End If
                    If _Elements.OL IsNot Nothing Then
                        .Append(<OL>
                                    <%= (From n In _Elements.OL.AsParallel()
                                        Select
                                        <Content><%= ConvertToCDATA(n) %></Content>).ToList() %>
                                </OL>)
                    End If
                    If _Elements.STRONG IsNot Nothing Then
                        .Append(<STRONG>
                                    <%= (From n In _Elements.STRONG.AsParallel()
                                        Select
                                        <Content><%= XmlEscape(n) %></Content>).ToList() %>
                                </STRONG>)
                    End If
                    If _Elements.EM IsNot Nothing Then
                        .Append(<EM>
                                    <%= (From n In _Elements.EM.AsParallel()
                                        Select
                                        <Content><%= XmlEscape(n) %></Content>).ToList() %>
                                </EM>)
                    End If
                    If _Elements.BLOCKQUOTE IsNot Nothing Then
                        .Append(<BLOCKQUOTE>
                                    <%= (From n In _Elements.BLOCKQUOTE.AsParallel()
                                        Select
                                        <Content><%= ConvertToCDATA(n) %></Content>).ToList() %>
                                </BLOCKQUOTE>)
                    End If
                    If _Elements.A IsNot Nothing Then
                        .Append(<LINKS>
                                    <%= (From n In _Elements.A.AsParallel()
                                        Select
                                        <Content>
                                            <HREF><%= XmlEscape(n.Href) %></HREF>
                                            <REL><%= XmlEscape(n.Rel) %></REL>
                                            <TITLE><%= XmlEscape(n.Title) %></TITLE>
                                            <TARGET><%= XmlEscape(n.Target) %></TARGET>
                                            <CONTENT><%= XmlEscape(n.Content) %></CONTENT>
                                        </Content>).ToList() %>
                                </LINKS>)
                    End If
                    If _Elements.IMG IsNot Nothing Then
                        .Append(<IMAGES>
                                    <%= (From n In _Elements.IMG.AsParallel()
                                        Select
                                        <Content>
                                            <SRC><%= XmlEscape(n.Source) %></SRC>
                                            <ALT><%= XmlEscape(n.Alt) %></ALT>
                                            <TITLE><%= XmlEscape(n.Title) %></TITLE>
                                        </Content>).ToList() %>
                                </IMAGES>)
                    End If
                End If
                .Append("       </Elements>")
                .Append("       <Content><![CDATA[" & _L(i).Content.ToString() & "]]></Content>")
                .Append("   </Page>")
                ReportProgress((_ct / _L.Count) * 100, _Worker)
            Next
            .Append("</o7th.Web.Design.Web.Spider>")
        End With
        Dim _xStr As String = _TmpStr.ToString()
        _X = XDocument.Parse(_xStr)
        _X.Save(ExportPath & "site.xml")
        _X = Nothing
        ReportProgress(100, _Worker)
        Return True
    Catch ex As Exception
        'Put logging in here
        Message = ex.Message & ":::Export.ExportXml"
        Return False
    End Try
End Function 
```

上面的 LinkList 变量是一个列表（Typing.Links）：

```
Partial Public Class Links
    Public Property SiteUrl As String
    Public Property SiteTitle As String
    Public Property Site As String
End Class 
```

其他 2 个列表是：

```
Imports Superstar.Html.Linq

Public Class Typing

Partial Public Class SEO

    Public Property Link As String
    Public Property Title As String
    Public Property Description As String
    Public Property Keywords As String
    Public Property Content As HElement
    Public Property ContentElements As Elements

    Partial Public Class Elements

        Public Property H1 As List(Of String)
        Public Property H2 As List(Of String)
        Public Property H3 As List(Of String)
        Public Property H4 As List(Of String)
        Public Property H5 As List(Of String)
        Public Property H6 As List(Of String)
        Public Property UL As List(Of String)
        Public Property OL As List(Of String)
        Public Property STRONG As List(Of String)
        Public Property BLOCKQUOTE As List(Of String)
        Public Property EM As List(Of String)
        Public Property A As List(Of Links)
        Public Property IMG As List(Of Images)

        Partial Public Class Images
            Public Property Source As String
            Public Property Alt As String
            Public Property Title As String
        End Class

        Partial Public Class Links
            Public Property Href As String
            Public Property Rel As String
            Public Property Title As String
            Public Property Target As String
            Public Property Content As String
        End Class

    End Class

End Class

End Class 
```

ReportProgress 只是针对这种特殊情况报告和更新 Xaml 窗口的后台工作程序以更新进度条：

```
Public Sub ReportProgress(ByVal ct As Integer, _Worker As ComponentModel.BackgroundWorker)
    If _Worker IsNot Nothing Then
        _Worker.ReportProgress(ct)
        Threading.Thread.Sleep(500)
    End If
End Sub 
```

，下载器类是：

```
Imports System.Reflection
Imports System.Net
Imports Superstar.Html.Linq

Public Class Downloader
Implements IDisposable

''' <summary>
''' Get the returned downloaded string
''' </summary>
''' <value></value>
''' <returns></returns>
''' <remarks></remarks>
Public ReadOnly Property ReturnString As String
    Get
        Return _StrReturn
    End Get
End Property
Private Property _StrReturn As String

''' <summary>
''' Get the returned downloaded byte array
''' </summary>
''' <value></value>
''' <returns></returns>
''' <remarks></remarks>
Public ReadOnly Property ReturnBytes As Byte()
    Get
        Return _FSReturn
    End Get
End Property
Private Property _FSReturn As Byte()

Private Property _UserAgent As String = "Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13"
Private Property DataReceived As Boolean = False

''' <summary>
''' Download a string, but do not block the calling thread
''' </summary>
''' <param name="_Path"></param>
''' <remarks></remarks>
Public Sub DownloadString(ByVal _Path As String, Optional ByVal _Worker As ComponentModel.BackgroundWorker = Nothing)
    SetAllowUnsafeHeaderParsing20()
    Using wc As New Net.WebClient()
        With wc
            Dim _ct As Long = 0
            DataReceived = False
            .Headers.Add("user-agent", _UserAgent)
            .DownloadStringAsync(New System.Uri(_Path))
            AddHandler .DownloadStringCompleted, AddressOf StringDownloaded
            Do While Not DataReceived
                If _Worker IsNot Nothing Then
                    _ct += 1
                    ReportProgress(_ct, _Worker)
                End If
            Loop
        End With
    End Using
End Sub

''' <summary>
''' Download a file, but do not block the calling thread
''' </summary>
''' <param name="_Path"></param>
''' <remarks></remarks>
Public Sub DownloadFile(ByVal _Path As String, Optional ByVal _Worker As ComponentModel.BackgroundWorker = Nothing)
    SetAllowUnsafeHeaderParsing20()
    Using wc As New Net.WebClient()
        With wc
            Dim _ct As Long = 0
            DataReceived = False
            .Headers.Add("user-agent", _UserAgent)
            .DownloadDataAsync(New System.Uri(_Path))
            AddHandler .DownloadDataCompleted, AddressOf FileStreamDownload
            Do While Not DataReceived
                If _Worker IsNot Nothing Then
                    _ct += 1
                    ReportProgress(_ct, _Worker)
                End If
            Loop
        End With
    End Using
End Sub

''' <summary>
''' Download a parsable HDocument, for using HtmlToLinq
''' </summary>
''' <param name="_Path"></param>
''' <returns></returns>
''' <remarks></remarks>
Public Function DownloadHDoc(ByVal _Path As String, Optional ByVal _Worker As ComponentModel.BackgroundWorker = Nothing) As HDocument
    Try
        'StackOverFlowException Occurring Here!
        DownloadString(_Path, _Worker)
        Return HDocument.Parse(_StrReturn)
    Catch soex As StackOverflowException
        'put some logging in here, with the path attempted
        Return Nothing
    Catch ex As Exception
        SetAllowUnsafeHeaderParsing20()
        Return HDocument.Load(_Path)
    End Try
End Function

#Region "Internals"

Private Sub SetAllowUnsafeHeaderParsing20()
    Dim a As New System.Net.Configuration.SettingsSection
    Dim aNetAssembly As System.Reflection.Assembly = Assembly.GetAssembly(a.GetType)
    Dim aSettingsType As Type = aNetAssembly.GetType("System.Net.Configuration.SettingsSectionInternal")
    Dim args As Object() = Nothing
    Dim anInstance As Object = aSettingsType.InvokeMember("Section", BindingFlags.Static Or BindingFlags.GetProperty Or BindingFlags.NonPublic, Nothing, Nothing, args)
    Dim aUseUnsafeHeaderParsing As FieldInfo = aSettingsType.GetField("useUnsafeHeaderParsing", BindingFlags.NonPublic Or BindingFlags.Instance)
    aUseUnsafeHeaderParsing.SetValue(anInstance, True)
End Sub

Private Sub FileStreamDownload(ByVal sender As Object, ByVal e As DownloadDataCompletedEventArgs)
    If e.Cancelled = False AndAlso e.Error Is Nothing Then
        DataReceived = True
        _FSReturn = DirectCast(e.Result, Byte())
    Else
        _FSReturn = Nothing
    End If
End Sub

Private Sub StringDownloaded(ByVal sender As Object, ByVal e As DownloadStringCompletedEventArgs)
    If e.Cancelled = False AndAlso e.Error Is Nothing Then
        DataReceived = True
        _StrReturn = DirectCast(e.Result, String)
    Else
        _StrReturn = String.Empty
    End If
End Sub

#End Region

#Region "IDisposable Support"
Private disposedValue As Boolean ' To detect redundant calls

' IDisposable
Protected Overridable Sub Dispose(disposing As Boolean)
    If Not Me.disposedValue Then
        If disposing Then
        End If
        _StrReturn = Nothing
        _FSReturn = Nothing
    End If
    Me.disposedValue = True
End Sub

Public Sub Dispose() Implements IDisposable.Dispose
    Dispose(True)
    GC.SuppressFinalize(Me)
End Sub

#End Region

End Class 
```

正如我上面所说，看起来没有发生任何递归。（至少没有一个真正突出我），所以我立即假设它发生在 HDocument.Parse 中。

你能告诉我这是哪里错了吗，以及如何纠正这个问题？

我做了一些研究，并了解默认堆栈大小只有 1MB，所以我想知道这是否真的是我应该尝试增加这个的特殊情况之一......

我在多次观察跟踪后发现，它总是在它到达特定页面时发生。这个页面恰好超过 500k 大小。

这是调用堆栈：

```
[External Code] 
>       o7th.Web.Design.Spider.Worker.dll!o7th.Web.Design.Spider.Worker.Downloader.DownloadHDoc(String _Path, System.ComponentModel.BackgroundWorker _Worker) Line 95 + 0x1e bytes  Basic
o7th.Web.Design.Spider.Worker.dll!o7th.Web.Design.Spider.Worker.Export.PopulateSEOList(System.ComponentModel.BackgroundWorker _Worker) Line 513 + 0x65 bytes    Basic
o7th.Web.Design.Spider.Worker.dll!o7th.Web.Design.Spider.Worker.Export.ExportXml(System.ComponentModel.BackgroundWorker _Worker) Line 70 + 0x1e bytes   Basic
o7th.Web.Design.Spider.Worker.dll!o7th.Web.Design.Spider.Worker.Export.RunExport(System.ComponentModel.BackgroundWorker _Worker) Line 30 + 0x17 bytes   Basic
o7th.Web.Design.WebSpider.exe!o7th.Web.Design.WebSpider.ParseLinks.RunExport(Object sender, System.ComponentModel.DoWorkEventArgs e) Line 106 + 0x2c bytes  Basic
[External Code] 
```

Locals 向我展示了我上面提到的超过 500k 的页面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:20:41.350

（我需要更多空间，否则我会将其添加为@Jakub Konecki 帖子的评论。）

多年来，我已经构建了几个蜘蛛，并行性的唯一重大性能提升是 URL 的实际下载。您可能会在大型文档上减少几百毫秒的 HTML 解析，但所获得的收益不值得调试价格。因此，让您的生活更轻松并消除并行性。

你还有一个奇怪的异步阻塞问题。在`DownloadHDoc`你`DownloadString`同步调用但在你内部`DownloadString`启动一个异步方法然后阻塞一个位标志，从而破坏了异步的目的。更糟糕的是，您正在`do-while`以每小时一百万英里的速度旋转并且`ReportProgress`每次都呼叫的循环中阻塞。我希望这就是真正为您提供 SOE 的原因。把一个`Thread.Sleep(100)`放在那里可能会对你有帮助。

**[编辑]**

在位标志上​​阻塞的代码是这样的：

```
 .DownloadStringAsync(New System.Uri(_Path))
        AddHandler .DownloadStringCompleted, AddressOf StringDownloaded
        Do While Not DataReceived
            If _Worker IsNot Nothing Then
                _ct += 1
                ReportProgress(_ct, _Worker)
            End If
        Loop 
```

第 1 行启动了一个异步方法，第 2 行为完成添加了一个处理程序并立即返回。第 3 行一遍又一遍地检查一个全局变量，等待函数`StringDownloaded`设置它。这种情况每秒发生数百或数千（或更多）次。虽然不是最优的，但糟糕的是你`ReportProgress`每次都在调用方法。文档越大，调用的次数就越多`ReportProgress`。您实际上最多只需要每 100 毫秒更新一次 UI，我通常将我的设置为每 250 毫秒或 500 毫秒。

**[编辑 2]**

如果上述是问题，您应该能够将其更改为：

```
 .DownloadStringAsync(New System.Uri(_Path))
    AddHandler .DownloadStringCompleted, AddressOf StringDownloaded
    Do While Not DataReceived
        If _Worker IsNot Nothing Then
            _ct += 1
            ReportProgress(_ct, _Worker)
        End If
        Thread.Sleep(250) ''//Sleep inside of the loop
    Loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:53:46.103

我将从删除所有并行性开始 - 无论如何它可能会过度，并且创建多个线程的开销大于性能增益。

一旦你这样做了，只需调试代码并等待异常。您可以检查调用堆栈和所有集合。

当您递归调用相同的方法并且由于某种原因没有启动结束条件时，通常会发生堆栈溢出。您将在调用堆栈中清楚地看到它。

# ios - 通过触摸在 UITextView 中的句子下划线

> ID：14070483
> 
> 赞同：0
> 
> 时间：2012-12-28T13:45:59.957
> 
> 标签：ios, cocoa-touch, object, uitextview, nsattributedstring

我已经实现了一个 UITextView ，我可以在其中为文本加下划线，有时文本在正确的位置没有下划线，它穿过单词和句子，是否有默认方法在正确的位置为句子下划线，避免用户在保持准确性的同时触摸屏幕。非常感谢请分享您的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:13:27.227

我会使用`UITextView`带有属性的文本并根据需要修改属性。

```
NSMutableAttributedString *attributedString = [[NSMutableAttributedString alloc] initWithString:@"All work an no play makes Jack a dull boy."];
[attributedString addAttribute:NSUnderlineStyleAttributeName value:@(NSUnderlineStyleSingle) range:NSMakeRange(15, 4)];
self.textView.attributedText = attributedString; 
```

哪里`self.textView`是`IBOutlet`你`UITextView`的，值是`NSRange`由你的用户交互决定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T11:28:31.607

问题在于，UITextView 在内部是一个 UIWebDocumentView（又名 WebKit），而 HTML 与普通文本编辑器相比，具有不同的单词下划线规则。在这里查看我的分析：http: [//www.cocoanetics.com/2012/12/uitextview-caught-with-trousers-down/](http://www.cocoanetics.com/2012/12/uitextview-caught-with-trousers-down/)

设置属性字符串的方法是您只能设置整个文本的问题。

由于我们无法直接访问 UIWebDocumentView 内的文本容器，并且由于 HTML 的复杂性，您无法希望获得完美的结果。

您只能通过使用 CoreText 自己渲染文本来解决此问题。我的开源组件 DTCoreText 可以帮助显示。我还在销售基于此的富文本编辑的商业组件：http: [//www.cocoanetics.com/2012/12/dtrichtexteditor-1-1/](http://www.cocoanetics.com/2012/12/dtrichtexteditor-1-1/)

PS：切换当前选定的带下划线的文本范围的标准方法`toggleUnderline:`定义如下：

```
@interface NSObject(UIResponderStandardEditActions)   // these methods are not implemented in NSObject

- (void)cut:(id)sender NS_AVAILABLE_IOS(3_0);
- (void)copy:(id)sender NS_AVAILABLE_IOS(3_0);
- (void)paste:(id)sender NS_AVAILABLE_IOS(3_0);
- (void)select:(id)sender NS_AVAILABLE_IOS(3_0);
- (void)selectAll:(id)sender NS_AVAILABLE_IOS(3_0);
- (void)delete:(id)sender NS_AVAILABLE_IOS(3_2);
- (void)makeTextWritingDirectionLeftToRight:(id)sender NS_AVAILABLE_IOS(5_0);
- (void)makeTextWritingDirectionRightToLeft:(id)sender NS_AVAILABLE_IOS(5_0);
- (void)toggleBoldface:(id)sender NS_AVAILABLE_IOS(6_0);
- (void)toggleItalics:(id)sender NS_AVAILABLE_IOS(6_0);
- (void)toggleUnderline:(id)sender NS_AVAILABLE_IOS(6_0);

@end 
```

如果您启用属性编辑，这正是上下文菜单添加的内容。如果您对这里的结果不满意，那么我上面的陈述就是要走的路。

# asp.net-mvc - ASP.NET MVC4，查看将旧值返回给控制器

> ID：14070486
> 
> 赞同：5
> 
> 时间：2012-12-28T13:46:08.777
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我是 MVC 和 ASP.NET 的新手。我的要求是，我必须第一次在我的视图中显示两条记录，并且我的视图包含一个“SWAP”按钮。当我按下这个按钮时，控制器的发布操作应该执行，它必须采用原始视图模型，需要交换两条记录，并且应该呈现相同的视图。每当我按下交换按钮时，这个过程都应该进行。

当我第一次单击 SWAP 时，它工作正常。但是当我下次单击时，我的后控制器操作正在获取原始记录并显示相同的记录。

我的控制器代码如下所示。

```
public ActionResult Dedupe()
        {
            var selectedClients = TempData["SelectedClients"] as DedupeClientsViewModel;
            return this.View(selectedClients);
        }

        [HttpPost]
        public ActionResult Dedupe(DedupeClientsViewModel dedupeClients)
        {
            if (ModelState.IsValid)
            {
                //my functionality
            }
            return this.View(dedupeClients);
        } 
```

我需要用“ModelState”做什么才能从视图中获取新数据吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T18:03:26.183

因为您从帖子中返回相同的模型，所以 ASP.Net MVC 假设您有错误要呈现给用户（因此它保留原始值）。您可以通过清除整个模型的模型状态或清除一个或多个字段的模型状态来解决此问题。见下文。当然，这将在您的控制器中完成。

```
ModelState.Clear(); //clear entire model state
ModelState.Remove("MyObject.MyProperty"); //clear only one property 
```

Rick Strahl 在他的博客上对这个问题有一个很好的解释：[ASPNET-MVC-Postbacks-and-HtmlHelper-Controls-ignoring-Model-Changes](http://www.west-wind.com/weblog/posts/2012/Apr/20/ASPNET-MVC-Postbacks-and-HtmlHelper-Controls-ignoring-Model-Changes)

# android - 没有按钮的Android UI？

> ID：14070488
> 
> 赞同：4
> 
> 时间：2012-12-28T13:46:10.650
> 
> 标签：android, android-layout, android-ui, android-button

我正在尝试为患有轻度认知障碍的奶奶创建一个 android 平板电脑应用程序。该应用程序的功能之一是智能调度程序/提醒。例如：该应用程序会说“你吃红药了吗？” 是或否。如果没有或没有回复，则将短信发送到我的手机。

现在她的手在颤抖和颤抖，所以尽管是或否的按钮很大，但她往往会错误地按下错误的按钮。有没有其他方法可以创建一个用户界面，这样她就不必依赖按钮了？请帮忙....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T14:26:43.707

您可以使用语音转文本。如果她说不，则将其与字符串“NO”匹配，如果是，则匹配与“YES”。或者您可以使用从左到右滑动表示否，从右到左滑动表示是

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T17:27:57.113

也许您可以增加触摸区域，例如 YES 的半屏和 NO 的另一个。并将文本替换为绿色或红色等颜色。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T13:55:39.407

虽然我对android一无所知，但我对设计理念有一个解决方法：

让只有一个大按钮：“是” 如果她没有吃药，那么她不应该按下按钮，而是去吃药，然后按“是”。在那之前，该应用程序会每隔 30 秒左右重复询问一次问题（可能带有声音警报）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-28T14:00:30.533

您可以要求她触摸右侧或左上角...或从左到右滑动表格表示是，从右到左滑动表示否。

我们有一个加速度计。所以我们可以以不同的方式倾斜或旋转。或者敲一次表示是，两次表示否。

您可以使用语音命令。您可以使用相机作为输入。例如，表示不表示红牌，表示表示同意。

您甚至可以使用 NFC 标签……或连接大型硬件按钮或某种键盘……

# php - Doctrine Annotations FileCacheReader.php 参数无效

> ID：14070492
> 
> 赞同：3
> 
> 时间：2012-12-28T13:46:23.443
> 
> 标签：php, symfony, doctrine-orm

我有一个返回记录的实体，我在这个过程中的 20 多个其他地方使用了这个调用。它使用相同的查询参数返回相同的记录。如果我单独运行该类，它工作得很好，但是当它与其他调用结合时，我得到这个异常并且不返回结果。

```
Exception was thrown : 
Warning: Invalid argument supplied for foreach() in
/myBundle/vendor/doctrine/common/lib/Doctrine/Common/Annotations/FileCacheReader.php line 242 
```

是的，我清除了缓存

# objective-c - iOS：弹出视图控制器时更改界面方向

> ID：14070493
> 
> 赞同：11
> 
> 时间：2012-12-28T13:46:33.163
> 
> 标签：objective-c, ios, screen-orientation, uiinterfaceorientation

我的应用程序中的所有视图控制器都只能在纵向方向工作，除了可以纵向或横向的视图控制器。

我有一些使用场景，如下所示：

1.  我将两个方向都工作的控制器推到 UITabBarController
2.  用户将方向从纵向更改为横向
3.  用户按下“返回按钮”

在这些操作之后，应用程序保持横向并且不会自动将其更改为纵向。

我使用supportedInterfaceOrientations 控制视图控制器方向（我使用iOS 6.0）。我做错了什么？当用户按下后退按钮时应用程序自动将方向更改为允许时，如何获得正确的行为？谢谢你的答案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T03:04:15.060

在 iOS 6（可能更早版本）中，如果视图控制器在设备旋转时不在屏幕上，它不会收到任何通知。`willAnimateRotationToInterfaceOrientation:duration:`当它成为顶视图控制器时也不会被发送。

您需要跟踪视图控制器的当前方向并在`viewWillAppear:`. 如果它们不同，您可以使用`willAnimateRotationToInterfaceOrientation:duration:`它来正确设置它。

由于这可能是您经常做的事情，您可能希望创建一个通用超类，您的视图控制器从该超类继承。

一个典型的解决方案是：

```
@implementation MyHandlesOffscreenRotationController
{
    BOOL   isShowingPortrait;
}

- (void) viewDidLoad
{
    [super viewDidLoad];

    isShowingPortrait = UIInterfaceOrientationIsPortrait(
                        [[UIApplication sharedApplication] statusBarOrientation]);
}

- (void) viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

        BOOL currIsPortrait = UIInterfaceOrientationIsPortrait(
                              [[UIApplication sharedApplication] statusBarOrientation]);

    if ((isShowingPortrait && !currIsPortrait) ||
        (!isShowingPortrait && currIsPortrait)) {
        [self willAnimateRotationToInterfaceOrientation:
                [[UIApplication sharedApplication] statusBarOrientation]
                                              duration:0.0f];
    }
}

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-26T09:32:34.843

只需`-(BOOL)shouldAutoRotate and - (NSUInteger)supportedInterfaceOrientations`在一个`UINavigationController`类别内覆盖，然后 ViewController 将在从其他 ViewController 弹出后强制旋转到其支持的方向。

```
@implementation UINavigationController (Rotate)

- (BOOL)shouldAutorotate
{
    return [self.topViewController shouldAutorotate];
}

- (NSUInteger)supportedInterfaceOrientations
{
    return [self.topViewController supportedInterfaceOrientations];
}

@end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-31T12:51:13.977

**iOS 9 及以上**

**在弹出时，只需在您的viewWillAppear**方法中编写下面提到的代码。

```
[[UIDevice currentDevice] setValue:[NSNumber numberWithInteger: UIInterfaceOrientationPortrait]forKey:@"orientation"]; 
```

这样，您的视图将以纵向模式显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-06T02:10:36.303

PL 在这个主题上有一个很好的解决方案：展示并立即关闭一个只允许纵向的空模式视图控制器 | 景观

[如何在 iOS 6 中以编程方式更改设备方向](https://stackoverflow.com/questions/12650137/how-to-change-the-device-orientation-programmatically-in-ios-6)

# wordpress - WordPress admin-ajax.php 返回 0

> ID：14070495
> 
> 赞同：1
> 
> 时间：2012-12-28T13:46:38.467
> 
> 标签：wordpress, jquery

目前正在开发一个需要ajax的插件。正在考虑“正确”地做这件事，所以我试图使用 admin-ajax.php。但是我总是得到 0 作为响应，并且以某种方式感觉它永远不会到达我的回调。

这是代码，试图保持简单。

**在管理员之外加载 js 并设置 admin-ajax.php**

```
wp_enqueue_script('my-more-posts-ajax', SE_WP_MY_PLUGIN_URI . '/js/more-posts-ajax.js?' . rand(), array('jquery'));
wp_localize_script('my-more-posts-ajax', 'MyAjax', array('ajaxurl' => admin_url('admin-ajax.php'))); 
```

**回调操作**

```
add_action('wp_ajax_nopriv_my_more_posts', array($this, 'load_more_posts_callback'));
add_action('wp_ajax_my_more_posts', array($this, 'load_more_posts_callback')); 
```

**PHP回调函数**

```
public function load_more_posts_callback() {
$response = json_encode(array('success' => TRUE));

header("Content-Type: application/json");
print $response;

exit;
} 
```

**js**

```
jQuery(document).ready(function() {
  jQuery('#my-show-more-form').submit(function(event) {
    /* Prevent submitting normally */
    event.preventDefault();

    var data = {
      action: 'my_more_posts',
      offset: 8
    };

    jQuery.post(MyAjax.ajaxurl, data, function(response) {
      alert('Response: ' + response);
    });
  });
}); 
```

任何人都知道什么是错的？想我得到了所有的代码。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-05-19T11:07:57.930

使用`wp_die();`而不是`exit;`PHP 回调函数内部。

所以这将是

```
header("Content-Type: application/json");
print $response;
wp_die(); 
```

# windows-8 - 为 Windows RT 应用程序创建自定义着色器

> ID：14070503
> 
> 赞同：3
> 
> 时间：2012-12-28T13:47:33.150
> 
> 标签：windows-8, shader

我正在使用 DirectX 为 Windows RT 设备设计 3D 游戏。我已经从 Blender 以 .fbx 格式导入了一个 3D 对象，现在正在寻找为该对象创建一个着色器文件 (.dgsl)。由于我使用的是适用于 Windows 8 的 Visual Studio 2012 Express，因此此版本中不提供着色器设计器，但我仍需要创建自定义着色器 (.dgsl)。除了 Visual Studio 2012 版本之外，还有其他可用的选项来为 3D 对象创建自定义着色器吗？提前致谢。

# oauth-2.0 - oauth2 不安全吗？

> ID：14070516
> 
> 赞同：2
> 
> 时间：2012-12-28T13:48:42.537
> 
> 标签：oauth-2.0, oauth-provider

我正在为我创建的 API 实施 oauth2 解决方案，我正在努力应对潜在的不安全感（或者至少我的理解）。

仅生成一个令牌并将其用作端点请求的身份验证凭据是否正确。是什么阻止了潜在的暴力攻击，攻击者只是将令牌提交给 API，希望令牌有效并正在使用中？

我可能误解了一些东西，但我无法在我的生活中得到它是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T13:58:49.293

当然，令牌应该是难以想象的。例如，它们不应该是简单的连续整数。令牌长度也没有限制。基本上有两种选择：

1）构建一个使用您自己的密钥加密的长令牌（注意：它不必*很*长，但它会因为密码学会隐含地使其变长）。您可以在返回时检查令牌是否真的属于您，因为您是唯一可以加密和解密这些令牌的人。

2) 构建也存储在数据库中的令牌，并且相当难以创建，因此您将检查数据库中是否存在令牌。

您也可以混合使用这两种方法。您还应该为令牌添加一些过期时间（在第一种情况下嵌入其中，或者在第二种情况下将令牌放在数据库中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-31T13:18:05.067

OAuth 2.0 中最容易受到暴力攻击的授权类型之一是资源所有者密码凭证类型。在这种情况下，黑客可以访问客户端凭据（clientId 和密码），他/她只需要资源所有者（用户）凭据（用户名和密码）。Java - Spring Security 中描述了一个身份验证实现模型[，](https://stackoverflow.com/a/29369228/1572286)可以避免这个问题。

# c++ - 在常量成员函数内部调用非常量成员函数

> ID：14070523
> 
> 赞同：1
> 
> 时间：2012-12-28T13:49:05.923
> 
> 标签：c++, constants, member-functions

```
#include <iostream>

class Hello {
public:
    void Test() {
        std::cout << "Testing" << std::endl;
    }
};

class Hi {
public:
    Hi()
    :hello(new Hello())
    {}

    ~Hi()
    {
        delete hello;
    }

    void Testing() const {
        hello->Test();
    }

private:
    Hello  * hello;
};

int main(int argc, char ** argv) {
    Hi hi; ;
    hi.Testing();
    return 0;
} 
```

据我所知，不能在常量成员函数内部调用非常量成员函数，但是如何成功编译上述代码并给出预期结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T13:52:14.313

在内部`Hi::Testing`，`hi`对象“是 const”。`hello`这意味着不能在该方法内修改指针。（就好像`hello`已经定义`Hello * const hello;`了该方法的持续时间。）

但这并不意味着将`hello`其转换为指向 const 的指针（看起来像`Hello const * const hello;`）。指向的对象`hello`不是 const，因此您可以不受限制地调用其非 const 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T14:00:37.110

您可以将问题简化为以下情况：

```
Foo x;

Foo       *       p1 = &x;
Foo       * const p2 = &x;

p1->non_const_method();     // OK
p2->non_const_method();     // OK

Foo const *       q1 = &x;
Foo const * const q2 = &x;

q1->non_const_method();     // error
q2->non_const_method();     // error 
```

您的`Hi`-object 是否为常量仅影响此类比中的*顶级* `const`修饰符（即`Hi::hello`is`Hello *`或`Hello * const`）。但是，第*一个*const 修饰符是指针类型本身的组成部分（不受对象的 const 影响）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T14:07:01.803

如果你有一个指向 const 对象的指针，那将限制你在目标对象中调用 const 成员函数。

指向（普通）对象的 const 指针仅意味着您不能修改指针本身。由于它仍然是指向普通对象的指针，因此您可以使用任何成员函数，而不仅仅是 const 成员函数。如果目标对象具有该函数的 const 和正常重载，则将选择正常重载。

当你有一个指针作为 const 对象的成员时，你得到的是第二个，而不是第一个。

# c++ - (int)-2147483648 除以 (int)-1 的结果，使用不同的编译器？

> ID：14070524
> 
> 赞同：-2
> 
> 时间：2012-12-28T13:49:05.913
> 
> 标签：c++, c, compiler-construction, integer

众所周知，最小整数因编译器而异，所以我有一个疑问：使用各种编译器，`(int)-2147483648`除以得到什么结果？`(int)-1`比如VC6.0、VS2010等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:36:47.833

首先让我们假设我们处于一个`32-bit`具有二进制补码表示的系统中，其中`INT_MIN`value 与 相同`-INT_MAX - 1`。

这个表达式：

`(int) -2147483648 / (int) -1`

相当于

`(int) -2147483648 / -1`

`-1`已经是 type了`int`。

在is`32-bit`的二进制补码系统中，值的类型为^(1))，因为它不能在 中表示。的值也是 type 。`INT_MAX``2147483647``2147483648``long`^(`int``-2147483648``long`)

`long`值`-2147483648`可以用 表示，整数`int`转换后的`(int) -2147483648`值为`INT_MIN`。

原始表达式（在我们的假设下）等价于：

`INT_MIN / -1`

并且这个表达式等价于`INT_MAX + 1`which 在 an 中不可表示`int`。事实上`int`，类型范围从`INT_MIN`到`INT_MAX`。该表达式是一个整数溢出，整数溢出调用 C 中未定义的行为。

> (C99, 6.5p5) “如果在计算表达式期间出现异常情况（即，如果结果未在数学上定义或不在其类型的可表示值范围内），则行为未定义。”

* * *

 [1) 我们隐含地假设`LONG_MAX`is `> INT_MAX`，否则该值为`2147483648`type `long long`。]

# android - 选项卡中mapsforge的Android MapActivity

> ID：14070525
> 
> 赞同：2
> 
> 时间：2012-12-28T13:49:16.830
> 
> 标签：android, tabs, mapactivity

我尝试`MapActivity`用作选项卡，但总是遇到异常：

`Could not find class exception.`尝试创建时生成

```
Intent mapTabIntent = new Intent(this, MapMF.class); 
```

为什么我有例外？当我分析 LogCat 的行时，我意识到一条橙色消息：无法解析 com....MapMF.class 的超类，其中 MapMF 类扩展了 mapsforge 的 MapActivity。

我做错了什么？

如果我使用

`com.google.android.maps.MapActivity`

代替

`org.mapsforge.android.maps.MapActivity`

它完美地工作。

我不明白为什么不使用 mmapsforge 的 MapActivity。有人对解决这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T21:59:28.960

此问题的原因是 Properties\Java Build Path\Order 和 Export 上的库顺序错误。我向上移动了 mapsforge 库，位于我的应用程序下方和 Google API [Android 2.2] 上方

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:03:15.703

有什么问题？

这是一个完全合乎逻辑的结论。

`com.google.android.maps.MapActivity`是需要导入的包de

[https://developers.google.com/maps/documentation/android/v1/reference/com/google/android/maps/MapActivity](https://developers.google.com/maps/documentation/android/v1/reference/com/google/android/maps/MapActivity)

查看 Google 示例以获取`MapActivity`. 它还导入了这个

# jquery - 如何阻止模式对话框弹出窗口显示在后面的共享点代码中

> ID：14070532
> 
> 赞同：0
> 
> 时间：2012-12-28T13:49:56.793
> 
> 标签：jquery, visual-studio-2010, sharepoint, sharepoint-2010

我在一个可视化 Web 部件中创建了一个 jQuery/javascript 中的模态对话框弹出窗口，每次页面加载时都会显示。弹出窗口中有一个提交按钮，单击它时，我将用户名和确认日期存储在自定义列表中。有效的jQ代码：

```
 <script language="javascript" type="text/javascript"  src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">

</script>
<script language="javascript" type="text/javascript">
    $(document).ready(function () {
        ExecuteOrDelayUntilScriptLoaded(openDialog, "SP.js");        
    });

    //open dialog

    // Call openDialog method on button click or on page load  

    function openDialog() {
        //alert("In funciton opendialog");
        var options = {

            //html: divModalDialogContent,  // ID of the HTML tag

            // or HTML content to be displayed in modal dialog

            width: 400,

            url: "/_layouts/ModalDialog1/ModalDialog.aspx",

            height: 125,

            title: "Acknowedgement Popup",

            dialogReturnValueCallback: dialogCallbackMethod,  // custom callback function

            allowMaximize: false,

            showClose: false

        };
        SP.UI.ModalDialog.showModalDialog(options);

    }

    // Custom callback function after the dialog is closed

    function dialogCallbackMethod(result, returnValue) {

        alert("dialogResult" + result + "nreturnValue" + returnValue);
                if(result == SP.UI.DialogResult.OK)
         {
         alert("You chose the OK button");
         //document.title = returnValue;
         }

        if(result == SP.UI.DialogResult.cancel)
         SP.UI.Notify.addNotification("You chose the Cancel button");
         }

    }

</script> 
```

现在，我正在使用此代码在列表中添加用户名。我使用 aspx 页面将其存储在列表中，该页面在弹出窗口中单击按钮时触发：

```
protected void Button1_Click(object sender, EventArgs e)
    {
        Context.Response.Write(@"<script type='text/javascript'>
                                alert('Thanks for acknowledging!');
                                window.frameElement.commitPopup();
                                </script>");
        Context.Response.Flush();
        Context.Response.End(); 

        string username;
        using (SPSite site = new SPSite(SPContext.Current.Web.Url))
        {
            site.AllowUnsafeUpdates = true;
            using (SPWeb web = site.RootWeb)
            {
                web.AllowUnsafeUpdates = true;
                SPUser user = web.CurrentUser;

                username = user.LoginName.ToString();

                //adding list item
                SPList l = web.Lists["Acknowledgements"];
                SPListItem li = l.Items.Add();
                li["User"] = username;
                li["Acknowedgement Date"] = System.DateTime.Today;
                li.Update(); 

            }

        } 
```

现在，客户要求是在月初显示模式对话框弹出窗口，如果自定义列表中已经存在用户名，则不显示该月的模式对话框弹出窗口。我用谷歌搜索并了解了 registerstartupscript，您可以通过它在后面的代码中编写 javascript 并使用它，但它不起作用。我打算比较列表中的用户名和当前登录的用户名，如果他已经确认，则不显示弹出窗口，但它击败了我如何实现这一点，而且，javascript 在客户端。

```
string Script = @"function openDialog() { var options={
                    width:400,
                    url: '/_layouts/ModalDialog/ModalDialog.aspx', height:125,
                    title: 'Acknowedgement Popup',
                    dialogReturnValueCallback: dialogCallbackMethod, 
                    allowMaximize: false,
                    showClose: false
                    };
                    SP.UI.ModalDialog.showModalDialog(options);
                     }";Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "openDialog", Script, true); 
```

我在这一切上都走对了吗？我对 SharePoint 有点陌生，所以请帮忙。这让我陷入了困境。提前感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:46:00.453

在您的标记中，您可以添加一个文字作为 JS 标志变量的占位符...确保在您的 openDialog 函数之前添加它：

```
<asp:Literal runat="server" ID="DlgFlag"></asp:Literal> 
```

在您的代码隐藏中，检查列表，如果找到用户名，则向文字输出一个标志：

```
if (isUsernameInListAlready)
{
    DlgFlag.Text = "<script type=\"text/javascript\">var dlgFlag = true;</script>";
} 
```

在您的 openDialog 函数中，在顶部检查此标志，如果存在该标志，则只需退出而不打开对话框：

```
function openDialog() {
    if (dlgFlag) return;

    //alert("In funciton opendialog");
    var options = {
    ... 
```

# c++ - 指针对指针访问

> ID：14070538
> 
> 赞同：0
> 
> 时间：2012-12-28T13:50:29.220
> 
> 标签：c++, pointers, tree

有人可以向我解释一下吗：

```
(((((*(parent))->leaves))[7])->zone_id) 
```

指向指针的指针真的让我感到困惑。这是我在调试模式下从手表得到的表达式。我正在尝试访问`zone_id`树的最后一个元素内的字符串（有 10 个元素，每个元素对应不同的数字 0-9）。

编辑：这是整个搜索功能，希望它足以理解：

```
string Tree::search(string str, node** parent, int num) {

    int value;

    if (num < str.length()) {

        value = boost::lexical_cast<int> (str.substr(num, 1));

        if ((*parent)->leaves[value] != NULL  &&  num != str.length() -1) {

            search (str, &((*parent)->leaves[value]), num+1);

        } else if (num == str.length() -1) {

            if ( (*(parent)->leaves)[value]->zone_id.empty() )
                cout<<"Yep.";
            else
                return (string) "No_results.";

        }

    } 

} 
```

和结构：

```
struct node {

    string zone_id;
    node* leaves [10];

}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T13:58:31.260

好吧，让我们去掉一些括号来简化一下：

```
(*parent)->leaves[7]->zone_id 
```

现在它更容易理解了。我们正在取消引用`parent`( `*parent`)，它为我们提供了一个指向某个对象的指针，该对象具有一个名为 的数组成员`leaves`。因此，我们使用索引 7 访问该数组的元素，这为我们提供了另一个指针，这一次指向一个具有名为 的成员的对象`zone_id`。然后我们访问该`zone_id`成员。

^(这一切都假设不涉及运算符重载。)

图解（箭头是“指向”）：

```
 ________     _________     ___________         ___________
| parent |-->| *parent |-->|  struct:  |   ,-->|  struct:  |
|________|   |_________|   | leaves[0] |   |   | zone_id   |
                           | leaves[1] |   |   | ...       |
                           | leaves[2] |   |
                           | leaves[3] |   |
                           | leaves[4] |   |
                           | leaves[5] |   |
                           | leaves[6] |   |
                           | leaves[7] | --'
                           | leaves[8] |
                           | ...       | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:00:10.017

在我看来，删除括号实际上更容易阅读： `(*parent)->leaves[7]->zone_id`

所以，我们有一个指向叶子指针的指针。`(*parent)`取消引用该指针（因此获取指针指向的内容）。所以现在我们有一个指向叶子的指针，它是一个 10 的数组，所以我们使用元素 7，这里的指针是用来获取 zone_id 的。

它确实有点复杂，但这远不是我见过的最复杂的结构。如果它对您有帮助，您可以将其分解：

```
Parent *this_parent = *parent;

Leave *leaf = this_parent->leaves[7];

... use leaf->zone_id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T14:01:44.730

```
(
  (
    (
      (
        (
          *(parent)
        )
        ->leaves
      )
    )
    [7]
  )
  ->zone_id
) 
```

*   取消引用`parent`
*   访问`leaves`会员
*   索引第`7`th 个元素
*   访问该`zone_id`成员。

# autocomplete - 如何在 Intellij IDEA 的注释内列出自动完成中的所有类？

> ID：14070542
> 
> 赞同：0
> 
> 时间：2012-12-28T13:50:45.390
> 
> 标签：autocomplete, intellij-idea

我的应用程序中有自定义类**InternalTimerServiceController**。我想在 android 注释中的另一个类中使用它。在这种情况下，自动完成似乎无法正常工作。

我有这个界面

```
public interface InternalTimerServiceControllerContract
{
    void doWork();
} 
```

而这堂课

```
@EBean
public class InternalTimerServiceController implements InternalTimerServiceControllerContract
{
    @Override
    public void doWork()
    {
        // do work
    }
} 
```

这是我的活动

```
public class MyActivity extends Activity
{
    // try uncomment line below and see if autocomplete works properly
    //@Bean(Internal) 

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:27:57.247

这是一个错误，感谢您的报告。我为它创建了一张票：http: [//youtrack.jetbrains.com/issue/IDEA-98298](http://youtrack.jetbrains.com/issue/IDEA-98298)

# javascript - 比较 JavaScript 数组

> ID：14070543
> 
> 赞同：4
> 
> 时间：2012-12-28T13:50:49.650
> 
> 标签：javascript, arrays, compare

> **可能重复：**
> [为什么 [] == [] 在 javascript 中为假？](https://stackoverflow.com/questions/13703222/why-is-false-in-javascript)

我想问一些奇怪的事情，即：

```
var x = "pl";
var y = ["pl"];
[x] == y; // false - why?
x == y; // true - how ? 
x === y; // false - okay 
```

有人可以解释一下吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T13:53:15.703

第一个是错误的，因为您正在比较两个数组（它们是对象） - 除非对象实际上*是相同的 object*，**或者**如果对象被强制转换为不同类型的值（如第二个），否则比较将始终为 false比较。

在第二次比较中， y 被强制为字符串值，然后发现等于`"pl"`。

例如，这段代码：

```
["pl"] + "foo" → "plfoo" 
```

顺便说一句，这就是为什么你应该总是使用`===`而不是`==`- 它不会导致任何令人惊讶的强制。这就是为什么第三个比较是错误的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T13:56:53.973

**Array to Array（抽象相等比较）**

```
[x] == y; // false - why? 
```

`[x]`并且`y`不要引用同一个对象。[数组](http://www.ecma-international.org/ecma-262/5.1/#sec-15.4)是[对象](http://www.ecma-international.org/ecma-262/5.1/#sec-4.2.1)，[`==`](http://www.ecma-international.org/ecma-262/5.1/#sec-11.9.1)运算符测试它们是否是*同一个*对象，而不仅仅是两个对象的所有属性都具有相同的值。为了以*这种*方式确定对象相等性，您必须手动枚举每个对象的属性并测试每个值。

根据使用的[抽象等式比较算法](http://www.ecma-international.org/ecma-262/5.1/#sec-11.9.3)[`==`](http://www.ecma-international.org/ecma-262/5.1/#sec-11.9.1)：

> 如果 x 和 y 引用同一个对象，则返回 true。否则，返回假。

**字符串到数组（抽象相等比较）**

```
x == y; // true - how ? oO 
```

`y`，一个数组，被强制转换为一个字符串，因为您[`==`](http://www.ecma-international.org/ecma-262/5.1/#sec-11.9.1)在将它与`x`一个字符串进行比较时使用了它。

根据使用的[抽象等式比较算法](http://www.ecma-international.org/ecma-262/5.1/#sec-11.9.3)[`==`](http://www.ecma-international.org/ecma-262/5.1/#sec-11.9.1)：

> 如果 Type(x) 是 String 或 Number 且 Type(y) 是 Object，则返回比较结果 x == ToPrimitive(y)。

**字符串到数组（严格相等比较）**

```
x === y; // fasle - okey 
```

[`===`](http://www.ecma-international.org/ecma-262/5.1/#sec-11.9.4), 不像[`==`](http://www.ecma-international.org/ecma-262/5.1/#sec-11.9.1),*不会*强制`y`转换成字符串...所以，您将字符串与对象进行比较。

根据使用的[严格等式比较算法](http://www.ecma-international.org/ecma-262/5.1/#sec-11.9.6)[`===`](http://www.ecma-international.org/ecma-262/5.1/#sec-11.9.4)：

> 如果 Type(x) 与 Type(y) 不同，则返回 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T14:06:40.850

```
[x] == y; 
```

['pl'] == ['p1'] - 比较内存中 2 个不同数组的引用

```
x == y; 
```

与 "pl" == ["p1"].toString() 相同。JS将第二个参数转换为字符串，因为第一个也是字符串

# javascript - 如何在类中创建一个不属于 TypeScript 原型函数的函数？

> ID：14070554
> 
> 赞同：2
> 
> 时间：2012-12-28T13:51:24.343
> 
> 标签：javascript, typescript

例如，当我在类中创建一个函数时，TS 编译器将该函数作为原型函数。

```
class MyClass {
    getExample()
    {

    }
} 
```

结果是

```
var MyClass = (function() {
    function MyClass() {}
    MyClass.prototype.getExample = function() {};
    return MyClass;
})();​ 
```

但我需要的是

```
function MyClass() {

    this.getExample = function() {

    }
}​ 
```

是否有可能获得这样的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T07:17:26.410

看看这个[JQFAQ.com](http://jqfaq.com/how-to-create-instance-methods-in-ts-rather-than-prototypes/)链接，这里是您的问题“如何在类中创建一个不属于 TypeScript 中的原型函数的函数？”的答案，还有更多常见问题解答。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T16:12:29.497

我看过 TypeScript（就像在线游乐场......虽然：P）
据我所知，你想做的事情很容易完成，我自己尝试了一些事情这对我来说就像一个魅力：

```
class Greeter {
    greeting: string;
    closureMethod;
    constructor (message: string) {
        this.greeting = message;
        var that = this;
        var closureMethod = function()
        {
            console.log(that.greeting);
        };
        this.closureMethod = closureMethod;
    }
    greet() {
        return "Hello, " + this.greeting;
    }
}   
var greeter = new Greeter("world");
var another = new Greeter('Foobar');
var button = document.createElement('button');
button.innerText = "Say Hello";
button.onclick = function()
{
    greeter.closureMethod();
    another.closureMethod();
}
document.body.appendChild(button) 
```

哪个有效，但更短（这也有效）

```
class Greeter {
    greeting: string;
    closureMethod;//define property here, no type
    constructor (message: string) {
        this.greeting = message;
        var that = this;
        this.closureMethod = function()
        {
            console.log(that.greeting);
        };
    }
    greet() {
        return "Hello, " + this.greeting;
    }
} 
```

两者都产生相同的结果：为每个新实例一遍又一遍地定义方法的构造函数（老实说，这*不是*一个好主意）。
如您所见，它使用`that`, 而不是访问实例`this`，这是一遍又一遍地创建相同方法的*唯一*好处……只要您有充分的理由这样做。但我不会对此大发雷霆。
上面的代码*有效*，它生成了一个你想要的构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T17:07:17.933

您在 TypeScript 中添加到构造函数的方法将作为实例方法添加。

您在构造函数之外和类内添加的方法将被添加到对象的原型中。如果您要“更新”类的多个实例，这是首选方法，因为它可以节省内存。但是当你这样做时，你需要确保你可以访问你需要的实例 memebrs 和正确的“this”，你可以通过提前设置它们来做到这一点。

我建议先考虑原型，然后如果你真的需要它们作为方法，再回到实例。如果它是一个单例对象，那么它真的没关系。

但是......当您在 TypeScript 中创建类时，私有和公共的概念不会转换为发出的 JavaScript。因此，当您在 JavaScript 中公开每个实例成员时，请记住这一点。我更喜欢使用像 JavaScript 中的模块模式这样的模式，它隐藏了内部变量/方法，只公开了我想要访问的内容。您可以使用 TypeScript 通过创建一个返回对象的可访问成员（无类）的函数来实现这一点。只是想我会提到替代方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T11:52:24.027

你可以这样做：

```
class MyClass {
    static getSomething() {

    }
} 
```

static 关键字意味着它不是原型方法，您不需要在实例上调用它 - 只需使用以下命令调用它：

```
MyClass.getSomething(); 
```

当然，这可能不是您想要的——但您需要分享您需要它的原因以使其更清晰。

# delphi - 将 HResult 变成实际的错误代码，Delphi

> ID：14070556
> 
> 赞同：2
> 
> 时间：2012-12-28T13:51:27.110
> 
> 标签：delphi, exception

在某个时刻发生 EOleSysError，并且该异常的错误代码是 HRESULT。有没有办法可以将 HResult 转换回错误代码或字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T13:58:02.820

HRESULT 已经是一个错误代码。它的含义取决于发出的调用。在 COM 中，返回 HRESULT，因为不允许出现异常。为了解决这个问题，调用 是很常见的`OleCheck`，它检查 HRESULT 并在它是除 之外的值时引发异常`S_OK`。那就是你得到的 EOleSysError 。:)

但是请注意，HRESULT 已经是一个错误代码。HRESULT 只是一个整数。这个名字有误导性，因为`H`暗示它是一个句柄，但事实并非如此。

所以没有比你现在更多的信息了。HRESULT 值与您正在调用的 API 的文档相结合，应该为您提供所需的所有详细信息。

# google-app-engine - gaeutilities 的会话适用于 SDK，但不适用于 Google 应用引擎？

> ID：14070557
> 
> 赞同：1
> 
> 时间：2012-12-28T13:51:39.247
> 
> 标签：google-app-engine, session

我遇到了一个奇怪的问题：gaeutilities 的会话在 GAE SDK 上工作，但在实际的 Google App Engine 平台上却没有。以下分别是使用 Python 的会话创建和存在检查。

会话创建：

```
self.session = sessions.Session()
self.session.delete_item('account')
self.session.delete_item('accountKey')
...
query = db.Query(model.Member)
query = query.filter('account =', account)  # 'account' is the user account
results = query.fetch(limit=1)
if results:  # Account exists
    member = results[0]
    self.session['account'] = account   
    self.session['accountKey'] = member.key()
... 
```

会话存在检查：

```
self.session = sessions.Session()
if 'accountKey' in self.session:  # Session exists
    account = self.session['account']  # Could this be the problem?
... 
```

上述程序在 GAE SDK 上运行正常。但我将程序上传到 Google App Engine，但它不起作用。可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:04:01.917

我不熟悉gaeutilities。但是与`self.session = sessions.Session()`您创建一个新会话。这将是空的。所以你的支票`if 'accountKey' in ...`将不起作用。必须有另一种方法来获取现有会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T03:24:19.300

我找到了另一种使用 gae-sessions 解决问题的方法。[在这里](https://stackoverflow.com/a/14151821/1802305)检查。

# asp.net - 页面重定向后返回上一页

> ID：14070559
> 
> 赞同：1
> 
> 时间：2012-12-28T13:52:00.100
> 
> 标签：asp.net, asp.net-mvc-3

嗨，如果他没有经过身份验证，我想将用户发送到登录页面，并且在他登录后我想将他发送回页面，他的问题是我只到达我希望用户访问的页面的一半是。这是我的代码：

当我用户在我的应用程序中单击一个按钮时，我会检查用户是否已登录（如果他没有登录）。我使用以下代码将他重新引导到登录页面：

```
 return RedirectToAction("LogIn" , "Account" , new { returnUrl = "Products" , subCat = Request.QueryString["subcat"]}); 
```

我希望从这段代码中得到的是：

登录?returnUrl="产品"&subCat="笔记本"

我得到的是：

```
Products?subcat=Notebooks 
```

这是我单击按钮的页面中的链接。现在这种行为可能是因为这些链接都是使用 ajax.ActionLink 创建的，但如果这是真的，我怎样才能回到我的上一页？

我没有修改 MVC 应用程序的默认路由。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T13:54:53.913

`returnUrl`像这样设置`returnUrl = ViewContext.HttpContext.Request.Url.PathAndQuery`，不要`subcat`管它。

# c++ - 如何在 XCode 中创建多个控制台窗口

> ID：14070563
> 
> 赞同：1
> 
> 时间：2012-12-28T13:52:53.903
> 
> 标签：c++, xcode, windows, console

我刚刚开始使用 XCode 大约一个星期。我想知道是否有一种方法可以在一个项目中拥有多个控制台窗口。例如，一个用于输入的窗口 - 另一个用于输出的窗口 - 一个用于用户界面的窗口。它不必在一个项目中。我只想拥有不同的控制台窗口，以便用户界面和输出不会混合在一起。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T10:26:52.810

在 *NIX 和 OSX 系统上，无法在多个窗口中运行控制台应用程序。想象一下，如果您在 SSH 中运行控制台应用程序并尝试创建新的控制台窗口会发生什么。Windows 操作系统并非如此，您可以在其中调用 AllocConsole 来创建另一个控制台 ( [http://msdn.microsoft.com/en-us/library/windows/desktop/ms682528%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682528%28v=vs.85%29.aspx)）。如果您想在一个应用程序中模拟多个控制台窗口，您可以创建 Cocoa 应用程序，其中包含多个窗口和每个窗口内的文本框（并将背景颜色更改为黑色，字体更改为 Courier）。

# python - 使用 Python 计算点密度

> ID：14070565
> 
> 赞同：7
> 
> 时间：2012-12-28T13:53:03.023
> 
> 标签：python

我有一个来自世界特定地区地理数据的 X 和 Y 坐标列表。我想根据每个坐标在图中的位置分配一个权重。

例如：如果一个点位于周围有很多其他节点的地方，则它位于高密度区域，因此具有更高的权重。

我能想到的最直接的方法是在每个点周围绘制单位半径的圆，然后计算其他点是否位于其中，然后使用函数为该点分配权重。但这似乎很原始。

我看过 pySAL 和 NetworkX，但看起来它们可以处理图表。我在图中没有任何边，只有节点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T14:26:22.563

标准解决方案是使用 KDE（[核密度估计](http://en.wikipedia.org/wiki/Kernel_density_estimation)）。
在网上搜索：“KDE Estimation”你会发现大量的链接。在 Google 中输入：KDE Estimation ext:pdf
另外，Scipy 有 KDE，请按照[http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.gaussian_kde.html 操作](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.gaussian_kde.html)。那里有工作示例代码；）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-28T14:19:47.393

如果您有很多点，您可以使用[KDTree](http://en.wikipedia.org/wiki/K-d_tree)更有效地计算最近邻：

```
import numpy as np
import scipy.spatial as spatial
points = np.array([(1, 2), (3, 4), (4, 5), (100,100)])
tree = spatial.KDTree(np.array(points))
radius = 3.0

neighbors = tree.query_ball_tree(tree, radius)
print(neighbors)
# [[0, 1], [0, 1, 2], [1, 2], [3]] 
```

[tree.query_ball_tree](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.KDTree.html)返回`points`最近邻居的索引（的）。例如，`[0,1]`（在索引 0 处）表示`points[0]`并且`points[1]`在`radius`距离之内`points[0]`。`[0,1,2]`（在索引 1 处）表示`points[0]`，`points[1]`并且`points[2]`在`radius`距离内`points[1]`。

```
frequency = np.array(map(len, neighbors))
print(frequency)
# [2 3 2 1]
density = frequency/radius**2
print(density)
# [ 0.22222222  0.33333333  0.22222222  0.11111111] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T14:14:47.833

是的，你确实有边，它们是节点之间的距离。在您的情况下，您有一个带有加权边的完整图。

只需导出从每个节点到其他节点的距离（这会为您`O(N^2)`提供时间复杂度），然后使用节点和边作为您找到的这些方法之一的输入。

尽管您的问题似乎是一个分析问题而不是其他任何问题；您应该尝试对您的数据运行一些聚类算法，例如`K-means`，根据距离函数对节点进行聚类，您可以在其中简单地使用欧几里得距离。

该算法的结果正是您所需要的，因为您将拥有紧密元素的集群，您将知道为每个组分配了哪些元素以及分配了多少元素，并且您将能够根据这些值，生成要分配给每个节点的*系数。*

这里值得指出的唯一问题是您必须确定要创建多少个`clusters`-- 。`k-means, k-clusters`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T23:29:16.213

您最初倾向于在每个点周围画一个圆并计算该圆中其他点的数量是一个很好的选择，正如 unutbu 所提到的，KDTree 将是解决此问题的一种快速方法。

这可以通过 PySAL 轻松完成，它在后台使用 scipy 的 kdtree。

```
import pysal
import numpy
pts = numpy.random.random((100,2)) #generate some random points
radius = 0.2 #pick an arbitrary radius

#Build a Spatial Weights Matrix
W = pysal.threshold_continuousW_from_array(pts, threshold=radius)
# Note: if your points are in Latitude and Longitude you can increase the accuracy by
#       passing the radius of earth to this function and it will use arc distances.
# W = pysal.threshold_continuousW_from_array(pts, threshold=radius, radius=pysal.cg.RADIUS_EARTH_KM)

print W.cardinalities
#{0: 10, 1: 15, ..... } 
```

如果您的数据在 Shapefile 中，只需将 threshold_continuousW_from_array 替换为 threshold_continuousW_from_shapefile，有关详细信息，请参阅文档。

# osx-mountain-lion - 应用沙箱 container-migration.plist 不移动文件

> ID：14070567
> 
> 赞同：0
> 
> 时间：2012-12-28T13:53:14.247
> 
> 标签：osx-mountain-lion, sandbox

我已经设置了我的 container-migration.plist 并重新检查了很多次。我的签名证书一切正常，旧的应用程序 plist 会自动迁移到新沙盒应用程序的容器中。我在旧应用程序的 ~Application Support/Birthdaybook 文件夹中有支持文件，并且在首次启动沙盒应用程序时它们不会迁移到新容器。

每次在测试触发迁移之前，我都会删除新容器 com.robdutoit.birthdayBook。新容器使用 Preferences 中的应用 plist 创建，但 Birthdybook 文件夹未移动到新容器中的 Application Support 文件夹。正如上一篇文章中所建议的，我尝试将沙盒应用程序复制到桌面，但从那里迁移也不起作用。我在这上面花了几天时间，除此障碍外，应用程序已准备好提交。任何帮助表示赞赏。

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
    <plist version="1.0">
    <dict>
        <key>Move</key>
        <array>
            <string>${ApplicationSupport}/Birthdaybook</string>
        </array>
    </dict>
    </plist> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T05:53:36.333

检查 Console.app 日志。按您的应用名称过滤它。问题，如果有的话，应该在那里。除此之外，请仔细检查您正在使用的路径。

# android - 如何在android中创建一个有2条边的矩形

> ID：14070571
> 
> 赞同：0
> 
> 时间：2012-12-28T13:53:21.413
> 
> 标签：android

我想显示两侧的编辑文本框。所以，为此我需要创建一个带有两侧的矩形。请帮助一些人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T13:57:12.077

在drawable文件夹下创建一个drawable并添加以下内容（border.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle" >
   <solid android:color="@color/black" />
   <stroke android:width="1dip" android:color="@color/white"/>
</shape> 
```

现在将 EditText 的背景设置为此绘图，例如：

```
 android:background="@drawable/border" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:06:11.113

我认为最好的方法是在 PhotoShop 中创建一个带有所需边框的 9 补丁......还有其他几种方法......取决于您的设计。

# java - java.sql.Timestamp 时区是特定的吗？

> ID：14070572
> 
> 赞同：95
> 
> 时间：2012-12-28T13:53:40.893
> 
> 标签：java, oracle, date, datetime, jdbc

我必须将 UTC dateTime 存储在数据库中。
我已将特定时区中给出的 dateTime 转换为 UTC。为此，我遵循了以下代码。
我的输入日期时间是“20121225 10:00:00 Z”时区是“亚洲/加尔各答”
我的服务器/数据库（oracle）在同一个时区（IST）“亚洲/加尔各答”中运行

**获取此特定时区中的 Date 对象**

```
 String date = "20121225 10:00:00 Z";
        String timeZoneId = "Asia/Calcutta";
        TimeZone timeZone = TimeZone.getTimeZone(timeZoneId);

        DateFormat dateFormatLocal = new SimpleDateFormat("yyyyMMdd HH:mm:ss z");
                    //This date object is given time and given timezone
        java.util.Date parsedDate = dateFormatLocal.parse(date + " "  
                         + timeZone.getDisplayName(false, TimeZone.SHORT));

        if (timeZone.inDaylightTime(parsedDate)) {
            // We need to re-parse because we don't know if the date
            // is DST until it is parsed...
            parsedDate = dateFormatLocal.parse(date + " "
                    + timeZone.getDisplayName(true, TimeZone.SHORT));
        }

       //assigning to the java.sql.TimeStamp instace variable
        obj.setTsSchedStartTime(new java.sql.Timestamp(parsedDate.getTime())); 
```

**存入数据库**

```
 if (tsSchedStartTime != null) {
            stmt.setTimestamp(11, tsSchedStartTime);
        } else {
            stmt.setNull(11, java.sql.Types.DATE);
        } 
```

**输出**

DB（oracle）存储了与`dateTime: "20121225 10:00:00`UTC不同的相同内容。

我已经从下面的 sql 中确认了。

```
 select to_char(sched_start_time, 'yyyy/mm/dd hh24:mi:ss') from myTable 
```

我的数据库服务器也在同一时区“亚洲/加尔各答”上运行

它给了我以下外观

1.  `Date.getTime()`不是 UTC
2.  或者时间戳在存储到数据库时有时区影响我在这里做错了什么？

**还有一个问题：**

会`timeStamp.toString()`在当地时区打印`java.util.date`吗？不是UTC？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-12-28T14:11:02.117

尽管没有明确指定`setTimestamp(int parameterIndex, Timestamp x)`驱动程序必须遵循[`setTimestamp(int parameterIndex, Timestamp x, Calendar cal)`javadoc](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#setTimestamp%28int,%20java.sql.Timestamp,%20java.util.Calendar%29)建立的规则：

> `java.sql.Timestamp`使用给定`Calendar`对象将指定参数设置为给定值。驱动程序使用该`Calendar`对象构造一个 SQL`TIMESTAMP`值，然后驱动程序将其发送到数据库。使用`Calendar`对象，驱动程序可以在考虑自定义时区的情况下计算时间戳。如果未`Calendar`指定对象，则驱动程序使用默认时区，即运行应用程序的虚拟机的时区。

当您使用`setTimestamp(int parameterIndex, Timestamp x)`JDBC 驱动程序调用时，使用虚拟机的时区来计算该时区中时间戳的日期和时间。此日期和时间是存储在数据库中的内容，如果数据库列不存储时区信息，则有关该区域的任何信息都会丢失（这意味着由使用数据库的应用程序来使用一致的时区或提出另一种方案来识别时区（即存储在单独的列中）。

例如：您当地的时区是 GMT+2。您存储“2012-12-25 10:00:00 UTC”。数据库中存储的实际值为“2012-12-25 12:00:00”。您再次检索它：您再次将其取回为“2012-12-25 10:00:00 UTC”（但仅当您使用 检索它`getTimestamp(..)`时），但是当另一个应用程序在 GMT+0 时区访问数据库时，它将检索时间戳为“2012-12-25 12:00:00 UTC”。

如果要将其存储在不同的时区，则需要将`setTimestamp(int parameterIndex, Timestamp x, Calendar cal)`与所需时区中的日历实例一起使用。只需确保在检索值时也使用具有相同时区的等效 getter（如果您`TIMESTAMP`在数据库中使用没有时区信息）。

因此，假设您要存储实际的 GMT 时区，您需要使用：

```
Calendar cal = Calendar.getInstance(TimeZone.getTimeZone("GMT"));
stmt.setTimestamp(11, tsSchedStartTime, cal); 
```

对于 JDBC 4.2，兼容的驱动程序应该支持`java.time.LocalDateTime`(and `java.time.LocalTime`) for `TIMESTAMP`(and `TIME`) through `get/set/updateObject`。这些`java.time.Local*`类没有时区，因此不需要应用转换（尽管如果您的代码确实假设了特定时区，这可能会引发一系列新问题）。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-12-28T14:42:50.793

我认为正确的答案应该是 java.sql.Timestamp 不是特定于时区的。时间戳是 java.util.Date 和单独的纳秒值的组合。此类中没有时区信息。因此，就像 Date 这个类只保存自 1970 年 1 月 1 日 00:00:00 GMT + nanos 以来的毫秒数。

在 PreparedStatement.setTimestamp(int parameterIndex, Timestamp x, Calendar cal) 中，驱动程序使用日历来更改默认时区。但是时间戳在格林威治标准时间仍然保持毫秒。

API 不清楚 JDBC 驱动程序应该如何使用 Calendar。提供者似乎对如何解释它感到自由，例如，上次我使用 MySQL 5.5 Calendar 时，驱动程序在 PreparedStatement.setTimestamp 和 ResultSet.getTimestamp 中都忽略了 Calendar。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2020-07-24T17:49:27.110

答案是`java.sql.Timestamp`一团糟，应该避免。改为使用`java.time.LocalDateTime`。

那么为什么会一团糟呢？在`java.sql.Timestamp`JavaDoc 中，a`java.sql.Timestamp`是“`java.util.Date`允许 JDBC API 将其识别为 SQL TIMESTAMP 值的瘦包装器”。在`java.util.Date`JavaDoc 中，“`Date`该类旨在反映协调世界时 (UTC)”。从 ISO SQL 规范来看，TIMESTAMP WITHOUT TIME ZONE“是一种没有时区的日期时间数据类型”。TIMESTAMP 是 TIMESTAMP WITHOUT TIME ZONE 的简称。因此`java.sql.Timestamp`，当 SQL TIMESTAMP 是“无时区”时，“反映”UTC。

因为`java.sql.Timestamp`反映了 UTC，所以它的方法应用了转换。这会导致无休止的混乱。从 SQL 的角度来看，将 SQL TIMESTAMP 值转换为其他时区是没有意义的，因为 TIMESTAMP 没有要转换的时区。将 42 转换为华氏度是什么意思？它没有任何意义，因为 42 没有温度单位。这只是一个空号。同样，您无法将 2020-07-22T10:38:00 的 TIMESTAMP 转换为 Americas/Los Angeles，因为 2020-07-22T10:30:00 不在任何时区。它不是 UTC 或 GMT 或其他任何时间。这是一个裸露的约会时间。

`java.time.LocalDateTime` is also a bare date time. It does not have a time zone, exactly like SQL TIMESTAMP. None of its methods apply any kind of time zone conversion which makes its behavior much easier to predict and understand. So don't use `java.sql.Timestamp`. Use `java.time.LocalDateTime`.

```
LocalDateTime ldt = rs.getObject(col, LocalDateTime.class);
ps.setObject(param, ldt, JDBCType.TIMESTAMP); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-05-02T13:06:28.570

对于 Mysql，我们有一个限制。在[驱动程序 Mysql 文档](http://dev.mysql.com/doc/connector-j/5.1/en/connector-j-usagenotes-known-issues-limitations.html)中，我们有：

> 以下是 MySQL Connector/J 的一些已知问题和限制： 当 Connector/J 在结果集上使用 getTimeStamp() 方法检索夏令时 (DST) 切换日的时间戳时，某些返回值可能是错误的。连接到数据库时，可以通过使用以下连接选项来避免错误：

```
useTimezone=true
useLegacyDatetimeCode=false
serverTimezone=UTC 
```

因此，当我们不使用此参数并且我们`setTimestamp or getTimestamp`使用日历或不使用日历调用时，我们在 jvm 时区中有时间戳。

例子 ：

jvm 时区是 GMT+2。在数据库中，我们有一个时间戳：**1461100256 = 19/04/16 21:10:56,000000000 GMT**

```
Properties props = new Properties();
props.setProperty("user", "root");
props.setProperty("password", "");
props.setProperty("useTimezone", "true");
props.setProperty("useLegacyDatetimeCode", "false");
props.setProperty("serverTimezone", "UTC");
Connection con = DriverManager.getConnection(conString, props);
......
Calendar nowGMT = Calendar.getInstance(TimeZone.getTimeZone("GMT"));
Calendar nowGMTPlus4 = Calendar.getInstance(TimeZone.getTimeZone("GMT+4"));
......
rs.getTimestamp("timestampColumn");//Oracle driver convert date to jvm timezone and Mysql convert date to GMT (specified in the parameter)
rs.getTimestamp("timestampColumn", nowGMT);//convert date to GMT 
rs.getTimestamp("timestampColumn", nowGMTPlus4);//convert date to GMT+4 timezone 
```

第一种方法返回：**1461100256000 = 19/04/2016 - 21:10:56 GMT**

第二种方法返回：**1461100256000 = 19/04/2016 - 21:10:56 GMT**

第三种方法返回：**1461085856000 = 19/04/2016 - 17:10:56 GMT**

而不是 Oracle，当我们使用相同的调用时，我们有：

第一种方法返回：**1461093056000 = 19/04/2016 - 19:10:56 GMT**

第二种方法返回：**1461100256000 = 19/04/2016 - 21:10:56 GMT**

第三种方法返回：**1461085856000 = 19/04/2016 - 17:10:56 GMT**

**注意：** 不需要为 Oracle 指定参数。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-07-24T14:53:06.090

您可以使用以下方法将时间戳存储在特定于您所需区域/区域 ID 的数据库中。

```
ZonedDateTime zdt = ZonedDateTime.now(ZoneId.of("Asia/Calcutta")) ;
Timestamp timestamp = Timestamp.valueOf(zdt.toLocalDateTime()); 
```

人们常犯的一个错误是使用`LocaleDateTime`获取那个瞬间的时间戳，这会丢弃任何特定于您的区域的信息，即使您稍后尝试转换它也是如此。它不了解区域。

请注意`Timestamp`是类`java.sql.Timestamp`。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-12-28T14:01:46.577

这是特定于您的驱动程序的。您需要在 Java 程序中提供一个参数来告诉它您要使用的时区。

```
java -Duser.timezone="America/New_York" GetCurrentDateTimeZone 
```

此外：

```
to_char(new_time(sched_start_time, 'CURRENT_TIMEZONE', 'NEW_TIMEZONE'), 'MM/DD/YY HH:MI AM') 
```

在正确处理转换方面也可能有价值。取自[这里](http://www.lifeaftercoffee.com/2005/09/22/converting-time-zones-in-oracle/)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-03-18T09:54:24.950

If your problem is to get a timestamp of the local zone, you can use this:

```
Timestamp.from(Instant.now()).toLocalDateTime() 
```

# prolog - Prolog 的难点

> ID：14070576
> 
> 赞同：1
> 
> 时间：2012-12-28T13:53:55.080
> 
> 标签：prolog, logic

我需要使用 Prolog 解决逻辑问题。我只有一个问题：

在答案中，属性的名称没有出现。我生成属性的代码是：

```
gera(p(Prof, AlunosProf, Tema, AlunosTema)) :-
       member(Prof, [palmira, roberta, selma]),
       member(AlunosProf, [40, 45, 50]),
       member(Tema, [transito, culinaria, reciclagem]);
       member(AlunosTema, [40, 45, 50]). 
```

但是在进行查询之后，它看起来像这样：

```
S = [p(palmira, _G2046, transito, 45),
    p(roberta, 50, reciclagem, _G2053),
    p(selma, _G2056, culinaria, _G2058)] 
```

**“_G* something** ”在哪里我想出现**属性的名称**（在这种情况下只有学生的数量）。

**编辑**：

添加整个代码：

```
gera(p(Prof, AlunosProf, Tema, AlunosTema)) :-
       member(Prof, [palmira, roberta, selma]),
       member(AlunosProf, [40, 45, 50]),
       member(Tema, [transito, culinaria, reciclagem]),
       member(AlunosTema, [40, 45, 50]).

dif(p(P1, Q1, T1, Q12), p(P2, Q2, T2, Q22)) :-
    P1 \= P2, Q1 \= Q2, Q12 \= Q22, T1 \= T2.

tudoDif(P1, P2, P3) :-
    dif(P1, P2), dif(P1, P3), dif(P2, P3).

gera_ef(P1, P2, P3) :-
    P1 = p(palmira, _, _, _),
    P2 = p(roberta, _, _, _),
    P3 = p(selma, _, _, _).
    gera(P1), gera(P2), gera(P3),
    tudoDif(P1,P2,P3).

solucao(S) :-
        S = [P1, P2, P3],
    gera_ef(P1, P2, P3),
    member(p(palmira, X, transito, 45), S),
        member(p(selma, Z, culinaria, W), S),
        member(p(roberta, 50, reciclagem, R), S), 
    !. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:00:47.330

当您使用`;`而不是`,`. 当您使用时，`;`您是在说明，之前发生的事情**或**现在发生的事情都是可以接受的。

因为当您开始说“现在将要发生什么”时，您只定义 的值`AlunosTema`，其他值将接收*任何*值，由您所看到的 - “_G233...”表示。

尝试以下操作：

```
gera(p(Prof, AlunosProf, Tema, AlunosTema)) :-
       member(Prof, [palmira, roberta, selma]),
       member(AlunosProf, [40, 45, 50]),
       member(Tema, [transito, culinaria, reciclagem]),
       member(AlunosTema, [40, 45, 50]). 
```

**编辑**：

考虑到您发布的整个代码，您可能会更改一些内容：

```
...

gera_ef(P1, P2, P3) :-
    P1 = p(palmira, _, _, _),
    P2 = p(roberta, _, _, _),
    P3 = p(selma, _, _, _),
    gera(P1),
    gera(P2),
    gera(P3),
    tudoDif(P1,P2,P3).

solucao(S) :-
    S = [P1, P2, P3],
    gera_ef(P1, P2, P3),
    member(p(palmira, _, transito, 45), S),
    member(p(selma, _, culinaria, _), S),
    member(p(roberta, 50, reciclagem, _), S),
    !. 
```

这里的问题是你有一个`.`而不是一个`,`：

```
gera_ef(P1, P2, P3) :-
    ...,
    P3 = p(selma, _, _, _).
    ... 
```

这将不允许其余代码执行。

另一个变化是`solucao`用`_`;替换了无界变量。注意`X, W, R`已被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:00:32.523

您的代码中有错字。你在你的意思是逗号的地方放了一个冒号：

线

```
member(Tema, [transito, culinaria, reciclagem]); 
```

应该读

```
member(Tema, [transito, culinaria, reciclagem]), 
```

# android - iPhone可下载的widget，软件如何？

> ID：14070577
> 
> 赞同：0
> 
> 时间：2012-12-28T13:54:00.147
> 
> 标签：android, iphone, widget

我想为 iPhone 或 Android 智能手机创建一个小应用程序。这是我网页上的一个小 Javascript 应用程序。价格计算器。如何使其可下载并安装在智能手机上？

这是[我的应用程序](http://mikrobusz-berles.com/kalkulator.html)。我想用作智能手机应用程序，我知道这是一个非常简单的应用程序，但它是一个很好的开始。你能帮我做一个教程吗？（对不起我的英语不好......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:58:39.993

将其包裹在[Phonegap/Cordova](http://phonegap.com/)中的本机应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:34:54.447

在 iOS 上，用户可以通过点击“分享”按钮并选择“添加到主屏幕”来“下载”您的应用程序。

你可以添加一些`link`标签来为你的应用指定一个合适的图标，隐藏地址栏，也许还有状态栏。请参阅[Apple 的文档](http://developer.apple.com/library/safari/ipad/#documentation/appleapplications/reference/safariwebcontent/configuringwebapplications/configuringwebapplications.html)

# java - 为新文件指定包中的相对路径

> ID：14070578
> 
> 赞同：0
> 
> 时间：2012-12-28T13:54:04.517
> 
> 标签：java, file, properties, package, relative-path

我正在尝试创建一个`File`对象以保存我的属性文件。我需要知道如何从我的包中指定相对路径，因为下面的代码不起作用。

```
 try {
        File file = new File(new File(Thread.currentThread().getContextClassLoader().getResource("").toURI()), "com/configuration/settings.properties");
        try (FileOutputStream fileOutputStream = new FileOutputStream(file)) {
            properties.store(fileOutputStream, null);
        }
    } catch (IOException | URISyntaxException ioe) {
        System.out.println(ioe);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:13:03.630

只需替换这一行：

```
File file = new File("/com/configuration/settings.properties"); 
```

和：

```
File file = new File(new File(Thread.currentThread().getContextClassLoader().getResource("").toURI()), "com/configuration/settings.properties"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T13:59:00.343

相对路径取决于您运行程序的当前工作目录。

如果您在 IDE 中运行，IDE 可能会将工作目录路径设置为 Project 目录。并且您的程序如何运行取决于程序中 jar/claases 的类路径。

# php - 使用 PHP documentor 记录常量

> ID：14070579
> 
> 赞同：0
> 
> 时间：2012-12-28T13:54:07.887
> 
> 标签：php, documentation, constants, phpdoc

> **可能重复：**
> [phpDoc 类常量文档](https://stackoverflow.com/questions/3892063/phpdoc-class-constants-documentation)

我在我的项目配置文件中定义了几个常量。常量在文件中都有很好的注释，但是 phpdocumentor 没有显示我给每个人的描述。我想知道哪种是使我对常量的描述出现在文档中的正确方法。这是我的代码：

```
/**
 * PROGRAM CONSTANTS
 * 
**/
// The directories will be stored as constants
/**
 *  PROGRAMHOME_DIR holds the absolute path to the home directory
**/
define( 'PROGRAMHOME_DIR', $_SERVER[ 'DOCUMENT_ROOT' ] . str_replace( array( '/', '\\' ), DIRECTORY_SEPARATOR, $base_dir ) );
/**
 * PROGRAMIMAGES_DIR holds the absolute path to the images directory
**/
define( 'PROGRAMIMAGES_DIR', PROGRAMHOME_DIR . str_replace( array( '/', '\\' ), DIRECTORY_SEPARATOR, $images_dir ) );
/**
 * PROGRAMLANG_DIR holds the absolute path to the languages directory
**/
define( 'PROGRAMLANG_DIR', PROGRAMHOME_DIR . str_replace( array( '/', '\\' ), DIRECTORY_SEPARATOR, $lang_dir ) );
/**
 * PROGRAMPHP_DIR holds the absolute path to the php directory
**/
define( 'PROGRAMPHP_DIR', PROGRAMHOME_DIR . DIRECTORY_SEPARATOR . 'php' );
/**
 * PROGRAMCLASS_DIR holds the absolute path to the class directory
**/
define( 'PROGRAMCLASS_DIR', PROGRAMHOME_DIR . DIRECTORY_SEPARATOR . 'class' );
/**
 * PROGRAMREMOTE_URL holds the remote URL to the program
**/
define( 'PROGRAMREMOTE_URL', 'http://' . $_SERVER[ 'HTTP_HOST' ] . str_replace( array( '/', '\\' ), DIRECTORY_SEPARATOR, $base_dir ) ); 
```

# docpad - 如何在 DocPad 中缩小 HTML、CSS 和 JavaScript 文件？

> ID：14070580
> 
> 赞同：8
> 
> 时间：2012-12-28T13:54:28.907
> 
> 标签：docpad

我想在点击 时缩小 HTML、CSS 和 JavaScript 文件，我`docpad generate`该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-28T14:38:51.750

有几种方法可以解决这个问题。最突出和最直接的方法是修改您的[docpad 配置文件，以触发像](http://bevry.me/docpad/config)[grunt](http://gruntjs.com)这样的外部工具，通过[grunt minify 任务](https://github.com/gruntjs/grunt/blob/0.3-stable/docs/task_min.md)来缩小您的资产。[这是一个展示这一点的要点。](https://gist.github.com/3898915)

或者，还有[Cloudflare](http://cloudflare.com)，它是一个了不起的网站 DNS 服务器，它还充当您网站内容的 CDN，并在部署后自动缩小您的资产。[在这里阅读更多。](http://blog.cloudflare.com/an-all-new-and-improved-autominify)

此外，虽然它与缩小无关，但您也可以使用[此 gist将脚本与](https://gist.github.com/4398093)[Browserify](https://github.com/substack/node-browserify)连接起来。Grunt 还有一种更直接的连接方式，也可以通过[grunt concat 任务进行。](https://github.com/gruntjs/grunt/blob/0.3-stable/docs/task_concat.md)

最终，也许插件会自动执行此操作，但考虑到连接的反复无常，这可能需要一段时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T20:33:36.620

*   对 JS 文件使用 gruntjs。（Grunt 将连接到 docpad generate）
*   对 css 文件使用 grunt-contrib-mincss。
*   对 html 文件使用 grunt-contrib-htmlmin。
*   使用 grunt-compress 压缩所有文件。

有关所有 grunt 插件的列表，请参见此处： [https ://github.com/gruntjs](https://github.com/gruntjs)

# javascript - JavaScript/HTML：如何使用 window.onload=x 和 body onLoad="setTimeout('myFunction()',4000);"

> ID：14070581
> 
> 赞同：1
> 
> 时间：2012-12-28T13:54:30.710
> 
> 标签：javascript, html, onload

我习惯`body onLoad="setTimeout('myFunction()',4000);"`每 4 秒刷新一次我的网站。我想使用另一个 JavaScript 来使我的文本褪色。它可以工作，但是我的网站不会每 4 秒刷新一次。它要么褪色，要么刷新。他们互相干扰。

文本褪色脚本需要`window.onload=fade`才能工作，但如果我使用它，它将覆盖`body onLoad="setTimeout('myFunction()',4000);"`- 我如何使两者都工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T13:56:17.240

你可以试试：

```
body onLoad="fade(); setTimeout(myFunction, 4000);" 
```

而不是`window.onload`调用或使用：

```
window.onload = function () {
    fade();
    setTimeout(myFunction, 4000);
}; 
```

而不是身体`onload`。

您还可以添加多个事件侦听器（因为它们是首选方法）而不是使用上述方法。

```
function onPageLoad() {
    fade();
    setTimeout(myFunction, 4000);
    return;
};

if (document.addEventListener) {
    document.addEventListener("load", onPageLoad);
}
else if (document.attachEvent) {
    document.attachEvent("onload", onPageLoad);
}
else {
    // event handling not supported
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T14:00:38.030

这应该普遍适用，虽然我没有测试过:)

```
(function(window) {
    var _onload = window.onload;

    window.onload = function() {
        _onload && _onload();
        setTimeout(myFunction, 4000);
    }
}(this)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T13:57:18.543

尝试这个：

```
window.setInterval(myFunction, 4000); 
```

# android - Android BroadcastReceiver 与服务

> ID：14070582
> 
> 赞同：1
> 
> 时间：2012-12-28T13:54:37.543
> 
> 标签：android

我正在使用画布和 ImageView 编写自定义模拟时钟应用程序小部件。

我在小部件提供程序的 onEnabled 事件中每分钟设置一个警报。闹钟调用负责绘制时钟的 BroadcastReceiver。

我想将位图保存到某个点，所以减少绘图时间。但是，一旦 onUpdate 返回，BroadcastReceiver 就会死掉，所以我不能将位图保留在其中。

**首先我想知道有没有办法在 BroadcastReceiver 中保存一些东西？**

我虽然使用服务而不是广播接收器，因为它们不会被终止。但不知何故我不知道这是否有好处？

我有一些关于服务的一般性问题：

1.  我在某处读到服务可能会被android系统杀死？如果是这样，AlarmManager 会重新启动它吗？

2.  我不想唤醒设备来更新时钟，因为它并不重要，只要设备一开机就可以很快更新。我在某处读到该服务在后台运行。使用服务并使用 AlarmManager 调用它会让设备进入睡眠状态吗？

这就是我的时钟的样子：

![在此处输入图像描述](../Images/5a03f9cdeeff115dea6c27a4470901f6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:31:03.013

如果你想在广播接收器中保存一些东西，你可以根据需要使用 sharedprefrences 或 sqllite 或文件，并在下次恢复它。关于存储：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

广播接收器在需要时运行，并且在不需要时不占用系统资源。如果您需要等待随机事件（例如传入的短信）或长时间的后台处理（广播接收者被杀死），则可以使用服务。

服务确实会被android系统杀死，并且取决于它自己的服务，它们是否由系统恢复。此行为由 onStartCommand 函数返回的值控制： START_STICKY - 意图重启服务 = null START_NOT_STICKY - 不重启服务

您可以在此处阅读其他选项：http: [//developer.android.com/reference/android/app/Service.html#START_STICKY](http://developer.android.com/reference/android/app/Service.html#START_STICKY)

# join - 返回 CActiveDataProvider 中的一些连接字段

> ID：14070592
> 
> 赞同：0
> 
> 时间：2012-12-28T13:55:55.320
> 
> 标签：join, yii, cactivedataprovider

我的问题与 Yii 框架有关。

我在模型类中定义了关系。如何在 CActiveDataProvider 中返回连接的某些特定字段？

# magento - 如何在 Magmi 中列出更新的产品？

> ID：14070605
> 
> 赞同：1
> 
> 时间：2012-12-28T13:57:07.407
> 
> 标签：magento, magmi

我有一个包含大约 13000 个 SKU 的 CSV 产品列表，我正在使用 MAGMI 来管理它。

如果我在 UPDATE 模式下运行 MAGMI，它只会更新现有产品并跳过新产品，并以（示例）“info:Skus import OK:21/21”退出...

有没有办法知道更新了哪些产品？

我对浏览代码感到有点懒惰，所以请耐心等待我...

提前致谢！保罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T22:43:18.920

只需创建一个基本插件，为 Magmi 日志中的每个项目输出日志。

1) 在 magmi 根目录下创建文件`plugins/extra/itemprocessors/basicitemlogger/basicitemlogger.php`

2）打开文件并粘贴以下内容

```
<?php
/**
 * Class BasicItemLogger
 * @author Axertion
 *
 * Returns basic SKU for item in the Magmi output log.
*/ 
class Magmi_BasicItemLogger extends Magmi_ItemProcessor
{

    public function getPluginInfo()
    {
        return array(
            "name" => "Basic Item Logger",
            "author" => "Axertion",
            "version" => "0.0.1",
            "url"=> "http://axertion.com"
        );
    }
    static public function getCategory()
    {
        return "Input Data Preprocessing";
    }

    public function getPluginParams($params)
    {
    }

    public function initialize($params)
    {
    }

    public function processItemAfterId(&$item,$params)
    {   

        if($params['new'] != 1)
        {
            $this->log("Item {$item["sku"]} has been updated.", "info");
        }

        return true;
    }
} 
```

3) 在 Magmi UI 中，转到该`Configure Current Profile`部分。启用`Basic Item Logger v0.0.1`并单击`Update Profile`。

4) Runtime Infos 窗格现在将列出每个不是新的和更新的项目，如下所示：

```
Basic Item Logger v0.0.1 - Item 123253221 has been updated.
Basic Item Logger v0.0.1 - Item 520448042 has been updated.
Basic Item Logger v0.0.1 - Item 606852342 has been updated.
Basic Item Logger v0.0.1 - Item 955884964 has been updated. 
```

此外，您可以轻松修改插件代码（这是非常基本的）以写入简单的日志文件。Magmi 让您可以访问整个项目对象。`$item['column_name']`通过在`processItemAfterId()`方法中使用，您可以根据项目列值编写一些漂亮的逻辑。您还可以使用`processItemBeforeId()`它在 Magmi 处理之前更改项目对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T22:02:24.157

您是否尝试过 MAGMI 邮件通知插件？这个应该可以做到。

如果您通过 php-script 和 cron 来管理导入，那就更容易了。如果您需要这方面的帮助，请回到我这里；

欢呼西蒙

# networking - 两个互联网连接和一个局域网

> ID：14070613
> 
> 赞同：0
> 
> 时间：2012-12-28T13:57:50.603
> 
> 标签：networking, load-balancing

您认为以下情况有什么解决方案：-

Switch X，连接到路由器A和路由器B。两个路由器都用于互联网连接。路由器 A 正在运行 DHCP，并且 ip 在 lan 192.168.1.1/24 上。路由器 B 正在运行 DHCP，并且在 lan 192.168.100.1/24 上有 ip。

虽然这两个在同一个物理网络上，但逻辑上在不同的局域网上。现在让我们分别称它们为 LAN-1 和 LAN-2。

LAN-1 上的一台计算机如何连接到 LAN-2 上的另一台计算机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:10:58.513

您必须提供从 LAN-1 到 LAN-2 的路由以互连 2 个网络。

# ruby-on-rails - 使用 state_machine 时应用验证异常

> ID：14070621
> 
> 赞同：0
> 
> 时间：2012-12-28T13:58:31.523
> 
> 标签：ruby-on-rails, state-machine

使用 state_machine 时，我一直无法找到在我的 rails 模型上完成验证异常的精确方法。

正如预期的那样，我的模型中有一个状态列，并通过将用户从未验证到已验证来处理电子邮件的验证，这很简单。

我的模型包含密码的正常验证

```
validates :password, length: {minimum: 6}
validates :password_confirmation, presence: true 
```

此验证很重要，但是当我的用户从未验证状态传递到已验证状态时，我的模型验证遇到问题，因为我只对单个列应用更新，但与 state_machine 的活动记录集成似乎应用了记录更新。

state_machine 片段：

```
state_machine :initial => :unverified do

    event :verify do
      transition :unverified => :verified
    end 
```

所以解决方案似乎对模型验证应用了一个例外，我被吸引到：除非作为解决方案..

我实现了一些我不得不说我不完全理解的东西，这似乎现在具有删除密码验证的效果，显然使我的 state_machine 进程工作，但没有达到我的目标..

我的更改添加位置：

```
 validates :password, length: {minimum: 6}, :unless => :proc_no_password_validation
  validates :password_confirmation, presence: true, :unless => :proc_no_password_validation 
```

并以私有方法应用：

```
def proc_no_password_validation
    Proc.new { |user| user.verify }
  end 
```

我有一种感觉，我在方向上走在正确的轨道上，但帮助发现我的错误或问题或其他解决方案将不胜感激。

更新所以我得到了Jef的一些帮助，但我的结论是模型验证方法异常路由错误，我修改了我的状态代码如下：

```
 state_machine :state, :initial => :unverified, :action => :bypass_validation do

    event :verify do
      transition :unverified => :verified
    end

    event :unverify do
      transition :verified => :unverified
    end
  end 
```

然后对我有兴趣忽略的状态进行验证绕过

```
def bypass_validation
    if self.changes['state'][1] == 'verified'
      save!(:validate => false)
    else
      save!(:validate => true)
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:12:20.543

`:unless`接受方法名称作为符号或过程。您给出了返回 Proc 的方法的名称。由于 Proc 不是假的，因此您的除非条件得到满足并且您的验证被跳过。

您应该使用以下之一：

```
validates :password_confirmation, presence: true, :unless => :proc_no_password_validation
 def proc_no_password_validation
   self.verify
 end

validates :password_confirmation, presence: true, :unless => Proc.new{|user| user.verify} 
```

**更新**

state_machine 允许您将验证包装到状态中：

```
state :unverified { # or :verified, when should validation apply ?
  validates :password ...
  validates :password_confirmation ...
} 
```

# javascript - Javascript - 在使用参数之前检查参数

> ID：14070623
> 
> 赞同：2
> 
> 时间：2012-12-28T13:58:42.163
> 
> 标签：javascript, function, parameters

我创建了一个弹出功能，最近更改了格式：

```
createPopUp('My Popup',600,200); 
```

到[这个方法](https://stackoverflow.com/a/4147003/1358231)：

```
createPopUp({ title: 'My Popup', width: 600, height: 200 }); 
```

我只想使用存在的值，所以我目前正在这样做：

```
function createPopUp(config){

  if (typeof config.title != 'undefined'){
    var theTitle = title;
  } else {
    var theTitle = 'Untitled';
  }

} 
```

然而，这似乎非常混乱，所以我一直在寻找一种更有效的方法来检查传入参数或设置默认值，并且非常感谢朝正确方向轻推。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T14:00:53.793

通常，逻辑或运算符用于此：

```
var theTitle = config.title || 'Untitled'; 
```

基本上，右手操作数是一个表达式，它将像所有表达式一样解析为一个确定的值。它是从左到右处理的，因此如果`config.title`未定义，则字符串`'Untitled'`将是结果值。如果需要，
您也可以*链接逻辑运算符：*

```
var someVar = obj.val || anotherObject.val || yetAnother.foo || 'bar'; 
```

或者，如果所有操作数都是对象，并且您不知道存在哪一个：

```
var foo = (bar || foobar || {property: 'default: none of the objects exist').property; 
```

对象引用被组合在一起，因此 JS 将首先尝试将变量（从左到右）解析为现有值，或者最后创建一个具有所需属性的新对象字面量。访问该引用（分组逻辑或的结果），并将属性`.property`分配给 foo... 我希望这至少有点清楚，如果不是：对不起。

*注意*
，某些属性可能未在实例级别设置，或者可能已设置，但分配了一个虚假值。在这种情况下，逻辑 OR 是不够的，您必须使用三元或正则`if...else`：

```
var foo = (obj.hasOwnProperty('val') ? obj.val : 'default');//<-- uses val property, even if it's undefined, as long as it's set on the instance
//or:
var foo = 'default';
if ('val' in obj)
{//val is set, either on the instance or on its prototype-chain
    foo = obj.val
}
//as ternary:
var foo = ('val' in obj ? obj.val : 'default'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T14:06:22.127

您可以像这样扩展一组默认属性：

```
var defaults = {
    title: 'Untitled',
    width: 100,
    height: 100
}

function createPopUp(config)
{
    var opts = {}

    for (var k in defaults) {
        opts[k] = config[k] || defaults[k];
        // sometimes falsy values should be allowed to override defaults
        // in that case, use this instead:
        // opts[k] = typeof config[k] != 'undefined' ? config[k] : defaults[k]
    }

    // opts contains values from defaults where config doesn't have them
} 
```

jQuery 有一个方便`$.extend()`的用途，但你没有这样标记你的帖子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T14:07:03.783

```
var theTitle = 'Untitled';

if('title' in config && config.title != null && config.title.length > 0){
    theTitle = config.title;
} 
```

# json - FullCalendar 未显示来自 JSON 提要的 IE/FF 中的事件

> ID：14070625
> 
> 赞同：0
> 
> 时间：2012-12-28T13:58:47.983
> 
> 标签：json, fullcalendar

我有一个有效的 JSON-Feed（使用 JSONLint 验证），它适用于 Chrome。但是 IE/FF 中没有显示任何事件。我尝试使用不同的时间格式以及类似问题中已经回答的所有其他内容。

JSON 提要：

```
[{"id":"64","title":"","start":"1356517800","end":"1356521400","allDay":false}] 
```

日历：

```
 $('.roomscal').fullCalendar({
events: 'http://..../events.php'
            }); 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-29T00:11:58.703

你检查缓存了吗？

```
$.ajaxSetup ({ 
  // Disable caching of AJAX responses 
  cache: false; 
}); 
```

告诉jQuery不要缓存。

代码在这里找到。[停止缓存 jQuery .load 响应](https://stackoverflow.com/questions/168963/stop-jquery-load-response-from-being-cached)

# ruby-on-rails - 在 cygwin 和 powershell 中查看不同的 gem 列表

> ID：14070627
> 
> 赞同：3
> 
> 时间：2012-12-28T13:58:56.673
> 
> 标签：ruby-on-rails, ruby, powershell, gem, cygwin

我`gem list`在 powershell 和 cygwin 中使用了该命令，并且都显示了不同的 gem 列表。Cygwin 显示

```
*** LOCAL GEMS ***

bundler (1.2.3)
json (1.7.5)
minitest (2.12.1)
rake (0.9.2.2)
rdoc (3.12) 
```

在powershell中我看到：

```
*** LOCAL GEMS ***

io-console (0.3)
json (1.5.4)
minitest (2.5.1)
rake (0.9.2.2)
rdoc (3.9.4)
sass (3.2.1) 
```

所以，同一个 gem 的版本也有两个不同。

为什么会这样？此外，我在使用 rails 时遇到了问题`bundle install`（Cygwin 和 Powershell 都是 int）。会不会是因为这个？

如何确保宝石的一致性？通过 Powershell/cygwin 安装 gem 不会使其可用于整个系统吗？

所以，我想安装一个新的 gems 和 Rails 副本，它在 Powershell 和 cygwin 中是一致的。我怎么做？

`gem environment`在 cygwin 中运行给出了这个：

```
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.23
  - RUBY VERSION: 1.9.3 (2012-11-10 patchlevel 327) [i386-cygwin]
  - INSTALLATION DIRECTORY: /usr/lib/ruby/gems/1.9.1
  - RUBY EXECUTABLE: /usr/bin/ruby.exe
  - EXECUTABLE DIRECTORY: /usr/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86-cygwin
  - GEM PATHS:
     - /usr/lib/ruby/gems/1.9.1
     - /cygdrive/c/SPB_Data/.gem/ruby/1.9.1
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

在windows powershell中它给出：

```
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.23
  - RUBY VERSION: 1.9.3 (2012-04-20 patchlevel 194) [i386-mingw32]
  - INSTALLATION DIRECTORY: C:/Ruby193/lib/ruby/gems/1.9.1
  - RUBY EXECUTABLE: C:/Ruby193/bin/ruby.exe
  - EXECUTABLE DIRECTORY: C:/Ruby193/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86-mingw32
  - GEM PATHS:
     - C:/Ruby193/lib/ruby/gems/1.9.1
     - C:/SPB_Data/.gem/ruby/1.9.1
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T14:45:02.763

我只能根据您提供的信息进行猜测，但听起来您在 cygwin 和 windows 中安装了单独的 ruby​​ 版本。

判断发生了什么的一种简单方法是在两个 shell 中执行 a `ruby -v`and `gem environment`，它会告诉您正在使用哪个 ruby​​ 版本，ruby 认为它正在使用哪个版本，以及 Rubygems 在哪里寻找 gem。

为了确保 Windows 上 gem 的一致性，我建议安装一个 ruby​​ 并使用 Bundler 通过 Gemfile 维护你的 gem。删除你通过cygwin安装的ruby，并确保你使用的ruby在两个环境中都是一样的（试试`ruby -v`）

但是，根据您提供的信息，我不确定您为什么会收到捆绑程序错误。

**更新后编辑**

所以你肯定安装了两个不同版本的 ruby​​，每个版本都有自己独特的 gem。你不能在cygwin中使用windows版本，所以我会做的是卸载cygwin版本（使用cygwin setup.exe来做这个！如果你没有它，从cygwin网站重新下载。你可以指出要删除和添加的软件包）并确保`/cygdrive/c/ruby193/bin`位于您的 cygwin 路径中，以便`which ruby`和`which gem`指向此目录。

# mysql - MySQL在创建外键时给出了成功消息，但实际上它并没有创建一个

> ID：14070629
> 
> 赞同：0
> 
> 时间：2012-12-28T13:59:00.830
> 
> 标签：mysql, foreign-keys

我想在`data`和之间添加第二个外键约束`containers`。当我删除一个容器时，链接到这个容器的数据也必须被删除。

表格：

```
mysql> DESCRIBE data;
+------------------------+--------------+------+-----+---------------------+----------------+
| Field                  | Type         | Null | Key | Default             | Extra          |
+------------------------+--------------+------+-----+---------------------+----------------
| imei                   | varchar(15)  | NO   | MUL | NULL                |                

mysql> DESCRIBE containers;
+--------------------+-------------+------+-----+---------------------+----------------+
| Field              | Type        | Null | Key | Default             | Extra          |
+--------------------+-------------+------+-----+---------------------+----------------+

| imei               | varchar(15) | NO   | MUL | NULL                |                | 
```

我用这个语句创建了一个外键：

```
 mysql> ALTER TABLE `data` ADD FOREIGN KEY (`imei`) REFERENCES `containers`(`imei`) ON DELETE CASCADE;
    Query OK, 15168 rows affected (0.12 sec)
    Records: 15168  Duplicates: 0  Warnings: 0 
```

但尚未创建外键：

```
 mysql> use INFORMATION_SCHEMA;
    Reading table information for completion of table and column names
    You can turn off this feature to get a quicker startup with -A

    Database changed
    mysql> select TABLE_NAME,COLUMN_NAME,CONSTRAINT_NAME, REFERENCED_TABLE_NAME,REFERENCED_COLUMN_NAME from KEY_COLUMN_USAGE where REFERENCED_TABLE_NAME = 'containers';
    +----------------+-------------+-----------------------+-----------------------+------------------------+
    | TABLE_NAME     | COLUMN_NAME | CONSTRAINT_NAME       | REFERENCED_TABLE_NAME | REFERENCED_COLUMN_NAME |
    +----------------+-------------+-----------------------+-----------------------+------------------------+
    | container_logs | imei        | container_logs_ibfk_1 | containers            | imei                   |
    +----------------+-------------+-----------------------+-----------------------+------------------------+
    1 row in set (0.16 sec) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T14:23:43.880

并非所有存储引擎都支持外键；不支持某些 SQL 特性的存储引擎不会产生错误，而只是忽略语句（实际上 SQL 解析器是 MySQL 架构中的较高层，它使用较低级别的 API 与存储引擎进行通信）。

所以如果你使用的是MyISAM，你不能创建外键，但是不会返回错误

# android - 如何在状态栏中显示文本？

> ID：14070630
> 
> 赞同：2
> 
> 时间：2012-12-28T13:59:03.380
> 
> 标签：android, android-notification-bar

我想在状态栏中显示一个数字，就像所有电池应用程序一样（当它们在状态栏中显示电池百分比时，通常带有持久通知）。

似乎我无法设置显示在状态栏上的文本，只能显示图像。

那么唯一的方法是创建 X 图像（例如 100 个图像用于电池应用程序，每个图像具有不同的名称）并在它们之间切换？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T14:45:17.783

[`setNumber()`](http://developer.android.com/reference/android/app/Notification.Builder.html#setNumber%28int%29)与您的`Notification.Builder`或一起[使用](http://developer.android.com/reference/android/app/Notification.Builder.html#setNumber%28int%29)`NotificationCompat.Builder`。

# magento - 在 Magento 自定义管理扩展上保存事件

> ID：14070631
> 
> 赞同：0
> 
> 时间：2012-12-28T13:59:19.090
> 
> 标签：magento

我正在开发在管理面板中添加额外选项卡的扩展，当按下保存按钮时，一些自定义产品属性需要更新。您能否为我提供一些关于如何捕捉该事件并根据该扩展的数据字段进行更新的指南。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:27:53.133

一种方法是创建一个您捕获的“自定义事件”，然后执行一些代码。

为此，请按照下列步骤操作：

1）创建一个自定义事件见[这里](http://phpflow.com/php/how-to-define-custom-event-in-magento/)

2）创建事件后，您需要“调度”它（这让系统知道事件发生了）

使用以下代码调度事件：

```
 Mage::dispatchEvent("your_custom_event", array('name_you_want_to_access_it_by' => $importantVariable)); 
```

3）然后为了捕捉我们刚刚创建的事件，设置一个观察者来捕捉它（请参阅这个问题：[在 Magento 中设置观察者的正确方法是什么？](https://stackoverflow.com/questions/2048458/what-is-the-correct-way-to-set-up-an-observer-in-magento)）

4）做任何你想做的事（几乎任何事情）

# ruby-on-rails - Rails webrat gem - 缺少渲染方法

> ID：14070633
> 
> 赞同：0
> 
> 时间：2012-12-28T13:59:33.847
> 
> 标签：ruby-on-rails, testing, rspec, tdd, webrat

我正在使用 rspec 和 webrat 进行行为驱动的开发。这是我第一次使用 webrat。

我按照 webrat关于如何使用 gem的[说明](https://github.com/brynary/webrat/tree/v0.7.3)`bundle show`进行操作，所以我认为它安装正确（当我使用 gem 时会显示）。

当我只想测试我的渲染视图 (welcome/index.html.erb) 是否具有 h1 标记时，就会出现问题。应该相当简单。

我的代码如下所示：

```
require 'spec_helper'

describe "welcome/index.html.erb" do
  render :template => "welcome/index", :layout => "layouts/application"

  it "displays a welcome message" do
    rendered.should have_selector "h1"
  end
end 
```

我是因为[这个问题](https://stackoverflow.com/questions/1025036/rails-rspec-and-webrat-expected-output-matches-rendered-output-but-still-getti)才到那里的，但也许它有点老了。当我运行测试时，它给了我

```
undefined method `render' 
```

我究竟做错了什么？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:12:00.787

找到了解决它的方法。显然这比我想象的要容易得多：

```
describe "welcome/index.html.erb" do
  it "displays a welcome message" do
    render
    rendered.should have_selector "h1"
  end
end 
```

显然我只需要在“它”块`render` *内说。*这为我解决了这个问题。

# .htaccess - 重写 url 以隐藏真实页面路径

> ID：14070635
> 
> 赞同：6
> 
> 时间：2012-12-28T13:59:51.040
> 
> 标签：.htaccess, url-rewriting

我最近在 SO 的帮助下解决了我的 htaccess rewriterule 问题：

[在重写规则中重用子域](https://stackoverflow.com/q/14062575/1291428)

结果是当有人进入

```
whatever.example.com/anypage 
```

在地址栏中，htaccess 会自动重定向到

```
whatever.example.com/somepath/whatever/anypage 
```

我想做的是找到一种方法，只`whatever.example.com/anypage`在地址栏中`whatever.example.com/somepath/whatever/anypage`显示显示的内容。

在我之前提到的帖子中，Jon Lin 清楚地提到了以下内容：

> 重定向总是改变浏览器的 URL 地址栏中的内容

但是，我知道一些非常常见的 url 重写案例会显示在地址栏中，例如：

```
example.com/article-1-15 
```

但实际上显示的内容

```
example.com/somepath/somepage.php?article=1&otherparam=15 
```

这怎么可能适用于我的情况？我真的希望有一个小网址，但似乎我错过了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T17:02:22.140

你可以尝试这样的事情：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI}  ^/([^/]+)$
RewriteRule .*  http://whatever.example.com/somepath/whatever/%1 [L] 
```

它将映射：

`http://whatever.example.com/anypage`

到资源：

`http://whatever.example.com/somepath/whatever/anypage`

始终显示在浏览器的地址栏中：

`http://whatever.example.com/anypage`

**更新**

如果任何东西是动态的并且在替换 URI 中是相同的，那么这里是另一个选项：

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST}  ([^/]+)\.example\.com.*
RewriteCond %{REQUEST_URI}  ^/([^/]+)$
RewriteRule .*  http://%1.example.com/somepath/%1/%2 [L] 
```

只要替换路径中的“任何”都相同，这将起作用。如果不是，则必须对最后一个“whatever”进行硬编码，如下所示：

```
RewriteRule .*  http://%1.example.com/somepath/whatever/%2 [L] 
```

没有其他方法，因为传入的 URL 没有它。

# jquery-mobile - 如何使用jquery mobile替换动态创建的列表中的html内容

> ID：14070636
> 
> 赞同：1
> 
> 时间：2012-12-28T13:59:53.990
> 
> 标签：jquery-mobile, dynamically-generated

我正在使用 jquery mobile 创建列表视图。此列表视图是在加载页面时在函数中创建的

```
$('#listStock').empty();
            $(data).find("people").each(function()
            {
                var _id = $(his).attr('id');
                var _name = $(this).attr('name');
                var _capacity = $(this).attr('capacity');
                $('#listStock').append('<li id="' + _name +'" data-theme="b"><a href="#detail" >'+_name+' '+_description+'<span class="ui-li-count">'+ _capacity+'</span>'+'</a></li>');
            }); 
```

我只想创建这个列表，但容量每分钟都会改变。如何动态更改列表的这一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:22:20.447

您必须在列表中有更改容量的索引 let _your_index ，

```
 $('.ui-li-count').index(_your_index ).html(_your_capacity); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T15:30:16.980

试试这个解决方案：

```
$(document).bind('changeData', function(e){
    $('#listStock').empty();
    $(data).find("people").each(function(){
        var _id = $(this).attr('id');
        var _name = $(this).attr('name');
        var _capacity = $(this).attr('capacity');
        $('#listStock').append('<li id="' + _name +'" data-theme="b"><a href="#detail">'+_name+' '+_description+'<span class="ui-li-count">'+ _capacity+'</span>'+'</a></li>');
    });
    $('#listStock').listview('refresh');
}); 
```

# c# - 在 WinForms DevExpress XtraWizard 控件中，如何隐藏返回按钮？

> ID：14070648
> 
> 赞同：1
> 
> 时间：2012-12-28T14:00:40.407
> 
> 标签：c#, .net, winforms, devexpress

我知道，如果我将 XtraWizard 控件的 WizardStyle 设置为*WizardAero*，它将从第一页删除或隐藏后退按钮，而不是简单地禁用它，如此处[所示](http://documentation.devexpress.com/#WindowsForms/CustomDocument4723)。我想要相同的行为，但我想将 WizardStyle 保留为*Wizard97*。

这可能吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T14:57:26.323

一种方法是使用`CustomizeCommandButtons`WizardControl 上的事件。

```
 private void wizardControl1_CustomizeCommandButtons(object sender, CustomizeCommandButtonsEventArgs e)
    {
        e.PrevButton.Visible = false;
    } 
```

如果你只想在第一页隐藏它

```
 private void wizardControl1_CustomizeCommandButtons(object sender, CustomizeCommandButtonsEventArgs e)
    {
        if(wizardControl1.SelectedPageIndex == 0)
            e.PrevButton.Visible = false;
    } 
```

似乎它每次都会重置可见性（因此您无需重新打开它）。无论如何，我认为这就是你要找的。

[http://documentation.devexpress.com/#WindowsForms/DevExpressXtraWizardWizardControl_CustomizeCommandButtonstopic](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraWizardWizardControl_CustomizeCommandButtonstopic)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-17T19:37:38.453

您还可以将自己的字段设置为向导按钮，然后在代码中的任何位置使用这些字段。例如，这将允许您隐藏/禁用“下一步”按钮，直到完成所有字段页面。

```
 private void NodeConfigurationWizardCustomizeCommandButtons(object sender, CustomizeCommandButtonsEventArgs e)
    {
            _nextButton = e.NextButton;}

        private void GetRowsButtonClick(object sender, EventArgs e)
    {
            var rowList = ServiceClient.GetAvailableRows();
            var rowsReturned = rowList.Count > 0;
            _nextButton.Button.Enabled = rowsReturned ;} 
```

# jquery - 如何让对象元素下来？

> ID：14070651
> 
> 赞同：-3
> 
> 时间：2012-12-28T14:00:49.213
> 
> 标签：jquery

`test2`单击元素时需要获取对象`test1`

```
<ul> 
      <li id="test1"><a href="javascript: void(0);">Label one</a>
        <ul id="test2">
          <li><a href="test.php">test</a></li>
         </ul>
      </li>
      <li id="test3"><a href="javascript: void(0);">Label two</a>
        <ul id="test4">
          <li><a href="test.php">test</a></li>
        </ul>
      </li>
</ul> 
```

`test2`单击时如何获取对象`li id="test1"`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T14:03:41.377

使用[$.children](http://api.jquery.com/children/)

```
$('li').click(function(){
  var $target = $(this).children('ul');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T14:06:58.820

使用 jquery：

```
$('#test1').on('click', function (e) {
    var test2 = $('#test2);
}); 
```

香草JavaScript：

```
var test1 = document.getElementById('test1');
test.addEventListener('click', grabTest2, false);

function grabTest2() {
    var test2 = document.getElementById('test2');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T14:10:54.940

`class`最好通过而不是使用来识别元素`ids`。我`liClass`为父母 li 和`ulClass`孩子 ul 使用了类。如果您使用的是 neigher class 或 id，这将使`save`您免于生成`lot of ids`及其操作，并且不会影响页面上的其他 li 和 ul。

**[现场演示](http://jsfiddle.net/rajaadil/pnAnc/)**

*html*

```
<ul> 
      <li id="test1" class="liClass"><a href="javascript: void(0);">Детские коляски</a>
        <ul id="test2" class="ulClass">
          <li><a href="test.php">test</a></li>
         </ul>
      </li>
      <li id="test3"><a href="javascript: void(0);">Детские коляски</a>
        <ul id="test4">
          <li><a href="test.php">test</a></li>
        </ul>
      </li>
</ul> 
```

*Javascript*

```
$('.liClass').click(function(){
  obj = $(this).find('.ulClass');
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T14:33:53.410

似乎您希望在`a`单击`li`.

您需要至少定义一个类。（或者包括父元素，如`div>ul>li>a`）

```
$('ul.parent > li > a').click(function(){
   var obj = $(this).parent().children('ul');  //going back one step and selecting the child element
}); 
```

检查[**小提琴**](http://jsbin.com/inaboq/1/edit)

如果您想要单击功能`li`本身，请使用其他解决方案（或尝试通过更改我提供的上述解决方案来获得）

我不确定这是否被推荐。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T14:06:26.163

向顶部`ul`元素添加一个类

```
<ul class="test"> 
      <li id="test1">
          <a href="javascript: void(0);">Детские коляски</a>
          <ul id="test2">
              <li><a href="test.php">test</a></li>
          </ul>
      </li>
      <li id="test3">
          <a href="javascript: void(0);">Детские коляски</a>
          <ul id="test4">
              <li><a href="test.php">test</a></li>
          </ul>
      </li>
</ul> 
```

接着

```
<script>
    $(function(){
        $('.test > li').click(function(){
            var childUl = $(this).children('ul');
            // do what you want with childUl
        });
    });
</script> 
```

# css - 用于移动设备的不同 css - chrome 测试 - 一些 css 无法正常工作

> ID：14070658
> 
> 赞同：0
> 
> 时间：2012-12-28T14:01:22.113
> 
> 标签：css, mobile, google-chrome-devtools

我正在尝试根据 PC 或移动设备显示具有不同样式的页面。

我的html，

```
<link media="only screen and (max-device-width: 780px)" href="iPhone.css" type="text/css" rel="stylesheet" />
<link href="pc.css" type="text/css" rel="stylesheet" />

 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
 <html>
 <head>
   <title>My first styled page</title>
 </head>

 <body>

 <!-- Site navigation menu -->
 <ul class="navbar">
    <li><a href="index.html">Home page</a></li>
    <li><a href="musings.html">Musings</a></li>
    <li><a href="town.html">My town</a></li>
    <li><a href="links.html">Links</a></li>
 </ul>

  <!-- Main content -->
 <h1>My first styled page</h1>

  <p>Welcome to my styled page!</p>

  <p>It lacks images, but at least it has style.
    And it has links, even if they don't go
     anywhere</p>

   <p>There should be more here, but I don't know
   what yet.</p>

    <!-- Sign and date the page, it's only polite! -->
    <address>Made 5 April 2004<br>
     by myself.</address>

   </body>
   </html> 
```

我的 pc.css，

```
body {
  padding-left: 11em;
  font-family: Georgia, "Times New Roman",
        Times, serif;
  color: purple;
  background-color: #d8da3d }
ul.navbar {
  list-style-type: none;
  padding: 0;
  margin: 0;
  position: absolute;
  top: 2em;
  left: 1em;
  width: 9em }
h1 {
  font-family: Helvetica, Geneva, Arial,
        SunSans-Regular, sans-serif }
ul.navbar li {
  background: white;
  margin: 0.5em 0;
  padding: 0.3em;
  border-right: 1em solid black }
ul.navbar a {
  text-decoration: none }
a:link {
  color: blue }
a:visited {
  color: purple }
address {
  margin-top: 1em;
  padding-top: 1em;
  border-top: thin dotted } 
```

和 iPhone.css，

```
body {
  color: #FFFFFF;
  background-color: #000000 }
ul.navbar {
    display : none } 
```

我通过 Inspect Element 使用 chrome 对此进行了测试，并选择了 iPhone4 选项，菜单链接未按预期显示，但 iPhone.css 中的颜色和背景颜色样式未生效。它显示为交叉线。

![MobileCssResult](../Images/a4ef47c41573dc1073dba6cb7c94b661.png)

请帮我找出哪里出了问题或提供一个标准的方法来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:40:32.207

交换两个`<link>`元素。通用样式表应该首先出现，因为它们的规则将被来自更具体（设备特定）样式表的规则覆盖（如果有的话）。

您还应该将`<link>`标签放在标签内`<head>`- 否则您的 HTML 格式严重错误。WebKit 中有很多代码试图尽可能优雅地处理这个问题，尽管......

# ember.js - Ember.js：attributeBinding with a '-' fire 'SyntaxError: Unexpected token -'

> ID：14070659
> 
> 赞同：2
> 
> 时间：2012-12-28T14:01:33.683
> 
> 标签：ember.js

我需要将 html 输入属性与“数据日期”名称绑定。使用“-”绑定变量时出现错误。使用“基本”变量名称可以正常工作

我该如何解决？

有效的代码（绑定测试属性）：

```
App.DatePicker = Em.View.extend({
  classNames: ['input-append date'],
  attributeBindings: ['data-date-format', 'test'],
  testBinding: 'this.value',
  value: '' 
```

使用数据日期 att 名称不起作用的代码：（触发 SyntaxError: Unexpected token - ）

```
App.DatePicker = Em.View.extend({
  classNames: ['input-append date'],
  attributeBindings: ['data-date-format', 'data-date'],
  data-date: 'jkljkl', 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T21:33:59.613

好吧，我的坏我已经倒写了。

```
MyApp.DatePicker = Em.View.extend({
  classNames: ['input-append date'],
  attributeBindings: ['dtf:data-date-format', 'dataDate:data-date'],
  dtf: '',
  dataDate: 'jkljkl'
}); 
```

看来您必须使用空字符串才能将属性保留为空值。

# java - Java 初始化对象设计

> ID：14070662
> 
> 赞同：0
> 
> 时间：2012-12-28T14:01:43.317
> 
> 标签：java

可以说我有一个`foo`来自 class的对象`Foo`。可以说类`Foo`有很多表征其后代的领域。

当有这么多字段时，最好通过 Foo 的构造函数来初始化它们，例如。

```
Foo foo = new Foo(0, 12, 123, 2, 2, (and so on...)); 
```

或在将使用的类的构造函数或方法中初始化它们，`foo`例如。

```
Foo foo = new Foo();

public void initFoo() {
    foo.setX(1);
    foo.setY(3);
    foo.setH(3);
    (and so on...)
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T14:03:39.863

我会通过构造函数做所有事情。这样你就不会忘记这样做并最终得到一个部分构造的对象。使用构造函数自然会导致生成*不可变*对象，这些在能够推理它们的行为方面很有用（尤其是在多线程环境中）

对此的跟进将是使用[构建器模式](http://en.wikipedia.org/wiki/Builder_pattern)。在这种情况下，您向构建器组件提供参数，然后构建器可以确定缺少的参数和/或如何构造对象。

例如

```
FooBuilder fb = new FooBuilder();
fb.setX(1);
fb.setY(2);
// etc...
Foo f = fb.newInstance(); 
```

说了这么多，你需要用这么多参数来构造你的对象吗？这听起来像：

1.  你的对象自己做的太多了，或者
2.  这些参数可以组合成其他有意义的对象（例如`x`和`y`坐标`point`等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T14:35:35.530

一般来说，为了松散耦合，我建议您使用第一种方法。您的类需要初始化多少成员并不重要。
一旦您开始为非平凡的类编写单元测试，您将需要这种方法，
您需要在其中模拟这些成员。

如果您想了解有关与您的问题相关的设计决策的更多信息，请浏览网络以获取有关依赖注入、单元测试、控制反转和松散耦合的进一步阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T14:04:58.083

就个人而言，我会选择您的第二个版本，即使用 setX()、setY() 等在构造函数中初始化。因为您不会有部分构造的对象，而且它看起来很整洁。

# snmp - 生成的 Net-Snmp 可执行文件未分发

> ID：14070665
> 
> 赞同：0
> 
> 时间：2012-12-28T14:01:47.043
> 
> 标签：snmp, net-snmp, snmptrapd

实际上，我使用 Visual Studio C++ (2008) 在 Windows 系统上编译了 Net-Snmp-5.7.1 版本的源文件。它在那台特定的机器上运行良好，但是每当我尝试获取这个编译的源并让它在另一个机器上运行时windows系统，它给出了这个错误`THE SYSTEM CANNOT EXECUTE THE SPECIFIED PROGRAM`。即使我在目标机器上使用 Microsoft 重新分发的包..任何可以帮助我的人，请帮助。我非常期待您的帮助。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:17:05.320

`net-snmp`代码具有指定版本和操作系统的清单。net-snmp 的源代码中有很多条件编译代码。**虽然这不是特定于 net-snmp。某些 DLL 在另一台窗口机器上找不到，原因是**“系统无法执行指定的程序”。[**在这里阅读**](http://blogs.msdn.com/b/nikolad/archive/2005/06/09/427101.aspx)

# javascript - javascript，对象，将函数作为带参数的参数传递 - angular，jquery 概念的基本误解

> ID：14070666
> 
> 赞同：2
> 
> 时间：2012-12-28T14:02:02.053
> 
> 标签：javascript, jquery, oop, object, angularjs

我试图了解我真正在做什么，因为我觉得我缺乏一些东西。您能否指出我的某个地方或确认我的错误/理解？

```
request.then(function(response) {
        updateCurrentUser(response.data.data);
        currentUser.isAuthenticated();
      }); 
```

基本上是这样吗？

```
request = {
    then : function (foo){
        foo("first")
    } }

request.then(function (response) { console.log(response) ; }); 
```

如果你在这里看到完整的代码[#](https://github.com/angular-app/angular-app/blob/master/client/src/app/login/login.js) [35](https://github.com/angular-app/angular-app/blob/master/client/src/common/services/authentication/authentication.js)和#63

指示：

```
 AuthenticationService.login($scope.user.email, $scope.user.password).then(function(loggedIn) {
      if ( !loggedIn ) {
        $scope.authError = "Login failed.  Please check your credentials and try again.";
      }
    }); 
```

AuthenticationService 作为工厂：

```
login: function(email, password) {
  var request = $http.post('http://', {email: email, password: password});
  return request.then(function(response) {
    updateCurrentUser(response.data.data);
    return currentUser.isAuthenticated();
  });

}, 
```

我不明白的是，loggedIn 变量**的值为什么等于**语句返回 currentUser.isAuthenticated();的值。返回**AND 不等于**原始的 then(function(response)，因为我从 AuthenticationService 返回承诺。关于上面的示例，如何实现这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:29:55.883

**我认为概念的问题源于您忽略了return**声明的事实。`AuthenticationService.login`实际上是一个带有预定义请求的闭包，所以你可以想象它被`login`替换为它的返回值`request.then(function(response) {...`。然后您可以简单地推断出整个代码行是：

```
AuthenticationService.login($scope.user.email, $scope.user.password).then(
function(response)
{
    updateCurrentUser(response.data.data);
    return currentUser.isAuthenticated();
}).then(
function(loggedIn)
{
  ... 
```

这样，您可能会看到响应的结果应该作为登录检查下一步的输入出现。

# xsd - 在 XML 中定义和引用实体？

> ID：14070667
> 
> 赞同：1
> 
> 时间：2012-12-28T14:02:30.080
> 
> 标签：xsd

我正在尝试为类似于以下示例的文档创建 XML 模式。这是在 XML 文档中定义和引用实体的正确方法吗？如何在我的模式中指定`<palette>`包含对现有`<color>`实体的引用，而不是新实体的定义？

```
<!-- define some colors -->
<color name="red">#ff0000</color>
<color name="green">#00ff00</color>
<color name="blue">#0000ff</color>

<!-- define different groups of the colors defined above -->
<palette name="rg">
   <color>red</color>
   <color>green</color>
</palette>

<palette name="gb">
   <color>green</color>
   <color>blue</color>
</palette> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:18:09.277

在（独立）`color`元素（其中`name`属性定义键）上定义键，然后为元素的子元素定义键引用，`color`请`palette`参阅[http://www.w3.org/TR/xmlschema-0/#specifyingKeysAndtheirRefs](http://www.w3.org/TR/xmlschema-0/#specifyingKeysAndtheirRefs)细节。

# php - Smarty 如何从模板文件中添加元标记

> ID：14070668
> 
> 赞同：0
> 
> 时间：2012-12-28T14:02:33.873
> 
> 标签：php, smarty, meta-tags

我在 PHP 文件中使用的代码示例：

```
$title = "Test title";
$description = "test description";
$keywords = "test keywords";    
$smarty->assign('title',$title);
$smarty->assign('description',$description);
$smarty->assign('keywords',$keywords);    
$smarty->display('header.tpl');
$smarty->display('private.tpl');
$smarty->display('footer.tpl'); 
```

## header.tpl 中使用的代码

```
<title>{$title}</title>
<meta name="description" content="{$description}" />
<meta name="keywords" content="{$keywords}" /> 
```

在同一个 php 文件中显示不同的模板（例如 private2.tpl）时是否可以显示 .tpl 文件中包含的其他标签？我必须在我的 .tpl 文件中插入什么代码（例如 private2.tpl）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T07:10:07.550

尝试这个 ：

```
{include file='private2.tpl'} 
```

# google-maps - 我的地图上的隐形样式

> ID：14070669
> 
> 赞同：1
> 
> 时间：2012-12-28T14:02:44.070
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers, google-maps-styled

我正在使用 Google Maps For Javascript。我重新组织了所有选项和工作真实位置。但是当我添加样式和标记时，我看不到效果。我该如何解决？

```
 var locations = [
      ['MyLocation', 41.084951,29.016048],
    ];

    var waStyle = [
            {
                featureType: "all",
                stylers: [
                    { saturation: -100 }
                ]
            }
        ];

    var map = new google.maps.StyledMapType(waStyle,{name: "MyLoc"});

    var img = new google.maps.MarkerImage("/themes/bc/images/bc_pin.png");

    var map = new google.maps.Map(document.getElementById('map_detail'), {
      zoom: 10,
      center: new google.maps.LatLng(41.084951,29.016048),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var infowindow = new google.maps.InfoWindow();

    var marker, i;

    for (i = 0; i < locations.length; i++) {  
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
        map: map
      });

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
        }
      })(marker, i));

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:31:23.740

使用您的代码，我看到了标记。该样式不可见，因为您没有在地图上使用它。

[文件](https://developers.google.com/maps/documentation/javascript/styling)

要实际使用该样式（您的代码带有一些注释并从上面引用的文档中添加了代码）：

```
// Create a new StyledMapType object, passing it the array of styles,
// as well as the name to be displayed on the map type control.
var styledMap = new google.maps.StyledMapType(waStyle,{name: "MyLoc"});

var img = new google.maps.MarkerImage("mapIcons/marker1.png");

// Create a map object, and include the MapTypeId to add
// to the map type control.
map = new google.maps.Map(document.getElementById('map_canvas'), {
  zoom: 10,
  center: new google.maps.LatLng(41.084951,29.016048),
  mapTypeId: google.maps.MapTypeId.ROADMAP,
  mapTypeControlOptions: {
    mapTypeIds: [google.maps.MapTypeId.ROADMAP, 'map_style']
  }
});

//Associate the styled map with the MapTypeId and set it to display.
map.mapTypes.set('map_style', styledMap);
map.setMapTypeId('map_style'); 
```

要使用您定义的标记图标，请将其包含在 google.maps.Marker 构造函数中：

```
 marker = new google.maps.Marker({
    position: new google.maps.LatLng(locations[i][1], locations[i][2]),
    icon: img,
    map: map
  }); 
```

请注意，如果您有多个标记，则将 infoWindow 与标记关联时会遇到问题，这可以通过函数闭包（createMarker 函数）修复，并且是常见问题解答。

[基于您的代码的工作示例](http://www.geocodezip.com/v3_SO_simpleMap_styleAndMarker.html)

# java - Spring访问表单

> ID：14070670
> 
> 赞同：0
> 
> 时间：2012-12-28T14:02:57.457
> 
> 标签：java, forms, spring

我试图访问表单中包含的数据，但遇到空指针异常

这是我的表格：

```
<form:form action="dologin.htm"  method="post" commandName="loginform">
                          <content goes in here> 
```

我正在使用的控制器：

```
@RequestMapping("/login") //login page
  public ModelAndView initLoginPage() {          
      Map<String, Object> model = new HashMap<String, Object>();
      model.put("loginform", new Login());

      return new ModelAndView("login", model);        
  }

@RequestMapping(value = "/dologin", method = RequestMethod.POST)
    protected ModelAndView logar(@ModelAttribute("loginform") Login loginForm, BindingResult result) {
    if(loginService.doLogin(loginForm)!= null){
        return new ModelAndView("home");
    }else{
        String error = "Make sure to fill in all fields";
        return new ModelAndView("login","error",error);
    }
} 
```

Login 类包含与表单上相同的字段（用户名和密码）

# php - 布尔值作为复选框

> ID：14070681
> 
> 赞同：1
> 
> 时间：2012-12-28T14:04:08.330
> 
> 标签：php, doctrine-orm, zend-form, zend-framework2

我想向我的实体添加一个布尔值。

它看起来像这样：

```
namespace MyModule\MyClass\Entity;
use Doctrine\ORM\Mapping as ORM;
use Zend\Form\Annotation as Form;
/**
 * @ORM\Entity
 * @ORM\Table(name="mymodule_myclass")
 * @Form\Name("myclass")
 * @Form\Attributes({ "class": "form-horizontal" })
*/
class MyClass

 ...

 /**
 * @ORM\Column(type="boolean")
 * @Form\Attributes({"type":"checkbox"})
 * @Form\Options({"label":"Revised"})
 *
 */
protected $revised = false; 
```

当然，我想将此变量显示为复选框。所以我添加了`@Form\Attributes`.

不幸的是我得到了一个

> “网络错误：500 内部服务器错误”

任何想法为什么会这样以及我能做些什么来解决它？

顺便说一句：根据 Firebug 手动更改`type`属性会将输入字段变成一个复选框...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:11:09.867

解决方案是使用 Zend-Checkbox 并且不改变输入的类型。

```
/**
 * @ORM\Column(type="boolean")
 * @Form\Options({"label":"My Boolean*"})
 * @Form\Type("Zend\Form\Element\Checkbox")
 */
protected $my_bool; 
```

# python - 从元组列表中删除某些内容

> ID：14070686
> 
> 赞同：1
> 
> 时间：2012-12-28T14:04:35.090
> 
> 标签：python, list, tuples

假设我有一个清单：

```
[(12,34,1),(123,34,1),(21,23,1)] 
```

我想`1`从列表中的每个元组中删除它，使其变为

```
[(12,34),(123,34),(21,23)] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T14:06:16.203

你想截断你的元组，使用列表理解：

```
[t[:-1] for t in listoftuples] 
```

或者，作为一个简单的演示：

```
>>> listoftuples = [(12,34,1),(123,34,1),(21,23,1)]
>>> [t[:-1] for t in listoftuples]
[(12, 34), (123, 34), (21, 23)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T14:10:08.473

元组是不可变的，因此您不能删除项目。但是，您可以从旧元组创建一个新元组，不包括您不想要的元素。因此，要从元组列表中的每个元组中删除任意项，您可以执行以下操作：

```
def deleteItem(lst, toDel):
    return [tuple(x for x in y if x != toDel) for y in lst] 
```

结果：

```
>>> lst = [(12,34,1),(123,34,1),(21,23,1)]
>>> deleteItem(lst, 1)
[(12, 34), (123, 34), (21, 23)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T14:30:39.840

```
>>> a=[(12, 34, 1), (123, 34, 1), (21, 23, 1)]
>>> [filter (lambda a: a != 1, x) for x in a]
[(12, 34), (123, 34), (21, 23)] 
```

无论索引如何，这都会从元组中删除所有 1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T14:21:51.680

由于您不能更改元组（因为它们是不可变的），我建议使用列表列表：

```
my_list = [[12,34,1],[123,34,1],[21,23,1]]
for i in my_list:
    i.remove(1)
return my_list 
```

这返回：`[[12, 34], [123, 34], [21, 21]]`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T17:01:11.587

```
 python 3.2

    1\. [(i,v)for i,v,c in list1]

    2\. list(map(lambda x:x[:2],list1)) 
```

# php - PHP 字符编码（MediaWiki 中的变音符号）

> ID：14070687
> 
> 赞同：1
> 
> 时间：2012-12-28T14:04:38.527
> 
> 标签：php, windows, encoding, mediawiki

我在 Windows 7 下的本地机器上运行 Apache/PHP/MySQL 服务器 (xampp)。在那里我安装了 MediaWiki-Software 以及许多扩展。我的目标是从维基百科下载一些页面并在本地显示。一切运行良好，除了一个大问题：

德语 Wikipedia 中的图像文件的文件名中包含德语变音符号（ä、ö、ü）。这无法更改，因为文章链接到带有元音变音的名称。

当我尝试导入这些图像（通过`maintenance/importImages.php`脚本）时，它不起作用。我跟踪了代码并找出了原因：

当 PHP 扫描目录中的文件时，它会将文件名读取为 ANSI 字符串。MediaWiki 内部要求所​​有字符串都是 utf-8。因此，文件名中的元音变音符号被解释为（不存在的）unicode 字符的一部分，这会破坏脚本。

如果我手动将调用添加`utf8_encode()`到脚本中，那么该名称就可以了，并且已正确添加到数据库中。但是实际写入“images”目录的文件有一个损坏的名称 - 两个特殊字符而不是变音符号。原因是 PHP 脚本将 utf-8 字符串发送到文件系统函数（“copy”，...），但操作系统需要 ANSI 字符串。我可以在每个文件系统调用之前手动添加一个调用`utf8_decode()`，但是有成千上万个！

再次简而言之：操作系统在 ANSI 中工作（这对于 windows 来说不容易更改），PHP 服务器内的 MediaWiki 软件在 utf-8 中工作（也不能更改）。有没有办法在文件名字符串每次进出 PHP 服务器时自动编码/解码？

我已经在玩`mb_internal_encoding()`and了`mb_http_output()`，但这并没有改变任何东西：MediaWiki 使用仅适用于 utf-8 字符串的硬编码函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:17:56.997

您需要在导入文件系统之前重命名文件系统上的所有文件，以便它们与数据库内的数据匹配。

只需确保当文件名的 UTF-8 编码二进制序列命中文件系统时，找到该文件。

```
$fileANSI; // you have this
$fileUTF8 = ut8_encode($fileANSI); // you do this already
// insert etc, when MW is ready do:
rename($fileANSI, $fileUTF8); 
```

因此，您需要在命中时将每个文件从当前名称重命名为二进制序列。

对于您的网络服务器，您可能还需要引入一个重写规则来处理传入的 HTTP 请求，因为网络服务器可能使用 PHP 本身以外的其他文件系统处理。

还要检查使用了哪个代码页的文件系统的系统配置。那可能会有所不同。

# jsp - Struts 2中模型驱动继承类数据成员与UI表单属性的自动绑定

> ID：14070689
> 
> 赞同：1
> 
> 时间：2012-12-28T14:04:42.247
> 
> 标签：jsp, struts2, model-driven

1.  我有一个模型类如下：

    ```
    class MYModel { 
      List<String> companyName;
    } 
    ```

2.  我有一个动作说：

    ```
    class MyAction extends ActionSupport implements ModelDriven<MYModel>
    {
       MyModel objModel=new MyModel();

      // getters n setters for "objModel"
    } 
    ```

3.  现在，我有输入表单，比如 Input.jsp：

    ```
    <form ...>
    <div>
      <input type="text" name="companyName" id="id1">
    </div>
    <div>
      <input type="text"  name="companyName" id="id2">
    </div> 
    ```

4.  让，我有输出形式说，Output.jsp：

    ```
    <div>
      <input type="text" name="companyName" id="id3">
    </div>
    <div>
      <input type="text" name="companyName" id="id4">
    </div> 
    ```

问题是我想直接映射（不使用 javascript 或 jquery）到 output.jsp。也就是说：如果我输入 4 in `textfield(with id=1)`，那么 textfied with`id=3` 应该自动设置值 4。记住，文本字段的名称必须相同。

# css - GWT UiBinder 样式主名称不起作用

> ID：14070690
> 
> 赞同：3
> 
> 时间：2012-12-28T14:04:43.483
> 
> 标签：css, gwt, uibinder

我正在尝试使用 UiBinder 覆盖特定小部件的样式。我在看什么？

```
<ui:style>
  /*************
   * Note #1
   *************/
  .btnVote {
     display: inline-block;
     width: 50px;
     height: 50px;
     background: #fff;
     margin: 5px;
     text-align: center;
     outline: none;
     cursor: pointer;
  }

  /*************
   * Note #2
   *************/
  .btnVote-up-hovering, .btnVote-down-hovering {
     background: #ddd;
  }

  .btnVote-up-disabled, .btnVote-down-disabled {
     border-shadow: inset 0 1px 3px #aaa;
  }

  .lblName {
     line-height: 50px;
     font-size: 40px;
     padding: 5px 10px;
  }

  .clear {
     clear: both;
     overflow: auto;
  }

  .floatLeft {
     float: left;
  }
</ui:style>

<g:HTMLPanel styleName="{style.clear}">

    <g:FlowPanel styleName="{style.floatLeft}">

       /*************
        * Note #3
        *************/
        <g:PushButton ui:field="btnVoteUp" stylePrimaryName="{style.btnVote}">
            (+)
        </g:PushButton>

        <g:PushButton ui:field="btnVoteDown" stylePrimaryName="{style.btnVote}">
            (-)
        </g:PushButton>
    </g:FlowPanel>

    <g:FlowPanel styleName="{style.floatLeft}">

        <g:Label ui:field="lblName" stylePrimaryName="{style.lblName}"/>
    </g:FlowPanel>
</g:HTMLPanel> 
```

注意 1：此规则**正在**应用并且工作正常

注意 2：其他规则似乎被忽略（它们不生效）

注 3：小部件的默认命名**正在**重置，因此注 1 可以正常工作。基类设置为**GOGXR1SCFI**而不是**gwt-PushButton**

为什么其他规则不起作用？当我悬停小部件时，确实将**GOGXR1SCFI-up-hovering**类设置为小部件，但没有随附的 CSS。

谢谢你的帮助。

**更新**

我遇到了一段时间让我很难受的事情：当您使用 @external 关键字时，**您必须在 @external 语句的末尾放置一个半列**，如：

```
<ui:style>
@external .btnVote;
.btnVote {
   ...
}
</ui:style>

<g:FlowPanel styleName="{style.btnVote}"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T02:40:29.713

您可以做的一件事是使用 ClientBundle 创建 CSS，在那里定义所有不同的状态，然后手动处理各种状态。这样您就不需要将类定义为@external，GWT 会为您优化 CSS（缩短名称，仅发布使用的内容等）。这对于自定义小部件等特别有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T23:28:57.797

处理这个问题的最简单方法是写`@external .btnVote, .btnVote-up-hovering, .btnVote-down-hovering, .btnVote-up-disabled, .btnVote-down-disabled`在你的`<style>`部分的顶部。

* * *

最初的 GWT 小部件不能很好地与 CSS 资源（如 UiBinder 中的那个）一起使用。它们依赖于一个主要的样式名称，它们附加了诸如“悬停”之类的东西。这对于 CSS 资源和 UiBinders 来说是很糟糕的，因为当您键入“up-hovering”时，它会变成 SDLFJKS 之类的东西。

按钮样式不会被混淆（因此您可以阅读“悬停”）。你的 UiBinder 样式确实会被混淆。只要进行混淆，您就永远无法使它们匹配。

因此，`@external`关键字告诉 UiBinder 和 CssResource 不要混淆某些样式。现在，当您使用 时`{style.btnVote-up-hovering}`，它实际上会进入最终的 HTML，也就是这些老式 GWT 样式将被应用的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T16:42:54.423

我怀疑您的 UIBinder 中的 GWT 混淆了 CSS 样式名。参考 -[在 UiBinder 中进行样式设置时出现乱码的 css 名称](https://stackoverflow.com/questions/7854520/garbled-css-name-when-styling-within-uibinder)

选择您认为更容易集成到您的流程中的方法。干杯:)

# wpf - Datagrid刷新组/排序collectionview

> ID：14070696
> 
> 赞同：0
> 
> 时间：2012-12-28T14:05:08.273
> 
> 标签：wpf, datagrid, collectionview

我想刷新我的数据网格，但刷新后，我在组内的排序不再正确......

```
<XmlDataProvider x:Key="SmsData" XPath="/response/conv/">
</XmlDataProvider>

<local:RowColorConverter x:Key="RowColorConverter" />

<CollectionViewSource x:Key="SmsView"  Source="{StaticResource SmsData}" >
    <CollectionViewSource.SortDescriptions>
        <scm:SortDescription PropertyName="date" Direction="Descending" />
        <scm:SortDescription PropertyName="time" Direction="Descending" />

    </CollectionViewSource.SortDescriptions>

    <CollectionViewSource.GroupDescriptions>
        <dat:PropertyGroupDescription PropertyName="recipient" />

    </CollectionViewSource.GroupDescriptions>
</CollectionViewSource> 
```

我调用了一个按钮，该按钮引用了一种执行刷新的方法：

```
...

CollectionViewSource cvs = FindResource("SmsView") as  CollectionViewSource;
cvs.View.Refresh();

dataGrid1.Items.Refresh();

xdp = FindResource("SmsData") as XmlDataProvider;
xdp.Document = doc; 
```

# javascript - 逻辑表达式

> ID：14070699
> 
> 赞同：-1
> 
> 时间：2012-12-28T14:05:33.470
> 
> 标签：javascript

以下陈述之间是否有任何区别：

1.  `if(newValue && newValue != '')`和
2.  `if(newValue != '')`

我在许多脚本中观察到表达式 1，但总是感到困惑。

请协助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T14:11:50.320

> 如果（新价值 && 新价值！= ''）。

这可以防止`null`or的值`undefined`。

在可能的`''`、`0`、和中`false`，只有最后两个不等于（使用），需要额外的条件。`undefined``null``''``!=`

```
console.log(null && null != '') // null -> falsy
console.log(null != '') // truthy

var undef = void 0;

console.log(undef && undef != '') // undefined -> falsy
console.log(undef != '') // truthy 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T14:09:00.450

答案是否定的，

1）对于`(newValue && newValue != '')`，它检查newValue是否存在（非假值）并且它不为空

2) 对于`if(newValue != '')`, 它只检查 newValue 是否不为空

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T14:59:11.263

再薄一点，我认为值得添加到已经发布的答案中。
正如你，OP，说：你已经多次看到现有代码中的第一个表达式，所以你可能已经看到了这样的事情：

```
if (foo && foo.bar)
{
    foo.bar();
} 
```

在这种情况下，这是为了避免某些浏览器出现错误。在大多数现代浏览器中访问 somehting like`localStorage.doesNotExist`不会引发错误，但并非所有浏览器都支持这一点，所以我们：首先检查`localStorage`对象是否存在，如果存在，是否可以将属性解析为非虚假值。

相同的逻辑适用于对象的方法，在不同的浏览器中可能会有所不同：

```
var domElement = document.getElementById('foobar');//might not exist, though
if (domElement && domElement.addEventListener)
{//does element exist && does it have a method called addEventListener
    domElement.addEventListener('click', functionRef, false);
}
else if (domElement && domElement.attachEvent)
{
    domElement.attachEvent('onclick', functionRef);
} 
```

如果您要省略`domElement`if 语句中的第一个，而只是 write `domElement.addEventListener`，那*可能*`null.addEventListener`与引发*TypeError*的写入相同（因为您试图访问原始值的属性）

# ms-access - 从模块引用调用表单

> ID：14070703
> 
> 赞同：1
> 
> 时间：2012-12-28T14:05:57.817
> 
> 标签：ms-access, vba, ms-access-2003

我在打开我的主页表单的模块中有一个函数：

```
Function goto_home()
    Dim stDocName As String

    'DoCmd.Close acForm, "CallingForm.Name" , acSaveYes
    stDocName = "home_page"
    DoCmd.OpenForm stDocName
End Function 
```

它在一个模块中，因为我在所有使用代码的表单上都有命令按钮，而不是在每个表单对象中复制它。

我的代码中的注释行应该在打开主页之前关闭调用表单。如果我是从我会使用的表单对象`me.form.name`执行此操作，但您不能在模块中执行此操作。

是否有允许引用调用表单的等效模块语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T14:08:55.953

您始终可以在函数中传递表单名称，例如：

```
Function goto_home(frmName As String)

Dim stDocName As String
Dim stLinkCriteria As String

    DoCmd.Close acForm, frmName , acSaveYes
    stDocName = "home_page"
    DoCmd.OpenForm stDocName, , , stLinkCriteria

End Function 
```

然后，当您从每个表单调用它时，您可以将表单的名称放在调用参数中。

# android - 当我启动它时，我的 android 应用程序不断崩溃

> ID：14070704
> 
> 赞同：1
> 
> 时间：2012-12-28T14:05:57.810
> 
> 标签：android

我最近得到了一些应用程序源代码。所以我导入了 Eclipse 并重命名了应用程序包。一切都很顺利，直到我尝试启动该应用程序。当我这样做时，它会立即崩溃。我想知道为什么。这是日志：

```
E/ActivityManager(  215): heap conf. property name string trimmed: hs.com.shadycorp.MoonStoneMarbl
E/AndroidRuntime( 5644): FATAL EXCEPTION: main
E/AndroidRuntime( 5644): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.shadycorp.MoonStoneMarble/theHardestGame.pac.GameLogicController}: java.lang.ClassNotFoundException: theHardestGame.pac.GameLogicController in loader dalvik.system.PathClassLoader[/data/app/com.shadycorp.MoonStoneMarble-1.apk]
E/AndroidRuntime( 5644): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1580)
E/AndroidRuntime( 5644): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1674)
E/AndroidRuntime( 5644): at android.app.ActivityThread.access$1500(ActivityThread.java:117)
E/AndroidRuntime( 5644): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:942)
E/AndroidRuntime( 5644): at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime( 5644): at android.os.Looper.loop(Looper.java:130)
E/AndroidRuntime( 5644): at android.app.ActivityThread.main(ActivityThread.java:3735)
E/AndroidRuntime( 5644): at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 5644): at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime( 5644): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:904)
E/AndroidRuntime( 5644): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:662)
E/AndroidRuntime( 5644): at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime( 5644): Caused by: java.lang.ClassNotFoundException: theHardestGame.pac.GameLogicController in loader dalvik.system.PathClassLoader[/data/app/com.shadycorp.MoonStoneMarble-1.apk]
E/AndroidRuntime( 5644): at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
E/AndroidRuntime( 5644): at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
E/AndroidRuntime( 5644): at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
E/AndroidRuntime( 5644): at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
E/AndroidRuntime( 5644): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1572)
E/AndroidRuntime( 5644): ... 11 more
E/AndroidRuntime( 5644): [Blue Error Handler] Make Debugging Report file for main
E/AndroidRuntime( 5644): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.shadycorp.MoonStoneMarble/theHardestGame.pac.GameLogicController}: java.lang.ClassNotFoundException: theHardestGame.pac.GameLogicController in loader dalvik.system.PathClassLoader[/data/app/com.shadycorp.MoonStoneMarble-1.apk]
E/AndroidRuntime( 5644): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1580)
E/AndroidRuntime( 5644): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1674)
E/AndroidRuntime( 5644): at android.app.ActivityThread.access$1500(ActivityThread.java:117)
E/AndroidRuntime( 5644): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:942)
E/AndroidRuntime( 5644): at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime( 5644): at android.os.Looper.loop(Looper.java:130)
E/AndroidRuntime( 5644): at android.app.ActivityThread.main(ActivityThread.java:3735)
E/AndroidRuntime( 5644): at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 5644): at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime( 5644): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:904)
E/AndroidRuntime( 5644): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:662)
E/AndroidRuntime( 5644): at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime( 5644): Caused by: java.lang.ClassNotFoundException: theHardestGame.pac.GameLogicController in loader dalvik.system.PathClassLoader[/data/app/com.shadycorp.MoonStoneMarble-1.apk]
E/AndroidRuntime( 5644): at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
E/AndroidRuntime( 5644): at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
E/AndroidRuntime( 5644): at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
E/AndroidRuntime( 5644): at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
E/AndroidRuntime( 5644): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1572) 
```

这是我的安卓清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="theHardestGame.pac"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="4" />

    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.WAKE_LOCK"/>
    <uses-permission android:name="android.permission.CAMERA"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>

    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".GameLogicController"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:51:15.297

Looks like you've not updated the package consistently. In your manifest it's "theHardestGame.pac", while the application package seems to be "com.shadycorp.MoonStoneMarble". I suggest you search for those strings and make sure you've updated everything. Also make sure you're doing a clean build.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:20:23.800

检查 AndroidManifest.xml 中的默认操作。它可能设置为 theHardestGame.pac.GameLogicController 并且应该是别的东西。

# java - 平板电脑布局定义

> ID：14070709
> 
> 赞同：0
> 
> 时间：2012-12-28T14:06:17.370
> 
> 标签：java, android, xml

我正在查看这篇文章：[支持多种屏幕尺寸](http://developer.android.com/guide/practices/screens_support.html)，在**支持的屏幕范围**部分它说：

> 一组四种通用尺寸：small、normal、large 和 xlarge
> 
> **注意**：从 Android 3.2（API 级别 13）开始，这些尺寸组已被弃用，取而代之的是一种基于可用屏幕宽度管理屏幕尺寸的新技术。如果您正在为 Android 3.2 及更高版本进行开发，请参阅为 Android 3.2 声明平板电脑布局以获取更多信息。

“为 Android 3.2 及更高版本开发”这句话是指**目标**SDK 版本还是**最低**SDK 版本？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:08:34.800

> 从 Android 3.2（API 级别 13）开始

所以这意味着Android版本> 3.2。

所以最小值是3.2。

所以它是最低 SDK 版本。

# ios - iOS Box Web API 库多个 Box 帐户

> ID：14070718
> 
> 赞同：1
> 
> 时间：2012-12-28T14:07:01.787
> 
> 标签：ios, ios5, ios6, box-api

我目前正在开发一个需要访问多个 Box 帐户的应用程序。我正在使用 Web API 库。到目前为止，我成功访问了一个帐户。当我对新用户进行身份验证时，我正在保存身份验证令牌。然后当我想访问任何帐户时，我会使用`[Box +initializeSessionWithAuthToken:callbacks:]`相应的身份验证令牌。但我只是再次被重定向回登录页面。就在初始化新会话之前，我使用`[Box +logoutWithCallbacks:]`注销旧用户。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T19:00:32.370

我知道这是一个老问题，但是

```
+logoutWithCallbacks:nil 
```

应该使会话无效并注销用户。您是否验证过此方法成功完成并且确实注销了用户。

然后你可以使用

```
+ (void)initiateWebViewLoginWithCallbacks:(BoxOperationCallbacksDefine)callbacks; 
```

或者

```
+ (void)initiateLoginUsingURLRedirectWithCallbacks:(BoxOperationCallbacksDefine)callbacks; 
```

这些将显示一个新的 Web 登录并允许您为新用户创建一个新的身份验证令牌

# python - 机械化：提交表单但不加载新页面以查看结果

> ID：14070721
> 
> 赞同：1
> 
> 时间：2012-12-28T14:07:06.907
> 
> 标签：python, screen-scraping, mechanize, mechanize-python

好吧，我开始有点沮丧了。我花了一天的大部分时间试图弄清楚为什么我的脚本不起作用 - 无论是在 github 上还是在此处。它应该相当简单。机械化加载页面，填写表格，提交表格，打开带有公司信息的新页面并发布内容。它只是不工作。当我检查代码时，我可以看到填写了正确的表单，但是在 mechanize 提交表单后，它并没有进入新页面，而是停留在填写表单的那个页面上。代码是这样的：

```
from mechanize import Browser

br = Browser()

url = "http://cvr.dk/Site/Forms/CMS/DisplayPage.aspx?pageid=0"

cvr = br.open(url).read()

#I select the form
br.select_form(name="aspnetForm")

#I fill in 19997049 as a company number
br.form['ctl00$QuickSearch1$CvrTextBox'] = "19997049"

response = br.submit()

content = response.read()

print content 
```

我觉得这非常简单，但是当提交表单时，我错过了应该发生的重定向。

编辑： 网站上似乎有很多 javascripts。可能是这个原因吗？什么时候有什么选择？

EDIT2：好的，看来我可以简单地在网址中添加公司编号并以这种方式获取我想要的页面，但我仍然对为什么这个脚本不起作用感到困惑。

非常感谢您的任何反馈

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T00:58:36.813

您需要告诉它使用哪个按钮：

```
response = br.submit(name='ctl00$QuickSearch1$CvrSearchButton') 
```

这可行，但引发了 robots.txt 的问题，这是一个道德困境。

# android - 如何将微调器项目选择连接到活动？

> ID：14070722
> 
> 赞同：0
> 
> 时间：2012-12-28T14:07:11.570
> 
> 标签：android, android-activity, android-spinner

我有一个应用程序，其中布局顶部有一个微调器，其下方有一些文本字段，底部有一个名为“RESULT”的按钮。In the spinner I have put name of different formulas which when selected must act upon the numbers in the text field and when the RESULT button is pressed a new layout with the result must be displayed. 到目前为止，我已经为微调器中的每个公式创建了活动。我不知道如何将微调器公式选择与公式活动联系起来。作为初学者，我在这里搜索了所有可能的解决方案，但找不到。谁能帮我一段代码。

* * *

**我应用了如下所示的解决方案**

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
super.onCreate(savedInstanceState);
setContentView(R.layout.selective);
final Class[] clazz={Srkt.class,Binkhorst.class,Srk2.class,Holladay.class};
spin=(Spinner)findViewById(R.id.formulae);
spin.setOnItemSelectedListener(new OnItemSelectedListener() {

    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int pos,
            long id) {
        // TODO Auto-generated method stub
        Intent i=new Intent(Selection.this,clazz[pos]);
        startActivity(i);

    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }
    }); 
```

* * *

**logcat 显示以下错误**

```
 12-28 15:17:41.336: E/Trace(768): error opening trace file: No such file or directory (2)
12-28 15:17:44.554: E/AndroidRuntime(768): FATAL EXCEPTION: main
12-28 15:17:44.554: E/AndroidRuntime(768): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Srkt}: java.lang.NullPointerException
12-28 15:17:44.554: E/AndroidRuntime(768):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
12-28 15:17:44.554: E/AndroidRuntime(768):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-28 15:17:44.554: E/AndroidRuntime(768):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-28 15:17:44.554: E/AndroidRuntime(768):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-28 15:17:44.554: E/AndroidRuntime(768):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-28 15:17:44.554: E/AndroidRuntime(768):  at android.os.Looper.loop(Looper.java:137)
12-28 15:17:44.554: E/AndroidRuntime(768):  at android.app.ActivityThread.main(ActivityThread.java:5039)
12-28 15:17:44.554: E/AndroidRuntime(768):  at java.lang.reflect.Method.invokeNative(Native Method)
12-28 15:17:44.554: E/AndroidRuntime(768):  at java.lang.reflect.Method.invoke(Method.java:511)
12-28 15:17:44.554: E/AndroidRuntime(768):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-28 15:17:44.554: E/AndroidRuntime(768):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-28 15:17:44.554: E/AndroidRuntime(768):  at dalvik.system.NativeStart.main(Native Method)
12-28 15:17:44.554: E/AndroidRuntime(768): Caused by: java.lang.NullPointerException
12-28 15:17:44.554: E/AndroidRuntime(768):  at com.example.iolcalci.Srkt.onCreate(Srkt.java:34)
12-28 15:17:44.554: E/AndroidRuntime(768):  at android.app.Activity.performCreate(Activity.java:5104)
12-28 15:17:44.554: E/AndroidRuntime(768):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-28 15:17:44.554: E/AndroidRuntime(768):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-28 15:17:44.554: E/AndroidRuntime(768):  ... 11 more 
```

* * *

**Srkt 代码在这里**

```
public class Srkt extends Activity{
EditText k1_e,k2_e,al_e,alconst_e;
float k1,k2,al,al_const;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
     float Rcor;
     float Lcor;
     float Crwdest;
     float Avg_k;
     float Corneal_H;
     float Acd_Const;
     float Offset;
     float Acd_Est;
     float Na=(float) 1.34;
     float C2=(float) 0.33;
     float C3;
     float C4;
     float C5;
     float C6;
     float C8;
     float C9;
     float Iolam;

    k1_e=(EditText)findViewById(R.id.k1_editText);
    k1=Float.parseFloat(k1_e.getText().toString());
    k2_e=(EditText)findViewById(R.id.k2_editText);
    k2=Float.parseFloat(k2_e.getText().toString());
    al_e=(EditText)findViewById(R.id.al_editText);//line 37
    al=Float.parseFloat(al_e.getText().toString());
    alconst_e=(EditText)findViewById(R.id.al_const_editText);
    al_const=Float.parseFloat(alconst_e.getText().toString()); 

    Avg_k=(k1+k2)/2;
    float Rcor1=(float)(337.5/Avg_k);Rcor=Round(Rcor1,2);

    if(al<=24.2){
        Lcor=al;
    }else{
        Lcor=(float) (-3.446+1.716*al-0.0237*(al*al));
    }Lcor=Round(Lcor,2);
    Crwdest=(float) (-5.41+0.58412*Lcor+0.098*Avg_k);Crwdest=Round(Crwdest,2);
    Corneal_H=(float) (Rcor-(Math.sqrt(Rcor*Rcor-Crwdest*Crwdest/4)));Corneal_H=Round(Corneal_H,2);
    Acd_Const=(float) (0.62467*al_const-68.747);
    Offset=(float) (Acd_Const-3.336);Offset=Round(Offset,2);
    Acd_Est=(Corneal_H+Offset); float Acd_Est1=Round(Acd_Est,2);
    C3=(float) (0.97971*al+0.65696);C3=Round(C3,2);     
    C4=C3-Acd_Est1;C4=Round(C4,2);
    C5=(float) ((Na*Rcor)-(C2*Acd_Est)); C5=Round(C5, 2);
    C6=(float) ((Na*Rcor1)-(C2*C3));
    C8=(float) ((12*C6)+(C3*Rcor1));C8=Round(C8,2);
    C9=(float) ((12*C5)+(Acd_Est*Rcor1));C9=Round(C9,2);
    Iolam=(float) ((1336*(C6-(0.001*C8*0)))/(C4*(C5-(0.001*0*C9))));Iolam=Round(Iolam,2);                       /*Desired Refraction not taken*/
    }

    public static float Round(float Rval, int Rpl) {
          float p = (float)Math.pow(10,Rpl);
          Rval = Rval * p;
          float tmp = Math.round(Rval);
          return (float)tmp/p;
          } 
```

* * *

**我添加了这个选线活动**

```
k1_e=(EditText)findViewById(R.id.k1_editText);
k1=Float.parseFloat(k1_e.getText().toString()); 
```

* * *

**更新的 logcat 显示**

```
 12-29 07:16:54.642: E/AndroidRuntime(766): FATAL EXCEPTION: main
12-29 07:16:54.642: E/AndroidRuntime(766): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Selection}: java.lang.NumberFormatException: Invalid float: ""
12-29 07:16:54.642: E/AndroidRuntime(766):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
12-29 07:16:54.642: E/AndroidRuntime(766):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-29 07:16:54.642: E/AndroidRuntime(766):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-29 07:16:54.642: E/AndroidRuntime(766):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-29 07:16:54.642: E/AndroidRuntime(766):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-29 07:16:54.642: E/AndroidRuntime(766):  at android.os.Looper.loop(Looper.java:137)
12-29 07:16:54.642: E/AndroidRuntime(766):  at android.app.ActivityThread.main(ActivityThread.java:5039)
12-29 07:16:54.642: E/AndroidRuntime(766):  at java.lang.reflect.Method.invokeNative(Native Method)
12-29 07:16:54.642: E/AndroidRuntime(766):  at java.lang.reflect.Method.invoke(Method.java:511)
12-29 07:16:54.642: E/AndroidRuntime(766):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-29 07:16:54.642: E/AndroidRuntime(766):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-29 07:16:54.642: E/AndroidRuntime(766):  at dalvik.system.NativeStart.main(Native Method)
12-29 07:16:54.642: E/AndroidRuntime(766): Caused by: java.lang.NumberFormatException: Invalid float: ""
12-29 07:16:54.642: E/AndroidRuntime(766):  at java.lang.StringToReal.invalidReal(StringToReal.java:63)
12-29 07:16:54.642: E/AndroidRuntime(766):  at java.lang.StringToReal.parseFloat(StringToReal.java:289)
12-29 07:16:54.642: E/AndroidRuntime(766):  at java.lang.Float.parseFloat(Float.java:300)
12-29 07:16:54.642: E/AndroidRuntime(766):  at com.example.iolcalci.Selection.onCreate(Selection.java:25)
12-29 07:16:54.642: E/AndroidRuntime(766):  at android.app.Activity.performCreate(Activity.java:5104)
12-29 07:16:54.642: E/AndroidRuntime(766):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-29 07:16:54.642: E/AndroidRuntime(766):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-29 07:16:54.642: E/AndroidRuntime(766):  ... 11 more 
```

**什么问题，我应该如何处理它？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:36:05.327

> 到目前为止，我已经为微调器中的每个公式创建了活动。我不知道如何将微调器公式选择与公式活动联系起来。

`Class`有一个包含每个名称的数组`Activities`（顺序将是公式出现在 中的顺序`Spinner`）：

```
Class[] clazz = {NameOfActivity1.class, NameOfActivity2.class /*etc*/}; 
```

然后，您将拥有一个`int`字段 ( *mSelected* )，该字段将由( *mSelected = position* )`OnItemSelectedListener`上的更新。当需要显示结果时，只需使用*mSelected*字段和上面的数组来启动正确的活动：`Spinner`

 **```
Intent i = new Intent(this, clazz[mSelected]); 
```

此外，根据您在结果活动中显示的内容，您可能希望拥有一个包含公式的数组的结果活动。对于此活动，您将从 中传递当前选定公式的`int`值（在 中），您将使用它来构建正确的结果输出。`Intent``Spinner`

在活动中正确实施`Selection`：

```
private int mSelected = -1;

public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.selective);
final Class[] clazz={Srkt.class,Binkhorst.class,Srk2.class,Holladay.class};
spin=(Spinner)findViewById(R.id.formulae);
spin.setOnItemSelectedListener(new OnItemSelectedListener() {

    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int pos,
            long id) {
        mSelected = pos;
    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
       mSelected = -1;
    }
    });
// find the results Button and set a OnClickListener where you'll do the calculation
Button resultsButton = (Button) findViewById(R.id.the_id_of_the_results_button);
resultsButton.setOnClickListener(new OnCLickListener() {

    @Override
    public void onClick(View v) {
         // In here you'll do the calculation
         // you know the selected formula from the value of mSelected
         // after you do the calculation you will start the proper results activity using the clazz array and mSelected
        // you would also pass the results you calculated in the Intent used to start the new activity
    }

}); 
```**

# python - 从需要使用 python 进行身份验证的网站下载文件

> ID：14070723
> 
> 赞同：0
> 
> 时间：2012-12-28T14:07:19.043
> 
> 标签：python, python-2.7, web-scraping

我正在尝试使用 python 2.7 从网站下载 CSV 文件。我已经找到了一些关于如何检索文件的帖子。

[http://www.blog.pythonlibrary.org/2012/06/07/python-101-how-to-download-a-file/](http://www.blog.pythonlibrary.org/2012/06/07/python-101-how-to-download-a-file/)

[如何使用 Python 通过 HTTP 下载文件？](https://stackoverflow.com/questions/22676/how-do-i-download-a-file-over-http-using-python)

但是，我尝试访问的站点需要身份验证：ID 和密码。我想知道是否有人可以分享一个如何下载具有身份验证障碍的文件的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:25:39.723

您可以使用[requests](http://docs.python-requests.org/en/latest/)模块及其文档。

# hibernate - 休眠 - 持久化地图

> ID：14070732
> 
> 赞同：1
> 
> 时间：2012-12-28T14:07:44.813
> 
> 标签：hibernate, jpa, hashmap

我是休眠的新手。我正在使用 Hibernate 4.0，特别是 JPA 注释。

我有一个订单课程。一个订单可以包含多个 Sku（“sku”是一个库存单位 - 参见[Wikipedia](http://en.wikipedia.org/wiki/Stock-keeping_unit)）和一个或多个每个 sku。Order 和 Sku 类如下。我想将订单及其关联的 skus 保留在同一个表中，但如果需要，我可以使用两个表。我不知道如何持久化 HashMap - 运行时异常抛出的状态`javax.persistence.PersistenceException: org.hibernate.exception.DataException: Data truncation: Data too long for column 'skusInOrder' at row 1`。

我已阅读 [this][2] Stackoverflow 问题：-在我的场景中使用 @Lob 注释的建议是否有意义？我是否需要使用@Embedded 或@Embeddable 和/或@ElementCollection？

```
package com.newco.drinks.data;

import java.io.Serializable;
import java.math.RoundingMode;
import java.util.ConcurrentModificationException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.joda.money.CurrencyUnit;
import org.joda.money.Money;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.MapKey;
import javax.persistence.OneToMany;
import javax.persistence.SecondaryTable;
import javax.persistence.Table;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;
import javax.persistence.Transient;

@Entity
@Table(name="Orders")
public class Order implements Serializable {

    private static final long serialVersionUID = 5915005362337363656L;
    private List<Sku> availableSkus;
    private String barId;
    private java.util.Date collectionNotificationTime;
    private CurrencyUnit currencyUnit;
    private String customerId;
    private String orderId;
    private Money orderTotal;
    private String paymentProcessorRef; 
    private Boolean paymentSuccessful;
    private HashMap<Sku, Integer> skusInOrder = new HashMap<Sku, Integer>(); // skuId and quantity thereof
    private java.util.Date timeReceived;

    /**
     * 
     * @param sku
     * @param quantity
     * @throws IllegalArgumentException
     *             if quantity is zero or negative, or if the Order does not
     *             contain the Sku
     * @throws ConcurrentModificationException
     */
    void add(Sku sku, int quantity) throws IllegalArgumentException, ConcurrentModificationException {

        if (quantity <= 0) {
            throw new IllegalArgumentException("Quantity must be greater than zero, but was " + quantity);
        }

        if (skusInOrder.isEmpty() || !skusInOrder.containsKey(sku)) {
            skusInOrder.put(sku, quantity);
        } else {
            if (skusInOrder.containsKey(sku)) {
                int i = skusInOrder.get(sku);
                skusInOrder.put(sku, i + quantity);
            } else {
                throw new IllegalArgumentException("Order " + getOrderId() + " does not contain SKU " + sku.getSkuId());
            }
        }
    }

    private Money calculateOrderTotal() {

        int decimalPlaces = currencyUnit.getDecimalPlaces();
        String zeroString = null;

        switch (decimalPlaces) {
        case 1:
            zeroString = "0.0";
            break;
        case 2:
            zeroString = "0.00";
            break;
        case 3:
            zeroString = "0.000";
            break;
        case 4:
            zeroString = "0.0000";
            break;
        }

        Money total = Money.of(currencyUnit, new Double(zeroString));

        for (Sku sku : skusInOrder.keySet()) {

            int quantity = skusInOrder.get(sku);
            Money totalExTax = sku.getPrice().multipliedBy(quantity, RoundingMode.HALF_UP);

            double taxRate = sku.getTaxRate();
            if (taxRate > 0) {
                Money tax = totalExTax.multipliedBy(taxRate / 100, RoundingMode.HALF_UP);
                total = total.plus(totalExTax.plus(tax));
            } else {
                total = total.plus(totalExTax);
            }
        }

        return total;
    }

    /**
     * 
     * @return a List of Sku objects available to be added to this order.
     *         Different bars will have different Skus available.
     */
    @Transient
    @OneToMany
    public List<Sku> getAvailableSkus() {
        return availableSkus;
    }

    @Column(name="barid", nullable=false)
    public String getBarId() {
        return barId;
    }

    @Temporal(TemporalType.TIMESTAMP)
    @Column(name = "collectionnotificationtime")
    public java.util.Date getCollectionNotificationTime() {
        return collectionNotificationTime;
    }

    @Column(name="currencyunit", nullable=false)
    public CurrencyUnit getCurrencyUnit() {
        return currencyUnit;
    }

    @Column(name="customerid", nullable=false)
    public String getCustomerId() {
        return customerId;
    }

    @Id
    @Column(name="orderid", nullable=false)
    public String getOrderId() {
        return orderId;
    }

    //@Column(name="ordertotal", nullable=false)
    @Transient
    public Money getOrderTotal() {
        return calculateOrderTotal();
    }

    @Column(name="paymentprocessorref", nullable=true)
    public String getPaymentProcessorRef() {
        return paymentProcessorRef;
    }

    @Column(name="paymentsuccess", nullable=true)
    public Boolean getPaymentSuccessful() {
        return paymentSuccessful;
    }

    @Column(name="skusinorder", nullable=false)
    public HashMap<Sku, Integer> getSkusInOrder() {
        return skusInOrder;
    }

    @Temporal(TemporalType.TIMESTAMP)
    @Column(name = "timereceived")
    public java.util.Date getTimeReceived() {
        return timeReceived;
    }

    /**
     * 
     * @param sku
     * @param quantity
     * @throws IllegalArgumentException
     *             if quantity is zero or negative, or if the Sku does not form
     *             part of the Order
     * @throws ConcurrentModificationException
     */
    void remove(Sku sku, int quantity) throws IllegalArgumentException, ConcurrentModificationException {

        if (quantity <= 0) {
            throw new IllegalArgumentException("Quantity to remove must be greater than zero for order " + getOrderId() + ", but was " + quantity);
        }

        if (skusInOrder.isEmpty() || !skusInOrder.containsKey(sku)) {
            throw new IllegalArgumentException("Cannot remove sku " + sku.getSkuId() + " which doesn't form part of order " + getOrderId());
        } else {
            int i = skusInOrder.get(sku);
            if (quantity <= i) { // fine, this is expected
                skusInOrder.put(sku, i - quantity);
            } else if (quantity == i) { //okay, remove that sku altogether as its quantity is now zero
                skusInOrder.remove(sku);
            }
        }
    }

    void setAvailableSkus(List<Sku> availableSkus) {
        this.availableSkus = availableSkus;
    }

    void setBarId(String barId) {
        this.barId = barId;
    }

    void setCollectionNotificationTime(
            java.util.Date collectionNotificationTime) {
        this.collectionNotificationTime = collectionNotificationTime;
    }

    void setCollectionReadySent(java.util.Date collectionReadySent) {
        this.collectionNotificationTime = collectionReadySent;
    }

    void setCurrencyUnit(CurrencyUnit currencyUnit) {
        this.currencyUnit = currencyUnit;
    }

    void setCustomerId(String customerId) {
        this.customerId = customerId;
    }

    void setOrderId(String orderId) {
        this.orderId = orderId;
    }

    void setOrderTotal(){
        orderTotal = calculateOrderTotal();
    }

    void setPaymentProcessorRef(String paymentProcessorRef) {
        this.paymentProcessorRef = paymentProcessorRef;
    }

    void setPaymentSuccessful(Boolean paymentSuccessful) {
        this.paymentSuccessful = paymentSuccessful;
    }
}

package com.newco.drinks.data;

import java.io.Serializable;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;

import org.joda.money.CurrencyUnit;
import org.joda.money.Money;

@Entity
@Table( name = "Skus" )
public class Sku implements Serializable{

    private static final long serialVersionUID = 8375466982619713795L;
    private String skuId;
    private String barId;
    private CurrencyUnit currencyUnit;
    private double price;
    private String description;
    private String brand;
    private String skuType;
    private double taxRate;

    protected Sku(){
        // no args constructor for Hibernate use
    }

    public Sku(String skuId, String barId, CurrencyUnit currencyUnit, double price, String description, String brand, String skuType, double tax) {
        setSkuId(skuId);
        setBarId(barId);
        setCurrencyUnit(currencyUnit);
        setPrice(price);
        setDescription(description);
        setBrand(brand);
        setSkuType(skuType);
        setTaxRate(tax);
    }

    @Column(name="barid", nullable=false)
    public String getBarId() {
        return barId;
    }

    @Column(name="brand", nullable=true)
    public String getBrand() {
        return brand;
    }

    @Column(name="currencyunit", nullable=false)
    public CurrencyUnit getCurrencyUnit() {
        return currencyUnit;
    }

    @Column(name="description", nullable=false)
    public String getDescription() {
        return description;
    }

    @Column(name="price", nullable=false)
    public Money getPrice() {
        return Money.of(currencyUnit, price);
    }

    @Id
    @Column(name="skuid", nullable=false)
    public String getSkuId() {
        return skuId;
    }

    @Column(name="skutype", nullable=false)
    public String getSkuType() {
        return skuType;
    }

    @Column(name="taxrate", nullable=false)
    public double getTaxRate() {
        return taxRate;
    }

    void setBarId(String barId) {
        this.barId = barId;
    }

    void setBrand(String brand) {
        this.brand = brand;
    }

    void setCurrencyUnit(CurrencyUnit currencyUnit) {
        this.currencyUnit = currencyUnit;
    }

    void setDescription(String description) {
        this.description = description;
    }

    void setPrice(double price) {
        this.price = price;
    }

    void setSkuId(String skuId) {
        this.skuId = skuId;
    }

    void setSkuType(String skuType) {
        this.skuType = skuType;
    }

    void setTaxRate(double tax) {
        this.taxRate = tax;
    }

} 
```

[2]:[如何使用 hibernate](https://stackoverflow.com/questions/4700150/how-to-persist-a-hashmap-with-hibernateSku) , Integer持久化 HashMap

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T14:41:01.740

首先，将您的字段定义为类型`Map`而不是`HashMap`（总是更喜欢接口而不是具体类来引用对象）。

那么最好的选择是使用`@ElementCollection`. 这样，休眠将创建（如果启用了 hbm2ddl）一个单独的表并在那里填充结果。如果你使用 a`@Lob`它仍然可以工作，但是当在 java 之外读取时，该字段将是一个“黑盒”（即命令行 mysql 工具）

# xcode - XCode：尝试配置时无休止的登录窗口

> ID：14070736
> 
> 赞同：0
> 
> 时间：2012-12-28T14:08:05.490
> 
> 标签：xcode, provisioning

我正在尝试提供第二台设备以在 XCode 中进行测试，但遇到了一些麻烦。我正在关注[这个](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/YourFirstAppStoreSubmission/ProvisionYourDevicesforDevelopment/ProvisionYourDevicesforDevelopment.html)，并一直到单击库的配置文件部分中的刷新按钮。

然后，会弹出“使用您的 Apple ID 登录”窗口，尽管输入了我的 Apple ID 并单击登录，但它仍然会再次弹出。没有任何警告或任何东西，它只是不断弹出。我通过登录 Apple 的开发者网站验证了 Apple ID，用户名/密码似乎一切正常。有任何想法吗？

谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T19:04:56.793

乔的小费成功了。我从网站上添加了设备。

# emacs - 如何让 Emacs 中的 dired 在 Windows 下使用 cp1251？

> ID：14070742
> 
> 赞同：2
> 
> 时间：2012-12-28T14:08:41.943
> 
> 标签：emacs, dired, cp1251

我希望我的默认编码保持 utf-8。
但是在 Windows 下 - 我想使用 cp1251 查看我的一些文件名。（因为 Windows 不支持 utf）

一切显示如下：`\361\345\354`

那么我该怎么做：

```
(setq coding-system-for-read 'cp1251) 
```

仅适用于dired模式而不适用于其他模式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T14:22:53.693

你可以试试这个：

```
(add-hook 'dired-mode-hook
          (lambda ()
            (make-local-variable 'coding-system-for-read)
            (setq coding-system-for-read 'cp1251))) 
```

# jquery - jquery移动滑动页面的设置类似于Facebook

> ID：14070749
> 
> 赞同：2
> 
> 时间：2012-12-28T14:09:43.810
> 
> 标签：jquery, html, facebook, jquery-mobile, touch

我开始学习 jQuery Mobile。我想知道当你用手指向左滑动手机时，你可以在屏幕上显示一半的设置页面，类似于 Facebook。

链接到[此处的屏幕截图](http://themeforest.net/theme_previews/3018322-tiger-jquery-mobile-web-template-web-app?index=4)

我怎么能那样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T14:12:28.703

这可能很有用：

JQuery-Mobile-Slide-Menu：[https](https://github.com/tegansnyder/JQuery-Mobile-Slide-Menu) ://github.com/tegansnyder/JQuery-Mobile-Slide-Menu 类似于 Facebook 和 Path 的移动菜单设计方法的滑动菜单。这是一个 JQuery Mobile 示例。演示网址如下：

[http://www.tegdesign.com/tegansnyder-JQuery-Mobile-Slide-Menu](http://www.tegdesign.com/tegansnyder-JQuery-Mobile-Slide-Menu)

# ios - 未使用 NSXmlparser 解析 CData

> ID：14070750
> 
> 赞同：1
> 
> 时间：2012-12-28T14:09:52.920
> 
> 标签：ios, ipad, xml-parsing, nsxmlparser, cdata

我从服务接收到 xml 形式的响应，我使用 nsxmlparser 对其进行解析。在一个实例中，我收到了一个 xml，其中两个标签的内容相同。（重复项目如下 xml）

收到的 Xml：

```
<UserGeneratedContentItem>
    <link
      rel="details"
      uri="http://api.test.no/test.Ugc/vivo/usergeneratedcontentitem/16046" />
    <Data><![CDATA[<Type>Note</Type><Description>**6000 characters**</Description><Page>6</Page><ChapterNumber>1</ChapterNumber><ChapterTitle>Etikk og filosofi</ChapterTitle><Uri>http://api.test.no/test.Ugc/vivo/usergeneratedcontentitem/6</Uri><Data><StickyNotes><StickyNote name="icon_2" X="215.8" Y="352.7" note="**6000 characters**" dateTime="null" popupX="940" popupY="119" popupWidth="300" popupHeight="180" formatedDate ="2012-12-28-18-20-47" iconImage="1003"/></StickyNotes></Data>]]></Data>
  </UserGeneratedContentItem>
  <UserGeneratedContentItem>
    <link
      rel="details"
      uri="http://api.test.no/test.Ugc/vivo/usergeneratedcontentitem/16046" />
    <Data><![CDATA[<Type>Note</Type><Description>**6000 characters**</Description><Page>6</Page><ChapterNumber>1</ChapterNumber><ChapterTitle>Etikk og filosofi</ChapterTitle><Uri>http://api.test.no/test.Ugc/vivo/usergeneratedcontentitem/6</Uri><Data><StickyNotes><StickyNote name="icon_2" X="215.8" Y="352.7" note="**6000 characters**" dateTime="null" popupX="940" popupY="119" popupWidth="300" popupHeight="180" formatedDate ="2012-12-28-18-20-47" iconImage="1003"/></StickyNotes></Data>]]></Data>
  </UserGeneratedContentItem> 
```

6000 个字符，包括将被编码的字母、算术和一般标点符号。

概率：

在 -(void)parser:(NSXMLParser *)parser foundCDATA:(NSData *)CDATABlock 中，**CDATABlock**变量中的方法内容在两种情况下都不相同（两个标签）。在一种情况下，它给了我所有 6000 个字符，在另一种情况下，它给我的只有几个可能是大约 300 个字符。我确认的两种情况下的文本（6000 个字符）都是相同的。

可能是什么原因？有人可以帮助我，可能是像我这样早先遇到过此类问题的人。

提前 Tnx。如果有什么不清楚或不明白的地方，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:50:12.910

这就是 cdata 的用途——它不应该被解析

**CDATA -（未解析的）字符数据**

来源：http : [//www.w3schools.com/xml/xml_cdata.asp](http://www.w3schools.com/xml/xml_cdata.asp)

PCDATA 应该被解析

* * *

你必须保存 NSData 块（可能被调用 N 次，所以你必须连接那些东西）并且 - 在你的情况下 - 然后将结果解析为单独的 XML

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T07:49:39.883

只需调用以下函数以及其他 NSXMLParser 函数。然后它将开始处理 CDATA 块。

```
-(void)parser:(NSXMLParser *)parser foundCDATA:(NSData *)CDATABlock
{    
    NSString *someString = [[NSString alloc] initWithData:CDATABlock encoding:NSUTF8StringEncoding];

} 
```

您可以 NSLog someString，它会显示 CDATA 块的内容。

# razor - 请求 [“inputId”] 不适用于 cshtml

> ID：14070752
> 
> 赞同：1
> 
> 时间：2012-12-28T14:09:55.110
> 
> 标签：razor

我有一个网站，里面有一个表格。我应该从表单中获取值以将它们放入数据库中。我目前使用 razorCMS 作为我网站的简单框架，使用 WEBMATRIX 作为编辑器（我可以使用 VS2010，但我想在 webmatrix 中这样做）。这是我的表格：

```
<form method="post" action="" class="custom">
            <fieldset title="TITLE">
                <legend>TITLE!</legend>

                <div class="five columns">
                    <input type="text" placeholder="Pseudonimi" id="txtPseudo" value=""></input></div>
                <div class="columns">
                    <select style="display: none;" id="jmSex">
                        <option selected>Don't know/option>
                        <option>M</option>
                        <option>F</option>
                    </select>                        
                </div>
                <div class="columns">
                    <select style="display: none;" id="jmCat">
                        <option selected>1</option>
                        <option>2</option>
                        <option>3</option>                            
                    </select>                        
                </div>
                <textarea id="jmNewText" rows="6" > </textarea>
                <input class="radius button" id="btnAdd" type="Submit" title="Send" name="Dergo"
                    value="Send" style="float: right;" />
            </fieldset>
            </form> 
```

提交表单后，我想使用 REQUEST 获取值，但实际上我没有得到任何值。我总是得到空变量。我还尝试使用带有 document.getelementbyid() 的 JavaScript 获取变量，我显示为 null。这是我提交的代码：

```
if (IsPost)
    {
     var pseudo = Request["txtPseudo"]; // THIS VALUE SHOWS NULL
     var content = Request["jmTextNew"];
     var kategori = Request["jmCat"];
     var sex = Request["jmSex"];   

     var db = Database.Open("razorC");
     var nextId = db.Execute("select max(id)+1 from rc_jm");
     var sqlNew = "Insert INTO rc_Jm (pseudo, id, content, creation_date, kategori, sex) "
                    + "values (@0, @4 , @1, GETDATE(), @2, @3)";
     db.Execute(sqlNew, pseudo, content, kategori, sex, nextId);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:14:07.653

发送到服务器的输入值由它们的`name`属性而不是由`id`属性标识。

所以你需要给`name`你的输入，以便能够从`Request`

所以

```
<input type="text" id="txtPseudo" value=""> 
```

应该

```
<input type="text" id="txtPseudo" name="txtPseudo" value=""> 
```

等等

# jquery - 使用浏览器导航按钮的 AJAX 后期缓存

> ID：14070755
> 
> 赞同：0
> 
> 时间：2012-12-28T14:09:58.137
> 
> 标签：jquery, ajax, http-post, browser-cache

浏览器实现之间的差异反击！...

我有一个使用 jQuery AJAX 帖子获取其数据的报告页面。单击离开此页面并在浏览器中单击返回按钮会产生以下结果：

IE/Chrome：报告主机页面从缓存加载（没有服务器请求）。AJAX 帖子被重新发送到服务器。好吧，公平地说，大量的在线资源告诉我这是通常的行为——AJAX 帖子永远不会被缓存。所以为什么...

Firefox：报告主机页面和 AJAX 帖子都从缓存加载。

1.  哪个实现是正确的？
2.  我可以强制 IE 和 Chrome 表现得像 FF，因为事实上，这是我正在寻找的行为。对我来说，使用导航按钮不应该将请求重新发送到服务器。

哦，为了在工作中投入潜在的扳手，我正在使用 HTTPS 浏览。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:34:14.407

尝试设置`$.ajaxSetup({ cache: true });`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:26:54.453

只需`cache:false`在您的 ajax 调用中设置

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# c++ - 我应该如何将此 std::array<> 传递给函数？

> ID：14070756
> 
> 赞同：2
> 
> 时间：2012-12-28T14:09:58.980
> 
> 标签：c++, arrays, function, stl

```
std::array<LINE,10> currentPaths=PossibleStrtPaths();
LINE s=shortestLine(currentPaths);                       //ERROR 
```

* * *

```
LINE CShortestPathFinderView::shortestLine(std::array<LINE,10> *currentPaths)
{
std::array<LINE,10>::iterator iter;

LINE s=*(currentPaths+1);                      //ERROR

for(iter=currentPaths->begin()+1;iter<=currentPaths->end();iter++)
{
     if(s.cost>iter->cost)
     s=*iter;
}

std::remove(currentPaths->begin(),currentPaths->end(),s);

    //now s contains the shortest partial path  
return s; 

} 
```

在这两个陈述中，我都遇到了同样的错误： `no suitable conversion from std::array<LINE,10U>*currentPaths to LINE`。为什么会这样？我应该以另一种方式传递数组吗？我也尝试过将*currentPaths* 作为引用传递，但它告诉我无法初始化该类型的引用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T14:17:10.100

您说您尝试了参考，但失败了。我不知道为什么，因为那是正确的做法。

```
LINE CShortestPathFinderView::shortestLine(std::array<LINE,10> &currentPaths); 
```

从它的声音来看，您还使用了临时变量的引用。那是错误的。

```
std::array<LINE,10>& currentPaths = PossibleStrtPaths(); // WRONG
std::array<LINE,10>  currentPaths = PossibleStrtPaths(); // RIGHT
LINE s = shortestLine(currentPaths); 
```

最后，第一个元素是数字零。`[]`当您进行数组访问时，下标运算符是首选。所以：

```
LINE s = currentPaths[0]; 
```

但是您也可以轻松地从迭代器中获取第一项。

最终代码：

```
/* precondition: currentPaths is not empty */
LINE CShortestPathFinderView::shortestLine(std::array<LINE,10>& currentPaths)
{
    std::array<LINE,10>::iterator iter = currentPaths.begin();
    LINE s = *(iter++);

    for(; iter != currentPaths->end(); ++iter) {
       if(s.cost>iter->cost)
          s=*iter;
    }

    std::remove(currentPaths.begin(), currentPaths.end(), s);

    //now s contains the shortest partial path  
    return s;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:15:20.010

您正在取消引用`(currentPaths+1)`类型`std::array*`（更准确地说：您正在递增指针，然后访问其指向的数据），而您可能想要检索 的第一个元素`currentPaths`，即：（`currentPaths[0]`数组中的第一个索引是 0）。

# javascript - 将锚点添加到标题？

> ID：14070759
> 
> 赞同：1
> 
> 时间：2012-12-28T14:10:11.570
> 
> 标签：javascript, jquery, dom

我有一个非常大的 html 文档，由许多`<h4>`标题和一个简短`<p>`的“正文”组成。

我需要为每个标题添加一个锚点（它是正确的术语，顺便说一句吗？）。

我正在遍历标题，并将它们添加到 menu-ul：

```
headz = document.getElementsByTagName("h4");
arrayOfHeaders=[];

x = 0;
y = headz.length;

$("#menu").html("<ul>")
while (x<y){   
    arrayOfHeaders[x] = "<li><a href='#" + x +"'>" + headz[x].innerText + "</a></li>";
    $("#menu").append(arrayOfHeaders[x])
    x++;
}
$("#menu").append("</ul>") 
```

我需要一种将锚点附加到标题的方法。

**编辑：**澄清 - 我需要的是为每个元素添加一个名称标签。第一个标题应该从编辑`'<h4>' header'</h4>'`到`'<h4 name="0">'...`

当然，无需编辑 html。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T14:13:15.107

如果没有，则将 id 设置为 。

```
headz = document.getElementsByTagName("h4");
arrayOfHeaders=[];

x = 0;
y = headz.length;

var str = "<ul>";
while (x<y){
    var elem = headz[x];
    var id = elem.id || "heading_" + x;
    elem.id = id;
    str += "<li><a href='#" + id +"'>" + elem.innerText + "</a></li>";
    x++;
}
$("#menu").append( str + "</ul>"); 
```

并且仅供参考 innerText 不是跨浏览器友好的。

jQuery解决方案

```
var str = "<ul>";
$("h4").each(
    function(i){
        var id = this.id || "header_" + i;
        this.id=id;
        str += '<li><a href="#' + id + '">' + this.innerHTML + '</a></li>';
    } 
);
str += "</ul>";
$("#menu").append(str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T14:19:03.757

由于您已经使用过 jquery，因此认为 id 将其全部写入其中：

```
var html = '<ul>';

$('h4').each(function (index, header) {
    html += '<li><a href="#' + header.id +'">' + header.html() + '</a></li>'; 
});

html += '</ul>';

$('#menu').append(html); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T14:35:21.313

这个类似于 rissicay 的答案，但我认为它更简洁：

```
var html = []; // create an empty array to store iterated html in
// loop over every heading... 
$('h4').each(function(index) {
  // and add it to array previously created
  html.push("<li><a href='#" + index +"'>" + $(this).html() + "</a></li>");
  // add name attribute to heading
  $(this).attr('name', index);
});
// finally, append all to menu together with unordered list
$('#menu').append('<ul>' + html.join() + '</ul>'); 
```

基本上，尽量减少 dom 操作（.append()、.prepend()、.html()）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T14:37:35.767

我认为您所指的概念有时被称为“内部链接” - 请参阅第二部分“HTML 链接 - id 属性”下的[此处。](http://www.w3schools.com/html/html_links.asp)

现在看看您的示例代码，您显然在使用 jQuery，那么为什么不充分利用它呢？

```
$("h4").each(function() {
   $("#links").append("<a href='#" + this.id + "'>link to " + this.id + "</a><br /><br />");
}); 
```

请参阅以下小提琴 - [http://jsfiddle.net/r0k3t/PhrB6/](http://jsfiddle.net/r0k3t/PhrB6/)

希望有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T14:13:36.547

这可能会解决您的问题

```
headz = document.getElementsByTagName("h4");
arrayOfHeaders=[];

x = 0;
y = headz.length;

var html = "<ul>";
while (x<y){   
   html  += "<li><a href='#" + headz[x].id +"'>" + headz[x].innerText + "</a></li>";       
    x++;
}
$("#meny").append( html + "</ul>") 
```

# php - Imagick 渲染黑色图像

> ID：14070764
> 
> 赞同：0
> 
> 时间：2012-12-28T14:10:52.500
> 
> 标签：php, svg, imagemagick, imagick

我正在尝试将 SVG 转换为 PNG，但我遇到了麻烦。

使用此链接，您可以上传 SVG，文件将显示结果： [http ://clound.com.br/labs/svg/export/imagick/index.php](http://clound.com.br/labs/svg/export/imagick/index.php)

我要上传的 SVG 是这样的： [http ://clound.com.br/labs/svg/export/images/cover.svg](http://clound.com.br/labs/svg/export/images/cover.svg)

我在上传页面上的代码是这样的：

```
<?php
if ( $_FILES ){
$target_path = 'output/'. basename( $_FILES['uploadedfile']['name']);
$mime = $_FILES['uploadedfile']['type'];

if ( $_FILES['uploadedfile']['error'] ){
    die( 'Error on upload.');
}

if ( move_uploaded_file( $_FILES['uploadedfile']['tmp_name'], $target_path ) ){
    echo '<embed style="border:solid 1px gray;" src="'.$target_path.'" type="image/svg+xml" pluginspage="http://www.adobe.com/svg/viewer/install/" /><br / >';

    $im = new Imagick();
    $svg = file_get_contents($target_path);

    /*loop to color each state as needed, something like*/ 
    $dom = new DOMDocument(); 
    $dom->loadXML( $svg ); 

    removeFillRule($dom, 'g');
    removeFillRule($dom, 'mask');
    removeFillRule($dom, 'path');
    removeFillRule($dom, 'image');

    $svg = $dom->saveXML();
    echo $svg;

    $im->readImageBlob($svg);

    /*png settings*/
    $im->setImageFormat("png32");
    $im->writeImage('output/image.png');/*(or .jpg)*/
    $im->clear();
    $im->destroy();

    echo '<img src="output/image.png"/><br/>';
}
else
{
    echo "There was an error uploading the file, verify permission and try again!";
}
}

function remove_children(&$node) {
while ($node->firstChild) {
while ($node->firstChild->firstChild) {
  remove_children($node->firstChild);
}
$node->removeChild($node->firstChild);
}
}

function removeFillRule($dom, $element){
$path = $dom->getElementsByTagName($element);
foreach ($path as  $key=> $value) {
    $path->item($key)->removeAttribute('fill-rule');
}
} 
```

我在服务器上的版本是这样的：

> ImageMagick 6.7.6-8 2012-05-02 Q16`http://www.imagemagick.org`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T10:56:10.457

删除填充规则？那会破坏一些svgs，只是说。我很好奇，这是imagemagick中某些错误的解决方法吗？

无论如何，猜测是您的问题是 imagemagick 可能不支持填充/描边中的 rgba-syntax - 默认情况下会使填充变为黑色。

# wpf - 签名时出错

> ID：14070767
> 
> 赞同：74
> 
> 时间：2012-12-28T14:10:57.763
> 
> 标签：wpf, visual-studio-2012, clickonce, assembly-signing

我维护一个从另一个开发人员那里继承的大型 WPF 应用程序。我使用 ClickOnce 发布它。突然，今天我收到一条错误消息：错误 2 由于项目构建失败，无法发布。1 1
错误 3 签名时出错：无法签名 bin\Debug\app.publish\setup.exe。SignTool 错误：未找到满足所有给定条件的证书。

我确实有一个名为 SomeName.snk 的文件，该文件在项目设置“签名”选项卡中引用。我不知道今天发生了什么导致了这个问题。我使用VS 2012。

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2013-10-21T09:27:08.897

转到主项目**属性**>**签名**> 如果到期日期已过 > 单击**Create Test Certificate**，密码不是必需的，您就完成了。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-12-28T15:29:44.127

我会检查证书是否过期。大多数（全部？）证书都有到期日期。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-04-19T14:01:16.737

我在 VS2017 .net 安装之上安装 Visual C++ 时遇到了这个问题。我通过取消选中属性-> 安全-> 启用 ClickOnce 安全设置来解决它。

然后它创建了一个 app.manifest 文件。之后，错误消失了。有趣的是，我再次检查了它，看看会发生什么，但问题并没有出现。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-28T16:28:56.923

你检查证书了吗？

[查看或管理您的证书](https://docs.microsoft.com/en-us/dotnet/framework/wcf/feature-details/how-to-view-certificates-with-the-mmc-snap-in)

您可以使用 MMC 管理单元或 Internet Explorer。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-03-14T07:56:06.963

转到主项目属性>签名>从存储中选择...
单击证书属性
并安装证书

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-01-08T04:17:12.107

转到主项目（启动项目）并右键单击>属性然后转到签名然后取消选中“签署 ClickOnce 清单”这对我有用。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-01-24T05:34:58.347

如果您的该特定项目的证书已过期或有一些问题，这通常会发生。

右键单击项目 -> 属性 -> 签名选项卡 -> 更多详细信息按钮 -> 显示您的证书详细信息。检查您的证书是否已过期

> ***修复方法***

**1.取消选中“签署ClickOnce清单”并尝试**

**2\. 通过创建测试证书来扩展证书（如果您的证书已过期）**

*   点击“**创建测试证书...** ”按钮
*   输入您的凭据（非强制性）
*   节省

**3.重新验证您现有的证书（如果您的证书未过期）**

*   点击“从文件中选择”按钮并使用您现有的密钥文件（例如 .pfx）

或者

*   点击“从商店选择”按钮并从可用选项中进行选择

> **提示：**如果您仍然面临构建项目的问题。只需重新启动您的 Visual Studio。

希望有帮助。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-01-29T16:25:00.943

我今天刚遇到这个问题。在我的特殊情况下，它是由这个[Microsoft Windows Update](http://technet.microsoft.com/en-us/security/advisory/2661254)引起的。

我卸载了该更新并发布开始像往常一样工作。这只是一个临时解决方法，意味着您可能应该重新生成您的密钥/证书。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-07-15T18:20:11.607

我遇到了同样的问题，我可以通过删除或更改时间戳服务器 URL 来解决它。删除后，该项目能够成功构建。

[![在此处输入图像描述](../Images/2b7b2d8e26b4e056fbce06af5b1d7be5.png)](https://i.stack.imgur.com/cVShm.png)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-11-01T18:48:08.700

在我的情况下，证书没有过期，其他解决方案都没有工作（重新启动 VS，使用临时测试证书，重新启动计算机等）

通过**删除我的输出目录并重建**.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-07-15T18:02:51.513

简单清洁为我排序。构建 - 清洁解决方案

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-12-01T10:19:27.133

在我的情况下，我的解决方案中有很多项目，所以我浏览了非启动项目并：

转到主项目**属性**>**签名**> 取消选中*使用 Visual Studio 2019***签署 ClickOnce**选项

# jquery - 更改 fancybox2 背景颜色

> ID：14070769
> 
> 赞同：0
> 
> 时间：2012-12-28T14:10:58.387
> 
> 标签：jquery, fancybox, fancybox-2

我正在尝试将fancybox2的背景颜色从黑色更改为蓝色，但有时我不能更改它，但弹出窗口也会变得透明，而其他一些则无法正常工作。

这是我迄今为止尝试过的：

选项1：（不改变颜色）

```
 beforeShow: function() {
                $(".fancybox-overlay").css({
                    "backgroundColor": '#FFFFFF',
                    "backgroundImage": 'none' // optional if you prefer a solid color
                });
            }, 
```

选项 2：

```
helpers : {
        overlay : {
            opacity : 0.4,
            css : {
                'background-color' : '#1E72B2'
            }
        }
    } 
```

我现在看到它使用背景图像，唯一的方法应该是创建一个新的背景图像？

有什么想法我可能做错了吗？谢谢！吉列尔莫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T20:26:38.907

肯尼迪，我尝试了你的解决方案，但没有奏效。我最终做的是更改 fancybox2 用于覆盖的 fancybox_overlay.png。当然，我保持它的透明度。不管怎么说，多谢拉！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T15:56:24.777

**选项1**：（工作正常）

```
$(".fancybox").fancybox({
    beforeShow: function() {
        $(".fancybox-overlay").css({
            "backgroundColor": "#FFFFFF",
            "backgroundImage": 'none' // optional if you prefer a solid color
        });
    }
});​ 
```

请参阅示例中的**[演示](http://jsfiddle.net/awQTW/)**

**编辑**：**[演示](http://jsfiddle.net/awQTW/1/)**更新以匹配蓝色

**选项2**：（也可以正常工作）

```
$(".fancybox").fancybox({
    helpers: {
        overlay: {
            opacity: 0.4, // this make the color transparent. set to 1 for solid color
            css: {
                'background': '#1E72B2'
            }
        }
    }
});​ 
```

见**[演示](http://jsfiddle.net/PwgNk/)**

...所以不知道你做错了什么，但这里有一些你可以检查的东西：

*   检查语法（从演示复制/粘贴以进行比较）
*   确保您`DOCTYPE`的文档中有适当的
*   确保您正在加载所有文件（检查路径），特别是fancybox css文件（精灵图像应与css文件位于同一目录中）
*   首先加载单个 jQuery 实例，然后加载其余的 js 文件
*   确保您的自定义脚本在`.ready()`方法中，例如：

    ```
    $(document).ready(function(){
      $(".fancybox").fancybox();
    }); 
    ```

# c++ - std::vector::data() 是否通过移动保留？

> ID：14070770
> 
> 赞同：5
> 
> 时间：2012-12-28T14:11:00.273
> 
> 标签：c++, c++11, stdvector, language-lawyer, move-semantics

> **可能重复：**
> [移动向量是否会使迭代器无效？](https://stackoverflow.com/questions/11021764/does-moving-a-vector-invalidate-iterators)

考虑以下代码：

```
std::vector<T> prepare(T*& data) {
    std::vector<T> buffer;
    // Fill in buffer.
    data = buffer.data();
    return buffer;
}

...

T* data;
auto vec = prepare(data);
// line 12 
```

有可能`vec.data() != data`在第12行吗？相似地，

```
std::vector<T> buffer;
// ... Fill in buffer ...
T* data = buffer.data();
auto vec = std::move(buffer);
// line 5 
```

有可能`vec.data() != data`在第5行吗？

实际上两者在 libstdc++ 和 libc++ 的实现中都是不可能的，因为移动构造函数被实现为简单的指针赋值，但似乎标准没有指定任何内容（类似于[移动 std 时需要保留的容量： ：向量？](https://stackoverflow.com/questions/13129219/is-the-capacity-required-to-be-preserved-when-moving-a-stdvector)）。“恒定的复杂性”可以保证`vec.data() == data`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:09:24.780

恒定的复杂性意味着容器不允许复制/移动单个元素，因此它必须将现有存储的所有权转移给新对象，因此返回的指针`data()`必须相同。

对于移动分配（而不是移动构造），仅当`propagate_on_container_move_assignment`向量的分配器类型为真或分配器比较相等时才为真。

# java - 将 checkstyle 设置为 java 项目构建过程的一部分

> ID：14070786
> 
> 赞同：0
> 
> 时间：2012-12-28T14:12:02.993
> 
> 标签：java, netbeans, ant, jenkins, checkstyle

我正在努力将 checkstyle 添加到 java 项目的构建过程中。checkstyle 的结果稍后会显示在 jenkins 上。我正在使用 java7 和 netbeans 7.2.1

对于大部分工作，我都遵循此页面上的说明：http: [//checkstyle.sourceforge.net/anttask.html](http://checkstyle.sourceforge.net/anttask.html)

但是，我是 java (& jenkins) 的初学者，有些说明对我来说没有意义：

1-文档说：“要在构建文件中使用任务，您将需要以下 taskdef 声明：”。问题：这是要添加到 build.xml 文件中吗？还是在哪里？

2-然后文档继续描述一组参数并提供一些示例。这些是否也要添加到 build.xml 中？或者？

3- Checkstyle 使用配置文件。我将使用标准的 sun_checks.xml。这个应该放在哪里？

如果有人可以为我指出整个过程的分步教程，我将不胜感激。提前谢谢所有答案

我在 build.xml 中使用以下内容：

```
<taskdef resource="checkstyletask.properties"
     classpath="libs/checkstyle-5.6-all.jar"/>

<target name="checkstyle"
        description="Generates a report of code convention violations.">

    <checkstyle config="sun_checks.xml"
                  failureProperty="checkstyle.failure"
                  failOnViolation="false">
        <fileset dir="src" includes="**/*.java"/>
        <formatter type="xml" toFile="checkstyle-results.xml"/>
    </checkstyle>

    <style in="checkstyle-results.xml" out="checkstyle_report.html" style="checkstyle.xsl"/>

</target> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:28:10.287

1.  是的，你必须将它添加到你的 build.xml

2.  这些属性和元素是`<checkstyle>`ant 任务的属性和元素，由于您在第 1 点中添加了 taskdef，您可以在构建文件中使用它们。是的，这个`<checkstyle>`任务必须在您的 build.xml 中使用。

3.  你把它放在你想要的任何地方。`<checkstyle>`你只需要使用它的`config`属性给它的任务路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-21T18:39:54.850

我不确定您使用的是什么构建管理。如果您使用的是[Gradle](https://gradle.org)，则可以使用[`gradle-estilo-plugin`](https://github.com/anshulverma/gradle-estilo-plugin). 它直接从 gradle 配置块设置您需要的整个 checkstyle 配置。

以下是您需要开始的内容：

```
buildscript {
  repositories {
    mavenCentral()
  }

  dependencies {
    classpath 'net.anshulverma.gradle:gradle-estilo-plugin:0.4.8'
  }
}

apply plugin: 'net.anshulverma.gradle.estilo'

estilo {
  source 'sun'
} 
```

# css - 如何模拟带有 div 和 css 的表格？

> ID：14070787
> 
> 赞同：8
> 
> 时间：2012-12-28T14:12:05.000
> 
> 标签：css, html-table

像这样的表：

```
<table>

  <tr>
   <td> ... </td>
   <td> ... </td>
   <td> ... </td>
  </tr>

  <tr>
   <td> ... </td>
   <td> ... </td>
   <td> ... </td>
  </tr>

  ...
</table> 
```

如何使用 div 和 css display:table 规则创建一个？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-28T14:18:19.360

试试这个 ;）

**CSS**

```
.table {
    display: table;
    width: 500px;
}
.tr { 
    display: table-row; 
}
.td { 
    display: table-cell;
} 
```

**HTML**

```
<div class="table">
    <div class="tr">
        <div class="td">asdf</div>
        <div class="td">asdf</div>
        <div class="td">asdf</div>
    </div>
    <div class="tr">
        <div class="td">asdf</div>
        <div class="td">asdf</div>
        <div class="td">asdf</div>
    </div>
</div> 
```

# .htaccess - Htaccess 重写以获取斜线后的值

> ID：14070789
> 
> 赞同：0
> 
> 时间：2012-12-28T14:12:07.033
> 
> 标签：.htaccess, web, config

我见过很多网站使用 /main/help/this_help/2 我怎么能写 htaccess 来获取 / 之后的值并且不寻找新目录？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:26:54.460

这是一个例子：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI}  ([^/]+)/([^/]+)/([^/]+)/([^/]+)$
RewriteRule .*  http://mydomain.com/getvals.php?key1=%1&key2=%2&key3=%3&key4=%4   [L] 
```

它的作用是映射这个 URI：

`http://mydomain.com/val1/val2/val3/val4` 其中 val1、val2、val3 和 val4 不存在。

到这个资源：

`http://mydomain.com/getvals.php?key1=val1&key2=val2&key3=val3&key4=val4`在浏览器的地址栏中显示上一个 URI。

如果您希望显示映射的 URI，请添加标志`R`，如下所示`[R=301,L]`

在脚本`getvals.php`中获取值。PHP 中的示例：

```
$Val1 = $_GET['key1'];
... 
```

希望这是您正在寻找的信息。

# java - 处理从 java 中的 restful web 服务返回的 XML 对象的集合

> ID：14070792
> 
> 赞同：0
> 
> 时间：2012-12-28T14:12:29.447
> 
> 标签：java, rest, webservice-client

我有一个安静的 Web 服务，它返回一组员工，但我不知道如何处理这些返回的数据。我知道如果它是返回的单个对象，我可以将其解组并转换为我的愿望类，但我该如何做到这一点并将我的数据保存在列表、数组列表、集合或任何其他形式的集合中。

```
//single object (perfect)
Customer c = (Customer) jc.createUnmarshaller().unmarshal(xml);

// Error
List<Customer> list = (List<Customer>) jc.createUnmarshaller().unmarshal(xml); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:28:41.413

尝试

```
@XmlRootElement
class Customer {
    @XmlElement
    String name;
    public String toString() {
        return name;
    }
}

@XmlRootElement
class Customers {
    @XmlElement(name = "customer")
    List<Customer> list;
}

class Test {

    public static void main(String[] args) throws Exception {
        String xml = "<customers><customer><name>Ayodeji</name></customer></customers>";
        JAXBContext ctx = JAXBContext.newInstance(Customers.class);
        Unmarshaller um = ctx.createUnmarshaller();
        Customers res = (Customers)um.unmarshal(new StringReader(xml));
        System.out.println(res.list);
    }
} 
```

输出

```
[Ayodeji] 
```

# javascript - 如何从 javascript 中的 svg 字符串中获取信息？

> ID：14070793
> 
> 赞同：2
> 
> 时间：2012-12-28T14:12:40.913
> 
> 标签：javascript, string, svg

我有一个 svg 绘图的字符串。例如我的字符串 var 有这个内容：

```
<svg width="612" height="394" xmlns="http://www.w3.org/2000/svg">
 <g>
     <title>Layer 1</title>
     <rect id="svg_1" height="152" width="265" y="44" x="91" stroke-width="5" stroke="#000000" fill="#FF0000"/>
 </g>
 <g>
     <title>Layer 2</title>
     <rect id="svg_2" height="125" width="151" y="157" x="399" stroke-width="5" stroke="#000000" fill="#FF0000"/>
 </g>
</svg> 
```

有没有简单的方法来获取信息？例如，获得矩形高度的最佳方法是什么？如何从第 2 层中仅选择矩形的高度？感谢你的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:13:49.277

### 试试这个？

在您的代码中包含 jQuery，并使用：

```
$("svg").find("rect").attr("height"); 
```

* * *

### 使用字符串：

```
var str = "<svg> ... </svg>"
$(str).find("rect").attr("height"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:04:29.707

使用 xml dom 解析器。
如其他答案所述，jQuery 是一个非常好的操作和遍历 html/xml 的解决方案：

```
 $(svgString).find('g:eq(1) rect').attr('height'); 
```

如果您不想使用 3rd 方库，您可以在纯 javascript 中执行此操作，但您的*svg 字符串*应附加到 dom 中：

```
var svgString = a='<svg width="612" height="394" xmlns="http://www.w3.org/2000/svg"><g>     <title>Layer 1</title>     <rect id="svg_1" height="152" width="265" y="44" x="91" stroke-width="5" stroke="#000000" fill="#FF0000"/> </g> <g>     <title>Layer 2</title>    <rect id="svg_2" height="125" width="151" y="157" x="399" stroke-width="5" stroke="#000000" fill="#FF0000"/></g></svg>',
    tempElement = document.createElement('div');

tempElement.innerHTML = svgString;
var height = tempElement.querySelector('g:nth-child(1) rect').getAttribute('height'); 
```

这是一个工作演示：http: [//jsfiddle.net/gion_13/5K5x2/](http://jsfiddle.net/gion_13/5K5x2/)

# scope - 使用 $route 和 partials 时如何更新 AngularJS 指令

> ID：14070803
> 
> 赞同：1
> 
> 时间：2012-12-28T14:13:22.583
> 
> 标签：scope, angularjs

[http://jsfiddle.net/MTzJF/36/](http://jsfiddle.net/MTzJF/36/)

上面的 JSFiddle 是为了解释这个问题而设置的。但是，基本上：

HTML：

```
<breadcrumb></breadcrumb>
<div ng-view></div> 
```

角度指令和路由：

```
angular
    .module('app', [])
    .directive('breadcrumb', function() {
        return {
            restrict: 'E',
            template: "<ul class='breadcrumb'><li ng-repeat='node in path'><a ng-href='{{node.url}}'>{{node.label}}</a></li></ul>",
            replace: true,
            controller: Ctrl1
        }
    })
    .config(['$routeProvider', function($routeProvider) {
        $routeProvider
            .when('/', { 
                template: '<h1>{{pgTitle}}</h1>', 
                controller: Ctrl2
            });
    }]); 
```

控制器

```
function Ctrl1($scope) {
    $scope.path = [{
            label: 'Home',
            url: '#/'}];
    $scope.pgTitle = "Home"       
}
function Ctrl2($scope, $routeParams) {
    $scope.path = [{
            label: 'Home',
            url: '#/'},{
            label: 'Node 2',
            url: '#/node2'}];
    $scope.pgTitle = "Node 2"
} 
```

我*希望*`$scope.path`Ctrl2 中的更改会更新面包屑指令，但它没有发生。我必须相信这与它们的相对范围有关，但根本无法很好地理解它以了解什么。我已经阅读了数十篇关于它的文章和 StackOverflow 帖子，但没有什么具体足以让我看到我缺少什么。

我希望有人能指出我正确的方向。

非常感谢！

新西兰

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T16:49:14.800

您的小提琴不起作用的原因是（就像您正确识别的那样）范围问题。您`Ctrl1`是控制指令范围的控制器。该指令正在寻找一个名为的变量`path`，它是一个路径数组。如果我们看一下该范围内的路径变量，它似乎只包含 1 个值。

```
function Ctrl1($scope) {
    $scope.path = [{
            label: 'Home',
            url: '#/'}];
    $scope.pgTitle = "Home"       
} 
```

现在您希望`path`在另一个控制器中更改此变量`Ctrl2`。我假设您正试图`Ctrl2`从`Ctrl1`. 为此，首先检查`Ctrl2`定义了哪个元素。该元素（html 元素）是 元素的子元素`Ctrl1`吗？

从您的 HTML ：

元素`Ctrl1`：`<breadcrumb></breadcrumb>`

元素`Ctrl2`：`<div ng-view></div>`

作为`Ctrl2`以下的子级`Ctrl1`：您的 HTML 结构应如下所示：

```
<breadcrumb>
    <div ng-view></div>
</breadcrumb> 
```

如果我们对您的代码进行此更改，它还不起作用。这是因为当 Angular 查看指令时，`<breadcrumb>`它不知道应该如何处理该节点内的内容。`<breadcrumb>`是一个html节点。由于它是一个节点，它可以在其中包含内容/其他节点。当你用模板替换这个面包屑节点时，你还应该给出角度说明：“*如果你在我里面找到东西，把它放在这里*”。这就是你的做法。

将您的指令代码修改为：

```
.directive('breadcrumb', function() {
            return {
                restrict: 'E',
                template: "<div><ul class='breadcrumb'><li ng-repeat='node in path'><a ng-href='{{node.url}}'>{{node.label}}</a></li></ul><div ng-transclude></div></div>",
                replace: true,
                transclude : true,
                controller: Ctrl1
            }
    }) 
```

这里几乎没有差异/变化。

1.  向指令对象添加了一个名为**transclude的属性并将其设置为****true**。
2.  Wrap the whole template so that it can be returned as a single HTML element.
3.  Specify the place where you want the contents of the to go. Notice the ng-transclude. That is the place where the contents go.

You will notice now that the content is getting replaced now. Except the path is not getting updated with the path value from the child controller. Have a look at this [https://stackoverflow.com/a/14049482/1057639](https://stackoverflow.com/a/14049482/1057639) answer. It is an amazing explanation of scope / prototypical inheritance. Basically, your write to path is creating a new path variable in the child scope that is overshadowing the parent path ( which is being used by the directive).

Your best bet in this scenario is to create an addPath function in the parent scope and use it ( in child scopes ) to add new Path when you define new subviews.

Here is a [fiddle](http://jsfiddle.net/MTzJF/38/) that does all these.

# android - 如何打开系统对话框以在 android 中输入安全 wifi 网络的密码？

> ID：14070808
> 
> 赞同：6
> 
> 时间：2012-12-28T14:14:06.263
> 
> 标签：android, android-wifi

我正在努力实现发现安全 wifi 网络时出现的对话框。我附上了那个对话框的图像。我只是想从我的应用程序中调用这样的对话框。

![如图所示，如何使用意图打开这样的对话框，或者还有其他方法可以做到吗？](../Images/c0f7695654dc60a836adaa5fae09de83.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T13:52:01.403

由于问题不是很清楚，因此有2个可能的答案

1) 如果您想创建一个看起来像图片中的对话框，请尝试设置 AlertDialog 的样式。做起来应该不会太难。例如，看看这个问题：[How to change theme for AlertDialog](https://stackoverflow.com/questions/2422562/how-to-change-theme-for-alertdialog)

2）如果你想打开系统对话框输入Wi-Fi密码，我有个坏消息。该功能无法通过 Intents 或其他 IPC 方式获得。您可以做的最好的事情是使用此 Activity 调用将用户引导至 Wi-Fi 设置页面：

```
startActivity(new Intent(Settings.ACTION_WIFI_SETTINGS)); 
```

希望这能回答你的问题。

# android - 调用另一个 android 活动中包含的对象的方法

> ID：14070813
> 
> 赞同：1
> 
> 时间：2012-12-28T14:14:50.337
> 
> 标签：android, android-activity

在我的应用程序中，当前正在运行的活动需要来自已启动它的活动的数据。父活动有一个对象，需要调用哪个方法来获取所需的数据。

我正在这样做

## 在父活动中

```
public static Puzzle  puzzle;  // Puzzle is a class 
```

## 在儿童活动中

```
Puzzle puzzle = ParentActivity.puzzle;

ArrayList<String> cells = puzzle.getItemList(); 
```

它似乎工作。但我不确定这种方法的正确性。它允许在android中。将android运行时窗体破坏父活动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T14:40:10.000

如果`Puzzle`是一些表示数据模型的普通对象，那么只要您认为这只是一个缓存并且 if`Puzzle`及其内容相当小，那么您所拥有的就是“正确的”。

您的进程可以在离开前台后随时终止。那时，您的缓存`Puzzle`消失了。任何需要生存的数据都需要持久存储：文件、数据库、`SharedPreferences`“云”等等。您的 static`Puzzle`可以是该持久数据的缓存，但真正的数据模型是持久存储，而不是 cached `Puzzle`。

此外，静态数据成员表示有意的内存泄漏。该静态引用的任何内容`Puzzle`都不能被垃圾收集。只要`Puzzle`它很小，它就可以工作。这也是为什么`Puzzle`成为一个普通的`Object`，而不是更复杂的东西（例如，一个`Activity`）很重要的原因——对象越复杂，你泄漏的内存就越多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T14:42:32.040

使用谷歌，这个问题被讨论了一百万次 [在活动之间共享数据的最佳方式是什么？](https://stackoverflow.com/questions/4878159/android-whats-the-best-way-to-share-data-between-activities)

> 公共静态拼图拼图

拼图是静态的，因此即使 Parent 活动消失，它也不会在创建后被销毁。拼图会在两种情况下被销毁：你自己做，你的申请过程结束。所以使用你的方法是安全的。

但我建议您谷歌“在活动之间共享数据”并找到更好的方法（例如应用程序类中的单音）。

# mercurial - Mecurial 合并 --- 为什么我要为其他用户的更改提供提交消息？

> ID：14070815
> 
> 赞同：0
> 
> 时间：2012-12-28T14:15:06.110
> 
> 标签：mercurial, merge

我认为我“得到”了 Mecurial 的大部分内容，但困扰我的一件事是，当我拉取其他文件中其他人所做的更改时，我必须提供提交消息有什么意义？当这些用户将相应的变更集推送到“the”服务器时，他们已经有机会提供提交消息。

据我所知，没有办法只推送我进行更改的树的一部分，所以当其他人对树的不相关部分中的不相关文件进行更改时，我有一个需要推送的变更集，我必须“拉动”、“合并”，然后“提交”，在这里我提供一条描述他们的更改的消息，这些更改在理论上已经由他们的提交消息描述。

我可能不明白一些事情。有没有更好的方法来处理我的情况：

```
 ~$ ## Make some changes
 ~$ hg ci -m 'blah'
 ~$ ## Attempt to "push" and get "abort: push creates new remote head"
 ~$ hg pull
 ~$ hg merge # <- totally unrelated files updated here
 ~$ hg ci -m "SOMEONE ELSE'S FILES CHANGED....!"
 ~$ hg push 
```

??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T14:59:38.240

您**必须**更好地了解合并的**价值**以及您**对合并的操作**

变更集的提交消息（通常）是“此变更集所做工作的简短描述”。对于合并集“完成”是“合并来自...的更改”并且来自此合并集的第二个父分支的提交消息将通知，确实（哪些更改）已合并

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T11:02:28.587

合并是您正在评论的更改，而不是您提取的更改集。所以在你的例子中：

```
~$ ## Make some changes
~$ hg ci -m 'blah'
~$ ## Attempt to "push" and get "abort: push creates new remote head"
~$ hg pull
~$ hg merge 
~$ hg ci -m "Merged with changes on the Flibble-floo server"
~$ hg push 
```

请记住，您可以直接从其他开发人员或不同分支中提取。该消息应描述您已完成的合并。

```
~$ hg pull bob
~$ hg merge 
~$ hg ci -m "Merged with Bob's changes" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T11:36:42.113

了解什么是[合并](http://mercurial.selenic.com/wiki/Merge)很重要。您的提交正在合并两个不同的分支，而不是提交该用户的代码，因此更合适的提交消息将涉及“合并”一词。

现在我将向您展示一个更好的方法。

在这种情况下，如果您从未推送过您尝试推送的代码，那么[rebase](http://mercurial.selenic.com/wiki/RebaseExtension)可能更适合。[在A common case](http://mercurial.selenic.com/wiki/RebaseExtension#A_common_case)中，您的案例完全包含在该文档中。

```
~$ ## Make some changes
~$ hg ci -m 'blah'
~$ ## Attempt to "push" and get "abort: push creates new remote head"
~$ hg pull --rebase  # Or alternately, `hg pull; hg rebase`
~$ hg push 
```

然后你最终得到线性历史，这通常更好地使用（如果可行）。

请记住，如上所述，扩展需要首先在您的[配置](http://www.selenic.com/mercurial/hgrc.5.html)中启用：

```
[extensions]
rebase = 
```

# android - 带有自定义 ArrayAdapter 的 ListView

> ID：14070818
> 
> 赞同：0
> 
> 时间：2012-12-28T14:15:18.730
> 
> 标签：android, android-listview, android-adapter

我有一个用于该行的类，它将`RelativeLayout`一些布局扩展并膨胀到自我。`CheckBox`还设置了检查状态侦听器。

```
public class LayersListRow extends RelativeLayout {         

  public LayersListRow (Context context, final GITuple tuple) {
    super(context);
    LayoutInflater.from(context).inflate(R.layout.layers_list_item, this, true);
        ...

    CheckBox checkbox = (CheckBox)findViewById(R.id.layers_list_item_switch);

    checkbox.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        public void onCheckedChanged (CompoundButton buttonView, boolean isChecked) {
        ...
        }
    });
  }
    ...
} 
```

我有一个 custom `ArrayAdapter`，里面装满了这个类的一些对象。我也想将它们用作视图。

```
public class LayersAdapter extends ArrayAdapter<LayersListRow> {

    @Override
    public View getView (int position, View convertView, ViewGroup parent) {
        return getItem(position);
    }

    public LayersAdapter (Context context, int resource, int textViewResourceId) {
        super(context, resource, textViewResourceId);
    }
} 
```

但是当我将此适配器设置为我`ListView`的`CheckBox`监听器时不起作用。但是对于向下滚动显示的项目，它工作正常。

如果我`return getItem(position);`在`getView`方法中替换为

```
if (null == convertView)
  return getItem(position);

return convertedView; 
```

然后对于列表侦听器中最初可见的所有项目都很好，但是当我尝试滚动时，我得到了错误的项目（又是第一个），`ListView`冻结并且没有响应。

为什么会发生这种情况，我应该如何让它正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:28:08.013

当你使用这个

```
if (null == convertView)
  return getItem(position);

return convertedView; 
```

视图被重用。因此，当您滚动第一次显示的视图时，将再次显示。

我建议你看看我在这篇文章中写的答案。如果您无法关注它，请在此处发表评论。

[从 ListView 获取选中的 Listitems 并将其传递给另一个活动](https://stackoverflow.com/questions/12427262/get-checked-listitems-from-listview-and-pass-that-to-another-activity/12427720#12427720)

# iphone - UIButton 继承选中状态

> ID：14070827
> 
> 赞同：2
> 
> 时间：2012-12-28T14:15:57.100
> 
> 标签：iphone, objective-c, ios, uikit

我有一个`UIButton`内部自定义单元格。选择单元格后，按钮也会将其状态更改为*“突出显示”*。

我想阻止这种行为。该按钮仅在被特别触摸时才应更改其状态（我在我的 中处理`IBAction`）。

可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T14:21:22.180

您可以子类`UIButton`化并覆盖该`setSelected:`方法，而不是调用`[super setSelected:]`或调用它`[super setSelected:NO];`

如果您想自己选择它，请致电`[super setSelected:YES];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T14:11:34.223

这是我最终使用的（在我的自定义单元实现中）：

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    BOOL highlightState = self.btn.highlighted;
    BOOL selectedState = self.btn.selected;

    [super setSelected:selected animated:animated];

    self.btn.selected = selectedState;
    self.btn.highlighted = highlightState;
}

- (void) setHighlighted:(BOOL)highlighted animated:(BOOL)animated
{
    BOOL highlightState = self.btn.highlighted;
    BOOL selectedState = self.btn.selected;

    [super setHighlighted:highlighted animated:animated];

    self.btn.selected = selectedState;
    self.btn.highlighted = highlightState;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T09:27:17.757

在您的单元格的类覆盖中：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
  [super touchesBegan:touches withEvent:event];
  self.button.highlighted = NO;
} 
```

# c# - 计算连续记录中的距离

> ID：14070828
> 
> 赞同：1
> 
> 时间：2012-12-28T14:15:57.380
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2010

我正在开发一个跟踪加油的应用程序。每条记录都存储有关加油站访问的数据。我决定在数据库中存储尽可能少的信息并在控制器中进行计算。

这是我的模型：

```
public class Refuel
{
    #region Properties

        public int id { get; set; }
        public int mileage { get; set; }
        public DateTime date { get; set; }
        public Nullable<double> volume { get; set; }
        public Nullable<double> price { get; set; }

        public Nullable<int> imageId { get; set; }
        public Nullable<int> gasstationId { get; set; }

        public virtual Gasstation Gasstation { get; set; }
        public virtual Image Image { get; set; }

    #endregion

    #region Methods

        public int distance { get; set; }

        [DisplayFormat(DataFormatString = "€ {0:0.00}")]
        public Nullable<double> totalPrice
        {
            get
            {
                return volume * price;
            }
        }

        [DisplayFormat(DataFormatString = "{0:0.00}")]
        public Nullable<double> consumption
        {
            get
            {
                if (distance > 0)
                    return volume / distance * 100;
                else
                    return 0;
            }
        }

        [DisplayFormat(DataFormatString = "{0:0}")]
        public Nullable<double> consumption2
        {
            get
            {
                if (distance > 0)
                    return distance / volume;
                else
                    return 0;
            }
        }

        [DisplayFormat(DataFormatString = "{0:0.00}")]
        public Nullable<double> mileageLeft
        {
            get 
            {
                return volumeLeft * consumption2;
            }
        }

        [DisplayFormat(DataFormatString = "{0:0.00}")]
        public Nullable<double> volumeLeft
        {
            get
            {
                double? d = 45 - volume;
                return d;
            }
        }

    #endregion
} 
```

如您所见，我对这里的距离没有做任何事情。我在一个特定记录的详细信息页面中计算距离。

我现在要做的是在索引页面上做一个总结，总结距离并计算平均消耗。这都是相对于距离的，但此时这是一个空场。

在索引页面上显示所有记录的列表时，我遇到了同样的问题。距离和消耗列是空的。

在那一点上填充距离的最佳方法是什么？还是将距离存储在数据库中会更好吗？

这是我的索引函数：

```
 [HttpGet]
    [Authorize]
    public ActionResult Index(string sortOrder, int? page)
    {
        ViewBag.CurrentSort = sortOrder;
        ViewBag.NameSortParm = String.IsNullOrEmpty(sortOrder) ? "asc" : "";

        List<Refuel> rf = db.Refuels.ToList();
        var refuels = from t in db.Refuels select t;

        switch (sortOrder)
        {
            case "asc":
                refuels = refuels.OrderBy(q => q.mileage);
                break;
            default:
                refuels = refuels.OrderByDescending(q => q.mileage);
                break;
        }

        // statistieken
        ViewBag.count = rf.Count();
        ViewBag.distance = rf.Sum(q => q.distance);
        ViewBag.volume = rf.Sum(q => q.volume);
        ViewBag.consumption = String.Format("{0:0.0}", rf.Where(q => q.consumption > 0).Average(q => q.consumption));
        ViewBag.consumption2 = String.Format("{0:0.0}", rf.Where(q => q.consumption2 > 0).Average(q => q.consumption2));
        ViewBag.cost = String.Format("{0:c2}", rf.Sum(q => q.totalPrice));

        int pageSize = 10;
        int pageNumber = (page ?? 1);
        return View(refuels.ToPagedList(pageNumber, pageSize));
    } 
```

**编辑：** 设法修复摘要部分，当然我可以使用最后和第一英里来获得总行驶距离：

```
ViewBag.count = tb.Count();
ViewBag.distance = tb.Last().mileage - tb.First().mileage;
ViewBag.volume = tb.Sum(q => q.volume);
ViewBag.consumption = String.Format("{0:0.0}", ViewBag.volume / ViewBag.distance * 100);
ViewBag.consumption2 = String.Format("{0:0.0}", ViewBag.distance / ViewBag.volume);
ViewBag.cost = String.Format("{0:c2}", tb.Sum(q => q.totalPrice)); 
```

我现在需要做的就是在索引表中显示每条记录的距离。这是我的 index.cshtml 中的循环：

```
@foreach (var item in Model)
{
    <tr>
        <td>
            @Html.ActionLink(Html.DisplayFor(modelItem => item.mileage).ToString(), "Details", new { id = item.id })
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.date)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.distance)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.volume)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.consumption)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.totalPrice)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Gasstation.fullname)
        </td>
    </tr>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:54:30.373

无论您在单个记录的详细信息页面中做什么来计算距离，在这种情况下也必须完成。如果您认为该操作比将距离字段存储在数据库中更昂贵 - 您得到了答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:46:26.387

您可以在视图本身中计算它。只需在集合上运行一个 for 循环以显示您的记录，并以 i+1 或 i-1 的形式获取最后的加油里程（基于 ViewBag.CurrentSort），然后在此处进行数学运算。

**编辑** 尚未对此进行测试，但这就是它的样子：

您必须返回额外的记录来计算集合中第一条或最后一条记录的距离，因此您必须更改 ToPagedList 方法以接受排序顺序并在要显示的记录之前或之后返回额外的项目。

然后你的 for 循环看起来像：

```
@{
    bool asc = ((string)ViewBag.CurrentSort).ToLower() == "asc";
    int i = 0;
    int records = Model.Count;

    //If sort is asc you want to skip the first record (the extra record you returned to do the calculation), else you want to stop before you get to the extra row at the end of the collection
    if (asc) i += 1;
    else records -= 1;

for (i; i<records; i++)
{
<tr>
    <td>
        @Html.ActionLink(Model[i].mileage.ToString(), "Details", new { id = Model[i].id })
    </td>
    <td>
        @Html.DisplayFor(modelItem => Model[i].date)
    </td>
    <td>
        @if (asc) {
        @Html.Display(Model[i].mileage - Model[i - 1].mileage)
        }
        else {
           @Html.Display(Model[i].mileage - Model[i + 1].mileage)
        }
etc... 
```

话虽这么说，对于应该是一个非常基本的功能来说，这感觉像是做了大量工作。而且您开始远离 MVC 的要点之一，即将业务逻辑与视图分离。

看起来您的永久解决方案应该是将距离存储在数据库中。当您向加油表添加新记录时，您应该首先获取前一条记录并计算添加新记录时要包含的距离。您所添加的只是一个额外的调用来获取单个记录，并且数据库操作足够便宜，您应该只看到非常大规模的差异。但即便如此，以上所有这些工作无论如何都将在服务器上完成，并且每次重复它的成本可能要高得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T15:12:47.910

您可以在模型中创建一个构造函数并将距离设置为 0，然后再考虑填充它。

# php - 使用其他外部/发布的变量从选择查询结果中插入数据

> ID：14070830
> 
> 赞同：1
> 
> 时间：2012-12-28T14:16:09.973
> 
> 标签：php, sql, pdo

如何在一个插入查询中插入来自查询结果和其他变量的数据？

样本：

```
$id = $_POST['id'];  
$address = $_POST['address'];  
$email = $_POST['email'];

$query = "INSERT INTO info_table(fname, lname, address, email) VALUES (SELECT fname, lname, FROM info WHERE id = '$id')";  
$result = db->prepare($query);  
$result->execute(); 
```

我如何插入`$address`并`$email`与选择结果变量一起？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T14:24:22.810

这应该可以解决查询：

```
INSERT INTO info_table (
    fname, 
    lname, 
    address, 
    email
) 
SELECT 
    fname, 
    lname,
    ':address',
    ':email' 
FROM 
    info 
WHERE 
    id = ':id' 
```

你没有在这里使用准备。你真的应该绑定到参数`:address`, `:email`, 和`:id`

```
$result = db->prepare($query);  
$result->bindParam(':id', $id, PDO::PARAM_STR);
$result->bindParam(':email', $email, PDO::PARAM_STR);
$result->bindParam(':address', $address, PDO::PARAM_STR);
$result->execute(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-28T14:22:24.610

准确回答您的问题：

```
$query = "INSERT INTO MyInsecureTable (fname, lname, address, email) SELECT fname, lname, '$address', '$email' FROM info WHERE id = '$id'"; 
```

但它是吓人的。离开我。

# primefaces - 使用变量创建资源包键（Primefaces）

> ID：14070833
> 
> 赞同：0
> 
> 时间：2012-12-28T14:16:28.843
> 
> 标签：primefaces

如何使用动态 bean 属性检索资源包的值？

我想获得价值`LOCALE_EN`或`LOCALE_FR`关键。`EN`或者`FR`是属性值bean。

我测试过：

```
#{rb["LOCALE_" + selected.localeChoice]}
#{rb[LOCALE_ + selected.localeChoice]}
#{rb.LOCALE_[selected.localeChoice]}
... 
```

没有结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:23:12.827

好吧，这只是

```
#{rb["LOCALE_".concat(selected.localeChoice)]} 
```

# svn - SVN 给出了没有真正差异的冲突

> ID：14070834
> 
> 赞同：2
> 
> 时间：2012-12-28T14:16:33.993
> 
> 标签：svn, conflict

合并分支后，我遇到了很多这样的冲突：

```
<<<<<<< .working

       return $sql;
=======

       return $sql;
>>>>>>> .merge-right.r37555 
```

...我看不到真正的差异。为什么SVN给我这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:20:22.023

检查你的空格和行尾。（制表符与空格，CRLF 与 LF）

你可以用 vim 做到这一点，`:se list`用于显示所有字符。`:se nolist`再次将其关闭。

# c# - WPF Menu Binding 仅在第一级丢失样式

> ID：14070838
> 
> 赞同：0
> 
> 时间：2012-12-28T14:16:53.580
> 
> 标签：c#, wpf, mahapps.metro

如果我在代码中做错了什么，请告诉我。我正在尝试将 WPF 菜单绑定到“MenuViewModel”。绑定在非样式窗口中按我预期的方式工作。

我仅将 MahApps.Metro 用于样式目的，这就是绑定后的样子。

[![这是它的样子](../Images/67073e33ae18b7637fd4dfee0954c736.png)](https://i.stack.imgur.com/r6Qa0.png)

这是源代码的链接[http://sdrv.ms/W5uJpY](http://sdrv.ms/W5uJpY)

视图模型：

```
public class Menu : INotifyPropertyChanged
{
    public Menu()
    {
        IsEnabled = true;
        Children = new List<Menu>();
    }

    #region [ Menu Properties ]

    private bool _isEnabled;
    private string _menuText;
    private ICommand _command;
    private IList<Menu> _children;

    public string MenuText
    {
        get { return _menuText; }
        set
        {
            _menuText = value;
            RaisePropertyChanged("MenuText");
        }
    }

    public bool IsEnabled
    {
        get { return _isEnabled; }
        set
        {
            _isEnabled = value;
            RaisePropertyChanged("IsEnabled");
        }
    }

    public ICommand Command
    {
        get { return _command; }
        set
        {
            _command = value;
            RaisePropertyChanged("Command");
        }
    }

    public IList<Menu> Children
    {
        get { return _children; }
        set
        {
            _children = value;
        }
    }

    #endregion

    #region [INotifyPropertyChanged]
    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void RaisePropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
    #endregion
} 
```

XAML：

```
<Menu Grid.Row ="0" IsMainMenu="True" x:Name="mainMenu" VerticalAlignment="Top" ItemsSource="{Binding Children}">
    <Menu.ItemContainerStyle>
        <Style TargetType="{x:Type MenuItem}" BasedOn="{StaticResource {x:Type MenuItem}}">
        <!--Or can be the line below, both yield the same result-->
        <!--<Style TargetType="{x:Type MenuItem}" BasedOn="{StaticResource MetroMenuItem}">-->
        <!--NOTICE THAT SUB MENU's of OPEN work fine-->
            <Setter Property="Header" Value="{Binding Path=MenuText}"/>
            <Setter Property="Command" Value="{Binding Path=Command}"/>
            <Setter Property="ItemsSource" Value="{Binding Path=Children}"/>
        </Style>
    </Menu.ItemContainerStyle>
</Menu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:39:31.203

我想我在这里找到了答案

[http://karlshifflett.wordpress.com/2008/02/03/wpf-sample-series-databound-hierarchicaldatatemplate-menu-sample/](http://karlshifflett.wordpress.com/2008/02/03/wpf-sample-series-databound-hierarchicaldatatemplate-menu-sample/)

它正确地进行绑定 - 以及维护分隔符。

# cordova - phonegap - 在浏览器中打开链接

> ID：14070841
> 
> 赞同：14
> 
> 时间：2012-12-28T14:17:02.820
> 
> 标签：cordova, cordova-2.0.0

我使用 phonegap (cordova 2.2)

我有这样的链接：

```
<a href="http://twitter.com/foobar" target="_blank">twitter</a> 
```

在 iOS 上 - 它在浏览器中打开链接（Safari）

但在 Android 上 - 它在 webview 内打开（在我的 phonegap 应用程序内）

有没有办法让 Android 以与 iOS 相同的方式工作？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-31T04:38:47.050

这就是我在 Android 上使用 Cordova 2.2 和 jQuery mobile 的方式

Javascript：

```
$('.link').live('tap', function() {
    url = $(this).attr("rel");   
    loadURL(url);
});

function loadURL(url){
    navigator.app.loadUrl(url, { openExternal:true });
    return false;
} 
```

html:

```
<a href='#' class='link' rel='http://www.someurl.com'>Go Somewhere</a> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-28T14:24:42.157

在安卓上试试这个：

```
function loadURL(url){
    navigator.app.loadUrl(url, { openExternal:true });
    return false;
} 
```

html:

```
<a click="loadURL('http://twitter.com/foobar')">twitter</a> 
```

你也可以在你的`config.xml`：

```
<access origin="*twitter.com" browserOnly="true"/> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-01T19:59:48.333

user1879822 提供的链接实际上对我来说是最有用的：[https ://build.phonegap.com/blog/access-tags](https://build.phonegap.com/blog/access-tags)

总而言之，PhoneGap 在其 config.xml 中有一个允许 URL 的白名单。这意味着如果它有这样的条目......

```
<access origin="*" /> 
```

...它将尝试打开其自己的网络视图中的*所有*链接。但是，如果您将白名单限制为仅特定的 URL，则指向*不在*该列表中的 URL 的任何链接都将在外部浏览器中自动打开，而不是在本地 Web 视图中打开。例如，如果您将其限制为仅此...

```
<access origin="http://127.0.0.1*" /> 
```

...那么原始问题中提到的 twitter 链接应该在新的外部浏览器中打开。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-20T12:31:11.993

如果你想在 ios 版本中使用 as，带有`target="_blank"`属性：

```
$(document).on('tap', 'a[target="_blank"]', function(e){
    navigator.app.loadUrl(e.target.href, { openExternal: true });
    return false;
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-22T07:43:01.073

我将其用作一般规则：

```
$('a').live('tap',function(e){
    // if external link then open a browser
    if(String($(this).attr('href')).substring(0,4)=='http' || String($(this).attr('href')).substring(0,5)=='https'){
        navigator.app.loadUrl($(this).attr('href'), { openExternal:true });
        e.stopPropagation();
        return false;
    }
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-10T12:23:16.613

即使不久前有人问过这个问题，我还是想告诉您以下帮助我的血腥条目：

[https://build.phonegap.com/blog/access-tags](https://build.phonegap.com/blog/access-tags)

在 android 中，我所要做的就是取消我指定的域的白名单。所以在我的 config.xml 中我根本没有任何 `。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-11T05:22:10.813

我遇到了同样的问题，我注意到大多数答案都是针对不同平台的。对我有用的解决方案是[针对不同平台的详细说明](http://phonegap.com/blog/2012/03/20/access-tags/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-15T09:26:12.487

这在ios上对我有用

```
 $("a[target='_blank']").on('tap touch click',function(e){
                        e.stopPropagation();
                        e.preventDefault();
                        window.open($(this).attr('href'), "_system");
                        return false;
                    }); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-11-27T17:10:41.040

phonegap 工作的导航器！

```
handler: function (btn, evt) {
loadURL('http://www.google.com');
} 
```

...

```
function loadURL(url){
navigator.app.loadUrl(url, { openExternal:true });
return false;
} 
```

# jquery - 为什么 Jquery 有两种不同的语法来调用相同的无冲突函数？

> ID：14070844
> 
> 赞同：0
> 
> 时间：2012-12-28T14:17:09.580
> 
> 标签：jquery, syntax

据我了解，`noConflict`在 jQuery 中有两种使用方式（这也适用于其他函数）：

1.  `$.noConflict();`
2.  `jQuery.noConflict();`

jQuery中调用函数的两种方法有什么区别？

## 编辑

我知道它的作用，我需要帮助澄清差异。我应该何时或出于什么原因使用其中一种。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T14:23:02.773

在另一篇文章中遗漏了一个案例，我想澄清一下：

> `$`并且`jQuery`两者都指向`window.jQuery`对象，因此**它们是相同的**。一些脚本使用`jQuery`not 的原因`$`是为了 **防止与其他库发生冲突，例如原型或不同版本的 jQuery，它们都使用`$`变量**.

取自[What's the difference between `$`and`jQuery`和 other n00b Qs](http://forum.jquery.com/topic/basics-what-s-the-difference-between-and-jquery-and-other-n00b-qs)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T14:23:04.823

请参阅[jQuery.noConflict()](http://api.jquery.com/jQuery.noConflict/)。您页面上的其他 javascript 库是否可以使用 $ 变量？

$ 只是一个用于别名`jQuery`的变量，并且是一个变量，任何东西都可以分配给它。

# php - 由 Flash Builder 数据向导编写的巨大的 CPU 负载/性能不佳的 php zend 系统

> ID：14070860
> 
> 赞同：1
> 
> 时间：2012-12-28T14:18:44.740
> 
> 标签：php, mysql, zend-framework, flash-builder, cpu

我是一名自学成才的 AS3/Flex/AIR 开发人员，我已经构建了一个在 AIR 上运行的触摸屏信息亭系统，并通过在线 Flex 应用程序进行远程内容管理。

这是我第一次做服务器端的东西，所以如果需要，请随时纠正我的问题。

AIR 应用程序和 Flex 应用程序都连接到 mysql 数据库，以便使用 php 脚本和 Zend 框架进行简单的 CRUD 操作。信息亭每 30 秒调用一次服务器进行更新。

所有这些简单的服务器端 php 脚本都是由 Flash Builder 的数据向导自动生成的。我做了简单的调整（gateway.php、amf_config.ini、mysqli 连接参数）并将所有内容部署到客户端的服务器上。这是一个共享服务器类型。

现在，系统工作。但它工作缓慢。每个创建/读取/更新/删除操作都有效，但我认为它应该快得多。此外，这些操作给服务器的 cpu 带来了很大的负载。根据托管人员的说法，该系统打开的 php-cgi 进程占用了服务器 CPU 功率的 40%，这样做会减慢自身和该服务器上托管的其他站点的速度。

我的问题是：

首先，是不是一开始就有问题，或者这个性能是从 Zend 框架中扩展出来的？Flash Builder 编写的自动生成的脚本是否写得不好并且可以优化？这种系统可以保留在共享托管服务器上吗？我们是否应该迁移到 VPS 服务器以获得更好的性能？如果我使用 phpmyadmin 在 mysql 数据库上创建的表没有经过优化构建，是否会对性能产生这种影响？

我不知道php或mysql。任何形式的帮助都会非常感激。

萨尔

这是由 Flash Builder 编写的脚本： 我没有添加任何内容 - 只是更改了连接参数。

```
<?php

class KiosksService {

   var $username = "--------";
   var $password = "--------";
   var $server = "--------";
   var $port = "3306";
   var $databasename = "--------";
   var $tablename = "kiosks";

   var $connection;

   /**
    * The constructor initializes the connection to database. Everytime a request is 
    * received by Zend AMF, an instance of the service class is created and then the
    * requested method is invoked.
    */
   public function __construct() {
        $this->connection = mysqli_connect(
                          $this->server,  
                          $this->username,  
                          $this->password, 
                          $this->databasename,
                          $this->port
                       );

      $this->throwExceptionOnError($this->connection);
   }

   /**
    * Returns all the rows from the table.
    *
    * Add authroization or any logical checks for secure access to your data 
    *
    * @return array
    */
   public function getAllKiosks() {

      $stmt = mysqli_prepare($this->connection, "SELECT * FROM $this->tablename");      
      $this->throwExceptionOnError();

      mysqli_stmt_execute($stmt);
      $this->throwExceptionOnError();

      $rows = array();

      mysqli_stmt_bind_result($stmt, $row->KioskID, $row->Station, $row->Branch, $row->Chain, $row->Pingdate, $row->Layout, $row->Online, $row->Clips, $row->Extra);

       while (mysqli_stmt_fetch($stmt)) {
         $row->Pingdate = new DateTime($row->Pingdate);
         $rows[] = $row;
         $row = new stdClass();
         mysqli_stmt_bind_result($stmt, $row->KioskID, $row->Station, $row->Branch, $row->Chain, $row->Pingdate, $row->Layout, $row->Online, $row->Clips, $row->Extra);
       }

      mysqli_stmt_free_result($stmt);
       mysqli_close($this->connection);

       return $rows;
   }

   /**
    * Returns the item corresponding to the value specified for the primary key.
    *
    * Add authorization or any logical checks for secure access to your data 
    *
    * 
    * @return stdClass
    */
   public function getKiosksByID($itemID) {

      $stmt = mysqli_prepare($this->connection, "SELECT * FROM $this->tablename where KioskID=?");
      $this->throwExceptionOnError();

      mysqli_stmt_bind_param($stmt, 'i', $itemID);      
      $this->throwExceptionOnError();

      mysqli_stmt_execute($stmt);
      $this->throwExceptionOnError();

      mysqli_stmt_bind_result($stmt, $row->KioskID, $row->Station, $row->Branch, $row->Chain, $row->Pingdate, $row->Layout, $row->Online, $row->Clips, $row->Extra);

      if(mysqli_stmt_fetch($stmt)) {
         $row->Pingdate = new DateTime($row->Pingdate);
         return $row;
      } else {
         return null;
      }
   }

   /**
    * Returns the item corresponding to the value specified for the primary key.
    *
    * Add authorization or any logical checks for secure access to your data 
    *
    * 
    * @return stdClass
    */
   public function createKiosks($item) {

      $stmt = mysqli_prepare($this->connection, "INSERT INTO $this->tablename (Station, Branch, Chain, Pingdate, Layout, Online, Clips, Extra) VALUES (?, ?, ?, ?, ?, ?, ?, ?)");
      $this->throwExceptionOnError();

      mysqli_stmt_bind_param($stmt, 'sssssisi', $item->Station, $item->Branch, $item->Chain, $item->Pingdate->toString('YYYY-MM-dd HH:mm:ss'), $item->Layout, $item->Online, $item->Clips, $item->Extra);
      $this->throwExceptionOnError();

      mysqli_stmt_execute($stmt);      
      $this->throwExceptionOnError();

      $autoid = mysqli_stmt_insert_id($stmt);

      mysqli_stmt_free_result($stmt);      
      mysqli_close($this->connection);

      return $autoid;
   }

   /**
    * Updates the passed item in the table.
    *
    * Add authorization or any logical checks for secure access to your data 
    *
    * @param stdClass $item
    * @return void
    */
   public function updateKiosks($item) {

      $stmt = mysqli_prepare($this->connection, "UPDATE $this->tablename SET Station=?, Branch=?, Chain=?, Pingdate=?, Layout=?, Online=?, Clips=?, Extra=? WHERE KioskID=?");      
      $this->throwExceptionOnError();

      mysqli_stmt_bind_param($stmt, 'sssssisii', $item->Station, $item->Branch, $item->Chain, $item->Pingdate->toString('YYYY-MM-dd HH:mm:ss'), $item->Layout, $item->Online, $item->Clips, $item->Extra, $item->KioskID);      
      $this->throwExceptionOnError();

      mysqli_stmt_execute($stmt);      
      $this->throwExceptionOnError();

      mysqli_stmt_free_result($stmt);      
      mysqli_close($this->connection);
   }

   /**
    * Deletes the item corresponding to the passed primary key value from 
    * the table.
    *
    * Add authorization or any logical checks for secure access to your data 
    *
    * 
    * @return void
    */
   public function deleteKiosks($itemID) {

      $stmt = mysqli_prepare($this->connection, "DELETE FROM $this->tablename WHERE KioskID = ?");
      $this->throwExceptionOnError();

      mysqli_stmt_bind_param($stmt, 'i', $itemID);
      mysqli_stmt_execute($stmt);
      $this->throwExceptionOnError();

      mysqli_stmt_free_result($stmt);      
      mysqli_close($this->connection);
   }

   /**
    * Returns the number of rows in the table.
    *
    * Add authorization or any logical checks for secure access to your data 
    *
    * 
    */
   public function count() {
      $stmt = mysqli_prepare($this->connection, "SELECT COUNT(*) AS COUNT FROM $this->tablename");
      $this->throwExceptionOnError();

      mysqli_stmt_execute($stmt);
      $this->throwExceptionOnError();

      mysqli_stmt_bind_result($stmt, $rec_count);
      $this->throwExceptionOnError();

      mysqli_stmt_fetch($stmt);
      $this->throwExceptionOnError();

      mysqli_stmt_free_result($stmt);
      mysqli_close($this->connection);

      return $rec_count;
   }

   /**
    * Returns $numItems rows starting from the $startIndex row from the 
    * table.
    *
    * Add authorization or any logical checks for secure access to your data 
    *
    * 
    * 
    * @return array
    */
   public function getKiosks_paged($startIndex, $numItems) {

      $stmt = mysqli_prepare($this->connection, "SELECT * FROM $this->tablename LIMIT ?, ?");
      $this->throwExceptionOnError();

      mysqli_stmt_bind_param($stmt, 'ii', $startIndex, $numItems);
      mysqli_stmt_execute($stmt);
      $this->throwExceptionOnError();

      $rows = array();

      mysqli_stmt_bind_result($stmt, $row->KioskID, $row->Station, $row->Branch, $row->Chain, $row->Pingdate, $row->Layout, $row->Online, $row->Clips, $row->Extra);

       while (mysqli_stmt_fetch($stmt)) {
         $row->Pingdate = new DateTime($row->Pingdate);
         $rows[] = $row;
         $row = new stdClass();
         mysqli_stmt_bind_result($stmt, $row->KioskID, $row->Station, $row->Branch, $row->Chain, $row->Pingdate, $row->Layout, $row->Online, $row->Clips, $row->Extra);
       }

      mysqli_stmt_free_result($stmt);      
      mysqli_close($this->connection);

      return $rows;
   }

   /**
    * Utility function to throw an exception if an error occurs 
    * while running a mysql command.
    */
   private function throwExceptionOnError($link = null) {
      if($link == null) {
         $link = $this->connection;
      }
      if(mysqli_error($link)) {
         $msg = mysqli_errno($link) . ": " . mysqli_error($link);
         throw new Exception('MySQL Error - '. $msg);
      }      
   }
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:59:11.613

虽然 Zend 框架的性能可能有点问题，*但您的示例中没有 zend 框架代码*。

> 该系统打开 6 个 php-cgi 进程

对于每个操作？这似乎不太可能。如果您提供显示典型事务的访问日志样本以及他们提供的支持此断言的证据，将会很有帮助。

如果您对性能（或您的服务器机房有多热）有一点担心，那么通过 cgi 运行 php 是一个*非常糟糕的主意。*使用 mod_php 或 php-fpm 甚至 php via fcgi 以及操作码缓存将减少 75% 以上的执行时间。

查看代码，这里没有什么明显不好的地方——除了 getKiosks_paged——在没有明确的 ORDER BY 的情况下进行行范围选择是非常草率的。

> 每个创建/读取/更新/删除操作都有效，但我认为它应该快得多

它有多快？网络服务器上的请求多长时间，它执行什么查询？他们需要多长时间？你的数据库的结构是什么？您的查询的解释计划是什么样的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:59:57.600

我无法评论 Zend 框架，因为我从未使用过它。

CGI 总是比 Fast CGI 慢，或者更好的是 mod_php 或类似的东西。当您使用 CGI 时，每次启动解释器并在脚本完成后，所有内容都会被拆除。

当您改用 Fast CGI 或 PHP 模块时，Web 服务器模块可以跨调用维护一些状态，例如数据库连接。

# cmd - 清除 windows 环境变量：%ERRORLEVEL%

> ID：14070861
> 
> 赞同：4
> 
> 时间：2012-12-28T14:18:48.953
> 
> 标签：cmd

在 cmd.exe 中运行 MS DOS 命令后，我正在使用 echo %ERRORLEVEL% 检查退出代码。但是我想在运行之前我应该​​清除变量：%ERRORLEVEL%。

我对么？还有如何清除这个变量？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-21T08:00:51.100

正如 twasbrillig 所写，我认为这已经得到了回答：

[将 ERRORLEVEL 重置为零的最简单方法是什么？](https://stackoverflow.com/questions/1113727/what-is-the-easiest-way-to-reset-errorlevel-to-zero?lq=1)

我会标记为最佳答案：

```
cmd /c exit /b 0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T15:03:47.367

使用[`verify`](http://technet.microsoft.com/en-us/library/cc754978%28v=ws.10%29.aspx)命令。我们只是通过执行我们知道会成功的命令来重置 ErrorLevel 变量。所以这可以用任何你知道会成功的命令来完成。验证只是我所看到的默认设置。

```
verify >nul 
```

此外，您只想在调用返回退出代码的命令之前清除变量。

```
verify >nul
command that returns an exit code
echo %ErrorLevel% 
```

# infragistics - Infragistics UltraChart 显示为 red-x 损坏的图像

> ID：14070865
> 
> 赞同：0
> 
> 时间：2012-12-28T14:18:51.620
> 
> 标签：infragistics, brokenimage

我确定我遗漏了一些简单的东西，但是当我尝试显示 UltraChart 时，它只会在角落显示一个带有红色 x 的框。

我目前只是想为一个简单的条形图实现示例代码：

```
<igchart:UltraChart ID="barchartData" runat="server">
</igchart:UltraChart> 
```

在后面的代码中：

```
 DataTable mydata = new DataTable();
    // Define the columns and their names
    mydata.Columns.Add("Series Labels", typeof(string));
    mydata.Columns.Add("Column A", typeof(int));
    mydata.Columns.Add("Column B", typeof(int));
    mydata.Columns.Add("Column C", typeof(int));
    mydata.Columns.Add("Column D", typeof(int));
    // Add the rows of data
    mydata.Rows.Add(new Object[] { "Series A", 1, 4, 10, 4 });
    mydata.Rows.Add(new Object[] { "Series B", 3, 6, 4, 5 });
    mydata.Rows.Add(new Object[] { "Series C", 5, 8, 6, 7 });
    mydata.Rows.Add(new Object[] { "Series D", 7, 10, 7, 7 });
    barchartData.DataSource = mydata;
    barchartData.DataBind(); 
```

这应该导致以下结果： ![在此处输入图像描述](../Images/ed0601130cd11d9361d8839f6a816a8a.png)

但是，我明白了： ![在此处输入图像描述](../Images/29d515b85f17cf47fbd39a536155f396.png)

注意：我确信数据正在进入表格，因为即使我只得到损坏的图像框，当我将鼠标移到它上面时，当我将鼠标悬停在应该是栏的位置时，我也会看到工具提示数字。

谢谢，丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:10:03.693

我假设您获得了图像的占位符，因为找不到图像或存在服务器错误。如果您使用 fiddler 之类的工具或浏览器的网络工具来查看来自服务器的实际响应，您将获得更多信息。

至于解决问题，这将取决于服务器的响应以及您为 WebChart 使用的图像部署策略，您可能希望在帮助中阅读更多信息：[http://help.infragistics。 com/NetAdvantage/ASPNET/Current/CLR4.0/?page=Chart_Image_Deployment_in_WebChart.html](http://help.infragistics.com/NetAdvantage/ASPNET/Current/CLR4.0/?page=Chart_Image_Deployment_in_WebChart.html)

# c# - Visual Studio：如何管理项目之间共享的代码

> ID：14070881
> 
> 赞同：11
> 
> 时间：2012-12-28T14:20:20.930
> 
> 标签：c#, visual-studio-2010

这可能之前已经发布过，但我不确定要查找哪些搜索词！

快速解释。

我有几个项目之间共享的代码。此代码本身仍在进行中。问题是每当我需要更新这段代码时，我不想做 3 次，这将成为一场噩梦。

有没有办法将它添加到项目中，而无需将其复制到项目文件夹中？即我希望将共享类链接到我的 3 个项目中

C:\code repository\sharedclass.cs 不是 \eachproject\bin\sharedclass.cs

我必须将它创建为它自己的库项目吗？如果编译器可以将其编译为“外部”代码会更好。

干杯。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T14:59:33.887

正如其他人所说，您只需在解决方案资源管理器中右键单击您的解决方案，选择添加 > 现有项目，然后浏览到通用项目的 .csproj 文件，它将从其原始位置包含在解决方案中。

但是，这有两个问题，这可能是也可能不是问题，具体取决于您团队的规模：

1.  公共项目将包含在每个解决方案中，并带有解决方案文件的相对路径（即：...\CommonProject\Common.csproj）。这意味着所有开发人员必须具有相同的工作文件结构，否则他们在尝试打开主项目时会出错。

2.  在公共项目被多个项目（例如两个 - A 和 B）引用并且从事项目 A 的开发人员必须对公共项目进行更改作为其任务的一部分的情况下，该开发人员无法知道如果他们所做的更改会破坏项目 B，而他们没有实际检查项目 B 并对其进行编译。随着越来越多的项目引用通用项目，发生这种情况的风险增加到无法管理的程度。

同样，正如其他人所说，没有“正确”的方法可以做到这一点。但是，我采取的方法如下：

1.  使用 Cruise Control 等持续集成来管理项目的构建，并将公共项目作为独立项目放在服务器上。

2.  在您的源代码管理下创建一个目录来存放构建的常用 DLL。在您的构建机器上签出此目录，每当构建公共项目时，它会将输出 DLL 复制到 DLL 文件夹并将这些更改提交到源代码管理。

3.  在所有开发人员的机器和构建服务器上使用环境变量来控制公共 DLL 文件夹的位置，并使用该变量而不是硬编码路径来引用 DLL。（即：而不是 C:\Source\MyCommonProjectDLLS\Common.dll，使用 $(MyCommonLocation)\Common.dll 并将变量 'MyCommonLocation' 设置为 C:\Source\MyCommonProjectDLLS）

4.  对于任何引用公共 DLL 的项目，请在构建服务器上为该项目设置 CI 触发器以监视公共 DLL 文件夹。每当向它提交更改时，构建服务器就应该构建所有正在使用的项目。

这会立即让您知道您是否正在为任何其他项目提交重大更改。唯一的缺点是，在此模型中，使用项目被迫在生成公共 DLL 后立即对其进行更新。另一种方法是在构建时从源代码控制修订版中对 Common DLL 进行版本化，并将每个版本放在 common DLL 文件夹下的自己的子目录中。所以你最终会得到：

常用 DLL
-1.0.0.1234
-1.0.0.1235
-1.0.0.1236

等等。这样做的好处是每个项目都可以通过简单地引用新版本的代码来选择何时对公共 DLL 进行更新。然而，这两种方式都被切断了，因为这可能意味着一些项目使用旧版本的公共代码的时间比他们应该的要长，这可能会增加最终引入这些更改时所涉及的工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-28T14:22:47.420

是的。

您可以从硬盘驱动器上的任何位置将项目添加到解决方案中。因此，将共享代码放入类库并将其添加到您的三个项目中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-28T14:25:12.520

微软一直在支持一个开源项目，它现在内置在 VS 中，它称为 NuGet，您可以将共享项目输出为 nuget 文件并在其他项目中使用它。

它实际上会在构建时部署您在包中指定的所有文件。

这就是 .Net 现在支持依赖项的方式。您会注意到，即使是像 EF 这样的东西也是通过 NuGet 包实现的。您甚至可以在 MyGet.org 之类的地方免费托管它，我使用它，而且效果很好。

[http://nuget.org/](http://nuget.org/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-05T23:11:23.790

我使用[git 子模块](https://git-scm.com/book/en/v2/Git-Tools-Submodules)来实现这一点。

1.  为要在解决方案之间共享的每个模块（项目）创建一个新的 git 存储库。我通常还会将该项目的单元测试包含在一个单独的项目中，但在同一个 git 存储库中。
2.  将一个[子模块](https://git-scm.com/book/en/v2/Git-Tools-Submodules)添加到将使用共享代码的解决方案的 git 存储库。添加子模块会创建指向外部存储库的特定提交的链接。当子模块中的代码更新时，您将能够将更新拉到您的父解决方案中，这与更新对子模块提交的引用基本相同。[我发现使用像SourceTree](https://www.sourcetreeapp.com)这样的应用程序更容易可视化该过程。
3.  添加子模块并拉取最新提交将在父解决方案文件夹中创建共享项目的副本。通过右键单击解决方案并选择“添加现有项目”将项目导入父 Visual Studio 解决方案。
4.  通过右键单击项目并选择“添加引用”并在“解决方案”选项卡中找到共享项目，在将使用它的其他项目中添加对共享项目的引用。

现在共享项目已包含在解决方案中，您将能够推送和拉取对子模块的更改，这些更改将自动合并到解决方案中。您还可以看到引用子模块的其他 git 存储库中的更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T14:40:20.303

是的，将需要共享的代码放在一个单独的类库项目中，构建它并将从此构建创建的 DLL 引用到您的其他项目中。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-28T14:23:19.633

最好将公共部分提取到单独的项目库中，并将该项目的引用添加到所有解决方案/依赖项目中。

否则，您可以[将代码/文件/项目添加为 Link](http://www.flatredball.com/frb/docs/index.php?title=Visual_Studio_Tutorials%3aAdd_As_Link)。

# windows - XAMPP 图像未显示/损坏（-可能是 .htaccess）

> ID：14070887
> 
> 赞同：2
> 
> 时间：2012-12-28T14:20:51.803
> 
> 标签：windows, image, apache, .htaccess, xampp

我正在使用 XAMPP 在 VPS 的本地主机上托管一个网站。

当我直接通过本地主机或从我自己的计算机远程访问 VPS 网站时 - 图像未加载并显示为损坏，当我尝试直接查看图像时，我收到错误 404 并且找不到对象。

图像路径完全正确，对应于 htdocs。

例如，

```
http://mysite.com/icons/pixels.gif 
```

我复制了该链接，检查了 htdocs，这正是图像应该在的位置，但我收到错误 404 并且找不到对象。

然而。

出于偶然，我将 \icons\ 从“i”更改为大写字母，并且图像正常加载。htdocs 中的图标文件夹没有大写字母。

问题可能是我的 .htaccess 文件，这里有一个链接： http: [//pastebin.com/vUnhjb2A](http://pastebin.com/vUnhjb2A)

# java - 计算屏幕中的最大平方

> ID：14070891
> 
> 赞同：2
> 
> 时间：2012-12-28T14:21:04.907
> 
> 标签：java, android, algorithm

> **可能重复：**
> [将正方形打包成一个矩形](https://stackoverflow.com/questions/12627449/pack-squares-into-a-rectangle)

我需要计算最有效的方块尺寸会填满屏幕，

如果你看下面的图片，有不同的屏幕尺寸和平方数。我需要一种算法来计算**x 轴平方计数和 y 轴平方计数**，这将最有效地填充屏幕（**填充正方形后将留下最小的空白区域**）。

我看了下面的帖子，但这不是解决我问题的答案

[将正方形打包成一个矩形](https://stackoverflow.com/questions/12627449/pack-squares-into-a-rectangle)

**1 - 可以更改平方数（3-5-10 依此类推...）**

**2 - 屏幕尺寸可以不同**

举些例子 ，

*   在 1280 x 800 和 15 平方？

*   在 800 x 480 和 12 个正方形上？

*   在 600x1024 和 9 个正方形上？

*   在 720x1280 和 45 平方？

** 我需要一个计算正方形宽度的算法（高度与宽度相同）**

如果您查看图像 3 和图像 3-1 之间的差异，您会发现图像 3-1 使用屏幕更有效，因为未使用的区域更少。

**图 3** ![图 3](../Images/25310f3a8a48a986cc3d3287d46f6e73.png)

或者也许这是一种更好的填充方式：

**图 3-1**

![图 3 - 1](../Images/f1c40387650df1412518ee7c04426840.png)

如果您查看图像 4 和图像 4-1 之间的差异，您会发现图像 4-1 使用屏幕更有效，因为未使用的区域更少。

**图 4**

![图 4](../Images/5d3d831719d6a057993f38980d33e4bd.png)

** 4\. 图片必须如下图，因为屏幕上未使用的区域较少**

**图 4-1** ![图 4 - 1](../Images/538ba568d753dfc12dbd47900593e129.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:36:26.217

我相信你所说的“有效”是正方形覆盖的面积越大越好。

让 ：

a : x 轴平方数

b : y 轴平方数

s ：正方形的大小（一侧的长度）

w : 屏幕宽度

h : 屏幕高度

c : 要放置的方格数

那么我们有

```
a * s <= w
b * s <= h
a * b >= c 
```

通过这些不等式，可以找到 s 的上限。检查给出的第四个示例，其中 c = 20，w = 1280 和 h = 800

```
a * s <= 1280
b * s <= 800
a * b >= 20 
```

a * b = (1280 / s) * (800 / s) >= 20 ---> s^2 <= (1280*800) / 20 ---> s <= 226,27..

有了 s 的上限，我们可以将 a 和 b 估计为；

a * s <= 1280 ---> a ~= 5,6568 b * s <= 800 ---> b ~= 3,53

对于这些值，不等式 a * b >= 20 不成立。

但是 a 和 b 都必须是整数。然后我们尝试 a 和 b 可以得到的 4 种可能性：

```
a = 5, b = 3 // round down both
a = 5, b = 4 // one down, one up
a = 6, b = 3 // one down, one up
a = 6, b = 4 // round up both 
```

由于 a * b >= 20 第一种和第三种情况被消除为有效答案。下一步选择 a = 5, b = 4 的答案，因为它们的乘积更接近所需的平方数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T15:44:07.113

您正在寻找的是显示器的宽度和高度之间的[最大公因数。](http://www.mathsisfun.com/greatest-common-factor.html)

由于大多数显示器的比例为 4:3 或 16:9，因此最大公因数将为您提供可用于填充显示区域的最大正方形。

在您的 400 x 400 像素显示器中，最大公因数是 400，一个正方形将填满显示器。

在您的 1280 X 800 像素显示器中，最大公因数是 160。您需要 40 个正方形 (8 x 5) 来填充显示器。

如果要计算所有显示尺寸的最大公因数，答案是 1。每个像素都是一个正方形。您应该为要支持的每个显示尺寸计算一个单独的最大公因数。

# excel - 在 Excel 中创建前十名列表

> ID：14070894
> 
> 赞同：1
> 
> 时间：2012-12-28T14:21:24.760
> 
> 标签：excel, excel-formula

我一直在寻找一种在 Excel 中为我的叔叔曲棍球联赛制作“前十名”名单的方法。

有 5 个不同的团队有自己的工作表，我制作了一个单独的工作表，称为“数据”，参考所有球员及其个人统计数据，这样我就可以从一个工作表中提取我的“前十名”而不是五个。

工作表设置如下：

```
 Player1  Player2  Player3  etc... 
Name

Team

Goals

Assists

Points 
```

我想搜索“积分”最高的球员，并在一行中返回姓名、球队、进球、助攻和积分，然后向下移动到下一个球员，即：

```
Name 1    Team     Goals     Assists    Points

Name 2    Team     Goals     Assists    Points 
```

我尝试使用多种方法，包括 index 和 hlookup 以及 large 和 match 命令，但无法正常工作。我觉得我在这里错过了一些简单的东西。

如果让球员排成一排更容易，我可以这样做。我只是在我的参考资料填写我想要的方式时遇到了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:59:50.593

初始表：
`B1`：（`=COUNTA(B6:O6)`球员人数） `B6:O6`名称
`B7:O7`球队
`B8:O8`进球
`B9:O9`助攻
`B10:O10`得分

下面的公式确定玩家的排名。如果得分相同，则进球数越多的球员排名越高。
`B4`: `=$B$1-RANK(B$10;$B$10:$O$10)+B8/1000`，公式复制到右边。结果将是分数相等的小数，整数部分相等。
`B3`: `=RANK(B4;$B$4:$O$4)`, 公式复制到右边
`B2`:`=IF(COUNTIF(C$3:$O$3;B3)>0;B3+COUNTIF(C$3:$O$3;B3);B$3)`

排名表：
`A15`和 down ： Rank (1,2...n)
`B15`和 down ：`=HLOOKUP(A15;$A$2:$O$3;2;FALSE)`

在接下来的列中：`Name (col C), Goals (col D), Assists (col E), Points (col F)`

`C15`: `=HLOOKUP($A15;$A$2:$O$10;5;FALSE)`
`D15`: `=HLOOKUP($A15;$A$2:$O$10;7;FALSE)`
`E15`: `=HLOOKUP($A15;$A$2:$O$10;8;FALSE)`
`F15`:`=HLOOKUP($A15;$A$2:$O$10;9;FALSE)`

中的公式`B11:E11`将被复制下来。

电子表格示例：[http ://www.bumpclub.ee/~jyri_r/Excel/Top_players_matrix_transposed.xls](http://www.bumpclub.ee/~jyri_r/Excel/Top_players_matrix_transposed.xls)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:57:26.683

您必须先**转置表格**..

*   选择表格的所有行和列。
*   右键单击要粘贴表格的第一个单元格
*   单击粘贴特殊选项
*   在打开的对话框中选中转置复选框。

您的表现在已转置。**现在简单的排序**可以给你答案

用于排序列：

*   选择整个表格并单击菜单栏上的排序选项，

现在您可以从这个排序列表中检索所有 10 个顶级团队。

# xml - XML 模式验证：多个错误，如 cvc-complex-type.2.4.a 和 cvc-complex-type.2.3

> ID：14070898
> 
> 赞同：0
> 
> 时间：2012-12-28T14:21:34.223
> 
> 标签：xml, xsd, schema

我正在尝试根据我的 XML 模式验证我的 XML 文档。

这是我的架构：

```
<?xml version="1.0" encoding="utf-8" ?>
<!--Created with Liquid XML Studio 2012 Developer Edition (Trial) 10.1.8.4306 (http://www.liquid-technologies.com)-->
<xs:schema elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="MSG">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="EnTete" type="EnTeteType" />
                <xs:element name="OME" type="OMEType" maxOccurs="unbounded" />
            </xs:sequence>
            <xs:attribute name="Type" type="xs:string" use="required" />
            <xs:attribute name="Version" type="xs:decimal" use="required" />
        </xs:complexType>
    </xs:element>
    <xs:complexType name="EnTeteType">
        <xs:sequence>
            <xs:element ref="Source" />
            <xs:element ref="Creation" />
        </xs:sequence>
    </xs:complexType>
    <xs:element name="Source">
        <xs:simpleType>
            <xs:restriction base="xs:string">
                <xs:enumeration value="NEBEFI" />
            </xs:restriction>
        </xs:simpleType>
    </xs:element>
    <xs:element name="Creation">
        <xs:simpleType>
            <xs:restriction base="xs:string">
                <xs:maxLength value="12" />
            </xs:restriction>
        </xs:simpleType>
    </xs:element>
    <xs:complexType name="OMEType">
        <xs:sequence>
            <xs:element ref="Derniere-Modif" />
            <xs:element ref="Date-Mesure" />
            <xs:element name="Reference" type="ReferenceType" />
            <xs:element name="Puissance" type="PuissType" />
            <xs:element ref="Total" />
        </xs:sequence>
        <xs:attribute name="Nom" type="xs:string" use="required" />
    </xs:complexType>
    <xs:element name="Derniere-Modif" type="xs:string" />
    <xs:element name="Date-Mesure">
        <xs:simpleType>
            <xs:restriction base="xs:string">
                <xs:maxLength value="14" />
            </xs:restriction>
        </xs:simpleType>
    </xs:element>
    <xs:complexType name="ReferenceType">
        <xs:sequence>
            <xs:element ref="Nature" />
            <xs:element ref="Statut" />
            <xs:element ref="Type-Gest" />
            <xs:element ref="Gest" />
            <xs:element ref="Type-Res" />
            <xs:element ref="Nb-h" />
        </xs:sequence>
    </xs:complexType>
    <xs:element name="Nature" type="xs:string" />
    <xs:element name="Statut">
        <xs:simpleType>
            <xs:restriction base="xs:int">
                <xs:enumeration value="0" />
                <xs:enumeration value="1" />
                <xs:enumeration value="2" />
            </xs:restriction>
        </xs:simpleType>
    </xs:element>
    <xs:element name="Type-Gest" type="xs:string" />
    <xs:element name="Type-Res" type="xs:string" />
    <xs:element name="Gest">
        <xs:simpleType>
            <xs:restriction base="xs:string">
                <xs:length value="10" />
            </xs:restriction>
        </xs:simpleType>
    </xs:element>
    <xs:element name="Nb-h">
        <xs:simpleType>
            <xs:restriction base="xs:int">
                <xs:enumeration value="23" />
                <xs:enumeration value="24" />
                <xs:enumeration value="25" />
            </xs:restriction>
        </xs:simpleType>
    </xs:element>
    <xs:element name="Puiss">
        <xs:complexType>
            <xs:sequence>
                <xs:element ref="Val" maxOccurs="unbounded" />
            </xs:sequence>
            <xs:attribute name="Unite" type="xs:string" use="required" />
        </xs:complexType>
    </xs:element>
    <xs:element name="Val" type="xs:string" />
    <xs:element name="Total">
        <xs:complexType>
            <xs:simpleContent>
                <xs:extension base="xs:string">
                    <xs:attribute name="Unite" type="xs:string" use="required" />
                </xs:extension>
            </xs:simpleContent>
        </xs:complexType>
    </xs:element>
    <xs:complexType name="PuissType">
        <xs:all>
            <xs:element ref="Puiss" />
        </xs:all>
    </xs:complexType>
</xs:schema> 
```

这是我的 XML 文档：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<MSG xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance" Type="Publication" Version="1.0">
 <EnTete>
  <Source>NEBEFI</Source> 
  <Creation>201208092324</Creation> 
</EnTete>
 <OME Nom="Effacements RE">
  <Derniere-Modif>20120809232419</Derniere-Modif> 
  <Date-Mesure>20120809000000</Date-Mesure> 
 <Reference>
  <Nature>ACHAT</Nature> 
  <Statut>2</Statut> 
  <Type-Gest>RE</Type-Gest> 
  <Gest>RE_ENEL_RE</Gest> 
  <Type-Res>D</Type-Res> 
  <Nb-h>24</Nb-h> 
</Reference>
 <Puiss Unite="MW">
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val>
                <Val>1.500</Val> 
  </Puiss>
  <Total Unite="MWh">5961</Total> 
  </OME>
</MSG> 
```

现在，当我验证文档（通过 Eclipse）时，我收到以下消息：

> 无效。错误 - 第 18、21 行：org.xml.sax.SAXParseException；行号：18；列号：21；cvc-complex-type.2.4.a：发现以元素“Puiss”开头的无效内容。预计会有“{Puissance}”之一。
> 
> 错误 - 第 69、9 行：org.xml.sax.SAXParseException；行号：69；列号：9；cvc-complex-type.2.3：元素“OME”不能有字符 [children]，因为该类型的内容类型是仅元素。
> 
> 错误 - 第 70、7 行：org.xml.sax.SAXParseException；行号：70；列号：7；cvc-complex-type.2.3：元素“MSG”不能有字符 [children]，因为该类型的内容类型是仅元素。

这些消息没有任何意义，而且很难（不可能？）在网上搜索解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:40:52.757

至少第一个错误非常清楚 - 根据您的架构，OME 的倒数第二个子元素应该命名为`Puissance`，但解析器却找到`Puiss`了。特别是，阅读您的架构的其余部分，它看起来像是在预期的那样

```
<Puissance>
  <Puiss Unite="MW">
    <!-- Val elements as before -->
  </Puiss>
</Puissance> 
```

如果这是您自己的架构，您可能需要替换

```
<xs:element name="Puissance" type="PuissType" /> 
```

在你`OMEType`用一个简单的

```
<xs:element ref="Puiss" /> 
```

对于其他两个错误，我同意，除非 XML 中有一些不可见的非打印字符，否则它们似乎没有多大意义，但我知道 Eclipse 过去对某些类别的错误感到非常困惑并开始报告问题那些不存在的——一旦你修复了第一个错误，你可能会发现其他错误也消失了。

# c# - 员工 ID 的标准正则表达式

> ID：14070904
> 
> 赞同：3
> 
> 时间：2012-12-28T14:22:17.687
> 
> 标签：c#, asp.net, .net, regex

我需要员工 ID 的标准正则表达式，例如

```
EMP015
015EMP
EMP_015
E_015
EMP-015
EMP.VIS
EMP/056 
```

基本上它应该允许`.`或`_`或`-`或`/`在字母数字字符之间

条件：

1.  第一个字符不应该是`.`or `_`or `-`or`/`
2.  员工 ID 的长度应为 50 个字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T14:32:29.630

尝试将其用于您的正则表达式模式：

```
@"^[A-Z\d]{1}[A-Z\d._/\-]{49}$" 
```

示例代码：

```
Regex oRegex = new Regex(@"^[A-Z\d]{1}[A-Z\d._/\-]{49}$");
oRegex.IsMatch("EMP_01512312312312/31-2312.31231231231322222222222"); // true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:36:03.690

以我的经验，如果你能明确地解释格式，正则表达式并不难写。我将对格式做出一些假设，如果我错了，请纠正我。

1.  格式由两部分组成
2.  其中一个部分是以字母 E 开头的大写字母字符串，长度未知
3.  另一部分是一系列字母数字字符。
4.  零件可以按任何顺序排列
5.  这些部分可以用单个`.`, `_`, `-`,分隔`/`
6.  零件可能根本没有分开

鉴于这些，一个（相当冗长的）正则表达式可能是：

```
^(E[A-Z]*[._\-/]*[0-9A-Z]+)|([0-9A-Z]+[._\-/]*E[A-Z]*)$ 
```

# asp.net - 使用用户名和密码保护 aspx 页面

> ID：14070907
> 
> 赞同：-1
> 
> 时间：2012-12-28T14:22:25.967
> 
> 标签：asp.net

我有一个 Default.aspx 页面，我需要使用用户名和密码来保护它，并且我一直在通过 Google 搜索一个简单的 Login.aspx 页面，它保护 Default.aspx 页面没有运气，因为我不是 .网络开发者。

你有什么例子给我吗，一个非常基本的代码来保护带有用户名和密码的 Default.aspx 页面？

在此先感谢，我真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:31:33.207

我会建议你我知道的最好的方法..[表单身份验证](http://msdn.microsoft.com/en-us/library/ff647070.aspx)

您应该首先阅读本文以了解[什么是表单身份验证以及它是如何工作](http://www.codeproject.com/Articles/98950/ASP-NET-authentication-and-authorization)的，然后查看此[示例](http://bradkingsley.com/securing-asp-net-pages-forms-authentication-c-and-net-4/)以获取帮助。

# php - AJAX 加载 PHP 文件

> ID：14070909
> 
> 赞同：0
> 
> 时间：2012-12-28T14:22:35.000
> 
> 标签：php, ajax

我是 AJAX 的新手，我有一个加载 table.php 的链接。然后它将代码写入 index.php。在该代码中，我有另一个链接来显示 info.php。是否有可能做到这一点？

```
<!--This is index.php-->
<div id="link"><a href="info">my Info</a></div><!--it works here-->
<div id="link"><a href= "table">My Table</a></div>
<div id="table"></div>
<div id="info"></div>

<!--My javascript-->
<script type="text/javascript">
$(document).ready(function() {
    $('#link a').click(function(){
        var page = $(this).attr('href');
        if(page =='table')
            $('#table').load('table.php');
        else if(page =='info')
            $('#info').load('info.php');
        return false;
    })
});
</script>

<!--This is table.php-->
<div id="link"><a href="info">my Info</a></div><!--it doesn't works here-->

<!--This is info.php-->
<h1>My info</h1> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T14:25:37.867

您的三个`<div>`（如@scragar 所指出的）具有相同的 id `link`，很可能是导致问题的原因。让它成为这样的类：

```
<div class="link"> 
```

在你的 JS 中：

```
$('.link a') 
```

编辑：正如 dbf 所指出的，您还必须使用`live()`或`on()`代替声明您的处理程序`click()`：

```
$('.link a').live('click', function(){ ... }); 
```

为了`table.php`在页面加载后绑定它。( [http://api.jquery.com/live/](http://api.jquery.com/live/) )

# cakephp-2.0 - 如何在 Cakephp 2.0 中检查 ajax 会话？

> ID：14070915
> 
> 赞同：0
> 
> 时间：2012-12-28T14:22:46.560
> 
> 标签：cakephp-2.0

如何在 Cakephp 2.0 中检查 ajax 会话？我正在使用 ajax 来获取一些记录。但是在空闲模式一段时间并尝试一些 ajax 获取时，它会重定向到 500 错误页面。只是因为它没有会话。在此 ajax 检查之前如何检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:45:56.293

很可能您的会话被破坏了。您可以在此处找到更多信息： [ajax 请求结束 CakePHP 会话](https://stackoverflow.com/questions/13028263/ajax-request-ends-cakephp-session)

如果您使用安全组件，请参阅： [CakePHP 2.1 making a jquery ajax call with Security component activate](https://stackoverflow.com/questions/11869336/cakephp-2-1-making-a-jquery-ajax-call-with-security-component-activated)

大多数时候它是关于安全级别和安全组件的 CakePHP 配置。

# sql - ODBC SQL 查询从一列创建借方和贷方两列

> ID：14070916
> 
> 赞同：0
> 
> 时间：2012-12-28T14:22:48.373
> 
> 标签：sql, odbc

我们正在使用 VB .NET 和 2.0 .NET 框架连接到专有的 ODBC 源。我们正在提取余额字段（其中正值是借方，负值是贷方）以及其他信息。

由于不支持大小写，因此**无法进行**以下查询：

```
Dim strQuery As String = "SELECT ACCOUNT_REF, " + _
"CASE WHEN [BALANCE] < 0 THEN BALANCE ELSE NULL END, " + _
"CASE WHEN [BALANCE] > 0 THEN BALANCE ELSE NULL END " + _
"FROM TABLE1 WHERE BALANCE <> 0" 
```

使用 DataSet 时，我们可以将 Balance 列一分为二吗？如果有，有什么例子吗？

我们正在使用以下代码来构建我们的数据集（因为此专有实现不支持大小写）：

```
 Dim strQuery = "Select ACCOUNT_REF, BALANCE FROM TABLE1 WHERE BALANCE <> 0"
        Using connection
            Using adapter As New Odbc.OdbcDataAdapter(strQuery, connection)
                Dim ds As New DataSet()
                adapter.Fill(ds)
            End Using
        End Using 
```

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:19:17.707

你有没有尝试过：

```
SELECT Account_Ref, Balance as Debits, NULL as Credits
FROM Table1
WHERE Balance < 0
UNION ALL
SELECT Account_Ref, NULL as Debits, Balance as Credits
FROM Table1
WHERE Balance > 0 
```

笨重，但可能支持 UNION 或 UNION ALL 而 CASE 不支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:32:26.683

我很惊讶地看到 VB.NET 下的 ODBC 不支持这种情况。我对 VB.NET 了解不多，但也许是因为您忘记为您的案例命名？尝试：

```
Dim strQuery As String = "SELECT ACCOUNT_REF, " + _
"CASE WHEN [BALANCE] < 0 THEN BALANCE ELSE NULL END as Debits, " + _
"CASE WHEN [BALANCE] > 0 THEN BALANCE ELSE NULL END as Credits " + _
"FROM TABLE1 WHERE BALANCE <> 0" 
```

也可能`[]`无法识别分隔符。SQL 中的官方分隔符是双引号`"`。但是，由于名称`Balance`没有什么特别之处，您应该删除这些：

```
Dim strQuery As String = "SELECT ACCOUNT_REF, " + _
"CASE WHEN BALANCE < 0 THEN BALANCE ELSE NULL END as Debits, " + _
"CASE WHEN BALANCE > 0 THEN BALANCE ELSE NULL END as Credits " + _
"FROM TABLE1 WHERE BALANCE <> 0" 
```

否则，您应该使用存储过程而不是查询字符串。

# python-2.7 - 使用漂亮的汤通过 Python 进行网页抓取的问题

> ID：14070924
> 
> 赞同：-1
> 
> 时间：2012-12-28T14:23:12.310
> 
> 标签：python-2.7, screen-scraping, beautifulsoup

我正在使用以下引用的代码从网站上抓取一些项目名称：

```
# -*- coding: cp1252 -*-
import csv
import urllib2
import sys
import time
from bs4 import BeautifulSoup

page = urllib2.urlopen('http://www.vodafone.de/privat/tarife/red-smartphone-tarife.html').read()
soup = BeautifulSoup(page)
soup.prettify()
items = soup.findAll('div', {"class": "txtBox"})
for item in items:
    print unicode(item.string).encode('utf8').strip() 
```

**问题：**当我运行此代码时，将打印 18 个“无”而不是 18 个项目的名称。

输出片段：

```
>>> 
None
None
None
None
None
None
None
None
None
None 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:30:07.980

您真的想先仔细看看您匹配的内容，这些是更复杂的 HTML 结构，而不仅仅是简单的标签：

```
>>> items = soup.findAll('div', {"class": "txtBox"})
>>> items[0]
<div class="txtBox">
<h3>iPhone 5</h3>
<div class="pr-stars" style="background-position: 0px -108px">
</div>
<div class="details">
<select id="color">
<option value="4">Weiß</option>
<option selected="selected" value="5">Schwarz</option>
</select>
<select id="size">
<option value="4">16 GB</option>
<option selected="selected" value="5">32 GB</option>
<option value="6">64 GB</option>
</select>
<ul>
<li>8 Megapixel-Kamera</li><li>A6 Chip</li><li>112 Gramm leicht</li></ul>
<div class="price">
<span id="price"><br/>
</span></div>
</div>
<div class="button">
<a class="vfmodal-trigger" href="#">Details </a>
</div>
</div> 
```

您可能想要获取包含`<H3>`标签的值，如果有的话：

```
for item in items:
    h3tag = item.find('h3')
    if h3tag is not None:
        print unicode(h3tag.string).encode('utf8').strip() 
```

# android - 我可以以编程方式设置 android:layout_toLeftOf 吗？

> ID：14070929
> 
> 赞同：13
> 
> 时间：2012-12-28T14:23:39.983
> 
> 标签：android, android-layout

我有一个RelativeLayout，我有一个`TextView`，并且该元素的`android:layout_toLeftOf`属性设置为同一布局中的另一个TextView。

根据应用程序从服务器接收的数据，我需要将这个 TextView`GONE`的可见性设置为并将 a 的可见性设置`ProgressBar`为`VISIBLE`，然后我需要第一个 TextView 与此进度条左对齐。

这有可能以编程方式完成吗？

如果没有，你能想出解决问题的方法吗？

**编辑**

遵循以下建议，这就是我的工作代码的样子：

```
TextProgressBar txtProgressBar = (TextProgressBar) v.findViewById(R.id.progressBarPointsInProgress);
TextView offerName = (TextView) v.findViewById(R.id.textViewOfferName);
android.widget.RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams)offerName.getLayoutParams();
params.addRule(RelativeLayout.LEFT_OF, R.id.progressBarPointsInProgress);
params.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
offerName.setLayoutParams(params); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-28T14:25:30.707

**添加规则**

```
RelativeLayout.Layoutparams params = (RelativeLayout.LayoutParams)ProgressBar.getLayoutParams();
params.addRule(RelativeLayout.LEFT_OF, R.id.youtTextView); 
```

# iphone - iOS - 计算距离、方位角、仰角和相对位置（增强现实）

> ID：14070931
> 
> 赞同：9
> 
> 时间：2012-12-28T14:23:54.517
> 
> 标签：iphone, objective-c, ios, xcode, augmented-reality

我开始构建一个增强现实应用程序，您可以在其中将图像放置在增强现实相机视图的屏幕上，并且它会保持在地球上的那个位置，因此其他拥有相机视图的人可以通过增强现实相机视图看到它现实相机视图。为此，我知道我需要计算某种距离因子以及方位角和仰角。

所以，我已经想出了如何将对象的图形发送到服务器并取回它，但是我怎样才能将它放回其相对于地球的原始位置。我知道我需要计算它：

*   高度
*   坐标
*   方位角
*   海拔
*   距离

但是我将如何计算这些并解释它们/将它们拼凑在一起。我希望你明白我的意思。

为了加深你的理解，让我给你一个应用程序的简短演示：

一个人在他的房子里，他决定将一幅画的图像放在他的一面墙上。他打开默认为增强现实屏幕的应用程序，按下加号按钮并从他的照片库中添加一张图片。在幕后，它将位置和位置数据保存到服务器，使用该应用程序及其增强现实屏幕的人经过，它进入服务器并找到保存在附近的图像，然后下载图像并将其放置在墙，以便其他人在移动它时可以用手机看到它。

我应该采取什么方法来实现这一目标？任何大纲、链接、资源、教程、想法、经验等。谢谢！这是一个通常很难写下来的问题，我希望你能理解。如果没有，请告诉我，我会改写。

罗汉

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-28T14:54:04.817

我正在开发两个 AR iOS 应用程序，它们执行以下操作：将方位角（罗盘、水平角）和仰角（陀螺仪、垂直角）转换为 3D 空间中的位置（例如球面到笛卡尔）。

您需要的框架是：

*   核心位置
*   核心运动

对于纬度、经度和高度，获取地理位置（坐标）非常简单。您可以在多个在线资源中轻松找到此信息，但这是您在`CLLocationManagerDelegate`拨打电话后需要的主要电话`startUpdatingLocation`：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
{
    latitude = (float) manager.location.coordinate.latitude;
    longitude = (float) manager.location.coordinate.longitude;
    altitude = (float) manager.location.altitude;
} 
```

获取方位角也非常简单，在调用后使用与位置相同的委托`startUpdatingHeading`：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading
{
    azimuth  = (float) manager.heading.magneticHeading;
} 
```

高度是从陀螺仪中提取的，它没有代表但也很容易设置。调用看起来像这样（注意：这适用于我在横向模式下运行的应用程序，检查你的）：

```
elevation = fabsf(self.motionManager.deviceMotion.attitude.roll); 
```

最后，您可以将方向坐标转换为 3D 点，如下所示：

```
- (GLKVector3)sphericalToCartesian:(float)radius azimuth:(float)theta elevation:(float)phi
{
    // Convert Coordinates: Spherical to Cartesian
    // Spherical: Radial Distance (r), Azimuth (θ), Elevation (φ)
    // Cartesian: x, y, z

    float x = radius * sinf(phi) * sinf(theta);
    float y = radius * cosf(phi);
    float z = radius * sinf(phi) * cosf(theta);
    return GLKVector3Make(x, y, z);
} 
```

对于最后一部分，要非常小心角度和轴的命名约定，因为它们因源而异。在我的系统中，θ 是水平面上的角度，φ 是垂直面上的角度，x 是左右，y 是上下，z 是前后。

至于距离，我不确定你是否真的需要使用它，但如果你这样做了，那就用它代替“半径”。

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-20T14:06:08.100

**斯威夫特 3**

陀螺仪代码更新：

```
import CoreMotion
...
        motionManager.deviceMotionUpdateInterval = 0.1
        motionManager.startDeviceMotionUpdates(to: OperationQueue.current!) { deviceManager, error in
            guard let dm = deviceManager else { return }
            let roll = dm.attitude.roll
            let pitch = dm.attitude.pitch
            let yaw = dm.attitude.yaw

            print("r: \(roll), p: \(pitch), y: \(yaw)")
        } 
```

# sql - 解决 SQL Server 最大列限制 1024 和 8kb 记录大小

> ID：14070932
> 
> 赞同：29
> 
> 时间：2012-12-28T14:24:08.577
> 
> 标签：sql, sql-server

我正在创建一个包含 1000 列的表。大多数列都是`nvarchar`类型。表已创建，但有警告

> *警告：表“Test”已创建，但其最大行大小超过了允许的最大值 8060 字节。如果结果行超过大小限制，则对该表的 INSERT 或 UPDATE 将失败。*

表的大部分列中已经有数据（即 99% 的列有数据）。当我尝试在第 310 之后更新任何列时（因为所有开始的 309 列都有一些值），它会给出错误：

> *无法创建大于允许的最大行大小 8060 的大小为 8061 的行。*

我将此数据插入到所有开始的 308 列

“Lorem ipsum dolor sit amet，consectetur adipisicing elit。”

当我使用`ntext`数据类型时，它允许我更新大约 450 列，但除此之外`ntext`也不允许我更新。我必须更新至少 700 列。哪个 SQL Server 不允许这样做。我有这样的场景，我无法将表格的某些列移动到另一个表格。

实际上我正在为现有的窗口应用程序工作。这是一个非常大的 Windows 应用程序。

实际上，我尝试在其中插入多达 700 个 nvarchar 列数据的表是在运行时动态创建的。只有在某些情况下，它需要插入 400-600 列。但通常它需要 100 -200 列，我可以轻松处理。

问题是我无法将此表拆分为多个表。因为用这种结构创建的许多表和表的名称都保存在另一个表中，即有超过100个具有这种结构的表并且它们是动态创建的。为了创建表和操作其数据，使用了 4-5 种语言（C#、Java..），并且 WCF、Windows 服务和 Web 服务也涉及。

所以我认为在拆分表格后操作表格及其数据并不容易。如果我拆分表格，则需要进行大量结构更改。

所以请建议我解决这个问题的最佳方法是什么。

我也尝试过使用**稀疏列**，例如：

```
Create table ABCD(Id int, Name varchar(100) Sparse, Age int); 
```

我也考虑过**ColumnStoreIndex**但我的目的没有解决。

稀疏列允许我为一个表创建 3000 列，但它也限制了我的页面大小。

有什么方法可以使用一些临时表或使用任何其他类型的 SQL 服务器对象来实现它？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-08-07T19:38:20.157

**SQL Server 最大列数限制**

每个短字符串列的字节数 **8,000**

每个 GROUP BY 的字节数，ORDER BY **8,060**

每行字节数 **8,060**

每个索引键的列数 **16**

每个外键的列数**16**

每个主键的列数**16**

每个非宽表的列数 **1,024**

每个宽表的列数 **30,000**

每个 SELECT 语句的列数 **4,096**

每个 INSERT 语句的列数 **4096**

每个 UPDATE 语句的列（宽表） **4096**

当您组合每行超过**8,060字节的****varchar、nvarchar、varbinary、sql_variant**或 CLR 用户定义类型列时，请考虑以下事项：

 **超过 8,060 字节的行大小限制可能会影响性能，因为 SQL Server 仍保持每页 8 KB 的限制。当 varchar、nvarchar、varbinary、sql_variant 或 CLR 用户定义类型列的组合超过此限制时，SQL Server 数据库引擎将具有最大宽度的记录列移动到 ROW_OVERFLOW_DATA 分配单元中的另一个页面，同时保持 24-原始页面上的字节指针。将大记录移动到另一个页面是动态发生的，因为记录基于更新操作而被延长。缩短记录的更新操作可能会导致记录移回 IN_ROW_DATA 分配单元中的原始页面。此外，查询和执行其他选择操作，例如对包含行溢出数据的大型记录进行排序或连接会减慢处理时间，

因此，当您设计具有多个 varchar、nvarchar、varbinary、sql_variant 或 CLR 用户定义类型列的表时，请考虑可能溢出的行的百分比以及可能查询此溢出数据的频率。如果可能对多行行溢出数据进行频繁查询，请考虑对表进行规范化，以便将某些列移动到另一个表。然后可以在异步 JOIN 操作中查询。

*   对于 varchar、nvarchar、varbinary、sql_variant 和 CLR 用户定义类型列，各个列的长度仍必须在 8,000 字节的限制范围内。只有它们的组合长度可以超过表的 8,060 字节行限制。
*   其他数据类型列的总和，包括 char 和 nchar 数据，必须在 8,060 字节的行限制内。大对象数据也不受 8,060 字节行的限制。
*   聚集索引的索引键不能包含在 ROW_OVERFLOW_DATA 分配单元中具有现有数据的 varchar 列。如果在 varchar 列上创建聚集索引，并且现有数据位于 IN_ROW_DATA 分配单元中，则后续插入或更新操作会将数据推送到行外的列将失败。有关分配单元的详细信息，请参阅表和索引组织。
*   您可以包含包含行溢出数据的列作为非聚集索引的键或非键列。
*   使用稀疏列的表的记录大小限制为 8,018 字节。当转换后的数据加上已有记录数据超过 8018 字节时，返回 MSSQLSERVER ERROR 576。在稀疏类型和非稀疏类型之间转换列时，数据库引擎会保留当前记录数据的副本。这会暂时使记录所需的存储空间增加一倍。.
*   要获取有关可能包含行溢出数据的表或索引的信息，请使用 sys.dm_db_index_physical_stats 动态管理函数。

**创建具有 n 列和数据类型 Nvarchar 的表**

```
CREATE Proc [dbo].[CreateMaxColTable_Nvarchar500]
(@TableName nvarchar(100),@NumofCols int)
AS
BEGIN

DECLARE @i INT
DECLARE @MAX INT
DECLARE @SQL VARCHAR(MAX)
DECLARE @j VARCHAR(10)
DECLARE @len int
SELECT @i=1
SELECT @MAX=@NumofCols
SET @SQL='CREATE TABLE ' + @TableName + '('

WHILE @i<=@MAX

BEGIN
select @j= cast(@i as varchar)
SELECT @SQL= @SQL+'X'+@j  +' NVARCHAR(500) , '
SET @i = @i + 1
END
select @len=len(@SQL)

select  @SQL = substring(@SQL,0,@len-1)

SELECT @SQL= @SQL+ ' )'

exec (@SQL)

END 
```

有关更多信息，您可以访问以下链接：

[http://msdn.microsoft.com/en-us/library/ms186981%28SQL.105%29.aspx?PHPSESSID=tn8k5p1s508cop8gr43e1f34d2](http://msdn.microsoft.com/en-us/library/ms186981%28SQL.105%29.aspx?PHPSESSID=tn8k5p1s508cop8gr43e1f34d2)

[http://technet.microsoft.com/en-us/library/ms143432.aspx](http://technet.microsoft.com/en-us/library/ms143432.aspx)

但是请你能告诉这个场景为什么你需要一个有这么多列的表吗？我认为您应该考虑重新设计数据库。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-28T16:16:56.427

这根本不可能。请参阅[存储引擎内部：记录剖析](http://www.sqlskills.com/blogs/paul/post/inside-the-storage-engine-anatomy-of-a-record.aspx)

假设你的桌子是这样的。

```
CREATE TABLE T1(
    col_1 varchar(8000) NULL,
    col_2 varchar(8000) NULL,
    /*....*/
    col_999 varchar(8000) NULL,
    col_1000 varchar(8000) NULL
) 
```

然后，即使是包含所有`NULL`值的行也将使用以下存储。

*   1 字节状态位 A
*   1 字节状态位 B
*   2 字节列计数偏移
*   125 字节`NULL_BITMAP`（`bit`每列 1,000 列）

因此，保证 129 个字节已经用完（剩下 7,931 个）。

如果任何列的值既不是空字符串也不是`NULL`空字符串，那么您还需要空间

*   2 字节可变长度列数（剩余 7,929）。
*   列偏移数组的 2 - 2000 字节之间的任意位置。
*   数据本身。

列偏移数组每个可变长度列消耗 2 个字节，**除非**该列和所有后续列的长度也为零。因此更新`col_1000`将强制使用整个 2000 个字节，而更新 `col_1`将只使用 2 个字节。

因此，您可以用 5 个字节的数据填充每列，并且当考虑到列偏移数组中的每个 2 个字节时，这将加起来 7,000 个字节，这在剩余的 7,929 个字节内。

但是，您要存储的数据是 102 字节（51 个`nvarchar`字符），因此可以使用 24 字节指针将其存储在行外，指向行中剩余的实际数据。

```
FLOOR(7929/(24 + 2)) = 304 
```

因此，最好的情况是您可以存储 304 列的此长度数据，也就是说，如果您从`col_1`、`col_2`、进行更新`...`。如果`col_1000`包含数据，则计算为

```
FLOOR(5929/24) = 247 
```

因为`NTEXT`计算是相似的，除了[它可以使用一个 16 字节的指针](http://www.sqlservercentral.com/Forums/Topic1143500-391-1.aspx)，这将允许您将数据压缩到几个额外的列中

```
FLOOR(7929/(16 + 2)) = 440 
```

需要针对表中的任何对象跟踪所有这些行外指针`SELECT`可能对性能非常不利。

## 测试这个的脚本

```
DROP TABLE T1

/* Create table with 1000 columns*/
DECLARE @CreateTableScript nvarchar(max) = 'CREATE TABLE T1('

SELECT @CreateTableScript += 'col_' + LTRIM(number) + ' VARCHAR(8000),'
FROM master..spt_values
WHERE type='P' AND number BETWEEN 1 AND 1000
ORDER BY number

SELECT @CreateTableScript += ')'

EXEC(@CreateTableScript)

/* Insert single row with all NULL*/
INSERT INTO T1 DEFAULT VALUES

/*Updating first 304 cols succeed. Change to 305 and it fails*/
DECLARE @UpdateTableScript nvarchar(max) = 'UPDATE T1 SET  '

SELECT @UpdateTableScript += 'col_' + LTRIM(number) + ' = REPLICATE(1,1000),'
FROM master..spt_values
WHERE type='P' AND number BETWEEN 1 AND 304
ORDER BY number

SET @UpdateTableScript = LEFT(@UpdateTableScript,LEN(@UpdateTableScript)-1)
EXEC(@UpdateTableScript) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-28T14:36:04.917

拥有 1.000 列的表告诉您数据库设计中有一些非常错误的地方。

我继承了一个项目，其中一张表有超过 500 列，一年多后我仍然无法显着减少它，因为我将不得不重做 90% 的应用程序。

因此，在为时已晚之前重新设计您的数据库。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-28T14:35:01.833

每个“非宽”表的最大列数：1,024 每个“宽”表的最大列数：30,000

尽管您需要每个表的这个数字到底是什么情况？强烈建议对表进行多次垂直分区，以获得更好的性能和更轻松的开发。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-06T06:00:11.363

创建具有 n 列和数据类型 Nvarchar 的表

```
CREATE Proc [dbo].[CreateMaxColTable_Nvarchar500]
(@TableName nvarchar(100),@NumofCols int)
AS
BEGIN

DECLARE @i INT
DECLARE @MAX INT
DECLARE @SQL VARCHAR(MAX)
DECLARE @j VARCHAR(10)
DECLARE @len int
SELECT @i=1
SELECT @MAX=@NumofCols
SET @SQL='CREATE TABLE ' + @TableName + '('

WHILE @i<=@MAX

BEGIN
select @j= cast(@i as varchar)
SELECT @SQL= @SQL+'A'+@j  +' NVARCHAR(500) , '
SET @i = @i + 1
END
select @len=len(@SQL)

select  @SQL = substring(@SQL,0,@len-1)

SELECT @SQL= @SQL+ ' )'

exec (@SQL)

END 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-28T06:11:10.653

请检查您是否真的需要对所有列使用 nvarchar，nvarchar 占用的字节数是 varchar 的两倍，因此在可能的情况下将列转换为 varchar 可以减少行数据大小，并可能帮助您克服此错误。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2015-07-27T22:57:42.550

我们有一个应用程序，它为贷款申请捕获 5000 个字段。所有字段都依赖于一个主键loanid。我们可以将表拆分为多个，但字段也是动态的。管理员还具有创建更多字段的功能。所以一切都是动态的。他们唯一的好处是贷款和字段之间的一对一关系。

所以，最后我们选择了 XML 解决方案。整个数据存储在一个 xml 文档中。最大的灵活性，但难以查询和报告。**

# android - 从其他活动中获取调用活动

> ID：14070933
> 
> 赞同：6
> 
> 时间：2012-12-28T14:24:14.553
> 
> 标签：android, android-activity

我通过这段代码从另一个活动中调用一个活动：

```
Intent intent = new Intent(context, mClass);
context.startActivity(intent); 
```

以及由此代码启动的我的新活动。我想知道哪个活动开始了这个活动。我为此目的使用了这段代码

```
Intent intent = getIntent();
Class<?> c = intent.getClass();
if (c != OffersActivity.class) {
    prepareForNotifications();
    setListAdapter();
} 
```

但是通过这段代码，我无法获得启动此活动的类名。我真的需要一些帮助。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-28T16:42:10.517

有一个方法`getCallingActivity()`，但只有在调用活动调用你时才有效`startActivityForResult()`. 我见过图书馆使用它并说你必须这样称呼它们，但坦率地说这有点讨厌。简单的答案是你不应该知道。Android 是一个松散耦合的活动系统，因此调用活动对您的活动没有实际意义。你的活动需要的任何信息都应该明确地放在意图中，所以如果你真的想知道谁给你打电话，那么调用者需要把这些额外的信息放进去。你当然无法判断他们是否在撒谎，所以不要不要尝试将其用于任何与安全相关的事情。但是，我建议您根据调用者确定的任何内容都是调用者应该传递给您的。可能是时候重新考虑一下为什么要这样做了，因为试图与系统抗争只会导致痛苦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T14:37:06.657

我会建议：

```
public static final String INTENTSENDER = "sender";

void mMethod() {
    Intent intent = new Intent(context, mClass);
    intent.putExtra(INTENTSENDER, mClass);
    context.startActivity(intent);
} 
```

知道是谁寄的：

```
Class<?> c = (Class<?>)intent.getExtras().get(INTENTSENDER); 
```

但是，您也可以使用这个：

```
ComponentName componentName = this.getCallingActivity(); 
```

现在，您可以使用`componentName`来获取意图的发送者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T14:27:33.560

也许最好在调用它们时在意图中使用额外参数......比如：调用者活动上的[Intent.putExtra(PARAM,value)](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20android.os.Bundle%29) ......以及您检查的打开活动：

[意图.getStringExtra(PARAM)](http://developer.android.com/reference/android/content/Intent.html#getStringExtra%28java.lang.String%29)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-03-23T12:20:46.050

getParentActivity() 不是您想要的？

# ruby-on-rails-3 - 表中的 div_for

> ID：14070934
> 
> 赞同：1
> 
> 时间：2012-12-28T14:24:19.733
> 
> 标签：ruby-on-rails-3, html, for-loop

我正在尝试创建一个基于特定模型的所有记录填充的表。

这是 index.html.erb 文件

```
 <%= div_for(@departments, :class => "test") do |department| %>
            <tr>
                <td class="indexc1">
                    <%= department.name %>
                </td>
                <td class="indexc2">
                    <%= department.location %>
                </td>
                <td class="indexc3">
                    <%= department.date_completed %>
                </td>
                <td class="indexc4">
                    <ul class="action">
                        <li><%= link_to 'Edit Info', edit_department_path(department), :class=>"tlink3" %></li>
                        <li><%= link_to 'Edit Tasks', department_path(department), :class=>"tlink3" %></li>
                        <li><%= link_to 'Destroy', department, method: :delete, data: { confirm: 'Are you sure?' }, :class=>"tlink3" %></li>
                    </ul>
                </td>
            </tr>
    <% end %> 
```

这似乎正确地创建了表行，但没有按预期将它们放入 div 中。

我希望能够为每个部门创建一个表行，然后能够使用 AJAX 添加或删除它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T05:19:44.833

如果您希望将每一行包装在一个 div 中，您需要将 div 类和 id 添加到 tr 标签，即：(tr id="myid" class="class") 而不是将 div 包装在tr。

您可以使用 rails content_tag_for 来生成：

```
<% @departments.each do |department| %>
        <%= content_tag_for(:tr, department, :class => "test") do %>
            <td class="indexc1">
                <%= department.name %>
            </td>
            <td class="indexc2">
                <%= department.location %>
            </td>
            <td class="indexc3">
                <%= department.date_completed %>
            </td>
            <td class="indexc4">
                <ul class="action">
                    <li><%= link_to 'Edit Info', edit_department_path(department), :class=>"tlink3" %></li>
                    <li><%= link_to 'Edit Tasks', department_path(department), :class=>"tlink3" %></li>
                    <li><%= link_to 'Destroy', department, method: :delete, data: { confirm: 'Are you sure?' }, :class=>"tlink3" %></li>
                </ul>
            </td>
        <% end %>
<% end %> 
```

# php - Laravel 部分没有出现

> ID：14070936
> 
> 赞同：0
> 
> 时间：2012-12-28T14:24:38.883
> 
> 标签：php, laravel, laravel-3

我将遵循一些关于 Laravel 3 的教程，并且知道，我有一个问题：

```
@section('post_navigation')
@if(Auth::check())
    @include('plugins.loggedin_postnav')
@endif
@endsection 
```

为什么这部分没有出现？

例如，我尝试删除部分中的所有内容；

```
@section('post_navigation')
    <h1>Test</h1>
@endsection 
```

但不起作用。

完整的代码是：

```
<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            {{ HTML::link('/', 'Instapics', array('class' => 'brand')); }}

            <div class="nav-collapse">
                <ul class="nav">
                    @section('navigation')
                        <li class="active">{{ HTML::link('/', 'Home') }}</li>
                    @yield_section
                </ul>
            </div>

            @section('post_navigation')
            @if(Auth::check())
                @include('plugins.loggedin_postnav')
            @endif
            @endsection

        </div>
    </div>
</div> 
```

**[编辑]**
我将@endsection 更改为@yield_section，并且可以工作，但是我仍然不明白，例如（在 User_Controller 索引视图中）：

```
@section('post_navigation')
    @parent
@endsection 
```

为什么不出现包含？

为什么我需要将**endsection**更改为**yield_section**？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-29T12:52:53.367

当您使用@section 时，您定义一个部分，就像定义一个变量一样。然后，您可以在您想要的地方使用它`@yield('sectionname')`（或使用我在第二段中指定的另一种方式）。例如，您可以查看以下内容：

```
@section('scripts')
    <script src="jquery.js"></script>
@endsection

<head>
    @yield('scripts')
</head> 
```

@section / @endsection 和 @section / @yield_section 不一样。@section / @yield_section 定义了一个节区域，而不是一个节。换句话说，它调用了一个变量。实际上它更类似于 yield('sectionname') 而不是 @section / @endsection。它具有默认值作为与产量的主要区别。

您可以定义一个具有默认值的区域，然后您可以通过定义一个部分来更改它。此逻辑主要在创建和使用布局时使用。例如，让下面的页面成为我们的主要 (main.blade.php) 布局。

```
<html>
    <head>
        <title>
        @section('title')
        Default Title Maybe Sitename.com
        @yield_section
        </title>
        @include('scripts')
    </head>
    <body>
        <div id="content">
        @section('content')
            Default content
        @yield_section
        </div>
        <div id="sidebar">
        @section('sidebar')
            <ul id="menu">
                <li><a href="#">Menu item 1</a></li>
                <li><a href="#">Menu item 2</a></li>
                <li><a href="#">Menu item 3</a></li>
                <li><a href="#">Menu item 4</a></li>
            </ul>
        @yield_section
    </body>
</html> 
```

通常不直接使用布局。另一个页面被创建并在页面中指定其布局，如`@layout('main')`. 然后，定义部分，laravel 模板系统更改定义的部分。让这个页面成为我们的帖子（post.blade.php）页面：

```
@layout('main')

@section('title')
$post->title - @parent
@end_section

@section('content')
$post->content
@end_section 
```

如您所见，当我们返回 post view`View::make('profile');`时，布局逻辑将起作用，并且 main.blade.php 中的部分将根据我们在此页面中定义的内容进行更改。因此，输出将是：

```
<html>
    <head>
        <title>
        Post title - Default Title Maybe Sitename.com
        </title>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    </head>
    <body>
        <div id="content">
            Post content
        </div>
        <div id="sidebar">
            <ul id="menu">
                <li><a href="#">Menu item 1</a></li>
                <li><a href="#">Menu item 2</a></li>
                <li><a href="#">Menu item 3</a></li>
                <li><a href="#">Menu item 4</a></li>
            </ul>
    </body>
</html> 
```

顺便说一句，`@parent`在section area中返回默认值，`@include`与php中的include逻辑相同。

祝你今天过得愉快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T14:47:14.040

看来您可能已经找到了答案。但看起来@endsection 在 L4 中已被 @stop 取代。尝试这样的事情：

```
@section('scripts')
    <script src="jquery.js"></script>
@stop 
```

# php - 使用 json_encode 将 MYSQL 日期时间转换为 Javascript 兼容

> ID：14070939
> 
> 赞同：2
> 
> 时间：2012-12-28T14:24:47.673
> 
> 标签：php, mysql, json

> **可能重复：**
> [转换日期格式 yyyy-mm-dd => dd-mm-yyyy](https://stackoverflow.com/questions/2487921/convert-date-format-yyyy-mm-dd-dd-mm-yyyy)

我正在从 MySQL 中提取数据并将其传递给 PHP 页面，其中一部分是[Javascript 时间线图](http://almende.github.com/chap-links-library/js/timeline/doc/)。

我正在使用 json_encode 将查询结果转换为 Javascript 时间线所需的格式。

但是 json_encode 输出以下内容：

```
{"start":"2012-06-06 18:05:21", "content":"Start Date", } 
```

而时间线需要的格式是

```
{"start": new Date(2010,7,23,23,0,0), 'content': "Start Date", } 
```

我可以在之前或作为 json_encode 过程的一部分将输出转换为所需的格式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T14:29:16.653

一般来说，最好在从数据库中提取值之后在 PHP 中执行此操作。

查看给出的答案[Convert date format yyyy-mm-dd => dd-mm-yyyy](https://stackoverflow.com/questions/2487921/convert-date-format-yyyy-mm-dd-dd-mm-yyyy)并根据[http://php.net/date](http://php.net/date)调整参数。

但是，您将无法*完全按照*您的意愿行事，因为 json_encode() 将*始终*将值用引号括起来，并且无法在数据中包含本机 JavaScript 语句。

您最好的选择是将日期转换为格式为 的普通字符串`Month Day, Year Hours:Minutes:Seconds`。

`New Date()`可以理解该格式 - 然后`New Date(data.start)`在提取 JSON 后在 JavaScript 中执行一个操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T14:38:51.863

```
$date = DateTime::createFromFormat('Y-m-d H:i:s', '2012-06-06 18:05:21'); // your original DTO
$newFormat = $date->format('Y,m,d,H,i,s'); // your newly formatted date ready to be substituted into JS new Date();
  unset($date);

$json = json_encode(["start" => $newFormat, 'content' => "Start Date"]); 
```

* * *

在 JS 中你可以做某事。如同：

```
var objectFromJSON = some_json_decode_procedure(); // decoding JSON to native object
var dateArray = objectFromJSON.start.split(','); // splitting string to elements for new Date()
objectFromJSON.start = new Date(dateArray[0], dateArray[1], dateArray[2], dateArray[3], dateArray[4], dateArray[5]); // resetting Date() object in the object 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T15:16:19.857

您可以创建日期

```
var date = new Date("2012-06-06 18:05:21"); 
```

然后尝试以下

```
data.addRow([new Date(date.getYear(),date.getMonth(),date.getUTCDate())]); 
```

# c++ - 如何打印出 C++ 映射值？

> ID：14070940
> 
> 赞同：71
> 
> 时间：2012-12-28T14:24:52.977
> 
> 标签：c++, dictionary, for-loop, printing, std-pair

我有一个`map`这样的：

```
map<string, pair<string,string> > myMap; 
```

我已经使用以下方法将一些数据插入到我的地图中：

```
myMap.insert(make_pair(first_name, make_pair(middle_name, last_name))); 
```

我现在如何打印地图中的所有数据？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-12-28T14:27:35.537

```
for(map<string, pair<string,string> >::const_iterator it = myMap.begin();
    it != myMap.end(); ++it)
{
    std::cout << it->first << " " << it->second.first << " " << it->second.second << "\n";
} 
```

在 C++11 中，您不需要拼写`map<string, pair<string,string> >::const_iterator`. 您可以使用`auto`

```
for(auto it = myMap.cbegin(); it != myMap.cend(); ++it)
{
    std::cout << it->first << " " << it->second.first << " " << it->second.second << "\n";
} 
```

注意使用`cbegin()`和`cend()`功能。

更简单的是，您可以使用基于范围的 for 循环：

```
for(const auto& elem : myMap)
{
   std::cout << elem.first << " " << elem.second.first << " " << elem.second.second << "\n";
} 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-12-28T14:40:58.450

如果您的编译器支持（至少部分）C++11，您可以执行以下操作：

```
for (auto& t : myMap)
    std::cout << t.first << " " 
              << t.second.first << " " 
              << t.second.second << "\n"; 
```

对于 C++03，我会使用`std::copy`插入运算符：

```
typedef std::pair<string, std::pair<string, string> > T;

std::ostream &operator<<(std::ostream &os, T const &t) { 
    return os << t.first << " " << t.second.first << " " << t.second.second;
}

// ...
std:copy(myMap.begin(), myMap.end(), std::ostream_iterator<T>(std::cout, "\n")); 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2019-03-21T10:48:33.280

从[C++17 开始](https://en.wikipedia.org/wiki/C%2B%2B17)，您可以使用[基于范围的 for 循环](https://en.cppreference.com/w/cpp/language/range-for)和[结构化绑定](https://en.cppreference.com/w/cpp/language/structured_binding)来迭代您的地图。这提高了可读性，因为您减少了代码中所需`first`和`second`成员的数量：

```
std::map<std::string, std::pair<std::string, std::string>> myMap;
myMap["x"] = { "a", "b" };
myMap["y"] = { "c", "d" };

for (const auto &[k, v] : myMap)
    std::cout << "m[" << k << "] = (" << v.first << ", " << v.second << ") " << std::endl; 
```

输出：

> m[x] = (a, b)
> m[y] = (c, d)

[Coliru 上的代码](http://coliru.stacked-crooked.com/a/c8e9c61e4995488e)

# r - 照片与 r 中的图形对齐

> ID：14070953
> 
> 赞同：26
> 
> 时间：2012-12-28T14:26:14.970
> 
> 标签：r, ggplot2, photo, ggtext

首先我认为我需要在 powerpoint 中手动进行，然后我想可以尝试使用 R，如果有解决方案。这是我的示例数据：

```
set.seed(123)
myd<- expand.grid('cat' = LETTERS[1:5], 'cond'= c(F,T), 'phase' = c("Interphase", "Prophase", "Metaphase", "Anaphase", "Telophase"))
myd$value <- floor((rnorm(nrow(myd)))*100)
myd$value[myd$value < 0] <- 0

require(ggplot2)
ggplot() +
  geom_bar(data=myd, aes(y = value, x = phase, fill = cat), stat="identity",position='dodge') +
  theme_bw() 
```

以下是输出的样子： ![在此处输入图像描述](../Images/e1c3ce8363c0f729e557a942d2d62389.png)

jpeg 图像可以随机生成（用于演示示例）或链接中的示例图：

[间期](http://www.microbehunter.com/wp/wp-content/uploads/2009/lily_interphase.jpg) [前期](http://www.microbehunter.com/wp/wp-content/uploads/2009/lily_prophase.jpg)、[中期](http://www.microbehunter.com/wp/wp-content/uploads/2009/lily_metaphase2.jpg)、[后期](http://www.microbehunter.com/wp/wp-content/uploads/2009/lily_anaphase2.jpg)、[末期](http://www.microbehunter.com/wp/wp-content/uploads/2009/lily_telophase.jpg)

编辑：

建议@bapste

![在此处输入图像描述](../Images/e6bc418cb90a28662ded97b0c0bb3a61.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-29T03:14:01.823

您可以为 创建自定义元素函数`axis.text.x`，但它非常繁琐且令人费解。过去也提出过类似的要求，如果有一个干净的解决方案来解决这个和其他自定义更改（条形标签、轴等）功能请求，有人吗？

![在此处输入图像描述](../Images/8f1da3def86fe4f5a7e014473664f746.png)

```
library(jpeg)
img <- lapply(list.files(pattern="jpg"), readJPEG )
names(img) <- c("Anaphase", "Interphase", "Metaphase", "Prophase", "Telophase")

require(ggplot2)
require(grid)

# user-level interface to the element grob
my_axis = function(img) {
    structure(
      list(img=img),
      class = c("element_custom","element_blank", "element") # inheritance test workaround
    )
  }
# returns a gTree with two children: the text label, and a rasterGrob below
element_grob.element_custom <- function(element, x,...)  {
  stopifnot(length(x) == length(element$img))
  tag <- names(element$img)
  # add vertical padding to leave space
  g1 <- textGrob(paste0(tag, "\n\n\n\n\n"), x=x,vjust=0.6)
  g2 <- mapply(rasterGrob, x=x, image = element$img[tag], 
               MoreArgs = list(vjust=0.7,interpolate=FALSE,
                               height=unit(5,"lines")),
               SIMPLIFY = FALSE)

  gTree(children=do.call(gList,c(g2,list(g1))), cl = "custom_axis")
}
# gTrees don't know their size and ggplot would squash it, so give it room
grobHeight.custom_axis = heightDetails.custom_axis = function(x, ...)
  unit(6, "lines")

ggplot(myd) +
  geom_bar(aes(y = value, x = phase, fill = cat), stat="identity", position='dodge') +
  theme_bw() +
  theme(axis.text.x = my_axis(img),
          axis.title.x = element_blank())

ggsave("test.png",p,width=10,height=8) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-28T15:32:10.033

使用`grid`包，并使用视口，你可以拥有这个

![在此处输入图像描述](../Images/91fed0cb4acdd435ddf1377b65547b4d.png)

```
## transform the jpeg to raster grobs
library(jpeg)
names.axis <-  c("Interphase", "Prophase", "Metaphase", "Anaphase", "Telophase")
images <- lapply(names.axis,function(x){
  img <- readJPEG(paste('lily_',x,'.jpg',sep=''), native=TRUE)
  img <- rasterGrob(img, interpolate=TRUE)
  img
  } )
## main viewports, I divide the scene in 10 rows ans 5 columns(5 pictures)
pushViewport(plotViewport(margins = c(1,1,1,1),
             layout=grid.layout(nrow=10, ncol=5),xscale =c(1,5)))
## I put in the 1:7 rows the plot without axis
## I define my nested viewport then I plot it as a grob.
pushViewport(plotViewport(layout.pos.col=1:5, layout.pos.row=1:7,
             margins = c(1,1,1,1)))
pp <- ggplot() +
  geom_bar(data=myd, aes(y = value, x = phase, fill = cat), 
                 stat="identity",position='dodge') +
  theme_bw()+theme(legend.position="none", axis.title.y=element_blank(),
                   axis.title.x=element_blank(),axis.text.x=element_blank())
gg <- ggplotGrob(pp)
grid.draw(gg)
upViewport()
## I draw my pictures in between rows 8/9 ( visual choice)
## I define a nested Viewport for each picture than I draw it.
sapply(1:5,function(x){
  pushViewport(viewport(layout.pos.col=x, layout.pos.row=8:9,just=c('top')))
  pushViewport(plotViewport(margins = c(5.2,3,4,3)))
  grid.draw(images[[x]])
  upViewport(2)
  ## I do same thing for text 
  pushViewport(viewport(layout.pos.col=x, layout.pos.row=10,just=c('top')))
  pushViewport(plotViewport(margins = c(1,3,1,1)))
    grid.text(names.axis[x],gp = gpar(cex=1.5))
  upViewport(2)
})
pushViewport(plotViewport(layout.pos.col=1:5, layout.pos.row=1:9,
             margins = c(1,1,1,1)))
grid.rect(gp=gpar(fill=NA))
upViewport(2) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-06-04T19:22:21.817

我现在将使用 ggtext 包执行此操作。这在概念上类似于[此处建议](https://stackoverflow.com/a/14078391/4975218)的解决方案，但在包中完成了艰苦的工作。

```
library(tidyverse)
library(ggtext)

set.seed(123)

data <- expand.grid(
  cat = LETTERS[1:5],
  cond= c(FALSE, TRUE),
  phase = c("Interphase", "Prophase", "Metaphase", "Anaphase", "Telophase")
) %>%
  mutate(
    value = floor(rnorm(n())*100),
    value = ifelse(value < 0, 0, value)
  )

# images from: http://www.microbehunter.com/mitosis-stages-of-the-lily/

labels <- c(
  Interphase = "<img src='img/interphase.jpg' width='60' /><br>Interphase",
  Prophase = "<img src='img/prophase.jpg' width='60' /><br>Prophase",
  Metaphase = "<img src='img/metaphase.jpg' width='60' /><br>Metaphase",
  Anaphase = "<img src='img/anaphase.jpg' width='60' /><br>Anaphase",
  Telophase = "<img src='img/telophase.jpg' width='60' /><br>Telophase"
)

ggplot(data, aes(phase, value, fill = cat)) +
  geom_col(position = "dodge") +
  scale_x_discrete(name = NULL, labels = labels) +
  theme(axis.text.x = element_markdown(lineheight = 1.2)) 
```

![](../Images/4726624d9ac79c2967e2618d157c58c7.png)

^(由[reprex 包](https://reprex.tidyverse.org)（v0.3.0）于 2020 年 1 月 29 日创建)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-06-10T19:29:51.537

**注意：我现在推荐[这里描述的方法。](https://stackoverflow.com/a/30652364/4975218)它更有原则，更容易理解。**

`axis_canvas()`使用 cowplot 包中可用的函数，特别是and函数，生成这样的图形变得相对简单`insert_xaxis_grob()`。（免责声明：我是包作者。）

```
require(cowplot)

# create the data
set.seed(123)
myd <- expand.grid('cat' = LETTERS[1:5], 'cond'= c(F,T), 'phase' = c("Interphase", "Prophase", "Metaphase", "Anaphase", "Telophase"))
myd$value <- floor((rnorm(nrow(myd)))*100)
myd$value[myd$value < 0] <- 0

# make the barplot
pbar <- ggplot(myd) +
  geom_bar(aes(y = value, x = phase, fill = cat), stat="identity", position='dodge') +
  scale_y_continuous(limits = c(0, 224), expand = c(0, 0)) +
  theme_minimal(14) +
  theme(axis.ticks.length = unit(0, "in"))

# make the image strip
pimage <- axis_canvas(pbar, axis = 'x') + 
  draw_image("http://www.microbehunter.com/wp/wp-content/uploads/2009/lily_interphase.jpg", x = 0.5, scale = 0.9) +
  draw_image("http://www.microbehunter.com/wp/wp-content/uploads/2009/lily_prophase.jpg", x = 1.5, scale = 0.9) +
  draw_image("http://www.microbehunter.com/wp/wp-content/uploads/2009/lily_metaphase2.jpg", x = 2.5, scale = 0.9) +
  draw_image("http://www.microbehunter.com/wp/wp-content/uploads/2009/lily_anaphase2.jpg", x = 3.5, scale = 0.9) +
  draw_image("http://www.microbehunter.com/wp/wp-content/uploads/2009/lily_telophase.jpg", x = 4.5, scale = 0.9)

# insert the image strip into the bar plot and draw  
ggdraw(insert_xaxis_grob(pbar, pimage, position = "bottom")) 
```

[![在此处输入图像描述](../Images/c1235d4563f6562b65295b0c13de9e03.png)](https://i.stack.imgur.com/59ufP.png)

我在这里直接从网上读取图像，但该`draw_image()`功能也适用于本地文件。

从理论上讲，应该可以使用`geom_image()`ggimage 包中的图像条来绘制图像条，但是如果图像不失真，我就无法让它工作，所以我使用了 5 次`draw_image()`调用。

# algorithm - 如何计算 C(n, k) % 3？

> ID：14070956
> 
> 赞同：3
> 
> 时间：2012-12-28T14:26:34.953
> 
> 标签：algorithm, modulo, number-theory, binomial-coefficients

**更新： C(n, k) 表示`Binomial Coefficient`**

我正在处理一个数论问题。我已经把大问题变成了一个简单的问题： **如何计算`C(n,k)%3`，其中 n<=10^15。**大约`m ( <= 10 000 )`需要在**1 秒**内计算的数据集。

我解决它的方法是使用[`Lucas' theorem`](http://en.wikipedia.org/wiki/Lucas%27_theorem). 是`O(m log n)`。而且它的速度足以解决问题。但我想知道**这个问题是否有更好的解决方案，甚至是`n <= 10^100`or`m <= 1 000 000`**？

非常感谢！

# ios - Xcode 界面生成器自动布局垂直间距

> ID：14070958
> 
> 赞同：1
> 
> 时间：2012-12-28T14:26:40.613
> 
> 标签：ios, xcode, interface-builder, autolayout

当我在界面生成器中选择两个组件并指定它们之间的垂直间距自动布局约束时，我如何控制它是从一个到另一个的顶部空间还是底部空间？这个值似乎是为一组给定的组件任意选择的，首先选择一个或另一个对改变这一点没有影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-28T15:24:36.320

要在 Interface Builder (Xcode 5) 中为视图对象之间的**约束提供更多约束选项：**

而不是在画布上 ctrl-drag 从一个视图对象到另一个视图对象 ctrl-drag 从**Document Outline**中的一个视图到另一个视图。这会打开约束选项，例如*Top*、*Center Y*、*Baseline*和*Bottom*

![文档大纲中的约束选项](../Images/2176984964b41322407552a269ab3845.png)**文档大纲** 中的约束选项

 **对比

![画布上的约束选项](../Images/05de61bee32032eedc500d9b76c8ffea.png)

**画布**上的约束选项**

# php - 代码在撇号前添加反斜杠

> ID：14070961
> 
> 赞同：1
> 
> 时间：2012-12-28T14:26:46.667
> 
> 标签：php, apostrophe

例如，我写了这个文本是**我不知道**的并将其提交到数据库。然后我转到页面，显示此文本并显示**我不知道**，如何禁用添加反斜杠？

代码

```
$text= htmlspecialchars($db['text']);
$textA = array('/\[b\](.*?)\[\/b\]/is');
$textB = array('<b>$1</b>'); 
$textC = preg_replace($textA,$textB,$text);
echo nl2br($textC); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T14:27:43.010

关闭[magic_quotes_gpc](http://php.net/manual/en/security.magicquotes.disabling.php)并确保在保存到数据库之前没有使用[addlashes](http://php.net/addslashes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T14:27:53.230

通过添加以下行来关闭文件中的**magic_quotes ：**`.htaccess`

```
php_flag magic_quotes_gpc Off 
```

# apache-flex - Flex4 taborder 不工作

> ID：14070964
> 
> 赞同：0
> 
> 时间：2012-12-28T14:26:57.210
> 
> 标签：apache-flex, flex4, tab-ordering

when having several elements like radiobuttons, which - when selected - have additional fields the tab ordering is not properly working. 事实上（在我的项目中）选项卡被“夹在”单选按钮和一个日期字段之间。

![三个带有附加输入元素的单选按钮](../Images/100a7bb4cdfd2e12ef2da5180a2ee0c3.png)

这是一个无法正常工作的最小示例。如果您运行该示例并按制表符浏览所有字段，则制表位在第一个单选按钮 (=ok) 处停止，然后在日期字段上停止 (=ok，因为所有单选按钮都应被视为一个制表位)。但是如果您再次按 Tab，它会跳转到第三个单选按钮（=false，因为已经到达第一个单选按钮）并最终到达文本输入（=ok）。

在我的项目中，有更复杂的形式和更奇怪的行为。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx">
    <s:VGroup>
        <s:RadioButton label="use no data"/>
        <s:HGroup>
            <s:RadioButton label="use date"/>
            <mx:DateField  />
        </s:HGroup>
        <s:HGroup>
            <s:RadioButton label="use text"/>
            <s:TextInput />
        </s:HGroup>
    </s:VGroup>
</s:Application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:26:57.210

我的解决方案是给出 tabIndex 值，其中 radiobutton-tabIndex-values 都在其余元素的值之前（在本例中为 datefield + textinput）

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" >
    <s:VGroup>
        <s:RadioButton label="use no data" tabIndex="1" />
        <s:HGroup>
            <s:RadioButton label="use date" tabIndex="2" />
            <mx:DateField tabIndex="100" />
        </s:HGroup>
        <s:HGroup>
            <s:RadioButton label="use text" tabIndex="3" />
            <s:TextInput tabIndex="101" />
        </s:HGroup>
    </s:VGroup>
</s:Application> 
```

# javascript - Ajax 调用无法在 Windows phone 8 和 Cordova 2.3.0rc2 中调用本地文件

> ID：14070968
> 
> 赞同：1
> 
> 时间：2012-12-28T14:27:05.387
> 
> 标签：javascript, ajax, cordova, windows-phone-8

我有一个内置在 PhoneGap 中的 WebApp。我阅读[了这篇文章，因此我尝试将我的应用程序移植到 Windows Phone 8 并按照](http://www.risingj.com/archives/374)[此处](http://blogs.msdn.com/b/interoperability/archive/2012/12/21/how-to-develop-for-windows-phone-8-on-your-mac.aspx)的入门指南进行操作。

我正在使用 Marionette.js 和 Cordova 2.3.0rc2。我在这里有一个ajax调用。

```
 $.ajax({
    url : urlTemp + templateId + ".html",  //This refers to a file in my local file system
    data : {},
    success : function(data) {
      App.templates[templateId] = data;
      callback.call(this, data);
    },
    error : function(err) {
      alert('ERROR LOG: Error loading Template for: ' + urlTemp + templateId + ".html");
    },
    dataType : 'text'
  }); 
```

不知何故，这总是出错。这在 Android 和 IOS 中运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:44:44.823

尝试`x-wmapp0://www/`在本地文件的路径之前添加。就我而言，它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T20:49:51.917

如果它只是一个本地文件，您也许可以使用 FileReader API 而不是 AJAX 请求来读取文件数据。

[http://docs.phonegap.com/en/2.2.0/cordova_file_file.md.html#FileReader](http://docs.phonegap.com/en/2.2.0/cordova_file_file.md.html#FileReader)

编辑：刚刚注意到您说您使用的是 2.3.0。删除我在 2.2 中尚不支持的评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-13T06:50:34.140

正如 WP8 中其他帖子中所建议的那样，在调用 ajax 时，本地文件的路径必须是绝对的。所以你需要在你的路径中有“www/”。而不是调用“test.html”，您必须调用“www/test.html”才能使 ajax 调用起作用。

我想出了以下解决方案：

1）首先您需要安装“设备插件”，以便仅在 WP 上执行此代码

2）然后我们只需在每个本地路径之前添加“www /”，每次进行ajax调用时

**这仅在您所有被调用的本地文件都位于根“www”文件夹中时才有效**

**如果您使用 jquery mobile 并将一些 html 文件存储在子文件夹中，此代码将使这些文件无法访问，因此您必须对其进行调整**

初始化phonegap（和jquery mobile）后必须执行以下代码：

```
if (typeof device !== "undefined") {    
    PLATFORM = device.platform.toLowerCase();
    if (PLATFORM == 'win32nt' || PLATFORM == 'wince') {         
        $(document).ajaxSend(function (event, jqxhr, settings) {
            if (settings.url.indexOf("http") !== 0) {
                var parts = settings.url.split("/");
                settings.url = "www/" + parts[parts.length - 1];
            }           
        });         
    }
} 
```

# c++ - 模板 - 传递变量而不是值

> ID：14070969
> 
> 赞同：0
> 
> 时间：2012-12-28T14:27:06.523
> 
> 标签：c++, templates

我有一个模板：

```
template<unsigned int N> struct IntN;

template <> struct IntN< 8> {
   typedef uint8_t type;
}; 

template <> struct IntN<16> {
   typedef uint16_t type;
}; 
```

我主要通过这样做来初始化和替换：

```
IntN< 8>::type c; 
```

这似乎有效，但是，当我将值存储在变量中时，它不起作用，并且出现以下错误：

> 错误：“int”类型的非类型模板参数不是整数常量表达式

以下是代码示例：

```
template<unsigned int N> struct IntN;

template <> struct IntN< 8> {
  typedef uint8_t type;
};

template <> struct IntN<16> {
   typedef uint16_t type;
};

int main(int argc, char *argv[]) {
int foo = 8;

IntN<foo>::type c;
} 
```

有没有人有任何想法？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T14:29:50.453

整数模板参数的模板参数必须是常量表达式。整型文字是常量表达式

```
IntN<8>::type c; 
```

用常量表达式初始化的常量变量是常量表达式

```
const int n = 8;
IntN<n>::type c; 
```

这里 n 可以，因为它既是 const 又是由常量表达式 (8) 初始化的。以下内容不会编译：

```
int n = 8;
const int m = n;
IntN<n>::type c; //error n is not const therefore not a constant expression
IntN<m>::type c; //error m is const but initialized with a non-constant expression therefore not a constant expression 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:28:59.210

函数模板是一个**蓝图**，它告诉编译器在实例化函数**时**（即在代码中使用模板函数时）**如何**为函数生成代码。

 **编译器将生成的确切**内容**取决于模板参数的实例化值。那时必须知道并最终确定这些值，否则编译器不知道要生成什么代码。**

# javascript - 复杂的构建/项目管理

> ID：14070971
> 
> 赞同：2
> 
> 时间：2012-12-28T14:27:14.203
> 
> 标签：javascript, git, version-control, repository, project-management

我的公司正在使用 GIT 重组我们的存储库。基本上，我们将拥有：

*   (A) Master Repo，它是我们构建的生产部署的未构建镜像
*   (B) 用于修补程序的持续集成分支，
*   (C) 用于主要/次要更新的发布分支
*   (D) 长期特征分支

它需要如何工作：

*   (A) 将是我们的主副本。除了 beta 测试人员之外，每个人都将始终使用 (A) 的构建版本。
*   (B) 将是包含修补程序的每晚或即时更新（视需要而定）。(B) 将通过单元测试，然后进行走廊测试。当 (B) 完成测试时，需要将其合并到 (A) 以及 (C) 和 (D) 中，以便所有并发开发都有最新的 bug 修复。
*   (C) 将每月发布。它将进行单元测试（就像所有东西一样）、走廊测试，然后在登台服务器（测试版）上进行用户测试。
*   （D）理论上会被折叠成（C）并在里面释放。

我目前正在开发一个使用 Apache Ant 和 Ivy 的工具来自动化这个过程以及构建。东西将被推入（A），同时它也被构建并推入生产。此过程将运行 e2e 测试，如果成功，将继续自动化文档、编译源代码并将构建的产品部署到生产中。真正的挑战在于弄清楚如何平衡所有这些不同的过程。

现在，关于这个问题。我需要知道的是是否有任何开发“模型”可以处理这种模式，这样我们就不会重新发明轮子。

我们谈论的技术是 HTML5、CSS3、JavaScript，通过 websocket 连接到运行在 NodeJS 上的后端。提前致谢。

**编辑**

此外，如果有任何不涉及存储库的方法（例如代码管理工具），我很想知道。再次感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T14:47:03.733

检查[git-flow](http://nvie.com/posts/a-successful-git-branching-model/)，它描述了一个与您想要的类似的工作流程（我认为有点复杂）。

# android - 如何在特定时间收到通知

> ID：14070974
> 
> 赞同：0
> 
> 时间：2012-12-28T14:27:23.623
> 
> 标签：android, publish-subscribe

我想实施一个系统，以便在特定时间得到通知。即使用户没有使用该应用程序，这也应该发生。有没有我必须订阅的“安卓服务”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:28:53.183

使用[`AlarmManager`](http://developer.android.com/reference/android/app/AlarmManager.html). 粗略地说，它类似于**`cron`**OS X/Linux。

# javascript - 如何检查互联网连接而无需刷新我的整个页面

> ID：14070980
> 
> 赞同：0
> 
> 时间：2012-12-28T14:27:54.887
> 
> 标签：javascript, refresh

我希望每 x 秒调用一次以下函数，因此我不必刷新页面。

```
var rq = new XMLHttpRequest();
rq.open('GET', "SAME DOMAIN ADDRESS", true);
rq.onreadystatechange = function() {
    if(rq.readyState === 4) {
        if(rq.status === 200) {
      clearTimeout(xmlHttpTimeout); 
window.location.href = "Tracker.html"; // if internet connection found, redirect.
        } else {
        }
    }
};
rq.send(""); 
var xmlHttpTimeout=setTimeout(ajaxTimeout,5000);
function ajaxTimeout(){
   rq.abort();
// IF no internet connection found, call this whole javascript function/code AGAIN in 5 seconds! to check for internet connection
} 
```

基本上，我想检查互联网连接而不必刷新我的整个页面 - 如果有，然后重定向到`Tracker.html`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:36:37.950

最好的方法是使用`setTimeout`：

```
function callMe() {
  // Some Code
  setTimeout(callMe, 1000);
}

callMe(); 
```

您的代码将如下所示：

```
var rq = new XMLHttpRequest();

rq.onreadystatechange = function() {
  if(rq.readyState === 4) {
    if(rq.status === 200) {
      window.location.href = "Tracker.html"; // if internet connection found, redirect.
    } else {
      setTimeout(rq.send, 5000);
    }
  }
};

rq.send(); 
```

如果您想检查客户端是否已连接，您还可以使用[此处](https://developer.mozilla.org/en-US/docs/Online_and_offline_events)描述的新在线和离线事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T14:36:50.817

检查`navigator.onLine`是真还是假。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-14T08:57:04.400

ajax 解决方案只能在同一个域上工作。但是，在同一个域上，您可能不需要测试服务器是否在线。使用 navigator.onLine 它将指示 Internet 是否可访问，但仍然无法访问相应的服务器。

诀窍是尝试加载目标服务器的图像并在出错时在 5 秒后重试。当图像加载成功后，就可以进行重定向了。

```
<html>
  <header>
  </header>
  <body>
    <script type="text/javascript">
    var img = new Image();
    var ping = function() { img.src = "http://www.somedomain.com/valid_image.jpg"; }
    ping();

    img.onerror = function(e) {
      console.log('error');
      setTimeout(function() {
        ping();
      }, 5000);
    }

    img.onload = function(e) {
      console.log('YES');
      window.location.href = "http://www.google.com"; 
    }
    </script>

  </body>
</html> 
```

# python - Python变量条件测试失败

> ID：14070984
> 
> 赞同：1
> 
> 时间：2012-12-28T14:28:22.410
> 
> 标签：python, if-statement

我有一个我编写的 python 脚本，可以将我连接到 VPN。在此之前，它会测试我的外部 IP，并将输出记录为变量“originip”，然后连接到我的 vpn，并再次运行测试。它显示我的 originip，然后是我的 newip，然后它运行一个条件，如果测试 origin ip 和 newip 是否相同，然后说有错误。稍后我将在那里添加其他逻辑。目前，该程序运行良好，但它总是打印“出现错误，正在重置”，而不是转到 Else 行并打印“您现在已成功连接”

我认为我的 if 逻辑有问题：

```
if newip and originip == originip:
    print "there was an error, resetting..."
else:
    print "You are now connected successfully" 
```

所以我已经测试了上面，当我的VPN连接正常时，它报告新IP地址和旧IP地址不同，然后打印“出现错误，正在重置”如果它连接，并显示newip和originip相同，它还会打印“出现错误，正在重置...”

我无法让它执行上述语句的 else 部分。

这是程序的整个 python 端

```
#!/usr/bin/env python
import pexpect
import sys
import os
import time
import subprocess
secdelay = int(raw_input("How many seconds before resetting? "))
p = subprocess.Popen(["./checkmyip.sh"], shell=False, stdout=subprocess.PIPE)
originip = p.stdout.read()
print 'Public IP Address is', originip
child = pexpect.spawn ('./vpn.sh -arg1')
child.expect ('')
child.expect ('(?i)Enter Aut Username:')
child.sendline ('myusername')
child.expect ('(?i)Enter Auth Password:')
child.sendline ('mypassword')
print "Establishing connection..."
time.sleep(10)
p = subprocess.Popen(["./checkmyip.sh"], shell=False, stdout=subprocess.PIPE)
newip = p.stdout.read()
print "The New IP is ",newip
print "the old IP was ", originip
if newip and originip == originip:
    print "there was an error, resetting..."
else:
    print "You are now connected successfully"
print "sleeping for ",secdelay," seconds"
time.sleep(secdelay)
child.sendcontrol('c')
if child.isalive():
    child.sendcontrol('c')
    child.close()
if child.isalive():
    print 'Child did not exit gracefully.'
else:
    print 'Child exited gracefully.' 
```

最后，这是我添加到“checkmyip.sh”脚本中的代码。这只是一个简单的 wget：

```
#!/usr/bin/env bash
wget -q -O - checkip.dyndns.org|sed -e 's/.*Current IP Address: //' -e 's/<.*$//' 
```

所以脚本工作正常，只是这个错误检查逻辑让我感到困惑。为什么我的 if x 和 y == x 不起作用，当 x 和 y 都在我的 if 语句正上方的打印行中枚举不同的值时，我很困惑。

任何建议或帮助将不胜感激。谢谢阅读！

感谢大家的帮助！固定代码是这样的：

```
if newip and originip == originip: 
```

改为

```
if newip == originip: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T14:31:52.690

是的，条件`originip == originip`总是为真。

因此，如果`newip`不为空，则整个表达式`newip and originip == originip`也将为 True：

```
>>> originip = 'foo'
>>> originip == originip
True
>>> newip = ''
>>> newip and originip == originip
False
>>> newip = 'bar'
>>> newip and originip == originip
True 
```

你的意思是：

```
if newip and newip == originip: 
```

反而？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T14:32:23.910

试试这个：

```
if newip == originip:
    print "there was an error, resetting..." 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T14:31:35.487

```
>if newip and originip == originip: 
```

您正在测试“布尔”值，`newip` **然后**您正在测试是否`originip`等于自身，这始终是正确的。

你可能的意思是：

```
if newip == originip: 
```

# drupal - 获取表单数组中 CCK 字段的随机路径层次结构

> ID：14070996
> 
> 赞同：0
> 
> 时间：2012-12-28T14:29:54.383
> 
> 标签：drupal, drupal-7, drupal-modules, cck

我创建了一个自定义实体，并且正在使用 CCK 字段。每个捆绑包都有自己的字段。例如：

```
function MYMODULE_install() {
  // Check if our field is not already created.
  if (!field_info_field('field_myField')) {
    $field = array(
        'field_name' => 'date_field',
        'type' => 'list_text',
    );
    field_create_field($field);
}

//Enable is executed only once.
function bundle_callback_enable() {

     // Create the instance on the bundle.
    $instance = array(
        'field_name' => 'date_field',
        'entity_type' => 'payment_method',
        'label' => 'Expiration Date',
        'bundle' => 'card',
        'required' => TRUE,
        'settings' => array();

    field_create_instance($instance);
} 
```

我的包是从单个模块创建的，所以在每个安装文件中我都创建了相应的字段。

昨天我试图在这些字段中添加验证回调函数，我在表单数组中看到了一些奇怪的东西。type="text" 的字段具有以下路径：

```
$form[field_name]['und'][0][value] //<! expectable 
```

但 type='list_text' 的字段只有路径：

```
$form[field_name]['und'] //<! unexpectable 
```

我找不到任何解决方案，我已经解决了这个问题：

```
function &get_cck_path_value( $field_name, &$form_path) {

  $field = null
  if ( isset( $form_path[$field_name][LANGUAGE_NONE] ) ) {
     $field = &$form_path[$field_name][LANGUAGE_NONE]
  }elseif(isset($form_path[$field_name][LANGUAGE_NONE][0])) {
    $field =  &$form_path[$field_name][LANGUAGE_NONE][0]['value'];
  }
  return $field;
} 
```

我不喜欢这种方法。太牛逼了。你能告诉我这是一个 cck 功能还是错误？我无法理解它何时决定将值放在哪里（所有过程都通过“field_attach_form（...）”完成）？

你有遇到过这样的问题吗？

提前致谢。

桑登姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T07:25:45.547

我相信您在验证中看到了缩写的表单字段，因为该字段没有输入任何值，也没有为其定义默认值。没有值，因此不存在用于存储值的数组。

# spring-mvc - 为 @Autowired jdbcTemplate 和 h2 内存数据库多次执行 runscript

> ID：14070997
> 
> 赞同：3
> 
> 时间：2012-12-28T14:29:54.973
> 
> 标签：spring-mvc, h2

我继承了一个项目，并正在尝试针对内存中的 h2 数据库运行一组集成测试。为了让他们传递一些表，需要创建关系和参考数据。

我可以看到其中引用的脚本`RUNSCRIPT`被多次执行并因此产生`Index "XXX_IDX" already exists`错误和其他违规行为的问题。那么有没有办法强制脚本只运行一次，还是我需要一个外部数据库？似乎该脚本在我认为是[**设计**](http://h2database.com/html/features.html#execute_sql_on_connection)使然的每个连接上运行。

**属性文件**

```
my.datasource.url=jdbc:h2:mem:my_db;DB_CLOSE_DELAY=-1;MODE=Oracle;MVCC=TRUE;INIT=RUNSCRIPT FROM 'classpath:/create-tables-and-ref-data.sql' 
```

**XML 配置**

```
<bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="url" value="${my.datasource.url}"/>
    <!-- other properties for username, password etc... -->
</bean>

<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="myDataSource"/>
</bean>

<bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
    <property name="dataSource" ref="myDataSource"/>
</bean>

<tx:annotation-driven transaction-manager="transactionManager"/> 
```

**以下模式中的许多 Java 类**

```
@Component
public class SomethingDAOImpl implements SomethingDAO {
  @Autowired
  public SomethingDAOImpl(JdbcTemplate jdbcTemplate) {
    this.jdbcTemplate = jdbcTemplate;
  }
}

@Component
public class SomethingElseDAOImpl implements SomethingElseDAO {
  @Autowired
  public SomethingElseDAOImpl(JdbcTemplate jdbcTemplate) {
    this.jdbcTemplate = jdbcTemplate;
  }
} 
```

默认 bean 范围是单例的，我认为这会起作用，但我想我错过了一些东西。此外，如果我切换到已经设置了表和参考数据的真实 Oracle 实例，则测试全部通过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T20:20:39.683

在许多情况下，可以编写 SQL 脚本以便不引发异常：

```
create table if not exists test(id int, name varchar(255));
create index if not exists test_idx on test(name); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:12:34.167

我最终使用了另一种方法，因为我无法以可以重新应用而不会出错的方式编写 SQL。

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
    http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd">

    <jdbc:initialize-database data-source="myDataSource" enabled="true" ignore-failures="ALL">
        <jdbc:script location="classpath:create-and-alter-tables-first-then-add-test-data.sql" />
    </jdbc:initialize-database>
</beans> 
```

在上下文初始化时执行一次。

*注意：为简洁起见，省略了其他名称空间和 bean。*