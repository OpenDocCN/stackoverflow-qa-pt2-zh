# StackOverflow 问答 15386000-15386999

# mysql - “字段列表”中的未知列“操作”

> ID：15386003
> 
> 赞同：-1
> 
> 时间：2013-03-13T12:57:02.650
> 
> 标签：mysql, sql, phpmyadmin

我在 myphpadmin 上有一个数据库，我尝试进行简单的更新，但我一直收到同样的错误。我在互联网上查了一段时间，但没有任何帮助。我试试这个

```
UPDATE `employees` SET `FirstName`= "Mike" where 1 
```

员工有属性里面的名字有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:29:58.453

假设有一个employee_id 列，试试；

```
UPDATE `employees` SET `FirstName`= "Mike" where employee_id = 1 
```

只需使用正确的列名:)

# c# - 进程运行批处理，其中不执行内部操作

> ID：15386009
> 
> 赞同：1
> 
> 时间：2013-03-13T12:57:14.677
> 
> 标签：c#, process, batch-processing

我已经搜索了很多在 c# 中使用进程运行批处理文件的方法，但它们都没有帮助我。

批处理文件的操作是：使用 psexec，它连接到远程控制并在那里停止一些服务。之后它会删除很多文件，然后复制新文件，再次连接，使用 psexec 连接到计算机并启动服务。

当我自己执行批处理时，所有这些操作都需要一段时间。但是当我使用 process 执行批处理文件时，它会在 5 秒内完成并显示它应该的所有输出。我发现它什么也没做。只需显示成功完成后应该执行的输出即可。

我正在使用此代码执行批处理

```
batch = new Process();
batch.StartInfo.FileName = batchPath;
batch.StartInfo.UseShellExecute = false;
batch.StartInfo.RedirectStandardOutput = true;
batch.StartInfo.CreateNoWindow = true;
batch.OutputDataReceived +=  new DataReceivedEventHandler(IncomingOutput);
batch.Start();
batch.BeginOutputReadLine();
batch.WaitForExit(TimeWait * 1000);
batch.CancelOutputRead(); 
```

我究竟做错了什么？

# macos - OSX 以编程方式打开停靠菜单

> ID：15386019
> 
> 赞同：2
> 
> 时间：2013-03-13T12:57:49.943
> 
> 标签：macos, cocoa, dock

我已将自定义项目添加到我的应用程序的停靠菜单中，当右键单击停靠栏中的应用程序图标或 Cmd + 单击时，它们会正确显示。

但是，即使左键单击停靠图标，我也想显示相同的菜单。

我计划在 applicationShouldHandleReopen 中处理这个问题，但是我无法弄清楚如何以编程方式加载停靠菜单。

有什么建议么？

# java - Java内存堆错误

> ID：15386023
> 
> 赞同：0
> 
> 时间：2013-03-13T12:57:55.753
> 
> 标签：java, eclipse, web-services, heap-memory, helios

![错误信息截图](../Images/d80019e9a877b8a5fd2aa88a68f25827.png)

我在网上没有找到任何关于此错误的信息，有人可以帮忙吗？我有一个超过 30,000 行代码的存根类，可能是它导致了问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:00:06.370

> 我有一个超过 30 000 行代码的存根类，也许它导致了问题？？

是的，这肯定是根本原因。无论如何，Eclipse 似乎堆空间不足。尝试为 Eclipse 分配更多的堆空间。在你的`eclipse.ini`, 改变

```
-Xmx512m 
```

更高的价值，比如

```
-Xmx1024m 
```

另请参阅[http://wiki.eclipse.org/FAQ_How_do_I_increase_the_heap_size_available_to_Eclipse%3F](http://wiki.eclipse.org/FAQ_How_do_I_increase_the_heap_size_available_to_Eclipse%3F)了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:02:24.733

查看[http://wiki.eclipse.org/FAQ_How_do_I_increase_the_heap_size_available_to_Eclipse%3F上的 Eclipse 常见问题解答](http://wiki.eclipse.org/FAQ_How_do_I_increase_the_heap_size_available_to_Eclipse%3F)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:06:19.643

顺便说一句，您可以根据应用程序的需要增加 Java 堆空间的大小，我总是建议这样做以避免使用默认的 JVM 堆值。如果您的应用程序很大并且创建了很多对象，您可以使用 JVM 选项 -Xms 和 -Xmx 来更改堆空间的大小。Xms 表示堆的起始大小，而 -Xmx 表示 Java 中堆的最大大小。还有一个参数叫做-Xmn，它表示新一代Java堆空间的大小。唯一的问题是您不能动态更改 Java 中的 Heap 大小，您只能在启动 JVM 时提供 Java Heap Size 参数。

# java - 如何使用 Paint.getTextBounds() 快速获取 TextView 的宽度和高度？

> ID：15386025
> 
> 赞同：7
> 
> 时间：2013-03-13T12:58:00.490
> 
> 标签：java, android, performance, textview, text-size

Paint 类中有一个方法：[Paint.getTextBounds()](http://developer.android.com/reference/android/graphics/Paint.html#getTextBounds%28java.lang.String,%20int,%20int,%20android.graphics.Rect%29)，它返回`Rect`被一些文本占用。但根据[这个](https://stackoverflow.com/a/7579469/1048087)答案，它返回的内容与 TextView 的宽度/高度不同。

**Q1：有没有办法使用[Paint.getTextBounds()](http://developer.android.com/reference/android/graphics/Paint.html#getTextBounds%28java.lang.String,%20int,%20int,%20android.graphics.Rect%29)`Rect`返回的 TextView 的宽度和高度？**

请注意，我确实需要准确地知道宽度/高度。我很高兴知道 2-3% 的可能误差的上限`rect`，但它不能大于 TextView 的界限（并且应该适用于不依赖于屏幕分辨率和像素密度的任何手机）

**Q2：有没有其他QUICK方法来确定一些指定textSize的文本的宽度和高度？**

我知道，宽度可以由[Paint.measureText()](http://developer.android.com/reference/android/graphics/Paint.html#measureText%28java.lang.String%29)确定，但这不会返回高度。可以通过`StaticLayout`使用文本创建 new 然后调用[StaticLayout.getHeight()](http://developer.android.com/reference/android/text/Layout.html#getHeight%28%29)来确定高度，但这太慢了。我需要更快的东西。

* * *

所有这一切的背景是`AutoFitTextView`通过放大或缩小文本大小来自动将文本适应其边界，并且它应该快速做到这一点，因为会有许多这样`AutoFitTextView`的 s 非常快速地动态更改。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T23:45:15.393

找到了一种简单且不慢的方法来确定用`Paint`不使用的特定绘制的文本宽度/高度`StaticLayout`。

```
public int getTextWidth(String text, Paint paint) {
    Rect bounds = new Rect();
    paint.getTextBounds(text, 0, text.length(), bounds);
    int width = bounds.left + bounds.width();
    return width;
}

public int getTextHeight(String text, Paint paint) {
    Rect bounds = new Rect();
    paint.getTextBounds(text, 0, text.length(), bounds);
    int height = bounds.bottom + bounds.height();
    return height;
} 
```

技巧的简短描述：`Paint.getTextBounds(String text, int start, int end, Rect bounds)`返回`Rect`不是从`(0,0)`. 也就是说，要获得将通过`Canvas.drawText(String text, float x, float y, Paint paint)`使用**相同** `Paint`对象调用来设置的文本的实际宽度，`getTextBounds()`应该添加`Rect`.

注意这一点`bounds.left`——这是问题的关键。

这样，您将收到与使用`Canvas.drawText()`.

* * *

[这个](https://stackoverflow.com/a/14766372/1048087)答案给出了更详细的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:33:01.797

在 java 中，我使用了类 FontMetrics。

```
Font f= new Font("Arial", Font.BOLD, 16);
FontMetrics metric = getFontMetrics(f);

metric.stringWidth("the text I want to measure"); 
```

# linux - 使专有的 ELF 二进制文件在 Linux 上可移植

> ID：15386027
> 
> 赞同：8
> 
> 时间：2013-03-13T12:58:07.120
> 
> 标签：linux, shared-libraries, portability, elf, portable-applications

我正在寻找一种方法来使现有的专有 ELF 二进制文件（与特定版本的系统库链接）具有可移植性。对于可移植，我的意思是使可执行文件在具有相同处理器架构和兼容系统内核的每个系统上工作，而不必拥有库的源代码（如果没有源代码就没有办法，那也可以） .

到目前为止，我想到了两种可能性，但我不知道它们是否完全有可能，如果有，应该选择哪一种：

1.  搜索所有链接库及其依赖项，并将它们包含在二进制文件的子目录中，并将 Library-Path 更改为该目录。
2.  将库静态重新链接到二进制文件到一个大的可执行文件（如果程序不根据校验和验证自己）。

许可不是问题，因为我不想分发创建的可移植程序，它仅供私人使用。

感谢您的回答。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T02:16:33.513

> 搜索所有链接库及其依赖项，并将它们包含在二进制文件的子目录中，并将 Library-Path 更改为该目录。

这适用于大多数共享库，但不适用于`libc.so.6`（如果您的目标系统没有足够新的版本，这是最有可能出现问题的库）。

原因：glibc 由 200 多个独立的共享库组成，它们之间有未版本化的二进制接口，并且它们之间没有稳定的 ABI。因此， glibc 的*所有*部分都必须来自同一个构建。其中之一是`libc.so.6`. 另一个是`ld-linux.so`. 后者的绝对路径被*硬编码*到每个动态可执行文件中。最终结果：如果您提供自己的 副本`libc.so.6`，并且如果该副本与系统上存在的不匹配`/lib/ld-linux*.so.2`，那么您将看到非常奇怪的崩溃，您将很难解释或调试。

> 将库静态重新链接到二进制文件到一个大的可执行文件。

这在 AIX 以外的任何 UNIX 系统上都无法工作：它们都认为`a.out`并且`foo.so`是*最终*的链接产品，无法进一步链接。

存在[statifier](http://statifier.sourceforge.net/)，它确实从一个动态的可执行文件中创建了一个（巨大的）静态可执行文件。我没有使用它的经验。

# c# - 如何从包含图像的网格中将数据导出到 excel 中？

> ID：15386030
> 
> 赞同：2
> 
> 时间：2013-03-13T12:58:10.347
> 
> 标签：c#, asp.net, gridview, export-to-excel

我想从包含图像的网格中将数据导出到 excel 中。

我正在使用以下代码 -

```
 private void CreateXL()
 {
    Response.Clear();
    Response.AddHeader("content-disposition", "attachment;filename=xxxxxxxt.xls");
    Response.Charset = "";

    Response.ContentType = "application/vnd.xls";
    StringWriter objStringWriter = new StringWriter();
    HtmlTextWriter objHtmlTextWriter = new HtmlTextWriter(objStringWriter);

    Gridview.RenderControl(objHtmlTextWriter);
    Response.Write(objStringWriter.ToString());
    Response.End();
 } 
```

但是在 excel 中我无法看到图像，而不是图像，我收到一条消息，上面写着“无法显示链接的图像文件可能已被移动、重命名或删除。验证链接指向正确的文件和位置。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:02:30.047

全文：[http ://www.aspsnippets.com/Articles/Export-GridView-with-Images-to-Word-Excel-and-PDF-Formats-in-ASP.Net.aspx](http://www.aspsnippets.com/Articles/Export-GridView-with-Images-to-Word-Excel-and-PDF-Formats-in-ASP.Net.aspx)

```
private void Excel_Export()
{
Response.Clear();
Response.Buffer = true;
Response.AddHeader("content-disposition","attachment;filename=GridViewExport.xls");
Response.Charset = "";
Response.ContentType = "application/vnd.ms-excel";
StringWriter sw = new StringWriter();
HtmlTextWriter hw = new HtmlTextWriter(sw);
GridView1.AllowPaging = false;
GridView1.DataBind();

for (int i = 0; i < GridView1.Rows.Count; i++)
{
GridViewRow row = GridView1.Rows[i];
//Apply text style to each Row
row.Attributes.Add("class", "textmode");
}
GridView1.RenderControl(hw);
//style to format numbers to string
string style = @"<style> .textmode { mso-number-format:\@; } </style>";
Response.Write(style);
Response.Output.Write(sw.ToString());
Response.Flush();
Response.End();
} 
```

# jquery - 在点击事件Jquery中获取变量

> ID：15386033
> 
> 赞同：0
> 
> 时间：2013-03-13T12:58:17.017
> 
> 标签：jquery, google-maps

我正在使用谷歌地图，我正在尝试访问函数内的变量，但我不知道如何。

```
 if(navigator.geolocation) {

    browserSupportFlag = true;
    navigator.geolocation.getCurrentPosition(function(position) {
     initialLocation = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
     // map.setCenter(initialLocation);
       markerL = new google.maps.Marker({
                        position: initialLocation,
                       map: map,
                        title: "You are Here",
                    });

                     markerL.setMap(map);
    }, function() {
      handleNoGeolocation(browserSupportFlag);
    });

  } 
```

我想在这里访问 initalLocation

```
var directionsService = new google.maps.DirectionsService();
     var directionsDisplay = new google.maps.DirectionsRenderer();
  directionsDisplay.setMap(map);
     directionsDisplay.setPanel(document.getElementById('panel'));

     var request = {
       origin: window.initialLocation, 
       destination: 'london',
       travelMode: google.maps.DirectionsTravelMode.DRIVING
     };

     directionsService.route(request, function(response, status) {
       if (status == google.maps.DirectionsStatus.OK) {
         directionsDisplay.setDirections(response);
       }
     }); 
```

Firebug 告诉我 initalLocation 未定义。有任何想法吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:42:52.000

的回调`geolocation.getCurrentPosition()`将被异步调用，因此在回调执行之前您无法访问该变量。

**解决方法：**在回调中调用directionsService-request`getCurrentPosition()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:06:02.837

尝试像这样设置值：

```
window.initialLocation = new google.maps.LatLng(position.coords.latitude,position.coords.longitude); 
```

即总是使用`window.`前缀。

请注意，使用窗口对象来保存全局变量并不是最佳编程实践。如果您的脚本很小，那也没关系。

# javascript - 刷新具有相同类名的多个选择列表

> ID：15386034
> 
> 赞同：0
> 
> 时间：2013-03-13T12:58:19.210
> 
> 标签：javascript, jquery, html, jquery-mobile, selectlist

我有三个具有相同类名的不同选择列表。每个选择列表包含两个选项：

```
<select class="select-tasks" multiple="multiple" name="SelectedTasks">
   <option>Option 1</option>
   <option>Option 2</option>
</select> 
```

在页面初始化时，我在每个选择列表前面添加了一个新选项，如下所示：

```
 $("#page").one("pageinit", function () {
         $(".select-tasks").prepend("<option>Choose an option</option>");

         $(".select-tasks").each(function (i, obj) {
              $(this).selectmenu("refresh", true);
         });
    }); 
```

当我使用 Firebug 进行调试时，我可以在 HTML 中看到所有三个选择列表中都添加了新选项，但是没有一个选择列表被刷新，所以我看不到新选项。

我想我在 javascript 中做错了什么，但我不确定是什么。顺便说一句，我正在使用 jQuery Mobile。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:04:25.640

试试这个：

```
$("#page").one("pageinit", function () {

     $(".select-tasks").each(function (i, obj) {
          $(this).prepend("<option>Choose an option</option>")
                 .selectmenu("refresh", true);
     });
}); 
```

# domain-driven-design - DDD - 聚合根负载/查询性能

> ID：15386047
> 
> 赞同：2
> 
> 时间：2013-03-13T12:58:41.657
> 
> 标签：domain-driven-design, cqrs, ddd-repositories, aggregateroot

我在玩 DDD 并且弹出这个问题。我如何加载子聚合根？会出现几个性能问题。想象以下示例：

```
public AggregateRoot1
{
     #region
        properties
     #endregion

     public AggregateRoot2 AR2{get;set;}

     public IEnumerable<AggregateRoot3> AR3List{get;set;}

     (...)
} 
```

如果我在获得 AggregateRoot1 时加载 AggregateRoot2 和 AggregateRoot3 列表，则该图会很大。这似乎不是一个好方法。

我有两个选择：

1.  **将AggregateRoot2 AR2**替换为**Guid AR2Id**和**IEnumerable AggregateRoot3> AR3List 替换**为**IEnumerable Guid> AR3ListIds**。所有 AR 引用都应替换为 ID。
2.  因为我不喜欢 IEnumerable ARListIds 方法，所以我正在考虑删除 0...* 对 AR 的引用。所有需要 AR 列表数据的操作都应该通过像 David Masters 这样的域服务[来完成](https://stackoverflow.com/questions/4919687/aggregate-root-references-other-aggregate-roots)

顺便说一句，我不考虑使用延迟加载。

我期待听到您对儿童 AR 加载的意见。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T15:55:31.590

理想情况下，聚合之间的引用应该仅通过身份进行。这是选项 1。但是，您应该评估每个参考，以查看是否需要参考持有聚合的一致性。有时，两个聚合之间的关系本身可以成为单独加载的聚合。总体而言，请查看[Vaughn Vernon](http://dddcommunity.org/library/vernon_2011/)的 Effective Aggregate Design，以深入分析设计聚合时的各种权衡。这也是 David Masters 在链接问题中所指出的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T21:51:39.047

如果图表变得太大并且您不能使用延迟加载，这可能表明您的模型可以使用一些工作 - 您可能拥有应该正确地作为它们自己的聚合根的实体。

通过使用工厂和存储库，可以更好地管理大型对象。您可以缓存大对象，或在 AggregateRoot1 的工厂中实现单例模式。

遵循 DDD 的一个原因是对复杂性的封装。但是拥有非根对象的 ID 会破坏这种封装。虽然可能存在性能方面的考虑，但过早地优化代码以提高性能通常不会创造出好的软件。

# python - 同一数据库列的多个字段

> ID：15386052
> 
> 赞同：11
> 
> 时间：2013-03-13T12:58:56.673
> 
> 标签：python, django, django-models, django-database

我们正在尝试使用[`prefetch_related`](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#prefetch-related). 它可以遵循`GenericForeignKey`关系，并且可以更深入地了解，`__`但不幸的是，如果相关模型没有这样的领域，它就会失败。

这是模型结构的一些示例

```
class ModelA(models.Model):
    event_object = models.ForeignKey(SomeModelA)

class ModelB(models.Model):
    event = models.ForeignKey(SomeModelB)

class ModelC(models.Model):
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey() 
```

因此`ModelC`instance 可以指向`ModelA`或`ModelB`。而且我可以使用这样的查询集来预取 A 和 B 模型：`ModelC.objects.all().prefetch_related('content_object')`不幸的是，我还需要选择事件对象（`SomeModelA`或`SomeModelB`）

如果我尝试跑步

```
ModelC.objects.all().prefetch_related('content_object', 'content_object__event_object') 
```

如果我只有`ModelC`指向 的实例，它将起作用`ModelA`，但在其他情况下，它将失败，因为`ModelB`没有该`event_object`字段`event`而是有。

此模型在代码中的许多地方使用，因此重命名该字段不是一个好主意。所以我想知道是否有办法为字段/列创建别名。

我试图这样做：

```
class ModelB(models.Model):
    event = models.ForeignKey(SomeModelB)
    event_object = models.ForeignKey(SomeModelB, db_column='event_id', related_name='+') 
```

使两个字段指向数据库表中的同一列。但是，这不起作用，因为它破坏了`save`方法。Django 创建一个`UPDATE`SQL 查询，其中一列放置两次并得到一个 DatabaseError

有没有办法创建这样的别名？或者也许有另一种解决方案可以`prefetch_related`不抛出异常？

**更新**：在`save`方法中有一个`update_fields`参数可以用来排除这个字段。但是它是在 1.5 中引入的，我们使用的是 1.4。所以我继续寻找答案。

**更新 #2**：@shx2 要求我提供回溯。有 2 种可能的回溯。第一个 - 当第一个对象上缺少属性时：

```
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/home/igor/workspace/projectname/eggs/Django-1.4.2-py2.7.egg/django/db/models/query.py", line 72, in __repr__
    data = list(self[:REPR_OUTPUT_SIZE + 1])
  File "/home/igor/workspace/projectname/eggs/Django-1.4.2-py2.7.egg/django/db/models/query.py", line 97, in __iter__
    len(self)
  File "/home/igor/workspace/projectname/eggs/Django-1.4.2-py2.7.egg/django/db/models/query.py", line 89, in __len__
    self._prefetch_related_objects()
  File "/home/igor/workspace/projectname/eggs/Django-1.4.2-py2.7.egg/django/db/models/query.py", line 570, in _prefetch_related_objects
    prefetch_related_objects(self._result_cache, self._prefetch_related_lookups)
  File "/home/igor/workspace/projectname/eggs/Django-1.4.2-py2.7.egg/django/db/models/query.py", line 1664, in prefetch_related_objects
    (attr, first_obj.__class__.__name__, lookup))
AttributeError: Cannot find 'event_object' on ModelB object, 'content_object__event_object' is an invalid parameter to prefetch_related() 
```

如果 prefetch_related 参数对第一个对象有效，那么我得到第二个回溯：

```
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/home/igor/workspace/projectname/eggs/Django-1.4.2-py2.7.egg/django/db/models/query.py", line 72, in __repr__
    data = list(self[:REPR_OUTPUT_SIZE + 1])
  File "/home/igor/workspace/projectname/eggs/Django-1.4.2-py2.7.egg/django/db/models/query.py", line 97, in __iter__
    len(self)
  File "/home/igor/workspace/projectname/eggs/Django-1.4.2-py2.7.egg/django/db/models/query.py", line 89, in __len__
    self._prefetch_related_objects()
  File "/home/igor/workspace/projectname/eggs/Django-1.4.2-py2.7.egg/django/db/models/query.py", line 570, in _prefetch_related_objects
    prefetch_related_objects(self._result_cache, self._prefetch_related_lookups)
  File "/home/igor/workspace/projectname/eggs/Django-1.4.2-py2.7.egg/django/db/models/query.py", line 1680, in prefetch_related_objects
    obj_list, additional_prl = prefetch_one_level(obj_list, prefetcher, attr)
  File "/home/igor/workspace/projectname/eggs/Django-1.4.2-py2.7.egg/django/db/models/query.py", line 1803, in prefetch_one_level
    qs = getattr(obj, attname).all()
AttributeError: 'ModelB' object has no attribute 'event_object' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T20:08:28.330

它看起来像 django 中的错误或疏忽。作为一种解决方法，您可以尝试定义一个执行 2 阶段预取的自定义管理器。

```
from django.db import models
from django.db.models import Q
from django.contrib.contenttypes.models import ContentType

class PrefetchWorkaroundManager(models.Manager):
    def get_queryset(self):
        q = super(PrefetchWorkaroundManager, self).get_queryset()
        content_typeA = ContentType.objects.get_for_model(ModelA)
        content_typeB = ContentType.objects.get_for_model(ModelB)
        return q.filter(content_type__pk = content_typeA.id).prefetch_related('content_object', 'content_object__event_object') | \
               q.filter(content_type__pk = content_typeB.id).prefetch_related('content_object', 'content_object__event')

class ModelC(models.Model):
    ...

    objects_prefetched = PrefetchWorkaroundManager() 
```

每个想要进行预取的调用者都应该访问`ModelC.objects_prefetched`而不是`ModelC.objects`：

```
ModelC.objects_prefetched.filter(...) 
```

我承认，我没有测试它，所以它可能无法按原样工作。但我相信这种方法是合理的。

# matlab - MATLAB 和字符编码：如何在 UTF-8 系统中运行/编辑 ISO8859-1 m 文件？

> ID：15386057
> 
> 赞同：4
> 
> 时间：2013-03-13T12:59:02.670
> 
> 标签：matlab, utf-8, iso-8859-1

我有一个使用 ISO8859-1 用 Matlab 编写的带有字符串和注释的大型应用程序。我想在 UTF-8 Matlab 环境（Linux 下的 Matlab 2012a）中运行和更新这个应用程序。可能吗？编辑器显示所有非 ASCII 字符的小方块，字符串比较似乎不起作用。

他是我的快速解决方案：

看起来没有万无一失的方法来处理从 Matlab 本身内部的非本机编码。我想象从应用程序内部强制编码更改无济于事。相反，我在启动 Matlab 之前从命令行更改了我的语言环境。就像是

```
export LC_CTYPE="en_US.ISO-8859-1"; matlab; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-06T22:45:14.993

您可以简单地使用外部程序转换文件编码。参见例如[https://askubuntu.com/questions/41643/how-to-convert-multiple-iso8859-1-to-utf-8](https://askubuntu.com/questions/41643/how-to-convert-multiple-iso8859-1-to-utf-8)。唯一的问题是，如果您想在较旧的 Windows Matlab 版本上运行它们，您可能必须将编码转换回来。

如果您不想转换文件，请尝试在 Matlab 提示符下使用未记录的命令功能（'DefaultCharacterSet'、'ISO8859-1'）。我从未使用过它，所以我不知道是否对您有用，但值得一试。

# javascript - Facebook javascript sdk api 分享一个链接并在墙上有一个大小为 154 的图像

> ID：15386058
> 
> 赞同：4
> 
> 时间：2013-03-13T12:59:12.320
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

我需要分享一个到 facebook 的链接，并在墙上有一个更大尺寸的图像。我分享一个链接如下：

```
 FB.ui(
      {
        method : 'feed',
        name: 'the name whatever',
        caption: 'some caption',
        description: 'description',
        link: 'http://mysite.com/some_page',
        picture: photo_url
      },
      function (response) { ... }
    ); 
```

图片比 154x154 大，我尝试了 180x180 的尺寸（我在文档的某处读到它需要 180x180），但它最终在墙上的尺寸为 90x90 :(。

如果我删除图片参数，图像将采用 og:image 元标记，但它仍然是 90x90 像素！如果我自己发布链接，我可以看到它抓住了正确的尺寸 - 所以当我自己发布到墙上时，它会发布尺寸为 154x154 的图像，但是我如何通过 api facebook 提供的 api 发布它？

也尝试过这种方式-效果相同，请帮助:(

```
 FB.api('/me/feed', 'post',
      {
        link : 'http://whatever_mysite.com/some_page',
        picture : photo_url
      },
      function (response) { ... }
    ); 
```

这是手动发布时，指向站点的直接链接（从元标记中取出的图像）： ![在此处输入图像描述](../Images/aa700fd46b857e5c53d1d29a3e2c4831.png)

这是通过 api 共享时（原文：[http](http://www.dandybooksellers.com/acatalog/TheoryTest.jpg) ://www.dandybooksellers.com/acatalog/TheoryTest.jpg ）： ![在此处输入图像描述](../Images/3db8704f92153ca71bcd6ea1264d9847.png)

当没有提供“图片”参数时，它会从元标记发布“测试图像”，但尺寸仍为 90x90

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:49:06.550

此帖子所附图片的 URL。图片必须至少为 50 像素 x 50 像素（但最好是最小 200 像素 x 200 像素）并且最大纵横比为 3:1

更多详情，请参考：http: [//developers.facebook.com/docs/reference/dialogs/feed/](http://developers.facebook.com/docs/reference/dialogs/feed/)

# wordpress - 301重定向与？和 & .asp

> ID：15386059
> 
> 赞同：1
> 
> 时间：2013-03-13T12:59:12.460
> 
> 标签：wordpress, .htaccess, mod-rewrite, redirect

我知道那里有几篇关于此的文章，但是当涉及到 .htaccess 文件中的重定向时，我是新手，所以请原谅我的无知！我已经尝试了一些事情，但我无法让它发挥作用。

我有旧网址[http://domain.com/ourlocations.asp?cat=41&id=41](http://domain.com/ourlocations.asp?cat=41&id=41)我试图在 .htaccess 中重定向到[http://domain.com/locations](http://domain.com/locations)。第一个/旧网址通过二维码包含在打印工作中，所以我有点卡住了。我试过使用简单的 Redirect 301 但没有运气。我看过一些关于使用 RewriteRule 的帖子，但我在 .htaccess (WordPress) 中有现有代码，并且害怕更改以防它关闭网站。

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

有没有人有任何想法？谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:19:45.653

此*RewriteRule应将*[http://domain.com/ourlocations.asp?cat=41&id=41](http://domain.com/ourlocations.asp?cat=41&id=41)重定向到[http://domain.com/locations](http://domain.com/locations)。

*   *RewriteCond*指令检查查询字符串参数。
*   如果您在，则*RewriteRule*的第一部分匹配`/ourlocations.asp`
*   *RewriteRule*`?`替换部分的尾随删除所有查询参数（如果您希望传递参数，请将其删除）
**   `[R=301]`告诉 Apache 执行 301 重定向*

 *-

```
<IfModule mod_rewrite.c>

RewriteEngine On
RewriteBase /

RewriteRule ^index\.php$ - [L]

RewriteCond %{QUERY_STRING} cat=41
RewriteCond %{QUERY_STRING} id=41
RewriteRule ^ourlocations\.asp http://domain.com/locations? [R=301]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:45:27.060

感谢大家的帮助，最后玩弄我们得到了解决方案：

```
<IfModule mod_rewrite.c>

RewriteEngine On
RewriteBase /

RewriteRule ^ourlocations\.asp http://domain.com/locations? [L,R=301]

RewriteRule ^index\.php$ - [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

</IfModule> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-07-25T09:33:52.960

另一个可以解决的解决方案：

添加后`# END WordPress`：

```
RedirectMatch 301 /index.asp(.*) http://www.domain.com/$1 
```

例子：

```
www.domain.com/index.asp/string=test&url=22 
```

将重定向到：

```
www.domain.com/string=test 
```

现在需要像这样写301：

```
RewriteCond %{QUERY_STRING} ^string=test&url=22$
RewriteRule ^$ http://www.domain.com/requiredPage/? [R=301,L] 
```

现在 url:`www.domain.com/index.asp/string=test&url=22`将 301 到`www.domain.com/requiredPage/`*

# php - FPDF 的烦人错误 :: MultiCell()

> ID：15386068
> 
> 赞同：0
> 
> 时间：2013-03-13T12:59:39.130
> 
> 标签：php, fpdf

我刚刚遇到了一个非常奇怪的 FPDF 错误。我的代码是：

```
$PDF = new FPDF('P', 'mm', 'A4');
$PDF->SetXY(0,0); 
$PDF->MultiCell(40, 5, "WE WANT TO SERVE YOU BETTER", 1, 'R'); 
```

对于右对齐和相同：

```
$PDF->MultiCell(40, 5, "WE WANT TO SERVE YOU BETTER", 1, 'C'); 
```

用于中心对齐。我得到的内容显示在以下屏幕截图中：http: [//img3.fotos-hochladen.net/uploads/fpdf9rwucik1xh.png](http://img3.fotos-hochladen.net/uploads/fpdf9rwucik1xh.png)分别具有“右”和“中心”对齐。它不是绝对对齐，而是相对于多单元格的右边框对齐。

更重要的是，自动换行符不起作用。

刚刚注意到，同样的对齐错误也存在于**Cell**方法中。

浪费了两个小时，我在互联网上一无所获。请帮忙修复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:38:40.733

找到解决方案。我必须设置任何字体。

老实说，这很烦人。但是如果其他人遇到同样的问题，就不会再为此浪费时间了！

# marklogic - 有什么方法可以限制特定版本的文档的 marklogic 搜索

> ID：15386070
> 
> 赞同：2
> 
> 时间：2013-03-13T12:59:39.850
> 
> 标签：marklogic

我将托管文档存储到 marklogic 中的特定集合中（通过**dls:document-update**和**dls:document-checkin** API）。我希望搜索仅包含当前版本的文档。有没有办法使用 search:search API 来做到这一点？如果没有其他建议？我知道一种选择是将旧版本推送到不同的集合中，将当前版本推送到不同的集合中。仅搜索当前版本的集合。由于某些原因，我不想这样做。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:47:07.117

函数[http://docs.marklogic.com/dls:documents-query](http://docs.marklogic.com/dls:documents-query) “返回与数据库中托管文档的最新版本匹配的查询。” 这听起来像你想要的。要与您一起使用它，`search:search`请将函数的输出添加为`additional-query`选项：[http ://docs.marklogic.com/search:search?q=search:search#opt-additional-query](http://docs.marklogic.com/search:search?q=search:search#opt-additional-query)

DLS 也提供了几个类似的选项：您可以使用[http://docs.marklogic.com/dls:document-version-query](http://docs.marklogic.com/dls:document-version-query)来匹配特定的版本号，或者[http://docs.marklogic.com/dls:as -of-query](http://docs.marklogic.com/dls:as-of-query)在特定时间匹配文档。如果您将时间指定为现在，那应该与最新版本匹配。但`dls:documents-query`应该是最有效的方式。

# python - 调试来自 Mailgun 的 Heroku 上传入邮件的 500

> ID：15386071
> 
> 赞同：1
> 
> 时间：2013-03-13T12:59:42.873
> 
> 标签：python, django, heroku, mailgun

我正在尝试调试一个视图，该视图将来自 Mailgun 的传入邮件发送到 Heroku 上的 Django 安装。

视图本身直接取自 Mailgun 文档，如果我手动调用 URL，则会得到 OK 响应。

```
@csrf_exempt
def askfriend_emailresponse(request):
    from_email = "..."
    to_email = "..."
    if request.method == 'POST':
        sender    = request.POST.get('sender')
        recipient = request.POST.get('recipient')
        answer = request.POST.get('stripped-text', '')

        try:
            send_mail("inside post"+str(recipient[recipient.find("+")+1:recipient.find("@")]), answer, from_email, to_email)
        except Exception, e:
            raise e

    return HttpResponse('OK') 
```

此外，如果我只是通过外部工具向该 URL 发布帖子（我为此目的使用海报），我可以获得 200（我必须为此添加`@csrf_exempt`，但现在很好）。

但是，从 Mailgun 日志中我看到转发消息时出现 500 错误，从 Heroku 中我看到有一个传入请求导致 500：

```
2013-03-13T09:59:04+00:00 heroku[router]: at=info method=POST path=[url] host=[hostname].herokuapp.com fwd="198.61.253.112" dyno=web.1 queue=0 wait=0ms connect=1ms service=86ms status=500 bytes=102194 
```

我花了一天多的时间研究后的问题：

1）任何想法可能是错误的（会很好） - 至少同样重要

2）我怎样才能正确测试这个？因为 Mailguns 日志非常简短（500 - 就是这样！）而且 Heroku 在那里也没有真正的帮助......而且，必须始终首先部署到 Heroku 显然很慢，因此，我想知道这是否真的是“聪明”的开发方式......（我显然在本地测试了所有其他东西，但是通过Mailgun通过POST发送外部电子邮件我不知道如何在本地测试）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T03:54:30.763

我终于弄清楚了问题所在：

1）在 Mailgun 教程中，您创建的路由末尾没有“/”（例如：[http](http://myhost.com/messages) : //myhost.com/messages） - 但是，APPEND_SLASH 导致了 POST 重定向的问题。解决方案是简单地在末尾附加“/”以进行重定向

2) （生产中后期可能出现的进一步问题）- 请注意，在 Django 1.5 中引入了 allowed_host 值，该值限制了允许发出 POST 请求的域。我相信这仅在生产环境中使用（debug = false），但以后可能会导致问题，因此请确保您也相应地设置这些（我相信允许 mailgun.org 作为主机）。

感谢所有试图提供帮助的人！

# opengl - 通过深度缓冲区

> ID：15386076
> 
> 赞同：0
> 
> 时间：2013-03-13T12:59:53.330
> 
> 标签：opengl, graphics, rendering, pipeline, depth-buffer

所以我正在阅读一篇关于特定着色算法的论文，其中有一个部分似乎有点模糊，我想知道我是否可以在这里得到建议。

基本上它说我首先必须获取网格的 3D 顶点并将其转换为窗口坐标 wx、wy、wz，其中 wz 是深度。这部分我已经完成了。

接下来我必须测试这个窗口坐标是否“通过”深度缓冲区。

这就是它所说的一切，我不确定“传递”深度缓冲区是什么意思。这里有谁知道这可能意味着什么以及我如何在openGL中实现它？

编辑：

更具体地说，我需要 openGL 向我提供有关特定顶点是否通过深度缓冲区的反馈。我实际上并没有渲染这些顶点，所以如果 openGL 在“幕后”进行所有计算，这对我没有好处。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:03:08.970

深度测试是OpenGL管道的一部分，应该在片段（像素）着色器之后调用。因此，您无需自己执行此操作，您所要做的就是正确初始化投影矩阵和视口，以便`Wz`计算每个顶点的值，然后在顶点之间进行插值。您可以配置此测试的一些属性。

这是 OpenGL 管道概述：[http](http://www.opengl.org/wiki/Rendering_Pipeline_Overview#Rasterization) ://www.opengl.org/wiki/Rendering_Pipeline_Overview#Rasterization 看第 7 章：每个样本处理

`The depth test, if any, is performed; if it fails, then the fragment is culled and not added to the framebuffer.`

* * *

你说你必须知道哪些**顶点**通过了深度测试。但深度测试仅在**片段**上调用，而不在顶点上调用。因此，如果您已经拥有具有窗口 x、y 和 z 坐标的顶点，那么您只需检查那些具有相同 (x, y) 坐标的 z 坐标，并决定他们中的谁将赢得这个深度测试......

# c# - 连接用逗号分隔的字典键

> ID：15386077
> 
> 赞同：4
> 
> 时间：2013-03-13T12:59:55.837
> 
> 标签：c#, string, dictionary, concatenation, comma

我正在寻找一种更好的方法来连接字典键，这就是我现在正在做的事情：

```
Dictionary<int, string> myList = new Dictionary<int, string>();

myList.Add(1, "value");
myList.Add(2, "value");
myList.Add(3, "value");
myList.Add(4, "value");

string choices = "";

foreach (int key in myList.Keys)
{
    choices += key + " ";
}

choices = "(" + choices.Trim().Replace(" ", ",") + ")"; // (1,2,3,4) 
```

我敢肯定有更好的方法，也许是 LINQ？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-13T13:04:20.120

```
string.Format("({0})", string.Join(",", myList.Keys)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T13:03:16.460

您可以使用：

```
Dictionary<int, string> myList = new Dictionary<int, string>();

myList.Add(1, "value");
myList.Add(2, "value");
myList.Add(3, "value");
myList.Add(4, "value");

choices = String.Format("({0})", string.Join(",", myList.Keys)); 
```

# jquery - 提交表单的问题

> ID：15386078
> 
> 赞同：0
> 
> 时间：2013-03-13T12:59:56.973
> 
> 标签：jquery, html, asp.net-mvc

我有以下问题。需要提交和验证表单，该表单在服务器上请求并在用户单击按钮时返回 PartialView。当我在函数中添加警报时，每次单击提交按钮时都会再次收到警报。所以基本上如果我点击了 4 次，第 5 次点击我会收到 5 个警报.....

```
$(".btnUpdateTopic").click(function () {
        $("form").submit(function () {
            alert("submit form");
          });
    }); 
```

我删除了代码的所有内容以查看是否存在问题，但即使完全剥离我也无法使其正常工作。

解决方案

最终我让它与这段代码一起工作：

```
$(".btnUpdateTopic").click(function () {
        $("form").submit();
        return false;
    });
        $("form").submit(function () {
            alert("submit form");
            return false;
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:00:52.057

将提交事件从点击事件中取出，并在点击事件中调用提交。

```
$(".btnUpdateTopic").click(function () {
    $("form").submit();
});

$("form").submit(function () {
     alert("submit form");
}); 
```

# sql - 从查询返回结果，然后返回该特定结果的记录数

> ID：15386092
> 
> 赞同：1
> 
> 时间：2013-03-13T13:00:47.653
> 
> 标签：sql

标题有点混乱，但基本上，我创建了一个搜索功能，允许我的用户输入搜索词。假设他们输入了“e”，它会返回诸如“利兹、曼彻斯特、利物浦、唐卡斯特”等答案。基本上，我想要一些东西，然后一一检查这些城镇/城市中的每一个，检查从这些城镇/城市中注册了多少乐队城镇/城市，并显示说：

**“利兹 - 找到 5 条记录”**

如果您可以一次输出多个查询，那将很容易，但是，您不能。如果有人知道解决此问题的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:04:25.013

你在谈论这样的事情吗？

```
select town, count(*) as num
from something
where blah = blah
group by town 
```

这应该会给你一个结果集，如：

```
town      num
----      ----
Leeds     2
Liverpool 3 
```

当您使用`max`,`count`和`min`and`group by`子句之类的聚合函数时，聚合适用于组，在本例中为**town**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:05:58.373

尝试这样的事情：

```
CREATE TABLE citiesWithBand AS
(Select city, count(band) as bandcount
From yourtable
group by city); 
```

然后你可以做查询：

```
SELECT city, bandcount
FROM citiesWithBand
WHERE city likes '%userinput%'; 
```

或者您可以将它们组合成一个查询：

```
Select city, count(band) as bandcount
From yourtable
WHERE city LIKES '%userinput%'
GROUP BY city; 
```

# highcharts - Highcharts 无法使用单个系列渲染气泡图

> ID：15386096
> 
> 赞同：2
> 
> 时间：2013-03-13T13:00:52.493
> 
> 标签：highcharts, bubble-chart

我正在使用 Highcharts 3.0 Beta 中包含的新气泡图，但遇到了一个奇怪的错误：当我尝试仅使用一系列数据渲染气泡图时，它不显示任何内容......并且不抛出任何错误。这是代码（或[jsfiddle](http://jsfiddle.net/keX3M/)）

```
$(function () {
$('#container').highcharts({

    chart: {
        type: 'bubble'
    },

    title: {
        text: 'Highcharts bubbles bug'
    },

    series: [{
        data: [{
            "x": 23,
            "y": 22,
            "z": 200
        }]
    }]

});
}); 
```

这里有类似的信号：[highcharts v3.0Beta 气泡图未呈现。可能的错误？](https://stackoverflow.com/questions/15275162/highcharts-v3-0beta-bubblechart-not-rendering-possible-bug)（并且它已被确认为一个错误），但我没有使用 X 轴和 Y 轴的最小值和最大值，我只在一个系列中传递一个气泡。

那么，这是一个错误，还是一种正常行为（如果是，为什么？）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:32:39.977

它看起来与另一个错误有关。如果添加：

```
 xAxis: { max:50
           },
    yAxis: {min:0, max:50}, 
```

到你的jsfiddle，它开始工作。

甚至添加：

```
yAxis: {max:30}, 
```

使它绘制气泡。

我报告的原始错误已于昨天在 github 中修复，因此如果您愿意，可以从那里尝试新版本。[https://github.com/highslide-software/highcharts.com/tree/master/js](https://github.com/highslide-software/highcharts.com/tree/master/js)

# sql-server - PatIndex 匹配正则表达式

> ID：15386097
> 
> 赞同：0
> 
> 时间：2013-03-13T13:00:53.720
> 
> 标签：sql-server, regex

我一直在努力寻找一个使用 PatIndex 可以匹配任何内容并包括第一个点的正则表达式。例如`dbo.`在`dbo.Table`. 有什么帮助吗？

我拥有的最好的是，`select PatIndex('%_.%', 'dbo.Table')`但这留下了点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:29:07.513

据我所知，不需要`_`在模式中使用，PATINDEX 总是返回第一个匹配的单词或字符的索引。

试试这个：

```
select PatIndex('%.%', 'dbo.Table')
-- output: 4
select PatIndex('%.%', 'servername.dbo.Table')
-- output: 11 
```

# jquery - 使用 google API、jQuery 从地理编码中提取加 4 个邮政编码

> ID：15386100
> 
> 赞同：5
> 
> 时间：2013-03-13T13:01:02.890
> 
> 标签：jquery, geocoding, street-address

我在 jQuery 的帮助下使用谷歌 API 使用地理编码。以下是我尝试过的代码。

```
jQuery(document).ready(function () {
var geocoder = new google.maps.Geocoder();
jQuery('AddressPicker1').autocomplete({
    source: function (request, response) {
        geocoder.geocode({ address: request.term}, function (results, status) {
        if (status === google.maps.GeocoderStatus.OK) {
          response(jQuery.map(results, function(item) {
          var streetNumber = "";
          var streetName = "";
          var cityName = "";
          var zip = "";
          var country = "";
          var countyName = "";
          var state = "";  

          for ( var component =0; component < item.address_components.length; component++ ) {
             if (item.address_components[component] != undefined && item.address_components[component] != null ) {
                  if ( jQuery.inArray("street_number", item.address_components[component].types) > -1 ){
                      streetNumber = item.address_components[component].long_name;
                  }

                  if ( jQuery.inArray("route", item.address_components[component].types) > -1){
                      streetName = item.address_components[component].long_name;
                  }

                  if ( jQuery.inArray("locality", item.address_components[component].types) > -1){
                      cityName = item.address_components[component].long_name;
                  }

                  if ( jQuery.inArray("postal_code", item.address_components[component].types) > -1){
                      zip = item.address_components[component].long_name;
                  }

                  if ( jQuery.inArray("country", item.address_components[component].types) > -1){
                      country = item.address_components[component].long_name;
                  }

                  if ( jQuery.inArray("administrative_area_level_2", item.address_components[component].types) > -1){
                        countyName = item.address_components[component].long_name;
                  }

                  if ( jQuery.inArray("administrative_area_level_1", item.address_components[component].types) > -1){
                        state = item.address_components[component].short_name; 
                  }
            }
          }
    return {
        label : item.formatted_address,
        value : item.formatted_address,
        latitude : item.geometry.location.lat(),
        longitude : item.geometry.location.lng(),
        streetNo : streetNumber,
        streetName : streetName,
        city : cityName.toUpperCase() ,
        zip : zip,
        country : country,
        county : countyName.toUpperCase(),
        state : state
    }

     }));
   }
 });
 },
 select: function (event, ui) {
      jQuery('StreetNumber').val(ui.item.streetNo);
      jQuery('StreetName').val(ui.item.streetName);
      jQuery('City').val(ui.item.city);
      jQuery('Zip').val(ui.item.zip);
      jQuery('Country').val(ui.item.country);
      jQuery('CountyName').val(ui.item.county);
      jQuery('StateCode').val(ui.item.state);
      jQuery('GeocodedLatitude').val(ui.item.latitude);
      jQuery('GeocodedLongitude').val(ui.item.longitude);

 } 
```

我在搜索加上 4 个邮政编码时遇到了问题。我没有在回复中得到额外的 4 位数字。例如，对于搜索文本，“60 MAIN ST,HUNTINGTON NY 11743-6961”。我通过响应中的“postal_code”属性检索了“11743”。但我无法从响应中检索“6961”。

在这种情况下，是否有任何选项可以获取完整的邮政编码？

或者我需要尝试其他方式来搜索加 4 个邮政编码。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T14:18:16.003

据我所知，谷歌的地理编码器不会附加 ZIP +4（插件）代码。

Google 不会验证地址，这包括标准化其格式，而后者又包括附加 ZIP+4 代码。

您可能需要一个真正标准化和验证地址的 API。像[LiveAddress](http://smartystreets.com/products/liveaddress-api)这样的 API可能会做你想做的事。它将返回所有地址组件，包括 +4 插件代码。

我是 SmartyStreets 的开发人员。这是您在问题中提供的地址的响应示例，使用您使用的 +4 代码 - 在此交付点实际上有两个 +4 代码，因为一个是公司，基督教青年会，我将只显示这里的一个：

```
{
    "input_index": 0,
    "candidate_index": 1,
    "addressee": "Ymca",
    "delivery_line_1": "60 Main St",
    "last_line": "Huntington NY 11743-6961",
    "delivery_point_barcode": "117436961606",
    "components": {
        "primary_number": "60",
        "street_name": "Main",
        "street_suffix": "St",
        "city_name": "Huntington",
        "state_abbreviation": "NY",
        "zipcode": "11743",
        "plus4_code": "6961",
        "delivery_point": "60",
        "delivery_point_check_digit": "6"
    },
    "metadata": {
        "record_type": "F",
        "county_fips": "36103",
        "county_name": "Suffolk",
        "carrier_route": "C037",
        "congressional_district": "03",
        "rdi": "Commercial",
        "latitude": 40.87179,
        "longitude": -73.42655,
        "precision": "Zip7"
    },
    "analysis": {
        "dpv_match_code": "Y",
        "dpv_footnotes": "AABB",
        "dpv_cmra": "N",
        "dpv_vacant": "N",
        "active": "Y"
    }
} 
```

以下是 SmartyStreets 主页上的完整结果：[http ://smartystreets.com/?street=60%20Main%20St&city=Huntington&state=NY&zipcode=11743](http://smartystreets.com/?street=60%20Main%20St&city=Huntington&state=NY&zipcode=11743)

无论如何，这是地址验证和地理编码的区别。地理编码只是将地址转换为坐标，但如果您需要 +4 代码，则需要地址验证 API。LiveAddress 是您可以使用的少数几个之一，但这应该会给您一个更好的主意，您可以在那里开始搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-03T11:08:20.107

## TLDR

使用 google place API 的[详细信息请求](https://developers.google.com/places/web-service/details)。如果找到，+4 邮政编码将作为“postal_code_suffix”类型的地址组件返回。

## 长版

Google place API[文档](https://developers.google.com/places/web-service/supported_types)在解释要使用的地址组件类型方面并不是特别有帮助。通过 google place API 搜索没有 +4 代码的给定地址：

```
https://maps.googleapis.com/maps/api/place/findplacefromtext/json?input=60 MAIN ST,HUNTINGTON NY 11743&inputtype=textquery&fields=place_id&key=<KEY> 
```

给出地点 ID `ChIJYWl9Uism6IkRtW81pi9SvgM`。

然后我可以使用地点详细信息请求：

```
https://maps.googleapis.com/maps/api/place/details/json?place_id=ChIJYWl9Uism6IkRtW81pi9SvgM&key=<KEY> 
```

这会在属性中显示完整的邮政编码`adr_address`：`...<span class=\"postal-code\">11743-8003</span>...`。请注意，自发布此 SO 问题以来，+4 邮政编码可能已更改（是的，+4 邮政编码可能会经常更改！）。此信息更方便地作为地址组件返回，并 `postal_code_suffix`在响应中具有类型：

```
...
results: {
  ...
  address_components: [
    ...
    { long_name: "8003"
    , short_name: "8003"
    , types: ["postal_code_suffix"]
    }
    ...
  ]
  ...
}
... 
```

# php - 列出特定目录并显示图像

> ID：15386107
> 
> 赞同：0
> 
> 时间：2013-03-13T13:01:21.440
> 
> 标签：php, html, directory

我有 2 个要合并的 php 文件： first.php 文件列出了特定目录的内容。second.php 文件能够显示特定目录的图像。

我想做什么：我想列出一个目录“相机/图像”。单击链接时，应显示该目录的图像。

下面的代码列出了目录“camera/images”和这样的结果。- 专辑 1 - 专辑 2 - 专辑 3

每个相册都包含图像，我想从“first.php”链接并显示包含的图像。

第一个.php

```
<?php
$dir = opendir('camera/images'); 
echo '<ul>'; 
while ($read = readdir($dir)) 
{ 
if ($read!='.' && $read!='..') 
{ 
echo '<li><a href="camera/images/'.$read.'">'.$read.'</a></li>'; 
} 
} 
echo '</ul>'; 
closedir($dir); 
?> 
```

第二个.php

```
<?php
$files = glob("camera/images/*.*");
for ($i=0; $i<count($files); $i++)
{
$num = $files[$i];
echo '<img src="'.$num.'" alt="random image" />'."<br><br>";
}
?> 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:19:48.873

> 我想做什么：我想列出一个目录“相机/图像”。单击链接时，应显示该目录的图像。

如果您希望在不必刷新页面的情况下发生这样的事情，您将需要使用 javascript。如果您希望在单击图像时检索图像，则需要使用 ajax 调用。

简单答案概述：我个人使用 jquery 库。如果您已经熟悉 javascript，那么您可以使用普通的 javascript 进行操作，但我推荐使用 jquery，因为它具有交叉兼容性和通用性。

您需要按照您希望它显示的方式生成页面，就好像所有内容都已单击一样。然后你需要确保图像周围的 div 是隐藏的。然后你需要为每个链接绑定一个点击事件，并取消隐藏它关联的 div。

[这](http://www.w3schools.com/jquery/jquery_hide_show.asp)是一个可以帮助您的示例。

我希望这能为您指明正确的方向。

# vbscript - 需要将新创建的文件附加到电子邮件并使用 vbscript 发送电子邮件

> ID：15386108
> 
> 赞同：0
> 
> 时间：2013-03-13T13:01:21.800
> 
> 标签：vbscript

我需要从指定文件夹附加新创建的文件并使用 vbscript 发送电子邮件

# python - zeromq 是否支持 IPC 作为 Windows 上的传输通道？

> ID：15386121
> 
> 赞同：16
> 
> 时间：2013-03-13T13:01:56.777
> 
> 标签：python, windows, zeromq

当我在 Windows (Windows 8) 上尝试使用 python 的路由器示例时，我收到以下错误消息：

```
Traceback (most recent call last):
  File "router.py", line 43, in <module>
    client.bind("ipc://routing.ipc")
  File "socket.pyx", line 432, in zmq.core.socket.Socket.bind (zmq\core\socket.c:3870)
  File "checkrc.pxd", line 23, in zmq.core.checkrc._check_rc (zmq\core\socket.c:5712)
zmq.error.ZMQError: Protocol not supported 
```

所以我想在 Windows（至少 Windows 8）上不支持 zeromq 的 IPC 传输通道。这是真的？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-13T13:07:36.507

问题[如何使用 Zeromq 的 inproc 和 ipc 传输？](https://stackoverflow.com/questions/8492377/how-to-use-zeromqs-inproc-and-ipc-transports)提到 IPC 依赖于 Windows 不支持的 POSIX 命名管道。

您应该能够在环回接口上使用 TCP 而不会遇到麻烦。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-14T10:30:42.263

它在 Windows 上不受支持，但 TCP over localhost 在 Linux 和 OS/X 上提供与 IPC 大致相同的性能，我也会在 Windows 上使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-12T14:44:07.740

随着 Win 10 现在支持 AF_UNIX，libzmq 已更新为支持 IPC。它被添加到 4.3.3 版本中。有关更多信息，请参阅此[拉](https://github.com/zeromq/libzmq/issues/3691)

# ruby-on-rails - Rails 中的 HMACSHA1 - 奇怪的结果

> ID：15386122
> 
> 赞同：1
> 
> 时间：2013-03-13T13:01:59.723
> 
> 标签：ruby-on-rails, hmacsha1

我正在尝试为 Disquss 实现单点登录功能。Disquss 有一个测试控制台，它使我们能够快速测试这些值。首先，我们确保我们获得了与控制台一起使用的硬编码值，因此我们确定我们了解 Disquss 的要求。接下来，我们想在 Rails 中实现同样的东西，但我们遇到了问题。

问题在于 ruby​​ 没有生成预期值，实际上它会生成垃圾，这与预期值完全不同：

这是来自 Disquss 手册：

> 消息正文（Base64 编码）

除非另有说明，否则消息正文必须包含以下区分大小写的属性：

```
id - any unique user ID associated with that account within your user database. This will be used to generate a unique username to reference in the Disqus system. IDs must be completely unique; if you're using multiple datastores locally, for example, make sure not to re-use IDs when passing them to Disqus as that will result in account conflicts.
username - The displayed name for that account
email - The registered email address for that account
avatar (optional) - A link to that user's avatar
url (optional) - A link to the user's website 
```

HMAC-SHA1 签名

使用 HMAC->SHA1(secret_key, message + ' ' + timestamp) 生成

根据该示例，我们设计了以下 Rails 代码（它仍处于测试阶段，因此是 puts）：

```
secret_key = "12312312312312312312312312312312312312312312312312"
  digest  = OpenSSL::Digest::Digest.new('sha1')
  puts  @disqus_timestamp = Date.today.to_time.to_i
  puts  @disqus_serializer_message = {"id"=> session[:frontend_user].to_s,"username"=>@fuser.username,"email"=>@fuser.email }.to_json
  puts  @disqus_message = Base64.encode64(@disqus_serializer_message)      
  puts  @disqus_signature  = OpenSSL::HMAC.digest(digest,secret_key,@disqus_message + ' '+ @disqus_timestamp.to_s )
  puts  @sso_payload = ""
  puts "END" 
```

我们应该得到三个值： 1\. JSON 以如下格式序列化：

> eyJ1c2VybmFtZSI6InZlZHJhbiBtYXJpY2V2aWMiLCJpZCI6IjgiLCJlbWFp bCI6IndleC5hbHBoYUBnbWFpbC5jb20ifQ==

杰森作品

1.  Computed HMAC：我们得到这种格式：

> 5œ[ƒmò Ø™`Õ„Öù©≠Δ8

但我们应该得到这种格式的东西：

> 4683eff451100191c60d2a0f0e72f3a6d15db950

我尝试了不同的东西，但无济于事。可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:26:50.053

`OpenSSL::HMAC.digest`输出原始字节，而您似乎想要十六进制表示

`OpenSSL::HMAC.hexdigest`将以十六进制格式输出。你当然也可以自己转换：

arbitary_data.unpack('H*').first

将对所有字节进行十六进制编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T18:20:27.643

[我遇到了类似的问题，使用http://disqus.com/api/sso/](http://disqus.com/api/sso/)上的 Disqus SSO 调试器，我确定在执行 Base64 编码时消息添加了换行符。

引用[base64 编码长度参数](https://stackoverflow.com/questions/13301708/base64-encode-length-parameter)

我变了

```
puts  @disqus_message = Base64.encode64(@disqus_serializer_message) 
```

到

```
puts  @disqus_message = Base64.strict_encode64(@disqus_serializer_message) 
```

现在它工作得很好。

# php - SQL Select * from table sum and group by id

> ID：15386123
> 
> 赞同：1
> 
> 时间：2013-03-13T13:02:01.467
> 
> 标签：php, sql

我需要一些帮助来对项目 ID 的数量进行分组和求和。

来自数据库的数据：

```
products
id  code    name            price
1   1234    Product name    12
2   1235    Product name    12
3   1236    Product name    12

warehouses_products
product_id   warehouse_id   quantity
1           1               12
2           1               0
2           2               3
3           1               1
3           2               1 
```

PHP 获取数据。

```
$db = new PDO('mysql:host=localhost;dbname=data2;charset=utf8', 'user2', 'Password');

foreach($db->query('SELECT * FROM products as pr INNER JOIN warehouses_products AS s ON (s.product_id = pr.id) group by pr.id') as $row) {
echo $row["code"] . ' ' . $row["quantity"];
} 
```

一个例子：如果我在 2 个仓库上有相同的代码，这只有 1 个，我想要的是按 product_id 对数量和分组求和。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:04:36.910

试试这个 ：

```
'SELECT *, SUM(s.quantity) AS sum_quantity FROM products as pr INNER JOIN warehouses_products AS s ON (s.product_id = pr.id) group by pr.id' 
```

在你的`foreach`：

```
echo $row["code"] . ' ' . $row["sum_quantity"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:06:16.450

询问：

```
SELECT p.id, p.code, SUM(wp.quantity) as quantity
FROM products p
JOIN warehouses_products wp ON wp.product_id = p.id
GROUP BY p.id, p.code 
```

PHP：

```
$db = new PDO('mysql:host=localhost;dbname=data2;charset=utf8', 'user2', 'Password');

foreach($db->query('SELECT p.id, p.code, SUM(wp.quantity) as quantity FROM products p JOIN warehouses_products wp ON wp.product_id = p.id GROUP BY p.id, p.code') as $row) {
echo $row["code"] . ' ' . $row["quantity"];
} 
```

请记住，我们依赖于产品表中的 code 和 id 是唯一一对这一事实。

# php - PHP $_POST 不工作，但 $_GET 工作正常

> ID：15386124
> 
> 赞同：13
> 
> 时间：2013-03-13T13:02:03.233
> 
> 标签：php, forms, post

我正在尝试使用`<form method="post">`. 在我的笔记本电脑上的 MAMP 上一切正常，但是当我将脚本上传到服务器（Windows）时它不起作用；$_POST 数组似乎是空的。

我注释掉了所有内容，除了基本的骨头，它仍然不起作用。

索引.php：

```
<form id="login-form" method="POST" action="_scripts/check_login.php">
Email Address
<input name="login-email" type="text" id="login-email">
Password
<input name="login-password" type="text" id="login-password">
<input type="submit" name="Submit" id="login-button" value="Login">
</form> 
```

_scripts/check_login.php：（除了一些用于调试的 var_dumps 之外，我已经删除了所有内容）

```
var_dump($_POST);

$loginEmail = trim($_POST['login-email']);
echo '<br>';
$loginPassword = ($_POST['login-password']);
var_dump($loginEmail);
echo '<br>';
var_dump($loginPassword); 
```

当我提交表单时，无论我在文本字段中输入什么，我都会看到：

```
array(0) { }
string(0) ""
NULL 
```

如果我将上述两个文件中的所有“post”实例更改为“get”，一切正常。但我不想使用get。（如果我使用 method="post" 提交表单，$_REQUEST 也不起作用）。

注意这一切在本地主机上都可以正常工作，但在服务器（运行 Windows）上却不行。所以这似乎是服务器的问题，但我不知道是什么。您可以在此处查看 PHPInfo：http: [//brailleapps.org/phpinf0.php](http://brailleapps.org/phpinf0.php)

有任何想法吗？

编辑：解决了！见下文。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T08:07:01.240

我最终把它修好了，我想我不妨在这里发布什么有用的东西，以防其他人将来遇到同样的问题。

原来这些 HTTP 模块之一干扰了 POST：

RadCompression
RadUploadModule

关闭这些模块后，POST 工作正常。

（注意这是在一个全新的应用程序上，我知道没有任何现有代码可能依赖于其中一个模块......关闭它们可能会产生我不知道的意外后果，YMMV。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T13:06:28.957

一种可能性是 POST 不是服务器上允许的动词：

[http://www.iis.net/configreference/system.webserver/security/requestfiltering/verbs](http://www.iis.net/configreference/system.webserver/security/requestfiltering/verbs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-18T18:04:52.973

我在 $_POST 为空/NULL 时遇到了同样的问题，在花了 30 分钟搜索 SO 和 Google 之后，我终于找到了一个适合我的解决方案。

由于我不知道如何更改 MAMP 的 php.ini 文件，因此我编辑了我的 htaccess 以包含以下内容：

```
php_value post_max_size 60M
php_value upload_max_filesize 60M 
```

我现在可以使用提交的输入进行 var_dump($_POST) 了。

参考链接：[http ://helpfulcoder.blogspot.ca/2011/01/empty-post-array-in-mamp.html](http://helpfulcoder.blogspot.ca/2011/01/empty-post-array-in-mamp.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-13T10:25:34.777

另一件事是，如果您曾经更改 .htaccess 以隐藏格式 Example .php 或 .html

action="filename.php" 而不是这个给 action="filename"

你的问题解决了。

# seo - SEO - Mutli 国际域名与一个网站？

> ID：15386128
> 
> 赞同：0
> 
> 时间：2013-03-13T13:02:23.967
> 
> 标签：seo

**主要（美国/英国）**

```
http://www.gc.com/
http://www.gc.com/categorys
http://www.gc.com/categorys/products
http://www.gc.com/categorys/products/item-1 
```

**PL（波兰语）**

```
http://www.gc.pl/
http://www.gc.pl/categorys
http://www.gc.pl/categorys/products
http://www.gc.pl/categorys/products/item-1 
```

**DE（德语）**

```
http://www.gc.de/
http://www.gc.de/categorys
http://www.gc.de/categorys/products
http://www.gc.de/categorys/products/item-1 
```

我们拥有 20 多个国家/地区的域名，所以您明白了。

# 什么是 SEO 的最佳解决方案？

1.  保留多域选项，只需将 Canonical 元添加到 .com 以获取国际 URL
2.  将商店保留为 .com 并将所有 URL 保留为 .com - 当客户登陆具有新会话的任何页面时，为他们提供货币和语言选项，然后更新系统以反映 - 但仍使用相同的 URL

我们的电子商务平台允许我们拥有多家商店。或者，我们可以有一个商店，有多种语言和多种货币。主要问题是关于列出所有这些域的 SEO 和标记。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:31:47.633

您不想跨语言使用规范。相反，您应该使用带有 hreflang 属性的链接标签。

因为您的电子商务商店需要处理价格、货币和运费，所以您应该进行地理定位。您应该每个国家/地区拥有一个网站，并确保 Google 使用网站管理员工具获得每个正确的地理定位。

我不确定多个商店和具有多种语言的单个商店之间的区别是什么。对于 SEO，有多种设置方法，但您需要为每个国家/地区设置单独的 URL。它们可以是不同的域、不同的子域或不同的文件夹。这是[有关为 SEO 设置国际 URL 的更深入的答案](https://webmasters.stackexchange.com/a/44289/14543)。

# mysql - 加入具有不同列的 2 个表

> ID：15386131
> 
> 赞同：-5
> 
> 时间：2013-03-13T13:02:26.417
> 
> 标签：mysql

银行数据库架构：

```
account    (account_number, branch_name, balance) 
branch     (branch_name, branch_city, assets) 
customer   (customer_name customer_street, customer_city) 
loan       (loan_number, branch_name, amount) 
deposito   (customer_name, account_number) 
borrower   (customer_name, loan_number) 
```

**我怎么知道借款人的帐号？？？？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T13:41:57.167

试试这个..（根据你的评论）

```
SELECT c.customer_name,
  a.account_number
FROM customer c
  INNER JOIN depositor d
    ON c.customer_name = d.customer_name
  INNER JOIN borrower b
    ON d.customer_name = b.customer_name
  INNER JOIN account a
    ON a.account_number = d.account_number 
```

见[演示](http://www.sqlfiddle.com/#!2/a3a8e/3)

更新：

```
SELECT b.customer_name,
  d.account_number
FROM borrower b
  INNER JOIN depositor d
    ON d.customer_name = b.customer_name
  INNER JOIN account a
ON a.account_number = d.account_number 
```

见[演示](http://www.sqlfiddle.com/#!2/0f874/3)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T13:15:35.173

根据您的评论，看起来`customers`与表格有关。如果是这样，那么您可以使用：`accounts``depositor`

```
select c.customer_name,
  a.account_number,
  a.balance
from customer c
inner join depositor d
  on c.customer_name = d.customer_name
inner join account a
  on d.account_number = a.account_number 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/404c9/1)

如果您想知道借款人的帐号，那么您将在`borrower`表中添加一个 JOIN：

```
select c.customer_name,
  a.account_number,
  a.balance
from customer c
inner join depositor d
  on c.customer_name = d.customer_name
inner join account a
  on d.account_number = a.account_number
inner join borrower b
  on c.customer_name = b.customer_name 
```

您的数据库设计似乎存在一些问题。根据您当前的结构，如果您想知道`borrowers`，那么您必须加入`depositor`以获取帐号或`loan`表格以将贷款与帐户相关联。

如果您加入`loan`表格，查询将是：

```
select b.customer_name,
  a.account_number
from borrowers b
inner join loan l
  on b.loan_number = l.loan_number
inner join account a
  on l.branch_number = a.branch_number 
```

但问题是该`loan`表只能加入`account`on `branch_number`，这个分支号将与多个帐户相关联。您应该有一个列来标识`borrower`each `loan`，因为缺少此列，您目前无法找到每个借款人的帐号。

# c# - 在数组中查找子数组并返回其位置

> ID：15386132
> 
> 赞同：0
> 
> 时间：2013-03-13T13:02:26.480
> 
> 标签：c#, arrays, sub-array

我知道我的问题类似于那里的几篇帖子，但我认为它有一些不同的方面。我希望在更大的数组中找到子数组或模式。我将使用具有数千甚至数百万行的数组，我需要在该数组中找到一个模式。我将要搜索的值与数组中的值相似。例如，我的 10,000 行数组将主要充满 1 的 0 的 L 和 H，我将在那里搜索某种模式，例如寻找 1 0 1 1 H。

据我所知，其他帖子上发布的大多数解决方案都在处理更小规模的数组，并且子数组与源数组更加不同。此外，当我在源数组中找到该数组时，我需要返回该子数组的位置。（我希望在 C# 中执行此代码）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:37:40.143

这与子字符串搜索基本相同。它们都是关于在随机访问的更大序列中找到子序列。根据您的描述，听起来您的数组是一个字符数组，这正是字符串的含义。

您在笔记中描述的算法非常好，并且易于正确编码。如果不够快，请查看 KMP。

# angularjs - AngularJS 控制器继承

> ID：15386137
> 
> 赞同：28
> 
> 时间：2013-03-13T13:02:38.367
> 
> 标签：angularjs, angularjs-scope

AngularJS 有一个基于 DOM 的控制器继承，如 Angular Docs 中所述。

```
<div ng-controller="BaseController">
    <p>Base Controller Value: {{value}}</p>
    <button ng-click="updateValue()">Update In Base</button>
    <div ng-controller="DerivedController">
        <p>Derived Controller Value: {{value}}</p>
        <button ng-click="updateValue()">Update In Derived</button>
    </div>
</div> 
```

范围变量“值”仅存在于 BaseController 中。基于此，在更改 BaseController 或 DerivedController 中的方法的值时，我希望这两个值都需要更新。但只有单个作用域变量得到更新。

这是一个演示相同示例的小提琴：http: [//jsfiddle.net/6df6S/1/](http://jsfiddle.net/6df6S/1/)

如何在一个级别上进行更改以传播到当前范围的直接子级和直接父级。

我们可以通过使用来实现这一点

> $scope.$watch

有没有办法在不使用它或任何此类观察者的情况下做到这一点？

编辑1：

通过使用 $scope.$watch 这就是我的意思

```
$scope.$watch("value", function () {
   $scope.$broadcast("childChangeListener"); //Downwards to all children scopes
   $scope.$emit("parentChangeListener"); //Upwards to all parent scopes
}); 
```

我一直在寻找在不使用这种机制的情况下在所有范围内更新值的方法。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-13T15:57:27.163

当多个控制器需要访问相同的数据时，应该使用一个[服务。](https://docs.angularjs.org/guide/services)您不应该依赖范围继承，因为它限制了您编写 HTML 的方式。例如，将来，您决定 DerivedController 不应该是 BaseController 的子级。

您的服务通常应提供公共 API，并隐藏实现。这使得重构内部更容易。

HTML：

```
<div ng-controller="BaseController">
    <p>Base Controller Value: {{model.getValue()}}</p>
    <button ng-click="model.updateValue('Value updated from Base')">Update In Base</button>
    <div ng-controller="DerivedController">
        <p>Derived Controller Value: {{model.getValue()}}</p>
        <button ng-click="model.updateValue('Value updated from Derived')">Update In Derived</button>
    </div>
</div> 
```

JavaScript：

```
app.factory('sharedModel', function () {
    // private stuff
    var model = {
        value: "initial Value"
    };
    // public API
    return {
        getValue:    function() { 
           return model.value; 
        },
        updateValue: function(value) {
           model.value = value;
        }
    };
});

function BaseController($scope, sharedModel) {
    $scope.model = sharedModel;
}

function DerivedController($scope, sharedModel) {
    $scope.model = sharedModel;
} 
```

[小提琴](http://jsfiddle.net/mrajcok/gY3uZ/)。

另外，我不建议使用 $rootScope 在控制器之间共享。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-13T17:51:33.830

小提琴中的绑定直接在范围内的属性上。您需要的继承可以通过对范围内的对象进行数据绑定来实现。

[http://jsfiddle.net/2Dtyq/](http://jsfiddle.net/2Dtyq/)

```
scope.shared = {}    
scope.shared.value = "Something" 
```

而不仅仅是

```
scope.value= "Something" 
```

怎么了？
在构造 DerivedController 时，传入原型的作用域通常继承自 BaseController 的作用域。
DerivedController 的作用域对象仍然没有自己的名为“值”的属性。因此，它仍然绑定到它从父范围获得的属性。
现在，如果您单击**Update In Base**按钮​​，它将反映在两个绑定中。当您单击**Update In Derived**按钮时，会在 DerviedController 的作用域上创建一个名为“value”的新属性。因此，与父级的 value 属性的绑定被破坏了。再单击**Update In Base**不会刷新第二个数据绑定。
将其放在单独的对象中可防止创建新属性，因此仍保持继承。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-13T14:08:08.450

您不能直接引用子控制器中的字符串值。由于原型继承设置`value`子作用域上的属性（当您使用子控制器时创建）在子作用域上创建该属性，而不是更新父作用域属性。

您的范围不是模型，因此我们应该避免`$scope`使用大量属性污染变量。创建一个模型对象并在其上创建子属性。然后可以将该对象沿子控制器\范围传递。

我修改了你的[jsfiddle](http://jsfiddle.net/6df6S/2/)来解释上述观点。

此外，我强烈建议您浏览此[wiki 页面](https://github.com/angular/angular.js/wiki/The-Nuances-of-Scope-Prototypal-Inheritance)，以了解原型继承的麻烦。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-13T13:06:03.387

看一下[$broadcast](http://docs.angularjs.org/api/ng.$rootScope.Scope#$broadcast)方法。引用文档：

> 向下调度事件名称到所有子作用域（及其子作用域），通知已注册的 ng.$ro​​otScope.Scope#$on 侦听器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-26T05:03:04.073

使用对象而不是使用原始值。在你的情况下定义一个这样的对象

```
$scope.obj = {"value":"base"}; 
```

并尝试（obj.value）。它会起作用的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-26T17:41:14.740

发生这种情况是因为 ngController 创建了一个新的 $scope 并且 value 的引用不一样。您可以使用以下`$parent`属性解决该问题：

```
<div ng-controller="BaseController">
    <p>Base Controller Value: {{value}}</p>
    <div ng-controller="DerivedController">
        <p>Derived Controller Value: {{$parent.value}}</p>
    </div>
</div> 
```

在 DerivedController 中，您可以使用类似的东西：`$scope.$parent.value`

但实现它的最佳方法是使用`controllerAs`语法。

```
<div ng-controller="BaseController as BaseController ">
<p>Base Controller Value: {{BaseController.value}}</p>
<div ng-controller="DerivedController">
    <p>Derived Controller Value: {{BaseController.value}}</p>
</div> 
```

在 DerivedController 中，您可以使用类似的东西：`$scope.BaseController.value`

这使代码更具可读性，因为您知道所引用的控制器是什么。更多关于[ngController Docs](https://docs.angularjs.org/api/ng/directive/ngController#example)或ToddMotto[挖掘 Angular 的“Controller as”语法的信息](http://toddmotto.com/digging-into-angulars-controller-as-syntax/)

# vb.net - 将 PictureBox 图像更改为应用程序文件夹中的图像

> ID：15386139
> 
> 赞同：1
> 
> 时间：2013-03-13T13:02:39.397
> 
> 标签：vb.net, visual-studio-2012, picturebox

我想`PictureBox`从应用程序文件夹加载图像。在下面的代码中，它从确切的位置加载图片。我希望它从应用程序的文件夹中加载图像，这样如果我将它复制到其他计算机，它就可以加载图像。

我该怎么做？

从确切位置加载：

```
PictureBox1.Image = Image.FromFile("D:\68.jpg"); 
```

我希望它是这样的：

```
PictureBox1.Image = Image.FromFile("ApplicationFolder\68.jpg"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T16:22:37.693

使用上面评论中的信息，您可以执行以下操作：

```
PictureBox1.Image = Image.FromFile(System.IO.Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "68.jpg")) 
```

要使用程序集基目录的子目录：

```
PictureBox1.Image = Image.FromFile(System.IO.Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "SomeFolderInBaseDirectory", "68.jpg")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:41:26.217

用于将图像保存在应用程序资源中：

在窗体上添加 PictureBox 控件。选择窗体上的控件并使用属性。在属性选项卡的外观部分下找到图像，然后单击 [...]。选择资源对话框导入您将在应用程序中使用的所有图像。然后从窗体中删除 PictureBox。该应用程序将所有图像保存在资源中

# c++ - C++ 从 BST 中删除一个节点

> ID：15386146
> 
> 赞同：0
> 
> 时间：2013-03-13T13:02:55.320
> 
> 标签：c++, binary-search-tree

我的删除功能有问题。我不知道似乎是什么问题。请帮我解决这个问题。非常感谢您。

```
node* tree_minimum(node *x){

    while(x->left!=NULL){
        x=x->left;
    }
    return x;
}

node* tree_successor(node *x){

    if(x->right!=NULL)
        return tree_minimum(x->right);

    node *y;
    y=new node;
    y=x->parent;

    while(y!=NULL&&x==y->right){
        x=y;
        y=y->parent;
    }
    return y;
}

node* tree_search(node* x,int k){

    if(x==NULL||k==x->key)
        return x;

    if(k<x->key)
        return tree_search(x->left,k);
    else
        return tree_search(x->right,k);
}

node* tree_delete(int b){

    node *y;
    y=new node;
    node *x;
    x=new node;
    node *z;
    z=new node;

    z=tree_search(root,b);

    if(isempty()){
        cout<<"TREE is empty.";
        return NULL;
    }

    if(z->left==NULL||z->right==NULL)
        y=z;
    else
        y=tree_successor(z);

    if(y->left!=NULL)
        x=y->left;
    else
        x=y->right;

    if(x!=NULL)
        x->parent=y->parent;
    if(y->parent==NULL)
        root=x;
    else{

    if(y=y->parent->left)
        y->parent->left=x;
    else
        y->parent->right=x;
    }
    if(y!=z)
        y->key=z->key;

    return y;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:22:23.070

不幸的是，您在这里遇到了很多问题；我认为您误解了内存分配：

```
node *y;
y=new node;
y=x->parent;  // Holy Mackerel! 
```

在第二行分配内存，将地址返回给新分配的内存；下一行更改了 y 指向的地址 (!!) - 丢失分配的内存位置并造成内存泄漏。由于这些分散在整个代码中，并且您没有`main()`显示调用或显示调用的代码 - 没有太多需要继续。

如果您只是复制指针，则不需要执行动态分配（即`new`运算符）。

```
int *x = new int;
int y = 2;
*x = 1;  // Assigns the memory (int) pointed to by x to 1
x = &y;  // Reassigns x to point to y - but without delete the allocated memory's last reference is lost 
```

我真的建议你在继续之前先拿一本书。

编辑：还要注意以下条件：

```
if (y=y->parent->left) 
```

当你最有可能的意思是：

```
if (y == y->parent->left) 
```

逻辑需要浓缩 - 查看一些关于`BST`SO 的帖子，比如这个：

[二叉搜索树实现](https://stackoverflow.com/questions/2619427/binary-search-tree-implementation)

# python - 在机器人框架中使用命名参数

> ID：15386149
> 
> 赞同：0
> 
> 时间：2013-03-13T13:02:58.133
> 
> 标签：python, robotframework, named-parameters

我想将一组命名变量传递给一个关键字：像这样：

```
|  | Bypass | environment=${SystemUnderTest} | device=android | 
```

关键字在python中定义如下：

```
def Bypass(**kwargs):
    print "kwargs", kwargs 
```

这将失败并显示以下错误消息：

> 关键字“agents.Bypass”预期 0 个参数，得到...

但是如果我稍微改变关键字定义，就像这样

```
def Bypass(*args):
    print "args", args 
```

测试有效，我在我的日志中得到了这个：

> INFO args (u'environment=staging', u'device=android')

我怎样才能传入我的命名参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:09:07.780

Afaik 这不是您可以从关键字中做的事情。如果我需要这种灵活的东西，我的解决方案就是：

```
def bypass(kwargs):
    print "kwargs", kwargs

|  | ${kwargs}= | Evaluate | dict(environment=${SystemUnderTest}, device=android)
|  | Bypass | ${kwargs} 
```

或者，

```
def bypass(*args):
    kwargs = {}
    while args:
        kwargs[args.pop(-2)] = args.pop()
    print "kwargs", kwargs

|  | Bypass | environment | ${SystemUnderTest} | device | android 
```

# php - 在phpquery中获取节点值

> ID：15386152
> 
> 赞同：1
> 
> 时间：2013-03-13T13:03:15.840
> 
> 标签：php, html, dom, phpquery

在抓取我的 html 页面后，我试图从 phpquery 获取节点值。

```
$doc = phpQuery::newDocumentFileHTML('myurl');

foreach($doc['#filter-reload.row h1'] as $value)
{
print_r($value);
exit;
} 
```

我得到的输出为

```
DOMElement Object ( [tagName] => h1 [schemaTypeInfo] => [nodeName] => h1 
[nodeValue] => Oz The Great And Powerful (PG) [nodeType] => 1 [parentNode] => (object value omitted) 
[childNodes] => (object value omitted) [firstChild] => (object value omitted) [lastChild] => (object value omitted) [previousSibling] => (object value omitted) 
```

我只想要 nodeValue 作为输出......但是如何得到它？

我试过：-

```
$doc['#filter-reload.row h1']->nodeValue //not working
$doc['#filter-reload.row h1']['nodeValue']//notworking 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:23:56.713

试试这个它会工作.......

```
$doc = phpQuery::newDocumentFileHTML('myurl');
$new_data = array();
foreach($doc['#filter-reload.row h1'] as $value)
{
    $new_data[] = $value->nodeValue;
} 
```

# android - 如何在 android 中单独为平板电脑提供方向支持？

> ID：15386157
> 
> 赞同：3
> 
> 时间：2013-03-13T13:03:28.103
> 
> 标签：android, orientation, tablet

嗨，我正在开发一个 android 应用程序，我想单独为 android 平板电脑提供方向支持，我不想为手机提供方向支持。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:53:21.287

我认为你可以分两步做到这一点。

第一步 - 确定设备是平板电脑还是手机。您可以通过设置一个特定的布尔值来完成此操作，该布尔值将根据屏幕尺寸指示您正在处理的设备类型。执行此操作的技术在此处的 android 文档和[此处](http://developer.android.com/training/multiscreen/screensizes.html#TaskUseSWQuali)的另一个 StackOverflow 帖子中进行[了说明](https://stackoverflow.com/questions/9279111/determine-if-the-device-is-a-smartphone-or-tablet)

第二步 - 如果您正在处理电话，请以所需的方式设置方向。您可以使用

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
```

这应该只将方向设置为指定的方式。要使其保持该方向，您需要覆盖活动对配置更改的响应方式。

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
} 
```

通过覆盖`onConfigurationChanged`，您应该能够让手机忽略旋转并允许平板电脑识别它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:07:33.347

简单的解决方案创建分离

> 活动

适用于平板电脑和手机

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T14:22:37.190

您可以通过进行一些小的更改轻松地做到这一点：

首先将您的 xml 布局添加到以下文件夹：

```
layout-sw600dp //Based upon device size
layout-sw720dp 
```

有关更多信息，请查看[此](http://developer.android.com/guide/practices/screens_support.html)链接和此[链接](http://developer.android.com/training/multiscreen/screensizes.html)

# iphone - 适用于 iOS 的 PayPal SDK：恢复购买的商品

> ID：15386161
> 
> 赞同：0
> 
> 时间：2013-03-13T13:03:39.253
> 
> 标签：iphone, ios, in-app-purchase, paypal

有人玩过适用于 iOS 的 PayPal SDK（[链接](https://developer.paypal.com/webapps/developer/docs/integration/mobile/ios-integration-guide/)）吗？我已经在一个应用程序上成功实现了它。我的问题是，对于非消耗品（例如，删除您应用上的广告），有没有办法知道用户之前是否购买过该商品？我希望用户能够在更改设备、重新安装应用程序或其他内容时恢复购买的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:58:28.607

Apple 要求通过 StoreKit 购买所有数字商品（例如删除广告），因此无论如何您都不能使用 PayPal iOS SDK。也就是说，答案是否定的——SDK 目前只帮助促进支付，而不是跟踪客户端的历史记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:51:03.247

您可以通过多种方式验证买家是否已完成付款。您可以使用 TransactionSearch API 搜索您的 PayPal 帐户购买买家的电子邮件地址以查看他们是否已向您付款，然后您可以获取详细信息。此外，如果您使用 IPN 在您的系统/服务器上记录您的交易，您还可以查询您自己的数据库以查找来自买方的任何交易。

# c++ - vs2008 c++ 用键盘拖动调试器的箭头

> ID：15386162
> 
> 赞同：3
> 
> 时间：2013-03-13T13:03:39.423
> 
> 标签：c++, visual-studio-2008, visual-studio-debugging

在调试模式下，有一个黄色箭头显示下一个要执行的命令。有没有办法用键盘（而不是鼠标）拖动那个箭头？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T13:08:24.643

据我所知，不是直接的。

但是，您可以使用键盘导航到下一个要执行的语句，然后点击++ 调用`Ctrl`Set `Shift`Next [Statement](http://msdn.microsoft.com/en-us/library/09yze4a9%28v=vs.90%29.aspx)命令。`F10`

# android - 在 Nexus S 中插入 Loadable-Kernel-Module 会重新启动它

> ID：15386166
> 
> 赞同：0
> 
> 时间：2013-03-13T13:03:52.557
> 
> 标签：android, linux, linux-kernel

我已经从 source.android.com 下载了三星内核并构建了它。然后首先我安装了 CWM 恢复映像，然后将我的 Nexus S (Android 4.1.1) 植根。现在我想将简单的可加载内核模块（LKM）插入其中，但是当我通过`insmod hello.ko`在 ADB shell 上编写命令插入模块时，设备会在 2-3 秒后自动重启。

下面是我的 LKM 代码。

```
#include <linux/module.h>
#include <linux/kernel.h>

int init_module(void)
{
    printk(KERN_INFO "Hello android kernel...\n");
    return 0;
}

void cleanup_module(void)
{
    printk(KERN_INFO "Goodbye android kernel...\n");
} 
```

我不知道那是什么问题。它没有显示错误消息或其他任何内容，只是重新启动并在重新启动后开始正常运行。

**编辑**

我已经用 Android 2.2 编译了三星内核，并使用这个内核编译了我的 LKM。这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:01:26.430

使用以下命令下载 Nexus S 的内核源代码后

`git clone https://android.googlesource.com/kernel/samsung.git`

文件夹显示为空。这是因为我们必须签出 git 远程分支。通过编写 `git branch -r' 显示以下远程分支列表

`origin/HEAD -> origin/master
origin/android-samsung-2.6.35-gingerbread
origin/android-samsung-3.0-ics-mr1
origin/android-samsung-3.0-jb
origin/android-samsung-3.0-jb-mr0
origin/master`

我的错误是我选择了`origin/android-samsung-3.0-ics-mr1` 分支，但`origin/android-samsung-3.0-jb`分支用于果冻豆 4.1.2。这就是为什么我的 LKM 没有使用正确的内核版本编译，因此在每次插入时都重新启动设备。

# push-notification - 推送通知服务器

> ID：15386168
> 
> 赞同：20
> 
> 时间：2013-03-13T13:03:53.127
> 
> 标签：push-notification, apple-push-notifications, google-cloud-messaging

我需要至少为 APNS、GCM 实现服务器端推送通知服务。我可以从任何适合生产环境的值得信赖的开源项目开始？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-08-19T14:29:53.263

[AirNotifier](http://airnotifier.github.io/)，独立的通知服务器，支持 APNS、GCM、MPNS/WNS（windows phone）和 SMS，它是用 Python 编写的，带有 Restful API 和易于使用的 Web 界面。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-05-18T21:13:51.163

我建议看一下由 redhat / jboss 维护的[AeroGear](https://aerogear.org/)，因此[文档](https://aerogear.org/docs/specs/)比此处列出的任何其他项目都要好得多。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-08-14T00:26:21.330

有一个您可能感兴趣的名为**pushd** ( [https://github.com/rs/pushd ) 的项目。它支持适用于 Android 的 GCM (Google Cloud Messaging) 和 APNS (Apple Push Notification Service) 以及 Microsoft 的推送服务。](https://github.com/rs/pushd)

pushd 是一个 nodejs 项目，它公开了一个易于使用的 JSON/http 接口。有很棒的调试/日志记录选项。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-14T05:05:35.537

您没有指定一种语言，这使得推荐某些东西变得更加困难。如果我们假设 Java，您可以查看[javapns](https://code.google.com/p/javapns/)或[java-apns](https://github.com/notnoop/java-apns)，它们似乎都是流行的选择。

对于 GCM，Google 发布了自己的[服务器端 Java API](http://developer.android.com/reference/com/google/android/gcm/server/package-summary.html)，这似乎是显而易见的选择。

如果 Java 不是您选择的语言，您当然可以通过谷歌搜索一些基本术语以您自己的语言找到一个项目。如果您想了解它的支持程度或存在哪些问题，通常会有一些问题涉及 Stackoverflow 上的特定项目。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-13T13:13:12.190

### 对于 APNS：

我使用 Javapns [https://code.google.com/p/javapns/](https://code.google.com/p/javapns/)

*   非常容易使用
*   好的文档
*   易于在苹果的开发和生产服务器之间切换

# asp.net - 在我关闭浏览器之前，Visual Studio 不会停止调试

> ID：15386169
> 
> 赞同：2
> 
> 时间：2013-03-13T13:03:55.370
> 
> 标签：asp.net, visual-studio-2010, google-chrome, firefox

我遇到了以下问题，这个问题并不是一直发生，而是有时会发生，尽管一旦问题出现，它不会消失，直到我重新启动我的电脑：

当我在 google chrome 或 firefox 中调试并且我希望停止调试时，我按下蓝色方形按钮 (SHIFT+F5)。这会导致 Visual Studio 挂起，我必须明确关闭 chrome 或 firefox 中所有打开的浏览器以阻止 Visual Studio 冻结。这有点烦人，但每次我运气不好时都不值得重新启动一切。

有谁知道这个问题的解决方法？或者有谁知道这种行为可能是什么原因，所以我可以避免它？

# python - 将 href 值与正则表达式匹配

> ID：15386170
> 
> 赞同：0
> 
> 时间：2013-03-13T13:03:59.563
> 
> 标签：python, regex

我的输入与此类似：

```
<a href="link">text</a> <a href="correctLink">See full summary</a> 
```

我只想从此字符串中获取`correctLink`（将*完整摘要*视为文本的链接）。

我正在使用 python，我尝试过：

```
re.compile( '<a href="(.*?)">See full summary</a>', re.DOTALL | re.IGNORECASE ) 
```

但我得到的唯一字符串`findall()`是`link">text</a> <a href="correctLink`.

我的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:07:11.237

将链接模式限制为非引号字符：

```
re.compile('<a href="([^"]+?)">See full summary</a>', re.DOTALL | re.IGNORECASE) 
```

给予：

```
>>> import re
>>> patt = re.compile('<a href="([^"]+?)">See full summary</a>', re.DOTALL | re.IGNORECASE)
>>> patt.findall('<a href="link">text</a> <a href="correctLink">See full summary</a>')
['correctLink'] 
```

更好的是，使用适当的 HTML 解析器。

使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)，找到该链接将很容易：

```
soup.find('a', text='See full summary')['href'] 
```

对于精确的文本匹配：

```
>>> from bs4 import BeautifulSoup
>>> soup=BeautifulSoup('<a href="link">text</a> <a href="correctLink">See full summary</a>')
>>> soup.find('a', text='See full summary')['href']
u'correctLink' 
```

# asp.net - Asp.net 自定义验证器控件

> ID：15386176
> 
> 赞同：0
> 
> 时间：2013-03-13T13:04:21.037
> 
> 标签：asp.net, webforms

这是我的问题：我们对某些字段使用自定义验证器。现在我们要更改验证标记。现在是这样的： `<span id="CreateProfile_EmailValidator">Email is in Incorrect Format</span>`。

我可以以某种方式更改此标记吗？例如添加一些`<div>`元素？

UPD：我没有寻找一次性的解决方法。（请参阅对 MikeSmithDev 答案的讨论）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:34:50.607

您可以继承自`BaseValidator`或`CustomValidator`类并覆盖`Render`方法，然后生成您想要的任何标记。

```
public class MyCustomValidator : CustomValidator
{
    protected override void Render(HtmlTextWriter writer)
    {
        writer.RenderBeginTag("div");
        base.Render(writer);
        writer.RenderEndTag();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T09:28:26.710

使用[WebControlAdapter](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.adapters.webcontroladapter%28v=vs.90%29.aspx)更改`CustomValidator`呈现方式。您将需要覆盖`RenderBeginTag`和`RenderEndTag`方法以在默认跨度周围呈现您的 div。

```
public class CustomValidatorAdapter : WebControlAdapter
{
    protected override void RenderBeginTag(HtmlTextWriter writer)
    {
        writer.RenderBeginTag("div");
                base.RenderBeginTag(writer);
    }

    protected override void RenderEndTag(HtmlTextWriter writer)
    {
                base.RenderEndTag(writer);
        writer.RenderEndTag(); // this will close div
    }
} 
```

要将此适配器连接到您的应用程序，您有两种选择。首先是在页面**构造函数**中以编程方式进行：

```
var adapters = Context.Request.Browser.Adapters;
var customValidatorType = typeof(CustomValidator).AssemblyQualifiedName;
var adapterType = typeof(CustomValidatorAdapter).AssemblyQualifiedName;
if (!adapters.Contains(customValidatorType))
{
    adapters.Add(customValidatorType, adapterType);
} 
```

第二种选择是使用`.browser`文件：

将新的添加`Browser File`到您的项目中。它将驻留在`App_Browsers`文件夹中。然后用以下声明替换内容：

```
<browsers>
    <browser refID="Default">
            <controlAdapters>
                <adapter controlType="System.Web.UI.WebControls.CustomValidator" 
                         adapterType="<your namespace>.CustomValidatorAdapter" />
            </controlAdapters>
    </browser>
</browsers> 
```

# django - 从其他 Django 应用程序渲染 django-cms 页面

> ID：15386183
> 
> 赞同：2
> 
> 时间：2013-03-13T13:04:38.820
> 
> 标签：django, django-cms, django-apps

**有什么方法可以从另一个 Django 应用程序的视图中渲染一个 django-cms 页面，并修改上下文？**

...我知道“django-cms 方式”是通过插件和挂钩将您的其他应用程序集成到 django-cms 中。但我想反过来做，因为这对我来说更有意义，并且更容易重用应用程序，我没有找到关于如何做到这一点的文档。应该有一种简单的方法可以从我的视图中调用 django-cms 视图并执行一些“巫术”来使其工作，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-13T14:40:57.783

```
from cms.views import details

def show_some_page(request):
    return details(request, 'slug_of_page_to_show') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:09:33.577

我过去解决这个问题的方法是使用 urllib2（或请求）对 URL 进行获取请求，并从响应中提取相关部分。

```
...
site = Site.objects.get_current()
protocol = 'http' if DEBUG else 'https'
response = urllib2.urlopen('%s://%s%s' % (protocol,
    site.domain, page.get_absolute_url()))  # page is a Django-CMS page object
html_content = response.read()
response.close()
... 
```

Django-CMS 中的每个`page`对象都有一个`.get_absolute_url()`方法，这就是我以编程方式获取 URL 以请求的方式，但据我所知，[Django-CMS API](http://docs.django-cms.org/en/2.3.5/extending_cms/api_references.html)没有呈现页面的方法。

如果有不同/更好的方法可以做到这一点，我很想看看它是什么。

# java - Java 中的 ThreadLocal 向量清理

> ID：15386187
> 
> 赞同：0
> 
> 时间：2013-03-13T13:04:47.507
> 
> 标签：java, vector, thread-local

我知道[这个](https://stackoverflow.com/questions/3869026/how-to-clean-up-threadlocals)类似的问题，但我的问题涉及 ThreadLocal 清理的特定情况。

为了在线程基础上维护状态，我将（未知）数量的 ThreadLocals 存储在静态向量中。有时，“贪婪”线程需要更多可用的 ThreadLocals，因此向量大小会增加。虽然在我的场景中使用 ThreadLocal.remove() 进行清理不是问题，但我想知道在贪婪线程死亡后是否有可能缩小 Vector 大小，或者它是否只会增长（或充其量保持不变） ）。

澄清一下：我的理解是，对于任何给定的 ThreadLocal，每个线程都会存在不同的实例。那么，当从线程 A 访问它时，我的静态 Vector 怎么知道 ThreadLocal T 的值对于所有现有线程都是空的？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:11:09.177

请在此处查看官方文档： [Vector.trimToSize()](http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html#trimToSize%28%29 "看这里")

或者：[Vector.setSize()](http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html#setSize%28int%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:58:59.857

你试图完成的任务是不合逻辑的。从当前线程中，您无法知道 ThreadLocal 是否被另一个线程使用以及有多少线程正在使用它。您可以尝试将 ThreadLocals 与 WeakHashMap（或 Guava 的缓存）结合使用，但这将是一个非常奇怪的解决方案，请尝试防止 ThreadLocals 的增长。

# android - 使用 Facebook SDK 3.0 登录 facebook

> ID：15386190
> 
> 赞同：4
> 
> 时间：2013-03-13T13:04:59.650
> 
> 标签：android, facebook, session, login, sdk

现在，我需要单击一个按钮，然后单击该按钮以使用 facebook 警报激活登录。

现在，直到现在，我一直使用旧代码，它可以工作，但已被弃用，所以我需要使用我无法理解的新代码。它在哪里使用 APP_ID 字符串？现在我使用了 HelloFacebookSample 和 SessionLoginSample，但是当我尝试在手机上运行它们时它们都崩溃了。然后我尝试了这段代码： [https](https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/) ://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/ 但它也是一样的。

这就是 logcat 所说的：

```
 03-13 14:55:46.497: E/AndroidRuntime(28849): java.lang.RuntimeException: Unable to start activity ComponentInfo{ro.koolnet.android/ro.koolnet.android.ui.activities.LoginActivity}: java.lang.NullPointerException: Argument applicationId cannot be null
 03-13 14:55:46.497: E/AndroidRuntime(28849):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2190)
 03-13 14:55:46.497: E/AndroidRuntime(28849):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2215)
 03-13 14:55:46.497: E/AndroidRuntime(28849):   at android.app.ActivityThread.access$600(ActivityThread.java:145)
 03-13 14:55:46.497: E/AndroidRuntime(28849):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1211)
 03-13 14:55:46.497: E/AndroidRuntime(28849):   at android.os.Handler.dispatchMessage(Handler.java:99)
 03-13 14:55:46.497: E/AndroidRuntime(28849):   at android.os.Looper.loop(Looper.java:137)
 03-13 14:55:46.497: E/AndroidRuntime(28849):   at android.app.ActivityThread.main(ActivityThread.java:4978)
 03-13 14:55:46.497: E/AndroidRuntime(28849):   at java.lang.reflect.Method.invokeNative(Native Method)
 03-13 14:55:46.497: E/AndroidRuntime(28849):   at java.lang.reflect.Method.invoke(Method.java:511)
 03-13 14:55:46.497: E/AndroidRuntime(28849):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
 03-13 14:55:46.497: E/AndroidRuntime(28849):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
 03-13 14:55:46.497: E/AndroidRuntime(28849):   at dalvik.system.NativeStart.main(Native Method)
 03-13 14:55:46.497: E/AndroidRuntime(28849): Caused by: java.lang.NullPointerException: Argument applicationId cannot be null
 03-13 14:55:46.497: E/AndroidRuntime(28849):   at com.facebook.internal.Validate.notNull(Validate.java:29)
 03-13 14:55:46.497: E/AndroidRuntime(28849):   at com.facebook.Session.<init>(Session.java:224)
 03-13 14:55:46.497: E/AndroidRuntime(28849):   at com.facebook.Session.<init>(Session.java:209)
 03-13 14:55:46.497: E/AndroidRuntime(28849):   at com.facebook.UiLifecycleHelper.onCreate(UiLifecycleHelper.java:73) 
```

有人可以帮我提供一个工作教程/示例吗？

现在我也试过这个代码： [https ://github.com/fbsamples/android-3.0-howtos/blob/master/LoginHowTo/src/com/facebook/samples/loginhowto/MainFragment.java](https://github.com/fbsamples/android-3.0-howtos/blob/master/LoginHowTo/src/com/facebook/samples/loginhowto/MainFragment.java)

但我仍然得到同样的错误。现在，我查看了 logcat，它崩溃了，因为 application_id 为空（在 sdk 代码中）。现在他们通过使用 UIhelper 来实例化它。但是当我创建 uihelper (UiLifecycleHelper) 时，我没有将 APP_ID 传递给它的选项，为什么？我应该有可能在某个地方传递 application_id 吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-13T14:05:41.693

我必须在清单中包含应用程序 ID，如下所示：

```
<meta-data android:name="com.facebook.sdk.ApplicationId" android:value="@string/app_id"/> 
```

我有这个代码： [https](https://github.com/fbsamples/android-3.0-howtos/tree/master/LoginHowTo) ://github.com/fbsamples/android-3.0-howtos/tree/master/LoginHowTo 但唯一的区别是我需要有一个活动，没有片段，所以我改变 `authButton.setFragment(this);`了`authButton.setSessionStatusCallback(callback);` 现在唯一的问题就是，我登录后，通过对话框，它没有进入我的`onSessionStateChange`.

# c# - 在 WCF 中使用 MvcMailer

> ID：15386191
> 
> 赞同：5
> 
> 时间：2013-03-13T13:04:59.797
> 
> 标签：c#, .net, wcf, asp.net-mvc-4, mvcmailer

我们正在创建一个应用程序，它使用 ASP.NET MVC4 的 Web 应用程序和 WCF 的访问公共数据存储的 Web 服务。

Web 应用程序使用 MvcMailer 发送电子邮件，我希望有人可以向我指出一些资源，这些资源也显示了如何从 WCF 使用 MvcMailer（如果存在上述资源）。

我经历过：[https ://github.com/smsohan/MvcMailer/issues/44](https://github.com/smsohan/MvcMailer/issues/44)

我宁愿不推出自己的代码，但如果没有更好的解决方案，我愿意走这条路。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-09T13:28:20.317

我是在 GitHub 上发布该问题的人。现在没有资源可以做到这一点，所以我必须自己弄清楚。这是我写给同事的小指南。我应该把它发布到网上某个地方。

如何允许 MvcMailer 在您的 WCFService 中运行。

1) 启用 HttpContext

A）将以下内容添加到您的 Web.Config

```
<system.serviceModel>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" aspNetCompatibilityEnabled="true" />   
</system.serviceModel> 
```

B) 将以下属性添加到您的服务类。

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
//public class MyService
//{
//  ...
//} 
```

2) 启用剃刀

A）将以下内容添加到您的 Web.Config

```
<system.web>
    <compilation debug="true" targetFramework="4.0">
        <assemblies>
            <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
            <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
            <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        </assemblies>
        <buildProviders>
            <add extension=".cshtml" type="System.Web.WebPages.Razor.RazorBuildProvider, System.Web.WebPages.Razor"/>
        </buildProviders>
    </compilation>
</system.web> 
```

B) 将以下引用添加到 WCF 服务项目。

```
System.Web.WebPages
System.Web.WebPages.Razor 
```

C) 选择引用，右键单击并打开它们的属性。然后设置以下属性：

```
Copy Local = true 
```

完毕！MvcMailer 现在将在您的 WCF 服务中工作！

# javascript - 使用 jQuery，通过 id 选择一个 Div，通过从下拉列表中选择并将其绘制在另一个 Div 中

> ID：15386192
> 
> 赞同：3
> 
> 时间：2013-03-13T13:05:00.757
> 
> 标签：javascript, jquery, html

**这是未完成的脚本：**

```
<script type="text/javascript">
        $(document).ready(function(){
           $('#box1').hide();
           $('#box2').hide();
           $('#box3').hide();
           $("#thechoices").change(function(){
              if(this.value == 'all'){
                     $("#boxes").children().show();
                  }else{
                     $("#" + this.value).show().siblings().hide();
                  }
           });          
           $("#thechoices").change(); 
        });
</script> 
```

* * *

HTML是：

```
<div id="SelectedBoxContainer">
    <!--Selected DivByID goes here-->
</div>

<!--Selected one of these Divs-->
<div id="boxes">
    <div id="box1"><p>Box 1 stuff…&lt;/p></div>
    <div id="box2"><p>Box 2 stuff…&lt;/p></div>
    <div id="box3"><p>Box 3 stuff…&lt;/p></div>
    <div id="box4"><p>Box 1 stuff…&lt;/p></div>
    <div id="box5"><p>Box 2 stuff…&lt;/p></div>
    <div id="box6"><p>Box 3 stuff…&lt;/p></div>
</div> 
```

我需要的是使用 Dropdownlist 从*div id="boxes"*中选择一个 div并将其绘制在*div id="SelectedBoxContainer"*内，

如何做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:17:35.937

您可以使用 来移动 div `.appendTo()`，但您的 HTML 目前不太适合维护它。我会在`<div>`正在显示/隐藏/移动的 s 上放置一个类，以便您可以更轻松地跟踪它们：

```
<div id="boxes">
    <div id="box1" class="resultBox"><p>Box 1 stuff…&lt;/p></div>
    <div id="box2" class="resultBox"><p>Box 2 stuff…&lt;/p></div>
    <div id="box3" class="resultBox"><p>Box 3 stuff…&lt;/p></div>
    <div id="box4" class="resultBox"><p>Box 1 stuff…&lt;/p></div>
    <div id="box5" class="resultBox"><p>Box 2 stuff…&lt;/p></div>
    <div id="box6" class="resultBox"><p>Box 3 stuff…&lt;/p></div>
</div> 
```

现在您可以重写您的更改处理程序：

```
$("#thechoices").change(function(){
    if(this.value == 'all'){
        $(".resultBox").appendTo($("#SelectedBoxContainer")).show();
    }else{
        $(".resultBox:not(#" + this.value + ")").hide().appendTo($("#boxes"));
        $("#" + this.value).appendTo($("#SelectedBoxContainer")).show();
    }
}); 
```

诀窍是当 .appendTo() 只有一个目标元素时，jQuery 将移动而不是克隆 DOM 中已经存在的元素。

请注意，此解决方案不会保留 div 的顺序。由于它隐藏了未选中的那些，因此只有在全部选中时才会出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:12:38.820

如果您只想在 中显示它们，则不需要显示和隐藏 div `SelectedBoxContainer`，您可以执行以下操作：

```
var selectBox = $('#SelectedBoxContainer')
selectBox.empty();

var clone = $("#" + this.value).clone();
clone.appendTo(selectBox);
clone.show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:09:42.160

假设您在更改事件后获得的值与 div id 匹配。

试试这个

```
$("#thechoices").change(function(){
          if(this.value == 'all'){
                 $("#boxes").children().show();
              }else{
                  $("#" + this.value).show().siblings().hide();
                  $('#SelectedBoxContainer').html($("#" + this.value).clone());
              }
       }); 
```

# php - 多维数组的切换顺序

> ID：15386193
> 
> 赞同：0
> 
> 时间：2013-03-13T13:05:06.833
> 
> 标签：php

我有以下数组：

```
Array
(
    [type] => Array
        (
            [1] => default
            [2] => customer
        )

    [direction] => Array
        (
            [1] => forward
            [2] => backward
        ) 
```

我怎么能把它转换成：

```
Array
(
    [1] => Array
        (
            [type] => default
            [direction] => forward
        )

    [2] => Array
        (
            [type] => customer
            [direction] => backward
        ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T13:10:21.587

```
$array = array_map(
    function ($type, $direction) { return compact('type', 'direction'); },
    $array['type'],
    $array['direction']
); 
```

或者对于动态键数：

```
$array = call_user_func_array(
    'array_map',
    array_merge(
        array(function () use ($array) {
            $values = func_get_args();
            return array_combine(array_keys($array), $values);
        }),
        $array
    )
); 
```

是的，我很喜欢数组，谢谢你的提问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:08:25.377

尝试这个 ：

```
$res     = array();
foreach($your_array as $key=>$val){
   foreach($val as $k=>$v){
      $res[$k][$key]  = $v;
   }
}

echo "<pre>";
print_r($res); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T13:08:36.043

下面的代码将做你想做的事。

```
$newar = array();
foreach($ar as $key=>$val) {
  foreach ($val as $k=>$v) {
    $newar[$k][$key] = $v;
  }
}
var_dump($newar); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T13:08:59.493

Try with:

```
$input  = array( /* your data */ );
$output = array();

foreach ( $input as $key => $data ) {
  foreach ( $data as $k => $v ) {
    if ( !isset($output[$k]) ) {
      $output[$k] = array();
    }
    $output[$k][$key] = $v;
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T13:09:30.973

This seems to do the trick:

```
 $array = array(

    'foo' => array(

      1 => 'default',
      2 => 'customer',

    ),

    'foo2' => array(

      1 => 'forward',
      2 => 'backward',

    ),

  );

  $new_array = array();

  foreach ($array as $key => $value)
  {

    foreach ($value as $k => $v)
    {

      if (!isset($new_array[$k]))
      {
        $new_array[$k] = array();
      }

      $new_array[$k][$key] = $v;

    }

  }

  echo '<pre>' . print_r($new_array, true). '</pre>'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T13:12:27.577

您正在寻找多维数组翻转。我在 php.net 上找到了这段代码

```
<?php
function multi_array_flip($arrayIn, $DesiredKey, $DesiredKey2=false, $OrigKeyName=false) {
$ArrayOut=array();
foreach ($arrayIn as $Key=>$Value)
    {
        // If there is an original key that need to be preserved as data in the new array then do that if requested ($OrigKeyName=true)
        if ($OrigKeyName) $Value[$OrigKeyName]=$Key;
        // Require a string value in the data part of the array that is keyed to $DesiredKey
        if (!is_string($Value[$DesiredKey])) return false;

        // If $DesiredKey2 was specified then assume a multidimensional array is desired and build it
        if (is_string($DesiredKey2))
        {
            // Require a string value in the data part of the array that is keyed to $DesiredKey2
            if (!is_string($Value[$DesiredKey2])) return false;

            // Build NEW multidimensional array
            $ArrayOut[$Value[$DesiredKey]][$Value[$DesiredKey2]]=$Value;
        }

            // Build NEW single dimention array
        else $ArrayOut[$Value[$DesiredKey]][]=$Value;
    }
return $ArrayOut;
}//end multi_array_flip
?> 
```

我相信这应该做你想做的事，但我没有测试过。

# asp.net-mvc-4 - ASP：NET MVC4 url 路由在不同命名空间中具有相同名称的控制器

> ID：15386196
> 
> 赞同：2
> 
> 时间：2013-03-13T13:05:09.433
> 
> 标签：asp.net-mvc-4, controller, url-routing, subdirectory

在我的 Asp.NET MVC4 web 项目中，我有很多控制器，我想将它们放入文件夹“Controllers”下的子目录中。一些控制器由于其主要工作而具有相同的名称，但它们将放在不同的子目录下，这意味着不同的命名空间。我想为这些控制器做一个 url 路由。如何让路由考虑存在同名控制器的命名空间？你能在 Global.asax 文件中展示一些如何做到这一点的代码吗？
非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T13:16:14.187

您需要多个 MapRoute-s - 每个命名空间至少一个。

```
 // match all controllers in first namespace
 routes.MapRoute(
    name: "Namespace1Routes",
    url: "path1/{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional },
    namespaces: new[] { "My.Namespace1" }
 );

 // match all controllers in second and third namespaces
 routes.MapRoute(
    name: "Namespace2Routes",
    url: "path2/{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional },
    namespaces: new[] { "My.Namespace2", "My.Namespace3" }
 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:11:17.043

```
routes.MapRoute(
"Home",
"Index/{id}",
new { controller = "Home", action = "Index", id = UrlParameter.Optional },
new string[] { "Project.Controllers" } 
```

);

> Project.Controllers -is 命名空间

# arrays - VB.net 类 - 对象引用未设置为对象的实例？

> ID：15386198
> 
> 赞同：0
> 
> 时间：2013-03-13T13:05:15.527
> 
> 标签：arrays, vb.net, class, object, instance

我正在开发一个给我带来麻烦的 VB 应用程序。来自 Java 和 C++，VB 的类语法是奇特的。我有我的主要形式，以及我创建的一个名为`WebElement`. 我将类导入并声明了一个's`MainForm.vb`数组。`WebElement`当我尝试设置或获取`Name`“WebElement”数组的第一个元素的属性时，它给了我一个错误- **“对象引用未设置为对象的实例？”** 这是什么意思，我该如何解决？

**代码**
`MainForm.vb`

```
Imports MyProgram.WebElement

Public Class MainForm

    Private webpage(0 To 9) As WebElement
    Private pageNum As Integer = 0

    Private Sub openFile() Handles OpenToolStripMenuItem.Click
        webpage(pageNum).setName("rawr")
        MsgBox(webpage(pageNum).getName())
    End Sub

End Class 
```

* * *

`WebElement.vb`

```
Public Class WebElement

    Private Name As String

    Public Function setName(ByRef n As String)
        Name = n
    End Function

    Public Function getName()
        Return Name
    End Function

End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:14:36.480

VB.NET 中的类语法可能很奇特，但类的*用法*与 Java 和 C++ 非常相似。

特别是，类*类型的**定义*（您已经编写并导入到代码文件中）与该类类型的*对象之间存在差异。*后者是您所缺少的。*`WebElement.vb``MainForm.vb`*

 **您需要`WebElement`在代码中创建（实例化）类类型的对象。您现在声明的数组是空的（即，它的所有元素都是空的）。你所做的只是*宣布*它。除非您要求编译器这样做，否则编译器不会创建并用对象填充它。

您需要使用新对象*初始化*数组中的元素。您可以使用`New`关键字来执行此操作。语法如下所示：

```
webpage(0) = New WebElement()   ' initializes the first element in the array
                                ' with a new WebElement object 
```

如果您愿意，也可以在声明数组元素时内联初始化它。为了让这个魔法发生，你省略了声明左侧的大小，并在右侧使用了一个初始化列表，如下所示：

```
Dim webpage() As WebElement = {
                               New WebElement(),
                               New WebElement(),
                               New WebElement(),
                               New WebElement(),
                               New WebElement(),
                               New WebElement(),
                               New WebElement(),
                               New WebElement(),
                               New WebElement(),
                               New WebElement()
                              } 
```

但是这种语法对于长数组来说变得相当笨拙，所以大多数人更喜欢在声明和创建对象后立即循环数组的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T13:10:19.053

你不用 填充你的数组`WebElements`，你只告诉它它需要的大小。`webpage(pageNum)`空对象也是如此。

尝试

```
Private Sub openFile() Handles OpenToolStripMenuItem.Click
    webpage(pageNum) = New WebElement()
    webpage(pageNum).setName("rawr")
    MsgBox(webpage(pageNum).getName())
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T13:10:40.130

这条线

```
 Private webpage(0 To 9) As WebElement 
```

声明一个包含 10 个元素的数组，这些元素的类型应为 WebElement。
数组中不存在任何元素。所以每个插槽都是空的（在 C# 中为空）。
在 null 元素上调用方法将产生 NullReferenceException

您应该在调用方法之前检查您的元素，如果它为空，则创建元素并将其分配给所需的插槽

```
Private Sub openFile() Handles OpenToolStripMenuItem.Click
    if webpage(pageNum) Is Nothing Then
       webpage(pageNum) = new WebElement()
    End If
    webpage(pageNum).setName("rawr")
    MsgBox(webpage(pageNum).getName())
End Sub 
```

附带说明一下，为什么不尝试使用 NET 语法来实现类属性

```
Public Class WebElement

    Private Name As String
    Public Property Name() As String
        Get
            Return Name
        End Get
        Set(ByVal value As String)
            Name = value
        End Set
    End Property
End Class 
```

然后在你的代码中使用它

```
 webpage(pageNum).Name = "rawr"
 MessageBox.Show(webpage(pageNum).Name) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T13:09:56.373

That means NullPointerException because the objects haven´t been initialized, just like in java.

try

`Private webpage(0 To 9) As New WebElement`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T13:07:18.903

您已创建`webpage`数组，但其所有元素均为空，因此`webpage(pageNum).setName("rawr")`取消引用空对象**

# java - 在 ndk 中找不到本地的实现

> ID：15386204
> 
> 赞同：3
> 
> 时间：2013-03-13T13:05:39.283
> 
> 标签：java, android, android-ndk, java-native-interface

我遇到了一个错误，使用jni ...我在android活动类中有一个简单的本机方法并为此创建了头文件并为此实现了c文件...找不到错误请帮助

这是我拥有的文件

活动

```
static{
        System.loadLibrary("fluidsynth");
    }

    private  native String textOverjni(); 
```

头文件

```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class com_example_fluidsynthtest_MyFluidSynthO */

#ifndef _Included_com_example_fluidsynthtest_MyFluidSynthO
#define _Included_com_example_fluidsynthtest_MyFluidSynthO
#ifdef __cplusplus
extern "C" {
#endif
#undef com_example_fluidsynthtest_MyFluidSynthO_MODE_PRIVATE
#define com_example_fluidsynthtest_MyFluidSynthO_MODE_PRIVATE 0L
#undef com_example_fluidsynthtest_MyFluidSynthO_MODE_WORLD_READABLE
#define com_example_fluidsynthtest_MyFluidSynthO_MODE_WORLD_READABLE 1L
#undef com_example_fluidsynthtest_MyFluidSynthO_MODE_WORLD_WRITEABLE
#define com_example_fluidsynthtest_MyFluidSynthO_MODE_WORLD_WRITEABLE 2L
#undef com_example_fluidsynthtest_MyFluidSynthO_MODE_APPEND
#define com_example_fluidsynthtest_MyFluidSynthO_MODE_APPEND 32768L
#undef com_example_fluidsynthtest_MyFluidSynthO_BIND_AUTO_CREATE
#define com_example_fluidsynthtest_MyFluidSynthO_BIND_AUTO_CREATE 1L
#undef com_example_fluidsynthtest_MyFluidSynthO_BIND_DEBUG_UNBIND
#define com_example_fluidsynthtest_MyFluidSynthO_BIND_DEBUG_UNBIND 2L
#undef com_example_fluidsynthtest_MyFluidSynthO_BIND_NOT_FOREGROUND
#define com_example_fluidsynthtest_MyFluidSynthO_BIND_NOT_FOREGROUND 4L
#undef com_example_fluidsynthtest_MyFluidSynthO_CONTEXT_INCLUDE_CODE
#define com_example_fluidsynthtest_MyFluidSynthO_CONTEXT_INCLUDE_CODE 1L
#undef com_example_fluidsynthtest_MyFluidSynthO_CONTEXT_IGNORE_SECURITY
#define com_example_fluidsynthtest_MyFluidSynthO_CONTEXT_IGNORE_SECURITY 2L
#undef com_example_fluidsynthtest_MyFluidSynthO_CONTEXT_RESTRICTED
#define com_example_fluidsynthtest_MyFluidSynthO_CONTEXT_RESTRICTED 4L
#undef com_example_fluidsynthtest_MyFluidSynthO_RESULT_CANCELED
#define com_example_fluidsynthtest_MyFluidSynthO_RESULT_CANCELED 0L
#undef com_example_fluidsynthtest_MyFluidSynthO_RESULT_OK
#define com_example_fluidsynthtest_MyFluidSynthO_RESULT_OK -1L
#undef com_example_fluidsynthtest_MyFluidSynthO_RESULT_FIRST_USER
#define com_example_fluidsynthtest_MyFluidSynthO_RESULT_FIRST_USER 1L
#undef com_example_fluidsynthtest_MyFluidSynthO_DEFAULT_KEYS_DISABLE
#define com_example_fluidsynthtest_MyFluidSynthO_DEFAULT_KEYS_DISABLE 0L
#undef com_example_fluidsynthtest_MyFluidSynthO_DEFAULT_KEYS_DIALER
#define com_example_fluidsynthtest_MyFluidSynthO_DEFAULT_KEYS_DIALER 1L
#undef com_example_fluidsynthtest_MyFluidSynthO_DEFAULT_KEYS_SHORTCUT
#define com_example_fluidsynthtest_MyFluidSynthO_DEFAULT_KEYS_SHORTCUT 2L
#undef com_example_fluidsynthtest_MyFluidSynthO_DEFAULT_KEYS_SEARCH_LOCAL
#define com_example_fluidsynthtest_MyFluidSynthO_DEFAULT_KEYS_SEARCH_LOCAL 3L
#undef com_example_fluidsynthtest_MyFluidSynthO_DEFAULT_KEYS_SEARCH_GLOBAL
#define com_example_fluidsynthtest_MyFluidSynthO_DEFAULT_KEYS_SEARCH_GLOBAL 4L
/*
 * Class:     com_example_fluidsynthtest_MyFluidSynthO
 * Method:    textOverjni
 * Signature: ()Ljava/lang/String;
 */
JNIEXPORT jstring JNICALL Java_com_example_fluidsynthtest_MyFluidSynthO_textOverjni
  (JNIEnv *, jobject);

#ifdef __cplusplus
}
#endif
#endif 
```

C 文件

```
#include <jni.h>
#include <string.h>
#include <MyFluidSynthO.h>

JNIEXPORT jstring  Java_com_example_fluidsynthtest_MyFluidSynthO_textOverjni
  (JNIEnv* env, jobject obj){
    return (*env)->NewStringUTF(env, "Hello Worlddd from MyFluidSynth1 !");
} 
```

安卓.mk

```
LOCAL_PATH := $(call my-dir)

include  $(CLEAR_VARS)

LOCAL_MODULE   := fluidsynth
#LOCAL_C_INCLUDES +:= $(LOCAL_PATH)/include\
$(LOCAL_PATH)/include/fluidsynth

LOCAL_SRC_FILES +:= \
    MyFluidSynthO.c
#LOCAL_LDLIBS := -llog
include  $(BUILD_SHARED_LIBRARY)

#include $(CLEAR_VARS)

#include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:50:32.537

对于构建 Android NDK 时出现的“未找到实现”问题，您可以查看以下链接，这些链接解释了这些问题的原因和解决方案。

[Android NDK C++ JNI（没有找到原生的实现......）](https://stackoverflow.com/questions/2197889/android-ndk-c-jni-no-implementation-found-for-native?rq=1)

[android ndk jni No implementation found 错误](https://stackoverflow.com/questions/10814143/android-ndk-jni-no-implementation-found-error?rq=1)

[调用 C 函数时出现“No implementation found for native”错误 - Android NDK - Eclipse](https://stackoverflow.com/questions/11505927/no-implementation-found-for-native-error-when-calling-c-function-android-ndk?rq=1)

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2015-05-22T13:39:23.980

**通过ndk_build**再次构建**.so文件**

# iphone - iOS：ZGParallelView 拉到全屏。

> ID：15386210
> 
> 赞同：0
> 
> 时间：2013-03-13T13:06:00.430
> 
> 标签：iphone, ios, objective-c, ipad

ZGParallelView，我面临一个与此控件有关的问题。如果用户下拉图像视图进入全屏并且用户向上滑动到正常屏幕，我想要这样做。我从 Expedia 应用程序获得的这个想法请看这个酒店全屏模式，完全按照我的解释。

[https://github.com/zhigang1992/ZGParallelView](https://github.com/zhigang1992/ZGParallelView)

如果有人有任何想法做同样的功能，那么请分享给我。

提前致谢。

# php - 在 Stripe 中测试 OAuth 时出现“未指定授权类型”错误

> ID：15386213
> 
> 赞同：1
> 
> 时间：2013-03-13T13:06:10.773
> 
> 标签：php, curl, oauth-2.0, stripe-payments

我正在 PHP 中测试 Stripe 的 OAuth 过程。我可以`authorization code`在登陆页面中获得请求。

但是，当我执行 cURL 请求以从授权代码获取访问令牌时，我收到一个错误，上面写着`No grant type specified`.

以下是到目前为止我的登陆页面代码：

```
<?php
$authorization_code = $_REQUEST['code'];

$params = array();
$params['grant_type'] = 'authorization_code';
$params['code'] = $authorization_code;

$url = 'https://connect.stripe.com/oauth/token';

$ch = curl_init();
$header = array ();
curl_setopt( $ch, CURLOPT_HTTPHEADER, array ('Accept: application/json', 'Content-Length: 0', 'Authorization: Bearer sk_test_secretkey' ) );
curl_setopt( $ch, CURLOPT_URL, $url );
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, 1 );
curl_setopt( $ch, CURLOPT_POST, true );
curl_setopt( $ch, CURLOPT_POSTFIELDS,$params);

$response = curl_exec( $ch );
echo $response;
?> 
```

这是我得到的错误：

```
{ "error": "invalid_request", "error_description": "No grant type specified" } 
```

我错过了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:19:10.983

您可能需要对参数进行 url 编码：

`curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($params));`

Stripe Connect 文档 ( [https://stripe.com/docs/connect/oauth#sample-code](https://stripe.com/docs/connect/oauth#sample-code) ) 中有一个 PHP 示例。如果您仍然遇到问题，可能值得使用某种 HTTP 代理来查看您*实际*通过网络发送的内容或联系 support@stripe.com。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T10:54:50.930

试试这个。这对我来说可以。

```
$params = array();
$params['grant_type'] = 'authorization_code';
$params['code'] = $authorization_code;

$url = 'https://connect.stripe.com/oauth/token';

$ch = curl_init();
$header = array ();
curl_setopt( $ch, CURLOPT_URL, $url );
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, 1 );

curl_setopt( $ch, CURLOPT_POSTFIELDS,$params);

$response = curl_exec( $ch );
echo $response;
?> <pre> 
```

# jquery - jQuery Dialog，简化代码

> ID：15386218
> 
> 赞同：0
> 
> 时间：2013-03-13T13:06:28.533
> 
> 标签：jquery, jquery-ui-dialog

我正在使用 jQuery 对话框，如下所示：-

```
 <a href="#" id="faq-1"><li><span class="black">- I paid for a journey on credit card and at a later date I got further charges. Why?</span></li></a>

    <div id="faq-1a" class="faq-a" title="I paid for a journey on credit card and at a later date I got further charges. Why?">
        <p>When a booking is made via credit card we take the payment for the journey quoted. If for any reason the journey was amendments i.e.  Waiting time or an extra drop off, these charges are separately billed therefore shown as a separate transaction on your statement.</p>
    </div>

    <a href="#" id="faq-2"><li><span class="black">- How do I get a receipt for a journey I made using my credit card?</span></li></a>

    <div id="faq-2a" class="faq-a" title="How do I get a receipt for a journey I made using my credit card?">
        <p>If you are a registered user please use your online booking management via our website <a href="index.php">www.one2onecars.com</a>. you will have access to all your journeys with the option to print out receipts for each journey or as a summary statement. If you are not registered, you can email <a href="mailto:creditcardreceipts@one2onecars.com">creditcardreceipts@one2onecars.com</a> for your receipts.</p>
    </div> 
```

查询

```
 $(function() {

        $('.faq-a').dialog({
          modal: true,
          resizable: false,
          draggable: false,
          width: '585',
          autoOpen: false,
          position: [370,455],
        });
    });

});

    $("#faq-1").bind('click', function(){

        $("#faq-1a").dialog('open')

    });

    $("#faq-2").bind('click', function(){

        $("#faq-2a").dialog('open')

    }); 
```

我需要为 10 个不同的对话框执行此操作，因此`#faq-x`范围从`#faq-1`到`#faq-10`

我相信会有一种更简单的方法来写这个，这样我就不必重复了：

```
$("#faq-3").bind('click', function(){

    $("#faq-3a").dialog('open')

}); 
```

对于我创建的每个对话框，我只是不知道如何做到这一点，因此非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:10:13.890

Check if you can write the below for loop simply in jquery.

```
for (var i = 1; i <= 10; i ++) {
     $("#faq-" + i).bind("click", function() {
         $("#faq-" + i + "a").dialog("open")
     });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:10:51.673

为什么不创建类，而不是唯一的 ID？

为您的#faq-1、#faq-2、........、#faq-10 分配所有相同的类，例如 faqClass

```
$(".faqClass").bind('click', function(){
    $("#" + $(this).attr('id') + "a").dialog('open');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:19:39.003

一种方法是将您的 jquery 绑定添加到类并将其他数据属性添加到您的锚点：

在这里小提琴：http: [//jsfiddle.net/qV578/1/](http://jsfiddle.net/qV578/1/)

HTML：

```
<a href="#" data-dialog="one" class="dialog-link">Link</a>
<div id="one" class="dialog">Dialog fired by Link</div> 
```

Javascript：

```
$('.dialog').dialog({
      modal: true,
      resizable: false,
      draggable: false,
      width: '585',
      autoOpen: false,
      position: [370,455]
    });

$('.dialog-link').bind('click',function(e) {
    e.preventDefault();
    var target_dialog = $(this).attr('data-dialog');
    $('#'+target_dialog).dialog('open');
}); 
```

# java - Java/Android 首选哪种编码方式？

> ID：15386237
> 
> 赞同：0
> 
> 时间：2013-03-13T13:07:33.600
> 
> 标签：java, android

作为一名自学成才的编码员，我有一个关于编码最佳实践的问题。我用两种不同的方式编写了同一个程序，我希望有人指导我选择哪种方式？这可能来自 CPU 开销或 RAM 使用情况，或者仅仅是编码最佳实践的角度。我很欣赏这个问题可能有很多答案或理论，我知道这不是 Stack Overflow 的目的，但对我来说这是一个 Stack Overflow 问题，因为我的编码风格给我带来了一些问题，而我没有知道我应该坚持还是采用哪种方法。

这两个示例都有一个简单的 XML 布局文件，其中包含两个按钮和两个可更新的文本视图（此处未包括）。

示例 1.（我目前倾向于编码的方式）

```
public class MainActivity extends Activity {

    Button button1Add, button2Add;
    TextView text1Display, text2Display;
    int count1, count2;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        initilizeButtons();
        setupListeners();
    }

    public void initilizeButtons() {
        button1Add = (Button) findViewById(R.id.button1);
        button2Add = (Button) findViewById(R.id.button2);
        text1Display = (TextView) findViewById(R.id.textView1);
        text2Display = (TextView) findViewById(R.id.textView2); 
        count1 = Integer.parseInt(text1Display.getText().toString());
        count2 = Integer.parseInt(text2Display.getText().toString());
    }

    public void setupListeners() {
        button1Add.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View arg0) {
                count1++;
                text1Display.setText(String.valueOf(count1));
            }
        });

        button2Add.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View arg0) {
                count2++;
                text2Display.setText(String.valueOf(count2));
            }
        });
    }

} 
```

示例 2.（我认为我应该编码的方式？）

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        initilizeButtons();

    }

    public void initilizeButtons() {
        Button button1Add = (Button) findViewById(R.id.button1);
        Button button2Add = (Button) findViewById(R.id.button2);

        button1Add.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View arg0) {
                TextView text1Display = (TextView) findViewById(R.id.textView1);
                int headCount = Integer.parseInt(text1Display.getText().toString());
                headCount++;
                text1Display.setText(String.valueOf(headCount));
            }

        });

        button2Add.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View arg0) {
                TextView text2Display = (TextView) findViewById(R.id.textView2);
                int bodyCount = Integer.parseInt(text2Display.getText().toString());
                bodyCount++;
                text2Display.setText(String.valueOf(bodyCount));
            }

        });
    }

} 
```

在示例 1 中，我假设这会更快（即更少的 CPU），因为我已经声明了我的变量并在整个程序中添加它们。我在这里担心RAM的使用。

在示例 2 中，我认为这将导致更多的 CPU 使用，因为它必须在每次使用它们时重新声明所有变量，但也许它使用更少的 RAM？

这些只是示例，我相信它们本身不会对 CPU 或 RAM 开销造成太大影响。我会将您提供的答案中的信息应用于我的一般编码实践。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:16:01.570

我认为示例 1 应该是首选方式。

Ram 使用量不会增加太多，因为无论您是否使用 findViewById，Widget 都存在。您只能获得对所示对象的引用。

我个人使用[AndroidAnnotations](http://androidannotations.org/)这允许您删除，`initilizeButtons()`因为您可以向字段添加一些注释，并且库会为您注入它们。在他们的网站上查看他们的代码比较......太棒了。它还支持许多其他不错的功能。最好的部分是，它使用代码生成，而不是像其他类似的库那样使用运行时反射（消耗 CPU 和性能）......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:12:09.940

这取决于你的需要，

例如，如果您的活动多次与该视图一起使用，则选项 2 更好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:21:49.233

可能没有帮助，但我个人实际上讨厌这两种选择。在具有复杂布局的活动中，它会让您一次又一次地重复 onclick 方法代码。

考虑一下；（抱歉，如果有任何错别字，请在记事本中完成）。我没有关注其余的代码，例如命名一个拼写错误的方法“initilizeButtons”，加上误导，因为您不仅在**初始化**按钮，而且还在初始化文本视图和整数。

```
public class MainActivity extends Activity implements OnClickListener {

    Button button1Add, button2Add;
    TextView text1Display, text2Display;
    int count1, count2;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        initilizeButtons();
        setupListeners();
    }

    public void initilizeButtons() {
        button1Add = (Button) findViewById(R.id.button1);
        button2Add = (Button) findViewById(R.id.button2);
        text1Display = (TextView) findViewById(R.id.textView1);
        text2Display = (TextView) findViewById(R.id.textView2); 
        count1 = Integer.parseInt(text1Display.getText().toString());
        count2 = Integer.parseInt(text2Display.getText().toString());
    }

    public void setupListeners() {
        button1Add.setOnClickListener(this);
        button2Add.setOnClickListener(this);
    }

    @Override
    public void onClick(View view) {
       switch(view.getId()){     
         case R.id.button1:
            // Do your button1 things
         break;
         case R.id.button2:
            // do your button2 things
         break; 
        }
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T13:37:27.427

内存和性能方面我看不出明显的区别。通常，建议将声明变量的范围保持尽可能小。因此，如果在您的其他活动中不再需要按钮，请不要将它们声明为类中的字段。

我个人的经验是，使用许多匿名内部类会使代码难以阅读，因此要么选择实现接口的活动，要么在封闭活动中创建小型命名内部类。

# c# - 如何在 asp.net/c# 中重现丢失的会话？

> ID：15386245
> 
> 赞同：4
> 
> 时间：2013-03-13T13:08:15.827
> 
> 标签：c#, asp.net

我的问题是有时我的会话会随机丢失，而有时它会起作用。

现在的问题是，是否有可能重现会话（我的会话是当前登录的用户）。我想也许我需要在我的母版页中更改某些内容，我现在只是检查会话是否失败，还有其他内容？

代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Session["UserId"] == null)
    {
        Response.ClearContent();
        Response.Write("Not agine");
        Response.End();
    }
    else
    {
        Response.Write(Session["UserId"].ToString());
    }
} 
```

全球.asax

```
 void Session_Start(object sender, EventArgs e) {
        // Code that runs when a new session is started
        if (HttpContext.Current.User != null && HttpContext.Current.User is HtUser)
        {

            HtUser user = (HtUser)HttpContext.Current.User;
            Session["UserId"] = user.UserId;
            if (user.HtDepartments.Any() && user.HtDepartments.SingleOrDefault().HtBusinessUnit != null)
            {
                int BusinessUnitId = user.HtDepartments.First().HtBusinessUnit.BusinessUnitId;
                Session["BusinessUnnitId"] = BusinessUnitId;
            } 
```

在这里你可以看到会话的代码

如果您需要更多信息，请告诉我！

感谢您的帮助和快速答复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:55:49.040

你可以使用`Session.Abandon`方法

链接：http: [//msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.abandon.aspx](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.abandon.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:17:28.403

如果我理解正确，用户会在会话过期（超时）时丢失会话。

为了防止这种情况，您可以在 cookie 中存储额外的密钥（即每个用户的 user_id 和 unique_hash），然后在 global.asax 文件中编写一个方法，该方法将触发每个页面加载，并检查会话是否过期。如果是这样，方法将使用 cookie 键通过检查它们来恢复会话。

global.asax 中的示例代码：

```
protected void Application_PreRequestHandlerExecute(object sender, EventArgs e)
{
    if (HttpContext.Current.Session != null)
    {
        // Restore session if session is lost but cookie is not
        // HttpContext.Current.Session["user_id"] == null &&
        if (HttpContext.Current.Request.Cookies["hash"] != null)
        {
            // do your job here
            RestoreSessionMethod();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:53:31.217

如果您将会话状态保存在内存中，而不是在 SQL Server 中，则可以打开页面执行将数据存储在会话中的操作，然后让浏览器保持打开状态并更改 web.config 文件或从命令行执行 iisreset.exe .

这将从内存中刷新您的会话状态数据，您将模拟会话状态的丢失。

# c++ - 内联汇编中的 sse 约束不起作用

> ID：15386250
> 
> 赞同：1
> 
> 时间：2013-03-13T13:08:31.133
> 
> 标签：c++, g++, sse

我在编译下面的代码片段时遇到了一些问题。

```
#include <iostream>
#include <cstdint>

using namespace std;

union mxcsr {
    uint32_t v;
    struct {
        uint32_t  ie : 1;
        uint32_t  de : 1;
        uint32_t  ze : 1;
        uint32_t  oe : 1;
        uint32_t  ue : 1;
        uint32_t  pe : 1;
        uint32_t daz : 1;
        uint32_t  im : 1;
        uint32_t  dm : 1;
        uint32_t  zm : 1;
        uint32_t  om : 1;
        uint32_t  um : 1;
        uint32_t  pm : 1;
        uint32_t  rn : 1;
        uint32_t  rp : 1;
        uint32_t  fz : 1;
        uint32_t rs0 : 15;
    };
};

std::ostream& operator<<(std::ostream& ostr, mxcsr &m){
    ostr << std::hex << std::showbase;
    ostr << "mxcsr=" << m.v;
    ostr << std::dec << std::noshowbase;
    ostr << " [ie=" << m.ie << ",de=" << m.de
         << ",ze=" << m.ze << ",oe=" << m.oe << ",ue=" << m.ue
         << ",pe=" << m.pe << ",daz=" << m.daz << ",im=" << m.im
         << ",dm=" << m.dm << ",zm=" << m.zm << ",om=" << m.om
         << ",um=" << m.um << ",pm=" << m.pm << ",r-=" << m.rn
         << ",r+=" << m.rp << ",fz=" << m.fz << "] ";
    return ostr;
}

typedef union __attribute__((aligned(16))) vec_t {
    double       f64[2];
    float        f32[4];
    uint64_t     u64[2];
    uint32_t     u32[4];
    uint16_t     u16[8];
    uint8_t      u8[16];
    int64_t      i64[2];
    int32_t      i32[4];
    int16_t      i16[8];
    int8_t       i8[16];
 } vec_t;

float add_vec_32f(float ra, float rb, mxcsr &f){
    vec_t va, vb;
    va.f32[0] = ra; vb.f32[0] = rb;
    asm("addps %[vb], %[va];"
        "stmxcsr %[f];"
        : [va] "+x" (va), [f] "=m" (f)
        : [vb] "xm" (vb)
        :
    );
    return va.f32[0];
}

int main()
{
    mxcsr val;

    float b = add_vec_32f(3.4, 5.6, val);

    std::cout << "b=" << b << " val=" << val << std::endl;
    return 0;
} 
```

编译器抱怨这个错误*"impossible constraint in 'asm'"*。为了验证这一点，我浏览了 ADDPS 指令的描述。它说的是这样的：-

ADDPS xmm1, xmm2/m128 将压缩的单精度浮点值从 xmm2/m128 添加到 xmm1。

因此，源可以是内存地址或 xmm 寄存器，但目标必须是 xmm 寄存器。我想我的约束有点同意这一点。谁能指出我这里可能存在的问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:53:35.940

所以我不确定为什么使用`union`不起作用但使用 SIMD 向量指令确实起作用，尽管您需要在`union`. 我能够让它像这样工作：

```
typedef double xmmd __attribute__ ((vector_size (16)));

typedef union __attribute__((aligned(16))) 
vec_t {
    xmmd         xmm ;
    double       f64[2];
    float        f32[4];    
    uint64_t     u64[2];
    uint32_t     u32[4];
    uint16_t     u16[8];
    uint8_t      u8[16];
    int64_t      i64[2];
    int32_t      i32[4];
    int16_t      i16[8];
    int8_t       i8[16];
 } vec_t;

float add_vec_32f(float ra, float rb, mxcsr &f){
    vec_t va, vb;
    va.f32[0] = ra; vb.f32[0] = rb;

     asm("addps %[v2], %[v1];"
        "stmxcsr %[f];"
        : [v1] "+x" (va.xmm), [f] "=m" (f)
        : [v2] "xm" (vb.xmm)
        :
    );

    return va.f32[0];
} 
```

# ruby-on-rails - How to create notification system in rails?

> ID：15386254
> 
> 赞同：27
> 
> 时间：2013-03-13T13:08:42.823
> 
> 标签：ruby-on-rails, notifications, gem

Basically, I want to create a notification like Facebook and Stackoverflow. Specifically, in a Post-Comments system, when a post get commented, everyone involved (people who creates the post and who create comments, except the new commenter) gets a notification message that this post get commented. And the notification get dismissed when people have read it.

I have tried to use **mailboxer** gem to implement it, but saddly there is no example available using its related methods, including **social_stream** itself.

Is there other way to create the Notification System?

And when I try to create it from scratch I get several problems:

```
 Model Notification
    topic_id: integer
    user_id: integer
    checked: boolean #so we can tell whether the notification is read or not 
```

1.  Dismissing the notication after being read by users

I think we just need to turn every notification messages' "checked" attribute to true after user visit the index of notification.(In the NotificationsController)

```
 def index
      @notifications=current_user.notication.all
      @notification.each do |notification|
         notification.checked = true
      end
      @notification.save!
    end 
```

2.Selecting users to notify(and exclude the user making new comment)

I just have no idea in wrting queries....

3.Creating notifications

I think this should be something like

```
 #in CommentController
    def create
      #after creating comments, creat notifications
      @users.each do |user|
        Notification.create(topic_id:@topic, user_id: user.id)
      end
    end 
```

But I think this is really ugly

There is no need to anwer the 3 problems above, Any simple solution to the Notification System is preferable , thanks....

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T14:16:47.613

我认为你走在正确的道路上。

稍微好一点的通知#index

```
def index
  @notifications = current_user.notications
  @notifications.update_all checked: true
end 
```

2.  通知此用户

    ```
    User.uniq.joins(:comments).where(comments: {id: @comment.post.comment_ids}).reject {|user| user == current_user } 
    ```

参与@comment 发表评论的唯一用户，拒绝（从结果中删除）current_user。

3.  正如 João Daniel 指出的观察者，它比 after_create 更受欢迎。这个“Rails 最佳实践”很好地描述了它：[http ://rails-bestpractices.com/posts/2010/07/24/use-observer](http://rails-bestpractices.com/posts/2010/07/24/use-observer)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-13T15:29:09.077

有一个名为公共活动的神奇宝石，您可以根据需要对其进行自定义，这是 railscast [http://railscasts.com/episodes/406-public-activity](http://railscasts.com/episodes/406-public-activity)中有关它的截屏视频， 希望对您有所帮助。

## 更新

在我的 Rails 应用程序中，我制作了一个类似的通知系统，用于向所有用户发送通知，但在索引操作中，您可以使用

```
current_user.notifications.update_all(:checked=>true) 
```

并且还可以只向用户发送一个通知，而不是多次有人对帖子发表评论，您可以使用 unique_by 方法

```
 @comments =@commentable.comments.uniq_by {|a| a[:user_id]} 
```

然后您可以仅向以前评论的用户发送通知

```
 @comments.each do |comment|
 comment.user.notifications.create!(....
 end 
```

希望对你有帮助

# jquery - how to append option value in a specific index in jquery

> ID：15386263
> 
> 赞同：0
> 
> 时间：2013-03-13T13:09:07.277
> 
> 标签：jquery

I tried to append an option value in a particular position/index using jquery.

This is my code :

```
 function refreshDropDown(target,option){
var arrDatabases = getDatabases();  
var numOfDatabases = arrDatabases.length;
var hasPe= jQuery.inArray("pe",arrDatabases) >=0 ;
var onlyPe= (jQuery.inArray("pe",arrDatabases) >=0 && numOfDatabases == 1);

        if( !hasPe && !onlyPe && numOfDatabases !=0){
            jQuery(".lookForSelector             option[value='Publishers']").remove();

**jQuery(target).append(jQuery('<option>     </option>').val('Publishers').html('Publisher'));**

}
} 
```

In this above code i want to append the value "publishers" with caption "publisher" at 19th position. Now it is getting appended in the last index. the value for the variable target is ".lookForSelector".

Appreciate your timely help.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:20:15.103

如果您知道要附加到的目标：

```
$(target + ' :nth-child(19)').after("<option value='publishers'>publishers</option>"); 
```

这是一个附加到选择中间的小提琴：http: [//jsfiddle.net/E3wpg/](http://jsfiddle.net/E3wpg/)

# java - XML/HTML Deminify Program

> ID：15386265
> 
> 赞同：0
> 
> 时间：2013-03-13T13:09:14.870
> 
> 标签：java, regex, minify

I am writing a Java program which will deminify any HTML/XML file from a single line to multiple lines (structured way). The method is simple. I am using a regex to split the single string into multiple strings and append a new line (\n) to each of those substring. BUT the program is not able to split my single string at all. Could any1 help me with this? Below is my program:

```
package Deminifier;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.InputStreamReader;

public class Deminifier {

    public static void main(String[] args) {

        Deminifier demo = new Deminifier ();
        demo.execute();
    }

    public void execute(){
        BufferedReader br = null;
        String currentLine;
        try {
            br = new BufferedReader(new FileReader("myfile.txt"));

        while((currentLine = br.readLine())!= null){
            System.out.println("Input text is as follows:");
            System.out.println(currentLine);
            Deminifier demo = new Deminifier();
            System.out.println("Output Formatted text is as follows:");
            demo.toDeminify(currentLine);
        }
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    private void toDeminify(String currentLine) {
        String lineToParse = currentLine;
        String returnString =null;
        String[] splitString = (lineToParse.split("</([A-Z][A-Z0-9_]*)\b[^>]*>"));
        System.out.println("Number of lines:"+splitString.length);
        for (String s : splitString) {
            System.out.println(s+"\n");
        }

    }
} 
```

Can anyone help me in this matter? why is my String array "split String" returning just "1" array element? I have tried the regex expression and it works in one of my application (is able to identify all end tags).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:15:29.810

是文件编码问题吗？如果文件使用 UTF-8 但 FileReader 需要 US-ASCII，那么您可能会遇到此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:30:45.783

您的正则表达式似乎假定 HTML 都是大写的。真的是这样吗？

否则，请尝试

```
</([a-zA-Z][a-zA-Z0-9_]*)\b[^>]*> 
```

也可以写成更短的

```
</[a-zA-Z]\w*?> 
```

（我认为，还没有测试过）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:19:36.583

您的代码的一个问题是您正在对结束标记进行拆分，这意味着它不会出现在返回数组中的任何项目中。您可能想使用类似`replaceAll`. 您的正则表达式看起来也有点可疑，但是如果不能看到示例输入文件就很难判断。

您可以调整以下内容：

```
Pattern p = Pattern.compile("</[^>]+>");
while((currentLine = br.readLine())!= null){
    System.out.println("Input text is as follows:");
    System.out.println(currentLine);
    System.out.println("Output Formatted text is as follows:");
    Matcher m = p.matcher(currentLine);
    System.out.println(m.replaceAll("$0\n"));
} 
```

此外，在您`Deminifier`在循环内部实例化的原始代码中，您希望将其移到外部。

# c# - Entity Framework Inheritance - Multiple child instances of same base instance

> ID：15386267
> 
> 赞同：3
> 
> 时间：2013-03-13T13:09:23.730
> 
> 标签：c#, entity-framework

Consider the following model:

```
public partial class Person
{
    public int Id { get; set; }
    public string Name { get; set; }
}

public partial class Teacher : Person
{
    public string ClassName { get; set; }
}

public partial class Student : Person
{
    public int NumberOfClasses { get; set; }
} 
```

Using that model and Entity Framework, is it possible to have a "Student" instance and a "Teacher" instance both derived from the same base "Person" instance? In other words, can a "Person" be both a "Student" and a "Teacher"?

If so, what would be the best inheritance strategy to use to represent this scenario?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:21:28.967

“抽象”关键字是关键。不知道你为什么使用“部分”。您需要先选择一个策略 - 此链接说明了所有内容。[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application)

```
public abstract class Person
{
    public int Id { get; set; }
    public string Name { get; set; }
}

public class Teacher : Person
{
    public string ClassName { get; set; }
}

public class Student : Person
{
    public int NumberOfClasses { get; set; }
} 
```

**编辑 - 示例用法 **

```
public void GetSomeDetailAboutAPerson(Person person)
{
    return person.SomeSharedDetailFromBaseClass;
}

public void Something()
{
    Teacher teacher = myService.GetTeacherById(3);
    var someDetailOrOther = this.GetSomeDetailAboutAPerson(teacher);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T13:20:47.877

是的，有可能……一个人可能同时是学生或老师。

“继承策略”到底是什么意思？

你这样做的方式，没问题。

检查这个： [http ://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc -应用](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application)

# javafx - JavaFX accordion with multiple open panes

> ID：15386268
> 
> 赞同：19
> 
> 时间：2013-03-13T13:09:28.747
> 
> 标签：javafx, accordion

Is it possible to have an accordion with more then 1 open pane in JavaFX?

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-13T23:33:02.633

不可以，JavaFX 2.2 [Accordion](http://docs.oracle.com/javafx/2/api/javafx/scene/control/Accordion.html)一次只能打开一个窗格。

我为一项功能创建了一个增强请求（[JDK-8090554 StackedTitledPanes 控件](https://bugs.openjdk.java.net/browse/JDK-8090554)），该功能允许您一次在手风琴中打开多个窗格，但是该功能请求目前尚未实现。

[同时，您可以通过创建多个TitledPane](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TitledPane.html)实例并将它们放置在[VBox](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/VBox.html)中来非常轻松地自己构建类似的控件。

```
private VBox createStackedTitledPanes() {
  final VBox stackedTitledPanes = new VBox();
  stackedTitledPanes.getChildren().setAll(
    new TitledPane("Pane 1",  contentNode1),
    new TitledPane("Pane 2",  contentNode2),
    new TitledPane("Pane 3",  contentNode3)
  );
  ((TitledPane) stackedTitledPanes.getChildren().get(0)).setExpanded(true);

  return stackedTitledPanes;
} 
```

`VBox`如有必要，您可以将包含窗格的内容包装在[ScrollPane](http://docs.oracle.com/javafx/2/api/javafx/scene/control/ScrollPane.html)中，以便所有展开窗格的内容在其区域溢出可用区域时都可以使用。

我创建了一个[示例解决方案](https://gist.github.com/jewelsea/5157233)（图标是来自：[http](http://www.fasticon.com) ://www.fasticon.com 的链接软件）。

![鱼腥味](../Images/6d7226f53c229d604b869c19e61dcecb.png)

*更新*

为可滚动的 TitledPanes 堆栈对先前外部链接的示例解决方案进行了现代化和内联。

另外，请注意，在现代 JavaFX 环境中，默认样式有点不同（在 TitledPane 内容背景等默认情况下，渐变较少），因此它看起来与此答案中的先前图像略有不同，但其他行为相似.

```
import javafx.application.Application;
import javafx.geometry.*;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.image.*;
import javafx.scene.layout.*;
import javafx.stage.Stage;

public class StackedPanes extends Application {
    // image license: linkware - backlink to http://www.fasticon.com
    private static final Image BLUE_FISH = new Image("http://icons.iconarchive.com/icons/fasticon/fish-toys/128/Blue-Fish-icon.png");
    private static final Image RED_FISH = new Image("http://icons.iconarchive.com/icons/fasticon/fish-toys/128/Red-Fish-icon.png");
    private static final Image YELLOW_FISH = new Image("http://icons.iconarchive.com/icons/fasticon/fish-toys/128/Yellow-Fish-icon.png");
    private static final Image GREEN_FISH = new Image("http://icons.iconarchive.com/icons/fasticon/fish-toys/128/Green-Fish-icon.png");

    @Override
    public void start(Stage stage) {
        VBox stackedTitledPanes = createStackedTitledPanes();

        ScrollPane scroll = new ScrollPane(stackedTitledPanes);
        scroll.setFitToWidth(true);
        scroll.setFitToHeight(true);
        scroll.setPrefWidth(410);
        scroll.setStyle("-fx-base: cadetblue;");

        stage.setTitle("Fishy, fishy");
        Scene scene = new Scene(scroll);
        stage.setScene(scene);
        stage.show();
    }

    private VBox createStackedTitledPanes() {
        final VBox stackedTitledPanes = new VBox();
        stackedTitledPanes.getChildren().setAll(
                createTitledPane("One Fish", GREEN_FISH),
                createTitledPane("Two Fish", YELLOW_FISH, GREEN_FISH),
                createTitledPane("Red Fish", RED_FISH),
                createTitledPane("Blue Fish", BLUE_FISH)
        );
        ((TitledPane) stackedTitledPanes.getChildren().get(0)).setExpanded(true);

        return stackedTitledPanes;
    }

    public TitledPane createTitledPane(String title, Image... images) {
        FlowPane content = new FlowPane();
        for (Image image : images) {
            ImageView imageView = new ImageView(image);
            content.getChildren().add(imageView);

            FlowPane.setMargin(imageView, new Insets(10));
        }
        content.setAlignment(Pos.TOP_CENTER);

        TitledPane pane = new TitledPane(title, content);
        pane.setExpanded(false);

        return pane;
    }

    public static void main(String[] args) {
        Application.launch(args);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-08-17T08:36:44.413

将现有答案的最佳部分与简化相结合，您可以通过在 ScrollPane VBox 中创建多个标题面板来复制多打开手风琴，然后将 max-height 属性与侦听器绑定（在 XML 上执行此操作意味着窗格即使折叠也会保留空间）

```
<ScrollPane fitToHeight="true" fitToWidth="true">
    <AnchorPane id="Content">
        <VBox AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
            <!-- Setting maxHeight="Infinity" to all makes them all grow as we want, but then they get spaces between, when collapsed (so we do it in code) -->
            <TitledPane fx:id="pane1" animated="false" VBox.vgrow="ALWAYS" expanded="false" text="Pane 1">...</TitledPane>
            <TitledPane fx:id="pane2" animated="false" VBox.vgrow="ALWAYS" maxHeight="Infinity" text="Pane 2 (starts expanded)">...</TitledPane>
            <TitledPane fx:id="pane3" animated="false" VBox.vgrow="ALWAYS" expanded="false" text="Pane 3">...</TitledPane>
        </VBox>
    </AnchorPane>
</ScrollPane> 
```

**注意：您需要为每个窗格调用此方法：**

```
pane1.expandedProperty().addListener((observable, oldValue, newValue) -> {
    //make it fill space when expanded but not reserve space when collapsed
    if (newValue) {
        pane1.maxHeightProperty().set(Double.POSITIVE_INFINITY);
    } else {
        pane1.maxHeightProperty().set(Double.NEGATIVE_INFINITY);
    }
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-11T19:25:02.797

我的要求略有不同

1.  手风琴可以扩展或管理嵌入视图的视图空间
2.  整个视图可以放入滚动视图
3.  如果手风琴是固定大小，则每个框都完全扩展为整个视图的大小，如果不是固定视图，则扩展为内容的大小。

虽然在我的情况下，我无法完成所有 3\. 和测试 2.，但我能够提出以下修复：

1) 使用 ScrollPane，里面有一个 VBox，里面有 TitledWindows。2) 确保您的 TitledPanes 设置为**VBox.grow="SOMETIMES"**。3) 添加一个 VBox 作为最后一个元素并设置**VBox.vgrow="ALWAYS"** - 这会将 TitledPanes 推到它们的最小尺寸。其他人都提供了代码示例，如果你想使用 fxml，或者不想使用 Java，直接使用元素也可以（使用 SceneBuilder 生成）：

```
<ScrollPane fitToHeight="true" fitToWidth="true" prefHeight="200.0" prefWidth="200.0" BorderPane.alignment="CENTER">
     <content>
        <VBox fx:id="leftVBox" maxHeight="1.7976931348623157E308" prefHeight="200.0" prefWidth="100.0">
           <children>
              <TitledPane fx:id="titledPanelOne" animated="false" expanded="false" style="-fx-background-color: red;" text="Pane One" VBox.vgrow="SOMETIMES">
                 <content>
                    <ListView fx:id="listViewOne" maxHeight="1.7976931348623157E308" prefHeight="200.0" prefWidth="200.0" />
                 </content>
              </TitledPane>
              <TitledPane fx:id="titledPanelTwo" animated="false" expanded="false" style="-fx-background-color: green;" text="Pane Two" VBox.vgrow="SOMETIMES">
                 <content>
                    <ListView fx:id="listViewTwo" maxHeight="1.7976931348623157E308" prefHeight="200.0" prefWidth="200.0" />
                 </content>
              </TitledPane>
              <VBox prefHeight="0.0" prefWidth="0.0" VBox.vgrow="ALWAYS" />
           </children>
        </VBox>
     </content>
 </ScrollPane> 
```

4）虽然这确实让您堆叠的盒子彼此独立扩展/收缩，但这并不能解决您的盒子无法正确调整其内容的问题（例如，如果您嵌入了一个列表视图，如上面的示例），因此当屏幕剩余空间很大时，您现在必须滚动相当长的时间。解决方案？需要一点Java。

为了实现这个修复，我们首先将 TitledPane 绑定`maxHeightProperty()`到外部 VBox 上`heightProperty()`：

```
public class Controller implements Initializable {
  //... controller code
  @Override
  public void initialize(URL location, ResourceBundle resources) {
    //...
    variablesViewPane.maxHeightProperty().bind(leftVBox.heightProperty());
    historyViewPane.maxHeightProperty().bind(leftVBox.heightProperty());
  }
} 
```

我们绑定到每个窗格的`expandedProperty()`，并动态绑定和取消绑定`prefHeighProperty()`：

```
private static void bindExpanded(TitledPane pane, ReadOnlyDoubleProperty prop) {
  pane.expandedProperty().addListener((observable, oldValue, newValue) -> {
    if(newValue) {
      pane.prefHeightProperty().bind(prop);
    } else {
      pane.prefHeightProperty().unbind();
      pane.prefHeightProperty().set(0);
    }
  }); 
```

}

如果我们显示，我们要求与 VBox 一样大，如果我们没有显示，我们要求尽可能小。这样做的好处是布局会根据当前显示的 TitledPanes 的数量自动计算可用高度 - 这正是我们想要的行为。

我在这里更详细地介绍：

[http://sebastianaudet.com/blog/playing-with-javafx/](http://sebastianaudet.com/blog/playing-with-javafx/)

# eclipse - Code Highlight and cursor position in a StructuredTextEditor

> ID：15386272
> 
> 赞同：0
> 
> 时间：2013-03-13T13:09:37.997
> 
> 标签：eclipse, eclipse-rcp, eclipse-plugin, eclipse-gef

My own plugin project has a editor(which implements org.eclipse.ui.part.MultiPageEditorPart) with 2 pages:one is a **GraphicalEditorWithFlyoutPalette**(which will parse XML files into figures) and the other one is a **StructuredTextEditor**(which will parse figures into XML code).So what I want to do is drawing figures in the first editor and get source code in the other editor and do the opposite thing as well.And I believe many GEF and plugin/RCP projects may have this feature.

Now I have to face the fact that when I try to switch between my two editors,the cursor always stay on the first line in the source Editor.What I supposed to get is that if a figure is **selected** in the first editor and when I switch to the second editor,some code block should be highlight(just like the Outline View in Eclipse),or at least the cursor should stay at the line which the corresponding XML block starts(just like the XML Editor in Eclipse)

Anybody have some helpful advice to give? Tks a lot :-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:34:58.967

`SelectionEditPolicy`在 GEF 编辑器中，您可以使用'方法收听选择更改`showSelection`。当您的选择更改时，将调用此方法。在该方法中，您可以更改光标在第二个编辑器上显示的位置（或设置某种共享变量，编辑器在激活时可以读取）。

# android - i want to draw a simple line from one image to other where drag and drop the image

> ID：15386275
> 
> 赞同：1
> 
> 时间：2013-03-13T13:09:45.763
> 
> 标签：android

I'm using drag and drop , I'm making matching concept , drag image from left to right, when answer will correct , at there i want to draw a line from left to right , i use many things as like

```
public class Dragtesting extends Activity implements OnTouchListener{
 protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.drag);
        ViewGroup dlayout = (ViewGroup)findViewById(R.id.dlayout);
  dlayout.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View paramView, MotionEvent paramMotionEvent) {
            // TODO Auto-generated method stub
            if(touchFlag==true){
 switch (paramMotionEvent.getActionMasked()) 
                {
case MotionEvent.ACTION_DOWN :
 //getting the positions
break;
  case MotionEvent.ACTION_UP:
break;

  Canvas canvas = new Canvas();
  Paint paint = new Paint();
paint.setStyle(Paint.Style.STROKE);
paint.setStrokeWidth(2);
paint.setColor(Color.GREEN);
canvas.drawColor(Color.BLUE);

canvas.drawLine(offset_x, offset_y, currentX, currentY, paint); 
  break;
                default:
                    break;
                }

          }
            return true;
        }
    });
@Override
public boolean onTouch(View paramView, MotionEvent paramMotionEvent) {
    // TODO Auto-generated method stub
    switch (paramMotionEvent.getActionMasked()) 
    {
    case MotionEvent.ACTION_DOWN:
        touchFlag=true;
        offset_x = (int) paramMotionEvent.getX();
        offset_y = (int) paramMotionEvent.getY();
       // tagvalue = (Integer) paramView.getTag();
        selected_item =  paramView;
        imageParams=paramView.getLayoutParams();
        break;
    case MotionEvent.ACTION_UP:
        selected_item=null;
        touchFlag=false;
        break;
    default:
        break;
    }       
    return false;
} 
```

this is not working , help me

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:12:31.423

我扩展了相对布局并制作了一个设计时视图文件，用于在图像视图之间画一条线，感谢所有帮助我，但这不是正确的答案，我不接受其他答案，我很抱歉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:21:56.587

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.view.MotionEvent;
import android.view.View;

public class LineView extends View {

    private Paint paint = new Paint();
    private float offset_x;
    private float offset_y;
    private float currentX;
    private float currentY;

    public LineView(Context context) {
        super(context);
    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            offset_x = currentX = event.getX();
            offset_y = currentY = event.getY();
        } else {
            currentX = event.getX();
            currentY = event.getY();
        }
        invalidate();
        return true;
    }

    @Override
    public void draw(Canvas canvas) {
        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeWidth(2);
        paint.setColor(Color.GREEN);
        canvas.drawColor(Color.BLUE);

        canvas.drawLine(offset_x, offset_y, currentX, currentY, paint);
    }
} 
```

你去吧。应该是这样的。测试:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:15:40.403

你得到了什么？

`invalidate();` 在绘画之前尝试写作 。

# handlebars.js - Why should we wrap our templates inside script blocks?

> ID：15386276
> 
> 赞同：7
> 
> 时间：2013-03-13T13:09:48.717
> 
> 标签：handlebars.js, template-engine, mustache, jquery-templates, dust.js

## Background

All the JS template engines recommend putting your template text inside script blocks like so:

```
<script id="peopleTemplate" type="text/template">
   {#people}
   <div class="person">Name: {firstName} {lastName}</div>
   {/people}
</script> 
```

but many developers (understandably) dislike this because they lose HTML syntax highlighting in their code editor inside the script block. I've seen the workarounds like this: [Keep correct HTML syntax highlighting in <script> "text/html" templates](https://stackoverflow.com/questions/14449312/keep-correct-html-syntax-highlighting-in-script-text-html-templates) . This question is not asking about workarounds.

I know one danger is that web browsers will attempt to fix invalid HTML so calling $('#peopleTemplate').html() will have unpredictable results. However, off the top of my head, I cannot think of any examples to illustrate this.

## Question

What are some of the other dangers of replacing the script tag with a div ?

Bonus: can someone come up with a good fiddle that illustrates the browser HTML auto-fixing?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T12:21:36.173

这是浏览器自动修复问题的示例：http: [//jsfiddle.net/KPasF/](http://jsfiddle.net/KPasF/)

模板是：

```
<table>
    <tr>
        {{#numbers}} <th> {{.}} </th> {{/numbers}}
    </tr>
</table> 
```

数据是：

```
var json = { "numbers": [ 1, 2, 3 ] }; 
```

当模板位于隐藏的 div 中，然后再次位于脚本块中时，请参阅小提琴[http://jsfiddle.net/KPasF/以获得不同的结果。](http://jsfiddle.net/KPasF/)

**解释**

当你把它放在一个 hidden`<div>`中时，浏览器会去除标签之外的内容`<th>`（the`{{#numbers}}`和`{{#numbers}}`mustache 标签）。只剩下`{{.}}`, 它将绑定到 json 对象并呈现为`[object Object]`

将模板放入一个`<script type='text/html'>`块中，正如您所期望`<th>`的那样，我们得到了三个

如果将模板放在 a`<div>`而不是 a内，浏览器如何破坏模板的示例`<script>`：

![在此处输入图像描述](../Images/de1d42e51654f1a946f88b311dc37266.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:05:04.770

另一个示例，如果您有以下内联模板（包装在 div 中）：

```
<div id="template">
   {#Users}
       <a href="/ViewUser?ID={UserID}">{UserName}</a>
   {/Users}
</div> 
```

然后你使用 jQuery.html() 来抓取模板文本，你会得到不同的结果，具体取决于浏览器。Firefox 是最受破坏的，因为它避开了 href 中的括号。

铬 26.0.1410.64：

```
{#Users}
     <a href="/ViewUser?ID={UserID}">{UserName}</a>
{/Users} 
```

火狐 10.0.1：

```
{#Users} 
    <a href="/ViewUser?ID=%7BUserID%7D">{UserName}</a> 
{/Users} 
```

即 8.0.7601.17514：

```
{#Users} 
    <A href="/ViewUser?ID={UserID}">{UserName}</A> 
{/Users} 
```

# batch-file - Batch file checking firefox is open?

> ID：15386279
> 
> 赞同：0
> 
> 时间：2013-03-13T13:09:58.397
> 
> 标签：batch-file

I want to write a batch file to keep checking every 20 seconds if firefox is open, if open then there is no action required. if firefox is closed, the batch file needs to force open it on a certain webpage. this also needs to be a silent batch..

I've tried this so far:

```
@echo off
Set WShShell = WScript.CreateObject("WScript.Shell")
tasklist /fi "firefox.exe" 2>NUL | find /i /n "firefox.exe">NUL
if %ERRORLEVEL%==1 goto nofirefox
cmd /C start firefox.exe -new-tab "google.com" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:34:02.797

你的代码很懒（而且 VBScript 行让我大吃一惊），但我知道你打算用它去哪里。该`tasklist`命令缺少一点。`tasklist /fi "imagename eq firefox.exe"`将在任务列表中搜索 firefox。在 20 秒的延迟中，您需要一个 ping 到无处的循环标签。

尝试这个。

```
@echo off
setlocal

:loop
wmic process where name="firefox.exe" get name /format:list 2>NUL | find /i "firefox" >NUL || call :relaunch
ping -n 21 0.0.0.0>NUL
goto loop

:relaunch
rem echo %time% - starting Firefox
start "" firefox.exe -new-tab http://www.google.com/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:46:28.470

```
@ECHO OFF
SETLOCAL
:loop
TASKLIST /fi "imagename eq firefox.exe" |FIND /i "firefox.exe" >nul
IF ERRORLEVEL 1 START firefox.exe -new-tab "google.com"
choice /t 20 /d y /n >NUL
IF ERRORLEVEL 2 GOTO :EOF 
GOTO loop 
```

按`N`（或`^C`）将退出循环。

（在 XP 中，将 CHOICE... 和 ERRORLEVEL 2 行替换为

```
PING -n 21 127.0.0.1 >nul  
if exists stopfile. del stopfile.&goto :eof 
```

然后创建`stopfile.`以终止此批次）

# javascript - How can I fix this AMD path conflict?

> ID：15386284
> 
> 赞同：2
> 
> 时间：2013-03-13T13:10:10.633
> 
> 标签：javascript, requirejs, typescript, arcgis, amd

I am trying to use the [Esri ArgGis JavaScript API](http://help.arcgis.com/en/webapi/javascript/arcgis/), which is loaded by [Dojo](http://dojotoolkit.org/), using `dojo.require`. I have an existing modular [AMD/requirejs](http://requirejs.org/) Typescript application that I need to integrate this code into. At the top of my initial TS file, I import several modules:

```
import tracer = module('../classes/trace');
import pubsub = module('../classes/pubsub');
import masker = module('../classes/masker');
// etc. 
```

This was working fine, but now that I have added the ArcGis code, instead of resolving the relative path within my application, require.js has picked up a baseUrl from the Esri site, and tries to load:

```
http://serverapi.arcgisonline.com/jsapi/arcgis/3.3/js/esri/classes/trace.js
// etc. 
```

Resulting in a string of 404 responses and script errors.

How can I fix this?

I've tried setting the requirejs baseUrl in the head of my html file before loading the first document that loads modules:

```
 <script src="http://serverapi.arcgisonline.com/jsapi/arcgis/3.3"></script>
 <script type="text/javascript" src="/content/client/libs/require.js"></script> <!-- data-main="/content/client/hop/hop.app" -->
 <script type="text/ecmascript">
        require.config({
            baseUrl: "/Content/client/hop/"
        });
 </script>
 <script src="~/Content/client/hop/hop.app.js"></script> 
```

But this fails, throwing an exception that require has no method config.

(NB If I reverse the order in the head of the html document so that the arcgis api comes last in the load sequence then I get the opposite problem - my local files all work fine but dojo and the mapping api fail because they are looking for paths relative to my site when they should be searching on the argis server).

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T16:24:47.137

我使用 Esri 的 ArcGIS API，所以我遇到了这个确切的问题。 dojo 的[这篇博文帮助了我一些。](http://dojotoolkit.org/documentation/tutorials/1.7/cdn/)

第一个问题是 dojo 的配置方式与 requirejs 不同。它会查找先前定义的 dojoConfig 来进行设置。第二个是 Esri 的模块加载都是假设一个基本路径设置的，而您的代码将需要另一个。您将需要一个看起来像这样的 dojo 配置：

```
dojoConfig = {
    baseUrl: location.pathname.replace(/\/[^/]+$/, '') + '/Content/client/hop/',  // magic!
    packages: [
        {
            name: 'dojo',
            location: "http://serverapi.arcgisonline.com/jsapi/arcgis/3.3compact/js/dojo/dojo/"
        },
        {
            name: 'dojox',
            location: "http://serverapi.arcgisonline.com/jsapi/arcgis/3.3compact/js/dojo/dojox"
        },
        {
            name: 'esri',
            location: "http://serverapi.arcgisonline.com/jsapi/arcgis/3.3compact/js/esri"
        }
    ]
}; 
```

这样做是将基本路径设置回当前 url 加上您的额外内容，然后告诉 dojo esri 的内容在哪里。这些是我遇到的所有包，但如果我错过了一个依赖项，因为它从未为我加载，它需要一个类似的条目。

您可能遇到的另一个问题是，如果您习惯于在本地以 file:// 加载脚本，那么现在来自另一个域的 dojo 将尝试访问 file://，而浏览器将立即关闭它。从现在开始，您需要在本地 http 服务器上进行测试。在 Windows 上我更喜欢[HFS](http://www.rejetto.com/hfs/)，而在 Linux 上[python 让它变得简单](http://www.linuxjournal.com/content/tech-tip-really-simple-http-server-python)。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:15:52.980

`require()`由于两者之间的冲突，我在使用 dojo 和 requirejs 时遇到了几个问题。你应该看看 dojo bug [15616](http://bugs.dojotoolkit.org/ticket/15616)。您可能想查看来自 google 组的这个[线程](https://groups.google.com/d/msg/requirejs/eNk_szkS5r8/1hEnTTWhwbwJ)，其中 James 建议使用所有 dojo 或所有 requirejs。

我不确定您使用的是什么版本的 dojo，但建议从源代码中签出，因为与 requirejs/dojo 相关的更改不在已发布的 1.8 中。

如果您*唯一*的问题是由 baseUrl 冲突引起的 404 错误，则解决方法是创建一个`.d.ts`文件，该文件为类似路径的别名，`../classes/trace`并将其替换为有效的路径（绝对或其他）。

# intellij-idea - 无法使用 Intellij 编译

> ID：15386291
> 
> 赞同：23
> 
> 时间：2013-03-13T13:10:22.140
> 
> 标签：intellij-idea

我正在试用 JetBrains IntelliJ IDEA 12.0.4，但在编译程序时遇到了问题。当我运行一个程序时，我收到以下错误：

```
Internal error: (java.io.FileNotFoundException) \domain.local\usersfolders\roberth\.IntelliJIdea12\system\compile-server\hibernate_test_1ad22f80\timestamps\data (The system cannot find the path specified)
java.io.FileNotFoundException: \domain.local\usersfolders\roberth\.IntelliJIdea12\system\compile-server\hibernate_test_1ad22f80\timestamps\data (The system cannot find the path specified)
    at java.io.RandomAccessFile.open(Native Method)
    at java.io.RandomAccessFile.<init>(RandomAccessFile.java:233)
    at com.intellij.util.io.PagedFileStorage.resizeFile(PagedFileStorage.java:324)
    at com.intellij.util.io.PagedFileStorage.resize(PagedFileStorage.java:308)
    at com.intellij.util.io.ResizeableMappedFile.resize(ResizeableMappedFile.java:72)
    at com.intellij.util.io.ResizeableMappedFile.<init>(ResizeableMappedFile.java:46)
    at com.intellij.util.io.PersistentBTreeEnumerator.<init>(PersistentBTreeEnumerator.java:76)
    at com.intellij.util.io.PersistentEnumeratorDelegate.<init>(PersistentEnumeratorDelegate.java:38)
    at com.intellij.util.io.PersistentEnumeratorDelegate.<init>(PersistentEnumeratorDelegate.java:31)
    at com.intellij.util.io.PersistentHashMap.<init>(PersistentHashMap.java:137)
    at com.intellij.util.io.PersistentHashMap.<init>(PersistentHashMap.java:133)
    at org.jetbrains.jps.incremental.storage.AbstractStateStorage.createMap(AbstractStateStorage.java:122)
    at org.jetbrains.jps.incremental.storage.AbstractStateStorage.<init>(AbstractStateStorage.java:27)
    at org.jetbrains.jps.incremental.storage.TimestampStorage.<init>(TimestampStorage.java:21)
    at org.jetbrains.jps.incremental.storage.ProjectTimestamps.<init>(ProjectTimestamps.java:21)
    at org.jetbrains.jps.cmdline.BuildRunner.load(BuildRunner.java:90)
    at org.jetbrains.jps.cmdline.BuildSession.runBuild(BuildSession.java:181)
    at org.jetbrains.jps.cmdline.BuildSession.run(BuildSession.java:102)
    at org.jetbrains.jps.cmdline.BuildMain$MyMessageHandler$1.run(BuildMain.java:107)
    at org.jetbrains.jps.service.impl.SharedThreadPoolImpl$1.run(SharedThreadPoolImpl.java:26)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722) 
```

`Run`和都会发生这种情况`Debug`。我需要更改什么设置以更正用于将它们更改为我的本地类路径和目录的路径？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-13T13:48:54.990

您的用户主页似乎位于[IntelliJ 不支持的网络驱动器上](http://devnet.jetbrains.com/docs/DOC-181)

> 在某些环境中，用户的主目录位于映射的网络驱动器上，这对于 IntelliJ IDEA 是不可接受的。你会注意到巨大的性能下降。您可能还希望将系统目录移动到更快或更大的驱动器分区。

您应该复制`IDEA_HOME\bin\idea.properties`到您的主目录并调整以下路径，以便它们指向本地目录：

*   idea.config.path
*   想法.系统.路径
*   idea.plugins.path

有关详细信息，请参阅上面的链接。如果您不想丢失已配置的所有内容，只需移动`\domain.local\usersfolders\roberth\.IntelliJIdea12`到本地文件夹即可。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-08T22:47:04.867

我在 windows env 中收到以下错误：

错误：内部错误：（com.intellij.util.io.PersistentEnumeratorBase$CorruptedException）PersistentEnumerator 存储损坏 C:\Users>.IntelliJIdea14\system\compile-server\cmx_cdc441bb\aj\aspect_path.dat

并删除了位于上述路径的 .dat 文件，我的 jetbrain IDE 开始编译所有类，问题得到解决。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-31T14:27:52.097

我遇到了类似的问题，即在调试程序时无法重新加载已编译的类。阅读了一些博客并删除了 compile 和 compile-server 目录下`C:/Users/<yourUsername>/.IntelliJIdea<version>/system`，我可以像往常一样继续使用类重新加载。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-05T18:51:40.310

我有同样的问题。所以我编辑了**IDEA_HOME\bin\idea.properties**文件并取消注释：

*   idea.config.path
*   想法.系统.路径
*   idea.plugins.path
*   idea.log.path

然后我`${user.home}`从`idea.config.path`and中删除了`idea.system.path`，一切正常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-17T10:58:21.573

以下步骤对我有用：

1.  关闭 IntelliJ IDEA
2.  编辑**IDEA_HOME\bin\idea.properties**以包含以下行：

    ```
    idea.config.path=C:/Users/<yourUsername>/.IdeaIC/config
    idea.system.path=C:/Users/<yourUsername>/.IdeaIC/system 
    ```

3.  打开 IntelliJ IDEA

    *   现在**.IdeaIC**文件夹（上面指定）是自动创建的，它具有以下结构：

        ```
        .IdeaIC
           - config
           - system 
        ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-22T13:20:18.360

我对 OSX 也有同样的问题。我所做的只是重新创建 IntelliJ 缓存已编译类的目录。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-16T01:55:48.847

如果您尝试使用某些特定于语言的关键字作为类名或对象名，则可能会在 IntellijIdea 中遇到此错误。就我而言，一旦我在使用保留关键字时遇到类似的错误。

解决此问题的一些选项：

*   在代码库中查找特定于语言的关键字用法作为类/对象名称。
*   尝试使缓存无效并从文件菜单重新启动
*   通过重新创建 .idea 目录从源重新导入项目。

# c# - 如何从 cmd 获取参数到正在运行的 WPF 应用程序中

> ID：15386292
> 
> 赞同：3
> 
> 时间：2013-03-13T13:10:28.893
> 
> 标签：c#, wpf, cmd, parameter-passing

我有一个可以通过命令行获取参数的 WPF 应用程序。我的应用程序不能重复（我将其设为单个实例），但我希望能够多次添加参数 - 并将它们添加到 runnig 应用程序中而无需打开另一个窗口。现在在我的代码中，我检查应用程序是否有另一个实例 - 如果有，我会抛出异常。我正在寻找一种能够多次运行以下脚本的方法：

```
Myapp.exe -firstname first -lastname last 
```

并且每次运行的应用程序都会将插入的参数添加到其列表中。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:33:05.367

您可以覆盖类的`OnStartup`方法`App`。请看[这里](http://msdn.microsoft.com/de-de/library/system.windows.application.onstartup.aspx)。您将在方法的参数中找到命令行参数。请看[这里](http://msdn.microsoft.com/de-de/library/system.windows.startupeventargs.aspx)。

```
public class App : Application
{
    protected override OnStartup(StartupEventArgs e)
    {
        var cmdLineArgs = e.Args;
        // your logic here
    }
    // ...
} 
```

由于您需要一些进程间通信机制，因此您可能应该阅读这篇[SO 帖子](https://stackoverflow.com/questions/84855/what-is-the-best-choice-for-net-inter-process-communication)。我认为创建 WCF 服务是最好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:06:47.077

在执行检查应用程序是否为单一应用程序时 - 如果存在应用程序实例（重复调用） - 应用程序应该向用户发送错误消息。在这种情况下，您应该检查是否有命令行参数，如果有 - 只需发送 Close() 并返回命令而不显示任何错误消息。应用程序将从命令行获取参数并使用它们执行它知道的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:36:01.053

您可以使用 Application.Current.Shutdown() 来停止您的应用程序。如果在 OnStartup 中调用它，它可以附加在显示的窗口之前。

对于读取参数，您可以在任何地方使用 OnStartup 或 Environment.GetCommandLineArgs() 中的 e.Args。

```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        // check if it is the first instance or not
        // do logic

        // get arguments
        var cmdLineArgs = e.Args;

        if (thisisnotthefirst)
        {
            // logic interprocess
            // do logic

            // exit this instance
            Application.Current.Shutdown();
            return;
        }

        base.OnStartup(e);
    }

    protected override void OnExit(ExitEventArgs e)
    {
        // may be some release needed for your single instance check

        base.OnExit(e);
    }
} 
```

我不知道您如何检查单个实例，但我为此使用 Mutex：

```
 protected override void OnStartup(StartupEventArgs e)
    {
        Boolean createdNew;
        this.instanceMutex = new Mutex(true, "MySingleApplication", out createdNew);
        if (!createdNew)
        {
            this.instanceMutex = null;
            Application.Current.Shutdown();
            return;
        }

        base.OnStartup(e);
    }

    protected override void OnExit(ExitEventArgs e)
    {
        if (this.instanceMutex != null)
        {
            this.instanceMutex.ReleaseMutex();
        }

        base.OnExit(e);
    } 
```

跳这会帮助你。

# c# - 可能对标有 notnull 属性的实体赋值

> ID：15386293
> 
> 赞同：1
> 
> 时间：2013-03-13T13:10:31.427
> 
> 标签：c#, .net, resharper

`request.GetResponse().GetResponseStream()`我收到有关如何处理此问题的警告？

```
public void GetUserList(string url)
{
    var request = (HttpWebRequest) WebRequest.Create(url);
    string response;

    using (var stream = new StreamReader(request.GetResponse().GetResponseStream()))
    {
        response = stream.ReadToEnd();
    }

    response = DelimiterStrings.Aggregate(response, (current, delim) => current.Replace(delim, "\n"));

    foreach (var line in response.Split(DelimiterChars))
    {
        MainWindow.UserList.Add(line);
    }
} 
```

Resharper 不知道如何“修复它”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T13:14:47.593

就像在评论中所述，首先分配响应流并检查它是否为空，如下所示：

```
public void GetUserList(string url)
{
  var request = (HttpWebRequest)WebRequest.Create(url);
  var responseStream = request.GetResponse().GetResponseStream();
  if (responseStream != null)
  {
    string response;
    using (var stream = new StreamReader(responseStream))
    {
      response = stream.ReadToEnd();
    }
    response = DelimiterStrings.Aggregate(response, (current, delim) => current.Replace(delim, "\n"));
    foreach (var line in response.Split(DelimiterChars))
    {
      MainWindow.UserList.Add(line);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:12:53.963

把它分开：

```
var sourceStream = request.GetResponse().GetResponseStream();
Contract.Assume(sourceStream != null); // Let Resharper know it can't be null.

using (var stream = new StreamReader(sourceStream)) 
```

这具有记录和检查您的假设的优势！

# iphone - 想在我的应用中显示第三方应用

> ID：15386295
> 
> 赞同：-1
> 
> 时间：2013-03-13T13:10:34.030
> 
> 标签：iphone, ios

我的客户要求我在他的应用程序中显示他以前的应用程序，以便用户也可以下载这个应用程序。

没关系，但他还问他是否可以在这个应用程序中宣传第三方应用程序，我在谷歌中找不到任何相关答案，所以我想问专家。请在这个主题上需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:00:06.917

使用 Web 视图并在 Web 视图中加载相应应用程序的 Appstore 链接。您可以从那里下载该应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:10:01.360

是的，您可以在自己的应用中投放广告。您可以使用各种第三方广告商。你没有理由不能做自己的广告。

# ssas - SSAS 2005 属性关系

> ID：15386300
> 
> 赞同：2
> 
> 时间：2013-03-13T13:10:44.160
> 
> 标签：ssas

一个屏幕截图值一千个字，所以我们来了。

我将 DimDate 表作为 Dim Finacial Time 维度的基础表。它显示每一天 (DateKey)、当天所在的财政周 (fYear_weekNo) 和财政年度 (fYear)。忽略其他列，因为它们未在 Dim Financial Time 维度中使用。

![在此处输入图像描述](../Images/7b6879334c74008a6599909d3e8e2553.png)

这里是定义的属性关系和用户层次结构（金融周）。

![在此处输入图像描述](../Images/69c1091044ddf3964073cdd7538e20d5.png)

这是 Dim Finacial Time 维度的金融周的浏览器结果。每年应该有 52 周。相反，它显示每个财政年度只有几个星期。似乎所有财政年度的所有财政周都是分开的。

![在此处输入图像描述](../Images/1bb24e70f1e4819b25c7f0dfa8d2cc30.png)

如果我删除了 fYear_weekNo - FYear 关系

![在此处输入图像描述](../Images/33294dc4a2cfbe1f4310016f08a13616.png)

那么结果是正确的（它显示第 1 年有 52 周）。我的问题是为什么？

![在此处输入图像描述](../Images/44442728f06b0a1477175602dfe243b4.png)

我认为fYear_weekNo - FYear之间应该有关系。因为即使它是正确的，SSAS 也会给我一个警告。

![在此处输入图像描述](../Images/6b251004ad8025767c3aa95808f2789a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-10T10:17:57.310

使用 MSFT 的 SSAS，您应该在属性之间建立正确的关系，以构建有效的属性层次结构。

现在你对 SSAS 感到困惑，因为很多天属于某个月份，而同一天属于另一个月份。同样的事情发生了几个月，某个月份属于一年，同时同一个月属于另一年。

考虑到你正在做：

```
DAY_01 to MONTH_01
...
DAY_31 to MONTH_01

and then

DAY_01 to MONTH_02
...
DAY_31 to MONTH_02 
```

为了解决这个问题，考虑下面的例子，一天只属于一个月，一个月只属于一年。

```
DAY_01_01_2000 to MONTH_01 to YEAR_2000
...
DAY_31_01_2000 to MONTH_01 to YEAR_2000

and then

DAY_01_02_2000 to MONTH_02 to YEAR_2000
...
DAY_31_02_2000 to MONTH_02 to YEAR_2000 
```

首先，建立关系，例如必须将日与月和年相关联，然后将月与年相关联。

day 属性必须如下所示：

```
->DAY
-->YEAR
-->MONTH 
```

月份属性必须如下所示：

```
->MONTH
-->YEAR 
```

年份属性必须如下所示：

```
->YEAR
->no relationship 
```

其次，您必须编辑每个属性的键值，您可以使用属性窗口来执行此操作（请注意，如果一个属性有多个键，那么您还必须使用某个名称设置列的名称），以便告诉SSAS 哪一天属于巫月到巫年。

对于 day，关键值必须是：

```
year
month
day 
```

对于月份，键值必须是：

```
month
year 
```

对于年份，关键值必须是：

```
year 
```

现在再次部署和处理立方体，黄色三角形必须消失并在维度浏览器中获得正确的结果！

# c++ - C++ 继承数组

> ID：15386302
> 
> 赞同：0
> 
> 时间：2013-03-13T13:10:51.617
> 
> 标签：c++, inheritance

问题是关于 C++ 的。我有 3 个类：第一个，命名`MovieMaker`，是抽象的，第二个，命名`Actor`，是从第一个派生的，第三个，命名为 'Director' 派生自`Actor`. 我想创建一个可以同时保存 Actor 和 Director 实例的数组。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:16:09.493

`std::shared_ptr<MovieMaker>`创建一个, 或的数组`unique_ptr`。`std::vector`在 C++ 中，创建 a而不是原始数组通常是一个好主意： so `std::vector<std::shared_ptr<MovieMaker>> vec`，您可以像这样填充它：

```
#include <vector>
#include <memory>

// later:
std::vector<std::shared_ptr<MovieMaker>> vec;
vec.push_back( std::make_shared<Actor>() );
vec.push_back( std::make_shared<Director>() );
vec.push_back( std::make_shared<Actor>() ); 
```

或者，在 C++11 中：

```
#include <vector>
#include <memory>

// later:
std::vector<std::shared_ptr<MovieMaker>> vec = {
  std::make_shared<Actor>(),
  std::make_shared<Director>(),
  std::make_shared<Actor>(),
}; 
```

如果您愿意使用`boost`3rd 方库，还有其他一些选择。

或者，创建一个 的数组`boost::variant<Actor,Director>`，它忽略类层次结构并简单地存储一个类型安全的`union`类似构造。 `boost::variant`使用起来有点技巧。

作为另一种选择，`boost::any`可以存储任何东西，如果它有什么是你想要的，你可以查询它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T13:12:09.913

创建一个指针数组`MovieMaker`。它可以保存指向派生类的指针。这种技术称为多态性 - 这是一个很好的教程：

[http://www.cplusplus.com/doc/tutorial/polymorphism/](http://www.cplusplus.com/doc/tutorial/polymorphism/)

# javascript - 在 node.js 上使用 mongoose 过滤查询结果

> ID：15386309
> 
> 赞同：3
> 
> 时间：2013-03-13T13:11:23.923
> 
> 标签：javascript, node.js, mongodb, mongoose

我正在开发一个带有猫鼬的应用程序来访问 MongoDB。

而我想要实现的是通过 id 进行查询并丢弃一些文档。

```
User.find({})
    .where('price').lt(upperLimit)
    ....
    .exec(function(err, users) {
      //
    }); 
```

关键是我想在进行查询之前丢弃一些我认识的用户。有任何想法吗？。我不想对用户集合和过滤器进行后期处理。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:23:31.463

您可以使用[`$nin`](http://docs.mongodb.org/manual/reference/operator/nin/#_S_nin)运算符排除值数组`_id`：

```
User.find({})
  .where('price').lt(upperLimit)
  .nin('_id', idsToExclude)
  ....
  .exec(function(err, users) {
    //
  }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T13:18:01.923

您可以使用[$ne](http://docs.mongodb.org/manual/reference/operator/ne/)运算符：

```
User.find({"_id":{"$ne":<IdToExclude>}}). … 
```

# android - 用于 MAC 内容辅助的 Android ADT Bundle 不起作用

> ID：15386312
> 
> 赞同：0
> 
> 时间：2013-03-13T13:11:42.063
> 
> 标签：android, eclipse, eclipse-plugin, adt, eclipse-adt

我已经安装了可从适用于 MAC 的 Android ADT Bundle 的 developer.android.com 网站下载的最新版本。它包括基本的 Android SDK 组件和带有内置 ADT（Android 开发人员工具）的 Eclipse IDE 版本。除了内容辅助外，一切似乎都很好。我在编写代码时无法理解如何显示建议。我已经在网上搜索并尝试了不同的建议，但根本不起作用！例如：首选项>Java>编辑器>内容辅助>高级。确保勾选“Java 提案”。我也尝试选择所有没有结果。你能帮我吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:35:53.303

你改变键绑定吗？通过 ctrl+空格键调用聚光灯（在右上角），尝试更改它。如果这个新的键绑定没有出现任何内容，请尝试再次下载......祝你好运:)

# air - Adobe AIR 3.6 - 错误 304：初始窗口内容无效 (RuntimeError)

> ID：15386317
> 
> 赞同：2
> 
> 时间：2013-03-13T13:11:51.897
> 
> 标签：air, adobe, adt, packaging

**编辑：问题已解决：App.swf 是使用 LZMA 压缩的，这是错误的。SWF 文件必须是纯的。**

我正在开发跨平台 AIR 应用程序，但在本地计算机上运行打包时出现错误： **“304：初始窗口内容无效（RuntimeError）”** （ windows和mac）一切正常。这是我的应用程序 XML 描述符文件的代码：

```
<?xml version="1.0" encoding="utf-8" ?>
<application xmlns="http://ns.adobe.com/air/application/3.6">
    <id>com.test.App</id>
    <filename>App</filename>
    <name>App</name>
    <versionNumber>0.0.0</versionNumber>
    <initialWindow>
        <content>App.swf</content>
        <visible>true</visible>
        <aspectRatio>landscape</aspectRatio>
        <autoOrients>false</autoOrients>
        <fullScreen>true</fullScreen>
        <renderMode>direct</renderMode>
    </initialWindow>
    <iPhone>
        <InfoAdditions>
            <![CDATA[
            <key>UIDeviceFamily</key>
            <array>
                <!-- iPhone and iPod touch devices -->
                <string>1</string>
                <!-- iPad devices -->
                <string>2</string>
            </array>
            <!--<key>UIStatusBarStyle</key>-->
            <!--<string>UIStatusBarStyleBlackOpaque</string>-->
            <!--<key>UIRequiresPersistentWiFi</key>-->
            <!--<string>YES</string>-->
            ]]>
        </InfoAdditions>
        <requestedDisplayResolution>high</requestedDisplayResolution>
    </iPhone>
    <android>
        <manifestAdditions>
            <![CDATA[
            <manifest android:installLocation="auto">
                <uses-permission android:name="android.permission.INTERNET"/>
                <!--<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>-->
                <!--<uses-permission android:name="android.permission.READ_PHONE_STATE"/>-->
                <!--<uses-permission android:name="android.permission.VIBRATE"/>-->
                <!--<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>-->
                <!--<uses-permission android:name="android.permission.DISABLE_KEYGUARD"/>-->
                <!--<uses-permission android:name="android.permission.WAKE_LOCK"/>-->
                <!--<uses-permission android:name="android.permission.CAMERA"/>-->
                <!--<uses-permission android:name="android.permission.RECORD_AUDIO"/>-->
                <!--<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>-->
                <!--<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>-->

                <!--<uses-feature android:required="true" android:name="android.hardware.touchscreen.multitouch"/>-->
                <!--<application android:enabled="true">
                    <activity android:excludeFromRecents="true">
                        <intent-filter>
                            <action android:name="android.intent.action.MAIN"/>
                            <category android:name="android.intent.category.LAUNCHER"/>
                        </intent-filter>
                    </activity>
                </application>-->
            </manifest>
            ]]>
            </manifestAdditions>
    </android>
</application> 
```

应用程序 SWF 的名称与值相同：“App.swf”。以下是我如何运行 ADT 工具来打包应用程序：

```
C:/tools/flexsdk/4.6.0_mobile_win/bin/adt -package -target apk-debug -storetype pkcs12 -keystore C:/certs/android_cert.pfx -storepass password C:/build/app/bin-debug/android/App.apk C:/build/app/script/App-app.xml C:/build/app/bin-debug/android/assets.xml C:/build/app/bin-debug/android/assets C:/build/app/bin-debug/android/App.swf 
```

任何想法都会非常有帮助的人:)

# php - 如何检查现有条目（2 个方法）

> ID：15386319
> 
> 赞同：0
> 
> 时间：2013-03-13T13:12:01.253
> 
> 标签：php, sql

我有两种不同的方法来检查现有条目。

**方法一**

SQL：`SELECT COUNT(*) FROM ...`

PHP：

```
$result = fetch_row();
if($result[0] > 0) // entry found 
```

**方法二**

SQL：`SELECT 1 FROM ... LIMIT 1`

PHP：

```
$result = num_rows();
if($result > 0) // entry found 
```

就性能而言，正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:16:06.033

两者都是正确和好的。但是我会建议第二个，因为您限制为 1 条记录，并且当您获得记录时它会停止，而首先您正在计算所有记录。

当您需要查找存在多少条记录时，第一个“count *”很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:29:13.840

当有许多行匹配您的查询时，后者效率更高，因为在第一种情况下，MySQL 必须找到所有这些行才能返回正确的计数值，而在第二种情况下，它将在找到第一个后停止搜索。

# ruby - 失败：RuntimeError：保存图表失败！运行 rake erd 命令时

> ID：15386324
> 
> 赞同：3
> 
> 时间：2013-03-13T13:12:16.003
> 
> 标签：ruby, ruby-on-rails-3.2, graphviz, erd

我正在尝试使用 erd 为我的 rails 应用程序中的模型生成图表。我在 Windows 7 上并安装了 graphviz

当我跑

```
rake erd OR rake erd filetype=dot 
```

我收到以下错误

```
$ rake erd --trace
** Invoke erd (first_time)
** Invoke erd:generate (first_time)
** Invoke erd:options (first_time)
** Execute erd:options
** Invoke erd:load_models (first_time)
** Execute erd:load_models
Loading application environment...
** Invoke environment (first_time)
** Execute environment
Loading code in search of Active Record models...
** Execute erd:generate
Generating Entity-Relationship Diagram for 6 models...
rake aborted!
Saving diagram failed!
Verify that Graphviz is installed and in your path, or use filetype=dot.
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rails-erd-1.1.0/lib/rails_erd/diagram/graphviz.rb:198:in `r
escue in block in <class:Graphviz>'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rails-erd-1.1.0/lib/rails_erd/diagram/graphviz.rb:190:in `b
lock in <class:Graphviz>'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rails-erd-1.1.0/lib/rails_erd/diagram.rb:142:in `instance_e
val'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rails-erd-1.1.0/lib/rails_erd/diagram.rb:142:in `save'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rails-erd-1.1.0/lib/rails_erd/diagram.rb:120:in `create'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rails-erd-1.1.0/lib/rails_erd/diagram.rb:74:in `create'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rails-erd-1.1.0/lib/rails_erd/tasks.rake:41:in `block (2 le
vels) in <top (required)>'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_c
all_chain'
c:/Ruby193/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain
'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:187:in `block in invoke_prereq
uisites'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:185:in `each'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:185:in `invoke_prerequisites'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:165:in `block in invoke_with_c
all_chain'
c:/Ruby193/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain 
```

有没有人遇到过此类问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-07-01T07:34:07.477

我在 OS 10.9.2 上遇到了同样的问题。

**解决方案**

```
brew install graphviz 
```

**创建 erd - 在 Rails 4 上工作**

```
erd --inheritance --direct --attributes=foreign_keys,content --filetype=dot
dot -Tjpg erd.dot > erd.jpg 
```

您也可以用 pdf 替换 jpg

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-11T21:30:08.790

**对于 Ubuntu 用户：**

```
sudo apt-get install graphviz 
```

**苹果系统**

```
brew uninstall graphviz
brew install cairo
brew install pango
brew install graphviz 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:19:55.883

看起来这个库吞下了潜在的错误，[请参见此处](https://github.com/voormedia/rails-erd/blob/v1.1.0/lib/rails_erd/diagram/graphviz.rb#L198)

您可以编辑 gem 并打印出错误消息吗？

# jquery - 不懂 jQuery Ajax 错误信息

> ID：15386325
> 
> 赞同：1
> 
> 时间：2013-03-13T13:12:16.980
> 
> 标签：jquery

我在这里发布了一个问题（[jQuery ajax 返回 'Object Object'](https://stackoverflow.com/questions/15383680/jquery-ajax-returning-object-object)）并遵循我尝试过使用 jQuery Ajax 'Error' 响应的答案之一的建议。下面是我使用的代码，后面是控制台上的响应，但我不明白它们的意思。任何人都可以对此（或我原来的问题吗？）

谢谢！

**我的代码**

```
error: function(jqXHR, textStatus, errorThrown) { 
 console.log(JSON.stringify(jqXHR)); 
 console.log("AJAX error: " + textStatus + ' : ' + errorThrown); 
 } 
```

**控制台返回**

```
{"readyState":0,"responseText":"","status":0,"statusText":"error"}
AJAX error: error : 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:37:20.667

根据[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)的文档，传递给函数的参数描述如下：

> 请求失败时调用的函数。该函数接收三个参数：jqXHR（在 jQuery 1.4.x 中，XMLHttpRequest）对象，一个描述发生的错误类型的字符串和一个可选的异常对象（如果发生）。第二个参数（除了 null）的可能值是“timeout”、“error”、“abort”和“parsererror”。发生 HTTP 错误时，errorThrown 会接收 HTTP 状态的文本部分，例如“未找到”或“内部服务器错误”。从 jQuery 1.5 开始，错误设置可以接受一个函数数组。每个函数都会被依次调用。注意：跨域脚本和 JSONP 请求不调用此处理程序。

第一个参数是浏览器原生 XMLHttpRequest 的超集。[您可以在此处](http://api.jquery.com/jQuery.ajax/#jqXHR)阅读有关 jqXHR和 XMLHttpRequest的更多[信息](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)。

第二个参数描述了您正在处理的错误类型。

如果发生 HTTP 错误，第三个（可选）参数将包含有关 HTTP 状态的信息。

# django - Django 返回图像名称

> ID：15386329
> 
> 赞同：1
> 
> 时间：2013-03-13T13:12:29.663
> 
> 标签：django

我的应用程序允许用户创建图片。

在我的图片模块类中，我最近一直在返回图片对象的描述，如果用户没有提供描述。我得到一个错误。

是否可以返回用户为我的图片模块上传的图像的名称？例如 images.jpg

```
class Picture(models.Model):
    user = models.ForeignKey(User)
    board = models.ForeignKey(Board,blank=False,null=False)
    image = models.FileField(upload_to="images/",blank=True)
    description = models.TextField(blank=True)
    def __unicode__(self):
        return self.image 
```

我的观点.py

```
 def PictureCreator(request):
    if not request.user.is_authenticated():
        return HttpResponseRedirect(reverse('world:LoginRequest'))

    if request.method == "POST":
        form = PictureForm(request.POST , request.FILES)
        if form.is_valid():
            picture = Picture(user=request.user)
            image = form.cleaned_data['image']
            if image:
                                 picture.image = form.cleaned_data['image']
                         description = form.cleaned_data['description']
            if description:
                                 picture.description = form.cleaned_data['description']

            board = form.cleaned_data['board']
            if board:
                                 picture.board = form.cleaned_data['board']
            picture.save()
    return render(request,'picture.html',{'form':PictureForm()}) 
```

感谢你们对我的帮助

我改变了这个

```
 image = request.FILES['image']
        if image:
                            picture.image = request.FILES['image']
                    description = form.cleaned_data['description'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:02:27.277

```
image = request.FILES.get('image') //return image name 
```

# php - Magento - 创建下订单的表单？

> ID：15386333
> 
> 赞同：-1
> 
> 时间：2013-03-13T13:12:35.317
> 
> 标签：php, magento

我的问题是：是否可以在 Magento 中创建一个在后端创建订单的表单？

我们希望将目录发送给通过我们的联系表向我们发送请求的客户。

但是我们的流程直接为这个请求下订单会更容易。

到目前为止，谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:54:12.500

您可以创建订单，然后以编程方式[创建订单（请参阅在 Magento 中以编程](http://inchoo.net/ecommerce/magento/programmatically-create-order-in-magento/)方式创建订单或使用 magento api（请参阅[Magento API - Mage_Checkout](http://www.magentocommerce.com/api/soap/checkout/cart/cart.html#content)）。

但是，如果您的产品有很多自定义选项，那么获取各种选项 ID 可能会变得很复杂

# laravel - Laravel 3：有没有办法为你的多对多数据透视表创建一个 Eloquent 模型？

> ID：15386337
> 
> 赞同：0
> 
> 时间：2013-03-13T13:12:41.683
> 
> 标签：laravel, eloquent, laravel-3

我要做的是添加与我的数据透视表的关系。我有一个独特的场景，我的数据透视表需要它自己在角色表上的 has_one 关系。有人看到专门为数据透视表创建 Eloquent 模型有问题吗？另外，如果我要创建这个模型，有没有什么办法可以让下面的模型返回？

```
$user = User::where('id', '=', 1);
$pivot = $user->hasmanyexample()->pivot(); 
```

我特别希望能够执行以下操作：

```
$user = User::where('id', '=', 1);
$pivot = $user->example()->pivot();

// class Example_User 
// public function role() { return $this->has_one('Role', 'role_id'); }
$role = $pivot->role(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T14:47:36.240

首先你必须制作一个 Pivot 模型，在我的例子中，我有 3 个模型

*   **版本->has_many_and_belongs_to('格式);**
*   **格式->has_many_and_belongs_to('Edition);**

生成的数据透视表将被称为 edition_format，当我制作模型时，您首先必须创建一个目录 Edition，并在该文件夹中创建一个名为 format.php 的文件，这样您将拥有以下内容：

**-application/models/Edition/format.php**

那么你必须更改表名，因为 laravel 查找复数 (edition_formats) 并且关系需要 edition_format，所以你必须添加以下内容：

```
class Edition_format extends Eloquent 
```

{

```
public static $table = "edition_format";

/* whatever you want */ 
```

}

然后你可以这样称呼它：Edition_format::find(1);

# android - 如何在 C++ 代码中使用 ddms 处理内存泄漏

> ID：15386339
> 
> 赞同：3
> 
> 时间：2013-03-13T13:12:45.490
> 
> 标签：android, android-ndk, ddms

如何使用 android 工具 DDMS 解决我尝试的 C++ 代码中的内存泄漏，通过启用 NativeHeap 拍摄快照，但我不明白快照在说什么，符号没有解析，没有显示文件名和行号。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T23:44:06.890

DDMS 中的本机堆跟踪是不受支持的“隐形”功能。让它工作可能有点棘手。邮件列表上有一个[较早的讨论](https://groups.google.com/forum/?fromgroups=#!topic/android-porting/nIS6oQzru2g)可能有用。

如果您正在接收数据并启动 UI，那么您已经成功了一半。:-) DDMS 在您应该能够用`ANDROID_SYMBOLS`环境变量覆盖的特定位置查找符号，并将地址转换为行`addr2line`（它也必须能够找到）。

查找大泄漏的最简单方法是配置 DDMS 以按库对分配进行排序。让应用程序运行一段时间，看看哪个库似乎增长最快。查看归属于该库的分配，看看是否有很多来自同一个地方。查看堆栈跟踪，看看从那里进行许多长期分配是否有意义。不是很严格，但它经常起到作用。

要对堆进行更彻底的检查，您可以在设备上运行 valgrind，但这并不容易第一次设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T13:15:43.663

使用分配跟踪器。这是关于在 Android 中查找内存泄漏的精彩讨论：[http ://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)

在这里你有一篇关于它的博客文章：[http ://www.curious-creature.org/2009/02/07/track-memory-allocations-on-android/](http://www.curious-creature.org/2009/02/07/track-memory-allocations-on-android/)

# python - 如何使用 linux python 下载大型 azure blobls

> ID：15386343
> 
> 赞同：1
> 
> 时间：2013-03-13T13:13:06.967
> 
> 标签：python, linux, azure

我对 azure 还很陌生，但我设法拼凑了一个测试脚本来创建容器、列出它们，甚至上传/下载对象。

现在我想尝试下载一个我知道需要分段完成的大型对象。经过大量挖掘，linux/python 的文档似乎很弱，我设法找到了 get_object() 调用的可选 x_ms_range 参数。经过更多挖掘后，我发现“范围”的描述为“xx-yy”，但是当我尝试使用它来下载对象的一部分时。这是我的代码片段的样子：

```
print "GET 10k"
blob1 = blob_service.get_blob('mycontainer', '10k')
print "LEN blob1:", len(blob1)
blob2 = blob_service.get_blob('mycontainer', '10k', x_ms_range='1-100')
print "LEN blob2:", len(blob2) 
```

正如你所看到的，当我运行脚本时它会报告：

```
GET 10k
LEN blob1: 10000
LEN blob2: 10000 
```

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:34:44.780

尝试更改以下代码行：

```
blob2 = blob_service.get_blob('mycontainer', '10k', x_ms_range='1-100') 
```

至

```
blob2 = blob_service.get_blob('mycontainer', '10k', x_ms_range='bytes=1-100') 
```

根据此处的文档：http: [//msdn.microsoft.com/en-us/library/windowsazure/ee691967.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee691967.aspx)，您需要`bytes=`在指定范围时预先添加。

# php - 表格格式.PHP/HTML

> ID：15386346
> 
> 赞同：0
> 
> 时间：2013-03-13T13:13:13.627
> 
> 标签：php, html

好吧，我在这里遇到了很大的困难，似乎无法弄清楚，所以我要在这里问。我有这个代码：

```
 <?php
            echo "<table id='teble1'>";
            while($info = mysql_fetch_array($data)) {

                echo"<tr>\r";
                echo"<td>\r";
                echo "<a href=\"".$info['Hackforums_PLink']."\">".$info ['Hackforums_UName']."</a>\r";
                echo "</td>\r";
                echo "</tr>\r";
                echo"<tr>\r";
                echo"<td>\r";
                echo "<a href=\"".$info['Osu_PLink']."\">".$info['Osu_UName']."</a>\r";
                echo"</td>\r";
                echo"</tr>\r";
            }
            echo"</table>";
        ?> 
```

好吧，现在我有一个问题，Osu_PLink 和 Osu_UName 应该列在 Hackforums_PLink 和 Hackforums_UName 的右边我已经尝试过多次尝试来做到这一点，但无法让它发挥作用，因为使用了回声，这尤其令人困惑。我从来没有以这种方式使用过PHP，而且如果你知道如何获取表头（Hackforums 名称和Osu！名称）请说，我真的不知道如何从这里开始，所以你们能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:35:48.063

你应该写你的 PHP 有点不同。

```
 <table id='teble1'>
       <?php while($info = mysql_fetch_array($data)) : ?>
          <tr>
            <td><a href="<?php echo $info['Hackforums_PLink'] ?>"><?php echo $info ['Hackforums_UName'] ?></a></td>
            <td><a href="<?php echo $info['Osu_PLink'] ?>"><?php echo $info ['Osu_UName'] ?></a></td>
          </tr> 
        <?php endwhile; ?>
        </table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:35:51.017

这是你想要的吗 ？？

```
 echo"<tr>";
            echo"<td>";
            echo "<a href=\"".$info['Hackforums_PLink']."\">".$info ['Hackforums_UName']."</a>";
            echo "</td>";
            echo"<td>";
            echo "<a href=\"".$info['Osu_PLink']."\">".$info['Osu_UName']."</a>\r";
            echo"</td>";
            echo "</tr>"; 
```

新行将始终下降到上一行。所以你必须把它放在同一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:36:29.117

如果我理解得很好，你想在同一行显示两个单元格吗？在这种情况下，摆脱中介

```
 echo "</tr>\r";
        echo"<tr>\r"; 
```

因为他们强制显示新行。

如果您想添加表头，只需在您的 while 循环之前添加以下内容

```
echo "<tr><th><td>Hackforums Name</td><td>Osu! Name</td></th></tr>"; 
```

哦，顺便说一句，mysql_fetch_array 自 PHP 5.5 起已弃用

# gwt - GWT 显示许多菜单项

> ID：15386347
> 
> 赞同：0
> 
> 时间：2013-03-13T13:13:13.623
> 
> 标签：gwt, menuitem, menubar

我有一个带有 n 个 MenuItems 的 MenuBar。因此，如果 n 是一个很大的数字，我有很多 MenuItems。所以我正在寻找一种在我的条件下显示它们的方法。例如： n= 8 *在 n=5 之后，列表分成块：

```
 |------------| |------------|
 |n=0         | |n=6         |
 |n=1         | |n=7         |
 |n=2         | |n=8         |
 |n=3         | |------------|
 |n=4         |
 |n=5         |
 |------------| 
```

并不是

```
 |------------| 
 |n=0         | 
 |n=1         |
 |n=2         | 
 |n=3         | 
 |n=4         |
 |n=5         |
 |n=6         |
 |n=7         |
 |n=8         |
 |------------| 
```

因为它破坏了页面布局。希望我有点奇怪的解释可以告诉你我的问题。谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:38:12.150

1.  我还没有在菜单中看到过这样的行为！！！

2.  菜单上的滚动条也有点奇怪，看起来像这样。

如果您想将滚动添加到菜单，则要编辑的样式如下：

```
.gwt-MenuBarPopup {
    overflow-y: scroll !important;
    height: 70px !important;
} 
```

![在此处输入图像描述](../Images/3ca7f83a6c49042ac4ac2218d34b92e0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:58:08.387

因为你只能决定一次天气的`menu bar`风格`vertical or horizontal`。即在[MenuBar(boolean vertical)](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/ui/MenuBar.html#MenuBar%28boolean%29)初始化时。

所以在人口中间你不能改变它。

如果您认为`menuitems list`它非常大，您可以通过应用如下样式`scroll`来简单地应用`menu`

```
.gwt-MenuBar-vertical {
    background: none repeat scroll 0 0 white;
    height: 70px;
    margin-left: 0;
    margin-top: 0;
    overflow-y: scroll;
} 
```

# c# - 事件和归档名称之间的歧义

> ID：15386348
> 
> 赞同：1
> 
> 时间：2013-03-13T13:13:15.477
> 
> 标签：c#, c#-4.0

这可能在一个类中具有同名的属性和事件，例如：

```
private BusyChangedDelegate BusyChanged;

public event BusyChangedDelegate BusyChanged
{
.
.
.
} 
```

**编辑** 完整源

```
 private BusyChangedDelegate BusyChanged;
        public event BusyChangedDelegate BusyChanged
        {
            add
            {
                BusyChangedDelegate delegate3;
                BusyChangedDelegate busyChanged = this.BusyChanged;
                do
                {
                    delegate3 = busyChanged;
                    BusyChangedDelegate delegate4 = (BusyChangedDelegate) Delegate.Combine(delegate3, value);
                    busyChanged = Interlocked.CompareExchange<BusyChangedDelegate>(ref this.BusyChanged, delegate4, delegate3);
                }
                while (busyChanged != delegate3);
            }
            remove
            {
                BusyChangedDelegate delegate3;
                BusyChangedDelegate busyChanged = this.BusyChanged;
                do
                {
                    delegate3 = busyChanged;
                    BusyChangedDelegate delegate4 = (BusyChangedDelegate) Delegate.Remove(delegate3, value);
                    busyChanged = Interlocked.CompareExchange<BusyChangedDelegate>(ref this.BusyChanged, delegate4, delegate3);
                }
                while (busyChanged != delegate3);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:17:04.027

不可以。一个类不能声明两个同名的成员，除了方法重载。

只需将您的变量名称更改为 camelCased，这无论如何都遵循正常约定......

```
private BusyChangedDelegate busyChanged; 
```

从 C# 5 规范的第 10.3 节：

> 常量、字段、属性、事件或类型的名称必须不同于在同一类中声明的所有其他成员的名称。

编辑：是的，如果您查看为类似字段的事件生成的 IL：

```
public event EventHandler Foo; 
```

您*可能会*同时看到一个名为的字段`Foo`和一个名为 的事件`Foo`。那是因为 IL 与 C# 有不同的规则。C# 编译器可以随意命名自动生成的字段。（例如，请参阅 C# 4 规范的第 10.8.1 节。）

*在 C# 语言*中，以与任何其他成员相同的方式命名字段仍然无效。您发布的代码不是有效的 C# - 这是反编译器可以提出的最好的表示 C# 编译器在 IL 中创建的内容。

# java - 我正在尝试在 java 中读取其原始类型的 LDAP 属性

> ID：15386349
> 
> 赞同：0
> 
> 时间：2013-03-13T13:13:17.593
> 
> 标签：java

我正在尝试在 java 中读取其原始类型的 LDAP 属性。我正在使用 spring-ldap jar 来准备属性。目前我在 Object 或 Attribute 类中得到结果。

对象属性值 = dirContextAdapter.getObjectAttribute(outputAttribute);

或者

属性 attributes = dirContextAdapter.getAttributes(); 属性attributeValue = attributes.get(outputAttribute);

但我的问题是我需要原始数据类型中的 LDAP 属性值。

如果有人给我代码示例，我将不胜感激

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:27:44.317

LDAP 属性只有两种类型：string 和 binary，在 Java 中对应 String 和 byte[]。通常是字符串，除了必须是二进制的东西，比如密码、图片、证书，......所以，只需投射。

# c# - 原生 C++ 类的 C# 包装器

> ID：15386350
> 
> 赞同：0
> 
> 时间：2013-03-13T13:13:25.053
> 
> 标签：c#, c++, wrapper, unmanaged

我有三个具有这种关系的本机 C++ 类：

```
A <- B <- C 
```

where`A <- B`表示`class B`实例化并使用指向`class A`.

我希望编写一个 C# 包装器，`class C`以便可以从 C# 调用它的函数。

我的问题是我是否也需要为`class A`and编写包装器`class B`？注意，类`A,B,C`都编译为`.lib`文件中的静态库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:15:55.753

`C`可以继续在本机模式下直接调用`B`/ 。`A`您只需要处理直接从托管代码调用的类的表面区域上的本机/托管互操作。

# html - 登录表单在关注密码输入类型时更改 css

> ID：15386351
> 
> 赞同：0
> 
> 时间：2013-03-13T13:13:31.113
> 
> 标签：html, css

此表单在 Chrome 和 Firefox 中运行良好。但是在 IE 上，这太疯狂了。

您可以在此处查看表格：[http ://www.alsite.com.br/clinicadosono](http://www.alsite.com.br/clinicadosono)

为什么这在 IE8 中不能正常工作？IE9听起来不错！

这是我的登录表单的代码：

```
<form class="form-1" action="" method="post">
    <p><input type="text" name="usuario" placeholder="Login" required /></p>
    <p><input type="password" name='senha' placeholder="Senha" required /></p>
    <p><input type="submit" name="enviar" value="Entrar" /></p>
    <div class="clear"></div>
    <p class="clique_aqui_cadastro">Não possui cadastro? <a href="#">Clique aqui</a></p>
</form> 
```

这是我的CSS：

```
.form-1 {
    width: 256px;
    margin:0 auto;
}

.form-1 input[type=text],
.form-1 input[type=password] {
    width: 222px;
    height: 10px;
    padding: 8px 4px 8px 25px;
    margin-bottom: 5px;

    /* Styles */
    border: 1px solid #d2d3d4; /* Fallback */
    background: #f1f1f1 url(../imagens/icone_login.png) left no-repeat;

    -webkit-transition: all 0.3s ease-out;
    -moz-transition: all 0.3s ease-out;
    -ms-transition: all 0.3s ease-out;
    -o-transition: all 0.3s ease-out;
    transition: all 0.3s ease-out;

    /* Font styles */
    color: #878787;
    font-family: 'Comfortaa', cursive;
    font-size:12px;

    outline:none;

    -webkit-border-radius:5px;
    border-radius:5px;
}
.form-1 input[type=password] {
    background: #f1f1f1 url(../imagens/icone_pass.png) left no-repeat;
    width: 126px;
    float:left;
    margin-right:5px;
}

.form-1 input[type=submit] {
    width: 90px;
    height: 28px;
    background: #78a7a7;
    border: 1px solid #6db5b5;
    cursor: pointer;
    transition: all 0.3s ease-out;
    float:left;
    /* Font styles */
    color: #fff;
    font-size: 12px;
    -webkit-border-radius:5px;
    border-radius:5px;
}

.form-1 input[type=submit]:hover{
    color:#000;
} 
```

PS：我试图将 css 分开`[type=text]`，`[type=password]`但仍然无法正常工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:34:50.097

您的`jQuery.Placeholder`插件将密码的`type`属性更改`input`为，`text`而不是密码，以便正确显示占位符文本（仅当没有原生浏览器支持 HTML5`placeholder`属性时）。

因此在 IE 中你的这个 CSS 规则：

```
.form-1 input[type=password] { etc... } 
```

没有得到应用。

将新`.password`类应用于您的输入并相应地更改您的 CSS：

```
.form-1 input[type=password], .form-1 input.password {

 <input class="password" type="password" name='senha' placeholder="Senha" required /> 
```

# php - PHP + MYSQL 座位预订系统。计算免费座位

> ID：15386352
> 
> 赞同：-1
> 
> 时间：2013-03-13T13:13:32.827
> 
> 标签：php, html, mysql, select, html-table

基本上我有一个查询，可以找到这个学校礼堂内的免费座位数量（那些没有预订的）。

```
<?php
$result = mysql_query("SELECT COUNT(*) AS freeseats FROM schoolHall WHERE status=0");
$row = mysql_fetch_array($result);
echo $row[0];
?> 
```

在我的主页上，我目前有一个表格，其中包含将您定向到其他页面的按钮：

```
<table id='table-2'>
<tr>
<th>Home Page</th>
</tr>
<tr>
<td><INPUT Type="BUTTON" VALUE="School Hall" ONCLICK="window.location.href='schoolHall.php'"></td>
<td> 
....... 
```

我想在单独的单元格中的此按钮旁边的查询中找到空闲座位的数量。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:18:55.940

希望这会有所帮助；

```
<table id='table-2'>
<tr>
<th>Home Page</th>
</tr>
<tr>
<td><INPUT Type="BUTTON" VALUE="School Hall" ONCLICK="window.location.href='schoolHall.php'"></td>
<td><?php echo $row[0] ?></td>
<td> 
```

# asp.net-mvc - asp.net mvc jgqrid 下拉列表

> ID：15386353
> 
> 赞同：1
> 
> 时间：2013-03-13T13:13:34.467
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jqgrid, jqgrid-formatter

我在 colModel 中定义时遇到 jqgrid 问题*edittype: 'select', formatter: 'select'* 这是我的 colModel：

```
colModel:
[
{ name: 'sdv_idreclamo', index: 'sdv_idreclamo', editable: true, edittype: 'text', editoptions: { defaultValue: Idreclamo }, hidden: true },
{ name: 'sdv_parpieza', index: 'sdv_parpieza', align: 'left', width: '35', editable: true, edittype: 'select', editoptions: { dataUrl: '@Url.Action("CargaDropDown", "raTabDatosVehiculo", new { param = "PIEZA"})', buildSelect: createSelectList} },
{ name: 'sdv_parcodclase', index: 'sdv_parcodclase', sortable: true, align: 'left', width: '35', editable: true, edittype: 'select', editoptions: { dataUrl: '@Url.Action("CargaDropDown", "raTabDatosVehiculo", new { param = "CODCLASE"})', buildSelect: createSelectList} }
....
], 
```

当我查看网页时，不显示描述只显示值。例如，列 sdv_pieza 描述为“AMORTIGUADOR”值：001，当它加载网格显示 001 时。我希望它显示“AMORTIGUADOR”我在 sdv_pieza 添加了格式化程序：'select'：

```
{ name: 'sdv_parpieza', index: 'sdv_parpieza', align: 'left', width: '35', editable: true, edittype: 'select', formatter: 'select', editoptions: { dataUrl: '@Url.Action("CargaDropDown", "raTabDatosVehiculo", new { param = "PIEZA"})', buildSelect: createSelectList} }, 
```

当它加载网格时，列 sdv_pieza 是无效的！我在此列中不显示任何内容吗

dataUrl 返回良好的参数并使用 buildSelect 构建选择：createSelectList

```
createSelectList = function (data) {
   var response, s = '<select>', i;
   response = jQuery.parseJSON(data);
   if (response && response.length) {
      $.each(response, function (i) {
        s += '<option value="' + this.cp_idparametro + '">' + this.cp_descparametro + '</option>';
      });
   }
   return s + '</select>';
} 
```

这是我将数据检索到 jqgrid 并进行编辑时的图像： ![在此处输入图像描述](../Images/27b445291bcd5f42e739847bf5e6e5cc.png)

# javascript - 将多维数组的值声明为 true 或 false

> ID：15386359
> 
> 赞同：0
> 
> 时间：2013-03-13T13:13:56.613
> 
> 标签：javascript, jquery, arrays

我可以在 Javascript 中声明一个多维数组，如下所示：

```
var linkArray = new Array(3);
linkArray[0][0] = 'boothsize_link';
linkArray[0][1] = true;
linkArray[0][2] = false;
linkArray[1][0] = 'enkfur_link';
linkArray[1][1] = true;
linkArray[1][2] = false;
linkArray[2][0] = 'enklight_link';
linkArray[2][1] = true;
linkArray[2][2] = false; 
```

这是有效的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:16:32.220

不，这是无效的，您还必须初始化每个子数组：

```
var linkArray = new Array(3);
linkArray[0] = [];
linkArray[0][0] = 'boothsize_link';
linkArray[0][1] = true;
linkArray[0][2] = false;
etc 
```

一般来说，数组初始化器使用`[...]`文字更容易编写：

```
var linkArray = [
    ['boothsize_link', true, false],
    ['enkfur_link', true, false],
    etc

] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:17:30.617

> 这是有效的吗？

是的，这是有效的 JavaScript 语法（除了拼写错误`flase`，它是一个未定义的变量，而不是预期的布尔值）。

> 它会抛出异常吗？

是的。通过分配一个长度为 3 的新的空数组，`linkArray`不会使您可以为其分配某些属性的项数组。`linkArray[0]`是`undefined`，并且`linkArray[0][0]`会抛出错误。你需要打电话

```
linkArray[0] = new Array(3); 
```

之前，和相同的 for `linkArray[1]`and `linkArray[2]`（最好在循环中完成）。

或者您只使用[数组文字](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Array_literals)，这是声明数组的标准方法：

```
var linkArray = [
    ['boothsize_link', true, false],
    ['enkfur_link',    true, flase],
    ['enklight_link',  true, false]
]; 
```

# javascript - 动画的持续时间取决于元素的高度

> ID：15386363
> 
> 赞同：0
> 
> 时间：2013-03-13T13:14:12.570
> 
> 标签：javascript, jquery

我想向下滑动元素，它的持续时间必须取决于高度。例如，如果高度为 2000 像素，则持续时间也必须为 2000

这是我的js

```
var element = document.getElementById('detail-'+thisID),
style = window.getComputedStyle(element),
content_height = style.getPropertyValue('height');
var height_js=parseInt(content_height, 10);
$('#wrap #detail-'+thisID).delay(700).slideDown(height_js); 
```

我走对了吗？如果是，错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:22:13.623

如果您已经在使用 jquery，则可以使用[jQuery.height](http://api.jquery.com/height/)：

```
$('#wrap #detail-'+thisID).delay(700).slideDown($('#wrap #detail-'+thisID).height()); 
```

此外，在您的代码中，您应该使用 simple `document.getElementById('detail-'+thisID')`，而不使用尾随`#`，这只是一个 jquery 选择器，用于标识应按 Id 搜索的元素。

# debugging - intellij 在 tomcat 上调试依赖工件代码

> ID：15386364
> 
> 赞同：2
> 
> 时间：2013-03-13T13:14:15.677
> 
> 标签：debugging, intellij-idea, dependencies, tomcat7

我在 windows7 机器（64 位）上使用 intellij 12 IDE。我正在运行一个本地 tomcat（从 intellij 配置）版本 7，并从我的一个项目中部署了 war 文件 - 我们将项目称为“main”。调试项目“main”工作正常。项目“main”依赖于过滤器的不同项目——我们称之为“过滤器”——我也写了它（意味着我的机器上有源代码）。问题是我想在“过滤器”项目上设置一个断点并对其进行调试，但它不起作用。有任何想法吗？感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:22:26.713

您需要将过滤器依赖源下载到您的项目中，然后您就可以在过滤器上放置断点

尝试做依赖的“下载源”，如果它不可用，你需要从过滤器项目 pom.xml 中使它们可用。

# jquery - 单击时调用特殊的 jQuery 函数

> ID：15386366
> 
> 赞同：0
> 
> 时间：2013-03-13T13:14:19.820
> 
> 标签：jquery, function, click, tinyscrollbar

我正在使用[tinyscrollbar](http://baijs.nl/tinyscrollbar/)和[script](http://baijs.nl/tinyscrollbar/js/jquery.tinyscrollbar.js)。我想在我的页面上有一个按钮，它应该在点击时模拟鼠标滚轮。我认为`wheel(event)`应该调用的是 tinyscrollbar-script 中的函数。我怎样才能做到这一点？

```
$("#clickit").click(wheel); 
```

但这不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:16:01.300

尝试

$(文档).ready(函数(){

```
 $("#clickit").click(function(){
   $('#your_tinyscrollbar_id').wheel();     //Your function call
}); 
```

});

**[更新]**

你不能：这个函数实际上是私有的，只能在更新函数中访问。

这是初始化的描述`tinyscrollbar`：

```
$('#your_scrollbar').data('tsb')             //Object description
    Scrollbar {update: function}
        update: function ( sScroll )
            arguments: null
            caller: null
            length: 1
            name: ""
            prototype: Object
            __proto__: function Empty() {}
            <function scope>                  //Private functions, accessible 
              Closure                         //only within the scope of the 
                drag: function drag( event )  //update function
                end: function end()
                iMouse: Object
                iPosition: Object
                iScroll: 0
                oContent: Object
                oScrollbar: Object
                oSelf: Scrollbar
                oThumb: Object
                oTrack: Object
                oViewport: Object
                oWrapper: p.fn.p.init[1]
                options: Object
                sAxis: false
                sDirection: "top"
                sSize: "Height"
                setEvents: function setEvents()
                setSize: function setSize()
                start: function start( event )
                touchEvents: false
                wheel: function wheel( event )
              Closure
            Global: Window
            __proto__: Scrollbar 
```

# c++ - 为什么 RVO 不会在这里发生？

> ID：15386369
> 
> 赞同：3
> 
> 时间：2013-03-13T13:14:24.047
> 
> 标签：c++, return-value-optimization

我已经阅读了关于 RVO 的 Dave Abrahams[文章](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)以及关于 SO（14043609、9293726 和 10818278）的其他一些问答[，](https://stackoverflow.com/questions/14043609/will-rvo-happen-when-returning-stdpair)但[我](https://stackoverflow.com/questions/9293726/why-g-does-not-enable-rvo-here)[仍然](https://stackoverflow.com/questions/10818278/c-returning-an-object-copy)有一个问题。当我编译并运行以下代码时，我得到以下输出：

```
Address of v in func    0x7fffac6df620
Address of v.data in func       0x2081010
Address of v in main    0x7fffac6df690
Address of v.data in func       0x20811b0
9 
```

对我来说，似乎复制了一份。如何将大对象从函数中传递出去？请注意，我想返回一个或多个对象而不为其编写显式结构。我将 GCC 4.6.3 与 -O2 一起使用。编辑：前两个答案表明我对编译器的期望过高。我添加了一个以相同方式运行的 main2，例如打印的地址不同。我想强调一下，动机是大对象的有效返回。

```
#include <iostream>
#include <vector>
#include <tuple>

std::tuple<std::vector<int>, double> func() {
  std::vector<int> v;
  v.reserve(100);
  for (int k=0;k!=100;k+=1)
    v.push_back(k);

  double a = 5.0;
  std::cout << "Address of v in func\t" << &v << std::endl;
  std::cout << "Address of v.data in func\t" << v.data() << std::endl;
  return make_tuple(v, a);
}

int main() {
  std::vector<int> v;
  double a;
  std::tie(v, a) = func();
  std::cout << "Address of v in main\t" << &v << std::endl;
  std::cout << "Address of v.data in func\t" << v.data() << std::endl;
  std::cout << v[9] << std::endl;
  return 0;
}

int main2() {
  auto tp = func();
  std::vector<int> & v = std::get<0>(tp);
  double & a = std::get<1>(tp);
  std::cout << "Address of v in main\t" << &v << std::endl;
  std::cout << "Address of v.data in func\t" << v.data() << std::endl;
  std::cout << v[9] << std::endl;
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T13:42:30.797

如前所述，有两件事可以防止 RVO。该函数不返回`v`，而是一个由`v`和构造的元组`a`。同样在 main 函数`v`中是分配的，而不是从返回值构造的。

为了得到你想要的，你可以直接使用元组而不需要额外的向量对象：

```
#include <iostream>
#include <vector>
#include <tuple>

std::tuple<std::vector<int>, double> func() {
  std::tuple<std::vector<int>, double> t;
  get<0>(t).reserve(100);
  for (int k=0;k!=100;k+=1)
    get<0>(t).push_back(k);

  get<1>(t) = 5.0;
  std::cout << "Address of v in func\t" << &get<0>(t) << std::endl;
  std::cout << "Address of v.data in func\t" << get<0>(t).data() << std::endl;
  return t;
}

int main()
{
  std::tuple<std::vector<int>, double> t = func();
  std::cout << "Address of v in main\t" << &get<0>(t) << std::endl;
  std::cout << "Address of v.data in func\t" << get<0>(t).data() << std::endl;
  std::cout << get<0>(t)[9] << std::endl;

    return 0;
} 
```

输出：

```
Address of v in func    0x28fe80
Address of v.data in func       0x962c08
Address of v in main    0x28fe80
Address of v.data in func       0x962c08
9 
```

另一种优化是在构造元组时使用移动语义：

```
 return make_tuple(std::move(v), a); 
```

在这种情况下，至少可以避免复制向量的内部缓冲区：

```
Address of v in func    0x28fdd4
Address of v.data in func       0xa72c08
Address of v in main    0x28fe64
Address of v.data in func       0xa72c08
9 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T13:18:18.787

由于`v`和`a`都被声明为 中的变量`main()`，因此没有要删除的副本。你在这里得到的是复制分配，而不是复制构造。它相当于：

```
struct Foo {};

Foo foo() { return Foo(); }

int main()
{
  Foo f1;
  f1 = foo();  // no copy hence f1 is distinct from object returned
  Foo f2 = foo(); // We can get RVO here, returned object can be f2.
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T13:24:50.180

RVO 很可能在这里发生，但您给出的代码中复制省略的唯一机会是将返回值复制`make_tuple(v, a)`到`func()`.

不管这是否完成，`std::vector`and`double`仍然会被复制。您只是从`func()`to`v`和`a`in的结果进行分配`main`。复制省略（和 RVO）仅适用于复制/移动构造，不适用于赋值。

当你做`&v`in 时`main`，你只是得到`v`在第一行定义的对象地址`main`。当然，这与 中`v`定义的对象不同`func`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-13T13:43:00.253

在您的第一个示例中，数据被复制到作业中：

```
int main() {
  std::vector<int> v;
  double a;
  std::tie(v, a) = func(); 
```

在第二个示例中，创建元组时仍会复制数据。这个修改后的示例表明 RVO 确实发生了：

```
#include <iostream>
#include <vector>
#include <tuple>

std::tuple<std::vector<int>, double> func() {
  std::vector<int> v;
  v.reserve(100);
  for (int k=0;k!=100;k+=1)
    v.push_back(k);

  double a = 5.0;

  const auto ret = make_tuple(v, a);
  const auto &v1 = std::get<0>(ret);

  std::cout << "Address of v in func\t" << &v1 << std::endl;
  std::cout << "Address of v.data in func\t" << v1.data() << std::endl;

  return ret;
}

int main() {
  auto tp = func();
  std::vector<int> & v = std::get<0>(tp);
  double & a = std::get<1>(tp);
  std::cout << "Address of v in main\t" << &v << std::endl;
  std::cout << "Address of v.data in func\t" << v.data() << std::endl;
  std::cout << v[9] << std::endl;

  (void)a;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T14:08:05.757

谢谢您的回答。我发现蒂莫的[回答](https://stackoverflow.com/a/15387047/1693829)最有帮助。这就是我如何根据自己的风格调整答案。`func`请注意和中的重复样板`main`。当然，如果有人知道如何摆脱它，那就太好了！

```
#include <iostream>
#include <vector>
#include <tuple>

std::tuple<std::vector<int>, double> func() {
  std::tuple<std::vector<int>, double> tp;
  std::vector<int> & v = std::get<0>(tp);
  double & a = std::get<1>(tp);

  v.reserve(100);
  for (int k=0;k!=100;k+=1)
    v.push_back(k);

  a = 5.0;
  std::cout << "Address of v in func\t" << &v << std::endl;
  std::cout << "Address of v.data in func\t" << v.data() << std::endl;
  return tp;
}

int main() {
  std::tuple<std::vector<int>, double> tp = func();
  std::vector<int> & v = std::get<0>(tp);
  double & a = std::get<1>(tp);

  std::cout << "Address of v in main\t" << &v << std::endl;
  std::cout << "Address of v.data in func\t" << v.data() << std::endl;
  std::cout << v[9] << std::endl;

  (void)a;
  return 0;
} 
```

# android - Android：检测手机连接的蜂窝天线是否发生了变化

> ID：15386370
> 
> 赞同：0
> 
> 时间：2013-03-13T13:14:24.563
> 
> 标签：android

我想计算以下数字：

```
CellularServiceChangeRate 
```

这表示用户连接到的蜂窝服务在特定时间段内变化的频率。

我在`android.telephony`API 中找到一个好的事件来收听时遇到了一些麻烦，这将允许我确定是否：

```
lastAntenna != currentAntenna. 
```

您对如何确定这一点有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:16:53.133

您可以设置一个监听器以更改连接并将最后一个已知的单元网络保存在 sharedPreferences 中或将其保存到本地数据库

```
<receiver android="YourNetworkListener">
    <intent-filter>
        <action android:name="android.net.conn.CONNECTIVITY_CHANGE" /> 
```

检查以前的连接

```
 SharedPreferences sharedPref = getSharedPreferences("name",MODE_PRIVATE);
    String connection = sharedPref.getString("phone_connection", null); 
```

将其与当前连接进行比较并对变量进行数学运算，然后

保存

```
 SharedPreferences sharedPref = getSharedPreferences("name",MODE_PRIVATE);
    SharedPreferences.Editor prefEditor = sharedPref.edit();
    prefEditor.putString("phone_connection", How Ever You want to identify the networks);
    prefEditor.commit(); 
```

# emacs - Yasnippet（0.6.1c 和 0.8）似乎在 emacs 中“隐藏”自动完成（1.3.1）帮助

> ID：15386372
> 
> 赞同：1
> 
> 时间：2013-03-13T13:14:27.487
> 
> 标签：emacs, autocomplete, redhat, yasnippet

我正在尝试在 RHEL5 上的 Emacs 24.1（从源代码构建）中使用 Yasnippet 和自动完成模式。这是我的 .emacs.d/init.el：

```
;; yasnippet
(add-to-list 'load-path "~/.emacs.d/plugins/yasnippet-0.6.1c")
(require 'yasnippet)
(yas/initialize)
(yas/load-directory "~/.emacs.d/plugins/yasnippet-0.6.1c/snippets")

;; auto-complete mode
(add-to-list 'load-path "~/.emacs.d/plugins/auto-complete-1.3.1")
(require 'auto-complete-config)
(add-to-list 'ac-dictionary-directories "~/.emacs.d/plugins/auto-complete-1.3.1/dict")
(ac-config-default) 
```

这样，自动完成根本不会显示任何帮助。如果我删除整个 yasnippet 的东西，那*几乎*是可以的（从某种意义上说，帮助显示了`load-path`但没有显示`defun`......但这不是现在的主要问题）。我也尝试使用 Yasnippet 0.8，但没有任何改变。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:44:31.400

试试[这个](http://www.cx4a.org/pub/auto-complete-yasnippet.el)解决方案。

[PS 这是从el-get](https://github.com/dimitri/el-get)食谱中偷来的。

# xml - XSLT：意外继承的 null xmlns 属性

> ID：15386373
> 
> 赞同：1
> 
> 时间：2013-03-13T13:14:31.730
> 
> 标签：xml, xslt, xslt-2.0

我正在编写一个转换，我想将 xmlns 属性 ( `xmlns="myNS"`) 添加到根节点。

应用转换时，该`xmlns`属性包含在某些子元素中。

我无法弄清楚如何将我的转换更改为仅将其应用于根元素。

**XML**

```
<db:result xmlns:db="http://www.sonicsw.com/esb/service/dbservice">
    <db:resultSet version="1.1">
        <db:row>
            <id>a</id>
            <value1>b</value1>
            <value2>c</value2>
        </db:row>
        <db:row>
            <id>a</id>
            <value1>d</value1>
            <value2>e</value2>
        </db:row>
        <db:row>
            <id>a</id>
            <value1>f</value1>
            <value2>g</value2>
        </db:row>
        <db:row>
            <id>a</id>
            <value1>h</value1>
            <value2>i</value2>
        </db:row>
    </db:resultSet>
</db:result> 
```

**XSLT**

```
<xsl:stylesheet version="2.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:db="http://www.sonicsw.com/esb/service/dbservice" 
    exclude-result-prefixes="db">
    <xsl:template match="/">
            <xsl:for-each-group select="//db:row" group-by="id">
                <xsl:sort select="id"/>
                    <xsl:apply-templates select="." mode="document"/>
            </xsl:for-each-group>
    </xsl:template>

    <xsl:template match="db:row" mode="document">
        <root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="myNS">
            <id><xsl:value-of select="id"/></id>
            <lines>
                <xsl:apply-templates select="//db:row[id=current()/id]" mode="line"/>
            </lines>
        </root>        
    </xsl:template>

    <xsl:template match="db:row" mode="line">
        <line>
            <valueof1><xsl:value-of select="value1"/></valueof1>
            <valueof2><xsl:value-of select="value2"/></valueof2>
        </line>
    </xsl:template>
</xsl:stylesheet> 
```

**XML 输出**

```
<root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="myNS">
    <id>a</id>
    <lines>
        <line xmlns="">
            <valueof1>b</valueof1>
            <valueof2>c</valueof2>
        </line>
        <line xmlns="">
            <valueof1>d</valueof1>
            <valueof2>e</valueof2>
        </line>
        <line xmlns="">
            <valueof1>f</valueof1>
            <valueof2>g</valueof2>
        </line>
        <line xmlns="">
            <valueof1>h</valueof1>
            <valueof2>i</valueof2>
        </line>
    </lines>
</root> 
```

**XML 预期输出**

```
<root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="myNS">
    <id>a</id>
    <lines>
        <line>
            <valueof1>b</valueof1>
            <valueof2>c</valueof2>
        </line>
        <line>
            <valueof1>d</valueof1>
            <valueof2>e</valueof2>
        </line>
        <line>
            <valueof1>f</valueof1>
            <valueof2>g</valueof2>
        </line>
        <line>
            <valueof1>h</valueof1>
            <valueof2>i</valueof2>
        </line>
    </lines>
</root> 
```

*注意：我找到了这个现有的帖子，但无法锻炼如何应用建议的解决方案：*

*   [使用 XSL 将 xmlns 属性添加到 XML 文档的问题](https://stackoverflow.com/questions/3490246/problem-with-adding-xmlns-attribute-to-xml-document-using-xsl)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:27:01.633

*样式表中的文字结果元素从样式表中该点的*`xmlns`范围内的声明中获取其命名空间，即在

 *```
 <root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="myNS">
        <id><xsl:value-of select="id"/></id>
        <lines>
            <xsl:apply-templates select="//db:row[id=current()/id]" mode="line"/>
        </lines>
    </root> 
```

该`root`元素及其所有不带前缀的子元素都在`myNS`命名空间中。然而在

```
<xsl:template match="db:row" mode="line">
    <line>
        <valueof1><xsl:value-of select="value1"/></valueof1>
        <valueof2><xsl:value-of select="value2"/></valueof2>
    </line>
</xsl:template> 
```

和元素不在命名空间中，因为此时样式表的范围内没有默认`line`值。`valueofN``xmlns`

所以简单的答案是将模板中`xmlns="myNS"`的`root`元素`db:row`向上移动到顶层`xsl:stylesheet`：

```
<xsl:stylesheet version="2.0" 
    xmlns="myNS"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:db="http://www.sonicsw.com/esb/service/dbservice" 
    exclude-result-prefixes="db">
    <xsl:template match="/">
            <xsl:for-each-group select="//db:row" group-by="id">
                <xsl:sort select="id"/>
                    <xsl:apply-templates select="." mode="document"/>
            </xsl:for-each-group>
    </xsl:template>

    <xsl:template match="db:row" mode="document">
        <root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
            <id><xsl:value-of select="id"/></id>
            <lines>
                <xsl:apply-templates select="//db:row[id=current()/id]" mode="line"/>
            </lines>
        </root>        
    </xsl:template>

    <xsl:template match="db:row" mode="line">
        <line>
            <valueof1><xsl:value-of select="value1"/></valueof1>
            <valueof2><xsl:value-of select="value2"/></valueof2>
        </line>
    </xsl:template>
</xsl:stylesheet> 
```

但请注意，如果`row`原始 XML 中的元素并非都具有相同的 id，则此样式表将不会产生格式正确的输出，因为您将获得多个`root`没有单个父元素的元素。您可能希望在`match="/"`模板中添加一个包装元素以确保输出格式正确。

PS，因为你在一个`for-each-group`它可能会更有效地丢失`mode="document"`模板并将其内容直接移动到 feg 中，然后使用`current-group`而不是过滤`[id=current()/id]`：

```
 <xsl:template match="/">
        <xsl:for-each-group select="//db:row" group-by="id">
            <xsl:sort select="current-grouping-key()"/>
            <root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                <id><xsl:value-of select="current-grouping-key()"/></id>
                <lines>
                   <xsl:apply-templates select="current-group()" mode="line"/>
                </lines>
            </root>        
        </xsl:for-each-group>
    </xsl:template> 
```*

# powershell - 在 PowerShell 2.0 中需要参数的函数内调用函数

> ID：15386374
> 
> 赞同：0
> 
> 时间：2013-03-13T13:14:33.433
> 
> 标签：powershell

我有一个具有各种功能的模块。我最近添加了一个功能。该函数接受一个参数，处理一些数据并调用其中的另一个函数。该函数接受一个字符串数组作为参数。下面是代码：

```
 Function Get-CMClientInstall{
        some code..........

        Analyze-ClientInstall $clientcheck

        Function Analyze-ClientInstall
        {
            #[CmdletBinding()]

            PARAM (
            [Parameter(Mandatory=$true)][string[]]$CCMClients)
        }
     } 
```

以下是错误消息：

```
The term 'Analyze-ClientInstall' is not recognized as the name of a cmdlet, function, script file, or operable program.
 Check the spelling of the name, or if a path was included, verify that the path is correct and try again.
At C:\Windows\system32\WindowsPowerShell\v1.0\Modules\ConfigMgrCommands\ConfigMgrCommands.psm1:475 char:34
+             Analyze-ClientInstall <<<<  $clientcheck
    + CategoryInfo          : ObjectNotFound: (Analyze-ClientInstall:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException 
```

有人可以请教吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:17:21.543

PowerShell 读取文件并同步执行内容。当您调用该函数时，PowerShell 不知道它存在，因为它还没有解释它。在函数声明之后移动到调用函数。

```
 Function Get-CMClientInstall{
    some code..........

    Function Analyze-ClientInstall
    {
        #[CmdletBinding()]

        PARAM (
        [Parameter(Mandatory=$true)][string[]]$CCMClients)
    }

    Analyze-ClientInstall $clientcheck
 } 
```

# iphone - 在 iPhone 屏幕上使用多点触控检测左手或右手

> ID：15386375
> 
> 赞同：-1
> 
> 时间：2013-03-13T13:14:35.140
> 
> 标签：iphone, ios, objective-c, multi-touch, uitouch

下图橙色区域将放置婴儿手掌。我只需要知道如何检测baby plam 是右还是左。

![在此处输入图像描述](../Images/b138f2627d364393ed6da1830dbcab3e.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T13:36:00.440

简单的说; 这不能（准确地）完成。

iOS 设备的屏幕可以检测到触摸事件以及这些触摸事件在屏幕上发生的坐标。然而，设备无法知道屏幕上放置了什么。对于所有设备而言，它可能是屏幕上的一张脸，就像一只手一样。

一个可能的解决方法是让用户将五个手指放在屏幕上，然后根据触摸事件的坐标得出它是左手还是右手的结论。伪代码示例：

```
if(*the left most coordinate is lower down on the screen than the rest*) {
    % It is probably a right hand since the thumb is
    % (on most humans at least) lower down than the rest
} 
```

可以应用相同的方法来检测左手。然而，这只是检测哪只手是哪只手的一种策略。为了更准确地做到这一点，我建议您让用户拍摄他/她的手的照片并改为分析图像。

希望能帮助到你！

# asp.net-mvc - Kendo ASP.NET MVC - 索引超出范围数据绑定

> ID：15386380
> 
> 赞同：7
> 
> 时间：2013-03-13T13:14:43.613
> 
> 标签：asp.net-mvc, telerik, kendo-ui, kendo-grid

尝试将数据表绑定到 Telerik Kendo Grid 时出现以下错误：

**指数超出范围。必须是非负数且小于集合的大小。**

我已经关注了 Telerik 的示例项目，但在我的代码中，“DataSource”的“读取”功能似乎失败了：

**.Read(read => read.Action("Read", "Events"))**

我有 ActionResult Read() 当前返回 null，只是因为我想看看它是否能实现该功能。此外，我已经逐步完成，数据表正在返回正确的列和列名。

任何帮助表示赞赏。

*事件.cshtml*

```
@model System.Data.DataTable

@{
    ViewBag.Title = "Events";
    Layout = "~/Views/_mainLayout.cshtml";
}

<p>Events</p>

@(Html.Kendo().Grid(Model)
    .Name("GridStatic")
    .Columns(columns =>
    {
        columns.Bound("ID");
        columns.Bound("EntryType");
        columns.Bound("EventDate");
        columns.Bound("EventData");
        columns.Bound("Source");
    })
    .Pageable()
    .Sortable()
    .Scrollable()
    .Filterable()
    .DataSource(dataSource => dataSource
        .Ajax()       
        .Model(model =>
            {
                model.Field("ID", typeof(int));
                model.Field("EntryType", typeof(DateTime));
                model.Field("EventDate", typeof(string));
                model.Field("EventData", typeof(string));
                model.Field("Source", typeof(string));
            })
        .Read(read => read.Action("Read", "Events"))
    )
) 
```

*事件控制器.cs*

```
public class EventsController : Controller
{
    //
    // GET: /Events/

    public ActionResult Events(string sName)
    {
        EventReader ereader = new EventReader(sName);
        return View(ereader.ParseIntoTable(ereader.GetListOfEvents()));
    }

    public ActionResult Read([DataSourceRequest] DataSourceRequest request)
    {
        return null;
    }
} 
```

**更新：：**

这是堆栈跟踪，我不确定这是否有帮助。

```
    [ArgumentOutOfRangeException：索引超出范围。必须是非负数且小于集合的大小。
    参数名称：索引]
     System.ThrowHelper.ThrowArgumentOutOfRangeException() +72
   System.Collections.ObjectModel.Collection`1.set_Item(Int32 index, T value) +10451574
   System.Web.Mvc.ControllerContext.get_RequestContext() +25
   Kendo.Mvc.UI.NavigatableExtensions.GenerateUrl(INavigatable navigatable, ViewContext viewContext, IUrlGenerator urlGenerator) +52
   Kendo.Mvc.UI.Fluent.CrudOperationBuilder.SetUrl() +81
   Kendo.Mvc.UI.Fluent.CrudOperationBuilder.Action(String actionName, String controllerName, Object routeValues) +66
   Kendo.Mvc.UI.Fluent.CrudOperationBuilder.Action(String actionName, String controllerName) +47
   c:\Users\wsharp\Documents\Visual Studio 2010\Projects\Inviso\Inviso\Views\Events\Events.cshtml:40 中的 ASP._Page_Views_Events_Events_cshtml.b__3（CrudOperationBuilder 读取）
   Kendo.Mvc.UI.Fluent.AjaxDataSourceBuilderBase`2.Read(Action`1 配置器) +131
   c:\Users\wsharp\Documents\Visual Studio 2010\Projects\Inviso\Inviso\Views\Events\Events.cshtml:30 中的 ASP._Page_Views_Events_Events_cshtml.b__2(DataSourceBuilder`1 数据源)
   Kendo.Mvc.UI.Fluent.GridBuilder`1.DataSource(Action`1 配置器) +212
   c:\Users\wsharp\Documents\Visual Studio 2010\Projects\Inviso\Inviso\Views\Events\Events.cshtml:16 中的 ASP._Page_Views_Events_Events_cshtml.Execute()
   System.Web.WebPages.WebPageBase.ExecutePageHierarchy() +197
   System.Web.Mvc.WebViewPage.ExecutePageHierarchy() +97
   System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage) +76
   System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance) +260
   System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer) +115
   System.Web.Mvc.ViewResultBase.ExecuteResult（ControllerContext 上下文）+295
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult) +13
   System.Web.Mvc.c__DisplayClass1a.b__17() +23
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter（IResultFilter 过滤器，ResultExecutingContext preContext，Func`1 延续）+242
   System.Web.Mvc.c__DisplayClass1c.b__19() +21
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 过滤器, ActionResult actionResult) +177
   System.Web.Mvc.Async.c__DisplayClass2a.b__20() +89
   System.Web.Mvc.Async.c__DisplayClass25.b__22(IAsyncResult asyncResult) +102
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +57
   System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeAction(IAsyncResult asyncResult) +43
   System.Web.Mvc.c__DisplayClass1d.b__18(IAsyncResult asyncResult) +14
   System.Web.Mvc.Async.c__DisplayClass4.b__3(IAsyncResult ar) +23
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +57
   System.Web.Mvc.Async.c__DisplayClass4.b__3(IAsyncResult ar) +23
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +47
   System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.EndExecute(IAsyncResult asyncResult) +10
   System.Web.Mvc.c__DisplayClass8.b__3(IAsyncResult asyncResult) +25
   System.Web.Mvc.Async.c__DisplayClass4.b__3(IAsyncResult ar) +23
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +47
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult 结果) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +9629296
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155

```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T04:29:16.367

原来它与我的 web.config 有关。我创建的每个剑道对象都遇到了错误。将以下代码添加到顶级 web.config 似乎可以解决所有问题。

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
      <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-18T06:34:50.537

通过在您的解决方案的 web.config 文件中包含部分将对您有所帮助。

```
<runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
        <dependentAssembly>
            <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
            <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
        </dependentAssembly>
        <dependentAssembly>
            <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
            <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
        </dependentAssembly>
        <dependentAssembly>
            <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
            <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
        </dependentAssembly>
    </assemblyBinding>
</runtime> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:08:40.870

我推测发生错误是因为该`Read`操作未返回有效的结果集。

通常剑道网格需要`JsonResult`在 Ajax 模式下读取时返回一个。`DataTable`如果您返回一个正确格式化为 json 结果的空，那么我怀疑这会解决它。

```
 public ActionResult Read([DataSourceRequest] DataSourceRequest request)
  {
     return this.Json(new DataTable().ToDataSourceResult(request));
  } 
```

显然，您应该将 替换`DataTable`为您的真实结果集。

# jquery - jQuery：更改特定的文本颜色

> ID：15386381
> 
> 赞同：1
> 
> 时间：2013-03-13T13:14:45.080
> 
> 标签：jquery

我似乎无法弄清楚这一点。我的网页中有以下代码，如何使用 jQuery 将“单击此处”更改为蓝色或某种颜色？

```
<td width="30%" valign="top" align="left" 
class="td-label-276-7365 td-label-276 labeltext" 
id="td-label-field-7365">Flavors [Click here] :
</td> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:17:41.820

如果你只想改变“点击这里”的颜色，而你绝对必须使用JS，那么你可以这样做：

```
var text = $('td').text();
text = text.replace(/\[Click\shere\]/g, '[<font color="blue">Click here</font>]');
$('td').html(text); 
```

但最好直接用 html 和 css 来做，比如：

```
<td width="30%" ...>Flavors [<span class="blue">Click here</span>] :</td> 
```

在你的 CSS 中：

```
span.blue {
   color: blue;
} 
```

**演示：**两种方法都可以在**[这里看到](http://jsfiddle.net/XPSPU/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:16:08.820

利用[`css()`](http://api.jquery.com/css/)

```
 $('#td-label-field-7365').css('color','blue'); 
```

**更新**

如果您只需要在 [单击此处] 中更改颜色，请在其周围添加广告并使用`css()`

**html**

```
<td width="30%" valign="top" align="left" 
class="td-label-276-7365 td-label-276 labeltext" 
id="td-label-field-7365">Flavors <span>[Click here]</span>
</td> 
```

**jQuery**

```
$('#td-label-field-7365 span').css('color','blue'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:16:18.547

```
$('#td-label-field-7365').css('color', 'blue'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T13:17:28.973

```
$('.labeltext').css('color','blue'); 
```

# android - 为什么我使用时 ListView 行的背景资源会发生变化？

> ID：15386383
> 
> 赞同：1
> 
> 时间：2013-03-13T13:14:48.123
> 
> 标签：android, listview, background

我正在开发有关个人预算的 android 应用程序。当我列出交易时，我正在使用`ListView`. 在`ListView`I 上显示所有具有不同背景资源的收入、费用和转账交易。但是当我向下滚动到列表视图并再次出现时，背景图像会发生变化。有人能告诉我为什么会这样吗？

这是我的代码示例；

```
public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.transactionline, null);

    transaction.setType(Integer.parseInt(item.get("Type")));

    if(transaction.getType()==1){
        anaalan.setBackgroundResource(R.anim.greenbutton);
    }else if(transaction.getType()==3)
    {
        anaalan.setBackgroundResource(R.anim.buttonstyle);
    }

    return vi;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:07:12.547

这是您问题的答案。

众所周知，ListView 重用 converView 并在重用视图中显示新值。因此，每当您向上或向下滚动 ListView 时，从屏幕上消失的 listItems 都会与刚刚出现在屏幕上的新 listItems 一起重用。

因此，当您将背景颜色添加到具有绿色之类的某些列表项时，当它从屏幕上消失并重新用于新列表项时，它的背景颜色已经为绿色，因此新项目也将获得绿色背景，并且您滚动的速度也一样快向上和向下列出最终所有项目都变为绿色。

还有一件事总是给您的 ListView 提供固定高度，例如 fill_Parent 或 500dp 之类的东西，因为当 getView() 开始绘制项目时，它将计算前三个列表项的大小，然后计算具有列表视图高度的其余项目的大小。

所以我在这种情况下所做的是，默认情况下我给每个视图一个透明的颜色，然后应用我的逻辑使其变为其他颜色。

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        Holder holder;
        if (convertView == null){
            holder = new Holder();
            convertView =   View.inflate(context, R.layout.item, null);
            holder.txtID = (TextView) convertView.findViewById(R.id.text);
            holder.txtName  =   (TextView) convertView.findViewById(R.id.text2);
            convertView.setTag(holder);
        }else{
            holder = (Holder) convertView.getTag();
        }

        convertView.setBackgroundColor(Color.TRANSPARENT);

        if (Integer.parseInt( setter.get(position).getId() ) % 3 == 0  ){
            convertView.setBackgroundColor(Color.GREEN);
        }

        if (Integer.parseInt( setter.get(position).getId() ) % 2 == 0 ){
            convertView.setBackgroundColor(Color.YELLOW);
        }

        holder.txtID.setText(setter.get(position).getId());
        holder.txtName.setText(setter.get(position).getName());

        return convertView;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:36:43.753

尝试这个：

```
if (position % 2 == 1)
   { 
    convertView.setBackgroundColor(Color.WHITE);    
   }
 else
   { 
    convertView.setBackgroundColor(Color.TRANSPARENT); 
   }
convertView.setTag(holder); 
```

# c# - 替换位图/图像中特定颜色的有效方法

> ID：15386385
> 
> 赞同：4
> 
> 时间：2013-03-13T13:14:52.477
> 
> 标签：c#, .net, image, image-processing, bitmap

在我的灰度图片中，我需要找到特定的值并将其替换为某种颜色，例如黄色。这是我现在拥有的代码，但它没有我需要的那么快。有没有更有效的方法来实现这一目标？我对[ColorMatrix](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.colormatrix%28v=vs.110%29.aspx)类感到不满，但找不到在不影响整个图像的情况下替换单个值的方法。

```
unsafe
{
    byte stlThres = 115;

    int bytePerPixel = Image.GetPixelFormatSize(kpImageViewer1.Image.PixelFormat) / 8;
    var data = kpImageViewer1.Image.LockBits(new Rectangle(0, 0, kpImageViewer1.Image.Width, kpImageViewer1.Image.Height), ImageLockMode.WriteOnly, kpImageViewer1.Image.PixelFormat);
    for (int y = 0; y < data.Height; y++)
    {
        byte* row = (byte*)data.Scan0 + (y * data.Stride);

        for (int x = 0; x < data.Width; x++, row += bytePerPixel)
        {
            if (row[0] == stlThres)
            {
                row[0] = 0; //b
                row[1] = 255; //g
                row[2] = 255; //r
                if (bytePerPixel == 4)
                {
                    row[3] = 255; //a
                }
            }
        }
    }
    kpImageViewer1.Image.UnlockBits(data);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T18:07:06.067

在 4 通道图像的情况下，每个像素是 4 字节（每个通道 8 位），您可以使用 256 条目查找表索引`row[0]`并同时将所有四个通道分配为单个 32 位`int`。

# user-interface - 构建 Haskell (gtk2hs) GUI

> ID：15386386
> 
> 赞同：5
> 
> 时间：2013-03-13T13:14:53.487
> 
> 标签：user-interface, haskell, architecture, gtk2hs

我正在尝试使用 Gtk2Hs 构建中型 GUI，但我不太确定构建系统的最佳方式是什么。我正在寻找一种方法来单独开发子组件，并且通常最终得到一个不会让我以后拔头发的结构。

主要困难是由 API 是基于延续的相机等组件引起的（即，我需要使用带有 的相机包装块`withVideoMode :: Camera Undefined -> (Camera a -> IO ()) -> IO ()`）。我也想将它们分开，但我还没有找到合理的方法来做到这一点。

我需要添加的大多数组件都需要*初始化*，例如设置相机参数或构建小部件，*捕获*由其他组件触发的事件以及最后的*清理*，例如断开硬件。

到目前为止，我已经考虑过使用`ContT`cps 部件和类似 snaplets 的组件，并将它们隐藏在某个`State`地方。第一个看起来非常重量级，第二个看起来很讨厌，因为我不能在 gtk2hs 回调中优雅地使用转换器。

（由于某种原因，今天的要点对我不起作用，所以很抱歉在这里发布整个巨大的代码）

```
{-#LANGUAGE ScopedTypeVariables#-}
{-#LANGUAGE DataKinds #-}

import CV.CVSU
import CV.CVSU.Rectangle
import CV.Image as CV
import CV.Transforms
import CV.ImageOp 
import CV.Drawing as CV
import CVSU.PixelImage
import CVSU.TemporalForest
import Control.Applicative
import Control.Applicative
import Control.Concurrent
import Control.Monad
import Data.Array.MArray
import Data.IORef
import Data.Maybe
import Data.Word
import Utils.Rectangle
import Foreign.Ptr
import Graphics.UI.Gtk

import System.Camera.Firewire.Simple

convertToPixbuf :: CV.Image RGB D8 -> IO Pixbuf
convertToPixbuf cv = withRawImageData cv $ \stride d -> do
    pixbufNewFromData (castPtr d) ColorspaceRgb False 8 w h stride
   where (w,h) = getSize cv

initializeCamera dc e = do 
    putStrLn $ "Initializing camera "++show e
    cam <- cameraFromID dc e
    setOperationMode cam B
    setISOSpeed  cam ISO_800
    setFrameRate cam Rate_30
    setupCamera cam 20 defaultFlags
    return cam

handleFrame tforest image = do
  pimg    <- toPixelImage (rgbToGray8 image)
  uforest <- temporalForestUpdate tforest pimg
  uimg    <- temporalForestVisualize uforest
  --uimage  <- expectByteRGB =<< fromPixelImage uimg
  temporalForestGetSegments uforest

  --mapM (temporalForestGetSegmentBoundary uforest) ss

createThumbnail img = do 
     pb     <- convertToPixbuf $ unsafeImageTo8Bit $ scaleToSize Linear True (95,95) (unsafeImageTo32F img)
     imageNewFromPixbuf pb

main :: IO ()
main = withDC1394 $ \dc -> do
    -- ** CAMERA Setup **
    cids <- getCameras dc
    cams <- mapM (initializeCamera dc) $ cids

    -- ** Initialize GUI ** 
    initGUI
    pp <- pixbufNew ColorspaceRgb False 8 640 480
    window <- windowNew

    -- * Create the image widgets 
    images <- vBoxNew True 3
    image1  <- imageNewFromPixbuf pp
    image2  <- imageNewFromPixbuf pp
    boxPackStart images image1 PackGrow 0 
    boxPackEnd   images image2 PackGrow 0 

    -- * Create the Control & main widgets
    screen     <- hBoxNew True 3
    control    <- vBoxNew True 3
    info       <- labelNew (Just "This is info")
    but        <- buttonNewWithLabel "Add thumbnail"
    thumbnails <- hBoxNew True 2
    boxPackStart screen images PackGrow 0 
    boxPackStart screen control PackGrow 0 
    boxPackStart control info PackGrow 0 
    boxPackStart control but PackRepel 0 
    boxPackStart control thumbnails PackGrow 0 
    but `onClicked` (do
        info<- labelNew (Just "This is info")
        widgetShowNow info
        boxPackStart thumbnails info PackGrow 0)

    set window [ containerBorderWidth := 10
                   , containerChild := screen ]

    -- ** Start video transmission **
    withVideoMode (cams !! 0) $ \(c :: Camera Mode_640x480_RGB8) -> do
--     withVideoMode (cams !! 1) $ \(c2 :: Camera Mode_640x480_RGB8) -> do
        -- ** Start cameras ** --
        startVideoTransmission c
--        startVideoTransmission c2
        -- ** Setup background subtraction ** --
        Just f <- getFrame c 
        pimg <- toPixelImage (rgbToGray8 f)
        tforest <- temporalForestCreate 16 4 10 130 pimg

        -- * Callback for gtk
        let grabFrame = do
            frame <- getFrame c 
--            frame2 <- getFrame c2 
            maybe (return ()) 
                  (\x -> do
                          ss <- handleFrame tforest x
                          let area = sum [ rArea r | r <- (map segToRect ss)]
                          if area > 10000 
                                then return ()
                                 --putStrLn "Acquiring a thumbnail"
                                 --tn <- createThumbnail x
                                 --boxPackStart thumbnails tn PackGrow 0 
                                 --widgetShowNow tn
                                 --containerResizeChildren thumbnails
                                else return ()
                          labelSetText info ("Area: "++show area)
                          pb <- convertToPixbuf
                                    --  =<< CV.drawLines x (1,0,0) 2 (concat segmentBoundary)
                                    (x <## map (rectOp (1,0,0) 2) (map segToRect ss) )
                          pb2 <- convertToPixbuf x
                          imageSetFromPixbuf image1 pb
                          imageSetFromPixbuf image2 pb2
                          )
                  frame
--            maybe (return ()) 
--                  (convertToPixbuf >=> imageSetFromPixbuf image2)
--                  frame2
            flushBuffer c 
--            flushBuffer c2 
            return True

        timeoutAddFull grabFrame priorityDefaultIdle 20

        -- ** Setup finalizers ** 
        window `onDestroy` do
                    stopVideoTransmission c
                    stopCapture c
                    mainQuit

        -- ** Start GUI **
        widgetShowAll window
        mainGUI 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:27:52.767

所以你的要求是：

*   CPS 风格 API
*   资源初始化和终结
*   可能是一个单子变压器，用于 IO
*   模块化和可组合性

似乎其中一个迭代器库非常适合您。特别是`conduit`具有最成熟的资源最终确定性，但`pipes`您可能也会对它的理论优雅和可组合性感兴趣。如果你的代码只是`IO`基于，那么新发布的`io-streams`也将是一个不错的选择。

`pipes`：[http ://hackage.haskell.org/packages/archive/pipes/3.1.0/doc/html/Control-Proxy-Tutorial.html](http://hackage.haskell.org/packages/archive/pipes/3.1.0/doc/html/Control-Proxy-Tutorial.html)

`conduit`：[https ://www.fpcomplete.com/school/pick-of-the-week/conduit-overview](https://www.fpcomplete.com/school/pick-of-the-week/conduit-overview)

`io-streams`：[http ://hackage.haskell.org/packages/archive/io-streams/1.0.1.0/doc/html/System-IO-Streams-Tutorial.html](http://hackage.haskell.org/packages/archive/io-streams/1.0.1.0/doc/html/System-IO-Streams-Tutorial.html)

如果您提供一个小片段或描述您要完成的工作，我可以尝试使用`pipes`（我最熟悉的库）编写它

# regex - 如何匹配行尾或仅行尾的任何非单词字符

> ID：15386391
> 
> 赞同：2
> 
> 时间：2013-03-13T13:15:02.023
> 
> 标签：regex

使用正则表达式，我想匹配行尾的所有非单词字符，或者，如果没有非单词字符，只匹配行尾。

这就是我认为应该简单的：

```
/\W*$/ 
```

也就是说，匹配零个或多个非单词字符，然后是行尾。

我在[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)上试过，但没那么简单。

然后，更进一步，我还想在行尾匹配空白，如下所示：

```
/[\W\s]*$/ 
```

也就是说，匹配集合中的零个或多个字符、非单词字符和空白字符，然后是行尾。

当然，这也行不通。

在一天结束时，我想使用 javascript 用句号替换一行末尾不是字母数字字符的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:21:09.167

将该`.replace`方法与直接正则表达式一起使用，而不是字符串。`^`是“非”字符。所以任何不是字母数字的东西。

```
var good = bad.replace(/[^\w]*$/g, ""); 
```

证明：

```
> bad = "asd$f   "
"asd$f   "
> bad.replace(/[^\w]*$/g, "")
"asd$f" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:57:46.200

我的第一种方法是正确的。只是正则表达式工具玩得不好。

**任何一个** `/\W*$/`

**或者** `/[^\w]*$/`

这显然是相同的。

*使用[这个](http://terminal.jcubic.pl/)jQuery 终端对其进行了测试。*

# authentication - 无法清除 UserProfile <-> Role 关系（使用 Entity Framework 5 和 MVC 4）

> ID：15386394
> 
> 赞同：2
> 
> 时间：2013-03-13T13:15:09.557
> 
> 标签：authentication, asp.net-mvc-4, entity-framework-5

使用来自 CodeProject 的 Entity Framework 5、MVC 4 和 CheckBoxList 1.4.4.3-beta2，我只是想清除多对多关系中的 UserProfile 对象角色关系。

UserProfileController（减少 - 不保存标量属性和选定的角色）：

```
 [Authorize]
    public ActionResult Edit(int identifier)
    {
        var unitOfWork = new UnitOfWork();
        using(var userProfileRepository = new UserProfileRepository(unitOfWork))
        {
            UserProfile user = userProfileRepository.AllIncluding(u => u.Roles).Single(u => u.UserId == identifier);
            UserProfileViewModel viewModel;
            using (var roleRepository = new RoleRepository(unitOfWork))
            {
                viewModel = new UserProfileViewModel()
                                {
                                    AllRoles = roleRepository.All.ToList(),
                                    UserProfile = user
                                };
            }
            return View(viewModel);
        }
    }

    [HttpPost]
    [Authorize]
    public ActionResult Edit(UserProfileViewModel viewModel, string[] roleIds)
    {
        var unitOfWork = new UnitOfWork();
        using (var userProfileRepository = new UserProfileRepository(unitOfWork))
        {
            if (ModelState.IsValid)
            {
                var user = userProfileRepository.AllIncluding(u => u.Roles).Single(u => u.UserId == viewModel.UserProfile.UserId);
                user.Roles.Clear();
                userProfileRepository.InsertOrUpdate(user);
                unitOfWork.Save();
                return RedirectToAction("Index");
            }
            return View(viewModel);
        }
    } 
```

UserProfileRepository（和 RoleRepository）是标准的脚手架存储库：

```
 public void InsertOrUpdate(UserProfile userprofile)
    {
        if (userprofile.UserId == default(int)) {
            // New entity
            context.UserProfiles.Add(userprofile);
        } else {
            //// Existing entity
            context.Entry(userprofile).State = EntityState.Modified;
        }
    } 
```

用户资料：

```
public ICollection<Role> Roles { get; set; } 
```

角色：

```
public ICollection<UserProfile> UserProfiles { get; set; } 
```

我没有例外，但也没有对数据库执行更新。这可能是由使用相同数据库表的身份验证提供程序（SimpleMembershipProvider）引起的吗？我应该实施自定义会员提供程序吗？我的应用程序中还有其他几个多对多关系都以与此相同的方式构成，它们都像魅力一样工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:22:27.140

结果是我在覆盖 UserProfile 上的 Equals 方法时犯了一个错误，使所有比较都返回 false。

# ssas - MDX 计算成员并设置减法

> ID：15386395
> 
> 赞同：2
> 
> 时间：2013-03-13T13:15:10.427
> 
> 标签：ssas, mdx

这是 Adventure Works 的一个简单示例：

```
with 

member test1 as sum([Measures].[Internet Sales Amount]) 
               - [Customer].[Customer].&[28187]

member test2 as sum([Measures].[Internet Sales Amount]) 
                - sum([Customer].[Customer].&[28187],[Measures].[Internet Sales Amount])

member test3 as sum
                (
                    {[Customer].[Customer].children - [Customer].[Customer].&[28187]},
                    [Measures].[Internet Sales Amount]
                ) 

select {test1, test2, test3} on 0
from [Adventure Works] 
```

结果几乎相等，除了“test1”具有非货币类型格式

问题：

1.  “test1” calc-member：如何从“sum”的数值结果中减去“Customer”成员表达式？这看起来不合逻辑，令人心碎。我期望算术减法，集合减法，但不是算术减法的成员......

2.  所有 (test1,test2,test3) 计算的成员在逻辑上和“性能上”是否相等？如果不是，“test1”成员的正确显式形式是什么？看起来“test2”在大多数情况下会表现得更好，因为“test3”集合减法可能会导致非常大的集合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T13:17:01.140

“test1”与“test2”相同。

正确的显式形式是

```
member test as ([Measures].[Internet Sales Amount])
                - ([Measures].[Internet Sales Amount], [Customer].[Customer].&[28187]) 
```

# javascript - 将内容 div 放在 jQuery UI ajax 选项卡上方

> ID：15386398
> 
> 赞同：0
> 
> 时间：2013-03-13T13:15:19.473
> 
> 标签：javascript, jquery, html, jquery-ui

我们试图将内容`div`放在 jQuery UI ajax 选项卡之上。用于 ajax 的 jQuery UI 会自动创建`div`ID 为 等的 s `ui-tabs-1`。`ui-tabs-2`并将其`div`放在 UI 选项卡列表下方。我想将通过 ajax 获得的内容放在选项卡上方。

脚本 -

```
<script>
$(function() {
    $( "#tabs" ).tabs({
        beforeLoad: function( event, ui ) {
            ui.jqXHR.error(function() {
                ui.panel.html(
                    "Couldn't load this tab. We'll try to fix this as soon as possible. " +
                    "If this wouldn't be a demo." );
            });
        }
    });
});
</script> 
```

HTML -

```
<div id="content"></div> <!-- i would like the content to be displayed here-->

<div id="tabs">
<ul>    
    <li><a href="content1.html">Tab 1</a></li>
    <li><a href="content2.html">Tab 2</a></li>
    <li><a href="content3-slow.php">Tab 3 (slow)</a></li>
    <li><a href="content4-broken.php">Tab 4 (broken)</a></li>
</ul>

</div> 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:29:44.340

像这样创建 div

```
<div id="content">
<div id="uitabs-1">
</div> <!-- i would like the content to be displayed here-->

<div id="tabs">
<ul>    
    <li><a href="content1.html">Tab 1</a></li>
    <li><a href="content2.html">Tab 2</a></li>
    <li><a href="content3-slow.php">Tab 3 (slow)</a></li>
    <li><a href="content4-broken.php">Tab 4 (broken)</a></li>
</ul>

</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:33:18.803

使用`create`jquery UI 选项卡的事件：

```
$("#tabs").tabs({
    create: function (event, ui) {
        $('.ui-tabs-panel').prependTo('.ui-tabs-nav');
    }
}); 
```

演示：http: [//jsfiddle.net/Xh8nc/1/](http://jsfiddle.net/Xh8nc/1/)

# gwt - DialogBox的GWT IE9标记文本冻结窗口

> ID：15386399
> 
> 赞同：0
> 
> 时间：2013-03-13T13:15:25.957
> 
> 标签：gwt, internet-explorer-9, dialog

我有以下奇怪的行为：如果我用 Internet Explorer 9 打开一个对话框，标记一个文本并单击出现的内置图标，整个窗口都会冻结。您可以使用 GWT 的展示来尝试这个：[DialogBox Showcase只需在](http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwDialogBox)*“这是标准对话框组件的示例”这一*行中标记一些内容。并单击出现的图标。

这是一个已知的错误？我搜索了它，但我找不到任何东西。您有解决方法或解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:29:03.323

这是开放问题 gwt 问题列表。这是链接[问题 6882](https://code.google.com/p/google-web-toolkit/issues/detail?id=6882&can=1&q=ie9&sort=-id&colspec=ID%20Type%20Status%20Owner%20Milestone%20Summary%20Stars)。目前还没有计划对此进行修复。如果我是你，我会密切关注这个问题列表中的任何补丁

# spring - 错误消息：无法要求参数化非泛型类型的成员

> ID：15386400
> 
> 赞同：1
> 
> 时间：2013-03-13T13:15:27.400
> 
> 标签：spring, aspectj, vaadin, compile-time-weaving

我的设置是 vaadin、mybatis 和 spring。现在我将 spring 与 vaadin 与 vaadin 教程集成在一起，一切都很完美。但是，当我在带有 Property.ValueChangeEvent 方法的自定义组件上使用 @Configurable(preConstruction = true) 时，我从 aspectj 得到了编译时的下一个错误。

```
[ERROR] java.lang.IllegalStateException: Can't ask to parameterize a member of non-generic type: com.vaadin.data.Property$ValueChangeListener  kind(simple) 
```

对此有已知的解决方案吗？

# java - 在 Java 中用点和冒号处理不同的数字

> ID：15386403
> 
> 赞同：1
> 
> 时间：2013-03-13T13:15:29.793
> 
> 标签：java, numberformatexception

我有这两个值： 值 1：“33445.0” 值 2：“33.445,00”

在Java中查看这两者是否相等的最简单方法是什么？

我正在为不同类型的 int、double、float 等而苦苦挣扎。现在值 1 存储为双精度值，值 2 是浮点数。

我怎样才能使这些值相同？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:21:28.980

你应该解析这些数字。这两个数字之间的唯一区别是它们在不同的语言环境中格式化

```
NumberFormat format_english = NumberFormat.getInstance(Locale.ENGLISH);
NumberFormat format_france = NumberFormat.getInstance(Locale.GERMAN);
Number number1 = format.parse("33445.0");
Number number2 = format.parse("33.445,00");
double d1 = number1.doubleValue();  // or whatever value you're looking for
double d2 = number2.doubleValue();
// now compare them as any two "normal" numbers 
```

现在，你怎么知道哪个号码去哪个区域设置？这将是棘手的部分。我希望您不要在没有任何有关其来源的“额外”信息的情况下获得这些数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:37:47.720

如果您不知道每个数字的语言环境，您至少应该知道分隔符（十进制、分组）字符。然后，您可以创建一个自定义的[DecimalFormat](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)来解析每个。

```
 DecimalFormatSymbols symbols1 = new DecimalFormatSymbols();
   symbols1.setGroupingSeparator(',');
   symbols1.setDecimalSeparator('.');
   DecimalFormat df1 = new DecimalFormat("0.0", symbols1);
   df1.setParseBigDecimal(true);
   BigDecimal number1 = (BigDecimal) df1.parse("33445.0");

   DecimalFormatSymbols symbols2 = new DecimalFormatSymbols();
   symbols2.setGroupingSeparator('.');
   symbols2.setDecimalSeparator(',');
   DecimalFormat df2 = new DecimalFormat("0,0", symbols2);
   df2.setParseBigDecimal(true);
   BigDecimal number2 = (BigDecimal) df2.parse("33.445,00");

   int result = number1.compareTo(number2); 
```

# ruby-on-rails - 以 CSV::Table 表单 URL 形式打开 CSV 文件

> ID：15386404
> 
> 赞同：1
> 
> 时间：2013-03-13T13:15:31.363
> 
> 标签：ruby-on-rails, ruby

我已经编写`CSV::Table`了为 Rails 应用程序操作对象的方法。`CSV.read(file_path)`它使用方法读取文件。但是，应用程序逻辑发生了变化，它不再从本地文件读取，而是从 URL 读取。

`open-uri`我可以使用gem方法加载 CSV 文件`open`；但是它创建了一个`StringIO`对象，可以将其解析为行数组，但我无法将其转换为`CSV::Table`对象。

如何从 URL 读取 CSV 文件并将其转换为`CSV::Table`对象 - 以便保留现有方法？

我正在考虑覆盖`CSV.open`方法使用的现有方法`CSV.read`，但我不确定这样做有多安全。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:17:04.637

以下函数使用获取文件内容`open-uri` 并将其转换为`CSV::Table`对象：

```
require 'csv'
require 'open-uri'

def read_url
  # Get StringIO from URL using open-uri
  stringio = open(file_url)

  # Create a new CSV object from StringIO
  csvobj = CSV.new(stringio)

  # Create an array of rows from CSV object
  array_of_rows = csvobj.read

  # Separate header from values
  header = array_of_rows[0]
  aux = array_of_rows.length - 1
  values = array_of_rows[1..aux]

  # Create array of CSV::Row objects
  values_row = values.map { |row| CSV::Row.new(header, row) }

  # Create a CSV::Table object from array of CSV::Row
  CSV::Table.new(values_row)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:21:04.807

`CSV.new(stringio)`应该做的伎俩（有关详细信息，请参阅[文档](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html#method-c-new)）

编辑：未经测试。如果这不起作用，请尝试[CSV.generate](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html#method-c-generate)

# c# - System.dll 中的 StackOverflowException

> ID：15386407
> 
> 赞同：1
> 
> 时间：2013-03-13T13:15:34.103
> 
> 标签：c#, system, stack-overflow

所以在这里我的 C# 代码有问题。它正在重复一个线程来接受新连接但是几分钟后它在 System.dll 中得到 StackOverflowException

这是我的代码

```
void DoReceive(SocketAsyncEventArgs args)
{
    var client = (TCPClient)args.UserToken;
    System.Threading.Thread.Sleep(10);
    if (!client.socket.ReceiveAsync(args))
    {
        //System.Threading.Thread.Sleep(10);
        DoReceive(args);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:23:52.447

无休止的递归导致[`StackOverflowException`](http://msdn.microsoft.com/en-us/library/system.stackoverflowexception.aspx). 考虑更改您的代码：

```
void DoReceive(SocketAsyncEventArgs args)
{
    var client = (TCPClient)args.UserToken;        
    while (!client.socket.ReceiveAsync(args))
    {
        System.Threading.Thread.Sleep(10);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:20:09.723

`DoReceive`如果 !client.socket.ReceiveAsync(args) 重复调用，那么如果此结果未更改将引发 StackOverflowException

`Olexander`相同的想法

```
void DoReceive(SocketAsyncEventArgs args)
 {   
    var client = (TCPClient)args.UserToken;        
    while (!client.socket.ReceiveAsync(args))
     {
       System.Threading.Thread.Sleep(100);
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:22:19.690

每次 ReceiveAsync 返回 false 时都会递归调用 DoReceive。看起来 ReceiveAsync 经常返回 false ，导致您的程序内存不足。

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.stackoverflowexception.aspx)

[StackOverflowException]“当执行堆栈溢出时抛出，因为它包含太多的嵌套方法调用”

* * *

您可以设置一个静态变量来保持重试次数并在达到限制后退出。

# python - 来自连通图的 Numpy 集群

> ID：15386414
> 
> 赞同：0
> 
> 时间：2013-03-13T13:15:48.610
> 
> 标签：python, graph, numpy

聚类连通图的最佳方法是什么？

例1：

```
[[ 1 1 1 1 0 0]
 [ 1 1 1 1 0 0]
 [ 1 1 1 1 0 0]
 [ 1 1 1 1 0 0]
 [ 0 0 0 0 1 1]
 [ 0 0 0 0 1 1]] 
```

结果 ：

```
==> [[0,1,2,3],[4,5]] 
```

ex2

```
[[ 0 1 0 1 0 0]
 [ 1 1 0 1 0 0]
 [ 0 1 0 1 0 0]
 [ 1 0 0 0 0 0]
 [ 0 0 1 0 1 1]
 [ 0 0 0 0 1 1]] 
```

结果 ：

```
==> [[0,1,3],[2,4,5]] 
```

ex3

```
[[ 0 1 0 0 0 0]
 [ 1 1 0 0 0 0]
 [ 0 0 1 1 0 0]
 [ 0 0 0 1 0 0]
 [ 0 0 0 0 1 1]
 [ 0 0 0 0 1 1]] 
```

结果 ：

```
==> [[0,1],[2,3],[4,5]] 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:08:06.053

例如，在某些示例中`ex2`，您给出了一个有向图或有向图，例如`A != A.T`。[*在这种情况下，通过考虑强连通分量*](http://en.wikipedia.org/wiki/Strongly_connected_component)可以找到更合理的定义。在这种情况下，分裂是`[0,1,3],[4,5],[2]`。[`networkx`](http://networkx.github.com/)可以帮助您找到这些：

```
import numpy as np
import networkx as nx

A = np.array([[0,1,0,1,0,0],
              [1,1,0,1,0,0],
              [0,1,0,1,0,0],
              [1,0,0,0,0,0],
              [0,0,1,0,1,1],
              [0,0,0,0,1,1]])

G = nx.from_numpy_matrix(A, create_using=nx.DiGraph()) 
for subg in nx.strongly_connected_component_subgraphs(G):
    print subg.nodes() 
```

# python - 熊猫记忆

> ID：15386415
> 
> 赞同：9
> 
> 时间：2013-03-13T13:15:52.100
> 
> 标签：python, package, pandas, memoization

我有很长的计算，我重复了很多次。因此，我想与[Pandas一起使用 memoization（例如](http://pandas.pydata.org)[jug](http://packages.python.org/Jug)和[joblib](http://packages.python.org/joblib/memory.html)等包）。问题是这个包是否能很好地记住 Pandas DataFrames 作为方法参数。

有人试过吗？有没有其他推荐的包/方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T16:00:02.723

这里是水罐的作者：水罐工作正常。我刚刚尝试了以下方法，它可以工作：

```
from jug import TaskGenerator
import pandas as pd
import numpy as np

@TaskGenerator
def gendata():
    return pd.DataFrame(np.arange(343440).reshape((10,-1)))

@TaskGenerator
def compute(x):
    return x.mean()

y = compute(gendata()) 
```

它不如它在`pickle`内部使用的效率高`DataFrame`（尽管它会即时压缩它，所以它在内存使用方面并不可怕；只是比它可能的慢）。

我愿意进行更改，将它们保存为特例，就像 jug 目前对 numpy 数组所做的那样：[https ://github.com/luispedro/jug/blob/master/jug/backends/file_store.py#L102](https://github.com/luispedro/jug/blob/master/jug/backends/file_store.py#L102)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T13:46:12.940

我使用这个基本的记忆装饰器，`memoized`. [http://wiki.python.org/moin/PythonDecoratorLibrary#Memoize](http://wiki.python.org/moin/PythonDecoratorLibrary#Memoize)

DataFrames 是可散列的，所以它应该可以正常工作。这是一个例子。

```
In [2]: func = lambda df: df.apply(np.fft.fft)

In [3]: memoized_func = memoized(func)

In [4]: df = DataFrame(np.random.randn(1000, 1000))

In [5]: %timeit func(df)
10 loops, best of 3: 124 ms per loop

In [9]: %timeit memoized_func(df)
1000000 loops, best of 3: 1.46 us per loop 
```

在我看来很好。

# java - Java ServerSocket 不接受来自通过 LAN 电缆连接的远程客户端的请求

> ID：15386418
> 
> 赞同：2
> 
> 时间：2013-03-13T13:15:54.250
> 
> 标签：java, sockets

我已经使用 java.net 套接字创建了一个服务器，我尝试通过 localhost 客户端访问它，它正在接受请求并响应客户端，但是当我尝试通过 LAN 电缆连接从另一台计算机远程访问它时，它不接受任何连接，即使它正在侦听本地端口（9999），然后查看端口是否不起作用我将 Apache Web 服务器配置为侦听端口（9999）并且它确实有效，所以我将它设置为侦听不同的端口但没有运气，尝试在防火墙上打开各种端口仍然不起作用。

有人可以向我解释为什么服务器不接受来自远程客户端的请求或建立连接吗？

**服务器套接字：**

```
try {
    Server = new ServerSocket(L_port);  
}
catch(IOException e) {
}

while(!runServer) {
    try {
        incoming = Server.accept();
        InputStream client;

        //Create the 2 threads for the incoming and outgoing traffic of proxy server
        outgoing = new Socket(R_host, R_port); 

        proxyThread thread1 = new proxyThread(incoming, outgoing);
        thread1.start();

        proxyThread thread2 = new proxyThread(outgoing, incoming);
        thread2.start();
    } 
    catch (UnknownHostException e) {

    } 
    catch(IOException e){

    }
} 
```

**嵌套-an：**

![在此处输入图像描述](../Images/b70512ace789c25373ff140e1b5c4623.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:17:48.440

显然，您已将套接字绑定到 127.0.0.1，它只允许来自本地主机的连接，而不是 0.0.0.0，它允许来自任何地方的连接。

# c++ - GCC 4.7 / Clang 3.2 中的宏替换失败

> ID：15386425
> 
> 赞同：1
> 
> 时间：2013-03-13T13:16:07.313
> 
> 标签：c++, boost, macros, clang, c-preprocessor

我已经在 Windows 7 + VisualStudio 2012 环境中成功使用了一些“流行”的宏。上周我想将项目移植到 Linux（无平台相关代码，代码库小）。构建 C++ 代码很容易，但我不能为宏做同样的事情。

我整理了这个简单的测试：

```
/// concatenates tokens, even when the tokens are macros themselves
#define PP_JOIN_HELPER_HELPER(_0, _1)    _0##_1
#define PP_JOIN_HELPER(_0, _1)       PP_JOIN_HELPER_HELPER(_0, _1)
#define PP_JOIN_IMPL(_0, _1)         PP_JOIN_HELPER(_0, _1)

#define PP_JOIN_2(_0, _1)                                  PP_JOIN_IMPL(_0, _1)
#define PP_JOIN_3(_0, _1, _2)                                PP_JOIN_2(PP_JOIN_2(_0, _1), _2)
#define PP_JOIN_4(_0, _1, _2, _3)                              PP_JOIN_2(PP_JOIN_3(_0, _1, _2), _3)
#define PP_JOIN_5(_0, _1, _2, _3, _4)                            PP_JOIN_2(PP_JOIN_4(_0, _1, _2, _3), _4)
#define PP_JOIN_6(_0, _1, _2, _3, _4, _5)                          PP_JOIN_2(PP_JOIN_5(_0, _1, _2, _3, _4), _5)
#define PP_JOIN_7(_0, _1, _2, _3, _4, _5, _6)                        PP_JOIN_2(PP_JOIN_6(_0, _1, _2, _3, _4, _5), _6)
#define PP_JOIN_8(_0, _1, _2, _3, _4, _5, _6, _7)                      PP_JOIN_2(PP_JOIN_7(_0, _1, _2, _3, _4, _5, _6), _7)
#define PP_JOIN_9(_0, _1, _2, _3, _4, _5, _6, _7, _8)                    PP_JOIN_2(PP_JOIN_8(_0, _1, _2, _3, _4, _5, _6, _7), _8)
#define PP_JOIN_10(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9)                 PP_JOIN_2(PP_JOIN_9(_0, _1, _2, _3, _4, _5, _6, _7, _8), _9)
#define PP_JOIN_11(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10)                PP_JOIN_2(PP_JOIN_10(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9), _10)
#define PP_JOIN_12(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11)             PP_JOIN_2(PP_JOIN_11(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10), _11)
#define PP_JOIN_13(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12)          PP_JOIN_2(PP_JOIN_12(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11), _12)
#define PP_JOIN_14(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13)       PP_JOIN_2(PP_JOIN_13(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12), _13)
#define PP_JOIN_15(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14)      PP_JOIN_2(PP_JOIN_14(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13), _14)
#define PP_JOIN_16(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15)   PP_JOIN_2(PP_JOIN_15(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14), _15)

/// chooses a value based on a condition
#define PP_IF_0(t, f)      f
#define PP_IF_1(t, f)      t
#define PP_IF(cond, t, f)    PP_JOIN_2(PP_IF_, PP_TO_BOOL(cond))(t, f)

/// converts a condition into a boolean 0 (=false) or 1 (=true)
#define PP_TO_BOOL_0 0
#define PP_TO_BOOL_1 1
#define PP_TO_BOOL_2 1
#define PP_TO_BOOL_3 1
#define PP_TO_BOOL_4 1
#define PP_TO_BOOL_5 1
#define PP_TO_BOOL_6 1
#define PP_TO_BOOL_7 1
#define PP_TO_BOOL_8 1
#define PP_TO_BOOL_9 1
#define PP_TO_BOOL_10 1
#define PP_TO_BOOL_11 1
#define PP_TO_BOOL_12 1
#define PP_TO_BOOL_13 1
#define PP_TO_BOOL_14 1
#define PP_TO_BOOL_15 1
#define PP_TO_BOOL_16 1

#define PP_TO_BOOL(x)    PP_JOIN_2(PP_TO_BOOL_, x)

/// Returns 1 if the arguments to the variadic macro are separated by a comma, 0 otherwise.
#define PP_HAS_COMMA(...)              PP_HAS_COMMA_EVAL(PP_HAS_COMMA_ARGS(__VA_ARGS__, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0))
#define PP_HAS_COMMA_EVAL(...)           __VA_ARGS__
#define PP_HAS_COMMA_ARGS(_1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, ...) _16

/// Returns 1 if the argument list to the variadic macro is empty, 0 otherwise.
#define PP_IS_EMPTY(...)                           \
  PP_HAS_COMMA                               \
  (                                     \
    PP_JOIN_5                              \
    (                                   \
      PP_IS_EMPTY_CASE_,                       \
      PP_HAS_COMMA(__VA_ARGS__),                   \
      PP_HAS_COMMA(PP_IS_EMPTY_BRACKET_TEST __VA_ARGS__),     \
      PP_HAS_COMMA(__VA_ARGS__ (~)),                 \
      PP_HAS_COMMA(PP_IS_EMPTY_BRACKET_TEST __VA_ARGS__ (~))    \
    )                                   \
  )

#define PP_IS_EMPTY_CASE_0001      ,
#define PP_IS_EMPTY_BRACKET_TEST(...)  ,

// PP_VA_NUM_ARGS() is a very nifty macro to retrieve the number of arguments handed to a variable-argument macro.
// unfortunately, VS 2010 still has this preprocessor bug which treats a __VA_ARGS__ argument as being one single parameter:
// https://connect.microsoft.com/VisualStudio/feedback/details/521844/variadic-macro-treating-va-args-as-a-single-parameter-for-other-macros#details
#if _MSC_VER >= 1400
# define PP_VA_NUM_ARGS_HELPER(_1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, N, ...)  N
# define PP_VA_NUM_ARGS_REVERSE_SEQUENCE     16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1
# define PP_VA_NUM_ARGS_LEFT (
# define PP_VA_NUM_ARGS_RIGHT )
# define PP_VA_NUM_ARGS(...)           PP_VA_NUM_ARGS_HELPER PP_VA_NUM_ARGS_LEFT __VA_ARGS__, PP_VA_NUM_ARGS_REVERSE_SEQUENCE PP_VA_NUM_ARGS_RIGHT
#else
# define PP_VA_NUM_ARGS(args...)           PP_VA_NUM_ARGS_HELPER(args, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1)
# define PP_VA_NUM_ARGS_HELPER(_1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, N, ...)  N
#endif

// PP_NUM_ARGS correctly handles the case of 0 arguments
#define PP_NUM_ARGS(...)               PP_IF(PP_IS_EMPTY(__VA_ARGS__), 0, PP_VA_NUM_ARGS(__VA_ARGS__))

// PP_PASS_ARGS passes __VA_ARGS__ as multiple parameters to another macro, working around the following bug:
// https://connect.microsoft.com/VisualStudio/feedback/details/521844/variadic-macro-treating-va-args-as-a-single-parameter-for-other-macros#details
#if _MSC_VER >= 1400
# define PP_PASS_ARGS_LEFT (
# define PP_PASS_ARGS_RIGHT )
# define PP_PASS_ARGS(...)             PP_PASS_ARGS_LEFT __VA_ARGS__ PP_PASS_ARGS_RIGHT
#else
# define PP_PASS_ARGS(...)             (__VA_ARGS__)
#endif

/// Expand any number of arguments into a list of operations called with those arguments
#define PP_EXPAND_ARGS_0(op)
#define PP_EXPAND_ARGS_1(op, a1)                                     op(a1, 0)
#define PP_EXPAND_ARGS_2(op, a1, a2)                                   op(a1, 0) op(a2, 1)
#define PP_EXPAND_ARGS_3(op, a1, a2, a3)                                 op(a1, 0) op(a2, 1) op(a3, 2)
#define PP_EXPAND_ARGS_4(op, a1, a2, a3, a4)                               op(a1, 0) op(a2, 1) op(a3, 2) op(a4, 3)
#define PP_EXPAND_ARGS_5(op, a1, a2, a3, a4, a5)                             op(a1, 0) op(a2, 1) op(a3, 2) op(a4, 3) op(a5, 4)
#define PP_EXPAND_ARGS_6(op, a1, a2, a3, a4, a5, a6)                           op(a1, 0) op(a2, 1) op(a3, 2) op(a4, 3) op(a5, 4) op(a6, 5)
#define PP_EXPAND_ARGS_7(op, a1, a2, a3, a4, a5, a6, a7)                         op(a1, 0) op(a2, 1) op(a3, 2) op(a4, 3) op(a5, 4) op(a6, 5) op(a7, 6)
#define PP_EXPAND_ARGS_8(op, a1, a2, a3, a4, a5, a6, a7, a8)                       op(a1, 0) op(a2, 1) op(a3, 2) op(a4, 3) op(a5, 4) op(a6, 5) op(a7, 6) op(a8, 7)
#define PP_EXPAND_ARGS_9(op, a1, a2, a3, a4, a5, a6, a7, a8, a9)                     op(a1, 0) op(a2, 1) op(a3, 2) op(a4, 3) op(a5, 4) op(a6, 5) op(a7, 6) op(a8, 7) op(a9, 8)
#define PP_EXPAND_ARGS_10(op, a1, a2, a3, a4, a5, a6, a7, a8, a9, a10)                 op(a1, 0) op(a2, 1) op(a3, 2) op(a4, 3) op(a5, 4) op(a6, 5) op(a7, 6) op(a8, 7) op(a9, 8) op(a10, 9)
#define PP_EXPAND_ARGS_11(op, a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11)                op(a1, 0) op(a2, 1) op(a3, 2) op(a4, 3) op(a5, 4) op(a6, 5) op(a7, 6) op(a8, 7) op(a9, 8) op(a10, 9) op(a11, 10)
#define PP_EXPAND_ARGS_12(op, a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12)             op(a1, 0) op(a2, 1) op(a3, 2) op(a4, 3) op(a5, 4) op(a6, 5) op(a7, 6) op(a8, 7) op(a9, 8) op(a10, 9) op(a11, 10) op(a12, 11)
#define PP_EXPAND_ARGS_13(op, a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13)          op(a1, 0) op(a2, 1) op(a3, 2) op(a4, 3) op(a5, 4) op(a6, 5) op(a7, 6) op(a8, 7) op(a9, 8) op(a10, 9) op(a11, 10) op(a12, 11) op(a13, 12)
#define PP_EXPAND_ARGS_14(op, a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14)       op(a1, 0) op(a2, 1) op(a3, 2) op(a4, 3) op(a5, 4) op(a6, 5) op(a7, 6) op(a8, 7) op(a9, 8) op(a10, 9) op(a11, 10) op(a12, 11) op(a13, 12) op(a14, 13)
#define PP_EXPAND_ARGS_15(op, a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15)      op(a1, 0) op(a2, 1) op(a3, 2) op(a4, 3) op(a5, 4) op(a6, 5) op(a7, 6) op(a8, 7) op(a9, 8) op(a10, 9) op(a11, 10) op(a12, 11) op(a13, 12) op(a14, 13) op(a15, 14)
#define PP_EXPAND_ARGS_16(op, a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16)   op(a1, 0) op(a2, 1) op(a3, 2) op(a4, 3) op(a5, 4) op(a6, 5) op(a7, 6) op(a8, 7) op(a9, 8) op(a10, 9) op(a11, 10) op(a12, 11) op(a13, 12) op(a14, 13) op(a15, 14) op(a16, 15)

#define PP_EXPAND_ARGS(op, ...)    PP_JOIN_2(PP_EXPAND_ARGS_, PP_NUM_ARGS(__VA_ARGS__)) PP_PASS_ARGS(op, __VA_ARGS__)

/// Turn any legal C++ expression into nothing
#define UNUSED_IMPL(symExpr, n) , (void)sizeof(symExpr)
#define UNUSED(...) (void)sizeof(true) PP_EXPAND_ARGS PP_PASS_ARGS(UNUSED_IMPL, __VA_ARGS__)
/// stringizes a string, even macros
#define PP_STRINGIZE_HELPER(token)   #token
#define PP_STRINGIZE(token)          PP_STRINGIZE_HELPER(token)

#define TEST_CONDITION(condition, a, ...) (condition) ? UNUSED(a) : UNUSED(__VA_ARGS__)

int main(int argc, char* argv[])
{
    int a = 3, b = 4, c = 5;
    //UNUSED(a);
    TEST_CONDITION(true, a, b, c);
} 
```

最后的宏替换在 VS 2012 中运行良好，但 GCC 和 Clang 失败了。

运行`clang -E macro.cpp`创建此输出：

```
int main(int argc, char* argv[])
{
    int a = 3, b = 4, c = 5;

    (true) ? (void)sizeof(true) PP_EXPAND_ARGS (UNUSED_IMPL, a) : (void)sizeof(true) PP_EXPAND_ARGS (UNUSED_IMPL, b, c);

} 
```

未能扩展 PP_EXPAND_ARGS。

运行`clang macro.cpp`给出了这个错误：

```
macro.cpp:141:5: error: expected ':'
    TEST_CONDITION(true, a, b, c);
    ^
macro.cpp:135:57: note: expanded from macro 'TEST_CONDITION'
#define TEST_CONDITION(condition, a, ...) (condition) ? UNUSED(a) : UNUSED(__VA_ARGS__)
                                                        ^
macro.cpp:128:44: note: expanded from macro 'UNUSED'
#define UNUSED(args...) (void)sizeof(true) PP_EXPAND_ARGS PP_PASS_ARGS(UNUSED_IMPL, args)
                                           ^
macro.cpp:141:5: note: to match this '?'
macro.cpp:135:55: note: expanded from macro 'TEST_CONDITION'
#define TEST_CONDITION(condition, a, ...) (condition) ? UNUSED(a) : UNUSED(__VA_ARGS__)
                                                      ^
macro.cpp:141:5: error: use of undeclared identifier 'UNUSED_IMPL'
    TEST_CONDITION(true, a, b, c);
    ^
macro.cpp:135:57: note: expanded from macro 'TEST_CONDITION'
#define TEST_CONDITION(condition, a, ...) (condition) ? UNUSED(a) : UNUSED(__VA_ARGS__)
                                                        ^
macro.cpp:128:72: note: expanded from macro 'UNUSED'
#define UNUSED(args...) (void)sizeof(true) PP_EXPAND_ARGS PP_PASS_ARGS(UNUSED_IMPL, args)
                                                                       ^
macro.cpp:101:45: note: expanded from macro 'PP_PASS_ARGS'
# define PP_PASS_ARGS(args...)             (args)
                                            ^
2 errors generated. 
```

基本上告诉我 UNUSED_IMPL 没有声明，什么时候声明。

我不明白为什么它不起作用以及为什么它告诉我未声明 UNUSED_IMPL 宏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:39:01.547

原来问题出在宏 PP_PASS_ARGS：

```
# define PP_PASS_ARGS(args...)             (args) 
```

当未使用 UNUSED 和 PP_EXPAND_ARGS 宏时，一切正常：

```
#define PP_EXPAND_ARGS(op, args...)    PP_JOIN_2(PP_EXPAND_ARGS_, PP_NUM_ARGS(args))(op, args)
#define UNUSED(args...) (void)sizeof(true) PP_EXPAND_ARGS(UNUSED_IMPL, args) 
```

我不知道为什么它适用于 VisualStudio 的预处理器而不适用于 GCC 和 Clang。而且我还没有尝试在 VisualStudio 下删除 PP_PASS_ARGS 宏，看看我是否可以完全摆脱它。

编辑：我尝试删除 VisualSutio 下的 PP_PASS_ARGS 宏，但没有成功。

# iphone - 嵌套的 UIAlertView 逻辑

> ID：15386427
> 
> 赞同：-1
> 
> 时间：2013-03-13T13:16:09.307
> 
> 标签：iphone, ios, objective-c, uialertview, nested

在我的应用程序中，我有按钮，允许用户购买当前商品。

我希望用户确认，他接受销售协议，然后他选择他的首选付款方式。

我的逻辑如下。

用户点击购买按钮后，会弹出如下 UIAlertView：

```
NSMutableString *msg = [[NSMutableString alloc] initWithFormat:@"By recognizing this agreement you agree, that in following 15 minutes you will pay for %@ which has price of %@, if you won't make the payment, your account may be blocked for this item.",mainTitle.text,buyoutPrice.text];
    UIAlertView *buyoutAlert = [[UIAlertView alloc] initWithTitle:@"Buyout" message:msg
                                                       delegate:self cancelButtonTitle:@"I don't agree" otherButtonTitles:@"I agree",nil];
    buyoutAlert.tag = 1;
    [buyoutAlert show]; 
```

在我的 - (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
我正在检查他是否接受......

```
 - (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
    if(alertView.tag == 1)
        {
            if(buttonIndex == 1)
            {
                UIAlertView *typeBuyout = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Anonymous payment", nil)
                                                       message:NSLocalizedString(@"Do you wish to make payment as anon?", nil)
                                                      delegate:nil
                                             cancelButtonTitle:NSLocalizedString(@"Cancel", nil)
                                             otherButtonTitles:@"Anon buyout",@"Regular buyout",nil];
                typeBuyout.tag = 2;

                [typeBuyout show];

            }
        }

if(alertView.tag == 2)
{

        if(buttonIndex == 1)
        {
            //anon
            NSLog(@"anon");
        }else if(buttonIndex == 2)
        {
            //normal 
            NSLog(@"Normal");
        }
    } 
```

我的问题是，在向用户显示第二个警报（typeBuyout）并且在用户做出他的选择之后 clickedButtonAtIndex 不会触发。

我试图在 viewDidLoad 和 clickedButtonAtIndex 中定义我的 typeBuyout 警报 [typebuyout show]; 但结果相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:23:21.457

在第二个警报中，您没有提供委托自我，而是将其设为零。一探究竟

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T13:21:04.733

设置第二个警报视图的委托以调用`clickedButtonAtIndex`方法

```
if(buttonIndex == 1)
 {
            UIAlertView *typeBuyout = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Anonymous payment", nil)
                                                   message:NSLocalizedString(@"Do you wish to make payment as anon?", nil)
                                                  delegate:self
                                         cancelButtonTitle:NSLocalizedString(@"Cancel", nil)
                                         otherButtonTitles:@"Anon buyout",@"Regular buyout",nil];
            typeBuyout.tag = 2;

            [typeBuyout show];

        } 
```

# redis - 使用 Celery + Redis 时的巨大延迟

> ID：15386431
> 
> 赞同：0
> 
> 时间：2013-03-13T13:16:24.960
> 
> 标签：redis, celery, django-celery

我正在测试 Django + Celery，hello world 示例。使用 RabbitMQ celery 可以正常工作，但是当我切换到 Redis 代理/结果时，我得到以下信息：

```
%timeit add.delay(1,2).get()
1 loops, best of 3: 503 ms per loop 
```

**设置.py**

```
CELERY_RESULT_BACKEND = "redis"
BROKER_URL = 'redis://localhost:6379' 
```

**任务.py**

```
@task()
def add(x, y):
    return x + y 
```

上面的测试有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:44:40.577

我发现解决方案是源代码： [http ://docs.celeryproject.org/en/latest/_modules/celery/result.html#AsyncResult.get](http://docs.celeryproject.org/en/latest/_modules/celery/result.html#AsyncResult.get)

> **间隔**- 在重试检索结果之前等待的时间（以秒为单位）。请注意，这在使用 amqp 结果存储后端时没有任何影响，因为它不使用轮询。

默认为 0.5 秒。您可以手动更改它，但不推荐运行任务的方式：

```
%timeit add.delay(1,2).get(interval=0.001)
100 loops, best of 3: 3.92 ms per loop 
```

# c# - 如何确保只有一个winform应用程序C#的实例

> ID：15386435
> 
> 赞同：1
> 
> 时间：2013-03-13T13:16:33.810
> 
> 标签：c#, .net, winforms, c#-4.0

我不知道如何创建一个任何时候只有一个实例的 winform 应用程序。有人可以帮我怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:18:52.363

使用 Mutex 类 [http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx) 允许在一台机器上只创建一个同名的 Mutex 实例。

# buffer - 为什么在使用 match_max 的 -d 选项时，我只能得到 expect_out(buffer) 中的一部分输出？

> ID：15386438
> 
> 赞同：1
> 
> 时间：2013-03-13T13:16:44.300
> 
> 标签：buffer, expect

我在远程执行命令时遇到了很多麻烦，经过一段时间我`-d`从 match_max 中删除了选项，我只得到了 expect_out(buffer) 中大约 70% 的输出，我得到了完整的输出

```
match_max 100000. 
```

我能得到这个缓冲区大小相关问题和解决方案的一些信息吗？

我们如何确定这个缓冲区大小，是否以千字节为单位

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T02:40:36.143

*   `match_max -d`会将缓冲区大小重置为默认的 2000，这对您来说可能还不够。请注意，与 100000`match_max -d 100000`相同，`match_max -d`此处将被忽略。
*   `match_max`没有任何选项将返回当前缓冲区大小。

关于缓冲区的重要一点是，当缓冲区已满并且有新数据进入时，其中的旧数据将被丢弃。

# c# - jqgrid + 用新数据刷新网格

> ID：15386440
> 
> 赞同：0
> 
> 时间：2013-03-13T13:16:45.457
> 
> 标签：c#, jquery, ajax, jqgrid, webmethod

我有一个带有 jqgrid 的 web 应用程序，它使用 jquery ajax 填充数据，它调用 webmethod。jqgrid 每 5 秒刷新一次以轮询数据。我想做的是每 5 秒获取一次添加到表中的新数据。

所以我想我会修改我的网络方法，从最后读取的 ID 开始，分批获取 20 个数据。我认为在 webmethod 中我会做一个计数器，firstRecordID，lastRecordIDRead 变量，如果 counter = 0，我将获取第一个记录 ID 并将其存储在 firstRecordID 中，如果计数器大于 0，则 firstRecordID 将是 lastRecordIDRead（firstRecordID + 20)。因此，如果数据库中的第一个 ID 是 906，则在第一次轮询时它将获取从 906 到 925 的记录，然后在第二次轮询中它将从 926 + 20 条其他记录中获取并继续这样。

当在控制台应用程序中使用此方法作为示例时，它工作得很好，但是我不明白在使用 web 服务时我应该如何实现它，因为 web 服务是无状态的，我不知道我应该如何实现计数器变量等。任何想法好吗？或者也许是更好的解决方案？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:30:45.240

您可以使用 Session 变量来跟踪事物，但我的建议是让网格自己管理这个计数器。

让网格发布一个包含它所在的 id 值的额外参数是相当简单的。您可以通过

```
postData: { KeyName: KeyValue}, 
```

在您调用（我假设通过计时器事件）刷新网格的情况下，只需添加在要求网格刷新时更新此参数的位置。

前任：

```
$('#gridName').jqGrid('setGridParam', { postData: { KeyName: KeyValue} }).trigger('reloadGrid'); 
```

在控制器端（我将展示 C# 代码，但基本原理相同），您将评估这个额外的值，以根据您的要求更改返回到 jqGrid 的数据。

```
public ActionResult GridData(string sidx, string sord, int page, int rows, bool _search, string filters, string KeyName)
        {
          //logic to change dataset being returned based on KeyName value.
          ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:32:32.277

如果我理解你的问题是正确的。我想您可以做的就是在数据中获取 ID 并将其保存在 jqGrid 的隐藏列中。在您的页面中再添加一个隐藏控件，使其初始值保持为 0。在您的服务调用中，将隐藏控件中的值作为参数发送。

在服务器端检查值是否为 0 获取前 20 行并发送回。例如，您从 906 到 925 获取行并发送回。ajax调用成功。在隐藏控件中保存 925。所以现在开始，当第二次调用发生时，它将不时发送隐藏控件的值，即 925，然后在服务器端，您可以获取从 926 到 945 的行。再次将 945 存储在隐藏控件中，因此第三次发送的值将是 945。这样，您可以在每个服务调用中保存最后一个 ID，并将该 ID 作为参数发送并获取下一行。

# mysql - 为每个 id 查找相同的记录

> ID：15386443
> 
> 赞同：1
> 
> 时间：2013-03-13T13:16:59.307
> 
> 标签：mysql

我有这个问题我必须找到具有相同 ProductID 的所有记录

例子

[http://www.sqlfiddle.com/#!2/021cd/5](http://www.sqlfiddle.com/#!2/021cd/5)

结果是错误的，
我需要获取所有产品的所有 phID

phID 1002 没有 ProductID 8,9 和 14 所以不能在那里

如果我输入 (8,9,12,14,25) 结果必须是 1001,1004 因为 1001 具有 (8,9,12,14,25) 和 1004 相同但是如果我输入 (12,25,49)结果必须是 1001,1002,1004 因为都有 (12,25,49)

有什么帮助吗？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:21:58.617

*您的查询获取列出了任何*产品的 phID，而不是*所有*产品。试试这些：

```
SELECT phID, count(*) c
FROM Tablename
WHERE ProductID in (8,9,12,14,25)
GROUP BY phID
HAVING c = 5;

SELECT phID, count(*) c
FROM Tablename
WHERE ProductID in (12,25,49)
GROUP BY phID
HAVING c = 3; 
```

# javascript - 如何使用 HTML5 FileAPI 设置文件的实际文件名？

> ID：15386446
> 
> 赞同：0
> 
> 时间：2013-03-13T13:17:06.573
> 
> 标签：javascript, html

我目前正在使用 HTML5 的 FileAPI 将一些 BLOB 数据写入磁盘以供离线使用。我已经告诉它写入文件“test.mp4”，但是当在我的计算机上找到该文件时，它的文件名类似于“00000003”。除了文件命名之外，一切正常。我什至可以使用`getFile("test.mp4", ...)`命令访问该文件，所以我知道它正在工作。有没有办法设置存储在磁盘上的文件的实际名称？

**编辑：**

这是我的代码的一部分：

```
function writeToFile(fs)
{
    fs.root.getFile("test.mp4", {create: true}, function(fileEntry) {
        fileEntry.createWriter(function(fileWriter) {

            fileWriter.onwriteend = function(e) {
                console.log('Write completed.');
            };

            fileWriter.onerror = function(e) {
                console.log('Write failed: ' + e.toString());
            };

            fileWriter.write(blobToWrite);

        }, errorHandler);

    }, errorHandler);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:22:10.253

是的，您可以`getFile()`通过将`create`选项设置为来设置文件名`true`：

`getFile('test.mp4', {create: true, exclusive: true}`

看看这个例子：[http ://www.html5rocks.com/en/tutorials/file/filesystem/#toc-file-creatingempty](http://www.html5rocks.com/en/tutorials/file/filesystem/#toc-file-creatingempty)

# ruby-on-rails-3 - 调试创建方法未保存到模型的原因

> ID：15386450
> 
> 赞同：0
> 
> 时间：2013-03-13T13:17:15.263
> 
> 标签：ruby-on-rails-3, debugging, activerecord, methods, rake-task

我有这种方法，在 rake 任务后应该将我的数据保存到模型中，我试图一次更新 2 列，这应该不是问题

```
 def update_fixtures #rake task method
   Fixture.destroy_all
   get_home_fixtures.each {|home| Fixture.create!(home_team: home )}
   get_away_fixtures.each {|away| Fixture.create!(away_team: away )}
  end 
```

在这种情况下，只有客队会保存，但是如果我这样做

```
 def update_fixtures #rake task method
     Fixture.destroy_all
     get_away_fixtures.each {|away| Fixture.create!(away_team: away )}
     get_home_fixtures.each {|home| Fixture.create!(home_team: home )}
  end 
```

然后只有主队会救。

我已经尝试过@model.errors.full_messages，但是得到了 nil 类的未定义方法，所以没有？

我正在尝试调试此问题，但不确定我可以使用什么来查找问题

有谁之前经历过这个吗？快把我逼疯了

编辑

我可以从控制台手动更新该字段，所以当我这样做时

```
Fixture.create(:away_team => "String") 
```

它更新得很好

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:35:40.660

当您使用`#create!`时，如果保存失败，它应该会抛出错误，这应该意味着您没有尝试保存任何内容（空数组）。

验证

```
get_away_fixtures
get_home_fixtures 
```

看起来像你期望的那样。安装`debugger`后添加`Fixture.destroy_all`。

# cuda - 如何更改矩阵维度 MatrixMul CUDA 示例

> ID：15386454
> 
> 赞同：0
> 
> 时间：2013-03-13T13:17:21.167
> 
> 标签：cuda, matrix-multiplication

嗨，我尝试通过在启动时传递参数来更改 matrixmul 中的矩阵尺寸。不幸的是，它只接受一些值，如 160*160、320*320、320*1280 640*640，但不接受较低的值，如 80*80 或其他值，如 56*56。你能告诉我为什么以及该怎么做吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:14:01.180

该示例仅演示了如何在 CUDA 中完成 mat 乘法。使用该代码来做真正的 mat mul 不是一个好的选择。相反，您可以使用 cuBlas 库提供的 BLAS 函数，它支持任意维度。

另一方面，如果您想了解有关 mat mul 代码如何工作的更多信息，您可以在 Q 中附加一些代码。

# header - jQuery Mobile 标题按钮在 iPhone Safari 上跳转到顶部

> ID：15386460
> 
> 赞同：0
> 
> 时间：2013-03-13T13:17:37.573
> 
> 标签：header, scroll, jquery-mobile

我正在使用 jQuery Mobile 构建网站，并且我有一个“固定”页眉和页脚，因此我们可以在页面滚动时显示/隐藏页眉和页脚。问题是，当我们尝试单击 iPhone 上的标题按钮时，页面滚动到顶部，因为该按钮非常靠近视口的顶部。

有什么办法可以禁用这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:11:50.043

这是一项 iOS 功能，如果您一直滚动到页面底部，它可以让您跳回网站顶部。不幸的是，您不能从您的网站中禁用 iOS 功能。

# maven - maven 码头 - org.mortbay.jetty 与 org.eclipse.jetty

> ID：15386461
> 
> 赞同：26
> 
> 时间：2013-03-13T13:17:39.290
> 
> 标签：maven, jetty

我正在尝试使用码头来使用 maven 托管一个简单的 helloworld servlet。我很困惑。

我按照这些[说明](http://www.eclipse.org/jetty/documentation/current/jetty-maven-helloworld.html)进行操作，但是当我发出时`mvn jetty:run`，出现以下错误：

```
[ERROR] No plugin found for prefix 'jetty' in the current project and in the plugin groups [org.apache.maven.plugins, org.codehaus.mojo] available from the repositories [local (/Users/abc/.m2/repository), central (http://repo.maven.apache.org/maven2)] 
```

更令人困惑的是，当我在网上搜索示例时，有些是指 . `org.mortbay.jetty`，而另一些是`org.eclipse.jetty`. 我以为 Eclipse 版本是最新的，不是吗？

是否有任何文档描述了托管在[maven repo](http://search.maven.org/#search%7Cga%7C1%7Cg:%22org.eclipse.jetty%22)上的每个依赖项的含义？以及如何使用它们？

将版本号修改为 后`9.0.0.v20130308`，我得到一个不同的错误：

```
Unable to load the mojo 'run' in the plugin 'org.eclipse.jetty:jetty-maven-plugin:9.0.0.v20130308' due to an API incompatibility: org.codehaus.plexus.component.repository.exception.ComponentLookupException: org/eclipse/jetty/maven/plugin/JettyRunMojo : Unsupported major.minor version 51.0 
```

这是我更新的pom：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
        <modelVersion>4.0.0</modelVersion>
        <groupId>com.neon.research</groupId>
        <artifactId>jetty</artifactId>
        <packaging>war</packaging>
        <version>1.0-SNAPSHOT</version>
        <name>jetty Maven Webapp</name>
        <url>http://maven.apache.org</url>
        <properties>
                <jetty.version></jetty.version>
        </properties>
        <dependencies>
                <dependency>
                        <groupId>org.eclipse.jetty.orbit</groupId>
                        <artifactId>javax.servlet</artifactId>
                        <version>3.0.0.v201112011016</version>
                        <scope>provided</scope>
                </dependency>
        </dependencies>

        <build>
                <plugins>
                        <plugin>
                                <groupId>org.eclipse.jetty</groupId>
                                <artifactId>jetty-maven-plugin</artifactId>
                                <version>9.0.0.v20130308</version>
                        </plugin>
                        <plugin>
                                <artifactId>maven-compiler-plugin</artifactId>
                                <configuration>
                                        <source>1.6</source>
                                        <target>jsr14</target>
                                </configuration>
                                <executions>
                                        <execution>
                                                <id>test-compile</id>
                                                <phase>process-test-sources</phase>
                                                <goals>
                                                        <goal>testCompile</goal>
                                                </goals>
                                                <configuration>
                                                        <source>1.6</source>
                                                        <target>1.6</target>
                                                </configuration>
                                        </execution>
                                </executions>
                        </plugin>
                </plugins>
        </build>
</project> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-13T13:47:13.253

码头移动了很多 - 见[历史](http://en.wikipedia.org/wiki/Jetty_%28Web_server%29#History)。截至 2009 年，Eclipse 是最新的主页。Maven 工件一直在重命名，因此您的搜索正在寻找旧版本的 Jetty 和 maven 插件的文档。

最新的 (v9) [jetty-maven-plugin 文档](http://www.eclipse.org/jetty/documentation/current/jetty-maven-plugin.html)将依赖项列为：

```
<plugin>
  <groupId>org.eclipse.jetty</groupId>
  <artifactId>jetty-maven-plugin</artifactId>
  <version>9.0.0.v20130308</version> <!-- latest at time of writing -->
</plugin> 
```

*jetty-continuation*或*jetty-jsp*等其他库只是 Jetty 项目的子模块。[Jetty 7 和 8 的旧 wiki](http://wiki.eclipse.org/Jetty/Reference/Dependencies)上存在一些文档，但我还看不到 v9 的任何更新。模块化设计是 Jetty 开发人员将他们的代码组织成定义明确的模块，这些模块都已单独提供给可能只想使用 Jetty 的一小部分的开发人员。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T13:46:30.407

eclipse 版本是较新的版本。按照他们网站上的说明进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-21T00:05:48.907

这是我的工作配置。使用最新的 Jetty 版本。

```
<plugin>
    <groupId>org.eclipse.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <version>9.4.0.v20161208</version>
    <configuration>
        <scanIntervalSeconds>0</scanIntervalSeconds>
        <contextXml>${basedir}/src/it/resources/jetty-context.xml</contextXml>
        <webApp>
            <contextPath>/yourContextPath</contextPath>
        </webApp>
        <contextHandlers>
        <contextHandler implementation="org.eclipse.jetty.webapp.WebAppContext">
            <war>your/path.war</war>
            <contextPath>/yourPath</contextPath>
        </contextHandler>
        </contextHandlers>
        <classesDirectory></classesDirectory>
        <webAppSourceDirectory></webAppSourceDirectory>
    </configuration>
</plugin> 
```

# android - Android 解码来自其他手机的 DTMF 代码

> ID：15386462
> 
> 赞同：1
> 
> 时间：2013-03-13T13:17:39.177
> 
> 标签：android, dtmf

我想实时处理其他手机产生的DTMF代码。如果一部手机使用[ToneGenerator](http://developer.android.com/reference/android/media/ToneGenerator.html)发送 #1234，我希望它在接收应用程序中解码为 #1234。我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:34:18.163

您可以使用 an`AudioRecord`从 录制音频`VOICE_DOWNLINK` `AudioSource`，然后对录制的音频执行快速傅里叶变换，将其拆分为不同频率的“bin”。从这些信息中，可以猜测是否正在播放给定的音调（例如，如果在特定频率上有很多能量，但在频谱中的其他地方能量很少）。

Google 代码中有一个[名为 dtmf-decoder 的项目](http://code.google.com/p/dtmf-decoder/source/checkout)试图做到这一点。我自己没有使用过它，所以我不知道它的效果如何。

# jquery - 如何在handsontable0.8.13中加载AllowHTML

> ID：15386463
> 
> 赞同：0
> 
> 时间：2013-03-13T13:17:39.570
> 
> 标签：jquery, handsontable

如何在 0.8.13 中执行此操作

```
var data = [
["<input type='checkbox' name='selectall' class='headchecker'>", "Pallet Barcode", "Com", "Form", "Size", "Grade", "Brand", "Fineness", "Serial", "Gross", "Net", "Fine Oz", "Original Weight","selectall"]];

$("#silverBarList").handsontable("loadData", data,true); 
```

在以前的版本中，它运行良好。但是在这个 0.8.13 中，复选框并没有出现，而是只显示测试。

这个怎么做..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T00:25:54.537

使用列设置并将类型设置为复选框。

```
$("#silverBarList").handsontable({
    data : data,
    columns : [
        { type : 'checkbox' }
    ]
}); 
```

或者您可以为此使用自定义渲染器。有关它们的更多信息，请查看此示例页面：[http ://handsontable.com/demo/renderers_html.html](http://handsontable.com/demo/renderers_html.html)

# html - 调整窗口大小时，body/maindiv 的居中消失

> ID：15386465
> 
> 赞同：1
> 
> 时间：2013-03-13T13:17:44.017
> 
> 标签：html, css, centering

您好，我有一个小的 css 问题......只是想不通，我已经用谷歌搜索过了，所以；我有一个主 div，里面有 div，我的想法是，当它打开一个较小的屏幕时，div 应该出现在彼此下方，确实如此.. 我的问题是在计算机屏幕上它在窗口中居中，但是，一旦我调整窗口大小，使第一个 div“跳”到下一行，似乎居中消失了，它又卡在了左侧.....请帮助...我希望 div 总是居中！

js小提琴：jsfiddle.net/VCk2x/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:41:57.533

如果您试图以这种方式完成响应式布局，那么您做错了。
我建议阅读一些基本的[响应式教程](http://www.smashingmagazine.com/responsive-web-design-guidelines-tutorials/)。

但是，要将您的#mainDiv 居中：

```
#mainDiv {
    margin:0 auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:48:38.157

这是一个似乎可以满足您要求的示例：

HTML：

```
<ul class="int">
<li><div class="pic">boite 1</div></li>
<li><div class="pic">boite 2</div></li>
<li><div class="pic">boite 3</div></li>
<li><div class="pic">boite 4</div></li>
<li><div class="pic">boite 5</div></li>
<li><div class="pic">boite 6</div></li>
<li><div class="pic">boite 7</div></li>
<li><div class="pic">boite 8</div></li>
</ul> 
```

CSS：

```
div.pic {
    display:table-cell;
    width: 250px;
    height: 180px;
    background: #ff9933;
    margin:0;
    padding: 6px 6px 6px 6px;
    border-style: dashed;
    border-width: medium;
    border-color: green;
    text-align: center;
    vertical-align:middle;
}

ul.int {
    padding:0;
    list-style-type:none;
    margin:4% auto ;
    text-align: center;
}

ul.int li {
    margin: 12px 12px 12px 12px;
    display:-moz-inline-stack;
    display:inline-block;
    vertical-align:middle; 
}

ul.int.droite {direction:rtl;} 
```

这是jsfiddle：http: [//jsfiddle.net/CMUjT/](http://jsfiddle.net/CMUjT/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:22:35.617

我不明白你的问题，但我认为你的块不应该一起显示为内联，如果这是正确的。添加`width: {your width}px;`in`#mainDiv`也设置为显示为块。

# java - 字符串转换意外

> ID：15386466
> 
> 赞同：0
> 
> 时间：2013-03-13T13:17:47.103
> 
> 标签：java, encoding, replace, bufferedreader

在对 String 执行多项操作时出现意外行为。

我发现：

`String expectedString="ami\303\261o";`它的输出是这样的：`amiÃ±o`

`String str="ami\\303\\261o";`它的输出是这样的：`ami\303\261o`

或者

`BufferedReader(readline)`如果我们使用它的值从文件中读取这个字符串是：`ami\303\261o`

我将如何`amiÃ±o`使用`str="ami\\303\\261o"`?`ami\303\261o``BufferedReader`

任何类型的替换、转换、正则表达式或任何东西都是可以接受的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:55:33.793

是`org.apache.commons.lang.StringEscapeUtils.unescapeJava()`你要找的吗？

# c# - 在 .aspx 页面中声明其他类

> ID：15386467
> 
> 赞同：-1
> 
> 时间：2013-03-13T13:17:50.550
> 
> 标签：c#, asp.net, class

我很难让这段代码正常工作

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace Admin.Web.Booking
{
    public partial class Book
    {
        public partial class obj : Admin.Base.AdminBase
        {
            protected void Page_Load(object sender, EventArgs e)
            {
                Response.Write("test");
            }
        }
    }
} 
```

页面声明看起来像

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Master/Admin1.Master" AutoEventWireup="false" CodeBehind="obj.aspx.cs" Inherits="Admin.Web.Booking.Book.obj" %> 
```

设计器文件看起来像

```
namespace Admin.Web.Booking
{

    public partial class Book
    {

        public partial class obj
        {
        }
    }

} 
```

我收到一个错误：解析器错误消息：无法加载类型“Admin.Web.Booking.Book.obj”。

不明白如何使 obj 类成为 Admin.Web.Booking 命名空间中 Book 类的一部分。Admin.Base.AdminBase 扩展 System.UI.Page。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:27:30.933

我建议的第一件事是让类`obj`继承自`Page`.

```
namespace Admin.Web.Booking
{
    public partial class Book
    {    
        public partial class obj : System.Web.UI.Page
        {
        }
    }
} 
```

看看会发生什么。

如果这不起作用，那么我认为您不应该以这种方式使用嵌套类。我可以很容易地看到这变得过于复杂，尤其是在项目中添加了更多页面时。

如果你想构建你的代码，那么我会在你的项目中使用文件夹：

*   文件夹：预订
*   文件夹：订单
*   文件夹：门票

基本上将您的网站分成不同的域/边界。然后将 ASPX 页面放入这些文件夹中，例如

```
namespace Booking {
    public partial class Booking : Page {}
}

namespace Orders {
    public partial class Orders : Page {}
} 
```

不要使用嵌套类拆分代码，我真的可以看到这对您来说是一种痛苦的经历。

好的，根据下面的评论，我的偏好是多个命名空间而不是嵌套类。

命名空间在逻辑上将代码分隔为相关区域，例如管理、预订、票务等。如果将代码放置在单独的命名空间中，将更容易导航代码，可以在解决方案资源管理器中轻松查看。将所有代码放在几个类文件中会导致代码更难遵循，并且随着时间的推移会降低生产力，增加耦合并变得粘稠。

# android - 适用于 iOS 和 android 的具有键值存储和用户身份验证的云解决方案

> ID：15386469
> 
> 赞同：1
> 
> 时间：2013-03-13T13:17:56.543
> 
> 标签：android, ios, cloud

假设我有一个适用于 android、iOS 和 web 的游戏/应用程序，我需要存储一些信息以供跨设备的用户使用。

所以基本上我想使用具有以下功能的服务（按优先顺序）

*   涵盖托管和维护
*   用于持久化和检索数据的 API
*   键值存储
*   适用于 Android 和 iOS 的 SDK
*   用户认证

简化：我想知道我可以使用哪些服务来编写具有用户数据持久性的应用程序，而根本不用考虑服务器代码。

我不知道这样的解决方案。也许亚马逊或谷歌有这样的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:13:47.027

可以在这里找到一个很好的概述： [http ://www.raywenderlich.com/20482/how-to-choose-the-best-backend-provider-for-your-ios-app-parse-vs-stackmob-vs- appcelerator-cloud-and-more](http://www.raywenderlich.com/20482/how-to-choose-the-best-backend-provider-for-your-ios-app-parse-vs-stackmob-vs-appcelerator-cloud-and-more)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:09:55.240

*Parse*似乎以某种方式解决了我的大部分需求

[https://parse.com/products/data](https://parse.com/products/data)

# ruby - 生成字符串并耗尽内存

> ID：15386472
> 
> 赞同：0
> 
> 时间：2013-03-13T13:18:00.087
> 
> 标签：ruby, arrays, string, performance, permutation

我试图根据一定的长度生成随机字符串。例如，如果长度 = 4，我生成从 aaaa 到 zzzz 的所有字符串。我需要所有的重复用于稍后的测试目的。这就是我要做的事情：

```
len = 5
str = ('a'..'z').to_a.repeated_permutation(len).map(&:join) 
```

问题是它占用了大量内存。事实上，我的程序由于 ruby​​ 解释器无法分配足够的内存而终止。是否有一种内存占用较少的方式来生成这些字符串？

编辑： Len 在技术上是一个变量。它的范围可以从 2 到 7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:28:54.940

只需使用`('aaaaa'..'zzzzz').to_a`. 它避免了将每个数字构建为四个字母的数组并将它们连接回字符串的中间步骤。

这（在我的系统上）大约快四倍，而且几乎肯定会使用一小部分内存。

> ...问题是 len 是一个变量 ....从 2 到 7

然后使用`(('a' * len)..('z' * len)).to_a`. 这仍然更快，因为唯一的临时分配是由4 到 14 个字符生成`'a' * len`的字符串。`'z' * len`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:43:34.953

```
len = 5
(('a'*len)..('z'*len)).to_a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:37:26.950

减少使用的内存量可以通过使用享元[模式](http://en.wikipedia.org/wiki/Flyweight_pattern)来完成。

我不确定您要在解决方案上投入多少时间，但要创建一个包含`x`许多“字母”的类，这些“字母”按特定顺序排列，并且每个字母都指向一个共享的`String`s 池（每个字母一个在字母表中）将允许您降低内存（您可以为此使用哈希）。然后，您可以覆盖`to_s`用于输出新对象以及修改`repeated_permutation`方法以接受新对象。

请注意，仅当您期望`len`变得非常大时，该解决方案才值得您花时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T13:30:17.963

您可以逐个遍历排列 - 取决于您以后是否需要批量处理它们。

因此，如果您可以将字符串逐个输入测试，那么您就可以

```
enumerator = str = ('a'..'z').to_a.repeated_permutation(len)
my_test( enumerator ) 
```

和 。. .

```
def my_test e
  e.each do |string|
  # Test it
end 
```

不过，这仍然需要处理很多，我希望这样的代码至少需要几分钟才能运行，您正在测试超过 1100 万个单独的字符串。

# c - 在没有警告的情况下将可变矩阵作为常量传递

> ID：15386475
> 
> 赞同：1
> 
> 时间：2013-03-13T13:18:08.543
> 
> 标签：c, pointers, constants

我的主函数生成一个矩阵作为值数组“m”，以及另一个指向行开头的指针数组“M”。我想将此矩阵传递给一个子例程，这样就不能修改任何值，也不能修改行指针。即，子程序不能改变矩阵。因此，我将一个指向常量的指针传递给一个常量值。这工作正常。下面的示例会生成预期的错误消息。

```
#include<stdio.h>
#include<stdlib.h>

void fun(double const * V, double const * const * M)
{
        V = V; // allowed but pointless
        V[0] = V[0]; // not allowed

        M = M; // allowed but pointless
        M[0] = M[0]; // not allowed
        M[0][0] = M[0][0]; // not allowed
}

int main()
{
        double *V = (double *)malloc(2*sizeof(double));
        double *m = (double *)malloc(4*sizeof(double));
        double **M = (double **)malloc(2*sizeof(double *));

        M[0] = &m[0];
        M[1] = &m[2];

        fun(V,M);

        return 0;
} 
```

错误信息：

```
test.c: In function ‘fun’:
test.c:7:2: error: assignment of read-only location ‘*V’
test.c:9:2: error: assignment of read-only location ‘*M’
test.c:10:2: error: assignment of read-only location ‘**M’ 
```

这些和预期的一样。到目前为止一切都很好。

问题是传递非常量矩阵也会产生以下警告。我正在使用没有选项的 gcc v4.5。

```
test.c: In function ‘main’:
test.c:22:2: warning: passing argument 2 of ‘fun’ from incompatible pointer type
test.c:4:6: note: expected ‘const double * const*’ but argument is of type ‘double **’ 
```

请注意，传递向量“V”不会产生此类警告。

我的问题是：我可以将一个完全可变的矩阵传递给一个子程序，使得它不能被修改，没有强制转换，也没有编译器警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:52:21.943

这将有助于：

```
void fun(double const * const V, double const * const * const M)
.... 
```

您面临的问题是，`double const *`它不是指向 double 的 const 指针，而是指向`const double`. `double const *`== `const double *`。

但是仍然有一条评论：对于序数类型`const`，通常不使用说明符。

```
void fun(double const * V, double const * const * M)
.... // this allows to change V or M, but relaxes caller side 
```

编辑：指针完全`const`......所以他们指向的数据不能被修改。

# jquery - RoyalSlider 从每张幻灯片的 div 更改背景

> ID：15386478
> 
> 赞同：0
> 
> 时间：2013-03-13T13:18:20.743
> 
> 标签：jquery, css, slider

我将 RoyalSlider 用于我的网站，并且我想将每个滑块的背景颜色更改为不同的颜色。

我要更改的 div 是*#slide6*，如下所示：

```
$('#slide6').css({"background-color":"red"}); 
```

但我不知道该怎么做。这是HTML结构

```
<div id="content-slider-1" class="royalSlider contentSlider rsDefault">
    <div> 
    <h3>Slide HTML Text</h3>
    <p>This is dummy copy.</p>
    <span class="rsTmb">HTML text</span>
    </div> 
```

也许我可以使用类似 data-color='red' 然后使用 if/else 作为背景颜色？

我可以看到每张幻灯片的数据：

```
var slider = $('#content-slider-1').data('royalSlider');
    slider.ev.on('rsBeforeAnimStart', function() { 
        console.log( $('#content-slider-1').data('royalSlider').currSlide ); 
}); 
```

有人可以帮我解决这个问题吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:17:21.170

您可以在包装每张幻灯片的 div 上添加一个类，并从您的 CSS 控制背景颜色

```
<div id="content-slider-1" class="royalSlider contentSlider rsDefault">
<div class="slide1"> 
<h3>Slide HTML Text</h3>
<p>This is dummy copy.</p>
<span class="rsTmb">HTML text</span>
</div>
<div class="slide2"> 
<h3>Slide HTML Text</h3>
<p>This is dummy copy.</p>
<span class="rsTmb">HTML text</span>
</div>

.slide1 {background-color: red}
.slide2 {background-color: blue} 
```

# c++ - 结构的结构作为参数

> ID：15386479
> 
> 赞同：0
> 
> 时间：2013-03-13T13:18:21.593
> 
> 标签：c++, c, function, struct, arguments

我有一个相当大的结构，其中有其他结构，然后我想将这个结构结构作为函数的参数传递。任何人都知道该怎么做，或者请给我一个例子！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:20:55.693

```
struct B {
   //your struct..
};
struct A {  
    B b;
};

void foo(struct A a)
{ 
   a.b + ???....
   //you function
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T13:45:24.870

如果您的函数不需要修改任何结构的内容，则可以像传递任何其他参数一样传递它：

```
struct bigStruct {
  struct aStruct a;
  struct anotherStruct b;
  struct someOtherStruct c;
  ...
};

void foo( struct bigStruct s )
{
  do_something_with( s.a );
  do_something_else_with( s.b );
  ...
} 
```

如果需要写入结构的任何成员，则需要将*指针*传递给结构，并使用`->`运算符访问其成员：

```
void bar( struct bigStruct *p )
{
   do_something_with( p->a );
   do_something_else_with( p->b );
   ....
} 
```

*如果结构类型非常*大，有时也需要使用指针。

请注意，您只需要`->`在处理指向结构的指针时使用运算符。在我们上面的结构体定义中`a`，`b`、 和`c`是常规结构体类型，因此我们可以使用`.`. 例如，假设 的以下定义`aStruct`：

```
struct aStruct {
  int ival;
  double dval;
  char name[20];
}; 
```

我们会像这样访问这些成员`p`：

```
printf( "%d\n", p->a.ival );
printf( "%f\n", p->a.dval );
printf( "%s\n", p->a.name ); 
```

现在，如果我们的 bigStruct 定义为

```
struct bigStruct {
  struct aStruct *a;
  ...
}; 
```

那么我们需要对of 的子级和 的子级`->`都使用运算符：`p``p->a`

```
printf( "%d\n", p->a->ival );
printf( "%f\n", p->a->dval );
printf( "%s\n", p->a->name ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:23:02.353

一个结构可以同时具有基本类型和复杂类型作为成员。传递具有依次是结构的成员的结构与传递仅具有基本类型成员的结构没有区别。

# c++ - 循环 - 访问冲突写入位置 0xabababab

> ID：15386480
> 
> 赞同：0
> 
> 时间：2013-03-13T13:18:24.110
> 
> 标签：c++, loops

当我将循环设置为迭代 10 次时，它可以工作，但是无论我设置多少次迭代，它总是在第 12 次出现此错误。这是下面的代码。

有谁知道为什么会这样？或者如果我错过的代码中有逻辑错误。谢谢

```
string* Analyser::topFiveBuyers()
{
//set size and add buyer names for comparison.
string *calcString = new string[sSize];
int calcTotal[sSize] = {INT_MIN, INT_MIN, INT_MIN, INT_MIN, INT_MIN};

//checks transactions
for (int i = 0; i<nTransactions; i++)
{
    //compares with arrays
    for(int j =0; j<sSize; j++)
    {

    if(calcTotal[j] < calcTotal[j+1])
    {
    int tVar = calcTotal[j+1];
    string tStr = calcString[j+1];
    int tVarTwo = calcTotal[j];
    string tStrTwo = calcString[j];

    calcTotal[j] = tVar;
    calcString[j] = tStr;
    calcTotal[j+1] = tVarTwo;
    calcString[j+1] = tStrTwo;
    }

        if(tArray[i].buyerName == calcString[j])
        {
        calcTotal[j] += tArray[i].numShares;
        break;
        }
        else
            {
                //checks if shares is great then current total then replaces
                if(tArray[i].numShares > calcTotal[j])
                {
                    int tVar = calcTotal[j];
                    calcTotal[j+1] = tVar;
                    string tStr = calcString[j];
                    calcString[j+1] = tStr;
                    calcTotal[j] = tArray[i].numShares;
                    calcString[j] = tArray[i].buyerName;
                    break;
                }
            }
    }
}
return calcString; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:23:04.700

您正在访问`calcString[j+1]`，`calcTotal[j+1]`并且`j`等于`sSize-1`上一次循环运行。因此，您将超出数组范围。

# iphone - 当用户杀死应用程序时，我应该调用什么方法？

> ID：15386483
> 
> 赞同：1
> 
> 时间：2013-03-13T13:18:31.433
> 
> 标签：iphone

当用户使用任务切换器中的红色减号关闭按钮终止应用程序时，委托方法有问题。

我曾经尝试过使用`exit(0)`，`applicationWillTerminate`但没有奏效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:57:16.273

当用户关闭应用程序或`[applicationWillTerminate:]`清理您可能需要清理的任何内容时，您无需执行任何操作。

你不打电话`exit()`，如果你这样做，应用程序可能会被拒绝。与 相同`abort()`。

如果您需要在用户关闭应用程序时关闭它，您唯一能做的就是设置 plist 标志，将应用程序设置为退出而不是进入后台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:59:09.083

当用户使用 iOS 最近应用列表中的红色减号按钮退出您的应用时，您不会收到回调。你的应用程序被 a 杀死了`SIGKILL`，没有办法知道。

您应该保存所有数据并做所有您需要做的事情以准备退出

```
- (void)applicationDidEnterBackground:(UIApplication *)application 
```

在应用程序委托中。这可能是您的应用程序得到的最后一次调用，因此请做好准备。

# iphone - 如何使用 UIsearchBar 委托方法关闭键盘？我尝试了所有方法但没有用。

> ID：15386488
> 
> 赞同：14
> 
> 时间：2013-03-13T13:18:56.093
> 
> 标签：iphone, ios

嗨，我在我的应用程序中使用 UIsearchBar，我尝试了 UISearchBar Delegate 中的所有方法来关闭键盘但没有用。谁能帮帮我。

我试过的一些代码

1.

```
-(void)searchBarTextDidEndEditing:(UISearchBar *)searchBar
{
    [searchBar resignFirstResponder];
} 
```

2.

```
-(BOOL) searchBar:(UISearchBar *)searchBar shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {

    if([text isEqualToString:@"\n"])
    {
        [searchBar resignFirstResponder];
        return NO;
    }
    return YES;

} 
```

3.

```
- (void)searchBarCancelButtonClicked:(UISearchBar *) searchBar
{
     [searchBar resignFirstResponder];
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-13T13:41:04.853

首先，您应该[`UISearchBarDelegate`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISearchBarDelegate_Protocol/Reference/Reference.html) 在课堂上实施并检查您是否已连接到您的`UISearchBar`？

如果您`UISearchBar`通过 IB 添加，那么您应该选择 UISearchBar 的委托属性给文件的所有者。您应该确保正确连接 代码`IBOutlet`中`UISearchBar`的 。

如果您`UISearchBar`通过代码添加，那么您应该像这样在代码中自己设置委托`searchBar.delegate=self;`

下一步是确保正在调用委托方法，如果您已正确连接委托，这很明显，最好的检查方法是将中断指针放入您的代码中或通过`NSLog`.

最后，如果要在用户单击搜索时隐藏键盘，请使用此方法隐藏键盘

```
- (void) searchBarSearchButtonClicked:(UISearchBar *)searchBar {
    [searchBar resignFirstResponder];
} 
```

或者您可以在编辑完成后尝试

```
- (void)searchBarTextDidEndEditing:(UISearchBar *)searchBar {
    [searchBar resignFirstResponder];
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-13T13:38:55.337

尝试这个：

在搜索栏设置代理并检查 IBOutlet 是否连接

```
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar {
    [searchBar resignFirstResponder];
} 
```

# php - PHP - 如何以我需要的特定格式返回 JSON？

> ID：15386490
> 
> 赞同：0
> 
> 时间：2013-03-13T13:19:04.463
> 
> 标签：php, json

我有一个 PHP 文件，它目前通过以下两种方式返回 JSON：

如果发生错误，我会这样做：

```
$post_data = array('error' => "no_member_id");
echo json_encode($post_data); 
```

如果没有错误，并且我需要以 JSON 格式返回数据，我会这样做：

```
if (mysql_num_rows($result) > 0 )
{
         $rows = array();
         while($r = mysql_fetch_assoc($result))
         {
             $rows[] = $r;
         }

         echo json_encode($rows);
} 
```

但我真正需要做的是以如下格式返回数据：

```
{"result":"ok", data :[{"data1":"value1", "data2":"value2"}]} 
```

或这个：

```
{"result":"error", data :[{"error":"no_id"}]} 
```

有人可以帮我理解如何做到这一点吗？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:22:14.567

```
echo json_encode( array( "result" => "ok", "data" => $rows ) ); 
```

代替

```
echo json_encode($rows); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:25:00.747

首先，停止使用mysql内置函数。它们将被弃用。

尝试这个：

```
$result = 0;
$json = array(
 'result' => 'ok',
 'data'   => array()  
);
if (mysql_num_rows($result) > 0 )
  while($r = mysql_fetch_assoc($result)) {
    $json['data'][] = $r;
  }
} else {
  $json['result'] = 'error';
  $json['data'] = array('error' => "no_member_id");
}
echo json_encode($json); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T13:25:05.870

只需在两个数组中添加具有特定值的结果键：

```
echo json_encode(array("result" => "ok", "data" : $rows)); 
```

和

```
echo json_encode(array("result" => "error", "data" : $post_data)); 
```

# android - 用户尝试从图库中删除文件时的意图

> ID：15386491
> 
> 赞同：1
> 
> 时间：2013-03-13T13:19:05.807
> 
> 标签：android, file, android-intent

我想做的是，如果用户尝试从图库中删除文件，系统会询问他是否要使用我的应用程序删除它。我正在查看当用户尝试从图库中删除文件时是否可以捕获意图调用。任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:39:26.827

我不认为有这样的意图。
但是为了检查是否有，请在删除文件时检查logcat。所有意图在启动时都会显示在 logcat 中。我建议你在 logcat 的搜索行（在顶部）中写下“intent”并检查一下。

祝你好运！

# javascript - 如何从 JSON 数组中获取集合

> ID：15386495
> 
> 赞同：3
> 
> 时间：2013-03-13T13:19:16.783
> 
> 标签：javascript, ruby, json, ruby-on-rails-3

我在 javascript 的 ajax 响应中有一个 JSON 数组。

```
[{"id":1,"text":"apple"},{"id":2,"text":"mango"},{"id":3,"text":"banana"}] 
```

`ids`我想`"1, 2, 3"`从这个 JSON 响应中提取一个逗号分隔的列表。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:23:37.860

首先，您解析 JSON（如果您还没有这样做的话）：

```
var arr = JSON.parse('[{"id":1,"text":"apple"},{"id":2,"text":"mango"},{"id":3,"text":"banana"}]'); 
```

然后循环数组以提取每个对象的 id。您可以使用`map`数组的方法循环并将ID一次性添加到新数组中：

```
var ids = arr.map(function(item) {
    return item.id;
});
alert(ids.join(',')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:21:56.067

`jsonstr`假设您的 json在您的 js 代码 中存储为字符串：

```
/*parse the JSON to a JS object*/
var data = JSON.parse(jsonstr); 
var ids = [];

for(var i=0; i<data.length; i++){

   //loop over the array and if the id is defined add it
   if(typeof data[i].id !== "undefined"){
       ids.push(data[i].id);
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:24:45.640

```
var a = [{
    "id": 1,
    "text": "apple"
}, {
    "id": 2,
    "text": "mango"
}, {
    "id": 3,
    "text": "banana"
}];
var ar = [];
for (var i = 0; i < a.length; i++) {
    ar.push(a[i].id);
}

alert(ar.join(',')) 
```

[http://jsfiddle.net/t3w5S/1/](http://jsfiddle.net/t3w5S/1/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-13T13:40:08.333

对这个：

```
x = [{"id":1,"text":"apple"},{"id":2,"text":"mango"},{"id":3,"text":"banana"}];
str = "";
for(i=0;i<x.length;i++)
{
  str += x[i].id.toString() + ',';
}
str = str.substring(0, str.length - 1);
console.log(str); 
```

# vb.net - 实边将文件属性文本框添加到自定义菜单

> ID：15386498
> 
> 赞同：0
> 
> 时间：2013-03-13T13:19:23.577
> 
> 标签：vb.net, solidworks

是否可以在 Solid Edge 中在链接到文件属性（例如文档编号或修订版）的自定义功能区中添加文本字段？我不认为你可以在标准的实体边缘定制工具中做到这一点，但我不确定它是否可以以某种方式以编程方式完成。谢谢。

# c# - 跟随移动物体绘制形状

> ID：15386501
> 
> 赞同：1
> 
> 时间：2013-03-13T13:19:34.897
> 
> 标签：c#, .net, drawing, aforge

我正在尝试做的事情是连接到我的网络摄像头，然后检测到一个彩色对象（蓝色补丁），我需要在表单上绘制矩形，该矩形随着我的对象的移动而移动，但我得到的是已经绘制了许多矩形对于每一帧，我只需要让一个矩形随着我的蓝色物体移动而移动。怎么做？
非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:34:25.083

在没有看到任何代码的情况下真正理解你在做什么有点困难。我假设您直接在 Form 的 Graphics 对象上绘制矩形，而网络摄像头图像并未绘制在同一个 Form 上。

如果是这样，您应该重新绘制表单上的整个区域，以便在每帧之间重新开始。

如果您正在使用窗体的绘制事件，请尝试在绘制矩形之前清除画布：

```
private void Form_Paint(object sender, PaintEventArgs e)
{
    e.Graphics.Clear(Color.White);

    // Draw rectangle here.
} 
```

# web-services - org.jboss.util.NotImplementedException 在 jboss-5.1.0 GA 服务器中使用soap webservice 时

> ID：15386508
> 
> 赞同：3
> 
> 时间：2013-03-13T13:19:50.710
> 
> 标签：web-services, soap, cxf, jboss5.x, ws-security

我正在测试我的 web 服务客户端代码，该代码使用一个也需要 ws-security 身份验证的soap web 服务。我使用了 apache cxf 2.3.0、wss4j 1.5.9、apache-cxf-rt-security 2.3.0 罐子。但是，当我的代码部署在 jboss-5.1.0 GA 中时，我遇到了以下异常。当我在码头服务器上测试它时，它工作正常。非常感谢任何帮助。

下面的堆栈跟踪

> org.jboss.util.NotImplementedException at org.jboss.ws.core.soap.SOAPPartImpl.appendChild(SOAPPartImpl.java:298) at org.apache.cxf.staxutils.W3CDOMStreamWriter.setChild(W3CDOMStreamWriter.java:114) at org. apache.cxf.staxutils.W3CDOMStreamWriter.newChild(W3CDOMStreamWriter.java:104) 在 org.apache.cxf.staxutils.W3CDOMStreamWriter.writeStartElement(W3CDOMStreamWriter.java:132) 在 org.apache.cxf.binding.soap.interceptor.SoapOutInterceptor。 writeSoapEnvelopeStart(SoapOutInterceptor.java:122) at org.apache.cxf.binding.soap.interceptor.SoapOutInterceptor.handleMessage(SoapOutInterceptor.java:81) at org.apache.cxf.binding.soap.interceptor.SoapOutInterceptor.handleMessage(SoapOutInterceptor.handleMessage(SoapOutInterceptor.java:81) java:61）在 org.apache.cxf.phase.PhaseInterceptorChain.doIntercept（PhaseInterceptorChain.java:247）在 org.apache。cxf.endpoint.ClientImpl.invoke(ClientImpl.java:516) 在 org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:313) 在 org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java: 265) 在 org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:73) 在 org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:124) 在 $Proxy328.documentVerificatieSystem(Unknown Source) 在com.experian.nextgen.nl.services.reporting.helper.RDCWebserviceHelper.getRDCResult(RDCWebserviceHelper.java:159) 在 com.experian.nextgen.nl.facades.impl.RDCWSFacadeService.invoke(RDCWSFacadeService.java:57) 在 com。 experian.nextgen.nl.services.jbpm.tasks.ThirdPartyRDCSearchTask.invoke(ThirdPartyRDCSearchTask.java:70) 在 com.experian.nextgen.core.services.jbpm.tasks.NGAbstractJbpmTask.execute(NGAbstractJbpmTask.java:129) at org.jbpm.pvm.internal.wire.usercode.UserCodeActivityBehaviour.execute(UserCodeActivityBehaviour.java:42) at org.jbpm.pvm.internal.model.op.ExecuteActivity.perform(ExecuteActivity.java:60)在 org.jbpm.pvm.internal.model.ExecutionImpl.performAtomicOperationSync(ExecutionImpl.java:672) 在 org.jbpm.pvm.internal.model.ExecutionImpl.performAtomicOperation(ExecutionImpl.java:632) 在 org.jbpm.pvm.internal .model.ExecutionImpl.start(ExecutionImpl.java:217) 在 org.jbpm.pvm.internal.cmd.StartProcessInstanceInLatestCmd.execute(StartProcessInstanceInLatestCmd.java:63) 在 org.jbpm.pvm.internal.cmd.StartProcessInstanceInLatestCmd.execute(StartProcessInstanceInLatestCmd .java:36) 在 org.jbpm.pvm.internal.tx 的 org.jbpm.pvm.internal.svc.DefaultCommandService.execute(DefaultCommandService.java:42)。StandardTransactionInterceptor.execute(StandardTransactionInterceptor.java:50) at org.jbpm.pvm.internal.svc.EnvironmentInterceptor.executeInNewEnvironment(EnvironmentInterceptor.java:53) at org.jbpm.pvm.internal.svc.EnvironmentInterceptor.execute(EnvironmentInterceptor.java: 40) 在 org.jbpm.pvm.internal.svc.SkipInterceptor.execute(SkipInterceptor.java:43) 在 org.jbpm.pvm 的 org.jbpm.pvm.internal.svc.RetryInterceptor.execute(RetryInterceptor.java:56) .internal.svc.ExecutionServiceImpl.startProcessInstanceByKey(ExecutionServiceImpl.java:71) at com.experian.nextgen.core.services.jbpm.impl.NGGenericJbpmServiceImpl.run(NGGenericJbpmServiceImpl.java:71) at com.experian.nextgen.nl.services .eidcheck.impl.EidCheckService.getEidCheckReport(EidCheckService.java:42) 在 com.experian.nextgen.nl.services.webservices。autotrace.impl.AutoTraceWSImpl.getEidCheckReport(AutoTraceWSImpl.java:951) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke( DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org.apache.cxf.service.invoker.AbstractInvoker.performInvocation(AbstractInvoker.java:173) 在 org.apache.cxf .service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:89) 在 org.apache.cxf.jaxws.JAXWSMethodInvoker.invoke(JAXWSMethodInvoker.java:60) 在 org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker .java:75) 在 org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:58) 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) 在 java.util.concurrent.FutureTask.run 的 java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441) (FutureTask.java:138) 在 org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:106) 在 org.apache.cxf.workqueue.SynchronousExecutor.execute(SynchronousExecutor.java:37)。 cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:247) 在 org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:113) 在 org.apache.cxf.transport.servlet.ServletDestination.invoke(ServletDestination. java:97) 在 org.apache.cxf 的 org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:458)。transport.servlet.ServletController.invoke(ServletController.java:185) at org.apache.cxf.transport.servlet.AbstractCXFServlet.invoke(AbstractCXFServlet.java:148) at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest( AbstractHTTPServlet.java:179) at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:103) at javax.servlet.http.HttpServlet.service(HttpServlet.java:637) at org.apache.cxf .transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:159) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java :206) 在 org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve. java:235) 在 org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190) 在 org.jboss.web 的 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) .tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92) at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126) at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke (SecurityContextEstablishmentValve.java:70) 在 org.apache.catalina.core。StandardHostValve.invoke(StandardHostValve.java:127) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java: 158) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330) 在 org.apache.coyote.http11.Http11Processor 的 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598) 中的 .process(Http11Processor.java:829) org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java :447) 在 java.lang.Thread.run(Thread.java:619)在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) 的 org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158) 调用(ErrorReportValve.java:102)在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829) 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler .process(Http11Protocol.java:598) 在 org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447) 在 java.lang.Thread.run(Thread.java:619)在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) 的 org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158) 调用(ErrorReportValve.java:102)在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829) 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler .process(Http11Protocol.java:598) 在 org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447) 在 java.lang.Thread.run(Thread.java:619)catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330) at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829) at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol. java:598) 在 org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447) 在 java.lang.Thread.run(Thread.java:619)catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330) at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829) at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol. java:598) 在 org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447) 在 java.lang.Thread.run(Thread.java:619)

# verilog - Verilog 中的简单 CPU 设计

> ID：15386509
> 
> 赞同：1
> 
> 时间：2013-03-13T13:19:51.313
> 
> 标签：verilog

我正在尝试使用一个线变量来保存其他模块的输出并将其作为输入提供给另一个模块。最初尝试从测试台更改其值时，它显示如下所述的错误。这里***tb.v***是测试台文件的名称。

> tb.v:39：错误：a 不是 TB 中的有效左值。
> tb.v:4：错误：a 在这里被声明为线。1 详细说明期间的错误。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:43:37.930

使用您的测试平台来控制模块 2 输入何时由模块 1 输出或测试平台驱动。

```
reg tb_in, tb_drive;
wire out1;
wire in2 = (tb_drive) ? tb_in : out1;
mod1 mod1 (out1);
mod2 mod2 (in2); 
```

# javascript - 使用 javascript/jquery 显示 iframe

> ID：15386515
> 
> 赞同：0
> 
> 时间：2013-03-13T13:20:14.110
> 
> 标签：javascript, jquery, jquery-ui, youtube-api, youtube-javascript-api

我有这个 iframe：

```
<iframe width="0" height="0" src="http://www.youtube.com/embed/Nc9xq-TVyHI?autoplay=1&start=110&end=119" frameborder="0" ></iframe></body></html>'; 
```

我需要在一些 javascript/jquery 事件上显示/执行这个 iframe。我的问题是如何使用 javascript/jquery 代码显示该 iframe？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:22:20.843

$('#divToPutItIn').html('html 这里');

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:39:00.130

如果您有时间学习如何正确使用 JavaScript，即在您的 YouTube 视频中使用 JavaScript，那么它是在 iframe 中提供给您的这一事实是无关紧要的。[只需从YouTube JavaScript Player API](https://developers.google.com/youtube/js_api_reference)页面学习示例。一旦您按照他们的连接过程进行操作，他们将演示您的 javascript 应该是什么样子的底部。

如果您以其他任何方式执行此操作，您可能会遇到问题或需要其他视频功能。我从经验中知道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T05:40:48.897

你需要为此学习 Youtube API .. 你会在[这里](https://developers.google.com/youtube/iframe_api_reference)得到答案..

以及见下面的演示链接

```
var player;
  function onYouTubeIframeAPIReady() {
    player = new YT.Player('player', {
      height: '390',
      width: '640',
      videoId: 'u1zgFlCw8Aw',
      events: {
        'onReady': onPlayerReady,
        'onStateChange': onPlayerStateChange
      }
    });
  }

  // 4\. The API will call this function when the video player is ready.
  function onPlayerReady(event) {
    event.target.playVideo();
  } 
```

[http://jsfiddle.net/rushijogle/TDNm5/1/](http://jsfiddle.net/rushijogle/TDNm5/1/)

# javascript - 如何在路径中传递变量

> ID：15386526
> 
> 赞同：1
> 
> 时间：2013-03-13T13:20:42.653
> 
> 标签：javascript, jquery, jplayer

我有这个脚本，我想播放名为“pr_id”的歌曲，我该如何在路径中写入？谢谢！

```
 $(document).ready(function(){
            var pr_id = document.getElementById('id')
            $("#jquery_jplayer_1").jPlayer({
                ready: function (){
                    $(this).jPlayer("setMedia", { 
                        mp3:"/sounds/[pr_id].mp3"
                        });
                        },
                       swfPath: "js", 
                       supplied: "mp3",
                       wmode: "window"
                    });
                }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:22:10.263

像这样：

```
$(document).ready( function() {
    var pr_id = document.getElementById('id');

    $("#jquery_jplayer_1").jPlayer({
        ready: function() {
            $(this).jPlayer("setMedia", { 
                mp3:"/sounds/" + pr_id + ".mp3"
            });
        },
        swfPath: "js", 
        supplied: "mp3",
        wmode: "window"
    });
}); 
```

将字符串与变量连接起来:)，不幸的是，与其他一些语言不同，在字符串中包含变量并不容易，您必须通过连接将字符串拆分一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:24:38.620

```
mp3:"/sounds/"+pr_id+".mp3" 
```

你可以连接它

# python - 优化 - Python 和 Scypi.minimize

> ID：15386527
> 
> 赞同：0
> 
> 时间：2013-03-13T13:20:46.300
> 
> 标签：python, optimization, gravity, minimize

我想找到几个元素的位置 [X,Y,Z] 以使全球重心位于所需的点。

为此，我定义了 2 个类：

*   存储元素质量和位置的元素
*   平面，它采用元素列表并可以根据元素集计算其重心。

我还定义了一个误差函数，它计算平面元素集的实际全局重心与所需重心之间的差异。

为了最小化这个函数，我想将该`scypi.minimize`函数与 Nelder-Mead Simplex 算法一起使用。

我将每个元素的坐标放入`x0`然后将`x0`误差函数作为参数传递给最小化。

我收到了这个我不明白的错误：

```
ValueError: setting an array element with a sequence. 
```

此外，根据我想要做的，您可能有更好的想法来解决/解决我的问题？

这是代码：

```
import numpy as np
from scipy.optimize import minimize

class plane(object):
  def __init__(self, elts):
    self.elements=elts
    self.TotalMasse=self.calc_masse(self.elements) 
    self.cdg = self.calc_CDG()

  def __getitem__(self):
    return self.elements,self.TotalMasse

  def calc_masse(self,elements):
    Lm=[]
    for el in elements:
      Lm.append(el.masse)
    return sum(Lm)

  def calc_CDG(self):
    Xcdg=0
    Ycdg=0
    Zcdg=0
    for el in self.elements:
      Xcdg+=el.masse*el.position[0]/self.TotalMasse
      Ycdg+=el.masse*el.position[1]/self.TotalMasse
      Zcdg+=el.masse*el.position[2]/self.TotalMasse
    return [Xcdg,Ycdg,Zcdg]

class element(object):
  def __init__(self, mass, pos):
    self.masse=mass
    self.position=pos

  def __getitem__(self):
    return self.masse, self.position

def calculErreurPosCDG(cdg):
    global positionCDGconsigne
    return [positionCDGconsigne[0]-cdg[0], positionCDGconsigne[1]-cdg[1],positionCDGconsigne[2]-cdg[2]]

battery = element(0.5,[0.5,1,1])
motor = element(0.2,[1,1,0])
servoL = element(0.01,[-0.7,1,0])
servoR = element(0.01,[0.7,1,0])
reciever = element(0.01,[0.1,1,1])

elements=[battery, motor, servoL, servoR, reciever]

positionCDGconsigne=[1,1,1]

plane1=plane(elements)

x0=np.array([])
for el in elements:
  x0= np.append(x0,[el.position])

res=minimize(calculErreurPosCDG,x0,method='nelder-mead', options={'xtol':1e-8,'disp':True}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:04:45.590

您应该能够分别对每个坐标组件（x、y 和 z）运行最小化 3 次。然后修改`calculErreurPosCDG`以处理单个值而不是向量应该使其工作。然后它将只处理标量。

补充说明：在 Python 中以大写字母开头的类名称和以小写字母开头的函数是一种很好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:37:13.197

您的目标函数返回一个列表，而`minimize`需要一个标量。您需要首先设置您的问题，并通过最小化向量值函数来指定您的确切含义。

# c# - 延迟事件处理，直到事件被触发

> ID：15386530
> 
> 赞同：12
> 
> 时间：2013-03-13T13:20:48.400
> 
> 标签：c#, events, event-handling

在 C# 中，延迟处理所有已知事件直到实体被完全修改的最佳方法是什么？比如说，一个实体 - MyEntity - 具有属性 ID、名称和描述......

```
 public class MyEntity
   {
       public Int32 ID { get; set; }
       public String Name { get; set; }
       public String Description { get; set; }
   } 
```

当修改每个属性时，每次修改都会触发一个事件。

有时，ID 是唯一修改的属性，有时所有属性都被修改。我希望修改事件的注册侦听器等到“批处理”中正在修改的所有属性都已被修改。

实现这一目标的最佳方法是什么？

在我的脑海中，类似于 UnitOfWork 模式的东西，可以在调用堆栈的顶层围绕方法调用包装 using 语句，但不知道如何实现这样的事情......

编辑：作为澄清......侦听器分布在应用程序中并在其他线程中执行。另一个参与者设置 - 例如 - 它必须调用 MyEntity.Name 属性来设置值的名称。

由于设计上，Name属性的修改会触发其他属性的变化，因此需要监听者知道属性的修改已经完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T13:27:53.710

只有执行修改的代码才能知道它的批量更改何时完成。

我对类似的类所做的是提供`SuspendNotifications()`和`ResumeNotifications()`方法，它们以明显的方式调用（即在进行大量更改之前调用暂停，完成后调用恢复）。

它们在内部维护一个计数器，该计数器在 SuspendNotifications() 中递增并由 ResumeNotifications() 递减，如果递减结果为零，则发出通知。我这样做是因为有时我会修改一些属性，然后调用另一个修改了更多的方法，它本身会调用挂起/恢复。

（如果 resume 被调用太多次，我会抛出异常。）

如果更改了多个属性，则最终通知不会命名正在更改的属性（因为有多个）。我想您可以累积更改属性的列表并将其作为通知的一部分发出，但这听起来不是很有用。

另请注意，线程安全对您来说可能是也可能不是问题。您可能需要使用锁定和/或`Interlocked.Increment()`等。

另一件事是，如果出现异常，您当然最终需要尝试/捕获您的呼叫以暂停/恢复。您可以通过编写实现 IDisposable 并在其 Dispose 中调用 resume 的包装类来避免这种情况。

代码可能如下所示：

```
public void DoStuff()
{
    try
    {
        _entity.SuspendNotifications();
        setProperties();
    }

    finally
    {
        _entity.ResumeNotifications();
    }
}

private setProperties()
{
    _entity.ID = 123454;
    _entity.Name = "Name";
    _entity.Description = "Desc";
} 
```

* * *

[编辑]

如果你要引入一个接口，比如说`ISuspendableNotifications`，你可以编写一个`IDisposable`包装类来简化事情。

下面的例子说明了这个概念；的使用`NotificationSuspender`简化了（实际上删除了）try/catch 逻辑。

请注意，`class Entity`当然实际上并没有实现挂起/恢复或提供任何错误处理；这留给读者作为众所周知的练习。:)

```
using System;

namespace Demo
{
    public interface ISuspendableNotifications
    {
        void SuspendNotifications();
        void ResumeNotifications();
    }

    public sealed class NotificationSuspender: IDisposable
    {
        public NotificationSuspender(ISuspendableNotifications suspendableNotifications)
        {
            _suspendableNotifications = suspendableNotifications;
            _suspendableNotifications.SuspendNotifications();
        }

        public void Dispose()
        {
            _suspendableNotifications.ResumeNotifications();
        }

        private readonly ISuspendableNotifications _suspendableNotifications;
    }

    public sealed class Entity: ISuspendableNotifications
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }

        public void SuspendNotifications() {}
        public void ResumeNotifications() {}
    }

    public static class Program
    {
        public static void Main(string[] args)
        {
            Entity entity = new Entity();

            using (new NotificationSuspender(entity))
            {
                entity.Id = 123454;
                entity.Name = "Name";
                entity.Description = "Desc";
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:35:29.830

我可以建议

```
public class MyEntity
{
    private const int FieldsCount = 3;

    private Int32 id;
    private String name;
    private String description;

    private HashSet<string> dirty = new HashSet<string>();

    public Int32 ID
    {
        get { return id; }
        set
        {
            id = value;
            dirty.Add("id");
            GoListeners();
        }
    }

    //...

    private void GoListeners()
    {
        if (dirty.Count == FieldsCount)
        {
            //...
            dirty.Clear();
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:28:49.910

我认为这将很难，因为事件是异步触发的，但由执行线程同步处理。一种可能性是使用`AutoResetEvent`or`ManualResetEvent`并使用`WaitOne`- 方法等待`Set`释放它。
您可能需要将它与`Mutex`. 但是如果你只在一个线程上工作，这将不起作用。

请参阅[此处](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)`ManualResetEvent`和[此处](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx)。_`AutoResetEvent`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T13:29:45.013

假设您的所有事件都使用相同的签名：

1.  初始化一个委托，例如`eventQueue`在 MyEntity 实例化和一个 int 值，例如“queueRequiredLength”
2.  每个属性设置器都将其事件添加到队列中（如果尚不存在），`eventQueue += newEvent;`而不是仅仅触发事件。
3.  然后每个属性设置器检查队列的长度并触发委托（即所有排队的事件）`if(length == queueRequiredLength) {eventQueue();}`

（我不知道如何检查委托中“排队”的方法数量，但最坏的情况是你也可以只保留一个计数器并在每次添加到队列时增加它）。

# windows-7 - SignalR .NET 客户端不支持 Windows 7 上的 WebSockets

> ID：15386536
> 
> 赞同：7
> 
> 时间：2013-03-13T13:20:59.420
> 
> 标签：windows-7, signalr, .net-4.5, signalr.client

我使用 SignalR 编写了一个小型 echo-server (.net 4.5)、控制台客户端 (.net 4.5) 和 Web 客户端，示例[如下](https://github.com/SignalR/SignalR/wiki/QuickStart-Persistent-Connections)。

服务器托管在 IIS8/Win8 中。然后我在 Win7 上运行了两个客户端。我看到 Chrome 中的 Web 客户端使用 webSockets，而控制台应用程序客户端使用 serverSentEvents。如果我在 Win8 上运行控制台客户端，则 webSockets 传输正在使用中。

SignalR .NET 客户端是否仅在 Win8 及更高版本上使用 webSockets？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T17:30:19.690

没错：.NET 客户端仅在 Win8 及更高版本上使用 WebSockets。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-03T21:38:41.837

对于一个项目，我必须结合 SignalR 使用真正的 websocket 连接。

对于不支持 websocket 的 Windows 版本，您可以使用[WebSocket4Net](https://www.nuget.org/packages/WebSocket4Net/) NuGet 包和[SignalR](https://www.nuget.org/packages/Microsoft.AspNet.SignalR.Client/) IClientTransport 的以下实现。

```
using System;
using System.Linq;
using System.Threading;
using System.Threading.Tasks;
using Microsoft.AspNet.SignalR.Client;
using Microsoft.AspNet.SignalR.Client.Http;
using Microsoft.AspNet.SignalR.Client.Infrastructure;
using Microsoft.AspNet.SignalR.Client.Transports;
using SuperSocket.ClientEngine;
using WebSocket4Net;

public sealed class WebSocket4NetTransport : ClientTransportBase
{
  private IConnection _connection;
  private string _connectionData;
  private CancellationToken _disconnectToken;
  private CancellationTokenSource _webSocketTokenSource;
  private WebSocket _webSocket4Net;
  private int _disposed;

  public TimeSpan ReconnectDelay { get; set; }

  public WebSocket4NetTransport()
    : this(new DefaultHttpClient())
  {
  }

  public WebSocket4NetTransport(IHttpClient client)
    : base(client, "webSockets")
  {
    _disconnectToken = CancellationToken.None;
    ReconnectDelay = TimeSpan.FromSeconds(2.0);
  }

  ~WebSocket4NetTransport()
  {
    Dispose(false);
  }

  protected override void OnStart(IConnection connection, string connectionData, CancellationToken disconnectToken)
  {
    _connection = connection;
    _connectionData = connectionData;
    _disconnectToken = disconnectToken;

    var connectUrl = UrlBuilder.BuildConnect(connection, Name, connectionData);

    try
    {
      PerformConnect(connectUrl);
    }
    catch(Exception ex)
    {
      TransportFailed(ex);
    }
  }

  protected override void OnStartFailed()
  {
    Dispose();
  }

  public override Task Send(IConnection connection, string data, string connectionData)
  {
    if(_webSocket4Net.State == WebSocketState.Open)
    {
      _webSocket4Net.Send(data);
    }

    var ex = new InvalidOperationException("Socket closed");
    connection.OnError(ex);

    throw ex;
  }

  public override void LostConnection(IConnection connection)
  {
    _connection.Trace(TraceLevels.Events, "WS: LostConnection");

    if(_webSocketTokenSource == null)
    {
      return;
    }

    _webSocketTokenSource.Cancel();
  }

  public override bool SupportsKeepAlive
  {
    get { return true; }
  }

  protected override void Dispose(bool disposing)
  {
    if(disposing)
    {
      if(Interlocked.Exchange(ref _disposed, 1) == 1)
      {
        base.Dispose(true);
        return;
      }

      if(_webSocketTokenSource != null)
      {
        _webSocketTokenSource.Cancel();
      }

      if(_webSocket4Net != null)
      {
        DisposeWebSocket4Net();
      }

      if(_webSocketTokenSource != null)
      {
        _webSocketTokenSource.Dispose();
      }
    }

    base.Dispose(disposing);
  }

  private void DisposeWebSocket4Net()
  {
    _webSocket4Net.Error -= WebSocketOnError;
    _webSocket4Net.Opened -= WebSocketOnOpened;
    _webSocket4Net.Closed -= WebSocketOnClosed;
    _webSocket4Net.MessageReceived -= WebSocketOnMessageReceived;

    _webSocket4Net.Dispose();
    _webSocket4Net = null;
  }

  private void PerformConnect(string url)
  {
    if(_webSocket4Net != null)
    {
      DisposeWebSocket4Net();
    }

    _webSocketTokenSource = new CancellationTokenSource();
    _webSocketTokenSource.Token.Register(WebSocketTokenSourceCanceled);
    CancellationTokenSource.CreateLinkedTokenSource(_webSocketTokenSource.Token, _disconnectToken);

    // Add the header from the connection to the socket connection
    var headers = _connection.Headers.ToList();

    // SignalR uses https, websocket4net uses wss
    url = url.Replace("http://", "ws://").Replace("https://", "wss://");

    _webSocket4Net = new WebSocket(url, customHeaderItems: headers);

    _webSocket4Net.Error += WebSocketOnError;
    _webSocket4Net.Opened += WebSocketOnOpened;
    _webSocket4Net.Closed += WebSocketOnClosed;
    _webSocket4Net.MessageReceived += WebSocketOnMessageReceived;

    _webSocket4Net.Open();
  }

  private async Task DoReconnect()
  {
    string reconnectUrl = UrlBuilder.BuildReconnect(_connection, Name, _connectionData);

    while(TransportHelper.VerifyLastActive(_connection))
    {
      if(_connection.EnsureReconnecting())
      {
        try
        {
          PerformConnect(reconnectUrl);
          break;
        }
        catch(OperationCanceledException)
        {
          break;
        }
        catch(Exception ex)
        {
          _connection.OnError(ex);
        }
        await Task.Delay(ReconnectDelay, CancellationToken.None);
      }
      else
      {
        break;
      }
    }
  }

  private void WebSocketOnOpened(object sender, EventArgs e)
  {
    _connection.Trace(TraceLevels.Events, "WS: OnOpen()");

    if(!_connection.ChangeState(ConnectionState.Reconnecting, ConnectionState.Connected))
    {
      return;
    }

    _connection.OnReconnected();
  }

  private async void WebSocketOnClosed(object sender, EventArgs e)
  {
    _connection.Trace(TraceLevels.Events, "WS: OnClose()");

    if(_disconnectToken.IsCancellationRequested || AbortHandler.TryCompleteAbort())
    {
      return;
    }

    await DoReconnect();
  }

  private void WebSocketOnError(object sender, ErrorEventArgs e)
  {
    var exception = e.Exception;
    _connection.OnError(exception);
  }

  private void WebSocketOnMessageReceived(object sender, MessageReceivedEventArgs e)
  {
    var message = e.Message;

    _connection.Trace(TraceLevels.Messages, "WS: OnMessage({0})", (object)message);
    ProcessResponse(_connection, message);
  }

  private void WebSocketTokenSourceCanceled()
  {
    if(_webSocketTokenSource.IsCancellationRequested)
    {
      if(_webSocket4Net.State != WebSocketState.Closed)
      {
        _webSocket4Net.Close(1000, "");
      }
    }
  }
} 
```

要创建 websocket 客户端，请使用 try-catch 来确定应该使用哪个 websocket 实现。

```
using System;
using System.Net.WebSockets;
using Microsoft.AspNet.SignalR.Client.Transports;

public static class WebSocketTransportFactory
{
  public static IClientTransport Create()
  {
    IClientTransport clientTransport;

    try
    {
      // Test if .net websockets are supported
      // Supported since Windows 8 and newer
      var testSocket = new ClientWebSocket();

      clientTransport = new WebSocketTransport();
    }
    catch(PlatformNotSupportedException)
    {
      clientTransport = new WebSocket4NetTransport();
    }

    return clientTransport;
  }
} 
```

开始连接到 SignalR 集线器。

```
var hubConnection = new HubConnection("https://url/to/the/hub");
var clientTransport = WebSocketTransportFactory.Create();
await hubConnection.Start(clientTransport); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-23T18:20:37.937

这是一个老问题，但如果您将项目转换为自包含的 .NET 核心应用程序，您可以在 Windows 7 上将 SignalR 与 WebSockets 一起使用。

# php - 控制器删除功能错误

> ID：15386544
> 
> 赞同：0
> 
> 时间：2013-03-13T13:21:10.630
> 
> 标签：php, codeigniter

我的代码出现错误，不知道为什么。这是错误：

```
Fatal error: Call to undefined method Display::index() in 
```

这是导致错误的控制器部分：

```
 function delete(){
     $this->load->model('display_model');
     $this->display_model->delete_row();
     $this->index();

 } 
```

和模型部分，如果需要，以防万一：

```
function delete_row()
          {
             $this->db->where('QID', $this->uri->segment(3));
             $this->db->delete('tblquestions');
          } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:25:21.417

相反，您可以执行以下操作：

```
function delete(){
     $this->load->model('display_model');
     $this->display_model->delete_row();
     redirect('/controllerName/', 'refresh');
 } 
```

重定向的好处是您可以通过传递一些 id 向用户设置一些您已完成或未执行操作的消息。

```
function delete(){
     $this->load->model('display_model');
     $this->display_model->delete_row();
     redirect('/controllerName/index/1', 'refresh');
 } 
```

# c++ - 具有未调整大小的向量的图形实现 C++

> ID：15386549
> 
> 赞同：0
> 
> 时间：2013-03-13T13:21:28.437
> 
> 标签：c++, list, graph, vector

所以，我正在尝试制作一个向量图。问题是，我不知道向量的大小，它是作为输入提供给我的。我正在考虑制作一个这样的节点：

```
typedef struct node{
   my_vector v[];
   node * next;
} 
```

我可以创建一个带有矢量的节点`my_vector v[];`吗？我真的是 C++ 新手

另外，我真的不知道如何实现图表，但它与实现列表有什么不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:45:40.170

> 我可以使用 my_vector v[] 行中的向量创建一个节点吗？

如果你需要在运行时决定向量的大小，你不能使用这种声明。您必须自己分配内存，或者更好的是使用`std::vector`.

> 另外，我真的不知道如何实现图表，但它与实现列表有什么不同吗？

*列表是一个非常简单的图表，因此在理论上*存在一些相似之处。在实践中，实现会有所不同，取决于您将如何处理图表。有很多方法可以实现图，并且有很多书籍和图书馆都在处理这个主题。我建议研究对简单图形实现的数据结构的任何介绍。例如，[邻接列表](http://opendatastructures.org/versions/edition-0.1e/ods-java/12_2_AdjacencyLists_Graph_a.html)和[邻接矩阵](http://opendatastructures.org/versions/edition-0.1e/ods-java/12_1_AdjacencyMatrix_Repres.html)是一些最常见的图形表示。Boost中也有[图形库](http://www.boost.org/doc/libs/1_53_0/libs/graph/doc/index.html)，但它可能会有点矫枉过正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:31:19.180

你可以这样做：

```
template<typename T>
struct node{
   std::vector<T> v;
   node * next;
} 
```

现在您可以创建`node`包含任何类型数据的 s，如下所示：

```
node<int> myintnode;
node<double> mydoublenode; 
```

# android - getApplicationContext() 中的空指针异常？

> ID：15386552
> 
> 赞同：0
> 
> 时间：2013-03-13T13:21:32.260
> 
> 标签：android, android-context

我正在制作一个需要在继续之前找到用户的 GPS 位置的应用程序。我通过实现 LocationListener 接口来做到这一点。

```
public void onLocationChanged(Location loc) {
    // TODO Auto-generated method stub
    if(loc!=null){
        loc.getLatitude();
        loc.getLongitude();
        text = "My current location is: " + "Latitude = " + loc.getLatitude() + "Longitude = " + loc.getLongitude();
        Toast.makeText(getApplicationContext(),text, Toast.LENGTH_SHORT).show();
    }
} 
```

但是我在 getApplicationContext() 方法中得到了 NullPointerException。我也尝试了 MyClass.this，但结果相同。当我在 onCreate 中显示吐司时，吐司工作正常。我查找了与此类似的其他问题，但没有一个解决方案有效。我在 onCreate 中使用 setContentView，如下所示：

```
@Override
protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gpslocation);
} 
```

logcat 显示了这一点：

```
03-14 14:05:48.396: E/AndroidRuntime(604): FATAL EXCEPTION: main
03-14 14:05:48.396: E/AndroidRuntime(604): java.lang.NullPointerException
03-14 14:05:48.396: E/AndroidRuntime(604):  at emergency.app.MyLocationListener.onLocationChanged(MyLocationListener.java:53)
03-14 14:05:48.396: E/AndroidRuntime(604):  at android.location.LocationManager$ListenerTransport._handleMessage(LocationManager.java:227)
03-14 14:05:48.396: E/AndroidRuntime(604):  at android.location.LocationManager$ListenerTransport.access$000(LocationManager.java:160)
03-14 14:05:48.396: E/AndroidRuntime(604):  at android.location.LocationManager$ListenerTransport$1.handleMessage(LocationManager.java:176)
03-14 14:05:48.396: E/AndroidRuntime(604):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-14 14:05:48.396: E/AndroidRuntime(604):  at android.os.Looper.loop(Looper.java:137)
03-14 14:05:48.396: E/AndroidRuntime(604):  at android.app.ActivityThread.main(ActivityThread.java:4340)
03-14 14:05:48.396: E/AndroidRuntime(604):  at java.lang.reflect.Method.invokeNative(Native Method)
03-14 14:05:48.396: E/AndroidRuntime(604):  at java.lang.reflect.Method.invoke(Method.java:511)
03-14 14:05:48.396: E/AndroidRuntime(604):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-14 14:05:48.396: E/AndroidRuntime(604):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-14 14:05:48.396: E/AndroidRuntime(604):  at dalvik.system.NativeStart.main(Native Method) 
```

有人能告诉我如何克服这个吗？我是android的初学者，所以我真的需要帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:24:06.123

**使用当前上下文 (=this)**而不是应用程序范围的上下文。

```
Toast.makeText(this,text, Toast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:40:02.253

试试下面的代码

```
Handler handler = new Handler() {
    public void handleMessage(android.os.Message msg) {
        if (msg.what == 0) {
            Toast.makeText(YourActivity.this, (String) msg.obj,
                    Toast.LENGTH_SHORT).show();
        }
    };
};

public void onLocationChanged(Location loc) {
// TODO Auto-generated method stub
    if(loc!=null){
        loc.getLatitude();
        loc.getLongitude();
        text = "My current location is: " + "Latitude = " + loc.getLatitude() + "Longitude = " + loc.getLongitude();

        Message msg = new Message();
        msg.what=0;
        msg.obj= text;
        handler.sendMessage(msg);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T09:49:45.360

下面的代码在我的手机中工作，并在 Toast 中给我定位点。

```
public class LocationActivity extends Activity implements LocationListener {

Handler handler = new Handler() {
    public void handleMessage(android.os.Message msg) {
        if (msg.what == 0) {
            Toast.makeText(LocationActivity.this, (String) msg.obj,
                    Toast.LENGTH_SHORT).show();
        }
    };
};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    LocationManager locationManager = (LocationManager) this
            .getSystemService(Context.LOCATION_SERVICE);
    locationManager.requestLocationUpdates(
            LocationManager.NETWORK_PROVIDER, 0, 0, this);
}

@Override
public void onLocationChanged(Location location) {
    System.out.println("onLocationChanged :");
    if (location != null) {
        location.getLatitude();
        location.getLongitude();
        String text = "My current location is: " + "Latitude = "
                + location.getLatitude() + "Longitude = "
                + location.getLongitude();
        Message msg = new Message();
        msg.what = 0;
        msg.obj = text;
        handler.sendMessage(msg);
    }
}

@Override
public void onProviderDisabled(String provider) {
}

@Override
public void onProviderEnabled(String provider) {
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
} 
```

}

还在清单文件中添加权限。

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

# php - 将base64图像发送到服务器

> ID：15386554
> 
> 赞同：-1
> 
> 时间：2013-03-13T13:21:34.753
> 
> 标签：php, javascript, mysql, image, base64

在我的应用程序中，我需要将 base64 格式的图像发送到服务器。目前我正在做的是，我只是将base64图像字符串发送到服务器，当我从服务器检索该字符串时，我无法显示图像，我收到错误：图像损坏。发送和获取 base64 格式图像的确切方法是什么？我正在使用的代码如下：用于发送base64图像源的JS：

```
var imageObj = $("#target")[0];
var canvas = $("#preview")[0];
var context = canvas.getContext("2d");
context.drawImage(imageObj, c.x, c.y, c.w, c.h, 0, 0, canvas.width, canvas.height);
vData = canvas.toDataURL();
$('#crop_result').attr('src', vData);

function saveCroppedImage()
{
   var params='image_name='+vData;
    $.post('localhost/PHP/addImage.php',params,
    function(details){
   }, "json")
  .error(function(jqXHR, textStatus, errorThrown) {
    alert('err');
  });   
} 
```

PHP 源代码：

```
 <?php

include("config.php");

$clip_Name = $_REQUEST['image_name'];
$artist_Name ="ash";

$sql = "INSERT INTO tblImageSave (fldImageSource)
       VALUES('$base64Img')";

$retval = mysql_query( $sql, $conn );
if(! $retval )
{
  die('Could not enter data: ' . mysql_error());
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:51:22.450

700 个字符很可能不足以存储您的图像，尤其是在 Base64 编码的情况下。如果您为此列插入一个太大的值，MySQL 将默默地截断它，从而导致损坏。

解决方案：检查您可能要存储的图像的最大大小，然后相应地调整列的大小。在对列进行更改时，您可能还应该考虑将图像存储为二进制值以保护一些空间。但似乎没有本机 MySQL 函数可以帮助解决这个问题。

只是重复其他人已经提到的内容：您的代码中有一个巨大的安全漏洞。您应该采取措施防止 SQL 注入攻击。@Andreas 的链接是一个很好的起点。

# powershell - 从 Get-MailboxFolderPermission 中选择 ADRecipient.DistinguishedName 时的奇怪行为

> ID：15386556
> 
> 赞同：0
> 
> 时间：2013-03-13T13:21:39.653
> 
> 标签：powershell, exchange-server

我通过以下方式从邮箱文件夹中提取 DistinguishedNames：

```
$fldrPerm = Get-MailboxFolderPermission TestMailbox:\Folder
$fldrpermDN = @()
$fldrpermDN = foreach ($_ in $fldrperm){$_.User.ADRecipient.DistinguishedName} 
```

结果数组在打印到屏幕时包含 DistinguishedNames，但对另一个数组使用 compare-object 它将错误为 null，还会对 $fldrpermDN 的内容执行 foreach 循环，例如：

```
foreach ($u in $fldrpermDN){get-mailbox $u} 
```

将获取 Exchange 中的所有邮箱，而不是 $fldrpermDN 中包含的 DN 的邮箱。

什么会导致这种情况，我将如何解决它？蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:36:45.057

将 $_ 替换为另一个名称，它在 foreach 语句中为空。$_（当前对象）仅在脚本块内可用。

```
$fldrpermDN = foreach ($folder in $fldrperm){$folder.User.ADRecipient.DistinguishedName} 
```

# jquery - 使用 ajax、Restlet 服务器进行 Hadnling 重定向

> ID：15386559
> 
> 赞同：1
> 
> 时间：2013-03-13T13:21:47.293
> 
> 标签：jquery, login, restlet

我正在尝试登录我的 Restlet 服务器（我正在使用最新版本的 restlet）。在我的服务器上，我有一个 cookie 身份验证器来保护资源。我正在使用以下 ajax 调用：

```
$.ajax({
type: "POST",
url: http://localhost/login?targetUri=/html/business.html#5,
data: $('#login').serialize(),
success: function(data, textStatus, jqXHR) {
if (data.redirect) {
window.location.href = data.redirect;
}
}
}); 
```

正如[这个链接中提到的](https://stackoverflow.com/questions/199099/how-to-manage-a-redirect-request-after-a-jquery-ajax-call)

因为答案是 HTTP 重定向，所以浏览器会自动发送重定向地址的 GET 请求，然后 data.redirect 未定义。“数据”实际上包含重定向页面的内容。我将其更改为：

```
if (textStatus == "success") { 
document.location = jqXHR.getResponseHeader("Content-Location");
... 
```

但这最终有两个 GET 请求`/html/business.html`。处理重定向的正确方法是什么？

# vba - AS400 数据库 - 错误 - PWS98 01 - 功能被用户出口程序拒绝

> ID：15386562
> 
> 赞同：4
> 
> 时间：2013-03-13T13:21:52.433
> 
> 标签：vba, ibm-midrange

我正在尝试使用 ODBC 驱动程序和 VBA 从远程机器上的 AS400 数据库中读取数据。我可以成功建立连接，但没有一个查询返回数据。所有查询都会遇到错误“[IBM] [System i Access ODBC Driver] [DB2 for i5/OS] PWS98​​01 - 函数被库 SQLSECR0 QSYSMCD 中的用户出口程序拒绝”。请帮我...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T13:48:17.100

IBM i 端有一个安全程序（称为退出程序）拒绝您访问。您需要获得 IBM 管理员的许可。

# java - addScalar 是做什么的？

> ID：15386571
> 
> 赞同：34
> 
> 时间：2013-03-13T13:22:11.807
> 
> 标签：java, sql, hibernate, scalar

JavaDoc 说：

```
SQLQuery org.hibernate.SQLQuery.addScalar(String columnAlias, Type type)

Declare a scalar query result 
```

我知道`executeScalar`C# 中有什么，但这个标量和 C# 标量似乎完全不同。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-13T13:40:44.403

这声明您希望查询结果返回单个命名列的对象，而不是实体。例如

```
createSQLQuery("SELECT COUNT(*) AS c FROM Users").addScalar("c").uniqueResult() 
```

将返回单个`Long`. 如果您指定多个标量，结果将返回为`Object`. 它类似于，`executeScalar`除了它适用于命名列，并且可以返回复合结果。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-03-22T03:31:15.763

为了避免使用 ResultSetMetadata 的开销，或者只是为了更明确地返回返回的内容，可以使用 addScalar()：

```
session.createSQLQuery("SELECT * FROM CATS")
.addScalar("ID", Hibernate.LONG)
.addScalar("NAME", Hibernate.STRING)
.addScalar("BIRTHDATE", Hibernate.DATE) 
```

此查询指定：

```
the SQL query string
the columns and types to return 
```

这将返回 Object 数组，但现在它将不使用 ResultSetMetadata，而是从底层结果集中显式获取 ID、NAME 和 BIRTHDATE 列，分别作为 Long、String 和 Short。这也意味着只有这三列将被返回，即使查询使用 * 并且可能返回多于列出的三列。

可以省略所有或部分标量的类型信息。

```
session.createSQLQuery("SELECT * FROM CATS")
.addScalar("ID", Hibernate.LONG)
.addScalar("NAME")
.addScalar("BIRTHDATE") 
```

这与之前的查询基本相同，但现在 ResultSetMetaData 用于确定 NAME 和 BIRTHDATE 的类型，其中明确指定了 ID 的类型。

[从此](https://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html#d0e13646)复制。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-13T15:14:11.040

`addScalar`是 SQL 查询中给定键的 returnType 信息。

例子：

```
Query a = new SqlQuery("Select username as un from users where ...");
a.addScalar("un", String); 
```

如果您查询结果，如果您指定，结果将是字符串或其他类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-12T07:20:42.957

当您的 bean 具有多个具有不同类型的字段并且您希望从 mysql 获取相同类型的这些字段时使用此选项。例如。

```
public class Example { Long id; String name; } 
```

您可以按如下方式使用添加标量

```
session.createSQLQuery("SELECT * FROM tableName")
.addScalar("id", Hibernate.LONG)
.addScalar("name", Hibernate.STRING); 
```

# javascript - 下拉值选择

> ID：15386572
> 
> 赞同：1
> 
> 时间：2013-03-13T13:22:11.970
> 
> 标签：javascript, jquery, html

我在 html 中有下拉列表，其值为 a、b、c、d

我想提交一份关于选择值的表格。

我知道我可以使用

> 。改变（）

方法。

但是，如果我每次都选择相同的值，它将不起作用。

我努力了

> 。点击（）

但它在 Chrome 中不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:03:15.410

由于您的要求是您需要能够获得相同的选定值，您可以试试这个。这很丑陋，但它会完成工作。

```
$("select").mousedown(function() {

}); 
```

请记住，这将在您每次单击列表时触发。我强烈建议修改要求，在列表顶部添加一个空白选项作为默认选项。

# python - 如何使用 python 脚本控制 TPLINK 路由器

> ID：15386582
> 
> 赞同：6
> 
> 时间：2013-03-13T13:22:45.947
> 
> 标签：python, ssh, router, reboot

我想知道是否有一个工具可以让我连接到路由器并关闭它，然后从 python 脚本重新启动它。

我知道，如果我写：

```
import os
os.system("ssh -l root 192.168.2.1") 
```

我可以通过 python 连接到我的路由器。但是，我不知道如何应用路由器的密码，并登录它，以便重新启动它。

因此，在稍微处理之后，这里是我编写的代码，以便使用 python 脚本通过 SSH 会话连接到我的路由器：

```
import os, urllib, urllib2, re

def InterfaceControl():
    #os.system("echo training")
    os.system("ssh -l root 192.168.2.1")
    os.system("echo yes")
    os.system("echo My_ROUTER_PASSWORD")
    os.system("shutdown -r")

def main():
    InterfaceControl()

if __name__=="__main__":
    main() 
```

问题是我仍然无法使用这段代码连接到我的路由器，而且，IDLE（我用于 python 脚本的编辑器）崩溃了。谁能帮我改进这段代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-11-30T04:14:22.207

这取决于您的 tplink 设备型号和固件，因为身份验证算法因型号而异。

我编写了这个 python 脚本，它适用于我的 tp 链接 W740N。该代码解释了如何使用请求包在此设备上进行身份验证

```
#!/usr/bin/python3
# imports
from requests import get
from base64 import b64encode
from urllib.parse import quote

# constants
tplink = '192.168.0.1'
user = 'admin'
password = 'admin'
url_template = 'http://{}/userRpm/SysRebootRpm.htm?Reboot=Reboot'

if __name__ == '__main__':
    auth_bytes = bytes(user+':'+password, 'utf-8')
    auth_b64_bytes = b64encode(auth_bytes)
    auth_b64_str = str(auth_b64_bytes, 'utf-8')

    auth_str = quote('Basic {}'.format(auth_b64_str))

    auth = {
    'Referer': 'http://'+tplink+'/', 
    'Authorization': auth_str,
    }

    reboot_url = url_template.format(tplink)

    r = get(reboot_url, headers=auth) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-11T07:50:08.957

我认为您可以查看路由器管理页面并查看它发送的帖子参数。在脚本中，您可以模仿相同的内容。

我认为大多数路由器都使用基于 https 的基本身份验证。

编辑：找到这个。

```
wget -qO- --user=admin --password=admin-password http://192.168.1.2/userRpm/SysRebootRpm.htm?Reboot=Reboot 
```

来源：http : [//blog.taragana.com/old-code-how-to-reboot-tp-link-router-11849](http://blog.taragana.com/old-code-how-to-reboot-tp-link-router-11849)

我的 wget 手册告诉我 -q 是为了安静。不知道0-是什么。你也可以用 curl 做类似的事情。注意：一些 tp-link 设备需要发送 referer 头。以 curl 为例，`-H 'Referer: http://192.168.0.1'`

我可以使用以下代码在 python 中做同样的事情。

```
from urllib.request import urlopen, Request
import base64
req = Request('http://192.168.0.1/userRpm/SysRebootRpm.htm?Reboot=Reboot')
req.add_header('Authorization', ('Basic %s' % base64.b64encode('uname:pass'.encode('ascii')).decode('ascii')))
req.add_header('Referer', 'http://192.168.0.1')
urlopen(req) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-25T08:42:21.737

我认为对于一个新的固件版本，你需要 `referer`和`user-agent`工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-30T08:44:20.733

A few options I have found, depending on the specific device (I couldn't find any documentation for the API anywhere, so I guess all of these come from individuals reverse-engineering for their own needs):

*   [menahishayan/TP-Link-Archer-C50-API](https://github.com/menahishayan/TP-Link-Archer-C50-API) is the clearest structure, showing the cgi commands and payloads for the commands that are implemented. Starting from [the main definitions in **init**.py](https://github.com/menahishayan/TP-Link-Archer-C50-API/blob/master/tplinkrouter/__init__.py) as a model, I used Wireshark to capture the API interactions when I use the web interface, I was able to implement the commands that I needed quite quickly.
*   [epsi95/TPLink-Python](https://github.com/epsi95/TPLink-Python) is easy to use and shows the command flow. I used it to double-check the headers I was sending (I had missed referer which is needed). It didn't work for my router (Archer C2), returning HTTP status 500.
*   [tplink-wr-api](https://pypi.org/project/tplink-wr-api/) seems to be another candidate, but I didn't get any extra information there for my router.

It is important to complete all commands within one Python [requests.session](https://docs.python-requests.org/en/latest/user/advanced/#session-objects) session, and make sure to implement your router's 'logout' functionality at the end of each interaction before closing the session. If you don't (at least on the C2), you won't be able to run further commands or log in to the web interface without waiting for a timeout or resetting the router. Instead, HTTP status 403 is returned from cgi commands and you will get a message on the web interface that only one administrator can log in at a time.

# javascript - 标准功能在 Web Worker 中不起作用

> ID：15386585
> 
> 赞同：0
> 
> 时间：2013-03-13T13:22:51.557
> 
> 标签：javascript, html, web-worker

我正在尝试在我的应用程序中实现网络工作者，但由于某些原因，功能类似于未定义的`alert`控制台`error`。

我的网络工作者代码：

```
AJAX = new XMLHttpRequest();

AJAX.open("GET", 'Record/fetchEntity', true);
AJAX.send();

var result = AJAX.responseText;
console.log(result); // Errors with 'console is not defined'.
self.postMessage(result); 
```

顺便说一句，`result`是一个对象数组。这会像我这样做的方式传回给主人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:31:59.127

Web 工作者无法直接访问浏览器或 DOM。[在 MDN 文档中](https://developer.mozilla.org/en-US/docs/DOM/Worker/Functions_available_to_workers)列出了他们可以访问的特定浏览器相关功能子集

*   atob()
*   btoa()
*   清除间隔（）
*   清除超时（）
*   倾倒（）
*   设置间隔（）
*   设置超时（）
*   XMLHttpRequest()
*   工人（）

除此之外，他们只能访问核心的标准 JS 功能和一些额外的工作人员的东西

*   导入脚本（）
*   文件阅读器同步（）

# c# - 快速编写包含列表的方法，listitem 是一个向量

> ID：15386587
> 
> 赞同：3
> 
> 时间：2013-03-13T13:22:59.563
> 
> 标签：c#

我有给定的 listitem 类：

```
class Vector
{
    public int Column { get; set; }
    public int Row { get; set; }
    public int TableID { get; set; }

    public Vector(int column, int row, int tableID)
    {
        TableID = tableID;
        Row = row;
        Column = column;
    }
} 
```

后来我有一个这些项目的类型列表，我想知道给定的向量（列、行、表）是否已经添加到这个列表中。当然简单的解决方案：

```
 var items = new List<Vector>();
    items.Add(new Vector(1, 2, 3));
    items.Add(new Vector(5, 6, 7));

    for (int i = 0; i < 1000; i++)
    {
        if (items.Any(e => e.Column == 1 && e.Row == 2 && e.TableID == 3))
        {
            // do something
        }
    } 
```

是的，它正在工作，但是......我担心随着列表中越来越多的项目它会呈指数级增长，因为你必须枚举所有项目才能找到匹配的项目。

最后我的问题是：

你能推荐其他数据结构来允许“快速包含”吗？我的意思是至少线性算法。任何都可以，我只需要存储 3 个相关的 int 并稍后检查容器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T13:26:12.920

您可以`IEquatable<T>`为您的类（方法`public bool Equals(T other)`和`public override int GetHashCode()`）实现接口并使用 HashSet 来存储唯一项：

```
class Vector :  IEquatable<Vector>
{
    /*Some fields and methods*/

    public bool Equals(Vector other)
    {
        if (ReferenceEquals(other, null)) return false;

        if (ReferenceEquals(this, other)) return true;

        return Column.Equals(other.Column) && Row.Equals(other.Row) && TableID.Equals(other.TableID);
    }

    public override int GetHashCode()
    {
        return Column.GetHashCode() ^ Row.GetHashCode() ^ TableID.GetHashCode();
    }
} 
```

并使用哈希集：

```
var set = new HashSet<Vector>();
    var vect = new Vector { ... };
set.Add(vect); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T13:39:46.703

> 你能推荐其他数据结构来允许“快速包含”吗？

由于所有向量都必须是唯一的，因此您可以使用 a`HashSet<Vector>`并实现适当的方法`GetHashCode`和`Equals`：

```
class Vector 
{
    public int Column { get; set; }
    public int Row { get; set; }
    public int TableID { get; set; }

    public Vector(int column, int row, int tableID)
    {
        TableID = tableID;
        Row = row;
        Column = column;
    }

    public override int GetHashCode()
    {
        unchecked 
        {
            int hash = 17;
            hash = hash * 23 + Column.GetHashCode();
            hash = hash * 23 + Row.GetHashCode();
            hash = hash * 23 + TableID.GetHashCode();
            return hash;
        }
    }

    public override bool Equals(object obj)
    {
        if (obj == null || !(obj is Vector)) return false;
        Vector v2 = (Vector)obj;
        return Column == v2.Column && Row == v2.Row && TableID == v2.TableID;
    }
} 
```

在我看来，这应该足够快。

```
HashSet<Vector> items = new HashSet<Vector>();
bool isNew = items.Add(new Vector(1, 2, 3));
isNew = items.Add(new Vector(5, 6, 7));
isNew = items.Add(new Vector(5, 6, 7)); // false 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T13:31:14.733

这听起来接近完美的用例`System.Collections.Generic.HashSet`（如果您使用的是 .Net 4.0 或更高版本）。

您需要在您的类上实现 IEquatable，并且对您的 GetHashCode 实现要小心，因为三个组件的简单异或可能会导致大量哈希冲突，例如第 1 行第 2 列和第 2 行第 1 列同一张桌子总是会发生碰撞；查看 CRC32 算法以获取有关如何做得更好的提示。

或者，实现相同结果的一种快速而肮脏的方法是让您`Vector`继承自`Tuple<int, int, int>`并让友好的命名属性成为 的代理`Item1`，`Item2`并且`Item3`- 微软已经担心实现一个好的散列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T13:26:29.033

一种方法是从值构造一个键或散列，并使用它将向量存储在散列表中。

另一种方法是对数组进行排序，然后使用二进制方法作为 contains，它为 contains 方法提供 log(n) 而不是线性 n。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T13:28:19.297

您可以尝试使用哈希表，如果正确实施，访问时间是恒定的（在完美世界中）或使用有序二叉树，查找值的最大步骤数是 log base 2 n 其中 n 是元素数，并且对数的结果被四舍五入，在现实生活中，它的大部分时间都比对数结果的步数少，这是正确的，前提是它被正确实现并且你有一个平衡的二叉树

哈希表比二叉树更快但更难实现，所以由你决定

# javascript - 资产管道仅编译 Javascript 文件

> ID：15386591
> 
> 赞同：1
> 
> 时间：2013-03-13T13:23:03.710
> 
> 标签：javascript, ruby-on-rails-3, ruby-on-rails-3.2, asset-pipeline

```
bundle exec rake assets:precompile 
```

它编译资产并将它们移动到 public/assets/ 现在假设我已经编译了资产并部署在生产环境中，现在我回到我的本地机器并更改了一些 javascript 文件中的两行现在我必须在部署生产环境时再次运行该任务。

我希望它不应该编译 css，因为我没有对 css 进行任何更改。有没有只编译javascript的命令

像这样

```
bundle exec rake assets:precompile --javascript 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:15:43.180

试试这个宝石。 [http://rubygems.org/gems/turbo-sprockets-rails3](http://rubygems.org/gems/turbo-sprockets-rails3) 它检查哪个文件被更改并加速预编译。

# codeigniter - 每个表超过 1 个对象类型

> ID：15386592
> 
> 赞同：-1
> 
> 时间：2013-03-13T13:23:04.253
> 
> 标签：codeigniter, codeigniter-datamapper

我开发了一个调度应用程序，其中有一个名为“users”的表和 dm 类，到目前为止，我已经存储了有关系统中所有用户的所有信息。所有用户都是内部用户。

现在我也需要为外部用户（客户）实现登录功能。

我的问题：我现在想使用我的表用户，只需添加一个枚举字段“user_type”（内部/外部）。

然后我想创建一个名为 internal_user 的 datamapper 对象和另一个名为 exernal_user 的对象。

当我跑步时

```
$external_user = new External_user();
$external_user->get(); 
```

我只想获取用户表中 user_type = external 的行。是否可以使用 datamapper 以一种很好的方式实现？

更新：

我通过覆盖 Datamapper 类中的 get 方法解决了这个问题，如下所示：

```
class Internal_user(){
    [...]
    function get()
    {
        $this->where('type', 'internal');
        return parent::get();
    }
} 
```

现在这一行：

```
$internal_user->get(); 
```

仅返回我的 user_type 字段中值为 internal 的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:36:01.193

如果您想使用 CI_Model 中的单个扩展模型来实现这一点，那么您可以在扩展模型中使用两种方法。

1.  get() - 在基本模型（继承 CI_Model）中，您可以像这样更改函数参数的位置

    ```
    $this->db->select(array('col1', 'col2'));

    $this->db->where(array('type' => 'internal', 'othercondn' => value));    

    return $this->db->get(tablename)->result(); 
    ```

2.  get_external() - 在这个模型（继承 BaseModel）中，你可以像这样更改函数参数的位置

    ```
    $this->db->select(array('col1', 'col2'));

    $this->db->where(array('type' => 'internal', 'othercondn' => value));

    return $this->db->get(tablename)->result(); 
    ```

# android - android：如何将具有共享用户 ID 的应用程序更新为没有共享用户 ID 的版本

> ID：15386595
> 
> 赞同：4
> 
> 时间：2013-03-13T13:23:15.820
> 
> 标签：android, manifest, upgrade

在开发 android 应用程序时，我们在以下描述的情况下在升级过程中发现了以下问题：

·版本 < 1.0 没有在清单中声明 android:sharedUserId ·高于 1.0 (1.X) 的版本在清单中声明了 android:sharedUserId。

问题是我们发现版本 1.0 之前的用户无法将应用程序更新到任何版本 >= 1.0，因为共享用户不兼容

所以我们想做一个新的构建删除 sharedUserId 以允许他们升级。但是我们还有另一个问题：如果我们删除共享用户 ID，我们发现 1.0 版本的用户将来将无法更新到较新的 1.X 版本，因为安装失败。

我们如何统一升级过程？实现这一目标有什么技巧吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T13:27:17.293

没有技巧，它只是事物的设计方式（出于安全原因）。共享用户 ID 状态错误的用户可以通过首先卸载当前的 apk，然后重新启动他们的设备来解决问题（尽管我偶尔会看到不需要重新启动）。

因此，我*总是*定义一个共享的用户 ID，即使我通常认为我不需要它。

# visual-studio-2010 - 可以选择性地清除 Visual Studio 警告消息吗？

> ID：15386598
> 
> 赞同：1
> 
> 时间：2013-03-13T13:23:21.737
> 
> 标签：visual-studio-2010, visual-studio-2012, compiler-warnings

有什么方法可以清除 Visual Studio 2010（或 2012）中的某些警告消息。在某些情况下，VS 抱怨给定的 CSS 属性是未知的，即使这些属性适用于某些浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:32:18.117

如[msdn](http://msdn.microsoft.com/en-us/library/2c8f766e%28v=vs.100%29.aspx)中所述，您可以使用

```
#pragma warning( disable : number_of_the_warning ) 
```

[在这里](http://msdn.microsoft.com/en-us/library/23k5d385%28v=vs.100%29.aspx)，您可以找到默认关闭的编译器警告列表。

# python - 从字符串末尾删除 .pdb

> ID：15386600
> 
> 赞同：0
> 
> 时间：2013-03-13T13:23:25.483
> 
> 标签：python, string

我有一个字符串，它可以是任何名称，后跟`.pdb`or `PDB`。无论如何我可以在同一行代码中删除`pdb`or吗？`PDB`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:28:57.870

在不知道您试图解决什么问题的情况下，我只能给您一些**提示**：

你应该看看：

*   [替换（](http://docs.python.org/2/library/stdtypes.html#str.replace)）方法
*   [os.path.splitext(](http://docs.python.org/2/library/os.path.html?highlight=os.path#os.path.splitext) )方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:37:28.590

另一种可以提供更大灵活性的方法是使用正则表达式替换，例如：

```
re.sub(r'\.(pdb|PDB)',
       r'',
       filename); 
```

或者，`(?i)`语法使整个正则表达式不区分大小写：

```
re.sub(r'(?i)\.pdb',
       r'',
       filename); 
```

# android - 当手指离开Android中的当前视图时，如何停止接收运动事件的x，y坐标？

> ID：15386601
> 
> 赞同：1
> 
> 时间：2013-03-13T13:23:28.657
> 
> 标签：android, view, motionevent

![在此处输入图像描述](../Images/af6d5f496f5df2357265b02a4dc2de1c.png)

我已经`onTouchListener`在屏幕的蓝色部分设置了。只有当手指触摸它时，它才会获得 x,y 坐标。白色部分根本不做任何事情。问题是，如果一开始手指触摸蓝色部分，当它“移出”到白色部分时，它仍然继续获取x，y坐标。理想情况下，我希望设备在手指离开屏幕时停止检测运动事件。希望你能帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:50:35.060

最简单的解决方案是通过简单地将其 x,y 坐标与视图边界矩形进行比较来检查您的手指是否正在触摸视图。然后，您可以通过从 dispatchTouchEvent 返回 false 来停止接收事件。

编辑：

```
@Override
public boolean dispatchTouchEvent(MotionEvent event) {
    Rect outRect = new Rect();
    getDrawingRect(outRect);
    if (outRect.contains((int) event.getX(), (int) event.getY())) {
        return true; // I want more events
    } else {
        return false; // stop events until next ACTION_DOWN on me
    }
} 
```

# c++ - 链接器找不到函数定义，LNK2001 未解析的外部符号

> ID：15386602
> 
> 赞同：0
> 
> 时间：2013-03-13T13:23:30.133
> 
> 标签：c++, visual-studio-2010, visual-studio, linker, unresolved-external

这是我的简单设置：（我隐藏了很多不需要的信息）

```
//AutoFocusTest.h
#include "camAVTEx.h"

class CAutoFocusTestApp : public CWinApp
{
protected:
    camera_t* mCamera;

public:
    virtual BOOL InitInstance();
};

//camAVTEx.h
class camera_avtcam_ex_t : public camera_t
{
public:
    camera_avtcam_ex_t();
    virtual ~camera_avtcam_ex_t();

    //member variables

    //member function declarations
}

//camAVTEx.cpp
#include "camAVTEx.h"

camera_avtcam_ex_t::camera_avtcam_ex_t()
{
    //stuff
}

camera_avtcam_ex_t::~camera_avtcam_ex_t()
{
    //stuff
}

//the rest are defined here in my program

//AutoFocusTest.cpp
#include AutoFocusTest.h

BOOL CAutoFocusTestApp::InitInstance()
{
    mCamera = new camera_avtcam_ex_t();
} 
```

此设置会产生错误：

> 3>AutoFocusTest.obj : 错误 LNK2001: 无法解析的外部符号 "public: __cdecl camera_avtcam_ex_t::camera_avtcam_ex_t(void)" (??0camera_avtcam_ex_t@@QEAA@XZ)

从我读到的关于这个相对常见的问题的所有内容中，我没有链接导致我的 camera_avtcam_ex_t 函数定义找不到的东西。但是，我无法弄清楚我可能错过了什么。我已添加所有包含目录和库目录，并将库文件添加到附加依赖项部分。

谁能发现我可能遗漏的任何东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:27:48.307

假设您已经为**定义**了构造函数`camera_avtcam_ex_t`，它被**声明**为`private`，您无法实例化它。

# python - lxml 清理器忽略 base64 图像

> ID：15386605
> 
> 赞同：0
> 
> 时间：2013-03-13T13:23:34.807
> 
> 标签：python, security, lxml

我使用 lxml.html.clean 删除我的 html 代码中不受信任的输入。我意识到 lxml 删除了`data:`我的代码中的标签。但是我想插入 base64 格式的图像（来自数据库，我没有文件）所以我需要这个标签。例如采取

```
from lxml.html.clean import Cleaner
cleaner = Cleaner()
cleaner.clean_html("""
    <img src="http://test.com/img.png"/>
    <img src="data:image/png;base64,aGVsbG8="/>
""") 
```

结果是`'<span><img src="http://test.com/img.png"><img src=""></span>'`。第一个图像没有转义，第二个是。

知道如何让它接受我的 base64 代码而不让漏洞通过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:54:28.397

安装 lxml 3.1.0 后，我能够重现这种行为。这是基于“猴子补丁”的解决方案 - 替换`lxml.html.clean`模块中的查找正则表达式模式以排除具有 data:image/.*;base64 的链接从删除中。

```
import re
import lxml
from lxml.html.clean import Cleaner
new_pattern = '\s*(?:javascript:|jscript:|livescript:|vbscript:|data:[^(?:image/.+;base64)]+|about:|mocha:)'

print(new_pattern)

lxml.html.clean._javascript_scheme_re = re.compile(new_pattern, re.I)

cleaner = Cleaner()
dochtml = """
    <img src="http://test.com/img.png"/>
    <img src="data:image/png;base64,aGVsbG8="/>
    <img src="data:unsafe/contents;base64,aGVsbG8="/>
    <img src="data:text/html;base64,PGh0bWw+PHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPmFsZXJ0KC‌​doaScpPC9zY3JpcHQ+PC9odG1sPg=="/>
"""
r = cleaner.clean_html(dochtml)
print(r) 
```

结果

```
<span><img src="http://test.com/img.png">
    <img src="data:image/png;base64,aGVsbG8=">
    <img src="">
    <img src="">
</span> 
```

它的缺点 - 它依赖于内部变量名称，该名称未在 Cleaner 的公共接口中公布。因此模块开发人员可以更改变量的名称或改进他们的正则表达式版本。

为了安全起见，我将在 Web 服务器上创建 URL 处理程序，以通过 id 从数据库中返回图像内容。所以在你的 html 文档中它会是这样的`<img src="http://myserver/showimg?id=123213">`。但这将涉及添加许多额外的移动部件——比如拥有网络服务器等。如果不希望全世界都可以访问这些图像，它也将不起作用。

***老答案：***

应该可以配置 Cleaner 以保留这些标签，但我无法重现您的情况 - 它只对我有用。我正在使用 python 2.7.2 和 lxml 2.2.8 win-32。请澄清你有什么 python 和 lxml 版本？

我尝试运行您的示例并取回未删除的第二个图像标签内容

# rest - 当 PATCH 可以有效地做同样的事情时，PUT 的意义何在

> ID：15386606
> 
> 赞同：3
> 
> 时间：2013-03-13T13:23:35.970
> 
> 标签：rest

据我了解，如果完全遵循 HTTP 规范，如果您正在执行 PUT 命令，则需要传入资源的所有数据（无论它是否更改），而在执行 PATCH 命令时，您只需传入数据这正在改变。因此，如果我有一个要更改它的每个值的资源，那么 PUT 和 PATCH 命令将具有相同的请求，除了正在使用的 HTTP 动词。

从后端的角度来看，我发现很难找到一个可行的理由来为 PUT 和 PATCH 提供不同的功能。我现在正在构建的 REST API 支持这两种方法，但是它们指向相同的代码，并且代码实际上只是做了一个 PATCH，因为它不请求资源的所有数据，只是请求更改的数据。我想有一个非常好的理由必须为我的所有资源维护一个单独的 PUT 代码路径，因为这增加了代码维护。

当 PATCH 的代码也可以真正执行 PUT 时，是否有任何理由真正为 PUT 和 PATCH 提供不同的功能（除了您应该遵循规范，因为在这种情况下我认为这不是一个很好的理由）？

让 PUT 和 PATCH 只接受资源的更改数据列表是否被认为是不好的做法或可以接受？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:01:16.573

尽管这两个动词看起来很相似，但在使用其中一个动词时应该考虑到小的、主要是语义上的差异。

*   PUT 是幂等的，PATCH 不是，这意味着一系列相同 PUT 请求的副作用与单个请求的副作用相同。对于 PATCH 来说，情况并非如此，即使它*可以*被*强制*为幂等。

*   可以在需要首先了解资源的服务器端状态的方式使用 PATCH。这使得冲突比 PUT 请求更“危险”，因为如果您将操作基于同时已经更改的点/状态，您可能会损坏资源。它代表客户处理此类案件。这对于附加列表项之类的简单操作不是必需的（因为之前的状态无关紧要）。

*   与 PUT 不同，PATCH 与其修改的资源不属于同一实体。它只描述了某种增量，而不是资源的完整表示。因此，当您说“...如果我有一个资源要更改它的每个值，那么 PUT 和 PATCH 命令将具有相同的请求，除了正在使用的 HTTP 动词”。这也意味着，PATCH 的文档大小不一定比您将与 PUT 一起使用的整个资源数据小。

*   > “预计不同的补丁文件格式将

> 适用于不同类型的资源，并且没有一种格式适用于所有类型的资源。因此，没有实现需要支持的单一默认补丁文档格式。服务器必须确保收到的补丁文档适合 [请求的] 资源类型” - [RFC 5789](https://www.rfc-editor.org/rfc/rfc5789)

*   PUT 和 PATCH 之间的比较并不像看起来那么简单，因为您还应该考虑 POST，因为 POST 也可以用于部分修改。

*   目前，PATCH 只是一个提案，还没有完全/官方标准化。

因此，如您所见，PUT 和 PATCH 之间存在一些差异。有时，能够准确地描述资源的变化可能很重要，因此肯定有适合 PATCH 的用例。我认为提供两者是个好主意，但请注意它们并不完全相同。使用 PATCH 进行实际/部分更新，使用 PUT 更新整个资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T00:13:06.780

PUT 和 PATCH 的区别在于 PUT 要求服务器完全忽略当前状态，而 PATCH 要求服务器在应用有效负载之前考虑当前状态。

您认为没有区别，因为您使用 PATCH 来更新部分表示，传递正在更改的数据。这不是它的工作原理。PATCH 应该使用 diff 格式，明确显示您正在应用更改的当前状态以及结果状态。

例如，在 JSON API 中，您希望`email`使用补丁更新参数。当前的电子邮件是 myemail@example.com。你不应该只发送：

```
{'email': 'mynewemail@example.com'} 
```

您必须发送如下内容：

```
{'old_email': 'myemail@example.com', 'new_email': 'mynewemail@example.com'} 
```

该格式可能由您设计，或者您可以采用标准化的差异格式，具体取决于您的需要。有一个 RFC 提案，要求在这些情况下使用标准[JSON 补丁格式。](https://www.rfc-editor.org/rfc/rfc6902)

PUT 的用例是当您需要完全替换某些内容时，完全忽略其中的任何内容（如果有的话）。例如，正在更新其个人资料的用户。无论他做什么，您都希望保留最新版本，而忽略以前存在的任何内容。

PATCH 的用例是当您需要更新某些内容时，同时考虑当前状态，并且仅当它仍然与您上次检查时的状态匹配时。例如，您需要标记某个用户拖欠付款，但在工作开始和实际请求之间，该用户实际付款并且他的个人资料已由您的 API 的另一个客户端更新。如果您通过发送带有 PUT 的完整表示将他的帐户标记为未付款，您将覆盖表明他已付款的数据。如果您使用 PATCH 进行更新，则仅当用户仍处于您之前看到的未付费状态时才会应用请求。

要回答您的最后一个问题，使用 PUT 进行部分更新是不可接受的。PUT 请求是一个完整的替换。

# r - 如何使用 R 下载历史数据？

> ID：15386617
> 
> 赞同：-1
> 
> 时间：2013-03-13T13:24:18.273
> 
> 标签：r, trading

我正在寻找一个包来下载**期货**的历史数据（*无库存数据*）。

有人可以建议我一些好的 R 包吗？

谢谢！

PS我知道有很多包，但它们似乎只检索股票价格，而不是期货。我只需要期货。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:01:03.457

没有免费的期货数据来源。至少不全面。

您可以在 R-Forge 上查看“FinancialInstruments”包的源代码，尤其是这个文件

[https://r-forge.r-project.org/scm/viewvc.php/pkg/FinancialInstrument/inst/parser/download.tblox.R?view=markup&root=blotter](https://r-forge.r-project.org/scm/viewvc.php/pkg/FinancialInstrument/inst/parser/download.tblox.R?view=markup&root=blotter)

它将下载[TradingBlox](http://www.tradingblox.com)每天发布的精选期货的历史数据。请注意，此数据是回溯调整的连续合约数据，是使用 TradingBlox 自己的回溯调整方法创建的。

在付费来源中，[CSI 数据](http://www.csidata.com/)对小型交易者定价合理，可以提供多种格式的数据，并允许您自定义回调整逻辑。

有一个有趣的[Quandl](http://www.quandl.com/futures)项目，但我真的没有看到它在很多地方被提及或测试过数据的准确性。

# android - How to keep the textbox values in the listview while listview get refreshed?

> ID：15386618
> 
> 赞同：0
> 
> 时间：2013-03-13T13:24:27.750
> 
> 标签：android, android-listview, android-edittext

I have a list view and each row containing a `TextView` and `EditText` . while click in the `EditText` box soft key board gets open and i'm entering the value. After that while pressing back button to close the key board my list view gets refreshed and all the values entered in `EditText` also gone.

Please help me how to keep the values while key board gets closed?

```
if (ConvertViewP == null) {
            LayoutInflater inflater = (LayoutInflater) mContextL.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            ConvertViewP = inflater.inflate(R.layout.add_cart_row_layout, ParentP, false);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:32:56.233

我建议你使用 SharedPreferences：

[共享首选项](http://developer.android.com/reference/android/content/SharedPreferences.html)

通过离开应用程序将值写入您的首选项，并在您启动/进入应用程序时将它们写回。

对我来说真的很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:54:25.560

您可以将其全部保存在一个变量中。例如在你的有一些哈希图`ListActivity`

```
Map<Integer, String> mHashMap = new HashMap<Integer, String>(); 
```

其中*键是***列表项**的位置，*值*是输入到其中的文本，**这**`EditText`要归功于在其上设置的侦听器。（[在 EditText 中计数字符已更改侦听器](https://stackoverflow.com/questions/4310525/android-on-edittext-changed-listener)）。并且`ListAdapter.getView(int position, View convertView, ViewGroup parent)`您将使用`mHashMap`并将按位置获取值（`EditText`如果有）。

如果您想在屏幕方向更改期间保留这些值，您可以轻松做到，因为`Map`可以`Parcelable`添加到`Bundle`（[使用 Save Instance State 保存 Android Activity 状态](https://stackoverflow.com/questions/151777/saving-activity-state-in-android)，[Bundle 中的 Android HashMap？](https://stackoverflow.com/questions/11452859/android-hashmap-in-bundle)）

# linux - 菜单的 Shell 脚本

> ID：15386623
> 
> 赞同：2
> 
> 时间：2013-03-13T13:24:39.063
> 
> 标签：linux, bash, shell, menu

我正在 linux 中制作一个新的菜单驱动 Shell 脚本，我已将我的表格简化为 hello and bye 以使其更简单，下面是我的基本菜单布局

```
# Menu Shell Script
#
echo ----------------
echo     menu
echo ----------------
echo [1] hello
echo [2] bye
echo [3] exit
echo ---------------- 
```

基本上我有菜单，我最近一直在玩一些东西，但似乎无法让任何工作，因为我是新手，我想下一行将是

```
`read -p "Please Select A Number: " menu_choice` 
```

但我不确定如何处理变量，而不知道如何处理。我想知道是否有人可以帮助我编写下一段代码，以便在我按下 1 时简单地让它打个招呼，当按下 2 时再见，当用户按下 3 时退出 3。我将不胜感激几天来一直在尝试不同的方法，但似乎无法让它发挥作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:37:32.163

你不需要那些反引号`echo...`和`read`

```
echo "----------------"
echo "    menu"
echo "----------------"
echo "[1] hello"
echo "[2] bye"
echo "[3] exit"
echo "----------------"

read -p "Please Select A Number: " mc
if [[ "$mc" == "1" ]]; then
    echo "hello"
elif [[ "$mc" == "2" ]]; then
    echo "bye"
else
    echo "exit"
fi 
```

**编辑**

```
showMenu(){

echo "----------------"
echo "    menu"
echo "----------------"
echo "[1] hello"
echo "[2] bye"
echo "[3] exit"
echo "----------------"

read -p "Please Select A Number: " mc
return $mc
}

while [[ "$m" != "3" ]]
do
    if [[ "$m" == "1" ]]; then
        echo "hello"

    elif [[ "$m" == "2" ]]; then
        echo "bye"
    fi
    showMenu
    m=$?
done

exit 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:29:54.937

这是一个示例

```
if [ $menu_choice -eq 1 ]
then
    echo hello
elif [ $menu_choice -eq 2 ]
then
    echo bye
elif [ $menu_choice -eq 3 ]
then
    exit 0
fi 
```

或使用案例

```
case $menu_choice in
    1) echo hello
       ;;
    2) echo bye
       ;;
    3) exit 0
       ;;
esac 
```

# jquery - Jquery makeArray

> ID：15386624
> 
> 赞同：0
> 
> 时间：2013-03-13T13:24:40.910
> 
> 标签：jquery, arrays

I have this function which works fine except for updating the gallery information... but when i paste the code snippet in the console (chrome developer tool) it works just fine.. Here is what i paste in the console:

```
var obj = $('.item_info'),
arr = $.makeArray(obj);
$(".gallery-info").html(arr[0]); 
```

Here is the complete function.

```
setTimeout(function() { 
// If it is the about us page
if($(".page-id-7").length < 1) {
// if it has bullets
    if($(".rsBullets").length) {
        // move the bullets html
        $(".slider_down .pull-right").addClass("rsUni").prepend($(".rsNav"));       
    }
}
// if page has thumbnails
if($(".rsThumbs").length) {
    // get the slider
    var slider = $(".royalSlider").data('royalSlider');
    // move the thumbnail html
    $(".footer .container-fluid").addClass("rsUni").prepend($(".rsNav"));
    $(".rsNav").toggle();
    // get all divs with the class item-info in an array
    var obj = $('.item_info'),
        arr = $.makeArray(obj);
    // set the gallery-info html to the first item in the array
    $(".gallery-info").html(arr[0]);
    $("#slider_prev").click(function() {
        slider.prev();
    });
    $("#slider_next").click(function() {
        slider.next();
    });
    var curId, totalSlides = slider.numSlides;
    $("#slide_count").html("1 OF "+totalSlides);
    // after slider change
    slider.ev.on('rsAfterSlideChange', function(event) {
        curId = slider.currSlideId + 1;
        // update the count
        $("#slide_count").html(curId+" OF "+totalSlides);
        // update the gallery info to the current item
        $(".gallery-info").html(arr[slider.currSlideId]);
    });
    $(".royalSlider").height("640");
}
}, 0); 
```

$(".gallery-info").html(arr[0]); just below this line i tried to alert(arr[0]) which gives undefined.

Also any performance tips will be appreciated. Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:14:42.233

我只是尝试在第一个超时功能中使用另一个超时功能..不确定这是否是最好的做法，但现在它对我有用..我不会将此作为正确答案并等待任何更好的答案。

```
setTimeout(function() { 
    var obj = $('.item_info'),
            arr = $.makeArray(obj);
            $(".gallery-info").html(arr[0]);
            slider.ev.on('rsAfterSlideChange', function(event) {
             curId = slider.currSlideId + 1;
                $("#slide_count").html(curId+" OF "+totalSlides);
                $(".gallery-info").html(arr[slider.currSlideId]);
            });
        }, 700); 
```

# iphone - UITableViewCell - layoutSubview 具有可调整的文本视图高度

> ID：15386625
> 
> 赞同：0
> 
> 时间：2013-03-13T13:24:43.577
> 
> 标签：iphone, objective-c, uitableview

当我创建自己的元素时，`UITableViewCell`我使用它`layoutSubviews`来排列单元格中的元素。但是，如何创建一个适合所需行数的区域 - 取决于描述文本的长度。

```
-(void) layoutSubviews {
    [super layoutSubviews];

    [imageView setFrame:CGRectMake(8.0, 10.0, 20.0, 20.0)];
    [description setFrame:CGRectMake(40.0, 1.0, 250.0, 40.0)]; //1..n lines  <- ???????

}

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {

        imageView = [[UIImageView alloc] initWithFrame: CGRectZero];
        imageView.contentMode = UIViewContentModeScaleAspectFit;
        [self.contentView addSubview: imageView];

        titleLabel = [[UILabel alloc] initWithFrame: CGRectZero];
        [titleLabel setFont:[UIFont systemFontOfSize:14.0]];
        [titleLabel setTextColor:[UIColor blackColor]];
        [titleLabel setHighlightedTextColor:[UIColor darkGrayColor]];
        [titleLabel setLineBreakMode: NSLineBreakByWordWrapping];
        //titleLabel.numberOfLines = 2;
        [self.contentView addSubview: titleLabel];

        description = [[UILabel alloc] initWithFrame: CGRectZero];
        [description setFont:[UIFont systemFontOfSize:12.0]];
        [description setTextColor:[UIColor darkGrayColor]];
        [description setHighlightedTextColor:[UIColor darkGrayColor]];
        [description setLineBreakMode: NSLineBreakByWordWrapping];
        //description.numberOfLines = 1;                     //1..n lines  <- ???????
        [self.contentView addSubview: description];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:39:31.670

您必须通过计算要将其放置在单元格中的字符串（单元格内容）的大小来获取单元格的高度。这个计算应该在：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

计算高度后，您必须相应地调整/放置单元格内的元素框架（单元格内容）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:40:22.093

表格单元格不能确定它自己的高度。取而代之的是 UITableView 布置单元格。现在，`UITableView`确实有一个委托方法：`- (CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`. 但是，它会在表显示其数据之前为表中的每一行调用该方法（或称为`cellForRowAtIndexPath`委托方法）。这是因为`UITableView`需要知道表格在开始显示数据之前有多大（或多高），因为它使用此信息来设置 contentSize、确定滚动条高度等。这意味着，如果您想要具有变量的表格单元格单元格高度，您需要在表格加载之前计算这些单元格高度。如果表格很小，那么这没有问题，但如果您的表格很大或计算复杂，则可能会延迟显示您的表格。出于这个原因，您通常希望`heightForRowAtIndexPath`非常高效。

但是一旦你完成了这个（计算了行高），你不需要在你的`UITableViewCell`子类中做任何事情，除了布局你的子视图。单元格高度已经为您设置好了。

# javascript - 为什么我总是从 XPiNC 中的任何 JS 对象中得到未定义？

> ID：15386627
> 
> 赞同：1
> 
> 时间：2013-03-13T13:24:46.467
> 
> 标签：javascript, xpages, xpinc

Lotus Notes 8.5.3FP3 UP1

`dojo.ready` 我在将表行与处理程序连接起来时初始化了一些代码`onclick`：

```
dojo.query(document).delegate('tr', 'onclick', controller); 
```

在我的控制器功能中，我现在希望能够做到：

```
var obj = evt.target; 
```

这行得通，我在 FireBug lite 中得到了一个对象。

但如果我尝试这样做：

`obj.tagName`它返回未定义。事实上，`undefined`无论我尝试检索什么属性，它都会返回！

如果我在 Firebug 控制台中运行相同的代码，它也可以工作。这一切都可以在每个浏览器中完美运行，包括 IE7 及更高版本！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:16:44.663

好的，所以我自己带了这个...

Domino 8.5.3x 中的 XULRunner 已经很老了，不支持`obj.parentElement`，所以我使用了：

```
obj = obj.parentElement || dojo.query(obj).parent(); 
```

然后尝试做：

```
obj.tagName 
```

看到问题了吗？

更改为：

```
obj = obj.parentElement || dojo.query(obj).parent()[0]; 
```

解决它。

# hadoop - 用于聚合各种属性的最佳技术堆栈

> ID：15386628
> 
> 赞同：0
> 
> 时间：2013-03-13T13:24:46.453
> 
> 标签：hadoop, amazon-web-services, amazon-s3, amazon-redshift, elastic-map-reduce

我们正在开发一个平台，该平台可以对图形中的实体流进行建模。系统必须回答这样的问题：有多少具有这些属性的实体位于图上的给定节点，节点上的流入量是多少，节点上的流出量是多少等。流数据以流的形式馈送到系统。我们正在考虑打破时间桶（比如 5 分钟）中的流数据，并针对不同的属性预先计算各种聚合，并将聚合存储在 DynamoDB 中以服务查询。

对此，我们正在评估以下选项：

*   EMR：将流数据放入 AWS -S3/DynamoDB 运行 Map Reduce/hive 作业

*   将最近的数据放入 AWS-RDS，通过 sql 计算聚合

*   Akka：它是一个通过 Actors 和消息传递构建分布式应用程序的框架。

    如果有人从事过类似的用例或使用过上述任何技术，请告诉我哪种方法最适合我们的用例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:08:58.040

我已经使用 EMR 在 S3 中处理数据......效果很好。最好的部分是您可以启动适合工作负载的各种大小的 hadoop 集群。

您可能想查看[Storm](http://storm-project.net/)进行流处理

我还在这里收集大数据工具列表：http: [//hadoopilluminated.com/hadoop_book/Bigdata_Ecosystem.html](http://hadoopilluminated.com/hadoop_book/Bigdata_Ecosystem.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-24T05:15:13.653

最终解决方案采用了 AWS Redshift，驱动原因是高速数据摄取的需求，Redshift 通过 COPY 命令提供。

Hadoop 旨在有效地存储数据，但它不保证亚秒级的 SLA 用于摄取，也不提供数据何时可用于 MR 作业的 SLA，这是我们不使用 EMR 的主要原因或一般的 Hadoop。

# c++ - 使用 g++ 将多个源文件编译成一个 .o

> ID：15386629
> 
> 赞同：0
> 
> 时间：2013-03-13T13:24:47.607
> 
> 标签：c++, g++

我希望将许多 .cc 文件编译成一个 .o 文件。

我正在使用我需要做的 bash 脚本将我的单元测试源文件构建到 unit_test.o 文件中，但它说“g ++：不能用 -c 或 -S 指定 -o 和多个文件”我链接这些源文件在脚本的下一阶段。

到目前为止，我有；

```
g++ -Wno-deprecated -std=c++0x \
    -o $Unit_Test_Output_Directory/unit_test.o \
    -c $Unit_Test_Source_Directory/test1.cc $Unit_Test_Source_Directory/test2.cc 
```

然后，我有了我的 -I 和 -L，bash 中的“\”用于将命令拆分为多行。

然后在链接阶段，我将我的 unit_test.o 和源文件的 .o 链接到一个 unit_test_executable 中。

有人可以帮我吗？我是否需要继续为 -o unit_test1.o -c test1.cc 调用构建函数，然后为测试 2... 并在链接阶段链接 unit_test1.o 和 unit_test2.o？

我也尝试过失败：

```
g++ -Wno-deprecated -std=c++0x \
    -o $Unit_Test_Output_Directory/unit_test1.o  \
    $Unit_Test_Output_Directory/unit_test2.o \
    -c $Unit_Test_Source_Directory/test1.cc \
    $Unit_Test_Source_Directory/test2.cc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:29:25.323

您不能将多个源文件编译为单个目标文件。每个源文件都必须编译成它自己的目标文件。

您必须为每个源文件单独执行此操作：

```
g++ -Wno-deprecated -std=c++0x \
    -o $Unit_Test_Output_Directory/unit_test1.o \
    -c $Unit_Test_Source_Directory/test1.cc

g++ -Wno-deprecated -std=c++0x \
    -o $Unit_Test_Output_Directory/unit_test2.o \
    -c $Unit_Test_Source_Directory/test2.cc

```

# android - 如何 在列表视图中使带有标签的动态文本加粗？

> ID：15386631
> 
> 赞同：0
> 
> 时间：2013-03-13T13:24:51.620
> 
> 标签：android, html, json, android-layout, android-listview

我正在开发一个应用程序，我在其中解析`JSON`数据并在列表视图中修复结果。作为`JSON`回应，我得到以下回应：

```
{
"searchdata": {
    "webresult": [
        {
            "title": "<b>Android</b>",
            "desc": "Discover a new flavor of Jelly Bean <b>Android</b> 4.2 introduces a completely new camera experience, a new form of typing that helps you power ...",
            "link": "http://www.android.com/"
        },
        {
            "title": "<b>Android</b> (operating system) - Wikipedia, the free encyclopedia",
            "desc": "<b>Android</b> is a Linux -based operating system designed primarily for touchscreen mobile devices such as smartphones and tablet computers. Initially developed by <b>Android</b> ...",
            "link": "http://en.wikipedia.org/wiki/Android_(mobile_phone_platform)"
        }
    ]
} 
```

}

如`title`您所见，**Android**标签即将到来。我想让它变得大胆。

这是我为在列表视图中修复这些响应所做的工作。

```
try {
    HttpClient hClient = new DefaultHttpClient();
HttpGet hGet = new HttpGet("MY API");
ResponseHandler<String> rHandler = new BasicResponseHandler();
data = hClient.execute(hGet, rHandler);

JSONObject rootObj = new JSONObject(data);

JSONObject jSearchData = rootObj.getJSONObject("searchdata");

JSONArray jsonArray = jSearchData.getJSONArray("webresult");

for (int i = 0; i < jsonArray.length(); i++) {

    JSONObject objJson = jsonArray.getJSONObject(i);

    String title = objJson.getString("title");
    String desc = objJson.getString("desc");
    String link = objJson.getString("link");

    HashMap<String, String> map = new HashMap<String, String>();

    map.put("title", title);
    map.put("description", desc);
    map.put("link", link);

    searchList.add(map);
    }

} catch (Exception e) {
       System.out.println("Exception: " + e);
} 
```

通过上面的代码，我得到了响应并将它们存储到`Hashmap`. 之后，我使用自定义布局来显示内容。以下代码可帮助我在布局中固定值。

```
ListAdapter adapter = new SimpleAdapter(getApplicationContext(),
searchList, R.layout.list_row, new String[] { "title","description", "link" }, new int[] { R.id.title,R.id.desc, R.id.url });

setListAdapter(adapter); 
```

这就是一切顺利时的样子。

![布局设备的屏幕截图](../Images/256d3a5329685872fc5322857e9ecf7b.png)

如您所见，`html`标签即将到来。请任何人建议如何使`html`粗体标签内的文本变为粗体？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T13:52:48.660

您可以使用[`SimpleAdapter.ViewBinder`](http://developer.android.com/reference/android/widget/SimpleAdapter.ViewBinder.html)并设置一个`html`值`TextView`而不是纯文本。

```
SimpleAdapter adapter = new SimpleAdapter(getApplicationContext(), searchList, R.layout.list_row, new String[] { "title","description", "link" }, new int[] { R.id.title,R.id.desc, R.id.url });
SimpleAdapter.ViewBinder binder = new SimpleAdapter.ViewBinder() {
    @Override
    public boolean setViewValue(View view, Object object, String value) {
        if (view instanceof TextView) {
            ((TextView) view).setText(Html.fromHtml(value));
            return true;
        }

        return false;
    }
};

adapter.setViewBinder(binder);
setListAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T13:29:24.783

在放入 Map 之前使用 Html.fromHtml()

```
map.put("title", HTML.fromHtml(title));
map.put("description", HTML.fromHtml(desc));
map.put("link", HTML.fromHtml(link)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-05T22:16:19.193

只需使用 SpannedString 代替普通字符串，然后使用 setText() 将其显示在 TextView 上。

**示例：** SpannedString spannedText = new SpannedString(Html.fromHtml(value)); textView.setText(spannedText);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T13:31:06.340

在适配器类中设置标题时，请尝试作为休闲方式。

holder.title.setText(Html.fromHtml(searchList.getTitle))。

# awk - awk，第 4 列与 @ 之前的通配符匹配的所有内容

> ID：15386632
> 
> 赞同：3
> 
> 时间：2013-03-13T13:24:55.597
> 
> 标签：awk

我正在尝试从 pmta 邮件日志中提取数据。

单个条目如下所示

```
b,2013-02-04 03:48:57+0200,2013-02-04 03:48:57+0200,noreply@test.com,fynnb@domain.com,rfc822;fynnb@domain.com,failed,5.3.2 (system not accepting network messages),smtp;550 Too many invalid recipients,mx02.domain.com (146.230.128.12),other,smtp,twww01.test.com(10.0.0.53),,143.37.222.256,146.230.128.12,,,virtmail23,,,domain.com/virtmail23,test-promo,,,,,,,,,,, 
```

有很多条目，我只想在第三个逗号之后拉出带有“*@test.com”的条目

目前 noreply@test.com 在示例中，但我们使用 noreply、NoReply、No-Reply 和用户，所以我想在 @ 符号之前使用通配符。

到目前为止我所拥有的是

```
awk -F, '$4 == "noreply@test.com"' /home/mail/test.csv 
```

这可以很好地提取包含“noreply@test.com”的条目，但如果我使用

```
awk -F, '$4 == "*@test.com"' /home/mail/test.csv 
```

我没有数据。在这个场景中，我可以在 awk 中使用什么 *？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T13:28:51.267

您需要告诉 awk 进行 RE 比较 (~) 而不是字符串比较 (==)：

```
awk -F, '$4 ~ /@test\.com/' /home/mail/test.csv 
```

# bash - 旋转，然后使用 ImageMagick 和 bash 调整图像目录的大小

> ID：15386635
> 
> 赞同：0
> 
> 时间：2013-03-13T13:25:02.613
> 
> 标签：bash, imagemagick, image-resizing

我想检查目录中的所有图像是横向还是纵向，如果它们是横向则它们是纵向的。旋转后，我想调整图像的大小，使其具有特定的分辨率（每厘米 118 点）和水平尺寸（9 厘米）。

**总之：**

*   所有图像均为纵向
*   分辨率为每厘米 118 点
*   9cm水平尺寸

我知道 identify 可以拉尺寸，但我不确定如何拉单个高度/宽度值。

基本上，我想这样做：

```
FILES=/path/to/*
for i in $FILES
identify -format "%f,%w,%h"
do
  if [%w -gt %h]
    then
    convert -rotate 90 $i

  mogrify -resize -density ?x? -resolution? -PixelsPerCm $i $i_resized.jpg
done 
```

最终，我想将这些平铺成 1m x 任意长度的文档，以便从绘图仪打印。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:58:08.713

也许是这样的？

```
read f w h < <(identify -format "%f %w %h" "$imagefile")
if (( $w > $h )) ; then
    # convert
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:35:17.507

图像尺寸似乎是`identify`输出中的第三列：

```
$ identify someimage.jpg
someimage.jpg JPEG 600x450 600x450+0+0 8-bit DirectClass 205KB 0.010u 0:00.009 
```

所以你可以`cut`用来提取尺寸：

```
f_size=$(identify $f | cut -f3 -d' ') 
```

这会给你一些 ike `600x450`。有多种方法可以分隔这些值。例如：

```
f_width=${f_size%x*}
f_height=${f_size#*x} 
```

这个`-format`论点更容易：

```
set -- $(identify -format '%w %h')
f_width=$1
f_height=$2 
```

# ruby-on-rails - 如何在浏览栏，rails中显示类别名称而不是id

> ID：15386638
> 
> 赞同：0
> 
> 时间：2013-03-13T13:25:16.037
> 
> 标签：ruby-on-rails, browser, categories

我有很多类别。所以当我查看它们时，我希望能够看到类别名称，而不是类别的 id。

在这一刻我有这样的。

[http://postimage.org/image/5fb5uzhzd/](http://postimage.org/image/5fb5uzhzd/)

但我想在 categories/category_name 之后。

我不希望你说我的一切，我只需要一些小费。所以我可以做研究。

这种功能是否以某种方式与路线有关？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:27:26.187

您可以使用[friendly_id](https://github.com/norman/friendly_id) gem 来实现这一点。[您将在此Railscasts 集中](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid?view=asciicast)找到实现此功能所需的所有说明。

或者您可以按照其他[Railscasts 插曲](http://railscasts.com/episodes/63-model-name-in-url-revised)手动完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:41:37.950

如果 category_name 是可以放在 url 中的东西（比如没有空格等），您可以通过简单地覆盖`to_param`模型中的方法来实现

```
class Category
  def to_param
    category_name
  end
end 
```

# dictionary - os x 自定义字典或自定义查找函数

> ID：15386639
> 
> 赞同：4
> 
> 时间：2013-03-13T13:25:16.520
> 
> 标签：dictionary, osx-lion, translation, osx-mountain-lion, gestures

在 Lion 和 Mountain Lion 中，您可以双击 3 指从字典中查找单词。这个手势是一种非常快速、干净和好的搜索单词的方式，但它不支持自定义翻译。

例如。它支持日英翻译，但我需要芬兰英文翻译。有没有办法添加这样的字典。或者编写自定义函数进行查找。功能也可以使用google翻译api，但我不知道如何实现。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T23:03:59.493

我也在研究这个。我认为理论上可以创建一个调用谷歌翻译的新 OSX 字典，但我不确定是否有人这样做。

[这里有](http://nagpals.com/posts/mac-dictionaries/)一些关于创建字典的信息，还有一个连接到谷歌翻译的 Alfred 插件（加上 shell 脚本）[。](https://github.com/mofus/Alfred-Google-Translate)我会看看我能用它们做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-01T06:07:21.133

下载你想要的词典：[finnish-english](http://clasquin-johnson.co.za/michel/mac-os-x-dictionaries/scandinavian-languages/finnish.html)

安装：

1.  解压缩您下载的文件。您会发现它包含一个扩展名为 .dictionary 的文件。在典型的 Apple 风格中，这实际上是一个伪装的目录。别担心。
2.  要在 Mac 上安装，请将 .dictionary 文件复制到 /Library/Dictionaries。您可能需要提供管理员密码才能执行此操作。
3.  如果 Dictionary.app 正在运行，请将其关闭并重新启动。
4.  进入 Dictionary.app 的 Preferences 并确保您的新词典被选中。

更多词典：[这里](http://clasquin-johnson.co.za/michel/mac-os-x-dictionaries/index.html)

想要更多？下载 DictUnifier并将[startDicts](https://code.google.com/p/mac-dictionary-kit/)转换为[Dictonary.app](http://abloz.com/huzheng/stardict-dic/)格式。DictUnifiert 自动将字典加载到 Dictonary.app

享受！！！

# c# - Modern UI Toolkit 中的图表未正确呈现

> ID：15386640
> 
> 赞同：2
> 
> 时间：2013-03-13T13:25:20.733
> 
> 标签：c#, xaml, windows-8, windows-runtime, windows-store-apps

我正在尝试使用一些简单的图表创建一个 Windows Store 应用程序，但是我发现这些应用程序没有图表控件。在网上搜索我发现有一些我买不起的昂贵的第三方图表。最后我找到了一个免费的工具包：http: [//modernuitoolkit.codeplex.com](http://modernuitoolkit.codeplex.com)

这对我来说很好，但只适用于 5 个值。如果我尝试绘制 30 个值，它会变得一团糟，如下图所示： ![在此处输入图像描述](../Images/4407b4fa7202dd4eb927f5bb37ac26b6.png)

在研究了提供的示例后，我通过在图表中添加 30 个值对其进行了修改。

```
 List<NameValueItem> items = new List<NameValueItem>();       

        items.Add(new NameValueItem() { Name = "Test1", Value = arrayOfValue[0] });
        items.Add(new NameValueItem() { Name = "Test2", Value = arrayOfValue[1] });
        items.Add(new NameValueItem() { Name = "Test3", Value = arrayOfValue[2] });
        items.Add(new NameValueItem() { Name = "Test4", Value = arrayOfValue[3] });
        items.Add(new NameValueItem() { Name = "Test5", Value = arrayOfValue[4] });

        items.Add(new NameValueItem() { Name = "Test1", Value = arrayOfValue[5] });
        items.Add(new NameValueItem() { Name = "Test2", Value = arrayOfValue[6] });
        items.Add(new NameValueItem() { Name = "Test3", Value = arrayOfValue[7] });
        items.Add(new NameValueItem() { Name = "Test4", Value = arrayOfValue[8] });
        items.Add(new NameValueItem() { Name = "Test5", Value = arrayOfValue[9] });

        items.Add(new NameValueItem() { Name = "Test1", Value = arrayOfValue[10] });
        items.Add(new NameValueItem() { Name = "Test2", Value = arrayOfValue[11] });
        items.Add(new NameValueItem() { Name = "Test3", Value = arrayOfValue[12] });
        items.Add(new NameValueItem() { Name = "Test4", Value = arrayOfValue[13] });
        items.Add(new NameValueItem() { Name = "Test5", Value = arrayOfValue[14] });

        items.Add(new NameValueItem() { Name = "Test1", Value =arrayOfValue[15] });
        items.Add(new NameValueItem() { Name = "Test2", Value = arrayOfValue[16] });
        items.Add(new NameValueItem() { Name = "Test3", Value = arrayOfValue[17] });
        items.Add(new NameValueItem() { Name = "Test4", Value = .arrayOfValue[18] });
        items.Add(new NameValueItem() { Name = "Test5", Value = arrayOfValue[19] });

        items.Add(new NameValueItem() { Name = "Test1", Value = arrayOfValue[20] });
        items.Add(new NameValueItem() { Name = "Test2", Value = arrayOfValue[21] });
        items.Add(new NameValueItem() { Name = "Test3", Value = arrayOfValue[22] });
        items.Add(new NameValueItem() { Name = "Test4", Value = arrayOfValue[23] });
        items.Add(new NameValueItem() { Name = "Test5", Value = arrayOfValue[24] });

        items.Add(new NameValueItem() { Name = "Test1", Value = arrayOfValue[25] });
        items.Add(new NameValueItem() { Name = "Test2", Value = arrayOfValue[26] });
        items.Add(new NameValueItem() { Name = "Test3", Value = arrayOfValue[27] });
        items.Add(new NameValueItem() { Name = "Test4", Value = arrayOfValue[28] });
        items.Add(new NameValueItem() { Name = "Test5", Value = arrayOfValue[29] });

        ((ColumnSeries)Chart.Series[0]).ItemsSource = items;
        ((BarSeries)BarChart.Series[0]).ItemsSource = items;
        ((LineSeries)LineChart.Series[0]).ItemsSource = items;
        ((ColumnSeries)MixedChart.Series[0]).ItemsSource = items;
        ((LineSeries)MixedChart.Series[1]).ItemsSource = items;
        ((AreaSeries)AreaChart.Series[0]).ItemsSource = items;
        ((BubbleSeries)BubbleChart.Series[0]).ItemsSource = items;
        ((ScatterSeries)ScatteredChart.Series[0]).ItemsSource = items; 
```

NameValueItem 定义为：

```
 public class NameValueItem
{
    private string _name;

    public string Name
    {
        get { return _name; }
        set { _name = value; }
    }
    private double _value;

    public double Value
    {
        get { return _value; }
        set { _value = value; }
    }
    public NameValueItem()
    {
    }
} 
```

MainPage Xaml 如下所示：

```
<Page
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:App17"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
xmlns:Series="using:ModernUI.Toolkit.Data.Charting.Charts.Series"
xmlns:Axis="using:ModernUI.Toolkit.Data.Charting.Charts.Axis" 
xmlns:Charting="using:ModernUI.Toolkit.Data.Charting"

xmlns:DataPoints="using:ModernUI.Toolkit.Data.Charting.Charts.DataPoints"

xmlns:Chart="using:ModernUI.Toolkit.Data.Charting.Charts.Chart"
xmlns:series="using:ModernUI.Toolkit.Data.Charting.Charts.Series"

x:Class="App17.MainPage"
mc:Ignorable="d"> 
```

```
 <Canvas x:Name="can" HorizontalAlignment="Left" Height="100" Margin="381,111,0,0" VerticalAlignment="Top" Width="100"/>
  <Chart:Chart x:Name="Chart"  HorizontalAlignment="Left" Title="Column Chart" Margin="-2,153,0,0" VerticalAlignment="Top" Width="318" Height="190">
     <Chart:Chart.Series>
        <series:ColumnSeries
                        Title="Population"
                        ItemsSource="{Binding Items}"
                        IndependentValueBinding="{Binding Name}"
                        DependentValueBinding="{Binding Value}" IsSelectionEnabled="True"/>
     </Chart:Chart.Series>
  </Chart:Chart>
  <Chart:Chart x:Name="BarChart"  HorizontalAlignment="Left" Title="Bar Chart" Margin="316,153,0,0" VerticalAlignment="Top" Width="318" Height="190">
     <series:BarSeries
            Title="Population"
            IndependentValueBinding="{Binding Name}"
            DependentValueBinding="{Binding Value}" IsSelectionEnabled="True"/>
  </Chart:Chart>

  <Chart:Chart x:Name="LineChart"  HorizontalAlignment="Left" Title="Line Chart" Margin="-2,363,0,0" VerticalAlignment="Top" Width="318" Height="190">
     <series:LineSeries
            Title="Population"
            IndependentValueBinding="{Binding Name}"
            DependentValueBinding="{Binding Value}" IsSelectionEnabled="True"/>
  </Chart:Chart>
  <Chart:Chart x:Name="MixedChart"  HorizontalAlignment="Left" Title="Mixed Chart" Margin="316,363,0,0" VerticalAlignment="Top" Width="318" Height="190">
     <series:ColumnSeries
            Title="Population"
            ItemsSource="{Binding Items}"
            IndependentValueBinding="{Binding Name}"
            DependentValueBinding="{Binding Value}" IsSelectionEnabled="True"/>
     <series:LineSeries
            Title="Population"
            IndependentValueBinding="{Binding Name}"
            DependentValueBinding="{Binding Value}" IsSelectionEnabled="True"/>
  </Chart:Chart>
  <Chart:Chart x:Name="AreaChart"  HorizontalAlignment="Left" Title="Area Chart" Margin="634,363,0,0" VerticalAlignment="Top" Width="318" Height="190">
     <series:AreaSeries
            Title="Population"
            IndependentValueBinding="{Binding Name}"
            DependentValueBinding="{Binding Value}" IsSelectionEnabled="True"/>
  </Chart:Chart>
  <Chart:Chart x:Name="BubbleChart" HorizontalAlignment="Left" Title="Bubble Chart" Margin="634,153,0,0" VerticalAlignment="Top" Width="318" Height="190">
     <series:BubbleSeries
            Title="Population"
            IndependentValueBinding="{Binding Name}"
            DependentValueBinding="{Binding Value}" IsSelectionEnabled="True"/>
  </Chart:Chart>
  <Chart:Chart x:Name="ScatteredChart"  HorizontalAlignment="Left" Title="Scattered Chart" Margin="952,153,0,0" VerticalAlignment="Top" Width="318" Height="190">
     <series:ScatterSeries
            Title="Population"
            IndependentValueBinding="{Binding Name}"
            DependentValueBinding="{Binding Value}" IsSelectionEnabled="True"/>
  </Chart:Chart> 
```

arrayOfValue 中的数据如下所示： -3.7 -6 2.9 -0.2 1.2 2.5 -1 -1.2 -0 -5.3 -7.1 -4.8 -1.2 0.8 -1 -1.5 -1.4 -5.2 -3.4 -6.6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:14:23.357

1.  您的代码无法编译 - arrayOfValue 太短。
2.  你只得到 5 个值，因为你的 X 轴只有 5 个不同的值（Test1-5） - 如果你修复它 - 图表工作正常
3.  相同图表的较新版本已在[此处](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/9c814f6c67c5#WinRTXamlToolkit.Sample/Views/Controls/ChartTestPage.xaml)集成到 WinRT XAML 工具包中。[您可以在此处](http://nuget.org/packages/WinRTXamlToolkit.Controls.DataVisualization)从 CodePlex 或 NuGet 中获取源代码。
4.  在寻找原始项目时，我偶然发现了另一个可能适合您的图表工具包 - [http://modernuicharts.codeplex.com](http://modernuicharts.codeplex.com)

# iphone - 静态库问题

> ID：15386643
> 
> 赞同：0
> 
> 时间：2013-03-13T13:25:22.857
> 
> 标签：iphone, ios, static-libraries

我正在使用一些类文件创建一个静态库，并且该库创建良好，但是如果我将库安装到另一个新的 Xcode 项目，它会显示错误，错误如下，

```
ld: warning: ignoring file /Users/rajesh/Desktop/Quntiles/01-03-2013/ConnectionExample-1/libAVTEmployee.a, file was built for archive which is not the architecture being linked (armv7s): /Users/rajesh/Desktop/Quntiles/01-03-2013/ConnectionExample-1/libAVTEmployee.a
Undefined symbols for architecture armv7s:
  "_OBJC_CLASS_$_AVTEmployee", referenced from:
      objc-class-ref in XMLParser-E51A1142A3EEED70.o
ld: symbol(s) not found for architecture armv7s
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

任何人都可以帮助我，我该如何解决这个问题，以便我可以在我的新项目中使用我的静态库，

我正在使用 Xcode 4.6 版本。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:15:39.637

可能您的静态库是使用不支持`armv7s`架构的旧版本 XCode 创建或编译的。打开静态库项目，确保`Architectures`包含 armv7 和 armv7s 架构并`Build Active Architectures Only`设置`No`为`Build Settings`.

![静态库配置](../Images/c572aa7529e5c8b6a18aba4e97241fbb.png)

# .net - 为通过反射找到的属性重新生成 C# 代码的简单方法？

> ID：15386644
> 
> 赞同：0
> 
> 时间：2013-03-13T13:25:23.547
> 
> 标签：.net, reflection, code-generation

我正在制作一个程序，它使用反射来检查程序集中的枚举类型，并且在某些情况下，重写定义这些枚举的 C# 源文件。

有问题的源文件是一种严格规定的格式，基本上只是定义了枚举，可能在一个部分类中，所以创建一个简单的生成器并不难。

不幸的是，当枚举上有自定义属性时，情况会稍微复杂一些，在这个应用程序中通常会有。

我可以使用反射来获取 Attribute 或 CustomAttributeData 对象的列表。现在我正在使用一种特别的方法，它假设有关找到的特定属性的事情并在此基础上为它们生成 C# 代码，但我更喜欢更通用的方法。

给定一个属性，如果可以安全地假设该属性没有参数，我可以确定类型和简单的输出代码：

```
[SomeNamespace.SomeAttribute] 
```

不幸的是，假设没有参数是不安全的，如果有的话，生成所需的代码也不是那么简单。

给定我们想要复制的属性调用，.NET 或其他地方是否有一些现有机制可以在一般情况下为属性生成 C# 代码？我检查了 Attribute 和 CustomAttributeData 类，但它们似乎没有自动处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:34:23.447

您可以使用[`Type.GetCustomAttributesData`](http://msdn.microsoft.com/en-us/library/system.reflection.memberinfo.getcustomattributesdata.aspx). 这不是为您提供构造的`Attribute`实例，而是为您提供一个[`CustomAttributesData`](http://msdn.microsoft.com/en-us/library/system.reflection.customattributedata.aspx)对象，该对象可以单独访问构造函数、构造函数参数和命名参数，您需要将属性复制为源代码。

# java - Graphics2D：如何在不规则形状周围创建一致的填充？

> ID：15386645
> 
> 赞同：4
> 
> 时间：2013-03-13T13:25:26.310
> 
> 标签：java, awt, zooming, graphics2d

我正在使用 Java Graphics2D 生成这张地图，上面有某种着色的红色叠加层。如您所见，叠加层沿左侧的图像边界被切断：-

![在此处输入图像描述](../Images/fd69e14c2a3bc3f67ffc9095e2d13cc4.png)

在向我的项目利益相关者演示后，他们想要的是让这个叠加层沿着地图边界剪辑，并在其周围进行一些一致的填充。这样做的简单原因是让用户知道叠加层延伸到地图之外。

所以，我最初的想法是通过创建另一个更大的地图作为“饼干切割机”来执行“缩放和移位”，这是我的简化代码：-

```
// polygon of the map
Polygon minnesotaPolygon = ...;

// convert polygon to area
Area minnesotaArea = new Area();
minnesotaArea.add(new Area(minnesotaPolygon));

// this represents the whole image
Area wholeImageArea = new Area(new Rectangle(mapWidth, mapHeight));

// zoom in by 8%
double zoom = 1.08;

// performing "zoom and shift"
Rectangle bound = minnesotaArea.getBounds();
AffineTransform affineTransform = new AffineTransform(g.getTransform());
affineTransform.translate(-((bound.getWidth() * zoom) - bound.getWidth()) / 2,
                          -((bound.getHeight() * zoom) - bound.getHeight()) / 2);
affineTransform.scale(zoom, zoom);
minnesotaArea.transform(affineTransform);

// using it as a cookie cutter
wholeImageArea.subtract(minnesotaArea);

g.setColor(Color.GREEN);
g.fill(wholeImageArea); 
```

我用绿色填充外部部分的原因是让我看看饼干切割器是否正确实施。结果如下：-

![在此处输入图像描述](../Images/bcdb28a613d580e6bb970ec7648f1afb.png)

如您所见，“缩放和移位”在这种情况下不起作用。右下角绝对没有填充。然后，我意识到这种技术不适用于不规则的形状，比如地图……它只适用于更简单的形状，比如正方形、圆形等。

我想要的是在裁剪其余部分之前在地图周围创建一致的填充/边距。为了确保您理解我在这里所说的内容，我在下面对这张图片进行了 photoshop 处理（尽管做得不好），以解释我在这里要完成的工作：-

![在此处输入图像描述](../Images/41e674b2094035e8a1b521397736bb35.png)

我不知道如何从这里开始，我希望你们能给我一些指导。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:45:36.923

我只会解释逻辑，因为我没有时间自己编写代码。简短的回答是您应该逐步检查地图图像的每个像素，如果周围区域（即一定距离之外）的**任何像素被认为是“陆地”，那么您将当前像素注册为填充区域的一部分。**

对于长答案，这里有 9 个步骤来实现你的目标。

1.确定填充的大小。比方说6像素。

2\. 创建单色地图图像（黑色为“水”，白色为“陆地”）。在边缘周围留出至少 6 像素的边距。这是输入图像：（未按比例缩放）

![黑白地图](../Images/a214c83757fdd2b6e0991b47560c35ab.png)

3\. 创建一个直径为 11 像素 (11 = 6*2-1) 的圆形图像。同样，黑色是空的/透明的，白色是实心的。这是命中区域图像：

![11像素宽的圆圈](../Images/85f656b9ff262bb66ac3cf4fe1c377c7.png)

4\. 创建第三张全黑的图片（开始）。使其与输入图像的大小相同。它将用作输出图像。

5\. 迭代输入图像的每个像素。

6\. 在该像素处覆盖命中区域图像（仅通过计算虚拟地执行此操作），以便命中区域（白色圆圈）的中心位于当前输入图像像素之上。

7\. 现在迭代命中区域图像的每个像素。

8\. 如果命中区域图像的任何白色像素与输入图像的白色像素相交，则在输出图像中绘制一个白色像素（圆心所在的位置）。

9\. 转到步骤 5。

诚然，从第 6 步开始，它并不那么简单，但应该相当容易实现。希望你明白其中的逻辑。如果我的解释太混乱（抱歉），那么我可以花一些时间编写完整的解决方案（使用 Javascript、C# 或 Haskell）。

# html - HTML表单 - 一个输入的多个输出？

> ID：15386651
> 
> 赞同：0
> 
> 时间：2013-03-13T13:25:40.997
> 
> 标签：html, forms, input, output

还是个初学者，所以请温柔对待我。

我正在构建一个 html“应用程序”，它需要您离开家几天作为输入并计算多个输出，例如：Pack：**5**件衬衫、**5**件内衣、**3**双袜子..

```
<form oninput="x.value=(d.value).toFixed(0)">

<p>I'm going to be off-home for <input type="number" id="d" value=""> days. </p>

<p>I'll pack:</p><output id="result" name="x" for="d">X</output> <p>shirts.</p>
<output id="result" name="x" for="d">X</output> <p>underwears.</p>

</form> 
```

目前我设法让一个输出工作，但如果我添加第二个输出，它将无法工作。我已经阅读了表单/输入/输出文档 - 它没有为我打开。

问题：

**如何从一个输入打印多个输出？**

和

**如何计算输出的不同值？**

（例如输入值为 5，我希望袜子的数量为 (5/2).toFixed(0)

我更喜欢纯 HTML 的解决方案，但如果需要 javascript，请帮助我开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:34:53.617

我不想打破它，但你已经在使用 JavaScript :)

```
oninput="x.value=(d.value).toFixed(0)" 
```

您可能还想重新考虑使用“输出”标签，因为 IE 不支持它： [输出标签](http://www.w3schools.com/tags/tag_output.asp)

HTML 用于定义文档的结构，因此您必须使用 JavaScript（或等效的）来获得所需的功能。

# spring - Spring Security 3.0 到 Spring security 2.0.2 的功能

> ID：15386652
> 
> 赞同：1
> 
> 时间：2013-03-13T13:25:45.480
> 
> 标签：spring, login, spring-security, login-control

谁能告诉我什么是替代品

```
<bean id="authenticationSuccessHandler" class="org.springframework.security.web.authentication.SavedRequestAwareAuthenticationSuccessHandler"/> 
```

在 Spring Security 2.0.2 中。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:30:54.657

同一个包中的同一个类仍然存在。如果您使用命名空间配置，则不必手动声明此 bean，因为`<security:form-login>`默认情况下该元素会将其连接起来。

# mfc - 错误的颜色应用于 mfc 中 WebBrowser 控件的背景

> ID：15386657
> 
> 赞同：0
> 
> 时间：2013-03-13T13:26:10.047
> 
> 标签：mfc, webbrowser-control

我在我的 MFC 应用程序中使用 webbrowser 控件。我必须通过从颜色选择器（如颜色对话框）中选择颜色来更改 webbrowser 控件的背景颜色。为此，我使用 MFC 的 CColorDialog 类来选择颜色。并使用 CColorDialog 类的 GetColor() 函数获取选定的颜色。
我的问题是，大多数情况下，作为背景颜色应用的颜色与颜色对话框中选择的颜色不同。知道出了什么问题吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T06:54:36.867

我已经解决了这个问题。问题是我传递了 CColorDialog 的 GetColor() 函数提供的 COLORREF 值，但 webbrowser 接受 html 十六进制代码值。因此，我使用以下代码将 COLORREF 值转换为 html 十六进制代码值：

```
CString sTemp;
COLORREF clr = clrDlg.GetColor();
sTemp.Format("#%X%X%X",GetRValue(clr),GetGValue(clr),GetBValue(clr)); 
```

# algorithm - 将大数分解为三元组

> ID：15386658
> 
> 赞同：2
> 
> 时间：2013-03-13T13:26:10.887
> 
> 标签：algorithm, math

我发现了类似的问题，但这有点复杂。

我有一个很大的数 n（我实际上有更多，但现在没关系），（>40 位），我想找到 a*b*c=n 三元组。n 的素数分解完成。它没有大素数除数，但有许多小的素数除数。所有素数除数（包括多个除数）之和大于 50。

我想找到 a*b*c=n 三元组，其中 a<=b<=c。我不想要所有的三胞胎，因为它们太多了。我正在寻找特殊的。

例如：

*   ca 最小的三元组，
*   c/a 最小的三元组，
*   a、b 和 c 具有最大公约数的那个，
*   这些条件结合起来。

如果我们知道 n=k!（阶乘），这可能会更容易解决。求解可能导致通用方法。由于 n 的大小，用蛮力计算所有这些三元组不是一种选择，所以我需要一个好的算法或一些特殊的工具来帮助我实现一个解决方案。

对不起，我的英语不好，

感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:33:37.097

您可以使用简单的`O(|D|^2)`算法来实现它，其中是您已经拥有`D`的所有除数的有序列表。`n`

请注意，您只需要找到`a,b`，因为`c=n/(a*b)`，所以问题归结为找到所有对`(a,b)`，`D`所以`a<b`和`n/(a*b) ∈ D`。

伪代码：

```
result = empty_list
for (int i=0; i<D.size-1, i++) {          // O(|D|)
    for (j=i+1; j<D.size, j++) {          // O(|D|)
         a, b = D[i], D[j]
         c = n/(a*b)
         if (D.contains(c) && c>b) {      // O(1)
             result.append( (a,b,c) )
         }
    }
}                                         // O(|D|)*O(|D|)=O(|D|^2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:30:10.297

我可能有解决方案，但我今天没有时间实施它。我把它写下来，所以也许有人会同意我的观点，或者会发现我算法的弱点。

所以让我们看看第一种或第二种情况，其中 c/a 或 ca 应该是最小的。

1：在第一步中，我使用贪心算法将 n 的素因子分成 3 组。我将有一个初始的 a、b 和 c，它们彼此之间的距离不会很远。主要因素将存储在 3 个数组中：a_pf、b_pf、c_pf。

2：在下一步中，我计算 a、b 和 c 的所有可能因子，将它们存储在不同的数组中，然后对这些数组进行排序。这些将是 a_all、b_all 和 c_all。

3：我计算 q=max(a,b,c)/min(a,b,c)。（现在我们可以说a是最小的，c是最大的）

4：我在 a_all 和 c_all 中搜索此条件下的数字：c_all[i]/a_all[j] < q。当我找到它时，我在 a_pf 和 c_pf 中更改这些值的主要因子。使用这种方法，三元组中最大和最小的成员将彼此靠近。

我重复步骤 2-3-4，直到可以为止。我认为这将在有限数量的步骤后结束。

由于三元组的成员比原来的 n 小，我希望这个解决方案最多能在几分钟内给我正确的三元组。

# android-mediaplayer - 视频未使用 mediaplayer 和 surfaceview 播放

> ID：15386660
> 
> 赞同：0
> 
> 时间：2013-03-13T13:26:13.097
> 
> 标签：android-mediaplayer

```
public  class PlayVideoActivity extends Activity implements SurfaceHolder.Callback {
SurfaceView surfaceView;
SurfaceHolder surfaceHolder;
MediaPlayer mediaPlayer;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_play_video);
        Intent intent=getIntent();
        int no=intent.getIntExtra("index",0);
        Toast.makeText(getBaseContext(),"Hello",Toast.LENGTH_SHORT).show();
        getWindow().setFormat(PixelFormat.UNKNOWN);
        surfaceView = (SurfaceView) findViewById(R.id.surfaceView1);
        surfaceHolder = surfaceView.getHolder();
        surfaceHolder.addCallback(this);
        surfaceHolder.setFixedSize(176, 144);
        surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        mediaPlayer = new MediaPlayer();
        mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
        mediaPlayer.setDisplay(surfaceHolder);

        try {
            mediaPlayer.setDataSource(MainActivity.musicPath[no]);
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {
            mediaPlayer.prepare();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        mediaPlayer.start();
    } 
```

我正在尝试使用媒体播放器和表面视图播放视频，但它没有播放，我在这里编写我的代码。请告诉我我的代码中有什么问题？提前致谢 ............................................... ..................................................... ..................................................... .....................................

# javascript - 引用（而不是复制）一个类作为另一个类的成员 - Mootools

> ID：15386662
> 
> 赞同：3
> 
> 时间：2013-03-13T13:26:19.697
> 
> 标签：javascript, mootools

我有以下课程

**盒子类**

```
var Box = new Class({
    Implements: [Options],
    options: {
        name: 'new',
        weight: 0
    },
    initialize: function (options) {
        this.setOptions(options);
    },
    getParent: function () {
        return this.options.parent;
    }
}); 
```

**收藏类**

```
var Collection = new Class({
    Implements: [Options],
    options: {
        boxes: []
    },
    boxes: [],
    initialize: function (options) {
        var self = this;
        this.setOptions(options);
        Array.each(this.options.boxes, function (box) {
            self.boxes.push(new Box({
                parent: self,
                name: box.name,
                weight: box.weight
            }));
        });
    }
}); 
```

创建时，我将`Collection`类（作为`parent`）传递给 Box 类。

```
var newCollection = new Collection({
    boxes: [
        {
            name: 'A',
            weight: 9
        }, 
        {
            name: 'B',
            weight: 3
        }, 
        {
            name: 'C',
            weight: 2
        }, 
        {
            name: 'D',
            weight: 5
        }, 
        {
            name: 'E',
            weight: 7
        }
    ]
}); 
```

我希望类中的是`parent`对`Box`类的引用`Collection`而不是副本，尽管似乎`newCollection`每次`Box`创建类时我都会获得类的副本（每个框的长度都不同）

```
Array.each(newCollection.boxes, function (box) {
    console.log('*',box.getParent());
}); 
```

我是 mootools 的新手，即使我已经阅读了文档，这也是我最终编写代码的方式。mootools 中是否有更可接受的编码模式，我可以通过它来引用`parent`？

这是[小提琴](http://jsfiddle.net/LECh6/1/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:58:48.920

很容易错过。`setOptions`( [docs](http://mootools.net/docs/core/Class/Class.Extras#Options%3asetOptions) )**深度复制**选项对象。只需`parent`在初始化后设置 Box 的属性。我在[这里发布了您的代码的略微修改版本](http://jsfiddle.net/LECh6/3/)

```
Array.each(this.options.boxes, function (box) {
    var nB = new Box({
        name: box.name,
        weight: box.weight
    });
    // Note the difference
    nB.parent = self;
    self.boxes.push(nB);
}); 
```

# c# - 我的 ItemsControl 如何获取宽度属性（来自 Items）

> ID：15386666
> 
> 赞同：2
> 
> 时间：2013-03-13T13:26:25.033
> 
> 标签：c#, wpf, properties, controls, itemscontrol

我有一个小问题如何设置`ItemsControl`Property `Width`。我`Datatemplates`用来填充我的`ItemControl`. 每个项目`Grid`都是`Canvas`.

当我`ItemsControl`在 a`Window`中使用`ActualWidth`(and `DesiredWidth`) 时，总是`0.0`.

只有当我对 ItemsControl的`Width`属性进行硬编码时，它才有大小。`Canvas`但这远非完美。我宁愿从最大的项目中`Control`获取`width`（或）。`DesiredWidth`

这是一个简短的代码示例：

```
<ItemsControl ItemsSource="{Binding mySource}"
         ItemTemplate="{DynamicResource myTemplate}">

<ItemsControl.Resources>
    <DataTemplate DataType="{x:Type type:myType}"  x:Key="myTemplate">
        <Grid Width="Auto" Height="Auto">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition/>
            </Grid.RowDefinitions>

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>

            <Rectangle Grid.Column="0"
                       Grid.ColumnSpan="2"
                       Grid.Row="1"
                       Height="1"
                       HorizontalAlignment="Stretch"
                       Fill="Blue"/>

            <TextBlock Grid.Row="0"
                       Grid.Column="1"
                       Margin="3"
                       Text="{Binding Text}"
                       FontWeight="Bold"
                       TextWrapping="Wrap"
                       TextAlignment="Left"/>

        </Grid>
    </DataTemplate>
    <v:PositionMultiConverter x:Key="PositionMultiConverter"/>
</ItemsControl.Resources>

<ItemsControl.ItemContainerStyle>
    <Style>
        <Setter Property="Canvas.Bottom">
            <Setter.Value>
                <MultiBinding Converter="{StaticResource ResourceKey=PositionMultiConverter}">
                    <Binding Path="Position"/>
                    <Binding Path="ActualHeight" ElementName="canvas"/>
                </MultiBinding>
            </Setter.Value>
        </Setter>
    </Style>
</ItemsControl.ItemContainerStyle>

<ItemsControl.ItemsPanel>
    <ItemsPanelTemplate>
        <Canvas x:Name="canvas" IsItemsHost="True" Width="20"/>
    </ItemsPanelTemplate>
</ItemsControl.ItemsPanel> 
```

# c++ - FPU 命令 FLDL 在 ST0 中将 double 转换为 long double

> ID：15386668
> 
> 赞同：2
> 
> 时间：2013-03-13T13:26:26.967
> 
> 标签：c++, linux, gcc, floating-point

我的 C++ 代码中有一个 double 值：

```
double inch = 25.399999618530273; 
```

在计算中使用时，它被加载到 FPU st0 寄存器中，使用

```
fldl -0x90(%ebp) 
```

我可以看到 -0x90(%ebp) 处的 double 是正确的值。然而，在 FLDL 之后，它在 st0 寄存器中显示为 long double 值 25.3999996185302734375，即使我使用 -mpc64 -mfpmath=387 编译并在计算和 fldl 命令之前立即将 FPU 手动设置为双精度：

```
fpu_control_t cw;
_FPU_GETCW(cw);
cw &= ~_FPU_EXTENDED;
cw |= _FPU_DOUBLE;
_FPU_SETCW(cw); 
```

您能否解释一下，为什么在 _FPU_DOUBLE 模式下 FPU 寄存器仍处于扩展精度模式以及如何解决这个问题？

或者它只是**显示**为 long double（我在 Eclipse CDT 中查看寄存器），但实际上是在内部没有这些额外数字的情况下运行的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:48:08.417

编译程序时，您的数字将转换为 25.3999996185302734375，因为这`double`是最接近 25.399999618530273 的值（使用 IEEE-754 64 位二进制浮点）。`double`a到 a 的转换`long double`没有错误。

当您说您可以看到“-0x90(%ebp) 处的双倍”是正确的值时，如果您没有看到 25.3999996185302734375，那么您看不到该位置的实际值——您使用的工具观察价值呈现不准确。

如果您期望`double`准确地表示 25.399999618530273，那么您将感到失望；它没有，您必须设计您的代码以允许这样做或使用其他东西`double`来表示这样的数字。

您使用什么工具测量长度，精度为 0.000000000000001 英寸？那是一把非常好的尺子，带有非常大的放大镜和机器人增强的眼睛吗？

# ado.net - C# 以什么顺序执行 sqlstatement？

> ID：15386672
> 
> 赞同：0
> 
> 时间：2013-03-13T13:26:35.600
> 
> 标签：ado.net

我有两个通过外键和主键约束相关的表。Patient 表中的 Visit_Number 必须存在于 Visit 表中。在我的代码中定义创建我的连接字符串的两个实例，以便我可以使用一个实例插入记录：VisitNumber 在访问首先表，然后另一个实例在患者表中插入记录，相信绳子是从上到下运行的。但事实并非如此。我仍然得到外键约束错误：

```
Error Number:547 
Error MessageThe INSERT statement conflicted with the FOREIGN KEY constraint "Patient_Vist_FK".
 The conflict occurred in database "TestDB", table "dbo.Visit", column 'Visit_Number'.
The statement has been terminated.On line Number: 1 
```

意味着代码按我的预期运行。请问您有更好的方法吗，为什么我的代码不起作用：

```
protected void btn_save_Click(object sender, EventArgs e)
    {

        string connect = System.Configuration.ConfigurationManager.ConnectionStrings["db_connection"].ToString();
        SqlConnection con = new SqlConnection(connect);
        SqlConnection con2 = new SqlConnection(connect);
        string visitnumber = txtVistNumber.Text.ToString();
        string insert_statement = "Insert into Patient(Patient_Number,FirstName,LastName,Gender,Tribe,Date_Of_Birth,Visit_Number)"
            + "Values(@Patient_Number,@FirstName,@LastName,@Gender,@Tribe,@Date_Of_Birth,@Visit_Number)";
        string insert_stament2 = "Insert into Visit(Visit_Number)"
            + "Values(@Visit_Number)";

        SqlCommand cmd = new SqlCommand(insert_statement, con);
        SqlCommand cmd2 = new SqlCommand(insert_stament2, con2);

        cmd2.Parameters.AddWithValue("@Visit_Number", txtVistNumber.Text);
        cmd.Parameters.AddWithValue("@Patient_Number",txtpatientNum.Text);
        cmd.Parameters.AddWithValue("@FirstName",txtfirstName.Text);
        cmd.Parameters.AddWithValue("@LastName",txtlastname.Text);
        cmd.Parameters.AddWithValue("@Gender", drl_gender.SelectedValue);
        cmd.Parameters.AddWithValue("@Tribe",DropDownList1.Text);
        cmd.Parameters.AddWithValue("@Date_Of_Birth", val_age.Text);
        cmd.Parameters.AddWithValue("@Visit_Number", txtVistNumber.Text);

        try
        {
            using (con)
            {
                con.Open();
                int count = cmd.ExecuteNonQuery();
                if (count > 0)
                {
                    Response.Write("<script language=javascript>alert('Record Sucessfully Inserted!');</script>");
                    //Success_Message.Text = "Record inserted";
                    txtpatientNum.Text = String.Empty;
                    txtfirstName.Text = String.Empty;
                    txtlastname.Text = String.Empty;
                    txtVistNumber.Text = String.Empty;
                    DropDownList1.Text = String.Empty;
                    val_age.Text = String.Empty;

                }

            }

        }
        catch (SqlException ex)
        {

            {
                VisitError_Message.Text = "Error Number:" + ex.Number.ToString() + " Error Message" + ex.Message + "On line Number" + ": " + ex.LineNumber;
            }

        }
        catch (NullReferenceException nullexception)
        {
            VisitError_Message.Text = "Error Occurred, Error Type:" + nullexception.GetType().ToString() + "Error Message:" + nullexception.Message;
        }
        catch (DllNotFoundException dllexception)
        {
            VisitError_Message.Text = dllexception.GetType().ToString() + dllexception.Message;
        }

        finally
        {
            con.Close();
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:39:37.180

你没有执行你的cmd2，你必须在cmd2中执行插入Visit_Number然后执行你的cmd，你可以测试这个代码

```
 using (con2)
        {
            con2.Open();
            cmd2.ExecuteNonQuery();
        } 
```

然后你可以执行你的cmd

```
 using (con)
        {
            con.Open();
            int count = cmd.ExecuteNonQuery();
        } 
```

如果您愿意，您可以使用相同的连接来完成工作

```
 string connect = System.Configuration.ConfigurationManager.ConnectionStrings["db_connection"].ToString();
    SqlConnection con = new SqlConnection(connect);
    string visitnumber = txtVistNumber.Text.ToString();
    string insert_statement = "Insert into Patient(Patient_Number,FirstName,LastName,Gender,Tribe,Date_Of_Birth,Visit_Number)"
        + "Values(@Patient_Number,@FirstName,@LastName,@Gender,@Tribe,@Date_Of_Birth,@Visit_Number)";
    string insert_stament2 = "Insert into Visit(Visit_Number)"
        + "Values(@Visit_Number)";

        using(con)
        {
            con.open;

            SqlCommand cmd2 = new SqlCommand(insert_stament2, con);

            cmd2.Parameters.AddWithValue("@Visit_Number", txtVistNumber.Text);
            cmd2.ExecuteNonQuery();

            SqlCommand cmd = new SqlCommand(insert_statement, con);

            cmd.Parameters.AddWithValue("@Visit_Number", txtVistNumber.Text);
            cmd.Parameters.AddWithValue("@Patient_Number",txtpatientNum.Text);
            cmd.Parameters.AddWithValue("@FirstName",txtfirstName.Text);
            cmd.Parameters.AddWithValue("@LastName",txtlastname.Text);
            cmd.Parameters.AddWithValue("@Gender", drl_gender.SelectedValue);
            cmd.Parameters.AddWithValue("@Tribe",DropDownList1.Text);
            cmd.Parameters.AddWithValue("@Date_Of_Birth", val_age.Text);
            cmd.Parameters.AddWithValue("@Visit_Number", txtVistNumber.Text);
            cmd.ExecuteNonQuery();      
    } 
```

# php - 注销功能适用于一台服务器而不是另一台服务器？

> ID：15386673
> 
> 赞同：0
> 
> 时间：2013-03-13T13:26:35.700
> 
> 标签：php

我有一个非常基本的 PHP 注销文件，它将破坏用户的会话并将他们从他们的帐户中注销。此 PHP 文件可在使用 PHP 5.2.17 (000webhosting) 的服务器上运行。

但它不适用于 PHP 5.3.21 的服务器，它基本上不会注销用户。

这是代码：

```
<?php
session_start();

session_destroy(); 
$_SESSION = array();
if(!session_is_registered('id')){ 
$msg = "You are now logged out";
} else {
$msg = "<h2>could not log you out</h2>";
} 
?> 
<html>
<body>
<?php echo "$msg"; ?><br>
<p><a href="login.php">Click here</a> to return to our home page </p>
</body>
</html> 
```

有谁知道是什么导致了这个问题？

我也在新服务器上使用了它，但仍然无法正常工作：

```
<?php
session_start();
unset($_SESSION['id']);
session_destroy(); 
$_SESSION = array();
if(!isset($_SESSION['id'])){ 
$msg = "You are now logged out";
} else {
$msg = "<h2>could not log you out</h2>";
} 
?> 
<html>
<body>
<?php echo "$msg"; ?><br>
<p><a href="login.php">Click here</a> to return to our home page </p>
</body>
</html> 
```

这是我到目前为止所拥有的：

```
<?php 
error_reporting(E_ALL);
ini_set('display_errors', '1');
?>
<?php
session_start();
$_SESSION[ 0 ] = "id";
session_destroy(); 
unset($_SESSION['0']);
if(!isset($_SESSION['0'])){ 
$msg = "By Clicking The Button Below, You Will Agree That You will Be Logged Out.";
} else {
$msg = "<h2>could not log you out</h2>";
} 
?> 
```

很奇怪，我必须从浏览器刷新一次成员页面，这样它才会显示用户已注销。如果我不刷新页面，它将保持登录状态！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:42:26.463

**session_is_registered()**已*弃用*，因此请尝试使用以下方法：

→ 在调用**session_register()的页面上**

```
 session_start();
     $_SESSION[ 0 ] = "id"; // in place of session_register() 
```

→ 在您使用**session_is_registered()的页面上**

→**编辑：**包含刷新标签作为会话错误的“ *macgyver fix ”*

```
 session_start();
     echo '<meta http-equiv="refresh" content="0">'; // auto-refresh

     if( !isset( $_SESSION[ 0 ] ) ) // in place of session_is_registered()
     { 
          echo "You are now logged out"; 
     }
     else 
     {
          echo "<h2>could not log you out</h2>";
     } 
```

# r - R矩阵乘法

> ID：15386678
> 
> 赞同：0
> 
> 时间：2013-03-13T13:26:47.553
> 
> 标签：r, matrix, state-space

我有一个列表，R=

```
[[1]]
     [,1] [,2]
[1,]  100    0
[2,]    0  100

[[2]]
             [,1]       [,2]
[1,] 0.0006364031  0.2521204
[2,] 0.2521204236 99.9993643` 
```

我想这样做`F %*% R`

```
 F
[1,] 1 -6.264917e-04
[2,] 1  1.575666e-04 
```

如`F[1,]`矩阵乘以`R[[1]]`，`F[2,]`矩阵乘以`R[[2]]`

我该怎么做呢？

对不起。我想我被误解了。我真正想要的是`F[1,]%*%R[[1]]%*%t(F[1,])`和`F[2,]%*%R[[2]]%*%t(F[2,])` @Sven Hohenstein

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T13:40:08.787

```
mapply("%*%", as.data.frame(t(F)), R, SIMPLIFY = FALSE)

$V1
     [,1]        [,2]
[1,]  100 -0.06264917

$V2
             [,1]     [,2]
[1,] 0.0006761289 0.267877 
```

* * *

**更新**

回答你的第二个问题：

```
lapply(R, function(x) F %*% x %*% t(F))

[[1]]
          [,1]      [,2]
[1,] 100.00004  99.99999
[2,]  99.99999 100.00000

[[2]]
             [,1]         [,2]
[1,] 0.0003597493 0.0005083061
[2,] 0.0005083062 0.0007183373 
```

* * *

**更新**

要回答您更新的问题：

```
mapply(function(x, y) y %*% x %*% as.matrix(y), R, as.data.frame(t(F)), 
       SIMPLIFY = FALSE)

[[1]]
     [,1]
[1,]  100

[[2]]
             [,1]
[1,] 0.0007183373 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T13:33:43.080

```
R <- list(matrix(c(100,0,0,100), 2), matrix(c(0.0006364031,0.2521204236,0.2521204,99.9993643), 2))
F <- matrix(c(1, 1, -6.264917e-04,  1.575666e-04), 2)

lapply(1:2, function(x) F[x,] %*% R[[x]])
## [[1]]
##      [,1]        [,2]
## [1,]  100 -0.06264917
## 
## [[2]]
##              [,1]     [,2]
## [1,] 0.0006761289 0.267877 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T13:59:12.350

只需这样做：

```
> F[1,]%*%R[[1]]
     [,1]        [,2]
[1,]  100 -0.06264917

> F[2,]%*%R[[2]]
             [,1]     [,2]
[1,] 0.0006761289 0.267877 
```

您是否希望以某种特定方式存储它们？

# asp.net - 复选框的值为 0 和 -1？

> ID：15386681
> 
> 赞同：0
> 
> 时间：2013-03-13T13:26:53.657
> 
> 标签：asp.net, vb.net, .net-1.1, asp.net-1.1

我的网络应用程序上有一些复选框，还有一个保存按钮。当我单击保存按钮时，我将`checked`复选框的状态保存到数据库中。

当未选中复选框时，我`0`在数据库中得到 '。但是，当它们是 时`checked`，我会`-1`在数据库中获取 '。我期待`1`的。`-1`检查状态是否正常？

**示例代码：**

```
Function ProcessAction(ByVal checkbox1 As Integer, ByVal checkbox2 As Integer) As Integer

    connection = New SqlConnection(ConfigurationSettings.AppSettings("connString"))

    command = New SqlCommand("stored_procedure_name_here", connection)
    command.CommandType = CommandType.StoredProcedure

    command.Parameters.Add(New SqlParameter("@id", SqlDbType.Int, 4)).Value = 100
    command.Parameters.Add(New SqlParameter("@checkbox1", SqlDbType.Int, 4)).Value = checkbox1
    command.Parameters.Add(New SqlParameter("@checkbox2", SqlDbType.Int, 4)).Value = checkbox2

    command.Connection.Open()
    command.ExecuteNonQuery()
    command.Connection.Close()

    Return 1
End Function 
```

**来电：**

```
Sub ButtonClick(ByVal Source As Object, ByVal E As EventArgs)
    ProcessAction(checkbox1.Checked, checkbox2.Checked)
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:29:34.377

很大程度上取决于两者之间的代码，但布尔真值通常表示为整数值 -1。这完全取决于您在值被持久化之前如何处理它。如果您需要进一步的帮助，一些代码会很有用。

* * *

编辑：添加的代码显示您依赖于从布尔到整数的隐式转换，导致这个 -1 值。在 VB 中，根据版本，您可以使用`Iif(checkbox1.Checked, 1, 0)`或`If(checkbox1.Checked, 1, 0)`。或者，将值保留为布尔值，并保存到适当的底层 DBMS 数据类型（如果有） - 例如，在 SQL Server 中，这将是一种`bit`数据类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:36:36.180

在 .NET 中这些值是真值和假值，但数据库可能以不同方式表示这些值。例如，[Access 使用 -1 作为“真”值。](https://stackoverflow.com/questions/8940986/how-to-read-yes-no-value-as-boolean-from-ms-access)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:01:10.840

我认为你需要使用如下代码

```
 Sql = CheckBoolean(Checkbox.checked)
Function CheckBoolean(Value As Boolean)
    If Value Then Return "-1"
    Return "0"
End Function 
```

# javascript - jQuery：单击主体时隐藏（）框而不是（）元素本身？

> ID：15386686
> 
> 赞同：3
> 
> 时间：2013-03-13T13:27:15.540
> 
> 标签：javascript, jquery

我的`<a href="#" id="btn">Show Box</a>`DOM 中有一个地方。此外，我有一个`div#overlay`默认设置为`display:none;`.

```
// Toggle Overlay
$('#btn').click(function(e) {
    e.preventDefault();
    $('#overlay').toggle();
})

$('body').not('#btn, #overlay').click(function() {
    if ( $('#overlay').is(':visible') ) $('#overlay').hide();
}); 
```

为什么这不起作用？我希望`#btn`在单击时切换（）覆盖。但是，当覆盖层可见并且我单击文档上的任意位置（`#btn`自身或除外`#overlay`）时，我希望覆盖层也被隐藏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T13:28:35.283

您正在捕获 a `click`on `body`which 本身*从来不是* `#btn`or `#overlay`，因此它无法按预期工作。你需要检查的是`event.target`

IE

```
$('body').click(function(e) {
    var target = $(e.target);
    if(!target.is('#btn') && !target.is('#overlay')) {
       if ( $('#overlay').is(':visible') ) $('#overlay').hide();
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T13:30:35.157

用于`event.target.id`比较点击区域的`id`

```
$('body').click(function(e) {
   if(e.target.id != 'btn' && e.target.id != 'overlay')
      if ( $('#overlay').is(':visible') ) $('#overlay').hide();
}) 
```

# ssl-certificate - 在 symfony 2.1 中使用证书登录

> ID：15386687
> 
> 赞同：1
> 
> 时间：2013-03-13T13:27:16.183
> 
> 标签：ssl-certificate, single-sign-on, symfony-2.1

我知道在 Symfony 2.1 中可以通过证书提供登录。但我找不到实现示例。

有人知道如何在 Symfony 2.1 中配置基于证书的登录吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:35:33.217

Symfony2 Authentication configuration 有一个很好的概述 - 我建议通读它。这是所需部分的链接：

[http://brentertainment.com/other/docs/book/security/authentication.html#x-509-certificates](http://brentertainment.com/other/docs/book/security/authentication.html#x-509-certificates)

# sql - T-SQL 脚本当前用户数据库权限

> ID：15386692
> 
> 赞同：3
> 
> 时间：2013-03-13T13:27:22.940
> 
> 标签：sql, tsql, user-permissions

有时我必须将数据库从我们的生产 SQL 服务器恢复到测试 SQL 实例。当数据库恢复后，我们手动为恢复的数据库恢复正确的访问权限（例如数据库所有者/读取器/写入器）。此过程运行良好，除了必须在还原之前手动截取权限，然后从拍摄的图像中重新应用它们。

是否有一种简单的方法可以在数据库还原之前使用 T-SQL 存储用户的当前权限，然后在还原完成后重新应用这些相同的权限？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-28T13:27:25.840

您的问题的答案很可能是杰夫的答案。

但是 Howard 的脚本非常实用，我只是添加了一个列，它会生成带有信息的 TSQL 语法。您可以复制它并作为 SQL 运行以将权限“复制”到另一个数据库。

```
SELECT 
dp.permission_name collate latin1_general_cs_as    AS Permission,
t.TABLE_SCHEMA + '.' + o.name AS Object,
dpr.name AS Username
, 'GRANT ' + dp.permission_name collate latin1_general_cs_as 
    + ' ON ' 
    + t.TABLE_SCHEMA 
    + '.' 
    + o.name 
    + ' TO ' 
    +  dpr.name
FROM sys.database_permissions AS dp
INNER JOIN sys.objects AS o ON dp.major_id=o.object_id
INNER JOIN sys.schemas AS s ON o.schema_id = s.schema_id
INNER JOIN sys.database_principals AS dpr ON dp.grantee_principal_id=dpr.principal_id
INNER JOIN INFORMATION_SCHEMA.TABLES t
    ON  TABLE_NAME = o.name                
WHERE dpr.name NOT IN ('public','guest')
ORDER BY
   Permission, Object,Username 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-20T22:05:48.340

```
SELECT 
dp.permission_name collate latin1_general_cs_as    AS Permission,
t.TABLE_SCHEMA + '.' + o.name AS Object,
dpr.name AS Username
FROM sys.database_permissions AS dp
INNER JOIN sys.objects AS o ON dp.major_id=o.object_id
INNER JOIN sys.schemas AS s ON o.schema_id = s.schema_id
INNER JOIN sys.database_principals AS dpr ON dp.grantee_principal_id=dpr.principal_id
INNER JOIN INFORMATION_SCHEMA.TABLES t
        ON  TABLE_NAME = o.name                
WHERE dpr.name NOT IN ('public','guest')
ORDER BY
  Permission, Object,Username 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T14:54:08.967

有一个非常有用的功能： sys.fn_my_permissions ( securable , 'securable_class' ) 它使您可以查看当前用户对指定对象的有效权限，所以我不知道您是否可以简单地从中构建 GRANT/DENY 命令。我从来没有那样用过。在您的情况下，您将以另一个用户身份运行它：

```
EXECUTE AS USER = '<username>';
GO
SELECT *
FROM fn_my_permissions(null, 'SERVER') 
GO

SELECT *
FROM fn_my_permissions('<DBNAME>', 'Database')
ORDER BY subentity_name, permission_name ;

REVERT;
GO 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-15T18:53:47.840

这是@Fabian 编写的脚本的修改版本，以便我还可以编写存储过程的权限。还添加了 QUOTENAME，因此适当的内容在括号中。

```
SELECT 
    dp.permission_name collate latin1_general_cs_as    AS Permission,
    t.TABLE_SCHEMA + '.' + o.name AS TableName,
    rt.ROUTINE_SCHEMA + '.' + o.name AS ProcedureName,
    dpr.name AS Username
    , 'GRANT ' + dp.permission_name collate latin1_general_cs_as 
        + ' ON ' 
        + QUOTENAME(CASE WHEN t.TABLE_SCHEMA IS NOT NULL THEN t.TABLE_SCHEMA ELSE rt.ROUTINE_SCHEMA END )
        + '.' 
        + QUOTENAME(o.name)
        + ' TO ' 
        +  QUOTENAME(dpr.name)
FROM sys.database_permissions AS dp
INNER JOIN sys.objects AS o ON dp.major_id=o.object_id
INNER JOIN sys.schemas AS s ON o.schema_id = s.schema_id
INNER JOIN sys.database_principals AS dpr ON dp.grantee_principal_id=dpr.principal_id
LEFT outer JOIN INFORMATION_SCHEMA.TABLES t ON  TABLE_NAME = o.name              
LEFT OUTER JOIN INFORMATION_SCHEMA.ROUTINES rt ON rt.ROUTINE_NAME = o.name
WHERE dpr.name NOT IN ('public','guest')
ORDER BY Permission, TableName, ProcedureName, Username 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T15:44:51.053

您正在处理的问题称为[孤立用户](http://msdn.microsoft.com/en-us/library/ms175475.aspx)。

这是我过去使用过的一个脚本（我不得不从内存中将它放在一起，您应该仔细验证它）：

```
create table #users (UserName sysname, UserSID varbinary(85))

Insert into #users
exec sp_change_users_login @Action='Report';

declare mycursor cursor for select * from #users;
open mycursor;

declare @UserName sysname;
declare @UserSID varbinary(85);

fetch next from mycursor
into @UserName, @UserSID

while @@FETCH_STATUS = 0
begin
    exec  sp_change_users_login @Action='update_one', @UserNamePattern=@UserName, @LoginName=@UserName;
end
close mycursor;
deallocate mycursor; 
```

这个脚本做了一个重要的假设。用户登录名和他们在数据库中的用户名匹配。如果不是这样，您将不得不更改发送到 sp_change_users_login 的@LoginName 参数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-26T09:57:01.603

将此与有关权限的答案结合起来：

```
SELECT 'EXEC sp_addrolemember @rolename ='
+ SPACE(1) + QUOTENAME(USER_NAME(rm.role_principal_id), '')
+ ', @membername =' + SPACE(1) + QUOTENAME(USER_NAME(rm.member_principal_id), '') 
AS 'Role Memberships'
FROM sys.database_role_members AS rm
ORDER BY rm.role_principal_id 
```

# jquery - 拖放 - 不会从 droppable 中退出

> ID：15386694
> 
> 赞同：1
> 
> 时间：2013-03-13T13:27:23.503
> 
> 标签：jquery

我有一个项目`drag and drop + clone + resizable`，到目前为止，我已经设法做对了所有事情。我可以克隆一个元素，这个元素可以调整大小（可调整大小）

但是，问题是：
我克隆元素和游戏区域是可放置的，并且可能会离开该区域并在屏幕上保持可放置（它们只能在游戏元素可放置区域时被克隆，但在被克隆后它们可以在屏幕上拖动）
我想知道有没有办法让它们只能在可放置区域内拖动，不能离开可放置区域

PS：对不起，如果英文有误，我正在使用谷歌翻译..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:35:50.253

如果您使用的是 jquery-ui，它是可能的。只需`containment`在您所在地区使用选择器即可。查看此[示例](http://jqueryui.com/draggable/#constrain-movement)以获取更多信息。

# .net - Windows Phone 8 全屏页面

> ID：15386700
> 
> 赞同：2
> 
> 时间：2013-03-13T13:27:35.973
> 
> 标签：.net, windows-phone-7, xaml, windows-phone-8, winrt-xaml

我在 Windows Phone 8 的 XAML 中定义了以下页面

```
<phone:PhoneApplicationPage x:Class="MangaRack.View.Phone.View.ChapterView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    shell:SystemTray.IsVisible="False">
    <Grid Background="White">
        <Button BorderThickness="0" Name="ImageButton" Padding="0">
            <Image Name="Image" />
        </Button>
    </Grid>
</phone:PhoneApplicationPage> 
```

网格定义了一个应用于整个屏幕的白色背景，但是网格的内容不在窗口边缘附近，在图像和窗口边缘之间有一个可观察的边距/填充。**如何确保图像直接靠在窗口边缘**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:31:24.530

尝试设置您的图像`Stretch`属性：

```
<Image Name="Image" Stretch="UniformToFill"/> 
```

有关更多信息，请参阅[有关图像拉伸的 MSDN 页面](http://msdn.microsoft.com/en-gb/library/system.windows.media.stretch.aspx)。

此外，您的按钮将在您的图像周围添加一些“填充”。为避免这种情况，您将不得不更改其模板。我会将模板替换为仅呈现内容的模板：

```
 <Button>
         <Button.Template>
            <ControlTemplate TargetType="Button">
                <StackPanel x:Name="stackPanel" Orientation="Horizontal">
                    <ContentPresenter VerticalAlignment="Bottom"/>
                </StackPanel>
            </ControlTemplate>
         </Button.Template>
        <Image Name="Image" Stretch="UniformToFill"/>
      </Button> 
```

虽然，如果您完全删除按钮“chrome”，您也可以直接使用图像并处理图像上的点击/单击事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:53:30.133

您可以将图像放在网格内，以便全屏显示这是 C# 编码

```
 System.Windows.Media.ImageBrush myBrush = new System.Windows.Media.ImageBrush();
        Image image = new Image();
        image.ImageFailed += (s, i) => MessageBox.Show("Failed to load: " + i.ErrorException.Message);
        image.Source = new System.Windows.Media.Imaging.BitmapImage(new Uri(@"/Assets/bg/bg5.jpg/", UriKind.RelativeOrAbsolute));
        myBrush.ImageSource = image.Source;
        grid1.Background = myBrush; 
```

# python - 需要帮助删除 Python 练习中的重复数字

> ID：15386710
> 
> 赞同：0
> 
> 时间：2013-03-13T13:28:16.797
> 
> 标签：python, numbers, duplicates

我应该编写一个程序来消除重复值并返回唯一数字。我必须使用 a`def eliminate(alist)`和 a `def main()`。数字必须从标准输入输入，并且必须用空格分隔。

输出应该如下

> 输入数字：5 3 12 3 544 5 1 7 1
> 
> 数字是：[5, 3, 12, 554, 1, 7]

相反，我得到....

> 输入数字：5 3 12 3 544 5 1 7 1
> 
> 数字是：['5', '', '3', '1', '2', '4', '7']

如何删除空间？此外，我的程序不会将 554 识别为单个数字，而是将其识别为 5 4 4。

这是我到目前为止得到的

```
def eliminate(alist):
    outlist = []
    for element in alist:
        if element not in outlist:
            outlist.append(element)
    return outlist       

def main():
    numbers=input("Enter numbers:")
    alist=list(numbers)
    print("The unique numbers are:",eliminate(alist))
main() 
```

请注意：我不允许为此程序使用 set 类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:38:21.680

你只是给它一系列字符，并要求独特的字符，这似乎是正确的。您需要在空格上拆分字符串，甚至可能转换为数字（我猜是整数）：

```
alist = [int(num) for num in numbers.split(' ')] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:30:48.413

尝试：

```
item for item in myList if item.count(item) == 1 
```

对于你的函数体的逻辑（如果你必须使用它）。将此列表推导的返回传递给变量或打印。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:39:46.630

您将 '' 和 544 作为单独的字符获取，因为在您的输入中，`numbers`不是整数列表。它是一串字符。即使将其转换为列表，它仍然是单个字符的列表。因此，要将其转换为整数，请执行以下操作：

`numbers=map(lambda x:int(x), numbers.split())`

现在，要消除重复项，您可以使用字典（如果不是集合）：

`unique = dict.fromkeys(numbers).keys()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T13:42:32.570

如果您使用，这两个问题都将得到解决：

```
alist = numbers.split() 
```

代替`alist=list(numbers)`

```
>>> numbers = '5 3 12 3 544 5 1 7 1'
>>> alist = numbers.split()
>>> alist
['5', '3', '12', '3', '544', '5', '1', '7', '1'] 
```

解释：

如果您按原样将数字传递给 list() 函数，则它将字符串的每个字符传递给列表成员。这样，'544' 变为 ['5', '4', '4'] 并且 '5 6' 变为 ['5', '6']。

另一方面，split() 通过根据特定分隔符拆分字符串来创建字符串列表，默认情况下，该分隔符是 " " 字符。

# gwt - 将 Wicket 与 GWT 小部件一起使用是个好主意吗？

> ID：15386712
> 
> 赞同：0
> 
> 时间：2013-03-13T13:28:18.257
> 
> 标签：gwt, wicket, integration

过去，我曾与 GWT 和 GXT 合作过很多次，而且我在 Wicket 还比较陌生。

我们希望在现有的 Wicket 应用程序中有小部件。这些小部件是完全独立的“应用程序”。GWT 会是一个很好的解决方案吗？

此外，我们使用大量 Ajax 请求（在当前小部件中）来更新/检索数据。因为我发现 GWT 使用 RPC 机制很好地处理了这些 ajax 请求，所以我认为这可能是一个好主意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:57:33.143

我在中等复杂的环境中使用过 GWT 和 Wicket。只要您将 JavaScript 用于任何集成点，集成就非常顺利。确保您在需要从 GWT 端更新的组件上设置了输出标记 ID，并且您将被设置。

这是否是一个好主意完全取决于您的团队和项目。我用它来将旧的拖放工具集成到我们新的基于检票口的应用程序中。在我们使用 wicket + jquery 重新设计 GWT 应用程序之前，它作为权宜之计非常有效。

# qt - Hover style in Qt Designer

> ID：15386722
> 
> 赞同：2
> 
> 时间：2013-03-13T13:28:33.630
> 
> 标签：qt, qt4, qt-designer

When i put a widget on a form in Qt Designer and change its style, i can omit `{}` parenthesis.

![enter image description here](../Images/809eefa01e3e754690f4827d5acf3adb.png)

Is there a way to change a style for `hover` state without `{}`?

```
QWidget {
    background-color: rgba(32, 255, 8, 95);
    margin-bottom: 3px;
}
QWidget:hover{
    background-color: rgba(32, 8, 255, 95);
} 
```

This works, but i don't like duplication, and that all child widgets of the same class will inherit the style.

# db2 - 我不能让 db2start 在命令行上工作

> ID：15386726
> 
> 赞同：1
> 
> 时间：2013-03-13T13:28:37.107
> 
> 标签：db2

“请求的命令或操作失败，因为用户 ID 没有执行请求的命令或操作的权限。用户 ID：“DB2INST3”。” 那么我可以解决我的问题吗？我无法连接我的 db2 数据库。

# python - 使用 Django 视图上传文件

> ID：15386732
> 
> 赞同：1
> 
> 时间：2013-03-13T13:28:55.650
> 
> 标签：python, django

我正在为 Django 应用程序开发一项功能，该功能将文件（在我的上下文中的图像）上传到服务器。一切正常，但我想知道如何接收上传的文件路径作为回调。

这是我的观点：

```
def post(self, request):
    if request.method == 'POST':
        form = UploadFileForm(request.POST, request.FILES)
        if form.is_valid():
            handle_uploaded_file(request.FILES['uploadedFile'])
            return redirect('/')
    else:
        form = UploadFileForm()
    return render_to_response('index.html', {'form': form}) 
```

我的表格：

```
class UploadFileForm(forms.Form):
    uploadedFile = forms.FileField() 
```

我的处理程序：

```
def handle_uploaded_file(source):
    fd, filepath = tempfile.mkstemp(prefix=source.name, dir=FILE_UPLOAD_DIR)
    with open(filepath, 'wb') as dest:
        shutil.copyfileobj(source, dest)
    return filepath 
```

我知道`handle_uploaded_file(request.FILES['uploadedFile'])`从我的角度来看是我需要作为回调的必需字符串，但是如何在响应中接收它？可以接收图像的路径而不是我的 index.html（它只是为了测试目的），以便在前端部分进行进一步操作。我可能听起来像个菜鸟，但我真的很想如果能以某种方式工作。还有一种方法可以让我的视图处理多个文件上传吗？这是我需要在我的处理程序中更改的东西吗？不好意思提了这么多问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:11:51.060

尝试这个：

```
file_path = handle_uploaded_file(request.FILES['uploadedFile']) 
return render_to_response('index.html', {'form': form, 'file_path': file_path}) 
```

# ruby-on-rails - Active Record Query - 如果提供 nil 值，则查找的默认值

> ID：15386734
> 
> 赞同：1
> 
> 时间：2013-03-13T13:28:57.077
> 
> 标签：ruby-on-rails, ruby, activerecord

我正在我的控制器操作之一中搜索用户。有时，params[:user_id] 将为 nil，在这种情况下，搜索应该产生 current_user。以下两种搜索方法似乎产生相同的结果

```
@user = User.find(params[:user_id]||=current_user) 
```

和

```
@user = User.where('id = ?', params[:user_id]).first || current_user 
```

问题是：

1) 哪种搜索方法更合适，2) 如果 params[:user_id] 为 nil，有没有办法一起绕过搜索？

我确信我可以想出一个 if/else 语句来完成第 2 行，但这对我来说感觉很骇人听闻。但是，也许不是？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T13:36:57.343

这是三元运算符的理想场所

```
@user = params[:user_id] ? User.find(params[:user_id]) : current_user 
```

我想再补充一点。

```
I'm sure I could come up with a if/else statement to accomplish line 2 but that
feels hackish to me. But, maybe it's not? 
```

许多开发人员喜欢使用光滑的单行而不是更具可读性的控制流来变得*可爱。***我也这样做！**`if/else`

 **在编写代码时，请记住可读性远比光滑的单行代码重要得多。话虽如此，您的具体示例是使用三元运算符的好地方，但替代方案`if/else`同样可以接受。Ruby 甚至可以让它比其他一些语言*更酷。*

```
@user = if params[:user_id]
  User.find(params[:user_id])
else
  current_user
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:35:29.457

不知道你要去哪里，但对我来说第一个更像 Rails。

你不需要`=`

```
@user = User.find(params[:user_id]||current_user) 
```**

# javascript - Highchart 实时服务器示例使用大量 cpu

> ID：15386736
> 
> 赞同：1
> 
> 时间：2013-03-13T13:29:03.760
> 
> 标签：javascript, sqlite, highcharts

我有一个嵌入式 linux 系统，它收集一些数据并将其放入 SQLite 数据库中。每秒都会添加新数据。我想从数据库中获取这些数据并将其绘制在带有`highchart`. 所以每一秒都需要在图表中添加一个新点。

我使用以下示例作为起点：[http ://www.highcharts.com/studies/live-server.htm](http://www.highcharts.com/studies/live-server.htm)

它可以工作，但是当我访问该页面时，我的 cpu 使用 50%（我使用 chrome）。如果我绘制 Morge 图，甚至 100%。即使使用实时服务器示例，我也可以看到我的 cpu 使用率在上升。我试图寻找一个遮阳篷，但找不到任何东西。这是最好的方法吗？或者这是一个错误还是我错过了什么？这是我的一些代码：

```
function request_accu_Data() {
    $.ajax({
        url: 'live-accu-data.php', 
        success: function(point) {
            var accu_series = accu_chart.series[0];
                shift = accu_series.data.length > 100; // shift if the series is longer than 100

            // add the point
            accu_chart.series[0].addPoint(eval(point), true, shift);

            // call it again after one second
            setTimeout(request_accu_Data, 500); 
        },
        cache: false
    });
}

$(document).ready(function() {
    accu_chart = new Highcharts.Chart({
        chart: {
            renderTo: 'Accu_graph_container',
            defaultSeriesType: 'spline',
            events: {
                load: request_accu_Data
            }
        },

        tooltip: {
             formatter: function() {

              return false;
               }
        },
            title: {
            text: 'Accu level'
        },
        xAxis: {
            type: 'datetime',
            tickPixelInterval: 150,
            maxZoom: 20 * 1000
        },
        yAxis: {
            minPadding: 0.9,
            maxPadding: 0.9,
            min: 0,
            max: 100,
            title: {
                text: '%',
                margin: 10
            }
        },
        series: [{
            //pointInterval: 3600 * 1000,
            name: 'Accu level',
            data: [
            ]
        }]
    }); 
```

php 代码如下所示：

```
<?php 
// Set the JSON header
header("Content-type: text/json");

$db = new PDO('sqlite:/home/pi/client.db');
$result = $db->query('SELECT * FROM log ORDER BY ROWID DESC LIMIT 1');
foreach($result as $row){
    $ret = intval( $row['Timestamp'])*1000;
    $ret2= intval( $row['Accu_level']);
}

$tot = array($ret,$ret2);

echo json_encode($tot);
?> 
```

我真的希望你能帮助我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T08:57:09.487

我能想到的唯一建议是：

1.  减少轮询服务器的频率。您目前每 500 毫秒轮询一次。
2.  在 highcharts 中禁用动画。
3.  如果您要向超过 1 个系列添加点，请在不重绘图表的情况下添加每个系列，然后在最后重绘。

注意，要禁用动画，您需要设置：

```
animation:false 
```

在图表定义中，但您还需要在 addPoint 调用中禁用它。

```
accu_chart.series[0].addPoint(eval(point), true, shift, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T16:42:09.220

答案很晚，但我建议您不要将 MySQL 用于此类数据。看看 Timestore，RRD 和 noSQL 概念的混合：http: [//www.mike-stirling.com/redmine/projects/timestore](http://www.mike-stirling.com/redmine/projects/timestore) 我将它用于一个项目，它非常快且 CPU 效率很高。

# eclipse - Eclipse：自动复制选定的片段

> ID：15386738
> 
> 赞同：1
> 
> 时间：2013-03-13T13:29:08.263
> 
> 标签：eclipse

当我们选择一个片段时，Eclipse中有什么方法可以自动复制它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:35:06.790

使用以下工具。它会自动将选定的文本（不仅来自 Eclipse）复制到剪贴板。

[自动剪辑X](http://www.softpedia.com/get/Office-tools/Clipboard/AutoClipX.shtml)

# go - 简单添加时间并比较 GO

> ID：15386741
> 
> 赞同：2
> 
> 时间：2013-03-13T13:29:22.993
> 
> 标签：go

嗨，我似乎无法理解在 Go 中进行时间算术的正确方法。

我有一个时间“对象”后来初始化为[Now()](http://golang.org/pkg/time/#Now)并存储。

```
 insertTime time.Time 
```

稍后，我需要查看该项目是否超过 15 分钟。

我该怎么做呢？我是否需要创建一个15 分钟的[持续时间](http://golang.org/pkg/time/#Duration)将其添加到当前时间并进行比较？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T13:37:39.950

[func (Time) After](http://golang.org/pkg/time/#Time.After)会有所帮助，我相信。架构：

```
when := time.Now()

...

if time.Now().After(when.Add(15*time.Minute)) {
        // Conditionally process something if at least 15 minutes elapsed
} 
```

`when`例如，可以是某个结构的字段，而不是变量。

替代方法：

```
deadline := time.Now().Add(15*time.Minute)

...

if time.Now().After(deadline) {
        // Conditionally process something if at least 15 minutes elapsed
} 
```

我个人更喜欢后面的版本。

# c++ - /Mt 和 /clr 不兼容

> ID：15386749
> 
> 赞同：2
> 
> 时间：2013-03-13T13:29:50.593
> 
> 标签：c++, clr, mt

我一直在使用 EIGEN 来求解方程组。我成功编译代码的唯一方法是使用 /CLR。当我尝试构建我的项目时，我注意到为了让我的 exe 在其他电脑上工作，我需要使用 /MT（而不是 DLL）来构建它。问题他们不兼容。如果我删除 /CLR，我的项目将无法编译，如果我离开 DLL，我的 exe 可以在其他电脑上运行，但会提供不切实际的价值。

有人可以建议该怎么做。这是我写的第一个程序。我是一个解方程的机械工程师，请多多包涵。

好的，我只是在网上搜索，但我发现没有 /CLR 就无法构建 Windows 窗体应用程序。

我不确定我的目标机器是否会重新分配 vc。有什么办法可以让我的 exe 和一些 dll 一起使用吗？我经常在小程序中看到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:32:01.263

您需要链接到动态运行时，`/MD`. 您遇到的问题是另一台机器没有安装该运行时。通过在需要运行程序的每台机器上简单地安装适用于您的 Visual Studio 版本的可再发行包来解决这个问题。

# python - 在 web2py 中包含部分 html 文件

> ID：15386753
> 
> 赞同：1
> 
> 时间：2013-03-13T13:29:56.013
> 
> 标签：python, web2py

我是 web2py 的新手，想这样做。我正在做一个演示 Web 应用程序，用户可以在其中查看`reveal.js`多个主题的演示文稿（文件）。这些演示文稿包含所有相同的头标签和脚本..所以我想创建一个名为的视图`default/presentation.html`，然后将所有演示文稿存储为`html/xml`文件并将它们显示在`learn.html`文件中（这些文件只包含文件的一部分，body标签内的东西）。但是我尝试了很多东西，但由于 web2py 的默认转义功能，仍然无法获取 id。请用最简单的方法帮助我。

PS 这是一个很棒的社区，我学习了大部分编程课程。提前致谢。

更新：非常感谢大家。终于找到了使用etree进行xml解析的解决方案。在我看来，

```
 {{for i in tree: }}
    {{=TAG    [i.tag]    (i.text)}}
    {{pass }} 
```

你猜怎么着？效果惊人！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:16:09.237

如果你只是想在页面中插入一些 HTML 而不被转义，你可以使用[`XML()`](http://web2py.com/books/default/chapter/29/05#XML)helper：

```
{{=XML(your_html)}} 
```

如果要包含文件的内容，可以执行以下操作：

```
{{include 'path/to/file'}} 
```

请注意，路径是相对于应用程序的 /views 文件夹的，因此如果它在该文件夹之外，您可以使用`../`.

# android - 当用户可以根据服务器中的数据导航到不同的活动时，我应该在哪个活动背景上显示进度对话框

> ID：15386756
> 
> 赞同：0
> 
> 时间：2013-03-13T13:30:09.447
> 
> 标签：android

在我的应用程序中，我正在创建登录机制。在这种情况下，当用户输入用户名和密码时，会在后台获取数据。基于此获取的数据，用户可以导航到不同的活动。例如，如果用户已注册，如果用户未注册，如果用户名和密码不正确。

我已经实现了所有这些功能。但是在这里我在登录活动上显示进度对话框，然后根据满足的条件导航用户。但是由于数据很大，因此活动布局需要更多时间来加载，我已经关闭了对话框在 AsyncTask 的 onPostMethod 中。

因此，2-3 秒的登录活动在没有对话框的情况下处于静止状态（因为它已经关闭）因此我应该在哪里显示正在登录的对话框。

请告诉我是否需要任何其他细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:35:29.237

我会根据响应检查您是否仍将使用 Dialog UI 组件。如果它涉及需要一些时间才能完成的任务，我不会在那一刻关闭 ProgressDialog。

我会等到您的后续活动中的操作完成，然后在那里将其关闭。不确定我们作为一个社区还能提供什么作为没有任何代码或直接问题的解决方案。我们可能只是推测并提出建筑/结构响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:35:38.257

只需导航到新活动即可处理所有数据`doInBackground`。`onPostExecute`检查用户是否注册等在`doInBackground`方法中使用一些标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:48:47.237

在您的 startActivity() 调用后立即关闭 progressDialog。*确保在 UI 线程中将其关闭。

我正在为 android c# 工作，我的代码将如下所示（只需将其更改为 java）：

```
 var myIntent = new Intent(this, typeof (MyActivity));

 StartActivity(myIntent);
 _progressDialog.Dismiss(); 
```

# python - 我似乎无法弄清楚如何生成多个随机数来等于 10 的分数

> ID：15386763
> 
> 赞同：1
> 
> 时间：2013-03-13T13:30:31.520
> 
> 标签：python

我要做的就是将 PlayerOne 的随机生成数字与 PlayerTwo 的数字进行比较。数字在 1 到 13 之间。每次有人获胜，他们都会得到 1 分。第一个到 10 的玩家是赢家。我已经为每个玩家生成了第一个随机数，并创建了一个得分图表，将获胜者加 1。我不明白如何通过单击返回按钮而不是自动生成两次。另外，我不明白如何使我制作的得分表自动了解哪个玩家获胜并为获胜玩家加分。谢谢。

```
import random

for PlayerOne in range(1):
    Score = 1
    PlayerOne = random.randint(1, 13)
    print(("Player One: %s" % PlayerOne))

    for PlayerTwo in range(1):
        PlayerTwo = random.randint(1, 13)
        print(("Player Two: %s" % PlayerTwo))

    if PlayerOne > PlayerTwo:
        print("Player One wins!")
        print(("Player One: %s" % Score))
        print("Player Two: 0")

    else:
        print("Player Two wins!")
        print("\nScore:")
        print("Player One: 0")
        print(("Player Two: %s" % Score)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:38:13.673

考虑您的代码片段：

```
for PlayerTwo in range(1):
  PlayerTwo = randint()
  print PlayerTwo 
```

`range(1)`等价于`[0]`，例如一个列表，其中一个元素的值为零。因此，您的 for 循环只执行一次，将值 0 分配给变量 PlayerTwo。随后，您用其他整数覆盖此变量。

其他人建议您查看 for 循环如何工作的原因是您的 for 循环中的代码只执行一次，这可能不是您想要做的。让你感到困惑的可能不是 for 循环，它可能是`range`.

因为您不知道发生的确切游戏数量，所以 for 循环可能并不理想。

这是我将如何解决此问题的伪代码（不是真实代码）。尝试了解我为什么使用`while`而不是`for`：

```
while p1score < 10 and p2score < 10:
  p1 = randint()
  p2 = randint()
  if p1 > p2:
    p1score++
  elif p2 > p1:
    p2score++ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:17:04.003

我想我也明白了，谢谢 aestrivex！如果有人看到有任何问题或我看起来不正确的东西，请告诉我。

```
import random

input ('Please press "Enter" to begin the automated War card game.')

PlayerOneScore = 0
PlayerTwoScore = 0

while PlayerOneScore < 10 and PlayerTwoScore < 10:
    PlayerOne = random.randint(1, 13)
    PlayerTwo = random.randint(1, 13)
    if PlayerOne > PlayerTwo:
        PlayerOneScore += 1

    elif PlayerTwo > PlayerOne:
        PlayerTwoScore += 1

    print("Player One: ",PlayerOne)
    print("Player Two: ",PlayerTwo)
    print("\nScoreboard:")
    print("Player One Score: ",PlayerOneScore)
    print("Player Two Score: ",PlayerTwoScore,"\n\n\n")

    if PlayerOne > PlayerTwo:
        print("Player One Wins!")

    else:
        print("Player Two Wins!") 
```

# linq - "SELECT VALUE" - LINQ/Entity Framework 查询中的值关键字

> ID：15386766
> 
> 赞同：27
> 
> 时间：2013-03-13T13:30:37.733
> 
> 标签：linq, entity-framework, linq-to-entities

此语句中的关键字“价值”是什么意思，我该去哪里了解更多信息？
如果我省略关键字“价值”会发生什么？在下面的代码中，z 是一个实体框架类。

```
string queryString = "SELECT VALUE q from x.zs as q where q.a = @parm;"
ObjectQuery<z> query = context.CreateQuery<z> 
    (queryString, new ObjectParameter("parmname",parmvalue)); 
return query.First(); 
```

（这是考试练习题的一部分）。

上面的代码在一个返回 z 类型变量的函数中。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-13T13:35:04.727

那是[实体 SQL](http://msdn.microsoft.com/en-us/library/bb738683.aspx)语法。`Value`关键字只允许指定一个值，并且不添加行包装器。

阅读[有关 ESQL 中的 SELECT 语句的文章](http://msdn.microsoft.com/en-us/library/bb399554.aspx)

> Entity SQL 支持 SELECT 子句的两种变体。第一个变体，行选择，由 SELECT 关键字标识，可用于指定一个或多个应投影的值。由于在返回值周围隐式添加了行包装器，因此查询表达式的结果始终是多行集。
> 
> 行选择中的每个查询表达式都必须指定一个别名。如果未指定别名，Entity SQL 将尝试使用别名生成规则生成别名。
> 
> SELECT 子句的另一个变体值选择由 SELECT VALUE 关键字标识。它只允许指定一个值，并且不添加行包装器。

所以，如果你想`z`从你的查询中具体化对象，你应该使用`SELECT VALUE`语法（否则你会得到异常：从 MaterializedDataRecord 转换为 z 类型无效）。

没有`VALUE`关键字，您将获得一组行：

```
string esql = "SELECT q from x.zs as q where q.a = @parm;";
ObjectQuery<DbDataRecord> query = context
       .CreateQuery<DbDataRecord>(esql, new ObjectParameter("parm",parmvalue)); 
var result = query.First(); 
```

# .net - 远程控制 Quartz.net 服务器

> ID：15386776
> 
> 赞同：1
> 
> 时间：2013-03-13T13:30:56.450
> 
> 标签：.net, sql, quartz.net

我打算将 Quartz.net 服务器设置为 Windows 服务，并使用 ADO Job Store 设置和安排作业。但是，一旦投入生产，我将无法访问 Win Svc。我想创建一个在 SQL 表中存储简单命令的网页。然后让工作拾取这些命令并在 Quartz 服务器上执行它们。我已经用一些本土的 Win Svcs 做到了这一点，而且效果很好。

例如，我有硬停止、暂停、取消暂停、重新加载配置等命令。我希望能够做这些事情并记录这些操作，但对于我的 Quartz 服务器。

这可行吗？有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:00:54.400

看来[水晶石英面板](https://github.com/guryanovev/CrystalQuartz)做了一些我正在寻找的东西。

# java - 将 Jython 脚本转换为 .jar 文件

> ID：15386777
> 
> 赞同：1
> 
> 时间：2013-03-13T13:30:58.970
> 
> 标签：java, python, jar, zip, jython

我一直在尝试将 jython 脚本转换为 .jar 文件。我跟着，

[使用 Jython 将我的 Python 脚本作为 JAR 文件分发？](https://stackoverflow.com/questions/1252965/distributing-my-python-scripts-as-jars-with-jython)

上面的链接以及其中显示的 Jython wiki 链接使用名为“zip”的命令行脚本。它就像 => zip myapp.jar Lib

所以。我在 Windows 机器上，所以我在命令行上找不到任何脚本作为“zip”，可能是它的 Linux 脚本。帮我在windows机器上做

其次是我的 jython 脚本中使用的外部 .jar 很少，因此上面的链接说要使用清单。但我想将所有外部 jar 打包到单个 myapp.jar（例如）文件中以运行。就像 java -jar myapp.jar 一样，有没有办法打包外部 jar？

所以请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:17:50.130

您可以使用`jar`命令将文件添加到`.jar`存档。就像：

```
jar uvf jythonlib.jar Lib 
```

用于`jar`查看有关选项和使用示例的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:20:51.870

如您所见，代码`zip -r jythonlib.jar Lib`和`zip myapp.jar Lib/showobjs.py`，只需将文件添加到 jar 存档中。该`zip`程序是执行此操作的特定工具，但它不是唯一的。在 Windows 上，我建议使用[7-zip](http://www.7-zip.org/)来创建 jar。而不是`zip -r jythonlib.jar Lib`，打开一个新的 7-zip 窗口，创建一个名为的新存档（zip 协议）`jythonlib.jar`并添加`Lib`位于 $JYHTON_HOME 中的名为的文件夹。然后继续使用指南，当您到达 时`zip myapp.jar Lib/showobjs.py`，只需将调用的文件拖放`showobjs.py`到现有的 7-zip 窗口中即可。这应该将文件添加到存档中。

# javascript - 特定要求的密码正则表达式

> ID：15386778
> 
> 赞同：2
> 
> 时间：2013-03-13T13:31:02.923
> 
> 标签：javascript, regex

我要为以下要求编写一个正则表达式

1.  至少一个字符
2.  至少一位数
3.  长度必须为 8
4.  至少一个特殊字符（可以是任何特殊字符）

前三个很容易，但找不到至少限制特殊字符（任何可能的特殊字符`',":*^%>?`等）的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:33:28.600

您可以结合使用前瞻来解决这些问题：

1.  `(?=.*[a-zA-Z])`
2.  `(?=.*\d)`
3.  `.{8}`
4.  `(?=.*[^\da-zA-Z])`

最后一个只需要一个非字母和非数字，这可能是迄今为止指定您想要一个有点“特殊”字符的最简单方法。

所以最后你有

```
^(?=.*[a-zA-Z])(?=.*\d)(?=.*[^\da-zA-Z]).{8}$ 
```

# ios - 强制解除使用 strong 声明的属性

> ID：15386779
> 
> 赞同：1
> 
> 时间：2013-03-13T13:31:04.957
> 
> 标签：ios, objective-c, properties, memory-management

有没有办法强制`@property (strong, nonatomic)`释放声明为强的类中的属性？

我收到了来自崩溃的报告，其中一个属性正在被释放，但随后应用程序试图从 AFHTTPRequest 中的 CompletionBlock 访问它们。但由于该属性被释放，应用程序崩溃了。

我无法重现该场景，因此我需要一些允许我强制释放该属性仅用于测试该场景的东西。

我尝试使用 dealloc 方法，但 ARC 禁止它。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T13:36:26.610

您不能在 ARC 下“强制”释放对象。但是，您可以（在某种程度上）通过将任何对象分配给 nil 而不在方法的其余范围内使用它来建议删除。如果您在访问解除分配的对象时遇到问题，那么您需要正好相反：保留拥有的对象，这样它就不会解除分配任何属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T13:37:20.203

强制释放强属性中分配的内存的唯一方法是将其设置为 nil。

方法：

```
@property (nonatomic, strong) NSArray *testArray;

testArray = //array return from some method;

testArray = nil; //It'll release the memory associated 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T13:51:54.640

将 nil 设置为该对象以强制释放内存

前任 ：

```
@property (nonatomic , strong) NSString *str;

str = nil; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-21T13:25:52.747

我现在自己解决了同样的问题。

我在我的应用程序中的几个点设置了对 nil 的明显引用，但对象仍然不会消失。

该对象使用了计时器，这些计时器都对该对象具有强引用。一旦我使这些无效， dealloc 终于运行了！

正如其他人发布的那样，对对象的所有强引用必须为 nil 才能运行 dealloc。此外，在追踪这些参考资料时要绝对彻底！

# php - 第一次使用课程 - 找不到课程

> ID：15386781
> 
> 赞同：1
> 
> 时间：2013-03-13T13:31:09.413
> 
> 标签：php, class

因此，我认为将是一个简单的 50 多行代码已经发展成比我以前做过的任何事情都要大得多的东西，我决定将我的代码移动到类中。

这对我来说是第一次，所以我不是 100% 认为新结构应该如何组合在一起......

所以我创建了一个名为 weather in 的类`weather.php`：

```
class weather
{
    // various variables and functions like getWeather() go here
} 
```

我在 index.php 中引用它如下：

```
require_once("weather.php");

// instantiate the weather class.
$w = new weather();

// get the weather by calling the getWeather() function
$weather = $w->getWeather(); 
```

根据我对我在 SO 和其他网站上看到的内容的理解（也去过 PHP 手册），这应该可以工作，但是，我不断收到这个错误：

> 致命错误：在第 4 行的 C:\usbwebserver\root\weather\index.php 中找不到类“天气”

第 4 行是我在`$w`.

我不确定我在这里做错了什么，有人可以向我解释一下吗？

**编辑**
在类似乎没有向浏览器写入任何内容之前 在顶部添加回声`weather.php`，但是，写入浏览器的内容似乎是类中存在的代码......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:36:19.950

您似乎缺少`weather.php`文件中的 php 开始标记。

# mysql - 可以识别不同值和最大值的 SQL 查询

> ID：15386787
> 
> 赞同：1
> 
> 时间：2013-03-13T13:31:14.837
> 
> 标签：mysql, sql, select, distinct, max

我需要一条 sql 语句来选择不同的记录，同时比较数据库中的最大或最新日期。这是我的表fleetschedule。它包含fleetschedule id、companyid、route、fleetnumber、traveldate。我试过的 SQL 查询：

```
SELECT DISTINCT fleetnumber and max(traveldate), routeid, companyid, traveldate
FROM fleetSchedule 
```

问题是它只给出 1 个值（最大值）。我需要在最大/最晚日期行驶的所有不同巴士（由车队编号标识）。我正在寻找的结果样本数据：

```
fleetnumber routeid companyid   traveldate
MSH-17E     RT17    MSH         2009-07-26
FDH-17D     RT17    FDH         2009-07-26
MSH-17F     RT17    MSH         2009-07-25
MSH-27E     RT27    MSH         2009-08-24 
```

正在使用的表格样本：

```
fleetScheduleID companyID    routeID     travelDate fleetNumber
20                  MSH      RT17        2009-07-26     MSH-17E     
19                  MSH      RT17        2009-07-26     MSH-17D 
18                  MSH      RT27        2009-08-24     MSH-27E 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:34:42.077

尝试这个：

```
select * 
from fleetSchedule
where travelDate = ( select max(travelDate) from fleetSchedule ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:36:28.893

```
SELECT fleetNumber, 
       MAX(travelDate) AS travelDate, 
       SUBSTRING_INDEX(GROUP_CONCAT(routeID ORDER BY travelDate DESC), ',', 1) AS routeID, 
       SUBSTRING_INDEX(GROUP_CONCAT(companyID ORDER BY travelDate DESC), ',', 1) AS companyID
FROM fleetSchedule
GROUP BY fleetNumber; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:33:51.217

```
select fleetnumber, routeid, companyid, max(traveldate)
from fleetSchedule
group by fleetnumber, routeid, companyid 
```

需要明确的是，以上内容将为您提供每辆不同的公共汽车及其旅行的最新日期。如果您希望在整个表格中列出最近日期行驶的不同巴士，请使用以下

```
select distinct fleetnumber, routeid, companyid
from fleetSchedule
where traveldate = (select max(traveldate) from fleetSchedule) 
```

# jquery - 在 Jquery 中获取 Div 值

> ID：15386788
> 
> 赞同：1
> 
> 时间：2013-03-13T13:31:15.607
> 
> 标签：jquery, html, xslt

我有这样的代码

```
<p class="shownote">
Text value
<a href="#" class="show">
textvalues</a>
<input class="editnotesbox" style="display:none"></input>  
<a href="#" class="editnote">Edit</a>
<a href="#" class="deletenote">Delete</a>
<div class="hidennote" style="display: none;">
Text value
</div>
</p> 
```

我想在 jquery 变量中获取 div hidennote 类的值。我像这样尝试 Jquery。

```
 $('.show').live('click', function (event) {

        $(this).parent('.shownote').find('.editnotesbox').show();
         var getnote = $(this).closest('.hidennote').text;
        $('.editnotesbox').val(getnote);
        $(this).hide();

    }); 
```

但无法获得价值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:35:23.440

`<div>`将元素放在`<p>`DOM 中的a 内是不可能的，因为开始`<div>`标签会自动关闭`<p>`元素。

寻找允许的包含关系的权威位置是 HTML 规范。请参阅[此处](http://www.w3.org/TR/html4/sgml/dtd.html#inline)的 HTML 内容模型。它指定哪些元素是块元素，哪些是内联元素。

因此，将 div 替换为`<span>`并尝试： [Sample fiddle](http://jsfiddle.net/XPSPU/2/)

```
$(".shownote").on('click', '.show', function (event) {
   var shownote = $(this).parent();
   shownote.find('.editnotesbox').show();
   var getnote = shownote.find('.hidennote').text();
   $('.editnotesbox').val(getnote);
   $(this).hide();
}); 
```

还要避免`.live()`从 jQuery 1.9 开始弃用，使用`.on()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:32:11.530

```
$('div.hidennote').text() 
```

它当然会返回 div 的文本，因为 div 没有值。

根据您的更新：

```
$('.show').live('click', function (event) {
    $shownote = $(this).parent();
    $shownote.find('.editnotesbox').show();
    var getnote = $shownote.find('.hidennote').text();
    $('.editnotesbox').val(getnote);
    $(this).hide();
}); 
```

请注意，`live`在 1.9 中已删除，在 1.7 中已弃用。

# android - 如何使用 layout() 函数结合 ScaleAnimation 和移动视图

> ID：15386789
> 
> 赞同：0
> 
> 时间：2013-03-13T13:31:16.183
> 
> 标签：android, animation, android-framelayout

我正在尝试在 Android 上实现拖动。

我将 FrameLayout 作为一个区域，可拖动的视图（图块）正在移动。当用户触摸瓷砖时，它应该变大。为此，我使用`ScaleAnimation`零持续时间**来支持 11 以下的平台**（添加了功能`setScaleX`和`setScaleY`功能）。对于移动的瓷砖，我正在使用`layout(...)`功能。

问题是移动瓷砖的重绘不好。似乎它在移动时被裁剪到初始范围。

提前致谢。

# cxf - 无法运行 Apache CXF Codegen 插件

> ID：15386792
> 
> 赞同：1
> 
> 时间：2013-03-13T13:31:20.537
> 
> 标签：cxf

我无法运行我的 pom.xml 文件中的 apache CXF codegen 插件。运行构建时出现以下错误

```
<plugin>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-codegen-plugin</artifactId>
            <version>2.7.3</version>
            <executions>
                <execution>
                    <id>generate-sources</id>
                    <phase>generate-sources</phase>
                    <configuration>
                        <sourceRoot>${project.build.directory}/generated/cxf</sourceRoot>
                        <wsdlOptions>
                            <wsdlOption>
                                <wsdl>${basedir}/src/main/resources/wsdl/activateDevice.wsdl</wsdl>
                            </wsdlOption>
                        </wsdlOptions>
                    </configuration>
                    <goals>
                        <goal>wsdl2java</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

我收到以下错误

```
Failed to execute goal org.apache.cxf:cxf-codegen-plugin:2.7.3:wsdl2java (generate-sources) on project dealer: org/apache/velocity/context/Context: org.apache.velocity.context.Context -> [Help 1] 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:31:30.130

试试这个：

```
<plugin>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-codegen-plugin</artifactId>
    <version>2.7.3</version>
    <dependencies>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-bindings-soap</artifactId>
            <version>2.7.3</version>
        </dependency>
    </dependencies>
    <executions>
        <execution>
            <id>generate-jaxb</id>
            <phase>generate-sources</phase>
            <configuration>
                <additionalJvmArgs>-Dfile.encoding=UTF8</additionalJvmArgs>
                <wsdlOptions>
                    <wsdlOption>
                        <wsdl>${basedir}/src/main/resources/wsdl/activateDevice.wsdl</wsdl>
                    </wsdlOption>
                 </wsdlOptions>
            </configuration>
            <goals>
                <goal>wsdl2java</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:26:14.423

这个对我有用

```
 <plugin>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-codegen-plugin</artifactId>
            <version>${cxf.version}</version>
            <executions>
                <execution>
                    <id>generate-sources</id>
                    <phase>generate-sources</phase>
                    <configuration>
                        <sourceRoot>${project.build.directory}/generated/cxf</sourceRoot>
                        <wsdlOptions>
                            <wsdlOption>
                                <wsdl>src/main/resources/wsdl/resourceservice1.wsdl</wsdl>
                                <bindingFiles>
                                    <bindingFile>src/main/resources/wsdl/binding.xml</bindingFile>
                                </bindingFiles>
                            </wsdlOption>
                        </wsdlOptions>
                    </configuration>
                    <goals>
                        <goal>wsdl2java</goal>
                    </goals>
                </execution>
            </executions>
            <dependencies>
                <dependency>
                    <groupId>com.sun.xml.bind</groupId>
                    <artifactId>jaxb-impl</artifactId>
                    <version>${jaxb.version}</version>
                </dependency>
                <dependency>
                    <groupId>com.sun.xml.bind</groupId>
                    <artifactId>jaxb-xjc</artifactId>
                    <version>${jaxb.version}</version>
                </dependency>
            </dependencies>
        </plugin> 
```

# excel - 用于从 Excel 列表中发送电子邮件的 AppleScript

> ID：15386794
> 
> 赞同：1
> 
> 时间：2013-03-13T13:31:26.020
> 
> 标签：excel, macos, applescript

我根本不知道 AppleScript，所以提前感谢您在这个问题上提供的任何帮助。我在我的 Macbook Pro 笔记本电脑上安装了最新版本的 OSX。我有一个包含两列的 Excel 电子表格（如果这样更容易，我可以使用数字）。

```
FirstName        Email
------------     -----------------
Ken              blah@blah.com
Mike             blahblah@blahblah.com 
```

这是我的客户名单，我想给他们发一封电子邮件。不幸的是，我的自动回复中没有此列表，因此我必须一一发送电子邮件。

我知道我可以编写一个 PHP 脚本来发送电子邮件，但是以这种方式发送电子邮件会出现问题。

我想编写一个AppleScript，一次处理我的电子表格一行并发送一条消息。消息将是这样的：

```
Subject: How’s it going?

Hi Ken

It’s been a while since I sold you that defective widget from China. 
If you need more defective elctronics I’m here for you. Just give me 
a call at xxx-xxx-xxxx. 

Sincerely

Ken 
```

AppleScript 会从电子表格的一行中读取姓名和电子邮件地址，然后使用标准的苹果邮件程序发送这封电子邮件，填写姓名和电子邮件地址。

发送消息后，我希望脚本等待 60 秒。然后发送另一封电子邮件。

这需要在遇到空白行之前发生。

我的第一个问题……这可能吗？如果可能的话，我该怎么做？

还有更好的方法来做我想做的事情吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:01:22.850

可能有更好的方法来做到这一点，但是您不能将地址复制为 TSV 或 CSV 吗？

```
set addresses to "Ken;blah@blah.com
Mike;blahblah@blahblah.com"
set text item delimiters to ";"
repeat with l in paragraphs of addresses
    tell application "Mail"
        tell (make new outgoing message)
            set subject to "subject"
            set content to "Hi " & text item 1 of l & linefeed & linefeed & "..."
            make new to recipient at end of to recipients with properties {name:text item 1 of l, address:text item 2 of l}
            send
            delay (random number) * 100
        end tell
    end tell
end repeat 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:05:37.150

尝试：

```
set {firstName, eAddress} to getData()

repeat with i from 1 to count firstName
    tell application "Mail"
        activate
        set mymail to make new outgoing message at the beginning of outgoing messages with properties {subject:"How’s it going?"}
        tell mymail
            make new to recipient at beginning of to recipients with properties {address:item i of eAddress}

            set content to "Hi " & item i of firstName & "

It’s been a while since I sold you that defective widget from China. 
If you need more defective elctronics I’m here for you. Just give me 
a call at xxx-xxx-xxxx. 

Sincerely

Ken"
        end tell
        --show message window (otherwise it's hidden)
        set visible of mymail to true
        --bring Mail to front
        activate
        send mymail
    end tell
end repeat

on getData()
    set colA to {}
    set colB to {}
    tell application "Microsoft Excel"

        activate
        tell active sheet
            set lastRow to first row index of (get end (last cell of column 1) direction toward the top)

            repeat with i from 3 to lastRow
                set end of colA to (value of range ("A" & i))
                set end of colB to (value of range ("B" & i))
            end repeat
        end tell
    end tell

    return {colA, colB}
end getData 
```

# exception - 在 Poltergeist 中未处理的异常测试失败

> ID：15386795
> 
> 赞同：1
> 
> 时间：2013-03-13T13:31:36.973
> 
> 标签：exception, poltergeist

当我向 application.js 添加一些垃圾时，我从 Poltergeist 收到以下错误：

```
Capybara::Poltergeist::JavascriptError: One or more errors were raised in the Javascript code on the page. If you don't care about these errors, you can ignore them by setting js_errors: false in your Poltergeist configuration (see documentation for details). 
```

但是，当我只是抛出异常时，它会被忽略（并且由于缺少页面功能而导致测试失败）。如果页面有未处理的异常，我可以让 Poltergeist 失败吗？或者至少发出警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:08:08.480

这对我来说听起来像是一个错误 - 请在 Github 上报告它并附上重现的步骤。

# javascript - 使用 jquery 的 clone() 方法创建复选框

> ID：15386797
> 
> 赞同：0
> 
> 时间：2013-03-13T13:31:40.070
> 
> 标签：javascript, jquery

我的表格我有重复的复选框，例如

```
<input type="checkbox" name="todayDimensionStones[].isIssued" id="isIssued"  value="Yes"/> 
```

我正在使用上面使用 jquery 的 clone() 方法创建另一个复选框。复选框已成功创建。但是当我检查并提交包含新创建的复选框的表单并检索新创建的复选框的值时，它似乎是空的，即''。我该怎么做才能解决这个问题。如果有任何想法，请与我分享

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-25T08:03:47.400

如果有人偶然发现： value 属性可能丢失。克隆后手动设置：

在带有一些复选框的克隆元素上：

```
$clone.find(':checkbox').each(function() {
    $(this).attr('checked','checked')
}); 
```

那是在IE9上。见[https://bugs.jquery.com/ticket/10550](https://bugs.jquery.com/ticket/10550)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-26T16:57:17.307

您必须更改属性`name` ，或者必须`[]`在`name`.

如果您发送两个具有相同名称的输入而没有`[]`结尾，php 只会给您最后一个。

# mysql - 按天分组的计数中位数

> ID：15386799
> 
> 赞同：6
> 
> 时间：2013-03-13T13:31:42.423
> 
> 标签：mysql, group-by, median

我有一个脚本计算所有表数据的中值：

```
SELECT avg(t1.price) as median_val FROM (
SELECT @rownum:=@rownum+1 as `row_number`, d.price
  FROM mediana d,  (SELECT @rownum:=0) r
  WHERE 1
  ORDER BY d.price
) as t1, 
(
  SELECT count(*) as total_rows
  FROM mediana d
  WHERE 1
) as t2
AND t1.row_number>=total_rows/2 and t1.row_number<=total_rows/2+1; 
```

现在我需要获取不是所有表值的中值，而是按日期分组。是否可以？[http://sqlfiddle.com/#!2/7cf27](http://sqlfiddle.com/#!2/7cf27) - 结果我会得到 2013-03-06 - 1.5 ， 2013-03-05 - 3.5。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T14:09:36.640

我希望我没有放松自己并使事情过于复杂，但这就是我想出的：

```
SELECT sq.created_at, avg(sq.price) as median_val FROM (
SELECT t1.row_number, t1.price, t1.created_at FROM(
SELECT IF(@prev!=d.created_at, @rownum:=1, @rownum:=@rownum+1) as `row_number`, d.price, @prev:=d.created_at AS created_at
FROM mediana d, (SELECT @rownum:=0, @prev:=NULL) r
ORDER BY created_at, price
) as t1 INNER JOIN  
(
  SELECT count(*) as total_rows, created_at 
  FROM mediana d
  GROUP BY created_at
) as t2
ON t1.created_at = t2.created_at
WHERE 1=1
AND t1.row_number>=t2.total_rows/2 and t1.row_number<=t2.total_rows/2+1
)sq
group by sq.created_at 
```

我在这里所做的主要只是在日期更改时将行号重置为 1（按 created_at 排序很重要）并包含日期，以便我们可以按它进行分组。在计算总行数的查询中，我还包括了 created_at，因此我们可以连接两个子查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-02T16:48:19.193

[这是受这篇文章](http://web.performancerasta.com/metrics-tips-calculating-95th-99th-or-any-percentile-with-single-mysql-query/)启发的中位数的另一种看法，使用`SUBSTRING_INDEX`and `GROUP_CONCAT`。相对于@fancyPants 所描述的使用行号的方法，我不确定大型表的性能，但在较小的表（~20K 行）上，它的运行速度非常快。

```
SET SESSION group_concat_max_len = 1000000;
SELECT
    created_at,
    (
    CAST(
        SUBSTRING_INDEX(
        SUBSTRING_INDEX(
        GROUP_CONCAT(
            price ORDER BY price SEPARATOR ','),
            ',', FLOOR((COUNT(*)+1)/2) ), ',', -1) AS DECIMAL) +
    CAST(
        SUBSTRING_INDEX(
        SUBSTRING_INDEX(
        GROUP_CONCAT(
            price ORDER BY price SEPARATOR ','),
            ',', FLOOR((COUNT(*)+2)/2) ), ',', -1) AS DECIMAL)
    ) / 2.0 AS median_price
FROM
    mediana
GROUP BY
    created_at
; 
```

这是问题中给出的[sqlfiddle](http://sqlfiddle.com/#!2/7cf27)的输出（小提琴似乎坏了，但我在 MySQL 本身的小提琴中显示的表上运行它）：

```
+------------+--------------+
| created_at | median_price |
+------------+--------------+
| 2012-03-05 |       3.5000 |
| 2012-03-06 |       1.5000 |
+------------+--------------+ 
```

本质上创建了每个日期`GROUP_CONCAT`价格数组的字符串表示形式。`created_at`然后这两个`SUBSTRING_INDEX`命令寻找中间值，即中值。有必要对它们进行两次调用并对它们进行平均处理以处理单个日期`GROUP_CONCAT`有偶数个元素的情况。`price``created_at`

更新：

值得一提的是，该`GROUP_CONCAT`函数的默认长度为 1024 字节，请参见[此处](http://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html#sysvar_group_concat_max_len)。这可能会导致很长的结果被截断，从而导致计算错误。如果您担心较大的结果，您可以使用命令`SET SESSION group_concat_max_len = N;`where is some other,较大的值设置更大的默认值。`N`我已将该设置添加到上面的代码片段中。我选择了 1000000，但您也可以使用其他值。

`COUNT(*)`您还可以使用您的值`OFFSET`之一来抽查您的结果。`GROUP BY`例如，

1.  首先获取特定`GROUP BY`值的行数，

`SELECT COUNT(*) FROM mediana WHERE created_at = '2012-03-06';`

2.  让我们`X`从第 1 步得到的行数。除以`X`2 得到一半的值，`Y`。

3.  使用该值`Y`作为偏移量来找到中位数。

    一种。如果`Y`是一个整数，那么两者都做

    `SELECT price FROM mediana WHERE created_at = '2012-03-06' ORDER BY price LIMIT 1 OFFSET (Y-1);`

    和

    `SELECT price FROM mediana WHERE created_at = '2012-03-06' ORDER BY price LIMIT 1 OFFSET Y;`

    并平均两个结果以获得中值。

    湾。如果`Y`是小数，则向下舍`Y`入到最接近的整数（调用它`W`）并将其用作单个偏移量，

    `SELECT price FROM mediana WHERE created_at = '2012-03-06' ORDER BY price LIMIT 1 OFFSET W;`

    这将是您的中值。

# sql-server - 针对情况的 T-Sql 查询 - 需要具有最大员工人数的部门 ID？

> ID：15386808
> 
> 赞同：0
> 
> 时间：2013-03-13T13:32:02.193
> 
> 标签：sql-server, tsql, count, max

假设员工表有员工详细信息和员工的部门 ID。获取每个部门的员工人数，

```
select deptId, COUNT(*) from employee group by deptId; 
```

问题是：要获得具有上述结果集的最大员工数的 deptId，

`select Top 1 deptId, COUNT(*) from employee group by deptId order by 2 desc`

（2-ref 到查询列表中的第二列）- 可以.. 但是

有没有办法避免订购这套？或编写此 sql 的更好方法，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:46:26.717

没有任何命令，这很难，但尝试

```
 Select deptId, cnt
   From (Select deptId, count(*) cnt
         from employee
         Group By deptId) Z
   Where cnt = (Select Max(cnt) 
                From (Select deptId, count(*) cnt
                      From employee
                      Group By deptId) ZZ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:40:03.647

> 如果您只想要`MAX`一个部门内的员工人数，您可以这样做：

```
SELECT TOP 1  DepartmentID, 
       COUNT(EmployeeID) 
FROM EmployeeTable
GROUP BY DepartmentID
ORDER BY COUNT(EmployeeID) DESC 
```

# ruby-on-rails-3 - 尝试确定为 Rails 设置多对多关系的安全方法

> ID：15386810
> 
> 赞同：0
> 
> 时间：2013-03-13T13:32:11.533
> 
> 标签：ruby-on-rails-3, rails-activerecord

我有一个带有连接模型`User`的模型（参见下面的类定义）。`Group``Membership`

经过深思熟虑，我决定在 Membership 模型上添加两个属性，用于描述组中的用户角色。该应用程序非常简单，并且不希望添加额外的表来分离组角色的复杂性。

```
class User < ActiveRecord::Base
  .... 
  has_many :memberships
  has_many :groups, through: memberships
end

class Group < ActiveRecord::Base
  .... 
  has_many :memberships
  has_many :users, through: memberships
end

class Membership < ActiveRecord::Base
  .... 
  belongs_to :user
  belongs_to :group
  attr_protected :owner, :contributor
end 
```

但是，由于我已将 attr_protected 属性添加到连接模型，因此我无法在 Membership 模型上分配`owner`and`contributor`变量，除非我直接创建 Membership 对象，然后在创建组时将其分配给组的成员资格数组，如下所示：

```
#Partial group create method on group controller
@group = Group.new(name: params[:group])
@membership = Membership.new(group: @group, user: @user)
@membership.owner = true
@membership.contributor = true
@group.memberships << @membership

if @group.save
  ..... 
```

我试图不允许对所有者/贡献者属性进行大规模分配。

是否有更好的方法来创建用户/组成员资格以及安全地设置成员资格的附加属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:09:30.637

据我所知，您所展示的是为不在批量分配白名单上的属性分配值的标准方法。

我可能会设置`@membership`为`@group.memberships.new(:user => @user)`而不是`Membership.new(group: @group, user: @user)`，但这主要是个人编码风格的问题。我相信你会避免使用`@group.memberships << @membership`，但它在其他方面是等效的。

# mysql - 提交如何在 MySQL 集群中工作？

> ID：15386815
> 
> 赞同：0
> 
> 时间：2013-03-13T13:32:36.620
> 
> 标签：mysql, database

我正在使用 Mysql 集群 7.2 NDB。根据[这里](http://en.wikipedia.org/wiki/MySQL_Cluster#Hybrid_Storage)的维基，

> MySQL Cluster 将所有数据更改的重做日志写入磁盘，并定期检查指向磁盘的数据。这允许集群在完全集群中断后从磁盘中持续恢复。由于重做日志是相对于事务提交异步写入的，因此如果整个集群发生故障，可能会丢失少量事务，但是可以通过使用上面讨论的地理复制或多站点集群来缓解这种情况。

**这是真的吗？**

**有人可以解释一下提交的工作原理吗？**如果提交没有持久化到磁盘中，则提到我们将丢失一些事务。我的应用程序不能接受这种行为。

**这个问题有什么解决方法吗？**

# jquery - window.opener 没有将值返回到正确的文本框

> ID：15386817
> 
> 赞同：1
> 
> 时间：2013-03-13T13:32:55.247
> 
> 标签：jquery, parent-child, window.opener

html代码：

```
<tr class="item-row">
   <td>
     <input type="button" class='del' value="" style="z-index:16; background-image:url(../images/delete.png); background-repeat:no-repeat; background-position:left center; text-align:right;"/>
   </td>
   <td>
     <input type="button" name="pilihItem[]" value="i" id="pilihItem" class="pilihItem">
   </td>
   <td>
     <input type="text" id="nama_item" name="nama_item[]" value="" style="width: 200px;">
   </td>
</tr>
<tr class="item-row">
   <td>
     <input type="button" class='del' value="" style="z-index:16; background-image:url(../images/delete.png); background-repeat:no-repeat; background-position:left center; text-align:right;"/>
   </td>
   <td>
     <input type="button" name="pilihItem[]" value="i" id="pilihItem" class="pilihItem">
   </td>
   <td>
     <input type="text" id="nama_item" name="nama_item[]" value="" style="width: 200px;">
   </td>
</tr> 
```

打开子窗口的jquery代码：

```
$("#pilihItem").click(function(){
        var id = 1;
        var name = $(this).prev().attr("name");           
        var url = "../formItem.php?id=" + id + "&name=" + name;

        window.open(url, 'Pilih Item', 'location=1,status=1,scrollbars=1,resizable=no,width=800,height=300'); 
    }); 
```

将值设置为父窗口的 jquery 代码：

```
window.opener.$("#nama_item").val($.trim(nama_item)); 
```

![在此处输入图像描述](../Images/23efd0e2aa3a31d7beeb57615666fbfb.png)

问题：我无法设置单击按钮#pilihItem 的#nama_item 文本框的值。它总是在第一行设置文本框。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:36:41.237

您正在使用 ID 来选择输入，而您应该使用独特的东西。

您要么需要将 ID 更改为唯一的（无论如何它们在 DOM 中应该是唯一的），或者将复选框的名称更改为...

`<input type="text" name="nama_item[1]" value="" style="width: 200px;">`

并在弹出窗口中更改您的 JS 以使用此名称而不是 ID...

`window.opener.$("input[name='nama_item[1]']").val($.trim(nama_item));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T02:12:09.093

将 ID 更改为唯一或使用 array= name="item_name[1]" 更改复选框名称

# c# - OpenGL 尝试绘制多个 2d 纹理，只出现第一个

> ID：15386821
> 
> 赞同：3
> 
> 时间：2013-03-13T13:33:03.997
> 
> 标签：c#, wpf, opengl, textures

我有一个问题，我正在尝试使用纹理（每个行星一个纹理）绘制一个太阳系，并且当我绘制我的纹理时，只有第一个出现。其余的都没有。

我的 init 函数遍历我的文件，将纹理保存到对象中，然后遍历对象。在迭代时，它会生成纹理并使用 OpenGL 调用将它们绑定到名称。

```
 SharpGL.OpenGL gl = args.OpenGL;
        gl.Enable(SharpGL.OpenGL.GL_BLEND);
        gl.Enable(SharpGL.OpenGL.GL_TEXTURE_2D);
        gl.BlendFunc(SharpGL.Enumerations.BlendingSourceFactor.SourceAlpha, SharpGL.Enumerations.BlendingDestinationFactor.OneMinusSourceAlpha);                        
        gl.ClearColor(0, 0, 0, 1);

        foreach (ImageWrapper iw in m_images)
        {                            
            uint[] texNames = new uint[1];

            gl.GenTextures(1, texNames);
            gl.BindTexture(SharpGL.OpenGL.GL_TEXTURE_2D, texNames[0]);

            gl.TexParameter(SharpGL.OpenGL.GL_TEXTURE_2D, SharpGL.OpenGL.GL_TEXTURE_WRAP_S, SharpGL.OpenGL.GL_REPEAT);
            gl.TexParameter(SharpGL.OpenGL.GL_TEXTURE_2D, SharpGL.OpenGL.GL_TEXTURE_WRAP_T, SharpGL.OpenGL.GL_REPEAT);
            gl.TexParameter(SharpGL.OpenGL.GL_TEXTURE_2D, SharpGL.OpenGL.GL_TEXTURE_MAG_FILTER, SharpGL.OpenGL.GL_LINEAR);
            gl.TexParameter(SharpGL.OpenGL.GL_TEXTURE_2D, SharpGL.OpenGL.GL_TEXTURE_MIN_FILTER, SharpGL.OpenGL.GL_LINEAR);

            gl.TexImage2D(SharpGL.OpenGL.GL_TEXTURE_2D,
                          0,
                          3,
                          iw.BitmapSource.PixelWidth,
                          iw.BitmapSource.PixelHeight,
                          0,
                          SharpGL.OpenGL.GL_BGRA,
                          SharpGL.OpenGL.GL_UNSIGNED_BYTE,
                          iw.Pixels);

            iw.TextureHandle = texNames;

        } 
```

这是我绘制所有内容的函数。我遍历所有具有纹理数据的对象，并尝试一次绘制一个。我还想执行一些旋转和变换来让我的太阳系旋转。该部分适用于出现的纹理。

```
 SharpGL.OpenGL gl = args.OpenGL;
        gl.Clear(SharpGL.OpenGL.GL_COLOR_BUFFER_BIT | SharpGL.OpenGL.GL_DEPTH_BUFFER_BIT );
        gl.LoadIdentity();

        float[] data = new float[4];
        foreach (ImageWrapper iw in m_images)
        {
            //gl.MatrixMode(SharpGL.Enumerations.MatrixMode.Modelview);                

            gl.Ortho2D(0, this.Width, 0, this.Height);                
            gl.Enable(OpenGL.GL_TEXTURE_2D);                
            gl.BindTexture(OpenGL.GL_TEXTURE_2D, iw.TextureHandle[0]);
            gl.TexParameter(SharpGL.OpenGL.GL_TEXTURE_2D, SharpGL.OpenGL.GL_TEXTURE_WRAP_S, SharpGL.OpenGL.GL_REPEAT);
            gl.TexParameter(SharpGL.OpenGL.GL_TEXTURE_2D, SharpGL.OpenGL.GL_TEXTURE_WRAP_T, SharpGL.OpenGL.GL_REPEAT);
            gl.TexParameter(SharpGL.OpenGL.GL_TEXTURE_2D, SharpGL.OpenGL.GL_TEXTURE_MAG_FILTER, SharpGL.OpenGL.GL_LINEAR);
            gl.TexParameter(SharpGL.OpenGL.GL_TEXTURE_2D, SharpGL.OpenGL.GL_TEXTURE_MIN_FILTER, SharpGL.OpenGL.GL_LINEAR);

            gl.PushMatrix();
            //gl.Translate(this.Width / 2, this.Height / 2, 0);               

            //gl.Rotate(iw.RotationAboutSun, 0, 0, 1);
            //gl.Translate(iw.X + 1 * this.Width / 2, iw.Y + 1 * this.Height / 2, 0);
            gl.Translate(32,32, 0);
            //gl.Rotate(iw.RotationAboutAxis, 0, 0, 1);  
            //

            gl.Begin(SharpGL.Enumerations.BeginMode.Quads);
            gl.Color(new float[] { 1f,1f,1f});                                          
            gl.TexCoord(0,0);
            gl.Vertex(new double[] { 0 - iw.PixelWidth / 2, 0 - iw.PixelHeight / 2});                
            gl.TexCoord(0,1);
            gl.Vertex(new double[] { 32 - iw.PixelWidth / 2, 0 - iw.PixelHeight / 2 });               
            gl.TexCoord(1,1);
            gl.Vertex(new double[] { 32 - iw.PixelWidth / 2, 32 - iw.PixelHeight / 2 });
            gl.TexCoord(1,0);
            gl.Vertex(new double[] { 0 - iw.PixelWidth / 2, 32 - iw.PixelHeight / 2 });                            
            gl.End();

            gl.PopMatrix();

            gl.Disable(OpenGL.GL_TEXTURE_2D);                

        } 
```

我正在使用 C# 中的 SharpGL 库来执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:21:18.580

`gluOrtho2D()`不会`glLoadIdentity()`像您期望的那样发出。

通常，您每帧只设置*一次投影矩阵。*

尝试这样的事情：

```
void DrawFrame()
{
    ...

    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    gluOrtho2D(0, this.Width, 0, this.Height);

    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity();
    // "camera" transform(s)

    foreach object
    {
        glPushMatrix();
        // per-object matrix transform(s)

        // draw object

        glPopMatrix();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-12T03:59:19.263

**只是**不得不处理这个问题，所以我想我也会参与进来。
我看到了接受的答案，就我而言，我确实在管道中正确重置了所有内容。在我的管道中，我需要渲染 3D 和 2D 对象。对于 3D 对象，我会切换到 3D 投影/模型视图，而对于 2D 对象，我会切换到正交投影。

然而，当我想渲染几个文本块（使用四边形和纹理）时，只渲染了第一个纹理。深度测试是我问题的根源。所以我修改了上面的代码以适应我的情况。

```
void DrawFrame()
{
    foreach object
    {
        drawObject();   // Is an abstract method
    }
}

void _3DObject::drawObject() {
    switchTo3D();

    // Camera transform

    glPushMatrix();
    .
    . // Draw
    .
    .glPopMatrix();
}

void _2DObject::drawObject() {
    switchTo2D();

    // Having depth testing enabled was causing
    // problems when rendering textured quads.
    glDisable(GL_DEPTH_TEST);

    // Camera transform

    glPushMatrix();
    .
    . // Draw
    .
    .glPopMatrix();

    glEnable(GL_DEPTH_TEST);
} 
```

*PS：“刚刚”指的是正好1个月前！不知道为什么我忘了早点发布这个答案:(*

# java - 集中异常处理

> ID：15386823
> 
> 赞同：-1
> 
> 时间：2013-03-13T13:33:07.493
> 
> 标签：java, exception

如果我有 3 个名为 A、B、C 的类，并且所有异常都集中在 A 类中，A 是父类，B 是 A 的子类，C 是 B 的子类。现在，如果 C 类中发生任何应用程序定义的异常然后它将异常抛给B类，B类抛给A类以使异常集中。现在我们如何才能在A类中获得实际上由C类抛出的异常跟踪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:38:28.497

首先，如果可以的话，尽量避免检查异常，除了那些你实际上对异常做了其他事情而不只是中止当前工作单元并记录错误的情况。

其次，您应该用

```
try { 
  ...
} catch (RuntimeException e) { throw e; } 
  catch (Exception e) { throw new RuntimeException(e); } 
```

否则，如果不涉及已检查的异常，**则不要捕获任何内容**，异常将自动向上传播到您的集中处理位置。

最后，如果您按照描述进行操作，您将始终保留原始堆栈跟踪：直接在捕获的异常中，或者在可由`.getCause()`. 如果您只执行 a`printStackTrace()`或 a `log.error("error", e)`，您将自动获得整个原因链。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:36:43.677

您可以获得堆栈跟踪并能够知道，`Throwable#getStackTrace()`以堆栈跟踪元素数组的形式提供堆栈跟踪信息，每个元素代表一个堆栈帧。

Ans 这`StackTraceElement`包含 LineNumber、方法名称、执行它的类名称。因此，您将能够知道它实际被抛出的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:37:31.197

简单的。在父类 A 中定义一个可以处理异常的方法。

在派生类中，

```
public void method(){
    try{
      //code
    }catch(Exception e){
      super.catchExceptionMethod(e);
   }
} 
```

# json - Jquery PHP JSON输出关联数组

> ID：15386832
> 
> 赞同：0
> 
> 时间：2013-03-13T13:33:49.147
> 
> 标签：json, jquery

我有一个在 json 中输出关联数组的 php 代码。如何访问数组中的对象。我知道要访问我必须放入的 json 数组中的第一项，`data.item0.adlink`但我想遍历`data`对象并输出 json 数组中每个对象的所有内容。我的数组和代码如下。谢谢。

大批

```
{"item0":{"image":"preview.jpg","file":"video.mp4","adImage":"none","adLink":"http:\/\/sammyukavi.com\/"},"item1":{"image":"preview.jpg","file":"video.mp4","adImage":"none","adLink":"http:\/\/sammyukavi.com\/"},"item2":{"image":"preview.jpg","file":"video.mp4","adImage":"none","adLink":"http:\/\/sammyukavi.com\/"}} 
```

代码

```
 $.ajax({
                        type: "GET",
                        dataType: "json",
                        data: {'first':'1','last':'3'} ,
                        beforeSend: function(x) {
                            if(x && x.overrideMimeType) {
                                x.overrideMimeType("application/json;charset=UTF-8");
                            }
                        },
                        url: 'test.php',
                        success: function(data) {
//I want to get a single item from the data object
                            $.each(data,function(){
//output a property for the single item here
console.log($(this))
                          })
                        }
                    })
                }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:27:56.057

这就是我一直在寻找的。

```
function(data) {
                        $.each( data, function( index, value ) {
                            console.log(value)
                        })
                    } 
```

# jquery - jquery, tinyMCE 2.1.3 - 从第二个实例获取内容

> ID：15386834
> 
> 赞同：1
> 
> 时间：2013-03-13T13:33:53.807
> 
> 标签：jquery, tinymce

这就是我在 php 中为我的网页中的两个文本区域初始化 tinyMCE 插件的方式。

```
tinyMCE.init({
        mode : "textareas",
        theme : "advanced",
        //to add any new plugin add in this line
        plugins : "banglafkb,banglavkb,table,save,advhr,advimage,advlink,emotions,iespell,insertdatetime,preview,zoom,media,searchreplace,print,contextmenu,paste,directionality,fullscreen",
        theme_advanced_buttons1_add_before : "banglafkb,banglavkb",
        //theme_advanced_buttons1_add : "banglafkb,banglavkb",
        theme_advanced_buttons2_add : "fontselect, fontsizeselect ",
        //theme_advanced_buttons2_add_before: "cut,copy,paste,pastetext,pasteword,separator,search,replace,separator",
        //theme_advanced_buttons3_add_before : "tablecontrols,separator",
        //theme_advanced_buttons3_add : "emotions,iespell,media,advhr,separator,print,separator,ltr,rtl,separator,fullscreen",      
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",       
        content_css : "example_word.css",
            plugi2n_insertdate_dateFormat : "%Y-%m-%d",
            plugi2n_insertdate_timeFormat : "%H:%M:%S",
        external_link_list_url : "example_link_list.js",
        external_image_list_url : "example_image_list.js",
        media_external_list_url : "example_media_list.js",
        file_browser_callback : "fileBrowserCallBack",
        paste_use_dialog : false,
        theme_advanced_resizing : true,
        theme_advanced_resize_horizontal : false,
        theme_advanced_link_targets : "_something=My somthing;_something2=My somthing2;_something3=My somthing3;",
        paste_auto_cleanup_on_paste : true,
        paste_convert_headers_to_strong : false,
        paste_strip_class_attributes : "all",
        paste_remove_spans : false,
        paste_remove_styles : false,    
        force_p_newlines:false,
        width:'700'
    }); 
```

通过使用`tinyMCE.getContent()`我获取第一个编辑器实例的内容，但我也需要获取第二个编辑器实例的内容，我怎样才能得到它？

请注意，我使用**2.1.3**版本来使用仅为该版本开发的插件。

进一步澄清：

提到的版本可[在此处](http://ekushey.org/projects/browser_ime/tinybn/jscripts/tiny_mce/tiny_mce.js)获得。[这](http://ekushey.org/projects/browser_ime/tinybn/)是该版本的示例，其中包含为该版本开发且我需要使用的插件。“选择键盘”下拉列表显示了正在运行的插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:51:50.440

天啊 ...！这个tinymce版本太旧了。较新的版本可以工作并处理较新的浏览器的问题，这是旧版本无法做到的。好吧，你想要的是可能的：

购买呼叫`tinyMCE.instances.mce_editor_0.getHTML()`您将获得第一个编辑器实例的内容。要获取第二个编辑器实例的内容，您可以使用

```
tinyMCE.instances.mce_editor_1.getHTML() 
```

**更新**：看起来我在不使用 jQuery 的情况下得到了一个可行的解决方案：

```
var instance = tinyMCE.get('mce_editor_1'); // get the editor instance
instance.select(); // select your editor instance
tinyMCE.getContent() // get the content 
```

# xml - AS3 - 通过拖放加载不同的 XML 文件？

> ID：15386841
> 
> 赞同：1
> 
> 时间：2013-03-13T13:34:17.213
> 
> 标签：xml, actionscript-3, flash, actionscript, drag-and-drop

![在此处输入图像描述](../Images/0fcc957984db93ec46992020f274e7db.png)

您好，我决定使用另一张图片来展示我的目标，我想知道是否可以在成功拖放时加载多个 XML 文件？是否可以在取消目标时重置或切换到空白 XML？

我的代码已经和我的其他代码混在一起了，基本上如果圆圈是按钮，每次都会加载不同的XML，我想或多或少地合并两组代码，这样当圆圈/雕像被拖过去时，“ Circle one In Place Successfully”消息将出现，并且我拥有的 xml 文件也将加载。当我试图实现它时，可悲的是，总体结果是无数错误，这让我不敢说。

哦，我也想清楚这一点，这不是我之前关于拖放的问题的抵消，这更多的是我尝试不同的方法并学习一般的 XML，所以我最终使用它作为如果可以在每次拖动时加载不同的 XML，则用于测试情况的​​“骨架”。

```
import flash.net.URLLoader;
import flash.events.Event;

var circles:Array = [circle1_mc, circle2_mc, circle3_mc];

circle1_mc.myname = "xmlFile1";
circle2_mc.myname = "xmlFile2";
circle3_mc.myname = "xmlFile3";

var xmlLoader:URLLoader = new URLLoader();
var xmlData:XML = new XML(); 

function LoadXML (evt:Event):void
{
    trace ("Load completed");
    xmlData = XML(xmlLoader.data);   
}

var bArray:Array = [circle1_mc, circle2_mc, circle3_mc];
for (var k:Number = 0; k<bArray.length; k++)
{
    bArray[k].buttonMode = true;
    bArray[k].addEventListener (MouseEvent.CLICK,changeXMLPath);
}
function changeXMLPath (evt:MouseEvent):void
{
    for (var i:Number = 0; i<bArray.length; i++)
    {
        if (evt.target.myname == bArray[i].myname)
        {         
            xmlLoader.load (new URLRequest(evt.target.myname+".xml"));
            xmlLoader.addEventListener (Event.COMPLETE,LoadXML);
        }
    }
}

for each(var circleMC:MovieClip in circles)
{
    circleMC.addEventListener(MouseEvent.MOUSE_DOWN, pickUp);
    circleMC.addEventListener(MouseEvent.MOUSE_UP, dropIt);
    circleMC.startX = circleMC.x;
    circleMC.startY = circleMC.y;
}

function pickUp(event:MouseEvent):void
{
    reply_txt.text = "";
    event.target.startDrag(true);
    event.target.parent.addChild(event.target);
}

function dropIt(event:MouseEvent):void
{
    event.target.stopDrag();
    if(event.target.hitTestObject(target_mc)){
        event.target.buttonMode = false;
        event.target.x = target_mc.x;
        event.target.y = target_mc.y;

        for each(var circleMC:MovieClip in circles)
        {
            if(event.target != circleMC)
            {
                circleMC.x = circleMC.startX;
                circleMC.y = circleMC.startY;
            }
            if(event.target.name == "circle1_mc"){
                reply_txt.text = "Statue1 In Place Successfully";

            };
            if(event.target.name == "circle2_mc"){
                reply_txt.text = "Statue2 In Place Successfully";
            };
            if(event.target.name == "circle3_mc"){
                reply_txt.text = "Statue3 In Place Successfully";
            };
        }
    }
    else
    {
        event.target.x = event.target.startX;
        event.target.y = event.target.startY;
        event.target.buttonMode = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:22:07.807

您需要使用`startDrag()`和`stopDrag()`方法以及`hitTestObject()`方法如下，

*   我在舞台上放置了三个圆圈，分别为“circle1”、“circle2”和“circle3”。
*   我还在舞台上放置了三个符号作为放置目标，实例名称为“dropTarget1”、“dropTarget2”和“dropTarget3”。

将以下代码放在 Flash 时间轴上，

```
var totCircles:int = 3;
var xmlLoader:URLLoader = new URLLoader();
var xmlData:XML = new XML(); 

for (var k:Number = 1; k<=totCircles; k++)
{
   this["circle" + k].buttonMode = true;
   this["circle" + k].addEventListener(MouseEvent.MOUSE_DOWN, startDragging);
   this["circle" + k].addEventListener(MouseEvent.MOUSE_UP, stopDragging);
}

function startDragging(e:MouseEvent):void
{
     e.currentTarget.startDrag(false);
}

function stopDragging(e:MouseEvent):void
{
    // extract index from current target
    var currTarIndex = e.currentTarget.name.slice(6); 
    e.currentTarget.stopDrag();

    if(e.currentTarget.hitTestObject(this["dropTarget" + currTarIndex]))
    {
         loadXML("xmlFile"+ currTarIndex + ".xml");
         //You can also add position snap here
    }
 }

 function loadXML(url:String):void
 {
      xmlLoader.load (new URLRequest(url));
      xmlLoader.addEventListener (Event.COMPLETE,LoadXML);
 } 
```

希望这会帮助你。

# css - CSS定位

> ID：15386854
> 
> 赞同：0
> 
> 时间：2013-03-13T13:35:02.747
> 
> 标签：css, positioning

我有一张表格来获取新密码并确认密码。并且 div 称为“错误”，它是隐藏/显示块。当我验证输入时，我会在验证失败时显示这个 div。

这使得其他元素重新对齐它们的位置。假设我在图像上方放置了一些元素，当显示 div 时，这些元素会出现图像。

正确的做法是什么？

我试过 Positioning (relative, absolute) 。但是没有用。

任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:37:37.247

您应该使用 css`visiblity:hidden`和`visibility:visible`style 属性，这将确保即使它被隐藏也能占用所需的空间。

分别使用`display:block`或`display:none`将占用所需空间或不占用空间，这就是导致其他元素不可预测的重新对齐的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:44:29.343

通常在css中， `<div id="outer" style="position:absolute"> <div id="inner" style="position:relative"> </div> </div>`

表示外部应该是`absolute`，内部 div 是`relative`。在您的情况下，我建议您选择`position: fixed`，因为它是一个错误消息块。

# web-services - 如何使用 NetSuite 支持案例搜索进行分页？

> ID：15386860
> 
> 赞同：2
> 
> 时间：2013-03-13T13:35:19.690
> 
> 标签：web-services, search, web, pagination, netsuite

我们公司有一个客户中心网站，在 ASP.NET 中完成，后面有 C# 代码，我们的客户可以去那里获取各种不同的信息。其中一页允许他们查看他们的支持案例。最初，该页面仅显示正常工作的开放支持案例。然后，如果他们愿意，他们可以单击一个按钮来加载他们所有的支持案例，无论是打开的还是关闭的。对于某些客户来说，这可能是相当多的案例，NetSuite Web 服务会超时。

为了解决这个问题，我试图向这个视图添加分页，以便一次只加载一个页面的案例。有人有在 NetSuite 中进行分页的经验吗？

我遇到的问题：

1.  我似乎找不到一种方法来快速将记录总数返回到寻呼机的数据源以设置寻呼接口。

2.  我需要一种方法来返回获取特定页面的 SearchResult。我尝试使用 SearchMore 和 SearchNext，但我无法指定页面。没有 SearchPrevious 仅用于在界面中执行上一页和下一页。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:16:01.983

使用 searchMoreWithId。[http://tellsaqib.github.com/NSPHP-Doc/de/d06/class_net_suite_service.html#a024f8c9b7120c549d72e1d05b6676f6f](http://tellsaqib.github.com/NSPHP-Doc/de/d06/class_net_suite_service.html#a024f8c9b7120c549d72e1d05b6676f6f)

每次搜索都会返回一个 searchId。将此搜索 ID 与页码一起用作此调用的参数。

# ms-access - Microsoft Access 2010 中的用户权限

> ID：15386861
> 
> 赞同：3
> 
> 时间：2013-03-13T13:35:20.763
> 
> 标签：ms-access

我在 Access 2010 中有一个数据库，在其中创建了一个导航表单，我希望普通用户打开数据库以输入密码，并且只能访问该表单，而不能访问实际的表或导航窗格。他们应该只能通过我准备的表格查看、添加、编辑和删除数据，我不希望他们能够自己访问表格，除非他们有管理员密码。
有没有办法创建用户权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:05:29.013

您当然可以考虑使用 Access 中所谓的 ULS（用户级安全性）。对于 accDB 格式文件，此功能已被弃用，但您可以自由地将 ULS 与 mdb 格式文件和 Access 2010 一起使用。

阅读此文档，然后再阅读一遍。[Microsoft Access 安全常见问题解答](http://support.microsoft.com/default.aspx?scid=kb;[LN];207793)。

我还应该指出，阻止用户查看表格或设计表单的“行为”很少使用安全模型。安全系统就是定义谁可以打开什么表格，或者谁可以打开什么表格，或者谁可以打开什么报表。我认为使用 ULS 可能会在防止用户查看代码或修改表单的目标上出现一些重叠，但通常不会使用这种安全模型。

为了防止修改表单、代码、报告等，通常的方法是将 Access 应用程序编译成所谓的 Access 可执行文件（accDE 用于 2007 及以后，并且在 mde 之前）。

此编译步骤可防止用户修改常见对象，如表单、报表和 VBA 代码。只需几行代码，您就可以隐藏所有 Access UI，包括功能区（甚至可能构建自定义功能区）。因此，使用正确的启动设置和这行代码：

您可以使用以下一行代码隐藏功能区：

```
DoCmd.ShowToolbar "Ribbon", acToolbarNo 
```

生成的应用程序如下所示：

![在此处输入图像描述](../Images/b1c47dba8018f2a106fcae101a80e0c3.png)

以上是用一行代码完成的——剩下的只是简单的启动设置。请注意您如何看到上面屏幕截图后面的桌面，但没有看到 Access UI。

您还可以在启动时禁用 shift 键旁路。这意味着当应用程序启动时，您的表单和自定义 UI 就会出现。用户将无法进入“幕后”，也无法切换到设计模式。

此致

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-08T17:18:24.667

> 如果这解释了如何将 Access 实际编译为可执行文件，那就太好了。– 安德兰 2013 年 9 月 30 日 13:38

文件 > 保存并发布 > 将数据库另存为：“制作 ACCDE”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-08T01:41:41.323

使用 Microsoft 访问权限，您无法完全限制用户查看表格。您仍然可以使用应用程序顶部的快捷菜单后门隐藏表单或覆盖权限。访问有一些严重的限制，因为整个文件本身必须在文件夹级别具有修改权限才能打开。您可以编译一个文件来阻止对 VBA 代码和表单设计的访问。

# haskell - 用箭头作为原子值评估 AST（作为 GADT）

> ID：15386867
> 
> 赞同：3
> 
> 时间：2013-03-13T13:35:29.520
> 
> 标签：haskell, abstract-syntax-tree, arrows, gadt

以下程序类型检查和编译：

```
import Control.Arrow

data Ns = Na | Nb | Nc | Nd deriving Show

data Net a where
    Uni :: a -> Net a
    Serial :: Net a -> Net a -> Net a
    Branch :: Show a => Net a -> Net (Net a, Net a)

deriving instance Show a => Show (Net a)

eval :: (Arrow a) => Net c -> a b (Net c)
eval (Uni m) = arr (const (Uni m))
eval (Serial m n) = eval m >>> eval n
--eval (Branch m) = eval m &&& eval m

example = Serial (Serial (Uni Na) (Uni Nb)) (Serial (Uni Nc) (Uni Nd))

main = do
    putStrLn $ show (app (eval example, Na)) 
```

但是，当我尝试为 添加案例时`eval (Branch m)`，请键入检查炸弹。某种类型的东西

```
Arrow a => a b (Net d) 
```

是预期的，但当然我的方式是

```
Arrow a => a b (c',c'') 
```

有人对如何写作有建议`eval (Branch m)`吗？

**编辑我**

作为对@sabauma 评论的回应，我认为 for 的类型签名`eval`将不得不改变，但我不确定它应该是什么。

**编辑二**

这是应该发生的事情的示例：

```
branch = Branch example
app (eval branch, Na) 
```

应该给，

```
Uni (Uni Na,Uni Na) 
```

这就是@sabauma 的提议所做的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:39:35.510

一种可能是

```
eval :: (Arrow a) => Net c -> a b (Net c)
eval (Uni m)      = arr (const (Uni m))
eval (Serial m n) = eval m >>> eval n
eval (Branch m)   = (eval m &&& eval m) >>> arr Uni 
```

我不知道这是否具有所需的行为，但它会进行类型检查并且不是简单的解决方案。这使您无需更改类型签名即可逃脱。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T14:51:52.880

我的猜测是重新定义`Branch`以采用两个参数（因为*分支*对我来说意味着这一点）：

```
data Net a where
  Uni :: a -> Net a
  Serial :: Net a -> Net a -> Net a
  Branch :: Show a => Net a -> Net a -> Net (Net a, Net a) 
```

导致

```
eval :: (Arrow a) => Net c -> a b (Net c)
eval (Uni m) = arr (const $ Uni m)
eval (Serial m n) = eval m >>> eval n
eval (Branch l r) = (eval l) &&& (eval r) >>> arr (uncurry Branch) 
```

但我不能说这种变化对你是否有意义。您可能应该给出一些解释如何使用您的类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T14:18:43.670

虽然我不完全确定您的代码的目的，这可能不是您所追求的，但以下类型检查：

```
eval :: Arrow a => Net c -> a b (Net c)
eval (Uni m)      = arr (const (Uni m)) 
eval (Serial m n) = eval m >>> eval n
eval (Branch m)   = arr (const (Branch m)) 
```

当然，`arr . const`对于 eval 来说是微不足道的，但现在我几乎可以肯定这不是你想要的。

# mysql - 创建一个组合字母和数字的PK列

> ID：15386871
> 
> 赞同：1
> 
> 时间：2013-03-13T13:35:31.950
> 
> 标签：mysql, vb6, auto-increment

我有一个产品采购系统，我想要一个格式为 PID*n* 的唯一标识符，其中*n*是一个自动递增的数字。

*   PID00001
*   PID00002
*   PID00003

VB6 和 MySQL 如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:36:52.867

这是不可能的。您可以为自动增量整数添加前缀和填充，也可以使用触发器组合两个单独的列。请参阅[此答案](https://stackoverflow.com/a/3245530/679449)以获得更好的解释。

# performance - 提高码头性能

> ID：15386880
> 
> 赞同：2
> 
> 时间：2013-03-13T13:35:51.827
> 
> 标签：performance, jetty, apache-httpclient-4.x

我有一个程序必须在硬件允许的情况下尽快发出数千个 http 请求。在现实世界中，这些连接中的每一个都将连接到一个独立的服务器，但我已经编写了一个测试程序来帮助我模拟负载（希望如此）。

我的程序使用 Apache HttpClient 发出 http 请求。我的代码基于[此处的](http://hc.apache.org/httpcomponents-client-ga/examples.html)[线程请求执行](http://hc.apache.org/httpcomponents-client-ga/httpclient/examples/org/apache/http/examples/client/ClientMultiThreadedExecution.java)示例。

我的测试程序使用 Jetty 来处理 http 请求并返回正确的响应。我的代码基于一个简单的例子，比如在[这里](http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty#Creating_Servlets)找到的 HelloServlet 。

当我运行测试并监控码头进程时，它只使用少量的 CPU 资源。此外，我使用 VM 运行了第二个 jetty 服务器实例，发现测试在将近一半的时间内完成。

我查找了有关如何调整 Jetty 的信息并找到[了这个文档](http://wiki.eclipse.org/Jetty/Howto/High_Load)。我遵循了这些步骤，但似乎并没有提高性能。是否有关于如何提高 Jetty 性能的更好文档？

## 编辑

我对我的 Jetty 服务器进行了检测，以向我显示执行期间的空闲线程数。我这样配置服务器的线程池：

```
server.setThreadPool(new ExecutorThreadPool(Executors.newFixedThreadPool(500))); 
```

但我的测试程序告诉我，大约 490 个线程处于空闲状态。我的生产代码使用 2,000 个线程，但似乎码头正在排队连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:59:14.270

我能给你的最好指导是向你推荐几篇由 jetty 创始人 Greg Wilkins 撰写的关于基准测试的博客。我这么说是因为老实说，试图调整到你上面的场景并没有带来太多的实际兴趣。

[http://webtide.intalio.com/2010/06/lies-damned-lies-and-benchmarks-2/](http://webtide.intalio.com/2010/06/lies-damned-lies-and-benchmarks-2/)

和

[http://webtide.intalio.com/2012/05/truth-in-benchmarking/](http://webtide.intalio.com/2012/05/truth-in-benchmarking/)

我还要指出，目前改进 servlet 的主要方法是使它们异步，这看起来很简单，但会带来一大堆其他编程缺陷。在许多情况下，交替使用 SPDY 或 websockets 等现代协议可以再次大幅提高性能。

# xcode - UITableViewController 无法识别的选择器发送到实例 0xa17c1f0

> ID：15386884
> 
> 赞同：0
> 
> 时间：2013-03-13T13:36:04.340
> 
> 标签：xcode, uitableview, unrecognized-selector

我是 iOS 开发的新手，目前我正在开发一个包含 4 个选项卡的选项卡式应用程序。在我的一个选项卡上，我试图显示表格视图，但出现以下错误。

**2013-03-13 14:15:35.416 STAM[4054:c07]-[UITableViewController setProducts:]：无法识别的选择器发送到实例 0xa17c1f0**

我创建了一个 ProductsViewController 类，它是 UITableViewController 的子类，并且我将 TableViewController 连接到 StoryBoard 中的 ProductViewController。

我还创建了一个 Product 类，在其中插入了以下属性：

产品.h

```
 #import <Foundation/Foundation.h>

 @interface Product : NSObject
 @property (nonatomic, copy) NSString *name;
 @property (nonatomic, copy) NSString *number;
 @end 
```

在 AppDelegate.mi 中做了以下事情：

```
@implementation AppDelegate {
NSMutableArray *products;
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    products = [NSMutableArray arrayWithCapacity:20];

Product *product = [[Product alloc] init];
product.name = @"Test Product";
product.number = @"123546";
[products addObject:product];

product = [[Product alloc] init];
product.name = @"Test Product 2";
product.number = @"654321";
[products addObject:product];

UITabBarController *tabBarController = (UITabBarController *)self.window.rootViewController;
UINavigationController *navigationController = [[tabBarController viewControllers] objectAtIndex:0];
ProductsViewController *productsViewController = [[navigationController viewControllers] objectAtIndex:0];
productsViewController.products = products;

return YES;
} 
```

最后在 ProductViewController.h 中：

```
#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return [self.products count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath     *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"ProductCell"];
Product *product = [self.products objectAtIndex:indexPath.row];
cell.textLabel.text = product.name;
    cell.detailTextLabel.text = product.number;

    return cell;
} 
```

我真的不知道在哪里寻找错误。

非常感谢你！

花岗岩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:22:15.537

该行：

```
productsViewController.products = products; 
```

转换为：

```
[productsViewController setProducts: products]; 
```

在您提供的代码中，没有提到“读写”产品属性，也没有提供上述方法。您通常可以这样做：

```
@interface ProductViewController ...
@property (readwrite) NSArray *products
// ...
@end

@implementation ProductViewController
@synthesize products
// ...
@end 
```

# c++ - 使用通用引用进行可选引用的技巧？

> ID：15386888
> 
> 赞同：3
> 
> 时间：2013-03-13T13:36:24.200
> 
> 标签：c++, templates, c++11, pass-by-reference, universal-reference

我发现了在标准 C++11 中使用可选引用的技巧。您是否认为这种技术可靠并且行为根据 C++ 标准得到了很好的定义？

```
// Optional reference using C++11 
// V. Reverdy - 2013
#include <iostream>
#include <type_traits>

template <class T = int, class = typename std::enable_if<std::is_same<typename std::decay<T>::type, int>::value>::type>
void f(T&& n = T())
{
    std::cout<<"--------"<<std::endl;
    std::cout<<"is const = "<<std::is_const<T>::value<<std::endl;
    std::cout<<"is reference = "<<std::is_reference<T>::value<<std::endl;
    std::cout<<"is lvalue reference = "<<std::is_lvalue_reference<T>::value<<std::endl;
    std::cout<<"is rvalue reference = "<<std::is_rvalue_reference<T>::value<<std::endl;
    std::cout<<"--------"<<std::endl;
    n *= 2;
} 

int main(int argc, char* argv[])
{
    int n = 42;
    std::cout<<"n = "<<n<<std::endl;
    f();
    std::cout<<"n = "<<n<<std::endl;
    f(n);
    std::cout<<"n = "<<n<<std::endl;
    return 0;
} 
```

结果是：

```
n = 42
--------
is const = 0
is reference = 0
is lvalue reference = 0
is rvalue reference = 0
--------
n = 42
--------
is const = 0
is reference = 1
is lvalue reference = 1
is rvalue reference = 0
--------
n = 84 
```

它似乎适用于 liveworkspace 上所有可用的编译器：[LWS](http://liveworkspace.org/code/3mCZla%240)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:40:46.197

笏。

首先，你已经“实现”的东西可以通过重载来简单得多。其次，它与可选引用*完全不同*。可选引用是一个值，它可能包含也可能不包含*运行时*的引用。行为是明确定义的，但它既不可取也不是可选的参考。在某些情况下，将临时引用绑定为默认参数很好，但它距离可选引用有 10 亿英里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:43:15.337

它是明确定义的，是的，因为“*通用引用*”（请注意这是一个非标准术语）可以解析为右值引用并因此绑定到临时对象，但您没有创建“*可选引用*”。

引用必须始终初始化并且必须始终绑定到对象，它们不能“绑定或不绑定”（这是我对“*可选引用*”的意思的直观理解）。

在这里，您只是将该引用绑定到一个临时对象。您所做的相当于以下内容：

```
template<typename T> void f(T&& t) { ... }
void f() { f(int()); } 
```

如果您的意思是说您现在能够创建一个接受引用并且可以在不提供任何参数的情况下调用的函数 - 这是 IMO 更正确的说法 - 那么这是真的，但我不会考虑它一个突破性的发现。

即使在 C++03 中，您也可以做类似的事情，尽管仅供参考`const`：

```
template<typename T>
void f(T const& = T()) { ... } 
```

由于 C++11 引入了`const`可以绑定到临时对象（右值引用）的非引用，因此自然泛化随之而来，这就是您的技术所利用的。

# resources - Jena - 如何知道特定资源是否在模型中？

> ID：15386893
> 
> 赞同：7
> 
> 时间：2013-03-13T13:36:33.543
> 
> 标签：resources, jena

我试图发现模型中是否有特定资源。为此，我正在使用：

```
model.getResource("example") 
```

检查文档，此方法的行为与 createResource 完全相同。然后，即使它不在模型中，我也会得到一个新的资源。

我如何检查我是否拥有避免创建资源的资源？

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T10:12:24.163

在耶拿，`Resource`对象本身不在模型中*。*该模型只包含*三元组*——`Statement`包含主语、谓语和宾语的宾语（通常缩写为 SPO）。S、P 或 O 中的任何一个都可以是资源（注意 a是Jena 和 RDF 标准中`Property`的子类型）。`Resource`因此，您需要将您的问题从“此模型是否包含此资源”细化为：

*   模型 M 是否包含资源 R 作为主题？

*   模型 M 是否包含资源 R 作为主语、谓语或宾语？

这可以通过以下方式实现：

```
Resource r = ... ;
Model m = ... ;

// does m contain r as a subject?
if (m.contains( r, null, (RDFNode) null )) {
  ..
}

// does m contain r as s, p or o?
if (m.containsResource( r )) {
  ..
} 
```

顺便说一句，在您的代码示例中，您有

```
model.getResource("example") 
```

这将返回一个`Resource`对应于给定 URI 的对象，但不会对模型中的三元组产生副作用。这就是`Model`同时具有`getResource`和`createResource`- get 的原因可能稍微更有效，因为它重用资源对象，但语义基本相同。但是，您传递给`getResource`or的参数`createResource` **应该是 URI**。如果您开始使用令牌`"example"`代替完整的 URI，那么您正在从未来借用麻烦，所以我建议您在适应它之前停止这个坏习惯！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T22:55:10.483

经过一番研究，我找到了下一个方法。我不知道这是否真的是实现它的最佳方法，但有效：

```
Resource toSearch = ResourceFactory.createResource("example");
if(!model.containsResource(toSearch))...; 
```

# sharepoint - 业务数据连接元数据存储当前不可用（仅从 SPD 2010 开始）

> ID：15386901
> 
> 赞同：1
> 
> 时间：2013-03-13T13:36:45.740
> 
> 标签：sharepoint, bcs

我很感激这方面的任何帮助，因为我已经把头撞在墙上几天了......

我收到此错误：“业务数据连接元数据存储当前不可用。” 当我单击 SharePoint Designer 2010 中的对象外部内容类型时。

奇怪的是，我可以通过浏览器访问外部内容类型以在 SharePoint 中创建列表。我试过安装热修复，检查服务应用程序的权限，元数据存储，删除服务应用程序并重新创建它，验证代理/服务正在运行，我是农场管理员。尝试在另一台机器上安装 SPD 2010，同样的错误。

如果我单击弹出窗口，然后单击新建外部内容类型，我将收到此错误：远程服务器返回错误：(403) Forbidden。SPD 中的其他一切工作正常。

我只是不明白这种拒绝访问可能来自哪里。我的设置看起来像：

网络负载平衡 WFE

索引/搜索服务器

中央管理服务器（BCS 运行）

故障转移群集 SQL 服务器

非常感谢任何帮助，因为我已经广泛搜索...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:32:30.887

您要连接的网站的网址是否恰好以 https 开头？如果是这样，请尝试使用 http

我最近遇到了同样的问题，HTTPS是问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-20T05:32:18.943

请检查您的服务器名称是否有下划线“_”。如果已重命名或通过 localhost 连接

这不适用于 SPD：[http://server_name](http://server_name)

这将起作用：[http://localhost:9009](http://localhost:9009)

# javascript - tinyMCE 干预 sms:// 风格的网址

> ID：15386902
> 
> 赞同：1
> 
> 时间：2013-03-13T13:36:50.483
> 
> 标签：javascript, tinymce

我正在使用`relative_urls: false`启用了该选项的 tinyMCE，但无法使用以 . 开头的链接`sms://`。tinyMCE 似乎无法识别此协议，因此不会将以它开头的内容视为绝对 url，然后它会附加到该 url。所以我可能以 . 开头`sms://124567`和结尾`path/to/my/app/sms://1234567`。有没有办法让 tinyMCE 理解`sms://`有效协议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:42:03.980

请查看此问题以获取答案。

[Skype 的 N2CMS TinyMCE filter_allowed_protocols:{user}?call](https://stackoverflow.com/questions/7425855/n2cms-tinymce-filter-allowed-protocols-for-skypeusercall)

它建议使用代码：

```
<n2 xmlns="http://n2cms.com/schemas/configuration/v3">    
    <edit>
      <tinyMCE enabled="true">
        <settings>
          <add key="convert_urls" value="false" />
        </settings>
      </tinyMCE>
    </edit>
 </n2> 
```

> TinyMCE 设置仍应位于它们一直所在的位置 - 在 web.config 中。

# seam - Seam2.2 迁移到 2.3 产生 org.jboss.seam.core.init.jndiPattern 或使用@JndiName 错误

> ID：15386909
> 
> 赞同：4
> 
> 时间：2013-03-13T13:37:01.983
> 
> 标签：seam, jboss7.x, seam2

我目前正在从 Seam 2.2 迁移到 2.3。

我正在遵循这里的指南：http: [//docs.jboss.org/seam/latest/reference/en-US/html/migration23.html](http://docs.jboss.org/seam/latest/reference/en-US/html/migration23.html)，现在正在测试迁移的应用程序。

不幸的是，我遇到了这个错误：

```
Caused by: java.lang.IllegalArgumentException: You must specify org.jboss.seam.core.init.jndiPattern or use @JndiName: 
```

在我的 components.xml 中，我尝试了 2 种方法：

1.  使用核心：初始化：

    ```
    <core:init debug="@debug@" jndi-pattern="@seam_jndiPattern@" />
    //where seam_jndiPattern=java:app/myApp-ejb.jar/#{ejbName} 
    ```

2.  列出无状态 bean：

    ```
    <component class="org.service.admin.impl.AccountService"
            jndi-name="java:app/myApp-ejb/AccountService" />

    @Stateless
    @Name("accountService")
    @AutoCreate
    public class AccountService{
    } 
    ```

但两者都产生了：

```
Caused by: java.lang.IllegalArgumentException: You must specify org.jboss.seam.core.init.jndiPattern or use @JndiName: accountService 
```

但是当我尝试为`@JndiName`无状态会话bean添加注释时，错误已解决，但我不想在每个类上添加注释，因为我有数百个。任何可能的解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T19:00:51.527

在`components.xml`更改`core:init`为

```
<core:init debug="true" jndi-pattern="java:app/**your-ejb-name**/#{ejbName}" /> 
```

或`@JndiPattern`在您的 bean 中使用注释。

```
@JndiName("java/jboss:phoenix-ejb/**yourClassName**") 
```

在你的情况下，它会是

```
@JndiName("java/jboss:phoenix-ejb/**AccountService**") 
```

# android - 由于缺少 info.plist 和其他文件，OS X、iPhone 和 Android 上的 Worklight 构建失败

> ID：15386910
> 
> 赞同：0
> 
> 时间：2013-03-13T13:37:02.810
> 
> 标签：android, iphone, ios, xcode, ibm-mobilefirst

我正在遵循 IBM 的分步“Hello World”指南，位于此处： [http ://www.ibm.com/developerworks/library/mo-aim1206-working-with-worklight-1/](http://www.ibm.com/developerworks/library/mo-aim1206-working-with-worklight-1/)

我正在构建和部署环境的步骤，但是当我尝试这样做时，我收到以下错误。

```
FWLST1040E: iphone build failed: com.worklight.builder.exception.WorklightBuildRuntimeException: Resource Manager - Problem reading info.plist file /Users/snip/Documents/workspace-indigo/HelloWorld/apps/HelloWorld/iphone/native/HelloWorldHelloWorldIphone-Info.plist (No such file or directory) Nested exception: /Users/snip/Documents/workspace-indigo/HelloWorld/apps/HelloWorld/iphone/native/HelloWorldHelloWorldIphone-Info.plist (No such file or directory)

FWLST1040E: android build failed: com.worklight.builder.exception.WorklightBuildRuntimeException: Resource Manager - Error while reading XML file: /Users/snip/Documents/workspace-indigo/HelloWorld/apps/HelloWorld/android/native/AndroidManifest.xml (No such file or directory) Nested exception: /Users/snip/Documents/workspace-indigo/HelloWorld/apps/HelloWorld/android/native/AndroidManifest.xml (No such file or directory)

A core eclipse exception has occurred: Failed to read project description file from location '/Users/snip/Documents/workspace-indigo/HelloWorld/apps/HelloWorld/android/native/.project'. 
```

我已经尝试了通常的嫌疑人试图澄清这一点。

1）删除环境本机文件夹并重建。（失败）
2）删除每个整个环境并再次添加环境（失败）
3）对整个项目进行了完整的项目清理和构建项目。（失败）
4）使用 -clean 选项重新启动 eclipse（失败）

这是我当前的环境：
IDE：Eclipse Indigo Release
WorkLight：5.0.5100（假设是 5.0.0.5？，插件版本很奇怪）
操作系统：Mac OSX 10.8.2

我发现您甚至无法在不遇到某种错误的情况下遵循 Hello World 指南，这非常令人沮丧。这当然是在收到 IBM 在这个框架中为我们编写的移动应用程序之后，我们未能成功地将其部署到 Android 和 iPhone 设备上。（我们能够让它在 Android 和 iPhone 的 WLC 模拟器中运行良好，但实际上将其部署到 iPhone 和 Android 只会导致崩溃）

关于如何解决这个问题的任何想法？WorkLight 是一条值得追求的途径吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:28:43.310

我解决此问题的方法是彻底擦除并重做环境。这对我来说包括以下内容。

1）在 Mac 上创建了一个新用户（我一直在使用另一个 devs 用户）
2）重新安装 Eclipse Juno。
3) 创建一个新工作区
4) 从 Eclipse Market 安装 Worklight
5) 安装 Android ADT 和 SDK。

然后，这使我能够正确创建环境而不会丢失文件警告。

# java - 了解/设置休眠配置

> ID：15386912
> 
> 赞同：0
> 
> 时间：2013-03-13T13:37:13.137
> 
> 标签：java, hibernate

我正在尝试使用我有一些知识的hibernate来理解现有的应用程序。在这个应用程序中，已经创建了一个数据库模式，并且已经从 DB 模式自动生成了类。

让我们以 DB 中的 2 个表为例：

```
 PERSON(id, firstname, surname)
   OBJECT(id, owner_id, description) 
```

在表中`OBJECT`，`owner_id`会是一个外键`PERSON.id`。

生成的类大概是这样的：

```
class Person {
  // ok for the following
  int id; // with getters and setters
  String firstname; // with getters and setters
  String surname; // with getters and setters

  // dunno why the following ?
  Set objects = new HashSet(0);
  Set getObjects() { return this.objects; }
  void setObjects(Set objects)  this.objects = objects; }
}

class Object {

   int id; // with getters and setters 
   Person owner; // with getters and setters
   String description;  // with getters and setters
} 
```

首先，我不知道为什么会引用生成的类中拥有的对象集`Person`。其次，如果我通过 HQL 查询得到一个`Object`或一个，这个成员是否已满载？我应该如何设置休眠以确保它是？`List<Object>``Person``Object`

我之所以问是因为在我的应用程序中，我将休眠会话作为单独的可执行文件运行，而另一个被驱逐的应用程序与休眠应用程序通信并要求它发送一些持久对象。我可以得到一个，`Object`但是如果我在这个对象上制作`object.getPerson().getFirstname()`，我会遇到一个`org.hibernate.LazyInitializationException: could not initialize proxy - no Session`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:43:29.107

您收到 LazyInitializationException 是因为在您的客户端应用程序中，您的“对象”对象中的“人员”字段的值未初始化（它们没有分配值）。您正在尝试访问 Hibernate 实体的未初始化字段而没有打开 Hibernate 会话，因此 Hibernate 无法获得该值。

正如您所说，您必须确保收到所有字段都已初始化的“对象”实例。根据您的 Hibernate 实体的映射方式，有几种可能性（最好向我们提供映射以便能够以更具体的方式回答您）。例如，你可以

1.  将关系标记为**渴望**，这样当您获得对象时，您也会获得人（执行此操作的方式取决于声明映射的方式）
2.  查询对象时使用显式连接。HQL 中的类似内容（我不知道您是否也在使用 HQL）

    select o from Object o join fetch o.owner where o.id = :id

同样，如果您向我们提供更多详细信息，我们可以提供更准确的解决方案

# c# - MVC3 中的 CSS 背景图像 - 续

> ID：15386913
> 
> 赞同：4
> 
> 时间：2013-03-13T13:37:15.090
> 
> 标签：c#, css, asp.net-mvc, asp.net-mvc-3, razor

我最近购买了一个引导主题，我试图将其应用于我的 MVC3 Web App 项目。

我在获取 social-icons.css 中的背景图像以进行渲染时遇到问题。

在 _Layout.cshtml 我引用了：

```
link href="@Url.Content("~/Content/social-icons.css")" rel="stylesheet"      type="text/css" 
```

在标题中。

在 social-icons.css 中：

```
 [class^="social-"],
    [class*="social-"] {
    display: inline-block;
    width: 40px;
    height: 40px;
    margin-right: .3em;
    line-height: 40px;
    vertical-align: text-top;
    background-image: url("img/icons/social-icon-set.png");
    background-position: 40px 40px;
    background-repeat: no-repeat;
    -webkit-transition: all 0.3s ease-in-out;
    -moz-transition: all 0.3s ease-in-out;
    -o-transition: all 0.3s ease-in-out;
    -ms-transition: all 0.3s ease-in-out;
    transition: all 0.3s ease-in-out;
    -webkit-border-radius: 50em;
       -moz-border-radius: 50em;
            border-radius: 50em;
} 
```

我检查了 social-icons.css 和 social-icons-set.png 的路径，一切都出现在 up 和 up 上。

我在这里检查了问答，但这对我没有帮助。 [MVC3 中的 CSS 背景图像](https://stackoverflow.com/questions/6035999/css-background-images-in-mvc3)

对于任何不清楚的信息，请提前道歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:45:56.560

您的图像位置错误。

这就是你所拥有的：

```
background-image: url("img/icons/social-icon-set.png"); 
```

我们可以看到你的截图，它是**`social-icons-set`**（**注意额外的“s”**）：

![在此处输入图像描述](../Images/f5deab53bd25197fed535d15a2cd6643.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:40:36.173

CSS 文件中的任何路径总是相对于 css 文件本身。png 位于`Content/img/icons/social-icon-set.png`?

因为那是 CSS 文件和您的信息所建议的位置。

# wcf - 带有 POST 的 WCF REST 调用引发错误

> ID：15386916
> 
> 赞同：0
> 
> 时间：2013-03-13T13:37:20.947
> 
> 标签：wcf, rest

我的界面定义为

```
[OperationContract]
[WebInvoke(Method = "PostUserData", BodyStyle = 
            WebMessageBodyStyle.WrappedRequest)]
string GetWine2(string wineID); 
```

和服务行为

```
public string GetWine2(string wineID)
{
    return "I love this type of : " + wineID;
} 
```

当我使用 wfetch 工具发布数据时，我始终从 IIS 收到 405 错误。这让我认为这是 IIS 上的一些问题。我曾尝试从自定义代码进行 POST 调用，但我也遇到了同样的错误。我在这个论坛上读到人们因为 WebDav 而遇到问题，但我认为我没有安装它，如果有人能指出我是否安装了它，那就太好了，我不知道什么是 WebDav。IIS 7.5 阻止 post 调用的其他原因可能是什么？

我放置了一个虚拟的 ASPX 页面，效果很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:05:44.087

方法应该是“POST” ...像这样更改 webinvoke

```
 [WebInvoke(Method = "POST")] 
```

或者

```
 [WebInvoke(Method = "POST", UriTemplate = "/GetWine2/{wineID}" BodyStyle = 
        WebMessageBodyStyle.WrappedRequest)] 
```

或者

```
 [WebInvoke(Method = "POST", UriTemplate = "/GetWine2/{wineID}") ] 
```

您用来调用此方法的 URL 是什么？

# matlab - 为什么写入不相关的文件会导致加载功能如此缓慢？

> ID：15386917
> 
> 赞同：4
> 
> 时间：2013-03-13T13:37:23.550
> 
> 标签：matlab, matlab-load

我刚刚花了一些时间调试一些特别慢的代码，并且完全被 MATLAB 分析器抛弃了。在我看来，这就像一个巨大的错误，所以我想知道是否有人可以对这里发生的事情有所了解。

这是一些会导致问题的代码：

```
function profiler_test

  %%% Create 20 files with random data

  count = 20;

  for i = 1 : count
    x = rand(3);
    save(sprintf('temp_file_%06d', i), 'x'); 
  end

  %%% Load them in a for loop

  xs = cell(1, count);

  tic;
  for i = 1 : count
    x = load(sprintf('temp_file_%06d', i), 'x');
    xs{i} = x.x;
  end
  toc

  %%% Load them in a for loop, but writing a small log file on the way

  tic;
  for i = 1 : count
    x = load(sprintf('temp_file_%06d', i), 'x');
    xs{i} = x.x;

    file = fopen(sprintf('temp_logfile_%d', i), 'w');
    fprintf(file, 'Success\n');
    fclose(file);
  end
  toc

end 
```

第一个`for`循环需要 0.239739 秒，第二个循环需要 4.411179。

现在，我应该明确表示我知道我的草率想法，如第二个`for`循环示例所示，为每个结果创建一个日志文件 - 这是因为我在一个看不到的集群上运行输出，我想要一个函数进度的廉价指示，结果证明这是瓶颈。我*很好*。

然而，我的问题是我花了一天时间试图优化错误的行，因为 MATLAB 分析器这样说：

```
 1   24   tic; 
         1   25   for i = 1 : count 
4.41    20   26     x = load(sprintf('temp_file_%06d', i), 'x'); 
        20   27     xs{i} = x.x; 
             28     
        20   29     file = fopen(sprintf('temp_logfile_%d', i), 'w'); 
        20   30     fprintf(file, 'Success\n'); 
        20   31     fclose(file); 
        20   32   end 
         1   33   toc 
```

它将执行最后三行所花费的*全部*`load`时间放在 for 行上。在我的实际程序中，`load`它与另一位不太接近，所以直到我决定不信任分析器时才想到它。我的问题是：这里发生了什么？为什么会发生这种情况，我应该提防任何更奇怪的行为吗？

我正在使用 MATLAB 2011a。非常感谢。

**编辑：**我似乎造成了一些混乱，道歉。情况如下：

*   上面显示的两个`for`循环是相同的，除了第二个循环在底部有三行，每次迭代都会写入一个临时文件。
*   第二个循环需要更长的时间来运行：结论是最后三行是速度增加的罪魁祸首。当它们被删除时，代码又很快了。
*   但是，分析器不会**将**第二个循环的任何时间归因于最后三个语句。相反，它告诉我我的`load`函数调用 -*与第一个循环完全相同的调用，它更快*- 现在需要 4 秒而不是 0.2 秒。因此，要么最后三行的存在导致*速度*`load`变慢（我忽略了这一点；这甚至有可能吗？），或者 MATLAB 分析器错误地报告`load`需要 4 秒，而显然*不是*。

无论哪种方式，在我看来，正在发生一些非常奇怪的事情。

**编辑：**似乎自己回答了，见下文。更改标题，因为它具有误导性

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:22:20.350

我没有在您的帖子中看到任何错误的证据。

您提到整个循环需要大约`4.111`并且分析器显示第 26 行需要大约`4.11`。

这意味着所有其他行一起花费的时间少于`0.01`，因此每行需要四舍五入的零秒。

我的猜测是没有打印零，并且您将其解释为其他行没有计时。

我可能遗漏了一些东西，但到目前为止，MATLAB 提供的输出似乎是一致的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T14:52:37.173

其实我想我已经解决了。我错误地得出结论，即在新线路上发生了额外的处理时间，所以我的问题现在有点误导 - 分析器是正确的。但是，我仍然不明白为什么写入临时文件会导致`load`速度变慢。我有一个想法，那就是试试这个：

```
file = fopen(sprintf('../temp_logfile_%d', i), 'w'); 
```

也就是说，写入父目录中的文件而不是当前工作目录。这消除了问题，而且速度非常快。我猜的原因是当前目录在我的 MATLAB 搜索路径中，还有一堆其他目录。我假设每次 MATLAB 使用一个查看整个搜索路径的函数时`load`，它都会检查是否有任何目录已被修改，如果是，则重新解析整个文件以查看哪些文件可用。将新文件写入工作目录肯定会导致这种情况。这在我的情况下可能更糟，因为我在工作目录中还有一整棵子目录树，它们是搜索路径的一部分。

无论如何，感谢那些看过并抱歉答案与问题完全不同的人。使用依赖于整个搜索路径的函数时要注意！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T14:32:53.900

我得到以下由 MATLAB 2012b 的分析器生成的报告，我没有看到错误。 ![在此处输入图像描述](../Images/ba1d064c4c5407fd1fd4451be270c9ed.png) ![在此处输入图像描述](../Images/fd1d3e6010d54eaa38570f70f5bb404d.png) ![在此处输入图像描述](../Images/8a9098275011a41a6fd94cd0aee17e15.png)

# html - 你能做一个CSS吗 元素到链接？

> ID：15386918
> 
> 赞同：2
> 
> 时间：2013-03-13T13:37:25.580
> 
> 标签：html, css, styles, background-image

我有一个网站，`<header>`它的样式是这样的，因此标题图形是`background-image`. 我想有到主页的标题链接。

有没有一种优雅的方法可以让我将它作为标题保留`background-image`？

**CSS：**

```
#header {
  background-image: url('../images/header.jpg');
  height: 144px;
  display: block;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T13:39:20.833

背景图像不可链接。解决此问题的“正确”方法是拥有一个`<a>`具有适当 的元素`href`，并将其放入`background-image`其中。使用 CSS 来`<a>`占用所需的空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:40:05.573

您的问题涉及`<header>`元素，但 CSS 代码使用类选择器`#header`。从技术上讲，您可以拥有`<header class=header>`，但这毫无意义，并`#header`表明实际标记具有`<div class=header>`.

只要考虑实际的浏览器行为，`<header>`元素和元素都`<div>`可以放置在元素内。`<a>`HTML 规范传统上不允许这样的结构，但 HTML5 CR 允许在`<a>`.

`a`如果标题真的只是一个图像（作为背景图像），那么只使用一个元素并直接在其上设置背景图像似乎更自然。但是，这会降低可访问性，因为无法为背景图像指定替代文本，因此对于屏幕阅读器和禁用图像加载的浏览器，将有一个没有内容的链接，没有链接文本。因此，如果标题应该是链接，最好使用内容图像，例如

```
<header>
<a href="./"><img src=hdr.png alt="ACME Company" border=0></a>
</header> 
```

（但是，内容图像将最小页面宽度强制为图像宽度。这并不总是可取的，但这是一个不同的故事和不同的问题。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-05T17:21:47.107

I do it like this when using a separate style sheet.

Original css header tag

```
 <div id="header">

    </div> 
```

Added span to make header a link

```
 <span><a href="http://www.yourwebsitename.com/">
    <div id="header">

    </div></a></span> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T13:47:03.383

锚点现在是 HTML5 中的块元素，因此它们可以包装块元素，如`h1`,`p`和`div`. 但是，它们并不意味着包装`header`, `article`,`nav`等`section`。

`onClick`如果您无权访问标记或 CSS，则可以使用 JavaScript 将事件分配给标题元素，但这当然需要 JavaScript 才能工作。

相反，您需要`header`用 an包装 的内容`a`并将其分配`href`给您的主页。`display: block`然后，您可以使用背景图像和其他 CSS设置链接样式（确保将其设置为）。

# php - 没有连接关系时SQL返回左表

> ID：15386924
> 
> 赞同：2
> 
> 时间：2013-03-13T13:37:35.143
> 
> 标签：php, mysql, sql, database, phpmyadmin

我有以下查询，它返回帖子/文章数据和评论（如果有的话）。但是，如果没有对帖子发表评论，则即使帖子也不会返回任何内容，因为（我认为）评论表中没有连接关系。如果没有评论，则不会使用帖子 ID 创建行。

谁能解释我如何在一个查询中获取帖子数据和所有相关评论？

这是查询： -

```
 SELECT * FROM posts
                LEFT OUTER JOIN comments
                ON posts.ID = comments.comment_post_id
            WHERE posts.ID = 8 
                AND posts.post_type = 'post' 
                AND posts.post_status = 'publish'
                AND comments.comment_approved = 1
            ORDER BY comments.comment_date_gmt DESC 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T13:40:28.403

您遇到的问题是，即使表保持连接状态，您也会在 where 子句中通过它进行过滤：

```
 AND comments.comment_approved = 1 
```

为了完成这项工作，一种选择是：

```
 SELECT * FROM posts
            LEFT OUTER JOIN comments
            ON posts.ID = comments.comment_post_id
            AND comments.comment_approved = 1
        WHERE posts.ID = 8 
            AND posts.post_type = 'post' 
            AND posts.post_status = 'publish'
        ORDER BY comments.comment_date_gmt DESC 
```

或其他

```
 SELECT * FROM posts
            LEFT OUTER JOIN comments
            ON posts.ID = comments.comment_post_id
        WHERE posts.ID = 8 
            AND posts.post_type = 'post' 
            AND posts.post_status = 'publish'
            AND (comments.comment_approved IS NULL OR comments.comment_approved = 1)
        ORDER BY comments.comment_date_gmt DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T13:40:14.787

因为你有`LEFT OUTER JOIN`你会从左边的表和右边的相关行中得到所有，或者`NULL`如果没有。在`WHERE clause`你有谓词`comments.comment_approved = 1`which `false`when`comments.comment_approved`是`NULL`（不相关的）。

移动`AND comments.comment_approved = 1`到 JOIN 条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:03:08.080

重要的是要了解查询处理器如何为外部（左/右/全）连接和 where 子句发挥作用。

对于每个连接，查询处理器都会创建一个包含连接结果的临时结果集（表）。新连接的表中的数据与当前临时结果集包含的任何内容、From 子句中提到的第一个表中的数据或前一个连接的结果集（如果有的话）相结合。

此结果集 id 基于 Joins ON 子句中表达的谓词（条件）过滤，作为此构造过程的一部分进行处理。当然，连接外侧的条件）仅适用于那里有一行的情况。如果不存在匹配行，则无论如何都包含来自内侧的匹配行，并且用空值替换来自外侧的任何列。

然后，这是关键部分，当它完成所有连接并到达 Where 子句时，那里的条件将应用于从所有连接生成的结果集，而不管结果集是如何构造的（内部/外部，十字架等）。因此，如果您对该结果集中的列有条件，该条件来自连接外侧的表，其中包含空值，因为该连接没有来自外部表的匹配行，那么该行将被排除由 Where 子句条件。

# sql - 在多列sql中拆分单词

> ID：15386930
> 
> 赞同：0
> 
> 时间：2013-03-13T13:37:38.770
> 
> 标签：sql, regex, oracle, split, multiple-columns

我有一个包含这些值的表列：

```
Column-desc
------------------
"car broken"
"motorcycle broken"
"motorcycle clean"
"motorcycle clean and broken"
------------------ 
```

我需要做出一个返回这个的选择：

```
return-desc1 | return-desc2 | return-desc3 |return-desc4 
------------------------------------------------------
car          |  broken      |              |
motorcycle   |  broken      |              |
motorcycle   |  clean       |              |
motorcycle   |  clean       | and          | broken
------------------------------------------------------- 
```

（是的，max ll 返回 4 desc）。我可以在这种情况下使用正则表达式吗？

如果这有帮助：我正在使用 Oracle 10g

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:55:56.397

```
select
    regexp_substr("Column-desc", '\S+', 1, 1) as "return-desc1",
    regexp_substr("Column-desc", '\S+', 1, 2) as "return-desc2",
    regexp_substr("Column-desc", '\S+', 1, 3) as "return-desc3",
    regexp_substr("Column-desc", '\S+', 1, 4) as "return-desc4"
from your_table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:48:46.083

老实说，我的建议是获取 column-desc 并在编程层上进行拆分工作。这样会更容易，也可能更优化。

# python - python重定向到另一个视图

> ID：15386932
> 
> 赞同：4
> 
> 时间：2013-03-13T13:37:41.993
> 
> 标签：python, django, redirect

我想从一个视图重定向到另一个视图并传递数据但没有机会。这是我的代码：

```
def affiche(request):
    if request.method == 'POST':                                     
        form = AfficheForm(request.POST)
        if form.is_valid():
            Select = form.cleaned_data['Select']
            if Select == '1':
                return redirect('affiche_all', devise='EURO')

def affiche_all(request, devise):
    data = websvc(devise)
    return render_to_response('affiche_all.html', {'data': data},
        RequestContext(request)) 
```

我是 django 开发的新手，所以我将感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T13:44:56.273

您需要使用反向来构建您的 URL 以重定向到：

```
from django.urls import reverse
from django.http import HttpResponseRedirect

def affiche(request):
    form = AfficheForm(request.POST or None)
    if request.method == 'POST':     
        if form.is_valid():
            Select = form.cleaned_data['Select']
            if Select == '1':
                url = reverse('affiche_all', args=(),
                    kwargs={'devise': 'EURO'})
                return HttpResponseRedirect(url) 
```

这假设您有一个命名的 url 模式，它接受 'devise' 的关键字参数，如下所示：

```
from django.conf.urls import url, patterns

urlpatterns = patterns('your_app.views',
    url(r'^some-path/(?P<devise>[-\w]+)/$', 'affiche_all', name='affiche_all'),
) 
```

该命名参数将寻找一个或多个单词和连字符，就像一个蛞蝓。您可能希望更改它以满足您的需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T13:45:10.597

尝试这个

```
return HttpResponseRedirect(reverse('affiche_all', devise=('EURO',))) 
```

# svn - 检查提交消息中的特定字符串 - SVN Precommit Hook

> ID：15386934
> 
> 赞同：0
> 
> 时间：2013-03-13T13:37:46.273
> 
> 标签：svn, shell, unix, pre-commit-hook, pre-commit

我期待 svn 提交消息中的以下格式。

> 描述：（变更的一些描述）
> 实体：（变更请求编号）

如果提交时的注释不符合上述格式，则应抛出错误消息。这个想法是检查提交消息中的关键字符串“描述”和“实体”。我还在检查消息中是否存在评论。

我正在使用以下代码，但我无法检查字符串“描述”是否正常工作。（虽然检查空评论工作正常。）你能告诉我可能做错了什么吗？

```
REPOS=$1
TXN=$2
LOG="/home/svn/testSVN/logs/precommithook.log"

GREP=/bin/grep
ECHO=/bin/echo
SVN="/usr/bin/svn";
SVNLOOK="/usr/bin/svnlook";

#Logs the current Transaction ID
"${ECHO}" "Transcation Id ${TXN}" >> "$LOG"

$SVNLOOK log "$REPOS" -t "$TXN" | grep "[a-zA-Z0-9]" > /dev/null

GREP_STATUS=$?
if [ $GREP_STATUS -ne 0 ]
then
"${ECHO}" "No Log comments present" >> "${LOG}"
echo "Your commit has been blocked because you didn't give any log message" 1>&2
echo "Please write a log message describing the purpose of your changes and" 1>&2
echo "then try committing again. -- Thank you" 1>&2
exit 1
fi

$SVNLOOK log "$REPOS" -t "$TXN" | grep [a-zA-Z0-9] | grep -q "Description" > /dev/null

GREP_DESCRIPTION_STATUS=$?
if [ $GREP_DESCRIPTION_STATUS –ne 0 ]
then
  "${ECHO}" "Description not found in the comment" >> "${LOG}"
   echo "Your commit has been blocked because you didn't give the Description in  your     commit message" 1>&2
   echo "Please write a log message describing the purpose of your changes and" 1>&2
   echo "then try committing again. -- Thank you" 1>&2
   exit 1
fi
exit 0 
```

我也尝试使用简单的 grep "Description" 以及 grep -w "Description"。还是拿不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:39:36.290

有一个小的解决方法。用过的

```
LOGMSG=$($SVNLOOK log -t "$TXN" "$REPOS" | grep -w "Description" | wc -c)
if [ "$LOGMSG" -le 0 ]; then echo -e "Please provide a description when committing changes." 1>&2
exit 1
fi 
```

# javascript - 在执行脚本之前如何等待 data-main 加载 Require.JS？

> ID：15386939
> 
> 赞同：2
> 
> 时间：2013-03-13T13:37:55.427
> 
> 标签：javascript, requirejs

我有以下代码：

```
<script data-main="scripts/main" src="components/requirejs/require.js"></script>
<script src="scripts/example1.js"></script> 
```

在里面`example1`，我正在对一些路径应该设置在`scripts/main`. 但是，路径设置不正确（根据控制台反馈判断），这使我相信 require.js 尚未完成加载`scripts/main`.

这一切都很合乎逻辑（异步等等），但我想知道`example1.js`在所有这些设置完成后如何在里面运行代码。

通常，只需将 app-init 代码添加到`scripts/main`可能并完成它，但我正在构建一些示例，它们都共享同一个`scripts/main`文件（非常大），我不想重复这项工作.

那么如何做到这一点呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:42:31.063

结束了以下操作，这并不理想（设置全局），但对于我的示例来说没关系。

```
 <!-- sets window.requireconfig with an json object defining paths, etc.-->
 <script src="scripts/requireconfig.js"></script> 

 <!-- in top of example1.js do : require.config(window.requireconfig); -->
 <script data-main="scripts/example1" src="components/requirejs/require.js"></script> 
```

# java - 如何在带有 Spring 配置文件的 bean 中使用多个公共属性？

> ID：15386941
> 
> 赞同：0
> 
> 时间：2013-03-13T13:38:09.437
> 
> 标签：java, spring

我需要在具有来自不同“地方”的公共字段的 bean 上设置属性，因此类似于：

```
<bean id="parent1" abstract="true">
    <property name="commonField" value="parent1_val"></property>
</bean>

<bean id="parent2" abstract="true">
    <property name="commonField2" value="parent2_val"></property>
</bean>

<bean id="injectDemo1" class="spring.testClasses.InjectDemo1" parent="parent1" parent="parent2>
    <property name="val1" value="val1"/>
</bean> 
```

上面的示例不起作用，因为只允许一个父属性。但这是我需要做的；Spring 中是否有一种机制可以让我从多个来源设置属性。我查看了属性文件来做同样的事情，但是属性文件不能保存我需要的集合、列表或地图，或者它们可以吗？

就像是：

```
<bean id="injectDemo1" class="spring.testClasses.InjectDemo1">
   <property name="val1" value="val1"/>
   <property name="commonField1" value="${prop1}"/>
   <property name="commonField2" value="${prop2}"/>
</bean> 
```

希望我解释清楚好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:03:43.660

我不认为 Spring bean 支持多重继承，出于同样的原因 Java 的制造商决定不支持多重继承。

# android - 我可以在 ListFragment 中使用 AsyncTask 吗？还是我应该使用 AsyncTaskLoader？

> ID：15386948
> 
> 赞同：0
> 
> 时间：2013-03-13T13:38:34.620
> 
> 标签：android, android-asynctask, android-tabhost, android-listfragment, asynctaskloader

我尝试了下面的代码，也尝试了这种`AsyncTaskLoader`方法。当我实例化`AsyncTask`. 请建议我在选项卡主机内的列表片段中加载 JSON 的最佳方法。

下面的代码是标签片段（我在主要活动中使用操作栏标签）：

```
public class TabTop extends ListFragment {
Context context = getActivity().getBaseContext();
String API_URL = "http://api.rottentomatoes.com/api/public/v1.0/movies/770672122/similar.json?apikey=crhhxb4accwwa6cy6fxrm8vj&limit=1";
ArrayList<Deal> deals;
DealsListAdapter adapter;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        @SuppressWarnings("unused")
        int a = 0;
        return super.onCreateView(inflater, container, savedInstanceState);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    GetTopDeals getTopDeals = new GetTopDeals(context);
    getTopDeals.execute(API_URL);
    super.onActivityCreated(savedInstanceState);
}

class GetTopDeals extends AsyncTask<String, Void, ArrayList<Deal>>{
    ProgressDialog progressDialog;

    public GetTopDeals(Context activity) {
        this.progressDialog = new ProgressDialog(activity);
    }

    @Override
    protected void onPostExecute(ArrayList<Deal> result) {
        adapter = new DealsListAdapter(context, result);
        setListAdapter(adapter);
        super.onPostExecute(result);
    }

    @Override
    protected void onPreExecute() {
        progressDialog.setCancelable(true);
        progressDialog.setProgress(0);
        progressDialog.setMessage("loading Top deals...");
        progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        super.onPreExecute();
    }

    @Override
    protected ArrayList<Deal> doInBackground(String... urls) {
        String response = sendRequest(urls[0]); // make request for json
        return processResponse(response); // parse the Json and return ArrayList to postExecute

    }

    private String sendRequest(String apiUrl) {
        BufferedReader input = null; // get the json
        HttpURLConnection httpCon = null; // the http connection object
        StringBuilder response = new StringBuilder(); // hold all the data from the jason in string separated with "\n"

        try {
            URL url = new URL(apiUrl);
            httpCon = (HttpURLConnection) url.openConnection();

            if (httpCon.getResponseCode() != HttpURLConnection.HTTP_OK) { // check for connectivity with server
                return null;
            }
            input = new BufferedReader(new InputStreamReader(httpCon.getInputStream())); // pull all the json from the site
            String line;
            while ((line = input.readLine()) != null) {
                response.append(line + "\n");
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (input != null) {
                try {
                    input.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            if (httpCon != null) {
                httpCon.disconnect();
            }
        }
        return response.toString();
    }
}

public ArrayList<Deal> processResponse(String response) {
    try {
        JSONObject responseObject = new JSONObject(response); // Creates a new JSONObject with name/value mappings from the JSON string.
        JSONArray results = responseObject.getJSONArray("movies"); // Returns the value mapped by name if it exists and is a JSONArray.
        deals = new ArrayList<Deal>();
        for (int i = 0; i < results.length(); i++) { // in this loop i copy the json array to movies arraylist in order to display  listView
            JSONObject jMovie = results.getJSONObject(i);
            int api_id = jMovie.getInt("id");
            String name = jMovie.getString("title");
            String content = jMovie.getString("synopsis");
            JSONObject posters = jMovie.getJSONObject("posters");
            String image_url = posters.getString("profile"); 
        }
    }catch (JSONException e) {
        e.printStackTrace();
    }
    return deals;
}

@Override
public void onStart() {
    super.onStart();

}
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    Intent intent = new Intent(getActivity().getBaseContext(), DealInformation.class);
    startActivity(intent);
    super.onListItemClick(l, v, position, id);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:47:03.477

感谢你们，

我想发布我的答案。经过一些研究，我决定使用 AsyncTaskLoader。这是我的代码

```
public class TabOurPicks extends ListFragment implements LoaderCallbacks<String[]>  {

// when activity loads- onActivityCreated() calls the initLoader() who activate onCreateLoader()
@Override
public void onActivityCreated(Bundle savedInstance) {
    super.onActivityCreated(savedInstance);
    setListAdapter(new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, new String[]{}));
    getLoaderManager().initLoader(0, null,this).forceLoad();
}

// onCreateLoader instantiate the asynctaskloaser who work in bg
@Override
public RSSLoader onCreateLoader(int arg0, Bundle arg1) {
    return new RSSLoader(getActivity());  // 
}

// after bg process invoke onLoadFinished() who work in ui thread
@Override
public void onLoadFinished(Loader<String[]> loader, String[] data) {
    setListAdapter(new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, data
) );

}

@Override
public void onLoaderReset(Loader<String[]> arg0) {
    // TODO Auto-generated method stub

} 
```

这是加载器的内部类：

```
static public class RSSLoader extends AsyncTaskLoader<String[]>
{
    public RSSLoader(Context context) {
        super(context);
    }

    @Override
    public String[] loadInBackground() {
        String url = "http://api.rottentomatoes.com/api/public/v1.0/movies/770672122/similar.json?apikey=crhhxb4accwwa6cy6fxrm8vj&limit=1";
        String response = sendRequest(url);
        return processResponse(response);
    }

    private String sendRequest(String url) {
        BufferedReader input = null; // get the json
        HttpURLConnection httpCon = null; // the http connection object
        StringBuilder response = new StringBuilder(); // hold all the data from the jason in string separated with "\n"

        try {
            URL apiUrl = new URL(url);
            httpCon = (HttpURLConnection) apiUrl.openConnection();

            if (httpCon.getResponseCode() != HttpURLConnection.HTTP_OK) { // check for connectivity with server
                return null;
            }
            input = new BufferedReader(new InputStreamReader(httpCon.getInputStream())); // pull all the json from the site
            String line;
            while ((line = input.readLine()) != null) {
                response.append(line + "\n");
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (input != null) {
                try {
                    input.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            if (httpCon != null) {
                httpCon.disconnect();
            }
        }
        return response.toString();
    }

    private String[] processResponse(String response) {
        String[] deals = null;
        try {
            JSONObject responseObject = new JSONObject(response); // Creates a new JSONObject with name/value mappings from the JSON string.
            JSONArray results = responseObject.getJSONArray("movies"); // Returns the value mapped by name if it exists and is a JSONArray.
            deals = new String[10];
            for (int i = 0; i < 9; i++) { // in this loop i copy the json array to movies arraylist in order to display  listView
                JSONObject jMovie = results.getJSONObject(i);
                String name = jMovie.getString("title");
                deals[i] = name;
            }
        }catch (JSONException e) {
            e.printStackTrace();
        }
        return deals;
    }
}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:46:57.407

在他自己的文件中制作你的异步任务。

当您的 asynctask 完成时，实现自动调用的 OnPostExecute。通过这样的 notifyDataSetChanged 通知您的适配器：

```
 @Override
    protected void onPostExecute(List<NewItem> list) {
    Adapter.getListe().clear();     
    Adapter.getListe().addAll(list);
    Adapter.notifyDataSetChanged();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:52:30.767

您的 asynctask 是否有自己的文件并不重要。您只是不希望您的活动扩展 asynctask，因为这会使您的活动异步 - 但由于 java 的双重继承规则，无论如何这是不可能的。

根据您的应用程序的架构和您的编程风格，asyntask 可以是活动中的内部类。在 PostExecute 方法上，确保您已向适配器提供数据并且适配器已设置为列表，然后只需运行 notifyDataSetChanged()。

假设您的 asynctask 正在从缓存或网络加载数据，您的方法是正确的。

# jakarta-ee - ClassFormatError：类文件 javax/transaction/SystemException 中非本机或抽象方法中的缺失代码属性

> ID：15386950
> 
> 赞同：3
> 
> 时间：2013-03-13T13:38:43.043
> 
> 标签：jakarta-ee, java-ee-6, jboss-arquillian, weblogic12c

我正在尝试对 weblogic 12C 使用 Arquillian。

我将以下配置放入我的 pom.xml

```
<dependency>
        <groupId>org.jboss.arquillian.junit</groupId>
        <artifactId>arquillian-junit-container</artifactId>
        <version>1.0.0.CR7</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.arquillian.protocol</groupId>
        <artifactId>arquillian-protocol-servlet</artifactId>
        <version>1.0.0.CR7</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.shrinkwrap.resolver</groupId>
        <artifactId>shrinkwrap-resolver-impl-maven</artifactId>
        <version>1.0.0-beta-5</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.arquillian.container</groupId>
        <artifactId>arquillian-wls-remote-12.1</artifactId>
        <version>1.0.0.Alpha2</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>weblogic</groupId>
        <artifactId>wlfullclient</artifactId>
        <version>12.1</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.spec</groupId>
        <artifactId>jboss-javaee-6.0</artifactId>
        <version>3.0.0.Final</version>
        <scope>test</scope>
    </dependency> 
```

然后，我将 arquillian.xml 文件配置如下：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<arquillian xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://jboss.org.schema/arquillian"
            xsi:schemaLocation="http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd">
    <container qualifier="weblogic" default="true">
        <configuration>
            <protocol type="Servlet 3.0">
                <property name="executionType">REMOTE</property>
            </protocol>
            <property name="adminUrl">t3://localhost:7001</property>
            <property name="adminUserName">weblogic</property>
            <property name="adminPassword">weblogic1</property>
            <property name="target">AdminServer</property>
            <property name="wlsHome">c:\java\servers\wls12c\wlserver</property>
        </configuration>
    </container>
</arquillian> 
```

最后，我尝试使用 Arquillian “创建”一个存档：

```
 JavaArchive ejbArchive = ShrinkWrap.create(JavaArchive.class,"jee6app-ejb.jar").addAsResource("META-INF/persistence.xml","META-INF/persistence.xml").addPackages(false,Adr.class.getPackage(),Service.class.getPackage());
           EnterpriseArchive earArchive = ShrinkWrap.create(EnterpriseArchive.class, "jee6app.ear").addAsModule(ejbArchive).addAsLibraries(
                   new File("target/test-libs/validation-api.jar"),
                   new File("target/test-libs/hibernate-entitymanager.jar"),
                   new File("target/test-libs/hibernate-validator.jar"),
                   new File("target/test-libs/javassist.jar"),
                   new File("target/test-libs/asm.jar"),
                   new File("target/test-libs/cglib.jar"),
                   new File("target/test-libs/hibernate-jpa.jar"),
                   new File("target/test-libs/hibernate-commons-annotations.jar"),
                   new File("target/test-libs/hibernate-annotations.jar"),
                   new File("target/test-libs/slf4j-api.jar"),
                   new File("target/test-libs/jta.jar"),
                   new File("target/test-libs/dom4j.jar"),
                   new File("target/test-libs/commons-collections.jar"),
                   new File("target/test-libs/antlr.jar"),
                   new File("target/test-libs/hibernate-core.jar")
                   );

            return earArchive; 
```

所以，在所有这些事情之后，我总是有以下错误：

```
Exception in thread "main" java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/transaction/SystemException
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58) 
```

我的配置有什么问题？如您之前所见，我尝试将 wlfullclient jar 和 jboss api jar 添加到类路径

在此先感谢您的帮助

问候

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-14T21:29:00.713

我在类文件 javax/ejb/EJBException 上与远程 EJB 调用的 JBoss 7.1 和 6.1 eap 有类似的错误

并解决了从

```
<groupId>javax</groupId> 
<artifactId>javaee-api</artifactId> 
<version>6.0</version> 
```

到

```
<groupId>org.apache.openejb</groupId>
<artifactId>javaee-api</artifactId>
<version>6.0-5</version> 
```

也许这应该有帮助？
BR

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T23:58:34.870

看到您将`javaee-api`工件拉入测试范围，您可能希望使用 JBoss 提供的 API，

有关更多详细信息，请参阅[此 Arquillian 常见问题解答](https://community.jboss.org/wiki/WhatsTheCauseOfThisExceptionJavalangClassFormatErrorAbsentCode)。

或者，对于 WLS，您可以依靠`wlfullclient.jar`来提供所需的类。您需要将它安装到 Maven 存储库中（可能安装到组织范围的存储库中），然后在您的项目中引用它。

# silverlight - Silverlight WCF RIA - 身份验证超时

> ID：15386952
> 
> 赞同：1
> 
> 时间：2013-03-13T13:38:49.300
> 
> 标签：silverlight, wcf-ria-services

我有一些关于 SL 身份验证的问题。

我正在使用 WCF RIA 服务来访问数据库并实现身份验证以及将数据读/写到数据库。现在，我有自定义身份验证服务和自定义角色提供程序（因为没有最后一个数据库返回异常）。在 Roles Provider 类中，我只实现了一种方法“ **IsUserInRole(string username, string roleName)** ”。我不知道为什么，但项目没有使用所有其他方法。

**1.**在**web.config**文件中，我有一个关于身份验证的文本：

```
<authentication mode="Forms">
    <forms name=".ASPXAUTH" timeout="1440"/>
</authentication> 
```

我设置了超时 1440（身份验证 cookie 的过期日期为 +30 天）。但无论如何，应用程序在*空闲 6-7 分钟内*失去了身份验证。**为什么？？？**此外，我在托管设置中没有发现任何类似的偏好。

**2.**现在，通过 Fiddler 2 我可以看到奇怪的 cookie 设置（仅在获取数据库信息时）：

```
Set-Cookie: .ASPXROLES=; expires=Tue, 12-Oct-1999 04:00:00 GMT; path=/; HttpOnly 
```

我试图找到哪个类或方法放置了这个 cookie，但我什么也没找到。就像“幻像”cookie -_-...我认为，这是我身份验证超时的主要问题之一。**它是什么，我该如何改变它？**

**3.**我找到了很好的解决方案（[Silverlight RIA Services - How To Best Handle Client Auth Session Timeout?](https://stackoverflow.com/questions/7948685/silverlight-ria-services-how-to-best-handle-client-auth-session-timeout)），但它只能帮助我捕获异常。如果我使用下一个方法：

```
WebContext.Current.Authentication.LoadUser(Application_UserLoaded, null); 
```

在应用程序启动时，一切似乎都很好，并且*用户身份*从 cookie 中加载。但！如果我在空闲 6-7 分钟后尝试使用此方法，应用程序会以神奇的方式将导航页面更改为“LoginPage”。我不知道也不知道它是如何做到的。但这是真的。我在“桌面”页面。然后我尝试在空闲后“重新登录”用户，将框架更改为不同的页面，并且所有数据（来自上一页）都丢失了...... :(那么，**为什么“LoadUser”方法让我使用登录窗口进入不同的页面，为什么它不只是重新登录用户身份？**

# wpf - 滚动条的自定义

> ID：15386958
> 
> 赞同：1
> 
> 时间：2013-03-13T13:39:03.720
> 
> 标签：wpf, combobox, scroll, wpf-controls

![在此处输入图像描述](../Images/4767c06ebc4d2e66e0416d4eb60923f9.png)

你好

我希望我的组合框看起来像上图。我尝试了很多方法，但都没有成功。谁能告诉我任何可以像上图一样设置我的组合框样式的网站或代码。

我已经制作了 Aero-theme 的默认滚动条，但是我希望它的弹出窗口大于组合框的宽度。其次是两端的滚动条。我该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:45:56.133

我建议从[主题](http://wpfthemes.codeplex.com/)开始并对其进行修改以满足您的需求。这将为您提供如何实现滚动条模板的基础，并且应该相当容易实现您的结果。否则，如果您可以访问 Expression Blend，它也可以帮助您为滚动条创建自定义控制模板。

要使用主题，只需在项目中包含 Xaml 文件并从应用程序中引用 Xaml。

```
<Application x:Class="MyApp.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             StartupUri="MainWindow.xaml">
    <Application.Resources>

        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Themes/ExpressionDark.xaml" />
... 
```

这将替换您应用中所有控件的模板。如果您只想要滚动条，请注释掉文件的其余部分并保留特定于 ScrollBar 的 Style 和 ControlTemplate。

# r - 为 r 中的集群输出着色

> ID：15386960
> 
> 赞同：1
> 
> 时间：2013-03-13T13:39:09.457
> 
> 标签：r, data-visualization

我有一组集群输出。我想在平行坐标图中以独特的颜色显示每个集群。我正在使用 rggobi 作为平行坐标图。我使用了这个链接 [http://www.ggobi.org/docs/parallel-coordinates/](http://www.ggobi.org/docs/parallel-coordinates/)

这是我将数据加载到 ggobi 的代码

```
library(rggobi)
mydata <- read.table("E:/Thesis/Experiments/R/input.cvs",header = TRUE,sep = ",")
 g <- ggobi(mydata) 
```

这是我的输出 ![平行坐标](../Images/704bc1a463d28ee3e5404fb1b4e54660.png)

我想用不同的颜色来代表不同的集群。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T14:11:31.427

你也可以使用 MASS:::parcoord()：

```
require(MASS)
cols = c('red', 'green', 'blue')
parcoord(iris[ ,-5], col = cols[iris$Species]) 
```

或者使用ggplot2：

```
require(ggplot2)
require(reshape2)
iris$ID <- 1:nrow(iris)
iris_m <- melt(iris, id.vars=c('Species', 'ID'))
ggplot(iris_m) + 
  geom_line(aes(x = variable, y = value, group = ID, color = Species)) 
```

![在此处输入图像描述](../Images/1f1a3abc06fb8eed4bb5b81343be33f4.png)

也请注意[这篇](https://stackoverflow.com/questions/3942508/implementation-of-parallel-coordinates)文章！

# php - PHP json_encode 到 Javascript 未定义/空

> ID：15386962
> 
> 赞同：0
> 
> 时间：2013-03-13T13:39:19.933
> 
> 标签：php, javascript, json, zend-framework

我在将 JSON 从 PHP 返回到 Javascript 时遇到问题。下面是我创建 JSON 的 PHP：

```
$environment[] = array('id' => $env, 'adjacencies' => $hostnames);

foreach($hostnames as $hostname) {
        $environment[] = array('id' => $hostname, 'name' => $hostname, 'data' => array());
    }

return json_encode($environment);; 
```

当我将 json_encode 环境打印到文本文件时，它返回为：

```
[{"id":"Dev","adjacencies":["tb23","tbwag","tbvg","tbut"]},{"id":"tb23","name":"tb23","data":[]},{"id":"tbwag","name":"tbwag","data":[]},{"id":"tbvg","name":"tbvg","data":[]},{"id":"tbut","name":"tbut","data":[]}] 
```

似乎这可以正确打印出来，但是当我将它返回给 Javascript 时，它会以未定义/空值的形式返回。下面是带有 ajax 调用的 javascript：

```
var ajax = new AJAX();
var args = "id=" + $("#apps").val() + "&env=" + node.id + "&nocache=" + (new Date()).valueOf();
ajax.connect("POST", "http://" + window.location.hostname + "/project/graph/host", args, function(json) {

var output = '';
for (property in json) {
    output += property + ': ' + json[property]+'; ';
}
alert(output);
}); 
```

我显然已经尝试了很多不同的方法来让它打印出来，但没有任何运气。在 PHP 中，我尝试了 json_last_error，它返回为“0”，这意味着 JSON 结构没有问题。

最后，我想在 Javascript 中使用以下命令来继续构建我的图表：

```
var hostNodes = eval('(' + json + ')'); 
```

对于为什么我不能让它回来的任何帮助，我们将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:53:08.450

将您的 PHP 代码保存在一个唯一的文件中，该文件接收一个 post 参数，然后构造 json 数组（如果设置），在底部您可以执行

```
echo json_encode($json);
flush(); 
```

我不是纯 javascript 的专业人士，也不熟悉您的方法，但您应该考虑使用 jQuery，至少我会建议一种接收 json 数组的方法，以便您可以轻松使用它（您还要确保数据是 json）：

```
$.ajax(
{
    // Post select to url.
    type : 'post',
    url : 'myPHPAjaxHandler.php',
    dataType : 'json',
    data : 
    {
        'select' : true
    },
    success : function(data)
    {
        // PHP has returned a json array.

        var id, hostname;

        for(var i = 0; i < data.length; i++)
        {
            id = data[i].id;
            hostname = hostname[i].id;
            // Construct a string or an object using the data.

        }
    },
    complete : function(data)
    {
        // Optional.
    }
}); 
```

就像我说的那样，您可以决定是否选择它。对于复杂的项目，它可以变得很方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:55:40.927

看起来您假设传递给回调函数的数据将是您的 JSON 已经解析为 JS 对象，但我没有看到任何迹象表明会出现这种情况；很可能必须使用 JSON.parse 将原始 JSON 数据解析为 JS 对象（不是 eval() - eval() 非常危险，在使用真正的 JSON 数据时，您应该始终首选 JSON.parse，因为它不允许XSS 风格的攻击，因为它们通常不是“纯”JSON。）

# c++ - 在 Windows C++ 中读取扩展引导记录

> ID：15386965
> 
> 赞同：3
> 
> 时间：2013-03-13T13:39:24.983
> 
> 标签：c++, winapi, visual-c++, filesystems

我正在尝试读取扩展引导记录。我想扩展引导记录的位置在绝对起始偏移量的第一个扇区。首先，我读取 MBR（主引导记录）以获取分区信息，我得到扩展分区起始偏移量、分区号和分区总长度。

我想知道如何确定哪个分区是该扩展分区的第一个逻辑驱动器，如果分区是扩展分区，在 MBR 之后是否还存储了任何元数据？

有没有办法我可以得到这些信息？？

谢谢 有没有办法

# maven - 如何使用maven for selenium junit运行ant生成测试报告

> ID：15386967
> 
> 赞同：0
> 
> 时间：2013-03-13T13:39:31.270
> 
> 标签：maven, ant, selenium-webdriver, junit4

您好我正在尝试运行已通过使用 JUNIT、ANT、MAVEN 配置实现的测试套件。

我创建了以下 pom.xml，但是...测试套件没有运行...如果我运行 maven。

我正在使用命令行这样运行

mvn antrun:运行

我应该使用任何其他命令还是我错过了 pom.xml 中的任何东西？那是运行测试套件的命令吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:44:13.947

很抱歉给您带来不便，我的 stackoverflow 不允许粘贴 pom.xml 的完整代码

# python - Python Windows 服务到守护程序服务

> ID：15386969
> 
> 赞同：1
> 
> 时间：2013-03-13T13:39:31.630
> 
> 标签：python, linux, daemon, pywin32

我已经编写了多个 python windows 服务，现在我需要将它们移植到 Linux。

这些服务不断重复，直到发出结束标志，表示工作停止。这就像 windows 中的任何服务一样，它使用 pywin32 库实现启动/停止/重启方法以挂钩到 windows 的框架。Linux中有这些命令的框架吗？我找不到任何关于此的文档。

1.  开发 Linux 服务（守护进程）时是否有模式可以遵循？如果是这样，我在哪里可以找到这些资源？

2.  我知道 pypi 上有很多 Linux Daemon 的 3rd 方包，有人有偏好吗？

3.  有没有办法查看服务是否在不同的 Linux 机器上运行？您可以远程启动和停止 linux 机器上的服务吗？如果您无法检查服务是否在 linux 中运行，那么我想做的是创建一个接受各种命令的服务器，例如：

    *   STATUS - 通知作业是否在机器 X 上运行
    *   TURNOFF - 结束服务（如果可以的话）
    *   TURNON - 在机器上打开服务（如果可以的话）

抱歉，问题范围很广，但我是 Linux 新手。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:55:56.143

您有许多不同的选择，但一般来说，您需要研究 Python 之外的 Linux 方面，以决定什么是有意义的。您选择的 Linux 发行版也会有所不同，因为它们中的一些默认使用不同的服务管理框架。我个人倾向于喜欢[upstart](http://en.wikipedia.org/wiki/Upstart "暴发户")，它有简单直接的配置文件，并且默认情况下在 Ubuntu 中也有。看看这个[博客](http://tech.cueup.com/blog/2013/03/08/running-daemons/)（不是我的），它很好地概述了一些不同的选项。

欢迎来到 Linux 的狂野世界，起初可能看起来很奇怪，但它真的很有趣！

# c++ - arm（cortex-m3）的位置独立可执行文件（-pie）

> ID：15386970
> 
> 赞同：2
> 
> 时间：2013-03-13T13:39:35.243
> 
> 标签：c++, gcc, arm, dynamic-loading

我正在使用 codesourcery g++ lite（基于 gcc4.7.2 版本）为 stm32（Cortex-m3）编程。我希望动态加载可执行文件。我知道我有两种选择：
1\. 可重定位精灵，它需要精灵解析器。
2\. 具有全局偏移寄存器的位置无关代码（PIC）

我更喜欢带有全局偏移寄存器的 PIC，因为它似乎更容易实现，而且我不熟悉 elf 或任何 elf 库。此外，使用一些工具可以很容易地从 elf 文件生成 .bin 文件。

我尝试使用“-msingle-pic-base -fpic”编译选项和“-pie”链接选项构建我的程序，但随后出现链接错误：

> ...path...ld.exe: ...path...thumb2\libstdc++.a(pure.o): 重定位 R_ARM_THM_MOVW_ABS_NC 在制作共享对象时不能使用“本地符号”；使用 -fPIC 重新编译

我不太明白错误信息。似乎默认的标准 c/c++ 库不能与我的选项一起使用，我需要获取库的源代码并为自己的目的进行重建。
那么，
1\. 任何人都可以向我提供有关如何使用与位置无关的可执行文件的任何有用信息/链接吗？
2\. 有了 -msingle-pic-base 选项，我就不需要太在意 GOT 和 ld 脚本了，对吧？

注意：如果没有“-pie”链接选项，我可以构建程序。但是在调用 c++ 虚函数时程序会失败（当我使用 IDE(keil) 的模拟器来调试我的程序时）。我不明白发生了什么以及我错过了什么。

-------------------------------------------------- ------------------
-- 添加 20130314

> 1.  使用**-msingle-pic-base**选项，我不再需要过多关心 GOT 和 ld 脚本，对吧？

根据我的实验，**寄存器（我的程序中使用了 r9）应该指向 got.plt 部分的开头**。删除“-pie”选项，链接将成功，（正确设置r9）然后成功调用c ++虚函数。不过，我仍然认为“-pie”选项很重要，它可以确保当前的标准库是位置无关的。谁能为我解释一下？

-------------------------------------------------- --------------------
-- 添加了 20130315
我查看了 ARM 网站上关于 ABI 的文档。但这没有什么帮助，因为他们没有针对特定平台。似乎有一个 EABI 的概念（我使用的是 sourcery 的 arm-none-eabi 版本），但我在 arm 的网站上找不到任何关于“EABI”的文档。我也无法从 sourcery 和 gcc 中找到有关此主题的文档。**PIC 的实现不止一种，那么在非 eabi 情况下，sourcery g++ 使用的是哪一种？我认为“-msingle-pic-base”、“-fpie”、“-pie”选项的行为记录太差了**！

从反汇编代码中，我刚刚发现，在“-msingle-pic-base”中，r9 应该指向“.got”部分的基地址，.got 部分中的指针是绝对指针并且变量的寻址类似于文章中的描述：[共享库中的位置独立代码（PIC）](http://eli.thegreenplace.net/2011/11/03/position-independent-code-pic-in-shared-libraries/)。所以我仍然需要在加载时修改“.got”部分。**我不知道我的程序中使用的“.got.plt”部分是什么。似乎函数调用正在使用 PC 相对寻址。
如何使用“-pie”构建或如何链接使用“-fpic”编译的标准库对我来说仍然是一个问题**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-08T10:29:45.837

错误消息告诉您在构建 gcc 编译器时重新编译最常构建的 libstdc++ 库。

因此，您必须使用 -fPIC 重新编译您的标准库（libstdc++、libgcc_*、libc、libm 等等）并将您的项目与它们链接起来。

如果您依赖预构建的编译器包，那么您在微控制器世界中大部分时间都在游戏之外。如果您自己构建编译器（顺便说一句，这不是太难，而是一项高级/专家任务），那么您就在旅途中。

也可以使用您拥有的编译器自己编译您的标准库。您将需要库的来源并弄清楚编译器包构建系统如何构建它们，并且您必须模仿这一点。也许这里有一些专家，他们可以通过这种方式为您提供建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-22T18:54:07.483

在最初提出这个问题八年后，有一篇关于这个主题的不错的博客文章，但它就在那里：[https ://mcuoneclipse.com/2021/06/05/position-independent-code-with-gcc-for-arm-cortex -m/](https://mcuoneclipse.com/2021/06/05/position-independent-code-with-gcc-for-arm-cortex-m/)

一般的大纲是你必须：

1.  根据链接器生成的信息设置 GOT
2.  从 Program Header 信息设置 PLT
3.  实现基于 GOT 条目的活页夹
4.  将您的库编译为共享的可重定位二进制文​​件：`-msingle-pic-base -mpic-register=r9 -mno-pic-data-is-text-relative -fPIC`
5.  相应地设置 R9

# java - 如何使用 jama 声明矩阵

> ID：15386971
> 
> 赞同：2
> 
> 时间：2013-03-13T13:39:36.537
> 
> 标签：java, matrix, jama

我是 Java 编程的新手。我正在做一个科学模拟，其中必须解决一个线性方程组。

我在 Eclipse 中工作。我下载了 jama jar 文件并添加到 JRE 系统库。问题是当我通过将二维双精度数组作为构造函数参数传递来创建一个新的 Matrix 对象时，IDE 提到“构造函数 Matrix(double [ ][]) 未定义”。

我用谷歌搜索了很多，但一无所获:(

有人碰到过吗？我该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:10:32.880

jama 的文档表明实际上存在这样的构造函数。在 netbeans IDE 中使用 jama 1.0.3 进行的快速测试确认构造函数存在并且可以相应地使用。

我怀疑lib没有正确加载。另一种可能性可能是您创建了自己的 Matrix 类，并且正在使用它而不是 Jama.Matrix 类。当您使用 Jama.Matrix 而不是 Matrix 时，是否也会出现错误？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:19:56.627

获取矩阵 jar 文件。将 jar 添加到您的类路径中（在 net beans 中，我只是将其添加到项目的库中；我相信您应该将 Matrix jar 文件添加到 eclipse 中的“java build path”中）。

完成上述操作后，Matrix(double[][]) 可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-18T08:19:37.457

我认为您需要更多关于 JAMA 的信息。所以，请看一下： http: [//math.nist.gov/javanumerics/jama/doc/](http://math.nist.gov/javanumerics/jama/doc/)

# database - 在 PostgreSQL 中将表从一个数据库复制到另一个数据库

> ID：15386987
> 
> 赞同：0
> 
> 时间：2013-03-13T13:40:16.087
> 
> 标签：database, copy, postgresql-9.1

我在 PostgreSQL 的服务器端的数据库中有许多表。我想将它们全部放在另一个数据库中。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:44:05.663

使用带有选项的 PostgreSQL`pg_dump`实用程序`-t table`来定义应该转储的表并将它们恢复到另一个数据库中。有关更多信息，请参阅 PostgreSQL [pg_dump 文档页面](http://www.postgresql.org/docs/current/static/app-pgdump.html)

# c - C - 删除 int 搞乱队列

> ID：15386995
> 
> 赞同：0
> 
> 时间：2013-03-13T13:40:30.807
> 
> 标签：c, integer, queue

我有一个结构，其中包含一个整数数组和一个显示队列末尾的 int （“后”）。我有一些函数，例如add()、remove() 和print()。

remove() 函数应该向前移动所有项目（有效地删除 arr[0]，将其替换为 arr[1]，但它不起作用。

如果我的数组看起来像 111,222,333,444 并且我调用 remove()，结果看起来像 112,223,334 等。

到目前为止，我能够解决所有经常非常令人沮丧的问题，主要与 Java 相关，但是我根本不理解这个 C 问题。我希望你能提供一些意见。谢谢。

代码的相关部分：

```
void remove( struct queue *q )
{
    int i;
    system ("cls");

    if ( q->rear >  0)
    {
        printf("\n\n%d has been removed\n\n", q->rank[0]);
        q->rear--;
        for ( i = 0; i < q->rear; i++)
        {
            q->rank[i] = q ->rank[i]++;
            printf(rank[i])
        }
        q->rank[(q->rear +1)] = NULL;
    }
    else
    {
        printf("\n\nThe queue is empty\n\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:44:58.207

线

`q->rank[i] = q ->rank[i]++;`

应该

`q->rank[i] = q ->rank[i+1];`

否则你在循环中增加 i 两次。

# ios - insertObject:AtIndex:0 无法正常工作

> ID：15386999
> 
> 赞同：-1
> 
> 时间：2013-03-13T13:40:37.290
> 
> 标签：ios, objective-c, nsmutablearray, nsarray

我有这个函数，其中函数的`insertObject:AtIndex:0`行为很奇怪。将所有对象插入到 NSMutableArray cardViewControllers 后，最终元素始终是`nil`。我在 init 方法的开头做了 alloc init cardViewControllers。

```
- (void)reloadCardViews;
{
    // Add the restaurants onto view
    [self removeAllCards];

        for (int i = 0; i < NO_OF_CARDS; i++) {
            SHCCardVC *vc = [[SHCCardVC alloc] initWithAppearanceIndex:i];
            vc.delegate = self;
            [cardViewControllers insertObject:vc atIndex:0];//it's behaving weird here
            [self addChildViewController:vc];
            // set card position to center of the container
            vc.view.center = CGPointMake(_cardContainer.frame.size.width / 2, _cardContainer.frame.size.height / 2);
            [_cardContainer addSubview:vc.view];
        }
        _currentCardViewIndex = 0;
        _currentCardIndex = 0;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:04:18.100

做什么`[self removeAllCards]`？我怀疑你打电话`[cardViewControllers removeAllObjects]`？你试过使用`[cardViewControllers addObject:vc]`吗？如果这可行并且顺序很重要，请使用 . 从后面穿过您的 for 循环`i--`。

**还要确保您的对象不是 nil 并且您的数组是可变的并且也已初始化。我对未初始化的可变数组有类似的问题。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:08:26.580

您不能将 nil 对象添加到数组中，这是运行时错误。所以保留计数一定很奇怪，这就是我目前所能想到的。NSArray 保留其中的对象，因此该对象在某处被释放了太多次。

这是一种可能吗？