# StackOverflow 问答 15775000-15775999

# java - Hibernate：多对多联合继承策略方法

> ID：15775000
> 
> 赞同：3
> 
> 时间：2013-04-02T21:45:24.460
> 
> 标签：java, hibernate, orm, many-to-many, entity-relationship

我遇到的问题更多的是方法问题而不是如何使用，请让我解释一下：

两个班级，学生和家庭作业。学生班级有一份他们许多家庭作业的清单。家庭作业课有一个要完成它的许多学生的列表。

一些示例代码，以防有人搜索快速多对多示例：

```
@Entity(name="STUDENT")
@Inheritance(strategy=InheritanceType.JOINED)//Note this join type, no redundancy    
public class Student {

@Id
@GeneratedValue(strategy=GenerationType.AUTO)
private int id;

@ManyToMany(mappedBy="studentList")//Note how this is mapped
private Collection<Homework> homeworkList = new ArrayList<Homework>();

@Entity(name="HOMEWORK")
@Inheritance(strategy=InheritanceType.JOINED)    
public class Homework {

@Id
@GeneratedValue(strategy=GenerationType.AUTO)
private int id;

@ManyToMany
private Collection<Student> studentList = new ArrayList<Student>(); 
```

Hibernate 做它的事情并创建一个表 student_homework 使用主键将每个家庭作业映射到学生，反之亦然。

例如，我怎么可能使用 Hibernate 来保存“homeworkCompleted”布尔值。这个值不能存在于学生班，因为有很多工作，家庭作业班也一样，因为有很多学生。

一种可能的解决方案是可能手动进入数据库，创建另一列，每次保存条目时都可以选择更新已完成或稍后再做。

我不禁想到有一个非常简单的解决方案，hibernate 可以处理并让一切正常，还有一点应用逻辑。

非常感谢，院长

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T10:31:01.603

你现在需要两个多对一，你的 student_homework 变成了类似于 Assignment[completed] 的东西。

更多信息： [Mapping many-to-many association table with extra column(s)](https://stackoverflow.com/questions/5127129/mapping-many-to-many-association-table-with-extra-columns)

# ruby-on-rails - 将参数保存到数据库 Django Rails 等效项？

> ID：15775002
> 
> 赞同：0
> 
> 时间：2013-04-02T21:45:29.970
> 
> 标签：ruby-on-rails, django

当我从 rails 切换到 django 时，我想知道是否有类似的方法可以在 django 中一次将所有参数保存到数据库中。在我使用的导轨中

```
foo = Bar.create! params[:foo]
render :json => foo 
```

在 django 中是否有等价物，还是我必须将每个参数分配给相应的 db 字段？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:48:40.463

就在这里。

您基本上最终会保存表单：[https ://docs.djangoproject.com/en/dev/topics/forms/modelforms/#the-save-method](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#the-save-method)

# python - 使用 python 和 gtk 3 将 gtk 应用程序主题更改为默认值

> ID：15775003
> 
> 赞同：0
> 
> 时间：2013-04-02T21:45:31.820
> 
> 标签：python, linux, gtk

有没有一种方法可以告诉我的 python 3 应用程序始终使用带有 GTK 的 Adwaita 主题（Gnome 3 默认主题）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-21T23:51:59.893

To force a specific Gtk theme, just load the css file:

```
win_style_context = self.get_style_context()
css_provider = Gtk.CssProvider()
css_provider.load_from_path("/usr/share/themes/Adwaita/gtk-3.0/gtk.css")
screen = Gdk.Screen.get_default()
win_style_context.add_provider_for_screen(screen, css_provider,
                                  Gtk.STYLE_PROVIDER_PRIORITY_APPLICATION) 
```

# playframework - Play Framework 2.1.0 和 AngularJS 集成

> ID：15775004
> 
> 赞同：6
> 
> 时间：2013-04-02T21:45:33.067
> 
> 标签：playframework, angularjs, playframework-2.0

1) 我想将 AngularJS 与 Play Framework 2.1.0 一起使用，Play 将 JSON 内容作为 RESTful 服务器后端提供服务，自从从 1.x 版迁移到 2.x 版以来，似乎无法服务器静态 HTML使用以下方法从公共文件夹中获取内容：

路由.conf：

```
GET     /                           staticFile:/public/index.html 
```

这会导致引发*控制器方法调用预期*异常。

我发现在 Play 2.1.0 中有效的一种方法是在 Controller 中编写一个 Action 方法，如下所示：

```
public static Result index() {
    return ok(Play.application().getFile("public/index.html"));
} 
```

这是最好的方法还是有更优雅和更实用的解决方案？

2) 在这种使用客户端 JavaScript 框架而不是基于 Scala 的模板引擎的方法中是否有任何潜在的缺点或“陷阱”？

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-02T10:53:22.043

使用 Angular 路由时的一种方法是使用 Play 为您的索引页面提供服务，并将部分作为来自公共目录的静态资源提供服务。该`routes`文件将具有以下内容：

```
GET         /                               controllers.Application.index
GET         /assets/*file                   controllers.Assets.at(path="/public", file) 
```

Play 控制器看起来像：

```
 def index = Action {
     Ok(views.html.index())
  } 
```

这允许您使用 Plays 模板来进行资源导入（它也可以很好地与[WebJars](http://www.webjars.org/)一起使用）。例如在你的`index.scala.html`：

```
 <script src="@routes.Assets.at("javascripts/app.js")" type="text/javascript"></script>
 <script type='text/javascript' src='@routes.WebJarAssets.at(WebJarAssets.locate("angular.min.js"))'></script> 
```

然后您可以将所有部分放在公共目录中并将它们作为静态文件提供，这些可以从您的 app.js 中引用，如下所示：

```
 when('/partial-1', {templateUrl: '/assets/partials/partial-1.html',   controller: CtrlPartial1}). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:51:40.087

当文件在`public`文件夹中时，您可以简单地使用`/assets/*`URL 访问它们。你也可以这样做：

```
GET   /view/*file      controllers.Assets.at(path="/public/angular", file) 
```

Morover，我想说即使它是静态的，您将来也可能希望动态生成一些数据。因此，您可以做的就是简单地将 HTML 文件创建为经典模板，比如说：`ang/index.scala.html`. 然后您的路线和控制器将如下所示：

*路线：*

```
GET   /    controllers.Application.angView() 
```

*控制器：*

```
public static Result index() {
  return ok(views.html.ang.index(/*some data here?*/));
} 
```

我喜欢使用客户端视图来生成客户端生成的东西，并使用服务器端视图来准备字段，注入在整个应用程序生命周期中应该使用的所有相关数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-17T02:34:38.317

最终的种子 ( [https://github.com/angyjoe/eventual](https://github.com/angyjoe/eventual) ) 完美地服务于文件夹中的静态 HTML 页面，`public`同时使 Play`routes`脚本文件几乎完好无损。

种子最少使用 Play Scala 模板，以便为 HTML 中的 AngularJS 指令腾出空间。

# google-visualization - 谷歌图表 vAxis 向右

> ID：15775006
> 
> 赞同：8
> 
> 时间：2013-04-02T21:45:40.080
> 
> 标签：google-visualization

我正在使用谷歌可视化

```
var data2 = new google.visualization.DataTable();
        data2.addColumn('string', 'time');
        data2.addColumn('number', 'amount');
        data2.addColumn({ type: 'string', role: 'tooltip' });
        data2.addRows(rows_data);
        var options2 = {
            vAxis: { textPosition: 'none', title: '', textStyle: { fontName: 'arial'} },
            hAxis: { slantedText: false, textStyle: { color: '#E6EFFA' }, gridlines: { color: '#E6EFFA', count: 20} },
            backgroundColor: '#E6EFFA',
            legend: 'none',
            chartArea: { top: 0 },
            colors: ['#435988'],
            chartArea: { width: 800 }
        };
        chart2 = new google.visualization.LineChart(document.getElementById('chart_div_volume')); 
```

我希望 vAxis 位置在右侧。可能吗 ？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-03T03:05:41.483

简短的回答：是的，但这很棘手。

长答案：

您需要设置一个多轴图表。基本上，您创建一个没有标签或任何东西的虚拟轴，使其看起来像一个轴。然后配置辅助轴。您创建一组虚拟值（隐藏）放在第一个轴上，并在第二个轴上绘制真实数据。

这是一个例子：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['Year', 'Dummy', 'Sales', 'Expenses'],
    ['2004',  0,   1000,      400],
    ['2005',  null,   1170,      460],
    ['2006',  null,   660,       1120],
    ['2007',  null,   1030,      540]
  ]);

  var options = {
    title: 'Company Performance',
    series: { 0: {targetAxisIndex: 0, visibleInLegend: false, pointSize: 0, lineWidth: 0},
              1: {targetAxisIndex: 1},
              2: {targetAxisIndex: 1}
             },
    vAxes: {
      0: {textPosition: 'none'},
      1: {},
    }
  };

  var chart = new google.visualization.LineChart(document.getElementById('visualization'));
  chart.draw(data, options);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-30T11:07:59.773

```
 google.charts.load('current', { 'packages': ['corechart'] });
        google.charts.setOnLoadCallback(drawVisualization);

        function drawVisualization() {
            var data = new google.visualization.DataTable();
            data.addColumn('string', 'Productivity');
            data.addColumn('number', 'Composite');
            data.addColumn({ type: 'number', role: 'annotation' });
            data.addColumn('number', 'Average(N=5)');
            var compositeDataArry = [];
            compositeDataArry.push(["Ravi", 11, 11, 5]);
            compositeDataArry.push(["Wasif", 5, 5, 5]);
            compositeDataArry.push(["Vipin", 2, 2, 5]);
            compositeDataArry.push(["Ankur", 3, 3, 5]);
            compositeDataArry.push(["Pankaj", 1, 1, 5]);
            compositeDataArry.push(["Dheeraj", 4, 4, 5]);

            data.addRows(compositeDataArry);
            var options = {
                title: 'My Chart',
                titleTextStyle: { color: '#264158', fontSize: 24 },
                seriesType: 'bars',
                annotations: {
                    alwaysOutside: true,
                    textStyle: {
                        color: '#000000',
                        fontSize: 15
                    }
                },
                hAxis: {
                    slantedText: true,
                    slantedTextAngle: -45
                },
                series: {
                    0: { targetAxisIndex: 0, },
                    1: { targetAxisIndex: 1, type: 'line' }
                },
                vAxes: {
                    0: { textPosition: 'none' },
                    1: {}
                }             
            };
            var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
            chart.draw(data, options);

        } 
```

```
<html>
<head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

</head>
<body>
    <div id="chart_div" style="height: 500px; width: 100%"></div>

</body>
</html>
```

[![在此处输入图像描述](https://i.stack.imgur.com/ctA3p.png)](https://i.stack.imgur.com/ctA3p.png)

# python - 连接四的 Minimax 不返回值

> ID：15775010
> 
> 赞同：0
> 
> 时间：2013-04-02T21:46:01.787
> 
> 标签：python

当我运行这个程序时，我得到一个错误，即 MinimaxNode' 对象没有属性 'value'

ConnectFour 是另一个类，它初始化棋盘并标记移动，检查是否有人获胜等。实用程序只返回 2 分（仍在进行中）

问题出现在 MinimaxPlayer 中的 child.get_minimax_value 中，因为它提出了一个错误，即 MinimaxNode' 对象没有属性 'value'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:57:03.410

如果`get_minimax_value`是一个方法，`child.get_minimax_value`应该是`child.get_minimax_value()`。

没有括号，`child.get_minimax_value`表示绑定的方法，而不是方法返回的值。

因此，`child.get_minimax_value`从不等于`v`，并且`if-clause`条件为 False，并且`col`永远不会被设置。

然后，Python 在到达时会引发错误

```
board.ConnectFour.play_turn(self.playernum, col) 
```

* * *

我认为也许在`MinimaxPlayer.minimax`缩进级别的`return v`语句应该在`for`-loops 之外。否则，节点的值将仅取决于`node.children`.

```
def minimax(self, node, cur_depth):
    if cur_depth == self.ply_depth:
        u = self.utility.compute_utility(node, self.playernum)
        node.set_minimax_value(u)
        return u
    node.compute_children()
    if cur_depth % 2 == 0:
        v = float("-inf")
        for child in node.children:
            childval = self.minimax(child, cur_depth + 1)
            v = max(v, childval)
            node.set_minimax_value(v)
        return v
    if cur_depth % 2 != 0:
        v = float("inf")
        for child in node.children:
            childval = self.minimax(child, cur_depth + 1)
            v = min(v, childval)
            node.set_minimax_value(v)
        return v 
```

但是没有可运行的代码真的很难说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:50:10.243

您看到的输出仅仅是因为您打印出 object `MinmaxNode`，该 object 必须没有`__repr__`设置方法。

您的“分配前引用局部变量 'col'”的错误是因为您在 for 循环中有条件地定义，但无论是否已分配，都`col`将其用作参数。您应该在运行循环之后和调用它之前`play_turn`检查`col`是否已定义。`for`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T21:50:25.357

您收到该错误是因为它`s possible the following line runs before`col` 已分配

```
board.ConnectFour.play_turn(self.playernum, col) 
```

该`col`值仅在`for`循环主体内分配。python解释器看到并得出结论，如果循环体执行0次，或者`if`条件永远不会计算为真，则`col`不会被分配。

您需要在循环执行之前明确地为 col 分配一个值，并在调用时检查它`play_turns`

```
col = -1
for child in root.children
  ...
if col != -1: 
  board.ConnectFour.play_turn(self.playernum, col) 
```

# ios - 离线 iOS 企业应用部署和配置

> ID：15775011
> 
> 赞同：2
> 
> 时间：2013-04-02T21:46:02.520
> 
> 标签：ios, deployment, enterprise

我在 SO 上发布了这个问题，因为我认为这是找到具有丰富 iOS 企业计划经验的人的最合乎逻辑的地方。

对于我的公司，我们正在开发一个内部应用程序。我们希望在用户侧**<1>**以最少的工作量部署这个应用程序，因为它应该可以为即将到来的同事快速安装它。此外，我们不能总是保证安装时互联网连接正常运行**<2>**。内部应用程序将通过 wifi 从网络服务器下载到我们的场所。

我们目前没有加入企业计划，因为我们正在调查我们的目标是否可以实现。

至于**<1>**，我们发现 UDID 不必包含在企业部署的配置文件中。需要的是配置文件。现在，这是我的第一个具体问题：

*   在安装配置文件*之前*是否需要任何额外的步骤？

*   配置文件是否可以像 OTA 测试版那样嵌入到应用程序中？这将节省用户安装配置文件的步骤。

对于**<2>**，我想到了以下问题：

*   [这里](http://help.apple.com/iosdeployment-apps/mac/1.1/#app43ad717e)它指出需要访问`ax.init.itunes.apple.com`和`ocsp.apple.com`。前者用于查询允许的最大 GPRS 应用文件大小。当您的目标是通过 wifi 分发时，这听起来并不相关，但页面显示“如果无法访问此站点，安装可能会失败。” 所以它确实让我有点担心。后者似乎不那么严重，因为它指出“无法联系或从 OCSP 服务器获得响应不会被解释为撤销”，这意味着应该可以不立即联系该服务器。

*   我假设我可以使用任何 URL 方案来指向提供应用程序包的本地服务器，并且对服务器配置没有限制。

*   总结两者：是否可以在没有正常互联网连接的情况下从本地服务器安装内部应用程序？

谢谢您的帮助; 非常感谢。由于我之前没有企业部署方面的经验，因此很难确信我没有错过 Apple 文档中的细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T01:26:13.523

可以嵌入配置文件。

您的员工的设备在下载应用程序时需要互联网连接，以便设备可以联系您提到的 Apple 服务器。

# ruby-on-rails - Rails：将 where 条件应用于模型和关联

> ID：15775012
> 
> 赞同：1
> 
> 时间：2013-04-02T21:46:11.953
> 
> 标签：ruby-on-rails, ruby, associations, where

在我的应用程序中，我有如上定义的模型项目、类别和分类：

```
 class Item < ActiveRecord::Base
      attr_accessible :name, :description, :property_valuations, :barcode

      has_many :categorizations
      has_many :categories, :through => :categorizations
    end

    class Category < ActiveRecord::Base
      attr_accessible :name, :description, :parent, :children, :items, :parent_id

      has_many :children, :class_name => "Category", :foreign_key => "parent_id", :dependent => :nullify
      belongs_to :parent, :class_name => "Category"

      has_many :categorizations
      has_many :items, :through => :categorizations

      def all_children(children_array = [])
        children = Category.where(:parent_id => self.id).includes(:items)

        children_array += children.all
        children.each do |child|      
          children_array = child.all_children(children_array)
        end
        children_array
      end

    end

class Categorization < ActiveRecord::Base
  attr_accessible :category, :item

  belongs_to :category
  belongs_to :item

end 
```

我正在递归搜索类别树以查找与类别关联的项目。但是，除了按 parent_id 过滤类别之外，我还想应用过滤器项目名称。我该怎么做（我期待类似的东西`Category.where(:parent_id => self.id).includes(:items).where(:name => 'something...')`）？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:24:02.080

你可以做

```
Category.where(:parent_id => self.id).includes(:items).where("items.name like ?", '%cheap%') 
```

* * *

这将获得类别以及符合条件的项目。

IE：

```
categories = Category.where(:parent_id => 2).includes(:items).where("items.name like ?", 'AA%')
categories.first.items.size # -> 2
categories.first.id # -> 1
Category.find(1).items.size # -> 3
Category.find(1).items.where("name like ?", 'AA%').count # -> 2 
```

* * *

如果您只想获取父类别的子类别的项目：

```
parent_category = Category.find(2)
Item.joins(:categories).where(categories: {parent_id: parent_category.id}).where("items.name like ?", 'AA%') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:33:31.453

您的数据库可能支持递归查询（以避免您的 all_children 函数的手动递归），例如通过 with 命令的 postgres，但 rails 没有访问它的包装器。如果这种递归发生很多，可能值得在这里阅读：http: [//gmarik.info/blog/2012/10/14/recursive-data-structures-with-rails——](http://gmarik.info/blog/2012/10/14/recursive-data-structures-with-rails)看起来确实有一些有前途的宝石解决了这个问题，但我个人没有使用过它们中的任何一个。

# python - python显示完整路径

> ID：15775016
> 
> 赞同：0
> 
> 时间：2013-04-02T21:46:42.453
> 
> 标签：python

```
import os
def find_method(name):
        i = 0
        found_dic = { "$_GET":[], "$_POST":[], "include":[], "require":[], "mysql_query":[], "SELECT":[], "system":[], "exec":[], "passthru":[], "readfile":[], "fopen":[], "eval":[] }

        for i, line in enumerate(file(name, "r")):
                found = False
                for key in found_dic:
                        if key in line.strip():
                                found_dic[key].append("LINE:"+str(i)+":" + key)
                                found = True

        for key in found_dic:
                if found_dic[key]:
                        print " ", "-"*10, key, "-"*10
                        for r in found_dic[key]:
                               print "  ",r

def search(dirname):
        flist = os.listdir(dirname)
        for f in flist:
                next = os.path.join(dirname, f)
                if os.path.isdir(next):
                        search(next)
                else:
                        doFileWork(next)

def doFileWork(filename):
        ext = os.path.splitext(filename)[-1]
        #if ext == '.html': print filename
        if ext == '.php':
               # print "target:" + filename
                find_method(filename) 
```

这里的问题1.我需要我的结果需要显示

```
EX) === /var/www/html/zboard/zboard.php ==
---------- exec ----------
   LINE:288:$a_setup="<a onfocus=blur() href='admin_setup.php?exec=view_board&no=$setup[no]&group_no=$setup[group_no]&exec2=modify' target=_blank>"; else $a_setup="<Zeroboard "; 
```

但这只会显示

```
---------- exec ----------
   LINE:287:exec
  ---------- mysql_query ----------
   LINE:43:mysql_query
   LINE:95:mysql_query
   LINE:120:mysql_query 
```

如何使用此代码显示类似的示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:56:21.543

如果我正确理解您的问题，您是在询问如何获取绝对文件路径。这个问题已经在[这个](https://stackoverflow.com/questions/51520/how-to-get-an-absolute-file-path-in-python)stackoverflow 问题中得到了回答。

要重复你会在那里找到的答案：

```
>>> import os
>>> os.path.abspath("mydir/myfile.txt") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:03:44.497

看起来你有两个不同的问题。

* * *

首先，您显然希望在每批“发现”前加上它们所在的文件，如下所示：

> EX) === /var/www/html/zboard/zboard.php ==

我不确定该格式应该是什么，但是……您已经获得了所需的所有信息`doFileWork`，而您只是没有打印它。只需将此行添加到`doFileWork`函数的顶部：

```
print "EX) === {} ==".format(filename) 
```

如果您想保证它是绝对路径，即使您从相对路径开始，也只需：

```
print "EX) === {} ==".format(os.path.abspath(filename)) 
```

* * *

其次，您显然希望每个匹配项都打印整个匹配行，而不仅仅是匹配的键。

同样，你也有你需要的信息；问题是您明确使用`key`而不是`line.strip()`. 只需替换这个：

```
found_dic[key].append("LINE:"+str(i)+":" + key) 
```

… 有了这个：

```
found_dic[key].append("LINE:"+str(i)+":" + line.strip()) 
```

# npm - Bower 包在 Sublime 中不起作用

> ID：15775020
> 
> 赞同：0
> 
> 时间：2013-04-02T21:46:54.207
> 
> 标签：npm, bower

我为 Sublime 安装了 Bower 包。它说 Bower 已安装，但是当我尝试安装任何东西时，我收到此警告：

> 在您的 $PATH 中找不到 bower。安装凉亭`npm install bower -g`

在使用终端时，我是个菜鸟，但我尝试在那里安装 Bower。但它回来了：

> -bash：npm：找不到命令

看来这与 Node 有关，但我什至不知道那是什么或任何关于它的东西。我在 Mac 10.6.8 上，使用 Sublime Text 2。如果此解决方案需要返回终端，请为我拼写我们的，因为我不习惯使用它。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:04:54.847

好吧，我自己想通了。我安装了 Node——仍然不知道它到底是什么——但显然我需要它。[我在http://nodejs.org/download/](http://nodejs.org/download/)找到了一个安装程序包 然后我回到终端并尝试再次安装 Bower。仍然没有工作。然后我将 sudo 添加到该行，它似乎已经工作了。

# java - jar 从外部读取文件

> ID：15775021
> 
> 赞同：0
> 
> 时间：2013-04-02T21:46:54.167
> 
> 标签：java, eclipse, jar

我已经建立了一个项目。项目必须读取配置文件和数据文件（均为文本文件）。文件应该由用户上传，它们可以有不同的名称。一切正常。

我从项目创建了可运行的 jar，并尝试像这样从 cmd 运行它 `java -jar walksat.jar "params_3.txt", "Test3ArielWCNF-log.wcnf"`：我可以打印 jar 中的参数，它认为它们没问题，但我得到： `java.io.FileNotFoundException: params_3.txt, (The system cannot find the file specified) at java.io.FileInputStream.open(Native Method) at java.io.FileInputStream.<init>(Unknown Source) at java.io.FileInputStream.<init>(Unknown Source) at mla.project.main.WalkSAT.setGlobalParams(WalkSAT.java:347) at mla.project.main.WalkSAT.main(WalkSAT.java:60)` 我得到第二个文件的相同错误。但是，如果我将文件名硬编码（而不是 args[0] 和 args[1]），jar 可以读取它们。

jar 文件和其他两个文件在同一个文件夹中。

我在这里想念什么？

**更新** `args[0]`到最后了`,`，我没看到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-06T20:13:46.803

```
File jarFile = new File("."); 
```

这将为您提供 jar 所在的当前目录的引用。您现在可以使用 jarfile.listFiles() 从中读取文件。假设您应该将配置、数据文件和 jar 文件保存在同一个文件夹中

我创建了一个小型主类，您可以将其导出为可运行的 jar 并运行它。它将列出目录中的所有文件。

导入java.io.File；

公共类阅读器{

```
public static void main(String[] args) {

        File jarFile = new File(".");
        if(jarFile.isDirectory())
        {
            File[] allFiles = jarFile.listFiles();
            System.out.println("Printing File names");
            for (File file : allFiles) {
                System.out.println(file.getName());
                //code for reading the file goes here..............
            }
        }

    } 
```

}

# javascript - 如何在有序列表中显示函数的输入

> ID：15775023
> 
> 赞同：0
> 
> 时间：2013-04-02T21:46:59.790
> 
> 标签：javascript, forms, loops, for-loop

我需要编写一个代码来创建一个具有三个兴趣的表单。当用户提交它们时，它们需要出现在列表中。到目前为止，我有这个编码：

当我点击“提交”时，我不会在任何地方得到指导。

```
<html>
   <head>
    <script>
function validateForm()
{var x=document.forms["myForm"]["interest1"].value;
var y=document.forms["myForm"]["interest2"].value;
var z=document.forms["myForm"]["interest3"].value;

}
</head>
    </script>

    <body>
      <form name="myForm" action="demo_form.asp" onsubmit=return validateForm()" method="post">
        Interest 1:<input type="text"  name="interest1">
        Interest 2:<input type="text" name="interest2">
        Interest 3:<input type="text" name="interest3">
        <input type="submit" value="Submit">
      </form>

    </body>
</html> 
```

我需要使用 for 循环来获取提交的值。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:49:43.427

由于您要在提交时返回函数，因此如果您想提交，请尝试从函数中返回 true

```
<script>
function validateForm() {
    var x=document.forms["myForm"]["interest1"].value;
    var y=document.forms["myForm"]["interest2"].value;
    var z=document.forms["myForm"]["interest3"].value;

    // TODO: validate x, y and z

    return true;
}
</script> 
```

您的结束标签的顺序也不正确，请确保`</script>`出现在`</head>`.

# python - python 的 _args 和 _kwargs 参数

> ID：15775024
> 
> 赞同：1
> 
> 时间：2013-04-02T21:47:03.090
> 
> 标签：python

```
#!/usr/bin/env python

class Countries(object):
        def __init__(self,*_args,**_kwargs):
                self.name = 'japan'
                self.continent = 'asia'
                self.capital = 'tokyo'
                print _args
                print _kwargs

        def display(self):
                print self.name, self.continent,self.capital

iraq = Countries('iraq','bagdad','asia')

iraq.display()

india = Countries('india','delhi','asia')

india.display() 
```

我在上面写了一个自学示例。我知道无论我总是分配什么参数

```
'japan' , 'asia' , 'tokyo' 
```

到类的成员变量。我写上面是为了理解

```
 *_args and **_kwargs 
```

上述程序的输出如下

```
('iraq', 'bagdad', 'asia')
{}
japan asia tokyo
('india', 'delhi', 'asia')
{}
japan asia tokyo 
```

_args 在哪里`('iraq', 'bagdad', 'asia')`

和 __kwargs 是`{}`

为什么要打印一个空字符串，`_kwargs`并且所有参数都打印为一个列表`_args`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T21:49:33.037

因为您没有传递任何关键字参数。如果你这样做了`Countries('Iraq', capital='Bagdad')`，那么它会为 kwargs 打印一些东西。

# javascript - 我的主机可能会阻止什么| 动态脚本不加载

> ID：15775026
> 
> 赞同：0
> 
> 时间：2013-04-02T21:47:04.673
> 
> 标签：javascript, ajax, dynamic-loading

我不是 javascripts/ajax 方面的专家，但我知道一些 html、css 和 php....

我有一个 joomla 博客……带有 ajax 扩展……

问题是，一些脚本应该进行动态加载，它们永远不会在我当前的主机上运行......但它们在我的其他主机、wamp 等上加载得很好......我不知道是什么正在进行中，我相信主机被阻止了，但他们唯一的答案是“联系开发人员，我们找不到任何东西”....：（我相信他们仍然被阻止了一些东西，但我不知道是什么。 ...我什至没有收到错误消息，并且 firebug 没有显示任何错误，只是没有加载，仅此而已....

第一种情况是搜索结果，它应该在向下滚动时加载更多 - >我得到一个空白页面，没有错误，即使我将错误显示设置为最大......

第二种情况 - 现在 - 我在主页上有文章介绍，加载正常，但是当我在模块中设置选项 - “点击按钮加载更多” - 没有任何反应......

但在这两种情况下，它在 wamp 和另一个类似的主机上都可以正常工作....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:48:15.843

如果您还没有，我会尝试将您的 AJAX 正在使用的 URL 直接放入您的浏览器中，然后查看返回的内容。

# android - Eclipse 没有获取我的 Android 设备目标 API

> ID：15775027
> 
> 赞同：0
> 
> 时间：2013-04-02T21:47:14.217
> 
> 标签：android, eclipse, device

我意识到以前有人问过这个问题，但没有人能帮助我，我想将我的 Nexus 7 与我预先存在的 Android 项目一起使用，但是当我尝试使用它时，Eclipse 并没有找到它的目标。

-我已经更新了我的相关驱动程序。
-Android 复合 ADB 接口是最新的。
- 它适用于我之前使用的设备（HTC Desire S）。

**更新**

当我将其连接为 PTP 和 MTP + 时，它不会拾取目标，因为它都将状态注册为离线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:12:38.183

设备未显示为目标的最常见原因。

1）“Eclipse 需要重新启动”。

2) 设备驱动安装不正确。

3）目标api/版本代码不兼容

尝试

1）将手机插入不同的USB端口。（有时会刷新驱动程序）

2）创建一个与您的android版本兼容的空项目，并查看它是否可以使用您的设备（如果可以，则意味着您必须为您的项目更新targetSdk）。

* * *

如果一切都失败了，请重新启动 Eclipse 几次并保持手指交叉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:10:51.743

遵循本教程。

如果您喜欢玩弄您的Android 设备（例如root 或安装自定义ROM），那么您可能熟悉Android 的“USB 调试模式”。但是，USB 调试模式实际上仅适用于开发人员，不知道自己在做什么的人可能会意外启用它，从而使他们的设备处于危险之中。这就是为什么从 Android 4.2 Jelly Bean 开始，Google 隐藏了启用 USB 调试模式的能力。如果您想知道如何在 Android 4.2 及更高版本中启用 USB 调试模式，本指南将向您展示如何做到这一点。

以下步骤适用于所有运行 Android 4.2 及更高版本的 Android 设备。这包括 Nexus 4、Nexus 10、Nexus 7、Galaxy Nexus 和任何其他设备。如何在 Android 4.2 及更高版本中找到并打开 USB 调试模式

要在 Android 4.2 或更高版本中查看 USB 调试模式选项，请执行以下操作：

```
Open up your device’s “Settings”. This can be done by pressing the Menu button while on your home screen and tapping “System settings”
Now scroll to the bottom and tap “About phone” or “About tablet”.
At the “About” screen, scroll to the bottom and tap on “Build number” seven times.
    Make sure you tap seven times. If you see a “You are now a developer!” message pop up, then you know you have done it correctly. 
```

完毕！通过点击“内部版本号”七次，您已经在 Android 4.2 及更高版本上解锁了 USB 调试模式。现在，您可以随时通过转到“设置”->“开发人员选项”->“调试”->“USB 调试”来启用/禁用它。结论

那很简单。最好的部分是你只需要执行一次 tap-build-number-seven-times。完成一次后，USB调试已解锁，您可以随意启用或禁用。

如果您已经完成，请检查此解决方案是否有帮助[Not seen Nexus7 in Eclipse's Android Devices](https://stackoverflow.com/questions/11533228/not-seeing-nexus7-in-eclipses-android-devices)

# yii - 显示每种用户 yii 的数据

> ID：15775028
> 
> 赞同：0
> 
> 时间：2013-04-02T21:47:17.830
> 
> 标签：yii, rights

我是 yii 的新手。

我正在使用 user 和 rigths yii 扩展。我已经使用 gii 创建了模型和视图。每个用户属于一个域

```
+----------------+  
|      users     |
|----------------|
| id             |
| username       |
|  ...           |
| id_from        |
+----------------+

+----------------+  
|      from      |
|----------------|
| id             |
| desc           |
+----------------+

+----------------+  
|      data      |
|----------------|
| id_user        |
| data_1         |
| data_2         |
| ......         |
+----------------+ 
```

除了每个用户的滚动。当我使用创建的视图时，每个用户都可以看到所有数据，但我需要每个用户只能看到自己的数据。我怎么能做到？

就像为每种用户设置一个过滤器或类似的东西。

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:16:51.953

```
$model = Data::model()->findallbyattributes(array('id_user'=>Yii::app()->user->id));
$this->render('yourviewfile', array('model'=>$model)); 
```

然后在您的视图文件中

```
foreach($model as $m){
  echo $m['data_1'].','.$m['data_2'];
} 
```

# python - 无法让我的 SQL 以我的 pygame 形式在我的数据库中显示我的分数

> ID：15775033
> 
> 赞同：0
> 
> 时间：2013-04-02T21:47:24.010
> 
> 标签：python, sql, database, python-2.7

我试图创建一段代码，以便当我的游戏结束或游戏获胜时，他的得分会显示在数据库中。

游戏代码：

```
 def gameover():
    message = Msg("Game Over")
    message.update()
    player.kill()
    shot.kill()
        SQL = 'INSERT INTO TblScore(Score) VALUES (' + str(score.value)
        Databaseconnector.INSERT(SQL) 
```

数据库连接代码：

```
def INSERT(SQL):
    print(SQL)
    cursor.execute(SQL)
    conn.commit() 
```

错误：

```
ProgrammingError: ('42000', '[42000] [Microsoft][ODBC Microsoft Access Driver] Syntax error in INSERT INTO statement. (-3502) (SQLExecDirectW)') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T21:48:38.007

您忘记了右括号：

```
 SQL = 'INSERT INTO TblScore(Score) VALUES (' + str(score.value) + ')'
                                                                   ^^^^^^^ 
```

# c# - 序列化类保持层次树

> ID：15775041
> 
> 赞同：1
> 
> 时间：2013-04-02T21:47:52.187
> 
> 标签：c#, xml, serialization

我想序列化类层次结构并将层次结构树保留在生成的 xml 中。我用实现 Message 抽象类的 Heartbeat 对象设置了 ProtokolMessage 类的 Message 属性。作为输出结果，我想得到以下 xml：

```
<protocol>
    <name>someName</name>
    <messageId>1101</messageId>
    <heartbeat>
             <time>2013-04-02T17:35:55</time>
    </heartbeat>
</protocol> 
```

然而生成的 xml 是：

```
<protocol>
    <Message xsi:type="heartbeat" />
    <name>someName</name>
    <messageID xmlns="Message">1101</messageID>
</protocol> 
```

领域模型：

```
[XmlRoot("protocol")]
public class ProtocolMessage
{
    [XmlElement(ElementName = "name")]
    public string Name { get; set; }

    [XmlElement(ElementName = "messageID")]
    public string MessageID { get; set; }

    public Message Message {get; set;}

    public ProtocolMessage()
    {}
}

[XmlInclude(typeof(Heartbeat))]
public abstract class Message
{
    public Message()
    { }
}

[XmlType(TypeName = "heartbeat")]
public class Heartbeat : Message
{
    [XmlElement("time")]
    protected string Time { get; set; }

    public Heartbeat()
        : this(DateTime.Now)
    {
    }

    public Heartbeat(DateTime dateTime)
    {
        Time = dateTime.ToString("s");
    }
}

public class Program
{
    static void Main(string[] args)
    {
        var protocolMsg = new ProtocolMessage
        {
            Name = "someName",
            MessageId = "1101",
            Message = new Heartbeat();
        };

        var serializer = new XmlSerializer(typeof(ProtocolMessage));
        StringWriter sw = new StringWriter();
        serializer.Serialize(sw, this);
    }
} 
```

我可以在xml中获取层次结构树吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:09:56.123

时间没有显示，因为它是受保护的财产。

如果您将其更改为公开，您会正确看到该元素。

```
<?xml version="1.0" encoding="utf-16"?>
<protocol xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <name>someName</name>
  <messageID>1101</messageID>
  <Message xsi:type="Heartbeat">
    <time>2013-04-02T15:09:36</time>
  </Message>
</protocol> 
```

如果您在 Message 上方将 ElementName 设置为“heartbeat”，它将起作用，但我认为如果您有不同类型的 Message，它们将始终设置为“heartbeat”，这可能对您不起作用。

```
[XmlElement(ElementName = "heartbeat")]
public Message Message { get; set; } 
```

# aem - CQ5.5 命令标准 HTTP 过滤器部署为 OSGI 组件

> ID：15775044
> 
> 赞同：0
> 
> 时间：2013-04-02T21:48:24.477
> 
> 标签：aem, sling

在 CQ5.5 中，我如何订购 2 个标准 HTTP 过滤器部署为 OSGI 组件？

问题是 2 个过滤器必须按照 FilterA 先运行然后 FilterB 的顺序运行。

如何按顺序订购 2 个过滤器？

您知道是否有任何 OSGI 或 SCR 属性可以让我订购 2 个过滤器以便一个接一个地运行？

例如：

过滤器 A

```
@Component
@Service
@org.apache.felix.scr.annotations.Properties({
@Property(name = "pattern", value = "/.*"),
@Property(name = Constants.SERVICE_RANKING, intValue = 99999, propertyPrivate = false)
})
public class FilterA implements implements javax.servlet.Filter {
}

FilterB

@Component
@Service
@org.apache.felix.scr.annotations.Properties({
@Property(name = "pattern", value = "/.*"),
@Property(name = Constants.SERVICE_RANKING, intValue = 100000, propertyPrivate = false)
})
public class FilterB implements implements javax.servlet.Filter {
} 
```

我想先运行FilterA，然后再运行FilterB。

如果我在 CQ5.5 上将上述过滤器部署为 OSGI 包，我只会看到在 HTTP 白板控制台上触发了 FilterB。在我的 CQ5.5 登录请求流程中，我什至没有看到 FilterA 被调用。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:32:06.870

检查[http://sling.apache.org/site/filters.html](http://sling.apache.org/site/filters.html) 服务排名是您正在寻找的。另请注意，在 sling/cq5 上，您可以通过查看 /system/console/config 和 Sling Servlet 过滤器来查看哪些过滤器处于活动状态及其排名。

另请参阅 filter-scope 和为引入基于模式的范围所做的更改（[SLING-1213](https://issues.apache.org/jira/browse/SLING-1213)，[SLING-1734](https://issues.apache.org/jira/browse/SLING-1734)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:29:28.160

您需要为您的服务添加一个 filter.order 属性：

```
@Property(name="filter.order",intValue=-2500) 
```

该值越低，过滤器将放置在链中越靠前。

# oop - 对象包装器和表单

> ID：15775046
> 
> 赞同：2
> 
> 时间：2013-04-02T21:48:33.263
> 
> 标签：oop, design-patterns, symfony, symfony-forms

我正在开发一个电子商务平台，遇到了一个困难。基本上，我在我的场景中有一个产品、选项和选项值。一个产品可能有多个选项，这些选项可能具有多个值。问题是如何以易于创建和编辑的方式存储它。

![](https://i.stack.imgur.com/81HBX.png)

问题是我直接引用了 OptionValue，它是可变的。我需要保留有关 Option 和 OptionValue 的不可变信息（例如，如果下订单并且颜色为绿色，即使此选项更改为浅绿色，订单也必须保持显示为绿色）。在这种情况下，我需要保存选项的一些属性（例如选项名称 - “颜色”）和每个选项值（每个选项的值 - 例如“红色”）。我认为，它需要一个与现有结构非常相似的结构：一个新的类 ItemOption 引用 Option 和一个 ItemOptionValue 引用 OptionValue。

![](https://i.stack.imgur.com/zMmbv.png)

所以，这是我的尝试：

要创建一个表单来显示我的选项，我有：

```
class OptionSelectorType extends AbstractType {
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        foreach ($options['product']->getOptions() as $option) {
            $builder->add($option->getId(), 'choice', array('choice_list' => new ObjectChoiceList($option->getValues());));
        }
    }
} 
```

我正在使用 DataTransformer 转换 OrderItemOption 集合中的 OptionValue 集合：

```
class OrderItemOptionToOptionValueTransformer implements DataTransformerInterface
{ 
    public function transform($lineOptions)
    {
      if(!$lineOptions) {
        return array();
      }
      $values = array();
      foreach($lineOptions as $lineOption) {
        $lineOption->getOption()->getId();
        $values[$id] = array();

        foreach($lineOption->getValues() as $lineOptionValue) {
          $values[$id][] = $lineOptionValue->getOptionValue();
        }
      }

        return $values;
    }

    public function reverseTransform($values)
    {
      $collection = new ArrayCollection();
      foreach($values as $optionId => $optionValues) {
        if(!$optionValues) {
          continue;
        }

        $lineOption = new OrderItemOption();
        $optionValues = is_array($optionValues) ? $optionValues : array($optionValues);
        foreach($optionValues as $optionValue) {
          $lineOptionValue = new OrderItemOptionValue();
          $lineOptionValue->setOptionValue($optionValue);
          $lineOption->addValue($lineOptionValue);
        }

        $lineOption->setOption($optionValue->getOption());
        $collection->add($lineOption);
      }

      return $collection;
    }
} 
```

最后，我的 OrderItemType 表单：

```
class OrderItemType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
      $builder->add(
        $builder->create('options', 'option_selector', array('options' => $options['options']))
        ->addModelTransformer(new OrderItemOptionToOptionValueTransformer())
      );
    }
} 
```

它有效，但在我看来不是一个好方法，一旦 OptionValue 总是被重新创建，永远不会更新。

你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T09:57:27.623

我会保持简单。你可以坚持你的结构，但不要动态地改变事物，而是让它们保持相同的状态。

**我是什么意思？**

每当创建一个 Option 时，就创建相应的 ItemOption。OptionValue 和 ItemOptionValue 也是如此。两者之间的关系是一对一的连接，而Option和OptionValue不知道连接的ItemOption和ItemOptionValue。

现在，如果 OptionValue 发生变化，您可以查询连接的 ItemOptionValue 并更改您需要更改的内容（取决于内部结构）。

**如何存储连接？**

使用您已经使用的任何持久性方法。对于数据库，将连接存储在一个表中，如下所示：

```
CREATE TABLE item_option_to_option (
    optionID INT(10) NOT NULL,
    itemOptionID INT(10) NOT NULL,
    UNIQUE KEY (optionID, itemOptionID)
); 
```

如果可能的话，我会使用外键将两列链接到表中的相应列`item_option`和`option`. 它与 OptionValue 和 ItemOptionValue 相同。

**如何处理变化？**

每当调用 OptionValue 更改的控制器时，也只需更新 Item* 模型。

如果删除了 Option 或 OptionValue，则取决于您是否也删除了 ItemOption 或 ItemOptionValue。

# javascript - 单击时在淡入和淡出之间切换

> ID：15775049
> 
> 赞同：0
> 
> 时间：2013-04-02T21:48:44.430
> 
> 标签：javascript, jquery, methods, fadein, fadeout

我想在单击图像时使用jQuery淡入div，再次单击图像时，我希望它隐藏等等。

我该怎么做？

我基本上需要一个拨动开关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T21:50:51.883

```
$('#my_img_selector').click(function(){$('#my_div_selector').fadeToggle()}); 
```

[在这里试试](http://jsfiddle.net/vovkss/3muYh/)。

也尝试`slideToggle()`并`toggle()`代替`fadeToggle()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T21:59:34.337

You have to change the selectors `$('#fadeMe')` and `$('#bindImage')` according to your markup. The magic is [here](http://fiddle.jshell.net/C87GP/)

```
$(document).ready(function(){
    $('#bindImage').on('click', function(){
        $('#fadeMe').fadeToggle();
        //return false; // only useful if you trigger an <a href="#"></a>
    });
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T22:00:56.907

```
$('#yourimage').on('click', function(event){
 if ($("#something").is(':visible')) {
 $(".something").hide("drop", {
    direction: "up"
  }, 2000);
}else{
  $(".something").show("drop", {
    direction: "up"
  }, 2000);
}
}); 
```

# c# - Metro应用程序中页面加载完成后如何运行方法

> ID：15775055
> 
> 赞同：0
> 
> 时间：2013-04-02T21:49:13.053
> 
> 标签：c#, microsoft-metro, async-await

我正在尝试在我的游戏页面完全加载后运行一个名为 drawMoveLines() 的方法。这个方法，drawMoveLines()，在我的游戏页面上的对象之间画线。但是，当我尝试在我的游戏页面的 main 方法的底部运行它时，由于对象尚未正确加载，这些行变得很乱。（虽然当我从游戏页面中的按钮运行它时它工作正常）

我相信走下去的道路涉及异步编程，但由于我对这个概念的处理相当原始，所以在正确方向上的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T02:06:26.360

找到了正确的语法。如下。

```
//This here
this.Loaded += new RoutedEventHandler(Page_Loaded);

//Calls this event
private void Page_Loaded(object sender, RoutedEventArgs e)
     {
         drawMoveLines();
     } 
```

# java - 开始时 JApplet 空指针异常

> ID：15775057
> 
> 赞同：0
> 
> 时间：2013-04-02T21:49:24.053
> 
> 标签：java

我正在为一个类编写一个小程序，并认为代码看起来正确，我在小程序启动时收到一个空指针异常。任何帮助将不胜感激。

错误信息：

java.lang.NullPointerException
at sun.applet.AppletAudioClip.(AppletAudioClip.java:65)
at java.applet.Applet.newAudioClip(Applet.java:311)
at Lab5b.(Lab5b.java:14)
at sun.reflect.NativeConstructorAccessorImpl .newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstruct orAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingC onstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor .java:525)
在 java.lang.Class.newInstance0(Class.java:372)
在 java.lang.Class.newInstance(Class.java:325)
在 sun.applet.AppletPanel.createApplet(AppletPanel.java:795)
在 sun.applet.AppletPanel.runLoader(AppletPanel.java:724 ) 在 sun.applet.AppletPanel.run(
AppletPanel.java:378)
在 java.lang。线程运行（线程.java：722）

代码：

```
import javax.swing.*;
import java.awt.event.*;
import java.net.URL;
import java.applet.*;
import java.awt.*;

public class Lab5b extends JApplet {
  private AudioClip audioClip;

  public Lab5b() {
    add(new ImagePanel());

    URL urlForAudio = getClass().getResource("audio/us.mid");
    audioClip = Applet.newAudioClip(urlForAudio);
    audioClip.loop();
  }

  public void start() {
    if (audioClip != null) audioClip.loop();
  }

  public void stop() {
    if (audioClip != null) audioClip.stop();
  }

  /** Main method */
  public static void main(String[] args) {
    // Create a frame
    JFrame frame = new JFrame("Lab 5");

    // Create an instance of the applet
    Lab5b applet = new Lab5b();
    applet.init();

    // Add the applet instance to the frame
    frame.add(applet, java.awt.BorderLayout.CENTER);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    // Display the frame
    frame.setSize(200, 660);
    frame.setVisible(true);
  }
}

class ImagePanel extends JPanel {
  private ImageIcon imageIcon = new ImageIcon("image/us.gif");
  private Image image = imageIcon.getImage();
  private int y = 550;

  public ImagePanel() {
        Timer timer = new Timer(120, new TimerListener());
        timer.start();
    }

    class TimerListener implements ActionListener {
        public void actionPerformed(ActionEvent e) {
            increaseY();
        }
    }

  public void increaseY() {
        if (y > 0) {
            y--;
            repaint();
        }
    }

  /** Draw image on the panel */
  protected void paintComponent(Graphics g) {
    super.paintComponent(g);

    if (image != null) {
      g.fillRect(0, 0, 10, 660);
      g.drawImage(image, 11, y, 160, 84, this);
        }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:11:12.847

该`getResource`方法`null`在找不到资源时返回，这使得`AppletAudioClip`构造函数抛出异常。确保它`us.mid`位于一个名为的目录`audio`中，该目录与以下目录位于同一目录中`Lab5b.class`：

*   Lab5b.class
*   声音的/
    *   我们.mid

# paypal-sandbox - 为什么在 PayPal Sandbox 中出现“不允许用户执行此操作”

> ID：15775058
> 
> 赞同：0
> 
> 时间：2013-04-02T21:49:26.087
> 
> 标签：paypal-sandbox

我将以下消息发布到[https://svcs.sandbox.paypal.com/AdaptivePayments/Pay](https://svcs.sandbox.paypal.com/AdaptivePayments/Pay)：

```
<?xml version="1.0" encoding="utf-16"?>
<PayRequest xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
            xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <requestEnvelope>
        <detailLevel>ReturnAll</detailLevel>
        <errorLanguage>en_US</errorLanguage>
    </requestEnvelope>
    <clientDetails>
        <ipAddress>127.0.0.1</ipAddress>
        <deviceId>platformSDKDotNetSample</deviceId>
        <applicationId>APP-80W284485P519543T</applicationId>
        <customerType>Developer</customerType>
        <partnerName>GreenDot</partnerName>
        <customerId>GreenDot</customerId>
    </clientDetails>
    <actionType>PAY</actionType>
    <cancelUrl></cancelUrl>
    <currencyCode>USD</currencyCode>
    <memo>MP ref 8050042402450937112</memo>
    <receiverList>
        <receiver>
            <amount>5</amount>
            <email>koseas@greendotcorp.com</email>
            <primary>false</primary>
            <invoiceId>123456</invoiceId>
            <paymentType>PERSONAL</paymentType>
        </receiver>
    </receiverList>
    <senderEmail>PersonalTestAccount@greendotcorp.com</senderEmail>
    <returnUrl></returnUrl>
    <trackingId>111111</trackingId>
    <fundingConstraint>
        <allowedFundingType>
            <fundingTypeInfo>
                <fundingType>RECEIVABLE</fundingType>
            </fundingTypeInfo>
        </allowedFundingType>
    </fundingConstraint>
</PayRequest> 
```

并得到这个回应：

```
<ns3:FaultMessage xmlns:ns3="http://svcs.paypal.com/types/common" 
                  xmlns:ns2="http://svcs.paypal.com/types/ap">
    <responseEnvelope>
        <timestamp>2013-04-02T14:25:32.304-07:00</timestamp>
        <ack>Failure</ack>
        <correlationId>54974e7a32854</correlationId>
        <build>5563463</build>
    </responseEnvelope>
    <error>
        <errorId>550001</errorId>
        <domain>PLATFORM</domain>
        <subdomain>Application</subdomain>
        <severity>Error</severity>
        <category>Application</category>
        <message>User is not allowed to perform this action</message>
        <parameter>Sender is not allowed to perform this action</parameter>
    </error>
</ns3:FaultMessage> 
```

发件人电子邮件是我设置的个人帐户。它已经过验证，余额为 5000 美元。卡状态为“已激活”。为什么我收到“不允许用户执行此操作”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T23:14:25.353

在 API 文档中找到此信息

> 注意：具有标准权限级别的 API 调用者无法使用 FundingConstraint；有关更多信息，请参阅自适应支付权限级别部分。

如果我从请求中删除了fundingConstraint 节点，我会得到一个成功的响应。

是否可以在沙箱中测试需要更高权限级别的请求？

# android - Android notifyDataSetChanged() 仅最后添加的项

> ID：15775060
> 
> 赞同：2
> 
> 时间：2013-04-02T21:49:29.090
> 
> 标签：android, android-listview, android-animation, notifydatasetchanged

我有一个`ListView`扩展它的适配器类`BaseAdapter`。

我想为列表视图中的一个小自定义部分设置动画。

我有从右到左滑动的部分动画 - 这第一次效果很好。

为简洁起见，在 Adapter 的方法中，类似于所示：

```
public View getView(){

    Animation an = AnimationUtils.loadAnimation(mContext, R.anim.transladar);
    an.reset();
    vi.startAnimation(an);
    return vi;
} 
```

看起来不错，但是当我再添加一个项目 `chatAdapter.notifyDataSetChanged();`时，会触发它刷新我的所有项目并重新启动动画。

我只想为适配器本身的最后一项设置动画。

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T22:23:06.100

您可以添加公共布尔变量（`isFirstTime = true;`）并在您的`getView()`检查中像这样

```
if(isFirstTime){
    Animation an = AnimationUtils.loadAnimation(mContext, R.anim.transladar);
    an.reset();
    vi.startAnimation(an);

   if(position == getCount()-1) isFirstTime =false;
}else{
  if(position == getCount()-1){
     Animation an = AnimationUtils.loadAnimation(mContext, R.anim.transladar);
    an.reset();
    vi.startAnimation(an);
   }

} 
```

注意：这是快速解决方案，我不知道是否有其他方法。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T10:59:18.913

您可以检查 convertview 是否为空，然后准备动画。经过测试并为我工作：

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    if (null == convertView) {
        convertView = LayoutInflater.from(getActivity()).inflate(
                R.layout.workshop_components_list_item, null);
    }

    Animation animation = null;
    ViewHolder holder = (ViewHolder) convertView.getTag();
    if (null == holder) {
        holder = new ViewHolder();
        holder.name = (TextView) convertView.findViewById(R.id.textView_listItemName);
        holder.position = position;
        animation = AnimationUtils.loadAnimation(getActivity(), R.anim.components_list_item);
        animation.setDuration(500);
    }

    ListItem item = getItem(position);
    holder.name.setText(item.getName());

    if (null != animation) {
        convertView.startAnimation(animation);
        animation = null;
    }

    return convertView;
} 
```

# c - 试图让一个 int 变量号等于一个字符串

> ID：15775063
> 
> 赞同：0
> 
> 时间：2013-04-02T21:49:36.880
> 
> 标签：c

我需要一些帮助，我一直在努力让这段代码工作，但我一生都无法弄清楚我做错了什么请帮助基本上我要做的就是模拟一副纸牌。我知道除了让这些面孔匹配之外，我基本上必须为所有事情做些什么。并让程序运行。我已经绞尽脑汁好几天了，我需要帮助。请帮我

```
#include <stdio.h>
#include<string.h>

enum faces{Ace = 0, Jack = 10, Queen, King};
char * facecheck(int d); 

int main() 
{ 
    int deck[52], i, n;
    char suits[4][9] = 
    {
         "Hearts",
         "Diamonds",
         "Clubs",
         "Spades"};

    n = 0;

    for(i = 0; i<52; i++)
    {
          deck[i] = n;
          n++;
          };

    for(i=0; i<52; i++)
    {
             printf("%2d of %s \n", i%13, suits[i/13]);
             if(i%13 == 0 || i%13 == 10 || i%13 == 11 || i%13 == 12)
             printf("%s \n ", facecheck(i) );
             };

    return 0; 
}  

char * facecheck(int d)
{
     static char * face[] = 
     {
            "Ace",
            "Jack",
            "Queen",
            "King" };

           if(d == Ace) 
           return face[0];
           else
           {
               if(d == Jack) 
               return face[1];
               else
               {
                   if(d == Queen)
                   return face[2];
                   else 
                   { 
                        if(d == King)
                        return face[3];
                   }
               }
           }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:16:44.060

这有效：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

enum faces{Ace = 0, Jack = 10, Queen, King};
char * facecheck(int d); 

int main() 
{ 
    int deck[52], i, n;
    char suits[4][9] = 
    {
        "Hearts",
        "Diamonds",
        "Clubs",
        "Spades"};

    n = 0;

    for(i = 0; i<52; i++)
    {
        deck[i] = n;
        n++;
    };

    for(i=0; i<52; i++)
    {       
        if(i%13 == 0 || i%13 == 10 || i%13 == 11 || i%13 == 12)
            printf("%s ", facecheck(i%13) );
        else printf("%d ", i%13+1);
        printf("of %s \n", suits[i/13]);
    }

    system("pause");
    return 0; 
}  

char * facecheck(int d)
{
    static char * face[] = 
    {
        "Ace",
        "Jack",
        "Queen",
        "King" };

    if(d == Ace)
        return face[0];
    else
    {
        if(d == Jack) 
            return face[1];
        else
        {
            if(d == Queen)
                return face[2];
            else 
            { 
                if(d == King)
                    return face[3];
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T21:55:35.160

`facecheck()`当输入是 0、10、11 和 12 四个有效和已处理值之一时，它会优雅地运行。

但是，调用者将整个范围 [0, 52) 作为输入传递。

```
for(i=0; i<52; i++)
printf("%s \n ", facecheck(i) ); 
```

这就是问题的根源。

我认为`facecheck()`可以增强该功能以针对无效输入执行某些操作（例如断言或打印错误）。

# html - django 每 4 次迭代添加 html 代码

> ID：15775067
> 
> 赞同：0
> 
> 时间：2013-04-02T21:49:45.430
> 
> 标签：html, django

我正在使用 django 来构建我的网站，并且我正在以这种方式动态添加 html 代码：

```
{% for ad in ads_search %}
    <li class="span3" id="list-all">
        <a href="#" class="thumb">
           <div id="most-viewed">
           <div class="tag" id="tag-cinema"></div>
               <img src="{{ad.image_url}}" alt="">
       <p>{{ad.name}}</p>
       <div class="barra-pequena"></div>
       <ul class=" unstyled">
       <li><div class="local"><p>{{ad.local}}</p></div></li>
       <li class="pull-right"><div class="price"><h5> {{ad.price}} </h5></div></li>
       <li><div class="clock"><p>Horário</p></div></li>
       </ul>
     </div>
     </a>                   
    </li>
    {% endfor %} 
```

但我想补充：

```
<ul class="inline"> 
```

每四个广告。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:47:56.077

又快又脏，[使用`cycle`标签](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#cycle)：

```
<ul class="{% cycle "" "" "" "inline" %}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:54:09.153

已经得到我的答案，不得不使用：

```
{% forloop.counter == 4 %} 
```

[编辑]：对于这种特定情况，最好使用：

{% if forloop.counter|divisibleby:"4" %}

# javascript - JavaScript - 将命名空间分配给局部变量以在构造函数中使用，不确定发生了什么？

> ID：15775068
> 
> 赞同：0
> 
> 时间：2013-04-02T21:49:46.653
> 
> 标签：javascript

这样的事情有效吗？

```
(function () {
    "use strict";

    var Smtg = window.some.namespace.Something,
        Els = window.another.namespace.Else;

    var smtg = null,
        els = null;

    smtg = new Smtg();
    els = new Els();

    smtg.doSomething(els);
}()); 
```

即使用将构造函数重命名为更短的局部变量，然后从这个更短的局部变量实例化？

只有我得到奇怪的错误，比如`TypeError: Smtg is not a constructor`. 当 window.some.namespace.Something 是；

```
window.some = {};
window.some.namespace = {};
window.some.namespace.Something = (function () {
    "use strict";

    this.doSomething = function (els) {
        els.blah();
    }

}); 
```

（想象window.another.namespace.Else与上面类似）

我以为这一切都会好的，不是吗？

如果没问题，错误的可能原因是什么？我找不到可能有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:20:34.160

是的，它是绝对有效的，只要`window.some.namespace.Something`是一个对象（即不是文字）。

这是因为 JavaScript 中的对象就像 C 中的指针（即它们“指向”内存中的某个位置）。分配`Smtg`给`window.some.namespace.Something`简单地意味着它们都指向内存中的同一位置。

例如，您可以说：

```
var body = document.body;
alert(body.innerHTML); // same as alert(document.body.innerHTML); 
```

问题出在您的代码中。这是一个修复：http: [//jsfiddle.net/yRuvf/](http://jsfiddle.net/yRuvf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T22:39:01.883

`TypeError: Smtg is not a constructor`当且仅当`Smtg`确实不是构造函数时，浏览器才会抛出错误。

如果 Smtg 是控制台中的一个函数，那么您可能正在尝试在声明它之前创建一个新实例。或者它被您尝试使用它的范围覆盖

示例 - 这将引发错误

```
window.name = {}
window.name.space = {}
window.name.space.something = (function(){});

function test(){
   var scopeOverwriter = function(){
       this.name = "not a obejct anymore";
       this.getNewSomething();
   }

   scopeOverwriter.prototype = {
       getNewSomething = function(){
           return new name.space.something();//name is a string here
       }
   }
   return new scopeOverwriter();
}

test(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T23:25:03.640

好的，所以我有一个连接器，它遍历我的项目中的所有文件，连接和缩小文件，并单独创建一个包含所有脚本的 dev html。最近我更改了我的应用程序入口点的名称，在连接器中（我写得很快）我通过在任何地方都写字符串而不是将它放在一个静态变量中来引用文件（我知道......）我改变了它到新的并更新它以使用静态变量并忘记更新其中一个引用。

该应用程序从其列表中删除了入口点并将其添加到末尾。

但是，因为我忘记更新其中一个参考文件，所以该文件被添加了两次，一次在找到它的列表中，一次在最后。因此，当包含第一个文件时（在我的单独列出所有脚本的开发 html 中）它引用了“未定义”而不是函数，在后一个脚本中一切正常，所以我的应用程序即使出现错误也可以运行正在显示，所以我完全糊涂了。

这就是连接文件没有错误的原因，因为它不依赖于相同的引用。哎呀！多么波拉瓦。

因此，当我开始思考时，我在重命名命名空间时一定有一个系统错误，这让我完全看错了位置。

所以......当生成错误时，它确实不是构造函数，因为它当时没有定义。但后来它被定义了......并且代码将运行。

回答的每个人都帮助我找到了这个错误，一旦我知道 javascript 是有效的，我就能够找到它，因为我知道我应该在另一个位置寻找错误。

我希望我能接受多个答案！唉，我不能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T22:04:04.480

如果你正在做这样的事情：

```
var Obj = {}; 
```

那么这不是可以与 new 一起使用的带有构造函数的对象：

```
var o = new Obj(); 
```

javascript 中的构造函数基本上是一个函数，因此您可以执行以下操作：

```
var Obj = function(){};

var d = new Obj(); 
```

# android - 终端中的未知字符串

> ID：15775069
> 
> 赞同：0
> 
> 时间：2013-04-02T21:49:52.420
> 
> 标签：android, macos, cordova, terminal, reset

这是什么意思，“android_358920041107720”，我如何在启动终端时摆脱这个字符串？

我相信它来自我下载 PhoneGap/Cordova，但不完全确定。

对我正在查看的内容的任何帮助或解释都会非常有帮助！

谢谢。

图片链接：[http ://cl.ly/image/321r1O003n13](http://cl.ly/image/321r1O003n13)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:12:14.190

这是在 IP 地址上请求 DHCP 租约时的 android 主机名标识符……例如，在我的网络上发生。

> dhcpd: DHCPACK 在 192.168.xx 到 xx:xx:xx:xx:xx:xx (android- ***acc87f3d476374c1*** ) 通过 eth0

它还可以用于在 中表示 Android 的主机名`adb shell`，具体取决于所使用的 ROM 的风格和版本。

# module - 使用 module.controller() 方法定义时未找到控制器

> ID：15775070
> 
> 赞同：2
> 
> 时间：2013-04-02T21:49:54.593
> 
> 标签：module, controller, angularjs

## 问题

当我使用创建控制器时找不到我的控制器`module.controller()`。我得到以下异常：

```
Error: Argument 'HelpCtrl' is not a function, got undefined 
```

## 细节

我正在重构我的 controllers.js 文件，将每个控制器分解为自己的单独文件。我通过执行以下操作来做到这一点：

### 典型控制器

```
'use strict';

angular.module('idalinkApp')
  .controller('HelpCtrl', function(){

        //insert awesome controlling code here
    }); 
```

我`application.js`的引导模块与上面的模块名称相同`idalinkApp`：

```
var idalinkModule = angular.module('idalinkApp', [ 'idalinkResources', 'idalinkFilters',
    'idalinkDirectives', 'ngSanitize','ui','memberService', 'formStatusService' ]);... 
```

这是我`ng-app`在 index.html 页面中的声明：

```
... <body id="ng-app" data-ng-app="idalinkApp" class=" login idalink-todo idalink-hide idalink-altnav releaseOne"> ... 
```

我还确认`help.js`浏览器中正在加载包含我的 HelpCtrl 的文件。

## 恳求

有任何想法吗？

# objective-c - 调整uiimage中的图像大小并将其以新大小保存到相册

> ID：15775073
> 
> 赞同：0
> 
> 时间：2013-04-02T21:50:20.167
> 
> 标签：objective-c, resize, uiimage, save

我正在尝试在图像视图中从相册加载图像，然后单击一个按钮调整大小，然后单击另一个按钮以新大小保存图像。

除了保存的图像与原始图像大小相同之外，一切都运行良好。

这是我到目前为止所做的：

```
 - (IBAction)chooseImage:(id)sender
{
    self.imagePicker = [[UIImagePickerController alloc] init];
    self.imagePicker.delegate = self;
    [self.imagePicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
    [self presentViewController:self.imagePicker animated:YES completion:nil];
    }

- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    self.chosenImage = info[UIImagePickerControllerOriginalImage];
    [self.imageView setImage:self.chosenImage];
    [self dismissViewControllerAnimated:YES completion:nil];
}

- (void) imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
    [self dismissViewControllerAnimated:YES completion:nil];

}
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)reSize:(id)sender

{
    CGRect newFrame = CGRectMake(20, 49, 280, 200);
    [UIView animateWithDuration:0.25f
                     animations:^{
                         self.imageView.frame = newFrame;
                     }];
}

- (IBAction)saveImage:(id)sender
{
       UIImageWriteToSavedPhotosAlbum(_chosenImage, self, nil, nil);
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T22:54:25.873

```
UIImageView* image = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"whatever"]];

CGSize size = image.bounds.size;
UIGraphicsBeginImageContext(size);

CGContextRef context = UIGraphicsGetCurrentContext();
CGAffineTransform flipVertical = CGAffineTransformMake(
        1, 0, 0, -1, 0, size.height
);
CGContextConcatCTM(context, flipVertical);  
CGContextDrawImage(context, image.bounds, image.image.CGImage);
UIImage *resized = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

UIImageWriteToSavedPhotosAlbum(resized, self, nil, nil); 
```

替换`image`为您要绘制的调整大小的图像视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T19:40:21.983

您可以通过创建 UIImage 类别来重用此调整大小代码，还有一个现有的很好的 UIImage 类别可以进行图像调整大小和其他一些事情，一个很好的使用示例可以在[这里](https://stackoverflow.com/a/10816352/277900)找到。

# c# - 重用对象会导致 List 冗余

> ID：15775074
> 
> 赞同：1
> 
> 时间：2013-04-02T21:50:20.580
> 
> 标签：c#

我遇到了一个问题，我在 IQueryable 对象中返回了数据并且它被重复了。我通过将用于构建集合的临时对象从方法范围移动到循环范围来解决它。换句话说，每次循环重复时它都会被清除。

原来的：

```
private void MyMethod()
{
  SomeObj ProjDtl = new SomeObj(); //here is the obj method scoped

  foreach (ReservedSimProjects item in parameters.ReservedProjects.ReservedSimProj)
  {

    IQueryable<SJ> DbProj = SimColl.Where(e => e.SimProjectID == item.ProjectId);

     ProjDtl.ProjName = DbProj.First().ProjName;
     ProjDtl.ProjArea = DbProj.First().ProjArea;
     ProjDtl.ProjPerim = DbProj.First().ProjArea;
     ....etc....

     ProjectsDetails.Add(ProjDtl);
  } 
```

现在，对于我明显不正确的想法，ProjDtl 将被创建一次并重用。随着循环的迭代，旧值将被新值覆盖。这似乎正是正在发生的事情。逐步通过调试器，ProjDtl 属性被覆盖，但随后添加到集合的最后一行，第一次传递的原始数据被添加，因此我的集合有重复、三次等。更改范围以便在每次传递时重新创建对象问题。为什么因为有某种指向原始对象的指针，即使它的每个属性都被重新分配，它也没有更新？？？

```
private void MyMethod()
{

  foreach (ReservedSimProjects item in parameters.ReservedProjects.ReservedSimProj)
  {

     SomeObj ProjDtl = new SomeObj(); //here is the obj method scoped 

     IQueryable<SJ> DbProj = SimColl.Where(e => e.SimProjectID == item.ProjectId);

     ProjDtl.ProjName = DbProj.First().ProjName;
     ProjDtl.ProjArea = DbProj.First().ProjArea;
     ProjDtl.ProjPerim = DbProj.First().ProjArea;
     ....etc....

     ProjectsDetails.Add(ProjDtl);
  } 
```

因此，有一次我设法解决了自己的问题，但我不确定为什么/解决了什么。

JB

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T21:59:49.137

使用 创建对象时`new`，会为它保留一些内存空间。用于访问对象的变量并不直接存储对象，而是指向对象位置的指针。

```
SomeObj ProjDtl = new SomeObj();

RAM:
+--------------------+-----------------------------+
| 0x12345            | 0xabcdef                    |
+--------------------+-----------------------------+
| ProjDtl = 0xabcdef | [data for a SomeObj object] |
+--------------------+-----------------------------+ 
```

在您的原始循环中，您有多个变量，但每个变量都指向内存中的相同地址并使用相同的实际对象：

```
SomeObj ProjDtl = new SomeObj(); //now ProjDtl points to 0xabcdef
foreach (ReservedSimProjects item in parameters.ReservedProjects.ReservedSimProj)
  {
     IQueryable<SJ> DbProj = SimColl.Where(e => e.SimProjectID == item.ProjectId);

     ProjDtl.ProjName = DbProj.First().ProjName; //Since ProjDtl is never overwritten,
     ProjDtl.ProjArea = DbProj.First().ProjArea; //it will always point to 0xabcdef,
     ProjDtl.ProjPerim = DbProj.First().ProjArea; //and you're always accessing the same physical object's data
     ....etc....

     ProjectsDetails.Add(ProjDtl);
  } 
```

在您更正的版本中，每次您在循环中创建一个新对象时，您都会在内存中为新对象留出更多空间并修改其细节。

```
private void MyMethod()
{

  foreach (ReservedSimProjects item in parameters.ReservedProjects.ReservedSimProj)
  {
     SomeObj ProjDtl = new SomeObj(); //On the first iteration, ProjDtl might point to 0xabcdef,
     //on the second, 0x98765, on the third, 0xfedcba... but it will always be a new, unused memory address

     IQueryable<SJ> DbProj = SimColl.Where(e => e.SimProjectID == item.ProjectId);

     ProjDtl.ProjName = DbProj.First().ProjName; //Now, each iteration modifies a different
     ProjDtl.ProjArea = DbProj.First().ProjArea; //physical object
     ProjDtl.ProjPerim = DbProj.First().ProjArea;
     ....etc....

     ProjectsDetails.Add(ProjDtl);
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T21:53:34.697

> 为什么因为有某种指向原始对象的指针，即使它的每个属性都被重新分配，它也没有更新？？？

这是正确的。

您已经创建了一个对象。您可以根据需要多次设置该对象的所有属性，但它仍然是同一个对象。

每次调用 时`ProjectDetails.Add(ProjDtl)`，都会将相同的对象添加到列表中。

该列表不存储对象属性的值 - 它存储对对象本身的单个引用。

您的固定示例有效，因为您每次都在循环周围创建一个新对象。然后设置该特定对象的属性并将其添加到列表中。

这意味着列表最终包含对许多不同对象的引用，每个对象都有自己的属性值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T21:53:06.287

是的，那个“指向原始对象的指针”实际上是你的变量。 *在每次迭代时将该对象的引用*`ProjectsDetails.Add`添加到您的列表中。但由于它是同一个变量，所以它是同一个*对象*！因此，您所做的就是在循环中一遍又一遍地覆盖该实例的属性。如果您的列表有 N 个值，那么您将拥有一个包含 N 个项目的列表，它们都指向同一个实例。

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T21:54:15.883

您不能像那样重用您的对象，因为它会尝试多次保存同一个对象。

您可以重用**变量**，但不能重用**对象**

```
private void MyMethod()
{
  SomeObj ProjDtl = null;

  foreach (ReservedSimProjects item in parameters.ReservedProjects.ReservedSimProj)
  {
     ProjDtl = new SomeObj()
     IQueryable<SJ> DbProj = SimColl.Where(e => e.SimProjectID == item.ProjectId);

     ProjDtl.ProjName = DbProj.First().ProjName;
     ProjDtl.ProjArea = DbProj.First().ProjArea;
     ProjDtl.ProjPerim = DbProj.First().ProjArea;
     ....etc....

     ProjectsDetails.Add(ProjDtl);
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T21:54:15.467

> 为什么因为有某种指向原始对象的指针，即使它的每个属性都被重新分配，它也没有更新？？？

是的 - 非原始和非结构类型是“引用类型” - 这意味着当您创建该类型的变量时，您正在创建指向该实例的*引用*（指针），因此在循环中重新分配值确实会影响同一个*实例*每一次。

您的解决方案是正确的。**

# r - 矩阵与每行中的另一个矩阵

> ID：15775076
> 
> 赞同：0
> 
> 时间：2013-04-02T21:50:23.323
> 
> 标签：r

我希望提高下面代码的性能。我的想法是尝试通过以某种方式使 st2 的每一列成为自己的矩阵来“矢量化”这个操作，这是数据框可以为我做的吗？

```
st<-matrix(nrow=257,ncol=10000)
st2<-matrix(nrow=257,ncol=10000)
st[1,]=1489
for(i in 1:10000)
{
  st2[1,]<-st[(256+1),1]
  for(j in 2:(256+1))
  {
    st2[j,]=st2[(j-1),] *exp(.5-(.2^2/2)) * rnorm(10000)
  }
  print(st2[256+1,]) #this for example, in reality I store these values for later
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:50:16.493

我不确定如何在应得的情况下给予信用，但@DWin 是正确的......复制是解决方案。

# c++ - ifstream 总是将“ELF”返回给对象

> ID：15775078
> 
> 赞同：1
> 
> 时间：2013-04-02T21:50:33.897
> 
> 标签：c++, file-io, io, fstream, ifstream

我编写了以下方法来检查我的程序是否可以正确使用文件 IO，但它绝对不起作用。我从 inFile 得到的只是“ELF”，谁能告诉我为什么？我的对象与其他类型的 istream 完美配合。

```
void testFiles(int ct, char ** args)
{
    if(ct<2){
        cout<<"Invalid number of arguments. Must be two files, one for input, one for output."<<endl;
        return;
    }
    ifstream inFile;
    inFile.open(args[0]);
    Tree<Word,int> x;
    Word *key;
    Word *val;
    cout<<"Tree extracted from file: "<<endl;
    while(inFile.good()&&inFile.is_open()){
        key = new Word();
        val = new Word();
        inFile>>*key;
        inFile>>*val;
        if(!inFile.good()){
            cout<<"Error: incomplete key-value pair:"<<key->getStr()<<endl;
            break;
        }
        cout<<key->getStr()<<" "<<val->getStr()<<endl;
        x[*key] = val->asInt();
        delete key;
        delete val;
    }
    inFile.close();
    ofstream outFile;
    outFile.open(args[1]);
    cout<<"Tree as read from file:"<<endl<<x;
    outFile<<x;
    outFile.close();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T21:54:00.960

args[0]*不是*程序的第一个参数。它是可执行文件本身的名称。

发生的情况是您打开的是自己的可执行文件，而不是命令行上指定的文件，并且由于您的程序是 linux 二进制文件，因此您正在读取 ELF 二进制文件开头的魔术字符串，即“精灵”。

要修复错误，请将 args[0] 更改为 args[1]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:59:24.470

您正在指定程序名称而不是第一个参数作为文件名。

检查你所做的事情的有效性是个好主意。IE。检查是否`args[1]`不为空和/或文件打开的返回值...仅检查参数计数是不够的。

# asp.net - 来自实体框架的 ASP.Net 中继器（Webform 标记）

> ID：15775083
> 
> 赞同：0
> 
> 时间：2013-04-02T21:50:49.140
> 
> 标签：asp.net, .net, entity-framework, webforms

我在从 ASP.Net 中继器的标记中查找有关从实体框架实体中选择数据的信息时遇到问题

我有一个这样的中继器：

```
<asp:Repeater ID="Repeater1" runat="server" DataSourceID="s_Options">
        <HeaderTemplate>
            <table>
            <tr>
            <th>Manager Name</th>
            </tr>
        </HeaderTemplate>
        <ItemTemplate>
            <tr>
            <td><% !!!!! MY PROBLEM IS HERE %></td>
            </tr>                
        </ItemTemplate>
        <FooterTemplate>
            </table>
        </FooterTemplate>
    </asp:Repeater> 
```

我有一个名为 Option 的实体。

Option 有 3 个成员：OID、Option_Type 和 Option_Value

我正在尝试使用 Option_Values 填充此中继器，其中 Option_Type = "This Option" 但我完全不知道如何在项目模板中执行此操作，并且我无法正确措辞我的问题以在其他地方找到答案。

首先，如果在Repeater 的标记中这样做不是最好的方法，请告诉我。

此外，我正在寻找有关如何过滤此实体以及标记外观的任何帮助。

另外，如果这是其他地方已经涵盖的内容，那么我很抱歉，我一定是问错了问题。如果你能帮助我以更有建设性的方式表达我的要求，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:09:56.483

如果我正确理解你的问题，你想要 -

```
<ItemTemplate>
   <td><%# Eval("Option_Type") %></td>
</ItemTemplate> 
```

[查看使用 DataList 和 Repeater Controls](http://www.asp.net/web-forms/tutorials/data-access/displaying-data-with-the-datalist-and-repeater/displaying-data-with-the-datalist-and-repeater-controls-vb)文章显示数据的底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:42:47.280

使用此代码并将您的表列名称放入 Eval..

```
 <table style="width: 400px">
      <asp:Repeater ID="Repeater1" runat="server">
             <ItemTemplate>
                  <tr>
                     <td>
                      <asp:Label ID="LBLtEXT" runat="server" Text='<%#Eval("Your filed name ")%>'></asp:Label>

                     </td>
                   </tr>
                </ItemTemplate>
        </asp:Repeater>
     </table> 
```

# sql - 为没有它们的行生成随机数

> ID：15775084
> 
> 赞同：0
> 
> 时间：2013-04-02T21:50:51.097
> 
> 标签：sql, tsql

我正在尝试为那些还没有密码的行设置一个介于 1234 和 9999 之间的 4 位密码。

我的第一次尝试使用以下代码。

```
begin tran

DECLARE @Lower   int
DECLARE @Upper   int
SET @Lower = 1234 -- Lowest password value
SET @Upper = 9999 -- Highest password value

update DestinationComparisons
set Password = ROUND(((@Upper - @Lower - 1) * RAND() + @Lower), 0)
where Password = '' or Password is null

commit tran
go 
```

但是，这似乎为更新的每一行提供了相同的 4 位数字。显然，我想为每一行设置一个不同的密码。

有人可以帮我看看我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:56:51.910

这是一种可能性：

```
with toupdate as (
      select dc.*,
             (ROW_NUMBER() over (order by newid()) / cast(COUNT(*) over () as float)) as randnum
      from DestinationComparisons dc
     )
update toupdate
    set Password = ROUND(((@Upper - @Lower - 1) * randum + @Lower), 0)
    where Password = '' or Password is null 
```

它用于`newid()`生成随机行号，然后将其除以计数以获得介于 0 和 1 之间的值。然后可以将其用于密码计算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T22:03:51.200

```
begin tran
update DestinationComparisons
set Password = cast(left(cast(ABS(checksum(newid())) as varchar),4) as int)
where Password = '' or Password is null
commit tran 
```

# javascript - Node.js 中基于 Key 的返回值

> ID：15775086
> 
> 赞同：0
> 
> 时间：2013-04-02T21:50:52.667
> 
> 标签：javascript, node.js

我对 JS 和 Node 的世界很陌生，所以这似乎是一件很容易做的事情，但我似乎无法开始工作。

假设我在 json 文件中有以下 json 示例

```
{
"0": "somestring1",
"1": "somestring2",
"2": "somestring3",
"3": "somestring4",
"4": "somestring5",
"5": "somestring6",
"6": "somestring7"
} 
```

在我的 server.js 文件中，我正在像这样加载文件

```
var fs = require('fs')

var parsedJson = fs.readFile('./jsonfile.json', function (err, data) 
{
  res.write(data);
  res.end();
}) 
```

击中服务器会返回所有的 json（如预期的那样），但我想要做的是解析文件并根据键返回单个值，因此类似于：

```
for (var entry in data)
{
    if (entry.key == 0)
    {
      res.write(thing.value);
      //"somestring1" would be sent here
    }
} 
```

这种事情是如何在 JS/Node.js 中完成的。我尝试过的一切似乎都不起作用

谢谢！

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:10:12.357

也许是这样的？

```
var http = require('http');
var fs = require('fs');

var data = JSON.parse(fs.readFileSync('data.json'));

var server = http.createServer(function(req, res) {
  var key = req.url.replace('/', '');
  var value = data[key];

  if (value) {
    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.end(value);
  } else {
    res.writeHead(404, {'Content-Type': 'text/plain'});
    res.end('Not Found');
  }
});

server.listen(1337, '127.0.0.1'); 
```

然后在命令行上：

```
$ curl localhost:1337/1
somestring2

$ curl localhost:1337/x
Not Found 
```

# php - Laravel facebook-sdk 捆绑注销不起作用

> ID：15775089
> 
> 赞同：1
> 
> 时间：2013-04-02T21:50:58.247
> 
> 标签：php, facebook, laravel

我正在为**Laravel使用**[Facebook-sdk](https://github.com/matthew-muscat/laravel-facebook)包，一切正常，除了注销链接。当我单击注销时，我被重定向并且一切看起来都在工作，但是当它加载页面时，我仍然登录？

 **这可能是 Laravel 的问题吗？它是否以不同的方式存储会话？

我已经建立了这个类，但正如我所说，我认为这不是问题，因为一切正常，除了注销会话没有被清除。

**代码：**

```
class Fb{

    // -----------------------------------------------------------------------
    // Variables

    private $ioc; // IOC container

    public $state; // If logged or not

    public $data; // Data that came from request
    public $settings = array("name,gender");

    // -----------------------------------------------------------------------
    // Logical functions
    public function __construct(){
        $this->ioc = IoC::resolve('facebook-sdk');

        if ($this->getUser()) {
            try {
                $this->request();
                $this->state = true;
            } catch (FacebookApiException $e) {
                error_log($e);
        }
        }else{
            $this->state = false;
        }
    }

    public function getUser(){
        return $this->ioc->getUser();
    }

    public function request(){
        $this->data = $this->ioc->api("/me?fields=".implode($this->settings));
    }

    public function debug(){
        return dd($this->data);
    }

    // -----------------------------------------------------------------------
    // Login & Logout links

    public function login(){
        return $this->ioc->getLoginUrl();
    }

    public function logout(){
        return $this->ioc->getLogoutUrl();
    }

    // -----------------------------------------------------------------------
    // Get data via SDK

    // Name
    public function name(){
        return $this->data['name'];
    }

    // Picture
    public function picture($w=50,$h=50){
        return "https://graph.facebook.com/". $this->data['id'] ."/picture?width=$w&height=$h";
    }

    // Gender
    public function gender(){
        return $this->data['gender'];
    }

} 
```

谢谢你的帮助！干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:07:50.143

底层 facebook php sdk 使用内置的 php 会话（默认情况下）来存储持久性信息，例如经过身份验证的 facebook 用户的 id。然而，sdk 不会自行销毁这些信息，因为很难判断何时应该自动发生这种情况。

您可以使用 facebook sdk 对象上的[destroySession](https://github.com/matthew-muscat/laravel-facebook/blob/master/vendor/BaseFacebook.php#L1242)方法清除此持久信息。调用此方法的最佳位置是在注销 url 的重定向后端端点上，因为这是访问者在 facebook 完成自己的注销后直接到达的地方。

这看起来像：

```
// method on Fb class
public function destroySession() {
    // just forward the call down to the sdk object
    $this->ioc->destroySession();
} 
```

您可能希望设置一条用户在注销后到达的路线并将其传递给`getLogoutUrl()`这样的：

```
// method on Fb class
public function logout(){
    // tell explicity where to send the user when facebook is done, otherwise the current url will be used
    return $this->ioc->getLogoutUrl(array('next' => URL::to_route('after_logout')));
} 
```

并有这样的路线：

```
Route::get('after_logout', array('as' => 'after_logout', 'do' => function() {
    $fb = new Fb();
    // call the session clearing
    $fb->destroySession();
    // send the user to its merry way
    return Redirect::to('/');

})); 
```**

# json - 带有 TypeLite 的打字稿 - 运行时类型检查

> ID：15775092
> 
> 赞同：4
> 
> 时间：2013-04-02T21:51:11.267
> 
> 标签：json, typescript, typelite

假设我有一些 C# DTO，我想使用 T4 模板和名为[TypeLite的简洁小库将它们转换为 TypeScript 接口](http://type.litesolutions.net/)

在客户端，我有一些具体的 TypeScript 类（继承自 Backbone.Model，但这并不重要），它们代表在服务器端定义的相同 DTO。

接口的预期目标是充当数据合约并确保客户端和服务器 DTO 保持同步。

但是，这是有问题的，因为 TypeScript 不支持除`instanceof`. 实例的问题是当我从服务器获取我的 DTO 时，它们是纯 JSON 对象，而不是我的模型的实例。我需要对从服务器作为 JSON 对象传入的这些 DTO 执行运行时类型检查。

我知道我可以做这样的事情：

```
collection.fetch({...}).done((baseModels) => {
     baseModels.forEach((baseModel) => {
           if(baseModel&& baseModel.SomeProperty && baseModel.SomeOtherProperty){
                //JSON model has been "type-checked"
           }
     });
}); 
```

但是，这有明显的问题，因为现在如果我更改或添加属性，我需要在*三个地方进行更新。*

目前我发现的唯一一件事就是[这个](https://github.com/ysangkok/typescript-interface-to-jsonschema)，但它没有记录，没有维护，并且使用我零经验的节点，所以我会为自己省去挫折感。有没有人知道类似在 TypeScript 中执行运行时类型检查或其他方式来完成我所追求的事情？

如果将其内置到 TypeLite 中以生成接口以及用于在运行时进行类型检查的 JSON 模式，那就太好了。因为这个项目是[开源](https://bitbucket.org/LukasKabrt/typelite)的，所以应该有人真的继续扩展它。如果我自己做的话，我至少需要一些指示（因此是问题）。

有关我的特定问题的更多详细信息[（](https://stackoverflow.com/questions/15728582/typescript-type-checking-backbone-model-instance-cannot-be-type-checked)不是必需的，但如果需要额外的上下文）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T06:00:42.850

在运行时，您使用的是纯 JavaScript，因此您可以使用与纯 JavaScript 相关的这个答案：

[如何在 JavaScript 中获取对象类型的名称？](https://stackoverflow.com/questions/332422/how-do-i-get-the-name-of-an-objects-type-in-javascript)

这是一个[TypeScript get-class-name 实现](http://www.stevefenton.co.uk/Content/Blog/Date/201304/Blog/Obtaining-A-Class-Name-At-Runtime-In-TypeScript/)，它可以提供封闭的 TypeScript 类的名称（该链接也有此示例的静态单独版本）。

```
class ShoutMyName {
    getName() { 
        var funcNameRegex = /function (.{1,})\(/;
        var anyThis = <any> this;
        var results = (funcNameRegex).exec(anyThis.constructor.toString());
        return (results && results.length > 1) ? results[1] : "";
    }
}

class Example extends ShoutMyName {
}

class AnotherClass extends ShoutMyName {
}

var x = new Example();
var y = new AnotherClass();

alert(x.getName());
alert(y.getName()); 
```

这不会给你关于继承链的数据，只是你正在检查的类。

# c# - 汇总数据库列中的值

> ID：15775093
> 
> 赞同：0
> 
> 时间：2013-04-02T21:51:12.343
> 
> 标签：c#, asp.net, loops, sum

我在 asp.net 上用 c# 创建一个 web 项目。我正在网页上显示来自数据库的数据。我有一个数据库表，其中一列（月份）显示客户在哪个月份下订单，另一列显示库存 ID。每个月和 stockid 都会显示很多次，因为不同的客户每个月都会下订单。我想汇总特定库存每个月的数量列中的订单数量。目前我只能在循环时显示每个月的一个数量，但想计算并显示每个月的总数。

```
 public static ArrayList GetActuals()
    {
        String strQuery = "Select * from Actual where Year = 2013";
        Recordset rs = DatabaseManager.GetRecordset("DB", strQuery);

        bool bFound;

        ArrayList Actuals = new ArrayList();
        while (rs != null && rs.Read())
        {
            Actual A = new Actual();
            A.strStockNo = rs.GetFieldValueString("Stock_No").Trim();
            A.nMonth = rs.GetFieldValueInt("Month");
            A.nYear = rs.GetFieldValueInt("Year");
            A.nCustomer = rs.GetFieldValueInt("Customer");
            A.nQuantity = (float)rs.GetFieldValueDouble("Quantity");
            Actuals.Add(A);

        }

        if (rs != null) rs.Close();
        return Actuals;

    }

    float LoadActuals(ArrayList actual, String strstock, int year, int month)
    {

        foreach (Actual a in actual)
        {

            if ((a.strStockNo == strstock) && (a.nYear == year) && (a.nMonth == month))
            {
                return a.nQuantity;
            }

        } return 0;
    } 
```

然后当我显示每个月的数量时......

```
 int Month;
            for (Month = 1; Month < 13; Month++)
            {

                    float totq = LoadActuals(Act, p.strStockNo, yr, Month);

                    TableCell cell = new TableCell();
                    cell.Text = string.Format("{0}", totq);
             } 
```

这仅显示我想要总数的每个月的一个 totq。这是怎么做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:31:12.957

这么多问题，但......很快。

```
float LoadActuals(ArrayList actual, String strstock, int year, int month)
{
    float quantity = 0;
    foreach (Actual a in actual)
    {
        if ((a.strStockNo == strstock) && (a.nYear == year) && (a.nMonth == month))
        {
            quantity += a.nQuantity;
        }
    }
    return quantity;
} 
```

# xsd - 无法通过 maven jaxb 插件生成注释

> ID：15775094
> 
> 赞同：2
> 
> 时间：2013-04-02T21:51:14.997
> 
> 标签：xsd, jpa-2.0, maven-3, maven-jaxb2-plugin, jaxb2-maven-plugin

我正在尝试将**javax.persistence.Id**作为注释添加到文件中，并通过 Maven JAXB 插件生成为 Java 对象。但是，我遇到了 javax.persistence.id 的 class not found 异常，我确实确保 javax.persistence 包含在 maven 依赖项中，并且我看到 maven 将其作为依赖项拉，但是当我通过 jaxb 插件运行时它不会工作。

1.  这是我的 XML`<xsd:complexType name="MyTable"> <xsd:sequence> <xsd:element name="id" type="xsd:int"/> </xsd:sequence> </xsd:complexType>`
2.  这是我的 binding.xjb 文件

```
<jaxb:bindings version="2.1"
   xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
   xmlns:xs="http://www.w3.org/2001/XMLSchema"
   xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc"
   xmlns:annox="http://annox.dev.java.net" jaxb:extensionBindingPrefixes="annox">

<jaxb:bindings schemaLocation="mytable.xsd">

  <jaxb:bindings node="xs:complexType[@name='MyTable']/xs:sequence/xs:element[@name='id']">
       <annox:annotate target="field">
             <annox:annotate annox:class="javax.persistence.Id"/>
       </annox:annotate>
  </jaxb:bindings> 

</jaxb:bindings> 
```

1.  这是我的相关 Pom.xml

    ```
    <dependencies>
        <dependency>
            <groupId>javax.xml.bind</groupId>
            <artifactId>jaxb-api</artifactId>
            <version>2.2.9</version>
        </dependency>
        <dependency>
            <groupId>org.jvnet.jaxb2_commons</groupId>
            <artifactId>jaxb2-basics</artifactId>
            <version>0.6.4</version>
        </dependency>
        <dependency>
            <groupId>org.jvnet.jaxb2_commons</groupId>
            <artifactId>jaxb2-basics-annotate</artifactId>
            <version>0.6.4</version>
        </dependency>
        <dependency>
         <groupId>javax.persistence</groupId>
         <artifactId>persistence-api</artifactId>
         <version>1.0.2</version>
         <scope>provided</scope>
    </dependency>
     </dependencies>

     <build>
        <plugins>
            <plugin>
                <groupId>org.jvnet.jaxb2.maven2</groupId>
                <artifactId>maven-jaxb2-plugin</artifactId>
                <version>0.8.3</version>
                <executions>
                    <execution>
                        <phase>generate-sources</phase>
                        <configuration>
                            <forceRegenerate>true</forceRegenerate>
                            <schemaDirectory>myschema</schemaDirectory>
                            <bindingIncludes>
                                <include>binding.xjb</include>
                            </bindingIncludes>
                            <extension>true</extension>
                           <args>
                            <arg>-Xvalue-constructor</arg>
                            <arg>-XtoString</arg>
                            <arg>-Xequals</arg>
                            <arg>-XhashCode</arg>
                            <arg>-Xcopyable</arg>
                            <arg>-Xannotate</arg>
                        </args>
                            <plugins>
              <plugin>                         <groupId>org.jvnet.jaxb2_commons</groupId> 
    ```

    jaxb2-基础 0.6.4

    org.jvnet.jaxb2_commons jaxb2-basics-annotate 0.6.4 org.jvnet.jaxb2_commons jaxb2-value-constructor 3.0

    ```
    </plugins>
                        </configuration>
                        <goals>
                            <goal>generate</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>org.eclipse.m2e</groupId>
                    <artifactId>lifecycle-mapping</artifactId>
                    <version>1.0.0</version>
                    <configuration>
                        <lifecycleMappingMetadata>
                            <pluginExecutions>
                                <pluginExecution>
                                    <pluginExecutionFilter>
                                        <groupId>org.jvnet.jaxb2.maven2</groupId>
                                        <artifactId>maven-jaxb2-plugin</artifactId>
                                        <versionRange>[0.7.4,)</versionRange>
                                        <goals>
                                            <goal>generate</goal>
                                        </goals>
                                    </pluginExecutionFilter>
                                    <action>
                                        <ignore></ignore>
                                    </action>
                                </pluginExecution>
                            </pluginExecutions>
                        </lifecycleMappingMetadata>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
    </build> 
    ```

但是，当我运行**Maven-->Generate-Sources**时出现此错误

```
Caused by: org.jvnet.annox.parser.AnnotationElementParseException: Could not parse the annotation element.
    at org.jvnet.annox.parser.XAnnotationParser.parse(XAnnotationParser.java:90)
    at org.jvnet.jaxb2_commons.plugin.annotate.AnnotatePlugin.annotate(AnnotatePlugin.java:387)
    ... 31 more
Caused by: org.jvnet.annox.annotation.AnnotationClassNotFoundException: Annotation class [javax.persistence.Id] could not be found.
    ... 33 more
Caused by: java.lang.ClassNotFoundException: javax.persistence.Id 
```

如果我只是将 @Id 注释添加到项目中的任何 java 类，那么我可以添加并且我看到 javax.persistence.Id 被导入没有问题。当我使用 maven & binding.xjb 时出了什么问题？我没有正确定义注释吗？非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-17T11:16:55.050

我想这也是我遇到的相同问题：您添加`javax.persistence`为 Maven 依赖项，但不是作为 JAXB 插件的依赖项：

添加类似这样的内容（如果您使用的是 Hibernate）：

```
</project>
    ...
    <build>
      <plugins>
        <plugin>
          <groupId>org.jvnet.jaxb2.maven2</groupId>
          <artifactId>maven-jaxb2-plugin</artifactId>
          <version>${maven-jaxb2-plugin.version}</version>
          <executions>
             ...
          </executions>
          <configuration>
             ...
          </configuration>
          <dependencies>
            <!-- Hibernate Persistence Annotations -->
            <dependency>
              <groupId>org.hibernate.javax.persistence</groupId>
              <artifactId>hibernate-jpa-2.0-api</artifactId>
              <version>${hibernate-jpa-2.0-api.version}</version>
            </dependency>
          </dependencies>
        </plugin>
      </plugins>
    </build>
    ...
</project> 
```

我有一个类似的问题，并且能够解决它。在下面的示例中，请注意我将注释放入 XSD 而不是 XJB 文件中，但 Maven 配置应该类似。

这是我的 XSD：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" jaxb:version="2.1"
  elementFormDefault="qualified" targetNamespace="http://www.gl-group.com/ewelding/schemas"
  xmlns:ew="http://www.companyname.com/project/schemas"
  xmlns:xmime="http://www.w3.org/2005/05/xmlmime" jaxb:extensionBindingPrefixes="annox"
  xmlns:annox="http://annox.dev.java.net"
  xmlns:ja="http://annox.dev.java.net/javax.xml.bind.annotation"
  xmlns:jpa="http://annox.dev.java.net/javax.persistence"
  xmlns:solrj="http://annox.dev.java.net/org.apache.solr.client.solrj.beans"
  xmlns:jackson="http://annox.dev.java.net/com.fasterxml.jackson.annotation">

...
<xs:element name="Certificate">
  <xs:annotation>
    <xs:appinfo>
      <annox:annotate>
        <ja:XmlAccessorType value="NONE"/>
        <jpa:Entity name="Certificate"/>
        <solrj:Field value="testByOrderOf"/>
        <jackson:JsonFormat shape="STRING" pattern="yyyy-MM-dd'T'HH:mm:ss'Z'" timezone="GMT"/>
      </annox:annotate>
    </xs:appinfo>
  </xs:annotation>
  ...
  <xs:element ref="ew:dateOfBirth">
    <xs:annotation>
      <xs:appinfo>
        <annox:annotate target="field">
          <solrj:Field value="dateOfBirth"/>
          <jackson:JsonFormat shape="STRING" pattern="yyyy-MM-dd'T'HH:mm:ss'Z'" timezone="GMT"/>
        </annox:annotate>
      </xs:appinfo>
    </xs:annotation>
  </xs:element>
  ...
</xs:element> 
```

以下是我的相关部分`pom.xml`：

```
...
<properties>
  ...
  <maven-jaxb2-plugin.version>0.8.3</maven-jaxb2-plugin.version>
  <jaxb2-basics.version>0.6.4</jaxb2-basics.version>
  <jaxb2-value-constructor.version>3.0</jaxb2-value-constructor.version>
  <solr-solrj.version>4.3.0</solr-solrj.version>
  <jackson.version>2.2.2</jackson.version>
  <hibernate-jpa-2.0-api.version>1.0.1.Final</hibernate-jpa-2.0-api.version>
  ...
</properties>
...
<build>
  <plugins>
    ...
    <!-- Generate Java sources from XSD schema files -->
    <plugin>
      <groupId>org.jvnet.jaxb2.maven2</groupId>
      <artifactId>maven-jaxb2-plugin</artifactId>
      <version>${maven-jaxb2-plugin.version}</version>
      <executions>
        <execution>
          <goals>
            <goal>generate</goal>
          </goals>
        </execution>
      </executions>
      <configuration>
        <extension>true</extension>
        <args>
          <arg>-Xannotate</arg>
          <arg>-Xvalue-constructor</arg>
          <arg>-Xinheritance</arg>
          <arg>-enableIntrospection</arg>
        </args>
        <!-- Include our schema -->
        <schemaDirectory>src/main/resources</schemaDirectory>
        <schemaIncludes>
          <include>certificate.xsd</include>
        </schemaIncludes>
        <bindingIncludes>
          <bindings>certificate.xjb</bindings>
        </bindingIncludes>
        <generateDirectory>src/main/java</generateDirectory>
        <generatePackage>com.company.project.generated</generatePackage>
        <plugins>
          <plugin>
            <groupId>org.jvnet.jaxb2_commons</groupId>
            <artifactId>jaxb2-basics</artifactId>
            <version>${jaxb2-basics.version}</version>
          </plugin>
          <plugin>
            <groupId>org.jvnet.jaxb2_commons</groupId>
            <artifactId>jaxb2-basics-annotate</artifactId>
            <version>${jaxb2-basics.version}</version>
          </plugin>
          <plugin>
            <groupId>org.jvnet.jaxb2_commons</groupId>
            <artifactId>jaxb2-value-constructor</artifactId>
            <version>${jaxb2-value-constructor.version}</version>
          </plugin>
        </plugins>
      </configuration>
      <dependencies>
        <!-- SolrJ - only needed for the @Field annotation -->
        <dependency>
          <groupId>org.apache.solr</groupId>
          <artifactId>solr-solrj</artifactId>
          <version>${solr-solrj.version}</version>
        </dependency>

        <!-- Jackson2 Annotations -->
        <dependency>
          <groupId>com.fasterxml.jackson.core</groupId>
          <artifactId>jackson-annotations</artifactId>
          <version>${jackson.version}</version>
        </dependency>

        <!-- Hibernate Persistence Annotations -->
        <dependency>
          <groupId>org.hibernate.javax.persistence</groupId>
          <artifactId>hibernate-jpa-2.0-api</artifactId>
          <version>${hibernate-jpa-2.0-api.version}</version>
        </dependency>
      </dependencies>
    </plugin>
    ...
  </plugins>
</build> 
```

我有同样的例外，这解决了它。请注意，我的示例将所有内容都放入 XSD 而不是 XJB 中...但是上面提到的依赖项也应该对您有所帮助。

# fedora - 如何在 Red Hat 6 中安装 netcdf-openmpi-devel

> ID：15775098
> 
> 赞同：0
> 
> 时间：2013-04-02T21:51:23.827
> 
> 标签：fedora, redhat, rpm, openmpi, netcdf

我需要在 Red Hat 6 上安装 netcdf-openmpi-devel。问题是我拥有的存储库没有提供这个：redhat 和 epel。我已经尝试下载几个fedora rpm，但是对于几乎所有的，都无法验证它们的密钥（执行rpm -K 包）。我能够为其中一个 rpm 获得一个密钥，但随后它表明我没有所需的依赖项，例如：

netcdf-openmpi，这就是我想要安装的。

还有另一种安装方法吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-31T21:51:21.323

最简洁的方法是针对 RHEL6 包集构建一个 RPM 包。这将确保满足所有依赖项。为此，利用已经存在的包，您可以从 [1] 克隆 Fedora netcdf 包文件，然后使用 mock 构建包，使用`rpmbuild`（参见 [2]）或者，实际上更好，`mock`（参见 [3]）。

您可能会遇到构建依赖项在 rhel 或 epel 存储库中不可用的情况。然后，您可以再次从 Fedora git 存储库克隆相应的包文件并在之前构建该包。

因此，总结您的步骤可能如下所示：

```
$ git clone git://pkgs.fedoraproject.org/netcdf.git
$ cd netcdf
## Look at netcdf.spec, make changes if necessary
## To build using rpmbuild (probably easier than mock)
# yum install rpmdevtools
$ rpmdev-setuptree
$ mv netcdf.spec $HOME/rpmbuild/SPEC
$ mv * $HOME/rpmbuild/SOURCES
$ cd $HOME/rpmbuild/SPEC
$ rpmbuild -ba netcdf.spec
## rpmbuild might complain about unsatisfied build dependencies. Install these as necessary, some build dependencies might not be available in the repos, you will need to build then following the same procedure. 
```

您需要注意的一件事是`netcfd`epel 中有一个可用的包，但是它是在没有 openmpi 支持的情况下构建的（参见 [4]）。如果您安装自制的 rpm，您可能希望确保来自 epel 存储库的可能更新不会覆盖您的自制版本（如果`epoch:version-release`存储库中的软件包比您的更新，则会发生这种情况）已建成）。你可以：

*   监控将要更新的内容，如果 epel 的 netcdf 版本会更新您自制的 rpm，然后从 Fedora git repo 获取最新的包源并构建一个新包。
*   `netcdf*`通过添加`exclude=netcdf*`到 .epel 存储库文件中从 epel 中排除`/etc/yum.repos.d`。

*   [1] [http://pkgs.fedoraproject.org/cgit/netcdf.git/](http://pkgs.fedoraproject.org/cgit/netcdf.git/)

*   [2] [http://fedoraproject.org/wiki/How_to_create_an_RPM_package#Preparing_your_system](http://fedoraproject.org/wiki/How_to_create_an_RPM_package#Preparing_your_system)
*   [3] [http://fedoraproject.org/wiki/Projects/Mock](http://fedoraproject.org/wiki/Projects/Mock)
*   [4] [http://pkgs.fedoraproject.org/cgit/netcdf.git/tree/netcdf.spec?h=el6](http://pkgs.fedoraproject.org/cgit/netcdf.git/tree/netcdf.spec?h=el6)

# javascript - Leaflet.draw 映射：如何在没有工具栏的情况下启动绘图功能？

> ID：15775103
> 
> 赞同：43
> 
> 时间：2013-04-02T21:51:51.797
> 
> 标签：javascript, leaflet, gis, leaflet.draw

对于任何使用过传单或传单.draw 插件的人：

我想在不使用工具栏的情况下开始绘制多边形`leaflet.draw`。`layer.editing.enable();`通过在线搜索（不在主文档中），我设法找到了允许在不使用工具栏 ( ) 的情况下进行编辑的属性。如果没有工具栏按钮，我似乎无法找到如何开始绘制多边形。任何帮助将非常感激！

谢谢 ：）

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-06-17T09:27:42.447

这个简单的代码对我有用：

```
new L.Draw.Polyline(map, drawControl.options.polyline).enable(); 
```

只需将其放入自定义按钮的 onclick 处理程序（或任何您想要的位置）。

变量`map`和`drawControl`是对您的传单地图和绘制控件的引用。

深入研究源代码 (leaflet.draw-src.js)，您可以找到绘制其他元素以及编辑或删除它们的函数。

```
new L.Draw.Polygon(map, drawControl.options.polygon).enable()
new L.Draw.Rectangle(map, drawControl.options.rectangle).enable()
new L.Draw.Circle(map, drawControl.options.circle).enable()
new L.Draw.Marker(map, drawControl.options.marker).enable()

new L.EditToolbar.Edit(map, {
                featureGroup: drawControl.options.featureGroup,
                selectedPathOptions: drawControl.options.edit.selectedPathOptions
            })
new L.EditToolbar.Delete(map, {
                featureGroup: drawControl.options.featureGroup
            }) 
```

我希望这对你也有用。

编辑：`L.EditToolbar.Edit`and`L.EditToolbar.Delete`类公开了以下有用的方法：

*   enable(): 启动编辑/删除模式
*   disable()：返回标准模式
*   save()：保存更改（它触发 draw:edited / draw:deleted 事件）
*   revertLayers()：撤消更改

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-22T13:50:06.473

我认为值得一提的是[Jacob Toyes](https://stackoverflow.com/a/22738698/430418)对这个问题的回答。您总是在*leaflet.draw*中使用处理程序进行绘图- 而不是直接使用图层。如果要编辑图层，请使用保存在图层字段中的处理程序，如下所示`editing`：`layer.editing.enable();`如果你想创建一个新层，你首先创建一个新的处理程序：

```
// Define you draw handler somewhere where you click handler can access it. N.B. pass any draw options into the handler
var polygonDrawer = new L.Draw.Polyline(map);

// Assumming you have a Leaflet map accessible
map.on('draw:created', function (e) {
    var type = e.layerType,
        layer = e.layer;

    // Do whatever you want with the layer.
    // e.type will be the type of layer that has been draw (polyline, marker, polygon, rectangle, circle)
    // E.g. add it to the map
    layer.addTo(map);
});

// Click handler for you button to start drawing polygons
$('#draw_poly').click(function() {
    polygonDrawer.enable();
}); 
```

到目前为止，*leaflet.draw* github页面上实际上有一个示例：[https ://github.com/Leaflet/Leaflet.draw/blob/develop/docs/examples/edithandlers.html](https://github.com/Leaflet/Leaflet.draw/blob/develop/docs/examples/edithandlers.html)

尽管如此，我认为处理程序还没有很好地记录在那里。

如上所述，`L.EditToolbar.Edit`并`L.EditToolbar.Delete`公开有趣的方法和事件，例如*editstart*和*editstop*。没有提到的是这两个类本身是从`L.Handler`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-14T15:30:39.913

所以我已经为圆形解决了这个问题，但对于多边形应该是一样的。其实很简单。希望下面的代码回答你的问题，但如果没有让我知道，我可以发布更多内容。

```
// Creates the circle on the map for the given latLng and Radius
// If the createdWithAddress flag is true, the circle will not update 
// it's address according to its position. 
createCircle: function(latLng, radius, createdWithAddress) {
if (!this.circle) {
  var self = this,
      centerIcon,
      centerMarker;

  centerIcon = new L.Icon({
    iconUrl: '/assets/location_pin_24px.png',
    iconSize: [24, 24],
    iconAnchor: [12, 24],
    shadowUrl: '/assets/marker-shadow.png',
    shadowSize: [20, 20],
    shadowAnchor:[6, 20]
  })

  // Setup the options for the circle -> Override icons, immediately editable
  options = {
    stroke: true,
    color: '#333333',
    opacity: 1.0,
    weight: 4,
    fillColor: '#FFFFFF',
    moveIcon: centerIcon,
    resizeIcon: new L.Icon({
      iconUrl: '/assets/radius_handle_18px.png',
      iconSize: [12, 12],
      iconAnchor: [0,0]
    })
  }

  if (someConfigVarYouDontNeedToKnow) {
    options.editable = false
    centerMarker = new L.Marker(latLng, { icon:centerIcon })
  } else {
    options.editable = true
  }

  // Create our location circle 
  // NOTE: I believe I had to modify Leaflet or Leaflet.draw to allow for passing in
  // options, but you can make it editable with circle.editing.enable()
  this.circle = L.circle([latLng.lat, latLng.lng], radius, options)

  // Add event handlers to update the location
  this.circle.on('add', function() {
    if (!createdWithAddress) {
      self.reverseGeocode(this.getLatLng())
    }
    self.updateCircleLocation(this.getLatLng(), this.getRadius())
    self.updateMapView()
  })            
  this.circle.on('edit', function() {
    if (self.convertLatLngToString(this.getLatLng()) !== self.getLocationLatLng()) {
      self.reverseGeocode(this.getLatLng())
    }
    self.updateCircleLocation(this.getLatLng(), this.getRadius())
    self.updateMapView()
  })

  this.map.addLayer(this.circle)
  if (centerMarker) {
    centerMarker.addTo(this.map)
    this.circle.redraw()
    centerMarker.update()
  }
}
}, 
```

抱歉，其中很多只是噪音，但它应该让您了解如何解决这个问题。您可以像您所说的使用editing.enable()/.disable() 控制编辑。

请务必对任何问题发表评论。祝你好运。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2021-01-16T12:22:06.630

虽然[BaCH](https://stackoverflow.com/users/2492742/bach)的解决方案可能是最好的，但我想添加一个**单行**解决方案，它实际上更具**前瞻性**（比挖掘未记录的 Leaflet Draw 方法）和**最简单**的.

```
document.querySelector('.leaflet-draw-draw-polygon').click(); 
```

就是这样。您只是利用工具栏的*存在*，但实际上，您并没有使用它。您可以以任何方式以编程方式启动绘图。您还可以使用 CSS 隐藏工具栏。

如果您想开始绘制不同的形状，请使用以下类之一：

```
.leaflet-draw-draw-polyline
.leaflet-draw-draw-rectangle
.leaflet-draw-draw-circle
.leaflet-draw-draw-marker
.leaflet-draw-draw-circlemarker 
```

# android - Jquery mobile：如何在固定页脚上方显示弹出窗口？

> ID：15775107
> 
> 赞同：2
> 
> 时间：2013-04-02T21:52:01.063
> 
> 标签：android, jquery, ios, jquery-mobile, jquery-mobile-popup

我如何将弹出窗口定位在固定页脚上方，就像附加图像中描述的那样？

[http://i.stack.imgur.com/dADjb.jpg](http://i.stack.imgur.com/dADjb.jpg)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:37:21.727

jQuery Mobile 弹出窗口的问题是 x,y 定位无法正常工作。

但我们可以作弊，看看这个工作示例：http: [//jsfiddle.net/Gajotres/LSakj/](http://jsfiddle.net/Gajotres/LSakj/)

**HTML：**

```
<a href="#popup" data-rel="popup">Open Popup</a>
<div data-role="popup" id="popup" data-transition="slidedown" data-position-to="#footer-test" data-theme="a" data-overlay-theme="e" data-history="true">
    <p>U slučaju hitnoće koristi ovaj izbornik!</p>
</div> 
```

在这种情况下，数据位置设置为页脚 id。不幸的是，这会将它放在页脚上，所以我们需要额外的 CSS 来将它放在页脚上。

**CSS：**

```
#popup {
    margin-bottom: 30px !important;
} 
```

您应该更改此值以适应您的弹出高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:55:27.700

好吧，如果您使用所有 jquery 库，您可以使用[jGrowl](http://stanlemon.net/2013/03/16/jgrowl-1-2-11/)来创建通知，只需做一些工作，您就会得到一个不错的结果。

# android - 在应用程序安装时将对象保存到内部存储

> ID：15775109
> 
> 赞同：1
> 
> 时间：2013-04-02T21:52:26.420
> 
> 标签：android, installation, storage

我想知道在用户在移动设备上安装应用程序时是否可以保存对象。

**我为什么要这个？**

我的应用程序使用一些默认对象来实现他的正常行为，每当用户启动应用程序时，我希望可以使用这些对象。我当然可以在用户每次打开应用程序时创建它们。但这可能会消耗一些不必要的时间、性能和电池。如果默认设置，我只想创建一次，然后它就一直在那里。

我还将使用内部存储来创建这种类型的新对象，会有我上面描述的默认对象，还有创建新对象并将它们保存以供以后使用的选项，在该应用程序的另一个时间已启动，但是很好，我已经阅读了有关如何序列化对象并使用内部存储来保留它们的内容:)

我只是在这里问第一个问题，一开始只创建一次项目，也许是在应用程序的安装时刻？我在假设..但不知道它是否可能。

拥有这个空间一年多以来非常有帮助，我已经从你那里学到了很多东西，谢谢；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:36:49.140

我不确定你是什么意思。Java 对象存在于内存中，因此在用户安装应用程序时“保存”它几乎没有意义。除非某个进程保留它，否则它不能保留在内存中。

如果您的意思是 JPEG 照片或其他数据，您可以将数据放在项目的目录中，然后在安装应用程序后将其作为资源访问。请参阅 [提供资源](http://developer.android.com/guide/topics/resources/providing-resources.html)API 指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T22:56:12.730

Android 提供以下意图来检测应用程序安装

```
 <action android:name="android.intent.action.PACKAGE_ADDED"/>  
     <action android:name="android.intent.action.PACKAGE_REMOVED"/> 
```

如果您将这些与广播接收器一起使用，您将在用户安装新应用程序时收到通知。此解决方案的问题是，当您尝试检测自己的应用程序安装时，它对您没有帮助。

您可以做的是每次用户启动您的应用程序时

*   检查对象是否存在
*   如果没有创建一个并将其写入内部存储。

这样，它将创建一次。根据您尝试保存的对象类型，您可能会考虑使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)或[SqlLite](http://developer.android.com/reference/android/database/sqlite/package-summary.html)或只是一个[文件 IO](http://developer.android.com/reference/java/io/File.html)。如果您正在编写 Java 对象，那么序列化就是要走的路。

**更新**

如果您计划第一次从网络获取数据，取决于您可以决定的大小，

*   小文件：将其放在 Asset 文件夹中并与 apk 一起发布。
*   大文件：如果文件很大，您可以考虑将部分与 apk 一起发布，并在后台进程中同步和更新其余部分，或从网络下载所有内容

# wpf - 引用另一个 xaml 文件中定义的自定义资源

> ID：15775111
> 
> 赞同：20
> 
> 时间：2013-04-02T21:52:37.703
> 
> 标签：wpf, xaml, resources, staticresource

我正在尝试在一个 xaml 文件中创建一个新资源并在另一个 xaml 文件中引用它。即我定义

```
<Window.Resources>
    <ImageBrush x:Key="TileBrush" TileMode="Tile" ViewportUnits="Absolute" Viewport="0 0 32 32" ImageSource="MyImageButton.png" Opacity="0.3">
    </ImageBrush>
</Window.Resources> 
```

并尝试在另一个 xaml 文件中使用它

```
<Grid>
    <Button Background="{StaticResource TileBrush}" Margin="5" Padding="5" FontWeight="Bold" FontSize="14">
        A Tiled Button
    </Button>
</Grid> 
```

但是我收到错误*“找不到静态资源参考'TileBrush'。”* 我可以从同一个 xaml 文件中引用资源，但不知道如何从另一个文件中引用。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-02T22:11:23.817

在 WPF 中，资源引用就像树一样工作。每个控件都有资源，子控件可以访问父控件的资源。全局应用程序资源字典位于 App.xaml 文件中。在此文件中，您可以包含多个资源字典作为合并字典。请参阅此代码示例：

```
<?xml version="1.0" encoding="utf-8"?>
<Application ...>
    <Application.Resources>
        <ResourceDictionary>
            <vm:ViewModelLocator x:Key="Locator" d:IsDataSource="True" />
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="View\SomeFileDictionary.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources>
</Application> 
```

`SomeFileDictionary.xaml`位于我的项目结构的文件`View`夹中。并且看起来像这样：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:ViewModel="clr-namespace:Cepha.ViewModel"
                xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                ... >

<DataTemplate DataType="{x:Type ViewModel:SomeType}">
    <TextBox .../>
</DataTemplate>... 
```

并且此文件（或 App.xaml）中定义的每个字典键或数据模板都可以在项目的任何位置引用。希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:09:08.997

您应该在 app.xaml 文件中定义它。这些资源在整个项目中共享

# intersection - 处理到 Processing.js，Pvector 数组

> ID：15775112
> 
> 赞同：0
> 
> 时间：2013-04-02T21:53:03.577
> 
> 标签：intersection, processing.js

我刚刚在 Processing 中编写了一个代码（在一些帮助下，因为我是初学者！！）它在 Processing.js 中不起作用，不知道如何修复此代码。

该代码是显示一条移动线和其他四条固定线之间的交点的图表。

非常感谢您的及时回答，我有两天的最后期限，我是一个真正的初学者！！！

```
PVector[] lineCoordinates = new PVector[5];
PVector mStart, mEnd;

void setup() {
  PFont font;
font = loadFont("ArialNarrow-12.vlw");
textFont(font, 12);
  size(600, 200);
  lineCoordinates[0] = new PVector(width/5, height/5);                      // start
  lineCoordinates[1] = new PVector(width-10, height-(height/3));               // line 1
  lineCoordinates[2] = new PVector(width-(width/5)-10, height-(height/3));     // line 2
  lineCoordinates[3] = new PVector(width-(2*(width/5))-10, height-(height/3)); // line 3
  lineCoordinates[4] = new PVector(width-(3*(width/5))-10, height-(height/3)); // line 4
  mStart = new PVector(width/5, height-(height/3));
  mEnd = new PVector();
  fill(0);
  strokeWeight(1);
}

void draw() {
  background(255);
  fill(0);
  text("The Eye", (width/5)-10,( height/5)-5);
  text("Picture Plane", mouseX, mouseY);
  text("Horizon Line", 5, height-(height/3)-5);
  text("x", width-(2*(width/5))+40, height-(height/3));
  text("x", width-(3*(width/5))+40, height-(height/3));
  text("x", width-(width/5)+40, height-(height/3));

  fill(255,0,0);
  noStroke();
  ellipse(width-(width/5)-10, height-(height/3),5,5);
  ellipse(width-(2*(width/5))-10, height-(height/3),5,5);
  ellipse(width-(3*(width/5))-10, height-(height/3),5,5);
  ellipse(width-10, height-(height/3),5,5);

  fill(0);
  stroke(1); 
  line(0, height-(height/3), width, height-(height/3)); // Horizon Line

  mEnd.set(mouseX, mouseY, 0);
  line(mStart, mEnd);

  for (int i=1; i<lineCoordinates.length; i++) {
    line(lineCoordinates[0], lineCoordinates[i]);
    PVector is = lineIntersection(lineCoordinates[0], lineCoordinates[i], mStart, mEnd);
    if (is!=null) { ellipse(is.x, is.y, 5, 5); }
  }
}

void line(PVector s, PVector e) {
  line(s.x, s.y, e.x, e.y);
}

PVector lineIntersection(PVector p1, PVector p2, PVector p3, PVector p4)
{
  PVector b = PVector.sub(p2, p1);
  PVector d = PVector.sub(p4, p3);

  float b_dot_d_perp = b.x * d.y - b.y * d.x;
  if (b_dot_d_perp == 0) { return null; }

  PVector c = PVector.sub(p3, p1);
  float t = (c.x * d.y - c.y * d.x) / b_dot_d_perp;
  if (t < 0 || t > 1) { return null; }
  float u = (c.x * b.y - c.y * b.x) / b_dot_d_perp;
  if (u < 0 || u > 1) { return null; }

  return new PVector(p1.x+t*b.x, p1.y+t*b.y);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:47:01.697

首先在底部添加以下内容：

```
void mouseMoved() {
  x = mouseX;
  y = mouseY;
  redraw();
} 
```

并用变量替换`mouseX`和。`mouseY``x` `y`

至少这可以让“Picture Plane”跟随鼠标...

# parameterization - pytest 测试需要在收集阶段和设置时进行参数化

> ID：15775118
> 
> 赞同：3
> 
> 时间：2013-04-02T21:53:25.773
> 
> 标签：parameterization, pytest

我有一些测试，我想使用一些参数进行参数化，这些参数需要在收集阶段进行，有些需要在设置时进行。我无法在 pytest_generate_test 钩子中使用 metafunc.parametrize，因为我需要一些固定装置具有间接 = True 以将 argname 作为 request.param 传递，但其他参数需要具有间接 = False。

任何想法如何做到这一点？

这是我的测试的样子和我想做的一个例子：

```
def pytest_generate_tests(metafunc):
    if metafunc.function.__name__ == 'test_example':
        argnames = []
        argvalues = []
        parameters = getattr(metafunc.function, 'paramlist', ())
        for p in parameters:
            if type(p) == list:
                argnames = tuple(['myfixture'] + p)
            else:
                argvalues.append = tuple(['std'] + p['argvalues'])
            argvalues.append = tuple(['pro'] + p['argvalues'])
        # I want to do the following, but it won't work since some of the
        # args need indirect set to true and some need indirect set to false.
        metafunc.parametrize(argnames, argvalues, indirect=True)
    elif 'myfixture' in metafunc.fixturenames:
        # we have existing tests which use the fixture, but only with
standard
        metafunc.parametrize("myfixture", "std")
    else:
        # we have existing tests which use older style parametrization,
non-fixture
        for p in getattr(metafunc.function, 'paramlist', ()):
            metafunc.addcall(funcargs=p)

def params(decolist):
    def wrapper(function):
        function.paramlist = decolist
        return function
    return wrapper

@pytest.fixture
def myfixture(request):
    If request.param == 'std':
        myfix = SomeObject()
    elif request.param == 'pro':
        myfix = SomeOtherObject()
    def fin():
        myfix.close()
    request.addfinalizer(fin)
    return myfix

@params([
    ['color', 'type'],
    { 'argvalues': [ 'blue', 'cat'] },
    { 'argvalues': ['pink', 'dog'] }
])
def test_example(myfixture, color, type):
    # this is the new test we want to add

def test_something(myfixture):
    # existing test which only uses std fixture

@params([
    {'arg1': 1, 'arg2': 2},
    {'arg1': 3, 'arg2': 5}
])
def test_old_style(arg1, arg2):
    # existing tests which don't use fixtures 
```

感谢您阅读本文！我知道它相当长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-31T12:53:24.793

每个设计的所有参数化都发生在收集时

# javascript - 使用 Jquery 从 url 读取文本文件

> ID：15775119
> 
> 赞同：2
> 
> 时间：2013-04-02T21:53:26.900
> 
> 标签：javascript, jquery, text-files

我正在尝试使用以下代码从服务器读取文本文件。我无法访问它，但是当我只在本地拥有该文本文件时，它就可以正常工作了。请让我知道该怎么做

```
$(document).ready(function(){
    $.get('http://.../admin/ReleaseNotes/FY13/UpcomingChanges.txt', function(contents) {
          $("#contentArea").val(contents);
    },'text');
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:57:35.240

您正在尝试在与发出请求的域不同的域上请求文档。同源策略将阻止此请求完成。不过，有一些方法可以规避这一政策。您可以在此答案中找到信息：[绕过同源策略的方法](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)

您还可以尝试以下教程，该教程将向您展示如何使用 YQL 和 jQuery 进行跨域 ajax 请求。

[http://net.tutsplus.com/tutorials/javascript-ajax/quick-tip-cross-domain-ajax-request-with-yql-and-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/quick-tip-cross-domain-ajax-request-with-yql-and-jquery/)

# amazon-mws - 亚马逊 API。产品的销售量。不是畅销书，而是实际销量。*创造性地拉音量？

> ID：15775123
> 
> 赞同：1
> 
> 时间：2013-04-02T21:53:36.860
> 
> 标签：amazon-mws

亚马逊拥有按类别和子类别分类的 TOP 100 卖家，这一切都很好。但是作为亚马逊的卖家，如果我在 Wholesale 上花了 100,000 美元购买了一个产品，并且该产品在其类别的 TOP 100 中排名第一，或排名第 10，或排名第 100，我如何确定这 100,000 件是否会在一天、一周、一个月还是三个月？

API 是否按天公开订单？销售量？有没有可用的经验数据？API 是否公开了足够的数据以得出“合乎逻辑的结论”或“合理的预期”

我需要清楚地知道我应该从我们的批发商那里买多少。我最感兴趣的是杂货类，

[http://www.amazon.com/Best-Sellers-Grocery-Gourmet-Food/zgbs/grocery/ref=zg_bs_nav_0](http://www.amazon.com/Best-Sellers-Grocery-Gourmet-Food/zgbs/grocery/ref=zg_bs_nav_0)

提前感谢您提供任何周到的指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T18:38:14.713

**问：我如何确定这 100,000 件是否会在一天、一周、一个月或三个月内售出？**

**答：你不能。**

一个产品有多少销售额以及这些 TOP 100 列表是如何计算的，这仍然是亚马逊的秘密。AWS API 不会导出任何销售数据，MWS 只会让您获得*自己的*销售数据。

**问：API 是否公开了足够的数据以得出“合乎逻辑的结论”或“合理的预期”**

**答：不能单独通过 AWS。**

但是，如果您有自己的销售数据（通过 MWS）*并且*知道他们在前 100 名中的位置，*并且*您没有在这些产品上与其他商家竞争，那么您可以*尝试*进行插值。

您拥有前 5 名：1000 次销售额 您拥有前 57 名：170 次销售额

您可以猜测前 10 名产品可能获得多少销售额：

*   销售数据的线性分布表明每个排名减少 16 个销售额，剩下 980 个
*   销售数字的指数分布会给你大约 700 的东西，这取决于你的指数插值的顺序。

*另一种方法：贿赂亚马逊员工:)*

# php - 支付宝整合、查询

> ID：15775133
> 
> 赞同：0
> 
> 时间：2013-04-02T21:54:15.253
> 
> 标签：php, paypal

我有个问题。

我正在使用这个 Paypal 代码： http: [//www.saaraan.com/2012/07/paypal-expresscheckout-with-php](http://www.saaraan.com/2012/07/paypal-expresscheckout-with-php) 我想在我的网站上有一个高级功能，用户可以在其中购买东西和高级featuren 应该直接在他的帐户上处于活动状态。我该如何启用它？我应该把查询放在哪里来更新他的帐户？我的意思是，如果付款状态处于待处理状态，那我没有钱怎么办。他有可能取消订单吗？

或者我应该在 GetTransactionDetails 之后添加查询。或者有没有可能订单完成了，但是查询不会执行？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T01:26:35.990

您的问题的最佳解决方案是创建一个 IPN 侦听器，该侦听器将接收交易详细信息，如果您正确编码，则相应地更新您的用户帐户。如果您愿意，您可以将其编程为仅在 IPN 显示付款状态已完成时更新帐户。我有一个 IPN 监听器，它有大约 8 种不同的场景，具体取决于交易类型和付款状态。

对 IPN 监听器做一些研究，你会发现你真的可以使用它们来为你处理很多繁琐的细节。Paypal 的开发人员站点有 IPN 侦听器代码示例，可以帮助您入门。

希望这可以帮助。

# .htaccess - 更改 PDF 缓存速率或下载与在新窗口中打开 PDF 的解决方案？

> ID：15775139
> 
> 赞同：0
> 
> 时间：2013-04-02T21:54:37.090
> 
> 标签：.htaccess, caching, pdf, browser-cache

我在这里做了很多搜索，并应用了一些提到的方法，但没有任何运气。

我的问题是我管理的一个网站，客户每周都会以相同的文件名上传一个新的 PDF。问题是人们试图下载这个，很多人抱怨它加载了过去几周的 PDF。这是由于浏览器缓存，因为当我告诉他们清除缓存时，一切正常。

我有两种可能的解决方案：

1）强制下载PDF文件，而不是在新窗口中打开。现在我已经尝试了各种这些 htaccess 调整，但似乎都无法在 IE9 或 Safari 上运行。

2）以某种方式更改缓存率，以便PDF文件的缓存率仅持续一分钟，我不知道如何做到这一点，甚至可能吗？

有没有人有任何解决方案，而不是每次都链接文件名？我们不这样做的原因是她想自己上传 PDF，而不必担心编辑 HTML 文件链接。

在此先感谢，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:54:57.817

您可以使用`FilesMatch`容器并`mod_headers`在所有浏览器、客户端和代理中完成缓存预防：

```
<FilesMatch ".pdf$">
    FileETag None
    <IfModule mod_headers.c>
        Header unset ETag
        Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate"
        Header set Pragma "no-cache"
        Header set Expires "Thu, 1 Jan 1970 05:00:00 GMT"
    </IfModule>
</FilesMatch> 
```

# excel - Excel 将列转换为新行

> ID：15775143
> 
> 赞同：-1
> 
> 时间：2013-04-02T21:54:49.810
> 
> 标签：excel, vba

我有一个看起来像这样的表：

```
 |   A   |     B      |     C      |     D      |
  +-------+------------+------------+------------+
1 | Name  | Language 1 | Language 2 | Language 3 |
  +=======+============+============+============+
2 | John  | English    | Chinese    | Spanish    | 
3 | Wendy | Chinese    | French     | English    | 
4 | Peter | Spanish    | Chinese    | English    | 
```

我想生成一个只有一个语言列的表。其他两个语言列应该变成这样的新行：

```
 |   A   |    B     | 
   +-------+----------+
 1 | Name  | Language |
   +=======+==========+
 2 | John  | English  |
 3 | John  | Chinese  |
 4 | John  | Spanish  |
 5 | Wendy | Chinese  |
 6 | Wendy | French   |
 7 | Wendy | English  |
 8 | Peter | Spanish  |
 9 | Peter | Chinese  |
10 | Peter | English  | 
```

我知道这可能需要一个宏或其他东西。如果有人指出我正确的方向，我将不胜感激。我对 VBA 或 Excel 对象模型不是很熟悉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T09:30:27.133

这会成功的。它也是动态的，支持尽可能多的语言列，每人使用尽可能多的语言。假设数据按照示例格式化：

```
Sub ShrinkTable()
    Dim maxRows As Double
    Dim maxCols As Integer
    Dim data As Variant
    maxRows = Cells(1, 1).End(xlDown).row
    maxCols = Cells(1, 1).End(xlToRight).Column

    data = Range(Cells(1, 1), Cells(maxRows, maxCols))

    Dim newSht As Worksheet
    Set newSht = Sheets.Add

    With newSht

        .Cells(1, 1).Value = "Name"
        .Cells(1, 2).Value = "Column"

        Dim writeRow As Double
        writeRow = 2

        Dim row As Double
        row = 2
        Dim col As Integer

        Do While True

            col = 2
            Do While True
                If data(row, col) = "" Then Exit Do 'Skip Blanks

                'Name
                .Cells(writeRow, 1).Value = data(row, 1)

                'Language
                .Cells(writeRow, 2).Value = data(row, col)

                writeRow = writeRow + 1
                If col = maxCols Then Exit Do 'Exit clause
                col = col + 1
            Loop

            If row = maxRows Then Exit Do 'exit cluase
            row = row + 1
        Loop

    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:18:28.683

凌乱但应该工作：

```
For Each namething In Range("A1", Range("A1").End(xlDown))
    Range("A1").End(xlDown).Offset(1, 0) = namething.Value
    Range("A1").End(xlDown).Offset(0, 1) = namething.Offset(0, 2)
    Range("A1").End(xlDown).Offset(1, 0) = namething.Value
    Range("A1").End(xlDown).Offset(0, 1) = namething.Offset(0, 3)
    namething.Offset(0, 2) = ""
    namething.Offset(0, 3) = ""
Next 
```

然后只需排序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T22:29:41.790

以下公式应该有效。sheet2 中的数据将始终反映 sheet1 上的数据，因此您不必重新运行宏来创建新列表。

话虽如此，使用宏来生成它可能是一个更好的选择，因为如果您需要在以后添加第 4 种语言或其他东西，它可以提供更大的灵活性。

在 Sheet2!A2 中

`=INDIRECT("Sheet1!A"&ABS(INT((ROW()+1)/3))+1)`

在 Sheet2!B2 中

`=INDIRECT("Sheet1!"&IF(ABS(INT((ROW()+1)/3)-(ROW()+1)/3)=0,"B",IF(ABS(INT((ROW()+1)/3)-(ROW()+1)/3)=(1/3),"C","D"))&ABS(INT((ROW()+1)/3))+1)`

在 A1 和 B1 中添加列标题，然后将公式自动填充到工作表中。

# d3.js - d3：来自数据的时间序列

> ID：15775145
> 
> 赞同：1
> 
> 时间：2013-04-02T21:54:55.403
> 
> 标签：d3.js, time-series

我想通过在函数中传递字典来创建时间序列。示例中的代码是这样的：

```
d3.csv("data.csv", function(error, data) {
  data.forEach(function(d) {
    d.date = parseDate(d.date);
    d.close = +d.close;
  });

  x.domain(d3.extent(data, function(d) { return d.date; }));
  y.domain(d3.extent(data, function(d) { return d.close; }));
  //etc... 
```

我想要做的是将其转换为一个函数，该函数接受一个带有日期和关闭行（数据）的对象并由此生成图表，即

```
 function makeGraph(timeseriesdata){
        // create chart above from data
        // what format??
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:11:38.847

d3.csv 为您完成了大部分艰苦的工作。它需要一个 csv 并将其转换为一个对象数组，每个对象对应于 csv 的一行。

[https://github.com/mbostock/d3/wiki/CSV](https://github.com/mbostock/d3/wiki/CSV)有一些例子。

调用 d3.csv 并使用 parseDate 清理数据后，您可以将数据传递给 makeGraph。

```
d3.csv("data.csv", function(error, data) {
  data.forEach(function(d) {
   d.date = parseDate(d.date);
   d.close = +d.close;
  });
  makeGraph(data);
});

function makeGraph(timeseriesdata){

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:24:55.963

要在给定字典的情况下创建行路径，请使用 dict 创建一个列表，例如：

```
var parseDate = d3.time.format("%Y-%m-%d").parse;   

 var lineData = [ { "date": "2013-04-01",   "close": 5},  { "date": "2013-03-28",  "close": 20},
                  { "date": "2013-03-27",  "close": 10}, { "date": "2013-03-26",  "close": 40},
                  { "date": "2013-03-25",  "close": 5},  { "date": "2013-03-24", "close": 60}];

  lineData.forEach(function(d,i) {     
    d.date = parseDate(d.date);
    d.close = +d.close;    
  });

makeGraph(lineData); 
```

# mysql - 查询运行太慢

> ID：15775151
> 
> 赞同：0
> 
> 时间：2013-04-02T21:55:30.153
> 
> 标签：mysql, sql

我正在开发一个查询 MySQL 数据库的 C# WinForm 应用程序。查询所需的时间非常慢（30 秒 - 1 分钟）。我对数据库的经验很少，我似乎无法弄清楚我的查询出了什么问题。有人可以指出我做错了什么。

```
string sql = "SELECT t1.date, t1.name, t2.name, t3.addrs
              FROM tbl1 t1 JOIN tbl2 t2 ON tbl1.id = tbl2.id
              JOIN tbl3 t3 ON t3.addrs = t2.addrs WHERE t1.date = '2013-04-01';";

string connStr = "Server = 10.10.10.100; Database = mydb; etc...";
MySQLConnection conn = new MySQLConnection(connStr);
MySQLCommand cmd = new MySQLCommand(sql, conn);
MySQLDataReader rdr = null;
DataTable dt = new DataTable();

dt.Columns.Add("Id","FirstName","LastName","Address","Date");

rdr = cmd.ExecuteReader();

while(rdr.Read())
{
    dt.Rows.Add(rdr["ID"], rdr["FirstName"], rdr["LastName"], rdr["Address"],rdr["Date"]);
}

conn.Close();
rdr.Close();

dataGridView.DataSource = dt; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T22:00:41.550

I would make sure you have indexes on the join fields and the date.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:06:59.413

我将假设这`tbl2.addrs`是一个唯一的密钥。如果不是，您正在执行交叉连接，这既非常昂贵，也可能不是您想要的。

也就是说：确保您在`tbl1.id`and上具有索引`tbl2.addrs`，并且可选地在`tbl1.date`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T22:53:22.887

您的查询中不需要表 t3。您选择的唯一字段是 addrs。但是，由于您要在该字段上加入 t2，因此您可以简单地从 t2 中选择它。这将是您的查询。

```
SELECT t1.date, t1.name, t2.name, t2.addrs
FROM tbl1 t1 JOIN tbl2 t2 ON tbl1.id = tbl2.id
WHERE t1.date = '2013-04-01' 
```

此外，这看起来像一个 .net 应用程序。使用查询参数。它们的可取之处之一是它们有时会加快查询速度。

# html - HTML5 有效的元数据列表？

> ID：15775152
> 
> 赞同：2
> 
> 时间：2013-04-02T21:55:34.060
> 
> 标签：html, metadata

我是一名业余网页设计师，我想了解 HTML5 中的元数据，谁能告诉我 HTML5 有效元数据的完整列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:51:21.627

在 HTML5 规范中，您可以访问[`meta`元素部分](http://www.w3.org/TR/html5/document-metadata.html#the-meta-element)以查看允许将哪些值用于`name`属性。

您会发现 HTML5 定义了[标准元数据名称](http://www.w3.org/TR/html5/document-metadata.html#standard-metadata-names)，并且[可以注册其他元数据名称](http://www.w3.org/TR/html5/document-metadata.html#other-metadata-names)，因此所有其他注册都列在[WHATWG wiki](http://wiki.whatwg.org/wiki/MetaExtensions#Registered_Extensions)中。

**摘要**：您应该只使用`name`以下所列的属性值：

*   [http://www.w3.org/TR/html5/document-metadata.html#standard-metadata-names](http://www.w3.org/TR/html5/document-metadata.html#standard-metadata-names)
*   [http://wiki.whatwg.org/wiki/MetaExtensions#Registered_Extensions](http://wiki.whatwg.org/wiki/MetaExtensions#Registered_Extensions)

* * *

元数据也可以通过其他几种方式给出。

对于`link`,`a`和`area`元素，您可以使用[**链接关系**](http://www.w3.org/TR/html5/links.html#linkTypes)（HTML5 规范的一部分）。

对于内容的语义注释，您可以使用带有适当词汇的[**RDFa**](http://www.w3.org/TR/rdfa-lite/)或[**Microdata 。**](http://www.w3.org/TR/microdata/)

对于一些简单的用例，您可以使用[**Microformats**](http://microformats.org/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T22:11:16.677

元数据可以通过多种方式在不同的级别上指定。元数据的一些来源：

元标记 - [http://www.w3.org/TR/html-markup/meta.name.html](http://www.w3.org/TR/html-markup/meta.name.html)

基本标签 - [http://www.w3.org/TR/html-markup/base.html](http://www.w3.org/TR/html-markup/base.html)

链接标签 - [http://www.w3.org/html/wg/drafts/html/master/links.html#linkTypes](http://www.w3.org/html/wg/drafts/html/master/links.html#linkTypes)

微格式 - [http://microformats.org/wiki/html5](http://microformats.org/wiki/html5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T22:16:55.577

元素`name`属性的有效值的完整列表是[这个 WHATWG wiki 页面](http://wiki.whatwg.org/wiki/MetaExtensions)。如果您谈论的是通用元数据，HTML5 具有内置的[Microdata](http://www.whatwg.org/specs/web-apps/current-work/multipage/microdata.html)扩展选项，请参阅[Schema.org](http://schema.org/docs/schemas.html)了解一些众所周知的结构。`meta`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-30T19:18:51.147

我明白你想问什么。

我通常包括以下元数据。我根据 .netmag 阅读和诸如 stackoverflow 和 ccstricks 等网站来做出这些选择。

```
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="">
<meta charset="UTF-8"> 
```

还有许多其他变化，但这些对我来说很好。

# couchdb - ElasticSearch 和 Couchdb 视图

> ID：15775156
> 
> 赞同：0
> 
> 时间：2013-04-02T21:56:07.533
> 
> 标签：couchdb, elasticsearch

整个 ElasticSearch 和 couchDB 设置的新手。刚刚有一条河流从 ES 流向我在 couchDB 中的数据库。如果我在数据库中有一个视图，有没有办法只索引该视图？例如，我有一个名为“Movies”的数据库和一个名为“Action”的视图和另一个名为“byActor”的视图。

我在想我可以做一个索引并指向它，如下所示，但这似乎不起作用。

```
{
    "type" : "couchdb",
    "couchdb" : {
        "host" : "localhost",
        "port" : 5984,
        "db" : "Movies",
        "filter" : null
    },
    "index" : {
        "index" : "Action",
        "bulk_size" : "100",
        "bulk_timeout" : "10ms"
    }
} 
```

我想我可能不明白索引到底是什么，因为当我运行时`http://localhost:9200/Movies/Action/_search?pretty=true`没有返回任何内容。

**编辑：**环顾四周，这似乎不是这样做的方法。索引似乎只是 ES 索引的方式？无论如何，我正在阅读映射可能会实现这一点。真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:29:49.997

CouchDb River 中还没有索引视图。请参阅此[拉取请求](https://github.com/elasticsearch/elasticsearch-river-couchdb/pull/24)。

# visual-studio - 从 VS 部署报告时出错

> ID：15775158
> 
> 赞同：1
> 
> 时间：2013-04-02T21:56:15.090
> 
> 标签：visual-studio, reporting-services

我尝试将报告从 VS2012 部署到远程服务器，部署时出现错误：

```
"The permissions granted to user 'SERVER\User2' are insufficient for performing this operation." 
```

从其他开发人员机器上部署出色的工作。

问题显然是`User2`没有足够的权限。

从 VS 部署报告时，我通常会弹出窗口，在其中指定用户名和密码。在这种情况下，我没有任何弹出窗口来定义部署用户。

而不是`User2`必须有`User`，但我不知道如何更改它们，看起来用户被保存在某个地方，我没有弹出凭据。

`User`并且`User2`都作为帐户存在于远程服务器上，但`User`具有管理员权限，这是第一个帐户

# ios - Facebook iOS SDK 未调用完成处理程序

> ID：15775160
> 
> 赞同：2
> 
> 时间：2013-04-02T21:56:23.490
> 
> 标签：ios, facebook, facebook-ios-sdk

**问题：**

使用 FB SDK 和 openActiveSessionWithReadPermissions 方法，当应用程序从 Facebook 网络或 Facebook 应用程序重新打开时，完成处理程序似乎不会被调用，并且我得到以下错误输出：

FBSDKLog：从 FBSessionStateCreated 到 FBSessionStateClosed 的 FBSession **INVALID**转换 FBSDKLog：从 FBSessionStateCreated 到 FBSessionStateCreatedOpening 的 FBSession 转换

**语境**

*   使用 Facebook SDK 3.2.1
*   应用程序是为 iOS 5.0+ 构建的
*   使用 xCode 4.6.1
*   在模拟器 iOS 5.1 上测试
*   在 iPhone 4S 上测试，运行 iOS 6.1.2（不使用 6.0 社交框架，因为想要测试 5.0+ 的实现）
*   更新最初为 iOS 3.0 构建的应用程序并使用旧版本的 sharekit，但现在已针对 ARC 进行了更新，并且我相信共享工具包实现已全部被注释掉 - 希望问题不是与旧共享工具包冲突函数，在代码中找不到任何

**为解决而采取的步骤**

搜索整个 Stack Overflow，发现提到的类似问题，但不是解决方案

*   [ios6 facebook 集成登录始终 FBSessionStateClosedLoginFailed 永远不会打开](https://stackoverflow.com/questions/12661104/ios6-facebook-integration-login-always-fbsessionstateclosedloginfailed-never-ope)（我已经实现了 bool：应用程序）
*   [Facebook iOS SDK 3.0 - 会话未打开](https://stackoverflow.com/questions/11991243/latest-facebook-ios-sdk-session-not-open)
*   [Facebook SDK 3.1 - 验证访问令牌时出错](https://stackoverflow.com/questions/12601191/facebook-sdk-3-1-error-validating-access-token)
*   在 FB 设置面板中拥有正确的应用程序包
*   拥有正确的 Facebook 应用程序 ID 是 plist
*   已打开 FB 日志记录 FBSettings setLoggingBehavior

**规格：**

这些是我在应用程序中实现 Facebook 连接所采取的步骤。

*   我采取的第一步是浏览 Facebook 教程：[https](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/) ://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/ 。我得到了第一部分，身份验证部分按预期工作（我按照教程的指示构建了一个单独的应用程序。）
*   然后我在我正在更新的应用程序的教程中采取了相同的步骤，这不起作用
*   然后我按照[https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)上的说明进行操作（与教程非常相似）
*   我又遇到了问题
*   然后花了很多时间寻找解决方案，找不到一个

**代码中的高级步骤：**

*   我在 AppDelegate 中设置了我的 FB 方法
*   在特定的视图控制器中，我有一个按钮，它调用 openSessionWithAllowLoginUI 方法来启动登录过程

**代码**

**AppDelegate.m**

```
- (void)applicationDidFinishLaunching:(UIApplication *)application 
{   
// set up facebook logging
    [FBSettings setLoggingBehavior:[NSSet setWithObjects:FBLoggingBehaviorFBRequests, FBLoggingBehaviorFBURLConnections, FBLoggingBehaviorAccessTokens, FBLoggingBehaviorSessionStateTransitions, nil]];

    // Call the ACAccountStore method renewCredentialsForAccount, which will update the OS's understanding of the token state
    ACAccountStore *accountStore;
    ACAccountType *accountTypeFB;
    if ((accountStore = [[ACAccountStore alloc] init]) &&
        (accountTypeFB = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook] ) ){

        NSArray *fbAccounts = [accountStore accountsWithAccountType:accountTypeFB];
        id account;
        if (fbAccounts && [fbAccounts count] > 0 &&
            (account = [fbAccounts objectAtIndex:0])){

            [accountStore renewCredentialsForAccount:account completion:^(ACAccountCredentialRenewResult renewResult, NSError *error) {
                //we don't actually need to inspect renewResult or error.
                if (error){

                }
            }];
        }
    }

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // We need to properly handle activation of the application with regards to Facebook Login
    // (e.g., returning from iOS 6.0 Login Dialog or from fast app switching).
    NSLog(@"Calling app did become active");
    [FBSession.activeSession handleDidBecomeActive];
}

/*
 * Callback for session changes.
 */
- (void)sessionStateChanged:(FBSession *)session
                      state:(FBSessionState) state
                      error:(NSError *)error
{
    NSLog(@"Session State Changed");

    switch (state) {
        case FBSessionStateOpen:
            if (!error) {
                // We have a valid session
                NSLog(@"User session found");
            }
            break;
        case FBSessionStateClosed:
        case FBSessionStateClosedLoginFailed:
            [FBSession.activeSession closeAndClearTokenInformation];
            break;
        default:
            break;
    }

    [[NSNotificationCenter defaultCenter]
     postNotificationName:FBSessionStateChangedNotification
     object:session];

    if (error) {
        UIAlertView *alertView = [[UIAlertView alloc]
                                  initWithTitle:@"Error"
                                  message:error.localizedDescription
                                  delegate:nil
                                  cancelButtonTitle:@"OK"
                                  otherButtonTitles:nil];
        [alertView show];
    }
}

/*
 * Opens a Facebook session and optionally shows the login UX.
 */
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
    NSLog(@"Openning session with Facebook");
    return [FBSession openActiveSessionWithReadPermissions:nil
                                              allowLoginUI:allowLoginUI
                                         completionHandler:^(FBSession *session,
                                                             FBSessionState state,
                                                             NSError *error) {
                                             [self sessionStateChanged:session
                                                                 state:state
                                                                 error:error];
                                         }];
}

/*
 * If we have a valid session at the time of openURL call, we handle
 * Facebook transitions by passing the url argument to handleOpenURL
 */
- (BOOL)application:(UIApplication *)application
            openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication
         annotation:(id)annotation {
    // attempt to extract a token from the url
    NSLog(@"Calling open URL");
    return [FBSession.activeSession handleOpenURL:url];
}

- (void) closeSession {
    NSLog(@"Clossing Facebook Sessions");
    [FBSession.activeSession closeAndClearTokenInformation];
}

- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url
{
    NSLog(@"handleOpenUrl Called");
    return [FBSession.activeSession handleOpenURL:url];

} 
```

**使用按钮查看控制器**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    // Register for Facebook change notification
    [[NSNotificationCenter defaultCenter]
     addObserver:self
     selector:@selector(sessionStateChanged:)
     name:FBSessionStateChangedNotification
     object:nil];
}

- (IBAction)login:(id)sender {
    ATIAppDelegate *myAppDelegate = (ATIAppDelegate *)[[UIApplication sharedApplication]delegate];
     [myAppDelegate openSessionWithAllowLoginUI:YES];
} 
```

**我认为问题可能是什么？**

*   似乎它可能与令牌有关？
*   或者也许是通知中心？
*   **请注意，在测试期间，我一直在撤销 Facebook 应用程序对我的帐户的访问权限，然后尝试再次登录该应用程序，我发现这些已导致其他用户出现问题**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:54:45.000

好的，我想通了 - 问题与 FB 本身无关，应用程序（我正在更新其他人的代码）在 .plist 中有一个设置 - '应用程序不在后台运行'设置为 true。

这意味着一旦应用程序从 Facebook 应用程序或 Facebook 移动网站重新启动，它就没有准备好处理下一步。

![在此处输入图像描述](https://i.stack.imgur.com/tUsYb.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-09T23:14:23.673

如果您不希望应用程序在后台运行，您可以`FBSDKApplicationDelegate`像这样绑定到 AppDelegate 中的 ：

```
import UIKit
import FBSDKLoginKit

@UIApplicationMain
class AppDelegate: UIResponder, UIApplicationDelegate {

    var window: UIWindow?

    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -> Bool {
        return FBSDKApplicationDelegate.sharedInstance().application(application, didFinishLaunchingWithOptions: launchOptions)
    }

    func applicationWillResignActive(_ application: UIApplication) {
        FBSDKAppEvents.activateApp()
    }

    func application(_ application: UIApplication, open url: URL, sourceApplication: String?, annotation: Any) -> Bool {
        return FBSDKApplicationDelegate.sharedInstance().application(application, open: url, sourceApplication: sourceApplication, annotation: annotation)
    }
} 
```

[https://forums.developer.apple.com/thread/50332](https://forums.developer.apple.com/thread/50332) [http://ashishkakkad.com/tag/fbsdkapplicationdelegate/](http://ashishkakkad.com/tag/fbsdkapplicationdelegate/)

# java - equals() 用于 XOM 元素的子类

> ID：15775164
> 
> 赞同：1
> 
> 时间：2013-04-02T21:56:30.657
> 
> 标签：java, equals, xom

我已经创建了 XOM 的子类，`Element`并希望将它们与容器一起使用，例如`Set`或`HashMap`. 然而，这些都需要一种`equals(Object obj)`方法。我已经实现了一个相等的算法，但不能像`XOM.Node()`声明`equals(Object obj)`的那样使用它`final`。有什么办法可以轻松克服吗？[如果这是唯一的方法，我可以创建一个包装器/委托]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:23:42.247

所有 XOM 节点都有 equals 方法和 hashCode 方法，就像所有 Java 对象一样，将它们与 Set 或 HashMap 等容器一起使用。仅支持身份平等的决定是经过深思熟虑的，这就是为什么 equals 方法是最终的。问题是为什么你需要使用不同的平等概念？例如，如果两个节点看起来相同但位于不同的位置，或者位于不同的文档中，则它们通常被认为是不同的元素。将它们视为相同的用例是什么？

# python - Python循环遍历字典以用另一个字典中的值替换键

> ID：15775166
> 
> 赞同：1
> 
> 时间：2013-04-02T21:56:42.203
> 
> 标签：python, loops, dictionary

我有一本字典，我想将该字典中的所有键更改为另一个字典中的值。

例如：

```
X = {"apple" : 42}

Y = {"apple" : "Apples"} 
```

转换后：

字典`X = {"Apples" : 42}`

```
def convert(items, ID):
    for key, value in items.items():
        for keys, values in ID.items():
            if keys == key:
                key = values
    return items 
```

所以我写了上面的代码来做到这一点，但是在执行这个函数之后，我打印了字典并且键没有改变。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T22:01:46.533

这是因为您正在为局部变量分配新值，而不是为字典键分配新值。

但是，为了获得所需的结果，我建议按照其他人的建议并创建一个新字典，因为您的键与任何现有字典都不对齐：

如果您想这样做，您必须通过字典赋值显式设置值：

```
def convert(X, Y):
    new_dict = {}
    for x_key, x_value in X.items():
        for y_key, y_value in Y.items():
            if x_key == y_key:
                new_dict[y_value] = x_value

    return new_dict 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T22:02:05.600

在您的第一个循环中，您正在迭代这些`(key, value)`对。更改`key`变量的值不会在字典中更新它。

相反，您需要做的是将 重新分配`value`给新的`key`( `values`) 和`del`旧的键。此示例创建一个新副本，因此它不会就地修改 dict。我还删除了 inner `for loop`，因为在 python 中，您只需检查键是否在 dict 中，而无需使用`if key in dictionary`.

```
def convert(items, id):
    new_dict = items.copy()
    for key, value in items.items():
        if key in id:
            new_key = id[key]
            new_dict[new_key] = items[key] # Copy the value
            del new_dict[key]
    return new_dict 
```

示例 ipython 会话：

```
In [1]: items = {'apple': 42, 'orange': 17}

In [2]: new_keys = {'apple': 'banana', 'orange': 'tangerine'}

In [3]: def convert(items, ID):
            ...

In [13]: convert(items, new_keys)
Out[13]: {'banana': 42, 'tangerine': 17} # Updated dict returned

In [14]: items
Out[14]: {'apple': 42, 'orange': 17} # Original dict stays untouched 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T22:04:35.093

当您调用 时`items.items()`，您正在创建字典`(key, value)`对的副本。

因此，当您更改 的值时`key`，您更改的是副本的值，而不是原始值。

```
def convert(items, ID):
    for key, value in items.items():
        for keys, values in ID.items():
            if keys == key:
                items[key] = values
    return items 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T22:09:30.730

您是否有理由需要修改现有字典而不仅仅是创建新字典？

要通过创建新字典来完成相同的任务，请尝试以下操作：

```
def convert(items, ID):
    result = {}
    for key, value in items.items():
        if key in ID.keys():
            result[ID[key]] = value
        else:
            result[key] = value
    return result 
```

如果您确实想修改原始字典，无论如何您都需要创建一个临时的新字典，然后用新字典的内容填充原始字典，如下所示

```
def convert(items, ID):
    result = {}
    for key, value in items.items():
        if key in ID.keys():
            result[ID[key]] = value
        else:
            result[key] = value
    items.clear()
    for key, value in result.items():
        items[key] = value
    return items 
```

如果您不这样做，那么您必须担心覆盖值，即您尝试将键重命名为已经存在的内容。这是我的意思的一个例子：

```
items = {"apples": 10, "bananas": 15}
ID = {"apples": "bananas", "bananas": "oranges"}
convert(items, ID)
print items 
```

我假设你想要的行为是以`{"bananas": 10, "oranges": 15}`. 如果它首先重命名`"apples"`为`"bananas"`怎么办？然后你有`{"bananas": 10}`，这将成为`{"oranges": 10}`。

最糟糕的是，它完全取决于 python 遍历键的顺序，这取决于您首先添加它们的顺序。如果这在未来的 python 版本中发生了变化，那么你的程序的行为可能会改变，这是你绝对想要避免的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T22:24:49.363

# 方法

使用集合交集计算共享密钥。

# 2.7 之前的代码

```
def convert(items, ID):
    # Find the shared keys
    dst, src = set(items.keys()), set(ID.keys())
    same_keys, diff_keys = dst.intersection(src), dst.difference(src)
    # Make a new dictionary using the shared keys
    new_values = [(ID[key], items[key]) for key in same_keys]
    old_values = [(key, items[key]) for key in diff_keys]
    return dict(new_values + old_values) 
```

# 2.7+ 的代码

```
def convert(items, ID):
    # Find the shared keys
    dst, src = set(items.keys()), set(ID.keys())
    same_keys, diff_keys = dst.intersection(src), dst.difference(src)
    # Make a new dictionary using the shared keys
    new_values = {ID[key]: items[key] for key in same_keys}
    old_values = {key: items[key] for key in diff_keys}
    return reduce(lambda dst, src: dst.update(src) or dst, [new_values, old_values], {}) 
```

# 2.7 之前的测试

```
>>> def convert(items, ID):
...     # Find the shared keys
...     dst, src = set(items.keys()), set(ID.keys())
...     same_keys, diff_keys = dst.intersection(src), dst.difference(src)
...     # Make a new dictionary using the shared keys
...     new_values = [(ID[key], items[key]) for key in same_keys]
...     old_values = [(key, items[key]) for key in diff_keys]
...     return dict(new_values + old_values)
... 
>>> convert({"apple" : 42, "pear": 38}, {"apple" : "Apples", "peach": 31})
{'pear': 38, 'Apples': 42} 
```

# 测试 2.7+

```
>>> def convert(items, ID):
...     # Find the shared keys
...     dst, src = set(items.keys()), set(ID.keys())
...     same_keys, diff_keys = dst.intersection(src), dst.difference(src)
...     # Make a new dictionary using the shared keys
...     new_values = {ID[key]: items[key] for key in same_keys}
...     old_values = {key: items[key] for key in diff_keys}
...     return reduce(lambda dst, src: dst.update(src) or dst, [new_values, old_values], {})
... 
>>> convert({"apple" : 42, "pear": 38}, {"apple" : "Apples", "peach": 31})
{'pear': 38, 'Apples': 42} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T19:39:35.333

您的问题是您在字典或其键和值的新本地副本中工作

如果问题是返回一个新字典，这将在一行中工作

```
def convert(x,y):
    return dict( (y.get(k,k), x[k]) for k in x )
x={'a':10, 'b':5}
y={'a':'A'}
print convert(x,y) 
```

在 python 2.7+ 中你甚至可以

```
def convert(x,y):
     return { y.get(k,k): x[k] for k in x } 
```

但是如果你想在同一个输入字典中工作，那么

```
def convert(x,y):
     r={ y.get(k,k): x[k] for k in x }
     for k in x.keys(): del x[k]
     x.update(r)

x={'a':10, 'b':5}
y={'a':'A'}
convert(x,y)
print x 
```

# web-services - 在 Web 服务和客户端之间同步数据的现代编程标准是什么？

> ID：15775171
> 
> 赞同：4
> 
> 时间：2013-04-02T21:57:04.530
> 
> 标签：web-services, rest, synchronization, sync, data-synchronization

这个问题有点笼统，所以为了帮助缩小焦点，我将分享我目前激发这个问题的设置。我有一个运行 RESTful API 的 LAMP Web 服务。我们有两种客户端实现：一种基于浏览器的 javascript 客户端（本地存储存储）和一种基于 iOS 的客户端（核心数据存储）。显然这两个客户端存储数据的方式非常不同，但数据本身需要尽可能多地与远程服务器保持双向同步。

目前，我们的“同步”过程有点愚蠢（例如，非智能）。从概念上讲，它看起来像：

*   客户端定期向服务器询问所有最新数据。
*   服务器发送远程数据，这会覆盖客户端存储中的当前本地数据集。
*   在此之后的任何本地创建/更新/删除都被视为黄金，并立即发送到服务器。

数据本身以相关方式存储，并由客户端用户偶尔更新。在我的具体案例中，客户端并不太关心关系本身（这就是我们现在可以在浏览器客户端中使用本地存储的原因）。

显然这不是真正的同步。我想转移到一个系统，从概念上讲，最近更改的“差异”会定期发送到服务器，服务器会发回它知道的最新更改的“差异”。似乎很难达到这一点，但也许我只是不太了解这个问题。

[REST](https://en.wikipedia.org/wiki/Representational_state_transfer)感觉是一个好的开始，但 REST 只讨论两个数据存储相互通信的方式，而不是数据本身如何在它们之间同步。（这个同步过程由每个商店的实现者决定。）实现这个过程的最佳方式是什么？是否有一套现代的编程设计模式适用于为这个问题提供特定的解决方案？如果可能的话，我最感兴趣的是一种通用的（与技术无关的）方法......但是如果存在特定的框架，它们也会很有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T01:59:49.707

多主复制总是（并且永远是）困难和定制的，因为如何处理冲突将取决于您的应用程序。

IMO 一种更强大的方法是使用主从复制，您的 Web 服务作为主服务器，客户端作为从服务器。要使客户端保持同步，请根据[RFC5005使用更改的归档原子源（请参阅](https://www.rfc-editor.org/rfc/rfc5005#section-4)[事件源）](http://martinfowler.com/eaaDev/EventSourcing.html)。对于这种类型的复制，这是最接近现代标准的，它是 RESTful 的。

当客户端在线时，他们不会直接更新他们的副本，而是向服务器发送命令并通过 atom 提要更新他们的副本。

当客户离线时，事情变得困难。您的客户需要有一个关于您的 Web 服务行为方式的模型。它将需要您的副本的离线副本，该副本应[在写入](http://en.wikipedia.org/wiki/Copy-on-write)时从在线副本复制（在线副本是由 atom 提要更新的副本）。当客户端执行修改数据的命令时，它应该存储命令（用于稍后针对 Web 服务重放）、预期结果（用于重放期间的验证）并更新离线副本。

当客户端重新上线时，它应该重播命令，将结果与预期结果进行比较，并通知客户端任何差异。如何处理这些差异将根据您的应用程序而有所不同。然后可以丢弃脱机副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T22:57:57.400

CouchDB 复制通过 HTTP 工作并执行您想要执行的操作。一旦数据库在任一端同步，它将发送添加/更新/删除的差异。

Couch 可以使用其他 Couch 机器或使用 TouchDB 等移动框架来执行此操作。

[https://github.com/couchbaselabs/TouchDB-iOS](https://github.com/couchbaselabs/TouchDB-iOS)

我已经完成了相当多的工作，但您始终可以在一台机器上设置 CouchDB，在移动设备上设置 TouchDB，然后观察 HTTP 流量来回传输以了解它们是如何做到的。

或阅读： http: [//guide.couchdb.org/draft/replication.html](http://guide.couchdb.org/draft/replication.html)

也许上面链接中的某些内容将帮助您了解如何为您的 REST 服务做自己的差异。（因为它们都通过 HTTP 认为它可能很有用。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T17:49:58.903

您可能需要查看 Dropbox Datastore API：

[https://www.dropbox.com/developers/datastore](https://www.dropbox.com/developers/datastore)

听起来它可能非常适合您的目的。他们有 iOS 和 javascript 客户端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-19T19:43:16.800

最近，我对[Meteor](http://www.meteor.com/)很感兴趣。

该平台在服务器上设置[Mongo](http://www.mongodb.com/)，在浏览器中设置 minimongo。客户端订阅了一些数据，当数据发生变化时，平台会自动将新数据发送给客户端。

这是同步问题的一个巧妙解决方案，它也解决了其他几个问题。看看未来是否会有更多平台这样做会很有趣。

# c - 保护分配的内存

> ID：15775178
> 
> 赞同：3
> 
> 时间：2013-04-02T21:57:50.060
> 
> 标签：c, memory, malloc, mprotect

我需要动态分配一些内存部分，每个部分都有一些保护 - RW 或 RX。

我试图通过分配内存`malloc`，但`mprotect`总是返回`-1 Invalid argument`。

我的示例代码：

```
void *x = malloc(getpagesize());
mprotect(x, getpagesize(), PROT_READ); // returns -1, it;s sample, so only R, not RW or RX 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T22:04:32.653

> mprotect() 更改调用进程的内存页的保护，该内存页包含区间 [addr, addr+len-1] 中的地址范围的任何部分。addr 必须与页面边界对齐

这里的最后一部分很重要。malloc 可能不会仅仅因为您请求页面的大小而为您提供页面对齐的内存，因此您必须分配合适的内存块并对其进行对齐，或者使用例如[posix_memalign](http://man7.org/linux/man-pages/man3/posix_memalign.3.html) ()分配页面对齐的内存

如果 mprotect() 失败，您还应该检查 errno，以了解有关失败原因的更多信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T22:09:33.490

如果要分配一页内存，正确的选择大概是使用`mmap()`

```
void *x = mmap(NULL, getpagesize(), PROT_READ | PROT_WRITE, MAP_ANONYMOUS | MAP_SHARED, -1, 0); 
```

请注意，由于您将权限传递给调用，因此您以后真的不需要使用`mprotect()`。但是，您可以稍后使用它来更改权限，当然，就像您想在页面只读之前将一些数据加载到页面中一样。您可以稍后使用`munmap()`.

因为这是一个匿名映射，所以没有使用支持文件，所以它的行为很像`malloc()`在这个意义上。

# git - Git - 每个分支的不同远程

> ID：15775183
> 
> 赞同：46
> 
> 时间：2013-04-02T21:58:28.227
> 
> 标签：git, github, merge, git-branch, git-merge

我不确定如何正确地提出这个问题，但我会尽力而为——我绝不是 Git 爱好者，我知道*如何*使用基本命令，但不知道如何使用高级术语/功能。

我有一个`myrepo`从私人服务器克隆的私人存储库`git.mydomain.com`。我熟悉在同一个存储库上分支代码的过程`git checkout -b mybranch`- 但是我想分支到 GitHub 而不是我的私人服务器，结果是这样的：

```
Repo       Branch      Remote Location    (Purpose)
------------------------------------------------------------
myrepo --> private --> git.mydomain.com  (Incremental work)
  |
  +------> public  --> github.com        (Public releases) 
```

本质上，我希望能够`git checkout public`和`git merge private`.

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-02T22:11:17.410

您可以使用以下命令设置不同的分支以将各个分支推送到不同的服务器：

**从 Git 1.8.0 开始：**

```
git branch --set-upstream-to origin/foo foo 
```

注意：如果最后一个`foo`被遗漏，它将选择当前分支。

**从 Git 1.7.0 开始：**

```
git branch --set-upstream foo origin/foo 
```

在您的情况下，您可以通过添加两个遥控器（mydomain 和 github）并将每个分支设置为单独推送到它们来使用它。它可能看起来像这样：

如果您还没有添加遥控器，请确保添加：

```
git remote add github git://github.com/foo/myrepo.git
git remote add mydomain git://git.mydomain.com/foo/myrepo.git 
```

然后将分支设置为推送到正确的位置：

```
git branch --set-upstream-to mydomain/private private
git branch --set-upstream-to github/public public 
```

`git push`设置完成后，您只需使用and即可推拉`git pull`。当您在公共分支上时，这将推送和拉取到 github，当您在私有分支上时，这将推送到您的 mydomain.com。

# google-chrome-app - 如何让 Chrome 应用尽快更新？

> ID：15775187
> 
> 赞同：16
> 
> 时间：2013-04-02T21:59:05.113
> 
> 标签：google-chrome-app

部署 chrome 打包的应用程序并在 chrome 网上商店发布更新允许用户自动接收应用程序更新。在某些情况下，您想知道正在运行的应用程序是否是最新的，并对其进行更新。例如：

*   只是让用户使用最新版本。
*   检测应用程序和服务器端 API 之间的不匹配，并要求客户端应用程序更新以使用新的服务器端 API。

[chrome.runtime.requestUpdateCheck()](http://developer.chrome.com/apps/runtime.html#method-requestUpdateCheck)的文档提供了 , , 的状态，`"throttled"`但没有说明如果需要更新版本该怎么做。`"no_update"``"update_available"`

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-05T19:31:10.880

安装一个监听器`chrome.runtime.onUpdateAvailable`，当新的 .crx 文件已经下载并且新版本准备好安装时触发。然后，调用`chrome.runtime.requestUpdateCheck`：

```
chrome.runtime.onUpdateAvailable.addListener(function(details) {
  console.log("updating to version " + details.version);
  chrome.runtime.reload();
});

chrome.runtime.requestUpdateCheck(function(status) {
  if (status == "update_available") {
    console.log("update pending...");
  } else if (status == "no_update") {
    console.log("no update found");
  } else if (status == "throttled") {
    console.log("Oops, I'm asking too frequently - I need to back off.");
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-08T20:38:54.643

根据您的应用程序，当检测到更新时，您可能需要使用类似`setTimeout`和调用`chrome.runtime.restart()`或`chrome.runtime.restart()`稍后

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-26T17:51:15.597

根据您需要的 Google Chrome 文档

```
chrome.runtime.onUpdateAvailable.addListener(function(details) {
  chrome.runtime.reload(); // To restart the chrome App instantaneously
}); 
```

但这需要时间将 JS 更改反映到 chrome 中，因为 background.js 已加载到后台，需要卸载并再次加载

要应对这种情况，您需要包括

```
chrome.runtime.onInstalled.addListener(function(details) {
  chrome.runtime.reload();
}); 
```

还有。

每当第一次安装谷歌扩展（全新安装）、谷歌扩展更新或谷歌浏览器更新时，都会调用 onInstalled。

# javascript - 如果在原型上定义了 Underscore.js defaults() 会设置属性吗？

> ID：15775188
> 
> 赞同：-1
> 
> 时间：2013-04-02T21:59:05.730
> 
> 标签：javascript, prototype, underscore.js

创建对象`m`，原型`n`在哪里： `m``n`

```
var m, n;

m = {beep: 'boop'};
n = Object.create(m); 
```

`n.beep`是`'boop'`因为它设置在原型上`m`。

`_(n).has('beep')`是`false`因为它不是“自己的”财产。

现在，如果我们默认`n.beep`为`'blip'`：

```
_.defaults(n, {beep: 'blip'}); 
```

它会粘住吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:59:05.730

号`n.beep`还在`'boop'`。 [摆弄它](http://jsfiddle.net/EFEwg/embedded/)或检查带[注释的来源](http://underscorejs.org/docs/underscore.html#section-79)。

# web-services - 让 Windows 客户端动态更改其 Web 服务端点 - WSDL 的问题

> ID：15775190
> 
> 赞同：1
> 
> 时间：2013-04-02T21:59:13.877
> 
> 标签：web-services, soap, wsdl, webservice-client, service-reference

# jquery - Flash MultiPowUploader - Triggering the Upload Button When Invisible?

> ID：15775191
> 
> 赞同：0
> 
> 时间：2013-04-02T21:59:20.623
> 
> 标签：jquery, flash, multifile-uploader

I am using ElementIT's MultiPowUpload v3.3 and I have the standalone, Flash portion working. My problem is when I make the upload button invisible and need to trigger the upload via a standard form element button.

```
<form id="myform" name="myform" action="" method="post">
<select name="menu" MULTIPLE size="2">
<option value="1">some menu item 1</option>
<option value="2">some menu item 2</option>
</select>
<input name="text" type="text" value="some text">
<input type="hidden" name="hdn_frm_submit" id="hdn_frm_submit" value="Upload Files" />
<input type="submit" name="btn_sub" value="Submit Form">

<div id="MultiPowUpload_holder"></div>

<script type="text/javascript" src="Extra/swfobject.js"></script>
<script type="text/javascript">
var params = {  
    BGColor: "#FFFFFF"
};

var attributes = {  
    id: "MultiPowUpload",  
    name: "MultiPowUpload"
};

//MultiPowUpload partameters goes here
var flashvars = {       
  "serialNumber": "MY_SERIAL_NUMBER_INSERTED_HERE",
  "uploadUrl": "insert_the_processing_page_here",
  "formName": "myform",
      "uploadButton.visible": "false",
  "uploadButton.action": "2",
  "useExternalInterface": "true"
};
//Default MultiPowUpload should have minimum width=400 and minimum height=180
swfobject.embedSWF("ElementITMultiPowUpload.swf", "MultiPowUpload_holder", "400", "250", "10.0.0", "Extra/expressInstall.swf", flashvars, params, attributes);
</script>
</form> 
```

I have jQuery available on the page so I will place the Submit button click handler in the doc.ready section. How do I address the Flash uploader's Upload button with jQuery? Any feedback will be greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:10:54.810

您可以使用`ExternalInterface`
[http://www.element-it.com/OnlineHelpMulti/MultiPowUpload_Manual_HTML/tutorial.html#javaScript](http://www.element-it.com/OnlineHelpMulti/MultiPowUpload_Manual_HTML/tutorial.html#javaScript)

可能您正在寻找`uploadAll`方法
[http://www.element-it.com/OnlineHelpMulti/Methods.html#uploadAll](http://www.element-it.com/OnlineHelpMulti/Methods.html#uploadAll)

您需要添加到示例中的代码将是：

```
<script>
   $(document).ready(function () {
     $("#btn_sub").click(function() {
       $("#MultiPowUpload").uploadAll("uploadfiles.aspx");
     });
   });
</script> 
```

但您还需要将按钮类型从更改`submit`为`button`以防止从 html 提交表单。

```
<input type="button" name="btn_sub" value="Upload Files"> 
```

我使用了这个文档：
[http://api.jquery.com/ready/](http://api.jquery.com/ready/)
[http://api.jquery.com/click/](http://api.jquery.com/click/)
[http://api.jquery.com/id-selector/](http://api.jquery.com/id-selector/)

# php - 我正在尝试在页面上使用 id 抓取特定的 div

> ID：15775192
> 
> 赞同：3
> 
> 时间：2013-04-02T21:59:22.980
> 
> 标签：php, domdocument, web-scraping

我想抓取页面的内容，实际上只是该页面中的一个 div，并将其显示给网页上的一个小 div 内的用户。我只需要来自需要用户凭据的 carfax 页面的一条信息，因此我无法发布确切的代码，但我尝试使用 google.com 并遇到同样的问题，因此解决方案应该交叉。

现在我已经尝试过了：

```
$webPage = file_get_contents('http://www.google.com');
$doc = new DOMDocument();
$doc->loadHTML($webPage);
$div = $doc->getElementById('lga');//this is the id to the div holding the image above the textbox
//echo $webPage;//this displays www.google.com minus the image. I imagine because of the file path
//var_dump($div);//this display "object(DOMElement)#2 (0) { }" and I'm not sure what that means
//echo $div;//this has a server error 
```

我也在查看 simple_html_dom.php 试图弄清楚这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T22:13:44.517

你可以使用这个：

```
/**
 * Downloads a web page from $url, selects the the element by $id
 * and returns it's xml string representation.
 */
function getElementByIdAsString($url, $id, $pretty = true) {
    $doc = new DOMDocument();
    @$doc->loadHTMLFile($url);

    if(!$doc) {
        throw new Exception("Failed to load $url");
    }

    // Obtain the element
    $element = $doc->getElementById($id);

    if(!$element) {
        throw new Exception("An element with id $id was not found");
    }

    if($pretty) {
        $doc->formatOutput = true;
    }

    // Return the string representation of the element
    return $doc->saveXML($element);
}

// call it:
echo getElementByIdAsString('http://www.google.com', 'lga'); 
```

# mysql - 高效的 DB2 查询分页并显示总页数？

> ID：15775198
> 
> 赞同：1
> 
> 时间：2013-04-02T21:59:44.700
> 
> 标签：mysql, performance, pagination, db2, resultset

这篇文章展示了一些从 DB2 中分页数据的技巧：

[如何以最高性能查询 DB2 中的数据范围？](https://stackoverflow.com/questions/265850/how-to-query-range-of-data-in-db2-with-highest-performance)

但是它没有提供显示总行数的方法（如 MySQL 的 CALC_FOUND_ROWS）。

```
SELECT SQL_CALC_FOUND_ROWS thread_id AS id, name, email
FROM threads WHERE email IS NOT NULL
LIMIT 20 OFFSET 200 
```

在 MySQL 中，我可以跟进

```
SELECT FOUND_ROWS() 
```

获取总行数。第一部分很容易复制到最新版本的 DB2 中。我在 Google 上找不到任何与第二个查询相当的结果（我不想要临时表、子查询或其他效率低下的荒谬解决方案）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:24:11.307

我认为这在 DB2 中不存在。

请注意，总行数是一个需要额外计算才能获得的值。它不只是躺在某个地方——它必须专门构建到`LIMIT`逻辑中。看起来不像他们那样。

# javascript - 从 node.js 消息调用 Windows API

> ID：15775201
> 
> 赞同：9
> 
> 时间：2013-04-02T21:59:48.680
> 
> 标签：javascript, node.js, winapi

我是 Node 的新手，我有这个简单的 Node.js 服务器可以在 Windows 上运行

服务器代码

```
var ws = require("websocket-server");

var server = ws.createServer();

server.addListener("connection", function(client){
    console.log("new connection");
    client.send("aaaaaa");
    client.addListener("message", function(msg){
        console.log(msg);
    });
});

server.listen(8080); 
```

我只想调用 Windows API insted of line

```
console.log(msg); 
```

有没有办法在不使用外部库的情况下做到这一点

有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-02T22:07:57.957

我认为[node-ffi](https://github.com/rbranson/node-ffi)可以帮助你做到这一点。`node-ffi`提供加载和调用动态库的功能。通过`node-ffi`您可以访问`user32`（例如）lib 并从 node.js 调用它们的函数。

```
var FFI = require('node-ffi');

function TEXT(text){
   return new Buffer(text, 'ucs2').toString('binary');
}

var user32 = new FFI.Library('user32', {
   'MessageBoxW': [
      'int32', [ 'int32', 'string', 'string', 'int32' ]
   ]
});

var OK_or_Cancel = user32.MessageBoxW(
   0, TEXT('I am Node.JS!'), TEXT('Hello, World!'), 1
); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-10-13T18:58:51.373

我不想编辑@Vadim 的答案，因为它已被接受，但我认为该包已重命名为“ [ffi](https://www.npmjs.com/package/ffi) ”。这对我有用：

```
npm install -s ffi 
```

并使用@Vadim 的源，但将包名称更改为`ffi`：

```
var FFI = require('ffi');

function TEXT(text){
   return new Buffer(text, 'ucs2').toString('binary');
}

var user32 = new FFI.Library('user32', {
   'MessageBoxW': [
      'int32', [ 'int32', 'string', 'string', 'int32' ]
   ]
});

var OK_or_Cancel = user32.MessageBoxW(
   0, TEXT('I am Node.JS!'), TEXT('Hello, World!'), 1
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-13T09:56:24.350

您还可以使用这个 NPM 包，它已经输入了（大部分）Win32 API（使用 ffi）并准备好从 NodeJS 使用：[https ://github.com/waitingsong/node-win32-api](https://github.com/waitingsong/node-win32-api)

# lisp - Common Lisp中&rest参数和列表的区别

> ID：15775215
> 
> 赞同：2
> 
> 时间：2013-04-02T22:01:04.710
> 
> 标签：lisp, common-lisp

```
(defun highest (lat)
    (cond
        ((null lat) nil)
        ((null (cdr lat)) (car lat))
        (T (higher (car lat) (highest (cdr lat))))))

(defun higher (a1 a2)
    (cond
        ((> a1 a2) a1)
        (T a2))) 
```

此功能按预期工作：

```
> (highest '(3 5 1 2 3))    
3\. Trace: (HIGHEST '(3 5 1 2 3))
4\. Trace: (HIGHEST '(5 1 2 3))
5\. Trace: (HIGHEST '(1 2 3))
6\. Trace: (HIGHEST '(2 3))
7\. Trace: (HIGHEST '(3))
7\. Trace: HIGHEST ==> 3    
6\. Trace: HIGHEST ==> 3
5\. Trace: HIGHEST ==> 3
4\. Trace: HIGHEST ==> 5    
3\. Trace: HIGHEST ==> 5 
```

但是，如果我将参数更改为`&rest`：

```
(defun highest (&rest args)
    (cond
        ((null args) nil)
        ((null (cdr args)) (car args))
        (T (higher (car args) (highest (cdr args)))))) 
```

它的行为不一样。

```
> (highest 3 5 1 2 3)
3\. Trace: (HIGHEST '3 '5 '1 '2 '3)
4\. Trace: (HIGHEST '(5 1 2 3))
4\. Trace: HIGHEST ==> (5 1 2 3)
*** - >: (5 1 2 3) is not a real number 
```

编辑：对不起，我忘了提到在第二种情况下我将参数传递给原子。我编辑了问题以使其更清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T22:25:17.703

在调用（最高 3 2 10）之前尝试评估（跟踪最高）。然后你会看到第二个调用看起来像这样： (highest '(2 10)) 然后 &rest 参数看到一个对象，它恰好是一个列表。

要更正此问题，请使用 APPLY。APPLY 类似于​​ funcall，但它的最后一个参数必须是一个列表，并且被视为“拼接到”函数调用上。像这样：（应用#'highest（cdr args））

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T22:11:48.037

该`&rest`表单收集作为列表本身传递的所有其余参数。在 的情况下`highest (&rest args)`，`args`实际上是一个带有元素的列表，一个列表。也就是说，在调用中，`args`值为`((3 2 10))`。

`highest`with修饰符的第二个版本`&rest`总是进入条件的第二个测试，`args`就像一个只有一个元素的列表（恰好是一个列表）。您返回 的第一个元素`args`，即列表本身，`(3 2 10)`。

两种构造的不同之处在于，在第一个版本中，您将列表作为参数传递，函数接收列表作为函数的唯一参数。在 的情况下`&rest`，所有参数（在这种情况下只有一个）被收集到一个列表中（在这种情况下只有一个元素）。

**编辑**：根据您的编辑，正如托马斯在他的评论中所说，使用`&rest`意味着您必须使用`apply`递归调用。这是正确的实现：

```
(defun highest (&rest args)
    (cond
        ((null args) nil)
        ((null (cdr args)) (car args))
        (T (higher (car args) (apply #'highest (cdr args)))))) 
```

（注意`apply`最后一行的）。

# php - 如何构建一个创建 xml 站点地图的控制器？

> ID：15775218
> 
> 赞同：1
> 
> 时间：2013-04-02T22:01:25.213
> 
> 标签：php, xml, codeigniter, sitemap.xml

我知道这个问题可能看起来令人困惑和/或重复的问题。我已经搜索了以前的问题，但找不到适合我情况的问题。

我正在使用 Codeigniter。我的老板要求我构建一个控制器（或者如果可能的话，用 php 编写一个应用程序）来为站点自动生成一个 sitemap.xml。站点地图应遵循以下结构：

```
<url>
  <loc></loc>
  <changefreq></changefreq>
</url> 
```

它还应该包括不在网络上但在数据库上的信息。我对此感到困惑，因为据我所知，站点地图是基于该站点的链接。（再说一次，我对 xml 一无所知，所以这是我所有困惑的原因）。

例如，网站的一部分有一个“新闻源”，它显示了数据库中最新的 5 条新闻。我的老板想要的是将旧新闻也编入索引。

我应该指出，该站点使用两个不同的数据库。一个用于新闻源上的新闻，另一个用于站点中的其他产品。（每个产品都有自己的链接，有些产品不仅在数据库上，而且我的老板希望这些产品在站点地图上）。

任何关于如何做到这一点的想法将不胜感激，因为我不知道从哪里开始。

谢谢你的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:08:30.757

这就是结构：您创建一个函数来检查 a) sitemap.xml 是否不存在或 b) 从创建已经存在的文件开始是否经过了一定的时间。

如果 a) 或 b) 创建一个新文件 sitemap.xml。这总是这样开始：

```
$xml_data = '   <?xml version="1.0" encoding="UTF-8"?>  ';
$xml_data .= '  <urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" ';
$xml_data .= '  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   ';
$xml_data .= '  xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd">   '; 
```

然后从数据库中查询您想要包含到站点地图中的每个帖子和页面。您使用一个循环，包括：

```
$xml_data .= '  <url><loc>'.$_SERVER['SERVER_NAME'].'/'.$recLink.'</loc>    ';
$xml_data .= '  <lastmod>'.$recDate.'</lastmod> ';
$xml_data .= '  <changefreq>daily</changefreq>  ';
$xml_data .= '  <priority>1.00</priority></url> ';
}
$xml_data .= ' </urlset> '; 
```

最后，编写并保存文件：

```
$fh = fopen($file,'w');
fwrite($fh, ltrim($xml_data));
fclose($fh); 
```

不要忘记调整您的代码。这不是复制和粘贴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T22:23:16.813

除了此处的其他答案之外，鉴于许多搜索引擎会查找在您网站的根目录中`xml`命名的文件。`sitemap.xml`您可以有一个路由，将该 url 映射到将生成它的控制器。

```
$route['sitemap.xml'] = 'sitemap_controller/generate_method'; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T22:19:08.510

您可能对这个现有的用于生成 XML 站点地图的 Code Ignighter 库感兴趣。

[http://www.mikesimagination.net/blog/post/29-Aug-12/Codeigniter-auto-XML-sitemap](http://www.mikesimagination.net/blog/post/29-Aug-12/Codeigniter-auto-XML-sitemap)

修改此现有代码可能比开发自己的代码更好/更快。

# java - 使用 Java 将 HDFS 文件拆分为多个本地文件

> ID：15775223
> 
> 赞同：0
> 
> 时间：2013-04-02T22:01:50.453
> 
> 标签：java, hadoop

我必须使用 Java 代码将 HDFS 文件复制到本地文件系统中，然后再写入磁盘，然后拆分为多个部分。使用 snappy / lzo 压缩文件。我使用 Bufferedreader 和 Filewriter 来读取和写入文件。但是这个操作很慢。30 GB 文件需要 20 分钟。我可以在 2 分钟内使用 hadoop fs -text 转储文件（但不能拆分它）。我还能做些什么来加快操作速度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T02:57:29.290

由于我有两个通过，首先要获得行数，然后是拆分。hadoop fs -text 是 CPU 密集型的。是否采用以下方法：

1) 使用行数 Java 程序作为 Map reduce 来获取文件中的行数。然后将它除以我需要的文件总数，我得到了要写入每个文件的行数。

2) 使用这个链接提到的代码和 hadoop fs -text

[https://superuser.com/a/485602/220236](https://superuser.com/a/485602/220236)

希望它可以帮助别人。

# google-analytics - Reading Google Universal Analytics fields in JavaScript

> ID：15775226
> 
> 赞同：0
> 
> 时间：2013-04-02T22:01:59.807
> 
> 标签：google-analytics

I know I can override certain default values in Universal Analytics analytics.js:

[https://developers.google.com/analytics/devguides/collection/analyticsjs/pages#overriding](https://developers.google.com/analytics/devguides/collection/analyticsjs/pages#overriding)

but how would I go about reading Google's default values in to my own JavaScript?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:49:39.600

全部覆盖在这里：

[https://developers.google.com/analytics/devguides/collection/analyticsjs/method-reference#get](https://developers.google.com/analytics/devguides/collection/analyticsjs/method-reference#get)

但看起来您只能检索已经手动设置的字段，而不是默认值。

# web-services - Are the terms "click url" and "click through url" interchangeable?

> ID：15775230
> 
> 赞同：1
> 
> 时间：2013-04-02T22:02:10.830
> 
> 标签：web-services, ads, advertisement-server

Simple question... What's the answer?

I've been reading up on creating an ad serving service and I see different usages of these two terms. Some make it seem that the two terms are the same, some make me think that they are somehow distinct.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:14:07.580

“单击 URL” 给我的印象是，当我单击 URL 时，我将看到我的目的地（页面）。

其中，“Cick Through Url”给我的印象是我会点击链接，然后会出现广告或某种形式的营销（某种形式），然后会显示我的目的地（页面）。

# javascript - 根据窗口大小重新调整文本区域的大小

> ID：15775236
> 
> 赞同：1
> 
> 时间：2013-04-02T22:02:43.010
> 
> 标签：javascript

我在弹出窗口中有最大化按钮，并且我有一个文本区域并且想根据最大化窗口来重新调整它的大小。下面是打开弹窗的代码

```
var url = "mypopup.do" + params;
var modalprops = "height=310px,width=400px,scrollbars=yes,status=no,menubar=no,resizable=yes";
window.open(url, 'winName', modalprops, false); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T22:07:11.283

给它一个百分比相对宽度，如下所示：

```
<textarea style="width:100%"></textarea> 
```

当浏览器调整大小时，这应该在没有 javascript 的情况下调整它的大小。

**编辑**：如果您在 textarea 的 css 上设置*宽度*和*高度，它们都会被编辑：*

```
<div style="width:40%;height:40%">
    <textarea style="width:100%; height:100%;"></textarea>
</div> 
```

这将在 div 和底层弹出窗口内相应地调整 textarea 的大小。

**jsBin**：http: [//jsbin.com/odukur/1/](http://jsbin.com/odukur/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T22:12:22.603

如果您需要在 Hanlet Escaño 的方法（这很棒）之外进行微调，并且您可以使用 jQuery，我建议您按照[此处](https://stackoverflow.com/questions/3044573/using-jquery-to-get-size-of-viewport)`resize()`概述的一般方法使用该函数来获取窗口的大小并调整窗口的高度和宽度你的相应。`textarea`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-27T03:21:01.133

你是这个意思吗？

```
<div>
    <textarea id='debug'></textarea>
    <button>Resize</button>
    <textarea id='test'>some words</textarea>
</div> 
```

jQuery

```
 $("button").click(function () {
    var viewportWidth = $(window).width() - 50; // -50 only want to show beacutiful >3
    var viewportHeight = $(window).height() - 90;
    $('#test').height(viewportHeight);
    $('#test').width(viewportWidth);
    $('#debug').text(viewportWidth + ':' + viewportHeight);
}); 
```

更改“结果”窗口，然后单击按钮，您会发现 textarea 已调整大小。

代码很简单，我想它可能会启发你。

感谢 Moch Daear 的提示。

# joomla - 是否可以将 Recaptcha Joomla 插件用于自定义页面？

> ID：15775240
> 
> 赞同：0
> 
> 时间：2013-04-02T22:02:49.573
> 
> 标签：joomla, joomla2.5, joomla-extensions

查看[文档](http://docs.joomla.org/How_do_you_use_Recaptcha_in_Joomla_2.5?)，似乎只能用于注册和联系页面。我想在 iJoomla 调查中添加验证码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:07:04.067

是与否，这取决于组件的开发方式。
如果它支持“标准”joomla 验证系统（您可以在配置页面中管理的系统），您可以使用它（您甚至可以更改验证系统）。
但是，如果开发者没有使用它或者使用自己的系统，你什么也做不了，你必须向 iJoomla 开发者询问。

# objective-c - 如何在 Objective-C 中获取 MacOsX 登录用户的用户 ID？

> ID：15775241
> 
> 赞同：1
> 
> 时间：2013-04-02T22:03:04.167
> 
> 标签：objective-c, macos

请让我知道如何在 Objective-C 中获取当前登录用户的用户 ID。我想获取当前在本地使用计算机的登录用户的用户 ID。我的命令行程序以 root 身份运行，我想找到当前登录用户的用户 ID。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T22:46:11.767

SCDynamicStoreCopyConsoleUser() 可能对您有用。它将返回当前控制台用户的 uid 和 gid。

[https://developer.apple.com/library/mac/#documentation/Networking/Reference/SCDynamicStoreCopySpecific/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/Networking/Reference/SCDynamicStoreCopySpecific/Reference/reference.html)

[https://developer.apple.com/library/mac/#qa/qa2001/qa1133.html](https://developer.apple.com/library/mac/#qa/qa2001/qa1133.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T22:19:40.057

您可以使用`NSUserName()`. 这将返回当前登录用户的名称。

```
NSString *userName = NSUserName(); 
```

此外，还有一个`NSFullUserName()`功能。

```
NSFullUserName() // "John Doe"
NSUserName()     // "jdoe" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-07T15:59:28.930

在 macOS 上，可以同时登录多个用户。使用`utmpx`函数迭代用户会话。

## SCDynamicStoreCopyConsoleUser

要发现具有活动图形会话的用户，请[`SCDynamicStoreCopyConsoleUser`](https://developer.apple.com/reference/systemconfiguration/1517123-scdynamicstorecopyconsoleuser)使用`SystemConfiguration.framework`.

请注意，Apple 的[QA1133](https://developer.apple.com/library/content/qa/qa1133/_index.html)提到此功能将来可能会被弃用：

> **警告：**用于确定当前控制台用户的系统配置框架机制有许多重要的警告：
> 
> *   它假定计算机有一个 GUI 控制台。虽然目前确实如此，但可能不会永远如此。如果您使用这种技术，如果这种情况发生变化，您将不得不更改您的代码。
> *   它无法指示多个用户已登录。
> *   它无法指示用户已登录但已切换到登录窗口。
> 
> 由于这些问题，像 SCDynamicStoreCopyConsoleUser 这样的例程仅出于兼容性目的而存在。它们很可能会在未来的 Mac OS X 版本中被正式弃用。

## 的主人`/dev/console`

另一种方法是`fstat`路径`/dev/console`：

```
struct stat info;
if (lstat(_PATH_CONSOLE,&info) == 0) {
    printf("%s is owned by %d\n",_PATH_CONSOLE,info.st_uid);
} 
```

# javascript - javascript touchend如果元素在另一个之上

> ID：15775242
> 
> 赞同：2
> 
> 时间：2013-04-02T22:03:06.523
> 
> 标签：javascript, drag-and-drop, coordinates, touch-event

`touchend`对在事件期间测量一个元素是否超过另一个元素（视觉上）的最佳方法感到困惑。本质上，我正在实现触摸友好的拖放。

`.elementFromPoint()`我在and上看过一点`event.touches`，但不确定如何使用这些来测量特定元素的边界。像下面这样的东西。

```
.bind('touchend', function(e){

    e.preventDefault();

    /* IF (targ is within titles bounds) { append targ to titles} */
    if (titles == document.elementFromPoint(orig.touches[0].pageX,orig.touches[0].pageY)){

        titles.append(targ);
    }

    targ.removeClass('moving').removeAttr('style');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-03T15:27:34.790

这对我来说似乎无缝工作，不断在拖动的元素上切换 zindex 以便您可以获得下面的元素。

```
element.addEventListener('touchmove', touchMove, false);

function touchMove(event) {
    var x = event.targetTouches[0].clientX;
    var y = event.targetTouches[0].clientY;
    dragger.style.zIndex = -1;
    var hoveredElement = document.elementFromPoint(x, y);
    console.log(hoveredElement);
    dragger.style.zIndex = options.draggerZIndex;

} 
```

如果您可以忽略旧浏览器这个答案[javascript - elementFromPoint 选择底部元素](https://stackoverflow.com/questions/8810378/javascript-elementfrompoint-select-bottom-element) 也可以添加指针事件：无

# java - 试图让简笔画在屏幕上移动，收到错误消息

> ID：15775244
> 
> 赞同：0
> 
> 时间：2013-04-02T22:03:11.517
> 
> 标签：java, swing, object, animation, jpanel

我必须制作 2 个面板，一个带有停止和启动按钮，另一个显示简笔画。当你按下开始它移动，停止它停止。当我按开始时，我收到此错误消息：Stick.actionPerformed(Stick.java:64) 线程“AWT-EventQueue-0”java.lang.NullPointerException 中的异常

即指向这一行： myBanner.startAnimation();

所以 Banner 类的 startAnimation 函数显然有问题，但我不确定。关于如何让这个东西运行的任何想法？

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.BoxLayout;
public class Stick extends JFrame implements ActionListener{
    public static final int FRAME_WIDTH = 500;
    private static final int FRAME_HEIGHT = 500;
    private static final int FRAME_X_ORIGIN = 150;
    private static final int FRAME_Y_ORIGIN  = 200;

    JButton stop, go;
    Graphics g;

    MovingBanner myBanner;
    Thread thrd;
    public static void main(String[] args){
        Stick frame = new Stick();
        frame.setVisible(true);

    }

    public Stick(){
        Container contentPane;
        contentPane = getContentPane();
        contentPane.setLayout(new FlowLayout());
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(FRAME_WIDTH,FRAME_HEIGHT);
        setVisible(true);

        g = contentPane.getGraphics();

        JPanel panel1, panel2;

        panel1 = new JPanel(new FlowLayout());
        panel2 = new JPanel(new FlowLayout());

        contentPane.add(panel1);
        contentPane.add(panel2);

        stop = new JButton("STOP");
        go = new JButton("GO");
        stop.addActionListener(this);
        go.addActionListener(this);
        panel1.add(go);
        panel1.add(stop);

    }
    public void actionPerformed(ActionEvent event){
        if (event.getSource() instanceof JButton){
            JButton clickedButton = (JButton) event.getSource();
            if(clickedButton == go){
                myBanner.startAnimation();
                thrd = new Thread (myBanner);
                thrd.start();           
            }
            if(clickedButton == stop){
                myBanner.stopAnimation();
                thrd = null;
            }
        }
    }
}

class MovingBanner extends JPanel implements Runnable{
    private int x;

    public static final int FRAME_WIDTH = 500;
    private static final int FRAME_HEIGHT = 500;
    private static final int FRAME_X_ORIGIN = 150;
    private static final int FRAME_Y_ORIGIN  = 200;

    int bodyX = 250;
    int bodyY1 = 160;
    int bodyY2 = 210;
    int armHeight = 190;
    int armLength = bodyX + 30;
    int armLength1 = bodyX - 30;
    int legY = 110;

    private Boolean animate;
    public MovingBanner(){
        x = 2;
        animate = true;
    }

    public void paintComponent(Graphics g){
        super.paintComponent(g);
        g.drawLine(bodyX + x, bodyY1, bodyX + x, bodyY2); //body
        g.drawOval(bodyX + x, bodyY2, 40, 40); //head
        g.drawLine(armLength + x,armHeight,  armLength1 + x, armHeight); //arms
        g.drawLine(bodyX + x, bodyY1, bodyX + 20 + x,legY); //leg
        g.drawLine(bodyX + x, bodyY1, bodyX - 20 + x, legY);    //leg
    }
    public void run(){
        while (animate){
            changeX();
            repaint();
            try {Thread.sleep(100); } catch(Exception e){};
        }
    }
    public void changeX() {

        if (x <= FRAME_WIDTH)
             x++;
        else x = 2;

    }
    public void stopAnimation() {
        animate = false;
    }

    public void startAnimation() {
        animate = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:06:52.670

该`myBanner`对象似乎为空。意思是，你从来没有在任何地方初始化它。您可能希望在`Stick`构造函数中对其进行初始化。

```
myBanner = new MovingBanner(); 
```

您还缺少`Thread`已实现`run`方法的设置。在 的构造函数中`MovingBanner`，最后添加

```
new Thread(this).start(); 
```

# c# - 从 C# 启动 JSFL 脚本时遇到问题

> ID：15775251
> 
> 赞同：1
> 
> 时间：2013-04-02T22:03:44.800
> 
> 标签：c#, flash-cs6, jsfl, xfl

我有以下代码用于从我的 ASP.Net Web 应用程序运行 JSFL 脚本：

```
Process.Start("c:\publish\build.jsfl").WaitForExit(); 
```

此代码在我的 Win 7 机器上本地运行良好；Flash 启动、发布 SWF 并关闭。但是，当我将它部署到我的 Windows 2008 网络服务器（安装了 Flash CS6）时，它似乎不起作用。更具体地说，当我运行上面的代码时；Flash 打开几秒钟，然后退出而不发布 SWF 或显示/记录任何错误。但是，如果我远程进入服务器并简单地双击该完全相同的脚本；Flash 打开，脚本运行，SWF 发布。如果我从服务器上的命令提示符打开带有 Flash 的 JSFL 脚本，它也可以工作。

我怀疑 Process.Start 提前中止了 Flash；但我不知道为什么。如您所见，我调用了 WaitForExit ，因此它会阻塞直到发布完成；但它似乎只在一秒钟后就退出了。

有任何想法吗？

更新

检查 Windows 系统日志，发现每次我们的应用程序尝试通过上面的代码启动 Flash 时都会出现此错误：

FlashPro 致命异常：FlashPro 遇到致命异常。FlashPro 现在将终止。

看起来这可能是 Flash CS6 的问题。

# node.js - 多个nodejs应用程序之间的进程间通信

> ID：15775257
> 
> 赞同：3
> 
> 时间：2013-04-02T22:04:13.767
> 
> 标签：node.js, ipc

我正在开发一个使用 nodejs 的项目。项目同时运行多个 nodejs 应用程序（进程）。我想在这些进程之间共享数据并同步它们的执行。nodejs 是否有类似于“消息队列”和“信号量”的东西来共享数据和同步进程的执行。我知道 nodejs 有异步 I/O，我不应该在我的应用程序中使用阻塞 I/O 操作，但是应用程序中的一些文件读/写操作需要阻塞 I/O。

我可以使用 socket.IO 进行信息共享，但使用 socket.io 的同步变得混乱。

简而言之，我正在寻找一个节点模块，它可以为 IPC 托管共享消息队列，还可以充当调度程序来阻止和运行应用程序中的进程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-08T16:37:05.293

谷歌“nodejs 消息总线”——Socket.io 和 ZeroMq 有很多替代品，包括 [Simple Bus](https://github.com/ajlopez/SimpleBus)和[Postal.js](https://github.com/postaljs/postal.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:02:19.397

你可以试试 ZeroMQ，它有 node.js 的绑定：[http ://www.zeromq.org/bindings:node-js](http://www.zeromq.org/bindings:node-js)

# javascript - Video.js Player 无法与 Jquery Infinite Scroll 一起使用

> ID：15775260
> 
> 赞同：0
> 
> 时间：2013-04-02T22:04:31.923
> 
> 标签：javascript, jquery

您好，由于某种原因，当我使用 Jquery Infinite Scroll 向下滚动时，下一页上的 Video.js 播放器变成了普通的 html 5 播放器。[http://orgasmal.com/](http://orgasmal.com/) (SFW)
奇怪的是播放器在单独运行时可以正常工作。[http://orgasmal.com/test/](http://orgasmal.com/test/) (SFW) 如果有帮助，这里是播放器的代码：

```
 <video id="ex2" class="video-js vjs-default-skin"
 controls preload="auto"; loop  data-setup='{"example_option":true}'>
 <source src="http://codmemes.com/video/test.mp4" type='video/mp4' />
 </video>
 <script>_V_("ex2", {}, function(){
  var myPlayer = this;
  myPlayer.size(640,600);
  myPlayer.play();

   });</script>

 function custom_infinite_scroll_js() {
if( ! is_singular() ) { ?>
<script>
var infinite_scroll = {
    loading: {
        img: "http://codmemes.com/wp-content/uploads/2013/03/27-1.gif",
        msgText: "<?php _e( 'Loading More People...', 'custom' ); ?>",
        finishedMsg: "<?php _e( 'Shit, you just hit the bottom of the internet.', 'custom' ); ?>"
    },
    "nextSelector":".nav-previous a",
    "navSelector":".navigation",
    "itemSelector":".box",
    "contentSelector":".icontent"
};
jQuery( infinite_scroll.contentSelector ).infinitescroll( infinite_scroll );
</script>
<?php
}
}
 add_action( 'wp_footer', 'custom_infinite_scroll_js',100 ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:45:55.853

当通过无限滚动插件插入新视频时，您可能需要重新初始化 video.js，（我看不到确切的代码，因为它被缩小了）

尝试将 video.js 代码（如上所示）放在命名函数中，并在插入新的滚动内容时调用它

# c++ - 在 OSX 10.8.3 上安装 Qwt 6.02 时出错

> ID：15775262
> 
> 赞同：0
> 
> 时间：2013-04-02T22:04:32.670
> 
> 标签：c++, qt, osx-mountain-lion, qwt

命令后

```
qmake -spec macx-g++ 
make
make install 
```

我越来越

```
ld: library not found for -lqwt
collect2: ld returned 1 exit status
make[2]: *** [../../lib/qwtmathml.framework/qwtmathml] Error 1
make[1]: *** [sub-mathml-make_default] Error 2
make: *** [sub-textengines-make_default-ordered] Error 2 
```

任何想法可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:40:47.627

**快速回答**：编辑`qwtconfig.pri`并注释掉倒数第二行并重建：

```
QWT_CONFIG += QwtFramework // Comment this line out 
```

**长答案**：默认情况下，OS X 上的 Qwt 尝试将自己构建为[Mac 框架](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPFrameworks/Concepts/WhatAreFrameworks.html)。除了基本的 qwt 库之外，Qwt 包中还有一些其他内部项目也在尝试构建（示例，QwtMathML 库）。Qwt 使用的 QMake 项目文件在尝试构建这些最终依赖项时存在一些问题，但它找不到它刚刚构建的 Qwt 框架（如果您查看 lib 目录，您应该会看到它`qwt.framework`实际上已经构建在那里） . [开发人员知道它们](http://comments.gmane.org/gmane.comp.graphics.qwt.general/3775)，但没有尝试修复它们的 OS X 机器，因此他依赖于提交修复的人。

# c# - 在多个域服务器中搜索用户的 lastLogon 属性

> ID：15775264
> 
> 赞同：0
> 
> 时间：2013-04-02T22:04:42.520
> 
> 标签：c#, active-directory, ldap

首先，如果我没有使用正确的术语，请原谅我。在我使用错误术语的地方纠正我。

目标是以编程方式检索`lastLogon`给定用户名的日期。

我们拥有我认为是森林的地方；两个 AD 服务器，例如 -`adserver01.aa.mycompany.com`和`adserver02.aa.mycompany.com`

我使用 Microsoft 的 ADExplorer 从第三台机器连接到这些服务器以检查对象。在那里，我看到一些用户的 lastLogon 日期在 中可用`adserver01`，但在`adserver02`. 例如，lastLogon 的值为 0x0 in，而对于某些用户`adserver02`来说它是有效的日期。`adserver01`

到目前为止，我作为 Windows 窗体应用程序开发的代码，如果只涉及一个 AD 服务器，则可以正常工作。如何检查两个服务器并在 lastLogon 日期属性中返回非零值（如果可用）？

```
 private static string GetLastActivityDate(string UserName)
    {
        string domainAndUserName = String.Format(@"LDAP://aa.mycompany.com/CN={0},OU=CLIENT_PROD,OU=clients.mycompany.com,DC=aa,DC=mycompany,DC=com", UserName);
        string OUAdminUserName = "abc";
        string OUAdminPassword = "xyz";
        AuthenticationTypes at = AuthenticationTypes.Secure;
        DateTime lastActivityDate;
        string returnvalue;
        long lastLogonDateAsLong;

        using (DirectoryEntry entryUser = new DirectoryEntry(domainAndUserName, OUAdminUserName, OUAdminPassword, at))
        using (DirectorySearcher mysearcher = new DirectorySearcher(entryUser))
            try
            {
                using (SearchResultCollection results = mysearcher.FindAll())
                {
                    if (results.Count >= 1)
                    {
                        DirectoryEntry de = results[0].GetDirectoryEntry();
                        lastLogonDateAsLong = GetInt64(de, "lastLogon");
                        try
                        {
                            if (lastLogonDateAsLong != -1)
                            {
                                lastActivityDate = DateTime.FromFileTime(lastLogonDateAsLong);
                                returnvalue = lastActivityDate.ToString();
                            }
                            else
                            {
                                returnvalue = "-Not available-";
                            }
                        }
                        catch (System.ArgumentOutOfRangeException aore)
                        {
                            returnvalue = "Not available";
                        }
                    }
                    else
                    {
                        returnvalue = string.Empty;
                    }
                }
            }
            catch (System.DirectoryServices.DirectoryServicesCOMException dsce)
            {
                returnvalue = "- Not available -";
            }

        return returnvalue;
    } 
```

谢谢你。

编辑：

```
 private static Int64 GetInt64(DirectoryEntry entry, string attr)
    {

        DirectorySearcher ds = new DirectorySearcher(
            entry,
            String.Format("({0}=*)", attr),
            new string[] { attr },
            SearchScope.Base
            );

        SearchResult sr = ds.FindOne();

        if (sr != null)
        {
            if (sr.Properties.Contains(attr))
            {
                return (Int64)sr.Properties[attr][0];
            }
        }
        return -1;
    } 
```

忘了提一下，两台服务器中的 AD 架构、结构等看起来完全一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:32:59.203

检查这篇文章 [http://www.codeproject.com/Articles/19181/Find-LastLogon-Across-All-Windows-Domain-Controlle](http://www.codeproject.com/Articles/19181/Find-LastLogon-Across-All-Windows-Domain-Controlle)

我有同样的问题，但只针对一个域，我通过使用以下代码解决了它，但是我正在检查所有用户的 lastLogin

```
 public static Dictionary<string, DateTime> UsersLastLogOnDate()
   {
       var lastLogins = new Dictionary<string, DateTime>();
       DomainControllerCollection domains = Domain.GetCurrentDomain().DomainControllers;
       foreach (DomainController controller in domains)
       {
           try
           {
               using (var directoryEntry = new DirectoryEntry(string.Format("LDAP://{0}", controller.Name)))
               {
                   using (var searcher = new DirectorySearcher(directoryEntry))
                   {
                       searcher.PageSize = 1000;
                       searcher.Filter = "(&(objectClass=user)(!objectClass=computer))";
                       searcher.PropertiesToLoad.AddRange(new[] { "distinguishedName", "lastLogon" });
                       foreach (SearchResult searchResult in searcher.FindAll())
                       {
                           if (searchResult.Properties.Contains("lastLogon"))
                           {
                               var lastLogOn = DateTime.FromFileTime((long)searchResult.Properties["lastLogon"][0]);
                               var username = Parser.ParseLdapAttrValue(searchResult.Properties["distinguishedName"][0].ToString());
                               if (lastLogins.ContainsKey(username))
                               {
                                   if (DateTime.Compare(lastLogOn, lastLogins[username]) > 0)
                                   {
                                       lastLogins[username] = lastLogOn;
                                   }
                               }
                               else
                               {
                                   lastLogins.Add(username, lastLogOn);
                               }
                           }
                       }
                   }

               }

           }
           catch (System.Runtime.InteropServices.COMException comException)
           {
               // Domain controller is down or not responding
               Log.DebugFormat("Domain controller {0} is not responding.",controller.Name);
               Log.Error("Error in one of the domain controllers.", comException);
               continue;
           }
       }
       return lastLogins;
   } 
```

在代码之上，您可以使用以下内容获取森林中的所有域。

```
Forest currentForest = Forest.GetCurrentForest();  
DomainCollection domains = currentForest.Domains;  
foreach(Domain domain in domains)  
{  
   // check code above  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:10:29.703

可能有更简单的方法？实际上还有另一个属性 lastLogonTimestamp，我认为是在 2003 域级别中添加的，它试图为最后一次登录在整个域中保持一个单一的、一致的值。唉，它有一个奇怪的复制时间模式，可能会过期两周。

# ruby - 在 ruby 中重新发明 .sort

> ID：15775271
> 
> 赞同：0
> 
> 时间：2013-04-02T22:05:27.637
> 
> 标签：ruby, arrays, sorting

我面临着在 Ruby 中创建自己的排序方法的挑战。这是我目前得到的：

```
sort_me = []
current_word = 'a'
sorted = []
puts "Enter a series of words or characters to be sorted! One word at a time, press enter when complete."

while current_word != ''
    current_word = gets.chomp
    sort_me.push current_word
end

puts ''
puts "You have chosen the values:"
puts sort_me

sort_me.each do |word|
    sort_me.each do |word2|
        if word > word2
            sorted.push word
        else
        end
    end
end

puts "They have been sorted thusly:"
puts sorted 
```

嵌套的 .each 部分出了什么问题？在我看来，它似乎应该使用 > 操作数将“sort_me”中的每个值与其他值进行比较，然后将它们从最高值的单词开始添加到“排序”中。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:19:58.790

每个单词将被推送到结果数组的次数与数组中“较小”的单词一样多。这是因为内部循环遍历所有单词并从外部循环 ( `word`) 中添加单词的次数与正确的次数一样多`word > word2`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:31:30.557

您的方法没有多大意义，对于每个单词，您会将其推送到结果中的次数与整个集合中存在较少单词的次数一样多。

你练习的重点是开发一种排序算法还是用红宝石表达它？如果是后者，请尝试从[一些众所周知的算法](http://en.wikipedia.org/wiki/Sorting_algorithm)开始，并计算出在 ruby​​ 中实现它的细节。如果是前者，你需要清楚地考虑你的算法构建方法。您采取什么策略将问题简化为更简单的形式？你的不变量是什么？你如何确保他的算法朝着目标前进？你如何证明正确性？通过调查以前的工作，开发自己的分类可能会有所帮助。期望你想出的任何东西都不如现有的众所周知的算法和实现。

# facebook-ios-sdk - Facebook AppRequests：仅向 iOS 用户发送请求

> ID：15775275
> 
> 赞同：0
> 
> 时间：2013-04-02T22:06:00.777
> 
> 标签：facebook-ios-sdk

最新的 Facebook iOS SDK (3.2) 包含通过 FBWebDialogs 类向用户的朋友发送 AppRequests 的本地方法。有没有办法将收件人列表过滤给使用 iOS 设备的朋友？Facebook 是否保留了与这些关系相关的任何类型的数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:25:16.660

回答我自己的问题 - 您可以在查询用户的朋友时将“设备”添加到“字段”参数，为应用程序请求创建自己的自定义朋友选择器，根据他们的设备解析用户，并将您构建的列表作为参数发送到请求。

# windows - 通过 DOS 同时复制文件和更改名称

> ID：15775278
> 
> 赞同：0
> 
> 时间：2013-04-02T22:06:10.670
> 
> 标签：windows, for-loop, batch-file, cmd, rename

位于这样的文件

```
folderA/aaa.html
folderA/bbb.html 
```

我想将它们复制到`folderB`不同的位置，例如

```
folderB/aaa/index.html
folderB/bbb/index.html 
```

我试过了

```
for /R "C:\...\folderA\" %%f in (*.html) do copy /y "%%f" "%%~nf/index.html" 
```

不工作，因为我没有地方放`folderB`

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:19:29.057

尝试这个：

```
@echo off &setlocal
for %%i in (folderA\*.html) do (
    for /f "delims=" %%j in ("%%~dpi.") do (
        md "%%~dpjfolderB\%%~ni"
        copy "%%~fi" "%%~dpjfolderB\%%~ni\index.html"
    )
) 
```

# c - XCB 中需要 XEventsQueued(display, QueuedAfterReading)

> ID：15775281
> 
> 赞同：2
> 
> 时间：2013-04-02T22:06:17.490
> 
> 标签：c, xlib, xcb

我正在将一些 CYBOI 代码从 Xlib 迁移到 XCB。

CYBOI 使用几个线程用于不同的通信通道，例如：serial_port、terminal、socket、x_window_system。但是，它仅将这些线程用于信号/事件/数据检测；实际的接收和发送在主线程中完成，以避免地址空间的任何多线程冲突。

对于 x_window_system 通道，我之前在线程中[检测到事件：](http://svn.savannah.nongnu.org/viewvc/trunk/src/executor/lifeguard/sensor/x_window_system/check_events_x_window_system_sensor.c?revision=2097&root=cybop&view=markup)

```
int n = XEventsQueued(display, QueuedAfterReading); 
```

检测到事件后，设置了“中断标志”。之后，主线程正在使用以下[命令读取实际事件](http://svn.savannah.nongnu.org/viewvc/trunk/src/executor/communicator/receiver/x_window_system_receiver.c?revision=2097&root=cybop&view=markup)：

```
XNextEvent(display, &event); 
```

当没有更多事件可用时，主线程停止接收事件，x_window_system 通道线程再次开始使用 XEventsQueued 进行侦听。

现在，我将代码迁移到 XC Binding (XCB)。有一个阻塞函数“xcb_wait_for_event”，可以很好地读取事件。如果有未决的事件，我想念的是一些“向前看”的功能，而实际上没有从队列中返回/删除事件。

我现在在网上阅读了几个小时，但找不到这样的功能。“xcb_poll_for_event”没有帮助。阻塞对我来说很好，因为我的事件检测在它自己的线程中运行。作为第三个输入函数的“xcb_request_check”似乎不是我想要的。

有人可以帮帮我吗？

谢谢，克里斯蒂安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T21:10:50.627

您是否正在寻找`xcb_poll_for_queued_event(xcb_connection_t *c)`哪个返回下一个事件而不读取连接？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:06:41.327

首先，感谢 Julien 的回复。

我研究了 XCB 1.9 的源代码，发现“xcb_poll_for_queued_event”函数不是我需要的。

函数“xcb_poll_for_event”和“xcb_poll_for_queued_event”都调用“poll_for_next_event”。函数“poll_for_next_event”和“xcb_wait_for_event”都调用“get_event”。

如果“get_event”找到一个事件，它会改变内部链表指向下一个事件。但是，我宁愿不更改事件队列，这与事件是否可用无关。

因此，我建议在 XCB 中添加如下功能：

```
void* NULL_POINTER = (void*) 0;

int xcb_test_for_event(xcb_connection_t* c) {

    int r = 0;

    if (c != NULL_POINTER) {

        struct _xcb_in in = c->in;
        struct event_list* l = in.events;

        if (l != NULL_POINTER) {

            xcb_generic_event_t* e = l->event;

            if (e != NULL_POINTER) {

                r = 1;
            }
        }
    }

    return r;
} 
```

这将允许我编写一个无限循环，例如：

```
while (!xcb_test_for_event(connection)) {

    sleep(t);
} 
```

这与旧的 Xlib 函数相当：

```
int n = XEventsQueued(d, QueuedAfterReading); 
```

它只是检查了事件队列中的事件数。如果队列中已有事件，“XEventsQueued”函数总是立即返回，没有输入/输出。

谢谢克里斯蒂安

# wordpress - nivoSlider和外部jquery之间的jquery冲突

> ID：15775282
> 
> 赞同：2
> 
> 时间：2013-04-02T22:06:17.810
> 
> 标签：wordpress, nivo-slider, head, jquery

我正在运行一个 wordpress 网站，它的主页上有一个 Nivoslider。我必须使用另一个插件才能让它工作，我需要在 header.php 文件中包含 jquery，在“head”标签内。现在，当我在 下包含 jquery 文件时`<?php wp_head(); ?>`，Nivo 滑块不起作用并卡在加载屏幕上。我尝试在互联网上搜索这个问题并尝试了一个解决方案，我在上面添加了以下代码`<?php wp_head(); ?>`：

```
<?php
    wp_deregister_script('jquery'); // Remove the default jQuery script
    wp_register_script('jquery', 'http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js', false); // Register the Google hosted Version
    wp_enqueue_script('jquery'); // Enqueue the Google Hosted version
    ?> 
```

在上面添加此代码后`<?php wp_head(); ?>`，滑块的第一张幻灯片现在才出现，我无法通过单击下一个/上一个按钮在幻灯片之间切换。此外，当我`<?php wp_head(); ?>`从 header.php 文件中删除代码并添加 jquery 文件时，我的其他插件开始正常工作，但滑块停止工作。我认为 jquery 被加载了两次，这导致了冲突，但我似乎无法找到问题是从哪里产生的。这是我运行 Nivoslider 和其他插件的网站：http: [//ignoremusic.com/](http://ignoremusic.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:19:56.993

在 JS 控制台中看到的错误：

```
Uncaught TypeError: Property '$' of object [object Object] is not a function 
```

在 wordpress 中，您可能会遇到嵌入的 jquery 版本的一些问题。而不是使用：

```
$('#div').hide() 
```

试试这个 ：

```
jQuery('#div').hide() 
```

或者你可以使用 JQuery.noConflict()

[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

我会亲自将滑块的 JS 代码嵌入到 noConflict() 函数中。

# mysql - 分组字段以显示最近的日期

> ID：15775285
> 
> 赞同：0
> 
> 时间：2013-04-02T22:06:25.110
> 
> 标签：mysql, sql, database

我有一个快速的问题，我似乎无法弄清楚。我正在尝试列出仅显示最新评论的最终用户项目（只是一个示例）。

```
ID  Name    EventDate     Type
1   PC      12/12/2012    End User Items 
1   PC      11/12/2012    End User Items 
1   PC      10/11/2012    End User Items 
2   Mobile  12/12/2012    End User Items 
2   Mobile  11/01/2012    End User Items 
2   Mobile  12/12/2011    End User Items 
3   Server  12/12/2013    Server 
```

所以我会尝试这样的事情：

```
select * from systems where type = "End User Items" group by ID 
```

但结果仍然不会显示最新日期。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:13:29.680

您可以使用子查询来获取 ID 和 MAX 日期，然后使用 ID 和 MAX 日期重新加入您的系统表。

```
SELECT s2.Name, s.EventDate
FROM system s2 
INNER JOIN (SELECT ID, MAX(EventDate) EventDate
            FROM systems
            WHERE type = 'End User Items'
            GROUP BY ID) AS s on s2.ID = s.ID AND s2.EventDate = s.EventDate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:40:57.017

将您想要在不汇总的情况下显示的列定义为您的 GROUP BY 字段。选择这些字段和计算的汇总函数列（例如 max()、sum()、count()）。

```
SELECT ID, Name, MAX(EventDate) as LastDate
  FROM  systems
  WHERE type = 'End User Items'
  GROUP BY ID, Name 
```

您可能想查看 ID 和名称。在这里类型是多余的，因为你只需要一种类型。您想获取组中的 max() 日期。返回的所有字段必须是汇总函数或 GROUP BY 列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T22:08:54.750

您是否尝试过`MAX`如下获取日期？

```
SELECT  Name,
    MAX(EventDate),
    Type
  FROM  systems
  WHERE type = 'End User Items'
  GROUP BY Name, Type 
```

# android - Android 滚动视图太长

> ID：15775286
> 
> 赞同：4
> 
> 时间：2013-04-02T22:06:25.943
> 
> 标签：android, xml, eclipse, android-scrollview

我对Android超级陌生-

我在屏幕上放入了一个滚动视图，只是在其中放置了一些文本。我这样做是因为在某些手机上，文本会从屏幕上消失。

我遇到的问题是我放到页面上的滚动视图比它包含的内容长——手机屏幕越窄，滚动视图越长。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:fillViewport="true" >

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/app_background"
    android:orientation="vertical"
    android:padding="10dp" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="20"
        android:inputType="textMultiLine"
        android:lineSpacingExtra="3dp"
        android:text="Get ready to melt fat and burn calories with Fit Body Boot Camp&apos;s 14 Day Fat Furnace Workout Program! This is a detailed 14 Day Workout plan based on Fit Body Boot Camp&apos;s Unstoppable Fitness Formula that has been implemented in close to 300 boot camps worldwide by hundreds of thousands of clients who made the decision to lose weight and get healthier."
        android:textColor="#FFF"
        android:textColorLink="#FFF"
        android:textSize="20sp" >
    </EditText> 
```

在此之后还有一些编辑文本，但这是它的要点。如果你看到一些愚蠢的东西，请告诉我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-05T13:53:58.457

您的背景位于 ScrollView 中的线性布局中。如果将滚动视图放在另一个线性布局中，该布局是 ScrollView 的父级并包含背景，并从作为 Scroll View 的子级的线性布局中删除背景，问题将得到解决。

**它看起来像这样：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:background="@drawable/app_background" >
<ScrollView 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:fillViewport="true" >

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="10dp" >

<EditText
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="20"
    android:inputType="textMultiLine"
    android:lineSpacingExtra="3dp"
    android:text="THE LONG TEXT YOU'VE TYPED"
    android:textColor="#FFF"
    android:textColorLink="#FFF"
    android:textSize="20sp" >
</EditText>
</LinearLayout>
</ScrollView>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T22:08:46.133

我认为滚动视图应该填充父视图，子视图包装内容，因为 layout_height 是视图在屏幕上实际具有的大小，滚动发生在视图内部

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    //...
    android:layout_height="fill_parent"
    //...
> 
```

**正如dbalaouras**

所指出的，编辑最好使用“match_parent”而不是“fill_parent”，因为后者已被弃用。结果是一样的，只是因为“填充”混淆了名称已经改变，如果您设置它不会填充剩余空间而只是根据其父设置维度

# ios - 在单词或字符边界处截断包含表情符号或 unicode 字符的字符串

> ID：15775294
> 
> 赞同：10
> 
> 时间：2013-04-02T22:06:59.593
> 
> 标签：ios, objective-c, unicode, nsstring, emoji

![问题](https://i.stack.imgur.com/4xuJr.png)

如何截断给定长度的字符串，而不消除可能在我的长度中间的 unicode 字符？如何确定字符串中 unicode 字符开头的索引，以便避免创建难看的字符串。有一半 A 可见的正方形是另一个已被截断的表情符号字符的位置。

```
-(NSMutableAttributedString*)constructStatusAttributedStringWithRange:(CFRange)range

NSString *original = [_postDictionay objectForKey:@"message"];

NSMutableString *truncated = [NSMutableString string];

NSArray *components = [original componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];

for(int x=0; x<[components count]; x++)
{
    //If the truncated string is still shorter then the range desired. (leave space for ...)
    if([truncated length]+[[components objectAtIndex:x] length]<range.length-3)
    {
        //Just checking if its the first word
        if([truncated length]==0 && x==0)
        {
            //start off the string
            [truncated appendString:[components objectAtIndex:0]];
        }
        else
        {
            //append a new word to the string
            [truncated appendFormat:@" %@",[components objectAtIndex:x]];
        }

    }
    else
    {
        x=[components count];
    }
}

if([truncated length]==0 || [truncated length]< range.length-20)
{
    truncated = [NSMutableString stringWithString:[original substringWithRange:NSMakeRange(range.location, range.length-3)]];
}

[truncated appendString:@"..."];

NSMutableAttributedString *statusString = [[NSMutableAttributedString alloc]initWithString:truncated];
[statusString addAttribute:(id)kCTFontAttributeName value:[StyleSingleton streamStatusFont] range:NSMakeRange(0, [statusString length])];
[statusString addAttribute:(id)kCTForegroundColorAttributeName value:(id)[StyleSingleton streamStatusColor].CGColor range:NSMakeRange(0, [statusString length])];

return statusString;

} 
```

**更新**感谢答案，能够使用一个简单的功能来满足我的需求！

```
-(NSMutableAttributedString*)constructStatusAttributedStringWithRange:(CFRange)range
{
NSString *original = [_postDictionay objectForKey:@"message"];

NSMutableString *truncated = [NSMutableString stringWithString:[original substringWithRange:[original rangeOfComposedCharacterSequencesForRange:NSMakeRange(range.location, range.length-3)]]];
[truncated appendString:@"..."];

NSMutableAttributedString *statusString = [[NSMutableAttributedString alloc]initWithString:truncated];
[statusString addAttribute:(id)kCTFontAttributeName value:[StyleSingleton streamStatusFont] range:NSMakeRange(0, [statusString length])];
[statusString addAttribute:(id)kCTForegroundColorAttributeName value:(id)[StyleSingleton streamStatusColor].CGColor range:NSMakeRange(0, [statusString length])];

return statusString;

} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-03T05:23:36.380

`NSString`有一种方法`rangeOfComposedCharacterSequencesForRange`，您可以使用该方法在仅包含完整组合字符的字符串中查找封闭范围。例如

```
NSString *s =  @"";
NSRange r = [s rangeOfComposedCharacterSequencesForRange:NSMakeRange(0, 1)]; 
```

给出范围`{ 0, 2 }`，因为 Emoji 字符在字符串中存储为两个 UTF-16 字符（代理对）。

*备注：*您还可以检查是否可以通过使用来简化第一个循环

```
enumerateSubstringsInRange:options:usingBlock 
```

与`NSStringEnumerationByWords`选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T02:00:48.847

“以给定长度截断字符串”<-您的意思是长度为字节长度还是长度为字符数？如果是后者，那么一个简单的`substringToIndex:`就足够了（尽管先检查边界）。如果是前者，那么恐怕您必须执行以下操作：

```
NSString *TruncateString(NSString *original, NSUInteger maxBytesToRead, NSStringEncoding targetEncoding) {
    NSMutableString *truncatedString = [NSMutableString string];

    NSUInteger bytesRead = 0;
    NSUInteger charIdx = 0;

    while (bytesRead < maxBytesToRead && charIdx < [original length]) {
        NSString *character = [original substringWithRange:NSMakeRange(charIdx++, 1)];

        bytesRead += [character lengthOfBytesUsingEncoding:targetEncoding];

        if (bytesRead <= maxBytesToRead)
            [truncatedString appendString:character];
    }

    return truncatedString;
} 
```

**编辑：**您的代码可以重写如下：

```
NSString *original = [_postDictionay objectForKey:@"message"];

NSArray *characters = [[original componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceCharacterSet]] filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"SELF != ''"]];

NSArray *truncatedCharacters = [characters subarrayWithRange:range];

NSString *truncated = [NSString stringWithFormat:@"%@...", [truncatedCharacters componentsJoinedByString:@" "]]; 
```

# python - 如何提高 Cython 的性能？

> ID：15775295
> 
> 赞同：3
> 
> 时间：2013-04-02T22:07:01.097
> 
> 标签：python, performance, cython

我正在使用 Cython 迈出第一步，我想知道如何进一步提高性能。到目前为止，我的执行时间只有通常（仅限 python）的一半，但我认为肯定还有更多！

我知道`cython -a`并且我已经输入了我的变量。但是我的函数中仍然有很多黄色。这是因为 cython 无法识别 numpy 还是我还缺少其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:55:40.513

我相信您可以通过使用 libc 中的数学函数受益，因为您在标量上调用 np.sqrt 和 np.floor。这不仅有 Python 调用开销，而且在 numpy ufunc 中有不同的代码路径用于标量和数组。所以这至少涉及一个类型切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T02:30:01.030

我认为这不是问题，因为我已经使用[官方教程](http://wiki.cython.org/tutorials/numpy)进行了测试，它在每条 np.* 行上也报告为黄色，并且与您的代码一样涉及 python。

该页面末尾的第 3 点应该解释了这一点：

> 调用 NumPy/SciPy 函数目前有 Python 调用开销；可以通过从 Cython 直接到 C 的捷径。（但这确实需要对这些库进行一些孤立和增量的更改；请邮寄 Cython 邮件列表以获取详细信息）。

# android - 获取 sharedpreferences 文件的文件路径

> ID：15775296
> 
> 赞同：1
> 
> 时间：2013-04-02T22:07:01.293
> 
> 标签：android

我正在我的 android 代码中创建一个 sharedpreferences 文件。然后我想在我的代码中通过电子邮件发送该文件。为此，我需要访问 sharedpreferences 文件的路径。我正在使用的代码如下。但这似乎不起作用。我可以打开电子邮件，但那里没有附件，因为我猜它无法获取文件。有人可以在这里建议我任何解决方案。

```
File f = getDatabasePath("userPrefsFile.xml");
String filelocation=f.getAbsolutePath();
Intent email = new Intent(Intent.ACTION_SEND);
email.setType("application/xml");
String[] to = {"test@test.com"};
email.putExtra(Intent.EXTRA_EMAIL, to);
email.putExtra(Intent.EXTRA_STREAM,filelocation);
email.putExtra(Intent.EXTRA_SUBJECT,"test file send");
startActivity(Intent.createChooser(email, "Send email")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:18:37.157

所以`SharedPreferences`文件位于目录

```
/data/data/your.package/shared_prefs 
```

所以你需要使用上面的路径。

**伪代码：**

```
File root = new File("/data/data/your.package/shared_prefs");
if (root.isDirectory()) {
   for (File child: root.listFiles()) {
      Toast.makeText(this, child.getPath(), Toast.LENGTH_SHORT).show();
   }
} 
```

您不能使用的原因`getDatabasePath()`是返回数据库文件夹¹

```
/data/data/your.package/databases/ 
```

¹同样的问题也与`getFileStreamPath()`返回的方法有关

```
/data/data/your.package/files 
```

# ios - UICollectionViewController 以编程方式因非零布局参数错误而崩溃

> ID：15775297
> 
> 赞同：8
> 
> 时间：2013-04-02T22:07:04.127
> 
> 标签：ios, objective-c, cocoa-touch, uicollectionview

我正在以`UICollectionViewController`编程方式创建一个。不，我不想像每个教程一样使用 IB 和 Storyboard。我只想使用纯代码。

这是我的`viewDidLoad`：

```
// UICollectionView
    UICollectionViewFlowLayout *aFlowLayout = [[UICollectionViewFlowLayout alloc] init];
    [aFlowLayout setItemSize:CGSizeMake(200, 140)];
    [aFlowLayout setScrollDirection:UICollectionViewScrollDirectionVertical];
    self.collectionView = [[UICollectionView alloc] initWithFrame:self.view.frame collectionViewLayout:aFlowLayout];
    [self.collectionView setDelegate:self];
    [self.collectionView setDataSource:self];
    self.collectionView.backgroundColor = [UIColor clearColor];
    [self.collectionView setAutoresizingMask:UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleWidth];
    [self.collectionView registerClass:[PUCImageGridCell class] forCellWithReuseIdentifier:CollectionViewCellIdentifier]; 
```

我已经实现了所需的委托方法，但仍然收到此错误：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'UICollectionView must be initialized with a non-nil layout parameter' 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T23:52:22.337

这是我用来初始化[UICollectionViewController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionViewController_clas/Reference/Reference.html)的：

```
- (id)initWithCollectionViewLayout:(UICollectionViewLayout *)layout 
```

您不需要实例化 collectionView，控制器将为您完成。在调用此函数后设置框架，或者您可以覆盖并在内部设置框架：

```
- (id)initWithCollectionViewLayout:(UICollectionViewLayout *)layout{
     self = [super initWithCollectionViewLayout:layout];
     if (self) {
         // additional setup here if required.
     }
     return self;
} 
```

我更喜欢使用[自动布局](https://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html#//apple_ref/doc/uid/TP40010853)约束。

# php - javascript转换后如何获取html源代码？

> ID：15775303
> 
> 赞同：0
> 
> 时间：2013-04-02T22:07:37.813
> 
> 标签：php, javascript, html, curl

对于学校的一个项目，我正在尝试制作一个网站，该网站可以以比现在更漂亮的方式显示您的成绩。我已经能够使用 cURL 登录到该站点，现在我想以字符串形式获取成绩，以便可以使用 PHP 对其进行编辑。唯一的问题是，当 cURL 没有被获取成绩的 javascript 编辑时，它会获取 html 源代码。

所以基本上我想要你在字符串中打开 firebug 或检查器时得到的代码，这样我就可以用 php.ini 编辑它。

有谁知道如何做到这一点？我看过一些帖子说你必须等到页面加载完毕，但我不知道如何让我的网站等待另一个第三方网站加载。

我正在等待执行并且我想要结果的代码是这样的：

```
<script type="text/javascript">
    var widgetWrapper = $("#objectWrapper325");
    if (widgetWrapper[0].timer !== undefined) {
        clearTimeout( jQuery('#objectWrapper325')[0].timer );
    }
    widgetWrapper[0].timer = setTimeout( function() {
        if (widgetWrapper[0].xhr !== undefined) {
            widgetWrapper[0].xhr.abort();
        }
        widgetWrapper[0].xhr = jQuery.ajax({
            type: 'GET',
            url: "",
            data: {
                "wis_ajax": 1,
                "ajax_object": 325,
                'llnr': '105629'
            },
            success: function(d) {
                var goodWidth = widgetWrapper.width();
                widgetWrapper.html(d);
                /* update width, needed for bug with standard template */
                $("#objectWrapper325 .result__overview").css('width',goodWidth-$("#objectWrapper325         .result__subjectlabels").width());
            }
        });
    }, 500+(Math.random()*1000));
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T22:39:48.240

首先，您必须了解使用 cURL 获取网页与使用浏览器访问同一页面之间的细微但非常重要的区别。

### 1.用浏览器加载页面

当您在地址栏输入地址时，浏览器会将 url 转换为 ip 地址。然后它会尝试使用该地址访问**Web 服务器**，请求网页。从现在开始，浏览器将只与 Web 服务器使用**HTTP 。**HTTP 是一种用于通过网络传输文档的协议。浏览器实际上是从 Web 服务器请求一个 html 文档（一堆文本）。Web 服务器通过将网页发送到浏览器来回答。如果网页是静态页面，则 Web 服务器只是选择一个 html 文件并通过网络发送它。如果它是一个动态页面，Web 服务器会使用一些高级代码（如 php）生成网页，然后将其发送过来。

下载网页后，浏览器将解析该页面并解释其中的 html，从而在浏览器上生成实际的网页。在解析过程中，当浏览器找到`script`标签时，它会将其内容解释为 javascript，这是一种在浏览器中用于操纵网页外观并在浏览器内部执行操作的语言。

请记住，Web 服务器只发送了一个包含 html 内容的网页，他不知道什么是 javascript。

因此，当您在浏览器上加载网页时，只有在浏览器上下载后才会解释 javascript。

## 2.什么是cURL

如果您查看 curl 手册页，您将了解到 curl 是一种从/向服务器传输数据的工具，它可以使用一些支持的协议，而 HTTP 就是其中之一。当您使用 curl 下载页面时，它将尝试以与浏览器相同的方式**下载**该页面，但不会解析或解释任何内容。cURL 不理解 javascript 或 html，它所知道的只是如何与 Web 服务器对话。

### 3.解决方案

因此，在您的情况下，您需要像 cURL 那样下载页面，并以某种方式使 javascript 被解释为就好像它在浏览器中一样。

如果你跟着我到了这里，那么你已经准备好看看[CasperJS 了](http://casperjs.org/index.html)。

# c# - Int64 算术错误

> ID：15775310
> 
> 赞同：-5
> 
> 时间：2013-04-02T22:07:51.243
> 
> 标签：c#, largenumber

为什么输出“0 和 0”？我如何解决它？

```
 Int64 small=  (long)0.25 * (long)Int64.MaxValue;
 Int64 large = (long)0.75 * (long)Int64.MaxValue;
 System.Console.WriteLine(small + " and " + large);
 System.Console.ReadLine(); 
 //output 
 //0 and 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T22:09:31.147

语句`(long)0.75`将返回 0（将 double 转换为 long 将采用最大的整数值，即低于转换 double 的值）。所以你有`0 * 9223372036854775807`希望`0`。顺便说一句，`long`是别名`Int64`，这意味着它们是**相同**的底层类型，所以`(long)Int64.MaxValue`你可以转换`long`为`long`

修复它只需使用`double`*`long`乘法

```
long small=  (long)(0.25 * long.MaxValue);
long large = (long)(0.75 * long.MaxValue);

Console.WriteLine ("{0:N}", small); //print 2,305,843,009,213,693,952.00
Console.WriteLine ("{0:N}", large); //print 6,917,529,027,641,081,856.00 
```

不要打扰`"{0:N}"`文字，它只是一种为输出提供视觉美感的格式。默认情况下 double 以科学记数法打印，这不是很容易证明（例如`2.30584300921369E+18`对于第一次操作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:09:38.397

原因是在这两种情况下，您都将小于 1 的值转换为 a `long`。这将截断值，`0`因此乘法也会导致 0

```
Console.WriteLine((long)0.25);  // 0
Console.WriteLine((long)0.75);  // 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T22:09:45.180

因为 0.25 和 0.75 铸成的 long 都是 0。

为了解决这个问题，您需要使用浮点数或双精度数。但是，我不能 100% 确定精度是否足以得出准确的结果：

```
Int64 small=  (Int64)(0.25 * (double)Int64.MaxValue);
Int64 large = (Int64)(0.75 * (double)Int64.MaxValue); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T22:12:05.403

你想在乘法之后而不是之前进行转换。尝试

```
 Int64 small=  (long) (0.25 * (double) Int64.MaxValue); 
```

在您转换`.25`为`long`which is之前`0`。

# javascript - 使用 jQuery 单击按钮后在我的 div 上滚动

> ID：15775313
> 
> 赞同：0
> 
> 时间：2013-04-02T22:08:09.363
> 
> 标签：javascript, jquery

直升机，

单击此按钮后，我有一个显示 div 的按钮。但是在尝试了许多 jQuery 组合之后，我无法确保一旦单击按钮，页面会在出现时自动滚动可用的 div。

我的代码

```
$(document).ready(function() {
    var job = $("#job");
    var open = $("#open");

    job.hide();

    open.click(function() {
        job.slideDown();
        $(this).fadeOut();
        return false;
    });
}); 
```

预先感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:14:00.267

```
 $("#job").hide();
 $('#urBtn').on('click', function(){
     if (!$("#job").is(':visible')){
       $("#job").fadeOut();
     }
 }); 
```

# java - Java JRE 混合代码安全，从 JRE 1.6.0_19 开始

> ID：15775314
> 
> 赞同：1
> 
> 时间：2013-04-02T22:08:10.503
> 
> 标签：java, java-6, mixed-code

Java JRE 混合代码安全性，从 JRE 1.6.0_19 开始，到 2010 年左右，最初使用 JDK/JRE 1.6.0_12 实现、构建和部署了一个主 jar Java Applet；主 jar 和第三方 jar 已签名，一切正常。主 jar java applet 和第三方 jar 可以在 JRE 1.6.0_12 到 JRE 1.6.0_18 中正常工作。

但是，随着从 JRE 1.6.0_19 开始引入混合代码安全性，除非禁用混合代码安全性，否则主 jar 将不会随 JRE 11.6.0_27 一起启动。
我们正在将 JRE 从 1.6.0_12 移动到更新 27。我正在尝试解决这个问题，也就是说，当启用混合代码安全性时，允许签名的主 jar Java 小程序和签名的第三方 jar 启动。

我有一个包含 Java Applet 源代码的主 jar 和几个由主 jar 使用的第三方 jar；例如activation.jar、log4j-1.2.13.jar、ojdbc14.jar等。

在 JDK 1.6.0_27 中使用 keytool.exe，我创建了一个新的密钥库，其中包含 Java 小程序的私钥/公钥对。在 JDK 1.6.0_27 中使用 jarsigner.exe 我成功地用私钥签署了主 jar 和所有第三方 jar；每个 jar 都有一个签名文件 .SF 和一个签名块文件 .DSA（数字签名算法）。我导出了用于验证签名 jar 的公钥。

Java Applet 和第三方 jar 位于 Web 应用程序的 webcontent/applet 目录中，当使用 Web 应用程序启动小程序时，主 jar 和第三方 jar 被下载到用户的计算机中。数字签名部分工作正常，当 JRE 混合代码安全被禁用时，Java 小程序能够启动并成功运行。这仍然没有解决启用时的混合代码安全性。

我尝试将主 jar 部署为 Trusted-Only 和 Trusted-Library。在启用混合代码安全性的两种情况下，主 jar Java Applets 无法启动，我得到不同的异常但结果相同。

```
Trusted-Only :: Mixed Code Enable
.........................
cache: Mark prevalidated: http://hostname:port/path/main.jar true tm=numbers cert=numbers
security: http://hostname:port/path/main.jar is newly asserting Trusted-Only
basic: Plugin2ClassLoader.getPermissions CeilingPolicy allPerms
security: Validate the certificate chain using CertPath API
security: The certificate hasnt been expired, no need to check timestamping info
security: Cannot find jurisdiction list file
security: The CRL support is disabled
security: The OCSP support is disabled
security: This OCSP End Entity validation is disabled
security: Checking if certificate is in Deployment denied certificate store
security: Checking if certificate is in Deployment permanent certificate store
basic: Embedding dialogs not enabled in Configuration
basic: Plugin2ClassLoader.getPermissions CeilingPolicy allPerms
.........................
.........................
network: Cache entry not found [url: http://hostname:port/path/StatLib.jar, version:     null]
network: Connecting http://hostname:port/path/StatLib.jar with proxy=DIRECT
network: Connecting http://hostname:port/ with proxy=DIRECT
network: Connecting http://hostname:port/path/StatLib.jar with cookie     "CheckboxChecked=Y; JSESSIONID=j_session_id"
network: CleanupThread used 1 us
network: Downloading resource: http://hostname:port/path/StatLib.jar
Content-Length: 62,219
Content-Encoding: null
network: Wrote URL http://hostname:port/path/StatLib.jar to File C:\path\LocalLow\Sun\Java\Deployment\cache\6.0\24\167b0298-1365f142-temp
security: Trusted libraries list file not found
cache: Create from verifier: JarSigningData{hasOnlySignedEntries=true, hasSingleCodeSource=true, hasMissingSignedEntries=false}
cache: Adding MemoryCache entry: http://hostname:port/path/StatLib.jar
basic: Plugin2ClassLoader.isTrustedByPolicy called 
basic: Plugin2ClassLoader.isTrustedByPolicy returns false 
security: resource name "com/name/statistics/lib/I_Dispatch.class" in     http://hostname:port/path/StatLib.jar : java.lang.SecurityException: Trusted-Only loader attempted to load sandboxed resource from http://hostname:port/path/StatLib.jar
04/01/2013 16:58:41,588 - [FATAL Thread-15 com.lfg.name.JavaObjectName.init(JavaName.java:193)] - Error in Method() java.lang.SecurityException: Trusted-Only loader attempted to load sandboxed resource from http://hostname:port/path/StatLib.jar
at com.sun.deploy.security.CPCallbackHandler$ParentCallback.check(Unknown Source)
at com.sun.deploy.security.CPCallbackHandler$ParentCallback.access$1500(Unknown Source)
at com.sun.deploy.security.CPCallbackHandler$ChildElement.checkResource(Unknown Source)
at com.sun.deploy.security.DeployURLClassPath$JarLoader.checkResource(Unknown Source)
at com.sun.deploy.security.DeployURLClassPath$JarLoader.getResource(Unknown Source)
at com.sun.deploy.security.DeployURLClassPath$JarLoader.getResource(Unknown Source)
at com.sun.deploy.security.DeployURLClassPath.getResource(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at sun.plugin2.applet.Plugin2ClassLoader.findClassHelper(Unknown Source)
at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(Unknown Source)
at java.security.SecureClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.defineClass(Unknown Source)
at sun.reflect.GeneratedMethodAccessor11.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.defineClassHelper(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.access$100(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at sun.plugin2.applet.Plugin2ClassLoader.findClassHelper(Unknown Source)
at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Unknown Source)
.... Java Applet is calling and loading a class in a third party jar that I signed but for some reason is been treated as unsigned ....
.......................
network: Cache entry not found [url: http://hostname:port/path/ojdbc14.jar, version: null]
network: Connecting http://hostname:port/path/ojdbc14.jar with proxy=DIRECT
network: Connecting http://hostname:port/ with proxy=DIRECT
network: Connecting http://hostname:port/path/ojdbc14.jar with cookie "CheckboxChecked=Y; JSESSIONID=j_session_id"
network: CleanupThread used 1 us
network: Downloading resource: http://hostname:port/path/ojdbc14.jar
Content-Length: 1,448,790
Content-Encoding: null
network: Wrote URL http://hostname:port/path/ojdbc14.jar to File C:\path\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\534fe7f3-21a4d4ae-temp
security: Trusted libraries list file not found
cache: Create from verifier: JarSigningData{hasOnlySignedEntries=true, hasSingleCodeSource=true, hasMissingSignedEntries=false}
network: CleanupThread used 1 us
cache: Adding MemoryCache entry: http://hostname:port/path/ojdbc14.jar
basic: Plugin2ClassLoader.isTrustedByPolicy called 
basic: Plugin2ClassLoader.isTrustedByPolicy returns false 
security: resource name "oracle/jdbc/driver/OracleDriver.class" in http://hostname:port/path/ojdbc14.jar : java.lang.SecurityException: Trusted-Only loader attempted to load sandboxed resource from http://hostname:port/path/ojdbc14.jar
java.lang.SecurityException: Trusted-Only loader attempted to load sandboxed resource from http://hostname:port/path/ojdbc14.jar
at com.sun.deploy.security.CPCallbackHandler$ParentCallback.check(Unknown Source)
at com.sun.deploy.security.CPCallbackHandler$ParentCallback.access$1500(Unknown Source)
at com.sun.deploy.security.CPCallbackHandler$ChildElement.checkResource(Unknown Source)
at com.sun.deploy.security.DeployURLClassPath$JarLoader.checkResource(Unknown Source)
at com.sun.deploy.security.DeployURLClassPath$JarLoader.getResource(Unknown Source)
at com.sun.deploy.security.DeployURLClassPath$JarLoader.getResource(Unknown Source)
at com.sun.deploy.security.DeployURLClassPath.getResource(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at sun.plugin2.applet.Plugin2ClassLoader.findClassHelper(Unknown Source)
at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
..... java applet is loaded a java class in a third party jar that was signed, but is been treated as untrusted.....

Trusted-Library :: Mixed Code Enable
..............................
cache: Mark prevalidated: http://hostname:port/path/main.jar true tm=numbers cert=numbers
basic: Plugin2ClassLoader.getPermissions CeilingPolicy allPerms
security: Validate the certificate chain using CertPath API
security: The certificate hasnt been expired, no need to check timestamping info
security: Cannot find jurisdiction list file
security: The CRL support is disabled
security: The OCSP support is disabled
security: This OCSP End Entity validation is disabled
security: Checking if certificate is in Deployment denied certificate store
security: Checking if certificate is in Deployment permanent certificate store
basic: Embedding dialogs not enabled in Configuration
basic: exception: java.lang.NoClassDefFoundError: org/apache/log4j/Logger.
java.lang.RuntimeException: java.lang.NoClassDefFoundError: org/apache/log4j/Logger
at com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter.instantiateApplet(Unknown Source)
at sun.plugin2.applet.Plugin2Manager.initAppletAdapter(Unknown Source)
at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NoClassDefFoundError: org/apache/log4j/Logger
at com.path.MainClassApplet.init(MainClassApplet.java:line_number)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at java.lang.Class.newInstance0(Unknown Source)
at java.lang.Class.newInstance(Unknown Source)
at com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter$1.run(Unknown Source)
at java.awt.event.InvocationEvent.dispatch(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$200(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: org.apache.log4j.Logger
at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
... 27 more
Ignored exception: java.lang.RuntimeException: java.lang.NoClassDefFoundError: org/apache/log4j/Logger
basic: Dialog type is not candidate for embedding
basic: Removed progress listener: sun.plugin.util.ProgressMonitorAdapter@40ab5b6c
security: Reset deny session certificate store 
```

主 jar 小程序（富 Internet 应用程序）是使用带有 html 标记的 JavaServer Pages 文件（HTML 页面）中的 JavaScript 代码调用的。

据我了解，JavaScript 代码被视为未签名代码。当从 HTML 页面中的 JavaScript 代码访问已签名的小程序时，已签名的小程序将在安全沙箱中执行。这意味着签名的小程序本质上表现得像一个未签名的小程序。

我正在讨论是否应该将 JNLP 与 Deployment Tookit (deployJava.js) 一起使用来部署小程序，或者是否应该在主 JAR 文件的清单文件中将类添加到主 JAR 文件的类路径；其清单引用了一个不同的 JAR 文件（或几个不同的 JAR 文件），这些文件用作我的 applet 的实用程序。

*关于如何解决这个混合代码问题的任何想法？*

请指教，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:58:33.110

我可以确认问题出在最近的 JRE 上。从 JS 调用 Java 会给你一个“混合代码警告”。无论您如何签名或包含或不包含哪个库。所以上面的评论不再正确或不再正确（在最新的 JRE 升级之后，我正在使用 1.7.0_21）。

但幸运的是，它仍然可以毫无问题地从 java do javascript 调用，因此我们针对此类问题的解决方案是实现一个从 applet 轮询的 commad 队列，如下所示：

1) 将对小程序方法的每个调用包装在“请求对象”中并将其放入队列中，例如：

```
var jobQueue = [];

function hello(message) {
   request =  {
     cmd:"hello",
     arg:"Jack",
     callback:function(result) {
        alert("I'm saying "+result);
     }
   }
   jobQueue.push(request); 
} 
```

2) 创建一个方法，从小程序中调用以获取工作：

```
function fetchJob(){
  if (jobQueue.length>0) {
     return jobQueue.shift();
  }
} 
```

`fetchJob`3) 当applet 启动时，产生一个线程或定时器，每X 毫秒调用一次函数。当函数返回非空请求时，小程序就可以执行了。请求甚至可以携带（如上面的示例中）要调用的回调以返回结果

就这样。但请注意：如果您使用回调返回结果，请注意不要返回除本机对象之外的任何内容，否则您将再次收到混合代码警告。即使是字符串数组也不起作用。如果您需要创建更复杂的结果，您需要使用 liveconnect API 回调 javascript，并从 Java Applet 创建一个本机 JS 对象，然后使用它调用回调。

祝你好运！

# python - 将 Django 模板标签“with”与另一个模板标签的结果一起使用

> ID：15775315
> 
> 赞同：1
> 
> 时间：2013-04-02T22:08:17.067
> 
> 标签：python, django, django-templates

我有一个`comment_form.html`模板，它在我的应用程序的多个地方使用，我希望能够将端点的 url 从父模板传递到该模板。通常我会使用`with`标签来做到这一点：

```
{% with endpoint='/comments' %}
    {% include 'comment_form.html' %}
{% endwith %} 
```

问题是我不能`'/comments'`在这里使用字符串文字，而是需要一个 url 标签，如下所示：`{% url 'blog:comments:comments' username=post.user.username object_id=post.id %}`。模板标签似乎需要文字或上下文变量，`with`并且似乎无法理解“使用另一个模板标签的结果”。

一种解决方案是分别传递字符串'blog:comments:comments'、post.user.username、post.id。但这是一个问题，因为评论表单的不同用途可能需要不同的参数来唯一地定义端点。

如何使用`with`另一个模板标签的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T22:44:37.653

你不能，但你不需要。该`url`标签有另一种语法，将结果注入上下文：

```
{% url 'blog:comments:comments' username=post.user.username object_id=post.id as endpoint %} 
```

# c++ - C++ 中“受保护”说明符的实际使用

> ID：15775316
> 
> 赞同：3
> 
> 时间：2013-04-02T22:08:19.007
> 
> 标签：c++, protected

我知道这个说明符是如何工作的。

我对这些东西在实际编程中的实际使用很感兴趣。我无法想象任何真正需要受保护的类成员的例子（我的意思是当我们不能用“私有”替换“受保护”时）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T22:13:28.133

一个类有两个 API——一个用于实例化它并使用结果对象的代码，一个用于子类。

第一个 API 是`public`成员，而第二个是`public`和`protected`成员。有些操作和数据是子类可以访问的，而“普通用户”则不能访问。

作为一个具体的例子，想象一个 Windows GUI 类库。它包装并隐藏了普通的旧 Windows API。A`Window`代表一个窗口，并且有一个`HWND`which 是底层的 Windows 窗口句柄。`HWND`它对类的用户隐藏`Window`，因为这不关他们的事（或者如果他们可以使用它，它只通过只读访问器公开它）。但是`Window`，像`FrameWindow`or 的子类可以直接`EditControl`访问`HWND`：

```
class Window
{
public:
    void Show();  // Example public API

protected:
    HWND m_hwnd;
}; 
```

# c - 检查字符串是否改变

> ID：15775317
> 
> 赞同：0
> 
> 时间：2013-04-02T22:08:20.657
> 
> 标签：c, string, pointers

好的，所以我正在用 c 编程并想检查字符串是否改变了，所以起初我这样做了：

```
 if(strcmp (ax,result)!=0){
    result=ax;
        xil_printf(result);
        xil_printf("detected");
}
    } 
```

它只检测到 1 次，然后我发现我正在使 2 个指针相等，所以即使 ax 的先锋改变了也会发生结果，因为它们现在都指向同一个东西，但我不希望我只想要将结果的数据更改为等于 ax 的 ppointee 的数据，因为字符串 ax 稍后会在代码中更改，因此我可以检测到它何时发生。所以我尝试了这个：

```
if(strcmp (ax,result)!=0){
    *result=*ax;
        xil_printf(result);
        xil_printf("detected");
}
    } 
```

结果出现错误，无论如何如何做我想做的事情，我使结果数据等于 ax 但它们指向的不是同一件事：所以如果

```
ax-->"hello"  adrress: 232
result-->"frog"  adrress: 415 
```

我检测到它们是不同的，然后我这样做：

```
ax-->"hello"  adrress: 232
result-->"hello"  adrress: 415 
```

但不喜欢这样！：

```
ax-->"hello"  adrress: 232
result-->"hello"  adrress: 232   <--(they point at same thing which happens when i say result=ax) 
```

那么有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:33:12.483

你需要做`strcpy(result, ax);`

唯一的问题是，您需要确保 result 有足够的空间来存储 ax 中的内容

所以你的代码将是

```
if(strcmp(ax,result) != 0){   // result is different from ax
     strcpy(result, ax);      // copy ax to result
     xil_printf(result);
     xil_printf("detected");
} 
```

# git - git 工作流，创建本地分支删除并重新创建

> ID：15775318
> 
> 赞同：1
> 
> 时间：2013-04-02T22:08:22.133
> 
> 标签：git, github

我正在使用 git。到目前为止，我们是两个团队成员，致力于一个项目。到目前为止，这两项工作都略微独立，一个专注于 UI，另一个专注于 api。我喜欢每天签到多次。我的典型工作流程是：

[http://amiridis.net/posts/13](http://amiridis.net/posts/13)

所以我创建了一个功能分支，然后处理它，将它合并到主分支，然后推送它。删除分支并重新创建相同的分支。

该产品仍然是第一个版本，我们有一个持续集成构建服务器设置。推送的主要目的是获取监督者的增量更新。

我的问题是，

*   如果我还没有完全完成一个功能，如果它仍然是版本 1，将小单元的可编译更改推送到主分支上的主服务器是一个好习惯吗？
*   创建分支，合并到主，推送它，删除本地分支然后重新创建它是一个好习惯吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T00:06:52.437

**问题 #1**

> 如果我还没有完全完成一个功能，如果它仍然是版本 1，将小单元的可编译更改推送到主分支上的主服务器是一个好习惯吗？

不，将未完成的代码引入主分支通常不是一个好习惯。您应该始终有一个模仿生产代码状态的分支。对于大多数人来说，这个分​​支被称为`master`.

为什么这很重要的一个例子是生产中的错误。如果您已经在主分支中引入了一堆半完成的工作，那么您发布的任何修复也将包括未完成的工作。此外，如果其他开发人员从该分支中​​撤出，并且您添加了未经测试的代码，则可能会使他们的开发复杂化。

即使您的代码尚未发布 - 您也希望拥有一个仅包含工作且经过全面测试的代码的分支。一般来说，您应该尝试尽可能地分解功能并测试小的更改。如果它们不会对已经在工作的其他任何东西产生负面影响，它们可以合并到主分支中。

无论您如何工作，您都应该尝试保留一个具有某种“权限”级别的分支 - 一个仅在满足某些条件后才合并的分支。这个标准是什么，取决于你。

您可能会决定保留一个主分支，该分支的唯一修改时间是发布新版本时。相反，您决定在您的工作经过测试后立即合并到您的主分支中。您如何决定这样做通常取决于发布策略和更广泛的工作流程。

**问题2**

> 创建分支，合并到主，推送它，删除本地分支然后重新创建它是一个好习惯吗？

无法回答是/否。对于团队如何处理代码版本控制、成员之间的协作和发布周期，有许多策略。

一般来说，在合并到主分支后立即删除分支是一种很好的做法。通常最好摆脱并避免继续使用相同的分支（通常称为具有“长寿命”的分支）。在大多数情况下，短期分支是个人开发任务的首选——但这可能会根据您的团队偏好和选择而改变。

**工作流程问题**

你有一个小团队，你的代码还没有发布——所以压力会更低，解决方案也会更容易，因为只有你们两个。然而，一旦你的产品上市，解决错误的压力就会更大——可能会出现发布修补程序/补丁的需求。发布周期将因越来越多的同步开发而复杂化。随着您将越来越多的开发人员添加到您的团队中，并且对版本控制有不同程度的理解，协作将变得更加混乱和容易出错。

因此，我建议您在决定工作流程时牢记以下几点。

*   Hotfixes/Patches - 如果您已经完成了版本 2 的一半，但现在您在 1.0 中发现了一个严重错误，那么在没有它的情况下发布 v1.1 是多么容易，包括 2.0 的不完整工作
*   回滚 - 如果在此过程中引入了错误，您可以轻松地退出错误版本吗？
*   分隔 - 尽量不要与没有专门从事同一工作的团队成员共享损坏或未经测试的代码。如果我在开发时总是拉入您未经测试的代码，我将很难知道错误是由我引起的，还是由其他团队成员引起的代码中其他地方的更改引起的。只有在经过测试和验证后，我才应该引入其他人的代码。通过使分支保持短暂的生命周期，并进行小的、易于测试的更改——这些经过测试的更新将更快地传递给您的团队成员，并且会更快地发现错误。
*   协作 - 有时人们实际上需要彼此的代码才能继续他们自己的工作。这就是为什么短暂的、微小的变化很重要。然而，有时两个人实际上是在做完全相同的事情——他们一起在相同的功能上工作。在这种情况下，他们在同一个远程分支上工作是合理的。但是请注意，git-reset、git-rebase、执行强制推送或执行任何修改远程提交的操作都会给你的队友带来很大的伤害。共享分支时，请注意该分支的历史记录。
*   复杂性 - 团队成员对一般版本控制和特别是 git 的理解程度不同。即使他们都是 git 专家，通常越简单越好。任何人为了测试某样东西、将某样东西合并到一个权威分支或与其他开发人员共享代码而必须执行的步骤数应该保持在尽可能低的水平。这是每个人每天都会做很多次的事情。复杂的流程不仅会占用开发人员的时间，而且每个人都更容易出错，经验不足的人更容易出错。当其他人努力解决问题时，这些错误可能会导致进一步的延迟。这种考虑通常与其他考虑相反，因为其他考虑往往意味着增加更多层次的复杂性。只要记住要控制这种复杂性。

一个流行的工作流程被称为“ [git flow](http://nvie.com/posts/a-successful-git-branching-model/) ”，甚至还有一个[命令行工具](https://github.com/nvie/gitflow)来帮助自动化所涉及的步骤。作为一个小团队，你可能会发现它过于复杂——但我建议如果你有一个基于迭代的发布周期，这是你*至少*应该做的。

我其实不是 git-flow 的忠实粉丝，只是因为我觉得它实际上过于简单和二维。（我不喜欢“分散但集中”，我更喜欢实际分布式的工作流程）。

但是，如果您的发布周期非常快——在这种情况下，您可能希望采用[github 本身使用的模型](http://scottchacon.com/2011/08/31/github-flow.html)。他们的模型与您的模型相似，因为它们只是合并到 master 中-但是它们仅在代码通过了一些自动化测试后才这样做。github 所做的关键点还在于它们每天部署多次——而不是像大多数团队那样在发布周期内进行部署。这样一来，几乎总是会在最近引入将其投入生产的错误。这是一个更简单的策略，但并不适合所有人，请记住上面的要点，尤其是如果您有更典型的发布周期。

# mysql - SQL 连接和左外连接：为什么结果不同？

> ID：15775324
> 
> 赞同：11
> 
> 时间：2013-04-02T22:08:54.790
> 
> 标签：mysql, sql

我有一张桌子`partenaire`。合伙人可能有一个或多个地址。当然，一个地址可能“属于”多个合伙人。所以我有 3 个表`partenaire`：`partenaire_adresse`和`adresse`。该地址只有一个城镇（`ville`法语），所以我`id_ville`在表中有一个外键`addresse`。

```
SELECT
    p.nom,
    v.nom, v.id_region as id_r, v.id_departement as id_p,
    r.description as region
FROM partenaire p
JOIN partenaire_adresse pa
    ON pa.id_partenaire=p.id
JOIN adresse a
    ON a.id=pa.id_adresse
JOIN ville v
    ON v.id=a.id_ville
JOIN region r
    ON v.id_region=r.id
LIMIT 4; 
```

这给了我这些结果：

```
+----------------------------+-------------+------+------+--------+
| nom                        | nom         | id_r | id_p | region |
+----------------------------+-------------+------+------+--------+
| Ferme Auberge Christlesgut | Breitenbach |    1 |    2 | Alsace | 
| Alice Pizza                | Strasbourg  |    1 |    1 | Alsace | 
| Au Vieux Cellier           | Strasbourg  |    1 |    1 | Alsace | 
| Auberge du 7Eme Art        | Strasbourg  |    1 |    1 | Alsace | 
+----------------------------+-------------+------+------+--------+ 
```

现在，如果我`LEFT OUTER JOIN`在最后一张表 ( `region`) 上执行 a ，结果将不一样：

```
SELECT
    p.nom,
    v.nom, v.id_region as id_r, v.id_departement as id_p,
    r.description as region
FROM partenaire p
JOIN partenaire_adresse pa
    ON pa.id_partenaire=p.id
JOIN adresse a
    ON a.id=pa.id_adresse
JOIN ville v
    ON v.id=a.id_ville
LEFT OUTER JOIN region r
    ON v.id_region=r.id
LIMIT 4; 
```

不一样的结果。看：

```
+---------------------+----------+------+------+----------------+
| nom                 | nom      | id_r | id_p | region         |
+---------------------+----------+------+------+----------------+
| 'Le 144' Petrossian | Paris 18 |   12 |   43 | Île-de-France  | 
| 'Le 144' Petrossian | Paris 08 |   12 |   43 | Île-de-France  | 
| 'O'Quai'            | Vouvray  |    7 |   26 | Centre         | 
| 'O'Quai'            | Tours    |    7 |   26 | Centre         | 
+---------------------+----------+------+------+----------------+ 
```

我认为不应该，因为在第一个查询中，id_region 和 id_departement 不为空，所以如果你做一个“JOIN”或“LEFT OUTER JOIN”，结果应该是一样的。还是我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T22:16:55.517

您遇到的问题与没有指定顺序时 SQL 不保证结果的顺序有关。如果添加 ORDER BY 子句，则应该得到相同的结果，前提是表在所有行上都有匹配的键（当然）。

# java - 使用 AVL 树 findAll() 方法实现字典

> ID：15775326
> 
> 赞同：1
> 
> 时间：2013-04-02T22:09:06.257
> 
> 标签：java, dictionary, tree, avl-tree

我正在尝试使用 AVL 树实现 Dictionary ADT，但 findAll(K key) 方法遇到了问题。我知道如何使用 entry() 方法并遍历每个方法来做到这一点，但我需要我的方法为 O(logn)，所以我需要使用 treeSearch(key, position) 方法。我的字典看起来像这样： public class FoodDictionary, V> implements Dictionary {

```
/** List in which all the entries are stored. */
private AVLTree<K,V> dictionary;

/** Create a new, empty unordered Dictionary. */
public FoodDictionary() {
    dictionary = new AVLTree<K,V>();
}

/**
 * FOR TESTING PURPOSES ONLY! 
 */
protected AVLTree<K,V> getTree(){
    return dictionary;
}

/**
 * Returns an iterable object of all the entries in the tree
 * @returns the tree, an iterable object
 */
public Iterable<Entry<K, V>> entries() {
    return dictionary;
}

/**
 * Returns the first entry found with the matching
 * key.
 * @param key the key to be found
 * @return the first entry found 
 */
public Entry<K, V> find(K key) {
    return dictionary.find(key).element();
}

/**
 * Returns all of the entries with the given key
 * 
 * @param key the key to be found 
 * @return an iterable object containing all the 
 * entries found with the given key
 */
public Iterable<Entry<K, V>> findAll(K key) {
    PLSequence<Entry<K,V>> list = new PLSequence<Entry<K,V>>();
    for(Entry<K,V> entry : entries()){
        if(entry.getKey().equals(key)){
            list.addLast(entry);
        }
    }
    return list;
}

/**
 * Returns the size of the dictionary
 * @return the size of the dictionary
 */
@Override
public int size() {
    return dictionary.size();
}

/**
 * Returns whether or not the dictionary 
 * is empty
 * @return true if the dictionary is empty
 *          false if the dictionary is not empty
 */
@Override
public boolean isEmpty() {
    return dictionary.isEmpty();
}

/**
 * Adds an entry to this dictionary
 * @param key they key of the new entry
 * @param value the value of the new entry
 * @return the new entry added to the dictionary
 * @throws InvalidKeyException if the given key was not valid
 */
@Override
public Entry<K, V> insert(K key, V value) throws InvalidKeyException {
    return dictionary.add(key, value);
}

/**
 * Removes an entry from this dictionary
 * @param e the entry to be removed
 * @return the entry removed or null if it was not found
 * @throws InvalidEntryException if the entry input was invalid
 */
@Override
public Entry<K, V> remove(Entry<K, V> e) throws InvalidEntryException {
    return dictionary.remove(e.getKey());
}
} 
```

目前，就像我说的那样，我的 findAll() 正在使用 entries() 进行迭代，但我需要以某种方式使用 treeSearch() 任何人都可以帮助我完成这个实现吗？我没有太多时间来完成它，而且我完全迷失了想法。任何帮助表示赞赏！

# objective-c - 目标-c：委托 performSelectorInBackground

> ID：15775334
> 
> 赞同：0
> 
> 时间：2013-04-02T22:09:31.997
> 
> 标签：objective-c, multithreading, delegates, core-bluetooth

我注意到 Corebluetooth 库正在主线程上运行，它似乎冻结了 viewController 的 UI。为了解决这个问题，我想通过调用这个函数将 CoreBluetooth 委托放在一个单独的线程（后台线程）中。

```
[self performSelectorInBackground:@selector(peripheralbackground:) withObject:_peripheral]; 
```

它确实产生了一个运行选择器的新线程，看起来像这样..

```
- (void)peripheralbackground:(CBPeripheral *)per {
    [per setDelegate:self];
    [per discoverServices:[serviceNames allKeys]];
} 
```

本质上，我希望在主 UI 线程之外的单独线程上调用回调。任何想法将不胜感激....谢谢

更新：

我在回调中使用了以下内容；但是，我在功能块中遇到了一些并发问题......当我们将工作卸载到后台线程时，我认为一切都应该在某种类型的 FIFO 队列中。我绝对可以看到这些线程肯定是相互交织的..

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{}

我想将工作从后台线程卸载，但以串行队列类型的方式运行。

世界上到底发生了什么:(

# java - Swing 事件处理程序中的无闪烁 JComponent 呈现

> ID：15775338
> 
> 赞同：4
> 
> 时间：2013-04-02T22:09:38.497
> 
> 标签：java, swing, animation, concurrency, event-dispatch-thread

我正在编写一个简单的 Java Swing 应用程序，该应用程序被设计为课程演示。该程序的目的是可视化递归方法的进度（特别是迷宫的递归解决方案）。我希望能够在递归方法执行时更新 JComponent 的外观，因此从 Swing 的角度来看，不能从 Timer 类单独触发更新，我认为这是动画的常用方法。

我的第一个想法就是每当我想重绘可视化时调用 repaint() 。但是递归方法本身是在 JButton 的事件处理程序中调用的，这意味着对 repaint() 的所有调用都会延迟到事件处理程序终止——我看到的只是动画的最后一帧。我发现如果我改为调用 update() 可以立即进行绘图，如下所示：

```
getRootPane().getContentPane().update(getGraphics());
try {
    Thread.sleep(25);
} catch (Exception e) {
} 
```

这几乎可以工作，除了动画闪烁。我知道 Swing 是双缓冲的，但显然 getGraphics 给了我活动缓冲区而不是后台缓冲区。我看不到任何可以让我访问后台缓冲区的方法。

所以我正在寻找一种解决方案，它允许我在递归中间重新绘制组件并给我一个无闪烁的动画。有没有办法在事件处理程序执行时激活内置的双缓冲？尝试实现我自己的缓冲系统会更好吗？或者我试图用 Swing 做的事情是不可能的/不可取的？

（作为最后一点，这是我在这里的第一篇文章。我试着写一个很好的问题，但如果我遗漏了什么，请告诉我，我下次会努力做得更好。谢谢！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:34:16.447

首先，您[不应该在 Event Dispatch Thread 中执行长时间运行的操作](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)，我认为这是您的动画闪烁的原因之一。

所以我建议在按下按钮时启动一个执行递归方法的线程（并且可能在工作完成之前将其停用）。

要渲染动画，您可以`myComponent.repaint()`从递归方法中调用，也可以启动一个 Swing Timer（感谢@mKorbel 指出），它基本上如下所示：

```
ActionListener repaintTrigger = new ActionListener() {
      public void actionPerformed(ActionEvent evt) {
          myComponent.repaint();
      }
};
new Timer(25, repaintTrigger).start(); 
```

我推荐后一种方法，因为您的递归方法可能对 Swing 组件一无所知（除非您通过“ProgressListener”或其他方式将其解耦）。

看起来你不仅仅是初学者，我只是给出了一些关于做什么的提示。如果您需要更多输入，请随时提出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:27:32.333

我实际上不知道这是否有效，但是。我会尝试使其成为多线程并将递归与图形分开。我不知道这是否适用于 java，但它确实适用于 C#。

# apache - 使用 apache 服务器 2.2 进行负载平衡

> ID：15775341
> 
> 赞同：0
> 
> 时间：2013-04-02T22:09:41.993
> 
> 标签：apache, url-rewriting, apache2, load-balancing

我有一个关于 apache 负载平衡配置的问题。

Scenerio：我有两个相同的 wopress 博客

> 本地主机：8001/
> 
> 本地主机：8002/

和一个 apache 负载均衡器站在`localhost:80`

// ***_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* _ *_* __ *_* __ *_* _**

apache负载均衡器的配置：

```
<VirtualHost *:80>
ServerName localhost 
```

`ProxyRequests Off`

`ProxyStatus On`

`#ProxyPreserveHost On`

```
ProxyPass / balancer://mycluster/

#ProxyPassReverse / balancer://mycluster/ 
```

# 如果我取消注释上面的行，我将得到一个重定向循环和错误 GET / HTTP/1.1" 301

```
<Proxy balancer://mycluster>
    BalancerMember localhost:8001/ loadfactor=3
    BalancerMember localhost:8002/ loadfactor=7
   ProxySet lbmethod=request
</Proxy> 
```

问题是 apache 负载均衡器进行了重定向（地址 uri 从 localhost =>localhost:8001 或从 localhost 更改为 localhost:8002 ）。我希望只有 uri“localhost”（所以源的 uri 被隐藏）我会在 8001|2 端口上找到安装的博客之一。

我尝试使用 rewrite 模块，但它没用，它使无休止的循环。:(

拜托，你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:36:57.340

更多信息以更好地理解该问题：

![在此处输入图像描述](https://i.stack.imgur.com/jEuEQ.jpg)

网页浏览效果：

![在此处输入图像描述](https://i.stack.imgur.com/7l9DS.jpg)

为什么负载均衡器进行重定向？是否可以隐藏源 URI？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:16:05.107

问题在于 BalancerMembers 行末尾的“斜线”。

它应该是 ：

```
 BalancerMember http://localhost:8001
            # WebHead2
            BalancerMember http://localhost:8002 
```

在欧洲

```
 BalancerMember http://localhost:8001/
            # WebHead2
            BalancerMember http://localhost:8002/ 
```

小心“斜线”。

# javascript - 如何让 navigator.registerProtocolHandler() 工作

> ID：15775342
> 
> 赞同：1
> 
> 时间：2013-04-02T22:09:42.903
> 
> 标签：javascript, protocols

我想编写一个在自定义协议中打开链接的 Web 应用程序，例如`myprotocol:someinformationgoeshere`. 你知道，有点像mailto:。例如，如果人们在他们的 HTML 中有这样的链接：`<a href="myprotocol:someinformationgoeshere">link</a>`它将通过我的 Web 应用程序打开该链接。

但是，我似乎无法完成这项工作。我发现的唯一东西是 registerProtocolHandler() ，由于安全问题，这似乎不起作用。

# html - Google 地图的 html 代码无法正常工作

> ID：15775348
> 
> 赞同：0
> 
> 时间：2013-04-02T22:10:13.887
> 
> 标签：html, google-maps

我只是在学习如何在我的代码中使用谷歌地图，但我无法让实际地图出现在浏览器屏幕上。出现的只是两个下拉框，允许用户选择他们的开始和结束位置。任何帮助将不胜感激！

**方向.html**

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
<meta charset="utf-8">
<title>Google Maps JavaScript API v3 Example: Directions Simple</title>
<link href="/maps/documentation/javascript/examples/default.css" rel="stylesheet">
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
<script>
  var directionDisplay;
  var directionsService = new google.maps.DirectionsService();
  var map;

  function initialize() {
    directionsDisplay = new google.maps.DirectionsRenderer();
    var chicago = new google.maps.LatLng(41.850033, -87.6500523);
    var mapOptions = {
      zoom:7,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: chicago
    }
    map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
    directionsDisplay.setMap(map);
  }

  function calcRoute() {
    var start = document.getElementById('start').value;
    var end = document.getElementById('end').value;
    var request = {
        origin:start,
        destination:end,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
    };
    directionsService.route(request, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
      }
    });
  }
 </script>
 </head>
 <body onload="initialize()">
 <div>
 <b>Start: </b>
 <select id="start" onchange="calcRoute();">
  <option value="chicago, il">Chicago</option>
  <option value="st louis, mo">St Louis</option>
  <option value="joplin, mo">Joplin, MO</option>
  <option value="oklahoma city, ok">Oklahoma City</option>
  <option value="amarillo, tx">Amarillo</option>
  <option value="gallup, nm">Gallup, NM</option>
  <option value="flagstaff, az">Flagstaff, AZ</option>
  <option value="winona, az">Winona</option>
  <option value="kingman, az">Kingman</option>
  <option value="barstow, ca">Barstow</option>
  <option value="san bernardino, ca">San Bernardino</option>
  <option value="los angeles, ca">Los Angeles</option>
</select>
<b>End: </b>
<select id="end" onchange="calcRoute();">
  <option value="chicago, il">Chicago</option>
  <option value="st louis, mo">St Louis</option>
  <option value="joplin, mo">Joplin, MO</option>
  <option value="oklahoma city, ok">Oklahoma City</option>
  <option value="amarillo, tx">Amarillo</option>
  <option value="gallup, nm">Gallup, NM</option>
  <option value="flagstaff, az">Flagstaff, AZ</option>
  <option value="winona, az">Winona</option>
  <option value="kingman, az">Kingman</option>
  <option value="barstow, ca">Barstow</option>
  <option value="san bernardino, ca">San Bernardino</option>
  <option value="los angeles, ca">Los Angeles</option>
</select>
</div>
<div id="map-canvas" style="top:30px;"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:23:04.630

此文件用于设置您复制的示例中地图 div 的大小：

/maps/documentation/javascript/examples/default.css

其中包含：

```
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}

#map-canvas, #map_canvas {
  height: 100%;
}

@media print {
  html, body {
    height: auto;
  }

  #map_canvas {
    height: 650px;
  }
} 
```

它在您的服务器上不存在，请将其复制到那里，将内容复制到您的 HTML 文件（在`<style>`标签内），或链接到 Google 服务器上的文件（不推荐，因为它可能会更改，但它会使地图​​显示向上）。

# java - 私人访问控制

> ID：15775350
> 
> 赞同：0
> 
> 时间：2013-04-02T22:10:26.573
> 
> 标签：java

我只是在想，我想知道：因为访问控制只是为了防止意外而不是防止欺诈，所以我想知道是否可以访问 Java 中隐藏变量的值？

举个例子

```
public Cat {

public int numberOfLegs = 4;
private int numberOfWhiskers = 42;

} 
```

是否可以从此类之外找到 numberOfWhiskers 的值？

编辑：我已经阅读了链接中的线程，我可以看到通过使用 SetAccesible() 您可以获得您知道名称的任何私有字段的值。**我们能找到一个我们不知道名字的字段的值吗？**

注意：这**可以**在某些语言（例如 C++）中完成，例如通过使用指针在类中的字段之间进行迭代。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T22:16:08.203

您可以使用反射绕过`private`检查。使用[`Class#getDeclaredField`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getDeclaredField%28java.lang.String%29)方法和[`Field#getInt`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Field.html#getInt%28java.lang.Object%29)方法（还有其他访问器）。

此代码可以在另一个类中：

```
Cat myCat = new Cat();
int whiskers;

try
{
    Field field = Cat.class.getDeclaredField("numberOfWhiskers");
    // This line bypasses the private control
    field.setAccessible(true);
    whiskers = field.getInt(myCat);
}
catch (NoSuchFieldException e) { /* Handle */ }
catch (IllegalAccessException e) { /* Handle */ } 
```

**编辑**

我已经看到了重复问题的链接。我必须同意，通常情况下，不要这样做。

**第二次编辑**

作为对附加编辑问题的回应，您可以使用该[`Class#getDeclaredFields`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getDeclaredFields%28%29)方法返回 a `Field[]`，您可以使用它来迭代该类的所有字段。

```
Field[] fields = Cat.class.getDeclaredFields();
// Iterate over the array here. 
```

# java - 从流中读取字符串而不是字符

> ID：15775351
> 
> 赞同：0
> 
> 时间：2013-04-02T22:10:29.510
> 
> 标签：java

我有一`ArrayList`堂课并试图将其保存到文件中。我正在编写一个小测试方法来将字符串保存到文件中，然后加载它们。

我在`FileWriter`类中找到了一个写字符串的方法。`FileReader`我在字符串中找不到任何读取方法。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T22:14:00.307

`BufferedReader`与方法一起使用`readLine()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T22:14:49.003

`ArrayList`将 an 存储在文件中的最简单方法是使用[`ObjectOutputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html)：

```
ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(yourfile));
oos.writeObject(list); 
```

要恢复您使用的数组列表[`ObjectInputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectInputStream.html)：

```
ObjectInputStream ois = new ObjectInputStream(new FileInputStream(yourfile));
ArrayList list = (ArrayList) ois.readObject(); 
```

这些类的序列化格式确保您可以安全地存储具有任何字符类的字符串，而不必担心破坏输出。基于行的存储，例如在使用时`BufferedReader.readLine`不允许您恢复带有嵌入换行符的字符串。

# intuit-partner-platform - ItemId 在账单行项目中指的是什么

> ID：15775352
> 
> 赞同：0
> 
> 时间：2013-04-02T22:10:46.563
> 
> 标签：intuit-partner-platform, quickbooks-online

账单文档：[http ://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0400_QuickBooks_Online/Bill](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0400_QuickBooks_Online/Bill)

我得到了令人困惑的错误，并试图弄清楚 ItemId 在行项目中指的是哪种项目。一旦我在订单项上指定了金额，它就需要指定 ItemId，但我不确定它正在寻找什么类型的对象。

有谁知道需要什么类型的 ItemId ？此外，是否也有文档中引用的常量列表？“SHIPPING_LINE_ID”和“DEPOSIT_LINE_ID”都在描述栏中提及。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T11:46:46.117

尼克，
这是 QBO 中的一个项目对象[http://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0400_QuickBooks_Online/Item](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0400_QuickBooks_Online/Item)

您引用要为其创建账单的项目。如果该项目不存在，您需要先创建它，然后创建一个引用它的账单。

谢谢贾里德
_

# java - 如何让 DocumentFilter 与 JComboBox 一起工作

> ID：15775356
> 
> 赞同：0
> 
> 时间：2013-04-02T22:10:59.913
> 
> 标签：java, swing, jcombobox, keylistener, documentfilter

我之前用 DocumentListener 试过这个，但这也给了我在听到一些东西后编辑 Document 的问题。现在我正在尝试对 DocumentFilter 做同样的事情，它似乎正在工作。

```
public class InputField extends JComboBox<String>{

//for finding suggestions
private SuggestionFinder _finder;
//the model to use for adding items
private DefaultComboBoxModel<String> _model;

public InputField(SuggestionFinder finder){
    super();
    _model = new DefaultComboBoxModel();
    this.setModel(_model);
    maximumRowCount = 5;
    this.setEditable(true);
    Dimension d = new Dimension(300, 75);
    this.setMinimumSize(d);
    this.setMaximumSize(d);
    _finder = finder;
    Component edComp = editor.getEditorComponent();
    Document document = ((JTextComponent)edComp).getDocument();
    if (document instanceof PlainDocument) {
     ((PlainDocument) document).setDocumentFilter(new DocumentFilter() {
        @Override
        public void insertString(FilterBypass fb, int offset,
              String string, AttributeSet attr) throws BadLocationException {
            System.out.println("1");
            Document d = fb.getDocument();
            giveSuggestions(d.getText(0, d.getLength()));
            super.insertString(fb, offset, string, attr);
        }

        @Override
        public void remove(FilterBypass fb, int offset, int length)
              throws BadLocationException {
            System.out.println("2");
            Document d = fb.getDocument();
            giveSuggestions(d.getText(0, d.getLength()));
            super.remove(fb, offset, length);
        }

        @Override
        public void replace(FilterBypass fb, int offset, int length,
              String text, AttributeSet attrs) throws BadLocationException {
            System.out.println("3");
            Document d = fb.getDocument();
            giveSuggestions(d.getText(0, d.getLength()));
            super.replace(fb, offset, length, text, attrs);
        }
     });
  }
}

private void giveSuggestions(String word){
    System.out.println(word);
    _model.removeAllElements();
    if (word.equals("")){
        this.hidePopup();
    }
    else{
        this.showPopup();
        /*List<String> suggs = _finder.getSuggestions(word);
        for (int i = 1; i <= suggs.size(); i++){
            _model.addElement(suggs.get(i-1));
        }*/
        for (int i = 0; i < 5; i++){
            System.out.println("adding");
            _model.addElement("" + Math.floor(Math.random()*100));
        }
    }
    System.out.println("done");
}

public static void main(String[] args) throws IOException{
    //instantiate a finder, how I do this isn't really relevant to my issue
    InputField field = new InputField(finder);
    JFrame frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.add(field);
    frame.pack();
    frame.setVisible(true);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:31:37.983

有些东西告诉我你不想这样做，而是你真的想使用 DocumentFilter。例如：

```
import java.io.IOException;
import javax.swing.*;
import javax.swing.text.*;

public class DocFilterEg {
   public static void main(String[] args) throws IOException {
      JPanel panel = new JPanel();      
      InputField2 field2 = new InputField2();

      panel.add(field2.getCombo());

      JFrame frame = new JFrame();
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.add(panel);
      frame.pack();
      frame.setVisible(true);
   }
}

class InputField2 {
   String[] foo = {"1", "2", "3"};
   private JComboBox<String> combo = new JComboBox<String>(foo);

   public InputField2() {
      combo.setEditable(true);
      Object editorComponent = combo.getEditor().getEditorComponent();
      Document document = ((JTextComponent)editorComponent).getDocument();

      if (document instanceof PlainDocument) {
         ((PlainDocument) document).setDocumentFilter(new DocumentFilter() {
            @Override
            public void insertString(FilterBypass fb, int offset,
                  String string, AttributeSet attr) throws BadLocationException {

               Document doc = fb.getDocument();
               StringBuilder sb = new StringBuilder();
               sb.append(doc.getText(0, doc.getLength()));
               System.out.println("Original String: " + sb.toString());
               sb.insert(offset, string);
               System.out.println("New String:      " + sb.toString());

               super.insertString(fb, offset, string, attr);
            }

            @Override
            public void remove(FilterBypass fb, int offset, int length)
                  throws BadLocationException {

               Document doc = fb.getDocument();
               StringBuilder sb = new StringBuilder();
               sb.append(doc.getText(0, doc.getLength()));
               System.out.println("Original String: " + sb.toString());
               sb.delete(offset, offset + length);
               System.out.println("New String:      " + sb.toString());

               super.remove(fb, offset, length);
            }

            @Override
            public void replace(FilterBypass fb, int offset, int length,
                  String text, AttributeSet attrs) throws BadLocationException {

               Document doc = fb.getDocument();
               StringBuilder sb = new StringBuilder();
               sb.append(doc.getText(0, doc.getLength()));
               System.out.println("Original String: " + sb.toString());
               sb.replace(offset, offset + length, text);
               System.out.println("New String:      " + sb.toString());

               super.replace(fb, offset, length, text, attrs);
            }
         });
      }
   }

   public JComponent getCombo() {
      return combo;
   }
} 
```

**正如我昨天在你上一篇文章中提到的那样进行**编辑。****

# java - 在准备好的语句中输入一组数字

> ID：15775357
> 
> 赞同：0
> 
> 时间：2013-04-02T22:11:03.873
> 
> 标签：java, sql, jdbc

我想`prepared statement`一次性输入一组数字。这是我正在尝试的

```
String parameters = "2,6,9";
preparedStatement = connection.prepareStatement("SELECT * FROM user WHERE id IN (?)");
preparedStatement.setString(1, parameters); 
```

然而，这只给了我第一个人（第 2 个人）。这是 b/c 我在`IN`参数中发送一个字符串。当您打印`preparedStatement.toString()`到控制台时，发送到数据库的结果是

```
SELECT * FROM user WHERE id IN ('2,6,9') 
```

所以我的问题是周围的蜱虫，我需要以某种方式把它们弄出来。有任何想法吗？

Ps：我知道我可以用逗号分割字符串并沿着这条路走，因为我已经实现了它。但是，如果可能的话，我想避免这种情况。寻找更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:18:41.023

尝试设置所有值：

```
PreparedStatement stmt = conn.prepareStatement(
    "select id, name from users where id in (?, ?, ?)");
stmt.setInt(1);
stmt.setInt(2);
stmt.setInt(3); 
```

注意：这是来自此[问题中给出的](https://stackoverflow.com/questions/178479/preparedstatement-in-clause-alternatives)[javaranch](http://www.javaranch.com/journal/200510/Journal200510.jsp#a2)页面上的示例。

# ruby-on-rails - 将项目传递给助手时如何处理它们的集合？

> ID：15775358
> 
> 赞同：0
> 
> 时间：2013-04-02T22:11:10.770
> 
> 标签：ruby-on-rails, ruby

我有一个助手接收一组附件集合并尝试计算图像是否为正方形。

在视图上，我有一个条件`suggestion_grid_square?(@attachments)`，而辅助方法是。

（我已经简化了代码，让这个问题的问题更清楚）

```
 def suggestion_grid_square?(*attachments) 
    suggestion_column_squares?(1,attachments)
  end

  def attachment_square?(attachment)
    (attachment.file_height.to_f / attachment.file_width) <= 1
  end

  private

  def suggestion_column_squares?(column,*attachments)
    attachments.each do |attachment|
      attachment_square?(attachment)
    end
  end 
```

以下代码向我返回此错误：`undefined method file_height for #<Array:0x007fa827e9af30>`

`app/helpers/suggestions_helper.rb:8:in `attachment_square?' app/helpers/suggestions_helper.rb:15:in `block in suggestion_column_squares?'`

知道为什么它没有收到该`file_height`属性或我在这里做错了什么吗？

**更新**这是我创建集合的方式以及我在视图上调用助手的方式：

```
boutique_products = Product.by_most_recent.sold_or_designed_by(boutique).shuffle.first(4)
boutique_products.each { |product| (@attachments << product.default_attachment_or_first_attachment) } 

.follow-boutique-grid{class: ("square-suggestion-grid" if suggestion_grid_square?(@attachments)) } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:21:46.153

在`suggestion_grid_square?`中，附件已经是来自 splat 参数 (*attachments) 的数组。然后你将它传递给`suggestion_column_squares?`which 再次引发争论。但是由于附件已经是一个数组，所以 splat 只会创建一个数组的数组。因此，您的附件变量内部`suggestion_column_squares?`看起来像：

```
[[attachment1, attachment2, etc...]] 
```

当您调用 时`each`，您实际上只是在外部元素循环 1 次并传入一个数组。这就是为什么在调用`file_height`数组时会出错的原因，因为`attachment`（在 each 中）不是您所期望的。

您应该从以下附件参数中删除 splat 运算符 (*) `suggestion_column_squares?`：

```
def suggestion_column_squares?(column, attachments)
  attachments.each do |attachment|
    attachment_square?(attachment)
  end
end 
```

# css - 如何模糊 Div 边缘

> ID：15775365
> 
> 赞同：15
> 
> 时间：2013-04-02T22:11:34.677
> 
> 标签：css, html

使用 CSS，

像下面这样：http: [//gyazo.com/ff14a415cf7ac8622eb0cada3e23137f](http://gyazo.com/ff14a415cf7ac8622eb0cada3e23137f)

我希望我们使用 CSS（最好不是 CSS3）来获得边缘和角落以产生这种效果，而不仅仅是尖锐的边缘。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-02T22:14:03.120

您可以通过使用`box-shadow`与 div 的背景颜色相同的颜色来实现此效果，如下所示：

```
.blur-box {
    background-color: #555;
    box-shadow: 0 0 5px 10px #555;
} 
```

您可以调整第二个和第三个参数（`5px`和`10px`此处）以调整阴影的相对大小和模糊半径（分别）以获得所需的方式，并且现代浏览器很好地支持此功能（请参阅：[http： //caniuse.com/#feat=css-boxshadow](http://caniuse.com/#feat=css-boxshadow)）。

这是一个 jsFiddle 演示：http: [//jsfiddle.net/bXAFt/](http://jsfiddle.net/bXAFt/)

# jquery - Jquery航点粘滞问题

> ID：15775372
> 
> 赞同：1
> 
> 时间：2013-04-02T22:12:14.420
> 
> 标签：jquery, sticky, jquery-waypoints

我试图使用 jquery 航点来产生一些粘性导航，但我遇到了问题。

在页面上

```
<script src="js/waypoints-sticky.min.js"></script>
<script src="js/waypoints.js"></script>
<script src="js/waypoints-sticky.js"></script>
<script type="text/javascript" charset="utf-8">

    $(document).ready(function(){
         $(window).resize(function(){
             $('#mainsplash').css("height", ($(window).height() - 200) + "px");
         });
         $('#mainsplash').css("height", ($(window).height() - 200) + "px");
         $('.sticky1').waypoint('sticky', {
          offset: 0 // Apply "stuck" when element 30px from top
        });
    });

</script> 
```

CSS

```
.stuck{position: fixed; top: 0;} 
```

问题 1：似乎不适用于 div？如果我应用一个带有“sicky1”类的 div，它什么也不做。但是，当我将“stick1”类应用于 H1 或 A 标签时，它可以工作。有没有办法在 div 上使用它？

问题2：有没有一种方法可以将粘性应用到多个元素，然后在到达顶部时让它们彼此下方。

基本上我想做的是创造一种手风琴的影响。所以可以说我的页面有 3 个部分。

产品 - 内容 关于 - 内容 联系 - 内容。

当用户滚动到底部时，这三个部分应该被粘在页面的顶部，并在另一个之下。

即（这些应该在一个旁边的旁边）关于联系方式的产品

*   内容--页脚-

希望这是有道理的。Jquery 不是我的强项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:22:42.117

没关系，我想通了。我不确定为什么它不能在 div 上工作，但它突然开始工作了。通过在 div 上的 css 中设置 margin-top 并在 jquery 中设置偏移量，我能够实现手风琴效果。

# c - if语句中的执行顺序

> ID：15775373
> 
> 赞同：0
> 
> 时间：2013-04-02T22:12:16.853
> 
> 标签：c, if-statement

我正在查看一段代码，它调用两个函数 func1(struct *ps) 和 func2(struct ps)。func1() 在 ps 指向的结构体中返回结果，然后用于调用 func2()。这是代码的样子，

```
if(func1(&ps) && func2(ps)) 
{
<<do something>>
} 
```

这是 C 代码。我很确定调用 func1() 和 func2() 的顺序取决于编译器。但是，仍然需要专家意见。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:14:03.043

这里的顺序定义为`func1(&ps)`execute before `func2(ps)`。`&&`运算符具有称为短路的特性。如果左侧执行为 0，则右侧将永远不会执行。因此，您可以保证`func1(&ps)`在之前执行`func2(ps)`

# ant - dojo 发布版本的问题

> ID：15775383
> 
> 赞同：4
> 
> 时间：2013-04-02T22:13:03.593
> 
> 标签：ant, dojo

我们在我们的应用程序中使用 dojo 1.7.2。即使`AMD`在这个版本中支持，我们根本没有使用这种方法。我们仍在使用传统`dojo.require("package")`方法。

我们需要为我们的应用程序创建一个发布版本。以下是我们用来执行此操作的配置文件。我们正在使用`ANT`任务来执行此操作。我们的个人资料非常简单，其中没有太多的道场要求。

```
dependencies = {
    layers: [
       {
            name:"cutom_dojo.js",
            resourceName:"custom-dojo",
            dependencies:[
                "dojo.NodeList-traverse",
                "dojo.io.iframe",
                "dojo.date",
                ]
       }
    ],
    prefixes: [
        [ "dijit", "../dijit" ],
        [ "dojox", "../dojox" ]
    ]
} 
```

现在我们正在使用下面的 ANT 任务创建发布版本。

```
<target name="create-dojo-release">
        <echo message="Starting Dojo Release Build " />
        <java fork="true" dir="${shrinksafe.util.path}/buildscripts" classname="org.mozilla.javascript.tools.shell.Main">
            <classpath>
                <pathelement location="${shrinksafe.util.path}/shrinksafe/js.jar" />
                <pathelement location="${shrinksafe.util.path}/closureCompiler/compiler.jar"/>
                <pathelement location="${shrinksafe.util.path}/shrinksafe/shrinksafe.jar" />
                <pathelement path="${java.class.path}" />
            </classpath>
            <arg value="../../dojo/dojo.js"/>
            <arg value="baseUrl=../../dojo"/>
            <arg value="releaseDir=${dojo.release.dir}"/>
            <arg value="load=build"/>
            <arg value="profile=${dojo.profile.file}" />
            <arg value="action=clean,release" />
            <arg value="version=1.7.2" />
            <arg value="releaseName=cutom_dojo" />
            <arg value="cssOptimize=comments" />
            <arg value="copyTests=false" />
        </java>
        <echo message="Dojo Release build successfull." />
    </target> 
```

我们在 dojo 文件夹中获得了一个 custom_dojo.js 文件。我们在我们的应用程序中包含了这个 JS 文件。当我们打开这个 JS 文件并搜索层中提到的包时，它们都在那里可用。但是当我们访问应用程序页面时，我们仍然会看到为各个模块发送单独的 HTTP 请求，即使 `custom_dojo.js`文件包含在页面顶部。如果我们以正确的方式这样做，您能否建议我们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T13:19:38.890

您似乎正在以不推荐使用的旧格式编写构建配置文件。新的（V1.6 后）方式是这样的：

```
var profile = (function(){
  return {
    basepath: ".",
    packages: [
      {name: "dojo", location: "./dojo-release-1.7.4-src/dojo"}
    ],
    layers: {
      "dojo/custom_dojo": {include: [
        "dojo/NodeList-traverse",
        "dojo/io/iframe",
        "dojo/date"
      ]}
    }
  };
})(); 
```

当然替换您自己的路径等。另外请注意，我用新的斜杠表示法而不是旧的点分表示法指定模块 ID。

然后我像这样构建它：

```
dojo-release-1.7.4-src/util/buildscripts/build.sh --release --profile test.profile.js 
```

我已经使用 Dojo 1.7.4（最新的 1.7 版本）对上述构建配置文件进行了尝试，并使用以下测试页面按预期工作，无需再次下载模块。

```
<!DOCTYPE html>
<html>
<head>
    <title>test</title>
    <script type="text/javascript" data-dojo-config="async:0" src="./dojotk/dojo/dojo.js">/*empty*/</script>
    <script type="text/javascript">
      // load the custom layer
      dojo.ready(function() { dojo.require('dojo.custom_dojo') });;

      // to be called on button click
      function myFun() {
        var ifr = dojo.require('dojo.io.iframe');
        // check module has been loaded
        if (ifr) {
          alert('success: '+ifr);
        };
        return false;
      }
    </script>
</head>
<body>
<input type="button" value="click" onclick="return myFun();" />
</body>
</html> 
```

**参考资料** 确实，我必须以艰难的方式学习这一点，因为文档不太容易阅读，并且 Dojo 源中的示例使用新旧构建配置文件格式的混合，这也无济于事。但是，这些链接非常有用。

*   [http://dojotoolkit.org/documentation/tutorials/1.7/build/](http://dojotoolkit.org/documentation/tutorials/1.7/build/)
*   [http://dojotoolkit.org/reference-guide/1.7/build/](http://dojotoolkit.org/reference-guide/1.7/build/)

享受马丁

# .net - 如何查看在 Windows 中注册的 COM DLL 版本

> ID：15775385
> 
> 赞同：0
> 
> 时间：2013-04-02T22:13:24.263
> 
> 标签：.net, windows, com

我正在处理的项目有一堆 COM DLL。

有一个安装脚本可以自动注册这些 DLL 以便在其他项目中使用。最近代码中出现了一个bug，导致程序莫名其妙地关闭。Bisect 没有解决问题（已知可以工作的旧代码现在受到相同症状的困扰）

我怀疑卸载脚本没有取消注册所有内容，或者工作环境存在类似问题，而且我没有备用的干净机器来测试我的理论。有什么方法可以查看在 Windows 中注册的 DLL 是什么，例如它们的名称、版本、GUID 等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:27:58.117

您可以使用 Windows SDK 附带的名为 OleView 的工具。例如，它可能位于“Program files\Microsoft SDKs\Windows\v6.0A\bin”下

或者，您可以在 HKEY_LOCAL_MACHINE\SOFTWARE\Classes 下的注册表中简单地查找您的 CLASS GUID。

# sql - 将结果旋转到比需要更多的行中

> ID：15775386
> 
> 赞同：-1
> 
> 时间：2013-04-02T22:13:22.577
> 
> 标签：sql, sql-server-2008, tsql, pivot

我有这样的查询：

> ```
> `SELECT [/BIC/IORSVPTX] as Region,
> COUNTRY_ID,
> [/BIC/IOWCNTRY] as Country, 
> [/BIC/IOC_TRLNO] as Trial, 
> [/BIC/IOWQUAL] as ResourceType,
> case 
> 
>     when [/BIC/IOWQUAL] like '%Supporter%' 
>       then 1 
>   when [/BIC/IOWQUAL] like '%Monitor%'
>       then 3
>   when [/BIC/IOWQUAL] like '%PM%'
>       then 2
> 
>   end as ResourceGroup, 
> [1], [2], [3], [4], [5]
> FROM 
>     (
> SELECT  [/BIC/IORSVPTX], 
> COUNTRY_ID,
> [/BIC/IOWCNTRY], 
> [/BIC/IOC_TRLNO], 
> [/BIC/IOWQUAL],    case 
> 
>     when [/BIC/IOWQUAL] like '%Supporter%' 
>       then 1 
>   when [/BIC/IOWQUAL] like '%Monitor%'
>       then 3
>   when [/BIC/IOWQUAL] like '%PM%'
>       then 2
> 
>   end as ResourceGroup, 
> left(CALMONTH,4) as StartYear,
> right(CALMONTH,2) as StartMonth,
> ((left(CALMONTH,4) - 2013) * 12) + right(CALMONTH,2) AS YearMonth,
> QUANTITY as Hours
>          FROM dbo.Actuals
>         where [/BIC/IOC_TRLNO]<>'0000' and left(CALMONTH,4)>2012 and   COUNTRY_ID='10'
> and ([/BIC/IOWQUAL] like '%PM%' or [/BIC/IOWQUAL] like'%Monitor%' or [/BIC/IOWQUAL]   like '%Supporter%')
> ) up
> PIVOT (sum(Hours) FOR YearMonth IN ([1],[2],[3],[4],[5])) AS pvt;
> IN ([1],[2],[3],[4],[5])) AS pvt;` 
> ```

这为我提供了每个 ResourceType 和 ResourceGroup 2 行的输出，其中 1（1 月）的小时数和第 2 行的小时数为 2（2 月）而不是 1 行

```
Region  COUNTRY_ID  Country Trial   ResourceType    ResourceGroup   1   2   3   4   5
North America   10  USA 3619     Monitor    3   158.5   NULL    NULL    NULL    NULL
North America   10  USA 3619     Monitor    3   NULL    42  NULL    NULL    NULL
North America   10  USA 3619     PM / LTM / RTM     2   20  NULL    NULL    NULL    NULL
North America   10  USA 3619     PM / LTM / RTM     2   NULL    22  NULL    NULL    NULL
North America   10  USA 3619     Supporter  1   18.5    NULL    NULL    NULL    NULL
North America   10  USA 3619     Supporter  1   NULL    15.75   NULL    NULL    NULL 
```

所需的输出应该是这样的：

```
Region  COUNTRY_ID  Country Trial   ResourceType    ResourceGroup   1   2   3   4   5
North America   10  USA 3619     Monitor    3   158.5   42  NULL    NULL    NULL
North America   10  USA 3619     PM / LTM / RTM     2   20  22  NULL    NULL    NULL
North America   10  USA 3619     Supporter  1   18.5    15.75   NULL    NULL    NULL 
```

我会感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:00:11.670

我发现您当前的查询有一些问题。

首先，您`CASE`在外部和子查询中使用表达式。我不完全理解您为什么要这样做，因为您创建了一个名为`ResourceGroup`.

其次，如果您的子查询包含具有不同值的列并且您应用了数据透视表，您将获得多行。

例如，在您使用的子查询中：

```
left(CALMONTH,4) as StartYear,
right(CALMONTH,2) as StartMonth, 
```

但是您在最终选择列表中没有这些，如果您将它们添加到最终选择中，它们可能会显示不同的值，这些值会在数据透视分组期间导致问题。

根据您现有的查询，我猜您想使用：

```
SELECT 
  [/BIC/IORSVPTX] as Region,
  COUNTRY_ID,
  [/BIC/IOWCNTRY] as Country, 
  [/BIC/IOC_TRLNO] as Trial, 
  [/BIC/IOWQUAL] as ResourceType,
  ResourceGroup, 
  [1], [2], [3], [4], [5]
FROM 
(
  SELECT [/BIC/IORSVPTX], 
    COUNTRY_ID,
    [/BIC/IOWCNTRY], 
    [/BIC/IOC_TRLNO], 
    [/BIC/IOWQUAL],    
    case 
      when [/BIC/IOWQUAL] like '%Supporter%' then 1 
      when [/BIC/IOWQUAL] like '%Monitor%'   then 3
      when [/BIC/IOWQUAL] like '%PM%'  then 2
    end as ResourceGroup, 
    ((left(CALMONTH,4) - 2013) * 12) + right(CALMONTH,2) AS YearMonth,
    QUANTITY as Hours
  FROM dbo.Actuals
  where [/BIC/IOC_TRLNO]<>'0000' 
    and left(CALMONTH,4)>2012 
    and   COUNTRY_ID='10'
    and ([/BIC/IOWQUAL] like '%PM%' 
         or [/BIC/IOWQUAL] like'%Monitor%' 
         or [/BIC/IOWQUAL] like '%Supporter%')
) up
PIVOT 
(
  sum(Hours) 
  FOR YearMonth IN ([1],[2],[3],[4],[5])
) AS pvt; 
```

# php - 实施推荐网址功能的步骤

> ID：15775387
> 
> 赞同：1
> 
> 时间：2013-04-02T22:13:25.693
> 
> 标签：php, codeigniter

我是 PHP 和 Web 开发的新手。试图找出实施推荐的步骤。为 MVC 使用 Codeigniter。我用谷歌搜索了很多，并试图找到一个教程，但没有运气。

1.  用户的推荐网址为[http://mysite.com/?ref=primarykey_of_user](http://mysite.com/?ref=primarykey_of_user)
2.  用户的朋友使用推荐网址访问我的网站。我将从默认控制器`$_SERVER['HTTP_REFERER'];`中读取推荐网址`index()`
3.  从 url 中提取第一个用户的 primary_key 以供以后使用。

听起来安全吗？我应该包括任何其他步骤还是以不同的方式进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:21:19.057

`HTTP_REFERER`如果您正在跟踪推荐人，则除了知道他们来自哪里之外，您无论如何都不需要。但是，它可能会被伪造（虽然不太可能），因此如果您要使用该数据，则需要确保对其进行过滤等。

为引用的“人”提供标识是明智的，但您不想使用主键 - 您应该添加某种随机生成的唯一标识码，这样人们就无法猜到它。

如何生成代码取决于你——你只需要随机生成一个字符串：

```
 public function makePassword($length = 5){
        $password = "";
        $possible = "0123456789abcdfghjkmnpqrstvwxyz";
        $i = 0;
        while ($i < $length) {
            $char = substr($possible, mt_rand(0, strlen($possible)-1), 1);
            if (!strstr($password, $char)) {
                $password .= $char;
                $i++;
            }
        }
        return $password;
    } 
```

使用该生成的代码将某人与数据库记录相关联。这样我就不能假设如果我是推荐人 #1，我可以找出 #2 的 ID，等等。

# jquery - 默认必需消息中的 JQuery 标记化消息

> ID：15775392
> 
> 赞同：1
> 
> 时间：2013-04-02T22:13:54.517
> 
> 标签：jquery, validation

我正在尝试更改为“必填”字段显示的默认消息，并发现“扩展”选项用于覆盖必填字段的默认消息。但现在我想自定义消息以包含有关生成错误消息的控件的信息。我遇到了标记化的消息文档并尝试了一下：

```
jQuery.extend(jQuery.validator.messages, {

 required: "#{field} is required"

});

<input type="text" id="txtNamesLastName" 
class="input-medium" maxlength="50" name="nameLast" title="Last Name" /> 
```

当我为输入字段提供标题时，错误消息将仅显示标题属性文本（“姓氏”）；它不会将附加文本附加到错误消息中。如果我设置`"ignoreTitle: true"`，则错误消息将显示为`"#{field} is required"`. 我究竟做错了什么？？

提前致谢！

# jquery - html 高度的 jquery 问题：100%

> ID：15775393
> 
> 赞同：0
> 
> 时间：2013-04-02T22:13:56.073
> 
> 标签：jquery, css

我有这个功能，当用户距离窗口底部 500 像素时会触发一次点击。

一切正常，除非我在 css 中将我的 html 和 body 设置为 height:100%。

这是“工作”脚本。

```
$(document).ready(function() {
    var timeout = '';
    $(window).scroll(function (e) { 
        var intBottomMargin = 500; 
        clearTimeout(timeout);
        //if less than intBottomMargin px from bottom 
        if ($(window).scrollTop() >= $(document).height() - $(window).height() - intBottomMargin) {
          timeout = setTimeout(function(){ 
                $("#next-paginav")[0].click(); 
          }, 300);
        }
    });
}); 
```

当我的 html 和 body 是 100% 高度时，如何使相同的脚本工作？

我确信这真的很简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:35:16.833

我认为您的计算不正确：

```
if ($(window).scrollTop() >= $(document).height() - $(window).height() - intBottomMargin) 
```

如果您的 body/html 是 100% 高度，则意味着您将其设置为视口的高度。你以前有浮动元素吗？这可能就是您（之前的）高度计算有效的原因

试试这个：

```
if ($(window).scrollTop() >= $(document).height() - intBottomMargin) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T23:12:39.640

您正在滚动的不是`window`因为`body`并`html`设置为与窗口相同的大小，因此窗口没有溢出需要一个 scollbar

滚动条是 body 的一部分，因为它有溢出内容。将 scoll 处理程序绑定到 body 并且它可以工作

```
 var $scollEl=$('body').scroll(function (e) { 
        var intBottomMargin = 500; 
        clearTimeout(timeout);
        //if less than intBottomMargin px from bottom 

        if ($scollEl.scrollTop() >= $(document).height() - $scollEl.height() - intBottomMargin) {
          timeout = setTimeout(function(){ 
                $(".clicked").click(); 
          }, 300);
        }
    });
}); 
```

演示：http: [//jsfiddle.net/LnmsR/2/](http://jsfiddle.net/LnmsR/2/)

# c# - 在 MVVM WPF 中将 DataTable 绑定到 DataGrid

> ID：15775396
> 
> 赞同：1
> 
> 时间：2013-04-02T22:14:01.423
> 
> 标签：c#, .net, wpf, mvvm

我对整个 C# .net 很陌生，但我搜索了很多，但找不到如何让它工作。

我的视图中有一个 DataGrid，如下所示：

```
<DataGrid Name="SettingGrid" ItemsSource="{Binding Path=PluginSettings, Mode=OneWay, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}" AutoGenerateColumns="True" Margin="224.4,10,10,10"/> 
```

PluginSettings 是一个 DataTable，根据用户的操作动态填充不同的列和行。PluginSettings 总是最新的，我已经检查了调试模式，列和行总是我想要的。但是视图永远不会更新。经过一番谷歌搜索，我发现 DataTable 不可枚举，因此无法绑定。我将绑定更改为`{Binding Path=PluginSettings.DefaultView`. 这样，我可以使行完美地工作，但列却不行。

当我向我的 DataTable 添加一列时，视图永远不会显示它。如果我正确理解 DefaultView 是什么，这意味着我无法将用户在 Grid 上所做的更改复制到实际的 DataTable 以保存它们，这实际上是我的目标。

我错过了什么 ？使用 DataGrid 只是一个糟糕的选择吗，我想做的事情有更好的选择吗？

希望我把我的意思说清楚，英语不是我的第一语言。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:55:20.050

*   我必须提到，`System.Data`不鼓励在客户端代码 (WPF) 中使用。
*   这包括`System.Data.DataSet`、`System.Data.DataTable`和命名空间内的任何其他类`System.Data`。
*   您应该创建适当的数据模型并改用它。
*   IMO，`System.Data`是一个服务器端的概念，不应该被带到客户端。
*   例如，在 WinRT 中，它甚至不存在。没有`System.Data`，因此如果您打算将 WPF 应用程序迁移到 WinRT，您将需要重写大量代码。

话虽如此，此示例适用于添加新行和添加新列：

```
<Window x:Class="MiscSamples.DataGridAndDataTable"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="DataGridAndDataTable" Height="300" Width="300">
    <DockPanel>
        <Button Content="Add Column" DockPanel.Dock="Top" Click="AddColumn"/>
        <Button Content="Add Row" DockPanel.Dock="Top" Click="AddRow"/>
        <DataGrid Name="SettingGrid" 
              ItemsSource="{Binding}" 
              AutoGenerateColumns="True"/>
    </DockPanel>
</Window> 
```

代码背后：

```
 public partial class DataGridAndDataTable : Window
    {
        public DataTable PluginSettings { get; set; }

        public DataGridAndDataTable()
        {
            InitializeComponent();

            PluginSettings = new DataTable();

            PluginSettings.Columns.Add("Name", typeof (string));
            PluginSettings.Columns.Add("Date", typeof(DateTime));

            PluginSettings.NewRow();
            PluginSettings.NewRow();

            PluginSettings.Rows.Add("Name01", DateTime.Now);

            DataContext = PluginSettings;
        }

        private void AddColumn(object sender, RoutedEventArgs e)
        {
            PluginSettings.Columns.Add("Age", typeof (int));
            DataContext = null;
            DataContext = PluginSettings;
        }

        private void AddRow(object sender, RoutedEventArgs e)
        {
            PluginSettings.Rows.Add("Name01", DateTime.Now);
        }
    } 
```

# sql - 使用 IF 语句插入过程

> ID：15775401
> 
> 赞同：-1
> 
> 时间：2013-04-02T22:14:12.750
> 
> 标签：sql, sql-server-2008, stored-procedures, insert

我有要升级的程序，它在插入之前在拾取数据表中为客户插入新记录

我正在尝试更新它，以便它检查客户端 StatusID 是否在（1、2、6）中。到目前为止我有这个

```
alter PROCEDURE dbo.InsertPickup
    @ClientID int, --Required ClientID and PickupDate
    @PickupDate date 
AS
   IF NOT EXISTS (SELECT * FROM Pickup 
                  WHERE ClientID = @ClientID 
                    AND MONTH(PickupDate) = MONTH(@PickupDate) 
                    AND YEAR(PickupDate) = YEAR(@PickupDate) )
if exists (select * from clients where statusid in (1,2,6))
      INSERT INTO Pickup (ClientID, PickupDate)
      VALUES (@ClientID, @PickupDate) 
```

但是如果例如状态ID = 5或3或4的客户端，它仍然插入记录是不对的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:16:06.027

正确的缩进和 BEGIN/END 包装器可以大大有助于发现查询中的问题。我已将检查添加到`ClientID`并针对`PickupDate`sargable 进行了测试（以防现在有索引或将来会有索引）。

```
IF NOT EXISTS 
(
  SELECT 1 
    FROM dbo.Pickup WHERE ClientID = @ClientID
    AND PickupDate >= DATEADD(MONTH, DATEDIFF(MONTH, 0, @PickupDate), 0)
    AND PickupDate < DATEADD(MONTH, DATEDIFF(MONTH, 0, @PickupDate)+1, 0)
)
BEGIN
  IF EXISTS
  (
    SELECT 1 
      FROM dbo.clients WHERE ClientID = @ClientID 
      AND statusid IN (1,2,6)
  )
  BEGIN
      INSERT INTO dbo.Pickup (ClientID, PickupDate)
      VALUES (@ClientID, @PickupDate);
  END
END 
```

当然，您也可以在没有所有嵌套`IF`测试的情况下执行此操作：

```
INSERT dbo.Pickup(ClientID, PickupDate)
  SELECT @ClientID, @PickupDate
    WHERE EXISTS 
    (
      SELECT 1 FROM dbo.clients WHERE ...
    )
    AND NOT EXISTS 
    (
      SELECT 1 FROM dbo.Pickup WHERE ...
    ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T22:16:46.107

您没有在第二个语句中过滤您的`clients`表格，因此它没有按预期工作。尝试：`@ClientID``IF EXISTS`

```
if exists (select * from clients where statusid in (1,2,6) AND ClientID = @ClientID) 
```

# ruby-on-rails - RoR 显示名称而不是自连接表的 id

> ID：15775409
> 
> 赞同：0
> 
> 时间：2013-04-02T22:15:05.380
> 
> 标签：ruby-on-rails, self-join

这是我第一次来这里！我希望没有人对我的问题感到生气，几天前我才开始学习rails。

问题是：

我有一个模范学生：id，：name，：email，：phone 和：id_indicator，这是 id 的 FK。我想显示 INDICATOR 的名称而不是 INDICATOR 的 ID。

```
<td><%= student.id%></td>
<td><%= student.name %></td>
<td><%= student.email %></td>
<td><%= student.phone %></td>
<td><%= student.id_indicator%></td> ---> I want to show the NAME here 
```

我怎样才能做到这一点？

谢谢大家！

只有一个模型学生。它是一个自我关系表。我有学生推荐学生。

对此的 SQL 查询如下：

```
select name from **students** where id = ( select id_indicator from **students** where id = 10) 
```

示例：http: [//i.stack.imgur.com/7kgfX.png](http://i.stack.imgur.com/7kgfX.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:26:55.920

> 一名学生可以指示多名学生，一名学生只能指示一名学生

```
class Aluno < ActiveRecord::Base 
    attr_accessible :email, :id, :id_indicator, :name, :profession, :gender, :phone

    belongs_to :indicator, class_name: "Aluno", :foreign_key => "id_indicator"
    has_many :indicates, class_name: "Aluno", :foreign_key => "id_indicator"
end 
```

当您想查看指示学生的人的姓名时：

```
<%= student.indicator.name %> 
```

或者如果你想找到学生指出的所有学生，你可以这样做：

```
<% student.indicates.each do |indicate| %>
     <%= indicate.name %>
<% end %> 
```

有关更多信息，请查看 rails guides 或 railscasts

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T22:20:06.087

请向我们展示您的模型，但它应该很简单：

```
<%= student.indicator.name %> 
```

# javascript - 如何收听所有数组项？

> ID：15775410
> 
> 赞同：0
> 
> 时间：2013-04-02T22:15:08.803
> 
> 标签：javascript, arrays, events, dom-events

我正在从文档`var listen = document.getElementsByTagName('img');`中收集所有图像元素，从而生成一个数组。现在我必须指定`listen[0]`, `listen[1]`,`listen[2]`等`listen[3]`来监听这个数组中一个元素上的事件。问题是有没有办法只做类似`listen[any item from this array]`, 或函数的事情。只是不必手动指定要监听的每个元素。

### 例子

现在我必须为每个数组项做这样的事情： `listen[3].click = function() {};`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T22:34:00.220

根据您想要的以及 DOM 的外观，您可能希望在 DOM 树的某个位置使用更高的事件侦听器，而不是创建很多侦听器：

```
document.addEventListener('click', function(e) {
    if (e.target.nodeName !== 'IMG') {
        return;
    }

    alert('img clicked');
}); 
```

演示：http: [//jsfiddle.net/APSMT/1/](http://jsfiddle.net/APSMT/1/)

*请注意，我已将事件侦听器附加到`document`，但如果您可以使其更具体，您应该*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T22:24:23.130

使用合理的新浏览器，您可以使用[Array.forEach](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)：

```
[].forEach.call(document.getElementsByTagName('img'), function (img) {
    el.addEventListener('click', callback);
}); 
```

或“old skool”（甚至更好的可读性）：

```
var imgs = document.getElementsByTagName('img');
for (var i = 0, len = imgs.length; i < len; ++i) {
    imgs[i].addEventListener('click', callback);
} 
```

只读`HTMLCollection.length`一次可以加快速度。它永远不会慢。

您不应该为每次迭代创建一个 Function 对象：

```
// Don't
for (...) {
    img[i].onclick = function () { ... }
}

// Do
function onclick () {
     // `this` will be img[i]
}
for (...) {
    img[i].onclick = onclick;
} 
```

# jquery - Onclick删除表格行jQuery

> ID：15775411
> 
> 赞同：0
> 
> 时间：2013-04-02T22:15:11.390
> 
> 标签：jquery

我有一张表，无论我尝试什么，我似乎都无法从中删除行。它是一个由 5 列和几行组成的简单表，使用 Json 从 php/mysql 查找中生成。我最终想通过单击按钮从 mysql 表中删除该行，但我坚持在 jquery 中删除该行的“简单”部分。

这是创建我的表的代码：

```
var table = $('<table></table>').addClass('tbc');
for (var i = 0; i < json.admin_tables.length; i++) {
var row = $('<tr></tr>').addClass('guid').attr('id', i).add('<td>' + json.admin_tables[i].Room + '</td><td>' + json.admin_tables[i].time + '</td><td>' + json.admin_tables[i].Desk + '</td><td>' + i + '</td><td><input type="button" id="'+ i + '" class="delete" value="Delete row ' + i + '"</td>');
table.append(row);
$('#roomTable').append(table);
} 
```

但是，以下代码什么都不做（firebug 中没有错误）

```
$('.delete').click(function() { 
    $(this).closest("tr").remove();
} 
```

将“tr”更改为“td”只会删除按钮，我不想单独删除每个字段！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:17:10.237

元素是动态插入的`.delete`，因此您需要委托事件处理程序来定位它们：

```
$('#roomTable').on('click', '.delete', function() { 
    $(this).closest("tr").remove();
}); 
```

# java - 检查使用 JAVA（一个 jsp）选择了哪些复选框

> ID：15775412
> 
> 赞同：8
> 
> 时间：2013-04-02T22:15:12.353
> 
> 标签：java, html, jsp

我正在尝试创建一个显示带有复选框的简单表单的 servlet，当用户选择他想要的复选框数量并单击“确认”我的 servlet 中的 POST 请求时，检查哪些框已被选中并查询基于数据库.

我不确定如何在 Java 中执行此操作，因为用户可以选择 1 个或多个复选框。如果有人可以用一个小例子来解释这一点，那就太好了。

我对编程很陌生，如果我知道怎么做，我会提供一个代码片段。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T22:42:36.360

```
<%@ page language="java"%>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <title>JSP Multiple Checkbox</title>
    </head>
    <body>
        <form name="form1" onsubmit="checkBoxValidation()">
            <h3>Select your favorite Fruits</h3>
            <p><input type="checkbox" name="fruit" value="Mango"/>Mango</p>
            <p><input type="checkbox" name="fruit" value="Apple"/>Apple</p>
            <p><input type="checkbox" name="fruit" value="Grapes"/>Grapes</p>
            <p><input type="checkbox" name="fruit" value="Papaya"/>Papaya</p>
            <p><input type="checkbox" name="fruit" value="Lychee"/>Lychee</p>
            <p><input type="checkbox" name="fruit" value="Pineapple"/>Pineapple</p>
            <p><input type="submit" value="submit"/>
        </form>
        <%String fruits[]= request.getParameterValues("fruit");
        if(fruits != null){%>
        <h4>I likes fruit/s mostly</h4>
        <ul><%for(int i=0; i<fruits.length; i++){%>
            <li><%=fruits[i]%></li><%}%>
        </ul><%}%>
    </body>
</html> 
```

在您的 Web 容器上运行此示例 jsp 以了解其工作原理的一些基本概念。您需要将此页面上获取请求参数的显示逻辑移动到表单提交时的 servlet 代码中。这个例子可以从[这里](http://www.devmanuals.com/tutorials/java/jsp/multiplecheckbox.html)找到。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-02T22:24:28.090

这实际上是 HTML 表单行为问题。当您选中几个具有一个“名称”属性和不同“值”属性的复选框并按下提交按钮时，您的浏览器将使用选中的复选框值向服务器发送请求。因此，您可以从此 url 参数中获取值名称。

例如：

```
<form name="input" action="html_form_action.asp" method="get">
<input type="checkbox" name="vehicle" value="Bike">I have a bike<br>
<input type="checkbox" name="vehicle" value="Car">I have a car 
<br><br>
<input type="submit" value="Submit">
</form> 
```

如果您选中这两个复选框，您的服务器将收到如下参数：

```
http://example.com/your_page.jsp?vehicle=Bike&vehicle=Car 
```

之后，您可以获得如下值：

```
String checkboxValues = request.getParameter("vehicle"); 
```

checkboxValues 获取用逗号分隔的所有值。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-02T22:23:26.400

在您的 servlet 中，您将像这样使用 getParameter() ：

```
request.getParameter( "id_of_checkbox" ) 
```

如果未选中该框，则该函数返回 null。因此，您可以执行以下操作：

```
boolean myCheckBox = request.getParameter( "id_of_checkbox" ) != null; 
```

现在 myCheckBox 如果选中则为 true，如果未选中则为 false。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-17T11:01:04.660

如果您只想要输出，这可能会更整洁。假设您使用的是 jstl 库，我更喜欢它，因为它使您的页面更干净：

```
<c:forEach var='fruitValue' items='${paramValues.fruit}'> 
   ${fruitValue} <br>
</c:forEach> 
```

# c# - 为 ListBox _SelectedIndexChanged 上的操作设置延迟

> ID：15775414
> 
> 赞同：1
> 
> 时间：2013-04-02T22:15:25.320
> 
> 标签：c#, listbox, delay

我有一个带有文件名的列表框。更改所选索引时，我会加载文件。

我想要 jQuery 的 HoverIntent 之类的东西，它可以在短时间内延迟加载文件的操作，这样用户就可以使用向下箭头并快速循环浏览列表中的项目，而无需应用程序尝试加载每个项目。Thread.Sleep 暂停整个应用程序，因此用户在睡眠完成之前无法选择另一个列表项，这显然不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:43:54.017

如果您 using`WinForms`调用构造函数中的`InitTimer`方法，这将起作用`Form`。

`_timer_Tick`在事件处理程序中加载文件。要更改延迟，请将`Interval`属性设置`InitTimer`为另一个值。

```
private System.Windows.Forms.Timer _timer;

private void InitTimer()
{
    _timer = new Timer { Interval = 500 };
    _timer.Tick += _timer_Tick;
}

private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    _timer.Stop();
    _timer.Start();
}

private void _timer_Tick(object sender, EventArgs e)
{
    _timer.Stop();
    // TODO: Load file here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:21:04.590

窗体：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private CancellationTokenSource _cancel;
    private object _loadLock = new object();

    private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        lock (_loadLock)
        {

            handleCancellation();

            var loader = new Task((chosenFileItemInListbox) =>
                {
                    Thread.Sleep(1000);
                    LoadFile(chosenFileItemInListbox);
                }, listBox1.SelectedItem, _cancel.Token);
        }
    }

    private bool handleCancellation()
    {
        bool cancelled = false;

        lock (_loadLock)
        {
            if (_cancel != null)
            {
                if (!_cancel.IsCancellationRequested)
                {
                    _cancel.Cancel();
                    cancelled = true;
                }
                _cancel = null;
            } 
        }

        return cancelled;
    }

    private void LoadFile(object chosenFileItemInListbox)
    {
        if (handleCancellation())
        {
            return;
        }
    }
} 
```

上面的代码也可以应用于 WPF，但是 WPF 包含一些用于处理延迟和取消先前更新的内置魔法。

```
<ListBox SelectedItem="{Binding Path=SelectedFile, Delay=1000}" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T22:25:22.720

使用线程将加载与您的 GUI 分开。

这应该让你开始：

公共部分类 MainWindow : Window {

```
CancellationTokenSource cts;
bool loading;

private void SelectedIndexChanged(int index)
{
    if (loading)
        cts.Cancel();

    cts = new CancellationTokenSource();

    var loader = new Task.Delay(1000);
    loader.ContinueWith(() => LoadFile(index))
          .ContinueWith((x) => DisplayResult(x));

    loader.Start();
}

private void DisplayResult(Task t)
{
    // TODO: Invoke this Method to MainThread
    if (!cts.IsCancellationRequested)
    {
        // Actually display this file
    }
} 
```

无法测试，因为我仍在使用 .net 4 而 Task.Delay() 是 .net 4.5 您可能需要在表单中添加另一个字段，以便将文件内容从任务传输到 GUI。

# image - SVG关闭插值？

> ID：15775416
> 
> 赞同：3
> 
> 时间：2013-04-02T22:15:35.680
> 
> 标签：image, svg, interpolation

我有一个 3x3 PNG 嵌入图像（颜色为白色-黑色-红色-绿色-黄色-蓝色-洋红色-青色-白色），我想在更大的区域上显示而不进行插值。

这可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:08:27.470

SVG 有一个[图像渲染](https://developer.mozilla.org/en-US/docs/Web/CSS/image-rendering)属性。不幸的是，这些值都不能保证最近邻插值 - optimizeSpeed 是最接近的。Firefox 支持一个附加值 -moz-crisp-edges ，它保证最近的邻居，我认为 Webkit 有 -webkit-optimize-contrast ，它的作用大致相同。

# c - 词提取 C

> ID：15775417
> 
> 赞同：0
> 
> 时间：2013-04-02T22:15:40.633
> 
> 标签：c

我想从文件中提取单词（然后从控制台输入中），计算它们的出现并将它们存储在我的 Word 结构中：

```
typedef struct cell{
        char *info; /* word itself */
        int nr;     /* number of appearances of the word *
        }*Word; 
```

这个结构将被动态分配给文件中包含的尽可能多的单词。考虑这个函数：

```
void Word_Allocation (Word* a) /* The function that allocates space for one structure */ 
```

我的问题是：

1.  如何正确打开文件并逐行读取？
2.  如何在结构中正确存储单词和出现次数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:32:21.783

您的分配器函数应返回 a`Word*`并接收为单词本身分配的大小。像这样的东西，也许：

```
Word * Word_Allocation (size_t size) {
    Word *w = malloc(sizeof(*w));
    if (w) w->info = malloc(size);
    if (!w->info)
    {
        free(w);
        w = NULL;
    }
    return w;
} 
```

您可以一次阅读一个单词：

```
#define STR(x) #x
enum {MAX_BUF = 100};
char buf[MAX_BUF];
fscanf(infile, "%" STR(MAX_BUF) "s", buf); 
```

然后`strlen(buf)+1`是传递给的大小`Word_Allocation`。或者您可以通过调用`buf`并复制数据。`Word_Allocation``strlen`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T22:39:22.417

1.  至于文件io，[这](http://www.cplusplus.com/reference/cstdio/FILE/)是基础。
2.  至于算法，由于您没有使用 C++，因此`map`不可用，这对于这个问题来说是微不足道的。C 中一个简单的解决方案可能是：

    1.  分配一个数组`cell`并读入单词
    2.  对数组进行排序`char *info`。
    3.  数数

# ruby-on-rails - 使用 bundle install 在我的 Ruby on Rails 项目中安装 Bootstrap

> ID：15775419
> 
> 赞同：0
> 
> 时间：2013-04-02T22:15:45.487
> 
> 标签：ruby-on-rails, ruby, rubygems, ruby-on-rails-3.2, bootstrap-sass

我是 Rails 的新手。我想使用引导程序，所以我将“bootstrap-sass”放在我的 Gemfile 中的文档中，如下所示：

```
group :assets do
 gem 'sass-rails',   '~> 3.2.3'
 gem 'coffee-rails', '~> 3.2.1'
 gem 'uglifier', '>= 1.0.3'
 gem 'bootstrap-sass', '~> 2.3.1.0'
end 
```

我尝试使用“捆绑安装”安装它，这给了我以下错误消息：

```
Fetching gem metadata from https,//rubygems.org/"...........
Unfortunately, a fatal error has occurred. Please see the Bundler troubleshooting documentation at
http://bit.ly/bundler-issues. Thanks!

/usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems/config_file.rb:195:in `merge': can't convert String into Hash (TypeError)
    from /usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems/config_file.rb:195:in `initialize'
    from /usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems.rb:364:in `new'
    from /usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems.rb:364:in `configuration'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/rubygems_integration.rb:34:in `configuration'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/rubygems_integration.rb:53:in `sources='
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/source/rubygems.rb:249:in `remote_specs'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/source/rubygems.rb:162:in `fetch_specs'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/source/rubygems.rb:66:in `specs'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/definition.rb:192:in `block (2 levels) in index'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/definition.rb:189:in `each'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/definition.rb:189:in `block in index'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/index.rb:9:in `build'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/definition.rb:185:in `index'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/definition.rb:179:in `resolve'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/definition.rb:114:in `specs'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/definition.rb:109:in `resolve_remotely!'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/installer.rb:83:in `run'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/installer.rb:14:in `install'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/cli.rb:247:in `install'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/vendor/thor/task.rb:27:in `run'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/vendor/thor/invocation.rb:120:in `invoke_task'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/vendor/thor.rb:344:in `dispatch'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/vendor/thor/base.rb:434:in `start'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/bin/bundle:20:in `block in <top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/friendly_errors.rb:3:in `with_friendly_errors'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/bin/bundle:20:in `<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/bin/bundle:19:in `load'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/bin/bundle:19:in `<main>'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/bin/ruby_noexec_wrapper:14:in `eval'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/bin/ruby_noexec_wrapper:14:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:27:44.237

您的错误消息搞砸了，但捆绑器似乎有问题。

如果没有，快速而肮脏：使用[twitter-bootstrap-rails gem](https://github.com/seyhunak/twitter-bootstrap-rails)。它肯定会起作用。

# c# - 拦截来自其他程序的鼠标点击

> ID：15775422
> 
> 赞同：8
> 
> 时间：2013-04-02T22:16:01.160
> 
> 标签：c#, .net, winapi, hook, windows-messages

我正在尝试拦截来自另一个程序的鼠标点击。我正在为该程序制作一个插件，它在程序上覆盖一个透明表单并显示附加信息。当我单击表单的透明部分时，我可以单击`main`程序中的内容。我不希望这种情况发生*（至少不是每次都允许单击某些部分，而某些部分不允许单击，但这不是问题）*。

我现在这样做的方式是使用`WH_MOUSE_LL`，这工作正常，我可以通过返回一个非零值来阻止鼠标点击进入程序（[http://msdn.microsoft.com/en-gb/library /windows/desktop/ms644988(v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms644988(v=vs.85).aspx) )。

问题是，这使我的主程序滞后，我不需要收到所有鼠标移动的通知，我只想在用户实际点击某些东西时收到通知。有什么办法可以限制`WH_MOUSE_LL`它只在鼠标点击时触发？*（滞后不是因为方法中的计算`MouseHookProc`- 它目前除了调用之外什么都不做：`CallNextHookEx(hHook, nCode, wParam, lParam)`。）*

我试图通过使用挂钩消息的全局挂钩（ [http://www.codeproject.com/Articles/18638/Using-Window-Messages-to-Implement-Global-System-H](http://www.codeproject.com/Articles/18638/Using-Window-Messages-to-Implement-Global-System-H)）来解决此问题。`WM_MOUSEACTIVATE`这个想法是只`WH_MOUSE_LL`在我收到`WM_MOUSEACTIVATE`通知时才连接。不幸的是`WH_MOUSE_LL`，点击通知之前已发送，`WM_MOUSEACTIVATE`因此这不起作用。

***编辑：***

@Nanda 这是过程代码：

```
public int MouseHookProc(int nCode, IntPtr wParam, IntPtr lParam)
{
    return WindowUtility.CallNextHookEx(hHook, nCode, wParam, lParam);
} 
```

正如你所看到的，我在 atm 上做的并不多，但它已经滞后了......

@Cody Gray 我对处理消息的表单做了一个非常小的测试：

```
public class Form1 : Form
{
    private TrackBar m_Trackbar;

    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form1());
    }

    public Form1()
    {
        m_Trackbar = new System.Windows.Forms.TrackBar();
        m_Trackbar.LargeChange = 1;
        m_Trackbar.Location = new System.Drawing.Point(5, 10);
        m_Trackbar.Maximum = 100;
        m_Trackbar.Size = new System.Drawing.Size(280, 40);
        m_Trackbar.Value = 100;
        this.Controls.Add(m_Trackbar);

        m_Trackbar.Scroll += new System.EventHandler(this.m_TrackbarScroll);
    }

    private void m_TrackbarScroll(object sender, System.EventArgs e)
    {
        this.Opacity = ((Convert.ToDouble(m_Trackbar.Value)) / 100);
    }

    protected override void WndProc(ref Message m)
    {
        switch (m.Msg)
        {
            case 0x201: //WM_LBUTTONDOWN
                Console.WriteLine("MouseButton Down!");
                //I could copy the Message over to the MainProgram with this right?
                //SendMessage(MainProgramHwnd, m.Msg, m.WParam, m.LParam);
                //This will also only work on an opacity higher than 0.
                break;
        }
        base.WndProc(ref m);
    }
} 
```

当你说：“返回它是透明的，让它路由到它下面的窗口？” 我可以通过使用 SendMessage 并基本上复制我在 WndProc 方法中收到的消息来做到这一点吗？

为了让事情变得更复杂，我也在使用这种形式[http://www.codeproject.com/Articles/1822/Per-Pixel-Alpha-Blend-in-C](http://www.codeproject.com/Articles/1822/Per-Pixel-Alpha-Blend-in-C)。据我了解，这使我能够在表单上绘制具有抗锯齿背景的位图。使用这种形式似乎无法设置不透明度，因为它一直都是透明的。有没有更好的方法在表单上绘制位图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:45:30.347

您可能想查看 Easyhook ( [http://easyhook.codeplex.com/](http://easyhook.codeplex.com/) )，它允许您从单个进程而不是所有进程挂钩 Windows API 调用。

# arrays - Verilog中的数组和多路复用器

> ID：15775424
> 
> 赞同：1
> 
> 时间：2013-04-02T22:16:06.183
> 
> 标签：arrays, verilog, hdl

我很想知道如何在verilog中合成一个数组。它是否创建了数组大小的 MUX 或其他东西。是否有一些技术可以避免大尺寸 MUX 合成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:02:30.203

通常，大型阵列可以合成为动态 ram（取决于您的合成选项），但如果您愿意，它们也可以实现为具有大型多路复用器的触发器的巨大字段，但使用动态 ram 将是最有效的方法来实现合成一个大数组。

请注意，如果使用动态 ram，那么通常每个周期只能进行一到两次读取或写入（不能一次更新 ram 中的每个条目）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:59:48.243

如果阵列是只读的，那么它将被实现为 ROM（或禁用写启用的 RAM！）

如果数组是可写的，那么有一个关于如何写入的规则，以确保推断出 RAM 块。

# javascript - 如何将对象属性和值推送到数组中？

> ID：15775425
> 
> 赞同：2
> 
> 时间：2013-04-02T22:16:06.793
> 
> 标签：javascript, arrays, push, object-properties

我在 HTML 中有一个输入字段：

```
<input type="text" id="id-name"> 
```

我在这里生成一个随机值：

```
function rand(length, current) {
    current = current || '';
    return length ? rand(--length, "0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".charAt(Math.floor(Math.random() * 60)) + current) : current;
} 
```

我定义了一个空数组：

```
var sample = sample || []; 
```

调用 rand() 函数后，我尝试将随机生成的值以及其他两个对象属性和值推送到数组中：

```
(function() {
    $("#id-name").val(rand(5));
    var value = $("#id-name").val();
    sample.push({acct:"sample-code", labels:"sample label", trackingcode: value});
})(); 
```

我无法获得将数据插入“样本”数组的推送方法。我已经尝试过引用[这个主题](https://stackoverflow.com/questions/9097366/pushing-a-multiple-attributed-item-to-an-array-javascript)，但无法弄清楚我做错了什么。我认为它的推动不正确，因为当我跑步时：

```
alert(sample); 
```

我得到的只是[对象对象]

[这是一个用于测试的 jsFiddle 链接。](http://jsfiddle.net/miketang/xdrhm/)

# java - 为什么 Java PrintStream 必须重载它的 print() 函数？

> ID：15775428
> 
> 赞同：0
> 
> 时间：2013-04-02T22:16:38.950
> 
> 标签：java, object, overloading, printstream

你在这里：http: [//developer.android.com/reference/java/io/PrintStream.html#print%28float%29](http://developer.android.com/reference/java/io/PrintStream.html#print%28float%29)

只有一个功能可以满足所有目的：

```
public void print (Object o) {
    if (o == null) {
        // print "null"
    } else {
        // print o.toString();
    }
} 
```

更多的阐述。例如，`internal_print(String str)`是一个写入打印流的函数。那么唯一需要的一个功能是：

```
public void print (Object o) {
    if (o == null) {
        internal_print( "null" );
    } else {
        internal_print( o.toString() );
    }
} 
```

对于其他`float`, `int`, `char`, `long`, 等重载，我可以想象它们就像：

```
public void print (float o) {
    if (o == null) {
        internal_print( "null" );
    } else {
        internal_print( o.toString() );
    }
}

public void print (int o) {
    if (o == null) {
        internal_print( "null" );
    } else {
        internal_print( o.toString() );
    }
}

public void print (char o) {
    if (o == null) {
        internal_print( "null" );
    } else {
        internal_print( o.toString() );
    }
}

public void print (long o) {
    if (o == null) {
        internal_print( "null" );
    } else {
        internal_print( o.toString() );
    }
}

... 
```

甚至只是调用杀手功能`print (Object o)`。

你能解释一下吗？非常感谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T22:19:57.527

历史原因：`PrintStream`该类自 Java 1.0 以来就存在，早在添加自动装箱之前（在 1.5 中）。

自动装箱使您能够将基本类型传递给`print(Object o)`. 如果没有它，`PrintStream`就必须分别为每个原始类型实现重载。

顺便说一句，`print(..)`原始类型的实现更像：

```
public void print (int o) {
    print(String.valueOf(o));
} 
```

...以及`String.valueOf(..)`基本上委托给包装类中的方法的实现，例如`Integer.toString(int)`和`Long.toString(long)`。[您可以在docjar](http://www.docjar.com/docs/api/java/io/PrintStream.html)阅读源代码。

# java - Java绘图时如何管理图层？

> ID：15775439
> 
> 赞同：0
> 
> 时间：2013-04-02T22:17:13.957
> 
> 标签：java, swing, awt, graphics2d, mixing

我正在使用 Java 的 AWT 包在 Canvas 上使用 Graphics2D 和 BufferStrategy 进行绘制。Canvas 被放置在一个 JFrame 上。当我将游戏中的实体放置到画布上并绘制它们时，它们似乎以看似随机的顺序呈现。我有一个实体列表，它们是使用高级 for 循环绘制的。每次我开始游戏时，实体都是按随机顺序绘制的，但在我重新启动程序之前总是相同的顺序。这是我循环中用于渲染的代码。

```
for (Entity e : EntityManager.list) {
        e.update();
        e.draw(g, e.x, e.y);
} 
```

这是我的绘制方法：

```
public void draw(Graphics g,int x,int y) {
    g.drawImage(image,x,y,null);
} 
```

我已经搜索了很多，但我还没有找到关于 Graphics2D 如何管理图层的精确答案。同样在 Javadoc 上，它也没有提到它是如何处理层的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:27:42.320

图层按照添加到列表中的顺序绘制。为了管理图层，您只需要创建一个包含图层和实体的数组列表并保持它们的顺序，您就可以像这样更改它。

# javascript - JavaScript 在网页上拖放一个 Div

> ID：15775440
> 
> 赞同：1
> 
> 时间：2013-04-02T22:17:15.317
> 
> 标签：javascript, drag-and-drop, dom-events

我正在尝试编写一些 JavaScript 代码，让我可以在网页上移动 div。也就是说，我想这样做，以便您可以单击并将 div 从页面上的一个位置拖动到另一个位置。我的 JavaScript 似乎不合作。但是，我觉得我犯了一个非常简单的错误。也许另一双眼睛可以发现我的问题？

任何意见表示赞赏。

下面是我的 JS、CSS 和 HTML：

**JavaScript：**

```
function getStyle(object, styleName) {
    if (window.getComputedStyle) {
        return document.defaultView.getComputedStyle(object, null).getPropertyValue(styleName);
    } else if (object.currentStyle) {
        return object.currentStyle[styleName];
    }
}

function grabCalculator(e) {
    var evt = e || window.event;
    calculator = evt.target || evt.srcElement;
    var mousex = evt.clientX;
    var mousey = evt.clientY;
    diffx = parseInt(calculator.style.left) + mousex;
    diffy = parseInt(calculator.style.top) + mousey;
    addEvent(document, "mousemove", moveCalculator, false);
    addEvent(document, "mouseup", dropCalculator, false);
}

function moveCalculator(e) {
    var evt = e || window.event;
    var mousex = evt.clientX;
    var mousey = evt.clientY;
    calculator.style.left = mousex + diffx + "px";
    calculator.style.top = mousey + diffy + "px";
}

function addEvent(obj, eventType, fnName, cap) {
                            alert("TEST");
    if (obj.attachEvent) {
        obj.attachEvent("on" + eventType, fnName);
    } else {
        obj.addEventListener(eventType, fnName, cap);
    }
}

function removeEvent(obj, eventType, fnName, cap) {
    if (obj.attachEvent) {
        obj.detachEvent("off" + eventType, fnName);
    } else {
        obj.removeEventListener(eventType, fnName, cap);
    }
}

function dropCalculator(e) {
    removeEvent(document, "mousemove", moveCalculator, false);
    removeEvent(document, "mouseup", dropCalculator, false);
}

function init() {
    diffx = null;
    diffy = null;

    calculator = document.getElementById("calculator");

    //store top and left values of calculator
    calculator.style.top = getStyle(calculator, "top");
    calculator.style.left = getStyle(calculator, "left");
    calcButtonState = true;
}

window.onload = init; 
```

**CSS：**

```
#calculator
{
position: absolute;
z-index: 1;
left: 37%;
top: 25%;
border: solid;
border-color: red;
background: black;
width: 25%;
height: 45%;
} 
```

这只是相关的 CSS。

**HTML：**

```
<!DOCTYPE HTML>
<html>
    <head>
        <link type="text/css" rel="stylesheet" href="style.css">
        <script type="text/javascript" src="javascript.js"></script>
    </head>

<body>

    <div id="main">

        <!--Calculator-->
        <div id="calculator">
        </div>
        <!--End calculator-->

        <header>

            <div id="title">
                Conversion Formulas
            </div>

        </header>

        <nav>
        </nav>

        <div id="content">

            <div id="dryMeasureContent">
            </div>

            <div id="wetMeasureContent">
            </div>

            <div id="distanceContent">
            </div>

            <div id="temperatureContent">
            </div>

        </div>

        <footer>
        </footer>

    </div>

</body>
</html> 
```

请注意，我的其他 HTML 标签已经到位，但是，stackoverflow 似乎不能很好地处理 HTML，因此它们不会出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:31:13.450

首先，您的`init()`函数不会添加任何事件侦听器 - 这就是问题所在

尝试`addEvent(calculator, 'mousedown', moveCalculator);`在此行之后添加

`calculator = document.getElementById("calculator");`

我希望你能理解我的想法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:26:23.807

你看过 jquery library draggable [http://jqueryui.com/draggable/](http://jqueryui.com/draggable/)和 droppable [http://jqueryui.com/droppable/](http://jqueryui.com/droppable/)吗？

我使用这些库取得了巨大的成功。

超级超级容易实现。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T22:31:03.567

[W3Schools](http://www.w3schools.com/html/html5_draganddrop.asp#gsc.tab=0)有一个很棒的关于使用 HTML5 和 javascript 拖放的教程。

```
<!DOCTYPE HTML>
<html>
<head>
<script>
function allowDrop(ev){
  ev.preventDefault();
}

function drag(ev){
  ev.dataTransfer.setData("Text",ev.target.id);
}

function drop(ev){
  ev.preventDefault();
  var data=ev.dataTransfer.getData("Text");
  ev.target.appendChild(document.getElementById(data));
}
</script>
</head>
<body>
  <div id="div1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>

   <img id="drag1" src="img_logo.gif" draggable="true" ondragstart="drag(event)" width="336" height="69">

</body>
</html> 
```

# ruby-on-rails - 了解 CanCan 能力和用户

> ID：15775448
> 
> 赞同：0
> 
> 时间：2013-04-02T22:17:42.097
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cancan, rails-admin

我的 Rails 应用程序中有带有 CanCan 支持的 Rails Admin。我对一个问题感到困惑。CanCan 如何知道登录的用户是什么？例如，我的用户可以具有不同的角色，并且通过 CanCan 我为每个表分配特定访问权限的角色。当我去时`localhost:3000/admin`，我收到错误

```
 CanCan::AccessDenied in RailsAdmin::MainController#dashboard 
```

我的`Ability.rb`档案

```
 def initialize(user)
    if user and user.role.eql? :super_admin
      can :manage, :all                # allow superadmins to do anything
    elsif user and user.role.eql? :admin
      can :manage, [Location, School]  # allow admins to manage only Locations and Schools
    end
  end 
```

那么我该怎么做才能让用户能够登录 Rails Admin？我必须手动创建它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:26:44.700

默认情况下，CanCan 将使用`current_user`. 如果您在命名空间中使用 Devise（`admin`例如），那么实际上会使用 Devise `current_admin_user`。您可以`current_user`在 ApplicationController（或其他一些基本控制器）中创建一个方法来返回`current_admin_user`或覆盖该`current_ability`方法来实例化能力`current_admin_user`。

（这都是假设您的设计使用命名空间。默认情况下，设计将使用`current_user`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T22:24:32.573

您需要`current_user`在控制器中有一个可用的方法。假设你有这个，如果你没有签名，你将无权访问当前用户，所以如果你的能力文件不存在，你需要在你的能力文件中分配一个用户。如果用户尚不存在，请在您的`initialize`方法中添加以进行分配。`user ||= User.new`

```
def initialize(user)
  user ||= User.new

  if user and user.role.eql? :super_admin
    can :manage, :all                # allow superadmins to do anything
  elsif user and user.role.eql? :admin
    can :manage, [Location, School]  # allow admins to manage only Locations and Schools
  end
end 
```

# spring-mvc - 何时在 spring mvc 上使用 spring web flow

> ID：15775456
> 
> 赞同：15
> 
> 时间：2013-04-02T22:18:14.980
> 
> 标签：spring-mvc, spring-webflow

公平地说，使用 Spring Webflow 而不是 Spring MVC 的最重要理由是：使用 Spring MVC，工作流的不同阶段需要在代码中。即如果第1阶段成功结束，在Controller中我们需要转发到第2阶段的jsp等等。在 SPring MVC 中，我们不能在 xml 文件中执行此操作。

但是在 Spring webflow 中，我们可以在 xml 文件中配置流，而无需接触代码。

这是错误的还是过度简化？我查看了[http://forum.springsource.org/showthread.php?16393-Difference-between-Spring-MVC-Web-Framework-and-Web-Flow](http://forum.springsource.org/showthread.php?16393-Difference-between-Spring-MVC-Web-Framework-and-Web-Flow)并试图对解释进行总结。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T13:54:12.433

如果您的应用程序具有复杂的流页面，则需要将事件定义为有限状态机，然后使用`Webflow`. 将 webflow 用于购买保险、机票的网站是合理的。

否则使用像 Struts 这样的普通 MVC 框架，webflow 的学习曲线可能比其他 MVC 框架有点难。

我会说帖子中提到的以下几点是完全合理的。

`The main point: webflow is a powerful controller. That's it. Use it when you need its power. use plain old controllers where you don't.`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-28T07:00:09.433

取自[http://forum.spring.io/forum/spring-projects/web/web-flow/7159-difference-between-spring-mvc-web-framework-and-web-flow](http://forum.spring.io/forum/spring-projects/web/web-flow/7159-difference-between-spring-mvc-web-framework-and-web-flow)

MVC 是模型视图控制器设计模式的实现，webflow 是“web 流”状态机的实现。

Web 流位于 springs MVC 之上，允许您定义复杂的导航流。

很简单；如果你有很多独立的单页，它们做的不多且不交互，请使用普通的旧 MVC。如果您有一组代表工作流的页面，请使用 webflow 对工作流进行建模。如果两者都有；连连看

# android - USB requestWait 如何对来自从设备的 NAK 做出反应？

> ID：15775457
> 
> 赞同：1
> 
> 时间：2013-04-02T22:18:17.407
> 
> 标签：android, usb

我正在尝试让一个 Android USB 主机程序连接到一个实际上是 USB 串行转换器的从站。从设备当前设置为在没有可用数据时返回 NAK，我正在轮询从设备以查看是否有任何 IN 数据，方法是使用 IN 端点上的 queue() 和 requestWait() 作为 onAnimationUpdate 侦听器的一部分. 然而，系统卡在 requestWait() 中 - 大概是等到它得到对排队请求的明确答复。
我会认为 NAK 将被视为从站已对请求做出反应并且返回空结果或类似结果的指示。但是，我找不到有关此的详细文档。谁能指出我正确的方向以寻求建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:11:37.927

我已经解决了这个问题 - 但不是很令人满意。似乎 Android requestWait() 函数无法识别对 IN 的 NAK 响应，因为它指示“没有可用数据”（我原以为它会返回 null，因为正确的结果是什么），而只是坐下来等待直到有一些数据可用 - 锁定系统。我通过从我的设备返回一个“NULL”消息来“解决”这个问题，该消息由一个 1 字节的回复组成，ASCII NAK 作为单字节。这有效，因为我使用 ASCII 进行消息编码。

# java - Java 语法

> ID：15775464
> 
> 赞同：5
> 
> 时间：2013-04-02T22:18:39.177
> 
> 标签：java, generics

这段代码：

```
List<? extends Reader> weirdList;
weirdList.add(new BufferedReader(null)); 
```

有一个编译错误

> List 类型中的方法 add(capture#1-of ? extends Reader) 不适用于参数 (BufferedReader)

为什么？BufferedReader 扩展了阅读器，那为什么不是“匹配”呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T22:22:52.977

当编译器看到`<? extends Reader>`时，它假定它可以是*任何*类型，即是或扩展`Reader`。它可能是与 不兼容的东西`BufferedReader`，例如`StringReader`. 因此，如果类定义中的泛型类型出现在方法的参数中，例如`add`，并且实例的类型具有类似`<? extends Something>`的内容，编译器出于类型安全原因必须禁止它。在此示例中，它*可能*是`List<StringReader>`，因此您不能在`BufferedReader`此处添加 a。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-02T22:27:41.487

`List<? extends Reader> weirdList`可以保存对`List`存储任何类型的任何类型的引用`Reader`。所以有可能

```
List<? extends Reader> weirdList1 = new ArrayList<BufferedReader>();
List<? extends Reader> weirdList2 = new ArrayList<FileReader>(); 
```

如果 Java 允许您添加`BufferedReader`到`weirdList1`它也必须让您添加`BufferedReader`到`weirdList2`（引用类型相同），这不应该发生，因为`weirdList2`应该只存储`FileReader`s。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-02T22:31:09.543

对于您提供的变量：

```
List<? extends Reader> weirdList; 
```

以下所有作业均有效：

```
weirdList = new ArrayList<Reader>();
weirdList = new ArrayList<FileReader>();
weirdList = new ArrayList<BufferedReader>();
weirdList = new ArrayList<InputStreamReader>(); 
```

希望这可以解释您的编译错误。如果`weirdList`持有 type 的值，您正在尝试的内容是有意义的`ArrayList<BufferedReader>`，但对于 type 的值没有意义`ArrayList<FileReader>`。由于类型变量`List<? extends Reader>`可以保存任何一种类型的值（以及更多！），Java 将其称为错误。

Java 中的泛型很难理解。您可以认为该`List<? extends Reader>`类型对方法中的赋值或参数类型最有用，因此它们可以接受多种类型。对于“常规使用”，您可能最好使用“裸”通用，例如`List<Reader>`甚至`List<BufferedReader>`.

# python - 在 Python 中实现类以进行比较的 OOP 方法

> ID：15775467
> 
> 赞同：3
> 
> 时间：2013-04-02T22:18:41.577
> 
> 标签：python, matching, readability

使用 Python，我正在尝试实现一组类型，包括“无关”类型，用于模糊匹配。我已经这样实现了：

```
class Matchable(object):        
    def __init__(self, match_type = 'DEFAULT'):
        self.match_type = match_type

    def __eq__(self, other):
        return (self.match_type == 'DONTCARE' or other.match_type == 'DONTCARE' \
or self.match_type == other.match_type) 
```

来自 OO 背景，这个解决方案看起来不优雅；使用 Matchable 类会产生丑陋的代码。我更喜欢消除 match_type，而是让每个类型都有自己的类继承自超类，然后使用类型检查来进行比较。然而，类型检查似乎通常不被接受：

[http://www.canonical.org/~kragen/isinstance/](http://www.canonical.org/~kragen/isinstance/)

是否有更好的（更pythonic）方法来实现这个功能？

**注意：**我知道关于 Python“枚举”的大量问题和答案，其中一个答案可能是合适的。重写的 __ eq __ 函数的要求使事情变得复杂，而且我还没有看到在这种情况下使用提议的枚举实现的方法。

我能想到的最好的 OO 方法是：

```
class Match(object):
    def __eq__(self, other):
        return isinstance(self, DontCare) or isinstance(other, DontCare) or type(self) == type(other)

class DontCare(Match):
    pass

class A(Match):
    pass

class B(Match):
    pass

d = DontCare()
a = A()
b = B()

print d == a
True
print a == d
True
print d == b
True
print a == b
False
print d == 1
True
print a == 1
False 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:30:24.383

我想你只需要检查是否有任何操作数是模糊类型，不是吗？

```
class Fuzzy(object):
    def __eq__(*args):
        def isFuzzy(obj):
            return isinstance(obj, Fuzzy)
        return any(map(isFuzzy, args)) 
```

现在你可以这样做：

```
>>> class DefaultClass(object):
...    pass

>>> class DontCareClass(Fuzzy):
...    pass

>>> DefaultClass() == DontCareClass()
True 
```

由于我们使用的是`isInstance`，这将适用于多态性。`isInstance`在我看来，这是完全合法的使用。当您只能依赖鸭子类型时，您要避免的是类型检查，但这不是其中一种情况。

编辑：实际上，出于实际目的，这也很好：

```
class Fuzzy(object):
    def __eq__(*args):
        return True 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T22:45:49.550

你链接的文章说这`isinstance`并不总是邪恶的，我认为你的情况是合适的。文章中的主要抱怨是使用`isinstance`检查对象是否支持特定接口减少了使用隐含接口的机会，这是一个公平的观点。但是，在您的情况下，您实际上将使用一个`Dontcare`类来为在比较中应如何处理对象提供注释，并且`isinstance`将检查这样的注释，这应该是完美的。美好的。

# javascript - 何时在 javascript 函数中使用括号

> ID：15775469
> 
> 赞同：6
> 
> 时间：2013-04-02T22:18:42.580
> 
> 标签：javascript

我有一个函数`showText()`，它可以将表单文本框中的一些文本复制到其他地方的段落中。它通过以下方式调用：

```
document.getElementById("mybutton").onclick = showText; 
```

如果我将 () 添加到 showText 的末尾，它将不起作用，我通过阅读类似的答案了解到这是调用函数的唯一方法。

稍后在脚本中它需要 () 才能工作：

```
window.addEventListener("keypress", function(e) {
    var keycode = e.keyCode;
    if (keycode == 13) {
        showText();
    }
}, false); 
```

我不确定这里发生了什么。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-02T22:20:06.213

`showText`返回**函数** `showText`。

`showText()`运行函数`showText`并返回**结果**。

当您将函数附加到像 .onclick 这样的事件处理程序时，它需要一个`function`.

您可以调用一个函数并将结果返回给这样的事件：`document.getElementById("mybutton").onclick = showText();`假设函数本身**返回**一个函数：

```
function showText() {
    return function () { 
        alert('hello world'); 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:22:22.787

在 Javascript 中，函数是一等公民，这意味着它们可以分配给一个变量......这就是你在第一个做的事情......你基本上是将 onclick 设置为你选择的函数（告诉浏览器当这是点击...调用这个函数）

通过使用 () 你正在调用函数..

我也可以做这样的事情

```
function test() {
  alert('Alert something');
}

var a = test;
a(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T23:56:00.247

当您有如下声明时：

```
onclick = showText; 
```

计算右侧表达式并将结果分配给左侧。如果标识符`showText`解析为函数对象，则分配对该对象的引用。

如果`showText`后面是括在括号中的形式参数列表，即`showText()`，则使用提供的参数调用函数并分配结果。形参列表可以为空。

# highcharts - HighCharts 导出正在打印我的页面和图表

> ID：15775470
> 
> 赞同：0
> 
> 时间：2013-04-02T22:18:50.933
> 
> 标签：highcharts

我有一个 wordpress 网站，我有一个图表，当我点击打印时，打印图表所在的页面和同一页面中的图表，但图表在容器外部，而不是按预期打印图表本身。因为您可以看到代码正在运行，因为您可以看到所有元素是如何被删除的，并且唯一的图表留在了页面上。然而，它并没有按照预期的方式打印。

[这](http://hastebin.com/fihoyiyihi.xml)是我尝试打印的页面的副本。

# windows - 如何使用 masm 程序集或等效于 masm 程序集的 application::doevents() 刷新屏幕

> ID：15775471
> 
> 赞同：0
> 
> 时间：2013-04-02T22:18:51.293
> 
> 标签：windows, winapi, assembly, masm, masm32

当程序在 c++、c#、vb.net 中进行计算时，您可以使用`application::doevents()`刷新屏幕，以免屏幕冻结。你怎么能在组装特定的masm中做到这一点

我试着把

```
invoke SendMessage, hWin, WM_SETREDRAW, 0, 0 
invoke SendMessage, hWin, WM_SETREDRAW, 1, 0 
```

在我程序的循环部分，但它不起作用。

我也试过

```
invoke SendMessage, hWin, WM_SETREDRAW, 1, 0 
```

但这也不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:44:26.380

`Application::DoEvents`不仅仅是刷新屏幕。它实际上为应用程序的 UI 线程抽取消息队列。如果您想在汇编程序中执行此操作，则需要自己[泵送消息队列](https://stackoverflow.com/a/1415103/366904)。但是，我不建议这样做。在任何 UI 框架中使用`DoEvents`都是明确的反模式，无论它是否提供这样的功能。更多信息在[这里](https://stackoverflow.com/a/5183623/366904)和[这里](https://stackoverflow.com/a/11352575/366904)。

如果您只想确保重新绘制列表框控件，则需要使其无效并强制重新绘制。在 WinForms 中，这将是：

```
myListBox.Invalidate();
myListBox.Update(); 
```

在汇编程序中，您需要自己调用适当的 Win32 API 函数。特别是，您可以使用[`InvalidateRect`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145002.aspx)使列表框控件的客户区无效，然后[`UpdateWindow`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145167.aspx)确保它立即重新绘制。

我不知道 MASM 的语法，但在非托管 C++ 中，它看起来像这样：

```
InvalidateRect(hListBox,   /* handle to your listbox control    */
               NULL,       /* invalidate the entire client area */
               TRUE);      /* erase the background              */
UpdateWindow(hListBox); 
```

在大多数情况下，使窗口无效就足够了。您不需要强制立即重绘，因为下次您的应用程序处理消息时（在其常规消息循环中），它将处理一条`WM_PAINT`消息并重绘控件。这不起作用的唯一原因是，如果您通过执行某种类型的长时间运行的操作来阻塞 UI 线程，而您一开始就不应该这样做——分离一个后台线程来执行计算。

在这里发送[`WM_SETREDRAW`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145219.aspx)消息不起作用的原因是因为这基本上设置了一个标志，指示是否*允许*控件重绘自身。正如链接文档所解释的，仍然需要重新绘制窗口才能看到更改。它说你可以通过调用，例如，`RedrawWindow`或者做我们上面做的同样的事情来强制这样做。

# php - 处理访问日志的算法

> ID：15775472
> 
> 赞同：2
> 
> 时间：2013-04-02T22:18:54.083
> 
> 标签：php, mysql, algorithm, logging, analytics

假设我有一个如下所示的 MySQL 表，我在其中跟踪用户 (User.id) 何时 (Date) 阅读我网站 (Article.id) 上的文章：

```
------------------------------------------
Article_Impressions
------------------------------------------
date                | user_id | article_id
--------------------+---------+-----------
2013-04-02 15:33:23 | 815     | 2342
2013-04-02 15:38:21 | 815     | 108
2013-04-02 15:39:33 | 161     | 4815
... 
```

我正在尝试确定我有多少会话，以及给定日期每个用户的平均会话持续时间。当一篇文章在另一篇文章之后的 30 分钟内没有被阅读时，会话结束。

**问题**

我怎样才能有效地确定我在某一天有多少会话？我正在使用 PHP 和 MySQL。

我的第一个想法是查询给定日期的所有数据，按用户排序。然后我遍历每个用户，检查一次印象是否在最后一次印象的 30 分钟内，并统计每个用户当天的会话总数。

由于我们的网站每天有大约 200 万次展示，因此我正在尝试优化此报告生成器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:40:21.600

如果用户“会话”的概念对您的分析很重要，那么我将开始在您的表中记录数据，以便查询与会话相关的数据不是一个痛苦的过程。一个简单的方法是记录您的 PHP 会话 ID。如果您的 PHP 会话 ID 设置为具有相同的 30 分钟到期时间，并且您将 PHP 会话 ID 记录到此表中，那么您基本上将拥有您正在寻找的内容。

当然，这对您现有的记录没有帮助。我可能会继续创建会话字段，然后用随机生成的“会话”ID 重新填充它。我不会为此寻找一个完整的 SQL 解决方案，因为它在处理边缘情况（跨天的会话等）方面可能无法满足您的要求。我会编写一个脚本来执行此回填，其中将包含您需要的所有逻辑。

我的一般方法是像这样选择所有记录：

```
SELECT user_id, date /* plus any other fields like unique id that you would need for insert */
FROM Article_Impressions
WHERE session_id IS NULL
ORDER BY user_id ASC, date ASC 
```

注意：确保您在 user_id 和 date 字段上都有索引。

然后，我将遍历结果集，构建每个 user_id 的临时数组，并遍历该数组以获取所有日期值，并分配一个随机生成的会话 id，每次日期更改大于 30 分钟时该会话 id 都会更改。一旦用户值增加，我将为该前一个用户进行插入以更新 session_id 值，然后将临时数组重置为空并继续与下一个用户进行该过程。

请注意，采取像这样保持相对较小的临时/工作数组的方法可能很重要，因为您正在谈论的记录数，您可能无法将整个结果集读入数组在记忆中。

填充数据后，查询变得微不足道：

每天的独特会话：

```
SELECT DATE(date) as `day`, COUNT(DISTINCT session_id) AS `unique_sessions`
FROM Article_Impressions
GROUP BY `day`
ORDER BY `day` DESC /* or ASC depending on how you want to view it */ 
```

每天平均会话数：

```
SELECT AVG(sessions_per_day.`unique_sessions`) AS `average_sessions_per_day`
FROM
  (
    SELECT DATE(date) as `day`, COUNT(DISTINCT session_id) AS `unique_sessions`
    FROM Article_Impressions
    GROUP BY `day`
  ) AS sessions_per_day
GROUP BY sessions_per_day.`day` 
```

注意：您需要新 session_id 字段的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T04:01:26.930

试试这个查询

**查询 1**：

```
select 
  @sessionId:=if(@prevUser=user_id AND diff <= 1800 , @sessionId, @sessionId+1) as sessionId,
  @prevUser:=user_id AS user_id, 
  article_id,
  date,
  diff
from 
  (select @sessionId:=0, @prevUser:=0) b
join
  (select 
    TIME_TO_SEC(if(@prevU=user_id, TIMEDIFF(date, @prevD), '00:00')) as diff,
    @prevU:=user_id as user_id,
    @prevD:=date as date,
    article_id
  from 
    tbl 
  join
    (select @prev:=0, @prevU=0)a
  order by 
    user_id, 
    date) a 
```

**[结果]**：

```
| SESSIONID | USER_ID | ARTICLE_ID |                DATE | DIFF |
-----------------------------------------------------------------
|         1 |     161 |       4815 | 2013-04-02 15:39:33 |    0 |
|         2 |     815 |       2342 | 2013-04-02 15:33:23 |    0 |
|         2 |     815 |        108 | 2013-04-02 15:38:21 |  298 |
|         3 |     815 |        108 | 2013-04-02 16:38:21 | 3600 | 
```

如果根据您在问题中提到的要求，下一篇文章在 30 分钟后阅读，则此查询将为每个新用户以及同一用户返回一个唯一会话。diff 列返回同一用户的 2 篇文章之间的秒数差异，这有助于我们计算 sessionId。现在使用此结果，您可以轻松计算每个用户的平均时间以及每个会话的总时间。

希望这可以帮助你...

**[SQL小提琴](http://sqlfiddle.com/#!2/2dcae/17/0)**

# intuit-partner-platform - QBO 帐户模型的文档缺少类型属性的文档

> ID：15775474
> 
> 赞同：0
> 
> 时间：2013-04-02T22:19:03.370
> 
> 标签：intuit-partner-platform, quickbooks-online

帐户属性 SubType 必须与在线版本的 QboAccountDetailTypeEnum 中的枚举相匹配。将“资产”指定为 sub_type 会引发以下异常：

“IntuitRequestException：帐户类型无效。”

枚举文档：[http ://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0400_QuickBooks_Online/0400Enumerations_and_Codes](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0400_QuickBooks_Online/0400Enumerations_and_Codes)

在线帐户模型文档：[http ://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0400_QuickBooks_Online/Account](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0400_QuickBooks_Online/Account)

桌面帐户模型文档： [http ://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0500_QuickBooks_Windows/0600_Object_Reference/Account](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0500_QuickBooks_Windows/0600_Object_Reference/Account)

看起来 QBD 有一个“类型”属性，而在线版本只有“子类型”。

QBO：子类型（QboAccountDetailTypeEnum）

QBD：子类型（AccountSubtypeEnum）类型（AccountTypeEnum）

AccountTypeEnum 具有“资产”和您的基本存储桶帐户类型：资产、权益、费用、负债、收入。在 API 资源管理器中，它输出 a 和 .

QB 没有记录 QBO 上的“类型”属性，但您可以设置它，它会接受并存储它。它不在 API 资源管理器或 QBO 上的 API 文档中，但它在 QBD 上。我不得不假设它是一个将继续存在的属性，特别是因为它在 QBD 上，这是较旧的技术。

Intuit 的某个人可以澄清此行为，或者这是一个已知问题/差异吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:33:10.153

根据 Peter，
“资产”不是 SubType 的有效值。它必须是 QboAccountDetailTypeEnum 下列出的值之一，例如 AccountsPayable、AccountsReceivable、AccumulatedAdjustment、AccumulatedAmortization、AccumulatedAmortizationOfOtherAssets 等。

谢谢贾里德
_

# c - 为什么我的定点转换为负非整数减 1？

> ID：15775478
> 
> 赞同：1
> 
> 时间：2013-04-02T22:19:38.450
> 
> 标签：c, floating-point, fixed-point

我正在尝试编写一个定点转换例程。我需要将两个值加上一些标志放入一个 8 字节的数据包中，所以每个值只有 3 个字节。

我的代码如下所示：

```
typedef struct
{
    signed short m;
    unsigned char f;
} Q16_8;

Q16_8 toQ(double d)
{
    Q16_8 q;
    q.m = (signed short)d;
    q.f = (unsigned char)(d * 256.0);
    return q;
}

double toDouble(const Q16_8 q)
{
    return q.m + q.f / 256.0;
} 
```

我的测试结果是这样的。其中第 1 列是浮点数，第 2 列是固定点，第 3 列是差值。

```
-2.000000 -2.000000 0.000000
-1.750000 -0.750000 -1.000000
-1.500000 -0.500000 -1.000000
-1.250000 -0.250000 -1.000000
-1.000000 -1.000000 0.000000
-0.750000 0.250000 -1.000000
-0.500000 0.500000 -1.000000
-0.250000 0.750000 -1.000000
0.000000 0.000000 0.000000
0.250000 0.250000 0.000000
0.500000 0.500000 0.000000
0.750000 0.750000 0.000000
1.000000 1.000000 0.000000
1.250000 1.250000 0.000000
1.500000 1.500000 0.000000
1.750000 1.750000 0.000000 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:23:44.507

试试这个：

```
#include <stdio.h>

typedef struct
{
    signed short m;
    unsigned char f;
} Q16_8;

Q16_8 toQ(double d)
{
    Q16_8 q;
    long x = d * 256;
    q.m = x >> 8; // this assumes >> to be an arithmetic shift
    q.f = x & 0xFF; // this assumes signed ints to be 2's complement
    return q;
}

double toDouble(Q16_8 q)
{
    long x = ((long)q.m << 8) + q.f;
    return x / 256.0;
}

int main(void)
{
  int i;
  for (i = -2*4; i <= +2*4; i++)
  {
    double d = i / 4.0;
    Q16_8 q = toQ(d);
    double d2 = toDouble(q);
    printf("toDouble(toQ(%f)) = %f\n", d, d2);
  }
  return 0;
} 
```

输出（[ideone](http://ideone.com/e7e1vu)）：

```
toDouble(toQ(-2.000000)) = -2.000000
toDouble(toQ(-1.750000)) = -1.750000
toDouble(toQ(-1.500000)) = -1.500000
toDouble(toQ(-1.250000)) = -1.250000
toDouble(toQ(-1.000000)) = -1.000000
toDouble(toQ(-0.750000)) = -0.750000
toDouble(toQ(-0.500000)) = -0.500000
toDouble(toQ(-0.250000)) = -0.250000
toDouble(toQ(0.000000)) = 0.000000
toDouble(toQ(0.250000)) = 0.250000
toDouble(toQ(0.500000)) = 0.500000
toDouble(toQ(0.750000)) = 0.750000
toDouble(toQ(1.000000)) = 1.000000
toDouble(toQ(1.250000)) = 1.250000
toDouble(toQ(1.500000)) = 1.500000
toDouble(toQ(1.750000)) = 1.750000
toDouble(toQ(2.000000)) = 2.000000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T22:30:10.203

举`d = -1.75`个例子，考虑以下两个事实的后果：

*   `m`将是`-1`，
*   `f`只能是积极的...

# codeigniter - 购物车行数

> ID：15775486
> 
> 赞同：1
> 
> 时间：2013-04-02T22:20:13.320
> 
> 标签：codeigniter

我正在为一个项目使用 Codeigniter。

这是我的购物车的样子

1号|苹果|数量-2

2号|橙色|数量-3

3号|橙色|数量-3

通常如果我使用“$this->cart->total_items();” . 我会得到 2+3+3 = 8。但是，我只想要行数（看到有三行）。我想显示 '3' 。有没有类似 '$this->cart->rowcount()' 的东西？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T00:10:55.963

我只是在这里猜测（因为我不在可以测试的地方），但您可以尝试：

```
$rows = count($this->cart->contents()); 
```

我假设返回的数组具有每个项目类型的数组，其中包含一个数量值。

# c# - 在构造函数中包含基类的参数时，有没有办法利用继承？

> ID：15775487
> 
> 赞同：1
> 
> 时间：2013-04-02T22:20:13.403
> 
> 标签：c#, asp.net, inheritance

从我读过的内容来看，似乎没有一种将类从基类转换为继承类的好方法。

按照[这个](https://stackoverflow.com/questions/12565736/convert-base-class-to-derived-class)问题的答案，我继续创建了一个构造函数，它将基类的实例作为参数。

构造函数如下所示：

```
public DerivedClass(BaseClass base) {
    this.Id = base.Id;
    this.Foo = base.Foo;
    // ..
    this.NewProperty = SomeNewValue;
} 
```

等等。这也意味着如果基类获得一个新属性，派生类中的构造函数也需要修改才能复制该属性。

**有没有办法利用派生类从基类继承这一事实来使这个构造函数不那么脆弱？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T22:24:35.763

看来您还没有完全掌握继承，并且您已经过度考虑了您需要做什么。

> 我已经继续并刚刚创建了一个构造函数，它以基类的实例作为参数。

扩展（继承）基类时不需要这样做，只有在包装类时才这样做。

> 有没有办法利用派生类从基类继承这一事实来使这个构造函数不那么脆弱？

是：使用构造函数重载。给定这个基类：

```
public class MyBase
{
    public virtual string Name { get; set;}
} 
```

你*可以*这样做：

```
public class MyExtendedClass : MyBase 
{
    public MyExtendedClass(string name)
    {
        Name = name;
    }
} 
```

但更好的是像这样利用构造函数重载，其中构造函数参数传递给基类构造函数：

```
public class MyBase
{

    public MyBase(string name)
    {
        Name = name;
    }

    public virtual string Name { get; set;}
}

public class MyExtendedClass : MyBase 
{
    public MyExtendedClass(string name) : base (name) {   }
} 
```

您倾向于在构造函数中为您希望不可变的属性传递值。对于其他人，您可以利用内联初始化：

```
var myNewClass = new MyExtendedClass() { Name = "blah" }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:25:22.110

您能否不向执行分配的基类添加受保护的构造函数，然后将基类作为参数传递给它：

```
protected BaseClass(BaseClass source)
{
    this.Id = source.Id;
    this.Foo = source.Foo;
    ...
} 
```

从而保持代码在基类本身中复制基类？

# .net - 确定 .NET 程序集是否为混合模式，而不在 Powershell v3 中调用外部 EXE

> ID：15775488
> 
> 赞同：7
> 
> 时间：2013-04-02T22:20:20.137
> 
> 标签：.net, powershell, native

所以我编写了一个 Powershell 脚本来获取任何给定 exe\dll 的平台。我对程序集标头不够熟悉，无法确定文件是否具有本机代码。我尽量不调用 corflags、peverify、ildasm 或任何其他外部可执行文件。

有没有简单的方法来实现这一点？这是我目前拥有的 Powershell 代码，用于确定程序集是本机还是 .NET 以及它是为什么平台构建的。如果它是 .NET，我想添加功能来确定它是否是混合模式。

```
# Gets the Platform of a any Assembly native or managed.
# Examples:
#   Get-Platform "C:\vs\projects\bestprojectever\bin\debug\mysweetproj.dll"
#   Get-Platform (dir *.dll | select -first 1) 

param([Parameter(Mandatory=$true, ValueFromPipeline=$true)] $assemblyPath)

$platform = "Unknown"
$resolvedPath = Resolve-Path -literalPath $assemblyPath

try {
    $architecture = [System.Reflection.AssemblyName]::GetAssemblyName($resolvedPath) | Select-Object -ExpandProperty ProcessorArchitecture
    switch ($architecture) {
        MSIL { $platform = "AnyCPU Managed" }
        X86 { $platform = "x86 Managed" }
        Amd64 { $platform = "x64 Managed" }
        IA64 { $platform = "Itanium Managed" }
        default { $platform = "Unknown Managed" }
    }
}
catch [System.BadImageFormatException] {
    try {
        $assemblyStream = [System.IO.File]::OpenRead($resolvedPath)
        try {
            $binaryReader = New-Object System.IO.BinaryReader($assemblyStream)
            if ($binaryReader.ReadUInt16() -eq 0x5A4D)
            {
                $ignore = $assemblyStream.Seek(0x3c, [System.IO.SeekOrigin]::Begin)
                $pos = $binaryReader.ReadInt32()
                $ignore = $assemblyStream.Seek($pos, [System.IO.SeekOrigin]::Begin)
                $format = $binaryReader.ReadUInt32()
                if ($format -eq 0x4550)
                {
                    $machineType = $binaryReader.ReadUInt16()
                }
            }
        }
        finally {
            if ($binaryReader -ne $null) {
                $binaryReader.Close();
                if ($binaryReader.psbase -eq $null) {
                    $binaryReader.Dispose()
                } else {
                    $binaryReader.psbase.Dispose()
                }
            }
        }
    }
    finally
    {
        if ($assemblyStream -ne $null) {
            $assemblyStream.Close();
            if ($assemblyStream.psbase -eq $null) {
                $assemblyStream.Dispose()
            } else {
                $assemblyStream.psbase.Dispose()
            }
        }
    }
    switch ($format)
    {
        0x454C { $platform = "Virtual Device Driver Native" }
        0x454E { $platform = "16bit Native" }
        0x4550
        {
            switch ($machineType)
            {
                0x14c { $platform = "x86 Native" }
                0x166 { $platform = "R4000 Native" }
                0x169 { $platform = "MIPS WCE v2 Native" }
                0x1a2 { $platform = "Hitachi SH3 Native" }
                0x1a3 { $platform = "Hitachi SH3 DSP Native" }
                0x1a6 { $platform = "Hitachi SH4 Native" }
                0x1a8 { $platform = "Hitachi SH5 Native" }
                0x1c0 { $platform = "ARM Native" }
                0x1c2 { $platform = "Thumb Native" }
                0x1d3 { $platform = "Matsushita AM33 Native" }
                0x1f0 { $platform = "Power PC Native" }
                0x1f1 { $platform = "Power PC with floating point support Native" }
                0x200 { $platform = "IA64 Native" }
                0x266 { $platform = "MIPS16 Native" }
                0x366 { $platform = "MIPS with FPU Native" }
                0x466 { $platform = "MIPS16 with FPU Native" }
                0xebc { $platform = "EFI Byte Code Native" }
                0x8664 { $platform = "x64 Native" }
                0x9041 { $platform = "Mitsubishi M32R Native" }
                0xc0ee { $platform = "Pure MSIL" }
                default { $platform = "Unknown Native" }
            }
        }
        default { $platform = "Unknown Format" }
    }
}

return $platform 
```

我也熟悉以下[问题](https://stackoverflow.com/questions/1946322/how-do-i-find-out-if-a-net-assembly-contains-unmanaged-code)，所有答案都涉及调用一些我试图避免的外部 EXE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T14:48:06.923

您可以从[此处](https://github.com/mattifestation/PowerSploit/blob/master/PETools/Get-PEArchitecture.ps1)可用的代码开始并对其进行调整以查看[IMAGE_COR20_HEADER 是否](http://www.codeproject.com/Articles/12585/The-NET-File-Format)包含 COMIMAGE_FLAGS_ILONLY（在这种情况下，这是一个非混合模式程序集）。

# javascript - 通过 id javascript 填写文本字段

> ID：15775489
> 
> 赞同：0
> 
> 时间：2013-04-02T22:20:32.060
> 
> 标签：javascript, button, textbox

我的代码有一个文本字段和一个用 javascript 制作的按钮。当用户单击该按钮时，它会打开一个新窗口到网站的搜索页面。我想做的是使用它的 id 填写搜索字段，然后激活网站的搜索按钮。我似乎无法将文本传递到外部站点的文本字段，但这就是我所拥有的。

```
<script type="text/javascript">// <![CDATA[
function mySearch()
{

popupWindow = window.open(

'http://www.websitehere.com','popUpWindow','height=768,width=1024,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,directories=no,status=yes')

popupWindow.focus();

popupWindow.searchpath1 = 'test value';

}
// ]]></script>
<center><form><input name="searchTxt" type="text" /><br />&nbsp; <input onclick="mySearch()" value="Search" type="button" /></form></center> 
```

textBoxId 将是新打开的窗口上的搜索文本框的 ID。

如果有什么不明白的，请告诉我。

这是外部站点文本框的源代码：

```
 <input title="Search Term" type="text" name="searchpath1" id="searchpath1" maxlength="255" size="25" style="width: 300px;" value=""/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:24:44.390

尝试类似的东西

```
popupWindow.document.getElementById('textBoxId').value = 'test value'; 
```

代替

```
popupWindow.textBoxId = 'test value'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T22:31:29.887

您需要获取输入文本 DOM 元素“textBoxId”并设置此获取元素的“值”属性。

这条线是错误的

```
popupWindow.textBoxId = 'test value'; 
```

使用以下行替换它：

```
var targetTextField = popupWindow.document.getElementById('textBoxId');
targetTextField.value = "test value"; 
```

在这里，我重写了完整的函数定义来评估提出的解决方案。试试看，让我们知道它是如何工作的！[]s

```
function mySearch()
{
    popupWindow = window.open('file:///tmp/form.html','popUpWindow','height=768,width=1024,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,directories=no,status=yes')

    if (window.focus()) 
        popupWindow.focus();

    var targetTextField = popupWindow.document.getElementById('textBoxId');
    targetTextField.value = 'test value';
    targetTextField.focus();
} 
```

# mysql - 查询 IP 地址时出现 C# MySql 语法异常

> ID：15775500
> 
> 赞同：0
> 
> 时间：2013-04-02T22:21:44.540
> 
> 标签：mysql, c#-4.0, select

我正在使用以下内容查询存储在数据库表中的 IP 地址：

```
"SELECT user_id, is_login FROM users WHERE last_ip_address = '" + this.GetIPAddress() + "'" 
```

我知道 IP 在表中，因为我在那里看到它。我真的在盯着它看，但是这个查询没有返回任何行。

当我在没有单引号 (') 的情况下运行它时，会出现语法错误：

```
"SELECT user_id, is_login FROM users WHERE last_ip_address = " + this.GetIPAddress() 
```

那么这是哪里出了问题？函数返回的IP是标准格式###.###.###.### IP地址，语法错误本身是这样的：

```
{"You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '.##.#' at line 1"} 
```

编辑：更多信息，该字段本身是 varchar(30) 类型，它说 Collat​​ion = latin1_swedish_ci，但我什至不知道那是什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:48:45.970

好的，我很抱歉造成混乱。我对使用 C# 和 MySqlConnector 非常新（就像我的意思是我今天才开始）。

为了简短的回答，我试图将表格视为一个表格，并像从二维数组一样读取它，而我需要做的是使用 MySqlDataReader。我在这里找到了一个很好的答案：

[如何使用 C# 读取列和行？](https://stackoverflow.com/questions/4235552/how-to-read-columns-and-rows-with-c)

感谢大家的帮助和建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:42:19.697

尝试使用`LIKE`然后：

```
"SELECT user_id, is_login FROM users WHERE last_ip_address LIKE '%" + this.GetIPAddress() + "%'" 
```

**编辑**：我会尝试将该排序规则更改为*UTF8*。

# ios - 为 View 创建图案背景

> ID：15775503
> 
> 赞同：0
> 
> 时间：2013-04-02T22:22:07.887
> 
> 标签：ios, ios5, uiview, uicolor

我有一个带有图案背景的视图。以前我将图像切成一定大小，所以它们真的很大。

我认为有一种更好的方法来处理顶部的背景颜色和图案图像，因此图像更小，内存更少等。

```
buttonView =[[UIView alloc] initWithFrame:CGRectMake(0, logoView.bounds.size.height, screen.size.width, 232)];
buttonView.autoresizingMask = UIViewAutoresizingFlexibleHeight;
//    UIImageView *bgButtonView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, buttonView.bounds.size.width, buttonView.bounds.size.height)];
//    NSString *bgButtonViewFilePath = [[NSBundle mainBundle] pathForResource:@"bg-welcomeButtonView" ofType:@"png"];
//    UIImage *bgButtonImg = [[UIImage alloc] initWithContentsOfFile:bgButtonViewFilePath];
//    [bgButtonView setImage:bgButtonImg];
//    [buttonView addSubview:bgButtonView];
    buttonView.backgroundColor = [[UIColor blueColor] initWithPatternImage:[UIImage imageNamed:@"bg-ButtonViewPattern"]]; 
```

在最后一行中，我尝试设置我的图案以覆盖蓝色。不幸的是，整个视图显示为白色。如果我只有 blueColor 它显示纯蓝色，所以不确定上面是否有问题。

我的图像模式如下，它是一个带有白色和透明像素的 PNG。

![图案图像](https://i.stack.imgur.com/RvI0C.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:25:06.260

您可以通过这种方式将图案设置为背景颜色：

```
buttonView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"bg-ButtonViewPattern"]]; 
```

如果图像相对较小，您可以使用所需的叠加颜色制作多个版本。

# sql-server - 比较两个不同表格的工具

> ID：15775506
> 
> 赞同：1
> 
> 时间：2013-04-02T22:22:25.133
> 
> 标签：sql-server, sql-server-2005

我需要比较大约的结构。SQL Server 2005中的50个表，并编写T-Sql脚本使它们相等。每个表在同一个数据库中都有其副本，唯一的区别是名称和结构（例如，原始“tableName”必须与“tableName_copy”进行比较，而“tableName_copy”缺少约束、PK、FK、触发器等） .

我知道市场上有很多工具（免费和商业）来比较和准备 SQL 脚本，但他们的问题是他们可以比较两个数据库中具有相同名称的表，不能选择比较哪些表，甚至更少如果他们的名字不同。

我想知道是否存在这样的工具（如果它们是免费的或开源的，那就太好了）来完成为所选不同名称的表自动生成脚本的工作。如果有人在分享他/她的经验之前做过类似的工作，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:24:45.223

您能否采取不同的方法，将您`tablename_copy`的 s 复制到第二个数据库中，但将它们重命名为`tablename`，然后运行您最喜欢的比较工具？

# javascript - HTML 和 JavaScript 中的第三级引号转义

> ID：15775507
> 
> 赞同：10
> 
> 时间：2013-04-02T22:22:33.643
> 
> 标签：javascript, jquery, html, jquery-tools

我将以此作为开头：“我知道这是不好的做法和丑陋的 hack（我很抱歉）但是......”

当用户将鼠标悬停在 html 元素上时，我正在使用 jQuery TOOL 的工具提示小部件在它上显示工具提示。使用此小部件，您可以将工具提示的 html 添加到元素的`title`属性中。

在该 html 中，我有一个要绑定内联`onclick`事件处理程序的元素。

不幸的是，我遇到了太多的引号层，无法将参数传递给我试图调用的函数。

我有这样的事情：

```
<div title="<div onclick='myFunction(_____)'>My tooltip content</div>">My element</div> 
```

如果我需要将整数传递给它，则此方法有效，`myFunction`因为它不需要另一组引号。不幸的是，我想将一个字符串传递给`myFunction`. 如何进一步转义此字符串参数，使其不关闭`onclick`或`title`字符串？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T22:26:23.927

在 HTML 属性中，您应该将引号编码为 HTML 实体，例如：

```
<div title="This says &quot;Hello!&quot;">
    Hello!
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:30:29.133

我能够找到解决我的特定问题的方法。不确定这是否适用于一般情况，或者 jQuery TOOLs 是否正在做一些神奇的事情来取消我的字符串，但我最终转义`&quot;`并且它确实评估为执行的有效 Javascript。

像这样的东西：

```
<div title="<div onclick='myFunction(&quot;_____&quot;)'>My tooltip content</div>">My element</div> 
```

老实说，我真的不明白这是如何工作的。如果有人能澄清过程的哪一部分将这些`&quot;`s 更改为实际的功能引号，我会很高兴。

# mongodb - 会计系统中使用信息的每月汇总

> ID：15775513
> 
> 赞同：0
> 
> 时间：2013-04-02T22:23:09.547
> 
> 标签：mongodb, mapreduce, aggregation-framework

我在一个会计系统中工作，该系统接收（通过队列）关于可以创建（使用类型）、修改和销毁的不同元素的使用事件。我每个月可以有大约 1000000 个事件。

在月底，系统必须汇总信息以生成包含给定元素已使用次数的报告。我确信我还需要执行每日聚合。

举个例子就更清楚了。这些是我收到的事件类型：

```
{event: "create", date: "2013/01/01", element_id: 1, element_type: "L"}
{event: "modify", date: "2013/02/05", element_id: 1, element_type: "XL"}
{event: "modify", date: "2013/02/07", element_id: 1, element_type: "L"}
{event: "destroy", date: "2013/02/08", element_id: 1} 
```

这应该是“二月”的结果：

```
-- from 2013/02/01 to 2013/02/05 + 2013/02/07 to 2013/02/08
{element: "1", element_type: "L", units: "6 days" }
-- from 2013/02/05 to 2013/02/07
{element: "1", element_type: "XL", units: "2 days" } 
```

我主要关心的是**如何跟踪在以前的时间间隔**（例如 2 年前）中创建但仍未以有效方式销毁的元素。

你知道任何可以解决这个问题的算法吗？我一直在考虑 map-reduce 过程，但我不确定它如何适合（按月过滤，跟踪前几个月创建的元素等）。欢迎任何想法。

如果有帮助，我目前正在使用 nodejs 和 mongodb 来存储事件，但如果这有任何优势，我可以使用 java 和/或 mysql。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:29:54.223

有很多方法可以解决这个问题，很难给你一个好的答案。我要做的就是给你一些建议。

1.  就像您已经提到构建一个 mapreduce，或者如果您的数据允许，甚至更好地使用新的聚合框架。这是相当数量的数据，因此您可能需要更频繁地聚合。
2.  更频繁地聚合，比如每天，并将这些数据存储在新的集合或不同的数据存储中，并通过每日计划的聚合任务添加到其中。这样在月底您只需对每月数据进行一次简单的查询。
3.  Hadoop！

如果#2 对您来说似乎是一条不错的路线，您可能希望考虑使用星型模式来存储您的日常聚合，并可能存储在 RDBMS 中。不仅可以很好地构建工具，而且市场上有许多产品可以很好地连接到星形/雪花模式数据进行分析。

听起来像一个有趣的项目！

# c# - “'object'不包含'property'的定义，并且找不到接受'object'类型的第一个参数的扩展方法'property'”

> ID：15775514
> 
> 赞同：0
> 
> 时间：2013-04-02T22:23:09.507
> 
> 标签：c#, dynamicobject

我创建了一个简单的类，它是 DynamicObject 的后代：

```
public class DynamicCsv : DynamicObject
{

    private Dictionary<string, int> _fieldIndex;
    private string[] _RowValues;

    internal DynamicCsv(string[] values, Dictionary<string, int> fieldIndex)
    {
        _RowValues = values;
        _fieldIndex = fieldIndex;
    }

    internal DynamicCsv(string currentRow, Dictionary<string, int> fieldIndex)
    {
        _RowValues = currentRow.Split(',');
        _fieldIndex = fieldIndex;
    }

    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        result = null;
        dynamic fieldName = binder.Name.ToUpperInvariant();
        if (_fieldIndex.ContainsKey(fieldName))
        {
            result = _RowValues[_fieldIndex[fieldName]];
            return true;
        }
        return false;
    }

    public override bool TrySetMember(SetMemberBinder binder, object value)
    {
        dynamic fieldName = binder.Name.ToUpperInvariant();
        if (_fieldIndex.ContainsKey(fieldName))
        {
            _RowValues[_fieldIndex[fieldName]] = value.ToString();
            return true;
        }
        return false;
    }

} 
```

我通过执行以下操作来使用后代对象：

```
 protected string[] _currentLine;
    protected Dictionary<string, int> _fieldNames;
...
                _fieldNames = new Dictionary<string, int>();
...
                _CurrentRow = new DynamicCsv(_currentLine, _fieldNames); 
```

当我尝试使用带有点符号的 _CurrentRow 时：

```
int x = _CurrentRow.PersonId; 
```

我收到以下错误消息：

**“‘ *object* ’不包含‘ *property* ’的定义，并且找不到接受‘object’类型的第一个参数的扩展方法‘ *property ’”***

我可以使用 VB 解决即时窗口中的属性，但没有任何问题：

```
? _CurrentRow.PersonId 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T22:26:16.223

它看起来像是`_CurrentRow`输入的，`object`但您希望在其上进行动态查找。如果是这种情况，那么您需要将类型更改为`dynamic`

```
dynamic _CurrentRow; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T22:27:39.743

您没有显示`_CurrentRow`. 它应该被声明为

`dynamic _CurrentRow`为了具有动态行为。

# css - 在 div 的中心垂直对齐图像

> ID：15775521
> 
> 赞同：-3
> 
> 时间：2013-04-02T22:24:13.933
> 
> 标签：css, vertical-alignment

我想在 div 的中心垂直对齐和水平对齐图像。目前我的代码只适用于水平对齐，现在我也想垂直对齐它。你能帮我么？

这是我的CSS代码：

```
.centre
{
    height: 100%;
    width: 100%;
    text-align: center;
    vertical-align: middle;
}

img
{
    vertical-align: middle;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:30:20.143

只需 `display:table-cell;`使用`.centre`. 这是一个清楚地显示它的示例，只需相应地更改选择器即可。[http://jsfiddle.net/Y6NTf/](http://jsfiddle.net/Y6NTf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:46:19.683

另一种选择是将 设置`img` `position`为 相对 和`top`设置`left`为`50%`。[这](http://jsbin.com/okigoz/1/)是一个完整的工作示例。

HTML：

```
<div id="myDiv">
  <img id="myImg" src="http://i.cdn.turner.com/cnn/.element/img/3.0/global/header/hat/arrow_black.png"></img>
</div> 
```

CSS：

```
#myDiv {
  height: 300px;
  width: 300px;
  background: grey;
}

#myImg {
  position:relative;
  top: 50%;
  left: 50%;
} 
```

# visual-studio-2012 - Visual Studio 2012 无法识别所有挂起的更改？

> ID：15775529
> 
> 赞同：19
> 
> 时间：2013-04-02T22:24:43.827
> 
> 标签：visual-studio-2012, tfs

我正在与我的团队一起在 TFS 中进行项目工作，当我尝试为我的课程制作新的建模项目时出现问题，它不会出现在待处理的更改中。

所以我是这样去做的：首先，我进入我保存课程的文件夹。我从那里尝试了很多组合：我尝试首先右键单击我的文件夹并放置“签出以进行编辑”，然后继续 *（见下文）；接下来，我尝试单击我的类的 .csproj，以便在添加建模项目时激活我的项目，然后移至 *; 最后，我尝试激活连接它们的整个项目的整个解决方案，然后移至 *.

都没有奏效。（我总是有最后一个版本）

*   这是我接下来为所有可能性所做的事情：我去了架构 - >新图表（命名图表并离开创建新项目） - >创建（然后窗口显示在哪个文件夹中创建新项目，我总是选择我的文件夹在哪里我继续上课）。

完成后，我去检查团队资源管理器中的“待定更改”，因为应该有一些可用的，因为我已经创建了建模项目。但是没有。因为我不能那样做，所以我制作的最后一个解决方案是右键单击我的项目上的源代码管理资源管理器，然后将项目添加到文件夹并选择我的项目，该项目是在我想要的地方创建的被创建。

但是，最后一个解决方案在尝试打开我的建模项目时给了我错误。我知道我应该激活第一个建模项目，所以我点击了 .modelproj 并点击它时，它给了我这个“通知”或者更确切地说是“警告”：

您打开的解决方案受源代码管理，但当前未针对 Visual Studio 中的集成源代码管理进行配置。您现在想将此解决方案绑定到源代码管理吗？

--

我究竟做错了什么？为什么在创建我的项目时默认没有集成解决方案（我的朋友是自动完成的，他们不需要在源代码管理资源管理器中右键单击添加项目才能看到待处理的更改）？

我希望我让自己可以理解。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-02T22:30:57.323

看起来您的解决方案绑定已损坏。在问题上单击“是”将您的解决方案绑定到源代码管理，这是必须存储在解决方案文件中的信息，虽然 Visual Studio 确实看到该文件夹​​已映射到源代码管理，但它也看到您的解决方案不是（您在创建时是否选中了将解决方案添加到源代码控制复选框？）

可选择尝试打开`file`-> `Source Control`-> (可选) `Advanced`-> `Manage Source Control`。您可以在解决方案中单独选择项目，然后单击`bind`工具栏上的按钮将它们手动绑定到源控制。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-20T02:04:45.027

我有一个类似的问题，就我而言，解决方案是右键单击我的项目并选择 Source Control->Go online。显然我必须以某种方式切换到离线模式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-04T10:55:27.017

在这种情况下，我已经成功地从源代码管理资源管理器而不是解决方案资源管理器签入了文件。然后之后它又开始工作了

```
VIEW > Other Windows > Source Control Explorer 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-25T23:06:38.783

其他方法：文件--> 源代码控制--> 高级--> 更改源代码控制。

在显示的窗口中选择要绑定到 TFS 的所有项目

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-06T14:04:11.193

我有同样的问题并通过单击解决它：文件 -> 源代码管理 -> 高级 -> 刷新状态

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-20T04:45:49.037

在 VS2013+ 中，您可以检查您的解决方案是否在线。就我而言，由于 VSO 服务中断，我的解决方案离线。我不得不打开解决方案，`File > Source Control > Go Online`.

# java - Java从数组中提取值

> ID：15775534
> 
> 赞同：0
> 
> 时间：2013-04-02T22:24:57.990
> 
> 标签：java, getter-setter

我有这个代码：

```
_leftArray[0] = _square[6][4];
_leftArray[1] = _square[8][4];
_leftArray[2] = _square[9][5]; 
```

我希望能够提取数组的值。我想编写一个将数组位置作为参数并返回坐标的方法。因此，如果该方法被称为 returnCoordinatesFromArray，我可以键入 returnCoordinatesFromArray[1] 并返回 6 作为变量和 4 作为变量，这样我就可以在另一个方法中使用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:31:20.893

如果这些是静态的、硬编码的值，为什么不这样做：

```
Map<Integer, int[]> indexToCoordinateMap = new LinkedHashMap<Integer, int[]>();
indexToCoordinateMap.put(0, new int[]{6, 4});
indexToCoordinateMap.put(1, new int[]{8, 4});
indexToCoordinateMap.put(2, new int[]{9, 5}); 
```

那你就不需要这个方法了。您可以简单地获取一个值数组，其中`0th`索引是 x 坐标，`1st`索引是 y 坐标。当然，这是约定俗成的。如果您想更具体，可以使用[`Point`](http://docs.oracle.com/javase/6/docs/api/java/awt/Point.html)并执行以下操作：

```
Map<Integer, Point> indexToPointMap = new LinkedHashMap<Integer, Point>();
indexToPointMap.put(0, new new Point(6, 4));
indexToPointMap.put(1, new Point(8, 4));
indexToPointMap.put(2, new Point(9, 5)); 
```

然后你可以简单地做：

```
Point point = indexToPointMap.get(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:31:04.543

做一个双循环并保存 x 和 y 位置。

```
_square value;
int posX=0;
int posY=0;
for(int i=0; i<arr.length; i++) {
   for(int j=0; j<arr.length; j++) {
      if(arr[i][j]==value) {
         posX=i;
         posY=j;
      }
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T22:37:14.443

“*我可以键入 returnCoordinatesFromArray[1] 并返回 6 作为变量和 4 作为变量*” 按照设计，在 Java 中不可能一次返回两个值。如果您需要做这样的事情，您可以构建自己的包含两个变量的小对象：

```
public class Tupel{
    private int firstIndex;
    private int lastIndex;

    public Tupel(int firstIndex, int lastIndex){
       this.firstIndex=firstIndex;
       this.lastIndex=lastIndex;
    }

    public int getFirstIndex(){
       return this.firstIndex;
    }
     // the same for lastIndex
} 
```

然后你将你的 Tupels 存储在一个数组`Tupel[] leftArray`中，例如

```
leftArray[1] = new Tupel(6,4); 
```

或者您使用现有的类，例如`Point`它们是否符合您的需求。

# javascript - JQuery $.contains 方法总是返回 false

> ID：15775535
> 
> 赞同：1
> 
> 时间：2013-04-02T22:25:06.267
> 
> 标签：javascript, jquery

我在这部分 JQuery 代码中遇到问题：

```
$(".roomblock_slots li").droppable({ activeClass: "drop_here", hoverClass: "hover_here", tolerance: "pointer",
        drop: function (event, ui) {
            var container = $(this);
            if (container.contains(container,"div")) {
                return false;
            }
            return true;
        } }); 
```

我正在尝试将一个元素放入一个 li 元素中，并且我想检查它是否包含一个 div 元素。问题是，函数本身总是返回 false 并且永远不会进入“return false;”，即使 li 包含一个 div 元素，如下所示：

```
<li class="ui-droppable">
    <div class="ui-draggable">
</li> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T22:27:22.697

该实用程序方法`$.contains`无法按预期工作。

[http://api.jquery.com/jQuery.contains/](http://api.jquery.com/jQuery.contains/)

它采用的参数是：`container`和`contained`，您可以像这样使用它：

```
$.contains(container, contained) 
```

这两个参数都应该是 DOM 元素……而不是 jQuery 对象或选择器。

因此，在您的情况下，由于您不是在寻找包含在另一个特定元素中的特定元素，因此您不能使用`$.contains`- 您必须使用另一种方法。

我建议使用`.find`并计算有多少匹配：

```
if (container.find("div").length > 0) {

} 
```

当然，如果您只想查看直系孩子，请使用：

```
if (container.children("div").length > 0) {

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T22:28:23.650

链接时，您将执行以下操作：

```
if ( container.has('div') ) {...} 
```

# javascript - 更改时如何仅提交表单上单个选择框的值？

> ID：15775540
> 
> 赞同：0
> 
> 时间：2013-04-02T22:25:23.320
> 
> 标签：javascript, select

我正在开发一个加载项目列表的项目，用户需要能够更改此项目列表的属性。

基本上，我在一个带有预加载选项的表单上有 50 个选择框。我只想提交用户选择更改的选择框的值。我知道我知道我需要使用 on change 属性并提交它。但是，我如何仅提交更改的单个元素的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:35:31.873

一种快速的'n'dirty 方法是将每个单独的选择框包装在它们自己的表单元素中，每个表单都有一个独特的 POST 操作。

一种更简洁的方法是创建一个隐藏表单，其中包含用户更改的 selectBox 的隐藏字段和他们更改为的值的隐藏字段。工作流程是：用户更改选择框 -> 更新隐藏字段 -> 提交隐藏表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:08:17.443

OnChange 使用 Ajax 仅使用 GET 将选择框的值发送到您的端点。

假设 Jquery（但任何库或本机 JS 都可以）

一些脏代码（时间限制）可以帮助您入门：

```
var selVal = $("#myselect").val();   
$.ajax({
    type: "GET",
    contentType: "application/json; charset=utf-8",
    url: "url-that-will-handle-the-data",
    data: '{ "param1": selVal }',
    success: function (msg) {
        alert(msg.d);
    }
}); 
```

# web - 是否可以在 Illustrator 中使用破折号保存网络和设备？

> ID：15775543
> 
> 赞同：-1
> 
> 时间：2013-04-02T22:26:04.410
> 
> 标签：web, format, save, filenames, adobe-illustrator

是否可以在 illustrator 中使用“为网络和设备保存”功能进行保存，

像这样“为网络和设备保存”，而不是“为网络和设备保存”，

如果可能有人可以向我解释吗？如果不是，请给我解释为什么 adobe 创建这样的名称格式，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:13:04.597

我认为它是“为网络和设备保存”还是“为网络和设备保存”并不重要。真正重要的是功能。你真的可以在里面选择各种选项。

# jquery - 使用 jQuery 在局部视图（重复）中访问 div 元素

> ID：15775546
> 
> 赞同：0
> 
> 时间：2013-04-02T22:26:19.200
> 
> 标签：jquery, asp.net-mvc-4, modal-dialog

我希望实现以下目标：

我有 2 个视图，1 个部分视图和 1 个索引。

在索引中，我有一个循环遍历模型列表并将每个项目传递给局部视图。

现在，对于该模型列表中的每个项目，我希望能够使用模态对话框。即，对于用户帖子列表，每个帖子上都有一个买入或卖出按钮。所有这些都使用相同的 div/modal。有什么方法可以从该模式对话框中检索一个文本框值，特别是对于我点击了“立即购买”按钮的对话框？

代码：

指数：

```
 @model IEnumerable<BRApplication.Models.MarketPost> 

 @{
     foreach (var m in Model) {
             if (m.IsBuy) {
                 <li>
                         @Html.Partial("BuyPost_Partial", m) 
                 </li>
             } 
     }
 } 
```

并且`BuyPost_Partial`有这个：

```
 <div id="mdlEmail" class="none">
     Please enter an email the owner of this book can contact you with. <br/>
      @Html.TextBox("txtRespondantEmail", "", new { id = "txtRespondantEmail" })
 </div> 
```

我希望能够获得`txtRespondantEmail`文本框的值。

关于如何使每个帖子的此文本框独一无二的任何想法？如果我将 ID 附加到它，我也不知道如何访问它。

o 用于模态的 JS（我已将其放在 Index.cshtml 文件中）

```
 function EmailDialog() {
            // alert("email");
             $("#mdlEmail").dialog({
                 height: 200,
                 width: 500,
                 modal: true,
                 buttons: {
                     "Confirm": function () {
                         MailNow();
                         $(this).dialog("close");
                     }
                 }
             });
         } 
```

在 MailNow() 函数中，我尝试使用这行 jQuery 访问文本框值：

```
 var RespondantEmail = $("#txtRespondantEmail").val(); 
```

立即购买处理程序：

```
 $(function () {
             $("#btnBuyNow").click(function () {
                 var email = $("#email").text();
                 alert(email);
                 if (email) {
                     EmailDialog();
                 } else {
                     FacebookLink();
                 }
             });
         }); 
```

文本框位于`EmailDialog()`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T22:38:33.587

由于您正在迭代`Model`，我假设您的部分将多次出现。因此，您不应分配`id='txtRespondantEmail'`给文本框，因为这`id`意味着您只有一个这样的元素。让它成为一个类：`class='txtRespondantEmail'`你也需要一个。您还需要文本框上的一些唯一标识符。你`MarketPost`有身份证吗？如果是这样，请将属性 id 放在其上：`id='txtRespondantEmail-'@Model.Id`。

然后你就可以得到你的价值：

```
var val = $('#txtRespondantEmail-1').val(); 
```

**更新**

问你为什么需要这个值会更合适？您可能想在该文本框中输入内容时调用服务器？如果是这种情况，请在文本框旁边创建一个按钮。给它上课，说：'btn-save'。然后对服务器进行 ajax 调用，您将在其中保存如下值：

```
$(document).on('click', '.btn-save', function(){
    var val = $(this).siblings('.txtRespondantEmail').val();
    $.ajax({
        url: '/controllername/actionname/',
        type: 'POST'
        data: new { text: val },
        success: function(data){
            alert('done');
        }
    });
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:34:40.353

我不知道您的模型是什么样的，但是您传递给局部视图的模型中是否有任何东西是唯一的，以便您可以将其附加到文本框的 id 上。

例如，您有类似 m.ID 的东西，您可以尝试

```
@Html.TextBox("txtRespondantEmail", "", new { id = "txtRespondantEmail" + m.ID }) 
```

我现在没有 VS，所以我无法测试这个，但你可以试一试。

$('[id^="txtRespondantEmail"]') - 这将返回所有以 'txtRespondantEmail' 开头的文本框

# sql - 数据库设计 - 来自多个来源的销售

> ID：15775553
> 
> 赞同：0
> 
> 时间：2013-04-02T22:27:03.697
> 
> 标签：sql, database

我们目前有一个 SQL 数据库，其中包含一个包含我们公司在线销售的表，该公司使用其他网站（例如亚马逊）销售产品。表模式已设置为保存我们的商品当前在其上销售的网站（例如站点 A）提供的特定销售数据/属性。

我们正在将销售扩展到提供与站点 A 在销售商品时使用的属性不同的其他网站（例如站点 A 可能提供唯一的销售 ID 号，站点 B 可能不提供唯一的销售 ID 号，但还提供一些其他信息站点 A 没有提供我们仍然需要捕获的内容）。

问题是我是否在我们销售的每个“网站”上添加一个单独的销售表，因为架构会有所不同，或者尝试将所有销售合并到一个表中，无论平台如何，如果没有，则将某些列保留为空与特定平台无关？或者可能是一种混合方法，仅将两个站点之间不常见的属性分隔到单独的表中，而“主”销售表包含共享的属性（sale_price、sale_date 等）？

还有其他一些保存内部信息（产品 ID、成本等）的表，它们通过唯一标识符链接到销售表。无论我选择哪种路线，我都需要提供一个可以在所有表​​中使用的唯一标识符（例如，自动递增的 sale_id），并将其存储在表中以供参考/连接。

欢迎任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:45:29.033

销售就是销售>>相同的数据属于同一个表。我绝对不建议将您的销售额分成几张表，因为这会给随后的所有事情带来很多困难：销售统计等等。尽量将所有销售额放在一张桌子上。

如果这是一个非常小的项目，将不同的字段集成到一个表中可能是最好的选择。否则，您可能会尝试为每个销售平台创建配置文件：在这种情况下，使用实体-属性-值模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T22:40:14.923

不要为每个站点添加一个表。听起来您在站点和属性之间存在多对多关系，因此请以这种方式设置数据库。此外，对于您需要的任何唯一标识符，请自行创建。

# erlang - 如何将字符串序列化的 Erlang 术语反序列化为 Java 中的 JInterface 对象？

> ID：15775554
> 
> 赞同：2
> 
> 时间：2013-04-02T22:27:10.907
> 
> 标签：erlang

我的接口系统提供了来自 Erlang 世界的结果，该结果发送一个 erlang 术语的字符串表示，例如元组列表：

```
[ {"key1" , ["AAA", "BBB"] } , {"key2" , ["CCC", "DDD"] } ] 
```

在 Java 中收到此字符串后，我想使用 OTP 库（com.ericsson.otp.OtpErlangList 等）对其进行解析（反序列化）。

在我的情况下，我不想直接连接到 Erlang OTP 或使用 Json 或 Xml（如果可能，尝试尽可能地处理它）。

当我将字符串转换为 OtpErlangList 时，我得到一个整数列表，所以总的来说，我相信它只是转换为字符代码，因为 erlang 中的字符串是代码列表。JInterface 中似乎没有反序列化器。如果是这种情况，那么我不得不使用 JSON。

必须有一种方法，因为 OtpErlangObject （和所有其他子类）都有一个 toString 方法。为什么他们不提供扭转这种情况的能力（ fromString(String str) ）？

**重申：**如何将 erlang 术语字符串表示形式直接从字符串转换为 Java 中的 JInterface 对象（**没有**节点连接，与 JSON 接口等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T06:23:11.607

JInterface 不提供这样的功能 AFAIK。它旨在通过 Erlang 内部网络协议与 Erlang 节点进行通信。在您的情况下，我可能会编写一个带有[antlr 之](http://www.antlr.org/ "蚂蚁")类的解析器。基于语法，您可以构建任何您喜欢的对象结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:35:55.033

你说尽可能原生，没有json等。但如果你从java调用erlang，我会使用[protocol-buffers](https://developers.google.com/protocol-buffers/)或[thrift 。](http://wiki.apache.org/thrift/)还有[bert](https://github.com/blog/531-introducing-bert-and-bert-rpc)，但我没有尝试过。我认为这些比处理字符串反序列化/序列化更安全，并为您省去功能上的麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T19:19:21.043

我不明白解析 Erlang 字符串比解析 JSON 更原生。但是，如果您真的想这样做，您也许可以使用`OtpInputStream`该类，并使用`String`您要解析的字节数组对其进行初始化。然后打电话`read_any`获取`OtpErlangObject`。文档在这里：[OtpInputStream](http://www.erlang.org/doc/apps/jinterface/java/com/ericsson/otp/erlang/OtpInputStream.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-06T14:48:08.883

此处合作的功劳是最终答案：

最终的答案很简单，据我所知，Java（或其他语言）没有 erlang 术语字符串表示反序列化器。但...

1) 目前没有支持从原生**字符串**术语表示反序列化 erlang 术语的 Java 接口（包括 JInterface）

2) Jinterface 支持 OtpInputStream，但它需要**Erlang 外部术语格式，如此**[处](http://erlang.org/doc/apps/erts/erl_ext_dist.html)所述

3) 上述外部项格式为二进制数据。必须使用[term_to_binary](http://erlang.org/doc/man/erlang.html#term_to_binary-1) BIF 将数据传输到 Java 接口。

4) 一旦数据流回到 java 端的 OtpErlangObject（使用 JInterface），它可以扩展到其内部数据，将 OtpErlangObject 转换为发送的任何内容（OtpErlangList、OtpErlangTuple 等）

二郎端：

```
ExternalFormatBinData = term_to_binary(MyTermToBeSent),
%transmit data using messaging or other media
... 
```

代码的 Java 端

```
OtpInputStream otpInputStream = new OtpInputStream(receivedBinaryDataArrayOfBytes)
OtpErlangObject erlangObject = otpInputStream.read_any();
OtpErlangList erlangList = (OtpErlangList) erlangObject // replace OtpErlangList to whatever is being sent
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T15:57:18.677

[https://github.com/metadave/etp](https://github.com/metadave/etp)将字符串转换为 Java 对象模型（无节点连接，与 JSON 接口等）。只需从内存表示中构建一个 JInterface 模型。

> 最终的答案很简单，据我所知，Java（或其他语言）没有 erlang 术语字符串表示反序列化器。

这就是 etp 项目（上图）。

# java - 通过命令行使用用户输入java进行基本登录不起作用

> ID：15775555
> 
> 赞同：0
> 
> 时间：2013-04-02T22:27:13.077
> 
> 标签：java, input

所以我有一个非常基本的登录程序，当您输入正确的凭据时，它只会打印一行。即使我输入正确的凭据，它所做的只是从我的 if else 语句中打印错误消息。任何帮助将不胜感激。

```
import java.util.Scanner;

public class Exercise4
{
private static String Username = "javacave";
private static String Password = "welcome1";

public static void main(String[] args)
{
    System.out.println("Please enter username");
    Scanner in = new Scanner(System.in);
    String UN = in.nextLine();

    System.out.println("Please enter password");
    Scanner inn = new Scanner(System.in);
    String PW = inn.nextLine();

    if (UN == Username && PW == Password)
    {
        System.out.println("User has logged in successfully!");
    }
    else {
        System.out.println("You have entered the wrong credentials, please try again.");
    }
}
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:28:28.683

```
(UN == Username && PW == Password) 
```

应该：

```
(UN.equals(Username) && PW.equals(Password)) 
```

* * *

每当您在两个字符串之间进行比较时，请使用`equals()`检查值的相等性，而不是使用`==`which 检查内存中的两个引用是否相同。

请阅读[Java 编程语言的代码约定](http://www.oracle.com/technetwork/java/codeconv-138413.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-22T16:08:01.003

```
Scanner scan = new Scanner(System.in);

String userName = scan.nextLine();
String pass = scan.nextLine();

if(userName.equals("123") && pass.equals("123"))
{
    System.out.println("Logged!");
}

else 

{
System.out.println("Error!");
} 
```

# actionscript-2 - as2中的邮政编码验证

> ID：15775563
> 
> 赞同：1
> 
> 时间：2013-04-02T22:27:42.017
> 
> 标签：actionscript-2, zipcode

我正在尝试验证输入文本框中的邮政编码条目。到目前为止，如果输入 5 位数字，我就能让它返回 true。但是在某些情况下，如果输入了无效的邮政编码，例如 00000，它仍然会像输入了有效的邮政编码一样。现在我有：

```
if(zipEntered == false)
    {

    }
    else
    {   
        if(input_mc.input_txt.length == 5)
        {
            trace("valid zip");
        }

        else {
            trace("not valid zip");
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:32:26.697

您可以使用类似[此列表](http://www.phaster.com/zip_code.html)的内容来确定有效的邮政编码范围，然后修改您的代码：

```
var numericZip = parseInt(input_mc.input_txt.text);
var zipValid = (
  (numericZip >= 35801 && numericZip <= 35816) /* Alabama */
  || (numericZip >= 99501 && numericZip <= 99524) /* Alaska */
  // etc 
```

# php - 查看变量是否等于列表php中的任何其他变量

> ID：15775565
> 
> 赞同：3
> 
> 时间：2013-04-02T22:27:56.793
> 
> 标签：php, arrays, search

在 php 中，我想知道如何检查变量是否等于列表中的任何变量。

我想我可以尝试类似的东西

```
if( $example == array($one, $two, $three, $four, $five) ) {
    //code here
} 
```

这不起作用，有没有类似的方法？否则，最好的方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T22:31:03.433

你的意思是像[`in_array()`](http://php.net/manual/en/function.in-array.php)函数这样的东西吗？

```
if( in_array($example, array($one, $two, $three, $four, $five)) ) {
    //code here
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T22:30:06.557

尝试

```
$array = array($one, $two, $three, $four, $five);
$example = 'somestring';
if(in_array($example, $array)){
    //code here
} 
```

或者如果你想严格检查，例如`===`不`==`

```
if(in_array($example, $array, true)){
    //code here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T22:30:42.053

```
$array = array($one, $two, $three, $four, $five);

foreach ($array as $value) {
    if ($example === $value) {
        something;
    }
} 
```

# jquery - 即使使用 ON 方法，jquery 点击事件也不会触发

> ID：15775569
> 
> 赞同：1
> 
> 时间：2013-04-02T22:28:21.973
> 
> 标签：jquery

我难住了。

我创建了一个链接，可以弹出一个效果很好的表单。

链接如下所示：

```
<a class="buttonA right popForm" m="guest">form</a> 
```

它以 ajax 的形式是一个 php 页面，除了所有其他 gobbledygook 之外，
它还提取了这两条更相关的行：

```
<a class="buttonA right closeForm">X</a>
<a class="test">test</a> 
```

这是jQuery：

```
$J(document).ready(function () {
    $J(".popForm").click(function () {
        var t = $J(this).attr("m");
        var id = ($J(this).attr("id") !== undefined ? $J(this).attr("id") : 0);

        $J.ajax({
            beforeSend: function () {
                //console.log(1);
            },
            url: "popForm.php",
            type: 'POST',
            data: ({
                "t": t,
                "id": id
            }),
            success: function (results) {
                $J("#popup").html(results);
                $J("#popup").show();
            }
        });
    });
    $J(".test").on("click", function (e) {
        console.log("e"+e);
        alert('aa');
    });
    $J(".closeForm").on("click", function () {
        alert(333);
    });
}); 
```

现在我期待我的“X”链接关闭表单（或者在这种情况下用 333 提醒我），
但链接已失效。
实际上，两个链接都已失效。

我几乎没有聪明的调试想法

*   我正在运行最新的 jQuery 库
*   我的代码中的任何地方都没有 preventDefault

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:29:46.020

使用`.on()`但`delegated-events approach`类似：

```
$J("#popup").on("click", ".test", function (e) {
    console.log("e"+e);
    alert('aa');
});
$J("#popup").on("click", ".closeForm", function () {
    alert(333);
}); 
```

**`#popup`在您单击*“调用弹出”*按钮时，DOM 中不存在IF -
而不是`#popup`使用其他一些父元素！**

[http://api.jquery.com/on/#direct-and-delegated-events](http://api.jquery.com/on/#direct-and-delegated-events)

> 委托事件的优点是它们可以处理来自以后添加到文档的后代元素的事件。通过选择在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要。例如，该元素可以是模型-视图-控制器设计中视图的容器元素，或者如果事件处理程序想要监视文档中的所有冒泡事件，则可以是文档。在加载任何其他 HTML 之前，文档元素在文档的头部是可用的，因此在此处附加事件是安全的，而无需等待文档准备好。

jQuery 的行为会像：

```
$J("#popup").on(    // Ohh I know this guy it's in the DOModel!
                    // let's see what event bubbling will he listen for...
     "click",       // hihi, I know this event! That event should descend from...
     ".closeForm",  // hm, there's no such fella yet, 
                    // but if one day if I find him...
     function () {  // I'll show him what's a function!!!
          alert(333);
     }
); 
```

# linq - 合并 2 个不同类型的 2 个列表（替代方案）

> ID：15775574
> 
> 赞同：1
> 
> 时间：2013-04-02T22:28:48.327
> 
> 标签：linq, list, join, merge

我有 2 个通用列表`List<type1> L1`，`List<type2> L2`在 C# V4 中

我的问题：type1 有一个名为“key1”的属性，type2 有一个名为“key2”的属性，我想将 L1 和 L2 合并到 key1 = key2 上的唯一列表中。

我需要用动态的方式合并这些，因为我不知道这两个类的属性，我只知道每个类型的第一个属性是主键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:22:30.727

```
var foo = (from type1 in list1
           join type2 in list2 on type1.Id equals type2.Id
           select new {type1, type2}).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:32:31.767

通过说“属性”，我假设您正在引用属性或字段。请不要使用“属性”，因为这令人困惑并且意味着完全不同的东西：

```
[Attribute]
class type1
{
  public int Field;

  public int Property { get; set; }
} 
```

因此，您有 type1 和 type2，并希望根据类中的第一个字段或属性将它们加入一个列表。如果您知道属性名称，最简单的实现是使用动态（假设 Prop1 和 Prop2 属性名称）：

```
var foo = 
(from type1 in list1
 join type2 in list2 on ((dynamic)type1).Prop1 equals ((dynamic)type2).Prop2
 select new {type1, type2}).ToList(); 
```

由于情况并非如此，我们想在类中选择“第一个”字段或属性，我们唯一的方法是使用反射。如果您知道您的类中只有属性（或只有字段） - 您可以使用简单的实现：

```
var t1 = typeof(type1);
var t2 = typeof(type2);

//replace with .GetFields() if neccessary
var p1 = t1.GetProperties()[0]; // find first declared property of type1
var p2 = t2.GetProperties()[0]; // find first declared property of type2

var foo = (from obj1 in list1
       join obj2 in list2 on p1.GetValue(obj1,null) equals p2.GetValue(obj2,null)
       select new {obj1, obj2}).ToList(); 
```

如果您的类中混合了字段和属性，您可以使用**FindMembers(MemberTypes.Field|MemberTypes.Property...)**列出所有成员，但是这种方法有一个问题 - 字段总是重新定位到类的开头，尽管字段似乎保留了顺序，在以下情况下，F1 将始终作为类的第一个成员返回（GetFields() 将返回 F1、F2 和 GetProperties - P1、this[]）：

```
class A
{
  public int P1 { get;set;}
  public int F1;
  public int this[int x] { get{return x;} set {} }
  public int F2;
} 
```

此外，这种方法还有其他问题：

*   如果您的第一个属性是索引器怎么办？（int this[..] 在上面的例子中）
*   如果您的第一个字段/属性返回的对象没有为 Equals 实现重载怎么办？
*   如果您的第一个属性没有实现 getter（很少见，但可能）怎么办？ETC

通常，这种设计（当您不知道字段/属性名称，并且依赖于它们在类中的相对位置时）被认为是不好的。引用[MSDN](http://msdn.microsoft.com/en-us/library/k2w5ey1e.aspx)： ... *GetMembers 方法不按特定顺序返回成员，例如字母顺序或声明顺序。您的代码不得依赖于返回成员的顺序，因为该顺序会有所不同。*

# linux - Mono AOT 编译程序的事后调试

> ID：15775576
> 
> 赞同：12
> 
> 时间：2013-04-02T22:28:52.773
> 
> 标签：linux, mono, gdb

我有一个用 C# 编写并使用 Mono 在 Linux 系统上运行的大型程序，它偶尔会崩溃并导致`mono.bin`进程转储核心。

我运行`gdb`了一些核心转储文件，但它不是很有用，因为回溯中没有 C# 函数的名称。根据[这个讨论，我发现](http://mono.1490590.n4.nabble.com/Post-mortem-debugging-td4238349.html)：

> 它行不通。构建托管堆栈跟踪所需的信息包含在运行时数据结构中，并且仅在程序运行时可用。您可以 AOT 您的应用程序，然后您将拥有更多可用的堆栈跟踪。

所以我做了。我 AOT 编译了我所有的 C# DLL 和 EXE 文件。使用`--aot=write-symbols`选项。对于我的程序的测试版本，它[故意崩溃，](https://stackoverflow.com/questions/3766122/what-is-a-canonical-way-to-produce-a-segmentation-fault-in-c)所以我可以检查这是否使回溯更有用。到目前为止，还没有。主线程的回溯如下所示：

```
#0  0xb7fc8402 in __kernel_vsyscall ()
#1  0x00556df0 in raise () from /lib/libc.so.6
#2  0x00558701 in abort () from /lib/libc.so.6
#3  0x080e59b5 in ?? () 
```

另一个线程有：

```
#0  0xb7fc8402 in __kernel_vsyscall ()
#1  0x005f6753 in poll () from /lib/libc.so.6
#2  0xb6f735a7 in Mono_Unix_UnixSignal_WaitAny ()
   from /opt/novell/mono/lib/libMonoPosixHelper.so
#3  0xb5416578 in ?? () 
```

其他线程似乎一直处于空闲状态（在`nanosleep`、`pthread_cond_timedwait`、`pthread_cond_wait`、`sem_timedwait`或中`sem_wait`）。但所有回溯的共同点是，它们都以令人讨厌的 . 结尾`in ?? ()`，并且从不列出“我的”代码中的任何函数名称。

我认为这与`gdb`它启动时打印的一些消息有关；例如，

```
Reading symbols from /xyz/mono/log4net.dll.so...(no debugging symbols found)...done.
Loaded symbols for /xyz/mono/log4net.dll.so
Reading symbols from /xyz/mono/Contoso.Util.dll.so...(no debugging symbols found)...done.
Loaded symbols for /xyz/mono/Contoso.Util.dll.so
Reading symbols from /xyz/mono/Contoso.Printing.dll.so...(no debugging symbols found)...done.
Loaded symbols for /xyz/mono/Contoso.Printing.dll.so
Reading symbols from /xyz/mono/Contoso.LegacyDataConverter.dll.so...(no debugging symbols found)...done.
Loaded symbols for /xyz/mono/Contoso.LegacyDataConverter.dll.so 
```

为什么所有`*.dll.so`文件都“找不到调试符号”？DLL 本身是否需要以“调试”模式或其他方式构建？

更一般地说，有没有办法从 Mono 核心转储中获取托管堆栈跟踪？（不使用`mono_pmip`，因为它仅在进程运行时可用。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-11T10:52:37.857

`suspend-on-sigserv`进程崩溃时是否可以设置然后附加？我假设这是一个现场环境，所以可能是不可能的。

如果你能做到这一点，你应该能够找到你所追求的信息。

从[文档](http://csurs.csr.uky.edu/cgi-bin/man/man2html?1+mono)：

**MONO_DEBUG**

如果设置，则启用一些对调试有用的运行时功能。此变量应包含一个逗号分隔的调试选项列表。目前，支持以下选项：

...

*sigsegv 暂停*

当收到本机 SIGSEGV 时，此选项将暂停程序。这对于调试在 gdb 下不会发生的崩溃很有用，因为实时进程包含比核心文件更多的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-06T13:22:16.263

我不知道单声道..但是从查看提供的堆栈跟踪..它显示无法获取单声道运行时的符号。这是使用 gdb 进行调试的[链接。](http://www.mono-project.com/Debugging#Debugging_with_GDB)您需要带有符号的单运行时，即`so`带有符号的库...所以您需要安装[mono-runtime-dbg](http://packages.debian.org/sid/mono-runtime-dbg) ...您可以使用 apt-get、yum、wget 等工具来安装它。

我安装了 unbuntu.. 显示以下输出....

```
$ apt-cache search mono-runtime-dbg
mono-runtime-dbg - Mono runtime, debugging symbols

Then
$ apt-get install mono-runtime-dbg 
```

希望对您有所帮助...

# c# - 共享投影？

> ID：15775583
> 
> 赞同：1
> 
> 时间：2013-04-02T22:29:44.677
> 
> 标签：c#, entity-framework-5, projection

我有一个数据库和一个映射到它的实体框架模型。该数据库有一个包含许多列的“产品”表。在许多 EF 查询中，我只需要几列，我做一个投影，比方说

```
var projected = Context.Products
    .Select(p => new ProjectedProduct { ProdID = p.ID, ProdTitle = p.Title })
    .ToArray(); 
```

由于此投影被多次使用，我将其移至单独的方法：

```
public static IQueryable<ProjectedProduct> ToProjectedProduct(this IQueryable<Product> query)
{
    return query.Select(p => 
        new ProjectedProduct { ProdID = p.ID, ProdTitle = p.Title });
} 
```

所以我可以使用如下投影：

```
var projected = Context.Products.ToProjectedProduct().ToArray(); 
```

现在我还想对单个产品实例使用相同的投影，例如：

```
var prod = Context.Products.First(p => p);
var projected = new ProjectedProduct { ProdID = prod.ID, ProdTitle = prod.Title }); 
```

而且我仍然想对投影使用相同的辅助方法，以便将它放在一个地方，但它不起作用，因为它仅适用于 IQueryable。我能做的是将投影转换为另一种方法，例如

```
public static ProjectedProduct ToProjectedProduct(this Product p)
{
    return new ProjectedProduct { ProdID = p.ID, ProdTitle = p.Title });
} 
```

但现在这种方法不适用于 IQueryable。我需要一个适用于这两种情况的辅助方法，我想做的是：

```
var projected = Context.Products.Select(p => p.ToProjectedProduct()).ToArray(); 
```

但这不起作用，因为辅助方法无法转换为数据库查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:05:42.413

为此使用[Automapper 。](http://automapper.org/)使用 Automapper，您可以：

```
Mapper.CreateMap<Product, ProjectedProduct>
    .ForMember(dto => dto.ProdID, m => m.MapFrom(p => p.ID))
    .ForMember(dto => dto.ProdTitle , m => m.MapFrom(p => p.Title)); 
```

（`ForMember`指定不同名称的属性之间的映射，Automapper 自动映射具有相同名称的属性）。

现在您定义了一个可重用的投影。

稍后您可以执行以下操作：

```
var projected = Context.Products.Project().To<ProjectedProduct>().ToArray(); 
```

Automapper 被广泛使用，您会发现许多如何使用它的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:15:02.433

IQueryable 的选择扩展方法需要一个`Expression<Func<TSource, TResult>>`. 这意味着我们可以在其他地方定义一个与此参数匹配的对象并将其传递给我们的 select 语句。

属性（也可以是方法）：

```
public Expression<Func<Product, ProjectedProduct>> MapProduct
{
    get
    {
        return p => new ProjectedProduct { ProdID = p.ID, ProdTitle = p.Title };
    }
} 
```

可查询的用法：

```
var projected = Context.Products
    .Select(MapProduct)
    .ToArray(); 
```

单实例用法：

```
var projected = Context.Products.Select(MapProduct).First(); 
```

IEnumerable 用法：

```
// calling compile turns the expression into a normal Func
var projected = ProductList.Select(MapProduct.Compile()); 
```

正常对象用法：

```
var projected = MapProduct.Compile()(ProdObj); 
```

MSDN IQueryable.Select - [http://msdn.microsoft.com/en-us/library/bb534638(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bb534638(v=vs.100).aspx)

# jquery - 如何使用 fadetoggle 切换“mouseover - addClass”字段？

> ID：15775585
> 
> 赞同：0
> 
> 时间：2013-04-02T22:29:48.187
> 
> 标签：jquery, navigation, mouseover, addclass

请帮我！

*   我有两个执行导航功能的字段（field1、field2）
*   这些字段通过“AddClass”切换其他两个字段
*   我需要实际执行此操作“fadeToggle”

* * *

```
$(function () {
   $('#field1').mouseover(function() {
      $('#d1').addClass('over1');
   }).mouseover(function(){
      $('#d2').removeClass('over2');
   });
   $('#field2').mouseover(function() {
      $('#d2').addClass('over2');
   }).mouseover(function(){
      $('#d1').removeClass('over1');
   });
}); 
```

没有必要通过“悬停”来确保字段不会消失

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:39:18.353

也许是这样的？

```
$(function () {
      $('#field1').mouseover(function () {
          $('#d2').fadeOut(function () {
              $('#d1').fadeIn();
          });
      });
      $('#field2').mouseover(function () {
          $('#d1').fadeOut(function () {
              $('#d2').fadeIn();
          });
      });
}); 
```

见 JSFiddle：http: [//jsfiddle.net/8P5vx/2/](http://jsfiddle.net/8P5vx/2/)

编辑：我对你到底想要什么有点困惑。也许更像这样？

```
$(function () {
    $('#field1').mouseover(function () {
        $('#d1').fadeIn();
    }).mouseout(function () {
        $('#d1').fadeOut();
    });
    $('#field2').mouseover(function () {
        $('#d2').fadeIn();
    }).mouseout(function () {
        $('#d2').fadeOut();
    });
}); 
```

JSFiddle：http: [//jsfiddle.net/8P5vx/3/](http://jsfiddle.net/8P5vx/3/)

编辑 2：好的，这可能是您想要的（同时淡入/淡出，当鼠标未悬停时它们仍然可见）：

```
$(function () {
    $('#field1').mouseover(function () {
        $('#d2').fadeOut();
        $('#d1').fadeIn();
    });
    $('#field2').mouseover(function () {
        $('#d1').fadeOut();
        $('#d2').fadeIn();
    });
}); 
```

JSFiddle：http: [//jsfiddle.net/8P5vx/4/](http://jsfiddle.net/8P5vx/4/)

# spring-webflow - 请求参数是否在 Spring Web 流的整个生命周期中保留值

> ID：15775586
> 
> 赞同：0
> 
> 时间：2013-04-02T22:29:54.087
> 
> 标签：spring-webflow

在这个链接： http: [//forum.springsource.org/showthread.php?](http://forum.springsource.org/showthread.php?16393-Difference-between-Spring-MVC-Web-Framework-and-Web-Flow) 16393-Difference-between-Spring-MVC-Web-Framework-and-Web-Flow 它说：一个webflow“比请求长，但更短而不是一个会话。” 这是否意味着请求范围的参数将保留它们的值，只要它们是同一 web 流的一部分而不必使用会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:48:50.033

Webflow 中有许多范围可用于存储对象。如果您希望对象只想存储请求，那么有`Request`Scope 之类的 struts。除了有`Session`, `Flow`, `Application`, `Flash`Scope 也可用。

多个范围为您提​​供了很大的灵活性。我想这就是那篇文章的作者想说的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T11:11:32.313

不，由于 Spring Web Flow 使用的 POST/REDIRECT/GET 模式，进入视图状态时请求范围的参数将丢失。如果您想在整个流程中保持价值，您有多种可能性：

*   **会话范围**：该值将在会话处于活动状态时存在。
*   **流范围**：在整个流执行期间可以访问该值。
*   **对话范围**：在整个流程执行期间以及从其子流程中可以访问该值。

另请注意，这三个范围都存储在会话中。

# uiscrollview - 删除 IB 中的自动约束

> ID：15775589
> 
> 赞同：0
> 
> 时间：2013-04-02T22:30:04.453
> 
> 标签：uiscrollview, nslayoutconstraint

我在界面生成器中为 UIScrollView 创建内容，uiview 在 uiscrollview 内，它具有以下属性：

*   顶部到superview
*   底部到superview
*   留给superview
*   宽度：1536

但是由于某种原因，我无法删除自动约束“右：-768”，我可以理解为什么它认为应该添加这个，但是，我已经将该视图的左侧设置为约束到左侧的超级视图并将其设置为绝对宽度. 当然我应该可以删除它？

它给了我一个烦人的错误，所以当我尝试滚动视图时，添加了 -768，使滚动视图的第二页不可见，而是使幽灵“第三页”可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:23:31.733

对不起，我在另一个网站上回答了这个问题，忘记了。

我通过将其设置为 IBOutlet 并以编程方式将其删除来删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T22:43:38.027

IB 不允许您指定模棱两可或不可满足的约束。您不能删除约束，因为缺少它您的约束将是模棱两可的。

# iphone - 在 iPhone 上播放 HTML5 音频而不停止 iTunes 音频

> ID：15775596
> 
> 赞同：6
> 
> 时间：2013-04-02T22:30:37.073
> 
> 标签：iphone, ios, html, html5-audio, trigger.io

我正在尝试在后台播放音频，但只要将`<audio>`元素插入页面，iPhone 上的背景音乐就会停止。我想知道是否有通过 HTML5 解决此问题的方法，或者我是否必须通过本机并构建另一个插件来播放我的音频并使背景音频变暗。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:41:51.563

据我所知，你做不到。即使使用 iOS 6 中的 Web Audio API，只要您开始在浏览器中播放音频缓冲区，iTunes 就会立即暂停。

# python - 互斥装置？

> ID：15775601
> 
> 赞同：1
> 
> 时间：2013-04-02T22:31:01.927
> 
> 标签：python, pytest

我有两个互斥的数据夹具，每个夹具都需要不同的测试：

```
@pytest.fixture(scope='session')
def testdata1(request, conn):
    savepoint = conn.begin_nested()
    request.addfinalizer(savepoint.rollback())
    # load dataset 1

@pytest.fixture(scope='session')
def testdata2(request, conn):
    savepoint = conn.begin_nested()
    request.addfinalizer(savepoint.rollback())
    # load dataset 2 
```

虽然这些都是独立工作的，但在运行需要 testdata2 的测试之前，不会拆除 testdata1 夹具。有什么方法可以确保测试不需要的固定装置在测试期间不活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:52:50.340

由于您将两者的范围指定为“会话”，因此两者都将保持活动状态，直到所有测试结束。您应该指定更严格的范围。我想我明白你想要什么，但我认为期望 pytest 做到这一点是不现实的。

就像是：

```
testdata1()
test_that_uses_testdata1()
testdata1_finalizer()
test_data2()
test_that_uses_testdata2()
test_something_else()
testdata2_finalizer()
testdata1()
test_something_else_that_uses_testdata1()
testdata1_finalizer() 
```

这似乎对测试系统有很多期望。:)

# knockout.js - 将 NicEdit 与 Knockout 一起使用

> ID：15775608
> 
> 赞同：3
> 
> 时间：2013-04-02T22:31:20.200
> 
> 标签：knockout.js, tinymce, nicedit

我希望创建一个自定义的 Knockout 绑定，以便与 WYSIWYG 编辑器 NicEdit [http://nicedit.com/index.php](http://nicedit.com/index.php)一起使用。我在这里找到了一个类似于 TinyMCE 库的类似绑定的小提琴示例，但在复制满足我的需求方面没有任何成功。

[http://jsfiddle.net/rniemeyer/GwkRQ/](http://jsfiddle.net/rniemeyer/GwkRQ/)

之前有没有人为此创建了一个有效的自定义绑定，或者有没有人找到任何其他解决方法？当 NicEditor 的实例正常应用时，它似乎会相应地更新附加的值，但不会触发淘汰赛 observable 更新。

例如，使用以下 javascript 和 html 不会产生有效结果。

JS在这里

```
var viewModel = {
    content: ko.observable("<p>I want this text to load and change in the editor</p>"),
};

ko.applyBindings(viewModel);
new nicEditor().panelInstance('testTextArea'); 
```

此处为 HTML

```
<form method="post" action="somepage">
    <textarea id="testTextArea" name="content" style="width:100%" data-bind="value: content"></textarea>
</form> 
```

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:21:23.093

我想出了以下似乎可行的自定义绑定。我使用了一点 JQuery，但不多，所以你总是可以用非 JQuery 的东西来替换它。

自定义绑定：

```
ko.bindingHandlers.nicedit = {
    init: function(element, valueAccessor) {
        var value = valueAccessor();
        var area = new nicEditor({fullPanel : true}).panelInstance(element.id, {hasPanel : true});
        $(element).text(ko.utils.unwrapObservable(value)); 

        // function for updating the right element whenever something changes
        var textAreaContentElement = $($(element).prev()[0].childNodes[0]);
        var areachangefc = function() {
            value(textAreaContentElement.html());
        };

        // Make sure we update on both a text change, and when some HTML has been added/removed
        // (like for example a text being set to "bold")
        $(element).prev().keyup(areachangefc);
        $(element).prev().bind('DOMNodeInserted DOMNodeRemoved', areachangefc);
    },
    update: function(element, valueAccessor) {
        var value = valueAccessor();
        var textAreaContentElement = $($(element).prev()[0].childNodes[0]);
        textAreaContentElement.html(value());
    }
}; 
```

以及如何使用它：

```
<textarea id="area1" data-bind="nicedit: title" style="width: 640px"></textarea> 
```

...在我的示例中，“标题”当然是您的绑定属性。

有两个“限制”：

*   textarea 必须有一个 DOM "id" 属性，否则它会崩溃。
*   使用 IE（至少，版本 8）不会触发`DOMNodeInserted`and `DOMNodeRemoved`，这意味着您必须在修改文本样式后键入一些内容才能在可观察对象中正确更新。

# html - 没有固定大小的容器中的垂直和水平居中文本在 Firefox 中表现得很奇怪

> ID：15775614
> 
> 赞同：2
> 
> 时间：2013-04-02T22:31:40.667
> 
> 标签：html, css, layout, twitter-bootstrap, vertical-alignment

在实现垂直居中时遇到一些麻烦。似乎在 Chrome 和 Safari 中正常工作，但在 Firefox 中它的行为很奇怪（我在 Mac 上调试）。

当浏览器调整大小时，悬停元素的大小不会调整到适合其父级的大小，而当浏览器调整到原始宽度时，悬停元素最终会变得太小。

观看[**此视频**](http://youtu.be/wHuM4WvhZ5U)
这是 [**演示**](http://jsbin.com/ejutor/1)。（[**链接**](http://jsbin.com/ejutor/1/edit)到代码视图）

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:02:35.833

最后，我能够通过这些更改解决这个问题。
希望它将来可能对某人派上用场（答案底部的完整解决方案链接）。

**原始标记**

```
<article class="work-preview">
    <img src="http://lorempixel.com/output/nightlife-q-c-600-414-6.jpg">
    <div class="covering background"></div>
    <div class="covering foreground">
            <h2>A Text</h2>
    </div>
</article> 
```

**新标记**

```
<article class="work-preview">
        <img src="http://lorempixel.com/output/nightlife-q-c-600-414-6.jpg">
        <div class="coveringcontainer">
            <div class="covering foreground">
                <h2>A Text</h2>
            </div>
        </div>
</article> 
```

**原始 CSS**

```
.covering {
    position: absolute;
    top: 0; left: 0;
    opacity: 0;
    filter:alpha(opacity=0);
}

body .work-preview:hover .covering {
    opacity: 1;
    filter:alpha(opacity=100);
    cursor: pointer;
} 
```

**新的 CSS**

```
.coveringcontainer {
  position: absolute;
  display: none;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  background: red;
}

.work-preview:hover .coveringcontainer {
  display: block;
  cursor: pointer;
}

.covering {
  position: absolute;
  display: table;
  width: 100%;
  height: 100%;
} 
```

这是完整的[**解决方案**](http://jsbin.com/ejutor/6/edit)！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:10:31.740

尝试使用`inline-block;`而不是`inline-table`on

```
body .work-preview 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T21:09:20.253

Firefox 不考虑`vertical-align:middle;`，因为它只在表格单元格上考虑。如果您想了解更多信息，我建议您阅读[理解垂直对齐](http://phrogz.net/CSS/vertical-align/index.html)。

# lua - Redis 脚本返回平均值

> ID：15775616
> 
> 赞同：5
> 
> 时间：2013-04-02T22:32:03.770
> 
> 标签：lua, redis

我正在 redis 中编写一个 LUA 脚本，以返回已存储的两个键（XXX_COUNT 和 XXX_TOTAL）的除法结果，如果任何键不存在，则返回 0。该脚本的代码如下：

```
 local count = redis.call("GET", KEYS[1]..'_COUNT')
    local total = redis.call("GET", KEYS[1]..'_TOTAL')
    if not count or not total then
        return 0
    else
        return tonumber(total)/tonumber(count)
    end 
```

问题是当脚本返回“tonumber(total)/tonumber(count)”时，它的值始终为 0，已经检查了键并且它们具有非零值作为字符串存储在 redis 中。这个脚本有什么问题？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T17:25:53.563

我找到了解决方案，我需要在返回之前将结果转换为字符串：

```
 local count = redis.call("GET", KEYS[1]..'_COUNT')
    local total = redis.call("GET", KEYS[1]..'_TOTAL')
    if not count or not total then
        return 0
    else
        local avg = tonumber(total)/tonumber(count)
        return tostring(avg)
    end 
```

希望它可以帮助某人！

# javascript - each() 函数变慢

> ID：15775621
> 
> 赞同：0
> 
> 时间：2013-04-02T22:32:35.793
> 
> 标签：javascript, function, each

抱歉，刚刚发现我的支架放错了地方！现在一切都很好。谢谢您的帮助。

当我单击某些按钮时，我会触发每个函数。该功能对于前 10 次点击来说很快。但是，每次我触发该功能（单击一个按钮）时，该功能都会变得越来越慢。每次点击似乎花费了两倍的时间。有谁知道为什么，我想更重要的是，我如何更改代码以防止这种情况发生？

谢谢！

```
function CollarStyleFunction(){

$('#Collar-Style-Box').children(".Fabrics").children(".SwatchBox").children('img').each(function () {

    var titleIs = this.title;
    if (titleIs==option) {
        $(this).parent().css("display", "inline");
    }

});

///////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////// 
```

其他一些信息和代码：

JS 加载一个 XML 文件并将 10 个织物样本加载到 div 中（class="Fabrics"）：

```
function parse(document){

    $(document).find("Swatch").each(function(){
        $(".Fabrics").append(
            '<div class="SwatchBox">'+
            '<img id="' + $(this).attr('name') + '" title="' + $(this).attr('title') + '" src="img/swatch/' + $(this).attr('name') + '.png">'+
            '</div>'
        );
    });

} //function parse End 
```

HTML：

```
<!-- Collar-Style -->

    <div id="Collar-Style" class="Name">Collar Style</div>

    <div id="Collar-Style-Box" class="Box">

        <div id="Collar-Style-Options-Box" class="Options">

            <div class="SwatchBox">
                <img id="Flat-Knit" src="img/options/Flat-Knit.png">
            </div><!-- SwatchBox -->

            <div class="SwatchBox">
                <img id="Self-Fabric" src="img/options/Self-Fabric.png">
            </div><!-- SwatchBox -->

            <div class="SwatchBox">
                <img id="Woven" src="img/options/Woven.png">
            </div><!-- SwatchBox -->

        </div><!-- Collar-Style-Options-Box -->

        <div id="Collar-Style-Fabrics-Box" class="Fabrics">
        </div><!-- Collar-Style-Fabrics-Box -->

    </div><!-- Collar-Style-Box --> 

<!-- Canvas -->

    <div id="Collar-Style-Canvas" class="Canvas"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:47:31.300

只是一些评论......</p>

```
> function CollarStyleFunction(event){ 
```

没有使用*event*参数，它是否有目的？

```
>     $('#Collar-Style-Box').children(".Fabrics").children(".SwatchBox").children('img').each(function (i) { 
```

其他人评论了使用选择器（可能会传递给本机 querySelectorAll 方法）而不是多个函数调用。

未使用*i*参数，它是否有作用？

```
>     titleIs = $(this).attr('title'); 
```

执行上述操作时，变量*titleIs*变为全局变量。它可能应该保留在本地。仅获取 title 属性也更有效：

```
var titleIs = this.title; 
```

.

```
>     if (titleIs==(option)) { 
```

*选项*是否在其他地方初始化？不需要圆括号*选项*：

```
 if (titleIs == option) { 
```

.

```
>         $(this).parent().css("display", "inline"); 
```

你真的想要*内联*吗？考虑将 display 设置为 ''（空字符串），以便元素可以返回其默认值或继承值，例如：

```
this.parentNode.style.display = '';

>     }
> }); 
```

# logic - 算术逻辑单元实际上是如何工作的？

> ID：15775624
> 
> 赞同：5
> 
> 时间：2013-04-02T22:32:52.357
> 
> 标签：logic, alu

换言之，能量与金属结合后，如何进行逻辑运算？在我所做的研究中，我总是假设“魔法”是如何发生的，但通常缺乏对物理设备如何“理解”和执行逻辑性质的过程的解释。我认为首先将非常简单的设备理解为计算器是一种很好的方法，但即使如此，我也无法理解（并且感到非常惊讶）如何以能够执行“思考”活动的方式设计电路。谢谢！

# log4php - Log4php 根据命名空间命名记录器并记录到特定文件

> ID：15775630
> 
> 赞同：0
> 
> 时间：2013-04-02T22:33:29.070
> 
> 标签：log4php

我正在使用 log4php 并且我基本上已经包装了它，所以当我的任何类调用 Logger 时，它们也会使用 getLogger 初始化它并根据调用类的命名空间命名记录器

例如

命名空间 my\class\space

记录器::GetInstance( **NAME_SPACE** )

将创建一个名为 my\class\space 的记录器（它实际上在我的包装器中也被添加到了 instance\my\class\space 之类的前缀）。

如何编写 log4php 配置以将所有日志文件转储到默认（根）记录器，然后根据我感兴趣的某些命名空间指定其他记录器。

例如，我想做类似的事情

```
<logger name="instance\my\class\space"> 
```

并将这些类和子类消息记录到与其他所有内容不同的文件中。

有任何想法吗？

谢谢

**更新**

```
<logger name="instance\my\class\space" additivity="false"> 
```

会将我的 instance\my\class\space 记录到另一个文件中，但它不包括子包，例如

instance\my\class\space\sub 仍在以 root 身份登录。我以为log4j自动处理子包，log4php不支持这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:37:48.407

行。所以看起来好像 log4php 确实支持子类，但您使用 log4j 点包分隔符而不是 php 命名空间分隔符。

IE

instance\my\class\space 是 php 命名空间

但 log4php 似乎需要将其转换为 java 包命名空间

instance.my.class.space

然后 log4php 将自动读取任何子命名记录器的子类，例如

instance.my.class.space.sub

无需在配置文件中添加更多行

# regex - 正则表达式 - 二进制字符串匹配但反转时不匹配

> ID：15775635
> 
> 赞同：0
> 
> 时间：2013-04-02T22:34:20.957
> 
> 标签：regex

首先，很明显这是功课，我相信我已经尽职尽责。现在我不希望在银盘上将解决方案交给我，只需朝正确的方向轻推就可以了，所以让我开始吧：

**问题是：**

> 字母表 {0, 1} 上的所有字符串，其中每个奇数长度的 0 块后面紧跟一个偶数长度的 1 块，每个偶数长度的 0 块后面紧跟一个奇数长度的 1 块。

我一直在做的是一块一块地工作，首先是：

**仅匹配偶数 0，奇数 1：** `^[^0]*((00)+1(11)*)*$`

**仅匹配奇数 0，偶数 1：** `^[^0]*(0(00)*(11)+)*$`

**把它们放在一起：** `^[^0]*((00)+1(11)*)*(0(00)*(11)+)*$`

我认为这最初是有效的，但它只适用于：

*   001011
*   001000010110001111等
*   基本上任何其他出现的顺序与它在有意义的表达式中出现的顺序相同。

并不是：

*   011001等

我一直坚持的是弄清楚如何让它适用于上面列出的案例。我试着做一个积极的前瞻，但它似乎没有奏效。

有没有人有任何指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:49:10.887

将它们结合起来`^[^0]*((00)+1(11)*)*(0(00)*(11)+)*$`只会让你成功一半，因为它只有在所有奇 0 偶 1 块都在所有偶 0 奇 1 块之前才有效。您想要的是一个匹配零个或多个 ( `[^0]*`) 的正则表达式，后跟任何奇偶和偶奇块的混合 - 有点像`(odd-even|even-odd)(odd-even|even-odd)...`，但对于奇偶或偶奇的任意数量（零或更多） . 你怎么能做到这一点？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:46:48.207

你肯定在正确的轨道上。

仅匹配偶数 0，奇数 1：`^(00)+1(11)*$`

仅匹配奇数 0，偶数 1：`^0(00)*(11)+$`

把它们放在一起：`^(((00)+1(11)*)|(0(00)*(11)+))+$`

只是为了好玩，这里有一个较短的输入`1`, `111`, `11111`... 除非你把零算作偶数。

```
^((00)*(01)?1(11)*)+$ 
```

# r - 在不知道行号的情况下删除特定行

> ID：15775637
> 
> 赞同：3
> 
> 时间：2013-04-02T22:34:36.620
> 
> 标签：r

我想从数据框中删除一行并对结果列求和。我知道我要根据其内容删除的行，但不知道它的行号。下面我介绍三个示例，其中两个有效。仅在要删除第一行时使用`-`删除行。这是为什么？

我的问题与此类似：[如何删除 R 中数据框的第一行？](https://stackoverflow.com/questions/7541610/how-to-delete-a-row-in-r) 但是，该行会根据其行号被删除。

```
# This works.

state = 'OH'

my.data = read.table(text = "
      county  y1990 y2000
        cc       NA    2
        OH       NA   10
        bb       NA    1
", sep = "", header = TRUE, na.strings = "NA", stringsAsFactors = FALSE)

my.colsums2 <- colSums(my.data[!(my.data$county == state), 2:ncol(my.data)], na.rm=TRUE)
my.colsums2

# y1990 y2000 
#    0     3

# This works.

my.data = read.table(text = "
      county  y1990 y2000
        OH       NA   10
        cc       NA    2
        bb       NA    1
", sep = "", header = TRUE, na.strings = "NA", stringsAsFactors = FALSE)

my.colsums2 <- colSums(my.data[-(my.data$county == state), 2:ncol(my.data)], na.rm=TRUE)
my.colsums2

# y1990 y2000 
#    0     3

# This does not work.

my.data = read.table(text = "
      county  y1990 y2000
        cc       NA    2
        OH       NA   10
        bb       NA    1
", sep = "", header = TRUE, na.strings = "NA", stringsAsFactors = FALSE)

my.colsums2 <- colSums(my.data[-(my.data$county == state), 2:ncol(my.data)], na.rm=TRUE)
my.colsums2

# y1990 y2000 
#    0    11 
```

我想我仍然对 和 之间的区别感到`!`困惑`-`。谢谢你的任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T22:39:58.363

`-`这应该消除和之间的区别`!`，我怀疑你可以从那里拿走它；）

```
my.data$county == state
# [1]  TRUE FALSE FALSE

!(my.data$county == state)
# [1] FALSE  TRUE  TRUE

-(my.data$county == state)
# [1] -1  0  0 
```

`!`，它否定布尔值，是您应该在此处使用的运算符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T22:46:04.610

我认为记住你在做什么很重要。当您将条件参数传递给行或列的子集时，它需要是全长 TRUE 或 FALSE 测试，或者，它需要是表示行（或列）的数字。

这是一个带有向量的简单示例。尝试将条件输入控制台以查看它们提供的内容

试试这些：

```
x <- rnorm(20)

## These use integer values for indexing
x[which(x > 1)]  # Numbers > Only those numbers which match

## These use logical values for indexing
x[x > 1]    # Logical > Only those that are true
x[!(x < 1)] # Logical > Only those that are false 
```

不良行为：

```
x[-which(x > 1)] # Positive numbers to negative numbers = BAD
x[!which(x > 1)] # Converts numbers to logical = BAD
x[-(x > 1)] # Converts logical to numeric = BAD 
```

具体到您的示例：

```
!(my.data$county == state) # Converts TRUE/FALSE to FALSE/TRUE
which(my.data$county != state) # Rows where my.data$count not equal state 
```

就个人而言，我建议`which()`在所有情况下都使用以避免对逻辑或数字转换的潜在否定。它也往往更容易“翻译”

# ruby-on-rails - 使用嵌套的 if 语句迭代嵌入 ruby 代码块

> ID：15775640
> 
> 赞同：2
> 
> 时间：2013-04-02T22:34:43.603
> 
> 标签：ruby-on-rails, ruby, twitter-bootstrap, if-statement, erb

我对 RoR 比较陌生，并且在`HTML`迭代`erb`.

我正在使用**twitter bootstrap 图像轮播**& 我正在尝试将我的 Apps 图像插入其中。问题是，`<li>`轮播中的第一个需要`class`与后续的不同`<li>`，即`class="active"`.

同样，图像的相应`<div>`标签也需要`class="item active`为第一个`<div>`而不是后续`<div>`的。

我可以使用代码块正常迭代我的图像，但是当我尝试放入一个`if`语句来满足第一次迭代中所需的特殊类时，我遇到了麻烦。我认为我的`if`子句没有正确的条件语句，即`<% if @hikingtrail.photos[0] %>`，`[0]`似乎是错误的。无论如何，当我尝试它时，它会弄乱图像轮播，但不会抛出任何错误，只是图像重叠而不是从一个滑动到下一个。

## 工作代码 - if 语句之前

```
<div id="show_right"> 
  <div id="myCarousel" class="carousel slide">
    <ol class="carousel-indicators">
      <% counter = 1 %>
      <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
      <% @hikingtrail.photos.each do || %>
      <li data-target="#myCarousel" data-slide-to="<%= counter %>"></li>
      <% counter += 1 %>
      <% end %>
    </ol>

    <div class="carousel-inner">
      <div class="item active">
        <img src="http://twitter.github.com/bootstrap/assets/img/bootstrap-mdo-sfmoma-01.jpg" alt="">
      </div>
      <% @hikingtrail.photos.each do |photo| %>
      <div class="item">
      <%= image_tag photo.image_url(:large).to_s %>
      </div> 
      <% end %>      

    </div>
    <a class="left carousel-control" href="#myCarousel" data-slide="prev">&lsaquo;</a>
    <a class="right carousel-control" href="#myCarousel" data-slide="next">&rsaquo;</a>
  </div>
</div> 
```

## 尝试的解决方案（使用 if 语句）

```
<div id="show_right"> 
  <div id="myCarousel" class="carousel slide">
    <ol class="carousel-indicators">
      <% counter = 1 %>
      <% @hikingtrail.photos.each do || %>
        <% if @hikingtrail.photos[0] %>
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <% else %>
        <li data-target="#myCarousel" data-slide-to="<%= counter %>"></li>
        <% end %>
        <% counter += 1 %>
      <% end %>
    </ol>

    <div class="carousel-inner">
      <% @hikingtrail.photos.each do |photo| %>
        <% if @hikingtrail.photos[0] %>
          <div class="item active">
        <% else %>
          <div class="item">
        <% end %>
        <%= image_tag photo.image_url(:large).to_s %>
      </div> 
      <% end %>      
    </div>
    <a class="left carousel-control" href="#myCarousel" data-slide="prev">&lsaquo;</a>
    <a class="right carousel-control" href="#myCarousel" data-slide="next">&rsaquo;</a>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:39:02.103

您可以尝试`<% if @hikingtrail.photos[0] == photo %>`查看您当前`photo`的照片是否与@hikingtrail 收藏中的第一张照片相同。但是，您在第一个块中缺少`photo`参数。`each`

更有效和更清洁的方法是做类似的事情

```
<div id="show_right"> 
  <div id="myCarousel" class="carousel slide">
    <ol class="carousel-indicators">
      <% @hikingtrail.photos.each_with_index do |photo, index| %>
        <li data-target="#myCarousel" data-slide-to="<%= index + 1 %>" class="<%= index == 0 ? 'active' : ''"></li>
      <% end %>
    </ol>

    <div class="carousel-inner">
      <% @hikingtrail.photos.each_with_index do |photo, index| %>
        <div class="<%= index == 0 ? 'item active' : 'item' %>">
          <%= image_tag photo.image_url(:large).to_s %>
        </div> 
      <% end %>      
    </div>
    ...
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T22:42:34.933

我相信解决您的问题的更简单的方法是使用`each_with_index`. 如果是`index == 0`，则将类放入`active`元素。

我有这个代码在当前自己的应用程序中工作。我认为它比你的更简单。

```
<div id="myCarousel" class="carousel slide">
  <ol class="carousel-indicators">
    <% (0..@carousel.length - 1).to_a.each do |index| %>
      <li data-target="#myCarousel" data-slide-to="<%= index %>" 
           class="<%= 'active' if index == 0 %>" ></li>
    <% end %>
  </ol>
  <div class="carousel-inner">
    <% @carousel.each_with_index do |photo, index| %>
      <div class="item <%= 'active' if index == 0 %>">
        <%= image_tag photo.image_url.to_s %>
      </div>
    <% end %>
  </div>
</div> 
```

# c# - 用于正则表达式的 C# 正则表达式

> ID：15775642
> 
> 赞同：-2
> 
> 时间：2013-04-02T22:35:00.920
> 
> 标签：c#, string, split

我想将字符串分成 3 部分。例如：

```
text = "(123-12)selis(qard)";  
into 
string1 = 123-12
string2 = selis
string3 = gard 
```

谢谢！。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:37:40.830

拆分字符串很容易做到这一点......

```
 var strings =text.Split(new [] { '(', ')'}, StringSplitOptions.RemoveEmptyEntries);
 var string1 = strings[0];
 var string2 = strings[1];
 var string3 = strings[2]; 
```

如果你真的想要正则表达式

```
var regex = new Regex("[(|)]",  RegexOptions.Compiled  );
var strings = regex.Split("(123-12)selis(qard)").Where(s => s != String.Empty).ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:41:37.790

这是一个完全编码的示例，因此对您有意义

```
var text = "(123-12)selis(qard)";
var splitString = text.Split(new char[] {'(', ')'},
    StringSplitOptions.RemoveEmptyEntries); 
```

# haskell - Hask 局部小吗？

> ID：15775646
> 
> 赞同：11
> 
> 时间：2013-04-02T22:35:28.000
> 
> 标签：haskell

haskell 对象的类别 Hask 是本地小类别的示例吗？

[http://ncatlab.org/nlab/show/locally+small+category](http://ncatlab.org/nlab/show/locally+small+category)

也许不是.. hask as cpo [http://www.cs.gunma-u.ac.jp/~hamana/Papers/cpo.pdf](http://www.cs.gunma-u.ac.jp/~hamana/Papers/cpo.pdf)

haskellwiki，[http://www.haskell.org/haskellwiki/Hask](http://www.haskell.org/haskellwiki/Hask)有很好的信息，表明 Haskell 不是笛卡尔封闭的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T03:56:12.310

什么是哈斯克？如果它包括所有haskell可定义的“函数”作为态射，那么肯定不是

```
data Big = Big (Big -> Big) 
```

的“hom 集”`Big -> Big`包含整个无类型的 lambda 演算！即使您只允许终止函数，我也怀疑它在局部很小——我认为 system-f 没有固定的理论模型。

编辑：七年后，我无法对我在这里想说的话做出正面或反面。在将函数类型解释为完整函数集的模型意义上，Hask 没有集合理论模型。这是真的，但我不知道这与这个问题有什么关系。目前还不清楚“Hask”是什么，但在我看来，任何合理的答案都会有小的 homsets（也就是说，它*在*本地很小）。

多年前我的回答很奇怪，这让我有点尴尬。我确定我的意思是非常有见地的——我只是不知道那是什么，而且措辞似乎*相当错误*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:45:43.240

特别是@PhillipJF，这是一个尝试。我不是想制作最准确或最优雅的 Hask 模型，我只是想制作*一个*模型。批评，请。

如果 A 是 Haskell 类型，则在 Hask 中将*A 类型的值*定义为 A 类型的良类型 Haskell 项的等价类（`x :: A`类型检查器将接受的字符串 x），模外延相等。也就是说，如果两个项扩展为相同的（可能是无限的）范式，则认为它们相等，并且没有 hnf 的两个项也相等。这是不可判定的事实是无关紧要的，我们只需要在理论上陈述这些条件，我毫不怀疑我们可以做到。

让**Hask**的对象是 Haskell 类型（原始类型和用户定义类型；我们将假设所有用户可定义类型都存在并且具有不同的名称。用户定义类型定义是源代码，因此它们是可数的。只需命名它们`D0`，`D1`, ...根据那个计数。）。

让态射*A -> B是**A -> B*类型的值

 *令*A*上的恒等式为 的等价类`id :: A -> A`，同样令 的合成 为`g`的`f`等价类`g . f`。

所有值的集合是可数集合，因为术语只是有限字母表上的字符串。所以这个**Hask**模型很小。

这是错的吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T03:54:45.367

Hask 对象是可数无限的 Haskell 类型。Hask 箭头是 Haskell 函数，也是可数无限的。因此 Hask 不仅局部很小，而且 Hask 也很小。

卡片(ob(Hask))=卡片(hom(Hask))=卡片(N)

有关 Hask 的更多详细信息：

[http://yannesposito.com/Scratch/en/blog/Category-Theory-Presentation/](http://yannesposito.com/Scratch/en/blog/Category-Theory-Presentation/)*

# ember.js - 无法在 ember-data 中编辑 hasMany 关联子记录

> ID：15775648
> 
> 赞同：1
> 
> 时间：2013-04-02T22:35:52.343
> 
> 标签：ember.js, ember-data

我有一个帖子，里面有很多评论。问题是我能够获取所有评论，但我 **无法获取单个评论**，因此无法编辑单个评论。由于我无法获取单个评论，这意味着我无法将单个记录添加到事务或编辑单个记录。

评论是侧载的，不会受到路由的支持，我不想要**任何与评论相关的控制器**的路由。因此，我使用**controllerFor**在 ApplicationRoute 中为 CommentController 设置模型，然后使用 [needs] api 将模型包含在可能需要模型内容的其他评论相关控制器中。

您可以通过点击**post** -> 然后点击**post title** -> 点击*add comment* * 然后保存并重新点击 editcomment**来访问评论**。

这是**[jsfiddle](http://jsfiddle.net/GSKAU/)**，但**与此问题相关的代码的相关位**如下：

```
 EmBlog.ApplicationRoute = Ember.Route.extend({
   setupController: function() {

    this.controllerFor('comment').set('model', EmBlog.Comment.find());      
   }
 }); 
```

**评论控制器**

```
 //Even when I use ArrayController, the error is still there
   EmBlog.CommentController = Ember.ObjectController.extend({
      content: null
   }); 
```

**处理编辑的控制器，所有的错误都发生在editComment方法中**

```
 EmBlog.CommentEditController = Ember.ObjectController.extend({

   needs: ['comment'],
   isEditing: false,

   editComment: function(post) {

     var comment =  this.get('controllers.comment.content');  

     var yk = comment.get('post');

     //this line is undefined 
     console.log(yk);

    var commentEdit = this.set('content', comment);
     console.log(commentEdit);

    transaction = this.get('store').transaction();

    //Uncaught Error: assertion failed: You must pass a record into transaction.add() 
    transaction.add(commentEdit);

    this.transaction = transaction;

    this.set('isEditing', true);

   }

  }); 
```

**用于发布/展示的把手**

```
 <script type="text/x-handlebars" data-template-name="posts/show">
    {{render 'comment/edit' comment}}
  </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:52:02.647

现在一切**[正常，这里是 jsfiddle](http://jsfiddle.net/GSKAU/1/)**，我可以编辑夹具中的评论。

**但唯一存在的问题是我只能编辑夹具中的第一条评论。我无法编辑第二条评论或无法编辑我添加的任何新评论的新评论**。

我基本上是通过需求 api 获取 postShow 中的帖子，然后我得到了帖子的 id 并将其作为 find 参数传递给 ** EmBlog.Comment.find**。然后我将**EmBlog.CommentEditController**的内容设置为我们刚刚找到的结果。在此之后，我使用 **transaction.add(this.get('content'))将****EmBlog.CommentEditController**的新内容添加到事务中

 **```
EmBlog.CommentEditController = Ember.ObjectController.extend({

   needs: ['comment', 'postsShow'],
   isEditing: false,

   editComment: function() {  
     var post = this.get('controllers.postsShow.content');
     console.log(post);

     var postId = post.get('id');
     console.log(postId);

     comment = EmBlog.Comment.find(postId);
     console.log(comment);

     transaction = this.get('store').transaction();

     var updatedContent = this.set('content', comment);
     console.log(updatedContent);
     console.log(this.get('content')); 

    transaction.add(this.get('content'));
    console.log(transaction);

    this.transaction = transaction;   

    this.set('isEditing', true);

   },

  save: function(){

   var comment = this.get('content');
   comment.one('didUpdate', this, function() {
      this.set('isEditing', false);
   });

  this.transaction.commit();
  this.transaction = null;
   console.log(this.get('content')); 
  }  

}); 
```**

# c# - 从类访问 C# Singleton 而不将其传递给类

> ID：15775652
> 
> 赞同：1
> 
> 时间：2013-04-02T22:36:10.440
> 
> 标签：c#, .net, design-patterns, visual-studio-2012, singleton

这就是我要说的。

```
public sealed class ObjectZ {
    static readonly ObjectZ _instance = new ObjectZ();
    private ObjectZ() {}
    public static ObjectZ Instance{
        get { return _instance; }
    }
} 
```

我想访问这个指针...

```
ObjectZ obj = ObjectZ.Instance; 
```

从另一个类而不将其传递给构造函数或方法并设置它。如果我从另一个班级做这条线，我会得到相同的对象吗？

我习惯了 Objective-C，你可以在一行中从 UIApplicationDelegate 中检索一个单例样式的对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T22:38:30.763

`ObjectZ.Instance`无论您从代码中的哪个位置访问该值，该值都将返回相同的对象。它由静态字段支持，静态字段本质上是全局的。

尽管有几种情况，静态字段将具有不同的值。

*   如果静态字段在不同的`AppDomain`实例中。通常，尽管应用程序只有一个`AppDomain`
*   如果静态字段包含在泛型类型中，则不同的实例化将具有不同的静态字段值

# scala - 使用“回滚”代码平面映射未来

> ID：15775653
> 
> 赞同：1
> 
> 时间：2013-04-02T22:36:16.487
> 
> 标签：scala, asynchronous, future

我很难找到一个优雅的解决方案来链接一些期货。我尝试实现的方法如下所示（它是缓存的一部分）：

```
def acquire(key: A, producer: => Future[B]): Future[B] 
```

算法大致是这样的：

*   如果密钥被锁定，立即通过运行时异常（是否会提前使用 Future.failed？）
*   否则打开一个`future { getOrRefresh }`块，因为它需要一些时间来检索密钥
*   `getOrRefresh`要么返回一个顺子`B`，然后是未来和方法的结果
*   或者它需要运行`producer`

最后一步意味着我需要从 future*内部对未来*进行“扁平化” 。也就是说，我不能做 a `outer.flatMap`，所以我猜策略是使用`Await`.

现在，`Await`有一个奇怪的精神分裂症，你可以得到一个`Option[Try[B]]`, using 方法`ready`，或者 unwound `B`, using `result`。问题是，我需要`Failure`在完成外部未来之前释放一个锁，所以我必须坚持`Await.ready`，我猜。

这变得丑陋：

```
val fut   = producer
val prod  = Await.ready(fut, Duration.Inf).value.get
if (prod.isFailure) sync.synchronized { locked = false }
prod.get 
```

能有这么丑吗？必须有更好的方法来做到这一点。

* * *

所以重复一遍：在`Future[B]`运行中，一些同样以 完成的对等未来`B`，并返回对等的结果，但在失败的情况下，在完成主要未来之前清理锁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-23T20:55:17.930

我对您的实施进行了一些更改。

首先，我已将您的首字母`throw`锁定为`Future.failed`，因为期货的消费者应该可以安全地假设唯一需要注意的失败是失败的未来。

接下来，我没有调用from ，而是`get`将它作为未来的结果返回。然后我得到结果，以便我可以替换在(map 将导致 Future[Future[B]])的情况下产生的未来。在 的情况下，我从值返回 a ，因为需要返回未来。`Option[B]``readEntry``flatMap``producer``None``Some``Future.successful``flatMap`

最后，我用 an替换了`recover`and因为我们希望失败的传播并且只想将副作用链接到未来以解锁条目。`throw``andThen``Future`

```
trait Cache[A, B] {
  class Entry(var locked: Boolean = true)

  private var map  = Map.empty[A, Entry]
  private val sync = new AnyRef

  def readEntry(key: A): Option[B] = ???

  def acquire(key: A, producer: => Future[B]): Future[B] = sync.synchronized {
    map.get(key) match {
      case Some(e) =>
        if (e.locked)
          Future.failed(new IllegalStateException())
        else {
        e.locked = true
        future { readEntry(key)}.flatMap {
          case None => producer.andThen {
            case Failure(_) => sync.synchronized(e.locked = false)
          }
          case Some(value) => Future.successful(value)
        }
      }

      case _ => producer.map { value =>
        sync.synchronized {
          map += key -> new Entry()
        }
        value
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:09:49.080

这里尝试使用`recover(With)`并因此避免`Await`. 不过，它看起来很笨重，因为我需要重新抛出异常

```
import concurrent._

trait Cache[A, B] {
  class Entry(var locked: Boolean = true)

  private var map  = Map.empty[A, Entry]
  private val sync = new AnyRef

  implicit def exec: ExecutionContext

  def readEntry(key: A): Option[B]

  def acquire(key: A, producer: => Future[B]): Future[B] = sync.synchronized {
    map.get(key) match {
      case Some(e) =>
        if (e.locked) throw new IllegalStateException()
        e.locked     = true
        val existing = future { readEntry(key).get }
        val refresh  = existing.recoverWith {
          case _: NoSuchElementException => producer
        }
        refresh.recover {
          case t => sync.synchronized(e.locked = false); throw t
        }

      case _ => producer.map { value =>
        sync.synchronized {
          map += key -> new Entry()
        }
        value
      }
    }
  }
} 
```

如果您有建议，请将它们作为单独的答案发布。

# php - 新行但保留前行缩进

> ID：15775654
> 
> 赞同：0
> 
> 时间：2013-04-02T22:36:21.420
> 
> 标签：php, html

我有一个构建我的大部分应用程序头的函数：

```
 function header() {
         $html = "<title>Test</title>\r\n";
         $html .= "<link rel='stylesheet' href='main.css'>\r\n";
         return $html;
 } 
```

现在这很好用，但要么所有内容都在 1 行中（如果我删除 \r\n），要么它们落在下一个新行上（如预期的那样），但它会失去缩进。

有没有办法让我保持前几行的缩进？这纯粹是为了演示（功能不需要）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:38:19.913

采用 ：

```
function header() {
     $html  = "<title>Test</title>\r\n";
     $html .= "<link rel='stylesheet' href='main.css'>\r\n";
     $html .= "  <foo>\r\n";
     $html .= "    <bar/>\r\n";
     $html .= "  </foo>\r\n";
     // ...
     return $html;
} 
```

保持缩进（在本例中为 2 个空格，因为我最喜欢 html ;）。这意味着您必须显式地添加到 php 输出的缩进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:40:01.850

从最不喜欢到最喜欢的顺序。您可以使用：

*   空格/制表符 ( `\t`)
*   heredoc/nowdoc 语法
*   美化剂
*   模板引擎

# maven - Maven 选择错误的 slf4j 版本

> ID：15775655
> 
> 赞同：-1
> 
> 时间：2013-04-02T22:36:23.377
> 
> 标签：maven, slf4j

我有一个 Maven 项目，它具有以下直接依赖关系：

```
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-api</artifactId>
    <version>1.7.5</version>
    <scope>compile</scope>
    <optional>false</optional>
</dependency> 
```

但尽管如此，`mvn dependency:tree`节目`slf4j-api`版本选择为`1.6.2`，并且直接依赖于我的项目！

我的项目中还有其他依赖项可能依赖于其他版本的`slf4j`. 但我的理解是选择最接近树根的版本。

`slf4j`对相关内容的其他依赖是`org.slf4j:jul-to-slf4j:jar:1.7.5:compile`，`org.slf4j:log4j-over-slf4j:jar:1.7.5:compile`（直接依赖）和`org.slf4j:jcl-over-slf4j:jar:1.7.3:runtime`（传递依赖）

我正在这个 maven 项目中构建一个，包含`war`的 jar在存档中。我不知道该怎么做才能确保我得到 jar 版本而不是.`slf4j``1.6.2``1.7.5``1.6.2`

更新：我正在使用 maven `3.0.4`。

更新 2：根据要求，添加了 pom 和调试日志。由于文件很大，我已将其添加到保管箱公共文件夹：[https ://www.dropbox.com/sh/w1rtgvxvnt4jf18/lbiMIgwWD_](https://www.dropbox.com/sh/w1rtgvxvnt4jf18/lbiMIgwWD_)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:32:48.813

事实上，邻近规则适用，因此最接近当前项目的声明获胜。您可能想删除该`<optional>false</optional>`元素并查看它是否有所作为。

# c++ - 流体c ++中的雅可比迭代对象

> ID：15775661
> 
> 赞同：0
> 
> 时间：2013-04-02T22:37:05.367
> 
> 标签：c++, fluid-dynamics

我正在编写一个程序来计算某个物体周围某个电流的速度，例如一个正方形。现在，我使用 Jacobi 迭代方法，当我运行它时，结果不是我所期望的。我不知道我做错了什么。我有 2 个类，一个创建一个我无法调整的网格，另一个创建一个带有参数“voneindig”的对象。

如果我制作一个正方形和一个网格并运行 Iterate() 函数，我的正方形对象似乎变大了。（我在原来的正方形周围得到越来越多的零）

成员函数 getStatusElement() 是我用正方形所在的位置和其他位置的零创建的网格。

```
 void Object::Iterate()
{
double gem=1, jacobielement, som; //locale variabelen
double epsilon=pow(10,-5); //convergentiecriterium
const int d= grid1.GetDimension(); //dimension of the grid
while(gem > epsilon)
{
  for( int i = 0; i < d; i++ )
  {
    for( int j = 0; j < d; j++ )
    {
    grid2.SetElement(i,j,grid1.GetElement(i,j));
    }
  }

  for(int i=1; i<d-1; ++ i)
  {
    for(int j=1; j<d-1; ++ j)
    {
        if( grid1.getStatusElement(i,j) == 0 )
        {//jacobie
        jacobielement= (grid1.GetElement(i,j+1) + grid1.GetElement(i,j-1) + grid1.GetElement(i+1,j) + grid1.GetElement(i-1,j))/4;

        grid1.SetElement(i,j,jacobielement);
        }
    }
  }
  som=0;
  for(int i=0; i<d; ++ i){
    for(int j=0;j<d; ++ j){
    //Convergention
    som=som+std::abs(grid1.GetElement(i,j)-grid2.GetElement(i,j));
    }
  }
  gem= som/pow(d,2);
}
} 
```

我希望我已经为这个问题提供了足够的信息，否则我可以给你我所有的代码。非常感谢！

# php - 存储多维数组中的特定值

> ID：15775663
> 
> 赞同：1
> 
> 时间：2013-04-02T22:37:07.677
> 
> 标签：php, mysql, multidimensional-array, foreach

这是我的数组：

```
Array
(
    [0] => Array
        (
            [0] => Received: from mout.perfora.net ([74.208.4.194]:64110)
            [1] => Received: from localhost (cpe-142-255-38-220.nyc.res.rr.com [142.255.38.220])
            [2] => From: xxxxx <phoneleash@gearandroid.com>
            [3] => To: 1v5z9hrt5z@thegrouptextshow.com
            [4] => Message-ID: <1113754192.698.1364695577947.JavaMail.javamailuser@localhost>
            [5] => References: <M38aa3cba44b8.+@gearandroid.com>
            [6] => Subject: Re: SMS: +
            [7] => MIME-Version: 1.0
            [8] => Content-Type: multipart/mixed; 
            [9] => X-PhoneLeash: <M38aa3cba44b8.+@gearandroid.com>
            [10] => Date: Sat, 30 Mar 2013 22:06:17 -0400
            [11] => X-Provags-ID: V02:K0:leU7uup/etOXU8iaKYpIvO81rtv82ALEDU7D1ZsEeqw
            [12] => Content-Type: multipart/alternative; 
            [13] => Content-Type: text/plain; charset=UTF-8
            [14] => Content-Transfer-Encoding: 7bit
            [15] => [Sent: 10:06 PM 03/30/2013]
            [16] => Content-Type: text/html; charset=UTF-8
            [17] => Content-Transfer-Encoding: 7bit
            [18] => <HTML><HEAD></HEAD><BODY style="background-color:#ffffff">C TN<br>---<br>Add // to the end of your reply<br>[Sent: 10:06 PM 03/30/2013]<hr><table style="margin: auto;"><tr><td><a href=https://www.facebook.com/share.php?u=http://www.facebook.com/phoneleash><img src="http://gearandroid.com/pics/fbshare.png"></a></td><font face="helvetica"><td><a href=https://www.facebook.com/share.php?u=http://www.facebook.com/phoneleash>Enjoy PhoneLeash? Let your FB friends know!</a></td></font></tr></table><br></BODY></HTML>
        )

    [1] => Array
        (
            [0] => Received
            [1] => Received
            [2] => From
            [3] => To
            [4] => Message-ID
            [5] => References
            [6] => Subject: Re: SMS
            [7] => MIME-Version
            [8] => Content-Type
            [9] => X-PhoneLeash
            [10] => Date
            [11] => X-Provags-ID
            [12] => Content-Type
            [13] => Content-Type
            [14] => Content-Transfer-Encoding
            [15] => [Sent
            [16] => Content-Type
            [17] => Content-Transfer-Encoding
            [18] => <HTML><HEAD></HEAD><BODY style="background-color:#ffffff">C TN<br>---<br>Add // to the end of your reply<br>[Sent: 10:06 PM 03/30/2013]<hr><table style="margin
        )

    [2] => Array
        (
            [0] => from mout.perfora.net ([74.208.4.194]:64110)
            [1] => from localhost (cpe-142-255-38-220.nyc.res.rr.com [142.255.38.220])
            [2] => xxx <phoneleash@gearandroid.com>
            [3] => 1v5z9hrt5z@thegrouptextshow.com
            [4] => <1113754192.698.1364695577947.JavaMail.javamailuser@localhost>
            [5] => <M38aa3cba44b8.+@gearandroid.com>
            [6] => xxxxxxx
            [7] => 1.0
            [8] => multipart/mixed; 
            [9] => <M38aa3cba44b8.xxxxx@gearandroid.com>
            [10] => Sat, 30 Mar 2013 22:06:17 -0400
            [11] => V02:K0:leU7uup/etOXU8iaKYpIvO81rtv82ALEDU7D1ZsEeqw
            [12] => multipart/alternative; 
            [13] => text/plain; charset=UTF-8
            [14] => 7bit
            [15] => 10:06 PM 03/30/2013]
            [16] => text/html; charset=UTF-8
            [17] => 7bit
            [18] => auto;"><tr><td><a href=https://www.facebook.com/share.php?u=http://www.facebook.com/phoneleash><img src="http://gearandroid.com/pics/fbshare.png"></a></td><font face="helvetica"><td><a href=https://www.facebook.com/share.php?u=http://www.facebook.com/phoneleash>Enjoy PhoneLeash? Let your FB friends know!</a></td></font></tr></table><br></BODY></HTML>
        )

) 
```

我需要能够将`[1][18]`, `[2][2]`, `[2][10]`,的值存储`[2][21]`到特定的变量中，以便以后可以剪切除实际文本之外的所有内容，然后将其作为值存储在 MYSQL 中。[这](https://stackoverflow.com/questions/9029897/how-to-get-values-from-multidimensional-array-in-php)对我有帮助，但我只需要我指定的 4 个元素的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:27:05.250

这成功了：

```
require '../connect.php';
$email = file_get_contents('php://stdin');
preg_match_all("/(.*):\s(.*)\n/i", $email, $matches);

$message    = $matches[1][18];
$message    = str_replace('<HTML><HEAD></HEAD><BODY style="background-color:#ffffff">', '',$message);
$message    = explode('<',$message);
$message    = $message[0];
$sender     = $matches[2][2];
$sender     = explode('<',$sender); 
$sender_id  = $sender[0];

mysql_query("INSERT INTO `post` (`text`,`sender`,`text_stamp`,`post_date`,`post_time`) VALUES ('" . mysql_real_escape_string($message) . "','" . mysql_real_escape_string($sender_id) . "','" . mysql_real_escape_string($textdate) . "','$postdate','$posttime')") or die(mysql_error() . "<--There was error processing the query"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T22:42:20.900

您是否尝试过这样存储它们，`$your_array`上面保存数组的变量的名称在哪里？

```
$var1 = $your_array[1][18];
$var2 = $your_array[2][2];
$var3 = $your_array[2][10];
$var4 = $your_array[2][21]; 
```

请记住，尽管在上面您向我们展示的数组中没有 [2][21] 值。

# android - 将图像从数据库保存到 SD 卡

> ID：15775666
> 
> 赞同：1
> 
> 时间：2013-04-02T22:37:30.620
> 
> 标签：android, sqlite, android-sdcard

我想找到一种方法将 sqlite 数据库中的图像保存在 sdcard 中，如果我使用简单的查询，我可以找到图像数据，但是如何保存它们，例如，`sdcard/temp` 我搜索了很多，但找不到任何符合我想要的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:48:32.230

我假设您将从数据库中提取 blob 并从那里获取位图或其他任何内容。您可能需要查看[http://developer.android.com/reference/java/io/File.html](http://developer.android.com/reference/java/io/File.html)。您可以使用 File 中的方法为给定路径创建文件。

如何将位图编码为 blob 将影响重新序列化这些位图的方式。

来自这篇文章： [Android：从数据库中检索位图的问题](https://stackoverflow.com/questions/2266030/android-problem-retrieving-bitmap-from-database)

* * *

编码到数据库：

```
ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
mBitmap.compress(Bitmap.CompressFormat.JPEG, THUMB_QUALITY, outputStream);
mByteArray = outputStream.toByteArray();  // write this to database as blob 
```

* * *

从数据库重新序列化：

```
ByteArrayInputStream inputStream = new ByteArrayInputStream(cursor.getBlob(columnIndex));
Bitmap mBitmap = BitmapFactory.decodeStream(inputStream); 
```

* * *

保存到文件：

```
String path = Environment.getExternalStorageDirectory().toString();
File filename = new File(path, "myImg.png");
FileOutputStream out = new FileOutputStream(filename);
bitmapp.compress(Bitmap.CompressFormat.PNG, <<COMPRESSION_AMT>>, out);
out.flush();
out.close(); 
```

# c++ - Eclipse 中无法识别 C++11 覆盖关键字

> ID：15775670
> 
> 赞同：2
> 
> 时间：2013-04-02T22:37:45.440
> 
> 标签：c++, eclipse, c++11, overriding, syntax-error

我正在为 C++ 开发人员使用 Eclipse (Indigo) IDE。我正在使用 make 文件来构建项目。我`override`在派生类中使用虚拟函数的关键字，以便编译器在函数与基类中的声明不匹配时警告我。但是，Eclipse 用黄色突出显示该行，表示语法错误。我已按照[此处](https://stackoverflow.com/questions/9131763/eclipse-cdt-c11-c0x-support)指定的步骤进行操作。任何更多关于我如何获得的建议都可以让我识别关键字`override`

# jquery - 取消单个文件，使用jquery文件上传

> ID：15775672
> 
> 赞同：8
> 
> 时间：2013-04-02T22:37:56.350
> 
> 标签：jquery, file-upload, blueimp

我想取消单个文件，使用 jquery 文件上传插件。我想用核心插件来做，不需要所有的 UI 东西。

在我的本地文件系统上选择文件后，这些文件位于何处？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T12:41:00.633

我在我的项目中这样做了：为每个文件附加上传和取消按钮

```
$('#TestForm').fileupload({
         dataType : 'json',
         autoUpload : false,
         add : function(e, data) {
             var file=data.files[0];
             var vOutput="";
             vOutput+="<tr><td>"+file.name+"</td>"
             vOutput+="<td><input type='button' class='fileUpload' value='upload'></td>"
             vOutput+="<td><input type='button' class='fileCancel' value='cancel'></td></tr>"
             $("#TestTable").append(vOutput)
             $(".fileUpload").eq(-1).on("click",function(){
                  data.submit();
             })
             $(".fileCancel").eq(-1).on("click",function(){
                  $(this).parent().parent().remove()
             })
         }
}) 
```

如果您愿意，您还可以添加按钮来上传或取消所有文件，如下所示：

```
 $("#fileUploadAll").on("click", function() {
        $(".fileUpload").click(); // click all upload buttons
    })
    $("#fileCancelAll").on("click", function() {
        $(".fileCancel").click(); //click all cancel buttons
    }) 
```

HTML：

```
<form id='TestForm'>
     <input type="file" id="FileSelect" name="files[]" data-url="yourURL.php" multiple/>
     <input type="button" value="upload all" id="fileUploadAll"/>
     <input type="button" value="cancel all" id="fileCancelAll"/>
     <table id='TestTable'></table>
</form> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-30T14:49:03.443

如果您不想覆盖 add 方法，这里提到了另一个选项：[添加取消上传或中止功能以引导多个文件上传插件](https://stackoverflow.com/questions/20628858/add-cancel-upload-or-abort-functionality-to-bootstrap-multiple-file-upload-plugi)

```
$('#fileupload').bind('fileuploadadd', function(e, data){
  var jqXHR = data.submit(); // Catching the upload process of every file
  $('#cancel_all').on('click',function(e){
        jqXHR.abort();
  });
}); 
```

它使用从 submit 方法返回的 jqXHR 对象。只是不要忘记关闭自动上传设置。如果您不想取消所有上传，请确保将点击事件附加到该文件的相应元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-13T16:38:42.740

我有一个案例，我们需要运行检查以查看所选文件是否已存在于服务器上，并提供覆盖它的选项。如果用户选择不覆盖文件，那么我们不想将文件上传到服务器，而是将其保留在队列中，以防他们改变主意，即不要删除整个 tr。

为此，您只需将`disabled`属性添加到要阻止上传的 tr 中的开始按钮。jQuery fileupload 将像往常一样在队列中搅动，并忽略任何具有禁用开始按钮的行。

# android - SQLite Android 选择查询问题

> ID：15775673
> 
> 赞同：1
> 
> 时间：2013-04-02T22:37:59.083
> 
> 标签：android, database, sqlite, select

我正在尝试从我的国家数据库中选择一个国家并将其返回到光标以显示在 TextView 中。但是，每次我运行此活动时，我的应用程序都会崩溃。这是我的代码：

数据库类：

```
package com.mypackage.msdassignment;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteDatabase.CursorFactory;

public class DBManager 
{
    public static final String KEY_ID = "_id";
    public static final String KEY_CONTENT = "country";
    public static final String KEY_YEAR = "year";
    public static final String KEY_MONTH = "month";
    public static final String KEY_DESC = "description";

    public static final String DATABASE_NAME = "Countries database";
    public static final String DATABASE_TABLE = "Country";
    public static final int DATABASE_VERSION = 1;

    //create table MY_DATABASE (ID integer primary key, Content text not null);
    private static final String SCRIPT_CREATE_DATABASE =
            "create table " + DATABASE_TABLE + " ("
            + KEY_ID + " integer primary key autoincrement, "
            + KEY_CONTENT + " text ,"
            + KEY_YEAR + " integer ,"
            + KEY_MONTH + " month ,"
            + KEY_DESC + " text);";

    private Context context;
    private DBHelper DBHelper;
    private SQLiteDatabase db;

    public DBManager(Context ctx)
    {
        context = ctx;
    }

    //beginning of helper class
    public class DBHelper extends SQLiteOpenHelper 
    {
        public DBHelper(Context context, String name, CursorFactory factory, int version) 
        {
            super(context, name, factory, version);
        }

        @Override
        public void onCreate(SQLiteDatabase db)
        {
             db.execSQL(SCRIPT_CREATE_DATABASE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
        {
            // TODO Auto-generated method stub
        }
    }

    public DBManager openToRead() throws SQLException 
    {
        DBHelper = new DBHelper(context, DATABASE_NAME, null, DATABASE_VERSION);
        db = DBHelper.getReadableDatabase();
        return this;
    }

    public DBManager openToWrite() throws SQLException 
    {
        DBHelper = new DBHelper(context, DATABASE_NAME, null, DATABASE_VERSION);
        db = DBHelper.getWritableDatabase();
        return this;
    }

    public void close()
    {
        DBHelper.close();
    }

    public long insert(String content, int year, String month, String description)
    {
        ContentValues contentValues = new ContentValues();
        contentValues.put(KEY_CONTENT, content);
        contentValues.put(KEY_YEAR, year);
        contentValues.put(KEY_MONTH, month);
        contentValues.put(KEY_DESC, description);
        return db.insert(DATABASE_TABLE, null, contentValues);
    }

    public int deleteAll()
    {
        return db.delete(DATABASE_TABLE, null, null);
    }

    public void deleteDatabase()
    {
        context.deleteDatabase(DATABASE_NAME);
    }

    public Cursor queueAll()
    {
        String[] columns = new String[]{
                KEY_ID, 
                KEY_CONTENT,
                KEY_YEAR,
                KEY_MONTH,
                KEY_DESC};
        Cursor cursor = db.query(DATABASE_TABLE, columns,
          null, null, null, null, null);

        return cursor;
    }

    //this is the method with the problem
    public Cursor getCountry()
    {
        Cursor cursor = db.query(DATABASE_TABLE, new String[] {"country", "month"}, 
                "country like " + "'%Ireland%'", null, null, null, null);

        return cursor;
    }
} 
```

我试图获得国家的活动：

```
package com.mypackage.msdassignment;

import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.widget.SimpleCursorAdapter;
import android.widget.TextView;

public class CountryInfo extends Activity
{
    private DBManager db;
    Cursor cursor;
    String passedValue;
    TextView mytextView;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.country_layout);

        //intent passed data
        passedValue = getIntent().getStringExtra(MainActivity.ID_EXTRA);
        int num = Integer.parseInt(passedValue);
        mytextView = (TextView)findViewById(R.id.country);

        db = new DBManager(this);
        db.openToRead();

        cursor = db.getCountry();
        String s = cursor.getString(1);
        mytextView.setText(s);
    }
} 
```

Logcat 错误：

```
04-02 22:29:30.980: D/AndroidRuntime(17632): procName from cmdline: com.mypackage.msdassignment
04-02 22:29:30.980: E/AndroidRuntime(17632): in writeCrashedAppName, pkgName :com.mypackage.msdassignment
04-02 22:29:30.980: D/AndroidRuntime(17632): file written successfully with content: com.mypackage.msdassignment StringBuffer : ;com.mypackage.msdassignment
04-02 22:29:30.980: E/AndroidRuntime(17632): FATAL EXCEPTION: main
04-02 22:29:30.980: E/AndroidRuntime(17632): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mypackage.msdassignment/com.mypackage.msdassignment.CountryInfo}: android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 1
04-02 22:29:30.980: E/AndroidRuntime(17632):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
04-02 22:29:30.980: E/AndroidRuntime(17632):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-02 22:29:30.980: E/AndroidRuntime(17632):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-02 22:29:30.980: E/AndroidRuntime(17632):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-02 22:29:30.980: E/AndroidRuntime(17632):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-02 22:29:30.980: E/AndroidRuntime(17632):    at android.os.Looper.loop(Looper.java:130)
04-02 22:29:30.980: E/AndroidRuntime(17632):    at android.app.ActivityThread.main(ActivityThread.java:3683)
04-02 22:29:30.980: E/AndroidRuntime(17632):    at java.lang.reflect.Method.invokeNative(Native Method)
04-02 22:29:30.980: E/AndroidRuntime(17632):    at java.lang.reflect.Method.invoke(Method.java:507)
04-02 22:29:30.980: E/AndroidRuntime(17632):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:880)
04-02 22:29:30.980: E/AndroidRuntime(17632):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:638)
04-02 22:29:30.980: E/AndroidRuntime(17632):    at dalvik.system.NativeStart.main(Native Method)
04-02 22:29:30.980: E/AndroidRuntime(17632): Caused by: android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 1
04-02 22:29:30.980: E/AndroidRuntime(17632):    at android.database.AbstractCursor.checkPosition(AbstractCursor.java:580)
04-02 22:29:30.980: E/AndroidRuntime(17632):    at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:214)
04-02 22:29:30.980: E/AndroidRuntime(17632):    at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:41)
04-02 22:29:30.980: E/AndroidRuntime(17632):    at com.mypackage.msdassignment.CountryInfo.onCreate(CountryInfo.java:31)
04-02 22:29:30.980: E/AndroidRuntime(17632):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-02 22:29:30.980: E/AndroidRuntime(17632):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-02 22:29:30.980: E/AndroidRuntime(17632):    ... 11 more
04-02 22:29:31.330: W/ResourceType(17644): Skipping entry 0x7f060002 in package table 0 because it is not complex!
04-02 22:29:31.330: W/ResourceType(17644): Skipping entry 0x7f060002 in package table 0 because it is not complex!
04-02 22:29:31.330: W/ResourceType(17644): Skipping entry 0x7f060002 in package table 0 because it is not complex!
04-02 22:29:31.330: W/ResourceType(17644): Skipping entry 0x7f060002 in package table 0 because it is not complex!
04-02 22:29:31.330: W/ResourceType(17644): Skipping entry 0x7f060002 in package table 0 because it is not complex! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:43:13.040

我似乎无法`.moveToFirst()`在您的光标上找到方法调用，它将光标移动到结果集的第一行。我相信这很可能是您的问题的原因。

所以，尝试类似的东西

```
cursor = db.getCountry();

if(cursor.moveToFirst()) {
    String s = cursor.getString(1); 
    mytextView.setText(s);
} 
```

另外，请记住 getString 方法是从零开始的（正如其他人在他们的答案中所指出的那样）。使用 1 将为您提供“月份”列，由于您的文本字段 ID 的名称，我怀疑这不是您要查找的内容:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T22:46:37.707

> 引起：android.database.CursorIndexOutOfBoundsException：请求索引-1，大小为1

没有问题。`moveToFirst()`只是您忘记在光标上调用方法。

## 解释：

每个`Cursor`总是隐式定位在第一行之前。这就是您的应用程序崩溃的原因。您试图从 -1 行中获取实际上不存在的值。解决方案是调用此方法，将光标移动到第一行并准备好读取。

```
if (c.moveToFirst()) {
   // do your stuff
} 
```

## 建议：

如果要从中获取值`Cursor`，请始终使用`c.getColumnIndex("columnName")`方法来避免“错字”和“编号”错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T22:45:00.420

您可能是指 getString(0)，也可能想调用 moveToFirst()。

# widget - gtkmm 是否可以多次将相同的小部件添加到 vbox

> ID：15775674
> 
> 赞同：0
> 
> 时间：2013-04-02T22:38:01.367
> 
> 标签：widget, gtkmm

这是我的问题。我有我想要显示的这种形式的信息。我已经在另一个包含此信息的类中制作了一个 vbox。

这些信息是关于他们与他们申请的工作相关的额外工作经验。当然，他们可以有多种工作经验。我想以他们输入的形式展示他们所有的工作经验（这是另一个类中的 vbox）。

是否可以多次将同一个 vbox 添加到一个窗口（我的意思是添加到窗口上的另一个 vbox，因为窗口只能包含一个小部件）？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:49:55.537

不，您不能两次添加相同的小部件，表单上的每个小部件都必须是唯一的。您可以使用方法（...或工厂）来创建新的 vbox，以避免重复代码。

没有这种可能性的真正原因是：假设您已经在 vbox 中添加了一些组件。现在，您想将相同的 vbox 添加到此 vbox。等等，widget children 呢？这个 vbox 将成为它自己的孩子，覆盖它自己的孩子！这就是为什么您必须将每个小部件创建为不同的对象。

# matlab - 如何使用带有 simulink 和神经网络工具箱的神经网络

> ID：15775675
> 
> 赞同：1
> 
> 时间：2013-04-02T22:38:05.190
> 
> 标签：matlab, neural-network, simulink

我正在尝试使用从神经网络工具箱生成的神经网络和 simulink 模型。

NN 是倒立摆的控制器。每当我构建一个网络时，它总是会生成一个带有单个输入的网络。我的问题需要用两个输入一个输出来解决，然后，我必须把那个网络放在一个 simulink 块上，但我找不到正确的工具。我看到的唯一一个需要两个网络模型，因为我不知道为什么。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:30:50.573

在您尝试转换为 simulink 模块之前，您应该确保您训练的 NN 在 matlab 中正常工作。你是什​​么意思有一个单一的输入？所有输入都应位于相同的数据结构（例如矩阵）中，其中行数 = “输入”的数量。

这是一个使用 house_dataset 的示例。您只需在 matlab 命令行中键入“help house_dataset”即可获取此示例代码。

```
[x,t] = house_dataset;
net = fitnet(10);
net = train(net,x,t);
view(net)
y = net(x); 
```

无论如何，x 是一个 13 x 506 的向量。训练好的网络有一个大小为 13 的输入：

> > 网络输入{1}.size

答案=

```
13 
```

您对训练有素的网络有何看法？你给它一个二维输入向量吗？

一旦您的网络经过训练并且您拥有正确的输入大小，您就可以使用 gensim 函数将网络传输到 simulink。进入 simulink 后，您可以通过使用诸如 mux 之类的东西构建输入向量并将其作为单个信号连接到网络来将输入发送到 NN。当然，您可以通过多种方式生成向量，而不必使用多路复用器。

# c++ - 如何使用GMP生成一定范围内的随机数

> ID：15775679
> 
> 赞同：1
> 
> 时间：2013-04-02T22:38:20.310
> 
> 标签：c++, random, gmp

我试图这样做如下：

```
int main(){
  mpz_t v;
  mpf_class u,w,x[3][200];     

  for(i=0;i<n;i++){
   for(j=0;j<3;j++){
     mpz_random(v,1000000);
     mpf_div_ui(w.get_mpf_t(),v,1000000);
     mpf_div(u.get_mpf_t(),1,2);
     mpf_sub(w.get_mpf_t(),w.get_mpf_t(),u);
     mpf_mul(x[i][j].get_mpf_t(),w.get_mpf_t(),2);
   }
  }
} 
```

但是整数和浮点数一起使用是行不通的。基本上尝试分配随机整数，除以最大值，整数可能会给出一个介于 0 和 1 之间的数字（不一定是整数）。减半并乘以 2 会得到一个介于 -1 和 1 之间的随机数，这是我想要的，但是就像我说的那样，这会因类型而导致问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:38:04.957

如果我正确理解您的程序的意图，这应该或多或少是您所追求的。

```
int main(){
  gmp_randstate_t state;
  mpf_class v, w, x[3][200];

  gmp_randinit_mt(state);
  for(int i=0;i<3;i++){
   for(int j=0;j<200;j++){
     mpf_urandomb(v.get_mpf_t(), state, 4);
     mpf_urandomb(w.get_mpf_t(), state, 256);
     if (v < .5) w *= -1;
     x[i][j] = w;
   }
  }
} 
```

该`state`变量用于通知随机数例程您希望将什么算法用于随机数生成器。在上面的代码中，我已经将它初始化为使用 Mersenne Twister 算法。

您没有正确声明您的`i`和`j`索引。

第一次调用`mpf_urandomb()`获取一个介于 0 和 1 之间的 4 位随机值。它用于决定下一个数字是否应该为负数。

第二次调用`mpf_urandomb()`获取 0 到 1 之间的 256 位随机值。如果前一个数字小于`.5`，则取反。

此值分配给`x[i][j]`。

# objective-c - 观察对 NSUserDefaults 的更改时出错

> ID：15775680
> 
> 赞同：0
> 
> 时间：2013-04-02T22:38:21.570
> 
> 标签：objective-c, nsuserdefaults

我正在尝试将值保存到`NSUserDefaults`. 下面是我的代码。

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
[prefs setValue:theUrl forKey:PREFS_FEED_URL]; 
```

我收到的错误是`message sent to deallocated instance 0x9495b00`.

这是在模拟器上运行的。我已经验证了 prefs 变量不是`nil`.

编辑：下面的完整方法：

```
- (void) exeSave {
    NSString *theUrl = [util isEmptyStr:rssFeedUrl.text] ? nil : [util trimString:rssFeedUrl.text];
    if (!theUrl) {
        [util showToast:@"The URL entered was empty" duration:1];
        return;
    }

    NSURL *url = [[NSURL alloc] initWithString:theUrl];
    if (!url) {
        [util showToast:@"The URL entered was invalid" duration:1];
        return;
    }
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    [prefs setObject:theUrl forKey:PREFS_FEED_URL];
    [prefs synchronize];
} 
```

编辑 2：我刚刚意识到错误消息指的是以前的`ViewController`- my `RssViewController`. 上面的方法在我的`EditSettingsViewController`. 我对Objective C的了解还不够，无法弄清楚为什么会发生这种情况或如何发生这种情况。

编辑 3：经过进一步检查，当我删除观察到`NSUserDefaults`.

以下代码在我的`RssViewController`

在`viewDidLoad`方法中，我有以下内容：

```
[[NSUserDefaults standardUserDefaults] addObserver:self forKeyPath:@"feed_url" options:NSKeyValueObservingOptionNew context:nil]; 
```

我在方法中删除了观察者`dealloc`：

```
- (void)dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    self.navigationController.sideMenu.menuStateEventBlock = nil;
} 
```

我覆盖了以下方法。

```
- (void) observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    if ([keyPath isEqual:PREFS_FEED_URL]) {
        NSLog(@"user prefs: url changed");
        [self refresh];
    }
} 
```

调试器永远不会到达该`observeValueForKeyPath`方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:02:04.900

使用`setObject:forKey:`时必须是以下数据类型之一。（来自苹果文档）：

`The value parameter can be only property list objects: NSData, NSString, NSNumber, NSDate, NSArray, or NSDictionary. For NSArray and NSDictionary objects, their contents must be property list objects.`

您应该使用以下两种方法：

`setURL:forKey:`和`URLForKey:`

在此处查看文档：[NSUserDefaults 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)

以下是当前支持的获取/设置`NSUserDefaults`值的方法：

**获取默认值**

```
arrayForKey:
boolForKey:
dataForKey:
dictionaryForKey:
floatForKey:
integerForKey:
objectForKey:
stringArrayForKey:
stringForKey:
doubleForKey:
URLForKey: 
```

**设置默认值**

```
setBool:forKey:
setFloat:forKey:
setInteger:forKey:
setObject:forKey:
setDouble:forKey:
setURL:forKey: 
```

* * *

关于您的编辑，您在 上设置了 KVO `NSUserDefaults`，但您没有正确取消注册它们。当您在对象上使用 KVO 时，您必须*为该*对象取消注册 KVO ，而不仅仅是调用`removeObserver:`. `NSNotificationCenter`将以下内容添加到您的`dealloc`方法中：

```
[[NSUserDefaults standardUserDefaults] removeObserver:self forKeyPath:@"feed_url" context:NULL]; 
```

在这种情况下，最有可能发生的事情是您没有取消注册 KVO，因此其他事情会改变`NSUserDefaults`它，它会尝试调用您现在的 dealloc`d 视图控制器。

# powershell - powershell cmdlet：表达式必须可读

> ID：15775684
> 
> 赞同：-2
> 
> 时间：2013-04-02T22:38:36.087
> 
> 标签：powershell, cmdlets, cmdlet

我的 cmdlet 试图从管道中获取值，但是在运行时，我收到错误消息：

无法处理管道输入，因为无法检索参数“合法性”的默认值。获得“合法性”的异常：表达式必须可读参数名称：表达式

我不知道是什么产生了这个错误..

谢谢你的帮助！代码如下..

```
[Cmdlet(VerbsCommon.Get, "Deals")]
public partial class GetDealCmdlet : InsightBaseCmdlet
{
    private List<Object> _legalentities = new List<Object>();
    [Parameter(Position = 0, Mandatory = true, ValueFromPipeline = true, ValueFromPipelineByPropertyName = true)]
    public List<Object> Legalentity { set { _legalentities = value; } } 

    protected override void ProcessRecord() {...}
} 
```

和用法：

```
Search-Deals xxx | Get-Deals 
```

搜索交易是：

```
...

protected override void ProcessRecord() 
{
    foreach (PSObject in List<PSObject>)
    {
        ....
        writeObject(PSObject);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T23:08:28.727

确保您`Parameter`同时拥有`get`ter 和`set`ter 应该可以解决问题以及任何`"Expression must be writeable"`类似类型的错误。

```
public List<Object> Legalentity 
{ 
    set { _legalentities = value; } 
    get { return _legalentities; }
} 
```

# wcf - WCF 超时未得到遵守

> ID：15775687
> 
> 赞同：6
> 
> 时间：2013-04-02T22:38:40.947
> 
> 标签：wcf, timeout

我是一个广泛使用 WCF 的项目的新手，我对 WCF 的经验并不丰富。我正在尝试追踪一个问题，即我的 UI 在等待长时间运行的服务调用返回时 10 分钟后出现超时错误。非常粗略地这是我的项目所需要的：

```
[service A] <=> [service B] <=> [UI console] 
```

这是我迄今为止收集到的：

*   超时发生在 serviceA 和 serviceB 之间，而不是在 serviceB 和 UI 控制台之间，因为我实际上有两个单独的 UI 控制台：一个是 MMC 管理单元，一个是 PowerShell 管理单元，两者都表现出相同的 10 分钟超时.

*   我在 serviceA 和 serviceB 中的端点都使用 basicHttpBinding；两者都有 bindingConfigurations 指定 sendTimeout 和 receiveTimeout 为 30 分钟，而不是 10 分钟。

*   ReliableSession.InactivityTimeout 默认为我读过的 10 分钟，但我不相信其中任何一个都是 ReliableSession，因此它不适用。

*   我为 WCF 跟踪检测了 serviceB；ServiceTraceViewer 显示了在长时间运行的服务调用开始之前的适当活动，然后在 10 分钟超时之前没有任何内容。

随时就我的任何断言挑战我和/或让我知道我还能做些什么来诊断这个问题。

**2013.04.04 更新**

这是实际的错误消息：

> 00:09:59.9839984 后等待回复时请求通道超时。增加传递给 Request 调用的超时值或增加 Binding 上的 SendTimeout 值。分配给此操作的时间可能是较长超时的一部分。
> 
> 服务器堆栈跟踪：System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout) at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout) at System.ServiceModel.Channels.ServiceChannel.Call(String在 System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) 在 System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage信息）
> 
> 在 [0] 处重新引发异常：在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 类型) 处的 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) 处 NextIT.ActiveAdministration。 DataContracts.IActiveAdministration.PublishAgentSettings() 在 ...

内部异常：

> 对“ ”的 HTTP 请求`http://localhost/MyAdminService/`已超过分配的超时时间 00:10:00。分配给此操作的时间可能是较长超时的一部分。
> 
> 在 System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException（WebException webException，HttpWebRequest 请求，HttpAbortReason abortReason）
> 在 System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelRequest.WaitForReply（时间跨度超时）在 System.ServiceModel.Channels.RequestChannel.Request （消息消息，TimeSpan 超时）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:56:29.010

有一句古老的格言*“如果它不起作用，请尝试插入它”。*我非常专注于在 app.config 文件的痛苦曲折中前行，该文件充斥着大火和混乱——部分原因是在这个大型项目中实际上有 5 个 app.config 文件具有各种绑定和服务（！）--我没有注意到代码覆盖配置文件的明显部分：

```
binding.ReceiveTimeout = new TimeSpan(0, 0, 10, 0);
binding.SendTimeout = new TimeSpan(0, 0, 10, 0); 
```

叹。

但是等等——还有更多。我最初对为什么配置文件中的 30 分钟值没有效果，因为超时发生在 10 分钟而摸不着头脑？好吧，事实证明，10 分钟超时（如上所示在代码中设置）是从 UI 控制台到 serviceB。配置文件中设置的 30 分钟超时是从 serviceB 到 serviceA，所以我不得不将*两者都*打开以让长时间运行的操作继续进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:11:40.480

尝试使用操作超时，如下所述：http: [//final-proj.blogspot.co.il/2009/09/wcf-timeouts.html?m=1](http://final-proj.blogspot.co.il/2009/09/wcf-timeouts.html?m=1)

此外，此类服务配置可能会导致超时，例如使用回调。. . （来自这篇文章[Timeouts WCF Services](https://stackoverflow.com/questions/229760/timeouts-wcf-services)）

# heroku - 有没有办法知道 Heroku 上的某个人是否访问了我的应用程序？

> ID：15775695
> 
> 赞同：0
> 
> 时间：2013-04-02T22:39:15.663
> 
> 标签：heroku

我创建了一个应用程序并将其部署在 heroku 上。我已经把链接给了几个人。有没有办法知道（在日志或其他地方）他们是否真的打开了它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:41:30.997

正如您所说，打开您的应用程序日志，完成的任何请求都应该在那里。如果您想了解更多详细信息，请在您的应用中使用类似谷歌分析的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:41:39.080

在您的终端中：

```
$ heroku logs | fgrep "heroku[router]" 
```

[https://devcenter.heroku.com/articles/logging#log-retrieval](https://devcenter.heroku.com/articles/logging#log-retrieval)

# scala - 如何开发宏来短路零点？

> ID：15775699
> 
> 赞同：4
> 
> 时间：2013-04-02T22:39:38.477
> 
> 标签：scala, macros

在 Scala 中，如果我有

```
hub = myBicycle.getFrontWheel.getHub() 
```

并且有可能缺少前轮，即`myBicycle.getFrontWheel() == null`，我只想在这种情况下`hub`被分配`null`，最简洁的表达方式是什么？

我目前不得不做

```
hub = if (myBicycle.getFrontWheel() == null) null else myBicycle.getFrontWheel.getHub() 
```

当访问器链更长时，情况会变得更糟。

不熟悉 Scala 宏，我想知道是否可以编写一个 Scala 宏，以某种方式捕获方法名称并仅在对象引用非空时应用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T10:45:15.763

实际上，我最近写了一个这样的宏，灵感来自[一个关于 Scala 中的 null-safe dereferences 的问题](https://stackoverflow.com/questions/1163393/best-scala-imitation-of-groovys-safe-dereference-operator)。顺便说一句，这个问题与这个问题非常相似，并且包含了一个关于你可以做些什么来实现这一目标的长时间讨论，包括 的用法`Option`、捕捉 NPE 的奇特方式等。

关于我写的宏的一些评论（来源包括在下面）：

*   它返回一个`Option`，它会`None`在某个时候有一个空取消引用。
*   它使用 if-else 将每个成员访问通过 dot 转换为 null 保护访问，`None`当前缀为 . 时返回`null`。
*   它变得有点复杂，我想象它是......
*   在某些极端情况下它不起作用，我知道的一个是使用`getClass`方法时 - 编译器根据其返回类型专门处理它。
*   关于隐式转换存在潜在的不一致。想象一下，您有一个表达式`a.b`并`b`通过隐式转换到达，因此有效地，该表达式类似于`conv(a).b`. 现在，问题出现了：我们应该检查`a`是`null`或是`conv(a)`还是`null`两者兼而有之？目前，我的宏仅检查是否`a`对`null`我来说似乎更自然一些，但在某些情况下这可能不是所需的行为。此外，在我的宏中检测隐式转换有点小技巧，在[这个问题](https://stackoverflow.com/questions/15508660/how-to-distinguish-compiler-inferred-implicit-conversion-from-explicitly-invoked)中有描述。

宏：

```
def withNullGuards[T](expr: T): Option[T] = macro withNullGuards_impl[T]

def withNullGuards_impl[T](c: Context)(expr: c.Expr[T]): c.Expr[Option[T]] = {
  import c.universe._

  def eqOp = newTermName("==").encodedName
  def nullTree = c.literalNull.tree
  def noneTree = reify(None).tree
  def someApplyTree = Select(reify(Some).tree, newTermName("apply"))

  def wrapInSome(tree: Tree) = Apply(someApplyTree, List(tree))

  def canBeNull(tree: Tree) = {
    val sym = tree.symbol
    val tpe = tree.tpe

    sym != null &&
      !sym.isModule && !sym.isModuleClass &&
      !sym.isPackage && !sym.isPackageClass &&
      !(tpe <:< typeOf[AnyVal])
  }

  def isInferredImplicitConversion(apply: Tree, fun: Tree, arg: Tree) =
    fun.symbol.isImplicit && (!apply.pos.isDefined || apply.pos == arg.pos)

  def nullGuarded(originalPrefix: Tree, prefixTree: Tree, whenNonNull: Tree => Tree): Tree =
    if (canBeNull(originalPrefix)) {
      val prefixVal = c.fresh()
      Block(
        ValDef(Modifiers(), prefixVal, TypeTree(null), prefixTree),
        If(
          Apply(Select(Ident(prefixVal), eqOp), List(nullTree)),
          noneTree,
          whenNonNull(Ident(prefixVal))
        )
      )
    } else whenNonNull(prefixTree)

  def addNullGuards(tree: Tree, whenNonNull: Tree => Tree): Tree = tree match {
    case Select(qualifier, name) =>
      addNullGuards(qualifier, guardedQualifier =>
        nullGuarded(qualifier, guardedQualifier, prefix => whenNonNull(Select(prefix, name))))
    case Apply(fun, List(arg)) if (isInferredImplicitConversion(tree, fun, arg)) =>
      addNullGuards(arg, guardedArg =>
        nullGuarded(arg, guardedArg, prefix => whenNonNull(Apply(fun, List(prefix)))))
    case Apply(Select(qualifier, name), args) =>
      addNullGuards(qualifier, guardedQualifier =>
        nullGuarded(qualifier, guardedQualifier, prefix => whenNonNull(Apply(Select(prefix, name), args))))
    case Apply(fun, args) =>
      addNullGuards(fun, guardedFun => whenNonNull(Apply(guardedFun, args)))
    case _ => whenNonNull(tree)
  }

  c.Expr[Option[T]](addNullGuards(expr.tree, tree => wrapInSome(tree)))
} 
```

**编辑**

这是使语法更好的附加代码：

```
def any2question_impl[T, R >: T](c: Context {type PrefixType = any2question[T]})(default: c.Expr[R]): c.Expr[R] = {
  import c.universe._

  val Apply(_, List(prefix)) = c.prefix.tree
  val nullGuardedPrefix = withNullGuards_impl(c)(c.Expr[T](prefix))
  reify {
    nullGuardedPrefix.splice.getOrElse(default.splice)
  }
}

implicit class any2question[T](any: T) {
  def ?[R >: T](default: R): R = macro any2question_impl[T, R]
} 
```

最后，你可以有这样的代码：

```
val str1: String = "hovercraftfullofeels"
val result1 = str1.substring(3).toUpperCase ? "THERE WAS NULL"
println(result1) // prints "ERCRAFTFULLOFEELS"

val str2: String = null
val result2 = str2.substring(3).toUpperCase ? "THERE WAS NULL"
println(result2) // prints "THERE WAS NULL" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T23:26:16.613

除非您必须与固定的 Java 代码进行互操作，否则您应该使用`Option`而不是`null`; 因此`getFrontWheel()`会返回`Option[Wheel]`，然后您可以使用`map`/`flatMap`沿着链条向下：

```
val hub:Option[Hub] = myBicycle.getFrontWheel().flatMap(wheel => wheel.getHub())
val spoke:Option[Spoke] = myBicycle.getFrontWheel().flatMap(wheel => wheel.getHub().map(hub => hub.getSpoke())) 
```

（假设`hub.getSpoke()`返回`Spoke`，不是`Option[Spoke]`）

最后一个例子可以改写为

```
val spoke:Option[Spoke] =
  for (wheel <- myBicycle.getFrontWheel();
       hub <- wheel.getHub())
  yield hub.getSpoke() 
```

如果您真的必须处理，`null`您可以通过以下方式轻松转换结果`Option`：

```
val wheel:Option[Wheel] = Option(myBicycle.getFrontWheel()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T01:51:52.567

你可以这样写：

```
def nil[B >: Null] (fun : => B) : B = {
  try fun
  catch {case e : NullPointerException => null}
} 
```

然后像这样使用它：

```
val hub = nil(myBicycle.getFrontWheel.getHub) 
```

不过，它也会影响嵌套调用的空异常。如果您想按照前面提到的方式编写它，请至少这样做：

```
val hub = Option(myBicycle.getFrontWheel()).map(_.getHub).getOrElse(null) 
```

# excel - 对 Excel 进行编程以根据某些有效期有条件地格式化单元格（跟踪表）

> ID：15775703
> 
> 赞同：1
> 
> 时间：2013-04-02T22:39:49.183
> 
> 标签：excel

我正在制作一张 Excel 表格，该表格根据某些有效期突出显示某些单元格。我有一个单元格 h3 的证书有效期为 4 年。每 4 年，证书需要更新。另外，我在第 8 行有一个名字，持有 h8 的最后认证日期。当证书日期距离到期还有2个月时，如何设置excel更改h8的背景颜色？即我如何对工作表进行编程以遵守这个传说

![](https://expertedge.files.wordpress.com/2013/04/legend.png)

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:06:11.860

这是一种可能的方法：

如果我有这样的列：

```
 A         | B               | C
1 User Name | Certificated On | Total Days While Certified
2 John Doe  | 6/12/2012       | 294 
```

我可以像这样对第三列 ( ) 使用公式`Total Days While Certified`：

```
=TODAY()-B2 
```

**但请务必使用“*[单元格格](http://www.addintools.com/documents/excel/where-is-format-cells/where-is-format-cells.html)*`Total Days While Certified`式”选项设置此“ ”列的格式，使其仅显示为“ `Number`”而不是“ ” ！`Date`**

*注意：`=TODAY()-B2`公式给出了从现在到用户获得认证的总天数。在您的情况下，单元格编号**B2**可能与此示例中的不同。*

毕竟，我可以对该“ ”列使用[条件格式](http://www.wikihow.com/Apply-Conditional-Formatting-in-Excel)`Total Days While Certified`，以检查天数是否超过 1278（大约为三年半......）并使单元格变为黄色（或所需的任何颜色）到请注意，用户的证书即将过期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T23:04:29.673

基于公式的 H8 条件格式

```
=$H$8>TODAY()-1278 
```

然后使用格式填充黄色

```
 =$H$8>TODAY()-59 
```

填充绿色

```
 =$H$8>=TODAY() 
```

红色填充

或者用硬编码的过期时间替换 TODAY() 或将其指向包含过期时间的单元格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T18:52:35.343

@summea 非常感谢，您的回答为整个电子表格实施奠定了基础。

```
 A            |       B         | C
  -----------------------|-----------------|------------ 
1 validity               |     1yrs        |     4yrs
2 last certification date|   6/12/2012     |   29/4/2011
3 last certification date|   8/05/2011     |   13/11/2013 
```

我想要一个遵守这个传说的电子表格： ![](https://expertedge.files.wordpress.com/2013/04/legend.png)

使用上面的示例表，公式看起来有点像这样

```
 /* GREEN */ =IF(OR(B2="DONE", B2="done"), TRUE, AND(B$1<>0, OR((TODAY()-DATE(YEAR(B2), MONTH(B2),DAY(B2)))<((B$1*365)-60))))

    /* RED */ =IF(OR(ISBLANK(B2), B2="ASAP", B2="asap"), TRUE, AND(B$1<>0, IF((TODAY()-DATE(YEAR(B2), MONTH(B2),DAY(B2)))>=(B$1*365), TRUE, FALSE)))

    /* YELLOW */ =IF(AND(B$1<>0, (TODAY()-DATE(YEAR(B2), MONTH(B2),DAY(B2)))>=((B$1*365)-60)), TRUE, FALSE) 
```

这些是我用来实现它的公式。我的最终输出看起来有点像这样

![](https://expertedge.files.wordpress.com/2013/04/legend1.png)

你可以[在这里下载我的演示文件的副本](http://expertedge.files.wordpress.com/2013/04/etts-demo.xlsx)。这不是原始文件，但它是原始文件的试验场。多谢你们。

# c# - 使用 Fine Uploader 分块上传文件，我无法将它们重新合并在一起

> ID：15775705
> 
> 赞同：4
> 
> 时间：2013-04-02T22:40:00.033
> 
> 标签：c#, asp.net, fine-uploader

我正在试验 Fine Uploader 以便在我们的网站上实施它。我真的很喜欢分块和恢复功能，但是我在将文件重新放在服务器端时遇到了一些问题；我这样做后他们就腐败了。经过一番调查，我发现每个块都太大了 194 字节，这使得生成的文件太大了 x 194 字节。这是一个已知问题吗？如果需要，我会发布我的代码。谢谢你的时间。

*编辑*这是我的 sscce。我忘了指定我使用的是 ASP.NET C#。

*网页上传器的初始化*

```
 $(document).ready(function () {
    var manualuploader = new qq.FineUploader({
        element: $('#fine-uploader')[0],
        request: {
            endpoint: 'UploadHandler.ashx',
            forceMultipart: true            
        },        
        chunking: {
            enabled: true
        },
        resume: {
            enabled: true
        },
        retry: {
            enableAuto: true
        },
        callbacks: {
            onSubmit: function (id, fileName) {
                document.getElementById('triggerUpload').style.visibility = 'visible';
            }            
        }

    });
}); 
```

和服务器端处理程序（c#）：

```
<%@ WebHandler Language="C#" Class="UploadHandler" %>

using System;
using System.Web;

public class UploadHandler : IHttpHandler, System.Web.SessionState.IReadOnlySessionState
{
    private int completed;

    public void ProcessRequest(HttpContext context)
    {
        HttpRequest request = context.Request;

        string partIndex = request.Params["qqpartindex"];
        int totalParts = Convert.ToInt32(request.Params["qqtotalparts"]);        
        String filename = request.Params["qqfilename"];
        String totalFileSizeName = request.Params["qqtotalfilesize"];

        string uploadedTemp = context.Server.MapPath("~/App_Data/" + "TEMP/");
        string uploadedLocation = context.Server.MapPath("~/App_Data/");

        string filePath = System.IO.Path.Combine(uploadedTemp, partIndex + ".tmp");

        if (!System.IO.File.Exists(filePath))
        {
            System.IO.Stream inputStream = request.InputStream;

            using (System.IO.FileStream fileStream = System.IO.File.OpenWrite(filePath))
            {
                inputStream.CopyTo(fileStream);
            }
        }
        completed = 0;

        if (partIndex.Equals(Convert.ToString(totalParts - 1))) // all chunks have arrived
        {
            mergeTempFiles(uploadedTemp, uploadedLocation, filename);
            completed = 1;

        }       
        context.Response.ContentType = "application/json";
        context.Response.Write("{\"success\":true, \"completed\": " + completed +"}");

    }

    public bool IsReusable
    {
        get { return true; }
    }

    public void mergeTempFiles(string pathOrigin, string pathToSave, string filename)
    {
        string[] tmpfiles = System.IO.Directory.GetFiles(pathOrigin, "*.tmp");

        if (!System.IO.Directory.Exists(pathToSave))
        {
            System.IO.Directory.CreateDirectory(pathToSave);
        }
        System.IO.FileStream outPutFile = new System.IO.FileStream(pathToSave + filename, System.IO.FileMode.Create, System.IO.FileAccess.Write);
        foreach (string tempFile in tmpfiles)
        {   
            int bytesRead = 0;
            byte[] buffer = new byte[1024];
            System.IO.FileStream inputTempFile = new System.IO.FileStream(tempFile, System.IO.FileMode.OpenOrCreate, System.IO.FileAccess.Read);
            while ((bytesRead = inputTempFile.Read(buffer, 0, 1024)) > 0)
                outPutFile.Write(buffer, 0, bytesRead);
            inputTempFile.Close();
            //System.IO.File.Delete(tempFile);
        }
        outPutFile.Close();
    }    
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T15:59:27.577

问题在于我为请求对象中的各个块解析输入流（在我的 c# 处理程序类中）的方式，

我读它的方式：

```
System.IO.Stream inputStream = request.InputStream; 
```

它应该被阅读的方式：

```
System.IO.Stream inputStream = request.Files[0].InputStream; 
```

[这个 google groups post](https://groups.google.com/forum/#!msg/fineuploader/x0TaDx4mkDo/ldhY9v3NrJ4J)建议第二种方式应该只在 IE 中完成，第一种方式在所有其他浏览器中完成，但我发现在所有浏览器中都是这样的。

# vba - 如何在 LightSwitch/C# 中实现通用周期选择控件

> ID：15775711
> 
> 赞同：0
> 
> 时间：2013-04-02T22:40:42.387
> 
> 标签：vba, visual-studio-lightswitch

我正在为一些好的 ole 客户端 Access\VBA 应用程序寻找继承人。LightSwitch 确实令人印象深刻，我决定认真尝试一下。我想要重现的东西之一是一个通用菜单，它允许自动选择周期并随后过滤日期数据。由于我们的大多数数据屏幕都包含日期，因此这种过滤工具是必须的：它使标准期间选择变得容易，然后可以在保持相同选择期间的屏幕之间切换（当然它比标准日期选择器更有效） .

它已被证明非常有效，并且是我们用户的最爱之一。

VBA\existing 菜单由 6 个组合控件组成，其中：

1.  第一个列表框，标准周期当前\上一个\下个月\三个月\年等
2.  减号和加号控件，自动将 1 个单位添加到 from\to 日期（单位取决于列表框中的值：如果选择了“month”，单击“+”将向 from\to 添加 1 个月到日期）
3.  一个“从”和一个“到”日期框，我可以在其中看到选定的日期和\或手动更新它们的值
4.  “刷新”按钮

![一般时期菜单](https://i.stack.imgur.com/qYo5d.png)

所以我不期待这里有一个完整的解决方案，但是，因为我绝对是 LightSwitch 的新手，并且仍然是 C# 初学者，所以我正在等待一些想法或建议。我想我必须创建一个自定义控件，但我必须承认我不知道从哪里开始。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:45:27.703

Lightswitch has it's own way of doing things and it's own language for things that may not be obvious for a beginner. I'm going to use standard Lightswitch names for things. If you don't understand what something is, just ask and I'll elaborate.

You can implement this control using a combination of 6 standard controls as you did before.

The first would be a [Choice List](http://msdn.microsoft.com/en-us/library/vstudio/ff852048.aspx), a static list of values that presents as an AutoCompleteBox (i.e. a drop down). You would then edit the `_Changed` method of the Local Property used to create the Choice List. Inside that method, you would create a switch/case to set a [TimeSpan](http://msdn.microsoft.com/en-us/library/system.timespan.aspx) type variable to the desired period.

The plus and minus would just be normal buttons. You would edit the `_Execute` methods of each to add/subtract the TimeSpan to/from the [DateTime](http://msdn.microsoft.com/en-us/library/system.datetime.aspx) type Local Properties that represent the From and To dates. You will need to take special care here and probably use some intermediate variables as [DateTime values are immutable](https://stackoverflow.com/questions/2737595/adding-a-timespan-to-a-given-datetime).

The From and To dates can just be Local Properties of the type Date or DateTime as mentioned above. This will create a standard Silverlight Date Picker control which is quite nice.

![date picker](https://i.stack.imgur.com/s7NHs.png)

The refresh would again just be a button that sets the Parameters of the [Filter Query](http://msdn.microsoft.com/en-us/library/vstudio/ee256728.aspx) that you would use to display the Grid Control holding your data. That sequence of events is well represented in [this question](https://stackoverflow.com/questions/12359107/binding-dropdown-to-column-values) only you would be binding the Date properties instead of an AutoCompleteBox (i.e. drop down).

Hopefully that made sense and those links should point you in the right direction. I would also recommend [Beth Massi's video series](http://blogs.msdn.com/b/bethmassi/archive/2011/12/01/beginning-lightswitch-getting-started.aspx?Redirected=truehttps://blogs.msdn.com/b/bethmassi/archive/2011/12/01/beginning-lightswitch-getting-started.aspx?Redirected=true) to get a good handle on the basic mechanics of a Lightswitch app. And you might want to consider making the application's code base in VB.NET. All the above still applies but the syntax may be slightly more familiar if you're coming from a VBA background.

# .net - 使用自定义委托与操作调用方法

> ID：15775712
> 
> 赞同：3
> 
> 时间：2013-04-02T22:40:42.760
> 
> 标签：.net, vb.net, invoke

我看到微软建议[在 InvokeRequired 模式中使用自定义委托](http://msdn.microsoft.com/en-us/library/ms171728%28v=vs.110%29.aspx)

但是我不明白为什么在做一些像设置控件属性这样简单的事情时，为什么不省去定义委托的麻烦。我指的是`Option 1`下面只使用委托`Action(Of String)`而不是自定义委托。

```
' Option 1

Private Sub setLabelWorkingText(ByVal [text] As String)
    If Me.lblWorking.InvokeRequired Then
        Me.Invoke(New Action(Of String)(AddressOf setLabelWorkingText), [text])
    Else
        Me.lblWorking.Text = [text]
    End If
End Sub

' Option 2

Private Delegate Sub setLabelWorkingTextDelegate(ByVal [text] As String)

Private Sub setLabelWorkingTextWithDel(ByVal [text] As String)
    If Me.lblWorking.InvokeRequired Then
        Me.Invoke(New setLabelWorkingTextDelegate(AddressOf setLabelWorkingTextWithDel), [text])
    Else
        Me.lblWorking.Text = [text]
    End If
End Sub 
```

我理解一个区别是不能使用 Action 和 Func 传递参数 ByRef，但自定义委托可以指定 ByRef 参数。两者之间还有其他区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T00:33:00.447

Action 本质上是一个通过泛型定义的自定义委托。我猜您链接到的模式中未指定它的原因是模式和 Action 委托是同时开发/发布的，并且开发模式和文档的人可能不熟悉 Action 泛型在发布时。您会注意到 Action 在框架的后续版本的示例和模式中更频繁地使用，因为它已被接受。

此外，关于您对 Action 和 Func 的 ByRef 参数的评论，这是正确的，但实现一个接受参数 ByRef 的自定义通用类 Action 类也很简单，如下所示：

```
Public Delegate Sub ActionByRef(Of T)(ByRef ref As T)

Sub Main()
    Dim sMyString As String = "Hello World"
    Dim actTrim As New ActionByRef(Of String)(AddressOf TrimFirst)
    actTrim.Invoke(sMyString)
    Console.WriteLine(sMyString) 'prints "ello World"
    Console.ReadLine()
End Sub

Sub TrimFirst(ByRef s As String)
    s = s.Substring(1)
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-15T00:34:04.453

`Action`与 a 相比，`Delegate`如果你能侥幸成功的话，写起来肯定更简单。

仅允许您“将`Action`方法作为参数传递，而无需显式声明自定义委托”。[来源](https://docs.microsoft.com/en-us/dotnet/api/system.action-1?view=netframework-4.8#remarks)

当你传递一个 lambda 函数时，我认为你在调用堆栈中再添加一行，但是嗯。

# javascript - 如何在函数中预先计算值查找

> ID：15775715
> 
> 赞同：3
> 
> 时间：2013-04-02T22:41:02.080
> 
> 标签：javascript, jquery

我正在尝试找出正确的语法来“预计算”要在下面的“withPrefix”函数中查找的属性值，以便我可以传递该函数并且它不依赖于 x 的当前值执行时间。

```
var a = { 
    one: 'First Name',
    two: 'Last Name'
};

var x = 'one';
var withPrefix = function(value) {
    return a[x] + ": " + value;
};

console.log(withPrefix); 
```

当然，这是一个人为的例子，真实的例子更复杂，但试图将其简化为最简单的情况。console.log 输出说：

```
function (value) {
    return a[x] + ": " + value;
} 
```

但我希望它是这样的：

```
function (value) {
    return a['one'] + ": " + value;
} 
```

我使用 jQuery 和 RequireJS。如果这些库中的任何一个对此有任何帮助，那将是一个可以接受的解决方案，但我怀疑有一种纯粹的 javascript 方式可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:46:24.043

您可以通过部分功能应用程序获得一些乐趣，并且[`bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)：

```
function masterFunc(x, value) {
    return a[x] + ": " + value;
}
var xValFunc = masterFunc.bind(null, 'one');
console.log(xValFunc('foo')); // First Name: foo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:15:46.613

如果我理解正确。你想让一个本地范围尝试这样的事情：

```
var withPrefix = (function(){
  //create a new scope
        /* all viables created here cant be seen by the souronding code */
  var x = "one"
    , a = 
      { one: "First Name"
      , two: "Last Name"
      }
  return function(value){
    // the withPrefix function
    return a[x] + ": " + value //make the string using the Local object a
  }
}())
withPrefix("foo") // returns: "First Name: foo"
console.log(a) // returns undefined
console.log(x) // returns undefined 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:58:18.750

那么，你想要的是一个闭包吗？为此使用工厂函数（生成函数的函数）：

```
function make_withPrefix (x) {
    return function (value) {
        return a[x] + ": " + value;
    }
} 
```

所以现在你可以生成适当的 withPrefix 函数：

```
var withPrefix_one = make_withPrefix('one');
var withPrefix_two = make_withPrefix('two');

withPrefix_one('Han');   // returns "First Name : Han"
withPrefix_two('Solo');  // returns "Second Name : Solo" 
```

只是普通的旧javascript。没有花哨的新功能，如 bind 或任何东西，也没有可怕的字符串引用地狱。从 Netscape Navigator 和 IE1 开始支持

# php - yelp 或评论网站的数据库架构是什么样的？

> ID：15775717
> 
> 赞同：0
> 
> 时间：2013-04-02T22:41:17.313
> 
> 标签：php, mysql, database-design, database-schema

我可以使用一些帮助来构建数据库。我目前有一个数据库和一个名为列表的表，其中包含有关每个组织的信息的 8 列（名称、联系人、地址...）。

接下来我想设置一个评论数据结构来存储和检索评论者信息（名称用户名，评论日期，评论......）。这些是我目前对这个问题的猜测......

1）每个组织的单独表格

2）在一张巨表中为每条评论者数据（比如每个企业 5 列）单独列？

3）每条数据一张表（所以一张表用于用户名，一张表用于评论......）？

第一个看起来很疯狂（因为如果你有 500 个实体，那么你就有 500 个表）。

当我运行我编写的要添加 200 个实体 * 5 条数据（1000 列）的 php 脚本时，第二个给我一个 mysql 错误。不太记得错误，比如 mysql: too many columns（当我查找时，参考资料说这是因为我添加了太多列）

第三个似乎这可能是正确的方法。

最后，我计划拥有大约 3000 个组织，加上我可能有的评论，每个组织可能有 20 个（估计）。

架构的这三个选项中哪一个看起来最合理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T02:46:22.123

查找第三范式以了解如何构建关系 dbms。

但是，您可能应该有几个表，每个表都有一个 ID

A) 带有组织名称等的组织表。

B) 引用组织 ID 的地址表（这样您就可以拥有一个组织的多个地址）

C) 带有对组织 ID 和用户 ID 的外键引用的审核表

D) 一个用户表，他们的密码可能是一个哈希值。

通过回溯组织 ID，您可以建立 1:MANY 关系，1 个组织可以有多个地址和评论。

从我看到的情况来看，您只需要大约 4 个表，如果要寻址的组织是 1:1 关系，您可以将地址放在组织表中，尽管这有点懒惰，以后可能会咬你。

您的评论表将包含您的所有评论，并且您将使用外键获取用户或组织的评论。例如“从 Table_Reviews WHERE Organization_id = 10 中选择 *”。如果您在组织表中查找 ID=10，您就会知道该评论是针对谁的。

# linux - 将手册页指向不同的位置

> ID：15775718
> 
> 赞同：3
> 
> 时间：2013-04-02T22:41:18.517
> 
> 标签：linux, unix, command-line, manpage

在我的环境中，我正在安装一个不同于 openSSH 的 SSH 服务器。例如，当我发出`man ssh`命令时，我希望它指向新的 ssh 服务器手册页，而不是 openssh 手册页。到目前为止，我看到的唯一方法是将所有手册页从新的 ssh 服务器物理复制到`/usr/local/man`目录中。有谁知道一种更简单/更清洁的方法来做到这一点，例如配置文件来指向 man 来查看我将提供目录的新 man 条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:55:35.510

一些`man`实现将通过在相对于二进制文件的位置搜索它们来找到手册页。因此，如果您的 PATH 设置为在 中找到程序，那么将`foo`在 中查找相应的联机帮助页。`/wibble/woot/bin/foo``man``/wibble/woot/bin/../share/man/man1/foo.1`

使用的实际路径非常可配置，因此请查看本地`man(1)`手册页的详细信息。

该搜索算法可能包含对 的引用`$MANPATH`，因此这将为您提供控制搜索的进一步方法。

# r - 测试连接的问题

> ID：15775719
> 
> 赞同：5
> 
> 时间：2013-04-02T22:41:28.037
> 
> 标签：r, testthat

任何人都知道为什么在函数`textConnection`内部使用`test_that`不能正常工作？

即如果我直接运行以下代码，一切正常：

```
txt <- ""
con <- textConnection("txt", "w")  
writeLines("test data", con)
close(con)

expect_equal(txt, "test data")  #Works 
```

然而，如果我将它嵌套在一个`test_that`函数中，它就不起作用，并且我得到一个空的 txt 变量来`expect_equal`调用。

```
test_that("connection will work", {

  txt <- ""
  con <- textConnection("txt", "w")  
  writeLines("test data", con)
  close(con)

  expect_equal(txt, "test data")  
}) #Fails 
```

**会话信息**

```
> sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: x86_64-w64-mingw32/x64 (64-bit)

locale:
  [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252    LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C                           LC_TIME=English_United States.1252    

attached base packages:
  [1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
  [1] testthat_0.7  RODProt_0.1.1 rjson_0.2.12 

loaded via a namespace (and not attached):
  [1] evaluate_0.4.2 plyr_1.8       stringr_0.6.1  tools_2.15.2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T22:54:06.903

试试这个：

```
test_that("connection will work", {

  txt <- ""
  con <- textConnection("txt", "w",local = TRUE)  
  writeLines("test data", con)
  close(con)
  expect_equal(txt, "test data")  
}) 
```

我的直觉是，`test_that`在单独的环境中评估代码的事实与问题有关，然后检查`textConnection`.

# mysql - 合并两个具有相同结构的数据库 [MYSQL]

> ID：15775721
> 
> 赞同：1
> 
> 时间：2013-04-02T22:41:31.217
> 
> 标签：mysql, phpmyadmin

我刚刚让我的网站被黑了，他们能够对我当前的数据库造成一些损害。

无论如何，我有几天前的备份。问题是当前数据库还有几千个帖子和线程/用户。

我只是想知道我怎么可能去合并这两个数据库？

这两个数据库具有确切的结构，我希望备份覆盖当前数据库中的任何记录，只是我希望当前数据库填充任何新记录，如帖子、线程、用户等。

我知道您可以合并两个表，如果它们具有确切的结构，但是两个具有相同结构的数据库呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T22:52:07.983

我假设你有一个 schema`s1`和一个 schema `s2`。

要将 s1 中表的所有行插入 s2 中的表中，同时覆盖现有行，您可以使用：

```
REPLACE INTO s2.table_name
SELECT * FROM s1.table_name; 
```

如果您不想触及现有线路：

```
INSERT INTO s2.table_name
SELECT * FROM s1.table_name
ON DUPLICATE KEY IGNORE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-29T11:55:27.293

有一些方法可以做到这一点：1.) 使用命令行工具，如[schema Sync](http://schemasync.org/)和[mysql diff](https://bitbucket.org/stepancheg/mysql-diff/wiki/Home)

2.) 或使用 SQLyog

在此处了解更多信息 [http://blog.webyog.com/2012/10/16/so-how-do-you-sync-your-database-schema/](http://blog.webyog.com/2012/10/16/so-how-do-you-sync-your-database-schema/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-01T17:48:55.947

以我的经验 ON DUPLICATE KEY IGNORE 不起作用。相反，我发现

插入忽略 ta2_table 选择 * FROM ta1_table;

像魅力一样工作

# python - 使用支持向量回归的时间序列预测

> ID：15775727
> 
> 赞同：8
> 
> 时间：2013-04-02T22:41:52.580
> 
> 标签：python, time-series, regression, prediction, svm

我一直在尝试使用 python 语言中的支持向量回归来实现时间序列预测工具。我使用 scikit-learn 的 SVR 模块进行非线性支持向量回归。但是我对未来事件的预测有严重的问题。回归线非常适合原始函数（来自已知数据），但是一旦我想预测未来的步骤，它就会从最后一个已知步骤返回值。

我的代码如下所示：

```
import numpy as np
from matplotlib import pyplot as plt
from sklearn.svm import SVR

X = np.arange(0,100)
Y = np.sin(X)

svr_rbf = SVR(kernel='rbf', C=1e5, gamma=1e5)
y_rbf = svr_rbf.fit(X[:-10, np.newaxis], Y[:-10]).predict(X[:, np.newaxis])

figure = plt.figure()
tick_plot = figure.add_subplot(1, 1, 1)
tick_plot.plot(X, Y, label='data', color='green', linestyle='-')
tick_plot.axvline(x=X[-10], alpha=0.2, color='gray')
tick_plot.plot(X, y_rbf, label='data', color='blue', linestyle='--')
plt.show() 
```

有任何想法吗？
在此先感谢，汤姆

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T03:18:47.440

您并没有真正进行时间序列预测。您试图`Y`从 的单个元素中预测 的每个元素`X`，这意味着您只是在解决标准的核化回归问题。

另一个问题是在向量范围内计算 RBF 内核时`[[0],[1],[2],...]`，您将沿着内核矩阵的对角线得到一个正值带，而远离对角线的值将接近于零。内核矩阵的测试集部分远离对角线，因此非常接近零，这将导致所有 SVR 预测都接近偏差项。

对于时间序列预测，我建议将训练测试集构建为

```
 x[0]=Y[0:K]; y[0]=Y[K]
 x[1]=Y[1:K+1]; y[1]=Y[K+1]
 ... 
```

也就是说，尝试从先前元素的窗口中预测序列的未来元素。

# asp-classic - 使用与 asp classic 相同的表单从数据库中填充文本框

> ID：15775728
> 
> 赞同：1
> 
> 时间：2013-04-02T22:42:03.483
> 
> 标签：asp-classic, vbscript

任何人都知道是否有一种方法可以使用经典 asp 从 ms access 数据库中填充原始表单文本框。找到记录后，我希望字段填充表单的文本框，我不想创建新的文本框。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:09:32.657

伙计，你让我挖掘了一个有 10 年历史的项目 :-)

我对您的问题的理解如下：您有一个经典的 ASP 网页，该网页包含一些表单字段。在服务器端，您搜索一些记录，然后您希望在页面的字段中显示找到的数据。对？

这是我很久以前所做的（片段）：

```
Set rstSample = myDB.execute("SELECT * FROM tblSample WHERE tblSample.sample_id = 1;"
If rstSample.BOF = False Then
  If Len(rstSample("sample_name")) > 0 Then v_name = Server.HTMLEncode(rstSample("sample_name"))
End If
rstSample.close

...

<input type="text" name="myName" value="<%=v_name%>"> 
```

# java - 在 OpenCSV 中使用 captureHeader

> ID：15775729
> 
> 赞同：3
> 
> 时间：2013-04-02T22:42:14.660
> 
> 标签：java, opencsv

也许我不明白 OpenCSV 中的方法 captureHeader() 的用途，但该方法会抓取 CSV 文件的标题并将受保护的“标题”变量设置为这些值的字符串数组。

但是，您如何访问这些标头值以尝试将 csv 中的“first_name”匹配到您的 Bean 中的“firstName”？这个想法是在实际解析完整的 csv 文件之前从这些标头创建 MappingStrategy 。但是 captureHeader() 是无效的并且“标题”受到保护？

[OpenCSV API](http://opencsv.sourceforge.net/apidocs/au/com/bytecode/opencsv/bean/HeaderColumnNameMappingStrategy.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T10:01:24.727

您需要实现该`captureHeader`方法并将其存储`string[] header`在列表中。您现在可以遍历此列表并根据您的 bean 进行映射。

例子：

```
public void captureHeader(CSVReader reader){
    super.captureHeader(reader);
    List<String> csvHeader = Arrays.asList(header);
    //iterate through the list
    } 
```

您也可以`HeaderColumnNameTranslateMappingStrategy`用于您的任务。请参阅我的回答[here](https://stackoverflow.com/questions/13505653/opencsv-how-to-map-selected-columns-to-java-bean-regardless-of-order/14976689#14976689)。

# ios - iOS 视图类似于添加/编辑联系人

> ID：15775730
> 
> 赞同：2
> 
> 时间：2013-04-02T22:42:17.333
> 
> 标签：ios, objective-c, cocoa-touch

我正在尝试创建一个类似于在 iOS 中添加/编辑联系人的视图，并且正在发生一些事情，我不确定它们是如何实现的。非常感谢任何有助于理解的帮助。

1.  对于联系人中的每个部分，即姓名、电话号码、电子邮件等，它们是各自的 tableview 还是更大的 tableview 中的这些部分？

2.  添加或编辑联系人时单击完成时，未使用的表格视图单元格消失。这是使用`deleteRowsAtIndexPaths:withRowAnimation:`还是我没有找到隐藏方法？如果是使用那个方法，那么当点击编辑联系人按钮时，视图是如何带回这些未使用的tableview单元格的呢？

3.  在编辑联系人时单击表格视图单元格中的单元格时，您可以更改文本。这是表格视图单元格中的文本字段还是实际上修改了表格视图单元格的标签？

我不是在寻找任何特定的代码，作为一个相当新的程序员，我只是想了解实现这些功能的策略/最佳方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:01:42.263

1.  我尝试了很多不同的方法来实现它。最简单的一个：子类 UITableViewCell 并覆盖`setFrame:`。请注意，这对于分组表很容易实现，但对于普通表则很难。在数据源`tableView:cellForRowAtIndexPath:`中为第一部分创建此自定义单元格的对象。对该部分的单元格使用另一个标识符，以便仅重新使用正确的单元格。

2.  是的，我假设。控制器有某种定义，在编辑模式下必须显示多少个单元格，以及多少个单元格实际用于某种信息。您可以轻松创建必须删除的 indexPaths 数组。

3.  我会`tableView:didSelectRowAtIndexPath:`通过 获取单元格`tableView:cellForRowAtIndexPath:`，隐藏标签并取消隐藏或添加文本字段并制作这个第一响应者来做到这一点。

* * *

1的代码。

*细胞*

```
@interface InsetCell : UITableViewCell
@property(nonatomic)CGFloat inset;
@end

@implementation InsetCell

- (void)setFrame:(CGRect)frame {
    CGFloat inset;
    if (_inset == 0) {
        inset = 70;  //default value
    } else {
        inset = _inset;
    }
    frame.origin.x += inset;        
    [super setFrame:frame];
}

-(void)setInset:(CGFloat)inset
{
    _inset = inset;
    [self setNeedsLayout];
}

@end 
```

* * *

使用类似代码的项目
![截图 insetcell](https://i.stack.imgur.com/EuJJR.png)

# jquery - Jquery Validate & IE 对象预期错误

> ID：15775734
> 
> 赞同：0
> 
> 时间：2013-04-02T22:42:30.403
> 
> 标签：jquery, ajax, jquery-validate

我最近在我的用户登录页面上实现了 jquery validate。代码在 FF 和 Chrome 中运行良好，但在 IE 8 及更高版本中运行良好。

我无法弄清楚问题是什么，所以我终于屈服并决定寻求帮助

这是返回的 json -

```
{"REDIRECT_URL":"","ERR_MSG":"Username or password is invalid","ERR_NUM":12} 
```

请参阅下面的提交方法，IE 在指定 url 参数的行上的 $.ajax 调用内失败。错误是`SCRIPT438: Object doesn't support this property or method`

提交处理程序：

```
function(form) {           
    if($("#user_login").valid()){
        var isValidLogin = false;
        var user = $("#username").val();
        var pwd = $("#user_password").val();

        $.ajax({
            type: 'GET',
            contentType: 'application/json; charset=utf-8',
            url: 'data_handler.php',
            data: "user=" + user + "&pwd=" + pwd,
            dataType: 'json',
            success: function (data) {
                redirect_url = data.REDIRECT_URL;
                err_msg = data.ERR_MSG;

                if(err_msg == ""){
                    location.href = redirect_url;
                            isValidLogin = true;
                }
                else{
                    if(redirect_url != ""){
                        location.href = redirect_url;
                    }
                    else{
                        $('#err_alert').show(); 
                        $('#err_alert').html(err_msg);
                    }

                    isValidLogin = false;
                }
            },
            error:function(){ }
        });

    }
    else{
        return false;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:10:24.037

错误的行号会有所帮助。但无论如何你应该声明你的变量：

```
 success: function (data) {
                var redirect_url = data.REDIRECT_URL;
                var err_msg = data.ERR_MSG; 
```

可能发生的是返回的 json 不包含您提到的属性 REDIRECT_URL 和/或 ERR_MSG。

您可以通过直接导航到 data_handler.php?user=youruser&pwd=yourpwd 来测试 json 是否正确

Chrome 和 FF 也可能在控制台中显示错误。

**更新**如果错误在这一行：

```
data: "user=" + user + "&pwd=" + pwd, 
```

也许你应该在上面设置一个变量来测试它。IE。：

```
var info = "user=" + user + "&pwd=" + pwd; 
```

结合：

```
data: info, 
```

# php - 如何在 PHP 中以非常特定的顺序对数组进行排序

> ID：15775740
> 
> 赞同：0
> 
> 时间：2013-04-02T22:42:45.283
> 
> 标签：php, sorting

假设我正在尝试对一个名为 $off 的数组进行排序，看起来像这样

```
Array
(
    [0] => Array
        (
            [name] => alistair
            [id] => 344
        )
    [1] => Array
        (
            [name] => barney
            [id] => 333
        )
    [2] => Array
        (
            [name] => carlos
            [id] => 100
        ) 
```

我想对其进行排序，使其始终按以下顺序排列：“carlos, alistair, barney”，并且如果名称不在排序中，则它不会在数组中。我知道我必须使用 usort，但我不知道如何做 cmp。我也在使用子 php5 版本，所以我不能使用匿名函数。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:53:46.923

```
$arr = array(
    array('name' => 'alistair', 'id' => 344),
    array('name' => 'barney', 'id' => 333),
    array('name' => 'carlos', 'id' => 100),
);

$order = array(1 => 'carlos', 'alistair', 'barney');

usort($arr, function($a, $b) use($order) {
    $a_index = array_search($a['name'], $order);
    if (!$a_index) {
        $a_index = 999;
    }

    $b_index = array_search($b['name'], $order);
    if (!$b_index) {
        $b_index = 999;
    }

    return $a_index - $b_index;
});

var_dump($arr); 
```

以 php4 友好的方式也是如此：

```
$arr = array(
    array('name' => 'alistair', 'id' => 344),
    array('name' => 'barney', 'id' => 333),
    array('name' => 'carlos', 'id' => 100),
);

usort($arr, 'sorting_function');

function sorting_function($a, $b)
{
    $order = array(1 => 'carlos', 'alistair', 'barney');

    $a_index = array_search($a['name'], $order);
    if (!$a_index) {
        $a_index = 999;
    }

    $b_index = array_search($b['name'], $order);
    if (!$b_index) {
        $b_index = 999;
    }

    return $a_index - $b_index;
}

var_dump($arr); 
```

# google-maps-api-3 - 从 Google Maps Mouseover 获取 pageX 和 pageY

> ID：15775741
> 
> 赞同：0
> 
> 时间：2013-04-02T22:42:48.340
> 
> 标签：google-maps-api-3

添加侦听器`mousemove`并检查事件会`console.log`产生一个对象：

`{qE {latLng: Q, Sa: MouseEvent, pixel: undefined, ca: undefined, ...}}`

我正在寻找提取对象的`pageX`和`pageY`属性`{Sa: MouseEvent}`。

我知道我可以使用`event.Sa.pageX`和访问它们`event.Sa.pageY`。但是，据我所知，该`Sa`对象没有在任何地方记录。还有另一种更强大的访问方式`pageX`吗`pageY`？我只是担心它将来会破裂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:23:31.283

pageX 和 pageY 是 DOM 事件的属性，看起来您观察到的事件是 a [`google.maps.MouseEvent`](https://developers.google.com/maps/documentation/javascript/reference?hl=en#MouseEvent)，它不会公开请求的属性。

改为`addDomListener`观察 DOM 事件（包含地图的节点）：

```
google.maps.event.addDomListener(map.getDiv(), 'mouseover', function(e){
   console.log(e.pageX+','+e.pageY);
}); 
```

# iphone - 处理 UITableViewCells 中的按钮

> ID：15775743
> 
> 赞同：0
> 
> 时间：2013-04-02T22:42:51.540
> 
> 标签：iphone, ios, ipad, uitableview

我有一个 UITableView 从笔尖加载单元格。在每个表格视图单元格上，有两个按钮。点击按钮时，我需要更新包含表格视图的视图中的其他字段。

过去，我在表格视图单元格上使用了一个委托来回调视图控制器，告诉它点击了哪个按钮并使用单元格上的标签来查找单元格的索引。我目前面临的问题是，这种行为在我的应用程序中的多个地方发生，并且到处的委托模式可能会很快变得混乱。

当点击特定单元格上的按钮时，是否有更好的方法向 tableview 的父视图控制器发送消息？我需要知道点击了哪个单元格以及点击了单元格上的哪个按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:02:55.957

是的，更好的方法是让你的控制器成为按钮动作方法的目标。您仍然需要使用标签来获取按钮所在单元格的索引路径。您可以在 IB 或 cellForRowAtIndexPath 中连接操作方法。

# windows-8 - Windows 8 与 sysinternals 桌面实用程序不兼容

> ID：15775744
> 
> 赞同：3
> 
> 时间：2013-04-02T22:42:52.260
> 
> 标签：windows-8, internals, sysinternals

在谷歌搜索了大约一个半小时后，我一直无法找到任何关于开始菜单和 Windows 8 风格应用程序如何在幕后工作的确切信息。我的印象是 Windows 8 风格的应用程序是创建全屏窗口的进程，而 Windows 8 开始菜单是由 explorer.exe 以几乎相同的方式创建的。但是 Windows 8 与 1.x 版 Sysinternal 的桌面实用程序之间存在不兼容，我不得不想象正在发生更复杂的事情。

但是，在 Spy++ 中，每个 Windows 8 样式应用程序都显示为带有样式集的标准窗口`WS_EX_TOPMOST`，假设它们没有什么特别之处，这是有道理的。关于开始菜单，它显示`ImmersiveLauncher`为由`explorer.exe`. 也许探索者已经厌恶拥有多个实例......

使用旧版本的 SysInternal 桌面，附加桌面中的资源管理器实例工作正常，但不加载固定项目，也不加载桌面背景和图标。

`explorer.exe`当多个副本在不同的桌面上运行时，是否有任何文档说明为什么 Windows 8 的行为与过去版本不同？

（这纯粹是出于好奇）

（是的，我知道有一个支持 Windows 8 的[Desktops 2.0](http://technet.microsoft.com/en-us/sysinternals/cc817881.aspx)版本，但它使用了一些有趣的解决方法，比如在按下 windows 键时切换到原始桌面。它似乎也会在桌面时触发 explorer.exe 中的一些初始化首次加载，而不是简单地启动进程。）

# android - Mediaplayer 在线播放 MP3 文件

> ID：15775745
> 
> 赞同：8
> 
> 时间：2013-04-02T22:42:55.403
> 
> 标签：android, stream, android-music-player

我有一个 Android 应用程序可以流式传输 MP3 文件并在播放器中播放此文件，但问题是`mediaPlayer.prepare();`需要很长时间缓冲并且应用程序冻结，所以我尝试使用`prepareAsync();`，但使用此功能我无法让播放器播放下一个文件。

它只是在线播放一个文件；如果我需要播放另一个文件，我必须在播放结束时关闭并重新启动活动。这是我的代码：

```
public void playMp3(String _link)
{
mediaPlayer.setOnPreparedListener(new OnPreparedListener() {
    public void onPrepared(MediaPlayer mp) {
        if(!mediaPlayer.isPlaying()){
        mediaPlayer.start();
        Progressbar.setVisibility(View.INVISIBLE);
        play.setVisibility(View.GONE);
        stop.setVisibility(View.VISIBLE);
        songProgressBar.setProgress(0);
        songProgressBar.setMax(100);
        }
        updateProgressBar();      
    }
});
mediaPlayer.setOnCompletionListener(new OnCompletionListener() {

    @Override
    public void onCompletion(MediaPlayer mp) {
        // TODO Auto-generated method stub
        mediaPlayer.reset();
        songProgressBar.setProgress(0);
        songProgressBar.setSecondaryProgress(0);
        play.setVisibility(View.VISIBLE);
        stop.setVisibility(View.GONE);
        link = "http://server11.mp3quran.net/hawashi/002.mp3";
        playMp3(link);

    }
});
mediaPlayer.setOnBufferingUpdateListener(new OnBufferingUpdateListener() {
    @Override
    public void onBufferingUpdate(MediaPlayer mp, int percent) {
       // Toast.makeText(getApplicationContext(), "n" + percent, Toast.LENGTH_LONG).show();
        songProgressBar.setSecondaryProgress(percent);

         if(percent==100)
         {
             Progressbar.setVisibility(View.INVISIBLE);

         }else if(percent > songProgressBar.getProgress())
         {
             Progressbar.setVisibility(View.INVISIBLE);
         }else
         {
             Progressbar.setVisibility(View.VISIBLE);
         }

    }
});

mediaPlayer.reset();
Progressbar.setVisibility(View.VISIBLE);
mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);

try {
    mediaPlayer.setDataSource(_link);
    //mediaPlayer.prepare(); // might take long! (for buffering, etc)   //@@
    mediaPlayer.prepareAsync();
} catch (IllegalArgumentException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (SecurityException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IllegalStateException e) {
    // TODO Auto-generated catch block///
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T23:14:59.510

实际上我不知道您的代码中的错误在哪里，但我会解释我是如何在我的应用程序中做到这一点的

```
public void playMp3(String _link){

                mediaPlayer.reset();
                Progressbar.setVisibility(View.VISIBLE);
                mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);

            try {
                mediaPlayer.setDataSource(_link);
                mediaPlayer.setOnBufferingUpdateListener(this);
                mediaPlayer.setOnPreparedListener(this);
                //mediaPlayer.prepare(); // might take long! (for buffering, etc)   //@@
                mediaPlayer.prepareAsync();
            } catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (SecurityException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block///
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } 
```

然后在你的类中实现 OnCompletionListener、OnPreparedListener 和 OnBufferingUpdateListener

```
public class PlayerActivity extends Activity implements OnCompletionListener, OnPreparedListener, OnBufferingUpdateListener{
.
.
. 
```

并实现所有方法

```
public void onPrepared(MediaPlayer mediaplayer) {
    if(!mediaPlayer.isPlaying()){
        mediaPlayer.start();
        Progressbar.setVisibility(View.INVISIBLE);
        play.setVisibility(View.GONE);
        stop.setVisibility(View.VISIBLE);
        songProgressBar.setProgress(0);
        songProgressBar.setMax(100);
        }
        updateProgressBar();      
}

@Override
public void onCompletion(MediaPlayer mediaPlayer) {
    //mediaPlayer.reset();
        songProgressBar.setProgress(0);
        songProgressBar.setSecondaryProgress(0);
        play.setVisibility(View.VISIBLE);
        stop.setVisibility(View.GONE);
        link = "http://server11.mp3quran.net/hawashi/002.mp3";
        playMp3(link);
}

@Override
public void onBufferingUpdate(MediaPlayer mp, int percent) {
     songProgressBar.setSecondaryProgress(percent);

         if(percent==100)
         {
             Progressbar.setVisibility(View.INVISIBLE);

         }else if(percent > songProgressBar.getProgress())
         {
             Progressbar.setVisibility(View.INVISIBLE);
         }else
         {
             Progressbar.setVisibility(View.VISIBLE);
         }
} 
```

我希望这对你有所帮助。

# android - 如何使用 gradle 构建文件从 Android 上的 org.apache 正确导入 HttpClient？

> ID：15775747
> 
> 赞同：38
> 
> 时间：2013-04-02T22:43:10.353
> 
> 标签：android, gradle, apache-httpclient-4.x

当我尝试运行“gradle build”时看到此错误

```
WARNING: Dependency org.apache.httpcomponents:httpclient:4.2.3 is ignored for the default configuration as it may be conflicting with the internal version provided by Android.
         In case of problem, please repackage with jarjar to change the class packages
:prepareFreeDebugDependencies
:compileFreeDebugAidl UP-TO-DATE
:generateFreeDebugBuildConfig UP-TO-DATE
:mergeFreeDebugAssets UP-TO-DATE
:compileFreeDebugRenderscript UP-TO-DATE
:mergeFreeDebugResources UP-TO-DATE
:processFreeDebugManifest UP-TO-DATE
:processFreeDebugResources UP-TO-DATE
:compileFreeDebug
/home/xrdawson/Projects/Foo/Bar/src/main/java/com/Foo/app/PixActivity.java:20: error: package org.apache.http.entity.mime does not exist
import org.apache.http.entity.mime.HttpMultipartMode;
                              ^ 
```

我的 build.gradle 的结尾如下所示：

```
 repositories {
        mavenCentral()
    }

    dependencies { 
        compile fileTree(dir: 'libs', include: '*.jar')
        compile "org.eclipse.mylyn.github:org.eclipse.egit.github.core:2.1.3"
        compile "com.madgag:markdownj-core:0.4.1"
//      compile "org.apache.httpcomponents:com.springsource.org.apache.httpcomponents.httpclient:4.2.1"
        compile 'org.apache.httpcomponents:httpclient:4.2.3'
        compile "com.google.android:support-v4:r6"
    } 
} 
```

为什么编译过程忽略了HttpClient，然后编译失败？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-04-03T10:03:26.820

我认为 httpclient 库不包含 mime 部分，它们在 httpmime 中。这是 httpclient 的传递依赖，但由于它被忽略，因此不会被考虑在内。

尝试添加此依赖项：

```
compile "org.apache.httpcomponents:httpmime:4.2.3" 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-03-13T12:52:19.420

添加`http-mime`为依赖项会导致`httpclient`被包含为传递依赖项，对我来说，这会导致与 OP 相同的警告。我不得不告诉 gradle 忽略传递依赖：

```
compile ('org.apache.httpcomponents:httpmime:4.3.5') {
    // avoid "is ignored for the default configuration X" warnings 
    // since httpclient is included in the android SDK.
    exclude group: 'org.apache.httpcomponents', module: 'httpclient'
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-09-12T22:54:12.527

对于 Android，现在有可用的 HttpClient 4.3.X 重新打包的 Maven 发行版

项目仓库：[https](https://github.com/smarek/httpclient-android)
://github.com/smarek/httpclient-android Maven 标签：`cz.msebera.android:httpclient:4.3.+`
发布到 Maven 中央仓库

其中 4.3.3 版本包括 HttpCore、HttpClient、HttpClient-Cache 和 HttpMime（都是相同的版本）

免责声明：我是该项目的作者

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-12-08T10:05:46.493

除此之外，如果您的 compileSdkVersion 为 19（在我的情况下），我通过使用此解决了问题

```
compile ('org.apache.httpcomponents:httpmime:4.3'){
    exclude group: 'org.apache.httpcomponents', module: 'httpclient'
}
compile ('org.apache.httpcomponents:httpcore:4.4.1'){
    exclude group: 'org.apache.httpcomponents', module: 'httpclient'
}
compile 'commons-io:commons-io:1.3.2' 
```

否则，如果您的 compileSdkVersion 为 23，则使用

```
android {
useLibrary 'org.apache.http.legacy'
packagingOptions {
    exclude 'META-INF/DEPENDENCIES'
    exclude 'META-INF/NOTICE'
    exclude 'META-INF/LICENSE'
    exclude 'META-INF/LICENSE.txt'
    exclude 'META-INF/NOTICE.txt'
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-03T18:01:55.387

因为官方的 Android API 包含 httpclient，我们删除了对 httpclient 的所有依赖，包括它的传递依赖。

如果你真的想使用 httpclient，我会用 jarjar 重新打包它，重命名包并改用它。

至于 httpmime，它看起来实际上不在 android.jar 中，因此我们可以避免将其过滤掉，但现在您必须手动添加它。

我们可能希望在构建系统进入 1.0 之前对其进行调整

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-03T07:08:24.310

只需将其添加到 build.gradle(Module: app) 文件中：

```
dependencies {
...
   implementation "org.apache.httpcomponents:httpmime:4.5.6"
} 
```

# google-profiles-api - 如何获取我的 Google Apps 域中用户的联系人？

> ID：15775752
> 
> 赞同：2
> 
> 时间：2013-04-02T22:43:36.867
> 
> 标签：google-profiles-api

这是设置代码（我使用的是 Powershell，因为它通常很方便）

```
$a1= Add-Type -Path "D:\Google2.1\Google.GData.Client.dll" -passthru
$a2= Add-Type -Path "D:\Google2.1\Google.GData.Apps.dll" -passthru
$a3= Add-Type -Path "D:\Google2.1\Google.GData.Contacts.dll" -passthru
$a4= Add-Type -Path "D:\Google2.1\Google.GData.Extensions.dll" -passthru

$reqSet = New-Object Google.GData.Client.RequestSettings("testApp", $config.admin, $config.password)
$reqSet.AutoPaging = $true

$contReq = New-Object Google.Contacts.ContactsRequest($reqSet) 
```

所以，现在我尝试检索联系人：

```
$contReq.GetContacts() 
```

这有效......并给了我我的联系人（作为域超级管理员）。凉爽的

```
$contReq.GetContacts("arbitraryuser@mydomain.com") 
```

这给了我一个错误

```
 format-default : Execution of request failed: https://www.google.com/m8/feeds/contacts/arbitraryuser@mydomain.com/full 
```

我确实得到了一个附加的 GDataLoggingRequestFactory 因子来记录请求，并且只是指出了一个 401 错误，没有详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-25T21:52:47.953

Question starts to be old, but since i'm working on a project like this ...

I'm using the latest [.NET client library distribution](https://code.google.com/p/google-gdata/downloads/list)

Here's a sample of PS code that works :

```
$a1 = Add-Type -Path "C:\Program Files (x86)\Google\Google Data API SDK\Redist\Google.GData.Client.dll" -passthru

$a2 = Add-Type -Path "C:\Program Files (x86)\Google\Google Data API SDK\Redist\Google.GData.Contacts.dll" -passthru

$a3 = Add-Type -Path "C:\Program Files (x86)\Google\Google Data API SDK\Redist\Google.GData.Extensions.dll" -passthru

$Settings = New-Object Google.GData.Client.RequestSettings( "MyApp", "mybelovedtrashbox@gmail.com", "mypassword" )

$reqSet = New-Object Google.Contacts.ContactsRequest( $Settings )

$Contacts = $reqSet.GetContacts()
#loop version
foreach( $Contact in $Contacts.Entries ){
    $Contact.PrimaryEmail.Address
}

#selection version
$user = $Contacts.Entries |? { $_.PrimaryEmail.Address -eq "john.doe@gmail.com" }
$user.Title 
```

Hope this helps ...

I'm working on code that would allow to update my gmail contacts from outlook contacts, let me know if you need intails ... :)

# c# - MVC 中的 Unity DI 有什么好处？

> ID：15775755
> 
> 赞同：3
> 
> 时间：2013-04-02T22:43:53.683
> 
> 标签：c#, asp.net-mvc, unity-container

我对 Unity 和 IoC 有点陌生，但对 MVC 不熟悉。我一直在阅读和阅读有关将 Unity 与 MVC 结合使用的信息，而我一直看到的唯一真正有用的东西是能够通过控制器获得免费的 DI。

从这里开始：

```
 public HomeController() : this(new UserRepository())
    {
    }

    public HomeController(IUserRepository userRepository)
    {
        this.UserRepository = userRepository;
    } 
```

对此：

```
 public HomeController(IUserRepository userRepository)
    {
        this.UserRepository = userRepository;
    } 
```

基本上，允许我删除无参数构造函数。这很棒，而且我肯定会实现它，但对于所有关于 IoC 库的炒作来说，这似乎并不是那么好。使用 Unity 作为服务定位器的方式听起来很有吸引力，但许多人会认为这是一种反模式。

所以我的问题是，在服务定位问题和视图和过滤器的一些 DI 机会的情况下，我从使用 Unity 中还有什么收获吗？我只是想确保我不会错过一些美妙的东西，比如对所有类构造函数的免费 DI 支持。

编辑：

我了解将 Unity DI 与 MVC 控制器一起使用背后的可测试性目的。但我所要做的就是添加一个额外的小构造函数，nix Unity，然后我就可以进行同样的 UnitTest。当替代方案更简单时，注册存储库类型和拥有自定义控制器工厂的巨大好处在哪里？另一种选择是原生 DI。我想我真的想知道 Unity（或任何 IoC 库）除了不好的服务定位之外还有什么好处。免费的 Controller DI 真的是我从 Unity 获得的唯一东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:21:21.803

关于为什么 Service Locator 被认为是不好的（某些人），您可以阅读[Mark Seeman 的这篇博文](http://blog.ploeh.dk/2010/02/03/ServiceLocatorisanAnti-Pattern/)。

回答你的问题`What is so good in Unity`我可以说，除了所有的可测试性、松散耦合和其他每个人都在谈论的等等，你可以使用像**[Unity 的拦截](http://msdn.microsoft.com/en-us/library/ff660891%28v=pandp.20%29.aspx)**这样的很棒的功能，它允许做一些[类似 AOP 的](http://en.wikipedia.org/wiki/Aspect-oriented_programming)事情。我在最近的一些项目中使用过它并且非常喜欢它。强力推荐！

ps 似乎`Castle Windsor`DI 容器也具有类似的功能（称为拦截器）。其他容器 - 不确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T23:13:35.363

一个好的 IoC 容器不仅会为您创建具体的类，它还会检查该类型与其他类型之间的耦合。如果有其他依赖项，它会解析它们并创建所有需要的类的实例。

你可以做一些花哨的事情，比如条件绑定。这是一个使用 Ninject（我首选的 IoC）的示例：

```
ninjectKernel.Bind<IValueCalculator>().To<LinqValueCalculator>();

ninjectKernel.Bind<IValueCalculator>().To<IterativeValueCalculator().WhenInjectedInto<LimitShoppingCart>(); 
```

ninject 在这里所做的是在注入 LimitShoppingCart 时创建一个 IterativeValueCalculator 实例，并为任何其他注入创建一个 LinqValueCalulator 实例。

最大的好处是关注点分离（解耦）和可测试性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T23:41:15.193

除了测试（这是一个巨大的好处，不应低估），依赖注入允许：

**可维护性**：通过一次更改更改代码行为的能力。

如果您决定更改在不依赖注入的情况下跨所有控制器/服务等检索用户的类，则需要更新每个构造函数以及正在创建的任何其他随机新实例，前提是您记住每个实例的位置。DI 允许您更改一个定义，然后在所有实现中使用该定义。

[范围](https://github.com/ninject/ninject/wiki/Object-Scopes)：通过一行代码，您可以更改您的实现以创建一个单例，一个仅在每个新 Web 请求或每个新线程上创建的类

**可读性**：依赖注入的使用意味着你所有的具体类都定义在一个地方。作为进入项目的开发人员，我可以快速轻松地准确查看哪些具体类映射到哪些接口，并且知道没有隐藏的实现。这意味着我不仅可以更好地阅读代码，而且使我有信心根据代码进行开发

**设计**：我相信使用依赖注入有助于创建设计良好的代码。你自动编码到接口，你的代码变得更干净，因为你没有奇怪的代码块来帮助你测试

让我们不要忘记...

**测试**：测试是巨大的！依赖注入允许您测试您的代码，而无需专门为测试编写代码。好的，您可以创建一个新的构造函数，但是阻止其他任何人使用该构造函数来实现它不打算用于的目的。如果另一个开发人员在六个月后出现并将生产逻辑添加到您的“测试”构造函数中会怎样。好的，所以你可以做到，`internal`但生产代码仍然可以使用它。为什么要给他们选择权。

我在 IoC 框架方面的经验主要围绕着[Ninject](http://www.ninject.org/)。因此，以上内容基于我对 Ninject 的了解，但是相同的原则在其他框架中应该保持相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T22:48:13.990

主要的一点是你在某处有一个映射，它指定了 IUserRepository 的具体类型。您可能喜欢这样的原因是您可以创建一个 UnitTest 来指定 IUserRepository 的模拟版本并执行您的测试，而无需更改控制器中的任何内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T22:54:11.160

主要是可测试性，但我建议看看 Ninject，它与 MVC 配合得很好。要获得 IOC 的全部好处，您应该将其与 Moq 或类似的模拟框架结合起来。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T23:10:15.303

除了可测试性之外，我认为您还可以添加可扩展性作为优势之一。软件开发的最佳实践之一是“使用抽象，而不是实现”，虽然您可以通过多种方式做到这一点，但 Unity 提供了一种非常可扩展且简单的方法来实现这一点。通过使用它，您将创建抽象来定义您的组件必须遵守的合同。假设您想完全更改您的应用程序当前使用的存储库。使用 DI，您只需“交换”组件，而无需更改应用程序上的一行代码。如果您使用硬引用，您可能需要更改和重新编译您的应用程序，因为它外部的组件（在不同的层中）

因此，恕我直言，底线是，使用 DI 可以帮助您在应用程序中拥有可插拔组件并拥有[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)应用程序设计

# python - 如何将变量文件路径传递给位于 PYTHONPATH 上的 Robot Framework？

> ID：15775758
> 
> 赞同：1
> 
> 时间：2013-04-02T22:43:57.023
> 
> 标签：python, classpath, tomcat7, pythonpath, robotframework

环境：Robot Framework 2.7.5（Java1.6.0_21 上的 Jython 2.5.2）Tomcat 7.0.32

你好，

我正在使用嵌入在 Java Web 应用程序中的 RF，并且在将 --variablefile 参数传递到 RobotRunner API 时遇到问题。

根据用户指南，“类似于资源文件，导入的变量文件的路径被认为是相对于导入文件所在的目录，如果找不到，则从 PYTHONPATH 中的目录中搜索”。我的变量文件位于 /my/server/apache-tomcat-7.0.32/webapps/myapp/WEB-INF/lib/Lib 上，到目前为止，我已经能够调用一个侦听器接口，将其放置在 PYTHONPATH 或CLASSPATH，但显然没有找到变量文件，除非只使用它的绝对路径。

```
PYTHONPATH:
    /my/server/apache-tomcat-7.0.32/webapps/myapp/WEB-INF/lib/robotframework-2.7.5.jar/Lib/robot/libraries
    /my/server/apache-tomcat-7.0.32/webapps/myapp/WEB-INF/lib/robotframework-2.7.5.jar/Lib
    /my/server/apache-tomcat-7.0.32/webapps/myapp/WEB-INF/lib/Lib
    __classpath__
    __pyclasspath__/
    .
    /my/server/apache-tomcat-7.0.32/bin
CLASSPATH:
    /my/server/apache-tomcat-7.0.32/bin/bootstrap.jar
    /my/server/apache-tomcat-7.0.32/bin/tomcat-juli.jar 
```

每当我尝试通过参数运行测试时，我都会收到以下错误消息：

```
.../robotframework>java -jar robotframework-2.7.5.jar --listener myListener --variable MYPARAM:sit --variablefile myVariableFile.py path\to\my\test 
```

**[错误]导入变量文件“myVariableFile.py”失败：文件或目录不存在。**

由于这是一个 Web 应用程序，因此设置变量文件的绝对路径并不好，最好能够依赖 PYTHONPATH 目录进行搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T18:25:10.133

This issue has been reported as a bug (by the author of this question, I presume...). The author of robotframework confirmed that the current behavior is to *not* search PYTHONPATH for variablefiles specified on the command line.

For more information and to see if this has been fixed, go to the robotframework issue tracker for [issue #1401](https://code.google.com/p/robotframework/issues/detail?id=1401)

# mongodb - 如何在 Mongo Java 驱动程序中编写“日期之间”查询？

> ID：15775760
> 
> 赞同：0
> 
> 时间：2013-04-02T22:44:09.120
> 
> 标签：mongodb

我有一个通过 Javascript shell 像冠军一样工作的查询......

```
db.profiles.find(
  { "createdOn" :
    { $gte : ISODate( '2013-04-01T00:00:00.000Z' ),
      $lt : ISODate( '2013-04-02T00:00:00.000Z' )
    }
  }
) 
```

. 我如何通过 Java 驱动程序做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:51:29.940

您是否尝试过类似的方法：

```
DBObject condition = new BasicDBObject(2);
condition.put("$gte", startDate);
condition.put("$lt", endDate);
Iterable<DBObject> result = collection.find(new BasicDBObject("createdOn", condition)); 
```

# javascript - JSTree 限制拖放深度

> ID：15775762
> 
> 赞同：0
> 
> 时间：2013-04-02T22:44:13.173
> 
> 标签：javascript, django, jstree

我正在使用 Django 构建一个网页。我正在尝试使用 jsTree 来允许用户将样本分配到不同的位置。根节点是位置，叶节点是样本。样本从标记为“未知”的位置开始，我希望用户能够添加新位置，然后将样本拖到正确的位置。

```
UNKNOWN
    Sample 1
    Sample 2
    Sample 3
Location 1
Location 2 
```

到目前为止，我还没有在树中添加任何位置，所以只有 UNKNOWN

这是我在 Django 模板中通过 html 创建树的地方：

```
<div id="demo1" class="demo" style="height:500px;width:500px">
<ul>
    {% for key, value in samples.items %}
    <li id="{{key}}">
        <a href="#">{{key}}</a>
        <ul>
            {% for key2, value2 in value.items %}
            <li id="{{key2}}">
                <a href="#">{{key2}}: {{value2}}</a>
            </li>
            {% endfor %}
        </ul>
    </li>
    {% endfor %}
</ul>
</div> 
```

这变成了以下 html（取自 firebug）：

```
<div id="demo1" class="demo" style="height:500px;width:500px">
    <ul>
        <li id="UNKNOWN">
            <a href="#">UNKNOWN</a>
            <ul>
                <li id="3511904">
                    <a href="#">3511904: ECKD 06-10-061-22W5M</a>
                </li>

                <li id="3511905">
                    <a href="#">3511905: WCKD 06-10-061-22W5M</a>
                </li>
            </ul>
        </li>
    </ul>
</div> 
```

到目前为止，我在 Javascript 中的所有内容是：

```
<script type="text/javascript">
$(function () {
    $("#demo1").jstree({
        "plugins" : ["themes","html_data","ui","crrm","hotkeys","dnd"],
        "core" : { "initially_open" : [ {% for key, value in samples.items %}"{{key}}", {% endfor %} ] },
    })
});
</script> 
```

我对整个 Web 开发非常陌生，并且没有使用 Javascript 的经验。现在我要做的就是设置拖放，以便只能移动示例节点，并且只能将它们设置为位置节点的子节点。我似乎遇到的主要绊脚石是我无法弄清楚如何检查节点是否有父节点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T22:35:30.237

今天重新尝试后，我想通了：

```
<script type="text/javascript">
$(function () {
    $("#demo1").jstree({
        "plugins" : ["themes","html_data","ui","crrm","hotkeys","dnd"],
        "core" : { "initially_open" : [ {% for key, value in samples.items %}"{{key}}", {% endfor %} ] },
        "crrm" : {
            "move" : {
                "check_move" : function(data) {
                    var p = this._get_parent(data.o);
                    //You cannot move a node with no parents
                    if(p == -1) {
                        return false;
                    }
                    //You cannot move a child to the root
                    else if(!this.get_path(data.np[0])) {
                        return false;
                    }
                    //You cannot move a node deeper than 1 level into the tree
                    else if(this.get_path(data.np[0]).length > 1) {
                        return false;
                    }

                    return true;
                }
            }
        },
        "dnd" : {
            //I don't know what this does... I was more or less just copying code
            "drop_target" : false,
            "drag_target" : false
        },
    })
});
</script> 
```

# python - BLAS 环境变量

> ID：15775765
> 
> 赞同：0
> 
> 时间：2013-04-02T22:44:29.223
> 
> 标签：python, environment-variables

使用 Microsoft Windows 7.0 操作系统并希望能够调用`pip`以方便安装 Python 模块。我第一次安装`distribute`.

运行模块后：

```
 pip install -U scikit-learn 
```

我意识到我需要设置 BLAS 环境变量。我不完全理解这意味着什么，即应该设置什么？放`BLAS="something"`

（注意：我也跳过了这个并尝试了：`easy_install -U scikit-learn`，这似乎工作正常。但是当我尝试在 iPython 中导入模块时它无法识别它，它给出了指向“-”的“无效语法”）。

欣赏你的想法。

# iphone - iOS：在两个视图控制器之间共享数据时遇到问题

> ID：15775766
> 
> 赞同：0
> 
> 时间：2013-04-02T22:44:32.373
> 
> 标签：iphone, ios, uiviewcontroller

我有一个应用程序，它有一个名为 MainViewController 的第一个视图控制器，它有点像秒表，当我点击完成时，它会显示一个 UIAlertView 推送另一个视图控制器 EndViewController，它显示秒表运行了多长时间以及它暂停了多长时间. 我收到以下错误：

```
My Point[851:c07] -[EndViewController topViewController]: unrecognized selector sent to instance 0x754db60

My Point[851:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[EndViewController topViewController]: unrecognized selector sent to instance 0x754db60' 
```

谁能指出你有什么问题？

这是我的代码：

主视图控制器.h：

```
#import "EndViewController.h"
@interface MainViewController : UIViewController <UITableViewDataSource, UITableViewDelegate, UITextFieldDelegate, UIAlertViewDelegate>
@property (strong, nonatomic) IBOutlet UILabel *out;
@property (strong, nonatomic) IBOutlet UILabel *in;
@end 
```

主视图控制器.m：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if ([segue.identifier isEqualToString:@"endtask"]){
        UINavigationController *navController = (UINavigationController *)segue.destinationViewController;
        EndViewController *controller = (EndViewController *)navController.topViewController;
        controller.timeIn.text=_in.text;

    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    _alert = [[UIAlertView alloc] initWithTitle:@"Are you sure?"
                                                    message:nil
                                                   delegate:self
                                          cancelButtonTitle:@"NO"
                                          otherButtonTitles:@"YES", nil];
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 0) {
        //do nothing
    }
    else if (buttonIndex == 1) {

        [self performSegueWithIdentifier:@"endtask" sender:self];
    }}

- (IBAction)endButton:(UIButton *)sender {
    [_alert show];
}
- (IBAction)endButton:(UIButton *)sender {
    [_alert show];
} 
```

EndViewController.h：

```
@interface EndViewController : UIViewController
@property (weak, nonatomic) IBOutlet UILabel *timeIn;
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:11:58.310

您正在调用`topViewController`在没有方法/属性的对象上命名的方法。这是这里的这一行：

```
EndViewController *controller = (EndViewController *)navController.topViewController; 
```

我怀疑它是因为您分配给的视图控制器*实际上*`navController`不是导航控制器，而是其他东西。检查你的故事板/笔尖。

 *另外，正如一位评论者所说，尝试 logging `navController`，看看它会给你什么。

```
NSLog(@"%@", navController); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:30:56.913

如果你用 timeIn 传递一个字符串，你应该在 endViewController.h 中有一个 NSString 的 @property

```
 @property (strong, nonatomic) NSString * timeIn ; 
```

然后在你的 endViewController.m 中，你将 timeIn 放入一个 lab 中。

```
myLabel.text = timeIn; 
```*

# javascript - JQuery、Accordion 和多个菜单

> ID：15775767
> 
> 赞同：0
> 
> 时间：2013-04-02T22:44:35.557
> 
> 标签：javascript, jquery, accordion, jquery-ui-accordion

我正在使用 Wayfinder 和 Accordion 菜单的组合来驱动左栏菜单的行为。此菜单有两个级别，即：

```
<ul class="accordion">:
Menu 1
    Sub-menu 1.1
    Sub-menu 1.2    
    Sub-menu 1.3
Menu 2
    Sub-menu 2.1
    Sub-menu 2.2    
Menu 3
    Sub-menu 3.1
    Sub-menu 3.2    
Menu 4
    Sub-menu 4.1
    Sub-menu 4.2 
```

还有以下标题菜单：

```
<ul class="nav"> (no sub-menus):
Menu 2
Menu 3 
```

下面的代码处理左栏菜单（“手风琴”类）。我想扩展代码，因此从标题菜单（“nav”类）单击“Menu 2”与单击“Menu 2”（“accordion”类）具有相同的效果。即点击“Menu 2”（“nav”类）将扩展“Menu 2”和“accordion”类。

她的代码是：

```
<script type="text/javascript">

    $(document).ready(function() {

        // Store variables

        var accordion_head = $('.accordion > li > a'),
            accordion_body = $('.accordion li > .sub-menu'),
            nav_head = $('.nav > li > a');

        // Open the first tab on load

        accordion_head.eq(2).addClass('active').next().slideDown('normal');         

        // Click function

        accordion_head.on('click', function(event) {

            // Disable header links

            event.preventDefault();

            // Show and hide the tabs on click

            if ($(this).attr('class') != 'active'){
                accordion_body.slideUp('normal');
                $(this).next().stop(true,true).slideToggle('normal');
                accordion_head.removeClass('active');
                $(this).addClass('active');
            }
            else {
                    accordion_body.slideUp('normal');
                    accordion_head.removeClass('active');
                }
        });
        nav_head.on('click', function(event) {

            // Disable header links

            event.preventDefault();

            // Show and hide the 'accordion tabs' on click on the 'nav tabs'

            <missing part>

        });
    });
</script> 
```

非常感谢， LG

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:18:39.103

定位点击的父元素的索引，只要它们的顺序相同（在`home`按钮之后）

```
$(function(){

  var accordion_head = $('.accordion > li > a'),
      accordion_sub  = $('.accordion li > .sub-menu'),
      nav_head       = $('.nav > li > a'); 

  accordion_head.not('.active').on('click', function(e){
      e.preventDefault();
      if (!$(e.target).hasClass('active')){
          $('.accordion > li > a').removeClass('active');
          accordion_sub.slideUp();
          $(this).addClass('active').closest('li').find('.sub-menu').slideDown();    
     }
  });

  nav_head.on('click', function(e){
      e.preventDefault();
      $('.accordion > li').eq( $(this).closest('li').index() ).find('a').click();
  });

}); 
```

# api - Shopify api：添加链接

> ID：15775769
> 
> 赞同：1
> 
> 时间：2013-04-02T22:44:53.477
> 
> 标签：api, shopify

我正在开发一个 shopify 应用程序。

是否可以通过 shopify API 向主菜单添加新链接？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:34:06.247

如果您登录到您的合作伙伴帐户，然后创建一个应用程序，您可以编辑创建的应用程序，您将看到您可以使用的所有资源，您可以在其中添加新链接。

如果您还注意到，使用 API，您可以提取和重写商店中的任何资产以包含新链接。不鼓励这种做法是不好的做法。相反，注入一个脚本标签来完成脏活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:44:40.290

一旦我知道 API 本身无法更改主题文件中的某些内容...一些应用程序会要求您在主题中手动应用一些代码，并提供适当的说明...也许此代码可以添加新菜单或动态交互以获取它.

# python - Python将数据发送到在终端中作为参数传递的可执行文件

> ID：15775772
> 
> 赞同：0
> 
> 时间：2013-04-02T22:45:02.677
> 
> 标签：python, command-line, parameters, argv

我有一个 python 脚本，它从命令行获取 2 个参数，一个可执行文件和一个文件。在我进行一些计算之后，我需要通过标准输入将此计算的结果传递给可执行文件。

1）这甚至可能吗？2）如果是这样，我怎么能在Python中做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:06:48.110

首先，你不应该使用 os.system 这是一个非常危险和坏的习惯。

至于您的问题，使用 subprocess 您可以执行以下操作：

```
from subprocess import Popen, PIPE, STDOUT

#do some stuff 
data = do_some_computation_from_file

#prepare your executable using subprocess.Popen
exe = Popen(['your_executable'], stdout=PIPE, stdin=PIPE, stderr=STDOUT)

#pass in the computed data to the executable and grap the result
result = exe.communicate(input=data)[0] 
```

# cuda - 线程块数之间的关系

> ID：15775773
> 
> 赞同：0
> 
> 时间：2013-04-02T22:45:04.347
> 
> 标签：cuda

这段代码来自一本名为 cuda by examples

```
#include "../common/book.h"
#define N (33 * 1024)

__global__ void add( int *a, int *b, int *c ) {
    int tid = threadIdx.x + blockIdx.x * blockDim.x;
    while (tid < N) {
        c[tid] = a[tid] + b[tid];
        tid += blockDim.x * gridDim.x;
    }  
}

                   .
                   .
                   .
add<<<128,128>>>( dev_a, dev_b, dev_c ); 
```

33*1024 = 33792

128 * 128 = 16384

33792 > 16384

那么，在这种情况下，我是否必须增加每个块的线程数才能运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T22:52:52.860

注意 while-cycle 主体中的第二个命令，即`tid += blockDim.x * gridDim.x;`. 它甚至可以处理比 16384 更大的数组。

ID 为 0 的线程将位置 0、16384、32768、...
中的数组项求和

# variables - 在 DOJO 中声明变量

> ID：15775775
> 
> 赞同：1
> 
> 时间：2013-04-02T22:45:13.203
> 
> 标签：variables, dojo, declaration

我正在编写一个在网格中显示俱乐部列表的 JSP。网格显示俱乐部的名称及其纬度、经度、网站和描述。

要显示的实际数据存储在名为 clubStore 的变量（dojo.data.ItemFileWriteStore）中。

加载页面时，将调用 servlet 以检索数据。然后，处理函数删除存储中的所有项目并添加 servlet 返回的新项目。

JSP代码如下所示：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clubs</title>
    <style type="text/css">
        @import "./dojoroot/dojo/resources/dojo.css";
        @import "./dojoroot/dijit/themes/tundra/tundra.css";
        @import "./dojoroot/dojox/grid/resources/Grid.css";
        @import "./dojoroot/dojox/grid/resources/nihiloGrid.css";
    </style>
    <script type="text/javascript" src="dojoroot/dojo/dojo.js" 
            djConfig="parseOnLoad: true, isDebug: false">
    </script>
    <script language="JavaScript" type="text/javascript">
        dojo.require("dojo.parser");
        dojo.require("dojo.data.ItemFileWriteStore");
        var clubData={
            items:[{name:'No Clubs', lat:'---', lon:'---', webSite:'---', description:'---'}]
        };
        var layoutClub=[{field:"name", name:"Name", width:10},
                        {field:"lat", name:"Lat", width:5},
                        {field:"lon", name:"Long", width:5},
                        {field:"webSite", name:"Web Site", width:10},
                        {field:"description", name:"Description", width:'auto'}];
        var clubStore=new dojo.data.ItemFileWriteStore(data:clubData});
    </script>
    <link rel="stylesheet" href="dojoroot/dijit/themes/claro/claro.css" />
    <link rel="stylesheet" href="dojoroot/dojox/widget/Dialog/Dialog.css" />
</head>
<body class="tundra">
    <%@include file="header.jsp"%>
    <div id="clubGrid"
        style="width: 800px;"
        autoHeight="true"
        data-dojo-type="dojox/grid/DataGrid"
        data-dojo-props="store:clubStore,
                         structure:layoutClub,
                         query:{},
                         queryOptions:{'deep':true},
                         rowsPerPage:40">
    </div>  
    <br>
    <script>
        var urlString="http://localhost:8080/BasicWeb/ClubsServlet";
        dojo.xhrGet({
            url: urlString,
            handleAs: "text",
            load: function(data) {
                // remove items...
                var allData=clubStore._arrayOfAllItems;
                for (i=0; i<allData.length; i++) {
                    if (allData[i]!=null) {
                        clubStore.deleteItem(allData[i]);
                    }
                }               
                var jsonClubArray=JSON.parse(data);
                for (var i=0; i<jsonClubArray.clubs.length; i++) {
                    var club=jsonClubArray.clubs[i];
                    var newClub={name: club.clubname, lat:club.lat, lon:club.lon, webSite: club.website, description: club.description};
                    clubStore.newItem(newClub);
                }
                clubStore.save();                   
            }
        });
    </script>
</body>
</html> 
```

处理 servlet 响应的脚本有时会失败，因为 clubStore 未定义（使用 Firebug 进行调试）。这似乎是一个虚假的错误，因为有时一切都很完美。

任何帮助理解如何定义 clubStore 变量将不胜感激。

谢谢。

詹姆士。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:01:04.163

我认为可能发生的情况是主体脚本有时会在头部脚本之前运行，所以这是一种竞争条件。您可以尝试将您的正文脚本包装成`dojo.ready`. （我从您的代码中假设您使用的是 dojo 1.6 或更早版本，因为您没有使用 AMD 加载程序样式。）

```
dojo.ready(function(){
  // Put your xhr request code here.
}); 
```

您可能还想尝试在 head 和 body 脚本中使用 firebug 断点进行测试。看看头部是否有时会先运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:47:24.177

所以问题原来是声明中的语法错误 - 行中缺少'{'

```
var clubStore=new dojo.data.ItemFileWriteStore(data:clubData}); 
```

错误的虚假方面是一个红鲱鱼 - 我之前已将变量声明为 DOM 对象的一部分，这导致了虚假错误。所以我搞砸了我的回归测试以及引入了一个语法错误！

谢谢。

詹姆士。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:58:51.530

Put your clubStore in the global space... just remove the var keyword in front of it...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T02:41:32.867

您可以尝试切换 require 语句的顺序，如下所示：

```
 dojo.require("dojo.data.ItemFileWriteStore");
    dojo.require("dojo.parser"); 
```

如果失败，您可以将 parseOnLoad 设置为 false，然后在您的商店被实例化后调用 dojo.parser.parse()，如下所示：

（假设您根据您的代码使用 dojo 1.6 或更早版本）

```
dojo.addOnLoad(function() {
  dojo.parser.parse();
}); 
```

# c - 换行符错误用strtok分割C字符串

> ID：15775778
> 
> 赞同：2
> 
> 时间：2013-04-02T22:45:40.967
> 
> 标签：c, string, parsing, compiler-errors

我遇到了用换行符分割字符串的问题。

这个想法是服务器正在向客户端发送消息，并且客户端通过换行符将消息拆分为其他 2 个字符串

我收到分段错误错误。

这是它接收、拆分和输出结果的客户端部分。

```
 char response[256];

    rc = read(sockfd, &response, 256);

    printf("The response is: %s\n", response);//prints the string in 2 lines

    char * pch;
    pch = strtok (response, "\n");

    printf("Part 1 -> %s\n\n", pch); // ERROR

    pch = strtok (NULL, "\n");
    printf("Part 2 -> %s\n\n", pch); 
```

错误信息显示：

```
Segmentation fault (core dumped) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T22:54:33.307

代替

```
rc = read(sockfd, &response, 256); 
```

和

```
rc = read(sockfd, response, 256); 
```

`response`已经是指向缓冲区的指针。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T22:56:23.470

可能是 (a)`response`未初始化，并且 (b)`read()`函数未读取字符串中的终止空值。为了演示，使用：

```
int rc = read(sockfd, response, sizeof(response));

printf("The response is: %.*\n", rc, response); 
```

在语句中使用它之前，您应该真正检查`rc`它既不是负数（读取失败）也不是零（EOF）`printf()`，并且在将它传递给 et al 之前，您需要 null 终止`strtok()`，所以也许更好的处理是：

```
int rc = read(sockfd, response, sizeof(response)-1);

if (rc <= 0)
    ...error or EOF...

response[rc] = '\0'; 
```

* * *

> 我仍然得到错误...

您已将发生错误的代码标记为：

```
char *pch;
pch = strtok(response, "\n");

printf("Part 1 -> %s\n\n", pch); // ERROR 
```

核心转储最合理的原因是`pch`包含空指针。因此，为了保护自己，请测试以下结果`strtok()`：

```
char *pch = strtok(response, "\n");

if (pch == 0)
    printf("strtok() failed\n");
else
    printf("Part 1 -> %s\n\n", pch); 
```

您应该确保如果`pch`为 null，则不要继续使用它。

您没有显示`rc`;的声明 如果是`unsigned char rc`，则 255 值可能表示`read()`调用返回 -1。

此外，我展示的代码假定 的定义`response()`作为数组可见（在文件范围或函数范围内，而不是作为函数的参数）。当数组为函数参数时，`sizeof(response)`返回与 相同的值`sizeof(char *)`，一般不是数组的大小。

# java - 在Java中重定向IP

> ID：15775781
> 
> 赞同：12
> 
> 时间：2013-04-02T22:45:56.473
> 
> 标签：java, redirect, proxy, ip

在过去的几周里，我一直在搜索互联网、计算机程序员的思想以及一些随机的人，以了解我想要克服的情况。基本上，我正在尝试为流行的游戏 Minecraft 编写一个 AntiJoinBot“插件”（如果你愿意的话）。这就像所有其他方面一样，它会根据 IP 是否使用代理来阻止 IP，但是此 AntiJoinBot 运行在与实际服务器不同的 VPS 上。

这是我能做出的最好的图表（不太好）：

> （非 minecraft 服务器）连接 -> 代理检查 -> 重定向到服务器 -> Minecraft

唯一的问题是，我需要能够重定向 IP 并关闭连接，这样玩家的真实 IP 才能连接到服务器。如果无法关闭连接，则由于我们正在运行的某些插件会导致真正的问题。

如果您有解决方案或更好的方法来做到这一点，请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:16:55.717

按照您想要的方式重定向连接需要（应用程序）协议的支持。TCP/IP 不支持它。AFAIK，SOCKS 也不支持它。除非 Minecraft 应用程序协议（以及隐含的 Minecraft 客户端和服务器）包含对重定向的支持，否则您将不走运。

（FWIW - 这就是 HTTP 重定向的工作原理。HTTP 有一个“协议元素”，允许服务器告诉客户端重定向，以及重定向到哪里。然后客户端将原始请求重新发送到新地址。）

但这并不意味着你不能对付害虫。这只是意味着重定向方法不可行。请尝试使用自定义代理或 IP 过滤器/重定向器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:08:35.077

你正试图以增加流量为代价来节省服务器的资源。我不确定答案，但可能通过研究 LBS（负载平衡服务器）的概念，您可能会找到答案。LBS 完全由我们定义和控制，因此您可以使用一台负载均衡服务器管理两台服务器的资源。

# php - 如何使用 $_POST 在 PHP 中验证表单

> ID：15775789
> 
> 赞同：-4
> 
> 时间：2013-04-02T22:46:47.723
> 
> 标签：php, forms, validation

我在让表单验证正常工作时遇到了一些麻烦。我正在使用 PHP，我认为这与我使用 $_POST 访问表单的方式有关。我正在使用该操作并将其附加到单独的页面。

HTML

```
<html>
<head>

<title>Grade Calculator</title>
</head>
<body>

<form name="myForm" method="post" id="myForm" action="processForm.php" >
<table width="400" border="1" cellspacing="4" cellpadding="4">
<tbody><tr>
  <td>Assignments:</td>
  <td><input type="text" name="assGrade" id="assGrade" value="0" /></td>
</tr>
<tr>
  <td>Mid Term: </td>
  <td><input type="text" name="midGrade" id="midGrade" value="0" /></td>
</tr>
<tr>
  <td>Final: </td>
  <td><input type="text" name="finGrade" id="finGrade" value="0" /></td>
</tr>
<tr>
    <td colspan="2" align="center"><input type="submit" name="btnSubmit" id="btnSubmit" value="Calculate" /></td>
</tr>
</tbody>
</table>
</form>
</body>
</html> 
```

php`

```
 <?php
    $assGrade = $_POST[document.myForm.assGrade.value];
    $midGrade = $_POST[document.myForm.midGrade.value];
    $finGrade = $_POST[document.myForm.finGrade.value];

    $avg = ($assGrade + $midGrade + $finGrade) / 3;

    $grade = '';

    switch($avg){
        case($avg >=90):
            $grade = 'A';
            break;
        case($avg >=80):
            $grade ='B';
            break;
        case($avg >=70):
            $grade ='C';
            break;
        case($avg >=60):
            $grade ='D';
            break;
        default;
            $grade ='F';
    };
    echo "Your average is ".$avg.'<br/>';
    echo "Your letter Grade is " .$grade;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:50:18.553

以下

```
$assGrade = $_POST[document.myForm.assGrade.value];
$midGrade = $_POST[document.myForm.midGrade.value];
$finGrade = $_POST[document.myForm.finGrade.value]; 
```

应该改为：

```
$assGrade = $_POST['assGrade'];
$midGrade = $_POST['midGrade'];
$finGrade = $_POST['finGrade']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T22:51:08.253

你有几个问题。该数组与HTML字段`$_POST`中的属性直接相关。此外，switch 语句并不意味着以您使用它的方式使用。使用 if/elseif/else：`name``input`

```
 <?php
    $assGrade = $_POST['assGrade'];
    $midGrade = $_POST['midGrade'];
    $finGrade = $_POST['finGrade'];

    $avg = ($assGrade + $midGrade + $finGrade) / 3;

    $grade = '';

    if ($avg >= 90) {
        $grade = 'A';
    }
    elseif ($avg >= 80) {
        $grade = 'B';
    }
    elseif ($avg >= 70) {
        $grade = 'C';
    }
    elseif ($avg >= 60) {
        $grade = 'D';
    }
    else {
        $grade = 'F';
    }

    echo "Your average is ".$avg.'<br/>';
    echo "Your letter Grade is " .$grade;
?> 
```

从技术上讲，您的 switch 语句可能有效，但它有点讨厌和不直观。假设您的`$avg`is `85`。 `($avg >= 90)`将返回`false`，将其与`$avg`(85) 进行比较将导致以下条件`(false == true)`返回 false。您的开关的第二部分将是`($avg >= 80)`which would be `true`，并将其与`$avg`would cause进行比较`(true == true)`。

所以从技术上讲，你的 switch 语句可以工作，但它需要一些奇怪的转换并且可能难以理解。如果您需要 switch 语句，我会做`switch(true)`并将其与`case`您的 's 进行比较。

我建议只坚持使用`switch`语句进行非常基本的一对多比较，并使用`if`语句进行其他所有比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T22:51:35.960

替换此块：

```
$assGrade = $_POST[document.myForm.assGrade.value];
$midGrade = $_POST[document.myForm.midGrade.value];
$finGrade = $_POST[document.myForm.finGrade.value]; 
```

和：

```
$assGrade = $_POST["assGrade"];
$midGrade = $_POST["midGrade"];
$finGrade = $_POST["finGrade"]; 
```

并阅读：[http ://www.w3schools.com/php/php_post.asp](http://www.w3schools.com/php/php_post.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T22:50:30.190

您无权访问 PHP 中的 DOM。您可以像`$_POST['assGrade'];`使用参数名称一样访问 $_POST 变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T22:51:56.440

尝试这个

```
$assGrade = 0;
$midGrade = 0;
$finGrade =0

  if isset($_POST['assGrade'])
  $assGrade = $_POST['assGrade'];
  if isset($_POST['midGrade'])
  $midGrade = $_POST['midGrade'];
  if isset($_POST['finGrade'])
  $finGrade = $_POST['finGrade']; 
```

而不是你的屁股！

```
$assGrade = $_POST[document.myForm.assGrade.value];
$midGrade = $_POST[document.myForm.midGrade.value];
$finGrade = $_POST[document.myForm.finGrade.value]; 
```

# ios - XCode 和 GitStack

> ID：15775793
> 
> 赞同：0
> 
> 时间：2013-04-02T22:46:59.930
> 
> 标签：ios, xcode, gitstack

我在我的 Windows server 2008 机器上安装了 GitStack 服务器，创建了一个存储库，创建了一个用户，我可以从本地机器浏览到存储库。问题是当我去我的Mac时，我可以很好地浏览网页，但是当我打开XCode并尝试连接到存储库时，它会提示我输入名称和密码并且一直提示，但无法登录我in. 这与 GitStack 有关，还是与我的 XCode 有关？我使用 XCode 4.6.2。

我用这个：

```
https://testname@192.168.1.10/reponame
https://testname@192.168.1.10/reponame
https://testname:testpassword@192.168.1.10/reponame 
```

没有任何效果，它总是提示我输入名称和密码并且无法登录。这个用户在 GitStack 中被创建为本地用户，并且被授予了对存储库的访问权限。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:52:05.187

尝试通过终端初始化 git 存储库。它一定是关于安全性的，在终端中你会有一个提示。

# bash - Bash中方括号内/外的输出重定向

> ID：15775797
> 
> 赞同：1
> 
> 时间：2013-04-02T22:47:18.747
> 
> 标签：bash, io-redirection, square-bracket

如果以下之间的重定向有任何区别，有人可以澄清一下：

```
[ $var1 -eq $var2 ] &> out.tmp 
```

和

```
[ $var1 -eq $var2 &> out.tmp ] 
```

也就是说，重定向外部方括号与内部方括号。我用谷歌搜索了一个没有运气的答案。在 Bash 中，两者的工作方式似乎相同。

谢谢！

PS：使用双方括号会有所不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T12:58:09.810

bash 手册说“ *……重定向操作符可以在简单命令的任何位置之前或出现，也可以在命令之后。* ” `[`……`]`是一个简单的命令（您可以在 bash 手册中查找定义），因此重定向可能出现在任何地方。`[[`...`]]`被列为复合命令，因此重定向只能跟随它。

# django - django：在一个模板中使用两个模型和两个表单时，数据不保存在数据库中

> ID：15775800
> 
> 赞同：0
> 
> 时间：2013-04-02T22:47:34.997
> 
> 标签：django, django-models, django-forms, django-admin, django-views

我很难将表格保存到数据库中。每次我点击保存时，它都没有保存在 db/admin 中。似乎无法弄清楚。我希望有人可以帮助我解决这个问题。

该项目是关于为建筑公司收集新客户的信息，如果客户存在于数据库中，那么它将查看特定客户的详细信息，并能够在需要时编辑特定客户，并能够在需要时覆盖数据节省。此信息从客户模型和建筑模型以及 customerForm 和 buildingForm 收集并显示在客户模板中。

模型.py

```
class customer(models.Model)
    F_NAME  = models.CharField(max_length = 50) 
    L_NAME  = models.CharField(max_length = 50)
    ADD     = models.CharField(max_length = 60, blank =True)
    EMAIL   = models.EmailField()
    def __unicode__(self):
        return '%s' % ( self.F_NAME )

class building(models.Model):
    CUSTOMER      = models.ForeignKey(customer)
    B_USE         = models.CharField(max_length = 2, blank = True, choices = c.Use)
    B_FLOORSPACE  = models.IntegerField(default=0)
    B_YEAR        = models.IntegerField(null = True, blank = True)
    B_TYPE        = models.CharField(max_length = 2, blank = True, choices = c.Type)
    def __unicode__(self):
        return '%s' % (self.B_USE) 
```

表格.py

```
class customerForm(ModelForm):
    F_NAME = forms.CharField(widget=forms.TextInput(attrs={'size':'34'}))
    L_NAME = forms.CharField(widget=forms.TextInput(attrs={'size':'34'}))  
    EMAIL  = forms.CharField(widget=forms.TextInput(attrs={'size':'19'}))  
    ADD    = forms.CharField(widget=forms.TextInput(attrs={'size':'34'}))
    class Meta:
        model = customer

class buildingForm(ModelForm):
    CUSTOMER     = forms.CharField(widget=forms.TextInput(attrs={'size':'20'}))
    B_FLOORSPACE = forms.CharField(widget=forms.TextInput(attrs={'size':'4'}))
    B_YEAR       = forms.CharField(widget=forms.TextInput(attrs={'size':'4'})) 
    class Meta:
        model = building
        exclude = ('CUSTOMER',)
        widgets = {'B_USE'       : RadioSelectNotNull(),
                   'B_TYPE'      : RadioSelectNotNull(),
                  } 
```

视图.py

```
def customerView(request ,**kwargs ):
    context ={}
    try:
        this_customer = customer.objects.get(id = kwargs ['pk'])
    except:
        this_customer = customer.objects.create(id = kwargs['pk'])
    try: 
        bform = buildingForm(instance=building())
        context['build']=True
        context['bform']=bform
    except: 
        context['build']=False
    form = customerForm(instance=this_customer)
    context['form']= form

    if request.method == 'POST':
        form = customerForm(request.POST, instance = customer())
        bform = [buildingForm(request.POST, prefix = str(x), instance = building()) for x in range (0,3)]
        if form.is_valid() and all ([bf.is_valid() for bf in bform]):
            new_customer = form.save()
            for bf in bform:
                new_build = bf.save(commit = False)
                new_build.CUSTOMER = new_customer
                new_build.save()
            return HttpResponseRedirect('customer.html')
    else:
        form = customerForm(instance=customer())
        bform = [buildingForm(prefix=str(x), instance=building())for x in range(0,3)]

    return render_to_response('customer.html',{'customer_form':form, 'build_form':bform}, context_instance = RequestContext(request)) 
```

客户.html

```
<form action="" method="post">
<button type="submit" name="customer">Save</button>  
  {% csrf_token %}
    {{ form.id }} 

 ...more code...
<table> 
  <tr><td><div>First Name</div>{{ form.F_NAME }}</td></tr>     
  <tr><td><div>Last Name</div>{{ form.L_NAME }}</td></tr>
</table>

 ....more code....

{% if build %}

 ...more code....
<table> 
  <tr><td><div>Build Use</div></td><td>{{ bform.B_USE }}</td>
      <td><div>Build Space</div></td><td>{{ bform.B_FLOORSPACE }}</td>
      </tr>

 ...more code... 
</form> 
```

我已经在单一形式的多个模型条目上尝试了这个演示 [http://collingrady.wordpress.com/2008/02/18/editing-multiple-objects-in-django-with-newforms/](http://collingrady.wordpress.com/2008/02/18/editing-multiple-objects-in-django-with-newforms/) 和 [Django：一个模板中的多个模型使用表单](https://stackoverflow.com/questions/569468/django-multiple-models-in-one-template-using-forms) 以及 [如何在同一模板中使用两个不同的 Django 表单？](https://stackoverflow.com/questions/11268630/how-to-use-two-different-django-form-at-the-same-template) 但看不到错误在哪里。我现在的任务很简单，我只需要保存所有已键入并保存在数据库中的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:12:10.340

您可能在某处遇到验证错误。由于您没有在模板中显示任何表单错误，因此您的表单只会重新显示而没有任何解释。

# json - ColdFusion 10 REST API：序列化后更改 JSON 响应

> ID：15775802
> 
> 赞同：2
> 
> 时间：2013-04-02T22:47:53.640
> 
> 标签：json, rest, coldfusion, coldfusion-10

使用 ColdFusion 10 的新 REST API 时，如何通过管道进入响应管道，以便在 ColdFusion 10 的 REST API 序列化 JSON 响应后更改它？

例如，假设我有以下端点：

```
<cfcomponent rest="true" restpath="/widgets" produces="application/json">

    <cffunction name="getWidget" access="remote" httpmethod="GET" restpath="{id}" returntype="struct">
        <cfargument name="id" required="true" restargsource="path" type="numeric"/>

        <cfreturn {
            id = arguments.id,
            code = "string:.10"
        } />
    </cffunction>

</cfcomponent> 
```

在此方法返回后（即在 ColdFusion 使用 SerializeJSON 创建 JSON 响应后），我想将“string:”替换为空字符串。我尝试这样做（使用此处描述的技术：http: [//house-of-fusion.10909.n7.nabble.com/getPageContext-in-onRequestEnd-is-empty-td78578.html](http://house-of-fusion.10909.n7.nabble.com/getPageContext-in-onRequestEnd-is-empty-td78578.html)）但我无法改变响应。任何人都知道我可以如何更改响应？

**背景：**

我正在寻找这样一个黑客的原因是因为 SerializeJSON （CF 10 REST API 使用的默认序列化）会将**code = ".10"**视为浮点数并呈现**"code":0.1**，这不是我想要的. 这个问题有据可查，但是在使用本机 REST API 时克服这个问题的解决方案似乎没有在任何地方记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T01:10:55.763

似乎没有办法利用 ColdFusion 的响应管道来编辑由 ColdFusion 10 的 REST API 生成的响应主体。但是，对于 IIS 用户，您可以为此使用 HttpModules。您需要在 .NET 中编写 HttpModule，但这非常简单。我写了几个 HttpModules 来对 ColdFusion 的响应进行后处理，源代码可在此处获得：

[https://github.com/johnnyoshika/coldfusion-rest-post-process](https://github.com/johnnyoshika/coldfusion-rest-post-process)

如果您尝试解决我在此问题中确定的相同问题，则可以使用我在此处发布的 HttpModule：

[https://github.com/johnnyoshika/coldfusion-rest-post-process/blob/master/JsonStringCleanserModule.cs](https://github.com/johnnyoshika/coldfusion-rest-post-process/blob/master/JsonStringCleanserModule.cs)

要将其插入您的应用程序，您可以按照以下步骤操作：

**1）获取准备使用的DLL：**

[https://github.com/johnnyoshika/coldfusion-rest-post-process/tree/master/bin/Release](https://github.com/johnnyoshika/coldfusion-rest-post-process/tree/master/bin/Release)

从该 URL获取`ColdFusion.RestPostProcess.dll`文件并将其放入 ColdFusion 应用程序的 bin 文件夹中

例如，如果您的 ColdFusion 应用程序在这里：

```
C:/myapp 
```

然后你想把dll放在这里：

```
C:/myapp/bin/ColdFusion.RestPostProcess.dll 
```

如果您不想信任陌生人的 DLL，则需要查看源代码并自己在 Visual Studio 中编译项目以生成 DLL。

**2）修改web.config**

在应用程序的根目录中修改或创建 web.config 文件。内容应如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.web>
        <httpModules>
            <!-- This is for IIS5, IIS6, and IIS7 Classic -->
            <add name="JsonStringCleanserModule" type="ColdFusion.RestPostProcess.JsonStringCleanserModule"/>
        </httpModules>
    </system.web>
    <system.webServer>
        <modules>
            <!-- This is for IIS7+ Integrated mode -->
            <add name="JsonStringCleanserModule" type="ColdFusion.RestPostProcess.JsonStringCleanserModule"/>
        </modules>
    </system.webServer>
</configuration> 
```

**3) 在字符串前面加上`***string***:`

每当您想在 JSON 中输出字符串时，请在值前面加上`***string***:`. 例如：

```
<cffunction name="getWidget" access="remote" httpmethod="GET" restpath="{id}" returntype="struct">
    <cfargument name="id" required="true" restargsource="path" type="numeric"/>

    <cfreturn {
        id = arguments.id,
        code = "***string***:.10"
    } />
</cffunction> 
```

那应该这样做。添加`***string***:`强制 ColdFusion 将值序列化为字符串，然后 HttpModule 将删除所有实例，`***string***:`因此最终输出将是：

```
{"id":1,"code":".10"} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T19:57:22.810

您还可以使用[此处描述的自定义响应](http://help.adobe.com/en_US/ColdFusion/10.0/Developing/WSe61e35da8d318518-5719eac51353e6bb244-7fec.html "这里")

您自己将数据序列化为 json，更改字符串并将其设置为响应内容。简而言之，函数内部的代码如下所示：

```
<cfset response=structNew()>
<cfset response.status=201>
<cfset var content = SerializeJSON(data)>
<!--- change the content string --->
<cfset response.content= content>
<cfset response.headers=structNew()> 
<cfset restSetResponse( response )> 
```

HTH。

# vba - 2 excel中的4位二进制乘法

> ID：15775817
> 
> 赞同：0
> 
> 时间：2013-04-02T22:48:45.140
> 
> 标签：vba, excel, bit, multiplication

使用excel演示4位x 4位二进制乘法如下：

1.  将乘法器转换为二进制并一次处理一位
2.  所有其他操作都可以十进制完成。

我有上面的作业问题，但它是由一位笔记很差的老师给我的。谁能告诉我在哪里可以阅读该主题？有没有我可以阅读的书籍（或者最好是网页链接）来帮助我？

![图片](https://i.stack.imgur.com/MVKhO.png)

这就是我到目前为止所拥有的。显然这是错误的。我遇到的麻烦是产品的添加。我不能简单地使用 =sum() 因为它 1+1 应该等于带有进位的 '0'。我该如何实现这一目标？

欢迎任何建议。提前谢谢你。乔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:47:22.737

这里的问题是您正确指出的添加 - 但在所有计算的单元格中都是错误的，而不仅仅是您突出显示的单元格，它只是您添加 1+1 的唯一地方。

因此，让我们通过一个示例来解决这个问题，该示例将一对 4 位二进制数添加到第 1 行和第 2 行中。有一个临时计算要放入第 3 行，我们将把结果放入第 4 行。

最低有效位是最简单的，我们可以使用这样的`MOD`函数将其限制为基数 2（二进制），该函数`=MOD(D1+D2,2)`将 D1 和 D2 中的位相加，并在二进制结果为 0 或 10 时返回 0，在二进制结果为 1 或 11 时返回 1。

接下来我们可以考虑从不太重要的操作到下一个操作的溢出（或进位）......

我们可以通过计算除以 2 的整数结果来计算某个位是否溢出。您可以计算从 D 列到`D3`with的溢出`=INT((D1+D2)/2)`，我们可以将其填满。

最后，我们将进位与添加相结合，因此`C3`我们可以使用`=MOD(C1+C2+D3,2)`并再次填充它。

使用它，您应该能够看到二进制加法是如何作为 Excel 公式工作的，并找出工作表未按预期运行的原因。这是一个完整的计算...

```
A                   B                   C                   D

1                   1                   1                   1
1                   1                   1                   1
=INT((A1+A2)/2)     =INT((B1+B2)/2)     =INT((C1+C2)/2)     =INT((D1+D2)/2)
=MOD(A1+A2+B3,2)    =MOD(B1+B2+C3,2)    =MOD(C1+C2+D3,2)    =MOD(D1+D2,2) 
```

# ios - iOS：从弹出窗口重新加载表并更改母视图控制器上的地图区域

> ID：15775819
> 
> 赞同：1
> 
> 时间：2013-04-02T22:48:46.510
> 
> 标签：ios, uitableview, delegates, uipopovercontroller, mkmapview

我有一个带有 TableView 和一个 MapView 的 ViewController 以及一个打开带有另一个 TableView 的 PopOver 的按钮。在那里，用户可以选择一些应该显示在 Table 和母 ViewController 中的 MapView 上的位置。

我有一个计算表格数据并在母 ViewCoontroller 中绘制这些注释的函数。这是通过初始化从子 ViewController 调用的：

```
MotherViewController * MVC = [[MotherViewController alloc] init];
[MVC calculateresults]; 
```

然后通过协议将选定的数据传回，函数计算正确的结果。但是表格不会重新加载，因为 [self.TableView reloaddata] 在 PopOver 仍然打开时不起作用。如果我关闭 PopOver 并直接在母 ViewController 上启动该功能，一切正常。

已经尝试过了，但不起作用： [iPad SplitViewController: Reloading root view controller's tableview from detail view controller](https://stackoverflow.com/questions/6481724/ipad-splitviewcontroller-reloading-the-root-view-controllers-tableview-from-th)

如何在打开 PopOver 时更新母 ViewController 中的地图和表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:53:34.943

失败的原因不是“[self.TableView reloaddata] 在 PopOver 仍然打开时不起作用。” 原因是`self`不同的`self`。你是说：

```
MotherViewController * MVC = [[MotherViewController alloc] init];
[MVC calculateresults]; 
```

在弹出框后面看到的`MVC`不是*MotherViewController*。它是一个*不同*的MotherViewController - 你刚刚创建的那个`alloc`。因此，您在弹出框后面看到的 MotherViewController 永远不会收到任何消息，因此它什么也不做。

自然，当您直接在*该*MotherViewController 中执行此操作时，它会起作用。

而不是说

```
MotherViewController * MVC = [[MotherViewController alloc] init]; 
```

您需要安排您的弹出框引用*已经存在的*MotherViewController。

# .net - 代理身份验证，然后是 Web 客户端身份验证

> ID：15775820
> 
> 赞同：1
> 
> 时间：2013-04-02T22:48:47.097
> 
> 标签：.net, wcf, authentication

代理身份验证存在问题。

基本上，问题源于客户尝试使用代理连接到我们的服务器应用程序导致 407 错误。这很容易通过添加

```
<system.net>
   <defaultProxy useDefaultCredentials="true"/>
  </system.net> 
```

到 app.config，正如在堆栈溢出的许多其他问题中所讨论的那样。

我的问题是我们的客户端应用程序有它自己的身份验证过程，通过 Web 客户端对我们的服务器应用程序数据库进行身份验证。因为如果我们通过代理，我已将客户端设置为使用 defaultCredentials，因此应用程序正在尝试使用默认凭据（例如 MyWindowsDomain\MyWindowsUser1）登录我们的服务器应用程序，这显然会导致登录无效，因为该用户不存在在服务器应用程序用户数据库中。以前有人遇到过这个问题并知道如何解决吗？或者有什么想法？

# php - PHP：时间戳排序

> ID：15775821
> 
> 赞同：0
> 
> 时间：2013-04-02T22:48:51.417
> 
> 标签：php, mysql, sorting, foreach, timestamp

我正在制作一个图像网站，我需要时间戳排序方面的帮助。我有大约 5 个不同的 SQL 查询来从数据库中获取信息。这些查询中的每一个都获取时间戳。

我想要做的是从数据库中获取它，并使用 foreach 循环对所有查询中的图像进行排序。这可能听起来令人困惑，如果您不明白，请发表评论。

```
$images = array();

$stmt = $conn->prepare("SELECT images.*, group_images.* ORDER BY `timestamp` DESC");
$stmt->execute();

while ($images_row = $stmt->fetch(PDO::FETCH_ASSOC)) {
  $images[] = array(
    'image_id' => $images_row['image_id']);
}
return $images;

foreach($images as $image) {
    echo $image['image_id'];
    echo '<br/>';
} 
```

这是我试图尝试的一个查询，但结果不起作用。

错误：

`$images = valley_images();`

```
$sorted_data = array();

foreach($images as $key => $value) {
    if ($key == 'timestamp') {
        $sorted_data[$value][] = $images;
    }
}

ksort($sorted_data); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:57:49.860

如果我理解正确，这可能会有所帮助：

```
$data; //data from database, assuming it has a "timestamp"-key
$sorted_data = array();

foreach ($data as $key => $value) {
    if ($key == 'timestamp') {
        $sorted_data[$value][] = $data;
    }
}

ksort($sorted_data); 
```

这样，您将获得一个数组，该数组按数据库中值的时间戳排序。如果每个时间戳只有一个条目，则可以将`[]`.

# javascript - 当前范围内不存在名称“$” - 模块内的打字稿和 jquery

> ID：15775822
> 
> 赞同：4
> 
> 时间：2013-04-02T22:48:56.677
> 
> 标签：javascript, jquery, typescript

尝试在类或模块中使用 jquery 时出现错误：

```
/// <reference path="../jquery.d.ts" />

element: jQuery; // all is good
elementou: $;    // all is fine

class buggers{
    private element: jQuery;   // The name jQuery does not exist in the current scope
    private elementou: $;      // The name $ does not exist in the current scope
}

module something {
    class buggers{
        private element: jQuery;   // The name jQuery does not exist in the current scope
        private elementou: $;      // The name $ does not exist in the current scope
    }
} 
```

我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:54:51.843

您正在使用`$`并且`jQuery`好像它们是类型。取自[DefinitiveTyped](https://github.com/borisyankov/DefinitelyTyped/blob/master/jquery/jquery.d.ts)`d.ts`，您正在寻找的类型是或者`JQuery``JQueryStatic`

`$`并且`jQuery`应该已经在`d.ts`文件中声明为变量：

```
declare var jQuery: JQueryStatic;
declare var $: JQueryStatic; 
```

...但是如果您觉得需要在课堂上再次声明它们，您可能想尝试：

```
class buggers{
    private element: JQuery;   // JQuery object. You'll need to assign something to this before you can use it. e.g element = $('selector');
    private elementou: JQueryStatic;      // Reference to the $ JQuery Static object
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T03:17:28.530

我看到你这样做了，但我忽略了这重要的一步。请记住在 TS 文件的顶部包含定义参考。

```
/// <reference path="../../assets/js/libs/typedefs/jquery-1.8.d.ts" /> 
```

# php - 长时间计时器后更改数据库的方法

> ID：15775823
> 
> 赞同：0
> 
> 时间：2013-04-02T22:48:56.980
> 
> 标签：php, mysql, cron

我想在 24 或 48 小时后执行一个脚本我想防止他们滥用某些用户发送电子邮件所以我想知道如何在 php 代码或 mysql db 中使用计时器来设置持续时间并等待它完成，当它完成时，用户可以发回邮件。女巫是我听说过的关于 cron 的最佳技术，但如果这有必要，那么如何使用它谢谢你提前帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:04:26.503

听起来您应该计算允许当前用户再次发送电子邮件的时间戳。将此值存储在 MySQL 中，以便您的电子邮件脚本可以检查此时间戳并决定是否允许用户发送电子邮件。

在您的数据库中创建一个新的 MySQL`DATETIME`列。当您需要阻止用户生成电子邮件时，请让您的脚本检查我们是否达到或超过了时间戳值。

如果不是，则阻止该过程并通知用户。如果是这样，请允许发送电子邮件。

# scala - 尽管失败，如何继续执行 Future 序列？

> ID：15775824
> 
> 赞同：22
> 
> 时间：2013-04-02T22:49:00.940
> 
> 标签：scala, concurrency, future

`traverse`来自对象的方法`Future`在第一次失败时停止。我想要这个方法的宽容/宽容版本，在发生错误时继续执行其余的序列。

目前，我们在 utils 中添加了以下方法：

```
def traverseFilteringErrors[A, B <: AnyRef]
                           (seq: Seq[A])
                           (f: A => Future[B]): Future[Seq[B]] = {
  val sentinelValue = null.asInstanceOf[B]
  val allResults = Future.traverse(seq) { x =>
    f(x) recover { case _ => sentinelValue }
  }
  val successfulResults = allResults map { result =>
    result.filterNot(_ == sentinelValue)
  }
  successfulResults
} 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-03T00:42:07.600

真正有用的东西（一般来说）是能够将未来的错误提升为适当的价值。或者换句话说，将 a`Future[T]`转换为 a `Future[Try[T]]`（成功的返回值变成 a`Success[T]`而失败的情况变成 a `Failure[T]`）。以下是我们可以如何实现它：

```
// Can also be done more concisely (but less efficiently) as:
// f.map(Success(_)).recover{ case t: Throwable => Failure( t ) }
// NOTE: you might also want to move this into an enrichment class
def mapValue[T]( f: Future[T] ): Future[Try[T]] = {
  val prom = Promise[Try[T]]()
  f onComplete prom.success
  prom.future
} 
```

现在，如果您执行以下操作：

```
Future.traverse(seq)( f andThen mapValue ) 
```

您将获得一个 succesful `Future[Seq[Try[A]]]`，其最终值包含`Success`每个成功未来的`Failure`实例，以及每个失败未来的实例。如果需要，您可以`collect`在此 seq 上使用来删除`Failure`实例并仅保留成功的值。

换句话说，您可以按如下方式重写您的辅助方法：

```
def traverseFilteringErrors[A, B](seq: Seq[A])(f: A => Future[B]): Future[Seq[B]] = {
  Future.traverse( seq )( f andThen mapValue ) map ( _ collect{ case Success( x ) => x } )
} 
```

# android - 不要重复菜单代码

> ID：15775831
> 
> 赞同：2
> 
> 时间：2013-04-02T22:49:35.673
> 
> 标签：android, menu

我希望我的所有活动只有一个菜单。我不想在所有活动中重复我的菜单代码（如下）。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.referent, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
    case R.id.action_settings:
        System.out.println("set");
        return true;
    case R.id.action_alert:
        System.out.println("alert");
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

我阅读了一些主题，但我发现只有一个解决方案是扩展声明菜单的父类。我不能使用这个解决方案，因为我所有的活动都没有扩展 Activity，我也有`FragmentActivity`and `ListActivity`。

是否有一种解决方案可以在每个活动上使用相同的菜单，在每个活动上编写最少的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T00:51:19.587

根据菜单处理代码需要从当前活动访问的内容，您可以创建一个类，其唯一职责是处理选定的菜单项。即使只有一个接收`MenuItem`.

例如，将活动修改`onOptionsItemSelected`为：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    boolean handled = MenuHandler.onOptionsItemSelected(item); 
    if (!handled) {
        handled = super.onOptionsItemSelected(item);
    }
    return handled;
} 
```

并创建`MenuHandler`类：

```
public class MenuHandler {
    public static boolean onOptionsItemSelected(MenuItem item)
    {
        // Handle item selection
        switch (item.getItemId()) {
        case 1: //R.id.action_settings:
            System.out.println("set");
            return true;
        case 2: //R.id.action_alert:
            System.out.println("alert");
            return true;
        default:
            return false;   //allow default processing
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:30:32.613

您所需要的只是从主类扩展

```
public abstract class main extends activity(){
@Override
public boolean onOptionsItemSelected(MenuItem item) {
// put your common menu code

super.onOptionsItemSelected(item);
}

}
public class HelloActivity extends main{
@Override
public boolean onOptionsItemSelected(MenuItem item) {
super.onOptionsItemSelected(item);
}
} 
```

# android - 排除带有 NFC 的非 NXP Android 手机（如 Nexus 4/10）

> ID：15775832
> 
> 赞同：3
> 
> 时间：2013-04-02T22:49:38.150
> 
> 标签：android, nfc, google-play, mifare

我已经构建了一个应用程序，可以从我们学校使用的学生证中读取某些数据。目前它只读取用户数据，但未来计划是增加对读取剩余信用的支持。

问题是我们使用的卡是 Mifare Classic。Nexus 4 和 Nexus 10（可能还有更多设备）不支持这些卡，因为它们具有 Broadcom NFC 控制器。如果我是对的，该应用程序不应该在这些设备上崩溃或出现问题，但它什么也不做。

**有没有办法在没有 NXP 控制器的情况下以某种方式排除这些设备？**（基本上就像 MifareClassic 类所需的使用功能。）我可以通过 Play 商店排除 Nexus 4 和 10，但这并不是一个好的解决方案 - 更重要的是因为其他设备可能开始使用 Broadcom 控制器并且它们都必须是手动排除。

谢谢！- 安布鲁斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T11:48:52.127

您可以按如下方式签入您的应用以获得 MIFARE Classic 支持：

```
boolean hasMifare(Context ctx) {
 return ctx.getPackageManager().hasSystemFeature("com.nxp.mifare");
} 
```

在安装应用程序之前无法检查这一点。但安装后，您可以警告用户您的应用程序的功能将受到限制，因为缺少 MIFARE Classic 支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:16:01.373

显然，这些手机仍然可以读取 UID。

> **NFC Mifare Classic 标签可以与 Nexus 4 和 10 一起使用吗？**
> 
> 是的！和不。虽然 Nexus 4 或 10 无法写入或完全读取 Mifare Classic 芯片，但可以检测和读取其 UID（唯一识别码）。因此，Mifare Classic Chips 可与 Nexus 4 或 10 以及 AutomateIt 等应用程序一起使用，该应用程序仅使用标签的 UID 来触发保存在设备上的事件/设置。（ReTag 和 NFC 任务启动器也可以只使用标签的 UID，但也可以写入可写标签。）不利的一面是，如果您有多个这些类型，则无法写入标签在手机上的 NFC 应用程序中，点击标签会弹出一个框，询问您要使用什么应用程序。但是，如果您只对所有标签事件/设置/等使用一个 NFC 应用程序，
> 
> [在http://andytags.com/nfc-tags-nexus-4--10-compatibility.html#47A4kbkkGceGqe3L.99](http://andytags.com/nfc-tags-nexus-4--10-compatibility.html#47A4kbkkGceGqe3L.99)了解更多信息

我建议您尝试使用渐进式 Web 增强编程中使用的相同原则，并使用包含在 try/catch 块中的保护条件来防止每个小功能/假设，而不是仅基于名称/品牌进行过滤。

这样，如果某些制造商创建了错误的标签，或者如果用户错误地尝试同时扫描两个标签，或者如果用户在扫描完成之前太快移除手机，或者将来发生任何其他情况，您的应用程序将能够更轻松地处理这些类型的错误情况。

# php - 是否可以使用 PHP 按文档顺序解析 XML 文档并将其输出为 HTML？

> ID：15775835
> 
> 赞同：0
> 
> 时间：2013-04-02T22:50:01.467
> 
> 标签：php, html, xml

如果这是已经在这里彻底讨论过的事情，我深表歉意。我花了很多时间寻找答案，但似乎无法找到一个明确的答案。此外，在 PHP 方面，我几乎是个业余爱好者。

我有一个 XML 文档，我正在尝试使用 PHP 将其呈现为 HTML。XML 实际上“理论上”用于单一来源，这意味着希望将其用作生成 PDF 和 HTML 输出的来源。因此，XML 实际上是由充当手册部分的元素组成的。见下文：

```
<topic>
   <title>Some topic.</title>
   <caution>
      <para>Cautionary note 1.</para>
   </caution>
   <para>Paragraph 1</para>
   <caution>
      <para>Cautionary note 2.</para>
   </caution>
   <para>Paragraph 2</para>
   <figure>
      <graphic src="../some_path"/>
   </figure>
</topic> 
```

对于 PDF，我计划编写 XSLT 转换。对于 HTML，我有一个脚本可以成功地将 XML 的所有元素转换为 HTML。问题是，它似乎将 XML 转换为已解析的数组。上面的示例使用（使用 HTML 等效项）呈现：

*   顶部的所有图形元素。
*   中间的所有 para 元素（不包括 attention 元素中的 para 元素）。
*   底部的所有警告元素。

因此，不保留文档顺序。由于此来源用于整理手册，因此文档顺序很重要。

我的问题：是否可以使用 PHP 将 XML 解析为 HTML 并保留文档顺序？同样，我几乎是 PHP 业余爱好者，所以如果我的问题显得迟钝，我深表歉意。欢迎任何建议或指示。

*编辑添加一些 PHP*

PHP 脚本非常冗长，因此我将尝试包含尽可能多的相关位。

就注意事项而言，脚本最初定义了一个函数：

```
//Display the cautions from the xml
        function display_cautions($cautions)
        {
            foreach( $cautions as $caution )
            {
                foreach( $caution->para as $cautionpara )
                {
                    printf("<p class='Text'>");
                    foreach( $cautionpara->{'attention-icon'} as $attentionicon )
                    {
                        printf("<img src='../../images/%s' width='25px' height='25px'>", htmlspecialchars($attentionicon['srcfile']));
                    }
                    $cautionpara = str_ireplace('<emph>', '<b>', $cautionpara);
                    $cautionpara = str_ireplace('</emph>', '</b>', $cautionpara);
                    printf("%s</p>", htmlspecialchars($cautionpara));
                }
            }
        } 
```

然后它构建文档：

```
if (isset($_GET['ID']))  
        {
            $introsections = $doc->{'intro-section'};
            //printf("got here 1");
            foreach( $introsections as $introsection )
            {
                //printf("got here 2");
                $sectno = $introsection['sect-no'];
                if ($sectno == $_GET['ID'])
                {
                    $smtitle = $introsection->title->nodeValue;
                    $introgenerals = $introsection->{'intro-general'};
                    foreach( $introgenerals as $introgeneral )
                    {
                        //printf("got here 3");
                        $smtitle = $introgeneral->title;
                        $introid = $introgeneral['id'];
                        //Display the title
                        printf("<h2>%s</h2>", htmlspecialchars($smtitle));
                            //Match found
                            $topics = $introgeneral->topic;
                            foreach( $topics as $topic )
                            {
                                //Display the title
                                printf("<p class='Text12Bold'>%s</p>", htmlspecialchars($topic->title));
                                $topicparas = $topic->para;
                                //Get all the paragraphs
                                foreach( $topicparas as $topicpara )
                                {
                                    //MH added: code to include xrefs here
                                    //check for xrefs in this para
                                    $xrefs = $topicpara->xref;
                                    if (simple_xml_count($xrefs) > 0) {
                                        //printf("<p class='Text'>%s</p>\n", htmlspecialchars($topicpara));
                                        display_referral_links($xrefs, $topicpara);
                                    } else {
                                        $topicpara = str_ireplace('<emph>', '<b>', $topicpara);
                                        $topicpara = str_ireplace('</emph>', '</b>', $topicpara);
                                        ?>
                                        <p class='Text'><?php printf($topicpara) ?></p>

                                        <?php
                                    }
                                } 
```

然后它调用警告函数：

```
//Get all the cautions with images where applicable
display_cautions($topic->caution); 
```

在文档构造和函数调用之间，它构造了表格、子主题和图形。警告、注释和列表也有类似的功能。

# javascript - 处理所有间距类型的正则表达式空格 (\s)

> ID：15775836
> 
> 赞同：1
> 
> 时间：2013-04-02T22:50:08.437
> 
> 标签：javascript, regex

我对这些很陌生，但有一个正则表达式/替换函数：

```
string.replace(/\s{10,}/gi, ' '); 
```

因为我有一个文本字符串，它由空格、制表符空格和换行符组合而成。我面临的问题是上面的表达式处理太多了。我已尝试将其拨回以`\s{1,}`缓解此问题，但它甚至将换行符和制表符空格减少到一个空格。我想用不同的规则分别处理。

这条规则似乎覆盖了我尝试处理其他间距类型的任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T22:53:36.497

您可以使用实际的空格字符仅匹配空格：

```
var spaces = / /g; // a valid regex 
```

对于其他类型，请考虑这些：

```
/\t\r\n/ // other space characters 
```

# variables - SSIS变量范围-for循环看不到用户变量

> ID：15775838
> 
> 赞同：0
> 
> 时间：2013-04-02T22:50:09.883
> 
> 标签：variables, ssis

我有一个 SSIS 包，并创建了一个序列容器来对某个任务及其变量进行分组。变量的范围都设置为序列。

在该序列中，我有一个 for 循环容器，但在该 for 循环中，我的变量似乎不可用。我创建了一个平面文件连接管理器，但是当我转到连接的表达式（设置连接字符串）时，列表中只有“系统变量”，我无法选择任何用户变量。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T02:03:03.587

正如[MSDN](http://msdn.microsoft.com/en-us/library/ms140237.aspx)所指出的：

> 可以在包级别或项目级别创建连接管理器。

您的序列范围变量对连接管理器不可见。假设您没有使用项目范围的连接管理器（仅在 SSIS 2012 中可用），将适当的变量移动到包范围将解决您的问题。

# resharper - 用于方法链接的 Resharper 设置

> ID：15775844
> 
> 赞同：5
> 
> 时间：2013-04-02T22:51:06.773
> 
> 标签：resharper, method-chaining

是否可以配置 resharper 来砍掉方法链中的所有方法

例如

```
var query = list.Where(x => true).Select(x => x); 
```

变成

```
var query = list
            .Where(x => true)
            .Select(x => x); 
```

如果没有，那么是否可以将 resharper 配置为在格式化时忽略方法链？所以我可以手动剪切文本，而不必担心重新格式化它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:08:24.637

不幸的是，没有办法`.Where`在`list`.

至于斩波，在`ReSharper | Options -> Code Editing | C# | Formatting Style | Line Breaks and Wrapping -> Line Wrapping`called中有一个选项`Wrap chained method calls`。如果您将其设置为`Chop always`，它会截断，但它使用稍微不同的格式：

```
var query = list.Where(x => true)
                .Select(x => x); 
```

如果您将其保留为`Chop if long`（默认值），那么除非它很长（超过`Right margin`选项，它在上面提到的同一选项组中），否则它不会重新切割您的代码。

# ruby - 如何根据数组中索引的特定倍数进行选择

> ID：15775850
> 
> 赞同：2
> 
> 时间：2013-04-02T22:51:53.413
> 
> 标签：ruby

这可能是非常基本的问题。

假设我有一个包含 19 个项目的数组`[0,1,2,3,4..19]`。我怎么能只选择索引计数是给定数字的倍数，即 2？

**更新：**假设此代码旨在用于列。鉴于所有索引都是一的倍数，如何设法获取第一列的索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:58:20.293

选择给定数字的倍数的元素（如果您的元素等于索引则有效）：

```
ary.select { |element| element % 2 == 0 } 
```

在这种特殊情况下，您还可以使用符号来触发：

```
ary.select &:even? 
```

如果您的元素与索引不同，请成对组合 2 并使用第一个元素：

```
ary.each_slice(2).map { |slice| slice[0] } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T22:58:50.007

查看[Enumerable#select](http://ruby-doc.org/core-1.9.3/Enumerable.html)（`Array`包括`Enumerable`）。你可以这样做：

```
1.9.3p392 :001 > a = [1,2,3,4,5,6]
 => [1, 2, 3, 4, 5, 6]
1.9.3p392 :002 > a.select {|n| n % 2 == 0}
 => [2, 4, 6] 
```

`select`将过滤数组，挑选出块返回 true 的任何内容。在这种情况下，使用 mod ( `%`) 运算符查找可被 2 整除的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T23:12:13.047

如果我理解正确，您只想采用偶数索引。尝试使用[each_index](http://www.ruby-doc.org/core-2.0/Array.html#method-i-each_index)。

```
arr = (0..19).to_a
arr.each_index { |x| puts arr[x] if x % 2 == 0 } 
```

这打印：

```
0
2
4
6
8
10
12
14
16
18 
```

如果你想要数组的偶数元素，你也可以使用`find_all`。

```
arr.find_all { |e| e.even? } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T01:24:42.003

```
(1..19).to_a.select{|e| e.%(2).zero?} 
```

这比使用`== 0`.

# django - 无法在 Django 中同步表

> ID：15775851
> 
> 赞同：1
> 
> 时间：2013-04-02T22:51:53.850
> 
> 标签：django, database-connection

目前使用 Python Django 1.4 编程。在我的文件中，我为 MySQL 数据库编写了 CREATE TABLE 函数`productos`并`clientes`在其中创建。当我检查`python manage.py sqlall ventas`（作为and`ventas`的父目录）时，它会输出该代码片段。但是，当我尝试在 localhost admin 下访问它们时， 出现错误。这两个表现在确实出现在 MySQL 中。`productos``clientes``1146, "Table 'demo.ventas_cliente' doesn't exist"`

最初我删除了这两个表，因为有一些数据库错误。我又跑`syncdb`了，但似乎没有检索到那两张表。似乎有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:12:49.603

我强烈建议您不要直接键入 MySql 命令，这可能会在将来给您带来很多错误。要在 Django 中创建表，您必须创建模型。例如：

1）在 ./Yourproject/apps/yourDBName 创建 __ init __.py

2）在“已安装的应用程序”下的 settings.py 中添加您的新应用程序。示例：yourproject.apps.yourapp

4）执行“python manage.py runserver”

5) 在你的新应用中创建 models.py

6）现在您可以像这样创建模型：

```
class myTable(models.Model):
    name  = models.CharField(max_length=50)
    email = models.EmailField() 
```

7）如果您想从管理员访问您的新表，请在您的应用程序中创建 admin.py 并键入：

```
from django.contrib import admin
from models import myTable

admin.site.register(myTable)
#here, you can add more tables to the admin in the future 
```

另外，如果您需要使用外键：

```
class parentTable(models.Model):
     idParent     = models.AutoField(primary_key=True)
     parentName   = models.CharField(null=False)

class childTable(models.Model):
     idChild          = models.AutoField(primary_key=True)
     MyParentName     = models.ForeignKey(parentTable, to_field='parentName')
     childName        = models.CharField(null=False) 
```

**更多信息：** [https ://docs.djangoproject.com/en/dev/topics/db/models/](https://docs.djangoproject.com/en/dev/topics/db/models/)

# xml - 为什么在 Eclipse 编辑器中打开 XML 文件这么慢？

> ID：15775855
> 
> 赞同：5
> 
> 时间：2013-04-02T22:52:04.153
> 
> 标签：xml, eclipse

这种情况经常发生，即使 XML 大小不大。

有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:29:07.700

不要按照其他答案中的建议下载里程碑版本。这在 Eclipse 4.2.2 中早已得到修复，因此只需使用嵌入式升级管理器将现有安装升级到 4.2.2 就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:30:14.523

如 user1929959 所述，eclipse 中有一个错误。如果您进入他提供的链接，那么您可以看到解决方案。

您可以在 - [http://granite.eclipse.org/eclipse/downloads/drops4/M20121107-1200/](http://granite.eclipse.org/eclipse/downloads/drops4/M20121107-1200/) 相应的更新站点中找到修复： - [http://download.eclipse.org/eclipse/updates/4.2-M-构建](http://download.eclipse.org/eclipse/updates/4.2-M-builds)

**笔记：**

1.  但请注意，升级您的 Java EE 软件包可能无法正常工作，上述更新站点目前仅适用于 Eclipse SDK，抱歉。
2.  如果您阅读了之前提供的链接 ( [https://bugs.eclipse.org/bugs/show_bug.cgi?id=391868](https://bugs.eclipse.org/bugs/show_bug.cgi?id=391868) ) 中的完整帖子，那么您可能会获得更多详细信息。

# html - phonegap 垂直加水平滚动，单点触摸多个元素

> ID：15775856
> 
> 赞同：1
> 
> 时间：2013-04-02T22:52:04.130
> 
> 标签：html, ios, cordova, touch, vertical-scroll

这个不适合家里的孩子。我会奖励任何接近解决方案的人。我已经包含了一个我想要你可以用来尝试解决问题的工作示例。这必须在 iphone/android 设备上的 phonegap 应用程序中工作。我想做的很简单。我希望能够使用包含 div 中的“文本元素”进行垂直滚动。当我触摸右侧的红色图像时，它们可以水平滚动。如果我将图像横向滚动，那很好，但如果我一直按住手指并垂直滚动，则文本元素不会发生任何事情。当我按下图像元素时，我希望能够垂直滚动文本元素。请帮我解决这个问题:)

```
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style type="text/css">

   #exerciseMenu{

    height:600px;
    overflow:scroll;
   }
.scrollImages{
            width: 100px;
            height: 125px;
            margin:10px 5px;
            float:left;
            background-color:red;

        }
    .headerWrapper{
            display: -webkit-box;
            display: -moz-box;
            display: box;
            -webkit-box-align: center;
            -moz-box-align: center;
            box-align: center;
            width:200px;
            height:157px;

        }
.exerciseWrapper{

    margin-top:5px;
    margin-right:5px;
    margin-left:5px;

    position:relative;
        border:5px solid black;
        background-color:white;
            height:157px;

        } 
.scrollWrapper {

                position:absolute; 
                border-left:6px solid black;
                right:0px;
                top:0px;
                padding-left:5px;
                width:260px;
                height:148px;
                background:#aaa;

                overflow-x:auto;

            } 
.scroller {
                padding:0;
                width:1000px;

            }
    </style>

    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script type="text/javascript">
       $(document).ready(function(){

 $('body').append('<div id="exerciseMenu"></div>'); 

        for (var i=0;i<8;i++)
            {           
                AppendMenuItems();
            }

        });
       function AppendMenuItems(){

  var menuu=$('#exerciseMenu').append('<div class="exerciseWrapper">TEXT<div class="scrollWrapper"><div class="scroller">'+ 
            '<div class="scrollImages">Im</div>'+
            '<div class="scrollImages">Im</div>'+
            '<div class="scrollImages">Im</div>'+
            '<div class="scrollImages">Im</div>'+
            '<div class="scrollImages">Im</div>'+
            '<div class="scrollImages">Im</div>'+
            '<div class="scrollImages">Im</div>'+
            '<div class="scrollImages">Im</div>'+
            '</div></div></div></div>');

}
    </script>

</head>
<body>

</body>
</html> 
```

# xcode - 无效后未声明的标识符

> ID：15775857
> 
> 赞同：-2
> 
> 时间：2013-04-02T22:52:04.577
> 
> 标签：xcode, void, identifier

我在 void is it says undeclared identifier for sliderDidChange 的行上遇到了这个错误，有人可以帮我解决这个问题，我找不到任何答案。

H。文件

```
//
//  LightViewController.h
//  Flash Light
//
//  Created by John Whitney on 12-07-27.
//  Copyright (c) 2012 Perfect Programs. All rights reserved.
//
#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>

@interface LightViewController : UIViewController {
IBOutlet UISlider *slider;
IBOutlet UISlider *theslider;
IBOutlet UISlider *customslider;
UIButton *onButton;
UIButton *offButton;
UIImageView *onView;
UIImageView *offView;
}

@property(nonatomic, strong) IBOutlet UIButton *onButton;
@property(nonatomic, strong) IBOutlet UIButton *offButton;
@property(nonatomic, strong) IBOutlet UIImageView *onView;
@property(nonatomic, strong) IBOutlet UIImageView *offView;
@property(nonatomic, readonly) float torchLevel;

-(void)sliderDidChange:(UISlider *)slider;
-(BOOL)setTorchModeOnWithLevel:(float)torchLevel error:(NSError **)outError;
-(BOOL)supportsAVCaptureSessionPreset:(NSString *)preset;
-(IBAction)torchOn:(id)sender;
-(IBAction)torchOff:(id)sender;
@end 
```

m.文件

```
UISlider *localslider = [[UISlider alloc] initWithFrame:CGRectMake(20.0f, 20.0f, 280.0f, 40.0f)];
localslider.maximumValue = 1.0f;
localslider.minimumValue = 0.0f;
[localslider setContinuous:YES];
[localslider addTarget:self action:@selector(sliderDidChange:)  forControlEvents:UIControlEventValueChanged];
[self.view addSubview:localslider];

-(void)sliderDidChange:(UISlider *)slider
{

AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
[device lockForConfiguration:nil];
[device setTorchModeOnWithLevel:slider.value error:NULL];
[device unlockForConfiguration];
} 
```

有人可以帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:38:58.383

那么问题可能是您`{`在该代码行上方的任何位置添加了

请确保所有打开的大括号都正确闭合

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:25:50.273

我假设 1）您已经在 .m 文件中综合了您的属性，2）您已经实现了 .h 文件中声明的所有方法，以及 3）您创建`localslider`对象的 .m 文件中的 6 个语句，即后面的`-(void)sliderDidChange:(UISlider *)slider`, 是`viewDidLoad`方法的一部分。
在这种情况下，您应该只收到一条警告，即`slider`您的`-(void)sliderDidChange:(UISlider *)slider`方法的参数隐藏了此方法中具有相同名称的实例变量。

# ruby-on-rails - 用什么来代替 update_all 和 update_attributes？（有人说它们已被弃用）

> ID：15775862
> 
> 赞同：1
> 
> 时间：2013-04-02T22:52:18.550
> 
> 标签：ruby-on-rails

我看到了`update_all`并被`update_attributes`弃用：

[http://apidock.com/rails/ActiveRecord/Base/update_all/class](http://apidock.com/rails/ActiveRecord/Base/update_all/class)
[http://apidock.com/rails/ActiveRecord/Base/update_attributes](http://apidock.com/rails/ActiveRecord/Base/update_attributes)

应该使用什么来更新一个/多个记录的参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:53:44.990

我相信`update_columns`这是您正在寻找的。

> 更新对象的给定属性，而不调用 save，因此跳过验证和回调。 [https://github.com/rails/rails/commit/2d9e5a26a10e5f83f9b3ac465bd45b2e15a0bc2a](https://github.com/rails/rails/commit/2d9e5a26a10e5f83f9b3ac465bd45b2e15a0bc2a)

```
# Rails 4.0.0
User.first.update_columns({:name => "sebastian", :age => 25}) 
```

# php - php - foreach() 中的 bind_param 未正确传递

> ID：15775864
> 
> 赞同：1
> 
> 时间：2013-04-02T22:52:31.727
> 
> 标签：php, foreach, mysqli

我确定这是重复的，但是我在这里的网站上尝试了几种不同的方法，但没有一种对我有用。我在 php 中调用我的函数，发送 $mysqli 连接、$clientID 和要上传的 $tagFields 数组。

它正在“工作”，但值始终为空。我已将 echo "$tagName" 放入 foreach 中，它正在读取它，但没有将其发送到数据库。但是，$clientID 正在传递信息。所以基本上它所做的就是将一致的空白行上传到我的数据库中。我在这里做错了什么？

```
function tagRefresh($mysqli,$clientID,$tagFields) {
    $stmt = $mysqli->stmt_init();
    $query = "INSERT INTO client_tags (client_id,tag_category) VALUES (?,?) ";
    $stmt->prepare($query);
    foreach($tagFields as $tagName) {
        $stmt->bind_param('is',$clientID,$tagName);
        $stmt->execute();
    }
} 
```

$tagFields 的一些示例值：

```
$tagFields[0] = "Regional";$tagFields[1] = "Automotive";$tagFields[2] = "Maintenance"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T01:41:18.583

注意**[mysqli_stmt::bind_param](http://php.net/manual/en/mysqli-stmt.bind-param.php)**绑定变量的引用。试试下面的：

```
function tagRefresh($mysqli,$clientID,$tagFields) {
    $stmt = $mysqli->stmt_init();
    $query = "INSERT INTO client_tags (client_id,tag_category) VALUES (?,?) ";
    $stmt->prepare($query);
    $stmt->bind_param('is', $clientID, $tagName);
    foreach($tagFields as $tagName) {
        $stmt->execute();
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T01:08:17.420

在与数据库相关的无数问题中（包括 client_id 作为主键），我重新构建了这样的公式：

```
function tagRefresh($mysqli,$clientID,$tagFields) {
    $query = "DELETE FROM client_tags WHERE client_id = '" . $clientID . "'"; //we have to delete the old ones every time
    if(!$mysqli->query($query)) {
        echo $mysqli->error;
    }

    if($tagFields != '') { //see if data was sent
        $tags = array();
        foreach($tagFields as $tag) {
            $tags[] = "('" . (int) $clientID . "', '" . $tag ."')"; //build an array
        }
        $query = "INSERT INTO client_tags (client_id,tag) VALUES " . implode(',', $tags) . " ON DUPLICATE KEY UPDATE client_id = " . $clientID;
        if(!$mysqli->query($query)) {
            echo $mysqli->error; //drop errors, will attach this later
        }
    }
} 
```

这种格式是这样的：

```
INSERT INTO client_tags (client_id,tag) VALUES ('1234','mechanical'),('1234','regional'),('1234','service') ON DUPLICATE KEY UPDATE client_id = '1234'; 
```

ON DUPLICATE 部分很重要，因为出于某种原因，client_id 被设置为主键。我将不得不与应用程序人员交谈，看看这对他们是否重要。

不幸的是，没有使用 bind_param，但这是一个仅适用于公司员工的管理面板访问权限，现在这正在工作，我正在给他们自动完成框以引用现有值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T23:03:45.593

execute() 不应位于 foreach 内。

# machine-learning - 如何在 WEKA 中重新评估模型？

> ID：15775865
> 
> 赞同：0
> 
> 时间：2013-04-02T22:52:41.883
> 
> 标签：machine-learning, weka

我正在尝试使用线性回归解决 WEKA 中数字属性的数字分类问题，然后我想在现有数据集上测试我的模型，并在当前测试数据集上重新评估模型。

作为评估的结果，我得到了总结：

相关系数 0.9924 平均绝对误差 1.1017 均方根误差 1.2445 实例总数 17

但我没有结果，如下所示：[http ://weka.wikispaces.com/Making+predictions](http://weka.wikispaces.com/Making+predictions)

如何将 WEKA 带入我需要的结果？

谢谢你。

要回答我的问题 - 对于经过训练和测试的模型，右键单击模型并去可视化分类器错误。使用保存选项来保存实际值和预测值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:01:01.063

您使用的是命令行界面 (CLI) 还是 GUI。

如果是 CLI，上面链接中给出的命令可以正常工作

```
java weka.classifiers.trees.J48 -T unclassified.arff -l j48.model -p 0 
```

因此，当您训练模型时，您将其保存为 *.model (j48.model)，然后使用它来评估测试数据 (unclassified.arff)

# c# - 如何在 .NET/C# 中创建带有尾随点 (.) 的文件夹？

> ID：15775867
> 
> 赞同：2
> 
> 时间：2013-04-02T22:52:53.280
> 
> 标签：c#, .net-4.5, ntfs, create-directory

我需要使用 C# 创建带有尾随点 (.) 的文件夹。这是我的代码：

```
System.IO.Directory.CreateDirectory("d:\\MyCorp Inc."); 
```

但是该文件夹是在没有最后一个点的情况下创建的。有解决办法吗？

我正在使用 .NET Framework 4.5/C#。我的文件系统是 Windows 8 上的 NTFS。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T23:03:31.623

微软明确指出这是不应该做的事情：http: [//msdn.microsoft.com/en-us/library/aa365247%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa365247%28VS.85%29.aspx)

> 不要以空格或句点结尾的文件或目录名称。尽管底层文件系统可能支持此类名称，但 Windows shell 和用户界面不支持。但是，可以将句点指定为名称的第一个字符。例如，“.temp”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T22:55:50.280

这不是 .NET 的限制，而是[Win32](http://en.wikipedia.org/wiki/Windows_API) API 的限制。尝试在命令 shell 中创建一个：

```
c:\drop>mkdir test.

c:\drop>dir
 Volume in drive C has no label.
 Volume Serial Number is C0F3-338B

 Directory of c:\drop

2013-04-02  17:54    <DIR>          .
2013-04-02  17:54    <DIR>          ..
2013-04-02  17:54    <DIR>          test 
```

有关命名建议，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/aa365247%28VS.85%29.aspx)。去引用：

> • 不要以空格或句点结束文件或目录名称。尽管底层文件系统可能支持此类名称，但 Windows shell 和用户界面不支持。但是，可以将句点指定为名称的第一个字符。例如，“.temp”。

如果您真的非常坚持使用尾随点，请使用`\\?\C:\path.`.

```
c:\drop>mkdir \\?\c:\drop\test2.

c:\drop>dir
 Volume in drive C has no label.
 Volume Serial Number is C0F3-338B

 Directory of c:\drop

2013-04-02  17:58    <DIR>          .
2013-04-02  17:58    <DIR>          ..
2013-04-02  17:54    <DIR>          test
2013-04-02  17:58    <DIR>          test2. 
```

* * *

**编辑：**内容中列出的要求是不创建其他文件，因此不要使用文件。您可以在目录上创建一个“名称”流并将数据存储在那里。有关示例，请参见以下内容：

```
c:\drop>mkdir "Example Company Name"
c:\drop>notepad "Example Company Name:name.txt"
c:\drop>dir
 Volume in drive C has no label.
 Volume Serial Number is C0F3-338B

 Directory of c:\drop

2013-04-02  18:25    <DIR>          .
2013-04-02  18:25    <DIR>          ..
2013-04-02  18:25    <DIR>          Example Company Name
               0 File(s)              0 bytes
               3 Dir(s)  77,336,379,392 bytes free
c:\drop>dir "Example Company Name"
 Volume in drive C has no label.
 Volume Serial Number is C0F3-338B

 Directory of c:\drop\Example Company Name

2013-04-02  18:25    <DIR>          .
2013-04-02  18:25    <DIR>          ..
               0 File(s)              0 bytes
               2 Dir(s)  77,336,313,856 bytes free 
```

或在 .NET 中：

```
class Program
{
    static void Main(string[] args)
    {
        string companyName = "Example Company?*, Inc.";

        //Example Company Inc
        var sanitizedName = sanitize(companyName);

        //Create the directory
        Directory.CreateDirectory(sanitizedName);

        //Create the name store
        var nameStreamPath = sanitizedName + ":Name";
        writeFileContent(companyName, nameStreamPath);

        //Try to return the name
        Console.WriteLine(getFileContent(nameStreamPath));
        Console.ReadLine();
    }

    private static string getFileContent(string path)
    {
        using (var sr = new StreamReader(new FileStream(
            // we have to call CreateFile directly to avoid overzealous path validation
            NativeMethods.CreateFileOrFail(path, false), FileAccess.Read)))
        {
            return sr.ReadToEnd();
        }
    }

    private static void writeFileContent(string companyName, string path)
    {
        using (var sw = new StreamWriter(new FileStream(
            // We have to call CreateFile directly to avoid overzealous path validation
            NativeMethods.CreateFileOrFail(path, true), FileAccess.Write)))
        {
            sw.Write(companyName);
        }
    }

    private static string sanitize(string path)
    {
        char[] newPath = new char[path.Length];
        int newPathLoc = 0;
        for (int i = 0; i < path.Length; i++)
        {
            if (char.IsLetter(path[i]) || char.IsDigit(path[i]))
            {
                newPath[newPathLoc] = path[i];
                newPathLoc++;
            }
        }
        return new string(newPath, 0, newPathLoc);
    }
}

class NativeMethods
{
    [DllImport("Kernel32.dll", SetLastError = true, CharSet = CharSet.Auto)]
    private static extern SafeFileHandle CreateFile(
        string fileName,
        [MarshalAs(UnmanagedType.U4)] FileAccess fileAccess,
        [MarshalAs(UnmanagedType.U4)] FileShare fileShare,
        IntPtr securityAttributes,
        [MarshalAs(UnmanagedType.U4)] FileMode creationDisposition,
        [MarshalAs(UnmanagedType.U4)] FileAttributes flags,
        IntPtr template);

    public static SafeFileHandle CreateFileOrFail(string path, bool write)
    {
        var handle = CreateFile(path,
            write ? FileAccess.Write : FileAccess.Read,
            write ? FileShare.None : FileShare.Read,
            IntPtr.Zero,
            write ? FileMode.Create : FileMode.Open,
            FileAttributes.Normal,
            IntPtr.Zero);

        if (handle.IsInvalid)
            throw new System.ComponentModel.Win32Exception();

        return handle;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T22:59:14.370

尝试：

```
using System.Runtime.InteropServices;
class Program
{
    [DllImport("kernel32.dll", SetLastError = true)]
    public static extern bool CreateDirectory(string lpPathName, IntPtr lpSecurityAttributes);

    private static void Main(string[] args)
    {
        CreateDirectory(@"\\?\c:\temp\MyCorp Inc.", IntPtr.Zero);
    } 
```

并参阅*[您不能删除 NTFS 文件系统卷上的文件或文件夹](http://support.microsoft.com/?kbid=320081)*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T23:09:02.220

**更新：**

**我注意到了两件事！**

**1）您的要求：**

> 我有很多客户根据公司名称命名他们的文件夹，例如“Some Corp Ltd.”，这些名称通常包含尾随点。我不能在其他任何地方存储名称，我没有数据库，也不能创建额外的文件，这是要求。

**2) 你没有得到答案**

我的建议是在目录名称的末尾添加一个额外的字符，这将对普通视图隐藏，但仍然存在！这让我们很高兴！

**试试这个**

> ***您必须在目录名称的末尾附加一个特殊字符***

```
System.IO.Directory.CreateDirectory
                    (@"D:\Sync.inc." + (char)(128)); 
```

> **注意：(char)(128) 到 (char)(158) 可能会有所帮助**

**尝试爆炸！**

```
for (int i = 128; i <= 158; i++)
{
    System.IO.Directory.CreateDirectory
        (@"D:\Sync.inc." + (char)(i));
} 
```

无论如何，来自MS：

> 如果点位于名称的末尾，Windows 默认会忽略这些点。
> 
> 看看 [http://social.technet.microsoft.com/Forums/en-US/w7itproui/thread/84978c71-8203-404b-94cf-b05b14be99db/](http://social.technet.microsoft.com/Forums/en-US/w7itproui/thread/84978c71-8203-404b-94cf-b05b14be99db/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T22:56:21.720

如果您尝试在 Windows 资源管理器中手动执行此操作，即使资源管理器也不允许尾随点并为您删除它。

我想这是 Windows 本身的限制，因为末尾的句点通常表示文件扩展名。

在这个时候我会说这是不可能的。

# string - 不使用反向检测回文

> ID：15775871
> 
> 赞同：0
> 
> 时间：2013-04-02T22:53:16.697
> 
> 标签：string, scheme, racket, reverse, palindrome

我在想一种方法来创建一个不使用反向来检测回文的函数……我想我会很聪明，做一个条件，即子串 0 到中间等于子串端到中间。我发现它只适用于带有 3 个字母“wow”的单词，因为“w”=“w”。但如果字母像“wooow”，wo 不等于 ow。什么是不使用反向函数检测回文的方法？

提示或解决方案可能会很有帮助

```
(define (palindrome? str)
(cond
((equal? (substring str 0 (- (/ (string-length str) 2) 0.5))
         (substring str (+ (/ (string-length str) 2) 0.5) (string-length str))) str)
 (else false))) 
```

哦，我正在使用初学者语言，所以我不能使用地图或过滤器之类的东西

是的，我知道这是一个非常没用的功能哈哈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:07:52.210

可以通过弄乱给定索引中的字符串字符来解决这个问题。诀窍是[`string-ref`](http://docs.racket-lang.org/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string-ref%29%29)明智地使用。在这里，让我给您一些提示，指出适用于初学者语言的解决方案：

```
; this is the main procedure
(define (palindrome? s)
  ; it uses `loop` as a helper
  (loop <???> <???> <???>))

; loop receives as parameters:
; `s` : the string
; `i` : the current index, starting at 0
; `n` : the string's length
(define (loop s i n)
  (cond (<???>  ; if `i` equals `n`
         <???>) ; then `s` is a palindrome
        (<???>  ; if the char at the current index != its opposite (*)
         <???>) ; then `s` is NOT a palindrome
        (else   ; otherwise
         (loop <???> <???> <???>)))) ; advance the recursion over `i` 
```

当然，有趣的部分是标有 的部分`(*)`。`0`想想看，如果索引处的字符等于索引处的字符`n-1`（`n`即字符串的长度）*并且*`1`索引处的字符等于索引处的字符，则字符串是回文`n-2`，依此类推。一般来说，如果索引处的字符确实`i`等于索引处的字符`n-i-1`（它的“相反”）对于 all `i`，那么我们可以得出结论该字符串是回文 - 但如果一对相反的字符不等于彼此，那么这不是回文。

作为进一步的优化，请注意您不需要遍历*整个*字符串，只需测试字符串长度的一半（这在 Chris 的回答中对此进行了解释）就足够了 - 直观地，您可以看到，如果char at`i`等于 char at `n-i-1`，那么 char at`n-i-1`等于 char at `i`，所以不需要两次执行相同的测试。

尝试自己编写程序，不要忘记测试它们：

```
(palindrome? "")
=> #t
(palindrome? "x")
=> #t
(palindrome? "axa")
=> #t
(palindrome? "axxa")
=> #t

(palindrome? "axc")
=> #f
(palindrome? "axca")
=> #f
(palindrome? "acxa")
=> #f
(palindrome? "axcta")
=> #f 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T03:42:45.477

这是一个创造性的答案

```
(define (palindrome list)
  (let halving ((last list) (fast list) (half '()))
    (cond ((null? fast)       (equal? half last))
          ((null? (cdr fast)) (equal? half (cdr last)))
          (else (halving (cdr last) (cddr fast)
                         (cons (car last) half)))))) 
```

它在列表的中间行进（`fast`用于查找结尾），建立第一个列表，`half`然后简单地使用列表`equal?`的`half`其余部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T23:04:29.673

简单的。

1.  对于每一个`i`，从 0 到`floor(length / 2)`，比较 index`i`和 index 处的字符`length - i - 1`。
2.  如果不匹配，则返回 false。
3.  否则，如果循环用完，则返回 true。

骨架代码：

```
(define (palindrome? str)
  (define len (string-length str))
  (define halfway <???>)
  (let loop ((i 0))
    (cond ((>= i halfway) #t)
          ((char=? <???> <???>)
           (loop (+ i 1)))
          (else #f)))) 
```

# python - 在 Django 固定装置中加载 auth.user 和配置文件模型时出现 IntegrityError

> ID：15775888
> 
> 赞同：3
> 
> 时间：2013-04-02T22:54:41.923
> 
> 标签：python, django, fixtures

我正在尝试创建一些用于在 Django 中运行测试的装置。现在，我只是从我的开发数据库中转储适当的模型，然后通过测试加载它们。这是我用来转储灯具的命令：

```
python manage.py dumpdata accounts.Profile auth.User -n auth.User --indent 4 -e contenttypes > path/to/fixture.json 
```

在[这个问题](https://stackoverflow.com/questions/9942214/django-loading-users-using-inital-data-json?lq=1)和[这个](https://stackoverflow.com/questions/6447214/integrityerror-when-loading-fixture-during-django-testing?lq=1)问题之后，我添加了使用自然键和排除内容类型的标志。这无济于事——我收到以下错误消息：

```
IntegrityError: Could not load accounts.Profile(pk=1): duplicate key value violates unique constraint "accounts_profile_user_id_key"
DETAIL:  Key (user_id)=(1) already exists 
```

我已经手动检查了灯具，并且该用户 ID 只有一个条目。Profile 模型非常标准，带有一些带有个人信息的额外字段。它通过以下方式链接到模型中的用户：

```
def create_user_profile(sender, instance, created, **kwargs):
    if created:
        Profile.objects.create(user=instance)

post_save.connect(create_user_profile, sender=User) 
```

以完整性的名义，以下是固定装置的外观：

```
{
    "pk": 1, 
    "model": "auth.user", 
    "fields": {
        "username": "unique_username", 
        "first_name": "", 
        "last_name": "", 
        "is_active": true, 
        "is_superuser": true, 
        "is_staff": true, 
        "last_login": "2013-03-31T23:19:44.391", 
        "groups": [], 
        "user_permissions": [], 
        "password": "secret",
        "email": "email", 
        "date_joined": "2013-03-13T21:30:39.225"
    }
},
{
    "pk": 1, 
    "model": "accounts.profile", 
    "fields": {
        "status": "active", 
        "first_name": "John", 
        "last_name": "Smith", 
        "middle_name": null, 
        "headline": "Something very cool", 
        "user": [
            "unique_username"
        ], 
        "location": null
    }
} 
```

有任何想法吗？是因为我用来链接用户和个人资料的钩子吗？

我在 Mac OS X (10.7.5) 上使用 Python 2.6 的 Enthought 发行版运行 Django 1.4。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-01-22T13:25:18.957

如果您有以下情况，这通常发生在 OneToOneFields() 中：

Profile.user = models.OneToOneField(User) 当 django 创建用户记录时，它会自动为这些用户创建配置文件（可能通过 post_save）。因此，当 loaddata 开始导入配置文件时，每个用户已经有一个配置文件，并且其他配置文件打破了约束。

我有 2 个模型通过 OneToOneField 指向用户：

*   简介；
*   日历。

要解决此问题：

1) 将 auth.user 导出为单独的 auth_user.json；

```
./manage.py dumpdata --indent=4 auth.user > auth_user.json 
```

2）导出其他模型：

```
./manage.py dumpdata --indent=4 -e sessions -e admin -e contenttypes -e auth.Permission --natural-foreign > other_models.json 
```

3）加载用户记录：./manage.py loaddata auth_user

4) 打开`./manage.py shell` 或`shell_plus` 删除所有配置文件和日历记录：

```
Profiles.objects.all().delete()
Profiles.objects.all().count()
Calendar.objects.all().delete()
Calendar.objects.all().count() 
```

5）加载其余记录：

```
./manage.py loaddata other_models 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-13T20:05:53.637

我遇到了同样的问题。在我的情况下，我确认用户 id=1 的数据库行不存在（通过 User.objects.all()）。

就我而言，事实证明我正在加载两个固定装置：

*   initial_preferences.json（自定义用户首选项）
*   initial_admin_user.json

首选项夹具模型具有对用户的 ForeignKey 引用。如果我首先加载首选项，我会收到重复键错误，即使仍然没有用户 id=1。

在首选项修复 moe 的问题之前交换顺序以加载 admin_user。

所以——检查你是否已经创建了其他引用用户 id=1 的模型对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T23:31:23.623

问题是您正在尝试将固定装置加载到已经包含这些行的数据库中，因此它会引发`IntegrityError`. 您可以在运行 之前删除表格`loaddata`，但实际上固定装置应该只用于最初填充表格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-18T21:40:43.823

你在使用 Postgres 数据库吗？

我在加载固定装置并将 Postgres 作为我的数据库时遇到了类似的问题。自动增量序列未设置为应设置的值。

这篇文章帮助了我：[https ://www.vlent.nl/weblog/2011/05/06/integrityerror-duplicate-key-value-violates-unique-constraint/](https://www.vlent.nl/weblog/2011/05/06/integrityerror-duplicate-key-value-violates-unique-constraint/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-20T21:54:16.960

使用时`OneToOneField`您可能已经定义了一个`post_save`信号。因此，当创建用户时`post_save`，随后的信号会创建配置文件，而当`loaddata`尝试创建相应的配置文件时，它已经由`post_save`信号创建。最简单的做法是注释掉`post_save`代码中的信号，以便执行`loaddata`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-11T06:47:46.163

这可能不是题外话，但由于谷歌在这里指出了与加载固定装置类似的问题，例如。`contenttypes.ContentType`我愿意帮忙。

当数据更改它的主键时，使用[自然键](https://docs.djangoproject.com/en/1.9/topics/serialization/#natural-keys)来避免重复键值违规。

在转储数据期间添加[`--natural-foreign`](https://docs.djangoproject.com/en/1.9/ref/django-admin/#cmdoption-dumpdata--natural-foreign)选项，例如：

```
$ python manage.py dumpdata --natural-foreign contenttypes auth.Permission auth.Group 
```

# c# - 用另一个 XmlNode 替换 XmlNode

> ID：15775892
> 
> 赞同：2
> 
> 时间：2013-04-02T22:55:03.783
> 
> 标签：c#, xml, xmldocument

我正在使用一段较旧的代码，所以我没有使用 XDocument 的选项。

我正在尝试将一个 XmlNode 替换为另一个，但由于某种原因 XmlDocument.ReplaceChild() 抱怨：要删除的节点不是该节点的子节点。

我不明白为什么会收到此错误，因为我从要替换的元素中获取对 XmlDocument 的引用。

```
private XmlNode ReplaceWithSpan(XmlNode node)
{
    if (XmlNodeType.Element == node.NodeType)
    {
        XmlDocument ownerDocument = node.OwnerDocument;
        XmlNode spanNode = ownerDocument.CreateElement("span");

        for (int i = 0; i < node.Attributes.Count; i++)
        {
            XmlAttribute attribute = node.Attributes[i];
            AddAttribute(spanNode, attribute.Name, attribute.Value);
        }
        ownerDocument.ReplaceChild(spanNode, node); //this doesn't work
        return spanNode;
    }
    throw new InvalidCastException(string.Format("Could not replace custom edit node of type {0}.", node.NodeType.ToString()));
} 
```

有人可以在我出错的地方吗？

**更新**

想通了。问题是旧节点不是所有者文档的直接子节点。以下更改有效：

```
 node.ParentNode.ReplaceChild(spanNode, node);
  return spanNode; 
```

# json - 学院/大学数据 API

> ID：15775893
> 
> 赞同：10
> 
> 时间：2013-04-02T22:55:14.007
> 
> 标签：json, api, web-scraping

我正在尝试构建一个应用程序，允许用户查找特定大学并查看有关它的数据（录取率、SAT 分数、规模等）。但是，我找不到可以使用的 API/数据库。我知道[IPEDS 网站](http://nces.ed.gov/ipeds/datacenter/Default.aspx)拥有所有这些信息，但他们似乎没有可通过 GET 或 URL 请求或任何其他方式访问的 API。

有谁知道我可以访问这些信息（或访问一些不可见的 IPEDS API）的方法？谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-27T02:37:03.803

刚刚想通了。事实证明，您可以使用 IPEDS 数据库来获取此信息，但它不提供 API 来执行此操作。进入[IPEDS](http://nces.ed.gov/ipeds/datacenter/InstitutionByName.aspx)并创建一组你想要的机构（例如美国所有 4 年制、授予学位的大学），选择你想要的变量（地址、录取率等），然后最后以 CSV 格式导出数据. 如果您希望数据格式不那么糟糕，只需将其转换为 JSON 或任何您想要的格式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-20T20:54:05.793

大量 json、csv、pdf 和其他格式的数据位于：

[http://www.ed.gov/developer](http://www.ed.gov/developer)

一件有趣的事情：如果您获取他们的下载链接之一：

[https://inventory.data.gov/dataset/032e19b4-5a90-41dc-83ff-6e4cd234f565/resource/38625c3d-5388-4c16-a30f-d105432553a4/download/userssharedsdfpostscndryunivsrvy2010dirinfo.csv](https://inventory.data.gov/dataset/032e19b4-5a90-41dc-83ff-6e4cd234f565/resource/38625c3d-5388-4c16-a30f-d105432553a4/download/userssharedsdfpostscndryunivsrvy2010dirinfo.csv)

并且您将 .csv 更改为 .json，您仍然会得到一个 csv 文件。

# java - 我无法使用 swing 获得滚动条

> ID：15775897
> 
> 赞同：0
> 
> 时间：2013-04-02T22:55:32.783
> 
> 标签：java, swing, jscrollpane, jlist, jscrollbar

我有两个不同的地方应该出现滚动条。

一个是 JScrollPane 内的 JTable。我希望 JTable 的大小恒定，如果它太大，会出现滚动条，如果太小，它不会填充窗格。相反，它只是伸展以填充分配的空间。

另一个是在弹出的对话框中的垂直 JList。我希望它准确显示八行，如果它太长会出现一个滚动条，如果它太短会出现一个空单元格。相反，它显示所有行。

当我在这里时，如何控制 JList 的宽度？我只能找到如何控制长度。

# c# - 同时异步 API 调用

> ID：15775899
> 
> 赞同：0
> 
> 时间：2013-04-02T22:55:38.893
> 
> 标签：c#, multithreading, asynchronous, task-parallel-library

我有一个 Windows 应用程序，它必须每秒准确地调用 20 次 API。

要求是读取必须非常接近同时（在几毫秒内）完成。

以下代码使用每秒运行的计时器。aaList 是一个包含 20 个对象的列表。

不幸的是，使用我当前的代码，一些读取是在不同的时间（有时半秒后）完成的，所以很明显瓶颈正在某个地方形成。

谁能建议如何以更同步的方式实现我的要求？（也许我应该以不同的方式做到这一点？）

```
private void tmrAAProcess_Tick(object state)
{

     foreach (aa in aaList) {
          Task.Factory.StartNew(() =>
          {                       
             aa.ReadFromWebsite();
          }, TaskCreationOptions.LongRunning);

     }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:46:35.610

一个可能的问题是[ServicePointManager](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.aspx)默认只允许两个并发连接到同一个站点。你必须改变`DefaultConnectionLimit`财产，一个。

另一个问题是 TPL 将限制您的并行性。我不知道您的`ReadFromWebsite`方法是做什么的，但如果它正在进行阻塞调用（即`HttpWebRequest.GetResponse`），那么您很可能最终会得到一堆排队的任务。

我无法想象每个请求的持续速率为 50 毫秒。除非是内部服务器，否则仅通信时间可能会超过此时间。一段时间后，您的机器将失去连接，因为它正在等待响应。否则，所有这些排队的任务都会耗尽内存。

如果你想完成这项工作，你至少必须：

1.  修改`ServicePointManager.DefaultConnectionLimit`
2.  发出异步 Web 请求
3.  使用队列或信号量或类似的东西明确限制并发未完成请求的数量。

您应该保持最后 N 个（一些相当小的数字，例如 20 个）请求的响应时间的平均运行时间，并且不要让请求比这更快。

# curl - 使用命令行 cURL 发布文件内容

> ID：15775903
> 
> 赞同：4
> 
> 时间：2013-04-02T22:55:58.387
> 
> 标签：curl

我正在尝试使用`cURL`将数据发布到 URL。URL 需要`<form>`提交和`<textarea>`具有指定值的字段。我将值存储在文本文件中，我想运行`cURL`以将文件中的数据内容发布到网页。这就是我所拥有的 - 但是我认为我没有正确地转义文件位置：

```
curl -data info='@filename.txt' https://file.com/test > tmp.txt 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T23:06:47.773

查看手册页，将文件内容作为 POST 变量发送的正确语法是：

```
curl --data-urlencode 'info@filename.txt' https://file.com/test > tmp.txt 
```

# c++ - 结构未在 C++ 中更新其成员变量之一

> ID：15775906
> 
> 赞同：1
> 
> 时间：2013-04-02T22:56:06.820
> 
> 标签：c++

我有一个 struct Creature 和一个 struct Game。Game是Creature的“朋友”。在游戏中我有矢量生物；我通过一个名为 addC 的函数向该向量添加了一个生物 x

```
void addc (Creature& c){
    creatures.push_back(c);
} 
```

现在我在另一个函数“foo”中，它是 struct Game 的公共方法。

```
void foo (Creature& c){
    ...
} 
```

在该函数中，我需要从与来自生物 c 的某些信息相匹配的矢量生物中找到另一个生物。所以我在 Game 中创建了另一个名为 fooHelper 的公共方法

```
void fooHelper (char s, int x, int y){
    bool found = false;
    for (int i = 0; i < creatures.size() && (!found); ++i){
        Creature& c = creatures[i];
        if (x == c.x && y == c.y){
            c.s = s;
            found = true;
        }
    }
} 
```

但是，当我检查第二个生物的“s”成员是否正在更新时，事实证明不是！我不明白我做错了什么，因为我是通过引用向量来推动的。我从向量中通过引用来获取生物。

游戏中的矢量看起来像这样

```
struct Game{
    private:
        vector<Creature> creatures;
    ...
}

struct Creature{
    private:
        char s;
        int x; int y;
    ...
} 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:59:20.970

这个说法：

```
creatures.push_back(c); 
```

将的*副本*存储`c`到您的向量中：标准容器具有*值语义*。如果您需要引用语义，您应该将指针存储到您的向量中。

通常使用*智能指针*是个好主意，使用哪一个取决于应用程序的所有权策略。在这种情况下，根据我可以从您的问题文本中获得的信息，让`Game`成为游戏中所有 s 的唯一所有者似乎是合理`Creature`的（因此是唯一*负责*所拥有`Creature`s 的生命周期的对象，并且在特别是在不再需要它们时销毁它们），所以`std::unique_ptr`应该是一个不错的选择：

```
#include <memory> // For std::unique_ptr

struct Game{
private:
    std::vector<std::unique_ptr<Creature>> creatures;
    ...
}; 
```

您的成员函数`addc()`将变为：

```
void addc(std::unique_ptr<Creature> c)
{
    creatures.push_back(std::move(c));
} 
```

客户端会以这种方式调用它：

```
Game g;
// ...
std::unique_ptr<Creature> c(new Creature());
g.addc(std::move(c)); 
```

`foohelper()`另一方面，您的函数将被重写为如下内容：

```
void fooHelper (char s, int x, int y) {
    bool found = false;
    for (int i = 0; i < creatures.size() && (!found); ++i){
        std::unique_ptr<Creature>& c = creatures[i];
        if (x == c->x && y == c->y) {
            c->s = s;
            found = true;
        }
    }
} 
```

最后，您的类`Game`可以将*非拥有的*原始指针（或引用）返回给需要访问存储的生物的客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T22:59:09.510

当您将生物参考推入矢量时，它正在制作副本。它是“Creature”类型的向量，因此它会根据您提供的参考进行复制。一种解决方案是保留一个生物指针向量。

编辑 - 这个问题有助于解释为什么你不能有参考向量的原因比我能解释的更好：[为什么我不能制作参考向量？](https://stackoverflow.com/questions/922360/why-cant-i-make-a-vector-of-references)

# linux - 如何在 ssh 命令中使用长输入参数正确转义 qsub 命令？

> ID：15775911
> 
> 赞同：2
> 
> 时间：2013-04-02T22:56:23.793
> 
> 标签：linux, bash, unix, ssh

我有一个复杂的 qsub 命令可以远程运行。

```
PROJECT_NAME_TEXT="TEST PROJECT"
PACK_ORGANIZATION="--source-organization \'MY, ORGANIZATION\'"
CONTACT_NAME="--contact-name \'Tom Riddle\'"
PROJECT_NAME_PACK="--project-name \"${PROJECT_NAME_TEXT}\""

INPUTARGS="${PACK_ORGANIZATION} ${CONTACT_NAME} ${PROJECT_NAME_PACK}"

ssh mycluster "qsub -v argv="$INPUTARGS" -l walltime=10:00:00 -l vmem=8GB -l nodes=1:ppn=4 /myscript_path/run.script" 
```

问题是远程集群无法识别 qsub 命令，它总是显示不正确的 qsub 命令，或者因为输入参数错误而总是在集群上排队。

一定是转义问题，我的问题是如何正确转义上面的命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:10:04.550

尝试使用*here-doc*执行此操作：您有引号冲突（嵌套双引号是错误的）：

```
#!/bin/bash

PROJECT_NAME_TEXT="TEST PROJECT"
PACK_ORGANIZATION="--source-organization \'MY, ORGANIZATION\'"
CONTACT_NAME="--contact-name \'Tom Riddle\'"
PROJECT_NAME_PACK="--project-name \"${PROJECT_NAME_TEXT}\""

INPUTARGS="${PACK_ORGANIZATION} ${CONTACT_NAME} ${PROJECT_NAME_PACK}"

ssh mycluster <<EOF
qsub -v argv="$INPUTARGS" -l walltime=10:00:00 -l vmem=8GB -l nodes=1:ppn=4 /myscript_path/run.script
EOF 
```

如您所见，*here-docs*对于带引号的输入非常有帮助。

看[`man bash | less +/'Here Documents'`](http://www.gnu.org/software/bash/manual/bashref.html#Here-Documents)

## 编辑

从您的评论中：

* * *

> 我使用了这种方法，但它给了我“不会分配伪终端，因为标准输入不是终端。”

您可以忽略此警告

```
ssh mycluster <<EOF 2>/dev/null 
```

（如果需要，请尝试`-t`开关）`ssh`

* * *

如果你有

> `-bash: line 2: EOF: command not found`

我认为您有复制粘贴问题。尝试删除所有结束行上的多余空格

* * *

> 而且似乎这种方法无法将本地变量传递`$INPUTARGS`给远程集群

这似乎与您的`EOF`问题有关。

* * *

> `$argv`在远程集群上不返回任何内容

这是什么意思？`$argv`不是 中的预定义变量`bash`。如果您需要列出命令行参数，请使用预定义变量`$@`

* * *

最后一件事：确保您正在使用`bash`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T23:10:17.130

您的问题不在于长度，而在于引号的嵌套-在这一行中，您尝试使用`"`inside `"`，但这是行不通的：

```
ssh mycluster "qsub -v argv="$INPUTARGS" -l walltime=10:00:00 -l vmem=8GB -l nodes=1:ppn=4 /myscript_path/run.script" 
```

Bash 将看到它`"qsub -v argv="`后面是`$INPUTARGS`（未引用），然后是`" -l walltime=10:00:00 -l vmem=8GB -l nodes=1:ppn=4 /myscript_path/run.script"`.

反斜杠转义这些内部引号可能会产生预期的效果，但是在 bash 中嵌套引号会变得相当混乱。我经常尝试做的是`echo`在命令的开头添加一个，以显示扩展的各个阶段是如何展开的。例如

```
echo 'As expanded locally:'
echo ssh mycluster "qsub -v argv=\"$INPUTARGS\" -l walltime=10:00:00 -l vmem=8GB -l nodes=1:ppn=4 /myscript_path/run.script"
echo 'As expanded remotely:'
ssh mycluster "echo qsub -v argv=\"$INPUTARGS\" -l walltime=10:00:00 -l vmem=8GB -l nodes=1:ppn=4 /myscript_path/run.script" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T00:43:19.983

感谢所有答案，但是他们的方法不适用于我的情况。我必须自己回答这个问题，因为这个问题非常复杂，我从 stackoverflow 中的现有解决方案中得到了线索。

就我而言，有两个问题必须解决。

1.  将本地程序的参数传递给远程集群。Here-doc 解决方案在这种情况下不起作用。

2.  使用 long 变量作为包含引号符号的参数在远程集群上运行 qsub。

**问题1。**

首先，我必须介绍我在本地机器上运行的脚本采用如下参数：

```
scripttoberunoncluster.py --source-organisation "My_organization_my_department" --project-name "MyProjectName"  --processes 4 /targetoutputfolder/ 
```

真正的参数远比上面的长，所以所有的参数都必须发送到remote。它们以这样的文件形式发送：

```
PROJECT_NAME="MyProjectName"
PACK_ORGANIZATION="--source-organization '\\\"My_organization_my_department\\\"'" # multiple layers of escaping, remove all the spaces
PROJECT_NAME_PACK="--project-name '\\\"${PROJECT_NAME}\\\"'"
PROCESSES_="--processes 4"
TARGET_FOLDER_PACK="/targetoutputfolder/"

INPUTARGS="${PACK_ORGANIZATION} ${PROJECT_NAME_PACK} ${PROCESSES} ${TARGET_FOLDER_PACK}"

echo $INPUTARGS > "TempPath/temp.par"
scp "TempPath/temp.par" "remotecluster:/remotepath/" 
```

我的解决方案有点妥协。但是通过这种方式，远程集群可以运行参数包含引号的脚本。如果您没有将所有变量（作为参数）放在一个文件中并将其传输到远程集群，那么无论您如何将它们传递给变量，引号符号都将被删除。

**问题 2。**

检查 qsub 如何在远程集群上运行。

```
ssh remotecluster "qsub -v argv=\"`cat /remotepath/temp.par`\" -l walltime=10:00:00 /remotepath/my.script" 
```

在 my.script 中：

```
INPUT_ARGS=`echo $argv`

python "/pythonprogramlocation/scripttoberunoncluster.py" $INPUT_ARGS ; #note: $INPUT_ARGS hasn't quote 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-17T09:52:25.227

所描述的转义问题在于要求在**两次**评估过程之后保留参数周围的最终引号，即在两次评估之后，我们应该看到如下内容：

```
--source-organization "My_organization_my_department" --project-name "MyProjectName" --processes 4 /targetoutputfolder/ 
```

这可以通过首先将每个参数放在一个单独的变量中，然后用单引号将参数括起来，同时确保参数字符串中可能的单引号被“转义” `'\''`（实际上，参数将被拆分为单独的字符串，但在使用时，split-up 参数将自动由 UNIX（POSIX？）shell 的字符串评估机制重新连接。而且这个过程必须重复**三遍**。

```
{
escsquote="'\''"

PROJECT_NAME="MyProjectName"

myorg="My_organization_my_department"
myorg="'${myorg//\'/${escsquote}}'" # bash
myorg="'${myorg//\'/${escsquote}}'"
myorg="'${myorg//\'/${escsquote}}'"
PACK_ORGANIZATION="--source-organization ${myorg}"

pnp="${PROJECT_NAME}"
pnp="'${pnp//\'/${escsquote}}'"
pnp="'${pnp//\'/${escsquote}}'"
pnp="'${pnp//\'/${escsquote}}'"
PROJECT_NAME_PACK="--project-name ${pnp}"

PROCESSES="--processes 4"
TARGET_FOLDER_PACK="/targetoutputfolder/"

INPUTARGS="${PACK_ORGANIZATION} ${PROJECT_NAME_PACK} ${PROCESSES} ${TARGET_FOLDER_PACK}"

echo "$INPUTARGS"
eval echo "$INPUTARGS" 
eval eval echo "$INPUTARGS"
echo
ssh -T localhost <<EOF
echo qsub -v argv="$INPUTARGS" -l walltime=10:00:00 -l vmem=8GB -l nodes=1:ppn=4 /myscript_path/run.script
EOF

} 
```

如需更多信息，请参阅：

*   [引用练习 - 如何在第二个 ssh 中运行 sql 时在 ssh 中执行 ssh？](https://unix.stackexchange.com/q/55049/55108)
*   [引用 ssh $host $FOO 和 ssh $host "sudo su user -c $FOO" 类型的结构](https://unix.stackexchange.com/q/4770/55108)。

# uml - 如何在用例实现图中显示一段时间（间隙）后出现的事件？

> ID：15775913
> 
> 赞同：0
> 
> 时间：2013-04-02T22:56:36.520
> 
> 标签：uml, use-case

我想知道在用例实现图上显示一段时间后出现的事件的方法是什么。例如，假设一个演员点击他的智能手机的显示屏，显示屏打开并在 5 分钟后关闭。UML 中是否允许在“DisplayOFF(5min)”之类的事件上写一条消息，如果没有，最合适的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:44:33.243

What do you mean by "use-case realization diagram"? UML use case diagrams are unaware of sequence flows. It is also quite solution-independent, because it is rather meant to show objectives of a system. Have a look at UML sequence diagrams and check whether or not they satisfy your prescribed need.

# symfony - 未定义的方法 appDevDebugProjectContainer 监听器 Symfony 2.1.8

> ID：15775915
> 
> 赞同：0
> 
> 时间：2013-04-02T22:56:43.747
> 
> 标签：symfony, listener

我尝试使用 onKernelRequest 进行自定义侦听器，但出现此错误致命错误：调用未定义方法 appDevDebugProjectContainer::generate()

我的服务是：

```
services:
kernel.listener.Configurazione:
    class: My\ConfigurazioneBundle\Listener\Configurazione 
    tags:
      - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest }
    arguments: [@security.context,@router,@service_container] 
```

我的听众是：

```
namespace My\ConfigurazioneBundle\Listener;

use My\ConfigurazioneBundle\Event\ConfigurazioneEvent;
use Doctrine\ORM\EntityManager;
use Symfony\Component\Security\Core\SecurityContextInterface;
use Symfony\Component\HttpFoundation\RedirectResponse;
use Symfony\Component\DependencyInjection\ContainerInterface;
use Symfony\Component\HttpKernel\Event\GetResponseEvent;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\EventDispatcher\EventSubscriberInterface;
use Symfony\Component\Routing\Generator\UrlGeneratorInterface;

class Configurazione {

    protected $sicurezza;
    protected $router;
    protected $container;

    function __construct(SecurityContextInterface $securityContext, $container, $router) {
        $this->sicurezza = $securityContext;
        $this->container = $container;
        $this->router = $router;
    }

    public function onKernelRequest(GetResponseEvent $event) {

        $user = $this->sicurezza->getToken()->getUser();
        $container = $this->container;
        $url = $this->router->generate('homepage');
    }

} 
```

我有这个错误

致命错误：调用未定义的方法 appDevDebugProjectContainer::generate()

我的 composer.json

```
 "require": {
        "php": ">=5.3.3",
        "symfony/symfony": "2.1.8",
        "doctrine/orm": ">=2.2.3,<2.4-dev",
        "doctrine/doctrine-bundle": "1.1.*",
        "twig/extensions": "1.0.*@dev",
        "symfony/assetic-bundle": "2.1.*",
        "symfony/swiftmailer-bundle": "2.1.*",
        "symfony/monolog-bundle": "2.1.*",
        "sensio/distribution-bundle": "2.1.*",
        "sensio/framework-extra-bundle": "2.1.*",
        "sensio/generator-bundle": "2.1.*",
        "jms/security-extra-bundle": "1.2.*",
        "jms/di-extra-bundle": "1.1.*",
        "kriswallsmith/assetic": "1.1.*@dev",
        "stof/doctrine-extensions-bundle": "dev-master",
        "friendsofsymfony/user-bundle": "*",
        "punkave/symfony2-file-uploader-bundle":"*",
        "willdurand/expose-translation-bundle": "dev-master",
        "apy/jsfv-bundle":"dev-master",
        "cypresslab/compass-elephant-bundle":"dev-master",
    }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:01:55.070

在`Configurazione`类中，您有三个参数：安全上下文、服务容器和路由器。在服务中，您以错误的顺序输入了 [@security.context,@router,@service_container]。

因此，PHP 尝试执行类`generate`的方法`Container`，而不是`Router`类

最好定义参数类型以避免这种错误。在您的情况下，它应该是：

```
public function __construct(SecurityContextInterface $securityContext, ContainerInterface $container, RouterInterface $router) 
```

您也可以只传递容器并从构造函数中获取相应的服务：

```
public function __construct(ContainerInterface $container)
{
    $this->router = $container->get('router');
    $this->securityContext = $container->get('security.context');
} 
```

# ios - UINavigationItem 中的 SearchBar 不会是第一个控制器

> ID：15775917
> 
> 赞同：0
> 
> 时间：2013-04-02T22:56:47.753
> 
> 标签：ios, objective-c, cocoa-touch

我的 UINavigationItem 中有一个 UISearchBar，如下所示：

```
searchBar = [[UISearchBar alloc] init];
[searchBar setDelegate:self];
self.navigationItem.titleView = searchBar; 
```

然后在我的表格视图中我使用：

```
-(void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
{
    [self.searchBar resignFirstResponder];
} 
```

-- 这样如果用户滚动浏览结果，键盘就会消失。

但是，现在当我再次点击搜索栏时，我无法让它拉起键盘。我认为视图会自动执行此操作，但它不会（显然）。我试过：

```
-(void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar
{
    [searchBar becomeFirstResponder];
} 
```

它没有用（我没想到它会）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:09:45.923

`searchBarTextDidBeginEditing`在搜索栏成为第一响应者之前不会被调用，所以很明显你的`becomeFirstResponder`电话甚至没有被调用。

我和您一样感到惊讶的是，搜索栏在被点击时不会自动成为第一响应者。是否有其他代码（上面未显示）禁用它？你有没有实施`searchBarShouldBeginEditing:`返回NO？

编辑：聊天后，问题是他没有为 UISearchBar 分配一个框架（从他的代码中可以看出）。

# android - 是否可以确定 android 小部件是放在锁定屏幕还是主屏幕上？

> ID：15775919
> 
> 赞同：3
> 
> 时间：2013-04-02T22:57:20.557
> 
> 标签：android

是否可以确定 android 小部件是放在锁定屏幕还是主屏幕上？我想它在广播提供商的某个地方，所以我可以找出用户如何在 4.2+ 上使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T00:29:55.197

[以下是文档](http://developer.android.com/guide/topics/appwidgets/index.html#lockscreen)中的相关片段：

`getAppWidgetOptions()`“您可以通过调用将小部件的选项作为捆绑包来检测您的小部件是在键盘锁（锁屏）还是主屏幕上。

返回的包将包含 key `OPTION_APPWIDGET_HOST_CATEGORY`，其值为`WIDGET_CATEGORY_HOME_SCREEN`or之一`WIDGET_CATEGORY_KEYGUARD`。"

```
AppWidgetManager appWidgetManager;
int widgetId;
Bundle myOptions = appWidgetManager.getAppWidgetOptions (widgetId);

// Get the value of OPTION_APPWIDGET_HOST_CATEGORY
int category = myOptions.getInt(AppWidgetManager.OPTION_APPWIDGET_HOST_CATEGORY, -1);

// If the value is WIDGET_CATEGORY_KEYGUARD, it's a lockscreen widget
boolean isKeyguard = category == AppWidgetProviderInfo.WIDGET_CATEGORY_KEYGUARD; 
```

“一旦您知道了小部件的类别，您就可以选择加载不同的基本布局、设置不同的属性等等。例如：”

```
int baseLayout = isKeyguard ? R.layout.keyguard_widget_layout : R.layout.widget_layout; 
```

# python - python中的字母猜谜游戏

> ID：15775920
> 
> 赞同：0
> 
> 时间：2013-04-02T22:57:24.860
> 
> 标签：python, count, character

我正在尝试用 python 编写一个基本的字母游戏。在游戏中，计算机版主从可能的单词列表中挑选一个单词。每个玩家（计算机 AI 和人类）都会看到一系列空白，每个字母对应一个单词。然后每个玩家猜测一个字母和一个位置，并被告知以下内容之一：

1）那封信属于那个位置（最好的结果）

2）那个字母在单词中，但不在那个位置

3）该字母不在任何剩余的空格中

当单词完全显示出来时，猜对最多字母的玩家将赢得一分。电脑版主又选了一个词，重新开始。第一个获得五分的玩家赢得比赛。在基本游戏中，两个玩家共享他们正在填写的同一组空白，因此玩家可以从彼此的工作中受益。

我的问题 - -

我有随机词进来就好了。现在，我想计算单词中的字符数，以便知道要指示多少个空格。我该怎么办？

一旦它正常工作，我认为将玩家/AI的猜测与单词进行比较并相应地进行比较不会太难。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:00:07.130

单词中的字符数：[`len()`](http://docs.python.org/2/library/functions.html#len)函数

```
In [15]: len('jabberwocky')
Out[15]: 11 
```

一个面具的例子：

```
In [16]: mask = ' '.join(('_' for i in range(len('jabberwocky'))))

In [18]: mask
Out[18]: '_ _ _ _ _ _ _ _ _ _ _'
#         j a b b e r w o c k y 
```

面具示例中涉及的所有内容的参考：

1.  [`str.join()`](http://docs.python.org/2/library/stdtypes.html#str.join)方法。
2.  [`range()`](http://docs.python.org/2/library/functions.html#range)内置功能。
3.  [生成器表达式](https://stackoverflow.com/questions/47789/generator-expressions-vs-list-comprehension)（用于生成 N 个下划线）。

总而言之，它的作用是：

1.  计算单词“jabberwocky”中的字符
2.  生成 n 个下划线
3.  通过空格加入他们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T23:03:13.493

在对您的项目进行粗略分析后，我相信您可以在 Python 文档中找到您需要的所有答案。解决您的第一个问题，请参见此处：

[http://docs.python.org/3.2/library/functions.html#len](http://docs.python.org/3.2/library/functions.html#len)

解决您在处理字符串时可能遇到的未来问题，请参见此处： [http ://docs.python.org/3.2/tutorial/introduction.html#strings](http://docs.python.org/3.2/tutorial/introduction.html#strings)

# c++ - C++ 构造函数（速度）

> ID：15775929
> 
> 赞同：0
> 
> 时间：2013-04-02T22:57:56.333
> 
> 标签：c++, object, constructor

我有时在调用构造函数时会读到，它会创建临时对象，然后将其复制到真正的变量中。所以我不应该将一些东西放入构造函数中，例如创建对象的计数器等，并且创建对象的某些语法应该比其他语法更快？

```
A a(10); 
A a = 10; // temporary object?
A a = A(10); // temporary object? 
```

那么我应该使用什么类型的构造函数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T23:01:38.257

确实，原则上允许编译器在您说`A a = 10;`or时生成临时对象`A a = A(10);`，但绝不允许在您说 时生成临时对象`A a(10);`。但是，该标准明确允许省略这个不必要的副本，并且任何理智的编译器都会执行此优化。

在 GCC 中，您可以禁止使用 flag 进行优化`-fno-elide-constructors`。

* * *

但是，作为形式上的结果，后两种形式的初始化要求构造函数`A::A(int)`not be `explicit`，而第一种形式（直接初始化）也适用于显式构造函数。隐式转换的概念有些微妙，值得牢记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T23:01:46.307

在发布模式下，这没有什么区别，因为现在的编译器已经足够优化临时对象了。尽管在调试模式下，它们可能都会创建一个临时对象，以允许调试器有一种附加到对象创建的方法。

# ios - 是否可以从另一个应用程序访问文档目录？

> ID：15775933
> 
> 赞同：1
> 
> 时间：2013-04-02T22:57:57.677
> 
> 标签：ios

问题很简单，是否可以从另一个应用程序访问文档目录？没有越狱！

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T23:17:39.040

你不能。由于应用程序沙箱，您只能限制其自己的沙箱目录，该目录作为应用程序及其数据的主目录。

[https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/TheiOSEnvironment/TheiOSEnvironment.html#//apple_ref/doc/uid/TP40007072-CH9-SW1](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/TheiOSEnvironment/TheiOSEnvironment.html#//apple_ref/doc/uid/TP40007072-CH9-SW1)

但是您可以通过钥匙串共享数据，也可以将数据保存在服务器上。

# java - 升级后 SQLite 数据库崩溃

> ID：15775937
> 
> 赞同：0
> 
> 时间：2013-04-02T22:58:20.550
> 
> 标签：java, android, eclipse, android-sqlite

我从版本 1 向我的数据库添加了 3 个新列，因此我将其更改为版本 2，但现在当我使用使用我的数据库的活动时，我的应用程序崩溃并在 logcat 中显示。

> 04-02 18:41:09.013: E/AndroidRuntime(19171): 致命异常: main 04-02 18:41:09.013: E/AndroidRuntime(19171): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com. fullfrontalgames.numberfighter/com.fullfrontalgames.numberfighter.AccountSettings}：android.database.sqlite.SQLiteException：靠近“CREATE”：语法错误（代码 1）：，编译时：创建表 NFDB（ID 整数主键自动增量，用户名文本 CREATE唯一索引 idx_keytype ON 表名（用户名）；用户名文本、密码文本、电子邮件文本、NUMBERINPUT 文本、SCORE 文本、FRIENDS 文本）；
> 
> 04-02 18:41:09.013: E/AndroidRuntime(19171): 由: android.database.sqlite.SQLiteException: 靠近 "CREATE": 语法错误 (代码 1): , 编译时: 创建表 NFDB(ID 整数主key autoincrement,USERNAME text CREATE UNIQUE INDEX idx_keytype ON tableName (USERNAME);USERNAME text,PASSWORD text,EMAIL text,NUMBERINPUT text,SCORE text,FRIENDS text);

我在任何地方都看不到语法错误，我有我的 DBHelper 助手类来删除我的旧表并创建新表。

这是我的 DBAdapter 和 DBHelper 类的代码

```
 package com.fullfrontalgames.numberfighter;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

public class DBAdapter
{
        static final String DATABASE_NAME = "NFDB.db";
        static final int DATABASE_VERSION = 2;
        public static final int NAME_COLUMN = 1;
        // TODO: Create public field for each column in your table.
        // SQL Statement to create a new database.
        static final String DATABASE_CREATE = "create table "+"NFDB"+
                                     "( " +"ID"+" integer primary key autoincrement,"+ "USERNAME  text CREATE UNIQUE INDEX idx_keytype ON tableName (USERNAME);" +
                                            "PASSWORD text,EMAIL text,NUMBERINPUT text,SCORE text,FRIENDS text); "; 
        // Variable to hold the database instance
        public  SQLiteDatabase db;
        // Context of the application using the database.
        private final Context context;
        // Database open/upgrade helper
        private DataBaseHelper DBHelper;
        public  DBAdapter(Context _context)
        {
            context = _context;
            DBHelper = new DataBaseHelper(context, DATABASE_NAME, null, DATABASE_VERSION);
        }
        public  DBAdapter open() throws SQLException
        {
            db = DBHelper.getWritableDatabase();
            return this;
        }
        public void close()
        {
            db.close();
        }

        public  SQLiteDatabase getDatabaseInstance()
        {
            return db;
        }

        public void insertEntry(String userName,String password,String email)
        {
           ContentValues newValues = new ContentValues();
            // Assign values for each row.
            newValues.put("USERNAME", userName);
            newValues.put("PASSWORD",password);
            newValues.put("EMAIL", email);
            // Insert the row into your table
            db.insert("NFDB", null, newValues);
            ///Toast.makeText(context, "Reminder Is Successfully Saved", Toast.LENGTH_LONG).show();
        }
        public int deleteEntry(String userName)
        {
            //String id=String.valueOf(ID);
            String where="USERNAME=?";
            int numberOFEntriesDeleted= db.delete("NFDB", where, new String[]{userName}) ;
           // Toast.makeText(context, "Number fo Entry Deleted Successfully : "+numberOFEntriesDeleted, Toast.LENGTH_LONG).show();
            return numberOFEntriesDeleted;
        }    
        public String getSinlgeEntry(String userName)
        {
            Cursor cursor=db.query("NFDB", null, " USERNAME=?", new String[]{userName}, null, null, null);
            if(cursor.getCount()<1) // UserName Not Exist
            {
                cursor.close();
                return "NOT EXIST";
            }
            cursor.moveToFirst();
            String password= cursor.getString(cursor.getColumnIndex("PASSWORD"));
            cursor.close();
            return password;

        }
        public void  updateEntry(String userName,String password)
        {
            // Define the updated row content.
            ContentValues updatedValues = new ContentValues();
            // Assign values for each row.
            updatedValues.put("USERNAME", userName);
            updatedValues.put("PASSWORD",password);

            String where="USERNAME = ?";
            db.update("NFDB",updatedValues, where, new String[]{userName});              
        }
        public String getData() {
            String[] columns = new String[] { "ID", "USERNAME"};
            Cursor c = db.query("NFDB", columns, null, null, null, null, null, null);
            String result ="";
            int iRow = c.getColumnIndex("ID");
            int iName = c.getColumnIndex("USERNAME");

            for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
                result = result + c.getString(iRow) + " " + c.getString(iName) + "/n";
            }

            return result;
        }

        public String getUsername(String searchName) {
            Cursor c = db.query("NFDB",
                                new String[] { "USERNAME" },
                                "USERNAME = ?",
                                new String[] { searchName },
                                null, null, null);
            if (c.moveToNext())
                return c.getString(0);
            else
                return "";
        }
        public void InsertScore(String Username,String Score)
        {
            ContentValues ScoreValues = new ContentValues();
            ScoreValues.put("USERNAME", Username);
            ScoreValues.put("SCORE", Score);
            db.insert("NFDB", null, ScoreValues);

        }
        public String GetGameScore(String Username,String Score)
        {
            Cursor cursor = db.query("NFDB", null, "USERNAME",new String[]{Username,Score}, null, null, null);
            cursor.moveToFirst();
            cursor.close();
            return Username;
        }
        public String GetAllScore()
        {
            String[] columns = new String[] {"ID","USERNAME","SCORE"};
            Cursor cursor = db.query("NFDB", columns, null, null, null, null, null);
            String result="";
            int iRow = cursor.getColumnIndex("ID");
            int iUsername = cursor.getColumnIndex("USERNAME");
            int iScore = cursor.getColumnIndex("SCORE");

            for (cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext()) {
                result = result + cursor.getString(iRow) + " " + cursor.getString(iUsername) + " " + cursor.getString(iScore) + "/n";
            }
            return result;
            }

        public void InsertNumber(String Username,String Number)
        {
            ContentValues NumberValues = new ContentValues();
            NumberValues.put("USERNAME", Username);
            NumberValues.put("NUMBERINPUT", Number);
            db.insert("NFDB", null, NumberValues);
            }

        public String GetNumber(String Username,String Number)
        {
            Cursor cursor = db.query("NFDB", null, "USERNAME", new String[]{Username,Number}, null, null, null, null);
            cursor.moveToFirst();
            cursor.close();
            return Username;
        }

        public String GetAllNumbers()
        {
            String[] columns = new String[] {"ID","USERNAME","NUMBERINPUT"};
            Cursor cursor = db.query("NFDB", columns, null, null, null, null, null, null);
            String result="";
            int iRow = cursor.getColumnIndex("ID");
            int iName = cursor.getColumnIndex("USERNAME");
            int iNumber = cursor.getColumnIndex("NUMBERINPUT");

            for (cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext()) {
                result = result + cursor.getString(iRow) + " " + cursor.getString(iName) + " " + cursor.getString(iNumber) + "/n";
            }
            return result;

            }
        public void InsertFriends (String Username,String Friends)
        {
            ContentValues FriendValues = new ContentValues();
            FriendValues.put("USERNAME", Username);
            FriendValues.put("FRIENDS", Friends);
            db.insert("NFDB", null, FriendValues);
        }

        public int DeleteFriends(String Username,String Friends)
        {
            String where = "USERNAME=?,FRIENDS=?";
            int numberOfEntriesDeleted = db.delete("NFDB", where, new String[]{Username,Friends});
            return numberOfEntriesDeleted;
        }

        public String GetFriend(String Username,String Friend)
        {
            Cursor cursor = db.query("NFDB", null, "USERNAME", new String[]{Username,Friend}, null, null, null, null);
            cursor.moveToFirst();
            cursor.close();
            return Username;
        }

        public String GetAllFriends()
        {
            String[] columns = new String[] {"ID","USERNAME","FRIENDS"};
            Cursor cursor = db.query("NFDB", columns, null, null, null, null, null, null);
            String result="";
            int iRow = cursor.getColumnIndex("ID");
            int iName = cursor.getColumnIndex("USERNAME");
            int iFriends = cursor.getColumnIndex("FRIENDS");

            for (cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext()) {
                result = result + cursor.getString(iRow) + " " + cursor.getString(iName) + " " + cursor.getString(iFriends) + "/n";
            }
            return result;

            }

        } 
```

> 包 com.fullfrontalgames.numberfighter；
> 
> ```
> import android.content.Context;
> import android.database.sqlite.SQLiteDatabase;
> import android.database.sqlite.SQLiteDatabase.CursorFactory;
> import android.database.sqlite.SQLiteOpenHelper;
> import android.util.Log;
> 
> public class DataBaseHelper extends SQLiteOpenHelper
> {
>     public DataBaseHelper(Context context, String name,CursorFactory factory, int version)
>     {
>                super(context, name, factory, version);
>     }
> 
>       // TODO Auto-generated constructor stub
> 
>   // Called when no database exists in disk and the helper class needs
>     // to create a new one.
>     @Override
>     public void onCreate(SQLiteDatabase _db)
>     {
>             _db.execSQL(DBAdapter.DATABASE_CREATE);
> 
>     }
>     // Called when there is a database version mismatch meaning that the version
>     // of the database on disk needs to be upgraded to the current version.
>     @Override
>     public void onUpgrade(SQLiteDatabase _db, int _oldVersion, int _newVersion)
>     {
>             // Log the version upgrade.
>             Log.w("TaskDBAdapter", "Upgrading from version " +_oldVersion + " to " +_newVersion + ", which will destroy all old data");
> 
>             // Upgrade the existing database to conform to the new version. Multiple
>             // previous versions can be handled by comparing _oldVersion and _newVersion
>             // values.
>             // The simplest case is to drop the old table and create a new one.
>             _db.execSQL("DROP TABLE IF EXISTS " + "NFDB");
>             // Create a new one.
>             onCreate(_db);
>     }
> 
>   } 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:03:55.663

你的`DML`说法不正确。索引创建不能在`CREATE TABLE`语句中使用。它必须有自己的声明。

你必须像这样纠正它：

```
DATABASE_CREATE = "create table NFDB("
                   + "ID integer primary key autoincrement, "
                   + "USERNAME text, PASSWORD text, "
                   + "EMAIL text, NUMBERINPUT text, "
                   + "SCORE text, FRIENDS text)"; 
```

第二个声明：

```
CREATE_INDEX_KEYTYPE = "CREATE UNIQUE INDEX idx_keytype ON tableName(USERNAME)"; 
```

最后，在您的`SQLiteOpenHelper`子类实现中执行以下操作：

```
_db.execSQL(DBAdapter.DATABASE_CREATE);
_db.execSQL(DBAdapter.CREATE_INDEX_KEYTYPE); 
```

# c# - 使用正则表达式进行 wpf 文本框验证

> ID：15775938
> 
> 赞同：1
> 
> 时间：2013-04-02T22:58:38.743
> 
> 标签：c#, wpf, regex

我有一个文本框，我在其中使用事件 TextChanged 来检查字符串是否对 RegEx 有效，如果不是则显示一个消息框。[在使用http://regexpal.com/](http://regexpal.com/)等在线正则表达式工具测试我的正则表达式时，它似乎工作正常。但是当我运行我的代码时，它没有按预期工作。我从来没有看到消息框出现。任何帮助，将不胜感激。我的正则表达式应该在“。”之前检查 0-5 之间的任何数字。如果有的话，带两位小数。

```
private void txtValInput_TextChanged(object sender, TextChangedEventArgs e)
{
     string input = (sender as TextBox).Text; //1234567

     if(!Regex.IsMatch(input, @"^\d{1,5}|\d{0,5}\.\d{1,2}$"))
     {
           MessageBox.Show("Error!, check and try again");
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:05:19.917

您需要添加，`()`以便正则表达式正确锚定，否则您的示例匹配，因为正则表达式仅检查字符串开头是否有一到五个数字 - 后面可能会出现任何问题。

```
@"^(\d{1,5}|\d{0,5}\.\d{1,2})$" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T23:15:31.683

它不起作用的原因是因为您没有将*正则表达式*包含在`()`. 如果没有该标识符，它就无法正确锚定您的语法。

你会希望你的*表达式*看起来像这样：

`@"^(\d{1,5}|\d{0,5}\.\d{1,2})$`

请记住，您可能还为您的*Expression*添加了额外的复杂性。

详细说明：

*   `^`: 将抓取第一个字符或行。
*   `\d`：将抓取所有数字字符。
*   `$`: 将在行尾或最后一个字符处停止。

我想花点时间看第二个。如果您确实这样做`\d+`，它将获取所有数字字符以及之后的所有字符。这可能会使您的请求稍微容易一些；但我不确定你在搜索什么。

希望这会有所帮助，我看到了一个*灰色 1 答案框*，因此其他人发布了因此您应该很容易找到解决方案 Calvin。

# c# - 解除分配并重新实例化新的单例

> ID：15775941
> 
> 赞同：1
> 
> 时间：2013-04-02T22:59:00.167
> 
> 标签：c#, design-patterns, singleton, static-methods

我想从原始单例对象中取消分配内存并使用另一种方法创建一个新对象。

```
public sealed class ObjectZ {
    static readonly ObjectZ _instance = new ObjectZ();
    private ObjectZ() {}
    public static ObjectZ Instance{
        get { return _instance; }
    }
} 
```

这种方法会是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:09:14.170

单例通常创建一次并在域的生命周期内存在，重新创建单例是不可靠的业务，并且根据定义，我提供的代码并不是真正的单例。

您似乎所追求的行为是可以使静态可访问的单个对象缓存无效。

```
public static class SingletonAccessor
{
    private static SomeClass _instance;
    private static object _lock = new Object();

    public static SomeClass Singleton
    {
        get
        {
            lock (_lock)
            {
                if (_instance == null)
                {
                    _instance = new SomeClass();
                }

                return _instance;
            }
        }
    }

    public static void Recycle()
    {
        lock (_lock)
        {
            if (_instance != null)
            {
                // Do any cleanup, perhaps call .Dispose if it's needed

                _instance = null;
            }
        }
    }
} 
```

# c - 来自同一个库的两个函数：为什么一个生成未定义的引用而另一个不生成？

> ID：15775944
> 
> 赞同：0
> 
> 时间：2013-04-02T22:59:10.463
> 
> 标签：c, compiler-construction, linker

我想在函数中用 pthread_mutex_trylock 替换 pthread_mutex_lock，当我这样做时，我收到“未定义的引用”错误消息（见下文）。如果我用 pthread_mutex_lock(&cmd_queue_lock) 替换第 411-13 行，我不会收到链接器错误。

它们都来自我已经包含的同一个库。为什么一个会产生链接器错误而另一个不会？更重要的是，我该如何解决它？我尝试添加“extern int pthread_mutex_trylock”并更改 Makefile 中 .o 文件的顺序，但两者都不起作用。

```
$ nl clientmain.c

    12  #include <stdio.h>
    ...
    21  #include <pthread.h>

    411 if (pthread_mutex_trylock(&cmd_queue_lock) == EBUSY) {
    412     continue;
    413 }

$ make
clientmain.o: In function `createHC':
clientmain.c:411: undefined reference to `pthread_mutex_trylock'
collect2: ld returned 1 exit status
make: *** [clientmain] Error 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:28:49.590

诚然，我找不到任何参考手册页来说明这一点，但添加`-lpthread`到您的最终链接阶段可能会完成这项工作。我通过`pthread_mutex_trylock`在所有`/usr/lib/lib*.a`文件中查找符号找到了它，并且`/usr/lib/libpthread.a`是唯一定义该符号的文件。逆向工程。

的手册页`gcc`确实说您可以/应该使用包含 POSIX 线程支持的`-pthread`选项`gcc`，所以这可能是皇家路线。这个选项也适用于我的系统。有趣的是，常规`/usr/lib/libc.a`确实提供了`pthread_mutex_lock`但不提供，`pthread_mutex_trylock`因此导致您的困惑。请注意，手册页`gcc`也说此选项对预处理有影响，因此它可能比仅链接到`/usr/lib/libpthread.a`.

# python - 在 Python 中使用特定的 API

> ID：15775945
> 
> 赞同：0
> 
> 时间：2013-04-02T22:59:14.183
> 
> 标签：python, api

我对 Python 很陌生（对编程也比较陌生），希望能得到任何帮助。

我将如何使用以下示例链接使用 Python 下载提供的信息。

[https://url.com/InfoService/GetFlightByFlightNum?board=](https://url.com/InfoService/GetFlightByFlightNum?board=) {BOARD}&flightNum={FLIGHTNUM}

方法：获取

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:20:58.540

从 python 访问 API 的最简单方法是使用[requests](http://docs.python-requests.org/en/latest/user/quickstart/#make-a-request)库

你可以快速安装它`pip install requests`

然后你可以为你的例子这样做：

```
import requests

payload = {'board': {BOARD}, 'flightNum': {FLIGHTNUM}}
r = requests.get('https://url.com/InfoService/GetFlightByFlightNum', params=payload)

# print the response result
print r.text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:11:30.823

您可以使用内置库 urllib2。

Python 2 文档：[http ://docs.python.org/2/library/urllib2.html](http://docs.python.org/2/library/urllib2.html)

Python 3 文档：[http ://docs.python.org/3.1/howto/urllib2.html](http://docs.python.org/3.1/howto/urllib2.html)

以下是一些示例：[如何使用 Python 通过 HTTP 下载文件？](https://stackoverflow.com/questions/22676/how-do-i-download-a-file-over-http-using-python)

# opengl - 在片段着色器中使用 textureCube 访问环境贴图失败

> ID：15775948
> 
> 赞同：3
> 
> 时间：2013-04-02T22:59:26.490
> 
> 标签：opengl, glsl

我正在编写一个考虑两个表面的折射着色器。因此，我使用 FBO 来渲染纹理的深度和法线，并使用立方体贴图来表示环境。我需要使用存储在纹理中的法线值从立方体贴图中获取值，以获得背面的折射法线。

只要我不尝试从其值已从纹理中检索到的向量访问它，立方体贴图就可以完美地工作。

这是一个失败的最小片段着色器。颜色保持绝望的黑色。我确信对纹理 2D 的调用返回非零值：如果我尝试显示方向中包含的纹理颜色（表示法线），我会得到一个完美着色的模型。无论我对“方向”向量进行何种操作，它都会不断失败。

```
uniform samplerCube cubemap;
uniform sampler2D normalTexture;
uniform vec2 viewportSize;

void main()
{
   vec3 direction = texture2D(normalTexture, gl_FragCoord.xy/viewportSize).xyz;
   // direction = vec3(1., 0., 0) + direction; // fails as well!!
   vec4 color = textureCube(cubemap, direction);
   gl_FragColor = color;
} 
```

以下是显示为颜色的向量“方向”的值，只是证明它们不为空！ ![的价值观](https://i.stack.imgur.com/tAU5K.jpg) 这是上述着色器的结果（只是茶壶）。 ![在此处输入图像描述](https://i.stack.imgur.com/qMfx9.jpg)

虽然此代码完美运行：

```
uniform samplerCube cubemap;
uniform vec2 viewportSize;
varying vec3 T1;

void main()
{
   vec4 color = textureCube(cubemap, T1);
   gl_FragColor = color;
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/bIryD.jpg)

我想不出任何原因为什么我的颜色会在我访问采样器立方体值时保持黑色！

只是为了完整起见，即使我的立方体贴图有效，以下是用于设置它的参数：glGenTextures(1, &mTextureId);

```
glEnable(GL_TEXTURE_CUBE_MAP);
glBindTexture(GL_TEXTURE_CUBE_MAP, mTextureId);
// Set parameters
glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_R, GL_CLAMP_TO_EDGE); 
```

除非我在某处遗漏了重要的东西，否则我认为这可能是驱动程序错误。我没有任何显卡，我使用的是 Intel Core i5 处理器芯片组。

```
00:02.0 VGA compatible controller: Intel Corporation 2nd Generation Core Processor Family Integrated Graphics Controller (rev 09) 
```

关于为什么会发生这种情况的任何想法，或者您有解决方法吗？

编辑：这是我的着色器类如何绑定纹理

```
4 textures to bind
Bind texture 3 on texture unit unit 0
Bind to shader uniform: 327680
Bind texture 4 on texture unit unit 1
Bind to shader uniform: 262144
Bind texture 5 on texture unit unit 2
Bind to shader uniform: 393216
Bind texture 9 on texture unit unit 3
Bind to shader uniform: 196608 
```

纹理 3 和 4 是深度，5 是法线贴图，9 是立方体贴图。

以及进行绑定的代码：

```
void Shader::bindTextures() {
    dinf << m_textures.size() << " textures to bind" << endl;
    int texture_slot_index = 0;
    for (auto it = m_textures.begin(); it != m_textures.end(); it++) {
        dinf << "Bind texture " << it->first<< " on texture unit unit "
                << texture_slot_index << std::endl;
        glActiveTexture(GL_TEXTURE0 + texture_slot_index);
        glBindTexture(GL_TEXTURE_2D, it->first);
        // Binds to the shader
        dinf << "Bind to shader uniform: " << it->second << endl;
        glUniform1i(it->second, texture_slot_index);
        texture_slot_index++;
    }
    // Make sure that the texture unit which is left active is the number 0
    glActiveTexture(GL_TEXTURE0);

} 
```

m_textures 是纹理 id 到统一 id 的映射。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T06:09:31.837

您似乎没有为法线贴图和立方体贴图使用单独的纹理单元。一切都默认为纹理单元 0。你需要类似的东西：

```
uniform sampler2D norm_tex;

uniform samplerCube cube_tex; 
```

在着色器中。`texture`使用（3.2+）核心配置文件时，纹理查找应该只使用“重载”功能。使用 (3.3+) 您还可以使用[采样器对象](http://www.opengl.org/wiki/Sampler_Object)。

生成纹理并将其绑定到单独的纹理单元：

```
... generate 'norm_tex' and 'cube_tex' ...

glActiveTexture(GL_TEXTURE0);
... bind 'norm_tex' and set parameters ...

glActiveTexture(GL_TEXTURE1);
... bind 'cube_tex' and set parameters ...

... glUseProgram(prog); ...

glUniform1i(glGetUniformLocation(prog, "norm_map"), 0);
glUniform1i(glGetUniformLocation(prog, "cube_map"), 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:50:04.883

我想通了，真的是一件很愚蠢的事情。我忘了更改我的着色器函数以将立方体贴图绑定为 GL_TEXTURE_CUBE_MAP，所有内容都绑定为 GL_TEXTURE_2D！

不管怎么说，还是要谢谢你！

# twitter-bootstrap - 如果运行良好，跨度在引导程序中添加到父级不起作用

> ID：15775951
> 
> 赞同：5
> 
> 时间：2013-04-02T22:59:43.267
> 
> 标签：twitter-bootstrap, grid-layout

```
<div class="row">
    <div class="span8">
        <div class="well well-large">
            <h3>Place an Order</h3>

            <div class="row">
                <div class="span3">Bid Price</div>
                <div class="span2">Execute</div>
                <div class="span3">Ask Price</div>
            </div>
        </div> 
```

这就是我的结构。买入价、执行价和卖出价都应位于同一行。因为他们在井里，他们似乎没有。这是已知的行为吗？是否存在？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T23:21:56.817

# 为什么嵌套行不适合一行？

问题是`well`元素的填充和边框。`span8`当在 normal 中时，类具有 620px 的固定宽度`row`。

![第一种情况](https://i.stack.imgur.com/asuMC.png)

该`well-large`元素具有 24px 的填充（绿色部分）和 1px 的边框，因此嵌套行将位于蓝色部分内。但蓝色部分的宽度不是 620px，而是 570px。

![井元素内的宽度](https://i.stack.imgur.com/4XZdG.png)

`span`嵌套行内的元素也具有固定宽度。`span2`宽度为 140 像素，宽度为 220 像素`span3`。

![跨度的宽度](https://i.stack.imgur.com/HgJE5.png)

如果将`span`元素的所有宽度及其边距相加（220px + 140px + 220px + (20px * 2) = 620px），则行的总宽度大于`well`元素（570px），所以最后一个元素被推送到下一行。

# 如何解决？

**第一次尝试**

我的第一个也是更简单的解决方案是将类`span8`放在这样的`well`元素中（[JSFiddle](http://jsfiddle.net/ndt7e/)）：

```
<div class="row">
   <div class="span8 well well-large">
      <h3>Place an Order</h3>

      <div class="row">
         <div class="span3">Bid Price</div>
         <div class="span2">Execute</div>
         <div class="span3">Ask Price</div>
      </div>
   </div>
</div> 
```

这解决了前面的问题，但增加了一个问题。由于 padding 现在在`span8`元素中，主网格被破坏，因为 well 元素的宽度为 670px（到 620px 的宽度，您必须从井的 padding 和边框添加 50px）。

![第二种情况](https://i.stack.imgur.com/zj1lm.png)

但是现在蓝色部分有 620px 的宽度，所以嵌套行的所有元素都可以完美地放入蓝色部分。但正如我之前所说，网格被打破了。例如，如果您在`span4`之后添加一个元素`span8`，则将`span4`被推送到下一行，就像之前使用嵌套元素时发生的那样。

因此，使用此布局（[JSFiddle](http://jsfiddle.net/9LpML/)）：

```
<div class="row">
    <div class="span8 well well-large">
         <!-- Some ramdom text -->
    </div>
    <div class="span4">
         <!-- Some ramdom text -->
    </div>
</div> 
```

你有这个结果：

![第一个解决方案的问题](https://i.stack.imgur.com/wIFDD.png)

**最终解决方案**

如果要在 a 中包含 3 列`well`，则需要不同的网格系统。一种解决方案可以使用`row-fluid`而不是`row`. 使用`row-fluid`，`span`元素的宽度是百分比，而不是固定宽度。

使用此布局（[JSFiddle](http://jsfiddle.net/Btn7c/)）：

```
<div class="row">
    <div class="span8">
        <div class="well well-large">
            <h3>Place an Order</h3>

            <div class="row-fluid">
                <div class="span4">Bid Price</div>
                <div class="span4">Execute</div>
                <div class="span4">Ask Price</div>
            </div>
        </div>
    </div>
</div> 
```

您可以实现与您真正想要的类似的东西。如果您想要 3/8、2/8 和 3/8 的精确比例（就像您使用跨度的初始设置），您必须使用 CSS 来制作三列布局，您不能仅使用引导`span`元素来做到这一点。

# php - 保护和加密客户端和服务器之间的连接

> ID：15775952
> 
> 赞同：1
> 
> 时间：2013-04-02T22:59:44.253
> 
> 标签：php, security, networking, ssl

我想通过调用带有数据的特定 php 文件将非常敏感的数据发送到网络服务器`GET`或`POST`（尚不确定）。数据包含 3 个值，所以我想构建一个自己的算法，但这可以很容易地进行逆向工程，我想有比我拥有的更好的解决方案。

困难基本上是这样的：当用户为 Windows 应用程序购买应用程序内购买时，他可以访问该服务器。MS 不像 Google 那样提供任何 OAUTH 检查，因此开发人员必须实施自己的检查。此外，我们没有任何用户帐户。

您对如何限制尚未购买的用户访问此服务器 php 文件（这是安全的）有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:53:50.713

您可以使用许多“握手”方法。一种对我有用的方法：

1.  打开您的服务器的通道
2.  服务器向客户端发送一串随机字符
3.  客户端使用已知的盐对字符串进行哈希处理并将该字符串发送回服务器
4.  服务器将返回的字符串与它自己的原始字符串的加密版本进行比较
5.  如果它们匹配，则允许客户端会话

这可以防止有人`replay`对您的服务器进行攻击。

如果您想坚持使用典型的“网络交易”，请使用 HTTPS（端口 443）来处理您的加密。另一种选择是使用加密套接字连接到不同的端口。

# python - 我可以使用 python 切片来访问嵌套元组的一个“列”吗？

> ID：15775956
> 
> 赞同：6
> 
> 时间：2013-04-02T22:59:58.310
> 
> 标签：python, slice

我有一个嵌套元组，它基本上是一个二维表（从 MySQL 查询返回）。我可以使用切片来获取表的一个“列”的列表或元组吗？

例如：

```
t = ((1,2,3),(3,4,5),(1,4,5),(9,8,7))

x = 6 
```

如何有效地检查是否`x`出现在任何元组的第三个位置？

我能找到的所有切片示例都只能在单个元组中操作。我不想从 t 中切出“行”。我想以另一种方式切割它——垂直。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T23:02:41.420

您最好的选择是使用带有[`any()`](http://docs.python.org/2/library/functions.html#any)函数的生成器表达式：

```
if any(row[2] == x for row in t):
    # x appears in the third row of at least one tuple, do something 
```

至于使用切片来获得一列，这里有几个选项：

*   使用`zip()`：

    ```
    >>> zip(*t)[2]
    (3, 5, 5, 7) 
    ```

*   使用列表推导：

    ```
    >>> [row[2] for row in t]
    [3, 5, 5, 7] 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T23:41:54.160

我会加入 numpy 解决方案

```
import numpy
t = ((1,2,3),(3,4,5),(1,4,5),(9,8,7))
x = 6
col_id = 2

a = numpy.array(t)
print a[a[:,col_id] == x] 
```

# django - 带有未呈现到变量的标签的 Django 模板

> ID：15775967
> 
> 赞同：0
> 
> 时间：2013-04-02T23:01:12.877
> 
> 标签：django, shell, templates

我在渲染模板并将其设置为下一个模板可用的上下文的一部分的模型上有一个属性，方法如下：

模型.py：

```
@property
def detail_body_rendered(self):
    ctx = self.context()

    link_ctx = template.Context({'the_message': self.message})
    render_url = template.Template("{% load url from future %}<a href=\"{% url 'message_redirect' 'message' the_message.pk %}\">Click Here</a>").render(link_ctx)
    ctx['link'] = render_url

    return template.Template(self.message.detail_body).render(ctx) 
```

如果返回值是通过模板系统发送的，这非常有用：

收件箱.html：

```
...
<div class="detail_message_body">{{ current_message.detail_body_rendered }}</div>
... 
```

一切都按预期发生，该`detail_body_rendered`属性将存储在数据库中的标签替换为上下文，并且链接显示在页面上。耶。

它也适用于外壳。但是，如果我在其他任何地方有一个消息对象，并请求该属性，它会在包含模板的行上静默失败。具体来说，因为那里有 % 符号。如果我把它们拿出来，没问题。

所以我的问题是双重的，为什么当我在除模板文件或外壳程序之外的任何地方请求它时它会爆炸，以及如何使错误消息详细，以便我可以真正看到它为什么在终端窗口中阻塞？

# c# - 发送多个插入语句和在单个字符串中堆积插入语句并执行该字符串以获得更多数据之间的区别

> ID：15775971
> 
> 赞同：0
> 
> 时间：2013-04-02T23:01:31.490
> 
> 标签：c#, sql-server

从 C# 结束：发送多个插入语句以在数据库中插入 20 行或更多行或将插入语句堆积在单个字符串中并执行该 sql 字符串。哪个更有效率？有什么优点和缺点？

例如：

```
for(int i=0;i<21;i++)
{
      //Insert command here  
} 
```

或者

```
string qry="Insert into table1 () values "
for(int i=0;i<21;i++)
{
  qry+="(values)";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:06:27.270

如果您尝试执行批量插入操作，我建议您查看针对此特定操作进行了优化的[SqlBulkCopy](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)类。相反，如果您只是对各种数据插入方法的相对性能感到好奇——从我使用表值参数的实验来看，与大量即席插入语句相比，它们具有非常高的性能——其中许多是“批量插入” ，就像你提到的那样。

长话短说——你将不得不使用你的数据和模式来衡量最适合你的东西。但我确实推荐 TVP 和 sqlbulkcopy 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:05:24.397

如果您要发送一堆插入，则应该使用事务，因为这大大提高了效率。

```
BEGIN;
INSERT .... ;
INSERT .... ;
INSERT .... ;
INSERT .... ;
INSERT .... ;
COMMIT; 
```

比

```
INSERT .... ;
INSERT .... ;
INSERT .... ;
INSERT .... ;
INSERT .... ; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T00:12:05.197

我使用 2 种方法（在实体框架之外）。如前所述，如果您有大量记录 > 5000，请使用 SqlBulkCopy。没有什么比这更快了。它使用数据表，因此在处理对象时它不是最好的。

我们与业务对象一起使用的另一个选项是 XML。我们的业务对象有一个生成 xml 的序列化方法......然后我们有一个如下所示的存储过程。它比仅传递字符串具有更高的子成本，但是您将让 sql server 验证语法是否正确，列名是否正确等。另外，sql server 将缓存执行计划。在进行更改时，传入字符串很容易出现拼写错误和问题。

```
@xDoc XML

INSERT INTO dbo.Test(Id,Txt)
SELECT Data.Id,Data.Txt
FROM
(SELECT
    X.Data.value('Id[1]', 'int') AS Id,
    X.Data.value('Txt[1]', 'tinyint') AS Txt
FROM @xDoc.nodes('MyRootNode/MyRecord') AS X(Data)) AS Data; 
```

# c - 无法找出这个分段错误

> ID：15775974
> 
> 赞同：0
> 
> 时间：2013-04-02T23:01:33.807
> 
> 标签：c, debugging, segmentation-fault

我确信这个错误很明显，但我确实很难找到它。

基本上我正在尝试通过二维数组制作棋盘。我正在通过 8 个皇后测试来测试它的功能……它不起作用。

不知何故，我的整数值之一变得异常，如图`gdb`所示：

```
....
(gdb) cont
Continuing.

Program received signal SIGSEGV, Segmentation fault.
0x080487f8 in diagnols (PARAMETER_ONE=0, PARAMETER_TWO=0) at eq1.c:77
77            if (key->board[abc][bcd] == 1) {
(gdb) print abc
4424  // "SHOULD BE" ONE
(gdb) print bcd
4424  // "SHOULD BE" ONE
(gdb) backtrace
#0  0x080487f8 in diagnols (PARAMETER_ONE=0, PARAMETER_TWO=0) at eq1.c:77
#1  0x08048873 in check (param1=0, param2=0) at eq1.c:91
#2  0x08048510 in recur (DEPTH=0, WIDTH=0) at eq1.c:99
#3  0x08048919 in main () at eq1.c:152
(gdb) 
```

然后是`diagnols(...)`，位于：

```
int recur(struct chessboard* key, int DEPTH, int WIDTH) {
    /* other functions above diagnols(...) */ 
```

诊断（...）：

```
int diagnols(int PARAMETER_ONE, int PARAMETER_TWO) { // returns 0 if good    

    int abc = 0;
    int bcd = 0;
    int counter = 0; // keeps track of conflicting piece occurrences 

    // OTHER CHECKS FIRST... DELETED TO SAVE ROOM

    // checkign diagnol down and to the left
    abc = PARAMETER_ONE+1;
    bcd = PARAMETER_TWO-1;
    while (  (abc>=0)&&(bcd>=0)  ) {
      if (key->board[abc][bcd] == 1) {
        counter++;
      } abc++;
      bcd--;
    }

    // ERROR IN THIS PART
    // checking diagnol down and to the right
    abc = PARAMETER_ONE+1;
    bcd = PARAMETER_TWO+1;
    while (  (abc>=0)&&(bcd>=0)  ) {
      if (key->board[abc][bcd] == 1) { // ERROR
        counter++;
      } abc++;
      bcd++;
    }

    return counter;
  } 
```

并在以下函数中`diagnols(...)`调用：`recur(...)`

```
 int check(int param1, int param2) { // if okay returns 2 
    // other functions
    d = diagnols(param1, param2);
    int total = 0;
    total = (h + v + d); // if okay, equals 2
    return total;
  } 
```

为了更好地衡量，这是我的结构：

```
struct chessboard {
  int board[7][7];
}; 
```

主要：

```
int main() {
  struct chessboard* master = malloc(sizeof(struct chessboard));
  /* i set the board to zero here. used calloc() before */
  recur(master, 0, 0);
  // stuff
} 
```

是的，我意识到*诊断*不是拼写*对角线*；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:05:50.233

```
while (  (abc>=0)&&(bcd>=0)  ) {
      if (key->board[abc][bcd] == 1) { // ERROR
        counter++;
      } abc++;
      bcd++;
    } 
```

由于您正在增加两个索引，因此该条件似乎将始终为真。

您的意思是 < 一些限制吗？

# multithreading - 在音频流应用程序中有效使用先进先出

> ID：15775975
> 
> 赞同：0
> 
> 时间：2013-04-02T23:01:35.740
> 
> 标签：multithreading, synchronization, signal-processing, fifo

我有一个音频 dsp 应用程序，它使用线程池以比实时快得多的速度产生输出。这旨在用于游戏，并且音频必须以相当低的延迟进行流式传输。每个完成的缓冲区都在主混音器线程中结束，我需要将其传递给应用程序程序员。我想我可能在主类中有一个 read_samples 方法，它需要一个缓冲区指针和一些要读取的样本，并返回实际读取的样本数。

我正在研究一个无锁 fifo，即来自 boost.lockfree 的单个生产者/单个消费者队列。我目前的设计目标如下：

1.  数据从 fifo 快速推入和推出非常重要，因此我们希望尽可能少的阻塞操作。大多数时候，应用程序程序员可能会在中断级别优先级线程内调用主类的 read_samples 方法，因为许多音频 I/O 子系统以这种方式接收数据（例如通过回调）。因此，我们来到第 2 点和第 3 点。

2.  如果调用了 read_samples 并且 fifo 中没有足够的样本来交付请求的数量，我们可能应该获取我们所拥有的（如果有的话）然后立即返回而不阻塞。如果我们锁定并等待，我们可能会影响中断级别线程回调可能负责的许多其他音频播放。

3.  如果生产者尝试写入一个完整的缓冲区，我们希望等到所有样本都被写入。我们希望让用户在等待写入时读取，以便他们可以为我们清理缓冲区中的空间。生产者等待是没有问题的，因此该部分不需要无锁。通过设置与我们的延迟预期大致对应的环形缓冲区大小，我们可以确保生产者为我们提供足够的数据以避免播放停止，但仅此而已。

第一点和第二点实际上是微不足道的，前提是我的设计决定何时以及何时不阻塞似乎是合理的。这是第三点给我带来了一些麻烦。有没有一种有效的方法来锁定直到缓冲区不再满，并且只有在我们可以写更多时才唤醒？我可以很容易地检测到缓冲区的大小，谢天谢地，这是一个原子操作。但是如何适当地锁定和解锁让我感到困惑，特别是因为我们确实希望能够在需要关闭时提前中断锁定。我用什么来做这个？条件变量？如果是这样，如果有人能提供一些伪代码，我将非常感激。我了解如何使用障碍，但还没有过多地研究条件变量，并且不确定我是否理解它们。特别是因为他们显然可以在没有满足条件的情况下醒来，这似乎很奇怪。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:27:08.957

当生产者生产了太多材料时，获得阻塞行为的正确方法是使用条件变量。生产者在达到其限制时调用 wait ，然后消费者在消耗了一些数据后立即调用 notify_all 。然后生产者醒来并产生更多，等等。

# java - FileNotFoundException 解决方案？

> ID：15775979
> 
> 赞同：1
> 
> 时间：2013-04-02T23:01:52.720
> 
> 标签：java, filenotfoundexception, filewriter, printwriter

`FileNotFoundException`创建一个程序，将数组列表中的数据写入文本文件，即使文件存在，我也会遇到这种情况。同时，我的数组中的计算数据没有写入它。

这是我的代码：

```
 public static void payrollReadFromFile(String filename) {

        // initializes br identifer as BufferedReader.
        BufferedReader br = null;

        payrolls.clear(); // removes all elements in arraylist employees

        try {

            br = new BufferedReader(new FileReader("payroll.txt")); 
            try {

                 String name;               
                double   gincome, nincome, deduc, sss, pagibig, 
phil = 0; // initialize identifiers

                // reads each line through br identifier, and 
stores it on
                // temporary identifiers
                // loop continues until null is encountered
            while ((name = br.readLine()) != null) {

                    gincome = Double.parseDouble(br.readLine());
                    sss = Double.parseDouble(br.readLine());
                    pagibig = 
Double.parseDouble(br.readLine());
                    phil = Double.parseDouble(br.readLine());
                    deduc = Double.parseDouble(br.readLine());
                    nincome = 
Double.parseDouble(br.readLine());                    

                    // adds the data to payroll arraylist
                    payrolls.add(new Person( name, gincome, 
sss, pagibig, phil,deduc, nincome));
                }
            } finally {
                br.close(); // closes BufferedReader
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    // method which writes data into parameter 'filename'
    // uses PrintWriter and FileWriter
    public static boolean payrollWriteToFile(String filename) {
        boolean saved = false;
        PrintWriter pw = null; // pw is a PrintWriter identifier

        try {
            // instantiate pw as PrintWriter, FileWriter
            pw = new PrintWriter(new FileWriter("payroll.txt")); 

            try {

                // for each loop. each data from payrolls is     
written to parameter

                for (Person payroll : payrolls) {

                    pw.println(payroll.getName());
                    pw.println(payroll.getGincome());
                    pw.println(payroll.getSss());
                    pw.println(payroll.getPagibig());
                    pw.println(payroll.getPhil());
                    pw.println(payroll.getDeduc());
                    pw.println(payroll.getNincome());

                }
                saved = true;
            } finally {
                pw.close();
            }
        } catch (IOException e) {

            e.printStackTrace();
        }
        return saved;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:09:26.693

您的文件打开声明：

```
 br = new BufferedReader(new FileReader("payroll.txt")); 
```

没有使用您传递给方法的变量文件名。

你需要：

```
 br = new BufferedReader(new FileReader(filename)); 
```

您可能还想改用 File 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:34:21.753

当我拿走你的代码并稍作修改时，这行得通。确保使用`filename`传递给您的方法的参数，现在您在方法中对其进行硬编码。

```
File file = new File(filename);
if (!file.exists()) file.createNewFile();
br = new BufferedReader(new FileReader(file)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T22:50:11.703

您可能需要确保文件位于正确的位置。路径相对于`.class`文件的位置。例如，“ `payroll.txt`”指的是“ `C:\path\to\class\file\payroll.txt`”。

另外，正如其他人指出的那样，请重新配置`BufferedReader`以使用该参数。`filename`

不要只在程序中创建文件；这只是掩盖了问题，这是一个存储在错误位置的文件。您可以使用它进行测试以查找文件应该去哪里，然后删除该行并将您需要使用的文件放在那里。

# ruby - 尝试更新 rvm 以获取更新的 ruby 版本，但似乎没有更新

> ID：15775981
> 
> 赞同：0
> 
> 时间：2013-04-02T23:02:12.873
> 
> 标签：ruby, rvm

我在更新 rvm 时遇到问题。

根据[Update RVM list known](https://stackoverflow.com/questions/12650164/update-rvm-list-known)，我会：

```
Tue Apr 02$ rvm -v

rvm 1.8.1 by Wayne E. Seguin (wayneeseguin@gmail.com) [https://rvm.beginrescueend.com/]

Tue Apr 02$ rvm get stable
Tue Apr 02$ rvm -v

rvm 1.8.1 by Wayne E. Seguin (wayneeseguin@gmail.com) [https://rvm.beginrescueend.com/] 
```

但似乎 rvm 版本应该更新。什么是正确的命令来让它更新和更新`rvm list known`之后保持不变`rvm get stable`。我将如何更新 rvm 以获取可以升级到的最新红宝石？

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:06:03.143

尝试

```
rvm get head
rvm reload
rvm get stable 
```

# php - 将大整数从 php 存储到 mysql 的最节省空间的方法？

> ID：15775983
> 
> 赞同：1
> 
> 时间：2013-04-02T23:02:17.587
> 
> 标签：php, mysql, types, space-efficiency

我正在处理最长 128 位的整数。它们用于存储大量标志，我不需要对它们进行任何奇怪的数学运算，因此我可以将其视为 php 中的字符串来绕过 PHP_INT_MAX 限制。

我想将这些数字存储在 mysql 的 BINARY 列中。该列需要 4-16 个字节来保存数字。

我的理解是 php 中的 BINARY 列是二进制字符串，这是否意味着我不使用 az 作为字符集的一部分会浪费空间？我应该使用不同类型的列吗？我是否需要在 php 中进行 base_convert 才能充分利用字符集？

如何将 php 中 128 位整数的字符串表示形式最有效地存储到 php 中的 128 位列中？

此外，如果我存储的大约一半整数只需要 4 个字节，那么使用 VARBINARY 列会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:26:48.840

假设您将使用 128 位的全部范围，每个数字同样可能，您可以最节省空间的是每个数字存储 128/8 = 16 个字符。

这个二进制表示和 PHP 字符串之间的转换虽然有点问题。要将二进制字符串解码为 base-16 数字，您可以使用`unpack`：

```
$numberInHex = unpack("H*", $binaryData); 
```

如果必须将输出转换为十进制数或从十进制数转换，则必须使用 gmp 或 bc。

**更新：**一个例子：

```
> create table binary_test ( int128 binary(16) );
> insert into binary_test set int128 = 0x11223344556677889900112233445566;
> select hex(int128) from binary_test;
+----------------------------------+
| hex(int128)                      |
+----------------------------------+
| 11223344556677889900112233445566 |
+----------------------------------+ 
```

除了 0x1122...，您还可以使用 unhex('1122..')。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:09:52.347

如果您以二进制格式保存整数（例如：45 -> 00101101(bin), 0x2D(hex)），您不会浪费任何空间，因为您不会使用字符而是位。

与往常一样，这取决于您拥有多少数据。如果您谈论的是几千个数字，则无需担心 varbinary。另一方面，如果您有几百万/十亿条记录，那么值得进行一些优化。

# android - 你如何在eclipse和真正的android设备上使用usb调试

> ID：15775984
> 
> 赞同：0
> 
> 时间：2013-04-02T23:02:22.417
> 
> 标签：android, debugging

我正在尝试使用我的 Samsung Infuse 4g 手机调试 android 应用程序。手机开启usb调试。我在清单中添加了 debuggable = true; Logcat 说调试器已经解决（1325）。但是当我运行代码时，它不会在我的断点处停止，并且我在变量窗口中看不到任何变量。任何想法这里出了什么问题？这是 logcat 输出：

```
04-03 00:55:47.210: I/System.out(8726): Sending WAIT chunk
04-03 00:55:47.218: I/dalvikvm(8726): Debugger is active
04-03 00:55:47.415: I/System.out(8726): Debugger has connected
04-03 00:55:47.415: I/System.out(8726): waiting for debugger to settle...
04-03 00:55:47.613: I/System.out(8726): waiting for debugger to settle...
04-03 00:55:47.819: I/System.out(8726): waiting for debugger to settle...
04-03 00:55:48.023: I/System.out(8726): waiting for debugger to settle...
04-03 00:55:48.234: I/System.out(8726): waiting for debugger to settle...
04-03 00:55:48.433: I/System.out(8726): waiting for debugger to settle...
04-03 00:55:48.636: I/System.out(8726): waiting for debugger to settle...
04-03 00:55:48.839: I/System.out(8726): waiting for debugger to settle...
04-03 00:55:49.042: I/System.out(8726): waiting for debugger to settle...
04-03 00:55:49.249: I/System.out(8726): debugger has settled (1325) 
```

我唯一一次看到调试器正在做某事是当我故意使程序崩溃时。然后我看到了 Double.ParseDouble(String) 的异常，但我错过了它的源代码......我什至尝试了模拟器，我遇到了同样的问题，直到我崩溃程序之前没有调试。

```
package com.example.calculator;

public  class Math {
double mathValue;
double totalValue;
int lastOperator;

public double getTotalValue(){
    if (this.totalValue == 0)
        return this.mathValue;
    else
    return this.totalValue;
}

public void add(){

}

public void setOperater(String nextOperater){
    if (nextOperater == "+")
        this.lastOperator = 1;

    if (nextOperater == "-")
        this.lastOperator = 2;

    if (nextOperater == "*")
        this.lastOperator = 3;

    if (nextOperater == "/")
        this.lastOperator = 4;

    if (nextOperater == "")
        this.mathValue = 0;

}

public void doMath(double inValue){
    this.mathValue = inValue;
    switch (lastOperator){
    case 1 : Add();
            break;
    case 2 : Subtract();
            break;
    case 3 : Multiply();
            break;
    case 4: Divide();
            break;

    }

}

public void Add(){
    System.out.println("The line before my breakpoint");
    totalValue += mathValue; <---- break point
    System.out.println("The line after my breakpoint");
}

public void Subtract(){

    totalValue -= mathValue;
}

public void Multiply(){

    totalValue *= mathValue;
}

public void Divide(){
    if (mathValue == 0)
        totalValue = 0;
    else
        totalValue /= mathValue;

}

}
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.calculator"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" 
        android:debuggable="true">
        <activity
            android:name="com.example.calculator.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:44:20.453

您需要在调试模式下运行应用程序

![调试模式](https://i.stack.imgur.com/vllZf.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T00:48:20.010

确保在调试控件中未启用“跳过所有断点”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T14:39:51.520

在 AndroidManifest.xml 中将您的应用程序声明为“可调试”。

```
<application
    android:debuggable="true"
    ... >
    ...
</application> 
```

# android - Android：使用 HTTP 和 AsyncTask 上传文件时出错

> ID：15775986
> 
> 赞同：0
> 
> 时间：2013-04-02T23:02:27.587
> 
> 标签：android, upload, android-asynctask

我正在尝试使用 Asynctask 将文件上传到 PHP 服务器，但由于出现错误而无法上传。这是日志：

```
04-03 00:52:16.065: I/Process(11648): Sending signal. PID: 11648 SIG: 9
04-03 00:52:28.955: I/URL FORMATION(11752): MALFORMATED URL
04-03 00:52:28.955: E/3rd(11752): Starting to bad things
04-03 00:52:28.963: W/dalvikvm(11752): threadid=11: thread exiting with uncaught exception (group=0x4195f2a0)
04-03 00:52:28.963: E/AndroidRuntime(11752): FATAL EXCEPTION: AsyncTask #1
04-03 00:52:28.963: E/AndroidRuntime(11752): java.lang.RuntimeException: An error occured while executing 

doInBackground()
04-03 00:52:28.963: E/AndroidRuntime(11752):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
04-03 00:52:28.963: E/AndroidRuntime(11752):    at java.util.concurrent.FutureTask$Sync.innerSetException

(FutureTask.java:273)
04-03 00:52:28.963: E/AndroidRuntime(11752):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
04-03 00:52:28.963: E/AndroidRuntime(11752):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
04-03 00:52:28.963: E/AndroidRuntime(11752):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-03 00:52:28.963: E/AndroidRuntime(11752):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
04-03 00:52:28.963: E/AndroidRuntime(11752):    at java.util.concurrent.ThreadPoolExecutor.runWorker

(ThreadPoolExecutor.java:1076)
04-03 00:52:28.963: E/AndroidRuntime(11752):    at java.util.concurrent.ThreadPoolExecutor$Worker.run

(ThreadPoolExecutor.java:569)
04-03 00:52:28.963: E/AndroidRuntime(11752):    at java.lang.Thread.run(Thread.java:856)
04-03 00:52:28.963: E/AndroidRuntime(11752): Caused by: java.lang.NullPointerException
04-03 00:52:28.963: E/AndroidRuntime(11752):    at com.example.up.HttpFileUploader.thirdTry(HttpFileUploader.java:54)
04-03 00:52:28.963: E/AndroidRuntime(11752):    at com.example.up.HttpFileUploader.doStart(HttpFileUploader.java:36)
04-03 00:52:28.963: E/AndroidRuntime(11752):    at com.example.up.MainActivity.uploadFile(MainActivity.java:59)
04-03 00:52:28.963: E/AndroidRuntime(11752):    at com.example.up.MainActivity$myasynctask.doInBackground

(MainActivity.java:38)
04-03 00:52:28.963: E/AndroidRuntime(11752):    at com.example.up.MainActivity$myasynctask.doInBackground

(MainActivity.java:1)
04-03 00:52:28.963: E/AndroidRuntime(11752):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-03 00:52:28.963: E/AndroidRuntime(11752):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-03 00:52:28.963: E/AndroidRuntime(11752):    ... 5 more
04-03 00:52:29.182: D/libEGL(11752): loaded /vendor/lib/egl/libEGL_POWERVR_SGX540_120.so
04-03 00:52:29.182: D/libEGL(11752): loaded /vendor/lib/egl/libGLESv1_CM_POWERVR_SGX540_120.so
04-03 00:52:29.190: D/libEGL(11752): loaded /vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
04-03 00:52:29.284: D/OpenGLRenderer(11752): Enabling debug mode 0
04-03 00:52:35.518: I/Choreographer(11752): Skipped 375 frames!  The application may be doing too much work on its main 

thread.
04-03 00:52:35.768: E/WindowManager(11752): Activity com.example.up.MainActivity has leaked window 

com.android.internal.policy.impl.PhoneWindow$DecorView@42138c08 that was originally added here
04-03 00:52:35.768: E/WindowManager(11752): android.view.WindowLeaked: Activity com.example.up.MainActivity has leaked 

window com.android.internal.policy.impl.PhoneWindow$DecorView@42138c08 that was originally added here
04-03 00:52:35.768: E/WindowManager(11752):     at android.view.ViewRootImpl.<init>(ViewRootImpl.java:397)
04-03 00:52:35.768: E/WindowManager(11752):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:311)
04-03 00:52:35.768: E/WindowManager(11752):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:224)
04-03 00:52:35.768: E/WindowManager(11752):     at android.view.WindowManagerImpl$CompatModeWrapper.addView

(WindowManagerImpl.java:149)
04-03 00:52:35.768: E/WindowManager(11752):     at android.view.Window$LocalWindowManager.addView(Window.java:556)
04-03 00:52:35.768: E/WindowManager(11752):     at android.app.Dialog.show(Dialog.java:277)
04-03 00:52:35.768: E/WindowManager(11752):     at com.example.up.MainActivity$myasynctask.onPreExecute

(MainActivity.java:32)
04-03 00:52:35.768: E/WindowManager(11752):     at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:586)
04-03 00:52:35.768: E/WindowManager(11752):     at android.os.AsyncTask.execute(AsyncTask.java:534)
04-03 00:52:35.768: E/WindowManager(11752):     at com.example.up.MainActivity.onCreate(MainActivity.java:20)
04-03 00:52:35.768: E/WindowManager(11752):     at android.app.Activity.performCreate(Activity.java:5163)
04-03 00:52:35.768: E/WindowManager(11752):     at android.app.Instrumentation.callActivityOnCreate

(Instrumentation.java:1094)
04-03 00:52:35.768: E/WindowManager(11752):     at android.app.ActivityThread.performLaunchActivity

(ActivityThread.java:2061)
04-03 00:52:35.768: E/WindowManager(11752):     at android.app.ActivityThread.handleLaunchActivity

(ActivityThread.java:2122)
04-03 00:52:35.768: E/WindowManager(11752):     at android.app.ActivityThread.access$600(ActivityThread.java:140)
04-03 00:52:35.768: E/WindowManager(11752):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1228)
04-03 00:52:35.768: E/WindowManager(11752):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-03 00:52:35.768: E/WindowManager(11752):     at android.os.Looper.loop(Looper.java:137)
04-03 00:52:35.768: E/WindowManager(11752):     at android.app.ActivityThread.main(ActivityThread.java:4895)
04-03 00:52:35.768: E/WindowManager(11752):     at java.lang.reflect.Method.invokeNative(Native Method)
04-03 00:52:35.768: E/WindowManager(11752):     at java.lang.reflect.Method.invoke(Method.java:511)
04-03 00:52:35.768: E/WindowManager(11752):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run

(ZygoteInit.java:994)
04-03 00:52:35.768: E/WindowManager(11752):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:761)
04-03 00:52:35.768: E/WindowManager(11752):     at dalvik.system.NativeStart.main(Native Method) 
```

为了上传文件，我有 2 个类：HTTPFileUploader：

```
public class HttpFileUploader implements Runnable{

    URL connectURL;
    String params;
    String responseString;
    //InterfaceHttpUtil ifPostBack;
    String fileName;
    byte[] dataToServer;

    HttpFileUploader(String urlString, String params, String fileName ){
        try{
            connectURL = new URL(urlString);
        }catch(Exception ex){
            Log.i("URL FORMATION","MALFORMATED URL");
        }
        this.params = params+"=";
        this.fileName = fileName;
    }

    void doStart(FileInputStream stream){ 
        fileInputStream = stream;
        thirdTry();
    } 

    FileInputStream fileInputStream = null;
    void thirdTry() {
        String exsistingFileName = fileName;

        String lineEnd = "\r\n";
        String twoHyphens = "--";
        String boundary = "*****";
        String Tag="3rd";
        try
        {
            //------------------ CLIENT REQUEST

            Log.e(Tag,"Starting to bad things");
            // Open a HTTP connection to the URL

            HttpURLConnection conn = (HttpURLConnection) connectURL.openConnection();

            // Allow Inputs
            conn.setDoInput(true);

            // Allow Outputs
            conn.setDoOutput(true);

            // Don't use a cached copy.
            conn.setUseCaches(false);

            // Use a post method.
            conn.setRequestMethod("POST");

            conn.setRequestProperty("Connection", "Keep-Alive");

            conn.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);

            DataOutputStream dos = new DataOutputStream( conn.getOutputStream() );

            dos.writeBytes(twoHyphens + boundary + lineEnd);
            dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + exsistingFileName +"\"" + lineEnd);
            dos.writeBytes(lineEnd);

            Log.e(Tag,"Headers are written");

            // create a buffer of maximum size

            int bytesAvailable = fileInputStream.available();
            int maxBufferSize = 1024;
            int bufferSize = Math.min(bytesAvailable, maxBufferSize);
            byte[] buffer = new byte[bufferSize];

            // read file and write it into form...

            int bytesRead = fileInputStream.read(buffer, 0, bufferSize);

            while (bytesRead > 0)
            {
            dos.write(buffer, 0, bufferSize);
            bytesAvailable = fileInputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            }

            // send multipart form data necesssary after file data...

            dos.writeBytes(lineEnd);
            dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

            // close streams
            Log.e(Tag,"File is written");
            fileInputStream.close();
            dos.flush();

            InputStream is = conn.getInputStream();
            // retrieve the response from server
            int ch;

            StringBuffer b =new StringBuffer();
            while( ( ch = is.read() ) != -1 ){
            b.append( (char)ch );
            }
            String s=b.toString(); 
            Log.i("Response",s);
            dos.close();

        }
        catch (MalformedURLException ex)
        {
            Log.e(Tag, "error: " + ex.getMessage(), ex);
        }

        catch (IOException ioe)
        {
            Log.e(Tag, "error: " + ioe.getMessage(), ioe);
        }
    }

@Override
public void run() {

}

} 
```

MainActivity，其中 Asynctask 在开始时执行，应该从 sdcard 上传文件。

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        new myasynctask().execute();

    }

    public class myasynctask extends AsyncTask<Void, Void, Void>{
        private final ProgressDialog dialog = new ProgressDialog(
                MainActivity.this);

        protected void onPreExecute() {
            this.dialog.setMessage("Loading...");
            this.dialog.setCancelable(false);
            this.dialog.show();
        }
            @Override
            protected Void doInBackground(Void... params) {

                File sdCard = Environment.getExternalStorageDirectory();
                uploadFile(sdCard.getAbsolutePath() + "/PruebasEvaluacion/text.txt");
                return null;
            }

            protected void onPostExecute(Void result) {

                // Here if you wish to do future process for ex. move to another activity do here

                if (dialog.isShowing()) {
                    dialog.dismiss();
                }

            }
        }

       public void uploadFile(String filename){
            try {
                //FileInputStream fis =this.openFileInput(filename);
                FileInputStream fis = new FileInputStream(filename);
                HttpFileUploader htfu = new HttpFileUploader("192.168.1.37/prueba/upload_file.php","noparamshere", filename);
                htfu.doStart(fis);
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            }
        }

} 
```

我希望一切都清楚，如果有不清楚的地方，我会回答一切。感谢您的时间和耐心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:53:01.140

您对以下行有疑问

```
HttpURLConnection conn = (HttpURLConnection) connectURL.openConnection(); 
```

这是因为您试图打开与格式错误的 URL 的连接

如果您查看日志猫，您将看到以下行

```
04-03 00:52:28.955: I/URL FORMATION(11752): MALFORMATED URL 
```

[发生这种情况是因为您在创建URL](http://developer.android.com/reference/java/net/URL.html#URL%28java.lang.String%29)时没有定义协议。

```
HttpFileUploader htfu = new HttpFileUploader("192.168.1.37/prueba/upload_file.php","noparamshere", filename); 
```

根据您的要求添加 Http 或 ftp。

# ubuntu - 在ubuntu上的erlang中安装用于ssl的种子密码？

> ID：15775990
> 
> 赞同：0
> 
> 时间：2013-04-02T23:02:42.677
> 
> 标签：ubuntu, ssl, erlang, encryption, seed

我很好奇为什么这段代码不起作用。我认为这是因为我缺少某个提供种子或可能 rand 命令的库。

这是我的错误信息

> {"init 终止于 do_boot",{undef,[{ssl,seed,[<<256 bytes>>],[]},{egs,start,0,[{file,"src/egs.erl"}, {line,49}]},{init,start_it,1,[]},{init,start_em,1,[]}]}}

这是 .erl 中的行

> ssl：种子（加密：rand_bytes（256）），

如果问题与图书馆有关，请告诉我在哪里可以获得种子或兰特。如果我可以通过命令行“sudo apt-get install ....”安装它们，那也很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:01:54.947

你用的是什么版本的 Erlang？在现代 Erlang 中，“ssl”模块中没有“种子”方法。您之前是否启动过 ssl 应用程序？( `ssl:start().`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T01:08:47.383

事实证明，加密在较新版本的 Erlang 中发挥了作用。所以我只是删除了该行并重新编译并且它起作用了。

# wxpython - wxpython，将数据传递给 self.Bind 中的函数

> ID：15775992
> 
> 赞同：3
> 
> 时间：2013-04-02T23:02:45.687
> 
> 标签：wxpython

我很难找到答案来知道它是否可能。我查看了 wxpython 演示并进行了一些谷歌搜索，但无济于事。

绑定动作时如何将某种数据传递给函数调用？

例如

self.Bind(wx.EVT_MENU, self.DoThis, item1)

self.Bind(wx.EVT_MENU, self.DoThis, item2)

我有一组菜单选项，我想由同一个函数（DoThis）处理，但需要向该函数传递一些数据，因为它的输出取决于选择了哪个菜单项。

我知道我可以将每个菜单项绑定到不同的功能，因此可以多次复制它，但是为了代码的清晰和长度，在同一个功能中处理它们会简单得多，因为我有大约十几个菜单项。这甚至可能吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T23:13:17.390

一个相关的问题是[是否可以将参数传递给事件绑定？](https://stackoverflow.com/questions/173687/is-it-possible-to-pass-arguments-into-event-bindings). 这可以通过将参数传递给回调来实现，正如您可以看到[将参数传递给回调](http://wiki.wxpython.org/Passing%20Arguments%20to%20Callbacks)一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T23:24:07.137

你可以这样做。

```
import wx

class TestFrame(wx.Frame):
    def __init__(self, *args, **kwargs):
        super(TestFrame, self).__init__(*args, **kwargs)

        menubar = wx.MenuBar()
        self.SetMenuBar(menubar)

        menuFile = wx.Menu()
        self.menuSave = menuFile.Append(-1, 'Save', 'Save Document')
        self.menuClose = menuFile.Append(-1, 'Close', 'Close Application')
        menubar.Append(menuFile, '&File')
        self.Bind(wx.EVT_MENU, self.onMenu)

        panel = wx.Panel(self)

        pSizer = wx.BoxSizer(wx.VERTICAL)

        panel.SetSizer(pSizer)

        vSizer = wx.BoxSizer(wx.VERTICAL)
        vSizer.Add(panel, 1, wx.EXPAND)
        self.SetSizer(vSizer)
        self.Layout()

    def onMenu(self, event):
        menuId = event.Id
        if menuId == self.menuSave.Id:
            print 'menuSave'
        elif menuId == self.menuClose.Id:
            print 'menuClose'

if __name__ == '__main__':
    wxapp = wx.App(False)
    testFrame = TestFrame(None)
    testFrame.Show()
    wxapp.MainLoop() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-07T17:28:32.313

我试过了。有用！

```
self.Bind(wx.EVT_BUTTON, lamdba evt, a=1, b=2: self.funcName(evt, a, b), buttonName) 
```

因此，您可以将任何数据传递给任何函数。

# android - 运行代码时找不到 ListView。说 ListActivity 必须有一个 ID 为 android.R.id.list 的 ListView 属性

> ID：15775998
> 
> 赞同：0
> 
> 时间：2013-04-02T23:03:18.233
> 
> 标签：android, listview, listactivity

我已经定义了列表视图，并与布局 xml 文件中的列表视图的 ID 正确链接。我仍然收到上述错误。

我研究了这里发布的类似问题，但无济于事。

请帮忙。

```
public class ImageList extends ListActivity {

final static String imageUrls[] = { //some urls

        };

private List<Photo> model = new ArrayList<Photo>();
PhotoAdapter adapter = null;
ListView list = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.imagelist);

    list = (ListView) findViewById(R.id.lvImageList);
    // ArrayList<Bitmap> images = new ArrayList<Bitmap>();

    adapter = new PhotoAdapter(this, android.R.layout.simple_list_item_1,
            model);

    list.setAdapter(adapter);
    ProduceImageList(imageUrls);

}

public void ProduceImageList(String[] imageUrls) {
    int size = imageUrls.length;
    ImageView imagePlace = null;
    for (int i = 0; i < 4; i++) {
        imagePlace = (ImageView) getListView().getChildAt(i);
        downloadImage task = new downloadImage(imagePlace);
        task.execute(imageUrls[i]);
    }
}
 //asynchronous downloading of images
public class downloadImage extends AsyncTask<String, Void, Bitmap> {
    // private String url;
    Photo p = new Photo();
    private final WeakReference<ImageView> imageViewReference;

    public downloadImage(ImageView imageView) {
        imageViewReference = new WeakReference<ImageView>(imageView);
    }

    @Override
    protected Bitmap doInBackground(String... params) {
        // TODO Auto-generated method stub
        String localUrl = params[0];
        //here a bitmap download method is used which works fine separately
                    return BitmapDownload.DownloadBitmap(localUrl);
    }

    @Override
    protected void onPostExecute(Bitmap result) {
        // TODO Auto-generated method stub
        if (isCancelled())
            result = null;
        if (imageViewReference != null) {
            ImageView imageView = imageViewReference.get();
            if (imageView != null) {
                p.setPhotoPic(result);
                adapter.add(p);
            }
        }

        super.onPostExecute(result);
    }

}
  //class defined with getter and setter method
public class Photo {
    private Bitmap pic = null;

    public Bitmap getPhotoPic() {
        return pic;
    }

    public void setPhotoPic(Bitmap incomingPic) {
        this.pic = incomingPic;
    }
}

 //custom ArrayAdapter to hold images
class PhotoAdapter extends ArrayAdapter<Photo> {

    public PhotoAdapter(Context context, int textViewResourceId,
            List<Photo> objects) {
        super(context, textViewResourceId, objects);
        // TODO Auto-generated constructor stub
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        View row = convertView;
        PhotoHolder holder = null;
        if (row == null) {
            LayoutInflater inflater = getLayoutInflater();
            row = inflater.inflate(R.layout.imagelistrow, parent,false);
            holder = new PhotoHolder(row);
            row.setTag(holder);
        } else
            holder = (PhotoHolder) row.getTag();
        holder.populateFrom(model.get(position));
        return (row);
    }

}

 //holder for the row view
static class PhotoHolder {
    private ImageView imagePlace = null;
    private View row = null;

    PhotoHolder(View row) {
        this.row = row;

        imagePlace = (ImageView) row.findViewById(R.id.ivImageList);
    }

    void populateFrom(Photo p) {

        imagePlace.setImageBitmap(p.getPhotoPic());
    }
} 
```

}

我的看法是...

```
 <?xml version="1.0" encoding="utf-8"?> 
    <LinearLayout xmlns:android="schemas.android.com/apk/res/android"; android:layout_width="match_parent" android:layout_height="match_parent" android:orientation="vertical"> 
         <ListView android:id="@+id/lvImageList" android:layout_width="match_parent" android:layout_height="wrap_content"/>
    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T23:23:34.993

您不能使用自定义 ListView ID，`ListActivity`同时`ListActivity`，根据错误，您的`ListView`. 目前，您使用的自定义 ID 为`lvImageList`. 要么更改您的 Activity 以使用`Activity`和不使用，`ListActivity`要么更新您的 ListView 的 XML 以使用：

```
<ListView
    android:id="@android:id/android:list"
    ... /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:41:58.673

无需在 xml 文件中定义自定义 Listview id。您只需使用 android Listview id，无需在[ListActivity](http://developer.android.com/reference/android/app/ListActivity.html)中按 id 查找视图，只需调用[getListView()](http://developer.android.com/reference/android/app/ListActivity.html#getListView%28%29)即可获取在 Layout 文件中使用默认 android id 定义的 listview