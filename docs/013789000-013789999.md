# StackOverflow 问答 13789000-13789999

# c# - 尝试在 GTK 中创建 DatePicker 时遇到问题#

> ID：13789007
> 
> 赞同：0
> 
> 时间：2012-12-09T15:53:30.643
> 
> 标签：c#, mono, gtk#

我是 GTK# 的新手（以及桌面开发），我无法弄清楚这似乎是一项简单的任务。:(

我无法让一个简单的日期选择器工作。我有一个带有单个文本框条目和一个按钮的主窗口。单击按钮时，它会打开一个带有日历小部件的新窗口，当用户双击一个日期时，它应该将选定的日期返回到主窗口上的文本框条目。

这是我的代码，我错过了什么？

主窗口.cs

```
using System;
using Gtk;

public partial class MainWindow: Gtk.Window
{   
    public MainWindow (): base (Gtk.WindowType.Toplevel)
    {
        Build ();
    }

    protected void OnDeleteEvent (object sender, DeleteEventArgs a)
    {
        Application.Quit ();
        a.RetVal = true;
    }

    private DateTest1.CalendarTest datePicker;

    protected void OnButton1Clicked (object sender, EventArgs e)
    {
        datePicker = new DateTest1.CalendarTest();
        datePicker.DestroyEvent += new DestroyEventHandler(datePickerDestroyed); 
        datePicker.ShowAll(); 
    }

    public void datePickerDestroyed(object sender, EventArgs e)
    { 
        entry1.Text = datePicker.DatePicked.ToString();
    } 
} 
```

日历测试.cs

```
using System;

namespace DateTest1
{
    public partial class CalendarTest : Gtk.Window
    {
        public DateTime DatePicked;

        public CalendarTest () : 
                base(Gtk.WindowType.Toplevel)
        {
            this.Build ();
        }

        protected void OnCalendar1DaySelectedDoubleClick (object sender, EventArgs e)
        {
            var datePicker = (Gtk.Calendar)sender;
            DatePicked = datePicker.Date;
            this.Destroy();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T23:15:46.210

您必须使用`Destroyed`事件，而不是`DestroyEvent`;) 也就是说，使用这个： `datePicker.Destroyed += new EventHandler(datePickerDestroyed);`

另请参阅[此问题](https://stackoverflow.com/questions/13171222/gtk-destroy-event/13211127)。

# regex - 在 vb.net 中添加正则表达式字符串

> ID：13789012
> 
> 赞同：1
> 
> 时间：2012-12-09T15:54:25.010
> 
> 标签：regex, vb.net, listview, search, mp3

我有一个字符串，我可以找到以下内容

*   Kbps
*   期间
*   兆字节
*   歌名

网站 [http://abmp3.com/](http://abmp3.com/)

我似乎找不到我使用 Expresso 创建正则表达式并使用网页中的源来获取匹配项的 URL，但是由于某种原因，当我将此 href="(.*.mp3)" 添加到字符串的末尾时它不会找到任何东西。kbps、duration 和 mb 都在同一行。歌曲标题在不同的行，URL 也是

我的问题是如何将 href="(.*.mp3)" 添加到正则表达式字符串的末尾？

正则表达式代码

```
":6px;"">(.* Kbps)<br>(.*)<br> (.* Mb)</div></td>\D+\S+<strong>(.*) mp3" 
```

需要在最后加上这个

```
href="(.*.mp3)" 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T18:28:31.093

查看该网站，这似乎对您有用：

```
href=\".*\.mp3\" 
```

# wcf - Windows 商店应用程序向受 ACS 保护的 WCF 进行身份验证

> ID：13789014
> 
> 赞同：3
> 
> 时间：2012-12-09T15:54:51.420
> 
> 标签：wcf, windows-8, windows-store-apps, acs

我正在开发一个必须连接到 wcf 宁静服务的 Windows 8 商店应用程序。该服务目前受 ACS 保护。有没有人有一个成功连接并从 C# 上的 ACS 获取令牌的 win8 客户端的工作示例？到目前为止，我只在 windows 8 的 windows azure toolkit 上找到了代码，但它是在 javascript 上的，并且鉴于它不知道 JS，它对我来说几乎没用，

问候

默多克

# javascript - 单击按钮时更改 CSS 样式表

> ID：13789019
> 
> 赞同：1
> 
> 时间：2012-12-09T15:55:25.853
> 
> 标签：javascript, css

伙计们，我已经看得很清楚了，但似乎没有什么与我的相似。

我刚刚完成了自定义 CMS 的创建，现在想要实现自定义功能，例如模板。

我相信它使用 Javascript，但是我在服务器上有各种样式表。css.css、css1.css 等，以 css.css 为主。

是否有可能在单击按钮时，我可以选择不同的工作表，这意味着从本质上讲，我将选择的工作表成为主要样式表 css.css？

谢谢你尽你所能的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T15:57:56.493

是的，您可以在页面头部插入一个`link`元素。您可以使用`document.createElement`或使用 JQuery 来执行此操作（如果您使用它）。如果你真的想切换样式表，你可以删除前一个`link`元素，或者只是替换它的`href`属性。

# javascript - 如何通过 optgroup 设置选定的选项？

> ID：13789020
> 
> 赞同：0
> 
> 时间：2012-12-09T15:55:29.907
> 
> 标签：javascript, jquery, html, jquery-selectors

我有以下选择：

```
<select name="pricelist_product[]" id="pricelist_product">
  <option value="error" disabled="disabled">SELECT PRODUCT</option>
  <optgroup label="Cellcom" id="1">
    <option value="70">75</option>"
    <option value="125">125</option>
    <option value="199">199</option>
    <option value="5">card bonus 5</option>
  </optgroup>
  <optgroup label="Orange" id="2">
    <option value="70"> 70</option>
    <option value="130"> 130</option>
    <option value="135"> 135 </option>
  </optgroup>
</select> 
```

现在这只是一个简化，实际上我可能会遇到不同组的选项具有相同值的情况。

现在我所做的是使用 ID 推迟它们，`optgroup`这是一个很好的 hack，但我遇到了如何按组设置选定选项的问题。我有以下代码：

```
$('#prices_table tbody tr:last').children().eq(0).children()
  .val(item.product_id).attr('selected','selected'); 
```

现在`item.product_id`包含的值，当然可以设置错误。我有一个包含如下值的二维数组：

```
values[item.provider_id][item.product_id] 
```

其中第一个 ID 是`optgroup`id，第二个是值。我怎样才能做到这一点？我没有找到有关该主题的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T18:19:45.333

试试这个：

```
$(function() {
    var groupId = "1";
    var value = "70";

    $("#pricelist_product #'" + groupId +  "' option[value='" + value + "']").prop("selected", true);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T18:29:05.007

试试这个

```
$("#pricelist_product > optgroup[id='" + item.provider_id +"']").find("option[value='" + item.product_id + "']").attr("selected","selected"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-26T16:14:42.187

这是一个更简单的方法：

`$(yourInputSelector).val(item.product_id);`

# jquery - 使用两个 jcarousels 并让一个影响另一个

> ID：13789022
> 
> 赞同：0
> 
> 时间：2012-12-09T15:55:47.190
> 
> 标签：jquery, css, wordpress, jcarousel

我设置了 sorgalla jcarousel 插件，我试图做的是有两个轮播实例，其中一个会影响另一个。一个将具有块/垂直样式，另一个将具有水平样式。

不幸的是，我才刚刚开始学习 Javascript 和 Jquery，所以我不太确定如何从这里开始，任何关于我至少可以看看的帮助建议都会很棒。

这是被调用两次的函数...

```
<script type="text/javascript">
jQuery(document).ready(function() {
jQuery('#mycarousel').jcarousel({
  start: 2, // Configuration goes here
    wrap: "circular",
    auto: 1,
    scroll: 1,

});
});

jQuery(document).ready(function() {
jQuery('#second-carousel').jcarousel({
    start: 2, // Configuration goes here
    wrap: "circular",
    auto: 1,
    scroll: 1,

});
});
</script> 
```

这是我实际插入 jcarousels 的地方...

```
<ul id="mycarousel" class="jcarousel-skin-tango">
    <li>test</li>
    <li>test1</li>
    <li>test2</li>

    </li>
</ul>

<ul id="second-carousel" class="jcarousel-skin-tango">
    <li>test</li>
    <li>test1</li>
    <li>test2</li>

    </li>
</ul> 
```

有没有办法可以将两者同步起来，所以当我按下第一个的方向导航时，它也会控制第二个？这是他们正在接受测试的网站... [http://gonuts.ie/?page_id=99](http://gonuts.ie/?page_id=99)

最终我的目标是实现[http://www.skysports.com](http://www.skysports.com)在他们页面顶部的内容，也许有一个更简单的方法来实现它我不确定。再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T22:46:28.603

这是一种链接两个 jCarousel 的方法，使其类似于 Skysports 站点（注意 Rick Calder 的评论，即 Skysports 示例是单个轮播）。

```
var carousel_2;
$('#mycarousel').jcarousel({
    start: 1,
    wrap: "circular",
    scroll: 1,
    itemFirstInCallback: {
        onBeforeAnimation: function(carousel, item, index, action) {
            if (carousel_2) {
                carousel_2[action]();
            }
        }
    }
});
$('#second-carousel').jcarousel({
    start: 2,
    wrap: "circular",
    scroll: 1,
    vertical: true,
    buttonNextHTML: null,
    buttonPrevHTML: null,
    initCallback: function(c) {
        carousel_2 = c;
    }
}); 
```

**[演示](http://jsfiddle.net/TM96s/4/)**

在 Opera 中进行测试，并参考 Sparky672 的评论，我没有遇到任何问题`wrap:"circular"`。

# javascript - 从 PHP 到 Javascript 的正则表达式格式

> ID：13789024
> 
> 赞同：0
> 
> 时间：2012-12-09T15:55:59.313
> 
> 标签：javascript, regex

你能帮我么。如何`(?<=^|\s):d(?=$|\s)`在 javascript RegExp 中添加此正则表达式？

例如

```
regex = new RegExp("?????" , 'g'); 
```

我想替换表情符号`:d`，但前提是它被空格包围（或在字符串的末尾）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T16:08:03.503

首先，正如 Some1.Kill.The.DJ 提到的，我建议您使用文字语法来创建正则表达式：

```
var pattern = /yourPatternHere/g; 
```

它更短，更容易阅读，并且避免了转义序列的复杂性。

该模式不起作用的原因是JavaScript不支持lookbehinds ( `(?<=...)`。所以你必须找到一个解决方法。你不会在你的模式中包含那个字符：

```
var pattern = /(?:^|\s):d(?!\S)/g; 
```

因为无论如何在你的模式中捕获任何东西都没有用（因为`:d`是固定的）你可能只对匹配的位置感兴趣。这意味着，当您找到匹配项时，您必须检查第一个字符是否是空格字符（或不是`:`）。如果是这种情况，您必须将位置增加`1`. 如果您知道您的输入字符串永远不能以空格开头，那么您可以简单地增加任何找到的位置（如果不是）`0`。

请注意，我稍微简化了您的前瞻。这实际上是您不必区分字符串结尾和特定字符类型的环视之美。只需使用负前瞻，并确保前面没有非空格字符。

仅供将来参考，这意味着您可以将初始模式简化为：

```
(?<!\S):d(?!\S) 
```

（如果您使用的正则表达式引擎支持lookbehinds。）

**编辑：**

在您对另一个答案发表评论后，使用该解决方法实际上要容易得多。只需写回捕获的空格字符：

```
string = string.replace(/(^|\s):d(?!\S)/g, "$1emoticonCode"); 
```

where`$1`指的是匹配的内容`(^|\s)`。即如果匹配是在字符串的开头`$1`将是空的，并且如果之前有一个空格`:d`，那么`$1`将包含那个空格字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T16:01:51.323

`Javascript`不支持`lookbehind`ie `(?<=)`..

它支持`lookahead`

更好的使用

```
/(?:^|\s)(:d)(?=$|\s)/g 
```

`Group1`捕获所需的匹配

# nginx - 从 apache 切换到 nginx：PHP 邮件不再工作

> ID：13789026
> 
> 赞同：0
> 
> 时间：2012-12-09T15:56:45.863
> 
> 标签：nginx, php

我切换到新服务器，并从 apache 切换到 nginx。除了 php 邮件功能（返回 true 但未收到邮件）外，一切都运行良好。

在导致问题的切换期间，我可能忘记安装/配置什么？

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T19:45:03.233

2个原因浮现在脑海

您没有安装 sendmail。

您没有为 php-fpm 正确配置 php.ini。

# php - 不向数据库插入值：

> ID：13789029
> 
> 赞同：1
> 
> 时间：2012-12-09T15:57:12.150
> 
> 标签：php, html, mysql

我正在尝试立即注册！餐厅网站的区域，并希望在所有运行`members_t`的数据库表中插入新成员的数据。我为此目的使用 PHP 和 HTML。此外，我正在一个单独的文件中使用 javaScript 进行表单验证，效果很好！`members``localhost`

PHP的代码：

```
<?php
$user="root";
$password="";
$database="members";
$con = mysql_connect('localhost',$user,$password);
if (!$con)
{
    die('Could not connect: ' . mysql_error());
}
mysql_select_db($database, $con) or die( "Unable to select database");
if(isset($_POST['sign_up']) && !empty($_POST['sign_up']))
{
    $sql = "INSERT INTO members_t('Name', 'Email', 'Password', 'Phone', 'Address', 'Sex', 'More') VALUES('".$_POST['username']."','".$_POST['email']."','".$_POST['passid_1']."','".$_POST['zip']."','".$_POST['address']."','".$_POST['sex']."','".$_POST['desc']."');";
    $resultDI = mysql_query($sql, $con) or die(mysql_error());
    mysql_close($con);
    echo "Successfolly run database query!";
}
else 
{
    echo("Failed to update database!!!");
}
?> 
```

HTML 代码：

```
<html>
<body>
<h2 class="letter_spacing">Not a Member?<span><br>Sign Up Now:</br></span></h2>
<form id = "register" name="registration" method = "post" onSubmit="return formValidation();">
<ul>
<li><label for="username">* Full Name:</label></li>
<li><input type="text" name="username" size="50" /></li>
<li><label for="email">* Email:</label></li>
<li><input type="text" name="email" size="50" /></li>
<li><label for="passid_1">* Desired Password:</label></li>
<li><input type="password" name="passid_1" size="12" /></li>
<li><label for="passid_2">* Re-Enter Password:</label></li>
<li><input type="password" name="passid_2" size="12" /></li>
<li><label for="zip">* Contact Number:</label></li>
<li><input type="text" name="zip" /></li>
<li><label for="address">* Address:</label></li>
<li><input type="text" name="address" size="50" /></li>
<li><label id="gender">* Sex:</label></li>
<li><input type="radio" name="msex" value="Male" /><span>Male</span></li>
<li><input type="radio" name="fsex" value="Female" /><span>Female</span></li>
<li><label for="desc">Anything More:</label></li>
<li><textarea name="desc" id="desc" cols="40" rows="4"></textarea></li>
<li><label for="note" ><h6>Note: All feilds marked with * are necessary</h6></label></li>
<li><input class="button1" type="submit"  name="sign_up" value="Sign Up!" /></li>
</ul>
</form>
</body>
</html> 
```

我试图将代码保存在一个名为 insert.php 的单独文件中，并将操作字段添加到 HTML 表单标记中，但没有用。

我永远无法将数据插入数据库。似乎 PHP 代码从未进入

```
if(isset($_POST['sign_up']) && !empty($_POST['sign_up'])) 
```

堵塞。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:17:43.837

尝试这个：

```
<form id="register" action="" method="post" name="registration" onSubmit="return formValidation();">
    <input type="text" name="username" size="50" />
    <input type="text" name="email" size="50" />
    <input type="password" name="passid_1" size="12" />
    <input type="password" name="passid_2" size="12" />
    <input type="text" name="zip" />
    <input type="text" name="address" size="50" />
    <input type="radio" name="sex" value="Male" /><span>Male</span>
    <input type="radio" name="sex" value="Female" /><span>Female</span>
    <textarea name="desc" id="desc" cols="40" rows="4"></textarea>
    <input class="button1" type="submit"  name="sign_up" value="Sign Up!" />
</form>

<?php
if (isset($_POST['sign_up']) && !empty($_POST['sign_up'])) {
    // escape all submitted data before inserting into database
    foreach ($_POST as $key => $value) {
        $_POST[$key] = mysql_real_escape_string(strip_tags($value));
    }

    $result = mysql_query("
        INSERT INTO members_t (Name, Email, Password, Phone, Address, Sex, More)
        VALUES ('{$_POST['username']}', '{$_POST['email']}', '{$_POST['passid_1']}', '{$_POST['zip']}', '{$_POST['address']}', '{$_POST['sex']}', '{$_POST['desc']}')
    ") or die(mysql_error());

    if (mysql_affected_rows() == 1) {
        echo "Successfully run database query!";
    } else {
        echo("Failed to update database!!!");
    }
}
?> 
```

请注意，`radio`按钮的名称应与您的代码中的“sex”而不是“msex”和“fsex”相同。我已经`action`在标签中添加了属性`form`以及您可以轻松注意到的其他一些修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T16:29:24.493

首先，我对代码进行了一些清理，使其看起来既漂亮又流畅。然后我删除了你制作的 !empty 部分，当你已经使用 isset 时，看不到你想要验证它实际上是空的原因。HTML：

```
<?php
$hostname = "";
$user = "root";
$password = "";
$database = "members";

$desc = $_POST['desc'];

$con = mysql_connect($hostname, $user, $password);
if (!$con)
{
    die('Could not connect: ' . mysql_error());
}
mysql_select_db($database, $con) or die( "Unable to select database");
if(isset($_POST['sign_up']))
{
    if(isset($_POST['username'])){
        $username = $_POST['username'];
    }
    else {
        echo "The username is not set"; die;
    }
    if(isset($_POST['email'])){
        $email = $_POST['email'];
    }
    else {
        echo "The email is not set"; die;
    }
    if(isset($_POST['zip'])){
        $zip = $_POST['zip'];
    }
    else {
        echo "The zip code is not set"; die;
    }
    if(isset($_POST['address'])){
        $address = $_POST['address'];
    }
    else {
        echo "The gender is not set"; die;
    }
    if(isset($_POST['sex'])){
        $sex = $_POST['sex'];
    }
    else {
        echo "The gender is not set"; die;
    }
    if(isset($_POST['passid_1'])){
        $passid = $_POST['passid_1'];
    }
    else {
        echo "The password is not set"; die;
    }
    if(isset($_POST['passid_2'])){
        $passid2 = $_POST['passid_2'];
    }
    else {
        echo "The re-entered password is not set"; die;
    }

    if($passwid == $passid2){
        $correctpid = $passwid;
    }
    else {
        echo "The passwords do not match"; die;
    }
    $sql = "INSERT INTO members_t('Name', 'Email', 'Password', 'Phone', 'Address', 'Sex', 'More') VALUES('$username', '$email','$correctpid', '$zip', '$address', '$sex', '$desc');";
    mysql_query($sql) or die(mysql_error());
    mysql_close($con);
    echo "Successfolly run database query!";
}
else 
{
    echo("Failed to update database!!!");
}
?> 
```

我已经编写了 php 代码来检查所有字段是否都填充了数据。如果不是，该站点就会死掉并给他们一个错误消息。它会在将任何内容设置到数据库之前杀死网站。

——我在评论后对代码做了一些修改，谢谢顺便说一句。

# macos - 将新的（更改的）文件复制到存储库中

> ID：13789034
> 
> 赞同：0
> 
> 时间：2012-12-09T15:58:02.913
> 
> 标签：macos, svn

我有一个在颠覆版本控制下管理的 magento 项目。

我想安装一个我下载的模块，它修改了一些已经在 svn 下的核心文件。

当我将新文件复制到现有托管文件上时，存储库变得“受阻”：

> svn：缺少包含工作副本管理区域的目录'/foo/app/.svn'

管理从仓库外部引入代码的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:18:34.277

只需确保在将新文件复制到工作副本时不要删除任何 .svn 目录（当然，除非您想删除包含此 .svn 目录的存储库）。一个简单的方法是保持所有目录不变，只删除和更新文件。

或者，使用 SVN 1.7，它在项目的根目录中使用单个 .svn 目录，而不是在项目的每个目录中使用 .svn 目录。

# jquery - 如何通过for循环通过每5个元素将相同的ID分配给多个元素

> ID：13789041
> 
> 赞同：-5
> 
> 时间：2012-12-09T15:58:48.403
> 
> 标签：jquery

我正在尝试通过 for 循环将 id name 属性分配给元素，我实际上可以做到这一点没有问题，但我想完成在每个元素中放置相同的 ID 编号......比如说 5 个元素。例子：

```
<div id="1"></div>
<div id="1"></div>
<div id="2"></div>
<div id="2"></div>
<div id="3"></div>
<div id="3"></div>  
<div id="4"></div> 
```

我已经尝试过 jquery slice() 函数、多个过滤器选择器，但我就是想不通。请指出正确的方向。每一个答案都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:22:23.857

这是一个绝对可怕的想法，它可以通过 jQuery 来实现。

```
$('div').each(function (i) {
    if (i % 5 == 0) $(this).attr('id','New Id');
}); 
```

但是，我假设您这样做是为了设置元素的样式，这是新手搞砸的一个地方，他们不理解 ID 是 UNIQUE 元素，说实话，它们的唯一真正目的是允许您唯一地选择它们。要在同一页面上类似地设置样式，您需要使用类，而不是 ID。在这种情况下，选择每 5 个元素并将其更改为相同的 CLASS 是完全有效的，并且是正常的事情。

```
$('div').each(function (i) {
    if (i % 5 == 0) $(this).addClass('newClass');
}); 
```

# c# - C# - 尽管使用了一个没有无参数构造函数的类，但 Web 服务仍然可以工作

> ID：13789044
> 
> 赞同：1
> 
> 时间：2012-12-09T15:59:03.393
> 
> 标签：c#, asp.net, web-services, serialization

我正在做一个汽车拍卖网站作为一个大学项目。该站点使用 Web 服务来完成所有操作，为了让我的生活更轻松，我创建了这个类来存储有关汽车的信息：

```
public class Car
{
    private int id;
    private string name;
    private string desc;
    private int startbid;
    private DateTime closingdate;
    public int Id
    {
        get
        {
            return id;
        }
    }
    public string Name
    {
        get
        {
            return name;
        }
    }
    public string Description
    {
        get
        {
            return desc;
        }
    }
    public int StartBid
    {
        get
        {
            return startbid;
        }
    }
    public DateTime ClosingDate
    {
        get
        {
            return closingdate;
        }
    }
    public Car(int id, string name, string desc, int startbid, DateTime closingdate)
    {
        this.id = id;
        this.name = name;
        this.desc = desc;
        this.startbid = startbid;
        this.closingdate = closingdate;
    }

} 
```

每当我尝试在浏览器中查看 .asmx 时，我都会收到一条错误消息，指出此类无法序列化，因为它没有无参数构造函数，但使用`Car`该类的所有内容在网站中仍然可以正常工作（例如显示有关汽车的信息，无一例外地显示一切）。因此，Web 服务仍在工作，并且不知何故`Car`该类仍在序列化。这怎么可能？

编辑：我知道要让我的 .asmx 正确显示，我需要添加`public Car() {}`到我的类中，但是我还需要`set`为每个属性添加方法，我真的不想这样做，因为这些结果是从数据库中获取的因此（在这种情况下）是只读的。那么在这种情况下，正确的解决方案是什么？也许是一个`Obsolete`属性或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:43:28.120

可以绕过类的构造函数来分配一个类的实例：

```
var car = (Car)FormatterServices.GetUninitializedObject(typeof(Car)); 
```

但是，正如[MSDN](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatterservices.getuninitializedobject.aspx)所说：

> 当前方法仅应在用户打算立即填充所有字段时用于反序列化。

所以我想这可能会在你的 Web 服务工作的幕后进行。

# excel - 如何使用vba在excel中编码旋钮控制

> ID：13789048
> 
> 赞同：1
> 
> 时间：2012-12-09T15:59:31.117
> 
> 标签：excel, vba, activex

我在控件库中找到了这个 Activex 控件（Knob Control 2.0），但我不知道如何使用这个控件，因为我无法将它的值链接到任何单元格。我能否获得一些帮助以将其值链接到任何单元格。

感谢您的帮助。

# objective-c - NSDate 类型属性的核心数据设置值

> ID：13789051
> 
> 赞同：0
> 
> 时间：2012-12-09T16:00:00.020
> 
> 标签：objective-c, core-data, nsdate

Helo，我还是 Core Data 的新手，突然陷入了这些简单的代码中：

```
Purchased* newItem=[NSEntityDescription insertNewObjectForEntityForName:@"Purchased" inManagedObjectContext:self.managedObjectContext];
[newItem setPurchasedDate:[NSDate date]];
[newItem setLastOpen:[NSDate date]];
if ([self.managedObjectContext save:&error])
{
   //do something if the save success
} 
```

好吧，从上面的代码中我得到了一个 'NSInvalidArgumentException'，原因：'-[Purchased setPurchasedDate:]: unrecognized selector sent to instance. 正如我们所看到的，异常指向

```
[newItem setPurchasedDate:[NSDate date]]; 
```

这是正确的。当我尝试逐步调试此代码时，程序会在调用此消息时中止。

我想知道为什么，因为我的模型和我的购买类没有错，我已经检查了一百次。我试图通过覆盖 -(void)awakeFromInsert() 方法来更改设置值的位置，它会触发相同的异常。有人有建议吗？之前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:38:55.287

检查这个：

您的托管对象模型的`Purchased`实体有一个类型`Date`为的属性`purchasedDate`，另一个名为`lastOpen`。

在您的`Purchased.h`文件中，您有

```
@property (nonatomic, strong) NSDate *purchasedDate;
@property (nonatomic, strong) NSDate *lastOpen; 
```

在您的`Purchased.m`文件中，您有

```
@dynamic purchasedDate;
@dynamic lastOpen; 
```

确保您`#import "Purchased.h"`在创建新实例的文件中。

# vb.net - 如何在 VB.NET 中继承类

> ID：13789053
> 
> 赞同：6
> 
> 时间：2012-12-09T16:00:04.190
> 
> 标签：vb.net

我对 VB 很陌生，我想继承`DataGridView`，我使用类似的东西

```
Public Class DataGridViewEx Inherits DataGridView
End Class 
```

但是编译器会在`End of statement expected`指向`Inherits DataGridView`. 出了什么问题，我应该怎么做？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-09T16:02:25.213

把它放在下一行：

```
Public Class DataGridViewEx 
    Inherits DataGridView
End Class 
```

[MSDN：**继承**](http://msdn.microsoft.com/en-us/library/vstudio/1yk8s7sk.aspx)

> 如果使用，Inherits 语句必须是类或接口定义中的第一个非空白、非注释行。它应该紧跟在 Class 或 Interface 语句之后。

# c++ - 在循环中设置交点

> ID：13789056
> 
> 赞同：0
> 
> 时间：2012-12-09T16:00:29.723
> 
> 标签：c++, stl, for-loop, set, intersection

我的功能`search_intersection`收到一套`<set<string> >& inter_section`。

我想得到所有子集的交集`inter_section`。

例如，如果：

```
inter_section = { { lion, cat } , {lion, bird}, {lion, cat, bird} } 
```

我想：

```
result = { lion } 
```

此刻我这样做了

```
 set<string> search_intersection(set <set<string> >& inter_section)
  {

  set <set<string> >::iterator iter_ss;

  set <string>  result;

  for (iter_ss = inter_section.begin(); iter_ss != inter_section.end(); ++iter_ss)
        {
         set_intersection(iter_ss.begin(),iter_ss.end(),
         result.begin(),result.end(),
          std::inserter(result.begin(),result.end()));
   }

    cout <<  endl;

    return result;
   } 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:04:25.310

让我们再试一次：（未编译的代码）

```
set<string> search_intersection(const set <set<string> > &inter_section) {
   set <string>  result;
   set <set<string> >::iterator iter = inter_section.begin ();
   if ( iter != inter_section.end ()) {
      result = *iter;
      for ( ++iter; iter != inter_section.end (); ++iter ) {
         set <string>  temp;
      // intersect *iter and result, put into temp
         set_intersection(
            iter->begin(),  iter->end (),
            result.begin(), result.end(),
            std::inserter(temp,temp.end()));
         result = temp;
         }
   }

   return result;
} 
```

请注意，对 set_intersection 的调用传递了迭代器指向的集合的开始/结束。此外，至少有两个地方`const`应该应用于此代码。

您也不能将 的结果`set_intersection`写入其中一个输入。因此是一个临时变量。

# visual-c++ - 如何在 VC++ 2003 中复制宽字符串

> ID：13789060
> 
> 赞同：0
> 
> 时间：2012-12-09T16:01:28.507
> 
> 标签：visual-c++, wchar-t

您好，请您帮助我们将一个 wchar_t* 复制到另一个 wchar_t*。

我正在使用以下代码：

```
wchar_t* str1=L"sreeni";
wchar_t* str2; 

wcscpy(str2,str1); 
```

在最后一行我得到一个运行时错误，因为没有为 *str2 分配内存，我试图复制 str1 的值；

有没有像 wcscpy 这样的方法将 wchar_t 指针复制到另一个 wchar_t 指针？

我不想使用宽字符数组，即不应该对字符串的大小有任何限制。我想将完整字符串str1的内容复制到字符串str2中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:03:43.510

我假设您的意思是要复制字符串，而不仅仅是指针。

wcsdup() 是 strdup() 的广泛等价物，它将为重复的字符串分配内存。

# java - 使用 Java 从 URL 获取声音

> ID：13789063
> 
> 赞同：1
> 
> 时间：2012-12-09T16:01:56.117
> 
> 标签：java, url, audio, mp3, javasound

我正在学习英语，我想开发一个软件来帮助我发音。

有一个叫 HowJSay 的网站，如果你在这里输入：http: [//www.howjsay.com/index.php](http://www.howjsay.com/index.php?word=car) ?word= car 你会立即听到 car 这个词的发音。我想用 JAVA 开发一个无需进入网站就可以播放这种声音的软件 =]

我试过这个，但不起作用=/

```
public static void main(String[] args) throws Exception {
    URL url = new URL("http://www.howjsay.com/index.php?word=car");
    url.openConnection();
    AudioStream as = new AudioStream(url.openStream());
    AudioPlayer.player.start(as);
    AudioPlayer.player.stop(as);
} 
```

有任何想法吗？请。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T16:58:35.773

干得好

```
import javax.sound.sampled.*;
import java.io.IOException;
import java.net.URL;

public class HowJSay
{
public static void main(String[] args) {
    AudioInputStream din = null;
    try {
        AudioInputStream in = AudioSystem.getAudioInputStream(new URL("http://www.howjsay.com/mp3/"+ args[0] +".mp3"));
        AudioFormat baseFormat = in.getFormat();
        AudioFormat decodedFormat = new AudioFormat(
                AudioFormat.Encoding.PCM_SIGNED,
                baseFormat.getSampleRate(), 16, baseFormat.getChannels(),
                baseFormat.getChannels() * 2, baseFormat.getSampleRate(),
                false);
        din = AudioSystem.getAudioInputStream(decodedFormat, in);
        DataLine.Info info = new DataLine.Info(SourceDataLine.class, decodedFormat);
        SourceDataLine line = (SourceDataLine) AudioSystem.getLine(info);
        if(line != null) {
            line.open(decodedFormat);
            byte[] data = new byte[4096];
            // Start
            line.start();

            int nBytesRead;
            while ((nBytesRead = din.read(data, 0, data.length)) != -1) {
                line.write(data, 0, nBytesRead);
            }
            // Stop
            line.drain();
            line.stop();
            line.close();
            din.close();
        }

    }
    catch(Exception e) {
        e.printStackTrace();
    }
    finally {
        if(din != null) {
            try { din.close(); } catch(IOException e) { }
        }
    }
}

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T01:53:09.250

[Java Sound](https://stackoverflow.com/tags/javasound/info)可以轻松播放短片，但开箱即用支持有限数量的格式。它默认支持的格式由[`AudioSystem.getAudioFileTypes()`](http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/AudioSystem.html#getAudioFileTypes%28%29)& 给出，该列表不包括 MP3。

对 MP3 缺乏支持的解决方案是在应用程序的运行时类路径中添加一个解码器。由于 Java Sound 在服务提供者接口上工作，它只需要在类路径上就可以使用。MP3 解码器可以在 中找到[`mp3plugin.jar`](https://drive.google.com/file/d/0B5B9wDXIGw9lRmpSbEUtenljd1k/view?usp=sharing&resourcekey=0-miuzcGB8fsXn2EQh3sVolA)。

至于播放 MP3 的代码，信息上的短源。只要剪辑很短，页面就足够了。即。

```
import java.net.URL;
import javax.swing.*;
import javax.sound.sampled.*;

public class LoopSound {

    public static void main(String[] args) throws Exception {
        URL url = new URL(
            "http://pscode.org/media/leftright.wav");
        Clip clip = AudioSystem.getClip();
        // getAudioInputStream() also accepts a File or InputStream
        AudioInputStream ais = AudioSystem.
            getAudioInputStream( url );
        clip.open(ais);
        clip.loop(Clip.LOOP_CONTINUOUSLY);
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                // A GUI element to prevent the Clip's daemon Thread
                // from terminating at the end of the main()
                JOptionPane.showMessageDialog(null, "Close to exit!");
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T16:31:01.250

如果您不太关心该网站，那么您可以尝试使用 Google Translate API

```
try{
        String word="car";
        word=java.net.URLEncoder.encode(word, "UTF-8");
        URL url = new URL("http://translate.google.com/translate_tts?ie=UTF-8&tl=ja&q="+word);
        HttpURLConnection urlConn = (HttpURLConnection) url.openConnection();
        urlConn.addRequestProperty("User-Agent", "Mozilla/4.76");
        InputStream audioSrc = urlConn.getInputStream();
        DataInputStream read = new DataInputStream(audioSrc);
        AudioStream as = new AudioStream(read);
        AudioPlayer.player.start(as);
        AudioPlayer.player.stop(as);
} 
```

在此处的帮助下： [Java：从 Google 翻译下载文本到语音](https://stackoverflow.com/questions/13339421/java-download-text-to-speech-from-google-translate)

如果每个`word`站点都保证有带链接的 mp3 文件，`howjsay.com/mp3/word.mp3`那么您只需将 URL 更改为

`URL url = new URL("howjsay.com/mp3/" + word + ".mp3");`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-09T19:59:09.630

如果您对 Marek 提供的代码有疑问，请确保您符合以下标准：

1.  使用支持的音频格式，例如 16 位 .wav
2.  确保您使用的 URL 实际上是在自动播放音频。

仅仅参考音频文件的下载页面是不够的。它必须流式传输音频。YouTube URL 不起作用，因为它们是视频。Audacity 是将音频文件转换为兼容的 16 位 .wav 文件的好方法，如果您有自己的域/网站，则可以从那里提供文件的直接链接。

# c# - 组合框索引更改后更新标签

> ID：13789064
> 
> 赞同：0
> 
> 时间：2012-12-09T16:02:12.580
> 
> 标签：c#, winforms

在我的应用程序中，当我更改组合框中的适配器时，我得到了所有的网络适配器（如果我的机器有多个......） combo-box_SelectedIndexChanged 函数调用我的函数并接收了适配器，我的问题是之后组合框索引更改了我的功能并没有更新我的标签。

在这一行：`IEnumerable<NetworkAdapter> add = adapter.getAdapterInfo();`我收到了我的适配器的集合，每个适配器都有自己的属性（名称、ID、速度、IP...）

```
private void comboBoxAdaptersWindow_SelectedIndexChanged(object sender, EventArgs e)
{
    ComboBox combobox = sender as ComboBox;
    NetworkAdapter selectedNic = combobox.SelectedItem as NetworkAdapter;
    UpdateForm(selectedNic);
}

private void UpdateForm(NetworkAdapter adapter)
{
    IEnumerable<NetworkAdapter> add = adapter.getAdapterInfo();
    List<NetworkAdapter> adaptersList = add.ToList();

    for (int i = 0; i < adaptersList.Count; i++) //update my labels
    {
        lblName2.Text = adaptersList[i]._name;
        lblId2.Text = adaptersList[i]._id;
        lblInterfaceType2.Text = adaptersList[i]._networkInterfaceType;
        lblIPv4Address2.Text = adaptersList[i]._ipAddress;
        lblDefaultGateway2.Text = adaptersList[i]._gatewayIpAddress;
        lblMacAddress2.Text = adaptersList[i]._macAddress;
        lblSpeed2.Text = adaptersList[i]._speed;
    }
} 
```

# visual-studio-2010 - 我的计算成员不工作

> ID：13789066
> 
> 赞同：0
> 
> 时间：2012-12-09T16:02:17.970
> 
> 标签：visual-studio-2010, datasource, ssas, mdx, olap-cube

我试图创建一个计算成员来显示每个产品的利润，但“选择”出现错误。任何人都可以帮我解决这个问题，因为我是这方面的新手吗？

```
CALCULATE;  
CREATE MEMBER CURRENTCUBE.[Measures].Profit_Per_Produkt
 AS Select [Measures].[Vinst] on columns,
[Dim Produkt].[Artikelnr].[Artikelnr] on rows
from [Elektronikkedja], 
FORMAT_STRING = "Percent", 
VISIBLE = 1 ,  ASSOCIATED_MEASURE_GROUP = 'Fact Köp' ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:42:13.503

一个计算成员应该包含一个计算表达式：

```
([Measures].[Internet Sales-Sales Amount] - 
[Measures].[Internet Sales-Total Product Cost]) /
[Measures].[Internet Sales-Sales Amount] 
```

请参阅[technet Defining Calculated docs](http://technet.microsoft.com/en-us/library/ms166568.aspx)上的一些示例。

# ruby-on-rails - 用于联合 ID 的 Rails API

> ID：13789074
> 
> 赞同：0
> 
> 时间：2012-12-09T16:02:51.230
> 
> 标签：ruby-on-rails, authentication, single-sign-on, federated

我正在寻找用于联合 id 服务或云 sso 的 Rails API。我一直在玩这个想法。关于 CAS 和omniauth，但对于企业级应用程序来说，如果它可以在小型企业可能使用的所有应用程序中统一身份验证会更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:10:17.840

There's many different options for a Federated ID using Rails. Gatekeeper is a very good one that I've heard about and most people I know talk about.

Another one that is very young compared to other is oPro which basically simulates OAuth 2 on your Rails App you can find it here [oPro](https://github.com/opro/opro).

In my opinion and experience working with federated IDs in enterprise projects I'd suggest looking into implementing it yourself which is just a matter of following the documentation of whichever one you choose.

# php - 带有复选框的简单 php mysql 搜索引擎

> ID：13789075
> 
> 赞同：0
> 
> 时间：2012-12-09T16:02:52.290
> 
> 标签：php, mysql, sql, checkbox

我想为我的网页做一个搜索引擎。我的 mysql 数据库中有几个表，我希望它们在用户时合并

```
Table users
id  name        age country     vip profile_image
1   nick        23  sweden      1   yes
2   michael     20  germany     0   no
3   laura       19  usa         1   yes
4   gary        33  china       1   yes

Table online
id  user_id     online
1   1             1
2   2             1 
3   4             1 
```

user_id 连接到 users 表中的 id

```
Now i have checkboxes
[ ] Those which are online
[ ] Those which are vip
[ ] Those with profile image 
```

我用 PHP 对我的页面进行编码，并且我试图弄清楚如果选中某个复选框，如何在 sql 查询中包含某些搜索。我可以在这里有很多选择。例如，如果没有选中复选框，如果你想搜索那些在线的，我如何进入第二个表？

我希望你能明白我的意思。我真的希望有人可以帮助我，并给我一个 php & sql 查询的工作示例。

干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:16:12.813

首先，您必须检查哪些复选框已被选中。然后你必须根据这些信息用 PHP 编写 MySQL 查询。您必须在每个复选框中考虑它需要检查哪些信息。如果您的数据库编写得很好，那么很少会出现两个选项相互影响的问题。如果信息在用户表中，您只需将行写入 where 子句。如果您需要将表连接到用户表以获取信息，您也需要这样做。这是一个例子

```
$query = "";
$query .= "SELECT users.* FROM users";
if ($include_online == 1) {
  $query .= " LEFT JOIN online ON online.user_id = users.id";
}
$query .= " WHERE";
if ($include_vip == 1) {
 $query .= " users.vip = 1 AND";
}
if ($include_image == 1) {
  $query .= " users.profile_image = 'yes' AND";
}
if ($include_online == 1) {
  $query .= " online.online = 1 AND";
}
$query .= " users.name LIKE '%".$search_string."%'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T16:15:42.377

您需要形成如下查询：

```
SELECT users.name, users.age, users.country
FROM users
LEFT JOIN online ON user.id = online.user_id
WHERE ((user.vip = 1) && (online.online = 1)) 
```

# objective-c - 在没有 XCode 的情况下为 Iphone 开发

> ID：13789076
> 
> 赞同：0
> 
> 时间：2012-12-09T16:03:01.873
> 
> 标签：objective-c, iphone, xcode, cocoa

> **可能重复：**
> [如何使用 Windows 开发机器为 iPhone 开发？](https://stackoverflow.com/questions/22358/how-can-i-develop-for-iphone-using-a-windows-development-machine)
> [在 Windows 上进行 iOS 开发](https://stackoverflow.com/questions/9595507/ios-development-on-windows)

我开始和朋友一起学习objective-c和cocoa但是有一个问题。我有一个 mac，我可以在 XCode 上编写代码和东西，但我的朋友不能，因为他没有 mac。有没有办法在 Windows 支持的 IDE 上下载 iphone sdk 并使用 Objective C 和 Cocoa？所以他可以编写、测试并将他的代码发送给我，这样我就可以在 XCode 上试用它。

感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T18:37:13.180

您不会找到支持使用 Objective-C 和 Cocoa Touch 进​​行 iOS 开发的 Windows IDE。您最好的选择是使用 VM（虚拟机）运行 Lion。但是，据我所知，这是非法的。是的，由于 Lion 已经对 EULA（最终用户许可协议）进行了一些更改，但这些更改仅允许在主机已经运行 Lion 的情况下在 VM 上运行 Lion。没错：如果您已经在使用它，您可以使用虚拟机运行 Lion。不是很有帮助。有些人会抛出旧的“谁来抓你？” 东西，但这不是完全合理的法律建议。

你的朋友有几个（合法的）选择。他们可以购买能够运行 Lion 和最新版本 Xcode 的最便宜的设备。或者，或者同时，如果你只是做一些基本的事情，你可以让他们将他们的代码写到任何支持 Objective-C 语法高亮的文本编辑器中，比如[NotePad++](http://www.notepad-plus-plus.org/)。然后，他们可以将文件发送给您，您可以将它们添加到 Xcode 中的项目中。当然，这意味着您可能必须进行大部分重要的调试和所有的编译等工作，这对于更容易出错的初学者来说可能更难。你真的无能为力。您可以查看 GNUStep，但它更接近 Cocoa 而不是 Cocoa Touch（您说的是 Cocoa，但既然您想制作 iPhone 应用程序，您显然是指 Cocoa Touch，这是不同的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:36:30.353

这可能是一个糟糕的答案，但您和您的朋友可以使用 TeamViewer 共享您拥有的单个 mac/或 mac mini。当您不工作时，允许他通过 teamviewer 访问您的 mac。

# javascript - 总结输入值

> ID：13789078
> 
> 赞同：0
> 
> 时间：2012-12-09T16:03:25.543
> 
> 标签：javascript, jquery

我正在尝试使用 jquery 遍历所有 '.invoice-lines' 并通过汇总 '.amount-input' div 中的所有值来生成总数。

AJAX 在 '.amount-input' 中动态生成默认值，用户可以手动更改。我一直在尝试创建一个函数，以便每次使用 AJAX 传入新数据时，都会调用函数 updateTotal()，它遍历所有非空的“金额输入”值并重新计算总数。我一直很难做到这一点，我将非常感谢任何帮助。

JQuery - 这是我到目前为止的 jquery（伪代码）

```
function updateTotal(){
   var total=0;
    for(i=0; i < $('.invoice-line').length; i++){
         if($('.amount-input').eq(i).val() != empty)){
              total += $('.amount-input').eq(i).val();
          }
    }
    $('.total').val("$" + total);
} 
```

标记

```
<?
    for(i=0; i < 25; i++){
    echo'   <div class="invoice-line">
                <div class="prod-id-cell"><input type="text" class="prod-id-input"></div>

                <div class="amount-cell"><input class="amount-input" type="text" /></div>
            </div>';
    }
?>
    <div class="total">$0.00</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:25:51.883

确保缓存 jQuery 选择，否则您将执行 50 次 DOM 遍历而不是 1 次：

```
var total=0, amounts = $('.amount-input'), len = amounts.length;
for(var i=0; i < len; i++){
     total += +amounts[i].value;
} 
```

使用一元加号运算符将单元格值从字符串转换为数字。 `+""`会给你零，所以你不需要检查单元格是否为空，尽管你可能想`isNaN`在验证输入时检查。

`input`此外，对元素使用 val ，但`text`对`div`s 或`span`s 使用。

```
$('.total').text("$" + total); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T16:24:50.470

纯 JS 中的基本语法如下：

```
var inputs = document.getElementsByClassName("amount-input");
var total = 0;
inputs.forEach(function (input) {
    total += value;
}); 
```

这个想法是您获得所有您感兴趣的输入的集合，然后使用外部变量对这些值求和。如果您想扩展它以包含其他输入，那么您可以使用`document.querySelectorAll("")`CSS 查询选择器来获取集合。（这与 jQuery $("") 选择语法相同。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T16:25:58.613

像这样的东西应该工作：

```
function updateTotal() {
    var total = 0;
    $('.invoice-line').each(function (i, elem) {
        total += parseFloat($(elem).find('.amount-input').val(), 10) || 0;
    });
    $('.total').val("$" + total);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T16:26:04.290

每次单独更新输入元素时，您都可以使用**更改**事件来更新总量。下面是一个简单的例子：

HTML：

```
<input class="invoice" type="text" value="0" />
<input class="invoice" type="text" value="0" />
<input class="invoice" type="text" value="0" />
<div id="total">0</div> 
```

Javascript：

```
$('.invoice').change(function() {
    var total = 0;
    $('.invoice').each(function() {
        total += parseFloat($(this).val());
    });
    $('#total').text(total);
}); 
```

你可以看到它在[这个 jsfiddle](http://jsfiddle.net/2Nb4e/1/)中工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-09T16:30:08.297

发布后不久，我能够提出自己的解决方案，如下所示：

```
function updateTotal(){
    var total=0;
    for(i=0; i < $('.invoice-line').size(); i++){
        currentAmount = Number($('.amount-input').eq(i).val().replace(/[^0-9\.]+/g,""));
        total += currentAmount;
    }
    $('.total-number').text("$" + total.toFixed(2));
} 
```

# php - PHP没有将文件上传到服务器

> ID：13789081
> 
> 赞同：0
> 
> 时间：2012-12-09T16:03:43.997
> 
> 标签：php, html

我正在使用 PHP 为我的私人 android 应用程序进行某种更新管理。计划是我有一个 HTML 表单，我可以在其中选择 apk 文件和应用程序版本。当我将应用程序上传到我的服务器时，它将被放置在 apk 文件夹中并重命名。问题是我无法将文件上传到服务器。它一直显示“有错误”。Apk 文件夹拥有 777 权限。

HTML 表单：

```
<form action="android_u.php" method="post" enctype="multipart/form-data">
        <table cellspacing="0" border="0" width="680" style="margin-top:25px;">
            <tr>
                <td><b>APK file:</b></td>
                <td><input type="file" name="apk" placeholder="APK file..." /></td>
            </tr>
            <tr>
                <td><b>Version:</b></td>
                <td><input type="text" name="version" placeholder="Version..." /> (Example: 1.1)</td>
            </tr>
        </table>
        <input type="image" id="upload" style="margin-left: 580px;" src="templates/images/spacer.png" />
    </form> 
```

PHP代码：

```
$version = $_REQUEST['version'];

$ver = str_replace(".", "-", $version);

$target_path = "/apk/ind-" . $ver . ".apk"; 
$file = "ind-" . $ver . ".apk";

if(move_uploaded_file($_FILES['apk']['tmp_name'], $target_path)) {
$msg = "<div class='msg2'>File uploaded</div>";

$day = date("j");
$month = date("n");
$year = date("Y");
$hour = date("G");
$minute = date("i");

$query = "INSERT INTO android (version, user_id, prenosi, file, year, month, day, hour, minute) VALUES ('$verzija', '$id', '0', '$file', '$year', '$month', '$day', '$hour', '$minute')";
mysql_query($query);

} else {
    $msg = "<div class='msg2'>Error</div>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:21:10.103

问题已解决，谢谢帮助。

我将 php.ini 中的 upload_max_filesize 从 50MB 更改为 50M，它可以工作。

# sql - 从两个表中插入 SELECT SQL

> ID：13789083
> 
> 赞同：0
> 
> 时间：2012-12-09T16:04:04.223
> 
> 标签：sql, ms-access

我有两张表，一张带有订单 ID 的 tbl_OrderLine 和一张带有学生 ID 的 tbl_Student。

我想从 tbl_OrderLine 中选择 OrderLineID 并从 tbl_Student 中选择 StudentID

这是我到目前为止所尝试的：

```
INSERT INTO tbl_StudentPurchaseFromUnibooks 
  (OrderLineID, StudentID )
SELECT tbl_OrderLine.OrderLineID, 
SELECT tbl_Student.StudentID 
 WHERE tbl_Student.LoggedIn ="Yes"; 
```

tbl_OrderLine：

```
OrderLineID     Price       Qty
1                 5          2 
```

tbl_学生：

```
StudentID     Name    LoggedIn
1             Joe      Yes 
```

tbl_StudentPurchaseFromUnibooks：

```
StudentPurchaseID    OrderLineID    StudentID    PurchaseDate
1                     1               1            09/12/2012 
```

另外，有没有人知道在 Microsoft Access 中模仿登录的简单方法。由于这只是 Microsoft Access 项目的虚拟数据库，因此安全性不是问题，但我只是想知道一种登录用户的方式。目前，如果他们已登录，我将其 LoggedIn 值更新为“是”，但显然这效率不高。如果没有人能够帮助解决这个问题，我稍后会作为一个单独的问题发布:) 谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T16:09:37.820

您希望将您的选择定义为一个连接，而不是两个单独的 SQL。我不太确定 MS 是如何工作的，但这样的事情应该可以解决问题：

```
INSERT INTO tbl_StudentPurchaseFromUnibooks (OrderLineID,   StudentID )
SELECT tbl_OrderLineID.OrderLineID, tbl_Student.StudentID
from tbl_OrderLineId
left join tbl_Student on ???
WHERE tbl_Student.LoggedIn ="Yes"; 
```

我不确定您的表是否应该真正命名`tbl_OrderLineID`，并且您需要知道您的连接条件。

# c - 堆栈溢出，除非 printf 在递归下

> ID：13789087
> 
> 赞同：1
> 
> 时间：2012-12-09T16:04:24.873
> 
> 标签：c, recursion, printf, stack-overflow

下面这段代码是查找3x3矩阵行列式的代码（这段代码是为nxn矩阵设计的，但对于示例，我使用了3x3），使用递归结果工作正常，但我想知道这段代码中的错误是什么必须是调用子函数（本身）之前的 printf("\n") ，否则它将返回错误 0xc0000fd（堆栈溢出）。

```
#include "stdio.h"
#include "stdlib.h"
#include "conio.h"
#define size 3

void trimarray(int**rrayrc,int**rrayout, int dim,int cuti,int cutj)
{
    int i, j;
    int ti = 0,tj;

    for(i = 0; i<dim; i++)
    {
        tj = 0;
        for(j = 0; j< dim; j++)
        {
            if(!((i==cuti)||(j==cutj)))
            {
                    rrayout[ti][tj] = rrayrc[i][j];
            }
            if(j!=cutj) {tj++;}
        }
        if(i!=cuti) {ti++;}
    }

}
void initializearray(int** rray,int dim)
{
    int i, j;
    for(i = 0; i<dim; i++)
    {
        for(j = 0; j<dim; j++)
        {
            rray[i][j] = 0;
        }
    }
}
int det(int** rray, int dim)
{
    int i,j;
    int cut[dim-1][dim-1];
    int* cutp[i];
    int mul = 1,sum=0;
    if(dim >1)
    {
        for(i = 0; i<dim-1; i++)
        {
            cutp[i] = cut[i];
        }
        initializearray(cutp,dim-1);
        for(i = 0; i<dim; i++)
        {
            printf("\n",dim); //<< Without this the program won't work
            trimarray(rray,cutp,dim,0,i);
            sum+=det(cutp,dim-1)*mul*rray[0][i];
            mul = 0-mul;
        }
        return sum;

    }
    else
    {
        return rray[0][0];
    }
}
int main()
{
    int test[size][size] = {2,-3,-2,-6,3,3,-2,-3,-2};
    int* testpntr[size];
    int i,deter;
    for(i = 0; i<size; i++)
    {
        testpntr[i] = test[i];
    }
    deter = det(testpntr,size);
    printf("[%d]",deter);
    getch();

    return 0;
} 
```

答案将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T16:10:23.320

`int* cutp[i];`是未定义的行为，因为`i`在此阶段未初始化。你不知道`cutp`数组的大小是多少。

# clojure - 带有 BOM 的 UTF-8 文件中第一行的长度

> ID：13789092
> 
> 赞同：5
> 
> 时间：2012-12-09T16:05:15.307
> 
> 标签：clojure

下午好。假设我有一个带有单个字母的 utf-8 文件，比如“f”（没有 \n 和空格），并且我尝试获取一系列行长。

```
(with-open [rdr (reader "test.txt")] 
  (doall (map #(.length %) (line-seq rdr)))) 
```

我得到

```
=> (2) 
```

为什么？有没有什么优雅的方法来获得第一个字符串的正确长度？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T16:45:47.790

Java 中的 BOM 问题在[阅读 UTF-8-BOM 标记](https://stackoverflow.com/questions/4897876/reading-utf-8-bom-marker)中有介绍。似乎可以使用Apache 的 Commons 中的[BOMInputStream](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/input/BOMInputStream.html)将其抽象出来，或者必须手动将其删除，即

```
(defn debomify
  [^String line]
  (let [bom "\uFEFF"]
    (if (.startsWith line bom)
      (.substring line 1)
      line)))

(doall (map #(.length %) (.split (debomify (slurp "test.txt")) "\n"))) 
```

如果您想使用 懒惰地读取文件`line-seq`，例如因为它很大，您必须使用 . 处理第一行`debomify`。其余的可以正常读取。因此：

```
(defn debommed-line-seq
  [^java.io.BufferedReader rdr]
  (when-let [line (.readLine rdr)]
    (cons (debomify line) (lazy-seq (line-seq rdr))))) 
```

# node.js - 理解 node.js 回调结构

> ID：13789095
> 
> 赞同：3
> 
> 时间：2012-12-09T16:05:37.760
> 
> 标签：node.js, asynchronous, callback

我正在研究非常简单的 node.js 项目，以更好地理解它的回调功能。

假设我在这里有一个像这样的登录“系统”：

```
if( req.query["username"] == "john" && req.query["password"] == "smith" )   {
    req.session.gatekeeper = req.query["username"];
    res.end( "succesfully logged in" );
} else { res.end( "wrong username or password" ); } 
```

到目前为止，很容易。现在假设我不是简单地拥有“john:smith”，而是将它存储在 redis 上。使用 PHP 我会这样做：

```
if( $r->get("$usernameIn") == $passwordIn ) {
  $_SESSION['gatekeeper'] = $usernameIn;
  echo "succesfully logged in";
} 
```

但是现在，通过查看节点的 redis 文档（https://github.com/mranney/node_redis/），我看到 get 命令是这样的：

```
client.get("foo", function(err, reply) {
    console.log(reply);
}); 
```

理解如何“构造”我提供的最后一个代码对我来说真的很复杂。

有什么帮助吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T16:35:11.507

node.js 中几乎所有的东西都是异步的。所以，几乎每一个被调用的方法，你都必须指定一个回调方法来处理方法调用的结果。通常，回调函数有两个参数：error、result。因此，由您来检查错误然后处理结果。还有其他节点模块可以使用更简洁的代码（[节点承诺](https://github.com/kriszyp/node-promise)），但这超出了您的问题的范围。

作为免责声明，我以前没有使用过 redis，所以下面的代码示例基于您上面的代码示例和`redis`node.js 模块的快速概述。

```
var redis = require("redis"),
    client = redis.createClient();

client.on("connect", function () {
    client.get(userName, function(err,returnedPassword){

      if(password === returnedPassword) {
        req.session.gatekeeper = req.query["username"];
        res.end( "succesfully logged in" );
      } else {
        res.end( "wrong username or password" );
      }
   });
}); 
```

# video.js - Video.js 微调器不会在 IE 中消失

> ID：13789097
> 
> 赞同：3
> 
> 时间：2012-12-09T16:06:04.950
> 
> 标签：video.js

[此视频](http://goo.gl/s8qQO)设置为自动播放和循环播放。开始没问题。车轮旋转视频加载。但在第一次播放后，微调器再次出现。有什么解决办法吗？

也许这是相关的问题：

> 通过 Internet Explorer 打开时 videojs.com 上的测试视频。单击播放，然后跳到视频结尾附近。它没有设置为循环播放，但无论如何播放后它会以暂停模式返回开始，您实际上可以看到播放按钮后面的微调器。但是它不是动画的，在我的情况下它正在旋转。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-26T06:42:48.593

您可以添加：`data-setup='{"children": {"loadingSpinner": false}}'`到您的视频标签，它将删除微调器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T23:14:10.587

这似乎是VideoJS的一个相当普遍的[问题。](http://help.videojs.com/discussions/problems/1465-loading-spinner-is-shown-after-video-was-played)我注意到您已经`display: none;`在`.vjs-loading-spinner`元素上进行了设置，但它不起作用，所以我能够通过使用 jQuery从 dom中[删除元素来摆脱它。](http://api.jquery.com/remove/)

```
$('.vjs-loading-spinner').remove(); 
```

这应该可以解决问题，尽管我意识到这可能并不理想。

# php - symfony2 表单禁用

> ID：13789099
> 
> 赞同：13
> 
> 时间：2012-12-09T16:06:44.383
> 
> 标签：php, forms, symfony, twig, subforms

我使用相同的表单来“预览”一个对象，就像我“编辑/更新”同一个对象一样。在我`showAction()`的控制器中，我有以下代码：

```
$form = $this->createForm(new SalesEntityType($entity), $entity, array('read_only' => true) ); 
```

此代码适用于主要表单，但有许多子表单通过包含而成为其中的一部分。show.html.twig 中的一个示例是：

```
{% include 'TargetCommonBundle:Hours:hoursForm.html.twig' with { form: hours } %} 
```

不幸的是，父表单上的 read_only 设置似乎没有级联到包含的子表单。有没有办法处理这个？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-10T17:30:01.053

尝试：

> ```
> $form = $this->createForm(
>     new SalesEntityType($entity),
>     $entity,
>     [ 'disabled' => true ]
> ); 
> ```

参见：vendor/symfony/symfony/src/Symfony/Component/Form/CHANGELOG.md，第一行

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-02T15:00:18.897

```
// It is the way more fast to disabled a form
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder->setDisabled(true);
} 
```

# php - 打印作为数组的数组元素的键

> ID：13789100
> 
> 赞同：0
> 
> 时间：2012-12-09T16:06:47.150
> 
> 标签：php, arrays, multidimensional-array

我有这个数组：

```
 <?php
    $arr = array('submitted',
                 'region' => array('value 1','value2','value3'),
                 'sended',
                 'something' => array('value','value'));

  ?> 
```

问题是如何检查一个元素是否是一个数组并打印相应的键。

输出应该是：

```
region  something 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T16:09:34.953

```
foreach ($arr as $k=>$a) {
    if (is_array($a)) echo $k;
} 
```

# javascript - 选择 JQuery 和我的调用代码的 Javascript 问题

> ID：13789103
> 
> 赞同：1
> 
> 时间：2012-12-09T16:07:14.490
> 
> 标签：javascript, jquery, jquery-chosen

以下代码表现出非常奇怪的行为......

我有**两个 html 选择**：**一个用于区域，另一个用于部门**，请记住，对于一个选定的区域，我正在尝试加载相应的部门。

第一个 html 选择（区域）**在正常页面加载时填充，**第二个 html 选择（部门）**由 ajax 调用从服务器检索 JSON**填充。

我使用选择的jquery。

我指的奇怪行为如下：

*   在第一次更改区域选择时（例如选择区域 A），**未填充部门选择**。
*   在区域选择的第二次更改（例如选择区域 B）时，**部门选择由区域 A 的部门填充！！！！**

Javascript：

```
$(document).ready(function() {
    $(".chzn-select").chosen({no_results_text: "No results matched"});
    var geolocationRegionSelect = $("#geolocationRegionSelect");
    var geolocationDepartmentSelect = $("#geolocationDepartmentSelect");
    geolocationRegionSelect.bind('change', function(event) {
        $.get("/kadjoukor/geolocations/findDepartmentsByRegion?regionId="+$(this).val(), function(result){
            geolocationDepartmentSelect.empty();
            $.each(result, function() {
                geolocationDepartmentSelect.append($("<option />").val(this.id).text(this.department));
            });
        }, 'json');
        $(".chzn-select").trigger("liszt:updated");
    });
}); 
```

下面是对应的html：

```
<div class="control-group">
        <label class="control-label" for="geolocationRegionSelect">geolocation region</label>
        <div class="controls">
            <select id="geolocationRegionSelect">
                <option th:value="''" th:text="'Non renseigne'"></option>
                <option th:each="geolocationRegion: ${geolocationRegions}" th:value="${geolocationRegion.id}" th:text="${geolocationRegion.region}"></option>
            </select>
        </div>
        <div class="controls">
            <select id="geolocationDepartmentSelect" th:field="*{geolocationDepartments}" data-placeholder="Choose a department" multiple="multiple" class="chzn-select">
            </select>
        </div>
    </div> 
```

有人可以请教吗？

**编辑**：生成的 HTML：

```
<label class="control-label" for="geolocationRegionSelect">geolocation region</label>
        <div class="controls">
            <select id="geolocationRegionSelect">
                <option value="">Non renseigne</option>
                <option value="1">Alsace</option><option value="2">Aquitaine</option><option value="3">Auvergne</option><option value="4">Basse-Normandie</option><option value="5">Bourgogne</option><option value="6">Bretagne</option><option value="7">Centre</option><option value="8">Champagne-Ardenne</option><option value="9">Corse</option><option value="10">DOM-TOM</option><option value="11">Franche-Comté</option><option value="12">Haute-Normandie</option><option value="13">Ile-de-France</option><option value="14">Languedoc-Roussillon</option><option value="15">Limousin</option><option value="16">Lorraine</option><option value="17">Midi-Pyrénées</option><option value="18">Nord-Pas-de-Calais</option><option value="19">Pays de la Loire</option><option value="20">Picardie</option><option value="21">Poitou-Charentes</option><option value="22">Provence-Alpes-Côte d&#39;Azur</option><option value="23">Rhône-Alpes</option>
            </select>
        </div>
        <div class="controls">
            <select id="geolocationDepartmentSelect" data-placeholder="Choose a department" multiple="multiple" class="chzn-select">
            </select>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T18:48:58.897

您应该在元素更新**后**触发更新，在处理程序内部......

```
$(document).ready(function() {
    $(".chzn-select").chosen({no_results_text: "No results matched"});
    var geolocationRegionSelect = $("#geolocationRegionSelect");
    var geolocationDepartmentSelect = $("#geolocationDepartmentSelect");
    geolocationRegionSelect.bind('change', function(event) {
        $.get("/kadjoukor/geolocations/findDepartmentsByRegion?regionId="+$(this).val(), function(result){
            geolocationDepartmentSelect.empty();
            $.each(result, function() {
                geolocationDepartmentSelect.append($("<option />").val(this.id).text(this.department));
             geolocationDepartmentSelect.trigger("liszt:updated");  // <--TO HERE
            });
        }, 'json');
        //<-FROM HERE
    });
}); 
```

[http://jsfiddle.net/oceog/rQJeX/](http://jsfiddle.net/oceog/rQJeX/)

你不会得到预期的结果，因为这里的 $.get() 是异步的，得到类比：

*   你让你的妻子去邮局问他们应该为你父亲的年度杂志订阅付多少钱，你告诉她——“当你回来的时候在那张桌子上留下一张纸条，把旧纸条从这里拿走”（已经在桌子上注释为 100 美元，订阅为 50 美元）。
*   她离开后，你让你妈妈检查桌子上的一张纸条，然后把它交给你爸爸让他付钱……
*   你的问题等于那个 - “为什么我父亲付了 100 美元”？
*   答案是一样的——你必须让你的妻子告诉你的母亲把纸条带给你父亲，当你的妻子刷新桌子上的纸条时。

抱歉英语，如果需要，请随时编辑。

# javascript - 正则表达式不起作用

> ID：13789105
> 
> 赞同：0
> 
> 时间：2012-12-09T16:07:34.250
> 
> 标签：javascript, regex, expression

我在 Javascript 中使用以下正则表达式：

```
comment_body_content = comment_body_content.replace(
  /(<span id="sc_start_commenttext-.*<\/span>)((.|\s)*)(<span id="sc_end_commenttext-.*<\/span>)/,
  "$1$4"
); 
```

我想在我的 HTML 代码中找到这个标签`<span id="sc_start_commenttext-330"></span>`（数字总是不同的）和标签`<span id="sc_end_commenttext-330"></span>`. 然后这些标签之间的文本和 HTML 代码应该被删除并返回。

替换前的示例：

```
Some text and code
<span id="sc_start_commenttext-330"></span>Some text and code<span id="sc_end_commenttext-330"></span>
Some Text and code 
```

替换后的示例：

```
Some text and code
<span id="sc_start_commenttext-330"></span><span id="sc_end_commenttext-330"></span>
Some text and code 
```

有时我的正则表达式有效并且它正确地替换了文本，有时不是 - 有错误吗？谢谢你的帮助！

亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T16:14:51.550

您应该使用匹配开头和相应结尾的模式，例如：

```
/(<span id="sc_start_commenttext-(\d+)"><\/span>)[^]*?(<span id="sc_end_commenttext-\2"><\/span>)/ 
```

这里`\2`的结束标记是指匹配的字符串与开始标记`(\d+)`中的数字匹配。是*任何字符*的简单表达式。`330``[^]`

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T16:42:30.010

使用 DOM。

```
​var $spans = document.getElementsByTagName("span");
var str = "";

for(var i = 0, $span, $sibling; i < $spans.length; ++i) {
    $span = $spans[i];
    if(/^sc_start_commenttext/i.test($span.id)) {
        while($sibling = $span.nextSibling) {
            if(/^sc_end_commenttext/i.test($sibling.id)) {
                break;
            }
            str += $sibling.data;
            $span.parentNode.removeChild($sibling);
        }
    }
}

console.log("The enclosed string was: ", str); 
```

[在这里你有它。](http://jsfiddle.net/9uB8k/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T19:15:02.547

我同意使用 regexp 来解析 html 通常是一个坏主意，但它可以有效地用于

使用 RegExp 的非嵌套 html：

`var str = 'First text and code<span id="sc_start_commenttext-330"></span>Remove text<span id="sc_end_commenttext-330"></span>Last Text and code';`
`var re = /(.*<span id="sc_start_commenttext-\d+"><\/span>).*(<span id="sc_end_commenttext-\d+"><\/span>.*)/;`
`str.replace(re, "$1$2");`

结果：

`First text and code<span id="sc_start_commenttext-330"></span><span id="sc_end_commenttext-330"></span>Last Text and code`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T16:14:42.563

I would start to replace `.*` with `[0-9]+">` -- if I understand correctly your intention.*

# asp.net-mvc-3 - 为什么@Html.HiddenFor 为其他模型属性设置值而不是指定的值？

> ID：13789106
> 
> 赞同：2
> 
> 时间：2012-12-09T16:07:44.267
> 
> 标签：asp.net-mvc-3, razor

我正在开发一个 ASP.NET MVC3 项目，我在其中定义了以下模型：

```
public class Model{
    [Key]
    int Id { get; set; }
    int MappedId { get; set; }
} 
```

此模型从 Controller 传递到 Razor 视图，如下所示：

```
public class Controller:Controller{
    public ActionResult Edit(int id) {
        Model model = repository.Get(id);
        return View(model);
    }
} 
```

模型属性在视图中呈现：

```
@using(Html.BeginForm()) {
    @Html.HiddenFor(model => model.Id);
    @Html.HiddenFor(model => model.MappedId)
} 
```

奇怪的是，两个隐藏的输入都获得了相同的值，即使模型属性在传递给视图时具有不同的值。例如，如果 Model.Id 的值为 0 且 Model.MappedChannelId 的值为 7，则两个隐藏输入都设置为相同的值 7：

```
<input id="Id" class="valid" type="hidden" value="7" name="Id" data-val-required="The Id field is required." data-val-number="The field Id must be a number." data-val="true">
<input id="MappedId" class="valid" type="hidden" value="7" name="MappedId" data-val-required="The MappedId field is required." data-val-number="The field MappedId must be a number." data-val="true"> 
```

有没有人知道为什么 Html.HiddenFor(model=> model.Id) 将值设置为与 model.MappedId 相同的值，即使 model.Id 在传递给视图时具有不同的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T16:16:16.463

我的猜测是您从操作的 id 参数中获取 MappedId 值。然后用其他值设置 Id 属性。但是，在您看来，您仍然有来自 action 参数的 Id 值，并且默认模型绑定器使用该值来绑定 Id 属性。它基本上忽略了模型实例中的值。

您可以通过更改模型中 Id 属性的名称来解决它。如果您不想这样，您应该更改操作参数的名称。但是，如果您不想通过查询字符串传递其值，则需要为其创建自定义路由。

# java - 检查数组是否包含某些整数

> ID：13789109
> 
> 赞同：0
> 
> 时间：2012-12-09T16:07:55.330
> 
> 标签：java, arrays, integer

我正在制作一个长度为 10 个整数的数组，因此每个位置 0-9 包含一个不同的整数 0-9。

我无法弄清楚如何检查数组是否已经包含某个数字，如果是，则重新生成一个新数字。

到目前为止，我有：

```
for (int i = 0; i < perm.length; i++)
{
    int num = (int) (Math.random() * 9); 
    int []

    perm[i] = num;   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T16:12:28.180

```
Arrays.asList(perm).contains(num) 
```

from [How can I test if an array contains a certain value?](https://stackoverflow.com/questions/1128723/in-java-how-can-i-test-if-an-array-contains-a-certain-value)

```
for (int i = 0; i < perm.length; i++) 
```

this is not enough to loop like this, if collision happens some slots would have been not initalized.

**Overall**, for this task you better initialize array with values in order and then [shuffle](http://blog.ryanrampersad.com/2008/10/shuffle-an-array-in-java/) it by using random permutation indexes

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-20T19:15:16.370

这是一个完整的答案

```
int[] array = {3,9, 6, 5, 5, 5, 9, 10, 6, 9,9};

    SortedSet<Integer> s = new TreeSet();
    int numberToCheck=61;
    for (int i = 0; i < array.length; i++) {
        s.add(array[i]);
    }

    System.out.println("Number contains:"+!(s.add(numberToCheck)));

    System.out.println("Sorted list:");
    System.out.print(s); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-03T16:26:36.393

添加字符串和整数来检查是否存在。

```
public class existOrNotInArray {

public static void elementExistOrNot() {
    // To Check Character exist or not
    String array[] = { "AB", "CD", "EF" };

    ArrayList arrayList = new ArrayList<>();

    String stringToCheck = "AB";

    for (int i = 0; i < array.length; i++) {
        arrayList.add(array[i]);
    }

    System.out.println("Character exist : " + arrayList.contains(stringToCheck));

    // To Check number exit or not
    int arrayNum[] = { 1, 2, 3, 4 }; // integer array

    int numberToCheck = 5;

    for (int i = 0; i < arrayNum.length; i++) {
        arrayList.add(arrayNum[i]);
    }
    System.out.println("Number exist :" + arrayList.contains(numberToCheck));
}

public static void main(String[] args) {
    elementExistOrNot();
}
} 
```

# windows-phone-7 - 删除扩展视图中的垂直线 Windows Phone 7

> ID：13789110
> 
> 赞同：7
> 
> 时间：2012-12-09T16:07:57.013
> 
> 标签：windows-phone-7, silverlight-toolkit

我正在使用 windows phone 工具包和扩展视图。默认情况下，扩展器视图在左侧有一条垂直线，我可以删除该默认垂直线吗？谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T04:32:02.563

修改 Expanderview 样式，

```
 <Style TargetType="toolkit:ExpanderView">
        <Setter Property="HorizontalAlignment" Value="Stretch"/>
        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        <Setter Property="ItemsPanel">
            <Setter.Value>
                <ItemsPanelTemplate>
                    <StackPanel/>
                </ItemsPanelTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="toolkit:ExpanderView">
                    <Grid>
                        <Grid.Resources>
                            <QuadraticEase x:Key="QuadraticEaseOut" EasingMode="EaseOut"/>
                            <QuadraticEase x:Key="QuadraticEaseInOut" EasingMode="EaseInOut"/>
                        </Grid.Resources>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="41"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="ExpansionStates">
                                <VisualStateGroup.Transitions>
                                    <VisualTransition From="Collapsed" GeneratedDuration="0:0:0.15" To="Expanded">
                                        <Storyboard>
                                            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Height)" Storyboard.TargetName="ItemsCanvas">
                                                <EasingDoubleKeyFrame EasingFunction="{StaticResource QuadraticEaseOut}" KeyTime="0:0:0.00" Value="0"/>
                                                <EasingDoubleKeyFrame x:Name="CollapsedToExpandedKeyFrame" EasingFunction="{StaticResource QuadraticEaseOut}" KeyTime="0:0:0.15" Value="1"/>
                                            </DoubleAnimationUsingKeyFrames>
                                            <DoubleAnimation Duration="0" To="1.0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ItemsCanvas"/>
                                        </Storyboard>
                                    </VisualTransition>
                                    <VisualTransition From="Expanded" GeneratedDuration="0:0:0.15" To="Collapsed">
                                        <Storyboard>
                                            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Height)" Storyboard.TargetName="ItemsCanvas">
                                                <EasingDoubleKeyFrame x:Name="ExpandedToCollapsedKeyFrame" EasingFunction="{StaticResource QuadraticEaseInOut}" KeyTime="0:0:0.00" Value="1"/>
                                                <EasingDoubleKeyFrame EasingFunction="{StaticResource QuadraticEaseInOut}" KeyTime="0:0:0.15" Value="0"/>
                                            </DoubleAnimationUsingKeyFrames>
                                            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ItemsCanvas">
                                                <EasingDoubleKeyFrame EasingFunction="{StaticResource QuadraticEaseInOut}" KeyTime="0:0:0.00" Value="1.0"/>
                                                <EasingDoubleKeyFrame EasingFunction="{StaticResource QuadraticEaseInOut}" KeyTime="0:0:0.15" Value="0.0"/>
                                            </DoubleAnimationUsingKeyFrames>
                                            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)" Storyboard.TargetName="ItemsCanvas">
                                                <EasingDoubleKeyFrame EasingFunction="{StaticResource QuadraticEaseInOut}" KeyTime="0:0:0.00" Value="0.0"/>
                                                <EasingDoubleKeyFrame EasingFunction="{StaticResource QuadraticEaseInOut}" KeyTime="0:0:0.15" Value="-35"/>
                                            </DoubleAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualTransition>
                                </VisualStateGroup.Transitions>
                                <VisualState x:Name="Collapsed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(FrameworkElement.Height)" Storyboard.TargetName="ItemsCanvas"/>
                                        <DoubleAnimation Duration="0" To="0.0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ItemsCanvas"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Expanded">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" Storyboard.TargetProperty="(FrameworkElement.Height)" Storyboard.TargetName="ItemsCanvas"/>
                                        <DoubleAnimation Duration="0" To="1.0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ItemsCanvas"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="ExpandabilityStates">
                                <VisualState x:Name="Expandable"/>
                                <VisualState x:Name="NonExpandable">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="ExpandableContent">
                                            <DiscreteObjectKeyFrame KeyTime="0:0:0.0" Value="Collapsed"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="Line">
                                            <DiscreteObjectKeyFrame KeyTime="0:0:0.0" Value="Collapsed"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="NonExpandableContent">
                                            <DiscreteObjectKeyFrame KeyTime="0:0:0.0" Value="Visible"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <ListBoxItem x:Name="ExpandableContent" Grid.ColumnSpan="2" Grid.Column="0" toolkit:TiltEffect.IsTiltEnabled="True" Grid.Row="0" Grid.RowSpan="2">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="41"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <ContentControl x:Name="Header" Grid.ColumnSpan="2" ContentTemplate="{TemplateBinding HeaderTemplate}" Content="{TemplateBinding Header}" Grid.Column="0" HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch" Grid.Row="0"/>
                                <ContentControl x:Name="Expander" ContentTemplate="{TemplateBinding ExpanderTemplate}" Content="{TemplateBinding Expander}" Grid.Column="1" HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch" Margin="11,0,0,0" Grid.Row="1"/>
                                <Grid x:Name="ExpanderPanel" Background="Transparent" Grid.ColumnSpan="2" Grid.Column="0" Grid.Row="0" Grid.RowSpan="2"/>
                            </Grid>
                        </ListBoxItem>
                        <Line x:Name="Line" Grid.Column="1" HorizontalAlignment="Left" Grid.Row="1" Grid.RowSpan="2" Stretch="Fill" Stroke="White" StrokeThickness="3" X1="0" X2="0" Y1="0" Y2="1"/>
                        <ContentControl x:Name="NonExpandableContent" Grid.ColumnSpan="2" ContentTemplate="{TemplateBinding NonExpandableHeaderTemplate}" Content="{TemplateBinding NonExpandableHeader}" Grid.Column="0" HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch" Grid.Row="0" Grid.RowSpan="2" Visibility="Collapsed"/>
                        <Canvas x:Name="ItemsCanvas" Grid.Column="1" Margin="11,0,0,0" Opacity="0.0" Grid.Row="2">
                            <Canvas.RenderTransform>
                                <CompositeTransform TranslateY="0.0"/>
                            </Canvas.RenderTransform>
                            <ItemsPresenter x:Name="Presenter"/>
                        </Canvas>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

# c++ - 创建作为抽象类型对象传递的对象

> ID：13789112
> 
> 赞同：1
> 
> 时间：2012-12-09T16:08:04.677
> 
> 标签：c++, pointers, polymorphism, side-effects

为了使用多态性，我有一个由几个具有不同内存占用的具体类实现的抽象类。

```
#include <iostream>
using namespace std;

class abstractFoo {
public:
    virtual void method() = 0;
}; 
```

第一个具体类：

```
class concreteFoo1 : public abstractFoo {
private:
    int member1;
public:
    concreteFoo1() {
        cout << "Constructing Foo1" << endl;
        member1 = 1;
    }
    virtual void method() {
        cout << "Foo1 member: " << member1 << endl;
    }
}; 
```

另一个具体类：

```
class concreteFoo2 : public abstractFoo {
private:
    int member1;
    int member2;
public:
    concreteFoo2() {
        cout << "Constructing Foo2" << endl;
        member1 = 2;
        member2 = 3;
    }
    void method() {
        cout << "Foo2 members: " << member1 << ", " << member2 << endl;
    }
}; 
```

我想要做的是声明一个抽象类型的对象`abstractFoo`并将它作为参数传递给一个函数，该函数将它创建为一个具体类型`concreteFoo1`或`concreteFoo2`. 我首先使用通常的方式，在参数中传递一个指针：

```
enum typeFoo {FOO1, FOO2};

void createFoo(typeFoo type, abstractFoo *foo) {
    switch (type) {
    case FOO1:
        foo = &concreteFoo1();
        break;
    case FOO2:
        foo = &concreteFoo2();
        break;
    }
}

int main() {
    abstractFoo *foo = new concreteFoo1();
    createFoo(FOO2, foo);
    foo->method();        //Not expected result!
    return 0;
} 
```

输出是：

```
Constructing Foo1
Constructing Foo2
Foo1 member: 1 
```

问题是我不能初始化`foo`为抽象类型的对象，如果我初始化为`concreteFoo1`，就像我在这个例子中所做的那样，`foo`指针仍然指向它，即使在调用`createFoo`方法之后也是如此。

为了使其工作，我被告知将指针传递给参数中的指针：

```
enum typeFoo {FOO1, FOO2};

void createFoo(typeFoo type, abstractFoo **foo) {
    switch (type) {
    case FOO1:
        *foo = new concreteFoo1();
        break;
    case FOO2:
        *foo = new concreteFoo2();
        break;
    }
}
int main() {
    abstractFoo *foo = new concreteFoo1();
    createFoo(FOO2, & foo);
    foo->method();        //Expected result
    return 0;
} 
```

输出：

```
Constructing Foo1
Constructing Foo2
Foo2 members: 2, 3 
```

好吧，这个解决方案有效，但我对此不太满意：我仍然无法创建指向抽象类型的指针，所以我必须构造一个我不会使用 in 的对象`astractFoo* foo = new concreteFoo1()`，并且分配给它的内存永远不会释放，所以我想我会以内存泄漏结束。

有没有办法在`AbstractFoo**`不构造对象的情况下创建一个指向抽象类型指针的指针？

那么，你能确认双指针是我问题的正确解决方案吗？如果是，你能回答我的两个问题吗？如果没有，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:12:53.250

If you use a `std::unique_ptr<abstractFoo>`, as a return type and combine it with the factory pattern, you solve both the memory allocation issues and the creation issue.

Note that you'll need a `virtual` destructor in `abstractFoo`.

A double pointer is not the C++ thing to do. It's a remainder from C. Passing a pointer by reference would be more C++-ish. Not using pointers, but smart pointers instead if even more C++-ish.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:50:22.800

好吧，我刚刚发现您可以使用 operator 创建指针`new`，所以我回答我自己的问题：

```
enum typeFoo {FOO1, FOO2};
void createFoo(typeFoo type, abstractFoo **foo) {
    switch (type) {
    case FOO1:
        *foo = new concreteFoo1();
        break;
    case FOO2:
        *foo = new concreteFoo2();
        break;
    }
}
int main() {
    abstractFoo **foo = new abstractFoo*;
    createFoo(FOO2, foo);
    abstractFoo *foo2Ptr = *foo;
    foo2Ptr->method();        //Expected result
    delete foo2Ptr;
    createFoo(FOO1, foo);
    abstractFoo *foo1Ptr = *foo;
    foo1Ptr->method();        //Expected result
    delete foo1Ptr;

    return 0;
} 
```

输出：

```
Constructing Foo2
Foo2 members: 2, 3
Constructing Foo1
Foo1 member: 1 
```

任何评论，特别是如果我应该使用引用或智能指针？

# facebook - facebook 应用程序无法打开流

> ID：13789115
> 
> 赞同：1
> 
> 时间：2012-12-09T16:08:25.157
> 
> 标签：facebook

我制作了一个为某种原因注册用户的应用程序。该应用程序从他们的 FB 帐户中获取电子邮件、名称。

```
39: $token_url = "https://graph.facebook.com/oauth/access_token?client_id=".$app_id."&redirect_uri=".urlencode($my_url)."&client_secret=".$secret."&code=".$code;

40: $access_token = file_get_contents($token_url);

41: $graph_url = "https://graph.facebook.com/me?fields=id,name,email&".$access_token;

42:$user = json_decode(file_get_contents($graph_url)); 
```

第 40 行和第 42 行出现错误

```
[function.file-get-contents]: failed to open stream: HTTP request failed! HTTP/1.0 400 Bad Request in /home/*********/index.php on line 40
[function.file-get-contents]: failed to open stream: HTTP request failed! HTTP/1.0 400 Bad Request in /home/*********/index.php on line 42 
```

但仅在尝试评估用户提供的字段之后，而不是在第一次启动应用程序时。这段代码中是否有任何错误，或者我应该在脚本中的其他地方查看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T18:39:01.343

请查看此[文档](https://developers.facebook.com/docs/howtos/login/server-side-login/)以了解实现服务器端身份验证的正确方法，特别是第 6 步。

> 您的代码将接收和解析的响应正文如下所示：
> 
> `access_token=USER_ACCESS_TOKEN&expires=NUMBER_OF_SECONDS_UNTIL_TOKEN_EXPIRES`

您应该提取 access_token 以供使用。

每当您遇到身份验证问题时，第一步应该是`access_token`在[Open Graph Debugger](https://developers.facebook.com/tools/debug)中运行，以确保用户和应用程序通过正确的范围与其绑定。

# ember.js - ember-data - 何时、何地以及如何创建持久存储

> ID：13789118
> 
> 赞同：2
> 
> 时间：2012-12-09T16:08:32.270
> 
> 标签：ember.js, ember-data

使用 ember 数据，哪里是创建商店的最佳位置。

我应该在创建应用程序对象之前创建它吗？

我应该将它创建为应用程序对象的属性，例如

```
app = Ember.Application.create()
app.set('Store', App.Store.create()) 
```

我使用 Ember 已经有一段时间了，但这常常让我感到困惑。

推荐的方法是什么？

我遇到的主要问题是在测试方面。破坏商店是有问题的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T16:52:12.730

在应用程序初始化之前，在应用程序命名空间上创建一个 Store (capital s) 属性。Ember Data 注册了一个注入，该注入将自动实例化存储，并让路由器和控制器都可以访问它。例如。

```
App = Ember.Application.create();
App.Store = DS.Store.extend({
  adapter: DS.RESTAdapter.extend()
}); 
```

以后你可以做这样的事情。

```
router.get('store');
router.get('userController.store'); 
```

# java - 如何在猪文件中使用 .jar

> ID：13789121
> 
> 赞同：2
> 
> 时间：2012-12-09T16:08:42.660
> 
> 标签：java, hadoop, mapreduce, apache-pig, mapr

我有两个输入文件 smt.txt 和 smo.txt。jar 文件读取文本文件并根据 java 文件中描述的某些规则拆分数据。pig 文件通过执行 mapreduce 将这些数据放入输出文件中。

```
register 'maprfs:///user/username/fl.jar';
DEFINE FixedLoader fl();

mt = load 'maprfs:///user/username/smt.txt' using FixedLoader('-30','30-33',...........) AS (.........);

mo = load 'maprfs:///user/username/smo.txt*' using FixedLoader('-30','30-33',.....) AS (......);

store mt into 'maprfs:///user/username/mt_out' using JsonStorage();
store mo into 'maprfs:///user/username/mo_out' using JsonStorage(); 
```

和下面的一部分java代码。（我相信方法的内容不是必需的）：

```
package com.mapr.util;

import org.apache.hadoop.mapreduce.lib.input.*;
import org.apache.hadoop.mapreduce.*;
import org.apache.hadoop.io.*;
import org.apache.pig.*;
import org.apache.pig.data.*;
import org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.*;
import java.util.*;
import java.io.*;

public class FixedLoader extends LoadFunc
{

............

} 
```

当我使用命令“pig -x mapreduce sample.pig”在终端中运行这个猪程序时，我给出了一条错误消息：

> 错误 org.apache.pig.tools.grunt.Grunt - 错误 1070：无法使用导入解析 com.mapr.util.FixedLoader：[，org.apache.pig.builtin.，org.apache.pig.impl.builtin。 ]

如何将这些导入到我的项目中，或者是否有任何建议/解决方案来运行该程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T19:26:26.740

您需要`FixedLoader`使用其完整的包名称进行定义：

```
register 'maprfs:///user/username/fl.jar';
DEFINE FixedLoader com.mapr.util.FixedLoader();
... 
```

还要注册自定义 UDF 中使用的所有第 3 方依赖项 jar。

# unix - 使用 sed 在 linux 中过滤 html 标签

> ID：13789122
> 
> 赞同：2
> 
> 时间：2012-12-09T16:08:48.743
> 
> 标签：unix, sed, tags, sh, substitution

我在尝试在 unix 中过滤以下字符串时遇到问题

```
<option value="20121209/YvegRascYTGxmWLUIrqW/por121209130030.jpg">2012-12-09 13:00h</option> 
```

变成： `20121209/YvegRascYTGxmWLUIrqW/por121209130030.jpg`和`2012-12-09 13:00`。我可以找到我想要的子字符串的开头，但找不到结尾。

```
 file=tmpfile
 read -r firstline<$file
 firstArg=$(echo $firstline | sed 's/^.*value="//' | sed 's/">*$//')
 echo $firstArg
 secondArg=$(echo $firstline | sed 's/^.*">//' | sed 's/h<*$//')
 echo $secondArg 
```

输出如下：

```
20121209/YvegRascYTGxmWLUIrqW/por121209130030.jpg">2012-12-09 13:00h</option>
2012-12-09 13:00h</option> 
```

但我真正想要的是

```
20121209/YvegRascYTGxmWLUIrqW/por121209130030.jpg
2012-12-09 13:00 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T16:14:14.437

次要修复，您`.`在两个地方丢失（在每行`*`的第二个之前`sed`）：

```
 file=tmpfile
 read -r firstline<$file
 firstArg=$(echo $firstline | sed 's/^.*value="//' | sed 's/">.*$//')
 echo $firstArg
 secondArg=$(echo $firstline | sed 's/^.*">//' | sed 's/h<.*$//')
 echo $secondArg 
```

**输入：**

```
<option value="20121209/YvegRascYTGxmWLUIrqW/por121209130030.jpg">2012-12-09 13:00h</option> 
```

**输出：**

```
20121209/YvegRascYTGxmWLUIrqW/por121209130030.jpg
2012-12-09 13:00 
```

**解释：**

*   `*`匹配前面的字符 0 次或更多次，因此您之前匹配了零个或多个`>`' 和`<`'。
*   匹配`.`任何字符
*   所以`>.*`匹配 . 之后的零个或多个字符`>`。

**改进：**

此外，这两`sed`行可以更好地写成：

```
 firstArg=$(sed 's/^.*value="//;s/">.*$//' <<< "$firstline")
 secondArg=$(sed 's/^.*">//;s/h<.*$//' <<< "$firstline") 
```

*   `;`在一个 sed 调用中分隔多个替换模式
*   `<<<`表示法称为[herestring](http://linux.die.net/abs-guide/x15683.html)，您可以在此处使用它来保存回声和管道
*   总是用双引号包裹变量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T16:13:58.493

尝试这样做：

```
sed -r 's@.*([0-9]{8}/[^"]+).*>([0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}[[:alnum:]]*)<.*@\1\n\2@g' 
```

**例子**

```
$ cat file.txt
<option value="20121209/YvegRascYTGxmWLUIrqW/por121209130030.jpg">2012-12-09 13:00h</option>
$ sed -r 's@.*([0-9]{8}/[^"]+).*>([0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}[[:alnum:]]*)<.*@\1\n\2@g' file.txt
20121209/YvegRascYTGxmWLUIrqW/por121209130030.jpg
2012-12-09 13:00h 
```

# java - 使用 ListActivity 和 ArrayAdapter 找不到 NullPointerException

> ID：13789123
> 
> 赞同：1
> 
> 时间：2012-12-09T16:09:08.460
> 
> 标签：java, android, actionbarsherlock, android-arrayadapter, listactivity

嗨，stackoverflow，现在我遇到了另一个问题，我正在处理来自自定义 ArrayAdapter 的 ListActivity，因此我可以完全自定义我的 Listview 以包括 TextViews、开关、复选框......我得到了一个 NullPointerException，但我不知道它的来源！这是我当前的代码：

```
public class MenuActivity extends SherlockListActivity {
    ListView scroll;
    int time;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        try {
            scroll = this.getListView();

            this.setListAdapter(new MyAdapter(this.getApplicationContext()));
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            finish();
        }

    }

    public View find(int x){

        return findViewById(x);

    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub

        super.onListItemClick(l, v, position, id);

        switch (position){
        case (0):{
            Toast.makeText(getApplicationContext(), "Hello you just chose \"Splash\"", Toast.LENGTH_SHORT).show();
        }break;
        case (1):{
            Toast.makeText(getApplicationContext(), "Its another one here !", Toast.LENGTH_SHORT).show();
        }break;
        case (2):{
            Toast.makeText(getApplicationContext(), String.valueOf(id) +" and "+ position, Toast.LENGTH_SHORT).show();

        }break;
        }

    }

    public void showToast(String toast){
        Toast.makeText(getApplicationContext(), toast, Toast.LENGTH_SHORT).show();
    }

}

class MyAdapter extends ArrayAdapter<String>{

    LayoutInflater inf = LayoutInflater.from(this.getContext());

    public MyAdapter(Context context) {
        super(context , 0 ,stringArray);
        inf.from(context);
        // TODO Auto-generated constructor stub
    }

    public static String[] stringArray= new String[]{"Splash"   , "Another Example" , "Future Checkable"};

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        if (convertView == null){
            inf.inflate(R.layout.normal_row, parent , false);
        }
        switch(position){
        case(0):
            convertView = (LinearLayout) inf.inflate(R.layout.row_switch, parent,false);

            break;
        }

        return convertView;
    }

} 
```

我的 StackTrace ：

```
12-09 17:52:55.631: E/AndroidRuntime(11921): FATAL EXCEPTION: main
12-09 17:52:55.631: E/AndroidRuntime(11921): java.lang.NullPointerException
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.widget.AbsListView.obtainView(AbsListView.java:2161)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.widget.ListView.makeAndAddView(ListView.java:1831)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.widget.ListView.fillDown(ListView.java:674)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.widget.ListView.fillFromTop(ListView.java:735)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.widget.ListView.layoutChildren(ListView.java:1652)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.widget.AbsListView.onLayout(AbsListView.java:1994)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.view.View.layout(View.java:14003)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.view.ViewGroup.layout(ViewGroup.java:4375)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.view.View.layout(View.java:14003)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.view.ViewGroup.layout(ViewGroup.java:4375)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1663)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1521)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1434)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.view.View.layout(View.java:14003)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.view.ViewGroup.layout(ViewGroup.java:4375)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.view.View.layout(View.java:14003)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.view.ViewGroup.layout(ViewGroup.java:4375)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.view.ViewRootImpl.performLayout(ViewRootImpl.java:1892)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1711)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.view.Choreographer.doCallbacks(Choreographer.java:562)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.view.Choreographer.doFrame(Choreographer.java:532)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.os.Handler.handleCallback(Handler.java:725)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.os.Looper.loop(Looper.java:137)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at android.app.ActivityThread.main(ActivityThread.java:5039)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at java.lang.reflect.Method.invokeNative(Native Method)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at java.lang.reflect.Method.invoke(Method.java:511)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-09 17:52:55.631: E/AndroidRuntime(11921):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T16:13:54.200

改变这个：

```
if (convertView == null){
     inf.inflate(R.layout.normal_row, parent , false);
} 
```

到：

```
if (convertView == null){
     convertView = inf.inflate(R.layout.normal_row, parent , false);
} 
```

此外，关于在 中有两种类型的行，`ListView`您应该考虑实现适配器的`getViewTypeCount()`和`getItemViewType()`方法（因为您当前的代码不能很好地工作）。

# objective-c - IF 语句忽略最后一个条件

> ID：13789129
> 
> 赞同：0
> 
> 时间：2012-12-09T16:09:47.950
> 
> 标签：objective-c, ios, if-statement

所以我有一堆输入文本字段来计算一些东西。这些是双打。我希望每次未全部填写时，它都会显示“请输入所有值” 下面提到的代码对所有字段执行此操作，除了最后一个字段，这里是氮气。如果我将它们更改为最后一个变量，这是行不通的。相反，它只是让应用程序在输入最后一个字段时给出结果。

例如，没有字段有值，但是当我在氮气中输入一些东西时，它会给我结果。如果我在任何其他字段（氮气空白）中输入其他内容，我会收到正确的消息“请输入所有值”。

我如何使它占所有字段，而不仅仅是除最后一个字段之外的所有字段？

```
if (temprature,methane,ethane,propane,nbutane,ibutane,oxygen,npetane,ipetane,nhexane,nitrogen == 0)
{
    outputText.text = @"Please enter all values";
} else
{

    outputText.text = resultString;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:19:36.710

试试这个，如果任何字段为空，这应该可以工作。

```
if (temprature == 0 || methane == 0 || ethane == 0 || propane == 0 || nbutane == 0 || ibutane == 0 || oxygen == 0 || npetane == 0 || ipetane == 0 || nhexane == 0 || nitrogen == 0)
{
    outputText.text = @"Please enter all values";
} else
{
    outputText.text = resultString;
} 
```

# python - 在python中分割空格

> ID：13789131
> 
> 赞同：0
> 
> 时间：2012-12-09T16:10:02.817
> 
> 标签：python

我想在 tkinter 中输入一些数字：18 64 22 5 42 40 48 20 49 33 61 39 62 71。我希望它们看起来像 [18,64,22,5,42,40....]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T16:10:44.690

Use `text.split()` to make a list of strings. The [split method](http://docs.python.org/2/library/stdtypes.html#str.split) will by default split on whitespace. If you want a list of ints, you could use `map(int, text.split())`:

```
In [6]: text = '18 64 22 5 42 40 48 20 49 33 61 39 62 71'

In [7]: text.split()
Out[7]: ['18', '64', '22', '5', '42', '40', '48', '20', '49', '33', '61', '39', '62', '71']

In [8]: map(int, text.split())
Out[8]: [18, 64, 22, 5, 42, 40, 48, 20, 49, 33, 61, 39, 62, 71] 
```

* * *

And to show how it can be used with Tkinter:

```
import Tkinter as tk
class App(object):
    def read_entry(self, event):
        entry = event.widget
        text = entry.get()
        print(map(int, text.split()))
    def __init__(self):
        entry = tk.Entry()
        entry.bind('<Return>', self.read_entry)
        entry.pack()
        entry.focus()

root = tk.Tk()
app = App()
root.mainloop() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T16:25:15.530

你可以使用 `list comprehension`：

```
In [1]: strs="18 64 22 5 42 40 48 20 49 33 61 39 62 71"

In [2]: [int(x) for x in strs.split()]
Out[2]: [18, 64, 22, 5, 42, 40, 48, 20, 49, 33, 61, 39, 62, 71] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T16:11:15.457

Try:

```
map(int, string_numbers.split()) 
```

when `string_numbers` is your space-separated list of numbers.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T17:41:42.217

精确输出 [18,64,22,5,42,40....] 的函数

```
def format_nrs(nr_str, n=6):
    nrs = nr_str.split()
    s = ",".join(nrs[:n])
    if n >= len(nrs):
        return "[%s]" % s
    else:
        return "[%s...]" %s 
```

用法 ：

```
n_str = "18 64 22 5 42 40 48 20 49 33 61 39 62 71"

print format_nrs(n_str)
print format_nrs(n_str, 10)
print format_nrs(n_str, 14) 
```

输出：

```
[18,64,22,5,42,40...]
[18,64,22,5,42,40,48,20,49,33...]
[18,64,22,5,42,40,48,20,49,33,61,39,62,71] 
```

# java - 如何在 Java 中使用 String.format() 复制选项卡“\t”？

> ID：13789141
> 
> 赞同：20
> 
> 时间：2012-12-09T16:10:38.010
> 
> 标签：java, syntax, tabs, format

我正在逐行打印数据，并希望它像表格一样组织。

我最初使用`firstName + ", " + lastName + "\t" + phoneNumber`.

但是对于一些较大的名字，电话号码会被推错

我正在尝试使用 String.format() 来实现这种效果。谁能告诉我要使用的格式语法吗？

我试过`String.format("%s, %s, %20s", firstName, lastName, phoneNumber)`了，但这不是我想要的。我希望它看起来像这样：

约翰·史密斯 123456789

麦迪逊鲍勃 123456789

查尔斯·理查兹 123456789

编辑：这些答案似乎适用于 System.out.println()。但我需要它为 JTextArea 工作。我正在使用 textArea.setText()

解决了。JTextArea 默认不使用等宽字体。我使用 setFont() 来改变它，现在它就像一个魅力。谢谢大家的解决方案。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-09T16:12:46.940

考虑为您的长度说明符使用负数：`%-20s`. 例如：

```
 public static void main(String[] args) {
     String[] firstNames = {"Pete", "Jon", "Fred"};
     String[] lastNames = {"Klein", "Jones", "Flinstone"};
     String phoneNumber = "555-123-4567";

      for (int i = 0; i < firstNames.length; i++) {
        String foo = String.format("%-20s %s", lastNames[i] + ", " + 
             firstNames[i], phoneNumber);
        System.out.println(foo);
      }   
   } 
```

返回

```
Klein, Pete          555-123-4567
Jones, Jon           555-123-4567
Flinstone, Fred      555-123-4567 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-09T16:14:10.817

尝试将**宽度放入带有`-`右填充符号的**第二个占位符，如下所示：

```
 String.format("%s, %-20s %s", firstName, lastName, phoneNumber) 
```

这将为具有右填充的第二个参数（姓氏）提供指定的宽度，并且电话号码将仅在指定的宽度字符串之后开始。

**编辑：**演示：

```
String firstName = "John";
String lastName = "Smith";
String phoneNumber = "1234456677";
System.out.println(String.format("%s, %-20s %s",firstName, lastName, phoneNumber)); 
```

印刷：

> 约翰·史密斯 1234456677

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T16:14:59.833

唯一的选择是循环名称列表，计算字符串的最大长度，并根据需要在每个名称后添加空格，以确保所有数字都从同一列开始。

使用制表符的缺点是您无法知道`a priori`有多少个空格相当于一个制表符，因为它取决于编辑器。

# ruby-on-rails - seed.rb 文件的作用是什么？

> ID：13789143
> 
> 赞同：12
> 
> 时间：2012-12-09T16:10:59.380
> 
> 标签：ruby-on-rails, seed

我对 Ruby on Rails 很陌生。不知道这个`seed.rb`文件的作用是什么，为什么要用这个文件，为什么需要运行`rake db:seed`命令。任何人都可以举例说明吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-09T16:17:20.600

### 引导数据

种子数据的目的是引导您的数据库。例如，如果您有一个用于跟踪用户所在城市和州的 users 表，您可能希望在创建第一个用户之前使用美国州名和缩写为相关表播种。

同样，您可能还希望播种诸如管理帐户之类的内容，或首次运行您的应用程序所需的其他数据。作为一般规则，您不应该向 seed.rb 文件添加任何不需要引导您的数据库或其关系的内容。

### 相关的 Rake 任务

seed.rb 文件是存储种子数据的地方，但您需要运行适当的 rake 任务才能实际*使用*种子数据。在您的项目目录中使用`rake -T`会显示有关以下任务的信息：

*   **rake db:seed**
    从 db/seeds.rb 加载种子数据
*   **rake db:setup**
    创建数据库，加载模式，并使用种子数据进行初始化
*   **rake db:reset**
    同`rake db:setup`，但先删除数据库

因此，您可以`rake db:seed`随时手动运行seeds.rb 文件。但是，在大多数情况下，您可能希望在引导应用程序时运行`rake db:setup`或改为运行。`rake db:reset`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-13T12:30:37.607

seed.rb 文件的目的非常简单，它允许我们通过使用语法写入文件来接受（模型）数据库中的数据，并在 rake 任务之后填充它，因为我们使用控制器、模型通过表单输入这些数据. 例如：

```
Country.create(name: 'Germany', population: 81831000)
Country.create(name: 'France', population: 65447374)
Country.create(name: 'Belgium', population: 10839905)
Country.create(name: 'Netherlands', population: 16680000) 
```

之后： **rake db:seed** **rake db:setup**

# iphone - 后台操作

> ID：13789147
> 
> 赞同：0
> 
> 时间：2012-12-09T16:11:40.043
> 
> 标签：iphone, objective-c, ios, xcode

是否可以将您的应用程序置于后台，并有一个计数器，一旦过期，唤醒应用程序并让应用程序执行一些操作？我知道这是基本的，但我似乎无法让它工作。我把这个计数器+动作放在哪里？在app下确实进入后台了吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T16:28:11.573

我认为这通常不起作用：

您只能在后台运行特定任务：

Apple doc 告诉您哪些任务是：

其中一项任务是接收 GPS 信息。

只要您启用了 GPS 并且您的应用程序配置为使用 GPS 作为后台，您的应用程序就会在后台保持活动状态。如果您稍后禁用 GPS，它将暂停，并且在用户激活它之前不会唤醒。

所以要意识到你的问题，你必须在后台保持活跃（例如通过阅读 GPS）。`AppDelegate:applicationDidEnterBackground`您可以在或类似的情况下启动计时器

如果您需要更多时间来关闭，您可以明确请求更多时间，有一种方法可以做到这一点。我不知道如果您定期要求更多会发生什么

# c++ - How could I parallelize the following loop USING C++ AMP?

> ID：13789152
> 
> 赞同：2
> 
> 时间：2012-12-09T16:12:34.103
> 
> 标签：c++

I have the following loop in c++

```
dword result = 0;
for ( int i = 0; i < 16; i++ ) {
    result |= ( value[i] << (unsigned int)( i << 1 ) );
} 
```

And I would like to parallelize it in amp. I know it might go slower then the actual non-parallelized version above, but I want to do it to learn something more about AMP.

My idea was to loop trough the value array in parallel:

![enter image description here](../Images/f409f1c06c724ce0f5a057dead5d1e88.png)

And fill a new array with `newarray[0] = value[0] << (unsigned int)(0 << 1 )`, `newarray[1] = value[1] << (unsigned int)(1 << 1 )`, etc. Then I would OR the values in the array in parallel in a tree structure (see image).

I have tried to put this idea in some simple c++ amp code, but I don't succeed in it, so any help would be appreciated.

Thank you for your consideration of this matter, I look forward to a response.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T20:12:19.647

以下代码是我认为您需要的一部分。这段代码将一些元素作为输入，并在 CPU 上准备好向量，然后在 GPU 上并行执行位移操作。然后我将 av[elements] 设置回 0，因为我正在使用该元素来存储您的最终结果。这很粗糙，但是 AMP 对可以在 GPU 上处理的数据类型有很大的限制，所以我只使用现有数组的一个额外元素。移位完成后，我为每个按位或函数执行另一个并行操作。这也发生在 GPU 上，但不太令人满意，因为每个操作都将数组的任何给定元素与 av[elements] 元素进行 ORing，因此会产生瓶颈。您的树结构将使这部分运行得更快，但我无法弄清楚如何轻松完成这部分。事实上，这个程序可以在一台相当旧的计算机上在几秒钟内处理 1 亿个元素。对于代码中任何违反最佳实践的行为，请提前致歉；我也是新手。代码如下：

```
#include <conio.h>
#include <amp.h>
#include <iostream>

using namespace concurrency;
using namespace std;

unsigned int doParallel(unsigned int);

unsigned int elements;

void main()
{
    int ch=NULL;
    cout<<"\nHow many elements to populate: ";
    cin>>elements;
    cout<<"The result is: "<<doParallel(elements);
    cout<<"\nPress 'X' to exit.";
    do
    {
        ch=_getch();
    } while (ch!='X' && ch!='x');
    exit(0);
}

unsigned int doParallel(unsigned int elements)
{
    vector<unsigned int> v(elements+1);

    for (unsigned int i = 0; i<elements+1;i++)
        {
            v[i]=i;
        }
    array_view<unsigned int,1> av(elements+1,v);

    parallel_for_each(av.extent,[=](index<1> idx)
        restrict(amp)
        {
            av[idx] = static_cast<unsigned int>(av[idx])<<1;
        });
    av[elements]=0;
    parallel_for_each(av.extent,[=](index<1> idx)
    restrict(amp)
    {
        av[elements] |= static_cast<unsigned int>(av[idx]);
    });

    return av[elements];
} 
```

# ssl - cannot use any protocol besides SSLv23 in python2 ssl wrapper with self-signed certificate

> ID：13789153
> 
> 赞同：3
> 
> 时间：2012-12-09T16:12:39.083
> 
> 标签：ssl, openssl, python-2.x

I generated my self-signed certificate with open ssl

```
openssl req -new -x509 -days 365 -nodes -out cert.pem -keyout cert.pem 
```

I am using python2, and this is my server code:

```
import socket, ssl 

bindsocket = socket.socket()
bindsocket.bind(('localhost', 10023))
bindsocket.listen(5)

while True:
    newsocket, fromaddr = bindsocket.accept()
    connstream = ssl.wrap_socket(newsocket,
                                 server_side=True,
                                 certfile="cert.pem",
                                 ssl_version=ssl.PROTOCOL_SSLv23)
    try:
        data = connstream.read()
        print data
    finally:
        connstream.write('hi this is server')
        connstream.shutdown(socket.SHUT_RDWR)
        connstream.close() 
```

this code works well, my client can get 'hi this is server' successfully. however, when i changed the `ssl_version` from ssl.PROTOCOL_SSLv23 to ssl.PROTOCOL_TLSv1 or ssl.PROTOCOL_SSLv3, there will be an error:

```
ssl.SSLError: [Errno 1] _ssl.c:504: error:1408F10B:SSL routines:SSL3_GET_RECORD:wrong version number 
```

if i changed ssl_versiton to ssl.PROTOCOL_SSLv2:

```
ssl.SSLError: [Errno 1] _ssl.c:504: error:1406B0CB:SSL routines:GET_CLIENT_MASTER_KEY:peer error no cipher 
```

this is my client code, I hope this may help to generate the issue:

```
import socket, ssl 
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
ssl_sock = ssl.wrap_socket(s,
                           ca_certs="cert.pem",
                           cert_reqs=ssl.CERT_REQUIRED)
ssl_sock.connect(('localhost', 10023))
ssl_sock.write('hi this is client')
data = ssl_sock.read()
print data
ssl_sock.close() 
```

I can not understand what's wrong with these. how could I use protocols other than SSLv23?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-04T15:10:10.720

您是否曾经考虑过服务器端需要密钥文件而客户端不需要证书文件？

在这里稍微修改了您的代码，希望对您有所帮助。

```
#Server side:
import socket, ssl 

bindsocket = socket.socket()
bindsocket.bind(('localhost', 10023))
bindsocket.listen(5)

while True:
    newsocket, fromaddr = bindsocket.accept()
    connstream = ssl.wrap_socket(newsocket,
                                    keyfile='key.pem',
                                 server_side=True,
                                 certfile="cert.crt",
                                 ssl_version=ssl.PROTOCOL_SSLv23)
    try:
        data = connstream.read()
        print data
    finally:
        connstream.write('hi this is server')
        connstream.shutdown(socket.SHUT_RDWR)
        connstream.close()

#Client side:
import socket, ssl 
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
ssl_sock = ssl.wrap_socket(s,
                           ca_certs="cert.crt",
                           cert_reqs=ssl.CERT_REQUIRED
                           )
ssl_sock.connect(('localhost', 10023))
ssl_sock.write('hi this is client')
data = ssl_sock.read()
print data`enter code here`
ssl_sock.close() 
```

# vb6 - 字符串和字符串数组的区别和使用？

> ID：13789154
> 
> 赞同：0
> 
> 时间：2012-12-09T16:12:39.283
> 
> 标签：vb6

好的，就我所知，字符串基本上是一个字符数组。那么为什么VB中会有字符串数组呢？以及它们之间有什么区别？

只是基础知识，他们的运作方式是我感兴趣的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T18:17:07.040

有时将字符串视为字符数组非常有用。有时也将其视为一个字节数组也很有用——当然这根本不是一回事。

请参阅[每个软件开发人员绝对、肯定必须了解 Unicode 和字符集（没有任何借口！）](http://www.joelonsoftware.com/articles/Unicode.html)，以更好地了解字节与字符串 (UTF-16LE) 所包含的字符以及其他常用字符编码之间的差异。

但除此之外，String 实际上是一个更高级别的抽象，您不应该将其视为任何类型的数组。

毕竟，按照这种逻辑，Integer 或 Long 也是一个数组。

因此，考虑到 String 被视为原始标量值类型，String 数组的用途应该非常清楚。字符串数组的用途与任何其他数据类型的数组几乎相同。

事实上，您可以对以字符串为根的字符串执行操作（子字符串操作），这一事实在概念上与对任何其他简单类型内的数据进行操作的操作没有太大区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T16:45:41.753

假设您需要存储一个名称列表，它可能是 100 个名称或 200 个名称.. 这取决于具体情况.. 你会怎么做？

字符串数组可以解决这种情况

试试这个：

```
Dim Names() As String
ReDim Names(3) As String
Names(0) = "First"
Names(1) = "Second"
Names(2) = "Third"
Names(3) = "Fourth"
Dim l As Long
For l = LBound(Names) To UBound(Names)
    MsgBox Names(l)
Next 
```

# android - Spinner and cursor

> ID：13789159
> 
> 赞同：0
> 
> 时间：2012-12-09T16:13:03.140
> 
> 标签：android, cursor, nullpointerexception, spinner

Hi I've been looking how to populate a spinner from a cursor for a while and can't do it properly, this is my code:

```
private void fillSpinner(){

    DatabaseConnector dbConnector = new DatabaseConnector(this);
    Cursor c = dbConnector.getAllCasas();
    startManagingCursor(c);
    String[] from = new String[]{"nombrecasa"};
    int[] to = new int[]{android.R.id.text1};
    SimpleCursorAdapter adapter =
    new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, c, from, to );
    adapter.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );
    Spinner s = (Spinner) findViewById( R.id.casaspinner);
    s.setAdapter(adapter);
    } 
```

where DAtabaseConnector is the class where i got all the cursors and casaspinner is properly declarated in the XML file.

Call this method from the onCreate method but it crashes "Sorry, the application has stoppend unexpectedly" logcat shows "NullPointerException" tried some answers from here but it keeps crashing.

Here's logcat:

```
12-09 10:02:49.399: W/ResourceType(322): Attempt to retrieve bag 0x7f060003 which is invalid or in a cycle.
12-09 10:02:49.489: D/AndroidRuntime(322): Shutting down VM
12-09 10:02:49.489: W/dalvikvm(322): threadid=1: thread exiting with uncaught exception (group=0x40015560)
12-09 10:02:49.509: E/AndroidRuntime(322): FATAL EXCEPTION: main
12-09 10:02:49.509: E/AndroidRuntime(322): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.appvino/com.example.appvino.Actualizacion}:     java.lang.NullPointerException
12-09 10:02:49.509: E/AndroidRuntime(322):  at     android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
12-09 10:02:49.509: E/AndroidRuntime(322):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
12-09 10:02:49.509: E/AndroidRuntime(322):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-09 10:02:49.509: E/AndroidRuntime(322):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
12-09 10:02:49.509: E/AndroidRuntime(322):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-09 10:02:49.509: E/AndroidRuntime(322):  at android.os.Looper.loop(Looper.java:123)
12-09 10:02:49.509: E/AndroidRuntime(322):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-09 10:02:49.509: E/AndroidRuntime(322):  at java.lang.reflect.Method.invokeNative(Native Method)
12-09 10:02:49.509: E/AndroidRuntime(322):  at java.lang.reflect.Method.invoke(Method.java:507)
12-09 10:02:49.509: E/AndroidRuntime(322):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-09 10:02:49.509: E/AndroidRuntime(322):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-09 10:02:49.509: E/AndroidRuntime(322):  at dalvik.system.NativeStart.main(Native Method)
12-09 10:02:49.509: E/AndroidRuntime(322): Caused by: java.lang.NullPointerException
12-09 10:02:49.509: E/AndroidRuntime(322):  at com.example.appvino.DatabaseConnector.getAllCepas(DatabaseConnector.java:95)
12-09 10:02:49.509: E/AndroidRuntime(322):  at com.example.appvino.Actualizacion.llenaCepaSpinner(Actualizacion.java:129)
12-09 10:02:49.509: E/AndroidRuntime(322):  at com.example.appvino.Actualizacion.onCreate(Actualizacion.java:40)
12-09 10:02:49.509: E/AndroidRuntime(322):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-09 10:02:49.509: E/AndroidRuntime(322):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
12-09 10:02:49.509: E/AndroidRuntime(322):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T19:44:11.533

我错过了可写数据库。这是解决方案：

```
private void llenaCasaSpinner(){

        DatabaseConnector dbConnector = new DatabaseConnector(this);
        dbConnector.open();
        Cursor c = dbConnector.raw("SELECT _id, nombrecasa FROM casa");
        startManagingCursor(c);
        String[] from = new String[]{"nombrecasa"};
        int[] to = new int[]{android.R.id.text1};
        SimpleCursorAdapter adapter =
        new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, c, from, to );
        adapter.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );
        Spinner s = (Spinner) findViewById( R.id.casaspinner);
        s.setAdapter(adapter);
        dbConnector.close();
        } 
```

# utf-8 - 带有 lex (flex) 的 UTF-8

> ID：13789162
> 
> 赞同：1
> 
> 时间：2012-12-09T16:13:24.793
> 
> 标签：utf-8, lex

我有一个用以下定义指定的词法分析器：

```
ws      [ \t\n]+
punc            (\.|\,|\!|\?)
word        ({punc}|[a-zA-Z0-9])*
special         (\%|\_|\&|\$|\#) 
```

我有一些需要解析的 utf-8 文件，当涉及到这些字符时，它自然会爆炸。我知道过去曾多次问过类似的问题，但都没有任何帮助。我尝试使用[此](https://stackoverflow.com/a/9617585/1350116)答案中给出的方法，但失败了。我猜问题出在`word`上面的定义中？

如果有人可以详细说明将 UTF-8 编码与 flex 结合使用的一般概念，那将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:50:34.637

尝试（处理 -with flex -8）：

```
%%
ws      [ \t\n]+
punc            (\.|\,|\!|\?)
word        ({punc}|[a-zA-Z0-9\x80-\xf3])*
special         (\%|\_|\&|\$|\#)

%% 
```

（编码有点粗略......）OP提到的链接导致 [Kaz的答案](https://stackoverflow.com/a/9617585/905902)更加准确，wrt允许的序列。

# jquery - How to know if HTML5 input type color is available as a color picker?

> ID：13789163
> 
> 赞同：12
> 
> 时间：2012-12-09T16:13:27.177
> 
> 标签：jquery, css, forms, html, dom

I'd like to add a jquery color picker fallback if no color picker is shown. For example, chrome shows a color picker, but as of yet, safari simply shows a textfield. Is there any way (without user agents) to detect if a color picker is available?

Edit: Modernizr is no good, since it would just say that safari supports it too. Safari supports input type color because it doesn't allow anything but a #hex color to be entered in the input box. But there is no color picker. I need to know if there is a color picker instead.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-12T20:36:23.537

干得好。

```
/**
 * Determine if the current browser has support for HTML5 input type of color.
 * @author Matthew Toledo
 * @return {boolean} True if color input type supported. False if not.
 */
var test = function() {
  var colorInput;

  // NOTE:
  //
  // If the browser is capable of displaying a color picker, it will sanitize the color value first. So "!"" becomes #000000;
  //
  // Taken directly from modernizr:
  // @see http://modernizr.com/docs/#features-html5
  //
  // These types can enable native datepickers, colorpickers, URL validation, and so on.
  // If a browser doesn’t support a given type, it will be rendered as a text field. Modernizr
  // cannot detect that date inputs create a datepicker, the color input create a colorpicker,
  // and so on—it will detect that the input values are sanitized based on the spec. In the
  // case of WebKit, we have received confirmation that sanitization will not be added without
  // the UI widgets being in place.
  colorInput = $('<input type="color" value="!" />')[0];
  return colorInput.type === 'color' && colorInput.value !== '!';
};

$(function(){
  if (test()) {
    $('body').append('<p1>Your browser supports the color input</p>');
  } else {
    $('body').append('<p>Your browser Doesn\'t Support the color input</p>');
  }
})
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T16:31:57.493

要检查任何浏览器上对 HTML3 或 CSS3 的任何功能的支持，您可以使用*modernizr*。

颜色选择器的代码将是：

```
if(!Modernizr.inputtypes.color){
  // your fall back goes here
} 
```

对于modernizr，您所要做的就是在您的网页上添加一个modernizr 的链接。

您可以在 nettuts 上查看相同的运行演示：

[http://net.tutsplus.com/tutorials/html-css-techniques/how-to-build-cross-browser-html5-forms/](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-build-cross-browser-html5-forms/)

希望这会帮助你。

谢谢， NS

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-04T07:42:50.253

再次没有 jQuery

```
const hasColorInputSupport = (document) => {
    try {
        const input = document.createElement('input');
        input.type = 'color';
        input.value = '!';
        return input.type === 'color' && input.value !== '!';
    } catch (e) {
        return false;
    };
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-09T16:16:58.807

您可以使用 Modernizr.js 检测 HMTL5 功能并添加回退。

这是有关使用 Modernizr 的简短介绍。

[http://html5doctor.com/using-modernizr-to-detect-html5-features-and-provide-fallbacks/](http://html5doctor.com/using-modernizr-to-detect-html5-features-and-provide-fallbacks/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-20T11:20:21.737

带有颜色池的颜色输入不能选择其不存在的文本 - 因此它们没有 selectionStart 或 selectionEnd 属性。

我发现这是一个比 Modernizr 检查更有用的检查，Modernizr 检查只检查控件不能包含除十六进制代码以外的其他内容。

在 Safari 12、Chrome 69、Firefox 62、Internet Explorer 11 和 Edge 17 中测试。

编辑：此方法不支持 Safari 12.1 对颜色选择器的支持。欢迎任何建议的修复。

```
var supportsColor = true;

try {
  var a = document.createElement("input");
  a.type = "color";
  supportsColor = a.type === "color" && typeof a.selectionStart !== "number";
} catch (e) {
  supportsColor = false;
}

document.getElementsByTagName("output")[0].innerText = supportsColor.toString();
```

```
Supports color input with color picker: <output></output>

<input type="color"/>
```

# python - python twisted simple server client

> ID：13789167
> 
> 赞同：0
> 
> 时间：2012-12-09T16:13:51.500
> 
> 标签：python, networking, network-programming, twisted

I am trying to build a simple "quote of the day" server and client modified from the twisted tutorial documentation. I want the "quote of the day" to be printed from the client to prove the communication. However, from what I can tell the client is not connecting. Here is my code.

Server

```
from twisted.python import log
from twisted.internet.protocol import Protocol
from twisted.internet.protocol import Factory
from twisted.internet.endpoints import TCP4ServerEndpoint
from twisted.internet import reactor

class QOTD(Protocol):
    def connectionMade(self):
        self.transport.write("An apple a day keeps the doctor away\r\n") 
        self.transport.loseConnection()

class QOTDFactory(Factory):
    def buildProtocol(self, addr):
        return QOTD()

# 8007 is the port you want to run under. Choose something >1024
endpoint = TCP4ServerEndpoint(reactor, 8007)
endpoint.listen(QOTDFactory())
reactor.run() 
```

Client

```
import sys
from twisted.python import log
from twisted.internet import reactor
from twisted.internet.protocol import Factory, Protocol
from twisted.internet.endpoints import TCP4ClientEndpoint

class SimpleClient(Protocol):
    def connectionMade(self):
        log.msg("connection made")
        #self.transport.loseConnection()

    def lineReceived(self, line):
        print "receive:", line

class SimpleClientFactory(Factory):
    def buildProtocol(self, addr):
        return SimpleClient()

def startlog():
    log.startLogging(sys.stdout)

point =  TCP4ClientEndpoint(reactor, "localhost", 8007)
d = point.connect(SimpleClientFactory)
reactor.callLater(0.1, startlog)
reactor.run() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T16:46:24.060

*   传递 SimpleClientFactory 的实例，而不是类本身`point.connect()`
*   如果您使用，则从 twisted.protocol.basic.LineReceiver 子类 SimpleClient 而不是 Protocol`lineReceived`
*   对结果调用 addErrback`endpoint.listen`并`point.connect`处理错误

# c# - C#中两个带有颜色的表单之间的文本

> ID：13789182
> 
> 赞同：-1
> 
> 时间：2012-12-09T16:15:21.967
> 
> 标签：c#, winforms

我有 2 个带有主窗口和第二个窗口的表单。主窗口 ( `Form1`) 应从第二个窗口 ( `Form2`)获取文本

第二个窗口`Form2`（所以`Form1`当我发送黄色示例时，它只是黑色文本。

我不是 C# 专家，因为我对此很陌生。我确信这是一个非常简单的问题，但对我来说并不那么容易。

`Form1.cs`：

```
 using System;
 using System.Collections.Generic;
 using System.ComponentModel;
 using System.Data;
 using System.Drawing;
 using System.Linq;
 using System.Text;
 using System.Windows.Forms;

 namespace tester
 {
    public partial class Form1 : Form
    {
     public string text;
     public Form1()
     {
        InitializeComponent();
     }

    private void button1_Click(object sender, EventArgs e)
    {
        Form2 NewForm2 = new Form2(this);
        NewForm2.Show();
    }

    internal void populate()
    {
        richTextBox1.Text = text;
    }
} 
```

`Form2.cs`：

```
 using System;
 using System.Collections.Generic;
 using System.ComponentModel;
 using System.Data;
 using System.Drawing;
 using System.Linq;
 using System.Text;
 using System.Windows.Forms;

   namespace Tester
   {
   public partial class Form2 : Form
    {
    Form1 texting;
    public Form2(Form1 iForm)
    {
        texting = iForm;
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        texting.text = richTextBox1.Text;
        texting.populate();
        this.Close();
    }

    private void button2_Click(object sender, EventArgs e)
    {
        if ( MyColorDialog.ShowDialog() != DialogResult.Cancel)
        {
            richTextBox1.ForeColor = MyColorDialog.Color;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:14:29.773

就像您`public string text`在 Form1 中制作一样，您可以制作一个`public Color rictTextBoxColor`属性。然后也设置它，并在您的填充方法中引用它

# c# - 如何在微框架中实现中断？

> ID：13789184
> 
> 赞同：2
> 
> 时间：2012-12-09T16:15:24.233
> 
> 标签：c#, .net-micro-framework

我无法`stm32f4discovery`使用 VS2010 在 .NET 中编译代码。

使用`NETMF 4.2`

```
 using System;
    using System.Threading;
    using Microsoft.SPOT;
    using Microsoft.SPOT.Hardware;

    namespace MFConsoleApplication1
    {

        public class Program
        {
            private static InterruptPort interruptPort;

            public static void Main()
            {
                interruptPort =  new InterruptPort(Cpu.Pin.GPIO_Pin2,
                                               false,
                                               Port.ResistorMode.PullUp,
                                               rt.InterruptMode.InterruptEdgeLevelLow);

                interruptPort.OnInterrupt += new NativeEventHandler(port_OnInterrupt);

                 Thread.Sleep(Timeout.Infinite);
            }

             private static void port_OnInterrupt(uint port, uint state, TimeSpan time)
             {
                Debug.Print("Pin=" + port + " State=" + state + " Time=" + time);
                interruptPort.ClearInterrupt();
             }
         }
    } 
```

在编译时，我收到以下错误： `No overload for 'port_OnInterrupt' matches delegate 'Microsoft.SPOT.Hardware.NativeEventHandler'`

我如何编译代码？

我从“Expert .NET Micro framework”一书中举了这个例子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T17:11:08.887

尽管文档声明最后一个参数是 a`TimeSpan`我认为它确实是`DateTime`我一直在使用的 .net 微框架中的一个。

所以而不是

```
 private static void port_OnInterrupt(uint port, uint state, TimeSpan time) 
```

尝试

```
 private static void port_OnInterrupt(uint port, uint state, DateTime time) 
```

还有另一个提示：而不是

```
 interruptPort.OnInterrupt += new NativeEventHandler(port_OnInterrupt); 
```

你可以写

```
 interruptPort.OnInterrupt += port_OnInterrupt; 
```

这是等效的但更具可读性。

# ruby-on-rails - 如何让 Sidekiq 工作人员在 Heroku 上运行

> ID：13789186
> 
> 赞同：3
> 
> 时间：2012-12-09T16:15:46.043
> 
> 标签：ruby-on-rails, heroku, sidekiq

我已经用我的 Rails 项目设置了 Sidekiq。它与 Unicorn 在 Heroku 上运行。我已经完成了所有配置步骤，包括设置正确的 REDISTOGO_URL （[正如这个问题所引用](https://stackoverflow.com/questions/13770713/starting-sidekiq-on-heroku)的那样），我在 unicorn.rb 的 after_fork 中添加了以下内容：

```
after_fork do |server,worker|
    if defined?(ActiveRecord::Base)
        ActiveRecord::Base.establish_connection
        Rails.logger.info('Connected to ActiveRecord')
    end

    Sidekiq.configure_client do |config|
        config.redis = { :size => 1 }
    end
end 
```

我的Procfile如下：

```
web: bundle exec unicorn -p $PORT -c ./config/unicorn.rb
worker: bundle exec sidekiq 
```

现在我打电话给我的工作人员 perform_async 并将任务添加到队列中。事实上，在我的 Sidekiq Web 界面中，它显示队列中有 7 个项目，并且其中包含所有数据。然而，没有工作人员处理队列，对于我的生活，我无法弄清楚为什么。如果我跑

```
heroku ps 
```

我得到以下输出：

```
=== web: `bundle exec unicorn -p $PORT -c ./config/unicorn.rb`
web.1: up 2012/12/09 08:04:24 (~ 9m ago)

=== worker: `bundle exec sidekiq`
worker.1: up 2012/12/09 08:04:08 (~ 10m ago) 
```

有人知道这里发生了什么吗？

**更新**

这是我的工人阶级的代码。是的，我知道 Oj gem 可能与 sidekiq 存在一些问题，但我想我会先试一试。此时我没有收到任何错误消息（工作人员甚至没有运行）。

```
require 'addressable/uri'
class DatasiftInteractionsWorker
include Sidekiq::Worker
sidekiq_options queue: "tweets"

def perform( stream_id , interactions )
    interactions = Oj.load(interactions)
    interactions.each{ |interaction|
        if interaction['interaction']['type'] == 'twitter'
            url = interaction['links']['normalized_url'] unless interaction['links']['normalized_url'][0].nil?
            url = interaction['links']['url'] if interaction['links']['normalized_url'][0].nil?
            begin
                puts interaction['links'] if url[0].nil?
                next if url[0].nil?
                host = Addressable::URI.parse(url[0]).host
                host = host.gsub(/^www\.(.*)$/,'\1')
                date_str = Time.now.strftime('%Y%m%d')
                REDIS.pipelined do
                    # Add domain to Redis domains Set
                    REDIS.sadd date_str , host
                    # INCR Redis host
                    REDIS.incr( host + date_str )
                end
            rescue
                puts "ERROR: Could not store the following links: " + interaction['links'].to_s
            end
        end
    }
end
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-22T18:13:16.500

我的偏好是创建一个 /config/sidekiq.yml 文件，然后`worker: bundle exec sidekiq -C config/sidekiq.yml`在您的 Procfile 中使用。

[这是](https://github.com/mperham/sidekiq/blob/master/examples/config.yml)一个示例 sidekiq.yml 文件

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T00:17:07.933

发现如果您使用的是自定义队列，则需要让 Sidekiq 知道 Procfile 中的该队列，如下所示：

```
worker: bundle exec sidekiq -q tweets, 1 -q default 
```

我不太清楚为什么会这样，因为 sidekiq 知道所有队列。我将把它作为一个问题发布在 Sidekiq 项目上。

# java - ...could not get wglGetExtensionsStringARB

> ID：13789193
> 
> 赞同：3
> 
> 时间：2012-12-09T16:17:22.437
> 
> 标签：java, android, eclipse, emulation

I am having the common "[could not get wglGetExtensionsStringARB" error. I have tried all of the fixes I could find without success. I have displayed the skin, I have set the RAM to 512 MB, I have enabled/disabled snapshot, and I have tried other random experiments, but the same error keeps popping up. Below are the current stats of my emulator. I have adjusted them all to their origional positions. The console display is below that. Any advice would be appreciated! I am absolutely stuck!

NOTE: The emulator appears regardless of the changes I have made (including the RAM settings). It is a black screen for a few seconds followed by the ANDROID logo.

```
[2012-12-09 11:00:28 - SDK Manager] SD Card already present with same size, was not changed.
[2012-12-09 11:00:28 - SDK Manager] Updated AVD 'Nexus_7' based on Android 4.2, ARM (armeabi-v7a) processor,
[2012-12-09 11:00:28 - SDK Manager] with the following hardware config:
[2012-12-09 11:00:28 - SDK Manager] hw.sdCard=yes
[2012-12-09 11:00:28 - SDK Manager] hw.device.manufacturer=Google
[2012-12-09 11:00:28 - SDK Manager] hw.mainKeys=no
[2012-12-09 11:00:28 - SDK Manager] hw.lcd.density=213
[2012-12-09 11:00:28 - SDK Manager] hw.accelerometer=yes
[2012-12-09 11:00:28 - SDK Manager] hw.dPad=no
[2012-12-09 11:00:28 - SDK Manager] hw.device.hash=-2113695447
[2012-12-09 11:00:28 - SDK Manager] hw.trackBall=no
[2012-12-09 11:00:28 - SDK Manager] hw.device.name=Nexus 7
[2012-12-09 11:00:28 - SDK Manager] hw.sensors.proximity=no
[2012-12-09 11:00:28 - SDK Manager] hw.battery=yes
[2012-12-09 11:00:28 - SDK Manager] disk.dataPartition.size=200M
[2012-12-09 11:00:28 - SDK Manager] hw.audioInput=yes
[2012-12-09 11:00:28 - SDK Manager] hw.sensors.orientation=yes
[2012-12-09 11:00:28 - SDK Manager] hw.camera.front=none
[2012-12-09 11:00:28 - SDK Manager] hw.gps=yes
[2012-12-09 11:00:28 - SDK Manager] skin.dynamic=no
[2012-12-09 11:00:28 - SDK Manager] hw.keyboard=no
[2012-12-09 11:00:28 - SDK Manager] vm.heapSize=32
[2012-12-09 11:00:28 - SDK Manager] hw.ramSize=1024 
```

* * *

```
[2012-12-09 11:00:28 - SDK Manager] SD Card already present with same size, was not changed.
[2012-12-09 11:00:28 - SDK Manager] Updated AVD 'Nexus_7' based on Android 4.2, ARM (armeabi-v7a) processor,
[2012-12-09 11:00:28 - SDK Manager] with the following hardware config:
[2012-12-09 11:00:28 - SDK Manager] hw.sdCard=yes
[2012-12-09 11:00:28 - SDK Manager] hw.device.manufacturer=Google
[2012-12-09 11:00:28 - SDK Manager] hw.mainKeys=no
[2012-12-09 11:00:28 - SDK Manager] hw.lcd.density=213
[2012-12-09 11:00:28 - SDK Manager] hw.accelerometer=yes
[2012-12-09 11:00:28 - SDK Manager] hw.dPad=no
[2012-12-09 11:00:28 - SDK Manager] hw.device.hash=-2113695447
[2012-12-09 11:00:28 - SDK Manager] hw.trackBall=no
[2012-12-09 11:00:28 - SDK Manager] hw.device.name=Nexus 7
[2012-12-09 11:00:28 - SDK Manager] hw.sensors.proximity=no
[2012-12-09 11:00:28 - SDK Manager] hw.battery=yes
[2012-12-09 11:00:28 - SDK Manager] disk.dataPartition.size=200M
[2012-12-09 11:00:28 - SDK Manager] hw.audioInput=yes
[2012-12-09 11:00:28 - SDK Manager] hw.sensors.orientation=yes
[2012-12-09 11:00:28 - SDK Manager] hw.camera.front=none
[2012-12-09 11:00:28 - SDK Manager] hw.gps=yes
[2012-12-09 11:00:28 - SDK Manager] skin.dynamic=no
[2012-12-09 11:00:28 - SDK Manager] hw.keyboard=no
[2012-12-09 11:00:28 - SDK Manager] vm.heapSize=32
[2012-12-09 11:00:28 - SDK Manager] hw.ramSize=1024
[2012-12-09 11:10:21 - MyFirstApp] ------------------------------
[2012-12-09 11:10:21 - MyFirstApp] Android Launch!
[2012-12-09 11:10:21 - MyFirstApp] adb is running normally.
[2012-12-09 11:10:21 - MyFirstApp] Performing com.example.myfirstapp.MainActivity activity launch
[2012-12-09 11:10:27 - MyFirstApp] Launching a new emulator with Virtual Device 'Nexus_7'
[2012-12-09 11:10:28 - Emulator] Failed to create Context 0x3005
[2012-12-09 11:10:28 - Emulator] emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
[2012-12-09 11:10:28 - Emulator] could not get wglGetExtensionsStringARB
[2012-12-09 11:10:28 - Emulator] could not get wglGetExtensionsStringARB
[2012-12-09 11:10:28 - Emulator] could not get wglGetExtensionsStringARB
[2012-12-09 11:10:28 - Emulator] could not get wglGetExtensionsStringARB
[2012-12-09 11:10:28 - Emulator] could not get wglGetExtensionsStringARB
[2012-12-09 11:10:28 - Emulator] could not get wglGetExtensionsStringARB
[2012-12-09 11:10:28 - Emulator] could not get wglGetExtensionsStringARB
[2012-12-09 11:10:28 - Emulator] could not get wglGetExtensionsStringARB
[2012-12-09 11:10:28 - MyFirstApp] New emulator found: emulator-5554
[2012-12-09 11:10:28 - MyFirstApp] Waiting for HOME ('android.process.acore') to be launched...
[2012-12-09 11:10:30 - MyFirstApp] emulator-5554 disconnected! Cancelling 'com.example.myfirstapp.MainActivity activity launch'! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T06:32:03.417

i uninstalled and reinstalled EVERYTHING.

# javascript - 用于检测 iphone 应用程序版本的移动网络应用程序

> ID：13789195
> 
> 赞同：0
> 
> 时间：2012-12-09T16:17:51.497
> 
> 标签：javascript, iphone, objective-c, ios, html

我有一个与本机应用程序（从应用程序商店下载）结合使用的移动网络应用程序。当我运行网络应用程序时，我正在检测用户单击某些按钮时是否安装了本机应用程序。到目前为止，一切都很好。现在，我如何检测我的应用安装了哪个版本？这甚至可能吗？

# c++ - 在 Eclipse CDT 中读取/写入文件的目录出现问题

> ID：13789197
> 
> 赞同：2
> 
> 时间：2012-12-09T16:18:29.883
> 
> 标签：c++, eclipse, file, directory

我使用 fstream 在 C++ 中读/写文件。我的项目结构是：

```
project
    /folder
        source.cpp
        source.o
        source.out
        data.txt
        Makefile 
```

我读取文件的代码如下所示：

> ifstream f;
> 
> f.open("data.txt"); // 因为 source.out 和 data.txt 是同一个目录

但是如果我在 Eclipse 中运行它，它就无法读取这个文件。只有当我这样放置`data.txt`文件时它才有效：

```
project
    /folder
        source.cpp
        source.o
        source.out
        Makefile    
    data.txt 
```

这样不好。我也不想将我的代码修复为：

> f.open("文件夹/data.txt")

当它们在同一目录中时。因为如果我在 Eclipse 之外运行 source.out，它就不起作用。

任何人都可以给我一些解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:43:04.470

您可以在运行配置（参数选项卡）中设置“工作目录”

# ruby-on-rails - 使用另一个表中的数据设置字段数据

> ID：13789204
> 
> 赞同：1
> 
> 时间：2012-12-09T16:19:05.487
> 
> 标签：ruby-on-rails, methods, html-table

我有一个汽车租赁系统。用户可以查看可用汽车表并单击“预订”链接。它将他们引导到页面`bookings/new`。我想要的是当前用户的用户 ID 和从可用汽车表中选择的汽车的汽车 ID，以自动输入到新的预订表格中。

目前，可用汽车表向用户显示如下：

```
#cars#index

<%if logged_in_as_staff?%>
<h2>Available Cars</h2>

<table border="1" cellspacing="0" cellpadding="0">
<tr>
<th>Car name</th>
<th>Manufacturer</th>
<th>Registration</th>
<th>Colour</th>
<th></th>

</tr>

<% @cars_available.each do |car| %>
 <tr>
   <td><%= car.car_name %></td>
   <td><%= car.manufacturer %></td>
   <td><%= car.registration %></td>
   <td><%= car.colour %></td>
   <td><%= link_to 'Book', new_booking_path %></td>

 </tr>
 <% end %>
</table>

<br />
<%= link_to 'Menu', main_menu_staff_path %> 
```

有没有办法通过 传输数据`link_to`，或者我必须在预订或汽车控制器中定义一个方法？

我的预订表格如下所示：

```
<%if logged_in_as_staff? %>
<%= form_for(@booking) do |f| %>
 <% if @booking.errors.any? %>
   <div id="error_explanation">

    <ul>
      <% @booking.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<div class="field">
  <%= f.label :booking_no %><br />
  <%= f.text_field :booking_no%>
</div>
<div class="field">
  <%= f.label :car_id %><br />
  <%= f.number_field :car_id %>
</div>

  <div class="field">
    <%= f.label :user_id %><br />
    <%= f.number_field :user_id %>
  </div>

<div class="field">
  <%= f.label :date %><br />
  <%= f.date_select :date %>
</div>
<div class="actions">
  <%= f.submit %>
</div>
<% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:32:45.203

你的链接应该是这样的：

```
<%= link_to 'Book', new_booking_path(car_id: car.id) %> 
```

并以你的形式

代替

```
<div class="field">
  <%= f.label :car_id %><br />
  <%= f.number_field :car_id %>
</div> 
```

和

```
<%= f.hidden_field, :car_id, value: params[:car_id] %> 
```

# c - 创建基本日历程序的逻辑错误

> ID：13789210
> 
> 赞同：1
> 
> 时间：2012-12-09T16:20:38.117
> 
> 标签：c, calendar

我制作了一个仅用于测试目的的程序，当您按住键盘上的“p”键时，它从 2012 年 1 月 1 日开始每天都会溢出，它应该会持续到 2013 年，尽管它会持续到 2013 年 1 月 32 日，这是一个我不知道如何解决的错误，我已经尝试解决这个问题几个小时了，但似乎没有什么可以让它正常工作..（应该在 31 日之后到 2013 年 2 月 1 日一月）

这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>

int month[] = {0,31,28,31,30,31,30,31,31,30,31,30,31};

int day = 0;
int year = 2012;

char *months[]=
{
    " ",
    " January ",
    " February ",
    " March ",
    " April ",
    " May ",
    " June ",
    " July ",
    " August ",
    " September ",
    " October ",
    " November ",
    " December "
};

int x = 1; //skip the blank element 0, get to January (element 1)

int main()
{

while(1)
{
    char ch;
    ch = getch(); //in_char();

    if(ch == 'p')
    {
        day++;

        if(day == month[x]+1)
        {
            day = 1; //day is equal to the first day of the new month
            month[x]++; //month data increments
            months[x]++; //month display increments
            x++; //element of month array increments to get the data of the next month

            if(year % 4 == 0) //leapyear
            {
                month[2] = 29;
            }
            else
            {
                month[2] = 28;
            }

            if(x == 13) //if 12 months have passed
            {
                year++; //year increments
                day = 1; //initialize day to be day 1 of the next year
                x = 1; //go back to the 'January' element in the array

                if(day == month[x]) //if day is equal to the first month (January) 31 days
                {
                    day = 1;
                    month[x]++; //month data increments
                    months[x]++; //month display increments
                }
            }
        }
        if(year == 9999)
        {
            year = 1;
        }

        printf("%i%s%04i\n",day,months[x],year);
    }
}

return 0;
} 
```

输出：

```
.
.
.
28 December 2012
29 December 2012
30 December 2012
31 December 2012
1January 2013
2January 2013
3January 2013
4January 2013
5January 2013
6January 2013
7January 2013
8January 2013
9January 2013
10January 2013
11January 2013
12January 2013
13January 2013
14January 2013
15January 2013
16January 2013
17January 2013
18January 2013
19January 2013
20January 2013
21January 2013
22January 2013
23January 2013
24January 2013
25January 2013
26January 2013
27January 2013
28January 2013
29January 2013
30January 2013
31January 2013
**32January 2013**
1February 2013
2February 2013
.
.
. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T16:24:58.690

问题在这里：

```
 if(day == month[x]+1)
    {
        day = 1; // reset date...OKAY
        month[x]++; // NOT OKAY 
```

通过这样做`month[x]++`，您正在增加该月允许的天数。相反，您需要保留一个变量来跟踪月份，就像您对日和年所做的那样。

# java - 摆动面板可调整大小的间隙

> ID：13789211
> 
> 赞同：1
> 
> 时间：2012-12-09T16:20:51.647
> 
> 标签：java, swing, layout, layout-manager, grouplayout

我正在使用 eclipse 和 windowsbuilder 来制作 java gui 应用程序。我在维护摆动面板中组件的填充时遇到了麻烦。我正在使用 windowbuilder 设计器中的组布局来定位组件。但遗憾的是，当窗口重新调整大小时，我无法保持填充。

![正常大小的窗口](../Images/683116558ebda812a0f6dc5be3ab7ebe.png)
普通窗口

![窗口最大化](../Images/ca3ac10e7b321c0a2bfc9c8e3a5a2879.png) 重新调整大小或最大化时的窗口

当窗口重新调整大小时，我希望让我的应用程序自动调整水平和垂直间隙的大小，就像第三张图片一样，以便正确保持组件填充。 ![我希望拥有的窗户填充物](../Images/793c7461dc189cba8f93100deb04a7e5.png)

编码：

```
public myframe() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 450, 300);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new BorderLayout(0, 0));
        setContentPane(contentPane);

        JPanel panel = new JPanel();
        contentPane.add(panel, BorderLayout.CENTER);

        JButton btnNewButton = new JButton("New button");
        GroupLayout gl_panel = new GroupLayout(panel);
        gl_panel.setHorizontalGroup(
            gl_panel.createParallelGroup(Alignment.TRAILING)
                .addGroup(Alignment.LEADING, gl_panel.createSequentialGroup()
                    .addGap(166)
                    .addComponent(btnNewButton)
                    .addContainerGap(169, Short.MAX_VALUE))
        );
        gl_panel.setVerticalGroup(
            gl_panel.createParallelGroup(Alignment.LEADING)
                .addGroup(gl_panel.createSequentialGroup()
                    .addGap(37)
                    .addComponent(btnNewButton)
                    .addContainerGap(192, Short.MAX_VALUE))
        );
        panel.setLayout(gl_panel);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:49:18.033

我已经找到了解决方案：:) 只需将 .addGap() 替换为 .addContainerGap() 之后它就可以正常工作了。

# iphone - iOS 6：UserInfo 为粘贴板更改通知返回 nil

> ID：13789212
> 
> 赞同：0
> 
> 时间：2012-12-09T16:21:00.470
> 
> 标签：iphone, objective-c, ios6, nsnotificationcenter, uipasteboard

这是粘贴板更改事件的通知观察者，我需要它来处理复制的选定文本

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(receiveClipBoardNotification:)
                                             name:@"UIPasteboardChangedNotification"
                                           object:nil]; 
```

下面是选择器方法**receiveClipBoardNotification 的实现：**

```
- (void) receiveClipBoardNotification:(NSNotification *) notification {

//    NSMutableArray *typesAddedKey = [[notification userInfo] objectForKey:@"UIPasteboardChangedTypesAddedKey"];
//    pasteBoardItemType = [typesAddedKey objectAtIndex:0];        

    NSLog(@"%@", [notification userInfo]);
} 
```

问题是**[notification userInfo]**在 iOS 6 上返回 nil，尽管它在 iOS 5 上完美运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:06:51.080

好吧，这适用于 iOS 6

```
NSLog(@"%@", [[UIPasteboard generalPasteboard] string]); 
```

# doctrine-orm - Doctrine2：按 ManToMany 关联过滤

> ID：13789220
> 
> 赞同：0
> 
> 时间：2012-12-09T16:21:54.503
> 
> 标签：doctrine-orm, dql

我想根据关联的对象检索对象集合。例如，按类别。这将是多对多的关系。

我已经能够通过 MEMBER OF 实现这一点，但是我需要传入一组 ID，而不是一次一个。我看到有一个“IN ()”，但它似乎需要一个子查询，我想避免。

成员示例： `SELECT o FROM Entity\Object1 o WHERE 'CATEGORY_CODE' MEMBER OF o.categories`

（编辑）这是我想做的，但也许我误解了实体在 DQL 中的工作方式： `SELECT o FROM Entity\Object1 o WHERE o.categories.Id IN (id, id, id)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:35:08.793

```
 SELECT o FROM Entity\Object1 o JOIN o.categories c WHERE c.id in ('id', 'id', 'id'); 
```

如果这不是您想要的，您必须编辑您的问题以更具体。

# knockout.js - 如何从 html 代码访问视图模型中对象的属性？

> ID：13789224
> 
> 赞同：0
> 
> 时间：2012-12-09T16:22:39.773
> 
> 标签：knockout.js

我有一个视图模型如下：

```
define(
    ['jquery', 'knockout', 'knockout.mapping', 'data/data', 'models/models'],
    function ($, ko, mapping, data, models) {
        var post =  {},

            getPost = function (param) {
                $.when(data.deferredRequest('postDetail', param.id))
                 .done(function (result) {
                     mapping.fromJS(result, {}, post);

                     console.log(result.title === post.title()); // ---> this is true
                     console.log(ko.isObservable(post.title));   // ---> this is true
                 });
            };

        return {
            post   : post,
            getPost: getPost
        };
    }); 
```

我想在 html 中显示 title 属性，如下所示：

```
<section id="section-post-detail" class="view" >
    <div class="page-header">
        <h3 data-bind="text: post.title"></h3>    <!-- show nothing -->
        <h3 data-bind="text: post().title"></h3>  <!-- error -->
        <h3 data-bind="text: post.title()"></h3>  <!-- error -->
    </div>
</section> 
```

我尝试了三种方法来显示标题属性，但是所有这些都失败了。我错过了什么吗？

* * *

已编辑

我调整了源代码如下。我在 viewmodel 上添加了 title 属性并在 getPost 中对其进行了更新，然后我成功访问了 viewmodel 的 title 属性，而不是 post 模型上的 title 属性。

```
define(
        ['jquery', 'knockout', 'knockout.mapping', 'data/data', 'models/models'],
        function ($, ko, mapping, data, models) {
            var post =  {},
                title = ko.observable(''),     
                getPost = function (param) {
                    $.when(data.deferredRequest('postDetail', param.id))
                     .done(function (result) {
                         mapping.fromJS(result, {}, post);

                         title(post.title());                
                         console.log(result.title === post.title()); // ---> this is true
                         console.log(ko.isObservable(post.title));   // ---> this is true
                     });
                };

            return {
                post   : post,
                title  : title,
                getPost: getPost
            };
        });

<section id="section-post-detail" class="view" >
        <div class="page-header">
            <h3 data-bind="text: title"></h3>    
        </div>
    </section> 
```

但是，如您所见， data-bind="text: title" 不是 post 上的 title 属性，而是 viewmodel 上的 title 属性。这不是我想要的。我想访问 post 对象的 title 属性。

请纠正我的做法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:07:50.850

不确定您何时应用绑定，但似乎在绑定时，您只是在绑定空对象。然后，当您的 AJAX 请求完成时，它会添加可观察对象，但由于`post`其本身不可观察，因此 UI 不会更新。

您可以考虑在请求完成后调用 applyBindings，例如：

```
var vm = {
    post: ko.observable()
};    

//simulate AJAX
setTimeout(function() {
    vm.post(ko.mapping.fromJS({ title: "hello" }));    
}, 500);

ko.applyBindings(vm); 
```

然后像这样绑定它：

```
<section id="section-post-detail" class="view" >
    <div data-bind="with: post" class="page-header">
        <h3 data-bind="text: $data.title"></h3> 
    </div>
</section>​​​​​​​​​ 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T03:09:18.793

我认为问题在于您最初将视图模型创建为空对象，如下所示：

```
var post = {}; 
```

然后您尝试更新视图模型，如下所示：

```
mapping.fromJS(result, {}, post); 
```

[但是，http: //knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html)上的映射插件文档似乎表明您应该像这样创建视图模型：

```
var viewModel = ko.mapping.fromJS(data);
// or, in your case
var post = ko.mapping.fromJS(result); 
```

然后，当您需要调用服务器获取更新数据时，您可以这样做：

```
ko.mapping.fromJS(data, viewModel);
// or, in your case
ko.mapping.fromJS(result, post); 
```

需要考虑的重要事情，我认为 RP 正在推动的是，只有在获得数据之后才能创建视图模型。

# c# - 将参数从 aspx pase 传递给 javascript

> ID：13789225
> 
> 赞同：0
> 
> 时间：2012-12-09T16:22:43.240
> 
> 标签：c#, javascript, asp.net, function, arguments

我在javascript中有一个带有参数的函数，如下所示：

```
function editRow(str){
var row= document.getElementById(str);
var cols = row.getElementsByTagName("td");
..........
} 
```

并且该函数应该获得某个 tr 的 id，并替换该 tr 包含的 td 中的所有文本。

所以，我尝试在 tr 中添加一个我想要更改的按钮，并使用“onclick”来调用该函数，但问题是该函数仅在没有参数的情况下工作，如果我试图发送一个参数它不起作用。 .. aspx.cs 页面：

```
......
foreach (DataRow row in ds.Tables[0].Rows)

{
(....more not important code.....)

allStr +=

"<td><input type='button' **onclick='editRow('row"+row["Id"]+"');'** value='edit'><form id='TreeDelete2' action='delete.aspx' method='post' onsubmit='return IfToDelete();'><input type='image' name='sbmt' src='/images/X.gif'/></form></td></tr>";

}

...... 
```

我用 ** 标记了该事件。

我要更改的 tr 的 id 是 row1 (row["Id"]==1)

那么还有其他方法可以从 aspx 文件中传递参数吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:30:51.407

更改您的 js 函数以获取`tr element itself`,

```
function editRow(row){
   //var row= document.getElementById(str);
   var cols = row.getElementsByTagName("td");
   ..........
} 
```

从后面的代码（不知道你`input button string`为什么在后面的代码中这样做），

```
"<td><input type='button' " +
        "onclick='editRow(this.parentNode.parentNode);' value='edit'>" + 
     "...</td>" 
```

# python - 更改制表符分隔的 csv 文件的格式

> ID：13789226
> 
> 赞同：0
> 
> 时间：2012-12-09T16:22:52.533
> 
> 标签：python, csv

我收到了大量数据文件 (.txt)，这些文件代表了来自一个仪器的实验数据。这是一个例子：

```
141716:test: 1 width: 10distance: 13 time: 1690 x:2036.1222 y:696.022 target:1925-2175
141718:test: 2 width: 10distance: 29 time: 624 x:1646.027 y:814.01953 target:1525-1775
141719:test: 3 width: 10distance: 15 time: 688 x:504.4982 y:846.8401 target:375-375
141721:test: 4 width: 10distance: 22 time: 620 x:696.42004 y:922.6398 target:550-550
141722:test: 5 width: 10distance: 10 time: 709 x:366.33945 y:950.7717 target:250-250
141724:test: 6 width: 10distance: 7 time: 602 x:2181.1575 y:641.32117 target:2075-2325
141725:test: 7 width: 10distance: 8 time: 568 x:2207.414 y:741.3456 target:2050-2300
141726:test: 8 width: 10distance: 28 time: 490 x:1629.773 y:691.3334 target:1550-1800
141727:test: 9 width: 10distance: 23 time: 479 x:1811.6924 y:651.8706 target:1675-1925
141728:test: 10 width: 10distance: 26 time: 491 x:776.4396 y:851.138 target:650-650 
```

由于所有其他数据文件都是 cvs，我已按照[Convert tab-delimited txt file into a csv file using Python 将](https://stackoverflow.com/questions/10220412/convert-tab-delimited-txt-file-into-a-csv-file-using-python)它们转换为 csv 文件。我将如何将上述 csv 文件转换为一种格式，其中第一行是每个数据的名称，后续行是数据的值。我有大约一百个，所以不想手动做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T16:45:20.563

这不是 CSV。格式太可怕了。例如， the`width`和字段之间没有分隔符，有些字段在冒号后有空格，而有些则没有。`distance``:`

您必须使用自定义代码处理此问题，然后将其写入 CSV 文件：

```
import re
import csv

lineformat = re.compile(
    r'^(?P<count>\d+)[\s:]*'
    r'test[\s:]*(?P<test>\d+)[\s:]*'
    r'width[\s:]*(?P<width>\d+)[\s:]*'
    r'distance[\s:]*(?P<distance>\d+)[\s:]*'
    r'time[\s:]*(?P<time>\d+)[\s:]*'
    r'x[\s:]*(?P<x>\d+\.\d+)[\s:]*'
    r'y[\s:]*(?P<y>\d+\.\d+)[\s:]*'
    r'target[\s:]*(?P<target>\d+-\d+)[\s:]*'
)
fields = ('count', 'test', 'width', 'distance', 'time', 'x', 'y', 'target')

with open(inputfile) as finput, open(outputfile) as foutput:
    csvout = csv.DictWriter(foutput, fields=fields)
    for line in finput:
        match = lineformat.search(line)
        if match is not None:
            csvout.writerow(match.groupdict()) 
```

这使用带有命名组的正则表达式将行解析为字典，以便轻松写入 CSV 文件。我选择了“count”作为输入文件中第一个数值的名称，您可以随意更改它（但在正则表达式*和*元组中都这样做`fields`）。

# compiler-construction - 解析浮点数的yytext给出零

> ID：13789229
> 
> 赞同：1
> 
> 时间：2012-12-09T16:23:19.603
> 
> 标签：compiler-construction, lex, flex-lexer, compiler-theory

我正在使用以下 lex 文件将数字转换为标记。但是，该程序无法正确解析浮点数。为了调试，我添加了 printf 语句，它们表明 strtof 函数无法正确解析数字。因此，给我输入 4.2 给我输出 0。

```
%{
#include <stdlib.h>
void yyerror(char *);
#include "y.tab.h"
char *p = NULL;
%}

%%

[0-9]+\.[0-9]+  {
            printf("%s", yytext);
            yylval = strtof(yytext, &p);
            printf("%f has been read\n", yylval);
            return FLOAT;   
        }
[0-9]+      {       yylval = atoi(yytext);
            printf("%d (int) has been read\n", yylval); 
                return INTEGER;
        }

[-+*/\n]    {   printf("%s has been read", yytext);
            return *yytext;
        }

[ \t]       ;   /* skip whitespace */
.               {
            printf("Invalid character %s", yytext);
            yyerror("invalid character");
        }
%%

int yywrap(void) {
return 1;
} 
```

任何想法上面代码中的问题在哪里？我使用了具有相同输入的 strtof 函数（在 lex 之外），它似乎工作得很好。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:45:10.957

> 为了调试，我添加了 printf 语句，它们表明 strtof 函数无法正确解析数字。

可悲的是没有。这些`printf`语句表明，`yylval`如果解释为浮点数，则使用 format 打印为 0 `%f`。它没有说明`strtof`.

独立于`lex`，以下两个语句不能有意义地出现在`C`程序的同一范围内：

```
printf("%f has been read\n", yylval);

printf("%d (int) has been read\n", yylval); 
```

`yylval`是 an`int`或 a `double`，或两者都不是，但不能两者兼有。请注意，格式`printf`相当于一个承诺：如果你使用`%f`，你承诺`printf`你会传递一个`double`. 它无法验证这一点，因此它会接受你的话并将它得到的任何参数解释为`double`. 如果你撒谎`printf`，你将得到无意义的输出。如果您以合理的警告级别（`-Wall`on `gcc`或`clang`）编译程序，编译器会警告您明显的违规行为。我强烈建议您这样做。

请注意，默认情况下`yylval`是`int`. 如果你没有做任何事情来改变它，那么这就是你所拥有的。

# assembly - 注册符合性 - 是否 100% 有必要？

> ID：13789230
> 
> 赞同：0
> 
> 时间：2012-12-09T16:23:22.187
> 
> 标签：assembly, cpu-registers

昨晚我和一个朋友在谈论嵌入式处理器之类的东西，我们谈到了 ASM 和特定指令集的话题——尽管我认为这个问题也可以应用于 x86 处理器。

在了解 ASM 中的寄存器时，很明显所有寄存器都有 100% 的独特和特定用途（至少在 x86 架构中）。然而，在讨论他的一些处理器时，他告诉我他正在使用的一些芯片有几个通用寄存器可以用于任何事情，而且很少（如果有的话）寄存器专门用于指令。

归根结底，在*技术上*不能使用任何寄存器来执行指令吗？它们的大小都相同，会有什么区别（堆栈指针等除外）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T17:24:47.223

任何寄存器都可以用作指令操作数的指令集称为*正交*。8086 绝对不是正交设计。在 8086 之后几年发布的竞争对手是摩托罗拉 68000，这是一种高度正交的设计，并因其质量而受到许多程序员的青睐。

然而，8086 的设计并不是随意挑选的，两个非常重要的原则发挥了作用：

*   与上一代 8080 的兼容性是一个强有力的目标。允许将旧汇编代码机械翻译到新处理器。8080 反过来又受到 8008 的严重影响。获得市场接受的新架构总是很困难，英特尔很早就认识到对工具和程序的投资是其客户的重要资产。一个长期为它服务的目标，当然也是设计能持续这么久的原因。

*   工艺技术为您可以使用多少个晶体管来实现处理器设定了一个严格的上限。8086 只需要 29,000 个有源晶体管，这对于 16 位处理器来说是一项工程壮举。使用非正交设计允许丢弃大量胶合逻辑，它也更快。68000 为其预算选择了不同的用途，正交指令集但相当糟糕的总线接口，例如，当数据在非对齐地址上寻址时，会引发臭名昭著的总线错误处理器故障。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T16:26:55.067

> 很明显，所有寄存器都有 100% 的独特和特定用途

错误的。EAX 的唯一用途是什么？

> 技术上不能使用任何寄存器来执行指令

您可以按照自己喜欢的方式使用任何寄存器。您只需要知道某些指令需要操作数/返回特定寄存器中的结果。例如`loop`递减`ECX`直到变为 0，`movsb`从 ESI 移动到 EDI 等。

# php - 处理完成后删除 URL 中的 GET 参数（不使用 POST），PHP

> ID：13789231
> 
> 赞同：20
> 
> 时间：2012-12-09T16:23:39.397
> 
> 标签：php, html, url, get

我有这样的网址`http://localhost/join/prog/ex.php`

当我使用 GET 方法时，这样的 url 地址`http://localhost/join/prog/ex.php?name=MEMORY+2+GB&price=20&quantity=2&code=1&search=add`

我的问题是：所以，我仍然使用 GET 方法，但我想在 GET 方法中的处理完成后，我想像以前`http://localhost/join/prog/ex.php`一样将 url 返回（删除参数）（不使用 POST 方法）。我该怎么做？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-09T17:09:42.933

将其放入您的 HTML 文件 (HTML5)。

```
<script>    
    if(typeof window.history.pushState == 'function') {
        window.history.pushState({}, "Hide", "http://localhost/join/prog/ex.php");
    }
</script> 
```

或者使用例如使用会话的后端解决方案；

```
<?php
    session_start();

    if (!empty($_GET)) {
        $_SESSION['got'] = $_GET;
        header('Location: http://localhost/join/prog/ex.php');
        die;
    } else{
        if (!empty($_SESSION['got'])) {
            $_GET = $_SESSION['got'];
            unset($_SESSION['got']);
        }

        //use the $_GET vars here..
    } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-01-10T00:14:25.400

**简单的答案**

只需将它放在文件顶部，您需要使 GET 查询在加载后从浏览器的 URL 栏中消失。

```
<script>    
    if(typeof window.history.pushState == 'function') {
        window.history.pushState({}, "Hide", '<?php echo $_SERVER['PHP_SELF'];?>');
    }
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T17:07:51.943

我猜想在调用你想要重定向到文件 ex.php 的 url 之后，但这次没有任何参数。为此尝试在 ex.php 中使用以下代码

```
<?
if($_GET['name']!='' || $_GET['price']!='' ||$_GET['quantity']!='' ||$_GET['code']!='' || $_GET['search']!=''){ 

/* here the code checks whether the url contains any parameters or not, if yes it will execute parameters stuffs and it will get redirected to the page http://localhost/join/prog/ex.php without any parameters*/

/* do what ever you wish to do, when the parameters are present. */

echo $name;
print $price;
//etc....

$location="http://localhost/join/prog/ex.php";
echo '<META HTTP-EQUIV="refresh" CONTENT="0;URL='.$location.'">';
exit;
}
else{
 /* here rest of the body i.e the codes to be executed after redirecting or without parameters.*/
echo "Hi no parameters present!";
}
?> 
```

在这里，你所做的只是重定向重定向到同一页面，而不检查查询字符串中是否有任何参数。代码智能地检查参数是否存在，如果有任何参数，它将重定向到 ex.php，否则它将打印“您好，没有参数存在！” 细绳！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T16:36:39.167

如果您使用的是 apache，请考虑使用带有 mod_rewirte 的 .htaccess 文件。 [这里](http://www.branded3.com/blogs/htaccess-mod_rewrite-ultimate-guide/)是一个快速入门。我认为这个结果也可以在 iis 上通过 web.config 文件获得

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-11T14:00:11.180

您可以为此使用`removable_query_args`过滤器。

```
add_filter( 'removable_query_args', function( $vars ) {
        $vars[] = 'name';
        $vars[] = 'price';
        $vars[] = 'quantity';
        $vars[] = 'code';
        $vars[] = 'search';

        return $vars;
    } ); 
```

但是您应该为您的案例添加特定条件，否则，它也会从您网站上的所有其他 URL 中删除这些 Get-parameters。更多信息[在这里](https://developer.wordpress.org/reference/hooks/removable_query_args/)

# mysql - 使用 MySQL 附加现有数据库

> ID：13789234
> 
> 赞同：6
> 
> 时间：2012-12-09T16:24:02.257
> 
> 标签：mysql

免责声明：我以前从未使用过 MySQL！

我有一个文件夹，其中包含许多我认为是 MySQL 数据库的 .frm、.myd 和 .myi 文件。我已经从一个已经失效的服务器中提取了这些文件，供一个多年未使用服务器或数据库但现在正在寻求为新企业恢复一些数据的客户使用。

我已经下载了 MySQL 的最新免费版本以及 MySQL Workbench，并希望将现有数据库连接到新安装；如果我使用的是 MS SQL Server，则相当于“附加”。

我发现一些文章说如果我简单地将文件夹复制到 MySQL 的数据文件夹中并重新启动服务，数据库就会显示出来。我已经尝试过（使用安装文件夹中的数据文件夹以及在初始配置期间创建的“MySQL Datafiles”文件夹，但是当我重新启动服务时没有任何显示。

我应该如何附加这个数据库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T11:38:36.930

好的。我找到了答案，我添加数据库的文件夹是错误的。虽然我找到了 2 个“数据”文件夹，但在 C:\ApplicationData; 中隐藏了第三个文件夹；一旦我在这里添加了我的数据文件并重新启动了 MySQL 服务，我就可以看到数据了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-12T14:13:46.820

在 Windows 8 上，存储 MySql 数据库的默认文件夹是：

> C:\ProgramData\MySQL\MySQL 服务器 5.6\data

5.6是版本。

请注意，它是**ProgramData**而不是**Program Files**，这很容易被忽略。

在那里复制并重新启动服务对我来说效果很好。我什至从早期的 5.X 版本复制数据库。

# python - 如何初始化单例派生对象一次

> ID：13789235
> 
> 赞同：2
> 
> 时间：2012-12-09T16:24:10.087
> 
> 标签：python, singleton

> **可能重复：**
> [是否有一种简单、优雅的方式在 Python 中定义单例？](https://stackoverflow.com/questions/31875/is-there-a-simple-elegant-way-to-define-singletons-in-python)

我有以下示例代码，其中我从 Singleton 派生了一个类（希望它是一个）：

```
class Singleton(object):
    _instance = None
    def __new__(cls, *args, **kwargs):
        if not cls._instance:
            cls._instance = object.__new__(cls, *args, **kwargs)
        return cls._instance

class Tracer(Singleton):         
    def __init__(self):
        print "Init"

a = Tracer()
b = Tracer() 
```

当你尝试它时，你会看到再次调用的`__init__`方法。`Tracer`让另一个实例引用原始实例不是有一个单例吗？我不想`__init__`再次运行该方法，因为它可能会覆盖以前的信息。也许单例是错误的或它的用途？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T23:33:02.997

*我之前的回答无效，我已将其删除。*但是，我发现了一个高度评价的 SO[答案](https://stackoverflow.com/a/6798042/355230)。主要区别在于它使用`Singleton` **元类**而不是基类，并重载`__call__()`其实例类的方法而不是它们的`__new__()`方法。这使它能够控制其单例类实例的实例的创建过程。可以定义一种额外的方法来删除其中的一个或多个——比如用于测试目的。

另一个值得注意的实现细节是元类维护一个字典，`_instances`而不是只能保存一个值的东西。这允许它跟踪无限数量的单例实例（因为它可能是多个元类，因为它是可重用的）。

将其应用到您的示例代码将执行如下操作：

```
class Singleton(type):
    """Metaclass."""
    _instances = {}

    def __call__(cls, *args, **kwargs):
        if cls not in cls._instances:
            cls._instances[cls] = super(Singleton, cls).__call__(*args, **kwargs)
        return cls._instances[cls]

class Tracer(object):
    __metaclass__ = Singleton

    def __init__(self):
        print("Init")

a = Tracer()
b = Tracer()
print('a is b: {}'.format(a is b))  # same object? -> True 
```

输出：

```
Init
a is b: True 
```

**更新**

指定元类的语法在 Python 2 和 3 之间有所不同。对于后者，您需要将`Tracer`类定义更改为：

```
#!/usr/bin/env python3

class Tracer(object, metaclass=Singleton):
    def __init__(self):
        print("Init") 
```

编写一个适用于 Python 版本 2 和 3 的东西*是*可能的，但是有点复杂，因为你***不能***像这样简单地有条件地定义它：

```
## Won't work ##

if sys.version_info[0] < 3:  # Python 2?
    class Tracer(object):
        __metaclass__ = Singleton

        def __init__(self):
            print("Init")

else:  # Python 3
    class Tracer(object, metaclass=Singleton):  # causes SyntaxError in Python 2

        def __init__(self):
            print("Init") 
```

因为`else`子句中的定义导致`SyntaxError`Python 2 中的 a （即使块中的代码永远不会实际执行）。类似于本杰明彼得森的[六个](http://pythonhosted.org/six/)模块的[`with_metaclass()`](http://pythonhosted.org/six/#six.with_metaclass)功能的解决方法，看起来像这样：

```
class Tracer(Singleton("SingletonBaseClass", (object,), {})):
    def __init__(self):
        print("Init") 
```

这会动态创建一个继承所需元类的基类，从而避免由于两个 Python 版本之间的元类语法差异而导致的任何错误。（它通过显式使用定义的元类来创建临时基类来实现。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T16:38:41.697

你`__init__`被调用了两次，但在同一个对象上。你已经创建了一个单例，但 Python 不知道它是，所以它初始化每个被创建的对象。

如果你想追求单例模式，你必须将你的初始化代码移动到`__new__`, 或者你`__new__`调用的另一个方法中。

记住：

1.  单例在 Java 中是常态，但在 Python 中是不受欢迎的。

2.  单例使您的代码更难测试，因为它们是从一个测试传递到下一个测试的全局状态。

# java - 如何在 Maven 中获取特定分支的 SVN 版本号

> ID：13789237
> 
> 赞同：4
> 
> 时间：2012-12-09T16:24:20.103
> 
> 标签：java, svn, maven, branch

我做 SVN 检查多个分支的树，并使用 buildnumber 插件通过“javasvn”实现提供程序获取 SVN 修订版。

当我尝试构建特定分支时，Maven 似乎检索树的顶级文件夹的修订版，而不是该特定分支的修订版。

例如：
根修订号：100
根/分支1 修订号：99
根/分支2 修订号：97

就我而言，在构建分支 1 时，我需要 99 作为内部版本号，而不是 100。

我使用 SVN 1.7。

这是我配置插件的方式：

```
<build>

    <finalName>${project.artifactId}-${project.version}-SVN${buildNumber}</finalName>

    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>buildnumber-maven-plugin</artifactId>
            <executions>
                <execution>
                    <phase>validate</phase>
                    <goals>
                        <goal>create</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <doCheck>false</doCheck>
                <doUpdate>false</doUpdate>
                <providerImplementations>
                    <svn>javasvn</svn>
                </providerImplementations>
            </configuration>
        </plugin> 
```

非常感谢任何想法。
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T21:36:38.300

以下是我们在项目中的做法：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-antrun-plugin</artifactId>
            <executions>
                <execution>
                    <phase>generate-resources</phase>
                    <goals>
                        <goal>run</goal>
                    </goals>
                    <configuration>
                        <tasks>
                            <!-- http://stackoverflow.com/questions/3532135/using-maven-to-output-the-version-number-to-a-text-file -->
                            <!-- Safety -->
                            <mkdir dir="${project.build.directory}"/>

                            <exec executable="svn" output="${basedir}/src/main/filters/svn.properties" dir="..">
                                <arg value="info"/>
                            </exec>
                            <replace file="${basedir}/src/main/filters/svn.properties" token="Last Changed Rev"
                                     value="Last.Changed.Rev"/>
                        </tasks>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

这会输出其中包含的`src/main/filters/svn.properties`一行`Last.Changed.Rev: 22479`。我们重命名`Last Changed Rev`为，`Last.Changed.Rev`所以它是一个有效的变量名。然后，您可以将其用作其他文件中的过滤器。您可能不需要它作为过滤器，但也许这个示例会帮助您满足您的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-07T18:37:32.820

尝试使用默认设置为 false的**useLastCommittedRevision配置。**这应该获取*最后提交的修订*，而不是 pom 构建所在的特定模块上的存储库修订。

# php - SQL注入检查和php抛出错误

> ID：13789238
> 
> 赞同：0
> 
> 时间：2012-12-09T16:24:22.253
> 
> 标签：php, sql

我有两个问题

1.  下面的代码是练习反对 SQL 注入的好方法吗（它似乎可以作为插入方法工作）

2.  如何在完整示例中放置此错误消息：

    ```
    if (!mysqli_query($query,$link))
    {
        die('Error: ' . mysqli_error());
    } 
    ```

这是完整的例子：

```
<?php

$link = mysqli_connect("localhost","root","", "runtracker");
if (!$link)
{
    die('Could not connect: ' . mysqli_error());
}

$query="INSERT INTO userinfo (UserName) VALUES (?)";

if ($stmt = mysqli_prepare($link, $query)) {

    // Lets create the variables
    $name = $_POST['UserName'];

    // Bind the variables and execute the query
    mysqli_stmt_bind_param($stmt,"s", $name);
    mysqli_stmt_execute($stmt);

    // And now we close the statement
    mysqli_stmt_close($stmt);
}

echo "1 record added";

mysqli_close($link);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T19:37:26.260

是的，对于 SQL 查询中的动态值，使用绑定参数是防止 SQL 注入的好方法。有关 SQL 注入的更多信息，您可能会喜欢我的演示[SQL 注入神话和谬误](http://www.slideshare.net/billkarwin/sql-injection-myths-and-fallacies)。

没错，调用 API 函数后检查错误是件好事。大多数 mysqli 函数在出错时返回 FALSE，但连接的处理方式略有不同。

我还喜欢将 Mysqli 错误输出到我可以阅读的日志中，但不输出到用户的浏览器中。

这是我的编码方式：

```
<?php

$mysqli = new mysqli("localhost","root","", "runtracker");
if (mysqli_connect_error())
{
    error_log("Connect error in file ".__FILE__.", line ".__LINE__.": "
      .mysqli_connect_error());
    die("Could not connect to database");
}

if (($stmt = $mysqli->prepare($link, $query)) === false) {
  error_log("Error on prepare in file ".__FILE__.", line ".__LINE__.": "
    .$mysqli->error);
  die('Error on prepare');
}

// Lets create the variables
$name = $_POST['UserName'];

// Bind the variables and execute the query
if ($stmt->bind_param("s", $name) === false) {
  error_log("Error on bind in file ".__FILE__.", line ".__LINE__.": "
    .$stmt->error);
  die('Error on bind');
}
if ($stmt->execute() === false) {
  error_log("Error on execute in file ".__FILE__.", line ".__LINE__.": "
    .$stmt->error);
  die('Error on execute');
}

// And now we close the statement
$stmt->close();

echo "1 record added";

$mysqli->close(); 
```

# search - Lucene 短语搜索

> ID：13789239
> 
> 赞同：0
> 
> 时间：2012-12-09T16:24:26.663
> 
> 标签：search, lucene, lucene.net

我有大文本文件。比如说，如果我搜索“计算机 m”，那么我想得到“计算机显示器”、“计算机内存”和“计算机市场份额”。我怎样才能只获得匹配的短语？

我应该使用 ShingleAnalyzerWrapper 索引文件吗？我应该为此目的使用 SpellChecker 吗？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:01:23.760

[org.apache.lucene.search.highlight.Highlighter](http://lucene.apache.org/core/3_6_0/api/contrib-highlighter/org/apache/lucene/search/highlight/Highlighter.html)用于从找到的文档中提取最匹配的文本。就像 Google 如何在搜索结果中突出显示（或以粗体显示）匹配文本一样。

此博客条目可能会帮助您开始使用它： [http ://hrycan.com/2009/10/25/lucene-highlighter-howto/](http://hrycan.com/2009/10/25/lucene-highlighter-howto/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:16:07.887

您可以为此使用[MultiPhraseQuery](https://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/MultiPhraseQuery.html)。

# python - 如何在内置 open() 函数中输入文件路径？

> ID：13789242
> 
> 赞同：0
> 
> 时间：2012-12-09T16:25:01.800
> 
> 标签：python, file-io, input

我已经阅读了文档，但它没有告诉我们如何在`open()`函数中输入文件路径。

如果文件路径是：

```
/opt/myapp/report/sample.txt 
```

或者

`$MYPATH/report/sample.txt`（其中 $MYPATH=/opt/myapp）

可以这样写语句：

```
f = open('/opt/myapp/report/sample.txt', "r") 
```

或者

```
f = open('$MYPATH/report/sample.txt', "r") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T16:32:42.227

您在这里要做的是扩展路径中的环境变量，可以通过以下方式完成[`os.path.expandvars()`](http://docs.python.org/3.3/library/os.path.html#os.path.expandvars)：

> 返回扩展环境变量的参数。$name 或 ${name} 形式的子字符串被环境变量 name 的值替换。格式错误的变量名称和对不存在变量的引用保持不变。
> 
> 在 Windows 上，除了 $name 和 ${name} 之外，还支持 %name% 扩展。

例如：

```
with open(os.path.expandvars(path), "r") as f:
    ... 
```

请注意我在`with`这里使用的语句，这是打开文件的最佳方式，因为它确保它们被正确关闭，即使出现异常也是如此，并且读起来很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T16:33:17.323

您可以使用`os.environ`来获取环境变量的值，`os.path.join`并将其与`report/sample.txt`部分组合：

```
os.path.join(os.environ['MYPATH'], 'report/sample.txt') 
```

绝对路径也可以。

# scala - 如何复制实例并覆盖特征中声明的值字段

> ID：13789245
> 
> 赞同：2
> 
> 时间：2012-12-09T16:25:31.520
> 
> 标签：scala

假设我在特征中定义了一些抽象值字段：

```
trait Base {
  val toBeOverride: String
}

case class Impl(other:Int) extends Base {
  override val toBeOverride = "some value"
} 
```

我怎样才能编写一个函数，我可以轻松地获得一个克隆实例，只覆盖该`toBeOverride`值，如下所示：

```
// copy only available to case class instance
// v does not have method 'copy'
def overrideBaseValue[T <: Base](v: Base) = 
    v.copy(toBeOverride = "prefix" + v.toBeOverride) 
```

?

**编辑**

@som-snytt，我不认为这是重复的，就像 a 与 a`Trait`不同一样`Abstract Class`。这个问题的答案并不让我满意，见下文。

@Blaisorblade，是的，这是个问题。对于每个子案例类的实例，`toBeOverride`字段是相同的，所以它不应该出现在构造函数中。

目前所有的建议都是`copy`在每个（！）子案例类中定义一个自定义方法，在我看来这很丑陋并且显示了该语言的无能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:55:37.523

这里有两种机制。

显然，在不久的将来，您将能够编写一个可以发出匿名子类的宏，但在那之前，我认为这个类型类并不难。

只是在这里踢动态轮胎。

```
import scala.language.dynamics
import scala.reflect._
import scala.reflect.runtime.{ currentMirror => cm }
import scala.reflect.runtime.universe._

trait Base {
  def m: String
}
case class Impl(p: Int) extends Base {
  override val m = "some value"
}

trait Basic extends Dynamic {
  protected def m: String
  def selectDynamic(f: String): Any =
    if ("m" == f) m else reflecting(this, f)
  protected def reflecting(b: Basic, f: String) = {
    val im = cm.reflect(b)
    val member = im.symbol.typeSignature member newTermName(f)
    require(member != NoSymbol, s"No such member $f")
    (im reflectMethod member.asMethod)()
  }
}
case class Implic(p: Int) extends Basic {
  override protected val m = "some value"
}

object Test extends App {

  implicit class Copy[A <: Base](val b: A) {
    def overriding(overm: String): A = (b match {
      case impl: Impl => new Impl(impl.p) { override val m = overm }
      case b: Base    => new Base { override val m = overm }
    }).asInstanceOf[A]
  }
  implicit class Proxy[A <: Basic : ClassTag](val b: A) {
    def proximately(overm: String): Basic = new Basic {
      override val m = overm
      override def selectDynamic(f: String): Any =
        if ("m" == f) overm else reflecting(b, f)
      override def toString = b.toString
    }
  }

  // asked for this
  //def overriding[T <: Base](v: Base) = v.copy(m = "prefix" + v.m)

  /* want something like this
  def overriding[T <: Base](v: Base) = new Impl(v.p) {
    override val m = "some value"
  } */

  val a = Impl(5)
  val b = a overriding "bee good"
  Console println s"$a with ${a.m} ~> $b with ${b.m}"
  // or
  val c = Implic(7)
  val d = c proximately "dynomite"
  Console println s"$c with ${c.m} ~> $d with ${d.m}"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T22:57:09.480

最简单的解决方案是只添加你想要的方法 Base：

```
trait Base {
  val toBeOverride: String
  def copyBase(newToBeOverridden: String): Base
}

case class Impl(other:Int, override val toBeOverride: String = "some value") extends Base {
  def copyBase(newToBeOverridden: String) = copy(toBeOverride = newToBeOverridden)
} 
```

这也允许`Impl`在指定的值的同时直接创建一个实例`toBeOverride`（这是不可能的）。唯一的缺点是现在使用 Impl 的模式匹配必须更改语法 - 如果有问题，请更新您的问题并添加评论。

顺便说一句，如果您只想添加一个前缀（如您的示例中所示），那没问题：

```
case class Impl(other:Int, override val toBeOverride: String = "some value") extends Base {
  def copyBase(newToBeOverridden: String) = copy(toBeOverride = toBeOverride + newToBeOverridden)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T17:59:56.127

由于特征不会自动获取复制方法，因此您可以尝试使用`Base`案例类：

```
 case class Base(toBeOverride: String)

  case class Impl(other: Int, someVal: String = "some value") extends Base(someVal)

  def overrideBaseValue[T <: Base](v: Base) =
      v.copy(toBeOverride = "prefix" + v.toBeOverride) 
```

但是，您将遇到的问题是`copy`返回一个实例，`Base`我认为您不能将其转换回原始`Impl`类。例如，这不会编译：

```
 def overrideBaseValue[T <: Base](v: T): T =
      v.copy(toBeOverride = "prefix" + v.toBeOverride) 
```

# javascript - Javascript 数学错误

> ID：13789248
> 
> 赞同：0
> 
> 时间：2012-12-09T16:25:37.800
> 
> 标签：javascript, function, math

> **可能重复：**
> [加法在 JavaScript 中不起作用](https://stackoverflow.com/questions/8377410/addition-is-not-working-in-javascript)

所以我一直在为我玩的游戏开发各种计算器。我有下面的公式来解决它，但是，它将值串在一起而不是实际添加它们。因此，如果我什么都不输入，我会得到“000000000000000000000000”作为值，如果我将 totalattack 更改为 1，我会得到“10000000000000000000000”。环顾四周，我真的不确定它为什么会这样做。或者如何解决。

```
var invasionattack = totalattack + (600*DSC) + (60*translator) + (35*mindcontrol) + (30*psionic) + (40*mutagen) + (2500*cartridge) + (300*stryll) + (15*mech) + (20*bane) + (30*cbane) + (60*hbane) + (45*obane) + (75*mbane) + (decimator*200);
                alert('Invasion Attack From Modules: ' + invasionattack); 
```

如果有人好奇/如果它是相关的，可以在这里找到完整的代码：http: [//glcalc.x10.mx/invasioncalc.html](http://glcalc.x10.mx/invasioncalc.html)然后查看源代码。

某处的乘数也存在错误，但我稍后会发现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:13:09.827

字符串连接与加法不同。你需要确保你处理的是数字，而不是字符串。

`calculatechance`也就是说，您的函数还有许多其他潜在的陷阱。

您在需要时声明变量，然后在以后重新声明变量，所有这些都会因为[变量提升](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)而给您带来麻烦。

您正在使用“ [Truthy and Falsy](http://11heavens.com/falsy-and-truthy-in-javascript) ”值，这本身并不一定是坏事，事实上（恕我直言，JavaScript 的美丽部分之一），但除非您了解它的工作原理，否则您可能会遇到麻烦。

您似乎正在使用匿名代码块：

```
{
    if (decimator == 0) {
        var decimatormult = 1;
    };
    if (!decimator == 0) for (var decimatormult = 1; decimator > 0; decimator--) {
        decimatormult * 1.07
    }
} 
```

而且我不确定不同的浏览器会如何解释它。最好消除它们并使用注释来描述部分。

您正在覆盖`totalattack`您可能不想要的值。

总而言之，您的函数可能更好地写为：

```
var calculatechance = function calculatechance() {
    'use strict';
    var bane = parseFloat(document.getElementById('bane').value, 10) || 0, // Convert to a number (float) and default to 0 if parsing fails.
        cbane = parseFloat(document.getElementById('cbane').value, 10) || 0,
        obane = parseFloat(document.getElementById('obane').value, 10) || 0,
        hbane = parseFloat(document.getElementById('hbane').value, 10) || 0,
        mbane = parseFloat(document.getElementById('mbane').value, 10) || 0,
        exotic = parseFloat(document.getElementById('exotic').value, 10) || 0,
        decimator = parseFloat(document.getElementById('decimator').value, 10) || 0,
        mindcontrol = parseFloat(document.getElementById('mindcontrol').value, 10) || 0,
        translator = parseFloat(document.getElementById('translator').value, 10) || 0,
        anubix = parseFloat(document.getElementById('anubix').value, 10) || 0,
        attack = parseFloat(document.getElementById('attack').value, 10) || 0,
        // Calculate Invasion Attack
        anubixattack = anubix === 100 ? 1 : 0, // Use of ternary operator
        // Check Checkboxes
        obelisk = document.getElementById("obelisk").checked ? 1 : 0,  // Use of ternary operator with truthy/falsy as .checked equals "checked" (truthy) or "" (falsy)
        foci = document.getElementById("foci").checked ? 1 : 0,
        amp = document.getElementById("amp").checked ? 1 : 0,
        overcharge = document.getElementById("overcharge").checked ? 1 : 0,
        crux = document.getElementById("crux").checked ? 1 : 0,
        mech = document.getElementById("mech").checked ? 1 : 0,
        DSC = document.getElementById("DSC").checked ? 1 : 0,
        kulgox = document.getElementById("kulgox").checked ? 1 : 0,
        terror = document.getElementById("terror").checked ? 1 : 0,
        psionic = document.getElementById("psionic").checked ? 1 : 0,
        mutagen = document.getElementById("mutagen").checked ? 1 : 0,
        stryll = document.getElementById("stryll").checked ? 1 : 0,
        cartridge = document.getElementById("cartridge").checked ? 1 : 0,
        // Other variables
        exoticatt = 0,
        decimatormult = 1,
        totalattack = attack,
        invasionattack = 0;
    // Calculate Exotic Bio Disruptor Multiplier
    // no logic currently here
    // Calculate Exotic Bio Disruptor Static IAttack
    switch (exotic) {
    case 0:
        exoticatt = 0;
        break;
    case 1:
        exoticatt = 250;
        break;
    case 2:
        exoticatt = 350;
        break;
    default:
        exoticatt = (100 * exotic) + 150;
        break;
    }
    //Calculate Atmospheric Decimator Multiplier
    if (decimator !== 0) {
        while (decimator > 0) {
            decimatormult *= 1.07;
            decimator -= 1;
        }
    }
    //Calculate Attack
    if (obelisk) {
        totalattack += attack * 1.1;
    }
    if (foci) {
        totalattack *= 1.05;
    }
    if (amp) {
        totalattack *= 1.15;
    }
    if (crux) {
        totalattack *= 1.1;
    }
    if (overcharge) {
        totalattack *= 1.08;
    }
    if (anubixattack) {
        totalattack += attack * 1.03;
    }
    //Calculate Invasion Attack
    invasionattack = (
        totalattack
        + (600 * DSC)
        + (60 * translator)
        + (35 * mindcontrol)
        + (30 * psionic)
        + (40 * mutagen)
        + (2500 * cartridge)
        + (300 * stryll)
        + (15 * mech)
        + (20 * bane)
        + (30 * cbane)
        + (60 * hbane)
        + (45 * obane)
        + (75 * mbane)
        + (decimator * 200)
        + exoticatt
    );
    alert('Invasion Attack From Modules: ' + invasionattack.toString());
    invasionattack = invasionattack * decimatormult;
    if (kulgox) {
        invasionattack *= 1.1;
    }
    if (terror) {
        invasionattack *= 1.08;
    }
    alert('Invasion Attack: ' + invasionattack);
}; 
```

# html - 使用 VBA 获取 web 表值

> ID：13789259
> 
> 赞同：-1
> 
> 时间：2012-12-09T16:26:19.340
> 
> 标签：html, vba, web-scraping

我在从[该网站](http://www.bmreports.com/bsp/BMRSSystemData.php?pT=DDAD&zT=N&dT=NRT)提取数据时遇到问题。

我尝试使用 Excel 网络查询（通常适用于网站中的其他页面，但无法检索此特定网站的数据）。

我通过网页的“检查元素”来使用响应文本并操作文本来进行管理，但在这种情况下，我发现正文具有“文本 - 空文本节点”，这使得几乎无法使用文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T03:27:59.670

我不喜欢它，但这是我能想到的最好的。将 Debug.Print 行更改为有用的东西。您需要设置对 Microsoft Internet 控件和 Microsoft HTML 对象库的引用。

```
Public Sub GetReports()

    Dim ie As InternetExplorer
    Dim hDoc As MSHTML.HTMLDocument
    Dim hTbl As MSHTML.HTMLTable

    Set ie = New InternetExplorer
    ie.Navigate2 "http://www.bmreports.com/bsp/BMRSSystemData.php?pT=DDAD&zT=N&dT=NRT"

    Do
        DoEvents
    Loop Until ie.readyState = READYSTATE_COMPLETE

    Set hDoc = ie.document

    Set hTbl = hDoc.getElementsByClassName("tablesorter").Item(0)

    Debug.Print hTbl.innerText

    ie.Quit

End Sub 
```

# javascript - 使用 javascript 将图像替换为 alt 文本

> ID：13789265
> 
> 赞同：0
> 
> 时间：2012-12-09T16:27:06.227
> 
> 标签：javascript, html, image, text, replace

到目前为止，我发现了如何用 html 页面上的另一个元素替换元素。但是我的功能以一种奇怪的方式工作。首先它替换了第一张和第三张图片。如果我再次调用它，它只会替换第二个图像。再次按下按钮，最后最后的第四张图像被替换。有人对此有任何想法吗？这是源代码：[http](http://pastie.org/5502630) ://pastie.org/5502630 在这里你可以看到它是如何工作的：[http ://clubnights.square7.ch/webtech/a2.html](http://clubnights.square7.ch/webtech/a2.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:40:39.363

您正在修改图像列表，因为您正在迭代它。因此，当您尝试访问图像数组时，它不是您认为的那样！下面是一个可能的解决方法..

```
 function Convert()
    {
            images = window.document.getElementsByTagName('img');
            var num_images = images.length;
            for (var i = 0; i < num_images; i++)
            {
                    var image = images[0];
                    textReplacement = document.createTextNode(image.getAttribute('alt'));
                    image.parentNode.replaceChild(textReplacement, image);
            }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T16:59:27.067

每次通过循环时，您都会从数组`for`中删除第一个图像。`images[]`这将更改数组内容和设置为循环中条件的数组长度。

例如，您通过 removes 的第一个循环`images[0]`， ausdruck_1.gif - 但现在 images.length 等于 3，而不是 4，并且数组的内容现在是：

```
images[0]=ausdruck_2.gif
images[1]=ausdruck_3.gif
images[2]=ausdurck_4.gif 
```

您通过循环的第二次删除`images[1]`- 现在是 ausdruck_3.gif - 并进一步将图像数组的长度更改为 2，因此 i 到 2 的下一个增量会导致循环退出。

我创建了一个[jsfiddle](http://jsfiddle.net/joeoravec/VDqGF/)，显示了将 for 语句更改为的可能解决方案：

`for(i = images.length-1; i >=0; i--)`

并以相反的顺序循环播放图像。

# javascript - IE8：在 CSS 悬停期间删除节点会导致悬停状态保持不变

> ID：13789267
> 
> 赞同：0
> 
> 时间：2012-12-09T16:27:18.983
> 
> 标签：javascript, css, internet-explorer, internet-explorer-8

> **可能重复：**
> [Internet Explorer：当目标 DOM 元素在 DOM 中移动时，悬停状态变为粘滞状态](https://stackoverflow.com/questions/7891761/internet-explorer-hover-state-becomes-sticky-when-the-target-dom-element-is-mov)

我正在开发一个系统，可以通过使用附加到表格行的移动弹出菜单将行动态添加到表格中。这个菜单有选项——“在上面添加行”、“在下面添加行”和“删除行”，每个选项的样式都具有 css-hover 背景颜色效果。有一个显示菜单的按钮，当鼠标移到不同的行上时，按钮随之移动。

Internet Explorer 8 在其 CSS 悬停效果处于活动状态时从 DOM 中删除元素似乎存在问题。这样做会导致悬停状态保持不变，因此下次我打开菜单时，它仍然突出显示最后选择的选项。当鼠标移到悬停状态并再次退出时，悬停状态将重置为正常状态。

此问题仅在我更改代码后才开始出现 - 以前我没有在插入之前从行中删除菜单，但我现在删除然后重新附加它。我需要这样做，因为在某些情况下必须从 DOM 中删除菜单（例如，当表格的最后一行被删除时）。

这是已知的行为吗？

```
BulkUpdateTable.prototype.addRow = function (isBefore) {
    var sourceRow = this.rowMod.parentNode.parentNode; // rowMod > td > tr
    sourceRow.firstChild.removeChild(this.rowMod); // Remove menu
    var newRow = sourceRow.cloneNode(true);
    var newRowFirstCell = newRow.firstChild;

    var origTableBody = sourceRow.parentNode;
    var tableBodyCopy = origTableBody.cloneNode(true); // Create in-memory copy of table body (allows for efficient editing without repeated redraws)
    var sourceRowCopy = tableBodyCopy.childNodes[getNodeIndexInParent(sourceRow)]; // Find corresponding row in copied table
    tableBodyCopy.insertBefore(newRow, isBefore ? sourceRowCopy : sourceRowCopy.nextSibling);
    this.incrementIdsFromNode(isBefore ? sourceRowCopy : newRow);
    origTableBody.parentNode.replaceChild(tableBodyCopy, origTableBody); // Replace table with updated copy. Note: Source nodes, event.srcElement, etc are no longer part of document

    this.rowModMenu.style.visibility = 'hidden'; // Dismiss menu
} 
```

# c++ - 用不同颜色的扇区画一个圆环

> ID：13789269
> 
> 赞同：0
> 
> 时间：2012-12-09T16:27:38.780
> 
> 标签：c++, c, opengl

我想使用 OpenGL 库绘制一个带有扇区的环，每个扇区都有不同的颜色。画一个我知道我可以用的戒指`gluDisk(gluNewQuadric(), 0, 1.5, 32, 100);`

但是要以不同的颜色绘制扇区或区域，我认为我需要使用手动方式使用`GL_TRIANGLE_FAN`或类似的方式。

我以这种方式尝试过，但输出对于戒指来说并不那么准确。

```
const float DEG2RAD = 3.14159/180;

glBegin( GL_TRIANGLE_FAN );
        for( int i = 0; i <= 90; i++ )
        {
           float degInRad = i*DEG2RAD;
           glVertex2f(x, y); // point of the inner circle of the ring

           for( int n = 0; n <= 4; n++ ) 
           {
              float const t = = i*DEG2RAD*(n/4);
              glVertex2f(x + sin(t)*r, y + cos(t)*r);  // points of the outer circle.
           }
        }
glEnd(); 
```

这个想法是按照这个`GL_TRIANGLE_FAN`工作原理图，在外圈中取 4 个点，为内圈中计算的每个点。因为外圈比内圈长。这就是循环进入另一个循环的原因。

![OpenGL绘图的类型](../Images/c8274dd8cbaf01c24c6d08096cb58d0d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:08:07.890

您的代码引用了“内圆”和“外圆”，但您所拥有的只是一个中心点（x，y），并且您的外圆点将遍布整个地方，因为您的角度计算不会产生很多感觉（您在外循环中计算一个值，该值在任何地方都没有使用，然后只是将内循环中的所有内容相乘，然后除以 4 来衡量......这不会给你圆圈中的好点）。

无论如何，您不能使用单个三角形扇形来绘制圆环，因为扇形中的所有三角形都必须连接到一个点。没有什么神奇的方法可以在不同的地方重新启动风扇，你只需要 glEnd() 并启动一个新的。这不适用于围绕环进行，因为您会留下空隙。三角扇通常是经典 GL 原语中最没用的一种。

我了解您正在尝试在较小的圆圈中使用较少的积分，但老实说，我看不出这是值得的。

您最好的选择是使用三角形条带，在您的圆圈周围有一个循环，每次都放入内部和外部顶点。

段的伪代码：

```
glBegin(GL_TRIANGLE_STRIP);
for(angle = start_angle; angle < end_angle ; angle += small_increment)
{
    s = sin(angle); c = cos(angle);
    glVertex2f( x + c * r1, y + s * r1);
    glVertex2f( x + c * r2, y + s * r2);
}
glEnd(); 
```

# php - 替换php中每次出现的字符串？

> ID：13789270
> 
> 赞同：0
> 
> 时间：2012-12-09T16:27:38.503
> 
> 标签：php, string, replace, str-replace

我想用 php 做一些简单的替换。

对于第一次出现的 "xampp" ，将其替换为 "xp"。

对于“xampp”的第二次/最后一次出现，将其替换为“rrrr”

```
 $test = "http://localhost/xampp/splash/xampp/.php";

echo $test."<br>";
$count = 0;
$test = str_replace ("xampp","xp",$test,$count);

echo $test."<br>";

$count = 1;
$test = str_replace ("xampp","rrrr",$test,$count);
echo $test; 
```

查看文档后，我发现 $count 是只返回字符串匹配的地方。它不会用指定的特定匹配项替换字符串。那么有什么方法可以完成任务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:42:48.063

您可以使用 来执行此操作`preg_replace_callback`，但`strpos`如果替换不一定是顺序的，则应该更有效。

```
function replaceOccurrence($subject, $find, $replace, $index) {
    $index = 0;

    for($i = 0; $i <= $index; $i++) {
        $index = strpos($subject, $find, $index);

        if($index === false) {
            return $subject;
        }
    }

    return substr($subject, 0, $index) . $replace . substr($subject, $index + strlen($find));
} 
```

[这是一个演示。](http://codepad.viper-7.com/ur6fUu)

# google-maps - Google Maps API for Business 限制

> ID：13789282
> 
> 赞同：2
> 
> 时间：2012-12-09T16:29:34.290
> 
> 标签：google-maps, google-maps-api-3, licensing

试图找出 Google Maps API for Business 的局限性。

似乎每个企业帐户的使用限制为 100K 负载/天（[此处](https://developers.google.com/maps/documentation/business/faq#usage_limits)）。一个企业帐户可以包含多个授权 URL（最多 100 个），这些 URL 可以像域一样通用（[此处](https://developers.google.com/maps/documentation/business/articles/troubleshooting_auth#basics)）。同时，单个网站每天可以免费加载高达 25K 的负载（[此处](https://developers.google.com/maps/faq#usagelimits)）。

所以我的主要问题是 - 似乎商业帐户在使用限制方面并没有给你带来那么多 - 如果你有多个域（例如，8 个域将有 200K 的组合限制 (25Kx8) 在免费案例，但如果使用企业帐户，则只有 100K）。它是这样工作的吗？

一个较小的问题：对哪些 URL 可以授权有限制吗？（即，它们是否必须在同一个 TLD 内）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:45:35.757

如果您已经拥有 M4B 许可证，我建议您联系 M4B 技术支持团队： [https ://developers.google.com/maps/documentation/business/faq#support](https://developers.google.com/maps/documentation/business/faq#support)

如果您没有访问权限，但正在使用 M4B，请填写此表单： http: [//support.google.com/enterprisehelp/bin/answer.py ?hl=en&answer=142246#q3](http://support.google.com/enterprisehelp/bin/answer.py?hl=en&answer=142246#q3)

您想要 M4B 许可证的原因有很多。一些客户购买它是为了 interbal 综合浏览量，一些是为了增加 Web 服务配额，还有一些是为了技术支持和 SLA。

如果您想了解更多信息，可以联系 Google 销售团队： [http ://www.google.com/enterprise/earthmaps/maps.html](http://www.google.com/enterprise/earthmaps/maps.html)

关于 TLD，答案是否定的。它们可以是任何 http 或 https URL。

高温高压

# android - 锁定水平滚动视图 - Android

> ID：13789285
> 
> 赞同：0
> 
> 时间：2012-12-09T16:29:48.067
> 
> 标签：android, locking, horizontal-scrolling

我正在编写一个应用程序，它看起来像这样：

![图片1](../Images/764b90d317bbc6b78dc8da9c45ef341e.png)

您如何看到顶部有 SeekBar，下面的 Horizo​​ntalScrollView 中有几个按钮。我想使用 SeekBar 来滚动按钮，现在这工作正常，但我无法关闭滚动视图（拖动屏幕）的默认方式。我在论坛上找到了类似的话题：

[相似主题](https://stackoverflow.com/questions/6090163/fingerpaint-within-a-horizontalscrollview)

但问题是，这种方式锁定了整个 ScrollView，我不能通过 seekBar 和默认方式使用它 - 也许我做错了什么（我在链接中做了同样的事情，即使我在 mScrollable 中有 TRUE 这也没有用范围）。第二个问题是我的按钮（具有 fill_parent 高度参数）非常小。

问题：有什么好的方法可以默认锁定滚动视图并使用 SeekBar 来做到这一点？

我的代码（默认 Horizo​​ntalScrollView）：

```
 public class MainActivity extends Activity implements SeekBar.OnSeekBarChangeListener {

    static private String TAG = "MainActivity";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

        SeekBar seek = (SeekBar) findViewById(R.id.seekBar);
        final HorizontalScrollView hsv = (HorizontalScrollView)findViewById(R.id.hsv);      

        seek.setMax(948);
        seek.setProgress(474);
        seek.setOnSeekBarChangeListener(this);
        hsv.post(new Runnable() {
            @Override
            public void run() {
                hsv.scrollTo(474, 0);
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromTouch) {
        HorizontalScrollView hsv = (HorizontalScrollView)findViewById(R.id.hsv);
        hsv.scrollTo(progress, 0);
    }

    @Override
    public void onStartTrackingTouch(SeekBar seekBar) {
        Log.d(TAG, "Tracking on");
    }

    @Override
    public void onStopTrackingTouch(SeekBar seekBar) {
        Log.d(TAG, "Tracking off");

    } 
```

活动主：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#0A0A0A"
    android:orientation="vertical" >

    <SeekBar
        android:id="@+id/seekBar"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <HorizontalScrollView
        android:id="@+id/hsv"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:scrollbars="none" >

        <RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:orientation="horizontal" >

           <!-- BUTTONS CODE - NOT IMPORTANT --> 

        </RelativeLayout>
    </HorizontalScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:55:49.610

> 有什么好的方法可以以默认方式锁定滚动视图并使用 SeekBar 来做到这一点？

**编辑：**

解决方案似乎要简单得多，重写`HorizontalScrollView`类并通过视图传递触摸事件：

```
public class MyHScroll extends HorizontalScrollView {

    // the constructors

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        return false;
    }

} 
```

在布局中使用此类而不是默认的`HorizontallScrollView`：

```
<com.your.package.MyHScroll
    android:id="@+id/hsv"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:scrollbars="none" >

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:orientation="horizontal" >

       <!-- BUTTONS CODE - NOT IMPORTANT --> 

    </RelativeLayout>
</com.your.package.MyHScroll> 
```

* * *

尝试在顶部放置一个覆盖视图`HorizontalScrollView`以“吸收”触摸事件，而不会弄乱它`HorizontalScrollView`本身：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#0A0A0A"
    android:orientation="vertical" >

    <SeekBar
        android:id="@+id/seekBar"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
    <FrameLayout android:layout_width="wrap_content"
        android:layout_height="fill_parent">

    <HorizontalScrollView
        android:id="@+id/hsv"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:scrollbars="none" >

        <RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:orientation="horizontal" >

           <!-- BUTTONS CODE - NOT IMPORTANT --> 

        </RelativeLayout>
    </HorizontalScrollView>

    <View android:id="@+id/overlay" android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

    </FrameLayout

</LinearLayout> 
```

然后`OnTouchListener`在方法中为覆盖小部件添加一个`onCreate`以进一步阻止触摸事件：

```
findViewById(R.id.overlay).setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            return true;
        }
    }); 
```

> 第二个问题是我的按钮（具有 fill_parent 高度参数）非常小。

请参阅上面的布局文件。

# firebird - 如何解决“递归 CTE 成员只能在 FROM 子句中引用自身”的要求？

> ID：13789286
> 
> 赞同：1
> 
> 时间：2012-12-09T16:29:55.383
> 
> 标签：firebird, common-table-expression

我正在尝试运行图形搜索以查找从起点可访问的所有节点，如下所示：

```
with recursive
  nodes_traversed as (
    select START_NODE ID
    from START_POSITION

    union all
    select ed.DST_NODE
    from EDGES ed
    join nodes_traversed NT
      on (NT.ID = ed.START_NODE)
      and (ed.DST_NODE not in (select ID from nodes_traversed))
  )
select distinct * from nodes_traversed 
```

不幸的是，当我尝试运行它时，我收到一个错误：

> 递归 CTE 成员 (nodes_traversed) 只能在 FROM 子句中引用自己。

但是，“not in select”子句对递归表达式很重要，因为它提供了结束点。（没有它，您将获得无限递归。）使用世代计数，就像在[这个问题的公认答案中](https://stackoverflow.com/questions/634971/sql-server-how-to-limit-cte-recursion-to-rows-just-recursivly-added)一样，将无济于事，因为这是一个高度循环的图。

有没有办法解决这个问题，而不必创建一个迭代的存储过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T01:40:44.050

这是我使用全局临时表的解决方案，我限制了临时表中的级别和节点的递归。我不确定它将如何处理大量数据。

```
create procedure get_nodes (
    START_NODE integer)
returns (
    NODE_ID integer)
as
declare variable C1 integer;
declare variable C2 integer;
begin

    /**
    create global temporary table id_list(
        id integer
    );
    create index id_list_idx1 ON id_list (id);
    */
    delete from id_list;

    while ( 1 = 1 ) do
    begin
        select count(distinct id) from id_list into :c1;

        insert into id_list
        select id from
            (
                with recursive nodes_traversed as (
                select :START_NODE AS ID , 0 as Lv
                from  RDB$DATABASE

                union all
                select ed.DST_NODE , Lv+1
                from  edges ed

                join nodes_traversed NT
                  on
                  (NT.ID = ed.START_NODE)
                  and nt.Lv < 5 -- Max recursion level
                  and nt.id not in (select id from id_list)
            )
        select distinct id from nodes_traversed);

        select count(distinct id) from id_list into :c2;
        if (c1 = c2) then break;
    end

    for select distinct  id from id_list into :node_id do
    begin
        suspend ;
    end
end 
```

# .htaccess - 修改此重写以忽略查询字符串中的 .php 扩展名？

> ID：13789287
> 
> 赞同：0
> 
> 时间：2012-12-09T16:29:58.223
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

此重写规则可以很好地删除 .php 扩展名，但在查询字符串中传递文件名的情况下，它也会尝试删除那里的扩展名。如何让它忽略查询字符串？

```
RewriteCond %{THE_REQUEST} ^GET\ (.*)\.php\ HTTP
RewriteRule (.*)\.php$ $1 [R=301] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:12:00.147

您需要使`(.*)`重写条件中的匹配更加严格。现在，它正在匹配 URI*或*查询字符串。尝试：

```
RewriteCond %{THE_REQUEST} ^GET\ ([^\?]+)\.php
RewriteRule (.*)\.php$ $1 [R=301] 
```

将`[^\?]+`匹配任何不是`?`. 删除`\ HTTP`确保查询字符串可以跟在`.php`.

# android - 需要帮助了解我的 Android 应用程序中的内存泄漏

> ID：13789289
> 
> 赞同：12
> 
> 时间：2012-12-09T16:30:25.930
> 
> 标签：android, memory-leaks, out-of-memory, heap-memory

我的应用程序运行良好，直到我在安装后第一次启动时中断初始化过程，只要初始化过程尚未完成，就退出并启动应用程序几次。处理逻辑和 AsyncTask 可以很好地处理这个问题，所以我没有得到任何不一致的地方，但是堆有问题。当我在应用程序设置中执行此令人不安的退出和启动时，它会越来越多，这将导致 OutOfMemory 错误。通过使用 MAT 分析堆，我已经发现了一个泄漏，但我仍然有另一个泄漏，我还无法隔离。
背景信息：我将应用程序上下文、列表和时间戳存储在一个静态类中，以便能够从应用程序中任何位置的类访问它，而无需使用构造函数传递的繁琐引用。无论如何，这个静态类（ApplicationContext）一定有问题，因为它会由于区域列表而导致内存泄漏。区域对象是经过处理的 GeoJSON 数据。这是这个类的样子：

```
public class ApplicationContext extends Application {
    private static Context context;
    private static String timestamp;
    private static List<Zone> zones = new ArrayList<Zone>();

    public void onCreate()  {
        super.onCreate();
        ApplicationContext.context = getApplicationContext();
    }

    public static Context getAppContext() {
        return ApplicationContext.context;
    }

    public static List<Zone> getZones() {
        return zones;
    }

    public static void setData(String timestamp, List<Zone> zones) {
        ApplicationContext.timestamp = timestamp;
        ApplicationContext.zones = zones;
    }

    public static String getTimestamp() {
        return timestamp;
    }
} 
```

我已经尝试像这样存储区域

> ApplicationContext.zones = new ArrayList(zones);

但它没有效果。我已经尝试将 zone 属性放入另一个静态类，因为 ApplicationContext 在所有其他类之前加载（由于 AndroidManifest 中的条目），这可能导致这种行为，但这也不是问题。

setData 在我的“ProcessController”中被调用了两次。一次在 doUpdateFromStorage 中，一次在 doUpdateFromUrl(String) 中。这个类看起来像这样：

```
public final class ProcessController {
    private HttpClient httpClient = new HttpClient();

    public final InitializationResult initializeData()  {
        String urlTimestamp;
        try {
            urlTimestamp = getTimestampDataFromUrl();

            if (isModelEmpty())  {
                if (storageFilesExist())  {
                    try {
                        String localTimestamp = getLocalTimestamp();

                        if (isStorageDataUpToDate(localTimestamp, urlTimestamp))  {
                            return doDataUpdateFromStorage();
                        } 
                        else  {
                            return doDataUpdateFromUrl(urlTimestamp);
                        }
                    } 
                    catch (IOException e) {
                        return new InitializationResult(false, Errors.cannotReadTimestampFile());
                    }
                }
                else  {
                    try {
                        createNewFiles();

                        return doDataUpdateFromUrl(urlTimestamp);
                    } 
                    catch (IOException e) {
                        return new InitializationResult(false, Errors.fileCreationFailed());
                    }
                }
            }
            else  {
                if (isApplicationContextDataUpToDate(urlTimestamp))  {
                    return new InitializationResult(true, "");  
                }
                else  {
                    return doDataUpdateFromUrl(urlTimestamp);
                }
            }
        } 
        catch (IOException e1) {
            return new InitializationResult(false, Errors.noTimestampConnection());
        }
    }

    private String getTimestampDataFromUrl() throws IOException {
        if (ProcessNotification.isCancelled()) {
            throw new InterruptedIOException();
        }

        return httpClient.getDataFromUrl(FileType.TIMESTAMP);
    }

    private String getJsonDataFromUrl() throws IOException {
        if (ProcessNotification.isCancelled()) {
            throw new InterruptedIOException();
        }

        return httpClient.getDataFromUrl(FileType.JSONDATA);
    }

    private String getLocalTimestamp() throws IOException {
        if (ProcessNotification.isCancelled()) {
            throw new InterruptedIOException();
        }

        return PersistenceManager.getFileData(FileType.TIMESTAMP);
    }

    private List<Zone> getLocalJsonData() throws IOException, ParseException {
        if (ProcessNotification.isCancelled()) {
            throw new InterruptedIOException();
        }

        return JsonStringParser.parse(PersistenceManager.getFileData(FileType.JSONDATA));
    }

    private InitializationResult doDataUpdateFromStorage() throws InterruptedIOException {
        if (ProcessNotification.isCancelled()) {
            throw new InterruptedIOException();
        }

        try {
            ApplicationContext.setData(getLocalTimestamp(), getLocalJsonData());

            return new InitializationResult(true, "");
        } 
        catch (IOException e) {
            return new InitializationResult(false, Errors.cannotReadJsonFile());
        } 
        catch (ParseException e) {
            return new InitializationResult(false, Errors.parseError());
        }
    }

    private InitializationResult doDataUpdateFromUrl(String urlTimestamp) throws InterruptedIOException {
        if (ProcessNotification.isCancelled()) {
            throw new InterruptedIOException();
        }

        String jsonData;
        List<Zone> zones;
        try {
            jsonData = getJsonDataFromUrl();
            zones = JsonStringParser.parse(jsonData);

            try {
                PersistenceManager.persist(jsonData, FileType.JSONDATA);
                PersistenceManager.persist(urlTimestamp, FileType.TIMESTAMP);

                ApplicationContext.setData(urlTimestamp, zones);

                return new InitializationResult(true, "");
            } 
            catch (IOException e) {
                return new InitializationResult(false, Errors.filePersistError());
            }
        } 
        catch (IOException e) {
            return new InitializationResult(false, Errors.noJsonConnection());
        } 
        catch (ParseException e) {
            return new InitializationResult(false, Errors.parseError());
        }
    }

    private boolean isModelEmpty()  {
        if (ApplicationContext.getZones() == null || ApplicationContext.getZones().isEmpty())  {    
            return true;
        }

        return false;
    }

    private boolean isApplicationContextDataUpToDate(String urlTimestamp) { 
        if (ApplicationContext.getTimestamp() == null)  {
            return false;
        }

        String localTimestamp = ApplicationContext.getTimestamp();

        if (!localTimestamp.equals(urlTimestamp))  {
            return false;
        }

        return true;
    }

    private boolean isStorageDataUpToDate(String localTimestamp, String urlTimestamp) { 
        if (localTimestamp.equals(urlTimestamp))  {
            return true;
        }

        return false;
    }

    private boolean storageFilesExist()  {
        return PersistenceManager.filesExist();
    }

    private void createNewFiles() throws IOException {
        PersistenceManager.createNewFiles();
    }
} 
```

也许这是另一个有用的信息，这个 ProcessController 是由我的 MainActivity 的 AsyncTask 在应用程序设置中调用的：

```
public class InitializationTask extends AsyncTask<Void, Void, InitializationResult> {
    private ProcessController processController = new ProcessController();
    private ProgressDialog progressDialog;
    private MainActivity mainActivity;
    private final String TAG = this.getClass().getSimpleName();

    public InitializationTask(MainActivity mainActivity) {
        this.mainActivity = mainActivity;
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();

        ProcessNotification.setCancelled(false);

        progressDialog = new ProgressDialog(mainActivity);
        progressDialog.setMessage("Processing.\nPlease wait...");
        progressDialog.setIndeterminate(true); //means that the "loading amount" is not measured.
        progressDialog.setCancelable(true);
        progressDialog.show();
    };

    @Override
    protected InitializationResult doInBackground(Void... params) {
        return processController.initializeData();
    }

    @Override
    protected void onPostExecute(InitializationResult result) {
        super.onPostExecute(result);

        progressDialog.dismiss();

        if (result.isValid())  {
            mainActivity.finalizeSetup();
        }
        else  {
            AlertDialog.Builder dialog = new AlertDialog.Builder(mainActivity);
            dialog.setTitle("Error on initialization");
            dialog.setMessage(result.getReason());
            dialog.setPositiveButton("Ok",
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            dialog.cancel();

                            mainActivity.finish();
                        }
                    });

            dialog.show();
        }

        processController = null;
    }

    @Override
    protected void onCancelled() {
        super.onCancelled();

        Log.i(TAG, "onCancelled executed");
        Log.i(TAG, "set CancelNotification status to cancelled.");

        ProcessNotification.setCancelled(true);

        progressDialog.dismiss();

        try {
            Log.i(TAG, "clearing files");

            PersistenceManager.clearFiles();

            Log.i(TAG, "files cleared");
        } 
        catch (IOException e) {
            Log.e(TAG, "not able to clear files.");
        }

        processController = null;

        mainActivity.finish();
    }
} 
```

这是 JSONParser 的主体。**（更新：我将方法设置为非静态，但问题仍然存在。）**我省略了 JSON 对象中的对象创建，因为我认为这不是错误：

```
public class JsonStringParser {
    private static String TAG = JsonStringParser.class.getSimpleName();

    public static synchronized List<Zone> parse(String jsonString) throws ParseException, InterruptedIOException {
        JSONParser jsonParser = new JSONParser();

        Log.i(TAG, "start parsing JSON String with length " + ((jsonString != null) ? jsonString.length() : "null"));
          List<Zone> zones = new ArrayList<Zone>();

        //does a lot of JSON parsing here

        Log.i(TAG, "finished parsing JSON String");

        jsonParser = null;

        return zones;
    }
} 
```

这是显示问题的堆转储：

![内存图](../Images/93abb98cc2c51865dbbb0452807e29b5.png)

这是详细信息列表，表明此问题与数组列表有关。

![细节](../Images/08d1a4c79b8d7c2f2f086266fa4a9a1a.png)

有什么想法吗？顺便说一句：我不知道其他泄漏是什么，因为没有详细信息。

**可能很重要**：此图显示了我一遍又一遍地不启动和停止应用程序时的状态。这是一个干净的开始的图表。但是当我多次启动和停止时，由于空间不足，可能会导致问题。

这是一个真实崩溃的图表。我在初始化时启动和停止了应用程序几次：

![崩溃报告](../Images/97a9070a60656feac9a408487bc64277.png)

**[更新]**
我通过不将 Android 上下文存储到我的 ApplicationContext 类并使 PersistenceManager 非静态来缩小范围。问题没有改变，所以我绝对确定它与我在全球存储 Android 上下文的事实无关。它仍然是上图中的“问题嫌疑人 1”。所以我必须对这个庞大的列表做点什么，但是什么？我已经尝试对其进行序列化，但取消序列化此列表所需的时间远远超过 20 秒，因此这不是一个选项。

现在我尝试了一些不同的东西。我踢出了整个 ApplicationContext 所以我**没有任何静态引用**了。我试图在 MainActivity 中保存 Zone 对象的 ArrayList。尽管我至少重构了使应用程序运行所需的部分，所以我什至没有将 Array 或 Activity 传递给我需要它的所有类，但我仍然以不同的方式遇到同样的问题，所以我的猜测是Zone 对象本身就是问题所在。或者我无法正确读取堆转储。请参阅下面的新图表。这是一个没有干扰的简单应用程序启动的结果。

**[更新]**
我得出的结论是没有内存泄漏，因为**“内存是在一个实例中累积的”**听起来不像是泄漏。问题是一遍又一遍地启动和停止会启动新的 AsyncTask，如一张图所示，因此解决方案是不启动新的 AsyncTask。我在 SO 上找到了一个可能的解决方案，但它还不适合我。

![记忆错误 4](../Images/aeff835a412ff6ba26a131c98215c8d7.png) ![内存错误 5](../Images/52f7bdca1c5445d28719ca1eed8f441e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T07:59:04.470

在您的 AsyncTask 中，您拥有对 Context 的引用：MainActivity。当您启动多个 AsyncTask 时，它们将由 ExecutorService 排队。因此，如果所有 AsyncTask 长时间运行，它们将是“活动的”（不是垃圾收集）。他们每个人都会在一个活动上保留一个参考。因此，您的所有活动也将保持活力。

这是一个真正的内存泄漏，因为 Android 将希望对不再显示的 Activity 进行垃圾收集。你的 AsyncTasks 会阻止这种情况。所有的活动都保存在记忆中。

我鼓励您尝试[RoboSpice Motivations](https://play.google.com/store/apps/details?id=com.octo.android.robospice.motivations&feature=nav_result#?t=W251bGwsMSwyLDNd)以了解有关此问题的更多信息。在这个应用程序中，我们解释了为什么不应该将 AsyncTasks 用于长时间运行的操作。仍然有一些解决方法可以让您使用它们，但它们很难实现。

解决此问题的一种方法是使用[Wea​​kReference](http://developer.android.com/reference/java/lang/ref/WeakReference.html)指向 AsyncTask 类中的活动。如果你小心使用它们，你可以避免你的活动不被垃圾收集。

实际上，[RoboSpice](https://github.com/octo-online/robospice)是一个允许在服务内部执行网络请求的库。这种方法非常有趣，因为它将创建一个与您的活动无关的上下文（服务）。因此，您的请求可以根据需要进行，并且不会干扰 Android 的垃圾收集行为。

RoboSpice 有两个模块可用于处理 REST 请求。一个用于 Spring Android，另一个用于 Google Http Java Client。这两个库都将简化 JSON 解析。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T19:05:44.497

首先，我必须同意 Emile：

> “......繁琐的构造函数传递引用”有助于避免此类问题。老实说，以这种方式使用静态肯定是造成这样的内存泄漏的一种方法，尤其是在对您的上下文进行静态引用的情况下。

这也适用于代码中的所有其他`static`方法。`static`方法与全局函数并没有真正的不同。您正在那里构建一个充满`static`方法的大意大利面盘。尤其是当他们开始共享某些状态时，它迟早会崩溃或产生模糊的结果，这是通过适当的设计无法获得的，尤其是在 Android 等高度多线程的平台存在的情况下。

还引起我注意的是，请注意，在完成之前不会调用的`onCancelled`方法。因此，您的全局取消标志 ( ) 或多或少毫无价值（如果仅在显示的代码段落中使用）。`AsyncTask``doInBackground``ProcessNotification.isCancelled()`

同样从您发布的记忆图像中，该`zones`列表“仅”包含 31 个项目。它应该持有多少？它增加了多少？如果它真的增加了，罪魁祸首可能在`JsonStringParser.parse`方法中，这又是`static`. 如果它在某个缓存中保存了项目列表并且控制逻辑无法正常工作（例如，在存在多个线程同时访问它的情况下），它可能会在每次调用时将项目添加到该缓存中。

*   猜想一：由于解析方式是`static`，所以当应用程序关闭时，这些数据没有（必要）被清理。`static`s 被初始化一次，在这种情况下，在（物理 vm-）进程停止之前永远不会取消初始化。然而，即使应用程序停止，Android 也不保证进程会被终止（[请参阅此处的精彩解释](https://stackoverflow.com/questions/1944369/android-static-object-lifecycle-application-act-crazy)）。`static`因此，您可能会在（可能是解析）代码的某些部分中积累一些数据。
*   猜测 2：由于您要多次重新启动应用程序，因此后台线程会并行运行多次（假设：每次重新启动应用程序时都会产生一个新线程。请注意，您的代码对此没有任何防范措施。）第一次解析仍在运行，由于全局`zones`变量仍然没有值，因此启动了另一个解析。全局函数`parse`可能不是线程安全的，并且将多个数据多次放入最终返回的列表中，从而产生越来越大的列表。同样，这通常可以通过没有`static`方法来避免（并注意多线程）。

（代码不完整，因此猜测，甚至可能还有其他东西潜伏在那里。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-16T06:05:56.667

我假设您修复了对 MainActivity 的引用，但我想提另一个问题...

您声明解析需要 20 秒。如果你“中断”应用程序，这个处理过程不会消失。

从您在此处显示的代码来看，这 20 秒的 99% 似乎都花在了 JsonStringParser.parse() 中。

如果我查看您的评论“在此处进行大量 JSON 解析”，我假设您的应用程序调用 JSONParser.something() 并保持 20 秒。尽管 JsonStringParser 是静态的，但每次调用 JsonStringParser.parse() 都会创建 JSONParser() 的新副本，我猜这会占用大量内存。

需要 20 秒的后台进程是一项非常艰巨的任务，在我使用 JSON 解析器时看到的情况，此时会创建和销毁大量对象，并消耗大量周期。

所以我认为你的根本原因是你启动了 JSONParser.something() 的第二个（或第三个或第四个）副本，因为它们每个都将独立执行并尝试分配许多内存块，并且运行时间甚至超过 20 秒因为他们将不得不共享 CPU 周期。多个 JSONParser 对象的组合内存分配会扼杀您的系统。

总结一下：

*   在第一个被杀死或完成之前，不要启动另一个 JsonStringParser.parse()。
*   这意味着您必须找到一种方法来在“中断”应用程序时停止 JsonStringParser.parse()，或者在重新启动应用程序时重新使用正在运行的副本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T08:58:49.433

我想我知道这怎么可能，但我的眼睛已经斜视了。

检查您是否没有从本地存储加载数据，向其中添加更多数据，然后将其保存回本地磁盘。

将以下方法与程序的其他部分结合起来。

如果调用了以下内容，然后您出于某种原因调用 getDatafromURL，那么我相信您会不断增长您的数据集。

这至少是我的出发点。加载、附加和保存。

```
ApplicationContext.setData(getLocalTimestamp(), getLocalJsonData());

private List<Zone> getLocalJsonData() throws IOException, ParseException {
    if (ProcessNotification.isCancelled()) {
        throw new InterruptedIOException();
    }

    return JsonStringParser.parse(PersistenceManager.getFileData(FileType.JSONDATA));
} 
```

否则我认为问题在于您的解析代码，或者可能是您用来保存数据的静态类之一。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-23T16:01:32.200

**我的最终解决方案**

我现在自己找到了解决方案。当我多次启动和停止应用程序时，它运行稳定并且不会产生内存泄漏。这个解决方案的另一个优点是我能够踢掉所有这些`ProcessNotification.isCancelled()`部分。

关键是在我的 ApplicationContext 中保存对我的 InitializationTask 的引用。使用这种方法，当我开始一个新的 MainActivity 时，我可以在一个新的 MainActivity 中恢复正在运行的 AsyncTask。这意味着我永远不会启动多个 AsyncTask，但我会将每个新 MainActivity 实例附加到当前正在运行的任务。旧的 Activity 将被分离。这看起来像这样：

**ApplicationContext 中的新方法：**

```
public static void register(InitializationTask initializationTask) {
    ApplicationContext.initializationTask = initializationTask;
}

public static void unregisterInitializationTask()  { 
    initializationTask = null;
}

public static InitializationTask getInitializationTask() {
    return initializationTask;
} 
```

**MainActivity
（我必须把progressDialog放在这里，否则如果我停止并启动一个新的Activity它就不会显示）：**

```
@Override
protected void onStart() {
    super.onStart();

    progressDialog = new ProgressDialog(this);
    progressDialog.setMessage("Processing.\nPlease wait...");
    progressDialog.setIndeterminate(true); // means that the "loading amount" is not measured.
    progressDialog.setCancelable(true);
    progressDialog.show();

    if (ApplicationContext.getInitializationTask() == null) {
        initializationTask = new InitializationTask();
        initializationTask.attach(this);

        ApplicationContext.register(initializationTask);

        initializationTask.execute((Void[]) null);
    } 
    else {
        initializationTask = ApplicationContext.getInitializationTask();

        initializationTask.attach(this);
    }
} 
```

MainActivity 的“onPause”包含`initializationTask.detach();`和`progressDialog.dismiss();`. `finalizeSetup();`也关闭对话框。

**InitializationTask 包含另外两个方法：**

```
public void attach(MainActivity mainActivity) {
    this.mainActivity = mainActivity;
}

public void detach() {
    mainActivity = null;
} 
```

**onPostExecute**的任务调用`ApplicationContext.unregisterInitializationTask();`。

# jquery - onblur 用户名可用性检查

> ID：13789290
> 
> 赞同：0
> 
> 时间：2012-12-09T16:30:36.243
> 
> 标签：jquery, ajax

我正在使用 jquery ajax 在模糊上使用用户名

respose 可以进入 firebug

我的问题是加载图像一直在旋转。

Firebug 控制台中的 ReferenceError：finishAjax 未定义

setTimeout("finishAjax('Info', '"+escape(response)+"')", 450); 这是它

```
<script type="text/javascript" src="jquery-1.3.2.js"></script>
<link href="css.css" media="screen" rel="stylesheet" type="text/css" />

<script type="text/javascript">

function check_username() {

$.post("check_username_availablity.php", {
username: $('#name').val(),
}, function(response){
//$('#Info').fadeOut();
//$('#Loading').hide();
setTimeout("finishAjax('Info', '"+escape(response)+"')", 450);
});

function finishAjax(id, response) {

$('#'+id).html(unescape(response));
//$('#'+id).fadeIn(1000);
}

}
</script>

</head>
<?php
include('dbcon.php');?>
<body>

<form action="#" name="customForm" id="customForm" method="post" enctype="multipart/form-data">

<div class="both">
<h4> Try "Zeeshan" , "John" , "Katty", "Jimmy" </h4><br clear="all" /><br clear="all" />
<br clear="all" />
<div>
<label>User Name</label>
<input id="name" name="username" type="text" value="" onblur="check_username()"/>
<div id="Info"></div>
<span id="Loading"><img src="loader.gif" alt="" /></span>
</div>
</div>

</form>

</body>
</html>

<?php
include('dbcon.php');
if($_REQUEST)
{
$username   = $_REQUEST['username'];
$query = "select * from register where username = '".strtolower($username)."'";
$results = mysql_query( $query) or die('ok');

if(mysql_num_rows(@$results) > 0) // not available
{
echo '<div id="Error">Already Taken</div>';
}
else
{
echo '<div id="Success">Available</div>';
}

}?> 
```

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:32:39.647

您需要将函数名称传递给 setTimeout 而不是调用它，或者您可以使用匿名函数将函数调用它的主体。

```
setTimeout(function(){
     finishAjax('Info', escape(response))
}
, 450);​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T16:35:37.077

如果您使用 a `setTimeout`，则您的函数需要关闭响应变量。尝试这个：

```
function(response){
    setTimeout(function(){
        finishAjax('Info', escape(response));
    }, 
    450);
}); 
```

# ruby-on-rails - 删除友谊

> ID：13789295
> 
> 赞同：0
> 
> 时间：2012-12-09T16:31:08.983
> 
> 标签：ruby-on-rails

一直试图解决这个问题，但无法弄清楚我做错了什么。我只是想破坏两个用户之间的友谊。

视图如下所示：

### 友谊/index.html.erb

```
<% @users.each do |user| %>

<% if user.id != current_user.id %> 
<%=h user.name %> 
<%if current_user.is_friend? user %>
<%= link_to "Destroy", friendships_path(:friend_id => user), :method => :delete %> 

<%else%>
<%= link_to "Add friend", friendships_path(:friend_id => user), :method => :post %> 
<% end %>
 <% end %>

<% end %> 
```

### 友谊控制器

```
 def index
      @users = User.all
    end

    def show
     @user = current_user
    end

 def create
   @friendship = current_user.friendships.build(:friend_id => params[:friend_id])
   if @friendship.save
     flash[:notice] = "Added friend."
     redirect_to root_url
   else
     flash[:error] = "Error occurred when adding friend."
     redirect_to root_url
   end
 end

def destroy
  @friendship = current_user.friendships.find(params[:id])
  @friendship.destroy
  flash[:notice] = "Successfully destroyed friendship."
  redirect_to root_url
end 
```

我收到此错误：

> 没有路线匹配 [DELETE] "/friendships"

但是，当我运行 rake 路线时，我似乎有路径：

```
 friendship GET    /friendships/:id(.:format)         friendships#show
                PUT    /friendships/:id(.:format)         friendships#update
                DELETE /friendships/:id(.:format)         friendships#destroy 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T17:55:53.427

这条线

```
<%= link_to "Destroy", friendships_path(:friend_id => user), :method => :delete %> 
```

应该看起来像

```
<%= link_to "Destroy", friendship_path(friendship), :method => :delete %> 
```

（单数，不是复数形式）

是 Friendship 对象的`friendship`一个​​实例，获取方式取决于模型代码。最有可能的是，像

```
<%= link_to "Destroy", friendship_path(current_user.friendships.find_by_friend_id(user)), :method => :delete %> 
```

应该管用。

# r - 强大的se。(vcovHC) 在 R 中与 texreg 一起显示

> ID：13789303
> 
> 赞同：3
> 
> 时间：2012-12-09T16:31:59.020
> 
> 标签：r, latex, regression, texreg

我正在使用 plm 包进行一些回归，然后如果需要，我还会获得异方差一致系数。以下是我运行的命令；

```
 library(plm)
   data("Produc", package = "plm")
   zz <- plm(log(gsp) ~ log(pcap) + log(pc) + log(emp) + unemp, 
             data = Produc, index = c("state","year"))

   summary(zz)

   coeftest(zz, vcovHC) 
```

我的问题从这里开始。下面是在 texreg 的帮助下获取 Latex 输出的命令列表。如何将使用 coeftest 命令获得的结果集成到 Latex 输出中？

```
latex_reg <- texreg(list(coeftest_result),
                    scriptsize=TRUE) 

sink(file="/home/heimatlos/R_outputs/reg_jumps.tex", type="output") 
```

操作系统：Debian Squeeze AMD64

R 版本 2.15.2 (2012-10-26)

texreg 版本：1.15

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T23:23:43.033

texreg 1.17 版可以做到这一点。请参阅[此处的要点 3](https://r-forge.r-project.org/forum/forum.php?thread_id=26680&forum_id=4325&group_id=1420)。

# java - Galaxy S2 未显示自定义可绘制的进度

> ID：13789306
> 
> 赞同：1
> 
> 时间：2012-12-09T16:32:11.377
> 
> 标签：java, android

我的应用程序有问题 - 大多数负面用户评论来自 Galaxy S2 用户，并报告说我的进度条在应用程序中不起作用。我已经测试了大多数 Android 版本的进度条，我没有遇到任何问题，Galaxy S2（可能还有 S3）似乎就是这种情况。

他们报告进度条保持灰色。

以下是我的可绘制对象：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@android:id/background">
<shape>
    <corners android:radius="5dip" />
    <gradient
            android:startColor="#ff9d9e9d"
            android:centerColor="#ff5a5d5a"
            android:centerY="0.75"
            android:endColor="#ff747674"
            android:angle="270" />
</shape>
</item>
<item android:id="@android:id/secondaryProgress">
<clip>
    <shape>
        <corners android:radius="5dip" />
        <gradient
                android:startColor="#ff1cb51c"
                android:endColor="#ff106b10"
                android:angle="270" />
    </shape>
</clip>
</item>
<item android:id="@android:id/progress">
<clip>
    <shape>
        <corners android:radius="5dip" />
        <gradient
            android:startColor="#ffC71818"
            android:endColor="#ff821F1F"
            android:angle="270" />
    </shape>
</clip></item></layer-list> 
```

简而言之：

1.  背景是灰色的
2.  常规进度颜色为红色
3.  次要进度为绿色。

然后，我有代码可以在 arrayAdapter 中显示常规进度或次要进度之间切换：

```
if (p.getBoughtGifts().size() == p.getGifts().size()) {
  progress.setMax(Math.round(p.getBudget()));
  progress.setProgress(0);
  progress.setSecondaryProgress(Math.round(p.getProgress()));
} else {
  progress.setMax(Math.round(p.getBudget()));
  progress.setProgress(Math.round(p.getProgress()));
  progress.setSecondaryProgress(0);
} 
```

谁能想到会导致 Galaxy S2/S3 出现问题的任何事情？这是 Touchwiz 中的错误吗？如果我没有真正的设备，有什么方法可以模拟三星 Galaxy S2 设备？

提前致谢！

# java - 当 wait() 不可用时节省 CPU

> ID：13789307
> 
> 赞同：0
> 
> 时间：2012-12-09T16:32:35.930
> 
> 标签：java, android, multithreading, wait

我的组件集成到第三方组件。我必须重写由第三方组件`onTick()`的高优先级调用的方法。`Thread`示例代码：

```
@Override
public void onTick() {

    // do many useful operations

} 
```

在某些情况下，这种`onTick()`方法不应该执行那些“许多有用的操作”，因为它们的结果被丢弃了。实际上，`onTick()`在这种情况下根本不需要 的功能，但是第三方组件不提供任何“暂停”或“睡眠”功能。`onTick()` **它一直在**呼唤。这意味着 CPU 时间在这些特殊时期被不必要地耗尽了。

最直接的解决方案是通过适当的块向其发送信号`onTick()`并使其线程休眠。但是，第三方组件的文档声明不应将其任意发送到等待状态。`Object.wait()``synchronized``Thread`

在这种情况下有什么解决方案可以节省 CPU 资源吗？也就是让别人使用CPU？我创建了以下解决方案，但我不确定它是否允许节省任何 CPU。（尽管如此，它至少应该节省“有用的操作”部分使用的其他资源`onTick()`）。

```
@Override
public void onTick() {

        // mJustUnpaused is volatile. Race condition, but probably harmless (?)
        if (mJustUnpaused) { 
            mJustUnpaused = false;
            // THREAD_PRIORITY_DISPLAY is the original 
            // priority used by the 3rd party Thread
            Process.setThreadPriority(Process.THREAD_PRIORITY_DISPLAY);
        }

        if (!mRunningAllowed) {
            return;
        }

        if (mPauseRequested) { // mPauseRequested is declared as volatile
            synchronized (mPauseLock) {                 
                if (mRunningAllowed && mPauseRequested) {                       
                    Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
                    mRunningAllowed = false;
                    mPauseLock.notify();
                }
            }               
            return;
        }

        // do many useful operations
} 
```

暂停/取消暂停的方法（第一个是阻塞，第二个不是）：

```
public void pauseWork() {
    synchronized (mPauseLock) {
        if (mRunningAllowed && !mPauseRequested) {
            mPauseRequested = true;
            while (mRunningAllowed) {
                try {
                    mPauseLock.wait();
                } catch (InterruptedException e) {}
            }
        } else {
            Log.d("RPT", "Already paused or pausing");
        }
    }
}

public void unpauseWork() {
    synchronized (mPauseLock) {
        if (!mRunningAllowed) {
            mRunningAllowed = true;
            mPauseRequested = false;
            mJustUnpaused = true;
        } else {
            Log.d("RPT", "No need to unpause");
        }
    }
} 
```

三个问题：

1.  有没有更好的方法来节省一些 CPU 时间？
2.  不管其他一切，我上面的代码是否正确（在同步和其他编程方面）？
3.  有点离题，但我认为它不值得一个专门的问题：更改线程的优先级是否有任何重大开销？有没有什么通用的指导方针可以做这样的事情？（例如多久可以完成一次等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:25:10.117

> 有没有更好的方法来节省一些 CPU 时间？

我什至不会打扰那里的东西。我同意 Chris Stratton 的观点：避免做实际的工作，并删除上面显示的其他代码的其余部分。然后，使用 Traceview 查看无操作`onTick()`调用的开销是否明显。很可能不会。

> 但我也想更改线程优先级

这不是一个好主意，因为它不是你的线程，如果我正确理解场景的话。此外，我相信无论如何你都会被调用约 300 次，就好像库被编码为每秒调用约 30 次一样，它很可能使用 a`Timer`或其他应该相对不受线程优先级影响的东西。

> 不管其他一切，我上面的代码是否正确（在同步和其他编程方面）？

就个人而言，我会使用 and 的东西`java.util.concurrent`，`java.util.concurrent.atomic`而不是低级的`wait()`// `notify()`。`volatile`Doug Lea 比我聪明。:-)

# ruby - ActiveRecord 未知列

> ID：13789315
> 
> 赞同：1
> 
> 时间：2012-12-09T16:33:35.670
> 
> 标签：ruby, activerecord, has-many-through, mysql2

我遇到了一个小问题我有一个 has_many through 关系这里是模型的代码

```
class User < ActiveRecord::Base
  has_many :friendships
  has_many :followings, :through => :friendships, :foreign_key => "followed_id"
end

class Friendship < ActiveRecord::Base
  belongs_to :user 
  belongs_to :following, :class_name => "User", :foreign_key => "followed_id"
end 
```

现在在控制台我可以输入 u = User.first 然后 u.friendships.first.following 这给了我你关注的第一个用户，但是当我输入 u.friendships.last.following 我得到这个错误

来自 u.friendships.first.following 的 SELECT 语句

```
Friendship Load (0.3ms)  SELECT `friendships`.* FROM `friendships` WHERE `friendships`.`user_id` = 208 LIMIT 1
User Load (0.2ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 209 LIMIT 1 
```

以及来自 u.friendships.last.following 的 SELECT 语句

```
Friendship Load (0.3ms)  SELECT `friendships`.* FROM `friendships` WHERE `friendships`.`user_id` = 208 ORDER BY `friendships`.`` DESC LIMIT 1 
```

```
ActiveRecord::StatementInvalid: Mysql2::Error: Unknown column 'friendships.' in 'order
clause': SELECT  `friendships`.* FROM `friendships`  WHERE `friendships`.`user_id` = 208
ORDER BY `friendships`.`` DESC LIMIT 1 
```

如果我然后再运行 u.friendships 然后 u.friendships.last.following ，我不再收到错误，这是为什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:01:49.793

这是我的 sql 输出`friendships`，直接来自**Rails 3.2.9 / postgresql**上的代码：

```
# u.friendships.first.following
Friendship Load (0.9ms)  SELECT "friendships".* FROM "friendships" WHERE "friendships"."user_id" = 1 LIMIT 1

# u.friendships.first.following
Friendship Load (1.3ms)  SELECT "friendships".* FROM "friendships" WHERE "friendships"."user_id" = 1 ORDER BY "friendships"."id" DESC LIMIT 1 
```

因此，出于某种原因，对我来说，它`id`会自动进入`ORDER BY "friendships"."id"`并且可以正常工作。也许您的问题与您的数据库有关？

```
#Statements used to create the db for reproducing this problem
CREATE TABLE users (id SERIAL PRIMARY KEY)
CREATE TABLE friendships (
    id            SERIAL PRIMARY KEY,
    user_id       integer
    followed_id   integer 
); 
```

# c# - 使用专用类和构造函数通过 asp.net C# 初始化 SQL 事务的存储过程

> ID：13789316
> 
> 赞同：0
> 
> 时间：2012-12-09T16:33:35.063
> 
> 标签：c#, sql-server, constructor, webforms, asp.net-4.0

我会尽量简洁，**请**..请耐心等待，因为它应该非常简单......

*   **目标：**

    **试图通用**化项目的特定部分，即处理`SQL databse transactions`.

*旁注*

为了**帮助**您回答，我粘贴了以下内容（仅供参考）

一个使用代码：`GetTestOfTablTime()`返回一个`DataTable`

类：`SQLDBInteraction`这是另一个类 - 负责最终（SQL 事务）阶段

在下面的这段代码中，我正在构建我所说的：“*存储过程的元数据*”

该类是包含所有 SQL Db SP 的类：

`HTSPs`（HT是公司的别名）

这个类正在持有**每个** `SP` [**（必需的）**] `parameter` s

[`HTSPs`class 包含另一个子 Class，对于所有`SP`的 s 名称，它只有`const string`s 的 For Each`SP`名称]

```
public sealed class HTSPs
{

//so for example this is one of the members of this class - a stored procedure
//its mission: get evnents with specified id OF specified userId in spec' month, year..

    public sealed class GetTimesWithCustomerNames
    {
        //if I DO need Constructor for its parameters how do I properly format the constructor?
        public GetTimesWithCustomerNames()
        {
            Userid.ParameterName = ParNameUserid;
            Month.ParameterName = ParNameMonth;
            Year.ParameterName = ParNameYear;
            EventId.ParameterName = ParNameReasonid;

        }

        const string ParNameUserId = "@userId",
                     ParNameMonth = "@month",
                     ParNameYear = "@year",
                     ParNameEventId = "@eventId";

        public static SqlParameter Userid = new SqlParameter();
        public static SqlParameter Month = new SqlParameter();
        public static SqlParameter Year = new SqlParameter();
        public static SqlParameter EventId = new SqlParameter();            
    }
} 
```

所以问题是： **我如何初始化构造函数？**

让您的简单定制`StoredProcedure`“*元数据*”的正确方法是什么

我目前已完成以下方法的实施（除了那个问题......）

## 用法

这是一个`DataTable`在使用`HTSPs` `class`/时返回的方法`constuctor`

```
using SPTime = HT_DBSchema.HTSPs.GetTimesWithCustomerNames;

private DataTable GetTestOfTablTime()
{
    SQLDBInteraction.DataContainer DC_Time = new SQLDBInteraction.DataContainer();

    SQLDBInteraction.SqlParamList parmsTime = new SQLDBInteraction.SqlParamList();
    Dictionary<SqlParameter, int> SqlCmdParDict = new Dictionary<SqlParameter, int>();
    parmsTime.SqlCmd.CommandType = CommandType.StoredProcedure;
    parmsTime.SqlCmd.CommandText = AppDb.MetaSqlSProc.Time.Name;
    parmsTime.SP_Name = AppDb.MetaSqlSProc.Time.Name;
    parmsTime.TableName = AppDb.MetaSqlTable.Time.Name;

    //While folowing implementation Does Work I comented it out to try using the SP Struct
    //ParmsTTime.SP_Params.Add(new SqlParameter(SPTime.ParNameMonth, 9));
    //ParmsTTime.SP_Params.Add(new SqlParameter(SPTime.ParNameReasonid, 1));
    //ParmsTTime.SP_Params.Add(new SqlParameter(SPTime.ParNameYear, 2012));
    //ParmsTTime.SP_Params.Add(new SqlParameter(SPTime.ParNameUserid, 3571));

    //here's where I'm currently stuck, in section below. trying to assign values for the SqlCommand
    parmsTime.SqlCmd.Parameters.AddWithValue(SPTime.ParNameMonth, 9);
    parmsTime.SqlCmd.Parameters.AddWithValue(SPTime.ParNameYear, 2012);
    parmsTime.SqlCmd.Parameters.AddWithValue(SPTime.ParNameReasonid, 1);
    SPTime.Userid.Direction = ParameterDirection.Input;
    SPTime.Userid.SqlValue = 3571;
    return DC_Time.LocalTbl_V3(ParmsTime);
 } 
```

**更新**

上面代码的最后几行试图实现参数分配，

因此不再需要使用：

`SQLDBInteraction.SqlParamList.SP_Params`（即`List<SqlParameter>`）

相反，我真的很想能够使用

`SQLDBInteraction.SqlParamList.SqlCmd.Parameters`

这样，因为它已经用于与数据库交互的大多数必需步骤，

所以这就是我将放弃一些不必要的额外变量使用的方法

同时我想分配 SqlCmd ( `parmsTime.SqlCmd.Parameters.Add(......)`)

使用结构 -`SPTime` **真实** `SqlParameters`

...**而不是**像现在一样使用代表其名称的字符串

例如 `parameter.name`- ( `SPTime.ParNameMonth, someValue`)

**最后阶段-sql事务**

`SQLDBInteraction`进行交易的类

```
public class SQLDBInteraction
{
    public class SqlParamList
    {
        public SqlCommand SqlCmd = new SqlCommand();
        public List<SqlParameter> SP_Params = new List<SqlParameter>();
        public String SP_Name;
        public string TableName;
        public string SelectCommand;
        ///public SqlCommandType SelectedCmdType;
    }

    public class DataContainer
    {
        public DataTable LocalTbl_V3(SqlParamList Params)
        {
            SqlConnection sqlConnection;
            DataTable Usrs = new DataTable(Params.TableName);
            SqlDataAdapter sqlDataAdapter;

            using (sqlConnection = new SqlConnection(WebConfigurationManager.ConnectionStrings["HTConn"].ConnectionString))
            {
                sqlConnection.Open();

                using (Params.SqlCmd.Connection = sqlConnection)
                {
                    using (sqlDataAdapter = new SqlDataAdapter(Params.SqlCmd.CommandText, sqlConnection))
                    {
                        if (sqlDataAdapter.SelectCommand.Parameters.Count > 0 == false)
                        {
                            sqlDataAdapter.SelectCommand = Params.SqlCmd;
                            sqlDataAdapter.Fill(Usrs);
                        }
                    }
                }
            }
            return Usrs;
        } 
```

如果有人发现我在分配给`SQL Command`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:43:21.960

所以最后......这是我自己对“问题”的回答。

因为总会有机会进行微调......并进一步打磨它，

虽然**我确实找到**了一种实施解决方案的方法。

对于初学者 ：

## 概括

**连接 3 个阶段的过程 - 数据提取**，如下所示：

第一阶段：为结构中的表及其存储过程分配名称和ID

第二阶段：`List <SqlParameter>` 为最终的sql命令构建sql参数集合。

第三阶段：通过使用这些`struct`*s*来格式化/构造sql命令，

作为回报，将`System.Data` `DataTable`通过存储过程中的 sql 指令获得请求的结果……自然而然。

## 准备背景 - 代码重用

前 2 块代码存放在两个单独的文件中

第一个文件用于保存**sql 数据库模式**

表名称、表（自定义）ID、列名称以及存储过程名称和参数。

```
public sealed class HTDB_Tables
{
    // this is the class that will hold all Sql server - tables Names

    public const string TblTime = "tblTime";
}

 // the class for Stored Procedures Paramaters - (for each stored procedure)
public sealed class HTDB_SPs
{
    // for example this is one of the stored procedures
    public sealed class GetTimesWithCustomerNames
    {

        public static List<SqlParameter> SqlParlst(string SlctdUserID, string SlctdMonth, string SlctdYear, string SlctdEventID)
        {
            SqlParameter Userid = new SqlParameter( UserIdParName, SlctdUserID);
            SqlParameter Month = new SqlParameter(MonthParName, SlctdMonth);
            SqlParameter Year = new SqlParameter(YearParName, SlctdYear);
            SqlParameter EventId = new SqlParameter(EventIdarName, SlctdEventId);

            List<SqlParameter> RetSqlParLst  = new List<SqlParameter>();
            retSqlParLst.Add(UserId);
            retSqlParLst.Add(Month);
            retSqlParLst.Add(Year);
            retSqlParLst.Add(EventId);

            return retSqlParLst;
        }

        const string UserIdParName = "@userId",
                     MonthParName = "@month",
                     YearParName = "@year",
                     EventIParName = "@eventId";

    }
}

// a numeric value that's used to reference the table
// the id is passed as a parameter to a javascript-Jquery Update function 
// through the textbox control - "textchange event" - attribute,
// as reference to which table to send the updated data .

// then it is proccessed  in code behind  as table id  inside the application 
// via a switch on the parameter sent by Jquery-ajax function

public sealed class HTDB_tblIDs
{
    public const int tblTime = 1;

   //this is only an example , for one of tables 
   //as it requierd that all sql database tables(that i want to work with this project)
   // will be added here too
   // this could be done via using code smith or through few simple 
  // steps you could do it via C# method that will list all your 
  // database tables names etc'
} 
```

**第二个文件**是一个通用的 Helper `nameapace`，它存储了所有 Helper 类，

并且其中一个类（下一个代码块）是持有`struct`s 的类

一个用于表，另一个用于存储过程，

这两个，将在稍后的应用程序中分配`code behind`。

```
 public class DBMetaDetails
            {
                public struct DbTable
                {
                    public DbTable(string tableName, int tableId): this()
                    {
                        this.Name = tableName;
                        this.ID = tableId;
                    }
                    public string HtmlOutput;
                    public string Name { get; private set; }
                    public int ID { get; private  set; }
                }

                public struct SProc
                {
                    public SProc(string SProcName, int SprocID, List<SqlParameter> CurrSpParList)
                        : this()
                    {
                        this.Name = SProcName;
                        this.ID = SprocID;
                        this.SpParList = CurrSpParList;
                    }
                    public string Name { get; private set; }
                    public int ID { get; private set; }
                    public List<SqlParameter> SpParList { get; private set; }
                }
            } 
```

所以上面的两个代码都在两个单独的文件中......

意思是上面的代码可以在我需要创建的每个应用程序中使用，

因此，在完成初始后台工作后，将非常容易实现。

*   第二部分

**在当前项目中实施。**

后面的代码用在“当前项目”代码后面`aspx.cs`

struct 的实现`System.Data` `DataTable`

和它的`stored procedure`，将被使用/分配给`SqlCommand`

```
public sealed class AppDb
{
    public sealed class SqlTableMeta
    {    
      //id -for usage by jquery, name for the DataTable returnd in the next block of code
        public static DbTbl Time = new DbTbl(HTDB_Tables.TblTime, HTtIDs.tblTime);

    }
    public sealed class SqlSProcMeta
    {

        public static SProc Time = new SProc(HTSPs.SP_GetTimesWithCustomerNames,
                                             HTtIDs.SProcTime,
                                             HTSPs.GetTimesWithCustomerNames.SqlParLst("3571", "9", "2012", "1"));
    }

} 
```

最后两个步骤可以合二为一，虽然我想看到的是

该项目将拥有最少的额外代码来获取数据

所以我猜第二部分是与数据库进行实际交互

应该在测试完成后不久移到 Helpers 部分并从`code behind`每个应用程序的部分中移出。

所以接下来是将所有准备工作和数据设置收集到行动的代码

```
private DataTable GetDbTable(DbTbl dbTbl, SProc Sprc)
{
    SQLDBInteraction.DataContainer DC_Time = new SQLDBInteraction.DataContainer();

    //ParmsTime- a class instace, for passing a set of required parameters to final stage
    SQLDBInteraction.SqlParamList ParmsTime = new SQLDBInteraction.SqlParamList();

    ParmsTime.SqlCmd.CommandType = CommandType.StoredProcedure;

    //using the stored procedure struct:  assigend to Sqlcommand as its CommandText 
    ParmsTime.SqlCmd.CommandText = Sprc.Name;

    //using stored procedure parameters list - allso via a struct above codes
    ParmsTime.SqlCmd.Parameters.AddRange(Sprc.SpParList.ToArray());

    //using DataTable struct to assign the data table a name
    ParmsTime.TableName = dbTbl.Name;

    return DC_Time.LocalTbl_V3(ParmsTime);
} 
```

最后阶段：sql数据库交互

```
public class SQLDBInteraction
{

    public class SqlParamList
    {

        public SqlCommand SqlCmd = new SqlCommand();
        public List<SqlParameter> SP_Params = new List<SqlParameter>();

        public string TableName;
        public string SelectCommand;
        ///public SqlCommandType SelectedCmdType;
    }

    public class DataContainer
    {

        public DataTable LocalTbl_V3(SqlParamList Params)
        {
            SqlConnection sqlConnection;
            DataTable retDt = new DataTable(Params.TableName);
            SqlDataAdapter sqlDataAdapter;

            using (sqlConnection = new SqlConnection(WebConfigurationManager.ConnectionStrings["useyourwebconfigconnection"].ConnectionString))
            {
                sqlConnection.Open();

                using (Params.SqlCmd.Connection = sqlConnection)
                {

                    using (sqlDataAdapter = new SqlDataAdapter(Params.SqlCmd.CommandText, sqlConnection))
                    {
                        if (sqlDataAdapter.SelectCommand.Parameters.Count > 0 == false)
                        {
                            sqlDataAdapter.SelectCommand = Params.SqlCmd;
                            sqlDataAdapter.Fill(retDt);
                        }
                    }

                }

            }
            return retDt;
        }

   }

} 
```

这只是一个测试，但它的工作速度非常快且非常容易实现，非常适合个人或小型企业使用

非常欢迎评论...

谢谢

# java - 重新验证和重新绘制 - Java Swing

> ID：13789317
> 
> 赞同：0
> 
> 时间：2012-12-09T16:34:05.793
> 
> 标签：java, swing, user-interface, concurrency, event-dispatching

我有一个要添加 JLabel 的 JPanel。然后我想删除所有的 JLabel 并添加一些新的。

所以我做了以下事情：

```
 panel.removeAll();panel.repaint();

        panel.add(new JLabel("Add something new");

        panel.revalidate(); 
```

这工作正常。当我在此之后启动一个新线程时，我的问题出现了：

```
 panel.removeAll();panel.repaint();

    (1)panel.add(new JLabel("Add something new");

    panel.revalidate();

    //new thread to start - this thread creates new JLabels that should appear under (1)
    firstProducer.start();              

    try {

            firstProducer.join();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

然后原始 JLabels 的输出仍然可见。我已经读到重新验证过程是一项长时间运行的任务，因此在重新验证正在进行并出现冲突时 firstProducer 线程正在启​​动。处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T17:00:54.833

问题是`firstProducer.join`. 如javadoc中所述

> 等待这个线程死掉。

因此，您将阻塞事件调度线程，直到您的其他线程`Thread`完成，因此面板无法重新绘制或重新验证，您将不会在 UI 中看到您的更改。

有关更多信息，请参阅[Swing 并发教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

# visual-studio-2012 - 无法在 Visual Studio 2012 Ultimate 中创建 Windows Phone 8 项目

> ID：13789319
> 
> 赞同：5
> 
> 时间：2012-12-09T16:34:59.877
> 
> 标签：visual-studio-2012, windows-phone-8-emulator

我的计算机上安装了 Visual Studio 2102 的副本。由于我的计算机满足模拟器的所有要求（SLAT、硬件辅助虚拟化等），我下载了 Windows Phone 8.0 SDK 并继续安装它。

不幸的是，我无法创建新的 Windows Phone 应用程序。项目模板（Windows phone 应用程序、Pivo​​t 应用程序、Panorama 应用程序等）不会出现在 VS2012 主页中。唯一可用的选项是“发现 Windows 手机工具”（它将您重定向到 SDK 的下载页面）。我试图卸载所有东西并重复这个过程，但结果是一样的。

我仍然能够打开使用旧的 Windows phone SDK 7.1 制作的项目并在新的模拟器上对其进行测试。这应该足以证明安装已成功完成。

我不明白出了什么问题。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T16:54:08.930

我有一个类似的错误，因为我的 Visual Studio Pro 是法语的。安装windows phone SDK的时候，已经安装了vs的express版本，可以在这个版本中创建手机项目，然后在vs pro中打开这些项目，但是不能直接在vs pro中创建手机项目，对吗？

*   转到：C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\ProjectTemplates\CSharp\Windows Phone

*   您应该有一个名为 1033 的文件夹，它包含英文版 Visual Studio 的电话模板。复制并粘贴它，然后用您的代码语言重命名副本（http://msdn.microsoft.com/en-us/library/0t12k0f0.aspx，对我来说是 1036）。

*   之后，关闭 Visual Studio，使用管理员权限启动 C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\Tools\VsDevCmd.bat 并键入：devenv.exe /InstallVSTemplates /ResetSettings

*   重新启动visual studio pro，你应该有一个Windows phone 条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T21:25:38.030

将 lang 文件也复制到： ...\IDE\ItemTemplates... ...\WindowsPhone\ProjectTemplates... 它帮助了我！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:43:46.300

Parallels 提供了一篇关于解决此问题的非常好的知识库文章：

[KB：在 Windows 8 虚拟机中运行 Windows 8 Phone 模拟器](http://kb.parallels.com/en/115211)

# android - 为什么 AudioManager.isStreamMuted 不可用？

> ID：13789321
> 
> 赞同：6
> 
> 时间：2012-12-09T16:35:05.667
> 
> 标签：android, android-audiomanager

我正在使用 android AudioManager 来静音和取消静音流，如 STREAM_SYSTEM 和 STREAM_NOTIFICATION，静音是直接调用[setStreamMute](http://developer.android.com/reference/android/media/AudioManager.html#setStreamMute%28int,%20boolean%29)但我找不到 isStreamMuted 方法。

查看源代码我可以看到[它存在](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r1.2/android/media/AudioManager.java/#AudioManager.isStreamMute%28int%29)所以问题是'如何检查流是否被静音？

我正在使用 Android 4.0.4

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-14T17:53:05.510

反射是你的朋友。这对我有用。

```
try {
    Method m = AudioManager.class.getMethod("isStreamMute", int.class);
    isMuted = (Boolean) m.invoke(am, AudioManager.STREAM_MUSIC);
} catch (NoSuchMethodException | InvocationTargetException | IllegalAccessException e) {
    System.out.println(e);
} 
```

更新：`public boolean isStreamMute (int streamType)`现在可以在 API 23 中访问该方法，而无需使用反射。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-09T18:59:25.093

令人不快的答案是流静音在每个进程的基础上运行。因此，您可以安全地将静音状态存储在某个静态变量中，适当地包装，并自己跟踪静音状态。以惨痛的经历说话。有时你会做你必须做的事情。他们为什么这样做？这是一个更难的问题......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-23T17:43:21.240

他们使用 hide 将方法从 android.jar 中剥离出来：

```
/**
 * get stream mute state.
 *
 * @hide
 */
public boolean isStreamMute(int streamType) { 
```

# sql - 存在外键时删除 - 有没有办法获取违反外键 (EF) 的键的 ID

> ID：13789323
> 
> 赞同：-1
> 
> 时间：2012-12-09T16:35:17.810
> 
> 标签：sql, sql-server, sql-server-2008, entity-framework-4, foreign-keys

我正在使用实体框架。
我在 1:n 中有表 A 和 B。
假设我删除了 A 中的许多行，并且表 A 中的 a 键行之一在表 B 中有一行或多行。

我得到带有以下文本的 sqlException

```
 The DELETE statement conflicted with the REFERENCE constraint "FK_A_B". 
 The conflict occurred in database "DCDCommunity", table "Template.Template",  
 column 'ApplicationTypeID'.  The statement has been terminated. 
```

有没有办法获取违反外键的键的 ID。

**重要编辑：**

我知道我可以检查 B 是否有行。
但这很容易出现持久性问题。
（假设在检查之后立即发出另一个插入请求。）

通过不检查并让数据库抛出异常，我让他处理持久性（尤其是在多台机器上运行时）
现在 - 如果我在 SQL 异常中只有更多数据，我只能依靠这种机制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:55:07.393

`You cannot delete Rows from A (your primary key table) where there are related records in B (foreign table)`. 这违反了关系。因此，您需要`first delete them from B`和`then delete from A`。或者你可以这样做`ON DELETE CASCADE`。请[在此处查看此示例](http://blog.sqlauthority.com/2012/08/17/sql-server-curious-case-of-disappearing-rows-on-update-cascade-and-on-delete-cascade-t-sql-example-part-2-of-2/)

# asp.net-mvc-3 - 如何在 Razor 视图中显示“int”项目

> ID：13789324
> 
> 赞同：0
> 
> 时间：2012-12-09T16:35:26.120
> 
> 标签：asp.net-mvc-3, razor

我的模型中有这段代码：

```
public class ContactDaySelectorAttribute : SelectorAttribute
{
    public override IEnumerable<SelectListItem> GetItems()
    {
        var contactDay = new List<ContactDay> 
        { 
            new ContactDay {Id = 1, Name = "Monday"},
            new ContactDay {Id = 2, Name = "Tuesday"},
            new ContactDay {Id = 3, Name = "Wednesday"},
            new ContactDay {Id = 4, Name = "Thursday"},
            new ContactDay {Id = 5, Name = "Friday"},
            new ContactDay {Id = 6, Name = "Saturday"},
        };
        return contactDay.ToSelectList(m => m.Id, m => m.Name);
    }
}
//
public class ContactDay
{
    public int Id { get; set; }
    public string Name { get; set; }
}
//
[ContactDaySelector]
public virtual int? ContactDayCheckBox { get; set; }
//
[ContactDaySelector]
[ReadOnly(true)]
public string ContactDayCheckBoxPost
{
    get { return ContactDayCheckBox.ToString(); }
} 
```

我`ContactDayCheckBox`用来将`int?`值存储在数据库中。我用来`ContactDayCheckBoxPost`在确认视图中显示所选项目（复选框）。

如果我`@Html.EditorFor(m => m.ContactDayCheckBoxPost)`在我的视图中这样做，并且用户之前选择了一天以上（例如），它只显示一天的“名称”（即，如果之前选择了星期一、星期二，它只在视图中显示“星期一” ）。

我怎样才能让视图显示以前选择的所有选项？我试过了`@foreach`，但它不能与“周一”）。`int``.Split(',')`

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T02:58:06.997

问题（如我所见）：

我认为您遇到的问题`SelectList`是“键/值”对，但您试图使用“键”作为“值”。因此，对于值为“1”的键“星期一”，1 将是我期望的值。有关示例，请参见[http://codeclimber.net.nz/archive/2009/08/10/how-to-create-a-dropdownlist-with-asp.net-mvc.aspx和](http://codeclimber.net.nz/archive/2009/08/10/how-to-create-a-dropdownlist-with-asp.net-mvc.aspx)[http://msdn.microsoft。 com/en-us/library/system.web.mvc.selectlistitem(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.selectlistitem(v=vs.108).aspx)的定义`SelectListItem`。

如果您想要一种简单的方法来做到这一点，您可能只需使用：

```
return contactDay.ToSelectList(m => m.Name, m => m.Name); //Both the key and the value are Name 
```

但是，这将失败，因为您`ContactDaySelector`期望一个可为空的 int：

```
[ContactDaySelector]
public virtual int? ContactDayCheckBox { get; set; } 
```

那有意义吗？

如果您想使用这种方法，请使用您的类并在 [HttpPost] 操作中查找值“1”以找到“星期一”。在此说明中，为什么需要将其作为字符串获取（我将在下面对此进行推断）？

解决方案（如我所见）：

更好的解决方案可能是为您的一周中的几天创建一个枚举（实际上，枚举帮助页面上给出了一周中的几天的示例 - [http://msdn.microsoft.com/en-us/library/sbbt4032(v =vs.80).aspx](http://msdn.microsoft.com/en-us/library/sbbt4032(v=vs.80).aspx)，它甚至是一个内置的枚举[http://msdn.microsoft.com/en-us/library/system.dayofweek.aspx](http://msdn.microsoft.com/en-us/library/system.dayofweek.aspx) )。然后在整个应用程序中使用它（例如，在控制器的 [HttpPost] 操作上）将其设置为数值（例如`(int)Days.Sun`），但能够检索其关键字值（例如`Days.Sun.ToString();`）。有关将[枚举](http://blogs.msdn.com/b/stuartleeks/archive/2010/05/21/asp-net-mvc-creating-a-dropdownlist-helper-for-enums.aspx)用于一个下拉列表。

如果您需要将星期几作为字符串工作，我真的认为不需要为星期几上课。由于您尝试选择与字符串相同的键和值，为什么不将字符串列表添加到您的 ViewBag/ViewModel，例如

```
List<String> daysOfTheWeek = new List<String>() { "Mon", "Tue", "Wed", "Thur", "Fri", "Sat", "Sun" };
ViewBag.DaysOfTheWeek = daysOfTheWeek; 
```

在您的模型或视图模型中有一个名为“WeekDay”的属性：

```
public string WeekDay { get; set; } 
```

然后你可以使用它来设置一个字符串属性，如下所示：

```
@Html.DropDownListFor(model => model.WeekDay, new SelectList(ViewBag.DaysOfTheWeek)) 
```

注意：您确实应该为这种方法定义一个编辑 ViewModel，但 ViewBag 可以用于调试目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T16:48:43.993

`ContactDayCheckBoxPost`被定义为一个字符串。在将它传递给视图之前，你在这个字符串中放入了什么？

如果万一说你传递一个值

```
ContactDayCheckBoxPost = "1, 2, 3, 4"; 
```

那么在这种情况下，您可以应用该`Split(',')`函数并将这些 id 的列表作为字符串获取，然后您可以使用 foreach 来获取 id。

还要向我们展示您在视图中使用的内容，我发现很难理解您在这里的要求。

# javascript - 如何将 javascript cookie 从 15 天计数更改为手动创建新 cookie？

> ID：13789325
> 
> 赞同：0
> 
> 时间：2012-12-09T16:35:32.203
> 
> 标签：javascript, cookies, colorbox

我正在使用 Colorbox 实现一个脚本，该脚本在用户第一次访问网站时会显示一个不错的弹出窗口。我发现的这个脚本将 cookie 设置为持续 15 天——我想要的是能够自己手动管理“cookie-update”。就我而言，我想使用此脚本向用户显示我的网站已更新并使用 Colorbox 显示更改日志；就在第一次访问。像这样的东西：

*   更新 #1 -> 新 cookie 告诉有一个新更新 -> 显示颜色框 1 次 -> 不再有，直到...
*   更新 #2 -> 新 cookie 告诉我们有新的更新 -> 显示颜色框 -> ...等等...

问题的简短版本：如何将脚本从 15 天计时器更改为手动能够更改它，以便我可以决定何时使用新的更改日志显示我的 Colorbox？

原始脚本位于此处： http: [//papermashup.com/automatic-jquery-site-subscription-lightbox/](http://papermashup.com/automatic-jquery-site-subscription-lightbox/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:39:05.533

该脚本中有 Jquery 代码。

```
$("document").ready(function (){ 

       // load the overlay

        if (document.cookie.indexOf('visited=true') == -1) {
            var fifteenDays = 1000*60*60*24*15;
            var expires = new Date((new Date()).valueOf() + fifteenDays);
            document.cookie = "visited=true;expires=" + expires.toUTCString();
            $.colorbox({width:"580px", inline:true, href:"#subscribe_popup"});
        }

        $(".open_popup").colorbox({width:"580px", inline:true, href:"#subscribe_popup"});

 }); 
```

如果您想更改日期，请在此处更改。

```
var fifteenDays = 1000*60*60*24*15; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:49:41.570

您需要在网站中输入日期 - 注意 JS 月份从零开始

[演示](http://plungjan.name/SO/testoverlay1.html)

```
var latestUpdate=new Date(2012,11,10).getTime(); // 10th of December
var whatVersionSeen = parseInt($.cookie("visited"));
if (isNaN(whatVersionSeen)) whatVersionSeen = 0; // first time
if (whatVersionSeen < latestUpdate) { // whatever in the cookie < latest update
  $.cookie('visited', latestUpdate, { expires: 365 });
  $.colorbox({width:"580px", inline:true, href:"#subscribe_popup"});
} 
```

上面的代码替换

```
if (document.cookie.indexOf('visited=true') == -1) {
  var fifteenDays = 1000*60*60*24*15;
  var expires = new Date((new Date()).valueOf() + fifteenDays);
  document.cookie = "visited=true;expires=" + expires.toUTCString();
  $.colorbox({width:"580px", inline:true, href:"#subscribe_popup"});
 } 
```

完全并期望找到[$.cookie](https://github.com/carhartl/jquery-cookie)

# java - 随机 UUID 生成

> ID：13789329
> 
> 赞同：1
> 
> 时间：2012-12-09T16:36:11.860
> 
> 标签：java, android, bluetooth, uuid

问候各位程序员，

我正在编写一个简单的蓝牙应用程序来发现设备并与它们连接。当我使用 UUID“00001101-0000-1000-8000-00805F9B34FB”连接笔记本电脑时，一切正常。但是，当我尝试使用从可用在线生成器生成的 UUID 连接到 android 设备时，我无法使代码工作

任何帮助将非常感激

非常感谢

# c# - MvxHttpImageView 绑定未更新

> ID：13789331
> 
> 赞同：1
> 
> 时间：2012-12-09T16:36:25.813
> 
> 标签：c#, xamarin.android, mvvmcross

我有以下代码

`<Mvx.MvxHttpImageView xmlns:local="http://schemas.android.com/apk/res/TestServices.Droid" android:layout_width="wrap_content" android:layout_height="wrap_content" local:MvxBind="{'ImageUrl':{'Path':'ThumbNail'}}"`

我将图像 url 传递给 ThumbNail 属性的位置。上面的代码是 ItemTemplate 的一部分，它被传递给 TestModel 对象的 ObservableCollection，如下所示。

```
public class TestModel
{
   public string ThumbNail
   {
     get; 
     set;
   }
   public string Name
   {
     get; 
     set;
   }   

   ....
} 
```

Name 属性也在上面的模板中绑定到 TextView 并且它像其他字符串值一样正确显示。唯一的问题是图像不显示。我已经尝试在 ViewModel 的构造函数中预先设置 Image Url，然后它就可以工作了。但是，当我在我的 Web 服务的 Completed 事件中将获取的值添加到集合中时，图像未显示。我已经在完成的事件中验证了图像 url 的路径，它是正确的。这里可能出了什么问题。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T16:52:04.673

我不确定出了什么问题......

但是要考虑尝试的一些事情是：

*   将 MvxBindingTrace 级别设置为诊断 - 输出面板是否告诉您任何有趣的事情？

*   如果您正在动态更新 url，那么您是否需要触发属性更改事件

*   如果您添加一个`Text`绑定到图像 url 的 textview，那么这个更新是否正确？

*   在这里同时使用`wrap_content`高度和宽度真的有意义吗？如果您将高度和宽度改为`100dp`改为，会发生什么？

*   如果您使用已知良好的图像 URL - 例如来自[http://placekitten.com](http://placekitten.com)的 URL，该应用程序是否工作？

*   如果您将默认图像设置为在加载 http 图像时显示的本地文件（例如资源或资产），该应用程序是否工作？

*   示例应用程序是否适合您 - 例如畅销书或 Twitter 示例？如果是这样，那么你能看到他们的不同之处吗？

*   您可以进入 mvx http 图像源 - 是否调用了属性和方法？如果是，那么他们看起来像是被正确地或以任何方式奇怪地调用了吗？

试试这些建议，我怀疑你会找到前进的道路。祝调试顺利。

如果这些建议没有帮助，请尝试添加更多信息，包括您使用的 mvvmcross 版本、Android 版本、手机或模拟器等信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T04:58:24.433

明白了，我使用反斜杠通过连接字符串来创建 url，将它们更改为正斜杠将其变成正确的链接，并且现在可以正常工作。非常感谢斯图尔特的帮助

# php - 在 PHP 中获取类变量错误

> ID：13789332
> 
> 赞同：1
> 
> 时间：2012-12-09T16:36:28.043
> 
> 标签：php, regex, class

我收到错误说我的电子邮件变量是空的，除了我的正则表达式有问题，这似乎是字符类中的范围乱序，我想这是一个愚蠢的错误，因为我有很多东西要学

```
<?php

    include_once('../resources/config.php');
    class register
    {
        private $username;
        private $password;
        private $passmd5;
        private $email;

        private $errors;
        private $token;

        private $db;

        public function __construct()
        {
            $this->db = new config();
            $this->db = $this->db->dbConnect();

            $this->errors = array();

            $this->username = $this->regex($_POST['user']);
            $this->password = $this->regex($_POST['pass']);
            $this->email = $this->regex($_POST['email']);
            $this->token = $this->regex($_POST['token']);

            $this->passmd5 = md5($this->password);  
        }

        public function process()
        {
            if($this->valid_token() && $this->valid_data())
                $this->register();
        }

        public function regex($var)
        {
            $reggie = preg_replace('/[^a-zA-ZO-90.]/','',$var);
            return $reggie;
        }

        public function register()
        {
            $this->db->prepare("insert into users(name, pass) values ('($this->username)','($this->passmd5)')");
            if(rowCount() < 1)
                $this->errors() == "form has failed you";   
        }

        public function show_errors()
        {
            foreach ($this->errors as $key => $value) {
                echo $value."</br>";
            }
        }

        public function valid_data()
        {
            if(empty($this->username))
                $this->errors() == 'invalid username';
            if(empty($this->password))
                $this->errors() == 'invalid password';
            if(empty($this->email) || !ereg('/^[^\W][a-zA-Z0-9_]+(\.[a-zA-Z0-9_]+)*\@[a-zA-Z0-9_]+(\.[a-zA-Z0-9_]+)*\.[a-zA-Z]{2,4}$/', $this->email))
                $this->errors() == 'invalid email';

            return count ($this->errors)? 0:1;

        }

        public function valid_token()
        {

        }

        }

    ?> 
```

```
 $obj_reg = new register();

    if($obj_reg->process())
    {
        echo 'succes';
    }else
    {
        $obj_reg->show_errors();
    }
}

    $token = $_SESSION['token'] = md5(uniqid(mt_rand(), true));
?>

<form method="post" action="index.php?page=register.php" >
    <table>
    <tr><td>username:</td><td> <input type="text" name="user"/></td></tr>
    <tr><td>password:</td><td> <input type="password" name="pass"/></td></tr>
    <tr><td>email:</td><td> <input type="text" name="email"/></td></tr>
</table>
    <input type="hidden" name="token" value="<?=$token;?>"/>
    <input type="submit" name="register" value="register"/>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:52:08.630

对于电子邮件正则表达式，您应该替换：

```
if(empty($this->email) || !ereg('/^[^\W][a-zA-Z0-9_]+(\.[a-zA-Z0-9_]+)*\@[a-zA-Z0-9_]+(\.[a-zA-Z0-9_]+)*\.[a-zA-Z]{2,4}$/', $this->email))
                $this->errors() == 'invalid email'; 
```

和：

```
if (!filter_var($this->email, FILTER_VALIDATE_EMAIL))
    $this->errors() == 'invalid email'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T08:33:25.490

```
<?php
require_once('../resources/config.php');
class register
{
    private $username;
    private $password;
    private $passmd5;

    private $errors;

    public function process()
    {
        if($this->valid_data())
        {
            $this->send();

        }
        else
        {
            echo "mama";
        }

    }

    public function regex($var)
    {
        $reggie = preg_replace('/[^A-Za-z0-9:.\/_-]/','',$var);
        return $reggie;
    }

    public function send()
    {
        mysql_query("INSERT INTO 'users' WHERE name='.$this->username.' pass='.$this->password.'");
    }

    public function checking($name, $pass)
    {
        $this->errors = array();

        $this->username = $this->regex($name);
        $this->password = $this->regex($pass);
        $this->passmd5 = md5($this->password);  
    }

    public function show_errors()
    {
        foreach ($this->errors as $key => $value) {
            echo $value."</br>";
        }
    }

    public function valid_data()
    {
        if(empty($this->username))
            $this->errors[] = 'invalid username';
        if(empty($this->password))
            $this->errors[] = 'invalid password';

        return count ($this->errors);

    }

}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T17:01:25.490

利用

```
$this->errors[] = "invalid foo"; 
```

代替

```
$this->errors() == "invalid foo"; 
```

# html - 验证：未打开的元素“P”的结束标记

> ID：13789335
> 
> 赞同：1
> 
> 时间：2012-12-09T16:36:56.607
> 
> 标签：html, w3c

我编写的以下代码不会通过 W3C 验证器，而是会给我以下错误：

> 第 18 行，第 7 列：未打开的元素“P”的结束标记

它`</p>`紧跟在标签之后的结束`</ul>`标签。我真的很难确定问题。这是标记：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
    <html lang="de">
    <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <title>foo</title>
    </head>
    <body>

    <div class="foo1">
        <div class="foo2">
            <h1>some heading</h1>
                <p>
                    <ul>
                    <li>some stuff</li>
                    <li>yet another stuff</li>
                    </ul>
                </p>
                <p>yet another heading</p>
        </div>
    </div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T16:42:51.647

检查[此问答](https://stackoverflow.com/questions/5681481/should-ol-ul-be-inside-p-or-outside)

在 HTML4 中，放在`ul`里面是无效的`p`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T16:42:22.350

W3C Validator 不允许您输入 HTML 4.01 `<ul>`Strict `<p></p>`。它也不需要`</p>`.

`</p>`因此，您可以通过删除或同时删除`<p>`and来解决您的问题`</p>`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T16:50:37.117

在 HTML 4中的标签中不允许使用 Ul `<p>`。最好像这样尝试。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
    <html lang="de">
    <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <title>foo</title>
    </head>
    <body>

    <div class="foo1">
        <div class="foo2">
            <h1>some heading</h1>

                    <ul>
                    <li>some stuff</li>
                    <li>yet another stuff</li>
                    </ul>

                <p>yet another heading</p>
        </div>
    </div>
    </body>
    </html> 
```

# asp.net - Apache + asp.net 框架 4 + Windows 7

> ID：13789337
> 
> 赞同：0
> 
> 时间：2012-12-09T16:37:34.300
> 
> 标签：asp.net, apache

在 Windows 平台上的 Apache 网络服务器上运行 asp.net 网站是个好主意吗？任何表现都会受到打击。我这样做是因为 Apache 是免费的，而我必须为 Windows Server 2008 付费。我的网站将是中等负载的，并且目前仅针对 Intranet。

如果有人知道 mod_aspdotnet，请为初学者解释或一些非常好的链接。我已经看过这个链接： http: [//mod-aspdotnet.sourceforge.net/introduction.html](http://mod-aspdotnet.sourceforge.net/introduction.html)

我真的需要这个 mod_aspdotnet，因为 Apache 服务器将安装在 Windows 平台上吗？

新手问题，但请帮忙

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:58:13.893

看看这个 [http://mono-project.com/ASP.NET](http://mono-project.com/ASP.NET)

但我不确定你为什么需要 Appache，你在所有操作系统中都有 IIS 并且它是免费的。

# javascript - 在 Javascript 中生成内容时，我应该使用字符串还是节点？

> ID：13789342
> 
> 赞同：2
> 
> 时间：2012-12-09T16:37:58.950
> 
> 标签：javascript, jquery, string, object, select

我正在尝试将页面设置为最终需要脱机工作的应用程序的模板。

现在我正在使用 HTML 代码片段（= 增强但未格式化的`jquery mobile`元素），我将其存储为 HTML 页面，如下所示：

```
<!-- template_listview.html -->
<!DOCTYPE html>
<html>
<head><title>static_listview_templates</title></head>
<body>

<!-- listview basic start -->
<ul id="tmp_listview_basic" class="ui-listview"></ul>
<!-- listview basic end -->

<!-- listview inset start -->
<ul id="tmp_listview_inset" class="ui-listview ui-listview-inset ui-corner-all ui-shadow"></ul>
<!-- listview inset end -->

</bdoy>
</html> 
```

我的应用程序使用`requireJS`，因此用户第一次点击包含列表视图的页面（具有指定要加载的动态内容以及列表视图外观的 data-config 属性），需要拉出上述模板，该模板将被缓存以供所有后续使用.

现在上面的页面作为 HTML 字符串返回。因为它将包括列表视图元素的所有“变体” `<ul>,<ol>,<li>...`（

**问题**：
就性能而言，使用返回的 HTML 模板的大字符串并尝试提取必要的子字符串会更好，还是应该将其包装`$()`并使用 jquery/javascript 来提取我需要的内容？如果它应该是一个字符串，有没有一种简单的方法可以从这个字符串中提取一个元素（从到）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:48:00.860

使用`$(html)`. 它几乎完全符合您的需要。这是一个内存操作。如果您不打算尝试每秒执行数百个这样的操作，那么将您的性能优化工作集中在其他领域，如[yslow](http://developer.yahoo.com/yslow/)或类似工具所指示的那样，您将获得更多收益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T19:16:01.170

我认为字符串抽象在性能方面会更好。

事实上，如果我正确地认为你想从结果中获取相关的列表视图作为字符串，那么根据我编写的以下 jsperf 测试，字符串抽象要快得多：

[http://jsperf.com/jqobj-vs-string-abstraction](http://jsperf.com/jqobj-vs-string-abstraction)

因此，您可以使用我为该测试编写的字符串抽象方法从结果中获取列表视图：

```
function getTemplateBlock(block, context) {
    var regex = new RegExp('<!-- ' + block + '(.)+' + block + '(.)+?-->'),
        tmpl = context.match(regex);

    return tmpl.length ? tmpl[0].replace(/<!--[\s\S]*?-->/g, '') : '';
}

// get listview templates where 'mystuff' is
// the HTML string returned by your request
var basic = getTemplateBlock('listview basic', mystuff),
    inset = getTemplateBlock('listview inset', mystuff); 
```

此外，关于如何从创建的对象中进行选择的问题的答案也在那个 jsperf 中......

```
$('<div />').html(mystuff).find('ul'); 
```

这是必要的，因为`.find()`搜索匹配元素的后代，所以如果我们将匹配元素设为新元素`<div />`并附加我们的结果，我们可以搜索`<div />`我们`<ul />`的 's.

取自[jQuery 文档](http://api.jquery.com/find/)：

> “给定一个表示一组 DOM 元素的 jQuery 对象，.find() 方法允许我们在 DOM 树中搜索这些元素的后代，并从匹配的元素中构造一个新的 jQuery 对象。”

# c# - Microsoft Solver Foundation 模运算符

> ID：13789343
> 
> 赞同：2
> 
> 时间：2012-12-09T16:38:12.980
> 
> 标签：c#, modulo, ms-solver-foundation

我正在尝试通过执行以下操作向我的求解器基础添加一个基本约束：

```
model.AddConstraint("c1", x % y == 0); 
```

我收到一个编译错误，提示“运算符 '%' 不能应用于 'Microsoft.SolverFoundation.Services.Decision' 和 'Microsoft.SolverFoundation.Services.Decision' 类型的操作数”。

这是有道理的，因为许多运算符不受支持。但是，许多不受支持的运算符（sin、cos、tan 等）可用作 Model 类的特定方法，如下所示：

```
model.AddConstraint("c1", Model.Sum(x,y) == 0); 
```

如果我将“Sum”替换为“Mod”，则没有可用的方法。

关于如何在 Solver Foundation 中执行模运算的任何想法？根据[此处](http://msdn.microsoft.com/en-us/library/ff818505%28v=vs.93%29.aspx)的文档，它是受支持的。

我将开始使用反射器来挖掘代码，但我想我也会在这里发布它。如果我找到解决方案，我将更新我的问题以包含答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:47:20.373

真的很有趣，我想在 SO 上写完全相同的问题 :-)

我发现在[http://msdn.microsoft.com/en-us/library/ff818505(v=vs.93).aspx](http://msdn.microsoft.com/en-us/library/ff818505(v=vs.93).aspx)为 OML 语言定义了 Mod 运算符。

AddConstraint 方法有一个重载，它接受表达式字符串（我猜是 OML 表达式？）而不是 Term。不幸的是，我不知道正确的格式，但是一旦我们掌握了诀窍，我们也可以使用所有其他运算符。

**编辑**

看起来并非 API 中描述的每个 OML 表达式都有效。例如，

```
SolverContext sc = SolverContext.GetContext();
Model m = sc.CreateModel();

m.AddDecision(new Decision(Domain.IntegerRange(0,10), "a"));
m.AddDecision(new Decision(Domain.IntegerRange(0, 10), "b"));

m.AddConstraint(null, "a > 0");
m.AddConstraint(null, "b == Plus[a,2]"); 
```

在这种情况下，Plus[x,y] 正在工作，求解器计算以下决策

甲：1，乙：3

但是如果我用这个替换最后一个约束

```
m.AddConstraint(null, "b == Mod[a,2]"); 
```

我收到 OmlParseException（“无法解析 OML 模型。表达式：Mod[a,2]。”）。我想我们在这里只能靠自己了，也许我们能做的最好的事情就是坚持 user141603 的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:14:20.400

[我在http://msdn.microsoft.com/en-us/library/ff525341(v=vs.93).aspx](http://msdn.microsoft.com/en-us/library/ff525341(v=vs.93).aspx)上没有看到 Mod ，但这里有一个解决方法：

```
Model.Floor(Model.Quotient(x,y))==Model.Ceiling(Model.Quotient(x,y)) 
```

仅当 x/y 是整数时才成立，因此 x%y==0。

还有其他方法可以组合允许的运算符来检查它是否可整。我最喜欢的（尽管由于浮点精度我不推荐它）是

```
Model.Sin(Math.PI*Model.Quotient(x,y))==0 
```

# c++ - Qt中线程间通信的实现

> ID：13789344
> 
> 赞同：2
> 
> 时间：2012-12-09T16:38:17.890
> 
> 标签：c++, multithreading, qt, qthread, qt5

我在实现以下场景时遇到问题。我的问题陈述是这样的：

1.  我有 3 个线程。ThreadCamera 用于从相机中抓取帧。ThreadProcess 用于处理（使用 OpenCV 在图像/帧抓取的图像上进行一些图像处理）帧和用于显示图像的主 GUI 线程。
2.  我不知道 ThreadProcess 处理图像需要多少时间。所以我想将图像从 ThreadCamera 传递给 ThreadProcess ，对图像进行一些图像处理并将其传递给主 GUI 线程进行显示。
3.  当 ThreadProcess 处理图像时，T​​hreadCamera 应该休眠。即**它不应该从相机中抓取更多帧**。当 ThreadProcess 完成图像处理任务时，它应该将图像和一些信息传递给主 GUI 线程。在此之后，只有 ThreadCamera 应该唤醒并从该（ThreadCamera）线程中运行的相机中获取下一帧/图像。

Thanx Guys...在将相机和图像处理工作放在一个线程中的一些评论之后，我想知道另一点..这是..

1.  如果在处理过程中不想让相机休眠怎么办？如果我松开 CameraThread 抓取的一些帧对我来说并不重要（无论如何，如果我睡觉或不让相机睡觉，我都会丢失）

我为每个进程（相机进程和图像处理作业）使用 QObject，并使用 movetoThread 命令使其在特定线程中运行。

有关实现和信号/插槽设计的任何见解都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:53:55.953

您正在寻找的是一个简单的“发布/订阅”模式。在这种类型的“分发”模式中，当客户端不处于接收图像的状态时，所有消息都被发送并由客户端丢弃

我将在您的应用程序中按以下方式实现它：

像你一样拥有所有单独的线程（相机、处理、GUI）。

让 CameraThread 周期性地（通过 qTimer 信号，如果你想让它简单的话）捕获图像并通过信号/插槽连接将其发送到 processingThread。

当 processingThread 正在处理图像时，它会设置一个状态标志（可以只是一个成员变量，一个 bool 就可以了）来表示它当前正在处理一个图像。处理完图像后，您设置标志表示您没有处理。

在从 CameraThread 接收图像的 processingThreads 插槽中，您将首先检查您当前是否正在处理图像。如果你是，你不对信号数据做任何事情，你只是返回。如果您不处理图像，您将存储信号数据并调用处理函数。

完成这项工作的技巧是将此[函数调用](http://doc.qt.digia.com/qt/qcoreapplication.html#processEvents)( `QCoreApplication::processEvents()`) 包含在处理函数的 ProcessingThreads 主循环中。这将允许您的 ProcessingThread 处理它在做一些有用的事情时收到的任何信号。

状态变量检查将允许您在处理当前图像时“丢弃”发送给您的所有新图像，而不是将它们排队。

# php - 电子邮件地址中的 Unicode 字符 - phpmailer - php

> ID：13789349
> 
> 赞同：0
> 
> 时间：2012-12-09T16:39:13.363
> 
> 标签：php, unicode, phpmailer

我有一个脚本，它通过表格向报名参加比赛的人发送一封确认电子邮件。

电子邮件是对象的属性，在该对象的构造函数中以下列方式设置：

> ```
> $this->email = mysqli_real_escape_string($link, $email);
> $this->email = iconv(mb_detect_encoding($this->email, mb_detect_order(), true), "UTF-8", $this->email); 
> ```

请注意，转换是我放在那里尝试解决这个问题的东西，但它没有用。

然后通过同一对象上的公共函数发送它： *在下面查看类 emailMessage，它是 PHPMailer 的扩展*

```
public function sendMail($subject, $message)
{
  global $CFG;
  $mail = new emailMessage();
  $mail->Subject  = $subject;
  $mail->setContent($message);
  $sentMails = 0;
  $errors = "";

  $mail->AddAddress($this->email);

  if(!$mail->Send())
  {
    $errorCount++;
    $errors .= 'Mailer error: ' . $mail->ErrorInfo . "<br/>";
  }
  else 
  {
    $sentMails++;
  }

  $mail->ClearAddresses();

  if($sentMails > 0)
    return true;
  if($errors != "")
  {
    echo $errors;
    return false;
  }
} 
```

这一切都非常好用，但是，**只要`$this->email`包含特殊字符，在本例中为 Æ、Ø 或 Å，脚本就会给我以下错误：**

`Mailer error: You must provide at least one recipient email address.`

我尝试了各种字符串编码，但似乎都不起作用。

我应该指出，丹麦域 (.dk) 允许包含这些特殊字符。

我真的希望有人能告诉我问题是什么！谢谢阅读。

最后但同样重要的是：正如所承诺的，PHPMailer 的扩展：

```
class emailMessage extends PHPMailer
{
  public function __construct()
  {
    $this->CharSet="UTF-8";
    $this->AddEmbeddedImage(calculateRelativePath() . "img/camp_carnival.png", "camp_carnival");
    $this->IsSMTP();  // telling the class to use SMTP
    //$this->Host     = $CFG->smtpServer; // SMTP server
    //$this->SMTPDebug  = 2;                     // enables SMTP debug information (for testing)
    $this->SMTPAuth   = true;                  // enable SMTP authentication
    $this->SMTPSecure = "tls";                 // sets the prefix to the servier
    $this->Host       = "smtp.gmail.com";      // sets GMAIL as the SMTP server
    $this->Port       = 587;                   // set the SMTP port for the GMAIL server
    $this->Username   = "x@domain.com";  // GMAIL username
    $this->Password   = "";            // GMAIL password
    $this->SetFrom('x@domain.com', 'Lasse Rørbæk');
    $this->AddReplyTo("x@domain.com","Lasse Rørbæk");
    $this->WordWrap = 50;
    $this->IsHTML(true);
  }

  public function setContent($content)
  {
    $this->Body = '
      <table width="100%" style="background-color:rgb(239,233,217);">
        <tr>
          <td height="15">
          </td>
        </tr>
        <tr>
          <td width="100%" style="margin:20px 0px 30px 0px;">
            <center>
              <img width="80%" alt="Camp*Carnival" src="cid:camp_carnival"/>
            </center>
          </td>
        </tr>
        <tr>
          <td style="width:100%;padding:20px 70px;">
            <div style="margin:auto;width:65%;border:3px solid rgba(0,0,0,0.5);border-radius: 7px;padding:10px 7px;background-color:rgba(255,255,255,0.7);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#7FFFFFFF,endColorstr=#7FFFFFFF);">
              ' . $content . '
            </div>
          </td>
        </tr>
      </table>';
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:43:03.280

该地址没有通过 phpmailer 的`ValidateAdress`功能，正则表达式甚至没有启用 utf8 支持。尽管即使启用了 utf8 模式，它仍然无法验证。

您应该启用异常以便看到它们。`true`您可以通过传递给构造函数来启用异常：

```
class emailMessage extends PHPMailer
{
    public function __construct()
    {
        parent::__construct(true); 
```

有了这个，您应该看到无效地址的异常。

# c# - 在文本框中搜索并突出显示文本

> ID：13789350
> 
> 赞同：0
> 
> 时间：2012-12-09T16:39:20.000
> 
> 标签：c#

我试图在我的程序中创建某种搜索功能，它只是突出显示在文本框中找到的所有关键字

关键字框在 t2.text 上，文本来自 bx2.text

首先我从这里尝试了这个方法[在给定的搜索文本中突出关键词](https://stackoverflow.com/questions/3530487/highlight-key-words-in-a-given-search-text)

正则表达式正在工作，但亮点不是

这里有什么问题吗？

```
 private void searchs()
    {
        var spattern = t2.Text;

        foreach(var s in bx2.Text)
        {
            var zxc = s.ToString();
            if (System.Text.RegularExpressions.Regex.IsMatch(zxc, spattern, System.Text.RegularExpressions.RegexOptions.IgnoreCase))
            {
               bx2.Text.Replace(bx2.Text, @"<span class=""search-highlight"">$0</span>");
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:44:11.447

链接的问题使用 HTML 格式，您不能在常规文本框中使用该格式。

您需要一个 RichText 框。在那里，您可以使用控件的方法和属性（不使用 HTML）格式化文本。

或者使用浏览器控件而不是文本框来使用 HTML 格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T04:15:27.360

```
private void findButton_Click(object sender, EventArgs e)
{
    int count = 0;
    string keyword = keywordTextbox.Text.Trim();//getting given searching string
    int startPosition = 0; //initializing starting position to search
    int endPosition = 0;
    int endArticle = articleRichTextbox.Text.Length;//finding total number of character into the article
    for (int i = 0; i<endArticle  ; i =startPosition )//creating a loop until ending the article
    {
        if (i == -1) //if the loop goes to end of the article then stop
        {
            break;
        }
        startPosition = articleRichTextbox.Find(keyword, startPosition, endArticle, RichTextBoxFinds.WholeWord);//using find method get the begining position when find the searching string
        if (startPosition >= 0)     //if match the string                                                         //if don't match the string then it  return -1
        {
            count++;//conunting the number of occuerence or match the search string
            articleRichTextbox.SelectionColor = Color.Blue;//coloring the matching string in the article
            endPosition = keywordTextbox.Text.Length;
            startPosition = startPosition + endPosition;//place the starting position at the next word of previously matching string to continue searching.

        }

    }

    if (count == 0)//if the givn search string don't match at any time
    {
        MessageBox.Show("No Match Found!!!");
    }

    numberofaccurTextbox.Text = count.ToString();//show the number of occurence into the text box
} 
```

# iphone - 操作方法：Flipboard 导航动画（不是翻页）

> ID：13789352
> 
> 赞同：2
> 
> 时间：2012-12-09T16:39:34.480
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

注意：我不是在问翻页动画。

我对制作类似的翻板导航动画非常感兴趣。（请参阅随附的屏幕截图）。旧视图会下沉并消失，而传入视图将从右滑到中心

是否有任何我应该查看的 github 存储库或代码片段？

![在此处输入图像描述](../Images/8b2ae5128f76d7074daf038249ab9087.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T22:39:07.677

我认为这就是您正在寻找的[https://github.com/michaelhenry/FlipBoardNavigationController](https://github.com/michaelhenry/FlipBoardNavigationController)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:27:34.310

经过长时间的搜索，在 github 中找到了这个。[https://github.com/dingtianran/DTRNavigationController](https://github.com/dingtianran/DTRNavigationController)

# java - 在 Eclipse 中识别类的视觉帮助

> ID：13789355
> 
> 赞同：1
> 
> 时间：2012-12-09T16:39:54.913
> 
> 标签：java, eclipse-plugin, highlighting, visual-assist

当我的项目变得太大时，识别越来越多的类也变得更加困难。我正在为 Eclipse 寻找一个插件，它可以通过为它们分配图标或颜色来更容易地区分这些类。

或者，我正在寻找任何工具、插件或建议来查看混乱的类。

（目前我只使用包来分组类）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:41:03.817

您应该充分使用软件包。这意味着，每当您发现现有包中的至少 2 个类共享一个共同方面时，请考虑将它们移动到另一个子包中。

随着时间的推移，这可能会导致包名称很长，例如`org.eclipse.product.addon.technology.ui.someview.listeners`. 由于不方便浏览，使用 Eclipse 的[压缩包名显示](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/concepts/concept-java-views-presentation.htm)，可以将任意包路径替换为任意字符串（仅在包浏览器中显示）。因此，您的非常长的包名称会缩短，如下所示：

![在此处输入图像描述](../Images/3d2307103e6ce681ce9e59bb88d5e096.png)

# android - 在android联系人应用程序中更改文本颜色添加字段

> ID：13789358
> 
> 赞同：1
> 
> 时间：2012-12-09T16:40:39.233
> 
> 标签：android, field, add, contact, textcolor

我正在通过编辑 XML 为 LG ICS 联系人应用程序设置主题，但是当我尝试添加新字段时，我无法更改列表项的文本颜色。事件、网站、昵称、即时消息、备注是黑色的，我想要这些是白色的。

# java - 在 ListView 中显示带有 HTML 标记的文件

> ID：13789361
> 
> 赞同：0
> 
> 时间：2012-12-09T16:40:54.640
> 
> 标签：java, android, html, string, listview

我有一个在线 .txt 文件，我正在下载到我的下载文件夹，`/mnt/sdcard/Download/testfile.txt`然后在 ListView 中显示它。.txt 文件包含`<html><head><title>`我希望删除的 html 标记等。我还需要替换所有的`<br />`，`\n`以便我`BufferedReader`将它们视为新行并将单独的条目添加到 ListView 中。

目前，它会将文本加载到带有所有标记的单个 ListView 条目中，而不是在`<br />`.

以下是我当前的代码。

```
public void load() {
    try {
        File sdcard = Environment.getExternalStorageDirectory();
        BufferedReader bufferedReader = new BufferedReader(new FileReader(
                sdcard + "/Download/testfile.txt"));
        while ((line = bufferedReader.readLine()) != null) {
            line = bufferedReader.readLine();
            if (line != "")
                entries.add(line);
        }
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_activated_1, entries);
        lv.setAdapter(adapter);
        bufferedReader.close();
    } catch (java.io.FileNotFoundException e) {
    } catch (java.io.IOException e) {       
    }
} 
```

`testfile.txt`如下：

`<html><head><title>mytextfile</title></head><body style ='font-family:monospace:'>1\. Line 1 - Item 1<br />2\. Line 2 - Item 2<br />3\. Line 3 - Item 3<br />4\. Line 4 - Item 4<br />5\. Line 5 - Item 5<br />6\. Line 6 - Item 6<br />7\. Line 7 - Item 7<br />8\. Line 8 - Item 8<br />9\. Line 9 - Item 9<br />10\. Line 10 - Item 10<br />11\. Line 11 - Item 11<br />12\. Line 12 - Item 12<br />13\. Line 13 - Item 13<br />14\. Line 14 - Item 14<br />15\. Line 15 - Item 15<br />16\. Line 16 - Item 16<br />17\. Line 17 - Item 17<br />18\. Line 18 - Item 18<br />19\. Line 19 - Item 19<br />20\. Line 20 - Item 20</body></html>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:58:34.947

您可以使用 Java HTML 解析器来剥离 html：http: [//jsoup.org/](http://jsoup.org/)

`Jsoup.parse(yourHtmlString).text()`应该这样做。

关于换行符，请替换它们：

`replaceAll("(<br />)", "\\\\n")`

但我不能告诉你的是，使用该库与 Android 是否会出现兼容性问题。

# prolog - 使用 CLPFD 求解 CuFrog

> ID：13789362
> 
> 赞同：2
> 
> 时间：2012-12-09T16:40:56.247
> 
> 标签：prolog, puzzle, clpfd

好的，所以我有一个叫做 CuFrog 的谜题，它包括在每个位置用一个数字填充一个 3x3x3 的立方体，但是当从一个位置移动到另一个位置时会跳过一个位置。例如，考虑一个扁平的立方体，第 1 侧 (1,1) 右侧的有效位置将是第 1 侧的 (3,1)。

所以我在 Prolog 中使用约束来执行此操作，并且我已经给出了每个变量的域（1 到 54），我已经说过它们必须都是不同的，并且对于每个位置，集合中的一个位置right-left-down-up 必须是该位置的当前值 + 1。

另外，我已经给出了这个谜题的入口点，这意味着我已经将数字 1 放在了第一个位置。

问题是，当我标记变量时，SICStus 没有找到我的答案。:( 看来我一定是在某处遗漏了限制，或者我做错了什么。有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-01T18:17:14.287

So you say the CLP(FD) doesn't find a solution. Do you mean it terminates with "no" or do you mean it doesn't terminate?

The problem looks like a [Hamiltonian path](http://en.wikipedia.org/wiki/Hamiltonian_path_problem) problem. It could be that the search needs exponential time, and simply doesn't terminate in practical time.

In this particular case, giving restrictions like symmetry breaking heuristics, could in fact reduce the search time! For example from your starting point, you could fix the search in 2 directions, the other directions can be derived later.

So if the answer is "No", this means too many restrictions. If the answer is that it doesn't terminate, this means not enough restrictions or impossible to practically solve.

Despite all the brute force you put into searching a path, it might later turn out that a solution is systematic. Or you might get the idea by yourself.

Bye

# php - 使用输入搜索列并在输入匹配时获取一行

> ID：13789364
> 
> 赞同：1
> 
> 时间：2012-12-09T16:41:09.857
> 
> 标签：php, arrays

我需要一点帮助。我已经用谷歌搜索了这个废话，并不断得到不是我想要的答案。

好的，现在让我们说这是我的数组

```
<?php  $shop = array( array("rose", 1.25 , 15),
           array("daisy", 0.75 , 25),
           array("orchid", 1.15 , 7) 
         ); ?> 
```

我怎样才能搜索这个数组。找到我需要的内容后，我可以选择找到此信息的行。选择行后，我可以选择在其中找到信息的行中的哪些信息。

例如：

我想知道兰花的价格。所以我会输入兰花然后它会选择兰花在这样做之后它会移动到第二列并得到1.15。或者如果我想知道有多少兰花库存，它会选择第三行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T16:44:07.650

```
<?php

$shop = array( array("rose", 1.25 , 15),
           array("daisy", 0.75 , 25),
           array("orchid", 1.15 , 7) 
         );

$search="daisy";         

foreach($shop as $a)
  if($a[0]==$search)
    echo $a[1];         

?> 
```

# jquery - 如何使用 jquery 获取带有值的 DropDown 的文本？

> ID：13789365
> 
> 赞同：-1
> 
> 时间：2012-12-09T16:41:11.627
> 
> 标签：jquery

大家好，我有一个下拉列表，其中包含一些带有值的选项

```
 <select id="displaytype">
      <option value="1002">TextBox</option>
      <option value="1003">CheckBox</option>    
      </select>

   var value="option value like(1002)" want the text of this value 
```

现在我有一个使用这个值的下拉列表的值，我应该从下拉列表中获取值的文本，任何人都可以在这里帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:43:40.580

要获取选项的文本，而不是其值，您可以使用该[`.text()`](http://api.jquery.com/text/)方法。

要获取所选选项的文本，您可以使用[`option:selected`](http://api.jquery.com/selected-selector/)选择器：

```
$("#displaytype option:selected").text(); 
```

如果要获取特定选项的文本，可以使用[`:eq()`](http://api.jquery.com/eq-selector/)选择器或[`.eq()`](http://api.jquery.com/eq/)方法来选择某个索引处的元素（从零开始）：

```
// Get the text of the first option in the select list
$("#displaytype option:eq(0)").text();
$("#displaytype option").eq(0).text(); 
```

[**演示**](http://jsfiddle.net/3p4kZ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T16:42:19.343

您可以使用 text() for selected 选项来获取选择文本。

**[现场演示](http://jsfiddle.net/rajaadil/cbbWz/1/)**

```
alert($('#displaytype').val());                 //for getting selected item value 
alert($('#displaytype option:selected').text()); //for getting selected item text 
```

要浏览所有选项并获取它们的 text()，您可以使用[**each()**](http://api.jquery.com/jQuery.each/)

[**现场演示**](http://jsfiddle.net/rajaadil/cbbWz/2/)

```
$('#btn').click(function() {
    $('#displaytype option').each(function() {
        alert($(this).text());
    });
});​ 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T16:45:12.703

如果您想要下拉列表的值：

```
$('#displaytype').val(); 
```

如果所选选项的文本：

```
$('#displaytype option:selected").text(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T16:47:47.527

如果未选择选项但您想按值获取文本：

```
$('#displaytype option[value=1002]').text(); 
```

# android - Android粘性后台服务在关闭后重新启动应用程序

> ID：13789368
> 
> 赞同：1
> 
> 时间：2012-12-09T16:41:45.390
> 
> 标签：android, android-4.2-jelly-bean, sticky, background-service

我正在开发一个 Android 应用程序，它需要每隔一小时左右在后台进行一些更新。我有一个后台服务，我已经将其设为 Sticky。我正在使用 Timer.scheduleAtFixedRate 来安排更新。

这似乎工作正常。但是我注意到，当我关闭应用程序时，下次运行计划的更新时，它会导致 Application.onCreate 再次被调用。

这是一个问题，因为 Application.onCreate 是我从准备显示给用户的 API 获取数据的地方。我不希望这发生在后台。

这是预期的行为吗？如果是这样，也许我需要在 onCreate 中添加一个检查以查看应用程序是否首先在前台？或者，也许我有什么设置错误？

谢谢！

ps 这是运行 Jelly Bean 4.2.1 的 Galaxy Samsung

后台服务代码：

```
@EService
public class BackgroundService extends Service {

    ...

    private Timer timer = new Timer();

    private void performUpdate() {

        // Do the stuff here that we need to do on a schedule...
        Log.i(LOG_CONTEXT, "Perform scheduled update");

        ...            

    }

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {

        Log.d(LOG_CONTEXT, "Background thread started");

        timer.scheduleAtFixedRate(new TimerTask() {
            public void run() {
                performUpdate();
            }
        }, 0, UPDATE_INTERVAL);

        // Sticky means service will continue running until explicitly stopped
        return START_STICKY;
    }

    @Override
    public void onDestroy() {

        Log.d(LOG_CONTEXT, "Background thread stopped");            
        timer.cancel();

    }

} 
```

申请代码：

```
@EApplication
public class MyApplication extends Application {

    ...

    @Override
    public void onCreate() {
        super.onCreate();
        initApp();
    }

    private void initApp() {

        // This is where I want to do stuff when the app is actually
        // opened by the user, not every time the background service
        // update occurs!

        Log.i(LOG_CONTEXT, "Initialise. Why does this happen again after app's closed?");

        ...

    }

    ... 
```

日志：

```
12-09 16:28:15.828: I/MyApplication(3049): Initialise. Why does this happen again after app's closed?

[Now I close the app, by pressing the Recent Apps menu button and swiping it away]

12-09 16:28:16.015: I/BackgroundService(3049): Perform scheduled update
12-09 16:28:33.875: I/MyApplication(3080): Initialise. Why does this happen again after app's closed? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T16:51:50.803

您的服务作为应用程序的一部分运行，因此为它创建了应用程序。

大多数应用程序不需要扩展`Application`. 如果没有看到你所有的代码，我很确定你也不需要。只需扩展`Activity`向用户显示内容的类并在其中执行 API 内容。服务运行时不会创建它。

# awesome-wm - 使客户端显示在屏幕上特定位置和所有窗口顶部的每个标签中

> ID：13789369
> 
> 赞同：3
> 
> 时间：2012-12-09T16:41:47.747
> 
> 标签：awesome-wm

和锡纸上写的差不多。我试图让一个小图形保持在屏幕上的特定位置，无论我正在查看哪个标签，并让它始终位于顶部。不幸的是，到目前为止，除了为客户端设置浮动规则之外，我什至不知道从哪里开始。如果窗口的标题没有显示在 Awesome 的任务栏中，那就太好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T17:34:56.413

你想要的东西叫做“粘性”。您可以在规则中执行“sticky = true”，就像您可以将客户端设置为浮动一样。

对于任务栏：“skip_taskbar = true”

# php - 试图制作某种类型的 IF mySQL 语句

> ID：13789370
> 
> 赞同：2
> 
> 时间：2012-12-09T16:42:05.630
> 
> 标签：php, mysql, sql, database

我正在尝试制作一个其中包含一种 IF 语句的 SQL 语句。这是我目前的声明：

```
$sql = "SELECT b.FrameNumber, b.BikeCode, p.FrameNumber 
        FROM BikeStock b LEFT JOIN Purchase p 
               on b.FrameNumber = p.FrameNumber 
        WHERE b.bikecode = '$bikecode'"; 
```

我想把上面的陈述和下面的文字结合起来，但不知道怎么做。

如果 BikeStock 表中的 PurchaseID 的值大于 0，它将选择不同的帧号。

非常感谢您的帮助，并在此先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:47:04.060

你应该

```
SELECT b.BikeCode, IF(b.PurchaseID > 0, 
        p.FrameNumber, b.FrameNumber) AS FrameNumber 
    FROM BikeStock b 
    LEFT JOIN Purchase p on b.FrameNumber = p.FrameNumber 
    WHERE b.bikecode = '$bikecode' 
```

PS 不要忘记逃避`$bikecode`SQL 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T16:47:23.947

```
SELECT b.FrameNumber, b.BikeCode, 
    CASE WHEN b.purchasreID > 0 THEN p.other_framenumber ELSE p.FrameNumber END AS FrameNumber
FROM BikeStock b LEFT JOIN Purchase p 
ON b.FrameNumber = p.FrameNumber
WHERE b.bikecode = '$bikecode' 
```

除此之外，考虑使用[Bobby Tables](http://bobby-tables.com/)来防止 SQL 注入。

# jscrollpane - 带有百分比填充的jScrollPane缺少右边框？

> ID：13789382
> 
> 赞同：2
> 
> 时间：2012-12-09T16:43:05.423
> 
> 标签：jscrollpane, padding

我在具有 1px 边框和 % 填充的元素上使用 jScrollPane 来插入 div 内容。首次显示时一切看起来都很好。

当我向下调整窗口大小时，我重新初始化 jScrollPane 并且我的右边框消失了。似乎没有重新计算 % 填充，全屏显示的像素值被保留并用于计算新元素的宽度，导致右边框超出可视区域。

任何有关如何解决此问题或解决方法的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:32:35.783

您需要在重新创建 jScrollPane 之前销毁 api，如下所示：

```
var pane = $('.scroll-pane');
var api = pane.data('jsp');
api.destroy();
$('.scroll-pane').jScrollPane(); 
```

# java - 移动作为 Web 服务器 HTML

> ID：13789388
> 
> 赞同：1
> 
> 时间：2012-12-09T16:43:42.440
> 
> 标签：java, android, html

我正在做一个项目，其中我的 android 用作 Web 服务器；输入带有端口号的 IP 地址，然后打开一个 Web 界面，用户可以将文件上传到手机。我想在 Web 界面上显示一些图片，以便我们的界面看起来不错。

**如何在图像 src"" 文件中引用可绘制或原始或资产文件夹中的图像**

这是我的代码：

```
 private String getZipLink(long folderId) {
     return "<a href=\"/zip/" + folderId + "/folder.zip\"><img src=\"file:///android_res/raw/img\" />" +
     "Zip of Entire Folder</a>"; 
```

如何在那里添加图像？}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:05:36.090

也许您可以在 HTML 中嵌入图像数据（而不是尝试提供指向图像数据的链接）：请参阅[Inline Images with Data URLs](http://www.websiteoptimization.com/speed/tweak/inline-images/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:11:04.363

如果您可以控制 Web 服务器中的请求处理，则可以使用图像 URL，例如

```
<img src="images/myimage.png" ... /> 
```

`images/myimage.png`并通过返回具有正确 MIME 类型的字节流来处理对资源的请求`image/png`。这与 Java EE Servlet 中使用的代码非常相似，因此您可以搜索示例代码并使其适应您的环境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T17:11:36.567

你可以做这样的事情

```
 /**
     * This method starts the web server listening to the port 8080
     */
    protected void start() {

        new Thread(new Runnable() {

            @Override
            public void run() {
                Log.d(TAG, "Secure Web Server is starting up on port 8080");
                try {
                    // Create the secure server socket
                    sss = (SSLServerSocket) sssf.createServerSocket(8080);
                } catch (Exception e) {
                    System.out.println("Error: " + e);
                    return;
                }

                Log.d(TAG, "Waiting for connection");
                while (isRunning) {
                    try {
                        // Wait for an SSL connection
                        Socket socket = sss.accept();

                        Runtime rt = Runtime.getRuntime();
                        Process pr = rt.exec("lsof -i:"+socket.getPort());
                        System.out.println("Process:::"+pr.getInputStream());

                        InputStream in1 = pr.getInputStream();
                        InputStreamReader is = new InputStreamReader(in1);
                        StringBuilder sb=new StringBuilder();
                        BufferedReader br = new BufferedReader(is);
                        String read = br.readLine();

                        while(read != null) {
                            //System.out.println(read);
                            sb.append(read);
                            read =br.readLine();

                        }

                        System.out.println("Process read:::"+sb.toString());

                        // Got a connection
                        Log.d(TAG, "Connected, sending data.");

                        BufferedReader in = new BufferedReader(
                                new InputStreamReader(socket.getInputStream()));
                        PrintWriter out = new PrintWriter(socket
                                .getOutputStream());

                        // Read the data until a blank line is reached which
                        // signifies the end of the client HTTP headers
                        String str = ".";
                        while (!str.equals(""))
                            str = in.readLine();

                        // Send a HTTP response
                        out.println("HTTP/1.0 200 OK");
                        out.println("Content-Type: text/html");
                        out.println("Server: Android KeyChainiDemo SSL Server");
                        // this blank line signals the end of the headers
                        out.println("");
                        // Send the HTML page
                        out.println("<H1>Welcome to Android!</H1>");
                        // Add an embedded Android image
                        out.println("<img src='data:image/png;base64," + base64Image + "'/>");
                        out.flush();
                        socket.close();
                    } catch (Exception e) {
                        Log.d(TAG, "Error: " + e);
                    }
                }
            }
        }).start();

    }

base64Image = createBase64Image(ctx);

 /**
     * This method reads a binary image from the assets folder and returns the
     * base64 encoded image string.
     *
     * @param ctx The service this web server is running in.
     * @return String The base64 encoded image string or "" if there is an
     *         exception
     */
    private String createBase64Image(Context ctx) {
        BufferedInputStream bis;
        try {
            bis = new BufferedInputStream(ctx.getAssets().open(**image file stored in assets folder **));
            byte[] embeddedImage = new byte[bis.available()];
            bis.read(embeddedImage);
            return Base64.encodeToString(embeddedImage, Base64.DEFAULT);
        } catch (IOException e) {
            e.printStackTrace();
        }
        return "";
    } 
```

所以把你的图片放在android的assets文件夹中

有关更多说明，请参阅 Android4.0 的 Android 示例中的 Android APIDemos 中的 KeyChainDemo

# objective-c - NSString 模式搜索

> ID：13789389
> 
> 赞同：1
> 
> 时间：2012-12-09T16:43:42.783
> 
> 标签：objective-c, string, nsstring

我想在 NSString 中搜索特定值。

```
<INPUT TYPE="HIDDEN" NAME="one" VALUE="getthisvalue">
<INPUT TYPE="HIDDEN" NAME="two" VALUE="getthisvalue">
<INPUT TYPE="HIDDEN" NAME="three" VALUE="getthisvalue">
<INPUT TYPE="HIDDEN" NAME="four" VALUE="getthisvalue"> 
```

我需要在上面的代码中获取“getthisvalue”。我正在考虑使用扫描仪。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T07:09:40.360

使用下一个方法（注意：使用 ARC）：

```
-(NSMutableArray*)scanInString:(NSString*)string beforeValue:(NSString*)beforeValue afterValue:(NSString*)afterValue{
    NSMutableArray *foundedResults = [NSMutableArray new];
    NSString *allString = [[NSString alloc] initWithString:string];
    BOOL isHavingValue = NO;
    do{
        NSRange beforeRange = [allString rangeOfString:beforeValue];
        if(beforeRange.location != NSNotFound){
            int beforePos = beforeRange.location + beforeRange.length;
            allString = [allString substringFromIndex:beforePos];
            NSRange afterRange = [allString rangeOfString:afterValue];
            if(afterRange.location != NSNotFound){
                isHavingValue = YES;
                int afterPos = afterRange.location;
                NSRange valueRange = NSMakeRange(0, afterPos);
                NSString *value = [allString substringWithRange:valueRange];
                if(value){
                    [foundedResults addObject:value];
                }
            }
            else{
                isHavingValue = NO;
            }
        }
        else{
            isHavingValue = NO;
        }
    }while (isHavingValue);
    return foundedResults;
} 
```

来电：

```
NSString *string = @"<INPUT TYPE=\"HIDDEN\" NAME=\"one\" VALUE=\"getthisvalue\"><INPUT TYPE=\"HIDDEN\" NAME=\"two\" VALUE=\"ILYA2606\"><INPUT TYPE=\"HIDDEN\" NAME=\"three\" VALUE=\"XXX\"><INPUT TYPE=\"HIDDEN\" NAME=\"four\" VALUE=\"getthisvalue\">";
NSLog(@"results = %@", [self scanInString:string beforeValue:@"VALUE=\"" afterValue:@"\""]); 
```

# iphone - iphone 3.5 和 4 问题

> ID：13789390
> 
> 赞同：0
> 
> 时间：2012-12-09T16:43:43.737
> 
> 标签：iphone, ios, ios5, ios6

我正在制作一个应用程序是 ios6，但我也必须使其与 ios5 兼容。我与图书馆建立了弱链接，它们工作正常，但出现了一个问题，我仍然没有解决它。问题在于 iphone 5 和 iphone 4 尺寸。我有一些问题：

1.  在 xib 下查看我应该选择 iphone 3.5 或 iphone 4 的视图大小？
2.  如果我根据 4 大小放置按钮和其他控件，而不是当我在 iphone 4 上运行它时它们会熄灭，反之亦然？
3.  我应该做两个xibs来克服它吗？
4.  还是有任何其他方法可以调整我的视图大小并使其与 iphone 4 和 5 兼容？

**编辑** iam 在 ios6 上制作应用程序，我希望我的应用程序同时在 iphone 4 和 5 上运行。

谢谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T16:52:56.697

一般来说，您不必担心这一点，因为 iOS 可以使用以下任一方式为您移动控件：

*   **自动调整大小**：如果支持 6 之前的 iOS 版本，请使用自动调整大小掩码（有时亲切地称为“弹簧和支柱”，当以编程方式访问时，称为`autoresizingMask`），以便一切适当地移动。所以选择“大小检查器”并调整“自动调整大小”蒙版：

    ![自动调整大小](../Images/86b567319f912e417a20e39385e04c06.png)

*   **Autolayout**：如果您正在开发 iOS 6 及更高版本的应用程序，您还可以使用新的“自动布局”。请参阅包含大量相关链接的[Cocoa Auto Layout Guide 。](http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html#//apple_ref/doc/uid/TP40010853-CH1-DontLinkElementID_2)另请参阅[Xcode 4 用户指南](http://developer.apple.com/library/mac/documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/030-Edit_User_Interfaces/edit_user_interface.html#//apple_ref/doc/uid/TP40010215-CH6-SW56)。

*   **打开和关闭自动布局：**如果你想开发一个 iOS 4/5 兼容的应用程序，你可能需要关闭“自动布局”。如果是这样，请转到 Interface Builder，单击背景上的某个位置，在右侧面板中选择“文件检查器”，然后检查/更改“使用自动布局”标志。

    ![关闭自动布局](../Images/cbae172a7f35c746333075312c5be280.png)

我建议为 3.5" 屏幕设计。让它调整大小或移动您的控件以用于 4" 屏幕。

# php - 将变量从类添加到另一个类似的类

> ID：13789399
> 
> 赞同：0
> 
> 时间：2012-12-09T16:44:27.527
> 
> 标签：php

我有两个类似的类，其中包含很多整数变量。

我需要一种将所有变量从一个类添加到另一个类的方法。

我的课和这个类似

```
class statistics{

var $Variable_1
var $Variable_2
var $Variable_3
var $Variable_4
var $Variable_5
var $Variable_6
var $Variable_7
var $Variable_8
var $Variable_9
var $Variable_10

/* 
.. to 100 
*/

} 
```

我需要的只是从类到类`ADD`的所有这些变量，而且我认为我的代码对于.`first``second``php`

```
$class1->Variable_1 += $class2->Variable_1

    /* 
    .. to 100 
    */ 
```

没有机会使用`for loop`或`foraech`因为变量没有任何键。此外，变量名称不包含任何数字。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T16:58:44.007

首先，最好不要使用`var`关键字。今天有三个级别的可见性 ( `public protected private`) 使用它们。

然后，如上所述，继承是您想要的，因为当类 B 扩展 A 时，它是 A，但具有更多属性或操作或意义。所以在你的 B 类中会有你的变量。

我发现的其他事情：

> 没有机会使用 for 循环或 foraech，因为变量没有任何键。

这是非常错误的。foreach over object 的默认行为是遍历所有公共属性（用`public`or定义`var`），将它们的名称作为键，将它们的值作为值，因此：

```
foreach(new class1() as $key=>$value){
     echo $key.'=>'.$value;
} 
```

将打印所有情侣属性名称 => 属性值。

如果您想将动态变量添加到 php 对象，我认为可以通过简单地使用`$yourObject->yourAttribute = 42;` 如果不能，我很确定您可以使用 __set 和 __get 魔术方法来创建此行为：

```
class class2{
    public function __set($name,$value){
       $this->$name = $value;//will create a public attribute with $name as name
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:03:01.553

你是这个意思？

```
class statistics{

    var $Variable_1;
    var $Variable_2;
    var $Variable_3;
    var $Variable_4;
    var $Variable_5;
    var $Variable_6;
    var $Variable_7;
    var $Variable_8;
    var $Variable_9;
    var $Variable_10;

}

$class1 = new statistics();
$class2 = new statistics();

$class1->Variable_1 = 5;
$class2->Variable_1 = 2;

$object_vars = get_object_vars($class1);
foreach ($object_vars as $name => $value) {
    $class2->$name += $value;
}

echo($class2->Variable_1); //result in 7. 
```

# computer-vision - Viola Jones - 如何扩展弱分类器（功能）

> ID：13789403
> 
> 赞同：2
> 
> 时间：2012-12-09T16:44:58.600
> 
> 标签：computer-vision, face-detection

一旦你为 Viola Jones 人脸检测器训练了一个强分类器，你应该在你的测试图像上运行一个 24x24 的子窗口。一旦你将它移动到屏幕上，你应该缩放它（论文建议每次 x1.5）。

我的问题是，这一点是很容易在不同的尺度上计算特征。但是，您应该如何扩展该功能？您只需将宽度/高度乘以比例因子？或者你也必须移动它？（向右下方缩放）。或者您是否必须将其相乘以使其与原始子窗口高度/宽度的宽度/高度比保持不变？

这是我的意思的图像：![在此处输入图像描述](../Images/157b750e55dcc562693047ea3ba303d6.png)

原来的子窗口是 4x3，我将它乘以 2，所以它是 8x6。2x1 功能应该有多大？它的左上角应该在哪里？同一个地方？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:13:18.283

是的，只需将窗口的高度和宽度分别乘以 1.25（或您想要增加的任何比例因子）。

对于特征顶部/左侧/右侧/底部的位置，也应该缩放，以便它们占据与较大窗口相同的相对位置。

在您的示例中，2x1 功能最终将成为 4x2，以较大的窗口为中心（顺便说一句，您绘制了较大的窗口宽度 9，而不是宽度 8）。

# java - 正则表达式在任何空格之前只匹配一个字符一次

> ID：13789410
> 
> 赞同：0
> 
> 时间：2012-12-09T16:45:22.063
> 
> 标签：java, regex

在 Java 中，我将使用什么正则表达式来匹配只有一个冒号的字符串并确保冒号出现在任何空格之前？

例如，它应该匹配这些字符串：

```
label: print "Enter input"
But: I still had the money.
ghjkdhfjkgjhalergfyujhrageyjdfghbg:
area:54 
```

但不是

```
label: print "Enter input:"
There was one more thing: I still had the money.
ghfdsjhgakjsdhfkjdsagfjkhadsjkhflgadsjklfglsd
area::54 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T16:48:48.863

如果你使用它`matches`（需要匹配整个字符串），你可以使用

```
[^\\s:]*:[^:]* 
```

这意味着：任意多个非`whitespace`, 非`:`字符，然后是 a `:`，然后是任意多个非`:`字符。

我真的只使用了两个正则表达式概念：（否定）[字符类](http://www.regular-expressions.info/charclass.html)和[重复](http://www.regular-expressions.info/repeat.html)。

如果您想在 之前或之后至少需要一个字符`:`，请将对应的字符`*`替换为`+`（正如 jlordo 在评论中指出的那样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T16:47:31.937

以下应该有效：

```
^[^\s:]*:(?!.*:) 
```

如果您的字符串可以包含换行符，请使用 DOTALL 标志或将正则表达式更改为以下内容：

```
(?s)^[^\s:]*:(?!.*:) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T16:56:02.670

这取决于我们所说的空白，它可能是

```
[^\\p{Space}:]*:[^:] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T19:16:18.517

以下内容应该可以帮助您入门：

```
 Matcher MatchedPattern = Pattern.compile("^(\\w+\\:{1}[\"\\w\\s\\.]*)$").matcher("yourstring"); 
```

# java - Xstream Parser 中的数组转换

> ID：13789418
> 
> 赞同：0
> 
> 时间：2012-12-09T16:46:19.187
> 
> 标签：java, xml, xstream

您好我正在尝试使用 Xstream 解析器将以下 xml 转换为对象。我尝试使用下面的代码来转换 xml，但我得到了

```
Duplicate field ERRORS
---- Debugging information ----
field               : ERRORS
class               : com.avidev9.Fees.GCSFeesResponse$DebitsWSDS
required-type       : com.avidev9.Fees.GCSFeesResponse$DebitsWSDS
converter-type      : com.thoughtworks.xstream.converters.reflection.ReflectionConverter
path                : /DebitsWSDS/ERRORS[2]
line number         : 1
version             : null 
```

我使用的代码

```
 xstream.alias("DebitsWSDS", DebitsWSDS.class);
            xstream.alias("DEBITS", DebitsWSDS.DEBITS.class);
            xstream.alias("list", DebitsWSDS.class);
            xstream.addImplicitCollection(DebitsWSDS.class, "ERRORS");

            xstream.alias("ERROR_ID", String.class);
            xstream.alias("TABLE_NAME", String.class);
            xstream.alias("TABLE_ID", String.class);
            xstream.alias("ROW_ID", String.class);
            xstream.alias("ERROR_TEXT", String.class);
            xstream.alias("ERROR_CODE", String.class);
            xstream.alias("COLUMN_ID", String.class);
            xstream.alias("ERROR_TYPE", String.class); 
```

XML

```
 <DebitsWSDS xmlns="">
        <DEBITS>
            <DEBIT_ID>-1</DEBIT_ID>
            <ACCOUNT_ID>12321312313</ACCOUNT_ID>
            <EFFECTIVE_DATE>2012-12-12T00:00:00-06:00</EFFECTIVE_DATE>
            <DAY_OF_MONTH>12</DAY_OF_MONTH>
            <DEBIT_TYPE>S</DEBIT_TYPE>
            <OCCURS_NUM>1</OCCURS_NUM>
            <DEBIT_AMOUNT>750</DEBIT_AMOUNT>
            <MEMO>S</MEMO>
            <ACTIVE_FLAG>Y</ACTIVE_FLAG>
            <MODIFIED_BY/>
            <DEBIT_AUTHORIZED/>
            <DEBIT_AUTHORIZED_BY/>
            <REMAINING_OCCURRENCES>0</REMAINING_OCCURRENCES>
        </DEBITS>

        <ERRORS>
            <ERROR_ID>1</ERROR_ID>
            <TABLE_NAME>Debits</TABLE_NAME>
            <TABLE_ID>-1</TABLE_ID>
            <ROW_ID>0</ROW_ID>
            <COLUMN_ID>EXCEPTION</COLUMN_ID>
            <ERROR_TYPE>E</ERROR_TYPE>
            <ERROR_CODE>4</ERROR_CODE>
            <ERROR_TEXT>This debit type is not allowed for this company and policy group</ERROR_TEXT>
        </ERRORS>

        <ERRORS>
            <ERROR_ID>2</ERROR_ID>
            <TABLE_NAME>Clients</TABLE_NAME>
            <TABLE_ID/>
            <ROW_ID>0</ROW_ID>
            <COLUMN_ID>CLOSE_SCHED_DATE</COLUMN_ID>
            <ERROR_TYPE>E</ERROR_TYPE>
            <ERROR_CODE>4</ERROR_CODE>
            <ERROR_TEXT>Client has been closed.  Cannot Authorize Draft.</ERROR_TEXT>
        </ERRORS>

        <ERRORS>
            <ERROR_ID>3</ERROR_ID>
            <TABLE_NAME>Debits</TABLE_NAME>
            <TABLE_ID>-1</TABLE_ID>
            <ROW_ID>0</ROW_ID>
            <COLUMN_ID>EXCEPTION</COLUMN_ID>
            <ERROR_TYPE>E</ERROR_TYPE>
            <ERROR_CODE>4</ERROR_CODE>
            <ERROR_TEXT>Cannot Schedule a Debit or Draft.  Client has been closed.</ERROR_TEXT>
        </ERRORS>

            <ERRORS>
                <ERROR_ID>1</ERROR_ID>
                <TABLE_NAME>Debits</TABLE_NAME>
                <TABLE_ID>-1</TABLE_ID>
                <ROW_ID>0</ROW_ID>
                <COLUMN_ID>ACTIVE_FLAG</COLUMN_ID>
                <ERROR_TYPE>W</ERROR_TYPE>
                <ERROR_CODE>4</ERROR_CODE>
                <ERROR_TEXT>Creating debit on inactive Client account.</ERROR_TEXT>
            </ERRORS>
    </DebitsWSDS> 
```

我的班级结构。

```
 package com.avidev9.Fees;

import java.util.List;

public class DebitsWSDS {
        public List<ERROR> ERRORS;
        public DEBITS DEBITS;

    public class ERROR {
        public String TABLE_NAME;
        public String TABLE_ID;
        public String ERROR_ID;
        public String ROW_ID;
        public String ERROR_TEXT;
        public String ERROR_CODE;
        public String COLUMN_ID;
        public String ERROR_TYPE;
    }

    public class DEBITS {
        public String EFFECTIVE_DATE;
        public String ACTIVE_FLAG;
        public String ACCOUNT_ID;
        public String DEBIT_AUTHORIZED_BY;
        public String DAY_OF_MONTH;
        public String DEBIT_ID;
        public String MEMO;
        public String REMAINING_OCCURRENCES;
        public String DEBIT_TYPE;
        public String OCCURS_NUM;
        public String DEBIT_AMOUNT;
        public String DEBIT_AUTHORIZED;
        public String MODIFIED_BY;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:01:28.057

通过 xstream 处理 List 有点棘手。您需要为部分添加implicitCoolection

```
xstream.alias("list", ERRORS.class);
xstream.addImplicitCollection(ERRORS.class, "ERRORS"); 
```

希望这可以帮助！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:20:42.813

在您的班级中，您有字符串和整数变量的组合。但是在使用 alias() 时，您只提到了`String.class`.

您应该将所有变量声明为 String 并尝试运行您的代码。

# django - 权限系统

> ID：13789419
> 
> 赞同：0
> 
> 时间：2012-12-09T16:46:21.020
> 
> 标签：django, permissions

我的系统中有与所有者和协作者有关系的对象，现在我需要添加查看这些对象的权限。目前，如果用户是所有者或列为协作者，他们可以看到该对象。我已经封装了该逻辑，但似乎“正确”的方法是使用行级权限系统并分配这些用户权限。然而，当涉及到分配和删除权限时，这变得更加复杂，并且也使得查看成本更高，因为它必须在数据库中查找权限，而不是依赖于已经被访问的数据。我一直在研究 django-guardian，现在它似乎有点矫枉过正。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T16:23:37.800

查看[django-logical-rules](https://bitbucket.org/aashe/django-logical-rules)。规则是用 python 编写的，您可以将现有对象传递给规则，因此它们不一定是数据库命中......虽然我建议缓存。规则可以很容易地与通用视图集成，并且可以通过模板标签访问。

# php - 内连接多行为一

> ID：13789422
> 
> 赞同：-1
> 
> 时间：2012-12-09T16:46:32.090
> 
> 标签：php, mysql

我必须要表、用户和 user_services。

```
users table -> uid name email
user_services -> service_id uid 
```

现在当我像这样进行内部连接时：

```
SELECT * FROM users INNER JOIN user_services ON users.u_id=user_services.user_id  WHERE u_id = '76' 
```

我有 4 行，因为用户有 4 个服务（），这没关系。

**我的问题是如何在最后一列（service_id）中只有一行**：

```
array(1,2,3,4) / or just 1,2,3,4 
```

如果我这样做，`group by u_id`我只会得到一行，但在最后一列中，我只会得到第一个服务 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:52:38.707

这将帮助您获得结果。

```
SELECT GROUP_CONCAT(user_services.service_id)  FROM users INNER JOIN user_services ON users.u_id=user_services.user_id  WHERE u_id = '76' group by users.u_id; 
```

# css - CSS3属性animation-fill-mode：“both”和“forwards”有什么区别

> ID：13789424
> 
> 赞同：2
> 
> 时间：2012-12-09T16:46:36.603
> 
> 标签：css, animation

“动画填充模式：两者”和“动画填充模式：转发”有什么区别？在我看来，它们都保留了最后一个关键帧设置的计算值。有人可以举个例子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T06:17:26.890

`animation-fill-mode: both`结合`animation-fill-mode: forwards`, 和`animation-fill-mode: backwards`. 指定时，*即使*存在动画延迟`animation-fill-mode: backwards`，动画开始时也会立即应用动画中第一个关键帧的值。如果未指定填充模式：向后或两者都未指定，则在动画延迟之后才应用第一个关键帧。[您可以在规范](http://dev.w3.org/csswg/css3-animations/#animation-fill-mode-property)中阅读更多内容。

# jquery - JsTree - 让父母保持开放

> ID：13789427
> 
> 赞同：0
> 
> 时间：2012-12-09T16:47:15.543
> 
> 标签：jquery, jstree

我正在使用[Jstree](http://www.jstree.com/)。我有大约 10 个顶级项目，都有不同级别的孩子。我希望始终保持顶级项目处于打开状态。

有人知道怎么做吗？

编辑：

澄清一下，即使有人点击这些项目，我也希望它们保持打开状态

我想在我的代码的这一步中需要做一些事情，我只是不确定到底是什么：

```
.delegate(".jstree-open>a", "click.jstree", function(event){
      $.jstree._reference(this).close_node(this,false,false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:32:56.487

我为您创建了一个示例：http: [//jsfiddle.net/Gajotres/HLhys/](http://jsfiddle.net/Gajotres/HLhys/)

您需要设置此选项：

```
"initially_open": ["menu_2","menu_8"] 
```

设置任意数量的 id。

如果您希望它们在节点更改（或其他操作......）的情况下保持打开状态，请在 jsTreen 实例上使用 .reopen() 。此方法将重新打开 initial_open 数组中提到的所有节点。

# linux - 如何在 debian 中更改优先级？

> ID：13789436
> 
> 赞同：1
> 
> 时间：2012-12-09T16:48:21.720
> 
> 标签：linux, process, debian, taskmanager, raspbian

我正在使用 Raspbian，它是 Raspberry Pi 的 Debian 发行版。我尝试使用任务管理器，但无法更改进程优先级（我试图降低 Python 的优先级）。在降低优先级并再次检查后，它保持为零（没有变化）。这是因为我不是超级用户吗？如果是这样，我如何在 sudo 中打开任务管理器 GUI？如果不是，还有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T16:57:09.270

您应该考虑使用终端：

```
sudo top 
```

这将向您显示带有 pid 的进程

```
renice {priority} pid 
```

这将改变流程的优先级（友好性）。进程越好，它的优先级就越低。更好，因为将其时间段留给其他进程;-)

{priority} 是从 -20 到 19

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T16:56:38.670

查找进程 ID（使用 ps aux|grep 'your_process'）

使用`renice`命令

```
$sudo renice -n <nice_value> -p <PID> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-10T10:53:48.313

xrenice，就像 xkill 一样，让您通过一键点击应用程序来调整优先级。在 GitHub 上 - [https://github.com/firebbs/xrenice](https://github.com/firebbs/xrenice)

# sql - 列出在指定日期内执行的所有作业？

> ID：13789442
> 
> 赞同：1
> 
> 时间：2012-12-09T16:48:59.297
> 
> 标签：sql, sql-server, sql-server-2008

是否可以列出在指定日期执行的所有计划作业？我有一个问题，我不确定作业是否已在昨天执行，以及所有步骤是否也已执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T20:13:42.997

要列出在指定日期内开始的所有作业：

```
declare @date date = getdate()

SELECT
    J.job_id,
    J.name
FROM msdb.dbo.sysjobs AS J 
INNER JOIN msdb.dbo.sysjobhistory AS H ON H.job_id = J.job_id
WHERE run_date = CONVERT(VARCHAR(8), GETDATE(), 112)
GROUP BY J.job_id, J.name 
```

列出指定日期指定作业的所有步骤及其状态：

```
declare @date date = getdate()
declare @job_name varchar(50) = 'test'

SELECT
    H.run_date,
    H.run_time,
    H.step_id,
    H.step_name,
    H.run_status
FROM msdb.dbo.sysjobs AS J
INNER JOIN msdb.dbo.sysjobhistory AS H ON H.job_id = J.job_id
WHERE 
    run_date = CONVERT(VARCHAR(8), GETDATE(), 112)
    AND J.name = @job_name 
```

更多信息[在这里](http://msdn.microsoft.com/en-us/library/ms174997.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T22:13:29.023

在下面的链接中找到它提供了有关 sql 作业的所有信息

[http://www.mssqltips.com/sqlservertip/2561/querying-sql-server-agent-job-information/](http://www.mssqltips.com/sqlservertip/2561/querying-sql-server-agent-job-information/)

# php - MySQL：表内的标准差平均值

> ID：13789443
> 
> 赞同：1
> 
> 时间：2012-12-09T16:49:03.657
> 
> 标签：php, mysql, standard-deviation

以下是我的一张表的结构：

```
id | group | val1 | val2 | val3
1  | 1     | 22   | 23   | 60
2  | 1     | 40   | 60   | 80
3  | 2     | 50   | 5    | 70
4  | 2     | ...
5  | 2     | 
6  | 3     | 
... 
```

在我的 PHP 文档中，我通过每行使用 val1+val2+val3 等计算标准偏差，其中组等于我正在显示的组。

现在我想知道，通过使用 MySQL，**每行的标准偏差是多少，**以及**一个组的平均值**是多少。`(row1stddev+row2stddev+...)/n`

我尝试过使用子查询，但我所能实现的只是获得一个值。我想我缺乏理解 MySQL 中内置的标准差函数实际上是如何处理多个值的。

编辑。这是我正在寻找的两件事：

```
id | group | stddev
1  | 1     | 21,65641
2  | 1     | 20
3  | 2     | 33,29164
4  | 2     | ...
5  | 2     | 
6  | 3     | 
```

并按组平均（所有 stddev 的平均值）：

集团 | avg_stddev 1 | 20,828205 2 | ... 3 | ...

重点是我想知道哪个组的差异最大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T19:15:36.853

由于 mysql 本机函数`STDDEV_POP`仅接受列，因此您必须通过使用临时表来欺骗它，该表将在一行中有一个包含所有值（与标准偏差有关）的列，用于`UNION ALL`3 `SELECTS`，每个用于一个有意义的列，并且按行 ID 分组。

```
SELECT 
    id,
    STDDEV_POP(val) AS row_stddev 
FROM (
    SELECT id, val1 AS val FROM stdev_table
    UNION ALL
    SELECT id, val2 AS val FROM stdev_table
    UNION ALL
    SELECT id, val3 AS val FROM stdev_table
) tmp0
GROUP BY id 
```

您还可以选择其他列 -`group`并创建另一个临时表以从中选择平均值：

```
SELECT 
    id_group,
    AVG(row_stddev) AS group_avg 
FROM (
    SELECT 
        id, 
        id_group, 
        STDDEV_POP(val) AS row_stddev 
    FROM (
        SELECT id, id_group, val1 AS val FROM stdev_table
        UNION ALL
        SELECT id, id_group, val2 AS val FROM stdev_table
        UNION ALL
        SELECT id, id_group, val3 AS val FROM stdev_table
    ) tmp0
    GROUP BY id
) tmp1
GROUP BY id_group 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T16:54:12.527

如果我理解正确，您应该创建 View

```
CREATE VIEW view_name AS SELECT val1, val2, val3,  val1 + val2 + val 3 / 3 AS average FROM tablename; 
```

然后只是`SELECT * FROM view_name`为了让您获得价值。

# html - 如何使面板具有滚动条

> ID：13789444
> 
> 赞同：-4
> 
> 时间：2012-12-09T16:49:10.537
> 
> 标签：html, css, overflow

[我的网站](http://spencedesign.netau.net/SNL/SNL.html#page2)是一个单页网站，我希望能够使您在此网站中看到的面板垂直滚动。我尝试使用`overflow-y: scroll`但没有用。我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:54:35.010

在您的 Css 文件中有一个属性

```
.panel {
min-width: 100%;
} 
```

改变这个`min-width : 100% to 80%;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T16:51:20.710

您有一个滚动条，但是由于您隐藏了 x 滚动条，因此由于定位问题而看不到它。

将 .panel 的最小宽度更改为 85% 而不是 100%。

# sql-server - 根据顶行过滤数据

> ID：13789445
> 
> 赞同：0
> 
> 时间：2012-12-09T16:49:18.977
> 
> 标签：sql-server, tsql, datepart

我有一组类似的时期

```
PERIODID PERIODSTART PERIODEND   PRICE STARTDOW
1        2012-12-01  2012-12-10  10    6
2        2012-12-11  2012-12-20  20    -1
3        2012-12-21  2012-12-30  30    -1 
```

这意味着第 1 时段的预订必须在星期六开始，但不能在第 2 和第 3 时段开始。

如果我在 2012 年 12 月 10 日至 2012 年 12 月 15 日有预订，我想 > - 过滤几天的时段（不是问题） - 检查预订是否在星期六开始。过滤器应该只用于顶部（或第一行），我不知道该怎么做。如果预订未在星期六开始，则不应返回任何行。

我试过了

```
select * from periods p
where 
((@ReservationStart between p.periodstart and p.periodend)
or 
(@ReservationEnd between p.periodstart and p.periodend))
and ((select top 1 datepart(weekday, startdow) from periods where p.hotelID = period.hotelID order by period.periodstart) in (@datepart(weekday, @ReservationStart), -1)) 
```

有没有办法做得更好，或者针对大量数据更好地优化代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T03:14:19.173

嗯，不清楚你说的第一行是什么意思。第一期预约？您是否使用它来测试预订是否从正确的 DOW 开始？

```
set datefirst 1 -- make Monday return 1 when calling datepart(day,...)

-- if reservation starts on STARTDOW, this will return a single row.
-- if not, it will return an empty record set
select top (1) * from periods p
where @ReservationStart between p.periodstart and p.periodend
  and p.STARTDOW in (-1, datepart(day,@ReservationStart)) 
```

编辑

也许是这样的呢？

```
set datefirst 1 -- make Monday return 1 when calling datepart(day,...)

-- return all periods of the reservation
-- modify as necessary if you only want the first and last periods, as in your example.
select * from periods p
where p.periodend >= @ReservationStart
  and p.periodstart <= @ReservationEnd
  -- but only if the start date falls on an allowed DOW
  and exists (
    select * from periods p2
    where @ReservationStart between p2.periodstart and p2.periodend
      and p2.STARTDOW in (-1, datepart(day,@ReservationStart))
      and p2.hotelID = p.hotelID -- necessary correlation condition
    ) 
```

# android - 在 Android 上打开并播放传输流 (mpeg2-ts)

> ID：13789447
> 
> 赞同：4
> 
> 时间：2012-12-09T16:49:39.617
> 
> 标签：android, networking, stream, multimedia, mpeg

又是我。

我正在尝试播放我通过 android 上的 http (mpeg2-ts) 获得的 TS 文件。我已经尝试过 VideoView 如下：

```
VideoView videoView = (VideoView) findViewById(R.id.videoView);
videoView.setMediaController(new MediaController(this));
videoView.setVideoURI(Uri.parse("http://192.168.0.27:7522/upnp/channelstream/9.ts"));
videoView.requestFocus();
videoView.start(); 
```

但它只是说它无法打开视频（我也使用了互联网许可）。经过一番研究，我发现android 4引入了OpenMAX，你可以用它打开.ts文件。看来您需要NDK，但我不知道如何使用它。是否有 OpenMAX 的示例代码或是否有任何其他（更好的）方法来播放 .ts 文件？

我还试用了安卓版本的 VLC，它能够播放 .ts 文件。我只需要知道 VLC 是如何做到的。

问候

# java - 在实践中，如何使结果集不等于 NULL？

> ID：13789448
> 
> 赞同：0
> 
> 时间：2012-12-09T16:50:26.933
> 
> 标签：java, database, forms, swing, events

参考我之前的一个问题：

[使用java表单的数据库滚动按钮-调用下一个方法将光标向上移动结果集对象时出错](https://stackoverflow.com/questions/13766262/database-scrolling-buttons-using-java-forms-error-when-calling-next-method-to)

关于我必须回答上述问题的答案（请参阅此问题的底部段落）

我想知道 - 当有人说你是：'隐藏你的变量' - 这实际上意味着什么：它是否参考了 netbeans 生成的代码事件存根，它被设置为私有函数？如果是这样，您如何将其更改为公开，因为我已经尝试过，而 Netbeans 不会让我这样做！

这是我的代码：��

```
public void DoConnect( ) {

        try{
        String host = "jdbc:derby://localhost:1527/Employer";
        String uName = "admins";
        String uPass= "admins";

        Connection con = DriverManager.getConnection( host, uName, uPass );
//        Statement stmt = con.createStatement( );
        stmt = con.createStatement( ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE );

        String SQL = "SELECT * FROM WORKERS";
        ResultSet rs = stmt.executeQuery( SQL );

        rs.next( );
        int id_col = rs.getInt("ID");
        String id=Integer.toString(id_col);
        String first= rs.getString("First_Name");
        String last = rs.getString("Last_Name");
        String job = rs.getString("Job_Title");

        textID.setText(id);
        textFirstName.setText(first);
        textLastName.setText(last);
        textJobTitle.setText(job);

        }

        catch ( SQLException err ){
               System.out.println( err.getMessage( ) );

        }

    } 
```

和 netbeans 生成的事件代码存根。我在其中放置了我的事件代码：

```
private void btnNextActionPerformed(java.awt.event.ActionEvent evt) {                                        
        // TODO add your handling code here:
        try {

        if ( rs.next( )) {

               int id_col = rs.getInt("ID");
                String id = Integer.toString(id_col);
                String first = rs.getString("First_Name");
                String last = rs.getString("Last_Name");
                String job = rs.getString("Job_Title");

                textID.setText(id);
                textFirstName.setText(first);
                textLastName.setText(last);
               textJobTitle.setText(job);
            }
            else {
                rs.previous( );
                JOptionPane.showMessageDialog(Workers.this, "End of File");
            }
        }
        catch (SQLException err) {
            JOptionPane.showMessageDialog(Workers.this, err.getMessage());
            System.out.println( err.getMessage( ) );
        }
    }                                       

    public static void main(String args[]) {

        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new Workers().setVisible(true);
            }
        }
    } 
```

@Uwe Plonus 很高兴地给了我更早的答案，他说了以下内容：

“您的问题是您的 ResultSet 为空。

你隐藏了你的变量 rs。

您的代码（基本上）是：

```
public class Sample {
    ResultSet rs; // is null
    public method() {
        ResultSet rs = stmt.execute(); // here the other rs is hidden
    }
} 
```

如果你想让你的代码工作，不要隐藏变量。也不要隐藏连接。

为了更快地获得答案，请尝试减少您的代码并缩短示例并专注于您的实际问题。”

我说...

“感谢您的回答。您能否具体告诉我��如何取消 rs 对象为空”！

就此而言，取消隐藏我的变量。并将私人事件存根公开？？

请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T17:03:25.927

在以下代码中：

```
public class Sample {
    ResultSet rs; // is null
    public method() {
        ResultSet rs = stmt.execute(); // here the other rs is hidden
    }
} 
```

你有两个变量：

*   一个名为 的变量`rs`，在类中声明
*   `rs`在方法中声明的一个局部变量也称为

因此，当您`rs`在方法中分配某些内容时，您不会为该`rs`字段分配任何内容，因为它们是两个不同的变量。如果您打算初始化该字段，则代码应为

```
public class Sample {
    ResultSet rs;
    public method() {
        this.rs = stmt.execute(); // there is no declaration here, so rs is the field
                                  // and not a new, local variable
    }
} 
```

或者干脆

```
public class Sample {
    ResultSet rs;
    public method() {
        rs = stmt.execute(); 
    }
} 
```

# c - 函数名和第一个花括号之间的变量声明

> ID：13789450
> 
> 赞同：20
> 
> 时间：2012-12-09T16:50:30.227
> 
> 标签：c, obfuscation

我正在阅读一篇关于C**代码混淆**的文章，其中一个示例将 main 函数声明为：

```
int main(c,v) char *v; int c;{...} 
```

我从来没有见过这样的东西，`v`是`c`全局变量吗？

完整的例子是这样的：

```
#include <stdio.h>

#define THIS printf(
#define IS "%s\n"
#define OBFUSCATION ,v);

int main(c, v) char *v; int c; {
   int a = 0; char f[32];
   switch (c) {
      case 0:
         THIS IS OBFUSCATION
         break;
      case 34123:
         for (a = 0; a < 13; a++) { f[a] = v[a*2+1];};
         main(0,f);
         break;
      default:
         main(34123,"@h3eglhl1o. >w%o#rtlwdl!S\0m");
         break;
      }
} 
```

文章：[brandonparker.net](http://www.brandonparker.net/code_obf.php) **（不再有效）**，但可以[在 web.archive.org中找到](https://web.archive.org/web/20121108041752/http://www.brandonparker.net/code_obf.php)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-09T16:51:26.063

这是旧式函数定义

```
void foo(a,b)
int a;
float b;
{
// body
} 
```

和

```
void foo(int a, float b)
{
// body
} 
```

您的情况与`int main(int c,char *v){...}`但不正确。

正确的语法是：`int main(int c, char **v){...}`

或者，`int main(int c, char *v[]){...}`

编辑：记住`main()`，不`v`应该像你写的那样。`char**``char*`

我觉得是`K & R`C风格。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-09T16:52:07.607

它是用于函数声明的 pre-ANSI C 语法。我们不再使用它了。它与以下内容相同：

```
int main(int c, char *v) 
```

# linux - C++ 在 linux 中创建一个独立的库并在另一个程序中使用它

> ID：13789452
> 
> 赞同：2
> 
> 时间：2012-12-09T16:50:41.770
> 
> 标签：linux, eclipse, shared-libraries

我正在尝试为 Linux 创建一个共享库，以便：

*   其他程序可以使用它的功能和它的对象
*   代码对最终用户不可见

我所做的是用 Eclipse 创建一个共享库。这个库使用 pthreads。我生成了 .so 和 .lib。.lib 位于 LIBRARY/Lib 中，而 .so 位于 LIBRARY/Release 中。

然后我创建了另一个应该使用这个库的项目，我给出了 .lib 文件的路径和 .h 文件的路径，该文件只包含库的所有必要的 .h 文件。一切似乎都正常，但是当我运行程序时它崩溃了。调试时，我收到以下消息：

> 在“pthread_mutex_lock.c”中找不到源文件
> 
> 找到文件或编辑源查找路径以包含其位置。

怎么了？有人能帮助我吗？

编辑：我什么都没改变，现在我有一个不同的错误，在前几行之前：

> 在“random.c”中找不到源文件
> 
> 找到文件或编辑源查找路径以包含其位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T03:25:43.027

> *   其他程序可以使用它的功能和它的对象
>     
> *   代码对最终用户不可见

这两个目标直接相互矛盾，在 Linux 上同时实现两者是*不可能的。*

如果某个程序可以使用您的库，那么我可以编写一个也可以使用的新程序。

# windows - 在 Windows 桌面上渲染（背景）

> ID：13789455
> 
> 赞同：4
> 
> 时间：2012-12-09T16:51:10.150
> 
> 标签：windows, directx, gdi+

是否可以渲染到 Windows 桌面（覆盖壁纸）？如果这不可能，就不会是 Windows，所以必须有办法。

我发现的一个是用 0 调用“GetDC()”。但这在顶部绘制 - 所以所有窗口都被覆盖。

我只想覆盖背景墙纸。是否可以使用 DirectX 进行渲染（如果使用 GDI+ 应该可以）？

有什么建议么？:)

谢谢R

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-07-11T03:19:33.897

以前有可能，MS 杀死了 Vista 中的该功能，它不再起作用。

AVS2（Winamp 中的可视化库）使用带有 DDBLT_COLORFILL 标志的[IDirectDrawSurface7::Blt](https://web.archive.org/web/20140208225335/https://msdn.microsoft.com/en-us/library/windows/desktop/gg426181(v=vs.85).aspx)将内容呈现到桌面，在此之前有一些设置代码。

[源代码。](https://github.com/visbot/vis_avs/blob/master/avs/vis_avs/draw.cpp) [它做了什么。](http://www.xtremevbtalk.com/archive/index.php/t-218710.html)

# r - 组合线和条形几何：如何生成正确的图例？

> ID：13789458
> 
> 赞同：7
> 
> 时间：2012-12-09T16:51:21.960
> 
> 标签：r, ggplot2, bar-chart, legend, linechart

`d2`看起来不错的传说；因为`d1`，我想只显示白色/透明背景的水平线。

```
df = data.frame(
  Date = c("2012-11-30", "2012-12-03", "2012-12-04"),
  d1 = c(9, 5, 11),
  d2 = c(4, 6, 3)
)
ggplot(df, aes(Date)) + 
  geom_bar(aes(y = d2, color = "d2"), stat="identity", fill = "red") +
  geom_line(aes(y = d1, group = 1, color = "d1"))  +
  scale_colour_manual("", values=c("d1" = "blue", "d2" = "red")) 
```

![在此处输入图像描述](../Images/49c0e40ed266d7aa9a4b26137793fe88.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-09T17:52:51.730

这不是一个优雅的解决方案，但至少它给出了一些结果。

我添加`aes(fill="d2")`并`geom_bar()`删除了`fill="red"`. 然后我为线和条添加了单独的比例。然后在`theme()`我从图例条目中删除了灰色背景。

为了确保图例中的 d1 显示在 d2 之前`scale_colour_manual(" ")`，引号之间应该有额外的空格（“更长的”名称）。

为了将图例键保留在一行中，`legend.box="horizontal"`添加到`theme()`

```
 ggplot(df, aes(Date)) + 
    geom_bar(aes(y = d2,fill="d2"), stat="identity") +
    geom_line(aes(y = d1, group = 1, color = "d1")) +
    scale_colour_manual(" ", values=c("d1" = "blue", "d2" = "red"))+
    scale_fill_manual("",values="red")+
    theme(legend.key=element_blank(),
          legend.title=element_blank(),
          legend.box="horizontal") 
```

![在此处输入图像描述](../Images/9091741474e1e66209eddbba8c259601.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-07T06:09:03.483

```
# Bar graph: Notice the placement of fill argument in aes()  
  geom_bar(aes(y=prop.P*100, fill="Seropositive"), stat = "identity",
           position = "dodge", width = 0.5)+

# This line defines the legend for the bar
  scale_fill_manual(name="", values = c("Seropositive"="steelblue3"))+

# Adding errorbar
  geom_errorbar(aes(ymin = ciLow*100, ymax = ciHigh*100), width = 0.2,
                position = position_dodge(width=0.8))+

# Adding the line to the graph. Used the color argument within aes() to define custom colour
  geom_line(aes(y=mmr1_cov*100, group=1, color="MMR1 Coverage"), size=1)+

# Adding points represent the plotted data
  geom_point(aes(x=age, y=mmr1_cov*100), color="red", size=2)+

# Here adding the legend for the line graph and define the colour
  scale_color_manual(name="", values=c("MMR1 Coverage"="red"))+

# Label the axis
  labs(x="Age (Months)", y="Percentage")+

# Place the legend bottom of the graph
  theme(legend.position = "bottom") 
```

[显示结果的图表部分](https://i.stack.imgur.com/k3ga4.jpg)

# c++ - 是否可以将枚举的默认类型设置为无符号字符？

> ID：13789462
> 
> 赞同：12
> 
> 时间：2012-12-09T16:51:41.097
> 
> 标签：c++

我必须将一些枚举打包到字节数组（`char*`）并通过网络发送。是否可以将枚举的默认类型设置为无符号字符？（我现在可以强制转换或使用`& 0xff`来提取第一个字节/字符，但这需要额外的操作，所以在枚举的定义中有什么方法可以解决这个问题吗？）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-09T16:53:56.093

这仅适用于 C++11[强类型枚举](http://en.wikipedia.org/wiki/C%2B%2B11#Strongly_typed_enumerations)：

```
enum class MyEnum : unsigned char { E1, E2 }; 
```

请参阅[此处](http://en.cppreference.com/w/cpp/language/enum)了解更多信息

# compiler-construction - 绘制有限状态机 (FSM) 以使用给定的微语法查找令牌

> ID：13789465
> 
> 赞同：1
> 
> 时间：2012-12-09T16:52:00.213
> 
> 标签：compiler-construction, token, lexical-analysis, fsm, state-machine

我正在尝试使用给定的微语法绘制一个 FSM 来查找令牌

```
microsyntax
// Uses .Net regular expression syntax.

Identifier <|[a-zA-Z][\w_.]*

IntegerValue <|\d+

// real values must include a decimal point.
RealValue <|\d*\.\d+

// Note that strings do not have any escape characters
// and will be prematurely terminated with a newline.
StringValue <|"[^"\n]*" 
```

我的 FSM 图表如下所示： ![在此处输入图像描述](../Images/39b518b446fda28e0bd9932379fdc168.png)

我不确定我制作的图表是否完全正确。我在绘图中的困惑在于：1）标识符az，AZ，_的循环转换。2) 从整数到实值的转换：状态 3 会从 0-9 循环转换吗？和 3) 转换为 stringValue。

如果有人可以让我知道图表是否正确，如果不正确，我的错误是什么，那将非常有帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:52:42.887

没关系，只是状态 3 不是最终状态且不应循环。（另外，我没有看到您的空格和运算符规则，但该图看起来很合理。）

状态 3 的问题是：

```
8. 
```

不匹配`\d+`也不匹配`\d*.\d+`；前者是因为 the `.`，而后者是因为它坚持在 the 之后至少有一位数字`.`。因此，您在阅读后所处的状态 3`8.`不是最终状态。一旦它得到另一个数字，它就会进入状态 4（所以没有循环），这是正确的最终状态。

我会用一个循环而不是两个循环来编写状态 1，但我认为这没有任何区别。此外，状态 6（非最终）下的语义标签应位于状态 7（最终）下。（哦，标记开始状态并没有什么坏处，尽管最后很明显。）

HTH。

# java - Java 逻辑数组问题

> ID：13789466
> 
> 赞同：-2
> 
> 时间：2012-12-09T16:52:01.453
> 
> 标签：java, arrays, integer

我正在尝试使其`Array`包含 10 个不同的整数 0-9。我有这个：

```
for (int i = 0; i < perm.length; i++) 
 { 
    int num = (int) (Math.random() * 9); 
    boolean check = true;

    if (Arrays.asList(perm).contains(num) == true) 

      check = false; 
        else 
          {
           check = true; 
           perm[i] = num; 
          } 

 while (check == false) 
 { 
   num = (int) (Math.random() * 9); 

    } 
} 
```

似乎它应该可以工作并创建一个具有不同整数的数组，但事实并非如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:04:11.910

如果你想避免创建一个列表，你可以自己洗牌：

```
 Random random = new Random();
    int[] perm = new int[10];
    for (int i = 0; i < 10; i++) {
        perm[i] = i;
    }
    for (int i = 0; i < 9; i++) {
        int j = random.nextInt(10 - i);
        int tmp = perm[i];
        perm[i] = perm[i + j];
        perm[i + j] = tmp;
    }
    System.out.println(Arrays.toString(perm)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T16:55:50.727

这个怎么样（如果你想要更简洁的方法）：

```
List<Integer> l = new ArrayList<Integer>();
for (int i = 0; i < 10; i++)
    l.add(i);  // add 0-9
Collections.shuffle(l)

Integer[] ints = l.toArray(new Integer[10]); 
```

我们在这里所做的只是创建一个列表，用整数 0-9 填充它，对其进行混洗，然后将内容写入一个数组。

* * *

如果您想要更“手动”的方法，我建议您这样做：

```
List<Integer> l = new ArrayList<Integer>();
for (int i = 0; i < 10; i++)
   l.add(i);  // add 0-9

int[] ints = new int[10];
for (int i = 0 ; i < 10; i++)
    ints[i] = l.remove((int)(Math.random() * l.size()));

System.out.println(Arrays.toString(ints)); 
```

```
[7、2、3、4、9、6、0、1、8、5]

```

我假设您被允许使用列表，因为您发布的代码包括对`Arrays.asList`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T16:55:09.557

听起来您正在尝试生成从 0 到 8（9？）的数字排列。最简单的方法是按顺序用数字填充数组列表，然后使用[`Collections.shuffle()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#shuffle%28java.util.List%29).

# ruby-on-rails - Ajax 未加载到视图 Rails 3 will_paginate

> ID：13789471
> 
> 赞同：0
> 
> 时间：2012-12-09T16:52:22.427
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, jquery, will-paginate

我试图用 will_paginate gem 实现 Ajax 调用，我发现这个指南[http://ramblinglabs.com/blog/2011/11/rails-3-1-will_paginate-and-ajax](http://ramblinglabs.com/blog/2011/11/rails-3-1-will_paginate-and-ajax)这似乎是一个简单的解决方案，虽然它包括我不熟悉的咖啡脚本

我的代码如下

我的观点

```
<div class="container">
 <div class="row">
  <div id="userRecipes">
   <%= render partial: 'userrecipes' %>
 </div>
</div><!--/row--> 
```

我的部分（用户食谱）

```
 <% @recipes.each do |r| %>
  <div class="span3">
   <div class="thumbnail">
    <%= image_tag r.avatar.url(:myrecipes) %>
   </div>
   <h4><%= link_to r.dish_name, r %></h4>
   <hr>
    <p><%= truncate r.description, :length => 90 %></p>
    <p><%= link_to "Edit Recipe", edit_recipe_path(r.id) %></p>
    <p><%= link_to "Delete Recipe", recipe_path(r.id), :confirm => "Are you sure?", :method => :delete %></p>
    <p><%= link_to "Add to favorites",  {:controller => 'favourites', :action => 'create', :recipe_id => r.id}, {:method => :post } %></p>
   </div><!--/span3-->
   <% end %>
   <%= will_paginate @recipes %> 
```

userrecipes.js.erb 文件

```
$('#userRecipes').html('<%= escape_javascript(render partial: 'userrecipes') %>');
$.setAjaxPagination(); 
```

咖啡脚本

```
$ ->
$.setAjaxPagination = ->
$('.pagination a').click (event) ->
  event.preventDefault()
  loading = $ '<div id="loading" style="display: none;"><span><img src="/assets/loading.gif" alt="cargando..."/></span></div>'
  $('.other_images').prepend loading
  loading.fadeIn()
  $.ajax type: 'GET', url: $(@).attr('href'), dataType: 'script', success: (-> loading.fadeOut -> loading.remove())
  false

  $.setAjaxPagination() 
```

当我单击下一个锚标记以显示下一组结果时，页面保持原样并且没有新内容出现

使用控制台查看是否有任何错误时，我可以看到任何错误，输出为

```
GET http://localhost:3000/my_recipes?page=2&_=1355055997639 
```

我在这里错过了什么吗？

此外，在控制台中检查响应时，它还显示正在加载要加载的新配方，但视图中没有发生任何事情

任何指针表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:19:28.707

will_paginate 创建的链接是 html 链接...

使用以下代码

```
 $('.pagination a').attr('data-remote', 'true'); 
```

向他们添加数据远程真实属性，以便他们`js`向服务器发出请求......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T13:07:02.973

您应该将其添加到 js.erb 文件中。

```
$('.pagination a').attr('data-remote', 'true'); 
```

这应该有效。

# jquery-ui - 选择在重新加载 mvc 部分时无法在 jquery 对话框中工作

> ID：13789472
> 
> 赞同：1
> 
> 时间：2012-12-09T16:52:23.473
> 
> 标签：jquery-ui, jquery-ui-dialog, asp.net-mvc-partialview, jquery-chosen

我正在`MVC`使用以下代码在 jQuery UI 对话框中加载两个部分视图来编辑和添加记录：

```
$.get(url, function(data)
{
    dialogDiv.html(data);

            var $form = $(formid);

            $form.unbind();
            $form.data("validator", null);

            $.validator.unobtrusive.parse(document);

            var dat = $form.data("unobtrusiveValidation");
            var opts = dat ? dat.options || '' : '';
            $form.validate(opts);

            //THIS FUNCTION ADDS PLUGINS ETC.
            runEditCreateStartScripts();

            dialogDiv.dialog('open');
}); 
```

以下是连接功能的`chosen`功能。

```
function runEditCreateStartScripts(){
    $("select.chzn-select").chosen(
           { 
                no_results_text: "no match", 
                allow_single_deselect: true 
            });
} 
```

第一次通话时一切都很完美。打开一个对话框后说编辑几次一切都坏了。只有`hyperlink`可用的东西可以代替选择的东西。如果我打开一个对话框说添加，然后打开第二个对话框，也会发生这种情况。第一个（添加）的绑定和其他功能消失了。

关于为什么会发生这种情况的任何见解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T03:23:14.593

导致我的问题的问题是，我通过 AJAX 加载的模式具有与页面上已经存在的输入字段相同的 ID 的输入（使用具有模型字段的通用 ID 生成器的 Django）。当在选择器上重新触发 .chosen() 时，这会导致两个输入之间发生冲突。当我使 ID 字段唯一时，一切都按预期工作。希望这会有所帮助。

# delphi - 使用自定义样式在画布上画一条线（delphi）

> ID：13789474
> 
> 赞同：7
> 
> 时间：2012-12-09T16:52:28.187
> 
> 标签：delphi, styles, line

我需要在画布上画一些线条，但是我需要使用自定义样式，没有标准样式，如实心、点、...

例如，我需要画一条线为“__ . __ . _ *”或“* . _ . _ . _ . _”。我所有的线都是破折号和点的混合，我还需要设置破折号和破折号，点宽。

我不想使用 GDI+ 或其他外部库...

有没有简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-09T17:34:46.563

你可以用普通的 GDI 做到这一点：

```
procedure TForm1.FormPaint(Sender: TObject);
const
  pattern: array[0..3] of cardinal = (10, 1, 1, 1);
var
  lb: TLogBrush;
  pen, oldpen: HPEN;
begin
  lb.lbStyle := BS_SOLID;
  lb.lbColor := RGB(255, 0, 0);
  pen := ExtCreatePen(PS_COSMETIC or PS_USERSTYLE, 1, lb, length(pattern), @pattern);
  if pen <> 0 then
    try
      oldpen := SelectObject(Canvas.Handle, pen);
      Canvas.MoveTo(0, 0);
      Canvas.LineTo(ClientWidth, ClientHeight);
      SelectObject(Canvas.Handle, oldpen);
    finally
      DeleteObject(pen);
    end;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T17:23:16.537

您还可以使用[LineDDA](http://msdn.microsoft.com/library/windows/desktop/dd145025%28v=vs.85%29.aspx) API。当然 Pen 样式（由 Andreas Rejbrand 建议）要快得多，但 LineDDA 将允许您以不同颜色绘制线条的各个部分。

```
var
  DottedLineDrawCounter: Integer;

procedure DDAProc(AX, AY: Integer; ACanvas: TCanvas); stdcall;
begin
  if DottedLineDrawCounter mod 4 = 0 then
    ACanvas.Pixels[AX, AY] := clRed
  else
    ACanvas.Pixels[AX, AY] := clBlack;
  Inc(DottedLineDrawCounter);
end;

...
begin
  // Usage
  DottedLineDrawCounter := 0;
  LineDDA(X1, Y1, X2, Y2, @DDAProc, LPARAM(Canvas));
end; 
```

# php - 将此列表 bbcode 转换为 html 的最佳方法？

> ID：13789475
> 
> 赞同：-3
> 
> 时间：2012-12-09T16:52:35.907
> 
> 标签：php, regex, bbcode

假设有一个这样的 bbcode 列表：

```
[list]
[*]something
[*]something2
[/list] 
```

php中将其转换为html列表的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T17:40:30.130

```
$string = '[list]
[*]something
[*]something2
[/list]';

$regex = array(
 '/\[list\](.*?)\[\/list\]/is' => '<ul>$1</ul>',
 '/\[\*\](.*?)(\n|\r\n?)/is' => '<li>$1</li>'
);

echo preg_replace(array_keys($regex), array_values($regex), $string); 
```

# android - ViewFlipper 中具有通用属性的视图

> ID：13789485
> 
> 赞同：0
> 
> 时间：2012-12-09T16:53:16.047
> 
> 标签：android, android-layout

是否可以为所有视图设置共享属性`ViewFlipper`？Fe，如果 VF 中的所有项目都是具有相同宽度和高度的按钮，我可以在 VF 中以某种方式设置它，这样我就不必为每个按钮编码宽度和高度了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:56:12.093

使用样式。有关更多信息，请参阅[此](http://developer.android.com/guide/topics/resources/style-resource.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T16:58:45.100

你可以为你的活动设置一个主题，或者如果你愿意，你的整个应用程序。所以例如：

```
<style name="Theme.DeviceDefault.Light" parent="Theme.Holo" > 
   <item name="android:buttonStyle">@style/ButtonText</item>
</style> 
```

# iphone - 使用 URL 向服务器发送信息

> ID：13789487
> 
> 赞同：0
> 
> 时间：2012-12-09T16:53:54.067
> 
> 标签：iphone, objective-c, ios

我目前正在与 PHP 开发人员一起设置一些服务器端代码，但是，我不确定如何`send`将服务器 API 信息存储在数据库中。`send`他在这样的网址中向我提出了要求： `exampleserver.com/register?deviceToken=[deviceToken]&otherstuff[otherStuff]`。我创建 URL 字符串没有问题，我的问题实际上是用它做一些事情。我知道这是一个非常愚蠢的问题，但我对 Objective-C 还是很陌生，更不用说与服务器通信了！我已经从使用`NSURLRequest`和`AFJSONRequestOperation`之前的服务器中提取信息。是同样的想法还是我们不再做请求？我已经`Post`多次看到这个词，但我不确定这是否是我所追求的。任何帮助解决这个问题将不胜感激。此外，无论解决方案如何，我都需要它是异步的！

感谢您的帮助，
问候，
迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:38:17.700

`NSURLRequest`仍然有效并且很好。如果你想要一个更强大的库来处理 post、get、put 等，并且可以异步工作并直接链接到核心数据，我推荐 RestKit ( [https://github.com/RestKit/RestKit](https://github.com/RestKit/RestKit) )。

有关 NSURL 的更多信息，请在此处查看我的答案：[NSURLConnection 委托方法](https://stackoverflow.com/questions/9577317/nsurlconnection-delegate-method/9577548#9577548)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T18:11:19.843

这对我有用：

```
 NSURL *aURL = [NSURL URLWithString:@"http://www.google.co.uk/search?hl=en&q=hello%20world"];
NSURLRequest *aURLRequest = [NSURLRequest requestWithURL:aURL];
[NSURLConnection sendAsynchronousRequest:aURLRequest queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error){
    NSLog(@"response=%@", response);
    NSLog(@"data=%@", data);
    NSLog(@"error=%@", error);
}]; 
```

您显示的 URL 在 URL 的末尾附加了数据，这通常是通过 http GET 操作完成的，即“正常”方法。只需请求该 URL 的页面就足以将数据发送到服务器。http POST 操作通常用于将表单数据发送到服务器，其中类似的对`deviceToken=<deviceToken>`在消息正文中而不是 URL 中传输。这样做的好处通常是，如果连接是 https:，则正文将被加密，因此数据保持安全。但是对于一个简单的不安全事务，使用带有 URL 中参数的 GET 就可以了。在 iOS 上有一个 POST 事务的描述[：如何执行 HTTP POST 请求？](https://stackoverflow.com/questions/5537297/ios-how-to-perform-a-http-post-request)

# c# - MVC 中的下拉列表

> ID：13789492
> 
> 赞同：0
> 
> 时间：2012-12-09T16:54:18.207
> 
> 标签：c#, asp.net-mvc, entity-framework

我正在尝试在 MVC 中使用 DropdownlistFor 将对象添加到我的数据库中。我可以很好地填充下拉列表，但是当我发布表单时，我收到一个错误，因为下拉列表的 ID（这是 Team 对象的外键）已填充，但不是实际值。这是我的代码：

```
 [HttpGet]
        public ActionResult FixtureAdd()
        {
            IEnumerable<SelectListItem> teams = _repository.GetTeams()
              .Select(c => new SelectListItem
              {
                  Value = c.TeamId.ToString(),
                  Text = c.TeamName
              }).ToList();

            IEnumerable<SelectListItem> weeks = _repository.GetWeeks()
              .Select(c => new SelectListItem
              {
                  Value = c.ToString(),
                  Text = c.ToString()
              }).ToList();

            ViewBag.Teams = new SelectList(teams, "Value", "Text");
            ViewBag.Weeks = new SelectList(weeks, "Value", "Text");

            string apiUri = Url.HttpRouteUrl("DefaultApi", new { controller = "fixture", });
            ViewBag.ApiUrl = new Uri(Request.Url, apiUri).AbsoluteUri.ToString();

            return View();
        }

        [HttpPost]
        public ActionResult FixtureAdd(Fixture fx)
        {
            if (ModelState.IsValid)
            {
                try
                {
                     //TODO: Add insert logic here
                    _repository.AddFixture(fx);
                    return RedirectToAction("FixtureAdd");
                }
                catch (DbEntityValidationException dbEx)
                {
                    foreach (var validationErrors in dbEx.EntityValidationErrors)
                    {
                        foreach (var validationError in validationErrors.ValidationErrors)
                        {
                            Trace.TraceInformation("Property: {0} Error: {1}", validationError.PropertyName, validationError.ErrorMessage);
                        }
                    }

                    return View(fx);
                }   
            }
            else
            {
                IEnumerable<SelectListItem> teams = _repository.GetTeams()
                  .Select(c => new SelectListItem
                  {
                      Value = c.TeamId.ToString(),
                      Text = c.TeamName
                  }).ToList();

                ViewBag.Teams = new SelectList(teams, "Value", "Text");

                IEnumerable<SelectListItem> weeks = _repository.GetWeeks()
                  .Select(c => new SelectListItem
                  {
                      Value = c.ToString(),
                      Text = c.ToString()
                  }).ToList();

                ViewBag.Weeks = new SelectList(teams, "Value", "Text");

                return View(fx);
            }
        }

    public IEnumerable<Team> GetTeams()
        {
            return _db.Teams.ToArray();
        }

public partial class Fixture
    {
        public int FixtureId { get; set; }
        public string Season { get; set; }
        public byte Week { get; set; }

        //foreign key
        public int AwayTeamId { get; set; }
        //navigation properties
        public virtual Team AwayTeam { get; set; }

        //foreign key
        public int HomeTeamId { get; set; }
        //navigation properties
        public virtual Team HomeTeam { get; set; }

        public byte? AwayTeamScore { get; set; }
        public byte? HomeTeamScore { get; set; }
    }

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Fixture</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Season)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Season)
            @Html.ValidationMessageFor(model => model.Season)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Week)
        </div>
        <div class="editor-field">
            @Html.DropDownListFor(model => model.Week, (SelectList)ViewBag.Weeks)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.AwayTeam.TeamId)
        </div>
        <div class="editor-field">
            @Html.DropDownListFor(model => model.AwayTeam.TeamId, (SelectList)ViewBag.Teams)
            @Html.ValidationMessageFor(model => model.AwayTeam.TeamId)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.AwayTeamScore)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.AwayTeamScore)
            @Html.ValidationMessageFor(model => model.AwayTeamScore)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.HomeTeam.TeamId)
        </div>
        <div class="editor-field">
            @Html.DropDownListFor(model => model.HomeTeam.TeamId, (SelectList)ViewBag.Teams)
            @Html.ValidationMessageFor(model => model.HomeTeam.TeamId)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.HomeTeamScore)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.HomeTeamScore)
            @Html.ValidationMessageFor(model => model.HomeTeamScore)
        </div>

        <p>
            <button data-bind='click: save'>Add fixture</button>
        </p>
    </fieldset>
} 
```

TeamId 外键字段在帖子中填充，但 TeamName 没有。任何想法为什么？这是我的第一次尝试，所以我希望我可能会犯多个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:32:05.090

MVC 与传统的 ASP 不同，它是轻量级的，并且不会将所有这些对象存储在隐藏字段中。也就是说，如果您有以下情况：

```
class Customer {
  public Int32 Id { get; set; }
  public String Name { get; set; }
} 
```

在普通的 ASP 中，您可以将这些对象的集合映射到下拉列表，然后在回发时您将获得结果中引用的原始对象。MVC 不能以这种方式工作，因为它不再存储这些对象。因此，如果您想要那个预期的对象，您将需要使用传递的 ID 并重新检索所需的结果。

`CustomerId`为模型上的属性绘制以下 EditorTemplate ：

```
@model Int32
@Html.DropDownListFor(x => x, new SelectList(
  Customers.GetAllCustomers().Select(y => new SelectListItem {
    Value = y.Id,
    Text = y.Name,
    Selected = Model == y.Id
  })
); 
```

而且当然：

```
@Html.EditorFor(x => x.CustomerId) @* Use above EditorTemplate *@ 
```

然后在您的提交操作中：

```
[HttpPost]
public ActionResult(MyViewModel model)
{
  if (ModelState.IsValid)
  {
    // ID was passed, re-fetch the customer based on selected id
    Customer customer = Customers.GetById(model.CustomerId)
    /* ... */
  }
  /* ... */
  return View();
} 
```

# c# - 当复选框仍处于选中状态时，将消息保留在文本框中

> ID：13789493
> 
> 赞同：1
> 
> 时间：2012-12-09T16:54:23.667
> 
> 标签：c#, .net

我在文本框中有 3 个带有相应消息的复选框。我的老师希望在复选框仍处于选中状态时将消息保留在文本框中，并在未选中时隐藏文本。在我的情况下，当我选中 3 个复选框时，它们的 3 个相应消息会出现，但是当我取消选中其中一个复选框并且其他两个仍处于选中状态时，所有消息都会消失。我的问题是，当我取消选中其中一个复选框并且其他 2 个仍处于选中状态时，剩余两个选中复选框的相应消息将保留在其文本框中。

```
private void chkCarWheels_CheckedChanged(object sender, EventArgs e)
{
    if (chkCarWheels.Checked == true)
        lblMessage.Text = lblMessage.Text + mycar.hasWheels(4);
    else
        lblMessage.Text = "My  " + txtName.Text + " Car";
}

private void chkCarAcceleration_CheckedChanged(object sender, EventArgs e)
{
    if (chkCarAcceleration.Checked == true)
       lblMessage.Text = lblMessage.Text + mycar.Accelerate();
    else
        lblMessage.Text = "My  " + txtName.Text + " Car";
} 

private void chkCarBreakpad_CheckedChanged(object sender, EventArgs e)
{
    if (chkCarBreakpad.Checked == true)
        lblMessage.Text = lblMessage.Text + mycar.hasBreak();
    else
        lblMessage.Text = "My  " + txtName.Text + " Car";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:19:13.190

看起来您需要根据复选框状态创建消息。您可以创建方法，该方法将完成工作并在某些复选框的状态更改时调用它。

```
private void chkCarWheels_CheckedChanged(object sender, EventArgs e)
{
    BuildMessage();
}

private void chkCarAcceleration_CheckedChanged(object sender, EventArgs e)
{
    BuildMessage();
} 

private void chkCarBreakpad_CheckedChanged(object sender, EventArgs e)
{
    BuildMessage();
} 
```

或者更好的一个 -*为所有复选框创建一个事件处理程序*：

```
// use for chkCarWheels, chkCarAcceleration, chkCarBreakpad
private void chkCar_CheckedChanged(object sender, EventArgs e)
{
    BuildMessage();
}

private void BuildMessage()
{     
    lblMessage.Text = "My  " + txtName.Text + " Car";
    if (chkCarWheels.Checked)
        lblMessage.Text = lblMessage.Text + mycar.hasWheels(4);
    if (chkCarAcceleration.Checked)
       lblMessage.Text = lblMessage.Text + mycar.Accelerate();
    if (chkCarBreakpad.Checked)
       lblMessage.Text = lblMessage.Text + mycar.hasBreak();
} 
```

您不需要将布尔值与真/假进行比较。直接使用这些值`if (chkCarWheels.Checked)`。请记住，在 C# 中，我们使用 CamelCase 名称形式的方法。还考虑用于`StringBuilder`构建整个消息，然后将其分配给标签：

```
private void BuildMessage()
{
    StringBuilder sb = new StringBuilder();
    sb.AppendFormat("My {0} Car", txtName.Text);
    if (chkCarWheels.Checked)
        sb.Append(mycar.hasWheels(4));
    if (chkCarAcceleration.Checked)
       sb.Append(mycar.Accelerate());
    if (chkCarBreakpad.Checked)
       sb.Append((mycar.hasBreak());
    lblMessage.Text = sb.ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:21:07.883

尝试这个：

```
 private void chkCarWheels_CheckedChanged(object sender, EventArgs e)
    {
        chkCar();
    }

    private void chkCarAcceleration_CheckedChanged(object sender, EventArgs e)
    {
        chkCar();
    } 

    private void chkCarBreakpad_CheckedChanged(object sender, EventArgs e)
    {
       chkCar()
    } 

private void chkCar()
{

string msg="";

if (chkCarWheels.Checked)
msg=msg+mycar.hasWheels(4);

if(chkCarAcceleration.Checked)
msg=msg+mycar.Accelerate();

if(chkCarBreakpad.Checked)
msg=msg+mycar.hasBreak();

lblMessage.Text=msg;

} 
```

# javascript - 条件 javascript 语句抛出异常与内联条件

> ID：13789497
> 
> 赞同：2
> 
> 时间：2012-12-09T16:54:57.090
> 
> 标签：javascript

以下条件语句在未定义值时引发异常：

```
if (!(e = e[f])) {
    e[f] = {};
} 
```

而以下内联条件不会引发任何异常：

```
e = e[f] ? e[f] : e[f] = {}; 
```

这是包含条件的函数，它负责从窗口对象开始动态创建对象：

```
function t(a, c) {
    var s = a.split('.'),
        e = window;
    // works only in IE
    !(s[0] in e) && e.execScript && e.execScript('var '+ s[0]);
    for (var f; s.length && (f = s.shift()); ) {
        if (!s.length && void 0 !== c) {
            e[f] = c;
        }else {
            e = e[f] ? e[f] : e[f] = {};
        }
    }
} 
```

调用此函数的示例：

```
t('s.d'); 
```

此调用应创建一个新对象：`window.s.d`

有没有人知道发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:10:04.473

## 第一种情况：

```
if (!(e = e[f])) {
    e[f] = {};
} 
```

您正在将`e`（设置为`window`对象）设置为它的`.s`属性（即`t('s.d')`）。这个属性是未定义的，并且“注意”这个`!`将返回 true，从而有效地使语句通过。在下一行`e`仍然是未定义的，当你这样做

```
e[ f ] = {}; 
```

它转化为：

```
undefined[ f ] = {}; 
```

这就是导致错误的原因。

## 第二种（三元）情况：

```
e = e[f] ? e[f] : e[f] = {}; 
```

这被解析为：

```
e = (e[f]) ? e[f] : e[f] = {}; 
```

而**不是**作为

```
(e = e[f]) ? e[f] : e[f] = {}; 
```

如果在后一种情况下对其进行解析，您将得到与条件情况相同的错误，因为第一个操作数 ( `e[f]`) 将返回 undefined，进入三元运算符 ( `e[f] = {}`) 的错误情况。这也将转换为`undefined[f] = {}`导致错误的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T17:12:09.013

分解它：

1.  `e = e[f]`，这是一个任务。

    `e``undefined`如果`e[f]`不存在将被分配。

2.  `!(e = e[f])`是`true`。

    该语句是`true`因为`e`不包含名为`f`.

3.  `if (!(e = e[f])) { ... }`，则满足条件。

4.  `if( ... ){ e[f] = {}; }`.

    此时`e`持有价值`undefined`。这转换为`undefined[f] = {}`，因此错误。

# c# - Telerik Winforms ChartView：如何为图表标签选择不同的背景颜色

> ID：13789508
> 
> 赞同：1
> 
> 时间：2012-12-09T16:56:06.367
> 
> 标签：c#, winforms, telerik

我正在使用最新版本的 Telerik WinForms。我有饼图，有 4 个数据点的 1 个系列，并分配了一个具有 4 种颜色（红色、绿色、橙色和蓝色）的自定义调色板，只有第一种填充颜色，没有其他设置。到目前为止，这运作良好。我还想显示相应的标签。这也有效，但所有标签的背景颜色与其对应的数据点/段相同。我想改变。当我不使用任何调色板时，每个段都有自己的颜色，但所有标签都有白色背景。

有没有办法改变标签的背景颜色？

除了winforms之外，我没有其他方法可以切换。

另外，如果没有办法做到这一点，我想知道。

如果您需要更多信息和/或屏幕截图，请询问，没问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:03:31.290

我在 Telerik 论坛上问了同样的问题，他们提供了一个有效的答案。可以在这里找到[http://www.telerik.com/community/forums/winforms/chartview/how-to-choose-a-different-background-color-for-a-chart-label.aspx](http://www.telerik.com/community/forums/winforms/chartview/how-to-choose-a-different-background-color-for-a-chart-label.aspx)

# javascript - directionalLight 属性没有可见的输出

> ID：13789514
> 
> 赞同：0
> 
> 时间：2012-12-09T16:56:59.033
> 
> 标签：javascript, three.js

在这个[小提琴](http://jsfiddle.net/Gsnhx/)中，当我更改以下参数时，我看不到任何可见的变化

```
directionalLight.shadowCameraVisible = true;
directionalLight.shadowCameraLeft = 1000;
directionalLight.shadowCameraRight = 1000;
directionalLight.shadowCameraBottom = 1000;
directionalLight.shadowCameraTop = 1000; 
```

是否有任何隐藏设置？这些参数的功能是什么。

[文档](http://mrdoob.github.com/three.js/docs/53/#Reference/Lights/DirectionalLight)也无济于事，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:34:45.027

这些参数仅影响正交相机。因此，您需要将相机设置为`THREE.OrthographicCamera()`. 这里有一些关于如何使用阴影的教程：[Casting Shadows](http://learningthreejs.com/blog/2012/01/20/casting-shadows/)。

通常，您看不到任何可见的变化，因为您的场景中只有一个立方体，因此您没有在任何东西上投射阴影。为您的场景添加更多几何图形，看看如何根据本教程解决问题。

希望有帮助！

# cuda - 使用 CUDA C 添加两个向量，启动内核

> ID：13789516
> 
> 赞同：0
> 
> 时间：2012-12-09T16:57:23.070
> 
> 标签：cuda

我有一个异构并行编程的作业要做。代码是由教职员工编写的，我们的职责是填写由 标记的区域`//@@`。该代码应该使用 CUDA C 添加两个向量。我尝试了下面的解决方案，虽然程序执行没有错误，但反馈说代码的输出与预期结果不匹配。这是我添加我认为需要的代码后的代码：

```
// MP 1
#include    <wb.h>

__global__ void vecAdd(float* in1, float* in2, float* out, int len) {
//@@ Insert code to implement vector addition here
int i = threadIdx.x + blockDim.x * blockIdx.x;
if (i < len ) out[i] = in1[i] + in2[i]; 
}

int main(int argc, char ** argv) {
wbArg_t args;
int inputLength;
float * hostInput1;
float * hostInput2;
float * hostOutput;
float * deviceInput1;
float * deviceInput2;
float * deviceOutput;
//@@ i added ######
int size = inputLength*sizeof(float);
//@@ ########
args = wbArg_read(argc, argv);

wbTime_start(Generic, "Importing data and creating memory on host");
hostInput1 = (float *) wbImport(wbArg_getInputFile(args, 0), &inputLength);
hostInput2 = (float *) wbImport(wbArg_getInputFile(args, 1), &inputLength);
hostOutput = (float *) malloc(inputLength * sizeof(float));

wbTime_stop(Generic, "Importing data and creating memory on host");

wbLog(TRACE, "The input length is ", inputLength);

wbTime_start(GPU, "Allocating GPU memory.");
//@@ Allocate GPU memory here

cudaMalloc((void**)&deviceInput1 , size);
cudaMalloc((void**)&deviceInput2 , size);
cudaMalloc((void**)&deviceOutput , size);
wbTime_stop(GPU, "Allocating GPU memory.");

wbTime_start(GPU, "Copying input memory to the GPU.");
//@@ Copy memory to the GPU here
cudaMemcpy(deviceInput1, hostInput1, size, cudaMemcpyHostToDevice);
cudaMemcpy(deviceInput2, hostInput2, size, cudaMemcpyHostToDevice);
wbTime_stop(GPU, "Copying input memory to the GPU.");

//@@ Initialize the grid and block dimensions here  
dim3 DimGrid((inputLength -1)/256 +1 , 1 , 1);
dim3 DimBlock(256 , 1, 1); 

wbTime_start(Compute, "Performing CUDA computation");
//@@ Launch the GPU Kernel here     
vecAdd<<<DimGrid , DimBlock>>>(deviceInput1 , deviceInput2 , deviceOutput , inputLength); 
cudaThreadSynchronize();
wbTime_stop(Compute, "Performing CUDA computation");

wbTime_start(Copy, "Copying output memory to the CPU");
//@@ Copy the GPU memory back to the CPU here
cudaMemcpy(hostOutput, deviceOutput, size , cudaMemcpyDeviceToHost);
wbTime_stop(Copy, "Copying output memory to the CPU");

wbTime_start(GPU, "Freeing GPU Memory");
//@@ Free the GPU memory here
free(deviceInput1);
free(deviceInput2);
free(deviceOutput);

wbTime_stop(GPU, "Freeing GPU Memory");

wbSolution(args, hostOutput, inputLength);

free(hostInput1);
free(hostInput2);
free(hostOutput);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:22:55.593

将代码向下移动到`inputLength`变量获得正确值的位置。改变这个：

```
//@@ i added ######
int size = inputLength*sizeof(float);
//@@ ########
args = wbArg_read(argc, argv);

wbTime_start(Generic, "Importing data and creating memory on host");
hostInput1 = (float *) wbImport(wbArg_getInputFile(args, 0), &inputLength);
hostInput2 = (float *) wbImport(wbArg_getInputFile(args, 1), &inputLength);
hostOutput = (float *) malloc(inputLength * sizeof(float)); 
```

对此：

```
args = wbArg_read(argc, argv);

wbTime_start(Generic, "Importing data and creating memory on host");
hostInput1 = (float *) wbImport(wbArg_getInputFile(args, 0), &inputLength);
hostInput2 = (float *) wbImport(wbArg_getInputFile(args, 1), &inputLength);
hostOutput = (float *) malloc(inputLength * sizeof(float));

//@@ i added ######
int size = inputLength*sizeof(float);
//@@ ######## 
```

此外，按照 talonmies 在评论中的建议进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:38:30.487

谢谢 talonmies 和 ahmad，他们都帮助我找到了对我有用的正确答案，完整的答案（谁很有趣）如下：

```
// MP 1
#include    <wb.h>

__global__ void vecAdd(float* in1, float* in2, float* out, int len) {
int i = threadIdx.x + blockDim.x * blockIdx.x;
if (i < len ) out[i] = in1[i] + in2[i];
 }

int main(int argc, char ** argv) {
wbArg_t args;
int inputLength;
float * hostInput1;
float * hostInput2;
float * hostOutput;
float * deviceInput1;
float * deviceInput2;
float * deviceOutput;

args = wbArg_read(argc, argv);

wbTime_start(Generic, "Importing data and creating memory on host");
hostInput1 = (float *) wbImport(wbArg_getInputFile(args, 0), &inputLength);
hostInput2 = (float *) wbImport(wbArg_getInputFile(args, 1), &inputLength);
hostOutput = (float *) malloc(inputLength * sizeof(float));
int size = inputLength*sizeof(float);

wbTime_stop(Generic, "Importing data and creating memory on host");

wbLog(TRACE, "The input length is ", inputLength);

wbTime_start(GPU, "Allocating GPU memory.");

cudaMalloc((void**)&deviceInput1 , size);
cudaMalloc((void**)&deviceInput2 , size);
cudaMalloc((void**)&deviceOutput , size);
wbTime_stop(GPU, "Allocating GPU memory.");

wbTime_start(GPU, "Copying input memory to the GPU.");

cudaMemcpy(deviceInput1, hostInput1, size, cudaMemcpyHostToDevice);
cudaMemcpy(deviceInput2, hostInput2, size, cudaMemcpyHostToDevice);
wbTime_stop(GPU, "Copying input memory to the GPU.");

dim3 DimGrid((inputLength -1)/256 +1 , 1 , 1);
dim3 DimBlock(256 , 1, 1); 

wbTime_start(Compute, "Performing CUDA computation");
//@@ Launch the GPU Kernel 

vecAdd<<<DimGrid , DimBlock>>>(deviceInput1 , deviceInput2 , deviceOutput ,  inputLength);

cudaThreadSynchronize();
wbTime_stop(Compute, "Performing CUDA computation");

wbTime_start(Copy, "Copying output memory to the CPU");
//@@ Copy the GPU memory back to the CPU 
cudaMemcpy(hostOutput, deviceOutput, size , cudaMemcpyDeviceToHost);
wbTime_stop(Copy, "Copying output memory to the CPU");

wbTime_start(GPU, "Freeing GPU Memory");
//@@ Free the GPU memory 
cudaFree(deviceInput1);
cudaFree(deviceInput2);
cudaFree(deviceOutput);

wbTime_stop(GPU, "Freeing GPU Memory");

wbSolution(args, hostOutput, inputLength);

free(hostInput1);
free(hostInput2);
free(hostOutput);

return 0;
} 
```

# wordpress - 将类别限制为编辑器 Wordpress

> ID：13789518
> 
> 赞同：1
> 
> 时间：2012-12-09T16:57:39.480
> 
> 标签：wordpress

我正在使用 Wordpress 中的质量控制主题制作投诉管理系统。我想有一个超级管理员，管理员和用户。管理员基本上是特定类别的管理员，因此他们只能查看、编辑和更改该类别中的投诉。

我使用用户分配类别插件来做到这一点。管理员的管理面板运行良好，即我只能编辑和更改特定类别的帖子。但在网站上，管理员可以查看所有投诉，甚至可以对其进行编辑。我也想限制管理员在网站上仅查看其类别下的投诉。我尝试了很多插件来做到这一点，但没有成功。请帮我。（我给管理员分配了编辑的角色）

# ruby-on-rails - RoR - 事件日历未定义方法“日历”

> ID：13789521
> 
> 赞同：0
> 
> 时间：2012-12-09T16:58:20.037
> 
> 标签：ruby-on-rails

我正在使用事件日历为我的事件生成日历，但我遇到了一个奇怪的错误。每次运行 webrick 时，我都会收到“未定义的方法‘日历’”错误，但如果我更改 events_helper 中的任何内容并在不重新启动服务器的情况下保存，错误就会消失！有没有人见过这样的错误？

这是 events_helper.rb 中消息所指的行（第 3 行）

```
def event_calendar
    # args is an argument hash containing :event, :day, and :options
    calendar event_calendar_opts do |args| 
      event = args[:event]
      %(<a href="/courses/#{@course.id}/events/#{event.id}" title="#{h(event.name)}">#{h(event.name)}</a>)
    end
  end 
```

谢谢！

-- 完整跟踪：

```
app/helpers/events_helper.rb:20:in `event_calendar'
app/views/events/index.html.erb:8:in `_app_views_events_index_html_erb__2839012149448078506_2185002760'
actionpack (3.2.6) lib/action_view/template.rb:145:in `block in render'
activesupport (3.2.6) lib/active_support/notifications.rb:125:in `instrument'
actionpack (3.2.6) lib/action_view/template.rb:143:in `render'
actionpack (3.2.6) lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
actionpack (3.2.6) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
activesupport (3.2.6) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.6) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.6) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
actionpack (3.2.6) lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
actionpack (3.2.6) lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
actionpack (3.2.6) lib/action_view/renderer/template_renderer.rb:45:in `render_template'
actionpack (3.2.6) lib/action_view/renderer/template_renderer.rb:18:in `render'
actionpack (3.2.6) lib/action_view/renderer/renderer.rb:36:in `render_template'
actionpack (3.2.6) lib/action_view/renderer/renderer.rb:17:in `render'
actionpack (3.2.6) lib/abstract_controller/rendering.rb:110:in `_render_template'
actionpack (3.2.6) lib/action_controller/metal/streaming.rb:225:in `_render_template'
actionpack (3.2.6) lib/abstract_controller/rendering.rb:103:in `render_to_body'
actionpack (3.2.6) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
actionpack (3.2.6) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
actionpack (3.2.6) lib/abstract_controller/rendering.rb:88:in `render'
actionpack (3.2.6) lib/action_controller/metal/rendering.rb:16:in `render'
actionpack (3.2.6) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
activesupport (3.2.6) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/moshark/.rvm/rubies/ruby-1.9.3-rc1/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
activesupport (3.2.6) lib/active_support/core_ext/benchmark.rb:5:in `ms'
actionpack (3.2.6) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
actionpack (3.2.6) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
activerecord (3.2.6) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
actionpack (3.2.6) lib/action_controller/metal/instrumentation.rb:39:in `render'
actionpack (3.2.6) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
actionpack (3.2.6) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
actionpack (3.2.6) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.6) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.6) lib/active_support/callbacks.rb:447:in `_run__3962713512247968028__process_action__3396197975695833499__callbacks'
activesupport (3.2.6) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.6) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.6) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.6) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.6) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.6) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.6) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.6) lib/action_controller/metal/params_wrapper.rb:206:in `process_action'
activerecord (3.2.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.6) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.6) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.6) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.6) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.6) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.6) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.6) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.6) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.6) lib/action_dispatch/routing/route_set.rb:600:in `call'
sass (3.2.1) lib/sass/plugin/rack.rb:54:in `call'
warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
warden (1.2.1) lib/warden/manager.rb:34:in `catch'
warden (1.2.1) lib/warden/manager.rb:34:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/cookies.rb:338:in `call'
activerecord (3.2.6) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.6) lib/active_support/callbacks.rb:405:in `_run__2917286435426199189__call__17875809250747617__callbacks'
activesupport (3.2.6) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.6) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.6) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.6) lib/rails/rack/logger.rb:16:in `call'
quiet_assets (1.0.1) lib/quiet_assets.rb:20:in `call_with_quiet_assets'
actionpack (3.2.6) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.6) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.6) lib/rails/engine.rb:479:in `call'
railties (3.2.6) lib/rails/application.rb:220:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.6) lib/rails/rack/log_tailer.rb:17:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
/Users/moshark/.rvm/rubies/ruby-1.9.3-rc1/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/Users/moshark/.rvm/rubies/ruby-1.9.3-rc1/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/Users/moshark/.rvm/rubies/ruby-1.9.3-rc1/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T10:15:46.423

尝试将 EventCalendar::CalendarHelper 包含到您的助手中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:31:09.970

`event_calendar`除了将它包含在 Gemfile 中之外，您可能还需要它。

使用以下语法：

```
gem 'event-calendar', :require => 'event_calendar' 
```

# c# - 保留我在 C# 中以编程方式创建的 TextBox 控件的值

> ID：13789522
> 
> 赞同：1
> 
> 时间：2012-12-09T16:58:24.390
> 
> 标签：c#, asp.net, textbox, return-value

我已经为此苦苦挣扎了几个小时，似乎无法在网上找到答案。我在网上找到的几种做法都没有完成这项工作，所以我想我做错了什么。

我创建了一个 Table 对象，放置了几个 TableRow 对象，我在这些对象下放置了 TableCell。此表的一列由我创建的 TextBox 对象组成：

```
Table productTable = new Table();
int j = 0;
foreach (Product i in prodList)
        {
            TextBox qttyTB = new TextBox();
            qttyTB.ID = "Quantity" + Convert.ToString(j);
            qttyTB.Style["width"] = "30px";
            qttyTB.Text = "0";
            TableRow tableR = new TableRow();
            TableCell tableC1 = new TableCell();
            tableC1.Text = "<img src='" + i.ImagePath + "' class='ProductImage'/>";
            tableR.Controls.Add(tableC1);
            TableCell tableC2 = new TableCell();
            tableC2.Text = i.Name + "&nbsp;&nbsp;&nbsp;&nbsp;";
            tableR.Controls.Add(tableC2);
            TableCell tableC3 = new TableCell();
            tableC3.Text = i.Price + "&nbsp;&#8362;&nbsp;&nbsp;&nbsp;&nbsp;";
            tableR.Controls.Add(tableC3);
            TableCell tableC4 = new TableCell();
            tableC4.Controls.Add(tbArray[j - 1]);
            tableR.Controls.Add(tableC4);
            productTable.Controls.Add(tableR);
            j++;
        }
TablePH.Controls.Add(productTable); 
```

页面输出工作 100%。现在，单击按钮后，我试图保留已创建的 TextBox 对象的值。尝试了几件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T18:07:55.190

在 CodeBehind 中填充表通常是一种不好的做法，应该避免，因为您将视图和业务逻辑问题分开。

如果您要从数据库中检索产品，那么您希望在 .aspx 文件中添加类似的内容。如果不是 SQL，那么您可以通过谷歌搜索找到其他数据源。

```
 <asp:SqlDataSource ID="SelectItemsDataSource" runat="server" 
    ConnectionString="<%$ ConnectionStrings:hubConnectionString %>" 
    ProviderName="<%$ ConnectionStrings:hubConnectionString.ProviderName %>" 

        SelectCommand="SELECT itemEntity.id, itemEntity.name, itemEntity.filename, itemEntity.type, itemEntity.added, userEntity.name FROM item AS itemEntity 
                        LEFT OUTER JOIN USER AS userEntity ON itemEntity.uploader = userEntity.id WHERE itemEntity.type like @type ORDER BY itemEntity.added DESC" 
        OnSelecting="onItemSelecting"> 
        <SelectParameters>
           <asp:Parameter Name="@type" Type="String" />
        </SelectParameters>       
</asp:SqlDataSource> 
```

然后在定义表格的地方，根据需要添加不同类型的字段。注意：由 <%# x %> 包围的属性值正在调用代码隐藏中的函数。

```
<asp:GridView ID="ItemGrid" runat="server" DataSourceID="SelectItemsDataSource" class="itemGrid"
    AutoGenerateColumns="False" AllowPaging="True" AllowSorting="True" 
    CellPadding="4" ForeColor="#333333" GridLines="None">
    <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
    <Columns>
        <asp:TemplateField HeaderText="File type">
            <ItemTemplate>
                <asp:Image runat="server" ID="mediaImage"
                    ImageUrl='<%# GetImageUrl(Eval("type") as string) %>' />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Preview">
            <ItemTemplate>
                <a runat="server" id="mediaPreview" href='<%# GetPreviewUrl(Eval("id").ToString()) %>'>Play</a>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:HyperLinkField DataTextField="name" DataNavigateUrlFields="id" DataNavigateUrlFormatString="Download.aspx?FileID={0}" HeaderText="Name"/>            
        <asp:BoundField HeaderText="Uploaded date" 
            DataField="added" DataFormatString="{0:d MMMM, yyyy}" SortExpression="added">
        </asp:BoundField>
        <asp:BoundField HeaderText="Uploaded by" 
            DataField="name1" SortExpression="name1">
        </asp:BoundField>
    </Columns>
</asp:GridView> 
```

# php - PHP - MySQL - JS：如何将动态行与自动填充结合起来？

> ID：13789523
> 
> 赞同：0
> 
> 时间：2012-12-09T16:58:24.697
> 
> 标签：php, javascript, mysql

我想做一些动态的行。每行中的一列需要从 MySQL 数据库加载数据，一列需要从选定的选项中获取值。

这是一行的样子：

日期 | 没有 | 供应商_ID | 供应商名称 | 数量 | 价格

Supplier_Name 是一个从 MySQL 数据库 ( `SELECT supplier_name FROM tblSupplier`) 中获取列表的下拉列表。

然后，当我选择供应商名称之一时，我想获取供应商名称的 id 值。

PRIMARY KEY 是 Supplier_Id。

是否可以将动态行与下拉列表（从 MySQL 数据库中获取列表）和自动填充（获取所选名称的 id 值）结合起来？

这是我的代码：

```
<tr>
<td>
    <input name="date" type="text" id="date" value="<?php echo date("Y-m-d", $now); ?>" maxlength="10" size="10" readonly/>
</td>
<td><input name="no" type="number" id="no[]" value="<?php echo $no; ?>"readonly/></td>
<td><input name="supplier_id" type="text" id="supplier_id[]" value="<?php echo $supplier_id; ?>"></td>

<td align="center"><select name="supplier_name">
            <?php
            while($suppl=mysql_fetch_array($s)){
            ?><option value=<?echo $suppl[0]?> selected> <?php echo $suppl[1];?></option>
            <?php } ?>

<td align="center"><input name="qty" type="number" size="10" maxlength="10"></td>
<td align="center"><input name="price" type="number" size="10" maxlength="10"></td>
</tr> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:29:05.723

您可以通过使用会话来获取供应商 ID

```
$sql ="SELECT * FROM tblSupplier"; 
$row = mysql_fetch_array ($sql);

session_start();
if ( isset($_POST['supplier_id'])) {
$supplier_id = $_POST['supplier_id'] ;
$_SESSION['supplier_id']= $_POST['supplier_id'];
 }else{$_SESSION['supplier_id']= $row['supplier_id'];} 
```

然后用这一行替换

```
 <td><input name="supplier_id" type="text" id="supplier_id[]" value="<?php echo $_SESSION['supplier_id']; ?>"/></td> 
```

改变

```
readonly 
```

至

```
readonly="readonly" 
```

# powershell - 如何在powershell中获取参数计数和参数字符串？

> ID：13789527
> 
> 赞同：1
> 
> 时间：2012-12-09T16:58:38.010
> 
> 标签：powershell

我以前用过unix bash，在powershell中找不到类似$*或$#的命令

我发现 $* 是 $args 但是什么是 $# 这不起作用：

```
$args.toString().split(" ").length; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T17:20:04.247

有一段时间没有这样做了，但它应该像这样工作。

```
$* : $args
$# : $args.count
$1 : $args[0] 
```

未经测试的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T22:18:14.483

更好的选择是使用 param() 声明命名参数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T17:20:37.133

$args 是一个数组，所以 $args.Length 应该可以解决问题...

# php - 空数组（不为空）

> ID：13789531
> 
> 赞同：0
> 
> 时间：2012-12-09T16:58:58.587
> 
> 标签：php, regex, arrays

```
while($row = mysql_fetch_row($result)){
        preg_match('#<span id="lblNumerZgloszenia" style="font-weight:bold;font-style:italic;">([^<]*)<\/span>#',$row[1],$matches);
        $query2 = 'UPDATE content_pl SET kategoria_data='.$matches[1].' WHERE id='.$row[0].';';
        mysql_query($query2);
    } 
```

我这样做`preg_match`是为了将`span`内容放入`$matches`数组中。当我执行 a`print_r($matches)`时，它会显示正确的结果，但是当我使用时`$matches[1]`，它的浏览器会告诉我没有这样的索引。

编辑：`print_r`显示

```
[...]Array ( [0] => TOW:   (210) 252250, (220) 01-07-2002 [1] => TOW:   (210) 252250, (220) 01-07-2002 ) Array ( [0] => TOW:   (210) 252251, (220) 01-07-2002 [1] => TOW:   (210) 252251, (220) 01-07-2002 ) Array ( [0] => TOW:   (210) 252252, (220) 01-07-2002 [1] => TOW:   (210) 252252, (220) 01-07-2002 ) Array ( [0] => TOW:   (210) 252253, (220) 01-07-2002 [1] => TOW:   (210) 252253, (220) 01-07-2002 )[...] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T17:07:07.377

您在`while`循环中执行此操作，这意味着它可能不止一次发生。如果你只是`print_r($matches); exit;`你可能会注意到你得到了你所期望的，但这只是你循环的迭代之一。

最有可能的是*，至少在*一种情况下您找不到任何匹配项。您应该使用检查调用返回值的语句来包装您的第二个`mysql_query`（不推荐使用，顺便说一句 - 如果您的项目很小，您可能希望切换到 PDO）。仅在返回 > 0时运行查询`if``preg_match``preg_match`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T17:09:19.870

让我向您展示一种比[使用 regex 解析 HTML](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)更好的方法。[这是一个方便](http://simplehtmldom.sourceforge.net/)的库来为你做解析。代码变得非常简单（并且可读）：

```
$html = new simple_html_dom();
$html->load($row[1]);

$span = $html->find('span[id=lblNumerZgloszenia]', 0);
$data = $span->innertext;

$query2 = 'UPDATE content_pl SET kategoria_data='.$data.' WHERE id='.$row[0].';'; 
```

如果由于某种原因不能使用 3rd-party 库，您可以使用[内置的 DOM 模块](http://php.net/manual/en/book.dom.php)做类似的事情。它不会那么优雅，但仍然更加健壮和可读。

# android - 如何在安卓键盘上添加“下一步”

> ID：13789533
> 
> 赞同：9
> 
> 时间：2012-12-09T16:59:25.203
> 
> 标签：android, keyboard, focus

我在一些应用程序中看到，键盘上出现了一个名为 next 的 Button，它将焦点放在下一个 Edit Text 上。我想在我的应用程序中添加这个，你知道我该怎么做吗？还是仅在应用程序的键盘上？非常感谢。抱歉，我没有这方面的更多信息。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-10T03:39:21.147

在edittext的布局中添加`android:imeOptions`属性。在这里，您可以添加不同的操作按钮，如 Go、Search、Send、Next、Done 等。但要使用此功能，EditText 必须是单行，否则那里会有一个输入按钮。所以也使用`android:singleLine="true".`

所以这是你的解决方案

```
<EditText
    android:id=//put ur id
    android:layout_width=//according to need
    android:layout_height=//accordintoneed
    android:imeOptions="actionNext"
    android:singleLine="true"/> 
```

**编辑**

另外，我应该添加更多以供将来使用或其他人的帮助..

您可以处理代码中的 imeoption 操作。为此，您必须将 setOnEditorActionListener 设置为 Edittext，并且当按下操作时，您可以在公共`boolean onEditorAction(TextView v, int actionId, KeyEvent event)`方法上获取它。如果您不自己处理代码，imeoptions 操作将执行默认操作（通常转到下一个控件）。

这是处理动作的示例代码

```
EditText e = (EditText)findViewById(R.id.editText1);
e.setOnEditorActionListener(new OnEditorActionListener() {

        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
                 if (actionId == EditorInfo.IME_ACTION_NEXT ) {
                            // handle next button
                    return true;
                 }  
                 return false; 
        }
    }); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-09T17:36:52.750

您只需在布局中使用 imeOptions 标签。请参阅文档中的[imeOptions](http://developer.android.com/reference/android/widget/TextView.html#attr_android:imeOptions)。

```
<EditText
    android:id="@+id/someField"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:imeOptions="actionNext"/> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-07T15:09:13.350

您必须在 EditText 中添加下面给出的这两行

```
android:imeOptions="actionNext"
android:singleLine="true" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-04T06:27:52.520

我尝试了所有发布在这里的答案，但没有一个真正起作用。很高兴我为自己找到了解决方案。

```
 <EditText
            android:id="@+id/etRegisterFirstName" 
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:hint="Firstname"
            android:imeOptions="actionNext"
            android:inputType="textCapWords"
            android:maxLines="1" />

        <EditText
            android:id="@+id/etRegisterLastName" 
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:hint="Lastname"
            android:imeOptions="actionNext"
            android:inputType="textCapWords"
            android:maxLines="1" /> 
```

请注意**我添加了 android:inputType**。就是这样 。

干杯/快乐编码

# session - 从另一个 php 文件访问 Symfony2 会话？

> ID：13789538
> 
> 赞同：4
> 
> 时间：2012-12-09T16:59:47.820
> 
> 标签：session, symfony

我想从基于 web 目录的另一个 php 页面访问 symfony 会话数据。

我已经定义：

```
$this->getRequest()->getSession()->set('school', 'abc'); 
```

并且想在另一个存在于 web 目录（不是控制器）中的 php 页面中获取（'school'）。我已经在 Google 上搜索了几个小时并尝试了很多替代方案，但都没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:36:32.920

我已经用这个解决方案解决了这个问题：

在 config.yml 中：

```
framework:
    session:
        save_path: ~ 
```

然后我开始了`session_start();`一个简单的 php 脚本。

并通过以下方式访问：

```
$_SESSION['_sf2_attributes']['my_value']; 
```

现在好啦。

# python - python-iptables：允许端口 1234 上的传入 TCP 流量时出现神秘错误

> ID：13789542
> 
> 赞同：2
> 
> 时间：2012-12-09T17:00:24.227
> 
> 标签：python, iptables

我想用 Python 写一个 iptables 脚本。而不是调用 iptables 本身，我想使用 python-iptables 包。但是，我很难设置一些基本规则。我想使用过滤器链来接受端口 1234 上的传入 TCP 流量。所以我写了这个：

```
import iptc
chain = iptc.Chain(iptc.TABLE_FILTER,"INPUT")
rule = iptc.Rule()
target =  iptc.Target(rule,"ACCEPT")
match = iptc.Match(rule,'tcp')
match.dport='1234'
rule.add_match(match)
rule.target = target
chain.insert_rule(rule) 
```

然而，当我运行它时，我把它抛给了我：

```
Traceback (most recent call last):
  File "testing.py", line 9, in <module>
    chain.insert_rule(rule)
  File "/usr/local/lib/python2.6/dist-packages/iptc/__init__.py", line 1133, in insert_rule
    self.table.insert_entry(self.name, rbuf, position)
  File "/usr/local/lib/python2.6/dist-packages/iptc/__init__.py", line 1166, in new
    obj.refresh()
  File "/usr/local/lib/python2.6/dist-packages/iptc/__init__.py", line 1230, in refresh
    self._free()
  File "/usr/local/lib/python2.6/dist-packages/iptc/__init__.py", line 1224, in _free
    self.commit()
  File "/usr/local/lib/python2.6/dist-packages/iptc/__init__.py", line 1219, in commit
    raise IPTCError("can't commit: %s" % (self.strerror()))
iptc.IPTCError: can't commit: Invalid argument
Exception AttributeError: "'NoneType' object has no attribute 'get_errno'" in <bound method Table.__del__ of <iptc.Table object at 0x7fcad56cc550>> ignored 
```

有没有人有 python-iptables 的经验可以启发我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:07:13.847

哦，刚注意到这个。可以给[github 上](https://github.com/ldx/python-iptables.git)的最新头一个机会吗？我已经修复了大量的错误并更新了 python-iptables 以使用最新的 iptables 版本。如果您仍然遇到问题，请在[github](https://github.com/ldx/python-iptables/issues/new)上开票。

肯定不太正确的一件事是您没有在规则中设置协议：

```
import iptc
chain = iptc.Chain(iptc.TABLE_FILTER,"INPUT")
rule = iptc.Rule() 
```

在此处设置协议，例如：

```
rule.protocol = 'tcp' 
```

然后你应该没事：

```
target =  iptc.Target(rule,"ACCEPT")
match = iptc.Match(rule,'tcp')
match.dport='1234'
rule.add_match(match)
rule.target = target
chain.insert_rule(rule) 
```

# c# - 从 c# Asp.Net 中的 eventHandler 调用 jQuery 的 .ajax()

> ID：13789543
> 
> 赞同：0
> 
> 时间：2012-12-09T17:00:29.473
> 
> 标签：c#, javascript, jquery, ajax, progress-bar

在 ( `upload.aspx`) 后面的代码中，我有一个事件，它返回正在流式传输的字节数；当我调试它时，它工作正常。我想在进度条上反映从事件处理程序返回的数字，这就是我迷路的地方。我尝试使用 jQuery 的 .ajax() 函数。这就是我实现它的方式：

在我后面代码的 EventHandler 中，我添加了这段代码来调用 .ajax() 函数：

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "UpdateProgress", "<script type='text/javascript'>updateProgress();</script>"); 
```

我的计划是，每当 eventHandler 函数更改正在流式传输的字节的值时，它都会调用 javascript 函数“updateProgress()”

.ajax() 函数“UpdateProgress()”如下：

```
function updateProgress() {

        $.ajax({
            type: "POST",
            url: "upload.aspx/GetData",
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            async: true,
            success: function (msg) {

                $("#progressbar").progressbar("option", "value", msg.d);

            }
        });
    } 
```

我确保函数 GetData() 是 [System.Web.Services.WebMethod] 并且它也是静态的。所以我试图实现的工作流程如下： - 单击上传按钮 - 后面的代码开始执行并触发 EventHandler - EventHandler 调用 .ajax() 函数 - .ajax() 函数检索正在流式传输的字节并更新进度条。

当我运行代码时；一切运行良好，除了 .ajax() 仅在上传完成时执行（并且进度条也仅在完成上传时更新）；即使我每次都在 eventHandler 函数中调用 .ajax() 函数，如上所示...

我究竟做错了什么？我这样想对吗？还有什么我应该添加的东西，也许是一个 updatePanel 什么的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T18:28:17.283

试试这个：

```
$("#progressbar").progressbar({
    value: 0
});

$("#btnUpload").click(function() {
    var intervalID = setInterval(updateProgress, 250);
    $.ajax({
        type: "POST",
        url: "upload.aspx/GetData",
        data: "{}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: true,
        success: function(msg) {
            $("#progressbar").progressbar("value", 100);
            clearInterval(intervalID);
        }
    });
    return false;
});

function updateProgress() {
    var value = $("#progressbar").progressbar("option", "value");
    if (value < 100) {
        $("#progressbar").progressbar("value", value + 1);
    }
}​ 
```

# ember.js - 在 Emberjs 中使用多个命名的 outlet 和一个没有内容的包装器视图

> ID：13789546
> 
> 赞同：2
> 
> 时间：2012-12-09T17:00:52.463
> 
> 标签：ember.js

我正在尝试将多个命名插座与 Ember.js 一起使用。我下面的方法正确吗？

标记：

```
<script type="text/x-handlebars" data-template-name="application">
    <div id="mainArea">
        {{outlet main_area}}
    </div>
</script>

<script type="text/x-handlebars" data-template-name="home">
    <ul id="sections">
        {{outlet sections}}
    </ul>
    <ul id="categories">
        {{outlet categories}}
    </ul>
</script>

<script type="text/x-handlebars" data-template-name="sections">
    {{#each section in controller}}
        <li><img {{bindAttr src="section.image"}}></li>
    {{/each}}
</script>

<script type="text/x-handlebars" data-template-name="categories">
    {{#each category in controller}}
        <img {{bindAttr src="category.image"}}>
    {{/each}}
</script>​ 
```

JS代码：

在这里，我将各种控制器的内容设置为从服务器获取的数据，并将插座与其相应的视图连接起来。由于 HomeController 没有内容，请将其内容设置为空对象 - 摆脱此错误消息的技巧：

> 未捕获的错误：断言失败：无法将 set('categories' ) 委托给对象代理的 'content' 属性：它的 'content' 未定义。

```
App.Router = Ember.Router.extend({
    enableLogging: false,
    root: Ember.Route.extend({
    index: Ember.Route.extend({
        route: '/',

        connectOutlets: function(router){
            router.get('sectionsController').set('content',App.Section.find());
            router.get('categoriesController').set('content',  App.Category.find());
            router.get('applicationController').connectOutlet('main_area', 'home');
            router.get('homeController').connectOutlet('home', {});
            router.get('homeController').connectOutlet('categories', 'categories');
            router.get('homeController').connectOutlet('sections', 'sections');
            }
        })
    })
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T15:07:46.387

如果有任何帮助，我会收到此错误，因为我连接的是 Ember.ObjectController 而不是 Ember.Controller。

# php - 如何使用 exec 通过 PHP 运行 R？

> ID：13789548
> 
> 赞同：1
> 
> 时间：2012-12-09T17:01:01.177
> 
> 标签：php, r, exec

我要问一些事情，我知道它已经被问过好几次了。但是因为，过去的所有帖子都很旧，没有一个回答我的问题..我再试一次。我在 R 语言方面是全新的，而在 php 方面相对较新。我想要做的是使用 exec() 来自 php 的函数来执行 R 脚本。这里的大多数人会开始谈论 rapache、rserve，我不知道还有什么……但由于我对所有这些技术都不熟悉，我更喜欢只使用 exec。

当我从终端使用 Rscript 运行代码时，我将在此处显示的代码运行良好。# R 脚本 png("temp.png") plot(5,5) dev.off()

但是当我尝试使用 Rscript 或 PHP 中的 R CMD BATCH 运行它时，如下所示：

```
 echo exec("Rscript my_rscript.R"); //OR
       //echo exec("R CMD BATCH my_rscript.R"); 
```

我什么也得不到。

我检查了 exec() 函数是否可用以及它是否有效。一切都很好。我还读到，我可能必须更改网络服务器的权限……但我不知道如何在 mamp 中执行此操作。

我希望我对我的问题很清楚，有人可以提供帮助。

谢谢迪米特里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-03T18:19:13.747

不确定这是否适用于图像，但在将结果存储在 exec() 函数的第二个参数中之前，我什么也没得到

```
exec("Rscript test.R $N", $results);
print_r($results); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-27T16:40:08.333

这对我来说可以将图像保存到目录并在网页上可见。从命令行：

```
chown www-data:www-data /usr/bin/Rscript
chown www-data:www-data -R /PATH/TO/RSCRIPTFOLDER 
```

首先更改 Rscript 可执行文件的权限，然后对包含 .php 文件、.R 文件等的整个文件夹执行相同操作。

# php - 查询记录集

> ID：13789553
> 
> 赞同：0
> 
> 时间：2012-12-09T17:01:41.777
> 
> 标签：php, sql

我正在尝试解决如何将 $sql_pay_det 查询移到 $sql_pay 循环之外（因此实际上查询 $rs_pay_det 而不是为循环的每次迭代创建一个新的 $rs_pay_det ）

目前我的代码如下所示：

```
 //Get payroll transactions
        $sql_pay = 'SELECT Field1, DescriptionandURLlink, Field5, Amount, Field4, PeriodName FROM tblgltransactionspayroll WHERE CostCentreCode = "'.$cc.'" AND SubjectiveCode = "'.$subj.'" AND PeriodNo = "'.$month.'"';
        $rs_pay = mysql_query($sql_pay);
        $row_pay = mysql_fetch_assoc($rs_pay);

            while($row_pay = mysql_fetch_array($rs_pay))
              {
                    $employee_name = $row_pay['Field1'];
                    $assign_no = $row_pay['DescriptionandURLlink'];
                    $pay_period = $row_pay['Field5'];
                    $mth_name = $row_pay['PeriodName'];
                    $amount = $row_pay['Amount'];
                    $total_amount = $total_amount + $amount;
                    $amount = my_number_format($amount, 2, ".", ",");

                    $sql_pay_det = 'SELECT ElementDesc, Amount, WTEWorked, WTEPaid, WTEContract, Payscale FROM tblpayrolldetail WHERE CostCentreCode = "'.$cc.'" AND SubjectiveCode = "'.$subj.'" AND AccountingPeriod = "'.$mth_name.'" AND EmployeeRef = "'.$assign_no.'"';
                    $rs_pay_det = mysql_query($sql_pay_det);
                    $row_pay_det = mysql_fetch_assoc($rs_pay_det);

                while($row_pay_det = mysql_fetch_array($rs_pay_det))
                {
                    $element_det = $row_pay_det['ElementDesc'];
                    $amount_det = $row_pay_det['Amount'];
                    $wte_worked = $row_pay_det['WTEWorked'];
                    $wte_paid = $row_pay_det['WTEPaid'];
                    $wte_cont = $row_pay_det['WTEContract'];
                    $payscale = $row_pay_det['Payscale'];

                    //Get band/point and annual salary where element is basic pay
                    if ($element_det =="3959#Basic Pay"){
                        $sql_payscale = 'SELECT txtPayscaleName, Salary FROM tblpayscalemapping WHERE txtPayscale = "'.$payscale.'"';
                        $rs_payscale = mysql_query($sql_payscale);
                        $row_payscale = mysql_fetch_assoc($rs_payscale);

                        $grade = $row_payscale['txtPayscaleName'];
                        $salary = "£" . my_number_format($row_payscale['Salary'], 0, ".", ",");

                    }
                }
            } 
```

我试过这样做：

```
 //Get payroll transactions
        $sql_pay = 'SELECT Field1, DescriptionandURLlink, Field5, Amount, Field4, PeriodName FROM tblgltransactionspayroll WHERE CostCentreCode = "'.$cc.'" AND SubjectiveCode = "'.$subj.'" AND PeriodNo = "'.$month.'"';
        $rs_pay = mysql_query($sql_pay);
        $row_pay = mysql_fetch_assoc($rs_pay);

        //Get payroll detail recordset
        $sql_pay_det = 'SELECT ElementDesc, Amount, WTEWorked, WTEPaid, WTEContract, Payscale, EmployeeRef FROM tblpayrolldetail WHERE CostCentreCode = "'.$cc.'" AND SubjectiveCode = "'.$subj.'" AND AccountingPeriod = "'.$mth_name.'"';
        $rs_pay_det = mysql_query($sql_pay_det);

            while($row_pay = mysql_fetch_array($rs_pay))
              {
                    $employee_name = $row_pay['Field1'];
                    $assign_no = $row_pay['DescriptionandURLlink'];
                    $pay_period = $row_pay['Field5'];
                    $mth_name = $row_pay['PeriodName'];
                    $amount = $row_pay['Amount'];
                    $total_amount = $total_amount + $amount;
                    $amount = my_number_format($amount, 2, ".", ",");

                    //Query $rs_pay_det
                    $sql_pay_det2 = 'SELECT ElementDesc, Amount, WTEWorked, WTEPaid, WTEContract, Payscale FROM ('.$sql_pay_det.') tpd WHERE EmployeeRef = "'.$assign_no.'"';
                    $rs_pay_det2 = mysql_query($sql_pay_det2);
                    $row_pay_det2 = mysql_fetch_assoc($rs_pay_det2);

                while($row_pay_det2 = mysql_fetch_array($rs_pay_det2))
                {
                    $element_det = $row_pay_det2['ElementDesc'];
                    $amount_det = $row_pay_det2['Amount'];
                    $wte_worked = $row_pay_det2['WTEWorked'];
                    $wte_paid = $row_pay_det2['WTEPaid'];
                    $wte_cont = $row_pay_det2['WTEContract'];
                    $payscale = $row_pay_det2['Payscale'];

                    //Get band/point and annual salary where element is basic pay
                    if ($element_det =="3959#Basic Pay"){
                        $sql_payscale = 'SELECT txtPayscaleName, Salary FROM tblpayscalemapping WHERE txtPayscale = "'.$payscale.'"';
                        $rs_payscale = mysql_query($sql_payscale);
                        $row_payscale = mysql_fetch_assoc($rs_payscale);

                        $grade = $row_payscale['txtPayscaleName'];
                        $salary = "£" . my_number_format($row_payscale['Salary'], 0, ".", ",");

                    }
                }
            } 
```

但是我在 $row_pay_det2 上收到一个错误，说“mysql_fetch_assoc()：提供的参数不是有效的 MySQL 结果资源”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T18:56:51.327

您的`subquery`语法 ( `... FROM "'.$rs_pay_det.'" ...`) 是错误的。

根据手册 - [dev.mysql.com/doc/refman/5.0/en/from-clause-subqueries.html](http://dev.mysql.com/doc/refman/5.0/en/from-clause-subqueries.html)

> 子查询在 SELECT 语句的 FROM 子句中是合法的。实际语法是：
> 
> SELECT ... FROM (子查询) [AS] 名称 ...

尝试更改为-

```
$sql_pay_det2 = 'SELECT ElementDesc, Amount, WTEWorked, WTEPaid, WTEContract, Payscale FROM ('.$sql_pay_det.') tpd WHERE EmployeeRef = "'.$assign_no.'"'; 
```

* * *

编辑 - 问题 #2

您只能获得数据集中的第二行，因为[`moves the internal data pointer ahead`](http://us2.php.net/manual/en/function.mysql-fetch-assoc.php)在 using 之后有重复的代码（mysql_fetch_assoc() 和 mysql_fetch_array()） `mysql_fetch_assoc()`。因此，当您这样做时，`mysql_fetch_array()`您将获得除第一行之外的每一行。

```
 //Get payroll transactions
    ...
    $row_pay = mysql_fetch_assoc($rs_pay);

    //Get payroll detail recordset
    ...

        while($row_pay = mysql_fetch_array($rs_pay))
          {
                ...
                $row_pay_det2 = mysql_fetch_assoc($rs_pay_det2);

            while($row_pay_det2 = mysql_fetch_array($rs_pay_det2))
            {
                ...
                }
            }
        } 
```

您需要删除 - `$row_pay = mysql_fetch_assoc($rs_pay);`&`$row_pay_det2 = mysql_fetch_assoc($rs_pay_det2);`

# c++ - c++ - QListWidget

> ID：13789556
> 
> 赞同：-1
> 
> 时间：2012-12-09T17:02:07.930
> 
> 标签：c++, qt, qlistwidget

我创建了一个包含多个项目的工作 QListWidget，但我不知道如何使它对用户友好。它看起来像这样：

```
1000
1001
1002
... 
```

但我希望它看起来像这样，其中前 4 个数字有意义，而所有其余信息仅供用户使用。

```
1000 Name LastName and some other helpful info
1001 tom jeff smallville
1002 ming vase, 1992
... 
```

例如，这一行

```
fotoId = ui->devices->currentItem()->text().toInt(); 
```

在这两种情况下都应该给我相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T18:16:46.807

只需使用带有自定义角色 ID 的[QAbstractItemModel::setData() 。](http://doc.qt.digia.com/qt/qabstractitemmodel.html#setData)

```
const int CustomRole = Qt::UserRole + 1; // enum should be better for multiple user role
...
// set values
listWidget->model()->setData(index1, 1000, CustomRole);
listWidget->model()->setData(index2, 1000, CustomRole);
...
// get value
int value = listWidget->model()->data(index1, CustomRole).toInt(); // should be 1000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T17:29:42.587

您将需要存储字符串，因为您希望在小部件中显示它并在检索它时解析结果，或者自己实现 data() 方法（使用 Qt::DisplayRole）。

# c++ - 如何在批处理文件中将字符串转换为整数？

> ID：13789557
> 
> 赞同：1
> 
> 时间：2012-12-09T17:02:07.097
> 
> 标签：c++, string, visual-studio-2010, batch-file, pre-build-event

我有这个批处理文件：

```
@echo off
set  xx=7
echo the version is %xx% 
```

我想在 VS2010 的预构建事件中使用它 - 作为整数：

```
MY_INT = $(xx) 
```

但它的值是一个字符串，如何在批处理文件中将字符串值转换为整数值？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:55:29.563

环境变量（批处理变量）总是字符串；它们不能存储为整数。

带有 /A 选项的 SET 命令可以从字符串中解析整数，执行算术运算，并将整数结果存储在环境变量中。但最终结果仍然是最终数字的字符串表示形式。

键入`help set`或`set /?`从命令提示符获取有关 SET /A 选项的更多信息。

# javascript - JavaScript 中这三种“类”定义模式之间有什么区别？

> ID：13789559
> 
> 赞同：15
> 
> 时间：2012-12-09T17:02:24.740
> 
> 标签：javascript, backbone.js, knockout.js, coffeescript

Are there any important/subtle/significant differences under the hood when choosing to use one of these four patterns over the others? `Object.create()`而且，当通过与操作员“实例化”时，它们之间有什么区别`new`吗？

1)`CoffeeScript`翻译“类”定义时使用的模式：

```
Animal = (function() {

  function Animal(name) {
    this.name = name;
  }

  Animal.prototype.move = function(meters) {
    return alert(this.name + (" moved " + meters + "m."));
  };

  return Animal;

})(); 
```

和

2）`Knockout`似乎促进的模式：

```
var DifferentAnimal = function(name){

    var self = this;

    self.name = name;

    self.move = function(meters){
        return alert(this.name + (" moved " + meters + "m."));
    };

} 
```

和

3）我经常看到的类似的简单模式：

```
var DifferentAnimalWithClosure = function(name){

    var name = name;

    var move = function(meters){

    };

    return {name:name, move:move};

} 
```

和

4)`Backbone`推广模式：

```
var OneMoreAnimal= ClassThatAlreadyExists.extend({

    name:'',
    move:function(){}

}); 
```

**更新 1：**更改模式 #2 并添加模式 #3 以响应 Elias 的响应 // 次要格式

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T18:42:36.633

需要明确一点：JS 不知道类，只知道对象和自定义的、自定义的构造函数，但这不是重点。
简而言之，回答您的问题：是的，创建您在此处发布的新对象的各种方式之间存在一些小的甚至相当大的差异。

*CoffeeScript：*
这实际上是创建自己的构造函数的最清晰和最传统的方法，但它已经*“优化”*，因为它已经准备好使用（可选）闭包变量。
基本上，这段代码的作用是使用 IIFE，将构造函数定义*和*proptotype 方法分配包装在它们自己的私有范围内，返回对新构造函数的引用。它只是干净、简单的 JS，与您自己编写的没有什么不同。

*淘汰赛：*
现在这让我有点吃惊，因为至少对我来说，您提供的代码片段看起来像是模块模式的一部分，或者是一个强大的构造函数。但是由于您没有使用`strict mode`，因此省略`new`仍然会导致危险情况，并且由于整个函数都经历了创建 的新实例的麻烦，`DifferentAnimal`然后*才*构造第二个对象文字，将 的所有属性分配`DifferentAnimal`给该辅助对象，我会说你错过了一些东西。因为，说实话，在`return {};`这里省略最后一句话，可能根本没有任何区别。另外：如您所见，您`move`在本质上是构造函数中声明了一个方法 ( )。这意味着*每*实例将被分配它自己的函数对象`move`，而不是从原型中获取它。
简而言之：再仔细看看你从哪里得到这个片段，并仔细检查这是否是完整版本，因为如果是，我只能看到*反对*这个的论据。

使用在构造函数中定义的变量很简单：一个闭包，假设您的属性具有不同的初始状态，由一些参数确定，并传递给该构造函数：

```
function MyConstructor(param)
{
     var paramInit = param/2;//or something
     this.p = paramInit;//this property can change later on, so:
     this.reInit = function()
     {//this method HAS to be inside constructor, every instance needs its own method
         this.p = paramInit;//var paramInit can't, it's local to this scope
     };
}
var foo = new MyConstructor(10);
console.log(foo.p);//5
foo.p = 'hi';
console.log(foo.p);//hi
foo.reInit();
console.log(foo.p);//5
console.log(foo.paramInit);//undefined, not available outside object: it's a pseudo-private property 
```

仅此而已，真的。当您看到 ppl using`var that = this;`或其他东西时，通常是创建对在任何地方都可用的主对象的引用，而不必处理令人头疼的问题`this`（`this`引用是什么？当应用于对象以外的对象时，该方法应*该做什么*？它最初是为了？等等......）

*Backbone：*
在这里，我们正在处理另一种情况：扩展对象（即：使用现有*“类”*（构造函数）或特定实例的方法、属性）与简单地创建对象不同。
众所周知，JS 对象可以在任何给定时间分配新属性。这些属性也可以删除。有时，原型属性可以在实例本身上重新定义（掩盖原型行为）等......所以这完全取决于您希望结果对象（新创建的对象，扩展给定实例）看起来像：你希望它从实例中获取所有属性，或者您是否希望两个对象在某个地方使用相同的原型？
这两件事都可以通过使用简单的 JS 来实现，但是他们需要自己编写更多的努力。但是，如果你写，例如：

```
function Animal(name)
{
    this.name = name;
}
Animal.prototype.eat= function()
{
    console.log(this.name + ' is eating');
}; 
```

这可以被视为相当于写作：

```
var Animal = Object.extend({name:'',eat:function()
{
    console.log(this.name + ' is eating');
}}); 
```

短得多，但缺少构造函数。

*`new`vs`Object.create`*
好吧，这很简单：`Object.create`只是功能更强大`new`：您可以在需要创建对象时定义原型方法、属性（包括天气与否，它们是否可枚举、可写等），而不是不必编写构造函数和原型，或者创建对象文字并弄乱所有这些`Object.defineProperty`行。
缺点：有些人*还是*没有使用兼容 ECMA5 的浏览器（IE8 还没有完全死掉）。以我的经验：一段时间后调试相当大的脚本确实变得相当困难：虽然我倾向于使用强力构造函数而不是常规构造函数，但我仍然在脚本的最顶部定义了它们，具有独特、清晰和非常具有描述性的名称，而对象文字是我只是*“即时”*创建的东西。使用`Object.create`，我注意到我倾向于创建实际上有点过于复杂而无法作为实际对象字面量的对象，就好像它们是对象字面量一样：

```
//fictional example, old:
var createSomething = (function()
{
    var internalMethod = function()
    {//method for new object
        console.log(this.myProperty || '');
    };
    return function(basedOn)
    {
        var prop, returnVal= {};
        returnVal.myProperty = new Date();
        returnVal.getCreated = internalMethod;//<--shared by all instances, thx to closure
        if (!basedOn || !(basedOn instanceof Object))
        {//no argument, or argument is not an object:
            return returnVal;
        }
        for (prop in basedOn)
        {//extend instance, passed as argument
            if (basedOn.hasOwnProperty(prop) && prop !== '_extends')
            {
                returnVal[prop] = basedOn[prop];
            }
        }
        returnVal._extends = basedOn;//<-- ref as sort-of-prototype
        return returnVal;
    };
}()); 
```

现在这很冗长，但我已经准备好基本的构造函数，我也可以使用它来扩展现有实例。简单地写下可能看起来不那么冗长：

```
var createSomething = Object.create(someObject, {getCreated:function()
{
    console.log(this.myProperty);
},
myProperty:new Date()}); 
```

但是 IMO，这让你更难跟踪在哪里创建了哪个对象（主要是因为`Object.create`它是一个表达式，并且*不会被提升*。
嗯，这当然不是一个决定性的论点：两者都有其优点和缺点：我更喜欢使用模块模式、闭包和强大的构造函数，如果你不这样做就好了。

希望这能为您解决一两件事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T17:15:12.877

第一个示例将 move 函数放在原型中，该原型将在所有 Animal 实例之间共享。

第二个示例为每个动物实例创建一个新的移动函数。

第三个示例生成一个 Animal 类，其原型中的 move 函数与第一个示例类似，但分配的代码更少。（在您的示例中，名称也在所有实例之间共享，您可能不想要）

将函数放入原型中可以更快地实例化 Animals，并且由于 JIT 引擎的工作方式，甚至函数的执行速度也更快。

# android - 无法在设备 'emulator-5556 上安装 Six.apk 启动已取消

> ID：13789561
> 
> 赞同：0
> 
> 时间：2012-12-09T17:02:42.323
> 
> 标签：android, eclipse, installation, emulation, logcat

当我运行我的 android 应用程序时，我遇到了一个安装错误：无法在模拟器上安装我的应用程序并取消启动。我的应用程序向用户显示谷歌地图。

我的xml文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

       <com.google.android.maps.MapView
        android:id="@+id/mapview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:apiKey="************************** "
        android:clickable="true" />
</LinearLayout> 
```

我的清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.six"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.INTERNET"/>
    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.six.MainActivity"
            android:label="@string/app_name"         
     android:theme="@android:style/Theme.NoTitleBar">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
            <uses-library android:name="com.google.android.maps"/>    
    </application>   
</manifest> 
```

主文件

```
package com.example.six;
import android.os.Bundle;
import android.view.Menu;

import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;

public class MainActivity extends MapActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        MapView mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;}
        @Override
        protected boolean isRouteDisplayed() {
            return false;

    }

} 
```

请告诉我我的代码有什么问题或者我的 Eclipse 有什么问题吗？我有 eclipse juno 和 sdk 4.2，我使用的是 google api level 17。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:32:27.440

您的模拟器图像需要使用 Google API

# wpf - WPF：以 MVVM 方式绑定 TreeView 分步教程

> ID：13789563
> 
> 赞同：9
> 
> 时间：2012-12-09T17:02:52.340
> 
> 标签：wpf, xaml, mvvm, binding, treeview

请参阅下一篇文章。这个原来的一题内容已经被删除了，因为没有任何意义。简而言之，我询问了如何以 MVVM 方式使用 XmlDataProvider 将 XML（我在解析 DLL 程序集时错误生成）绑定到 TreeView。但后来我明白这种方法是错误的，我切换到数据实体模型的生成（只写代表我想在树中公开的所有实体的类）而不是 XML。

所以，下一篇文章中的结果。目前我不时更新这个“文章”，所以 F5，和

享受阅读！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-10T20:16:37.757

# 介绍

我发现阅读[这篇](http://www.codeproject.com/Articles/26288/Simplifying-the-WPF-TreeView-by-Using-the-ViewMode "这个")文章的正确方法

> 这是一个很长的故事，你们大多数人可以跳过它:) 但是那些想要了解问题和解决方案的人必须阅读所有内容！

我是 QA，前段时间负责我点击的产品的自动化。幸运的是，这个自动机不是发生在一些测试工具中，而是发生在 Visual Studio 中，因此它最大程度地接近开发。

对于我们的自动化，我们使用一个由 MbUnit（Gallio 作为运行器）和 MINT（MbUnit 的补充，由我们合作的客户编写）组成的框架。MbUnit 为我们提供了测试装置和测试，而 MINT 添加了额外的更小的层——测试中的操作。例子。夹具称为“FilteringFixture”。它由大量的测试组成，例如“TestingFilteringById”或“TestingFilteringWithSpecialChars”等。每个测试都包含动作，它们是我们测试的原子单元。操作示例是 - “打开应用程序（参数）”、“OpenFilterDialog”等。

我们已经有很多测试，其中包含很多动作，一团糟。他们使用我们 QA 产品的内部 API。此外，我们开始研究一种新的自动化方法——通过 Microsoft UI 自动化实现 UI 自动化（抱歉重言式）。因此，对于管理者来说，一些“导出器”或“报告器”工具的必要性变得非常严重。

前段时间我有一个任务来开发一些应用程序，它可以解析一个 DLL（它包含所有的装置、测试和动作），并以人类可读的格式（TXT、HTML、CSV、XML 等）导出它的结构）。但是，在那之后，我去度假（2周）。

碰巧的是，我的女朋友一直到她家去度假（她也得到了它），而我一个人呆在家里。一直在思考我要做什么（2 周），我记得那个“编写导出器工具任务”以及我计划开始学习 WPF 的时间。所以，我决定在假期里完成我的任务，并为 WPF 编写一个应用程序。那时我听说了一些关于 MVVM 的事情，我决定使用纯 MVVM 来实现它。

可以用fixrtures等解析DLL的DLL写得相当快（~1-2天）。之后我开始使用 WPF，本文将向您展示它是如何结束的。

我度过了假期的大部分时间（将近 8 天！），试图在我的头脑和代码中整理它，最后，它完成了（几乎）。我的女朋友不会相信我一直在做什么，但我有一个证据！

在伪代码中一步一步分享我的解决方案，以帮助其他人避免类似的问题。这个答案更像是教程=）（真的吗？）。如果您有兴趣从头开始学习 WPF 时最复杂的事情是什么，我会说——让这一切真正成为 MVVM 和 f*g TreeView 绑定！

如果您想要一个带有解决方案的存档文件，我可以稍后再给它，就在我做出决定时，这是值得的。一个限制，我不确定我是否可以共享 MINT.dll，它会带来 Actions，因为它是由我们公司的客户开发的。但我可以删除它，并共享应用程序，它只能显示有关夹具和测试的信息，但不能显示有关操作的信息。

**夸夸其谈**。只需要一点 C#/WinForms/HTML 背景和没有实践，我已经能够在将近 1 周内实现这个版本的应用程序（并写下这篇文章）。所以，不可能是可能的！像我一样放个假，把它花在WPF学习上！

# 分步教程（还没有附加文件）

**任务的简短重复**：

前段时间我有一个任务来开发一个应用程序，它可以解析一个 DLL（它包含测试夹具、测试方法和动作——我们基于单元测试的自动化框架的单元），并以人类可读格式（TXT）导出它的结构、HTML、CSV、XML 等）。我决定使用 WPF 和纯 MVVM 来实现它（两者对我来说都是全新的东西）。对我来说最困难的两个问题是 MVVM 方法本身，然后是 MVVM 绑定到 TreeView 控件。我跳过了关于 MVVM 划分的部分，这是单独文章的主题。以下步骤是关于以 MVVM 方式绑定到 TreeView。

1.  **不那么重要**：创建可以通过单元测试打开 DLL 并使用反射找到夹具、测试方法和操作（更小级别的单元测试，在我们公司编写）的 DLL。如果您对它是如何完成的感兴趣，请看这里：[Parsing function/method content using Reflection](https://stackoverflow.com/questions/13679240/parsing-function-method-content-using-reflection)
2.  **DLL**：为固定装置、测试和动作（数据模型、实体模型？）创建单独的类。我们将使用它们进行绑定。您应该自己思考，您的树的实体模型将是什么。主要思想 - 树的每个级别都应该由适当的类公开，这些属性可以帮助您在树中表示模型（并且，理想情况下，将在您的 MVVM 中正确放置，作为模型或模型的一部分）。就我而言，我对实体名称、子级列表和序号感兴趣。序号是一个数字，它代表一个实体在DLL内部代码中的顺序。它帮助我在 TreeView 中显示序数，仍然不确定它是正确的方法，但它有效！

```
public class MintFixutre : IMintEntity
{
    private readonly string _name;
    private readonly int _ordinalNumber;
    private readonly List<MintTest> _tests = new List<MintTest>();
    public MintFixutre(string fixtureName, int ordinalNumber)
    {
        _name = fixtureName;
        if (ordinalNumber <= 0)
            throw new ArgumentException("Ordinal number must begin from 1");
        _ordinalNumber = ordinalNumber;
    }
    public List<MintTest> Tests
    {
        get { return _tests; }
    }
    public string Name { get { return _name; }}
    public bool IsParent { get { return true; }  }
    public int OrdinalNumber { get { return _ordinalNumber; } }
}

public class MintTest : IMintEntity
{
    private readonly string _name;
    private readonly int _ordinalNumber;
    private readonly List<MintAction> _actions = new List<MintAction>();
    public MintTest(string testName, int ordinalNumber)
    {
        if (string.IsNullOrWhiteSpace(testName))
            throw new ArgumentException("Test name cannot be null or space filled");
        _name = testName;
        if (ordinalNumber <= 0)
            throw new ArgumentException("OrdinalNumber must begin from 1");
        _ordinalNumber = ordinalNumber;
    }
    public List<MintAction> Actions
    {
        get { return _actions; }
    }
    public string Name { get { return _name; } }
    public bool IsParent { get { return true; } }
    public int OrdinalNumber { get { return _ordinalNumber; } }
}

public class MintAction : IMintEntity
{
    private readonly string _name;
    private readonly int _ordinalNumber;
    public MintAction(string actionName, int ordinalNumber)
    {
        _name = actionName;
        if (ordinalNumber <= 0)
            throw new ArgumentException("Ordinal numbers must begins from 1");
        _ordinalNumber = ordinalNumber;

    }
    public string Name { get { return _name; } }
    public bool IsParent { get { return false; } }
    public int OrdinalNumber { get { return _ordinalNumber; } }
} 
```

顺便说一句，我还在下面创建了一个接口，它实现了所有实体。这样的界面可以在将来为您提供帮助。仍然不确定，我是否也应该添加类型`Childrens`属性`List<IMintEntity>`或类似的东西？

```
public interface IMintEntity
{
    string Name { get; }
    bool IsParent { get; }
    int OrdinalNumber { get; }
} 
```

3.  **DLL - 构建数据模型**：DLL 有一个方法可以打开带有单元测试和枚举数据的 DLL。在枚举过程中，它会构建如下所示的数据模型。给出了真实的方法示例，使用了反射核心+Mono.Reflection.dll，不要与复杂性相混淆。您所需要的一切 - 看看该方法如何`_fixtures`用实体填充列表。

```
private void ParseDllToEntityModel()
{
    _fixutres = new List<MintFixutre>();

    // enumerating Fixtures
    int f = 1;
    foreach (Type fixture in AssemblyTests.GetTypes().Where(t => t.GetCustomAttributes(typeof(TestFixtureAttribute), false).Length > 0))
    {
        var tempFixture = new MintFixutre(fixture.Name, f);

        // enumerating Test Methods
        int t = 1;
        foreach (var testMethod in fixture.GetMethods().Where(m => m.GetCustomAttributes(typeof(TestAttribute), false).Length > 0))
        {
            // filtering Actions
            var instructions = testMethod.GetInstructions().Where(
                i => i.OpCode.Name.Equals("newobj") && ((ConstructorInfo)i.Operand).DeclaringType.IsSubclassOf(typeof(BaseAction))).ToList();

            var tempTest = new MintTest(testMethod.Name, t);

            // enumerating Actions
            for ( int a = 1; a <= instructions.Count; a++ )
            {
                Instruction action = instructions[a-1];
                string actionName = (action.Operand as ConstructorInfo).DeclaringType.Name;
                var tempAction = new MintAction(actionName, a);
                tempTest.Actions.Add(tempAction);
            }

            tempFixture.Tests.Add(tempTest);
            t++;
        }

        _fixutres.Add(tempFixture);
        f++;
    }
} 
```

4.  **DLL**`Fixtures` ：创建该类型的公共属性`List<MintFixutre>`以返回刚刚创建的数据模型（夹具列表，其中包含测试列表，其中包含操作列表）。这将是我们的绑定源`TreeView`。

```
public List<MintFixutre> Fixtures
{
    get { return _fixtures; }
} 
```

5.  **MainWindow 的 ViewModel（内部带有 TreeView）**：包含来自 DLL 的对象/类，可以解析单元测试 DLL。还`Fixtures`从 DLL`List<MintFixutre>`类型公开公共属性。我们将从 MainWindow 的 XAML 绑定到它。类似的东西（简化）：

```
var _exporter = MySuperDllReaderExporterClass ();
// public property of ViewModel for TreeView, which returns property from #4
public List<MintFixture> Fixtures { get { return _exporter.Fixtures; }}
// Initializing exporter class, ParseDllToEntityModel() is called inside getter 
// (from step #3). Cool, we have entity model for binding.
_exporter.PathToDll = @"open file dialog can help";
// Notifying all those how are bound to the Fixtures property, there are work for them, TreeView, are u listening?
// will be faced later in this article, anticipating events
OnPropertyChanged("Fixtures"); 
```

6.  **MainWindow 的 XAML - 设置数据模板**：在包含 TreeView 的 Grid 中，我们创建`<Grid.Resources>`部分，其中包含我们的一组模板`TreeViewItem`。`HierarchicalDataTemplate`（Fixtures and Tests）用于那些有子项的人，`DataTemplate`用于“叶”项（Actions）。对于每个模板，我们指定它的 Content（文本、TreeViewItem 图像等）、ItemsSource（如果这个项目有子项，例如对于 Fixtures，它是`{Binding Path=Tests}`) 和 ItemTemplate （同样，仅在此项目有子项的情况下，我们在这里设置模板之间的链接 - FixtureTemplate 对其子项使用 TestTemplate，TestTemplate 对其子项使用 ActionTemplate，Action 模板不使用任何东西，它是一片叶子！）。重要提示：不要忘记，为了将“一个”模板“链接”到“另一个”，“另一个”模板必须在 XAML 中定义在“一个”之上！（只是列举我自己的错误:)）

7.  **XAML - TreeView 链接**：我们将 TreeView 设置为：与来自 ViewModel 的数据模型（还记得公共属性吗？）和刚刚准备好的模板链接，这些模板代表内容、外观、数据源和树项的嵌套！还有一个重要的注意事项。不要将您的 ViewModel 定义为 XAML 中的“静态”资源，例如`<Window.Resources><MyViewModel x:Key="DontUseMeForThat" /></Window.Resources>`. 如果您这样做，那么您将无法在财产发生变化时通知它。为什么？静态资源是静态资源，它初始化资源，然后保持*不变*。我在这里可能错了，但这是我的错误之一。所以对于 TreeView 使用`ItemsSource="{Binding Fixtures}"`而不是`ItemsSource="{StaticResource myStaticViewModel}"`

8.  **ViewModel - ViewModelBase - 属性已更改**：几乎所有。停止！当用户打开应用程序时，最初 TreeView 当然是空的，因为用户还没有打开任何 DLL！我们必须等到用户打开一个DLL，然后才执行绑定。它是通过`OnPropertyChanged`事件完成的。为了让生活更轻松，我所有的 ViewModel 都继承自 ViewModelBase，它正确地将这个功能公开给我的所有 ViewModel。

```
public class ViewModelBase : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void OnPropertyChanged(string propertyName)
    {
        OnPropertyChanged(new PropertyChangedEventArgs(propertyName));
    }

    protected virtual void OnPropertyChanged(PropertyChangedEventArgs args)
    {
        var handler = PropertyChanged;
        if (handler != null)
            handler(this, args);
    }        
} 
```

9.  **XAML-OnPropertyChanged 和命令**。用户单击按钮打开包含单元测试数据的 DLL。当我们使用`MVVM`时，单击是通过命令处理的。在`OpenDllExecuted`处理程序结束时`OnPropertyChanged("Fixtures")`，通知树，它绑定到的属性已更改，现在是刷新自身的时候了。`RelayCommand`例如可以从[那里](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx#id0090030 "那里")获取帮助类）。顺便说一句，据我所知，存在一些帮助程序库和工具包在 XAML 中发生了类似的事情：

10.  **和 ViewModel - 指挥**

```
private ICommand _openDllCommand;

        //...

public ICommand OpenDllCommand
{
    get { return _openDllCommand ?? (_openDllCommand = new RelayCommand(OpenDllExecuted, OpenDllCanExecute)); }
}

        //...

// decides, when the <OpenDll> button is enabled or not
private bool OpenDllCanExecute(object obj)
{
    return true; // always true for Open DLL button
}

        //...

// in fact, handler
private void OpenDllExecuted(object obj)
{
    var openDlg = new OpenFileDialog { ... };
    _pathToDll = openDlg.FileName;
    _exporter.PathToDll = _pathToDll;
                // Notifying TreeView via binding that the property <Fixtures> has been changed,
                // thereby forcing the tree to refresh itself
    OnPropertyChanged("Fixtures");
} 
```

11.  **最终的 UI**（但对我来说不是最终的，应该做很多事情！）。在某处使用了扩展的 WPF 工具包：[http ://wpftoolkit.codeplex.com/](http://wpftoolkit.codeplex.com/)

[![](../Images/07acbfd17e0595ffa0008a749f02c697.png)](https://i.stack.imgur.com/UFXhN.png)

# facebook - OrderedFriendsListInitialData 的意义是什么？

> ID：13789565
> 
> 赞同：1
> 
> 时间：2012-12-09T17:03:06.893
> 
> 标签：facebook, list, profile

登录后，在页面源中，有一个名为`OrderedFriendsListInitialData`.
根据传闻，这是访问您个人资料最多的人的列表，其他人说这是您查看最多的个人资料的列表，还有人说这是您与最多互动的朋友。
任何人都可以通过提供明确的答案或至少是受过教育的答案来阐明这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:17:06.990

如果您检查代码，您会注意到它与右侧边栏有关。就在它之前有这个 url [https://s-static.ak.facebook.com/rsrc.php/yT/r/q-Drar4Ade6.ogg](https://s-static.ak.facebook.com/rsrc.php/yT/r/q-Drar4Ade6.ogg) 因为它是 JSON 字符串，显然它必须是相关的，归档这个 url指向的是聊天的声音通知。

您可能会注意到它是初始数据而不是聊天列表，可能稍后的聊天脚本会使用此数据来填充列表中的人员并进行一些额外的检查等。

还有单词排序，我自己我在 facebook 上并不是很活跃，所以无法检查它，但众所周知，fb 会分析您的所有步骤并根据数千个因素制作此列表，为您提供用户列表很可能会聊天。

你父亲可能在那里，因为 fb 知道你是家人，并认为这是谈话的高可能性。

如果您需要详细信息，请向他们发送电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T22:09:38.090

好吧，自从您第一次发布此内容以来，他们已经将列表的名称更改为 InitialChatFriendsList，我认为这对它的内容更具描述性，但就他们如何确定放在那里的内容而言，我认为我的朋友们我想出了一个非常合理的解释。

在确定您最有可能在他们的聊天系统上与谁交流时，Facebook 显然会使用许多不同权重的因素来确定您最想与谁交谈以及您最需要与谁交谈。

1.  最重要的是您实际与谁交谈……您在 Facebook 聊天中与您最频繁交流的人显然会出现在您的聊天列表中。

2.  您与谁进行了公开互动（即在某个位置进行标记、图片标记、实际墙评论等）

现在，在确定他们将谁列入您的列表时，这两个是两个非常重要的因素，除此之外，它是谁查看您的页面以及您查看谁的页面的组合。根据我的列表和我的朋友列表，我们确定如果您经常查看其他人的页面/帖子并且他们可能会为您做同样的事情，即使您不这样做，他们也会排名上升'在 facebook 上没有实际的互动。我承认在 fb 上“跟踪”最多的几个人甚至不在我的名单上（至少不在我停止检查的前 50 名），而我偶尔会看的其他人我有理由相信他们也会查看我的个人资料，这在我的名单上相当高（大约第 10-15 位）。

无论如何，我的观点是有很多因素决定了谁会出现在这个名单上，你真的不能把这一切都归咎于跟踪你的人和你跟踪的人。虽然对于某些人来说是这样，但对于名单上的大多数人来说，他们在那里的原因有一个完整的清单。

当然，这一切都基于一个非常小的数据池，所以谁知道......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T07:57:34.423

绝对是 Facebook 认为最有可能与您聊天的人。聊天中有两个人列表，一个是上面的，另一个是在线的朋友。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T17:28:15.063

我认为这可能是在您的聊天列表顶部的人的列表 - 从统计上讲，您最有可能与之交谈的人。但！我可能错了。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-20T01:14:24.497

我相信前3个是准确的。当我检查自己时，我的男朋友是 1，我最好的两个朋友是 2 和 3。之后的一切似乎有点随机，因为 #4 是一个我多年没有互动的人。

# jquery - 如何使用 jQuery POST JSP 和 servlet 动态更新多选

> ID：13789574
> 
> 赞同：1
> 
> 时间：2012-12-09T17:03:56.027
> 
> 标签：jquery, jsp, servlets, select

我正在使用一个 Java Servlet 和一个包含主题和类别的 JSP 文件。当我使用浏览器访问 JSP 页面时，使用了 doGET 方法，在该方法中我声明了我需要填写多选表单的所有主题和类别列表。

我想要做的是，使用 jQuery，每次我的用户在适当的多选表单中更改所选类别时，主题多选的内容会自动更改**，而无需刷新网页**。

类别和主题之间的关系被发送到 HashMap 中的 JSP 文件（类别 -> 主题），但我不知道如何使用它。

一位朋友告诉我，为了动态更新多选中的主题，我必须使用 jQuery 的 doPost 方法并将更新后的列表发送回 JSP 页面（参见下面我的 doPOST 方法，目前，我' m 试图动态显示所选类别的列表。

但是这段代码不起作用：我的 POST 是根据 FireBug 发送的，但是多选没有更新。我忘记了什么吗？

```
public void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException 
{
    SubjectDAO subjectDao;
    RelationDAO relationDao;
    TripletDAO tripletDao;
    CollectionDAO collectionDao;

    try
    {
        //Récupération de la session courante
        HttpSession session = request.getSession();
        int idCollection = 1; //Integer.parseInt((String) session.getAttribute("idCollection"));
        //TODO: Remplacer le 1 par le commentaire quand les collections marcheront bien

        //Initialisation des DAO nécessaires
        tripletDao = daoFactory.getTripletDAO();
        collectionDao = daoFactory.getCollectionDAO(); //DAOFactory.getDAOFactory(DAOFactory.MYSQL).getCollectionDAO();
        subjectDao = daoFactory.getSubjectDAO();
        relationDao = daoFactory.getRelationDAO();

        //Formation des listes nécessaires
        List<Subject> listSubject = subjectDao.selectAll(false, collectionDao.selectId(idCollection)); //Tous les sujets de la collec' courante
        List<Relation> listRelation = relationDao.selectAll(false, collectionDao.selectId(idCollection)); //Toutes les relations de la collec' courante
        List<Triplet> listTriplet = tripletDao.selectAll(false, collectionDao.selectId(idCollection)); //Tous les triplets de la collec' courante

        //TODO: Voir ce qu'on peut faire pour éviter l'utilisation des listes ci-dessous!
        ArrayList<String> entitledOfSubjects = new ArrayList<String>(listOfSubjectsEntitled(session, listSubject));
        ArrayList<String> entitledOfRelations = new ArrayList<String>(listOfRelationsEntitled(session, listRelation));

        //Récupération de la liste des catégories (de la collection courante)
        Subject sCategory = subjectDao.selectSystem("CATEGORY");
        Relation rIs = relationDao.selectSystem("ISA");
        Relation rIn = relationDao.selectSystem("IN CATEGORY");

        //La liste listCategory2 contient tous les triplets qui contiennent "ISA CATEGORY". Elle s'appelle listCategory2 parce que listCategory c'est celle de la sidebar!
        List<Triplet> listCategory2 = tripletDao.selectAll(-1, rIs.getId(), sCategory.getId(), TripletType.SUBJET, TripletType.SUBJET, false, true, collectionDao.selectId(idCollection));

        //Liste des différents compléments des triplets de la collec' courante
        ArrayList<Subject> listComplement = new ArrayList<Subject>();
        for (int i=0; i<listTriplet.size(); i++)
        {
            Subject s = listTriplet.get(i).getSComplement();
            if (!subjectIsInList(session, s, listComplement) && s!=null && subjectIsInList(session, listTriplet.get(i).getSSubject(), listSubject) 
                    && relationIsInList(session, listTriplet.get(i).getRelation(), listRelation))
            {
                listComplement.add(s);
            }
        }

        //Liste des triplets de la collection courante qui ont pour relation "IN CATEGORY"
        List<Triplet> listTripletSysteme = tripletDao.selectAllByRelation(rIn.getId(), collectionDao.selectId(idCollection)); //(true, collectionDao.selectId(idCollection)); 

        //Liste des différentes catégories des compléments relevés précédemment
        ArrayList<Subject> listComplementCategory = new ArrayList<Subject>();
        for (int i=0; i<listTripletSysteme.size(); i++)
        {
            Subject s = listTripletSysteme.get(i).getSComplement();
            if (!subjectIsInList(session, s, listComplementCategory) && s!=null && subjectIsInList(session, listTripletSysteme.get(i).getSSubject(), listComplement))
            {
                listComplementCategory.add(s);
            }
        }

        //Variables à envoyer à la page JSP
        request.setAttribute("listSubject", listSubject);
        request.setAttribute("listRelation", listRelation);
        request.setAttribute("listCategory2", listCategory2); //session au lieu de request pour la sidebar
        request.setAttribute("listComplementCategory", listComplementCategory);
        request.setAttribute("listComplement", listComplement);

        //TODO: Use of these deprecated by Joe
        request.setAttribute("entitledOfSubjects", entitledOfSubjects);
        request.setAttribute("entitledOfRelations", entitledOfRelations);

        //HashMap (Titre de Catégorie -> liste de titres de sujets lui appartenant)
        HashMap<String, ArrayList<String>> categorySubjectsHashMap = new HashMap<String, ArrayList<String>>();
        for (int i=0; i<listCategory2.size(); i++)
        {
            Subject categorie = listCategory2.get(i).getSSubject();
            String entitled = categorie.getEntitled((String) session.getAttribute("lang"));
            ArrayList<String> listeSujetsCategorie = new ArrayList<String>();

            for (int j=0; j<listTripletSysteme.size(); j++)
            {
                Triplet tripletSysteme = listTripletSysteme.get(j);
                if (tripletSysteme.getSComplement().getEntitled((String) session.getAttribute("lang")).equals(entitled) && 
                        !listeSujetsCategorie.contains(tripletSysteme.getSSubject().getEntitled((String) session.getAttribute("lang"))))
                {
                    listeSujetsCategorie.add(tripletSysteme.getSSubject().getEntitled((String) session.getAttribute("lang")));
                }
            }

            categorySubjectsHashMap.put(entitled, listeSujetsCategorie);
        }

        request.setAttribute("categorySubjectsHashMap", categorySubjectsHashMap);

        //request.setAttribute("listTriplet", listTriplet);

        //Subject sCategory = subjectDao.selectSystem("CATEGORY");
        //Relation rIs = relationDao.selectSystem("ISA");

        /*CollectionDAO collectionDao = DAOFactory.getDAOFactory(DAOFactory.MYSQL).getCollectionDAO();
        //int idCollection = Integer.parseInt((String) session.getAttribute("idCollection"));
        //List<Triplet> listCategory = tripletDao.selectAll(-1, rIs.getId(), sCategory.getId(), TripletType.SUBJET, TripletType.SUBJET, false, true, collectionDao.selectId(idCollection));
        //request.setAttribute("listCategory", listCategory);
        //Sert à "overrider" idCollection*/

        //int id = add(request);
    } 
    catch (DAOException e) 
    {
        log.error("An error occured", e);

        request.setAttribute("error", e.getMessage());
        request.getRequestDispatcher("/WEB-PAGES/Other/error.jsp").forward(request, response);
        return;
    }
    // Set page title
    request.setAttribute("title", "Creation");
    request.getRequestDispatcher("/WEB-PAGES/Creation/creation.jsp").forward(request, response);

    //HttpSession session = request.getSession();
    //String root = (String) session.getAttribute("root");
    //response.sendRedirect(root + "creation");
    //TODO: fix root = null
}

public void doPost(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException 
    {
    //ArrayList<String> al = new ArrayList<String>();
    String[] selectedSubjectCategories = request.getParameter("selectedSubjectCategories").split(",");

    ArrayList<String> entitledOfSubjects = new ArrayList<String>();
    for (int i=0; i<selectedSubjectCategories.length; i++)
    {
        entitledOfSubjects.add(selectedSubjectCategories[i]);
    }

    request.setAttribute("entitledOfSubjects", entitledOfSubjects);
    } 
```

此外，这里是 JSP 文件的片段，其中包含两个多选，第一个是我选择我的类别的那个，第二个是我想要动态显示属于所选类别的主题的那个：

```
 <div id="subjectCategoriesDiv">
      <select name="subjectCategories" multiple="multiple" id="subjectCategories">
      <option value="None">-- NONE --</option>
        <c:forEach items="${listCategory2}" var="triplet">
                <option value="<c:out value="${triplet.SSubject.getEntitled(lang)}" />"><c:out value="${triplet.SSubject.getEntitled(lang)}" /></option>
            </c:forEach>
      </select>
      <script>
            $(document).ready(function ()  
                {
                    $('#subjectCategories').change(function()
                        {
                            var selectedOptions = $('#subjectCategories option:selected');
                            var selectedValues = $.map(selectedOptions ,function(option) 
                            {
                                return option.value;
                            }).join(',');

                            $.ajax({
                                   type: "POST",
                                   url: "creation",
                                   data: 'selectedSubjectCategories='+selectedValues
                                 });
                        }
                    );
                }).change();
      </script>
    </div>

    <div class="subjectsListDiv">
      <select name="subjectslist" multiple="multiple" id="subjectslist">
        <c:forEach items="${entitledOfSubjects}" var="subject">
                <option value="<c:out value="${subject}" />"><c:out value="${subject}" /></option>      
            </c:forEach>
      </select>
      <script>
            $(document).ready(function ()  
            {

            });
      </script>
    </div> 
```

提前致谢。

# java - 从本地范围增加对象的范围

> ID：13789575
> 
> 赞同：-2
> 
> 时间：2012-12-09T17:03:58.533
> 
> 标签：java

我想使用方法创建一个对象，但我希望它（对象+引用）即使在方法结束后仍然存在。代码示例：

```
public class start{
public static void main (String [] Args){
  public void createObject(){
    object1 createdObject = new object1();
  }
  createObject();
  createdObject.doSomething();
 }
}

public class object1{
   //code for object 1
} 
```

所以我的主要问题是：如何使用方法创建对象并让它在方法结束后仍然存在。`createdObject`问题是在方法结束后会弹出引用`stack`，因此我不能再使用它了。甚至可以以这种方式创建对象以供进一步使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:19:08.600

```
public class start{
public static void main (String [] Args){

//class level scope
object1 createdObject = null;

 private void createObject(){
    createdObject = new object1();
  }
}

public class object1{
   //code for object 1
} 
```

**注意：我没有遵循命名约定。但请在实际代码中遵循它们**

**更新：**正确的代码检查一下

```
public class Main {

    public static void main(String[] args) {
         new MyClass().doSomething();
    }

}

class MyClass{
    Object obj ;

    public void doSomething(){
        createObject();
    }

    private void createObject(){
        obj = new Object();
        System.out.println("Created MyClass instance");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:18:38.570

您的方法应该返回 object1 而不是 void 并且您必须在方法末尾添加以下行：

```
return createdObject; 
```

# html - 如何删除在IE7中有图像的标签中的下划线

> ID：13789578
> 
> 赞同：-1
> 
> 时间：2012-12-09T17:04:13.943
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:18:28.037

### 简单修复：

删除下划线。

```
a, a img {text-decoration: none;} 
```

通常，IE 7 会添加一个继承自`a`标记的下划线。因此，重置它将解决问题。

* * *

在您的问题中，**在 image 周围**，它是边框吗？如果是这样，请使用：

```
a, a img {text-decoration: none; border: 0;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T17:07:27.327

将 的`text-decoration`属性设置`img`为`none`。

```
a img{
   text-decoration:none;
} 
```

示例：http: [//jsfiddle.net/5SUaa/3/](http://jsfiddle.net/5SUaa/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T17:07:25.130

`a#link {text-decoration:none;}`应该做的伎俩。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-06T08:28:15.937

尝试这个

a，一个img {文本装饰：无！重要；边框：0；}

# ruby - 使用 open-uri 和 nokogiri 在完全加载之前读取 HTML

> ID：13789583
> 
> 赞同：8
> 
> 时间：2012-12-09T17:05:30.750
> 
> 标签：ruby, nokogiri, open-uri

我正在使用`open-uri`和`nokogiri`ruby​​ 来做一些简单的网络爬虫。存在一个问题，有时 html 在完全加载之前就被读取了。在这种情况下，我无法获取加载图标和导航栏以外的任何内容。告诉`open-uri`或`nokogiri`等待页面完全加载的最佳方法是什么？

目前我的脚本看起来像：

```
require 'nokogiri'
require 'open-uri'

url = "https://www.the-page-i-wanna-crawl.com"
doc = Nokogiri::HTML(open(url, ssl_verify_mode: OpenSSL::SSL::VERIFY_NONE)) 
puts doc.at_css("h2").text 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-09T22:29:12.797

你描述的不可能。的结果`open`只会在方法返回完整值`HTML`之后传递给。`open`

我怀疑页面本身使用 AJAX 加载其内容，正如评论中所建议的那样，在这种情况下，您可以使用 Watir 使用浏览器获取页面

```
require 'nokogiri'
require 'watir'

browser = Watir::Browser.new
browser.goto 'https://www.the-page-i-wanna-crawl.com'

doc = Nokogiri::HTML.parse(browser.html) 
```

不过，这可能会打开一个浏览器窗口。

# android - Android如何在标签+滑动中替换另一个片段

> ID：13789585
> 
> 赞同：1
> 
> 时间：2012-12-09T17:05:45.667
> 
> 标签：android

我正在尝试实现片段之间的通信，但无法理解如何实现一件事。我有选项卡+滑动（viewpager），我可以在选项卡之间滑动并查看片段`content which are binded by default but I cannot call another fragment, for instance, by button click in one of the tab`的内容，新片段将出现在当前选项卡中，并且如果您尝试在此之后滑动不会出现空指针异常。现在我有一半的工作片段调用。我的意思是调用了新片段，我在日志文件中看到了它，但没有显示任何内容，当我尝试在它之后滑动时，我遇到了崩溃 - 空指针异常。

我的标签活动：

```
package com.example.tabstest;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.app.FragmentTransaction;
import android.support.v4.view.ViewPager;
import android.util.Log;
import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.ActionBar.TabListener;
import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuItem;

public class TabsActivity extends SherlockFragmentActivity implements TabListener {

    private static final String TAG = "TabsActivity";
    AppSectionsPagerAdapter mAppSectionsPagerAdapter;

    private ViewPager mViewPager;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mViewPager = (ViewPager) findViewById(R.id.pager);

        mAppSectionsPagerAdapter = new AppSectionsPagerAdapter(getSupportFragmentManager(), mViewPager);

        final ActionBar actionBar = getSupportActionBar();

        actionBar.setHomeButtonEnabled(false);
        actionBar.setDisplayUseLogoEnabled(true);
        actionBar.setDisplayShowTitleEnabled(false);
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        mViewPager.setAdapter(mAppSectionsPagerAdapter);
        mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
            @Override
            public void onPageSelected(int position) {
                actionBar.setSelectedNavigationItem(position);
            }
        });

        actionBar.addTab(actionBar.newTab().setTag("home").setText("Home").setTabListener(this));
        actionBar.addTab(actionBar.newTab().setTag("calculator").setText("Calculator").setTabListener(this));
        actionBar.addTab(actionBar.newTab().setTag("login").setText("Log in").setTabListener(this));

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        getSupportMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {

        return super.onOptionsItemSelected(item);

    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {

    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        mViewPager.setCurrentItem(tab.getPosition());
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {

    }

    /**
     * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
     * one of the primary sections of the app.
     */
    public static class AppSectionsPagerAdapter extends FragmentPagerAdapter {

        private FragmentManager mFm;
        private ViewPager mVp;

        public AppSectionsPagerAdapter(FragmentManager fm, ViewPager viewPager) {
            super(fm);
            mFm = fm;
            mVp = viewPager;
        }

        @Override
        public Fragment getItem(int i) {
            switch (i) {
            case 1:
                return new CalculatorFragment();
            case 2:
                Fragment LogInFragment = new LogInFragment();
                Bundle userProfile = new Bundle();
                userProfile.putString("USER", "Test");
                LogInFragment.setArguments(userProfile);
                return LogInFragment;
            default:
                return new HomeFragment();
            }
        }

        @Override
        public int getCount() {
            return 3;
        }

        public void selectPage(int page) {
            mVp.setCurrentItem(page);
        }

        public void replaceFragment(int FragmentContatiner, Fragment newFragment) {
            Log.w(TAG, "Replace Fragment!");
            FragmentTransaction transaction = mFm.beginTransaction();
            transaction.replace(FragmentContatiner, newFragment).addToBackStack(null).commit();
            notifyDataSetChanged();

        }
     }
} 
```

**编辑：**我尝试用新片段替换当前片段的片段之一：

```
package com.example.tabstest;

import com.actionbarsherlock.app.SherlockFragment;
import com.example.tabstest.TabsActivity.AppSectionsPagerAdapter;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.view.ViewPager;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class HomeFragment extends SherlockFragment {

    private static final String TAG = "HomeFragment";
    private View rootView;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        rootView = inflater.inflate(R.layout.fragment_home, container, false);

        rootView.findViewById(R.id.bCalculate).setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {

                AppSectionsPagerAdapter aspa = new AppSectionsPagerAdapter(getFragmentManager(), (ViewPager) getActivity().findViewById(R.id.pager));
//              aspa.selectPage(1);

                Fragment LogInFragment = new LogInFragment();
                Bundle userProfile = new Bundle();
                userProfile.putString("USER", "Test");
                LogInFragment.setArguments(userProfile);
                aspa.replaceFragment(rootView.findViewById(R.id.HomePage).getId(), LogInFragment);

            }
        });

        return rootView;
    }
    } 
```

那是我的 fragment_home 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/HomePage"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/ivGetLoan"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight=".1"
        android:src="@android:color/darker_gray" />

    <Button
        android:id="@+id/bCalculate"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Calculate your loan" />

</LinearLayout> 
```

它被替换了，我看到了 LogInFragment 的内容，但是当它被替换时，我不仅看到了所有 LogInFragment 内容，还看到了用于从旧片段内容中替换片段的按钮。

如果您使用 ViewPager 作为容器，则会出现 NullPointer 异常：

```
12-09 20:37:52.416: E/AndroidRuntime(24660): FATAL EXCEPTION: main
12-09 20:37:52.416: E/AndroidRuntime(24660): java.lang.NullPointerException
12-09 20:37:52.416: E/AndroidRuntime(24660):    at com.example.tabstest.HomeFragment$1.onClick(HomeFragment.java:30)
12-09 20:37:52.416: E/AndroidRuntime(24660):    at android.view.View.performClick(View.java:2461)
12-09 20:37:52.416: E/AndroidRuntime(24660):    at android.view.View$PerformClick.run(View.java:8890)
12-09 20:37:52.416: E/AndroidRuntime(24660):    at android.os.Handler.handleCallback(Handler.java:587)
12-09 20:37:52.416: E/AndroidRuntime(24660):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-09 20:37:52.416: E/AndroidRuntime(24660):    at android.os.Looper.loop(Looper.java:123)
12-09 20:37:52.416: E/AndroidRuntime(24660):    at android.app.ActivityThread.main(ActivityThread.java:4627)
12-09 20:37:52.416: E/AndroidRuntime(24660):    at java.lang.reflect.Method.invokeNative(Native Method)
12-09 20:37:52.416: E/AndroidRuntime(24660):    at java.lang.reflect.Method.invoke(Method.java:521)
12-09 20:37:52.416: E/AndroidRuntime(24660):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
12-09 20:37:52.416: E/AndroidRuntime(24660):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
12-09 20:37:52.416: E/AndroidRuntime(24660):    at dalvik.system.NativeStart.main(Native Method) 
```

**新思想**

不幸的是，它不`t help me. Than more I deal with fragments than a bit more I understand about them. I mark that I cannot replace fragment which is used to jump on another fragment. That is to say if I use fragment with container android.R.id.container where is a button which I will press to replace current fragment on another one then you will receive NUllpointer exception.I didn`理解这样的动作顺序。首先，您单击然后替换，但 nullpointer 异常反之亦然 - 没有 onclick，没有替换。当你有 ActionBar 和容器 android.R.id.contenT 的另一种情况。当您单击操作栏中的一个 hte 操作菜单按钮以将 android.r.id.content 中的片段替换为另一个片段时，一切都会好起来的，它将被正确替换。如何替换具有一些要替换的操作的片段另一个片段上的当前片段？

# linux - Linux Mandriva 上的 SVN - 导入项目时出错 (svn: E0000013)

> ID：13789587
> 
> 赞同：0
> 
> 时间：2012-12-09T17:06:05.213
> 
> 标签：linux, svn, redmine

我创建了一个测试项目并希望将其导入到存储库中。

我打开了SVN的端口-

```
iptables -A INPUT -p tcp -m tcp --dport 3690 -j ACCEPT 
```

然后 -

```
svnadmin create /home/svn/test 
```

取消注释行 -

svnserve.conf：

```
...
[general]
anon-access = read
auth-access = write
password-db = passwd 
```

密码：

```
...
[users]
harry = harryssecret
sally = sallyssecret 
```

导入项目（安装SVN的同一台计算机上的项目）：

```
svn import /home/testuser/test/ svn://localhost/home/svn/test/ -m "first import" 
```

我输入我的用户名和密码（哈利），一切正常。添加了文件，但最后我收到一条消息-

```
svn: E0000013: Can't open file '/home/svn/test/db/txn-current-lock' : Access denied 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:01:04.087

我看不到您在何时何地以及如何[启动 svnserve](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-serversetup-svnserve.html)以处理 svn:// 请求

# dreamweaver - 如何在 Adob e Dreamweaver Cs5 中更改颜色工作区？

> ID：13789589
> 
> 赞同：0
> 
> 时间：2012-12-09T17:06:24.603
> 
> 标签：dreamweaver

我用作 adobe Dreamweaver ；我将更改工作区（环境代码编辑器）的颜色，例如：我想成为黑色环境代码；谢谢; 对不起英语！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T03:11:09.467

您可以在 Edit -> Preferences -> Code Coloring 中更改颜色

或者

[http://sramekdesign.com/dreamweaver/dark-coding-colorization-for-dreamweaver/](http://sramekdesign.com/dreamweaver/dark-coding-colorization-for-dreamweaver/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-27T00:01:14.987

以防万一您使用的是macbook，

命令+U

打开首选项对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-16T16:42:38.070

您是在谈论 Dreamweaver 的肤色吗？你不能。在这里查看网站：

[http://help.adobe.com/en_US/dreamweaver/cs/using/WScbb6b82af5544594822510a94ae8d65-7f82a.html#WS8599BC5C-3E44-406c-9288-C3B3BBEB5E88](http://help.adobe.com/en_US/dreamweaver/cs/using/WScbb6b82af5544594822510a94ae8d65-7f82a.html#WS8599BC5C-3E44-406c-9288-C3B3BBEB5E88)

注意（来自 Adob​​e.com）：Dreamweaver CC 及更高版本中的用户界面已得到简化。因此，您可能在 Dreamweaver CC 及更高版本中找不到本文中描述的某些选项。有关详细信息，请参阅本文。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-14T10:16:33.143

不幸的是，目前没有使 UI 变暗的选项，但有一个功能请求。请在此处为请求投票：[https](https://forums.adobe.com/ideas/3824) ://forums.adobe.com/ideas/3824 ，因此我们可能会期望将来会使用此功能，因此我们可以节省一点眼睛；）

# java - 我可以知道Java中超类的扩展类吗？

> ID：13789590
> 
> 赞同：2
> 
> 时间：2012-12-09T17:06:28.350
> 
> 标签：java, inheritance

我有以下课程。

```
public class Super{

  public static void useSubClass(){
     //I want to access the sub class object here, how.
  }
}

public class Sub1 extends Super{

}

public class Sub2 extends Super{

} 
```

我想从超类中的静态方法访问子类对象。即当我调用`Sub1.useSubClass()`该方法时可以访问`Sub1.class`，当我使用时`Sub2.useSubClass()`，我可以访问`Sub2.class`.

有什么方法可以从超类访问子类对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T17:09:01.773

通常，您不能从超类中做到这一点（也不应该！），因为您不知道（也不应该假设任何事情！）哪些类将从您的超类继承。

根据您想要做什么，有其他选择，例如：

*   使用[模板模式](http://en.wikipedia.org/wiki/Template_method_pattern)定义子类必须实现的“填充方法”；这些填充方法将由超类中的模板方法调用。
*   定义要被子类覆盖的方法。
*   定义要由您的子类实现的接口。

* * *

**更新：**正如@JB Nizet 指出的那样，我可能误读了这个问题。

如果您希望从超类中的静态方法访问子类，可以执行以下操作（非常类似于[观察者模式）：](http://en.wikipedia.org/wiki/Observer_pattern)

*   在你的超类中定义一个静态监听器列表，调用它`List observerList`
*   在超类的构造函数中，将类实例本身添加到该静态`observerList`
*   对于所有子类，它们有责任`super()`从它们的构造函数中调用，以便将自己注册到`observerList`（并在解构函数中取消注册）
*   然后在您的超类的静态`useSubClass()`方法中，您可以遍历该子类实例列表，找到您关心的特定实例（可能由某些参数指定），然后对其进行处理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T17:12:47.263

静态方法不被继承，调用`Sub2.useSubClass()`严格等同于调用`Super.useSubclass()`。

无法获取此信息，因为它不存在。编译器允许调用`Sub2.useSubclass()`，但将其转换为`Super.useSubclass()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T17:14:47.773

```
public static void useSubClass(Super sub) {
    if (sub instanceof Sub1) {
        // Do something
    } else if (sub instanceof Sub2) {
        // Do something else
    } else {
        // Something else is extending Super
    }
} 
```

然而，更好的问题是为什么？您不能简单地覆盖子类中的方法吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T17:11:08.953

不，你不能，因为超类不知道子类的方法。您应该考虑创建一个同时看到超类和子类的新类，并在这个新类中实现静态方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-09T17:36:08.537

作为记录，您可以使用类方法在 Python 中执行此操作：

```
class super(object):
    @classmethod
    def usesubclass(cls):
        print cls

class sub1(super):
    pass

class sub2(super):
    pass 
```

使用此代码，您可以调用`sub1.usesubclass()`or `sub2.usesubclass()`，这将分别打印`sub1`和`sub2`类的表示：

```
>>> sub1.usesubclass()
<class '__main__.sub1'>
>>> sub2.usesubclass()
<class '__main__.sub2'> 
```

然而，不幸的是，Java 不支持这种机制。当您`Sub1.useSubClass()`在您的示例中编译时，编译器将简单地`Sub1`用作基本命名空间来查找 中的`useSubClass()`方法`Super`，但实际上并没有关于该方法的信息被编译成代码。在生成的字节码中，调用只是直接调用，仅此`Super.useSubClass()`而已。

我同情你的困境，但 Java 就是这样。我认为，您最接近的可能是以下代码：

```
public class Super {
    public static <T extends Super> void useSubClass(Class<T> sub) {
    }
} 
```

然后将该方法显式调用为`Super.useSubClass(Sub1.class)`or 或`Super.useSubClass(Sub2.class)`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-09T20:07:44.903

我想通了。如果小心实施，它会起作用。

```
/** SuperClass.java **/
public abstract class SuperClass {

    public static void printClass(){
    System.out.println(new ImplementingClassRetriever().getCallingClass());
    }

    static class ImplementingClassRetriever extends SecurityManager{
    public Class getCallingClass() {
        Class[] classes = getClassContext();
        for (Class clazz : classes) {
        if (SuperClass.class.isAssignableFrom(clazz) && clazz != null
            && !clazz.equals(SuperClass.class)) {
            return clazz;
        }
        }
        return null;
    }
    }
}

/** Main.java **/
public class Main{
    public static void main(String[] args) {
    Sub.printClass(); //this does not work
    Sub.testStaticCall(); //this works!! :)
    }
}

class Sub extends SuperClass{

    public static void testStaticCall(){
    Sub.printClass(); //calling the method in the super class
    }
} 
```

这只是一个玩具示例。超类包含一个静态类，该类包含一个检索调用类的方法。

在子类中，我有另一个静态方法，它调用超类的方法来打印类名。

类/函数包含对的继承和本地实现的方法的两个`Main`调用。`Sub`第一次调用打印 null，因为调用上下文（即 Main）不是 的子类。`Super`但是委托方法在`Sub`工作，因为调用上下文现在是子类，`SuperClass`因此可以确定调用类。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-12-09T17:37:02.867

虽然您可以创建对超类的引用并将其指向任何子类。这也可以在运行时动态完成。这是 **运行时多态的一种方式。**

# macos - HID 设备被默认 mac 驱动程序绑架

> ID：13789591
> 
> 赞同：1
> 
> 时间：2012-12-09T17:06:33.717
> 
> 标签：macos, kernel-extension

我的应用程序想要访问我插入的 HID 设备，但声称该设备不起作用，因为它已被 IOHIDDevice 驱动程序声明。为了防止我了解到，我应该为 mac（OSX 10.8.2）创建并安装一个无代码的 kext 驱动程序，以防止我的设备被加载。

我已经花了两天时间，到目前为止我没有任何成功。在我的测试用例中，您可以找到

*   从 USB 探测器记录
*   我的无代码 kext 模块
*   连接我的设备时从 ioreg 输出

看来我无法在此处附加文件。

请从[http://www.guenther-sohler.net/testcase.tar.gz下载](http://www.guenther-sohler.net/testcase.tar.gz)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:20:58.867

Depending on what level of access you require, HIDAPI [http://www.signal11.us/oss/hidapi/](http://www.signal11.us/oss/hidapi/) may provide you with what you need. It's a library that uses IOHidManager as a backend on OSX. Works for me on OSX 10.7.5, no dummy driver required.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T17:11:22.553

签入无代码 KEXT 以声明您的设备可用于用户空间应用程序。

它本质上是一个 plist。

对于 Yosemite 和 Mavericks，它需要由 KEXT 批准的 Apple Developer ID 签名 - 您需要成为 Developer 并申请。

# c++ - 当通过 IDispatch 使用错误数量/类型的参数调用方法时会发生什么

> ID：13789592
> 
> 赞同：1
> 
> 时间：2012-12-09T17:06:43.230
> 
> 标签：c++, com

如果我通过 IDispatch（后期绑定）使用错误数量/类型的参数调用 COM 对象的方法，是否会返回一些错误代码，或者程序会崩溃或出现其他故障？我只想知道与 IDispatch 的后期绑定是否是类型安全的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:19:42.970

这取决于`Invoke`方法的实际实现`IDispatch`；它可能会检查传入的参数`pDispParams`是否正确或盲目使用它们，忽略以错误方式操作它们产生的 COM 错误或将这些错误报告给调用者，...

尽管如此，如果你调用的接口使用默认`DispInvoke`函数来实现`IDispatch::Invoke`你应该是安全的，因为它对参数进行了合理的完整性检查。

# breeze - 删除实体及其导航属性

> ID：13789598
> 
> 赞同：6
> 
> 时间：2012-12-09T17:07:15.223
> 
> 标签：breeze

我有一个类似于 Customer 对象的东西，在`ICollection<Orders>`. 假设客户在本地缓存中，订单不在。如何在不将所有客户订单加载到缓存中并用 标记它们的情况下删除客户及其所有相关订单`setDeleted()`？这里的最佳做法是什么。我认为扩展该`public SaveResult SaveChanges(JObject saveBundle)`方法是最好的方法。客户端还有其他可能性吗，比如标志`delete_all_navigation_too()`？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T17:46:36.347

我必须假设您没有也不希望对您的数据库进行级联删除。就个人而言，我总体上对删除“感到恐惧”并尽量避免它们。我更喜欢软删除（将记录标记为非活动）。但并非所有人都同意或可以效仿

我会考虑在你的控制器中添加一个 Web API 方法（比如“DeleteCustomerAndOrders”）来做到这一点。您可以从客户端调用任何 API 方法，而不仅仅是 Breeze 方法。

在推荐这个时，我假设这种事情在您的应用程序中是相对罕见的。你不需要一个通用的删除器，一个带有父对象 ID 数组的删除器，一个删除一些子对象而不是其他子对象的删除器，......等等等等。

按照这条路径，您将把问题从客户端转移到服务器。这很好：您不必在客户端加载订单。现在你必须在服务器上摆脱它们。如果您使用的是实体框架，您将面临同样的挑战，即删除订单而不加载它们。查看 Alex James 的解决方案：[在 LINQ to Entities 中批量删除](https://stackoverflow.com/questions/869209/bulk-deleting-in-linq-to-entities/870081#870081)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-09T17:49:18.710

我能想到的最简单的方法是在数据库上创建一个级联删除约束，这样当一个客户被删除时，它的所有订单也会被删除。然后只需删除客户端上的客户并调用“SaveChanges”。此外，由于 Breeze 尚不支持客户端“级联”删除（我们正在考虑这一点），您将需要遍历任何已加载的客户端订单并“分离”它们。

# build - 将 scons 用于由几个程序组成的项目

> ID：13789604
> 
> 赞同：2
> 
> 时间：2012-12-09T17:07:25.540
> 
> 标签：build, scons

我正在尝试为我的项目创建一个基于 scons 的构建系统。

该项目由几个目录组成，每个目录都包含整个项目的一部分。
每个目录都包含共享库、程序或进程（守护程序）的源代码。
一个目录 ( **bin** ) 包含所有共享库和所有可执行文件。

大多数目录已经包含一个 sconscript 文件（名为**Sconstruct**），该文件构建目录的模块（lib / 可执行文件）并将其放在**bin**目录中。

现在我想再创建一个 sconscript - 来统治它们。在父目录中，我想要一个***sconscript***
来构建项目的所有库和可执行文件，这样在我在这里和那里更改一些源之后，我可以从父目录和所有受影响的模块将被重新构建。

 *我尝试了几种方法，但都失败了。
我是 scons 行业的菜鸟，我怀疑这是我失败的根本原因，但我确信这个问题已经被其他更有经验的开发人员多次解决 - 因为我描述的情况很常见.

所以，欢迎提出任何建议！

编辑：

我当前在父目录中的 Sconstruct 如下所示：

```
import os  
env = os.environ  
Export('env', 'os')  

SConscript([  
'Server1_Dir/Sconstruct',  
'Server2_Dir/Sconstruct',  
'Server3_Dir/Sconstruct'  
]) 
```

子目录中的 Sconstructs（我知道它们应该被称为 Sconscript）以：

```
import os  
Import('env')  
home=env.get('HOME') 
```

所以在我看来，我对所有脚本都使用了相同的环境，尽管我得到了很多：

```
scons: warning: Two different environments were specified for target.... 
```

警告，这对我来说还不清楚。
还值得注意的是，并非主脚本中的所有服务器组合都会产生这些警告 - 有些可能会和平地离开，但不是全部。
在我看来，这是正确的方法，但我找不到摆脱这些警告（及其根本原因）的方法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:38:03.353

在我尝试统一它们之前，我的脚本如下所示（并且工作正常）：

## 图书馆建设脚本结构：

1.  环境和定义：
    ~~~~~~~~~~~~~~~~~~~~~~

    > ```
    > import os  
    > env = os.environ  
    > home = env.get('HOME')  
    > projects = []  
    > third_parties_projects = []  
    > my_rpath = [] 
    > ```

2.  准备路径和文件列表：
    ~~~~~~~~~~~~~~~~~~~~~~~~~

    > ```
    > all_user_implemented_libs = os.path.join(home,"Project/lib/")  
    > my_rpath.append("/path/to/lib/dir/")  
    > 
    > projects.append(os.path.join(home,"Project/library_1/"))  
    > projects.append(os.path.join(home,"Project/library_2/"))  
    > ...  
    > 
    > third_parties_projects.append("/opt/some_product/include/")  
    > ...  
    > 
    > so_files = Split("""  
    >     source_1.cpp  
    >     source_2.cpp  
    >     ...  
    >             """) 
    > ```

3.  控制构建：
    ~~~~~~~~~~~~~~~~

    > ```
    > myprog = Environment(CXXFLAGS = flags, ENV = env, CPPPATH = projects + third_parties_projects + ['.'], RPATH = my_rpath)  
    > myprog.Decider('MD5')  
    > mylib = myprog.SharedLibrary(all_user_implemented_libs + 'lib_name', so_files)  
    > myprog.Default(mylib) 
    > ```

## 流程构建脚本结构：

1.  环境和定义：
    ~~~~~~~~~~~~~~~~~~~~~~

    > ```
    > import os  
    > env = os.environ  
    > home = env.get('HOME')  
    > projects = []  
    > third_parties_projects = []  
    > user_libpaths = []  
    > my_rpath = [] 
    > ```

2.  准备路径和文件列表：
    ~~~~~~~~~~~~~~~~~~~~~~~~~

    > ```
    > projects.append(os.path.join(home,"Project/library_1/"))  
    > projects.append(os.path.join(home,"Project/library_2/"))  
    > ....  
    > 
    > my_rpath.append("/path/to/lib/dir/")  
    > third_parties_projects.append("/opt/some_product/include/")  
    > ...  
    > 
    > all_user_implemented_bins = os.path.join(home,"Project/bin/")  
    > all_user_implemented_libs = os.path.join(home,"Project/lib/")  
    > 
    > flags = ''  
    > 
    > libs = Split("""  
    >     lib_1  
    >     lib_2  
    >     ...  
    >              """)  
    > 
    > third_party_libpaths.append("/opt/some_product/")  
    > ...  
    > 
    > source_ext_files = Split("""  
    >     ext_source_1.cpp  
    >     ...  
    >         """)  
    > 
    > source_files_for_executable = Split("""  
    >     source_1.cpp  
    >     sosurce_2.cpp  
    >     ...  
    >         """)  
    > 
    > user_libpaths.append(all_user_implemented_libs) 
    > ```

3.  构建底层库：
    ~~~~~~~~~~~~~~~~~~~~~~

    > ```
    > for project in projects:  
    >     SConscript(project+'/Sconstruct') 
    > ```

4.  控制构建：
    ~~~~~~~~~~~~~~~~

    > ```
    > myprog = Environment(CXXFLAGS = flags, ENV = env, CPPPATH = projects + third_parties_projects + ['.'], RPATH = my_rpath)  
    > myprog.Decider('MD5')  
    > my_prog = myprog.Program(all_user_implemented_bins + 'process_name', source_files_for_executable + source_ext_files, LIBS = libs, LIBPATH = third_party_libpaths + user_libpaths)  
    > myprog.Default(my_prog) 
    > ```

这些脚本分散在其对应的 lib/exec 目录中，单独执行时可以正常工作。
现在我想在父目录中添加一个脚本（如原始问题中的那个），它将根据需要构建整个产品 - 所有可执行文件和所有底层库。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:58:02.213

您想要做的称为分层构建，如此[处](http://www.scons.org/doc/production/HTML/scons-user/c3186.html)所述。在 SCons 中，每个项目只能有一个 SConstruct。

在 SCons 中创建分层构建的方法是将根 SCons 脚本设为 SConstruct，将子目录 SCons 脚本称为 SConscript。根 SConstruct 脚本使用上述链接中描述的 SConscript() 函数“加载”子目录 SConscripts。

这是一个假设您有一个根 SConstruct 和一个 lib 和 bin 子目录的示例：

**SConstruct**

```
env = Environment()

SConscript('lib/SConscript', exports='env')
SConscript('bin/SConscript', exports='env') 
```

**lib/SConscript**

```
Import('env')
env.Library('yourlib', ['yourLibSource.cc']) 
```

**bin/SConscript**

```
Import('env')
env.Program('yourbin', ['yourBinSource.cc']) 
```*

# c++ - SFML 2.0 崩溃（window-d-2 上的错误

> ID：13789606
> 
> 赞同：0
> 
> 时间：2012-12-09T17:07:29.433
> 
> 标签：c++, sfml

使用 Code::Blocks, W7, Ati Card 我有这个愚蠢的问题，我试图从 SFML 网站编译一个示例程序 - [http://www.sfml-dev.org/tutorials/2.0/start-cb.php](http://www.sfml-dev.org/tutorials/2.0/start-cb.php) Everything set正确，我想。当我开始（构建并运行）时，它会引发崩溃，当查看崩溃详细信息时，它会指出 window-2-d。所有 .dll 文件都在项目目录中，显然是动态构建。来自网站的 RC，用于 2.0 版（由于 ATI 错误，我无法使用 1.6）

尝试使用此代码运行它

```
#include <iostream>
#include <SFML/Graphics.hpp>

int main()
{
    sf::RenderWindow window(sf::VideoMode(200, 200), "SFML works!");
    sf::CircleShape shape(100.f);
    shape.setFillColor(sf::Color::Green);

    while (window.isOpen())
    {
        sf::Event event;
        while (window.pollEvent(event))
        {
            if (event.type == sf::Event::Closed)
                window.close();
        }

        window.clear();
        window.draw(shape);
        window.display();
    }

    return 0;
} 
```

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T18:47:36.313

如果您使用的是最新的 Code::Blocks 版本，其中包括 GCC 4.7.1，那么您必须自己重新编译 SFML（或使用我的[Nightly Builds](http://sfml.my-gate.net/downloads.html)），因为提供的仅适用于 GCC 版本 < 4.7.x .

> 由于 ATI 错误，我无论如何都无法使用 1.6

无论如何，SFML 2 更好，所以不用担心。

# stored-procedures - 有没有办法在 Firebird 存储过程中创建本地表变量？

> ID：13789607
> 
> 赞同：6
> 
> 时间：2012-12-09T17:07:30.477
> 
> 标签：stored-procedures, firebird

在 MS SQL Server 中，您可以声明任何原始类型或表类型的局部变量。该表是一个普通表，您可以运行`SELECT`、`INSERT`、`UPDATE`等`DELETE`，就像任何其他表一样，除了它是一个局部变量，而不是数据库本身的一部分。

我试图在 Firebird 中做同样的事情，但它似乎不喜欢这种语法。

```
declare variable value int; --works fine
declare variable values table (value int); --Error: "Token unknown (table)" 
```

有没有办法做到这一点？（在有人说“使用可选择的存储过程”之前，这是行不通的。我需要一些可以动态运行的`INSERT`东西`SELECT`。）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-09T19:12:59.540

Firebird 不像 SQL Server 那样支持表变量。

您可以使用的最接近的东西是[全局临时表](http://www.firebirdsql.org/file/documentation/release_notes/html/rlsnotes210.html#rnfb210-globaltemp)（需要 Firebird 2.1 或更高版本）

> (v.2.1) 全局临时表 (GTT) 是存储在系统目录中的具有永久元数据但具有临时数据的表。来自不同连接（或事务，取决于范围）的数据相互隔离，但 GTT 的元数据在所有连接和事务之间共享。
> 
> GTT有两种：
> 
> 具有在引用指定 GTT 的连接生命周期内持续存在的数据；和
> 
> 仅在引用事务的生命周期内持续存在的数据。

您必须事先创建 GTT。

```
CREATE GLOBAL TEMPORARY TABLE
  ...
  [ON COMMIT <DELETE | PRESERVE> ROWS] 
```

# ajaxcontroltoolkit - HtmlEditorExtender 不显示图标

> ID：13789613
> 
> 赞同：2
> 
> 时间：2012-12-09T17:07:50.483
> 
> 标签：ajaxcontroltoolkit, htmleditorextender

正如题主所说。我已经将 HtmlEditorExtender 绑定到一个文本框，但它没有显示工具栏中的图标，只是灰色按钮。

![在此处输入图像描述](../Images/b5b067f6ab3f76ec11e7f1acddec8da6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:29:27.990

代码应类似于：

```
 <asp:TextBox ID="ContentMail" runat="server" AutoFocus="true" Width="60em" Height="40em" TextMode="MultiLine"/>
 <asp:HtmlEditorExtender ID="HtmlEditorExtender1" runat="server" TargetControlID="ContentMail" DisplaySourceTab="True">
 </asp:HtmlEditorExtender> 
```

如果你在 TemplateField 中设置它，只需添加一个不可见的 div 和一个与 HtmlEditorExtender 链接的文本框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T10:28:30.140

当我应用 Ajax Control Toolkit 静态资源时，我对 AjaxControltoolkit 15.1 也有同样的体验。我必须分离 ACTStaticRecourses 才能让我的图标回到工具栏中。希望这对一些人有帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-02T14:29:39.317

我修复了这个错误，我添加了 css 样式的 ajaxcontroltoolkit [https://searchcode.com/codesearch/view/27732040/](https://searchcode.com/codesearch/view/27732040/)

在出现问题和更改时进行分页

背景：url(Images/html-editor-buttons.png) 无重复；

在

```
.ajax__html_editor_extender_button
{
    background: url(Images/html-editor-buttons.png) no-repeat;
    cursor: pointer;
    display: block;
    float: left;
    border: none;
    background-color:#c2c2c2;
    padding-bottom:2px; 
} 
```

在 pathimage 上然后是通用 ajax

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-03T14:05:58.413

嘿伙计们（女孩），如果您在 asp.net 中使用更新面板或在 gridview 中使用 asp:HtmlEditorExtender 并且不显示图标。当包含 asp:HtmlEditorExtender 和文本框时，您需要添加隐藏 asp.panel。例子。

```
 <asp:Panel runat="server" Visible="False">
  <asp:TextBox ID="TextBox22" runat="server" AutoFocus="true" BackColor="White" Height="15em" TextMode="MultiLine" Width="99%"></asp:TextBox>
                                <ajaxToolkit:HtmlEditorExtender ID="TextBox12_HtmlEditorExtender"  runat="server" TargetControlID="TextBox22">
                                </ajaxToolkit:HtmlEditorExtender></asp:Panel> 
```

# c++ - lodePNG 内存分配错误

> ID：13789616
> 
> 赞同：0
> 
> 时间：2012-12-09T17:07:58.833
> 
> 标签：c++, visual-studio, memory-management, png

我将[lodePNG](http://lodev.org/lodepng/)示例文件连同我制作的 7kb PNG 文件一起放入 Visual C++ 2008 Express 中的空白项目中，但在运行时出现此内存分配错误：

> 分配大小无效：429967295 字节。

在通过堆栈帧打破错误并回溯之后，我认为这是由一个 null 参数传递给 std::vector 中的 resize 函数引起的。这个项目最近更新了（2012 年 4 月），并且记录得很完整，所以我可能做错了什么（或者没有正确的编译选项）。有人可以看看我的项目吗？

这是项目文件夹的 ZIP 文件：[http ://www.mediafire.com/file/791b9z9ld74n3eu/TestLodePNG.zip](http://www.mediafire.com/file/791b9z9ld74n3eu/TestLodePNG.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:16:12.633

您很可能将 png 文件放在错误的位置。默认情况下，工作目录是项目文件所在的位置，而不是在调试器中运行时解决方案文件所在的位置。当我将文件移动到项目文件目录时，它工作正常。

您可能会考虑在文件打开代码中添加一些错误检查，如下所示：

```
void load_file(std::vector<unsigned char>& buffer, const std::string& filename)
{
  std::ifstream file(filename.c_str(), std::ios::in|std::ios::binary|std::ios::ate);

    if(!file)
    {
        //Do something about the error and don't crash
    }
... 
```

# underscore.js - Lodash 和 Underscore.js 的区别

> ID：13789618
> 
> 赞同：1686
> 
> 时间：2012-12-09T17:08:36.030
> 
> 标签：underscore.js, javascript, lodash

为什么有人更喜欢[Lodash](http://lodash.com/)或[Underscore.js](http://underscorejs.org/)实用程序库而不是另一个？

Lodash 似乎是下划线的替代品，后者的使用时间更长。

我认为两者都很出色，但我对它们如何进行有根据的比较知之甚少，我想了解更多关于差异的信息。

* * *

## 回答 #1

> 赞同：2117
> 
> 时间：2012-12-16T05:34:06.213

`arguments`我创建 Lodash 是为了为数组、字符串、对象和对象¹提供更一致的跨环境迭代支持。它已经成为 Underscore.js 的超集，提供更一致的 API 行为、更多[功能](http://lodash.com)（如 AMD 支持、深度克隆和深度合并）、更全面的[文档](http://lodash.com/docs)和单元测试（在[Node.js](https://en.wikipedia.org/wiki/Node.js)、[RingoJS](https://github.com/ringo/ringojs)、[Rhino](https://en.wikipedia.org/wiki/Rhino_%28JavaScript_engine%29)中运行的测试） 、[Narwhal](https://github.com/tlrobinson/narwhal)、[PhantomJS](https://en.wikipedia.org/wiki/PhantomJS)和浏览器），更好的整体性能和大型数组/对象迭代的优化，以及[自定义构建](http://lodash.com/)和模板预编译实用程序的更大灵活性。

由于 Lodash 比 Underscore.js 更新更频繁，[因此提供](http://lodash.com/)`lodash underscore`了一个构建以确保与 Underscore.js 的最新稳定版本兼容。

有一次，我什至获得了对 Underscore.js 的[推送访问权限](https://s3.amazonaws.com/f.cl.ly/items/2e0O0S010f2A3s1W283U/push_access.png?v=ba693725)，部分原因是 Lodash 负责提出 30 多个问题；在 Underscore.js v1.4.x+ 中登陆错误修复、新功能和性能提升。

此外，至少有三个[Backbone.js](https://en.wikipedia.org/wiki/Backbone.js)样板默认包含 Lodash，并且 Lodash 现在在 Backbone.js 的官方[文档](http://backbonejs.org/#downloads)中被提及。

查看 Kit Cambridge 的帖子，*[向 Lo-Dash 说“Hello”](https://web.archive.org/web/20180101093627/http://kitcambridge.be/blog/say-hello-to-lo-dash/)*，以更深入地了解 Lodash 和 Underscore.js 之间的差异。

脚注：

1.  Underscore.js 对数组、字符串、对象和`arguments`对象的支持不一致。在较新的浏览器中，Underscore.js 方法忽略[数组中的漏洞](http://www.2ality.com/2012/06/dense-arrays.html)，“对象”方法迭代`arguments`对象，字符串被视为类似数组，方法正确地迭代函数（忽略它们的“原型”属性）和对象（迭代阴影属性，如“toString " 和 "valueOf")，而在旧版浏览器中则不会。此外，Underscore.js 方法，如`_.clone`，保留数组中的孔，而其他方法`_.flatten`则不保留。

* * *

## 回答 #2

> 赞同：197
> 
> 时间：2012-12-13T21:51:14.147

Lodash 受到 Underscore.js 的启发，但现在它是一种出色的解决方案。您可以进行[自定义构建](http://lodash.com/custom-builds)，拥有[更高的性能](http://lodash.com/benchmarks)，支持 AMD 并拥有[出色的额外功能](http://lodash.com/#features)。检查jsperf 上的 Lodash 与[Underscore.js 基准测试](http://jsperf.com/lodash-underscore)，以及……这篇[关于 Lodash 的精彩帖子](https://web.archive.org/web/20180311051822/http://kitcambridge.be/blog/say-hello-to-lo-dash/)：

当您使用集合时，最有用的功能之一是简写语法：（
尽管 Underscore 现在也支持这种语法）

```
var characters = [
  { 'name': 'barney', 'age': 36, 'blocked': false },
  { 'name': 'fred',   'age': 40, 'blocked': true }
];

// Using "_.filter" callback shorthand
_.filter(characters, { 'age': 36 });

// Using Underscore.js
_.filter(characters, function(character) { return character.age === 36; } );

// → [{ 'name': 'barney', 'age': 36, 'blocked': false }] 
```

（取自[Lodash 文档](http://lodash.com/docs#filter)）

* * *

## 回答 #3

> 赞同：104
> 
> 时间：2016-07-21T09:35:51.107

如果您像我一样期待 Underscore.js 和 Lodash 之间的使用差异列表，那么这里有一个[从 Underscore.js 迁移到 Lodash 的指南](https://github.com/lodash/lodash/wiki/Migrating)。

以下是它的当前状态供后代使用：

> *   下划线`_.any`是 Lodash`_.some`
> *   下划线`_.all`是 Lodash`_.every`
> *   下划线`_.compose`是 Lodash`_.flowRight`
> *   下划线`_.contains`是 Lodash`_.includes`
> *   下划线`_.each`不允许通过返回退出`false`
> *   下划线`_.findWhere`是 Lodash`_.find`
> *   下划线`_.flatten`默认是深的，而 Lodash 是浅的
> *   Underscore`_.groupBy`支持传递参数`(value, index, originalArray)`的迭代器，而在 Lodash 中，迭代器 for`_.groupBy`只传递一个参数：`(value)`.
> *   Underscore.js`_.indexOf`的第三个参数`undefined`是 Lodash`_.indexOf`
> *   Underscore.js`_.indexOf`的第三个参数`true`是 Lodash`_.sortedIndexOf`
> *   下划线`_.indexBy`是 Lodash`_.keyBy`
> *   下划线`_.invoke`是 Lodash`_.invokeMap`
> *   下划线`_.mapObject`是 Lodash`_.mapValues`
> *   下划线`_.max`结合了 Lodash `_.max`&`_.maxBy`
> *   下划线`_.min`结合了 Lodash `_.min`&`_.minBy`
> *   下划线`_.sample`结合了 Lodash `_.sample`&`_.sampleSize`
> *   下划线`_.object`结合了 Lodash`_.fromPairs`和`_.zipObject`
> *   谓词下划线`_.omit`是 Lodash`_.omitBy`
> *   下划线`_.pairs`是 Lodash`_.toPairs`
> *   谓词下划线`_.pick`是 Lodash`_.pickBy`
> *   下划线`_.pluck`是 Lodash`_.map`
> *   下划线`_.sortedIndex`结合了 Lodash `_.sortedIndex`&`_.sortedIndexOf`
> *   下划线`_.uniq`是`iteratee`Lodash`_.uniqBy`
> *   下划线`_.where`是 Lodash`_.filter`
> *   下划线`_.isFinite`不符合`Number.isFinite`
>     （例如在 Underscore.js 中`_.isFinite('1')`返回`true`，但`false`在 Lodash 中）
> *   下划线`_.matches`速记不支持深度比较
>     （例如，`_.filter(objects, { 'a': { 'b': 'c' } })`）
> *   下划线 ≥ 1.7 & Lodash`_.template`语法为
>     `_.template(string, option)(data)`
> *   Lodash`_.memoize`缓存`Map`就像对象
> *   Lodash 不支持支持`context`许多方法的论点`_.bind`
> *   Lodash 支持[隐式链接](https://lodash.com/docs#_)、[惰性链接和快捷方式融合](http://filimanjaro.com/blog/2014/introducing-lazy-evaluation/)
> *   Lodash 将其重载`_.head`的 , `_.last`, `_.rest`, & `_.initial`out 拆分为
>     `_.take`, `_.takeRight`, `_.drop`, & `_.dropRight`
>     （即在 Underscore.js`_.head(array, 2)`中是`_.take(array, 2)`在 Lodash 中）

* * *

## 回答 #4

> 赞同：60
> 
> 时间：2013-08-18T14:18:59.610

除了[John 的回答](https://stackoverflow.com/questions/13789618/differences-between-lodash-and-underscore-js/13898916#13898916)，阅读 Lodash（迄今为止我一直认为它是 Underscore.js 的“我也是”），以及查看性能测试、阅读源代码和[博客文章之外](http://kitcambridge.be/blog/say-hello-to-lo-dash/)，还有几点使 Lodash 优于 Underscore.js 的有以下几点：

1.  这与速度无关，因为它与速度的*一致性*有关（？）

> 如果您查看 Underscore.js 的源代码，您会在前几行中看到 Underscore.js 依赖于许多函数的本机实现。尽管在理想情况下，这将是一种更好的方法，但如果您查看[这些幻灯片](http://allyoucanleet.com/post/21624742336/jsconf-us-12-slides)中给出的一些性能链接，不难得出结论，这些“本机实现”的质量因浏览器而异——到浏览器。Firefox 在某些功能上非常快，而在某些 Chrome 中占主导地位。（我想在某些情况下 Internet Explorer 也会占主导地位）。我认为最好选择跨浏览器**性能**更一致的代码。

> 一定要早点阅读这篇博文，不要因为它而相信它，而是通过运行[基准](http://lodash.com/benchmarks)来自己判断。我现在惊呆了，看到 Lodash在 Chrome 等*简单*的*原生*函数中的性能比 Underscore.js 快 100-150% `Array.every`！

2.  **Lodash**中的附加功能也非常有用。
3.  至于 Xananax 的高度评价建议对 Underscore.js 的代码做出贡献的评论：拥有**良好**的竞争总是更好，它不仅可以保持创新，还可以促使您保持自己（或您的库）处于良好状态。

这是Lodash 之间[的差异列表](https://github.com/bestiejs/lodash/wiki/build-differences)，它的 Underscore.js 构建是您的 Underscore.js 项目的直接替代品。

* * *

## 回答 #5

> 赞同：42
> 
> 时间：2014-09-11T21:27:19.333

在 2014 年，我仍然认为我的观点成立：

恕我直言，这个讨论被夸大了。引用上述[博客文章](http://kitcambridge.be/blog/say-hello-to-lo-dash/)：

> 大多数 JavaScript 实用程序库，例如 Underscore、Valentine 和 wu，都依赖于“native-first dual approach”。这种方法更喜欢原生实现，只有在不支持原生等价物的情况下才回退到原生 JavaScript。但是 jsPerf 揭示了一个有趣的趋势：迭代数组或类似数组的集合的最有效方法是完全避免原生实现，而是选择简单的循环。

好像“简单循环”和“vanilla Javascript”比 Array 或 Object 方法实现更原生。哎呀...

拥有单一的事实来源当然很好，但没有。即使你被告知不是这样，也没有香草之神，亲爱的。对不起。唯一真正成立的假设是，我们都在编写旨在在所有主流浏览器中表现良好的 JavaScript 代码，并且知道它们都有相同事物的不同实现。委婉地说，这是一个要应付的婊子。但这是前提，不管你喜不喜欢。

也许你们所有人都在从事需要 twitter 性能的大型项目，以便您现在真正看到[每秒列表中 850,000 (Underscore.js) 与 2,500,000 (Lodash) 迭代之间](http://jsperf.com/lodash-underscore)的区别！

我不是。我的意思是，我从事的项目必须解决性能问题，但这些问题从未得到解决，也不是由 Underscore.js 和 Lodash 引起的。除非我掌握了实现和性能（我们现在正在谈论 C++）的真正差异，比如说，一个可迭代的循环（对象或数组，稀疏与否！），我宁愿不被打扰任何声明都基于[已经自以为是](https://github.com/bestiejs/benchmark.js/blob/master/package.json)的基准平台的结果。

它只需要一个单一的更新，比方说，[Rhino](https://en.wikipedia.org/wiki/Rhino_%28JavaScript_engine%29)以一种方式将它的 Array 方法实现点燃，没有一个单一的“中世纪循环方法性能更好，永远和诸如此类”的牧师可以围绕一个简单的事实争论他/她的方式突然之间，Firefox 中的数组方法比他/她自以为是的笨蛋要快得多。伙计，你不能通过欺骗你的运行时环境来欺骗你的运行时环境！宣传的时候想想...

> 你的实用腰带

... 下次。

所以要保持相关性：

*   如果您在不牺牲原生风格的情况下获得便利，请使用 Underscore.js。
*   如果您喜欢 Lodash 的便利性并喜欢它的扩展功能目录（深拷贝等），并且如果您迫切需要即时性能并且最重要的是不介意在原生 API 胜过固执己见时立即选择替代方案变通方法。这很快就会发生。时期。
*   甚至还有第三种解决方案。DIY！了解您的环境。了解不一致之处。阅读他们（[John-David](https://github.com/lodash/lodash)和[Jeremy](https://github.com/jashkenas/underscore)的）代码。在无法解释为什么真正需要一致性/兼容性层并增强您的工作流程或提高应用程序性能的情况下，不要使用这个或那个。很可能您的要求可以满足您完全能够自己编写的简单[polyfill 。](https://en.wikipedia.org/wiki/Polyfill_(programming))这两个库都只是加了一点糖的普通香草。[他们俩只是为了谁提供最甜的馅饼而争吵](https://github.com/jashkenas/underscore/commit/4e4bc194c0a0e06aa8f7633695ad10030d871a2b#commitcomment-1361732)。但请相信我，最终两者都只是用水做饭。没有香草神，所以不可能没有香草教皇，对吧？

选择最适合您需求的任何方法。照常。我更喜欢在任何时候对实际实现进行回退，而不是自以为是的运行时作弊，但即使这在当今似乎也是一个品味问题。坚持使用像[http://developer.mozilla.com](http://developer.mozilla.com)和[http://caniuse.com](http://caniuse.com)这样的优质资源，你会没事的。

* * *

## 回答 #6

> 赞同：25
> 
> 时间：2017-04-26T14:20:40.207

我同意这里所说的大部分内容，但我只想指出一个支持 Underscore.js 的论点：库的大小。

特别是如果您正在开发一个打算主要在移动设备上使用的应用程序或网站，则生成的捆绑包的大小以及对启动或下载时间的影响可能具有重要作用。

作为比较，这些尺寸是我在运行[Ionic](https://en.wikipedia.org/wiki/Ionic_(mobile_app_framework)) serve 后使用 source-map-explorer 注意到的尺寸：

```
Lodash: 523 kB
Underscore.js: 51.6 kB 
```

可以使用[BundlePhobia检查](https://bundlephobia.com/)[Lodash](https://bundlephobia.com/result?p=lodash)和[Underscore.js](https://bundlephobia.com/result?p=underscore)的当前大小。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2015-03-25T12:16:40.717

我不确定这是否是 OP 的意思，但我遇到了这个问题，因为我正在搜索从 Underscore.js 迁移到 Lodash 时必须牢记的问题列表。

如果有人发布一篇包含此类差异的完整列表的文章，我将不胜感激。让我从我艰难地学到的东西开始（也就是说，让我的代码在生产中爆炸的东西：/）：

*   `_.flatten`在 Underscore.js 中默认是深的，您必须将 true 作为第二个参数传递以使其变浅。在 Lodash 中，默认情况下它是浅的，并且将 true 作为第二个参数传递将使它变深！:)
*   `_.last`在 Underscore.js 中接受第二个参数，它告诉你想要多少元素。在 Lodash 中没有这样的选项。你可以用`.slice`
*   `_.first`（同样的问题）
*   `_.template`在 Underscore.js 中可以有多种使用方式，其中之一是提供模板字符串和数据并返回 HTML（或者至少前一段时间它是这样工作的）。在 Lodash 中，您会收到一个函数，然后您应该将数据提供给该函数。
*   `_(something).map(foo)`在 Underscore.js 中工作，但在 Lodash 中我不得不将其重写为`_.map(something,foo)`. 也许这只是一个`TypeScript`问题。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2014-12-07T12:19:52.743

*[Ben McCormick 的Underscore vs Lo-Dash](http://benmccormick.org/2014/11/12/underscore-vs-lodash/)*是比较两者的最新文章：

> 1.  Lodash 的 API 是 Underscore.js 的超集。

> 2.  在引擎盖下，Lodash 已被完全重写。

> 3.  Lodash 绝对不比 Underscore.js 慢。

> 4.  Lodash 增加了什么？

> *   可用性改进
> *   额外功能
> *   性能提升
> *   链接的简写语法
> *   自定义构建以仅使用您需要的内容
> *   语义版本控制和 100% 的代码覆盖率

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2014-12-12T16:56:40.157

我刚刚发现了一个对我来说很重要的区别。*Lodash 的非*Underscore.js 兼容版本`_.extend()`不会复制类级别定义的属性或方法。

 *我在[CoffeeScript中创建了一个](https://en.wikipedia.org/wiki/CoffeeScript)[Jasmine](https://en.wikipedia.org/wiki/Jasmine_(JavaScript_testing_framework))测试来证明这一点：

[https://gist.github.com/softcraft-development/1c3964402b099893bd61](https://gist.github.com/softcraft-development/1c3964402b099893bd61)

幸运的是，`lodash.underscore.js`保留了 Underscore.js 复制所有内容的行为，这对我来说是所需的行为。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2015-07-18T17:13:58.243

Lodash 拥有与 Underscore.js`_.mapValues()`相同的`_.mapObject()`.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-14T11:16:42.313

在大多数情况下，Underscore.js 是 Lodash 的子集。

有时，就像现在一样，Underscore.js 会有 Lodash 没有的很酷的小功能，比如 mapObject。这为我的项目开发节省了很多时间。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-01-19T06:48:34.973

它们非常相似，**Lodash**正在接管......

它们都是一个实用程序库，它采用了 JavaScript 中的实用程序世界......

看起来**Lodash**现在更新得更频繁了，所以更多地用在最新的项目中......

Lodash似乎也**轻**了几个 KB...

两者都有很好的 API 和文档，但我认为**Lodash**更好......

这是获取数组第一个值的每个文档项的屏幕截图...

**下划线.js：**

[![下划线.js](../Images/f6e6c2bec976160875576ede419987a7.png)](https://i.stack.imgur.com/As21e.png)

**罗达什：**

[![洛达什](../Images/b89d63d0cb389e241a69853eaeebc8d8.png)](https://i.stack.imgur.com/z8zk2.png)

由于事情可能会不时更新，请查看他们的网站...

[洛达什](https://lodash.com)

[下划线.js](https://underscorejs.org)*

# meteor - 在 Meteor 模板和模板助手中访问父上下文

> ID：13789622
> 
> 赞同：44
> 
> 时间：2012-12-09T17:09:15.837
> 
> 标签：meteor

我遇到了一个模板上下文情况，我很难找到解决办法。

**这是有问题的模板：**

```
{{#each votes}}
    <h3>{{question}}</h3>

    <ul>
        {{#each participants}}
            <li>
                <p>{{email}}</p>
                <select name="option-select">
                    {{#each ../options}}
                    <option value="{{option}}" class="{{is_selected_option}}">{{option}}</option>
                    {{/each}}
                </select>
            </li>
        {{/each}}
    </ul>
</div>
{{/each}} 
```

**这是一个投票文件的例子：**

```
{
    _id: '32093ufsdj90j234',
    question: 'What is the best food of all time?'
    options: [
        'Pizza',
        'Tacos',
        'Salad',
        'Thai'
    ],
    participants: [
        {
            id: '2f537a74-3ce0-47b3-80fc-97a4189b2c15'
            vote: 0
        },
        {
            id: '8bffafa7-8736-4c4b-968e-82900b82c266'
            vote: 1
        }
    ]
} 
```

**这就是问题所在...**

当模板进入`#each`参与者时，它不再有权访问`vote`上下文，因此无法访问每个投票的可用选项。

我可以通过使用把手路径跳回父上下文来解决这个*问题*`../options`，但这不会影响模板助手的上下文，所以`this`in`Template.vote.is_selected_option`指的是 current `participant`，而不是 current `vote`or `option`，并且没有办法知道`option`我们当前正在迭代哪个。

关于如何解决这个问题的任何建议，而不诉诸 DOM 操作和 jQuery 恶作剧？

这是一个模板问题，对我来说已经多次出现。我们需要一种正式的方式来达到模板上下文层次结构，在模板、模板助手和模板事件中。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2014-01-11T19:46:06.370

似乎从[Spacebars（Meteor 的新模板引擎）](https://github.com/meteor/meteor/blob/devel/packages/spacebars/README.md#identifiers-and-paths)开始，您就可以`{{#each}}`使用`../`.

在 Meteor 0.9.1 中，您还可以编写一个助手并[`Template.parentData()`](http://docs.meteor.com/#template_parentdata)在其实现中使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T01:51:25.837

它不是特别漂亮，但我做了这样的事情：

```
<template name='forLoop'>
{{#each augmentedParticipants}}
{{> participant }}
{{/each}}
</template>

<template name='participant'>
...
Question: {{this.parent.question}}
...
</template>

// and in the js:
Template.forLoop.helpers({
    augmentedParticipants: function() {
        var self = this;
        return _.map(self.participants,function(p) {
            p.parent = self;
            return p;
        });
    }
}); 
```

它类似于 AVGP 建议的方法，但在助手级别而不是 db 级别增加数据，我认为这有点轻量级。

如果你喜欢，你可以尝试编写一个 Handlebars 块帮助`eachWithParent`器来抽象这个功能。Meteor 对车把的扩展记录在这里：[https ://github.com/meteor/meteor/wiki/Handlebars](https://github.com/meteor/meteor/wiki/Handlebars)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T06:51:25.017

我不知道正式的方式（如果有的话），但为了解决您的问题，我会将参与者与父 ID 关联起来，如下所示：

```
{
    _id: "1234",
    question: "Whats up?",
    ...
    participants: [
      {
        _id: "abcd",
        parent_id: "1234",
        vote: 0
      }
    ]
} 
```

并在帮助程序、事件等中使用此 parent_id 使用 findOne 跳回父项。这显然是一个次优的事情，但这是我想到的最简单的方法，只要没有引用父上下文的方法。也许有一种方法，但它很好地隐藏在 Meteor 的内部工作中，没有在文档中提及，如果是这样：如果你找到一个，请更新这个问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-13T00:35:24.323

这应该让生活更轻松。

```
// use #eachWithParent instead of #each and the parent._id will be passed into the context as parent.
Handlebars.registerHelper('eachWithParent', function(context, options) {

    var self = this;
    var contextWithParent = _.map(context,function(p) {
        p.parent = self._id;
        return p;
    });

    var ret = "";

    for(var i=0, j=contextWithParent.length; i<j; i++) {
        ret = ret + options.fn( contextWithParent[i] );
    }
    return ret;
}); 
```

去改变

```
p.parent = self._id; 
```

到您想在父上下文中访问的任何内容。

解决它：

```
// https://github.com/meteor/handlebars.js/blob/master/lib/handlebars/base.js

// use #eachWithParent instead of #each and the parent._id will be passed into the context as parent.
Handlebars.registerHelper('eachWithParent', function(context, options) {
    var self = this;
    var contextWithParent = _.map(context,function(p) {
        p.parent = self._id;
        return p;
    });

    return Handlebars._default_helpers.each(contextWithParent, options);
}); 
```

这有效:)没有错误

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-18T09:31:03.500

这是一个很长的镜头，但也许这可以工作：

```
{{#with ../}}
  {{#each options}}
    {{this}}
  {{/each}}
{{/with}} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-09-26T20:04:14.140

只需注册一个全局模板助手：

```
Template.registerHelper('parentData',
    function () {
        return Template.parentData(1);
    }
); 
```

并在您的 HTML 模板中使用它：

```
{{#each someRecords}}
  {{parentData.someValue}}
{{/each}} 
```

======= 编辑

对于 Meteor 1.2+，你应该使用：

```
UI.registerHelper('parentData', function() {
  return Template.parentData(1);
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-20T10:30:26.090

```
"click .selected":function(e){
    var parent_id = $(e.currentTarget).parent().attr("uid");
    return parent_id
  },
```

```
<td id="" class="staff_docs" uid="{{_id}}">
                                        {{#each all_req_doc}}
                                                <div class="icheckbox selected "></div>
  {{/each}}
  </td>
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-12T15:44:21.400

`{{#each parent}}`

`{{#each child}}`

`<input type="hidden" name="child_id" value="{{_id}}" />`

`<input type="hidden" name="parent_id" value="{{../_id}}" />`

`{{/each}}`

`{{/each}}`

_id 不是事物的 _did，而是父对象的 id！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-11-28T15:02:33.303

我以类似的方式陷入困境，发现其他答案中建议的 Template.parentData() 方法目前在事件处理程序中不起作用（请参阅[https://github.com/meteor/meteor/issues/5491](https://github.com/meteor/meteor/issues/5491)）。用户 Lirbank 发布了这个简单的解决方法：

将数据从外部上下文传递到内部上下文中的 html 元素，在同一个模板中：

```
{{#each companies}}
  {{#each employees}}
    <a href="" companyId="{{../id}}">Do something</a>
  {{/each}}
{{/each}} 
```

现在可以从事件处理程序中访问公司 ID，例如

```
$(event.currentTarget).attr('companyId') 
```

# html - 提高我网站上的滚动性能

> ID：13789625
> 
> 赞同：0
> 
> 时间：2012-12-09T17:09:21.117
> 
> 标签：html, css, scroll

我们刚刚推出了新的单页网站，但滚动的性能真的很差，尤其是在旧浏览器上。

你知道我可以如何改进它吗？

这是网址：[http ://butterflyeffect.fr](http://butterflyeffect.fr)

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T19:55:07.837

在 Chrome Devtools 中，您可以生成 CSS 配置文件。我这样做了，我在 img、* 和赞助商项目上看到了很多时间。

但根据我的经验并查看您的（伟大的）网站，滞后可能在于不透明的事情。因此，如果您有一些部分透明的背景和覆盖部分，那就是滞后。我会复制您的整个网站，然后杀死您的 CSS，删除很多内容并不断检查性能何时恢复。从删除所有背景图像开始，而不是完全不透明的元素。

还有一个不错的视频 [http://vimeo.com/54990931](http://vimeo.com/54990931)

但老实说，我并不完全同意调整，我认为这取决于浏览器供应商来改进他们的算法。但它不介意学习基础知识，只是在构建时考虑它。

问候

# sql - 在 SQL 中聚合数据

> ID：13789627
> 
> 赞同：1
> 
> 时间：2012-12-09T17:09:28.810
> 
> 标签：sql, oracle, aggregate-functions, oracle9i

在查看链接中的图片时，我需要平均内爆单位和总和，我将在下面显示的结果下方附加我的代码。这几天我一直在寻找这个问题的答案。我担心我可能会试图在我的头上编码一点。

![](../Images/892a71b307ca192ee6a373b27f7cdb7b.png)

```
 SELECT A.to_load_id                                   AS "Cases", 
   A.from_qty - A.to_qty                          AS "Imploded Units", 
   ( A.from_qty - A.to_qty ) * Nvl(SUM(p.qty), 1) AS "Exploded Units", 
   A.wskusku                                      AS "Sku's", 
   A.wave                                         AS "Wave", 
   A.from_loc                                     AS "Processed Location", 
   A.free_form_text                               AS "Zone" ,

   FROM   audits A, 
   prepack P 
   WHERE  A.from_loc LIKE 'S%' 
   AND A.to_loc = A.from_loc 
   AND free_form_text IN ( '01', '02', '03', '04', 
                           '05', '06', '07', '08', 
                           '09', '10', '11', '12', 
                           '13', '14' ) 
   AND A.wskusku = p.sku (+) 
   AND A.from_load_id = '42419472' 
   AND A.wave in ('WC055193','','','','','','','','','')
   AND To_date(Substr(a.date_wms, 1, 12), 'YYYY/MM/DD HH24:MI') >= 
       SYSDATE - 4 
   GROUP  BY A.to_load_id, 
      A.from_qty, 
      A.to_qty, 
      P.qty, 
      A.wskusku, 
      A.wave, 
      A.from_loc, 
      A.free_form_text 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:40:47.233

您需要使用`avg()`/`sum()`而*不是* `GROUP BY`聚合中涉及的列：

```
SELECT A.to_load_id                                    AS "Cases"
      ,avg(A.from_qty - A.to_qty)                      AS "Imploded Units"
      ,sum(A.from_qty - A.to_qty) * Nvl(SUM(P.qty), 1) AS "Exploded Units"
      ,A.wskusku                                       AS "Sku's"
      ,A.wave                                          AS "Wave"
      ,A.from_loc                                      AS "Processed Location"
      ,A.free_form_text                                AS "Zone"
FROM   audits A 
JOIN   prepack P ON P.sku (+) = A.wskusku
WHERE  A.from_loc LIKE 'S%' 
AND    A.to_loc = A.from_loc 
AND    A.free_form_text IN ( '01', '02', '03', '04', 
                           '05', '06', '07', '08', 
                           '09', '10', '11', '12', 
                           '13', '14' )
AND    A.from_load_id = '42419472'
AND    A.wave in ('WC055193','','','','','','','','','')
AND    To_date(Substr(A.date_wms, 1, 12), 'YYYY/MM/DD HH24:MI') >= SYSDATE - 4
GROUP  BY A.to_load_id, 
      ,A.wskusku
      ,A.wave
      ,A.from_loc
      ,A.free_form_text 
```

不知道为什么你多个`"Exploded Units"`，但不是`"Imploded Units"`。我复制了你那里的东西。

# java - SocketChannel 如何处理 ByteBuffer 中截断的 UTF-8 字符和行

> ID：13789633
> 
> 赞同：0
> 
> 时间：2012-12-09T17:10:10.540
> 
> 标签：java, nio

我的系统正在通过 SocketChannel 接收以 0x0D 0x0A 结尾的 UTF-8 行。我像这样在 ByteBuffer 中读取数据：

```
final ByteBuffer buffer = ByteBuffer.allocate(bufsize);
final int bytesRead = _mySocket.read(buffer); 
```

缓冲区足够大，可以包含很多行。但是我不能有一个足够大的缓冲区来包含所有行，行是动态处理的。

缓冲区不能包含所有行，因此可能会拆分行，也可能会拆分超过一个字节编码的字符。

我想到了一个解决方案：

1.  通过逐字节分析 ByteBuffer 来处理我可以提取的所有行（我搜索 0x0D 0x0A）
2.  识别未处理的字节
3.  将它们存储在临时变量中
4.  清除字节缓冲区
5.  将未处理的字节添加到 ByteBuffer
6.  再次阅读 SocketChannel。
7.  重复此操作，直到找到指示我收到所有行的行。

java 或任何库是否已经提供此功能？

感谢您的任何回答，米凯尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T02:14:21.587

我建议使用 java.util.Scanner，它知道如何处理 SocketChannel，它知道如何读取行

```
 Scanner sc = new Scanner(_mySocket); 
```

# paypal - Paypal php API：设置凭据

> ID：13789634
> 
> 赞同：2
> 
> 时间：2012-12-09T17:10:26.533
> 
> 标签：paypal, paypal-sandbox

这是一个简单的问题。我正在使用 Paypal php api (https://www.x.com/sites/default/files/merchant-php-2.0.96.zip)。我找到了我的 api 密钥（Api 用户名、密码和签名）。但是我找不到在 PHP SDK 的快速结帐中指定它们的位置（我正在使用示例中的快速结帐）。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:50:05.793

修改这个文件 config/sdk_config.ini

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T17:43:39.990

使用沙盒 api 凭据，如下所示：

使用作为沙盒帐户之一创建的企业帐户。（应用程序选项卡、沙盒帐户）。单击帐户，然后单击其下的“个人资料”，然后单击“API 凭据”选项卡。

编辑 php sdk（在 config 文件夹下）中的 sdk_config.ini，并使用 app_id 为 APP-80W284485P519543T 的这些凭据

确保在 ini 文件中的 [Service] 下将模式设置为沙箱。

当您进行服务调用时，请使用您在 ini 文件中输入的帐户用户名，如下所示：

$setECResponse = $paypalService->SetExpressCheckout($setECReq,"API_USERNAME");

# javascript - 测量 JavaScript 性能

> ID：13789635
> 
> 赞同：1
> 
> 时间：2012-12-09T17:10:30.657
> 
> 标签：javascript, performance

我有一个 JavaScript 文件，它接受一个输入，用它做一些计算，然后返回一个结果。现在，我想测量它的性能，例如检查运行 1.000 个输入需要多少时间。问题是我对 Javascript 几乎一无所知（代码也不是我的），所以我不知道如何做到这一点。StackOverflowing 我发现了一些类似的问题，但它是关于“脚本运行一次需要多少时间”，而不是“脚本详细说明 1.000 个输入需要多少时间”。

如果有帮助，[这](http://www.nayuki.io/res/chemical-equation-balancer-javascript.js)就是脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:20:42.160

我会做这样的事情（取决于窗口控制台是否存在并具有时间属性）：

```
if('console' in window && 'time' in window.console){

    console.time('time');
    for (var k=0;k<1000;k++) {
        derp(input);
    }
    console.timeEnd('time');

} else {

    var d = new Date();
    for (var k=0;k<1000;k++) {
        derp(input);
    }
    console.log('result: ' + new Date().getTime() - d.getTime() + 'ms');

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T18:04:39.670

如果你想测量和分析这个脚本，你只需要增加你的 javascript 知识（至少一点点）。

那么你可以使用 benchmark.js 之类的[基准](http://benchmarkjs.com/)测试工具。您可以在浏览器或 node.js 中使用它。

jsperf.com 使用 benchmark.js。你可以在那里设置一个测试用例，应该在几分钟内完成。它通常旨在比较 2 个脚本，但您可以将脚本放入两个测试中，然后您就有了第一个迹象

# python - 框架上的 wxPython 背景图像

> ID：13789636
> 
> 赞同：3
> 
> 时间：2012-12-09T17:10:31.470
> 
> 标签：python, graphics, bitmap, python-2.7, wxpython

MMGP 已回答但不会让我相信他 ;-) 所以我至少会在这里提到他。（我终于得到了信任他...... 8-）

[他](http://wiki.wxpython.org/DoubleBufferedDrawing)关于双缓冲的链接讨论提供了一个基本代码，可以进行以下修改：

从第 106 行开始插入（覆盖现有代码，直到到达此处显示的最后一行）：

```
 # Here's the actual drawing code.
    cliWidth, cliHeight = self.GetClientSize()
    bmp=wx.Bitmap("Logo16x9.png")
    bmpWide = bmp.GetWidth()
    bmpHeight = bmp.GetHeight()
    img = bmp.ConvertToImage()
    scaleFactor = cliWidth/bmpWide
    bmp = wx.BitmapFromImage(img.Scale(int(bmpWide * scaleFactor), int(bmpHeight * scaleFactor)))
    bmpWide = bmp.GetWidth()
    bmpHeight = bmp.GetHeight()
    xPos = (cliWidth - (bmpWide))/2
    yPos = (cliHeight - (bmpHeight))/2
    # altered by me
    dc.DrawBitmap(bmp, xPos, yPos)

class TestFrame(wx.Frame): 
```

我整天都在反对这个。

我是使用 wxPython 模块绘制图形的新手，当我需要在框架上绘制背景图像时，我发现如果图像是窗口的完整大小，[这段代码效果很好。](http://www.blog.pythonlibrary.org/2010/03/18/wxpython-putting-a-background-image-on-a-panel/)

但是，我需要将公司徽标作为背景，并通过调整大小使其保持居中。在当前的形式中，调整大小会导致一个小国家大小的图形工件随着任何调整大小事件出现在屏幕上。

徽标图像文件（用于代码的第 43 行）是 400x300 (WxH) 图像。

我正在寻找一种方法：即时调整我的图像大小以匹配 wx.GetClientSize()，或者一种避免/删除工件的方法。最好不涉及 PIL 或 ImageMagick。应用程序必须仅在本地级别上运行，并且与系统无关（Win、Lin 和 Mac），这些都不涉及网络活动或映射驱动器。

Python 2.7 和 wxPython 2.8

我正在使用的代码（带有我的修改注释）如下：

```
import wx

########################################################################
class MainPanel(wx.Panel):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, parent):
        """Constructor"""
        wx.Panel.__init__(self, parent=parent)
        self.SetBackgroundStyle(wx.BG_STYLE_CUSTOM)
        self.frame = parent

        sizer = wx.BoxSizer(wx.VERTICAL)
        hSizer = wx.BoxSizer(wx.HORIZONTAL)

        for num in range(4):
            label = "Button %s" % num
            btn = wx.Button(self, label=label)
            sizer.Add(btn, 0, wx.ALL, 5)
        hSizer.Add((1,1), 1, wx.EXPAND)
        hSizer.Add(sizer, 0, wx.TOP, 100)
        hSizer.Add((1,1), 0, wx.ALL, 75)
        self.SetSizer(hSizer)
        self.Bind(wx.EVT_ERASE_BACKGROUND, self.OnEraseBackground)

    #----------------------------------------------------------------------
    def OnEraseBackground(self, evt):
        """
        Add a picture to the background
        """
        # yanked from ColourDB.py
        dc = evt.GetDC()
        # Added by me
        cliWidth, cliHeight = self.GetClientSize()

        if not dc:
            dc = wx.ClientDC(self)
            rect = self.GetUpdateRegion().GetBox()
            dc.SetClippingRect(rect)
        dc.Clear()
        # use a 400x300 image
        bmp = wx.Bitmap("Logo4x3.png")
        # added by me
        xPos = (cliWidth - 400)/2
        yPos = (cliHeight - 300)/2
        # altered by me
        dc.DrawBitmap(bmp, xPos, yPos)
        #dc.DrawBitmap(bmp, 0, 0)

########################################################################
class MainFrame(wx.Frame):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Frame.__init__(self, None, size=(600,450))
        panel = MainPanel(self)        
        self.Center()

########################################################################
class Main(wx.App):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, redirect=False, filename=None):
        """Constructor"""
        wx.App.__init__(self, redirect, filename)
        dlg = MainFrame()
        dlg.Show()

#----------------------------------------------------------------------
if __name__ == "__main__":
    app = Main()
    app.MainLoop() 
```

更新：最新失败 - 修改第 37 至 52 行

```
if not dc:
    dc = wx.ClientDC(self)
    rect = self.GetUpdateRegion().GetBox()
    dc.SetClippingRect(rect)
dc.Clear()
# use a 400x300 image
bmp = wx.Bitmap("Logo4x3.png")
img = bmp.ConvertToImage()
scaleFactor = cliWidth/400
bmp = wx.BitmapFromImage(img.Scale(int(400*scaleFactor),int(300*scaleFactor)))
# added by me
#xPos = (cliWidth - 400)/2
#yPos = (cliHeight - 300)/2
# altered by me
#dc.DrawBitmap(bmp, xPos, yPos)
dc.DrawBitmap(bmp, 0, 0) 
```

又一次尝试，又一次失败。输出到屏幕上没有区别。此外，有关双缓冲的参考文档并未解决此问题，但确实遭受了相同的结果。此代码修改了原始代码的第 36 行到第 57 行。

```
brsh = wx.Brush('#000000')

if not dc:
    dc = wx.ClientDC(self)
    rect = self.GetUpdateRegion().GetBox()
    dc.SetClippingRect(rect)
dc.SetBackground(brsh)
dc.SetDeviceOrigin(0,0)
dc.DestroyClippingRegion()
dc.Clear()
# use a 400x300 image
bmp = wx.Bitmap("Logo4x3.png")
img = bmp.ConvertToImage()
scaleFactor = cliWidth/400
bmp = wx.BitmapFromImage(img.Scale(int(400*scaleFactor),int(300*scaleFactor)))
# added by me
#xPos = (cliWidth - 400)/2
#yPos = (cliHeight - 300)/2
# altered by me
#dc.DrawBitmap(bmp, xPos, yPos)
dc.DrawBitmap(bmp, 0, 0) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T00:10:17.593

从我建议使用双缓冲绘图的评论中，但我在编辑后的帖子中没有看到。此外，我在`self.SetBackgroundStyle(wx.BG_STYLE_CUSTOM)`使用时遇到了几个绘图问题。但是这条线可能对我以外的其他系统有帮助，所以我想保留它。因此，为了处理这种情况，这里有一个更新的代码，它使用双缓冲绘图并且在这里可以正常工作：

```
import wx

class MainPanel(wx.Panel):
    def __init__(self, parent, bg_img='Logo4x3.png'):
        wx.Panel.__init__(self, parent=parent)
        self.SetBackgroundStyle(wx.BG_STYLE_CUSTOM)
        self.bg = wx.Bitmap(bg_img)
        self._width, self._height = self.bg.GetSize()

        sizer = wx.BoxSizer(wx.VERTICAL)
        hSizer = wx.BoxSizer(wx.HORIZONTAL)

        for num in range(4):
            btn = wx.Button(self, label="Button %s" % num)
            sizer.Add(btn, 0, wx.ALL, 5)
        hSizer.Add((1,1), 1, wx.EXPAND)
        hSizer.Add(sizer, 0, wx.TOP, 100)
        hSizer.Add((1,1), 0, wx.ALL, 75)
        self.SetSizer(hSizer)
        self.Bind(wx.EVT_SIZE, self.OnSize)
        self.Bind(wx.EVT_PAINT, self.OnPaint)
        self.Bind(wx.EVT_ERASE_BACKGROUND, self.OnEraseBackground)

    def OnSize(self, size):
        self.Layout()
        self.Refresh()

    def OnEraseBackground(self, evt):
        pass

    def OnPaint(self, evt):
        dc = wx.BufferedPaintDC(self)
        self.Draw(dc)

    def Draw(self, dc):
        cliWidth, cliHeight = self.GetClientSize()
        if not cliWidth or not cliHeight:
            return
        dc.Clear()
        xPos = (cliWidth - self._width)/2
        yPos = (cliHeight - self._height)/2
        dc.DrawBitmap(self.bg, xPos, yPos)

app = wx.App()
frame = wx.Frame(None, size=(400,300))
panel = MainPanel(frame)
frame.Show()
app.MainLoop() 
```

该方法`OnEraseBackground`故意为空。

# java - 2 线程“主”java.lang.OutOfMemoryError 中的异常：Java 堆空间

> ID：13789637
> 
> 赞同：0
> 
> 时间：2012-12-09T17:10:33.263
> 
> 标签：java, memory, main

有人可以帮我解决这个问题吗？代码： http: [//pastebin.com/nDG7YGk5](http://pastebin.com/nDG7YGk5)

完整的错误：线程“main”中的异常 java.lang.OutOfMemoryError: Java 堆空间 at Stack.push(Stack.java:16) at hanukkah.input(hanukkah.java:42) at hanukkah.main(hanukkah.java: 50)

我没有使用虚拟机，只是eclipse。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T17:13:00.150

这是一个无限循环：

```
 while(n!=0)
 s.push(n); 
```

`n`当您将其推送到堆栈时，它的值不会改变。所以它永远不会等于 0。您可能的意思是作为一个`if`语句（以确保用户没有输入 0），或者在扫描仪周围放置 while 循环，以便他们可以继续输入数字，直到它们不等于0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:14:00.927

我认为您打算执行以下操作：

```
int n = Integer.MAX_VALUE;
while (n != 0) {
   n = reader.nextInt();
   s.push(n);
} 
```

# php - 使用 PHP 文件导出 PHP 代码

> ID：13789640
> 
> 赞同：1
> 
> 时间：2012-12-09T17:10:53.613
> 
> 标签：php, export

我实际上需要使用 PHP 脚本或 PHP 命令生成一个 .PHP 文件。文件生成将包含以下代码：

```
<?php
class TextToSpeech {
    public $mp3data;
    function __construct($text="") {
        $text = trim($text);
        if(!empty($text)) {
            $text = urlencode($text);
            $lang_en="http://translate.google.com/translate_tts?tl=en&q={$text}";
            $lang_ro="http://translate.google.com/translate_tts?tl=ro&q={$text}";
            $lang_fr="http://translate.google.com/translate_tts?tl=fr&q={$text}";
            $language=$lang_en;
            $this->mp3data = file_get_contents($language);
        }
    }

    function setText($text) {
        $text = trim($text);
        if(!empty($text)) {
            $text = urlencode($text);
            $en="http://translate.google.com/translate_tts?tl=en&q={$text}";
            $ro="http://translate.google.com/translate_tts?tl=ro&q={$text}";
            $fr="http://translate.google.com/translate_tts?tl=fr&q={$text}";
            $lang=$en;
            $this->mp3data = file_get_contents($lang);
            return  $this->mp3data;
        } else { return false; }
    }

    function saveToFile($filename) {
        $filename = trim($filename);
        if(!empty($filename)) {
            return file_put_contents($filename,$this->mp3data);
        } else { return false; }
    }
}
?> 
```

我想这样做是因为我想对语言有多种选择：

```
$language=$lang_en; 
```

和

```
$lang=$en; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:12:12.537

不知道你的问题是什么。生成 PHP 文件与生成任何其他类型的文件没有什么不同。构建您要编写的源代码字符串，然后一个简单的`file_put_contents('filename.php', $contents);`就可以了。

**编辑**：`$en`从哪里来`$lang_en`？另外，这些不能作为参数传递给函数吗？为什么必须对它们进行硬编码？

```
$contents = '
<?php
   // your PHP here

';

file_put_contents('filename.php', $contents); 
```

您可能还想阅读 heredocs 上的大块文本，但不幸的是，除非您用反斜杠将它们全部转义，否则这些将替换您的变量。

# php - PHP - 数组结果

> ID：13789641
> 
> 赞同：0
> 
> 时间：2012-12-09T17:10:58.310
> 
> 标签：php, arrays

我对数组有一个大问题，我想按键分组（或者我现在不想：（）

我从 mySQL 获取链接，然后执行以下操作：

```
$lien2 = $links2['text'];
$lien2 = stripslashes($lien2);
$lien2 = htmlspecialchars($lien2);
$lien2 = nl2br($lien2);
preg_match_all('#http://.*?\.?([a-zA-Z0-9\-]+)(\.[a-zA-Z0-9]+)/[a-zA-Z0-9\/\*\-\?\&\%\=\,\.\;\#\_]+#i', $lien2, $lien2_result, PREG_SET_ORDER); 
```

这是数组 $lien2_result：

```
 Array
(
    [0] => Array
        (
            [0] => links1
            [1] => A
        )

    [1] => Array
        (
            [0] => links2
            [1] => B
        )

)
Array
(
    [0] => Array
        (
            [0] => links3
            [1] => C
        )

)
Array
(
    [0] => Array
        (
            [0] => links4
            [1] => B
        )

)
Array
(
    [0] => Array
        (
            [0] => links5
            [1] => D
        )

)
Array
(
    [0] => Array
        (
            [0] => links6
            [1] => E
        )

) 
```

我想得到以下结果：

```
A
links1
B
links2
links4
C
links3
D
links5
E
links6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:31:29.880

我会亲自调整查询，但如果你被这个结果集困住，你可以用

```
foreach($lien2_result as $lien2){
    foreach($lien2 as $item){
        $arr[$item[1]][] = $item[0];
    }
} 
```

其中 print_r($arr) 会产生如下结果：

```
$arr = Array('A' => Array('links1'), 'B' => Array('links2','links4')); //and so on.. 
```

并按照您要求的方式实际打印：

```
foreach($arr as $name => $value){
    echo($name.'<br />');
    foreach($value as $item){
        echo($item.'<br />');
    }
} 
```

**编辑**

这是一个示例 [http://sandbox.onlinephpfunctions.com/code/c0da893797cb2049e8346168b280a9f5b1fa145b](http://sandbox.onlinephpfunctions.com/code/c0da893797cb2049e8346168b280a9f5b1fa145b)

# c++ - 在 C++ 中安全地发送数据？

> ID：13789646
> 
> 赞同：0
> 
> 时间：2012-12-09T17:11:18.380
> 
> 标签：c++, security, boost, openssl, cryengine

有人可以就我的问题给我一些指导吗 - 我正在编写一个游戏（CryEngine），我需要知道如何将数据 - 包括用户名和密码发送到服务器，在那里它们可以存储在数据库中并显示在显示的网页上球员“统计”。我想从用户名和密码开始，因为它们是我正确的最重要的，其他的东西真的不需要加密。虽然，这可能会让黑客更难改变他们的统计数据。

那么我将如何处理呢？我知道我在 C++ 周围的方式，并且我已经使用了一段时间，我已经构建了一个系统来存储和捕获玩家的杀戮和 XP 等，但这一点听起来更棘手。听起来我将大量使用 BOOST 和可能的 OpenSSL，但之前从未使用过这些库或必须制作安全系统，我有点困惑。非常感谢任何帮助或一般指示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T17:16:32.390

Open SSL 听起来很可靠，请看这里：[http](http://www.ibm.com/developerworks/linux/library/l-openssl/index.html) ://www.ibm.com/developerworks/linux/library/l-openssl/index.html 。

您可以为此使用几乎所有加密库（最好不要编写自己的东西），但由于它无论如何都是客户端/服务器，因此使用旨在完成此任务的协议/系统，您最好的选择是 openSSL。其余的是一个安全的服务器，上面运行着某种应用程序（Java EE）并处理某种数据库中的条目。然后选择您喜欢的一些网络语言来检索数据库条目。

PS：不要现场直播（例如，每个爆头都是一个条目），而是传输一轮的最终结果，或者每 X 分钟一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:38:38.240

我建议使用 HTTPS。

链接`libcurl`并使用来自网络的一些食谱示例，您可以在几分钟或几小时内准备好您的客户部分。如果您是新手，手动摆弄 OpenSSL 可能需要几天或几周的时间。

对于服务器部分，您可以使用游戏现有的网络服务器。你的游戏*会有*一个网站，不是吗？用户也可以通过他们的网络浏览器访问他们的统计数据。

如果您想保护分数更新机制，请使用常规密码学 API`crypt`和隐藏在代码中的密钥来混淆/反混淆玩家的分数更新密码。这是混淆，而不是加密，因为密钥最终驻留在客户端计算机上，并且可以通过调试器恢复。

# asp.net-mvc - 为所有 ActionResult 添加压缩而不添加属性

> ID：13789655
> 
> 赞同：2
> 
> 时间：2012-12-09T17:12:58.863
> 
> 标签：asp.net-mvc

我的应用程序中有太多的**ActionResult**，我想为它们添加 gzip 压缩。

**是否有任何解决方案可以避免向所有ActionResult**添加属性？
比如继承什么的？

这是我的压缩代码：

```
public class CompressFilter : ActionFilterAttribute
{
    public override void OnActionExecuting(FilterExecutingContext filterContext)
    {
        HttpRequestBase request = filterContext.HttpContext.Request;

        string acceptEncoding = request.Headers["Accept-Encoding"];

        if (string.IsNullOrEmpty(acceptEncoding)) return;

        acceptEncoding = acceptEncoding.ToUpperInvariant();

        HttpResponseBase response = filterContext.HttpContext.Response;

        if (acceptEncoding.Contains("GZIP"))
        {
            response.AppendHeader("Content-encoding", "gzip");
            response.Filter = new GZipStream(response.Filter, CompressionMode.Compress);
        }
        else if (acceptEncoding.Contains("DEFLATE"))
        {
            response.AppendHeader("Content-encoding", "deflate");
            response.Filter = new DeflateStream(response.Filter, CompressionMode.Compress);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:31:22.070

您可能应该在 web.config 文件中为所有有意义的内容类型配置 gzip 压缩。有一个内置的 HTTP 模块。

该`response.Filter`方法不是在 ASP.NET 中进行 HTTP 压缩的最佳实践。压缩是为您处理的基础架构问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:34:47.187

是的，在 MVC 3+ 中 - 将动作过滤器添加到全局动作过滤器。在 Global.asax.cs 或 FilterConfig.cs（取决于您的项目的布局方式）中，只需在 RegisterGlobalFilters 方法中添加过滤器。

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new HandleErrorAttribute());
    filters.Add(new CompressFilter());
} 
```

# vb.net - 取消共享 VB.net 中 webbrowser 控件的会话或 Cookie

> ID：13789658
> 
> 赞同：-1
> 
> 时间：2012-12-09T17:13:06.503
> 
> 标签：vb.net, webkit, webbrowser-control, session-cookies

我的程序上有多个网络浏览器控件，并且它们都共享会话 cookie。我想要的是他们不共享会话 cookie。

我有不同的网络浏览器控件，可以使用不同的帐户打开同一个网站，或者打开在会话中存储不同数据的同一个网页。

有人有什么想法吗？

注意：这个问题已经由@Haroldis 发布，[链接旧](https://stackoverflow.com/questions/7969630/un-share-session-cookies-of-webbrowser-control?s=d893a32f-9b66-416c-8a29-ea23813de18c#new-answer)问题希望现在他已经找到了解决方案，因为我也遇到了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:06:15.803

如您链接的答案中所述，标准的 .net Web 浏览器控件无法做到这一点。如果您确实需要在浏览器中向用户显示页面（而不仅仅是发送或接收数据，在这种情况下，网络请求就是您的答案），那么您可以通过第三方软件进行一些选择。

1 是 WaTin，它允许您启动和控制单独的浏览器实例，并且可以选择不共享 cookie。

另一种选择是 awesomium，它有一个 .net 包装器，并且从 v1.7 开始就可以运行独立的实例，尽管我没有对其进行大量测试。

# feature-selection - 互信息和卡方关系

> ID：13789660
> 
> 赞同：4
> 
> 时间：2012-12-09T17:13:09.690
> 
> 标签：feature-selection, chi-squared

我使用以下代码来计算情绪分析中特征选择的互信息和卡方值。

```
MI = (N11/N)*math.log((N*N11)/((N11+N10)*(N11+N01)),2) + (N01/N)*math.log((N*N01)/((N01+N00)*(N11+N01)),2) + (N10/N)*math.log((N*N10)/((N10+N11)*(N00+N10)),2) + (N00/N)*math.log((N*N00)/((N10+N00)*(N01+N00)),2) 
```

其中 N11,N01,N10 和 N00 是我的数据集中两个特征的观察频率。

注意：我正在尝试计算 2 个特征之间的互信息和卡方值，而不是特定特征和类之间的互信息。我这样做是为了知道这两个功能是否以任何方式相关。

我使用的卡方公式是：

```
E00 = N*((N00+N10)/N)*((N00+N01)/N)
E01 = N*((N01+N11)/N)*((N01+N00)/N)
E10 = N*((N10+N11)/N)*((N10+N00)/N)
E11 = N*((N11+N10)/N)*((N11+N01)/N)

chi = ((N11-E11)**2)/E11 + ((N00-E00)**2)/E00 + ((N01-E01)**2)/E01 + ((N10-E10)**2)/E10 
```

其中 E00,E01,E10,E11 是预期频率。

根据互信息的定义，低值应该意味着一个特征没有给我关于另一个的信息，根据卡方的定义，卡方的低值意味着两个特征必须是独立的。

但是对于某些两个特征，我得到了 0.00416 的互信息分数和 4373.9 的卡方值。这对我来说没有意义，因为互信息分数表明这些特征并不密切相关，但卡方值似乎足够高，表明它们也不是独立的。我想我的解释有问题

我为观察到的频率得到的值是

```
N00 = 312412
N01 = 276116
N10 = 51120
N11 = 68846 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-26T12:56:30.830

MI 和 Pearson 的大样本统计量在有关样本量的通常条件下是成正比的。这是众所周知的。这里给出了 S 证明。

Morris, AC (2002) “序列识别性能的信息论测量”。可以从这个页面下载。

[https://sites.google.com/site/andrewcameronmorris/Home/publications](https://sites.google.com/site/andrewcameronmorris/Home/publications)

因此，除非您的计算中有错误，否则如果一个是高/低，另一个必须是高/低。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-07T22:40:57.213

卡方独立性检验检查原始计数，而互信息分数仅检查边际和联合概率分布。因此，卡方还考虑了样本量。

如果 x 和 y 之间的依赖关系非常微妙，那么了解其中一个对于预测另一个并没有多大帮助。然而，随着数据集大小的增加，我们可以越来越确信存在某种关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-27T09:40:07.530

您可以尝试[https://github.com/ranmoshe/Inference](https://github.com/ranmoshe/Inference) - 它使用卡方计算 MI 和 p 值统计量。

它还知道计算每个特征的自由度，包括考虑一个条件组（其中一个特征的自由度在不同的值之间可能不同）

# php - 在写入时获取行的 ID - mysqli

> ID：13789664
> 
> 赞同：1
> 
> 时间：2012-12-09T17:13:47.477
> 
> 标签：php, mysqli

这可以在单个查询中完成吗？该表有一个自动增量字段，我需要知道填写表中 url 字段的数字。

```
Table 
id(AI) | title | url 
```

我期待的是 `INSERT INTO table (title,url) VALUES ('name','CONCATENATION OF title AND ID');`

我目前正在使用 2 个查询来执行此操作。

1.编写除URL以外的字段。使用获取 id`mysqli_insert_id()`

2.更新上面写的行。

PS：该表还有其他字段，因此在这种情况下更改数据库设计实际上是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:15:12.343

它不能以原子方式完成。理论上，您可以`SELECT MAX(id) + 1 FROM yourtable`，但请不要 - 尽管这不能保证给您正确的结果，也绝对不是一种安全的方法。

无论如何，这似乎是不好的做法。为什么在获取时不连接标题和 ID？为什么必须在插入时连接它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T20:19:27.990

我不会评论你的数据库的设计——你是评判者。请记住，以下命令获取指定表的下一个自动增量 ID，并且如果其他用户在您的代码可以使用该表之前访问该表，则此数字可能会立即更改。

我自己在一个项目中使用此代码的原因与您自己的原因相似，它对我有用，因为该表每天仅更新几次，并且一次不会超过一个人。

```
 SELECT Auto_increment FROM information_schema.tables WHERE 
 table_name = '$name_of_your_table'; 
```

为了清楚起见，此代码获取将提供给指定表的下一个表条目的自动增量 ID。

# android - Android Sqlite 单例数据库文件流更新失败

> ID：13789669
> 
> 赞同：9
> 
> 时间：2012-12-09T17:14:22.787
> 
> 标签：android, sqlite

我有一个使用 sqlite db 的应用程序，在第一次安装时我检查是否存在数据库文件夹或 db 文件如果不调用 updateDB 函数。但在某些情况下，例如 Galaxy Note 10.1 它给了我错误。

负载 ;

```
 this.dhn = DataHelper.getDataHelper(this);

    File directory = new File(Environment.getDataDirectory() + File.separator + "data" + File.separator + "XXX" + File.separator + "databases");
    if(!directory.exists())
    {
        directory.mkdirs();
        updateDB();
    }

    try {
        androidCheckout = this.dhn.Guid();

        if(this.dhn.getSettings("dbVersion") == null || Integer.parseInt(this.dhn.getSettings("dbVersion")) != Version || !this.dhn.isTableExists("UserInfo"))
        {
            updateDB(); 
        }
    }
    catch (SQLiteException e)
    {               
    try {
            updateDB();
            androidCheckout = this.dhn.Guid();
        }
    catch (SQLiteException e11)
        {   
            ManuelYukle();
        }

    }

  public void updateDB()
    {
      this.dhn.close();

        try {
            InputStream myInput;

                myInput = getAssets().open("XXX.db");

            // Path to the just created empty db
            String outFileName = "/data/data/XXX/databases/"
                    + "XXX.db";

            // Open the empty db as the output stream
            FileOutputStream myOutput = new FileOutputStream(outFileName);

            // transfer bytes from the inputfile to the outputfile
            byte[] buffer = new byte[1024];
            int length;
            while ((length = myInput.read(buffer)) > 0) {
                myOutput.write(buffer, 0, length);
            }

            myOutput.flush();
            myOutput.close();
            myInput.close();
            buffer = null;
            outFileName = null;
            this.dhn.close();
            this.dhn = null;
            this.dhn = DataHelper.getDataHelper(this); <<<<<<<< HERE IT CRUSHS
        } catch (IOException e1) {
            e1.printStackTrace();
        }
    } 
```

DBHELPER 课程 >

```
 private static DataHelper singleton;

    public static DataHelper getDataHelper(Context context) {
            if (singleton == null) {
                    singleton = new DataHelper(context);
                    OpenHelper openHelper = new OpenHelper(singleton.context);
                    singleton.db = openHelper.getWritableDatabase();
            }
            if(!singleton.db.isOpen()){
                    OpenHelper openHelper = new OpenHelper(singleton.context);
                    singleton.db = openHelper.getWritableDatabase();
            }
            singleton.context = context;
            return singleton;
    }

    private DataHelper(Context context) {
        this.context = context;
} 
```

错误日志文件 >

```
12-09 19:11:15.772: I/SqliteDatabaseCpp(6271): sqlite returned: error code = 11, msg = database corruption at line 48171 of [ed759d5a9e], db=/data/data/XXX/databases/XXX_db
12-09 19:11:15.772: I/SqliteDatabaseCpp(6271): sqlite returned: error code = 11, msg = database disk image is malformed, db=/data/data/XXX/databases/XXX_db
12-09 19:11:15.772: E/SqliteDatabaseCpp(6271): sqlite3_exec - Failed to set synchronous mode = 1(Normal) 
12-09 19:11:15.772: I/SqliteDatabaseCpp(6271): sqlite returned: error code = 11, msg = database corruption at line 48171 of [ed759d5a9e], db=/data/data/XXX/databases/XXX_db
12-09 19:11:15.772: I/SqliteDatabaseCpp(6271): sqlite returned: error code = 11, msg = database disk image is malformed, db=/data/data/XXX/databases/XXX_db
12-09 19:11:15.772: E/SqliteDatabaseCpp(6271): CREATE TABLE android_metadata failed
12-09 19:11:15.777: E/DefaultDatabaseErrorHandler(6271): Corruption reported by sqlite on database: /data/data/XXX/databases/XXX.db
12-09 19:11:15.782: E/DefaultDatabaseErrorHandler(6271): deleting the database file: /data/data/XXX/databases/XXX.db 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-03T04:09:24.130

`database disk image is malformed`我在更新自身时尝试访问数据库时遇到了同样的问题。所以，我按照下面的方式。

1.  `DataBaseHelper`

    ```
    import java.io.File;
    import java.io.FileOutputStream;
    import java.io.IOException;
    import java.io.InputStream;
    import java.io.OutputStream;
    import android.content.Context;
    import android.database.SQLException;
    import android.database.sqlite.SQLiteDatabase;
    import android.database.sqlite.SQLiteException;
    import android.database.sqlite.SQLiteOpenHelper;
    import android.util.Log;

    public class DataBaseHelper extends SQLiteOpenHelper {

            private static final String TAG = DataBaseHelper.class.getSimpleName();
            private static String DB_PATH = "/data/data/YOUR_PACKAGE/databases/";
            private static String DB_NAME = "XXX";
            private SQLiteDatabase mDataBase;
            private final Context mContext;

            public DataBaseHelper(Context context) {
                super(context, DB_NAME, null, 1);
                DB_PATH = "/data/data/" + context.getPackageName() + "/databases/";
                this.mContext = context;
            }

            public void createDataBase() throws IOException {
                boolean mDataBaseExist = checkDataBase();
                if (!mDataBaseExist) {
                    this.getReadableDatabase();
                    try {
                        copyDataBase();
                    } catch (IOException mIOException) {
                        throw new Error("ErrorCopyingDataBase");
                    }
                }
            }

        private boolean checkDataBase() {
            SQLiteDatabase mCheckDataBase = null;
            try {
                String mPath = DB_PATH + DB_NAME;
                File pathFile = new File(mPath);
                if(pathFile.exists()) {
                    mCheckDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS);
                }
            } catch (SQLiteException mSQLiteException) {
                Log.e(TAG, "DatabaseNotFound " + mSQLiteException.toString());
            }

            if (mCheckDataBase != null) {
                mCheckDataBase.close();
            }
            return mCheckDataBase != null;
        }

        private void copyDataBase() throws IOException {
            final InputStream mInput = mContext.getAssets().open(DB_NAME);
            final String outFileName = DB_PATH + DB_NAME;
            OutputStream mOutput = new FileOutputStream(outFileName);
            byte[] mBuffer = new byte[1024];
            int mLength;
            while ((mLength = mInput.read(mBuffer)) > 0) {
                mOutput.write(mBuffer, 0, mLength);
            }
            mOutput.flush();
            mOutput.close();
            mInput.close();
        }

        public boolean openDataBase() throws SQLException {
            final String mPath = DB_PATH + DB_NAME;
            mDataBase = SQLiteDatabase.openDatabase(mPath, null,
            SQLiteDatabase.NO_LOCALIZED_COLLATORS);
            return mDataBase != null;
        }

        @Override
        public synchronized void close() {
            if (mDataBase != null)
                mDataBase.close();
            super.close();
        }

        @Override
        public void onCreate(SQLiteDatabase db) {}

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {}
    } 
    ```

2.  `DBAdapter`

    ```
    public class DBAdapter {

        private static final String TAG = DBAdapter.class.getSimpleName();
        private final Context mContext;
        private SQLiteDatabase mDb;
        private final DataBaseHelper mDbHelper;

        public DBAdapter(Context context) {
            this.mContext = context;
            mDbHelper = new DataBaseHelper(mContext);
        }

        public DBAdapter createDatabase() throws SQLException {
            try {
                mDbHelper.createDataBase();
            } catch (IOException mIOException) {
                throw new Error("UnableToCreateDatabase");
            }
            return this;
        }

        public DBAdapter open() throws SQLException {
            try {
                mDbHelper.openDataBase();
                mDbHelper.close();
                mDb = mDbHelper.getReadableDatabase();
            } catch (SQLException mSQLException) {
                Log.e(TAG, mSQLException.toString());
                throw mSQLException;
            }
            return this;
        }

        public void close() {
            mDbHelper.close();
        }
    } 
    ```

3.  `Abhan`扩展应用类

    ```
    public class Abhan extends Application {

        public static final String TAG = Abhan.class.getSimpleName();
        public static final boolean DEBUG = true;
        private int androidVersion = 4;
        private DBAdapter dbAdapter = null;

        @Override
        public void onCreate() {
            super.onCreate();
            setAndroidVersion(android.os.Build.VERSION.SDK_INT);

            if(dbAdapter == null) {
                dbAdapter = new DBAdapter(getBaseContext());
                dbAdapter.createDatabase();
            }
        }

        public int getAndroidVersion() {
            return androidVersion;
        }

        public void setAndroidVersion(int androidVersion) {
            this.androidVersion = androidVersion;
        }

        public DBAdapter getDBInstatnce() {
            dbAdapter.open();
            return dbAdapter;
        }

        public void closeDataBase() {
            dbAdapter.close();
            if(DEBUG) {
                android.util.Log.d(TAG, "DataBase closed.");
            }
        }
    } 
    ```

4.  在你的`AndroidManifest`, 声明`Abhan`

    ```
    <application
        android:name=".Abhan"
        android:allowBackup="false"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" > 
    ```

5.  在 Your中，使用Class`Activity`访问您的数据库`Application`

    ```
    private Abhan abhan; 
    ```

在`onCreate`

```
 abhan = (Abhan) this.getApplication(); 
```

现在像这样访问您的数据库事务方法。

```
 int currentDay = abhan.getDBInstatnce().getCurrentDay(); 
```

在这里，`abhan.getDBInstatnce()`返回您的`Database`实例，它是整个应用程序中的单个实例，并且`getCurrentDay()`是我的方法，在`DBAdpater`其中声明返回当前日期。

我希望这个可以解决你的问题。谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T06:51:26.763

我在使用预填充数据库时遇到了类似的问题。我就是这样解决的。

问题出在 sqlite 数据库中，我认为这是 sqlite3 旧版本中的错误，也许是 3.6 之前的版本。我所做的是，我用[sqlite3 v3.7.11](http://www.sqlite.org/download.html)重新创建了数据库 ，它就像一个魅力 - 而且，不要忘记创建[android_metadata 表](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

那时它对我有用，我希望这会对你有所帮助。

# python - 日志文件名的参数无效

> ID：13789671
> 
> 赞同：1
> 
> 时间：2012-12-09T17:14:26.537
> 
> 标签：python

这是我尝试做的事情，我使用 Windows 和 Python 3.3

```
LOG_FILENAME = 'log_trial_%s.txt' % datetime.datetime.now().strftime('%m%d-%H:%M:%S')
log_fd = open(LOG_FILENAME, 'w')
log_fd.write('===================\n') 
```

上面的代码当然是模块的一部分，当我运行模块时，我收到如下错误消息：

```
log_fd = open(LOG_FILENAME, 'w')
OSError: [Errno 22] Invalid argument: 'log_trial_1209-11:39:40.txt' 
```

我不知道长长的奇怪日志名称是什么意思（'log_trial_%s.txt' ...）以及如何修复错误。

我将感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-09T17:17:00.457

Windows 文件名中不能有冒号。

试试这个：

```
LOG_FILENAME = 'log_trial_%s.txt' % datetime.datetime.now().strftime('%m%d-%H%M%S') 
```

# ruby-on-rails - 用污损覆盖 Spree 中的视图：如何添加输入及其当前值？

> ID：13789672
> 
> 赞同：3
> 
> 时间：2012-12-09T17:14:33.730
> 
> 标签：ruby-on-rails, spree, deface

我正在尝试向其中一个 Spree 管理视图中已经存在的表单添加输入。这是覆盖文本（我剪掉了一些以显示为中心且嘈杂的杂乱无章）：

```
new_html = "
  <div id='neato_new_field'>
    <p id='product_display_value'>
      <label for='display_value'>Display Value</label>
      <br>
      <input type='text' name='product[display_value]' size='30' id='product_display_value' value=''>
    </p>
  </div>"

Deface::Override.new(:virtual_path  => "spree/admin/products/_form",
                     :insert_after => "div.clearfix",
                     :text          => new_html,
                     :name          => "add_display_value") 
```

我需要知道如何做的是在输入上设置“value”属性的值，以便在呈现此视图时获取该对象上当前的内容。

我尝试将 value='#{@product.display_value}' 放在那里，但它抱怨@product 为零。我什至可以使用这样的插值来获取 display_value 吗？这种污损是在控制器尝试渲染之前还是之后完成的？

我现在想知道如何解决这个问题。我是否必须从已经存在的 html 中删除产品 ID，使用它来加载产品，然后将那个值放在那里？我真的希望我错过了一些基本的东西，这使得解决这个问题变得微不足道：P 很多 Spree 定制都是这种情况——一开始不清楚如何做，但一旦我弄清楚了出来，很容易实现我的自定义......

谢谢，jd

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T00:36:24.840

一旦我理解了答案，答案就相当简单了。

我没有将 :text => 用于一些随机的 html 标记，而是指出了一个部分，它因此获得了您在任何模板视图中获得的所有简洁行为——特别是范围内的变量。

最终解决方案如下所示：

```
Deface::Override.new(:virtual_path => "spree/admin/products/_form",
                     :insert_after => "div.clearfix",
                     :partial      => "partials/admin",
                     :name         => "add_display_value") 
```

和部分：

```
<div>
  <%= f.field_container :display_value do %>
    <%= f.label :display_value, t(:display_value) %>
    <br>
    <%= f.text_field :display_value, :size => 30, :value => @product.display_value %>
  <% end %>
<div> 
```

# c# - 图像裁剪失去质量 MVC3 .Net C# 应用程序

> ID：13789673
> 
> 赞同：1
> 
> 时间：2012-12-09T17:14:46.227
> 
> 标签：c#, asp.net, .net, asp.net-mvc, image-processing

我在 MVC3 C# 应用程序中裁剪图像时遇到问题。我正在裁剪图像，但在视图中渲染时它的质量会下降。要裁剪的图像是从数据库加载的，并且是从 ByteArray 像这样创建的......

```
public static Image ByteArrayToImage(byte[] byteArrayIn)
{
   MemoryStream ms = new MemoryStream(byteArrayIn);
   Image returnImage = Image.FromStream(ms);
   return returnImage;
} 
```

当此图像在视图上呈现时，它看起来很好并且与预期的质量不符。然后我选择要裁剪的区域并使用以下方法进行裁剪...

```
public Image CropImage(System.Drawing.Image Image, int Height, int Width, int StartAtX, int StartAtY)
        {
            Image outimage;
            MemoryStream mm = null;
            try
            {
                //check the image height against our desired image height
                if (Image.Height < Height)
                {
                    Height = Image.Height;
                }

                if (Image.Width < Width)
                {
                    Width = Image.Width;
                }

                //create a bitmap window for cropping
                Bitmap bmPhoto = new Bitmap(Width, Height, PixelFormat.Format24bppRgb);
                bmPhoto.SetResolution(Image.VerticalResolution,Image.HorizontalResolution);

                //create a new graphics object from our image and set properties
                Graphics grPhoto = Graphics.FromImage(bmPhoto);
                grPhoto.SmoothingMode = SmoothingMode.AntiAlias;
                grPhoto.InterpolationMode = InterpolationMode.HighQualityBicubic;
                grPhoto.PixelOffsetMode = PixelOffsetMode.HighQuality;

                //now do the crop
                grPhoto.DrawImage(Image, new Rectangle(0, 0, Width, Height), StartAtX, StartAtY, Width, Height, GraphicsUnit.Pixel);

                // Save out to memory and get an image from it to send back out the method.
                mm = new MemoryStream();
                bmPhoto.Save(mm, System.Drawing.Imaging.ImageFormat.Jpeg);
                Image.Dispose();
                bmPhoto.Dispose();
                grPhoto.Dispose();
                outimage = Image.FromStream(mm);

                return outimage;
            }
            catch (Exception ex)
            {
                throw new Exception("Error cropping image, the error was: " + ex.Message);
            }
        } 
```

然后将此裁剪的图像转换回 ByteArray 并可以像这样保存到数据库中......

```
public static byte[] ImageToByteArray(System.Drawing.Image imageIn)
{
    MemoryStream ms = new MemoryStream();
    imageIn.Save(ms, System.Drawing.Imaging.ImageFormat.Gif);
    return ms.ToArray();
} 
```

当此图像稍后在视图上渲染时，其质量比原始图像差很多。它看起来很像素化。在这种情况下，原始图像是 .jpg，但可以是任何格式。

这是从数据库加载并裁剪后的图像的图像...

![预裁剪图像](../Images/47f57473ed8cbd4d42bdf7017eb86e92.png)

此图像是裁剪的结果。如您所见，它并不好。

![在此处输入图像描述](../Images/65fab2cbbfc52570b20c37e4ac804402.png)

我看过一些关于该主题的其他帖子，但它们没有帮助。任何人都可以提出解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:46:27.620

这是一个很棒的博客，总结了这一切。我现在让它在我的应用程序中工作。[http://blog.tallan.com/2011/02/04/using-mvc3-razor-helpers-and-jcrop-to-upload-and-crop-images/](http://blog.tallan.com/2011/02/04/using-mvc3-razor-helpers-and-jcrop-to-upload-and-crop-images/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:26:40.470

Gunnar Peipman 有一篇关于质量的博文，称为[Resizing images without loss of quality](http://weblogs.asp.net/gunnarpeipman/archive/2009/04/02/resizing-images-without-loss-of-quality.aspx)。Gunnar 说了一些关于出了什么问题的技巧。

> 如果 Image 包含嵌入的缩略图图像，则此方法检索嵌入的缩略图并将其缩放到请求的大小。如果 Image 不包含嵌入的缩略图图像，则此方法通过缩放主图像来创建缩略图图像。
> 
> `GetThumbnailImage`当请求的缩略图图像的大小约为 120 x 120 像素时，该方法效果很好。如果您从具有嵌入式缩略图的图像中请求较大的缩略图图像（例如，300 x 300），则缩略图图像的质量可能会明显下降。通过调用 DrawImage 方法来缩放主图像（而不是缩放嵌入的缩略图）可能会更好。

razor 语法与[JCrop](http://deepliquid.com/content/Jcrop.html)友好，有一篇[很酷的博客文章](http://blog.tallan.com/2011/02/04/using-mvc3-razor-helpers-and-jcrop-to-upload-and-crop-images/)介绍了如何使用它。

![在此处输入图像描述](../Images/19c8282ab86b8cb8b2664d2420671370.png)

# sql - 更改 SQL 数据库的主键

> ID：13789679
> 
> 赞同：1
> 
> 时间：2012-12-09T17:15:26.603
> 
> 标签：sql, azure, azure-sql-database

我有一个使用 SQL Server 迁移助手从 MySql 迁移的数据库，它现在存储在 Azure 中。

SSMA 显然为其中一个表生成了一个名为 的新主键列`ssma$rowid`。我正在尝试将 PK 更改回 Card_Key，但出现以下错误：

> *应用更改时遇到错误。
> 执行 Transact-SQL 语句时发生异常：
> ALTER TABLE [carddb].[Cards] ALTER COLUMN [Card_Key] INT NOT NULL。
> 索引“Card_Key”取决于列“Card_Key”。
> ALTER TABLE ALTER COLUMN Card_Key 失败，因为一个或多个对象
> 访问此列。*

怎么才能`Card_Key`再次PK？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:35:32.040

最简单的可能是使用正确的主键创建一个新表 [cards2] 并将数据从 [cards] 复制到新表中（只需运行 INSERT INTO cards2 ... SELECT ... FROM 卡）。完成后，您可以删除（或重命名为 [cardsold] 以确保安全）原始表 [cards]，并将新表重命名为 [cards]： sp_rename cards2, cards

这应该有效。

# c# - 下拉列表 asp.net 无法正常工作

> ID：13789680
> 
> 赞同：1
> 
> 时间：2012-12-09T17:15:32.363
> 
> 标签：c#, asp.net, drop-down-menu, webforms

我有以下标记：

```
<asp:DropDownList ID="ddlTownships" DataTextField="Name" AutoPostBack="True" AppendDataBoundItems="True" DataValueField="Id" runat="server" OnSelectedIndexChanged="ddlTownships_SelectedIndexChanged">
                        <asp:ListItem Value="0" Text="Please select a township"></asp:ListItem>
                    </asp:DropDownList> 
```

这是背后的代码：

```
protected void ddlRegions_SelectedIndexChanged(object sender, EventArgs e)
        {
            var townshipDAO = (TownshipDAO)FactoryDAO.getInstance().getDAOByType(DAOEnum.Township);
            ddlTownships.DataSource = townshipDAO.getAllTownshipsByRegionId(Int64.Parse(ddlRegions.SelectedValue));
            ddlTownships.DataBind();
            liTownships.Visible = true;
            liSettlements.Visible = false;
            divPhasesConsole.Visible = false;
            liNumberOfStands.Visible = false;
            divFirstDelimiter.Visible = false;
        } 
```

基本上，每当用户从 ddlRegion 中选择一个项目时，我都会获得所有选择了 regionId 的乡镇并重新填充下拉列表。但是 ddlTownships 会记住先前选择的具有不同区域的乡镇。请注意，我有属性 AppendDataBoundItems="True" 因为这是我可以添加一个显示“请选择一个乡镇”的列表项的唯一方法。如何保留标记中定义的列表项，并防止在重新填充 ddl 后显示以前的项目。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:41:54.533

您可以从后面的代码中在特定索引处插入新的列表项。`AppendDataBoundItems`因此，您可以在数据绑定后删除并添加它：

```
ddlTownships.Items.Insert(0, new ListItem() { Text = "Please select a township", Value = "0" }); 
```

Another helpful thing to know is that can clear out the list before databinding:

```
ddlTownships.Items.Clear(); 
```

# java - 将重复日期添加到向量

> ID：13789682
> 
> 赞同：1
> 
> 时间：2012-12-09T17:15:36.540
> 
> 标签：java, date, loops, vector, deprecated

我仍在为我的日历程序使用 Java 上已弃用的 setYear() ，并且它以某种方式显示同一年，如下所示：

2022 年 12 月 21 日星期三 00:00:00 CST

2022 年 12 月 21 日星期三 00:00:00 CST

2022 年 12 月 21 日星期三 00:00:00 CST

```
//loop in another method
for (int i = realYear-1900; i <= realYear-1900+10; i++){
    date.setYear(i);
    vectorEvents.add(new Event(date, title));
}
textArea.setText(displayEvents());

//events method
public String displayEvents(){
    String data ="";
    Event e;
    for(int i=0; i<vectorEvents.size(); i++){
        e =  vectorEvents.get(i);
        data += e.date + "\n";
    }
    return data;
} 
```

我尝试在添加第一个日期后显示，然后在添加第二个日期后再次显示。似乎将第一个日期更改为与第二个相同的最新年份。是否有另一种解决方案，或者只是有问题。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:18:54.107

您将相同的`Date`对象添加到向量中 10 次（顺便说一句，也不应该再使用它）。所以在循环结束时，向量中的每个引用都指向同一个 Date 对象，包含您在其上设置的最后一年。

您需要在每次迭代时实例化一个新的 Date ：

```
for (int i = realYear-1900; i <= realYear-1900+10; i++){
    Date copy = new Date(date.getTime());
    copy.setYear(i);
    vectorEvents.add(new Event(copy, title));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T17:24:41.490

`Date`对象在 Java 中是可变的，正如其他人指出的那样，您只使用一个实例并对其进行更改。

如果`Event`对象是您的，从长远来看，最好的解决方案是更改构造函数并创建`Date`传递的副本（按照 Bruce Eckel 在“Effective Java”中的术语制作防御性副本）。

```
public Event(Date d, String title) {
    this.date = new Date(d.getTime());
    this.title = title
} 
```

请注意，您不需要对`title`since执行相同操作`String`是不可变的。

# c - -lpthread 链接错误

> ID：13789687
> 
> 赞同：-1
> 
> 时间：2012-12-09T17:16:43.730
> 
> 标签：c, multithreading

> **可能重复：**
> [在 linux 中未定义对 pthread_create 的引用（c 编程）](https://stackoverflow.com/questions/1662909/undefined-reference-to-pthread-create-in-linux-c-programming)

有以下程序：

```
void *thread(void *vargp);

int main() {
  pthread_t tid;

  pthread_create(&tid, NULL, thread, NULL);
  exit(0);
}

/* thread routine */
void *thread(void *vargp) {
  sleep(1);
  printf("Hello, world!\n");
  return NULL;
} 
```

我应该纠正它。我已经添加了左侧的包含：

```
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h> 
```

但我仍然收到以下错误：

```
/tmp/ccHwCS8c.o: In function `main':
1.c:(.text+0x29): undefined reference to `pthread_create'
collect2: ld returned output state 1 
```

我尝试像答案所说的那样在编译器中添加-lpthread，但我仍然得到这个错误代码：

```
@lap:~$ gcc -Wall -lpthread 1.c -o uno

/tmp/ccl19SMr.o: In function `main':
1.c:(.text+0x29): undefined reference to `pthread_create'
collect2: ld returned exit state 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T17:17:31.493

在您的编译/链接中添加“-lpthread”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T17:53:05.537

您需要使用`-lpthread`标志编译它才能链接`libpthread`到您的可执行文件。

您还应该添加[pthread_join()](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_join.3.html)函数以让您的主线程等待新线程结束。在您当前的代码中，您不会看到`Hello World`因为主线程结束将导致所有子线程退出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T17:20:45.917

您需要`-pthread`在编译时明确提及该选项。没有这个链接器就无法找到 pthread 库的引用。这样做：

`gcc -Wall -pthread test.c -o test.out`

# android - 以编程方式添加的 EditText 与 XML 版本不同

> ID：13789691
> 
> 赞同：3
> 
> 时间：2012-12-09T17:17:32.187
> 
> 标签：android, layout, android-edittext

我有一个包含 EditText 和 2 个按钮的 XML 布局。如果我单击加号按钮，则会以编程方式添加一个新的编辑文本。这可行，但编辑文本看起来不同。根据 XML，XML 中定义的 edittext 没有任何特殊属性，所以我相信它不是特定的布局设置。

我的问题是如何使我以编程方式添加的 EditText 看起来一样？

包含数字的 EditText 是我以编程方式添加的 edittext。空的正在 XML 中创建。

[![截屏](../Images/c2a0a839757cd5f1b227a9f72314eca3.png)](https://i.stack.imgur.com/ahBBU.png)
[（来源：[tozz.nl](http://www.tozz.nl/temp/screenshot.png)）]

代码：

```
 LinearLayout baseLayout = (LinearLayout) findViewById(R.id.baseLayout);

        LinearLayout linearLayout = new LinearLayout(getApplicationContext());
        linearLayout.setId(100 + numPlayers);
        linearLayout.setOrientation(LinearLayout.HORIZONTAL);

        EditText editText = new EditText(getApplicationContext());
        editText.setText(editText.toString().substring(25, 30));

        ImageButton delButton = new ImageButton(getApplicationContext());
        delButton.setImageResource(R.drawable.ic_delete);

        linearLayout.addView(editText);
        linearLayout.addView(delButton);

        baseLayout.addView(linearLayout); 
```

我的 XML 如下：

```
 <LinearLayout
        android:id="@+id/linearPlayer1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <EditText
            android:id="@+id/editPlayer1"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="1"
            android:gravity="center_vertical" />

        <ImageButton
            android:id="@+id/addPlayer1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_input_add" />

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T09:28:09.190

Luksprog 回答了我的问题：

> 创建新视图时传递活动上下文而不是应用程序上下文。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T17:50:39.860

添加正确的视图`LayoutParams`应该使`EditText`布局中的初始视图类似：

```
 linearLayout.addView(editText, new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,
            LinearLayout.LayoutParams.WRAP_CONTENT, 1.0f));
    linearLayout.addView(delButton, new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,
            LinearLayout.LayoutParams.WRAP_CONTENT));

    baseLayout.addView(linearLayout, new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT,
            LinearLayout.LayoutParams.WRAP_CONTENT)); 
```

# jquery - 结合 find 和 attr 的代码

> ID：13789692
> 
> 赞同：1
> 
> 时间：2012-12-09T17:17:40.463
> 
> 标签：jquery

这只是一个小问题。真的不是问题。我有这些代码：

```
 $('.gallery a').attr('href', href);
    $('.gallery a').find('img').attr( 'src', dir + '/img/design/' + img ); 
```

有可能将它们组合成这样吗？

```
 $('.gallery a').attr('href', href).find('img').attr( 'src', dir + '/img/design/' + img ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:22:14.077

是的。[文档](http://api.jquery.com/attr/)说`.attr( attributeName, value )`返回[jQuery](http://api.jquery.com/Types/#jQuery) ，所以你可以像这样链接它。

请记住，并非所有内容都是可链接的（即，您显然不能链接具有返回值的函数，因此如果您不确定，请查看文档）。

# android - Android 我想获取设备的旋转角度

> ID：13789697
> 
> 赞同：9
> 
> 时间：2012-12-09T17:18:13.473
> 
> 标签：android, orientation

例如，我启动应用程序，然后设备并排旋转 90 度。我想为设备上的每个平面检测此事件。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-11T09:42:25.650

您可以像这样获取屏幕方向（例如在您的 onResume() 方法中）：

```
private static final int ORIENTATION_0 = 0;
private static final int ORIENTATION_90 = 3;
private static final int ORIENTATION_270 = 1;

Display display = ((WindowManager)
          getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
int screenOrientation = display.getRotation();

switch (screenOrientation)
{
default:
case ORIENTATION_0: // Portrait
   // do smth.
break;
case ORIENTATION_90: // Landscape right
   // do smth.
break;
case ORIENTATION_270: // Landscape left
   // do smth.
break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:39:31.640

我认为您必须使用传感器管理器来计算每个点的 x,y,z。并使用方程找到两点之间的角度。考虑你的起点（0,0,0）；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:31:35.130

使用 SensorManager 和 TYPE_GYROSCOPE/TYPE_ROTATION_VECTOR/TYPE_ORIENTATION/ 来获取这些值。

查看[此页面](http://developer.android.com/reference/android/hardware/SensorEvent.html)了解详情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-09T18:15:46.910

您可以将**OrientationEventListener**用于飞机

```
OrientationEventListener mOrientationListener = new OrientationEventListener(
            getApplicationContext()) {
        @Override
        public void onOrientationChanged(int orientation) {

        }
    };

    if (mOrientationListener.canDetectOrientation()) {
        mOrientationListener.enable();
    } 
```

# css - BODY（必要性）中定义的样式不适用于 IE 7,8,9

> ID：13789699
> 
> 赞同：0
> 
> 时间：2012-12-09T17:18:27.913
> 
> 标签：css, internet-explorer

**已解决**Internet Explorer 有链接样式表的时间表限制，所以这就是我的样式表被忽略的原因。有关此问题的更多信息，请访问：http: [//support.microsoft.com/kb/262161](http://support.microsoft.com/kb/262161)

* * *

找了半天才发现问题：BODY元素中定义的样式在IE 7,8,9中没有应用。该页面的副本在[http://joskaweb.cz/hub.html](http://joskaweb.cz/hub.html)上可见。

我的样式在第 233 行（它是来自 LESS 的缩小 CSS）。

我找不到原因，但是当我从第 112 行到第 119 行删除样式时，它开始工作，所以那里一定有东西，但我找不到。

不幸的是，由于品牌限制，我无法访问我们正在使用的 Wordperss 模板（我只能编辑页面内容），所以我必须将样式放入 BODY 元素中。上面链接的页面是我为测试目的创建的副本。我需要在支持团队的脸上找到这个错误来粉碎它，否则我不会得到他们的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T19:19:35.977

这是因为您使用的是 html5 元素，例如标题。而且这个元素在 IE 7&8 中不起作用。使用此 JavaScript 代码修复它。

```
document.createElement('header'); 
```

你必须在 CSS 中给出标题`display: block`

**或使用**

[html5shim](https://code.google.com/p/html5shim/)

此源代码也添加了新的 HTML5 元素。但它也支持打印 HTML5 元素并包含 HTML5 元素的默认样式，如文章和部分的块。

# android - 视图中的列表导航（Actionbar、Actionbarsherlock）

> ID：13789708
> 
> 赞同：0
> 
> 时间：2012-12-09T17:19:17.227
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在寻找一种使用列表导航的方法，例如视图内操作栏中的列表导航（例如`LinearLayout`）

![在此处输入图像描述](../Images/c231bdcffc9ea7f4d104e932356fb713.png)

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:44:44.967

列表导航是 Actionbar 的一部分，所以如果你想使用类似的东西，你需要自己实现它。您可以使用微调器并自定义其样式以满足您的需要。

# javascript - 使用 css/jquery 将阴影放在对话框后面？

> ID：13789712
> 
> 赞同：1
> 
> 时间：2012-12-09T17:19:38.900
> 
> 标签：javascript, jquery, css

我想放置阴影/模糊`div id = "test"`对话框的背景，我尝试使用 jquery ui 提供的类 .ui-widget-shadow / .ui-widget-overlay 但它似乎无法正常工作。有什么办法可以做到这一点？谢谢。

```
 <style>
    div {
        display: none;
        width: 90%;
        height: 95%;
        margin-left:5%;
        background: #ccc;
        border: 1px solid #000;
    }

    div img {
        display: inline;
        margin-left:5%;
    }
    </style>
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
</head>
<body>

<button>show the div</button>
<div id = 'test'> <img src = 'image.png'></div>

<script>
$( "button" ).click(function() {
    $( "div" ).show( "scale", 180 );
});

$( "#test" ).dblclick(function() {
    $( "#test" ).hide( "scale", 200 );
});

</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T17:23:11.733

### 你没有做任何相关的事情！

如果你需要一个`drop-shadow`for `#test`，那么你可以使用这个 CSS：

```
#test {box-shadow: 10px 10px 5px #000;} 
```

您可以使用许多[在线`box-shadow`生成器](http://css3generator.com/)生成代码。

否则，如果您需要**模态窗口**之类的东西，它会隐藏或模糊背景，您需要添加另一个`div`和 give`z-index`等。您可以从：[Simple jQuery Modal Window Tutorial](http://www.queness.com/post/77/simple-jquery-modal-window-tutorial)中查看更多信息。

# android - Android：来自 json 的 GridView 图像

> ID：13789714
> 
> 赞同：0
> 
> 时间：2012-12-09T17:19:46.443
> 
> 标签：android, url, gridview, imageview

我在将 ImageView 放入 GridView 时遇到问题，我解析 JSON，我从 json 中获取 url 并将其放入我的 ImageView 到 GridView 中，我有一个错误，你能帮帮我吗？

**日志猫**

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.gazetaimage/com.gazetaimage.MainActivity}: java.lang.NullPointerException
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2309)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2359)
    at android.app.ActivityThread.access$600(ActivityThread.java:153)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1247)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5202)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:799)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:566)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
    at com.gazetaimage.ImageAdapter.<init>(ImageAdapter.java:37)
    at com.gazetaimage.MainActivity.onCreate(MainActivity.java:17)
    at android.app.Activity.performCreate(Activity.java:5106)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2263)
    ... 11 more 
```

**我的代码**在我的 AsyncTask 中，我连接到我的 JSON 文件，并返回 JSONObject，在 ImageAdapter.class 中我得到这个对象，并放入 ImageView

```
public class ImageAdapter extends BaseAdapter {

    public Context mContext;

    public String[] mThumbs;

    final static String TAG_ITEM = "item";
    final static String TAG_BIG_IMAGE = "big_image";

    public ImageAdapter (Context c){
        mContext = c;
        BackTask task = new BackTask();
        task.execute();

            try {

                JSONObject result = task.get();
                JSONArray jarray = result.getJSONArray(TAG_ITEM);
                for(int i = 0; i < jarray.length(); i++){
                    JSONObject jrss = jarray.getJSONObject(i);

                    mThumbs[i] = jrss.getString(TAG_BIG_IMAGE);
                }

            } catch (InterruptedException e) {
                e.printStackTrace();
            } catch (ExecutionException e) {
                e.printStackTrace();
            } catch (JSONException e) {
                e.printStackTrace();
            }
    }

    @Override
    public int getCount() {
        return mThumbs.length;
    }

    @Override
    public Object getItem(int position) {
        return mThumbs[position];
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {     

            ImageView imageView;
            if (convertView == null) { 
                imageView = new ImageView(mContext);
                imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
                imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
                imageView.setPadding(8, 8, 8, 8);
            } else {
                 imageView = (ImageView) convertView;
            }

            imageView.setImageURI(Uri.parse(mThumbs[position]));

            return imageView;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:26:46.423

好像还没有初始化`mThubs`

在遍历 JSON 数组之前添加以下行：

```
mThumbs = new String[jarray.length()]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:28:40.787

我相信你的空指针异常是由于 mThumbs 没有被初始化造成的。检查适配器中的第 37 行。

# php - 脚本工作正常，但不执行延迟

> ID：13789716
> 
> 赞同：0
> 
> 时间：2012-12-09T17:19:56.573
> 
> 标签：php

我制作了一个上传脚本，用户在上传用户被重定向到下一页后上传文件，我将该文件转储到数据库并显示 gif 图像，`loading data..`然后`sleep(10)`创建延迟并将该图像替换为`showing data`. 我面临的问题是，在上传代码后，`sleep(10)`无论在该文件中传递了多少延迟，都将代码作为执行时间并在下一页显示最终输出，所有这些延迟加起来就是执行时间并显示用户最终输出转储完成后。请让我知道为什么会这样。

注意我使用了flush（）它也没有工作并且它在我的配置文件中启用

```
<?php 
flush();
ob_flush();
echo '<script language="javascript">document.getElementById("information").innerHTML="<img src='."images/L.gif".' />"</script>';
sleep(30);
echo '<script language="javascript">document.getElementById("information").innerHTML="<img src='."images/C.gif".' />"</script>';
 ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:23:28.363

您正在刷新输出，他们将一个字符串添加到缓冲区然后睡眠，然后再次将另一个字符串添加到缓冲区然后再次刷新。在睡眠前的第一次回声之后
使用；`ob_flush()`

```
ob_start();
echo '<script language="javascript">document.getElementById("information").innerHTML="<img src='."images/L.gif".' />"</script>';
ob_flush();
sleep(30);
echo '<script language="javascript">document.getElementById("information").innerHTML="<img src='."images/C.gif".' />"</script>'; 
```

你也可以关掉`output_buffering`。

**并使用具有固定延迟检查的 AJAX，而不是使用无休止的页面加载。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T17:27:44.960

对此有解决方案（即`flush`在您的`echo`陈述之后和您的陈述之前`sleep`）。但是，无论如何，这不太可能做你想要的跨浏览器。AJAX 将是此类任务的更好解决方案（很可能）。

根据浏览器和配置的不同，在关闭与服务器的连接之前，浏览器可能不会开始渲染任何内容。在这种情况下，在您的所有延迟都过去之前，用户不会在他们的屏幕上看到任何内容。

# javascript - Javascript 中的 JSON 意外令牌 B

> ID：13789719
> 
> 赞同：2
> 
> 时间：2012-12-09T17:20:14.197
> 
> 标签：javascript, json

我正在用 JSON 解析以下字符串

[http://jsfiddle.net/cjds/9mJbq/2/](http://jsfiddle.net/cjds/9mJbq/2/)

当我运行它时，chrome 会引发以下错误`Unexpected Token B`。

想不通。因为字符串是由 PHP json_encode 创建的，所以 JSON 应该没有问题。

我通过 JSONLint 运行它并且没有错误，所以 JSON 很好。

那么错误是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T17:26:42.960

JSON.parse() 的参数应该是字符串。

因此，`JSON.parse(["hello", "world"])`是错误的。

它应该是`JSON.parse("[\"hello\", \"world\"]")`

我更新了jsfiddle。看看[http://jsfiddle.net/9mJbq/3/](http://jsfiddle.net/9mJbq/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-01T13:19:39.663

对于其他遇到此问题的人，如果您的 ajax 请求返回“错误请求”（错误 400）并且 json 解析器需要 json，则会发生此错误。例如：

```
const fetchSomething = url =>
    fetch(url).then(data => data.json()); 
```

# delphi - Indy 为某些消息返回奇怪的内容类型。怎么解决？

> ID：13789721
> 
> 赞同：4
> 
> 时间：2012-12-09T17:20:24.447
> 
> 标签：delphi, indy, indy10

有一种特殊的 Amazon 消息似乎会抛出 Indy 的 MessagePart 解析器。

该消息的结构（当然是强烈删节的版本）如下：

```
Content-Type: multipart/mixed;
       boundary="----=_Part_853547_18414509.1354745829993"

<some irrelevant header stuff>

------=_Part_853547_18414509.1354745829993
Content-Type: multipart/alternative;
       boundary="----=_Part_853548_20128671.1354745829993"

------=_Part_853548_20128671.1354745829993
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<the message in plain text>

------=_Part_853548_20128671.1354745829993
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<the message in HTML>

------=_Part_853548_20128671.1354745829993--

------=_Part_853547_18414509.1354745829993-- 
```

现在，当我执行

```
imap.UIDRetrieve(UID,Msg) 
```

然后

```
Msg.ContentType = "multipart/mixed" 
```

并且个人`Msg.MessageParts`将其作为内容类型：

```
Msg.MessageParts[0].ContentType = "multipart/alternative; boundary="----=_Part_853548_20128671.1354745829993""

Msg.MessageParts[1].ContentType = "text/plain" 
```

没有零件的痕迹`text/html`。

有人知道这里发生了什么吗？

（我正在使用最新的 Indy 版本）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T06:02:30.907

`TIdMessage`当我使用当前的 Indy 10 SVN 快照直接运行该电子邮件数据时，它解析得很好。正如预期的那样，`MessageParts`生成了三个条目 - `multipart/alternative`、`text/plain`和-。`text/html`

在[您最近在 Embarcadero 论坛](https://forums.embarcadero.com/message.jspa?messageID=515651)上就同一主题发表的帖子中，您遗漏了一条关键信息——您正在使用`TIdIMAP4`它来检索对您来说失败的电子邮件。这很重要，因为您认为不相关的电子邮件部分必须包含与 Indy 代码相关的数据，该代码具有已知的设计限制，不会在 Indy 10 中修复（但已标记为 Indy 11 的要求）但这会影响`TIdIMAP4`.

在内部，`TIdIMAP4.UIDRetreive()`将原始下载的电子邮件按原样传递到`TIdMessage.LoadFromStream()`. 内部的核心解析器`TIdMessage`期望使用 IMAP 实际不使用的 SMTP 样式的点透明度对输入数据进行转义。 `TIdMessage`目前没有任何方式知道输入电子邮件数据的来源，因此无法知道转义数据的格式。更高级别的协议传输负责根据需要解析和解码转义数据，然后应将未转义的数据传递`TIdMessage`给进一步解析。但现在实际情况并非如此。在 Indy 10 中，这种逻辑分离并没有达到应有的程度。 `TIdMessage`使用对源数据的直接访问，`TIdSMTP`这`TIdPOP3`在`TIdIMAP4`.

在该`IdMessageClient.pas`单元中，有一个名为的助手类`TIdIOHandlerStreamMsg`，它具有一个公共`EscapeLines`属性，专门设计用于在需要它的情况下帮助解决此问题（即，将未转义的数据传递给`TIdMessage.LoadFrom...()`方法）。`TIdMessage.LoadFromStream()`当前的解决方法不是直接调用，而是实例化 a `TIdMessageClient`，将 a 分配`TIdIOHandlerStreamMsg`给它的`IOHandler`属性，将其`EscapeLines`属性设置为 True，然后将`TStream`要解析的源和`TIdMessage`输出的目标传递给它。这允许 Indy 伪造核心解析器期望取消转义的转义格式。

~~但是，`TIdIMAP4`目前尚未使用此解决方法。现在我想了想，应该很容易添加，所以我会研究一下。同时，您可以使用`TIdIMAP4.RetrieveNoDecodeToStream()`or `TIdIMAP4.UIDRetrieveNoDecodeToStream()`，这将在写入目标时间接转义数据`TStream`（另一个需要修复的已知设计限制），然后您可以将其传递`TStream`给以`TIdMessage.LoadFromStream()`正常解析。~~

**更新**：我刚刚签入了`AppendMsg()`和`InternalRetrieve()`方法的更新，`TIdIMAP4`不再依赖于 SMTP 样式的点透明度。这已经在 Indy 的 TODO 列表上好几年了，所以很高兴最终解决它。

# java - 为 JTree 节点设置 Imageicon

> ID：13789728
> 
> 赞同：-3
> 
> 时间：2012-12-09T17:21:05.243
> 
> 标签：java, swing, jtree

我创建了一个`JTree`. 我需要更改特定节点的图标。能够`setIcon`关闭和打开以及叶子节点，但我需要在我的`JTree`. 请对此有所了解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T17:35:21.067

如果您知道如何更改默认图标，您就会知道这发生在 TreeCellRenderer 中。您可以简单地实现自己的 TreeCellRenderer，它比 DefaultTreeCellRenderer 具有更高级的图标确定功能。

像这样的东西：

```
public class MyTreeCellRenderer implements TreeCellRenderer {

    private final DefaultTreeCellRenderer defaultRenderer = new DefaultTreeCellRenderer();
    private final  Icon specialIcon;

    public MyTreeCellRenderer(Icon specialIcon) {
        this.specialIcon = specialIcon;
    }

    @Override
    public Component getTreeCellRendererComponent(JTree tree, Object value, boolean selected, boolean expanded, boolean leaf, int row, boolean hasFocus) {
        defaultRenderer.getTreeCellRendererComponent(tree, value, selected, expanded, leaf, row, hasFocus);
        if (needsSpecialIcon(tree, value, selected, expanded, leaf, row, hasFocus)) {
            defaultRenderer.setIcon(specialIcon);
        }
        return defaultRenderer;
    }

    private boolean needsSpecialIcon(JTree tree, Object value, boolean selected, boolean expanded, boolean leaf, int row, boolean hasFocus) {
        // check condition for special icon here
        return false;
    }
} 
```

这基本上将默认行为委托给 DefaultTreeCellRenderer，但如果您的特殊条件为真，则会覆盖图标。

# java - 提示用户，直到输入正确的输入类型

> ID：13789732
> 
> 赞同：-1
> 
> 时间：2012-12-09T17:21:45.047
> 
> 标签：java, java.util.scanner

```
while (goodInput=false)
        {
            try
            {
                System.out.println("How long is the word you would like to guess?");
                wordSize=scan.nextInt();
                while(wordSize>word.longestWord())
                {
                    System.out.println("There are no words that big! Please enter another number");
                    wordSize=scan.nextInt();
                }
                goodInput=true;
            }
            catch(InputMismatchException ime)
            {
                System.out.println("Thats not a number! Try again");
            }

        } 
```

我试图提示用户输入一个数字，但我无法让它正确运行。我希望它继续运行，直到输入正确的输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:22:55.187

一个问题是：

```
while (goodInput=false) 
```

分配`false`给`goodInput`which become`while(false)`导致循环根本不执行

将其更改为

```
while (!goodInput) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:22:59.173

循环中的条件`while`需要是

```
 while(goodinput == false) 
```

您正在做的是分配`false`给 goodinput 导致最终结果为`false`. 请参阅以下语句的输出，

```
boolean a;
System.out.println((a = false)); 
```

你需要一个[相等运算符](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T17:23:14.057

首先，

```
while (goodInput=false) 
```

分配`false`给`goodInput`，您必须使用`==`运算符来检查是否`goodInput`是`false`

```
while (goodInput==false) 
```

要不就

```
while (!goodInput) would suffice 
```

这是java中对[**等式运算符的引用**](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T17:23:31.410

你必须写

```
while (goodInput == false) 
```

甚至更好

```
while (!goodInput) 
```

代替

```
while (goodInput = false) 
```

第一个比较`goodInput`with的值`false`，第二个否定 of 的值，`goodInput`您的版本分配`false`给`goodInput`

# ruby - Ruby 中的“要求”管理

> ID：13789738
> 
> 赞同：1
> 
> 时间：2012-12-09T17:22:47.850
> 
> 标签：ruby, require

想象一下，我`require`用来加载一个名为 ftp_reader.rb 的 ruby​​ 文件，例如

```
require './readers/ftp_reader' 
```

10个文件包含上述`require`声明并利用该文件。假设我对 ftp_reader 进行了错误分类，路径应如下所示：

```
require './remote_readers/ftp_reader' 
```

我必须记住哪 10 个文件需要 ftp_reader，并更新路径。这是一种痛苦。我总是重命名和重定位文件和文件夹，以使我的项目尽可能地代表问题域 (BDD)。

我的问题是，是否有一些 gem 使用某种清单文件，其中包含所有项目文件的路径，并且具有`require`使用此清单来定位我的依赖项的方法版本？该文件将具有文件的别名，我将在我的`require`语句中使用别名而不是文件路径。如果有人用过 require.js，这听起来很熟悉。Ruby 世界中是否已经存在这样的东西？或者这个问题在 Ruby 世界中是如何解决的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T19:37:54.850

提前评论：你的愿望（和我的回答）有一种丑陋的代码的味道。我建议您考虑一个或多个宝石与您的文件。更多在我的答案的末尾。

我过去所做的：我在不同的文件夹和一个公共文件中也有小脚本`myscripts.rb`。这`myscripts.rb`是在我的大多数文件的开头加载并设置加载路径：

```
require_relative '../myscripts.rb' #
require 'ftp_reader' 
```

`myscripts.rb`被定义为：

```
$:.unshift('c:/<..full_path..>/readers/')
$:.unshift('c:/<..full_path..>/writters/')
#... more pathes ... 
```

当我改变我的文件夹结构时，我只需要改变我的`myscripts.rb`：

```
$:.unshift('c:/<..full_path..>/remote_readers/') 
```

现在所有脚本都使用新的文件夹结构，因为我`myscripts.rb`从未更改过它的位置。

我使用了完整路径，因为相对路径是相对于主文件的，而不是相对于`myscripts.rb`.

有可能组合`__FILE__`并`expand_path`使用我的相对路径`myscripts.rb`- 但我从未使用过它。

问题：如果我重命名我的脚本，这不起作用（我经常保留旧的脚本名称并加载新的）。而且旧版本不灵活。

后来我创建了一个 gem`mytools`并将所有脚本添加到这个 gem。如果我需要旧版本，可以加载旧版本。

今天，我为每个关注/主题创建了一个 gem。没关系，gem 中有多少文件。宝石为我解决了一个问题。重要的不是文件数量，而是[关注点的分离](http://en.wikipedia.org/wiki/Separation_of_concerns)。gem 包含解决问题的脚本、测试，它是文档的基础。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:46:13.240

大多数人使用 Ruby 中的包管理器来解决依赖管理问题。Bundler 是最大的一个，因为它包含在 Rails 中。您创建一个 Gemfile 来指定您要使用的所有包，bundler 创建自己的包存储库，您可以根据需要随意使用它们。如果你做服务器端 JavaScript，它与 npm 非常相似。

# global - 使用空间填充曲线加速全局照明 - 它是如何工作的？

> ID：13789752
> 
> 赞同：1
> 
> 时间：2012-12-09T17:23:56.673
> 
> 标签：global, raytracing, hilbert-curve

仅出于学习目的，我正在研究光线追踪技术。我最近发现了 Global Illumation 及其变体，阅读了[Kevin Beason](http://kevinbeason.com/smallpt/)的这部惊人的作品。我确实尝试过用另一种语言（Lua）移植 smallpt。

到目前为止，我的工作正常，但在我看来它渲染场景太慢了。到目前为止，我在互联网上进行了挖掘，并且我在很多涵盖该主题的技术论文中看到这是全局照明技术的主要问题，尤其是路径跟踪。

在我看来，有一些方法可以加快这一过程，例如间距填充曲线（例如希尔伯特曲线）。基本上，它们都将视口划分为桶（或图块），然后命令渲染器以特定顺序在每个桶上处理路径跟踪。从技术上讲，我没有研究如何实现希尔伯特曲线，但我想了解，实际上，这如何能让整个过程更快？

我的第一个假设是，考虑到每个桶 appart，渲染器是在特定像素上调用的，然后其他的是使用插值技巧的样本，但实际上，渲染器似乎是在桶上的每个单个像素上调用的。

因此，在我看来，渲染器将处理地图的所有像素，这与两个嵌套的 for 循环（每行、每列）的工作量相同。所以我知道我显然遗漏了一些东西，因此期待一些清晰的解释。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:37:17.450

Smallpt 旨在以尽可能少的代码行来演示具有路径跟踪的全局照明。因此，它没有任何性能优化。

对于比简单场景更复杂的任何场景，大部分渲染时间都花在计算光线沿着其路径下一个命中的对象上，因为这必须为每条光线执行多次。

一个简单的实现将需要，对于每一次光线反弹，计算光线与场景中每个对象的交集，以确定下一个被击中的对象。

为了改进这一点，*加速结构*用于减少必须计算的光线/对象交叉点的数量，通常通过分割包围场景的体积来避免不必要的交叉点测试。

主要有两种方法：

*   [KD Trees](http://en.wikipedia.org/wiki/K-d_tree) - 与二进制空间分区树有关。
*   [包围体层次结构](http://en.wikipedia.org/wiki/Bounding_volume_hierarchy)-（通常）包含对象和其他框的轴对齐框的层次结构。

性能方面两者都同样出色，但我相信 BVH 更易于实施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T17:48:23.787

我不知道那种方法，但单独平铺可以提高性能，因为它可以提高复杂场景的缓存使用率 - 即。不是从左到右扫描，而是在场景中游荡，将所有内容都放入缓存中，通过一次做图块，比如说，几百条光线全部落入场景的大致相同区域，而不是愉快地穿过它，这意味着只有该区域的数据需要在缓存中。当然，二次光线基本上是随机的，所以如果你使用路径追踪，第一条光线可能不会那么重要。不过，它可能对光子映射更有帮助。

无论如何，也许空间填充曲线在那里做类似的事情。除此之外，我不知道它们可以用来做什么。

[编辑] 试着把它们拿出来看看性能是否有变化。

# c# - 数据库连接 C# ExecuteNonReader 与 MySql

> ID：13789754
> 
> 赞同：0
> 
> 时间：2012-12-09T17:24:32.777
> 
> 标签：c#, mysql

我有一些问题，我在互联网上看到了和平的代码，只有这与`Oledb`.

现在我重写了 MySQL.data.mysqlclient 的代码，如下所示：

```
MySqlDataReader dr = null;
        MySqlCommand cmd = null;
        string cmdstr = "SELECT * FROM users WHERE email='"+UsrName.Text+"' and password='"+PassWrd.Text+"' LIMIT 1";
        dr = cmd.ExecuteNonReader();
        cmd = new MySqlCommand(cmdstr, connection);
        cmd.Dispose();

        if (dr.Read() == true)
        {
            MessageBox.Show("Succesvol ingelogd");
        }
        else
        {
            MessageBox.Show("Geen juiste gegevens");
        }
        connection.Close();

    } 
```

现在的问题是另一种方法`dr = cmd.ExecuteNonReader()`。

更新 - - - - - - - -

```
string server;
        string database;
        string uid;
        string password;
        server = "localhost";
        database = "cmstt";
        uid = "root";
        password = "";
        string connectionString;
        connectionString = "SERVER=" + server + ";" + "DATABASE=" +
        database + ";" + "UID=" + uid + ";" + "PASSWORD=" + password + ";";

        MySqlConnection connection = new MySqlConnection(connectionString);

        connection.Open();

        MySqlDataReader dr = null;
        MySqlCommand cmd = null;
        string cmdstr = "SELECT * FROM users WHERE email='"+UsrName.Text+"' and pass='"+PassWrd.Text+"' LIMIT 1";
        dr = cmd.ExecuteReader();
        cmd = new MySqlCommand(cmdstr, connection);

        if (dr.Read() == true)
        {
            MessageBox.Show("Succesvol ingelogd");
        }
        else
        {
            MessageBox.Show("Geen juiste gegevens");
        }
        cmd.Dispose();
        connection.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:27:39.377

不会`ExecuteReader()`的`ExecuteNonReader()`

// 在此处提及您的连接和连接字符串。

```
 connection.open()

        SqlDataReader dr = null;
        MySqlCommand cmd = null;
        string cmdstr = "SELECT * FROM users WHERE email='"+UsrName.Text+"' and password='"+PassWrd.Text+"' LIMIT 1";

        cmd = new MySqlCommand(cmdstr, connection);
        dr = cmd.ExecuteReader();

        if (dr.Read() == true)
        {
            MessageBox.Show("Succesvol ingelogd");
        }
        else
        {
            MessageBox.Show("Geen juiste gegevens");
        }
        connection.Close();

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:26:41.743

您正在过早地处理 cmd 。在关闭连接之前将其丢弃。

# jsoup - 如何判断列表中的元素是否属于类型？

> ID：13789759
> 
> 赞同：0
> 
> 时间：2012-12-09T17:24:53.243
> 
> 标签：jsoup

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:24:56.700

# opencv - 从opencv中的视差图生成3D图像

> ID：13789765
> 
> 赞同：5
> 
> 时间：2012-12-09T17:25:37.067
> 
> 标签：opencv, 3d

我正在尝试从两个图像中获取 3D 图像，我已经生成了视差图。谁能告诉我如何从 opencv 中的视差图像中获取 3D 图像。请帮我 。

感谢和问候索姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T00:20:01.957

您应该使用函数 reprojectImageTo3D(...)。OpenCV 文档中提供了更多详细信息：http: [//docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#reprojectimageto3d](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#reprojectimageto3d)

# mongodb - 如何在grails中将mongodb id转换为objectId

> ID：13789766
> 
> 赞同：-3
> 
> 时间：2012-12-09T17:25:48.387
> 
> 标签：mongodb, grails

如何在grails中将任何mongo db id like-转换`50c33766a09e6c5ce3a021a5`为mongo db Object id like- ？`ObjectId("50c33766a09e6c5ce3a021a5")`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T19:44:46.570

```
class ObjectIdParser {
    static Serializable parse(String id) {
        return ObjectId.isValid(id) ? new ObjectId(id) : null
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:08:06.403

> 感谢@Emil此方法仅将Id类字符串转换为bson.types.ObjectId类。我们需要精确的ObjectId（“50c33766a09e6c5ce3a021a5”）格式...我需要在grails -Raj中按条件查询比较对象ID

然后比较两个字符串，但感觉就像你做错了事情..

```
ObjectId id = new ObjectId("50c33766a09e6c5ce3a021a5")
String otherId = 'ObjectId("50c33766a09e6c5ce3a021a5")'

assert otherId == "ObjectId(/"${id as String}/")" 
```

# c++ - 使用向量创建二维数组

> ID：13789772
> 
> 赞同：0
> 
> 时间：2012-12-09T17:26:50.470
> 
> 标签：c++, vector

我一直在尝试创建一个二维向量数组。这是我正在做的一个例子。

```
struct TILE {
    int a;
};

TILE temp_tile;

std::vector<TILE> temp_vec_tile;
std::vector<std::vector<TILE>> tile;

for (int x = 0; x < 10; x++) {
    for (int y = 0; y < 10; y++) {

    temp_tile.a = x;
    temp_vec_tile.push_back(temp_tile);
    }
    tile.push_back(temp_vec_tile);
}

// Why does this not work? 

int x = tile[3][5].a; 
```

任何人都可以纠正我。告诉我为什么它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:30:15.487

你没有清除行之间的 temp_vec_tile，所以它只会继续增长......

因此，不是您的行向量都有 10 个元素，而是第一个元素有 10 个，接下来是 20 个，然后是 30 个，等等。前 10 个元素将始终是第一行的元素。所以索引不会让你回到你期望的元素。

与其推回临时向量<>，然后将其推入外部向量<>，不如将向量<>的大小保留在循环之外，并直接存储在内部循环中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:31:35.697

究竟是什么不工作？你可能会得到一些意想不到的价值，因为你创造了一个不断增长的`temp_vec_tile`. 您可能希望在将其插入外部向量后截断它，例如，使用`clear()`.

# ios - 缩小 UITextView 的文本输入区域

> ID：13789774
> 
> 赞同：1
> 
> 时间：2012-12-09T17:27:32.607
> 
> 标签：ios

我有一个`UITextView`尺寸为 W，H 的。默认情况下，其文本输入区域的宽度等于`UITextView`. 我只想减小文本输入区域的宽度，保持`UITextView's`宽度不变。基本上，我想实现类似的方法`drawTextInRect:`还是`editingRectForBounds:``UITextField`

我怎么能做同样的事情`UITextView`呢？

# java - 在 Java 中更改字符串颜色

> ID：13789775
> 
> 赞同：0
> 
> 时间：2012-12-09T17:27:35.750
> 
> 标签：java, swing, colors, jtextarea

我想更改从用户输入中找到的字符串的颜色`JTextArea`。我一直在互联网上搜索，但找不到解决方案。我知道 JTextPane 可以很容易地处理这种样式，但我不熟悉`JTextPane`它的功能。例如，我不知道如何启用我可以在文本区域轻松完成的自动换行和换行。

那么有没有办法改变字符串的颜色`JTtextArea`呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T17:29:10.053

要么使用可以采用多种字体和格式的 JEditorPane，要么设置文本区域的背景/前景色。

```
setForeground(Color Object Here);
setBackground(Color Object Here); 
```

# jquery - 在悬停时更改另一个 div 的类 - jQuery

> ID：13789777
> 
> 赞同：0
> 
> 时间：2012-12-09T17:27:38.533
> 
> 标签：jquery, html

我到处搜索，但一切似乎都围绕着我所追求的，我自己还没有学到足够的知识来做这件事，如果它在某个地方或一个愚蠢的问题，我很抱歉。

这是我目前的结构如下：

```
<nav>
  <ul>
    <li><a href="#">Home</a></li>
    <li class="select"></li>

    <li><a href="#">Services</a></li>
    <li class="noselect"></li>

    <li><a href="#">Gallery</a></li>
    <li class="noselect"></li>

    <li><a href="#">About Us</a></li>
    <li class="noselect"></li>

    <li><a href="#">Contact Us</a></li>
    <li class="noselect"></li>
  </ul>
</nav> 
```

我想要的是当一个链接悬停时，下面的“li”将它的类更改为“select”，而所有其他链接都设置为“noselect”。

我已经包含了一个 jsfiddle，所以你可以明白我的意思。（在[这里](http://jsfiddle.net/swift29/2Ua2a/1/)找到）

在此先感谢，斯威夫特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:46:35.863

您可以在不使用 javascript 的情况下做到这一点。在普通的 CSS 中：

```
nav:hover .select {
    background:#ff0000;
}

nav li:not(.select):hover +  li {
    background:#000;
} 
```

这是一个小提琴[http://jsfiddle.net/2Ua2a/9/](http://jsfiddle.net/2Ua2a/9/)

但是，我可能会将其简化为：http: [//jsfiddle.net/58gNm/2/](http://jsfiddle.net/58gNm/2/) - 只是保持 html 更清洁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T17:30:47.837

```
$('li a').on('mouseenter mouseleave', function() {
    $(this).closest('li').next('li').addClass('select')
           .siblings('li').removeClass('select');
});​ 
```

[**小提琴**](http://jsfiddle.net/2Ua2a/3/)

您不必切换两个类，只需确保`select`该类具有比`noselect`该类更具体的选择器，它将覆盖它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T17:35:38.100

检查这个小提琴：

[http://jsfiddle.net/BuddhiP/2Ua2a/6/](http://jsfiddle.net/BuddhiP/2Ua2a/6/)

```
$(function() {
    $('a').on('hover', function() { $(this).parent().next('li').toggleClass('select noselect') }); 
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T17:38:43.423

干得好：

```
$('a').on('hover', function(){
   var $parent = $(this).parent('li');

    $parent.siblings('li.select').removeClass('select').addClass('noselect');
    $parent.next('li').removeClass('noselect').addClass('select');
});​ 
```

代码很简单。悬停链接时，我运行一个函数。首先，我将父级声明`li`为变量，因为它更易于阅读并且性能稍好一些。

然后，我以当前具有`.select`-class 的兄弟姐妹为目标，并使其未选中。最后，我只是将类添加到紧随其后的`li`.

见小提琴：http: [//jsfiddle.net/2Ua2a/5/](http://jsfiddle.net/2Ua2a/5/)

# c++ - 未来。然后实施？

> ID：13789779
> 
> 赞同：-1
> 
> 时间：2012-12-09T17:27:44.007
> 
> 标签：c++, visual-studio-2012, future

当前是否存在任何开源实现`future.then`？

这对于我目前正在从事的项目非常有用，并且提升实施似乎还没有实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T17:33:30.453

如果您在 Windows 上使用~~Visual Studio 2012~~ [Visual Studio 2010](http://blogs.msdn.com/b/nativeconcurrency/archive/2011/03/09/tasks-and-continuations-available-for-download-today.aspx)和更高版本进行开发，则可以利用[Parallel Patterns Library](http://msdn.microsoft.com/en-us/library/dd492418.aspx)，它提供了[`concurrent::task`](http://msdn.microsoft.com/en-us/library/hh750113.aspx)具有类似[`then`](http://msdn.microsoft.com/en-us/library/hh750044.aspx)方法的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T02:38:25.390

Libprocess 有一个支持 then 的未来实现，它嵌入在 Mesos (http://incubator.apache.org/mesos/) 中（路径是 third_party/libprocess/include/process/future.hpp）。我指出嵌入式版本的原因是它应该是最新的版本。

尽管我使用 libprocess 库的经验为零，但它看起来作为 Mesos 的底层引擎工作正常。

退税：

仅支持 Linux 平台或 Mac 平台。

# java - 强制休眠使用我的自定义列表实现

> ID：13789781
> 
> 赞同：3
> 
> 时间：2012-12-09T17:27:45.473
> 
> 标签：java, hibernate

我有一个业务对象，它公开了想要**控制**的元素列表。

为此，我创建了一个带有**侦听器的自定义 List 实现 (** *CustomList* )，每当添加/删除元素时都会收到通知。

 **```
public class MyClass {
    private List<ItemClass> list;

    public MyClass() {
        this.list = new CustomList<ItemClass>();
    }

    public List<ItemClass> getList() {...}
    public setList(List<ItemClass>) {...}
} 
```

问题是，如果我想持久化这个对象，Hibernate 使用 setter 来设置列表及其自己的 List 实现，从而使我的 CostumList 行为短路。

我试图用这种方式欺骗二传手：

```
public setList(List<ItemClass> newList) {
    this.list.clean():
    this.list.addAll(newList);
} 
```

但这也不起作用： **Hibernate**首先调用 setter，然后将一些元素添加到它自己的列表中。因此，我最终得到了一个空列表。

有没有办法让休眠使用我的自定义列表实现？还是在加载内容后填充它？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:43:43.343

我的第一个想法是做这样的事情：

> 您始终可以使用 setter 来更改列表实现（类似于您所做的）。例如：
> 
> ```
> public setList(List<ItemClass> newList) {
>     // Sets the list as a custom list.
>     list = new CustomList<>(newList);
> } 
> ```
> 
> 然而，要使其工作，您需要更改 **CustomList 的实现以作为[装饰器](http://en.wikipedia.org/wiki/Decorator_pattern)**工作，因此它将独立于包装列表类型工作。

正如@millimoose 所注意到的，它仍然不能解决您的问题。

可以通过使用 Hibernate（或 JPA）[生命周期注释](http://docs.jboss.org/hibernate/orm/4.0/hem/en-US/html/listeners.html)（例如 @PostPersist、@PostUpdate 或 @PostLoad...）找到可行的解决方案。因此，您可以使用该 customList.addAll() 解决方案（在更新、持久化或加载实体之后）。**

# ruby-on-rails - 渲染关联数据 (has_many, :through) - Rails

> ID：13789783
> 
> 赞同：2
> 
> 时间：2012-12-09T17:27:52.000
> 
> 标签：ruby-on-rails, model, controller, associations, render

我有两个定义页面内容（广告类型）的导航栏（展示位置和广告）。第一个导航栏，placement，总是在顶部可见。第二个导航栏广告将根据在展示位置顶部选择的属性呈现在页面左侧。模型展示位置和模型广告具有多对多的关系。如何根据在顶部导航栏中选择的属性（展示位置）在 html 中呈现第二个导航广告？

两种导航模型是：

```
class Placement < ActiveRecord::Base  
  attr_accessible :placementname  
  has_many :adtypes, :foreign_key => "placement_id"  
  has_many :ads, :through => :adtypes   
end

class Ad < ActiveRecord::Base  
  attr_accessible :adname  
  has_many :adtypes, :foreign_key => "ad_id"  
  has_many :placements, :through => :adtypes  
end 
```

这是内容的模型，广告类型，这取决于在导航栏中选择的属性：

```
class Adtype < ActiveRecord::Base  
  attr_accessible :adtype_screenshot, :location, :placement_screemshot, :specs  
  belongs_to :placements  
  belongs_to :ads  
end 
```

这是我的模式数据库：

```
ActiveRecord::Schema.define(:version => 20121127052112) do  
  create_table "ads", :force => true do |t|  
    t.string   "adname"  
    t.datetime "created_at"  
    t.datetime "updated_at"  
  end 

  create_table "adtypes", :force => true do |t|  
    t.integer  "placement_id"  
    t.integer  "ad_id"  
    t.string   "location"  
    t.string   "placement_screenshot"  
    t.string   "adtype_screenshot"  
    t.string   "specs"  
    t.datetime "created_at"  
    t.datetime "updated_at"  
  end

  create_table "placements", :force => true do |t|  
    t.string   "placementname"  
    t.datetime "created_at"  
    t.datetime "updated_at"  
  end    
end 
```

这是我的 routes.rb 文件：

```
 resources :placements do  
    resources :ads do  
      resources :adtypes do  
      end  
    end  
  end 
```

这是我如何呈现我的顶部导航 (_navigation.html.erb) 并将每个属性链接到以展示位置 ID (http://localhost:3000/placements/2) 结尾的新 url

```
<% Placement.all.each do |placement| %>  
  <li ><%= link_to placement.placementname, placement_path(placement.id) %> </li>  
<%end%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:00:50.017

找到了解决方案：首先，我错误地将这些作为复数：

```
belongs_to :placements 
belongs_to :ads 
```

所以我只是去掉了's'并以这种方式呈现我的广告（广告视图显示）：

```
<% @placement.ads.all.each do |ad| %>  
<%= link_to ad.adname, placement_ad_path(@placement, ad) %>  
<%end%> 
```

# java - 使用 Maven 构建 Android 应用程序 - SDK 路径

> ID：13789784
> 
> 赞同：2
> 
> 时间：2012-12-09T17:27:56.807
> 
> 标签：java, android, maven, plugins, build

过去一周左右，我一直在努力使用 Maven 构建各种示例 Android 应用程序。我一直在谷歌的几个页面上试图找出问题所在，但没有运气。

我收到以下异常

```
 Error when generating sources.
org.apache.maven.plugin.MojoExecutionException: No Android SDK path could be found. You may configure it in the plugin configuration section in the pom file using <sdk><path>...</path></sdk> or <properties><android.sdk.path>...</android.sdk.path></properties> or on command-line using -Dandroid.sdk.path=... or by setting environment variable ANDROID_HOME
    at com.jayway.maven.plugins.android.AbstractAndroidMojo.getAndroidHomeOrThrow(AbstractAndroidMojo.java:864)
    at com.jayway.maven.plugins.android.AbstractAndroidMojo.getAndroidSdk(AbstractAndroidMojo.java:833)
    at com.jayway.maven.plugins.android.phase01generatesources.GenerateSourcesMojo.generateR(GenerateSourcesMojo.java:329)
    at com.jayway.maven.plugins.android.phase01generatesources.GenerateSourcesMojo.execute(GenerateSourcesMojo.java:102)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352) 
```

运行这个命令，好像我设置了 ANROID_HOME 变量

```
megaz@Wolverine:/$ echo $ANDROID_HOME
/home/megaz/Documents/android-sdk-linux_x86/

megaz@Wolverine:/$ ls /home/megaz/Documents/android-sdk-linux_x86/
add-ons  docs  extras  platforms  platform-tools  samples  SDK Readme.txt  sources  system-images  temp  tools 
```

# xml - 覆盖“setTemplate” Magento xml

> ID：13789785
> 
> 赞同：2
> 
> 时间：2012-12-09T17:28:00.460
> 
> 标签：xml, templates, magento, layout

在我的主题中，我已经使用（在 local.xml 中）：

```
<reference name="top.links">
    <action method="setTemplate"><template>page/html/header/links.phtml</template></action>
</reference> 
```

现在我正在制作一个要更改模板的模块，因此无需修改主题即可安装该模块。因此，来自模块 xml 文件的代码几乎相同：

```
<reference name="top.links">
    <action method="setTemplate"><template>sociallogin/header/links.phtml</template></action>
</reference> 
```

Magento 总是选择 local.xml 中的第一个我如何覆盖它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T19:21:54.260

你不应该（尽管我会在这篇文章的结尾给你一些可能的想法）。Magento 的设计使得代码`local.xml`“胜过”可安装模块文件中的代码。基本思想是`local.xml`店主去添加覆盖模块文件更新的布局更新。这就是系统的工作原理™，改变它会造成比它解决的更多的混乱。

也就是说，如果您将代码放在不同的布局句柄中，您可能能够在系统内工作。句柄是围绕布局更新的节点

```
<default>
    ...   
</default>

<catalog_category_view>
</catalog_category_view>

<customer_logged_out>
</customer_logged_out>

etc... 
```

Magento 的布局系统的工作方式是：

*   标记中的所有更新`default`都从模块文件运行，然后从`local.xml`.
*   然后从模块文件运行所有更新`catalog_category_view`，然后从`local.xml`.
*   然后从模块文件运行所有更新`customer_logged_out`，然后从`local.xml`.

也就是说，有一个句柄顺序/特异性。[查看Commerce Bug Demo 商店](http://commercebugdemo.pulsestorm.net/electronics/cell-phones.html)的 Layout 选项卡（单击调试后）以查看页面的句柄顺序。（免责声明：Commerce Bug 是我创建和销售的产品）

因此，如果您的`local.xml`文件应用了它的更新`default`并且您真的无法重新调整它，那么您可以在稍后出现的句柄中应用您的模块更新。

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T19:17:29.260

您的 local.xml 布局文件将优先于所有其他 xml 文件（/app/etc/local.xml 文件除外，但您不应将其用于布局）。

您应该从 local.xml 文件中删除声明。

# facebook - HTML5 Like Box Broken

> ID：13789787
> 
> 赞同：13
> 
> 时间：2012-12-09T17:28:26.667
> 
> 标签：facebook, facebook-like, facebook-likebox

我有以下问题；高度没有正确缩放，背景不再透明，边框颜色错误，框的底部被切断，文本和背景在“深色”设置下是相同的颜色。这发生在我实施了“Like Box”的每个站点上。

这些都可以在 Like Box - 开发者页面上复制 [https://developers.facebook.com/docs/reference/plugins/like-box/](https://developers.facebook.com/docs/reference/plugins/like-box/) 尝试以下设置：

宽度 400

高度 600（框不会缩放）（如果您将其保留为默认值并打开 Show Faces，则底部被切断）

显示面孔：开

配色方案：深色

显示流：开

边框颜色：#000（边框不会改变颜色）

显示面孔：关闭

（您会注意到文本和背景是相同的颜色（背景不再透明））这一切似乎都是在更新后的美国东部标准时间星期三午夜开始的，我相信这是他们试图解决图像被拉伸问题的结果在饲料中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:39:13.817

这对我有用：

```
<iframe src="//www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Fplatform&amp;width=400&amp;height=558&amp;show_faces=true&amp;colorscheme=dark&amp;stream=true&amp;border_color=%23000000&amp;header=false" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:400px; height:558px;" allowTransparency="true"></iframe> 
```

请记住，您需要在`<head>`标签中添加几行，否则您将看不到正确的结果

```
<link rel="alternate" media="handheld" href="https://developers.facebook.com/docs/reference/plugins/like-box/" />

<link rel="canonical" href="https://developers.facebook.com/docs/reference/plugins/like-box/" />

<meta property="og:url" content="http://developers.facebook.com/docs/reference/plugins/like-box/" /> 
```

您可以在阅读 FB API 文档后调整这些值。

# php - PHP foreach 导致换行

> ID：13789790
> 
> 赞同：-2
> 
> 时间：2012-12-09T17:28:31.317
> 
> 标签：php, foreach, line-breaks

```
$url = "http://eu.battle.net/wow/en/character/haomarush/caffer/advanced";
$html = file_get_html($url);
foreach($html->find('ul.summary-audit-list') as $e)

echo $e->plaintext; 
```

我想回显每个结果以使其后面有 <.br/> 标记。

```
echo $e->plaintext."<br />"; 
```

不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:30:09.990

```
$url = "http://eu.battle.net/wow/en/character/haomarush/caffer/advanced";
$html = file_get_html($url);
foreach($html->find('ul.summary-audit-list') as $e)
    echo $e->plaintext."<br />"; 
```

如果你只想要一个没有

```
<br /> 
```

使用 "\n" ... 这是新行的缩写

如果您的 $e->plaintext 包含任何其他标签，例如

```
'<li>' 
```

如果你`<li> with <span>`喜欢你的例子，你可以做这样的事情

```
echo str_replace(array("</li>", "</span>"), array("</li>\n", "</span>\n"), $e->plaintext); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T15:32:41.953

你有

回显 $e-> 明文。"
"

但是当你连接你做

回显 $e-> 明文。"
"

你也应该这样做来打印你的结果

```
 foreach($e as $row){

        print $row."<br>";

    } 
```

# java - Java 文件上传到 MySQL

> ID：13789797
> 
> 赞同：5
> 
> 时间：2012-12-09T17:29:34.010
> 
> 标签：java, mysql, jdbc, blob, r.java-file

我有这个问题，`java.io.File`从选择一个`JFileChooser`将所述`java.io.File`对象上传到具有此表结构的 MySQL 表

```
 COL_NAME  COL_TYPE     ATTRIBUTES        EXTRA
(PK) idSample  int(10)      UNSIGNED ZEROFILL AUTO_INCREMENT
     FileName  varchar(250)
     FileBin   blob         BINARY 
```

并且从这个 Java 代码中，该`newConnection`方法是类的静态方法，其中它将 DriverManager 默认的新实例返回到所述 MySQL 数据库。另一件事，我使用的是`java.sql`包而不是`com.mysql.jdbc`包。

```
public static boolean insert(final String filename, File file) throws SQLException, IOException {
    boolean flag = false;
    try {
        Connection connection = newConnection();
        PreparedStatement statement = connection.prepareStatement(SQL_INSERT);
        statement.setString(1, filename);
        statement.setBlob(2, new FileInputStream(file), file.length());
        flag = statement.executeUpdate() > 0;
        statement.close();
        connection.close();
    } catch (SQLException ex) {
        throw ex;
    } catch (IOException ex) {
        throw ex;
    }
    return flag;
} 
```

当我尝试运行该程序时，它返回一个错误，导致`statement.setBlob`具有此堆栈跟踪的行：

```
Exception in thread "main" java.lang.AbstractMethodError: com.mysql.jdbc.PreparedStatement.setBlob(ILjava/io/InputStream;J)V 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T19:01:58.497

`AbstractMethodError`意味着您的 JDBC 驱动程序`PreparedStatement`没有实现`setBlob(int, InputStream, long)`.

使用较旧`setBlob(int, Blob)`的驱动程序或更新您的驱动程序（Connector/J 5.1 实现了 Jdbc 4.0，这应该是您需要的`setBlob(int, InputStream, long)`）

# java - 将 HTML 转义字符串转换为纯 Unicode/ASCII

> ID：13789799
> 
> 赞同：5
> 
> 时间：2012-12-09T17:29:55.577
> 
> 标签：java, android, html

> **可能重复：**
> [Java：如何在 Java 中解码 HTML 字符实体，如 HttpUtility.HtmlDecode？](https://stackoverflow.com/questions/994331/java-how-to-decode-html-character-entities-in-java-like-httputility-htmldecode)

是否有 Java/Android 方法可以将 HTML 转义字符串（例如`&Ouml;`or `&szlig;`）转换回它们的 ASCII/Unicode 表示形式（例如`Ö`or `ß`）？

我当然不想做一个简单的字符串替换并尝试只使用每个存在的 HTML 转义序列，我猜有一个现成的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-09T17:45:56.627

用这个：

```
import org.apache.commons.lang.StringEscapeUtils;

public class StringEscapeUtilsTrial {
public static void main(String[] args) {
    String strHTMLInput = "<p>MyName<p>";
    String strEscapeHTML = StringEscapeUtils.escapeHtml(strHTMLInput);
    String strUnEscapeHTML = StringEscapeUtils.unescapeHtml(strEscapeHTML);
    System.out.println("Escaped HTML >>> " + strEscapeHTML);
    System.out.println("UnEscaped HTML >>> " + strUnEscapeHTML);
    }
} 
```

# c# - 没有重载匹配委托..为什么？

> ID：13789802
> 
> 赞同：1
> 
> 时间：2012-12-09T17:30:24.517
> 
> 标签：c#

我有这个代码：

```
Button ssr = new Button();
                ssr.Text = "SSR";
                ssr.Location = new Point(500, 5);
                ssr.Size = new Size(50, 30);
                ssr.Click += new EventHandler(ssr_Click); 
```

我有一个方法 ssr_Click 在按钮上写了一个“1234”。那只是为了测试，现在方法如下所示：

```
private void ssr_Click(string callsign, object sender, EventArgs e)
    {
        using (var wb = new WebClient())
        {
            string url = "xxxxxxxx";
            WebRequest request = WebRequest.Create(url);
            request.Method = "POST";
            string postData = "callsign=" + callsign;
            byte[] byteArray = Encoding.UTF8.GetBytes(postData);
            request.ContentType = "application/x-www-form-urlencoded";
            request.ContentLength = byteArray.Length;
            Stream dataStream = request.GetRequestStream();
            dataStream.Write(byteArray, 0, byteArray.Length);
            dataStream.Close();
            WebResponse response = request.GetResponse();
            Console.WriteLine(((HttpWebResponse)response).StatusDescription);
            dataStream = response.GetResponseStream();
            StreamReader reader = new StreamReader(dataStream);
            string squawk = reader.ReadToEnd();
            System.Windows.Forms.MessageBox.Show(squawk); // !!!
            reader.Close();
            dataStream.Close();
            response.Close();
        }
    } 
```

没关系，它只是不知道“呼号”，这是有道理的，因为它是在其他地方定义的，所以我在方法参数中添加了“字符串呼号”，当我调用它时，我也会给它呼号. 因为我这样做了，我在第一部分代码中遇到了错误，在

```
ssr.Click += new EventHandler(ssr_Click); 
```

它说：“ssr_Click”没有重载与委托“System.EventHandler”匹配。在编辑此方法之前很好。它应该这样做：有人单击按钮，它将呼号发送到方法，从网站上的 .php 获取四位数代码，并将代码写在按钮上，所以我知道我还必须编辑该方法，使其返回一个字符串，但首先我需要解决这个问题。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:35:02.133

[`EventHandler`](http://msdn.microsoft.com/en-us/library/system.eventhandler.aspx)是一个委托类型，定义为：

```
public delegate void EventHandler(object sender, EventArgs e); 
```

因此您的处理程序方法必须具有相同的签名，即

```
private void ssr_Click(object sender, EventArgs e) 
```

在您的处理程序中，`sender`应该是引发事件的对象，因此您可以从中获取`callsign`数据，或者您可以将其存储在成员变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:34:20.607

`string callsign`从事件处理程序方法中删除第一个参数。按钮事件的事件处理程序`Click`应该接受两个参数 - 发送者和事件参数。

请记住，此方法应由按钮调用。`callsign`Button 对您的参数一无所知。所以，你需要自己获取这个值：

```
private void ssr_Click(object sender, EventArgs e)
{
     string callsign = // get your value e.g. from textbox

     // call to web service
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T17:34:27.697

**[EventHandler](http://msdn.microsoft.com/en-us/library/system.eventhandler.aspx)**委托需要一个只返回`void`和接收**两个**参数的方法。第一个 type `Object`（即发件人）和第二个 type `EventArgs`。一旦您添加了另一个参数，您就更改了函数的签名，它不再与预期的委托相同。

解决方案：`string callsign`从方法的参数中删除 ，使其看起来像这样：

```
private void ssr_Click(object sender, EventArgs e) 
```

# windows - 以编程方式获取 Windows 应用商店应用信息

> ID：13789804
> 
> 赞同：0
> 
> 时间：2012-12-09T17:30:32.837
> 
> 标签：windows, windows-phone, windows-store-apps, windows-store

Windows Phone Store[有一个 API](http://www.manyniches.com/windows-phone/crawling-the-windows-phone-marketplace/)，用于获取有关应用程序和评论的信息。

Windows 应用商店应用程序是否存在类似的 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T07:32:00.253

@sashaeve Windows Phone Store**没有**API 来获取有关应用程序及其评论的信息。您链接到的帖子的作者明确表示，此信息是通过窥探网络获得的（使用 Fiddler - 您也可以使用其他工具）并查看使用 Zune 软件（或网络市场）时流量流入的格式) 浏览商店。

您基本上可以使用 Windows 应用商店做同样的事情，当您在 Windows 8 机器上浏览应用商店应用程序时，当您看到通过网络发送的内容时，可以获取对应用商店进行的调用的格式。

# google-chrome-extension - 动态改变 chrome.browserAction.onClicked 行为

> ID：13789808
> 
> 赞同：0
> 
> 时间：2012-12-09T17:31:09.067
> 
> 标签：google-chrome-extension

再会！

我有一个简单的 chrome 扩展，可以更改网页的 DOM（更准确地说，它对评论进行排序）。我有一个包含以下代码的**background.js ：**

```
chrome.browserAction.onClicked.addListener(function(tab) {
  chrome.tabs.executeScript(
      null, {file : "app.js"});                                                                                                                                                                         
}); 
```

因此，当我单击扩展程序的图标时，**app.js 就会执行。**

我想通过第二次单击该图标来重置所有更改。理想情况下，如果我第三次单击该图标，页面将再次排序，依此类推。有没有一种简单的方法可以做到这一点？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:02:14.997

无法让 Chrome 自动撤消对`app.js`页面 DOM 所做的更改，但您可以`app.js`撤消它自己的修改。要么检测`app.js`第二次运行（将注入脚本中的全局变量设置到[扩展程序的孤立世界中](http://developer.chrome.com/extensions/content_scripts.html#execution-environment)），要么在每个选项卡中注入一次脚本并[发送消息](http://developer.chrome.com/extensions/extension.html#event-onMessage)告诉它要将页面放入哪个状态。

在每个选项卡中只注入一次脚本而不使其成为内容脚本看起来很棘手，这会阻止您使用即将到来的[`activeTab`](http://developer.chrome.com/beta/extensions/activeTab.html)权限，因此`app.js`记住可能会更好，除非您已经出于其他原因确保单次注入。

# iphone - 如何让用户选择 AVAudioPlayer 播放音频的循环次数

> ID：13789811
> 
> 赞同：0
> 
> 时间：2012-12-09T17:31:12.010
> 
> 标签：iphone, ios6, avaudioplayer

我正在使用 AVAudioPlayer 播放 AudioFile。现在有时用户想要设置音频文件的重复。那么我如何为用户提供此选项来设置播放音频文件的循环数。

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:39:38.307

将属性 numberOfLoops 设置为 -1，它将进入无限循环。

# llvm - 使用libclang，如何在函数调用时获取游标声明类型的游标？

> ID：13789814
> 
> 赞同：5
> 
> 时间：2012-12-09T17:31:24.043
> 
> 标签：llvm, clang, libclang

我有一个光标指向一个函数调用，该函数调用的原型在包含的头文件中声明。我想获取此类声明的位置，但是从下面的 gdb 输出中可以看出，在获取函数调用的类型后，获取声明类型的光标失败，如何正确处理？

```
(gdb) n
66      CXType mickey_type = clang_getCursorType(mickey_cursor);
(gdb) n
67      CXCursor mickey_decl_cursor = clang_getTypeDeclaration(mickey_type);
(gdb) n
68      CXSourceLocation mickey_decl_location = clang_getCursorLocation(mickey_decl_cursor);
(gdb) p mickey_type 
$1 = {
  kind = CXType_FunctionProto, 
  data = {0x102826cb0, 0x100a03d90}
}
(gdb) print mickey_decl_cursor 
$2 = {
  kind = CXCursor_NoDeclFound, 
  xdata = 0, 
  data = {0x0, 0x0, 0x0}
}
(gdb) q 
```

这是所有相关的源代码：

*   [实验室.cpp](http://ideone.com/N5kfSh)
*   [米奇.cpp](http://ideone.com/gs1bVG)
*   [米妮.h](http://ideone.com/egtfJT)
*   [米妮.cpp](http://ideone.com/YToMYS)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T21:25:38.733

呸，我的错，我应该`clang_getCursorReferenced`改用...函数类型的声明没有位置！我必须寻找函数声明。

[固定代码](http://result.dabblet.com/gist/6570366)

# c++ - 控制地图中元素的顺序

> ID：13789818
> 
> 赞同：0
> 
> 时间：2012-12-09T17:31:37.180
> 
> 标签：c++, map, iterator

我创建了一张地图：

```
map<string, string> cuts;

cuts["cutb"] = "a>1";
cuts["cuta"] = "b>3";
cuts["cutc"] = "c<5"; 
```

当我遍历这张地图时，`map<string, string>::iterator itr = cuts.begin();`它会按字母顺序排列：cuta、cutb、cutc 等。

如何强制迭代器遵循我定义元素的顺序，即cutb、cuta、cutc？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T17:34:25.283

您需要使用数据结构的其他一些实现。在您的情况下，红黑树实现将不适合您。

从更一般的角度来看：如果按添加顺序遍历条目，为什么需要创建映射？成对的列表/数组/向量对您来说不够吗？

**编辑**：提示：每当您选择使用特定的数据结构时，问问自己您需要它支持哪些操作。回答完之后，你应该可以更准确地选择。如果您需要按键查找，按键插入并检查某个键是否存在，则映射很好。但是，您在优化这些操作的实现中付出的代价通常是您丢失了元素的插入顺序。

**EDIT2**：循环遍历对列表：

```
// pair is class in namespace std
vector<pair<string, string> > v;
v.push_back(make_pair("cutb", "a>1"));
v.push_back(make_pair("cuta", "b>3"));
v.push_back(make_pair("cutc", "c<5"));
for (int i = 0; i < v.size(); i++) {
  // the first element of the pair is addressed with .first; the second - .second
  cout << "For key " << v[i].first << " the value is "  << v[i].second << endl;
} 
```

向量中的迭代也可以使用迭代器来完成，但我更喜欢索引方法，因为它同样是最优的，但更容易理解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T17:35:06.173

你不能（或者如果你可以，你不应该）。如果需要保留顺序，则需要另一种数据结构。试试 STL`vector`

[http://www.cplusplus.com/reference/vector/vector/](http://www.cplusplus.com/reference/vector/vector/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T17:50:31.827

Ok this is going to be a little bit more readable:

```
typedef std::pair<std::string, std::string> item;
std::vector<item> vec; 
vec.push_back(item("hello", "world"));
vec.push_back(item("abc", "efg"));

for (size_t i = 0; i < vec.size(); ++i) {
    std::cout << vec.at(i).first << " " << vec.at(i).second << std::endl;
} 
```

# c# - ASP.net 中该表达式的编程含义是什么？

> ID：13789819
> 
> 赞同：0
> 
> 时间：2012-12-09T17:31:40.120
> 
> 标签：c#, asp.net, session, expression

ASP.net 中该表达式的编程含义是什么？

```
List<int> productsInCart = (List<int>)Session["cart"]; 
```

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T18:06:30.997

这不是一种`ASP.NET`语法，而是`C#`一种。

`Session`看起来是一个关联数组，其索引类型为`string`。`["cart"]`是索引，即通过它的索引或“地址”访问数组元素，这里是类型`string`。可能您更了解术语“键值存储”，而不是“关联数组”。术语含义相同。

虽然为 Session 定义了 index 类型，但它的内容类型看起来被定义为`object`，即一个类型，它可以容纳任何类型的对象。

`List<int> productsInCart`是名称`productsInCart`和类型变量的定义`List<int>`。这种类型意味着变量包含整数值的列表（即非固定长度数组）。可能这些值是商品的 id。

`(List<int>)`是类型转换，这`C#`意味着只是检查，`object`从`Session`数组中检索的 an 实际上是 type `List<int>`。

在`C#`任何子类型中都可以分配给超类型变量而无需检查。例如，`List<int>`变量可以分配给`object`。这总是可能的，并且不需要强制转换。反向分配并非总是可行的。只有那些`onject`s 可以分配给`List<int>`实际上具有这种类型的变量。因此需要显式类型转换，如果类型不正确，它将作为异常源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T17:33:08.583

此表达式是`creating`int 类型的列表，来自 Session 中的现有列表对象，该对象在分配之前`key cart`进行类型转换`list<int>`。

*   `Session["cart"]`Session 是一个持有对象的集合，持有`Session["cart"]`对象的键名是cart。

*   `(List<int>)`用于类型转换返回的对象`Session["cart"]`

*   `List<int> productsInCart`创建类型的对象`List<int>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T17:40:04.200

编码

```
 (List<int>) 
```

是类型转换。这意味着它正在转换

```
 Session["cart"] 
```

进入整数类型列表并将该列表保存在 productInCart 列表中。

# java - 动态加载抽象工厂

> ID：13789820
> 
> 赞同：1
> 
> 时间：2012-12-09T17:31:39.987
> 
> 标签：java, design-patterns, dynamic-class-loaders

我正在尝试创建抽象工厂模式的一些变体。
工厂应该允许像插件一样插入具体工厂的新实现。

例如

```
public class AbstractFactory  
{  
  //some code here  
  public static void addNewImpl(String implName, /*class path or something else*/)  
  {  
    //dynamic class validity check  
    //save class somehow (db I guess)  
  }  

  public static getImpl(String name)
  {
    //is impl available  
    //return if valid  
  }  
} 
```

我不确定我是否正确地解决了这个问题，或者我是否应该重新考虑我的设计。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T18:08:51.157

我会这样继续：

*   让你的代码编译:-)
*   您需要定义一个构建目标对象的工厂接口
*   由于您的类通常在应用程序启动时加载，因此您的 DelegateFactory（您称之为 AbstractFactory）在启动时从类路径读取属性文件就足够了。
*   对于属性文件中的每个条目，使用键作为 lokup，类名作为条目的值。
*   坐下来

# performance - 在 Python 2.* 中哪个有更多开销？

> ID：13789821
> 
> 赞同：1
> 
> 时间：2012-12-09T17:31:40.020
> 
> 标签：performance, floating-point, python-2.x, integer-division

假设我想在 Python 2.*（主要是 6 和 7）中划分两个变量，它们被认为是整数。例如：

```
a, b = 3, 2
print a/b
# Prints "1" 
```

现在，我知道至少有两种（非冗余）方法可以使这种除法正常，浮点除法（不运行 a `from __future__ import division`）。他们是：

```
print a*1.0/b      # Of course you could multiply b by 1.0 also 
```

和

```
print float(a)/b   # Here you could also have cast b as a float 
```

这些方法中的一种是否比另一种具有优势（在速度方面）？一个比另一个有更多的开销吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:38:51.787

```
>>> timeit.timeit(stmt="a*1.0/b",setup="a,b=3,2",number=100)
4.669614510532938e-05
>>> timeit.timeit(stmt="float(a)/b",setup="a,b=3,2",number=100)
7.18402232422477e-05 
```

从上面可以看出，简单的 using比 using`a*1.0/b`快得多`float(a)`。这是因为在 Python 中调用函数非常昂贵。话虽如此，您可以执行以下操作：

```
a,b=float(3),2
print a/b 
```

您将获得以下基准：

```
>>> timeit.timeit(stmt="a/b",setup="a,b=float(3),2",number=100)
2.5144078108496615e-05 
```

这是因为您只调用`float()`一次，那是在分配`a`. 这反过来又不需要`1.0*a`考虑 ，从而提供更快的结果。

使用模块进一步分解它`dis`，您可以在循环中看到对此的实际调用：

**除法期间浮动**

```
def floatmethod():
    a,b=3,2
    while True:
        print float(a)/b 
```

**在除法 dis 结果期间浮动**

```
dis.dis(floatmethod)
  2           0 LOAD_CONST               3 ((3, 2))
              3 UNPACK_SEQUENCE          2
              6 STORE_FAST               0 (a)
              9 STORE_FAST               1 (b)

  3          12 SETUP_LOOP              25 (to 40)
        >>   15 LOAD_GLOBAL              0 (True)
             18 POP_JUMP_IF_FALSE       39

  4          21 LOAD_GLOBAL              1 (float)
             24 LOAD_FAST                0 (a)
             27 CALL_FUNCTION            1
             30 LOAD_FAST                1 (b)
             33 BINARY_DIVIDE       
             34 PRINT_ITEM          
             35 PRINT_NEWLINE       
             36 JUMP_ABSOLUTE           15
        >>   39 POP_BLOCK           
        >>   40 LOAD_CONST               0 (None)
             43 RETURN_VALUE 
```

***速度下降*的原因**

 *这个方法慢得多的原因是因为它必须先获取( )`LOAD_GLOBAL: float`的值，然后调用( )。然后它最终执行除法 ( )，所有这些都在循环期间一遍又一遍地完成。`a``LOAD_FAST: a``float(a)``CALL_FUNCTION``BINARY_DIVIDE`

**浮动分配**

```
def initfloatmethod():
    a,b=float(3),2
    while True:
        print a/b 
```

**浮动分配 dis 结果**

```
dis.dis(initfloatmethod)
  2           0 LOAD_GLOBAL              0 (float)
              3 LOAD_CONST               1 (3)
              6 CALL_FUNCTION            1
              9 LOAD_CONST               2 (2)
             12 ROT_TWO             
             13 STORE_FAST               0 (a)
             16 STORE_FAST               1 (b)

  3          19 SETUP_LOOP              19 (to 41)
        >>   22 LOAD_GLOBAL              1 (True)
             25 POP_JUMP_IF_FALSE       40

  4          28 LOAD_FAST                0 (a)
             31 LOAD_FAST                1 (b)
             34 BINARY_DIVIDE       
             35 PRINT_ITEM          
             36 PRINT_NEWLINE       
             37 JUMP_ABSOLUTE           22
        >>   40 POP_BLOCK           
        >>   41 LOAD_CONST               0 (None)
             44 RETURN_VALUE 
```

***提速*的原因**

 *您可以看到，在执行除法的那一行，它不再需要调用 float 函数，允许立即执行除法。它只是调用`LOAD_GLOBAL: float`和调用`CALL_FUNCTION`一次，这是在分配中，而不是在循环中。这意味着它可以直接跳到`BINARY_DIVIDE`通话中。

用于此基准的统计数据：

```
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win32 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T17:38:26.560

使用 Python 2.7.3：

```
In [7]: %timeit a*1.0/b
10000000 loops, best of 3: 165 ns per loop

In [8]: %timeit float(a)/b
1000000 loops, best of 3: 228 ns per loop 
```

所以第一种方法显得稍微快一些。

也就是说，在开始微优化之前分析您的代码总是值得的。**

# html - PHP按钮名称更改

> ID：13789822
> 
> 赞同：0
> 
> 时间：2012-12-09T17:31:42.077
> 
> 标签：html

这是我的代码，它显示一个“提交查询”按钮，我该如何更改它的名称？

```
<form method="post">
<input type="submit" name="submit">
</form>

<?php
if(isset($_POST['submit'])){
    $output = shell_exec('cd /home && ls');
    echo "<pre>$output</pre>";
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T17:32:42.133

```
<input type="submit" name="submit" value="YOUR BUTTON NAME"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:33:47.390

添加值属性

```
<input type="submit" name="submit" value="Send form"> 
```

# obiee - 表功能作为 Oracle BI EE 中的物理表

> ID：13789824
> 
> 赞同：1
> 
> 时间：2012-12-09T17:31:56.207
> 
> 标签：obiee, pipelined-function

如何在 Oracle BI EE 中将 oracle 表函数导入为物理表？假设它是

select * from scheme.table_function1(adate)

将其设置为 BI 物理表的正确语法是什么？如何指定输入参数（adate）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:45:58.840

在存储库中手动创建一个新的物理表，将表类型设置为“选择”并包含您的 sql 查询。

您是否使用存储库变量作为输入参数？假设 ADATE 是存储库字符串变量，则语法为

```
select * from scheme.table_function1(  'valueof(ADATE)'  ) 
```

您必须手动将列添加到新的物理表中，并确保它们与 sql 结果匹配。

链接：
[不透明视图](http://docs.oracle.com/cd/E23943_01/bi.1111/e10540/physicallayer.htm#BIEMG212)
[变量语法](http://docs.oracle.com/cd/E23943_01/bi.1111/e10544/analyses.htm#BIEUG2795)

# bash - 截断超过 255 个字符的文件名

> ID：13789830
> 
> 赞同：1
> 
> 时间：2012-12-09T17:32:28.177
> 
> 标签：bash, sed, fat32

我正在尝试将一些具有长文件名的文件复制到旧的 Windows XP 32 位 FAT32 系统上，但我收到了文件名过长的错误。如何递归搜索目录中大于或等于 255 个字符的文件名并根据 FAT32 文件系统截断它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T18:44:05.103

我确信`find`可以完成整个工作，但我无法完成最后一步，所以不得不使用一些`bash`foo：

```
#/bin/bash

find . -maxdepth 1 -type f -regextype posix-extended -regex ".{255,}" |
while read filename
do 
    mv -n "$filename" "${filename:0:50}"
done 
```

用于`find`获取文件名大于或等于 255 个字符的所有文件：

`find . -maxdepth 1 -type f -regextype posix-extended -regex ".{255,}"`

将这些文件名截断为 50 个字符，`-n`不要覆盖现有文件。

`mv -n "$filename" "${filename:0:50}"`

*注意：这可以与任何人的`-exec`选项一起使用吗？*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:38:32.303

干得好：

```
find /path/to/base/dir -type f | \
while read filename
do
    file="${filename%%.*}"
    ext="${filename##*.}"
    if [[ "${#file}" -gt 251 ]]; then
         truncated=$(expr $file 1 251)
         mv "${filename}" "${truncated}"."${ext}"
    fi     
done 
```

我实际上也不知道如何做到这一点，但是[对“unix truncate file name”的第一个 Google 结果进行](http://www.unix.com/unix-dummies-questions-answers/40195-how-can-i-truncate-filenmes.html)一些简单的修改就足以产生上述解决方案。先自己试试吧；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T18:17:32.807

您可以`perl`在终端中执行此操作：

```
cd /d \path\to\dir
find . -type f |
    perl -F'[/\\]' -lane '
        $f = $F[-1];
        ($ext) = $f =~ /(\.[^.]+)$/;
        delete $F[-1];
        $path = join "/", @F;

        if (length($f) > 255) {
            $c++;
            rename "$path/$f", "$path/truncated_$c$ext"
        }
    ' 
```

重命名的文件将如下所示：

```
truncated_1.ext
truncated_2.ext
(...) 
```

# c - 在c中创建树节点，对树进行硬编码

> ID：13789831
> 
> 赞同：0
> 
> 时间：2012-12-09T17:32:31.000
> 
> 标签：c

我这里要实现的程序是通过硬编码构造一棵树，然后打印出硬编码树。我从一个结构开始，它包含一个对象名称、一个问题和一个指向同一结构的是或否节点。在主要方法中，我尝试逐步构建结构。但我认为这不是用节点创建树的正确方法。

我的设计描述：这是计算机和用户之间的游戏，计算机提出问题，然后用户回答是或否，计算机将猜测对象。

```
 Start here
                       |
                       v
              Does it have a tail?
             /yes               no\
            v                      v
       a pangolin         Is it flat, round and edible?
                              /yes               no\
                             v                      v
                        a pizza                    Pete

#include <stdio.h>
#include <stdlib.h>
//object name as key, questions as value
struct node {
  char *objectname;// a string declaration to hold an object-name (which may be NULL)
  char *question;// a string declaration to hold a question (which may be NULL)
  struct node *yes_ptr; // only NULL for objects
  struct node *no_ptr; // only NULL for objects

};

typedef struct node thenode;

thenode *objectname = NULL;
thenode *question =NULL;

void nodePrint(struct node *ptr){

if(ptr->objectname == NULL)
{
    printf("Object : [NOTHING]" );
    printf("Question : %s", ptr->question);
    printf("Yes : &s", ptr->yes_ptr);
    printf("No : &s", ptr->no_ptr);

}else {
    printf("Object : %s", ptr->objectname);
    printf("Question : [NOTHING]");
}
}

int main(argc, **argv){
//if ((new_obj = malloc(sizeof(thenode))) == NULL) { abort(); }

thenode a={NULL, "Does it have a tail?", "a pangolin", "pete"};
thenode b={"a pizza",NULL, NULL, NULL};
//thenode c={NULL, "Is it flat, round and edible?", "a pizza", "pete"};
//thenode c={NULL, "Can you dip it in your tea? ", "biscuit", "a pizza"};
struct node *ptr = &thenode;
nodePrint(&a);
nodePrint(&b);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:52:23.713

我想我理解你想要达到的目标，但是：这个

```
typedef struct node thenode; 
```

定义用户类型，这意味着，您没有声明结构节点类型的变量，而是声明了新类型，即结构节点。

这个

```
thenode *objectname = NULL; 
```

不会将节点的内部变量对象名设置为 NULL，这会声明一个新指针，指向您之前定义的节点类型的变量。

这个

```
struct node *ptr = &thenode; 
```

声明一个指向 node 的新指针并分配 !type! 的地址 到它的节点。（我真诚地希望这是不可编译的）。

我建议看一些描述 C 中动态内存分配的教程。它应该如下所示：

```
typedef struct {
   ...
}
thenode;

int main () {
   thenode *node;
   ...
   if ((node = malloc(sizeof(thenode))) == NULL) fail_somehow();
   ...
   node->something = something;
   ...
   free(node);
   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T17:44:32.657

您可能会考虑将树实现为数组！该方案将占用更多内存（数组大小`2^n`而不是一组大小指针`n`），但是，我怀疑对树本身进行编码会变得更简单。您可以稍后将其重构为实际的“树”结构。

您可以在 Internet 上找到很多地方描述如何执行此操作。但是假设你有一棵这样的树：

```
 A
   / \
  B   C
 / \
D   E 
```

代表树的数组如下所示：

树 = [A, B, C, D, E]

对于数组 position 中的每个节点`n`，左孩子将位于 position `(2n + 1)`，右孩子将位于`(2n + 2)`.

所以，给定你的树——你大概已经创建了，也许是手工创建的——你会确切地知道在数组中放置每个节点 ( `tree[n] = struct node`) 的位置，并且你可以轻松地遍历它。您甚至可以有一个文件，其中每一行都是树的一个“节点”，并且行号与数组位置相同。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T18:20:48.703

您可以将“常量”数据放入数组中，包括指针。

```
thenode thenodes[] =
/* 0 */ {{ NULL, "Does it have a tail?", thenodes+1,thenodes+2}
/* 1 */ ,{ "a pangolin", NULL,NULL,NULL}
/* 2 */ ,{ NULL, "Is it flat, round and edible?", thenodes+3 , thenodes+4 }
/* 3 */ ,{"a pizza",NULL, NULL, NULL}
/* 4 */ ,{ "pete", NULL,NULL,NULL}
        };

void nodePrint(struct node *ptr){

if (!ptr) return;
    printf("{" );
if (ptr->objectname == NULL) {
    printf("Object : [NOTHING]" );
    printf("Question : %s", ptr->question);
    printf("Yes : " ); nodePrint(ptr->yes_ptr);
    printf("No : "); nodePrint(ptr->no_ptr);

    }else {
    printf("Object : %s", ptr->objectname);
    printf("Question : [NOTHING]");
    }
    printf("}" );
}

int main(int argc, char **argv){
struct node *ptr = thenodes;

nodePrint(ptr);

return 0;
} 
```

# c# - 如何用@“c:\test.zip”替换包含“c:\test.zip”的字符串

> ID：13789835
> 
> 赞同：2
> 
> 时间：2012-12-09T17:33:04.887
> 
> 标签：c#, directory

我的问题是：

我需要编写一个压缩一个文件的应用程序。

应用程序成功地从用户定义的位置读取文件，但问题是，我无法将存档文件名写入指定文件夹而不会出现烦人的错误：`"The process cannot access the file 'C:\Users\bg\Desktop\1323.zip`'因为它正在被另一个进程使用。”在这一行：archiver.OpenArchive( `System.IO.FileMode.Create`);

这是我的c尖锐代码：

```
private void zipThatFileToolStripMenuItem_Click(object sender, EventArgs e)
    {
        Stream myStream;
        SaveFileDialog saveFileDialog1 = new SaveFileDialog();

        saveFileDialog1.Filter = "zip files (*.zip)|*.zip|All files (*.*)|*.*";
        saveFileDialog1.FilterIndex = 1;
        saveFileDialog1.RestoreDirectory = true;

        if (saveFileDialog1.ShowDialog() == DialogResult.OK)
        {
            if ((myStream = saveFileDialog1.OpenFile()) != null)
            {
                ZipForge archiver = new ZipForge();

                // The name of the ZIP file to be create
                string env = saveFileDialog1.FileName;
                //MessageBox.Show(env);

                //this doesn't work
                archiver.FileName = env;

                //this works
                //archiver.FileName = @"D:\test.zip";

                // Specify FileMode.Create to create a new ZIP file
                // or FileMode.Open to open an existing archive

                archiver.OpenArchive (System.IO.FileMode.Create);
                // Default path for all operations             
                archiver.BaseDir = @"C:\Users\bg\Desktop\";
                // Add file C:\file.txt the archive; wildcards can be used as well
                archiver.AddFiles(openFileDialog1.FileName);
                // Close archive
                archiver.CloseArchive();
                MessageBox.Show("The archive was created! ");
                myStream.Close();
            }
        } 
```

我正在使用这个[http://www.componentace.com/zip-file-in-c-sharp.htm](http://www.componentace.com/zip-file-in-c-sharp.htm)和这个[http://www.componentace.com/zip-file-in-c-sharp.htm](http://www.componentace.com/zip-file-in-c-sharp.htm)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:49:08.977

我不能肯定地说，但看起来你试图打开同一个文件两次——第一次是你打电话的时候`"myStream = saveFileDialog1.OpenFile()) != null"`

，当你打电话时`"archiver.OpenArchive (System.IO.FileMode.Create);"`

我建议您在开始存档操作之前关闭 myStream 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T17:50:55.993

考虑到它在您打开文件两次时出现，为什么不在第二次打开它之前调用**myStream.Close()呢？**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T17:59:09.653

我以前从未使用`ZipForge`过，但我可以说，您的问题可能是由于您的文件访问选项而发生的。看`File.Open()`方法；

```
public static FileStream Open(
    string path,
    FileMode mode,
    FileAccess access,
    FileShare share
) 
```

> 定义对文件进行读、写或读/写访问的常量。

# php - 单击链接时运行php代码

> ID：13789838
> 
> 赞同：0
> 
> 时间：2012-12-09T17:33:12.667
> 
> 标签：php, javascript, jquery, ajax, variables

当用户单击链接时，我需要执行一些 php 代码。[我在这里](https://stackoverflow.com/questions/1280767/how-do-i-run-php-code-when-a-user-clicks-on-a-link)找到了答案，并在网站标题中写了这个：

```
<script type="text/javascript">
function sottoponi() {
$.get("sottoponi.php");
return false;
}
</script> 
```

这在正文中，我需要代码：

```
<a href="#" onclick="sottoponi();">Prova</a> 
```

然后我在 sottoponi.php 上写了这个

```
<?php 
$variable= value; 

if ($variable < 1) {
// do some php code;
}

else if ($variable > 1) {
$jav1 = <<<MAR1
<script language="javascript" type="text/javascript">
alert("Error!");
</script>
MAR1;
echo $jav1;
}

?> 
```

我确定我做错了，因为我没有收到警报（而且我确定 $variable > 1 是真的，我回显了变量！）：如何将信息从 sottoponi.php 传递到实际页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T17:37:38.867

你没有得到，`alert`因为你生成的 js 代码没有被添加到页面中。要运行它，您需要从 ajax 请求中获取响应并将其添加到 DOM：

```
function sottoponi() {
    $.get("sottoponi.php", function(response){
        $('body').append(response);
    });
    return false;
} 
```

请注意，此解决方案不是很优雅。在这种情况下，我会用我的 PHP 中的 JSON 响应，所以我们可以很容易地从 js 端知道操作是否成功：

```
function sottoponi() {
    $.getJSON("sottoponi.php", function(response){
        if(response.error !== false) {
            alert("ERROR!");
        }
    });
    return false;
} 
```

用于此的 PHP 将是：

```
<?php 
$variable = value; 
$response = array('error' => false);

if ($variable < 1) {
    // some php logic;
} else if ($variable > 1) {
    $response['error'] = true;
} else {
   // some more logic here if needed
}
echo $json_encode($response);
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T17:40:48.770

如果您想发送整个脚本并对其进行处理，您应该改用 jQuery 的[getScript](http://api.jquery.com/jQuery.getScript/)函数：`$.getScript("sottoponi.php");`尽管将回调函数传递给[get()](http://api.jquery.com/jQuery.get/)来处理结果会更容易混淆：

```
$.get("sottoponi.php", function(res) {
    alert(res);
}); 
```

其中，如果它是一个复杂的结构，您可以使用 PHP 的[json_encode](http://php.net/manual/en/function.json-encode.php)进行编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T17:50:36.540

您正在使用[jQuery.get()](http://api.jquery.com/jQuery.get/)，它是[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)的简写。因此，以下是您可以提交到 sottoponi.php 的一种可能更清晰的方法：

```
$.ajax({
    url: "sottoponi.php",
        type: "POST",
        success:function(result){
            //You can place an alert here such as: alert("Successful Ajax Request Complete");
        }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T02:16:25.023

呵呵，我们澄清一下:-)。好吧，我告诉你。该过程的顺序与该评论相反。将在表中记录第一个数据，然后继续下载。利用我给你的代码，我们将有： if (empty ($ _GET ['filename']) { $ query = "INSERT INTO LOWERED VALUES ('". $ program. "', '". $ username. "' '".$time."') " if ($result = mysql_query($query, $link)) { // 记录正确 } else { // 没有记录记录 } // 继续下载。header("location :".$ program); } else { echo "Error. Invalid file"; } 希望这会有所帮助（我没有深入研究代码，因为没有与数据库服务器的连接，基础的选择等。 ..)，但基本上会。当然，您可以对其进行修改并将标题放在 if 中，当正确记录在表中时，可以更好地控制下载。问候。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-09T17:37:01.227

你混合 PHP 和 Javascript。您不能调用`alert()`PHP 代码。如果你想要一个`alert()`你必须在Javascript中这样做

```
<script type="text/javascript">
function sottoponi() {
$.get("sottoponi.php");
alert("Error!");
return false;
}
</script> 
```

# php - usort() - 如果日期 > 今天

> ID：13789839
> 
> 赞同：0
> 
> 时间：2012-12-09T17:33:21.263
> 
> 标签：php

我正在使用`usort()`. 它按预期工作。但我想稍微扩展一下功能（如果可能的话）。所有>“现在”的日期应该是相反的顺序。换句话说，我希望最接近“现在”的日期位于列表顶部。如果我需要详细说明，请告诉我。我当前的代码：

```
usort($DTO, function($a, $b) {
     return $b['date'] - $a['date'];
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T18:05:01.470

谢天谢地，您使用的是 PHP 5.3 或更高版本，如果没有一流的匿名函数，这样做会很痛苦。

你的排序应该是这样的。我已经用一些示例数据替换了你的变量来演示它是如何工作的。

我可以用两种方式解释您的请求。我将为两者提供示例。

```
$fake_dates = array( 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 );
$current_date = 5;
$picky_date_sort = function($a, $b) use($current_date) { 
    if($a > $current_date && $b <= $current_date)
        return -1;
    if($b > $current_date && $a <= $current_date)
        return 1;
    if($a > $current_date || $b > $current_date)
        return $a - $b;
    return $b - $a; 
};
usort($fake_dates, $picky_date_sort);
print_r($fake_dates); 
```

测试结果为：

```
Array
(
    [0] => 6
    [1] => 7
    [2] => 8
    [3] => 9
    [4] => 5
    [5] => 4
    [6] => 3
    [7] => 2
    [8] => 1
    [9] => 0
) 
```

大于“现在”的日期位于顶部。它们按升序排序，这意味着当您在列表中向下排序时，您将进入更远的未来。当列表的该部分完成并且您再次点击过去时，降序排序返回，较新的日期高于较低的日期。

但是，也可以将您的请求解释为“我不在乎将过去与未来分开，我只想最接近现在的顶部”。这更容易。我们将打破[`abs`](http://php.net/abs)数字之间的绝对差异。

```
$absolute_diff_sort = function($a, $b) use($current_date) {
    $abs_b = abs($b - $current_date);
    $abs_a = abs($a - $current_date);
    return $abs_a - $abs_b;
};
usort($fake_dates, $absolute_diff_sort); print_r($fake_dates); 
```

结果是

```
Array
(
    [0] => 5
    [1] => 6
    [2] => 4
    [3] => 7
    [4] => 3
    [5] => 8
    [6] => 2
    [7] => 1
    [8] => 9
    [9] => 0
) 
```

现在 (5) 在顶部。随着您在列表中走得更远，现在和之后的绝对差异会增加，混合过去和未来的日期。

如果这些解释都不是你的意思，你需要澄清你的问题。

# c++ - 如何将表格输入为数组？

> ID：13789845
> 
> 赞同：0
> 
> 时间：2012-12-09T17:33:47.023
> 
> 标签：c++, visual-c++

我需要输入一个数据文件（如下）：

```
 14        16        18        20        22        24        
        27        30        35        40        45        50

        8         10        11        12        13        14        
        16        18        21        24        27        30

        0.4       0.5       0.5       0.5       0.5       0.5        
        0.6       0.6       0.6       0.6       0.6       0.6

        16        17        18        19        20        21        
        22        23        25        26        27        29

        2.0       2.2       2.2       2.3       2.4       2.5        
        2.6       2.7       2.8       2.9       3.1       3.2

        1.7       1.8       2.0       2.2       2.4       2.5        
        2.8       3.0       3.4       3.8       3.8       3.8 
```

在选择第一列时，将输出这些阀门。

这是我的代码；谁能看到任何错误？

```
void TimberType() {

    ifstream inFile;
    inFile.open("TableOfValues.txt", ios::in );
    string TimberValues;
    inFile >> TimberValues;
    inFile >> bendStr >> tensPara >> tensPerp >> compPara >> compPerp >> shear >> mElasModPara >> elasMod5Para >> mElasModPerp >> mShearMod >> density >> mDensity;

    cout << "Please enter timber type " << endl;
    cout << "C14 = 1        C16 = 2        C18 = 3        C20 = 4" << endl;
    cout << "C22 = 5        C24 = 6        C27 = 7        C30 = 8" << endl;
    cout << "C35 = 9        C40 = 10    C45 = 11    C50 = 12" << endl;
    cin >> timberType;

    {
        switch (timberType) {
        case 1:
            timberType = 1;
            cout << "You have selected timber type C14" << endl;
            cout << TimberValues[1];
            break;
        case 2:
            timberType = 2;
            cout << "You have selected timber type C16" << endl;
            cout << TimberValues[2];
            break;
        case 3:
            timberType = 3;
            cout << "You have selected timber type C18" << endl;
            cout << TimberValues[3];
            break;
        case 4:
            timberType = 4;
            cout << "You have selected timber type C20" << endl;
            cout << TimberValues[4];
            break;
        case 5:
            timberType = 5;
            cout << "You have selected timber type C22" << endl;
            cout << TimberValues[5];
            break;
        case 6:
            timberType = 6;
            cout << "You have selected timber type C24" << endl;
            cout << TimberValues[6];
            break;
        case 7:
            timberType = 7;
            cout << "You have selected timber type C27" << endl;
            cout << TimberValues[7];
            break;
        case 8:
            timberType = 8;
            cout << "You have selected timber type C30" << endl;
            cout << TimberValues[8];
            break;
        case 9:
            timberType = 9;
            cout << "You have selected timber type C35" << endl;
            cout << TimberValues[9];
            break;
        case 10:
            timberType = 10;
            cout << "You have selected timber type C40" << endl;
            cout << TimberValues[10];
            break;
        case 11:
            timberType = 11;
            cout << "You have selected timber type C45" << endl;
            cout << TimberValues[11];
            break;
        case 12:
            timberType = 12;
            cout << "You have selected timber type C50" << endl;
            cout << TimberValues[12];
            break;

        }

        cout << "Bending Strength: " << bendStr << "N/mm^2" << endl;
        cout << "Tension in Parallel: " << tensPara << "N/mm^2" << endl;
        cout << "Tension in Perpendicular: " << tensPerp << "N/mm^2" << endl;
        cout << "Compression in Parallel: " << compPara << "N/mm^2" << endl;
        cout << "Compression in Perpendicular: " << compPerp << "N/mm^2" << endl;
        cout << "Shear: " << shear << "N/mm^2" << endl;

    }
} 
```

目前，我只收到 0 值的弯曲强度、平行张力、垂直张力、平行压缩、垂直压缩和剪切。

任何想法将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:52:26.073

为简单起见，您可以使用数组将值读入 const int ROW = 12, COL = 6; 整数表[行][COL] = {}; istream 文件("TablesOfValues.txt");

```
for(int i = 0; i < ROW && file; ++i){
  for(int j = 0; j < COL && file; ++j){
        file >> table[i][j];
  }
}

//now tables[0][0] = 14
//now tables[1][2] = 35
//added a slash to first comment 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:55:31.177

```
 #include <iostream>
        #include <array>

        string elem[12][7] = {
        //First column is the row number (assuming they're related to timber so starting at 1)
        // Please note these are strings
        { "1",   "14",  "16",   "18",  "20",  "22",  "24"  }
        { "2",   "27",  "30",   "35",  "40",  "45",  "50"  }
        { "3",   "8",   "10",   "11",  "12",  "13",  "14"  }
        { "4",   "16",  "18",   "21",  "24",  "27",  "30"  }
        { "5",   "0.4", "0.5",  "0.5", "0.5", "0.5", "0.5" }
        { "6",   "0.6", "0.6",  "0.6", "0.6", "0.6", "0.6" }
        { "7",   "16",  "17",   "18",  "19",  "20",  "21"  }
        { "8",   "22",  "23",   "25",  "26",  "27",  "29"  }
        { "9",   "2.0", "2.2",  "2.2", "2.3", "2.4", "2.5" }
        { "10",  "2.6", "2.7",  "2.8", "2.9", "3.1", "3.2" }
        { "11",  "1.7", "1.8",  "2.0", "2.2", "2.4", "2.5" }
        { "12",  "2.8", "3.0",  "3.4", "3.8", "3.8", "3.8" }
        }

     void TimberType ()
        {
            ifstream inFile;
            inFile.open ("TableOfValues.txt", ios :: in);
            string TimberValues;
            inFile>>TimberValues;
            inFile>>bendStr>>tensPara>>tensPerp>>compPara>>compPerp>>shear>>mElasModPara>>elasMod5Para>>mElasModPerp>>mShearMod>>density>>mDensity;

            cout << "Please enter timber type " << endl;
            cout << "C14 = 1        C16 = 2     C18 = 3     C20 = 4" << endl;
            cout << "C22 = 5        C24 = 6     C27 = 7     C30 = 8" << endl;
            cout << "C35 = 9        C40 = 10    C45 = 11    C50 = 12" << endl;
            cin >> timberType;  

        {
            switch (timberType)
            {
            case 1:
                timberType = 1;
                cout << "You have selected timber type C14" << endl;
                cout << TimberValues [1];
                break;
            case 2:
                timberType = 2;
                cout << "You have selected timber type C16" << endl;
                cout << TimberValues [2];
                break;
            case 3: 
                timberType = 3; 
                cout << "You have selected timber type C18" << endl;
                cout << TimberValues [3];
                break;
            case 4:
                timberType = 4;
                cout << "You have selected timber type C20" << endl;
                cout << TimberValues [4];
                break;
            case 5:
                timberType = 5;
                cout << "You have selected timber type C22" << endl;
                cout << TimberValues [5];
                break;
            case 6:
                timberType = 6; 
                cout << "You have selected timber type C24" << endl;
                cout << TimberValues [6];
                break;
            case 7:
                timberType = 7;
                cout << "You have selected timber type C27" << endl;
                cout << TimberValues [7];
                break;
            case 8:
                timberType = 8;
                cout << "You have selected timber type C30" << endl;
                cout << TimberValues [8];
                break;
            case 9:
                timberType = 9; 
                cout << "You have selected timber type C35" << endl;
                cout << TimberValues [9];
                break;
            case 10:
                timberType = 10;
                cout << "You have selected timber type C40" << endl;
                cout << TimberValues [10];
                break;
            case 11:
                timberType = 11;
                cout << "You have selected timber type C45" << endl;
                cout << TimberValues [11];
                break;
            case 12:
                timberType = 12; 
                cout << "You have selected timber type C50" << endl;
                cout << TimberValues [12];
                break;

            }

// This is the code you need to edit to search the array

void searchString(string A[],int size, string target)
{
    int j;
    {
    for(j=0; j < size; j++)
        if(A[j] == target)
            cout << A[j] << endl;
        else cout << "Not Found";
    }
}

            cout << "Bending Strength: "<< bendStr << "N/mm^2" << endl;
            cout << "Tension in Parallel: "<< tensPara << "N/mm^2" << endl;
            cout << "Tension in Perpendicular: "<< tensPerp << "N/mm^2" <<endl;
            cout << "Compression in Parallel: "<< compPara << "N/mm^2" << endl;
            cout << "Compression in Perpendicular: "<< compPerp << "N/mm^2" << endl;
            cout << "Shear: "<< shear << "N/mm^2" << endl;

        }
        }

I believe there is a simple search command that will let you reference the timber numbers based on their number. Please post the final code here because I'm actually working on something like this and would love to know how it worked for you. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T19:59:14.783

以下是一些建议：
替换`switch`为表查找：

```
struct Timber_Text_Entry
{
    unsigned int index;
    char const   text;
};

const Timber_Text_Entry Timber_Type_Names[] =
{
    { 1, "C14"}, { 2, "C16"}, {3, "C18"}, {4, "C20"},
//...
};
const unsigned int NUMBER_OF_TIMBER_TYPES =
    sizeof(Timber_Type_Names) / sizeof(Timber_Type_Names[0]);

// Printing the menu contents:
for (unsigned int i = 0; i < NUMBER_OF_TIMBER_TYPES; ++i)
{
  cout << Timber_Type_Names[i].text
       << " = "
       << Timber_Type_Names[i].index;
  if ((i % 4) == 3) cout << "\n";
}

// The switch statement replaced:
if ((timberType > 1) && (timberType <= NUMBER_OF_TIMBER_TYPES))
{
    // This should search for the index == timberType instead
    // of using timberType as an index into the array.
    // The code below assumes the order of the entries will
    // not change.
    // The "-1" is because timberTypes start at 1 and the
    // array indices start at 0.
    cout << "You have selected timber type ";
    cout << Timber_Type_Names[timberType - 1].text;
    cout << endl;
}
else
{
    cout << "Invalid timber selection: " << timberType << endl;
} 
```

# android - 给定某个位图时 startActivity() 失败

> ID：13789848
> 
> 赞同：2
> 
> 时间：2012-12-09T17:34:15.823
> 
> 标签：android, android-intent, bitmap

考虑 a,b,c,d,e 都是不为空的字符串。
我有一个名为**data**的对象，其中包含图像和 prev_image 的 URL。

有一个名为 Games 的活动，通向“MyActivity”。

我的问题是这样的：
如果我尝试“putextra”两个位图，我最终会进入“游戏”，没有给出错误，没有例外，没有任何东西。如果我注释掉我在包中添加“图像”的行，那么一切正常。但我需要在以后的活动中使用图像。所以我必须把它放在那里。我尝试按比例缩小它，但没有帮助，这似乎不是内存问题，但是......我可能是错的:)

```
Bitmap temp = BitmapFactory.decodeStream((new URL(data.getString("image"))).openStream());
image = image = Bitmap.createScaledBitmap(image,300,300,true);

temp = BitmapFactory.decodeStream((new URL(data.getString("image"))).openStream());
prev_image = Bitmap.createScaledBitmap(image,300,300,true);

temp.recycle();

Intent intent = new Intent(MyActivity.this,NextActivity.class);
intent.putExtra("a",a);
intent.putExtra("b",b);
intent.putExtra("c",c);
intent.putExtra("d",d);
intent.putExtra("e",e);
intent.putExtra("image",image);
intent.putExtra("prev_image",prev_image);
startActivity(intent); 
```

任何帮助将非常感激。

编辑：

我想我会添加用于我的应用程序的解决方案。
我最终做的是将位图保存为文件，然后将 URI 传递给活动之间的文件，并且只在需要它们的活动中加载位图。
当然，最终会删除文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:46:04.140

可以在意图中发送的数据有一个最大大小。您的位图可能超过它。大约 50Kb

# ruby - Arity of method delegated with method_missing

> ID：13789849
> 
> 赞同：3
> 
> 时间：2012-12-09T17:34:16.820
> 
> 标签：ruby, delegation, method-missing, arity

When I delegate methods on instances of class `A` to `$delegation_target` as below:

```
$delegation_target = ""
class A
  def method_missing *args, &pr; $delegation_target.send(*args, &pr) end
  def respond_to_missing? *args; $delegation_target.respond_to?(*args) end
end 
```

the `arity` of the methods on instances of `A` returns `-1` irrespective of the `arity` of the methods on `$delegation_target`:

```
def $delegation_target.foo; end
A.new.method(:foo).arity # => -1

def $delegation_target.foo arg1; end
A.new.method(:foo).arity # => -1

def $delegation_target.foo arg1, arg2; end
A.new.method(:foo).arity # => -1

def $delegation_target.foo arg1, arg2, arg3; end
A.new.method(:foo).arity # => -1 
```

Where does this `-1` come from? And, is there a way to make it so that, for any possible method name `m`, `A.new.method(m).arity` returns the arity of `$delegation_target.method(m)` (if it is defined)?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T17:59:32.740

`Object#method` handles `respond_to_missing?` & `method_missing` in a special way. Let's dive into the Ruby C source and see what happens:

Starting at [`Object#method`](https://github.com/ruby/ruby/blob/v1_9_3_327/proc.c#L1177), we call [`mnew`](https://github.com/ruby/ruby/blob/v1_9_3_327/proc.c#L907), which creates a new [`Method`](http://ruby-doc.org/core-1.9.3/Method.html) object for the object it's called on and the id passed. In the source for `mnew` we can easily see the special handling when the method is not defined, but `respond_to_missing?` returns `true` when given the id:

```
if (UNDEFINED_METHOD_ENTRY_P(me)) {
    ID rmiss = rb_intern("respond_to_missing?");
    VALUE sym = ID2SYM(id);

    if (obj != Qundef && !rb_method_basic_definition_p(klass, rmiss)) {
        if (RTEST(rb_funcall(obj, rmiss, 2, sym, scope ? Qfalse : Qtrue))) {
            def = ALLOC(rb_method_definition_t);
            def->type = VM_METHOD_TYPE_MISSING;
            def->original_id = id;
            // ... 
```

The `def->type = VM_METHOD_TYPE_MISSING;` is important. Finding the [definition for `VM_METHOD_TYPE_MISSING`](https://github.com/ruby/ruby/blob/v1_9_3_327/method.h#L44), we see that it is a "wrapper for `method_missing(id)`". So essentially the method that is returned is really just `method_missing`, with the first argument already specified as the id of the method you were originally trying to get.

We can confirm our suspicions by verifying that the arity of `method_missing` is the same as what we're getting:

```
A.new.method(:method_missing).arity  #=> -1 
```

As an aside, an arity of `-1` means that the method can take an unlimited number of arguments.

As for whether you can have it return the "real" arity of the method being called… no, you can't. For one, Ruby makes no assumptions about what happens in your `method_missing`, and doesn't even know that it's simply delegating to some other method.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T17:58:18.233

A negative arity means that there is a final *-prefixed argument. If there is one required argument followed by a *-prefixed one (so one required argument and an optional additional amount), then the arity would be represented as -2, so -n-1, where n is the number of required arguments.

-n-1 is known as the one's complement of n, and ruby even has an operator to get the number of required arguments, the `~` operator.

```
p ~A.new.method(:foo).arity #=> 0 
```

# android - 签名的 APK 不显示 Google 地图背景

> ID：13789850
> 
> 赞同：1
> 
> 时间：2012-12-09T17:34:17.983
> 
> 标签：android, api, key, apk, signed

我无法在我的应用程序中显示 Google 地图。

1.  我创建了一个证书和一个密钥来签署应用程序。

2.  使用此证书，我创建了一个 Google Maps API 密钥 (v1)。

3.  我把这个键放在我`mapView`的 XML 中。

4.  当我以调试模式（使用 Eclipse）启动时，我的应用程序使用此 API 密钥，并且我看到了 Google 地图背景。

5.  当我在 Eclipse 中使用 ADT 签署我的 APK（指向我的密钥库，然后是我的密钥）然后在我的手机上安装此 APK 时，背景不显示。

我试图阅读 logcat，唯一有意义的日志是：

```
12-09 18:19:18.247: W/System.err(9968): IOException processing: 26
12-09 18:19:18.247: W/System.err(9968): java.io.IOException: Server returned: 3
12-09 18:19:18.247: W/System.err(9968):     at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115)
12-09 18:19:18.247: W/System.err(9968):     at         android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473)
12-09 18:19:18.247: W/System.err(9968):     at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117)
12-09 18:19:18.247: W/System.err(9968):     at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:994) 
```

这对我没有多大帮助......

# ruby-on-rails - 在 Ruby on Rails 3.2 应用程序中集成 googlefonts

> ID：13789853
> 
> 赞同：4
> 
> 时间：2012-12-09T17:34:25.117
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asset-pipeline, google-font-api

我必须在一个 Rails 应用程序中使用 Google 的字体。普通的 HTML 代码定义了 googlefonts 的用法，如下所示：

```
<link href='http://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic' rel='stylesheet' type='text/css'> 
```

我试图在我的 alpplication.html.erb 中添加相同的行，但它不起作用。然后我将@font-face 定义（从link-href 指向的位置）提取到一个单独的css.scss 文件中，并将该文件包含在我的清单css 文件中：

```
#googlefonts.css.scss
@font-face {
font-family: 'PT Sans';
font-style: italic;
font-weight: 400;
src: local('PT Sans Italic'), local('PTSans-Italic'), url(http://themes.googleusercontent.com/static/fonts/ptsans/v4/xxxx.woff) format('woff'); 
```

}

```
#application.css

   *= require googlefonts
   *= require_tree . 
```

它没有再次发生。

请帮我解决这个难题。在 Rails 3 应用程序中使用 Google 托管的字体的最佳做法是什么？

编辑：这是我的 css，指的是@font-face 定义：

```
#styles.css.scss
body{
font-family: "PT Sans", Arial, Helvetica, sans-serif;
font-size:13px;
line-height:25px;
text-shadow:none !important;
color:#444;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T19:39:45.263

使用您的示例代码，以下内容对我来说很好：

```
# stick this inside the head section of application.html.erb 
<link href='http://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic' rel='stylesheet' type='text/css'>

# stick this in your css file:
body{
  font-family: "PT Sans", Arial, Helvetica, sans-serif;
} 
```

这就是你所需要的，它工作得很好。我建议放弃 googlefonts.css.scss 文件，除非您有要提供的字体的本地副本。无论如何，谷歌为您提供的链接实际上会为您处理该代码，请自行[查看](http://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T21:24:42.463

我想我发现了问题：

炼油厂有部分头部，位于炼油厂/目录。这个部分的格式是 .erb (default) 。我的 application.html 是 .haml 格式。当我将 _head.thml.erb 转换为 _head.html.haml 时，效果很好。设置 google 字体很简单，就像 Stephenmurdoch 在他的回答中描述的那样。

# php - Safari 不发送“If-Modified-Since”和“If-None-Match”标头

> ID：13789855
> 
> 赞同：12
> 
> 时间：2012-12-09T17:34:29.283
> 
> 标签：php, safari, http-headers, etag, last-modified

我正在使用 PHP 生成动态内容。

我正在发送以下 HTTP 标头：

```
HTTP/1.1 304 Not Modified
Date: Sun, 09 Dec 2012 17:24:41 GMT
Server: Apache
Connection: keep-alive, Keep-Alive
Keep-Alive: timeout=1, max=100
Etag: "237f43b800e655dbe6567f7d32d34c99"
Expires: Sun, 16 Dec 2012 17:24:41 GMT
Cache-Control: max-age=604800
Vary: Accept-Encoding 
```

我稍后检查 Etag`header('HTTP/1.1 304 Not Modified')`是否匹配发送一个。这与 Chrome 和 Firefox 完美配合。但是，Safari（版本 6.0.2）不发送“If-Modified-Since”和“If-None-Match”标头。这是 Safari 在第二页命中时发送的 Request-Header：

```
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.26.17 (KHTML, like Gecko) Version/6.0.2 Safari/536.26.17
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Cache-Control: max-age=0 
```

该页面上链接的所有其他文件都会收到正确的请求标头和 Safari 使用的缓存文件或 304（在适当的情况下）。

为什么不向 Safari 发送正确的请求标头？我能改变什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-24T15:43:34.663

### If-Modified-Since

[If-Modified-Since](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.25)的注释警告不要使用与`Last-Modified`响应标头内容不同的内容：

> 注意：如果客户端在同一请求的 If-Modified-Since 标头中使用任意日期而不是从 Last-Modified 标头中获取的日期，则客户端应注意该日期在服务器的理解中被解释的事实的时间。

您的响应不包含[Last-Modified](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.29)，但即使包含，规范中也没有说明用户代理必须或应该发送 If-Modified-Since，他们只是可以。

### 如果无匹配

至于为什么 Safari 不发送[If-None-Match](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.26)让我失望；您的[ETag](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.19)看起来有效。

### 一般强制缓存

同样，规范中没有任何内容说您必须缓存，只是当您这样做时，您必须遵守[Cache-Control](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9)。所以这有点不对称关系，你可以强制（透明）缓存与源服务器重新检查，但作为源服务器，你不能强制用户代理缓存。

### 我能做些什么呢？

Safari 只是[部分](http://trac.webkit.org/browser/releases/Apple/Safari%205.1/)免费软件。所以没什么，如果添加 Last-Modified 没有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-20T08:05:44.997

我最终通过查找各个大型站点发送的标头来解决这个问题，并最终得到

```
Last-Modified: {some date}
Cache-Control: max-age=0, must-revalidate
Expires: -1 
```

这对我来说是在 Safari 上工作的。

# grails - 使用 rest-client-builder 插件传递自定义标头值的问题

> ID：13789857
> 
> 赞同：1
> 
> 时间：2012-12-09T17:34:33.370
> 
> 标签：grails, grails-plugin, grails-2.0, rest-client

我正在使用最新的 grails (2.1.2) 和 rest-client-builder 插件版本 1.0.3。我正在尝试将自定义请求标头值（例如 SEC_USER）传递给目标服务器，该目标服务器使用此请求标头值对请求进行预身份验证。我正在使用以下代码传递值，但我没有在接收端获得标头值。

```
RestBuilder rest = new RestBuilder(connectTimeout:5000, readTimeout:20000); 
rest.get("<some uri>") { 
    contentType MediaType.APPLICATION_JSON.toString() 
    header("SEC_USER", "foo") 
} 
```

查看 RequestCustomizer header() 方法应该设置 HttpHeaders 字段，因为它调用 headers[name] = value

这可能是该插件在内部使用的 RestTemplate 类（方法交换（...））中的问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T05:20:20.317

Grails 使用动态方法增强了控制器类：

`header(Object instance, String headerName, Object headerValue)`

根据您使用构建器的位置，这可能会被调用，而不是实际将`header()`块传递给构建器。当我将上面的代码放入控制器时，我看到了这种行为。解决这个问题的一种方法是将闭包移到`src/groovy`. 例如，当我将调用代码更改为

```
def check() {
    RestBuilder rest = new RestBuilder(connectTimeout:5000, readTimeout:20000);
    rest.get("http://localhost:8080/so13789857/hello", Thing.getRestBuilderClosure())
} 
```

和关闭来自`src/groovy/so/Thing.groovy`

```
static Closure getRestBuilderClosure() {
    return {
        contentType MediaType.APPLICATION_JSON.toString()
        header("SEC_USER", "foo")
    }
} 
```

它解决了这个问题。

# ruby-on-rails - 在 Heroku 中反向代理 Rails 应用程序

> ID：13789865
> 
> 赞同：2
> 
> 时间：2012-12-09T17:35:05.907
> 
> 标签：ruby-on-rails, reverse-proxy

我正在寻找一种方法来运行多个 Heroku 应用程序并在同一个域下为它们提供服务。

这样做的原因是我想在多个服务器上对我的用户进行分片，以便用户帐户存在于特定的应用程序实例上。每台服务器都有自己的数据库。

最终效果是我可以将新代码推送到其中一个应用程序实例，并且只有该服务器上的用户才能看到新代码。

我研究了机架重写，但它不允许您将请求转发到不同的服务器。

重定向是没有用的，因为无论您转发到哪个服务器，我都希望域名保持不变。

它在某种程度上是一个代理。

有人有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:29:28.040

我自己也在寻找类似的东西。据我所知，您需要使用 nginx 或类似的东西将您的域指向一个服务器，该服务器使用重写规则来代理请求（例如 www.yourdomain.com/blog 在 blog-yourdomain.herokuapp.com 上点击 heroku 应用程序和 www.yourdomain.com/otherstuff 可以去 otherstuff-yourdomain.herokuapp.com）。

也许 CDN 可以做到这一点。我希望 heroku 提供类似的功能。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-09T20:15:52.770

我不完全理解您要做什么，但听起来好像您有多个您希望用户能够访问的应用程序，并让这些用户能够在您正在构建的其他应用程序上使用相同的登录凭据。那么您应该使用 LDAP。这是一个可能有用的教程。[http://corrupt.net/2010/07/05/LDAP-Authentication-With-Devise/](http://corrupt.net/2010/07/05/LDAP-Authentication-With-Devise/)对不起，如果我误解了你的问题。

# php - 如果在 ForEach 内

> ID：13789875
> 
> 赞同：0
> 
> 时间：2012-12-09T17:36:06.110
> 
> 标签：php

这里有我的代码：

```
<?php
$url = "http://feeds.hipertextual.com/alt1040";
$rss = simplexml_load_file($url);
if($rss) {
$items = $rss->channel->item;

    foreach($items as $item) {
        $title = $item -> title;
        $link = $item -> link;
        $description = $item -> description;
        $replace = preg_replace("/<img[^>]+\>/i", "", $description);
        echo utf8_decode("<h3><a href=$link>$title</a></h3>");
        echo utf8_decode("<p>$replace</p>");

    }
}
?> 
```

我从该 URL 获取 RSS 并对其进行解析，这样图像就不会出现。直到这里OK。但现在，我只想显示来自 RSS Feed 的第一条新闻，而不是所有新闻。

如果我数了数，就会发现有 25 条新闻。

```
$count = count ($items);
echo $count; //25 news... 
```

我该怎么做才能只显示第一条新闻？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:40:59.090

在此示例中，您可以插入任何数字而不是 1 项。

```
 <?php
    $url = "http://feeds.hipertextual.com/alt1040";
    $rss = simplexml_load_file($url);
    if($rss) {
    $items = $rss->channel->item;
    $count =0;
        foreach($items as $item) {
            if ($count<1) {
            $title = $item -> title;
            $link = $item -> link;
            $description = $item -> description;
            $replace = preg_replace("/<img[^>]+\>/i", "", $description);
            echo utf8_decode("<h3><a href=$link>$title</a></h3>");
            echo utf8_decode("<p>$replace</p>");
            }
            $count++;
        }
    }
    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:41:52.037

如果您只想显示第一项，则只需将`$item`变量设置为第一项数组。然后你可以跳过整个 foreach：

```
<?php
$url = "http://feeds.hipertextual.com/alt1040";
$rss = simplexml_load_file($url);
if($rss) {
    $item = $rss->channel->item[0];
    $title = $item -> title;
    $link = $item -> link;
    $description = $item -> description;
    $replace = preg_replace("/<img[^>]+\>/i", "", $description);
    echo utf8_decode("<h3><a href=$link>$title</a></h3>");
    echo utf8_decode("<p>$replace</p>");
}?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-09T17:39:04.640

你为什么不试着不回应描述部分？

```
$url = "http://feeds.hipertextual.com/alt1040";
$rss = simplexml_load_file($url);
if($rss) {
$items = $rss->channel->item;
$isNewsPage = true; // set here to false if you are on main page

foreach($items as $item) {
    $title = $item -> title;
    $link = $item -> link;
    $description = $item -> description;
    $replace = preg_replace("/<img[^>]+\>/i", "", $description);
    echo utf8_decode("<h3><a href=$link>$title</a></h3>");

    if($isNewsPage)
        echo utf8_decode("<p>$replace</p>");

} 
```

# c# - 强制在工厂中使用静态方法

> ID：13789878
> 
> 赞同：0
> 
> 时间：2012-12-09T17:36:13.270
> 
> 标签：c#, polymorphism

我正在创建一个工厂，它使用委托在每个注册类型上调用静态方法，以创建该类型的实例。

在工厂中，我有委托定义：

```
public delegate GridColumnBase ColumnFactoryMethod(); 
```

我希望每个继承自`GridColumnBase`的类型都实现一个静态`CreateInstance()`方法。我不能成为`CreateInstance`的`static abstract`成员`GridColumnBase`，那么如何强制每个类都实现此方法？

**编辑：**再想一想，我得出的结论`CreateInstance()`不是继承类的特征`GridColumnBase`，而是希望包含在工厂中的类的特征。也许我不需要在基类级别强制执行此操作。也许我需要把它留给实现类来决定它希望如何参与工厂流程，即将它希望委托的任何功能传递给工厂。除了我之外，这对任何人都有意义吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:45:23.820

您可以创建每个类实现的另一个接口以强制使用静态工厂方法。每种类型都将使用相同或相似的工厂方法吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:38:04.773

我最终选择了巧妙地使用反射。为了在应得的地方给予信任，我根据自己的需要修改了这个解决方案[http://www.matlus.com/high-performance-class-factory/](http://www.matlus.com/high-performance-class-factory/)。

我认为这是解决该问题的一个很好且优雅的解决方案，并且比较我们的分析器的结果，它不会降低性能。

# dom - 在 Dart 中获取元素的全局/文档坐标（又名 $('some').offset()）

> ID：13789879
> 
> 赞同：5
> 
> 时间：2012-12-09T17:36:20.027
> 
> 标签：dom, dart

我试图在 Dart 中获取一个元素（DOM 元素）的文档（全局）坐标，在纯 JavaScript 中，我可以通过 jQuery 使用 $('some_selector').offset() 来获取它。

我一直在查看 Dart dart:html API，但到目前为止还没有运气。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T10:07:22.717

[Element](http://api.dartlang.org/docs/bleeding_edge/dart_html/Element.html)上没有获取该坐标的本机函数。

这是 Dart 的[jQuery.offset()](http://api.jquery.com/offset/)版本：

```
class Position {
  num left, top;
  Position(this.left, this.top);
}

Position offset(Element elem) {
  final docElem = document.documentElement;
  final box = elem.getBoundingClientRect();
  return new Position(box.left + window.pageXOffset - docElem.clientLeft,
                      box.top  + window.pageYOffset - docElem.clientTop);
} 
```

另一种解决方案是通过[js-interop使用](http://pub.dartlang.org/packages/js)[jQuery.offset()](http://api.jquery.com/offset/)：

```
Position jQueryOffset(Element elem) {
  return js.scoped((){
    final offset = js.context.jQuery(elem).offset();
    return new Position(offset.left, offset.top);
  });
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-04-17T10:25:35.407

您应该考虑使用此 Dart Element 方法：[https ://api.dartlang.org/apidocs/channels/stable/dartdoc-viewer/dart:html.Element#id_documentOffset](https://api.dartlang.org/apidocs/channels/stable/dartdoc-viewer/dart:html.Element#id_documentOffset)

# r - 在 R 中的 nlme 模型中为特定组查找 R^2

> ID：13789880
> 
> 赞同：0
> 
> 时间：2012-12-09T17:36:22.377
> 
> 标签：r

首先，让我们认识到使用非线性模型查看 R^2 不是我的选择。但我必须这样做。

我有六次治疗，每次治疗四次。我为每种治疗拟合了一个逻辑模型。我需要找到每个适合治疗的 R^2。我可以在固定效应（所有治疗）上找到模型的 R^2，但后来我对列表在 nlme 中的工作方式感到困惑。我怎样才能要求特定于随机效应（每种治疗）的东西？

也许这个情节会让事情变得更清楚。我将发布的代码会给我蓝线的 R^2，但我想要粉红色的线 R^2。

[链接到预测值图](https://www.dropbox.com/s/k92jyd8a0zzs2q8/accumulative.pdf)

这是我到目前为止运行的代码：

```
#Changes in root biomass over four years in 6 different cropping systems
yr<-read.table("totalfallmass2.txt", header=TRUE)
library(nlme)

yrG<-groupedData(mass ~ year | trt, data=yr)

fit.log <- nlsList(mass ~ SSlogis(year, Asym, xmid, scal), data = yrG)

fit.nlme <- nlme(fit.log, random = pdDiag(Asym ~ 1))

plot(augPred(fit.nlme, level = 0:1))

#For an overall R^2
cor(fitted(fit.nlme),getResponse(fit.nlme))^2 
```

这是运行它所需的数据：

[文本文件](https://www.dropbox.com/s/hakwg9rph5pmsd2/totalfallmass2.txt)

# android - jQuery 移动按钮只显示一个词而不是两个.. 为什么？

> ID：13789881
> 
> 赞同：0
> 
> 时间：2012-12-09T17:36:30.043
> 
> 标签：android, jquery-mobile, button

我的代码：

```
<a data-theme="my-site" data-role="button" onClick="checkReachability()">Online Map</a> 
```

当我启动一个应用程序时，我只得到了“地图”按钮，而不是“在线地图”。我觉得很奇怪。顺便提一下，我是 jQuery Mobile 初学者。

应用程序在 Android 手机上运行。

CSS：

```
.ui-btn-up-my-site { 
    color: white !important;
    text-overflow: initial;
    font-size:15px !important;       
    border: 1px solid #333;
    padding-top:0 !important;
    margin-top:-25px !important;
    width:100px !important; 
    white-space: normal !important;             
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T18:07:46.397

您已设置字体大小和宽度，使得“在线地图”不适合您的按钮

```
font-size:15px !important;
width:100px !important; 
```

你可以让你的字体更小或者让你的按钮更大。您还可以使用以下方法根据文本的宽度设置按钮宽度

```
display:inline-block;
# width: 100px !important; Comment out or delete this line. 
```

看看它在行动 -[小提琴](http://jsfiddle.net/Gbcfs/7/)

顺便说一句，您应该尽量避免使用`!important`. 使用 CSS 特异性和排序来确保将正确的样式应用于正确的元素。

# string - 读取一个文本文件，替换它的单词，输出到另一个文本文件

> ID：13789882
> 
> 赞同：4
> 
> 时间：2012-12-09T17:36:40.790
> 
> 标签：string, file, text, replace, go

所以我试图在 GO 中制作一个程序来获取一个充满代码的文本文件并将其转换为 GO 代码，然后将该文件保存到 GO 文件或文本文件中。我一直在试图弄清楚如何保存我对文本文件所做的更改，但我可以看到更改的唯一方法是通过 println 语句，因为我正在使用 strings.replace 来搜索文本文件所在的字符串数组存储并更改每次出现的需要更改的单词（例如 BEGIN -> { 和 END -> }）。那么在我不知道的 GO 中是否有任何其他搜索和替换方式，或者有没有办法编辑我不知道的文本文件，或者这是不可能的？

谢谢

这是我到目前为止的代码。

```
package main

import (
    "os"
    "bufio"
    "bytes"
    "io"
    "fmt"
    "strings"
)

func readLines(path string) (lines []string, errr error) {
    var (
        file *os.File
        part []byte
        prefix bool
    )
    if file, errr = os.Open(path); errr != nil {
        return
    }
    defer file.Close()

    reader := bufio.NewReader(file)
    buffer := bytes.NewBuffer(make([]byte, 0))
    for {
        if part, prefix, errr = reader.ReadLine(); errr != nil {
            break
        }
    buffer.Write(part)
        if !prefix {
            lines = append(lines, buffer.String())
            buffer.Reset()
        }
    }
    if errr == io.EOF {
        errr = nil
    }
    return
}

func writeLines(lines []string, path string) (errr error) {
    var (
        file *os.File
    )

    if file, errr = os.Create(path); errr != nil {
        return
    }
    defer file.Close()

    for _,item := range lines {

        _, errr := file.WriteString(strings.TrimSpace(item) + "\n");

        if errr != nil {

            fmt.Println(errr)
            break
        }
    }

    return
}

func FixBegin(lines []string) (errr error) {
    var(
    a string

    )
for i := 0; ; i++ {
        a = lines[i];

        fmt.Println(strings.Replace(a, "BEGIN", "{", -1))
    }

    return
}

func FixEnd(lines []string) (errr error) {
    var(
    a string

    )
for i := 0; ; i++ {
        a = lines[i];

        fmt.Println(strings.Replace(a, "END", "}", -1))
    }
    return
}

func main() {
    lines, errr := readLines("foo.txt")
    if errr != nil {
        fmt.Println("Error: %s\n", errr)
        return
    }
    for _, line := range lines {
        fmt.Println(line)
    }

    errr = FixBegin(lines)

    errr = writeLines(lines, "beer2.txt")
    fmt.Println(errr)

    errr = FixEnd(lines)
    lines, errr = readLines("beer2.txt")
    if errr != nil {
        fmt.Println("Error: %s\n", errr)
        return
    }
    errr = writeLines(lines, "beer2.txt")
    fmt.Println(errr)
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T17:55:48.673

```
jnml@fsc-r630:~/src/tmp/SO/13789882$ ls
foo.txt  main.go
jnml@fsc-r630:~/src/tmp/SO/13789882$ cat main.go 
package main

import (
        "bytes"
        "io/ioutil"
        "log"
)

func main() {
        src, err := ioutil.ReadFile("foo.txt")
        if err != nil {
                log.Fatal(err)
        }

        src = bytes.Replace(src, []byte("BEGIN"), []byte("{"), -1)
        src = bytes.Replace(src, []byte("END"), []byte("}"), -1)
        if err = ioutil.WriteFile("beer2.txt", src, 0666); err != nil {
                log.Fatal(err)
        }
}
jnml@fsc-r630:~/src/tmp/SO/13789882$ cat foo.txt 
BEGIN
  FILE F(KIND=REMOTE);
  EBCDIC ARRAY E[0:11];
  REPLACE E BY "HELLO WORLD!";
  WRITE(F, *, E);
END.
jnml@fsc-r630:~/src/tmp/SO/13789882$ go run main.go 
jnml@fsc-r630:~/src/tmp/SO/13789882$ cat beer2.txt 
{
  FILE F(KIND=REMOTE);
  EBCDIC ARRAY E[0:11];
  REPLACE E BY "HELLO WORLD!";
  WRITE(F, *, E);
}.
jnml@fsc-r630:~/src/tmp/SO/13789882$ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T20:03:15.467

我同意@jnml wrt 使用 ioutil 啜食文件并将其写回。但我认为替换不应该通过多次传递[]byte来完成。代码和数据是字符串/文本，应该这样对待（即使处理非 ascii/utf8 编码需要 estra 工作）；一次性替换（所有占位符“一次”）避免了替换先前更改结果的风险（即使我的正则表达式提案必须改进以处理非平凡的任务）。

```
package main

import(
    "fmt"
    "io/ioutil"
    "log"
    "regexp"
    "strings"
)

func main() {
    // (1) slurp the file
    data, err := ioutil.ReadFile("../tmpl/xpl.go")
    if err != nil {
        log.Fatal("ioutil.ReadFile: ", err)
    }
    s := string(data)
    fmt.Printf("----\n%s----\n", s)
    // => function that works for files of (known) other encodings that ascii or utf8

    // (2) create a map that maps placeholder to be replaced to the replacements
    x := map[string]string {
        "BEGIN" : "{",
        "END" : "}"}
    ks := make([]string, 0, len(x))
    for k := range x {
        ks = append(ks, k)
    }
    // => function(s) that gets the keys from maps

    // (3) create a regexp that finds the placeholder to be replaced
    p := strings.Join(ks, "|")
    fmt.Printf("/%s/\n", p)
    r := regexp.MustCompile(p)
    // => funny letters & order need more consideration

    // (4) create a callback function for ..ReplaceAllStringFunc that knows
    // about the map x
    f := func(s string) string {
        fmt.Printf("*** '%s'\n", s)
        return x[s]
    }
    // => function (?) to do Step (2) .. (4) in a reusable way

    // (5) do the replacing (s will be overwritten with the result)
    s = r.ReplaceAllStringFunc(s, f)
    fmt.Printf("----\n%s----\n", s)

    // (6) write back
    err = ioutil.WriteFile("result.go", []byte(s), 0644)
    if err != nil {
        log.Fatal("ioutil.WriteFile: ", err)
    }
    // => function that works for files of (known) other encodings that ascii or utf8
} 
```

输出：

```
go run 13789882.go
----
func main() BEGIN
END
----
/BEGIN|END/
*** 'BEGIN'
*** 'END'
----
func main() {
}
---- 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-01T01:15:43.610

如果您的文件很大，则可能无法也不建议读取内存中的所有内容。试一试[`BytesReplacingReader`](https://pkg.go.dev/github.com/jf-tech/iohelper?tab=doc#BytesReplacingReader)，因为它以流媒体方式完成替换。而且它的性能相当不错。如果你想替换两个字符串（例如`BEGIN -> {`and `END -> }`），只需要`BytesReplacingReader`在原始阅读器上包裹两个，一个 for`BEGIN`和一个 for `END`：

```
r := NewBytesReplacingReader(
    NewBytesReplacingReader(inputReader, []byte("BEGIN"), []byte("{"),
    []byte("END"), []byte("}")
// use r normally and all non-overlapping occurrences of
// "BEGIN" and "END" will be replaced with "{" and "}" 
```

# python - 以编程方式将一串数据存储密钥转换为新的应用程序 ID？（主/从 -> HRD 迁移）

> ID：13789885
> 
> 赞同：2
> 
> 时间：2012-12-09T17:37:00.567
> 
> 标签：python, google-app-engine, google-cloud-datastore

我继承了一个应用程序，该应用程序将实体键存储为字符串而不是实际键，因此它们当然不会被自动工具更新以迁移到 HRD 数据存储。

我可以以编程方式（如果可以，如何）将存储为字符串的键转换为代表新应用程序 ID 的新键的字符串？（撇开它们不应该首先存储为字符串的事实不谈）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T18:03:46.517

## 如果您正在使用`ndb`：

```
new_key = ndb.Key(urlsafe=string_value_of_key) 
```

并更改应用程序 ID，您可以`__app`通过 public 属性访问受保护的属性`_Key__app`

```
new_key._Key__app = 'new-app-id' 
```

## 如果您正在使用`db`：

```
old_key = db.Key(encoded=string_value_of_key) 
```

然后要将密钥转换为具有新应用 ID 的密钥，您可以使用

```
new_key = db.Key.from_path(*old_key.to_path(), 
                           _app='new-app-id',
                           parent=old_key.parent(), 
                           namespace=old_key.namespace()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T18:08:20.347

幸运的是，有一种方法可以使用 Key Class。以下仅适用于没有父母的实体的键，但我相信这种方法可以推广到使用 Key 类的 parent() 方法的具有父母的实体。

您在 NEW 应用程序中运行此代码以获取新的密钥字符串：

```
old_key = db.Key('old_key_string_in_here')
new_key = db.Key.from_path(old_key.kind(), old_key.id())
new_key_string = str(new_key) 
```

# java - Java 源代码编辑器作为 Eclipse 视图

> ID：13789892
> 
> 赞同：2
> 
> 时间：2012-12-09T17:37:50.720
> 
> 标签：java, eclipse, editor, eclipse-emf

我已经定义了一个 EMF 元模型，其中一些元素有一个包含一些 Java 代码的字符串字段。

我正在尝试创建/重用（Java）源代码编辑器作为选项卡式属性视图的一部分，以便能够使用一些类似 IDE 的功能来编辑该字段。将 JDT 编辑器适配到这里使用它会很棒，但对于我已经阅读，这是不可行的。扩展 org.eclipse.swt.widgets.Text 以提供所有这些功能对于这个简单的项目来说似乎太过分了。

因此，问题是，您会推荐哪种方法作为实现这一目标的最佳功能/工作量比？您现在是否有任何可以在视图中/在视图中重用的源代码编辑器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T20:06:31.177

伙计……这真的是一项艰巨的任务。在 SWT 小部件/ViewParts 中重用 EditorParts 并不容易。我唯一需要管理的是重用 EPF RichText-Widget，它是为用作 EditorPart 而设计的。

在那种情况下，这很容易，因为它只需要一个 IEditorSite 作为构造函数参数。然后我对其进行了扩展并将 IViewSite 调整为 IEditorSite。

但是关于 JDT：有太多的功能与 eclipses IEditorParts 的 Base-Text-Editor 功能直接相关……我认为这不值得付出努力。

你找不到用于 Java 代码的 Java-IDE 吗？Swing/AWT 没有任何工作吗？然后，您可以使用 SWT_AWT-Brigde-Widget 包含 Source-Code-Editor-Swing-Frame。通过这种方式，我成功地将 Swing-PDF-Viewer 集成到 eclipse ViewPart 中。

看看[eclipse API](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/awt/SWT_AWT.html)的描述。
作为 Java IDE 的第一次粗略尝试： [drJava](http://drjava.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T20:48:47.317

我在建模和代码生成方面做了很多工作，但这个问题从未真正得到令人满意的解决。Model-to-Text 社区中有很多人认为代码不应该因为这个和其他原因出现在模型中。

我过去的方法是从模型中生成我的代码，留下注释括起来的区域，供开发人员使用他们最喜欢的编辑器将他们的业务逻辑和其他代码片段直接输入到生成的代码中。如果模型更改并重新生成代码，则保留开发人员提供的代码。这还具有支持任何语言（Java、C、Objective-C、JSP/HTML 等）和默认生成代码的适当默认存根的好处。

以 Eclipse M2T-JET 中的`<c:userRegion>`标签为例。我相信其他 Eclipse Model-to-Text 技术也有类似的功能。

# c# - 扩展属性语法的样子

> ID：13789893
> 
> 赞同：1
> 
> 时间：2012-12-09T17:37:51.143
> 
> 标签：c#, .net

如果微软添加“扩展属性”的特性，它们的定义语法会如何出现？[这是 MSDN 上的一篇](http://blogs.msdn.com/b/ericlippert/archive/2009/10/05/why-no-extension-properties.aspx)关于扩展属性的文章（从 c# 4.0 中删除的功能）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:45:25.097

这是纯粹的猜测。据我所知，即使是微软也不知道语法是什么。他们可以添加一个新的关键字或完全其他的东西。

但是，进一步研究，这是语法的一个可能版本：

```
public static TimeSpan Minutes[this int i]
{
    get { return new TimeSpan(0, i, 0); }
} 
```

# ios - UIACollectionView 单元格与可见单元格

> ID：13789905
> 
> 赞同：5
> 
> 时间：2012-12-09T17:39:28.340
> 
> 标签：ios, uiscrollview, ios-ui-automation, uicollectionview

我正在尝试使用 xcode 4.5 中的自动化编写测试脚本。

我有一个`UICollectionView`并且我想单击一些当前不可见的单元格。

[根据文档](http://developer.apple.com/library/ios/#documentation/UIAutomation/Reference/UIACollectionViewClassReference/UIACollectionViews/UIACollectionViews.html)，我应该期望`cells`返回集合视图中的*所有*`visibleCells`单元格，并且只返回当前可见的单元格。

相反，我看到的是单元格仅返回当前可见的单元格，并且调用 visibleCells 会停止脚本`'undefined' is not a function (evaluating 'collection.visibleCells()')`

```
var target = UIATarget.localTarget();
var collection = target.frontMostApp().mainWindow().collectionViews()[0];

UIALogger.logMessage("Looking in collection: " + collection);
UIALogger.logMessage("Cells: " + collection.cells() + " length " + collection.cells().length);
UIALogger.logMessage("Visible cells: " + collection.visibleCells()); 
```

上面的代码返回正确的`UICollectionView`，第二个日志行打印：

```
Cells: [object UIAElementArray] length 12 
```

虽然我在集合视图中有 100 个项目，并且第三个日志行崩溃脚本。

这是文档/UIACollectionView 错误吗？

任何想法如何告诉自动化滚动直到它看到一个名为“我的单元格”的单元格？我试过使用`someCell.scrollToVisible`，但我需要有细胞才能做到这一点，我没有，因为我不能从细胞中得到它。

> 编辑：

正如乔纳森所建议的，我已经实现了一个滚动直到找到的功能。它有点特定于实现，因此您可能需要调整`isCellWithName`. 我还希望添加一个中断，以防我们在 while 循环中找不到所需的单元格，如果有人有想法，请随时编辑。

```
function isCellWithName(cell, name) {
    return (cell.staticTexts()[0].name() == name);
}

function getCellWithName(array, name) {
    for (var i = 0; i < array.length; i++) {
        if (isCellWithName(array[i], name)) {
            return array[i];
        }
    }
    return false;
}

function scrollToName(collection, name) {
    var found = getCellWithName(collection.cells(), name);
    while (found === false) {
        collection.dragInsideWithOptions({startOffset:{x:0.2, y:0.99}, endOffset:{x:0.2, y:0},duration:1.0});
        found = getCellWithName(collection.cells(), name);
    }
    return found;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T01:47:57.543

该文档显然不正确。上没有`visibleCells()`方法`UIACollectionView`。我通过遍历所有集合视图元素属性并打印出它们的名称来解决这个问题：

```
var target = UIATarget.localTarget();
var window = target.frontMostApp().mainWindow();
var collectionView = window.collectionViews()[0];
for (var i in collectionView) {
    UIALogger.logMessage(i);
} 
```

另一方面，表格视图元素确实使用该`cells()`方法列出了所有单元格。我想知道他们是否因为集合视图的复杂性而选择不这样做。实际获取所有集合视图单元格、构建它们的表示和框架并返回元素（如果有很多元素）可能非常昂贵。这就是 UI 自动化在询问所有单元格的表格视图时所做的事情。为了获得元素表示，它们都必须被实例化和计算。

但是，要回答您更大的问题，如何滚动到特定单元格。您可以通过滑动手势始终将其滚动到视图中吗？这不是最方便的方法，我们被表格视图滚动到不可见元素的能力“宠坏了”。但是从用户行为测试的角度来看，滑动一定量是用户无论如何都必须要做的。测试的结构是否可以反映这一点，它会满足您的需求吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T21:41:07.690

我无法让@marmor`dragInsideWithOptions()`位以通用方式工作。相反，我使用 collectionView 的 value() 函数来获取当前页面与最后一页的索引，如“第 3 页，共 11 页”。然后我使用collectionView 的scrollUp() 和scrollDown() 方法遍历页面，直到找到我们想要的。我为[TuneUp](https://github.com/alexvollmer/tuneup_js)的[uiautomation-ext.js](https://github.com/alexvollmer/tuneup_js/blob/master/uiautomation-ext.js)编写了一个扩展，似乎可以解决问题，还有更多：

```
function animationDelay() {
    UIATarget.localTarget().delay(.2);
}

extend(UIACollectionView.prototype, {
  /**
   * Apple's bug in UIACollectionView.cells() -- only returns *visible* cells
   */

  pageCount: function() {
    var pageStatus = this.value();
    var words = pageStatus.split(" ");
    var lastPage = words[3];
    return lastPage;
  },

  currentPage: function() {
    var pageStatus = this.value();
    var words = pageStatus.split(" ");
    var currentPage = words[1];
    //var lastPage = words[3];
    return currentPage;
  },

  scrollToTop: function() {
    var current = this.currentPage();
    while (current != 1) {
        this.scrollUp();
        animationDelay();
        current = this.currentPage();
    }
  },

  scrollToBottom: function() {
    var current = this.currentPage();
    var lastPage = this.pageCount();
    while (current != lastPage) {
        this.scrollDown();
        animationDelay();
        current = this.currentPage();
    }
  },

  cellCount: function() {
    this.scrollToTop();
    var current = this.currentPage();
    var lastPage = this.pageCount();
    var cellCount = this.cells().length;
    while (current != lastPage) {
        this.scrollDown();
        animationDelay();
        current = this.currentPage();
        cellCount += this.cells().length;
    }
    return cellCount;
  },

  currentPageCellNamed: function(name) {
    var array = this.cells();
    for (var i = 0; i < array.length; i++) {
        var cell = array[i];
        if (cell.name() == name) {
            return cell;
        }
    }
    return false;
  },

  cellNamed: function(name) {
    // for performance, look on the current page first
    var foundCell = this.currentPageCellNamed(name);
    if (foundCell != false) {
        return foundCell;
    }
    if (this.currentPage() != 1) {
        // scroll up and check out the first page before we iterate
        this.scrollToTop();
        foundCell = this.currentPageCellNamed(name);
        if (foundCell != false) {
            return foundCell;
        }
    }

    var current = this.currentPage();
    var lastPage = this.pageCount();
    while (current != lastPage) {
        this.scrollDown();
        animationDelay();
        current = this.currentPage();

        foundCell = this.currentPageCellNamed(name);
        if (foundCell != false) {
            return foundCell;
        }
    }
    return false;
  },

  /**
   * Asserts that this collection view has a cell with the name (accessibility identifier)
   * matching the given +name+ argument.
   */
  assertCellNamed: function(name) {
    assertNotNull(this.cellNamed(name), "No collection cell found named '" + name + "'");
  }
}); 
```

# c# - 无法运行构建：如何阻止 EAZFuscator 干扰？

> ID：13789907
> 
> 赞同：1
> 
> 时间：2012-12-09T17:39:38.040
> 
> 标签：c#, visual-studio, build, obfuscation, eazfuscator

嘿，我从我的计算机上卸载了 EAZFuscator，但是当我尝试在 Visual Studio 中构建我的解决方案时，我不断收到这个错误，它会停止构建：

```
The command "if /I "Release" == "Release" Eazfuscator.NET.exe "DIRECTORY WHERE RELEASE SOLUTION IS LOCATED" --msbuild-project-path ""DIRECTORY WHERE PROJECT SOLUTION IS LOCATED"" --msbuild-project-configuration "Release" --msbuild-project-platform "x86" --msbuild-solution-path ""DIRECTORY WHERE PROJECT SOLUTION IS LOCATED"" -n --newline-flush -v 3.3" exited with code 9009\. 
```

如何阻止 EAZFuscator 干扰我的构建？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:13:47.843

请看对应的知识库文章[http://www.gapotchenko.com/eazfuscator.net/kb/100024](http://www.gapotchenko.com/eazfuscator.net/kb/100024)

# c# - 如何将返回行或列值的 SQL 存储过程结果存储到 ASP.NET C# 变量中？

> ID：13789911
> 
> 赞同：0
> 
> 时间：2012-12-09T17:39:46.123
> 
> 标签：c#, asp.net, sql

我有一个返回列值（SQL 数据类型：）的 SQL 存储过程`nchar(1)`。存储过程运行并在传递参数时返回所需的值。根据这个返回值，我想对程序流程进行分流。为此，我需要读取 ASP.NET C# 变量中返回的值，但我不知道该怎么做。

```
create procedure sproc_Type
      @name as nchar(10)
AS    
SELECT Type FROM Table WHERE Name = @name 
```

我想读取`Type`.cs 文件中的值并希望将其保存以备后用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:53:29.573

```
string connectionString = "(your connection string here)";
string commandText = "usp_YourStoredProc";

using (SqlConnection conn = new SqlConnection(connectionString))
{
SqlCommand cmd = new SqlCommand(commandText, conn);
cmd.CommandType = CommandType.StoredProcedure;
cmd.CommandTimeout = 600;

conn.Open();
SqlDataReader dr = cmd.ExecuteReader();
while(dr.Read())
{
// your code to fetch here.
}
conn.Close();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:45:03.843

```
 SqlConnection conn = null;
             SqlDataReader rdr  = null;
             conn = new 
                SqlConnection("Server=(local);DataBase=Northwind;Integrated Security=SSPI");
            conn.Open();

            // 1\.  create a command object identifying
            //     the stored procedure
            SqlCommand cmd  = new SqlCommand(
                "Stored_PROCEDURE_NAME", conn);

            // 2\. set the command object so it knows
            //    to execute a stored procedure
            cmd.CommandType = CommandType.StoredProcedure;

            // 3\. add parameter to command, which
            //    will be passed to the stored procedure
            cmd.Parameters.Add(
                new SqlParameter("@PARAMETER_NAME", PARAMETER_VALUE));

            // execute the command
            rdr = cmd.ExecuteReader();

            // iterate through results, printing each to console
            while (rdr.Read())
            {
                var result = rdr["COLUMN_NAME"].ToString();
            } 
```

# c# - 返回 DataTable 时出现 WCF 基础连接错误

> ID：13789919
> 
> 赞同：1
> 
> 时间：2012-12-09T17:40:46.870
> 
> 标签：c#, web-services, wcf, datatable

我创建了返回数据表的 web 服务方法。但是，我收到错误：

> 底层连接被关闭：连接被意外关闭

这是我在 IWS 文件中的方法

```
[ServiceContract]
 public interface IWsBabyCare
 {
    [OperationContract]
    DataTable GetPurchaseOrderDetails();

    [OperationContract]
    DataTable GetPurchaseOrders(int PODID);

  } 
```

这是我在 WS 文件中的方法

```
public DataTable GetPurchaseOrderDetails()
{
    DataTable POD = new DataTable("POD");
    PurchaseOrderBLL prodBLL = new PurchaseOrderBLL();
    POD = prodBLL.GetPOD();
    POD.TableName = "POD";
    return POD;

}

public DataTable GetPurchaseOrders(int PODID)
{
    PurchaseOrderBLL prodBLL = new PurchaseOrderBLL();
    return prodBLL.GetPurchaseOrders(PODID);
} 
```

我在网上读到向数据表添加名称会有所帮助，但我只会返回一个空的数据表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:00:48.740

您得到的异常可能有大约[500 个不同的原因](http://bit.ly/YSSEAu)。

目前我们真正能说的是，您有一个定义了一些操作的服务接口，并且您已经实现了这些操作。

我们对托管服务的方式（控制台、IIS？）或在服务和客户端上指定的 WCF 配置一无所知。您需要在问题中提供此信息。

此外，您的服务操作指定了一个返回类型，`DataTable`该类型是一个[大](http://www.hanselman.com/blog/ReturningDataSetsFromWebServicesIsTheSpawnOfSatanAndRepresentsAllThatIsTrulyEvilInTheWorld.aspx)的Web 服务禁止。您应该传递精确定义所需数据的类型（例如，如果您的数据库表包含苹果，则应传递`List<Apple>`.

这就是我建议你应该继续的方式。

1.  创建基于控制台的服务和客户端项目。
2.  创建一个返回一些原始类型（如字符串）的服务操作。
3.  使所有代码尽可能简单。您应该能够在每个服务和客户端上使用少于 10 行代码和大约 10 行 xml 配置来完成这项工作。
4.  一旦你设法让它工作，然后逐渐添加新的操作和更复杂的返回类型。

# php - PHP 这段代码有什么问题？

> ID：13789920
> 
> 赞同：0
> 
> 时间：2012-12-09T17:40:46.110
> 
> 标签：php, mysql, insert

我对 php 很陌生，并且在使用以下代码块时遇到了问题。出于某种原因，当所有内容都已执行时，我被发送到：auctionx.php?id="。当它应该是 id=1。我试图从 $new_id 变量中获取“1”。有人可以指出我的错误？提前非常感谢。PS当我对我的项目进行排序时，关于功能，我会告诉我对mysqli的合理翻译。再次感谢。

哦，还有最后一件事，我意识到我很可能缺少一条捷径。在 INSERT 查询之后是否有一些代码可以直接知道新的 id 是什么，如果你知道我的意思吗？为了节省我做下一个查询。是否就像在第一个值字段中具有“$new_id”一样简单。希望这很清楚。

```
if ($check_1 == 0)
{

//Then need to register the auction...so...

$auc_update = mysql_query("

INSERT INTO auction VALUES ('','$afil','$user','','','','','')

//Should the first be "$new_id" here (above) i mean

");

$row_1 = mysql_query("

SELECT * FROM auction WHERE host = $user AND auc_no = $afil  

");

//Find
$new_id = $row_1['id'];

//Id obtained
//Go to:

header ("location:auctionx.php?id='$new_id'");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:44:42.040

```
//Find
$new_id = $row_1['id']; 
```

尝试添加`mysql_fetch_assoc()`喜欢`new_id`：

```
$new_id = mysql_fetch_assoc($row_1)['id']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T17:45:43.127

在`mysql_query()`您必须检索结果集之后[`mysql_fetch_assoc()`](http://php.net/manual/en/function.mysql-fetch-assoc.php)

```
$result_1 = mysql_query("SELECT * FROM auction WHERE host = $user AND auc_no = $afil");
$row_1 = mysql_fetch_assoc($result_1);
$new_id = $row_1['id']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T17:42:20.920

首先，您错过了一个`mysql_xxx()`函数调用。`mysql_query()`只需将查询发送到 mysql 但对于 a`SELECT`然后您需要检索这样的结果：

```
$result = mysql_query("SELECT * FROM auction WHERE host = $user AND auc_no = $afil");
$row1 = mysql_fetch_assoc($result);
$new_id = $row1['id'];
header ("Location: auctionx.php?id=$new_id"); 
```

有关所用函数的更多信息： [mysql_query()](http://php.net/manual/en/function.mysql-query.php) [mysql_fetch_assoc()](http://php.net/manual/en/function.mysql-fetch-assoc.php)

那么你真的应该确保你的查询有效，所以检查返回值并检查它是否不是假的，否则显示错误：

```
$result = mysql_query("SELECT * FROM auction WHERE host = $user AND auc_no = $afil");
if(false == $result) {
    echo "Mysql error '" . mysql_errno() . "' : " . mysql_error();
} 
```

然后，您似乎想要检索与数据库中最后一次插入关联的 id。您不需要 a `SELECT`，只需为此使用[mysql_insert_id()](http://php.net/manual/en/function.mysql-insert-id.php)。

考虑到这一切，您的代码将变为：

```
if ($check_1 == 0)
{
$auc_update = mysql_query("INSERT INTO auction VALUES ('','$afil','$user','','','','','')");
if(false == $auc_update ) {
    echo "Mysql error '" . mysql_errno() . "' : " . mysql_error();
} else {
    $new_id = mysql_insert_id();
    header ("Location: auctionx.php?id=$new_id");
} 
```

另一件事，`mysql_xxx()`被认为已弃用，你真的应该避免使用它并尝试使用[mysqli](http://www.php.net/manual/en/class.mysqli.php)或[PDO](http://php.net/manual/en/class.pdo.php)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T17:45:03.623

语法错误：您试图在 sql 语句中添加注释。此外，您需要在调用后获取该行：

```
<?php
if ($check_1 == 0){

    //Then need to register the auction...so...

    $auc_update = mysql_query("INSERT INTO auction VALUES ('','$afil','$user','','','','','')");

    //Should the first be "$new_id" here (above) i mean

    $row_1 = mysql_query("SELECT * FROM auction WHERE host = $user AND auc_no = $afil ");
    $row_1 = mysql_fetch_assoc($row_1);
    //Find
    $new_id = $row_1['id'];

    //Id obtained
    //Go to:

    header ("location:auctionx.php?id='$new_id'");
}?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-09T17:46:54.357

### 问题在这里：

```
$new_id = $row_1['id']; 
```

`mysqli_fetch_array()`在执行此操作之前，您应该这样做。

* * *

### 只是一个建议：

最好使用 PDO 或`mysqli_*`代替`mysql_`.

# python - Theta(n**2) 和 Theta(n*lgn) 算法执行不正确

> ID：13789925
> 
> 赞同：4
> 
> 时间：2012-12-09T17:41:37.977
> 
> 标签：python, algorithm, python-2.7

我正在阅读*算法简介*并尝试完成书中的练习。

在练习 4.1-3

> > 4.1-3 在您自己的计算机上实现最大子阵列问题的蛮力和递归算法。什么问题大小 n0 给出了递归算法击败蛮力算法的交叉点？然后，只要问题大小小于 n0，就将递归算法的基本情况更改为使用蛮力算法。这会改变交叉点吗？

我按照书上的伪代码写了这两个算法。但是，我的代码一定有问题，因为第二个代码被设计为 Theta(n*lgn) 并且应该运行得更快，它总是比第一个 Theta(n**2) 运行得慢。我的代码如下所示。

```
def find_maximum_subarray_bf(a): #bf 用于蛮力
    p1 = 0
    l = 0 # l 为左
    r = 0 # r 代表右
    最大和 = 0
    对于范围内的 p1(len(a)-1)：
        sub_sum = 0
        对于范围内的p2（p1，len（a））：
            sub_sum += a[p2]
            如果 sub_sum > max_sum：
                max_sum = sub_sum
                l = p1
                r = p2
    返回 l, r, max_sum

def find_maximum_subarray_dc(a): #dc 分治法

    # 子函数
    # 给定一个数组和三个索引，可以将数组拆分为 a[l:m]
    # 和 a[m+1:r]，找出一个子数组 a[i:j]，其中 l \leq i \less m \less j \leq r"。
    # 根据上面的定义，目标子数组必须
    # 由两个子数组 a[i:m] 和 a[m+1:j] 组合
    # 增长率：theta(n)

    def find_crossing_max(a, l, r, m):

        ＃ 左边
        # ls_r 和 ls_l 表示左子数组的左右边界。
        # l_max_sum 表示左子数组的最大和
        # sub_sum 表示当前计算子数组的和      
        ls_l = 0
        ls_r = m-1
        l_max_sum = 无
        sub_sum = 0
        for j in range(m+1)[::-1]: # 从右到左添加元素
            sub_sum += a[j]
            如果 sub_sum > l_max_sum：
                l_max_sum = sub_sum
                ls_l = j

        ＃ 右边
        # rs_r 和 rs_l 表示左子数组的左右边界。
        # r_max_sum 表示左子数组的最大和
        # sub_sum 表示当前计算子数组的和                
        rs_l = m+1
        rs_r = 0
        r_max_sum = 无
        sub_sum = 0
        对于范围内的 j (m+1,len(a))：
            sub_sum += a[j]
            如果 sub_sum > r_max_sum：
                r_max_sum = sub_sum
                rs_r = j

        ＃结合
        返回 (ls_l, rs_r, l_max_sum+r_max_sum)

    # 子函数
    # 增长率：应该是 theta(nlgn)，但是有问题
    def recursion(a,l,r): # T(n)
        如果 r == l:
            返回 (l,r,a[l])
        别的：
            m = (l+r)//2 # theta(1)
            left = recursion(a,l,m) # T(n/2)
            右=递归（a，m+1，r）#T（n/2）
            交叉 = find_crossing_max(a,l,r,m) # theta(n)

            如果 left[2]>=right[2] 和 left[2]>=crossing[2]：
                向左返回
            elif right[2]>=left[2] 和 right[2]>=crossing[2]：
                右转
            别的：
                返回路口

    #返回主函数
    l = 0
    r = len(a)-1
    返回递归（a，l，r）

如果 __name__ == "__main__":

    从时间进口时间

    a = [100,-10,1,2,-1,4,-6,2,5]
    一个 *= 2**10

    时间0 =时间（）
    find_maximum_subarray_bf(a)
    时间1 =时间（）
    find_maximum_subarray_dc(a)
    时间2 =时间（）
    打印“功能1：”，time1-time0
    打印“功能2：”，time2-time1
    打印“比率：”，（time1-time0）/（time2-time1）

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T20:42:25.490

首先，蛮力的错误：

```
for p1 in range(len(a)-1): 
```

那应该是`range(len(a))`[或`xrange`]，因为它不会找到最大的子数组`[-12,10]`。

现在，递归：

```
def find_crossing_max(a, l, r, m):

    # left side
    # ls_r and ls_l indicate the right and left bound of the left subarray.
    # l_max_sum indicates the max sum of the left subarray
    # sub_sum indicates the sum of the current computing subarray      
    ls_l = 0
    ls_r = m-1
    l_max_sum = None
    sub_sum = 0
    for j in range(m+1)[::-1]:      # adding elements from right to left 
```

您正在检查所有索引为 0，但您应该只检查索引到`l`. 而不是构造`range`列表并反转它，使用`xrange(m,l-1,-1)`

```
 sub_sum += a[j]
        if sub_sum > l_max_sum:
            l_max_sum = sub_sum
            ls_l = j 
```

对于右侧的总和，类比成立，您应该只检查`r`, 所以的索引`xrange(m+1,r+1)`。

此外，总和的初始值。最大子数组的索引对于左侧是可疑的，而对于右侧是错误的。

对于左侧部分，我们从一个空总和开始，但必须包括`a[m]`。这可以通过`l_max_sum = None`初始设置或通过设置`l_max_sum = a[m]`并`j`忽略 index来完成`m`。无论哪种方式，初始值`ls_l`都不应该是`0`，`ls_r`也不应该是`m-1`。`ls_r`必须是，`m`并且`ls_l`应该以的`m+1`初始值开始，并且以开始。`l_max_sum``None``m``l_max_sum``a[m]`

对于正确的部分，`r_max_sum`必须从 0 开始，`rs_r`最好从 0 开始`m`（尽管这并不重要，它只会给你错误的索引）。如果右侧的总和都不是非负数，则正确的总和应该是`0`负数中最大的，而不是最大的。

在`recursion`中，我们有一些重复

```
left = recursion(a,l,m)         # T(n/2) 
```

包括 的 金额`a[m]`已经 被 处理 或 大修`find_crossing_max`, 所以 这 可能 是

```
left = recursion(a,l,m-1) 
```

但是，在 中也必须处理这种可能性`r < l`，`recursion`并且重复很小，所以我就让它保持不变。

由于您总是在 中遍历整个列表`find_crossing_max`，也就是所谓`O(n)`的时间，因此您的分而治之的实现实际上`O(n²)`也是如此。

如果签入的范围`find_crossing_max`被限制为`[l,r]`，那么您应该（大约）`2^k`调用长度为 的范围`n/2^k`，`0 <= k <= log_2 n`，总成本为`O(n*log n)`。

通过这些更改（以及一些随机数组生成），

```
def find_maximum_subarray_bf(a):        #bf for brute force
    p1 = 0
    l = 0           # l for left
    r = 0           # r for right
    max_sum = 0
    for p1 in xrange(len(a)):
        sub_sum = 0
        for p2 in xrange(p1, len(a)):
            sub_sum += a[p2]
            if sub_sum > max_sum:
                max_sum  = sub_sum
                l = p1
                r = p2
    return l, r, max_sum

def find_maximum_subarray_dc(a):        #dc for divide and conquer

    # subfunction
    # given an arrary and three indices which can split the array into a[l:m]
    # and a[m+1:r], find out a subarray a[i:j] where l \leq i \less m \less j \leq r".
    # according to the definition above, the target subarray must
    # be combined by two subarray, a[i:m] and a[m+1:j]
    # Growing Rate: theta(n)

    def find_crossing_max(a, l, r, m):

        # left side
        # ls_r and ls_l indicate the right and left bound of the left subarray.
        # l_max_sum indicates the max sum of the left subarray
        # sub_sum indicates the sum of the current computing subarray      
        ls_l = m+1
        ls_r = m
        l_max_sum = None
        sub_sum = 0
        for j in xrange(m,l-1,-1):      # adding elements from right to left
            sub_sum += a[j]
            if sub_sum > l_max_sum:
                l_max_sum = sub_sum
                ls_l = j

        # right side
        # rs_r and rs_l indicate the right and left bound of the left subarray.
        # r_max_sum indicates the max sum of the left subarray
        # sub_sum indicates the sum of the current computing subarray                
        rs_l = m+1
        rs_r = m
        r_max_sum = 0
        sub_sum = 0
        for j in range(m+1,r+1):
            sub_sum += a[j]
            if sub_sum > r_max_sum:
                r_max_sum = sub_sum
                rs_r = j

        #combine
        return (ls_l, rs_r, l_max_sum+r_max_sum)

    # subfunction
    # Growing Rate:  theta(nlgn)
    def recursion(a,l,r):           # T(n)
        if r == l:
            return (l,r,a[l])
        else:
            m = (l+r)//2                    # theta(1)
            left = recursion(a,l,m)         # T(n/2)
            right = recursion(a,m+1,r)      # T(n/2)
            crossing = find_crossing_max(a,l,r,m)   # theta(r-l+1)

            if left[2]>=right[2] and left[2]>=crossing[2]:
                return left
            elif right[2]>=left[2] and right[2]>=crossing[2]:
                return right
            else:
                return crossing

    #back to master function
    l = 0
    r = len(a)-1
    return recursion(a,l,r)

if __name__ == "__main__":

    from time import time
    from sys import argv
    from random import randint
    alen = 100
    if len(argv) > 1:
        alen = int(argv[1])
    a = [randint(-100,100) for i in xrange(alen)]

    time0 = time()
    print find_maximum_subarray_bf(a)
    time1 = time()
    print find_maximum_subarray_dc(a)
    time2 = time()
    print "function 1:", time1-time0
    print "function 2:", time2-time1 
    print "ratio:", (time1-time0)/(time2-time1) 
```

我们得到了一些我们应该期待的东西：

```
$ python subarrays.py 50
(3, 48, 1131)
(3, 48, 1131)
function 1: 0.000184059143066
function 2: 0.00020382
ratio: 0.902923976608
$ python subarrays.py 100
(29, 61, 429)
(29, 61, 429)
function 1: 0.000745058059692
function 2: 0.000561952590942
ratio: 1.32583792957
$ python subarrays.py 500
(35, 350, 3049)
(35, 350, 3049)
function 1: 0.0115859508514
function 2: 0.00170588493347
ratio: 6.79175401817
$ python subarrays.py 1000
(313, 572, 3585)
(313, 572, 3585)
function 1: 0.0537149906158
function 2: 0.00334000587463
ratio: 16.082304233
$ python osubarrays.py 10000
(901, 2055, 4441)
(901, 2055, 4441)
function 1: 4.20316505432
function 2: 0.0381460189819
ratio: 110.186204655 
```

# wicket - 如何将行为添加到 Wicket 中添加到该组件的另一个行为中的组件

> ID：13789927
> 
> 赞同：0
> 
> 时间：2012-12-09T17:41:42.063
> 
> 标签：wicket, wicket-1.6

我想使用 Apache Wicket 将 AttributeAppender 添加到 AjaxEventBehavior 内的组件中。行为具有 getComponent() 方法，但在构造函数中 getComponent() 显然返回 null。

现在我将组件传递给 AjaxEventBehavior 的构造函数并且它正在工作，但这是实现我的目标的好方法..

这就是我正在做的事情：

AjaxTooltip 行为：

```
public class AjaxTooltipBehavior extends AjaxEventBehavior {
      public AjaxTooltipBehaviour(String event, Component tooltippedComponent) {
           super(event);
           tooltippedComponent.add(new AttributeAppender("data-tooltip","wicketAjaxTooltip"));
      }    

      ...
} 
```

这就是我使用它的方式：

```
 ...
 final WebMarkupContainer icon = new WebMarkupContainer("icon"); //a tooltiped icon
 icon2.add(new AjaxTooltipBehaviour("mouseover",icon2) 
```

我问自己是否没有办法在不将组件传递给 AjaxTooltipBehavior 的情况下将 AttributeAppender 添加到组件中。有谁知道这在检票口中是否可行，或者是否有更好的解决方案？仅供参考：我正在使用 wicket 1.6。

提前感谢您的支持！罗尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:09:09.940

通常您会覆盖`Behavior#onBind(Component)`，但此方法在`AbstractAjaxBehavior`. 但它会调用`onBind()`并且你`getComponent()`在那里使用：

```
@Override
protected void onBind() {
    super.onBind();
    getComponent().add(new AttributeAppender("data-tooltip","wicketAjaxTooltip"));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T03:53:51.063

因为您已经从 AbstractAjaxBehavior 扩展（AjaxEventBehavior 扩展了 AbstractAjaxBehavior），所以您应该可以访问 getComponent()，这将为您提供行为所附加到的组件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T11:39:43.130

我覆盖`Behavior#onConfigure(Component component)`它可能是添加行为或使用属于行为的组件做一些其他事情的最合适的方式。

```
@Override
protected void onConfigure(Component component) {
   super.onConfigure();
   component().add(new AttributeAppender("data-tooltip","wicketAjaxTooltip"));
} 
```

# sql-server - 在 SQL Server 中，定位备份文件 UI 不支持位置浏览

> ID：13789931
> 
> 赞同：0
> 
> 时间：2012-12-09T17:42:08.280
> 
> 标签：sql-server, sql-server-2008

在使用 SQL Server 2008 备份或恢复数据库时，你们中的许多人可能在这方面浪费了很多时间

每次它回到默认位置，并且表单没有浏览按钮，而且，粘贴 URL 时树不会刷新，所以它迫使你穿过树来寻找位置或准备手动输入您的 URL 和文件名，然后粘贴。

我的问题是，是否有任何技术原因使得很难以如此重要的形式拥有这个简单的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T18:30:49.670

我已经提交了关于它的反馈票在[这里](https://connect.microsoft.com/SQLServer/feedback/details/773894/in-sql-server-ms-locate-backup-file-ui-does-not-support-location-browsing)，如果您认为应该有浏览功能，请投票。

# ruby-on-rails - 设置 ruby mine 以通过 ssh 执行命令

> ID：13789932
> 
> 赞同：0
> 
> 时间：2012-12-09T17:42:14.057
> 
> 标签：ruby-on-rails, ssh, rubymine

我想设置一个 Rails 开发环境，其中一切都在 Ubuntu VM 中运行，但我使用 Windows 7 进行显示。

ububtu下（即virtualbox VM）

*   红宝石
*   rails 环境 (rvm, rails, rails webserver...)
*   混帐

Windows 下（本机操作系统）

*   浏览器
*   IDE

我通过 SSH 连接到 VM 以执行命令，并与 nfs 共享文件。

一切都很好，但我想尝试 RubyMine 作为我的编辑器。所以在这个设置中我有两个选择：

*   在 Windows 上安装 RubyMine，并对其进行配置，使其通过 SSH 在 VM 中执行命令。
*   在 ubuntu 上安装 RubyMine，并在 windows 上运行 X 服务器（例如 Xming）在 windows 中显示它：`rubymine --display windows_ip:0`

所以我的问题是：是否可以配置 ruby​​Mine 以便它通过 SSH 执行命令？

* * *

我已经看到[了这个功能请求](http://youtrack.jetbrains.com/issue/RUBY-10872)，所以我猜它目前是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:17:59.697

目前我们正在开发此功能，它将在下一个[5.0 EAP中提供](http://eap.jetbrains.com/ruby)

# c# - 从其他 Xaml 文件绑定到用户控件中的元素

> ID：13789933
> 
> 赞同：3
> 
> 时间：2012-12-09T17:42:17.223
> 
> 标签：c#, wpf, xaml, binding, multidatatrigger

谁能告诉我如何绑定到用户控件的元素？

我正在尝试使用与 IDataErrorInfo 一起使用的数据触发器来禁用/启用按钮。

所以当元素在同一个视图上时，我通常会这样做

```
 <Button Name="AddEditButton" Content="{Binding ButtonContent}" Command="{Binding AddCustomerCommand}" HorizontalAlignment="Center"  Margin="0 10" >
        <Button.Style>
            <Style TargetType="{x:Type Button}">
                <Setter Property="IsEnabled" Value="false" />
                <Style.Triggers>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding ElementName=CustomerFirstNameTextBox, Path=(Validation.HasError)}" Value="false" />
                            <Condition Binding="{Binding ElementName=CustomerLastNameTextBox, Path=(Validation.HasError)}" Value="false" />
                            <Condition Binding="{Binding ElementName=CustomerEmailTextBox, Path=(Validation.HasError)}" Value="false" />
                            <Condition Binding="{Binding ElementName=CustomerPhoneTextBox, Path=(Validation.HasError)}" Value="false" />
                            <Condition Binding="{Binding ElementName=CustomerCellphoneTextBox, Path=(Validation.HasError)}" Value="false" />

                        </MultiDataTrigger.Conditions>
                        <Setter Property="IsEnabled" Value="true" />
                    </MultiDataTrigger>
                </Style.Triggers>
            </Style>
        </Button.Style>
    </Button> 
```

但是现在我需要添加一个条件，该条件绑定到我的视图正在使用的 Usercontrol (AdressControl) 上的控件。

我希望像这样轻松访问用户控件的元素

```
<Condition Binding="{Binding ElementName=AddressControl , Path=StreetTextBox.(Validation.HasError)}" Value="false"  /> 
```

但无济于事。任何帮助将非常感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T21:27:30.020

应该`FindAncestor`正确解析属性

```
 <Condition Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type AddressControl}}, Path=StreetTextBox.(Validation.HasError)}" Value="false"  /> 
```

这主要是通过视觉树搜索类型`AddressControl`并解析属性。

# python - 在 Python 上循环添加项目

> ID：13789935
> 
> 赞同：2
> 
> 时间：2012-12-09T17:42:21.437
> 
> 标签：python, loops, encoding

所以我要做的是制作一个代码，在名称中添加字母的值，例如名称：ABCD ---> 1 + 2+ 3+ 4= 10

到目前为止，我的代码是：

```
def main():
    name = input("Please enter your name (all lowercase): ")
    print("\nHere is the code: ")
    for ch in name:
        print(ord(ch)-96,end=" ") 
```

我想要做的是添加所有的值`(ord(ch)-96,end=" ")`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T17:44:09.340

你可以这样做：

```
sum(ord(c) - 96 for c in name) 
```

* * *

**相关文件**

*   [`sum`](http://docs.python.org/2/library/functions.html#sum)
*   [`ord`](http://docs.python.org/2/library/functions.html#ord)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T17:49:35.357

如果您实际上不需要像现在这样打印出每个字符的值，请`sum`像其他人建议的那样使用。

但是，如果您想保留打印出每个字符的值并将它们全部相加的循环体，只需在循环外创建一个变量并`ord(c)-96`每次递增：

```
total = 0
for ch in name:
    charValue = ord(ch)-96
    print(charValue, end="")
    total += charValue 
```

一旦 for 循环完成，`total`将保存每个字符的所有值的总和。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T17:44:11.087

```
In [19]: sum(ord(c) - ord('A') + 1 for c in 'ABCD')
Out[19]: 10 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-09T18:27:43.040

一种方法是创建 char->value 的映射，您可以使用`dict`:

```
>>> from string import ascii_lowercase
>>> lookup = {ch:idx for idx, ch in enumerate(ascii_lowercase, start=1)}
>>> test = 'abcd'
>>> sum(lookup[ch] for ch in test)
10 
```

这节省了序数值的麻烦，并且更明确......

# node.js - 同时监听 GET 和 POST，node.js 服务器

> ID：13789942
> 
> 赞同：0
> 
> 时间：2012-12-09T17:43:26.270
> 
> 标签：node.js, http, post, get, handler

`http`这是我使用[本](http://www.nodebeginner.org/#continuereading)教程构建的基本服务器。我将在这里只展示一个创建服务器的函数：

```
function Server(resourceMap, rootFolder) {

    this.resourceMap = resourceMap;
    this.rootFolder = rootFolder;

    function connectionHandler(socket) {
        var data = "";
        console.log('server connected');
        console.log('CONNECTED: ' + socket.remoteAddress +':'+ socket.remotePort);
        socket.setEncoding('utf8');
            socket.on('data',function(newData) {
                           console.log("NEW DATA\n" +    newData); data += newData;
                            });
        socket.on('end',function(data) {
                           console.log("DATA\n" + data);                                   router.route(data,socket,handle,resourceMap,rootFolder);
                            });
    }

    this.server = net.createServer(connectionHandler);

    this.port = undefined;

    this.startServer = function(port) {
        this.port = port;
        this.server.listen(port, function() { 
            console.log('server bound');});
    }
} 
```

如您所见，我有两个听众 -`data`和`end`. 当`data`发出时，我将发送到变量的内容添加到变量中，在`end`发出时，我将此变量发送到另一个函数。这不适用于`GET`请求 - 所有数据都是一次发送并且`end`不会发出。

我必须能够处理这两种方法。此外，这是一个家庭作业，这就是我不能使用 http 模块的原因。

有什么建议么？谢谢！

Ps，因为我是新手，`node.js`欢迎`JavaScript`提出任何一般性意见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T03:59:56.503

GET 动词不包含正文，这就是为什么永远不会触发“数据”事件的原因。所有代码示例仅对具有主体的动词有效。

当然，您正在学习，但首先您必须了解您想要做什么，然后再考虑实施。我的建议是您继续进行有关 nodejs 的培训。

# qt - 带有环境变量的 Qt Mkdir

> ID：13789943
> 
> 赞同：1
> 
> 时间：2012-12-09T17:43:31.577
> 
> 标签：qt

```
QDir *temp = new QDir("%USERPROFILE%");
bool ok = temp->mkdir("abc"); 
```

它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T18:08:14.440

对于可移植的 Qt 代码，使用静态方法[QProcessEnvironment::systemEnvironment()](http://doc.qt.digia.com/qt/qprocessenvironment.html#systemEnvironment)：

```
QProcessEnvironment env(QProcessEnvironment::systemEnvironment());
QDir *temp = new QDir(env.value("USERPROFILE")); // returns empty string for unset variable
bool ok = temp->mkdir("abc"); 
```

替代方案，如实际问题的评论中所建议的，您也可以使用

```
#include <cstdio>

QString envValue(QString::fromLocal8bit(::getenv("USERPROFILE"))); // standard, yet deprecated in Windows... 
```

我更喜欢使用第一个替代方案，让 Qt 处理字符编码的东西。如果您想使用非 Qt 函数，我认为在 Windows 中您应该使用[getenv_s 或 _wgetenv_s](http://msdn.microsoft.com/en-us/library/tb2sfw2z.aspx)来“正确”执行此操作。

# grails - 如何在 Grails 中使用 withCriteria 生成新的 withCriteria 查询？

> ID：13789947
> 
> 赞同：0
> 
> 时间：2012-12-09T17:44:30.550
> 
> 标签：grails, grails-orm, grails-domain-class, grails-controller, gorm-mongodb

考虑第一个查询：

```
def books =  Book.withCriteria {
   eq("category", "fiction")
} 
```

如何在下一个查询中使用此查询的结果来获取所有撰写这些书的作者？

我试过了：

```
def authors = Author.withCriteria {
  'in'("books", books)
} 
```

但这不起作用。我能做些什么来修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T18:25:03.220

不能直接查询关联吗？

```
def authors = Author.withCriteria {
  books {
    eq("category", "fiction")
  }
} 
```

# jsf - 如何在按下提交按钮时调用 Java 代码

> ID：13789955
> 
> 赞同：0
> 
> 时间：2012-12-09T17:45:25.263
> 
> 标签：jsf, form-submit

我有一个有效的 JSF 应用程序，它允许用户输入他们的姓名，按下提交按钮，然后他们会看到一个欢迎他们的页面。

结构很简单，有一个Person bean，有一个名称的setter 和getter，textfield 设置名称，欢迎页面从bean 中获取名称呈现在欢迎页面上。

我的问题是当用户按下提交按钮时我可以从 XHTML 调用 java 方法吗，因为我需要打开到数据库的连接。应用程序第一页的代码在 xhtml 文件中如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html">

<h:head>
 <title>JSF 2.0 Hello World</title>
</h:head>
<h:body>
 <h3>JSF 2.0 Hello World Example - hello.xhtml</h3>
 <h:form>
  <h:inputText value="#{helloBean.name}"></h:inputText>
  <h:commandButton value="Welcome Me" action="welcome"></h:commandButton>
 </h:form>
</h:body>
</html> 
```

所以看起来当他们点击 Welcome Me 时，welcome.xhtml 文件被调用并将 bean 传递给它。但是当按下 Welcome Me 按钮时，我还需要执行一些代码来打开数据库，我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:51:37.780

为此，`action`命令按钮的属性应该绑定到 bean 的操作方法。

```
<h:commandButton value="Welcome Me" action="#{helloBean.submit}" /> 
```

在该方法中，您可以自由地写下按下按钮时应执行的 Java 代码。

```
public String submit() {
    // ...

    return "welcome";
} 
```

返回的字符串将用作导航结果。如果您返回`null`or `void`，它将返回到相同的视图。

### 也可以看看：

*   [我们的 JSF 维基页面](https://stackoverflow.com/tags/jsf/info)

# java - Java 类和成员对象类型

> ID：13789956
> 
> 赞同：0
> 
> 时间：2012-12-09T17:45:41.567
> 
> 标签：java

我对以下内容有些困惑：

```
class Foo{
private ArrayList<Obj1> obj1List;
private ArrayList<Obj2> obj2List;

/* constructor */
...

public void push(?){

if(the object is of type Obj1)
    push into obj1List (object)
if(the object is of type Obj2)
    push into obj2List (object)

} 
```

我怎样才能用 Push 函数做这样的事情，它会识别对象类型本身，而不使用 instanceof（强制转换）或使用（Object obj）作为其参数？我需要它知道要推送到哪个数组列表！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T17:47:23.163

最简单的方法是有两个重载：

```
public void push(Obj1 obj) {
  objList1.add(obj);
}

public void push(Obj2 obj) {
  objList2.add(obj);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T17:47:06.683

您可以简单地使用 2 种方法，每种对象类型一种，您的程序将自动使用最具体的方法：

```
public void push(Obj1 obj){
    obj1List.add(obj);
}

public void push(Obj2 obj){
    obj2List.add(obj);
} 
```

# log4j - 如何使用 Chainsaw v2 的“加载远程 Log4J 文件”功能？

> ID：13789958
> 
> 赞同：0
> 
> 时间：2012-12-09T17:45:42.523
> 
> 标签：log4j, apache-chainsaw

我正在尝试设置电锯查看器。我真的不明白它应该如何工作。

这是我在 java 项目中要记录的 XML 文件（即我想在 Chainsaw v2 中观看的文件）：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration >
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/" debug="true">

<plugin name="XMLSocketReceiver" class="org.apache.log4j.net.XMLSocketReceiver">
    <param name="decoder" value="org.apache.log4j.xml.UtilLoggingXMLDecoder"/>
    <param name="Port" value="4000"/>
    <param name="threshold" value="ALL"/>
</plugin>

<root>
  <priority value="debug"/>
</root>
</log4j:configuration> 
```

这是[电锯选项菜单](https://i.imgur.com/fwh6C.png)的屏幕截图：

![在此处输入图像描述](../Images/0ead9bc5b2bfd865c99636b1369bcb91.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:00:44.557

有几件事：

*   最新的 Chainsaw 开发人员快照具有许多新功能，包括重新设计的配置 UI，应该使其更简单（文件、加载 Chainsaw 配置菜单选项）。你可以在这里得到它：http: [//people.apache.org/~sdeboy](http://people.apache.org/~sdeboy)
*   生成日志的应用程序使用的 log4j.xml 文件需要有一个“appender”条目，而不是“receiver”条目。Chainsaw 配置将包含一个“接收器”条目，一旦你设置了它，我再次建议通过配置 UI 进行操作（它“接收”由“附加器”生成的事件）。只需从配置屏幕中选择保存配置文件的选项，然后选中“始终使用此配置启动 Chainsaw”框
*   您可以在应用程序日志记录端使用 SocketAppender/SocketHubAppender，或某种 FileAppender。如果您选择使用 FileAppender，Chainsaw 的配置屏幕可以读取您的应用程序端 log4j.xml 并为您生成正确的配置。

如果您还有其他问题，请随时将它们发送到此处或发送到 log4j 用户邮件列表，可在此处获取：http: [//logging.apache.org/log4j/1.2/mail-lists.html](http://logging.apache.org/log4j/1.2/mail-lists.html)

# java - BigInteger 在合理的时间内串起来

> ID：13789964
> 
> 赞同：3
> 
> 时间：2012-12-09T17:46:20.290
> 
> 标签：java, string, performance, biginteger

我正在编写一个时间很重要的程序，我刚刚通过大量调试打印意识到我的大阻塞（80% 的计算时间）正在将一个非常大的 BigInteger（50K 位）转换为一个字符串。
这种行为是意料之中的吗？或者我怎样才能改变一些东西以使其运行得更快？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T17:53:10.563

即使您使用`long`and ，将数字转换为字符串也是一项昂贵的操作`double`。

通常，唯一更昂贵的是您在为文件或控制台编写文本时执行的 IO。

值得注意的是，内置的数字到文本转换器是 O(N^2) 运算，其中 N 是位数。因此，50K 位数字需要很长时间才能转换为十进制字符串也就不足为奇了。

* * *

根据 tmyklebu 的建议，我写了这个。对于少于 500 位的数字，它的速度较慢，但​​在 50,000 位范围内要快得多。

```
public static void main(String... args) {
    BigInteger bi = BigInteger.valueOf(11).pow(48100);
    System.out.println(bi.toString());
    System.out.println(toString(bi));
    System.out.println("bi.length=" + bi.toString().length() + ", toString(bi).length=" + toString(bi).length());
    for (int i = 0; i < 10; i++) {
        long start = System.nanoTime();
        String s = bi.toString();
        long mid = System.nanoTime();
        String s2 = toString(bi);
        long end = System.nanoTime();
        System.out.printf("time1 %.3f ms, time2 %.3f ms%n", (mid - start) / 1e6, (end - mid) / 1e6);
        if (!s.equals(s2))
            throw new AssertionError();
    }
}

public static String toString(BigInteger bi) {
    StringBuilder sb = new StringBuilder();
    int i = 16;
    while (bi.compareTo(powerOfTen(i)) > 0)
        i *= 2;
    toString(bi, sb, i);
    int start = 0;
    while (sb.charAt(start) == '0')
        start++;
    return sb.substring(start);
}

private static void toString(BigInteger bi, StringBuilder sb, int digits) {
    if (digits < 18) {
        int start = sb.length();
        for (int i = 0; i < digits; i++)
            sb.append('0');
        long l = bi.longValue();
        for (int i = digits - 1; i >= 0; i--, l /= 10)
            sb.setCharAt(start + i, (char) ('0' + l % 10));
    } else {
        int digits2 = digits / 2;
        BigInteger[] parts = bi.divideAndRemainder(powerOfTen(digits2));
        toString(parts[0], sb, digits - digits2);
        toString(parts[1], sb, digits2);
    }
}

private static final Map<Integer, BigInteger> powersOfTen = new HashMap<Integer, BigInteger>();

private static BigInteger powerOfTen(int digits2) {
    BigInteger tens = powersOfTen.get(digits2);
    if (tens == null)
        powersOfTen.put(digits2, tens = BigInteger.TEN.pow(digits2));
    return tens;
} 
```

印刷

```
973096948397248203274473625697464617461138859359846077811290536......
973096948397248203274473625697464617461138859359846077811290536......
bi.length=50091, toString(bi).length=50091
time1 525.892 ms, time2 67.260 ms
time1 458.559 ms, time2 98.178 ms
time1 441.275 ms, time2 92.902 ms
time1 399.339 ms, time2 98.448 ms
time1 518.761 ms, time2 97.804 ms
time1 396.884 ms, time2 65.651 ms
time1 363.945 ms, time2 98.827 ms 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T17:57:01.997

查看这篇关于[BigInteger.toString(radix) 性能的](http://royontechnology.blogspot.com/2010/10/performance-of-bigintegertostringradix.html)帖子。它可以给你一个想法。

# mysql - 事务在 Yii 中不起作用

> ID：13789965
> 
> 赞同：1
> 
> 时间：2012-12-09T17:46:26.420
> 
> 标签：mysql, activerecord, transactions, yii

这是我的代码：

```
$transaction = Yii::app()->db->beginTransaction();
            try {
                $tModel->save();
                $activationLink = new ActivationLink;
                $activationLink->User_id = $tModel->id;
                $activationLink->hash1   = User::generateHashCode(100);
                $activationLink->hash2   = User::generateHashCode();
                $activationLink->hash3   = User::generateHashCode();
                $activationLink->time    = time();
                $activationLink->save();                    
                User::sendActivatonLink($tModel->mail,$activationLink->id, $activationLink->hash1, $activationLink->hash2, $activationLink->hash3);
                $transaction->commit();
                $this->redirect(array('view', 'id' => $tModel->id));
            } catch (Exception $e) {
                $transaction->rollback();
                Yii::app()->user->setFlash('error', "{$e->getMessage()}");
                $this->refresh();
            } 
```

`$tModel`保存但`$activationLink`没有，所以它应该回滚。但它没有，为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T13:48:17.157

Yii save() 不会抛出异常，只是验证失败。因此，您必须自己检查 save() 的结果：

```
if (!$model->save())
   $transaction->rollback();

//or:

if (!$model->save())
   throw new Exception("This will trigger my catch statement block"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T18:06:10.000

请检查你的mysql引擎我认为你没有使用innodb。要执行事务，我们必须使用 innodb。让我知道您的表类型/引擎。

或者您还需要添加代码以了解日志中的错误。

抛出新异常（$e）；

# android - ClassNotFoundException：找不到类：但类已存在

> ID：13789968
> 
> 赞同：0
> 
> 时间：2012-12-09T17:46:48.203
> 
> 标签：android, eclipse, classnotfoundexception, buildpath

## 我在我的应用程序中发现 ClassNotFoundException，但该类已存在.. 这是项目工作区

我正在使用很多库，但是在创建构建路径和依赖项时遇到问题..

Logcat 显示消息：

```
12-10 00:36:56.840: W/System.err(12666): java.lang.ClassNotFoundException: Could not find class: org.holoeverywhere.internal.AlertController.RecycleListView
12-10 00:36:56.845: W/System.err(12666):    at org.holoeverywhere.LayoutInflater.onCreateView(LayoutInflater.java:318)
12-10 00:36:56.845: W/System.err(12666):    at org.holoeverywhere.LayoutInflater.onCreateView(LayoutInflater.java:325)
12-10 00:36:56.845: W/System.err(12666):    at org.holoeverywhere.LayoutInflater$HoloFactoryMerger.onCreateView(LayoutInflater.java:63)
12-10 00:36:56.845: W/System.err(12666):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:660)
12-10 00:36:56.845: W/System.err(12666):    at android.view.LayoutInflater.inflate(LayoutInflater.java:457)
12-10 00:36:56.845: W/System.err(12666):    at org.holoeverywhere.LayoutInflater.inflate(LayoutInflater.java:278)
12-10 00:36:56.845: W/System.err(12666):    at android.view.LayoutInflater.inflate(LayoutInflater.java:391)
12-10 00:36:56.845: W/System.err(12666):    at org.holoeverywhere.LayoutInflater.inflate(LayoutInflater.java:263)
12-10 00:36:56.845: W/System.err(12666):    at org.holoeverywhere.LayoutInflater.inflate(LayoutInflater.java:258)
12-10 00:36:56.845: W/System.err(12666):    at org.holoeverywhere.internal.AlertController$AlertParams.createListView(AlertController.java:144)
12-10 00:36:56.845: W/System.err(12666):    at org.holoeverywhere.internal.AlertController$AlertParams.apply(AlertController.java:130)
12-10 00:36:56.845: W/System.err(12666):    at org.holoeverywhere.app.AlertDialog$Builder.create(AlertDialog.java:41)
12-10 00:36:56.845: W/System.err(12666):    at org.isolaa.droidquiz.DashboardActivity$QuizFragment.onItemLongClick(DashboardActivity.java:455)
12-10 00:36:56.850: W/System.err(12666):    at android.widget.AbsListView.performLongPress(AbsListView.java:2703)
12-10 00:36:56.850: W/System.err(12666):    at android.widget.AbsListView$CheckForLongPress.run(AbsListView.java:2651)
12-10 00:36:56.850: W/System.err(12666):    at android.os.Handler.handleCallback(Handler.java:587)
12-10 00:36:56.850: W/System.err(12666):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-10 00:36:56.850: W/System.err(12666):    at android.os.Looper.loop(Looper.java:132)
12-10 00:36:56.850: W/System.err(12666):    at android.app.ActivityThread.main(ActivityThread.java:4123)
12-10 00:36:56.850: W/System.err(12666):    at java.lang.reflect.Method.invokeNative(Native Method)
12-10 00:36:56.850: W/System.err(12666):    at java.lang.reflect.Method.invoke(Method.java:491)
12-10 00:36:56.850: W/System.err(12666):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
12-10 00:36:56.855: W/System.err(12666):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
12-10 00:36:56.855: W/System.err(12666):    at dalvik.system.NativeStart.main(Native Method)
12-10 00:36:56.855: W/System.err(12666): android.view.InflateException: Binary XML file line #2: Error inflating class org.holoeverywhere.internal.AlertController.RecycleListView
12-10 00:36:56.855: W/System.err(12666):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:682)
12-10 00:36:56.855: W/System.err(12666):    at android.view.LayoutInflater.inflate(LayoutInflater.java:457)
12-10 00:36:56.855: W/System.err(12666):    at org.holoeverywhere.LayoutInflater.inflate(LayoutInflater.java:278)
12-10 00:36:56.855: W/System.err(12666):    at android.view.LayoutInflater.inflate(LayoutInflater.java:391)
12-10 00:36:56.855: W/System.err(12666):    at org.holoeverywhere.LayoutInflater.inflate(LayoutInflater.java:263)
12-10 00:36:56.855: W/System.err(12666):    at org.holoeverywhere.LayoutInflater.inflate(LayoutInflater.java:258)
12-10 00:36:56.855: W/System.err(12666):    at org.holoeverywhere.internal.AlertController$AlertParams.createListView(AlertController.java:144)
12-10 00:36:56.860: W/System.err(12666):    at org.holoeverywhere.internal.AlertController$AlertParams.apply(AlertController.java:130)
12-10 00:36:56.860: W/System.err(12666):    at org.holoeverywhere.app.AlertDialog$Builder.create(AlertDialog.java:41)
12-10 00:36:56.860: W/System.err(12666):    at org.isolaa.droidquiz.DashboardActivity$QuizFragment.onItemLongClick(DashboardActivity.java:455)
12-10 00:36:56.860: W/System.err(12666):    at android.widget.AbsListView.performLongPress(AbsListView.java:2703)
12-10 00:36:56.860: W/System.err(12666):    at android.widget.AbsListView$CheckForLongPress.run(AbsListView.java:2651)
12-10 00:36:56.860: W/System.err(12666):    at android.os.Handler.handleCallback(Handler.java:587)
12-10 00:36:56.860: W/System.err(12666):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-10 00:36:56.860: W/System.err(12666):    at android.os.Looper.loop(Looper.java:132)
12-10 00:36:56.860: W/System.err(12666):    at android.app.ActivityThread.main(ActivityThread.java:4123)
12-10 00:36:56.860: W/System.err(12666):    at java.lang.reflect.Method.invokeNative(Native Method)
12-10 00:36:56.865: W/System.err(12666):    at java.lang.reflect.Method.invoke(Method.java:491)
12-10 00:36:56.865: W/System.err(12666):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
12-10 00:36:56.865: W/System.err(12666):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
12-10 00:36:56.865: W/System.err(12666):    at dalvik.system.NativeStart.main(Native Method)
12-10 00:36:56.865: W/System.err(12666): Caused by: java.lang.ClassNotFoundException: org.holoeverywhere.internal.AlertController.RecycleListView in loader dalvik.system.PathClassLoader[/data/app/org.isolaa.droidquiz-1.apk]
12-10 00:36:56.870: W/System.err(12666):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:251)
12-10 00:36:56.870: W/System.err(12666):    at java.lang.ClassLoader.loadClass(ClassLoader.java:540)
12-10 00:36:56.870: W/System.err(12666):    at java.lang.ClassLoader.loadClass(ClassLoader.java:500)
12-10 00:36:56.870: W/System.err(12666):    at android.view.LayoutInflater.createView(LayoutInflater.java:542)
12-10 00:36:56.870: W/System.err(12666):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:671)
12-10 00:36:56.870: W/System.err(12666):    ... 20 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T20:04:34.163

如果您使用的是 eclipse，请确保它们已在构建路径中配置。这样它就包含在 APK 中。此外，由于 ADB 传输文件的方式，您的 DroidQuiz.apk 会变成 DroidQuiz-1.apk。不管你叫什么apk，它都会做同样的事情。

# c# - SetSourceData 正确调用参数

> ID：13789970
> 
> 赞同：1
> 
> 时间：2012-12-09T17:46:52.937
> 
> 标签：c#, excel

以下片段的正确调用是什么

// 这个抛出异常

```
Excel.Range range = worksheet.get_Range("A3", "B4");
myChart.SetSourceData(range.ToString(), Excel.XlRowCol.xlColumns); // Throws an 
```

// 抛出的异常

```
Exception Source:      Microsoft.Office.Interop.PowerPoint
Exception Type:        System.Runtime.InteropServices.COMException
Exception Message:     Error HRESULT E_FAIL has been returned from a 
call to a COM component.
Exception Target Site: SetSourceData 
```

## -------------------------------------------------- ------------

// 这个没有编译

```
myChart.SetSourceData(range, Excel.XlRowCol.xlColumns); 
```

// 编译错误

```
1>  error CS1502: The best overloaded method match for 'Microsoft.Office.Interop.
PowerPoint.Chart.SetSourceData(string, object)' has some invalid arguments
1>  error CS1503: Argument 1: cannot convert from 
'Microsoft.Office.Interop.Excel.Range' to 'string' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-06T09:29:52.623

**SetSourceData**以完全不同的方式运行，具体取决于您使用的是 Excel 库中的方法还是其他库（如 PowerPoint）中的方法：

Sub SetSourceData(Source As **Range** , [PlotBy]) Excel.Chart 的成员

Sub SetSourceData(Source As **String** , [PlotBy]) PowerPoint.Chart 的成员

在 PowerPoint 模型中，该方法需要一个字符串，该字符串包含包含源数据的图表数据范围的地址！

[https://msdn.microsoft.com/en-us/library/office/ff746759.aspx?f=255&MSPPError=-2147217396](https://msdn.microsoft.com/en-us/library/office/ff746759.aspx?f=255&MSPPError=-2147217396)

相同的方法在两个不同的 MSO 对象模型中以两种不同的方式运行。这就是聪明的微软！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:26:08.927

这实际上很奇怪，大多数文档将第一个范围参数定义为范围对象，但这实际上应该作为字符串传递

```
wdChart.SetSourceData("Sheet1!$A$1:$B$4", oMissing); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-17T09:49:17.957

我认为这应该有效：

```
myChart.SetSourceData(dataSheet.Name + "!" + dataSheet.UsedRange.Address, Excel.XlRowCol.xlColumns); 
```

更新：获取数据表名称很重要。如果您需要选择特定范围，而不是整个工作表，请将 dataSheet.UsedRange 替换为您的范围。我需要这个并对其进行了测试。有效。

# python - Python 3 上的 CSV 写入错误

> ID：13789979
> 
> 赞同：4
> 
> 时间：2012-12-09T17:47:40.120
> 
> 标签：python, python-3.x

我正在尝试将模块的输出保存到 CSV 文件，当我运行以下代码时出现错误，该代码是模块的一部分：

```
base_keys = ['path', 'rDATE', 'cDate', 'cik', 'risk', 'word_count']
outFile = open('c:\\Users\\ahn_133\\Desktop\\Python Project\\MinkAhn_completed2.csv','wb')
dWriter = csv.DictWriter(outFile, fieldnames=base_keys)
dWriter.writerow(headerDict) 
```

这是错误消息（base_keys 是标题。）

```
return self.writer.writerow(self._dict_to_list(rowdict))
TypeError: 'str' does not support the buffer interface 
```

我什至不明白错误消息是关于什么的。我使用 Python 3.3 和 Windows 7。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T18:20:39.140

简单地说，以二进制模式打开文件以写入 csv 数据在 Python 3 中不起作用。您想要以文本模式打开并使用默认编码或自己指定一个，即您的代码应编写为：

```
import csv
k = ['hi']
out = open('bleh.csv', 'w', newline='', encoding='utf8') # mode could be 'wt' for extra-clarity
writer = csv.DictWriter(out, k)
writer.writerow({'hi': 'hey'}) 
```

现在，由于一个[错误](http://bugs.python.org/issue7198)，您还需要指定`newline=''`何时打开此文件以写入 CSV 输出。

# java - 验证从数据库中检索到的一组值

> ID：13789980
> 
> 赞同：1
> 
> 时间：2012-12-09T17:47:46.993
> 
> 标签：java, validation, enums

> **可能重复：**
> [在 Java 中使用 ENUMS 验证值组合的最佳方法是什么？](https://stackoverflow.com/questions/13788574/what-is-the-best-approach-for-validating-a-combination-of-values-using-enums-in)

我从数据库'Value'和'Check'中获取两个值，它们通过Hibernate映射映射到枚举ValueEnum（A、B、C、D）和CheckEnum（1、2、3）。

这些值需要验证，以便我应该允许不同的组合用于不同的检查。

例如：

```
isChecked()  - should allow A1, A2, B3
isProcessed() - B2, C2, D3 
```

必须定义这些方法，以便我能够根据要求添加/删除条件。还必须在外部定义，以便我的所有课程都可以使用它。

对此最好的方法是什么？

# android - 获取当天 Android 4.0+ 上的所有日历事件

> ID：13789982
> 
> 赞同：3
> 
> 时间：2012-12-09T17:48:02.833
> 
> 标签：android, calendar, google-calendar-api, android-4.2-jelly-bean

寻找我的问题的答案已经有一段时间了。我想要做的：从当天的所有日历中获取所有事件

我可以在 ICS 之前的设备（2.2 到 3.2 Android 版本）上毫无问题地做到这一点。在 Android 4.0+ 上，自从引入了新的日历 API 以来，我一直在处理它并取得了相当大的成功。好吧，这就是我在测试其他设备而不是我的设备之前的想法。有时我的代码工作，有时它不会。重复事件不会出现在某些设备或其他设备上，而是显示所有事件（不仅是当天的事件）。

我认为问题出在一行代码中，但我找不到正确的方法：

```
 cursor = contentResolver.query(CalendarContract.Events.CONTENT_URI, COLS, "("+CalendarContract.Events.DTSTART+">"+now+" and "+CalendarContract.Events.DTEND+"<"+endOfDay.getTimeInMillis()+") or (("+CalendarContract.Events.ALL_DAY+"=1) and "+"("+CalendarContract.Events.DTSTART+">="+timeAllDay.getTimeInMillis()+") and "+"("+CalendarContract.Events.DTEND+"<="+endTimeAllDay.getTimeInMillis()+"))", null, null); 
```

这是我使用上述行创建的所有类：

```
 public class ICSCalendar extends AsyncTask<Intent, String, Intent> 
    {
      private static final String[] COLS = new String[] {CalendarContract.Events.TITLE, CalendarContract.Events.DTSTART, CalendarContract.Events.DTEND, CalendarContract.Events.ALL_DAY};

@Override
protected Intent doInBackground(Intent... params) 
{
    ContentResolver contentResolver = Alert.mContext.getContentResolver();
    Cursor cursor = null;

    try
    {
        long now = new Date().getTime();
        Calendar endOfDay = Calendar.getInstance();
        endOfDay.set(Calendar.HOUR_OF_DAY, 23);
        endOfDay.set(Calendar.MINUTE, 59);
        endOfDay.set(Calendar.SECOND, 59);

        Calendar timeAllDay = Calendar.getInstance();
        timeAllDay.set(Calendar.HOUR_OF_DAY, 0);
        timeAllDay.set(Calendar.MINUTE, 0);
        timeAllDay.set(Calendar.SECOND, 0);

        Calendar endTimeAllDay = Calendar.getInstance();
        endTimeAllDay.add(Calendar.DAY_OF_MONTH, 1);
        endTimeAllDay.set(Calendar.HOUR_OF_DAY, 2);
        endTimeAllDay.set(Calendar.MINUTE, 0);
        endTimeAllDay.set(Calendar.SECOND, 1);

        cursor = contentResolver.query(CalendarContract.Events.CONTENT_URI, COLS, "("+CalendarContract.Events.DTSTART+">"+now+" and "+CalendarContract.Events.DTEND+"<"+endOfDay.getTimeInMillis()+") or (("+CalendarContract.Events.ALL_DAY+"=1) and "+"("+CalendarContract.Events.DTSTART+">="+timeAllDay.getTimeInMillis()+") and "+"("+CalendarContract.Events.DTEND+"<="+endTimeAllDay.getTimeInMillis()+"))", null, null);

        Intent calendarData = new Intent(Alerts.CALENDAR_UI_DATA);
        int nb_events = 0;

        while(cursor.moveToNext()) 
        {
            nb_events++;

            final String title = cursor.getString(0);
            final Date begin = new Date(cursor.getLong(1));
            final Boolean allDay = !cursor.getString(3).equals("0");

            calendarData.putExtra("event_"+nb_events, (String) title);
            calendarData.putExtra("all_day_event_"+nb_events, (Boolean) allDay);

            Calendar beginEvent = Calendar.getInstance();   
            beginEvent.setTimeInMillis(cursor.getLong(1));
            String format = Alerts.get24HourMode(Alert.mContext) ? "kk:mm": "h:mm";
            CharSequence newTime = DateFormat.format(format, beginEvent);
            if(format == "h:mm")
            {
                if((beginEvent.get(Calendar.AM_PM) == 0))
                {
                    newTime = newTime + " A.M";
                }
                else
                {
                    newTime = newTime + " P.M";
                }
            }

            if(!allDay)
            {
                calendarData.putExtra("date_event_"+nb_events, newTime);
            }
            else
            {
                calendarData.putExtra("date_event_"+nb_events, Alert.mContext.getString(R.string.tts_whole_day_calendar_event));
            }
        }

        calendarData.putExtra("nb_events", nb_events);

        return calendarData;
    }
    catch(Exception e)
    {
        Log.d("DEBUG", ""+e);
        return null;
    }
}

@Override
protected void onPostExecute(Intent result) 
{
    // TODO Auto-generated method stub
    super.onPostExecute(result);

    try
    {
        Alert.mContext.sendBroadcast(result);
    }
    catch(NullPointerException e){}
}

@Override
protected void onPreExecute() 
{
    // TODO Auto-generated method stub
    super.onPreExecute();
}

@Override
protected void onProgressUpdate(String... values) 
{
    // TODO Auto-generated method stub
    super.onProgressUpdate(values);
} 
```

}

任何人都知道如何从 Android 4.0+ 的当天所有日历中获取所有事件？感谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:29:09.543

为了获得重复事件，您需要实例表，请[在此处查看更多详细信息](http://developer.android.com/guide/topics/providers/calendar-provider.html#instances)

这并不像看起来那么容易我害怕

# java - 错误：org.apache.axis2.AxisFault：请求中未指定方法

> ID：13789987
> 
> 赞同：1
> 
> 时间：2012-12-09T17:48:56.393
> 
> 标签：java, web-services, jakarta-ee, axis2, axiom

我用axis2-1.6.2做客户端有问题然后我总结一下问题。

我正在尝试使用下一个 wsdl 来制作客户端：[http ://www.mobilefish.com/services/web_service/countries.php?wsdl](http://www.mobilefish.com/services/web_service/countries.php?wsdl)

我在 Windows 中使用这一行：

```
WSDL2Java.bat -uri http://www.mobilefish.com/services/web_service/countries.php?wsdl -d xmlbeans -s 
```

我正在使用**xmlbeans**，因为使用**adb**我有问题

当我尝试将此客户端与下一个代码一起使用时：

```
public static void main(String[] args) throws RemoteException {

    CountriesWebserviceMobilefishComServiceStub countriWebService = 
    new CountriesWebserviceMobilefishComServiceStub("http://www.mobilefish.com/services/web_service/countries.php?wsdl");

    CountryInfoByIanaDocument cidocument = CountryInfoByIanaDocument.Factory.newInstance();
    CountryInfoByIana ci = CountryInfoByIana.Factory.newInstance();

    ci.setIanacode("us");
    cidocument.setCountryInfoByIana( ci );
    countriWebService.countryInfoByIana(  cidocument );
} 
```

我收到下一个错误：

> 线程“主”org.apache.axis2.AxisFault 中的异常**：请求中未指定方法。** 在 org.apache.axis2.util.Utils.getInboundFaultFromMessageContext(Utils.java:531) 在 org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:375) 在 org.apache.axis2.description.OutInAxisOperationClient.send (OutInAxisOperation.java:421) 在 org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229) 在 org.apache.axis2.client.OperationClient.execute(OperationClient.java:165) 在 com.mobilefish。 Webservice.countries.CountriesWebserviceMobilefishComServiceStub.countryInfoByIana(CountriesWebserviceMobilefishComServiceStub.java:462) 在 Main.main(Main.java:33)

请如果有人可以帮助解决这个问题，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:13:12.747

看起来很像 Web 服务没有正确发送消息所需的信息。您正在调用一个 RPC/编码样式的 Web 服务，该服务期望通过提供一个包含操作名称的消息有效负载来调用它的操作。验证这确实发生了，并且您的原始 SOAP 消息包含操作名称。

另一种可能性是该服务可能需要您填充`soap action`标头以便它能够处理您的请求。填充这个 http 标头，看看会发生什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:54:53.920

我来这里是为了回答我自己的问题，确切地说我不知道​​使用 web 服务时axis2会发生什么，在我在这里报告的错误之后我有很多新错误，但我可以使用axis1解决这个问题。 4 消费web服务的所有操作。

只是我创建了对象：

```
java -cp %AXISCLASSPATH% org.apache.axis.wsdl.WSDL2Java http://www.mobilefish.com/services/web_service/countries.php?wsdl 
```

然后我使用下一个代码：

```
public static void main(String[] args) throws MalformedURLException, RemoteException, ServiceException {

    String  endpoint = "http://www.mobilefish.com/services/web_service/countries.php?wsdl";

    Service  service = new Service();
    Call     call    = (Call) service.createCall();

    call.setTargetEndpointAddress( new java.net.URL(endpoint) );
    call.setOperationName( "countryInfoByIana" );
    call.addParameter( "ianacode", XMLType.XSD_STRING, ParameterMode.IN );
    call.setReturnType(XMLType.SOAP_ARRAY);

    Object _resp = call.invoke( new Object [] { "us" });

    Object[] objetoArray = (Object[]) _resp;

    for(int i = 0; i< objetoArray.length; i++){
        System.out.println( objetoArray[ i ] );
    }

} 
```

也许不可能使用我不知道的axis2来使用Web服务，但现在我发现了这个对我有效的解决方案。

不管怎么说，还是要谢谢你。

# php - 在 phpmailer 中添加 HTML 格式

> ID：13789989
> 
> 赞同：20
> 
> 时间：2012-12-09T17:49:13.230
> 
> 标签：php, phpmailer

我正在使用 PHP 邮件程序将在线表格直接发送到电子邮件。我想像这样编辑表格：

```
$message = '<p>The following request was sent from: '</p>;
$message .= '<p>Name: '.$name.'</p><br />';
$message .= '<p>Phone: '.$phone.'</p><br />';
$message .= '<p>Email: '.$email.'</p><br />'; 
```

但是，在我收到的电子邮件中，我收到了`<p>`,`<br />`等。不是我想要的格式，而是实际的 HTML。它一直对我有用，然后我意识到我正在使用股票 PHP 邮件功能。不确定 PHP 邮件程序是否有不同的参数，或者我是否只是在这里遗漏了一些小参数？

**我将在哪里设置 text/html 的标题？**

```
 $mail = new PHPMailer();
    $mail -> IsSMTP();
    $mail -> Host = "---";
    $mail -> Port = 25;
    $mail -> SMTPAuth = false;
    $mail -> Username = EMAIL_USER;
    $mail -> Password = EMAIL_PASS;
    $mail -> FromName = $from_name;
    $mail -> From = $from;
    $mail -> Subject = $subject;
    $mail -> Body = $message;
    $mail -> AddAddress("---");

    $result = $mail -> Send(); 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-09T17:53:22.580

在 PHP 邮件程序中，您需要在下面设置

```
$mail->IsHTML(true); 
```

注意：`$mail`表示您的 PHPMailer 对象。

参考链接：[PHPMailer](http://www.ustrem.org/en/articles/send-mail-using-phpmailer-en/)

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-12-09T17:50:48.753

### 默认情况下，PHP`mail()`函数是`text/plain`.

在您的`mail()`标题中，更改`content-type`为`text/html`并尝试。

### 例子：

```
<?php 
    $body = "<html>\n"; 
    $body .= "<body style=\"font-family:Verdana, Verdana, Geneva, sans-serif; font-size:12px; color:#666666;\">\n"; 
    $body = $message; 
    $body .= "</body>\n"; 
    $body .= "</html>\n"; 

    $headers  = "From: My site<noreply@example.com>\r\n"; 
    $headers .= "Reply-To: info@example.com\r\n"; 
    $headers .= "Return-Path: info@example.com\r\n"; 
    $headers .= "X-Mailer: Drupal\n"; 
    $headers .= 'MIME-Version: 1.0' . "\n"; 
    $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 

    return mail($recipient, $subject, $message, $headers); 
?> 
```

### PHP 邮件程序：

您需要设置`IsHTML(true)`：

```
$mail->IsHTML(true); 
```

# java - ClassCastException：扩展 Log4j 记录器

> ID：13789992
> 
> 赞同：0
> 
> 时间：2012-12-09T17:49:29.490
> 
> 标签：java, inheritance

我想为特殊目的扩展 Log4j Logger。这是我写的课程：

```
package com.edfx.adb.common.logger;

import javax.faces.application.ProjectStage;
import javax.faces.context.FacesContext;

import org.apache.log4j.LogManager;

public final class Logger extends org.apache.log4j.Logger {

    protected Logger(String name) {
        super(name);
    }

    public static org.apache.log4j.Logger getLogger(String name) {
        return LogManager.getLogger(name);
    }

    @Override
    public void debug(Object message) {
        if (isDebugEnable()) {
            super.debug(message);
        }
    }

    @Override
    public void debug(Object message, Throwable throwable) {
        if (isDebugEnable()) {
            super.debug(message, throwable);
        }
    }

    private boolean isDebugEnable() {
        return FacesContext.getCurrentInstance().isProjectStage(ProjectStage.Development);
    }
} 
```

我称它为：

```
protected final Logger log = (Logger) Logger.getLogger(getClass()); 
```

但我得到了例外：

```
Caused by: java.lang.ClassCastException: org.jboss.logmanager.log4j.BridgeLogger cannot be cast to com.edfx.adb.common.logger.Logger
        at com.edfx.adb.web.controller.BaseWebController.<init>(BaseWebController.java:18) [classes:]
        at com.edfx.adb.web.controller.AuthController.<init>(AuthController.java:27) [classes:]
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) [rt.jar:1.7.0_09]
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57) [rt.jar:1.7.0_09]
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) [rt.jar:1.7.0_09]
        at java.lang.reflect.Constructor.newInstance(Constructor.java:525) [rt.jar:1.7.0_09]
        at java.lang.Class.newInstance0(Class.java:372) [rt.jar:1.7.0_09]
        at java.lang.Class.newInstance(Class.java:325) [rt.jar:1.7.0_09]
        at com.sun.faces.mgbean.BeanBuilder.newBeanInstance(BeanBuilder.java:188) [jsf-impl-2.1.7-jbossorg-2.jar:] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:53:56.830

我不明白您为什么要尝试扩展 Logger，而是尝试扩展 AppenderSkeleton，这确实是完成所有工作的原因。然后将该 Appender 添加到您的配置中

```
public class MyAppender extends AppenderSkeleton {
    ...
} 
```

然后添加您的配置：

```
log4j.rootLogger=MyApp
log4j.appender.MyApp=com.mypackage.MyAppender 
```

我自己试过这个，它就像一个魅力。