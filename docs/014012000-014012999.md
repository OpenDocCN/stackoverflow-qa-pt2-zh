# StackOverflow 问答 14012000-14012999

# c# - 操作系统上的 C# 图形编程

> ID：14012001
> 
> 赞同：0
> 
> 时间：2012-12-23T15:07:01.150
> 
> 标签：c#, .net, mono

这是一个奇怪的问题。我有兴趣在计算机上构建一个导航应用程序。我想在用户完成某事时给他们“物理提示”。例如，单击文件夹时白色光环会扩大。这可以用 C# 来完成吗？一位用户建议我将其扩展为更详细的内容以更具体。我想使用 Kinect 让用户在操作系统中导航。但是，我希望他们能够使用双手，所以我不想只是将手连接到鼠标指针上。我想给用户一些关于他们与操作系统交互的视觉反馈。我很难想到最好的方法来做到这一点。所以我想在操作系统上创建视觉效果，而不是在任何特定的窗口中，比如游戏窗口。

我看到的大多数图形教程要么涉及构建窗口并为该窗口渲染管道；或使用 WPF 和 Silverlight 图形和动画。我需要更多的灵活性，因为这将适用于操作系统而不是特定应用程序。我无法确定从哪里开始，以及是否可以使用 .NET 或 Mono Framework。

我最好只使用 C++ 来实现这个目标。如果这个问题过于开放，请告诉我。我试图找到如何开始做这样的事情。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T15:21:39.720

.NET WinForms，就像 C++ WinForms 使用 GDI+，.NET 只是更加抽象。您仍然可以通过 p/invoke 访问本机代码，并且能够覆盖抽象 BCL 中的受保护成员，这意味着您仍然具有相当程度的控制权。因此，除非您谈论的是特定的图形库，否则我认为 .NET WinForms 不会比 C++ 小。在这种情况下。

关于你的任务，我会研究分层窗口。抱歉，我手头没有任何全面的参考资料，因为我在学习时努力寻找它们，但这是我聚集在一起的一门课程，可以帮助您开始在[分层窗口](http://msdn.microsoft.com/en-us/library/ms997507.aspx)上绘图。而不是从派生的主要形式`Form`派生自`SingleLayeredForm`：

```
public class SingleLayeredForm : Form
{
    public new event PaintEventHandler Paint;

    public SingleLayeredForm()
    {
        this.SetStyle(ControlStyles.OptimizedDoubleBuffer, true);
        this.FormBorderStyle = FormBorderStyle.FixedSingle;
        this.StartPosition = FormStartPosition.Manual;
    }

    protected override CreateParams CreateParams
    {
        get
        {
            if (DesignMode) return base.CreateParams;
            CreateParams createParams = base.CreateParams;
            createParams.ExStyle = createParams.ExStyle | 0x80000;
            return createParams;
        }
    }

    public void SetBitmap(Bitmap bitmap)
    {
        if (!IsHandleCreated || DesignMode) return;
        IntPtr oldBits = IntPtr.Zero;
        IntPtr screenDC = WinAPI.GetDC(IntPtr.Zero);
        IntPtr hBitmap = IntPtr.Zero;
        IntPtr memDC = WinAPI.CreateCompatibleDC(screenDC);
        try
        {
            Point topLocation = new Point(this.Left, this.Top);
            Size bitmapSize = new Size(bitmap.Width, bitmap.Height);
            WinAPI.BLENDFUNCTION blendFunc = new WinAPI.BLENDFUNCTION();
            Point sourceLocation = Point.Empty;
            hBitmap = bitmap.GetHbitmap(Color.FromArgb(0));
            oldBits = WinAPI.SelectObject(memDC, hBitmap);

            blendFunc.BlendOp = WinAPI.AC_SRC_OVER;
            blendFunc.SourceConstantAlpha = 255;
            blendFunc.AlphaFormat = WinAPI.AC_SRC_ALPHA;
            blendFunc.BlendFlags = 0;

            WinAPI.UpdateLayeredWindow(Handle, screenDC, ref topLocation, ref bitmapSize, memDC, ref sourceLocation, 0, ref blendFunc, WinAPI.ULW_ALPHA);
        }
        finally
        {
            if (hBitmap != IntPtr.Zero)
            {
                WinAPI.SelectObject(memDC, oldBits);
                WinAPI.DeleteObject(hBitmap);
            }
            WinAPI.ReleaseDC(IntPtr.Zero, screenDC);
            WinAPI.DeleteDC(memDC);
        }
    }

    public new void Invalidate()
    {
        using (Bitmap bitmap = new Bitmap(this.ClientSize.Width, this.ClientSize.Height))
        {
            using (Graphics graphics = Graphics.FromImage(bitmap))
            {

                graphics.SmoothingMode = SmoothingMode.HighSpeed;
                graphics.CompositingMode = CompositingMode.SourceCopy;

                if (this.Paint != null)
                    this.Paint(this, new PaintEventArgs(graphics, Rectangle.Empty));
            }
            SetBitmap(bitmap);
        }
    }
}

public sealed class WinAPI
{
    [DllImport("user32.dll")]
    public static extern bool HideCaret(IntPtr hWnd);

    [DllImport("user32.dll", CharSet = CharSet.Auto, ExactSpelling = true, CallingConvention = CallingConvention.Winapi)]
    public static extern short GetKeyState(int keyCode);

    [DllImport("user32.dll")]
    public static extern bool RegisterHotKey(IntPtr hWnd, int id, uint fsModifiers, uint vk);

    [DllImport("user32.dll")]
    public static extern bool UnregisterHotKey(IntPtr hWnd, int id);

    [DllImport("gdi32.dll", SetLastError = true)]
    public static extern IntPtr CreateCompatibleDC(IntPtr hdc);

    [DllImport("user32.dll")]
    public static extern IntPtr GetDC(IntPtr hWnd);

    [DllImport("gdi32.dll", ExactSpelling = true, PreserveSig = true, SetLastError = true)]
    public static extern IntPtr SelectObject(IntPtr hdc, IntPtr hgdiobj);

    [DllImport("user32.dll")]
    public static extern bool ReleaseDC(IntPtr hWnd, IntPtr hDC);

    [DllImport("gdi32.dll")]
    public static extern bool DeleteDC(IntPtr hdc);

    [DllImport("gdi32.dll")]
    public static extern bool DeleteObject(IntPtr hObject);

    [DllImport("user32.dll", ExactSpelling = true, SetLastError = true)]
    public static extern bool UpdateLayeredWindow(IntPtr hwnd, IntPtr hdcDst, ref Point pptDst, ref Size psize, IntPtr hdcSrc, ref Point pptSrc, uint crKey, [In] ref BLENDFUNCTION pblend, uint dwFlags);

    [DllImport("user32.dll")]
    public static extern IntPtr GetDesktopWindow();

    [DllImport("user32.dll")]
    public static extern IntPtr GetWindowDC(IntPtr ptr);

    [DllImport("gdi32.dll")]
    public static extern IntPtr CreateCompatibleBitmap(IntPtr hdc, int nWidth, int nHeight);

    [DllImport("gdi32.dll")]
    public static extern bool BitBlt(IntPtr hdcDest, int xDest, int yDest, int wDest, int hDest, IntPtr hdcSource, int xSrc, int ySrc, CopyPixelOperation rop);

    [DllImport("user32.dll")]
    public static extern IntPtr GetForegroundWindow();

    [DllImport("user32.dll")]
    public static extern bool GetWindowRect(IntPtr hWnd, out RECT rect);

    public const byte AC_SRC_OVER = 0;
    public const byte AC_SRC_ALPHA = 1;
    public const byte ULW_ALPHA = 2;

    [StructLayout(LayoutKind.Sequential, Pack = 1)]
    public struct BLENDFUNCTION
    {
        public byte BlendOp;
        public byte BlendFlags;
        public byte SourceConstantAlpha;
        public byte AlphaFormat;
    }

    [StructLayout(LayoutKind.Sequential)]
    public struct RECT
    {
        public int Left;
        public int Top;
        public int Right;
        public int Bottom;
    }
} 
```

# java - Java - 转义序列丢失

> ID：14012004
> 
> 赞同：0
> 
> 时间：2012-12-23T15:07:10.500
> 
> 标签：java, soap, escaping

我对 Java 中的转义序列有疑问。我正在调用一个 Web 服务女巫，它接受一些字符串参数和一个字节 [] 参数，并返回字节 []。当我收到那个字节[]时，我将它写入文件并使用一些文本编辑器（如 Open Office）打开该文件。一切看起来都很好，但是我的 \n 和 \t 被替换为空格（“”）。以前使用过这个网络服务的人说，如果我用字符替换我的 \n 和 \t它将起作用`&#xD;`，`&#xA;`但它仍然不起作用。

我几乎尝试了我在谷歌上找到的所有东西来解决这个问题，但仍然没有解决它。我仍然认为网络服务很好，这取决于我将发送什么而不是换行符和制表符，但我不知道是否有任何其他字符组合可以正确替换我的 \n 和 \t。

我很难在这里提出正确的问题，因为我看不到 Web 服务的实现。也许我发送的 SOAP 消息做了一些转换？或者还有其他类似的东西：

`String replaceString = myString.replace("\\n", "&#xD;");`

还是我做错了？

编辑 ：

解决方案应如下所示：

[https://github.com/NetAngels/django-webodt/issues/10](https://github.com/NetAngels/django-webodt/issues/10)

但即使这样仍然没有帮助我。

提前致谢。

更新：我正在发送一个`openOffice .odf file (byte[])`包含登录用户的用户名等的空字符串，以及一个包含来自我在表单上的文本字段中的所有用户输入的 HashMap。在该文本字段中，用户经常输入换行符或制表符，当所有内容通过 Web 服务合并时，换行符和制表符被替换为空格。Web 服务运行良好，我可以完全访问它。Web 服务方法的返回是 byte[] 代表填充的 .odt 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T09:31:56.550

我发现真正的问题出在网络服务中。Web 服务上的 XML 编写器总是对诸如`&, <, >`等之类的字符进行转义。而不是获取序列`&#10;`，或者`&#13;`我得到序列，`&amp;#10;`女巫不是换行符。因此，当我打开我的 .odt 文件时会显示这些字符`&amp;`，但是当我手动将它们替换为原始字符时`&#10;`，它们现在会显示并出现换行符。

我试图把它`&#10;`放在 CDATA 标记中，但是事件 CDATA 的大括号`<`和`>`用`&lt;`and转义了`&gt;`所以，在这种情况下，即使 CDATA 也没有被正确解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-02T15:11:34.880

`\\n`是错的。你应该使用`\n`. 因为第一个是字符 '\' 后跟 n，第二个是字符 '\n' 这是换行符

# c++ - 使用 OpenAL(C++) 录制声音。缓冲区大小

> ID：14012005
> 
> 赞同：2
> 
> 时间：2012-12-23T15:07:14.190
> 
> 标签：c++, audio, microphone, openal

我在使用 OpenAL 库录制声音时遇到了一个问题。我读了这个问题的第二个答案：[Recording Audio with OpenAL](https://stackoverflow.com/questions/3056113/recording-audio-with-openal)。但我不明白，如何更改缓冲区大小。例如，如果我将 SSIZE 和缓冲区大小更改为 441，程序就会崩溃。如果你知道这个问题的答案，请解释一下，我怎样才能获得采样率为 96000Hz 的 1 ms 缓冲区。（数组中的 96 个元素，1 个通道，8 位）。请帮我。

补充：我改变这个：

```
const int SRATE = 96000;
const int SSIZE = 96;

ALbyte buffer[SSIZE];
ALint sample; 
```

和

```
AL_FORMAT_STEREO16 
```

至

```
AL_FORMAT_MONO8 
```

这给了我这个错误： ![在此处输入图像描述](../Images/d84f7eddbc7e8db2affe98a136dbd43e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T21:52:10.480

我猜 alcGetIntegerv 返回的样本数大于 SSIZE ...

# java - Grails - 项目构建系统

> ID：14012007
> 
> 赞同：1
> 
> 时间：2012-12-23T15:07:38.747
> 
> 标签：java, grails, ant, build, web

新手问题，

将其用于 Web 应用程序。我正在寻找一种工具，可以帮助我为不同的环境构建和部署 Grails 应用程序（类似于 Ant），而不会失去“编辑 > 保存 > 刷新”的开发风格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T15:50:12.353

如果您想按环境添加变量，只需添加如下属性：

```
environments {
    production {
        grails.serverURL = "http://www.changeme.com"
        grails.dbconsole.enabled = true
        grails.dbconsole.urlRoot = '/admin/dbconsole'
    }
    development {
        grails.serverURL = "http://localhost:8080/${appName}"
    }
    test {
        grails.serverURL = "http://localhost:8080/${appName}"
    }
} 
```

然后像这样得到你的变量：

```
${grailsApplication.config.grails.serverURL} 
```

要切换环境，请使用以下命令：

```
grails run-app      // runs with the default "development" data source
grails dev run-app  // runs with the "development" data source
grails run-war // runs with the production data source
grails -Dgrails.env=mycustomenv run-app // specific a custom environment
grails test run-app // runs with the test data source 
```

[文档](http://www.grails.org/Environments)。

# jquery - Jquery 切换 div 并随着淡入淡出旋转

> ID：14012010
> 
> 赞同：0
> 
> 时间：2012-12-23T15:07:58.420
> 
> 标签：jquery, css, jquery-animate, toggle

好的，我在一个网站上遇到了一个功能，对我来说它看起来很棒，我一直在尝试重新创建一个类似的功能，但甚至无法接近。

您可以在此处查看该功能 - [http://mitchell-me.com/](http://mitchell-me.com/) 如果您单击服务。有机电。

当您单击按钮时，圆圈会旋转，其上的图标会淡入新图标，并且 div 会淡出/淡入。我一直在尝试使用 jquery 切换来做到这一点，但我就是无法接近。

我希望在这里获得任何/所有建议或简单的代码示例。在此先感谢我已经为此失去了理智 3 天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:31:42.453

他们的 javascript 似乎正在改变 CSS。CSS 进行转换和淡化工作。

我[窥探了他们的javascript](http://mitchell-me.com/QuickOptimizer/Cache/43b42ff4cc2c854d0f53e3a3eef13bd85f3aff56b295be5a866e5835449041e2.js) ...

```
$("#service li").click(function(e){e.preventDefault();var index=$(this).index();$('#service li').removeClass("active");if(!$(this).hasClass("active")&&!intrans){intrans=true;switch(index){case 0:TweenLite.to($(".dial"),1.5,{css:{shortRotation:0},ease:Expo.easeInOut});TweenLite.to($(".gear"),1.5,{css:{autoAlpha:0,rotation:0},ease:Expo.easeInOut});TweenLite.to($(".bulb"),1.5,{css:{autoAlpha:1,rotation:0},ease:Expo.easeInOut});$('#electric, #electric1').delay(800).animate({opacity:1},{easing:easeType,duration:"100",complete:function(){}});$('#mechanic, #mechanic1').delay(200).animate({opacity:0},{easing:easeType,duration:"100",complete:function(){intrans=false}});break;case 1:TweenLite.to($(".dial"),1.5,{css:{shortRotation:115,transformOrigin:"103px 103px"},ease:Expo.easeInOut});TweenLite.to($(".bulb"),1.5,{css:{autoAlpha:0,x:0,y:0,rotation:120,transformOrigin:"20px 40px"},ease:Expo.easeInOut});TweenLite.to($(".gear"),1.5,{css:{autoAlpha:1,x:0,y:0,rotation:120,transformOrigin:"50px 48px"},ease:Expo.easeInOut});$('#electric, #electric1').delay(200).animate({opacity:0},{easing:easeType,duration:"100",complete:function(){}});$('#mechanic, #mechanic1').delay(800).animate({opacity:1},{easing:easeType,duration:"100",complete:function(){intrans=false}});break;}} 
```

看起来他们正在使用[Tweenlite](http://www.greensock.com/tweenlite/)和[Tweenmax](http://www.greensock.com/tweenmax/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T15:53:05.030

我试图在 jsFiddle 中重建这种效果，这就是[结果](http://jsfiddle.net/ldaniell14260/4FMGG/)。如果您使用此代码，请确保包含以下内容：`<script src="http://jqueryrotate.googlecode.com/files/jQueryRotate.2.2.js"></script>`否则旋转将不起作用。所有的旋转和淡化都是通过 jQuery 完成的，以获得更好的兼容性。

# java - Java将负二进制转换回整数

> ID：14012013
> 
> 赞同：1
> 
> 时间：2012-12-23T15:08:17.833
> 
> 标签：java, binary, decimal, negative-number

我正在尝试将基数 10 转换为基数 2 并返回基数 10。它仅适用于正 argument_decimal

```
argument_binary = Integer.toBinaryString(argument_decimal);
back_converted_argument_decimal = Integer.valueOf(argument_binary, 2); 
```

对于argument_decimal beeing负数，我得到“java.lang.NumberFormatException：对于输入字符串：”11111111111111111111111111111111“”

编辑：这是我所做的：

```
latitude_binary = Integer.toBinaryString((int)(latitude_decimal * 1000000));   
back_converted_latitude_decimal =  Long.parseLong(latitude_binary, 2) / 1000000.0; 
```

这给了我不好的结果，比如 -1.1 来回转换为 4293.867296

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T15:21:34.130

尝试走很长的路：

```
String binary = Integer.toBinaryString(-1);
long l = Long.parseLong(binary, 2);
int i = (int) l; 
```

经测试，正常工作。

为什么这样做是因为 -1 在系统内存中表示为 32 位 1 的序列。使用 toBinaryString 方法时，它使用该精确表示创建一个字符串。但是，1 的 32 位实际上等于 2^32 - 1。这对于 int（4 字节）来说太大了，因为 int 来自 [-2^31, 2^31-1]。这是因为最左边的位代表符号。因此，要修复该溢出，首先将 1 和 0 字符的序列解释为 Long。long 会做，因为 long 的最大值是 2^63-1。然后将long转换为int。这是通过简单地采用低 32 位来完成的。

* * *

您的代码中的错误是您没有将 Long.parseLong 转换为 int。所以这应该工作：

```
lat_bin = Integer.toBinaryString((int)(lat_dec * 1000000));   
lat_dec_conv =  ((int) Long.parseLong(lat_bin, 2)) / 1000000.0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-18T11:32:41.677

```
 public static void convertStringToDecimal(String binary) {
    int decimal = 0;

    int power = 0;

    if (binary.charAt(0) == '1' && binary.length() == 32) {

        StringBuilder builder = new StringBuilder();

        for (int i = 0; i < binary.length(); i++) {

            builder.append((binary.charAt(i) == '1' ? '0' : '1'));

        }

        while (binary.length() > 0) {

            int temp = Integer
                    .parseInt(builder.charAt((binary.length()) - 1)+"");
            decimal += temp * Math.pow(2, power++);
            binary = binary.substring(0, binary.length() - 1);

        }

        System.out.println((decimal + 1) * (-1));

    } else {

        while (binary.length() > 0) {
            int temp = Integer
                    .parseInt(binary.charAt((binary.length()) - 1) + "");
            decimal += temp * Math.pow(2, power++);
            binary = binary.substring(0, binary.length() - 1);
        }

        System.out.println(decimal);

    }
} 
```

# jquery - 选择器和元素的区别

> ID：14012014
> 
> 赞同：0
> 
> 时间：2012-12-23T15:08:28.160
> 
> 标签：jquery

下面的代码有区别吗

```
 $("li") 
```

和

```
 $("<li>") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:10:45.733

第一个将`LI`在页面中查找所有内容，第二个创建一个新的 LI 元素，然后可以将其添加到页面中

作为参考，请查看`jQuery()`方法文档。有两个主要部分涵盖了这两种情况

[http://api.jquery.com/jQuery/](http://api.jquery.com/jQuery/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T15:10:50.873

第一个选择 DOM 中的所有 li 元素，第二个创建一个分离的新 li 元素而不将其添加到 DOM。

问候

# java - Android Socket 编程，持续的服务器-客户端通信（在 Button-hit 上）

> ID：14012015
> 
> 赞同：1
> 
> 时间：2012-12-23T15:08:30.810
> 
> 标签：java, android, swing, sockets

因此，每当 android 应用程序在特殊活动中连接到我的服务器时（工作正常），我就有一个 Android 应用程序（客户端）和一个 Java 程序（服务器），具有一次性套接字通信。

因为我的服务器嵌入在一个更大的程序中（使用 Swing 组件，服务器从中获取信息），所以我在这里有这个（简化的）代码：

```
//somewhere in my Swing-Application
Server myServer = new Server();
myServer.start();
//...

public class Server extends Thread {
@Override
public void run() {
    try {
        ServerSocket serverSocket = new ServerSocket(8090);
        try {
            while (true) {
                System.out.println("Server is waiting for connections...");
                socket = serverSocket.accept();
                startHandler(socket);
            }
        } finally {
            serverSocket.close();
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
}

private void startHandler(final Socket socket) throws IOException {
    System.out.println("Client connected to Server");
    Thread thread = new Thread() {
           @Override
        public void run() {
            try {                       
                writer = new OutputStreamWriter(socket.getOutputStream(), "UTF-8");

    //doing something usefull, i am sending a JSON-String, which i´ll parse in my app.

                writer.write(someStringContainingJSONString);
                writer.flush();
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
                closeSocket();
            }
        }
        private void closeSocket() {
            try {
                socket.close();
            } catch (IOException e) {
            }
        }
    };
    thread.start();
} 
```

在我的 Android 应用程序中，我有：

```
public void onCreate(Bundle savedInstanceState) {
    viewJSON = new Runnable() {
        @Override
        public void run() {
            getJSON();
        }
    };
    Thread thread = new Thread(null, viewJSON, "MagentoBackground");
    thread.start();
    myProgressDialog = ProgressDialog.show(myActivity.this, "Please wait...", "Retrieving data ...", true);
}

private void getJSON() {
    try {
            socket = new Socket(serverIPAddress, SERVER_PORT);
            BufferedReader reader = new BufferedReader(new InputStreamReader(socket.getInputStream(), "UTF-8"));
            String help = reader.readLine();
            // parse this String according to JSON, is working fine!
            }
// catch and so on... 
```

现在，每当我从 Swing 应用程序中点击“发送数据”按钮时，我希望该应用程序接收数据，以获取最新数据。

另一方面，当我在我的 Android 应用程序中进行更改时，我希望服务器接收数据（也是 JSON 字符串）。当我点击特定按钮时，也应该发送字符串。

我怎样才能做到这一点？问题是线程问题（否则我的摇摆应用程序将无法工作）与网络相结合。如果我不关闭套接字，我将无法正常继续我的程序（或者至少，我的代码现在看起来如此）你能帮我吗？非常感谢您的帮助和想法。最好的，安德里亚

# c++ - How to pass a 2d array through pointer in c

> ID：14012020
> 
> 赞同：8
> 
> 时间：2012-12-23T15:08:47.547
> 
> 标签：c++, c, pointers

> **Possible Duplicate:**
> [Passing a pointer representing a 2D array to a function in C++](https://stackoverflow.com/questions/5329107/passing-a-pointer-representing-a-2d-array-to-a-function-in-c)

I am trying to pass my 2-dimensional array to a function through pointer and want to modify the values.

```
#include <stdio.h>

void func(int **ptr);

int main() {
    int array[2][2] = {
        {2, 5}, {3, 6}
    };

    func(array);

    printf("%d", array[0][0]);
    getch();
}

void func(int **ptr) {
    int i, j;
    for (i = 0; i < 2; i++) {
        for (j = 0; j < 2; j++) {
            ptr[i][j] = 8;
        }
    }
} 
```

But the program crashes with this. What did I do wrong?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-23T15:12:43.467

Your array is of type `int[2][2]` ("array of 2 array of 2 int") and its name will decay to a pointer to its first element which would be of type `int(*)[2]` ("pointer to array of 2 int"). So your `func` needs to take an argument of this type:

```
void func(int (*ptr)[2]);
// equivalently:
// void func(int ptr[][2]); 
```

Alternatively, you can take a reference to the array type ("reference to array of 2 array of 2 int"):

```
void func(int (&ptr)[2][2]); 
```

Make sure you change both the declaration and the definition.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T15:14:45.840

It crashes because an array isn't a pointer to pointer, it will try reading array values as if they're pointers, but an array contains just the data without any pointer.
An array is all adjacent in memory, just accept a single pointer and do a cast when calling the function:

```
func((int*)array); 
```

...

```
void func(int *ptr) {
    int i, j;
    for (i = 0; i < 2; i++) {
        for (j = 0; j < 2; j++) {
            ptr[i+j*2]=8;
        }
    }
} 
```

# macports - Osgviewer 牛不查看牛？

> ID：14012021
> 
> 赞同：0
> 
> 时间：2012-12-23T15:09:01.827
> 
> 标签：macports, openscenegraph

我`OpenSceneGraph 3.0.1`使用`MacPorts`.

我试过`osgversion`-> `OpenSceneGraph Library 3.0.1`。我下载了`OpenSceneGraph-Data`.

一切似乎都运行良好，而不是`osgviewer cow.osg`花费数小时而不查看任何内容！

请问我需要帮助吗？有没有办法调试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:22:43.823

确保您已定义`OSG_FILE_PATH`环境变量并且它指向数据目录（带有“cow.osg”的目录）。

然后，您可以设置`OSG_NOTIFY_LEVEL`为`DEBUG_INFO`将扩展信息打印到控制台。如果由于任何原因无法正确加载文件，您将看到从哪里开始进行故障排除。

您也可以尝试运行

```
$ osgviewer --image /path/to/an/image.png 
```

测试插件是否正常工作。

插件被命名为例如`osgdb_jpeg.dylib`，因此您可以查找它们以确保它们已与核心库和程序一起正确构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:41:03.443

尝试将通知级别设置为调试：[提示和技巧](http://www.openscenegraph.org/projects/osg/wiki/Support/TipsAndTricks)

```
$ export OSG_NOTIFY_LEVEL=DEBUG 
```

并运行它，看看它是否说明发生了什么/出了什么问题。

# java - 如何更改方法内的布尔变量的值？

> ID：14012022
> 
> 赞同：0
> 
> 时间：2012-12-23T15:09:09.357
> 
> 标签：java, variables

这可能太愚蠢了。我在 main 方法中有一个布尔变量。通过调用此类或其他类的另一个方法，我希望在 main 方法中修改我的布尔值。我这样做，但更改只发生在被调用的方法（本地）中，而不是调用者（主）。我认为这是因为 java 的传值特性。我什至尝试过布尔类型，但同样的问题！

实际上我会用它来管理并发线程的顺序。主处理器将检查每个线程的布尔值，以查看是否可以继续并计时。在打勾时钟后，main 将使 vars 为假，并等到 vars 再次为真。如果每个子线程的布尔值为 false，则子线程将启动它们的任务。任务完成后，他们会将 vars 设置为 true，以便主处理器能够再次运行。所以我想要一些没有回报的东西。我的意思是当值在方法内部发生变化时，main 可以看到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:13:16.243

```
boolean var = true;
var = methodWhichReturnsTheNewValueOfTheVariable(); 
```

在被调用的方法内部：

```
return newBooleanValue; 
```

或者

```
SomeObjectWithBooleanVariableInside var = new SomeObjectWithBooleanVariableInside(true);
methodWhichModifiesTheObject(var); 
```

在被调用的方法内部：

```
var.setBooleanValue(newBooleanValue); 
```

布尔值就是这样一个对象：它包含一个布尔值。但它被有意设计为不可变的：它的包装布尔值不能更改。因此，您需要创建自己的功能对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T17:21:16.233

当您认为您更改了原始布尔值的值时，它仅更改了该方法范围内的值。与布尔值相同，因为它是不可变的。更改其值实际上是在该方法的范围内为其分配了一个新值。您应该从该方法返回新值，然后分配它，或者您也可以使用所有人都知道的全局布尔值并更改该值。

（顺便说一句，如果您正在处理并发，请查看 AtomicBoolean）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T15:15:46.750

是的 - 您不能在 Java 中的方法内修改按值传递的参数（例如在 C# 中您将编写`method(ref param)`）。

为什么不能使用方法返回这个值：

```
public boolean method(params...) {...} 
```

或者您可以将参数传递给调用者：

```
public void method(params..., CallerClass caller) { 
    //do something
    caller.setValue(Boolean.FALSE);
} 
```

或者，您可以使此变量在调用者和调用方法范围内可访问 - 静态变量等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T15:18:03.003

原始类型是按值传递的，因此您不能更改作为方法参数的变量。

这也使理解程序的工作方式变得更容易，因为这种行为在这样的调用中更加明显：

```
boolean prime = false;
prime = isPrime(number); 
```

您可以看到该`found`变量已重新分配；虽然您可以假设这`number`将保持不变。这有助于代码的可读性。

有一个肮脏的把戏，有时可以使用。由于数组是对象，因此您可以使用数组来包装原始类型：

```
boolean[] prime = { false };
isPrime(number, result);

public void isPrime(int number, boolean[] result) {
    result[0] = true;
} 
```

对象引用也是按值传递的，但这里我们更改的是数组的内容，而不是数组引用。

这行得通。但是，我不建议这样设计您的代码。有时，知道这个技巧在单元测试中可能很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-23T15:14:55.437

执行此操作的通常方法如下：

```
public static void main(String[] args) {
    boolean myVar = true;

    ...
    ...

    myVar = myFunction();
}

public static boolean myFunction() {
    // the method should do it's calculation and return the value:
    return false;
} 
```

# java - 带有 gui 的 Java 刽子手游戏，增加/减少数字的问题

> ID：14012023
> 
> 赞同：1
> 
> 时间：2012-12-23T15:09:12.837
> 
> 标签：java, swing, user-interface, jframe, actionlistener

代码的以下部分不起作用，因为每个单词的赢/输计数不断增加超过 1，有时我会得到一个字符串长度的空指针异常。此外，虽然玩家应该得到 7 次尝试（int no），但有时他会得到更多，有时会更少。字符串取自文本文件“Hangeng.txt”。整个游戏在按键监听器内的键盘按键监听器内。欢迎任何有关如何安排游戏布局以避免错误的提示，因为我才刚刚开始使用 swing 和 gui 的东西。

```
 public class test{
static int won = 0;
static int lost = 0;
static String key = "";
static String word = null;
static int no = 0;
static StringBuffer toguess;

      public static void main(String[] args) throws IOException{

 JFrame frame = new JFrame();
  frame.setLayout(new GridLayout(3,1));
      JPanel panel1 = new JPanel();
     JPanel panel2 = new JPanel();
      JPanel panel3 = new JPanel();
         JButton button = new JButton();
           JLabel label = new JLabel();
           JLabel label2 = new JLabel();
            panel1.add(label);
              panel2.add(button);
                  panel3.add(label2);
                    frame.setSize(800,600);
                   frame.add(panel1);
                          frame.add(panel2);
                      frame.add(panel3);
                     frame.setVisible(true);

 //the button that starts the game or gets a new word
 button.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            frame.requestFocus();

                no = 0;

                label2.setText("won " + won + ", lost " + lost);
                button.setText("Next");

                                    //get random word from file
                BufferedReader reader = null;
                try {
                    reader = new BufferedReader(new FileReader(
                            "hangeng.txt"));
                } catch (FileNotFoundException e1) {
                    e1.printStackTrace();
                }
                int lineno = (int) (Math.random() * 100);
                for (int i = 0; i < lineno; i++) {
                    try {
                        reader.readLine();
                    } catch (IOException e1) {
                        e1.printStackTrace();
                    }
                }

                try {
                    word = reader.readLine().replace(" ", "");
                } catch (IOException e1) {
                    e1.printStackTrace();
                }

                String missing = "";
                for (int u = 0; u < (word.length() - 2); u++) {
                    missing = missing + "*";
                }
                final String guess = word.charAt(0) + missing
                        + word.charAt((word.length() - 1));
                toguess = new StringBuffer(guess);
                label.setText(toguess.toString());
                final ArrayList<String> tried = new ArrayList<String>();

            //keylistener that listens to key clicks by the user

         frame.addKeyListener(new KeyListener() {
                    public void keyPressed(KeyEvent arg0) {
                    }

                    public void keyReleased(KeyEvent arg0) {
                    }

                    public void keyTyped(KeyEvent arg0) {
                        key = "" + arg0.getKeyChar();
                        String guessing = null;
                        boolean k = false;

                        if ((no < 6)) {
                            guessing = key;
                            System.out.println(guessing);
                            if (!(tried.contains(guessing))) {
                                tried.add(guessing);
                                for (int length = 1; length < (guess
                                        .length() - 1); length++) {
                                    if (guessing.equals(String.valueOf(word.charAt(length)))) {
                                        toguess.replace(length,
                                                (length + 1),
                                                String.valueOf(word.charAt(length)));
                                        k = true;
                                    }
                                }
                                if (k == true) {
                                    label.setText(toguess.toString());
                                } else {
                                    no = no + 1;
                                }
                                k = false;
                            }
                            label.setText(toguess.toString());
                            if (toguess.toString().equals(word)) {
                                label.setText("Correct! The word was "  + word);
                                no = 6;
                                won = won + 1;
                            }
                        }
                        else if ((no == 6)
                                && (!(toguess.toString().equals(word)))) {
                            label.setText("Sorry, but the word was " + word);

                            lost = lost + 1;
                        }
                    }
                });
            }

    }); 

          }
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T16:36:51.413

+1 对所有评论....

添加到他们：

*   不要`KeyListener`使用 a`KeyAdapter`但是，因为您使用的是 Swing 而不是 AWT，您应该使用s 来表示 Swing ，例如`KeyBinding`参见[此处。](https://stackoverflow.com/questions/14004263/java-keylistener-not-responding-after-switching-jpanels/14005232#14005232)

*   不要忘记在`Event Dispatch Thread`via`SwingUtiltities.invokeLater(..)`块上创建和操作 Swing 组件，请参阅[此处](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)了解更多信息。

*   检查他们应该以大写字母开头的类命名方案，即`test`应该是`Test`并且之后的每个新单词都应该大写。

*   不要调用`setSize`而是`JFrame`使用适当的`LayoutManager`和/或覆盖并返回适合其内容的大小并`getPreferredSize()`在添加所有组件后调用实例。`JPanel``pack()``JFrame`

*   此外[，SSCCE](http://sscce.org/)应该可以通过复制和粘贴进行编译，这不是.... 即需要将变量更改为最终变量，我没有 Haneng.txt 的样本，因此无法测试

*   最后使用@Override 注释来确保您覆盖了正确的方法，即

    ```
    @Override
    public void actionPerformed(ActionEvent e) {

    } 
    ```

# jquery - 如何使用jQuery禁用除文本框以外的退格键

> ID：14012024
> 
> 赞同：-4
> 
> 时间：2012-12-23T15:09:13.163
> 
> 标签：jquery, html

我想禁用 BACKSPACE 按钮，除非它在 ​​TEXT 字段中。

我正在使用以下代码，但它阻止退格功能包括文本字段.. BACKSPACE 应该仅适用于 TEXT 字段..

请帮忙解决这个...

```
$(document).on("keydown", processKeyEvents);
$(document).on("keypress", processKeyEvents);

function processKeyEvents(event) {
    // Backspace
    if (event.keyCode == 9) {
        // myTextBox is id of the valid textbox
        if ($("*:focus") != $("#myTextBox")) {
            event.preventDefault();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:19:08.027

检查 keydown 事件，如果`backspace`textarea 没有聚焦，是否按下 preventdefault。 [http://jsfiddle.net/Q9Meh/2/](http://jsfiddle.net/Q9Meh/2/)

```
$('body').keydown(function(event) {
    if (event.which == 8 && !$('textarea:focus').length) {
     event.preventDefault();
   }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T15:16:42.497

这个怎么样？`myTextBox`是退格应该在其中工作的文本框的 id。

```
$(document).on("keydown", processKeyEvents);
$(document).on("keypress", processKeyEvents);

function processKeyEvents(event) {
    // Backspace
    if (event.keyCode == 8) {
        // myTextBox is id of the valid textbox
        if ($("*:focus") != $("#myTextBox")) {
            event.preventDefault();
        }
    }
} 
```

# c# - 设置 C# WPF 项目中托管的 WinForms 控件的 Parent 属性的正确方法？

> ID：14012026
> 
> 赞同：2
> 
> 时间：2012-12-23T15:09:22.820
> 
> 标签：c#, wpf, winforms

我有一个 C# WPF 应用程序，它在 WindowsFormsHost 容器中托管了一个 WinForms 控件。当我运行我的应用程序时，WinForms 控件在其 OnPaint() 事件处理程序中什么也不做，因为 ParentForm 属性为 NULL。在纯 WinForms 项目中，此属性不是 NULL，而是设置为绘制控件的 Form。

在我的 WPF 项目中，由于我不知道如何让 WinForms 控件出现在设计器中，因此我通过项目 XAML 文件添加了该控件。该控件在项目运行时出现，但正如我所说，它永远不会重新绘制，因为它的 ParentForm 属性为 NULL。

在主窗体的 Window_Loaded() 事件中，我尝试将 WinForms 控件的 Parent 属性设置为 XAML 文件中的顶级 Window。我没有使用 ParentForm 属性，因为它是只读的。但是编译器给了我这个错误：

无法将类型“RawDataTestApp.Window1”隐式转换为“System.Windows.Forms.Control”

我假设我收到此错误是因为 Window1 不是控件？无论如何，我不知道如何正确地将 WinForms 控件附加到我的 WPF 项目中的主窗体。我应该怎么做？我在下面包含了项目 XAML 文件的相关部分。它来自一个开源 C# 项目。我在由 WindowsFormsHost 容器托管的项目中添加了一个 WinForms 图形控件：

```
// Here's the source line that gets the error.  pdeAffectiv is the WinForms graphcontrol that is hosted in a WindowsFormsHost container:
    pdeAffectiv.Parent = MainForm;

// -------------------------- WPF Project XAML file ----------------------------------
<!-- Copyright © 2010 James Galasyn -->
<Window x:Name="MainForm" x:Class="RawDataTestApp.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="EmotivEngine Realtime Client" Height="454" Width="1042" Background="#FF000033" Foreground="#FF33FFFF" xmlns:emoclient="clr-namespace:EmoEngineClientLibrary;assembly=EmoEngineClientLibrary"
    xmlns:eecontrol="clr-namespace:EmoEngineControlLibrary;assembly=EmoEngineControlLibrary"
    xmlns:local="clr-namespace:RawDataTestApp" Loaded="Window_Loaded" Closing="Window_Closing"
    xmlns:wf="clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms"
    xmlns:graphlib="clr-namespace:GraphLib;assembly=GraphLib">

    <Grid>
        <!--- CONTENTS SNIPPED FOR BREVITY -->
        <WindowsFormsHost x:Name="wfhAffectiv" HorizontalAlignment="Left" Height="148" Margin="530,75.493,0,0" VerticalAlignment="Top" Width="471" >
            <graphlib:PlotterDisplayEx x:Name="pdeAffectiv" >
           </graphlib:PlotterDisplayEx>
        </WindowsFormsHost>
    </Grid>
</Window> 
```

# ruby-on-rails-3 - Rails：如何表示用户关注用户关系？

> ID：14012028
> 
> 赞同：1
> 
> 时间：2012-12-23T15:09:43.240
> 
> 标签：ruby-on-rails-3, activerecord, model-associations

我有一堂课`User`，我想实现**跟随关系**（如在 twitter 中）。在我的模型中，一个用户可以关注一组其他用户，也可以关注一组用户。

在数据库中，有两个表：`User`和`Follow`。

`Follow`有`src_id`和`dst_id`，这两个表的外键`User`。下表中的条目表示 id=src_id 的用户正在关注 id=dst_id 的用户。

我很难在实际模型中表达这一点......谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T15:16:22.373

这应该是您正在寻找的内容：[http ://ruby.railstutorial.org/book/ruby-on-rails-tutorial#cha-following_users](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#cha-following_users)

对于更广泛的友谊模型，用户可以请求成为朋友，显示待处理的朋友等。你可以试试这个 gem [https://github.com/raw1z/amistad](https://github.com/raw1z/amistad)，这是一个关于如何让它工作的非常好的教程：[http ://keighl.com/post/amistad-friendships-controller](http://keighl.com/post/amistad-friendships-controller)

希望有帮助！

# html - 如何垂直对齐弹性项目内的内容？

> ID：14012030
> 
> 赞同：3
> 
> 时间：2012-12-23T15:09:53.933
> 
> 标签：html, css, flexbox

我有一个包含两个子弹性项目的弹性框标题。这些弹性项目反过来有自己的孩子。

有没有办法覆盖弹性项目的垂直对齐方式，以便它们的子项在底部对齐？

```
div.flexbox {
  display: flex;
  align-items: stretch; /* cross axis */
  justify-content: space-between; /* main axis */
  flex-flow: row wrap;
  border-bottom: 1px solid #ddd;
  min-height: 100px;
}

.item-1, .item-2 {
  padding: 10px;
}

.item-1 {
  width: 30%;
  position: relative;
}

.item-2 {
  width: 60%;
}
```

```
<div class="flexbox">
  <div class="item-1">
    <span>I want to be aligned at the bottom of item-1</span>
  </div>

  <div class="item-2">
    <span>I want to be aligned at the bottom of item-2</span>
  </div>
</div>
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T16:35:54.280

您可以使用 webkit-align-items 到 m

```
-webkit-align-items:flex-end; 
```

[http://jsfiddle.net/5N2km/1/](http://jsfiddle.net/5N2km/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-22T19:11:46.013

您可以`align-items`将容器上的值从切换`stretch`到`flex-end`。也许这就是你要找的。

```
div.flexbox {
  display: flex;
  align-items: flex-end;  /* adjusted */
  justify-content: space-between;
  flex-flow: row wrap;
  border: 1px solid black;
  min-height: 100px;
  padding: 5px;
}

.item-1, .item-2 {
  padding: 10px;
  border: 1px dashed red;
}

.item-1 {
  width: 30%;
  position: relative;
}

.item-2 {
  width: 60%;
}
```

```
<div class="flexbox">
  <div class="item-1">
    <span>I want to be aligned at the bottom of item-1</span>
  </div>

  <div class="item-2">
    <span>I want to be aligned at the bottom of item-2</span>
  </div>
</div>
```

但是由于您的实际问题是：

> 有没有办法覆盖弹性项目的垂直对齐方式*，使其子项在底部对齐*？

...那么您应该将 flex 项放入嵌套的 flex 容器中，并将内容与 flex 属性垂直对齐：

```
div.flexbox {
  display: flex;
  align-items: stretch;
  justify-content: space-between;
  flex-flow: row wrap;
  border: 1px solid black;
  min-height: 100px;
  padding: 5px;
}

.item-1, .item-2 {
  display: flex;          /* new */
  align-items: flex-end;  /* new */
  padding: 10px;
  border: 1px dashed red;
}

.item-1 {
  width: 30%;
  position: relative;
}

.item-2 {
  width: 60%;
}
```

```
<div class="flexbox">
  <div class="item-1">
    <span>I want to be aligned at the bottom of item-1</span>
  </div>

  <div class="item-2">
    <span>I want to be aligned at the bottom of item-2</span>
  </div>
</div>
```

# android - android.content.Intent.ACTION_SENDTO 默认电子邮件选择器

> ID：14012032
> 
> 赞同：0
> 
> 时间：2012-12-23T15:09:54.730
> 
> 标签：android, email, sendto

如何在没有选择器的情况下在 android 应用程序中发送电子邮件？我希望该用户设置一次默认电子邮件客户端，并且该应用程序只使用此电子邮件客户端，直到用户更改您的设置！

这个想法是在我的应用程序中按下按钮发送，味精将在没有选择器的情况下发送它

tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T23:18:57.593

如果您在发送电子邮件时*不*使用，用户可以自行执行此操作，无需您参与。`createChooser()`他们将能够指定一个默认的电子邮件客户端以用于将来类似类型的请求（例如，在 Android 4.0+ 上单击“始终”而不是“仅一次”）。

`createChooser()`专门用于默认选择可能不正确的情况。这通常`ACTION_SENDTO`比`ACTION_SEND`你看到`createChooser()`使用更多的问题更少。

# php - 什么是正确的mysql语法

> ID：14012033
> 
> 赞同：-1
> 
> 时间：2012-12-23T15:10:02.997
> 
> 标签：php, mysql

请帮助我使用这种语法。它是否正确？

```
$query = mysql_query("SELECT * FROM axispl WHERE companyname LIKE $searchterm% LIMIT 11"); 
```

在网上的几个例子中，我看到`符号被用来包围axispl或公司名。在少数情况下，他们不存在。有什么不同？

我的数据库有 2 列。首先有公司名称。其次是他们所属的类别。当公司名称与搜索词匹配时，我基本上希望查询选择其中的 11 对。

我应该提到 SELECT * 还是应该提到 SELECT companyname, axiscategory ？（这些是两列的名称）。

如果上面的语法不正确，我应该改变什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:12:33.123

您需要用单引号引用搜索词。

```
$query = mysql_query("SELECT * FROM axispl WHERE companyname LIKE '".mysql_real_escape_string($searchterm)."%' LIMIT 11"); 
```

是否使用`SELECT *`或指定列并不重要 - 后者通常会快*一点*，但如果您需要所有列通常并不重要。

关于您的引用问题：

*   始终转义传递给查询的字符串。
*   使用单引号来引用查询中使用的字符串
*   反引号用于引用数据库/表/列名称，并且仅在它们与保留关键字冲突时才需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T15:12:51.250

反引号用于确保它们包含的内容被视为数据库、表或列名，无论上下文需要什么。除了使它更易于阅读之外，它还允许您使用任何列名，包括保留字，如`count`, `timestamp`, `from`, 数字列名`25`,`50`以及`100`所有类型的疯狂符号（如果您真的想要的话）。

但是，除此之外，您的搜索词应该用引号引起来，因为它是一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T15:13:13.910

> 有什么不同？

没有区别。

反引号符号与作为标识符名称无效的标识符一起使用。例如，如果您有一个名为保留字的列，在这种情况下，您必须使用反引号符号来转义它们。

在您的情况下，可以在列中使用 ` 符号，因为它们是有效的标识符名称。

> 我应该提到 SELECT * 还是应该提到 SELECT companyname, axiscategory ？

建议不要`SELECT *`显式使用和命名列的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T15:16:33.563

首先，告诉您要返回哪些列总是一个好主意，这样您就可以确保只返回所需的实际数据。对于这么小的表，它可能无关紧要，但是如果您有 50 列和 100 000 行并且您只想要前两列的列表怎么办？

引用列名和表名是一种很好的做法，但当您碰巧在名称中使用[保留字](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)（如 SELECT、FROM、ADD、DELETE 等）时，它并不是一直都需要的。

同样在您的查询中，您需要对 LIKE 的查询进行单引号，因为它想要的是一个字符串。

```
$query = mysql_query("SELECT `companyname`, `axiscategory` FROM `axispl` WHERE `companyname` LIKE '$searchterm%' LIMIT 11"); 
```

# objective-c - 使用 UIPinchGestureRecognizer 缩放整个屏幕

> ID：14012039
> 
> 赞同：1
> 
> 时间：2012-12-23T15:10:59.860
> 
> 标签：objective-c, ios, uiview, zooming, uipinchgesturerecognizer

我试图向 UITextView 添加一个捏合手势放大缩小功能，然后我决定添加一个缩放整个屏幕的捏合手势，覆盖整个视图层次结构是一个更好、更通用的解决方案。但我对如何做到这一点感到困惑：我应该更改所有 UIView 对象的帧大小还是应该以某种方式缩放它们？最正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T15:25:17.450

将所有视图放在 a 中`UIScrollView`，然后在此委托方法中返回视图`UIScrollView`

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView 
```

# html - 无法导入脚本 Node.js 服务器

> ID：14012046
> 
> 赞同：4
> 
> 时间：2012-12-23T15:12:27.200
> 
> 标签：html, node.js, scripting, socket.io

我正在创建一个带有节点的 http 服务器，它读取一个简单的 html 文件。这个 html 文件导入了一些位于我的计算机中的脚本。节点无法加载此脚本。为什么？

```
 var http = require('http');
var io = require('socket.io').listen(2210);
var fs = require('fs');

http.createServer(function(req, res){
    fs.readFile("./index.html", function(err, data){
        if (err){
            res.writeHead(500);
            res.end("Error loading index.html");
        }
            res.writeHead(200, {"Content-Type":"text/html"});
            res.end(data, 'utf-8');
    });
}).listen(2211);

io.sockets.on('connection', function(socket){

}); 
```

这是html文件：

```
<!DOCTYPE html> 
<html> 
    <head> 
    <title>ASGEAWER</title> 
  <meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="jquery-mobile/jquery.mobile.css" />
    <link rel="stylesheet" href="jquery.mobile.splitview.css" />
  <link rel="stylesheet"  href="jquery.mobile.grids.collapsible.css" />
  <script type="text/javascript" src="jquery-1.7.1.js"></script>
  <script type="text/javascript" src="jquery.mobile.splitview.js"></script>
  <script type="text/javascript" src="jquery.mobile.js"></script>
  <script type="text/javascript" src="servernode.js"></script>
  <script type="text/javascript" src="interaction.js"></script>
  <script type="text/javascript">
    $(document).on("ready",inici);
  </script>
</head> 

  <body> 

    <div data-role="panel" data-id="menu" data-hash="crumbs" data-context="a#default">

      <!-- Start of first page -->
      <div data-role="page" id="main" data-hash="false">

        <div data-role="header" data-position="fixed">
            <h1>Categoria</h1>
        </div><!-- /header -->

        <div data-role="content">
          <ul data-role="listview">

          </ul>
        </div>

      </div><!-- /page -->

    </div><!-- panel menu -->

    <div data-role="panel" data-id="main">
      <!-- Start of 6th page -->
      <div data-role="page" id="aboutsv">

        <div data-role="header" data-theme="b">
          <h1>Productos</h1>
        </div><!-- /header -->

        <div data-role="content"> 
        </div><!-- /content -->
      </div><!-- /page -->

    </div><!-- panel main -->

  </body>
</html> 
```

chrome 给了我这些错误：

```
Uncaught SyntaxError: Unexpected token < jquery-1.7.1.js:1
Uncaught SyntaxError: Unexpected token < jquery.mobile.splitview.js:1
Uncaught SyntaxError: Unexpected token < jquery.mobile.js:1
Uncaught SyntaxError: Unexpected token < servernode.js:1
Uncaught SyntaxError: Unexpected token < interaction.js:1
Uncaught ReferenceError: $ is not defined 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T15:45:11.653

> 此 html 文件导入位于我的计算机中的一些脚本

当浏览器发现一个`<script>`带有 src 属性的标签时，它所做的就是向请求该文件的服务器（在本例中为您的节点 http 服务器）发出另一个请求。

在您的情况下，您的服务器使用 index.html 内容响应每个请求。

因此，为了导入该文件，您必须更改 http.createServer 回调，以使用该文件的内容响应每个静态文件请求，而不是始终使用 index.html 内容响应

它应该是这样的：

首先，创建一个处理内容类型的函数

```
function contentType(ext) {
    var ct;

    switch (ext) {
    case '.html':
        ct = 'text/html';
        break;
    case '.css':
        ct = 'text/css';
        break;
    case '.js':
        ct = 'text/javascript';
        break;
    default:
        ct = 'text/plain';
        break;
    }

    return {'Content-Type': ct};
} 
```

然后，重新定义您的服务器代码：

```
var http = require('http'),
    fs = require('fs'),
    path = require('path');

var HTTP_OK = 200,
    HTTP_ERR_UNKNOWN = 500,
    HTTP_ERR_NOT_FOUND = 404;

http.createServer(function (req, res) {
    var filepath = '.' + (req.url == '/' ? index : req.url),
        fileext = path.extname(filepath); 

    path.exists(filepath, function (f) {
        if (f) {
            fs.readFile(filepath, function (err, content) {
                if (err) {
                    res.writeHead(HTTP_ERR_UNKNOWN);
                    res.end();
                } else {
                    res.writeHead(HTTP_OK, contentType(fileext));
                    res.end(content);
                }
            });
        } else {
            res.writeHead(HTTP_ERR_NOT_FOUND);
            res.end();
        }
    });
}); 
```

这是一个简单的自制静态服务器，**但如果您为此使用库更好**：

*   **简单的静态服务器：** [https ://github.com/jesusabdullah/node-ecstatic](https://github.com/jesusabdullah/node-ecstatic)
*   一个完整的框架：[http ://expressjs.com/](http://expressjs.com/)

# qml - 弹出除首页 BlackBerry 10 Cascades 以外的所有页面？

> ID：14012050
> 
> 赞同：2
> 
> 时间：2012-12-23T15:12:41.733
> 
> 标签：qml, blackberry-10, blackberry-cascades

如何在BlackBerry 10 qml中弹出除首页之外的所有推送页面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T18:07:13.993

这可能取决于基础对象。例如，当使用 NavigationPane 时，我将使用 navigatTo(Page *targetPage) 方法并将第一页指定为目标。

# php - Laravel 插入嵌套的 Eloquent ORM 模型

> ID：14012061
> 
> 赞同：3
> 
> 时间：2012-12-23T15:13:56.963
> 
> 标签：php, sql, laravel, eloquent

假设我有三个具有如下关系的表：

1.  *产品*

    ```
    has many options 
    ```

2.  *选项*

    ```
    can belong to many product
    has option_values 
    ```

3.  *选项值*

    ```
    belongs to many option 
    ```

使用 Laravel 我可以像这样更新*选项*

```
product->options()->insert($stuff); 
```

但是我也想插入*option_value*。

我试过了

```
product->options()->values()->insert($otherStuff); 
```

但这不起作用。如何用 Eloquent ORM 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:50:37.193

您不能以这种方式访问​​子关系，您必须实际拥有模型结果并在其上调用方法，或者使用预加载但预加载对插入没有帮助。

您必须循环选项模型并插入它们，但这会导致插入查询过多。更好的方法可能是只获取相关的 id 并在单个流畅的查询中运行插入，而不是在许多 Eloquent 中运行。

```
$option_ids = $product->options()->lists('id');
DB::table(OptionValue::$table)->insert(array_merge($data, $option_ids)); 
```

# java - 在调用方法之前使用“this”。

> ID：14012063
> 
> 赞同：0
> 
> 时间：2012-12-23T15:13:58.153
> 
> 标签：java, methods

所以我有一个简单的编程问题，我似乎找不到答案。在浏览 Google 的一些代码时，我注意到他们将“this”放在了代码中许多方法的前面。这样做的目的是什么？它比不使用它有什么好处吗？

一个例子：

```
this.doMethod(); 
```

相比：

```
doMethod(); 
```

我确信这是一个简单的答案，我只是喜欢能够理解我阅读的所有代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T15:15:43.780

不，这对方法调用没有任何影响。使用您认为更具可读性的任何一个。

请注意，在消除实例变量和参数（或其他局部变量）之间的歧义时*确实*会有所不同。例如：

```
public void setFoo(int foo) {
    this.foo = foo;
} 
```

那是从参数中为*实例变量*分配一个值-仅使用`foo = foo;`将是无操作的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T15:15:24.093

它们之间根本没有区别。您总是在某些参考上调用方法。如果您不使用任何引用，`this`则引用是隐式的。

所以，`doMethod()`与 相同`this.doMethod()`。通过使用`this`，您只需使其明确。

需要`this`显式使用引用的一个地方是您将方法/构造函数参数的值分配给实例变量的地方，并且两者具有相同的名称，如下例所示：

```
public Demo(int var) {  // Constructor
    this.var = var;
} 
```

所以，在上面的例子中，`this.var`指的是实例变量，而不同于`var`指的是构造函数参数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-23T15:16:04.987

`this`表示当前类的对象实例。**在编程实践中，大多数时候，它是用来打破歧义的。**例如，在示例中，有一个名为的类变量和一个名为的`name`方法参数`named`，因此这用于区分两者。

```
 public void setName(String name){
         this.name= name;
     } 
```

如果您没有任何歧义，那么它不会产生太大的差异`setName("John");`，即`this.setName("John");`是同一件事。但是仍然有一个区别。**`this.setName("John");`遵循与您在对象上调用方法相同的模式（例如`emp.setName("A");`）；**这里`this`代表理智的类对象。

# php - 在 y Joomla 文章中插入代码片段的困难

> ID：14012068
> 
> 赞同：0
> 
> 时间：2012-12-23T15:14:54.597
> 
> 标签：php, joomla, content-management-system, joomla2.5, codehighlighter

我正在使用 Joomla 2.5.8 和 JCE 编辑器。

我正在尝试使用 Code Highlight gesci 插件在我的文章中插入代码片段...

我做这样的事情：

```
{code}
INSTRUCTION 1;
INSTRUCTION 2;
INSTRUCTION 3; 
{/code} 
```

问题是这样的：最终的结果是它把我的代码放在 Code Highlight gesci 插件中，但是它们都在同一行，就像这样：

**指令 1；指令 2；指令 3；**

我怎么解决这个问题？

感谢您的关注

安德烈亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:32:05.197

```
<pre xml:php> - will highlight php formatted code
<pre xml:css lines="true"> - will highlight css formatted code, with line numbers. 
```

还有一件事。由于`<pre>`标签按原样显示内容，您可能希望在标签之后和`<pre>`标签之前跳过新行`</pre>`，如下所示：

```
<pre xml:php lines="true"><?php
// Here are a few lines of Joomla code
defined('_JEXEC') or die;
function getBaseURI() {
  return JURI::base();
}
?></pre> 
```

[阅读更多](http://forums.modx.com/index.php/topic,3651.0.html)

[格士博士](http://qbnz.com/highlighter/geshi-doc.html)

# jsf - 如何动态渲染 JSF 后端的值

> ID：14012074
> 
> 赞同：0
> 
> 时间：2012-12-23T15:15:10.517
> 
> 标签：jsf, jsf-2

我能够呈现动态但不知道如何在后端获取那些动态创建的值。

**测试.xhtml**

```
<h:form>
        Insert Your Desire Number : <h:inputText value="#{bean.number}">
        <f:ajax listener="#{bean.submitAjax}" execute="@form" render="@form" event="keyup" />
        </h:inputText>
        <br></br>
        <h:outputText value="#{bean.text}" />
        <h:dataTable value="#{bean.items}" var="item">
            <h:column>
                <h:inputText value="#{item.value}" />
            </h:column>
        </h:dataTable>
        <h:commandButton value="Submit" action="#{item.submit}" />

    </h:form> 
```

如果我渲染 3 个输入框，并且当我提交按钮时，我只得到最后一个值，有人可以指导我怎么做

**Bean.java**

```
@ManagedBean(name="bean")
@SessionScoped
public class Bean {
private int number;
private List<Item> items;
private Item item;
//getter and setter are omitted
public void submitAjax(AjaxBehaviorEvent event)
{
    items = new ArrayList<Item>();
    for (int i = 0; i < number; i++) {
        items.add(new Item());
    }
}
} 
```

**项目.java**

```
private String value;
//getter and setter are omitted
public void submit() {
        System.out.println("Form Value : "+value); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:16:19.433

你的`submit()`方法放错地方了。您应该将它放在托管 bean 上，而不是实体上。

就这样，

```
<h:commandButton value="Submit" action="#{bean.submit}" /> 
```

和

```
public void submit() {
    for (Item item : items) {
        System.out.println(item.getValue());
    }
} 
```

或更正式地说，

```
@EJB
private ItemService service;

public void submit() {
    service.save(items);
} 
```

# python - 如何在 Python 中编写一个返回函数的函数？

> ID：14012076
> 
> 赞同：1
> 
> 时间：2012-12-23T15:15:16.203
> 
> 标签：python, function

在我课程的一个培训部分中，我收到了以下问题：

编写一个函数，该函数`make_multiplier(factor)`返回一个函数，该函数接受一个参数 x 并且应该返回因子 * x。

例如：

```
f=make_multiplier(10)
f(1)
10
f(2)
20 
```

我完全不知道从哪里开始。我翻阅了所有笔记，找不到任何有用的东西。

有人可以给我一个提示或指出我需要做什么的正确方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T15:17:19.917

这是一个返回函数的函数：

```
def foo():
    def bar():
        return 42

    return bar 
```

你可以这样称呼它：

```
foo()() # 42
# or
baz = foo()
baz() # 42 
```

有你的提示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T15:17:08.987

很简单，只需嵌套你的函数：

```
def make_multiplier(x):
    def multiplier(y):
        return x * y
    return multiplier 
```

`x`嵌套函数会自动从其周围范围内查找未知变量（在这种情况下），使用`x`调用外部函数时的值。这里要记住的是，函数也只是对象，你可以将它们存储在一个变量中，就像你可以使用其他 python 对象一样，并推迟调用它们。

这给出了：

```
>>> def make_multiplier(x):
...     def multiplier(y):
...         return x * y
...     return multiplier
... 
>>> f = make_multiplier(10)
>>> f(1)
10
>>> f(2)
20
>>> g = make_multiplier(5)
>>> g(1)
5
>>> f(3)
30 
```

请注意如何`g`为 赋予不同的值`x`，该值与`x`in的值无关`f`。

您也可以使用 lambda；lambda 只是仅限于一个表达式的匿名函数；到这里就够了：

```
def make_multiplier(x):
    return lambda y: x * y 
```

另一种替代技术是绑定`x`到关键字参数，这意味着您可以根据需要覆盖它：

```
def make_multiplier(x):
    def multiply(y, x=x):
         return x * y
    return multiply 
```

或 lambda 版本：

```
def make_multiplier(x):
    return lambda y, x=x: x * y 
```

然后将一两个参数传递给返回的可调用对象：

```
>>> f = make_multiplier(10)
>>> f(5)
50
>>> f(5, 3)
15 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T18:34:17.080

除了[Matt Ball](https://stackoverflow.com/a/14012102/455276)或[Martijn Pieters](https://stackoverflow.com/a/14012098/455276)闭包方法（在这种特殊情况下这是正确的答案）之外，还有另外两种在 Python 中值得认识的形式。

第一个是使用 lambda 匿名函数：

```
>>> f=lambda x: x*10
>>> f(1)
10
>>> f(2)
20 
```

第二个是写一个类：

```
class Multiplyby:
    def __init__(self,x):
        self.x=x

    def __call__(self,y):
        return self.x*y

fx10=Multiplyby(10)
fx5=Multiplyby(5)

for y in [1,2,3]:
    print y, fx10(y), fx5(y) 
```

印刷：

```
1 10 5
2 20 10
3 30 15 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T22:32:05.113

使用 lambda：

```
>>> make_multiplier = lambda n: lambda x: x * n
>>> make_multiplier(10)(5)
50 
```

10000000 个循环，3 个中最好的：每个循环 0.189 微秒

使用标准库：

```
import functools
import operator

f = lambda n: functools.partial(operator.mul, n) 
```

10000000 个循环，3 个中最好的：每个循环 0.148 微秒

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T00:04:06.660

我不推荐这个，我只是展示了[无意义~~的~~自由风格](http://en.wikipedia.org/wiki/Tacit_programming)的可能性：

```
>>> from functools import partial
>>> from operator import mul
>>> make_multiplier = partial(partial, mul)
>>> f = make_multiplier(10)
>>> f(1)
10
>>> f(2)
20 
```

# cygwin - cygwin：如何为远程应用程序制作 Windows 菜单启动器

> ID：14012082
> 
> 赞同：1
> 
> 时间：2012-12-23T15:15:49.323
> 
> 标签：cygwin, remote-access, launcher

我使用 .XWinrc 文件在远程机器上为 Thunderbird（称为 mythunderbird）制作了一个应用程序启动器。

```
menu apps {
        xterm   exec    "xterm"
        "Emacs" exec    "emacs"
        notepad exec    notepad
        xload   exec    "xload -display %display%"  # Comment
        mythunderbird exec "ssh -X mckserver.mckserver.apollo3.com thunderbird"
} 
```

这从多次击键开始（右键单击 XWin >（品脱到 Applicatoins）> 单击 mythunderbird。

有人能告诉我如何将这样的菜单添加到桌面快捷方式吗？使用快捷方式运行“xterm”，然后登录远程服务器并启动 Thunderbird 很容易，但需要很多步骤和点击。

我真正需要做的是知道在启动 xterm 的默认快捷方式中要更改什么：

```
C:\cygwin\bin\run.exe -p /usr/X11R6/bin xterm -display 127.0.0.1:0.0 -ls 
```

我喜欢 XWinrc 应用程序的功能是它可以干净地执行 Thunderbird，而不会留下额外的终端运行。如果我在 XWinrc 之外启动它，我会运行 Thunderbird，但还会运行一个额外的 xterm。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:26:59.283

我让它工作的方法是在我的主目录（/home/dave/mythunderbird）中的 cygwin 中创建一个脚本，该脚本执行 ssh 调用。

在 windows 快捷方式中，设置目标 C:\cygwin\bin\run.exe bash -le /home/dave/mythunderbird

run.exe 停止正在显示的命令窗口，并且 bash -le 从登录 shell 以 bash 运行脚本

# android - Android：在服务内创建通知

> ID：14012083
> 
> 赞同：4
> 
> 时间：2012-12-23T15:15:50.640
> 
> 标签：android, service, notifications

**我在服务**内创建通知并将其显示在状态栏中时遇到问题...

这就是我在活动中创建通知的方式：

```
 int NOTIFY_ID=100;
    Intent notificationIntent = new Intent(this, Grafik.class);
    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, notificationIntent, PendingIntent.FLAG_CANCEL_CURRENT);

    NotificationCompat.Builder mBuilder =
            new NotificationCompat.Builder(this)
            .setContentIntent(pendingIntent)
            .setSmallIcon(R.drawable.notification)
            .setContentTitle("Message")
            .setContentText("Hello world");
    NotificationManager mgr = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    mgr.notify(NOTIFY_ID, mBuilder.build()); 
```

但是当我将此代码放入我的服务时它崩溃了，我认为问题就在这里

```
Intent notificationIntent = new Intent(this, Grafik.class);
    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, notificationIntent, PendingIntent.FLAG_CANCEL_CURRENT); 
```

和这里

```
NotificationCompat.Builder mBuilder =
            new NotificationCompat.Builder(this) 
```

但我不知道为什么...

# ios - 使用 Cocos2D vs UIKit 创建一个包含益智游戏的应用程序

> ID：14012085
> 
> 赞同：2
> 
> 时间：2012-12-23T15:15:58.980
> 
> 标签：ios, cocos2d-iphone, uikit

我搜索了一下，但找不到答案。我将开发一个包含不同类型游戏的应用程序。我不确定我是应该深入学习 cocos2d 还是继续学习 UIKit。游戏将像游戏一样是 2D 益智游戏。在游戏中，用户需要移动棋子，给它们上色，当关卡完成时它们会有某种动画，例如星星飞舞或烟花。这可以单独使用 UIKit 完成吗？UIKit 上是否有关于如何创建此类益智游戏的特定书籍/教程？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T17:36:49.097

这仅取决于您的设计和创意功能，是否会有很多动画技巧您应该尝试使用 cocos2D（因为它具有一些有用的内存调节组件），如果引擎非常简单 - UIKit 足以满足您的游戏.

# html - 文本堆叠在自身之上

> ID：14012093
> 
> 赞同：0
> 
> 时间：2012-12-23T15:16:42.127
> 
> 标签：html, css

在 IE 特定的 CSS 文件中，文本堆叠在自身之上。看这里![看这里](../Images/57f53c5376cc70e9051b8e6db9bad58d.png)

这仅发生在 IE 中，而不发生在任何其他浏览器中。这是 IE 特定的 css

```
h2 {
font-family: 'Paytone One', sans-serif;
font-size: 30px;
position: relative !important;
top:-150px !important;
left:-250px !important;
color: black;
}
h3 {
font-family: 'Paytone One', sans-serif;
font-size: 20px;
position: relative !important;
top:150px !important;
left: 100px !important;
}
.image2 {
position: relative !important;
bottom:100px !important;
left: 100px !important;
}
.box1 {
width: 100%;
height: 5px;
background-color:  #FC3B3B;
position: relative !important;
bottom:0px !important;
left: 0px !important;
}
p {
position: relative !important;
bottom:0px !important;
left: 0px !important;
font-size: 15px;
font-family: arial;
color: #585858;
} 
```

我怎样才能阻止这种情况发生。它开始发生，因为我添加了！重要但是如果我删除它，那么我无法定义位置

编辑。这是我页面的 HTML 部分

```
 <!DOCTYPE html>
<head>
<link href='http://fonts.googleapis.com/css?family=Paytone+One' rel='stylesheet' type='text/css'>
<title>Louis Moore | Creating The Future  </title>
<!--[if IE]>
<link rel="stylesheet" type"text/css" href="ie.css" >
<![endif]-->

</head>
<style>
.box {
background-color: #F1F2F2;
border: 1.5px #D1D3D4 solid;
position: relative;
top: 100px;
height:450px;
width:100%;
}
.image1 {
position: absolute;
top:-100px;
left: 400px;
}
body{
font-family: 'Paytone One', sans-serif;
font-size: 30px;
}
h1 {
font-family: 'Paytone One', sans-serif;
font-size: 40px;
position: absolute;
top:150px;
left: 400px;
}
h2 {
font-family: 'Paytone One', sans-serif;
font-size: 30px;
position: absolute;
top:200px;
left: 500px;
color: #FC3B3B;
}
h3 {
font-family: 'Paytone One', sans-serif;
font-size: 20px;
position: absolute;
top:300px;
left: 400px;
}
.image2 {
position: absolute;
top:370px;
left: 600px;
}
.box1 {
width: 100%;
height: 5px;
background-color:  #FC3B3B;
position: absolute;
top:560px;
left: 0px;
}
p {
position: absolute;
top:600px;
left: 100px;
font-size: 15px;
font-family: arial;
color: #585858;
}
</style>

<body>
<div class="box">
<img src="louis.png" class="image1" alt="." width="400px" height="400px">
<h1> WELCOME TO MY PAGE<h1> 
<h2>COMING SOON... <h2>
<h3>BUT FOR NOW FOLLOW ME ON TWITTER</h3>
<a href="http://twitter.com/louismoore18"><img src="twitter.png" class="image2" border="0" alt="."></a>
</div>
<div class="box1">

</div>
<p>louismoore.net © All rights reserved 2012</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T17:21:38.387

```
 <!DOCTYPE html>
    <head>
    <link href='http://fonts.googleapis.com/css?family=Paytone+One' rel='stylesheet' type='text/css'>
    <title>Louis Moore | Creating The Future  </title>
    </head>

   <style>
       .clearfix:after {
        content: ".";
        display: block;
        clear: both;
        visibility: hidden;
        line-height: 0;
        height: 0;
    }

    .clearfix {
        display: inline-block;
    }

    html[xmlns] .clearfix {
        display: block;
    }

    * html .clearfix {
        height: 1%;
    }

    .box {
    width:100%;
    }
    .images{
    background-color: #F1F2F2;
    border: 1.5px #D1D3D4 solid;
    height:450px;
    width:100%;
    }
    .image1 {
    margin:auto;
    display:block;

    }
    body{
    font-family: 'Paytone One', sans-serif;
    font-size: 30px;
    }
    h1 {
    font-family: 'Paytone One', sans-serif;
    font-size: 40px;
    text-align:center;
    padding-top:25px;
    color:#ddd;

    }
    h2 {
    font-family: 'Paytone One', sans-serif;
    font-size: 30px;
    text-align:center;
    color:red;
    }
    h3 {
    font-family: 'Paytone One', sans-serif;
    font-size: 20px;
    text-align:center;
    color:red;
    }
    .image2 {

    }
    .box1 {
    width: 100%;
    height: 5px;
    background-color:  #FC3B3B;

    }
    p {

    font-size: 15px;
    font-family: arial;
    color: #585858;
    }

   </style>
    <body>
    <div class="box clearfix">
    <div class="images">
    <img src="fashion2.jpg" class="image1" alt="." width="400px" height="400px">
    </div>
    <h1> WELCOME TO MY PAGE</h1> 
    <h2>COMING SOON... </h2>
    <h3>BUT FOR NOW FOLLOW ME ON TWITTER</h3>
    <a href="http://twitter.com/louismoore18"><img src="twitter.png" class="image2" border="0" alt="."></a>
    </div>
    <div class="box1 clearfix">

    </div>
    <div class="clearfix">
    <p>louismoore.net © All rights reserved 2012</p>
    </div>
    </body>
    </html>

    Use this HTML code,

    And use this css code and no need extra css for IE 
```

# java - 用于事务的 neo4j 锁

> ID：14012096
> 
> 赞同：3
> 
> 时间：2012-12-23T15:17:04.380
> 
> 标签：java, neo4j, spring-data-neo4j

我刚刚开始使用 neo4j 来评估它是否会成为推荐引擎的良好基础数据库。我想知道是否有关于在读写操作期间在实体上获得的锁的任何文档。

例如，如果节点 N 分别通过关系 R1 和 R2 与节点 N1 和 N2 相关，如果正在创建或修改关系 R1，那么任何使用 N、N1、N2 或 R2 的操作（可能是关系创建/修改或遍历）都会遇到一块？直觉上，我猜不会，因为只有 R1 被写入，这是唯一应该被锁定的实体。但是，我想这也取决于底层实现，特别是因为为每个关系都提供了双向遍历（也许 N 和 N1 会被锁定？）。如果有人可以向我指出一些有关此的官方文档，那就太好了。

如果确实发生了这种锁定，我能想到的解决问题的一种方法是将每个节点解析为每个关系目的的子节点，每个节点都连接到根实体。（比如用户*是*社交用户，用户*是*产品用户等）

我想这将允许每个节点的关系数量减少，将根节点解析为写入繁重和读取繁重的子节点，并允许快速检索某些子图。我能看到的唯一缺点是节点和关系的总数增加了 n 倍（我的数据库大小相对较小，n=4，所以我对此没有问题）。任何关于这些结论是否正确的输入，如果是，如果它们有助于提高性能和减少锁的数量，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T19:15:33.807

In your first scenario where R1 (between N and N1) is being created N and N1 will be locked with a write lock, which means that other writes to N or N1 will block, but not reads (if no read lock is issued manually before reading).

In the scenario where R1 is changed somehow (property set) only R1 is locked.

Your solution by splitting an entity into several specific-purpose sub nodes is a reasonably good one, if you observe a real problem with contention. In most occurences I've seen this used it has been a split on relationship type... something that will probably be solved by a planned feature for better handling of densely connected nodes. This feature will probably yield quite similar effects to that.

# c - 没有包含头文件 C 的此类文件或目录错误

> ID：14012099
> 
> 赞同：0
> 
> 时间：2012-12-23T15:17:11.280
> 
> 标签：c, unix, ubuntu, header-files

我正在尝试包含一个包含结构的头文件，但是当我尝试编译包含头文件的文件时，`No such file or Directory`出现错误。和头文件都`.c`在同一个目录中。

这是代码：

头文件“MyShared.h”：

```
#ifndef MYSHARED_H_INCLUDED
    #define MYSHARED_H_INCLUDED
    #define PERM (S_IRWRU | S_IRGRP)
    #define MySharedKey 0343
    #define SIZE 2048

    struct MyShared
    {
        char *buf[SIZE];
        int ReadfromBuf,WriteToBuf,readbytes;
    };
#endif 
```

`Mem.c`包含头文件的文件：

```
#include <sys/shm.h>
#include "MyShared.h"

int main()
{
    MyShared *obj;

    int shmid,i,childpid;

    shmid = shmget(MySharedKey,sizeof(MyShared),NULL);

    .....
} 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:19:12.637

在 C 中，结构定义**不是**typedef。

```
#include <sys/shm.h>
#include "MyShared.h"

int main()
{
struct MyShared *obj;

int shmid,i,childpid;

shmid=shmget(MySharedKey, sizeof *obj, NULL);

    .....
} 
```

顺便说一句：我认为您不需要共享内存中的*指针*`char *buf[SIZE];` 数组：应该是`char buf[SIZE];`

# jquery - 如何动画 CSS 翻译

> ID：14012105
> 
> 赞同：29
> 
> 时间：2012-12-23T15:17:36.070
> 
> 标签：jquery, css, jquery-animate, jquery-transit

是否可以通过 jquery 为 CSS 属性 translate 设置动画？

```
$('.myButtons').animate({"transform":"translate(50px,100px)"}) 
```

它可以在许多浏览器中使用吗？

演示不工作：http: [//jsfiddle.net/ignaciocorreia/xWCVf/](http://jsfiddle.net/ignaciocorreia/xWCVf/)

**更新：**

我的解决方案：

1.  简单的实现 - [http://jsfiddle.net/ignaciocorreia/R3EaJ/](http://jsfiddle.net/ignaciocorreia/R3EaJ/)
2.  复杂的实现和多浏览器 - [http://ricostacruz.com/jquery.transit/](http://ricostacruz.com/jquery.transit/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-23T15:33:53.670

```
$('div').css({"-webkit-transform":"translate(100px,100px)"});​ 
```

[http://jsfiddle.net/xWCVf/5/](http://jsfiddle.net/xWCVf/5/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-23T15:25:13.573

有 jQuery 插件可以帮助您实现这一点，例如：[http ://ricostacruz.com/jquery.transit/](http://ricostacruz.com/jquery.transit/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-08-24T08:48:21.903

有一种有趣的方式可以通过`animate`以独特的方式使用 jQuery 方法来实现，您可以在描述值`animate`的 javascript 对象上调用该方法`from`，然后将另一个描述`to`值的 js 对象和`step`函数作为第一个参数传递它根据前面描述的值处理动画的每个步骤。

# 示例 - 动画变换`translateY`：

```
var $elm = $('h1'); // element to be moved

function run( v ){
  // clone the array (before "animate()" modifies it), and reverse it
  var reversed = JSON.parse(JSON.stringify(v)).reverse();

  $(v[0]).animate(v[1], {
      duration: 500,
      step: function(val) {
          $elm.css("transform", `translateY(${val}px)`); 
      },
      done: function(){
          run( reversed )
      }
  })
};

// "y" is arbitrary used as the key name 
run( [{y:0}, {y:80}] )
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<h1>jQuery animate <pre>transform:translateY()</pre></h1>
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-05-16T16:00:23.903

根据[CanIUse](http://caniuse.com/#feat=transforms2d)你应该有多个前缀。

```
$('div').css({
    "-webkit-transform":"translate(100px,100px)",
    "-ms-transform":"translate(100px,100px)",
    "transform":"translate(100px,100px)"
  });​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-13T17:01:21.353

我也在寻找一种好方法来做到这一点，我发现最好的方法是在“transform”属性上设置一个转换，然后更改转换，然后删除转换。

我把它们放在一个 jQuery 插件中

[https://gist.github.com/dustinpoissant/8a4837c476e3939a5b3d1a2585e8d1b0](https://gist.github.com/dustinpoissant/8a4837c476e3939a5b3d1a2585e8d1b0)

你会使用这样的代码：

```
$("#myElement").animateTransform("rotate(180deg)", 750, function(){
  console.log("animation completed after 750ms");
}); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-07-12T14:52:07.707

您需要在 CSS 中设置关键帧动画。并使用 jQuery 的关键帧：

```
$('#myTest').css({"animation":"my-animation 2s infinite"});
```

```
#myTest {
  width: 50px;
  height: 50px;
  background: black;
}

@keyframes my-animation {
  0% {
    background: red;  
  }
  50% {
    background: blue;  
  }
  100% {
    background: green;  
  }
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="myTest"></div>
```

# javascript - 脚本在博客中不起作用

> ID：14012109
> 
> 赞同：0
> 
> 时间：2012-12-23T15:18:10.573
> 
> 标签：javascript, blogger, popupwindow

在博客文章中使用以下脚本时，它不起作用..有什么帮助吗？

```
var popvid = null;

function popWin(divId) {
    if(typeof(divId) == 'string') {
        divId = document.getElementById(divId);
    }
    if(!popvid || popvid.closed) {
        popvid = window.open('', 'vidplayer', 'top=200,left=390,width=450,height=375,status=no');
    }
    popvid.document.body.style.backgroundColor = 'black';
    popvid.focus();
    popvid.document.body.innerHTML = '<BR><center>' + divId.innerHTML + '</center>';
    return false;
}
window.onunload = function() {
    if(popvid) {
        popvid.close();
    }
} 
```

其次是：

```
<div id='popvid1' style='display: none'>
<embed style="width:426px; height:320px;" id="VideoPlayback" 
type="application/x-shockwave-flash" 
src="http://www.antenna.gr/webtv/images/fbplayer.swf?cid=07_f_y_mfa_y$_a_e=&volx=100&iu=1&telemetry=false" allowFullScreen="true" allowScriptAccess="sameDomain" flashvars="controls=true"></embed>
</div>
<div id='popvid2' style='display: none'>
<embed style="width:426px; height:320px;" type="application/x-shockwave-flash" src="http://www.antenna.gr/webtv/images/fbplayer.swf?cid=y_n_y_prr6pd_sc=&volx=100&iu=1&telemetry=false" allowFullScreen="true" allowScriptAccess="sameDomain" flashvars="controls=true"> </embed>
</div>
<button href="#" onclick="return popWin('popvid1');" class=popup>01</button>
<button href="#" onclick="return popWin('popvid2');" class=popup>02</button> 
```

# android - 小部件主屏幕或应用小部件

> ID：14012112
> 
> 赞同：0
> 
> 时间：2012-12-23T15:18:17.903
> 
> 标签：android, android-widget, widget

我正在分配有关小部件的作业，但我想首先了解应用小部件和主屏幕小部件之间的区别？有什么区别吗？当我解释它们时，我能关心它们什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:20:39.280

> 有什么区别吗？

引用[文档](http://developer.android.com/guide/topics/appwidgets/index.html)：

> App Widgets 是微型应用程序视图，可以嵌入其他应用程序（例如主屏幕）并接收定期更新。

在大多数情况下，应用小部件是“主屏幕小部件”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T19:00:07.320

应用小部件可以添加到主屏幕或锁定屏幕，甚至可以添加到自定义应用小部件主机。

主屏幕小部件只是应用小部件的子集。顾名思义，它们只能托管在主屏幕中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-23T15:20:23.897

您可以在此处阅读有关小部件的所有信息：

[http://developer.android.com/design/patterns/widgets.html](http://developer.android.com/design/patterns/widgets.html)

# php - PHP 除图像和 DOCX 以外的所有文件在下载时均已损坏

> ID：14012113
> 
> 赞同：2
> 
> 时间：2012-12-23T15:18:23.760
> 
> 标签：php, excel, pdf, download

我在一个我已经工作了一段时间的项目中遇到了一个严重的问题。

用户将文件上传到课程。上传脚本采用文件名，用下划线替换空格，删除文件扩展名，添加一个 4 位数字，然后重新添加扩展名。

但是，文件完美地上传到服务器（直接从“上传”文件夹打开时，它们很好）。当下载到用户的计算机时，除了 DOCX 文件和图像之外，所有文件都已损坏。

PDF、Excel (xlsx) 和 powerpoint (pptx) 在打开下载的文件时会给出错误消息：*“文件已损坏，无法打开”*。

我必须下载的代码是：

```
<?php
class download extends Controller {

public function resource ($filename)
{

    $filepath = realpath('./uploads/resources/courses/' . $filename);

    header('Content-type: application/octet-stream');
    header('Content-Disposition: attachment; filename="' . $filename . '"');
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Pragma: no-cache');

    readfile($filepath);

}

} 
```

它是一个 MVC，所以这就是它在一个类中的原因，$filename 是从文件名的 $_GET 变量中检索的。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-20T19:52:02.610

Looks like you need

```
header("Content-Length: " . filesize($filepath));
ob_clean();
flush();
readfile($file);
exit; 
```

See: [How to Automatically Start a Download in PHP?](https://stackoverflow.com/questions/40943/how-to-automatically-start-a-download-in-php)

See also: [Corrupted .docx download using phpdocx](https://stackoverflow.com/questions/10693660/corrupted-docx-download-using-phpdocx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T16:13:36.267

您确定下载的文件的文件名中没有空格或其他特殊字符吗？因为当文件名中存在空格或其他特殊字符时会发生此类问题。

# c# - 我的应用程序是 CPU 密集型的。C＃

> ID：14012114
> 
> 赞同：-2
> 
> 时间：2012-12-23T15:18:24.197
> 
> 标签：c#, memory, cpu

我有一个循环从实时 URL 接收到的 XML 的应用程序。XML 在几微秒内收到，然后我通过循环进行处理。

我的客户说该应用程序非常占用 CPU。

我想知道我是否可以以某种方式减少它的 CPU 使用率？应用程序本身并不大，它只是 XML 字段和常规 if 条件的一个大循环。

```
foreach (XmlNode childNode in childNodes)
                {
                    if (childNode.Name == "update_status")
                    {
                        update_status = childNode.InnerText;
                    }

                    if (childNode.Name == "title")
                    {
                        title = childNode.InnerText;
                    } 
```

上面代码的几行。有很多这样的 IF 语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T15:39:27.763

如果您的应用程序一直在处理，那么它当然会消耗所有 CPU。如果它打算等待新数据到达，那么它不应该消耗太多 CPU。

人们犯的一个非常常见的错误是编写繁忙的循环。看起来像这样：

```
while (true)
    if (thereIsNewData())
        processNewData(); 
```

我将大胆猜测您的代码看起来像这样。这将以完全 CPU 利用率运行，并花费几乎所有时间重复调用几乎总是`thereIsNewData()`返回。`false`

您需要做的是在没有数据时让 CPU 空闲。然后唤醒处理它。有无数种方法可以实现这一目标。在理想情况下，当有新数据时，您会收到通知。但是，如果您无法做到这一点，那么使用睡眠进行轮询将限制 CPU 的使用。

由于我们对您的应用程序的体系结构一无所知，因此我什至不会尝试建议实现。但关键是您使用阻塞等待，而不是繁忙循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T15:34:22.610

如果它总是在同一个模型上，你可以分配给字典

```
dico[childNode.Name] = childNode.InnerText; 
```

或者干脆把所有东西都放在一个大开关盒里。

```
switch(childNode.Name)
{
  case "update_status": update_status = childNode.InnerText; break;
  case "title": title = childNode.InnerText; break;
  default: ...
} 
```

在您的代码中，您系统地执行每个测试，如果有很多块 `if`，将剩余的块`if`放入块中会稍微提高性能。`else`

switch case 肯定会使用字典进行优化。见 [http://www.dotnetperls.com/string-switch](http://www.dotnetperls.com/string-switch)

无论如何，即使有数百个如果。这段代码让您的客户抱怨，这听起来很令人惊讶。你能告诉我们你是如何处理你的实时网址的监控的吗？

# python - 询问年龄的功能

> ID：14012117
> 
> 赞同：-2
> 
> 时间：2012-12-23T15:18:53.143
> 
> 标签：python, function, loops, logic

我需要这个来询问年龄，但如果年龄低于 11 岁或超过 100 岁，则拒绝它并拒绝除整数以外的任何内容。如果输入的数字超出给定范围或不是整数，我需要它循环返回并再次询问

```
def PlayerAgeFunction():
   VALID = True
   while VALID == True:
      PlayerAge = int(raw_input('ENTER YOUR AGE: '))
      if PlayerAge == type(int):
          VALID = False
     elif PlayerAge != type(int):
         print 'THAT IS NOT A NUMBER.'
   return PlayerAge 
```

我之前在这里寻找答案，但我发现没有帮助。请有人帮忙，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T15:21:45.650

```
def prompt_age(min=11, max=100):
    while True:
        try:
            age = int(raw_input('ENTER YOUR AGE: '))
        except ValueError:
            print 'Please enter a valid number'
            continue
        if not min <= age <= max:
            print 'You are too young/old'
            continue
        return age 
```

# image - 双三次图像插值算法 - 毛刺

> ID：14012118
> 
> 赞同：1
> 
> 时间：2012-12-23T15:18:55.400
> 
> 标签：image, image-processing, graphics

我正在尝试实现双三次图像插值。我只粘贴了代码的相关部分。我跳过了处理将图像加载到缓冲区并从中读取像素等的代码。我有理由确定我的数学是正确的。但是，我似乎在输出中有可怕的伪影。

所有操作都发生在 resize 方法中。

我希望有经验的图形程序员能够分享他们对我可能做错的预感。

以下是将输入调整为宽度和高度的两倍时得到的输入和输出图像。

![输入图像](../Images/ad4831a80f35453e78ad98d0dc261864.png) ![输出图像](../Images/68e4806ea7bbfe8f2791ea312da4b128.png)

```
double Interpolator::interpolate(const double p0, const double p1, const double p2, const double p3, const double x){
    return  (-0.5f*p0+1.5f*p1-1.5f*p2+0.5*p3)*pow(x,3)+
            (p0-2.5f*p1+2.f*p2-0.5f*p3)*pow(x,2)+
            (-0.5f*p0+0.5f*p2)*x+
            p1;
}

bool Image::equals(double a, double b, double threshold){
        if(fabs(a-b)<=threshold)
            return true;
        return false;
}

void Image::interpolate(const Pixel p[], double offset, Pixel& result){
    result.r = Interpolator::interpolate(p[0].r,p[1].r,p[2].r,p[3].r,offset);
    result.g = Interpolator::interpolate(p[0].g,p[1].g,p[2].g,p[3].g,offset);
    result.b = Interpolator::interpolate(p[0].b,p[1].b,p[2].b,p[3].b,offset);
    result.a = Interpolator::interpolate(p[0].a,p[1].a,p[2].a,p[3].a,offset);   
}

void Image::getSamplingCoords(const int nearest,
                              const int max,
                              int coords[]){

    coords[0] = nearest-1;
    if(coords[0]<0)
        coords[0] = nearest;
    coords[1] = nearest;
    coords[2] = nearest+1;
    if(coords[2]>=max)
        coords[2] = nearest;    
    coords[3] = nearest+2;
    //The following check should not be necessary
    //since this is never expected to occur. Nevertheless...
    if(coords[3]>=max)
        coords[3] = nearest;
}

void Image::interpolateAlongY(int x, int y, int yMax, double yOffset, Pixel& result){

    if(equals(yOffset,0.f,ERROR_THRESHOLD)){
        //No interpolation required
        getPixel(x,y,result);
        return;
    }

    int yCoords[4];
    getSamplingCoords(y, yMax, yCoords);    
    Pixel interpolants[4];
    for(int i=0; i<4; ++i){
        getPixel(x, yCoords[i], interpolants[i]);
    }   
    interpolate(interpolants, y, result);
}

void Image::resize(const int newWidth, const int newHeight){
    //Ensure that we have a valid buffer already
    if(buffer==NULL){
        printf("ERROR: Must load an image before resizing it!");
        assert(false);
    }   
    //We first need to create a new buffer with the new dimensions
    unsigned char* newBuffer = new unsigned char[newWidth*newHeight*channelCount];
    for(int j=0; j<newHeight; ++j){
        for(int i=0; i<newWidth; ++i){
            size_t newIndexOffset = (j*newWidth+i)*channelCount;
            //For this pixel in the target image we
            //a) Find the nearest pixel in the source image
            //b) Find the offset from the aforementioned nearest pixel
            int xNear,yNear;
            double xOffset,yOffset;
            double x = ((double)width/(double)newWidth)*i;
            double y = ((double)height/(double)newHeight)*j;    
            xNear = floor(x);
            yNear = floor(y);   
            xOffset = x-xNear;
            yOffset = y-yNear;

            //If offset is 0, we don't need any interpolation
            //we simply need to sample the source pixel and proceed
//          if(equals(xOffset,0.f,ERROR_THRESHOLD) && equals(yOffset,0.f,ERROR_THRESHOLD)){
//              Pixel result;
//              getPixel(xNear, yNear, result);
//              *(newBuffer+newIndexOffset) = result.r;
//              *(newBuffer+newIndexOffset+1) = result.g;
//              *(newBuffer+newIndexOffset+2) = result.b;
//              if(channelCount==4)
//                  *(buffer+newIndexOffset+3) = result.a;
//              continue;
//          }           
            //We make a check that xNear and yNear obtained above
            //are always smaller than the edge pixels at the extremeties
            if(xNear>=width || yNear>=height){
                printf("ERROR: Nearest pixel computation error!");
                assert(false);
            }           
            //Next we find four pixels along the x direction around this
            //nearest pixel
            int xCoords[4];
            getSamplingCoords(xNear,width,xCoords);

            //For each of these sampling xCoords, we interpolate 4 nearest points
            //along Y direction
            Pixel yInterps[4];
            for(int k=0; k<4; k++){
                interpolateAlongY(xCoords[k], yNear, height, yOffset, yInterps[k]);
            }           
            //Finally, the resultant pixel is a cubic interpolation
            //on the 4 obtained pixels above
            Pixel result;
            if(equals(xOffset,0.f,ERROR_THRESHOLD)){
                result.r = yInterps[0].r;
                result.g = yInterps[0].g;
                result.b = yInterps[0].b;
                result.a = yInterps[0].a;
            }else{
                interpolate(yInterps, xOffset, result);
            }
            *(newBuffer+newIndexOffset) = result.r;
            *(newBuffer+newIndexOffset+1) = result.g;
            *(newBuffer+newIndexOffset+2) = result.b;
            if(channelCount==4)
                *(newBuffer+newIndexOffset+3) = result.a;
        }   
    }   
    //Now we can deallocate the memory of our current buffer
    delete [] buffer;
    //Reassign our newly sampled buffer to our own
    buffer = newBuffer;
    //Reset our image dimensions
    height = newHeight;
    width = newWidth;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T16:09:21.190

`interpolateAlongY`错了，最后一行是

```
interpolate(interpolants, y, result); 
```

并且应该是

```
interpolate(interpolants, yOffset, result); 
```

`getSamplingCoords`此外， for中的注释`coords[3]`是错误的。

编辑：

在我查看了 JansonD​​ 的答案后，我注意到了另外两个问题，`if(equals(xOffset,0.f,ERROR_THRESHOLD))`甚至没有必要的异常，当偏移值接近 0 时，插值函数会做正确的事情。

另一件事是，当您添加来自相邻像素的信息时，您的插值函数可能是一个低通滤波器，因此您可能会丢失高频数据（如边缘）的细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T17:07:00.703

除了约瑟夫关于以下内容的回答：

```
interpolate(interpolants, y, result); 
```

需要参考`yOffset`的还有：

```
if(equals(xOffset,0.f,ERROR_THRESHOLD)){
            result.r = yInterps[0].r;
            result.g = yInterps[0].g;
            result.b = yInterps[0].b;
            result.a = yInterps[0].a; 
```

应该使用哪个`yInterps[1]`。

此外，没有任何输出值被钳位，因此在锐边周围可能存在下溢和溢出。

和评论：

```
if(coords[3]>=max)
    coords[3] = nearest; 
```

不是唯一的错误，但实际上钳位应该是`max-1`，而不是`nearest`，除非您的意思是反映边缘像素而不是重复它们。

# c# - 操作自动生成的列

> ID：14012119
> 
> 赞同：0
> 
> 时间：2012-12-23T15:19:01.103
> 
> 标签：c#, asp.net, gridview

我有一个 gridview 并将其绑定到具有未知列的数据源。

当我简单地将它绑定到数据网格时，所有工作都会找到并且全部绑定。

但是我无论如何都找不到根据列的值来处理列。

我发现我可以这样做：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    for (int i = 0; i < e.Row.Cells.Count; i++)
    {
        DateTime x;
        var res =DateTime.TryParse(e.Row.Cells[i].Text,out x);
        if (res)
        {
            TextBox text = new TextBox();
            text.Text =  e.Row.Cells[i].Text;
            e.Row.Cells[i].Controls.Clear();
            e.Row.Cells[i].Controls.Add(text);
        }
    }
} 
```

但这太难看了

有什么方法可以创建一个 DateTime 到 Textbox 转换器并告诉我的数据网格将它用于数据绑定？

**稍后我将把控制从文本框更改为日期选择器，这只是测试模式..**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:21:18.207

在非常非常基本的数据绑定场景之外，您会发现需要关闭、为许多（或大多数）列`AutoGenerateColumns`设置元素并使用事件。[`TemplateField`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.templatefield.aspx)[`RowDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)

很抱歉，您发现该模式很难看，但*自动生成*只会这样做，仅此而已；当网格为您处理创建列和连接值时，您无法控制这些值。

# c# - 在访问中插入日期

> ID：14012124
> 
> 赞同：1
> 
> 时间：2012-12-23T15:19:21.733
> 
> 标签：c#, visual-studio, ms-access, insert

我正在处理访问但陷入具有日期时间的插入查询。像这些查询对我不起作用。

```
INSERT INTO tbl_fuel_levels([genset_id], [rec_time], [fuel_level], 
[grid_electricity], [genset_electricity], [genset_number]) 
VALUES('001', '#12/12/23 18:46:38+20#', '0', 'T', 'F', '+923468280124');

INSERT INTO tbl_fuel_levels([genset_id], [rec_time], [fuel_level], 
[grid_electricity], [genset_electricity], [genset_number]) 
VALUES('001', #'12/12/23 18:46:38+20'#, '0', 'T', 'F', '+923468280124');

INSERT INTO tbl_fuel_levels([genset_id], [rec_time], [fuel_level], 
[grid_electricity], [genset_electricity], [genset_number]) 
VALUES('001', '12/12/23 18:46:38+20', '0', 'T', 'F', '+923468280124'); 
```

![在此处输入图像描述](../Images/380d0df2b08ce610edad092cc37303eb.png)

任何的想法？有什么问题。

这是我在 C# 中的代码：

```
con = new OleDbConnection(ConnStr);
con.Open();

cmd = con.CreateCommand();
cmd.CommandText = "INSERT INTO tbl_fuel_levels([genset_id], [rec_time], 
[fuel_level], [grid_electricity], [genset_electricity], [genset_number]) 
VALUES('" + genset_id + "', '" + rec_time + "', '" + fuel_level + "', '" +
grid_electricity + "', '" + genset_electricity + "', '" + genset_number + "');";
cmd.ExecuteNonQuery(); 
```

我也试过这个。

```
cmd.CommandText = "INSERT INTO tbl_fuel_levels([genset_id], [rec_time], 
[fuel_level], [grid_electricity], [genset_electricity], [genset_number]) 
VALUES('" + genset_id + "', @rec_t, '" + fuel_level + "', '" + grid_electricity 
+ "','" + genset_electricity + "', '" + genset_number + "');";
cmd.Parameters.Add("@rec_t", OleDbType.DBTimeStamp).Value 
                              = DateTime.Parse(rec_time); 
```

所有其他插入和选择查询工作正常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T15:45:50.363

试试这个

```
try
{

  con = new OleDbConnection(ConnStr);
  con.Open();

  cmd = con.CreateCommand();
  cmd.CommandText = "INSERT INTO tbl_fuel_levels([genset_id], [rec_time], [fuel_level], [grid_electricity], [genset_electricity], [genset_number]) 
VALUES(?,?,?,?,?,?)";
cmd.Parameters.AddWithValue("@id",id);

cmd.Parameters.AddWithValue("@date",DateTime.Parse("12/12/2009 11:34:55"));
  cmd.ExecuteNonQuery();

}
catch (OleDBException ex)
{
  MessageBox.Show(ex.Message);
} 
```

更新：

如果您使用的是 Access 2010，那么您还可以在 MSAccess 上使用存储过程。有关更多信息，请参阅本文[如何在 MS Access 中创建存储过程？](https://stackoverflow.com/questions/3287545/how-do-i-make-a-stored-procedure-in-ms-access)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T16:52:11.087

您的`INSERT`查询有不止一个问题。我将此版本从您的评论复制到 DJ：

```
INSERT INTO tbl_fuel_levels (
    [genset_id],
    [rec_time],
    [fuel_level],
    [grid_electricity],
    [genset_electricity],
    [genset_number]
    )
VALUES (
    '001',
    '#12/11/2023 2:46:38 PM#',
    '0',
    'T',
    'F',
    '+923468280124'
    ); 
```

问题是：

1.  您正在尝试将字符串插入`'#12/11/2023 2:46:38 PM#'`到 Date/Time field 中`rec_time`。丢弃单引号以使该值成为日期/时间文字而不是字符串：`#12/11/2023 2:46:38 PM#`
2.  您正在尝试将字符串`'T'`插入 Yes/No field `grid_electricity`。改用`True`不带引号的。
3.  您正在尝试将字符串`'F'`插入 Yes/No field `genset_electricity`。这与问题 #2 相同。`False`不带引号使用。

使用 Access 的查询设计器创建新查询。将其切换到 SQL View 并粘贴到此语句中：

```
INSERT INTO tbl_fuel_levels (
    [genset_id],
    [rec_time],
    [fuel_level],
    [grid_electricity],
    [genset_electricity],
    [genset_number]
    )
VALUES (
    '001',
    #12/11/2023 2:46:38 PM#,
    '0',
    True,
    False,
    '+923468280124'
    ); 
```

如果该语句还有任何剩余问题，请先在 Access 中解决它们，然后再使用`c#`代码来创建语句。

或者更好的是，使用参数查询方法。一旦你用是/否字段解决了这些问题，也许你可以让它工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T15:39:53.290

我可以建议以下这种方式，您可以先捕获确切异常，以便我们可以确定插入失败的字段.. 我认为您传递的日期很奇怪尝试传递“MM/DD/YYY HH:MM:SS”

```
try
{

  con = new OleDbConnection(ConnStr);
  con.Open();

  cmd = con.CreateCommand();
  cmd.CommandText = "INSERT INTO tbl_fuel_levels([genset_id], [rec_time], [fuel_level], [grid_electricity], [genset_electricity], [genset_number]) VALUES('" + genset_id + "', '" + rec_time + "', '" + fuel_level + "', '" + grid_electricity + "', '" + genset_electricity + "', '" + genset_number + "');";
  cmd.ExecuteNonQuery();

}
catch (OleDBException ex)
{
  MessageBox.Show(ex.Message);
} 
```

如果您决定使用 AddWithParameters() 方法，您可能想尝试这样的事情

```
cmd.Parameters.AddWithValue("?", DateTime.Parse("12/11/2023 2:46:38")); 
```

或者正确的方法是这样的

```
"INSERT INTO tbl_fuel_levels[genset_id], [rec_time], [fuel_level], [grid_electricity], [genset_electricity], [genset_number])
 VALUES('{0}','{1}','{2}','{3}','{4}','{5}','{6}')", genset_id, rec_time, fuel_level, grid_electricity, genset_electricity, genset_number)"; 
```

我建议创建变量并将值分配给变量

以这种方式创建变量并将其分配给这些值，您不必使用带有所有逗号的如此讨厌的插入语句

**genset_id、rec_time、fuel_level、grid_electricity、genset_electricity、genset_number**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T16:20:25.553

要在 MSAccess 查询中格式化日期，只需使用以下`#`符号：

```
#12/12/23 18:46:38+20# 
```

# nfc - 检查 MIFARE Ultralight 页面上的访问条件

> ID：14012127
> 
> 赞同：0
> 
> 时间：2012-12-23T15:19:58.877
> 
> 标签：nfc, mifare

如何检查页面是否可写在 Mifare Ultralight 标签上？按照 NFC TagInfo NFC Research Lab 示例菜单“访问条件”Page1..Page15 只读/可写（工厂锁定/锁定）/保留/锁定位

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T16:50:55.850

查阅 MIFARE Ultralight 数据表，可在[http://www.nxp.com/documents/data_sheet/MF0ICU1.pdf](http://www.nxp.com/documents/data_sheet/MF0ICU1.pdf) 获得 0x02 页中的 2 个锁定字节的位确定可以写入哪个页面，请参见上面链接数据表的第 12 页.

# lua - Lua 表构造函数值作为多值返回函数调用

> ID：14012130
> 
> 赞同：1
> 
> 时间：2012-12-23T15:20:27.453
> 
> 标签：lua, lua-table

使用 Lua (5.1) 我想用返回多个值的函数填充表格。不幸的是，由于 Lua 规范，这样的函数调用只会被扩展为最后一个。

```
function get2() return 1, 2 end
local t = { get2(), get2() }
for _,v in pairs(t) do print(v) end 
```

回报：`1, 1, 2`

除此之外还有什么方法可以做到这一点

```
table = {}; 
res1, res2 = get2(); 
table[#table + 1] = res1; 
table[#table + 1] = res2 
```

或其他一些复杂的技术？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:52:26.873

不，没有直接的方法可以做到这一点。

但是您可以使用辅助函数简化代码。

```
function get2() return 1, 2 end

function appendMultiple(t, ...)
  for i=1, select('#', ...) do
    t[#t+1] = select(i, ...)
  end
end

local t = { }
appendMultiple(t, get2())
appendMultiple(t, get2())

for _,v in pairs(t) do print(v) end
--> 1  2  1  2 
```

# objective-c - 此类与键视图的键值编码不兼容

> ID：14012131
> 
> 赞同：1
> 
> 时间：2012-12-23T15:20:36.910
> 
> 标签：objective-c, xcode, xib

我是 xcode 的初学者并且遇到了一些问题。一切都是在我创建 xib 文件时开始的。我创建了 xib 文件并连接到视图控制器。之后它因错误而崩溃：“加载了“主”笔尖，但未设置视图出口。” 然后我右键单击左侧菜单上的文件所有者图标并将其拖动到下面的查看图标。出现了一个菜单 Outlets。然后我单击了查看。

我再次运行，这一次出现了另一个错误：“这个类不符合键值编码的键视图。” 我在网上搜索了很多关于此崩溃的信息，但没有一个有效。有人可以帮我了解这个文件的所有者和 xib 的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:26:07.303

在 nib 文件中检查您的网点。然后仔细检查它们。然后检查您是否已正确合成所有属性。然后检查您在 xib 中的文件所有者对象是否设置为正确的 UIViewController。然后检查您是否在 .h/.m 文件中重命名了在 XIB 中设置它们的出口后的任何属性。
当您将对象的出口设置为 .h/.m 文件中不存在的属性时，通常会发生键值编码兼容错误。

# ruby-on-rails - 如何在 Devise 支持的 Rails 应用程序中注销特定用户？

> ID：14012133
> 
> 赞同：1
> 
> 时间：2012-12-23T15:20:42.570
> 
> 标签：ruby-on-rails, session, cookies, devise

默认情况下，Rails 中的机制似乎是设置会话 cookie，以跟踪用户是否登录。虽然这将确保用户在关闭浏览器时注销，但我还需要在不活动的情况下将他注销。我有以下用例：

*   用户已登录
*   他在一个特定的页面上（websockets 供电，没有刷新）
*   客户端 ping 服务器，以便让服务器知道他仍然处于活动状态
*   如果超过 X 分钟没有任何活动迹象，则应注销用户

如何处理这样的用户案例？我考虑过在 cookie 上设置几分钟的过期时间。我希望每次客户端 ping 服务器时将 cookie 的过期时间设置回原始持续时间。

我对如何解决这个问题持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:40:24.107

如果您使用 devise，它已经存在，您可以在 devise.rb [https://github.com/plataformatec/devise/blob/master/lib/generators/templates/devise.rb#L132中配置超时持续时间](https://github.com/plataformatec/devise/blob/master/lib/generators/templates/devise.rb#L132)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T22:49:25.210

使用模块超时。在文档中阅读有关它的内容：http: [//github.com/plataformatec/devise](http://github.com/plataformatec/devise)。

**信息：迁移评论以回答。**

# objective-c - 无法将 UITableView 滚动到底部

> ID：14012137
> 
> 赞同：5
> 
> 时间：2012-12-23T15:21:23.553
> 
> 标签：objective-c, ios, uitableview, ios6, scroll

**编辑**
这就是发生的事情，所以你可以看到：http: [//youtu.be/v1HrxYhzJZY](http://youtu.be/v1HrxYhzJZY)。

这是我的场景：
我有`UITableView`5 个部分和 12 个单元格。这个视图是用 a 打开的`push segue`，一切正常，它滚动等等。

其中三个单元格打开一个`MKMapView`视图（通过 a `push segue`）另一个弹出一个`MFMailComposeViewController`。

当我尝试*返回*时，我`UITableView`不再能够滚动到底部。我只能滚动*一点*，然后它返回到我的表格视图的顶部。

我试图设置帧大小`viewWillAppear`，我试图重新加载`tableView`但它不起作用！
什么可能导致这个问题？

**编辑**
我的实现是：

```
- (void)viewDidLoad {
    loaded = NO;

    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"my_url", self.userID]];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        loaded = YES;

        self.user = JSON;
        [self setUserValues];

        [self.tableView reloadData];

    } failure:nil];

    [operation start];

    [super viewDidLoad];
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    [self.tableView setContentSize:CGSizeMake(320, 420)];
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T20:33:43.900

我用这个简单的代码自己解决了这个问题：

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];

    [self.tableView reloadData];
} 
```

不管怎么说，还是要谢谢你！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-23T15:37:29.910

滚动表格视图的`viewWillAppear:`方法为时过早。该视图尚未添加到屏幕视图层次结构中并尚未布局。尝试在`viewDidLayoutSubviews`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T15:30:07.160

使用以下代码将 tableView 滚动到所需的部分/行：

```
[tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:desiredRow inSection:desiredSection] atScrollPosition:UITableViewScrollPositionTop animated:NO]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-23T21:56:26.383

要滚动继承自 的 tableView，`UIScrollView`您需要使用`[self.tableView setContentOffset:CGPointMake(0,100) animated:YES];`而不是`setContentSize`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-05T17:02:43.020

我也经历过这个。从子视图回来，表格视图不再可滚动（它总是会弹回顶部）。我的子视图没有像您这样的地图视图。

重新加载表格视图并没有为我解决这个问题。

该错误仅出现在 iOS 7 中，而不是 6.1。

我正在访问`topLayoutGuide`...删除该访问（只是一个属性读取！）解决了这个问题。哇！一定是魔法属性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-04T08:28:15.550

我昨天也遇到了这个问题！而且我刚刚修好了！

我将 UITableView 拖到 UIViewController 并简单地选择了`add missing contraints`. 当我运行应用程序时，UITableView 无法滚动到底部。

我用谷歌搜索并在 Stackoverflow 中看到[了类似的问题](https://stackoverflow.com/questions/6408645/uitableview-cannot-be-scrolled-all-the-way-to-the-bottom)。

然后我检查了 UITableView 的约束，我发现有一个约束为 UITableView 设置了固定高度。然后我删除了约束并添加了另一个：`Bottom Space to: Bottom Layout Guide = 0`.

该解决方案对我有用。

# selenium - 如何在 selenium rc &webdriver 中截取屏幕截图并将其粘贴到一个单词/文本文件中？

> ID：14012140
> 
> 赞同：0
> 
> 时间：2012-12-23T15:21:28.753
> 
> 标签：selenium, automation, webdriver

```
selenium.captureScreenshot("/tmp/" + this.getClass().getName() + "."
+ testMethodName + ".png");
selenium.captureEntirePageScreenShotToString();
selenium.captureEntirePageScreenshot("C:\screenshot.png",""); 
```

我尝试了以上所有方法，但我需要一些方法将屏幕截图一个接一个地粘贴到文本/文档页面中。

# python - 将正则表达式传递给 python 的 csv 模块或 numpy 的 genfromtxt / loadtxt 中的分隔符字段？

> ID：14012143
> 
> 赞同：5
> 
> 时间：2012-12-23T15:21:34.630
> 
> 标签：python, csv, numpy

我用一些奇怪的分隔符将数据制成表格（即用逗号分隔的值组，用制表符与其他值分隔）：

```
A,345,567   56  67  test 
```

是否有一种干净而巧妙的方法来处理以下任何一个中的多个分隔符：[csv module](http://docs.python.org/2/library/csv.html)、[numpy.genfromtxt](http://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html)或[numpy.loadtxt](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html)？

我找到[了这样的](https://stackoverflow.com/questions/9745572/how-to-use-multiple-delimiters-when-using-csv-reader-in-python?rq=1)方法，但我希望那里有更好的解决方案。理想情况下，我想使用 genfromtxt 和正则表达式作为分隔符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T15:31:48.610

恐怕您要求的三个包裹中的答案是*否定的。*但是，您可以这样做`replace('\t', ',')`（或相反）。例如：

```
from StringIO import StringIO # py3k: from io import StringIO
import csv
with open('./file') as fh:
    io = StringIO(fh.read().replace('\t', ','))

reader = csv.reader(io)

for row in reader:
    print(row) 
```

# jquery-ui - jqueryui - 拖动到可排序对象时，可拖动对象会丢失 id 属性

> ID：14012149
> 
> 赞同：7
> 
> 时间：2012-12-23T15:22:20.547
> 
> 标签：jquery-ui, jquery-ui-sortable, jquery-ui-draggable

我正在使用 jqueryui 的可拖动和可排序功能。我的 jqueryui 版本是 1.9.1，jquery 版本是 1.7.1

我有一组可拖动的项目，以及一个可排序的容器。我将可拖动项目拖到可排序容器中，并希望在可排序的停止处理程序中读取可拖动项目的 id 属性。然而，id 在那里被证明是 undefiend 的。

```
$(sortableselector).sortable({
    stop: function(event, ui) {
        alert(ui.item.attr('id'));
    }
});

$(draggableselector).draggable({
    revert: true,
    revertDuration: 0,
    connectToSortable: 'sortableselector',
}); 
```

打印未定义。我已经看到几个帖子指出了这个错误，但没有得到解决。如何在此处获取拖动项目的 id？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-28T18:03:35.420

尝试...

```
$(sortableselector).sortable({
stop: function(event, ui) {
    alert(ui.item[0].id);
} 
```

});

# objective-c - Storyboard 中的源和目标视图控制器

> ID：14012151
> 
> 赞同：0
> 
> 时间：2012-12-23T15:22:22.070
> 
> 标签：objective-c, xcode, uiviewcontroller

如何检测实际视图是来自故事板中的源视图控制器还是目标视图控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:45:17.590

如果我理解正确，您可以`questionedView`这样测试：

```
 if( [questionedView isDescendantOfView:[storyboardSegue sourceViewController].view] )
    {
      // view is from sourceViewController
    } 
```

和

```
 if( [questionedView isDescendantOfView:[storyboardSegue destinationViewController].view] )
    {
      // view is from destinationViewController
    } 
```

# android - 警报管理器选择的时间和日期

> ID：14012152
> 
> 赞同：1
> 
> 时间：2012-12-23T15:22:41.717
> 
> 标签：android

使用此代码，我尝试在 25/12/2012 - 15.15 将警报管理器设置为 Notify.class 星标，但是当我使用此代码时，Notify.class 不会启动。问题出在哪里？

```
Calendar cal = Calendar.getInstance(TimeZone.getDefault(), Locale.getDefault());

    cal.set(Calendar.DATE,25); 
    cal.set(Calendar.MONTH,Calendar.DECEMBER);
    cal.set(Calendar.YEAR,2012);
    cal.set(Calendar.HOUR_OF_DAY, 15);
    cal.set(Calendar.MINUTE, 15);     
    cal.set(Calendar.SECOND, 00);     

Intent intent3 = new Intent(context, Notify.class);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0,intent3, 0);
alarmManager.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), pendingIntent); 
```

显现：

```
<activity android:name="Notify"></activity>
<receiver android:name="AlarmReceiver" >
            <intent-filter>
                <action android:name="com.example.AlarmReceiver" />
            </intent-filter> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T16:22:47.987

如果您只是尝试启动 Activity Notify.class，那么只需更改此行：

```
PendingIntent.getBroadcast 
```

到

```
PendingIntent.getActivity 
```

您还应该在清单中更改此行：

从：

```
<activity android:name="Notify"></activity> 
```

到

```
<activity android:name=".Notify"></activity> 
```

您还应该为此活动提供 android:name 和 android:label。

如果您尝试改用 getBroadcast，则需要更改此行，以便您的接收器获取广播，而不是启动具有未决意图的活动。为此，您将使用

```
Intent intent3 = new Intent(context, AlarmReceiver.class); 
```

代替

```
Intent intent3 = new Intent(context, Notify.class); 
```

您还想在您的意图3中添加一个操作，例如：

intent3.setAction("com.example.AlarmReceiver");

这样，在您的 AlarmReceiver 中，您可以过滤该意图并使用新意图执行操作，例如启动活动 Notify.class。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T16:28:47.210

你应该写这个

```
<receiver android:name="com.example.AlarmReceiver" android:enabled="true">
        <intent-filter>
            <action android:name="AlarmReceiver"/>
        </intent-filter>
</receiver> 
```

你已经切换了接收器的**android:name**和它的意图过滤器。您可以将**com.example.AlarmReceiver**替换为**.AlarmReceiver**

在清单中进行此更改后，您在广播接收器**com.example.AlarmReceiver**的 onReceive() 方法中编写的任何代码都将被执行。

您的代码将做的是为指定的日期时间设置警报管理器。那时它将触发一个动作名称为**AlarmReceiver**的意图。您的广播接收器在清单中，因此它将捕获广播并执行它的 onReceive() 方法。

如果您想启动一个活动，请在 onReceive() 中写入 context.startActivity(...)。

**编辑：**还将您的意图更改为：

```
Intent intent3 = new Intent("AlarmReceiver"); 
```

# css - CommandLink 样式中的 primefaces graphicsImage

> ID：14012154
> 
> 赞同：0
> 
> 时间：2012-12-23T15:23:12.030
> 
> 标签：css, jsf, primefaces

如何删除 PrimeFaces`p:graphicImage`组件周围的填充？

这是我的代码：

```
<h:commandLink action="distributer/distributersList.xhtml" ajax="false">
    <p:graphicImage  value="/resources/images/image.jpg"
                     style="align:center" width="250" height="327"/>
</h:commandLink> 
```

我尝试使用以下 CSS，它删除了边框，但图像周围的灰色填充仍然存在：

```
.ui-commandlink{
    border:none;
    padding:0px;
    border-spacing:0px;
} 
```

提前致谢

# python - 通过类（python）更改变量值

> ID：14012162
> 
> 赞同：1
> 
> 时间：2012-12-23T15:23:51.170
> 
> 标签：python, class, variables, global-variables

我不能改变一个类的值。

这是我的问题：

```
#!/usr/bin/env python

import pygtk
pygtk.require20()
import gtk

class MyApp(object):
    def __init__(self):
        self.pencere = gtk.Window(gtk.WINDOW_TOPLEVEL)
        self.pencere.connect("delete_event", gtk.main_quit)

        self.b_Up = gtk.Button("UP")
        self.b_Down = gtk.Button("DOWN")
        self.b_Up.connect("pressed", self.ToUp)
        self.b_Down.connect("pressed", self.ToDown)

        self.tablo = gtk.Table(2, 1, False)
        self.tablo.attach(self.b_Up , 0, 1, 0,1)
        self.tablo.attach(self.b_Down, 1, 2, 0, 1 )

        self.pencere.add(self.tablo)

        self.pencere.show_all()
        return

    def ToUp(self, penar  ):
        print "==========ClassUp======= \n" , var_a
        print "@ToUP : " , var_a
        ChangeUp()
        print var_a , "\n=========ClassEndUp========"

    def ToDown(self, penar):
        print "==========ClassDown======= \n", var_a
        print "@ToDown : ", var_a
        ChangeDown()
        print var_a , "\n========ClassEndDown========="

    def main(self):
        gtk.main()

def ChangeUp():
    print "Changing Up : ", var_a
    var_a=["90", "91", "92", "93", "94", "95", "96", "97", "98", "99" ]
    print var_a , "\n================="

def ChangeDown():
    print "Changing Down : " , var_a
    var_a=["0", "1", "2", "3", "4", "5", "6", "7", "8", "9" ]
    print var_a , "\n================="

var_a=["30", "31", "32", "33", "34", "35", "36", "37", "38", "39" ]

app = MyApp()
app.main() 
```

我想在任何地方更改 var_a 列表值当我单击一个按钮时；我收到一条错误消息：

```
==========ClassDown======= 
['30', '31', '32', '33', '34', '35', '36', '37', '38', '39']
@ToDown :  ['30', '31', '32', '33', '34', '35', '36', '37', '38', '39']
Changing Down : 
Traceback (most recent call last):
  File "aa.py", line 35, in ToDown
    ChangeDown()
  File "aa.py", line 48, in ChangeDown
    print "Changing Down : " , var_a
UnboundLocalError: local variable 'var_a' referenced before assignment 
```

我想通过单击更改 var_a 列表值。不仅在课堂上，无处不在。我尝试使用“全局”，但我不能:(（我收到一条错误消息）。

我怎么解决这个问题 ？

```
UnboundLocalError: local variable 'var_a' referenced before assignment 
```

我不太了解python，我是初学者。所以如果你写代码我会很高兴:) 非常感谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T15:24:52.107

您的方法定义了一个名为的新局部变量`var_a`，该变量隐藏了同名的全局变量。

要修复它，您可以在方法的开头添加一个全局声明：

```
def ChangeDown():
    global var_a
    print "Changing Down : " , var_a
    var_a=["0", "1", "2", "3", "4", "5", "6", "7", "8", "9" ]
    print var_a , "\n=================" 
```

但是，如果可能的话，我建议您不要使用全局变量。考虑改用实例变量。

# python - 两个速度/效率问题：'For x in list' vs 'for x in xrange(len(list))'，字符串匹配 re vs ==

> ID：14012167
> 
> 赞同：-3
> 
> 时间：2012-12-23T15:24:59.407
> 
> 标签：python

关于 Python 中速度/效率/最佳实践的两个问题。以下哪一项是“更好”的（更快、更少的内存密集型等）：

1.  ```
    for x in list:
        #do something to x 
    ```

    或者

    ```
    for x in xrange(len(list)):
        #do something to list[x] 
    ```

2.  ```
    for string in list_of_strings:
        for string2 in other_string_list:
            if string == string2:
                #do something 
    ```

    或者

    ```
    import re
    for string in list_of_strings:
        if re.match('%s'%(string),other_strings): #or re.search(etc)
             #do something 
    ```

不是很紧迫，我主要是好奇。我想我可以使用 timeit() 或其他什么方法获得某种原始数据，但我会欣赏更多的深度，而不仅仅是“这个比你的计算机上的那个快”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T15:31:15.290

你真的无法比较这些。

```
for x in mylist:
    # do something to x 
```

是通常的成语，但无论你做什么`x`都不会影响`mylist`（除非`x`是可变的）。如果您的目标是`mylist`在迭代期间进行修改，那么

```
for x in xrange(len(list)):
    #do something to list[x] 
```

几乎总是不好的形式。更好的方法是使用

```
for i, x in enumerate(mylist):
    # now you can work with x and/or change mylist[i] if you need to 
```

但通常，使用列表推导式或生成器表达式会更好：

```
newlist = [foo(item) for item in mylist if bar(item)] 
```

这一切都取决于您的用例。

至于你的第二个问题，使用正则表达式进行纯字符串相等比较是过大的。嵌套两个 for 循环也很糟糕：

```
for string in one_list:
    if string in other_list:
        # do something 
```

会好一点，但我很确定如果再次了解您的实际用例，那可以改进。

# file - Adobe Flex OpenWithDefaultApplication 影片

> ID：14012171
> 
> 赞同：0
> 
> 时间：2012-12-23T15:25:20.587
> 
> 标签：file, apache-flex, adobe

我正在开发一个 Adob​​e Air 应用程序，我希望能够使用默认应用程序启动电影。我正在尝试的代码是：

```
 var file:File = new File;
//currentMovie.ConfiguredPath = 'D:\\Movies\\TestMovie.avi'; 
                file.nativePath = currentMovie.ConfiguredPath;                  
                file.openWithDefaultApplication(); 
```

我也试过这个：

```
//currentMovie.ConfiguredPath = file://D:/Movies/TestMovie.avi'
                navigateToURL(newURLRequest(currentMovie.ConfiguredPath)); 
```

第一个选项什么都不做。没有应用程序打开，没有错误，什么都没有。第二个选项有效，但它会启动一个单独的窗口，将文件下载到本地用户的下载目录，然后打开文件（只要您单击“打开”）。这不完全是我所希望的行为。

# c++ - 二叉搜索树（BST）

> ID：14012173
> 
> 赞同：3
> 
> 时间：2012-12-23T15:26:00.243
> 
> 标签：c++, tree, binary-search-tree

大家好，我犯了逻辑错误，但我没有发现错误。

谢谢你 ：））

我的算法

```
#include <iostream>   //iostream

using namespace std;

struct node{

    struct node *left;
    struct node *right;
    int data;
};

void add(node *p,int sayi){

    if(p==NULL){
        p=new node();
        p->data=sayi;
        p->left=NULL;
        p->right=NULL;

    }
    else if(p->data>=sayi){
            add(p->left,sayi);  
    }
    else    {
            add(p->right,sayi);
    }

}

void postorder(node *p)
{

if(p!=NULL)

    {
        if(p->left!=NULL)
            postorder(p->left);
        if(p->right!=NULL)
            postorder(p->right);
        cout<< p->data<<endl;
    }
    else{
        cout<<"hata"<<endl;

    }
}

  void main(){

    struct node *k=NULL ;
    int sayi=0;

    while(sayi!=-1){
    cout<<"Bir sayi giriniz...";
    cin>>sayi;
    add(k,sayi);
    }
    postorder(k);

    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T15:35:16.653

你按价值传递`struct node *k`。每当您在函数中更改它（如 in `add`）时，它只会更改本地副本（在函数中），因此您会返回一个`NULL`指针。通过引用或指针传递它：

```
void add(node* &p,int sayi)
{
     ...
}

struct node *k = 0;
...
add(k); 
```

或者

```
void add(node** p,int sayi)
{
     ... 
}

struct node *k = 0;
...
add(&k); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T15:37:49.610

您应该有一个根节点到您的数据结构来跟踪。您需要将此根节点引用传递给您的`postorder()`和`add()`函数调用。这里`k`看起来是你的根节点。在外部声明`k`，以便可以在函数内部访问它`add()`。

```
#include <iostream>   //iostream

using namespace std;

struct node{

    struct node *left;
    struct node *right;
    int data;
};

struct node *k=NULL; //ROOT NODE

void add(node *p,int sayi){

    if(p==NULL){
        p=new node();
        p->data=sayi;
        p->left=NULL;
        p->right=NULL;
        if(k==NULL)
        k=p;  //When the first node is created, we assign it to root, i.e, k    
    }
    else if(p->data>=sayi){
            add(p->left,sayi);  
    }
    else    {
            add(p->right,sayi);
    }

}

void postorder(node *p)
{

if(p!=NULL)

    {
        if(p->left!=NULL)
            postorder(p->left);
        if(p->right!=NULL)
            postorder(p->right);
        cout<< p->data<<endl;
    }
    else{
        cout<<"hata"<<endl;

    }
}

  void main(){

    int sayi=0;

    while(sayi!=-1){
    cout<<"Bir sayi giriniz...";
    cin>>sayi;
    add(k,sayi);
    }
    postorder(k);

    system("pause");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-23T15:51:59.307

尝试将您的代码更改为：

```
#include <iostream>   //iostream

using namespace std;

struct node{

    struct node *left;
    struct node *right;
    int data;
};

node* add(node *p,int sayi){

    if(p==NULL){
        p=new node();
        p->data=sayi;
        p->left=NULL;
        p->right=NULL;
        return p;
    }
    else if(p->data>=sayi){
            p->left=add(p->left,sayi);  
    }
    else    {
            p->left=add(p->right,sayi);
    }
    return p;
}

void postorder(node *p)
{

if(p!=NULL)

    {
        if(p->left!=NULL)
            postorder(p->left);
        if(p->right!=NULL)
            postorder(p->right);
        cout<< p->data<<endl;
    }
    else{
        cout<<"hata"<<endl;

    }
}

int main(){

    struct node *k=NULL ;
    int sayi=0;

    while(sayi!=-1){
    cout<<"Bir sayi giriniz...";
    cin>>sayi;
    k=add(k,sayi);
    }
    postorder(k);
} 
```

# android - Android GestureDetector 向上/向下滑动与向左/向右滑动

> ID：14012175
> 
> 赞同：0
> 
> 时间：2012-12-23T15:26:16.430
> 
> 标签：android, android-gesture

我正在使用 GestureDetector 来更改视图。它可以工作，但是我该如何做才能使它仅在用户从左到右或从右到左而不是从下到上滑动时才发生变化...在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:49:29.037

您可以将手势处理规则设置为 X 值之间的最小绝对差和 Y 值之间的最大绝对差，您还可以添加规则以仅在 X 差大于 Y 差时获取手势。

# java - java生成和检查信用卡

> ID：14012179
> 
> 赞同：-4
> 
> 时间：2012-12-23T15:26:39.177
> 
> 标签：java

我需要在java中做一些东西来生成随机卡号并检查它是否有效。这是我们在 main 中必须拥有的代码

```
public enum CardType { VISA, MASTER, AMERICAN_EXPRESS, DISCOVERY }
public static void main(String[] args) {
    CardType type = CardType.VISA;
String cardNumber = generateCardNumber(type);
    System.out.println("Generated " + type + " number " + cardNumber + " validity check: "  + isValid(cardNumber));
    type = CardType.MASTER;
cardNumber = generateCardNumber(type);
System.out.println("Generated " + type + " number " + cardNumber + " validity check: " + isValid(cardNumber));
  } 
```

现在我需要使用这个方法。但是我怎样才能使它（CardType type = CardType.VISA;）工作？我需要返回什么？一点帮助将挽救我的生命:)

```
public static String generateCardNumber(CardType cardType){
Random rnd = new Random();
int counter=0;
while(counter<=16){
int generate = rnd.nextInt(9); 
counter++;
}
return ??;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T15:31:42.670

您可以在枚举中使用抽象方法并使用它来生成已知的有效卡号：

```
public enum CardType
{
    VISA {
        @Override
        public String generateNumber()
        {
            // whatever
        }
    },
    // Other card types

    public abstract String generateNumber();
} 
```

这样，您可以执行以下操作：

```
final String cardNumber = CardType.VISA.generateNumber(); 
```

并且不用费心检查生成的数字的有效性*，*因为您可以确保它在方法本身内是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T15:31:26.333

但是，不完全确定您的问题是什么。为了解决我在代码中看到的一个错误，我每次都会将 generate 分配给一个字符串。就像是;

```
public static String generateCardNumber(CardType cardType){
    Random rnd = new Random();
    int counter=0;
    StringBuffer stringBuffer = new StringBuffer();
    while(counter<=16){
        int generate = rnd.nextInt(9); 
        stringBuffer.append(generate);
        counter++;
    }
    return stringBuffer.toString();
} 
```

然后根据您的要求验证字符串是否为卡将需要另一个步骤。

# android - 如何从网格视图中获取值

> ID：14012181
> 
> 赞同：0
> 
> 时间：2012-12-23T15:27:24.497
> 
> 标签：android, gridview, android-activity, actionbarsherlock, fragment

我有一个带有editTexts 的gridview 作为其中的单个视图。我想保存每个editTexts中的值，因为当我切换到另一个片段或按下主页按钮时它们消失了，那么我该怎么做呢？

我需要一个包含所有视图的数组或数组列表吗？如果我这样做，我将如何获得意见？

fragment_score_red.xml

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".RedScorerFragment"
     >

<RelativeLayout 
    android:layout_width="match_parent"
    android:layout_height="wrap_content"

    >

    <TextView 
        android:id="@+id/gridLabel__red"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignParentLeft="true"
        android:text="@string/grid_label__red"
        android:background="@color/white"
        android:paddingTop="5dp"
        />
    <GridView
        android:id="@+id/gridViewRed"
        android:layout_width="wrap_content"
        android:layout_height="350dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/gridLabel__red"
        android:columnWidth="40dp"
        android:numColumns="3"
        android:verticalSpacing="10dp"
        android:horizontalSpacing="7dp"
        android:gravity="center"
        android:background="@color/white"

        >

    </GridView>

</RelativeLayout>

</ScrollView> 
```

RedScorerFragment.java

```
import com.actionbarsherlock.app.SherlockFragment;

import android.content.Context;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.GridView;

import android.view.View.OnTouchListener;
import android.view.inputmethod.InputMethodManager;

public class RedScorerFragment extends SherlockFragment {

    LayoutInflater infl;
    GridView mGrid;

    EditText mText;

    int R1C1, R1C2, R1C3;

    View tView;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        infl = inflater;
        //super.onCreate(savedInstanceState);
        View mView = inflater.inflate(R.layout.fragment_score_red, container, false);
        mGrid = (GridView) mView.findViewById(R.id.gridViewRed);

        tView = container.getRootView();

        final InputMethodManager imm = (InputMethodManager)getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(mView.getApplicationWindowToken(), 0);

        /*mGrid.setOnTouchListener(new OnTouchListener(){
            @Override
            public boolean onTouch(View v, MotionEvent event){
                if(event.getAction() == MotionEvent.ACTION_MOVE)
                    return true;
                return false;
            }
        });*/

        if(savedInstanceState != null)
        {
            R1C1 = savedInstanceState.getInt("R1C1");
            R1C2 = savedInstanceState.getInt("R1C2");
            R1C3 = savedInstanceState.getInt("R1C3");

            Log.d("savedd R1C1 ", String.valueOf(R1C1));
            Log.d("savedd R1C2 ", String.valueOf(R1C2));
            Log.d("savedd R1C3 ", String.valueOf(R1C3));
        }

        mGrid.setAdapter(new ImageAdapter(getActivity()));
        return mView;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState){
        super.onActivityCreated(savedInstanceState);

        if(savedInstanceState != null)
        {
            R1C1 = savedInstanceState.getInt("R1C1", 0);
            R1C2 = savedInstanceState.getInt("R1C2", 0);
            R1C3 = savedInstanceState.getInt("R1C3", 0);

            Log.v("saved R1C1 ", String.valueOf(R1C1));
            Log.v("saved R1C2 ", String.valueOf(R1C2));
            Log.v("saved R1C3 ", String.valueOf(R1C3));
        }

        //Log.v("saved R1C1 ", String.valueOf(R1C1));
        //Log.v("saved R1C2 ", String.valueOf(R1C2));
        //Log.v("saved R1C3 ", String.valueOf(R1C3));
    }

    @Override
    public void onSaveInstanceState(Bundle savedInstanceState){
        super.onSaveInstanceState(savedInstanceState);

        //for(int i=0;i<mGrid.getChildCount(); i++)
        Log.v("Saving", String.valueOf(mGrid.getAdapter().getItem(0)));

        //Log.v("Saving", mGrid.getItemAtPosition(2).toString());
        Integer temp = (Integer) mGrid.getAdapter().getItem(0);
        int temp2;
        if(temp != null)
        {
            temp2 = temp;
            Log.v("temp2", String.valueOf(temp2));
            savedInstanceState.putInt("R1C1", temp2);
        }
        else
            Log.v("temp2", "Temp was null");

        mText = (EditText)tView.findViewById(R.id.weightedRed__red);
        Log.d("weighted Red", mText.getText().toString() );

        EditText oText = (EditText)tView.findViewById(R.id.grid_item_edit_text_red);
        Log.d("red edit text", oText.getText().toString() );

        EditText lText = (EditText)tView.findViewById(R.id.grid_item_edit_text_blue);
        Log.d("blue edit text", lText.getText().toString() );

        //savedInstanceState.putInt("R1C2", (Integer) mGrid.getAdapter().getItem(4) );
        //savedInstanceState.putInt("R1C3", (Integer) mGrid.getAdapter().getItem(2) );

    }

    public class ImageAdapter extends BaseAdapter{

        Context context;

        public ImageAdapter(Context context)
        {
            this.context = context;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            View myView = convertView;
            //LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            if(convertView == null)
            {
                LayoutInflater li = infl;
                myView= li.inflate(R.layout.grid_items, null);

                EditText editText = (EditText) myView.findViewById(R.id.grid_item_edit_text_red);
            }

            return myView;
        }

        @Override
        public int getCount() {
            return 9;//only 9 
        }

        @Override
        public Object getItem(int position) {

            return null;
        }

        @Override
        public long getItemId(int position) {

            return 0;
        }

    }

} 
```

我尝试将 get Item 方法更改为

```
 @Override
        public Object getItem(int position) {

            return mGrid.getItemAtPosition(position);
        } 
```

但是现在当我按下主页按钮时它崩溃并且我得到一个堆栈溢出错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T15:49:03.293

我不确定这是否是绝对且优雅的解决方案，但您可以尝试为所有`TextView`'s 添加一个值容器（如数据集）（它可能是普通的`ArrayList`或类似的东西）。

然后`TextWatcher`在每个上设置一个`EditText`：

```
mEditText.addTextChangedListener(new TextWatcher() {...}); 
```

并在每次更改值时更改列表项的`EditText`值。

在您`onSaveInstanceState()`的方法中，您只需要从适配器中检索值。

剩下的我觉得很简单。

**编辑（只是为了清楚）**

您的适配器应该会遇到类似的事情：

```
public class MyAdapter extends BaseAdapter {
// All the fancy stuff
List<String> dataset;

    @Override
    public View getView(...) {
        //... othe code
        mEditText.addTextChangedListener(new MyTextWatcher(position));
    }

private class MyTextWatcher implements TextWatcher {

    int index;

    public MyTextWatcher(int index) {
        this.index = index;
    }

    @Override
    public void afterTextChanged(Editable s) {
        dataset.set(index, s.toString());
    }

 }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T16:00:00.980

除此之外`TextWatchers`，您可以简单地将所有 Editexts 添加到数组中，然后当您需要其中的文本时，您可以简单地循环遍历数组并调用`getText().toString();`所有它们。

```
public class ImageAdapter extends BaseAdapter{

    Context context;
    EditText[] etCollection = new EditText[getCount()];

    public ImageAdapter(Context context)
    {
        this.context = context;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View myView = convertView;
        //LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        if(convertView == null)
        {
            LayoutInflater li = infl;
            myView= li.inflate(R.layout.grid_items, null);

        }
        EditText editText = (EditText) myView.findViewById(R.id.grid_item_edit_text_red); 
        //^ moved to outside the null block
        etCollection[position] = editText;   
        return myView;
    } 
```

# linq - 使用 linq 获取 DataTable 列名，列为空时出错

> ID：14012182
> 
> 赞同：2
> 
> 时间：2012-12-23T15:27:25.557
> 
> 标签：linq, c#-4.0

我有一个包含 n 列的数据表，并且正在将其转换为 Pivot。

我已经有一段代码可以将其转换为 Pivot，参考：

[使用 LINQ 在 PIVOT 中添加每行总和](https://stackoverflow.com/questions/12995488/adding-sum-per-row-in-pivot-using-linq)

现在问题来了，其中有一列包含空值。

以下行因错误而失败

```
dtPivot.PrimaryKey = dtPivot.Columns.Cast<DataColumn>().ToArray();

Error : Column 'x' has null values in it. 
```

谁能帮帮我，如何处理这个...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:22:25.740

我会先看看究竟是什么导致了这个问题。

在行前加个断点，看看里面包含了哪些项目`dtPivot.Columns`（可以尝试使用`ToArray()`）。

是否存在或是否存在具有导致问题的`null`属性的项目？`null`您可以通过使用调试窗口中的手表来检查这一点，尝试将项目从`dtPivot.Columns`手动转换为`DataColumn`，并查看哪些引发错误（以及可能，为什么它们会引发错误）。

如果错误是因为其中的某些项目`dtPivot.Columns`是`null`，那么您可以尝试先使用过滤掉它们`Cast<object>().Where(o => o != null)`。如果错误是因为属性是`null`，那么看看是否没有其他可以将列转换为的内容，然后尝试过滤列（或填写缺失值，如果需要）。

# aspectj - 方面优先

> ID：14012183
> 
> 赞同：2
> 
> 时间：2012-12-23T15:27:36.677
> 
> 标签：aspectj

简短而简单的问题，但我没有在文档中找到答案。当方面在不同的 jar 中定义时（使用 aspectj 语法），是否可以声明方面之间的优先级？

# sql-server - 为什么 SQL Server 2008 R2 会生成故障转储文件“*.mdmp”

> ID：14012195
> 
> 赞同：2
> 
> 时间：2012-12-23T15:29:45.833
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

我的 SQL Server 2008 R2 有问题，它每隔一段时间就会生成故障转储文件，这些文件会占用`c:\`分区空间，它可能会超过 20GB`Microsoft SQL Server/MSSQL10_50.MSSQLSERVER/MSSQL/Log`

**编辑** ：部分日志文件

```
External dump process returned no errors.2012-12-23 17:14:39.96 spid16s    
ex_raise2:         Exception raised, major=52, minor=42, state=9, severity=22, attempting to create symptom dump

2012-12-23 17:14:39.96 spid16s     Using 'dbghelp.dll' version '4.0.5' 
```

请帮忙

# wordpress - 从WordPress中的插件覆盖主题功能

> ID：14012198
> 
> 赞同：0
> 
> 时间：2012-12-23T15:30:24.870
> 
> 标签：wordpress

是否可以从插件覆盖主题中的功能？我一直在努力寻找如何实现上述目标的示例。

如果有人能提供任何启示，那将非常有帮助。

编辑：添加一些代码

所以这是我的功能，它允许 woocommerce 中的购物车使用 ajax 进行更新：

```
add_filter('add_to_cart_fragments', 'woocommerce_header_add_to_cartplus_fragment', '1');

function woocommerce_header_add_to_cartplus_fragment( $fragments ) {
    global $woocommerce;
    $basket_icon = esc_attr($instance['basket_icon']);

    ob_start();

    ?>
    <a class="cartplus-contents" href="<?php echo $woocommerce->cart->get_cart_url(); ?>" onclick="javscript: return false;" title="<?php _e('View your shopping cart', 'woothemes'); ?>"><?php echo sprintf(_n('%d item', '%d items', $woocommerce->cart->cart_contents_count, 'woothemes'), $woocommerce->cart->cart_contents_count);?> - <?php echo $woocommerce->cart->get_cart_total(); ?></a>
    <?php

    $fragments['a.cartplus-contents'] = ob_get_clean();

    return $fragments;

} 
```

但是，一些主题也内置了类似的功能 - 在这些主题中，我的代码停止工作，这看起来很奇怪，因为我在插件中使用了上述代码两次（一个是上述代码的变体）并且它们一起工作得很好。这是内置于主题的代码：

```
add_filter('add_to_cart_fragments', 'woocommerce_cart_link');

function woocommerce_cart_link() {
    global $woocommerce;

    ob_start();

    ?>
    <a href="<?php echo $woocommerce->cart->get_cart_url(); ?>" title="<?php echo sprintf(_n('%d item', '%d items', $woocommerce->cart->cart_contents_count, 'woothemes'), $woocommerce->cart->cart_contents_count);?> <?php _e('in your shopping cart', 'woothemes'); ?>" class="cart-button ">
    <span class="label"><?php _e('My Basket:', 'woothemes'); ?></span>
    <?php echo $woocommerce->cart->get_cart_total();  ?>
    <span class="items"><?php echo sprintf(_n('%d item', '%d items', $woocommerce->cart->cart_contents_count, 'woothemes'), $woocommerce->cart->cart_contents_count); ?></span>
    </a>
    <?php

    $fragments['a.cart-button'] = ob_get_clean();

    return $fragments;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:50:01.313

除非该函数打算被覆盖，否则不会。这是基本的 PHP。你不能重新定义一个函数。如果你尝试，你会得到一个致命的错误。

WordPress的部分内容被写入被覆盖。看`/wp-includes/pluggable.php`。那里的每个函数都包含在`if( !function_exists(...) )`条件中。除非您的主题做同样的事情，并且某些功能也做同样的事情，否则您无法覆盖。

寻找可能对您有所帮助的过滤器。

查看您的代码，您应该能够解开它。只要确保足够晚地钩解钩即可。这不是一个好的解决方案，因为您正在破坏主题功能并且还必须知道主题正在使用的所有挂钩函数的名称。

有没有什么东西`$fragments`可以用来有条件地运行你的代码，剩下的就不用管了。`$_POST``$_GET`

# version - 如何在 Vala 中获取程序版本？

> ID：14012203
> 
> 赞同：1
> 
> 时间：2012-12-23T15:31:12.997
> 
> 标签：version, vala

我开始学习 Vala，只写了几行代码，我就遇到了我的第一个问题。这应该有点简单，但不知何故我在 Google 上找不到任何东西（“vala 版本号”或“vala 获取版本号”或“如何在 vala 中获取程序版本”没有带来任何有用的信息）。

Vala 的在线文档也没有提供任何有用的信息。在整个网络中，我找到了有关如何获取 Vala 版本或 GTK 版本或类似内容的内容。

*编辑过的东西*

我想得到什么：正在运行的程序的版本。它应该查询自己以获取它自己的版本号。我可以在 Anjuta IDE 中为项目设置版本号，因此我希望能够以某种方式获取该版本信息。因为我*可以获得*应用程序的名称（通过 GLib.Environment），所以我**也应该**能够获得版本信息。

*编辑结束*

有人可以这么好心并帮助我吗？看来我的 GoogleFu 今天不在我身边。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T00:12:33.233

如果您使用自动工具，生成的 config.h 标头将包含您的包版本。然后可以通过自定义 config.vapi 绑定从 Vala 使用这些符号。您可以查看[sampala](https://github.com/tadeboro/Sampala/)，它显示了诀窍。

# c++ - 将多维数组复制到向量，反之亦然

> ID：14012212
> 
> 赞同：5
> 
> 时间：2012-12-23T15:32:06.367
> 
> 标签：c++, arrays, vector

```
int dArray[1600][32];
vector < vector <int> > dVector;

n= 1600; k = 32
dVector.resize(n);
for(int i = 0 ; i < n ; ++i){
dVector[i].resize(k);
}

std::copy ( dArray, dArray + tmp_c, std::back_inserter (dVector)); 
```

如何使用 std::copy （或任何其他函数）将多维数组复制到向量，反之亦然？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T16:14:47.690

您不能直接执行此操作，但需要一个中间步骤。根据您的要求，这样的事情`vector_wrapper`可能对您有用

```
#include <vector>

template<typename T, int N> struct vector_wrapper {
    vector_wrapper(T (&a)[N]) {
        std::copy(a, a + N, std::back_inserter(v));
    }

    std::vector<T> v;
};

int dArray[1600][32];
std::vector<vector_wrapper<int, 32> > dVector;

int main(int argc, char **argv)
{
    std::copy(dArray, dArray + 1600, std::back_inserter(dVector));
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T16:14:04.723

您基本上需要编写自己的`output iterator`. 这有点难看，但这样的事情应该可以解决问题：

```
#include <vector>
#include <algorithm>
#include <iostream>
#include <iterator>

template <typename ContainerOfContainer, typename Container, std::size_t n>
struct nested_back_inserter : public std::iterator<std::output_iterator_tag, void, 
                                                   void, void, void>
{
   std::size_t k;
   std::size_t current_;
   ContainerOfContainer* container_;

   explicit nested_back_inserter(ContainerOfContainer& cont)
     : k(0), current_(0), container_(&cont)
   { }

   nested_back_inserter& operator=(typename Container::value_type value)
   {
       if(k == n) {
           ++current_;
           k = 0;
       }
       (*container_)[current_].push_back(value);
       ++k;
       return *this;
   }

   nested_back_inserter& operator*()
   {
       return *this;
   } 

   nested_back_inserter& operator++()
   {
       return *this;
   }

   nested_back_inserter& operator++(int)
   {
       return *this;
   }
};

int main()
{
    int arr[3][3] = {{1,2,3}, {4,5,6}, {7,8,9}};
    std::vector<std::vector<int>> v;

    for(unsigned i = 0; i < 3; ++i) {
        std::vector<int> vi;
        v.push_back(vi);
    }

    typedef std::vector<std::vector<int>> nested;
    typedef std::vector<int> cont;
    std::copy(arr[0], arr[2] + 3, nested_back_inserter<nested, cont, 3>(v));

    for(auto it = v.begin(); it != v.end(); ++it) {
        std::cout << "{";
        for(auto it2 = it->begin(); it2 != it->end(); ++it2) {
                std::cout << *it2 << ", ";
        }
        std::cout << "}\n";
    }

    return 0;
} 
```

请特别注意`std::copy(arr[0], arr[2] + 3, ...);`.

由于疲倦，我对由此可能发生的任何错误或其他异常不承担任何责任。但是，它应该让您了解如何实现这样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T16:00:08.733

您将必须编写自己的迭代器，该迭代器在取消引用时生成一个辅助对象，该对象在分配时将一维数组复制到一个向量中`std::copy`（并且为了复制到相反的方向，另一个迭代器执行相反的操作）。基本上，看看是如何`back_insert_iterator`实现的，并且做的几乎一样，只是代替`push_back`call `std::copy`。

个人认为不值得。我只是`for`对外部副本使用循环。您已经有一个，只需添加`std::copy`到它的主体，就在`resize`.

请注意，如果您`resize`事先准备好向量，则不需要`std::back_inserter`，因为它将分配更多存储空间。改为使用`begin`。

# html - 将带有预定义代码的列添加到第一个和最后一个单元格

> ID：14012213
> 
> 赞同：0
> 
> 时间：2012-12-23T15:32:07.160
> 
> 标签：html, html-table, cell

我目前正在使用一个表格，现在想知道是否可以在第一个和最后一个单元格中添加带有预定义代码的列。

这是我当前的表格代码：

```
<div>
<table id="myTable" class="tablesorter">
<colgroup>
<col class="nam">
<col class="dastgah">
<col class="inform">
<col class="sherkat">
<col class="reviews">
<col class="genre">
<col class="dastgahedigar">
<col class="saal">
<col class="didam">
<col class="seriesid">
</colgroup>        

<thead>
<tr>
<th>Nam</th>
<th>Dastgah</th>
<th>Info</th>
<th>Sherkat</th>
<th>R</th>
<th>Type</th>
<th>Dastgahe Digar</th>
<th>Saal</th>
<th>Baazi<br>Kardam<br>Didam</th>
<th>Series<br>ID</th>
</tr>
</thead>

<tbody>

<tr class="">
<td><a>23 Matches</a></td>
<td><a>Bally Astrocade TAPE</a></td>
<td><a>Tape from the Bob Fabris Collection</a></td>
<td><a>Rich Tietjens</a></td>
<td><a></a></td>
<td><a></a></td>
<td><a></a></td>
<td><a>1980</a></td>
<td><a></a></td>
<td><a></a></td>
</tr> 
```

我想在表的开头添加一列，在表的末尾添加一列，如下所示：

```
<tr class="">
<td><img src="test.png" width="130" height="180" align="middle" ></td>
<td><a>23 Matches</a></td>
<td><a>Bally Astrocade TAPE</a></td>
<td><a>Tape from the Bob Fabris Collection</a></td>
<td><a>Rich Tietjens</a></td>
<td><a></a></td>
<td><a></a></td>
<td><a></a></td>
<td><a>1980</a></td>
<td><a></a></td>
<td><a></a></td>
<td><video src="test.mp4"  height="181" width="199" controls></video></td>

</tr> 
```

我想用预定义的代码添加第一列和最后一列，或者至少将第一个和最后一个单元格的代码复制到每一行。

目前我正在用记事本手动完成。我想添加这些行，然后再对它们进行处理，例如稍后将更改 img 源。我认为唯一的 JavaScript 是用于列出升序和降序列的 jQuery 脚本。

我部分找到了 jQuery 代码的解决方案：

```
$(document).ready(function(){
    $('table').find('tr').each(function(){
        $(this).find('td').eq(0).before('<td><img src="Dastgahaye_Nasle_3-Dateien/Aksha/C64/Cover/Cover_Nadare.png" width="130" height="180" align="middle"></td>');
    });
 }); 
```

有没有什么方法可以在创建列之后保存代码，这样每次加载页面时就不需要生成列？我尝试将其保存在 Firefox 中，但这样做会生成列，但会删除文件夹路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:37:36.470

有很多方法可以做到，但您必须使用编程或脚本语言来做到这一点。

您可以使用[jQuery](http://jquery.com/)轻松实现，看看这个答案：[在 jQuery 中添加表格行](https://stackoverflow.com/questions/171027/add-table-row-in-jquery)，或使用[PHP](http://davidwalsh.name/html-mysql-php)（[直接或使用类似](http://davidwalsh.name/html-mysql-php)[codeigniter](http://ellislab.com/codeigniter/user-guide/libraries/table.html)的框架）

**编辑**

要动态构建页面（更改您想要的任何内容），只需更改脚本或您从中获取它的源（mysql、ajax 调用等）。

Try and pick a jQuery plugin which will make your life easier, you can see a [list of a couple of nice plugins here](http://webdesignledger.com/resources/12-useful-jquery-plugins-for-working-with-tables).

# php - MediaWiki：在皮肤中显示用户名

> ID：14012217
> 
> 赞同：-4
> 
> 时间：2012-12-23T15:32:16.867
> 
> 标签：php, css, mediawiki

对于任何熟悉 MediaWiki 的人来说，这应该是相当简单的，但因为我是我，所以这让我很难过。

我正在开发皮肤，我需要在顶部栏中显示当前登录的用户名 - 为简单起见，我们假设使用纯文本，并通过 CSS 进行更改。

一开始我是打算用个人工具栏中自动生成的，但是由于皮肤中的生成线是

```
<?php $this->renderNavigation( 'PERSONAL' ); ?> 
```

，与此密不可分。我查看了 User.php 并找到了它的生成行：

```
public function getUserPage() {
    return Title::makeTitle( NS_USER, $this->getName() );
} 
```

所以，我想我可能能够以某种方式使用这个函数，但我对 PHP 知之甚少，并且不确定如何使用。

编辑：这似乎用于个人工具线本身的生成，但同样，我不确定如何调整它。

```
 $personal_urls['userpage'] = array(
            'text' => $this->username,
            'href' => &$this->userpageUrlDetails['href'],
            'class' => $this->userpageUrlDetails['exists'] ? false : 'new',
            'active' => ( $this->userpageUrlDetails['href'] == $pageurl )
        ); 
```

我可以将它复制到一个单独的函数中，并制作如下内容吗？

```
<?php $this->renderNavigation( 'USERNAME' ); ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T01:17:17.860

您可以使用以下代码：

```
<?php echo htmlspecialchars($this->getSkin()->getUser()->getName()); ?> 
```

或者，因为 User 类有一个 __ToString() 魔术方法：

```
<?php echo htmlspecialchars($this->getSkin()->getUser()); ?> 
```

* * *

资料来源：

*   MediaWiki 代码文档中[的 SkinTemplate 类](http://svn.wikimedia.org/doc/classSkinTemplate.html)
*   同一文档中[的 User 类](http://svn.wikimedia.org/doc/classUser.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T15:37:53.360

当前用户

[http://www.mediawiki.org/wiki/Extension:CurrentUsers](http://www.mediawiki.org/wiki/Extension:CurrentUsers)

获取用户名

[http://www.mediawiki.org/wiki/Extension:GetUserName](http://www.mediawiki.org/wiki/Extension:GetUserName)

根据您的需要修改这些扩展

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T18:36:02.547

如果您确实只是希望将用户名插入到皮肤 HTML 中的某个位置，那么应该这样做：

```
<?php echo htmlspecialchars( $this->username ); ?> 
```

# python - Python装饰器将方法限制为特定类？

> ID：14012218
> 
> 赞同：0
> 
> 时间：2012-12-23T15:32:17.957
> 
> 标签：python, django, django-models

我有一个由少数 Django 项目/站点共享的大型 Django 应用程序库。在每个项目/站点中，有一个选项可以定义一个“混入”类，该类将被混入库内基类之一（许多模型的子类）。

对于这个例子，假设库内基类是`PermalinkBase`，混合类是`ProjectPermalinkBaseMixIn`。

因为有这么多模型的子类`PermalinkBase`，并不是所有定义的方法/属性`ProjectPermalinkBaseMixIn`都会被所有`PermalinkBase`的子类使用。

我想编写一个可以应用于其中的方法/属性的装饰器，以便在从未经批准的类访问它们`ProjectPermalinkBaseMixIn`时限制它们运行（或至少返回）。`None`

这是我现在的做法：

```
class ProjectPermalinkBaseMixIn(object):
    """
    Project-specific Mix-In Class to `apps.base.models.PermalinkBase`
    """

    def is_video_in_season(self, season):
        # Ensure this only runs if it is being called from the video model
        if self.__class__.__name__ != 'Video':
            to_return = None
        else:
            videos_in_season = season.videos_in_this_season.all()
            if self in list(videos_in_season):
                to_return = True
            else:
                to_return False

        return to_return 
```

这是我想做的事情：

```
class ProjectPermalinkBaseMixIn(object):
    """
    Project-specific Mix-In Class to `apps.base.models.PermalinkBase`
    """

    @limit_to_model('Video')
    def is_video_in_season(self, season):
        videos_in_season = season.videos_in_this_season.all()
        if self in list(videos_in_season):
            to_return = True
        else:
            to_return = False

        return to_return 
```

装饰器可以做到这一点吗？[这个答案](https://stackoverflow.com/questions/739654/understanding-python-decorators#answer-739665)帮助我更好地理解装饰器，但我不知道如何修改它来解决我上面列出的问题。

装饰器是这项工作的正确工具吗？如果是这样，我将如何编写`limit_to_model`装饰器函数？如果没有，解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T18:58:32.870

正在查看您的问题，我认为这可能是实现您想要做的事情的一种过于复杂的方式。但是我写了这段代码：

```
def disallow_class(*klass_names):
    def function_handler(fn):
        def decorated(self, *args, **kwargs):
            if self.__class__.__name__ in klass_names:
                print "access denied to class: %s" % self.__class__.__name__
                return None
            return fn(self, *args, **kwargs)
        return decorated
    return function_handler

class MainClass(object):

    @disallow_class('DisallowedClass', 'AnotherDisallowedClass')
    def my_method(self, *args, **kwargs):
        print "my_method running!! %s" % self

class DisallowedClass(MainClass): pass

class AnotherDisallowedClass(MainClass): pass

class AllowedClass(MainClass): pass

if __name__ == "__main__":
    x = DisallowedClass()
    y = AnotherDisallowedClass()
    z = AllowedClass()
    x.my_method()
    y.my_method()
    z.my_method() 
```

如果您在命令行上运行这段代码，输出将类似于：

```
access denied to class: DisallowedClass
access denied to class: AnotherDisallowedClass
my_method running!! <__main__.AllowedClass object at 0x7f2b7105ad50> 
```

问候

# magento - Magento - 如何删除导入的 csv 文件

> ID：14012220
> 
> 赞同：1
> 
> 时间：2012-12-23T15:32:33.153
> 
> 标签：magento, csv

你能解释一下已经导入的 csv 文件存储在哪里以及如何删除旧文件？我想这不会影响数据库。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T15:59:23.117

您可以通过 ssh 删除它们。它们位于`var/imports`文件夹下。从你的磁文件夹的根目录执行`rm var/imports/*.csv`

# html5-canvas - HTML5 Canvas 上的 Gamma 调整？

> ID：14012221
> 
> 赞同：0
> 
> 时间：2012-12-23T15:32:43.490
> 
> 标签：html5-canvas

我找到了一种增加伽玛的方法，但没有办法减少它！[本文](http://thecryptmag.com/Online/57/imgproc_6.html)陈述了增加伽马的公式。该公式适用于增加伽玛，但不适用于减少，即使我将减少应用于画布的新实例。我尝试重新绘制画布并使用负值进行伽马计算，但我没有找回我原来的画布。

```
//For increasing, I tried
gamma = 0.5;
gammacorrection = 1/gamma;
r = Math.pow(255 * (r / 255), gammacorrection);
g = ...
b = ...

//For decreasing
gamma = -0.5;
gammacorrection = 1/gamma;
r = Math.pow(255 * (r / 255), gammacorrection);
g = ...
b = ... 
```

第一部分工作。第二没有。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T15:41:56.880

没有负伽马校正。您应该保存原始值并在进行 gamma 更改时使用它们，并将 gamma 设置`1.0`为恢复为原始值。

另请注意，您的运算顺序错误（指数在乘法之前）。

```
var originals = { r: r, g: g, b: b };

// increase
gamma = 0.5;
gammacorrection = 1/gamma;
r = 255 * Math.pow(( originals.r / 255), gammacorrection);
g = ...
b = ...

// revert to original
gamma = 1;
gammacorrection = 1/gamma;
r = 255 * Math.pow(( originals.r / 255), gammacorrection);
g = ...
b = ... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-01-03T20:56:43.580

为了完整起见，这是一段工作代码

```
async function adjustGamma(gamma) {
    const gammaCorrection = 1 / gamma;
    const canvas = document.getElementById('canvasOutput');
    const ctx = canvas.getContext('2d');
    const imageData = ctx.getImageData(0.0, 0.0, canvas.width, canvas.height);
    const data = imageData.data;
    for (var i = 0; i < data.length; i += 4) {
        data[i] = 255 * Math.pow((data[i] / 255), gammaCorrection);
        data[i+1] = 255 * Math.pow((data[i+1] / 255), gammaCorrection);
        data[i+2] = 255 * Math.pow((data[i+2] / 255), gammaCorrection);
    }
    ctx.putImageData(imageData, 0, 0);
} 
```

这里该函数根据 OP 在 Canvas 上链接的文章中的公式调整 gamma，id 为“canvasOutput”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T16:42:05.517

伽玛没有负值。理想情况下，该值将介于`0.01`和之间`7.99`。因此，通过使用图像的原始值创建一个新的画布实例，然后实例化它，或者通过使用原始图像创建一个像素池并恢复到它，应该可以将伽玛恢复到原始值。

我写了一个脚本，我将如何构建减少伽马的算法。

```
var gamma = 0.5;
var gammaCorrection = 1 / gamma;

var canvas = document.getElementById('canvas');
var ctx = canvas.getContext('2d');
var imageData = ctx.getImageData(0.0, canvas.width, canvas.height);   

function GetPixelColor(x, y) {   
    var index = parseInt(x + canvas.width * y) * 4;
    var rgb = {
        r : imageData.data[index + 0],
        g : imageData.data[index + 1],
        b : imageData.data[index + 2]
    };

    return rgb;
}

function SetPixelColor(x, y, color) {
    var index = parseInt(x + this.width * y) * 4;
    var data = imageData.data;

    data[index+0] = color.r;
    data[index+1] = color.g;
    data[index+2] = color.b;
};

for (y = 0; y < canvas.height; y++) {
     for (x = 0; x < canvas.width; x++) {
         var color = GetPixelColor(x, y)
         var newRed   = Math.pow(255 * (color.r / 255), gammaCorrection);
         var newGreen = Math.pow(255 * (color.g / 255), gammaCorrection);
         var newBlue  = Math.pow(255 * (color.b / 255), gammaCorrection);

         var color = {
             r: newRed,
             g: newGreen,
             b: newBlue
         }

         SetPixelColor(x, y, color);
     }
} 
```

我不知道应用程序应该如何调整伽玛值，但我想它是用值调整器完成的。如果是这样，您应该动态调整伽马值，给出最小和最大范围。我没有测试代码，这不是我的范围，但希望这个想法很清楚。

**编辑：** 要了解伽玛校正的原理，首先要如何定义伽玛。

伽玛是改变像素输入的显示器特性。Gamma 校正是反转线性 RGB 值的过程，以使最终输出保持线性。例如，如果您计算出的对象的光强度为 0.5，则不会将结果存储为像素中的 0.5。将其存储为`pow(0.5, 1.0/2.2) = 0.73`. 当您将 0.73 发送到监视器时，它将对值应用伽马并产生`pow(0.73, 2.2) = 0.5`，这就是您想要的。为此，您应用逆伽玛函数。

`o=pow(i, 1.0/gamma)`

在哪里

`o`是输出值。

`i`是输入值。

`gamma`是显示器使用的伽玛值。

因此，伽马校正只不过是输入值上升到伽马倒数的幂。因此，要将 gamma 恢复到原始值，请在应用 gamma 校正之前应用公式。

![在此处输入图像描述](../Images/eb1e4d08d4c5737c228efecfb4a25a80.png) ![在此处输入图像描述](../Images/45284ffcebf8065495c4e56b43d42916.png)

蓝线表示在将像素发送到显示器之前需要应用到像素的逆伽马曲线。当您的显示器将其伽马曲线（红线）应用于像素时，结果是一条线性线（绿线），代表您预期的 RGB 像素值。

# java - Java中的“找不到符号”错误

> ID：14012224
> 
> 赞同：2
> 
> 时间：2012-12-23T15:33:10.900
> 
> 标签：java, symbols, jcreator

我已经编程了几天，我正在使用 Deitel 的如何编程。

在这种情况下，应用程序类 GradeBookTest 旨在创建和使用 GradeBook 类的对象，但每次我尝试运行 GradeBookTest 时都会出现找不到符号错误。我知道这可能很愚蠢，但我一直在寻找没有成功的解决方案。

GradeBook.java：

```
public class GradeBook
{
    public void displayMessage();
    {
        System.out.println("Welcome to the Grade book!")
    }
} 
```

GradeBookTest.java：

```
public class GradeBookTest 
{
    public static void main(String[] args) 
    {
        GradeBook myGradeBook = new GradeBook();

        myGradeBook.displayMessage();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:37:14.610

我做了一些对你有用的小改动

```
class GradeBook {
    public void displayMessage() { // removed semi colon from your code
        System.out.println("Welcome to the Grade book!"); // added semi colon to your code
    }
}

public class GradeBookTest {

    public static void main(String[] args) {

        GradeBook myGradeBook = new GradeBook();

        myGradeBook.displayMessage();
    }
} 
```

**输出**

```
Welcome to the Grade book! 
```

# validation - 行动阶段的 JSF 验证

> ID：14012225
> 
> 赞同：12
> 
> 时间：2012-12-23T15:33:14.580
> 
> 标签：validation, jsf

我们有一个基于 JSF 的 Web 应用程序，它将输入表单数据提交给*Web 服务*，然后显示*Web 服务*提供的响应。

它是验证用户输入的输入数据的*Web 服务。*我不确定我们如何使用`JSF validation`这里。据我了解，JSF 会验证视图中的各个组件。但是每次都发出一个 Web 服务请求将是非常昂贵的操作。

相反，当用户提交表单时，我们会跳过所有验证，在 action 方法中发出 Web 服务请求。根据来自 Web 服务的响应，我们能否以编程方式判断特定 UI 组件无效？

您能否就此提出您的建议？

**环境：-**

```
JSF 2.0
WebSphere Application Server 8.5 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-23T16:39:40.383

> *根据来自 Web 服务的响应，我们能否以编程方式判断特定 UI 组件无效？*

是的，你可以通过调用[`UIInput#setValid()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html#setValid%28boolean%29)，传递来做到这一点`false`。这是完整的部分：

```
FacesContext context = FacesContext.getCurrentInstance();
UIInput input = (UIInput) context.getViewRoot().findComponent("form:input");
input.setValid(false);
context.addMessage(input.getClientId(context), message);
context.validationFailed(); 
```

顺便说一下，`FacesContext#validationFailed()`不需要在每个输入的基础上调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T16:25:56.057

查看[本教程](http://courses.coreservlets.com/Course-Materials/pdf/jsf/jsf2/JSF2-Validation.pdf)- “手动验证”部分。

这可能是你想要完成的。

**手动验证**

*   使用 bean 的字符串属性（使用 try/catch 块来处理非法数据）
*   在 setter 方法和/或动作控制器中进行验证
*   返回 null 以重新显示表单
*   创建自定义错误消息并存储在 FacesMessage 中
*   使用 h:messages 显示错误消息列表（如果没有消息，则不输出任何内容）

例如在 bean 中：

```
public void setBidAmount(String bidAmount) {
    this.bidAmount = bidAmount;
    try {
        numericBidAmount = Double.parseDouble(bidAmount);
    } catch(NumberFormatException nfe) {}
} 
```

并在行动方法：

```
public String doBid() {
    FacesContext context = FacesContext.getCurrentInstance();
    if (getNumericBidAmount() <= 0.10) {
        context.addMessage(null, 
        new FacesMessage("Bid amount must be at least $0.10."));
    }
    ...
    if (context.getMessageList().size() > 0) {
        return(null);
    } else {
        doBusinessLogicForValidData();
        return("show-bid1");
    }
} 
```

# c# - 控制具有整数的事件每秒发生的次数不超过 N 次

> ID：14012226
> 
> 赞同：0
> 
> 时间：2012-12-23T15:33:20.017
> 
> 标签：c#

我的系统生成带有整数的事件。从 1 到 10 000 总共有大约 10 000 个事件。每次我收到带有数字的新事件时，我都需要检查在最后一秒内我已经收到了多少次带有这样数字的事件：

*   如果我在最后一秒收到此事件超过 ~3-10 次，我需要忽略它
*   否则我需要处理它。

所以我只需要控制和忽略具有相同数量的事件的“洪水”。

有两个要求：

*   洪水控制的开销应该是最小的，因为它在高频交易中使用
*   同时我不需要“精确”控制，我只需要“大致”控制洪水。即可以在每秒 3 到 10 个事件之间停止接收事件。

所以我的建议是：

*   创建 int[10 000] 数组
*   每秒将该数组中的所有项目刷新为0（数组项目的刷新操作是原子的，我们也可以毫无问题地迭代数组并且没有锁定，因为我们不插入或删除项目，但是可能有人可以推荐特殊功能“零”数组，考虑到我可以同时从另一个线程读取数组）
*   每次收到新事件时，我们 a)`Interlocked.Increment`数组中的对应项，并且只有当结果小于阈值 (~3) 时，我们才会处理它。

因此，防洪只是一项`Intrerlocked.Increment`操作和一项比较操作。

你觉得有什么好推荐的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T16:23:49.640

您的方法的一个问题是，如果您每秒清除一次计数器，则可能是您在第二秒结束之前遇到了洪水，但是由于您刚刚清除了它，因此您将继续接受新事件。
对您来说可能没问题，因为您只擅长近似值。

另一种方法可能是拥有一组时间戳队列。当一个新事件出现时 - 您从数组中获取相关队列，并从其头部清除过去一秒以上发生的所有时间戳。
您检查队列的大小，如果它大于阈值，您什么也不做 - 否则您将新的事件时间戳输入队列并处理它。
我意识到这种方法可能比仅仅增加整数要慢，但它会更准确。

我想您可以运行一些基准测试并了解它有多慢以及它是否符合您的需求。

# excel - 下拉列表中的默认值

> ID：14012234
> 
> 赞同：0
> 
> 时间：2012-12-23T15:34:11.437
> 
> 标签：excel, excel-2003, vba

我想知道是否有人可以帮助我。

我正在使用下面的代码，在执行的许多操作中，当在 Excel 电子表格中创建新记录时，会自动用日期填充“A”列，用文本值“No”填充“AS”列。

```
Option Explicit
Public preValue As Variant
Private Sub Worksheet_Change(ByVal Target As Range)

    Dim Cell As Range, res As Variant
    Dim rCell As Range
    Dim Rng1 As Range
    Dim Rng2 As Range
    Dim Rng3 As Range

    Application.EnableCancelKey = xlDisabled
    'Sheets("Input").Protect "handsoff", UserInterFaceOnly:=True, AllowFiltering:=True, AllowFormattingColumns:=True

    If Target.Column = 3 Then
        If Target = "No" Then MsgBox "Please remember to make the same change to all rows for " & Target.Offset(0, -1).Value & " and delete any future forecasts"
    End If

       If Target.Cells.Count > 1 Then Exit Sub
    On Error Resume Next

    If Not Intersect(Target, Range("B5:AD400", "AF5:AQ400")) Is Nothing Then
        If Target.Value <> preValue And Target.Value <> "" Then
            Application.EnableEvents = False
           With Rows(Target.Row)
                    .Range("A1").Value = Date
                    .Range("AS1").Value = "No"
        End With
            Application.EnableEvents = True
            Target.Interior.ColorIndex = 35
        End If
    End If

    On Error GoTo 0
    If Target.Column = 45 Then
                If Target.Value = "Yes" Then
                Set Rng1 = Application.Union(Cells(Target.Row, "B").Resize(, 19), Cells(Target.Row, "R"))
                Rng1.Interior.ColorIndex = xlNone
                Set Rng2 = Application.Union(Cells(Target.Row, "S").Resize(, 12), Cells(Target.Row, "AD"))
                Rng2.Interior.ColorIndex = 37
                Set Rng3 = Application.Union(Cells(Target.Row, "AF").Resize(, 12), Cells(Target.Row, "AQ"))
                Rng3.Interior.ColorIndex = 42
                End If
    End If

    If Not Intersect(Target, Range("J7:J400")) Is Nothing Then
        Set Cell = Worksheets("Lists").Range("B2:C23")
        res = Application.VLookup(Target, Cell, 2, False)
    If IsError(res) Then
        Range("K" & Target.Row).Value = ""
    Else
        Range("K" & Target.Row).Value = res
    End If
    End If

End Sub 
```

如果可能的话，我想做的是当日期插入“A”列时，我想在“C”列的同一行中插入文本值“Select”。该值取自我在下拉菜单中的第一个值，设置在名为“列表”的工作表上，命名范围为“RDStaff”。

有人可以告诉我如何更改功能，以便在“A”列填充日期后，我列表中的第一个值，即“选择”会自动填充到“C”列中？

非常感谢和亲切的问候

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:46:11.627

目前尚不清楚 C 列中的哪个单元格是您使用验证列表的确切位置，但如果您将下面的代码添加到您的 with 语句中，它应该可以工作，当然，调整到适当的下拉单元格。

`.Range("C1").Value = Sheets(1).Range("C10").Value`

现在，这假设您的下拉列表，基于您的验证位于单元格 C10 中工作簿的第一张表（按索引）。您需要调整这些以匹配您的数据/工作簿结构。

关键是您不会对值进行硬编码。您从下拉列表位置引用该值。

根据您的评论，这是一个将验证列表添加到您的代码中的代码片段。

```
With Rows(Target.Row)

    '... your existing code
    With Range("C1").Validation
      .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:=xlBetween,  Formula1:=Lists!RDStaff ' you may need to make this named range global for it to work on another sheet in this context
      .IgnoreBlank = True
      .InCellDropdown = True
    End With

End WIth 
```

# python - Pandas read_csv 并删除夏令时

> ID：14012235
> 
> 赞同：2
> 
> 时间：2012-12-23T15:34:17.273
> 
> 标签：python, pandas, python-dateutil

我有一个 312.5MB 的 csv 文件，其中包含从 2003 年 7 月 27 日至今的 EURUSD 1 分钟 OHLC 数据，但是日期都针对夏令时进行了调整，这意味着我得到了重复和空白。

鉴于这是一个如此大的文件，默认日期解析器太慢了，所以我这样做了：

```
tizo = dateutil.tz.tzfile('/usr/share/zoneinfo/GB')
def date_parse_1min(s):
    return datetime(int(s[6:10]), 
                    int(s[3:5]), 
                    int(s[0:2]), 
                    int(s[11:13]),
                    int(s[14:16]),tzinfo=tizo)

df = read_csv("EURUSD_1m_clean_w_header.csv",index_col=0,parse_dates=True, date_parser=date_parse_1min)

#verify that it's got the tz right:
df.index
Exception AttributeError: "'NoneType' object has no attribute 'toordinal'" in 'pandas.tslib._localize_tso' ignored
Exception AttributeError: "'NoneType' object has no attribute 'toordinal'" in 'pandas.tslib._localize_tso' ignored
<class 'pandas.tseries.index.DatetimeIndex'>
[2003-07-26 23:00:00, ..., 2012-12-15 23:59:00]
Length: 4938660, Freq: None, Timezone: tzfile('/usr/share/zoneinfo/GB') 
```

不知道为什么那里有属性错误。

```
df.index.get_duplicates()
<class 'pandas.tseries.index.DatetimeIndex'>
[2003-10-26 01:00:00, ..., 2012-10-28 01:59:00]
Length: 600, Freq: None, Timezone: None
df1 = df.tz_convert('GMT')
df1.index.get_duplicates()
<class 'pandas.tseries.index.DatetimeIndex'>
[2003-10-26 01:00:00, ..., 2012-10-28 01:59:00]
Length: 600, Freq: None, Timezone: None 
```

如何让熊猫消除夏令时偏移？显然，我可以计算出需要更改的正确整数索引并这样做，但必须有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T03:03:07.863

如果您采用每年的第一个和最后一个重复值并将其间的数据移动一个小时，那应该是纠正问题的最简单方法。您显然必须考虑到第一个数据点从夏令时开始。

# string - C++/cli：如何将包含字节作为字符的字符串转换为双精度

> ID：14012237
> 
> 赞同：0
> 
> 时间：2012-12-23T15:34:33.873
> 
> 标签：string, c++-cli, double, type-conversion

我在将包含 8 个字节作为字符（ascii）的 String^ 转换为 double 时遇到问题。我想把这 8 个字符转换成二进制。

你会推荐什么在 C++/cli 中进行这种转换？

我试图使用 Marshal::Copy、Double::TryParse 等。

也许我使用了错误的参数规格，但我真的失去了最后的希望。必须有一些容易进行这种转换的东西。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T23:57:03.313

好吧，坏消息是**System.String**类在内部仅使用**Unicode 编码**。

因此，如果你给它字节，它会将它们映射到隐藏原始值的内部编码。

好消息是您可以使用**System.Text.Encoding**类来检索对应于 unicode 字符的 8 位值。

这是一个示例：

```
#include <iostream>

using namespace System;
using namespace System::Text;

int main()
{
    int n = 123456;
    double d = 123.456;

    std::cout << n << std::endl;
    std::cout << d << std::endl;

    char* n_as_bytes = (char*)&n;
    char* d_as_bytes = (char*)&d;

    String^ n_as_string = gcnew String(n_as_bytes, 0, sizeof(n));
    String^ d_as_string = gcnew String(d_as_bytes, 0, sizeof(d));

    Encoding^ ascii = Encoding::GetEncoding("iso-8859-1");

    array<Byte>^ n_as_array = ascii->GetBytes(n_as_string);
    array<Byte>^ d_as_array = ascii->GetBytes(d_as_string);

    cli::pin_ptr<unsigned char> pin_ptr_n = &n_as_array[0];
    cli::pin_ptr<unsigned char> pin_ptr_d = &d_as_array[0];

    unsigned char* ptr_n = pin_ptr_n;
    unsigned char* ptr_d = pin_ptr_d;

    int n_out = *(int*)ptr_n;
    double d_out = *(double*)ptr_d;

    std::cout << n_out << std::endl;
    std::cout << d_out << std::endl;

    return 0;
} 
```

这应该给你：

```
123456
123.456
123456
123.456 
```

不确定它是否完全安全，但在您的上下文中尝试它应该是一个好的开始，以确保它是可行的。:)

# javascript - angularjs中的密码检查指令

> ID：14012239
> 
> 赞同：76
> 
> 时间：2012-12-23T15:34:49.380
> 
> 标签：javascript, angularjs

我正在编写密码验证指令：

```
 Directives.directive("passwordVerify",function(){
    return {
        require:"ngModel",
        link: function(scope,element,attrs,ctrl){
            ctrl.$parsers.unshift(function(viewValue){
                var origin = scope.$eval(attrs["passwordVerify"]);
                if(origin!==viewValue){
                    ctrl.$setValidity("passwordVerify",false);
                    return undefined;
                }else{
                    ctrl.$setValidity("passwordVerify",true);
                    return viewValue;
                }
            });

        }
    };
}); 
```

html：

```
<input data-ng-model='user.password' type="password" name='password' placeholder='password' required>
<input data-ng-model='user.password_verify' type="password" name='confirm_password' placeholder='confirm password' required data-password-verify="user.password"> 
```

给定表单中的 2 个密码字段，如果两个密码值相等，则受指令影响的字段有效。问题是它以一种方式工作（即当我在密码验证字段中输入密码时）。但是，当原始密码字段更新时，密码验证无效。

知道如何进行“双向绑定验证”吗？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-08-02T10:42:57.970

我使用以下指令，因为无论值 1 或值 2 是否已更改，我都想重新验证两个输入字段：

**指示：**

```
'use strict';

angular.module('myApp').directive('equals', function() {
  return {
    restrict: 'A', // only activate on element attribute
    require: '?ngModel', // get a hold of NgModelController
    link: function(scope, elem, attrs, ngModel) {
      if(!ngModel) return; // do nothing if no ng-model

      // watch own value and re-validate on change
      scope.$watch(attrs.ngModel, function() {
        validate();
      });

      // observe the other value and re-validate on change
      attrs.$observe('equals', function (val) {
        validate();
      });

      var validate = function() {
        // values
        var val1 = ngModel.$viewValue;
        var val2 = attrs.equals;

        // set validity
        ngModel.$setValidity('equals', ! val1 || ! val2 || val1 === val2);
      };
    }
  }
}); 
```

***用法***

```
<input type="password" ng-model="value1" equals="{{value2}}" required>
<input type="password" ng-model="value2" equals="{{value1}}" required> 
```

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2013-10-24T07:32:02.163

不需要为此创建单独的指令。[Angular UI 密码验证工具](https://github.com/angular-ui/ui-validate)中已经内置了一个。有了这个，你可以这样做：

```
<input name="password" required ng-model="password">
<input name="confirm_password"
       ui-validate=" '$value==password' "
       ui-validate-watch=" 'password' ">

 Passwords match? {{!!form.confirm_password.$error.validator}} 
```

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2012-12-23T16:15:11.573

这应该解决它：

**看法：**

```
<div ng-controller='Ctrl'>
   <form name='form'>
      <input data-ng-model='user.password' type="password" name='password' placeholder='password' required>
      <div ng-show="form.password.$error.required">
        Field required</div>
      <input ng-model='user.password_verify' type="password" name='confirm_password' placeholder='confirm password' required data-password-verify="user.password">
      <div ng-show="form.confirm_password.$error.required">
        Field required!</div>
      <div ng-show="form.confirm_password.$error.passwordVerify">
        Fields are not equal!</div>
   </form
</div> 
```

**指示**

```
var app = angular.module('myApp', []);

app.directive("passwordVerify", function() {
   return {
      require: "ngModel",
      scope: {
        passwordVerify: '='
      },
      link: function(scope, element, attrs, ctrl) {
        scope.$watch(function() {
            var combined;

            if (scope.passwordVerify || ctrl.$viewValue) {
               combined = scope.passwordVerify + '_' + ctrl.$viewValue; 
            }                    
            return combined;
        }, function(value) {
            if (value) {
                ctrl.$parsers.unshift(function(viewValue) {
                    var origin = scope.passwordVerify;
                    if (origin !== viewValue) {
                        ctrl.$setValidity("passwordVerify", false);
                        return undefined;
                    } else {
                        ctrl.$setValidity("passwordVerify", true);
                        return viewValue;
                    }
                });
            }
        });
     }
   };
}); 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2014-02-24T15:31:44.850

对此的另一种看法是将一个输入的模型与另一个输入的值相匹配。

```
app.directive('nxEqual', function() {
    return {
        require: 'ngModel',
        link: function (scope, elem, attrs, model) {
            if (!attrs.nxEqual) {
                console.error('nxEqual expects a model as an argument!');
                return;
            }
            scope.$watch(attrs.nxEqual, function (value) {
                model.$setValidity('nxEqual', value === model.$viewValue);
            });
            model.$parsers.push(function (value) {
                var isValid = value === scope.$eval(attrs.nxEqual);
                model.$setValidity('nxEqual', isValid);
                return isValid ? value : undefined;
            });
        }
    };
}); 
```

因此，如果密码框的型号是，`login.password`那么您在验证框上设置以下属性：`nx-equal="login.password"`，并测试`formName.elemName.$error.nxEqual`. 像这样：

```
<form name="form">
    <input type="password" ng-model="login.password">
    <input type="password" ng-model="login.verify" nx-equal="login.password" name="verify">
    <span ng-show="form.verify.$error.nxEqual">Must be equal!</span>
</form> 
```

**扩大的视野：**

对于我的一个新项目，我必须修改上面的指令，以便它只`nxEqual`在验证输入有值时才显示错误。否则`nxEqual`错误应该被忽略。这是扩展版本：

```
app.directive('nxEqualEx', function() {
    return {
        require: 'ngModel',
        link: function (scope, elem, attrs, model) {
            if (!attrs.nxEqualEx) {
                console.error('nxEqualEx expects a model as an argument!');
                return;
            }
            scope.$watch(attrs.nxEqualEx, function (value) {
                // Only compare values if the second ctrl has a value.
                if (model.$viewValue !== undefined && model.$viewValue !== '') {
                    model.$setValidity('nxEqualEx', value === model.$viewValue);
                }
            });
            model.$parsers.push(function (value) {
                // Mute the nxEqual error if the second ctrl is empty.
                if (value === undefined || value === '') {
                    model.$setValidity('nxEqualEx', true);
                    return value;
                }
                var isValid = value === scope.$eval(attrs.nxEqualEx);
                model.$setValidity('nxEqualEx', isValid);
                return isValid ? value : undefined;
            });
        }
    };
}); 
```

你会像这样使用它：

```
<form name="form">
    <input type="password" ng-model="login.password">
    <input type="password" ng-model="login.verify" nx-equal-ex="login.password" name="verify">
    <span ng-show="form.verify.$error.nxEqualEx">Must be equal!</span>
</form> 
```

试试看：http: [//jsfiddle.net/gUSZS/](http://jsfiddle.net/gUSZS/)

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2013-05-14T05:59:41.063

我在没有指示的情况下完成了它。

```
<input type="password" ng-model="user.password" name="uPassword" required placeholder='Password' ng-minlength="3" ng-maxlength="15" title="3 to 15 characters" />
    <span class="error" ng-show="form.uPassword.$dirty && form.uPassword.$error.minlength">Too short</span>
    <span ng-show="form.uPassword.$dirty && form.uPassword.$error.required">Password required.</span><br />

    <input type="password" ng-model="user.confirmpassword" name="ucPassword" required placeholder='Confirm Password' ng-minlength="3" ng-maxlength="15" title="3 to 15 characters" />
    <span class="error" ng-show="form.ucPassword.$dirty && form.ucPassword.$error.minlength">Too short</span>
    <span ng-show="form.ucPassword.$dirty && form.ucPassword.$error.required">Retype password.</span>
    <div ng-show="(form.uPassword.$dirty && form.ucPassword.$dirty) && (user.password != user.confirmpassword)">
        <span>Password mismatched</span>
    </div> 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-07-30T08:19:06.153

从 angular 1.3.0-beta12 开始，无效输入不会写入 ngModel，因此您无法观看并验证，如您在此处看到的：[http](http://plnkr.co/edit/W6AFHF308nyKVMQ9vomw?p=preview) ://plnkr.co/edit/W6AFHF308nyKVMQ9vomw?p=preview 。引入了一个新的验证器管道，您可以附加到它以实现相同的目的。

实际上，在那张纸条上，我已经为常见的额外验证器创建了一个凉亭组件：[https](https://github.com/intellix/angular-validators) ://github.com/intellix/angular-validators包括这个。

```
angular.module('validators').directive('equals', function() {
    return {
        restrict: 'A',
        require: '?ngModel',
        link: function(scope, elem, attrs, ngModel)
        {
            if (!ngModel) return;

            attrs.$observe('equals', function() {
                ngModel.$validate();
            });

            ngModel.$validators.equals = function(value) {
                return value === attrs.equals;
            };
        }
    };
});

angular.module('validators').directive('notEquals', function() {
    return {
        restrict: 'A',
        require: '?ngModel',
        link: function(scope, elem, attrs, ngModel)
        {
            if (!ngModel) return;

            attrs.$observe('notEquals', function() {
                ngModel.$validate();
            });

            ngModel.$validators.notEquals = function(value) {
                return value === attrs.notEquals;
            };
        }
    };
}); 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2014-08-07T09:18:02.480

[https://github.com/wongetech/angular-confirm-field](https://github.com/wongatech/angular-confirm-field)是一个很好的项目。

这里的例子[http://wongatech.github.io/angular-confirm-field/](http://wongatech.github.io/angular-confirm-field/)

下面的代码显示了 2 个具有已实现功能的输入字段

```
<input ng-confirm-field ng-model="emailconfirm" confirm-against="email" name="my-email-confirm"/>
<input ng-model="email" name="my-email" /> 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2013-08-01T18:50:01.070

我以前成功地使用过这个指令：

```
 .directive('sameAs', function() {
  return {
    require: 'ngModel',
    link: function(scope, elm, attrs, ctrl) {
      ctrl.$parsers.unshift(function(viewValue) {
        if (viewValue === scope[attrs.sameAs]) {
          ctrl.$setValidity('sameAs', true);
          return viewValue;
        } else {
          ctrl.$setValidity('sameAs', false);
          return undefined;
        }
      });
    }
  };
}); 
```

## 用法

```
 <input ... name="password" />
    <input type="password" placeholder="Confirm Password" 
name="password2" ng-model="password2" ng-minlength="9" same-as='password' required> 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2013-09-25T05:36:24.103

我正在处理同样的问题，并找到了一篇由 Piotr Buda 撰写的关于它的好[博文。](http://piotrbuda.eu/2013/02/angularjs-directive-for-password-matching.html)这是一本很好的读物，它很好地解释了这个过程。代码如下：

```
directives.directive("repeatPassword", function() {
    return {
        require: "ngModel",
        link: function(scope, elem, attrs, ctrl) {
            var otherInput = elem.inheritedData("$formController")[attrs.repeatPassword];

            ctrl.$parsers.push(function(value) {
                if(value === otherInput.$viewValue) {
                    ctrl.$setValidity("repeat", true);
                    return value;
                }
                ctrl.$setValidity("repeat", false);
            });

            otherInput.$parsers.push(function(value) {
                ctrl.$setValidity("repeat", value === ctrl.$viewValue);
                return value;
            });
        }
    };
}); 
```

因此，您可以执行以下操作：

```
<input type="password" name="repeatPassword" id="repeatPassword" placeholder="repeat password" ng-model="user.repeatPassword" repeat-password="password" required> 
```

归功于作者

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-06-05T09:23:16.013

这还不够好吗：

```
<input type="password" ng-model="passwd1" />
<input type="password" ng-model="passwd2" />
<label ng-show="passwd1 != passwd2">Passwords do not match...</label>
<button ng-disabled="passwd1 != passwd2">Save</button> 
```

很简单，对我来说效果很好。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-11-22T00:24:13.857

这个解决方案类似于 Dominic Watson 给出的解决方案，它使用 $validators 并且是我最喜欢的解决方案。唯一的变化是您可以观看表达式。

> $validators 一个验证器的集合，当模型值改变时应用。对象中的键值是指验证器的名称，而函数是指验证操作。验证操作以模型值作为参数提供，并且必须根据验证的响应返回真或假值

来自[https://code.angularjs.org/1.3.15/docs/api/ng/type/ngModel.NgModelController](https://code.angularjs.org/1.3.15/docs/api/ng/type/ngModel.NgModelController)

我正在使用角度 1.3。我的指令看起来像这样

```
angular.module('app').directive("passwordConfirm", function() {
    "use strict";
    return {
        require : "ngModel",
        restrict : "A",
        scope : {
            //We will be checking that our input is equals to this expression
            passwordConfirm : '&'
        },
        link : function(scope, element, attrs, ctrl) {
            //The actual validation
            function passwordConfirmValidator(modelValue, viewValue) {
                return modelValue == scope.passwordConfirm();
            }
            //Register the validaton when this input changes
            ctrl.$validators.passwordConfirm = passwordConfirmValidator;
            //Also validate when the expression changes
            scope.$watch(scope.passwordConfirm, ctrl.$validate);
        }
    };
}); 
```

使用它

```
<input type="password" ng-model="user.password"/>
<input type="password" ng-model="user.confirmPassword" 
                password-confirm="user.password" /> 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2015-12-26T09:51:40.200

为了验证具有两个输入字段的表单，我找到了最合适的方式

## 指示

```
app.directive('passwordVerify', function() {
return {
    require: 'ngModel',
    link: function (scope, elem, attrs, ctrl) {
        if (!attrs.passwordVerify) {
            return;
        }
        scope.$watch(attrs.passwordVerify, function (value) {
          if( value === ctrl.$viewValue && value !== undefined) {
             ctrl.$setValidity('passwordVerify', true);
             ctrl.$setValidity("parse",undefined);
          }
          else {
             ctrl.$setValidity('passwordVerify', false);
          }
        });
        ctrl.$parsers.push(function (value) {
            var isValid = value === scope.$eval(attrs.passwordVerify);
            ctrl.$setValidity('passwordVerify', isValid);
            return isValid ? value : undefined;
        });
    }
  };
}); 
```

## HTML

```
 <div class="row">
        <div class="col-md-10 col-md-offset-1">
          <div class="form-group" ng-class="{ 'has-error': form.password.$dirty && form.password.$error.required || (form.password.$error.minlength || form.password.$error.maxlength)}">
              <input type="password" name="password" ng-minlength="6" ng-maxlength="16" id="password" class="form-control" placeholder="Password" ng-model="user.password" required />
              <span ng-show="form.password.$dirty && form.password.$error.required" class="help-block">Password is required</span>
              <span ng-show="form.password.$error.minlength || form.password.$error.maxlength" class="help-block">Password must be 6-16 character long</span>
          </div>
        </div>
       </div>
       <div class="row">
         <div class="col-md-10 col-md-offset-1">
           <div class="form-group" ng-class="{ 'has-error': (form.confirm_password.$dirty && form.confirm_password.$error.required) || form.confirm_password.$error.passwordVerify }">
              <input type="password" name="confirm_password" id="confirm_password" class="form-control" placeholder="Confirm Password" ng-model="user.confirm_password" required password-verify="user.password" />
              <span ng-show="form.confirm_password.$dirty && form.confirm_password.$error.required" class="help-block">Confirm Password is required</span>
              <span ng-show="form.confirm_password.$error.passwordVerify" class="help-block">Please make sure passwords match & must be 6-16 character long</span>
          </div>
        </div>
      </div> 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-04-03T20:44:43.413

**这两种方式都有效，而且简单干净**

**JavaScript**

```
var app = angular.module("app");

app.controller("SamePaswordController", function () {

  this.password;
  this.confirm;

  this.save = function () {
    alert("Saved!");
  };
}

app.directive("match", function () {
  return {
    restrict:"A",
    require:"ngModel",

    link: function(scope, element, attrs, ctrl) {

      function matchValidator(value) {      

        scope.$watch(attrs.match, function(newValue, oldValue) {

          var isValid = value === scope.$eval(attrs.match);                    
          ctrl.$setValidity('match', isValid);

        });

        return value;
      }

      ctrl.$parsers.push(matchValidator);
    }
  };
}); 
```

**HTML：注意 match 指令**

```
<form name="regForm" ng-controller="SamePaswordController as regCtrl"
      ng-submit="regForm.$valid && regCtrl.save()" novalidate>

  <input name="password" ng-model="regCtrl.password" 
         type="password" required placeholder="Password"/>                

  <input name="confirm" ng-model="regCtrl.confirm" match="regCtrl.password"
         type="password" required placeholder="Confirm password"/>

  <div> regForm is valid:{{regForm.$valid}}</div>

  <input type="submit" value="Save"/>

</form> 
```

您可以使用此示例克隆存储库 [https://github.com/rogithub/roangularjs](https://github.com/rogithub/roangularjs)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2015-11-23T22:53:03.340

不是指令性解决方案，但对我有用：

```
<input ng-model='user.password'
 type="password"
 name='password'
 placeholder='password'
 required>
<input ng-model='user.password_verify'
 type="password" 
 name='confirm_password'
 placeholder='confirm password'
 ng-pattern="getPattern()"
 required> 
```

在控制器中：

```
//Escape the special chars
    $scope.getPattern = function(){
        return $scope.user.password && 
              $scope.user.password.replace(/([.*+?^${}()|\[\]\/\\])/g, '\\$1');
    } 
```

[http://plnkr.co/edit/QDTnipCsHdg56vgygsqC?p=preview](http://plnkr.co/edit/QDTnipCsHdg56vgygsqC?p=preview)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-02-19T11:13:42.883

以下是我对这个问题的看法。该指令将与表单值而不是范围进行比较。

```
'use strict';
(function () {
    angular.module('....').directive('equals', function ($timeout) {
        return {
            restrict: 'A',
            require: ['^form', 'ngModel'],
            scope: false,
            link: function ($scope, elem, attrs, controllers) {
                var validationKey = 'equals';
                var form = controllers[0];
                var ngModel = controllers[1];

                if (!ngModel) {
                    return;
                }

                //run after view has rendered
                $timeout(function(){
                    $scope.$watch(attrs.ngModel, validate);

                    $scope.$watch(form[attrs.equals], validate);
                }, 0);

                var validate = function () {
                    var value1 = ngModel.$viewValue;
                    var value2 = form[attrs.equals].$viewValue;
                    var validity = !value1 || !value2 || value1 === value2;
                    ngModel.$setValidity(validationKey, validity);
                    form[attrs.equals].$setValidity(validationKey,validity);
                };
            }
        };
    });
})(); 
```

在 HTML 中，现在指的是实际表单而不是作用域值：

```
<form name="myForm">
  <input type="text" name="value1" equals="value2">
  <input type="text" name="value2" equals="value1">
  <div ng-show="myForm.$invalid">The form is invalid!</div>
</form> 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-02-18T23:25:30.160

为了在两个输入都更改时实现验证，我使用以下代码（这是所有其他答案的组合）：

```
angular.module('app.directives')
.directive('passwordVerify', [function () {
    return {
        require: '?ngModel',
        restrict: 'A',
        scope: {
            origin: '=passwordVerify'
        },
        link: function (scope, element, attrs, ctrl) {
            if(!ctrl) {
                return;
            }

            function validate(value) {
                ctrl.$setValidity('passwordMatch', scope.origin === value);
                return value;
            }

            ctrl.$parsers.unshift(validate);

            scope.$watch('origin', function(value) {
                validate(ctrl.$viewValue);
            });
        }
    };
}]); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-07-14T13:37:36.747

首先，我要感谢 Fredric 发布了这个出色的示例。我偶然发现了一个小问题。在您发布的小提琴上[http://jsfiddle.net/gUSZS/](http://jsfiddle.net/gUSZS/)

如果您输入密码，然后在验证输入元素中输入相同的密码，一切正常，但尝试在第二个框中添加一个空格，角度会自动修剪该空间。这意味着该指令不会“看到”额外的空间。现在密码不同了，但表格仍然有效。

为了解决这个问题，我们需要添加

```
ng-trim="false" 
```

到输入元素。这在 Angular 1.0.3 中不起作用，所以如果你想在这个小提琴中尝试它，你需要将 1.1.1 添加到小提琴（[http://ajax.googleapis.com/ajax/libs/angularjs/1.1.1/angular .js](http://ajax.googleapis.com/ajax/libs/angularjs/1.1.1/angular.js) )

但是，再次感谢 Frederic，我将在我的应用程序中使用您的解决方案！

Anton PS 我想评论 Frederic 的帖子，但我是这个论坛的新手，似乎没有足够的信誉。因此，如果你们中的一些人喜欢我的评论，我们将不胜感激:-)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-07-23T11:10:58.693

不需要额外的指令，这是我对此的看法：

HTML：

```
<div class="form-group" data-ng-class="{ 'has-error': submitted && !form.new_passwd.$valid }">
    <input type="password" name="new_passwd" class="form-control" data-ng-model="data.new_passwd" placeholder="New Password" required data-ng-pattern="passwdRegex">
    <small class="help-block" data-ng-show="submitted && form.new_passwd.$error.required">New password is required!</small>
    <small class="help-block" data-ng-show="submitted && !form.new_passwd.$error.required && form.new_passwd.$error.pattern">New password is not strong enough!</small>
</div>

<div class="form-group" data-ng-class="{ 'has-error': submitted && !form.new_passwd_conf.$valid }">
    <input type="password" name="new_passwd_conf" class="form-control" data-ng-model="data.new_passwd_conf" placeholder="Confirm New Password" required data-ng-pattern="passwdConfRegex">
    <small class="help-block" data-ng-show="submitted && form.new_passwd_conf.$error.required">New password confirmation is required!</small>
    <small class="help-block" data-ng-show="submitted && !form.new_passwd_conf.$error.required && form.new_passwd_conf.$error.pattern">New password confirmation does not match!</small>
</div> 
```

Javascript：

```
$scope.passwdRegex = /^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[^\da-zA-Z]).{8,}$/;
$scope.$watch('data.new_passwd', function() {
    $scope.passwdConfRegex = new RegExp(Regex.escape($scope.data.new_passwd));
}); 
```

Regex.escape() 可以在[这里](https://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript)找到。

奇迹般有效！

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-08-19T23:34:57.660

为了增加大量现有的解决方案，这对我来说很有效。

（**Jan Laussmann**的回答停止使用最新的 AngularJS beta 版本）。

**指示：**

```
angular.module('myApp').directive('matchValidator', [function() {
        return {
            require: 'ngModel',
            link: function(scope, elm, attr, ctrl) {
                var pwdWidget = elm.inheritedData('$formController')[attr.matchValidator];

                ctrl.$parsers.push(function(value) {
                    if (value === pwdWidget.$viewValue) {
                        ctrl.$setValidity('match', true); 
                        return value;
                    }                       

                    if (value && pwdWidget.$viewValue) {
                        ctrl.$setValidity('match', false);
                    }

                });

                pwdWidget.$parsers.push(function(value) {
                    if (value && ctrl.$viewValue) {
                        ctrl.$setValidity('match', value === ctrl.$viewValue);
                    }
                    return value;
                });
            }
        };
    }]) 
```

**用法**

```
<input type="email" ng-model="value1" name="email" required>
<input type="email" ng-model="value2" name="emailConfirm" match-validator="email" required> 
```

**显示错误**

```
<div ng-if="[[yourFormName]].emailConfirm.$error">
    <div ng-if="[[yourFormName]].emailConfirm.$error.match">
        Email addresses don't match.
    </div>
</div> 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2014-12-23T02:45:11.750

```
 <input name="password" type="text" required="" ng-model="password" placeholder="password" class="ng-dirty ng-valid ng-valid-required">
   <input name="confirm_password" type="text" required="" ng-model="confirm_password" ui-validate=" '$value==password' " ui-validate-watch=" 'password' " placeholder="confirm password" class="ng-dirty ng-valid-required ng-invalid ng-invalid-validator"> 
   <span ng-show="form.confirm_password.$error.validator">Passwords do not match!</span>
        password errors: {
        "required": false,
        "validator": true
        } 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2015-05-07T10:16:32.553

这对我有用。

**指示：**

```
modulename.directive('passwordCheck', function () {

    return {
        restrict: 'A', // only activate on element attribute
        require: '?ngModel', // get a hold of NgModelController
        link: function (scope, elem, attrs, ngModel) {
            if (!ngModel) return; // do nothing if no ng-model

            var Value = null;

            // watch own value and re-validate on change
            scope.$watch(attrs.ngModel, function (val) {
                Value = val;

                validate();
            });

            // observe the other value and re-validate on change
            attrs.$observe('passwordCheck', function () {
                validate();
            });

            var validate = function () {

                // values
                var val1 = Value;
                var val2 = attrs.passwordCheck;

                // set validity

                if (val1 != '' && val1 != undefined) {
                    ngModel.$setValidity('passwordCheck', val1 == val2);

                }

                else {
                    ngModel.$setValidity('passwordCheck', true);
                }
            };
        }
    }
}); 
```

**HTML：**

```
ng-model="confirmpassword.selected" type="password" name="confirmpassword" 

password-check="{{password.selected}}"

ng-show="resetpasswordform.confirmpassword.$error.passwordCheck && submitted" Password does not match 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2015-08-18T18:09:28.387

当我尝试构建自己的指令时遇到了同样的问题，我用这个添加修复了

> `ctrl.$validate();`

其中 ctrl 是我的 ngModelController

这是我的看法

```
<input type="password" match="signupCtrl.registrationData.password" name="confirmPassword" class="form-control" placeholder="Confirm Password" data-ng-model="signupCtrl.registrationData.confirmPassword" required>
        <span ng-messages="registerForm.confirmPassword.$error">
            <span ng-message="match">The Password must match</span>
        </span> 
```

这是我的指令

```
(function () {
    'use strict';
    angular.module('matchDirective', [
        // Angular modules
        // Custom modules
        // 3rd Party Modules
    ]);
})(); 
(function () {
    'use strict';
    angular
        .module('matchDirective')
        .directive('match', match);
    match.$inject = ['$window'];

    function match($window) {
        // Usage:
        //     <element match="source"></element>
        // Creates:
        //
        var directive = {
            link: link,
            restrict: 'A',
            require: 'ngModel',
        };
        return directive;

        function link(scope, element, attrs, ctrl) {
            scope.$watch(attrs['match'], function (newVal, oldVal) {
                ctrl.$validators.match = function (modelValue, viewValue) {
                    if (newVal == modelValue) {
                        return true;
                    } else {
                        return false;
                    }
                }
                ctrl.$validate();
            });
        }
    }
})(); 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-01-18T16:59:45.923

像这样的东西对我有用：

js：

```
.directive('sameAs', function() { return {
    require : 'ngModel',
    link : function(scope, elm, attrs, ngModelCtrl) {

        ngModelCtrl.$validators.sameAs = function(modelValue, viewValue) {
            var checkedVal = attrs.sameAs;
            var thisInputVal = viewValue;

            if (thisInputVal == checkedVal) {
                return true; // valid
            } else {
                return false;
            }
        };
    }
}; }); 
```

html:

```
<input type="password" name="password" id="password" ng-model="password" />

<input type="password" name="passwordRepeat" id="passwordRepeat" 
    ng-model="passwordRepeat" same-as="{{password}}" /> 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-01-14T10:27:26.023

Keep It Simple And Stupid (KISS) 原则可能对这一点很有用。通过执行以下操作，可以更快、更轻松地检查两个密码是否匹配：

```
<div ng-app="app" ng-controller="passwordCheck">
  <form name="signUp" ng-submit="submitForm()" novalidate>
     <input type="password" name="password" ng-model="password" required>
     <input type="password" name="ConfirmPassword" ng-model="passwordconfirm"   required>
     <button type="submit"> Submit</button>
  </form>

  <hr>
  <span>Do they match?</span> {{signUp.password.$viewValue == signUp.confirmPassword.$viewValue}}
    </div> 
```

并且在提交表单之前，您可以在您的 js 中执行此操作

```
var app = angular.module("app", []);
app.controller("passwordCheck", function($scope) {
   $scope.submitForm = function() {
      if ($scope.signUp.$valid && $scope.signUp.password.$viewValue == $scope.signUp.confirmPassword.$viewValue) {
            alert('Its a match!');
        };
};
}); 
```

您也可以在[JSfiddle](https://jsfiddle.net/angie2020/0qkhbngo/9/)中对其进行测试。

# jsf - 如何在 jsf 中使用素数人脸上传图像

> ID：14012241
> 
> 赞同：-1
> 
> 时间：2012-12-23T15:34:53.977
> 
> 标签：jsf, upload, primefaces

我有下表

类别

catId catName 描述 catImage

我想创建一个表单来添加新类别。但我想使用 primefaces 3.4.2

用于图像上传并想将图像路径存储在数据库中。

如何使用托管 bean 做到这一点？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T16:18:56.447

是的，您可以使用托管 bean。检查以下链接

1.  用于 FileUpload 的 Primefaces 组件套件[- 简单](http://www.primefaces.org/showcase-labs/ui/fileUploadSimple.jsf)
2.  Stackoverflow 的回答[如何使用 PrimeFaces p:fileUpload？](https://stackoverflow.com/questions/8875818/how-to-use-primefaces-pfileupload-listener-method-is-never-invoked/8880083#8880083)

# c# - 使用 LINQ 的字段总和

> ID：14012244
> 
> 赞同：2
> 
> 时间：2012-12-23T15:35:48.143
> 
> 标签：c#, linq, sql-server-ce

在问我的问题之前有一些背景。

我使用 sql compact，我有两个表，第一个表（IssueEmp）

![在此处输入图像描述](../Images/7286f7e3c3183380da7e780a73a07342.png)

第二个表（RecEmp）

![在此处输入图像描述](../Images/cbb092c72d2f71cb8bcbc437a8b11631.png)

```
 SqlCeDataAdapter adap = new SqlCeDataAdapter("SELECT * FROM RecEmp", cn);
            DataTable dat = new DataTable();
            DataSet receice = new DataSet();
            adap.Fill(receice);
            adap.Fill(dat);

 SqlCeDataAdapter adap1 = new SqlCeDataAdapter("SELECT * FROM IssueEmp", cn);
            DataTable dat1 = new DataTable();
            DataSet issue = new DataSet();
            adap1.Fill(issue);
            adap1.Fill(dat1); 
```

我使用 linq 在 RecEmp 和 IssueEmp 之间执行连接

```
var res = from t1 in receice.Tables[0].AsEnumerable()

                      join t2 in issue.Tables[0].AsEnumerable()                                            
                         on new 
                         {
                             CNo = t1.Field<int>("CNo"),
                             Empid = t1.Field<int>("EmpID") 
                         } 
                         equals new 
                         {
                             CNo = t2.Field<int>("CNo"),
                             Empid = t2.Field<int>("EmpID") 
                         }                     
                      select new
                       {
                           SNo = t1.Field<int>("SNo"),
                           ChNo = t1.Field<int>("CNo"),
                           EmpID = t1.Field<int>("EmpID"),
                           DateIssued = t2.Field<DateTime>("Date"),                                                                               
                           RMIssued = t2.Field<string>("RMCode"),
                           QuantityIssued = t2.Field<double>("Quantity"),

                           DateReceived = t1.Field<DateTime>("Date"),
                           RMCodeReceived = t1.Field<string>("RMCode"),
                           QuantityReceived = t1.Field<double>("Quantity")

                       }; 
```

我从上面的 linq 查询得到的输出是

![在此处输入图像描述](../Images/92170083d2fc15b405e580e5d3911d37.png)

但我不知道如何得到发出数量的总和，也得到接收数量的总和，最后将两者之和作为差异。所需内容如下。

![在此处输入图像描述](../Images/ba936ee63f264a647d06085abd0975e6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T19:00:28.413

**笔记：**

我有点懒所以我没有使用你提供的所有记录，只使用前四个记录。

**预期结果：**

这就是我得到的：

![在此处输入图像描述](../Images/b0bf136d3f11046edaded5107328f8ea.png)

**Linq 查询：**

```
var query = from d in data
           group d by new { d.DateIssued, d.EmpId, d.ChNo, d.DateReceived }
           into x
           select new {
                Date = x.Key.DateIssued,
                CNo = x.Key.ChNo,
                EmpId=x.Key.EmpId,
                CRi = x.Where(c=>c.RMIssued == "CR").Sum(c=>c.QuantityIssued),
                SJi = x.Where(c=>c.RMIssued == "SJ").Sum(c=>c.QuantityIssued),
                TTi = x.Where(c=>c.RMIssued == "TT").Sum(c=>c.QuantityIssued),
                WRi = x.Where(c=>c.RMIssued == "WR").Sum(c=>c.QuantityIssued),
                TotalIssued = x.Sum(c => c.QuantityIssued),

                DateReceived = x.Key.DateReceived,
                CRr = x.Where(c=>c.RMCodeReceived == "CR").Sum(c=>c.QuantityReceived),
                SJr = x.Where(c=>c.RMCodeReceived == "SJ").Sum(c=>c.QuantityReceived),
                TTr = x.Where(c=>c.RMCodeReceived == "TT").Sum(c=>c.QuantityReceived),
                WRr = x.Where(c=>c.RMCodeReceived == "WR").Sum(c=>c.QuantityReceived),
                TotalReceived = x.Sum(c => c.QuantityReceived),

                Diff = x.Sum(c => c.QuantityIssued) - x.Sum(c => c.QuantityReceived)
            }; 
```

**使用的数据：**

这是我用来测试它的一组数据：

```
var data= new []{
    new { SNo= 9,  ChNo=5,  EmpId=81, DateIssued=dateIssued, RMIssued="SJ", QuantityIssued=30,   DateReceived=dateReceived, RMCodeReceived="SJ", QuantityReceived=20.3},
    new { SNo= 10, ChNo=5,  EmpId=81, DateIssued=dateIssued, RMIssued="SJ", QuantityIssued=30,   DateReceived=dateReceived, RMCodeReceived="CR", QuantityReceived=9.6},
    new { SNo= 11, ChNo=28, EmpId=82, DateIssued=dateIssued, RMIssued="TT", QuantityIssued=30.5, DateReceived=dateReceived, RMCodeReceived="TT", QuantityReceived=29},
    new { SNo= 12, ChNo=28, EmpId=82, DateIssued=dateIssued, RMIssued="WR", QuantityIssued=10,   DateReceived=dateReceived, RMCodeReceived="TT", QuantityReceived=29}
}; 
```

我建议你使用[LinqPad](http://www.linqpad.net/)来测试它。

祝你好运！

# iphone - iphone和iOS模拟器计算结果不同

> ID：14012246
> 
> 赞同：1
> 
> 时间：2012-12-23T15:36:05.280
> 
> 标签：iphone, ios, xcode, ios-simulator, lapack

我有一个程序需要计算 8*8 矩阵的特征值。我使用 LAPACK (deyev_) 来解决它。当我使用ios模拟器时，结果与我们拥有的论文相同，这是正确的。但是我用iphone测试的时候，计算的结果就不一样了。这是为什么？有人说是因为iphone的CPU不如MAC的强，我把矩阵的所有元素都精确到点后差不多20到40位，因为我们的方法需要很高的精度。如果是因为精度问题，我该如何解决，您能给我一些建议吗？谢谢你。

# asp.net - 无法加载类型“Pages_MasterPage”

> ID：14012247
> 
> 赞同：1
> 
> 时间：2012-12-23T15:36:10.873
> 
> 标签：asp.net, master-pages, publish

我执行了“网站发布”，出现以下错误：

> 无法加载类型“Pages_MasterPage”。

我在网上搜索过，发现 Post: [Master Page getting Could Not Load Type error when publishing](https://stackoverflow.com/questions/1709831/master-page-getting-could-not-load-type-error-when-publishing)

在确保将站点文件夹设置为应用程序后，我发布了我的问题，因此，该帖子对我没有太大帮助。

我发布的服务器是3.5环境

![这是我得到的错误屏幕：](../Images/327cf36b88d085fba37aa3666b3cab01.png)

任何帮助将不胜感激。

我是新手，不知道如何进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:24:50.113

没有找到页面的类，我也没有看到`CodeFile`所以这可能是缺失的

```
<%@ Master Language="C#" AutoEventWireup="true" 
   CodeFile="Pages_MasterPage.master.cs" Inherits="Pages_MasterPage" %> 
```

并确保`Pages_MasterPage.master.cs`存在 - 如果不是，您可能需要重新创建此母版页，而不是更改或手动制作标题和文件。

# java - 使用日期进行文件命名的标准文件记录器？

> ID：14012248
> 
> 赞同：1
> 
> 时间：2012-12-23T15:36:16.443
> 
> 标签：java, logging, java.util.logging

我对 Java 日志配置不太熟悉，但我基本上希望我的应用程序日志能够以与使用包装器配置文件运行 Java 应用程序时相同的方式工作：

```
wrapper.logfile.rollmode=DATE
wrapper.console.format=PM
wrapper.console.loglevel=INFO
wrapper.logfile=/home/logs/wrapper_YYYYMMDD.log
wrapper.logfile.format=LPTM
wrapper.logfile.loglevel=FINER
wrapper.logfile.maxsize=1m
wrapper.logfile.maxfiles=0 
```

这似乎与典型的 logging.properties 文件完全不同：

```
java.util.logging.FileHandler.pattern = logs/java%u.log
java.util.logging.FileHandler.limit = 100000
java.util.logging.FileHandler.count = 1
java.util.logging.FileHandler.formatter = java.util.logging.XMLFormatter 
```

有没有一种简单的方法可以得到同样的东西？我有点困惑包装器如何映射到内部配置记录器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T16:08:31.097

如果您询问将默认 Java Logger 与[Tanuki Service Wrapper](http://wrapper.tanukisoftware.com/doc/english/download.jsp)进行比较，您将苹果与橙子进行比较。Tanuki 服务包装器实际上实现了它自己的日志系统......在 C 中（[日志代码的头文件](http://sourceforge.net/p/wrapper/code/1764/tree/trunk/wrapper/src/c/logger.h)）。所以它真的与Java日志无关。

不幸的是，Java（包）中的默认日志系统`java.util.logging`不支持每日日志轮换。[有一个错误打开](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6350749)以添加此功能，但目前尚未解决。错误报告提到可以编写自定义处理程序来执行此操作，但这似乎需要做很多工作，并且错误报告提到它可能会干扰其他应用程序。

到目前为止，最简单的解决方案是使用[Logback](http://logback.qos.ch)，它是[log4j](http://logging.apache.org/log4j/1.2/)的继任者，另一个可行的替代方案。这些第三方开源库中的任何一个都提供了开箱即用的每日滚动文件附加程序选项。

例如，在[文档](http://logback.qos.ch/manual/appenders.html)中，这是一个`logback.xml`配置 Logback 以记录到每天滚动的文件的文件示例，每个文件的大小最大为 1 MB：

```
<configuration>
  <appender name="ROLLING" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <file>mylog.txt</file>
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
      <!-- rollover daily -->
      <fileNamePattern>mylog-%d{yyyy-MM-dd}.%i.txt</fileNamePattern>
      <timeBasedFileNamingAndTriggeringPolicy
            class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
        <!-- or whenever the file size reaches 1MB -->
        <maxFileSize>1MB</maxFileSize>
      </timeBasedFileNamingAndTriggeringPolicy>
    </rollingPolicy>
    <encoder>
      <pattern>%msg%n</pattern>
    </encoder>
  </appender>

  <root level="DEBUG">
    <appender-ref ref="ROLLING" />
  </root>

</configuration> 
```

# c - 删除c中动态数组的最后一行和最后一列

> ID：14012249
> 
> 赞同：0
> 
> 时间：2012-12-23T15:36:32.377
> 
> 标签：c

我在 C 中创建了一个动态二维数组，声明为指针数组。如何删除指针数组和它指向的行中的最后一行？

如果我会使用

```
 arr=realloc(arr , i*sizeof(int *)); 
```

i 是 3 (4 rows-1)

第 4 行中的列会被删除还是我需要使用类似的东西？

```
 arr[i]=realloc(arr[i] ,sizeof(char));
    arr=realloc(arr , i*sizeof(int *)); 
```

如果它是正确的或者我需要使用 free()

* * *

这是我的代码，但我想删除最后一行的列，我不知道如何

```
int main(void) {
    char **arr,str[500];
    int i=0,j,min_str_pos;
    long min;
    arr = malloc(sizeof(int *));
    arr[i] = malloc(500*sizeof(char));
    do {
            printf("Enter a string (or just press <ENTER> to exit): \n");
            fgets ( str, 500, stdin );
            if (strcmp(str, "\n")) {
                    strcpy(arr[i],str);
                    i++;
                    arr=realloc(arr , (i+1)*sizeof(int *));
                    arr[i] = malloc(500*sizeof(char));
            }
    } while (strcmp(str, "\n")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:32:05.553

首先，我修复了您的代码，以便它至少可以编译：

```
int main(void) {
    char **arr,str[500];
    int i = 0;
    arr = malloc(sizeof(int *));
    arr[i] = malloc(500*sizeof(char));
    do {
        printf("Enter a string (or just press <ENTER> to exit)");
        fgets (str, 500, stdin );
        if (strcmp(str, "\n")) {
            strcpy(arr[i], str);  
            i++;
            arr=realloc(arr , (i+1)*sizeof(int *));
            arr[i] = malloc(500*sizeof(char));
        }
    } while (strcmp(str, "\n"));
} 
```

请注意，这`arr[i]=str;`不是复制字符串的正确方法。而是使用`strcpy(arr[i], str);`.

要删除数组的最后一行，只需使用：

```
free(arr[i]); 
```

现在通过删除数组的最后一列，您的意思是要从数组中的`char`每一列中删除最后一列`string`吗？

# three.js - 清除 3ds Max 模型旋转

> ID：14012250
> 
> 赞同：1
> 
> 时间：2012-12-23T15:36:34.117
> 
> 标签：three.js, 3dsmax

在使用 .js 将模型转换为 JSON 后，我在 THREE.js 中从 3ds Max 导入`convert_obj_three.py`模型 模型保留 3ds Max 文件中的旋转。我想要没有对它们应用任何旋转的模型。有没有办法在 Three.js（或 3ds Max，就此而言）中将旋转重置为零？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T08:02:15.930

在 3dsmax 中，只需将对象的变换设置为默认矩阵。

```
$.transform = matrix3 1 
```

这将使平移、旋转和缩放归零。如果您只想重置旋转，请使用：

```
$.rotation = eulerangles 0 0 0 
```

这些当然是 MAXScript 方法。如果您想手动重置，您只需在转换输入框中输入零（或右键单击微调器）。

# ios5 - 如何在照片滚动条中缩放单个图像（UIScrollView）

> ID：14012253
> 
> 赞同：0
> 
> 时间：2012-12-23T15:36:55.617
> 
> 标签：ios5, uiscrollviewdelegate, pinchzoom

我有一个 UIScrollView 有大约 10 多个图像水平布局使用以下代码改编自苹果示例代码：

```
- (void)layoutScrollViewImages
{
    UIImageView *view = nil;
    NSArray *subviews = [scrollView subviews];
    CGFloat curXLoc = 0;
    for (view in subviews)
    {
        if ([view isKindOfClass:[UIImageView class]] && view.tag > 0)
        {
            CGRect frame = view.frame;
            frame.origin = CGPointMake(curXLoc, 0);

            view.frame = frame;
        curXLoc += (kScrollObjWidth);

        }
    }
    [scrollView setContentSize:CGSizeMake((kNumImages * kScrollObjWidth),[scrollView bounds].size.height)];
} 
```

用户可以一次以水平方式翻阅图像，但我希望每个单独的图像都可以缩放。我尝试在 viewForZoomingInScrollView 中返回我的滚动视图，但这似乎会缩放整个滚动视图，而不是单个图像。此外，我尝试将 UIImageView 设置为属性并返回它，但仍然没有成功。此外，我尝试在情节提要中添加捏合手势识别器，但这根本不起作用。因此，寻找一些关于如何在 scrollView.subviews 数组中返回单个 UIImageView 的指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:22:58.860

听起来您想要类似于 Apples Photo Library 效果的东西，您可以在图像之间滑动，但可以缩放/滚动每个图像。

您将不得不将每个子视图放在它自己的缩放滚动视图中。然后每个人都可以独立于其他人滚动。

查看 Apple 的“photoscroller”示例代码（只需在文档中搜索 photoscroller）。代码中还有一个 WWDC 视频（WWDC 2010，“Designing Apps with Scroll Views”）

# javascript - 发誓过滤器正则表达式

> ID：14012256
> 
> 赞同：2
> 
> 时间：2012-12-23T15:37:26.287
> 
> 标签：javascript, regex

我需要一个匹配某个字符串并用符号替换它的每个字母的正则表达式。

所以...`"Cheese"`将被替换为`"******"`但`"Pie"`将被替换为`"***"`

例如：

```
"my pie is tasty and so is cake".replace(new RegExp(/(pizza|cake|pie|test|horseshoe)/gi), "'*' x length($1)") 
```

（显然替换不存在）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T15:42:35.600

我个人认为这是一个非常糟糕的主意，因为：

*   它将破坏可能惹恼有效用户的有效文本。
*   使用拼写错误很容易欺骗过滤器，因此不会妨碍恶意用户。

但是，要解决您的问题，您可以传递一个函数来替换：

```
var regex = /(pizza|cake|pie|test|horseshoe)/gi;
var s = "my pie is tasty and so is cake";
s = s.replace(regex, function(match) { return match.replace(/./g, '*'); }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T15:44:03.950

免责声明：[这些过滤器不起作用。](http://www.codinghorror.com/blog/2008/10/obscenity-filters-bad-idea-or-incredibly-intercoursing-bad-idea.html). 话虽如此，您可能希望将回调函数与[`replace`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)：

```
"my pie is tasty and so is cake".replace(/(pizza|cake|pie|test|horseshoe)/gi, function (match) {
    return match.replace(/./g, '*');
}); 
```

工作示例：http: [//jsfiddle.net/mRF9m/](http://jsfiddle.net/mRF9m/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T20:00:38.603

为了防止@ThiefMaster 前面提到的[经典问题](http://en.wikipedia.org/wiki/Clbuttic)，您可以考虑在模式中添加单词边界。但是，请记住，您仍然需要注意这些单词的复数形式和拼写错误形式。

```
var str = 'pie and cake are tasty but not spies or protests';
str = str.replace(/\b(pizza|cake|pie|test|horseshoe)\b/gi, function (match) {
    return match.replace(/\w/g, '*');
}); 
```

# java - 相当于Java中的C++指针？

> ID：14012260
> 
> 赞同：-2
> 
> 时间：2012-12-23T15:37:44.453
> 
> 标签：java, c++, pointers

Java 不支持指针；有其他选择吗？

请注意，我指的不是函数指针，而是指针！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-23T15:40:27.673

好吧，C++ 中存在指针以在传递对象时允许一定程度的间接性，以便可以在不同的代码区域修改或访问对象。这是 Java 中默认发生的情况，但它以不同的方式处理它。在 Java 中，您拥有的一切都是参考。您用来引用对象的名称是对该对象的引用。当您调用函数时，该引用被复制到函数中（按值传递）。您可以将 Java 中的变量名视为类似于（或行为类似）C++ 中的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T15:38:44.170

Java 没有指针。它的引用几乎与 C++ 完全一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T15:41:33.307

不能说替代，但你可以使用参考。

**编辑：**

更准确地说，所有 Java 调用都是**按值传递的**。然而，当你传递一个对象时，你传递的是一个值引用。普通的 Java 参数更类似于 C++ 引用，而不是 C++ 值传递或指针传递。

参考：[Java 是“按引用传递”吗？](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T15:41:40.427

Java中没有指针。然而，Java 几乎在所有地方都使用引用，这使得指针接近过时。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-23T15:52:28.793

Java 引用非常接近指针。

```
Object x; 
```

java的接近于

```
void *x; 
```

在 C 或 C++ 中；

# javascript - Kendo UI Grid 保存单元格模糊

> ID：14012264
> 
> 赞同：6
> 
> 时间：2012-12-23T15:38:30.263
> 
> 标签：javascript, jquery, json, gridview, kendo-ui

当您按下回车键或移出单元格（模糊）时，我试图让我的网格保存更改，而不必使用网格工具栏中的保存按钮。

我无法让它正常工作，我的 PHP/SQL 工作正常，所以我确定网格有问题。

这是我的代码：

```
$("#grid").kendoGrid({
dataSource: {
    transport: {
        read: WEBROOT+"admin/fetch-toppers",
        update: {
            url: WEBROOT+"admin/update-topper",
            type: "POST"
        }
    },
    error: function(e)
    {
        alert(e.responseText);
    },
    schema: {
        data: "data",
        model: {
            id: 'id',
            fields: {
                "id": {nullable: true},
                "Date": {editable: false},
                "name": {editable: false},
                "price": {editable: true}
            }
        }
    }
},
columns: [{field: "Date", width: 105}, {field: "name", title: "Topper"}, {field: "price", title: "Price", width: 125}],
height: 550,
filterable: true,
sortable: true,
pageable: true,
editable: true,
navigatable: true,
edit: function()
{
    //this.saveChanges()
}
}); 
```

我尝试了很多事情和不同的事件，但没有任何效果。

我怎样才能让它保存模糊的单元格值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T16:00:30.660

在您的数据源中添加：

```
change: function (e) {
                        if (e.action == "itemchange") {
                            this.sync();
                        }
                    }, 
```

它应该看起来像：

```
dataSource: {
transport: {
    read: WEBROOT+"admin/fetch-toppers",
    update: {
        url: WEBROOT+"admin/update-topper",
        type: "POST"
    }
},
error: function(e)
{
    alert(e.responseText);
},
change: function (e) {
                        if (e.action == "itemchange") {
                            this.sync();
                        }
},
schema: {
    data: "data",
    model: {
        id: 'id',
        fields: {
            "id": {nullable: true},
            "Date": {editable: false},
            "name": {editable: false},
            "price": {editable: true}
        }
    }
} 
```

},

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T17:05:42.633

您可以尝试使用数据源的**[更改](http://docs.kendoui.com/api/framework/datasource#change)**事件来执行数据源的**[同步](http://docs.kendoui.com/api/framework/datasource#sync)**方法。

```
 $("#grid").kendoGrid({
dataSource: {
    transport: {
        read: WEBROOT+"admin/fetch-toppers",
        update: {
            url: WEBROOT+"admin/update-topper",
            type: "POST"
        }
    },
    change:function(){this.sync()},
    error: function(e)
    {
        alert(e.responseText);
    },
    schema: {
        data: "data",
        model: {
            id: 'id',
            fields: {
                "id": {nullable: true},
                "Date": {editable: false},
                "name": {editable: false},
                "price": {editable: true}
            }
        }
    }
},
columns: [{field: "Date", width: 105}, {field: "name", title: "Topper"}, {field: "price", title: "Price", width: 125}],
height: 550,
filterable: true,
sortable: true,
pageable: true,
editable: true,
navigatable: true,
edit: function()
{
    //this.saveChanges()
}
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-21T10:25:39.837

有一种更简单的方法可以实现这一点：在数据源上将 autoSync 设置为 true：[https ://docs.telerik.com/kendo-ui/api/javascript/data/datasource/configuration/autosync](https://docs.telerik.com/kendo-ui/api/javascript/data/datasource/configuration/autosync)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-04-18T19:11:35.787

您还可以直接从网格中调用数据源同步，如下所示（确保使用 setTimeout，根据本文中[的](http://www.telerik.com/forums/incell-editing---saving-when-stepping-out-of-cell)Telerik ）...

```
save: function () {
     setTimeout(function() {
          yourDatasource.sync();
     }
} 
```

# c# - 使用类实例作为其输入 Arg 调用方法

> ID：14012265
> 
> 赞同：1
> 
> 时间：2012-12-23T15:38:37.150
> 
> 标签：c#, c#-4.0

我有两个非常简单的方法，其中一个我可以调用，另一个给我未找到的异常，这里是方法：

```
class SimClass
    {
        public int GeneralMethod1(int a)
        {
            return a;
        }

        public int GeneralMethod2(Input input)
        {
            return input.Numberi;
        }

    }
    class Input
    {
        public int Numberi { get; set; }
    } 
```

我可以简单地调用“GeneralMethod1”：

```
 Assembly assembly = Assembly.LoadFrom("C:\\Amir\\SimFIle.dll");
        Type type = assembly.GetType("SimFIle.SimClass");
        object instanceOfMyType = Activator.CreateInstance(type);

        object[] Args1 = new object[1]; Args1[0] = -1;
        object result = type.InvokeMember("GeneralMethod1",
              BindingFlags.Default | BindingFlags.InvokeMethod,
                   null,
                   instanceOfMyType,
                   Args1); 
```

但在调用“GeneralMethod2”时遇到问题：

```
 Input input = new Input { Numberi = -5};
    object[] Args2 = new object[1]; Args2[0] = input;
    object output = type.InvokeMember("GeneralMethod2",
          BindingFlags.Default | BindingFlags.InvokeMethod,
               null,
               instanceOfMyType,
               Args2); 
```

你能告诉我我的错误是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T15:51:13.437

我怀疑问题是你有一个不同的`Input`班级。您正在动态加载 SimFile.dll，但`Input`静态创建一个实例。这意味着`Input`您正在创建的类与您正在调用该方法的程序集中的类不同。

如果您的代码中已经*有*对的引用`SimFile.dll`，则不应显式加载它——这只会使事情变得混乱。如果您在项目中*没有*引用`SimFile.dll`，那么大概您正在创建一个完全不同`Input`类型的实例。

无论哪种方式，您都应该能够通过使用`Input`动态加载程序集中的类来解决问题：

```
Type inputType = assembly.GetType("Input")
object input = Activator.CreateInstance(inputType);
inputType.GetProperty("Numberi").SetValue(input, -5);

// Rest of code as before 
```

# jpa - ZK 与 Websphere 应用服务器 - 任何事件超时

> ID：14012270
> 
> 赞同：-1
> 
> 时间：2012-12-23T15:38:47.470
> 
> 标签：jpa, ejb, websphere, zk

我最近开始与 ZK 合作。我真的很喜欢这个框架，但是在配置它以使其与 Websphere Application Server v8.0 一起正常工作时遇到了很多问题。即，我正在开发一个 EJB 应用程序，它通过 JPA 实体访问数据库并使用 ZK 框架进行 GUI。我正在使用 Rational Software Architect 8.5 开发应用程序。

当我开始在新的工作区和服务器配置文件中处理新的 ZK 项目时，一切似乎都正常工作。但是，一段时间后，我开始遇到奇怪的问题。我认为问题发生在 ZK 尝试初始化我的 ViewModel 类的那一刻。我没有收到任何异常或错误，但在我的浏览器中收到超时消息：“您请求的页面或组件不再可用。这通常是由超时、打开太多网页或重新启动服务器引起的。”

我的 ViewModel 通过解析我用于业务逻辑的 EJB bean 进行初始化。这通常有效，但正如我所说，在项目上工作了一段时间后，或重新启动计算机后，ViewModel 对象无法初始化，并且无论我做什么都会出现超时错误（当 ZK 尝试绑定变量或当我触发需要由我的 ViewModel 处理的事件。和以前一样，我没有收到任何其他错误或异常。

有人已经有这个问题了吗？有解决办法吗？我可以更改我的服务器或 ZK 的配置来避免这个问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T16:36:15.843

似乎我已经自己解决了这个问题。我使用的是内部 Rational Software Architect (Eclipse) 浏览器，它在处理 ZK 会话时显然存在问题。当我切换到 Firefox 时，我解释的问题不再出现。

# jquery - 使用库时 Grails Jquery 验证停止工作

> ID：14012271
> 
> 赞同：0
> 
> 时间：2012-12-23T15:38:55.817
> 
> 标签：jquery, grails

我刚刚将 jquery 插件下载到我的 grails 应用程序中。验证停止工作。我注意到，如果我删除我放入的内容，验证将起作用。

我放了gsp头

```
<g:javascript library="jquery" plugin="jquery"/> 
```

配置文件

```
grails.views.javascript.library="jquery" 
```

gsp正文中的调用验证

```
<g:javascript src="submit.js"/> 
```

提交.js

```
$(function () {  

    $("#addDiseaseForm").validate({
        errorPlacement: function (error, element) {
            error.insertAfter(element);
        },
        rules: { 

            commonName: { 
                required: true      
            },
            scientificName: { 
                required: true      
            },

            imagedisease: {
                required: true,
                accept: "jpg|png|JPG|JPEG|PNG|GIF|gif|bmp|BMP"
            },
            imagesymptom: {
                required: true,
                accept: "jpg|png|JPG|JPEG|PNG|GIF|gif|bmp|BMP"
            },
            description: { 
                required: true      
            },
            virus: { 
                required: true      
            },
            spread: { 
                required: true      
            },
            prevent: {
                required: true
            },
            product:{
                required : true
            },
            supplier:{
                required : true                
            }, 
            projectddl: {
                required: true
            }

        } 
    }); 

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T22:51:14.443

在我的第一个项目中，我在 jQuery 和验证方面遇到了很多麻烦，现在我的解决方案是在 ApplicationRessources.groovy 中创建一个模块（或两个用于 jQuery UI），并在 js 文件夹中设置 jQuery 库的路径。

应用资源.groovy

```
jquery_min{
        resource url:"js/jquery.js"
... 
```

并在您的视图中使用 r:require

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T16:01:41.510

从头部移除不影响遥控功能。

```
<g:javascript library="jquery" plugin="jquery"/> 
```

# java - 无法读取文件异常

> ID：14012272
> 
> 赞同：1
> 
> 时间：2012-12-23T15:38:59.277
> 
> 标签：java, web-services, jax-ws, javax.imageio

我有一个 jaxws WebService，它允许 downloadImage（或者至少应该......） webservice 的 cod：

```
@WebService(name = "SimpleWebService")
@MTOM
@SOAPBinding(style = Style.RPC)
public class SimpleWebService {
@WebMethod
    public Image getImage(String imgName) throws IOException{
        System.out.println("Image name "+imgName);
        File fajl = new File(imgName);
        return ImageIO.read(new File(imgName));
    }
} 
```

我已经生成了客户端。包edu.pdfbookshelf.wsclient；

```
import java.awt.image.BufferedImage;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.IOException;
import java.io.InputStream;

import javax.activation.DataHandler;
import javax.imageio.ImageIO;

public class Client {

/**
 * @param args
 * @throws IOException_Exception 
 */
public static void main(String[] args) throws IOException_Exception {
     SimpleWebServiceService service = new SimpleWebServiceService();
       SimpleWebService port = service.getSimpleWebServicePort();

       byte[] imageIS = port.getImage("rainbow.jpg");
       ByteArrayOutputStream os = new ByteArrayOutputStream();
       InputStream fis = new ByteArrayInputStream(imageIS);
       DataHandler image = new DataHandler(new IStoDataSource(fis));
       dump(image);

}
 private static void dump(DataHandler dh) {
       System.out.println();
       try {
          System.out.println("MIME type: " + dh.getContentType());
          System.out.println("Content:   " + dh.getContent());
          InputStream in = dh.getInputStream();
          BufferedImage buffferedImage = ImageIO.read(in);
          ImageIO.write(buffferedImage, "jpg", new File("test.jpg"));
               }
           catch(IOException e) { System.err.println(e); }
        }

} 
```

当我尝试运行客户端时，出现异常：

```
SEVERE: Can't read input file!
javax.imageio.IIOException: Can't read input file!
        at javax.imageio.ImageIO.read(ImageIO.java:1291)
        at edu.pdfbookshelf.ws.SimpleWebService.getImage(SimpleWebService.java:143)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at com.sun.xml.ws.api.server.InstanceResolver$1.invoke(InstanceResolver.java:250)
        at com.sun.xml.ws.server.InvokerTube$2.invoke(InvokerTube.java:149)
        at com.sun.xml.ws.server.sei.SEIInvokerTube.processRequest(SEIInvokerTube.java:88)
        at com.sun.xml.ws.api.pipe.Fiber.__doRun(Fiber.java:1063)
        at com.sun.xml.ws.api.pipe.Fiber._doRun(Fiber.java:979)
        at com.sun.xml.ws.api.pipe.Fiber.doRun(Fiber.java:950)
        at com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:825)
        at com.sun.xml.ws.server.WSEndpointImpl$2.process(WSEndpointImpl.java:380)
        at com.sun.xml.ws.transport.http.HttpAdapter$HttpToolkit.handle(HttpAdapter.java:651)
        at com.sun.xml.ws.transport.http.HttpAdapter.handle(HttpAdapter.java:264)
        at com.sun.xml.ws.transport.http.servlet.ServletAdapter.invokeAsync(ServletAdapter.java:218)
        at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doGet(WSServletDelegate.java:159)
        at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doPost(WSServletDelegate.java:194)
        at com.sun.xml.ws.transport.http.servlet.WSServlet.doPost(WSServlet.java:80)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:679) 
```

我不知道为什么我得到那个例外。文件在根文件夹中。没有文件未找到异常，所以我认为路径很好。有什么想法可能是错的吗？为了创建 WebService 和客户端，我使用了[http://ojitha.blogspot.com/2012/02/jax-ws-binary-data-passing-using-mtom.html](http://ojitha.blogspot.com/2012/02/jax-ws-binary-data-passing-using-mtom.html)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T17:20:10.103

我认为错误在于

```
byte[] imageIS = port.getImage("rainbow.jpg"); 
```

应该

```
byte[] imageIS = port.getImage("/rainbow.jpg"); 
```

否则将被解释为相对于应用服务器启动目录的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T16:30:26.977

检查`imgName`文件的路径是否正确：

```
log.info("File exists?: " + new File(imgName).exists()); //or System.out.println(...);
log.info(imgName);
log.info(new File(imgName).getAbsolutePath()); 
```

如果一切正常 - 那么您的图像可能已损坏。如果您可以在您最喜欢的图像编辑工具中打开此文件 - 重新保存并覆盖它。

# matlab - 曲线的线性组合以匹配单个曲线

> ID：14012275
> 
> 赞同：1
> 
> 时间：2012-12-23T15:39:37.370
> 
> 标签：matlab, wolfram-mathematica

我有一组向量（长度为 50，本质上是一组曲线），我想尝试匹配另一条曲线（向量）并获得第一组中每个向量的系数以匹配第二条曲线。系数必须 >= 0.0 。即，第一组曲线的线性组合以匹配单条曲线。我应该朝哪个方向提供任何帮助都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T16:00:44.447

如果我理解正确，您有一组曲线 ![在此处输入图像描述](../Images/59830dc15c842b12be7f1cb70a5bbed7.png) ，您希望将每条曲线与一个比例因子相乘，以便它 ![在此处输入图像描述](../Images/e015d171c342713d5722ec52f630b33d.png) 尽可能接近地再现一些目标曲线。

这很容易通过线性最小二乘近似来完成。

```
%# create some sample curves
x = -10:0.1:10;
g1 = exp(-(x-3).^2/4);
g2 = exp(-(x-0).^2/4);
g3 = exp(-(x+2).^2/4);

%# make a target curve, corrupt with noise
y = 2*g1+4*g2+g3+randn(size(x))*0.2;

%# use the `ldivide` operator to solve an equation of the form
%# A*x=B
%# so that x (=fact here) is x=A^-1*B or, in Matlab terms, A\B
%# note the transposes, A should be a n-by-3 array, B a n-by-1 array
%# so that x is a 3-by-1 array of factors
fact = [g1;g2;g3]'\y'

fact =

    1.9524
    3.9978
    1.0105

%# Show the result

figure,plot(x,y)
hold on,plot(x,fact(1)*g1+fact(2)*g2+fact(3)*g3,'m') 
```

![在此处输入图像描述](../Images/ed40787e658e262309073712794df11f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:37:08.970

所以这就是他的意思！...mathematica 版本..

```
x = 表[i, {i, -10, 10, .1}];
基础 = {
        Exp[-(# - 3)^2/4] & /@ x,
        Exp[-(# - 0)^2/4] & /@ x,
        Exp[-(# + 2)^2/4] & /@ x
    };
节目[
     ListPlot[Table[{x[[i]], #[[i]]}, {i, Length[x]}] ,
              加入 -> True , PlotStyle -> Hue [Random[]]] & /@ based ]
y = 表 [ 2 基础[[1, i]] + 4 基础[[2, i]] + 基础[[3, i]] +
               RandomReal[{.5, .5}] ,{i, Length[x]}];
dataplot = ListPlot[表[{x[[i]], y[[i]]}, {i, Length[x]}] ]

```

如果你只是解决一个欠定系统，mathematica 不会神奇地做最小二乘，所以明确地找到一个最小二乘结果：

```
coefs = FindMinimum [
              总计[(#^2 & /@ (Sum[a[k] based[[k]] , {k, Length[basis]}]-y) )],
              数组[a, 长度[基础]]][[2]]
显示[数据图，
      列表图[i = 0; {x[[++i]], #} & /@
            （和[a[k]基[[k]]，{k，3}] /.coefs），
            加入 -> 真]]

```

请注意，如果您不想将系数限制为 >= 0，如所述，您可以像这样简单地将公式中的值平方：

```
coefs = FindMinimum [
             总计[(#^2 & /@
              (和[a[k]^2基[[k]], {k, Length[basis]}]-y))],
             数组[a, 长度[基础]]][[2]]
显示[数据图，
      列表图[i = 0; {x[[++i]], #} & /@
              (Sum[a[k]^2 based[[k]] , {k, 3}] /.coefs),
              加入 -> 真]]

```

如果实际的最佳拟合想要具有负值，您将得到可预见的糟糕结果。

# google-maps - 谷歌地图居中在较小的视口尺寸下失败

> ID：14012279
> 
> 赞同：1
> 
> 时间：2012-12-23T15:40:24.490
> 
> 标签：google-maps, google-maps-api-3

使用以下准系统代码：

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
<div id="map_area" style="width:100%;padding-bottom:100%;"></div>

<script type='text/javascript' src='https://maps.googleapis.com/maps/api/js?key=AIzaSyCfoIZz72NPrAPegHrWxqZtvzGkTASDXMc&sensor=false'></script>
<script type="text/javascript">
    var center = new google.maps.LatLng(38.504806, -122.470542);
    var mapOptions = {
      center: center,
      zoom: 13,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_area"),  mapOptions);
</script>
</body>
</html> 
```

示例可在[http://test.wcwddemo.com](http://test.wcwddemo.com)获得。

在较大的（例如桌面）视口尺寸下，它可以按预期工作，以加利福尼亚小镇圣赫勒拿岛为中心。

如果缩小视口的大小并刷新屏幕，在某个点（大约 625 像素的宽度），地图不再以城镇为中心。相反，城镇似乎以地图容器的下边界为中心。

从表面上看，这似乎是一个错误。我错过了什么吗？有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:32:45.543

您必须为 map_area 设置高度样式。

来自[文档](https://developers.google.com/maps/documentation/javascript/tutorial#Map_DOM_Elements)：*您必须始终`<div>`明确设置大小*

# sencha-architect - Sencha 架构师错误 - 似乎没有更新 app.js 文件中的视图列表

> ID：14012281
> 
> 赞同：0
> 
> 时间：2012-12-23T15:40:46.223
> 
> 标签：sencha-architect

我想我已经注意到 Sencha Architect 中的一个问题，即 app.js 视图集合属性没有更新。我删除了所有视图并添加了 2 个新视图，但视图数组并未反映我在项目中真正拥有的视图。似乎正在以某种方式忘记它所拥有的东西。

有没有人注意到这一点？是否有解决方法或解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:24:06.747

尝试重新启动 Architect。如果问题仍然存在，请检查您是否已在检查器的“应用程序”下的“视图”配置中添加了所有视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-29T02:10:16.430

对我来说，重新启动*并没有*解决它（在 Architect v2.2.3 中），所以我关闭了 Architect 并手动编辑了**元数据/应用程序**文件以删除失效的视图，然后当我重新启动 Architect 时它们就消失了。

# java - Java中的所有队列都是线程安全的吗？

> ID：14012282
> 
> 赞同：4
> 
> 时间：2012-12-23T15:40:52.220
> 
> 标签：java, concurrency, thread-safety, queue

Java中存在许多队列实现，如LinkedList、BlockingQueues。它们都是线程安全的吗？如果您的回答是否定的，哪些实现支持并发访问，哪些提供最佳性能？

注意：我使用的是 JDK 1.6。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-23T15:46:40.010

大多数标准集合都不是线程安全的。您在阅读 API 文档时会发现此信息。

例如[LinkedList](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html)的文档：

> 如果多个线程同时访问一个链表，并且至少有一个线程在结构上修改了链表，则必须对外同步

对于从多个线程访问的集合，您应该查看[java.util.concurrent](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)包

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-23T15:46:27.190

不`LinkedList`，例如不是线程安全的。

包中的那些`java.util.concurrent`是线程安全的。

最佳性能取决于您对它们的处理方式。而且您不会根据其性能选择实现，而是根据队列的行为方式以及您需要对队列执行的操作。例如， a`SynchronousQueue`的行为与 a`LinkedList`或 an完全不同`ArrayBlockingQueue`。

# automation - QTP，如何验证接受按钮是否与该用户相关？

> ID：14012283
> 
> 赞同：1
> 
> 时间：2012-12-23T15:41:15.863
> 
> 标签：automation, qtp

我对 QTP 有疑问，我的任务是验证请求是从特定用户发送的，并接受该请求给那个人。

你们中的任何人都可以帮助我如何验证请求已发送并单击指定用户的“接受请求”按钮。

请参阅下面的快照。如果我想验证“Cross31”用户发送的请求并单击该用户的“接受请求”按钮。

非常感谢您的帮助。

谢谢马奈萨![在此处输入图像描述](../Images/37dbc2d2feb0cd2616246253a01c92fc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:22:17.700

有几种方法可以做到这一点。

### VRI

可能最简单的一种是使用视觉关系标识符，为了做到这一点，您应该了解您对*cross31*感兴趣的用户和您想要的按钮，然后打开对象存储库转到按钮的属性和与*cross31*的关系。 ![VRI](../Images/746817ead5f23e8b163767f98d1e7397.png)

### XPath

假设这是一个 Web 应用程序，您可以在按钮的描述中输入一个 XPath，定义它与*cross31*元素的相对位置（假设您知道足够的 XPath）

### 对象层次结构

即使 QTP 通常会忽略不感兴趣的父项，您也可以手动添加按钮和人的共同祖先（假设它是唯一的）并将按钮拖动到该对象下方。

# c++ - 如何使用 C++ 以编程方式检测是否在 Windows 8 中启用了 UAC？

> ID：14012286
> 
> 赞同：4
> 
> 时间：2012-12-23T15:41:28.087
> 
> 标签：c++, windows-8, uac

在 Windows XP / Windows 7 中，我可以检查注册表以确定是否启用了 UAC，但这个技巧不适用于 Windows 8。

```
BOOL FileOps::IsUacEnabled()
{
    LPCTSTR pszSubKey = _T("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Policies\\System");
    LPCTSTR pszValueOn = _T("EnableLUA");
    DWORD dwType = 0;
    DWORD dwValue = 0;
    DWORD dwValueSize = sizeof( DWORD );

    if ( ERROR_SUCCESS != SHGetValue( HKEY_LOCAL_MACHINE, pszSubKey, pszValueOn, 
        &dwType, &dwValue, &dwValueSize) )
    {
            return FALSE;
    }

    return dwValue != 0;
} 
```

当从 Windows 8 使用时，此函数始终返回 UAC​​ 已启用。我见过的其他方法也失败了：

```
HANDLE hToken; 
TOKEN_ELEVATION_TYPE elevationType; 
DWORD dwSize;

OpenProcessToken(GetCurrentProcess(), TOKEN_QUERY, &hToken); 
GetTokenInformation(hToken, TokenElevationType, &elevationType, sizeof(elevationType), &dwSize);

bool bUAC_Enabled = false;

switch (elevationType) { 
case TokenElevationTypeDefault: 

  wprintf(TEXT("\nTokenElevationTypeDefault - User is not using a split token.\n")); 
  break; 
case TokenElevationTypeFull: 

  wprintf(TEXT("\nTokenElevationTypeFull - User has a split token, and the process is running elevated.\n")); 
  break; 
case TokenElevationTypeLimited: 

  wprintf(TEXT("\nTokenElevationTypeLimited - User has a split token, but the process is not running elevated.\n")); 
  break; 
}

if (hToken) { 
CloseHandle(hToken); 
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:59:29.640

在 Windows-8 中关闭 UAC 似乎与 Windows-7 不同。在 Windows-8 上，在“更改用户帐户控制设置”屏幕中向下滑动栏的功能不同。它根本没有禁用 UAC。以下[链接](http://www.windowsitpro.com/article/windows8/user-account-control-uac-144462)说：要真正禁用 UAC（在 Windows-8 上），您必须将注册表中 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System 的 EnableLUA 值修改为 0 并重新启动，但是这不是操作系统的受支持状态，并且会阻止现代应用程序 - 所以不要这样做。

[编辑]：该网站声称可以使用组策略在 Windows 8 上关闭 UAC 而不会为 MarketPlace 应用程序造成问题： [http ://www.petenetlive.com/KB/Article/0000687.htm#.UOnBsm_FWrs](http://www.petenetlive.com/KB/Article/0000687.htm#.UOnBsm_FWrs)

非常令人惊讶...似乎我将不得不更改程序的许多部分以支持 UAC :(

# ios - 无法在 iOS 6 上缩放 UIScrollView

> ID：14012290
> 
> 赞同：1
> 
> 时间：2012-12-23T15:41:50.850
> 
> 标签：ios, uiscrollview, ios6, zooming

有我的 .m 代码。

```
#import "ScrollZoomViewController.h"

@interface ScrollZoomViewController () <UIScrollViewDelegate>
@property (weak, nonatomic) IBOutlet UIImageView *imageView;
@property (weak, nonatomic) IBOutlet UIScrollView *scrollView;
@end

@implementation ScrollZoomViewController

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    NSLog(@"zooming");
    return self.imageView;
}

- (void)viewDidLoad {
    [super viewDidLoad];
    self.scrollView.minimumZoomScale = 0.5f;
    self.scrollView.maximumZoomScale = 5.0f;
    self.scrollView.delegate = self;

    self.imageView.frame = CGRectMake(0, 0, self.imageView.image.size.width, self.imageView.image.size.height);
    self.scrollView.contentSize = self.imageView.image.size;
} 
```

我正在使用 Xcode 4.5 和 iOS 6.0 并且 AutoLayout 已关闭。

图片可以滚动但不能缩放。这是因为iOS 6吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T17:03:20.360

您需要设置 zoomScale 属性的值才能开始缩放。在设置 scrollView 的 contentSize 后添加以下行。

```
self.scrollView.zoomScale = minimumZoomScale; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-21T19:03:18.403

尝试删除此代码： `self.scrollView.contentSize = self.imageView.image.size;` 并添加更多内容大小，而不是图像大小。

例如：您需要添加 self.scrollView.contentSize = CGSizeMake(1770, 2346);

希望这会解决。

# android - 使用 URL Scheme 启动应用程序时的 Android Back Stack

> ID：14012298
> 
> 赞同：1
> 
> 时间：2012-12-23T15:43:18.377
> 
> 标签：android, android-intent

我是 Android 开发的新手，所以我现在有一个关于 Back Stack 的问题。

我有一个应用程序，我在其中定义了一个使用自定义 URL 方案启动应用程序的意图。以这种方式启动 App 时，App 以 Activity 启动。按下后退按钮时，应用程序将关闭，我看到互联网应用程序带有我打开应用程序的链接。

我想要做的是在按下后退按钮时显示应用程序或应用程序主屏幕中打开的最后一个视图，而不是关闭它。

奇怪的是，当从返回堆栈上的 URL 打开应用程序只有一个视图时，查看意图过滤器的内容，然后我关闭应用程序（按返回），如果我打开主屏幕上的应用程序，我会看到返回堆栈我最后一次打开应用程序（不是来自 URL 方案）。

我做错了什么？PS：我在三星 Galaxy Ace 上测试过，姜饼

```
<activity android:name="com.myapp.engine.URLActivity"
                     android:label="@string/app_name" >         
         <intent-filter>
                 <data android:scheme="myapp"  />
                 <action android:name="android.intent.action.VIEW" />
                 <category android:name="android.intent.category.DEFAULT" />
                 <category android:name="android.intent.category.BROWSABLE" />
             </intent-filter>       
 </activity> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T16:45:24.617

Android以这种方式工作。您正在从您的应用程序调用外部应用程序的活动。尝试在清单文件中设置任务关联。我不确定这会奏效。

# hadoop - 在 mapreduce 中将文本文件的记录与同一文件中的所有其他记录连接起来

> ID：14012303
> 
> 赞同：1
> 
> 时间：2012-12-23T15:44:06.700
> 
> 标签：hadoop, mapreduce

这篇文章[xrds:article](http://xrds.acm.org/article.cfm?aid=2331053)在“一个权衡的例子”小节中描述了一种方法（第一个），将每条记录与输入文件的所有其他记录连接起来。我想知道如果不在一个映射器中传递整个输入文件，在 mapreduce 中怎么可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T15:56:03.660

MapReduce 有三种主要的连接类型（还有其他几种）。

**Reduce Side Join** - 对于两个数据集，您输出“外键”作为映射器的输出键。[您可以使用MultipleInputs](http://hadoop.apache.org/docs/r1.0.4/api/org/apache/hadoop/mapreduce/lib/input/MultipleInputs.html)之类的东西一次加载两个数据集。在 reducer 中，来自两个数据集的数据通过外键汇集在一起​​，这允许您在那里执行连接逻辑（可能像笛卡尔积）。这是通用的，几乎适用于所有情况。

**复制连接**- 您将较小的数据集推送到[DistributedCache](http://hadoop.apache.org/docs/r1.0.4/api/org/apache/hadoop/filecache/DistributedCache.html)中。在每种情况下，您都将较小的数据集从那里加载到内存中。当记录通过映射器时，将数据与内存数据集连接起来。这就是您在问题中的建议。只有当较小的数据集可以存储在内存中时才应该使用它。

**Composite Join** - 这个有点小众，因为它需要设置。如果两个数据集按外键*排序*和*分区*，则可以使用[CompositeInputFormat](http://hadoop.apache.org/docs/r1.0.4/api/org/apache/hadoop/mapred/join/CompositeInputFormat.html)进行复合连接。它基本上做了一个非常有效的类似合并的操作。

* * *

我的书[MapReduce 设计模式](http://shop.oreilly.com/product/0636920025122.do)的无耻插件：有一整章关于连接（第 5 章）。

在此处查看本书的代码示例：[https ://github.com/adamjshook/mapreducepatterns/tree/master/MRDP/src/main/java/mrdp/ch5](https://github.com/adamjshook/mapreducepatterns/tree/master/MRDP/src/main/java/mrdp/ch5)

# opencv - 使用 Kinect 进行人脸识别

> ID：14012304
> 
> 赞同：3
> 
> 时间：2012-12-23T15:44:09.823
> 
> 标签：opencv, kinect, face-detection, face-recognition

我浏览了微软提供的 Kinect SDK 和 Toolkit。测试了人脸检测样本，它成功了。但是，如何识别人脸？我知道 OpenCV (VS2010) 的基础知识。是否有任何用于人脸识别的 Kinect 库？如果不是，有哪些可能的解决方案？是否有任何可用于使用 Kinect 进行人脸识别的教程？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T04:10:15.877

我自己一直在做这件事。起初，我只是将 Kinect 用作​​网络摄像头，并将数据传递到以这段代码为模型的识别器中（它使用 Emgu CV 进行 PCA）：

[http://www.codeproject.com/Articles/239849/Multiple-face-detection-and-recognition-in-real-ti](http://www.codeproject.com/Articles/239849/Multiple-face-detection-and-recognition-in-real-ti)

虽然效果不错，但我认为我可以做得更好，因为 Kinect 具有如此出色的面部跟踪功能。我最终使用 Kinect 来查找人脸边界，对其进行裁剪，然后将其传递到该库中进行识别。我已经清理了代码并将其放在github上，希望它可以帮助其他人：

[https://github.com/mrosack/Sacknet.KinectFacialRecognition](https://github.com/mrosack/Sacknet.KinectFacialRecognition)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T21:58:51.217

我找到了对你来说可能是一个很好的来源的项目 - [http://code.google.com/p/i-recognize-you/](http://code.google.com/p/i-recognize-you/)但不幸的是（对你来说）它的主页不是英文的。最重要的部分：
-project（带有源代码）位于[http://code.google.com/p/i-recognize-you/downloads/list](http://code.google.com/p/i-recognize-you/downloads/list)
-in bibliography 作者提到了这个网站 - [http://www.shervinemami .info/faceRecognition.html](http://www.shervinemami.info/faceRecognition.html)。这对您来说似乎是一个很好的起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T17:05:02.410

Kinect 没有提供人脸识别的内置功能。我不知道有任何教程可以做到这一点，但我确定有人尝试过。它在我的短名单上；希望时间很快就会允许。

我会尝试保存面部跟踪信息并与之进行比较以进行识别。您将拥有一个“设置”功能，该功能会询问用户是否盯着 Kinect，并会保存面部跟踪器返回给您的点。当您希望识别人脸时，用户会看着屏幕，您会将人脸跟踪器点与人脸数据库进行比较。这大致就是 Xbox 的做法。

最大的技巧是置信水平。数字不会像以前那样完全返回，因此您需要为每个功能包含值的缓冲区——然后代码会返回“我 93% 确定这是 Bob”。

# spotify - 树莓派上使用 libspotify 12.1.51 的自动点唱机示例中的段错误

> ID：14012305
> 
> 赞同：1
> 
> 时间：2012-12-23T15:44:15.597
> 
> 标签：spotify, raspberry-pi, raspbian

运行点唱机示例时，我得到一个 SIGSEGVs（更新：spshell 也是如此）。版本详情：

libspotify 12.1.51、libc6、arm6t Raspberry Pi 软浮点 raspbian

gdb 输出：

点唱机：根列表同步（21 个播放列表） malloc()：smallbin 双链表损坏：0x00027f78 ***

# ruby-on-rails - 与两个控制器的会话

> ID：14012306
> 
> 赞同：0
> 
> 时间：2012-12-23T15:44:28.650
> 
> 标签：ruby-on-rails, model-view-controller

我有两个控制器：工人和任务。

`views/workers/index`包含：

```
<% @workers.group_by(&:name).each do |name, workers| %>
  <tr>
    <td><%= name %></td>
    <td><%= workers.size %></td>
  </tr>
<% end %> 
```

它向我显示了所有工人及其任务数量。

我想添加另一个名为：“显示所有任务”的 < **td > 并显示工人 X 的所有任务。**

**为了做到这一点，我想我需要类似的东西：**

```
<td><%= link_to 'show all tasks', worker_task_path(name) %></td> 
```

因此，我有`tasks_controller`：

```
def index
    @task = Worker.where(:name => params[:id]) respond_to do |format|
        format.html # show.html.erb
        format.json { render json: @worker }
    end
end 
```

这是`views/tasks/index`：

```
<% @task.each do |task| %>
  <tr>
    <td><%= task.name %></td>
    <td><%= task.task %></td>
    <td><%= task.done %></td>
  </tr>
<% end %> 
```

另外，我定义了`routes.rb`：

```
TODO::Application.routes.draw do
   #resources :workers
   #root to:"workers#index"

   match '/workers/:id/index', :to => 'tasks#index', :as => 'index_task'

   resources :workers do
   resources :tasks

end 
```

我想我没有正确定义 routes.rb ，因为**我的错误是**：

```
Routing Error

No route matches {:action=>"show", :controller=>"tasks", :worker_id=>"alon"}
Try running rake routes for more information on available routes. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:57:38.920

首先，您可以通过删除不必要的`match`指令来简化您的路线。通过声明：

```
resources :workers do
    resources :tasks
end 
```

您将任务资源嵌套到工作人员的资源中。然后可以使用以下命令访问您的任务索引：

```
workers/:id/tasks 
```

`id`你的工作模型的主键在哪里。

Rails 路径助手对单数/复数形式很敏感。调用中的路径`link_to`对应于包含任务列表（复数）的特定工作人员（单数）。Rails 路由器需要一个主键或模型实例作为 id 参数：

```
<%= link_to 'All tasks', worker_tasks_path(worker) %>
or
<%= link_to 'All tasks', worker_tasks_path(worker.id) %> 
```

# asp.net - 使用 IHttpHandler 和线程池 VS 使用 IHttpAsyncHandler

> ID：14012307
> 
> 赞同：0
> 
> 时间：2012-12-23T15:44:41.060
> 
> 标签：asp.net, asynchronous, ihttphandler

IHttpAsyncHandler 表示异步运行请求。

使用线程池也可以异步运行。

所以如果我想实现一个函数（比如 Comet，long poll），在使用带有 IHttpHandler 的线程池和使用 IHttpAsyncHandler 之间，哪个更好？

编辑：@Jon Skeet：感谢您耐心的回复。让我做一个结论。如果我在 IHttpHandler 中使用 delegate.BeginInvoke，处理请求的“主线程”仍然会一直旋转，直到请求结束，无论池线程发生了什么。如果我使用 IHttpAsyncHandler，处理请求的“主线程”将调用 BeginProcessRequest，然后将其释放（以处理其他请求）。BeginProcessRequest 方法将异步执行某些操作。当异步动作完成时，会调用 EndProcessRequest 方法。（或者我们可以说“主线程”将调用 EndProcessRequest 函数来完成当前请求）

以上都是我的想法，对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T17:07:15.227

不同之处在于，对于*真正*的异步模型，您根本不需要每个请求一个线程。如果每个请求都有一个线程，无论它是否在线程池中，您都将无法处理大量连接（因为您需要像长轮询这样的事情）。

假设你有 10 万个客户端，每个都长轮询——你真的想要 100,000 个线程吗？（提示：我怀疑你有足够的内存......）

使用真正的异步，您可以通过结束请求来对事件做出反应，*而无需*为每个请求指定一个专用线程。请注意，对于 C# 5 和 .NET 4.5，还有比使用更简单的方法`IHttpAsyncHandler`。这取决于您要实现的目标，但是 WCF 和 MVC 都具有面向异步的方法，您可以在其中编写异步方法，使用`await`表达式等。如果您然后等待本身不占用线程的东西（例如计时器，或者一些 IO 完成），那么您可以管理*大量*并发连接。

编辑：回答您的进一步问题：是的，如果您使用 just ，则*必须*在呼叫完成时完成`IHttpHandler`请求。您不能只是让它“悬空”......而允许请求仍在进行中，直到被调用。不过不要忘记这是一个非常古老的接口——它的文档记录不是很清楚，我不建议现在使用它，因为有明显更好的异步方法，特别是使用 .NET 4.5 和 C# 5。但是能够进行请求但没有任何特定线程与之关联的要点仍然成立。*`ProcessRequest``IHttpAsyncHandler``EndProcessRequest`*

# java - 每当您单击它时使用不同的图像重新绘制 JPanel

> ID：14012308
> 
> 赞同：3
> 
> 时间：2012-12-23T15:44:43.380
> 
> 标签：java, swing, repaint, mouselistener

我对 Java 还是很陌生，我有以下问题。正如您在下面看到的，我创建了一个带有图像的 JPanel，每当我单击面板时我想更改该图像，但由于某种原因它不起作用。我已经坐在上面几个小时了，似乎完全被卡住了。如果您能看一下代码并帮助我，我将不胜感激。谢谢你，圣诞快乐。

```
public class Level {
  JPanel panel
  String img1Path = "img1.png";
  String img2Path = "img2.png";
  Image img1 = Toolkit.getDefaultToolkit().getImage(img1Path);
  Image img2 = Toolkit.getDefaultToolkit().getImage(img2Path);
  boolean s1 = false;

  public Level(){
    initGUI();
  }

  public void initGUI(){
    panel = new JPanel(){
      public void paintComponent(Graphics g){
       super.paintComponent(g);
       draw(g,s1);
      }
    }
   panel.addMouseListener(new ImgListener(s1));
  }

  public void draw(Graphics g, boolean s){
    if(s==true){
      g.drawImage(img1,0,0,this);}
    else if(s==false){
      g.drawImage(img2,0,0,this);}
    }//draw()

  public void click(boolean s, boolean b){
    s = b;
    repaint();
  }

  public class ImgListener extends MouseAdapter {
    boolean s;

    public ImgListener(boolean s){
      pS(s);
    }

    public void mouseClicked(MouseEvent e){
      if(s==true){
        click(s,false);
      }
      else if(s==false){
        click(s,true);
      }
   }//mouseClicked

  public void pS(boolean s){
    this.s = s;
   }//pS

  }//ImgListener

}//Level 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T15:47:07.777

*Java始终*是按值传递的，因此您的 click 方法不会更改您的类的布尔字段：

```
public void click(boolean s, boolean b){
  s = b;  // this does not change the class field s.
  repaint();
} 
```

原因是`s`上面的参数与类的`s`字段不同，而是参数做了所谓的“阴影”类字段。一个解决方案是更改此方法并摆脱 s 参数。或者更好——**完全摆脱这种方法。**

请注意，如果这是我的应用程序，我会使用 JLabel，给它一个 MouseListener，然后在 mousePressed 上简单地交换 ImageIcons。

还有你的布尔切换方法：

```
public void mouseClicked(MouseEvent e){
  if(s==true){
    click(s,false); 
  }
  else if(s==false){
    click(s,true);
  }
} 
```

通过这样做并摆脱错误的 click(...) 方法，可以大大简化*和纠正：*

```
public void mouseClicked(MouseEvent e){
  s = !s;
  repaint();
} 
```

顺便说一句，`if (s == true)`这是不必要的多余。如果您需要这样的构造，您可以更简洁明了地执行`if (s)`. 相同的`if (s == false)`哪个更好地表示为`if (!s)`

# c++ - 理解 c++11 右值、移动语义和性能

> ID：14012309
> 
> 赞同：11
> 
> 时间：2012-12-23T15:45:04.117
> 
> 标签：c++, c++11, move-semantics, copy-elision, return-value-optimization

> **可能重复：**
> [如果我返回文字而不是声明的 std::string 会发生什么？](https://stackoverflow.com/questions/13857611/what-happens-if-i-return-literal-instead-of-declared-stdstring)

考虑以下代码

```
string getName () {
    return "meme";
}

string name = getName(); 
```

该函数`getName()`返回一个临时对象。在 C++03 中，我理解`string`被调用的拷贝构造函数和临时对象被销毁。实际上，编译器（至少在 GCC 4.7 中）似乎通过不创建对象`name`而是用临时对象本身替换它而不破坏临时对象来优化第 5 行。（我尝试了一个`MyVector`类，而不是 std::string）

根据 C++11 标准中的定义，

1.  是否`getName()`返回右值？

2.  在上面的第 5 行中，调用了哪个字符串的构造函数（移动或复制）？我是否必须调用`std::move()`移动构造函数来调用？

3.  使用移动语义，它是否比编译器提供的“复制省略”优化效率低？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-23T15:49:55.350

1.  函数不*返回*右值或左值。值类别适用于表达式。所以*调用*函数的表达式可能是右值或左值。在这种情况下，表达式`getName()`是一个右值表达式，因为该函数`getName`按值返回一个对象。这来自§5.2.2/10：

    > 如果结果类型是左值引用类型或对函数类型的右值引用，则函数调用是左值，如果结果类型是对对象类型的右值引用，则为 xvalue，**否则为纯右值**。

    您的函数结果类型不是左值或右值引用，因此函数调用是纯右值。prvalue 表达式是 rvalue 表达式的子集。

2.  将使用移动构造函数（除非它被省略，它可能是）。那是因为`getName()`是一个右值，所以它的构造函数`std::string`采用右值引用将更好地匹配参数。请注意，即使省略了移动构造，移动构造函数仍必须可访问。也就是说，即使没有省略，代码也必须是可编译的。

3.  一般来说，复制或移动省略的优化将完全摆脱任何复制或移动。因此，它当然比实际移动要快。如果一个动作被省略，实际上什么都不会发生。该动作不会发出任何代码。编译器通过直接在对象将被复制或移动到的位置构造对象来实现这一点。

值得一提的是，这也可以等效优化：

```
string getName () {
  std::string str("meme");
  return str;
}

string name = getName(); 
```

在这里，将省略两个动作（涉及通常所说的[命名返回值优化](http://www.efnetcpp.org/wiki/Return_value_optimization)）。这里有两点需要考虑。首先，`return str;`满足复制/移动省略的标准（§12.8/31）：

> 这种复制/移动操作的省略，称为*复制省略*，在以下情况下是允许的（可以组合起来消除多个副本）：
> 
> *   在具有类返回类型的函数的 return 语句中，当表达式是具有与函数返回类型相同的 cv 非限定类型的非易失性自动对象（函数或 catch 子句参数除外）的名称时，通过将自动对象直接构造到函数的返回值中，可以省略复制/移动操作
> *   ...

其次，虽然`str`它是一个左值，但它仍然会被移出，因为它符合标准给出的特殊情况（第 12.8/32 节）：

> 当满足或将满足复制操作的省略标准时，除了源对象是函数参数的事实，并且要复制的对象由左值指定时，选择复制的构造函数的重载决策是首先执行好像对象是由右值指定的。

# android - OpenGL ES CustomView 扩展了 GLSurfaceView 内容

> ID：14012314
> 
> 赞同：0
> 
> 时间：2012-12-23T15:45:46.373
> 
> 标签：android, opengl-es

我的主要活动如下。我将内容视图设置为 sfgameview 的实例。我也有一个渲染器，有点像（在底部），但我错过了 sfgameview 的内容（99% 的机会）或导致我的应用程序崩溃的东西。

```
package ---;

imports ---;    

public class Main extends Activity {

private SFGameView gameView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    gameView = new SFGameView(this);
    setContentView(gameView);

}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    gameView.onPause();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    gameView.onResume();
}

} 
```

渲染器：

```
package ---;

imports ---;

public class SFGameRenderer implements Renderer {

variables---;

@Override
public void onDrawFrame(GL10 gl) {
    // TODO Auto-generated method stub
    try {
        Thread.sleep(1000/60);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT|GL10.GL_DEPTH_BUFFER_BIT);

    gl.glEnable(GL10.GL_BLEND);
    gl.glBlendFunc(GL10.GL_ONE, GL10.GL_ONE);
}

@Override
public void onSurfaceChanged(GL10 gl, int width, int height) {
    gl.glViewport(0, 0, width, height);
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity();
    gl.glOrthof(0f, 1f, 0f, 1f, -1f, 1f);

}

@Override
public void onSurfaceCreated(GL10 gl, EGLConfig arg1) {

    gl.glEnable(GL10.GL_TEXTURE_2D);

    gl.glClearDepthf(1.0f);
    gl.glEnable(GL10.GL_DEPTH_TEST);
    gl.glDepthFunc(GL10.GL_LEQUAL);

    gl.glEnable(GL10.GL_BLEND);
    gl.glBlendFunc(GL10.GL_ONE, GL10.GL_ONE);

    variable.loadTexture(gl, BACKGROUND_LAYER_ONE,
            context);
    variable2.loadTexture(gl, BACKGROUND_LAYER_TWO,
            context);
} 
```

}

SFGameView：

```
package com.proandroidgames;

imports---;

public class SFGameView extends GLSurfaceView {

public SFGameView(Context context) {
    super(context);
    //this is empty and i dont know what to put..

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T02:30:14.143

您缺少的一件大事是 gameView.setRenderer(new SFGameRenderer())。这里缺少很多东西，所以其中任何一个都可能导致事情崩溃。

[您可以从Android OpenGL Training](http://developer.android.com/guide/topics/graphics/opengl.html)或[Android Lesson One: Getting Started](http://www.learnopengles.com/android-lesson-one-getting-started/)中获取运行示例。免责声明：我维护第二个链接站点。

# powershell - Team City 和 Power Shell

> ID：14012318
> 
> 赞同：4
> 
> 时间：2012-12-23T15:46:27.720
> 
> 标签：powershell, teamcity

我是团队城市的新手，正在尝试使用 REST API 调用部署工具。我正在尝试将 power shell 脚本传递给团队城市的 build.number。我的问题是如何从 TeamCity 运行 PS 脚本并将 $build 参数值传递给它

这是我的脚本：

```
param (
    [string]$build = "#build#"
)
$cred = New-Object System.Net.NetworkCredential("user", "password")
$url = 'http://server-ip:8080/datamanagement/a/api/create-release'
$request = [Net.WebRequest]::Create($url)

$request.ServicePoint.Expect100Continue = $false
$request.PreAuthenticate = $true

$request.Credentials = $cred
$request.Headers.Add("AUTHORIZATION", "Basic c3VwZXJ7482ewfc3974yOnN1c2Vy"); # user:pass encoded in base 64
$request.ContentType = "application/json"
$request.Method = "POST"

$data = (New-Object PSObject |
    Add-Member -PassThru NoteProperty environment "QA" |
    Add-Member -PassThru NoteProperty template "Regression on AutoNolio" |
    Add-Member -PassThru NoteProperty release "Nolio build: $build" |
    Add-Member -PassThru NoteProperty application "RunAutomation" |
    Add-Member -PassThru NoteProperty version "$build" |
    Add-Member -PassThru NoteProperty doStepsValidation "false" |
    Add-Member -PassThru NoteProperty releaseType "Major"
) | ConvertTo-JSON

Write-Host $data
#   Write-Host $cred.Password

$bytes = [System.Text.Encoding]::ASCII.GetBytes($data)

$request.ContentLength = $bytes.Length

$requestStream = [System.IO.Stream]$request.GetRequestStream()
$requestStream.write($bytes, 0, $bytes.Length)

$response = $request.GetResponse()

[IO.Stream] $stream = $response.GetResponseStream()
[IO.StreamReader] $reader = New-Object IO.StreamReader($stream)
[string] $output = $reader.readToEnd()
$stream.flush()
$stream.close()

# // return the text of the web page
Write-Host $output 
```

我正在设置以下配置：

![在此处输入图像描述](../Images/2da725c0b524971996ae64e40e5b0f46.png)

但是在运行 buld 时出现此错误：

```
[17:43:37]Checking for changes
[17:43:37]Publishing internal artifacts (1s)
[17:43:37]Clearing temporary directory: C:\BuildAgent2\temp\buildTmp
[17:43:37]Checkout directory: C:\BuildAgent2\work\467ac7a3aa06b293
[17:43:37]Updating sources: agent side checkout (3s)
[17:43:41]Starting: C:\Windows\sysnative\cmd.exe /c C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe -NonInteractive -build 14 -Command - <C:\BuildAgent2\temp\buildTmp\powershell3648184935303703255.ps1 && exit /b %ERRORLEVEL%
[17:43:41]in directory: C:\BuildAgent2\work\467ac7a3aa06b293
[17:43:41]-build : The term '-build' is not recognized as the name of a cmdlet, 
[17:43:41]function, script file, or operable program. Check the spelling of the name, or 
[17:43:41]if a path was included, verify that the path is correct and try again.
[17:43:41]At line:1 char:1
[17:43:41]+ -build 14 -Command -
[17:43:41]+ ~~~~~~
[17:43:41]    + CategoryInfo          : ObjectNotFound: (-build:String) [], CommandNotFo 
[17:43:41]   undException
[17:43:41]    + FullyQualifiedErrorId : CommandNotFoundException
[17:43:41] 
[17:43:41]Process exited with code 1
[17:43:41]Publishing internal artifacts
[17:43:42]Build finished 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T17:30:09.183

格雷默是正确的；您可以使用将内部`%build.number%`版本号插入脚本。为了扩展答案，这是 TeamCity 的许多[预定义构建参数](http://confluence.jetbrains.net/display/TCD7/Predefined+Build+Parameters)之一。如果您在代码文本框中键入一个开放的百分号，TeamCity 将显示一个下拉列表，其中包含您可以插入的所有可能参数。

你必须小心一些，因为它们是作为裸词插入到你的脚本中的。例如，如果您将常用配置文件存储在 中`%agent.work.dir%`，并尝试运行以下复制命令：

```
cp %agent.work.dir%\config .\config 
```

该命令将扩展为类似

```
cp C:\teamcity install\config .\config 
```

那是行不通的，因为 Powershell 会认为您正在尝试复制文件`C:\teamcity`。因此，请确保将整个论点放在引号内：

```
cp "%agent.work.dir%\config" .\config 
```

附带说明一下，使用带有自定义[配置参数](http://confluence.jetbrains.net/display/TCD7/Configuring+Build+Parameters#ConfiguringBuildParameters-ConfigurationParameters)的模板非常有用，因此您可以在多个构建配置中使用相同的脚本。这就像在语言中添加函数：您可以重用并易于修改。

此外，在 7.1.1 之前的 TeamCity 版本中，存在与运行脚本相关[的错误](http://youtrack.jetbrains.com/issue/TW-19771)`-Command`，其中 Script Execution Mode 设置为，因此如果您运行的是 7.0 或更早版本，则使用它会更安全`-File`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T05:10:12.597

```
param (
    [string]BuildNumber
    ) 
```

并且 `-BuildNumber %build.number%`在 TeamCity 设置中应该可以工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-28T18:54:55.907

使用“从外部文件执行 .ps1”，将参数放在“脚本参数”中，并将其从“附加命令行参数”中删除。

# android - 来自 DDMS 的 Android 触摸事件处理

> ID：14012324
> 
> 赞同：0
> 
> 时间：2012-12-23T15:48:17.943
> 
> 标签：android, events, touch, ddms, ontouchlistener

任何人都知道是否有办法将触摸事件添加到 DDMS 仿真器控件？不幸的是，我没有真正的设备，我想对 AVD 2.3.3 设备上的触摸事件进行一些实验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T16:14:03.960

您可以添加到您的 ontouch 方法：

```
...
StringBuilder sb=new StringBuilder();

@Override
public boolean onTouch(View v, MotionEvent event) {
sb.setLength(0);
switch (event.getAction()) {
case MotionEvent.ACTION_DOWN:
builder.append("down, ");
break;
case MotionEvent.ACTION_MOVE:
builder.append("move, ");
break;
case MotionEvent.ACTION_CANCEL:
builder.append("cancel", ");
break;
case MotionEvent.ACTION_UP:
builder.append("up, ");
break;
}
builder.append(event.getX());
builder.append(", ");
builder.append(event.getY());
String text = builder.toString();
Log.d("TouchTest", text);

return true;

} 
```

# ruby-on-rails - 使用 Rails gem 版本 3.2.9 时 Rails 服务器未运行

> ID：14012325
> 
> 赞同：0
> 
> 时间：2012-12-23T15:48:18.927
> 
> 标签：ruby-on-rails, rubygems, bundler, railstutorial.org

我创建了一个新的 Rails 项目。并使用了著名的 Michael Hartl 教程中使用的 gem 文件

```
source 'https://rubygems.org'
   gem 'rails', '3.2.9'
   group :development, :test do
   gem 'sqlite3', '1.3.5'
   gem 'rspec-rails', '2.11.0'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
gem 'sass-rails',   '3.2.5'
gem 'coffee-rails', '3.2.2'
gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.2'

group :test do
gem 'capybara', '1.1.2'
end

group :production do
gem 'pg', '0.12.2'
end 
```

运行 rails server 时收到此错误消息：

> 在机器运行捆绑安装的可用 gem 中找不到 gem rails..

我知道在 rails 3.2.9 上运行我已经用命令 rails -v 检查出了什么问题？我正在使用 Windows 7 - 64 位。我是一个 ruby​​ on rails 新手。当我更改为 gem rails 3.2.8 时，不再出现错误并且 rails 服务器成功运行。

更多错误我记得通过添加 gem 和运行 bundle install bundle update..etc 的试验

当我按照“ `console`”的建议运行捆绑安装时，开始出现许多不同的错误！第一的：

> em::Package::FormatError: no metadata found in..../activerecord -3.2.9 并且捆绑程序无法继续。确保 gem install activerecord -v '3.2.9' 在捆绑之前成功

然后我尝试将 gem 添加到我的 gem 文件中并再次运行 bundle install ，然后我收到错误消息，要求使用 activesupport gem。我已将其添加到 gem 并再次运行 bundle install ，尝试使用 bundle update ..不断出错，还要求使用 railties gem ...等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T21:11:21.393

我的猜测是安装 rails gem 出了点问题。卸载 rails（版本 2.3.9）并再次安装（运行`bundle`）。或者，如果您使用 rvm，请从干净的 gemset 开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:48:01.813

卸载 Railsinstaller 和相关的剩余文件夹。重新安装 Railsinstaller 并解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T15:58:29.227

`bundle exec rails console``bundle`如果您在 rails 根目录中运行，应该只给您一个控制台。

# javascript - 如何在 mouseleave 上禁用 bxSlider？

> ID：14012326
> 
> 赞同：0
> 
> 时间：2012-12-23T15:48:27.617
> 
> 标签：javascript, jquery, html, css, bxslider

是否可以在 mouseleave 上停用插件“bxSlider”？

```
$('.post').mouseenter(function() {   
         $('.content .bxSlider').each(function(){
             $(this).bxSlider({auto: 'true'});
         });
     }).mouseleave(function() {
         // ??
}); 
```

请指教...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T16:07:29.553

你为什么要阻止它？您是否希望它仅在悬停时自动前进？看看我相信你可以做到的[选项：](http://bxslider.com/options)

```
$('.content .bxSlider').each(function(){
         $(this).bxSlider();
});

$('.post').mouseenter(function() {   
         $('.content .bxSlider').each(function(){
             $(this).startAuto();
         });
     }).mouseleave(function() {   
         $('.content .bxSlider').each(function(){
             $(this).stopAuto();
         });
}); 
```

当然，这段代码可以稍微优化一下，也许可以使用一些变量来减少 dom 搜索的数量，但我认为这就是你所追求的 :)

**编辑**

对了，上面的行不通。除非滑块对象是变量，否则无法识别公共函数。我不知道为什么，但这是我解决它的方法：

```
var sliders = []; // store for the sliders

$('.content .bxSlider').each(function() {
    sliders.push($(this).bxSlider({auto: false})); // create a slider and store it
});

$('.post').mouseenter(function() {   
         $.each(sliders, function(i){
             sliders[i].startAuto(); // start each slider
         });
     }).mouseleave(function() {   
         $.each(sliders, function(i){
             sliders[i].stopAuto(); // stop each slider
         });
});​ 
```

它在这里工作：http: [//jsfiddle.net/KBfx9/](http://jsfiddle.net/KBfx9/) 希望有帮助！

**编辑 2** *触发嵌套幻灯片的解决方案：*

以前的解决方案是同时触发多个幻灯片。我在这里对其进行了修改：http: [//jsfiddle.net/KBfx9/1/](http://jsfiddle.net/KBfx9/1/)以触发嵌套幻灯片。**注意：**我只是使用类`.content`作为我的标识符而不是 post，因为在我的示例中后者是不需要的。此外，我使用容器`index()`来识别相关滑块，因为这将在 OP 链接到的页面中工作（在下面的评论中）。

希望这能为你分类:)

# reference - 我可以在解析来自 JDT AST 的源时使用 JDT 搜索引擎吗

> ID：14012331
> 
> 赞同：1
> 
> 时间：2012-12-23T15:49:20.357
> 
> 标签：reference, abstract-syntax-tree, eclipse-jdt

我正在使用 JDT AST 来解析给定的源。我想在使用 AST 时触发相关访问者时找到给定对象/变量的引用。例如：考虑以下代码：

```
public class SampleClass {
    public void printMe(){
        System.out.println("hello");
    }

    public static void main(String a[]){
        SampleClass s =new SampleClass();
        // do some other work
        s.printMe();
    }
} 
```

当我在解析上面的代码时，当涉及到“s”的变量声明时，它会调用“VariableDeclarationFragment”类型的visitor方法。那时我想在访问其余代码行之前找出变量“s”的所有引用。这可能吗？我想到了使用 JDT SearchEngine 并在那时调用以分别解析引用。但是没有成功。我可以只使用 AST 本身吗？

请注意，我在独立程序中使用 JDT AST，而不是作为 Eclipse 插件项目。在这种情况下我是否可以使用 SearchEngine 我有点困惑，因为它无法解析给定代码单元（类、方法等）的 IJava* 类型。请分享您的专业知识来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:44:24.860

使用搜索引擎是多余的。搜索引擎用于跨文件搜索。而且，如果没有启动工作台（即后台没有 Eclipse 实例），您将无法使用搜索引擎。

看起来您只想在同一个文件中查找对变量的引用。您最好的选择是创建一个访问者，该访问者将访问整个文件并查找对变量的引用。由于这些是变量，并且它们的作用域不会转义它们声明的方法，因此您只需要访问该方法。

像这样的东西：

```
class MyVariableVisitory extends ASTVisitor {
    public boolean visit(SimpleName node) {
        if (node.getIdentifier().equals(variableToLookFor)) {
            acceptMatch(node);
        }
        return true;
    }
} 
```

由于您只是在寻找对变量的引用，因此您只需要查看`Name`ast 节点。

# java - 尝试从输入流中检索文本时应用程序挂起

> ID：14012338
> 
> 赞同：0
> 
> 时间：2012-12-23T15:50:09.670
> 
> 标签：java, sockets, io, inputstream, serversocket

***情况***

我一直在创建一个程序来在 LAN 中的两台计算机之间交换消息。一台计算机将自己标识为服务器，而另一台计算机则是客户端。启动时，用户必须输入另一台计算机的主机和端口，如果他希望作为客户端连接到该计算机。它如何工作的设置非常基本：你输入你的信息，按回车键，它就会显示在你自己的屏幕上。之后，您的对话伙伴必须单击一个按钮以检索最新消息，并且它应该显示在他的屏幕上。这种情况一直持续到有人离开。

***问题***

程序正确启动并要求连接设置。之后，我在两台计算机上都启动了连接，一切似乎都很好（建立连接后，标签会显示您的状态，例如客户端或服务器，是 (1)）。当我输入一条消息并发送它时，事情继续看起来很好，输出被写入发件人的屏幕并且没有发生意外行为。

当我想在另一台计算机上检索消息时，程序完全冻结。GUI 中没有可点击的对象，也没有显示输出。

***代码***

假设连接正确建立（参见 (1)），我将在下面概述发送消息的过程，同时省略非必要部分。

```
GuiApplication.java

private void sendMessage() {
    connection.sendMessage(message);
    showMessage(message);
}

Connection.java
public void sendMessage(String message) {
    if (isClient()) {
        client.sendMessage(message);
    } else if (isServer()) {
        server.sendMessage(message);
    }
}

Client.java
public void sendMessage(String message) {
    outbound = new PrintWriter(socket.getOutputStream(), true); // Defined outside this method
    outbound.println(message);
} 
```

发送消息的过程非常简单，但我想包含它以防我忽略了某些内容。

下面是我为检索新消息而创建的代码。这个概念很简单：我检查是否有任何新消息，如果有，我就检索它们。

```
GuiApplication.java
if (connection.hasNewMessage()) {
    message = connection.retrieveMessage();
}
showMessage(message); 
```

第一部分 ( `connection.hasNewMessage()`) 将检查程序是否正在运行客户端或服务器并调用适当的`retrieveMessage()`.

```
Client.java
public String retrieveMessage() throws IOException {
    inbound = socket.getInputStream(); // Defined outside this method
    return IOUtils.toString(inbound, "UTF-8");
} 
```

起初我尝试`BufferedReader`使用一个`InputStreamReader`并调用该`readLine()`方法，但是一旦我发现它不起作用（与我目前面临的问题相同）就决定尝试 commons.io 方法。

***问题***

现在已经很清楚了：为什么我的程序会在我单击检索新消息的按钮时挂起？

***外部的***

我不确定它是否不受欢迎，但如果您想要更好的概述，[这里是](https://github.com/Vannevelj/ChatClient/tree/master/src)github 存储库，尽管我相信必要的代码剪辑器在那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T16:00:48.130

在不阅读您的所有解释和所有代码附件的情况下，我可以假设您正在读取或写入流到 UI 线程（例如，从 Action 或`ActionListener`直接调用 IO 操作并且您在读/写时被阻止。

请检查您的代码。我相信你会找到你打电话给`in.read()`或的地方`out.write()`。在该行之前和之后添加打印。你会看到你永远不会退出读或写。

这是因为对方没有进行相反的操作。所以，你必须：

1.  将 UI 与 IO 分离。IO 必须在单独的线程中完成。
2.  检查为什么其他方面会阻止您的流程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T16:15:41.083

我确实查看了您的代码，并且正如我所怀疑的那样，您的问题与您发布的代码完全无关。您的 GUI 完全忽略 Swing 线程规则，并在称为 Event D ispatch T 线程或 EDT 的主 Swing 事件线程**上****调用****长时间**运行的**任务**。由于该线程负责所有 Swing 绘图和用户交互，因此您的 GUI 无法执行此操作并完全冻结。

 ******有关这方面的详细信息，请阅读[Swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)中的并发。

下次，请发布一个[sscce](http://sscce.org)，这样我们就不必深入研究您的大量源代码！SSCCE 的关键是消除所有对您手头的问题不重要的代码。这不容易做到，需要你做很多工作来创建，以便它有足够的代码来运行，但不要太多以至于让我们淹没在代码中，但是你要求志愿者免费帮助你时间，所以要求不高。

祝你好运！******

# python - Django - 设置 urls.py 和 views.py

> ID：14012340
> 
> 赞同：3
> 
> 时间：2012-12-23T15:50:16.320
> 
> 标签：python, django, django-urls

我是 Django 新手，正在尝试配置我的 urls.py 和 views.py 文档。这可能是一个非常简单的问题，但我无法终生设置我的 urls.py 和 views.py 文档，以便 localhost/index 指向我创建的 index.html 文件。我已经完全按照 Django Project 教程进行操作，并尝试了很多很多变体，但这对我来说并不合适。任何帮助将非常感激！

index.html 文件位于 mysite/templates/index.html

我的文件夹结构是这样的...

```
 mysite/
      mysite/
           __init__.py
           settings.py
           urls.py
           wsgi.py
      app/
           __init__.py
           admin.py
           models.py
           tests.py
           urls.py
           views.py
      templates/
           css
           img
           js
           index.html 
```

我的views.py 包含：

```
 from django.http import HttpResponse
 from django.shortcuts import render_to_response
 from django.template import Context, loader
 from django.http import Http404

 def index(request):
     return render(request, "templates/index.html") 
```

更新：我的文件夹结构现在如下所示：

```
 mysite/
      mysite/
           __init__.py
           settings.py
           urls.py
           wsgi.py
           templates/
                     index.html
      app/
           __init__.py
           admin.py
           models.py
           tests.py
           urls.py
           views.py
      static/
           css
           img     
           js 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T16:13:01.337

除了设置您的`TEMPLATE_DIRS`in `settings.py`：

```
import os

ROOT_PATH = os.path.dirname(__file__)

TEMPLATE_DIRS = (    
    os.path.join(ROOT_PATH, 'templates'),
) 
```

### 我的网站/urls.py

```
urlpatterns = patterns('',
    url(r'^$', include('app.urls', namespace='app'), name='app'),
) 
```

### 应用程序/urls.py

```
urlpatterns = patterns('app.views',
    url(r'^$', 'index', name='index'),
) 
```

在您的`views.py`代码中，更改`templates/index.html`为`index.html`，模板应位于：

```
mysite/mysite/templates/index.html 
```

另一方面，您的`css`和`js`文件`img`夹最好放在其他位置，例如`mysite/static`文件夹。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T16:04:43.320

您是否在`TEMPLATE_DIRS`.

设置.py

```
# at start add this
import os, sys

abspath = lambda *p: os.path.abspath(os.path.join(*p))

PROJECT_ROOT = abspath(os.path.dirname(__file__))
sys.path.insert(0, PROJECT_ROOT)

TEMPLATE_DIRS = (
    abspath(PROJECT_ROOT, 'templates'), # this will point to mysite/mysite/templates
) 
```

然后将您的模板文件夹移动到`mysite > mysite > templates`

然后，不要`return render(request, "templates/index.html")`只是这样做`return render(request, "index.html")`。这应该有效。

你的目录结构应该是：

```
mysite/
      mysite/
          __init__.py
          settings.py
          urls.py
          wsgi.py

          templates/
              index.html
          static/
              css/
              js/
          app/
               __init__.py
               admin.py
               models.py
               tests.py
               urls.py
               views.py 
```

# android - android - 在自己的应用程序中的 webView 进度条

> ID：14012344
> 
> 赞同：1
> 
> 时间：2012-12-23T15:50:30.030
> 
> 标签：android, android-webview, webviewclient

嗨，伙计们，目前我正在开发自己的应用程序并且遇到了一些麻烦：我的计划是为不同的事物开发一个应用程序，其中一个是 webview。应通过应用程序主屏幕中的按钮调用此 webview。我已经阅读了一些关于这方面的教程，并在 stackoverflow 上进行了搜索，并在 webview 中找到了一些带有进度条的不错的解决方案。但问题是：进度条在我制作的应用程序中工作，它在开始时显示 web 视图完美。但是我用相同的代码制作的那个在点击按钮后会显示 webview 不起作用。

我已经在教程中描述了所有内容，并且该应用程序可以正常工作。但我不明白为什么只有一个没有按钮的工作......

这是一个屏幕截图： [工作与非工作进度条](http://s7.directupload.net/images/121223/gg7kocju.png)

在这里我上传了我的 eclipse 项目，一个带有工作进度条，一个带有应用程序中的按钮，应该打开 webview：[单击](http://www.file-upload.net/download-6963073/ProgressBarProblem.zip.html)

如果有人能指出我正确的方向，那就太好了。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T21:48:18.580

不正确的代码在您的 AndroidManifest.xml 中。

```
<activity
        android:name=".WebViewActivity"
        android:theme="@android:style/Theme.NoTitleBar" /> 
```

您指定了没有标题栏的主题，因此您也不会看到加载栏。只需删除主题属性：

```
<activity android:name=".WebViewActivity" /> 
```

此外，清单中的 sdk 版本和构建目标的 sdk 版本也有奇怪的组合。将其从 10 更改为 8，因为您的项目的构建目标是 Android 2.2 (API8)

```
<uses-sdk android:minSdkVersion="8" /> 
```

# vim - 防止 NERD 树在启动时打开缓冲区

> ID：14012345
> 
> 赞同：5
> 
> 时间：2012-12-23T15:50:31.000
> 
> 标签：vim, nerdtree, janus

我正在使用[Janus](https://github.com/carlhuda/janus)进行 Vim 自定义。

困扰我的一件事是它在启动时在单独的缓冲区中打开了[NERD 树。](https://github.com/scrooloose/nerdtree)我不想完全禁用 NERD 树。只是不想让它在开始时打开。

有没有办法*不调整*Janus 的内部结构？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T20:27:21.533

最后根据@romanl 提到的[Janus 配置想通了。](https://github.com/carlhuda/janus/blob/master/janus/vim/tools/janus/after/plugin/nerdtree.vim#L8)

我不得不添加到`~/.vimrc.after`

```
augroup AuNERDTreeCmd
  autocmd!
augroup end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-23T16:29:30.447

另一个“Vim 插件分发”用户选择将他的 Vim 配置完全控制权交给其他人，并且不知道如何更改默认行为。是的，“容易”比“难”好。

此行为可能定义在`autocmd`您的“janus”目录中的某个位置或用于存储其内容的任何内容中。也许[在这里](https://github.com/carlhuda/janus/blob/master/janus/vim/tools/janus/after/plugin/nerdtree.vim#L8)。

您可能应该借此机会重新考虑您的选择，完全放弃 Janus 并采用更明智的配置策略。

如果您是向您的`~/.vimrc`插件添加/删除内容的人，那么您根本无法发现自己​​处于这种情况。

# wolfram-mathematica - 如何在 Mathematica 中显示更多数字？

> ID：14012347
> 
> 赞同：1
> 
> 时间：2012-12-23T15:50:37.113
> 
> 标签：wolfram-mathematica, precision

> **可能重复：**
> [Mathematica 输出格式](https://stackoverflow.com/questions/8958531/mathematica-output-formatting)

号码

```
16744.036 
```

输出为

```
16744. 
```

这看起来很奇怪。

这个

```
N[16744.036, 20] 
```

也显示为

```
16744. 
```

我不知道如何准确地命名这种陌生感。但我需要避免这种情况。即不要隐藏我输入的数字。

计算机应该尊重他的用户，这是机器人的第二定律。

由于我在点后输入了 3 位数字，因此这很重要，计算机不应省略它。我知道它只是隐藏它，但可见性也是我的意愿。

如果这个一般要求在 Mathematica 中是不可能的，那么问题就是如何让更多的数字默认显示？

# google-chrome - 如何使用 chrome 扩展文件系统 api？

> ID：14012348
> 
> 赞同：9
> 
> 时间：2012-12-23T15:51:07.363
> 
> 标签：google-chrome, google-chrome-extension

嗨，作为例子，我想阅读

```
c:/x.txt 
```

作为文本

和写？有没有关于 chrome.fileSystem 的例子？

注意：我不想向用户询问文件的路径

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T00:31:11.107

我想已经在[Chrome Extension HTML Filesystem Access上回答了。](https://stackoverflow.com/questions/8218890/chrome-extension-html-filesystem-access)请注意，[`chrome.fileSystem`](http://developer.chrome.com/apps/fileSystem.html)仅存在于应用程序中，而不存在于扩展程序中。

要仅读取文件，请尝试请求[主机权限](http://developer.chrome.com/extensions/manifest.html#permissions)。[`file:///*`](http://developer.chrome.com/extensions/match_patterns.html)

# c# - 嵌套列表中的 MVC C# 自动模型绑定

> ID：14012354
> 
> 赞同：8
> 
> 时间：2012-12-23T15:51:25.243
> 
> 标签：c#, asp.net-mvc, model-binding

这是我的第一个 C#/MVC 项目，我在绑定到模型时遇到问题。我已经阅读了一篇应用[的 Phil Haack 的帖子](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)，并已将 EditorFor 用于我的所有部分视图。我需要自定义模型绑定器吗？请帮忙

简而言之，我有一个包含条目列表的周列表。这些条目包含小时列表

行动：

```
[HttpPost]
public ActionResult SubmitRecords(List<WeekCollection> itemData)
{
     //do stuff
     return View();
} 
```

模型：

```
public class WeekCollection
{
    public WeekCollection()
    {
        this.OneWeek = new List<Entry>();
    }

    public List<Entry> OneWeek { get; set; }
}

[Bind(Exclude = "Task, Project")]
public class Entry
{
    public int ProjectId { get; set; }
    public virtual Projects Project { get; set; }

    public int TaskId { get; set; }
    public virtual Tasks Task { get; set; }

    public bool Billable { get; set; }
    public List<Hours> Gethours { get; set; }
}

public class Hours
{
    public float NumberOfHours { get; set; }
} 
```

浏览量（索引）

```
//within partial view iteration with incrementing u (u++)
@using(@Html.BeginForm())
{ 
    @Html.EditorFor(m => m[u].OneWeek, "TimesheetWeek")
    <input type="Submit">
} 
```

观看次数（时间表周）

```
@foreach (var value in Model)
{
    v++;
    if (Model.All(x => x.projectId == 0))
    {
        @Html.DropDownListFor(p => p[v].projectId, (IEnumerable<SelectListItem>)projectList, "Select Project", new { @class = "notSelect" })
        @Html.DropDownListFor(t => t[v].taskId, (IEnumerable<SelectListItem>)taskList, "Select Task", new { @class = "notSelect" })
     }
     else
     {
        if (value.projectId != 0)
        {    
           @Html.DropDownListFor(p => p[v].projectId, (IEnumerable<SelectListItem>)projectList, new Dictionary<string, Object> { { "class", "SelectDrop" }, { "data-selectHead", value.projectId } })
           @Html.DropDownListFor(t => t[v].taskId, (IEnumerable<SelectListItem>)taskList, new Dictionary<string, Object> { { "class", "SelectDrop" }, { "data-selectHead", value.taskId } })
        }
     }

     @Html.CheckBoxFor(b => b[v].billable)
     @Html.EditorFor(h => h[v].gethours, "HoursDisplay")

     @value.gethours.Sum(a => a.numberOfHours)
     } 
```

查看（小时显示）

```
@for (var i = 0; i < Model.Count(); i++)
{
    @Html.TextBoxFor(m => m[i].numberOfHours)
} 
```

模型正确显示所有数据，发布的表单数据输出如下：

```
[0].OneWeek.[0].projectId:1
[0].OneWeek.[0].taskId:1
[0].OneWeek.[0].billable:true
[0].OneWeek.[0].billable:false
[0].OneWeek.[0].gethours.[0].numberOfHours:0
[0].OneWeek.[0].gethours.[1].numberOfHours:5
[0].OneWeek.[0].gethours.[2].numberOfHours:7
[0].OneWeek.[0].gethours.[3].numberOfHours:6
[0].OneWeek.[0].gethours.[4].numberOfHours:4
[0].OneWeek.[0].gethours.[5].numberOfHours:8
[0].OneWeek.[0].gethours.[6].numberOfHours:0 
```

我以为我的索引是正确的，但目前在行动中得到了一个空的 Oneweek。我究竟做错了什么？任何帮助表示赞赏。（一些重复和 HTML 已被删除）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T15:55:12.337

你的前缀是错误的。例如：

```
[0].OneWeek.[0].projectId:1 
```

应该：

```
[0].OneWeek[0].projectId:1 
```

您有一个额外的点 ( `.`)。再次阅读[Phil Haack 的文章，了解与列表绑定时的正确语法。](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

您对零件有同样的问题`gethours.[0]`。

我建议您使用标准编辑器模板约定，避免编写任何 foreach 循环和处理索引：

`~/Views/Home/Index.cshtml:`

```
@model List<WeekCollection>
@using(Html.BeginForm())
{ 
    @Html.EditorForModel()
    <input type="Submit" />
} 
```

`~/Views/Home/EditorTemplates/WeekCollection.cshtml`：

```
@model WeekCollection
@Html.EditorFor(x => x.OneWeek) 
```

`~/Views/Home/EditorTemplates/Entry.cshtml`：

```
@model Entry
... 
```

# ios - 应用内的日历视图

> ID：14012357
> 
> 赞同：0
> 
> 时间：2012-12-23T15:51:57.347
> 
> 标签：ios, ipad, ios6

任何人都可以建议我如何在我的本机应用程序中显示一个日历视图，其中包含所有事件以及我想要添加的任何内容。iOS 6 中是否提供了任何框架？我正在寻找的日历视图应该与 iCal(Day/Week/month) 完全相同，但在应用程序内部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:15:41.780

检查这个开源库[Tapku](http://developinginthedark.com/posts/iphone-tapku-calendar-markers)。在这种情况下，这应该会有所帮助。您也可以与[Kal](https://github.com/klazuka/Kal)检查。

您也可以尝试创建自己的一个。基本上你需要继承 a`UIView`并实现`drawRect`绘制它的方法。

# javascript - 如何到达滚动的元素？

> ID：14012366
> 
> 赞同：0
> 
> 时间：2012-12-23T15:53:18.120
> 
> 标签：javascript, jquery

所以，我想访问 an 元素并使用：

```
$('#classname').scroll(function(){
    // code here  
    alert("here");

});

$('#classname').ready(function(){
    // code here  
    alert("here");

}); 
```

我面临的问题是，调用了就绪函数但没有调用滚动，并且在通过 jquery 的 api 之后，我知道了这一点：

> 当用户滚动到元素中的不同位置时，滚动事件被发送到元素。它适用于窗口对象，也适用于将overflow CSS 属性设置为滚动（或当元素的显式高度小于其内容的高度时为自动）的可滚动框架和元素。

因此，当页面加载时，我能够获取 div。但是当我向下滚动以加载页面的其余部分时，不会触发`.ready`或`.scroll`事件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T16:35:34.237

听起来您正试图捕获滚动事件并在视图滚动时触发行为？你想要这样的东西：

```
$(document).ready(function() {
    $(".classname").on("scroll", function(event) {
        console.log($(event));
    });
}); 
```

你需要确保`.classname`它是可滚动的——例如，像这样：

```
<style type="text/css">
    .classname {
        height:600px;
        width:800px;
        overflow: auto;
    }
    .inner {
        height:1500px;
        width:800px;
        border:solid black 1px;
    }
</style>
<div class="classname">
    <div class="inner">
       text<br>
       text<br>
       text<br>
    </div>
</div> 
```

# php - 无法在wordpress中设置图像路径

> ID：14012367
> 
> 赞同：0
> 
> 时间：2012-12-23T15:53:23.133
> 
> 标签：php, wordpress

嗨，我将我的 wordpress 网站从一个文件夹移动到另一个文件夹。我也更改了管理面板设置中的路径。一切正常，期待幻灯片中的图像。

我单击 chrome 中的空白图像区域并检查元素。我发现，图像的路径没有改变。

示例：`test.domain.com` 文件夹：`public_html/test/mywebsite/` moved to ：`mywebsite.com` 文件夹：`public_html/mywebsite/`

我应该在哪里设置 wordpress 中的路径？

HTML

```
<div class="slide" style="background-image: url(http://mywebsite.com/home/javed001/public_html/test/mywebsite/wp-content/uploads/et_temp/Photoshopped-Grilled-Black.jpg); "> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:19:55.787

您需要在数据库中为媒体 URL 和帖子内容中的 URL 查找/替换 URL。一些 URL 也可能在主题选项中。

在您的主机上使用 phpmyadmin - 或自行安装或使用插件[http://wordpress.org/extend/plugins/portable-phpmyadmin/](http://wordpress.org/extend/plugins/portable-phpmyadmin/) - 并使用 phpmyadmin 的查找功能搜索旧 URL。

# highcharts - Highcharts样条图，按周，月求和显示？

> ID：14012370
> 
> 赞同：1
> 
> 时间：2012-12-23T15:54:28.997
> 
> 标签：highcharts

我有一个包含每日数据的样条图。我的数据是每日刻度。是否有可能让 HC 以每周或每月的刻度显示数据，而不是每天的？按周/月分组的数据应该是过去 7/30 天的总和，而不是平均值。

或者我必须在将其喂给 HC 之前手动对其进行预处理？

编辑：主图表配置：

```
var chart = new Highcharts.Chart({
    'chart':{
    'renderTo':'container',
    'type':'spline',
    'zoomType':'x'
}, 
```

JS Fiddle 示例图表：http: [//jsfiddle.net/gqWLU/](http://jsfiddle.net/gqWLU/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-09T09:07:03.637

我们围绕这个尝试了一个 Hack，我们使用了 Highstock 的（Splinechart）[RangeSelector](http://api.highcharts.com/highstock#rangeSelector)、 Event 和[DataGrouping](http://api.highcharts.com/highstock#plotOptions.area.dataGrouping)。单击每周 rangeselectorButton 时，我们通过[setExtremes](http://api.highcharts.com/highstock#xAxis.events.setExtremes)捕获此事件。捕获事件后将其近似为“总和”。如果您使用两个系列而不是迭代对象。

```
 events: {
         setExtremes: function (e) {
             if (e.rangeSelectorButton != undefined) {
                 var triger = e.rangeSelectorButton;
                 if (triger.type == 'week') {
                     $.each(this.series, function (index, obj) {
                         obj.options.dataGrouping.units[0] = ['week', [1]];
                     });
                 } else if (triger.type == 'day') {
                     $.each(this.series, function (index, obj) {
                         obj.options.dataGrouping.units[0] = ['day', [1]];
                     });
                 }
             }
         }
     }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:04:50.453

您可以利用**[`plotOptions.spline.dataGrouping.approximation`](http://api.highcharts.com/highstock#plotOptions.spline.dataGrouping.approximation)**Highstock 中提供的选项并将其设置为“总和”以进行近似，并将数据分组设置为 1 周。不幸的是，我认为核心 Highcharts 中没有这样的功能。

**代码**

```
dataGrouping: {
        approximation: "sum",
        enabled: true,
        units: [[
            'week',
            [1]
            ]]
    } 
```

**[数据分组/聚合 | Highchart & Highstock @ jsFiddle](http://jsfiddle.net/jugal/UEXAG/)**

# c# - 如何在一个列表框中构建具有不同控件的列表框项目

> ID：14012373
> 
> 赞同：0
> 
> 时间：2012-12-23T15:55:12.120
> 
> 标签：c#, xml, silverlight, windows-phone-7, listbox

在我的应用程序中，我显示了来自社交网络 vkontakte（俄罗斯 facebook:) 的新闻源。我向服务器发送请求并接收一个 xml 文件，其中包含大约 50 个新闻源项目。xml 示例（2 项，共 50 项）

```
 <item>
  <type>post</type>
  <source_id>-26406986</source_id>
  <date>1356207001</date>
  <post_id>1058858</post_id>
  <text>#Суть на #lm.</text>
  <attachment>
    <type>photo</type>
    <photo>
      <pid>293678498</pid>
      <aid>-7</aid>
      <owner_id>-26406986</owner_id>
      <user_id>65647811</user_id>
      <src>http://cs406928.userapi.com/v406928811/61c7/Rjee0rUq3vU.jpg</src>
      <src_big>http://cs406928.userapi.com/v406928811/61c8/PSYiLcxlv9s.jpg</src_big>
      <src_small>http://cs406928.userapi.com/v406928811/61c6/26XXAbejR7U.jpg</src_small>
      <width>186</width>
      <height>604</height>
      <text />
      <created>1356203380</created>
      <access_key>ca379f61ca5de866ae</access_key>
    </photo>
  </attachment>
  <attachments list="true">
    <attachment>
      <type>photo</type>
      <photo>
        <pid>293678498</pid>
        <aid>-7</aid>
        <owner_id>-26406986</owner_id>
        <user_id>65647811</user_id>
        <src>http://cs406928.userapi.com/v406928811/61c7/Rjee0rUq3vU.jpg</src>
        <src_big>http://cs406928.userapi.com/v406928811/61c8/PSYiLcxlv9s.jpg</src_big>
        <src_small>http://cs406928.userapi.com/v406928811/61c6/26XXAbejR7U.jpg</src_small>
        <width>186</width>
        <height>604</height>
        <text />
        <created>1356203380</created>
        <access_key>ca379f61ca5de866ae</access_key>
      </photo>
    </attachment>
  </attachments>
  <comments>
    <count>47</count>
    <can_post>1</can_post>
  </comments>
  <likes>
    <count>167</count>
    <user_likes>0</user_likes>
    <can_like>1</can_like>
    <can_publish>1</can_publish>
  </likes>
  <reposts>
    <count>35</count>
    <user_reposted>0</user_reposted>
  </reposts>
  <post_source>
    <type>vk</type>
  </post_source>
</item> 
```

每个项目都可以有不同的内容`<attachments>`（文本、照片、视频、音频、文档、文本 n 照片、文本 n 音频以及该五线谱的所有可能组合）。我已经在这里问过这个问题。我有一个答案 - 使用模板选择器。嗯……我用过，现在我有 16 种不同`listbox`的物品，而且不是所有可能的组合。它在 xaml 中的代码非常庞大。示例，2 个模板：

视频和音频

```
 <!--VideonAudios-->          <local:NewsTemplateSelector.VideonAudios>
                                <DataTemplate>
                                    <Grid Name="VideoGrid" MaxHeight="2000" Tap="ListBoxTap"   >
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="75"/>
                                            <ColumnDefinition/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="75"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="28"/>
                                        </Grid.RowDefinitions>
                                        <Image Source="{Binding SourceImage}" Tap="GetUserInfo"  Width="75"/>
                                        <TextBlock Text="{Binding SourceName}"   FontSize="25" Grid.Column="1" TextWrapping="Wrap" />
                                        <TextBlock Grid.Column="1" TextWrapping="Wrap" Text="{Binding Copy_owner_name}"    FontSize="25" VerticalAlignment="Bottom" Margin="39,0,0,0" MaxHeight="35"/>
                                        <Image Source="{Binding Copy_owner_photo}" Grid.Column="1" HorizontalAlignment="Left" Height="35" Width="39" VerticalAlignment="Bottom" />
                                        <TextBlock Text="{Binding Video[0].Title}"    FontSize="25" Grid.Column="1" Grid.Row="1" TextWrapping="Wrap"  VerticalAlignment="Top" Height="auto" />
                                        <Image Source="{Binding Video[0].Big}" Margin="10" Grid.Column="1" Grid.Row="2" Tap="Video_Tap"  />
                                        <ListBox Name="audiosListbox" ItemsSource="{Binding Audio}"  MaxHeight="500" Margin="10" Grid.Column="1" Grid.Row="3" >
                                            <ListBox.ItemTemplate>
                                                <DataTemplate>
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="100"/>
                                                            <ColumnDefinition/>
                                                        </Grid.ColumnDefinitions>
                                                        <TextBlock Text="{Binding Title}" TextWrapping="Wrap" Grid.Column="1"   FontSize="25" Tap="AudioTitleTap" />
                                                        <Button Content="Play"  Height="70" Tap="Audios_Button_Click" />
                                                        <TextBox Text="{Binding Count}" Tag="Count" Visibility="Collapsed" />
                                                    </Grid>
                                                </DataTemplate>
                                            </ListBox.ItemTemplate>
                                        </ListBox>
                                        <Image Source="\icons\appbar.check.rest.png" Grid.Column="1" HorizontalAlignment="Right" Grid.Row="4" Width="30" Margin="0,1.5,34,-1.5" d:LayoutOverrides="VerticalMargin"/>
                                        <TextBlock Text="{Binding Time}" Grid.Column="1" HorizontalAlignment="Left" Grid.Row="4"  />
                                        <TextBlock Text="{Binding Likes}" Name="LikeTxtBox" Grid.Column="1" HorizontalAlignment="Right" Grid.Row="4"   TextWrapping="Wrap" Width="30" Margin="0,0.5,0,-0.5"/>
                                        <Line X1="0" Y1="27" X2="420" Y2="27" Margin="0,-28,0,0" Stroke="Gray" StrokeThickness="1" Grid.Column="1"  />
                                        <Line X1="0" Y1="27" X2="80" Y2="27" Margin="0,-28,0,0" Stroke="Gray" StrokeThickness="1" />
                                        <TextBox Text="{Binding Video[0].Url}" Tag="VURL" Visibility="Collapsed" />
                                    </Grid>
                                </DataTemplate>
                            </local:NewsTemplateSelector.VideonAudios> 
```

它只有 16 个模板中的 2 个。嗯......它有效。 ![1](../Images/cd7f67682849868c2cc4abda90642cba.png)

![2](../Images/3a7c1fcee1fd829a9b3c4ff58f7bdbe9.png)

![3](../Images/124c8164dc0593e8fc967713a7fc258e.png)

但是，有时列表框会以一些奇怪的行为开始工作，我认为这是因为这个模板。现在，我必须在不同的页面上制作类似的列表框，我认为使用模板选择器不是一个好主意。谁能告诉我，有没有不同的方法来构建`listbox`具有不同内容的项目？

UPD：我解析 xml 的方式

```
 void c_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {
      //  string str = null;
        XDocument xml = XDocument.Load(e.Result); //полученый xml от апи вконтакта
        MessageBox.Show(xml.ToString());
        var inf = from c in xml.Descendants("item") // 
                  select c;
        int j = -1;
        int i = 0;
        App.New_From = (string)xml.Element("response").Element("new_from").Value;
        foreach (var item in inf)
        {
            #region static info
            i++;
            if (inf.Count() > i)
            {
                if ((string)item.Element("type").Value != "friend")
                {
                    New new1 = new New();
                    if ((string)item.Element("source_id").Value != null)
                    {
                        new1.SourseId = (string)item.Element("source_id").Value;
                    }
                    if ((string)item.Element("date").Value != null)
                    {
                       // MessageBox.Show(item.Element("date").Value);
                        new1.Time = App.GetTime(item.Element("date").Value);
                      //  MessageBox.Show(App.GetTime(item.Element("date").Value));
                    }
                    if (item.Element("photos") != null)
                    {
                        var photos = from c in item.Descendants("photo") // 
                                     select c;
                        foreach (var ph in photos)
                        {
                            PhotoAttachment photo = new PhotoAttachment();
                            photo.OwnerId = ph.Element("owner_id").Value;
                            photo.PId = ph.Element("pid").Value;
                            photo.Small = ph.Element("src_small").Value;
                            photo.Big = ph.Element("src_big").Value;
                            if (ph.Element("src_xxbig") != null)
                                photo.xBig = ph.Element("src_xxbig").Value;
                            else if (ph.Element("src_xbig") != null)
                                photo.xBig = ph.Element("src_xbig").Value;
                            else
                                photo.xBig = ph.Element("src_big").Value;
                            new1.photoAttachments.Add(photo);
                        }
                    }
                    if (item.Element("copy_owner_id") != null)
                    {
                        new1.Copy_owner_id = (string)item.Element("copy_owner_id").Value;
                    }
                    if (item.Element("post_id") != null)
                    {
                        new1.Post_id = (string)item.Element("post_id").Value;
                    }
                    if ((string)item.Element("text") != null)
                    {
                        new1.Texts = (string)item.Element("text");
                    }
                    if ((string)item.Element("comment") != null)
                        new1.Comments = (string)item.Element("comment").Element("count").Value;
                    if ((string)item.Element("likes") != null)
                        new1.Likes = (string)item.Element("likes").Element("count").Value;
            #endregion
                    if (item.Element("attachment") != null)
                    {
                        var vd = from c in item.Descendants("attachment")
                                 select c;
                        foreach (var content in vd)
                        {

                            if (content.Element("audio") != null)
                            {
                                AudioAttachment audio = new AudioAttachment();
                                audio.Title = (string)content.Element("audio").Element("title").Value;
                                audio.Perfomer = (string)content.Element("audio").Element("performer").Value;
                                string tmp = audio.Perfomer + " - " + audio.Title;
                                audio.Title = tmp;
                                audio.OwnerId = (string)content.Element("audio").Element("owner_id").Value;
                                audio.Audio_Id = (string)content.Element("audio").Element("aid").Value;
                                audio.Duration = (string)content.Element("audio").Element("duration").Value;
                                audio.Url = audio.OwnerId + "_" + audio.Audio_Id;
                                audio.Count = j++;
                                if (new1.audioAttachments.Count > 0)
                                {
                                    if (audio.Audio_Id == new1.audioAttachments[0].Audio_Id)
                                    {
                                        new1.audioAttachments.RemoveAt(0);
                                    }
                                }
                                new1.audioAttachments.Add(audio);
                            }
                            if (content.Element("photo") != null)
                            {
                                PhotoAttachment photo = new PhotoAttachment();
                                photo.OwnerId = (string)content.Element("photo").Element("owner_id").Value;
                                photo.PId = (string)content.Element("photo").Element("pid").Value;
                                photo.Small = (string)content.Element("photo").Element("src_small").Value;
                                photo.Big = (string)content.Element("photo").Element("src_big").Value;
                                if (content.Element("photo").Element("src_xxbig") != null)
                                    photo.xBig = (string)content.Element("photo").Element("src_xxbig").Value;
                                else if (content.Element("photo").Element("src_xbig") != null)
                                    photo.xBig = (string)content.Element("photo").Element("src_xbig").Value;
                                else
                                    photo.xBig = (string)content.Element("photo").Element("src_big").Value;
                                if (new1.photoAttachments.Count > 0)
                                {
                                    if (photo.Big == new1.photoAttachments[0].Big)
                                    {
                                        new1.photoAttachments.RemoveAt(0);
                                    }
                                }
                                new1.photoAttachments.Add(photo);
                            }

                            if (content.Element("video") != null)
                            {
                                VideoAttachment video = new VideoAttachment();
                                video.Title = (string)content.Element("video").Element("title").Value;
                                video.Description = (string)content.Element("video").Element("description").Value;
                                video.OwnerId = (string)content.Element("video").Element("owner_id").Value;
                                if ((string)content.Element("video").Element("image_small") != null)
                                    video.Small = (string)content.Element("video").Element("image_small").Value;
                                if ((string)content.Element("video").Element("image_big") != null)
                                    video.Big = (string)content.Element("video").Element("image_big").Value;
                                video.Video_Id = (string)content.Element("video").Element("vid").Value;
                                video.Url = video.OwnerId + "_" + video.Video_Id;
                                if (new1.videoAttachments.Count > 0)
                                {
                                    if (video.Big == new1.videoAttachments[0].Big)
                                    {
                                        new1.videoAttachments.RemoveAt(0);
                                    }

                                }
                                new1.videoAttachments.Add(video);
                            }

                            if (content.Element("link") != null)
                            {
                                new1.Priority = PostType.Link;
                                new1.Url.Title = (string)content.Element("link").Element("title").Value;
                                new1.Url.Description = (string)content.Element("link").Element("description").Value;
                                new1.Url.Url = (string)content.Element("link").Element("url").Value;
                                if ((string)content.Element("link").Element("image_src") != null)
                                    new1.Url.Image = (string)content.Element("link").Element("image_src").Value;
                                else if (new1.photoAttachments.Count > 0 && new1.photoAttachments[0].Big != null)
                                    new1.Url.Image = new1.photoAttachments[0].Big;
                                else if (new1.photoAttachments.Count > 0 && new1.photoAttachments[1].Big != null)
                                    new1.Url.Image = new1.photoAttachments[1].Big;

                            }
                        }
                    }

                    if (item.Element("comments") != null)
                    {
                        if (item.Element("comments").Element("can_post") != null)
                            new1.CanPost = Convert.ToInt32(item.Element("comments").Element("can_post").Value);
                    }

                    //str += string.Format("{0} {1} {2}\n", NewsList.Count, new1.audioAttachments.Count, new1.photoAttachments.Count);

                    if (new1.photoAttachments.Count == 0 && new1.videoAttachments.Count == 0 && new1.audioAttachments.Count == 0 && new1.urlAttachment.Url == null) new1.Priority = PostType.Text;
                    if (new1.photoAttachments.Count == 1 && new1.videoAttachments.Count == 0 && new1.audioAttachments.Count == 0 && new1.urlAttachment.Url == null) new1.Priority = PostType.Photo;
                    if (new1.photoAttachments.Count > 1 && new1.videoAttachments.Count == 0 && new1.audioAttachments.Count == 0 && new1.urlAttachment.Url == null) new1.Priority = PostType.Photos;
                    if (new1.photoAttachments.Count == 0 && new1.videoAttachments.Count == 1 && new1.audioAttachments.Count == 0 && new1.urlAttachment.Url == null) new1.Priority = PostType.Video;
                    if (new1.photoAttachments.Count == 0 && new1.videoAttachments.Count > 1 && new1.audioAttachments.Count == 0 && new1.urlAttachment.Url == null) new1.Priority = PostType.Videos;
                    if (new1.photoAttachments.Count == 0 && new1.videoAttachments.Count == 0 && new1.audioAttachments.Count == 1 && new1.urlAttachment.Url == null) new1.Priority = PostType.Audio;
                    if (new1.photoAttachments.Count == 0 && new1.videoAttachments.Count == 0 && new1.audioAttachments.Count > 1 && new1.urlAttachment.Url == null) new1.Priority = PostType.Audios;
                    if (new1.photoAttachments.Count == 1 && new1.videoAttachments.Count == 0 && new1.audioAttachments.Count == 1 && new1.urlAttachment.Url == null) new1.Priority = PostType.PhotonAudio;
                    if (new1.photoAttachments.Count == 1 && new1.videoAttachments.Count == 0 && new1.audioAttachments.Count > 1 && new1.urlAttachment.Url == null) new1.Priority = PostType.PhotonAudios;
                    if (new1.photoAttachments.Count > 1 && new1.videoAttachments.Count == 0 && new1.audioAttachments.Count == 1 && new1.urlAttachment.Url == null) new1.Priority = PostType.PhotosnAudio;
                    if (new1.photoAttachments.Count > 1 && new1.videoAttachments.Count == 0 && new1.audioAttachments.Count > 1 && new1.urlAttachment.Url == null) new1.Priority = PostType.PhotosnAudios;
                    if (new1.photoAttachments.Count == 0 && new1.videoAttachments.Count == 1 && new1.audioAttachments.Count == 1 && new1.urlAttachment.Url == null) new1.Priority = PostType.VideonAudio;
                    if (new1.photoAttachments.Count == 0 && new1.videoAttachments.Count == 1 && new1.audioAttachments.Count > 1 && new1.urlAttachment.Url == null) new1.Priority = PostType.VideonAudios;
                    if (new1.photoAttachments.Count == 0 && new1.videoAttachments.Count > 1 && new1.audioAttachments.Count == 1 && new1.urlAttachment.Url == null) new1.Priority = PostType.VideosnAudio;
                    if (new1.photoAttachments.Count == 0 && new1.videoAttachments.Count > 1 && new1.audioAttachments.Count > 1 && new1.urlAttachment.Url == null) new1.Priority = PostType.VideosnAudios;

                    NewsList.Add(new1);
                    new1 = null;
                }
            } 
```

我可以做类似的事情吗

```
 <local:NewsTemplateSelector.Content.Audios>
<ListBox Name="audiosListbox" ItemsSource="{Binding Audio}"  MaxHeight="500" Margin="10" Grid.Column="1" Grid.Row="3" >
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100"/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                <TextBlock Text="{Binding Title}" TextWrapping="Wrap" Grid.Column="1"   FontSize="25" Tap="AudioTitleTap" />
                <Button Content="Play"  Height="70" Tap="Audios_Button_Click" />
                <TextBox Text="{Binding Count}" Tag="Count" Visibility="Collapsed" />
            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox>
<local:NewsTemplateSelector.Content.Audios> 
```

和图像、视频、视频等类似。然后像这样使用它

```
<!--Audios-->
<local:NewsTemplateSelector.Audios>
<DataTemplate>
    <Grid Name="AudiosGrid" MaxHeight="2000" Tap="ListBoxTap"    >
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="75"/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="75"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="28"/>
        </Grid.RowDefinitions>
        <Image Source="{Binding SourceImage}" Tap="GetUserInfo"  Width="75"/>
        <TextBlock Text="{Binding SourceName}"   FontSize="25" Grid.Column="1" TextWrapping="Wrap" />
        <TextBlock Grid.Column="1" TextWrapping="Wrap" Text="{Binding Copy_owner_name}"    FontSize="25" VerticalAlignment="Bottom" Margin="39,0,0,0" MaxHeight="35"/>
        <Image Source="{Binding Copy_owner_photo}" Grid.Column="1" HorizontalAlignment="Left" Height="35" Width="39" VerticalAlignment="Bottom" />
        <TextBlock Text="{Binding Texts}"    FontSize="25" Grid.Column="1" Grid.Row="1" TextWrapping="Wrap"  VerticalAlignment="Top" Height="auto" />
        <local:NewsTemplateSelector.Content.Audios>
        </local:NewsTemplateSelector.Content.Audios>
        <Image Source="\icons\appbar.check.rest.png" Grid.Column="1" HorizontalAlignment="Right" Grid.Row="3" Width="30" Margin="0,1.5,34,-1.5" d:LayoutOverrides="VerticalMargin"/>
        <TextBlock Text="{Binding Time}" Grid.Column="1" HorizontalAlignment="Left" Grid.Row="3"  />
        <TextBlock Text="{Binding Likes}" Name="LikeTxtBox" Grid.Column="1" HorizontalAlignment="Right" Grid.Row="3"   TextWrapping="Wrap" Width="30" Margin="0,0.5,0,-0.5"/>
        <Line X1="0" Y1="27" X2="420" Y2="27" Margin="0,-28,0,0" Stroke="Gray" StrokeThickness="1" Grid.Column="1"  />
        <Line X1="0" Y1="27" X2="80" Y2="27" Margin="0,-28,0,0" Stroke="Gray" StrokeThickness="1" />
    </Grid>
</DataTemplate> 
```

不是

```
<!--Audios-->
<local:NewsTemplateSelector.Audios>
<DataTemplate>
    <Grid Name="AudiosGrid" MaxHeight="2000" Tap="ListBoxTap"    >
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="75"/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="75"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="28"/>
        </Grid.RowDefinitions>
        <Image Source="{Binding SourceImage}" Tap="GetUserInfo"  Width="75"/>
        <TextBlock Text="{Binding SourceName}"   FontSize="25" Grid.Column="1" TextWrapping="Wrap" />
        <TextBlock Grid.Column="1" TextWrapping="Wrap" Text="{Binding Copy_owner_name}"    FontSize="25" VerticalAlignment="Bottom" Margin="39,0,0,0" MaxHeight="35"/>
        <Image Source="{Binding Copy_owner_photo}" Grid.Column="1" HorizontalAlignment="Left" Height="35" Width="39" VerticalAlignment="Bottom" />
        <TextBlock Text="{Binding Texts}"    FontSize="25" Grid.Column="1" Grid.Row="1" TextWrapping="Wrap"  VerticalAlignment="Top" Height="auto" />
        <ListBox Name="audiosListbox" ItemsSource="{Binding Audio}"  MaxHeight="500" Margin="10" Grid.Column="1" Grid.Row="2" >
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="100"/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="{Binding Title}" TextWrapping="Wrap" Grid.Column="1"   FontSize="25" Tap="AudioTitleTap" />
                        <Button Content="Play"  Height="70" Tap="Audios_Button_Click" />
                        <TextBox Text="{Binding Count}" Tag="Count" Visibility="Collapsed" />
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
        <Image Source="\icons\appbar.check.rest.png" Grid.Column="1" HorizontalAlignment="Right" Grid.Row="3" Width="30" Margin="0,1.5,34,-1.5" d:LayoutOverrides="VerticalMargin"/>
        <TextBlock Text="{Binding Time}" Grid.Column="1" HorizontalAlignment="Left" Grid.Row="3"  />
        <TextBlock Text="{Binding Likes}" Name="LikeTxtBox" Grid.Column="1" HorizontalAlignment="Right" Grid.Row="3"   TextWrapping="Wrap" Width="30" Margin="0,0.5,0,-0.5"/>
        <Line X1="0" Y1="27" X2="420" Y2="27" Margin="0,-28,0,0" Stroke="Gray" StrokeThickness="1" Grid.Column="1"  />
        <Line X1="0" Y1="27" X2="80" Y2="27" Margin="0,-28,0,0" Stroke="Gray" StrokeThickness="1" />
    </Grid>
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T16:13:15.987

通常，具有完全不同内容的每个 XML 组件（例如视频与图像，或者只是文本等）都需要不同的模板。但是您应该将模板定义到不同的 XAML 文件中，并将其作为资源字典添加到每个控件中。这样，您可以在 1 个地方定义模板并将它们导入所有控件，而无需复制/粘贴任何内容。您甚至可以使用`MergedDictionary`.

我不确定您是如何从该站点读取 XML 文件的，但也许您应该将它们解析为代码隐藏中的自定义对象，在更简单的类别中？这也会给您的应用程序带来更流畅的感觉。否则，在代码隐藏中解析 XML，识别它是什么类型的内容并填充您自己的“视频”、“图像”和“文本”对象。如果您可以将许多不同的 XML 部分分类到同一个对象中，那么从长远来看，您将不得不依赖更少的模板选择器/数据模板。

但是当然我在推测很多事情，希望这对您有所帮助。

编辑：

1.  不要在每个控件上手动提供“视觉”样式，而是在资源字典中定义样式并将默认字体大小、对齐方式、文本换行首选项等内容放入其中。然后你可以像这样使用它：`Style="{StaticResource=TextCommentStyle}"`.
2.  对于您的视频/音频/等控件，为您需要显示的每种类型的项目创建一个容器。每个不同的项目都应该有一个不同的 UserControl，它充当容器。
3.  然后，您可以使用模板选择器根据每个附件的标记仅显示您想要的 UserControl。我相信每个都应该托管在一个单独的 ListItem 中。

使用这种方法的优点是您将拥有更少的容器，并且您将让应用程序使用模板选择器“组合”它们。如果有视频和一些文本，那么数据模板应该使用它们各自的用户控件将视频放在 ListItem 中，将文本放在另一个 ListItem 中。如果您需要编辑视频的显示方式，您只需编辑 1 个视频 UserControl，它就会反映在整个应用程序中。WPF 控件的样式与此想法相同：将它们设置为样式，然后您可以在单个文件中全局更改它们。它更容易维护和调试。

# asp.net-mvc-4 - 使用 MVC 的搜索引擎：使用 JSON 和呈现客户端的优缺点

> ID：14012376
> 
> 赞同：1
> 
> 时间：2012-12-23T15:55:40.383
> 
> 标签：asp.net-mvc-4

我正在为我的项目实现一个搜索引擎，并且需要根据用户选择显示不同类型的搜索结果，例如图像、视频和文本。我正在考虑为每种搜索类型设置单独的视图模型并将 Json 结果返回到视图。然后在客户端，解析结果并相应地显示结果。

使用基于 JSON 的视图渲染系统的优缺点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T16:06:30.237

我认为您选择的方法非常好。

肯定有很多问题需要回答，例如，如果客户浏览器不支持 JavaScript（即 JavaScript 被禁用）怎么办？您会提供替代呈现方法还是假设所有客户都启用了 JS（例如，对于 Intranet 应用程序，您可以这样做假设）。

如果您检查 Google 的搜索，他们有非常相似的方法 - 搜索结果以 JSON 响应的形式出现并在页面中构建演示文稿。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T16:14:12.040

使用完全成熟的 JSON 解决方案是一个合理的选择，尤其是考虑到您正在构建一个可能不需要自行编制索引的搜索引擎。使用纯 javascript 解决方案会限制（其他）搜索引擎充分索引站点的能力，如果这对您很重要，那么这是一种不太理想的方法。以 JSON 形式交付将一些处理卸载到客户端，因此可以提高服务器的性能，因为它可以呈现更简单的 JSON，而不是生成 HTML。

我将采取的方法是渐进式增强。使用服务器端视图交付结果的第一页，然后通过 AJAX 交付后续页面 - 作为 JSON 结果交付并在客户端创建标记，或者作为 HTML 呈现在服务器端并插入到 DOM 中的适当位置。如果您在这种情况下选择 JSON，您需要意识到您将在客户端和服务器中复制视图呈现代码。

如果您选择采用完整的客户端方法，您可能希望使用类似[http://knockoutjs.com/的框架。](http://knockoutjs.com/)这将允许您使用客户端 MVC 方法。

# wicket - 如何在 apache wicket 中访问 li 标签

> ID：14012377
> 
> 赞同：1
> 
> 时间：2012-12-23T15:55:40.933
> 
> 标签：wicket

这似乎有点微不足道，但我不确定如何从 wicket API 访问 li 标签。想象一下，我有一个 html 代码，例如：

```
...
<li wicket:id="L1"><a wicket:id="A1">/<a></li>
... 
```

如何在此处获取对 li 行的引用并根据代码中的任何逻辑设置属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T16:54:06.047

WebMarkupContainer 似乎足以访问 li html 标记。

# python - 将脚本从 Powershell 转换为 Python-Regex 未按预期工作

> ID：14012378
> 
> 赞同：3
> 
> 时间：2012-12-23T15:55:47.893
> 
> 标签：python, regex

我正在尝试将 Powershell 脚本转换为 python 脚本。我打算使用 Shell 脚本来简化 grep 和 curl 的使用，但我决定使用 python 来简化 if 语句。这是我要转换的 Powershell 代码：

Powershell 代码（效果很好）：

```
$ReturnedRegExData = SearchStringAll -StringToSearch $Data -RegEx $ImgURLRegex 

if ($ReturnedRegExData) #Check Existance of Matches
{
    foreach ($Image in $ReturnedRegExImageData) #Run Through all Matches
    #Can then get the result from the group of results and run through them 1 at a time via $Image
}
else
{
    #exit
} 
```

这是我对 Python 的尝试，效果不太好

```
ReturnedRegExData = re.findall($ImgURLRegex , $Data)

if ReturnedRegExImageData: #Check existance of Matches (Works)
    print "found"
else:
    sys.stderr.write("Error finding Regex \r\n")
    return

$For Loop running through results 
```

re.search 使用此打印 ReturnedRegExImageData.group(0)，但我想找到所有匹配项，并且非常难以复制 foreach ($Image in $ReturnedRegExImageData) 这一行：我尝试过使用 for Image in ReturnedRegExData 和从 0 到 len(ReturnedRegExData) 的 for 循环，但它们不返回有效数据。我知道 Python 应该是简单的编码，但我很难处理它。

我已经阅读了 .match、/search 和 .findall 的类似帖子，它们都涉及搜索部分，但没有涉及如何以有用的格式获得结果。我已经浏览了手册，但我也很难理解这一点。

如何遍历 findall 找到的结果，是否返回 0、1 或更多结果。0 应该被 if 语句覆盖。

感谢您的任何帮助，您可以提供。

Ĵ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T16:12:04.870

该`findall`函数返回一个字符串列表。因此，您可以执行以下操作：

```
found = re.findall(img_url_regex, data)
if not found: # the list is empty
    sys.stderr.write("Error finding Regex \r\n")
else:
    for imgurl in found:
        print 'Found image:', imgurl
        # whatever else you want to do with the URL. 
```

注意使用 $ 开始变量名是无效的 python；

```
In [3]: $foo = 12
  File "<ipython-input-3-38be62380e9f>", line 1
    $foo = 12
    ^
SyntaxError: invalid syntax 
```

如果要替换部分找到的 URL，可以使用`sub()`method. 它使用[`MatchObject`](http://docs.python.org/2/library/re.html#re.MatchObject). 下面是我自己的脚本之一的示例。`<img alt='pic' class="align-left" src="static/test.jpg" />`我用它来改变例如`<img alt='pic' class="align-left" src="static/images/test.jpg" />`

```
with open(filename, 'r') as f:
    data = f.read()
# fix image links
img = re.compile(r'src="[\./]*static/([^"]*)"')
data = img.sub(lambda m: (r'src="' + prefix + 'static/images/' + 
                          m.group(1) + r'"'), data)
with open(filename, 'w+') as of:
    of.write(data) 
```

# asp.net-mvc-3 - Ajax.Actionlink不加载PartialView，而是简单的View

> ID：14012379
> 
> 赞同：0
> 
> 时间：2012-12-23T15:55:49.353
> 
> 标签：asp.net-mvc-3, asp.net-ajax

我一直在冲浪，但仍然无法弄清楚我的代码有什么问题以及为什么它不起作用。

代码如下：

```
public ActionResult FindUser()
    {
        if (Request.IsAjaxRequest())
        {
            return PartialView();
        }
        return View();
    } 
```

它加载一个 PartialView，允许按名称查找用户：

```
@using (@Html.BeginForm("Find", "User"))
{
    @Html.TextBoxFor(u => u.UserName);
    @Html.HiddenFor(u => u.UserName);
    <input type="submit" value="Find" />
} 
```

Index 视图有一个 Actionlink：

```
@Ajax.ActionLink("Find user","FindUser",new AjaxOptions { UpdateTargetId = "forAjax", InsertionMode = InsertionMode.Replace})
<div id="forAjax"></div> 
```

我已经包含在视图中

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script> 
```

以及这些在我的配置中启用

```
<add key="ClientValidationEnabled" value="true" />
<add key="UnobtrusiveJavaScriptEnabled" value="true" /> 
```

但它仍然在新的“窗口”中加载我的 PartialView，但不在“查找用户”链接下方。我的浏览器中启用了 Javascript。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T16:05:15.723

确保您也已包括在内`jquery`，并且在包括以下内容**之前**`jquery.unobtrusive-ajax.js`已完成此操作：

```
<script src="@Url.Content("~/Scripts/jquery-1.7.1.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script> 
```

同样在您的部分视图中，您有一个标准表单，而不是 AJAX 表单。当您提交此表单时，不会有任何 AJAX 请求。如果您希望此表单与 AJAX 请求一起提交，请确保您`Ajax.BeginForm`在部分中使用了 an 而不是`Html.BeginForm`：

```
@using (Ajax.BeginForm("Find", "User", new AjaxOptions { UpdateTargetId = "forAjax", InsertionMode = InsertionMode.Replace }))
{
    @Html.TextBoxFor(u => u.UserName);
    @Html.HiddenFor(u => u.UserName);
    <input type="submit" value="Find" />
} 
```

您应该检查的另一件事是您在浏览器中使用的 javascript 调试工具的网络和控制台选项卡。在“网络”选项卡中查找 javascript 错误以及可能的 404。

# c# - WebRequest - 防止重定向

> ID：14012384
> 
> 赞同：1
> 
> 时间：2012-12-23T15:56:20.967
> 
> 标签：c#, redirect, httpwebrequest, httpwebresponse, http-status-code-302

我正在使用 a`WebRequest`来阅读 HTML 网站。服务器似乎正在重定向我的请求。

我的代码类似于以下内容：

```
 String URI = "http://www.foo.com/bar/index.html"
    WebRequest req = WebRequest.Create(URI);
    WebResponse resp = req.GetResponse();
    StreamReader sr = new StreamReader(resp.GetResponseStream());
    String returnedContent = sr.ReadToEnd(); 
```

当我检查它的内容时，`returnedContent`它包含来自重定向的内容，如“http://www.foo.com/FOO_BAR/index.html”。我确定我请求的 URL 存在，因为它是收到的响应的一部分（作为 IFrame）。

有没有办法防止`WebResponse`重定向并获取请求的 url 的内容？

**更新**

设置`req.AllowAutoRedirect = false`导致`302 Found`状态代码，但不传递实际内容。

更多详细信息：我请求的 url 是`http://www.foo.com/bar/index.html`我收到的内容位于`http://www.foo.com/FOO_BAR/index.html`

响应与此类似：

```
<body>
    <div>
        <iframe src="/foo/index.html"></iframe>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-23T16:01:45.803

您可以使用`HttpWebRequest`'[`AllowAutoRedirect`属性](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.allowautoredirect.aspx)：

```
…
var req = (HttpWebRequest)WebRequest.Create(URI);
req.AllowAutoRedirect = false;
… 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-13T17:46:25.943

我知道这是一个相当老的帖子，但我想我会分享我在特定情况下发现的内容......

我试图访问一个站点以查看是否有特定内容可用。我发现它一直从我请求的站点重定向到该站点的本地版本。我注意到一些负责重定向的 cookie。如果其他人遇到同样的问题，则可能存在 cookie 或其他请求标头，您可以使用它们来防止重定向远离您的预期目标。

就我而言，我所要做的就是这样：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
//whatever other headers you need...
request.Headers.Add(HttpRequestHeader.Cookie, "ipRedirectOverride=true"); 
```

请注意，这只是一个示例，您的 cookie 名称/值可能不同

# android - 如何更改按钮的主题？

> ID：14012386
> 
> 赞同：1
> 
> 时间：2012-12-23T15:56:28.220
> 
> 标签：android, button, themes

在我的应用程序中，我使用自己的主题“Theme.prehladna”，其中我使用“默认”主题“主题”作为父主题。问题是父主题“主题”包含所有按钮的主题：垂直/水平居中。我需要删除垂直居中。（如果我知道如何，那么我可以更改其他设置）。下面也是我的名为“Bttn.center”的按钮的主题，其中父主题是 widget.button（水平、垂直居中）。我尝试更改 Theme.prehladna 中的按钮主题（行及其下方），但以这种方式不起作用（显示错误未找到资源）。你能帮助我如何编辑我的代码来做我需要的事情吗？

****更新：* *** 下面的代码已更正，但我仍然有水平和垂直居中的按钮。下面的代码不知何故不会影响我的按钮。PS Theme.prehladna 应用于 android manifest 中的活动。我做错了什么？

样式.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

<style name="Theme.Prehladna" parent="android:Theme">
<item name="android:windowIsTranslucent">true</item>
<item name="android:windowBackground">@android:color/transparent</item>
<item name="android:windowContentOverlay">@null</item>
<item name="android:windowNoTitle">true</item>
<item name="android:windowIsFloating">true</item>
<item name="android:backgroundDimEnabled">false</item>

<!-- Button styles -->
<item name="android:buttonStyle">@android:style/Bttn.center</item> <<<<<<here Eclipse says No resource found<<<<<<<
CORRECT CODE: 
<item name="android:buttonStyle">@style/Bttn.center</item> 

</style>

<style name="Bttn.center" parent="android:Widget.Button">        
<item name="android:gravity">center_horizontal</item>      
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T16:45:05.583

您正在使用`@android:style/Bttn.center`，但您的样式不是 Android 框架中包含的默认样式。改用这个： `@style/Bttn.center`

# pdf - Wordpress - 为单个类别的所有帖子生成一个 PDF

> ID：14012390
> 
> 赞同：1
> 
> 时间：2012-12-23T15:57:12.043
> 
> 标签：pdf, wordpress

我想为一个类别的所有帖子生成一个 PDF 文件。我刚刚找到了创建单个帖子的 PDF 的插件。我想在单个 PDF/Word 文件中压缩“新闻”类别的所有帖子。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T21:52:20.487

一种选择是：

1.  创建一个名为`category-your_category_slug.php`. [这将使](http://codex.wordpress.org/Template_Hierarchy#Category_display)该模板在显示该特定类别时使用。我用`category-uncategorized.php`和 url进行了测试`http://example.com/category/uncategorized/`

2.  [修改查询](http://codex.wordpress.org/Template_Tags/query_posts)以显示所有帖子：

    ```
    <?php query_posts($query_string . '&posts_per_page=-1'); ?>
    <?php if ( have_posts() ) : ?> 
    ```

3.  如果您使用的是 Mac，则只需打印页面并选择选项`Save as PDF`
    我不能建议 Linux 或 Windows 选项，但这是快速搜索的问题

4.  导出为 PDF 后，删除模板

* * *

或者，更好的是，您可以执行以下操作：

```
<?php
    /**
     * Only modify the query if the url is:
     * http://example.com/category/your-category-slug/?print-pdf
     */
    if( isset( $_GET['print-pdf'] ) ) {
        query_posts($query_string . '&posts_per_page=-1'); 
    }

    if ( have_posts() ) : 
?> 
```

所以，只有在查看带有额外`?print-pdf`所有帖子的 URL 时，才会显示所有帖子，并且您可以使用系统打印功能，这将比您可以找到的任何 PHP/Plugin 选项**好得多**（至少，这是我的研究向我展示的）。

# javascript - JavaScript SQLite 事务回滚

> ID：14012391
> 
> 赞同：2
> 
> 时间：2012-12-23T15:57:29.827
> 
> 标签：javascript, sqlite, transactions

我正在为我的 Phonegap 应用程序开发一些数据库操作。我正在测试 SQLite 的事务功能，有一点我不明白。

这是一笔交易中的示例：

```
dbObj.dbConnection.transaction(function (tx) {
    tx.executeSql('INSERT OR IGNORE INTO foo (id, text) VALUES (?, ?)', [6,"aaalabala6"], function(tx, results) {
         document.write("make insert<br>");
      }, function (tx, err){
        alert(err.message);
      });

    tx.executeSql('CREATE TABLE foo (id unique, text)', [], function(tx, results) {

    }, function (tx, err){
        console.log(err.message); // here an error - table already exists
    });

    tx.executeSql('INSERT OR IGNORE INTO foo (id, text) VALUES (?, ?)', [7,"aaalabala7"], function(tx, results) {
         document.write("make insert<br>");
      }, function (tx, err){
        alert(err.message);
      });
}); 
```

中间 SQL 查询抛出错误（无法准备语句（1 表 foo 已存在）），因为表“foo”已存在。问题是，为什么事务不回滚？我可以以某种方式强制事务回滚错误吗？

我的陈述中有错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T16:02:55.100

要回滚整个事务，您的错误处理回调函数应该返回[，](http://developer.apple.com/library/safari/#documentation/iPhone/Conceptual/SafariJSDatabaseGuide/UsingtheJavascriptDatabase/UsingtheJavascriptDatabase.html#//apple_ref/doc/uid/TP40007256-CH3-SW3)`true`如下所述：

> **每次查询错误回调**
> 
> 每个查询的错误处理回调相当简单。如果回调返回 true，则整个事务将回滚。如果回调返回 false，则事务继续进行，就好像没有出错一样。
> 
> 因此，如果您正在执行一个可选的查询——如果该特定查询的失败不应导致事务失败——您应该传入一个返回 false 的回调。如果查询失败导致整个事务失败，则应传入一个返回 true 的回调。

现在错误处理程序返回`undefined`（因为没有明确`return`的声明），所以只有受影响的操作被跳过。

# sql - SQL 根据 DATE 条件连接三个表以产生两列

> ID：14012392
> 
> 赞同：1
> 
> 时间：2012-12-23T15:57:34.240
> 
> 标签：sql, sql-server-2008, tsql

假设我有三个这样的表：

```
TABLE_X     TABLE_Y     TABLE_Z
---------------------------------------
2012/1/1    a           b
2012/1/2    a           b
...         a           b
2012/3/17   a           b
2012/3/18   a           b
2012/3/19   a           b
...         a           b
2012/12/22  a           b
2012/12/23  a           b
2012/12/24  a           b
...         a           b
2013/1/1    a           b 
```

我需要做一个使用 GETDATE() 作为条件的视图。GETDATE() 上和过去的所有值都将采用`TABLE_Y`cols。GETDATE() 未来的所有值都将采用`TABLE_Z`cols。

```
view_TABLE_X_JOIN_Y_Z
---------------------
2012/1/1    a
2012/1/2    a
...         a
2012/3/17   a
2012/3/18   a
2012/3/19   a
...         a
2012/12/22  a
GETDATE()   a
2012/12/24  b
...         b
2013/1/1    b
2013/1/2    b 
```

我试过的：

```
SELECT x.Date
    ,CASE WHEN GETDATE() > x.Date THEN z.Value
    ELSE y.Value
    END AS Value
FROM TABLE_X x
LEFT JOIN TABLE_Y y ON x.Date = y.Date
LEFT JOIN TABLE_Z z ON x.Date = z.Date 
```

问题是日期不是完美的 FK 参考。即 TABLE_X 中的日期是完整的，但在 Y 和 Z 中的某些地方缺少它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T16:11:09.533

你可以使用这样的东西：

```
SELECT 
  CASE WHEN table_x.date_column > GETDATE() THEN table_y.some_column 
                                            ELSE table_z.some_column END
FROM table_x JOIN table_y JOIN table_z (insert appropriate join clauses) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T16:07:19.427

我不确定是否正确理解您的问题，但我认为这样做可以：

```
SELECT x.date, y.*
FROM x INNER JOIN y ON x.date = y.date
WHERE x.date <= GETDATE()

UNION

SELECT x.date, z.*
FROM x INNER JOIN z ON x.date = z.date
WHERE x.date > GETDATE() 
```

我假设 x、y 和 z 是不同的表，y 和 z 中的日期是引用 x 的外键，y 和 z 也应该具有相同的列结构

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T16:08:28.973

不确定，试试这个，

```
create view view_TABLE_X_JOIN_Y_Z as(select y.* from table_y y
where getdate() > (select date from TABLE_X x where y.date=x.date)
union all
select z.* from table_z z where getdate() <= (select date from TABLE_x x 
where z.date=x.date)) 
```

前提是，两个表应具有相同的列结构

# jquery - 通过jQuery将触发html代码片段的按钮添加到tinyMCE编辑器中

> ID：14012394
> 
> 赞同：2
> 
> 时间：2012-12-23T15:57:40.147
> 
> 标签：jquery, tinymce

我正在向应用程序中的 Tinymce 编辑器工具栏添加一个按钮，该按钮将粘贴为为编辑器中的内容定制的目录的 html 代码。

例如，对于在编辑器中找到的每个 h 级标签 (h1-h3)，我想插入一个 html 片段（一个包含目录*的 div）以及粘贴 <!--nextpage--> 注释标签进入目录 html 片段之前的源标记。

任何人都可以建议一个关于如何与 tinyMCE API 交互的示例教程，以便向编辑器添加一个按钮，该按钮触发本地 jQuery 函数以与编辑器的内容进行交互？

我的 html 片段将是：

```
<!--nextpage-->
<div class="toc">
    <h3>Table of Contents</h3>
    <ul>
        <li><a href="http://mysite.com/article-slug/">Introduction</a></li>
        <li><a href="http://mysite.com/article-slug/2">First h1-h3 heading</a></li>
        <li><a href="http://mysite.com/article-slug/3">Next h1-h3 heading</a></li>
    </ul>
</div> 
```

但是jQuery会根据页面URL和h1-h3元素的个数，专门为*这个页面动态生成内容，从而根据页面结构为用户动态生成TOC。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T16:48:30.913

只是想让您了解如何在 WordPress`tinyMCE`编辑器中添加按钮并使用该按钮将内容插入编辑器。在这个答案的底部我提供了我的插件的链接，你可以直接下载它并可以看到源代码。

以下代码直接从`WordPress`我开发的插件之一复制，`shortcode`以使用自定义添加到编辑器中`button`。此代码段转到`functions.php`

```
add_action( 'init', 'my_js_fiddle_init');
function my_js_fiddle_init() {
    if ( ! current_user_can('edit_posts') && ! current_user_can('edit_pages') ) {
        return;
    }
    if ( get_user_option('rich_editing') == 'true' ) {
        // call the add_plugin function to register the plugin(js) for tinyMCE
        add_filter( 'mce_external_plugins', 'add_plugin' );
        // call the function register_button to add a new button in the editor
        add_filter( 'mce_buttons', 'register_button' );
    }
}

function register_button($buttons) {
    array_push( $buttons, "|", "wpjsfiddle" );
    return $buttons;
}

function add_plugin($plugin_array) {
    //$plugin_array['wpjsfiddle'] = plugins_url('js/wp_js_fiddle.js', __FILE__ );
    $plugin_array['wpjsfiddle'] ="tinyMCE_plugin_file";
    return $plugin_array;
} 
```

这是你的`tinyMCE`插件，创建一个`js`文件并将代码放在这个文件中，例如你可以命名它`tinyMCE_plugin_file.js`，我在`add_plugin`函数中使用了这个名字

```
(function() {
    tinymce.create('tinymce.plugins.wpjsfiddle', {
        init : function(ed, url) {
            ed.addButton('wpjsfiddle', {
                title : 'Insert Js Fiddle',
                image : url+'/images/jsfiddle-icon.png',
                onclick : function() {
                var contentToInsert='this line will be inserted'; // change this
                ed.execCommand('mceInsertContent', false, contentToInsert);
            }
          });
      },
      createControl : function(n, cm) {
        return null;
      },
      getInfo : function() {
        return {
            longname : "Wp Js Fiddle",
            author : 'Sheikh Heera',
            authorurl : 'http://heera.it',
            version : "1.0"
         };
      }
    });
    tinymce.PluginManager.add('wpjsfiddle', tinymce.plugins.wpjsfiddle);
})(); 
```

您也可以从 WordPress 插件目录[下载我的插件](http://wordpress.org/extend/plugins/wp-fiddle/)并查看源代码。希望它有点帮助。

# javascript - Android：智能手机或平板电脑

> ID：14012395
> 
> 赞同：1
> 
> 时间：2012-12-23T15:57:52.413
> 
> 标签：javascript, android, webserver, browser

当收到来自 Android 设备的网络请求时，有没有办法知道它是来自智能手机还是来自平板电脑？如果必须预先应用任何 Javascript 调整 - 也很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-02T20:54:52.677

基本上通过检查用户代理

[这并非在所有情况下都有效（搜索移动）](http://www.webapps-online.com/online-tools/user-agent-strings/dv/brand125579/samsung-galaxy-tab-3)，但几乎所有情况下都应该在未来的版本中更好地工作。上面唯一的例外似乎是平板电脑上使用的不常见浏览器。

js

```
var appv= navigator.appVersion.toLowerCase();
if(appv.search("android") > -1 && !(appv.search("mobile"))){
  //is android tablet
}else if (appv.search("android") > -1){
  //is android phone
} 
```

# windows-runtime - 通过代码更改 WinRT 中的应用程序视觉状态

> ID：14012398
> 
> 赞同：0
> 
> 时间：2012-12-23T15:58:46.713
> 
> 标签：windows-runtime

是否可以通过代码更改页面（实际上是整个应用程序）的视觉状态？例如，我访问了一个仅在 Snapped 模式下显示的页面，在此页面上我有一个返回按钮可以转到上一页，但我还想将 Visual 状态更改为全屏。这可以实现吗？

非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:26:11.410

不，这是不可能的。shell 配置不受应用程序的限制。它可以作为用户操作的结果进入快照视图。

# sql-server-2008 - 存储过程在一个部分中给出多少个 Q 的回答和标记？

> ID：14012400
> 
> 赞同：2
> 
> 时间：2012-12-23T15:59:20.360
> 
> 标签：sql-server-2008, stored-procedures

我有以下表格：`Section, Questions, Answers`和`QuestionFlagged`。显示的响应`reviewId=4`：

```
Section 1: User Info
      Question 1: What is your name?        Bob Smith
      Question 2: what is your occupation?  Engineer
      Question 3: Your favorite color?  
Section 1: User Location
      Question 1: What is your work location?  New York, NY
      Question 2: What is your office floor?  5th
      Question 3: your street address?  12 wolf street 
```

我需要显示以下内容（需要有关 sql 的帮助）：

```
Review: 4 | Section 1: User Info | 3 questions | 2 Completed | Flagged: Yes 
```

我的桌子：

`Section`：

```
 SectionID int
 Title  nvarchar(50)
 Description nvarchar(2000) 
```

`Question`：

```
 QuestionID int
 SectionID int
 QuestionText nvarchar(2000)
 Required boolean
 DisplayOrder int 
```

`Response`：

```
ResponseID int
QuestionID int  
UserID int int
ReviewId int
AnswerValue nvarchar(1000) 
```

`QuestionFlagged`：

```
FlaggedID int
QuestionID int
ReviewId int
UserId int 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:59:35.483

根据您在下面的回复，我已经编辑了查询。我相信这应该会给你你想要的。

```
select  rsSectionAggregate.ReviewID, 
        rsSectionAggregate.SectionID, 
        Title, 
        QuestionCount, 
        QuestionsAnswered, 
        --Show whether there are flagged questions
        case 
            when QuestionsFlagged > 0 then 'Yes' 
            else 'No' 
        end as QuestionsFlagged
from 
(
    --first aggregate the results by section
    select r.ReviewID, rsSections.SectionID, Title, QuestionCount, COUNT(ResponseID) as QuestionsAnswered
    from
    (
        --this is done as a subquery so we know the total
        --number of questions for each section
        select s.SectionID, Title, COUNT(*) as QuestionCount
        from @Section s
        inner join @Question q on s.SectionID = q.SectionID
        group by s.SectionID, Title
    ) rsSections 
    inner join @Question q on rsSections.SectionID = q.SectionID
    left outer join @Response r on q.QuestionID = r.QuestionID
    group by r.ReviewID, rsSections.SectionID, Title,QuestionCount
) rsSectionAggregate
left outer join
(
    --here we determine if any questions are flagged for a given review
    --by counting them.
    select qf.ReviewID, COUNT(*) as QuestionsFlagged
    from @QuestionFlagged qf
    group by qf.ReviewId
) rsFlagged on rsFlagged.ReviewId = rsSectionAggregate.ReviewId
where rsSectionAggregate.ReviewID = 4 
```

我正在使用这个[SQLFiddle](http://sqlfiddle.com/#!3/d41d8/7447)。

如果您需要创建存储过程的语法，我可以将其编辑到答案中，但这很容易通过 Google 搜索。

# gwt - GWT Highcharts 工具提示定位

> ID：14012403
> 
> 赞同：2
> 
> 时间：2012-12-23T15:59:40.280
> 
> 标签：gwt, highcharts

使用 GWT-Highcharts，我正在尝试为工具提示设置一个定位器：

```
ToolTip tooltip = new ToolTip();
tooltip.setOption("positioner", "function (labelWidth, labelHeight, point) { return { x: 160, y: 160 };"); 
```

这真的行不通，我得到

```
Uncaught TypeError: Object function (labelWidth, labelHeight, point) { return { x: -160, y: -160 }; has no method 'call' 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:46:13.083

我不明白用例。据我了解，您正在使用 Configurable setOption 并希望提供函数调用。但是为什么只返回静态 x/y 值（如 160/160）？

你可以做

```
tooltip.setOption("/positioner/x", "160");
tooltip.setOption("/positioner/y", "160"); 
```

为了达到同样的...

# mysql - 如何根据先前的连接检查另一个 MYSQL 连接？

> ID：14012404
> 
> 赞同：0
> 
> 时间：2012-12-23T15:59:53.803
> 
> 标签：mysql, sql, database, join

我有以下方案：

```
CREATE TABLE IF NOT EXISTS `connections` (
`username1` varchar(15) NOT NULL,
`username2` varchar(15) NOT NULL,
PRIMARY KEY (`username1`,`username2`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

INSERT INTO `connections` (`username1`, `username2`) VALUES
('guy', 'maricela'),
('maricela', 'guy'),
('mikha', 'guy');

CREATE TABLE IF NOT EXISTS `users` (
`username` varchar(15) NOT NULL,
`first_name` varchar(50) NOT NULL,
`last_name` varchar(50) NOT NULL,  
PRIMARY KEY (`username`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

INSERT INTO `users` (`username`, `first_name`, `last_name`) VALUES
('maricela', 'Maricela', 'Ros'),
('mikha', 'Michael', 'Samuel'),
('guy', 'Guy', 'Marquez'); 
```

该方案包含 2 个表；一个用于使用信息`users`名字、姓氏和用户名调用的用户信息。第二张表是连接。列`connections.username1`是跟随`connections.username2`者，也是被跟随者。我想输出关注用户的人员列表，`maricela`并为每个结果检查结果用户是否被用户关注`mikha`。

我使用以下查询，但检查结果是否跟在后面`mikha`不起作用：

```
SELECT followed_by_mikha.username AS followed_by_mikha,
   users.first_name,
   users.last_name,       
   users.username      
   FROM connections
   LEFT JOIN users ON users.username = connections.username1
   LEFT JOIN users followed_by_mikha ON (connections.username1 = 'mikha' AND connections.username2 = users.username AND connections.username2 = followed_by_mikha.username)
   WHERE connections.username2 = 'maricela'
   ORDER BY users.username DESC LIMIT 10 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T16:21:02.787

```
SELECT fbm.username2 AS followed_by_mikha,
   users.first_name,
   users.last_name,       
   users.username      
   FROM connections
   LEFT JOIN users ON users.username = connections.username1

   LEFT JOIN connections fbm ON fbm.username2=connections.username1 and fbm.username1 = 'mikha'

   WHERE connections.username2 = 'maricela'
   ORDER BY users.username DESC LIMIT 10 
```

# node.js - xmpp s2s 是如何工作的？

> ID：14012409
> 
> 赞同：0
> 
> 时间：2012-12-23T16:01:20.347
> 
> 标签：node.js, xmpp, ejabberd, xmppframework, node-xmpp

我很难理解 s2s 交互中的完整信息流。互联网上可用的文档并不多。

我正在使用基于 nodejs 的 xmpp-server 来设置一个构建在 node-xmpp 之上的 xmpp 服务器。这对于单个服务器系统非常有效，但尚未在“xmpp-server”模块中完成用于 s2s 支持的开发。像 ejabberd 这样的包确实支持 s2s，但是没有太多关于这整个事情如何工作的文档。

要注意的另一件事是我不想要多个主机名。我想要的只是另一个我已经在一台机器上运行的 xmpp 服务器实例。两者都可以使用相同的数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T15:33:35.637

[http://xmpp.org/rfcs/rfc6120.html#examples-s2s](http://xmpp.org/rfcs/rfc6120.html#examples-s2s) 使用 tls 和证书的完整示例。该文档指定了核心 XMPP 协议，因此您应该可以在那里找到大多数问题的答案。

[http://xmpp.org/extensions/xep-0220.html](http://xmpp.org/extensions/xep-0220.html) DNS 回拨协议，如果不使用证书执行 s2s 身份验证，您将需要此协议。

# c# - C# 在运行时传递泛型参数类型

> ID：14012417
> 
> 赞同：3
> 
> 时间：2012-12-23T16:02:14.600
> 
> 标签：c#, generics, types, interface, linked-list

在我的应用程序中，我有使用输入和输出相互链接的组件。将要交换的数据可以是任何类型，所以我使用泛型。

```
public interface IInputVariable<T>
{
    IOutputVariable<T> Source { get; set; }
}

public interface IOutputVariable<T>
{
    T Value { get; set; }
} 
```

在另一个类中，组件链接在一起。哪些组件被链接，是从一个文件派生的。进行链接的类不知道输入和输出交换的类型。这个类只想用下面的代码连接它们：

```
IOutputVariable<double> output;
Type argumentType = output.GetType().GetGenericArguments()[0];
IInputVariable<argumentType> input = new BasicInputVariable<argumentType>();
input.Source = output; 
```

此代码无法编译，因为 argumentType 不能用作通用参数。有没有正确的方法来制定这个？或者是否可以在不知道其参数类型的情况下声明一个泛型变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T18:54:08.077

设置属性的最简单方法是在其中`Source`创建 counstructor ：`BasicInputVariable<T>``IOutputVariable<T>`

```
public BasicInputVariable(IOutputVariable<T> source)
{
    Source = source;
} 
```

然后你可以很容易地实例化它：

```
IOutputVariable<double> output;
Type argumentType = output.GetType().GetGenericArguments()[0];
object input = Activator.CreateInstance(typeof(BasicInputVariable<>)
                                       .MakeGenericType(argumentType), output); 
```

另一种方法是创建并实现一个可以提供`Source`属性的接口：

```
public interface ISetSource
{
    object Source { get; set; }
}

public class BasicInputVariable<T> : IInputVariable<T>, ISetSource
{
    public IOutputVariable<T> Source { get; set; }

    object ISetSource.Source
    {
        get { return Source; }
        set { Source = (IOutputVariable<T>) value; }
    }
} 
```

现在您可以访问该`Source`属性：

```
IOutputVariable<double> output;
var input = (ISetSource) Activator.CreateInstance(typeof (BasicInputVariable<>)
                                                 .MakeGenericType(argumentType));
input.Source = output; 
```

使用输入/输出泛型参数可能更安全，但不幸的是我们不能将它们与值类型一起使用......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T18:19:47.357

**警告：**这真的很丑陋，不推荐..

如果您有 .NET 4.0：

```
IOutputVariable<double> output = something;
dynamic input = Activator
                .CreateInstance(typeof(BasicInputVariable<>)
                                .MakeGenericType(output
                                                 .GetType()
                                                 .GetGenericArguments()[0]));
//or may be:
//dynamic input = typeof(BasicInputVariable<>)
//                .MakeGenericType(output
//                                 .GetType()
//                                 .GetGenericArguments()[0])
//                .GetConstructor(new Type[0])
//                .Invoke(new object[0]);

input.Source = output; 
```

* * *

但我不明白是什么阻止您将类型参数`double`本身直接传递给您的`BasicInputVariable`构造函数？

```
IOutputVariable<double> output = something;
IInputVariable<double> input = new BasicInputVariable<double>();
input.Source = output; 
```

如果类型参数可以是任何东西，那么为什么不让整个方法通用呢？或许：

```
void Method<T>()
{
    IOutputVariable<T> output = something;
    IInputVariable<T> input = new BasicInputVariable<T>();
    input.Source = output;
} 
```

这是有效的，因为`T`输入和输出变量都相同。

* * *

如果没有更多细节，很难想出更好的解决方案，但认真地说，你应该首先重新考虑你的设计。

# actionscript-3 - 试图让主 mc 跳转，代码在 AS3 上不起作用

> ID：14012424
> 
> 赞同：0
> 
> 时间：2012-12-23T16:03:19.923
> 
> 标签：actionscript-3

我想要做的是让 mcMain 跳转，但是当我尝试游戏时我的代码似乎不起作用（虽然我的 mc 会水平移动）。我被告知尝试让 mainJump() 函数在 eFrame() 函数中运行。但是，由于我是初学者，我完全不知道这意味着什么（特别是因为英语不是我的第一语言）。如果您能告诉我要添加或更正的内容，我将非常感激！所以我的代码是这样的：

```
var mainSpeed:int = 25; //how fast the character move side to side
var mainJumping = false; //whether or not main is in the air
var jumpSpeed:Number = 0; //how quickly he's jumping at the moment
var jumpSpeedLimit:int = 25; //how quickly he'll be able to jump

addEventListener(Event.ENTER_FRAME, eFrame);

function eFrame(e:Event):void{
    //making the character follow the mouse
    if(mouseX > mcMain.x + 25){ //if the mouse is to the right of mcMain
        mcMain.x += mainSpeed;//move mcMain to the right
    } else if (mouseX < mcMain.x - 25){//same thing with the left side
        mcMain.x -= mainSpeed;
    } else {
        mcMain.x = mouseX;//if it's close enough, then make it the same x  value
    }
}

stage.addEventListener(MouseEvent.CLICK, startJump);//if the user clicks

function startJump(e:MouseEvent):void{//then run this function
    if(!mainJumping){//main isn't already jumping
        mainJumping = true;//then we can start jumping
        jumpSpeed = jumpSpeedLimit*-1;//change the jumpSpeed so that we can   begin jumping
    }
}

function mainJump():void{
    if(mainJumping) {//if jumping has been initiated
        if(jumpSpeed < 0){//if the guy is still going up
            jumpSpeed *= 1 - jumpSpeedLimit/120;//decrease jumpSpeed slightly
            if(jumpSpeed > -jumpSpeedLimit*.1){//if jumpSpeed is small enough
                 jumpSpeed *= -1;//then begin to go down
            }
        }
        if(jumpSpeed > 0 && jumpSpeed <= jumpSpeedLimit){//if main is going down
            jumpSpeed *= 1 + jumpSpeedLimit/120;//incrase the falling speed
        }
        mcMain.y += jumpSpeed;//finally, apply jumpSpeed to mcMain
        //if main hits the floor, then stop jumping
        if(mcMain.y >= 387.5){
            mainJumping = false;
            mcMain.y = 387.5;
        }
    }
    if(mcMain.y > 387.5){
        mcMain.y = 387.5;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:13:32.003

您的问题是您实际上从未在`mainJump`函数中运行代码。这一行：

```
addEventListener(Event.ENTER_FRAME, eFrame); 
```

确保该`eFrame`函数在每一帧都运行，但它没有说明何时运行该`mainJump`函数。幸运的是，你可以像这样`mainJump`在你的`eFrame`函数中调用你的函数：

```
function eFrame(e:Event):void {
    // ... original code ...
    mainJump();
} 
```

这将在`mainJump`每一帧运行该函数，因此它应该允许您的播放器跳跃。

# sql - 需要显示一个虚拟月份 - Oracle SQL

> ID：14012427
> 
> 赞同：4
> 
> 时间：2012-12-23T16:03:45.663
> 
> 标签：sql, oracle

出于月费报告的目的，需要显示如下所述的输出。仅当当月支付了费用时，数据才会输入到表中，否则该月将不会出现在表中。

在执行查询时

```
select reg_id, dop,to_char(dop, 'FMMonth,YYYY') Month, status 
  from fees_status
 where dop between ('1-Jul-2012') and ('1-Dec-2012') 
```

输出是

```
REG_ID  DOP         MONTH           STATUS

AE-8    7/1/2012    July,2012       PAID
AE-8    9/1/2012    September,2012  PAID
AE-8    11/1/2012   November,2012   PAID
AE-8    12/1/2012   December,2012   PAID 
```

出于报告目的，需要输出为

```
REG_ID  DOP         MONTH           STATUS

AE-8    7/1/2012    July,2012       PAID
AE-8    8/1/2012    August,2012     NOTPAID
AE-8    9/1/2012    September,2012  PAID
AE-8    10/1/2012   October,2012    NOTPAID
AE-8    11/1/2012   November,2012   PAID
AE-8    12/1/2012   December,2012   PAID 
```

有人可以帮助显示上面提到的输出吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-23T16:27:39.697

您可以通过扩展外连接来使用[分区来实现这一点。](http://docs.oracle.com/cd/B14117_01/server.101/b10736/analysis.htm#sthref1743)这是一个例子：

```
-- sample of data from your question 
SQL> with fees_status(REG_ID, DOP, MONTH1, STATUS) as(
  2    select 'AE-8', to_date('7/1/2012', 'MM/DD/YYYY'), 'July,2012'     ,'PAID' from dual union all
  3    select 'AE-8', to_date('9/1/2012', 'MM/DD/YYYY'), 'September,2012','PAID' from dual union all
  4    select 'AE-8', to_date('11/1/2012', 'MM/DD/YYYY'),'November,2012' ,'PAID' from dual union all
  5    select 'AE-8', to_date('12/1/2012', 'MM/DD/YYYY'),'December,2012' ,'PAID' from dual
  6  ), -- dates
  7  dates(dt) as(
  8    select add_months(to_date('01/01/2012', 'mm/dd/yyyy'), level - 1)
  9      from dual
 10    connect by level <= 12
 11  )
 12  select t.reg_id
 13       , d.dt as dop
 14       , to_char(d.dt, 'fmMonth, YYYY') as month1
 15       , Nvl(t.status, 'NOTPAID')       as status
 16   from fees_status t
 17   partition by (t.reg_id)
 18   right outer join dates d
 19      on (d.dt = t.dop)
 20   where d.dt between (to_date('1-Jul-2012', 'dd-Month-yyyy'))
 21                  and (to_date('1-Dec-2012', 'dd-Month-yyyy'))
 22  ;

REG_ID DOP         MONTH1                STATUS
------ ----------- -------------------- -------
AE-8   01-Jul-12   July, 2012            PAID
AE-8   01-Aug-12   August, 2012          NOTPAID
AE-8   01-Sep-12   September, 2012       PAID
AE-8   01-Oct-12   October, 2012         NOTPAID
AE-8   01-Nov-12   November, 2012        PAID
AE-8   01-Dec-12   December, 2012        PAID

6 rows selected 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T16:32:18.533

```
WITH MONTH_COUNTER AS (
  SELECT LEVEL-1 AS ID 
  FROM DUAL 
  CONNECT BY LEVEL <= 12
) 
SELECT TO_CHAR(ADD_MONTHS(TO_DATE('01/01/2012', 'DD/MM/RRRR'), ID),'dd/mm/yyyy') FROM MONTH_COUNTER; 
```

这将创建一个虚拟表，其中包含提到的一年中的所有月份。对此进行左连接以获得您的要求。

希望这可以帮助！！

# swing - 如何在 JSF 页面中执行 Java Swing 代码

> ID：14012428
> 
> 赞同：0
> 
> 时间：2012-12-23T16:04:10.790
> 
> 标签：swing, jsf

大家好，我是 JSF 的新手，

我创建了一个 java 文件，当用户按下 XHTML 页面上的按钮时，我需要它运行，我该怎么做？对于像我这样的 JSF 初学者，还有什么好的教程吗？谢谢 ：）

JAVA 代码是一段简单的代码，它允许用户选择一个 txt 文件然后打印它。

目的是创建一个允许打印文档的网络应用程序

这是我希望运行的 JAVA 代码：

```
import java.awt.*;
import java.awt.font.*;
import java.awt.geom.*;
import java.awt.print.*;
import java.text.*;
import java.io.*;
import javax.swing.*;
import java.util.List;
import java.util.ArrayList;

public class PrintText implements Printable {

    private String text; // Constructor argument for AttributedString.

    // Below the code will allow the user to select a file and then print out the contents of the file
    public static void main(String[] args) throws IOException {
        new PrintText();
    }

    public PrintText() {
        EventQueue.invokeLater(new Runnable() {
                @Override
                public void run() {
                    try {
                        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                    } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                    }

                    //selects the file
                    JFileChooser chooser = new JFileChooser();
                    chooser.showOpenDialog(null);
                    File file = chooser.getSelectedFile();
                    String filename = file.getName();
                    //System.out.println("You have selected: " + filename);  testing to see if file seleected was right
                    String path = file.getAbsolutePath();

                    //Reads contents of file into terminal 
                    //FileReader fr = new FileReader("filename");
                    // FileReader fr = new FileReader("D:/Documents/" + "filename")); 

                    BufferedReader br = null;
                    try {
                        br = new BufferedReader(new FileReader(path));
                        StringBuilder stringBuilder = new StringBuilder();
                        String line;
                        while ((line = br.readLine()) != null) {
                            //System.out.println(line); //This is now not needed, was used to test to see if the contents was recieved corrently
                            stringBuilder.append(line).append("\n");
                        }
                        text = stringBuilder.toString();;

                        printer();
                    } catch (IOException exp) {
                        exp.printStackTrace();
                    } finally {
                        try {
                            br.close();
                        } catch (Exception e) { e.printStackTrace(); }
                    }
                    //fr.close(); 
                }
            });
    }
    //Testing 
    //private static final String mText = 
    //    "This is a test to see if this text will be printed "; //This works perfectly fine
    //AttributedString mStyledText = new AttributedString(mText);
    /**
     * Print a single page containing some sample text.
     */
    public void printer() {

        /* Get the representation of the current printer and 
         * the current print job.
         */
        PrinterJob printerJob = PrinterJob.getPrinterJob();
        /* Build a book containing pairs of page painters (Printables)
         * and PageFormats. 
         */
        Book book = new Book();
        book.append(this, new PageFormat());
        /* Set the object to be printed (the Book) into the PrinterJob.
         * Doing this before bringing up the print dialog allows the
         * print dialog to correctly display the page range to be printed
         * and to dissallow any print settings not appropriate for the
         * pages to be printed.
         */
        printerJob.setPageable(book);
        /* Show the print dialog to the user. If the user cancels the print dialog then false
         * is returned. If true is returned we go ahead and print.
         */
        boolean doPrint = printerJob.printDialog();
        if (doPrint) {
            try {
                printerJob.print();
            } catch (PrinterException exception) {
                System.err.println("Printing error: " + exception);
            }
        }
    }

    /**
     * Print a page of text.
     */
    public int print(Graphics g, PageFormat format, int pageIndex) {

        AttributedString mStyledText = new AttributedString(text);

        Graphics2D g2d = (Graphics2D) g;
        g2d.translate(format.getImageableX(), format.getImageableY());
        g2d.setPaint(Color.black);// Sets text colour
        Point2D.Float pen = new Point2D.Float();
        AttributedCharacterIterator charIterator = mStyledText.getIterator();
        LineBreakMeasurer measurer = new LineBreakMeasurer(charIterator, g2d.getFontRenderContext());
        float wrappingWidth = (float) format.getImageableWidth();
        while (measurer.getPosition() < charIterator.getEndIndex()) {
            TextLayout layout = measurer.nextLayout(wrappingWidth);
            pen.y += layout.getAscent();
            float dx = layout.isLeftToRight() ? 0 : (wrappingWidth - layout.getAdvance());
            layout.draw(g2d, pen.x + dx, pen.y);
            pen.y += layout.getDescent() + layout.getLeading();
        }
        return Printable.PAGE_EXISTS;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T17:26:00.437

在实现选择要上传的文件然后使用 JSF 显示它的具体功能要求方面，您走错了方向。

您正在尝试使用 Swing/AWT 选择文件。虽然这对于基于桌面的应用程序确实可能是正确的方法，但对于基于 Web 的应用程序来说这完全是错误的方法。在基于 Web 的应用程序中，Java/JSF 代码在 Web 服务器中运行并生成一堆 HTML/CSS/JS 代码，这些代码通过网络发送到 Web 浏览器，Web 浏览器最终运行所有获得的 HTML/CSS/JS 代码。因此请注意，Java/JSF 在运行 Web 服务器的物理机器中运行。因此，Swing/AWT 也将在运行 Web 服务器的物理机器上运行，因此绝对不会在运行 Web 浏览器的物理机器上运行。基本上，当 Swing/AWT 显示一些 UI 时，它会显示在连接到网络服务器的监视器中，而不是连接到网络浏览器的监视器中。

您需要在 HTML/CSS/JS 而不是 Java 中实现您的功能需求。您需要以这样的方式编写 JSF 代码，它可以准确地生成适合所需任务的特定 HTML/CSS/JS 代码。

在您的特定情况下，您想要上传文件并显示其内容。在 HTML 世界中，文件选择器由`<input type="file">`元素表示。在标准 JSF 中，您可以使用`<h:inputFile>`组件生成该 HTML。这是一个启动示例：

```
<h:form enctype="multipart/form-data">
    <h:inputFile value="#{bean.file}" />
    <h:commandButton value="Submit" action="#{bean.process}" />
    <h:messages />
</h:form>
<pre>#{bean.content}</pre> 
```

用这个豆子

```
private Part file; // +getter+setter
private String content; // +getter

public void process() throws IOException {
    content = IOUtils.toString(file.getInputstream(), "UTF-8");
} 
```

*（注意：`IOUtils`是 Apache Commons IO 的一部分，所以上面的代码按原样工作）*

### 也可以看看：

*   [将 ImageIcon 从类显示到 JSF 页面？](https://stackoverflow.com/questions/14249383/show-imageicon-from-class-to-jsf-page/)
*   [如何使用 JSF 2.2 <h:inputFile> 上传文件？保存的文件在哪里？](https://stackoverflow.com/questions/27677397/how-to-upload-file-using-jsf-2-2-hinputfile-where-is-the-saved-file)
*   [当可以使用 jQuery 和 AngularJS 等 JavaScript 库来实现 UI 时，需要 JSF 吗？](https://stackoverflow.com/questions/4421839/what-is-the-need-of-jsf-when-ui-can-be-achieved-with-javascript-libraries-such)

# c# - 在网格视图中操作当前编辑的行

> ID：14012429
> 
> 赞同：4
> 
> 时间：2012-12-23T16:04:13.533
> 
> 标签：c#, asp.net

我正在尝试使 gridview 的编辑功能更智能一些。

作为第一步，我希望**当我为一行按编辑时，** 所有带有`DateTime`数据的列都会有一个日期选择器而不是文本框，似乎我的尝试只能编辑后面的行，而不是当前显示的编辑项。

我的目标是将我正在编辑的行中的日期列更改为日期选择器。

```
protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
{
    var row = ((GridView)sender).Rows[e.NewEditIndex].Cells;

    for (int i = 0; i < row.Count; i++)
    {
        DateTime dtDate;
        var res = DateTime.TryParse(row[i].Text, out dtDate);
        if (res)
        {
            DatePickerControl.DatePicker text = new DatePickerControl.DatePicker();
            text.CalendarDate = dtDate;
            row[i].Controls.Clear();
            row[i].Controls.Add(text);
        }
    }
} 
```

但它似乎编辑了后面的行，我怎样才能让它编辑我正在编辑的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:19:32.193

我会说这是错误的方法，您不应该在运行时使用 Control 类型在构建数据网格时您的 datagrid 列应该是 datepicker 类型。

不幸的是 MS 没有提供，幸运的是他们提供了允许你这样做的框架：

你需要 3 个东西，一个新的 1) `DataGridViewColumn`，一个新的 2) `DataGridViewTextBoxCell`，最后是实际的 3) DateTimePicker 编辑控件。

1：

```
public class DataGridViewCalendarColumn : DataGridViewColumn
{
    public DataGridViewCalendarColumn()
        : base(new DataGridViewCalendarCell())
    { }

    public override DataGridViewCell CellTemplate
    {
        get { return base.CellTemplate; }
        set
        {
            // Ensure that the cell used for the template is a CalendarCell.
            if (value != null &&
                !value.GetType().IsAssignableFrom(typeof(DataGridViewCalendarCell)))
                throw new InvalidCastException("Must be a DataGridViewCalendarCell");

            base.CellTemplate = value;

        }
    }
} 
```

2：

```
public class DataGridViewCalendarCell : DataGridViewTextBoxCell
{
    public DataGridViewCalendarCell()
        : base()
    {
        this.Style.Format = "d";    //short date style
    }

    public override void InitializeEditingControl(int rowIndex, object initialFormattedValue, DataGridViewCellStyle dataGridViewCellStyle)
    {
        //set the value of the editing control to the current cell value
        base.InitializeEditingControl(rowIndex, initialFormattedValue, dataGridViewCellStyle);

        DataGridViewCalendarControl ctl = DataGridView.EditingControl as DataGridViewCalendarControl;

        //use default value if Value is null
        if (this.Value == null || this.Value == DBNull.Value)
            ctl.Value = (DateTime) this.DefaultNewRowValue;
        else
            ctl.Value = (DateTime) this.Value;
    }

    public override Type EditType
    {
        get
        {
            //return the type of control this cell uses
            return typeof(DataGridViewCalendarControl);
        }
    }

    public override Type ValueType
    {
        get
        {
            //return the type of the value that this cell contains
            return typeof(DateTime);
        }
    }

    public override object DefaultNewRowValue
    {
        get
        {
            //use today's date as the default value
            return DateTime.Now;
        }
    }
} 
```

3：

```
public class DataGridViewCalendarControl : DateTimePicker, IDataGridViewEditingControl
    {
        private DataGridView dataGridView;
        private bool hasValueChanged = false;
        int rowIndex;

        public DataGridViewCalendarControl()
        {
            this.Format = DateTimePickerFormat.Short;
        }

        protected override void OnValueChanged(EventArgs eventargs)
        {
            //Notify the DataGridView that the value has changed
            hasValueChanged = true;
            this.EditingControlDataGridView.NotifyCurrentCellDirty(true);

            base.OnValueChanged(eventargs);
        }

        #region IDataGridViewEditingControl Members

        public void ApplyCellStyleToEditingControl(DataGridViewCellStyle dataGridViewCellStyle)
        {
            this.Font = dataGridViewCellStyle.Font;
            this.CalendarForeColor = dataGridViewCellStyle.ForeColor;
            this.CalendarMonthBackground = dataGridViewCellStyle.BackColor;
        }

        public DataGridView EditingControlDataGridView
        {
            get { return dataGridView; }
            set { dataGridView = value; }
        }

        public object EditingControlFormattedValue
        {
            get { return this.Value.ToShortDateString(); }
            set
            {
                if (value is String)
                    try
                    {
                        this.Value = DateTime.Parse((String) value);
                    }
                    catch
                    {
                        this.Value = DateTime.Now;
                    }
            }
        }

        public int EditingControlRowIndex
        {
            get { return rowIndex; }
            set { rowIndex = value; }
        }

        public bool EditingControlValueChanged
        {
            get { return hasValueChanged; }
            set { hasValueChanged = value; }
        }

        public bool EditingControlWantsInputKey(Keys keyData, bool dataGridViewWantsInputKey)
        {
            //the DateTimePicker needs to handle the keys
            switch (keyData & Keys.KeyCode)
            {
                case Keys.Left:
                case Keys.Right:
                case Keys.Up:
                case Keys.Down:
                case Keys.Home:
                case Keys.End:
                case Keys.PageUp:
                case Keys.PageDown:
                    return true;

                default:
                    return !dataGridViewWantsInputKey;
            }
        }

        public Cursor EditingPanelCursor
        {
            get { return base.Cursor; }
        }

        public object GetEditingControlFormattedValue(DataGridViewDataErrorContexts context)
        {
            return EditingControlFormattedValue;
        }

        public void PrepareEditingControlForEdit(bool selectAll)
        {
            //nowt needs doing...
        }

        public bool RepositionEditingControlOnValueChange
        {
            get { return false; }
        } 
```

然后在表单的 Load 事件中：

```
eventDateDataGridViewCalendarColumn = new DataGridViewCalendarColumn();
eventDateDataGridViewCalendarColumn.DataPropertyName = "EventDate";
eventDateDataGridViewCalendarColumn.HeaderText = "Date";
//we've created the column, now insert it into the right location (after the ID and UserID)
this.tSEventsDataGridView.Columns.Insert(2, eventDateDataGridViewCalendarColumn);

//remove the original TextBox EventDate column added via VS
this.tSEventsDataGridView.Columns.RemoveAt(3); 
```

哪里`eventDateDataGridViewCalendarColumn`是`private DataGridViewCalendarColumn`。就是这样，我们现在没有任何编辑事件。

现在这对我们有用，但与在网上找到的随机样本一样，使用风险自负！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:25:51.247

即使方法不同并且对于您的场景可能有点过于简单，我建议您使用 来自`<asp:TemplateField />`定义编辑项模板（见下文）。当然，您可能还想`<asp:Calendar />`用您的自定义控件替换我使用的`DatePickerControl.DatePicker`控件。

```
<asp:GridView ID="GridView1" runat="server" OnRowEditing="GridView1_RowEditing">
    <Columns>
        <asp:TemplateField>
            <EditItemTemplate>
                <asp:Calendar runat="server" SelectedDate='<%# Eval("Date") %>'></asp:Calendar>
            </EditItemTemplate>
            <ItemTemplate>
                <%# Eval("Date") %>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

**[更新]**

您还可以动态创建列。请检查以下代码：

```
public partial class WebForm1 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        GridView1.AutoGenerateColumns = false;
        GridView1.AutoGenerateEditButton = true;

        DataTable dataSource = new DataTable();
        dataSource.Columns.Add("Id", typeof(int));
        dataSource.Columns.Add("Date1", typeof(DateTime));
        dataSource.Columns.Add("Date2", typeof(DateTime));
        dataSource.Rows.Add(1, DateTime.Now, DateTime.Now.AddMonths(1));
        dataSource.Rows.Add(2, DateTime.Now.AddMonths(2), DateTime.Now.AddMonths(3));

        GridView1.Columns.Clear();
        foreach (DataColumn column in dataSource.Columns)
        {
            if (column.DataType == typeof(DateTime))
            {
                var templateColumn = new TemplateField();
                templateColumn.EditItemTemplate = new AddTemplateToGridView(ListItemType.EditItem, column.ColumnName);
                templateColumn.ItemTemplate = new AddTemplateToGridView(ListItemType.Item, column.ColumnName);
                templateColumn.HeaderText = column.ColumnName;
                GridView1.Columns.Add(templateColumn);
            }
            else
            {
                var dataBoundColumn = new BoundField();
                dataBoundColumn.DataField = column.ColumnName;
                dataBoundColumn.HeaderText = column.ColumnName;
                GridView1.Columns.Add(dataBoundColumn);
            }
        }

        GridView1.DataSource = dataSource;
        GridView1.DataBind();

    }

    public class AddTemplateToGridView : ITemplate
    {

        ListItemType _type;
        string _colName;

        public AddTemplateToGridView(ListItemType type, string colname)
        {
            _type = type;
            _colName = colname;
        }

        public void InstantiateIn(Control container)
        {
            switch (_type)
            {
                case ListItemType.Item:

                    Label l = new Label();
                    l.DataBinding += l_DataBinding;
                    container.Controls.Add(l);

                    break;
                case ListItemType.EditItem:

                    Calendar calendar = new Calendar();
                    calendar.DataBinding += l_DataBinding;
                    container.Controls.Add(calendar);

                    break;
            }
        }

        void l_DataBinding(object sender, EventArgs e)
        {
            GridViewRow container;
            object dataValue;
            switch (sender.GetType().ToString())
            {
                case "System.Web.UI.WebControls.Label":
                    Label label = (Label)sender;
                    container = (GridViewRow)label.NamingContainer;
                    dataValue = DataBinder.Eval(container.DataItem, _colName);
                    if (dataValue != DBNull.Value)
                    {
                        label.Text = dataValue.ToString();
                    }
                    break;
                //use the DatePickerControl.DatePicker type instead of calendar
                case "System.Web.UI.WebControls.Calendar":
                    Calendar calendar = (Calendar)sender;
                    container = (GridViewRow)calendar.NamingContainer;
                    dataValue = DataBinder.Eval(container.DataItem, _colName);
                    if (dataValue != DBNull.Value)
                    {
                        calendar.SelectedDate = (DateTime)dataValue;
                        calendar.VisibleDate = (DateTime)dataValue;
                    }
                    break;
            }
        }
    }

    protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
    {
        GridView1.EditIndex = e.NewEditIndex;
        GridView1.DataBind();
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T21:22:23.630

看起来您的问题在于`e.NewEditIndex`不是正确的值，因为在该行实际进入编辑模式*之前*`RowEditing`触发了该事件。这意味着 的值将是您上次编辑的任何行的索引。如果我不得不猜测，我会说您是按顺序遍历行，所以您总是在修改“后面的行”纯属巧合。*`e.NewEditIndex`*

 *从文档中，您似乎可以通过访问该`GridView.SelectedIndex`属性来获取当前选定行的索引。如果要在编辑之前选择该行：

你可以改变：`var row = ((GridView)sender).Rows[e.NewEditIndex].Cells;`

到：`var row = ((GridView)sender).Rows[(GridView)sender.SelectedIndex].Cells;`

`SetEditRow`您还可以探索使用以下方法手动将行置于编辑模式：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.seteditrow.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.seteditrow.aspx)

无论哪种方式，您都需要在调用`RowEditing`事件之前知道当前所在行的索引，或者使用方法强制该行进入编辑模式`SetEditRow`，这会将正确的索引传播到`RowEditing`事件中。

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T12:28:17.167

```
 protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
{
    bindgrid();
    var row = ((GridView)sender).Rows[e.NewEditIndex].Cells;

    for (int i = 0; i < row.Count; i++)
    {
        DateTime dtDate;
        var res = DateTime.TryParse(row[i].Text, out dtDate);
        if (res)
        {
            Calendar cal = new Calendar();
            cal.SelectedDate = dtDate;
            cal.VisibleDate = dtDate;
            cal.DataBind();
            //DatePickerControl.DatePicker text = new DatePickerControl.DatePicker();
            //text.CalendarDate = dtDate;
            row[i].Controls.Clear();
            row[i].Controls.Add(cal);
        }
    }

} 
```

试试这个*

# java - 安装 Eclipse 时出错

> ID：14012431
> 
> 赞同：0
> 
> 时间：2012-12-23T16:04:46.173
> 
> 标签：java, eclipse

我安装了以下 Java 版本：**Windows 7 64-bit中的“** **Version 7** Update 9” ，位于“ **Program files (x86)** ”文件夹中。我认为这是我安装 Windows 时默认出现的。

 ****我现在正在尝试使用此链接为 Win 64 位安装 Eclipse：http: [//www.eclipse.org/downloads/download.php?file=/ eclipse/downloads/drops4/R-4.2.1-201209141800/eclipse- SDK-4.2.1-win32-x86_64.zip](http://www.eclipse.org/downloads/download.php?file=/eclipse/downloads/drops4/R-4.2.1-201209141800/eclipse-SDK-4.2.1-win32-x86_64.zip)

但是当我启动 Exclipse.exe 时出现错误： ![在此处输入图像描述](../Images/4ec34fc73b8a5be42be9a9f6b44d834c.png)

这与Java安装在Win 64位的“Program Files x86”文件夹中有关吗？我该如何解决这个问题，以便我可以安装 Eclipse？顺便说一句，Java 应该可以正常工作，我在 IE 浏览器中打开了一些小程序演示示例，一切都很好。

上次我在另一台 PC 上安装 Eclipse 时一切正常，我猜在这种情况下系统配置与此错误有关。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T16:07:23.210

4个可能的修复：

1.  设置java主路径
2.  安装 32 位 jdk 版本 6。
3.  使用类似的东西启动 eclipse -vm c:\jdk1.4.2\jre\bin\javaw
4.  使用 eclipse -clean 启动 eclipse 并相应地设置 java 设置。有关更多信息，请查看@这里[http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Ftasks%2Frunning_eclipse.htm](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Ftasks%2Frunning_eclipse.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T16:09:38.693

也许 java 文件夹存在于磁盘上但不存在于注册表中。它可能是以前安装的遗留物。尝试安装 32 位 eclipse 或安装 64 位 java。

更简单的修复

将java文件夹复制到eclipse安装并重命名为`jre`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T16:11:14.353

您需要将 JRE/JDK 放在 WINDOWS 路径上。这可以通过在 Windows 中打开环境变量选项来完成。您收到的错误是因为 java 不在该路径上，因此 eclipse 默认为其位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-23T17:48:02.507

谢谢大家的建议。

在我执行以下操作后，它终于起作用了：

*   我为 Win 64 安装了 JDK 7
*   我这样设置变量路径：系统属性->高级->环境变量->路径->编辑：C:\Program Files\Java\jdk1.7.0_10\bin
*   我将 Eclipse 结构（解压缩后）复制到程序文件
*   我启动了 Eclipse.exe，配置了工作区等。

现在我可以开始使用 Eclipse 创建包、类、小程序等。****

# javascript - Jquery：如何在 mouseenter 事件上无限计数直到 10？

> ID：14012433
> 
> 赞同：-2
> 
> 时间：2012-12-23T16:05:26.560
> 
> 标签：javascript, jquery

我使用这个脚本数到 10 并显示 0。

但是如何在 mouseenter 事件上从 0 到 10**无限**计数并在 mouseleave 事件上显示 0 呢？

```
$('.div').mouseenter(function() {
  var cnt = 0;
  var counter = setInterval(function() {
    if (cnt < 10) {
      $('.count').html(cnt);
      cnt++;
    }
    else {
      clearInterval(counter);
      $('.count').html("0");
    }
  }, 1000);
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T16:13:27.667

假设我正确理解了您的问题，这可能就是您想要的：

```
var counter;
$('.count-wrap').mouseenter(function() {
    var cnt = 0; counter = window.setInterval(function() {
        $('.count').html(cnt);
        cnt = (cnt+1)%11;
    }, 100);
}).mouseleave(function() {
    window.clearInterval(counter);
    $('.count').html("0");
}); 
```

# php - 如何在 MySQL 数据库中以不同的格式保存数据

> ID：14012434
> 
> 赞同：2
> 
> 时间：2012-12-23T16:05:26.867
> 
> 标签：php, mysql, date

我注意到 MySQL 将日期保存为 0000-00-00 格式。但是在我的应用程序中，我已经验证了这种 00-00-0000 格式的日期。我注意到日期没有正确保存为不同的格式。我可以将mysql数据格式更改为00-00-0000格式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T16:09:50.180

`00-00-0000`格式不完全清楚；例如，可能是`dd-mm-yyyy`这样。

您可以像这样简单地转换日期：

```
$mydate = '24-12-2012';
// create date object by using a known format
// see manual page for all format specifiers
$d = DateTime::createFromFormat('d-m-Y', $mydate);

// format date object in yyyy-mm-dd
echo $d->format('Y-m-d'); 
```

也可以看看：[`DateTime::createFromFormat()`](http://php.net/manual/en/datetime.createfromformat.php) [`DateTime::format()`](http://php.net/manual/en/datetime.format.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T16:11:10.157

您还可以使用 MySQL`str_to_date`功能

```
INSERT INTO yourtable (datefield) VALUES (str_to_date('01-02-2007', '%d-%m-%Y')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T16:17:16.357

正如**@Jack**解释的那样，这是您可以选择的正确方法之一

> 在从数据库中选择日期时，您可以使用 [DATE_FORMAT(date,format)](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_date-format)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T16:10:04.223

你不能。
取而代之的是，您必须将自定义格式转换为数据库格式并返回。

要将其存储在数据库中，您可以使用`explode`PHP 函数。
选择时，可以使用`DATE_FORMAT`mysql函数格式化mysql日期格式。

# android - Android 上的 Jsoup：使用 Javascript (window.location) 跟踪重定向

> ID：14012436
> 
> 赞同：0
> 
> 时间：2012-12-23T16:05:38.387
> 
> 标签：android, redirect, jsoup

在我的 Android 应用程序上，我使用 JSOUP 来 POST 数据来模拟登录表单的提交操作（自动登录到 WISPR 热点）这是我从 POST 获得的原始响应：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://
www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>connexion</title>
        <script type="text/javascript">
                    window.location = "http://192.168.2.1:3990/logon?username=0325767676@ssowifi.neuf.fr&amp;response=e30ee504ba06fa77502f1b9e8ccbaf8d&amp;uamip=192.168.2.1&userurl=http%3A%2F%2Fwww.sfr.fr%3Bneuf%3Bfr%3B3%3Bhttp%3A%2F%2Fwww.sfr.fr%3B";
        </script>
    </head>
    <body>
    </body>
</html> 
```

我将它与登录成功时使用 Firebug 的桌面浏览器得到的响应进行了比较，它完全一样，当然除了“响应”参数。

如您所见，在这里，它使用 Javascript 进行重定向。由于 JSOUP 仅遵循 3xx 重定向，因此我尝试从响应中解析给定的位置 URL，然后在其上执行 GET 请求

```
Document doc = Jsoup.connect(parsedRedirectURL).cookies(cookies).get(); 
```

但我得到一个

`Java.net.SocketTimeoutException: failed to connect to /192.168.2.1 (port 3390) after 3000ms`

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T16:14:57.963

你的`window.location`说`:3990`和你的例外`3390`。这些参数是否来自两次调用，因此端口可能已更改？否则检查，如果你确实使用了正确的端口。

# javascript - Onclick 加载页面然后更改加载页面上的 iframe 源

> ID：14012438
> 
> 赞同：0
> 
> 时间：2012-12-23T16:06:07.977
> 
> 标签：javascript, html, javascript-events

这是我在这里提出的第一个问题，所以请多多包涵，如果我没有得到所有细节，我深表歉意，但我会尽量做到详细和具体。

我正在建立一个网站，并希望能够单击导航栏中的链接，然后当您单击此链接时，它将链接到主索引页面，同时更改该索引页面上 iframe 的来源. 我希望这对我正在尝试做的事情有一个足够清晰的想法？这样做的原因是，如下所示，社区页面将有一个完全不同的页面，但是站点的其余部分将直接从索引页面托管，但会加载到该页面的主 iframe 中。这是导航（我尝试过但不起作用），这可能会使我想做的事情更加清晰

```
div class="navbar"><!--start nav-->
<div class="nbutton"><a onclick="location.href='index.html'" href="home.html" target="mainframe">Home</a></div>
    <div class="nbutton"><a onclick="location.href='forum.html'" href="forum/" target="forumframe">Community</a></div>
<div class="nbutton"><a onclick="location.href='index.html'" href="events.html" target="mainframe">Events</a></div>
<div class="nbutton"><a onclick="location.href='index.html'" href="sponsors.html" target="mainframe">Sponsors</a></div>
<div class="nbutton"><a onclick="location.href='index.html'" href="gallery.html" target="mainframe">Gallery</a></div>
<div class="nbutton"><a onclick="location.href='index.html'" href="streams.html" target="mainframe">Streams</a></div> 
```

index.html 页面代码上的 iframe：

```
<iframe name="mainframe" width="700" height="600" src="images/randoms/iframetest.jpg" frameborder="1" allowFullScreen="" style="background:transparent;text-align:center;"></iframe> 
```

forum.html 页面代码上的 iframe：

```
<iframe name="forumframe" width="960" height="1200" src="forum/" frameborder="0" allowFullScreen=""></iframe> 
```

我希望这会让我更容易看到我想用它做什么？

当我单击论坛链接以外的任何链接时，iframe 将不会加载，但是再一次，fo​​rum.html 上的 iframe 被设置为加载“论坛/”位置，因此它实际上并不需要 onclick 事件我猜只是为了统一。

所以我想要做的总结示例：

单击“主页”将加载 index.html，然后将 index.html 上的 iframe 源更改为“home.html”单击“事件”将加载 index.html，然后将 index.html 上的 iframe 源更改为“events.html”

我希望这是有道理的？

任何帮助是极大的赞赏！对不起所有的华夫饼，只是想尽可能多地收集信息。任何进一步的细节请询问，我会尽力澄清我错过的或不清楚的任何事情。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T16:09:36.643

您可以`index.html?subpage=home.html`作为主页面的 URL 传递，并使用 JavaScript 读取`subpage`参数以设置框架的页面。

您可以使用下面的代码来读取 URL 参数。从[这个答案](https://stackoverflow.com/a/979995/489560)中解脱出来：

> ```
> var QueryString = function () {
>   // This function is anonymous, is executed immediately and 
>   // the return value is assigned to QueryString!
>   var query_string = {};
>   var query = window.location.search.substring(1);
>   var vars = query.split("&");
>   for (var i=0;i<vars.length;i++) {
>     var pair = vars[i].split("=");
>       // If first entry with this name
>     if (typeof query_string[pair[0]] === "undefined") {
>       query_string[pair[0]] = pair[1];
>       // If second entry with this name
>     } else if (typeof query_string[pair[0]] === "string") {
>       var arr = [ query_string[pair[0]], pair[1] ];
>       query_string[pair[0]] = arr;
>       // If third or later entry with this name
>     } else {
>       query_string[pair[0]].push(pair[1]);
>     }
>   } 
>     return query_string;
> } (); 
> ```
> 
> 然后您可以访问 QueryString.c

# iphone - 应用 ARC 后仍面临内存警告

> ID：14012441
> 
> 赞同：1
> 
> 时间：2012-12-23T16:06:35.410
> 
> 标签：iphone, ios, core-data, memory-management, automatic-ref-counting

在我听说 ARC 功能以及它如何减少处理内存后，我已经转换了构建动态表单的应用程序，但是当我从 web 服务进行同步（在 CoreData 上写入大量数据）时。是否有任何指南应该应用它应用 ARC 技术。我们的日志显示有一个（收到内存警告。级别=1）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T16:30:26.203

使用 ARC 并不会神奇地减少内存使用量——它可以防止人为错误造成消耗内存的错误。即使您正在使用 ARC，理解 Objective-C 中的引用计数和一般内存管理仍然非常重要。

# objective-c - 检测 UIScrollView 位置

> ID：14012444
> 
> 赞同：9
> 
> 时间：2012-12-23T16:07:23.143
> 
> 标签：objective-c, ios, uiscrollview, contentoffset

我正在尝试在我的 iOS 应用程序中使用 UIScrollView 作为导航设备。基本上，我希望应用程序根据启用分页的 UIScrollView 的位置加载特定内容。它有点像导航轮。

目前，我有一个两页（2*320）的滚动视图，我正在使用`scrollViewDidEndDragging`委托方法并`contentoffset.x`加载适当的内容。我尝试这样确定滚动视图的位置：

```
if (scrollView.contentOffset.x < 320) {
   // Load content 1
    }
else if (scrollView.contentOffset.x >= 320) {
   // Load content 2
    } 
```

我的问题是我要么不了解如何使用 contentoffset，要么不适合处理我的问题。无论哪种方式，我都被困住了。有人可以让我知道我哪里出错了和/或告诉我一个更有效的方法来确定滚动视图的位置吗？

我很愚蠢，我忘了提到问题是什么......基本上，我无法跟踪滚动视图的位置。当我移动到第二页时，它只会在我超过 620 限制（向右反弹）时记录更改。但是当我回到起始位置（第 1 页）时，它确实记录了更改。换句话说，我的跟踪不准确。

代表和其他一切工作正常，我记录他们！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-23T17:08:58.840

很难说，因为你从来没有具体提到问题是什么，但我会猜测一下。

如果根本没有调用委托方法，您需要记住设置滚动视图委托：

`[myScrollView setDelegate:self];`

否则，使用`scrollViewDidEndDragging`检测滚动视图偏移量的问题在于，它将检查您停止拖动的点处的偏移量，该点可能位于目标页面 rect 或起始页面 rect 内。作为替代方案，我建议您使用`scrollViewDidEndDecelerating`检查内容偏移量，因为一旦滚动视图在其目标页面停止，它将被调用。

```
-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    if (scrollView.contentOffset.x < 320) {
        NSLog(@"%@",NSStringFromCGPoint(scrollView.contentOffset));
    }
    else if (scrollView.contentOffset.x >= 320) {
        NSLog(@"%@",NSStringFromCGPoint(scrollView.contentOffset));
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-23T17:10:13.183

我认为这可以帮助你:)。随着`scrollViewDidScroll`你总是得到你的滚动视图的确切位置：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    if (scrollView.contentOffset.x < 320)
    {
         // Load content 1
    }
    else if (scrollView.contentOffset.x >= 320)
    {
         // Load content 2
    }
} 
```

`NSLog(@"Position: %g", scrollView.contentOffset.x);`

不要忘记`UIScrollViewDelegate`.h 文件中的委托。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-22T22:17:21.177

这是获取当前位置（页面）为**整数值**的解决方案：使用 scrollViewDidEndDecelerating: 方法：

```
-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    NSLog(@"%i", (int)(_scrollView.contentOffset.x / _scrollView.frame.size.width));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-25T08:04:55.793

If for any reason, you'd like to be notified before the view ended decelerating; for example, to perform animations. You can also use this:

```
func scrollViewWillEndDragging(_ scrollView: UIScrollView, withVelocity velocity: CGPoint, targetContentOffset: UnsafeMutablePointer<CGPoint>) {
    // Where the scroll will end (vertically)
    let offSetY = targetContentOffset.pointee.y

    // I've got a scroll view with paging enabled so I use this to check which "page" is selected.
    if offSetY == firstPageView.frame.origin.y {
        // Do something…
    } else if offSetY == secondPageView.frame.origin.y {
        // Do something…
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-30T07:48:20.120

使用 UIScrollViewDelegate，

```
 func scrollViewWillBeginDragging(scrollView: UIScrollView){
        print("dragging begins")
        print("Position:  \(scrollView.contentOffset.x) , \(scrollView.contentOffset.y) ")
    } 
```

# php - 使用 PDO 代替 mysql_*

> ID：14012449
> 
> 赞同：0
> 
> 时间：2012-12-23T16:07:41.817
> 
> 标签：php, mysql, pdo

我更改了以下代码：

```
mysql_connect('localhost','username','password');
mysql_select_db('pl') or die( "Unable to select database"); 
```

到

```
PDO('mysql:host=localhost;dbname=pl;charset=UTF-8', 'username', 'password'); 
```

这是正确的还是我必须将它传递给一个变量（在 PDO 教程中它被传递给一个变量 db；这样做的目的是什么？[http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T16:15:18.700

从以下位置修改您的代码：

```
PDO('mysql:host=localhost;dbname=pl;charset=UTF-8', 'username', 'password'); 
```

到：

```
$Connection = new PDO('mysql:host=localhost;dbname=pl;charset=UTF-8', 'username', 'password'); 
```

并且您的基本查询结构将围绕您的`$Connection`变量。例子：

```
$Query = $Connection->query("LIST TABLES");
$Results = $Query->fetchAll(); 
```

这有点像：

```
$Query = mysql_query("LIST TABLES");
$Results = mysql_fetch_array($Query); 
```

阅读这些手册：

[构造一个连接（如 mysql_connect/mysql_select_db）](http://php.net/manual/en/pdo.construct.php%20s)

[PDO 查询（如 mysql_query();](http://php.net/manual/es/pdo.query.php%20fr)

[准备好的报表](http://php.net/manual/en/pdo.prepare.php%20Prepared%20Statements)

[执行准备好的语句](http://php.net/manual/en/pdostatement.execute.php)

[PDO FetchAll（如 mysql_fetch_array）](http://php.net/manual/en/pdostatement.fetchall.php)

[整个 PDO 手册](http://php.net/manual/en/book.pdo.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T16:15:58.477

这更好，因为如果出现问题，它可以捕获异常（所以，有人告诉我）

```
try {
    $conn = new PDO('mysql:host=localhost;dbname=mydb', 'root', 'test', array(PDO::ATTR_EMULATE_PREPARES => false, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));
} catch(PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();
} 
```

显然，您需要更改 mydb、root 和测试。

现在，唯一剩下的就是`$conn`在您查询时致电。

*请记住，* **捕获异常**有点像`or die(mysql_error());`sql 连接的一部分。但是，这个会以某种方式做到这一点，任何错误都不会显示您的整个文件位置，这可能是一个安全威胁。

此外，我建议您查看这些教程以了解更多信息：

1.  [PHP 数据库访问：你做对了吗？](http://net.tutsplus.com/tutorials/php/php-database-access-are-you-doing-it-correctly/)
2.  [MySQL 开发人员的 PDO 教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)

# javascript - 使用retina.js时在子域上托管静态图像

> ID：14012454
> 
> 赞同：2
> 
> 时间：2012-12-23T16:08:28.233
> 
> 标签：javascript, subdomain, tumblr, retina.js

我正在尝试让retina.js 在我有CNAME 的子域的tumblr 上工作。

所以我有 blog.benwhitla.com 使用 CNAME 指向 benwhitla.tumblr.com，正如 tumblr 建议的那样。我想托管普通和@2x 静态内联图像，并使用retina.js 将视网膜图像自动显示在视网膜显示器上。要使retina.js 工作，图像必须与js 文件位于同一域或子域中。

在此处找到关于此的视网膜.js 讨论：[https ://github.com/imulus/retinajs/issues/40](https://github.com/imulus/retinajs/issues/40)

所以按照这个想法，我创建了一个子域：i.blog.benwhitla.com。因为看起来retina.js 应该能够在当前域的子域中抓取图像，所以我希望这可以工作。

在这里测试：http: [//benwhitla.com/client/retina/](http://benwhitla.com/client/retina/)

第一个图像在外部托管，并且不起作用 - 这是预期的。第二张图片与 html 和 js 位于相同的位置，并且工作正常。第三张图片托管在 i.blog.benwhitla.com 上，从技术上讲，它是 benwhitla.com 的子域，所以我预计视网膜图像会拉出，但事实并非如此。

也许两个子域对于retina.js 来说太多了，无法支持？

有任何想法吗？这两天我一直在用头撞墙。

我还尝试对所有内容（css、图像和 js）使用相对路径，例如：

```
//i.blog.benwhitla.com 
```

但这没有任何区别。

谢谢您的帮助。

**编辑：** 开始使用retina.js的分叉版本，它应该实际上支持上面链接的github问题中的子域（我不能在stackoverflow中添加超过2个链接）。

但它会引发以下错误，即使我将 document.domain 定义为 benwhitla.com。

```
XMLHttpRequest cannot load http://i.blog.benwhitla.com/img/benwhitla@2x.png. Origin http://blog.benwhitla.com is not allowed by Access-Control-Allow-Origin. 
```

**编辑** 不允许在这里回答我自己的问题，所以这就是我现在所处的位置，这不是一个好的修复，但它至少会提取图像：

好吧，我确定这是错误的方法，但是使用允许子目录的较新脚本，并将本节中的所有 FALSE 更改为 TRUE，它现在可以工作了。虽然现在可能不安全？

```
 RetinaImagePath.prototype.check_2x_variant = function(callback) {
    var http, that = this;
    if (this.is_external()) {
      return callback(true);
    } else if (this.at_2x_path in RetinaImagePath.confirmed_paths) {
      return callback(true);
    } else {
      http = new XMLHttpRequest;
      http.open('HEAD', this.at_2x_path);
      http.onreadystatechange = function() {
        if (http.readyState != 4) {
          return callback(true);
        }

        if (http.status >= 200 && http.status <= 399) {
          if (config.check_mime_type) {
            var type = http.getResponseHeader('Content-Type');
            if (type == null || !type.match(/^image/i)) {
              return callback(false);
            }
          }

          RetinaImagePath.confirmed_paths.push(that.at_2x_path);
          return callback(true);
        } else {
          return callback(true);
        }
      }
      http.send();
    } 
```

此外，如果没有 @2x 图像，它现在会引发错误。

# java - 在 Java 中使用正则表达式进行部分精确匹配

> ID：14012457
> 
> 赞同：1
> 
> 时间：2012-12-23T16:08:38.780
> 
> 标签：java, regex

我需要查找**字符串**是否以“abcd”开头，后跟 1-5 位数字，然后是逗号，然后以 0-3 位数字结尾。

```
 Pattern pattern = Pattern.compile("abcd[0-9]{1,5},[0-9]{0,3}$");

    String[] data = { "pqrsabcd12345,5", "abcd1234,5", "abcd1234542155,",
            "abcdSD12345,555", "abcd123,555", "abcd12,5555",
            "abcd,5555ffdfd", "abcd2,5555ffdfd", "abcd2,5" };
    for (CharSequence input : data) {
        Matcher matcher = pattern.matcher(input);
        while (matcher.find()) {
            System.out.format("\nI found the text  %s :"
                    + " \"%s\" starting at "
                    + "index %d and ending at index %d.%n", input,
                    matcher.group(), matcher.start(), matcher.end());
        }
    } 
```

输出 ：

```
I found the text  pqrsabcd12345,5 : "abcd12345,5" starting at index 4 and ending at index 15.

I found the text  abcd1234,5 : "abcd1234,5" starting at index 0 and ending at index 10.

I found the text  abcd123,555 : "abcd123,555" starting at index 0 and ending at index 11.

I found the text  abcd2,5 : "abcd2,5" starting at index 0 and ending at index 7. 
```

使用[它](https://stackoverflow.com/questions/787354/how-to-detect-exact-length-in-regex)，我可以确保以部分结尾。我想我只能停止像这样的字符串了`"pqrsabcd12345,5"`

如果我错过了什么，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T16:13:32.830

您只需要对您的正则表达式进行一些修改：-

```
"^abcd[0-9]{1,5},[0-9]{0,3}$" 
```

您忘记使用*Caret* -`^`以确保模式在字符串的开头匹配。

或者，如果您希望您的模式在末端匹配，您也可以使用`Matcher#matches()`代替方法。`Matcher#find()`这样你就不需要使用`anchors`.

因此，可以很容易地用不满足您要求的字符串显示和`matches()`之间的区别：-`find()`

```
// pattern is the reference you are having
pattern.matcher("pqrsabcd12345,5").find(); // Will return true
pattern.matcher("pqrsabcd12345,5").matches(); // Will return false 
```

# ios - 如何在 iphone 中管理视图导航？

> ID：14012458
> 
> 赞同：0
> 
> 时间：2012-12-23T16:09:03.073
> 
> 标签：ios, xcode, sharedpreferences

假设，在 Xcode 上的 xiphone 项目中，我有一个启动屏幕“a”，第一个视图“b”，第二个视图“c”，第二个视图上有一个“返回”按钮。现在我的任务是，当我的应用程序第一次启动时，将启动启动画面。然后将显示“b”。然后转到“c”。之后，当我再次启动应用程序时，将显示视图“c”。如果我想查看视图“b”，我必须在视图“c”上按“返回”按钮。否则视图“b”将永远不会显示。

这是我的问题。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T17:52:10.607

您可以使用通知。因此，在视图控制器 C 中，您可以：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    // add notification to be informed if the app becomes active while
    // this view controller is active, and if so, to invoke the
    // appDidBecomeActive method.

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(appDidBecomeActive)
                                                 name:UIApplicationDidBecomeActiveNotification
                                               object:nil];
}

- (void)appDidBecomeActive
{
    // do whatever you want in this method. for example, if you did
    // a modal segue (or presentViewController) to present this
    // view controller's view, then you'd dismiss like thus:

    [self dismissViewControllerAnimated:NO completion:nil];
}

- (void)viewWillDisappear:(BOOL)animated
{
    // when this view disappears, we should remove the observer on
    // the UIApplicationDidBecomeActiveNotification

    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:UIApplicationDidBecomeActiveNotification
                                                  object:nil];
} 
```

# php - img src 中的 php 页面

> ID：14012459
> 
> 赞同：1
> 
> 时间：2012-12-23T16:09:05.963
> 
> 标签：php, image

我正在尝试创建一个 html 页面，该页面使用 php 页面来决定在设定的时间显示什么图像。

唯一的问题是当我转到 php 页面时，它会显示正确的图像，但是当我尝试 img src php 页面时，它会在 HTML 页面上给出一个死链接。这是我在 HTML 和 PHP 页面上使用的代码。

HTML：

```
<html>
<body>
<img src="http://itcacher85.hostzi.com/getImage.php" />
</body>
</html> 
```

获取图像.php：

```
<?php
header('Cache-Control: no-cache, no-store, max-age=0, must-revalidate');
header('Expires: January 01, 2013'); // Date in the past
header('Pragma: no-cache');

$h = date('Hi');

if ($h >= 2100 && $h < 2230){ $img = '40px-Dni5.png'; }
elseif ($h >= 2230 && $h < 0000){ $img = '40px-Dni3.png'; }

elseif ($h >= 0000 && $h < 0130){ $img = '40px-Dni7.png'; }
elseif ($$h >= 0130 && $h < 0137){ $img = '40px-Dni6.png'; }

elseif ($h >= 0137 && $h < 0138){ $img = '40px-Dnisolve.png'; }
elseif ($h >= 0138 && $h < 0300){ $img = '40px-Dni6.png'; }

elseif ($h >= 0300 && $h < 0430){ $img = '40px-Dni4.png'; }
elseif ($h >= 0430 && $h < 0600){ $img = '40px-Dni5.png'; }

else{ $img = 'where.png'; }
?>

<img src="<?php echo $img; ?>"> 
```

如果您转到 PHP 页面，此代码将很好地显示图像，但是当您将其链接为图像时，它不起作用。我做了一些研究，发现我可能需要添加一个标题：

```
header('Content-type: image/png'); 
```

但是当我添加它时，我得到一个死链接，并且 php 页面或 HTML 页面上都没有显示图像。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T16:11:36.467

而不是使用图像标签，使用这个：

```
header("Content-Type: image/png");
readfile($img); 
```

使用图像标签时，源必须是图像数据，而不是另一个图像标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T16:12:06.957

这不是图像的工作方式。您需要输出图像的*数据*，而不是另一个 HTML 片段。

```
<?php
header('Cache-Control: no-cache, no-store, max-age=0, must-revalidate');
header('Expires: January 01, 2013'); // Date in the past
header('Pragma: no-cache');
header('Content-Type: image/png');

$h = date('Hi');

if ($h >= 2100 && $h < 2230){ $img = '40px-Dni5.png'; }
elseif ($h >= 2230 && $h < 0000){ $img = '40px-Dni3.png'; }

elseif ($h >= 0000 && $h < 0130){ $img = '40px-Dni7.png'; }
elseif ($h >= 0130 && $h < 0137){ $img = '40px-Dni6.png'; }
# HEY!  ^ LOOK OVER HERE! ... too many $ signs.

elseif ($h >= 0137 && $h < 0138){ $img = '40px-Dnisolve.png'; }
elseif ($h >= 0138 && $h < 0300){ $img = '40px-Dni6.png'; }

elseif ($h >= 0300 && $h < 0430){ $img = '40px-Dni4.png'; }
elseif ($h >= 0430 && $h < 0600){ $img = '40px-Dni5.png'; }

else{ $img = 'where.png'; }

readfile($img);
?> 
```

# windows - Windows 的 Copyfile 和集群预留

> ID：14012462
> 
> 赞同：2
> 
> 时间：2012-12-23T16:09:23.367
> 
> 标签：windows

复制文件（使用 ）的操作系统（XP、Vista、Win7）行为是`CopyFile`什么？

它何时保留要复制到的集群？以下哪一个 ？

1.  它在开始复制**之前**保留**所有**目标集群
***   它保留**一些**集群，**然后将**文件**部分**复制到这些集群，**然后**，保留**其他**集群，**然后将**新文件**部分**复制到这些新保留的集群，等等。**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T01:27:05.457

Explorer 和 cmd.exe 使用的复制操作会立即保留大部分磁盘空间，至少在我的 Windows 7 32 位上是这样，您可以通过查看卷上的可用空间看到。据我所知，至少从 NT 4 开始，这种行为在所有版本的 Windows 中都是相同的。

但是，有几个警告：

*   Explorer 和 cmd.exe 不（必须）使用 CopyFile。
*   此行为在不同版本的 Windows 中可能会有所不同，或视情况而定。
*   它可能只是*大多数*目标集群，例如它有时可能需要扩展 MFT 才能完成操作；我认为这不太可能，但我不能排除它。

我的建议：

如果偶尔失败的可能性很小，请测试 CopyFile，如果它的行为符合预期，请继续使用它。

如果不是，请考虑自己复制。不幸的是，即使在那时，最后一个警告也可能适用，但正如我所说，我认为这可能不是一个重大风险。

无论哪种方式，您都需要准备好应对意外故障，因为硬件故障，甚至可能是文件系统损坏，都可能导致复制中途失败。**

# iphone - iOS 5 中的 iPad 方向问题

> ID：14012474
> 
> 赞同：1
> 
> 时间：2012-12-23T16:11:07.823
> 
> 标签：iphone, ios, ipad, orientation, landscape

我在 StoryBoard 中有 UISplitViewController 是初始视图，我希望该应用程序仅在横向模式下工作。

我只将方向限制为横向，甚至将 plist 初始界面方向设置为横向（右主页按钮）。

在 iOS 6 中一切正常，它只显示主视图和细节视图，但在 iOS 5 中，它卡在纵向模式，只显示细节视图。

请帮我解决这个问题，我在过去的两个小时里都坚持了下来......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T16:49:01.677

您需要`shouldAutorotateToInterfaceOrientation`在包含在以下内容中的视图控制器中实现`UISplitViewController`：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
    return UIInterfaceOrientationIsLandscape(toInterfaceOrientation);
} 
```

# c# - Winform C# Datagridview 绘制标题

> ID：14012475
> 
> 赞同：1
> 
> 时间：2012-12-23T16:11:08.930
> 
> 标签：c#, winforms, datagridview, paint

我想使用 c# 在 Windows 窗体中自定义我的 datagridviews。我想做的是用我制作的渐变绘制数据网格标题：

```
public void Colorear_Barra_abajo(object sender, PaintEventArgs e)
    {
        Rectangle r = new Rectangle(0,0, panel_Borde_abajo.Width, panel_Borde_abajo.Height);

        if (r.Width > 0 && r.Height > 0)
        {
            Color c1 = Color.FromArgb(255, 54, 54, 54);
            Color c2 = Color.FromArgb(255, 62, 62, 62);
            Color c3 = Color.FromArgb(255, 98, 98, 98);

            LinearGradientBrush br = new LinearGradientBrush(r, c1, c3, 90, true);
            ColorBlend cb = new ColorBlend();
            cb.Positions = new[] { 0, (float)0.5, 1 };
            cb.Colors = new[] { c1, c2 , c3 };
            br.InterpolationColors = cb;

            // paint
            e.Graphics.FillRectangle(br, r);
        }
    } 
```

问题是 datagridviews 没有绘制事件，所以我不能使用它。有没有办法用渐变绘制标题？或者唯一的方法是选择一种背景颜色？

谢谢..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-23T16:26:48.607

如果你的意思是`Column Header`，是的。在里面`CellPainting Event`

```
 private void dataGridView1_CellPainting(object sender, DataGridViewCellPaintingEventArgs e)
    {
        if (e.RowIndex == -1)
        {
            Color c1 = Color.FromArgb(255, 54, 54, 54);
            Color c2 = Color.FromArgb(255, 62, 62, 62);
            Color c3 = Color.FromArgb(255, 98, 98, 98);

            LinearGradientBrush br = new LinearGradientBrush(e.CellBounds, c1, c3, 90, true);
            ColorBlend cb = new ColorBlend();
            cb.Positions = new[] { 0, (float)0.5, 1 };
            cb.Colors = new[] { c1, c2, c3 };
            br.InterpolationColors = cb;

            e.Graphics.FillRectangle(br, e.CellBounds);
            e.PaintContent(e.ClipBounds);
            e.Handled = true;
        }
    } 
```

# node.js - Express 和中间件的问题

> ID：14012478
> 
> 赞同：0
> 
> 时间：2012-12-23T16:11:14.057
> 
> 标签：node.js, redirect, express, middleware

```
function redit (req, res, next) {

 var session = req.session.user;

 if (session) {

    res.redirect('/home');

    next();

 }

 else {

    res.redirect('/');

    next();

 }

}

app.get('/', redit, function (req, res){

   res.render('home0.ejs');

}); 
```

我编写这个中间件来检查是否有 req.session.user，如果有，用户将被重定向到`home`，如果没有，将被重定向到`/`。但是当这个中间件被调用时，Chrome 对我说`Error 310 (net::ERR_TOO_MANY_REDIRECTS)'`，任何解决方案......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T16:16:55.640

您错过了这样一个事实，即在重定向匿名用户（具有虚假`req.session.user`值）后，最终将出现在相同的 ( `/`) 页面上 - 因此中间件将再次检查他们的身份`redir`......一次又一次......一次又一次。因此出现“太多重定向”错误。

常见的解决方案是将所有匿名者重定向到某个其他网关页面 - 并且该页面显然不应该检查`session.user`。

# netbeans - 如何解决 JavaME 中的 ConnectionNotFoundException

> ID：14012482
> 
> 赞同：0
> 
> 时间：2012-12-23T16:11:39.157
> 
> 标签：netbeans, java-me, io

我正在尝试通过 Netbeans 模拟器上的 J2ME 应用程序连接到 Internet，该应用程序具有以下功能，该功能连接到网页并使用`System.out.println()`.

```
function getHTML(String url)
{
    HttpConnection httpConn = null;
    InputStream is = null;
    OutputStream os = null;

    try
    {
        httpConn = (HttpConnection)Connector.open(url);
        int respCode = httpConn.getResponseCode();
        if (respCode == httpConn.HTTP_OK)
        {
            StringBuffer sb = new StringBuffer();
            os = httpConn.openOutputStream();
            is = httpConn.openDataInputStream();
            int chr;
            while ((chr = is.read()) != -1)
                sb.append((char) chr);

            System.out.println(sb.toString());
            os.close();
            is.close();
        }
        else
        {
            System.out.println("Error " + respCode);
        }
        httpConn.close();
    }
    catch(IOException ioex)
    {
        ioex.printStackTrace();
    }
} 
```

但我一直收到以下错误；

```
javax.microedition.io.ConnectionNotFoundException: error 10051 in socket::open
    at com.sun.midp.io.j2me.socket.Protocol.open0(), bci=0
    at com.sun.midp.io.j2me.socket.Protocol.connect(), bci=209
    at com.sun.midp.io.j2me.socket.Protocol.open(), bci=216
    at com.sun.midp.io.j2me.socket.Protocol.openPrim(), bci=4
    at com.sun.midp.io.j2me.http.Protocol.createConnection(), bci=41
    at com.sun.midp.io.j2me.http.Protocol.connect(), bci=41
    at com.sun.midp.io.j2me.http.Protocol.streamConnect(), bci=164
    at com.sun.midp.io.j2me.http.Protocol.startRequest(), bci=7
    at com.sun.midp.io.j2me.http.Protocol.sendRequest(), bci=33
    at com.sun.midp.io.j2me.http.Protocol.sendRequest(), bci=3
    at com.sun.midp.io.j2me.http.Protocol.getResponseCode(), bci=5 
```

我知道我的代码不是问题，因为它曾经在我的旧笔记本电脑上工作，但自从我在新笔记本电脑上安装 Netbeans 后它就没有工作。是因为我的 Internet 连接、防火墙设置或 Netbeans 中的设置，还是我没有正确安装 Netbeans？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:19:51.970

如果您想发送一些数据和接收方式，请尝试编码

```
try
{
        httpConn = (HttpConnection)Connector.open(url);
        os = httpConn.openOutputStream();

        //Writing data to os
        os.write(b);        //Here b is a byte array
        os.flush(); 
        int respCode = httpConn.getResponseCode();
        if (respCode == httpConn.HTTP_OK)
        {
            StringBuffer sb = new StringBuffer();

            is = httpConn.openDataInputStream();
            int chr;
            while ((chr = is.read()) != -1)
                sb.append((char) chr);

            System.out.println(sb.toString());

        }
        else
        {
            System.out.println("Error " + respCode);
        }

    }
    catch(IOException ioex)
    {
        ioex.printStackTrace();
    }

    if(os!=null) os.close();
    if(is!=null) is.close();
    if(httpConn!=null) httpConn.close();
    os=null;is=null;httpConn=null;
} 
```

# c++ - 为什么在已删除指针上调用非虚拟成员函数是未定义的行为？

> ID：14012483
> 
> 赞同：3
> 
> 时间：2012-12-23T16:11:41.333
> 
> 标签：c++, undefined-behavior, language-lawyer, dereference

正如标题所说：

***为什么在已删除指针上调用非虚拟成员函数是未定义的行为？***

请注意，问题不会询问它是否是未定义的行为，而是询问***为什么***它是未定义的行为。

* * *

考虑**[以下程序](http://ideone.com/UkGa3N)**：

```
#include<iostream>
class Myclass
{
    //int i
    public:
      void doSomething()
      {
          std::cout<<"Inside doSomething";
          //i = 10;
      }
};

int main()
{
    Myclass *ptr = new Myclass;
    delete ptr;

    ptr->doSomething();

    return 0;
} 
```

* * *

在上面的代码中，编译器`this`在调用成员函数时实际上并没有取消引用`doSomething()`。请注意，该函数不是虚函数，编译器通过将 this 作为第一个参数传递给函数将成员函数调用转换为通常的函数调用（据我所知，这是实现定义的）。他们可以这样做，因为编译器可以准确地确定在编译时调用哪个函数。所以实际上，通过删除指针调用成员函数不会取消引用`this`. 仅当`this`在函数体内访问任何成员时才会取消引用。（即：在上面访问的示例中取消注释代码`i`）
如果在函数中未访问成员，则上述代码实际上不应调用未定义的行为。

那么为什么标准要求通过删除的指针调用非虚成员函数是一种未定义的行为，而事实上它可以可靠地说取消引用`this`应该是导致未定义行为的语句？仅仅是为了让语言的用户简单，标准只是对其进行概括，还是在这个任务中涉及一些更深层次的语义？

我的感觉是，也许因为它是实现定义了编译器如何调用成员函数，这可能是标准无法强制执行 UB 发生的实际点的原因。

有人可以确认吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-23T16:14:48.557

因为它可能可靠的情况很少，这样做仍然是一个难以言喻的愚蠢想法。定义行为没有任何好处。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-31T15:43:10.587

> 那么为什么标准要求通过删除的指针调用非虚成员函数是一种未定义的行为，而实际上它可以可靠地说取消引用 this 应该是导致未定义行为的语句？

[expr.ref] 第 2 段说成员函数调用`ptr->doSomething()`等价于`(*ptr).doSomething()`调用非静态成员函数**是**取消引用。如果指针无效，那是未定义的行为。

生成的代码是否真的需要针对特定​​情况取消引用指针并不相关，编译器建模的抽象机*原则上*会进行取消引用。

使语言复杂化以准确定义只要不访问任何成员就允许的情况几乎为零。在看不到函数定义的情况下，您不知道调用它是否安全，因为您无法知道该函数是否使用`this`。

只是不要这样做，没有充分的理由，语言禁止这样做是一件好事。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-23T16:44:38.750

在 C++ 语言中（根据 C++03），尝试*使用*无效指针的值已经导致未定义的行为。没有必要取消对 UB 的引用。只需读取指针值就足够了。当您仅尝试读取该值时导致 UB 的“无效值”概念实际上扩展到几乎所有标量类型，而不仅仅是指针。

在`delete`该指针通常在该特定意义上无效之后，即读取据称指向刚刚被“删除”的东西的指针会导致未定义的行为。

```
int *p = new int();
delete p;
int *p1 = p; // <- undefined behavior 
```

通过无效指针调用成员函数只是上述的一种特殊情况。指针用作隐式参数的参数`this`。传递指针是一个非引用参数是一种读取它的行为，这就是为什么在您的示例中行为未定义的原因。

所以，你的问题真的归结为为什么读取无效的指针值会导致未定义的行为。

好吧，这可能有许多特定于平台的原因。例如，在某些平台上，读取指针的行为可能会导致指针值被加载到某个专用的地址特定寄存器中。如果指针无效，硬件/操作系统可能会立即检测到它并触发程序故障。事实上，这就是我们流行的 x86 平台在段寄存器方面的工作方式。我们没有听到太多关于它的唯一原因是流行的操作系统坚持平面内存模型，它根本不主动使用段寄存器。

* * *

C++11 实际上声明*取消引用*无效指针值会导致*未定义*的行为，而无效指针值的所有其他用途会导致*实现定义的*行为。它还指出，在“复制无效指针”的情况下实现定义的行为可能会导致“系统生成的运行时错误”。因此，实际上有可能小心翼翼地穿过 C++11 规范的迷宫，并成功得出结论，即通过无效指针调用非虚拟方法应该会导致上述*实现定义的行为。*无论如何，“系统生成的运行时错误”的可能性总是存在的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-06T14:57:12.037

在这种情况下，取消引用`this`实际上是一个实现细节。我并不是说`this`指针不是由标准定义的，因为它是，但从语义抽象的角度来看，允许使用已被破坏的对象的目的是什么，只是因为存在一个极端情况练习它会“安全”吗？没有任何。所以不是。不存在对象，因此您不能在其上调用函数。

# iphone - 使用代码摆脱数字键盘并在字段上设置数字限制

> ID：14012484
> 
> 赞同：1
> 
> 时间：2012-12-23T16:11:57.547
> 
> 标签：iphone, objective-c, xcode

我有一个文本字段，其中键盘类型是数字键盘。

我曾经有这种方法，它与触摸我视野中的任何地方有关。连接是在 xib 文件中建立的。它没有问题。

```
-(IBAction)closeKeypad:(id)sender
{

[textField1 resignFirstResponder];
[textField2 resignFirstResponder];

} 
```

然后我需要限制用户可以输入的值（最多 100）。

我结束了以下。

```
- (void)textFieldDidEndEditing:(UITextField *)textField {

    //if value is greater than 100, display error message//
    int integer = [textField.text intValue]; //convert value into integer//

    if (integer > 100) {

    UIAlertView *tooHigh = [[UIAlertView alloc] initWithTitle:@"Invalid" message:@"Number    cannot be over 100" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

    [tooHigh show];

} 
```

现在我需要两件事

1) 如果用户输入超过 100 的数字，则文本字段被清除，键盘停留在该文本字段中。

2）一种在触摸背景时摆脱键盘的方法。我猜我需要一个基于代码的解决方案？

在之前的实现中，我可以输入 200，然后我会收到错误，但键盘会关闭，并且 200 会出现在文本字段中。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T16:34:34.397

您需要一个数字格式化程序，首先分配它并设置它的主要属性：

```
@property (nonatomic,strong) NSNUmberFormatter* formatter; 
```

在实施中：

```
self.formatter=[NSNUmberFormatter new];
formatter.numberStyle= NSNumberFormatterDecimalStyle;
formatter.maximum= @100; 
```

然后 ：

```
- (void)textFieldDidEndEditing:(UITextField *)textField 
{
    NSNumber* value;
    BOOL correct=[formatter getObjectValue: &value forString: self.textField.text errorDescription: nil];
    if(!correct)
    {
        self.textField.text= @""; // clear text
    }
} 
```

至于第二部分，在视图控制器中启用用户交互：

```
self.view.userInteractionEnabled= YES; 
```

然后实现这个方法：

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event; 
```

只有当无法成为第一响应者的视图被触摸时，您才会收到通知，因此请退出文本字段的第一响应者：

```
if(textField.isFirstResponder)
    [textField resignFirstResponder]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T19:25:06.067

至于关闭软键盘，您可以从视图的 View Controller 类中向您的视图发送以下消息，它将关闭键盘：

```
[self.view endEditing:YES]; 
```

当用户触摸背景时触发它的一种方法是向视图添加一个点击事件，并将上述消息放入点击手势事件处理程序中。

# c# - 当前尚未初始化。您必须在尝试读取 Current 之前对其进行初始化

> ID：14012485
> 
> 赞同：1
> 
> 时间：2012-12-23T16:12:00.423
> 
> 标签：c#, asp.net, umbraco, publishing-site

在我发布我的网站并从 IIS 运行它后，我遇到了一个问题。

“ **Current 尚未初始化。您必须先初始化 Current，然后再尝试读取它。** ”

我使用 Umbraco 版本 4.11.1

![问题](../Images/dff977292ca4ec78311dd741bc15f746.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:10:45.657

您可能在 live bin 文件夹中有不应该存在的 DLL。删除 bin 文件夹并替换为升级后的 bin 文件夹。这很可能是导致问题的全局 DLL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T14:42:42.310

转到站点应用程序池和回收站点站点应用程序池。

# c# - 将 Windows 8 应用程序与 Skydrive 连接并在 c# 中上传文件问题

> ID：14012487
> 
> 赞同：0
> 
> 时间：2012-12-23T16:12:05.453
> 
> 标签：c#, windows-8, microsoft-metro, windows-store-apps, onedrive

```
 async  private void uploadtosky_Click(object sender, RoutedEventArgs e)
{
    try
    {
       LiveAuthClient auth = new LiveAuthClient();

       LiveLoginResult log = await auth.LoginAsync(new List<string> { "wl-basic", "wl.skydrive", "wl.signin" });

       if (log.Status == LiveConnectSessionStatus.Connected)
       {
           LiveConnectClient uploadcl = new LiveConnectClient(auth.Session);
           LiveOperationResult up = await uploadcl.BackgroundUploadAsync("me/skydrive", heading.Text, samplefile, OverwriteOption.Overwrite);

       }                
    }
    catch
    {
        MessageDialog msg = new MessageDialog("Oops ! something went wrong while trying to connect");
        msg.ShowAsync();
    }

} 
```

当我执行代码片段时，`messagebox`显示`Oops ! something went wrong while trying to connect`. 我的计算机已连接到 Internet，单击上传按钮后，我会在 Windows 8 应用程序中获得一个真实帐户的登录页面。但是我猜它无法登录该帐户，因此会发生异常。有什么想法可以克服这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T16:20:29.983

你的文件有多大？是否大于 300MB？我记得大文件在上传时有一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:10:25.717

终于找到了答案。实际上需要将 auth.Session 替换为 log.Session （在该行中`LiveConnectClient uploadcl = new LiveConnectClient(auth.Session);`）并添加一个名为 wl.skydrive_update 的范围`LiveLoginResult log = await auth.LoginAsync(new List<string> { "wl-basic", "wl.skydrive", "wl.signin" });`

就是这样 ！

# php - 使用 pecl 在 linux 上为 lampp 设置 memcached

> ID：14012492
> 
> 赞同：3
> 
> 时间：2012-12-23T16:13:15.327
> 
> 标签：php, linux, memcached, pecl, lampp

**原帖**

首先，我想安装**memcached**，而不是 memcache。

从昨天开始，我正在尝试设置 memcached 以在 ubuntu 12.10 上与我的 lampp 服务器一起使用。我已经遵循了几乎所有我能找到的教程。最近，我尝试做的是：

在终端

```
apt-get install libmemcached-dev 
cd /opt/lampp
./bin/pecl install memcached 
```

然后在 php.ini 文件中添加 extension="memcached.so" 。在此之后我重新启动lampp使用`/opt/lampp/lampp restart`

当我尝试在浏览器中打开 php 脚本时，它刚刚被下载。运行`tail -20 /opt/lampp/logs/php_error_log`这是我看到的：

```
PHP Warning:  PHP Startup: Unable to load dynamic library '/opt/lampp/lib/php/extensions/no-debug-non-zts-20100525/memcached.so' - /opt/lampp/lib/php/extensions/no-debug-non-zts-20100525/memcached.so: wrong ELF class: ELFCLASS64 in Unknown on line 0 
```

看来[这家伙](http://montenasoft.com/en/blog/how-install-pecl-php-extension-64bit-linux-while-you-are-using-32bit-xampp)有同样的问题，但扩展名不同。当我尝试使用以下命令编译 32 位版本的扩展时：

```
phpize
CFLAGS=-m32 CPPFLAGS=-m32 CCASFLAGS=-m32 ./configure
make 
```

但`make`抛出以下错误：

```
/usr/bin/ld: skipping incompatible /usr/local/lib/libmemcached.so when searching for -lmemcached
/usr/bin/ld: cannot find -lmemcached
/usr/bin/ld: cannot find -lz
collect2: error: ld returned 1 exit status
make: *** [memcached.la] Error 1 
```

**问题是我什至不知道我是否走在正确的道路上**。如果有人可以编写简短的分步指南如何使其正常工作，或者只是告诉我问题出在哪里，那就太好了。

**更新**

执行后`sudo dpkg --add-architecture i386 sudo apg-get update sudo apt-get install libmemcached-dev:i386 libz-dev:i386`memcached`phpize CFLAGS=-m32 CPPFLAGS=-m32 CCASFLAGS=-m32 ./configure make`编译正常。但是它仍然不起作用。再次检查 php 错误日志后，我得到了这个

```
PHP Startup: Unable to load dynamic library '/opt/lampp/lib/php/extensions/no-debug-non-zts-20100525/memcached.so' - /opt/lampp/lib/libgcc_s.so.1: version `GCC_4.2.0' not found (required by /usr/lib/i386-linux-gnu/libstdc++.so.6) in Unknown on line 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:04:55.830

您走在正确的道路上-您的lampp是32位，而系统的其余部分（我假设）是64位。因此，当您安装 libmemcached 时，编译后的 php-libmemcached 是 64 位版本。这就是为什么您会收到“错误的 ELF 类”错误。

在编译 32 位版本的 php-memchached 之前，您需要安装 32 位版本的 libmemcached 和 libz（以及它们的头文件）。

你需要： `sudo dpkg --add-architecture i386` `sudo apg-get update` `sudo apt-get install libmemcached-dev:i386 libz-dev:i386`

我认为这应该足以让您编译 32 位版本的 php-libmemcached。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:13:43.633

有一种肮脏的方法可以解决您的问题

去`/usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/4.x.x`

并将 libgcc_s.so 复制到

`/opt/lampp/lib`并将其重命名为`libgcc_s.so.1`以覆盖以前的文件。

# html - Rails 页面的 html 错误

> ID：14012493
> 
> 赞同：1
> 
> 时间：2012-12-23T16:13:18.030
> 
> 标签：html, ruby-on-rails, routes, scaffolding, function

我在我的 rails 网站上有一个与此页面位于同一文件夹中的页面的链接：

```
<%= link_to 'Special Access', 'followers/special_access' %> 
```

但是，当我转到此页面时，它会在该 url 上显示一个不同的页面。

```
<p id="notice"><%= notice %></p>
<div id="sent">
    <p>Your request has been sent</p>
    <%= link_to 'Home', followers_path %>
</div> 
```

我尝试删除 html 所在的页面，但首先我需要该页面，它也给了我一个错误。

我编辑了控制器以包含：

```
def special_access
    format.html  { redirect_to followers/special_access }
    format.json  { render :json => @post }
end 
```

代替

```
def show 
```

但这仍然没有解决问题。

如何让正确的 html 显示在正确的页面上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T21:30:48.767

如果您没有为 定义路由`special_access`，rails 将假设`special_acces`路径中的部分是`:id`显示页面的路由（如 url 所示`followers/:id`）。

因此，首先，在您的 中`routes.rb`，找到`resources :followers`并替换为以下内容：

```
resources :followers do
  collection do
    get :special_access
  end
end 
```

现在你最好总是使用 rails 路径助手，这样你的链接就会变成

```
<% link_to 'Special Access', special_access_followers_path %> 
```

在这里，我假设特殊访问权限在关注者的集合上，如果它应该在特定的关注者上（这对我来说似乎更合乎逻辑，但我当然不知道），你应该写

```
resources :followers do
  member do
    get :special_access
  end
end 
```

你的链接会变成

```
<% link_to 'Special Access', special_access_followers_path(@follower) %> 
```

我不太确定你想在你的控制器操作中做什么，我希望你只想渲染一个 html 页面（因为重定向到同一个 url 看起来很傻，而且你的语法也是错误的）。

希望这可以帮助。

# java - 在两个实体中休眠 @JoinColumn 以实现 1-m 关系

> ID：14012494
> 
> 赞同：1
> 
> 时间：2012-12-23T16:13:23.803
> 
> 标签：java, hibernate

假设 Department 和 Employee 之间存在 1-m 关系，哪个部门可以有很多员工，而一个员工只能在一个部门。我将 depId 作为 Employee 表中的外键。下面是实体与 setter 和 getter 的样子，

```
@Entity
public class Employee {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long empId;
    private String name;

    @ManyToOne
    @JoinColumn(name = "deptId")
    private Department dept;

    public Long getEmpId() {
        return empId;
    }
}

@Entity
public class Department {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long deptId;
    private String name;

    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY)
    @JoinColumn(name = "deptId")
    @IndexColumn(name = "idx")
    private Set<Employee> listEmp;
} 
```

之前的部门有属性 mappedBy，现在两个实体都有 joinColumn 两个实体都是关系的所有者，对吧？

我的疑问是当我首先创建部门然后创建一组员工并设置我创建的部门并保存部门对象时它工作正常。但是后来我只是尝试创建一个部门并创建一个员工并将该部门设置在那里并保存它给我的员工对象下面的异常。

> Hibernate：插入员工（deptId，name）值（？，？）线程“main”中的异常org.hibernate.TransientObjectException：对象引用未保存的瞬态实例 - 在刷新之前保存瞬态实例：hello.domain.Department

它不应该双向工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T16:19:22.850

> 之前的部门有属性 mappedBy，现在两个实体都有 joinColumn 两个实体都是关系的所有者，对吧？

不对。现在，您有两个不同的单向关联，而不是 OneToMany 双向关联，Hibernate 尝试使用同一列进行映射，从而导致不可预测的行为。

您应该使用`mappedBy`一方面的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T16:22:54.293

来自[http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/)：

> 2.2.5.3.1.1。双向
> 
> 由于多对一（几乎）始终是 JPA 规范中双向关系的所有者，因此一对多关联由 @OneToMany(mappedBy=...)

后面是一个例子，后面是：

> 部队通过部队属性与士兵具有双向的一对多关系。您不必（不得）在 mappedBy 端定义任何物理映射。
> 
> 要将双向一对多映射，将一对多作为拥有方，您必须删除 mappedBy 元素并将多对一 @JoinColumn 设置为可插入且可更新为 false。

请注意，始终只有一个“拥有”方。

# compiler-errors - SBCL 错误消息：有什么改进的方法吗？

> ID：14012496
> 
> 赞同：7
> 
> 时间：2012-12-23T16:13:27.033
> 
> 标签：compiler-errors, common-lisp, sbcl

我用 Common Lisp 开发已经快一年了，这真的开始让我感到不安。我开始使用 CLISP 编写 CL，但后来为了速度我切换到 SBCL。我做了很多相当低级的事情，所以我需要与很多 C 代码交互。我真的很喜欢 CL 的增量开发方面（但是我不使用 Emacs - 我在 Vim 中运行 SLIMV），但我发现自己的开发速度比在 Python、Perl、C 甚至 NASM 中的开发速度要慢。问题的根源在于 SBCL 的错误消息。我曾经被迫搜索近 500 行代码，因为 SBCL 决定给我一个`ERROR: Invalid number of arguments on foreign function #< some memory address >`. 没有指定调用什么函数，没有行号，什么都没有。最近，我很高兴得到`The loaded code expects an incompatible layout for class SB-PRETTY:PRETTY-STREAM.`随机。该代码在 CLISP 上运行良好，但在 SBCL 上出现模糊错误而失败。有什么方法可以使这些消息更具信息性吗？我写 C 和汇编已经快 6 年了，甚至他们会给你一个行号。我见过的唯一合理的 SBCL 错误是阅读器错误，它们几乎没有用，因为它们通常等于缺少括号。同样，是否有任何声明/命令行开关可用于更改此设置？在这一点上，我什至可以编写自己的错误打印机。

编辑：一个例子，`(sb-ext:restrict-compiler-policy 'debug 3)`在我的 ~/.sbclrc 中（使用 --load 而不是 --script 所以 .sbclrc 被加载）

```
debugger invoked on a SB-INT:SIMPLE-PROGRAM-ERROR in thread
#<THREAD "main thread" RUNNING {AB09931}>:
  invalid number of arguments: 0

Type HELP for debugger help, or (SB-EXT:EXIT) to exit from SBCL.

restarts (invokable by number or by possibly-abbreviated name):
  0: [ABORT] Exit debugger, returning to top level.

(SB-KERNEL::INVALID-ARG-COUNT-ERROR-HANDLER
 #<unavailable argument>
 #.(SB-SYS:INT-SAP #XB78CDAE0)
 #<SB-ALIEN-INTERNALS:ALIEN-VALUE :SAP #XB78CD7DC :TYPE (*
                                                         (STRUCT
                                                          SB-VM::OS-CONTEXT-T-STRUCT))>
 (79))
0] print
(SB-KERNEL::INVALID-ARG-COUNT-ERROR-HANDLER
    #<unavailable argument>
    #.(SB-SYS:INT-SAP #XB78CDAE0)
    #<SB-ALIEN-INTERNALS:ALIEN-VALUE :SAP #XB78CD7DC :TYPE (*
                                                            (STRUCT
                                                             SB-VM::OS-CONTEXT-T-STRUCT))>
    (79))
0] down
(SB-KERNEL:INTERNAL-ERROR
    #.(SB-SYS:INT-SAP #XB78CD7DC)
    #<unavailable argument>)
1] down
("foreign function: #x805FCBB")
2] down

Bottom of stack. 
```

不完全提供信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T18:49:51.243

我想你正在寻找：`(sb-ext:restrict-compiler-policy 'debug 3)`

您可以将它放入您`~/.sbclrc`的 REPL 或 REPL 中，SBCL 的调试器（尤其是在 SLIME 中）将产生更有用的结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-23T13:54:07.097

这是“自定义”构建脚本的发行版的常见问题；Arch Linux 是一个常犯。从 sbcl.org 安装二进制文件是最可靠的方法。如果一个人想要最新最好的，那么从源代码构建是相当容易的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-23T20:19:11.880

我最近学到的另一件事，这*可能*对您的情况有用：

1.  确保以足够的调试级别编译所有内容。
2.  将您怀疑的代码包装成`(step ...)`表格。从那里您可以跟踪重新启动，您会发现它与 GDB 和其他步进调试器非常相似（您可以从那里步进、步进、步进和步进计数）。如果你完全不知道它来自哪里，那么获得你需要的函数可能有点乏味，但如果你将它用作一种方法，并测试更小的代码片段，它会有所帮助。

更多信息：[http ://www.sbcl.org/manual/#Single-Stepping](http://www.sbcl.org/manual/#Single-Stepping)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-09-23T02:33:46.340

我迟到了将近 7 年，但我会添加一些有用的建议。在厌倦了看到粘液中的错误并且只知道它们在什么函数中，但没有行号或任何东西之后，我发现了这个堆栈溢出问题。这并没有太大帮助，所以我终于阅读了粘液手册。[https://common-lisp.net/project/slime/#documentation](https://common-lisp.net/project/slime/#documentation)

不确定它是否会对原始海报有所帮助，但是当弹出错误并且您在 slime 调试器中时，点击“v”（在 emacs 中，不确定 vim）将向您显示引发错误的源代码. 您还可以向下浏览到堆栈跟踪中的其他条目并点击“v”。

在调试部分的粘液手册中还有其他有用的提示。能够在错误起源的同一堆栈帧中评估表达式真的很好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-23T18:45:39.353

如果您遇到运行时错误（我怀疑`invalid number of arguments`属于该类别），您应该进入调试器（除非您已明确禁用它）并且回溯可能会向您显示调用的确切位置.

`loaded code expects a different layout...`表示您正在查看两段编译后的代码，在不同的时间点编译，或者代码过于深入地挂钩到内部。首先，强制重新编译所有代码并查看警告是否消失。

# android - Android 服务可以提供两个接口进行通信吗？

> ID：14012499
> 
> 赞同：9
> 
> 时间：2012-12-23T16:13:49.297
> 
> 标签：android, android-service, messenger, aidl, android-binder

我有一个通过 AIDL 与其他服务通信的服务。我希望该服务受我应用程序中的活动的约束。服务可以定义两个活页夹\接口吗？我已经尝试过使用信使与活动进行通信，覆盖“onBind”方法，以便它根据它获得的意图返回不同的绑定器（一个用于其他服务，一个用于活动）。

但是，当活动（使用相同的活页夹）与服务解除绑定时，我有一个错误“myService has leaked ServiceConnection ... that was original bound here”，我认为这是关于服务用来与另一个通信的活页夹服务。
如果一个服务不能使用两个接口，我该如何实现活动和该服务之间的通信？

谢谢你，-Liron

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-04-12T09:52:41.880

如果通过

> “覆盖“onBind”方法，使其根据获得的意图返回不同的活页夹“

你的意思是，你为你的 Intent 设置了一个额外的东西，表明该做什么是行不通的。根据文档`onBind(Intent)`：

> Intent：用于绑定到此服务的 Intent，与 Context.bindService 相同。请注意，此时 Intent 中包含的任何附加内容都不会在此处显示。

尝试为您的意图提供自定义操作并检查是否有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T01:27:18.210

AIDL 和 Messenger 用于 IPC 与其他应用程序/进程。来自[Android API 指南](http://developer.android.com/guide/components/aidl.html)：

> **注意**：仅当您允许来自不同应用程序的客户端访问您的 IPC 服务并希望在您的服务中处理多线程时，才需要使用 AIDL。如果您不需要跨不同应用程序执行并发 IPC，您应该通过实现 Binder 创建接口，或者，如果您想要执行 IPC，但不需要处理多线程，则使用 Messenger 实现您的接口。无论如何，请确保在实施 AIDL 之前了解绑定服务。

如果你的activity和service在同一个进程中，你只需要扩展Binder。

> **扩展 Binder 类**
> 
> 如果您的服务是您自己的应用程序私有的并且在与客户端相同的进程中运行（这很常见），您应该通过扩展 Binder 类并从 onBind() 返回它的实例来创建接口。客户端收到 Binder 并可以使用它直接访问 Binder 实现甚至服务中可用的公共方法。当您的服务只是您自己的应用程序的后台工作者时，这是首选技术。您不会以这种方式创建界面的唯一原因是因为您的服务被其他应用程序或跨单独进程使用。

此关于绑定服务生命周期的图形可能有助于您如何绑定/解除绑定（[http://developer.android.com/guide/components/bound-services.html#Lifecycle](http://developer.android.com/guide/components/bound-services.html#Lifecycle)）：

![在此处输入图像描述](../Images/1d5408e250e7f23da97c027bd85b09d1.png)

# google-maps - 将信息窗口添加到线路 [google map]

> ID：14012503
> 
> 赞同：0
> 
> 时间：2012-12-23T16:14:04.880
> 
> 标签：google-maps, google-maps-api-3

这是我的代码。它将我的坐标显示为线。我想在这一行添加信息窗口。当我点击这一行时，它会显示我想要的任何信息。

PS对不起我的英语:(

```
flightPlanCoordinates = [
                 new google.maps.LatLng(40.9921196514,47.8604733650 ),
                 new google.maps.LatLng(40.9922511293,47.8606186245 ),
                 new google.maps.LatLng(40.9926358563,47.8611079146 ),
                 new google.maps.LatLng(40.9929381070,47.8615028229 ),
                 new google.maps.LatLng( 40.9931715315,47.8620863814 ),
                 new google.maps.LatLng( 40.9933869955,47.8623375976 ),
                 new google.maps.LatLng(40.9936024589,47.8625888155 ),
                 new google.maps.LatLng(40.9942600516, 47.8634730879 ),
                 new google.maps.LatLng(40.9946698905, 47.8639284456),
                 new google.maps.LatLng(40.9951427577,47.8643998201 ),
                 new google.maps.LatLng(40.9956477404 ,47.8648835770),
                 new google.maps.LatLng(40.9959645185, 47.8651699964),
                 new google.maps.LatLng( 40.9962812958, 47.8654564186 ),
                 new google.maps.LatLng( 40.9965401588,47.8657069220 ),
                 new google.maps.LatLng( 40.9970324883 ,47.8661781983),
                 new google.maps.LatLng(40.9972659548, 47.8663989707 ),
                 new google.maps.LatLng(40.9975468767, 47.8664409273),
                 new google.maps.LatLng( 40.9978740427,47.8662277913 ),
                new google.maps.LatLng( 40.9982012084,47.8660150777 ),
                    new google.maps.LatLng( 40.9985497469,47.8658461824),
 new google.maps.LatLng(40.9988327045,47.8660951747),
  new google.maps.LatLng(40.9991045183,47.8664072712),              
   new google.maps.LatLng(40.9992585926,47.8665868156),                 

        ];
        var flightPath = new google.maps.Polyline({
          path: flightPlanCoordinates,
          strokeColor: '#FF0000',
          strokeOpacity: 1.0,
          strokeWeight: 2
        });

        flightPath.setMap(map); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T18:48:57.110

您需要向打开[信息窗口](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)并显示内容的折线添加[“点击”侦听器。](https://developers.google.com/maps/documentation/javascript/reference#MapsEventListener)像这样的东西（未经测试）：

```
 var infowindow = new google.maps.InfoWindow();
  var contentString ="content for infowindow";
  google.maps.event.addListener(flightPlan,'click', function(event) {
    infowindow.setContent(contentString);
    infowindow.setPosition(event.latLng);
    infowindow.open(map);
  }); 
```

[例子](http://www.geocodezip.com/v3_GenericMapBrowser.asp?filename=I5Polyline.xml)

# php - PHP 参数 Facebook 对话框

> ID：14012506
> 
> 赞同：1
> 
> 时间：2012-12-23T16:14:26.263
> 
> 标签：php, facebook

我创建了一个非常简单的脚本来从 url 中提取一些参数，使用： $_SERVER['QUERY_STRING'];

我有一些像这个链接这样的价值观：

[http://test.com/r.php?gsgsg&0&1&0&sfs](http://test.com/r.php?gsgsg&0&1&0&sfs)

这些值为 gsgsg 0 1 0 sfs。

当我在自己的浏览器上使用链接时，一切都很好。

但是当我按下 Facebook 帖子上的链接时。我只会得到：

gsgs 0 sfs

好像 facebook 删除了我的号码。

我尝试打印出用于在我的应用程序中发布消息的 url，所有值都在那里。但是当我进入 Facebook 应用程序并按下链接时，我缺少 2 个 int 值。

有人有提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T16:25:43.927

像这样的查询字符串：

```
gsgsg&0&1&0&sfs 
```

被解释为：

```
gsgsg=&0=&1=&0=&sfs= 
```

只是从那你已经可以想象第一个的价值`0`被下一个破坏了。Facebook 为何遗漏`1`值尚不清楚，但将变量命名规则应用于查询字符串参数是常识。

我不确定您要做什么，但这会更可靠：

```
s[]=gsgsg&s[]=0&s[]=1&s[]=0&s[]=sfs 
```

它生成一个数组`$_GET['s']`：

```
Array(
        [0] => gsgsg
        [1] => 0
        [2] => 1
        [3] => 0
        [4] => sfs
    ) 
```

# workflow-services - 不支持麻烦的操作 ...WCF 测试客户端 ...{Receive OperationName}Response

> ID：14012518
> 
> 赞同：1
> 
> 时间：2012-12-23T16:16:19.020
> 
> 标签：workflow-services

早上好，

我正在努力克服年终最后期限并遇到屏幕截图中的错误。我已经多次通过我的WF服务无济于事。我认为有意义但无法建立联系的一件事是如何将 Response 添加到 Receive OperationName 的末尾。

![在此处输入图像描述](../Images/6bf3f82311b135d5cd93d28a0fed7ff2.png)

如上所述，请注意错误如何将 Response 添加到 OperationName 的末尾。这似乎很重要，但我不知道为什么。

![在此处输入图像描述](../Images/2fc6c63b1a36118d8b2614b79bcb4a70.png)

还要注意 Receive 和 SendReplyToReceive 的 Content 消息的消息类型为 null。（我同意它被推断的事实）。

RequestDataContract 的代码

```
[DataContract]
public class LiftDataExchangeRequest
{

    //pretty simple we only have one thing we want from the client in request
    [DataMember]
    public String UserName{ get; set; }
    [DataMember]
    public String Password{ get; set; }
    [DataMember]
    public ExchangeEnumerations Action { get; set; }

} 
```

响应代码：

```
public class LiftDataExchangeResponse
{
    public XmlDocument WorkoutData { get; set; }
} 
```

我很乐意发布任何其他需要帮助追踪这一点的东西，我将非常感谢任何额外的信息或阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T17:11:21.933

您看到的错误是您正在使用的可视化工具（WCF 测试客户端）的限制，它并非旨在处理所有可能的服务 - 有些类型会阻止它工作。但是，您的实际服务没有任何问题。

# javascript - 使用“getElementById”检索多个元素？

> ID：14012519
> 
> 赞同：0
> 
> 时间：2012-12-23T16:16:22.397
> 
> 标签：javascript, jquery, javascript-events

我已经尝试使用[这些](https://stackoverflow.com/questions/10709537/multiple-id-in-getelementbyid)[问题中提到](https://stackoverflow.com/questions/3607291/javascript-and-getelementbyid-for-multiple-elements-with-the-same-id)[的](https://stackoverflow.com/questions/7304497/javascript-multiple-getelementbyids-in-one-call) 技术，但我没有任何运气。我正在尝试调整 Javascript 函数以使用该方法检索多个 div。 `getElementById`

这是检索 div 的函数中的当前代码行`#cat1`：

```
 var elem = document.getElementById(cat1); 
```

展望未来，我需要这个函数来检索 div `#cat2`。

如果有更好的方法可以使用他们的库来完成这个，那么可以加载 jQuery 吗？

* * *

这是完整的功能（*参考第 3 行*）：

```
function getCategories(initial) {
  var i;
  var elem = document.getElementById('cat1');
  if (initial == 1) {
  jsonGroups = "";
  jsonGroups = '{ xml: [], "pin": [] ';
  for (i = 0; i < elem.childNodes.length; i++) {
    if (elem.childNodes[i].nodeName == "LI") {
      jsonGroups = jsonGroups + ',  "' + elem.childNodes[i].attributes.getNamedItem("id").value + '": [] ';
    }
  }
  jsonGroups = jsonGroups + "}";
  markerGroups = eval('(' + jsonGroups + ')');

for (i = 0; i < elem.childNodes.length; i++) {
      if (elem.childNodes[i].nodeName == "LI") {
        var elemID = elem.childNodes[i].attributes.getNamedItem("id").value;
        if (elemID != "user") {
          elem.childNodes[i].innerHTML = "<a onclick='" + 'toggleGroup("' + elemID + '")' + "'>" + elem.childNodes[i].innerHTML + "</a>";
        } else {
          elem.childNodes[i].innerHTML = '<form id="userPOIForm" action="#" onsubmit="userPOIFind(this.userPOI.value); return false"><input id="userPOITxt" size="20" name="userPOI" value="' + elem.childNodes[i].innerHTML + '" type="text"><input id="userPOIButton" value="Go" type="submit"> </form>';

        }
        if (hasClass(elem.childNodes[i], "hidden") !== null) {
          elem.childNodes[i].setAttribute("caption", "hidden");
        } else {
          elem.childNodes[i].setAttribute("caption", "");
        }
        if (elem.childNodes[i].attributes.getNamedItem("caption").value != "hidden") {
          classAdder = document.getElementById(elemID);
          addClass(classAdder, "visibleLayer");
        }
      }
    }
  }
  for (i = 0; i < elem.childNodes.length; i++) {
    if (elem.childNodes[i].nodeName == "LI") {
        var catType = elem.childNodes[i].attributes.getNamedItem("id").value;

      result = doSearch(elem.childNodes[i].attributes.getNamedItem("title").value, elem.childNodes[i].attributes.getNamedItem("id").value);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T16:23:39.343

如果您尝试选择以`id`开头的所有元素`cat`，您可以在 jQuery 中执行此操作，如下所示：

```
$("[id^=cat]") 
```

[jQuery：属性以选择器开头](http://api.jquery.com/attribute-starts-with-selector/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T16:19:10.193

只需将`categoriesList`其设为另一个参数，然后调用该函数两次。

# jquery - 带有 MVC 4 的 jQuery UI

> ID：14012521
> 
> 赞同：0
> 
> 时间：2012-12-23T16:16:29.763
> 
> 标签：jquery, asp.net-mvc, jquery-ui

我有 ASP.Net MVC 4 Internet 应用程序，我正在使用 'redmond' jQuery UI。我尝试了 [http://jqueryuihelpers.apphb.com/Docmo/GettingStarted建议的所有步骤](http://jqueryuihelpers.apphb.com/Docmo/GettingStarted)

仍然只有，对话框和框架图标在 UI 主题中可见，所有其他控件都在正常主题中。

我将 redmond 文件夹复制到 ~/Content/themes 文件夹中。复制 ~/scripts 文件夹中的 .js 文件。

在 BundleConfig.cs 中添加了以下捆绑包，

```
bundles.add(new stylebundle("~/content/themes/base/css").include(
    "~/content/themes/redmond/jquery-ui-1.9.2.custom.css",
    "~/content/themes/redmond/jquery-ui-1.9.2.custom.min.css")); 
```

在 MVC 4 应用程序的 Site.Master 中添加了以下参考，

```
<link href="<%: Url.Content("~/Content/themes/redmond/jquery-ui-1.9.2.custom.css") %>" type="text/css" rel="stylesheet" /> 
```

我尝试在 Razor 视图引擎和 ASPX (C#) 视图引擎中使用 jQuery UI，两者都只显示 jQuery UI 主题中的对话框和框架图标，所有其他控件（如按钮和手风琴等）不在 jQuery UI 主题中。

任何猜测，可能发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T16:41:08.813

将以下脚本添加到头部而不是正文

```
@Scripts.Render("~/bundles/jquery") 

@Scripts.Render("~/bundles/jqueryui") 
```

# c# - 这是一种不好的加密做法吗？

> ID：14012522
> 
> 赞同：1
> 
> 时间：2012-12-23T16:16:35.013
> 
> 标签：c#, security, authentication, encryption, cryptography

所以我正在尝试加密我的文件和身份验证密码。我目前正在使用 (A)Password Derived Byte[]、(B)Clear Byte[] 和强 (C) 字符串对其进行加密。

在我的程序中，我在其中硬编码了 (A)Password Derived。我还对 Clear Byte[] 的 (B)Encrypted 版本和 string 的 (C)Encrypted 版本进行了硬编码。

要解密我的文件/密码，我必须： 1\. 使用 (A)Password Byte 解密 (B)Clear Byte[] 的加密版本。2\. 使用 (A)Password Byte 解密 (C)String 的加密版本。3\. 使用 (B) 清除字节，(C) 清除字符串来解密文件/密码。

如果这不是一个好习惯，有人可以提供我应该使用的建议/方法吗？我正在用 c# 开发它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T16:02:35.223

If you want something that only your program can read then you should use DPAPI. In C# This is wrapped up in the [ProtectedData](http://msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata.aspx) class.

Your code is not safe, the code could easily be reverse engineered and decrypted. Using DPAPI means that only your user can access the data you protect in your application.

You use the `protecteddata` class like this:

```
ProtectedData.Protect( data, s_aditionalEntropy, DataProtectionScope.CurrentUser ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T05:02:48.907

我决定采用上面提到的我自己的方法，因为没有人能够发布我可以使用的答案。

# liferay - Liferay 5.2.3 portlet 配置页面问题

> ID：14012523
> 
> 赞同：0
> 
> 时间：2012-12-23T16:16:45.387
> 
> 标签：liferay

我编写了一个具有自定义 conf 页面的 portlet，这里是 configuration-action-class：

```
public class ConfigurationActionImpl implements ConfigurationAction {

private static Logger log = Logger.getLogger(ConfigurationActionImpl.class);
private config conf=config.getInstance(); 
public String render(PortletConfig config, RenderRequest renderRequest, RenderResponse renderResponse) throws Exception {

    if(renderRequest.isUserInRole("administrator")){
        log.info("UserRole:::admin");
        return "/config.jsp";
    }else if(renderRequest.isUserInRole("guest")){
        log.info("UserRole:::guest");
    }else if(renderRequest.isUserInRole("power-user")){
        log.info("UserRole:::power-user");
        return "/config.jsp";
    }else if(renderRequest.isUserInRole("user")){
        log.info("UserRole:::user");
    }else{
        log.info("UserRole:::dafug");
    }
    return "/config.jsp?mode=guest";
}

public void processAction(PortletConfig config, ActionRequest actionRequest, ActionResponse actionResponse) throws Exception { 

    conf.Names.clear();
    String count = ParamUtil.getString(actionRequest, "count");
    String portletResource = ParamUtil.getString(actionRequest, "portletResource"); 
    PortletPreferences prefs = PortletPreferencesFactoryUtil.getPortletSetup(actionRequest, portletResource);
    String[] list=count.split("/");
    for(String a : list){
        if( a!=null&& !a.equals("")){
            String en = ParamUtil.getString(actionRequest,"En"+a);
            String pa = ParamUtil.getString(actionRequest,"Pa"+a);
            if(!en.equals("")&&!pa.equals("")){
                conf.Names.put(pa,en);
                log.info("word::"+en+"::::"+pa);
                prefs.setValue("En"+a,en);
                prefs.setValue("Pa"+a,pa);
            }else if(a!=null&& !a.equals("")){
                count=count.substring(0,count.lastIndexOf("/"+a))+count.substring(count.lastIndexOf("/"+a)+("/"+a).length());
            }

        }
    }
    prefs.setValue("count",count);
    prefs.store();
}
public void serveResource(ResourceRequest request, ResourceResponse response){
    log.info("HERE in conf");
}
} 
```

这个类在点击return to full page后只运行了一次，位于portlet右上角的按钮不起作用，我无法再次进入配置页面！并且从配置页面返回后，门户右上角的菜单栏也不起作用，除非我删除我的 portlet 并且它们都将再次正常工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:18:21.743

我解决了这个问题。我的问题是，首先我应该将所有内容更改为，然后将所有 JQuery 代码更改为 JavaScript，因为我使用的这些 JQuery 版本如何在此版本的 Liferay (5.2.3) 中产生一些错误

# java - Is it possible to create a collections with Spring configuration?

> ID：14012524
> 
> 赞同：1
> 
> 时间：2012-12-23T16:16:52.037
> 
> 标签：java, spring, collections, inversion-of-control

Suppose I have a class `MyClass` which can be instantiated either with `String` or it have predefined static instances inside a class.

Something like this:

```
public class MyClass {

   public final static MyClass A = new MyClass("A");
   public final static MyClass B = new MyClass("B");
   public final static MyClass C = new MyClass("C");
   ...

   public MyClass(String name) {
      ...
   }
} 
```

Is it possible to create an `ArrayList<MyClass>` bean in Spring config somehow? Something like

```
<bean id="sequence" class="...ArrayList"> 
    <member class="...MyClass" value="A"/>
    <member ... />
    ....
</bean> 
```

**UPDATE 1**

Is it possible to write following way:

```
<bean id="sequence" class="...ArrayList"> 
  <constructor-arg>
     <list>
         <bean class="...MyClass" constructor-arg="A"/>
         <bean class="...MyClass" constructor-arg="B"/>
         <bean class="...MyClass" constructor-arg="C"/>
     </list>
  </constructor-arg>
</bean> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T16:27:39.050

You should have a look at the [Collections](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-collection-elements) section in the spring IOC documentation.

```
<bean id="moreComplexObject" class="example.ComplexObject">
  <property name="someList">
    <list>
      <value>a list element followed by a reference</value>
      <ref bean="myDataSource" />
    </list>
  </property>    
</bean> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T16:20:55.180

Yes. You can even create it as a standalone bean. See [this thread](http://forum.springsource.org/showthread.php?10144-Does-the-XML-config-support-List-as-a-standalone-element) for two examples.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-23T16:28:45.213

You could do:

```
<bean id="myClassA" class="org.foo.MyClass"> 
   <constructor-arg>
     <bean class="java.lang.String">
       <constructor-arg value="A"/>
     </bean>   
   <constructor-arg>
</bean>

<bean id="sequence" class="java.util.ArrayList">
    <constructor-arg>
        <list>
            <ref bean="myClassA" />
            ...
        </list>
    </constructor-arg>
</bean> 
```

Note, however, that the most common approach is to inject a list directly into a bean rather than wrapping a list within a list first.

# javascript - F单击嵌套项不起作用

> ID：14012525
> 
> 赞同：-3
> 
> 时间：2012-12-23T16:16:51.640
> 
> 标签：javascript, jquery, html, click

我有这个html：

```
<div class="task" id="1">
   Item1
</div>
<div class="task" id="2">
   Item2
</div>
<div class="task" id="3">
   Item3
</div> 
```

和 JavaScript 加载子项。如果我点击静态项目，它正在工作。但是如果我点击加载的子项目，他们的子项目不会加载。

我创建了测试页面来显示这一点：http: [//helloworld.dimkos.ru/](http://helloworld.dimkos.ru/)

这段代码：

```
$(document).ready(function() {
$('.task').on('click', function(e){
    e.stopPropagation();
    var id = $(this).prop('id');
    var task = $(this);
    $.ajax({
        url: "./sub.php?sub=" + id,
        success: function(html) {
            $(task).append(html);
        }
    });
    return false;
});}); 
```

./sub.php?sub=1 append subitems which parent has id 点击动态添加的子项不起作用。

用 $('.task').live("click", function(e) 解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T16:41:52.237

像这样修改你的代码并再次测试它：

```
$('.task').click(function(e){
    e.stopPropagation();
    var id = $(this).prop('id');
    alert(id);
});​ 
```

看看第一种和第二种情况是否有效，[**FIDDLE**](http://jsfiddle.net/BpRWT/) :)

# c# - 面向 Framework 4.0 的应用程序适用于 Framework 2.0？

> ID：14012528
> 
> 赞同：0
> 
> 时间：2012-12-23T16:17:00.953
> 
> 标签：c#, .net

如果用户的 PC 上只安装了 Framework 2.0，Framework 4.0 能用吗？

我在另一台笔记本电脑上安装了 Windows 7，并尝试运行基于 C# 构建的应用程序，但没有成功。我发现我的应用程序是针对 Framework 4 的。

![我的情况](../Images/50fc9f0d5c8f9b18f9816bc2721f87a0.png)

当我在那台笔记本电脑上运行这个应用程序时，它没有工作。我想知道为什么，我认为该框架已经安装了 Windows。它要么具有旧的框架版本（如 2.0 ），要么没有安装任何框架。

我应该将目标更改为 Framework 2.0 以使其正常工作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T16:17:55.097

> 如果用户的 PC 上只安装了 Framework 2.0，Framework 4.0 能用吗？

如果用户只安装了 .NET 2.0 并且您尝试运行针对 .NET 4.0 编译的应用程序，它将无法工作。

另一方面，如果用户安装了 .NET 4.0 并且您尝试运行针对 .NET 2.0 编译的应用程序，这将起作用。

我不知道有任何向前兼容的框架。仅向后兼容。说得通？

> 我应该将目标更改为 Framework 2.0 以使其正常工作吗？

是的，如果您想在仅安装了 .NET 2.0 的计算机上运行您的应用程序。

# javascript - 横向内容

> ID：14012529
> 
> 赞同：-2
> 
> 时间：2012-12-23T16:17:01.307
> 
> 标签：javascript, html, css

我的问题是如何使动态内容水平显示。这意味着没有垂直滚动，只有水平滚动。我已经尝试过`-webkit-column-count`，但它只创建 X 列，而不是水平滚动。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T16:34:10.783

类似这个演示的东西（仅 HTML 添加 CSS）

**演示：http:** [//jsfiddle.net/enve/ea88y/](http://jsfiddle.net/enve/ea88y/)

[来自：http: //www.visibilityinherit.com/code/horizo](http://www.visibilityinherit.com/code/horizontal-website.php) ​​ntal- website.php

**HTML**

```
<ul>
<li><a href="#one">ONE</a></li>
<li><a href="#two">TWO</a></li>
<li><a href="#three">THREE</a></li>
<li><a href="#four">FOUR</a></li>
<li><a href="#five">FIVE</a></li>
</ul>

<div id="wrap">
<div id="one"><p>ONE</p></div>
<div id="two"><p>TWO</p></div>
<div id="three"><p>THREE</p></div>
<div id="four"><p>FOUR</p></div>
<div id="five"><p>FIVE</p></div>
</div>

</body>
</html>​ 
```

**CSS**

```
 * {
margin:0;
padding:0;
}
html {
height:100%;
overflow-x:scroll;
}
body {
height:100%;
}
#wrap {
min-height:100%;
width:500%;
overflow:hidden;
}
#one, #two, #three, #four, #five {
width:20%;
float:left;
}
ul {
position:fixed;
width:100%;
height:40px;
line-height:40px;
text-align:center;
background:#ccc;
}
li {
display:inline;
margin:0 50px;
}
p {
margin:50px;
text-align:center;
}
* html ul {position:absolute;left:expression(0+((e=document.documentElement.scrollLeft)?e:document.body.scrollLeft)+'px');} 
* html {background:url(fake.jpg)}
* html #full {height:100%;}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T16:25:29.983

您可以使用 CSS

```
white-space: nowrap; 
```

但是你必须小心在你想要的地方放置换行符，否则你最终会得到一个非常长的文本行。[http://jsfiddle.net/Nbkj2/1/](http://jsfiddle.net/Nbkj2/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T16:27:28.630

这是一个非常开放的问题，因为我确信有很多方法可以回答这个问题，但也许这会为您指明一个有用的方向：[http ://www.sitepoint.com/side-scrolling-site-带有 css 和 jquery 的布局/](http://www.sitepoint.com/side-scrolling-site-layout-with-css-and-jquery/)

总结这篇文章，你将你的内容分成一系列全屏页面。每个页面都是一个带有 CSS 的 div，占据整个屏幕，具有高度/宽度属性，`float:left;`并使它们全部横向堆叠。为了防止页面换行，您使文档正文与您制作的所有页面一样宽：`body { width:10000px; }`

然后作者将一些 javascript 处理程序放在链接上，以将页面横向滚动到每个内容面板。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T16:28:06.423

取决于什么元素以及水平的含义。这是我认为你的意思的两个例子。

```
div { 
    Width:20%;
    Display:inline-block; //won't work for ie 8 and below
}
body {
    width: 150%;
} 
```

# python - 使用修饰键在 pyqt4 中拖放

> ID：14012533
> 
> 赞同：3
> 
> 时间：2012-12-23T16:17:37.450
> 
> 标签：python, qt, qt4, pyqt, pyqt4

考虑以下最小示例。当在 drop 事件期间按下修饰键时，我该如何修改它，它会执行其他操作，如下面代码中的注释所示。假设您将一个文件从 nautilus 或类似的东西放到我的示例中。

```
#!/usr/bin/python
# -*- coding: utf-8 -*- 

import sys
from PyQt4.QtGui import *
from PyQt4.QtCore import *

class MyDropLabel(QLabel):
    myDroppedSignal = pyqtSignal(str)    
    myDroppedSignalModified = pyqtSignal()    

    def __init__(self,text):
        super(MyDropLabel, self).__init__(text)
        self.setAcceptDrops(True)

    def dragMoveEvent(self, e):
        e.accept()

    def dragEnterEvent(self, e):
        e.accept()

    def dropEvent(self, e):
        if e.mimeData().hasUrls():
            s = e.mimeData().urls()[0].path()
            self.myDroppedSignal.emit(s)
        e.accept()

##if a modifier key, for example shift or ctrl was pressed to something else and emit myDroppedSignalModified

class MyWidget(QWidget):

    def __init__(self, parent=None):
         QWidget.__init__(self, parent)
         self.hlayout = QHBoxLayout()
         self.setLayout(self.hlayout)
         self.label = MyDropLabel("Drop something here")
         self.hlayout.addWidget(self.label)
         #self.setCentralWidget(self.label)

         self.label.myDroppedSignal.connect(self.myDroppedHandler)

    def myDroppedHandler(self,s):
        self.label.setText(QString(s))

if __name__ == "__main__":
    app = QApplication(sys.argv)
    da = MyWidget()
    da.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:10:07.427

例如，您可以设置一个`self.keyIsPressed`状态`installEventFilter( QObject * filterObj )`来过滤`QEvent.KeyPress`您定义的状态。

这是一个使用示例`QApplication.keyboardModifiers`：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

import os

import sip
sip.setapi('QString', 2)
sip.setapi('QVariant', 2)

from PyQt4.QtCore import *
from PyQt4.QtGui import *

class droppableLabel(QLabel):
    fileDropped = pyqtSignal(list)

    def __init__(self, type, parent=None):
        super(droppableLabel, self).__init__(parent)
        self.setAcceptDrops(True)

    def dragEnterEvent(self, event):
        if event.mimeData().hasUrls:
            event.accept()

        else:
            event.ignore()

    def dragMoveEvent(self, event):
        if event.mimeData().hasUrls:
            event.setDropAction(Qt.CopyAction)
            event.accept()

        else:
            event.ignore()

    def dropEvent(self, event):
        if event.mimeData().hasUrls:
            event.setDropAction(Qt.CopyAction)
            event.accept()
            links = []
            for url in event.mimeData().urls():
                links.append(str(url.toLocalFile()))

            self.fileDropped.emit(links)

        else:
            event.ignore()

class droppableWidget(QWidget):
    def __init__(self, parent=None):
        super(droppableWidget, self).__init__(parent)

        self.label = droppableLabel(self)
        self.label.fileDropped.connect(self.on_label_fileDropped)
        self.label.setText("Press CTRL/SHIFT/None and drop some files here")
        self.label.setMinimumSize(QSize(40, 100))

        self.verticalLayout = QVBoxLayout(self)
        self.verticalLayout.addWidget(self.label)
        self.verticalLayout.setMargin(0)

    @pyqtSlot(list)
    def on_label_fileDropped(self, fileNames):
        droppedFiles = [    fileName
                            for fileName in fileNames
                            if os.path.exists(fileName)
                            ]

        if droppedFiles:
            keyModifiers = QApplication.keyboardModifiers()
            if keyModifiers == Qt.ShiftModifier:
                print "SHIFT"
                formatter = "\n"                

            elif keyModifiers == Qt.ControlModifier:
                print "CTRL"
                formatter = ","

            else:
                print "NONE"
                formatter = "|"

            self.label.setText(formatter.join(droppedFiles))

if __name__ == "__main__":
    import  sys

    app = QApplication(sys.argv)
    main = droppableWidget()
    main.show()
    sys.exit(app.exec_()) 
```

# iphone - 可以无损访问iOS相机吗？

ID：14012536

赞同：2

时间：2012-12-23T16:18:06.123

标签：iphone, ipad

# jquery - 将变量放入 .load

> ID：14012542
> 
> 赞同：-1
> 
> 时间：2012-12-23T16:19:11.330
> 
> 标签：jquery, variables

我有几个部分，我想使用 jQuery 加载每个部分，当在导航中选择每个部分时，我想隐藏页面中的一些静态元素，隐藏其他部分（如果它们之前已被选择和加载）并显示当前部分，我可以通过为每个导航项编写单击事件并尝试淡出和淡入这些元素来做到这一点，但是我怎样才能在短时间内做到这一点？

假设我有：`#background #elem1 #elem2`
如果单击了我的任何导航链接，我想隐藏这 3 个。

然后我有：`#section1 #section2 #section3 #section4 ...` 它们位于一个名为**content.html**
的文件 中还有一个灯箱，可以说`#light`

因此，假设当用户单击类似的链接时`#nav-section1`，我希望完成以下操作：

淡出：`#background #elem1 #elem2` 淡出：`#section2 #section3 #section4 ...` 淡入：`#light` 淡入：`#section1`

我的导航如下所示：

```
<a class="navigation" id="nav-section1" name section1">Section1</a>
<a class="navigation" id="nav-section2" name section2">Section2</a>
... 
```

jQuery 应该是这样的：（被点击的项目的名称要放在这里`.load`：）`content.html#name`

```
$("a.navigation").click(function(event){
    $("#light").fadeIn("slow");
    $("#light").load("content.html #"+$(this).attr('name')+);
} 
```

我知道这是错误的，它并没有做我想做的所有事情，所以有人可以纠正它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T16:19:39.340

您需要通过删除`+`末尾的来修复语法错误。

```
$("a.navigation").click(function(event) {
    $("#light").fadeIn("slow");
    $("#light").load("content.html #" + $(this).attr('name'));
} 
```

除此之外，您的 HTML 当前无效。它应该如下所示：

```
<a class="navigation" id="nav-section1" name="section1">Section1</a> 
```

但是，`name`用于此并不是很合适。改为使用`data`属性：

```
<a class="navigation" id="nav-section1" data-name="section1">Section1</a> 
```

并像这样更改JS：

```
$("#light").load("content.html #" + $(this).data('name')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T16:20:37.300

您缺少`=`name 属性，您应该将值附在`quotes`.

改变

```
<a class="navigation" id="nav-section1" name section1">Section1</a>
<a class="navigation" id="nav-section2" name section2">Section2</a> 
```

到

```
<a class="navigation" id="nav-section1" name="section1">Section1</a>
<a class="navigation" id="nav-section2" name="section2">Section2</a> 
```

你`+`在末尾有额外的符号`$(this).attr('name')`

改变

```
$("#light").load("content.html #"+$(this).attr('name')+); 
```

到

```
$("#light").load("content.html #"+$(this).attr('name')); 
```

# php - 来自匿名函数的 PHP 访问变量

> ID：14012547
> 
> 赞同：-1
> 
> 时间：2012-12-23T16:20:03.630
> 
> 标签：php, function, scope

> **可能重复：**
> [在创建匿名 PHP 函数期间呈现变量](https://stackoverflow.com/questions/6797482/render-a-variable-during-creation-of-anonymous-php-function)

我对 PHP 还是很陌生，这让我很困扰：

```
class Controller {
    ...
    ...
    function _activateCar() {
        $car_id = $this->data['car']->getId();
        // $car_id == 1
        $active_car = array_filter($this->data['cars'], function($car){
            // $car_id undefined
            return $car->getId() == $car_id;
        });
    }
    ...
    ...
} 
```

为什么array_filter里面的函数不能访问`$car_id`变量？一直说未定义。

除了制作 a 之外，还有其他方法可以`$car_id`访问`$_GET['car_id'] = $car_id;`吗？使用`global`关键字没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T16:22:39.583

您需要添加`use($car_id)`到匿名函数中，如下所示：

```
$active_car = array_filter($this->data['cars'], function($car) use($car_id){
    // $car_id undefined
    return $car->getId() == $car_id;
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-23T16:22:53.857

匿名函数可以使用`use`关键字导入选择变量：

```
$active_car = array_fiter($this->data['cars'],function($car) use ($car_id) {
    return $car->getId() == $car_id;
}); 
```

# jsf - 托管 bean 内的回滚事务

> ID：14012548
> 
> 赞同：3
> 
> 时间：2012-12-23T16:20:09.527
> 
> 标签：jsf, transactions, ejb

我想回滚事务不是在 EJB 内部，而是在 JSF 托管 bean 内部。在 EJB 中我们可以使用`SessionContext.setRollBackOnly()`，但我可以在托管 bean 中使用什么？

```
@Stateless
@Local(AccountLocal.class)
public class AccountBean implements AccountLocal {

   public void test1() throws CustomException(){
      ...
   } 

   public void test2() throws CustomException(){
      ...
      throw new CustomException();
   }   

   public void test3() throws CustomException(){
      ...
   }

   public void all() throws CustomException(){
       test1();
       test2();
       test3();
   } 

} 
```

在我的托管 bean 中：

```
@SessionScoped
public class LoginBean implements Serializable{

   public void test(){

      try{
         accountBean.test1();
         accountBean.test2();
         accountBean.test3();
      }catch(CustomException e){
         // WHAT HERE TO ROLLBACK TRANSACTION ?
      }      
    }    
} 
```

**编辑：**我如何确保如果其中一个或回滚，其他人也会回滚`test1`？`test2``test3`

我测试了这段代码，`accountBean.test1();` 即使`accountBean.test2();`回滚也得到了验证。

解决方案是否只能将这 3 种方法嵌套在一个 EJB 方法中？

```
 @SessionScoped
public class LoginBean implements Serializable{

   public void test(){

      try{
         accountBean.all();
      }catch(CustomException e){
        ...
      }      
    }    
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T16:46:55.807

如果抛出未经检查的异常，则 EJB 容器会自动回滚事务（请注意，JPA`PersistenceException`就是这样一个）。你的`CustomException`似乎是一个检查异常。如果将其更改`RuntimeException`为如下所示

```
public class CustomException extends RuntimeException {
    // ...
} 
```

或者创建一个新的不是一个选项，那么您需要在属性设置为[`@ApplicationException`](http://docs.oracle.com/javaee/6/api/javax/ejb/ApplicationException.html)的类上设置注释。`rollback``true`

例如

```
@ApplicationException(rollback=true)
public class CustomException extends Exception {
    // ...
} 
```

请注意，具体问题与 JSF 无关。服务层和管理事务*完全*不在 JSF 的职责范围内。而是由 EJB 负责。JSF 在这个角度应该仅仅充当“视图”。

### 也可以看看：

*   [JSF 服务层](https://stackoverflow.com/questions/13011392/jsf-service-layer)
*   [在 Java EE 前端方法中处理服务层异常](https://stackoverflow.com/questions/32853167/handling-service-layer-exception-in-java-ee-frontend-method)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T10:18:53.037

我在这里扮演魔鬼的拥护者，因为 BalusC 的建议是你不应该让你的支持 bean 充当服务是绝对正确的。

但是，纯粹作为技术练习，可以在支持 bean 中启动 JTA 事务，然后以编程方式控制启动和提交或回滚。

您可以通过@Resource 注入 UserTransaction 来做到这一点。在调用您的 EJB 方法之前，在此实例上调用 start，在最后一次调用之后提交或回滚。

同样，这是一个**纯粹的理论答案**。在实践中，不要这样做，让支持 bean 调用 1 个 EJB 方法，该方法在需要时调用其他 EJB bean。

# postgresql - 如何在 Ubuntu 12.04 LTS 上安装 Postgresql v9.1 和 JBoss AS v7.1.1

> ID：14012549
> 
> 赞同：4
> 
> 时间：2012-12-23T16:20:11.417
> 
> 标签：postgresql, ubuntu, jboss7.x

确实有很好的资源描述了如何在 Ubuntu 12.04 LTS 上安装 Postgresql 和 JBoss，但信息分布在其他页面上。

但是，最好有一个步行指南来轻松安装和配置这些。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-23T16:20:11.417

## 准备安装

```
sudo apt-get install postgresql postgresql-contrib postgresql-common pgadmin3 openssh-server openssh-client 
```

此命令将安装最新的 Postgresql、PgAdmin3、Postgresql-contrib 和 SSH 服务器包。SSH 服务器不是必需的，但最好远程管理服务器。所以我已经将它添加到安装列表中。[ [1](http://www.cyberciti.biz/faq/ubuntu-linux-openssh-server-installation-and-configuration/) ]

Oracle Java JDK 和 JBoss AS 安装不是自动的。所以我们应该从他们的网站下载它们。我们将使用**jdk-7u10-linux-i586.tar.gz**（或更高版本）和**jboss-as-7.1.1.Final.tar.gz**

JDK见[http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html，JBoss见](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html)[http://www.jboss.org/jbossas/downloads/](http://www.jboss.org/jbossas/downloads/)。

[或尝试 [ 2](http://ivan-site.com/2012/05/download-oracle-java-jre-jdk-using-a-script/) ]下面的命令行链接。（这些链接将来可能会失效，对此感到抱歉......）

```
wget --no-cookies --header "Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com%2F" "http://download.oracle.com/otn-pub/java/jdk/7u10-b18/jdk-7u10-linux-i586.tar.gz"
wget "http://download.jboss.org/jbossas/7.1/jboss-as-7.1.1.Final/jboss-as-7.1.1.Final.tar.gz" 
```

> 请注意，您可能想安装 OpenJDK，它在 apt-get 存储库中可用，并且是 Ubuntu 的首选。不过这是一个偏好，我想使用 Oracle 的 JDK。

**可选：**为 Postgresql 添加额外的语言环境支持：根据我的经验，我需要在 Postgresql 上支持土耳其语语言环境，但默认情况下它没有安装在 Ubuntu 上。以下是将土耳其语排序规则支持添加到 Ubuntu 的示例命令，从而添加到 Postgresql。[ [3](https://askubuntu.com/questions/76013/how-do-i-add-locale-to-ubuntu-server) ]

```
sudo locale-gen tr_TR
sudo locale-gen tr_TR.UTF-8 
```

## 配置 Postgresql

我们已经通过 apt-get 安装了 postgresql。现在最好对配置进行一些更改。[ [4](https://help.ubuntu.com/8.04/serverguide/postgresql.html) ]

默认情况下 Postgresql 不允许 TCP 连接。编辑 postgresql.conf（我最喜欢的编辑器是 pico）

```
sudo pico /etc/postgresql/9.1/main/postgresql.conf 
```

添加

```
listen_addresses = '*' #Listens on all interfaces!! 
```

或取消注释

```
listen_addresses = 'localhost' #More secure way to configure the server. Prefer this one if you won't connect to the server remotely 
```

线。

如果您选择绑定到所有接口而不是本地主机，那么您将需要一个额外的配置来允许远程连接。[ [5](https://stackoverflow.com/questions/1287067/unable-to-connect-postgresql-remote-database-by-using-pgadmin) ] 打开 pg_hba.conf

```
sudo pico /etc/postgresql/9.1/main/pg_hba.conf 
```

添加行：

```
host    all             all             0.0.0.0/0               md5 
```

重新启动 Postgresql 以应用新配置。

```
sudo /etc/init.d/postgresql restart 
```

现在我们将设置默认**postgres**用户 [ [6](https://serverfault.com/questions/110154/whats-the-default-superuser-username-password-for-postgres-after-a-new-install) ] 的密码。首先启动 postgresql 命令行。

```
sudo -u postgres psql 
```

执行以下命令。[ [7](http://ubuntugeek.com/forum/index.php?topic=40.0) ]

```
postgres=# ALTER USER postgres WITH ENCRYPTED PASSWORD '<your new password>'; 
```

现在您可以通过 PgAdmin3 或您最喜欢的 SQL 客户端或命令行连接到您的服务器...

## 安装和配置 Java 和 JBoss AS 7.1.1

我选择了 /opt 目录作为我们的安装目录。只要您相应地配置脚本，您就可以自由选择自己的。首先解压JDK。

```
sudo tar -zxvf <Full Path to jdk-7u10-linux-i586.tar.gz> -C /opt 
```

这会将 JDK 解压缩到 **/opt/jdk1.7.0_10* 目录。现在我们将提取和配置 JBoss AS。[ [8](http://chiralsoftware.com/linux-system-administration/jboss-server-deployment.seam) ] [ [9](http://www.opensourcearchitect.com/tutorials/installing-jboss-7-ubuntu-1204-lts) ]

首先为 JBoss 创建一个用户（**jboss-as**），模拟用户而不是直接以 root 身份运行服务器是一个好习惯。这将加强安全性。

```
sudo useradd -s /bin/sh jboss-as 
```

**将 jboss-as-7.1.1.Final.tar.gz**解压到**/opt/jboss-as-7.1.1.Final**

```
sudo tar -zxvf <Full Path to jboss-as-7.1.1.Final.tar.gz> -C /opt 
```

我假设您将以独立模式运行 JBoss。打开standalone.conf 添加以下行。

```
JAVA_HOME="/opt/jdk1.7.0_10" #show your JAVA_HOME directory to JBoss
JAVA_OPTS="$JAVA_OPTS -Djboss.bind.address=0.0.0.0" #Bind to 0.0.0.0 so that remote clients can connect to your server. 
```

通过执行冒充**jboss-as**用户

```
sudo -su jboss-as 
```

首先通过执行测试服务器

```
cd /opt/jboss-as-7.1.1.Final
./standalone.sh 
```

它应该毫无问题地启动。使用 CTRL+C 关闭服务器。您可以在浏览器上的 8080 端口连接到服务器。

```
http://<your server address>:8080 
```

现在我们将为 JBoss 创建一个管理用户。需要使用在端口 9990 上运行的管理控制台。

```
export JAVA_HOME=/opt/jdk1.7.0_10/
./add-user.sh
   Management User -> Select (a)
   Realm (Management Realm) -> Accept the default and press enter
   Username : -> Enter <your admin user name>
   Password : -> Enter <your password>
   Is this correct yes/no? -> Type 'yes' and press Enter
       Added user '<your admin user name>' to file '/opt/jboss-as-7.1.1.Final/standalone/configuration/mgmt-users.properties'
       Added user '<your admin user name>' to file '/opt/jboss-as-7.1.1.Final/domain/configuration/mgmt-users.properties' 
```

**从模拟的 jboss-as**用户退出。

```
exit 
```

现在您可以通过其 Web 界面配置您的服务器

```
http://<your server address>:9990 
```

**此地址仅在您位于localhost**时接受您的地址每当您需要远程配置服务器时，请使用以下命令启动服务器。

```
sudo -u jboss-as ./standalone.sh -Djboss.bind.address.management=0.0.0.0 
```

再次出于安全原因，如果您不需要它，请不要绑定到 0.0.0.0。

## 将 JBoss 安装为系统服务

我们将为 init 守护进程（又名 init.d）准备一个服务器管理脚本 [ [10](https://stackoverflow.com/questions/6880902/start-jboss-7-as-a-service-on-linux) ]

```
cd /etc/init.d/
sudo pico jboss 
```

复制并粘贴以下内容。不要忘记相应地修改**JAVA_HOME、** JBOSS_HOME目录和**--chuid jboss-as**（运行服务器时模拟为 jboss-as 用户）参数。

```
#!/bin/sh
### BEGIN INIT INFO
# Provides:          jboss
# Required-Start:    $local_fs $remote_fs $network $syslog
# Required-Stop:     $local_fs $remote_fs $network $syslog
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: Start/Stop JBoss AS v7.1.1 Final
### END INIT INFO
#
#source some script files in order to set and export environmental variables
#as well as add the appropriate executables to $PATH

export JAVA_HOME=/opt/jdk1.7.0_10
export PATH=$JAVA_HOME/bin:$PATH

export JBOSS_HOME=/opt/jboss-as-7.1.1.Final
export PATH=$JBOSS_HOME/bin:$PATH

case "$1" in
    start)
        echo "Starting JBoss AS 7.1.1 Final"
        start-stop-daemon --start --quiet --background --chuid jboss-as --exec ${JBOSS_HOME}/bin/standalone.sh
    ;;
    stop)
        echo "Stopping JBoss AS 7.1.1 Final"
        start-stop-daemon --start --quiet --background --chuid jboss-as --exec ${JBOSS_HOME}/bin/jboss-cli.sh -- --connect command=:shutdown
    ;;
    *)
        echo "Usage: /etc/init.d/jboss {start|stop}"
        exit 1
    ;;
esac

exit 0 
```

将脚本设置为可执行文件并更新 rc.d

```
sudo chmod +x jboss
sudo update-rc.d jboss defaults 
```

现在 JBoss 将从您的服务器开始。您可以使用以下命令来启动和停止服务器

```
sudo service jboss start
sudo service jboss stop 
```

# mysql - 添加累积（运行总计？）列的优化？

> ID：14012551
> 
> 赞同：1
> 
> 时间：2012-12-23T16:20:17.913
> 
> 标签：mysql, optimization

我是 sql 新手，到目前为止，这个论坛一直是我的生命线。感谢您在这个伟大的平台上创建和分享。

我目前正在处理一个大型数据集，希望得到一些指导。

数据表（existing_table）有 400 万行，如下所示：

```
id  date   sales_a   sales_b   sales_c   sales_d   sales_e 
```

请注意，有多个行具有相同的日期。

我想要做的是在此表中再添加 5 列（`cumulative_sales_a`、`cumulative_sales_b`等），这些列将包含 a、b、c 等的累积销售数据，直到特定日期（这将按日期分组）。我使用以下代码来执行此操作：

```
create table new_cumulative  
select t.id, t.date, t.sales_a, t.sales_b, t.sales_c, t.sales_d, t.sales_e,   
(select sum(x.sales_a) from existing_table x where x.id = t.id and x.date <= t.date) as cumulative_sales_a,  
(select sum(x.sales_b) from existing_table x where x.id = t.id and x.date <= t.date) as cumulative_sales_b,  
(select sum(x.sales_c) from existing_table x where x.id = t.id and x.date <= t.date) as cumulative_sales_c,  
(select sum(x.sales_d) from existing_table x where x.id = t.id and x.date <= t.date) as cumulative_sales_d,  
(select sum(x.sales_e) from existing_table x where x.id = t.id and x.date <= t.date) as cumulative_sales_e  
from existing_table t  
group by t.id, t.date; 
```

在运行此查询之前，我已经在“id”列上创建了一个索引。

虽然我得到了想要的输出，但这个查询花了将近 11 个小时才完成。

我想知道我是否在这里做错了什么以及是否有更好（更快）的方式来运行此类查询。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T17:31:46.947

看起来是 MySQL 变量查询的好地方。在这种情况下，我会通过您预期的“ID”和“日期”预先查询所有聚合以删除重复项，并将单个条目作为一天的总计。获取此结果并按 ID 和日期对其进行排序，以便为下一部分加入“@sqlvariables”版本做准备。

现在，只需按顺序处理它们并继续为每个 ID 累积直到新 ID，然后将计数器重置为零，但继续添加相应的“销售额”。处理完每条“记录”后，将 @lastID 设置为刚刚处理的 ID，以便在处理下一行时进行比较，以确定是否继续在同一个人上，或强制重置为零。

为了帮助优化和确保内部的“PreAgg”regate 查询，确保在（ID，Date）上有一个索引。对你来说应该超级快。

```
SELECT
      PreAgg.ID,
      PreAgg.`Date`,
      PreAgg.SalesA,
      PreAgg.SalesB,
      PreAgg.SalesC,
      PreAgg.SalesD,
      PreAgg.SalesE,
      @CumulativeA := if( @lastID := PreAgg.ID, @CumulativeA, 0 ) + PreAgg.SalesA as CumulativeA,
      @CumulativeB := if( @lastID := PreAgg.ID, @CumulativeB, 0 ) + PreAgg.SalesB as CumulativeB,
      @CumulativeC := if( @lastID := PreAgg.ID, @CumulativeC, 0 ) + PreAgg.SalesC as CumulativeC,
      @CumulativeD := if( @lastID := PreAgg.ID, @CumulativeD, 0 ) + PreAgg.SalesD as CumulativeD,
      @CumulativeE := if( @lastID := PreAgg.ID, @CumulativeE, 0 ) + PreAgg.SalesE as CumulativeE,
      @lastID := PreAgg.ID as dummyPlaceholder
   from 
      ( select 
              t.id, 
              t.`date`, 
              SUM( t.sales_a ) SalesA, 
              SUM( t.sales_b ) SalesB, 
              SUM( t.sales_c ) SalesC,
              SUM( t.sales_d ) SalesD,
              SUM( t.sales_e ) SalesE
           from
              existing_Table t
           group by
              t.id,
              t.`date`
           order by
              t.id,
              t.`date` ) PreAgg,
      ( select 
              @lastID := 0,
              @CumulativeA := 0,
              @CumulativeB := 0,
              @CumulativeC := 0,
              @CumulativeD := 0,
              @CumulativeE := 0 ) sqlvars 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T16:44:12.083

一些查询本质上是昂贵的并且需要很长时间才能执行。在这种特殊情况下，您可以避免使用 5 个子查询：

```
SELECT a.*, b.cumulative_sales_a, b.cumulative_sales_b, ...
FROM 
(
 select t.id, t.`date`, t.sales_a, t.sales_b, t.sales_c, t.sales_d, t.sales_e
 from existing_table t  
 GROUP BY t.id,t.`date`
)a
LEFT JOIN 
(
  select x.id, x.date, sum(x.sales_a) as  cumulative_sales_a,
  sum(x.sales_b) as cumulative_sales_b, ...
  FROM existing_table x 
  GROUP BY x.id, x.`date`
)b ON (b.id = a.id AND b.`date` <=a.`date`) 
```

这也是一个昂贵的查询，但它应该有比原来更好的执行计划。另外，我不确定是否

```
select t.id, t.`date`, t.sales_a, t.sales_b, t.sales_c, t.sales_d, t.sales_e
 from existing_table t  
 GROUP BY t.id,t.`date` 
```

为您提供您想要的 - 例如，如果您有 5 条具有相同 id 和日期的记录，它将从这 5 条记录中的任何一条中获取其他字段（sales_a、sales_b 等）的值...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T16:54:39.673

您可以在一个查询中将所有带有 sum 的 mini-select 加入为

```
(select sum(x.sales_a) from existing_table x where x.id = t.id and x.date <= t.date) as cumulative_sales_a,  
(select sum(x.sales_b) from existing_table x where x.id = t.id and x.date <= t.date) as  cumulative_sales_b,  
(select sum(x.sales_c) from existing_table x where x.id = t.id and x.date <= t.date) as cumulative_sales_c,  
(select sum(x.sales_d) from existing_table x where x.id = t.id and x.date <= t.date) as cumulative_sales_d,  
(select sum(x.sales_e) from existing_table x where x.id = t.id and x.date <= t.date) as cumulative_sales_e 
```

在

```
select sum(..),sum(..),sum(...),sum(..),sum(..)
from existing table x 
where x.id=t.id and x.date<=t.date 
```

# sharepoint - 如何在 SharePoint 应用程序页面上设置自定义字段类型列？

> ID：14012557
> 
> 赞同：0
> 
> 时间：2012-12-23T16:20:43.807
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007, page-layout

我的共享点新闻有页面布局。我可以控制管理员可以设置几个复选框的位置。如何将所选选项设置为我的新闻项目中的自定义字段？

我有事件接收者，但我无权访问那里的页面布局控件。我需要一些像“SaveButtonClick”或类似的事件......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T16:18:39.267

1.  向内容类型添加新的隐藏字段。

2.  在页面回发将您的数据从自定义控件保存到隐藏字段。

3.  在事件接收者中，我现在可以使用隐藏字段中的数据。

# android - 从 sqlite 数据库返回单个值作为要在另一个类中使用的字符串的方法

> ID：14012558
> 
> 赞同：0
> 
> 时间：2012-12-23T16:20:46.767
> 
> 标签：android, sqlite

我正在制作一个 android hangman 游戏，它有两个类，一个包含数据库，一个包含游戏，我需要做的是从我的数据库列中获取一个值，该值包含单词并将其作为字符串返回在游戏类中使用。我的问题是我应该如何编写将在我的数据库类中的方法以从 sqlite 数据库返回值并将其设置为要发送的字符串。我似乎无法弄清楚应该是什么sql语句或方法我已经尝试了很多东西，但现在已经好几天没有用了，如果可以的话，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T16:30:28.887

本质上，您要问我们的是整个 sqlite 模式，它太宽泛而无法用一个答案来表达。[以下](http://www.youtube.com/watch?v=1JyC_xv20yE&list=PL2F07DBCDCC01493A)是我以前学习的一些视频。感谢 Travis/thenewboston 教我如何从头开始编程。在尝试了这些之后，再次询问您是否对艾米有任何问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T16:55:41.430

使用 getReadableDatabase() 打开您的数据库。执行您的查询并获取光标。使用正确的列索引在游标中调用 getString()。

这是从数据库中检索值的基本步骤

# python - 如何比较同一列表中的两个相邻项目 - Python

> ID：14012562
> 
> 赞同：8
> 
> 时间：2012-12-23T16:21:11.167
> 
> 标签：python, list, python-2.7

我正在寻找一种方法来比较列表中的两个相邻项目，例如。比较哪个值更高，然后我会相应地对它们进行排序。这是一个用户将要输入的列表，所以它不是 just 的情况 `if l[1] > l[2]`，因为我不知道列表的长度，所以我需要一个通用语句以在 for 循环中使用。

`for i in l: if x > i[index of x + 1]` 我有类似但不知道如何找到变量索引的想法 。任何帮助表示赞赏，谢谢

编辑：我知道内置的排序功能，但只是想通过创建自己的来练习编码和算法编写:)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-23T16:25:32.270

您可以使用[`zip()`](https://docs.python.org/2/library/functions.html#zip)：

```
In [23]: lis = [1,7,8,4,5,3]

In [24]: for x, y in zip(lis, lis[1:]):
   ....:     print x, y           # prints the adjacent elements
             # do something here
   ....:     
1 7
7 8
8 4
4 5
5 3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-23T16:23:17.750

快速而丑陋的解决方案是这样的（不要使用它！）：

```
for i, item in enumerate(lst):
    # here you can use lst[i + 1] as long as i + 1 < len(lst) 
```

但是，**不要**自己实现列表排序！用于`.sort()`就地排序，或者`sorted()`如果您想创建一个新列表。关于如何在 python 网站上进行排序，有一个[非常好的指南。](http://wiki.python.org/moin/HowTo/Sorting)

如果这不是您的意图.. 除了我在上面发布的循环之外，还有一种更好的方法可以从[另一个 SO 问题](https://stackoverflow.com/a/8991553/298479)的列表中迭代块：

```
import itertools
def grouper(n, iterable, fillvalue=None):
    "grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx"
    args = [iter(iterable)] * n
    return itertools.izip_longest(fillvalue=fillvalue, *args) 
```

你曾经喜欢这样：

```
for x, y in grouper(2, lst):
    # do whatever. in case of an odd element count y is None in the last iteration 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T05:48:45.427

您还可以使用内置的 reduce 功能

例如：

```
l = [1,2,3,4,5,6,7]

def my_function(a,b):
    # your comparison between a and b
    # return or print values or what ever you want to do based on the comparison

reduce(my_function, l) 
```

reduce 会自动处理 i 和 i + 1。

希望能帮助到你。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-29T13:23:09.040

有内置函数[cmp](http://docs.python.org/2/library/functions.html#cmp)，您可以使用它进行比较

我需要检查列表中的所有项目是否相同，所以我这样做了：

```
def compare(x, y):
    if x == y:
        return x
    return False

reduce(compare, my_list) 
```

当你用 [1,1,1,1,1,1] 运行它时，它会打印 1，当其中一个数字不匹配时，它会返回 False .. 简单

# php - XPath 查找具有特定文本的特定节点

> ID：14012564
> 
> 赞同：1
> 
> 时间：2012-12-23T16:21:30.877
> 
> 标签：php, html, xpath

所以我有一个关于类似的问题：

[获取父节点及其子节点，其中子节点具有特定文本](https://stackoverflow.com/questions/14007344/getting-a-parent-node-and-its-child-where-the-child-has-a-certain-text)

但是情况发生了变化，我发现我的上述想法存在一些问题。我现在正在尝试查找具有特定文本的节点，因为当我使用 29 时，它似乎也会找到具有 2999 或其他任何具有 29 的节点。

所以我的问题是我该如何转：

`$myvar = $xpath->query('(//*[text()[contains(., "something")]])');`

所以它会寻找带有特定文本的节点。不适用于“具有”某些文本的节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T16:27:25.317

只需使用`//*[text() = "29"]`而不是`contains()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T17:02:14.387

**使用**：

```
//*[. = 29] 
```

这将选择任何元素，其字符串值在转换为数字时等于 29。

# function - 重新审视 Matlab 中的人脸着色

> ID：14012566
> 
> 赞同：2
> 
> 时间：2012-12-23T16:21:48.427
> 
> 标签：function, matlab, patch

使用 Mathematica 我能够创建[以下图](http://arkadiusz-jadczyk.eu/images/sferka.jpg)

现在我想切换到 Matlab - 我刚刚开始学习。我能够使用 FL.vertices 和 FL.faces 矩阵以及 patch 函数创建三角剖分，看起来像这样

```
faces=FV.faces; 
facecolor = [.7 .7 .7]; 
patch('faces',faces,'vertices',FV.vertices,...
'facecolor',facecolor,'facealpha',0.8,'edgecolor',[.8.8.8]);
camlight('headlight','infinite'); 
daspect([1 1 1]); axis vis3d; axis off 
material dull; 
```

它产生一个沉闷的[图像](http://arkadiusz-jadczyk.eu/images/matlabsphere.jpg)：

现在，我有一个函数 J，它接受矩阵 FL.vertices 并返回一个正值矩阵。我想根据顶点上 J 的值对面进行着色。可能沿面进行插值。边缘现在可以按原样处理 - 稍后再处理。阅读文档后，我不清楚如何完成此任务。我需要手动查找 J 的最小值和最大值吗？或者Matlab可以自动完成吗？现在可以使用 Matlab 的预设着色方案之一，类似于“温度图”。在什么时候我应该调用我的函数 J？它应该如何与 patch 命令一起使用？我查看了以前对类似问题的答案，但我仍然无法弄清楚如何处理我的情况。任何帮助建议将不胜感激。

PS好的。我想我用简单的方法做到了

```
FV.Cdata=sphere_jacobian(FV.vertices,1,1,0,1);
figure
Hp = patch('faces',FV.faces,'vertices',FV.vertices,...
'FaceVertexCData',FV.Cdata,'facecolor','interp','edgecolor',[.8 .8 .8]); 
```

但我不确定 min 和 max 是否已被自动计算和插值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:41:59.687

这是我认为是海报给出的答案，我将其放在这里，这样问题就不会保持开放。

好的。我想我用简单的方法做到了

```
FV.Cdata=sphere_jacobian(FV.vertices,1,1,0,1);
figure
Hp = patch('faces',FV.faces,'vertices',FV.vertices,...
'FaceVertexCData',FV.Cdata,'facecolor','interp','edgecolor',[.8 .8 .8]); 
```

但我不确定 min 和 max 是否已被自动计算和插值。

* * *

我做了

```
colormap(hsv(3200)); 
```

并规范了我的功能：

```
jac = sphere_jacobian(FV.vertices,m); 
minj = min(jac);
maxj = max(jac);
jac1 = (jac-minj*ones(size(jac)))/(maxj-minj);FV.Cdata=jac1; 
figure Hp = patch('faces',FV.faces,'vertices',FV.vertices,... 'FaceVertexCData',FV.Cdata,'facecolor','interp','edgecolor',[.8 .8 .8]); 
```

结果可以在[这里](http://arkadiusz-jadczyk.eu/images/26-Dec-12%2021-37-20.jpg)看到。

# android - 检测输入音频电平android

> ID：14012567
> 
> 赞同：2
> 
> 时间：2012-12-23T16:22:04.493
> 
> 标签：android

我会感谢任何专家的帮助，

当用户停止讲话时，我试图触发一个事件。我的方法是跟踪单个输入音频音量级整数并通过时间测量它。我研究了 aurioTouch 和 speakHere 的例子。第一个使用 FFT 缓冲区，每次填充时都会对其进行解析 - 我看不出如何从中确定语音的音量。第二个不做任何声音分析。

你知道一种方法吗？是否有 mic-incoming-sound-level 隐藏变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:51:27.863

假设您正在使用`MediaRecorder`，您应该能够在定时循环上使用[getMaxAmplitude()方法来查看“当前”音量。](http://developer.android.com/reference/android/media/MediaRecorder.html#getMaxAmplitude%28%29)

# joomla - 模态窗口中的订购问题

> ID：14012568
> 
> 赞同：0
> 
> 时间：2012-12-23T16:22:19.360
> 
> 标签：joomla, joomla1.5

*我对加载到模式*窗口的组件有疑问。我正在使用 Alpha 用户积分系统，它有一个组件可以为您提供网站用户的完整列表。它还使您能够`order by username, by points etc`. 如果我在模态窗口之外使用它，它工作正常。如果我在模态窗口中使用它，订购不起作用！！！当我将鼠标放在表格的标题上时，模态窗口外部给出了这个......`javascript:tableOrdering('aup.referreid','asc','');`在模态窗口中我看到了这个......`javascript:tableOrdering('aup.referreid','asc','');?ml=1`使用Firebug，我删除了它`?ml=1`，它也适用于模态！所以问题是，为什么在模态窗口中给出这个`?ml=1`，这是什么？我将如何删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:50:00.570

好吧，这就是答案……我使用了**nonumber.nl的****Modalizer**扩展。我通过模态器的模态框加载我的组件，这就是我遇到这个问题的原因。所以，如果有人使用**Modalizer**弹出组件并且和我有同样的问题，只要去 modalizer 的**插件管理器**，找到选项**Convert Links inside Window**并禁用它！！！但是，在此之后，如果您想在模态窗口中添加链接，并且您不想显示整个首页而只显示组件或任何内容，则必须在链接末尾添加此**&ml=1**。

# vb.net - 需要帮助 GroupBoxes - 和单选按钮 我对 VB 很陌生

> ID：14012569
> 
> 赞同：0
> 
> 时间：2012-12-23T16:22:20.533
> 
> 标签：vb.net

我想制作一个程序，该程序取决于某人单击的单选按钮（每个按钮只有 1 个`GroupBox`）和总共 5 个不同的组框。特定值将添加到输入的 num1Textbox 值中。

问题是可以做到吗？还是我在浪费时间尝试学习它。我对 VB 很陌生.. 并且只完成了一个 cpl 程序，它为高尔夫程序添加 - 多重 - 除法和减去值以进行推杆.. 这一次我知道它会更复杂。

下面是该程序的图片。

有人会进入 Yard to Hole = 145（每次都是不同的数字）

然后，他们会为每个（5 个不同的选项）选择 1 个单选按钮，`GroupBox`并且值 145 会根据选择的选项相应地增加或减少。

对不起，它不允许我在这里上传图片:(所以我在这里上传了它。

抱歉，不知道您需要一个帐户才能在那里查看表格。我会尝试找到一个新的地方。1分钟

让我们在这里试试 [http://i1311.photobucket.com/albums/s667/Steve_Lunney/design_zps9c2f89da.jpg](http://i1311.photobucket.com/albums/s667/Steve_Lunney/design_zps9c2f89da.jpg)

任何帮助将不胜感激......提前谢谢你

这就是我正在尝试的......作为某人的建议

但是在每个这些状态下 spinGroupBox.spin1RadioButton.Checked 我得到波浪线，当我把鼠标放在它上面时它说 - 'upRadioButton' 不是'System.Windows.Forms.Groupbox'的成员

```
Private Sub calculateButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles calculateButton.Click
    Dim spinGroupBox As New GroupBox()
    Dim spin1RadioButton As RadioButton
    Dim spin2RadioButton As RadioButton
    Dim spin3RadioButton As RadioButton
    Dim spin4RadioButton As RadioButton
    Dim spin5RadioButton As RadioButton
    Dim num1TextBox As Integer
    Dim num2TextBox As Integer
    Dim spin1b As Decimal
    Dim resultA As Integer

    Select Case True
        Case spinGroupBox.spin1RadioButton.Checked
            spin1b = 0.095
        Case spinGroupBox.spin2RadioButton.Checked
            spin1b = 0.085
        Case spinGroupBox.spin3RadioButton.Checked
            spin1b = 0.08
            'etc
    End Select
    resultA = spin1b

    ' Create and initialize a GroupBox and a Button control. 
    Dim windGroupBox As GroupBox
    Dim upRadioButton As RadioButton
    Dim ulRadioButton As RadioButton
    Dim urRadioButton As RadioButton
    Dim downRadioButton As RadioButton
    Dim dlRadioButton As RadioButton
    Dim drRadioButton As RadioButton
    Dim leftRadioButton As RadioButton
    Dim rightRadioButton As RadioButton
    Dim wind1b As Decimal
    Dim resultb As Integer
    Select Case True
        Case windGroupBox.upRadioButton.Checked
            wind1b = 0.095
        Case windGroupBox.ulRadioButton.Checked
            wind1b = 0.085
        Case windGroupBox.urRadioButton.Checked
            wind1b = 0.075
        Case windGroupBox.downRadioButton.Checked
            wind1b = 0.07
        Case windGroupBox.dlRadioButton.Checked
            wind1b = 0.065
        Case windGroupBox.drRadioButton.Checked
            wind1b = 0.06
        Case windGroupBox.leftRadioButton.Checked
            wind1b = 0.055
        Case windGroupBox.rightRadioButton.Checked
            wind1b = 0.05

    End Select
    resultb = wind1b
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:58:43.360

我现在已经对其进行了测试，正如我在评论中发布的那样，`upRadioButton`（以及所有其他人）（很可能）是该表单的直接子代。这意味着您可以编写
`Case Me.upRadioButton.Checked`
（或者您可以省略`Me.`）顺便说一句，如果您已将控件拉到设计器中的表单上，则应该删除这些`dim ...`行。控件在另一个默认隐藏的文件中声明。您的行再次声明了隐藏对实际表单控件的访问的变量，这意味着当您尝试在没有`Me.`.

# wicket - 如何使用 apache wicket 在 li 标签内创建重复的链接列表？

> ID：14012577
> 
> 赞同：2
> 
> 时间：2012-12-23T16:22:53.560
> 
> 标签：wicket, repeat

在 Apache Wicket 中，我想从代码中创建一个重复的链接列表。我不确定模板应该是什么才能获得如下所示的 html 结果：

```
<li><a href="whatevenrlink1">link1</a></li>
<li><a href="whatevenrlink2">link2</a></li>
<li><a href="whatevenrlink3">link3</a></li> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-23T16:58:03.957

所以经过大量测试后，这对我有用。HTML 应如下所示：

```
<ul>
  <ui wicket:id="LinkList"><a wicket:id="Link"><span wicket:id="Text"/></a></ui>
</ul> 
```

然后重复视图代码将是：

```
RepeatingView view = new RepeatingView("LinkList");

add(view);

WebMarkupContainer list = new WebMarkupContainer(view.newChildId());
ExternalLink externalLink = new ExternalLink("Link", "http://www.google.com");
externalLink.add(new Label("Text","Google"));
list.add(externalLink);

view.add(list); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T12:51:06.963

您可以使用 ListView 从代码中创建重复的链接列表。ListView 是一个中继器，可以轻松显示/使用列表。ListView 包含 ListItem 子项。可以重新排序和删除项目，一次一个或多个。

例子：

```
<tbody>
   <tr wicket:id="rows" class="even">
     <td><span wicket:id="id">Test ID</span></td>
     ... 
```

虽然这个例子是关于一个 HTML 表格的，但 ListView 并不局限于 HTML 表格。任何类型的列表都可以使用 ListView 呈现。

相关的Java代码：

```
 add(new ListView<UserDetails>("rows", listData)
 {
    public void populateItem(final ListItem<UserDetails> item)
    {
            final UserDetails user = item.getModelObject();
            item.add(new Link("id", user.getId()));
    }
 }); 
```

其中 listData 包含每个链接的 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T17:03:42.993

如何实现这类事情有很多选择，但它们都使用某种中继器。

有关这方面的许多示例，请参见[检票口中继器示例](http://www.wicket-library.com/wicket-examples/repeater/)。

# haskell - Knight 的 Warnsdorff 规则之旅：确定所有解决方案

> ID：14012583
> 
> 赞同：1
> 
> 时间：2012-12-23T16:23:54.823
> 
> 标签：haskell, knights-tour

我使用 Haskell 为 Knight's tour 实现了一个递归解决方案。我的算法基本上是基于 Warnsdorff 的规则。

例子：

*   棋盘尺寸：5x5
*   起始位置：(3,3)

基于这个例子的基本思想：

(1) 计算从当前点 (3,3)
*=> (1,2),(1,4),(2,1),(2,5),(4,1),(4,5)允许的移动),(5,2),(5,4)*

(2) 对于这些点中的每一个，计算到达该点可以执行的移动次数（“入口”数）
*=> ((1,2),2),((1,4),2) ,((2,1),2),((2,5),2),((4,1),2),((4,5),2),((5,2),2) ,((5,4),2)*

(3) 如果所有点的入口数量相同，则找到入口最少的点或第一个点
*=> (1,2)*

(4) 调用与确定点相同的函数（开始递归）

这样我就可以确定解决问题的方法。但现在我需要确定起始位置的所有其他可能解决方案（在示例 (3,3) 中）。不幸的是，我真的不知道如何实现这一目标。

想法非常感谢。

这是我当前的 Haskell 代码（为指定的起始位置提供一种解决方案）：

```
> kt :: Int -> (Int,Int) -> [(Int,Int)]
> kt dimension startPos = kt' (delete startPos allFields) [startPos] startPos
>   where allFields = [(h,v) | h <- [1..dimension], v <- [1..dimension]]
>         kt' :: [(Int,Int)] -> [(Int,Int)] -> (Int,Int) -> [(Int,Int)]
>         kt' [] moves _ = moves
>         kt' freeFields moves currentPos
>           | nextField /= (0,0) = kt' (delete nextField freeFields) (moves ++ [nextField]) nextField
>           | otherwise = error "Oops ... dead end!"
>           where h            = fst currentPos
>                 v            = snd currentPos
>                 nextField    = if nextFieldEnv /= [] then fst (head (sortBy sortGT nextFieldEnv)) else (0,0)
>                 nextFieldEnv = fieldEnv' currentPos freeFields

> sortGT ((a1,a2),a3) ((b1,b2),b3)
>  | a3 > b3 = GT
>  | a3 < b3 = LT
>  | a3 == b3 = EQ

> fieldEnv :: (Int,Int) -> [(Int,Int)] -> [(Int,Int)]
> fieldEnv field freeFields = [nField | nField <- [(hor-2,ver-1),(hor-2,ver+1),(hor-1,ver-2),(hor-1,ver+2),(hor+1,ver-2),(hor+1,ver+2),(hor+2,ver-1),(hor+2,ver+1)], nField `elem` freeFields]
>  where hor = fst field
>        ver = snd field

> fieldEnv' :: (Int,Int) -> [(Int,Int)] -> [((Int,Int),Int)]
> fieldEnv' field freeFields = [(nField,length (fieldEnv nField freeFields)) | nField <- (fieldEnv field freeFields)]
>  where hor = fst field
>        ver = snd field 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-19T07:12:55.957

Community-wiki 以最终近似的解决方案回答：

“恐怕如果你想要所有的旅行，无论如何你都会有一个缓慢的算法，从一个起点开始的开放旅行的数量对于不太小的板来说是巨大的”

# ruby-on-rails - 将标准 rails / ruby 时间转换为美国格式 - 日期混淆

> ID：14012584
> 
> 赞同：3
> 
> 时间：2012-12-23T16:24:35.947
> 
> 标签：ruby-on-rails, ruby, date, datetime, datepicker

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T19:11:38.493

在 RoR 中处理日期时，我们必须解决三个任务。我发现这些解决方案对我来说是最简单的：

## 1.如何正确显示日期。

安装**I18n** gem 并检查 config\locales\en.yml 中的日期格式。然后使用**I18n.l()**（或只是 l）表单助手来本地化 html.erb 文件中的日期。

```
 date:
    formats:
      default: "%m/%d/%y" 
```

## 2.如何方便用户修改日期。

使用 jQuery datepicker（或 bootstrap datepicker 等）并根据 en.yml 格式在 jQuery 小部件选项中设置日期格式。

## 3.如何将日期从本地化（查看）格式转换为活动记录属性。

安装**Delocalize** gem 并将 :input 子部分添加到 en.yml 文件的 date: 部分。

```
input:
  formats:
    - :default 
```

现在，当您分配日期时，您的日期将自动从本地化格式 (mm/dd/yy) 转换为数据库格式 (yyyy-mm-dd)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T18:01:25.483

我不得不使用`altField`and`altFormat`选项来使其按描述工作：

```
$('input.datepicker').datepicker({
   dateFormat: "mm/dd/yy", 
   altField: alt_field, 
   altFormat: "yy-mm-dd"}); 
```

这需要有一个隐藏字段`alt_field`，它实际上以标准数据库格式保存您的日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-26T12:47:35.887

包括以下 gem，它会自动将美国日期保存为 db 格式。

```
gem 'american_date' 
```

# php - Wordpress 选项树插件

> ID：14012586
> 
> 赞同：0
> 
> 时间：2012-12-23T16:24:39.463
> 
> 标签：php, wordpress, plugins

我在选项树插件的主题选项中定义了一个选项。

选项id是`banner_list`，类型是`list item`。

我不知道如何检索我的主题的选项。

我打了

```
<?php
if ( function_exists( 'ot_get_option' ) ) {

    $banner_list = ot_get_option( 'banner_list' );

}
 echo $banner_list; ?> 
```

,

但输出是`array`。

我应该如何编写代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T17:45:28.913

我不知道你到底在寻找什么关于你的 wordpress 插件。我所知道的是，您要回显的变量实际上是一个数组。

我你想知道你的数组持有的数组值我建议尝试：

```
<pre>
    <?php print_r($banner_list); ?>
</pre> 
```

这应该让您大致了解数组所持有的键以及这些键的值。之后，您可以单独或在 foreach 循环中回显它们。

有关数组和/或循环的更多信息：

*   [http://www.tizag.com/phpT/arrays.php](http://www.tizag.com/phpT/arrays.php)
*   [http://www.tizag.com/phpT/foreach.php](http://www.tizag.com/phpT/foreach.php)
*   [http://www.w3schools.com/php/php_looping_for.asp](http://www.w3schools.com/php/php_looping_for.asp)
*   [http://www.w3schools.com/php/php_arrays.asp](http://www.w3schools.com/php/php_arrays.asp)

希望这会帮助您朝着正确的方向前进。

祝您节日快乐！

杰斯珀

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T01:40:30.277

相当容易！这是解决方案：

```
<?php 
$banner_list  = get_option_tree( 'banner_list ', '', false );
?> 
```

如果您需要从自定义元框中检索数据，请使用以下代码：

```
<?php 
$header_image= get_post_meta($post->ID, 'my_header_image', true);
?> 
```

# php - 用 echo <<< HTML 回显 HTML

> ID：14012589
> 
> 赞同：-1
> 
> 时间：2012-12-23T16:24:52.087
> 
> 标签：php, html, echo

> **可能重复：**
> [是否有理由在 PHP 中使用 Heredoc？](https://stackoverflow.com/questions/5673269/is-there-a-reason-to-use-heredoc-in-php)

我是 PHP 新手。

使用类似的东西是一种好习惯吗？

```
echo <<< HTML
        <a href="$link" title="$title">$item</a>
HTML; 
```

它确实有效，但我不确定我是否正确使用它。

非常感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T16:27:38.877

根据您的需要（格式、内部变量等），使用单引号、双引号、heredoc 和 nowdoc 非常好。[在此处](http://php.net/manual/en/language.types.string.php)查看更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T16:29:26.297

在同一个文件中混合 HTML 和 PHP**绝不**是一个好习惯。通过将代码和模板放在不同的文件中并可能使用模板引擎来分离代码和模板。

但是，如果您**需要**将 HTML 块放入 PHP 文件中，那么您在示例中使用的*heredoc*语法非常好，因为它避免了使用常规引号时的转义地狱。

有关引用字符串的各种方式，请查看[PHP 文档](http://php.net/manual/en/language.types.string.php)。它还解释了各种字符串的行为方式（例如，关于变量插值和转义序列）。

# java - 比较 PHP hash_file 和 Java 输出

> ID：14012591
> 
> 赞同：0
> 
> 时间：2012-12-23T16:25:04.007
> 
> 标签：java, php, hash, hex, md5

我有需要在我的 java 客户端上计算和检查的 UTF-8 hash_file 的输出。根据[hash_file 手册](http://php.net/manual/en/function.hash-file.php)，我正在提取文件的内容并在 Java 上创建 MD5 哈希十六进制，但我无法使它们匹配。我尝试了关于 [this question] 的建议但没有成功[2](http://www.fileformat.info/tool/hash.htm)。

这是我在 Java 上的做法：

```
public static String calculateStringHash(String text, String encoding) 
        throws NoSuchAlgorithmException, UnsupportedEncodingException{
    MessageDigest md = MessageDigest.getInstance("MD5");
    return getHex(md.digest(text.getBytes(encoding)));
} 
```

我的结果与[此页面](http://www.fileformat.info/tool/hash.htm)中的结果相匹配。

例如：

字符串杰克：1200cf8ad328a60559cf5e7c5f46ee6d

来自我的 Java 代码：1200CF8AD328A60559CF5E7C5F46EE6D

但是在尝试文件时它不起作用。这是文件功能的代码：

```
public static String calculateHash(File file) throws NoSuchAlgorithmException,
            FileNotFoundException, IOException {
        BufferedReader br = null;
        StringBuilder sb = new StringBuilder();
        try {
            String sCurrentLine;
            br = new BufferedReader(new FileReader(file));
            while ((sCurrentLine = br.readLine()) != null) {
                sb.append(sCurrentLine);
            }
        } catch (IOException ex) {
            LOG.log(Level.SEVERE, null, ex);
        } finally {
            try {
                if (br != null) {
                    br.close();
                }
            } catch (IOException ex) {
                LOG.log(Level.SEVERE, null, ex);
            }
        }
        return calculateStringHash(sb.toString(),"UTF-8");
    } 
```

我验证了在 PHP 端使用了 hash_file 并且 UTF-8 是加密。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T16:41:37.730

您的阅读方法会从文件中删除所有行尾。`readLine()`返回一行，*没有它的行终止符*。打印 StringBuilder 的内容，你就会明白问题所在。

此外，散列算法是二元运算。它对字节进行操作，并返回字节。为什么要将文件中的字节转换为字符串，以便稍后将字符串转换回字节数组以对其进行哈希处理。只需使用 InputStream 将文件作为字节数组读取，而不是将其作为字符串读取。然后散列这个字节数组。这也将避免使用错误的文件编码（您的代码使用平台默认编码，这可能不是用于创建文件的编码）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T16:41:40.450

我猜你在调用后错过了文件中的换行符`br.readLine()`。

最好将文件读入字节数组，并将其传递给`md.digest(...)`.

# c# - MVVM + 多级/嵌套数据绑定

> ID：14012593
> 
> 赞同：2
> 
> 时间：2012-12-23T16:25:25.370
> 
> 标签：c#, windows-phone-7, data-binding, mvvm, windows-phone-8

# 结构

场景是我有一个 Pivot，其中每个项目都是某一天的菜单。在那个 PivotItem 中，我需要在菜单上显示菜肴，按类别分组（例如汤、甜点……）。

我已经使用 MVVM 模型实现了这一点。

因此，我有以下模型：

```
public class Menu{
    public string Date;
    public List<DishList> Categories;
}
public class DishList
{
    public string Category;
    public List<Dish> Dishes;
}
public class Dish
{
    public string Name;
    public string Price;
} 
```

编辑：这些在这里被简化，每个字段的实际结构是这样的：

```
 private string _date;

    //Get_Set
    public string Date
    {
        get
        {
            return _date;
        }
        set
        {
            if (value != _date)
            {
                _date = value;
            }
        }
    } 
```

所以结构将是这样的：一个 PivotElement 包含一个菜单对象。在其中，我展示了类别，即一些 DishList。在该 Dishlist 中，我显示了类别和不同的菜肴，每个都有它的名称和价格。使事情更清晰的模型（SkyDrive 上的 pdf 文件）；[http://sdrv.ms/12IKlWd](http://sdrv.ms/12IKlWd)

我有以下视图模型

```
public class MenuViewModel : INotifyPropertyChanged
{
    private ObservableCollection<Menu> _Menus;
} 
```

应实现所需布局（结构）的视图如下：

```
<phone:Pivot 
        ItemsSource="{Binding Menus}">
        <phone:Pivot.HeaderTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Date}" />
            </DataTemplate>
        </phone:Pivot.HeaderTemplate>
        <phone:Pivot.ItemTemplate>
            <DataTemplate>
                <ItemsControl
                    ItemsSource="{Binding Categories}">   
                    <TextBlock
                        Text="{Binding Category}"/>
                    <ItemsControl
                        x:Name="Dishes"
                        ItemsSource="{Binding Dishes}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="300"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock 
                                        Grid.Column="1" 
                                        Text="{Binding Name}"/>
                                    <TextBlock 
                                        Grid.Column="2" 
                                        Text="{Binding Price}"/>
                                </Grid>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ItemsControl>
            </DataTemplate>
        </phone:Pivot.ItemTemplate>
    </phone:Pivot> 
```

如您所见，有嵌套的数据绑定来获取所需的数据。

然后我在页面上做的唯一代码是

```
DataContext = App.ViewModel; 
```

# 问题

当我启动它时，我会在 PivotItems 标题中显示正确的数据，以及正确数量的 PivotItems。不幸的是，就是这样；PivotItem 的内容保持为空。因此，第一级数据绑定有效，但仅此而已。

我想的方式

*   第一级：每个 PivotItem 都链接到 Menu 类型的对象，标题为 Menu.Date
*   第二级：在那个 PivotItem 里面我将 ItemsControl 的 ItemsSource 设置为那个 Menu.Categories
*   第三级：ItemsSource 现在是 Menu.Categories.Dishes

我已经进行了相当多的搜索并摆弄了 Datacontext 和 ItemsSource 以及不同类型的“{Binding ...}”，但我无法让它工作。我想在 xaml 中进行绑定，而不是在代码隐藏中。

# 笔记

*   唯一的功能是显示数据。数据是固定的，并且从文件中加载一次。这就是我选择 ItemsControl 而不是 ListBox 的原因，不需要选择任何东西。
*   这是我上一个问题的 MVVM 方法：[Databinding + Dynamic Pivot](https://stackoverflow.com/questions/14004493/databinding-dynamic-pivot)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T16:56:03.730

首先，您正在尝试访问标题中的私有字段，这样就行不通了。这些也必须是属性，而不是字段。

```
<TextBlock Text="{Binding Date}" />

private string Date; 
```

接下来，您将绑定到 Category，它也是私有的，而不是属性。

```
<TextBlock Text="{Binding Category}"/>

private string Category; 
```

而且您正在绑定到需要成为属性的类别字段。

```
<ItemsControl ItemsSource="{Binding Categories}">

public List<DishList> Categories; 
```

即使你纠正了这些问题，你仍然不会得到你想要的，因为你的外层`ItemsControl`没有`ItemTemplate`.

```
<ItemsControl ItemsSource="{Binding Categories}">   
  <TextBlock Text="{Binding Category}"/>
  ...
</ItemsControl> 
```

**补充：**您的新错误是因为`DataTemplate`只能有一个子元素，所以您需要使用像`StackPanel`.

```
<ItemsControl ItemsSource="{Binding Categories}">
  <ItemsControl.ItemTemplate>
    <DataTemplate>
      <StackPanel Orientation="Horizontal">
        <TextBlock Text="{Binding Category}"/>
        <ItemsControl x:Name="Dishes" ItemsSource="{Binding Dishes}">
          ...
        </ItemsControl>
      </StackPanel>
     </DataTemplate>
   </ItemsControl.ItemTemplate>
</ItemsControl> 
```

# eclipse - 在线保存代码（Java Eclipse）

> ID：14012601
> 
> 赞同：3
> 
> 时间：2012-12-23T16:26:06.017
> 
> 标签：eclipse, version-control, eclipse-plugin

目前，我正在将我的代码的在线副本保存在[dropbox](https://www.dropbox.com/)上。我想知道是否还有其他方便的选项，例如 Eclipse 插件（可以自动执行此操作？）。

*注意：该项目的代码是私有的，因此我正在寻找一个不公开的选项。*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-23T16:27:50.017

您是否考虑过将代码放入在线存储库中？BitBucket 为您提供免费的无限 Git 或 Mercurial 存储库，它们都可以与 Eclipse 一起使用。您也可以使用 SVN，eclipse 有一个名为 Subclipse 的插件。它完美无缺。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T16:28:06.553

有几个免费的源代码管理系统。
但是 - 如果您想免费使用它们，您需要开源您的代码。例如，查看[github](https://github.com/)或[googlecode](http://code.google.com/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T16:28:14.213

您正在寻找 SCM 工具（源代码控制管理）。GIT 或 Subversion 是您正在寻找的东西。查看[Github.com](http://github.com)或[Google Code](http://code.google.com)（抱歉，我没有注意到您正在寻找*私人*解决方案）。BitBouquet 可能是最好的闭源公共服务器。如果您有自己的服务器（即在云上），或者您可以安装[GitBlit](http://gitblit.com/)或[Gitosis](http://scie.nti.st/2007/11/14/hosting-git-repositories-the-easy-and-secure-way)工具；[对于颠覆，您可以按照我的教程](http://en.newinstance.it/2009/08/27/tutorial-ubuntu-904-apache-with-ssl-subversion-over-http-https-and-trac/)设置自己的服务器。

Eclipse 支持内置的 CVS 和 Subversion，afaik。也许最新版本也有 git；顺便说一句，有 Egit eclipse 插件来支持 Git。

# android - Toast 的自定义动画进入/退出？

> ID：14012602
> 
> 赞同：10
> 
> 时间：2012-12-23T16:26:16.977
> 
> 标签：android, android-animation

我想定制我的 Toast 的入口和出口动画。具体来说，我想让它立即出现（没有淡入）并像正常一样消失（淡出）。

有没有办法可以使用动画和吐司？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-23T16:32:31.313

Toast 使用无法更改的系统模板显示，因此简短的回答是“否”，您无法更改 Toast 动画。

但是，您可以制作类似于 toast 的自己的视图，并根据需要对其进行动画处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-11T18:50:48.577

使用现有的 Android Toast 类是不可能做到这一点的。Toast 类仅限于四个系统动画，并且不会接受来自您的项目的动画。

参见：[Android 为 Toast 添加自定义动画](https://stackoverflow.com/questions/18034362/android-add-custom-animation-to-toast/20527461#20527461)

# algorithm - 如何在 Haskell 中实现 Dijkstra 算法

> ID：14012603
> 
> 赞同：16
> 
> 时间：2012-12-23T16:26:27.227
> 
> 标签：algorithm, haskell, dijkstra, hugs

对于我的学习，我必须编写以下函数，它可以获取两国之间最短的路线。我已经编写了一个函数 isRoute 来检查两个国家之间是否存在连接，以及一个函数 yieldRoute 只返回两个国家之间的连接。现在我必须编写一个函数来返回两国之间的最短路线。

我的第一种方法是获取两国之间的所有连接，然后获取最短的一个，但在我看来，获取所有连接对编程来说有点烦人。现在我想出了实现 dijstra 算法的想法，但我实际上也觉得这有点难。你们能给我一些想法如何做到这一点吗？

我们必须使用这些类型（我们不允许更改它们，但我们可以添加新类型。）

```
type Country = String
type Countries = [Country]
type TravelTime = Integer -- Travel time in minutes
data Connection = Air Country Country TravelTime
    | Sea Country Country TravelTime
    | Rail Country Country TravelTime
    | Road Country Country TravelTime deriving (Eq,Ord,Show)
type Connections = [Connection]
data Itinerary = NoRoute | Route (Connections,TravelTime) deriving (Eq,Ord,Show) 
```

我的收益路线功能，它只是广度优先搜索：（德语评论很抱歉）

```
-- Liefert eine Route falls es eine gibt
yieldRoute :: Connections -> Country -> Country -> Connections
yieldRoute cons start goal 
            | isRoute cons start goal == False = []
            | otherwise                        = getRoute cons start [] [start] goal

getRoute :: Connections -> Country -> Connections -> Countries -> Country -> Connections
getRoute cons c gone visited target
            | (c == target) = gone 
            | otherwise  = if ( visit cons c visited ) then ( getRoute cons (deeper cons c visited) (gone ++ get_conn cons c (deeper cons c visited)) (visited ++ [(deeper cons c visited)]) target ) else ( getRoute cons (back (drop (length gone -1) gone)) (take (length gone -1) gone) visited target )

-- Geht ein Land zurück
back :: Connections -> Country
back ((Air c1 c2 _):xs) = c1
back ((Sea c1 c2 _):xs) = c1
back ((Rail c1 c2 _):xs) = c1
back ((Road c1 c2 _):xs) = c1

-- Liefert das nächste erreichbare Country
deeper :: Connections -> Country -> Countries -> Country
deeper ((Air c1 c2 _):xs) c visited
            | (c1 == c) = if ( c2 `elem` visited ) then ( deeper xs c visited ) else c2
            | (c2 == c) = if ( c1 `elem` visited ) then ( deeper xs c visited ) else c1
            | otherwise = deeper xs c visited
deeper ((Sea c1 c2 _):xs) c visited
            | (c1 == c) = if ( c2 `elem` visited ) then ( deeper xs c visited ) else c2
            | (c2 == c) = if ( c1 `elem` visited ) then ( deeper xs c visited ) else c1
            | otherwise = deeper xs c visited
deeper ((Rail c1 c2 _):xs) c visited
            | (c1 == c) = if ( c2 `elem` visited ) then ( deeper xs c visited ) else c2
            | (c2 == c) = if ( c1 `elem` visited ) then ( deeper xs c visited ) else c1
            | otherwise = deeper xs c visited
deeper ((Road c1 c2 _):xs) c visited
            | (c1 == c) = if ( c2 `elem` visited ) then ( deeper xs c visited ) else c2
            | (c2 == c) = if ( c1 `elem` visited ) then ( deeper xs c visited ) else c1
            | otherwise = deeper xs c visited

-- Liefert eine Connection zwischen zwei Countries
get_conn :: Connections -> Country -> Country -> Connections
get_conn [] _ _ = error "Something went terribly wrong"
get_conn ((Air c1 c2 t):xs) c3 c4 
            | (c1 == c3) && (c2 == c4) = [(Air c1 c2 t)]
            | (c1 == c4) && (c2 == c3) = [(Air c1 c2 t)]
            | otherwise                = get_conn xs c3 c4
get_conn ((Sea c1 c2 t):xs) c3 c4 
            | (c1 == c3) && (c2 == c4) = [(Air c1 c2 t)]
            | (c1 == c4) && (c2 == c3) = [(Air c1 c2 t)]
            | otherwise                = get_conn xs c3 c4
get_conn ((Road c1 c2 t):xs) c3 c4 
            | (c1 == c3) && (c2 == c4) = [(Air c1 c2 t)]
            | (c1 == c4) && (c2 == c3) = [(Air c1 c2 t)]
            | otherwise                = get_conn xs c3 c4
get_conn ((Rail c1 c2 t):xs) c3 c4 
            | (c1 == c3) && (c2 == c4) = [(Air c1 c2 t)]
            | (c1 == c4) && (c2 == c3) = [(Air c1 c2 t)]
            | otherwise                = get_conn xs c3 c4

-- Überprüft ob eine besuchbare Connection exestiert
visit :: Connections -> Country -> Countries -> Bool
visit [] _ _ = False
visit ((Air c1 c2 _):xs) c visited
                | (c1 == c) = if ( c2 `elem` visited) then ( visit xs c visited ) else True
                | (c2 == c) = if ( c1 `elem` visited) then ( visit xs c visited ) else True
                | otherwise = visit xs c visited
visit ((Sea c1 c2 _):xs) c visited
                | (c1 == c) = if ( c2 `elem` visited) then ( visit xs c visited ) else True
                | (c2 == c) = if ( c1 `elem` visited) then ( visit xs c visited ) else True
                | otherwise = visit xs c visited
visit ((Rail c1 c2 _):xs) c visited
                | (c1 == c) = if ( c2 `elem` visited) then ( visit xs c visited ) else True
                | (c2 == c) = if ( c1 `elem` visited) then ( visit xs c visited ) else True
                | otherwise = visit xs c visited
visit ((Road c1 c2 _):xs) c visited
                | (c1 == c) = if ( c2 `elem` visited) then ( visit xs c visited ) else True
                | (c2 == c) = if ( c1 `elem` visited) then ( visit xs c visited ) else True 
```

我现在必须写这个：

```
yieldFastestRoute :: Connections -> Country -> Country -> Itinerary 
```

Dijkstra 算法： [http ://en.wikipedia.org/wiki/Dijkstra%27s_algorithm](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)

我的第一种方法是：（正如我所说的 getallRoutes 有问题）

```
yieldFastestRoute :: Connections -> Country -> Country -> Itinerary
yieldFastestRoute cons start targ
            |(isRoute start targ == False) = NoRoute
            |otherwise                    = (Route (getFastest (getAllRoutes cons start targ)) (sumTT (getFastest (getAllRoutes cons start targ))))

-- Liefert alle Routen zwischen zwei Ländern
getAllRoutes :: Connections -> Country -> Country -> [Connections]

-- Liefert aus einer Reihe von Connections die schnellste zurück
getFastest :: [Connections] -> Connections
getFastest (x:xs) = if ( (sumTT x) < sumTT (getFastest xs) || null (getFastest xs) ) then x else ( getFastest xs )

sumTT :: Connections -> TravelTime
sumTT []                  = 0
sumTT ((Air _ _ t ): xs)  = t ++ sumTT xs
sumTT ((Rail _ _ t ): xs) = t ++ sumTT xs
sumTT ((Road _ _ t ): xs) = t ++ sumTT xs
sumTT ((Sea _ _ t ): xs)  = t ++ sumTT xs 
```

我基本上想知道在 Haskell 中实现 Dijkstra 的最佳方法是什么，或者我是否可以遵循另一种方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T19:30:48.550

您似乎已经编写了算法的大部分内容

这是 Martin Erwig 在 Haskell 的一个项目，可能有助于给你一些想法

```
--  SP.hs -- Dijkstra's Shortest Path Algorithm  (c) 2000 by Martin Erwig
module SP (
   spTree,spLength,sp,      -- shortest paths
   dijkstra
) where

import qualified Heap as H
import Graph
import RootPath
expand :: Real b => b -> LPath b -> Context a b -> [H.Heap (LPath b)]
expand d p (_,_,_,s) = map (\(l,v)->H.unit ((v,l+d):p)) s
dijkstra :: Real b => H.Heap (LPath b) -> Graph a b -> LRTree b
dijkstra h g | H.isEmpty h || isEmpty g = []
dijkstra h g =
    case match v g of
         (Just c,g')  -> p:dijkstra (H.mergeAll (h':expand d p c)) g'
         (Nothing,g') -> dijkstra h' g'  
    where (p@((v,d):_),h') = H.splitMin h

spTree :: Real b => Node -> Graph a b -> LRTree b
spTree v = dijkstra (H.unit [(v,0)])
spLength :: Real b => Node -> Node -> Graph a b -> b
spLength s t = getDistance t . spTree s
sp :: Real b => Node -> Node -> Graph a b -> Path
sp s t = map fst . getLPath t . spTree s 
```

其余[模块在这里](http://community.moertel.com/~thor/acm-contest-1996/FGL/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-10-12T17:15:49.393

编辑：以下实际上不是 Dijkstra。该算法称为 SPFA。

要实现该算法，您应该考虑所需的最少信息量，使用它来构建通用解决方案，然后将该解决方案应用于您的特定案例。

对于 Dijkstra，它关心的是：

*   识别节点
*   比较路径成本
*   确定从节点到哪里。

我们可以这样编码

```
import qualified Data.Set as Set

dijkstra
    :: (Ord cost , Ord node)
    => ((cost , node) -> [(cost , node)]) -- ^ Where we can go from a node and the cost of that
    -> node                               -- ^ Where we want to get to
    -> (cost , node)                      -- ^ The start position
    -> Maybe (cost , node)                -- ^ Maybe the answer. Maybe it doesn't exist
dijkstra next target start = search mempty (Set.singleton start)
    where
        search visited toBeVisited = case Set.minView toBeVisited of
            Nothing -> Nothing
            Just ((cost , vertex) , withoutVertex)
                | vertex == target            -> Just (cost , vertex)
                | vertex `Set.member` visited -> search visited withoutVertex
                | otherwise                   -> search visitedWithNode withNext
                where
                    visitedWithNode = Set.insert vertex visited
                    withNext = foldr Set.insert withoutVertex $ next (cost , vertex) 
```

现在您可以自由地表示您想要的图表，并将您的成本视为您想要的任何东西。

这是一个使用 Map 来表示小字符图的示例。

```
import Data.Maybe (fromMaybe)
import qualified Data.Map.Strict as Map

graph =
    Map.fromList
        [ ('a' , [(1 , 'b') , (5 , 'c')])
        , ('b' , [(2 , 'c')])
        , ('c' , [(1 , 'a') , (5 , 'b')])
        ]

-- Output:
-- Just (3,'c')
main = print $ dijkstra step 'c' (0 , 'a')
    where
        step :: (Int , Char) -> [(Int , Char)]
        step (cost , node) =
            [ (cost + edgeCost , child)
            | (edgeCost , child) <- fromMaybe [] $ Map.lookup node graph
            ] 
```

如果您不仅想知道从 A 到 B 的成本，还想知道完整的路径，您可以将此信息与您的成本一起存储。

```
data Path a = Path {cost :: Int , trajectory :: [a]}
    deriving (Show)

instance Eq (Path a) where
    a == b = cost a == cost b

instance Ord (Path a) where
    compare a b = compare (cost a) (cost b)

-- Output:
--     Just (Path {cost = 3, trajectory = "cba"},'c')
tryItOutWithPath = dijkstra step 'c' (Path 0 ['a'] , 'a')
    where
        step :: (Path Char , Char) -> [(Path Char , Char)]
        step (Path cost traj , node) =
            [ (Path (cost + edgeCost) (child : traj) , child)
            | (edgeCost , child) <- fromMaybe [] $ Map.lookup node graph
            ] 
```

# django - Django - 将此模式/模型与 ModelForms 一起使用时会遇到什么样的问题？

> ID：14012606
> 
> 赞同：0
> 
> 时间：2012-12-23T16:26:47.267
> 
> 标签：django, django-models, django-forms

我正在为一个新的 django 应用程序开发一个模型。该模型有点复杂，作为 Django 的新手，我需要知道在处理 ModelForm 时使用这种模式/模型会遇到什么样的问题。为了让这个模式正常工作，我必须添加一些额外的代码，这个模式还没有准备好 CRUD。

架构/模型：

![django 模式/模型](../Images/5cbf15d49ffa0f7ef3603f70db077903.png)

*   这个模式/模型是 Django 模型在设计方面应该是什么样子？
*   我将能够向 ModelForm 添加业务逻辑吗？

给我一些关于这种模型和 ModelForms 将面临什么问题的线索。

此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T16:38:58.450

我看到您有许多模型可以帮助您对实例类型进行分类或定义。这不是 django 方法，而是使用单独的模型。我建议做这样的事情：

```
BYCYCLE_AD_TYPE = (
  (db_value_1, "Show_value"),
  (db_value_1, "Show_value"),
  (db_value_2, "Show_value"),
)

class BicycleAd(models.Model):
  ad_type = models.PositiveIntegerField()
  ...Your other fields... 
```

# javascript - JavaScript bencode 二进制长度

> ID：14012608
> 
> 赞同：2
> 
> 时间：2012-12-23T16:26:53.383
> 
> 标签：javascript, file, binary

我正在尝试用 JavaScript 解码一个 torrent 文件，但长度不好。

```
path = "file.torrent";
$.ajax({
    url: path,
    success: function (data) {
        console.log(data.length);
    }
}); 
```

我在 PHP 中做了同样的事情，长度不同。

```
$f=file_get_contents($filename, FILE_BINARY);
var_dump(strlen($f)); 
```

我认为 ajax 方法不返回二进制文件。

如何在 JavaScript 中获得类似于 file_get_contents($filename, FILE_BINARY) 的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T16:33:45.080

您可以将`processData`开关设置为 false：

```
$.ajax({
    url: path,
    processData: false,
    success: function (data) {
        console.log(data.length);
    }
}); 
```

现在 jQuery 不会尝试智能并根据服务器返回的 Content-Type 响应标头自动解析数据，但会将其作为原始数据传递给成功回调。显然，在 javascript 中处理二进制数据并不是这种语言的设计目标。虽然 HTML5 有一些不错的补充。

另外值得一提的是，调用`.length`从服务器接收到的一些二进制数据可能没有多大意义，并且由于未定义此属性，您可能会收到 javascript 错误。

# scala - 如何使用无形在 scala 中实现 [x] -> x？

> ID：14012618
> 
> 赞同：2
> 
> 时间：2012-12-23T16:27:58.293
> 
> 标签：scala, shapeless

```
def unreturn(lx: Sized[List[Int], Nat._1]): Int = lx head 
```

如何使用无形获取一个元素列表的头部？这不编译：

```
No implicit view available from List[Int] =>
scala.collection.GenTraversableLike[v.A,List[Int]].

not enough arguments for method sizedOps:
(implicit evidence$2: List[Int] =>
scala.collection.GenTraversableLike[v.A,List[Int]])shapeless.
SizedOps[v.A,List[Int],shapeless.Nat._1]. Unspecified value parameter evidence$2. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T16:59:22.960

您只需要在参数的类型中包含类型成员：

```
def unreturn(lx: Sized[List[Int], Nat._1] { type A = Int }): Int = lx.head 
```

问题是*您*知道没有（安全）方法可以`Sized[List[Int], _1]`与任何 other构建 a `A`，但编译器仍然需要证据。

# java - 将武器添加到库存

> ID：14012626
> 
> 赞同：0
> 
> 时间：2012-12-23T16:29:10.550
> 
> 标签：java, class, interface

我正在尝试将武器添加到玩家库存中。这有点难以解释，所以我会尽力而为。我拥有的是每种武器的类、战斗类和玩家类。我试图让它到达随机数等于某个数字时的位置，它将向玩家库存添加武器。我将把我的代码放在下面。

战斗等级：

```
public class Combat {

M4 m4 = new M4();
M16 m16 = new M16();
M9 m9 = new M9();
Glock glock = new Glock();
SCAR Scar = new SCAR();

Player player = new Player();
final int chanceOfDrop = 3;

static boolean[] hasWeapon = {false, true};

public static int  ranNumberGen(int chanceOfDrop) {
    return (int) (Math.random()*5); 
}

private void enemyDead() {
    boolean canDrop = false;
    if(ranNumberGen(chanceOfDrop)==0){
        canDrop = true;

    }

    if(canDrop == true){

        if(ranNumberGen(0) == 1) {

            Player.addInvetory(m4.weaponName(wepName), m4.weaponAmmo(wepAmmo)); //Issues here.  wepName & wepAmmo cannot be resolved into variable
            //Should I just delete the line?
            //Trying to get it to add the weapon M4 to the player inventory.  
            //Maybe use an ArrayList? If so I need a couple pointers on how to implement this.  
        }

    }
    }
} 
```

M4级：

```
public class M4 implements Armory {
//Weapon classes are practically identical except for differences in the name wepDamage and wepAmmo.
public Integer weaponAmmo(int wepAmmo) {
    wepAmmo = 10;
    return wepAmmo;
}

public Integer weaponDamage(int wepDamage) {
    wepDamage = 5;
    return wepDamage;
}

public String weaponName(String wepName) {
    wepName = "M4";
    return wepName;
} 
```

玩家等级：

```
public class Player {
public static int health = 100;

//Player Class.

public static void addInvetory(String wepName, int wepAmmo) {

    Player.addInvetory(wepName, wepAmmo);
}

public static void removeInventory(String wepName, int wepAmmo) {

    Player.addInvetory(wepName, wepAmmo);
}

public static void removeAll(String wepName, int wepAmmo) {
    Player.removeAll(wepName, wepAmmo);
} 
```

界面：

```
public interface Armory {

//Interface implemented by all of the weapons classes.
public Integer weaponAmmo(int wepAmmo);
public Integer weaponDamage(int wepDamage);
public String weaponName(String wepName); 
```

希望你能帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T00:19:59.940

```
 class Weapon {
     private final String name;
     private final int damage;
     private final int ammo;
     public Weapon(final String name,final  int damage,final  int ammo) {
         this.name = name;
         this.damage = damage;
         this.ammo = ammo;
     }
     public Weapon clone() {
         return new Weapon(this.name,this.damage,this.ammo);
     }
     public String getName() {
         return this.name;
     }
     public int getAmmo() {
         return this.ammo;
     }
     public int getDamage() {
         return this.damage;
     }
 }

 class WeaponFactory {
      static WeaponFactory factory;
      public static WeaponFactory getWeaponFactory() {
           if(factory == null) {
               factory = new WeaponFactory();
           }
           return factory;
      }
      private ArrayList<Weapon> weapons = new ArrayList<Weapon>();
      private Random random;
      private WeaponFactory() {
           //TODO: Fix Ammo and Damage
           weapons.add(new Weapon("M4",0,0));
           weapons.add(new Weapon("M16",0,0));
           weapons.add(new Weapon("M9",0,0));
           weapons.add(new Weapon("Glock",0,0));
           weapons.add(new Weapon("SCAR",0,0));
      }
      public Weapon getWeapon() {
          int w = random.nextInt(weapons.length);
          return weapons.get(w).clone();
      }
 }

 class Combat {
      ...
      private void enemyDead() {
           if(ranNumberGen(chanceOfDrop)==0){
                 Player.addInventory(WeaponFactory.getWeaponFactory().getWeapon());
           }
      }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T16:31:37.890

您可以使用一个数组`Armory`并生成一个从 0 到数组大小的随机数作为数组的索引来决定添加哪种武器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T00:07:12.733

好的，伙计，既然你关于创建编程语言的问题已经结束，我在这里回答：

我觉得你的想法很棒！不要放弃它，但不要太兴奋。我会尝试您听说过的所有选项（解释路线和编译路线）。如果您可以让其中任何一个工作，那么您可以继续深入了解语言创建的细节。不过这需要一段时间。耐心点！

# javascript - 对象原型方法与值

> ID：14012627
> 
> 赞同：0
> 
> 时间：2012-12-23T16:29:13.067
> 
> 标签：javascript

我对我的代码发生了什么有点困惑，这是我到目前为止所拥有的：

```
function Person(name) {
    this.name = name;
}

Person.prototype.getName = this.name;
Person.prototype.displayName = function() {
    return this.name;
}

var Sethen = new Person("Sethen");

console.log(Sethen.getName);
console.log(Sethen.displayName()); 
```

我很好奇为什么`getName`不给我这个`this.name`值而只记录空白，而该`displayName`方法给了我正确的值。 `getName`是我的原型对象的一个​​属性，所以我的想法是我可以像这样抓住它。

为什么不`getName`记录 的值`Sethen`？我将如何像普通财产一样获取这些信息？我必须使用一种方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T16:31:42.677

因为`this`运行该代码时的值并不是您认为的值。`this`可能等于全局对象（即`window`）。

由于您`displayName`通过在其前面加上`Person`对象的实例来调用和设置上下文，因此`this`在函数内部正确设置了该人的姓名。

当然，您始终可以`name`直接访问该属性 ( `Sethen.name`)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T17:13:27.477

问题在于它不是一个函数，而是一个在构造对象之前首次赋值`getName`时被赋值的属性。因此，它不可能包含任何特定 Person 对象的值。`Person.prototype.getName``Person`

在创建原型时，您根本无法访问对象的实例数据，因为还没有`Person`对象存在，因此还没有实例数据，因此`this`不指向`Person`对象。

相反，在您的代码中为对象`Person.prototype.getName = this.name;`分配`prototype`一个值，或者在严格模式下将导致错误，因为将是未定义的。`this.name``window.name``this`

可以为原型分配函数或代码初始化期间已经存在的任何数据。分配给原型的事物对于您创建的该类型的所有对象都将具有相同的值。这就是为什么为它们分配功能/方法最有用的原因。

您可以通过这种方式实现它以获取给定 Person 对象的值：

```
function Person(name) {
    this.name = name;
}

Person.prototype.getName() = function() { 
    return this.name;
}

var Sethen = new Person("Sethen");

console.log(Sethen.getName()); 
```

另一种选择是直接访问该`.name`属性：

```
function Person(name) {
    this.name = name;
}
var Sethen = new Person("Sethen");
console.log(Sethen.name); 
```

# opengl - 如何使用 VAO 实现光线追踪

> ID：14012631
> 
> 赞同：1
> 
> 时间：2012-12-23T16:30:01.877
> 
> 标签：opengl, shader

可以说我有一个 VAO 创建一个棋盘。

它使用一个简单的着色器由法线、顶点和索引组成，该着色器通过使用坐标上的模函数来交替着色板......

我将如何实施拣货？

我从这里的其他线程中发现，光线追踪是要走的路，但那是我很难实现的地方。

数据由 Vector3 组成，用于顶点和法线，uint 用于索引。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T16:52:45.920

如果您实现了光线相交方法，那么拥有 VAO 或 VBO 就完全无关紧要了，因为您不会为此使用 OpenGL。您可以在 CPU 上手动进行数学运算。

# android - Android 自定义视图性能

> ID：14012638
> 
> 赞同：1
> 
> 时间：2012-12-23T16:30:57.350
> 
> 标签：android, view

这是这种情况 - 我的根布局是滚动视图 - 具有多个绘图操作的自定义视图嵌入在布局中 我的问题是，如果布局被滚动，那么 customview.ondraw() 将被多次调用。由于 ondraw() 中有很多操作，我的性能受到了影响。

最好的策略是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T16:40:01.347

请参阅 View.setDrawingCacheEnabled() 上的文档。请注意，您必须在 onDraw 实现中调用 getDrawingCache()，如果 getDrawingCache() 返回非空值，则绘制返回的位图。我不确定 ScrollView 是否会自动调用 setDrawingCacheEnabled。你必须尝试一下并找出答案。我认为确实如此；但是您仍然需要在 onDraw 例程中调用 getDrawingCache() 。

这会处理非硬件加速的情况。

对于硬件加速视图，请参阅 setLayerType 的文档。缓存硬件加速视图实际上提供了性能改进，这远非既定事实，因此请谨慎行事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T16:42:55.743

忘记了 Android 中方法的名称，但是有一个带有拆分窗格的 Swing 演示。

如果将标志设置为 true（连续更新），则在您移动吐出组件时，拆分面板正在绘制。滚动也有同样的效果。只有在滚动完成时，您才能连续使用绘图和另一个绘图。iOS 也是如此。

您需要找到这些方法，并在需要时嵌入您的自定义视图绘图。

# php - 函数 mysql_real_escape_string 的 PDO 等价物是什么？

> ID：14012642
> 
> 赞同：47
> 
> 时间：2012-12-23T16:32:03.730
> 
> 标签：php, mysql, pdo, sql-injection

我正在修改我的代码，从使用`mysql_*`to `PDO`。在我的代码中，我有`mysql_real_escape_string()`. 在 PDO 中这个等价物是什么？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-12-23T16:38:23.733

嗯，不，没有！

从技术上讲有，[**`PDO::quote()`**](http://php.net/manual/en/pdo.quote.php)但很少使用，也不等同于[**`mysql_real_escape_string()`**](http://php.net/manual/en/function.mysql-real-escape-string.php)

**这是正确的！**如果您已经按照使用[准备好的语句](http://ch1.php.net/pdo.prepared-statements)记录的正确方式使用 PDO ，那么它将保护您免受 MySQL 注入。

* * *

### #`Example:`

下面是使用准备好的语句 (pdo) 进行*安全*数据库查询的示例

```
 try {
     // first connect to database with the PDO object. 
     $db = new \PDO("mysql:host=localhost;dbname=xxx;charset=utf8", "xxx", "xxx", [
       PDO::ATTR_EMULATE_PREPARES => false, 
       PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION
     ]); 
 } catch(\PDOException $e){
     // if connection fails, show PDO error. 
   echo "Error connecting to mysql: " . $e->getMessage();
 } 
```

而且，现在假设连接已建立，您可以像这样执行查询。

```
if($_POST && isset($_POST['color'])){ 

    // preparing a statement
    $stmt = $db->prepare("SELECT id, name, color FROM Cars WHERE color = ?");

    // execute/run the statement. 
    $stmt->execute(array($_POST['color']));

    // fetch the result. 
    $cars = $stmt->fetchAll(\PDO::FETCH_ASSOC); 
    var_dump($cars); 
 } 
```

现在，您可能会说，我没有使用任何东西来转义/清理`$_POST["color"]`. 并且由于 PDO 和预准备语句的强大功能，这段代码不会受到 myql-injection 的影响。

* * *

值得注意的是，出于安全原因，您应该`charset=utf8`在如上所示的那样传递 as 属性，`DSN`并始终启用 PDO 以异常形式显示错误。

```
PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION 
```

因此，来自您的数据库查询的错误不会泄露敏感数据，例如您的目录结构、数据库用户名等。

最后但并非最不重要的一点是，有时您不应该 100% 信任 PDO，并且必然会采取一些额外的措施来防止 sql 注入，其中一种情况是，如果您使用的是过时版本的 mysql `[ mysql =< 5.3.6 ]`，如[本文所述回答](https://stackoverflow.com/questions/134099/are-pdo-prepared-statements-sufficient-to-prevent-sql-injection/12202218#12202218)

但是，使用如上所示的准备好的语句总是比使用任何以`mysql_`

好读

### [MySQL 开发人员的 PDO 教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-12-23T16:34:19.240

空无一人*！PDO 的目标是您不必逃避任何事情；您只需将其作为数据发送。例如：

```
$query = $link->prepare('SELECT * FROM users WHERE username = :name LIMIT 1;');
$query->execute([':name' => $username]); # No need to escape it! 
```

相对于：

```
$safe_username = mysql_real_escape_string($username);
mysql_query("SELECT * FROM users WHERE username = '$safe_username' LIMIT 1;"); 
```

[* 好吧，正如迈克尔·伯科夫斯基所说，有一个！但是还有更好的方法。]

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-12-14T13:39:33.283

```
$v = '"'.mysql_real_escape_string($v).'"'; 
```

相当于`$v = $this->db->quote($v);` 确保您有一个 PDO 实例，`$this->db`因此您可以调用 pdo 方法`quote()`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-07-25T13:08:03.383

PDO中不需要**mysql_real_escape_string**。

PDO本身在mysql查询中调整特殊字符，你只需要传递匿名参数并绑定它运行时间。像这样假设你有一个带有属性名称，电子邮件和密码的用户表，你必须像这样插入这个使用准备语句，你可以传递名称 => $name="Rajes'h";

它应该执行不需要等效的**mysql_real_escape_string**

```
$stmt="INSERT into user(name,email,password) VALUES(:name,:email,:password)";
try{
   $pstmt=$dbh->prepare($stmt);//$dbh database handler for executing mysql query
   $pstmt->bindParam(':name',$name,PDO::PARAM_STR);
   $pstmt->bindParam(':email',$email,PDO::PARAM_STR);
   $pstmt->bindParam(':password',$password,PDO::PARAM_STR);
   $status=$pstmt->execute();
   if($status){
    //next line of code 
   }

}catch(PDOException $pdo){
     echo $pdo->getMessage();
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-09-04T09:58:38.107

针对这里很多人的评论，但我还不能直接评论（未达到50分），`$dbh->quote($value)`使用PDO时实际上需要使用EVEN，它们是完全正当的理由......

1.  如果您正在循环构建“BULK INSERT”命令的许多记录，（我通常在 1000 条记录上重新启动）由于利用 MySQL/Maria Db 中的 InnoDb 表。使用准备好的语句创建单独的插入命令很简洁，但在执行批量任务时效率非常低！
2.  PDO 还不能处理动态 IN(...) 结构，因此当您从用户变量列表构建 IN 字符串列表时，您将需要`$dbh->quote($value)`列表中的每个值！

所以是的，`$dbh->quote($value)`在使用 PDO 时需要，这可能是该命令首先可用的原因。

PS，您仍然不需要在命令周围加上引号，该`$dbh->quote($value)`命令也会为您执行此操作。

出去。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2015-12-05T10:02:12.863

如果要回答原始问题，那么这是 PDO 等效项`mysql_real_escape_string`：

```
function my_real_escape_string($value, $connection) {
    /* 
    // this fails on: value="hello'";
    return trim ($connection->quote($value), "'");
    */
    return substr($connection->quote($value), 1, -1);       
} 
```

顺便说一句，mysqli 等价物是：

```
function my_real_escape_string($value, $connection) {
    return mysqli_real_escape_string($connection, $value);
} 
```

# java - Inputstream.available() 总是返回 0

> ID：14012648
> 
> 赞同：3
> 
> 时间：2012-12-23T16:32:40.867
> 
> 标签：java

我遇到了一些愚蠢的问题，我不知道我在做什么错。

我写了客户端和服务器，客户端工作正常。我检查了输出流在客户端中是否正常工作，有字节，但是在服务器中，当客户端连接时，方法 in.avaible() 总是返回零？为什么？

我的服务器的一些代码：

```
 try{
            serverSocket = new ServerSocket(port);
        }
        catch (IOException e){
            System.err.println("Could not listen on port: " + port);
            return false;
        }
        System.out.println("Server Started");
        txtServer.setText("Server wystartował");
        return true;
        }
        else{
        txtPort.setText("Brak Portu!");
        txtPort.setBorder( BorderFactory.createLineBorder(Color.RED) );
        return false;}
    }

    @Override
    public void run() { 
        try{
            clientSocket = serverSocket.accept();
            data.clear();

            System.out.println("Client connected");
            cl_obs = new Client_obs(clientSocket, data);
            Thread t = new Thread(cl_obs);
            t.start();
        }
        catch (IOException e){
            System.err.println("Accept failed.");
            System.exit(1);
        }           

    }
          package Server;
          import java.io.IOException;
          import java.io.InputStream;
          import java.net.Socket;

          public class Client_obs implements Runnable {
      private InputStream in;
      private data data;
      private Socket clientSocket = null;
      public Client_obs(Socket cl, data data1){
        clientSocket =cl;
        data = data1;
    }
    @Override
    public void run() {
        try {
            in = clientSocket.getInputStream();
            byte[] data1 = new byte[in.available()];;           
            for (int i=0; i<data1.length; i++){
            data1[i] = (byte)in.read();
            }
            data.setData(data1);
            data.displayMSG(data.getdata());
            in.close();
            clientSocket.close();

        }
        catch(IOException e){
            e.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-23T16:37:43.067

[这是一个完全合法的实施](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#available%28%29)。

> 返回可以从此输入流中读取（或跳过）的字节数的估计值，而不会被下一次调用此输入流的方法阻塞。下一次调用可能是同一个线程或另一个线程。单次读取或跳过这么多字节不会阻塞，但可能会读取或跳过更少的字节。请注意，虽然 InputStream 的某些实现会返回流中的字节总数，但许多不会。*使用此方法的返回值来分配用于保存此流中所有数据的缓冲区是不正确的*。
> 
> 如果此输入流已通过调用 close() 方法关闭，则此方法的子类的实现可以选择抛出 IOException。
> 
> InputStream 类的可用方法总是返回 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T16:41:31.760

您应该查看该方法的[文档](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#available%28%29)`available`。对于某些实现，不可能知道可用的确切字节数。因此 0 是这些实现的有效结果：

> 请注意，虽然 InputStream 的某些实现会返回流中的字节总数，但许多不会。使用此方法的返回值来分配旨在保存此流中所有数据的缓冲区是不正确的。
> 
> ...
> 
> InputStream 类的可用方法总是返回 0。

# php - MySQLi循环查询变量

> ID：14012649
> 
> 赞同：2
> 
> 时间：2012-12-23T16:32:44.397
> 
> 标签：php, mysql, mysqli

大家晚上好。

我目前正在做一个小型的个人项目。它的目的是从我后端的数据库中检索大量值并将它们存储为变量。然后使用这些变量来修改一些 HTML5 Canvas 对象的外观（在这种情况下，我使用的是弧线）。

请注意，数据库中的值是`Text`，因此我的绑定语句引用了它。我正在调用的查询（AVG，MIN，MAX）与我获得的值一起工作，因为字段存储数字数据（这仅仅是由于另一个处理添加或更新数据的脚本 - 这已经在运行`MySQLi`，并且使用`Text`是我情况的最佳解决方案）。

现在，我用标准的 MySQL 查询实现了我想要的，但它的代码很混乱，而且随着数据库的增长，它的性能可能会变得很糟糕。出于这个原因，我想使用循环。我也觉得`bind_param`MySQLi 的安全性要好得多。该页面不接受任何用户输入，它仅用于显示，因此注入问题不大，但在将来的某个时候，我将寻求扩展它以允许用户控制显示的内容。

这是我原始 MySQL PHP 代码示例的示例；

```
$T0A = mysql_query('SELECT AVG(Temp0) FROM VTempStats'); // Average
$T0B = mysql_query('SELECT MIN(Temp0) FROM VTempStats'); // Bottom/MIN
$T0T = mysql_query('SELECT MAX(Temp0) FROM VTempStats'); // Top/MAX
$T1A = mysql_query('SELECT AVG(Temp1) FROM VTempStats'); // Average
$T1B = mysql_query('SELECT MIN(Temp1) FROM VTempStats'); // Bottom/MIN
$T1T = mysql_query('SELECT MAX(Temp1) FROM VTempStats'); // Top/MAX

$r_T0A = mysql_result($T0A, 0);
$r_T0T = mysql_result($T0T, 0);
$r_T0B = mysql_result($T0B, 0);
$r_T1A = mysql_result($T1A, 0);
$r_T1T = mysql_result($T1T, 0);
$r_T1B = mysql_result($T1B, 0);

if ($r_T0A == "" ) {$r_T0A = 0;}
if ($r_T1A == "" ) {$r_T1A = 0;}

if ($r_T0B == "" ) {$r_T0B = 0;}
if ($r_T1B == "" ) {$r_T1B = 0;}

if ($r_T0T == "" ) {$r_T0T = 0;}
if ($r_T1T == "" ) {$r_T1T = 0;} 
```

这比原来的要短，因为有 4x3 组查询（Temp0、Temp1、Temp2、Temp3 和 min、max、avg）。请注意，最后 6`if`条语句仅用于确保在我的画布脚本尝试使用它们之前将空字段自动设置为 0（见下文）。

为了在弧上显示该值，我会在我的画布脚本中使用它（例如）；

```
var endAngle = startAngle + (<?= $r_T0A ?> / 36+0.02); 
```

它对我有用，所显示的正是我所期望的。

现在，在尝试清理我的代码并转到循环和 MySQLi 时，我遇到了问题。作为 SQL 和 PHP 的新手，我可以使用一些帮助。

这就是我尝试过的；

```
$q_avg = "SELECT AVG(Temp?) FROM VTempStats";
    for ($i_avg = 0; $i_avg <= 3; ++$i_avg)
    {
        if ($s_avg = $mysqli->prepare($q_avg))
        {
            $s_avg->bind_param('s',$i_avg);
            $s_avg->execute();
            $s_avg->bind_result($avg);
            $s_avg->fetch();
            echo $avg;
        }
    } 
```

**注意：** `mysqli`是 MySQLi 连接。我已将代码缩减为仅显示`AVG`查询循环，但`MIN`and`MAX`循环几乎相同。

显然，这是行不通的，因为它只为每组查询分配一个变量，而不是为每个循环分配 4 个变量。

你可以想象，我想做的是将所有 12 个值分配给各个变量，以便我可以在我的画布脚本中使用它们。我不完全确定我是怎么做的。

我可以通过 MySQLi 回显单个值，或者我可以通过 MySQLi 查询数据库以更改或添加数据，但是尝试创建一个循环来执行我对 MySQLi（甚至 MySQL）的预期，这是我需要帮助的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T16:53:25.210

根据我对您的代码的阅读，您有固定数量的列并且知道它们的名称，并且您正在将`AVG(), MIN(), MAX()`聚合应用于同一聚合组中的同一个表，而没有`WHERE`应用任何子句。因此，它们都可以在*一个查询*中完成，您只需要从中获取一行。

```
SELECT
  AVG(Temp0) AS a0,
  MIN(Temp0) AS min0,
  MAX(Temp0) AS max0,
  AVG(Temp1) AS a1,
  MIN(Temp1) AS min1,
  MAX(Temp1) AS max1,
  AVG(Temp2) AS a2,
  MIN(Temp2) AS min2,
  MAX(Temp2) AS max2,
  AVG(Temp3) AS a3,
  MIN(Temp3) AS min3,
  MAX(Temp3) AS max3
FROM VTempStats 
```

这可以在一次调用中完成`$mysqli->query()`，并且不需要参数绑定，因此您不需要`prepare()`. 需要一次调用来`fetch_assoc()`检索单行，列的别名就像`a0, min0, max0, etc...`我上面所做的那样。

```
// Fetch one row
$values = $result_resource->fetch_assoc();
print_r($values);
printf("Avg 0: %s, Min 0: %s, Max 0: %s... etc....", $values['a0'], $values['min0'], $values['max0']); 
```

可以使用 将它们拉入全局范围[`extract()`](http://us3.php.net/manual/en/function.extract.php)，但我建议不要这样做。将它们保留在`$values`数组中会使它们的来源更加明确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T16:58:54.817

*你可以想象，我想做的是将所有 12 个值分配给各个变量，以便我可以在我的画布脚本中使用它们。我不完全确定我是怎么做的。*

明白了。这就是我要做的。

```
<?php // RAY_temp_scottprichard.php
error_reporting(E_ALL);
echo '<pre>';

// RANGE OF TEMPS
$temps = range(0,3);

// RANGE OF VALUES
$funcs = array
( 'A' => 'AVG'
, 'B' => 'MIN'
, 'T' => 'MAX'
)
;

// CONSTRUCT THE QUERY STRING
$query = 'SELECT ';
foreach ($temps as $t)
{
    foreach ($funcs as $key => $func)
    {
        $query .= PHP_EOL
        . $func
        . '(Temp'
        . $t
        . ') AS '
        . 'T'
        . $t
        . $key
        . ', '
        ;
    }
}

// DECLOP THE UNWANTED TRAILING COMMA
$query = rtrim($query, ', ');

// ADD THE TABLE NAME
$query .= ' FROM VTempStats';

// ADD ANY ORDER, LIMIT, WHERE CLAUSES HERE
$query .= ' WHERE 1=1';

// SHOW THE WORK PRODUCT
var_dump($query); 
```

在此处查看输出查询字符串：http: [//www.laprbass.com/RAY_temp_scottpritchard.php](http://www.laprbass.com/RAY_temp_scottpritchard.php)

当您运行此查询时，您将使用 *mysql_fetch_assoc()* 或等效项获取一行，并且它将在该行中包含您想要的所有变量，并带有命名键。然后，您可以使用类似的方法将变量名称和值注入到您的脚本中。 [http://php.net/manual/en/function.extract.php](http://php.net/manual/en/function.extract.php)

PHP extract() 允许使用前缀，因此您应该能够避免对现有脚本进行太多更改。

HTH，~雷

# android - 在 Java 代码中将 EditText 设置为私有字段会导致错误

> ID：14012652
> 
> 赞同：1
> 
> 时间：2012-12-23T16:33:48.250
> 
> 标签：android, button, android-edittext, private

下面的代码片段，

公共类RelativeActivity扩展活动{

```
//  private Button ok_btn = (Button) findViewById(R.id.ok);
//  private EditText edit = (EditText) findViewById(R.id.editText01);
@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_relative);

    Button ok_btn = (Button) findViewById(R.id.ok);
    final EditText edit = (EditText)findViewById(R.id.editText01);
    ok_btn.setOnClickListener(new OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
            Toast.makeText(getApplicationContext(), edit.getText().toString(), Toast.LENGTH_LONG).show();

        }
    });
} 
```

这是正确的，但是如果我将这个 Button 实例 ok_btn 和这个 EditText 实例都设置为私有字段，如代码顶部注释掉的行所示，这会导致错误，为什么？先感谢您，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T16:37:02.117

`findViewById()`你得到一个错误，因为你在调用之前尝试使用`setContentView()`. 如果您使用：

```
private Button ok_btn;
private EditText edit;
@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_relative);

    ok_btn = (Button) findViewById(R.id.ok);
    edit = (EditText)findViewById(R.id.editText01);
    ok_btn.setOnClickListener(new OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
            Toast.makeText(getApplicationContext(), edit.getText().toString(), Toast.LENGTH_LONG).show();

        }
    });
} 
```

你不会得到错误，因为你在调用`findViewById()`之后调用`setContentView()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T16:38:45.030

```
//  private Button ok_btn = (Button) findViewById(R.id.ok);
//  private EditText edit = (EditText) findViewById(R.id.editText01);
@Override
protected void onCreate(Bundle savedInstanceState) 
{
  // your code.. 
```

此代码在运行时出错，因为您在为当前窗口（活动）设置布局之前尝试了两个访问按钮和 EditText。在默认的 Activity 布局中，这些到 Ui 元素不会退出，这就是您收到错误的原因。

解决方案，如果您只是在 Activity 的 onCreate 方法之前声明所有 UI 元素，并在设置已添加的 Ui 元素的 Activity 布局后初始化所有 UI 元素。

例如在您的代码中：

```
public class RelativeActivity extends Activity {

//****************** DECLARE ALL UI ELEMENTS HERE ****************/
private Button ok_btn;
private EditText edit;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_relative);

 //***************** INITIALIZE ALL ELEMENTS HERE AFTER setContentView

     ok_btn = (Button) findViewById(R.id.ok);
     edit = (EditText)findViewById(R.id.editText01);

    ok_btn.setOnClickListener(new OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
            Toast.makeText(getApplicationContext(), 
             edit.getText().toString(), Toast.LENGTH_LONG).show();

        }
    });
} 
```

# c# - 值类型有 Type 对象吗？

> ID：14012664
> 
> 赞同：5
> 
> 时间：2012-12-23T16:36:12.240
> 
> 标签：c#, .net, clr

我确定标题是否具有解释性，但我需要一些帮助来理解这个概念。

我们有具有与 Type 对象关联的方法表的类（引用类型）。除了方法表之外，类型对象还包含所有静态字段、类型 obj 指针和同步块索引。

CLR 在对引用类型的实例调用方法时引用此方法表。

方法表包含用于更改实例字段状态的特定方法的 IL。

同样，我们可以为结构（值类型）定义方法。

**在运行时，当在值类型上调用方法时，CLR 从哪里引用在值类型的实例上被调用的方法的 IL。**

```
struct A
{
    // for Immutability of value type
    public readonly int a;

    public void MethodOnValueType()
    {
        // Some code here
    }
} 
```

**CLR 指的是在哪里找到名为“MethodOnValueType”的方法的 IL？**

**托管堆中的值类型是否有任何类型对象？**

**我确信引用类型的情况，但对值类型感到困惑。**

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T16:46:28.593

值类型有`Type`对象，就像类一样。

```
Type intType1 = typeof(int);
Type intType2 = 100.GetType();

Debug.Assert(ReferenceEquals(intType1, intType2)); 
```

对于结构和类，对非虚拟方法的分派本质上是相同的。

虚拟方法涉及在 v-tables 中查找，这是引用类型的属性。如果您声明一个定义接口的结构，然后通过该接口调用它，它将自动装箱为引用类型，以便可以调用此虚拟成员。

希望能有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T16:59:53.780

值类型上的方法不支持多态性（从对象继承的方法除外，这些方法的执行取决于它们是否被覆盖）：调用是静态调用（不是虚拟调用）。基本上，调用信息的“什么方法”部分由编译器解析并烧录到IL中。然后，JIT 的工作就是将该调用连接到最终的方法代码。

值类型上没有对象头等。

您可以获得值类型的 Type 对象，但这与方法调用无关。

# symfony - 创建一个简单的表格

> ID：14012670
> 
> 赞同：4
> 
> 时间：2012-12-23T16:37:39.773
> 
> 标签：symfony

只想在 Symfony 2.1 中创建一个简单的联系表格。如何？

联系表格.php：

```
namespace frontend\mainBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class ContactForm extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder->add('subject', 'textarea');
        $builder->add('email', 'email');
        $builder->add('message', 'textarea');
    }
    public function getName()
    {
        return 'contact';
    }

} 
```

DefaultController.php

```
namespace frontend\mainBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use mylib\DataFormatChecker;
use frontend\mainBundle\Form\ContactForm;
use Symfony\Component\HttpFoundation\Request;

class DefaultController extends Controller
{

        public function contactAction(Request $request)
    {

        $task = array();
        $form = $this->createFormBuilder(new ContactForm(), $task);  
        if ($request->getMethod() == 'POST') {
        $form->bindRequest($request);

        if ($form->isValid()) {
            // perform some action, such as saving the task to the database

            //return $this->redirect($this->generateUrl('task_success'));
        }
    }
    return $this->render('frontendmainBundle:Default:contact.html.php', array(
        'form' => $form->createView()
    ));
    }
} 
```

错误：在 ContactForm 的第 8 行声明 frontend\mainBundle\Form\ContactForm::buildForm() 必须与 Symfony\Component\Form\FormTypeInterface::buildForm(Symfony\Component\Form\FormBuilderInterface $builder, array $options) 兼容.php。

怎么了？

不好意思，用过symfony 1.4

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T17:00:21.957

实际上，该错误与 symfony 无关。这是因为`buildForm`函数的声明与基类（AbstractType）的声明不匹配。的第一个参数`buildForm`必须是的实例，`FormBuilderInterface`而您的第一个参数是的实例`FormBuilder`

```
// ...
use Symfony\Component\Form\FormBuilderInterface;

class ContactForm extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    // ... 
```

# java - 如何在 Java 中声明多维数组或结构

> ID：14012672
> 
> 赞同：-2
> 
> 时间：2012-12-23T16:37:56.300
> 
> 标签：java, arrays

我在 PHP 中有这种结构，但我不确定如何将它翻译成 Java，我需要提一下所有键和值都是字符串。

如需积分，请举例说明

```
private $group = array(
     "group1" = array("item1","item2"),
     "group2" = array("item3","item4"),
     ....
     "groupn" = array("itemn","itemn+1"),
     ....
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T16:42:39.930

> PHP 中的数组实际上是一个有序映射。映射是将值与键相关联的类型。[来源](http://php.net/manual/en/language.types.array.php)

Java 使用数组的真实定义。你想要的是一个[`Map`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T16:54:01.077

```
 Map<String, List<String>> group = new LinkedHashMap<String, List<String>>();
   group.put("group1", new ArrayList<String>(Arrays.asList("item1", "item2")));
   group.put("group2", new ArrayList<String>(Arrays.asList("item3", "item4"))); 
```

在 php 中，如果您使用 foreach 遍历元素

```
foreach ($group as $key => $subarray) 
```

您可以保证第一个 $key 是“group1”，因为 php 数组是按密钥创建时间隐式排序的。如果你想在 java 中得到同样的保证，你必须使用`LinkedHashMap`. 否则一个普通`HashMap`的就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T16:41:24.973

```
HashMap<String, ArrayList<String>> map = new HashMap<String, ArrayList<String>>();
ArrayList<String> list = new ArrayList<String>();
list.add("item1");
list.add("item2");
map.add("group1", list); 
```

等等...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T16:41:34.560

使用`Map<String, Collection<String>>`. 如果集合中的值是唯一的，则使用 a `Set`，否则使用 a `List`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-23T16:42:16.553

您可以使用 a`Map`作为您的解决方案：

```
Map<String, List<String>> map = new HashMap<String, List<String>>();
map.put("group1", Arrays.asList("item1", "item2", "item3"); 
```

ETC...

# php - 数据库设计，用户与订单模型的关系

> ID：14012673
> 
> 赞同：0
> 
> 时间：2012-12-23T16:38:19.793
> 
> 标签：php, activerecord, one-to-many, laravel

我正在构建一个具有用户和订单的 Web 应用程序。我有一个关于如何处理两者之间关系的问题。

订单属于用户。但这是一个转折点，用户可以选择将订单外包给另一个用户。

当订单外包时，原始用户仍然是所有者，只有他可以修改订单上的某些内容，例如价格、数量等。订单外包给的用户可以查看一些订单信息，并可以更新订单上的特定属性，例如标记为已完成。外包订单应显示在两个用户的“订单索引”上。

所有用户都是“平等的”，这意味着在某些订单上，用户可能是所有者，而在其他订单上，他可能正在履行订单。用户也可以履行他自己的订单。

这似乎不是真正的多对多关系，因为其中一位用户并不真正拥有该订单，他只是对它的访问权限有限。

处理此订单/用户关系的最简单方法是什么？我想避免使用完整的权限系统，有没有办法用“外包”表简单地处理这个问题？在订单表上有一个 user_id 和 outsourced_to 字段怎么样？

感谢您的输入！

如果有任何帮助，该应用程序使用 Laravel。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:04:43.567

您的 Orders 表似乎与 Users 表有两个独立的关系。订单与用户具有拥有/拥有关系。

```
Users(1) -- owns -- (*)Orders 
```

一个用户可以拥有多个订单。一份订单仅由一名用户拥有

然后在订单和用户之间有一个完全独立的外包关系。

```
Orders(*) -- outsourced-to -- (1)Users 
```

（这里我假设一个订单只能外包给另一个用户。一个用户可能有很多订单外包给他们。）

表示这一点的最佳方式是让 Orders 表在 Users 表中有一个“所有者”外键列，在 Users 表中还有另一个“outsourced_to”外键列。

外包用户可以编辑的订单列将由代码控制，而不是由 dB 控制。

只有当订单可以同时外包给多个用户时，才需要单独的外包表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T17:01:14.067

> 在订单表上有一个 user_id 和 outsourced_to 字段怎么样？

听起来不错。

另外，考虑一种非规范化，例如移动字段，可以由“外包给”用户编辑到单独的表中。

# css - CSS - 父 div 没有扩展到子的宽度/高度

> ID：14012678
> 
> 赞同：8
> 
> 时间：2012-12-23T16:38:43.657
> 
> 标签：css, html

我正在寻找将标题叠加到图像上。我已经设法做到了，但是图像正在从 parent 扩展出来`div`。

我将包含`div`设置为`inline-block`，因为我希望它“自动调整大小”，而不是占用`width: 100%`. 如果查看当前输出，您会看到图像可能位于黑色边框框内。

如果您遇到跨浏览器问题，它只需要在 Chrome 中工作。

提前致谢！

**[现场演示](http://jsfiddle.net/AaXTm/)**

* * *

***CSS：***

```
#body_content {
    border: solid 1px blue;
    display: inline-block;    
    padding: 5px;
}
#body_header {
    border: solid 1px red;
    font-size: 25px;
    padding: 5px;
}
#body_image {
    position: absolute;
}
#body_image_caption {
    color: white;
    line-height: 30px;
    margin-left: 10px;
}
#body_image_container {
    background: white;
    border: solid 1px black;
    margin-top: 3px;
    padding: 10px;
}
#body_image_overlay {
    background-color: black;
    bottom: 5px;
    display: block;
    height: 30px;
    opacity: 0.85;
    position: absolute;
    width: 100%;    
}​ 
```

***HTML：***

```
<div id="body_content">
   <div id="body_header">
      Heading
   </div>
   <div id="body_image_container">
      <div id="body_image">
          <img src="http://i.imgur.com/s6G8n.jpg" width="200" height="200" />
          <div id="body_image_overlay">
             <div id="body_image_caption">
                Some Text
             </div>
          </div>
      </div>
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-23T16:57:28.153

该`#body_image`元素正在从 中转义，`#body_image_container`因为它`position`被设置为`absolute`。绝对定位的元素会从文档流中移除，导致父元素折叠，就好像子元素不存在一样。如果将其更改为`relative`，则它将包含在黑盒子中：

```
#body_image{
    position: relative;
} 
```

[http://jsfiddle.net/AaXTm/2/](http://jsfiddle.net/AaXTm/2/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-08T19:16:47.450

在父 div 中尝试这个 css。

```
Overflow:auto 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-23T18:52:56.310

检查这个小提琴。您需要将图像的子元素的位置设置为绝对位置，将父元素的位置设置为相对位置。相应地更改标题的宽度。

```
child-element {
    position:absolute;
}

parent-element {
    position:relative
} 
```

[http://jsfiddle.net/AaXTm/4/](http://jsfiddle.net/AaXTm/4/)

# c# - 单击按钮从 wpf 项目中打开 aspx

> ID：14012681
> 
> 赞同：0
> 
> 时间：2012-12-23T16:38:53.267
> 
> 标签：c#, asp.net, wpf

嘿，我在一个 web 应用程序项目上写了一个 aspx 文件，现在我将 aspx 文件传输到一个 wpf 项目，我想在浏览器中加载它。

浏览器加载时出现错误：

此页面包含以下错误： 第 1 行第 2 列错误：StartTag：无效元素名称 下面是页面的呈现直到第一个错误。

这是我的代码：

XAML：

```
 <Button Content="Press Here" Height="145" HorizontalAlignment="Left" Margin="260,175,0,0" Name="button1" VerticalAlignment="Top" Width="271" Background="{x:Null}" Click="AddNewUser" Foreground="#FFF7F1F1" FontSize="18" FontWeight="Bold" FontStyle="Italic" /> 
```

C＃

```
 private void AddNewUser(object sender, RoutedEventArgs e)
    {
        System.Diagnostics.Process.Start("Default.aspx");

    } 
```

谁能告诉我我做错了什么？，甚至可以在网络浏览器中打开一个 aspx 文件吗？，如果不是什么解决方案？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T16:42:03.677

您正在尝试直接在 Web 浏览器中运行 ASPX 页面。那是不可能的。ASPX WebForm 需要托管在 Web 服务器上，由该 Web 服务器执行，并将生成的 HTML 发送到浏览器。不要忘记浏览器甚至不知道 ASPX 页面是什么，也不知道如何正确呈现。Web 浏览器理解并使用 HTML、CSS 和 javascript。

所以正确的做法是把这个WebForm托管在一个web服务器上，然后指定这个服务器的地址：

```
System.Diagnostics.Process.Start("http://mydomain.com/Default.aspx"); 
```

如果您没有 Web 服务器，则可以检索生成的 HTML，然后在您的应用程序中使用此 HTML：

```
System.Diagnostics.Process.Start("file:///c:/work/Default.html"); 
```

# node.js - 在具有多个域的同一服务器上托管 PHP 和 Node.js 应用程序

> ID：14012689
> 
> 赞同：1
> 
> 时间：2012-12-23T16:40:14.233
> 
> 标签：node.js, dns, lighttpd, iptables, vhosts

我有一个 Linode VPS，目前正在运行 lighttpd 来提供我的 PHP 网站并监听端口 80。

我还在运行 Node.js，它侦听端口 81，并使用 websockets 和 HTTP 与客户端交互。

有几个不同的域我想指向这个服务器。理想情况下，我希望托管 PHP 站点的域都与同一个 lighttpd 服务器通信，并且使用 node.js 的站点会以某种方式重定向到端口 node.js 正在监听客户端不知道的情况（例如，没有 30x 重定向）。

```
example-php1.com:80 -> linodebox:80 lighttpd /var/www/example1
example-php2.com:80 -> linodebox:80 lighttpd /var/www/example2
example-node.com:80 -> linodebox:81 node.js 
```

有没有办法通过设置 DNS 条目或调整 iptables 来做到这一点？lighttpd 是否需要成为 node.js 的代理？websockets 功能需要在没有任何后备的情况下工作，并且访问非节点域，例如`example-php1.com:81`，不应暴露节点应用程序。

我觉得完美的解决方案不需要更改现有的应用程序代码，也不需要在软件 Web 服务器之间进行代理，但我可能是错的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T16:53:52.013

汤姆怎么了！？

我推荐 HA-Proxy，它是目前性能最高的代理之一，应该可以完成你想要做的事情。

我正在用 nginx 作为代理做类似的事情，这很容易但不是最快的。

HA-Proxy 的网站在这里[http://haproxy.1wt.eu](http://haproxy.1wt.eu)

如果您想要一个“纯粹”的解决方案，您可能可以通过查看 ha-proxy 的源代码得到答案。你真的不能用 iptables 做到这一点。某些东西必须读取 HTTP 标头以确定请求来自何处以在本地路由它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T17:01:16.627

我遇到了基本相同的问题，最终我使用了[node-http-proxy](https://github.com/nodejitsu/node-http-proxy)（也可以在 npm as 中获得`http-proxy`）。

你只需要一个简单的配置文件：

```
{
  路由器：{
    'example-php1.com': 'linodebox:80',
    'example-php2.com': 'linodebox:80',
    'example-node.com'：'linodebox：81
  }
}

```

然后只需运行即可`node-http-proxy --config options.json`。如果你想在同一台机器上运行 lighttpd 和 node，你必须在不同的端口上启动 lig​​httpd（我使用 81 用于 php，3000 用于 node - 调整配置很容易）。我还使用[forever](https://github.com/nodejitsu/forever)来管理我的节点实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T01:28:19.340

你会恨我的...

我最终选择了第二个 IP 地址，然后按照[Linode 教程](http://library.linode.com/networking/configuring-static-ip-interfaces)设置多个静态 IP。然后，我将 lighttpd 配置为绑定到一个 IP 地址，并将 Node.js 配置为绑定到另一个 IP 地址。

这不是一个很好的解决方案，因为它不能扩展。

# code-generation - Xtend/Xtext 数据类型

> ID：14012690
> 
> 赞同：1
> 
> 时间：2012-12-23T16:40:35.670
> 
> 标签：code-generation, xtext, xtend

我在 Xtext 中创建的数据类型有问题。问题在于这个函数：

```
 «FOR e: bla.EAllAttributes»
      «e.EType.name» «e.name»;
    «ENDFOR» 
```

这个 for 循环只为 e.EType.name 返回 EInt 或 EString。但我需要在我的 DSL 中创建的终端规则/数据类型，如 double、boolean 等。似乎每个带有字符串表达式的终端规则都以 EString 形式返回，只有数字的规则以 EInt 形式返回。枚举被正确返回，但......

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T18:30:18.237

在手册中有一节解释您的问题。请参阅“参考文档”、“语法语言”、“语法”、“规则”、“终端规则”、“返回类型”：

> 每个终端规则返回一个原子值（Ecore EDataType）。默认情况下，假定应该返回 ecore::EString) 的一个实例。但是，如果您想提供不同的类型，您可以指定它。

该部分还概述了您必须提供的值转换器的语法更改和注册。

还有另一个部分“数据类型规则”，基本上说它与“终端规则”情况相同，并将您转发到“值转换器”部分。

# regex - 在 C# 中转换输入的正则表达式

> ID：14012691
> 
> 赞同：1
> 
> 时间：2012-12-23T16:40:36.457
> 
> 标签：regex, c#-4.0

```
using System;
using System.IO;

class Test
{
    public static void Main()
    {
        try
        {
            using (StreamReader sr = new StreamReader("TestFile.txt"))
            {
                String line = sr.ReadToEnd();
                Console.WriteLine(line);
            }

            string pattern1 = @"(in cm)";
            string pattern2 = @"mm";
            Regex rgx1 = new Regex(pattern1);
            Regex rgx2 = new Regex(pattern2);
            Regex rgx3 = new Regex(pattern3);
        }
        catch (Exception e)
        {
            Console.WriteLine("The file could not be read:");
            Console.WriteLine(e.Message);
        }
    }
} 
```

如何在 C# 中使用正则表达式将以下 cm 从文件转换为 m：

```
rectangle (in cm) 20 H * 40 W and circle diameter 30 mm 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T17:20:51.820

在您的 Main().. 中像这样使用

```
 string s1="", s2;
    try
    {
        using (StreamReader sr = new StreamReader("C:\\test.txt")) //in my case
        {
            s1 = sr.ReadToEnd();
        }

    }
    catch (Exception ei) { MessageBox.Show(ei.Message); }

    Console.WriteLine(s1);

    Regex r = new Regex(@"\bcm\b");  //regex for changing pattern
    s2 = r.Replace(s1, "m");

    Console.WriteLine(s2); 
```

# javascript - 通过 escape_javascript 在 JavaScript 中转义斜线

> ID：14012692
> 
> 赞同：1
> 
> 时间：2012-12-23T16:40:39.483
> 
> 标签：javascript, jquery, ruby-on-rails-3, escaping, html-escape-characters

我不确定我的问题是否与我的问题相关，因为语法着色正在欺骗我

我想将 HTML 附加到一个元素。

```
 <a href=\'http://www.google.com\'>link<\/a> 
```

假设它是调用助手的结果 - getLink

所以当我这样做的时候

```
var newelem = "<%= getLink %>" 
```

我得到`" <a href=\'http://www.google.com\'>link<\/a>"` 但从 // 开始，该行的其余部分是绿色的.. 表示它是评论？

我应该（以及如何）逃避这个双斜线吗？这是个问题吗？

我添加了一张图片来说明着色

![在此处输入图像描述](../Images/117f123acf8093f3b654a351d5752caa.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:53:11.033

chrome 行为不端.. 所以将此问题标记为已回答

# javascript - jQuery 和对象文字函数不能一起工作

> ID：14012693
> 
> 赞同：1
> 
> 时间：2012-12-23T16:40:57.653
> 
> 标签：javascript, jquery, oop

我试图组织我的 jquery 代码，所以我创建了一个对象文字，但现在**focusTextArea**不起作用，我的 textarea 值没有更新。

谢谢你的帮助。

**html**

```
<textarea id="test"></textarea>​ 
```

* * *

**javascript**

```
(function($,window,document,undefined){

    var TEX = {

        inputField: $("textarea#test"),

        /* Init all functions */
        init: function()
        {
            this.focusTextArea();
        },

        /* Function update textarea */
        focusTextArea:  function()
        {
            this.inputField.text('test');
        },
    }

    $(document).ready(function(){
        TEX.init();
    });

})(jQuery,window,document);​ 
```

* * *

**jsfiddle** [http://jsfiddle.net/vBvZ8/1/](http://jsfiddle.net/vBvZ8/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T16:46:28.153

首先，您没有在小提琴中正确包含 jQuery。另外，我*认为*您的意思是将代码放在`head`文档中（因为`document.ready`处理程序）。

更重要的是，选择器可能在文档准备好*之前*`$("textarea#test")`运行，因此实际上不会正确找到元素。我建议分配：*`inputField``TEX.init`*

 *```
(function($,window,document,undefined){

    var TEX = {

        /* Init all functions */
        init: function()
        {
            this.inputField = $("#test");
            this.focusTextArea();
        },

        /* Function update textarea */
        focusTextArea:  function()
        {
            this.inputField.text('test');
        },
    }

    $(document).ready(function(){
        TEX.init();
    });

})(jQuery,window,document);​ 
```

**更新示例：http:** [//jsfiddle.net/xntA2/1/](http://jsfiddle.net/xntA2/1/)

作为旁注，`textarea#test`应更改为 just `#test`。该`textarea`位是多余的，因为页面上应该只有一个元素带有`id=test`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T17:07:35.663

避免在元素存在之前查找元素的替代语法是从函数中返回元素：

```
(function($,window,document,undefined){

    var TEX = {
        /* function won't look for element until called*/
        inputField:function(){
            return $("textarea#test")
       }, 
        init: function()
        {
            this.focusTextArea();
        },
        focusTextArea:  function()
        {
            this.inputField().text('test');
        },
    }

    $(document).ready(function(){
        TEX.init();
    });

})(jQuery,window,document); 
```

演示：http: [//jsfiddle.net/vBvZ8/5/](http://jsfiddle.net/vBvZ8/5/)

我意识到这是一个简化的例子......但你也非常接近创建一个 jQuery 插件，这也可能是有益的。以下提供与示例相同的功能：

```
(function($, window, document, undefined) {    
    $.fn.focusTextArea = function() {
        return this.each(function(){
            $(this).text('test');
        })        
    };    
})(jQuery, window, document);

$(function() {
    $('textarea').focusTextArea()
}); 
```

演示：http: [//jsfiddle.net/vBvZ8/8/](http://jsfiddle.net/vBvZ8/8/)*

# hibernate - 未能执行目标和休眠无效 LOC 标头（错误签名）

> ID：14012694
> 
> 赞同：12
> 
> 时间：2012-12-23T16:41:15.593
> 
> 标签：hibernate, maven, build

我尝试使用 maven 构建我的项目（目标：package clean），但我收到错误：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project minimalistic-mvc-example: Compilation failure
[ERROR] error: error reading /home/chris/.m2/repository/org/hibernate/hibernate-core/4.1.9.Final/hibernate-core-4.1.9.Final.jar; invalid LOC header (bad signature)
[ERROR] -> [Help 1] 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-23T18:01:27.943

好像您的本地 jar 文件已损坏。删除本地 Maven 存储库并重试。这将强制 maven 从远程仓库再次下载 jar。

默认情况下，在 windows 中，本地 maven repo 将在`C:\Users\username\.m2\repository`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T04:49:22.067

请检查您的 .jar 文件可能已损坏，因此请从您的存储库中删除并再次尝试重新启动服务器，以便它可以再次获得新的一跳，这将很有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-04T04:50:20.480

从中删除内容`C:\Users\Username\.m2\repository`。无论是一切还是选择性 - 您的选择。然后使用命令提示符强制下载jar并构建

```
mvn clean install 
```

运行测试后：

```
mvn test 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-08-19T05:42:14.793

那行得通，罐子已损坏。删除本地 maven 存储库并重建项目将有助于解决问题。

# vim - 如何查看我在 command-T 中打开了哪些文件

> ID：14012700
> 
> 赞同：1
> 
> 时间：2012-12-23T16:41:36.670
> 
> 标签：vim, plugins

我正在使用 vim 插件 Command-T。如何查看我在 command-T 中打开了哪些文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T16:54:20.587

```
:ls 
```

或者

```
:buffers 
```

为您提供当前打开的缓冲区的列表。

# c# - 如何将我自己的项目添加到 Windows 7 中最小化应用程序的上下文菜单中？

> ID：14012705
> 
> 赞同：1
> 
> 时间：2012-12-23T16:41:56.950
> 
> 标签：c#, winforms, visual-studio

在 Visual Studio c# Winforms 应用程序中，如何将我自己的项目添加到我的应用程序的任务栏图标？例如，“便笺”应用程序具有“新便笺”选项。我可以将我自己的项目添加到我自己的应用程序的任务栏图标吗？

![应用程序任务栏上下文菜单中的自定义项示例](../Images/37ca99bd6fd5209568caefe14de135ad.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T17:04:35.037

您需要适用于 Microsoft® .NE​​T Framework 的 Windows® API 代码包 [msdn 链接](http://archive.msdn.microsoft.com/WindowsAPICodePack)

# java - 在 Jtable 上获取 ID 并显示详细信息

> ID：14012713
> 
> 赞同：0
> 
> 时间：2012-12-23T16:42:40.993
> 
> 标签：java, swing, file, jtable

我有一个包含按钮和文本字段的框架。

我的 porpuse 是从文本字段中读取 ID 号，当单击按钮时，我的表格应该显示该 ID 及其名称和标记。

我的“UserSearchFile.txt”是这样的：

```
12 joe 120
14 ted 220
19 alex 560
22 julia 668 
```

我的 jButton6ActionPerformed 整个代码是这样的：

```
int idS=Integer.parseInt(jTextField2.getText());
      final Vector data = new Vector();
      final Vector column = new Vector();
 File f=new File("D:\\UserSearchFile.txt");
    try{
    FileReader fr=new FileReader(f);
    BufferedReader br1=new BufferedReader(fr);
    String s;
while ((s = br1.readLine()) != null) {
                String[] st = s.split(" ");
                String id = st[0];
                String name = st[1];
                String mark = st[2];
                if (id.equals(String.valueOf(idS))) {
try {
            String line2;
FileInputStream fis = new FileInputStream("D:\\UserSearchFile.txt");
        BufferedReader br2 = new BufferedReader(new InputStreamReader(fis));
      StringTokenizer st1 = new StringTokenizer(br2.readLine(), " ");
              while (st1.hasMoreTokens())
               column.addElement(st1.nextToken());
                while ((line2 = br2.readLine()) != null) {
                       StringTokenizer st2 = new StringTokenizer(line2, " ");
                        while (st2.hasMoreTokens())
                                data.addElement(st2.nextToken());
                }
                br2.close();
        } catch (Exception e) {
                e.printStackTrace();
        }
                }
            }
        } catch (IOException ex) {
           Logger.getLogger(MainFrame1.class.getName()).log(Level.SEVERE, null, ex);
        }

 jTable1.setModel(new AbstractTableModel() {

        public int getRowCount() {
           return data.size() / getColumnCount();
        }

        public int getColumnCount() {
            return column.size();
        }

        public Object getValueAt(int rowIndex, int columnIndex) {
            return (String) data.elementAt((rowIndex * getColumnCount())
                        + columnIndex);
        }
    });
    jTable1.setVisible(true); 
```

请帮助我，告诉我如何写得简洁明了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T16:55:59.993

首先为变量和方法使用有意义的名称。`jTable1`, `br1`,`br2`和`jButton6ActionPerformed`不是可接受的名称。

然后尝试将一个复杂的方法拆分成2个或3个操作，自己拆分成2个或3个操作等等。每个操作应该是一个方法调用。例如：

```
private void readButtonClicked() {
    String id = idTextField.getText();
    Student student = findStudentWithId(id);
    showStudentInGUI(student);
}

private Student findStudentWithId(String id) {
    List<String> lines = readLinesInFile();
    List<Student> students = transformLinesIntoStudents(lines);
    Student studentWithId = findStudentWithId(students, id);
}

private Student findStudentWithId(List<Student> students, String id) {
    for (Student student : students) {
        if (student.getId().equals(id)) {
            return student;
        }
    }
    return null;
}

private List<Student> transformLinesIntoStudents(List<String> lines) {
    List<Student> students = new ArrayList<Student>(lines.size());
    for (String line : lines) {
        students.add(parseStudentLine(line);
    }
    return students;
}

... 
```

# javascript - HTML5：从 iPad 相机胶卷播放本地视频

> ID：14012714
> 
> 赞同：3
> 
> 时间：2012-12-23T16:42:43.357
> 
> 标签：javascript, html, ipad, video, ios6

我找到了这个 SO 帖子，但它已经过时了：[Play a local video from iPad in an HTML 5 pages](https://stackoverflow.com/questions/3924711/play-a-local-video-from-ipad-in-an-html-5-webpage)

iOS 6 可以访问相机胶卷以上传文件（例如，从 iPad 相机捕获的 .mov 文件）。我不确定该归功于谁，但我发现了一个 jsFiddle，它使用输入字段来获取本地文件并将其加载到视频元素中进行播放。这适用于 .mov 文件的桌面接受，但从接受属性中删除“video/*”允许输入文件从本地选择 .mov，并在 JS 中强制 file.type 为“video/mp4”允许.mov 在视频元素中播放。

请参阅上面引用的 jsFiddle：http: [//jsfiddle.net/dsbonev/cCCZ2/embedded/result,js,html,css/presentation/](http://jsfiddle.net/dsbonev/cCCZ2/embedded/result,js,html,css/presentation/)

但是，当涉及到在移动 safari 中工作时，文件仍然无法加载，即使您在文件输入字段中看到预览缩略图和文件名。我添加了一个链接到将“?dl=1”连接到 blob: url 的页面，但单击它只会导致 mSafari 显示“无效地址”，即使指向托管 .mov 的链接在 quicktime 中播放。最终，我希望能够从相机胶卷中选择一个视频，在 html 视频播放器中播放它，并且（理想情况下）将该文件的源路径存储在数据库中以供以后访问。我错过了什么？

在这里查看我编辑的 jsFiddle 版本：http: [//lt.umn.edu/email/](http://lt.umn.edu/email/)

JS：

```
playSelectedFile = function playSelectedFileInit(event) {
    var file = this.files[0];
    //var type = file.type;
    var type = "video/mp4";
    var videoNode = document.querySelector('video');
    var canPlay = videoNode.canPlayType(type);
    canPlay = (canPlay === '' ? 'no' : canPlay);

    var message = 'Can play type "' + type + '": ' + canPlay;
    var isError = canPlay === 'no';
    //displayMessage(message, isError);

    if (isError) {
        return;
    }

    var fileURL = URL.createObjectURL(file);

    var tempURL = fileURL+'?dl=1';
    var tempText = '<a href="'+tempURL+'?dl=1">'+tempURL+'?dl=1</a>';
    displayMessage(tempText, isError);

    videoNode.src = fileURL;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T14:32:23.227

使用`var videoNode = document.querySelector('video')[0];`querySelector 时使用

编辑：

否则尝试删除视频节点并使用正确的 src 重新创建它。我有同样的问题，电影无法播放。我想更改 src 不会在任何地方都有效..

# qt - 如何在 Qt 中更新 GUI 组件？

> ID：14012716
> 
> 赞同：2
> 
> 时间：2012-12-23T16:42:56.873
> 
> 标签：qt

我正在将一组 100 张图像加载到`QTableWidget`. 由于加载大约需要 4 秒，我想显示一个带有活动指示器或微调器等的进度条（自定义）。如何通过信号和插槽以及加载图像后同时更新 GUI 和进度条？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T16:48:20.947

您的事件循环正忙于您的主要任务，因此无法处理您的请求。事件循环空闲后将调用所有插槽。您的选择是：

1.  将慢速处理移至另一个线程。这可能不是一个选项，因为您无法在非主线程中与 Qt 的小部件进行交互。
2.  `QApplication::processEvents()`每次您希望应用 GUI 更改时调用。这是一个常见且简单的解决方案。此函数将执行您的插槽（如果有任何调用被调度），更新 GUI 并将执行流程返回给您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T02:19:47.693

加载图像的更好方法是使用在`QThread`处理图像时发出信号，并将该信号连接到主小部件中的插槽，[这里](http://www.qtcentre.org/threads/20497-Showing-progress-bar-while-worker-thread-works)有几个示例

# c++ - 如何在 ofn.lpstrFilter 中以数字开头文件格式名称？它不允许在开头写3？

> ID：14012719
> 
> 赞同：0
> 
> 时间：2012-12-23T16:43:28.940
> 
> 标签：c++, c, winapi

> **可能重复：**
> [如何在 C 中转义或终止转义序列](https://stackoverflow.com/questions/8229521/how-to-escape-or-terminate-an-escape-sequence-in-c)

`ofn.lpstrFilter`不允许我在分机开头写数字“3”？我需要使用哪种过滤器？

```
ofn.lpstrFilter = "text1 (*.txt)\0*.txt\03D text (*.txt)\0*.txt\0"; 
```

在上面的例子中，就在 之后`\0`，我正在使用`3D`，但 lpstrFilter 不允许我。为什么？我不想在它们之间使用空间。

输出应该是这样的：

```
text1 (*.txt)
3D text (*.txt) 
```

如果我使用空格`\0`然后`3D`输出是：

```
text1 (*.txt)
 3D text (*.txt)  // note one space is added before 3D 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T17:56:26.150

这里的问题是您不小心使用了[八进制字符常量](http://msdn.microsoft.com/en-us/library/6aw8xdf2.aspx "C++ 字符常量")。当您编写时，`\03D...`您希望编译器将其解释为`\0` `3D...`. 但是，编译器遵循规则并将其转换为`\03` `D...`. 由于这不会产生`NUL`字符，因此它之前的`*.txt`扩展名会扩展到下一个`\0`字符。以下`*.txt`扩展名现在被误解为显示字符串，它将愉快地显示在文件类型下拉列表中。

解决方案是拆分字符串并改为编写以下内容：

```
ofn.lpstrFilter = "text1 (*.txt)\0*.txt\0" "3D text (*.txt)\0*.txt\0"; 
```

这将正确终止`\0`并防止以下数字字符被解释为此转义序列的一部分。

顺便说一句，由于这是 WinAPI 代码，您可能应该使用`TCHAR`s 而不是`char`s。代码行将如下所示：

```
ofn.lpstrFilter = _T( "text1 (*.txt)\0*.txt\0" ) _T( "3D text (*.txt)\0*.txt\0" ); 
```

# c# - 在代码中配置 WCF 服务绑定

> ID：14012723
> 
> 赞同：4
> 
> 时间：2012-12-23T16:44:13.417
> 
> 标签：c#, .net, wcf

我有一个用代码创建的自托管 Web 服务：

```
protected void StartService(Type serviceType, Type implementedContract, string serviceDescription)
{
    Uri addressTcp = new Uri(_baseAddressTcp + serviceDescription);
    ServiceHost selfHost = new ServiceHost(serviceType, addressTcp);
    Globals.Tracer.GeneralTrace.TraceEvent(TraceEventType.Information, 0, "Starting service " + addressTcp.ToString());
    try
    {
        selfHost.AddServiceEndpoint(implementedContract, new NetTcpBinding(SecurityMode.None), "");

        ServiceMetadataBehavior smb = new ServiceMetadataBehavior();
        selfHost.Description.Behaviors.Add(smb);
        System.ServiceModel.Channels.Binding binding = MetadataExchangeBindings.CreateMexTcpBinding();
        selfHost.AddServiceEndpoint(typeof(IMetadataExchange), binding, "mex");
        selfHost.Open();

        ServiceInfo si = new ServiceInfo(serviceType, implementedContract, selfHost, serviceDescription);
        try
        {
            lock (_hostedServices)
            {
                _hostedServices.Add(serviceType, si);
            }
        }
        catch (ArgumentException)
        {
             //...
        }
    }
    catch (CommunicationException ce)
    {
        //...
        selfHost.Abort();
    }
} 
```

这工作正常，但是当我尝试发送大块数据时，我得到以下异常：

> Error: The formatter threw an exception while trying to deserialize the message: There was an error while trying to deserialize parameter @@@ . The InnerException message was 'There was an error deserializing the object of type @@@. The maximum string content length quota (8192) has been exceeded while reading XML data. This quota may be increased by changing the MaxStringContentLength property on the XmlDictionaryReaderQuotas object used when creating the XML reader.'. Please see InnerException for more details. at: at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc)

The solution appears to be adding MaxStringContentLength property to the binding. I understand how to do it in the Web.config ([link](http://social.msdn.microsoft.com/forums/en-US/wcf/thread/f570823a-8581-45ba-8b0b-ab0c7d7fcae1/)):

> ... binding name="wsHttpBindingSettings" maxReceivedMessageSize="2147483647">

I am looking for a way of modifying the binding's maxReceivedMessageSize in code. Is that even possible with the type of binding that I am using?

Thanks.

Edit: After learning some more (and with the guidance of the responses I received) I understand the problem: I was trying to modify the MEX part of the service, which is only used to advertise it, see [link](https://stackoverflow.com/questions/2106637/what-is-mexhttpbinding). I should have modified the binding of the NetTcpBinding (first line in the try statement). now my (working) code looks like this:

```
...
    try
    {
        //add the service itself

        NetTcpBinding servciceBinding = new NetTcpBinding(SecurityMode.None);
        servciceBinding.ReaderQuotas.MaxStringContentLength = 256 * 1024;
        servciceBinding.ReaderQuotas.MaxArrayLength = 256 * 1024;
        servciceBinding.ReaderQuotas.MaxBytesPerRead = 256 * 1024;
        selfHost.AddServiceEndpoint(implementedContract, servciceBinding, "");
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T16:57:35.627

You need to look at the `<ReaderQuotas>` subelement under your binding - that's where the `MaxStringContentLength` setting lives....

```
 <system.serviceModel>
    <bindings>
      <netTcpBinding>
        <binding name="test">
          <readerQuotas maxStringContentLength="65535" />   <== here's that property!
        </binding>
      </netTcpBinding>
    </bindings>
  </system.serviceModel> 
```

In code, you can set it like this:

```
NetTcpBinding binding = new NetTcpBinding(SecurityMode.None);
binding.ReaderQuotas.MaxStringContentLength = 65535; 
```

and then use this binding for the service endpoint ...

```
selfHost.AddServiceEndpoint(implementedContract, binding, ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T16:52:09.337

```
var binding = new NetTcpBinding(SecurityMode.None);
binding.MaxReceivedMessageSize = 2147483647;//this your maxReceivedMessageSize="2147483647"
binding.ReaderQuotas.MaxStringContentLength = 2147483647;//this property need set by exception
selfHost.AddServiceEndpoint(implementedContract, binding , ""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-08T13:16:40.487

My solution is an ASP.NET site hosting an Silverlight client, where the service client reference is in a Portable project. Services run over HTTPS with username authentication.

I ran into some problems when sending a picture (byte[]) over WCF, but resolved it as following:

My web site's **web.config** has an binding (under system.serviceModel) defined as such:

```
<bindings>
  <customBinding>
    <binding name="WcfServiceBinding" receiveTimeout="00:10:00" sendTimeout="00:10:00" closeTimeout="00:10:00" openTimeout="00:10:00">
      <security authenticationMode="UserNameOverTransport" />
      <binaryMessageEncoding></binaryMessageEncoding>
      <httpsTransport maxBufferSize="2147483647" maxReceivedMessageSize="2147483647" keepAliveEnabled="true" />
    </binding>
  </customBinding>
</bindings> 
```

In my **portable** lib I got a WCF service reference and define my binding in code as such:

```
public static CustomBinding ServiceBinding
{
    get
    {
        if (binding != null)
        {
            return binding;
        }

        binding = new CustomBinding
        {
            CloseTimeout = new TimeSpan(0, 2, 0),
            ReceiveTimeout = new TimeSpan(0, 3, 0),
            SendTimeout = new TimeSpan(0, 5, 0)
        };

        var ssbe = SecurityBindingElement.CreateUserNameOverTransportBindingElement();
        binding.Elements.Add(ssbe);
        binding.Elements.Add(new BinaryMessageEncodingBindingElement());
        binding.Elements.Add(
            new HttpsTransportBindingElement { MaxReceivedMessageSize = 2147483647, MaxBufferSize = 2147483647 });

        return binding;
    }
} 
```

To create my client I get the static binding definition:

```
private static DataServiceClient CreateClient()
{
    var proxy = new DataServiceClient(ServiceUtility.ServiceBinding, ServiceUtility.DataServiceAddress);
    proxy.ClientCredentials.SetCredentials();
    return proxy;
} 
```

Works great for me. Good luck.

# java - Axis2 - 返回 Java 类

> ID：14012733
> 
> 赞同：0
> 
> 时间：2012-12-23T16:46:30.370
> 
> 标签：java, wsdl, axis2

按照一个简短的教程[http://www.javaranch.com/journal/200603/WSComplexTypes.html](http://www.javaranch.com/journal/200603/WSComplexTypes.html)（轴 1.4 然而 afaik）我想创建一个 Web 服务方法，它将返回一个特定的 Java 类。我正在使用 Eclipse Juno、Axis2 1.6.2 和 Tomcat 6 服务器。

该类看起来像：

```
public class Person implements Serializable{
/**
 * 
 */
private static final long serialVersionUID = 1L;

public int id;
public String name;
    public String surname;
} 
```

网络方法看起来像

```
public Person getPersonDetails(){
    Person result = new Person();
    result.id = 1;
    result.name = "test";
    result.surname = "test2";
    return result;
} 
```

然后在生成 WSDL 并部署 Web 服务之后，我的 WSDL 文件如下所示： ...

```
 <xs:schema targetNamespace="http://mycrm/xsd" elementFormDefault="qualified" attributeFormDefault="qualified"> 
  <xs:complexType name="Person"> 
  <xs:sequence/> 
  </xs:complexType></xs:schema> 
```

...

```
 <xs:element name="getPersonDetails"> 
  <xs:complexType> <xs:sequence/> </xs:complexType> </xs:element> 
  <xs:element name="getPersonDetailsResponse"> -<xs:complexType> -<xs:sequence>          
  <xs:element name="return" type="ax21:Person" nillable="true" minOccurs="0"/>         
  </xs:sequence> </xs:complexType> </xs:element> 
```

据我了解，Person 类没有以任何方式映射到 Web 服务中。测试调用只返回如下所示的肥皂响应：

```
<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
<soapenv:Body>
 <ns:getPersonDetailsResponse xmlns:ns="http://mycrm">
  <ns:return xmlns:ax21="http://mycrm/xsd"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ax21:Person"/>
 </ns:getPersonDetailsResponse>
 </soapenv:Body>
</soapenv:Envelope> 
```

所以我的问题是： - 是否有一个我忘记的简单步骤将映射 WSDL 中的类，以便我可以正确返回数据 - 返回这样的数据是错误的 - 是 XML 还是 JSON 样式？（我想在 Adob​​e Flex 项目中使用这个网络服务）

# c# - WebApi.UnityDependencyResolver 未实现 Microsoft.Practices.ServiceLocation.IServiceLocator。参数：commonServiceLocator

> ID：14012735
> 
> 赞同：12
> 
> 时间：2012-12-23T16:46:57.220
> 
> 标签：c#, asp.net, asp.net-mvc-4, asp.net-web-api, unity-container

我尝试运行以下代码：

```
using System.Web.Http;
using System.Web.Mvc;
using Conduit.Mam.ClientSerivces.Dal.Configuration;
using MamInfrastructure.Common.Dal;
using MamInfrastructure.Common.Logger;
using MamInfrastructure.Logger;
using Microsoft.Practices.Unity;
using Unity.WebApi;

namespace Conduit.Mam.ClientServices.Common.Initizliaer
{
    public static class Initializer
    {
        private static bool isInitialize;
        private static readonly object LockObj = new object();
        private static IUnityContainer defaultContainer = new UnityContainer();

        static Initializer()
        {
            Initialize();
        }

        public static void Initialize()
        {
            if (isInitialize)
                return;

            lock (LockObj)
            {
                IUnityContainer container = defaultContainer;

                //registering Unity for web API
                GlobalConfiguration.Configuration.DependencyResolver = new UnityDependencyResolver(container);
                //registering Unity for MVC
                DependencyResolver.SetResolver(new UnityDependencyResolver(container));

                container.RegisterType<IDal<ClientService.DAL.EntityFramework.MamConfiguration>, MamConfigurationDal>();
                container.RegisterType<IApplicationLogger, Log4NetLogger>();

                if (!isInitialize)
                {
                    isInitialize = true;
                }
            }
        }
    }
} 
```

广告得到以下异常：

`The type Unity.WebApi.UnityDependencyResolver does not appear to implement Microsoft.Practices.ServiceLocation.IServiceLocator. Parameter name: commonServiceLocator`

我试图安装 webApi 包，但它没有帮助

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-23T18:12:13.053

在您的`Initialize`方法中替换：

```
GlobalConfiguration.Configuration.DependencyResolver = new UnityDependencyResolver(container); 
```

和：

```
GlobalConfiguration.Configuration.DependencyResolver = new Unity.WebApi.UnityDependencyResolver(container); 
```

现在你明白问题是什么了：

[`System.Web.Http.Dependencies.IDependencyResolver`](http://msdn.microsoft.com/en-us/library/system.web.http.dependencies.idependencyresolver%28v=vs.108%29.aspx)（由 Web API[`System.web.Mvc.IDependencyResolver`](http://msdn.microsoft.com/en-us/library/system.web.mvc.idependencyresolver%28v=vs.98%29.aspx)使用）和（由 ASP.NET MVC 使用）是两种完全不同的类型（即使它们具有相同的名称），但是您尝试将它们都分配给相同的类型 ( `UnityDependencyResolver`)，这显然无法正常工作。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-08T08:26:40.277

我遇到了类似的问题，但就我而言，我的 Web 应用程序具有 MVC 和 WebApi 控制器。我这样解决：

```
using Microsoft.Practices.Unity;
using System.Web.Http;
using System.Web.Mvc;
using Unity.Mvc5;

DependencyResolver.SetResolver(new UnityDependencyResolver(container));
GlobalConfiguration.Configuration.DependencyResolver = new Unity.WebApi.UnityDependencyResolver(container); 
```

第一行将使用 MVC DependencyResolver，在第二行中我使用 WebApi UnityDependencyResolver。

# c - 为什么 C 标准包含许多不安全的函数，它们是无用的？

> ID：14012737
> 
> 赞同：-8
> 
> 时间：2012-12-23T16:47:01.767
> 
> 标签：c, c99, c89, c11

为什么 C 标准包含许多不安全的功能，例如，这些功能是无用的（在他们不使用的好程序中）和有害的`getchar`？为什么 C 标准不包含有用的功能，例如`getch`，和`getche`？这只是众多例子之一...

UPD 我很困惑：`gets`而不是`getchar`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-23T16:49:20.620

你的意思是`gets`？为了不破坏旧程序。淘汰之路很漫长。此外，它*已*被弃用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-26T19:33:22.610

`gets`在 C99 中已弃用，并已在 C11 中**删除。**

C11(ISO/IEC 9899:201x) 前向/6

> 去掉了gets函数()

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T19:49:50.513

您不能在电传打字机（看起来像打字机的终端）上实现 getch() [无缓冲读取]。或任何类型的终端，其中数据存储在终端中，直到您按下回车键。

有一些函数可以做这类事情，但请记住，C 是一种应该“在任何东西上运行”的语言。

`gets`多年前是标准库的一部分，所以它必须留下——否则，旧代码将无法编译，并且很多人喜欢使用旧代码（因为修复 1000000 行杂乱代码需要大量工作曾经有效！）

# c++ - 双链表

> ID：14012741
> 
> 赞同：-5
> 
> 时间：2012-12-23T16:47:35.407
> 
> 标签：c++, linked-list

所以我试图制作一个双链表，我可以搜索名字，也可以搜索特定年龄以下的人，但我不知道该怎么做。到目前为止，我只有一个，但我遇到了麻烦。

```
 #include <iostream>
    #include <string>
    using namespace std;

     typedef string Elem;               // list element type
      class DNode {                 // doubly linked list node
      private:
        Elem elem;                  // node element value
        int age;
        DNode* prev;                // previous node in list
        DNode* next;                // next node in list
        friend class DLinkedList;           // allow DLinkedList access
      };

    class DLinkedList {             // doubly linked list
      public:
        DLinkedList();              // constructor
        ~DLinkedList();             // destructor
        bool empty() const;             // is list empty?
        const Elem& front() const;          // get front element
        const Elem& back() const;           // get back element
        void addFront(const Elem& name);        // add to front of list
        void addBack(const Elem& name);     // add to back of list
        void removeFront();             // remove from front
        void removeBack();              // remove from back
        void displayViaAge(string age);
        void displayViaName(const Elem& name);
        void removeName(const Elem& name);
      private:                  // local type definitions
        DNode* header;              // list sentinels
        DNode* trailer;
      protected:                    // local utilities
        void add(DNode* v, const Elem& name);       // insert new node before v
        void remove(DNode* v);          // remove node v
      };

      DLinkedList::DLinkedList() {          // constructor
        header = new DNode;             // create sentinels
        trailer = new DNode;
        header->next = trailer;         // have them point to each other
        trailer->prev = header;
      }

        DLinkedList::~DLinkedList() {           // destructor
        while (!empty()) removeFront();     // remove all but sentinels
        delete header;              // remove the sentinels
        delete trailer;
      }
                                    // insert new node before v
     void DLinkedList::add(DNode* v, const Elem& name) {
        DNode* u = new DNode;   
        u->elem = name;      // create a new node and set name
        u->next = v;                 // make v the successor of u
        u->prev = v->prev;           // set u's predecessor to v's current predecessor
        u->prev->next = u;           // make u the successor of v's predecessor
        v->prev = u;                 // finally make u the predecessor of v
    }
     /*
      void DLinkedList::removeName(const Elem& name) {
        DNode* u = new DNode;   u->elem = name;      // create a new node and set name
        u->next = v;                 // make v the successor of u
        u->prev = v->prev;           // set u's predecessor to v's current predecessor
        u->prev->next = u;           // make u the successor of v's predecessor
        v->prev = u;                 // finally make u the predecessor of v
    }
    */
      void DLinkedList::addFront(const Elem& name)  // add to front of list
        { add(header->next, name); }

      void DLinkedList::addBack(const Elem& name)   // add to back of list
        { add(trailer, name); }

       void DLinkedList::remove(DNode* v) {     // remove node v
        DNode* u = v->prev;             // predecessor
        DNode* w = v->next;             // successor
        u->next = w;                // unlink v from list
        w->prev = u;
        delete v;
      }

      void DLinkedList::removeFront()       // remove from font
        { remove(header->next); }

      void DLinkedList::removeBack()        // remove from back
        { remove(trailer->prev); }

         bool DLinkedList::empty() const        // is list empty?
        { return (header->next == trailer); }

      const Elem& DLinkedList::front() const    // get front element
        { return header->next->elem; }

      const Elem& DLinkedList::back() const     // get back element
        { return trailer->prev->elem; }

  void DLinkedList::displayViaAge(string age) {                     //Displays person via age
      //int check = 0;
      DNode*temp = header;

       while(temp!=trailer)
       {
        //  age = str.find(temp->elem);

        //   if(check == 1){
              cout << temp->elem <<endl;
              temp = temp -> next;
          // }
       }

       cout << temp->elem<<endl;
  }
       void DLinkedList::displayViaName(const Elem& name) {                     //Displays person via age
                  int check = 0;
          DNode*temp = header;

           while(temp!=trailer)
           {

               if(temp->elem == name){
                  cout << "Yes that Person is in out system" << endl;
                  check = 1;
               }
               temp = temp -> next;
           }

           if(temp->elem == name){
                  cout << "Yes that Person is in out system" << endl;
                  check = 1;
           }
           if(check == 0){ cout << "Sorry that person is not in our system" << endl;}
           check = 0;
      }

      class Person {
      public: 
        void print();
        string getName();
        int getAge();
      private:
          string name;
          int age;
      };

    int main(){
        char input = 'z';
        string entry;
        int age;
        DLinkedList person;

        person.addFront("Takkun Bradly 19");
        person.addFront("Devindra Ardnived 18");
        person.addFront("SeboY Wang 20");
        person.addFront("DoubleX Slash 31");
        person.addFront("Uncle Jelly 17");
        person.addFront("test 12");

        cout << "What would you like to do?" << endl;
        cout << "Enter 'A' to: Add a new person" << endl;
        cout << "Enter 'B' to: Remove a person" << endl;
        cout << "Enter 'C' to: Search for people via age" << endl;
        cout << "Enter 'D' to: Search for people via name" << endl;
        cout << "Enter 'E' to: Average all the total ages" << endl;
        cout << "Enter 'F' to: Quit" << endl;

    while(input != 'f') {

        cin >> input;
        cout << endl;

            while ((input != 'a')&&(input != 'b')&&(input != 'c')&&(input != 'd')&&(input != 'e')&&(input != 'f')) {

                cout << "Please enter a valid selection" << endl;           
                cin >> input;
            }

            if ((input == 'a')){
                cout << "Please enter their name and age: ";
                cin.ignore();
                getline(cin, entry);
                person.addFront(entry);

            }

            if ((input == 'b')){
                cout << "Who would you like to remove: ";
                cin.ignore();
                getline(cin, entry);
                person.removeFront();
            }

            if ((input == 'c')){
                cout << "What is the age of the person you are looking for?: ";
                cin.ignore();
                getline(cin, entry);
                person.displayViaAge(entry);
            }

            if ((input == 'd')){
                cout << "What is the name of the person you are looking for?: ";
                cin.ignore();
                getline(cin, entry);
                person.displayViaName(entry);
            }

            if ((input == 'e')){
                cout << "The total average of ages are: " << endl;
            }

            cout << endl;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T17:40:00.307

你把几件你不知道怎么做的事情拼凑在一起，变成了一个你不知道如何解决的问题。

您似乎假设一个名称有两个部分。美好的：

```
if ((input == 'a')){
  cout << "Please enter their name and age: ";
  cin.ignore();
  cin >> firstName >> secondName >> age;
  ...
} 
```

然后，如果您真的想将名称存储为单个字符串，

```
name = firstName + " " + secondName; 
```

现在创建列表的新成员：

```
person.addFront(name, age); 
```

这调用：

```
void DLinkedList::add(DNode* v, const Elem& name, int age) 
```

这里的根本问题是您知道您应该将姓名和年龄作为单独的变量来处理，但您不知道如何，所以与其找出您是如何编写一个 kludge 的，不如说您确实知道该怎么做。很快你就被困住了。**学会听那个小声音。**

# vb.net - 为什么 vb.net 中的“进程”类不从 cmd.exe 捕获错误？

> ID：14012742
> 
> 赞同：1
> 
> 时间：2012-12-23T16:47:53.473
> 
> 标签：vb.net, cmd

我正在尝试在 vb.net 程序中运行 dos 命令并捕获输出。我有以下代码：

```
 Dim CMDServer As Diagnostics.ProcessStartInfo
    Dim CMDReply As Diagnostics.Process
    CMDServer = New Diagnostics.ProcessStartInfo
    CMDServer.FileName = "cmd.exe"
    CMDServer.UseShellExecute = False
    CMDServer.RedirectStandardOutput = True
    CMDServer.CreateNoWindow = True
    CMDServer.Arguments = "/C " + command
    CMDReply = Process.Start(CMDServer)
    Dim Reply As String = CMDReply.StandardOutput.ReadToEnd() 
```

如果 command 是有效的 dos 命令，则代码成功运行，并且我在回复中得到输出。如果命令没有输出（例如：cd\），则回复为空。问题是即使命令无效，回复也是空的。如何捕获诸如“命令未被识别为内部或外部命令......”，“系统找不到指定的路径......”等错误。请帮助我。谢谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T16:52:07.573

错误消息来自一个不同的输出流，称为[`StandardError`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standarderror.aspx). 只需使用 StreamReader 或直接阅读即可。当然，[`RedirectStandardError`](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.redirectstandarderror.aspx)您的实例的 -Property[`ProcessStartInfo`](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.aspx)必须设置为`True`.

此外，还有一个[`ExitCode`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.exitcode.aspx)-Property，它在程序完成后返回程序的 ExitCode。`0`意为“成功”。其他错误代码可以在 MSDN 文档中找到。[以下是常见退出代码的列表](http://www.hiteksoftware.com/knowledge/articles/049.htm)。例如，`2`表示`The system cannot find the file specified.`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T16:51:07.837

错误可能是输出`CMDReply.StandardError`，而不是`CMDReply.StandardOutput`; 也尝试阅读它。（并且也设置`CMDServer.RedirectStandardError`为`True`。）

# php - 通过 php 中的 ssh2_exec 转义 sed 命令上的引号

> ID：14012743
> 
> 赞同：0
> 
> 时间：2012-12-23T16:47:59.073
> 
> 标签：php, sed, libssh2

我正在尝试在 php 中使用以下命令发送到我的服务器：

```
ssh2_exec($con,  'sed -i \'s/max-players=4/max-players=8/g\' ' . $filedir . '\'/server.properties') 
```

但它什么也没做。另一方面，此命令：

```
ssh2_exec($con, 'sed -i \'s/max-players=4/max-players=12/g\' /home/servers2/\'' . $mUsername . '\'/server.properties') 
```

工作得很好，我正在尝试将硬编码目录更改为数据库中的目录。所以

```
$filedir = $DIR . $mUsername; 
```

`$Dir`在这种情况下是`'/home/servers2/'`并且`$mUsername`可以是`Testing540`

当我打印`$filedir`我得到的值时：

```
/home/servers2/Testing540 
```

我的引号是否在第一个代码片段中转义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:06:25.240

您关于正确引用的问题很难回答，因为您没有创建可以轻松调试的东西。请考虑以下代码：

```
$pattern = 'sed -i \'s/max-players=4/max-players=8/g\' %s\'/server.properties';
$command = sprintf($pattern, $filedir);
$result  = ssh2_exec($con,  $command); 
```

然后您可以更轻松地验证您的实际命令，例如通过检查/输出/记录：`$command`。

您还可以更轻松地比较这两种变体之间的区别。

`$DIR`还要启用错误报告和最高级别的日志记录，您可能只是遇到未定义变量的问题：

> 注意：未定义的变量：DIR in ...

这将使您的第一个命令失败，因为那时没有这样的路径/文件。这很可能是你的问题。

小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T17:52:58.330

原来问题出在行尾。我将其更改为：

```
ssh2_exec($con,  'sed -i \'s/max-players=4/max-players=8/g\' ' . $filedir . '/server.properties') 
```

而且效果很好。我必须先取出`\'`权利`/server.properties'`

# ruby-on-rails - 为什么在尝试使用嵌套路由制作表单时出现 NoMethod 错误？

> ID：14012744
> 
> 赞同：0
> 
> 时间：2012-12-23T16:48:03.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing

我正在使用rails3。
在嵌套路由中加载新操作时，出现 NoMethod 错误。

> #<#:0x0000000a067ef8> 的未定义方法“community_community_topics_path”

我怎样才能解决这个问题？？

**_form.html.erb**

```
<%= form_for ([@community, @community_topic]), :html => { :class => 'form-horizontal' } do |f| %>

  <div class="control-group">
    <%= f.label :title, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :title, :class => 'text_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :body, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_area :body, :class => 'text_area' %>
    </div>
  </div>

  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                community_topics_path, :class => 'btn' %>
  </div>
<% end %> 
```

**路线.rb**

```
resources :communities, :path => "shop", do
    resources :community_topics, :path => "topic", :as => :'topic'
end 
```

**耙路线 | grep community_topics**

```
 community_topic_index GET    /shop/:community_id/topic(.:format)          community_topics#index
                         POST   /shop/:community_id/topic(.:format)          community_topics#create
     new_community_topic GET    /shop/:community_id/topic/new(.:format)      community_topics#new
    edit_community_topic GET    /shop/:community_id/topic/:id/edit(.:format) community_topics#edit
         community_topic GET    /shop/:community_id/topic/:id(.:format)      community_topics#show
                         PUT    /shop/:community_id/topic/:id(.:format)      community_topics#update
                         DELETE /shop/:community_id/topic/:id(.:format)      community_topics#destroy 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T17:27:56.033

您应该在路由文件中使用复数形式的“主题”：

```
resources :communities, :path => "shop", do
  resources :community_topics, :path => "topics", :as => :'topics'
end 
```

这样做，您会看到`rake routes`将第一条路线从`community_topic_index`to更改为`community_topics`，让您使用`community_topics_path`

注意：您可能还想使用“shops”而不是“shop”，这样您的 URL 的格式将与 Rails 通常的方式一致：`http://example.com/shops`等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T17:56:22.150

您可以手动指定您的网址。只需将它传递给 url 参数，无论您希望表单从 rake 路由到达什么路由。从您的路线文件看来， community_topic_index_url 是您的发布操作。

```
<%= form_for :community_topic, url: community_topic_index_url, :html => { :class => 'form-horizontal' } do |f| %> 
```

# ios - 使用多个 NSManagedObject

> ID：14012745
> 
> 赞同：0
> 
> 时间：2012-12-23T16:48:12.443
> 
> 标签：ios, core-data, nsmanagedobject

我的问题很简单。我在 CoreData 中有 10 个不同的实体，它们都具有相同的属性（名称、描述......）。要以这种方式访问​​这些属性：

```
MyEntity *entity=...;
MyEntity2 *entity2=...;
...
MyEntity10 *entity10=...;

[self myfunction:AnEntity]; 
```

在我将随机对象发送到函数之后

```
-(void)myfunction:(id)myentity 
```

在这里，我想使用一个可以访问实体属性的变量，无论它是 MyEntity 还是 MyEntity2 的王...问题是我做不到：

```
id myobject=myentity;
NSLog(@"%@", myobject.name); 
```

如果有人有解决方案来避免测试对象的类:) 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T20:33:49.317

如果你有 10 个不同的实体，我认为是时候转移到 NSManagedObject 子类了。然后您可以定义一个包含所有共享属性的协议，并声明您的 NSManagedObject 子类符合该协议。然后你的电话变成

```
-(void)myfunction:(id<SharedAttributesProtocol>)myObject

{
    NSLog(@"%@", myObject.name);
} 
```

您提到“描述”作为您的共享属性之一。-description 方法已定义，因此您可能希望为该属性选择另一个名称。

将父 NSEntity 用于公共属性的缺点是您最终会得到一个非常宽的表。该表具有所有公共属性，但也具有每个子实体的所有不同属性。根据对象的大小，这将在 iOS 下对性能造成影响，尽管在 OS X 上并没有那么糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T19:45:34.300

事实上你*可以*打电话

```
[myobject valueForKey:@"name"] 
```

甚至

```
[myobject name] 
```

在您的函数中，因为这些方法是在运行时解析的。如果`myobject`有一个“名称”属性，这将起作用，否则它将在运行时崩溃。

一个更简洁的解决方案是定义一个`MyEntity`具有公共属性的`name`“ 父实体”`description`等。然后您可以定义子实体`MyEntity1`，`MyEntity2`...，`MyEntity`作为“父实体”。这些子实体继承父实体的所有属性/关系，并且可以具有额外的属性和关系。

相应的受管对象子类是该类的子`MyEntity`类。您的函数可能如下所示：

```
- (void)myfunction:(MyEntity *)myentity
{
     NSLog(@"%@", myentity.name);
} 
```

您可以使用任何子类的实例调用它：

```
MyEntity1 *myentity1 = ...;
[self myfunction:myentity1];
MyEntity2 *myentity2 = ...;
[self myfunction:myentity2]; 
```

# c++ - 在 C++ 中存储一个未知大小的表

> ID：14012749
> 
> 赞同：2
> 
> 时间：2012-12-23T16:48:46.860
> 
> 标签：c++, gcc

我想在 C++(gcc) 中存储一个表，我事先不知道它的大小，它将实时决定使用哪种结构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T16:51:49.447

制作用于表中记录的结构的向量：

```
vector<MyRecord> v; 
```

您可以使用以下方法添加记录（MyRecord 类型的对象）：

```
v.push_back(record); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T16:52:00.267

如果您的意思是用于大多数目的的数组，`std::vector`或者`std::deque`是您正在寻找的数组。

```
 std::vector<ClassOrTypeYouNeedToStore> v;
 v.push_back(1):
 v.push_back(2):
 v.push_back(3):
 std::cout << "Length of vector " << v.size() << std::endl;
 // Before C++11
 for (std::vector<int>::iterator it = v.begin(); it != v.end(); it++) {
     std::cout << "Next element is " << *it << std::endl;
 }
 // C++11+
 for (auto it = v.begin(); it != v.end(); it++) {
     std::cout << "Next element is " << *it << std::endl;
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T16:54:59.510

这取决于您需要存储什么以及会有所不同。如果列是固定的并且具有不同的类型，并且您希望能够动态地插入和删除行，您可能需要 a `std::vector<std::tuple<T,U,V>>`（或者代替 a `tuple`，您可以使用某种结构）。

如果列是固定的但都是相同的类型，`std::vector<std::array<T,N>>`请试一试。

如果行数和列数是固定的并且类型相同，那么试试`std::array<std::array<T,N>,M>`.

如果行数和列数是固定的，但每列的类型不同，`std::array<std::tuple<T,U,V>,N>`应该适合你。

如果您希望列数也有所不同，那么您将希望内部类型是`std::vector`某种类型的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T16:55:22.230

通常在这种情况下，我会使用`std::vector`.

```
size_t rsz = 4;
size_t csz = 4;

std::vector<double> table(rsz*csz, 0.0);

for (size_t i = 0; i < rsz; i++) {
  for (size_t j = 0; j < csz; j++) {
    table[i*csz+j] = i * 10 + j;
  }
} 
```

我更喜欢一维向量，自己做偏移算术。它可以防止您的辅助功能过度专业化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-23T16:59:03.030

如建议的那样，您可以使用`vector<vector<CellType>>`, `vector<RowType>`，或者，如果“大小”是指可以使用的“行数” `vector<array<RowSize, CellType>>`（我最喜欢的解决方案）。
[数组](http://en.cppreference.com/w/cpp/container/array)具有恒定长度（性能、内存占用、内存对齐）的优势，在此解决方案中，您可以获得与关系数据库相同的灵活性。

# python - 可变基础设施：实现自定义“处理程序”的最佳方式

> ID：14012752
> 
> 赞同：0
> 
> 时间：2012-12-23T16:49:05.143
> 
> 标签：python, variables, plugins, architecture

我正在为数字生活助手创建一个基础设施（有点像 Siri）。该应用程序应该是高度可扩展的，使用 Python 编写的插件。整个系统共享一个变量树。变量不使用 Python 类型存储，而是使用自定义“变量”类型。变量有 getvalue 和 setvalue 方法。例如，您可以这样做`var=Variable();var.setvalue('child1','thisvalue')` ，但也可以`var.setvalue('child1.child2','othervalue')`。要检索一个值`var.getvar('child1.child2').getvalue()`，也是`var1=var.getvar('child1');var1.getvar('child2').getvalue()`。Getvar 返回子变量的变量实例，getvalue 不带参数，并返回存储变量的类型。（例如 str 或 int）。

我想实现一个变量实例可以做更多事情的系统：例如，可以创建一个返回当前日期时间的变量，或者从网站获取一些数据。我不想使用像 Twisted 的 Deferred 那样的回调系统。

我曾想过让开发人员只继承 Variable 类，并覆盖 getvalue 和/或 setvalue 和/或 getvar 方法，但是，这并不“正确”。我认为有一个更优雅的解决方案。理想情况下，但不一定，变量的 getvalue 等方法可以在创建后更改/添加。

其他项目如何做到这一点？是否有其他项目我可以研究，看看该项目是如何做这种事情的？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T20:55:19.193

通过阅读您的问题，听起来变量表示层次结构中包含可变值的节点，因此我同意将变量子类化以实现不同的机制来获取其值似乎是不正确的。

忽略数据结构和 get/set 接口，我建议这种架构：

```
class Variable(object):

    def __init__(self, value=None):
        if value is not None and not isinstance(value, ValueProducer):
            raise TypeError("Expected a ValueProducer.")
        self.__value = value

    def getValue(self):
        return self.__value.produce() if self.__value else None

    def setValue(self, value):
        if value is not None and not isinstance(value, ValueProducer):
            raise TypeError("Expected a ValueProducer.")
        self.__value = value

class ValueProducer(object):

    def produce(self):
        raise NotImplementedError()

class SimpleValueProducer(ValueProducer):

    def __init__(self, value):
        self.__value = value

    def produce(self):
        return self.__value

class HttpRequestValueProducer(ValueProducer):

    def __init__(self, url, params, method="GET"):
        self.__url = url
        self.__params = params
        self.__method = method

    def produce(self):
        # Implementation omitted.
        return "Stub for HTTP request: " \
             + ", ".join((self.__url, str(self.__params), self.__method)

>>> v1 = Variable(SimpleValue("foo"))
>>> print v1.getValue()
foo

>>> v1.setValue(HttpRequestValue("http://localhost:8080", {"bar": "baz"}))
>>> print v1.getValue()
Stub for HTTP request: http://localhost:8080, {'bar': 'baz'}, GET

>>> v1.setValue("test")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "test3.py", line 13, in setValue
    raise TypeError("Expected a ValueProducer.")
TypeError: Expected a ValueProducer.

>>> v2 = Variable()
>>> print v2.getValue()
None 
```

我为 ValueProducer 使用一个类以及实现其接口的子类的原因是为了提高一些可重用性，尤其是对于需要大量代码来检索的值。

附带说明一下，在您的问题中获取和设置值的路径语法似乎有点尴尬：找到一个节点并直接设置它的值感觉更自然，而不是在 parent.setValue(path,价值）。可能值得研究使用库中的树数据结构，而不是重新发明它。

希望这能给你一些想法！

# php - MySQL和PHP从下拉列表中删除行

> ID：14012754
> 
> 赞同：0
> 
> 时间：2012-12-23T16:49:19.857
> 
> 标签：php, mysql, select, drop-down-menu

我希望使用下拉列表列出数据库中的所有行。当我选择一个选项时，使用按钮删除选定的行。这是我现在所拥有的，这只显示下拉列表：

```
$con = mysql_connect("localhost","root","");
if (!$con)
{
die('Nije se moguće konektovati: ' . mysql_error());
}

 mysql_select_db("videoteka", $con);

$result = mysql_query("select ime,id from filmovi");

$options=""; 

echo "Odaberite film:";

 while ($row=mysql_fetch_array($result)) { 

$id=$row["id"]; 
$ime=$row["ime"]; 
$options.="<OPTION VALUE=\"$id\">".$ime.'</option>';
}

mysql_close($con); 
```

在正文中：

```
<select name=thing> 
<option value=0><?=$options?></option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T17:14:24.917

好的，有两件事，只是为了尝试让您朝着正确的方向前进：首先，您可以在正文中删除`<option>`标签，因为您的 php 变量已经包含这些标签。

```
<select name=thing> 
<?=$options?>
</select> 
```

二是删除部分。有不同的方法可以做到这一点，但您肯定需要一个 HTML 表单。您的选择（和按钮）需要采用这种形式，它将被提交到同一个 PHP 页面。在 PHP 代码的开头，您将检查`$_POST`变量以确定要删除的行。我希望你知道是什么`$_POST`，否则这将是一个非常无用的解释。

# python - 进程内存使用输出

> ID：14012755
> 
> 赞同：0
> 
> 时间：2012-12-23T16:49:24.937
> 
> 标签：python, linux, memory-management, process

我想知道如何在所有情况下以 MB 为单位获取进程的常驻内存使用情况。有时我以 MB 为单位获得它，但有时它以 GB 为单位。

我确实四处寻找解决方案，但大多数都不起作用。可以做成的东西`top -b -n 1 | grep %i | awk '{print$9}'`会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T18:48:44.957

如果您想避免使用子进程，可以查看[psutil](http://code.google.com/p/psutil/)库。

如果您只是在寻找有关单个进程的信息，这是一个示例：

```
import psutil

pid = 14551

def rss_MB(pid):
    proc = psutil.Process(pid)
    mem_bytes = proc.get_memory_info().rss
    return( float(mem_bytes)/1048576 )

mem_MB = rss_MB(pid)
print "pid: %d has an rss of %f MB" % (pid, mem_MB) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T18:31:33.133

一个例子：

```
import subprocess

lines = subprocess.check_output(['ps', '-xacuww']).splitlines()
del lines[0] # skip the header
for p in lines:
    items = p.split()
    print "Process:", items[-1], " memory:", items[5], "kB" 
```

这是在 FreeBSD 上编写的，其中 RSS 大小以 kB 为单位报告。Linux 上的选项`ps`可能不同，请查看手册页。

# android - sqlite 更新未释放 HTC 渴望的内存

> ID：14012756
> 
> 赞同：1
> 
> 时间：2012-12-23T16:49:33.490
> 
> 标签：android, sqlite

在 HTC Desire（android 版本 2.3.3）上运行我的应用程序我注意到调用以下函数时内存使用量增加：

```
private static final String TABLE_MODULES = "tbl_module1";
private static final String MOD1_INCLUDE = "mod1_include";

private void setItemInclude (int idx, boolean include)
{
    String incString = "";
    if (include)
        incString = "true";
    else
        incString = "false";

    ContentValues args = new ContentValues();
    args.put(MOD1_INCLUDE, incString);
    database.update(TABLE_MODULES,args,"_id="+idx,null);
} 
```

其中 database 是 SQLiteDatabase 类型，是通过调用 dbHelper.getWritableDatabase() 获得的，其中 dbHelper 派生自 SQLiteOpenHelper 并使用应用程序上下文进行实例化。

我得到了所需的更新，但是当我检查我的应用程序的数据使用情况时，每次调用它似乎增加了大约 60KB，并且除非调用 dbHelper.close() 否则不会释放。多次调用此函数会导致 SQLiteDiskIOException。

我试过`database.rawQuery()`了，它也能正确更新，但同样会挂在内存上。

```
String updateQuery = "UPDATE " + TABLE_MODULES + " SET MOD1_INCLUDE = " + "'" + incString + "'" + " WHERE _id ='" + idx + "'";

Cursor cursor = database.rawQuery(updateQuery, null);
cursor.moveToFirst();
cursor.close(); 
```

在 Asus (android 4.0.3) 和 Orange San Francisco (android 2.1.update1) 上运行相同的代码没有这个问题。

`getWritableDatabase`从活动中调用，`onCreate()`生成的数据库在`onDestroy()`. 我认为在活动期间保持数据库打开是可以的。关于原因的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T19:19:57.660

[文档](http://www.sqlite.org/pragma.html#pragma_journal_mode)很清楚。

> WAL 日志模式使用预写日志而不是回滚日志来实现事务。

在您的情况下，听起来[自动检查点](http://www.sqlite.org/pragma.html#pragma_wal_autocheckpoint)要么未配置，要么无法正常工作。您可能不想关闭日记功能，因为它会导致数据丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T00:00:38.760

我找到了导致问题的原因。

在 HTC 上，每次`database.update()`调用都会在应用程序的**数据库**目录中更新一个临时文件。该文件的扩展名为**.sqlite-wal**。这个文件在每次调用时都会变大（增加 60KB），并且只有在我关闭数据库时才会被删除。

华硕还会创建一个临时文件，但扩展名为**.sqlite-journal**。该文件也会在每次`update()`调用时更新，但一旦事务完成，文件的大小就会减小到零。因此，不会导致内存问题。

我不确定 Journal 和 Wal 之间有什么区别，但相信它们都与事务失败后回滚数据库有关。我已经使用以下代码解决了内存问题，它关闭了日志/wal 功能。

```
Cursor cursor = database.rawQuery("PRAGMA journal_mode=OFF", null);
cursor.moveToFirst();
cursor.close(); 
```

打开数据库后调用它似乎可以防止创建这些临时文件。

但是，我不相信这是一个好主意。我很惊讶没有发现其他人报告此问题，并想知道是否将数据库打开准备好进行多个事务是否被认为是不好的做法？我是 SQL 新手，在数据库方面的经验相当有限。

# mongodb - 在 Mongoid 3 中，我可以构建一个 Queryable 然后将其传递给 where 方法吗？

> ID：14012761
> 
> 赞同：2
> 
> 时间：2012-12-23T16:50:43.780
> 
> 标签：mongodb, mongoid, mongoid3

[Origin](http://mongoid.org/en/origin/)和[Mongoid](http://mongoid.org/en/mongoid/docs/querying.html)之间的文档并不清楚如何使用 Origin::Queryable 对象。我可以构建一个 Origin::Queryable 对象，然后将其传递给 ModelName.where 方法吗？看来我不能，但另一方面，似乎是一件完全明智的事情。我可以想象一种情况，我根据一些逻辑构建一个 Queryable，然后将其传递给模型的 where 子句。这可能吗，我只是做得不对吗？

这就是我所描绘的：

```
class Criteria
  include Origin::Queryable
end

criteria = Criteria.new
criteria.where(category: 'vacuum').ne(dept: 'home')
vacuums = Product.where(criteria) 
```

这就是我认为它会起作用的方式，但事实并非如此。构建 Criteria 对象后如何处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:52:42.420

所以它是这样工作的：

```
c = Criteria.new
c = c.where(category: 'a').ne(dept: 'home') 
```

然后你有了你的标准`c`，现在你只需使用它，如果你使用的是 10gen 驱动程序，你可以像这样使用：

```
collection.find(c.selector, c.options) 
```

或使用轻便摩托车：

```
session[:collection].find(c.selector).select(c.options.fields) 
```

这应该可以，只是做了一些本地测试，对我来说很好。

# django - django如何在isertion期间对其他记录进行检查

> ID：14012764
> 
> 赞同：1
> 
> 时间：2012-12-23T16:51:12.750
> 
> 标签：django, django-models

我有以下 Django 模型：

```
class BarEvent(models.Model):
    EVENT_TYPES = ( ('op', 'opening'), ('cl', 'closing'), ('ea', 'event_a'), ('eb','event_b')   )

    event_type = models.CharField(max_length=2, choices=BAR_BALANCE_TYPES)
    date = models.DateField("Data", default=datetime.now) 
```

其中 BarEvent 对象表示按日期和时间排序的事件。我需要确保交替出现“打开”或“关闭”事件（即没有两个连续的“打开”或“关闭”事件），所以如果我尝试在另一个“打开”事件之后插入一个“打开”事件插入被阻止，但我不知道如何做到这一点。

我应该在覆盖的保存方法中对现有记录进行检查吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T16:57:07.667

您可以在模型中编写一个`clean`方法来在实际保存对象之前检查额外的验证。

```
class BarEvent(models.Model):
    EVENT_TYPES = ( ('op', 'opening'), ('cl', 'closing'), ('ea', 'event_a'), ('eb','event_b')   )

    event_type = models.CharField(max_length=2, choices=BAR_BALANCE_TYPES)
    date = models.DateField("Data", default=datetime.now)

    def clean(self):
        """
            Custom clean method to validate there can not be two
            consecutive events of same type
        """

        if self.objects.latest('date').event_type == self.event_type:
            raise ValidationError('Consecutive events of same type %s' % self.event_type) 
```

# vb.net - 如何测试十进制数中的位

> ID：14012765
> 
> 赞同：2
> 
> 时间：2012-12-23T16:51:45.867
> 
> 标签：vb.net, bitwise-operators, boolean-logic, boolean-operations

我有一组十进制数字。我需要检查它们中的每一个是否设置了特定位。如果设置了该位，我需要返回 1，否则返回 0。
我正在寻找一种简单快速的方法来做到这一点。
比如说，我正在检查是否设置了第三位。我可以做 (number AND (2^2))，如果设置了该位，它将返回 4，否则将返回 0。如何使它返回 1 而不是 4？
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:34:06.863

虽然除法解决方案很简单，但我认为位移操作会更有效。不过，您必须对其进行测试才能确定。例如，如果您使用基于 1 的位索引，您可以这样做：

```
Dim oneOrZero As Integer = (k And 2 ^ (n - 1)) >> (n - 1) 
```

（其中 k 是数字，n 是位索引）。当然，如果您使用基于 0 的位索引，您可以这样做：

```
Dim oneOrZero As Integer = (k And 2 ^ n) >> n 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T17:02:15.500

```
if ((number AND (2^bitnumber) <> 0) then return 1 else return 0 end if 
```

如果您可以将返回类型更改为布尔值，那么这会更优雅

```
return ((number AND (2^bitnumber)) <> 0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T17:06:15.647

对不起，伙计们，我今天太慢了。
测试十进制数“k”中的位数“n”：
(k AND 2^(n-1))/(2^(n-1))
如果该位已设置，则返回 1，否则返回 0 .
================================================== ====
再次嗨，伙计们！
我将三个提议的解决方案的性能与从零开始的索引进行了比较，结果如下：
“位移解决方案” - 8.31 秒
“如果...那么解决方案” - 8.44 秒
“除法解决方案” - 9.41
秒是连续四次运行的平均值。
令我惊讶的是，第二个解决方案优于第三个解决方案。
但是，在我以这种方式修改“除法解决方案”之后：
p = 2 ^ n : oneOrZero = (k And p) / p
它在 7.48 秒内开始运行。
因此，这是提议的解决方案中最快的（尽管 Keith 说 :-)。
感谢大家的帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-18T22:45:12.777

是的！只需使用位掩码。我枚举位，然后将数字与位值相加。PC 端的数学很少，因为它使用查找表。AND 基本上会关闭除您感兴趣的位之外的所有其他位。然后您将其与自身进行检查以查看它是否处于打开/关闭状态。

```
Enum validate
    bit1 = 1
    bit2 = 2
    bit3 = 4
    bit4 = 8
    bit5 = 16
    bit6 = 32
    bit7 = 64
    bit8 = 128
End Enum

If num And validate.bit3 = validate.bit3 Then true 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-19T18:04:17.523

我真的不知道它是否可以帮助比上述更多的人，但是，我们开始吧。

当我需要快速检查数字时，我会直接比较该位的十进制值。

我的意思是，如果我需要查看第 6 位是否为 (32)，我会检查它的十进制值，如下所示：

```
if x and 32 = 32 then "the bit is ON" 
```

例如，尝试用 32、4 和 2... 以及其他位检查 38。您只会看到实际打开的位。

我希望它可以帮助。

# javascript - 检测两个div是否重叠

> ID：14012766
> 
> 赞同：6
> 
> 时间：2012-12-23T16:51:45.937
> 
> 标签：javascript, jquery, html, collision, gamequery

> **可能重复：**
> [如何检测两个 div 是否与 jquery 接触？](https://stackoverflow.com/questions/5419134/how-to-detect-if-two-divs-touch-with-jquery)

我花了很多时间试图弄清楚如何检测两个 div 是否重叠。
我尝试了gamequery插件并像这样使用它：

```
$("#" + checkform).collision("#" + checkform + "w").each(function(){
    alert("Collision");
}); 
```

你会使用 gamequery 插件和/或你会怎么做？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-23T16:58:13.703

在每个元素上使用`getBoundingClientRect()`，看看它们是否以这种方式重叠。不需要 jQuery。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-23T16:55:28.950

这里已经有一个查询有答案：[如何检测两个 div 是否与 jquery 接触？](https://stackoverflow.com/questions/5419134/how-to-detect-if-two-divs-touch-with-jquery)

作为参考，我在这里复制代码：

```
function collision($div1, $div2) {
      var x1 = $div1.offset().left;
      var y1 = $div1.offset().top;
      var h1 = $div1.outerHeight(true);
      var w1 = $div1.outerWidth(true);
      var b1 = y1 + h1;
      var r1 = x1 + w1;
      var x2 = $div2.offset().left;
      var y2 = $div2.offset().top;
      var h2 = $div2.outerHeight(true);
      var w2 = $div2.outerWidth(true);
      var b2 = y2 + h2;
      var r2 = x2 + w2;

      if (b1 < y2 || y1 > b2 || r1 < x2 || x1 > r2) return false;
      return true;
    } 
```

# html - HTML5 画布背景图片

> ID：14012768
> 
> 赞同：55
> 
> 时间：2012-12-23T16:51:48.823
> 
> 标签：html, canvas, html5-canvas, computer-science

我试图在我找到的这个画布脚本的背面放置一个背景图像。我知道这与 context.fillstyle 有关，但不知道如何去做。我希望那行能读到这样的内容：

```
context.fillStyle = "url('http://www.samskirrow.com/background.png')"; 
```

这是我当前的代码：

```
var waveform = (function() {

var req = new XMLHttpRequest();
req.open("GET", "js/jquery-1.6.4.min.js", false);
req.send();
eval(req.responseText);
req.open("GET", "js/soundmanager2.js", false);
req.send();
eval(req.responseText);
req.open("GET", "js/soundcloudplayer.js", false);
req.send();
eval(req.responseText);
req.open("GET", "js/raf.js", false);
req.send();
eval(req.responseText);

// soundcloud player setup

soundManager.usePolicyFile = true;
soundManager.url = 'http://www.samskirrow.com/client-kyra/js/';
soundManager.flashVersion = 9;
soundManager.useFlashBlock = false;
soundManager.debugFlash = false;
soundManager.debugMode = false;
soundManager.useHighPerformance = true;
soundManager.wmode = 'transparent';
soundManager.useFastPolling = true;
soundManager.usePeakData = true;
soundManager.useWaveformData = true;
soundManager.useEqData = true;

var clientID = "345ae40b30261fe4d9e6719f6e838dac";
var playlistUrl = "https://soundcloud.com/kyraofficial/sets/kyra-ft-cashtastic-good-love";

var waveLeft = [];
var waveRight = [];

// canvas animation setup
var canvas;
var context;

function init(c) {
    canvas = document.getElementById(c);
    context = canvas.getContext("2d");
    soundManager.onready(function() {
        initSound(clientID, playlistUrl);
    });
    aniloop();
}

function aniloop() {
    requestAnimFrame(aniloop);
    drawWave();
}

function drawWave() {

    var step = 10;
    var scale = 60;

    // clear
    context.fillStyle = "#ff19a7";
    context.fillRect(0, 0, canvas.width, canvas.height);

    // left wave
    context.beginPath();

    for ( var i = 0; i < 256; i++) {

        var l = (i/(256-step)) * 1000;
        var t = (scale + waveLeft[i] * -scale);

        if (i == 0) {
        context.moveTo(l,t);
        } else {
        context.lineTo(l,t); //change '128' to vary height of wave, change '256' to move wave up or down.
    }
    }

    context.stroke();

    // right wave
    context.beginPath();
    context.moveTo(0, 256);
    for ( var i = 0; i < 256; i++) {

        context.lineTo(4 * i, 255 + waveRight[i] * 128.);
    }
    context.lineWidth = 0.5;
    context.strokeStyle = "#000";
    context.stroke();
}

function updateWave(sound) {
    waveLeft = sound.waveformData.left;
}

return {
    init : init
};
})(); 
```

修改后的代码 - 目前只显示黑色作为背景，而不是图像：

```
// canvas animation setup
var backgroundImage = new Image(); 
backgroundImage.src = 'http://www.samskirrow.com/images/main-bg.jpg'; 
var canvas;
var context;

function init(c) {
    canvas = document.getElementById(c);
    context = canvas.getContext("2d");
    soundManager.onready(function() {
        initSound(clientID, playlistUrl);
    });
    aniloop();
}

function aniloop() {
    requestAnimFrame(aniloop);
    drawWave();
}

function drawWave() {

    var step = 10;
    var scale = 60;

    // clear
    context.drawImage(backgroundImage, 0, 0);
    context.fillRect(0, 0, canvas.width, canvas.height);

    // left wave
    context.beginPath();

    for ( var i = 0; i < 256; i++) {

        var l = (i/(256-step)) * 1000;
        var t = (scale + waveLeft[i] * -scale);

        if (i == 0) {
        context.moveTo(l,t);
        } else {
        context.lineTo(l,t); //change '128' to vary height of wave, change '256' to move wave up or down.
    }
    }

    context.stroke();

    // right wave
    context.beginPath();
    context.moveTo(0, 256);
    for ( var i = 0; i < 256; i++) {

        context.lineTo(4 * i, 255 + waveRight[i] * 128.);
    }
    context.lineWidth = 0.5;
    context.strokeStyle = "#ff19a7";
    context.stroke();
}

function updateWave(sound) {
    waveLeft = sound.waveformData.left;
}

return {
    init : init
};
})(); 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-12-23T17:33:08.640

有几种方法可以做到这一点。您可以为当前正在处理的画布添加背景，如果不重新绘制画布，则每个循环都可以。否则，您可以在主画布下方制作第二个画布并为其绘制背景。最后一种方法是只使用`<img>`放置在画布下的标准元素。要在画布元素上绘制背景，您可以执行以下操作：

**[现场演示](http://jsfiddle.net/loktar/q7Z9k/)**

```
var canvas = document.getElementById("canvas"),
    ctx = canvas.getContext("2d");

canvas.width = 903;
canvas.height = 657;

var background = new Image();
background.src = "http://www.samskirrow.com/background.png";

// Make sure the image is loaded first otherwise nothing will draw.
background.onload = function(){
    ctx.drawImage(background,0,0);   
}

// Draw whatever else over top of it on the canvas. 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2015-06-02T07:00:09.703

你为什么不设计它：

```
<canvas id="canvas" width="800" height="600" style="background: url('./images/image.jpg')">
  Your browser does not support the canvas element.
</canvas> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-02-12T10:00:06.783

确保万一您的图像不在 dom 中，并且您从本地目录或服务器获取它，您应该等待图像加载，然后在画布上绘制它。

类似的东西：

```
function drawBgImg() {
    let bgImg = new Image();
    bgImg.src = '/images/1.jpg';
    bgImg.onload = () => {
        gCtx.drawImage(bgImg, 0, 0, gElCanvas.width, gElCanvas.height);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-19T13:13:21.380

Canvas 不使用 .png 文件作为背景图像。更改为 gif 或 jpg 等其他文件扩展名可以正常工作。

# powershell - PSObject、Hashtable 和 PSCustomObject 之间的区别

> ID：14012773
> 
> 赞同：51
> 
> 时间：2012-12-23T16:52:25.453
> 
> 标签：powershell, powershell-3.0, psobject

谁能解释一下细节？如果我使用创建一个对象

```
$var = [PSObject]@{a=1;b=2;c=3} 
```

然后我使用`getType()`PowerShell 查找它的类型，告诉我它的类型是**Hashtable**。

当使用[Get-Member](http://technet.microsoft.com/en-us/library/hh849928.aspx)（别名`gm`）检查对象时，很明显已经创建了一个哈希表，因为它有一个`keys`和一个`values`属性。那么与“普通”哈希表有什么区别？

另外，使用 PSCustomObject 有什么好处？当使用这样的东西创建一个

```
$var = [PSCustomObject]@{a=1;b=2;c=3} 
```

对我来说唯一可见的区别是**PSCustomObject**的不同数据类型。同样，不是键和值属性，检查`gm`显示现在每个键都已添加为 NoteProperty 对象。

但我有什么优势？我可以通过使用它的键来访问我的值，就像在哈希表中一样。我可以在 PSCustomObject 中存储多个简单的键值对（例如键对象对），就像在哈希表中一样。那么有什么好处呢？有什么重要的区别吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2014-05-09T03:10:10.570

`[PSCustomObject]`使用而不是的一种情况`HashTable`是当您需要它们的集合时。下面是为了说明它们在处理方式上的区别：

```
$Hash = 1..10 | %{ @{Name="Object $_" ; Index=$_ ; Squared = $_*$_} }
$Custom = 1..10 | %{[PSCustomObject] @{Name="Object $_" ; Index=$_ ; Squared = $_*$_} }

$Hash   | Format-Table -AutoSize
$Custom | Format-Table -AutoSize

$Hash   | Export-Csv .\Hash.csv -NoTypeInformation
$Custom | Export-Csv .\CustomObject.csv -NoTypeInformation 
```

`Format-Table`将导致以下结果`$Hash`：

```
Name    Value
----    -----
Name    Object 1
Squared 1
Index   1
Name    Object 2
Squared 4
Index   2
Name    Object 3
Squared 9
... 
```

以下为`$CustomObject`：

```
Name      Index Squared
----      ----- -------
Object 1      1       1
Object 2      2       4
Object 3      3       9
Object 4      4      16
Object 5      5      25
... 
```

发生同样的事情`Export-Csv`，因此使用`[PSCustomObject]`而不是简单的原因`HashTable`。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2014-11-11T17:56:34.097

假设我想创建一个文件夹。如果我使用 PSObject，您可以通过查看它来判断它是错误的

```
PS > [PSObject] @{Path='foo'; Type='directory'}

Name                           Value
----                           -----
Path                           foo
Type                           directory 
```

但是 PSCustomObject 看起来是正确的

```
PS > [PSCustomObject] @{Path='foo'; Type='directory'}

Path                                    Type
----                                    ----
foo                                     directory 
```

然后我可以管道对象

```
[PSCustomObject] @{Path='foo'; Type='directory'} | New-Item 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2018-05-06T05:52:12.943

[从`PSObject`文档](https://docs.microsoft.com/en-us/dotnet/api/system.management.automation.psobject?view=powershellsdk-1.1.0)中：

> 包装一个对象，提供可用成员的替代视图以及扩展它们的方法。成员可以是方法、属性、参数化属性等。

换句话说，a`PSObject`是一个对象，您可以在创建它之后为其添加方法和属性。

[从“关于哈希表”文档](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_hash_tables?view=powershell-6&viewFallbackFrom=powershell-Microsoft.PowerShell.Core#long-description)：

> 哈希表，也称为字典或关联数组，是一种紧凑的数据结构，可存储一个或多个键/值对。
> 
> ...
> 
> 哈希表经常被使用，因为它们对于查找和检索数据非常有效。

您可以使用 a `PSObject`like a `Hashtable`，因为 PowerShell 允许您向 中添加属性`PSObjects`，但您不应该这样做，因为您将无法访问`Hashtable`特定功能，例如`Keys`和`Values`属性。此外，可能会有性能成本和额外的内存使用。

[PowerShell 文档包含以下信息`PSCustomObject`](https://docs.microsoft.com/en-us/dotnet/api/system.management.automation.pscustomobject?view=powershellsdk-1.1.0)：

> 当使用不带参数的 PSObject 构造函数时，用作占位符 BaseObject。

这对我来说并不清楚，但是许多 PowerShell 书籍的[合著者](https://powershell.org/members/donj/)[在 PowerShell 论坛上的帖子](https://powershell.org/forums/topic/what-is-the-difference-between-pscustomobject-and-psobject/#post-23405)似乎更清楚：

> [PSCustomObject] 是一个类型加速器。它构造了一个 PSObject，但这样做的方式是导致哈希表键成为属性。PSCustomObject 本身不是一个对象类型——它是一个进程快捷方式。... PSCustomObject 是在没有构造函数参数的情况下调用 PSObject 时使用的占位符。

关于您的代码，`@{a=1;b=2;c=3}`是一个`Hashtable`. `[PSObject]@{a=1;b=2;c=3}`不会将 转换`Hashtable`为 a`PSObject`或生成错误。对象仍然是`Hashtable`. 但是，`[PSCustomObject]@{a=1;b=2;c=3}`将 转换`Hashtable`为`PSObject`. 我找不到说明为什么会发生这种情况的文档。

如果要将 a`Hashtable`转换为对象以便将其键用作属性名称，可以使用以下代码行之一：

```
[PSCustomObject]@{a=1;b=2;c=3}

# OR

New-Object PSObject -Property @{a=1;b=2;c=3}

# NOTE: Both have the type PSCustomObject 
```

如果要将数字转换`Hashtables`为一个对象，其中它们的键是属性名称，可以使用以下代码：

```
@{name='a';num=1},@{name='b';num=2} |
 % { [PSCustomObject]$_ }

# OR

@{name='a';num=1},@{name='b';num=2} |
 % { New-Object PSObject -Property $_ }

<#
Outputs:

name num
---- ---
a      1
b      2
#> 
```

`NoteProperty`很难找到有关的文档。[在`Add-Member`文档](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/add-member?view=powershell-6#required-parameters)中，`-MemberType`除了`NoteProperty`. *Windows PowerShell Cookbook* （第3 版）将`Noteproperty`Membertype 定义为：

> 由您提供的初始值定义的属性
> 
> *   李，H.（2013）。*Windows PowerShell 说明书*。O'Reilly Media, Inc. p。895。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-09-16T19:14:58.980

我认为 PSObject 的一个优点是您可以使用它创建自定义方法。

例如，

```
$o = New-Object PSObject -Property @{
   "value"=9
}
Add-Member -MemberType ScriptMethod -Name "Sqrt" -Value {
    echo "the square root of $($this.value) is $([Math]::Round([Math]::Sqrt($this.value),2))"
} -inputObject $o

$o.Sqrt() 
```

您可以使用它来控制 PSObject 属性的排序顺序（请参阅*[PSObject 排序](https://stackoverflow.com/questions/18825419/psobject-sorting/18826004#18826004)*）

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-12-23T18:07:38.567

我认为你会看到的最大区别是性能。看看这篇博文：

*[有效组合对象——使用哈希表索引对象集合](http://powertoe.wordpress.com/2011/03/31/combining-objects-efficiently-use-a-hash-table-to-index-a-collection-of-objects/)*

作者运行如下代码：

```
$numberofobjects = 1000

$objects = (0..$numberofobjects) |% {
    New-Object psobject -Property @{'Name'="object$_";'Path'="Path$_"}
}
$lookupobjects = (0..$numberofobjects) | % {
    New-Object psobject -Property @{'Path'="Path$_";'Share'="Share$_"}
}

$method1 = {
    foreach ($object in $objects) {
        $object | Add-Member NoteProperty -Name Share -Value ($lookupobjects | ?{$_.Path -eq $object.Path} | select -First 1 -ExpandProperty share)
    }
}
Measure-Command $method1 | select totalseconds

$objects = (0..$numberofobjects) | % {
    New-Object psobject -Property @{'Name'="object$_";'Path'="Path$_"}
}
$lookupobjects = (0..$numberofobjects) | % {
    New-Object psobject -Property @{'Path'="Path$_";'Share'="Share$_"}
}

$method2 = {
    $hash = @{}
    foreach ($obj in $lookupobjects) {
        $hash.($obj.Path) = $obj.share
    }
    foreach ($object in $objects) {
        $object |Add-Member NoteProperty -Name Share -Value ($hash.($object.path)).share
    }
}
Measure-Command $method2 | select totalseconds 
```

博客作者的输出：

```
TotalSeconds
------------
 167.8825285
   0.7459279 
```

他对代码结果的评论是：

> 当你把它们放在一起时，你可以看到速度的差异。对象方法在我的计算机上需要 167 秒，而哈希表方法将花费不到一秒的时间来构建哈希表然后进行查找。

以下是其他一些更微妙的好处： *[自定义对象默认显示在 PowerShell 3.0 中](http://blogs.microsoft.co.il/blogs/scriptfanatic/archive/2012/04/13/Custom-objects-default-display-in-PowerShell-3-0.aspx)*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-13T02:28:47.910

我们的 Windows-PKI 中有一堆模板，我们需要一个脚本，它必须与所有活动模板一起工作。我们不需要动态添加或删除模板。对我来说完美的作品（因为它也很“自然”地阅读）如下：

```
$templates = @(
    [PSCustomObject]@{Name = 'template1'; Oid = '1.1.1.1.1'}
    [PSCustomObject]@{Name = 'template2'; Oid = '2.2.2.2.2'}
    [PSCustomObject]@{Name = 'template3'; Oid = '3.3.3.3.3'}
    [PSCustomObject]@{Name = 'template4'; Oid = '4.4.4.4.4'}
    [PSCustomObject]@{Name = 'template5'; Oid = '5.5.5.5.5'}
)

foreach ($template in $templates)
{
   Write-Output $template.Name $template.Oid
} 
```

# c# - 拼写检查仅替换 TextBox 中的第一个单词

> ID：14012775
> 
> 赞同：2
> 
> 时间：2012-12-23T16:52:46.320
> 
> 标签：c#, wpf, textbox, spell-checking

我知道我以前在某个地方看到过这个问题，但我不确定当时是否有答案。我正在尝试将 SpellCheck 添加到`TextBox`WPF、.NET 4.0 中。它在查找和标记不正确的单词方面效果很好，`TextBox`如果它不正确，它将替换第一个单词。任何超过第一个单词的内容，它只是将克拉移动到开头`TextBox`而不改变任何内容？正如我所说，我在大约 6-9 个月前的某个地方看到了这个，但现在我在 google 中提出的所有内容都涉及替代语言（我现在严格使用英语）。我只是为了完整性而包含了事件方法和样式 XAML，我认为问题不在于那里。

**XAML：**

```
<MultiBox:MultiBox Name="callNotes" Grid.Column="1" Width="Auto" Height="Auto" Margin="2,5,15,20" VerticalAlignment="Stretch" AcceptsReturn="True" FontWeight="Bold" GotFocus="callNotes_GotFocus" SelectAllOnGotFocus="False" SpellCheck.IsEnabled="True" xml:lang="en-US" Style="{StaticResource TextBoxStyle}" TextChanged="callNotes_TextChanged" TextWrapping="Wrap" VerticalScrollBarVisibility="Auto" />

<Style x:Key="TextBoxStyle" TargetType="{x:Type MyNamespace:MultiBox}">
    <Setter Property="CharacterCasing" Value="Upper" />
    <Setter Property="HorizontalAlignment" Value="Stretch" />
    <Setter Property="VerticalAlignment" Value="Top" />
    <Setter Property="Height" Value="23" />
    <Setter Property="Width" Value="Auto" />
    <Setter Property="SelectAllOnGotFocus" Value="True" />
    <Setter Property="TextWrapping" Value="Wrap" />
</Style> 
```

**代码：**

```
private void callNotes_TextChanged(object sender, TextChangedEventArgs e)
{
    callNotes.Text.ToUpper();
    lineCountOne.Content = ((callNotes.Text.Length / 78) + 1);
}

private void callNotes_GotFocus(object sender, RoutedEventArgs e)
{
    callNotes.CaretIndex = callNotes.Text.Length;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T07:27:55.470

在尝试了 jschroedl 的建议但仍然没有运气（尽管我知道他的回答*应该*是正确的）之后，我开始尝试我能想到的所有可能的设置，甚至到创建一个全新的 WPF 项目的地步，`Spellcheck`-启用`TextBox`只是为了确保它与 Visual Studio/.NET 安装本身无关。事实证明不是，这是我几个月前所做的事情，以确保`TextBox`通过程序选择任何给定的内容都会导致`SelectAll()`方法被触发。一旦我从那段代码中筛选出这个特定`TextBox`的东西，一切都很好。再次感谢 jschroedl，我知道他不可能知道这一点。有问题的代码如下，以防有人遇到类似问题。

```
 protected override void OnStartup(StartupEventArgs e)
    {
        EventManager.RegisterClassHandler(typeof(TextBox), UIElement.GotKeyboardFocusEvent, new RoutedEventHandler(SelectAllText), true);

        base.OnStartup(e);
    }

    protected static void SelectAllText(object sender, RoutedEventArgs e)
    {
        var textBox = e.OriginalSource as TextBox;
        if (textBox != null && textBox.Name != "callNotes")
            textBox.SelectAll();
    } 
```

添加**&& textBox.Name != "callNotes"**解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T18:34:43.697

这将有助于查看您尝试纠正错误的代码。这是一个简单的代码，它遍历所有检测到的错误并接受第一个建议。如果您只想修复特定错误，则需要通过获取某个索引处的错误来跳到您感兴趣的特定错误。

```
 int ndx;
        while ((ndx = callNotes.GetNextSpellingErrorCharacterIndex(0, LogicalDirection.Forward)) != -1) 
        {
            var err = callNotes.GetSpellingError(ndx);
            foreach (String sugg in err.Suggestions)
            {
                err.Correct(sugg);
                break;
            }
        } 
```

# ios - OpenGL ES 2.0 绘制简单三角形不显示任何内容

> ID：14012780
> 
> 赞同：3
> 
> 时间：2012-12-23T16:53:33.830
> 
> 标签：ios, opengl-es, opengl-es-2.0, glkit

我完全没有想法。

我有 OpenGL ES 2.0 编程指南书，我有 Apple 的模板 OpenGL ES 2.0 代码，我关注了这个页面： http: [//open.gl/drawing](http://open.gl/drawing)

我似乎无法绘制一个简单的三角形，我不确定我做错了什么。

注意：我也有一个 GameViewController.xib 文件，它是 GLKView 的子类，就像 Apple 的模板代码一样。

我的顶点着色器：

```
attribute vec4 position;

void main()
{
    gl_Position = position;
} 
```

我的片段着色器：

```
void main()
{
    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
} 
```

我的 GameViewController 头文件：

```
#import <UIKit/UIKit.h>
#import <GLKit/GLKit.h>

@interface GameViewController : GLKViewController

@end 
```

我的 GameViewController 实现文件：

```
#import "GameViewController.h"

const GLfloat vertices[] =
{
    0.0f, 0.5f,
    -0.5f, -0.5f,
    0.5f, -0.5f
};

// Class extension to keep data private
@interface GameViewController()
{        
    // vertex buffer object
    GLuint vbo;

    // vertex array object
    GLuint vao;

    // shader program
    GLuint shaderProgram;
}

@property (strong, nonatomic) EAGLContext *context;
@property (strong, nonatomic) GLKBaseEffect *effect;

@end

@implementation GameViewController

// setup our OpenGL context
-(void)viewDidLoad
{
    [super viewDidLoad];

    [self setupContext];

    // -------------------------------------------------------------
    // create a vertex array object that will hold
    // all the linking between attributes and vertex data
    // -------------------------------------------------------------
    [self createVertexArrayObject];

    [self createVertexBufferObject];

    [self loadShaders];

    [self checkErrors];
}

-(void)checkErrors
{
    GLenum error = glGetError();

    switch (error) {
        case GL_NO_ERROR:
            NSLog(@"No errors");
            break;
        case GL_INVALID_ENUM:
            NSLog(@"An unacceptable value is specified for an enumerated argument. The offending command is ignored and has no other side effect than to set the error flag.");
            break;
        case GL_INVALID_VALUE:
            NSLog(@"A numeric argument is out of range. The offending command is ignored and has no other side effect than to set the error flag.");
            break;
        case GL_INVALID_OPERATION:
            NSLog(@"The specified operation is not allowed in the current state. The offending command is ignored and has no other side effect than to set the error flag.");
            break;
        case GL_INVALID_FRAMEBUFFER_OPERATION:
            NSLog(@"The frameBuffer object is not complete. The offending command is ignored and has no other side effect than to set the error flag.");
            break;
        case GL_OUT_OF_MEMORY:
            NSLog(@"There is not enough memory left to execute the command. The state of the GL is undefined, except for the state of the error flags, after this error is recorded.");
            break;
        case GL_STACK_UNDERFLOW:
            NSLog(@"An attempt has been made to perform an operation that would cause an internal stack to underflow.");
            break;
        case GL_STACK_OVERFLOW:
            NSLog(@"An attempt has been made to perform an operation that would cause an internal stack to overflow.");
            break;
        default:
            break;
    }
}

#pragma mark - Setup Context -

-(void)setupContext
{
    self.context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];

    if(!self.context)
    {
        NSLog(@"Failed to create OpenGL ES Context");
    }

    // tell our view the context is an OpenGL context
    GLKView *view = (GLKView *)self.view;
    view.context = self.context;
    view.drawableDepthFormat = GLKViewDrawableDepthFormat24;

    [EAGLContext setCurrentContext:self.context];

    self.effect = [[GLKBaseEffect alloc] init];

    glEnable(GL_DEPTH_TEST);
}

#pragma mark - Vertex Array Object Methods -

-(void)createVertexArrayObject
{
    glGenVertexArraysOES(1, &vao);
    glBindVertexArrayOES(vao);
}

#pragma mark - Create Vertex Buffer Object Method -

-(void)createVertexBufferObject;
{
    glGenBuffers(1, &vbo); // Generate 1 memory buffer for the VBO

    // Make our VBO the current buffer object to receive data
    glBindBuffer(GL_ARRAY_BUFFER, vbo);

    // -------------------------------------------------------------
    // Start copying data to our VBO
    //
    // GL_STATIC_DRAW will upload once and drawn many times
    // -------------------------------------------------------------
    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);

}

#pragma mark - Shader Code -

-(void)loadShaders
{
    // load both vertex shader and fragment shader
    GLuint vertexShader = [self compileVertexShader];
    GLuint fragmentShader = [self compileFragmentShader];

    // create a shader program from the vertex shader and fragment shader
    shaderProgram = [self combineVertexShader:vertexShader AndFragmentShader:fragmentShader];

    // linking vertex data and attributes
    GLint positionAttrib = glGetAttribLocation(shaderProgram, "position");

    glVertexAttribPointer(positionAttrib, 2, GL_FLOAT, GL_FALSE, 0, 0);

    glEnableVertexAttribArray(positionAttrib);
}

-(GLuint)compileVertexShader
{
    // get the path to the shader file as a C string
    const GLchar *vertexShaderPath = (GLchar *)[[NSString stringWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Shader" ofType:@"vsh"]
                                                                          encoding:NSUTF8StringEncoding
                                                                             error:nil] UTF8String];

    GLuint vertexShader = glCreateShader(GL_VERTEX_SHADER);
    glShaderSource(vertexShader, 1, &vertexShaderPath, NULL);
    glCompileShader(vertexShader);

    // Checking if shader compiled properly
    GLint status;
    glGetShaderiv(vertexShader, GL_COMPILE_STATUS, &status);

    if(status == GL_TRUE)
    {
        NSLog(@"Vertex shader compiled correctly");
    }
    else
    {
        NSLog(@"Vertex shader compiled failed");
    }

    GLint logLength;
    glGetShaderiv(vertexShader, GL_INFO_LOG_LENGTH, &logLength);
    if (logLength > 0) {
        GLchar *log = (GLchar *)malloc(logLength);
        glGetShaderInfoLog(vertexShader, logLength, &logLength, log);
        NSLog(@"Vertex Shader compile log:\n%s", log);
        free(log);
    }

    return vertexShader;
}

-(GLuint)compileFragmentShader
{
    // get the path to the shader as a C string
    const GLchar *fragmentShaderPath = (GLchar *)[[NSString stringWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Shader" ofType:@"fsh"]
                                                                          encoding:NSUTF8StringEncoding
                                                                             error:nil] UTF8String];

    GLuint fragmentShader = glCreateShader(GL_FRAGMENT_SHADER);
    glShaderSource(fragmentShader, 1, &fragmentShaderPath, NULL);
    glCompileShader(fragmentShader);

    // Checking if shader compiled properly
    GLint status;
    glGetShaderiv(fragmentShader, GL_COMPILE_STATUS, &status);

    if(status == GL_TRUE)
    {
        NSLog(@"Fragment shader compiled correctly");
    }
    else
    {
        NSLog(@"Fragment shader compiled failed");
    }

    GLint logLength;
    glGetShaderiv(fragmentShader, GL_INFO_LOG_LENGTH, &logLength);
    if (logLength > 0) {
        GLchar *log = (GLchar *)malloc(logLength);
        glGetShaderInfoLog(fragmentShader, logLength, &logLength, log);
        NSLog(@"Fragment Shader compile log:\n%s", log);
        free(log);
    }

    return fragmentShader;
}

-(void)linkProgram:(GLuint)paramShaderProgram
{
    // link shader to program now and become active shader program
    glLinkProgram(paramShaderProgram);

    GLint status;
    // test if the program linked correctly
    glGetProgramiv(paramShaderProgram, GL_LINK_STATUS, &status);

    if(status == GL_TRUE)
    {
        NSLog(@"Shader program linked correctly");
    }
    else
    {
        NSLog(@"Shader program linked failed");
    }
}

-(void)validateProgram:(GLuint)paramShaderProgram
{
    GLint status, logLength;

    glValidateProgram(paramShaderProgram);

    glGetProgramiv(paramShaderProgram, GL_VALIDATE_STATUS, &status);

    if(status == GL_TRUE)
    {
        NSLog(@"Shader program validated correctly");
    }
    else
    {
        NSLog(@"Shader program validate failed");
    }

    glGetProgramiv(paramShaderProgram, GL_INFO_LOG_LENGTH, &logLength);

    if(logLength > 0)
    {
        GLchar *log = (GLchar *)malloc(logLength);
        glGetProgramInfoLog(paramShaderProgram, logLength, &logLength, log);
        NSLog(@"Program validate log:\n%s", log);
        free(log);
    }
}

-(GLuint)combineVertexShader:(GLuint)paramVertexShader AndFragmentShader:(GLuint)paramFragmentShader
{
    GLuint newShaderProgram = glCreateProgram();

    glAttachShader(newShaderProgram, paramVertexShader);
    glAttachShader(newShaderProgram, paramFragmentShader);

    [self linkProgram:newShaderProgram];

    [self validateProgram:newShaderProgram];

    // start using shader now, will use the active shader program
    glUseProgram(newShaderProgram);

    return newShaderProgram;
}

#pragma mark - GLKViewController Render Delegate Methods -

-(void)setupViewport
{
    glViewport(0, 0, self.view.bounds.size.width, self.view.bounds.size.height);

    self.effect.transform.projectionMatrix = GLKMatrix4MakeOrtho(-3, 3, -2, 2, 1, -1);
}

-(void)update
{
    [self setupViewport];
}

-(void)glkView:(GLKView *)view drawInRect:(CGRect)rect
{
    glClearColor(0.65f, 0.65f, 0.65f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT);

    [self.effect prepareToDraw];

    glDrawArrays(GL_TRIANGLES, 0, 3);
}

#pragma mark - Cleanup Memory -

-(void)tearDownContext
{
    [EAGLContext setCurrentContext:self.context];

    // delete vertex buffer object and vertex array object
    glDeleteBuffers(1, &vbo);
    glDeleteVertexArraysOES(1, &vao);

    // delete shader program
    if(shaderProgram)
    {
        glDeleteProgram(shaderProgram);
        shaderProgram = 0;
    }

    // unset OpenGL context
    if ([EAGLContext currentContext] == self.context)
    {
        [EAGLContext setCurrentContext:nil];
    }

    self.context = nil;
}

-(void)dealloc
{
    [self tearDownContext];
}

-(void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];

    if([self isViewLoaded] && self.view.window == nil)
    {
        self.view = nil;

        [self tearDownContext];

        if([EAGLContext currentContext] == self.context)
        {
            [EAGLContext setCurrentContext:nil];
        }

        self.context = nil;
    }

    // Dispose of any resources that can be recreated
}

@end 
```

我所看到的只是我清除颜色的灰色背景屏幕。

如果有人能指出我哪里出错了，那就太好了。

## 编辑

我决定把我个人对 Ray 网站的厌恶放在一边，硬着头皮完成了这个教程：

[http://www.raywenderlich.com/3664/opengl-es-2-0-for-iphone-tutorial](http://www.raywenderlich.com/3664/opengl-es-2-0-for-iphone-tutorial)

本教程不使用 GLKit，这是一个额外的好处，因为学习者编写自己的帧缓冲区和渲染缓冲区，并将它们呈现到屏幕上。

我觉得这比使用 GLKit 更接近 OpenGL ES 2.0 管道。

正如里卡多建议的那样，在这个时候，使用 GLKit 比它的价值更容易理解。

我还强烈建议使用上面 Ray 的网站教程链接来运行一个工作程序，而不是尝试遵循 Apple 的模板代码。

在我的例子中，苹果的模板代码和书有太多的矛盾，造成了很多时间的浪费。

对于那些仍然对使用 GLKit 方法感兴趣的人，我还使用 GLKit 解决了这个问题。

解决方案是设置我的投影矩阵和绑定正确的顶点着色器位置属性位置的组合。

我还要指出的一个非常重要的注意事项是：

**确保目标的副本捆绑资源具有顶点和片段着色器！**

我处于三角形为黑色的位置，无论我在片段着色器文件中输入什么，我都无法更改三角形的颜色。问题是这些着色器文件默认不会复制到捆绑资源中。

无论如何，下面完整提供了我的工作更新代码：

```
#import "GameViewController.h"

#define BUFFER_OFFSET(i) ((char *)NULL + (i))

// Uniform index.
enum
{
    UNIFORM_MODELVIEWPROJECTION_MATRIX,
    UNIFORM_NORMAL_MATRIX,
    NUM_UNIFORMS
};
GLint uniforms[NUM_UNIFORMS];

// Attribute index.
enum
{
    ATTRIB_VERTEX,
    ATTRIB_NORMAL,
    NUM_ATTRIBUTES
};

const GLfloat vertices[] =
{
    0.0f, 0.5f,
    -0.5f, -0.5f,
    0.5f, -0.5f
};

// Class extension to keep data private
@interface GameViewController()
{
    // vertex buffer object
    GLuint vbo;

    // vertex array object
    GLuint vao;

    // shader program
    GLuint shaderProgram;

    GLKMatrix4 modelViewProjectionMatrix;
    GLKMatrix3 normalMatrix;
}

@property (strong, nonatomic) EAGLContext *context;
@property (strong, nonatomic) GLKBaseEffect *effect;

@end

@implementation GameViewController

// setup our OpenGL context
-(void)viewDidLoad
{
    [super viewDidLoad];

    [self setupContext];

    [self loadShaders];

    // -------------------------------------------------------------
    // create a vertex array object that will hold
    // all the linking between attributes and vertex data
    // -------------------------------------------------------------
    [self createVertexArrayObject];

    [self createVertexBufferObject];

    [self linkAttributes];

    [self checkErrors];
}

-(void)checkErrors
{
    GLenum error = glGetError();

    switch (error) {
        case GL_NO_ERROR:
            NSLog(@"No errors");
            break;
        case GL_INVALID_ENUM:
            NSLog(@"An unacceptable value is specified for an enumerated argument. The offending command is ignored and has no other side effect than to set the error flag.");
            break;
        case GL_INVALID_VALUE:
            NSLog(@"A numeric argument is out of range. The offending command is ignored and has no other side effect than to set the error flag.");
            break;
        case GL_INVALID_OPERATION:
            NSLog(@"The specified operation is not allowed in the current state. The offending command is ignored and has no other side effect than to set the error flag.");
            break;
        case GL_INVALID_FRAMEBUFFER_OPERATION:
            NSLog(@"The frameBuffer object is not complete. The offending command is ignored and has no other side effect than to set the error flag.");
            break;
        case GL_OUT_OF_MEMORY:
            NSLog(@"There is not enough memory left to execute the command. The state of the GL is undefined, except for the state of the error flags, after this error is recorded.");
            break;
        case GL_STACK_UNDERFLOW:
            NSLog(@"An attempt has been made to perform an operation that would cause an internal stack to underflow.");
            break;
        case GL_STACK_OVERFLOW:
            NSLog(@"An attempt has been made to perform an operation that would cause an internal stack to overflow.");
            break;
        default:
            break;
    }
}

#pragma mark - Setup Context -

-(void)setupContext
{
    self.context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];

    if(!self.context)
    {
        NSLog(@"Failed to create OpenGL ES Context");
    }

    // tell our view the context is an OpenGL context
    GLKView *view = (GLKView *)self.view;
    view.context = self.context;
    view.drawableDepthFormat = GLKViewDrawableDepthFormat24;

    [EAGLContext setCurrentContext:self.context];

    self.effect = [[GLKBaseEffect alloc] init];

    //glEnable(GL_DEPTH_TEST);
}

#pragma mark - Vertex Array Object Methods -

-(void)createVertexArrayObject
{
    glGenVertexArraysOES(1, &vao);
    glBindVertexArrayOES(vao);
}

#pragma mark - Create Vertex Buffer Object Method -

-(void)createVertexBufferObject;
{
    glGenBuffers(1, &vbo); // Generate 1 memory buffer for the VBO

    // Make our VBO the current buffer object to receive data
    glBindBuffer(GL_ARRAY_BUFFER, vbo);

    // -------------------------------------------------------------
    // Start copying data to our VBO
    //
    // GL_STATIC_DRAW will upload once and drawn many times
    // -------------------------------------------------------------
    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);
}

-(void)linkAttributes
{
    /*
    // linking vertex data and attributes
    GLint positionAttrib = glGetAttribLocation(shaderProgram, "position");
    glVertexAttribPointer(positionAttrib, 2, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(0));
    glEnableVertexAttribArray(positionAttrib);
    */

    glVertexAttribPointer(GLKVertexAttribPosition, 2, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(0));
    glEnableVertexAttribArray(GLKVertexAttribPosition);

    glBindVertexArrayOES(0);
}

#pragma mark - Shader Code -

-(void)loadShaders
{
    shaderProgram = glCreateProgram();

    // load both vertex shader and fragment shader
    GLuint vertexShader = [self compileVertexShader];
    GLuint fragmentShader = [self compileFragmentShader];

    // create a shader program from the vertex shader and fragment shader
    [self combineVertexShader:vertexShader AndFragmentShader:fragmentShader];

    [self linkProgram:shaderProgram];

    // Release vertex and fragment shaders.
    if (vertexShader) {
        glDetachShader(shaderProgram, vertexShader);
        glDeleteShader(vertexShader);
    }
    if (fragmentShader) {
        glDetachShader(shaderProgram, fragmentShader);
        glDeleteShader(fragmentShader);
    }

    //NSLog(@"uniforms[UNIFORM_MODELVIEWPROJECTION_MATRIX] before = %d", uniforms[UNIFORM_MODELVIEWPROJECTION_MATRIX]);

    uniforms[UNIFORM_MODELVIEWPROJECTION_MATRIX] = glGetUniformLocation(shaderProgram, "modelViewProjectionMatrix");

    //NSLog(@"uniforms[UNIFORM_MODELVIEWPROJECTION_MATRIX] after = %d", uniforms[UNIFORM_MODELVIEWPROJECTION_MATRIX]);
}

-(GLuint)compileVertexShader
{
    // get the path to the shader file as a C string
    const GLchar *vertexShaderPath = (GLchar *)[[NSString stringWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Shader" ofType:@"vsh"]
                                                                          encoding:NSUTF8StringEncoding
                                                                             error:nil] UTF8String];

    GLuint vertexShader = glCreateShader(GL_VERTEX_SHADER);
    glShaderSource(vertexShader, 1, &vertexShaderPath, NULL);
    glCompileShader(vertexShader);

    // Checking if shader compiled properly
    GLint status;
    glGetShaderiv(vertexShader, GL_COMPILE_STATUS, &status);

    if(status == GL_TRUE)
    {
        NSLog(@"Vertex shader compiled correctly");
    }
    else
    {
        NSLog(@"Vertex shader compiled failed");
    }

    GLint logLength;
    glGetShaderiv(vertexShader, GL_INFO_LOG_LENGTH, &logLength);
    if (logLength > 0) {
        GLchar *log = (GLchar *)malloc(logLength);
        glGetShaderInfoLog(vertexShader, logLength, &logLength, log);
        NSLog(@"Vertex Shader compile log:\n%s", log);
        free(log);
    }

    return vertexShader;
}

-(GLuint)compileFragmentShader
{
    // get the path to the shader as a C string
    const GLchar *fragmentShaderPath = (GLchar *)[[NSString stringWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Shader" ofType:@"fsh"]
                                                                            encoding:NSUTF8StringEncoding
                                                                               error:nil] UTF8String];

    GLuint fragmentShader = glCreateShader(GL_FRAGMENT_SHADER);
    glShaderSource(fragmentShader, 1, &fragmentShaderPath, NULL);
    glCompileShader(fragmentShader);

    // Checking if shader compiled properly
    GLint status;
    glGetShaderiv(fragmentShader, GL_COMPILE_STATUS, &status);

    if(status == GL_TRUE)
    {
        NSLog(@"Fragment shader compiled correctly");
    }
    else
    {
        NSLog(@"Fragment shader compiled failed");
    }

    GLint logLength;
    glGetShaderiv(fragmentShader, GL_INFO_LOG_LENGTH, &logLength);
    if (logLength > 0) {
        GLchar *log = (GLchar *)malloc(logLength);
        glGetShaderInfoLog(fragmentShader, logLength, &logLength, log);
        NSLog(@"Fragment Shader compile log:\n%s", log);
        free(log);
    }

    return fragmentShader;
}

-(void)combineVertexShader:(GLuint)paramVertexShader AndFragmentShader:(GLuint)paramFragmentShader
{
    glAttachShader(shaderProgram, paramVertexShader);
    glAttachShader(shaderProgram, paramFragmentShader);

    glBindAttribLocation(shaderProgram, GLKVertexAttribPosition, "position");

    //[self validateProgram:shaderProgram];
}

-(void)linkProgram:(GLuint)paramShaderProgram
{
    // link shader to program now and become active shader program
    glLinkProgram(paramShaderProgram);

    GLint status;
    // test if the program linked correctly
    glGetProgramiv(paramShaderProgram, GL_LINK_STATUS, &status);

    if(status == GL_TRUE)
    {
        NSLog(@"Shader program linked correctly");
    }
    else
    {
        NSLog(@"Shader program linked failed");
    }

    GLint logLength;
    glGetProgramiv(shaderProgram, GL_INFO_LOG_LENGTH, &logLength);
    if (logLength > 0) {
        GLchar *log = (GLchar *)malloc(logLength);
        glGetProgramInfoLog(shaderProgram, logLength, &logLength, log);
        NSLog(@"Program link log:\n%s", log);
        free(log);
    }
}

-(void)validateProgram:(GLuint)paramShaderProgram
{
    GLint status, logLength;

    glValidateProgram(paramShaderProgram);

    glGetProgramiv(paramShaderProgram, GL_VALIDATE_STATUS, &status);

    if(status == GL_TRUE)
    {
        NSLog(@"Shader program validated correctly");
    }
    else
    {
        NSLog(@"Shader program validate failed");
    }

    glGetProgramiv(paramShaderProgram, GL_INFO_LOG_LENGTH, &logLength);

    if(logLength > 0)
    {
        GLchar *log = (GLchar *)malloc(logLength);
        glGetProgramInfoLog(paramShaderProgram, logLength, &logLength, log);
        NSLog(@"Program validate log:\n%s", log);
        free(log);
    }
}

#pragma mark - GLKViewController Render Delegate Methods -

-(void)setupViewport
{
    //float aspect = fabsf(self.view.bounds.size.width / self.view.bounds.size.height);

    //GLKMatrix4 projectionMatrix = GLKMatrix4MakePerspective(GLKMathDegreesToRadians(65.0f), aspect, 1.0f, -10.0f);
    GLKMatrix4 projectionMatrix = GLKMatrix4MakeOrtho(-1, 1, -1, 1, 1, -1);
    self.effect.transform.projectionMatrix = projectionMatrix;

    GLKMatrix4 modelViewMatrix = GLKMatrix4MakeTranslation(0.0f, 0.0f, 0.0f);
    self.effect.transform.modelviewMatrix = modelViewMatrix;

    modelViewProjectionMatrix = GLKMatrix4Multiply(projectionMatrix, modelViewMatrix);
    normalMatrix = GLKMatrix3InvertAndTranspose(GLKMatrix4GetMatrix3(modelViewMatrix), NULL);

    glUniformMatrix4fv(uniforms[UNIFORM_MODELVIEWPROJECTION_MATRIX], 1, GL_FALSE, modelViewProjectionMatrix.m);
    glUniformMatrix3fv(uniforms[UNIFORM_NORMAL_MATRIX], 1, 0, normalMatrix.m);
}

-(void)update
{
    [self setupViewport];
}

-(void)glkView:(GLKView *)view drawInRect:(CGRect)rect
{
    glClearColor(0.65f, 0.65f, 0.65f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT);

    glBindVertexArrayOES(vao);

    [self.effect prepareToDraw];

    glUseProgram(shaderProgram);

    glDrawArrays(GL_TRIANGLES, 0, 3);
}

#pragma mark - Cleanup Memory -

-(void)tearDownContext
{
    [EAGLContext setCurrentContext:self.context];

    // delete vertex buffer object and vertex array object
    glDeleteBuffers(1, &vbo);
    glDeleteVertexArraysOES(1, &vao);

    // delete shader program
    if(shaderProgram)
    {
        glDeleteProgram(shaderProgram);
        shaderProgram = 0;
    }

    // unset OpenGL context
    if ([EAGLContext currentContext] == self.context)
    {
        [EAGLContext setCurrentContext:nil];
    }

    self.context = nil;
}

-(void)dealloc
{
    [self tearDownContext];
}

-(void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];

    if([self isViewLoaded] && self.view.window == nil)
    {
        self.view = nil;

        [self tearDownContext];

        if([EAGLContext currentContext] == self.context)
        {
            [EAGLContext setCurrentContext:nil];
        }

        self.context = nil;
    }

    // Dispose of any resources that can be recreated
}

@end 
```

希望对其他人有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T18:44:48.387

忘记 Apple 的 OpenGL ES 2.0 模板代码吧。如果您是初学者，其中有太多内容无法正确理解，它混合了 OpenGL ES 1.1（GLKBaseEffect）和 2.0（着色器）。

您最好从头开始创建应用程序并了解 GLKit 和着色器的优缺点。

本教程很好地介绍了使用 GLKBaseEffect 的固定管道功能的 GLKit：

*   [http://www.raywenderlich.com/5223/beginning-opengl-es-2-0-with-glkit-part-1](http://www.raywenderlich.com/5223/beginning-opengl-es-2-0-with-glkit-part-1)
*   [http://www.raywenderlich.com/5235/beginning-opengl-es-2-0-with-glkit-part-2](http://www.raywenderlich.com/5235/beginning-opengl-es-2-0-with-glkit-part-2)

如果你想要更深入的知识并学习如何在 iPhone 环境中使用着色器，我强烈推荐这本书：

*   [http://ofps.oreilly.com/titles/9780596804824/](http://ofps.oreilly.com/titles/9780596804824/)

最终，您可能希望结合使用 GLKView 来绕过所有缓冲区样板代码，并使用着色器对您的程序进行最佳控制。OpenGL ES 有一个艰难的学习曲线，但是一旦你克服了第一个障碍，事情就会变得清晰很多。

# asp.net - 网页或项目何时被认为是完整的？

> ID：14012785
> 
> 赞同：0
> 
> 时间：2012-12-23T16:54:02.333
> 
> 标签：asp.net, html

我被要求为客户设计一个网站作为“副业”。我正在尝试为该项目写一份工作说明。过去我也做过类似的工作，经常遇到这样的情况，我认为工作已经“完成”了，但客户却想要无休止的调整和改变。（如您所知，网站永远在“建设中”）。

当您有诸如“设计主页，设计联系我们页面”之类的要求时，您如何将页面定义为“完成”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T16:57:49.620

在他们接受你的工作完成之前，不要放任何东西。这应该足以激励他们不要把你串起来，并让他们拥有他们需要的优质网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T17:05:49.907

要求客户为版本 1 设置需求规范。当您满足本文档中包含的需求时，您的工作就完成了。其他一切都属于下一个版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T17:06:12.790

在同样的情况下，我告诉我的客户**“你想要 A、B、C 和 D。好的，在这里签字，我们同意申请的结尾是 AD。现在如果你以后想要更多的东西，那不是我们合同的一部分，所以我们将来会处理它，当然它有它自己的价格。”** 这样你就可以让他们在签约前思考，很多事情变得更清楚，很多需求突然出现，但未来他们要么为更多需求付出更多，要么不再说话:)

# php - 如何将图像上传到 PHP 中的正确路径？

> ID：14012788
> 
> 赞同：0
> 
> 时间：2012-12-23T16:54:24.007
> 
> 标签：php, file-upload, upload, path

我有一个带有以下图像路径的网站：domain.com/images

我在后端使用 PHP 脚本将图像上传到该文件夹​​，但允许我将图像上传到上述路径的页面位于 domain.com/administration/upload.php。

所以现在当我使用脚本写入 domain.com/images 时，这就是我正在使用的：

```
 $newname="/images/".$image_name; 
```

由于某种原因，它不会写入该文件夹并且我没有收到任何错误，这是我获取脚本的链接：

```
 http://www.reconn.us/content/view/30/51/ 
```

我该怎么做才能让它从 domain.com/administration/upload.php 写入该 domain.com/images 路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T16:58:24.453

您必须区分虚拟服务器路径和文件系统路径。

*您的磁盘*上没有`/images/`目录， 但类似*`/home/www/user/public_html/images/`*

 *因此，将您的代码更改为

```
$newname = $_SERVER['DOCUMENT_ROOT']."/images/".$image_name; 
```

应该没问题

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-23T17:56:19.660

您可以试试这个以获得文件夹的确切路径

/* $_SERVER['DOCUMENT_ROOT'] 将指向您的根文件夹（ www ），然后是您的网站文件夹名称和它们的图像文件夹名称 */

$newname = $_SERVER['DOCUMENT_ROOT']."/文件夹名/".$image_name;*

# html - 网站试图在没有任何东西的地方滚动

> ID：14012789
> 
> 赞同：0
> 
> 时间：2012-12-23T16:54:29.983
> 
> 标签：html, css

我的网站有一个滚动条，它向右移动很远，一个向下滚动。这些区域没有显示任何内容，因此滚动条是不必要的！如果有的话，它可以放在一页上。这些在我的页面周围创建了很多空白空间。

我怎样才能阻止这种情况发生？

```
 <!DOCTYPE html>
<head>
<link href='http://fonts.googleapis.com/css?family=Paytone+One' rel='stylesheet' type='text/css'>
<title>Louis Moore | Creating The Future  </title>
<!--[if IE]>
<link rel="stylesheet" type"text/css" href="ie.css" >
<![endif]-->

</head>
<style>
.box {
background-color: #F1F2F2;
border: 1.5px #D1D3D4 solid;
position: relative;
top: 100px;
height:450px;
width:100%;
}
.image1 {
position: relative;
top:-100px;
left: 390px;
}
body{
font-family: 'Paytone One', sans-serif;
font-size: 30px;
}
h1 {
font-family: 'Paytone One', sans-serif;
font-size: 40px;
position: relative;
top:-250px;
left: 370px;
}
h2 {
font-family: 'Paytone One', sans-serif;
font-size: 30px;
position: relative;
top:-300px;
left: 480px;
color: #FC3B3B;
}
h3 {
font-family: 'Paytone One', sans-serif;
font-size: 20px;
position: relative;
top:-290px;
left: 390px;
}
.image2 {
position: relative;
top:-300px;
left: 590px;
}
.box1 {
width: 100%;
height: 5px;
background-color:  #FC3B3B;
position: relative;
top:100px;
left: 0px;
}
p {
position: relative;
top:150px;
left: 100px;
font-size: 15px;
font-family: arial;
color: #585858;
}
</style>

<body>
<div class="box">
<img src="louis.png" class="image1" alt="." width="400px" height="400px">
<h1> WELCOME TO MY PAGE</h1> 
<h2>COMING SOON... </h2>
<h3>BUT FOR NOW FOLLOW ME ON TWITTER</h3>
<a href="http://twitter.com/louismoore18"><img src="twitter.png" class="image2" border="0" alt="."></a>
</div>
<div class="box1">

</div>
<p>louismoore.net © All rights reserved 2012</p>
</body>
</html> 
```

编辑：这就是它的样子 ![](../Images/390b06e342940acc8b8cfefea1cdb745.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T17:02:59.893

`relative`这是定位和设置`left`值的工件。

删除它，多余的空间就消失了。

[演示](http://jsfiddle.net/eB9sA/)

### 编辑

您不需要任何相对定位。您尝试完成的设计可以用`text-align: center`.

HTML

```
<div>
  <img src="//placehold.it/200x200">
  <h1>Welcome to my page</h1>
  <h2>Coming Soon...</h2>
  <h3>But for now follow me on Twitter</h3>
</div>​ 
```

CSS

```
@import url(http://fonts.googleapis.com/css?family=Paytone+One);

div {
    text-align: center;
    background: #ddd;
    border-bottom: 3px solid red;
    margin: 5px;
    padding: 10px;
    font-family: 'Paytone One', sans-serif;
    font-size: 24px;
}

h1 { 
    font-size: 2em;
}

h2 {
    font-size: 1.5em;
    color: red;
}

img {
    width: 200px;
    height: 200px;
    }​ 
```

[演示](http://jsfiddle.net/jG4Hb/)

# java - 无法显示通过微调器选择的选项

> ID：14012792
> 
> 赞同：0
> 
> 时间：2012-12-23T16:55:14.097
> 
> 标签：java, android

我希望在微调器菜单中选择的选项显示在 id 为“spinnertxt”的文本视图中。

我可以打开微调器菜单并选择该选项，但之后没有任何反应。

这是代码：

```
import android.app.Activity;
import android.os.Bundle;
import android.view.Menu; 
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.TextView;

 public class Addproject extends Activity implements OnItemSelectedListener {

protected int mPos;
protected String mSelection;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_addproject);

    Spinner spinner = (Spinner) findViewById(R.id.difficultyspinner); ArrayAdapter<CharSequence> 
    adapter = ArrayAdapter.createFromResource(this,R.array.difficultyarray, android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_addproject, menu);
    return true;
}

@Override
public void onItemSelected(AdapterView<?> parent, View view, 
        int pos, long id) {
    // TODO Auto-generated method stub

    Addproject.this.mPos = pos;
    Addproject.this.mSelection = parent.getItemAtPosition(pos).toString();

    TextView spinnerresult = (TextView)findViewById(R.id.spinnertxt);
    spinnerresult.setText(Addproject.this.mSelection);

}

@Override
public void onNothingSelected(AdapterView<?> parent) {
    // TODO Auto-generated method stub

    //NOTHING TO LOOK HERE, MOVE ALONG

}

  } 
```

有人能告诉我为什么吗？我是新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T17:02:08.070

实例化您的数组并使用

```
Addproject.this.mSelection = array[pos]; 
```

代替

```
Addproject.this.mSelection = parent.getItemAtPosition(pos).toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T19:43:42.820

解决了！

一个听众不见了。

我刚刚添加

> ```
> spinner.setOnItemSelectedListener(this); 
> ```

`onCreate()`之后_`setAdapater()`

需要侦听器，以便应用程序侦听对特定项目的点击。

# uitableview - 如何使用 Monotouch 更改 DetailTextLabel 的颜色？

> ID：14012800
> 
> 赞同：2
> 
> 时间：2012-12-23T16:55:41.140
> 
> 标签：uitableview, xamarin.ios, detailtextlabel

我似乎无法更改 UITableView 中 DetailTextLabel 的颜色。

我可以更改字体和大小，但不能更改颜色。这是我的代码：

```
public override UITableViewCell GetCell (UITableView tableView, MonoTouch.Foundation.NSIndexPath indexPath)
{

  UITableViewCell cell = new UITableViewCell (UITableViewCellStyle.Value1, cellIdentifier); 

  cell.TextLabel.Text = Label;
  cell.TextLabel.AdjustsFontSizeToFitWidth = true;
  cell.UserInteractionEnabled = false;

  cell.DetailTextLabel.Font = UIFont.SystemFontOfSize (13f);
  cell.DetailTextLabel.Text = Data;
  cell.DetailTextLabel.AdjustsFontSizeToFitWidth = true;
  cell.DetailTextLabel.TextColor = new UIColor(0,0,0,0);  // THIS BIT NEVER WORKS
  // cell.DetailTextLabel.TextColor = UIColor.Black;  // NEITHER DID THIS.

} 
```

无论如何，DetailTextLabel 总是以灰色显示。我该如何改变这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T06:33:43.293

```
 cell.DetailTextLabel.textColor = [UIColor colorWithRed:0 green:0 blue:0.6 alpha:1] 
```

试试这个我想这个工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T08:21:20.727

要更改默认 UITableViewCells 的颜色，包括设置单元格的背景颜色，请在下面添加委托方法：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T12:23:06.520

首先从类中制作自己的标签`UILabel`并设置所有要显示的属性，如字体颜色、字体大小。然后将此标签设置为`cell.DetailTextLabel=yourLabel`.

# python - 要在 python 中列出的元组列表

> ID：14012806
> 
> 赞同：0
> 
> 时间：2012-12-23T16:56:32.740
> 
> 标签：python, list, tuples

> **可能重复：**
> [从 Python 中的列表列表中制作一个扁平列表 在 Python 中](https://stackoverflow.com/questions/952914/making-a-flat-list-out-of-list-of-lists-in-python)
> [扁平化（不规则的）列表列表](https://stackoverflow.com/questions/2158395/flatten-an-irregular-list-of-lists-in-python)

这一定很容易，但我似乎找不到单行/有效的解决方案：

我想转换`[(1,2),(3,4),(5,6)]`成`[1,2,3,4,5,6]`

# apache-flex - 计算不起作用 - flex

> ID：14012807
> 
> 赞同：0
> 
> 时间：2012-12-23T16:56:33.113
> 
> 标签：apache-flex, function, flash-builder

我制作了一个计算总价的函数，但它似乎没有用。该函数用于从 arraycollection 中获取 2 个数据字段，这两个数据字段是我希望能够计算的。

```
 [Bindable]public var total:Number=0;
        private function gridClickEvent(event:ListEvent):void {             
            var quantity:Number=acCart[event.columnIndex].quantity;
            var price:Number=acCart[event.columnIndex].price;
            total += quantity * price;

        } 
```

我计算的总数将显示在标签中

```
<s:Label id="prijs" text="{total}" /> 
```

我想要的是计算总价。我有一个包含 3 个字段数据（名称产品、数量和价格）的数组集合。在一个函数中，我想从数组集合中提取数据“数量”和数据“价格”，以便计算“总价格”。

目前我写的功能不起作用。我没有收到任何数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T17:07:23.900

`total+=`不是`total=+`。_ 运算符中有语法错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T17:44:08.733

做一些调试：

```
private function gridClickEvent(event:ListEvent):void {

    //see if getting expected values 
    trace(event.rowIndex);
    trace(acCart[event.rowIndex].quantity);
    trace(acCart[event.rowIndex].price);

    var quantity:Number=parseFloat(acCart[event.rowIndex].quantity);
    var price:Number=parseFloat(acCart[event.rowIndex].price);
    total += quantity * price;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T18:00:49.600

为什么不只是

```
private function gridClickEvent(event:ListEvent):void {
    .... // your math here

    trace("old total = "+ total);
    total += quantity * price;
    trace("new total = "+ total);

    // forget about binding and manually set the property
    prijs.text = total.toString();
} 
```

绑定有时在 flex 中很疯狂，即使你/我完全理解 Binding 的机制，它仍然有可能绑定不工作或者值被设置 N 次而不是一次（有几个 MVC 框架的情况） ）。

出于这个原因，我讨厌绑定，并且我在使用它时有所保留。

PS：你的跟踪输出是什么？（请“调试”，不要运行，以获得控制台输出）

# jquery-ui - 用jquery选择后如何找到td的表头

> ID：14012810
> 
> 赞同：-2
> 
> 时间：2012-12-23T16:57:15.837
> 
> 标签：jquery-ui, jquery, jquery-selectors

![在此处输入图像描述](../Images/d27bf351c762116e27c06181054d6ed5.png)

嗨，如上图所示，我正在创建一个简单的日历以在我的项目中使用。

表格的 HTML：

```
<table>
<tr><th>time</th><th>2012-12-23</th>etc..</tr>
<tr><th>09:00AM</th><td></td><td></td>etc...</tr> 
```

并且 ii 使用 jquery(selectable) 让那些 td 可选择。

**我的问题：**当用户单击保存将表单数据发布到 php 文件时，我如何还包括所选 td 的日期和时间？

例如：我希望当用户点击立即保存（在 img 上方）时，它会发送**“2012-12-24 12:00 PM”**

* * *

问题解决了“raina77ow”的答案。

但是从评论和我的 -ve 投票中，我认为我的问题很简短，所以我添加了代码以使事情变得清晰：0

HTML

```
 <FORM id='booking_form'>
A form that u see above in img</form><a id='save'>save</a>
        <h1>Week Calendar</h1>
        <div class="body">
            <table id='schedule'>
                <thead>
                <tr><th>Time</th><?foreach($cal[0] as $d)echo "<th>$d</th>";//$cal[0]contain week days starting from today?></tr>
                </thead>
                <?//create our table by nice clean loop
                $start_time = "09:00:00";
            $end_time = "20:00:00";
            while(strtotime($start_time) <= strtotime($end_time)){?>
            <tr>
                <th><?=date("h:i A", strtotime($start_time));?></th>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <?
            $start_time = date("H:i:s", strtotime("$start_time +60 minutes"));
            }//end while
            ?>

            <tr></tr>
    </table> 
```

**点击保存按钮时的JS**

```
var datas=$('#booking_form').serialize();
        var request = $.ajax({
                        url: "./booking/add",
                        type: "POST",
                        data: datas,
                        dataType: "html"
                        });

        request.done(function(msg) {$info.html( msg );});
        request.fail(function(jqXHR, textStatus) {$info.html( "<div id='error'>" + textStatus +"</div>");});
        request.success(function(data){$info.html(data);});
        return false; 
```

这是我的问题，如何将所选字段的时间和日期添加到该 ajax 帖子中。感谢您的回答，我想出了在#booking_form name=date 和 name=time 中添加 2 个隐藏输入，并添加了选定的选项来为它们添加值。

```
 $schedule.selectable({
    filter: 'td',
    selected: function( event, ui ) {
        var time = $(ui.selected).parent().children(':first').text();
            date = $(ui.selected).closest('table').children(':first').find('th').eq($(ui.selected).index()).text();
        $('#booking_form').find('[name=date]').val(date);
        $('#booking_form').find('[name=time]').val(time);
    }
    }); 
```

[我发现这是最佳答案](http://jsfiddle.net/8ZJ3C/2/)非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T17:01:31.597

很容易获得时间 - 因为它是点击行的第一个单元格。要获取“日期”列，我们可以使用该`index`方法。

```
$('td').click(function() {
  var $cell = $(this);
    time = $cell.parent().children(':first').text();
    date = $cell.closest('table').children(':first').find('th').eq($cell.index()).text();
    alert(date + ' ' + time);
});​ 
```

[**JS小提琴**](http://jsfiddle.net/txk7A/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T17:06:11.183

试试这个：

```
$('td').click(function() {
    var $td = $(this);
    var $th = $td.closest('table').find('th').eq($td.index());

    // Get the header text...
    alert($th.text());

    var $firstTD = $td.closest('tr').find('td:first');

    // Get the first td text...
    alert($firstTD.text());
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T17:01:42.483

使用纯 JavaScript，一旦你拥有`<td>`，你可以得到：

```
var time = td.parentNode.cells[0].firstChild.nodeValue,
    date = td.parentNode.parentNode.rows[0].cells[td.cellIndex].firstChild.nodeValue; 
```

# svg - 如何在 SVG 中绘制一条从粗开始变细直到达到单点的弧？

> ID：14012817
> 
> 赞同：5
> 
> 时间：2012-12-23T16:57:56.743
> 
> 标签：svg

我想要一条从粗到细的弧线，有点像这里的图 13：

![图片](../Images/16b493f7e9bb029988739407c0610c07.png)

SVG可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T21:26:49.097

不只是中风，不。您必须使用填充，并稍微偏移路径以获得逐渐变细的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-28T07:06:49.017

我找到了一种方法，只需画两条线，起点有一点偏移。像这样：

```
<svg viewBox="0 0 1000 400">
  <path d="M 50,250 C 50,150 150,50 250,50" fill="none" stroke="green" stroke-width="11"></path>
  <path d="M 60,250 C 60,150 150,50 250,50" fill="none" stroke="green" stroke-width="11"></path>
</svg>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T17:05:25.490

在 Inkscape 中，有用于绘制类似曲线的 Triangle In 和 Triangle Out 样式，它们只是创建一条路径，所以我假设不是。

# java - 为 InputStreamReader 定义此行为的规范在哪里？

> ID：14012818
> 
> 赞同：1
> 
> 时间：2012-12-23T16:57:59.900
> 
> 标签：java

考虑以下针对练习问题的代码，规范在哪里粗略地说：“在调用 readTokens() 时，等待用户按回车键，然后继续执行。”

我不完全理解为什么我的代码有效，为什么程序在显示“输入数据：”后暂停并等待回车？这种行为在哪里定义，如何改变？

```
import java.io.*;
import java.util.LinkedList;

public class StreamTokeTwo {

private int ttype = 0;
StreamTokenizer tokenizer = new StreamTokenizer(new BufferedReader(
        new InputStreamReader(System.in)));

private void setupTokenizer() {
    tokenizer.resetSyntax();
    tokenizer.wordChars(33, 126);
    tokenizer.whitespaceChars(0, 32);
    tokenizer.whitespaceChars(44,44);
    tokenizer.whitespaceChars(47,47);
    tokenizer.eolIsSignificant(true);
}

private String[] readTokens() {
    LinkedList<String> list = new LinkedList<String>();
    String[] array = null;

    do {
        try {
            ttype = tokenizer.nextToken();
        } catch (Exception e) {
            System.exit(1);
        }
        if (ttype == StreamTokenizer.TT_WORD) {
            list.add(tokenizer.sval);
        }
    } while (ttype != StreamTokenizer.TT_EOL);

    array = list.toArray(new String[0]);
    return array;
}

public static void main(String[] args) {
    StreamTokeTwo streamToke = new StreamTokeTwo();
    streamToke.setupTokenizer();

    for (int i = 0; i < 5; ++i) {
        System.out.print("Enter data: ");
        String[] array = streamToke.readTokens();
        for (String str : array) {
            System.out.print(str + " ");
        }
        System.out.println();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T17:13:41.563

等待输入行为是操作系统和 shell 的一个特性。它们将您的输入转换为 JVM 的标准输入，并决定什么构成文件结尾以及什么使数据可以传递给正在读取其标准输入的程序。

就 JVM 而言，它只是从标准输入中请求数据，如果没有可用数据并且它不在文件末尾，则会阻塞。如果标准输入是磁盘文件，它会做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T17:07:09.013

`InputStreamReader`具有**阻塞**行为的语句暗示了这一点：在有要读取的内容或发生错误之前，读取方法不会返回。

# c# - 实体框架不显示实体属性

> ID：14012821
> 
> 赞同：1
> 
> 时间：2012-12-23T16:58:21.097
> 
> 标签：c#, entity-framework

我添加了 .edmx 文件，但是当我想将其用作以下文件时

```
DB121212123524Entities entities = new DB121212123524Entities();
entities.SiparisGroup..... 
```

它显示实体名称（它显示 SiparisGroup 实体），但它不显示实体属性名称（SiparisGroup 实体具有 SiparisGroupId 但它不显示在点之后）。

这是 siparisGroupEntity

![在此处输入图像描述](../Images/99ccb06dc03ba8a74cf0327238d4b0a0.png)

这是控制器（没有实体属性）

![在此处输入图像描述](../Images/ec3b9a80e4e65b91ebd58e516288c386.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T17:58:36.880

```
DB121212123524Entities entities = new DB121212123524Entities();

DB121212123524Entities is probably a DbContext and entities.SiparisGroup is a DbSet.  Of course it won't show the entity properties. 
```

您需要首先从特定表中查询实体，在此示例中，我正在使用`SingleOrdDefault()`

```
var entity = entities.SiparisGroup.SingleOrDefault(); 
```

那么对象实体对象应该具有您正在寻找的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T17:34:19.150

如果我理解正确，您必须使用此代码访问实体属性

```
entities.SiparisGroup.Where(a=>a.MemberID == 1).ToList(); 
```

或者

```
var Table = entities.SiparisGroup.singleOrDefualt(a=>a.PrimaryKey == 123) 
```

# java - java多线程交通信号示例

> ID：14012826
> 
> 赞同：2
> 
> 时间：2012-12-23T16:58:41.383
> 
> 标签：java, multithreading, thread-synchronization

我正在尝试使用多线程概念在 java 中实现交通信号。我想使用同步。这是我编写的代码，但它没有按照我的期望运行：P .. 我实际上正在做的是取一个变量“a”，它的值决定了在特定时间应该打开哪个灯。例如：a==0 应该发出红灯.. 然后红灯在“a”上获得锁定，并在一段时间后将值更改为 a==1，然后打开橙灯，绿灯也会发生同样的情况出色地 ..

代码：

```
 package test;

class Lights implements Runnable {

    int a=0,i,j=25;
    synchronized public void valueA()
    {
        a=a+1;
    }

    public void showLight()
    {
        System.out.println("The Light is "+ Thread.currentThread().getName());
    }
    @Override
    public void run() {
        // TODO Auto-generated method stub
            for(i=25;i>=0;i--)
            {
                while(j<=i&&j>=10&&a==0)
                {
                showLight();
            /*some code here that locks the value of "a" for thread 1   
                and keeps it until thread 1 unlocks it! */
                try {

                    Thread.sleep(1000);

                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                j--;
                }

            while(j<10&&j>=5&&a==1)
            {

                showLight();
                /*some code here that locks the value of "a" for thread 1   
                and keeps it until thread 1 unlocks it! */
                try {
                    Thread.sleep(500);

                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                j--;
            }

            while(j<5&&j>=0&&a==2)
            {
                showLight();
            try {
                Thread.sleep(500);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
            }
    }
} 
```

主类：

```
package test;

public class MainTraffic {
public static void main(String args[])
{
    Runnable lights=new Lights();

    Thread one=new Thread(lights);
    Thread two=new Thread(lights);
    Thread three=new Thread(lights);

    one.setName("red");
    two.setName("orange");
    three.setName("green");

    one.start();
    two.start();
    three.start();

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:17:17.527

当您有多个不同的类实例时，synchronized(this) 不是很有用。只有在同一对象上同步的块才会被阻止并行运行。

一种选择是将一个通用对象（可能包含您希望它们使用的“a”）传递给 Lights 构造函数，并让线程在该对象上同步。

# css - 是否有一种简洁的方式来设置单个 Wordpress 导航菜单元素的样式？

> ID：14012834
> 
> 赞同：1
> 
> 时间：2012-12-23T17:00:20.413
> 
> 标签：css, wordpress, menu, navigation, nav

我正在编写的 Wordpress 主题中的导航菜单在同一个导航项中有两种不同颜色的文本。

```
<span class="nav-item-first">About</span><br /><span class="nav-item-second">Us</span> 
```

我知道我可以在 WP 菜单选项中添加一个跨度类。如果有一种方法可以让我保持整洁，这样当我把它交给客户时，他们看到的只是“关于我们”而不是 WP 菜单选项中的所有代码，那将是理想的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T17:09:16.257

由于它是一种风格元素，我认为使用 javascript 替换原始内容是安全的，因此 HTML 可以保持干净，并且您有一个脚本可以用复杂的 HTML 替换它。

值得注意的是，由于在各种情况下不渲染它，尤其是在打印页面时，javascript 不能 100% 依赖于此任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T17:12:23.147

### 你可以用这种方式重新编码，因为整个东西都在某个`<a>`标签内，对吧？

```
<a href="#">About <span>Us</span></a> 
```

### 并以这种方式给出 CSS：

```
a {color: #f00;}
a span {display: block; color: #00f;} 
```

# javascript - 此 JavaScript 代码在 HTML5 应用程序中不起作用

> ID：14012842
> 
> 赞同：0
> 
> 时间：2012-12-23T17:01:18.187
> 
> 标签：javascript, html

我正在尝试使用 JavaScript在[HTML5中制作一个简单的应用程序。](http://en.wikipedia.org/wiki/HTML5)当您按下按钮时，它应该播放随机声音。

上传到网站时效果很好，但在我的智能手机上不起作用。

```
<!doctype html>
<html>
    <head>
        <script type="text/javascript" src="jquery.min.js"></script>
        <script>
            function playSounds() {
                var sounds = new Array(
                    "musik/shut the f**k up.mp3",
                    "musik/My gun's bigger than yours!.mp3"
                );
                var index = Math.floor(Math.random() * (sounds.length));
                $("#element").html("<embed src=\"" + sounds[index] + "\" hidden=\"true\" autostart=\"false\" />");
            }
        </script>
        <title></title>
        <meta charset="utf-8">
    </head>
    <body= "javascript:playSounds()">
        <button onClick="playSounds()">
            LAUGH</button>
        <div id="element">
        </div>
    </body>
</html> 
```

我从一个站点复制了文件中的内容，`jquery.min.js`并将其直接在应用程序中链接到需要播放声音的主页。

来源在这里：

[http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js)

我尝试调试 JavaScript 代码，但似乎找不到问题所在。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T17:03:30.037

移动设备一般不支持`<embed>`。

您的使用`<embed>`表明您对“HTML5 应用程序”的理解不完全。这样的应用程序将使用`<audio>`并检查`canPlayType("audio/mpeg")`浏览器是否支持 MP3 播放。

# scala - Scala 使用带有 + 的案例语句

> ID：14012854
> 
> 赞同：2
> 
> 时间：2012-12-23T17:03:12.123
> 
> 标签：scala, switch-statement, tuples, match

仍在学习 Coursera Scala 课程的 hw1，我遇到了案例语句和元组的问题。

```
object Pascal {
    def main(args: List[String]) = {
        require((args length) == 2, "args length must equal 2")
          println("calling pascal on " + (args head) + " and " + (args last))
          pascal((args head) toInt, (args last) toInt)
    }
    def pascal(c: Int, r: Int): Int = {
        require(((r >= 0) && (c >= 0))
            && (c > r + 1), "r and c must be >= 0 and c must be <= r + 1")
        (c, r) match {
            case (_, 0) => 1
            case (0, _) => 1
            case (1 + r, _) => 1 // error: value not found "+"
            case (_, _) => pascal(r-1,c-1) + pascal(r-1,c-1)
        }
    }
} 
```

请告诉我如何在 Scala 中编写代码：

```
case (1 + r, _) => 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T17:11:07.580

我相信你正在寻找这样的东西：

```
case (v, _) if(v == r + 1) => 1 
```

它将匹配的任何值`c`（除了`c == 0`之前匹配的），然后应用测试来检查是否`v`等于`r + 1`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T19:01:37.690

你也可以

```
val R = r+1
(c, r) match {
  case (0, _) => 1
  case (R, _) => 1
  case (_, _) => pascal(r-1, c-1) + pascal(r-1,c)
} 
```

（请注意，你的递归是错误的——你添加了两次相同的条目！——这种情况`(_, 0)`是不必要的，因为如果 r 为 0，则 c 为 0（被其大小写捕获），或者 c 为 r+1 ，被那个案子抓住了。）

# matlab - matlab人脸特征提取

> ID：14012856
> 
> 赞同：2
> 
> 时间：2012-12-23T17:03:23.100
> 
> 标签：matlab, opencv, image-processing, computer-vision

我正在寻找一种方法来进行面部特征提取 - 眼睛、鼻子、嘴巴得到包含正方形和中心位置。

如果openCV是更好的工具箱，我会很感激一些例子/解释如何使用它谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T18:44:23.443

为此，我使用了两个不错的软件包：

1.  [Mark Everingham、Josef Sivic 和 Andrew Zisserman](http://www.robots.ox.ac.uk/~vgg/research/nface/)的作品- 非常简单而优雅。

2.  [X. Zhu 和 D. Ramanan](http://www.ics.uci.edu/~xzhu/face/)的新作品。

这两种方法都带有代码——在计算机视觉社区中这是一个非常重要的礼貌。所以，如果你正在使用他们的实现——请给他们积极的反馈！

如果您只对检测人脸感兴趣：即在图像中找到每个人脸周围的边界框，OpenCV 实现了 Viola-Johns 人脸检测器（如果我没记错的话，还有 LBP）。这些检测器应该非常有效地为您提供面部周围的边界框。谷歌 OpenCV 文档以获取更多信息。

# java - 是否可以从 EJB2 客户端调用 Restful Web 服务

> ID：14012857
> 
> 赞同：3
> 
> 时间：2012-12-23T17:03:28.040
> 
> 标签：java, web-services, spring, rest, ejb

我一直在寻找如何从 EJB2 客户端调用用 Spring 3 编写的 Restful 服务的示例。如果我正确理解 REST，那么服务是用什么技术/语言编写的都无关紧要，所以我应该能够从 EJB2 客户端调用服务。

我找不到一个简单的示例或参考来指导我如何实现可以调用 RESTful 服务的 EJB2 客户端。这是否意味着无法从 EJB2 客户端调用 Restful 服务？如果可能的话，请您指点我一个文档或示例，以显示或描述两者如何相互接口/对话。

我遇到的大多数参考/文档都与如何将 EJB 公开为 Web 服务有关，而我对如何从 EJB2 调用 Web 服务感兴趣。

我对如何将 XML 文档发送到服务特别感兴趣。例如，是否可以将 Jersey 客户端和 JAXB 与 EJB2 一起使用，我将如何使用 EJB2 通过 HTTP 传递未编组的 XML？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T19:31:56.603

下面是在 Java 中访问 RESTful 服务的几个编程选项。

**使用 JDK/JRE API**

下面是使用 JDK/JRE 中的 API 调用 RESTful 服务的示例

```
String uri =
    "http://localhost:8080/CustomerService/rest/customers/1";
URL url = new URL(uri);
HttpURLConnection connection =
    (HttpURLConnection) url.openConnection();
connection.setRequestMethod("GET");
connection.setRequestProperty("Accept", "application/xml");

JAXBContext jc = JAXBContext.newInstance(Customer.class);
InputStream xml = connection.getInputStream();
Customer customer =
    (Customer) jc.createUnmarshaller().unmarshal(xml);

connection.disconnect(); 
```

**使用 Jersey API**

大多数 JAX-RS 实现都包含使访问 RESTful 服务更容易的 API。客户端 API 包含在 JAX-RS 2 规范中。

```
import java.util.List;
import javax.ws.rs.core.MediaType;
import org.example.Customer;
import com.sun.jersey.api.client.*;

public class JerseyClient {

    public static void main(String[] args) {
        Client client = Client.create();
        WebResource resource = client.resource("http://localhost:8080/CustomerService/rest/customers");

        // Get response as String
        String string = resource.path("1")
            .accept(MediaType.APPLICATION_XML)
                .get(String.class);
        System.out.println(string);

        // Get response as Customer
        Customer customer = resource.path("1")
            .accept(MediaType.APPLICATION_XML)
                .get(Customer.class);
        System.out.println(customer.getLastName() + ", "+ customer.getFirstName());

        // Get response as List<Customer>
        List<Customer> customers = resource.path("findCustomersByCity/Any%20Town")
            .accept(MediaType.APPLICATION_XML)
                .get(new GenericType<List<Customer>>(){});
        System.out.println(customers.size());
    }

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-55.html](http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-55.html)

# webfonts - Google webfont 未显示正确的字体粗细

> ID：14012860
> 
> 赞同：2
> 
> 时间：2012-12-23T17:04:03.860
> 
> 标签：webfonts, google-webfonts

我经常在我的网站项目中使用 google webfonts，但我遇到了一个不知道如何解决的特殊问题。

在我的所有浏览器（OS X 10.8.2 上的 FF、Chrome 和 Safari）上，Open Sans 常规字体粗细（400）显示为半粗体。这是一个甚至发生在谷歌的网络字体库上的例子： [http](http://i.imgur.com/sZtWW.png) : [//i.imgur.com/sZtWW.png](http://www.google.com/webfonts/specimen/Open+Sans)

为了确保这是我的问题，我在浏览器堆栈中加载了页面。在 browserstack 实例中，它显示了正确的字体粗细（Win 7 上的 Chrome 23）。

有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-22T07:35:31.637

您本地安装的 Open Sans 字体版本将覆盖页面 CSS 中指定的版本。

Google 从其站点复制和粘贴的默认规则将优先使用本地字体。

要确保 CSS 指定的字体优先，请使用以下 CSS 指令：

```
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 400;
  src: url(https://themes.googleusercontent.com/static/fonts/opensans/v6/u-WUoqrET9fUeobQW7jkRT8E0i7KZn-EPnyo3HZu7kw.woff) format('woff');
} 
```

# android - android：垂直合并2个tablerows中的组件

> ID：14012862
> 
> 赞同：1
> 
> 时间：2012-12-23T17:04:36.420
> 
> 标签：android, tablelayout

假设我有一个布局 xml，如下所示：

表格布局

```
Row0: |                     textView_title (width=9)                  |

Row1: | ButtonX(width=3) |        textView_describe (width=6)         |

Row2: | ButtonY(width=3) | Button_back(width=3)| Button_start(width=3)| 
```

水平合并可以使用跨度技术，就像下面的编码一样。我想问一下 ButtonX 和 ButtonY 可以合并吗？（即垂直？），如果没有，是否有任何方法可以制作这样的布局？

非常感谢！！

## 编码：

```
<?xml version="1.0" encoding="utf-8"?><TableLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:stretchColumns="*" 
    android:screenOrientation="landscape"
    android:background="@drawable/blackboard" >

    <TableRow
        android:id="@+id/tableRow0"
        android:layout_weight="0.2"        
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textview_title"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_margin="2dp"
            android:background="@drawable/transparent_btn"
            android:gravity="center"
            android:layout_span="9"
            android:text="@string/title_number"
            android:textColor="@color/white"
            android:textSize="60dp" />                                                                       
    </TableRow>    

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:layout_weight="0.5"
        android:gravity="center" >

        <Button
            android:id="@+id/buttonX"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_margin="2dp"
            android:layout_span="3"
            android:background="@drawable/transparent_btn"
            android:text=""
            android:textSize="30dp" />

        <TextView
            android:id="@+id/text_describe"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_margin="2dp"
            android:layout_span="6"
            android:background="@drawable/white_dot_btn"
            android:gravity="top"
            android:onClick="button_start_click"
            android:text="abc"
            android:textColor="@color/white"
            android:textSize="20dp" />

    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:layout_weight="0.3"
        android:gravity="center" >

        <Button
            android:id="@+id/buttonY"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_margin="2dp"
            android:layout_span="3"
            android:background="@drawable/transparent_btn"
            android:text=""            
            android:textSize="30dp" />

        <Button
            android:id="@+id/button_back"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_margin="2dp"
            android:layout_span="3"
            android:background="@drawable/white_btn"
            android:text="quit"
            android:onClick="button_back_click"
            android:textSize="30dp" />

        <Button
            android:id="@+id/button_start"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_margin="2dp"
            android:layout_span="3"
            android:background="@drawable/green_btn"
            android:text="start"
            android:onClick="button_start_click"
            android:textSize="30dp" />

    </TableRow>    
</TableLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:26:03.120

我认为用`TableLayout`. 但你绝对可以用`RelativeLayout`

从您的代码快速转换为`RelativeLayout`：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView
        android:id="@+id/textview_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_margin="2dp"
        android:background="@drawable/transparent_btn"
        android:gravity="center"
        android:text="@string/title_number"
        android:textColor="@color/white" />

    <Button
        android:id="@+id/buttonXY"
        android:layout_width="100dp"
        android:layout_height="60dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textview_title"
        android:layout_margin="2dp"
        android:background="@drawable/transparent_btn"
        android:text="XY button" />

    <TextView
        android:id="@+id/text_description"
        android:layout_width="wrap_content"
        android:layout_height="30dp"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/buttonXY"
        android:layout_margin="2dp"
        android:layout_toRightOf="@+id/buttonXY"
        android:background="@drawable/white_dot_btn"
        android:gravity="top"
        android:onClick="button_start_click"
        android:text="abc"
        android:textColor="@color/white" />

    <Button
        android:id="@+id/button_back"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/text_description"
        android:layout_below="@+id/text_description"
        android:layout_margin="2dp"
        android:background="@drawable/white_btn"
        android:onClick="button_back_click"
        android:text="quit" />

    <Button
        android:id="@+id/button_start"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/buttonXY"
        android:layout_alignParentRight="true"
        android:layout_margin="2dp"
        android:layout_toRightOf="@+id/button_back"
        android:background="@drawable/green_btn"
        android:onClick="button_start_click"
        android:text="start" />

</RelativeLayout> 
```

唯一的缺点是宽度不再是动态的。但是可能还有其他一些技巧可以用来解决这个问题。我把这个留给你自己的灵感

# c - GCC以双机器字类型（包括asm）访问高/低机器字

> ID：14012865
> 
> 赞同：7
> 
> 时间：2012-12-23T17:04:56.740
> 
> 标签：c, gcc, assembly, portability

我在 GCC 中使用各种双机器字类型，例如 x86_64 上的 (u)int128_t 和 i386、ARM 上的 (u)int64_t 等。我正在寻找一种正确/便携/干净的方式来访问和操作各个实际机器字（主要是在汇编程序中）。例如，在 32 位机器上，我想直接访问 gcc 内部使用的 int64_t 的高/低 32 位部分，而不使用像下面这样容易出错的愚蠢代码。同样，对于“本机”128 位类型，我想访问 gcc 正在使用的 64b 部分（对于下面的示例，“添加”很简单，但通常如此）。

考虑以下代码中的 32bit ASM 路径，将两个 int128_t 加在一起（可能是 gcc 的“native”，机器的“native”或机器的“half native”）；这是可怕且难以维护（而且速度较慢）。

```
#define BITS 64
#if defined(USENATIVE)
// USE "NATIVE" 128bit GCC TYPE
typedef __int128_t int128_t;
typedef __uint128_t uint128_t;
typedef int128_t I128;
     #define HIGH(x) x
     #define HIGHVALUE(x) ((uint64_t)(x >> BITS))
     #define LOW(x) x
     #define LOWVALUE(x) (x & UMYINTMAX)
#else
typedef struct I128 {
    int64_t high;
    uint64_t low;
} I128;
     #define HIGH(x) x.high
     #define HIGHVALUE(x) x.high
     #define LOW(x) x.low
     #define LOWVALUE(x) x.low
#endif
     #define HIGHHIGH(x) (HIGHVALUE(x) >> (BITS / 2))
     #define HIGHLOW(x) (HIGHVALUE(x) & 0xFFFFFFFF)
     #define LOWHIGH(x) (LOWVALUE(x) >> (BITS / 2))
     #define LOWLOW(x) (LOWVALUE(x) & 0xFFFFFFFF)

inline I128 I128add(I128 a, const I128 b) {
#if defined(USENATIVE)
    return a + b;
#elif defined(USEASM) && defined(X86_64)
    __asm(
            "ADD %[blo], %[alo]\n"
            "ADC %[bhi], %[ahi]"
            : [alo] "+g" (a.low), [ahi] "+g" (a.high)
            : [blo] "g" (b.low), [bhi] "g" (b.high)
            : "cc"
            );
    return a;
#elif defined(USEASM) && defined(X86_32)
    // SLOWER DUE TO ALL THE CRAP
    int32_t ahihi = HIGHHIGH(a), bhihi = HIGHHIGH(b);
    uint32_t ahilo = HIGHLOW(a), bhilo = HIGHLOW(b);
    uint32_t alohi = LOWHIGH(a), blohi = LOWHIGH(b);
    uint32_t alolo = LOWLOW(a), blolo = LOWLOW(b);
    __asm(
            "ADD %[blolo], %[alolo]\n"
            "ADC %[blohi], %[alohi]\n"
            "ADC %[bhilo], %[ahilo]\n"
            "ADC %[bhihi], %[ahihi]\n"
            : [alolo] "+r" (alolo), [alohi] "+r" (alohi), [ahilo] "+r" (ahilo), [ahihi] "+r" (ahihi)
            : [blolo] "g" (blolo), [blohi] "g" (blohi), [bhilo] "g" (bhilo), [bhihi] "g" (bhihi)
            : "cc"
            );
    a.high = ((int64_t)ahihi << (BITS / 2)) + ahilo;
    a.low = ((uint64_t)alohi << (BITS / 2)) + alolo;
    return a;
#else
    // this seems faster than adding to a directly
    I128 r = {a.high + b.high, a.low + b.low};
    // check for overflow of low 64 bits, add carry to high
    // avoid conditionals
    r.high += r.low < a.low || r.low < b.low;
    return r;
#endif
} 
```

请注意，我很少使用 C/ASM，事实上这是我第一次尝试内联 ASM。习惯于 Java/C#/JS/PHP 等意味着对于例行 C 开发人员来说非常明显的东西对我来说可能并不明显（除了代码风格中明显的不安全怪癖；））。此外，所有这些都可以完全称为其他东西，因为我很难在网上找到有关该主题的任何内容（非母语人士也是如此）。

非常感谢！

### 编辑 1

经过大量挖掘后，我发现了以下理论解决方案，该解决方案有效，但不必要的慢（比更长的 gcc 输出慢！）因为它强制所有内容到内存，我正在寻找一个通用解决方案（reg/mem/可能是 imm） . 我还发现，如果您在 32 位机器上对例如 64 位 int 使用“r”约束，gcc 实际上会将这两个值放在 2 个寄存器中（例如 eax 和 ebx）。问题在于无法可靠地访问第二部分。我确信有一些隐藏的运算符修饰符很难找到告诉 gcc 我想访问第二部分。

```
 uint32_t t1, t2;
    __asm(
            "MOV %[blo], %[t1]\n"
            "MOV 4+%[blo], %[t2]\n"
            "ADD %[t1], %[alo]\n"
            "ADC %[t2], 4+%[alo]\n"
            "MOV %[bhi], %[t1]\n"
            "MOV 4+%[bhi], %[t2]\n"
            "ADC %[t1], %[ahi]\n"
            "ADC %[t2], 4+%[ahi]\n"
            : [alo] "+o" (a.low), [ahi] "+o" (a.high), [t1] "=&r" (t1), [t2] "=&r" (t2)
            : [blo] "o" (b.low), [bhi] "o" (b.high)
            : "cc"
            );
    return a; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T18:43:51.570

我听说这个网站并不是真正的“代码审查”，但由于这对我来说是一个有趣的方面，我想我可以提供一些建议：

在 32 位版本中，您可以执行`HIGHHIGH`and co。巧妙地叠加 int/uint 数组，而不是移位和与运算。使用联合是一种方法，另一种是指针“魔术”。由于代码的汇编程序部分首先不是特别可移植，因此以类型双关语转换或不可移植联合的形式使用不可移植代码并不是什么大不了的事。

编辑：依靠单词中的位置也可以。所以例如，只在寄存器中传入输入和输出的地址，然后使用 (%0+4) 和 (%1+4) 完成其余部分绝对是一种选择。

如果你必须为乘法和除法做这个当然会变得更有趣......我不确定我想去那里......

# python - 使用动态规划扩展类似背包的 Quandry

> ID：14012868
> 
> 赞同：0
> 
> 时间：2012-12-23T17:05:08.900
> 
> 标签：python, algorithm, dynamic-programming

所以我有一个问题的典型递归实现，需要一个 1-0 类似背包问题的解决方案。这是主要功能的代码：

```
def knapsack(items,sizeLimit):
    P = {}

    def recurse(nItems,lim):
        if not P.has_key((nItems,lim)):
            if nItems == 0:
                P[nItems,lim] = 0
            elif itemSize(items[nItems-1]) > lim:
                P[nItems,lim] = recurse(nItems-1,lim)
            else:
                P[nItems,lim] = max(recurse(nItems-1,lim),
                    recurse(nItems-1,lim-itemSize(items[nItems-1])) +
                    itemValue(items[nItems-1]))
        return P[nItems,lim]

    return recurse(len(items),sizeLimit) 
```

问题是我有数以百万计的数据，而且似乎这种方法会计算每个条目，导致明显的内存和速度问题。我可以使用某种动态编程/记忆技术来进一步优化此实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:22:32.993

扩展问题时，您似乎遇到了问题，请查看特定[此文件中的](http://sage.math.washington.edu/home/wstein/www/home/mhampton/sage-4.7.2.alpha2-sage.math.washington.edu-x86_64-Linux/devel/sage-main/build/sage/numerical/knapsack.py)[此目录](http://sage.math.washington.edu/home/wstein/www/home/mhampton/sage-4.7.2.alpha2-sage.math.washington.edu-x86_64-Linux/devel/sage-main/build/sage/numerical/)示例

以下内容来自给定的网址：

如果您的背包问题由 (1,2)、(1.5,1)、(0.5,3) 定义的三个项目（重量、价值）和一个最大重量为 2 的袋子组成，您可以通过以下方式轻松解决： ：

```
sage: from sage.numerical.knapsack import knapsack
sage: knapsack( [(1,2), (1.5,1), (0.5,3)], max=2)
[5.0, [(1, 2), (0.500000000000000, 3)]] 
```

超增序列

我们可以测试一个序列是否超增::

```
sage: from sage.numerical.knapsack import Superincreasing
sage: L = [1, 2, 5, 21, 69, 189, 376, 919]
sage: seq = Superincreasing(L)
sage: seq
Super-increasing sequence of length 8
sage: seq.is_superincreasing()
True
sage: Superincreasing().is_superincreasing([1,3,5,7])
False 
```

解决超增序列和目标和的子集和问题::

```
sage: L = [1, 2, 5, 21, 69, 189, 376, 919]
sage: Superincreasing(L).subset_sum(98)
[69, 21, 5, 2, 1] 
```

"""

此外，还有一个来自[Number Jack](http://www.hakank.org/numberjack/)的文件，要[对此进行测试，](http://www.hakank.org/numberjack/knapsack.py)您必须导入所有必要的文件。

# macos - 是否可以在 mac 上以编程方式模拟 3d 鼠标？

> ID：14012871
> 
> 赞同：1
> 
> 时间：2012-12-23T17:05:33.397
> 
> 标签：macos, blender

我想模拟 3D 鼠标操作以在“Blender”（在 OSX 上）中旋转/平移/缩放元素。可能吗？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T14:25:57.213

你能解决你的问题吗？我们正在尝试在另一个 3D 应用程序 (3DVia) 中通过 Java 旋转对象。由于找不到 API，我们想模拟 Space-Mouse。我们尝试了 Java Robot 类，但您只能移动主鼠标光标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T01:55:47.117

看看这个：

[鼠标按键模拟](http://wiki.blender.org/index.php/Doc:2.6/Manual/Interface/Keyboard_and_Mouse#Mouse_Button_Emulation)

在 File -> User Preferences -> Input 下，勾选“Emulate 3 Button Mouse”。该链接显示了 Apple 一键鼠标的默认快捷方式。

# symfony - Symfony2 中的用户谁在线

> ID：14012874
> 
> 赞同：1
> 
> 时间：2012-12-23T17:05:47.690
> 
> 标签：symfony

晚上好！如何从用户那里找出谁在线？我在管理面板需要这些信息。我使用来自[http://symfony.com/doc/current/book/index.html](http://symfony.com/doc/current/book/index.html)的材料来处理用户表。

```
securuty.yml
 providers:
  main:
   entity: { class: Acme\StoreBundle\Entity\User, property: username } 
```

有任何想法吗？感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T23:19:21.637

您可以使用 lastLogin 属性。最基本的功能是使用该字段并假设最后 X 分钟登录的所有用户都在线。

另一种可能性是添加一个基于侦听器的日志系统，该侦听器在每次页面更改时更新数据库中的用户状态。再一次，您查询所有用户在过去几分钟内登录了活动。

最有效的系统将是一种 javascript 侦听器，它会在页面加载后在 AJAX 查询中在线更新用户 - 进行异步查询将确保没有开销。

# php - CodeIgniter：Excel 文件上传错误

> ID：14012877
> 
> 赞同：0
> 
> 时间：2012-12-23T17:06:06.543
> 
> 标签：php, codeigniter, file-upload

我正在尝试按照我在下面指定的方式在 CodeIgniter 中上传 excel 文件，但它说文件无效。CodeIgniter 或我的文件类型规范是否存在隐藏问题？

```
$config['allowed_types'] = 'xls|xlsx'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-29T14:57:56.390

我在我的 mime.php 中使用它：

```
'xls'   =>  array('application/excel', 'application/vnd.ms-excel', 'application/vnd.ms-office', 'application/octet-stream', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'application/zip', 'application/x-zip', 'application/vnd.ms-excel', 'application/msword'),
'xlsx'  =>  array('application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'application/zip', 'application/x-zip', 'application/vnd.ms-excel', 'application/msword'), 
```

不要忘记'application/vnd.ms-office'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T13:19:14.613

```
'xls' => array('application/excel', 'application/vnd.ms-excel', 'application/octet-stream'),

'xlsx' => array('application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'application/zip', 'application/x-zip', 'application/vnd.ms-excel', 'application/msword'),
'xls' => array('application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'application/zip', 'application/x-zip', 'application/vnd.ms-excel', 'applica
    tion/msword'), 
```

用你以前的 mime 类型的 xls 和 xlsx 替换上面的代码，它可以工作

xls 两个加没问题

```
'xls' => array('application/excel', 'application/vnd.ms-excel', 'application/octet-stream'), working in to the my local but not working this live sit(Production site)

'xls' => array('application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'application/zip', 'application/x-zip', 'application/vnd.ms-excel', 'applica
        tion/msword'), 
```

它正在现场制作现场工作

我放了两个 xls 两个地方都可以工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-27T13:40:35.990

我在使用 CodeIgniter 文件上传时遇到了同样的问题，我的 CodeIgniter 版本目前是 2.2.0 您可以在我的以下答案中找到[答案](https://stackoverflow.com/a/25528343/1752988)！！！

祝你好运！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-11T03:18:39.533

将此添加到您的 mimes.php 还检查您的 excel 扩展名

或者你也可以使用

```
$config['allowed_types'] = '*';

'xlsx'  =>  array('application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'application/zip') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-11T20:39:16.347

我找到了这个解决方案

'xlsx' => 数组（'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'application/zip', 'application/x-zip', 'application/vnd.ms-excel', 'application/msword' ),

'xls' => array('application/excel', 'application/vnd.ms-excel', 'application/octet-stream'),

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-11T21:12:36.790

joni jones 的其他解决方案 在 Codeigniter[中上传 - 不允许您尝试上传的文件类型](https://stackoverflow.com/questions/7495407/uploading-in-codeigniter-the-filetype-you-are-attempting-to-upload-is-not-allo)

如果您不想更改系统文件。试试这个：

打开`system/libraries/Upload.php`（方法`do_upload()`行 205）并执行以下操作：

```
var_dump($this->file_type);
exit(); 
```

尝试上传一些文件。添加文件类型，您`var_dump()`在`application/config/mimes.php`. 小例子：您对 .docx 有疑问。尝试添加：

```
'docx' => array('application/zip', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') 
```

到`application/config/mimes.php`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-30T05:53:16.200

在**`config/mimes.php`**

添加这个

```
'xlsx'  =>  array('application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'application/zip'),
'xls'   =>  array('application/excel', 'application/vnd.ms-excel', 'application/msexcel'),
'ods'   =>  array('application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'application/zip') 
```

* * *

并在**您的配置中**

```
$config['allowed_types'] = 'xlsx|xls|ods'; 
```

# php - Mysql CSV加载文件

> ID：14012883
> 
> 赞同：1
> 
> 时间：2012-12-23T17:06:38.517
> 
> 标签：php, mysql, csv

我有一个包含 9 列的 CSV 文件，我有一个包含 11 列的 MySQL 表。

CSV 文件如下所示：

```
col1, col2, col3, col4, col5, col6, col7, col8, col9 
```

MySQL 表如下所示：

```
col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11 
```

我需要让脚本忽略两个错误（但必需）的 MySQL 列。

导入时需要忽略的mysql列有：db_id & nice_date =)

这是我到目前为止所拥有的：

```
$sql = 'LOAD DATA LOCAL INFILE "../csvtemp/test.csv" 
        INTO TABLE sample 
            FIELDS TERMINATED BY "," 
            OPTIONALLY ENCLOSED BY """" 
            IGNORE 1 LINES'
; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T17:59:37.160

```
$sql = 'LOAD DATA LOCAL INFILE "../csvtemp/test.csv" 
        INTO TABLE sample 
            FIELDS TERMINATED BY "," 
            OPTIONALLY ENCLOSED BY """" 
            IGNORE 1 LINES
            (col1, col2, col3, col4, col5, col6, col7, col8, col9)'
; 
```

缺失的列将被赋予其默认值，否则您可以通过以下方式指定固定值：

```
$sql = 'LOAD DATA LOCAL INFILE "../csvtemp/test.csv" 
        INTO TABLE sample 
            FIELDS TERMINATED BY "," 
            OPTIONALLY ENCLOSED BY """" 
            IGNORE 1 LINES
            (col1, col2, col3, col4, col5, col6, col7, col8, col9)'
            SET col10 = 'abc', col11 = 'xyz'
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T17:45:29.810

看起来你可以使用`LINES TERMINATED BY`（也许与`PHP_EOL`）。
[http://dev.mysql.com/doc/refman/5.0/en/load-data.html](http://dev.mysql.com/doc/refman/5.0/en/load-data.html)

引用手册页：

> 如果一行不包含所有字段，则其余列将设置为其默认值。

# c++ - 如何在 Solaris 上修复 SIGBUS

> ID：14012889
> 
> 赞同：1
> 
> 时间：2012-12-23T17:07:24.830
> 
> 标签：c++, memory, solaris

我`atomic_inc_64_nv`在 64 位 Solaris 上使用，返回值被强制转换为无符号长。但是当我运行我的应用程序时，它崩溃了，核心声称崩溃的原因是 SIGBUS。我怀疑可能存在对齐问题。我该如何解决这个问题？

这是我使用增量的函数

```
 inline unsigned long long Increment64(volatile unsigned long long * pullTarget)
    {
#if defined(LINUX)
        return Add64(pullTarget, 1ULL);
#elif defined(SOLARIS)
        return atomic_inc_64_nv((volatile unsigned long *)pullTarget) - 1ULL;
#elif defined(WIN32)
        return (unsigned long long)InterlockedIncrement64((LONGLONG volatile*)(pullTarget)) - 1ULL;
#endif // defined(LINUX)
    } 
```

提前谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T17:59:51.233

Sparc 处理器不支持非对齐访问。您需要确保您`pullTarget`的对齐到 8 个字节。您可以添加一些这样的代码来捕获它：

if ((uint_ptr)pullTarget & 7) { printf("对齐问题 pullTarget = %p\n", pullTarget); }

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T18:11:34.377

由于您有一个核心并已在调试器中打开它，现在只需打印变量中包含的值`pullTarget`。（指针值本身，而不是它指向的值。）您应该看到它不能被 8 整除，因为@MatsPetersson 在原因上是正确的。

# json - MongoDB ObjectId 的 Jackson JSON 反序列化

> ID：14012890
> 
> 赞同：7
> 
> 时间：2012-12-23T17:07:27.940
> 
> 标签：json, jackson, mongo-jackson-mapper

好的，首先这是从我的 Web 服务返回的 JSON。在我的 Android ContentProvider 中的 ResponseHandler 中进行异步查询后，我试图将其反序列化为 pojos。

```
{"exampleList" : [{
"locationId" : "00001" , 
"owners" : [ 
  { 
    "paidID" : { "$oid" : "50a9c951300493f64fbffdb6"} , 
    "userID" : { "$oid" : "50a9c951300493f64fbffdb6"}
  } , 
  { 
    "paidID" : { "$oid" : "50a9c951300493f64fbffdb7"} , 
    "userID" : { "$oid" : "50a9c951300493f64fbffdb7"}
  } 
]
}]} 
```

起初，我对所看到的问题感到困惑，因为我在我的 Web 服务中使用了与我在 Android 应用程序中相同的 Jackson 注释 bean——但后来我意识到该`owners`对象从未在示例 JSON 中发送到我的 Web 服务（它跳过我的 Web 服务上的 POJO，并通过来自 DAO 的原子更新添加到 mongoDB 中的文档中）。

那么好吧。到目前为止，Jackson 不必处理该`owners`对象，现在它被它窒息了，即：

> `JsonMappingException`：无法反序列化[char position where you can find and ] 通过引用链 [包含所有者类的我的 Jackson bean 的路径]处`java.lang.String`的 令牌实例`START_OBJECT``"userID"``"paidID"`

我的 Jackson bean 有一个包装器，这就是“exampleList”的全部内容：

```
public class Examples extends HashMap<String, ArrayList<Example>> {

} 
```

然后是实际的`Example`课程：

```
@JsonIgnoreProperties(ignoreUnknown = true)
public class Example implements Comparable<Example> {

@ObjectId @Id
private String id;

@JsonProperty(Constants.Example.location)
private String location;

@JsonProperty(Constants.Example.OWNERS)
private List<Owners> owners;

public int compareTo(Example _o) {
    return getId().compareTo(_o.getId());
}

public String getId() {
    return id;
}

public void setId(String id) {
    this.id = id;
}

public String getLocation() {
    return location;
}

public void setLocation(String location) {
    this.location = location;
}
public List<Example.Owners> getOwners() {
    return owners;
}

public void setOwners(List<Example.Owners> owners) {
    this.owners = owners;
}

public Example() {
}

@JsonCreator
public Example(@Id @ObjectId String id) {
    this.id = id;
}

@JsonIgnoreProperties(ignoreUnknown = true)
public static class Owners implements Comparable<Owners> {

    @JsonProperty(Constants.Example.USERID)
    private String userID;

    @JsonProperty(Constants.Example.PAIDID)
    private String paidID;

    public Owners() {
    }

    public int compareTo(Owners _o) {
        return getUserID().compareTo(_o.getUserID());
    }

    @ObjectId
    public String getUserID() {
        return userID;
    }

    @ObjectId
    public void setUserID(String userID) {
        this.userID = userID;
    }

    @ObjectId
    public String getPaidID() {
        return paidID;
    }

    @ObjectId
    public void setPaidID(String paidID) {
        this.paidID = paidID;
    }

}

} 
```

最后，ResponseHandler 中的代码全部失败（第二行产生 JsonMappingException）：

```
objectMapper = MongoJacksonMapperModule.configure(objectMapper);    
mExamples = objectMapper.readValue(jsonParser, Examples.class); 
```

我有一种感觉，问题是杰克逊仍然不知道如何映射那些`$oid`mongoDB ObjectIds。MongoJacksonMapper 库应该通过提供`@ObjectId`注释和配置 ObjectMapper 以使用该库的方法来帮助实现这一点，但它仍然无法正常工作。出于某种原因，它仍在寻找作为字符串的 userID 或paidID，而不是 ObjectId。有任何想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-12-11T19:59:49.600

另一种选择是 `com.fasterxml.jackson.databind.ser.std.ToStringSerializer`.

```
@Id
@JsonSerialize(using = ToStringSerializer.class)
private final ObjectId id; 
```

这将导致：

```
{
  "id": "5489f420c8306b6ac8d33897"
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-17T09:38:59.590

对于未来的用户：使用自定义 jackson 反序列化器将 $oid 转换回 ObjectId。

```
public class ObjectIdDeserializer extends JsonDeserializer<ObjectId> {

    @Override
    public ObjectId deserialize(JsonParser p, DeserializationContext ctxt) throws IOException, JsonProcessingException {
        JsonNode oid = ((JsonNode)p.readValueAsTree()).get("$oid");
        return new ObjectId(oid.asText());
    }

} 
```

如何使用：

```
ObjectMapper mapper = new ObjectMapper();
SimpleModule mod = new SimpleModule("ObjectId", new Version(1, 0, 0, null, null, null));

mod.addDeserializer(ObjectId.class, new ObjectIdDeserializer());
mapper.registerModule(mod);

YourClass obj = mapper.readValue("{your json with $oid}", YourClass.class); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-30T21:47:21.060

我的代码至少有两个问题很难在网上找到答案，所以我会确保在此处链接。基本上，子类需要在父类中调用 Jackson 的 readValue() 来映射子类的构造函数。就 mongoDB $oid 而言，您应该创建一个单独的 MongoId 类来表示这些 mongo 对象，并遵循与子类类似的模式来映射数据以进行反序列化。这是我发现[的一篇博客文章，很好地描述了这一点并提供了一些示例。](http://lees2bytes.blogspot.com/2012/06/in-and-outs-of-mongoddb-and-jackson.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-07T16:06:10.877

Jackson 不知道如何序列化 ObjectId。我调整了 Arny 的代码以序列化任何 ObjectId 并提供这个工作示例：

```
public class SerialiserTest {

 private ObjectMapper mapper = new ObjectMapper();

 public static class T {
    private ObjectId objectId;

    public ObjectId getObjectId() {
        return objectId;
    }

    public void setObjectId(ObjectId objectId) {
        this.objectId = objectId;
    }
 }

 @Test
 public final void serDeser() throws IOException {
    T t = new T();
    t.setObjectId(new ObjectId());
    List<T> ls = Collections.singletonList(t);
    String json = mapper.writeValueAsString(ls);
    System.out.println(json);
    SimpleModule mod = new SimpleModule("ObjectId", new Version(1, 0, 0, null, null, null));
    mod.addDeserializer(ObjectId.class, new ObjectIdDeserializer());
    mapper.registerModule(mod);
    JavaType type = mapper.getTypeFactory().
            constructCollectionType(List.class, T.class);
    List<?> l  = mapper.readValue(json, type);
    System.out.println(l);
 }
}

public class ObjectIdDeserializer extends JsonDeserializer<ObjectId> {

 @Override
 public ObjectId deserialize(JsonParser p, DeserializationContext ctxt) throws IOException, JsonProcessingException {
    JsonNode n = (JsonNode)p.readValueAsTree();
    return new ObjectId(n.get("timestamp").asInt(), n.get("machineIdentifier").asInt(), (short) n.get("processIdentifier").asInt(), n.get("counter").asInt());
 }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-19T02:22:46.823

[这里记录](http://simplapi.wordpress.com/2013/06/18/handling-mongodb-objectid-threw-jerseyjackson/)了一种更简单的方法，这对我来说是救命稻草。现在您可以在 Java 中使用 ObjectId，但是当您访问/来自 JSON 时，它将是一个字符串。

```
public class ObjectIdJsonSerializer extends JsonSerializer<ObjectId> {
    @Override
    public void serialize(ObjectId o, JsonGenerator j, SerializerProvider s) throws IOException, JsonProcessingException {
        if(o == null) {
            j.writeNull();
        } else {
            j.writeString(o.toString());
        }
    }
} 
```

然后在你的豆子里：

```
@JsonSerialize(using=ObjectIdJsonSerializer.class)
private ObjectId id; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-23T18:08:59.760

我是这样做的：

```
@Configuration
public class SpringWebFluxConfig {

    @Bean
    @Primary
    ObjectMapper objectMapper() {
      Jackson2ObjectMapperBuilder builder = new Jackson2ObjectMapperBuilder();
      builder.serializerByType(ObjectId.class, new ToStringSerializer());
      builder.deserializerByType(ObjectId.class, new JsonDeserializer() {
        @Override
        public Object deserialize(JsonParser p, DeserializationContext ctxt) 
            throws IOException {
          Map oid = p.readValueAs(Map.class);
          return new ObjectId(
              (Integer) oid.get("timestamp"),
              (Integer) oid.get("machineIdentifier"),
              ((Integer) oid.get("processIdentifier")).shortValue(),
              (Integer) oid.get("counter"));
        }
      });
      return builder.build();
    }
} 
```

# magento - 禁用产品会减慢网站速度吗？

> ID：14012892
> 
> 赞同：0
> 
> 时间：2012-12-23T17:07:36.117
> 
> 标签：magento

我有越来越多的禁用产品，我想知道它们是否会减慢我的网站速度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:49:13.537

在较小的数据库上，所有操作都会快得多。每个产品在 EAV 表中都有数十条记录。10-20k 非活动产品将对未缓存的任何内容产生重大影响。重新索引将需要更长的时间。

删除产品时应考虑以下事项：

*   重新订购将不起作用（因为订购的相同产品预计存在）
*   检查您是否有一些自定义报告/扩展程序可以填充产品表中的数据
*   已创建的订单/发票将显示所有信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T20:16:37.790

如果您知道如何优化整个事情，并且您的网站之前运行良好，那么停用产品对整个商店的速度影响不大。

# magento - Magento 刷新块缓存

> ID：14012895
> 
> 赞同：0
> 
> 时间：2012-12-23T17:08:05.733
> 
> 标签：magento, caching

在 Magento CE 1.4.1.1 中，我在产品视图页面中添加了块缓存。所以前端产品页面会在第一次访问后被缓存，到目前为止一切顺利。

但是，我发现即使有人购买了该产品，块缓存也没有被刷新。这不好，因为在前端，产品页面会显示错误的库存/库存信息，一旦产品页面被缓存，也无法显示警报消息。（似乎产品块缓存仅在我将产品保存在后端管理中时才被刷新）

1) 任何专家都可以展示如何刷新特定产品的块缓存？

2）同理，如果我想缓存分类页面，因为我使用的是ajax分层导航（以及ajax分页，ajax排序顺序），如何在上述区域添加排除缓存条件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T20:17:53.477

如果不查看您的代码并知道您的页面缓存是如何实现的，很难说如何实现这一点，但可能的解决方案是创建一个观察者，它将清除所有订购产品的缓存

在 /app/code/local/MageIgniter/ClearProductCache/etc/config.xml

```
....
    <events>
        <sales_order_place_after>
            <observers>
                <clearproductcache>
                    <type>singleton</type>
                    <class>clearproductcache/observer</class>
                    <method>implementClearProductCache</method>
                </clearproductcache>
            </observers>
        </sales_order_place_after>
 .... 
```

在 /app/code/local/MageIgniter/ClearProductCache/Model/Observer.php

```
<?php
class MageIgniter_ClearProductCache_Model_Observer 
{
    public function implementClearProductCache($event)
    {

        $_order = $event->getOrder();

        foreach ($_order->getAllItems() as $item) {
            //call function to clear cahced
            //$item->getId();
       }

        return $this;
    } 
```

请参阅[实现观察者 Magento](http://tomislavsantek.iz.hr/2011/12/implementing-observer-on-magento/)

# sql-server - SQL Server 2012 查询：如何查询 2 个表并过滤结果

> ID：14012896
> 
> 赞同：1
> 
> 时间：2012-12-23T17:08:07.420
> 
> 标签：sql-server

查询两个表并使用查询 #1 的结果从查询 #2 结果中删除条目的最佳方法是什么？我检查了有关合并结果集和删除重复项的问题，但并不完全需要。

我们所有的用户都有角色 1，高级用户有角色 1 和 2、3、4 等。目标是只有角色 1 的用户列表。

到目前为止我的方法（语法帮助将不胜感激！）：

第1步：

```
select roles.user_id  as "AdvancedUsers" from roles where role > 1 
```

第2步：

```
select Users.ID, Users.email as "AllUsers" from users 
```

第 3 步应该`AdvancedUsers`从返回的结果中删除`AllUsers`

希望这很清楚。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T17:14:34.650

```
SELECT Users.ID, Users.email from users
WHERE Users.ID NOT IN (select roles.user_id from roles where role > 1) 
```

# android - 在不同的上下文中使用 SharedPreferences

> ID：14012897
> 
> 赞同：10
> 
> 时间：2012-12-23T17:08:26.927
> 
> 标签：android, android-activity, sharedpreferences, android-context

我想在多个活动之间使用 SharedPreferences，我的想法是我将拥有一个访问 SharedPreferences 并通过静态方法将其返回给不同活动的类。我的问题是：由于 SharedPreferences 需要初始化一个上下文，并且我将为它提供来自不同活动的不同上下文，这些值是否仍然可以访问？

感谢所有帮助！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-23T17:10:16.230

`Context`提供的 to只是`.getSharedPreferences()`为了让系统访问您的应用程序特定信息；您应用程序中的每个人都有`Activity`相同的偏好。

# matlab - Matlab编辑RGB值

> ID：14012898
> 
> 赞同：2
> 
> 时间：2012-12-23T17:08:34.713
> 
> 标签：matlab

我有需要增加\减少RGB颜色级别的按钮。尝试做这样的事情

```
im3 = im3(:,:,1) + 2; 
```

但它会产生一些奇怪的图像故障。有任何想法吗？我不是专业人士，所以我可能会做错这一切，但任何指针都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:12:44.427

您应该考虑以下几点：

1.  `im3 = im3(:,:,1) + 2;`将新值分配给`img3`变量并使其成为二维矩阵。你应该这样做`im3(:,:,1) = im3(:,:,1) + 2;`。在第三个通道中将所有值增加 2。
2.  相加可能会导致值大于图像的允许值。您可以考虑使用[`imadd`](http://www.mathworks.com/help/images/ref/imadd.html).
3.  图像变量通常是 type`double`或 type `uint8`。如果值为`double`，则值为实数，介于 0 和 1 之间。如果值为`unit8`，则值为 0 和 255 之间的整数。类型为 时加 2 是合理的`uint8`，但类型为 时不加`double`。如果是这样，您应该添加 2/255。您可以使用`im2double`or`im2uint8`进行适当缩放的类型转换。通过运行来了解`img`变量的类`class(img)`。

# vb.net - 枚举类型实现是位于类实现内部还是外部

> ID：14012899
> 
> 赞同：5
> 
> 时间：2012-12-23T17:08:36.807
> 
> 标签：vb.net, design-patterns, enums

目前，我的基础模型有以下代码：

```
Public Enum vehicleType
    Car
    Lorry
    Bicycle
End Enum
Public Class TrafficSurveyA
    ' Declare the fields here.
    Private fCars As Integer
    Private fBicycles As Integer
    Private fLorries As Integer

    Public Sub New()
        ' An instance of TrafficSurveyA is created with all vehicle counts set to zero.
        fCars = 0
        fBicycles = 0
        fLorries = 0
    End Sub
    Public Sub incrementCount(ByVal vehicle As vehicleType)
        ' Preconditions: none
        ' Postconditions: If vehicle is "Car", "Bicycle" or "Lorry" then 1 is added
        ' to the corresponding count. Otherwise nothing is done.

        Select Case vehicle
            Case vehicleType.Car : fCars = fCars + 1
            Case vehicleType.Bicycle : fBicycles = fBicycles + 1
            Case vehicleType.Lorry : fLorries = fLorries + 1
            Case Else 'do nothing
        End Select
    End Sub

    Public Function getCount(ByVal vehicle As vehicleType) As String
        ' Preconditions: none
        ' Postconditions: If vehicle is "Car", "Bicycle" or "Lorry", the string
        ' representation of the corresponding count is returned.
        ' Otherwise the empty string is returned.

        Dim result As String
        result = ""
        Select Case vehicle
            Case vehicleType.Car : result = Convert.ToString(fCars)
            Case vehicleType.Bicycle : result = Convert.ToString(fBicycles)
            Case vehicleType.Lorry : result = Convert.ToString(fLorries)
            Case Else : result = ""
        End Select
        Return result
    End Function

    Public ReadOnly Property Vehicles() As String
        ' Preconditions: none
        ' Postconditions: The total number of vehicles recorded is returned.
        Get
            Return (fCars + fBicycles + fLorries).ToString()
        End Get
    End Property
End Class 
```

似乎`Enum`可以像这样轻松地将其放置在`TrafficSurveyA`类中......

```
Public Class TrafficSurveyA

    Enum vehicleType
        Car
        Lorry
        Bicycle
    End Enum

    ' Declare the fields here.
    Private fCars As Integer
    Private fBicycles As Integer
    Private fLorries As Integer

    Public Sub New()
        ' An instance of TrafficSurveyA is created with all vehicle counts set to zero.
        fCars = 0
        fBicycles = 0
        fLorries = 0
    End Sub
    ...
    ... 
```

唯一的区别似乎是我需要使用 this`TrafficSurveyA.vehicleType.Lorry`而不是 this的 GUI 代码`vehicleType.Lorry`。

两者似乎都运行良好，但枚举类型的这些实现之一是错误的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T17:19:57.813

不，两个都很好。这只是一个偏好问题，什么对组织目的最有意义。我唯一的建议是，如果枚举将在任何其他类中用作输入或输出类型，我不会把它放在这个类中。那只会令人困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T03:45:14.857

没有一个选项是错误的，但通常不鼓励公共嵌套类型（如在类中声明的枚举）。它们可能会使必须使用外部类名限定它们的客户感到困惑。[在此处](http://msdn.microsoft.com/en-us/library/vstudio/ms229027(v=vs.100).aspx)查看相关指南。一些相关的：

> 不要使用公共嵌套类型作为逻辑分组结构；为此使用名称空间。
> 
> 避免公开暴露的嵌套类型。唯一的例外是嵌套类型的变量需要在罕见的场景中声明，例如子类化或其他高级定制场景。
> 
> 如果类型可能在声明类型之外被引用，则不要使用嵌套类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T19:34:32.453

还要考虑将范围限制在最窄的范围内：

*   Private 仅在类内部使用
*   朋友在程序集内使用
*   Public 可以访问从该项目构建的任何项目或程序集

[范围](http://msdn.microsoft.com/en-us/library/76453kax.aspx)

# ios - 详细信息披露按钮图像存储在哪里？

> ID：14012901
> 
> 赞同：1
> 
> 时间：2012-12-23T17:08:37.130
> 
> 标签：ios, icons

iOS 中用于`UITableView`存储在设备本身（或 Mac 上的 iOS 模拟器）上的详细信息披露按钮（和其他类似图标）的实际图像文件在哪里？我知道我可以通过网络搜索找到图标，但图像文件似乎没有保留透明度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T17:13:50.130

[您可以使用UIKit Artwork Extractor 提取](https://github.com/0xced/UIKit-Artwork-Extractor)操作系统使用的 PNG 。

# c# - 阻止用户移动到下一个表单

> ID：14012903
> 
> 赞同：-3
> 
> 时间：2012-12-23T17:08:42.560
> 
> 标签：c#, winforms, textbox

我有`Form`一个`TextBox`。我想防止用户在不填写黑色的情况下继续下一个表单`TextBox`。我怎样才能做到这一点？

```
if(textBox.Text.Length == 0)
    MessageBox.Show("Have To Fill All The Fields!"); 
```

我还应该补充什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T17:12:16.550

将处理程序添加到`Validating`事件并使用错误提供程序来设置验证错误以控制：

```
void textBox_Validating(object sender, CancelEventArgs e) 
{
  string error = null;
  if(textBox.Text.Length == 0 ) {
    error = "Please enter this value";
    e.Cancel = true;
  }
  errorProvider1.SetError((Control)sender, error);
} 
```

您可以对多个文本框控件使用相同的处理程序（只需使用事件参数中的 sender 来获取特定的文本框实例）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T17:13:22.853

```
private void Form_FormClosing(object sender, FormClosingEventArgs e)
    {
        if (textBox.Text.Length == 0)
        {
            MessageBox.Show("Please fill the field");
            e.Cancel = true;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T17:14:18.890

你还想要什么？
代码将类似于继续下一个表单的代码

```
protected void btn_Click(object sender, EventArgs e)
{
     if(textBox.Text.Length == 0)
     {
          MessageBox.Show("Have To Fill All The Fields!");
          textBox.focus();
     }
     else
     {
          // Work to move on next form
     }
} 
```

# c++ - 多重继承中的不明确成员

> ID：14012904
> 
> 赞同：1
> 
> 时间：2012-12-23T17:08:47.713
> 
> 标签：c++

我正在尝试在我的程序中创建一个新类，该类是从框架中的两个内置类扩展而来的。

```
class Node{
    setPosition();
    draw();
};

class Rectangle{
    setPosition();
    draw();
};

class CustomShape : public Node, public Rectangle{

}; 
```

在主程序中，如果我尝试编写类似`CustomShape a`和

```
a.setPosition();
a.draw(); 
```

我通过不明确的调用得到编译时错误。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T17:13:45.120

添加明确的限定条件：

```
a.Node::setPosition();
a.Rectangle::setPosition();

a.Node::draw();
a.Rectangle::draw(); 
```

或者，您可以插入演员表：

```
static_cast<Node&>(a).setPosition(); 
```

但这不那么有吸引力。

# xpages - 使用 xe:applicationLayout 以任何方式对主要内容区域和 LeftColumn facet 进行部分更新？

> ID：14012906
> 
> 赞同：0
> 
> 时间：2012-12-23T17:08:56.630
> 
> 标签：xpages, xpages-ssjs, xpages-extlib

没有将我的 xe:applicationLayout 放在名为 panelAll 的面板中或进行完全更新，有没有办法对我的 panelMainContent 面板和我的 LeftColumn 方面进行部分更新？

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core" xmlns:xc="http://www.ibm.com/xsp/custom"
xmlns:xe="http://www.ibm.com/xsp/coreex">
<xc:DL2_AppLayout>
    <xp:panel id="panelMainContent">
        <xc:xcCustByNameView></xc:xcCustByNameView>
    </xp:panel>
    <xp:this.facets>
        <xp:panel xp:key="LeftColumn" id="panelLeftColumn">
            <xc:DL2_LeftColumnNav></xc:DL2_LeftColumnNav>
        </xp:panel>
    </xp:this.facets>
</xc:DL2_AppLayout>
</xp:view> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T21:20:09.273

您可以在刷新第一个组件的事件的 onComplete 中刷新第二个组件，如此处[所述](http://xpageswiki.com/web/youatnotes/wiki-xpages.nsf/dx/Work_with_events_and_partial_or_full_refresh)。

# javascript - jQuery 历史插件、谷歌站点地图和 SEO

> ID：14012910
> 
> 赞同：1
> 
> 时间：2012-12-23T17:09:20.850
> 
> 标签：javascript, jquery, html, ajax, seo

我一直在网上寻找答案，但从未得到任何准确的答案。

我有一个**index.php**页面，其中包含两个特定**的 DIV**：**#post-title**和**#post-content**，其内容是通过 jQuery 函数加载的。每次单击链接时都会调用此函数

```
<a onclick="showPage('page')"></a> 
```

功能：

```
function showPage(page, fadeInSpeed, fadeOutSpeed) {
 fadeInSpeed = typeof fadeInSpeed !== 'undefined' ? fadeInSpeed : 500;
 fadeOutSpeed = typeof fadeOutSpeed !== 'undefined' ? fadeOutSpeed : 200;
 pageUpper = page.charAt(0).toUpperCase() + page.slice(1);

 var History = window.History;
 History.pushState(null,pageUpper, "index.php?page=" +page);

 $("#post-title").fadeOut(fadeOutSpeed, function() { // Callback del fadeOut..
     $("#post-title").html(page);
     Cufon.refresh(); // I reload Cufon plugin on the div
 }).fadeIn(fadeInSpeed);

 $("#post-content").fadeOut(fadeOutSpeed, function() {
     $("#post-content").load(page + ".php");
 }).fadeIn(fadeInSpeed);
} 
```

这是函数，包括 History.pushState。现在，当我直接访问 URL 时，例如：**?page=curriculum**，我在 index.php 文件中添加了以下代码来调用上述函数：

```
<?php
if(isset($_GET['page'])) { // Controlla l'URL e restituisce la pagina corretta.
?>

<script>
$(function() {
    showPage('<? echo htmlentities($_GET['page']); ?>', 1000, 1);
});
</script>

<?
}
?> 
```

一切都完美无缺，但现在我有一个小问题：这会反对 SEO 吗？Google 抓取工具会正确索引我的网站吗？如果没有，我能做些什么来解决这个问题？

我提前谢谢大家，也祝圣诞快乐:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-04T15:13:57.103

如果您希望您的网站可索引，则必须确保在禁用 JavaScript 时所有页面内容都可见。这意味着例如在`page=curriculum` 禁用 JavaScript 的情况下调用应该显示课程数据。由于内容似乎是通过 a 检索的`XMLHttpRequest`，所以它不起作用。因此，您必须按照[此处](https://developers.google.com/webmasters/ajax-crawling/)所述实施 Google 抓取方案。

`sitemap.xml`请注意，如果它们没有出现在站点中（即，如果您总是使用该`showPage()`功能显示内容），您将必须更新您的文件以向机器人声明您的 URL。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-01T06:09:49.687

根据您的问题，我们仍然不明白，您能否描述您的域名以分析您的实际问题，即使只有 index.php 是问题，您也可以通过 .htaccess 文件重写您的 URL 举个例子，

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^example\.com
RewriteRule (.*) http://www.example.com/$1 [R=301,L]

RewriteRule ^([^/\.]+)/$ http:// %{HTTP_HOST}/$1 [R=301,L]
RewriteRule ^([^/\.]+)$ index.php?rewrite=$1 [L] 
```

或者

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ index\.php\ HTTP
RewriteRule ^index\.php$ http:/ /www.example.com/ [R=301,L] 
```

为 no-www 和删除的 index.php 重写 URL 的两个示例

# android - 我的片段上没有调用 onSaveInstanceState()

> ID：14012912
> 
> 赞同：0
> 
> 时间：2012-12-23T17:09:48.307
> 
> 标签：android, tabs, fragment

当我按下主页按钮时，我的片段中的数据正在保存，但是当我切换到另一个片段时，甚至没有调用该方法。

我什至尝试将 setRetainInstance() 设置为 false，但它仍然没有调用该函数。

RedFragment.java

```
import com.actionbarsherlock.app.SherlockFragment;

import android.content.Context;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.GridView;

import android.view.View.OnTouchListener;
import android.view.inputmethod.InputMethodManager;

public class RedScorerFragment extends SherlockFragment {

    LayoutInflater infl;
    GridView mGrid;

    EditText[] etCollection;

    EditText mText;

    int R1C1, R1C2;
    String R1C3="";

    View tView;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        infl = inflater;
        //super.onCreate(savedInstanceState);
        View mView = inflater.inflate(R.layout.fragment_score_red, container, false);
        mGrid = (GridView) mView.findViewById(R.id.gridViewRed);

        setRetainInstance(false);//Do I need this?

        tView = container.getRootView();

        /*if(savedInstanceState != null)
        {
            //R1C1 = savedInstanceState.getInt("R1C1");
            R1C2 = savedInstanceState.getInt("R1C2");
            R1C3 = savedInstanceState.getString("R1C3");

            //Log.d("savedd R1C1 ", String.valueOf(R1C1));
            Log.d("savedd R1C2 ", String.valueOf(R1C2));
            Log.d("savedd R1C3 ", String.valueOf(R1C3));
        }
        */

        mGrid.setAdapter(new ImageAdapter(getActivity()));
        return mView;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState){
        super.onActivityCreated(savedInstanceState);

        if(savedInstanceState != null)
        {
            //R1C1 = savedInstanceState.getInt("R1C1", 0);
            R1C2 = savedInstanceState.getInt("R1C2", 0);
            R1C3 = savedInstanceState.getString("R1C3");

            //Log.v("saved R1C1 ", String.valueOf(R1C1));
            Log.v("saved R1C2 ", String.valueOf(R1C2));
            Log.v("saved R1C3 ", R1C3);
        }
        else
            Log.w("instance state", "The instance state was null");

        //Log.v("saved R1C1 ", String.valueOf(R1C1));
        //Log.v("saved R1C2 ", String.valueOf(R1C2));
        //Log.v("saved R1C3 ", String.valueOf(R1C3));
    }

    @Override
    public void onSaveInstanceState(Bundle savedInstanceState){
        super.onSaveInstanceState(savedInstanceState);
        savedInstanceState.putInt("R1C2", Integer.valueOf(etCollection[4].getText().toString()));

        Log.v("Saving", etCollection[0].getText().toString());

        savedInstanceState.putString("R1C3", etCollection[4].getText().toString());

    }

    public class ImageAdapter extends BaseAdapter{

        Context context;

        public ImageAdapter(Context context)
        {
            this.context = context;
            etCollection  = new EditText[getCount()];
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            View myView = convertView;
            //LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            if(convertView == null)
            {
                LayoutInflater li = infl;
                myView= li.inflate(R.layout.grid_items, null);

            }

            EditText editText = (EditText) myView.findViewById(R.id.grid_item_edit_text_red);
            etCollection[position] = editText;

            EditText oText = (EditText)tView.findViewById(R.id.grid_item_edit_text_red);
            etCollection[0] = oText;
            return myView;
        }

        @Override
        public int getCount() {

            return 9;//only 9 
        }

        @Override
        public Object getItem(int position) {
            Log.w("etCollection: " + position , etCollection[position].getText().toString() );
            return etCollection[position];
        }

        @Override
        public long getItemId(int position) {

            return 0;//mGrid.getItemIdAtPosition(position);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:28:46.830

> 但是当我切换到另一个片段时，甚至没有调用该方法

那是因为它不应该被调用。当在活动上调用时会调用它，该活动将在和事件`onSaveInstanceState()`中及其周围被调用。`onPause()``onStop()`

# python - 将字典键传递给新字典

> ID：14012918
> 
> 赞同：0
> 
> 时间：2012-12-23T17:10:36.740
> 
> 标签：python, dictionary, for-loop, key

为什么这段代码不起作用？它返回 key3 的键错误。adict 有 key3，它似乎与我向空字典添加键的方式没有什么不同，只是我在循环中相互传递它们。如何将一个字典中的键和值传递到具有相同主键的新字典中？

```
adict = {'key1':{'a':.078, 'b':1000, 'c':100},
                          'key2':{'a':.0645, 'b':10, 'c':5},
                          'key3':{'a':.0871, 'b':250, 'c':45},
                          'key4':{'a':.0842, 'b':200, 'c':37},
                          'key5':{'a':.054, 'b':409, 'c':82},
                          'key6':{'a':.055, 'b':350, 'c':60}}

another_dict = {}
for k in adict:
    another_dict[k]['transferred'] = adict[k]['b']

>>>   Traceback (most recent call last):
      File "C:\Python27\test.py", line 26, in <module>
        another_dict[k]['transferred'] = adict[k]['b']
      KeyError: 'key3' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T17:19:48.603

如果我理解正确，使用`dict`理解相当简单：

```
>>> pprint({k:{'transferred':v['b']}  for k, v in adict.iteritems()})
{'key1': {'transferred': 1000},
 'key2': {'transferred': 10},
 'key3': {'transferred': 250},
 'key4': {'transferred': 200},
 'key5': {'transferred': 409},
 'key6': {'transferred': 350}} 
```

您还可以执行便利功能以仅保留某些子键（如果它们的名称相同）

```
>>> from operator import itemgetter
>>> def dict_with_subkeys(odict, *keys):
    return {k:dict(zip(keys, itemgetter(*keys)(odict[k]))) for k in odict}

>>> pprint(dict_with_subkeys(adict, 'a', 'c'))
{'key1': {'a': 0.078, 'c': 100},
 'key2': {'a': 0.0645, 'c': 5},
 'key3': {'a': 0.0871, 'c': 45},
 'key4': {'a': 0.0842, 'c': 37},
 'key5': {'a': 0.054, 'c': 82},
 'key6': {'a': 0.055, 'c': 60}} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T17:14:58.383

`another_dict[k]`您必须在访问它之前创建一个新字典：

```
adict = {'key1':{'a':.078, 'b':1000, 'c':100},
                      'key2':{'a':.0645, 'b':10, 'c':5},
                      'key3':{'a':.0871, 'b':250, 'c':45},
                      'key4':{'a':.0842, 'b':200, 'c':37},
                      'key5':{'a':.054, 'b':409, 'c':82},
                      'key6':{'a':.055, 'b':350, 'c':60}}

another_dict = {}
for k in adict:
    if k not in another_dict:
        another_dict[k] = {}
    another_dict[k]['transferred'] = adict[k]['b'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T17:13:26.723

使用`another_dict[k]['transferred']`，您正在尝试访问尚未创建`'transferred'`的 dict 的密钥。`key k`

您可以[`defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)在这里使用：-

```
from collections import defaultdict
another_dict = defaultdict(dict) 
```

修改代码：-

```
>>> from collections import defaultdict
>>> adict = {'key1':{'a':.078, 'b':1000, 'c':100},
...                           'key2':{'a':.0645, 'b':10, 'c':5},
...                           'key3':{'a':.0871, 'b':250, 'c':45},
...                           'key4':{'a':.0842, 'b':200, 'c':37},
...                           'key5':{'a':.054, 'b':409, 'c':82},
...                           'key6':{'a':.055, 'b':350, 'c':60}}
... 
... another_dict = defaultdict(dict)
... for k in adict:
...     another_dict[k]['transferred'] = adict[k]['b']

>>> another_dict
5: defaultdict(<type 'dict'>, {'key3': {'transferred': 250}, 
                           'key2': {'transferred': 10}, 
                           'key1': {'transferred': 1000}, 
                           'key6': {'transferred': 350}, 
                           'key5': {'transferred': 409}, 
                           'key4': {'transferred': 200}}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-23T17:14:53.560

问题`another_dict[k]`实际上还不存在，而您正在尝试做`another_dict[k]['transferred']`一些甚至没有初始化的事情。所以你需要先初始化它：

```
In [35]: adict = {'key1':{'a':.078, 'b':1000, 'c':100},
                          'key2':{'a':.0645, 'b':10, 'c':5},
                          'key3':{'a':.0871, 'b':250, 'c':45},
                          'key4':{'a':.0842, 'b':200, 'c':37},
                          'key5':{'a':.054, 'b':409, 'c':82},
                          'key6':{'a':.055, 'b':350, 'c':60}}

In [36]: another_dict={}

In [37]: for k in adict:
    another_dict[k]={}                          #initialize another_dict[k]
    another_dict[k]['transferred']=adict[k]['b']

In [38]: another_dict
Out[38]: 
{'key1': {'transferred': 1000},
 'key2': {'transferred': 10},
 'key3': {'transferred': 250},
 'key4': {'transferred': 200},
 'key5': {'transferred': 409},
 'key6': {'transferred': 350}} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-23T17:45:14.043

谢谢@Ashwini 我明白你的意思。还有@Jon。

随着我在 Python 和（“字典理解”？）方面的进步，我发现的另一个解决方案是：

```
another_dict = {k:{'b':adict[k]['b']} for k in adict} 
```

# c - 结构类型指针

> ID：14012922
> 
> 赞同：0
> 
> 时间：2012-12-23T17:11:05.190
> 
> 标签：c, struct, function-pointers

我正在开发一个[简单的 GUI 应用程序](https://github.com/golergka/FileHash)来计算文件的哈希值。它使用 CommonCrypto 库进行哈希和算法。因此，例如，我用于计算[SHA1](https://github.com/golergka/FileHash/blob/develop/SHSHA1Computer.m)或[MD5](https://github.com/golergka/FileHash/blob/develop/SHMD5Computer.m)哈希的代码完全相同，除了我使用上述库中的元素：常量、函数和结构。当然，我可以编写更通用的代码来接受常量作为值和函数指针，但是对于每种散列类型不同的自定义结构，我该怎么办？

例如，当我计算 MD5 哈希时，我有这个：

```
CC_MD5_CTX md5;
CC_MD5_Init(&md5); 
```

当我计算 SHA1 哈希时，我有这个：

```
CC_SHA1_CTX sha1;
CC_SHA1_Init(&sha1); 
```

如何将其转换为仅将 CC_HASH_CTX 作为参数的一段代码？

PS：虽然该应用程序是用 Objective C for Mac 编写的，但我认为这个问题并不是专门针对它的，所以我只是用 C 标记了它。

# android - Android：如何在模拟器中使用网络摄像头？

> ID：14012924
> 
> 赞同：98
> 
> 时间：2012-12-23T17:11:30.933
> 
> 标签：android

我通过在 AVD 管理器中将前置摄像头设置为“webcam0”来将网络摄像头连接到我的模拟器。当我启动模拟器的相机应用程序时，出现错误

```
CameraService::connect X (pid 702) rejected (invalid cameraId 0). 
```

以下是 Android 源代码的相关部分：

```
sp<ICamera> CameraService::connect(
    const sp<ICameraClient>& cameraClient, int cameraId) {

    int callingPid = getCallingPid();

    [...]

    if (cameraId < 0 || cameraId >= mNumberOfCameras) {
        LOGE("CameraService::connect X (pid %d) rejected (invalid cameraId %d).",
            callingPid, cameraId);
        return NULL;
    }

    [...]
} 
```

网络摄像头已正确分配 ID 0，因为只有 1 个摄像头。但是，`mNumberOfCameras`大概仍然是 0。这意味着模拟器正在注册相机，但它并没有费心更新连接的相机数量。

**如何连接网络摄像头以便模拟器正确识别它？**

编辑：中的命令`emulator -webcam-list -avd <name of your AVD>`给出`\android-sdks\tools`结果：

```
List of web cameras connected to the computer:
Camera `webcam0` is connected to device `AndroidEmulatorVC0` on channel 0 using pixel format `BGR4` 
```

当我从 Eclipse 的 AVD 管理器或使用启动网络摄像头时`emulator -camera-front webcam0 -avd <name of your AVD>`，我得到以下窗口：

![在此处输入图像描述](../Images/be18e95dd535c8aa89a56f8b9530adc1.png)

编辑2：这似乎是模拟器中的一个错误。建议的答案告诉您如何设置相机，但并没有为我解决问题。我最终通过使用带有内置网络摄像头的笔记本电脑解决了这个问题。也许另一个 USB 网络摄像头也可以工作。

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2015-06-11T22:38:35.430

更新

在 Android Studio AVD 中：

1.  打开 AVD 管理器：

![AVD 菜单](../Images/256449cce1eb329453b943fed5362b1c.png)

2.  添加/编辑 AVD：

![特定的 AVD 条](../Images/02e097e73fc39c7e78085a2edec4a712.png)

3.  单击屏幕底部的高级设置：

![AVD 高级设置](../Images/4404ebb821621176daf19c71668a89bb.png)

4.  将您选择的摄像头设置为前置/后置摄像头：

![AVD 相机设置](../Images/910c71e5bfaa3c6f435add2436a92d08.png)

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-01-02T10:54:20.543

在 Eclipse 中执行以下步骤。

1.  转到 -> AVD 管理器
2.  创建/编辑 AVD。
3.  硬件 > 新品：
4.  配置后置摄像头
5.  单击属性值并选择 = "webcam0"。
6.  完成上述所有操作后，应连接网络摄像头。如果没有，那么您需要检查您的网络摄像头驱动程序。

在这里查看更多信息： [如何在 android 模拟器中使用网络摄像头来捕捉实时图像？](https://stackoverflow.com/questions/1276450/how-to-use-web-camera-in-android-emulator-to-capture-a-live-image)

![在此处输入图像描述](../Images/d3b4a01259c4d441e7e4b5b600877592.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-31T05:48:43.647

我建议检查驱动程序并在需要时更新它们。

# c# - 用 12 位数字分析识别号

> ID：14012926
> 
> 赞同：-3
> 
> 时间：2012-12-23T17:12:06.237
> 
> 标签：c#

我必须分析 12 位数字。所以我被困在第 7 和第 8 个数字之间。我想如果数字是 40（数字 7 是 4，数字 8 是 0）给我“ex.London”，如果是 45 给我“ex.NY”......

代码 ：

```
 [WebMethod]
    public string ID(string number)
    {
        int fullInt = Int32.Parse(number);
        string City1= number.Substring(0, 2);
        string City1_S = "Date of birth: " + City1;

        string City2 = number.Substring(2,2);
        string City2_S = "Month: " + City2;

        string City3 = number.Substring(4, 3);
        string City3_S = "Year: 1" + City3;

        string City4 = number.Substring(7, 2).Contains("40").ToString();
        string City4_S = "City: London";

        string[] Array= new string[3];
        Array[0] = City1_S.ToString();
        Array[1] = City2_S.ToString();
        Array[2] = City3_S.ToString();
        Array[3] = City4_S.ToString();

        return Array.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T17:22:23.103

```
[WebMethod]
public string ID(string number)
{
    int fullInt = Int32.Parse(number);// if (Regex.IsMatch(number, @"\D")) throw new ArgumentException();
    string City1_S = "Date of birth: " + number.Substring(0, 2);
    string City2_S = "Month: " + number.Substring(2,2);
    string City3_S = "Year: 1" + number.Substring(4, 3);

    string City4_S = "";
    var digitStr = number.Substring(7, 2);
    switch (digitStr)
    {
        case "40":
             City4_S = "City: London";
             break;
        case "45":
             City4_S = "City: NY";
             break;
    }

    string[] Array = new [] { City1_S,  City2_S, City3_S, City4_S };

    return Array.ToString();//something wrong =)
    //return string.Join(" ", Array);
    //return Array[0] + " " + Array[1] + " " + Array[2] + " " + Array[3];
} 
```

# objective-c - 如何以编程方式更改 UIButton 状态？

> ID：14012942
> 
> 赞同：2
> 
> 时间：2012-12-23T17:13:52.730
> 
> 标签：objective-c, ios, uibutton

和属性不会削减它，因为由于某种原因，当突出显示和选择设置为 YES 时，按钮看起来更灰（未突出显示的图像的阴影更暗）`.selected`。`.highlighted`

我需要让我的按钮熄灭，就像用户让它熄灭一样。
我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T22:14:05.930

我现在想我明白你的意思了。我在我的 UIButton 中放置了一个图像，并尝试在触摸时更改按钮的状态。

```
- (IBAction)touchDown:(id)sender {
    [(UIButton *)sender setHighlighted:FALSE];
    [(UIButton *)sender setSelected:FALSE];
} 
```

我注意到在您移动手指之前图像不会变暗。如果您将一个动作连接到“触摸内部拖动”并检查`.highlighted`您应该看到它再次变为 TRUE。您可以将其设置回 FALSE：

```
- (IBAction)touchMove:(id)sender 
{ 
    [(UIButton *)sender setSelected:FALSE];
} 
```

# 然而

如果您只是想在用户按下图像时阻止图像变灰，请执行以下操作：

```
button.adjustsImageWhenHighlighted = FALSE; 
```

设置图像`UIControlStateHighlighted`也会消除灰色。

```
UIImage *image = [UIImage imageNamed:@"img"];
[button setImage:image forState:UIControlStateNormal];
[button setImage:image forState:UIControlStateHighlighted]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T17:18:04.850

如果“关闭”是指要禁用该按钮，则可以使用：

```
[myButton setEnabled:NO]; 
```

# node.js - Node.Js 和 NPM 的新手

> ID：14012946
> 
> 赞同：0
> 
> 时间：2012-12-23T17:14:25.003
> 
> 标签：node.js, npm

想在圣诞节期间使用 node.js 创建一个项目，并且正在使用本月 .Net 杂志的教程来帮助我。由 Henrik Joretag 撰写，我认为这很简单，但我似乎在第一关就遇到了问题。

在编写 package.json 文件时，我尝试运行它。我收到以下错误。

```
error TypeError: Cannot call method 'replace' of undefined
error     at /usr/local/lib/node_modules/npm/node_modules/read-package-json/read-    json.js:332:45
error     at fs.js:117:20
error     at /usr/local/lib/node_modules/npm/node_modules/graceful-fs/graceful-fs.js:53:5
error     at /usr/local/lib/node_modules/npm/node_modules/graceful-fs/graceful-fs.js:62:5
error     at Object.oncomplete (fs.js:297:15) 
```

我完全不知道如何配置它，因为教程已经说明在创建 package.json 文件后它应该可以工作。我的 package.json 看起来像这样。

```
{
    "name": "sample-dashboard.iwishiwaschucknorris.com",
    "version" : "0.0.1",
    "homepage" : "http://sample-dashboard.iwishiwaschucknorris.com",
    "description" : "Mind-meldification for teams",
    "dependencies" : {
        "backbone" : "",
        "underscore" : "",
        "express" : "",
        "stitch" : "",
        "andbang-express-auth" : "",
        "precommit-hook" : "",
        "clientmodules" : "",
        "templatizer" : "",
        "andlog" : "",
        "getconfig" : "",
        "connect-githead" : ""
    },
    "clientmodules" : ["andlog","backbone","underscore"],
    "main" : "server.js",
    "scripts" : {
        "postinstall" : "node node_modules/clientmodules/install.js"
    }
} 
```

对此的任何帮助都会很棒，因为我真的很想深入了解 node 和backbone.js。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T15:17:21.153

我有同样的问题。

基于[这篇文章](https://github.com/isaacs/npm/issues/3002)，我发现我已经做了一个`git init`但需要更进一步`npm`才能获得快乐。

我继续在目录中执行 a`git add .`和 a`git commit -m "<msg>"`以将我的第一次提交记录在 git 元数据中。然后我重新运行`npm install`，一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:36:28.313

这*可能*是我们最近修复的一个旧的 npm 错误。`npm update -g npm`你会准备好的。（当有 .git 但没有 git HEAD 时会发生这种情况）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T10:14:28.210

也许您只是不在`npm install`的目录中运行`package.json`，它将在本地安装所有`dependencies`声明的 in `package.json`，并运行`postinstall`脚本。

# c# - 从 contextmenu-item eventHandler 获取 treenode

> ID：14012950
> 
> 赞同：3
> 
> 时间：2012-12-23T17:14:34.400
> 
> 标签：c#, treeview, contextmenu

我有一个带有几个树节点的树视图。当我右键单击树节点时，我会得到一个带有不同选项的上下文菜单，例如“删除项目”。

是否有一种简单的方法可以在 contextmenu-item 的 eventHandler 中获取右键单击的 treenode 对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T20:34:53.683

前段时间我有类似的问题，我想出了这样的解决方案

创建您自己的派生自标准 ContextMenuStrip 的 myContextMenuStrip 类

```
 public class myContextMenuStrip : ContextMenuStrip
    {
        public TreeNode tn;

        public myContextMenuStrip() { }

        protected override void OnItemClicked(ToolStripItemClickedEventArgs e)
        {
            base.OnItemClicked(e);
            if (e.ClickedItem.Text == "asd") MessageBox.Show(tn.Text);
        }
    } 
```

在内部，您正在覆盖 OnItemClicked 方法，当您单击特定的 menuItem 时，它将显示 MessageBox。

因此，当您使用鼠标右键单击 treeView 项目时，它将从您的鼠标指针下检索节点并将其传递给您的 myContextMenuStrip。

```
 private void treeView1_MouseClick(object sender, MouseEventArgs e)
    {
        if (e.Button == System.Windows.Forms.MouseButtons.Right)
        {
            TreeNode tn = treeView1.GetNodeAt(e.Location);
            myMenu.tn = tn;
        }
    } 
```

在 formLoad 上，您正在初始化 myContextMenuStrip、添加项目并将其绑定到 treeView。

```
 private void Form1_Load(object sender, EventArgs e)
    {
        myMenu = new myContextMenuStrip();
        myMenu.Items.Add("asd");
        treeView1.ContextMenuStrip = myMenu;
    } 
```

我知道这不是很优雅的方式，但它很简单并且可以工作（与在 EventArgs 中传递 treeNode 值的想法相反，这可能难以实现甚至是不可能的——我自己没有尝试过，几乎没有尝试但辞职了）。

整个工作代码，需要表格上的treeView：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    public myContextMenuStrip myMenu;

    private void treeView1_MouseClick(object sender, MouseEventArgs e)
    {
        if (e.Button == System.Windows.Forms.MouseButtons.Right)
        {
            TreeNode tn = treeView1.GetNodeAt(e.Location);
            myMenu.tn = tn;
        }
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        myMenu = new myContextMenuStrip();
        myMenu.Items.Add("asd");
        treeView1.ContextMenuStrip = myMenu;
    }

    public class myContextMenuStrip : ContextMenuStrip
    {
        public TreeNode tn;

        public myContextMenuStrip() { }

        protected override void OnItemClicked(ToolStripItemClickedEventArgs e)
        {
            base.OnItemClicked(e);
            if (e.ClickedItem.Text == "asd") MessageBox.Show(tn.Text);
        }
    }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T11:01:38.320

如果您（右键）单击一个节点，它不会成为选定节点吗？

```
TreeNode needed = TreeViewX.SelectedNode; 
```

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-20T01:51:43.293

另一个想法是将上下文菜单的 Tag 属性设置为节点对象，然后从事件处理程序中访问它。当然，这仅在您没有将 Tag 用于其他任何事情时才有效。

```
private void MyTreeView_NodeMouseClick(object sender, TreeNodeMouseClickEventArgs e)
    {
        if (e.Button == MouseButtons.Right)
        {
            MyContextMenu.Tag = e.Node;
            MyContextMenu.Show(this, e.Location);
        }
    }
private void MyToolStripMenuItem_Click(object sender, EventArgs e)
    {
        //Get TreeNode from Tag
        //Note: Could also get ContextMenu from sender,
        //but we already have it, so just access it directly
        TreeNode node = MyContextMenu.Tag as TreeNode;
        if (node == null)
            return;
        //Do stuff with node here
    } 
```

# python - 如何使用twisted通过UDP协议发送参数

> ID：14012955
> 
> 赞同：1
> 
> 时间：2012-12-23T17:15:03.827
> 
> 标签：python, twisted, bittorrent

如何使用 twisted 连接到以下 url 并从跟踪器获取响应。udp://tracker.publicbt.com:80/announce?uploaded=0&downloaded=0&compact=1&event=started&peer_id=kovid_agarwal1235467&port=6881&info_hash=3389809f0c9096819294a680beb4adb96a738419&left=763922958

我尝试了以下代码，但出现连接 ID 不匹配错误

```
from twisted.internet.protocol import DatagramProtocol
from MakeUrlRequest import  encoded_Value

class SendAndReceiveUDP(DatagramProtocol):

    def startProtocol(self):
        self.transport.connect("31.172.124.3",80)
        self.transport.write(encoded_Value())

    def datagramReceived(self, datagram, addr):
        print "Received %r" %datagram
from twisted.internet import reactor
udpclient=SendAndReceiveUDP()
reactor.listenUDP(6881,udpclient)
reactor.run() 
```

上面的encoded_Value就是如下值：uploaded=0&downloaded=0&compact=1&event=started&peer_id=kovid_agarwal1235467&port=6881&info_hash=3389809f0c9096819294a680beb4adb96a738419&left=763922958

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T01:35:10.840

根据[http://en.wikipedia.org/wiki/UDP_tracker](http://en.wikipedia.org/wiki/UDP_tracker)，用于与 Bittorrent 跟踪器交换数据的基于 UDP 的协议使用“自定义二进制格式”。您发送的数据看起来不符合这种格式。因此，您收到的错误可能表明您需要以不同的方式格式化您的请求。有关该格式的更多详细信息，请参见[http://www.bittorrent.org/beps/bep_0015](http://www.bittorrent.org/beps/bep_0015) .html。

# jquery - jqGrid - 使用多选判断行是被选中还是被取消选中

> ID：14012957
> 
> 赞同：0
> 
> 时间：2012-12-23T17:15:38.800
> 
> 标签：jquery, jqgrid

我有以下网格：

```
 $(function(){

        $("#poGrid").jqGrid({
            url:'URL',
            datatype: 'json',
            mtype: 'GET',
            colNames:[],
            pager: '#poPager',
            rowNum:10,
            rowList:[10,20,30],
            sortname: 'orderID',
            sortorder: 'ASC',
            jsonReader : { repeatitems: false },
            viewrecords: true,
            gridview: true,
            caption: '&nbsp;',
            multiselect: true,
            height: "100%",

            colModel :[

                {name:'orderID', label:'Order ID', width:80, align: 'center'},
                {name:'orderName', label:'Order Name', width:250},
                {name:'countTotal', label:'Count Total', width:80},
                {name:'orderTotal', label:'Order Total', width:80},
                {name:'orderDate', label:'Order Date', width:100}

            ],

                onSelectRow: function(id){

                    var grid = jQuery('#poGrid');
                    var sel_row = grid.jqGrid('getGridParam', 'selrow');
                    var sel_id = grid.jqGrid('getCell', sel_row, 'orderID');

                    setOrderIDs(id,sel_id);

                }

        }); 
```

我只是想弄清楚在我运行该`setOrderIDs`函数之前是否选择了触发 onSelectRow 的行。如果它是由取消选择触发的，我不想运行该功能。

对此的任何帮助都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T18:49:55.850

这很容易。[您应该测试onSelectRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aevents#list_of_events)的第二个布尔参数的值：`status`

```
onSelectRow: function (id, status) {
    if (status) {
        // row is selected
    }
} 
```

# php - Preg_match 的问题

> ID：14012958
> 
> 赞同：1
> 
> 时间：2012-12-23T17:15:56.433
> 
> 标签：php, preg-match

我做了一个简单的应用程序来从`allrecipes.com.`我正在使用的网站上获取食谱信息`preg_match`，但是有些东西不起作用。

```
$geturl = file_get_contents("http://allrecipes.com/Recipe/Brown-Sugar-Smokies/Detail.aspx?src=rotd");
          preg_match('#<title>(.*) - Allrecipes.com</title>#', $geturl, $match);
          $name = $match[1];
          echo $name; 
```

我只是想获取页面的标题（减去`- Allrecipes.com`部分）并将其放入变量中，但出现的所有内容都是空白的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T17:18:47.313

如果您查看页面的源代码，您会注意到`<title>`实际文本周围包含一些填充，您需要对此进行补偿。

```
'#<title>\s*(.*) - Allrecipes.com\s*</title>#' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T17:18:40.947

这种模式有两个问题。首先，在`<title>`没有被捕获的之后有一个换行符`.`（因为没有`/s`修饰符`.`实际上是“除 EOL 之外的任何符号”）。其次，`Allrecipes.com`文本后面实际上没有`</title>`子字符串，它们之间有一个换行符。

考虑到`\s`同时涵盖普通空格和分隔行的事实，您可以像这样更改您的正则表达式：

```
'#<title>\s*(.*?) - Allrecipes.com\s*</title>#s' 
```

`/s`修饰符在这里实际上并不相关（感谢 minitech 注意到这一点），因为这个秘籍中的标题是单行的，并且所有“\n”符号都将`\s*`被子表达式覆盖。但我仍然建议把它留在那里，这样多行标题就不会让你措手不及。

为了提高效率，我在这里替换`.*`为`.*?`：由于您要查找的字符串很短，因此在这里使用非贪婪量词是有意义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T17:49:51.100

您应该首先获得整个标题，然后使用 PHP 将其剥离，如下所示：

```
<?php

$raw_html=file_get_contents('http://www.allrecipes.com');
if (empty($raw_html)) {
    throw new \RuntimeException('Fetch empty');
}

$matches=array();
if (preg_match('/<title>(.*)<\/title>/s', $raw_html, $matches) === false) {
    throw new \RuntimeException('Regex error');
}

$title=trim($matches[1]);

// you should strip your title here
echo $title; 
```

# matlab - MATLAB 从 Fortran 源代码生成 MEX 文件时出错

> ID：14012962
> 
> 赞同：1
> 
> 时间：2012-12-23T17:16:33.283
> 
> 标签：matlab, compiler-construction, fortran, mex, lnk2019

当我尝试从 Fortran 源代码（TEINITG.F）生成 MEX 文件时，Matlab 总是报错。下载 Intel Visual Fortran 11.1 Microsoft Visual C++ 2008 SP1 链接器的试用版后，我使用 mex -setup 配置环境. 然后我尝试从 FORTRAN 源代码 (TEINITG.F) 生成 mex 函数。

但是，当我输入：`mex TEINITG.F`

Matlab 显示链接错误，例如：

```
>>mex TEINITG.F
    Creating library C:\Users\xue\AppData\Local\Temp\mex_TDkmp3\templib.x and object 
C:\Users\xue\AppData\Local\Temp\mex_TDkmp3\templib.exp
 TEINITG.obj    : error LNK2019: unresolved external symbol _TEINIT referenced in function 
_MEXFUNCTION
 TEINITG.mexw32 : fatal error LNK1120: 1 unresolved externals

 C:\PROGRA~2\MATLAB\R2010B~1\BIN\MEX.PL: Error: Link of 'TEINITG.mexw32' failed. 
```

我在 windows-64 位上运行 MATLAB R2010b-32bit。这可能是问题的根源吗？我不知道如何处理这个错误。你有什么建议可以解决这个问题吗？

# ruby - RVM 不断设置 ruby 1.8.7 而不是 MAC 中的最新版本 1.9

> ID：14012963
> 
> 赞同：2
> 
> 时间：2012-12-23T17:16:59.143
> 
> 标签：ruby, macos, rvm

我无法使用 RVM 正确安装 ruby​​ ..

错误说：

```
No binary rubies available for: downloads/ruby-1.9.3-p327.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
Fetching yaml-0.1.4.tar.gz to /Users/xiruki/.rvm/archives
Extracting yaml to /Users/xiruki/.rvm/src/yaml-0.1.4
Configuring yaml in /Users/xiruki/.rvm/src/yaml-0.1.4.
Error running './configure --prefix=/Users/xiruki/.rvm/usr', please read /Users/xiruki/.rvm/log/ruby-1.9.3-p327/yaml/configure.log
Compiling yaml in /Users/xiruki/.rvm/src/yaml-0.1.4.
Error running 'make', please read /Users/xiruki/.rvm/log/ruby-1.9.3-p327/yaml/make.log
Installing Ruby from source to: /Users/xiruki/.rvm/rubies/ruby-1.9.3-p327, this may take a while depending on your cpu(s)...
ruby-1.9.3-p327 - #downloading ruby-1.9.3-p327, this may take a while depending on your connection...
ruby-1.9.3-p327 - #extracted to /Users/xiruki/.rvm/src/ruby-1.9.3-p327 (already extracted)
ruby-1.9.3-p327 - #configuring
Error running './configure --enable-shared --disable-install-doc --prefix=/Users/xiruki/.rvm/rubies/ruby-1.9.3-p327 --with-opt-dir=/Users/xiruki/.rvm/usr', please read /Users/xiruki/.rvm/log/ruby-1.9.3-p327/configure.log
There has been an error while running configure. Halting the installation. 
```

可能是什么问题呢？请多多包涵，因为我是 MAC 新手。

我正在尝试安装 ruby​​ 1.9.3

但在我通过 curl 命令安装 RVM 后，它坚持使用 ruby​​ 1.8.7。

每当我尝试使用 rvm install 命令安装 ruby​​ 1.9.3 时...它一直显示错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T02:10:21.533

请执行下列操作：

我也建议您务必阅读 rvm 要求，但为了您的方便，这里是它的要点。

升级到最新的 Xcode，启动它，转到 Preferences -> Downloads -> 点击“Install”以获取“Command Line Tools”。

如果您还没有自制软件，请安装它。然后：

```
brew update
brew upgrade
brew install git 
```

如果您需要安装早于 1.9.3 的 rubies，请执行以下操作：

```
brew tap homebrew/dupes
brew install autoconf automake apple-gcc42
rvm pkg install openssl 
```

在这一点上，你应该把你`rvm reinstall`所有的红宝石都编译成你所有的新东西。然后一定要运行`rvm use [RUBY] --default`以使用该红宝石并将其设为默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T17:25:50.500

你需要一个编译器。Xcode 命令行工具或 gcc。你可能已经安装了自制软件。我建议您运行`brew doctor`并按照说明进行操作。

您还必须在 bash 文件中添加一行。此命令为您执行此操作：

```
echo "source $HOME/.rvm/scripts/rvm" >> ~/.bash_profile 
```

在那之后你应该很好。

* * *

### 更新：

不要安装 Xcode，而是看看这个命令告诉你做什么： `rvm requirements`

我目前不使用 rvm，但使用 gcc 似乎你会更好，该命令告诉你安装。

# javascript - 在 javascript 或 jquery 中单独调用特定函数

> ID：14012970
> 
> 赞同：3
> 
> 时间：2012-12-23T17:17:53.837
> 
> 标签：javascript, jquery, html, angularjs

我有一段这样的代码。

```
// HTML file
<div class="box" ng-click="displayinfo()">
    click here to display info about this page.
    <div class="content" ng-click="displaytext()">
        Click here to display text.
    </div>
    click here to display info about this page.
</div>

// JS file
$scope.displayinfo = function()
{
    alert('info');
}
$scope.displaytext = function()
{
    alert('Text');
} 
```

问题是在单击“单击此处显示文本”时，它正在调用这两个函数并显示“文本”和“信息”。但我不想在这里显示“信息”。我无法更改 html div 结构。

怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T20:47:39.607

它在文档中有点隐藏，但如果你看这里：[http ://docs.angularjs.org/api/ng.directive:ngClick](http://docs.angularjs.org/api/ng.directive:ngClick)

你可以看到它提到了一个 $event 对象的参数。所以你的html会变成：

```
<div class="box" ng-click="displayinfo($event)">
    click here to display info about this page.
    <div class="content" ng-click="displaytext($event)">
        Click here to display text.
    </div>
    click here to display info about this page.
</div> 
```

然后你的javascript会变成：

```
$scope.displayinfo = function($event)
{
    $event.stopPropagation();
    alert('info');
}
$scope.displaytext = function($event)
{
    $event.stopPropagation();
    alert('Text');
} 
```

**jsfiddle**：http: [//jsfiddle.net/rtCP3/32/](http://jsfiddle.net/rtCP3/32/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T17:28:50.883

而是使用 jquery 在内联调用函数来解决这个问题：

```
$('.box').click(function(){
    displayinfo();
});

$('.content').click(function(e){
    e.stopPropagation(); //<-------------------this will stop the bubbling
    displaytext();
}); 
```

演示代码：http `e.stopPropagation()`: [//jsfiddle.net/HpZMA/](http://jsfiddle.net/HpZMA/)

```
var a = "text for info";
$('.box').click(function(){
    $(this).append(a)
});

var b = "text for info";
$('.content').click(function(e){
    e.stopPropagation(); //<-------------------this will stop the bubbling
    $(this).append(b)
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T17:39:57.763

对于本机 javascript 解决方案，您需要将`event`参数作为参数传递给您的 2 个方法，以防止事件传播

```
<div class="box" onclick="displayinfo(event)"> 
```

然后把js改成：

```
var displayinfo = function(event) {
    event.cancelBubble = true
    alert('info')
}

var displaytext = function(event) {
    event.cancelBubble = true
    alert('text')
} 
```

演示：http: [//jsfiddle.net/MvgTd/](http://jsfiddle.net/MvgTd/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T08:54:24.337

无论你得到什么。stopPropagation(); 在你的情况下

```
$event.stopPropagation(); 
```

# javascript - 有没有办法在表单实际更改时检查它？

> ID：14012978
> 
> 赞同：2
> 
> 时间：2012-12-23T17:19:11.870
> 
> 标签：javascript, html, forms, onchange

我意识到有一个`onchange`事件属性用于检测表单的变化并执行某个javascript函数。但是，这需要用户在表单域之外单击，使其非常类似于`onblur`.

实际上有没有一种方法可以在表单更改时执行功能，而无需等待用户在表单外单击？

*我知道您可以使用 JavaScript 超时每隔几毫秒检查一次表单，但我更喜欢没有它们的解决方案。此外，我不仅限于表单元素；我可以使用`contenteditable` `divs`.*

我认为不需要代码，但如果需要，我可以添加我的意思的示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:29:07.680

jQuery 具有强大的功能，可以满足您的需求，但如果您只需要运行一个简单的脚本，您可以使用诸如 onkeydown 和 onkeypress 之类的功能。

```
<input type="text" onkeydown="myFunction()"> 
```

资料来源：

[W3 学校 - OnKeyPress](http://www.w3schools.com/jsref/event_onkeypress.asp)

[W3 学校 - OnKeyDown](http://www.w3schools.com/jsref/event_onkeydown.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T17:29:36.983

如果我自己这样做，我会在表单的输入上监听 change 事件。我个人认为这对你来说使用 jQuery 会更容易。

```
$('form input, form select').change(function() {
    console.log('form has been changed');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T18:46:24.487

如果您想确保在表单中任何类型的输入发生更改时捕捉到（即复选框、选择列表、单选按钮等，而不仅仅是文本），那么您可以使用我放在一起的以下代码段（假设您使用的是 jQuery）

```
$('form input[type=text]').keyup(formUpdated);

$('form input[type!=text], form select').change(formUpdated);

function formUpdated() {
    alert('input changed');
} 
```

[您可以在这里](http://jsfiddle.net/26CpH/2/)看到它的实际效果。

这只是消除对此需求的好方法：

```
<input type="text" onkeyup="formUpdated();">

<select onchange="formUpdated();">
</select>

<input type="radio" onchange="formUpdated();">

<input type="checkbox" onchange="formUpdated();"> 
```

# sql - 查询不同的行值并分成不同的列

> ID：14012980
> 
> 赞同：0
> 
> 时间：2012-12-23T17:19:16.980
> 
> 标签：sql, pivot, sybase

我有一个包含以下内容的表：

```
Customer ID             Customer type                
---------               --------
123                        A
123                        alpha
123                        Beta   
456                        B
456                        BGamma
456                        BBeta 
```

我想实现以下目标：

```
Customer_ID    Customer_type     Customer_E1    Customer E_2   Customer E_3 
---------      -----------       -----------    -------------  -------------
123                 A               Alpha          Beta
456                 B               BGamma         BBeta 
```

你能帮我用一个 Sybase 查询来实现这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:25:14.073

我不相信 Sybase 有`PIVOT`你想要做的功能。所以你也许可以实现这样的东西，它使用带有`CASE`语句的聚合函数：

```
select customerid,
  max(case when rn = 1 then customertype else null end) CustomerType,
  max(case when rn = 2 then customertype else null end) Customer_E1,
  max(case when rn = 3 then customertype else null end) Customer_E2
from
(
  select CustomerID, CustomerType,
    row_number() over(partition by CustomerID order by CustomerID) rn
  from yourtable
) src
group by customerid 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/63d02/2)

*注意：*我发现第一列数据存在潜在问题`CustomerType`。我的建议是将它放在与其他值不同的列中。那么这将不参与`row_number()`分配，并且更容易保证出现正确的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T17:26:40.120

让我建议您规范化您的数据模型。显然，“A”与“Alpha”是不同类型的数据值（它们描述不同的事物），但是您将它们放在同一个字段中，这会给您带来各种问题。看看[这篇关于数据库规范化的文章](http://www.devshed.com/c/a/MySQL/An-Introduction-to-Database-Normalization/)，它对所涉及的概念进行了很好的讨论。

基本上，您最终想要在一个单独的表中拥有 alpha 和 beta 类型值，您可以通过 Customer ID 和 Customer Type 键入。

# objective-c - 真的卡在屏幕旋转 iOS 6 上，我需要一个锁定为纵向的 xib

> ID：14012982
> 
> 赞同：3
> 
> 时间：2012-12-23T17:19:38.930
> 
> 标签：objective-c, ios, cocoa-touch

在这里阅读了 IOS 6 中处理屏幕旋转的所有方法、Apple 文档和激烈的谷歌搜索后，在使用 xibs 时我仍然坚持这一点。

我想要实现的是只有几个 iPad 的 xib，只有横向，其余的应用程序是纵向的。

如果我使用情节提要，我了解如何对导航控制器进行子类化以覆盖旋转，但我不是，我使用的是 xibs，并且希望任何输入它如何与 xibs 一起使用

在我的应用委托中：

```
ICHomeController *homeController = [[ICHomeController alloc] init];
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:homeController];
navController.navigationBarHidden = YES;
navController.navigationBar.barStyle = UIBarStyleBlackOpaque;
navController.navigationBar.tintColor = [UIColor grayColor];
self.navigationController = navController;
[self.window setRootViewController:self.navigationController];
[self.window makeKeyAndVisible];
return YES; 
```

除了在这里尝试似乎所有解决方案之外，我还在我的 vew 控制器中尝试了明显的方法，但据我所知，在 iOS 6 中它不会被调用。

```
// Older versions of iOS (deprecated)
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
return UIInterfaceOrientationIsLandscape(toInterfaceOrientation);
}

 - (BOOL)shouldAutorotate {
return YES;
 }

 - (NSUInteger)supportedInterfaceOrientations {
return UIInterfaceOrientationMaskLandscape;
 }

 - (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
return UIInterfaceOrientationLandscapeLeft;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T17:33:59.937

几天来，我也一直在与更复杂的导航结构作斗争。

基本规则似乎是 ROOT 控制器，无论是 UINavigationController、UITabBarController 还是简单的 UIViewController，都可以控制旋转。因此，当您将 UIViewControllers 推入堆栈时，第一个仍然控制旋转。

如果您使用模态视图，则此模型视图将被视为堆栈的根，直到它被解除。因此，如果您显示模态 UIViewController 然后将视图推送到其顶部，则作为模态视图呈现的 UIViewController 将控制旋转。只需确保模态视图使用 presentViewController:animated:completion。

让某些视图处于不同旋转状态的最简单方法是以模态方式呈现。如果这无法避免，那么直接回到您的第一个视图或 nag 控制器并设置旋转。

在您的轮换方法中添加一些`NSLog(@"%s", __FUNCTION__);`语句以查看正在调用哪些语句。

在上面的代码中，只有第一种方法是旧的 iOS5（现已弃用）方法。其他 3 个是新的 iOS 6 方法。

使用上面的示例代码，您需要继承 UINavigationController。为此，请创建一个新类作为具有不同名称的 UINavigationController 子类，例如。MyNavigationController 并向其添加旋转方法。然后在上面的代码中而不是使用 `UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:homeController];`

你会使用：

`MyNavigationController *navController = [[MyNavigationController alloc] initWithRootViewController:homeController];`

此外，请确保您在此处选择了允许的方向： ![在此处输入图像描述](../Images/82154f2b2d44d16f362a05123b2a71a5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T10:46:33.083

我有同样的问题。这就是在 5 和 6 中对我有用的方法。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {

    return (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft || toInterfaceOrientation == UIInterfaceOrientationLandscapeRight);
}

- (BOOL)shouldAutorotate NS_AVAILABLE_IOS(6_0)
{
    return NO;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation NS_AVAILABLE_IOS(6_0) {
    return UIInterfaceOrientationLandscapeLeft;
} 
```

在目标总结方面，只有纵向模式是“支持”的。

# c - 如何处理来自 term.h 的侵入性标识符？

> ID：14012986
> 
> 赞同：4
> 
> 时间：2012-12-23T17:20:00.323
> 
> 标签：c, identifier

测试一些代码，包括`term.h`，我看到一些使用常用标识符的奇怪错误，例如`tab`or `columns`。这是因为这个头文件定义了很多宏。这里有些例子：

```
/* from term.h */

#define columns                        CUR Numbers[0]
#define lines                          CUR Numbers[2]
#define bell                           CUR Strings[1]
#define insert_line                    CUR Strings[53]
#define tab                            CUR Strings[134] 
```

但是，我没有找到有关这些宏常量的任何文档。这似乎是访问`TERMINAL`数据结构某些成员的捷径。当然，解决方案是针对`#undef`源代码中使用的每个标识符。但它是非常严格的。

所以我的问题是：为什么不给 的标识符加上前缀`term.h`？
它们经常在实际源代码中用作局部变量，因此会导致难以理解的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T18:28:07.487

有两种方法可以处理标识符冲突：

1.  更改标识符`term.h`
2.  更改代码中*的标识符*

第一个是禁止的，原因我希望不需要解释。`term.h`早在你的代码在你的大脑中形成一个想法之前就已经存在了。因此，创建冲突标识符完全是您的错^Wproblem^Wresponsibility。:-)

也许还有另一种选择：

*   首先不要使用/包含`term.h`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T19:04:21.100

假设您必须使用 term.h 的一种选择是将包含该文件的内容隔离到特定模块中，这样您的整体代码就不会发生冲突。但正如 Jens 所说，“避免名称冲突”是您的任务。属于系统的公共头文件不应仅仅因为您使用与它们相同的名称而被更改。

# codeigniter - 将 Codeigniter 连接到 Oracle 11g

> ID：14012996
> 
> 赞同：7
> 
> 时间：2012-12-23T17:22:00.163
> 
> 标签：codeigniter, oracle11g, connect

请帮忙！我无法将 codeigniter 连接到 Oracle 我正在尝试将 Codeigniter 连接到 Oracle 11g，这是我的设置

```
Settings in database.php:

$active_group = 'default';
$active_record = TRUE;

$db['default']['hostname'] = "//localhost/";
$db['default']['username'] = 'xxxxxxx';
$db['default']['password'] = 'xxxxxxx';
$db['default']['database'] = 'orcl';
$db['default']['dbdriver'] = 'oci8';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

注意：我将 C:\instantclient_11_2 添加到环境变量到 PATH。

```
oracle port number:
oracle hostname: Home-pc
database name: orcl 
```

只有当我运行我的 CodeIgniter 登录代码时，它才会显示此错误消息：

```
A Database Error Occurred

Unable to connect to your database server using the provided settings.

Filename: D:\xampp\htdocs\ci\system\database\DB_driver.php

Line Number: 124 
```

但是当我运行一个简单的 php 代码时，我可以连接到 Oracle：

```
<?php
$conn = oci_connect("xxxxxx", "xxxxxx","");
if (!$conn) { 
   echo "Not connected!";
}
else
  echo "yahooooooooo!!!!!!!!!!";
?> 
```

结果：哇哇哇哇！！！！！！！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T07:30:55.920

在您的配置的 database.php 中进行以下更改

```
$active_group = 'default';
$active_record = TRUE;

$tnsname = '(DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
        (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = XE)))';

$db['default']['hostname'] = $tnsname;
$db['default']['username'] = 'XXXXXX';
$db['default']['password'] = 'XXXXX';
$db['default']['database'] = '';
$db['default']['dbdriver'] = 'oci8';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-12T09:46:31.770

将**默认**更改为**XE**

```
$active_group = 'XE';
$active_record = TRUE;

$tnsname = '(DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
        (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = XE)))';

$db['XE']['hostname'] = $tnsname;
$db['XE']['username'] = 'XXXXXX';
$db['XE']['password'] = 'XXXXX';
$db['XE']['database'] = '';
$db['XE']['dbdriver'] = 'oci8';
$db['XE']['dbprefix'] = '';
$db['XE']['pconnect'] = TRUE;
$db['XE']['db_debug'] = TRUE;
$db['XE']['cache_on'] = FALSE;
$db['XE']['cachedir'] = '';
$db['XE']['char_set'] = 'utf8';
$db['XE']['dbcollat'] = 'utf8_general_ci';
$db['XE']['swap_pre'] = '';
$db['XE']['autoinit'] = TRUE;
$db['XE']['stricton'] = FALSE; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T04:15:46.960

尝试执行此更改将主机名更改为`http://localhost:1521:orcl` 您的数据库名称`orcl`，默认情况下`orcl`是默认实例 ID。尝试创建新用户或数据库并将其更改为配置`database`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-06T15:07:21.957

确保`php_oci8_11g.dll`已加载扩展程序`php.ini`

# core-graphics - 在非矩形阴影上叠加颜色

> ID：14012998
> 
> 赞同：0
> 
> 时间：2012-12-23T17:22:54.787
> 
> 标签：core-graphics, heatmap, drawrect, uicolor

我正在创建一个热图作为图像的叠加层，热图的部分不是矩形，因此叠加颜色有点困难，因为当您叠加图像的颜色时，它也会击中透明像素图片。解决此问题的最佳方法是什么？

第一个图像是我想要覆盖的，第二个是我正在寻找的最终结果......

![我在球场的部分区域在这张图片上叠加颜色](../Images/6a41c49501c2ed8a3a0ff463a631e34d.png) ![这是我正在寻找的最终结果](../Images/998137241bb016aaed716e8d47a650c1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T21:03:45.330

使用[贝塞尔路径](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIBezierPath_class/)、[贝塞尔路径](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSBezierPath_Class/)、[贝塞尔路径](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CGContext/Reference/reference.html#//apple_ref/doc/uid/TP30000950-CH1g-TPXREF106)或[贝塞尔路径](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CGPath/)。

另请参阅[Quartz 2D Programming Guide 中关于 Bézier 路径的部分](http://developer.apple.com/library/ios/documentation/2DDrawing/Conceptual/DrawingPrintingiOS/BezierPaths/BezierPaths.html)。