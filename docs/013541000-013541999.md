# StackOverflow 问答 13541000-13541999

# sql-server-2008 - 将数据库还原到新服务器时出错

> ID：13541004
> 
> 赞同：1
> 
> 时间：2012-11-24T12:00:09.500
> 
> 标签：sql-server-2008, sql-server-2008-r2

当我尝试从 SQL Server 2008 Express R2 将数据库还原到 SQL Server 2008 时收到以下错误：

> *数据库备份在运行版本 10.50.2500 的服务器上。该版本与运行 10.00.4064 的服务器不兼容。在支持备份的服务器上恢复数据库，或使用与该服务器兼容的备份。*

有什么办法可以解决这个问题，还是我被困在 SQL Server Express 上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T12:17:23.897

您不能在 SQL Server 版本中“返回” - 如果您的数据库在**2008 R2** (v10.50) 上 - 您不能将其备份并恢复到**2008** (v10.00) 版本。

没有技巧，没有解决方法，没有黑客 - 它只是**无法完成**- 时期。

所以你要么需要将你的目标系统升级到**2008 R2**（Express 就可以，只要大小低于 10 GB），或者你需要将结构和数据脚本化到`.sql`文件中以在“旧”2008 上运行它们系统（可能使用 Red-Gate SQL Compare / SQL Data Compare 等第三方工具来创建这些脚本，并可能直接针对目标服务器运行它们）。

# r - 用ggplot2在日期轴上画圆

> ID：13541008
> 
> 赞同：0
> 
> 时间：2012-11-24T12:01:32.113
> 
> 标签：r, ggplot2, geometry

现在我用 ggplot2 绘制情节。

我想在我的情节中画圈。

所以我搜索它并找到了解决方案。

[用ggplot2画一个圆](https://stackoverflow.com/questions/6862742/draw-a-circle-with-ggplot2)

但是我不能使用这个解决方案，因为我的绘图的 x 轴是日期格式。

```
my_plot <- qplot(Day, value, data = target_data_melt, shape = variable, colour = variable, geom="line")
my_plot <- my_plot + scale_x_date(labels = date_format("%Y-%m")) 
```

如何在我的情节中画一个圆圈？

有没有办法在日期轴上画一个圆圈？

* * *

target_data_melt 看起来像这样。

> ```
>  Day  variable       value 
> ```
> 
> 1 2010-10-01 231 0.007009346
> 
> 2 2010-10-03 231 0.005204835
> 
> 3 2010-10-05 231 0.006214004

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T15:19:29.783

您可以调整您提供的[链接](https://stackoverflow.com/a/6863490/1849317)中的代码以将 x 坐标格式化为日期：

```
require("date")

circle <- function(center_Date = as.Date("2012-11-24"), 
                   center_y = 0, 
                   r.x = 100,
                   r.y = 100,
                   npoints = 100) {
  cycle <- seq(0,2*pi,length.out = npoints)
  xx <- center_Date + r.x * cos(cycle)
  yy <- center_y + r.y * sin(cycle)
  return(data.frame(x = xx, y = yy))
} 
```

和一个演示：

```
df <- circle()
plot <- ggplot(df, aes(x, y)) + geom_path()
plot(plot) 
```

示例图像（带有调整的日期和 y 中心）[在这里](http://pasteboard.s3.amazonaws.com/images/14nbKfu4.png)。

您必须正确设置 rx 和 ry 以获得完美的圆形（而不是椭圆形）。这些应该是什么取决于您在绘图中使用的比例。

# opencv - 用于识别多个不同图像的 OpenCV 特征检测

> ID：13541009
> 
> 赞同：1
> 
> 时间：2012-11-24T12:01:41.053
> 
> 标签：opencv, computer-vision, feature-detection

我的问题是 - 我可以使用 OpenCV 中的特征检测识别源图像中的*不同模板吗？*假设我的模板是路标。

我正在使用 ORB，但这*不是*特定于跟踪器的问题。

我没有特征检测的基本方法是：

*   图像准备（过滤等）；
*   检测我的对象可能位于的 ROI；
*   将 ROI 调整为模板的大小并与我拥有的每个模板进行比较（即模板匹配）；
*   比较后的最大相关性是我寻找的对象。

但是通过特征检测，我会检测模板集中每个图像的关键点和描述符以及对象可能位于的 ROI，但匹配器会返回我在 ROI 中拥有的所有描述符的距离。

我无法将此与 ROI 和模板之间的任何相关性联系起来，或者换句话说，我无法根据匹配器提供的信息来确定 ROI 图像和模板图像是否是相同的对象。

所以，更具体地说 - 我的方法是错误的，并且特征检测器用于检测源图像中的*一个*模板对象（这不是我需要的）或者我只是没有掌握特征检测的基本概念，因此我在需要帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T17:30:01.420

您可能缺少两个方面。一种是使用 RANSAC+homography 之类的方法去除特征匹配中的异常值。第二点是将模板的角投影到场景中，以制作图像的“矩形”。此外，您应该定义一个阈值，即您将考虑正确检测的最小值。

查看本[教程](http://docs.opencv.org/doc/tutorials/features2d/feature_homography/feature_homography.html#feature-homography)以查找具有特征检测的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T11:24:31.830

我会向您推荐一本书，名为：“opencv2 计算机视觉应用程序编程食谱”

只需浏览相关章节。

# c# - 防止在 Windows 8 Metro 应用程序中提交空文本框

> ID：13541014
> 
> 赞同：3
> 
> 时间：2012-11-24T12:02:52.953
> 
> 标签：c#, windows-8, windows-store-apps

Windows 8 Metro 中是否有类似RequiredFeild 控件（asp.net）的控件？我有一个带有多个文本框的简单表单，我只想确保在文本框为空时防止提交它。我知道代码很容易，但我很想知道有没有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T12:37:43.697

您可能想要使用[WinRT XAML 工具包](http://winrtxamltoolkit.codeplex.com/)：

> **TextBoxValidationExtensions** - 允许指定所请求文本输入的格式以及用于突出显示具有有效或无效文本的文本框的画笔的扩展。

我假设您实际上想要验证输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T13:07:48.990

这是我找到的另一个解决方案。

[这里](http://blogs.u2u.be/diederik/post/2012/10/09/Input-Validation-in-Windows-8-Store-apps.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T12:33:14.810

为什么不使用 String.IsNullOrEmpty() ？

# php - 一堆 URL 的 Facebook FQL 最大查询长度

> ID：13541015
> 
> 赞同：1
> 
> 时间：2012-11-24T12:03:06.073
> 
> 标签：php, facebook, url, sdk, facebook-fql

1.  像下面这样的 Facebook FQL 查询的最大允许长度是多少（$urls 是来自一个频道的 youtube url 的逗号分隔列表）？目前对于我的 62 个 url 的 $fql 查询，strlen 返回大约 5 KB，但是随着视频提交的出现，我担心我可能会遇到某种请求或响应限制。我正在使用来自 github 的 Facebook PHP SDK 3.2.0。

    ```
    $fql = "SELECT url, normalized_url, share_count, like_count, comment_count, ";  
    $fql .= "total_count, commentsbox_count, comments_fbid, click_count FROM ";  
    $fql .= "link_stat WHERE url IN ($urls) ORDER BY total_count DESC";  

    $fqlResults = $facebook->api(数组(  
    '方法' => 'fql.query',  
    '查询' =>$fql  
    ));
    ```

2.  在运行 FQL 或 Graph 查询以获取给定 URL 的共享计数时，我偶尔会得到一个 URL 统计数据，其中的点赞数 (total_count) 少于该相同 URL 的 Like 按钮状态。我知道“赞”按钮计数中的评论、分享、赞聚合，但我说的只是少了几个赞，并且 URL 相同。几乎就好像一些点赞是为图形 api 设置的，但不是为点赞按钮插件设置的。

# c++ - C++ 游戏倒数计时器

> ID：13541018
> 
> 赞同：1
> 
> 时间：2012-11-24T12:03:23.310
> 
> 标签：c++, windows-7, timer, countdown

我想问一下，当我需要用户在一段时间内输入一些字符串时，如何制作主机游戏？（*我尝试使用`Sleep`功能，但它会使屏幕冻结一段时间，我不想这样做*）

示例：流行测验

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:24:38.987

我认为这可以在没有多线程的情况下完成（一个非常简单的计时器版本）

您可以尝试编写类似这样的内容并对其进行修改以满足您的需求：

*请注意，代码不完整。您需要对其进行编辑，使其符合您的需求。但是，这应该给你一个想法。*

```
int main() 
{   
   time_t begin, end;
   char input;
   bool flag = true;
   begin = time();
   while (flag) 
   {
      if(kbhit()) 
         ch = getch();
      end = time();
      if(difftime(end, begin) > NEEDED_TIME_IN_SECONDS) 
        flag = false;  //The user didn't enter it in within the wanted period of time
    }
} 
```

一些文件：

*   **double difftime(time_t time2, time_t time1)** 返回两次之间的差 计算 time1 和 time2 之间的秒差。
*   **getch()**提示用户按下一个字符并且该字符不打印在屏幕上。
*   **kbhit()**如果键在键盘缓冲区中，则返回一个非零整数。它不会等待按键被按下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T14:35:19.760

如果您使用 Windows，请尝试以下代码：

```
#include <stdio.h>
#include <time.h>
#include <conio.h>
#include <windows.h>
#include <string>
#include <iostream>
using namespace std;

#define KB_UP 72
#define KB_DOWN 80
#define KB_LEFT 75
#define KB_RIGHT 77
#define KB_ESCAPE 27
#define KB_F8 66
#define KB_ENTER 13

unsigned int x_hours=0;
unsigned int x_minutes=0;
unsigned int x_seconds=0;
unsigned int x_milliseconds=0;
unsigned int totaltime=0,count_down_time_in_secs=0,time_left=0;
clock_t x_startTime,x_countTime;
int KeyBoard_code,input_count=0;
int caret_x=0,caret_y=0;
char keyboard_buffer[100]={' '};
char answer_buffer[100]={' '};
char correct_answer[ ]="foo bar";

int is_from_keyboard(int ch);
void  start_timer();
void  delta_time_update_timer();
void gotoxy(int x, int y);
void clrscr(void);
void setcolor(WORD color); 
void keyboard_input();

int main ()
{

    count_down_time_in_secs= 4;  // 1 minute is 60sec (60x1min), 1 hour is 3600 (60x60min)

    start_timer();
    delta_time_update_timer();

    gotoxy(1 , 2);  
    printf( "\nWhat is the answer to the  bla bla of bla bla?  ");
    gotoxy(1,5);printf( "Answer? >");

    while (time_left>0) 
    {
        keyboard_input();
        delta_time_update_timer();
    }

    gotoxy(1 , 12);
    printf( "\n\n\nTime's out\n\n\n");

return 0;
}

void  start_timer()
{
    x_startTime=clock();  // start clock
}

void  delta_time_update_timer()
{
    x_countTime=clock(); // update timer difference
    x_milliseconds=x_countTime-x_startTime;
    x_seconds=(x_milliseconds/(CLOCKS_PER_SEC))-(x_minutes*60);
    x_minutes=(x_milliseconds/(CLOCKS_PER_SEC))/60;
    x_hours=x_minutes/60;
    time_left=count_down_time_in_secs-x_seconds;   // update timer

        gotoxy(1 , 1);
        printf( "\nYou have %d seconds left  ",time_left,count_down_time_in_secs);
        gotoxy(1,5);

}

void keyboard_input()
{
    if (kbhit())
      {
            KeyBoard_code = getch();

            caret_x++;
            gotoxy(10+caret_x,5+caret_y);
            printf( "%c",KeyBoard_code);
            input_count++;
            keyboard_buffer[input_count]=(char)KeyBoard_code;

            switch (KeyBoard_code)
            {

                case KB_ESCAPE:

                break;

                case KB_ENTER:

                    memcpy(answer_buffer, keyboard_buffer,sizeof(keyboard_buffer));

                    gotoxy(1 ,7);
                    printf( "Your answer is  %s ",answer_buffer);   

                    gotoxy(1,5);printf( "Answer? >              ");
                    gotoxy(1 ,9);
                    printf( "The correct answer is %s ", correct_answer);
                    caret_x=0;
                    input_count=0;
                    start_timer();
                    count_down_time_in_secs= 7;
                    delta_time_update_timer();
                    memset(keyboard_buffer,32,sizeof(keyboard_buffer));
                    memset(answer_buffer,32,sizeof(answer_buffer));

                break;

                case KB_LEFT:

                break;

                case KB_RIGHT:

                  break;

                case KB_UP:

                break;

                case KB_DOWN:

                break;

            }        

      }

}

void setcolor(WORD color)
{
    SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE),color);
    return;
}

void gotoxy(int x, int y)
{
  static HANDLE hStdout = NULL;
  COORD coord;

  coord.X = x;
  coord.Y = y;

  if(!hStdout)
  {
    hStdout = GetStdHandle(STD_OUTPUT_HANDLE);
  }

  SetConsoleCursorPosition(hStdout,coord);
}

void clrscr(void)
{
  static HANDLE hStdout = NULL;      
  static CONSOLE_SCREEN_BUFFER_INFO csbi;
  const COORD startCoords = {0,0};   
  DWORD dummy;

  if(!hStdout)               
  {
    hStdout = GetStdHandle(STD_OUTPUT_HANDLE);
    GetConsoleScreenBufferInfo(hStdout,&csbi);
  }

  FillConsoleOutputCharacter(hStdout,
                             ' ',
                             csbi.dwSize.X * csbi.dwSize.Y,
                             startCoords,
                             &dummy);    
  gotoxy(0,0);
}

int is_from_keyboard(int ch)
{

    if ( ch>=31 && ch<128) return 1;
    else return -1;

} 
```

# grails - 用户类和 spring security ui 插件中的电子邮件字段

> ID：13541019
> 
> 赞同：1
> 
> 时间：2012-11-24T12:03:36.867
> 
> 标签：grails, spring-security, grails-plugin

我遇到了 spring security ui 插件的问题。我正在尝试向我的 SecUser 类（存储有关用户的信息）添加一个电子邮件字段。但是，使用 s2ui-override 生成的 Spring Security Management Console 中没有字段“email”。另一方面，由于文档，这是可用的（[链接](http://grails-plugins.github.com/grails-spring-security-ui/docs/manual/guide/2%20User%20Management.html)）：

> 默认情况下，只有标准字段（用户名、启用、accountExpired、accountLocked 和 passwordExpired）可用，但可以使用 grails s2ui-override 脚本自定义 - 请参阅配置部分。

我尝试使用 s2ui 覆盖脚本但没有效果。
我认为这很简单，但几个小时后我自己找不到解决方案。所以如果有人知道怎么做 - 请告诉我;）

在和我的用户类：

```
class SecUser {

    transient springSecurityService

    String username
    String password
    String email
    boolean enabled
    boolean accountExpired
    boolean accountLocked
    boolean passwordExpired

    static constraints = {
        username blank: false, unique: true
        password blank: false
        email blank: false, email:true
    }

    static mapping = {
        password column: '`password`'
    }

    Set<SecRole> getAuthorities() {
        SecUserSecRole.findAllBySecUser(this).collect { it.secRole } as Set
    }

    def beforeInsert() {
        encodePassword()
    }

    def beforeUpdate() {
        if (isDirty('password')) {
            encodePassword()
        }
    }

    protected void encodePassword() {
        password = springSecurityService.encodePassword(password)
    }

    @Override
    public String toString(){
        return "User - "+username;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:29:17.110

[您可以从用户/编辑](https://github.com/grails-plugins/grails-spring-security-ui/blob/master/grails-app/views/user/edit.gsp)视图查看源代码：

```
 <table>
    <tbody>

        <s2ui:textFieldRow name='username' labelCode='user.username.label' bean="${user}"
                        labelCodeDefault='Username' value="${user?.username}"/>

        <s2ui:passwordFieldRow name='password' labelCode='user.password.label' bean="${user}"
                            labelCodeDefault='Password' value="${user?.password}"/>

        <s2ui:checkboxRow name='enabled' labelCode='user.enabled.label' bean="${user}"
                       labelCodeDefault='Enabled' value="${user?.enabled}"/>

        <s2ui:checkboxRow name='accountExpired' labelCode='user.accountExpired.label' bean="${user}"
                       labelCodeDefault='Account Expired' value="${user?.accountExpired}"/>

        <s2ui:checkboxRow name='accountLocked' labelCode='user.accountLocked.label' bean="${user}"
                       labelCodeDefault='Account Locked' value="${user?.accountLocked}"/>

        <s2ui:checkboxRow name='passwordExpired' labelCode='user.passwordExpired.label' bean="${user}"
                       labelCodeDefault='Password Expired' value="${user?.passwordExpired}"/>
    </tbody>
    </table> 
```

没有*电子邮件*字段。您应该将 edit.gsp 和 create.gsp 文件从源代码复制到 grails-app/views/user/ 并在*用户*名字段后粘贴此代码进行编辑：

```
 <s2ui:textFieldRow name='email' labelCode='user.email.label' bean="${user}"
                    labelCodeDefault='email' value="${user?.email}"/> 
```

您必须在 grails-app/i18n/ 路径中创建*spring-security-core-local.properties*并编写新属性

```
user.email.label=Email 
```

当然，您应该在正确的域类中创建属性*电子邮件。*

# java - 如何获得近似解决方案以获得通过所有节点的最短路径

> ID：13541023
> 
> 赞同：2
> 
> 时间：2012-11-24T12:04:17.350
> 
> 标签：java, algorithm, path, shortest-path

有人知道算法或做某事吗

所以我有与弧连接的节点，我必须找到一个解决方案来找到覆盖所有节点的近似最短路径。（我只能拜访他们一次）

它必须是一个近似路径，因为它需要很长时间才能得到最短路径

感谢您的回答:)

（我必须在java中这样做）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T12:28:24.817

这被称为[旅行推销员问题](http://en.wikipedia.org/wiki/Travelling_salesman_problem)，一个合理且快速的近似方法是始终访问最近的未访问节点，然后在其他几个起始位置重试相同的操作。通常，这会让您非常接近最佳解决方案。

另一种算法是先构造图的最小生成树，然后删除重复的节点。这保证了次优性的某个上限（在欧几里得情况下不超过两倍，（[维基百科](http://en.wikipedia.org/wiki/Travelling_salesman_problem#Constructive_heuristics)））

另一种算法是从前三个节点开始，然后通过拆分现有边（或在末尾添加新边）以某种顺序添加下一个节点（初始，按 x 坐标排序，按距中心的距离排序...） ，在最短路径的情况下），同时保持路径尽可能短。

一旦你有了一个解决方案（即使是一个糟糕的解决方案），你可以通过 K-opt 来改进它：重复选择 K 个随机边，将它们完全删除，然后找到重新连接新端点的最佳方法。K-opt 的一个变体是[Lin-Kerningham](http://en.wikipedia.org/wiki/Lin%E2%80%93Kernighan)启发式算法，它交替使用 2-opt 步骤和 3-opt 步骤（以某种顺序），其中三个边中的两个总是相邻的。

如果大多数边丢失或很长（两个节点之间的距离不形成度量），那么您就有问题了。假设它是 NP 完全的，如果缺少边，则决定是否存在这样的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T14:17:04.313

一个非常快速的近似是沿着空间填充曲线对顶点进行排序。空间填充曲线减少了维度并且还保留了一些空间信息。尝试旅行推销员问题的摩尔曲线，因为它是 4 条希尔伯特曲线的副本，因此起点和终点彼此相邻。但是画起来有点贵。

![在此处输入图像描述](../Images/1777a71790af0f5d61575daa7c0d0614.png)

![在此处输入图像描述](../Images/2c7dc138aa483444f8b2e753731ab102.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T12:23:58.583

就在这里。该方法称为“遗传优化”，具体如下： 1\. 找到一个解决方案，即访问每个节点一次的路径。2\. 随机选择 k 个相邻节点：N1,N2..Nk : X->N1->..Nk->Y 3\. 使用节点 N1..Nk 检查从 X 到 Y 是否有更短的路径 4.将路径 X -*> Y 替换为较短的解决方案 5\. goto 2

k 必须很小（5 或更少），以便您可以轻松找到更短的组合

它的好处是您可以随时停止并使用现有的解决方案。一个改进是随机选择一个较大的 k 一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T14:58:22.343

如果您不需要自己实现算法，您可能需要查看[JGraphT](http://jgrapht.org/)。它有一个算法的实现来找到[哈密顿循环](http://jgrapht.org/javadoc/org/jgrapht/alg/HamiltonianCycle.html)。

# nginx - NGINX 作为 Paster 的反向代理

> ID：13541027
> 
> 赞同：1
> 
> 时间：2012-11-24T12:05:26.307
> 
> 标签：nginx

我们正在尝试使用 nginx 作为代理。我们的应用程序有一个 pylons 框架，它使用 paste 来传递资源。

以下是我们对 nginx 的配置：

```
 server {
    listen       80;
        server_name  www.vvidiacom.com;
        access_log   /var/log/nginx/localhost.access_log main;  

    client_max_body_size 1500M;

    root /myhome/myapp/myapp/public;

    location /web {
        proxy_pass http://192.168.1.124:8080;
        proxy_set_header  X-Real-IP  $remote_addr;
        proxy_redirect off;
        proxy_set_header X-Forwarded-Host $host;
        proxy_set_header X-Forwarded-Server $host;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        #proxyPassReverse /web http://myserver:8080;
    }

    location /media {
        proxy_set_header X-Forwarded-Host $host;
        proxy_set_header X-Forwarded-Server $host;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://192.168.1.124:8080/media;
        #proxyPassReverse /web http://myserver:8080;
        }   

    #location ~*/(appearance)/ {
        #    root /myhome/myapp/data;
        #proxy_set_header X-Forwarded-Host $host;
    #   proxy_set_header X-Forwarded-Server $host;
    #   proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        #proxyPassReverse  http://myserver:8080;
        #    break;
        #        }

        #   location ~*(/images\/media|images\/podcasts) {
        #    root /myhome/myapp/data;
    #   proxy_set_header X-Forwarded-Host $host;
    #   proxy_set_header X-Forwarded-Server $host;
    #   proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        #proxyPassReverse  http://myserver:8080;
        #            break;
        #        }

        #   location ~*/(styles|scripts|images)/ {
    #root /myhome/myapp/myapp/public;
    #   proxy_set_header X-Forwarded-Host $host;
    #   proxy_set_header X-Forwarded-Server $host;
    #   proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        #proxyPassReverse  http://myserver:8080;
        #       expires max;
        #            add_header Cache-Control "public";
        #            break;
        #        }

    #location /__myapp_serve__ {
        #    alias /myhome/myapp/myapp/data/media;
        #    internal;
        #}
    } 
```

不知何故，css 文件和图像没有被传递。

我们尝试了以下机制： 1\. 将 Nginx 配置为纯代理，其中所有资源都将由 paster 传递。2\. 配置 Nginx，使 nginx 交付静态资源，其余通过粘贴交付。两者都不为我们工作。不知何故，静态资源（如 css、图像）没有得到交付。我们的场景如下所示：

文件路径实际上在 URL 中以 web 为前缀：因此，如果 URL 是 /web/data/images，那么实际路径将是 $ROOT/data/images。

我们之前使用的是 Apache，其中选项 1（如上所述工作正常）。

我们是 nginx 的新手。如果您能告诉我们我们做错了什么以及上述原因可能是什么，我们将不胜感激。

期待您的回复和帮助……</p>

# php - 注册后验证问题

> ID：13541029
> 
> 赞同：1
> 
> 时间：2012-11-24T12:05:30.333
> 
> 标签：php, mysql

我正在做一个注册页面。它需要姓名、密码、电子邮件、性别、国籍、出生日期和其他信息。

我做了注册，很好。但我需要添加验证，这是我到目前为止可以做的：

```
<?php include("config.php"); ?>
    <!DOCTYPE html>
    <html lang="en">

    <!-- CSS -->
    <link rel="stylesheet" href="css/styles.css" type="text/css"/>
    <link type="text/css" href="css/jquery-ui-1.7.2.custom.css" rel="stylesheet" /> 

    <!-- JavaScript -->
    <script type="text/javascript" src="js/jquery-1.3.2.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.7.2.custom.min.js"></script>
    <script src="js/validation.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function(){
                    $('#datepicker').datepicker({
                        dateFormat:'dd/mm/yy',
                        changeMonth: true,
                        changeYear: true,
                        yearRange: '-90:+0',
                        maxDate: '+0'
                    });
        });
    </script>
    </head>

    <head>
    <title></title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/reset.css" type="text/css" media="all">
    <link rel="stylesheet" href="css/layout.css" type="text/css" media="all">
    <link rel="stylesheet" href="css/style.css" type="text/css" media="all">
    <script type="text/javascript" src="js/jquery-1.4.2.js" ></script>
    <script type="text/javascript" src="js/cufon-yui.js"></script>
    <script type="text/javascript" src="js/cufon-replace.js"></script>
    <script type="text/javascript" src="js/Myriad_Pro_italic_600.font.js"></script>
    <script type="text/javascript" src="js/Myriad_Pro_italic_400.font.js"></script>
    <script type="text/javascript" src="js/Myriad_Pro_400.font.js"></script>
    <!--[if lt IE 9]>
        <script type="text/javascript" src="http://info.template-help.com/files/ie6_warning/ie6_script_other.js"></script>
        <script type="text/javascript" src="js/html5.js"></script>
    <![endif]-->
    <?php $error_messages = array(
        'T1' => 'Please enter a Name to proceed.',
        'T2' => 'Please enter a valid Email Address to continue.',
        'T3' => 'Please enter your Message to continue.'
    ); 
    ?>
    </head>
    <body id="page2">
    <div class="body1">
        <div class="main">
    <!-- header -->
            <header>
                <div class="wrapper">
                    <h1><a href="index.html" id="logo">Air Lines</a><span id="slogan">International Travel</span></h1>
                    <div class="right">
                        <nav>
                            <ul id="top_nav">
                                <li><a href="index.html"><img src="images/img1.gif" alt=""></a></li>
                                <li><a href="index-4.html"><img src="images/img2.gif" alt=""></a></li>
                                <li class="bg_none"><a href="#"><img src="images/img3.gif" alt=""></a></li>

                            </ul>
                        </nav>
                        <nav>
                            <ul id="menu">
    <li><a href="index.php">Home</a></li>
                                <li  id="menu_active" ><a href="LSU.php">Login/sign up</a></li>
                                <li><a href="V&M.php">Vision and mission</a></li>

                                <li><a href="contact.php">Contacts</a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </header>
        </div>
    </div>
    <div class="main">
        <div id="banner"></div>
    </div>
    <!-- header -->
    <div class="main">
    <!-- content -->
        <section id="content">
            <article class="col1">
                <div class="pad_1">
                    <h2>Login</h2>
                  <form id="form_1" action="login.php" method="post">

                        <div class="wrapper">
                            User Name:
                            <div class="bg"><input type="text" name="LogIn_Name" class="input input1" value="Enter your name" onblur="if(this.value=='') this.value='Enter your name'" onfocus="if(this.value =='Enter your name' ) this.value=''"></div>
                        </div>
                    <div class="wrapper">
                            Password:
                            <div class="bg"><input type="password" name="LogIn_Pass" class="input input1" value="Enter your password" onblur="if(this.value=='') this.value='Enter your password'" onfocus="if(this.value =='Enter your password' ) this.value=''"></div>
                      </div>
                      <div class="wrapper">

                        <h2 id="coq"> <a href="Forget.php">Forget Password</a></h2>

                          <input type="submit" class="button2" value="GO">
                    </div>
                    </form>

                    <h2>&nbsp;</h2>
                </div>
            </article>
            <article class="col2 pad_left1">
                <h2>Registration</h2>
                <div class="wrapper">
                    <figure class="left marg_right1"></figure>
                    <p> 

                                    <form id="form_1" action="" method="post">
    <div class="wrapperr"  >
    <?php 

    $username =  $_POST["T1"];
    $password =  $_POST["T2"];
    $repassword =  $_POST["T3"];
    $email =  $_POST["T4"];
    $gender =  $_POST["T5"];
    $Cou =  $_POST["T6"];
    $DO=  $_POST["T7"];
    $passport=  $_POST["T8"];
    $phone=  $_POST["T9"];

    {
    if((strlen($username)<3)){
    echo "The username is too short"."</br>";

    if((strlen($gender)<3)){
    echo "Gender"."</br>";
    }

    if((strlen($Cou)<2)){
    echo "The CO too short"."</br>";
    }

    if((strlen($phone)<5)){
    echo "The phone is too short"."</br>";
    }

    if((strlen($password)<5)){
    echo "The password is too short"."</br>";
    }
    }
    else{
    if($password == $repassword){
    $chec = mysql_query("SELECT * FROM register WHERE name='$username'"); 
    if(strlen($chec['name'])>0){
    echo "The username '$username' already exists";
    }
    else{
    $check_variable=stripos($email,"@");
    if($check_variable){

    $password=md5($password);
    mysql_query("INSERT INTO register (name,password,email,gender,country,DOB,phone,passport) VALUES ('$username','$password','$email','$gender','$Cou','$DO','$phone','$passport')");
    echo "Registration Successful .. Click <a href='index.php'> here </a> to home";
    }
    else{
    echo "email is invalid";
    }
    }
    }
    else{
    echo "The password in both field doesn't match.";
    }
    }
    }

    ?>
        </div>              <div class="wrapper">
                            Name:
                            <div class="bg"><input type="text" name="T1" class="input input1"  value="Enter your name" onblur="if(this.value=='') this.value='Enter your name'" onfocus="if(this.value =='Enter your name' ) this.value=''"></div>
                        </div>

                                            <div class="wrapper">
                            Password:
                            <div class="bg"><input type="password" name="T2"  class="input input1" value="Enter the password" onblur="if(this.value=='') this.value='Enter the password'" onfocus="if(this.value =='Enter the password' ) this.value=''"></div>
                        </div>

                                            <div class="wrapper">
                            Confirm password:
                            <div class="bg"><input type="password" name="T3" class="input input1" value="Confirm the password" onblur="if(this.value=='') this.value='Confirm the password'" onfocus="if(this.value =='Confirm the password' ) this.value=''"></div>
                        </div>

                                            <div class="wrapper">
                            e-mail:
                            <div class="bg"><input type="text" name = "T4" class="input input1" value="Enter your e-mail" onblur="if(this.value=='') this.value='Enter your e-mail'" onfocus="if(this.value =='Enter your e-mail' ) this.value=''"></div>
                        </div>

                        <div class="wrapper">
                            Gender:
                            <div class="bg">
                              <td>
                              <input type="radio" name="T5" value="Male">
                              Male
                              </td><td>
                               <input type="radio" name="T5" value="Female">
                              Female</td>

                          </div>
                        </div>

                                    <div class="wrapper">
                            NATIONALITY:
                              <div class="bg"><input type="text" name="T6" class="input input1" value="Enter your country" onblur="if(this.value=='') this.value='Enter your country'" onfocus="if(this.value =='Enter your country' ) this.value=''"></div>
                        </div>

                        <div class="wrapper">

                                                        <div class="wrapper">
                            Passport number:
                              <div class="bg"><input type="text" name="T8" class="input input1" value="Enter your passport number" onblur="if(this.value=='') this.value='Enter your passport number'" onfocus="if(this.value =='Enter your passport number' ) this.value=''"></div>
                        </div>

                        <div class="wrapper">

                            Date of birth:
                      <div class="wrapper">
                                <div class="bg left"><input type="text" name="T7" class="input input2" value="mm/dd/yyyy " onblur="if(this.value=='') this.value='mm/dd/yyyy '" onfocus="if(this.value =='mm/dd/yyyy ' ) this.value=''" id="datepicker"  >
                                  <br/><span id="bdayInfo"></span>

                        </div>
                                <div class="bg right"></div>
                            </div>
                        </div>
                        Phone number:
                                                <div class="wrapper">
                                <div class="bg left"><input type="text" name="T9" class="input input2" value="" onblur="if(this.value=='') this.value=''" onfocus="if(this.value =='' ) this.value=''"></div>
                                <div class="bg right"></div>
                          </div>
                        </div>
                        <div class="wrapper">
                        <p>&nbsp;</p>
                      <input type="submit" class="button2" name="Go" value="GO">
                        </div>
                    </form>

                    </p>
                </div>
                <p>&nbsp;</p>
              <h2>&nbsp;</h2>
            </article>
        </section>
    <!-- / content -->
    </div>
    <div class="body2">
        <div class="main">
    <!--footer -->
            <footer>
                Website template designed by <a href="http://www.templatemonster.com/" target="_blank" rel="nofollow">www.templatemonster.com</a><br>
                3D Models provided by <a href="http://www.templates.com/product/3d-models/" target="_blank" rel="nofollow">www.templates.com</a>
            </footer>
    <!-- / footer -->
        </div>
    </div>
    <script type="text/javascript"> Cufon.now(); </script>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T00:42:55.803

始终首先验证服务器端，即在 PHP 中（这**是需要**它的地方）。

然后在之后添加 JavaScript 验证。它**不是必需**的，但添加以改善用户体验。任何 javascript 都可以被绕过（避免），所以如果你没有 PHP 备份，那么你就会让自己面临麻烦。

请注意，我并不是说不要添加 JS 验证，只是您先添加 PHP，然后添加 JS。有时您会发现可以同时添加两者的库/框架。

* * *

回到您的代码：错误似乎是您在显示错误**后**正在检查错误。所以它会失败。

重组你的代码如下：

*   为表单创建默认值
*   创建空白错误数组。
*   如果已发布，则读入值（超过默认值），验证它们
*   如果一切正常，则处理表单并将 [ `header('location: '); exit();`] 重定向到结果/感谢页面。
*   （请注意，此时您根本没有输出任何 HTML，只是更新了您的默认值和错误数组）
*   如果一切都不好（或者您从未收到过帖子），那么现在显示 HTML。您有输入的默认值（如果适用，还将包含 POSTED 值）和错误消息以显示在正确的位置。

基本上，首先处理数据，最后输出。

一旦工作正常，然后进行 jQuery 验证（如评论中所建议的那样）。这个很不错。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-24T13:16:38.647

HTML 5 有一堆内置的验证工具，您可以使用 jQuery 或 Javascript 来进一步增强它。我不喜欢在新页面上验证变量，尤其是当我们可以完全阻止页面加载时。绝对要查看某种客户端验证，而不是发布到 PHP 页面。

W3Schools 有一篇关于 Javascript 验证的不错的文章：http: [//www.w3schools.com/js/js_form_validation.asp](http://www.w3schools.com/js/js_form_validation.asp)

上面的评论中已经给出了 jQuery 链接。

如果 Javascript 不是你的专长，那么试试这样的方法。它是预先构建的，并具有一些不错的功能。最重要的是它是免费的。 [http://www.javascript-coder.com/html-form/javascript-form-validation.phtml](http://www.javascript-coder.com/html-form/javascript-form-validation.phtml)

# haskell - 如何在 Haskell 中过滤无限列表

> ID：13541034
> 
> 赞同：14
> 
> 时间：2012-11-24T12:06:01.793
> 
> 标签：haskell

> **可能的重复：**
> [无限列表的有限理解](https://stackoverflow.com/questions/10336392/finite-comprehension-of-an-infinite-list)

我不明白为什么 ghci 不能正确计算这段代码？

```
[x | x <- [1..], x < 1000] 
```

Ghci 仅在最后一个数字处停止，我需要在命令行中中断此过程以恢复正常状态。怎么了？由于 haskell 的惰性评估，我希望这段代码应该可以工作。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-24T12:17:09.457

`[x | x <- [1..], x < 1000]`相当于`filter (< 1000) [1..]`; 你想要`takeWhile (< 1000) [1..]`的。

`filter`那么和 和有什么区别`takeWhile`呢？

好吧，如果您尝试评估整个结果 --- 这就是 ghci 所做的，以便打印它 --- 然后`filter`将测试输入列表中的每个元素以确定它是否应该在输出列表中。在前一千个元素之后？它进行测试。`filter`不知道是不是突然要遇到`..., 12345, 12346, -7, 12348, ...`。

另一种看待它的方式是，`filter`一旦到达输入列表的末尾，它只能说“输出列表到此结束”。如果你给它一个无限列表，它永远不能确定它已经生成了输出列表的所有元素。所以它看起来会挂起。

`takeWhile`另一方面，一旦到达不符合条件的元素，它就会停止并终止其输出列表。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-24T12:18:16.620

您只是简单地询问了列表中小于 1000 的每个数字。*您*知道列表已排序，但您的算法没有利用这一点。编译器不会自动意识到您正在处理已排序的数据，并且无法推断一旦您看到了一个至少为 1000 的数字，就再也看不到小于该数字的数字了。

正如其他人指出的那样，`takeWhile (< 1000) [1..]`一旦谓词对某个元素失败（在这种情况下，一旦遇到至少 1000 的数字），就会通过专门停止对列表的检查来利用您对列表的特殊性的了解。注意这是一个可用的*优化*，因为`[1..]`它不是“只是一个列表”；它是一个具有特殊属性的列表（特别是已排序）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-24T12:26:40.850

由于您产生了一个无穷大`[1..]`，因此该列表的每个元素都会根据您的条件进行检查`x < 1000`。这也意味着此列表中大于 1000 的每个元素都会使用此条件进行检查。

但是你可以这样写你的函数：

```
myFilteredList :: [Int] -> [Int]
myFilteredList [] = []
myFilteredList (x:xs) = if x < 1000 then x: myFilteredList xs else [] 
```

对于更一般的行为，您也可以将条件作为参数。

```
myFilteredList :: (a -> Bool) -> [a] -> [a]
myFilteredList cond [] = []
myFilteredList cond (x:xs) = if cond x then x: myFilteredList cond xs else [] 
```

`myFilteredList (< 1000) [1..]`

这正是预定义函数`takeWhile`所做的。它接受一个条件`(a -> Bool)`和一个列表`[a]`作为参数，并返回符合条件的列表前缀。就像在 的定义中一样`myFilteredList`，如果函数处理了整个列表或者如果它到达列表中的第一个元素，则该函数终止，这不满足条件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T13:20:55.567

检查 x<1000 用于决定要包含在过滤列表中的内容，而不是停止评估。换句话说，你给 ghci 一个无限列表，它会对列表中的每个元素执行 x<1000。如果要在谓词为 True 之前获取元素，请使用 takeWhile。Haskell 是否懒惰并不重要，过滤后的列表会被评估，因为 ghci 会打印它。如果你想避免这种情况，请使用 let

```
let l = [x | x <- [1..], x < 1000] 
```

# php - 如何在一页中创建这样的表单（方法包括我们如何实现它）

> ID：13541036
> 
> 赞同：1
> 
> 时间：2012-11-24T12:06:07.470
> 
> 标签：php

采购申请表。

> ![采购申请表](../Images/d9259bb5c3700b3bcc0af7a0dfb5707e.png)

我们使用两个表来实现上述表单（一个表存储创建基本表单详细信息，第二个存储添加项目详细信息）

**创建基本表单详细信息的第一个表单**

> ![创建基本详细信息](../Images/91a46116ef5f698fd79f65765172f27e.png)

**用于添加项目详细信息的第二个表单。**

> ![添加项目详细信息](../Images/353896a305b86bf75ca14c7bb5de46c3.png)

但是我们的项目主管拒绝了这种方法，他希望在一个页面中创建和添加项目。请帮助我们找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:41:51.790

我的基本示例可能适合您的要求[http://jsfiddle.net/8tAK7/](http://jsfiddle.net/8tAK7/)。然后在您的表单处理程序上，您可以简单地检索`$_POST['items']`以获取项目数组值（基于我上面的示例）。

然后在您的处理程序（我假设它是 PHP）上，您可以根据您在值上设置的分隔符拆分字符串：

```
$items = $_POST['items'];

foreach($items as $item){
    $values = explode(";", $item);

    $item_desc = $values[0];
    $item_price = $values[1];
    $item_qty = $values[2];

    // TODO: insert to DB
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T12:14:08.377

您可以通过创建一个空行并在页面加载时设置具有该行 ID 的会话然后插入.. 并每隔几分钟检查会话 ID 是否存在，如果不是删除或插入而不是设置状态为 1（创建行时为 0）

# android - Simplecursoradaptor 中的自定义文本字体

> ID：13541043
> 
> 赞同：3
> 
> 时间：2012-11-24T12:06:59.783
> 
> 标签：android, simplecursoradapter, typeface, custom-font

我制作了一个使用 SimpleCursoradapter 的应用程序。

```
 String[] from = new String[] {"title","notes","image"};
    int[] to = new int[] { R.id.esodaTextView, R.id.amountTextView, R.id.imageView1}; 
    esodaAdapter = new SimpleCursorAdapter (this, R.layout.recipe_list_item, null, from, to); 
```

如您所见，我在 2 个 TextView（esodaTextView + amountTextView）和一个 imageView 上显示了三个数据。

**问题是如何为这 2 个 TextView（esodaTextView + amountTextView）设置自定义字体（保存在 assets 文件夹中），以便我可以使用自定义字体显示文本。**

这是列表项的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/relativeLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_margin="10dp"
android:background="#55eee9e9" >

<TextView 
android:id="@+id/esodaTextView"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:padding="10dp"
android:textSize="20dp"
android:textColor="#000000"
android:minHeight="?android:attr/listPreferredItemHeight"
android:gravity="center_vertical" />

<TextView
android:id="@+id/amountTextView"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_below="@+id/esodaTextView"
android:gravity="center_vertical"
android:paddingLeft="10dp"
android:paddingBottom="5dp"
android:textSize="12dp" />

<ImageView
android:id="@+id/imageView1"
android:layout_width="80dp"
android:layout_height="80dp"
android:layout_centerVertical="true"
android:layout_marginRight="10dp"
android:layout_alignParentRight="true"
android:src="@drawable/ic_launcher" />

</RelativeLayout> 
```

我知道我可以通过以下代码以编程方式设置自定义字体，但如何在 Simplecursoradaptor 中使用它？

```
 TextView txt1 = (TextView) findViewById(R.id.textView1);  
 Typeface font = Typeface.createFromAsset(getAssets(), "segoescb.ttf");  
 txt1.setTypeface(font); 
```

提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T12:19:01.487

你想要做的是覆盖 SimpleCursorAdapter 的[ViewBinding](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.ViewBinder.html)：

```
SimpleCursorAdapter.ViewBinder binding=adapter.setViewBinder( new SimpleCursorAdapter.ViewBinder()
  {
    boolean SetViewValue(View view, Cursor cursor, int columnIndex)
    {
      TextView tv=(TextView)view.findViewById(R.id.iesodaTextView)
      //Do what you want here
      return true;
    }
  }); 
```

# yii - 只更改 yii 小部件的 css 文件，该文件保存在哪里

> ID：13541045
> 
> 赞同：0
> 
> 时间：2012-11-24T12:07:00.107
> 
> 标签：yii, widget

我想更改一个小部件 (Yii) 的 css 文件。如果我不想更改核心文件，我必须将更改后的 css 放在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:32:06.113

好的....

示例 CGridView 小部件：

然后为上面的小部件定义 id（例如：#id=gridID）

现在你的 css 文件：#gridID.grid-view`{ property: change}`

# asp.net - Asp:DropDownList 在 Internet Explorer 中无法正常工作，问题（浏览器兼容性）

> ID：13541056
> 
> 赞同：1
> 
> 时间：2012-11-24T12:08:08.700
> 
> 标签：asp.net, drop-down-menu, cross-browser

我有一个大约 3 岁的旧项目（Web 应用程序）。现在我正在尝试使其浏览器与新浏览器兼容。下拉列表在 IE8 和 firefox3.5 上运行良好。但不适用于新的 Mozilla Firefox 版本 17 或 chrome。单击下拉菜单时，没有任何反应。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T12:29:17.640

放

自动回邮=“真”..

这可能对你有帮助

# database - 迁移中的 Laravel 关系？

> ID：13541057
> 
> 赞同：36
> 
> 时间：2012-11-24T12:08:13.567
> 
> 标签：database, migration, relationship, laravel

`$this->belongs_to()`我知道你可以用等很容易地定义表关系`$this->has_many()`，但我不明白关系表是如何创建的；将两个表绑定在一起的表（我忘记了这个术语叫什么）。

假设我正在创建一个用户表。我希望该用户属于某个“角色”。有多个角色，每个角色可以有多个用户。我还需要为此创建一个`roles`表。到现在为止还挺好。

但是在阅读了文档之后，它说我应该`$this->belongs_to()`在模型中添加，而不是迁移本身。何时以及如何创建关系表？如果我创建`roles`和`users`表，并添加`$this->belongs_to('roles')`到`users`模型和`$this->has_many('users')`模型`roles`中，中间表会自动创建吗？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-06-22T21:08:58.207

创建迁移时，您可以在表上指定外键，即

```
public function up()
{
    Schema::table('roles', function(Blueprint $table) {
        $table->increments('id');
        $table->integer('user_id')->unsigned();
        //rest of fields then...
        $table->foreign('user_id')->references('id')->on('users');
    });
} 
```

这将在角色表的 user_id 列上创建一个外键。外键的好处是，当进行更新或删除时，外键表将自动更新或“级联”在[这里找到很好的描述](http://www.sitepoint.com/mysql-foreign-keys-quicker-database-development/)

如 Laravel 文档中所述，您还可以使用以下语法指定更新时的级联

```
$table->foreign('user_id')
  ->references('id')->on('users')
  ->onDelete('cascade'); 
```

我会做得不好，试图比文档更好地解释它，所以请通读 Eloquent ORM 文档的[“关系”](http://laravel.com/docs/4.2/eloquent)部分，看看它是如何完成的。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-10-15T08:41:11.953

看起来一些最初的问题从未得到回答，即“何时以及如何创建关系表”和“是否会自动创建中间表”：

据我所知，这些表需要手动创建。所以像这样创建迁移文件：

*拉拉维尔 5*

```
php artisan make:migration create_role_user_table 
```

*拉拉维尔 4*

```
php artisan migrate:make create_role_user_table 
```

请注意，名称是单数的，并按字母顺序显示。

然后在迁移中类似于：

```
public function up()
{
    Schema::create('role_user', function($table) {
        $table->increments('id');
        $table->integer('role_id');
        $table->integer('user_id');
        $table->timestamps();
    });
} 
```

希望有帮助。我不确定数据透视表中是否需要时间戳，所以请尝试一下。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-04-30T03:07:39.230

虽然它是一个旧帖子，但我虽然可以贡献一些更新的东西。对于 Laravel5，**Jeffrey Way**开发了一个包**[Laravel5 Generators-extended](https://github.com/laracasts/Laravel-5-Generators-Extended)**，它增强了`php artisan`for

*   `make:migration:schema`
*   `make:migration:pivot`
*   `make:seed`

对于用户和角色之间的多对多关系，您可以使用

```
php artisan make:migration:pivot users role 
```

它将生成所需的迁移类。您无需为此手动编码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-27T19:51:19.303

据我所知，不会创建任何关系表。你需要做的是`role_id`在你的`users`表上有一个，这样当你创建一个用户时，角色的 ID 就会被存储在那里。这将使您能够选择所有用户的位置`role_id == '1'`或任何位置。例如：

```
$admins = User::where('role_id', '=', 1); 
```

表中`ROLES`记录的`ID='1'`位置是管理员。因此，再次回答您的问题，没有创建关系表，而是在您的两个表中以`role_id`每个用户的列的形式存在关系。出于兴趣，您是否使用外键？

如果你想有一个关系表，你可以创建一个名为`user_roles`or something 并将 and 存储`role_id`在`user_id`那里，但是我认为使用上述方法更容易，因为你可以使用 Laravel/Eloquent 的所有优点。

希望这可以帮助 ：）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-09T00:34:23.217

这个视频帮助了我。

[https://laracasts.com/series/laravel-5-fundamentals/episodes/14](https://laracasts.com/series/laravel-5-fundamentals/episodes/14)

令我惊讶的是，迁移表中只有一个关系需要pointer_id，而不是两者。例如，如果我们有很多文章的作者，我们只添加

```
$table->integer('author_id') 
```

文章迁移，仅此而已。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-09T14:50:51.843

我知道这是一篇旧帖子，但我也有同样的问题。我在[Laravel 手册（5.0）](https://laravel.com/docs/5.0/eloquent#many-to-many)中找到了解决方案，其中描述了对于这种特定的多对多关系，您可以手动创建表，然后以这种方式将关系类型声明为 Model：

```
return $this -> belongsToMany('App\<Model>', '<table_created_manually>'); 
```

或者如果您想使用特定的关联键：

```
return $this -> belongsToMany('App\<Model>', '<rel_table1_table2>' '<table1>_id', '<table2>_id'); 
```

希望这能有所帮助。

# actionscript-3 - AS3 - 将句子中的每个单词大写

> ID：13541058
> 
> 赞同：2
> 
> 时间：2012-11-24T12:08:16.090
> 
> 标签：actionscript-3

如何将句子中每个单词的首字母大写？（类似于 CSS*文本转换大写*）

谢谢你。乌里

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T12:22:52.570

使用正则表达式替换：

```
var str:String = "the quick brown fox jumped over the lazy dog.";
str = str.replace(/(^[a-z]|\s[a-z])/g, function():String{ return arguments[1].toUpperCase(); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T12:15:14.370

像这样的东西应该工作：

```
function ucfirst(str:String):String {
   var words:Array = str.split(" ");
   for(var i in words) {
       words[i] = String(words[i]).charAt(0).toUpperCase() + String(words[i]).substr(1, String(words[i]).length);
   }
   return words.join(" ");
} 
```

# search - 在 joomla 搜索中引用

> ID：13541067
> 
> 赞同：0
> 
> 时间：2012-11-24T12:09:19.230
> 
> 标签：search, joomla, double-quotes, quote

我正在使用 joomla 网站，发现引号会导致搜索问题。单引号用三个反斜杠打印回来，结果为零，双引号被简单地切掉，双引号开始之前的字符串在返回结果时得到匹配。

任何帮助，提示在这里？以前有人发现并解决过这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:28:17.090

出现您的问题是因为如果您更改 com_search 中的 42 行，则会像 sql 注入一样注意到简单的引用

```
if (substr($searchword, 0, 1) == '"' && substr($searchword, -1) == '"') 
```

和

```
if (substr($searchword, 0, 1) == '"' && substr($searchword, -1) == '"')||(substr($searchword, 0, 1) == "'" && substr($searchword, -1) == "'") 
```

试试看，告诉我它会返回什么

# java - 如何用复合模式做一个类？

> ID：13541074
> 
> 赞同：1
> 
> 时间：2012-11-24T12:10:03.867
> 
> 标签：java, design-patterns, composite

我有一个`SquareIcon`实现`Icon`接口的 Java 类 ()。它绘制一个正方形，您可以在创建正方形时选择其大小和颜色。我现在想使用*复合模式*( `CompositeIcon`) 编写一个类，它可以让一个人绘制几个不同的正方形。我已经阅读了有关复合模式的信息，但我似乎无法让它发挥作用。

在`SquareIcon`课堂上，我有以下三种方法：

*   `getIconHeight`
*   `getIconWidht`
*   `paintIcon`

我也必须把所有这些都放在`CompositeIcon`课堂上，对吧？但是我该怎么做呢？我一直在考虑这些方面的事情，但我不知道这是否正确：

```
public int getIconWidth() {
  for (Icon i : icons) {
    i.getIconWidth();
  }
} 
```

我也不知道如何为该`paintIcon`方法执行此操作，因为它需要 4 个参数，这意味着这不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T12:22:45.840

复合模式将叶类和父类视为相同。

您必须从一个通用接口开始：

```
public interface Icon {
    void paint();
} 
```

Leaf实现了接口：

```
public class LeafIcon implements Icon {
    public void paint() { 
        // more here
    }
} 
```

Parent 也是如此，它有一个 Leaf 孩子的集合：

```
public class ParentIcon implements Icon {
    private List<Icon> children = new ArrayList<Icon>();
    public void paint() {
        for (Icon child : children) {
            child.paint();
        }
    }
} 
```

您的代码应该处理图标集合。您可以对叶子和父母使用所有的paint() 方法。

```
List<Icon> icons = new ArrayList<Icon>();
for (Icon icon : icons) {
    icon.paint();
} 
```

集合中的任何父节点都将递归地调用其子节点，一直到树中的叶节点。

# java - android webview导致空指针

> ID：13541078
> 
> 赞同：1
> 
> 时间：2012-11-24T12:10:28.993
> 
> 标签：java, android, webview, nullpointerexception

我的布局中有这个：

```
<WebView 
    android:id="@+id/webview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
/> 
```

这在我的活动中：

```
public class Shop extends Activity {
@Override protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    WebView webview;
    webview = (WebView) findViewById(R.id.webview);
    webview.getSettings().setJavaScriptEnabled(true);
    webview.loadUrl("http://www.example.co.uk/shop");
}
} 
```

这在清单中：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

然而，当我运行该应用程序时，我得到一个强制关闭错误和一些关于日志中的空指针的东西。我以前从未使用过 webview，所以不知道我在做什么！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T12:14:00.267

添加`setContentView(R.layout.your_layout);`：

```
super.onCreate(savedInstanceState);
setContentView(R.layout.your_layout); 
```

# xsd - 数组类型元素的 XML 验证失败

> ID：13541080
> 
> 赞同：0
> 
> 时间：2012-11-24T12:10:53.867
> 
> 标签：xsd

我正在尝试验证在 XML 中出现多次 (3) 次的元素的架构，但架构验证总是失败，并给出错误“架构有效性错误：元素'名称'：不需要此元素。“名称”是一个中间XML 文件的元素，即 XML 文件中还有其他元素。

**示例 XML-**

```
<name>
  <A>1</A>
  <B>1</B>
</name>              
<name>
  <A>1</A>
  <B>1</B>
</name>
<name>
  <A>1</A>
  <B>1</B>
</name> 
```

请建议示例架构以验证 XML 元素。我已经尝试了很多使用的方法，`maxOccurs`但没有一个是成功的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T12:40:04.697

看起来这就是您的 .xml 文件中的**全部内容。**如果是这样，我认为问题在于您需要一个根，在此示例中，我将用作示例，因为我不确切知道您想对这些元素做什么。在文件的开头放置和“XML”声明很有用，“”

```
<?xml version="1.0" encoding="utf-8"?>
<names>
   <name>
      <A>1</A>
      <B>1</B>
   </name>              
   <name>
      <A>1</A>
      <B>1</B>
   </name>
   <name>
      <A>1</A>
      <B>1</B>
   </name>
</names> 
```

顺便说一句，您可能会发现这个来自 IBM 的简短介绍性 XML 教程很有用：< [IBM 教程，PDF 格式：](http://download.boulder.ibm.com/ibmdl/pub/software/dw/xml/x-newxml/x-newxml-pdf.pdf) >

我希望这会有所帮助。

# windows - 在较新的 Windows 中，窗口很小，没有边框

> ID：13541084
> 
> 赞同：0
> 
> 时间：2012-11-24T12:11:48.530
> 
> 标签：windows, winapi, windows-vista

我一直在努力更新旧的（Windows 95 时代的 C API）应用程序。虽然它在 Windows XP 上运行良好，但在 Vista 和更新版本上它总是显示在一个没有菜单或边框的 240x160 小窗口中。Vista 和 XP 之间有什么区别会导致这种行为？

在 Windows 7 上，它看起来像这样（实际大小）：

![](../Images/245d754f0c954190f9666f1e8a2d566e.png)

这是它应该看起来的样子，以及它在 Windows XP 中的样子：

![](../Images/c68962589c2ed4a3830382eb5df1628c.png)

# php - 对混合字符串进行数字排序 PHP

> ID：13541085
> 
> 赞同：0
> 
> 时间：2012-11-24T12:11:48.343
> 
> 标签：php, arrays, sorting

如何按数字对以下文件进行排序，我的意思是 1 2 3 4...

**我使用了`sort()`, `asort()`,`sort(, sort_numeric)`功能，但它不起作用**

> 4 Walka Duchowa Madry Umysl Zamkniety Na Sily Demoniczne.mp3
> 3 Walka Duchowa Swieci Na Terytorium wroga.mp3
> 21 Walka Duch Oszczep Modlitwy _08_12_12.mp3
> 20 Walka Duchowa Oszczep.mp3
> 5 Walka Duchowa Chrzescijanstwo Ciezko Zbrojna
> Duchowa Artyleria.mp3 Moi Walka Duchowa .mp3
> 9 Walka Duchowa Pas Prawdy.mp3
> 8 Walka Duchowa Diabelskie Zasadzki.mp3
> 7 Walka Duchowa.mp3
> 2 Walka Duchowa Rozbrojony Wrog.mp3
> 19 Walka Duchowa Oszczep_cz_C.mp3
> 13 Walka_duchowa Helm Zbawiebia 06_17_12.mp3
> 12 Walka_duchowa Duchowa
> Tarcza Obuwie Pokoju.mp3
> 10 Walka Duchowa Pancerz Sprawiedliosci.mp3
> 13b walka duchowa helm zbawienia 06_24_12.mp3
> 15 walka duchowa miecz ducha 07-01-12.mp3
> 18 walka duch oszczep modlitwy _07_22_12.mp3
> 17 walka_duch oszczep modlitwy 07_15_12.mp3
> 16 Walka duch 16 miecz ducha 07_08_12.mp3
> 1 walka duchowa niweczenie mocy diabie mocy diabie mocy diabie diocbla .mp3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T12:17:24.077

假设你所有的文件都以数字开头，你可以试试这个：

```
$files = array(
    '4 Walka.mp3',
    '3 Walka.mp3',
    '21 Walka.mp3',
    '5 Walka.mp3'
); // shortened but you get the idea

function mysort($a, $b)
{
    return intval($a) - intval($b);
}

usort($files, 'mysort');

print_r($files); 
```

[排序](http://php.net/usort)

这个问题的最佳答案已由salathe 发布，请参阅他的答案

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T12:32:48.790

[`natsort()`](http://php.net/natsort)将给出您正在寻找的顺序，即使是`13`和`13b`.

这个问题有点曲折，因为您真的不想仅按*数字*排序。

* * *

```
<?php

$files = explode("\n", trim('
7 Walka Duchowa.mp3
2 Walka Duchowa Rozbrojony Wrog.mp3
13 Walka_duchowa Helm Zbawiebia 06_17_12.mp3
12 Walka_duchowa Tarcza Wiary__06_10_12.mp3
13b Walka Duchowa Helm Zbawienia 06_24_12.mp3
15 Walka Duchowa Miecz Ducha 07-01-12.mp3
'));

natsort($files);
echo implode("\n", $files); 
```

给出以下命令：

```
2 Walka Duchowa Rozbrojony Wrog.mp3
7 Walka Duchowa.mp3
12 Walka_duchowa Tarcza Wiary__06_10_12.mp3
13 Walka_duchowa Helm Zbawiebia 06_17_12.mp3
13b Walka Duchowa Helm Zbawienia 06_24_12.mp3
15 Walka Duchowa Miecz Ducha 07-01-12.mp3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T12:19:52.250

使用排序：

```
function byFirstNumWord($a, $b) {
    $pa = explode(' ',$a);
    $pb = explode(' ',$b);
    if ($pa[0] == $pb[0]) {
        return 0;
    }
    return ($pa[0] < $pb[0]) ? -1 : 1;
}

usort($array, 'byFirstNumWord');
print_t($array); 
```

# android - 在 Android 上更改应用的用户 ID

> ID：13541086
> 
> 赞同：1
> 
> 时间：2012-11-24T12:11:48.497
> 
> 标签：android, linux, root, userid

我有根。那么如何更改android应用程序的用户ID？背景是，我必须在我的应用程序中启动一个不属于我的应用程序的活动。但这只有在应用程序具有相同的用户 ID 时才有效。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:39:30.103

您可以`root`通过启动另一个应用程序的`Activity`，使用该`am start`命令来运行另一个应用程序的活动，然后将该`am start`命令运行为`root`。

见以下地方：

*   [通过 adb shell 启动应用程序](http://www.android.pk/blog/general/launch-app-through-adb-shell/)
*   [通过 adb 以 root 身份启动脚本](https://stackoverflow.com/questions/8761992/launch-a-script-as-root-through-adb)

所以最后你会做类似 `Runtime.exec("su -c \'am start....\'")

# c# - 如何使用 TCP 在客户端和服务器之间进行通信？发送命令/接收数据？

> ID：13541089
> 
> 赞同：-1
> 
> 时间：2012-11-24T12:13:35.370
> 
> 标签：c#, client-server

如何从服务器通过 tcp 向客户端发送命令。当他连接到服务器时，我怎样才能收到有关客户端主机的一些信息？例如：打开 apache、cmd 等。

我所做的唯一代码是用于连接服务器，但我不确定如何将一些数据发送到客户端以执行它。

有人可以帮我吗？教程或解释？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:40:05.663

您所说的将需要某种服务器/客户端设置。您将需要编写一个应用程序来侦听 TCP 端口并接收正在发送的命令。最好使用特定的端口，然后只监听该端口以获取传入命令。

我的问题是，为什么你需要在远程机器上打开一个 cmd？我认为大多数操作系统都不允许这样做，而且似乎没有太多用处，这会造成严重破坏。

# cakephp - 来自数据库的cakephp编码

> ID：13541096
> 
> 赞同：4
> 
> 时间：2012-11-24T12:14:26.320
> 
> 标签：cakephp, encoding

我在从数据库中编码字符时遇到问题。我正在使用带有 win1250 编码的 Postgres，但是无论我在 core.php 中放入什么（现在我有这行代码）：

```
Configure::write('App.encoding', 'iso-8859-1'); 
```

有时它会给我一些来自数据库的奇怪字母，例如 È 而不是 Č。我可以做些什么来获得正确的编码。

**注意**：我无法编辑或更改任何数据库。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-27T09:22:12.127

我认为您需要做的就是`encoding`在数据库连接配置中声明正确的选项，如[http://book.cakephp.org/2.0/en/development/configuration.html#database-configuration](http://book.cakephp.org/2.0/en/development/configuration.html#database-configuration)中所述（稍微滚动一下）。

看看这个特定的段落：

> **编码**
> 
> > 指示向服务器发送 SQL 语句时要使用的字符集。对于除 DB2 之外的所有数据库，这默认为数据库的默认编码。如果您希望在 mysql/mysqli 连接中使用 UTF-8 编码，您必须使用不带连字符的 'utf8'。

我在以前的项目中遇到了同样的问题（法语和西班牙语名称），我只需在配置文件中将以下内容添加到我的`$default`连接中：`app/Config/database.php`

```
'encoding' => 'utf8' 
```

也许您需要`utf8`连接或`iso-8859-1`您提到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:06:55.557

win1250 编码类似于 iso-8859-2 **（**请参阅[http://en.wikipedia.org/wiki/Windows-1250](http://en.wikipedia.org/wiki/Windows-1250)），因此您可能想尝试使用它而不是 iso-8859-1。

# java - Linux 使用运行 Java GC 的系统/内核 CPU

> ID：13541099
> 
> 赞同：5
> 
> 时间：2012-11-24T12:15:21.843
> 
> 标签：java, linux, garbage-collection, jvm

一些背景信息；

**服务器;**

具有 130 GB Ram 的新 SLES 12 服务器旨在为大型数据库（150G + 数据）运行 MySQL。

服务器还将托管一些 Java 应用程序。

Java 版本（Oracle 的默认版本）-Java(TM) SE 运行时环境（内部版本 1.7.0-b147）-Java HotSpot(TM) 64 位服务器 VM（内部版本 21.0-b17，混合模式）

**我们偶然发现了以下问题；**

运行一些特殊的 java 应用程序会使内核/系统 cpu 峰值减慢/停止应用程序一段时间。我通过制作一个简单地随着时间的推移消耗内存并使用一些 cpu 的 Java 应用程序来复制它。

调查显示在减速期间（10000-25000）发生了大量的中断。

每次减速后，Java 都会获得更多内存。将 Java 设置为以固定内存开始似乎也可以减少问题（将 -Xmx 和 -Xms 设置为相同的值）。详细的垃圾收集也表明 GC 正在启动并且可能是触发器。

GC 和内存分配由于某种原因非常昂贵，我们不知道从哪里看。来自 GC 的详细信息：

```
[GC^C 1024064K->259230K(3925376K), 87,3591890 secs] 
```

在低端 linux 服务器上运行 GC 的相同程序（运行 SLES，来自 SUN 的 Java 1.6.0_11）；

```
[GC 1092288K->253266K(3959488K), 3.0125460 secs] 
```

**减速期间的TOP：**

```
top - 11:23:33 up 87 days, 19:55,  5 users,  load average: 14.27, 4.50, 10.17
Tasks: 250 total,  39 running, 211 sleeping,   0 stopped,   0 zombie
Cpu(s):  0.0%us, 71.8%sy,  0.0%ni, 28.2%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:    129033M total,   128576M used,      457M free,     1388M buffers
Swap:    32765M total,       13M used,    32752M free,   113732M cached 
```

**减速期间的 vmstat（从第 3 行开始）；**

```
procs -----------memory---------- ---swap-- -----io---- -system-- -----cpu------
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
 0  0  13552 1714328 1422268 116462260    0    0    10     9    0    0  0  0 100  0  0
 1  0  13552 1241780 1422268 116462292    0    0     0     0  240  353  1  0 99  0  0
 1  0  13552 695616 1422268 116462292    0    0     0    17  419  431  3  0 97  0  0
55  0  13552 486384 1422268 116462292    0    0     0     2 20228  458  1 57 43  0  0
75  0  13552 476172 1422268 116462300    0    0     0     8 12782  684  0 70 30  0  0
65  0  13552 470304 1422268 116462304    0    0     0     0 13108  792  0 72 28  0  0 
```

为什么高端服务器上的 GC 比低端服务器上的贵？任何想法在哪里寻找线索？

**更新 - 调用参数 2012-11-26** 调用参数；

```
java -Xmx4g -Xms4g -verbose:gc -server -cp "./dest/" UseMemoryMain 
```

给予

```
[GC^C 1024064K->259230K(3925376K), 87,3591890 secs] 
```

变成;

```
java -Xmx4g -Xms4g -XX:+UseParallelGC -verbose:gc -cp "./dest/" UseMemoryMain 
```

给予

```
[GC 1048640K->265430K(4019584K), 0,0902660 secs] 
```

变成;

```
java -Xmx4g -Xms4g -XX:+UseConcMarkSweepGC -verbose:gc -cp "./dest/" UseMemoryMain 
```

给予

```
[GC 1092288K->272230K(3959488K), 0,1791320 secs] 
```

真正有趣的是，**今天**重新运行而不告诉使用哪种 GC 方法给出了这个；

```
java -Xmx4g -Xms4g -verbose:gc -server -cp "./dest/" UseMemoryMain 
```

给予

```
[GC 1024064K->259238K(3925376K), 0,0839190 secs] 
```

Java以某种方式改变了默认GC的策略......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T20:54:20.527

垃圾收集确实是一个棘手的话题。为了给出最佳答案，您应该发布用于调用 java 的完整命令行。

正如您所说，使用 GC 开关搁浅会有所帮助。原因是默认设置对于当今使用的许多应用程序来说并不是最佳的。对于许多需要快速响应的应用程序，因为它们是交互式的，参数

-XX:+UseConcMarkSweepGC

会有很大的不同。

值得注意的是，使用您提到的 JVM，使用更大的堆（比如说更大的 10GB）总是需要一些调整。获取您拥有的 GC 日志，并观察在使用 GC 选项时行为如何变化。我建议尝试不同的收集器策略（如 CMS 或 G1），并使用 Eden Space 的配置（如 Xmn）。

最后但并非最不重要的一点是，您可以使用分析器调查应用程序对内存的作用。也许代码可以改进，因此可以避免大量的 GC。

# android - 如何使单击列表视图转到 WebView 而不是浏览器？

> ID：13541104
> 
> 赞同：0
> 
> 时间：2012-11-24T12:15:43.613
> 
> 标签：android

我有一个 ListView，其中包含有 url 的推文。我希望用户在单击链接时留在我的应用程序中。当他们点击 url 时，将他们定向到 webview 以显示 url。Linkify 可以用来重定向不是 url，而是将 url 处理到 Webview 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T12:35:31.670

你可以做两件事。一种是修改`Linkify`以支持启动您自己的`Activity`. 或者您可以编写自己的正则表达式来匹配这些链接并在您的文本中创建可点击的跨度来实现它。

第二种方法在这里介绍：[Android：从可点击文本启动活动](https://stackoverflow.com/questions/4025770/android-launch-activity-from-clickable-text/4026303#4026303)

# php - Jquery File Upload SyntaxError: JSON.parse: JSON 数据后出现意外的非空白字符

> ID：13541107
> 
> 赞同：5
> 
> 时间：2012-11-24T12:16:16.640
> 
> 标签：php, jquery, file-upload

我想使用产品，但上传图片时出现错误

**SyntaxError：JSON.parse：JSON 数据后出现意外的非空白字符**

```
script directory: Folder2
directory Jquery-file-upload: function/blueimp-jQuery-File-Upload/
in main.js i edit rows

$('#fileupload').fileupload({
// Uncomment the following to send cross-domain cookies:
//xhrFields: {withCredentials: true},
url: 'server/php/'
}); 
```

上

```
$('#fileupload').fileupload({
// Uncomment the following to send cross-domain cookies:
//xhrFields: {withCredentials: true},
url: '../function/blueimp-jQuery-File-Upload/server/php/'
}); 
```

图片真实保存在服务器上，但上传后显示错误。

**Step1** [http://s55.radikal.ru/i149/1211/10/8c8d911589de.jpg](http://s55.radikal.ru/i149/1211/10/8c8d911589de.jpg)

**Step2 出现错误** [http://s019.radikal.ru/i604/1211/8c/7e05d92b30ef.jpg](http://s019.radikal.ru/i604/1211/8c/7e05d92b30ef.jpg)

**furebug 对请求的响应**

```
[{"name":"1353755388.jpg","size":879394,"type":"image\/jpeg","url":"http:\/\/malish-ka.ru\/function\/blueimp-jQuery-File-Upload\/server\/php\/files\/1353755388.jpg","thumbnail_url":"http:\/\/malish-ka.ru\/function\/blueimp-jQuery-File-Upload\/server\/php\/files\/thumbnail\/1353755388.jpg","upload_to_db":true,"delete_url":"http:\/\/malish-ka.ru\/function\/blueimp-jQuery-File-Upload\/server\/php\/?file=ExPRoG-1353755388.jpg","delete_type":"DELETE"}]/home/m/malishkaru/public_html/function/blueimp-jQuery-File-Upload/server/php 
```

**请告诉我为什么我有这个错误？什么时候出错？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T20:16:37.037

由于结束 ] 之后的文本，您显示的“对请求的响应”不是有效的 JSON。

如果您可以将 PHP 更改为在关闭 ] 后不返回所有内容，您将获得有效的 JSON。

“意外的非空白字符”是 /home/m/etc 中的 / 结束后]

我在写**/home/m/malishkaru/public_html/function/blueimp-jQuery-File-Upload/server/php**时删除了部分代码并且一切正常。

PS：谢谢**nnnnnn**。

PPS：只回答关闭的问题。用户**nnnnnn**给出了很好的答案。

# html - Menu a:hover - 试图在整个栏中获取背景颜色

> ID：13541108
> 
> 赞同：1
> 
> 时间：2012-11-24T12:16:43.270
> 
> 标签：html, css, navigation

我正在尝试将 a:hover 悬停在我创建的菜单上。如果你能帮助我，我真的很感激！我试图实现的是在整个酒吧中获得黑色。如果你明白我的意思。

这是菜单：（黑色是悬停） ![在此处输入图像描述](../Images/0263ea0508e6a88d66bcd25baf7fced2.png)

所以这是我的菜单CSS：

```
#navigation {
padding: 5px;
height: 1em;
width: auto;
text-align: center;
font-family: Verdana;
font-size: 12px;
text-transform: uppercase;
margin-top: -5px;
}

#navigation ul {
background-color: #fff;
width: 1000px;
margin-left: -5px;
}

#navigation li {
float: left;
list-style: none;
width: 100px;
background-color: #fff;
padding: 10px;
box-shadow: 0px 0px 1px rgba(0, 0, 0, 0.235), 0px 0px 5px rgba(0, 0, 0, 0.047);
}

#navigation li ul {
padding: 5px;
display: none;
width: em;
background-color: #fff;
}

#navigation li a:hover {
background-color: #000;
padding:10px;
width: 300px;
color: #fff;
position:absolute;
}

#navigation a { 
color: #000;
-webkit-transition: all 0.4s ease-in-out;
-o-transition: all 0.4s ease-in-out;
-ms-transition: all 0.4s ease-in-out;
transition: all 0.4s ease-in-out;
}

#navigation a:link {    
color: #000;
}

#navigation a:hover {   
color: #fff;
background-color: #000;
}

#navigation a:visited { 
color: #000;
} 
```

因此，如果您需要有关此的更多信息，只需访问我的网站，您可以在其中自己查看问题。[http://tomaswebdesign.com](http://tomaswebdesign.com)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T12:23:58.020

您有两个选项，第一个是最简单的，只需将其添加`:hover`到`li`自身：

```
li:hover,
a:hover  {
    color: #fff;
    background-color: #000;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/FYCuP/)。对于上述解决方案，我还建议您`color: inherit`在`a`元素上设置（*而不是*在链接演示中`a:hover`）

第二个是将样式设置`a`为块元素：

```
a {
    display: block; /* to fill the available horizontal space */
    height: 100%; /* to fill the available vertical space */
} 
```

但是，这确实需要您`padding`从`li`元素中删除，因为这就是“迫使”`background-color`远离元素边缘的原因，因此：

```
li {
    padding: 0;
}

li a {
    padding: 10px; /* so that the padding is preserved, albeit
                      on the a element instead */
    display: block; 
    height: 100%; 
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/FYCuP/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T12:28:52.070

试试这个

```
#navigation li {
    display:block;
    float: left;
    list-style: none;
    width: 100px;
    background-color: #fff;
    padding: 10px;
    box-shadow: 0px 0px 1px rgba(0, 0, 0, 0.235), 0px 0px 5px rgba(0, 0, 0, 0.047);
} 
```

或者您可以将锚点设置`width`为`height`100%。

# iphone - 如何在uitoolbar中将标签设置为居中

> ID：13541109
> 
> 赞同：0
> 
> 时间：2012-11-24T12:16:44.963
> 
> 标签：iphone, objective-c, uitoolbar

我正在为 iOS 开发一个通用应用程序，因此我必须将标签设置为 center in `UIToolBar`。请帮助我做到这一点。

### 我已经实现的代码

```
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 250, 40)];
label.backgroundColor = [UIColor clearColor];
UIBarButtonItem *item = [[UIBarButtonItem alloc] initWithCustomView:label];
NSDateFormatter *format = [[NSDateFormatter alloc] init];
[format setDateFormat:@"dd-MM-yyyy  hh:mm a"];
NSDate *now = [[NSDate alloc] init];
NSString *dateString = [format stringFromDate:now];
label.text = dateString; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:57:29.370

第一视图控制器.h

```
@interface FirstViewController:UIVieWController
{
   UILable *justLabel;
}
@end 
```

在 FirstViewController.m 中尝试休闲代码。这里我正在使用计时器在 UIToolbar 上显示时间

```
 @implementation FirstViewController

 -(void)viewDidLoad
    {
        UIToolbar *tool=[[UIToolbar alloc] initWithFrame:CGRectMake(0,372,   self.view.frame.size.width, 44)];  

        justLabel = [[UILabel alloc] initWithFrame:CGRectMake(35, 4, 250, 40)];
            justLabel.backgroundColor = [UIColor clearColor];
        [self.view addSubview:tool];
        [tool addSubview:justLabel];            

    [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(timer) userInfo:nil repeats:YES];  

     }

-(void)timer
{

       NSDateFormatter *format = [[NSDateFormatter alloc] init];
       [format setDateFormat:@"dd-MM-yyyy  hh:mm:ss a"];
       NSDate *now = [NSDate date];
       NSString *dateString = [format stringFromDate:now];
       justLabel.text=dateString;

}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T15:00:10.643

您必须在标签前后添加灵活的空格键按钮项目，这将使标签在工具栏中居中。

弹性空间是创建 UIBarButtonItems 时的系统项之一。当您设置工具栏的项目时，它应该是一个包含一个灵活空间、您的标签和另一个灵活空间的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T12:24:44.827

根据视图宽度设置标签框架....

```
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake((self.view.frame.size.width-250)/2, 0, 250, 40)]; 
```

这里`(self.view.frame.size.width-250)/2`250 是您所需的标签宽度.....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T15:43:39.367

通过设置页面我是

UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, (self.view.frame.size.width)-55, 20)];

# php - 避免来自不同 MySQL 数据库的主键冲突

> ID：13541112
> 
> 赞同：4
> 
> 时间：2012-11-24T12:17:16.550
> 
> 标签：php, mysql, doctrine, doctrine-orm

我有几台服务器运行自己的特定`MySQL`数据库实例，遗憾的是无法在复制/集群中设置。每个服务器将数据插入到几个与用户相关的表中，这些表之间有外键约束（例如`user`，`user_vote`）。以下是该过程的进行方式：

1.  所有服务器都以相同的数据开始
2.  每个服务器独立于其他服务器增长自己的数据集
3.  定期地，来自所有服务器的数据手动合并在一起并应用回每个服务器（因此该过程从步骤 1 开始重复）。

这之所以成为可能，是因为除了其主键之外，该`user`表还包含一个唯一`email`字段，该字段允许识别每个数据库中已经存在哪些用户，并在更改主键和外键时合并新用户以避免冲突并维护正确的外键约束。它可以工作，但需要付出很大的努力，因为必须更改主键和外键以避免冲突，因此我的问题是：

**有没有办法让每个服务器使用不与其他服务器冲突的主键来促进合并？**

我最初想使用复合主键（例如`server_id`，`id`），但我使用[`Doctrine`的不支持由多个外键组成的主键，](http://docs.doctrine-project.org/en/2.0.x/reference/limitations-and-known-issues.html)所以我的外键约束会出现问题。

我考虑过使用 a`VARCHAR`作为 an`id`并使用字符串的一部分作为前缀 (SERVER1-1,SERVER1-2, SERVER2-1, SERVER2-2 ...) 但我认为它会使数据库变慢我会必须对 id 进行一些操作（例如，在插入时，我必须解析现有 id 并提取最高值，增加它，将它与服务器 id 连接......）。

*PS：另一种选择是通过从从属读取并写入到主控来实现复制，但由于复制滞后和主控上的单点故障等问题目前无法解决，因此该选项被丢弃。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T12:20:03.067

您可以确保每个服务器使用不同的自动增量增量和不同的起始偏移量：

[将步骤 auto_increment 字段增量更改为](https://stackoverflow.com/questions/1686327/change-the-step-auto-increment-fields-increment-by)

（假设您使用 auoincrements）

我只在两台服务器上使用过它，所以我的设置有一个带有偶数 ID，一个带有奇数。

当它们重新合并在一起时，只要您确保所有表都遵循上述想法，就不会发生冲突。

### 为了实现4台服务器

您会说，设置以下偏移量：

*   **服务器 1** = 1
*   **服务器 2** = 2
*   **服务器 3** = 3
*   **服务器 4** = 4

您可以这样设置增量（我使用 10 为额外的服务器留出空间）：

*   **服务器 1** = 10
*   **服务器 2** = 10
*   **服务器 3** = 10
*   **服务器 4** = 10

然后在合并之后，在复制回每个服务器之前，您只需要更新每个表的 autoinc 值以再次获得正确的偏移量。假设每台服务器创建了 100 行，autoincs 将是：

*   **服务器 1** = 1001
*   **服务器 2** = 1002
*   **服务器 3** = 1003
*   **服务器 4** = 1004

由于有四台服务器，这确实变得棘手。假设某些表可能没有从特定服务器插入任何行。因此，您最终可能会得到一些表的最后一个 autoinc id 不是来自服务器 4，而是来自服务器 2。这将使计算任何特定表的下一个 autoinc 应该是什么变得非常棘手。

出于这个原因，最好在每个表中还包括一列，以记录插入任何行时的服务器编号。

```
id | field1 | field2 | ... | server 
```

这样，您可以通过在任何表上选择以下内容轻松找出特定服务器的最后一个 autoinc 值：

```
SELECT MAX(id) FROM `table` WHERE `server`=4 LIMIT 0,1 
```

使用此值，您可以在将合并的数据集滚动到相关服务器之前，重置每个服务器上每个表所需的下一个 autoinc 值。

```
UPDATE information_schema.tables SET Auto_increment = (
  SELECT MAX(id) FROM `table` WHERE `server`=s LIMIT 0,1
)+n WHERE table_name='table' AND table_schema = DATABASE(); 
```

`s`服务器编号在哪里并`n`设置为偏移量，所以在我的示例中它将是`10`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T12:19:50.753

前缀 ID 可以解决问题。至于数据库速度较慢 - 取决于那里提供的流量有多大。您还可以将“prefixed id”分成两列，“prefix”和“id”，它们可以是任何类型。需要一些逻辑来处理请求，但可能值得评估

# image-processing - OpenCV中椭圆拟合的度量

> ID：13541117
> 
> 赞同：3
> 
> 时间：2012-11-24T12:17:28.500
> 
> 标签：image-processing, opencv, computer-vision

OpenCV 有一个很好的内置椭圆拟合算法，称为`fitEllipse(const Mat& points)`

但是，它有一些主要缺点，限制了它的实用性。例如，它已经需要选择点，所以我已经必须自己进行特征提取。`HoughCircles`检测给定图像上的圆圈，可惜没有`HoughEllipses`.

另一个主要缺点是我的问题的中心，它没有提供任何关于拟合准确度的指标。它返回一个最适合给定点的椭圆，即使形状看起来甚至不像椭圆。有没有办法从算法中得到估计的误差？我想用它作为一个阈值来过滤掉甚至不接近被认为是椭圆的形状。

我问这个，因为在我尝试重新发明轮子并编写自己的`fitEllipse`函数之前，也许有一个简单的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T12:23:36.143

如果你不介意弄脏你的手，你实际上可以修改`fitEllipse()`. 该`fitEllipse()`函数使用最小二乘法来确定可能的椭圆，最小二乘法解决方案是有形的距离度量，这正是您想要的。

如果这是您愿意做的事情，那将是一个非常简单的代码更改。只需添加一个浮点数，其值在函数调用后传回，其中浮点数存储当前最佳最小二乘值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-19T15:54:59.637

`fitEllipse`给你椭圆 a `cv::RotatedRect`，所以你知道椭圆的旋转角度，它的中心和它的两个轴。

您可以计算点与椭圆之间距离的平方和，该总和是您正在寻找的指标。

点和椭圆之间的距离在此处描述[http://www.geometrictools.com/Documentation/DistancePointEllipseEllipsoid.pdf](http://www.geometrictools.com/Documentation/DistancePointEllipseEllipsoid.pdf)代码在此处[http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistPointHyperellipsoid.h](http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistPointHyperellipsoid.h)

您需要从 OpenCV`cv::RotatedRect`转到`Ellipse2`Geometric Tools Engine，然后您可以计算距离。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T00:38:45.540

你为什么不做一个 findContours() 来减少所需的内存空间？那里有你选择的点结构。如果您想进一步简化，可以在其上运行 ConvexHull() 或 ApproxPoly()。将椭圆拟合到这些点，然后我想您可以检查两个结构之间的相似性以获得某种估计。两个垫子之间的差分算子将是（非常）粗略的估计？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-05T01:27:40.210

根据应用程序的不同，您可能可以使用 CAMShift（或均值偏移），它将椭圆拟合到具有相似颜色的区域。

# php - 关闭cookie时将字符串从php Captcha图像脚本传递到另一个php脚本

> ID：13541122
> 
> 赞同：1
> 
> 时间：2012-11-24T12:18:37.543
> 
> 标签：php, session, cookies, captcha

我有一个 php 验证码图像脚本，它使用会话变量传回验证码，但如果关闭 cookie，这将不起作用。

我想尝试涵盖所有可能发生的情况，因此即使关闭了 cookie，我的表单也能正常工作。

我想知道是否有一种方法可以在不使用会话变量的情况下将 $code 从 captcha.php 传递回 contactus.php。

我对此表示怀疑，但我想我会问我是否遗漏了什么。

**验证码.php**

```
session_start();

class CaptchaSecurityImages {

    var $font = 'monofont.ttf';

    function generateCode($characters) {
        /* list all possible characters, similar looking characters and vowels have been removed */
        $possible = '23456789bcdfghjkmnpqrstvwxyz';
        $code = '';
        $i = 0;
    while ($i < $characters) { 
        $code .= substr($possible, mt_rand(0, strlen($possible)-1), 1);
        $i++;
    }
    return $code;
}

function CaptchaSecurityImages($width='120',$height='40',$characters='6') {
    $code = $this->generateCode($characters);
    /* font size will be 75% of the image height */
    $font_size = $height * 0.75;
    $image = @imagecreate($width, $height) or die('Cannot initialize new GD image stream');
    /* set the colours */
    $background_color = imagecolorallocate($image, 255, 255, 255);
    $text_color = imagecolorallocate($image, 20, 40, 100);
    $noise_color = imagecolorallocate($image, 20, 40, 100);
    /* generate random dots in background */
    for( $i=0; $i<($width*$height)/3; $i++ ) {
        imagefilledellipse($image, mt_rand(0,$width), mt_rand(0,$height), 1, 1, $noise_color);
    }
    /* generate random lines in background */
    for( $i=0; $i<($width*$height)/150; $i++ ) {
        imageline($image, mt_rand(0,$width), mt_rand(0,$height), mt_rand(0,$width), mt_rand(0,$height), $noise_color);
    }
    /* create textbox and add text */
    $textbox = imagettfbbox($font_size, 0, $this->font, $code) or die('Error in imagettfbbox function');
    $x = ($width - $textbox[4])/2;
    $y = ($height - $textbox[5])/2;
    imagettftext($image, $font_size, 0, $x, $y, $text_color, $this->font , $code) or die('Error in imagettftext function');
    /* output captcha image to browser */
    header('Content-Type: image/jpeg');
    imagejpeg($image);
    imagedestroy($image);
    $_SESSION['six_letters_code'] = $code;
}
}

$width = isset($_GET['width']) ? $_GET['width'] : '120';
$height = isset($_GET['height']) ? $_GET['height'] : '40';
$characters = isset($_GET['characters']) && $_GET['characters'] > 1 ? $_GET['characters'] : '6';

$captcha = new CaptchaSecurityImages($width,$height,$characters); 
```

**联系方式.php**

```
<img id="captchaimg" alt="captchaimg" src="<?php echo htmlentities(getSiteURL() . '/server/includes/captcha.php'); ?>" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:27:02.670

您的问题更多关于在没有 cookie 支持的情况下管理会话，请阅读这篇关于[如何在不使用 cookie 的情况下处理会话的文章](http://www.brainbell.com/tutors/php/php_mysql/Session_Management_Without_Cookies.html)

# c# - 从命令提示符指定命令行参数

> ID：13541125
> 
> 赞同：0
> 
> 时间：2012-11-24T12:18:47.527
> 
> 标签：c#, visual-studio-2010, command-line-arguments, command-prompt

如何从 Visual Studio 命令行提示符指定命令行参数？

假设我想用一组字母或其他东西开始我的 Main。在 Visual Studio 2010 中，我会浏览调试选项卡，但我不知道如何使用命令行提示符执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T12:19:37.167

您只需在您的 exe 名称后添加它：

```
myProg.exe arg1 arg2 arg3 
```

# java - 检查是否存在行，如果存在，更新列，否则，插入新行 SQLITE JAVA ANDROID

> ID：13541129
> 
> 赞同：0
> 
> 时间：2012-11-24T12:19:17.483
> 
> 标签：java, android, sqlite, insert

> **可能重复：**
> [如果不存在则插入其他更新？](https://stackoverflow.com/questions/3634984/insert-if-not-exists-else-update)

我想检查数据库中是否存在一行（带有它的 ID），如果是，我想更新列类别，如果它不存在，我想添加一个新行。这是否可以通过 sqlite 中的单个查询实现（将在 eclipse 中使用 java 用于 android 应用程序）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T12:27:25.907

我认为这是不可能的。首先，您必须执行查询以检查行是否存在，如果存在，则执行更新语句，如果不存在，则执行插入语句...我认为这是要走的路...

```
if(existsId(id)){
   updateCategory(categoryValue);
}else{
   addNewRow(newRowData);
} 
```

# c# - 为什么“CreateCommand()”不是 C#（或至少 .NET）的一部分？

> ID：13541131
> 
> 赞同：2
> 
> 时间：2012-11-24T12:19:31.783
> 
> 标签：c#, sql-server, using-statement

在成功地完成了与 SQL Server 一起学习 C# 的初始阶段之后，我发现我使用的各种教程只是通过声明一个 global甚至是`SqlConnection`变量而弄错了。`SqlDataAdapter``DataSet`

因此，这段代码在单线程应用程序中运行良好，但在多线程环境中运行不佳。在我对解决方案的研究中，我发现[MSDN](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)和[这个教育答案](https://stackoverflow.com/a/3079141)都建议将 SQL 事务的“原子”部分包装在 using/try 方法中：

```
private static void CreateCommand(string queryString, string connectionString)
{
    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        try
        {
            SqlCommand command = new SqlCommand(queryString, connection);
            command.Connection.Open();
            command.ExecuteNonQuery();
        }
        catch (InvalidOperationException)
        {
            //log and/or rethrow or ignore
        }
        catch (SqlException)
        {
            //log and/or rethrow or ignore
        }
        catch (ArgumentException)
        {
            //log and/or rethrow or ignore
        }
    }
} 
```

所以，我现在要做的就是将我的整个代码转换为使用这样的包装器。但在继续此之前，我想了解这种方法的权衡。根据我的经验，大型设计师/工程师团队通常有充分的理由决定**不**包含某些防御功能。从我作为 C/C++ 程序员的角度来看，当 C# 的整个价值主张是“防御性”（其中权衡是众所周知的 CLR 性能损失）时，这尤其有趣。

总结我的问题：

1.  如上所述在我的代码中封装每笔交易的权衡是什么？
2.  我应该寻找任何警告吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T12:38:38.687

原因归结为灵活性。开发人员是否想在事务中包含命令，他们是否想重试给定的错误，如果是多少次，他们是否需要来自线程池的连接或每次都创建一个新连接（具有性能开销)，他们想要 SQL 连接还是更通用的 DbConnection 等？

但是，MS 提供了 Enterprise Library，这是一套功能，它包含了开源库中的许多常用方法。看看数据访问块：http: [//msdn.microsoft.com/en-us/library/ff632023.aspx](http://msdn.microsoft.com/en-us/library/ff632023.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T12:33:32.993

没有内置这样的方法，因为：

*   为每个命令连接和断开数据库并不经济。如果您在代码中的给定点执行多个命令，您希望对它们使用相同的连接，而不是重复打开和关闭连接。

*   该方法无法知道你想对每种异常做什么，所以它唯一能做的就是重新抛出它们，然后一开始就捕获异常是没有意义的。

因此，该方法所做的几乎所有事情都是针对每种情况的。

此外，该方法必须做得更多才能普遍有用。它必须接受命令类型和参数的参数。否则它只能用于文本查询，并且会鼓励人们动态创建 SQL 查询，而不是使用存储过程和/或参数化查询，这不是通用库想要做的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T12:43:51.830

1 - 没有真正的权衡，这是相当标准的。

2 - 您的代码可以将命令作为字符串发送以作为 SQL 查询执行，但它缺乏一点灵活性：

*   您不能使用参数化查询 ( `command.Parameters.AddWithValue(...)`)，一旦您开始使用存储过程，这将是强制性的
*   你不能使用`output`这样的参数
*   你不能对任何要查询的东西做任何事情

我更喜欢使用这样的东西：

```
private static void CallProc(string storedProcName, Action<SqlCommand> fillParams, Action postAction, Action onError)
{
    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        using (SqlCommand command = new SqlCommand(String.Format("[dbo].[{0}]", storedProcName), connection))
        {
            try 
            {
                if(fillParams != null)
                    fillParams(command);
                command.Connection.Open();
                command.ExecuteNonQuery();
                if(postAction != null)
                    postAction();
             }        
            catch (InvalidOperationException)
            {
                //log and/or rethrow or ignore
                throw;
            }
            catch (SqlException)
            {
                //log and/or rethrow or ignore
                throw;
            }
            catch (ArgumentException)
            {
                //log and/or rethrow or ignore
                throw;
            }
            catch
            {
                if(onError != null)
                   onError();
            }
        }
    }
} 
```

然后，您可以制作变体来处理返回值、输出参数等。

你打电话是这样的：

```
CallProc("myStoredProc",
    command => 
    {
        command.Parameters.AddWithValue("@paramNameOne", "its value here");
        // More parameters for the stored proc...
    },
    null,
    null); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T12:44:22.780

只要您将功能封装在像您发布的静态方法一样的“瓶颈”方法中，以便您所有的数据库访问都在一个易于更改的共享代码中实现，通常不需要交易 -关闭，因为您可以稍后更改实现，而无需重写大量代码。

通过每次创建一个新连接，风险是您可能会为每次打开/关闭连接产生昂贵的开销。但是，应该将连接池化，在这种情况下，开销可能不会很大，并且这种性能影响可能很小。

另一种方法是创建一个连接并保持打开状态，为所有查询共享它。这无疑更有效，因为您将每笔交易的开销降至最低。但是，性能增益可能很小。

在这两种情况下，都会有额外的线程（多个同时查询）问题需要解决，除非您确保所有数据库查询都在单个线程上运行。性能影响都取决于您每秒发出多少查询 - 当然，如果您使用效率极低的查询，您的连接方法的效率就无关紧要了；您需要将“优化”时间集中在最差的性能问题上。

所以我建议现在保持简单并避免过早的优化，但尝试将数据库访问代码的实现保持在单独的层中，以便您的主代码库简单地向访问层发出命令，并且具有最少的数据库特定里面的代码。它对数据库的“了解”越少越好。这将使更改底层实现或移植代码以在将来使用不同的数据库引擎变得更加容易。

Another approach that can help with this is to encapsulate queries in stored procedures. This means your program knows the name of the procedure and the parameters for it, but the actual tables/columns that are accessed are hidden inside the database. Your code then knows as little as possible of the low-level structure of the database, which improves its flexibility, maintainability, and portability. Stored procedure calls can also be more efficient than sending generic SQL commands.

# jquery - Jquery表单提交验证

> ID：13541133
> 
> 赞同：10
> 
> 时间：2012-11-24T12:19:37.807
> 
> 标签：jquery, validation, jqxwidgets

我有以下表格：

```
<form id="testForm" action="country_Save">
   Country Name:<input type="text" id="countryName" />  
   <input type="submit" id='saveCountry' value="Add Country" />
</form> 
```

并遵循 JQuery 来验证文本字段

```
$('#testForm')
   .jqxValidator({  rules : [
          {
              input : '#countryName',
              message : 'Country Name is required!',
              action : 'keyup, blur',
              rule : 'required'
          }],
          theme : theme
}); 
```

提交表单时如何使用此验证？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-24T12:37:13.133

将函数绑定到`submit`表单的事件。`false`如果任何表单字段验证失败，则在此函数中返回。

例如：

```
$('form').on('submit', function() {
    // do validation here
    if(/* not valid */)
        return false;
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-24T12:50:40.907

请试试这个：

```
 $('#testForm').on('submit', function() {
         return $('#testForm').jqxValidator('validate');
     }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T13:14:42.047

*表单验证*有大量的 Javascript 和 jQuery 库...我的建议是一个简单的[jquery.com 插件](http://docs.jquery.com/Plugins/Validation)。

PS： `jqxValidator`是来自[jQWidgets 框架](http://www.jqwidgets.com/)的方法吗？如果您（读者）不需要如此繁重/复杂的插件，请参阅下面的纯 jQuery，否则 @Gajotres 编写了最佳解决方案（！）。

* * *

仅使用 jQuery 和基本的 Javascript。

对于“插件库”和“编写自己的验证方法”，首先检查是否需要直接使用 jQuery。

这里有一个代码可以完成问题所说的所有内容：模糊验证、keyup 和“提交时”。

```
function validate(){
    var cnv = $('#countryName').val();
    if (!$.trim(cnv)) {
        alert('Country Name is required!');
        return false;
    } else { return true; }
}

$('#testForm').submit(validate);
$('#countryName').bind('blur keyup', validate); 
```

# android - SetImageResource() 不仅在循环中第二次起作用

> ID：13541134
> 
> 赞同：0
> 
> 时间：2012-11-24T12:19:46.170
> 
> 标签：android

好！我编写了一个代码，在每次声音结束时设置一个新的 imageView，并使用 While 循环对其进行验证，它只是在第二次工作。我已经尝试过使用开关，但它不起作用。

```
av = MediaPlayer.create(this,R.raw.ave_maria);
    av.start();

    salve = MediaPlayer.create(this,R.raw.salve_rainha);

    im = (ImageView) findViewById(R.id.imag1);

    Thread thread = new Thread() {
        public void run() {

            while (true) {
                // YouActivity
                GozososActivity.this.runOnUiThread(new Runnable() {

                    public void run() {
                        if (av.isPlaying()) {

                        } else {
                            avemarias++;
                            if(avemarias > 10){
                                salve.start();
                            }else{
                                im.setImageResource(R.drawable.primeiro_misterio_gozoso+avemarias);

                                av.start();             
                            }
                        }
                    }
                });
            }
        }
    };
    thread.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:22:19.833

看你的代码行，

```
im.setImageResource(R.drawable.primeiro_misterio_gozoso+avemarias); 
```

你正在做一些两个整数。

那么该号码有可用的资源吗？（如果没有，请查看 R.java 文件，然后该方法不起作用）

对于Android，仅将资源设置为在文件中或文件`setImageResource()`中具有`int`条目的可绘制资源。`R.java``android.R`

# colors - Sublime Text2 拼写检查颜色变化

> ID：13541139
> 
> 赞同：0
> 
> 时间：2012-11-24T12:20:05.717
> 
> 标签：colors, sublimetext2, variations

我正在体验 Sublime Text 2 (ST2) 改变了由拼写检查器标记的单词的颜色，这些单词下面有一条红色的蛇线。当我滚动或键入单词时会发生这种行为，并且颜色会在漆黑或放射性绿色之间切换。它似乎不是变化中的模式。

例子：

*   在颜色行为发生之前：http: [//grab.by/hL6y](http://grab.by/hL6y)
*   放射性绿色行为： http: [//grab.by/hL6E](http://grab.by/hL6E)

还有其他人遇到这种情况吗？实在是太烦人了。我正在使用带有 Mountain Lion 的 2012 年 Macbook pro 视网膜，使用 ST2 的 Solarized Dark 配色方案（我尝试了多种，但所有行为都相同），并且希望得到修复！我已经尝试过 Sublimetext.com 论坛，但没有人能解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T03:24:27.750

现在可能有一个可行的解决方法——拼写检查替代方案。

[https://github.com/phyllisstein/CheckBounce](https://github.com/phyllisstein/CheckBounce)

需要在用户配置文件中定义默认语法。它现在默认为 Markdown、Text 和 Tex。

启用 CheckBounce 包时应关闭 ST2 的内置拼写检查。

Mountain Lion 中添加的单词字典存储在：

`/Users/insert_your_user_name_here/Library/Spelling/LocalDictionary`

# c# - 注释验证不起作用

> ID：13541140
> 
> 赞同：2
> 
> 时间：2012-11-24T12:20:25.797
> 
> 标签：c#, asp.net-mvc, validation, annotations

请帮助我处理以下代码。模型类正在使用`System.ComponentModel.DataAnnotation`：

```
namespace Proj.Models
{
    public class Customer
    {
        [Required]
        public string CustomerID{get;set;}

        [Required]
        public string CustomerName{get;set;}
    }
} 
```

我已经使用这个模型创建了一个控制器，动作方法是：

```
public class Customer:Controller
{
    public ActionResult Details()
    {
        return View();
    }
} 
```

剃刀视图是 Details.cshtml，具有以下标记和代码：

```
@model Proj.Models.Customer

<form method="post">

@Html.EditorForModel()

<button>Submit!!</button>

</form> 
```

但是，当我单击提交时，没有按预期看到验证错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T12:27:24.037

您需要创建一个将模型作为输入的方法，如下所示：

```
[HttpPost]
public ActionResult Index(Customer customer)
{
    return View();
} 
```

`[HttpPost]`确保仅在 POST 请求上调用该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:49:40.677

您需要为模型创建编辑器模板。默认情况下不会发出验证消息。在您的编辑器模板中，您必须使用`@ValidationMessageFor`您的`Required`字段。

希望这可以帮助。

# javascript - 分配给相机的three.js天空盒

> ID：13541141
> 
> 赞同：3
> 
> 时间：2012-11-24T12:21:02.990
> 
> 标签：javascript, webgl, three.js, skybox

我正在尝试将天空盒分配给玩家相机。当相机移动（天空盒也随之移动）时，纹理会被拉伸。如何摆脱这个？

代码：

```
var textureCube = THREE.ImageUtils.loadTextureCube( urls );
textureCube.format = THREE.RGBFormat;
var shader = THREE.ShaderUtils.lib[ "cube" ];
shader.uniforms[ "tCube" ].value = textureCube;

cubematerial = new THREE.ShaderMaterial({
    fragmentShader: shader.fragmentShader,
    vertexShader: shader.vertexShader,
    uniforms: shader.uniforms,
    depthWrite: false,
    side: THREE.BackSide
});
skyBox = new THREE.Mesh(new THREE.CubeGeometry(1000,1000,1000), cubematerial);
camera.add(skyBox); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T00:00:19.817

因此，在深入研究 Three.js 示例之后，我找到了一种方法。[http://learningthreejs.com/blog/2011/08/15/lets-do-a-sky/](http://learningthreejs.com/blog/2011/08/15/lets-do-a-sky/)已经过时了。示例中使用的一种方法是将天空盒添加到具有固定摄像机的第二个场景中，并渲染两个场景。查看 webgl_materials_cars.html 示例。

另外因为我使用分配给角色的第三人称相机，我必须从角色相机到天空盒相机进行世界旋转。这可以通过以下方式在渲染时完成：

```
function render(){
<...>
    skyboxCamera.rotation.setEulerFromRotationMatrix( new THREE.Matrix4().extractRotation( camera.matrixWorld ), skyboxCamera.eulerOrder );
    renderer.render(skyboxScene, skyboxCamera);
    renderer.render(scene, camera);
<...>
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-26T13:47:55.390

我知道这是一个封闭的问题，但我想为未来的寻求者提供一个不需要额外场景的替代方案：

1.  首先阅读并遵循本教程： http: [//learningthreejs.com/blog/2011/08/15/lets-do-a-sky/](http://learningthreejs.com/blog/2011/08/15/lets-do-a-sky/)

2.  现在创建以下着色器（我将其添加到了three.js ShaderLib，但如果您不想使用three'源代码将其添加到外部）：

    ```
    'skybox': {

    uniforms: { "tCube": { type: "t", value: null },
                "tFlip": { type: "f", value: -1 } },

    vertexShader: [

        "varying vec3 vWorldPosition;",

        THREE.ShaderChunk[ "logdepthbuf_pars_vertex" ],

        "void main() {",

        "   vec4 worldPosition = modelMatrix * vec4( position, 1.0 );",
        "   vWorldPosition = worldPosition.xyz;",

        "   gl_Position = projectionMatrix * modelViewMatrix * vec4( position + cameraPosition, 1.0 );",

            THREE.ShaderChunk[ "logdepthbuf_vertex" ],

        "}"

    ].join("\n"),

    fragmentShader: [

        "uniform samplerCube tCube;",
        "uniform float tFlip;",

        "varying vec3 vWorldPosition;",

        THREE.ShaderChunk[ "logdepthbuf_pars_fragment" ],

        "void main() {",

        "   gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",

            THREE.ShaderChunk[ "logdepthbuf_fragment" ],

        "}"

    ].join("\n") 
    ```

    },

3.  像这样创建你的天空盒：

    ```
     // urls is a list of textures to use
    var cubemap = THREE.ImageUtils.loadTextureCube(urls); 
    cubemap.format = THREE.RGBFormat; 

    var shader = THREE.ShaderLib['skybox']; // init the skybox shader we created above
    shader.uniforms['tCube'].value = cubemap; // apply textures to shader

    // create shader material
    var skyBoxMaterial = new THREE.ShaderMaterial( {
      fragmentShader: shader.fragmentShader,
      vertexShader: shader.vertexShader,
      uniforms: shader.uniforms,
      depthWrite: false,
      side: THREE.BackSide
    });

    // create skybox mesh
    var skybox = new THREE.Mesh(
      new THREE.CubeGeometry(1000, 1000, 1000),
      skyBoxMaterial
    );

            // THIS IS IMPORTANT! or the skybox will get culled after you move the camera too far..
    skybox.frustumCulled = false; 
    ```

# session - PHP会话不能跨多个页面传递会话值

> ID：13541144
> 
> 赞同：2
> 
> 时间：2012-11-24T12:21:22.313
> 
> 标签：session, login

我需要帮助。在过去的 6 个小时里，我一直在到处寻找有关跨网页使用 PHP 会话的帮助。该`$_SESSION`变量应该是全局的，但我只能在声明它的页面上访问它。喜欢：

**第 1 页（有效）：**

```
<?php
session_start();
$_SESSION ['login'] = 1;
echo $_SESSION ['login']; 
```

但是当我尝试在下一个网页中回显相同的内容时，它不起作用。

**第 2 页（这不起作用）：**

```
<?php
session_start();
echo $_SESSION ['login']; 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T12:22:38.757

**是**会话是全球性的

确保您使用的是相同的域名，这也可能是因为子域

# linux - make[1]: arm-linux-gcc: 在 ubuntu 中找不到命令

> ID：13541147
> 
> 赞同：3
> 
> 时间：2012-11-24T12:21:58.543
> 
> 标签：linux, gcc, makefile, kernel, ubuntu-11.04

> **可能重复：**
> [什么是 arm-linux-gcc 以及如何在 ubuntu 中安装它](https://stackoverflow.com/questions/11118051/what-is-arm-linux-gcc-and-how-to-install-this-in-ubuntu)

当我尝试这个命令时

```
$ make ARCH=arm devkit8000 defconfig 
```

我收到此错误：

```
make[1]: arm-linux-gcc: Command not found
make[1]: arm-linux-gcc: Command not found
scripts/kconfig/conf -s arch/arm/Kconfig
***
*** You have not yet configured your kernel!
*** (missing kernel .config file)
***
*** Please run some configurator (e.g. "make oldconfig" or
*** "make menuconfig" or "make xconfig").
***
make[3]: *** [silentoldconfig] Error 1
make[2]: *** [silentoldconfig] Error 2
make[1]: *** No rule to make target `devkit8000'.  Stop.
make: *** [devkit8000] Error 2 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T12:29:01.547

你有安装 ARM 工具链吗？如果 Ubuntu 中没有这样的软件包，您可以从 Internet 下载它并将其添加到您的 $PATH 中。

看看[什么是 arm-linux-gcc 以及如何在 ubuntu 中安装它](https://stackoverflow.com/questions/11118051/what-is-arm-linux-gcc-and-how-to-install-this-in-ubuntu)

编辑：可能是，您的 makefile 正在寻找与您不同的文件名。

尝试定位`arm-linux-gnueabi-gcc`文件。转到该目录，您可以为每个带有`arm-linux-gnueabi-`前缀的文件创建链接。

尝试后`sudo su`：

```
ln -s arm-linux-gnueabi-gcc arm-linux-gcc
ln -s arm-linux-gnueabi-cc arm-linux-cc 
```

等等

可能有帮助，但我不保证。通常有效;-)

# android - 管理大型 APK 扩展文件

> ID：13541148
> 
> 赞同：0
> 
> 时间：2012-11-24T12:22:07.900
> 
> 标签：android, performance, apk, apk-expansion-files

我正在使用一个包含视频和超过 20.000 个图像文件的扩展文件 (~500mb)。

管理此文件的最佳方法是什么？

现在，当我检查此文件是否已下载时，我正在我的 Application 类中加载 ZipFileResource 对象。

此扩展文件的用途之一是为千兆像素视图提供图像，但加载一张图像需要大量时间，并且应该在 200 毫秒内加载大约 30 张图像。在我将此图像文件移动到扩展文件之前，资产文件夹中有并且运行良好。

我打算在外部存储解压缩扩展文件并删除obb文件，但我不知道这是否是一个不错的选择。

你能告诉我一些建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:27:23.120

我曾经尝试使用 Zip 文件作为扩展文件，但我发现它们的工作速度非常慢。

OBB 文件运行速度很快，就像使用常规文件系统一样。

> 我打算在外部存储解压缩扩展文件并删除obb文件，但我不知道这是否是一个不错的选择。

是个糟糕的选择。[谷歌](http://developer.android.com/google/play/expansion-files.html#StorageLocation)不推荐：

> 为确保正常运行，您不得删除、移动或重命名扩展文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T12:29:28.833

据我了解，您将在安装应用程序后下载您的媒体文件。为此，我会这样做，下载它并将其保存到 SD 卡中（我会在 AsyncTask 中执行此操作）。现在您将图片或视频的每条路径保存到数据库中。如果您想获取图片，请从数据库中读取并填写您的 ImageView 或其他内容。这种方式真的很快。

我希望我能帮助你。苹果浏览器

# java - java.util.Set API 中可能存在的错误

> ID：13541152
> 
> 赞同：0
> 
> 时间：2012-11-24T12:22:49.517
> 
> 标签：java, collections, javadoc, comparator

`java.util.Set`API 状态：

> 集合不包含元素对 e1 和 e2 使得 e1.equals(e2)

但据我了解，`TreeSet`用于`Comparable/Comparator`确定 e1 和 e2 是否重复。我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T12:34:08.657

如果`compareTo`与`equals`（应该）一致，则 TreeSet 是否使用`compareTo`或`equals`确定相等性都没有关系。来自 JavaDoc：

> 请注意，如果要正确实现 Set 接口，集合维护的顺序（无论是否提供显式比较器）必须与 equals 一致。（参见 Comparable 或 Comparator 以了解与 equals 一致的精确定义。）这是因为 Set 接口是根据 equals 操作定义的，但 TreeSet 实例使用其 compareTo（或 compare）方法执行所有元素比较，所以两个从集合的角度来看，这种方法认为相等的元素是相等的。一个集合的行为是明确定义的，即使它的顺序与equals不一致；它只是不遵守 Set 接口的一般约定。

该程序将打印“真”，即使`equals`总是返回假。但是这个错误实际上是 A 的`compareTo`和`equals`不一致，并且不是 TreeSet 中的错误。

```
class A implements Comparable<A> {
    public int compareTo(A a) {
        return 0;
    }

    public boolean equals(Object other) {
        return false;
    }

    public static void main(String[] args) {
        TreeSet<A> set = new TreeSet<A>();
        set.add(new A());
        System.out.println(set.contains(new A()));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:05:39.537

你的假设是错误的；TreeSet 不使用 Comparable/Comparator 来确定 e1 是否等于 e2。Equals 方法是 Object 类的一部分，用于确定集合的两个元素是否相同。即 e1.equals(e2)

但是 Comparable/Comparator 接口用于决定一个元素是否大于、等于或小于其他元素。这在排序期间使用。因此，您唯一需要确保的是 equals 和 compareto 方法是一致的。

**因此，比较两个对象使用 equals 方法，并在排序期间使用比较器/可比较**

**编辑** 下面是来自 JDK 6 的方法定义；AbstractSet 的 equals 方法。TreeSet 扩展了 AbstractSet

```
 public boolean equals(Object obj)
    {
    if(obj == this)
        return true;
    if(!(obj instanceof Set))
        return false;
    Collection collection = (Collection)obj;
    if(collection.size() != size())
        return false;
    try
    {
        return containsAll(collection);
    }
    catch(ClassCastException classcastexception)
    {
        return false;
    }
    catch(NullPointerException nullpointerexception)
    {
        return false;
    }
    } 
```

[http://docs.oracle.com/javase/6/docs/api/java/util/AbstractSet.html](http://docs.oracle.com/javase/6/docs/api/java/util/AbstractSet.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T13:07:20.883

`TreeSet`使用比较器。你知道它实际上是通过使用 map 来维护元素的吗？

```
 public TreeSet() {
    this(new TreeMap<E,Object>());
 } 
```

正如你所说*，集合不包含 e1.equals(e2) 这样的元素对 e1 和 e2*。这就是 Comparator 有`equals`方法的原因。

无论我们将如何使用`Set`它都取决于`Comparator`. 如果我们使用自己的比较器，我们可以使用`Set`as`List`但通常我们不这样做。如果我们在初始化时添加自己的对象`TreeSet`必须通过或对象必须由`Comparator``TreeSet``Comparable`

**Comparable**
可比较的对象，能够将自己与另一个对象进行比较

**比较**
器 用于比较两个不同的对象。

```
public int compare(Employee o1, Employee o2) {
    // if sort by name
    return o1.getName().compareTo(o2.getName());
 }

 public boolean equals(Object obj) {
        // equals with ID
        Employee e = (Employee)obj;
        return this.getId().equals(e.getId());
 } 
```

这是[Java Sorting: Comparator vs Comparable](http://www.digizol.com/2008/07/java-sorting-comparator-vs-comparable.html)教程。

# iphone - 目标c：设置对象属性；属性不更新

> ID：13541155
> 
> 赞同：0
> 
> 时间：2012-11-24T12:22:55.087
> 
> 标签：iphone, objective-c, ios, xcode, ipad

哇。今天早上我在这个 101 问题上完全精神失常。

在`ViewController`，我有这个代码。但是在它执行之后，它的值`[proposalInfo expanded]`仍然是NO。有人可以看到我做错了什么吗？

```
- (void)showFullProposal:(id) sender {

// update proposalinfo
ProposalInfo *proposalInfo = [self.proposalInfoArray objectAtIndex:index.section];
[proposalInfo setExpanded:YES];

} 
```

变量声明如下：

视图控制器：

```
@interface ViewController()

@property (nonatomic, strong) NSMutableArray* proposalInfoArray;

@end 
```

提案信息.h：

```
@interface ProposalInfo : NSObject

@property (assign) BOOL expanded;

@end 
```

提案信息.m：

```
@synthesize expanded; 
```

请帮忙！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T12:48:39.777

如果您从未`alloc`/`init`您的`proposalInfoArray`数组，您可能会遇到这样的行为（即不会出错，但总是会`NO`返回，因为当您向对象发送消息时`nil`，您会`nil`返回）。如果不完全是这样，那将是这样简单的事情。检查`proposalInfoArray`并确保它不是`nil`. 还要检查`proposalInfo`你回来的对象，确保它不是`nil`.

为了说明您可能遇到的问题，这会重现您描述的行为（例如，`expanded`看起来它是`NO`，无论如何，但您仍然没有得到任何异常）：

```
self.proposalInfoArray = nil;                   // This obviously won't work

[self.proposalInfoArray addObject:[[ProposalInfo alloc] init]];

ProposalInfo *proposalInfo = [self.proposalInfoArray objectAtIndex:0];
NSLog(@"before=%d", proposalInfo.expanded);      // OK, IT'S "0"
proposalInfo.expanded = YES;
NSLog(@"after=%d", proposalInfo.expanded);       // HEY, IT'S STILL "0" -- BAD! 
```

而这工作正常：

```
self.proposalInfoArray = [[NSMutableArray alloc] init];

[self.proposalInfoArray addObject:[[ProposalInfo alloc] init]];

ProposalInfo * proposalInfo = [self.proposalInfoArray objectAtIndex:0];

NSLog(@"before=%d", proposalInfo.expanded);      // OK, IT'S "0"
proposalInfo.expanded = YES;
NSLog(@"after=%d", proposalInfo.expanded);       // HEY, IT'S NOW "1" -- GOOD! 
```

就未来如何识别这些问题而言，使用`NSAssert`. 如果我们在该行之前有以下代码行，我们就会发现这个问题`objectAtIndex`：

```
NSAssert(self.proposalInfoArray, @"proposalInfoArray must be initialized!"); 
```

或者，在`objectForIndex`：

```
NSAssert(proposalInfo, @"proposalInfo must not be nil!"); 
```

语句的`NSAssert`好处是你可以把它们放在你的代码中，当你为调试而构建时，它们可以帮助你发现你的程序逻辑错误，但是当你构建你的最终发布版本时，它们会被自动省略，使你的代码更加高效的。所以，`NSAssert`请随意使用！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T12:37:51.387

Imme，以下行似乎很奇怪：

```
ProposalInfo *proposalInfo = [self.proposalInfoArray objectAtIndex:index.section]; 
```

实际上，你的数组中有什么，意味着在`proposalInfoArray`. 你检查过你的对象吗？

# java - BufferedReader 没有读取空行

> ID：13541157
> 
> 赞同：3
> 
> 时间：2012-11-24T12:23:49.673
> 
> 标签：java, http, inputstream, bufferedreader

我试图弄清楚为什么我的 BufferedReader（从 InputStream 读取）只是挂起并且在收到空行后不读取。

尝试读取类似于以下内容的 POST 请求：

```
POST /test.php HTTP/1.0
Content-Length: 30
Content-Type: text/html;

postData=whatever&moreData... 
```

我知道发布数据正在正确发送（以上述格式），但是我无法检索发布的数据。我希望下面的代码打印出帖子数据然后挂起等待更多..但是，实际发生的是它在“Content-Type”行之后挂起。

```
while (true) {
    System.out.println(bufferedReader.readLine());
} 
```

用于获取流的代码：

```
bufferedReader = new BufferedReader(clientSocket.getInputStream()); 
```

有谁知道为什么会这样？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T14:55:19.647

该`POST`方法不会在末尾添加换行符。您需要做的是`Content-Length`在最后一个空行之后读取那么多字符。

*例子*

假设我们有以下`HTML`页面：

```
<html>
<head/>
<body>
    <form action="http://localhost:12345/test.php" method="POST">
        <input type="hidden" name="postData" value="whatever"/>
        <input type="hidden" name="postData2" value="whatever"/>
        <input type="submit" value="Go"/>
    </form>
</body>
</html> 
```

现在我们启动一个非常简单的服务器，它在某种程度上类似于您的代码（这段代码充满了整体，但这不是问题）：

```
public class Main {
    public static void main(final String[] args) throws Exception {
        final ServerSocket serverSocket = new ServerSocket(12345);
        final Socket clientSocket = serverSocket.accept();
        final InputStreamReader reader = new InputStreamReader(clientSocket.getInputStream());
        final BufferedReader bufferedReader = new BufferedReader(reader);
        int contentLength = -1;
        while (true) {
            final String line = bufferedReader.readLine();
            System.out.println(line);

            final String contentLengthStr = "Content-Length: ";
            if (line.startsWith(contentLengthStr)) {
                contentLength = Integer.parseInt(line.substring(contentLengthStr.length()));
            }

            if (line.length() == 0) {
                break;
            }
        }

        // We should actually use InputStream here, but let's assume bytes map
        // to characters
        final char[] content = new char[contentLength];
        bufferedReader.read(content);
        System.out.println(new String(content));
    }
} 
```

当我们在我们最喜欢的浏览器中加载页面并按下`Go`按钮时，我们应该`POST`在控制台中获取一些正文的内容。

# php - 将 COUNT() 理解为 `count`

> ID：13541162
> 
> 赞同：0
> 
> 时间：2012-11-24T12:24:17.120
> 
> 标签：php, mysql, login, count

我目前正在学习如何在 PHP MySQL 中构建站点。但是，我似乎无法理解`COUNT() as count`并且不介意进一步解释。

我了解 , 的原理`COUNT`以及`0 || 1`它如何返回与该查询相关的所有值。

但是，看不到 COUNT 作为计数是如何工作的。无论如何，这就是我正在编写的代码的运行方式——所以我们有一个工作示例——也是我第一次感到困惑的地方。

```
"SELECT COUNT(id) as count, id
 FROM user
 WHERE email='$email' AND password='".md5$password."'" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T12:26:06.973

[`Count()`](http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html)您可以计算结果集的返回行数。还有关于[count](http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html)的官方 MySQL 文档：

> 数据库通常用于回答以下问题：“某种类型的数据在表中出现的频率如何？” 例如，您可能想知道您有多少只宠物，或者每个主人有多少只宠物，或者您可能想对您的动物执行各种类型的普查操作。
> 
> 计算您拥有的动物总数与“宠物表中有多少行？”是同一个问题。因为每只宠物有一个记录。COUNT(*) 计算行数，因此计算动物数量的查询如下所示：
> 
> `SELECT COUNT(*) FROM pet;`

部分`AS count`意味着该列将获得一个您可以在例如 PHP 中使用的名称。另请参阅[w3schools](http://www.w3schools.com/sql/sql_alias.asp)上的这个解释：

> 您可以使用别名为表或列指定另一个名称。如果您有非常长或复杂的表名或列名，这可能是一件好事。
> 
> 别名可以是任何名称，但通常很短。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T12:29:46.070

这就是所谓的别名，有时用于向用户或调用代码显示更吸引人的列标题

```
SELECT COUNT(`id`) as `count`.... 
```

将打印

```
count
--------
5 
```

别名作为列标题而不是任何任意字符串：[请参阅 SQLFiddle 以查看差异](http://sqlfiddle.com/#!2/aa1c0/1)

从小提琴中你可以看到标题列看起来有点像

```
count(*)
--------
5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T12:29:37.913

`as count`只是一个别名。您可以`as`用于选择的任何字段或方法。这意味着您更改了数据集中返回的列的名称。

```
SELECT `field` as another_name 
```

所以：

```
SELECT COUNT(*) as `count` 
```

只需将列重命名为 ，`COUNT(*)`以便`count`在您处理结果集的任何位置都更容易使用。

它还使您在当前查询中更容易访问。许多人会使用大表名执行以下操作：

```
SELECT * FROM `table_with_ridiculous_name` as twrn WHERE twrn.id = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T12:27:42.250

如果你运行这个 sql：

```
SELECT COUNT(id), id .... 
```

你会得到（在执行 *_fetch_assoc 之后）`$row['numberofrecordshere']`这将很难回显（或在比较中使用），除非你知道会有多少记录（无论如何这会破坏这个结果的目的）

将其作为计数返回允许您通过使用在结果数组中获取它`$row['count']`

# actionscript-3 - 在 SWF 外部单击时卸载外部加载的 SWF

> ID：13541164
> 
> 赞同：2
> 
> 时间：2012-11-24T12:24:31.200
> 
> 标签：actionscript-3, flash-cs5

我在舞台上有一个按钮，它使用 Loader 类加载外部 SWF。我希望能够在用户单击 SWF 外部（即舞台上的其他任何位置）时卸载它。

到目前为止，我只有加载 SWF 的代码......

```
mybutton.addEventListener(MouseEvent.CLICK, fl_LoadExternalSwf);

function fl_LoadExternalSwf(event:MouseEvent):void
{
var my_Loader:Loader = new Loader();
var my_url:URLRequest=new URLRequest("pageFlip.swf");

//These listeners detect when the file has finished loading, and if the
//correct file is loaded.
my_Loader.contentLoaderInfo.addEventListener(Event.COMPLETE, finishLoading);
my_Loader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, errorHandler);

//The load method then loads the SWF file into the loader object.
my_Loader.load(my_url);

//This function adds the external SWF to the stage.
function finishLoading(loadEvent:Event) {
addChild(loadEvent.currentTarget.content);
}

//This function displays a message if the file is not found.
function errorHandler(errorEvent:Event):void {
trace("file missing");
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T12:33:27.457

你可以只使用`unload()`类`Loader()`的

```
function unloadMC(myLoader:Loader, myURL:URLRequest):void {
 myLoader.unLoad(myURL);
}

unloadMC(my_Loader, my_url); 
```

**编辑**

您需要一个外部接口来调用单击事件“除了” swf。首先你需要使用jQuery来实现

```
$(document).bind('click', function (e) {
 $('#yourSWFObject').clickOutside();
});

$('#special').bind('click', function(e) {
    e.stopPropagation();
}); 
```

点击方法。之后，您需要使用 AS3 应用 externalInterface

```
import flash.external.ExternalInterface;
public function clickOutside() {
 unloadMC(my_Loader, my_url);
} 
```

# objective-c - MDSpreadView 自定义

> ID：13541172
> 
> 赞同：0
> 
> 时间：2012-11-24T12:25:12.403
> 
> 标签：objective-c, ios

有没有人在 iOS 上使用过 MDSpreadView 库？如果是这样，我如何自定义单元格并将其更改为可编辑单元格？该库在这里：[https ://github.com/mochidev/MDSpreadView](https://github.com/mochidev/MDSpreadView)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:21:06.990

MDSpreadView 中没有内置的方法。唯一的方法是通过继承自`MDSpreadViewCell`.

或者，您可以尝试[其他控件](http://www.cocoacontrols.com/platforms/ios/controls/dynamic-table-cell-classes)（不过，我没有亲自使用过）。

# php - Codeigniter - 如何从数据库中填充表单？

> ID：13541173
> 
> 赞同：0
> 
> 时间：2012-11-24T12:25:17.757
> 
> 标签：php, forms, validation, codeigniter

我有一个小站点，它允许用户在表单中输入值，然后直接提交或将字段值存储在模板中以便稍后提交。要稍后提交表单，他可以加载之前保存的模板。为此，有三个按钮**Load Template** / **Save Template** / **Submit form**。

因为我正在使用来自 Codeigniter 的表单验证内置功能，所以当我想使用之前存储的模板填充表单时遇到问题。

表单字段都设置为

```
$name = array(
'name'  => 'name',
'id'    => 'name',
'value' => set_value('name', $form_field_values['name'])
); 
```

在加载模板的情况下，该变量`$form_field_values`保存来自已加载模板的值，或者在首次加载表单时保存默认值。

最初，表单使用默认值加载。当我点击**加载模板**时，模板中的值没有被选择，`set_value()`因为之前有默认值。我想要的是**用模板中的值替换表单字段的值**。

你知道如何以干净的方式做到这一点吗？我所做的是引入一个变量来`set_value()`完全跳过调用：

```
$name= array(
'name'  => 'name',
'id'    => 'name',
'value' => $skip_form_validation ? $form_field_values['name'] : set_value('name', $form_field_values['name'])
); 
```

`$skip_form_validation`根据按下的按钮，控制器中的变量设置在哪里。跳过表单验证以保存/加载模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:36:35.477

Codeigniter 的 set_value() 函数是一个简单的函数，它在 $_POST 中查找值，如果找到值然后返回 else 返回第二个参数，您可以删除 set_value() 并为其编写自己的代码。如果要填充 POST 数据的值或添加要添加的任何值，可以编写 $_POST['field_name'] 就像这样使用

```
$name = array(
    'name'  => 'name',
    'id'    => 'name',
    'value' => $valueFromYourTemplate
); 
```

如果您不想在表单中设置 POST 值，则不需要使用 set_value() 函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:54:22.803

假设您检索数据库字段并将它们传递给控制器​​中的数据数组。

```
$record = $this->data_model->get_record(array('uid' => $user_id), 'users');

if (!is_null($record)) {

   $data['uname'] = $record->username;

   $data['loc'] = $record->location;
} 
```

其中 'users' 是数据库表，uid 是表用户的 id 字段。

在你的表格中，做这样的事情

希望能帮助到你！

# node.js - 在 redis sub 上收到重复的消息

> ID：13541176
> 
> 赞同：0
> 
> 时间：2012-11-24T12:25:31.147
> 
> 标签：node.js, backbone.js, express, redis

我正在使用 express 3x、node.js 和 redis。当我作为发布消息时，1 在订阅中收到此消息 2-3 次。（例如，当我刷新浏览器时，收到的消息每次增加 1）。下面是我的代码。

* * *

服务器端：~~~~~~~~~~

```
var express = require('express'),
    http = require('http')

var redis = require('redis');
var redisCli = redis.createClient();
var redisPub = redis.createClient();
var redisSub = redis.createClient();

redisCli.on("error", function (err) {
    console.error("\r\n Error generated from redis client ", err);
});
redisPub.on("error", function (err) {
    console.error("\r\n Error generated from redisPub ", err);
});
redisSub.on("error", function (err) {
    console.error("\r\n Error generated from redisSub ", err);
});

var server = http.createServer(app)
  , io = require('socket.io').listen(server);

server.listen(process.env.PORT);

app.configure(function () {
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.set('view options', { layout: false });

    app.use(express.favicon(__dirname + '/favicon.ico', { maxAge: 2592000000 }));
    app.use(express.bodyParser());
    app.use(express.cookieParser());
    app.use(express.session({ secret: "myKey", store: new RedisStore({ maxAge: 86400000, client: redisCli }), cookie: { maxAge: 86400000} }));
    app.use(express.methodOverride());
    app.use(app.router);
    app.use(express.static(__dirname + '/static'));
});

io.configure(function () {
    io.enable('browser client minification');  // send minified client
    io.enable('browser client etag');          // apply etag caching logic based on version number
    io.enable('browser client gzip');          // gzip the file

    io.set('log level', 1);
    io.set("flash policy server", false);
    io.set("transports", ["jsonp-polling", "xhr-polling"]);
});

io.sockets.on('connection', function (client) {
    console.log("server - redisSub.subscribe from io.on.connection");
    redisSub.unsubscribe();
    redisSub.subscribe("announcement");

    redisSub.on("message", function (channel, message) {
        io.sockets.emit('announcement', message);
    });

    client.on('disconnect', function () {
        redisSub.unsubscribe("announcement");
        redisSub.quit();
    });

});

app.post('/PublishMessage', function (req, res) {
    redisPub.publish("announcement", req.body.users);

    res.setHeader('Cache-Control', 'max-age=0, must-revalidate, no-cache, no-store');
    res.setHeader('Connection', 'keep-alive');
    res.contentType('application/json');
    res.setHeader('Expires', new Date().addYears(-10));
    res.json({ result: 'ok' });
}); 
```

* * *

客户端~~~~~~~~~

```
 this.socket = io.connect('http://XXX.XXX.X.XXX/', { transports: ['jsonp-polling', 'xhr-polling'] });
    this.socket.on('connect', function () {
        alert("client - Socket client connect");
    });
    this.socket.on('announcement', function (msg) {
        alert("clientside - announcement ");
        var nUsers = parseInt($('#Summary>article>p:last').text(), 10) + parseInt(msg, 10);
        $('#Summary>article>p:last').text(nUsers);
    }); 
```

==================================================== ===============所以，任何人都可以指导我！非常感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T16:06:44.003

我从未使用过 socket.io，但在我看来，您的连接处理程序过于复杂。

在处理程序内部，您似乎没有对连接做出反应（例如发出“用户连接”事件）或以任何方式修改单个套接字连接的行为。

您*正在*做的是反复订阅和取消订阅一个`redisSub`客户。我在这里可能是错的，但我认为您不需要或不应该这样做。

相反，您应该在连接处理程序**之外**子“通知”一次，因为您不需要在每个连接上子/取消子这个全局客户端。喜欢：

```
// Move this subscription outside of the connection handler, and you shouldn't
// have to continue to sub/unsub or otherwise manage it.
redisSub.on("message", function (channel, message) {
    io.sockets.emit('announcement', message);
});

// Since you're not reacting to connections or doing anything with individual
// connection sockets, you don't really have anything to do in this handler.
io.sockets.on('connection', function (socket) {
  // if you ONLY wanted to emit to this socket, you'd do it here
  //socket.emit("announcement", "just for this connection")
}); 
```

# jquery - Bx 滑块增加了巨大的宽度

> ID：13541179
> 
> 赞同：0
> 
> 时间：2012-11-24T12:25:50.397
> 
> 标签：jquery, twitter-bootstrap, bxslider

我目前正在尝试使用引导程序构建一个站点。到目前为止一切都很顺利，直到我将 bx-slider 插件插入页面。

目前它增加了`width: 999999px`当我检查元素时的宽度，你可以想象它导致布局看起来很糟糕。滑块中的图像具有相同的高度和宽度。

这是html

```
 <div class="row-fluid">
            <div id="bx-slider" class="span9">
                <div>
                    <div>
                        <img src="img/working-together.png" />
                    </div>
                    <div>
                        <p>
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
                            In libero ante, egestas non interdum sed, vestibulum ullamcorper dui. 
                            Nunc consectetur commodo quam, vel accumsan erat ultrices nec. 
                            Aenean dolor felis, tincidunt et ultricies vitae, mattis in ante. 
                            Phasellus dapibus pretium aliquam. 
                            Vestibulum vestibulum massa a enim facilisis volutpat. Class aptent.
                        </p>
                    </div>
                </div>
                <div>
                    <div>
                        <img src="img/discussion.png" />
                    </div>
                    <div>
                        <p>
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
                            In libero ante, egestas non interdum sed, vestibulum ullamcorper dui. 
                            Nunc consectetur commodo quam, vel accumsan erat ultrices nec. 
                            Aenean dolor felis, tincidunt et ultricies vitae, mattis in ante. 
                            Phasellus dapibus pretium aliquam. 
                            Vestibulum vestibulum massa a enim facilisis volutpat. Class aptent.
                        </p>
                    </div>
                </div>
                <div>
                    <div>
                        <img src="img/facilitator.png" />
                    </div>
                    <div>
                        <p>
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
                            In libero ante, egestas non interdum sed, vestibulum ullamcorper dui. 
                            Nunc consectetur commodo quam, vel accumsan erat ultrices nec. 
                            Aenean dolor felis, tincidunt et ultricies vitae, mattis in ante. 
                            Phasellus dapibus pretium aliquam. 
                            Vestibulum vestibulum massa a enim facilisis volutpat. Class aptent.
                        </p>
                    </div>
                </div>
                <div>
                    <div>
                        <img src="img/leadership.png" />
                    </div>
                    <div>
                        <p>
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
                            In libero ante, egestas non interdum sed, vestibulum ullamcorper dui. 
                            Nunc consectetur commodo quam, vel accumsan erat ultrices nec. 
                            Aenean dolor felis, tincidunt et ultricies vitae, mattis in ante. 
                            Phasellus dapibus pretium aliquam. 
                            Vestibulum vestibulum massa a enim facilisis volutpat. Class aptent.
                        </p>
                    </div>
                </div>
                <div>
                    <div>
                        <img src="img/success.png" />
                    </div>
                    <div>
                        <p>
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
                            In libero ante, egestas non interdum sed, vestibulum ullamcorper dui. 
                            Nunc consectetur commodo quam, vel accumsan erat ultrices nec. 
                            Aenean dolor felis, tincidunt et ultricies vitae, mattis in ante. 
                            Phasellus dapibus pretium aliquam. 
                            Vestibulum vestibulum massa a enim facilisis volutpat. Class aptent.
                        </p>
                    </div>
                </div>
                <div>
                    <div>
                        <img src="img/teamwork.png" />
                    </div>
                    <div>
                        <p>
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
                            In libero ante, egestas non interdum sed, vestibulum ullamcorper dui. 
                            Nunc consectetur commodo quam, vel accumsan erat ultrices nec. 
                            Aenean dolor felis, tincidunt et ultricies vitae, mattis in ante. 
                            Phasellus dapibus pretium aliquam. 
                            Vestibulum vestibulum massa a enim facilisis volutpat. Class aptent.
                        </p>
                    </div>
                </div>
            </div>
            <div class="span3">
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
                    In libero ante, egestas non interdum sed, vestibulum ullamcorper dui. 
                    Nunc consectetur commodo quam, vel accumsan erat ultrices nec. 
                    Aenean dolor felis, tincidunt et ultricies vitae, mattis in ante. 
                    Phasellus dapibus pretium aliquam. 
                    Vestibulum vestibulum massa a enim facilisis volutpat. Class aptent.
                </p>
            </div>
        </div>
    </div> 
```

这是JS

```
$(function(){
$('#bx-slider').bxSlider ({
   minSlides: 1,
   maxSlides: 10,
   auto: true,
   pager: false,
   controls: false,
   autoDelay: 1000,
   autoHover: true,
   slideWidth: 770
});}); 
```

如您所见，我已尝试按照该网站上的建议添加 slideWidth 和 max min 幻灯片。

有没有人有什么建议？

只是将滑块更改为无序列表，并且将每张幻灯片更改为列表元素无济于事。滑块包装器和窗口的宽度很好，但它似乎将宽度添加到 bx-slider 元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:32:57.820

简单的答案是在 bx 滑块周围放置一个包含 div 的内容，并将 span 类附加到该滑块上，因此最终会像这样。

```
<div class="span9">
    <ul id="bx-slider" class="slider-border">                      
       <li>
       </li>
    </ul>
</div> 
```

# java - ExpandableListView 中的元素不可点击：

> ID：13541180
> 
> 赞同：0
> 
> 时间：2012-11-24T12:25:54.010
> 
> 标签：java, android

有以下代码：

```
 mListOfExistedMessages.setAdapter(new ExistedTasksExpandableListAdapter(context, persons));
            mListOfExistedMessages.setOnChildClickListener(new OnChildClickListener() {

                @Override
                public boolean onChildClick(ExpandableListView parent,
                        View v, int groupPosition, int childPosition,
                        long id) {
                    Toast.makeText(ExistedMessagesActivity.this, "1", 
                            Toast.LENGTH_LONG).show();
                    return false;
                }

            });
            mListOfExistedMessages.setItemsCanFocus(false); 
```

ExistedTasksExpandableListAdapter 是我的自定义适配器，并且适配器代码运行良好（显示组和子的自定义视图）。子布局代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:focusable="false"
    android:orientation="horizontal"
    android:padding="10dip"
    android:paddingLeft="15dip" >

    <CheckBox
        android:id="@+id/listItemExistedMessageChecked"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:gravity="center"
        android:text="" />

    <LinearLayout
        android:layout_width="0dip"
        android:layout_height="match_parent"
        android:layout_weight="1.7"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/listItemExistedMessageText"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ellipsize="end"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:maxLines="2"
            android:text="Small Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/listItemExistedMessageRepeating"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:text="Small Text"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textStyle="italic" />
    </LinearLayout>

    <View
        android:layout_width="5dip"
        android:layout_height="match_parent"
        android:layout_marginLeft="5dip"
        android:background="#1874CD"
        android:focusable="false"
        android:focusableInTouchMode="false" />

    <LinearLayout
        android:layout_width="0dip"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:gravity="center"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:text="Next event:"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/listItemExistedMessageDateTime"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:gravity="center"
            android:text="Small Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />
    </LinearLayout>

</LinearLayout> 
```

但是子视图点击没有消息！我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T14:36:24.803

尝试添加：

```
 return super.onChildClick(parent, v, groupPosition, childPosition, id); 
```

而不是假的。它能为您提供帮助吗？

# sql - Postgres 正则表达式替换性能

> ID：13541181
> 
> 赞同：4
> 
> 时间：2012-11-24T12:26:01.950
> 
> 标签：sql, regex, postgresql

我有一个 Postgres 性能问题。我有一个大约 500K 行文本的表格。我需要做一些全局搜索和替换例程。这两个 UPDATE 语句中的一个会比另一个快得多吗？或者它们在性能上会非常相似吗？

```
update mytable
set mycolumn = regexp_replace(mycolumn, 'ReplaceMe','WithMe', 'g');

update mytable
set mycolumn = regexp_replace(mycolumn, 'ReplaceMe','WithMe', 'g')
where mycolumn like '%ReplaceMe%'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T12:29:22.660

通常，如果您包含 where 语句来限制 SQL 查询，则它们总是更快。所以第二个肯定会更快。本质上，数据库能够非常快速地完成这种操作。第一个首先获取整个列表，然后通过 regex 语句对其进行检查。后者只需对缩短的列表执行正则表达式。

但是，正如[a_horse_with_no_name 指出的那样](https://stackoverflow.com/questions/13541181/postgres-regex-replace-performance#comment18544076_13541207)，除非有与 关联的索引，否则`%ReplaceMe%`查询不会更快。但是，它仍然应该稍微快一些，因为通过 regex 命令处理的项目更少。

# deployment - 用于设计服务器场的应用程序

> ID：13541182
> 
> 赞同：2
> 
> 时间：2012-11-24T12:26:01.990
> 
> 标签：deployment, diagrams, server-farm

我想知道。是否有用于设计服务器场布局的应用程序？我知道这可以使用 UML 设计器应用程序或 Visio 来实现，但我一直在寻找更专门针对启动部署的这个特定部分的东西。用于设计服务器及其范围之间关系的应用程序将非常有帮助。

有什么建议么？

谢谢！

# c - 变换后如何获取物体的新坐标？

> ID：13541185
> 
> 赞同：1
> 
> 时间：2012-11-24T12:26:20.070
> 
> 标签：c, opengl

一些变换后如何学习对象的新坐标？

前任 ：

```
a,x,y,z any float numbers

glTranslatef( x, y,z ) ;
glRotate( a,0.0f, 1.0f, 0.0f ) ;

sketchSomething() ; 
```

我想知道这个变换后对象的坐标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T12:39:39.387

OpenGL 不会在对象中“思考”。当您*绘制*一个对象时，OpenGL 会自行处理几何体的每个图元（点、线、三角形），绘制它然后忘记它。转换只会影响屏幕上的显示位置。

但当然*，您*可以假设几何图形在某个模型空间中形成一个对象，然后转换为世界空间，然后是眼睛空间，然后是剪辑空间，最后是 NDC 空间。

关于您的问题：glTranslate、glRotate 和其他一些函数不操作对象。他们在当前活动堆栈顶部的矩阵上应用变换矩阵就地乘法。之前可能已经应用了无数次转换。所以你可以做的是从 OpenGL 中检索当前矩阵并自己进行转换。这为您提供了变换空间中的对象几何形状。当然，你可以乘以一个中心位置向量，得到对象的中心位置。

此外，我强烈建议您使用专用的矩阵数学库（GLM、Eigen、linmath.h），而不是依赖于 OpenGL 的矩阵例程，这些例程使用起来很麻烦，并使用该库进行所有变换矩阵运算，并且使用*glLoadMatrix*或*glUniformMatrix*将准备好的矩阵加载到 OpenGL 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T12:44:29.527

It kind of depends on what co-ordinate you're looking for.

If you want a 2D screen-coordinate, you can use gluProject() to apply the current matrices to a single point.

If you want to just apply the current modelview matrix to a point, you're probably better off just reading back that matrix and applying the transform yourself.

Note that if you simply want the position of your object's origin within the world space, you just need to read the translation portion of the matrix and not actually perform a full transform.

# python - 从 SQL 数据库中的 OHLC 数据中选择 7、14、20、50、200 天的价格。

> ID：13541188
> 
> 赞同：2
> 
> 时间：2012-11-24T12:26:53.923
> 
> 标签：python, sql, sqlite, analysis

假设您有一些这样的数据：

```
AC-057|Ethanol CBOT (Pit) Liq Cont|20050329|0.121|0.123|0.121|0.123|47|233|32|219
AC-057|Ethanol CBOT (Pit) Liq Cont|20050330|0.124|0.124|0.122|0.122|68|233|0|219
AC-057|Ethanol CBOT (Pit) Liq Cont|20050331|0.123|0.123|0.123|0.123|68|246|57|226
AC-057|Ethanol CBOT (Pit) Liq Cont|20050401|0.122|0.122|0.122|0.122|5|241|5|221
AC-057|Ethanol CBOT (Pit) Liq Cont|20050404|0.12|0.12|0.12|0.12|1|240|0|220
AC-057|Ethanol CBOT (Pit) Liq Cont|20050405|0.12|0.12|0.12|0.12|5|241|0|220
AC-057|Ethanol CBOT (Pit) Liq Cont|20050406|0.12|0.12|0.12|0.12|4|241|2|220
AC-057|Ethanol CBOT (Pit) Liq Cont|20050407|0.119|0.119|0.116|0.116|30|233|23|209
AC-057|Ethanol CBOT (Pit) Liq Cont|20050408|0.115|0.115|0.115|0.115|35|217|34|194
AC-057|Ethanol CBOT (Pit) Liq Cont|20050411|0.117|0.117|0.117|0.117|5|217|0|194
AC-057|Ethanol CBOT (Pit) Liq Cont|20050412|0.117|0.117|0.117|0.117|5|217|2|194
AC-057|Ethanol CBOT (Pit) Liq Cont|20050413|0.117|0.117|0.117|0.117|9|217|0|194
AC-057|Ethanol CBOT (Pit) Liq Cont|20050414|0.117|0.117|0.117|0.117|9|217|0|194
AC-057|Ethanol CBOT (Pit) Liq Cont|20050415|0.117|0.117|0.117|0.117|9|218|4|190
AC-057|Ethanol CBOT (Pit) Liq Cont|20050418|0.117|0.117|0.117|0.117|5|218|0|190
AC-057|Ethanol CBOT (Pit) Liq Cont|20050419|0.119|0.119|0.119|0.119|5|218|5|190
AC-057|Ethanol CBOT (Pit) Liq Cont|20050420|0.119|0.119|0.119|0.119|0|218|0|190
AC-057|Ethanol CBOT (Pit) Liq Cont|20050421|0.119|0.119|0.119|0.119|5|218|0|190
AC-057|Ethanol CBOT (Pit) Liq Cont|20050422|0.119|0.119|0.119|0.119|5|223|0|190
AC-057|Ethanol CBOT (Pit) Liq Cont|20050425|0.119|0.119|0.119|0.119|0|223|0|190
AC-057|Ethanol CBOT (Pit) Liq Cont|20050426|0.119|0.119|0.119|0.119|0|223|0|190
SYMBOL|DESCRIPTION                |yyyymmdd|OPEN |HIGH |LOW  |CLOSE|.|.  |.|... 
```

...具有各种不同的符号。

和这样的架构：

```
CREATE TABLE IF NOT EXISTS ma (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    symbol TEXT,
    description TEXT,
    year INTEGER,
    month INTEGER,
    day INTEGER,

    open REAL,
    high REAL,
    low  REAL,
    close REAL
);

CREATE INDEX ma_id_idx  ON ma(id);
CREATE INDEX ma_sym_idx ON ma(symbol);
CREATE INDEX ma_yea_idx ON ma(year);
CREATE INDEX ma_mon_idx ON ma(month);
CREATE INDEX ma_day_idx ON ma(day);

CREATE INDEX ma_open_idx  ON ma(open);
CREATE INDEX ma_high_idx  ON ma(high);
CREATE INDEX ma_low_idx   ON ma(low);
CREATE INDEX ma_close_idx ON ma(close); 
```

和一个将数据导入数据库的python脚本，如下所示：

```
import csv
import sqlite3 as lite

__infile__  = 'ma.csv'
__outfile__ = 'ma3.db'
input = csv.reader(open(__infile__, 'rb'), delimiter='|')
conn  = lite.connect(__outfile__)

ssql = """
    PRAGMA JOURNAL_MODE = MEMORY;

"""

isql = """
    INSERT INTO ma (
        symbol,
        description,
        year,
        month,
        day,
        open,
        high,
        low,
        close
    ) VALUES (
        ?, ?, ?, ?, ?, ?, ?, ?, ?
    )
"""

conn.executescript(ssql)

for row in input:
    year  = row[2][0:4]
    month = row[2][4:6]
    day   = row[2][6:8]
    tup   = (row[0], row[1], year, month, day, row[3], row[4], row[5], row[6])
    conn.execute(isql, tup)

conn.commit() 
```

您将如何收集一组记录来生成此架构：

```
CREATE TABLE trends (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    symbol TEXT,
    date DATE,
    p1 REAL,
    p20 REAL,
    p50 REAL,
    p100 REAL,
    p200 REAL
); 
```

在该特定符号的每个日期点。

我已经尝试了很多东西。最后一个，特别是要花很长时间，所以我不知道它是否会起作用。（嗯，它不会工作，因为它需要一周的计算时间）。原始的 csv 数据现在是 250 兆，但将来它会增长到 2.5 或更多，我可能不得不使用更大的数据库。

这是我尝试过（或正在尝试）的其他东西：

```
ma.sql
__________________________

    CREATE TABLE symbols (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        symbol TEXT,
        UNIQUE(symbol) ON CONFLICT IGNORE
    );

    CREATE TABLE descriptions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        description TEXT,
        UNIQUE(description) ON CONFLICT IGNORE
    );

    CREATE TABLE dates (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        entry DATE,
        UNIQUE(entry) ON CONFLICT IGNORE
    );

    CREATE VIEW trend_dates AS
        SELECT
            id AS id,
            entry AS p1,
            date(entry, '-7 day') AS p7,
            date(entry, '-14 day') AS p14,
            date(entry, '-20 day') AS p20,
            date(entry, '-50 day') AS p50,
            date(entry, '-100 day') AS p100,
            date(entry, '-200 day') AS p200, -- LEFT OFF HERE

    CREATE TRIGGER update_entry_format AFTER INSERT ON dates
    BEGIN
        UPDATE dates SET entry =
            (SELECT
                substr(entry, 1, 4) || '-' ||
                substr(entry, 5, 2) || '-' ||
                substr(entry, 7, 2)
            )
            WHERE rowid = new.rowid;
    END;

    CREATE TABLE trends (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        symbol INTEGER,
        entry INTEGER,
        p1 REAL,
        p20 REAL,
        p50 REAL,
        p100 REAL,
        p200 REAL
    );

    CREATE TABLE master (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        SYMBOL INTEGER,
        DESCRIPTION INTEGER,
        ENTRY INTEGER,
        OPEN REAL,
        HIGH REAL,
        LOW  REAL,
        CLOSE REAL,
        VOLUME INTEGER,
        OPEN_INTEREST INTEGER,
        CONTRACT_VOLUME INTEGER, 
        CONTRACT_OPEN_INTEREST INTEGER
    );

    CREATE INDEX symbols_index ON symbols(symbol);
    CREATE INDEX descriptions_index ON descriptions(description);
    CREATE INDEX dates_index ON dates(entry);

    CREATE INDEX symbols_index2 ON symbols(id, symbol);
    CREATE INDEX descriptions_index2 ON descriptions(id, description);
    CREATE INDEX dates_index2 ON dates(id, entry);

    CREATE INDEX symbols_index3 ON symbols(id);
    CREATE INDEX descriptions_index3 ON descriptions(id);
    CREATE INDEX dates_index3 ON dates(id);

    CREATE INDEX master_index ON master(
        id,
        SYMBOL,
        DESCRIPTION,
        ENTRY,
        OPEN,
        HIGH,
        LOW,
        CLOSE,
        VOLUME
    );
    CREATE INDEX master_index2 ON master(id);
    CREATE INDEX master_index3 ON master(symbol);
    CREATE INDEX master_index4 ON master(entry);
    CREATE INDEX master_index5 ON master(close);

    CREATE VIEW ma AS SELECT
        master.id,
        symbols.symbol,
        descriptions.description,
        dates.entry,
        master.OPEN,
        master.HIGH,
        master.LOW,
        master.CLOSE,
        master.VOLUME,
        master.OPEN_INTEREST,
        master.CONTRACT_VOLUME,
        master.CONTRACT_OPEN_INTEREST
    FROM master
        INNER JOIN symbols
        INNER JOIN descriptions
        INNER JOIN dates
    WHERE 
        master.SYMBOL = symbols.id AND
        master.DESCRIPTION = descriptions.id AND
        master.entry = dates.id
    ;

    CREATE TRIGGER update_master INSTEAD OF INSERT ON ma
    BEGIN
        INSERT INTO symbols(symbol) VALUES (new.SYMBOL);
        INSERT INTO descriptions(description) VALUES (new.DESCRIPTION);
        INSERT INTO dates(entry) VALUES (new.ENTRY);

        INSERT OR REPLACE INTO MASTER(
            SYMBOL,
            DESCRIPTION,
            ENTRY,
            OPEN,
            HIGH,
            LOW,
            CLOSE,
            VOLUME,
            OPEN_INTEREST,
            CONTRACT_VOLUME,
            CONTRACT_OPEN_INTEREST
        )
        VALUES(
            coalesce(
                (   SELECT id FROM symbols
                    WHERE symbol = new.SYMBOL
                ),
                    new.SYMBOL
                ),

            coalesce(
                (   SELECT id FROM descriptions
                    WHERE description = new.DESCRIPTION
                ),
                    new.DESCRIPTION
                ),

            coalesce(
                (   SELECT id FROM dates
                    WHERE entry = new.ENTRY
                ),
                    new.ENTRY
                ),

            new.OPEN,
            new.HIGH,
            new.LOW,
            new.CLOSE,
            new.VOLUME,
            new.OPEN_INTEREST,
            new.CONTRACT_VOLUME,
            new.CONTRACT_OPEN_INTEREST
        );
    END;

CREATE VIEW sma
    AS SELECT
        a.ENTRY,
        a.CLOSE,
        AVG(b.close)
    FROM
        ma AS a
        JOIN ma AS b
            ON a.ENTRY >= b.ENTRY
            AND b.ENTRY >= date(a.CLOSE, '-20 day')
        GROUP BY a.ENTRY, a.CLOSE
        ORDER BY 1
    ;

ma.py
----------------------  
import sqlite3 as lite
import csv
import glob;
print 'connecting...'
conn = lite.connect('MA.db')
infile = csv.reader(open('MA.CSV', 'rb'), delimiter='|', quotechar=r'"')
conn.execute('BEGIN TRANSACTION')
conn.execute('PRAGMA JOURNAL_MODE = MEMORY')

isql = 'insert into ma(SYMBOL, DESCRIPTION, ENTRY, OPEN, HIGH, LOW, CLOSE, VOLUME, OPEN_INTEREST, CONTRACT_VOLUME, CONTRACT_OPEN_INTEREST) values (?,?,?,?,?,?,?,?,?,?,?)'

print 'inserting data...'
for row in infile:
    conn.execute(isql, row)

conn.commit()

conn.close()

import sqlite3 as lite
conn = lite.connect('ma.db')

tsql = 'SELECT close FROM master WHERE symbol = ? AND entry = ?'
cur1 = conn.cursor()
cur2 = conn.cursor()
cur3 = conn.cursor()
cur4 = conn.cursor()
cur5 = conn.cursor()
dcur = conn.cursor()
scur = conn.cursor()

dcur.execute('SELECT id FROM dates ORDER BY entry DESC')
scur.execute('SELECT id FROM symbols ORDER BY symbol ASC')

dates = dcur.fetchall()
symbols = scur.fetchall()

print 'building trends...'
conn.execute('PRAGMA synchronous=OFF')
conn.execute('PRAGMA journal_mode=MEMORY')
conn.execute('BEGIN TRANSACTION')

while len(dates) > 0:
    for symbol in symbols:
        try:
            cur1.execute(tsql, (symbol[0], dates[0][0]))
            cur2.execute(tsql, (symbol[0], dates[20][0]))
            cur3.execute(tsql, (symbol[0], dates[50][0]))
            cur4.execute(tsql, (symbol[0], dates[100][0]))
            cur5.execute(tsql, (symbol[0], dates[200][0]))
        except Exception, e:
            print repr(e)
            pass

        try:
            p1 = cur1.fetchone()[0]
            p2 = cur2.fetchone()[0]
            p3 = cur3.fetchone()[0]
            p4 = cur4.fetchone()[0]
            p5 = cur5.fetchone()[0]
            conn.execute('INSERT INTO trends(symbol, entry, p1, p20, p50, p100, p200) VALUES(?, ?, ?, ?, ?, ?, ?)', (symbol[0], dates[0][0], p1, p2, p3, p4, p5))   
            #print "(" + repr(dates[0][0]) + ", " + repr(symbol[0]) + "): " + repr(p1) + " " + repr(p2) + " " + repr(p3) + " " + repr(p4) + " " + repr(p5)
        except Exception, e:
            #print repr(e)
            pass

    print "done: " + repr(dates[0][0])  
    dates.remove(dates[0])

conn.commit()
conn.close() 
```

谢谢！

* * *

*tl;dr*：对于原始列表中的每个条目，我想使用收盘价获取每个交易品种在每个日期的 7、14、20、50、100、200 天价格。并把它放在一张桌子上。我更喜欢用纯 SQL 来做，但是 python 也可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T12:56:53.020

知道已经有一个针对滚动财务计算进行了优化的 python 库，您可能会松一口气……它被称为[`pandas`](http://pandas.pydata.org/).

我不认为[pandas 会从 SQL 中读取](https://stackoverflow.com/questions/10065051/python-pandas-and-databases-like-mysql)；但是，[`pandas`](http://pandas.pydata.org/)将从 csv 读取...我冒昧地使用 csv 数据（您似乎已存储在其中`ma.csv`）...一旦您这样做了，获得 CLOSE 的 7 天滚动平均值就像...

```
>>> import pandas as pn
>>> from datetime import date
>>> df = pn.read_csv('fut.csv', index_col=2, parse_dates=[2])
>>> pn.rolling_mean(df['CLOSE'], window=7)
yyyymmdd
2005-03-29         NaN
2005-03-30         NaN
2005-03-31         NaN
2005-04-01         NaN
2005-04-04         NaN
2005-04-05         NaN
2005-04-06    0.121429
2005-04-07    0.120429
2005-04-08    0.119429
2005-04-11    0.118571
2005-04-12    0.117857
2005-04-13    0.117429
2005-04-14    0.117000
2005-04-15    0.116571
2005-04-18    0.116714
2005-04-19    0.117286
2005-04-20    0.117571
2005-04-21    0.117857
2005-04-22    0.118143
2005-04-25    0.118429
2005-04-26    0.118714
>>>
>>> pn.rolling_mean(df['CLOSE'], window=7)[date(2005,4,26)]
0.11871428571428572
>>> 
```

`df`上面是一个，它是一个专门的结构，用于保存与对象关联的时间索引值表...在这种情况下，保存您的 HIGH、LOW、CLOSE 等...[`pandas`](http://pandas.pydata.org/) [`DataFrame`](http://pandas.pydata.org/pandas-docs/stable/dsintro.html#dataframe)`DataFrame`

除了让您的工作更轻松之外，[`pandas`](http://pandas.pydata.org/)还将大部分繁重的工作卸载到 Cython，这使得运行数千次此类计算变得相当快。

* * *

## fut.csv

```
SYMBOL,DESCRIPTION,yyyymmdd,OPEN,HIGH,LOW,CLOSE,tmp1,tmp2,tmp3,tmp4
AC-057,Ethanol CBOT (Pit) Liq Cont,20050329,0.121,0.123,0.121,0.123,47,233,32,219
AC-057,Ethanol CBOT (Pit) Liq Cont,20050330,0.124,0.124,0.122,0.122,68,233,0,219
AC-057,Ethanol CBOT (Pit) Liq Cont,20050331,0.123,0.123,0.123,0.123,68,246,57,226
AC-057,Ethanol CBOT (Pit) Liq Cont,20050401,0.122,0.122,0.122,0.122,5,241,5,221
AC-057,Ethanol CBOT (Pit) Liq Cont,20050404,0.12,0.12,0.12,0.12,1,240,0,220
AC-057,Ethanol CBOT (Pit) Liq Cont,20050405,0.12,0.12,0.12,0.12,5,241,0,220
AC-057,Ethanol CBOT (Pit) Liq Cont,20050406,0.12,0.12,0.12,0.12,4,241,2,220
AC-057,Ethanol CBOT (Pit) Liq Cont,20050407,0.119,0.119,0.116,0.116,30,233,23,209
AC-057,Ethanol CBOT (Pit) Liq Cont,20050408,0.115,0.115,0.115,0.115,35,217,34,194
AC-057,Ethanol CBOT (Pit) Liq Cont,20050411,0.117,0.117,0.117,0.117,5,217,0,194
AC-057,Ethanol CBOT (Pit) Liq Cont,20050412,0.117,0.117,0.117,0.117,5,217,2,194
AC-057,Ethanol CBOT (Pit) Liq Cont,20050413,0.117,0.117,0.117,0.117,9,217,0,194
AC-057,Ethanol CBOT (Pit) Liq Cont,20050414,0.117,0.117,0.117,0.117,9,217,0,194
AC-057,Ethanol CBOT (Pit) Liq Cont,20050415,0.117,0.117,0.117,0.117,9,218,4,190
AC-057,Ethanol CBOT (Pit) Liq Cont,20050418,0.117,0.117,0.117,0.117,5,218,0,190
AC-057,Ethanol CBOT (Pit) Liq Cont,20050419,0.119,0.119,0.119,0.119,5,218,5,190
AC-057,Ethanol CBOT (Pit) Liq Cont,20050420,0.119,0.119,0.119,0.119,0,218,0,190
AC-057,Ethanol CBOT (Pit) Liq Cont,20050421,0.119,0.119,0.119,0.119,5,218,0,190
AC-057,Ethanol CBOT (Pit) Liq Cont,20050422,0.119,0.119,0.119,0.119,5,223,0,190
AC-057,Ethanol CBOT (Pit) Liq Cont,20050425,0.119,0.119,0.119,0.119,0,223,0,190
AC-057,Ethanol CBOT (Pit) Liq Cont,20050426,0.119,0.119,0.119,0.119,0,223,0,190 
```

# java - 更新 JPA 中的一对一关系

> ID：13541190
> 
> 赞同：1
> 
> 时间：2012-11-24T12:27:06.977
> 
> 标签：java, jpa

您好，我得到了以下实体类书籍：$

```
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private int id;

@OneToOne(cascade=CascadeType.PERSIST)
private BookProfile bookProfile;

@OneToMany(cascade=CascadeType.PERSIST , orphanRemoval=true, fetch=FetchType.EAGER)
private List<Rating> ratings; 
```

$

我尝试添加这样的配置文件：

$

```
Book book = manager.find(Book.class, bId);
BookProfile bookProfile = new BookProfile();
manager.getTransaction().begin();
book.setBookProfile(bookProfile);
manager.merge(book);
manager.getTransaction().commit(); 
```

$

但是没有任何反应，Book 中的配置文件仍然为空。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T14:21:06.837

您需要为您的字段添加`MERGE`级联类型。`bookProfile`

# android - 在 png 之间重复纹理

> ID：13541197
> 
> 赞同：1
> 
> 时间：2012-11-24T12:27:34.183
> 
> 标签：android, textures, nine-patch, tiling

我想在 png drawable 的中心重复特定的矩形区域，而不是使用 `android:tileMode="repeat"`. 如果我打了 9 个补丁，它会被拉长。有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:53:29.120

要么，离线创建一个只包含你想要的区域的新PNG，要么动态地从你想要的区域创建一个新的位图，并将这个图像用于drawable。

# c# - 在这种情况下，如何通过使用 lambda 或 linq 避免使用嵌套的 foreach 语句？

> ID：13541209
> 
> 赞同：2
> 
> 时间：2012-11-24T12:29:33.610
> 
> 标签：c#, asp.net-mvc-3, linq

在这种情况下，如何通过使用 lambda 或 linq 避免使用嵌套的 foreach 语句？已经很晚了，我似乎无法弄清楚如何访问 ErrorMessage 属性而不必恢复到嵌套的 foreach 语句。如果完全使用 Lambda 或 Linq 重写代码，那么等效的方法是什么？

```
public static List<String> ExtractErrors(this ModelStateDictionary modelStateDictionary)
        {
            List<String> errors = new List<String>();

            var modelErrorCollection = (from modelState in modelStateDictionary.Values
                                        where modelState.Errors != null && modelState.Errors.Count > 0
                                        select modelState.Errors).ToList();

            foreach (var item in modelErrorCollection)
            {
                foreach (ModelError modelError in item)
                {
                    errors.Add(modelError.ErrorMessage);
                }
            }

            return errors;
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T12:34:46.157

你会想用`SelectMany`这个

```
 public static List<String> ExtractErrors(this ModelStateDictionary modelStateDictionary)
    {
        var modelErrorCollection = (from modelState in modelStateDictionary.Values
                                    where modelState.Errors != null && modelState.Errors.Count > 0
                                    select modelState.Errors)
                                    .SelectMany(item=>item)
                                    .Select(modelError=>modelError.ErrorMessage)
                                    .ToList();
         return modelErrorCollection;
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T12:34:04.553

不是`errors.Add(modelErrorCollection.SelectMany(x => x))`吗？

# google-maps - google.maps.FusionTablesMouseEvent - 如何访问信息窗口对象？

> ID：13541211
> 
> 赞同：1
> 
> 时间：2012-11-24T12:29:36.977
> 
> 标签：google-maps, google-fusion-tables, infowindow

`InfoWindow`用户单击地图后，我需要访问一个对象。不幸的是，提供的事件对象只提供了`.infoWindowHtml`属性，它可以让我自定义`InfoWindow`内容，但不能让我对信息窗口本身做任何事情。有没有办法从 JavaScript 中获取对象？

或者，我会很高兴从一开始就打开自己`InfoWindow`的。但是我既不能阻止 Fusion Tables`InfoWindow`打开，也不能在它打开后阻止它。如果我自己打开，它只会显示在股票的上方。当然，如果我的信息窗口总是更大，我可以忽略 Fusion Tables 信息窗口，但必须有更好的方法。

* * *

背景：实际上，我只需要动态加载`InfoWindow`内容。通过一些 jQuery 魔法，我设法找到了我的内容元素并对其进行了更改，但`InfoWindow`不幸的是，它并没有调整自身的大小，这使得内容严重溢出。我希望，如果我到达`InfoWindow`对象并通过它设置内容，它会调整自己的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:15:11.153

要抑制自动 FusionTablesLayer InfoWindows，请使用FusionTablesLayers 构造函数中的 suppressInfoWindows:true[选项](https://developers.google.com/maps/documentation/javascript/reference#FusionTablesLayerOptions)

# c# - WCF 自定义行为的依赖注入

> ID：13541213
> 
> 赞同：14
> 
> 时间：2012-11-24T12:29:46.900
> 
> 标签：c#, wcf, dependency-injection, ninject

在我的 WCF 服务中，我有一个自定义消息检查器，用于根据 XML 架构将传入消息验证为原始 XML。消息检查器有一些依赖项（例如记录器和 XML 模式集合）。我的问题是，我可以使用依赖注入框架（我目前正在使用 Ninject）来实例化这些自定义行为并自动注入依赖项吗？

我做了一个简单的例子来展示这个概念：

```
using System.ServiceModel.Channels;
using System.ServiceModel.Description;
using System.ServiceModel.Dispatcher;
using Ninject.Extensions.Logging;

public class LogMessageInspector : IDispatchMessageInspector
{
    private readonly ILogger log;

    public LogMessageInspector(ILogger log)
    {
        this.log = log;
    }

    public object AfterReceiveRequest(ref Message request, IClientChannel channel, InstanceContext instanceContext)
    {
        LogMessage(ref request);
        return null;
    }

    public void BeforeSendReply(ref Message reply, object correlationState)
    {
        LogMessage(ref reply);
    }

    private void LogMessage(ref Message message)
    {
        //... copy the message and log using this.log ...
    }
}

public class LogMessageBehavior : IEndpointBehavior
{
    private readonly IDispatchMessageInspector inspector;

    public LogMessageBehavior(IDispatchMessageInspector inspector)
    {
        this.inspector = inspector;
    }

    public void AddBindingParameters(ServiceEndpoint endpoint, BindingParameterCollection bindingParameters) { }

    public void ApplyClientBehavior(ServiceEndpoint endpoint, ClientRuntime clientRuntime) { }

    public void ApplyDispatchBehavior(ServiceEndpoint endpoint, EndpointDispatcher endpointDispatcher)
    {
        endpointDispatcher.DispatchRuntime.MessageInspectors.Add(this.inspector);
    }

    public void Validate(ServiceEndpoint endpoint) { }
} 
```

我该如何去注入一个`ILogger`into`LogMessageInspector`和一个`LogMessageInspector`into `LogMessageBehavior`？

第二个问题，这是不是矫枉过正？

**编辑**：如果我在代码中构建我的服务，我可以让它工作，因为我使用 Ninject 创建行为。但是，当通过 config 配置服务时，我需要添加一个扩展类的附加类`BehaviorExtensionElement`。这个类是由 WCF 创建的，我似乎无法找到一种方法来让 Ninject 创建它。在代码中配置：

```
static void Main(string[] args)
{
    using (IKernel kernel = new StandardKernel())
    {
        kernel.Bind<IEchoService>().To<EchoService>();
        kernel.Bind<LogMessageInspector>().ToSelf();
        kernel.Bind<LogMessageBehavior>().ToSelf();

        NinjectServiceHost<EchoService> host = kernel.Get<NinjectServiceHost<EchoService>>();
        ServiceEndpoint endpoint = host.AddServiceEndpoint(
            typeof(IEchoService),
            new NetNamedPipeBinding(),
            "net.pipe://localhost/EchoService"
        );
        endpoint.Behaviors.Add(kernel.Get<LogMessageBehavior>());

        host.Open();

        Console.WriteLine("Server started, press enter to exit");
        Console.ReadLine();
    }
} 
```

这很好用，但我不知道如何在通过 my 配置时创建行为`app.config`：

```
<system.serviceModel>
    <services>
        <service name="Service.EchoService">
            <endpoint address="net.pipe://localhost/EchoService" 
                      binding="netNamedPipeBinding"
                      contract="Contracts.IEchoService" 
                      behaviorConfiguration="LogBehaviour"
            />
        </service>
    </services>
    <extensions>
        <behaviorExtensions>
            <add name="logMessages" type="Service.LogMessagesExtensionElement, Service" />
        </behaviorExtensions>
    </extensions>
    <behaviors>
        <endpointBehaviors>
            <behavior name="LogBehaviour">
                <logMessages />
            </behavior>
        </endpointBehaviors>
    </behaviors>
</system.serviceModel> 
```

```
public class LogMessagesExtensionElement : BehaviorExtensionElement
{
    public override Type BehaviorType
    {
        get { return typeof(LogMessageBehavior); }
    }

    protected override object CreateBehavior()
    {
        //how do I create an instance using the IoC container here?
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T13:34:51.057

> 如何将 ILogger 注入 LogMessageInspector 并将 LogMessageInspector 注入 LogMessageBehavior？

~~该方法已在[此处描述](https://stackoverflow.com/questions/2454850/how-do-i-pass-values-to-the-constructor-on-my-wcf-service/2455039#2455039)~~

**更新**

如果我错了，请纠正我，但我想问题归结为你如何获得 Ninject 内核的实例`BehaviorExtensionElement.CreateBehavior`？答案取决于您的托管方案。如果托管在 IIS 下，您可以将这样的内容添加到您的`NinjectWebCommon`：

```
public static StandardKernel Kernel
{
    get { return (StandardKernel)bootstrapper.Kernel; }
} 
```

由于您似乎是自托管的，因此您可能也想使用内核的静态实例。然而，在我看来，这并不是一个非常好的主意。

我实际上会投票支持您自己的方法并以编程方式配置行为，除非`BehaviorExtensionElement`有必要，因为您需要能够通过配置文件配置行为。

> 这是矫枉过正吗？

这取决于，但如果您要对实现进行单元测试，则绝对不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T18:17:12.710

为什么不采用更面向对象的方法，而不是针对 XML 模式验证原始 XML？例如，您可以将每个操作建模为单个消息（[DTO](https://en.wikipedia.org/wiki/Data_transfer_object)）并将实际逻辑隐藏在通用接口后面。因此，不是有一个包含`MoveCustomer(int customerId, Address address)`方法的 WCF 服务，而是有一个`MoveCustomerCommand { CustomerId, Address }`类，实际逻辑将由一个`ICommandHandler<MoveCustomerCommand>`用单个`Handle(TCommand)`方法实现接口的类来实现。

这种设计具有以下优点：

*   系统中的每个操作都有自己的类（[SRP](https://en.wikipedia.org/wiki/Single_responsibility_principle)）
*   那些消息/命令对象将获得 WCF 合同
*   WCF 服务将只包含一个服务类和一个方法。这导致了一个高度可维护的 WCF 服务。
*   允许通过为接口（[OCP](https://en.wikipedia.org/wiki/Open/closed_principle)）实现[装饰器](https://en.wikipedia.org/wiki/Decorator_pattern)来添加横切关注点`ICommandHandler<T>`
*   允许将验证放在消息/命令对象上（例如使用属性），并允许通过使用装饰器再次添加此验证。

当您应用基于单个通用`ICommandHandler<TCommand>`接口的设计时，创建可应用于所有实现的通用装饰器非常容易。一些装饰器可能只需要在 WCF 服务中运行时应用，其他应用程序类型也可能需要其他装饰器（如验证）。

消息可以定义如下：

```
public class MoveCustomerCommand
{
    [Range(1, Int32.MaxValue)]
    public int CustomerId { get; set; }

    [Required]
    [ObjectValidator]
    public Address NewAddress { get; set; }
} 
```

此消息定义了将客户移动`CustomerId`到提供的`NewAddress`. 属性定义什么状态是有效的。有了这个，我们可以使用 .NET DataAnnotations 或 Enterprise Library Validation Application Block 简单地进行基于对象的验证。这比编写基于 XSD 的 XML 验证要好得多，后者是相当难以维护的。这比您当前尝试解决的复杂 WCF 配置要好得多。而不是在 WCF 服务中烘焙此验证，我们可以简单地定义一个装饰器类，以确保每个命令都经过验证，如下所示：

```
public class ValidationCommandHandlerDecorator<TCommand>
    : ICommandHandler<TCommand>
{
    private ICommandHandler<TCommand> decoratedHandler;

    public ValidationCommandHandlerDecorator(
        ICommandHandler<TCommand> decoratedHandler)
    {
        this.decoratedHandler = decoratedHandler;
    }

    public void Handle(TCommand command)
    {
        // Throws a ValidationException if invalid.
        Validator.Validate(command);

        this.decoratedHandler.Handle(command);
    }
} 
```

这个`ValidationCommandHandlerDecorator<T>`装饰器可以被任何类型的应用程序使用；不仅是 WCF。由于默认情况下 WCF 不会处理任何 throwed `ValidationException`，因此您可以为 WCF 定义一个特殊的装饰器：

```
public class WcfFaultsCommandHandlerDecorator<TCommand>
    : ICommandHandler<TCommand>
{
    private ICommandHandler<TCommand> decoratedHandler;

    public WcfFaultsCommandHandlerDecorator(
        ICommandHandler<TCommand> decoratedHandler)
    {
        this.decoratedHandler = decoratedHandler;
    }

    public void Handle(TCommand command)
    {
        try
        {
            this.decoratedHandler.Handle(command);
        }
        catch (ValidationException ex)
        {
            // Allows WCF to communicate the validation 
            // exception back to the client.
            throw new FaultException<ValidationResults>(
                ex.ValidationResults);
        }
    }
} 
```

在不使用 DI 容器的情况下，可以创建一个新的命令处理程序，如下所示：

```
ICommandHandler<MoveCustomerCommand> handler = 
    new WcfFaultsCommandHandlerDecorator<MoveCustomerCommand>(
        new ValidationCommandHandlerDecorator<MoveCustomerCommand>(
            // the real thing
            new MoveCustomerCommandHandler()
        )
    );

handler.Handle(command); 
```

如果您想了解有关此类设计的更多信息，请阅读以下文章：

*   [同时......在我的架构的指挥方面](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)
*   [编写高度可维护的 WCF 服务](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=95)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-25T00:04:43.887

尝试让您的 LogMessageBehavior 也使用 BehaviorExtensionElement 作为其基类，那么您应该能够执行以下操作：

```
public override Type BehaviorType
{
    get { return this.GetType(); }
}

protected override object CreateBehavior()
{
    return this;
} 
```

# list - 如何对列表中的元素使用递归？

> ID：13541215
> 
> 赞同：2
> 
> 时间：2012-11-24T12:30:05.803
> 
> 标签：list, recursion, lisp, scheme, compare

我正在尝试在列表中使用递归，我需要遍历所有元素。这是我的代码：

```
(define compare
  (lambda (ls pred?)
    (if (null? list)
        #f
        (pred? (list-ref ls (- (length ls) 2)) (list-ref ls (- (length ls) 1)))))) 
```

但它只适用于最后两个元素。结果应该是这样的：

```
(compare '(1 2 3 4 5) <) -> #t
(compare '(1 2 8 4 5) <) -> #f 
```

你知道我应该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T12:42:01.120

您*没有*在代码中的任何地方使用递归。事实上，它有错误，我认为你没有彻底测试过它。例如：

*   `if`条件应该是`(null? ls)`
*   在 Scheme 中遍历列表时，使用`list-ref`不是要走的路，因为通常你想使用递归，，，`car`等等`cdr`。
*   同样，递归调用在哪里？`compare`应该在某个时候调用！

我相信这是您的意图，它不是递归的，但它是实现该过程的最简单方法：

```
(define (compare ls pred?)
  (apply pred? ls)) 
```

因为这看起来像家庭作业，所以我只能给你一些从头开始解决问题的提示，而不使用`apply`. 填空：

```
(define (compare ls pred?)
  (if <???>                    ; special case: if the list is empty
      <???>                    ; then return true
      (let loop ((prev <???>)  ; general case, take 1st element
                 (ls   <???>)) ; and take the rest of the list
        (cond (<???>           ; again: if the list is empty
               <???>)          ; then return true
              (<???>           ; if pred? is false for `prev` and current element
               <???>)          ; then return false
              (else            ; otherwise advance the recursion
               (loop <???> <???>)))))) ; pass the new `prev` and the rest of the list 
```

Notice that I used a named `let` for implementing the recursion, so `loop` is the recursive procedure here: you can see that `loop` is being called inside `loop`. Alternatively you could've defined a helper procedure. I had to do this for taking into account the special case where the list is initially empty.

对于一般情况，递归的工作方式如下：需要两个参数，`prev`存储列表中的前一个元素和列表`ls`的其余部分。在遍历的每一点，我们检查前一个元素和当前元素的谓词是否为假——如果是这样，那么我们返回假。如果不是，我们继续使用新`prev`的（当前元素）和列表的其余部分进行递归。我们一直这样下去，直到列表为空，然后我们才返回 true。

# javascript - 仅对 JavaScript 中的字段进行字符串化

> ID：13541218
> 
> 赞同：0
> 
> 时间：2012-11-24T12:30:22.667
> 
> 标签：javascript

我希望在 JSON.Stringify 传递一个对象时，它会检查它是否有一个像“val”这样的字段，用于仅对那个字段进行字符串化，否则对所有内容进行字符串化。

是否可以将 JSON.Stringify 更改为仅确定的字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:46:05.903

You need to watch out for falsy values:

```
function my_json_stringify(obj) {
  return JSON.stringify(obj.hasOwnProperty("val") ? obj.val : obj);
} 
```

Otherwise, it is going to provide wrong results for things like

```
{
    val: ""
} 
```

You may need to include some cross-browser solution for `hasOwnProperty` [**as shown here**](https://stackoverflow.com/a/136411/383124).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T12:36:56.423

这很简单：

```
function my_json_stringify(obj) {
  return JSON.stringify("val" in obj ? obj.val : obj);
}

console.log(my_json_stringify({ a: 1, b: 2})); // => {"a":1,"b":2}
console.log(my_json_stringify({ val: { a : 3, b: 4 }, other: 5}));
  // => {"a":3,"b":4} 
```

您通常不得修改系统功能。这是个非常糟糕的主意。但是如果你必须这样做，它可以这样做：

```
JSON.original_stringify = JSON.stringify;

JSON.stringify = function(obj) {
  return JSON.original_stringify(obj.val ? obj.val : obj);
} 
```

至少，它可以在 Firefox 中运行。但我不知道它是否适用于任何其他 JS 实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T12:37:24.057

你可以使用一种`replacer`方法。

```
var myObj = {a:1,b:2,c:3,d:4,e:5}
   ,myObjStr = JSON.stringify(myObj,censor);

//=> myObjStr now: "{"a":1,"b":2,"c":3}"

function censor(key,val){
  return !key ? val : val>3 ? undefined : val;
} 
```

如果我正确理解了您的问题，则在您的情况下，您可以使用以下内容：

```
var myObj = {a:{val:1},b:{val:2},c:3,d:null,e:'noval'}
   ,myObjStr = JSON.stringify(
                       myObj,
                       function(key,val){ 
                         return !key 
                                ? val 
                                : val && val.val 
                                  ? JSON.stringify(val) 
                                  : undefined;
                       });
 //=> myObjStr: {"a":"{\"val\":1}","b":"{\"val\":2}"} 
```

[**也可以看看**](https://developer.mozilla.org/en-US/docs/Using_native_JSON#The_replacer_parameter)

# php - 将值从一个 PHP 会话传递到另一个

> ID：13541220
> 
> 赞同：2
> 
> 时间：2012-11-24T12:30:35.633
> 
> 标签：php, session, session-variables

我正在开发一个具有多个角色、管理员、教师和学生的应用程序。他们每个人都根据自己的角色对网站有独特的看法。管理员的仪表板与教员的仪表板不同，因此，他们在登录后会被重定向到不同的页面。

现在，管理员可以启动某些操作，例如接受申请。当管理员从他的仪表板向学生发送一封电子邮件，他们现在可以发送应用程序时，我希望他们的仪表板进行适当的修改，即现在可以看到发送应用程序的额外选项。

到目前为止，我一直在处理`$_SESSION`在同一会话中跨页面发送数据的变量。但是现在我希望将此信息存储在某个地方，以便在学生登录时，可以看到该额外选项。什么似乎是做到这一点的最佳方法？我的申请将至少有 2-3 种这样的情况——接受提交、要求教员做出偏好等，这一切都取决于管理员何时启动此操作的决定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T12:34:08.793

您不需要“将值从一个会话传递到另一个会话”。

> 当管理员从他的仪表板向学生发送他们现在可以发送应用程序的电子邮件时，我希望他们的仪表板得到适当的修改

您只需要更改应用程序中的某些状态，即数据库。

在仪表板读取该状态后，它归结为一个简单的测试：

```
if (!$user_already_applied) {
    if ($applications_open) {
        // display application form
    }
    else {

    }
}
else {
   // whatever you want to happen...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T12:40:32.230

**$_SESSION**是一个超全局变量，每个用户只能访问一个会话实例，您必须创建一个基于角色的系统，对于每个角色，您可以提及每个用户使用自己的帐户时可以访问的功能类型那么只有这些功能/页面可供他们使用

# java - hibernate：如何在 xml 中创建复合外键？

> ID：13541221
> 
> 赞同：0
> 
> 时间：2012-11-24T12:30:42.267
> 
> 标签：java, hibernate, hibernate-mapping

我有一个`Event`包含复合主键（开始日期和结束日期）的类。

一个`EventPlanning`类拥有一个`Set`这样的`Event`对象，并且必须使用带有 XML 的 hibernate 来持久化它们。我可以为具有公共主键的类执行此操作：

```
<!-- EventPlanning xml -->
....
<id name="id" column="id">
<generator class="native" />
</id>
<property name="name" column="name" type="string" update="false" />

<set name="events" table="events" cascade="all">
    <key column="event_id">   // ###### here! ######
    </key>
    <one-to-many class="myPackage.Event" />
</set>
... 
```

但我不知道这如何与复合键一起使用..

用以下代码替换`<key column="event_id">`不起作用：

```
<key>
    <property column="start_date" />
    <property column="end_date" />
</key> 
```

如果有人能告诉我正确的语法，我会很高兴！:)

事件 xml 如下所示：

```
<class name="myPackage.Even" table="events">

        <composite-id>
            <key-property name="startDate" column="start_date" type="date" />
            <key-property name="endDate" column="end_date" type="date" />
        </composite-id>

        <property name="signinDeadline" column="signin_deadline"
            type="date" />
        <property name="confirmationDeadline" column="confirmation_deadline"
            type="date" />

        <set name="participants" table="participants" cascade="all">
            <key column="event_id">
            </key>
            <one-to-many class="myPackage.Participants" />
        </set>

    </class> 
```

提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T12:45:03.787

Something like this works for me:

```
<class name="YourClass" table="your_table" ...>
  <composite-id name="compositeId" class="DoubleDate">
     <key-property name="start_date" column="start_date"/>
     <key-property name="end_date" column="end_date"/>
  </composite-id>
  ...
 </class>

public class DoubleDate implements Serializable {
   private Date start_date, end_date;
   public DoubleDate() {
   }
   // setters, getters
}

public class YourClass {
   private DoubleDate compositeId;
   // public no args ctr, getters, setters, etc
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:32:47.640

在使用 JPA 和 Hibernate 工作了更长时间之后，我只想说您根本不应该使用复合主键。缓存使用 id 作为指向缓存值的键、数据检索方法（例如`get`并`load`期望 id 作为参数等）。通过 id 字段获得的优势可以抵消它所需的额外空间。

# objective-c - 将 ARC 转换为非 ARC

> ID：13541223
> 
> 赞同：4
> 
> 时间：2012-11-24T12:31:07.703
> 
> 标签：objective-c, xcode, cocoa, automatic-ref-counting

我一直在为 10.6+ OS X 64 位系统开发一个使用 ARC 技术的项目。

但现在程序必须支持 32 位 10.6 OS X 系统，但在 32 位 CPU 上 ARC 不起作用。

如果我只是关闭 ARC 并尝试为 32 位编译它会导致很多错误。

将 ARC 程序转换为手动内存管理程序的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T18:29:05.620

32 位 OS X 10.6 支持垃圾回收。将 ARC 代码转换为 GC 代码相当简单，反之亦然，例如，在某些情况下，ARC 需要适当的桥接转换，而 GC 需要 NSMakeCollectible，您可以将它们封装在宏中。

如果您使用宏，您可以测试 ARC 和 GC 的编译器设置并根据它们有条件地定义宏 - 更改编译器设置并在 ARC 和 GC 之间切换代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T12:41:32.067

根据需要浏览您的代码和`retain`/`release`对象。您将需要查看对象的每个分配，并查看何时需要释放它。您还需要查看应该自动发布的内容以及是否/何时需要创建自己的`autorelease pools`和`drain`它们。如果您想正确执行，这不是可以自动化的。

你也可以考虑两者都做。有一个支持不使用 ARC 的 32 位目标和一个支持的 64 位目标。这将是很多工作，但可能不会比转换多多少。它将导致更大的二进制文件（可能是 1.5 倍，具体取决于代码与资源项的比率）。

查看[这个 SO](https://stackoverflow.com/questions/7865423/mac-app-store-giving-up-32-bit-support-in-favor-for-arc-will-existing-users-of) question 的第一个答案以获得更好的解释。

# ajax - ASP.NET MVC：如何在服务器端处理后显示成功确认消息

> ID：13541225
> 
> 赞同：36
> 
> 时间：2012-11-24T12:31:36.733
> 
> 标签：ajax, asp.net-mvc

我需要在 ASP.NET MVC 应用程序中显示确认数据库更新成功的消息。目前，应用程序仅在发生错误时显示消息（使用 ValidationSummary 助手）。如果操作成功，应用程序当前会重定向到导航中的合适点。

目标是：

*   以适当的方式显示确认消息
*   最大限度地减少阅读消息后继续执行所需的用户操作
*   避免额外的帖子/往返来显示消息
*   最大限度地减少开发工作和在应用程序的多个点插入消息的风险

我的偏好是在提交按钮附近显示某种工具提示类型的消息，然后是删除消息并在成功后继续现有重定向的机制。

这似乎建议使用 Ajax 调用而不是现有的 HTTP POST 来提交表单。我该怎么办？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-11-25T10:47:35.553

我会用`TempData["key"]`

然而，这就像`ViewData["key"]`下一个 HttpRequest 的数据仍然存在，并在此之后由 asp.net 自动处理

所以你可以这样做。

**控制器动作**

```
[HttpPost]
public ActionResult SomePostAction(SomeViewModel vm)
{
   if(ModelState.IsValid) // Is User Input Valid?
   {
       try
       {
           CommitData();
           TempData["UserMessage"] = new MessageVM() { CssClassName = "alert-sucess", Title = "Success!", Message = "Operation Done." };
           return RedirectToAction("Success");
       }
       catch(Exception e)
       {
           TempData["UserMessage"] =  new MessageVM() { CssClassName = "alert-error", Title = "Error!", Message = "Operation Failed." };
           return RedirectToAction("Error");
       }

   }

   return View(vm); // Return View Model with model state errors
} 
```

**_Layout.cshtml**

```
<!DOCTYPE html>
   <html>
     <head>

     </head>
     <body>
      @if(TempData["UserMessage"] != null)
      { 
          var message = (MessageVM)TempData["UserMessage"];
          <div class="alert @message.CssClassName">
               <strong>@message.Title</strong> 
               @message.Message
          </div>
      }
          @RenderBody()
     </body>
</html> 
```

更多信息： http: [//www.devcurry.com/2012/05/what-is-aspnet-mvc-tempdata.html](http://www.devcurry.com/2012/05/what-is-aspnet-mvc-tempdata.html)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-25T07:21:17.080

在成功操作时，您只需将成功消息描述存储到 ViewBag 中，如下所示

```
ViewBag.successMessage="Success" 
```

然后在视图中检查 ViewBag 值是否为空？通过 javascript，如果不是 null，则在 Div 中显示消息

```
if('@ViewBag.successMessage'!="")
{
   $('#divSuccessMessage').show();
} 
else
{
  $('#divSuccessMessage').hide();
} 
```

页面加载默认隐藏 div

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T12:39:46.753

以下链接可能会对您有所帮助（发布链接，因为它需要更好的解释）：

[http://msdn.microsoft.com/en-us/magazine/ff797575.aspx](http://msdn.microsoft.com/en-us/magazine/ff797575.aspx)

[http://ofps.oreilly.com/titles/9781449320317/ch_AJAX.html](http://ofps.oreilly.com/titles/9781449320317/ch_AJAX.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-02T22:14:22.430

正如其他人所提到的，[`TempData`](https://msdn.microsoft.com/en-us/library/system.web.mvc.controllerbase.tempdata(v=vs.118).aspx)它是最直接的使用选项之一。在我看来，它在常规 ASP.NET 中的主要缺点是它使用会话存储来存储其内容。这意味着您需要做额外的工作才能让它在网络场上运行，或者您需要首先打开会话。

`TempData`是一个基于字符串的字典，你可以在里面放任何东西，并且默认情况下只在以后的任何请求中取出一次。在打电话之前，`RedirectToAction()`您设置您的消息，并在下一个请求时检查消息并显示它们。通过检索消息，它们会在请求结束时自动删除。

作为替代方案，您可以使用 cookie 在两个请求之间传输消息。本质上，您可以推出自己的解决方案，也可以实现自定义，通过 cookie[`ITempDataProvider`](https://msdn.microsoft.com/en-us/library/system.web.mvc.itempdataprovider(v=vs.118).aspx)传输内容。`TempData`鉴于消息很短，因此对性能的影响很小。请注意，您需要正确保护 cookie。

我遇到了同样的问题，并为它创建了一个名为**[FlashMessage](https://github.com/Vereyon/FlashMessage)**的解决方案。它在[NuGet](https://www.nuget.org/packages/Vereyon.Web.FlashMessage)上可用。用法很简单：您只需在调用之前排队一条消息`RedirectToAction()`，如下所示：

```
FlashMessage.Confirmation("Your message");
return RedirectToAction("AdminUsers", "Admin"); 
```

在您看来，您包含以下语句来呈现任何先前排队的消息：

```
@Html.RenderFlashMessages() 
```

# asp.net-mvc - Resharper 7.1 关于使用命名空间的智能感知错误

> ID：13541226
> 
> 赞同：0
> 
> 时间：2012-11-24T12:32:00.157
> 
> 标签：asp.net-mvc, visual-studio-2012, resharper

我有 - Windows 8 - Visual Studio 2012 - resharper 7.1

我使用 .NET 4.5 处理 ASP .NET MVC 4.0

所以我在命名空间Core.Helpers中有类“Navigator”，我在剃刀视图中使用它 ![在此处输入图像描述](../Images/0c5bb8723910e525231ae4f08bd438ae.png)

正如你所看到的，Resharper 告诉我们使用是多余的。

![在此处输入图像描述](../Images/51f30733b75bb978823bc053d8257036.png)

当我使用 Resharper 删除时没有显示任何错误，但项目构建失败

# c++ - 如何解析网络流量的十六进制码

> ID：13541227
> 
> 赞同：3
> 
> 时间：2012-11-24T12:32:02.643
> 
> 标签：c++, networking, tcp, hex

首先，感谢 Stack Overflow 社区。我在这里找到了很多有能力的答案，所以我会尝试问我自己的问题。

我有一个 WinPcap 示例程序，它将我的网络流量“转储”为 Hexcode。我制作了一个简单的服务器/客户端对，它定期发送一些文本（22 字节）。

**问题：**
在 C++ 中解析这个 Hex-dump 并生成像 Wireshark 或 phd 一样的输出（只是在控制台中）。

在阅读了一些 TCP/IP 参考资料 (1) 之后，我无法确定所有字节的“值”因此例如有 76 个字节，向后阅读：

*   前 22 个字节是我的数据；
*   然后，TCP 头有 20 个；
*   20 用于 IP 标头，然后是其他一些字节，我不知道它们代表什么。我对IP协议不是很了解。

这是一个十六进制示例：

```
08 00 27 b3 23 63 f4 6d 04 2e 68 24 08 00 45 00
00 3e 31 c4 40 00 80 06 45 9e c0 a8 01 03 c0 a8
01 04 0b 27 04 d2 b0 f7 47 61 28 6c fd a7 50 18
fa f0 8e a0 00 00 48 61 6c 6c 6f 20 64 61 73 20
69 73 74 20 65 69 6e 20 54 65 73 74 
```

**问题：**
有人能告诉我这些第一个字节是做什么用的，以及从哪里可以获得网络流量如何组成的（简单）描述？

(1) [TCP 参考](http://www.netfor2.com/tcp.htm)、[IP 参考](http://www.netfor2.com/ip.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:21:40.043

我使用[数据包转储解码](http://code.google.com/p/pdd/)并将其解码为以下数据...`pdd`将十六进制转储转换为您可以在wireshark中使用的东西...然后我从wireshark信息向后工作以分解数据包...

```
Ethernet Header
---------------
08 00 27 b3 23 63 f4 6d 04 2e 68 24 08 00 

IP Header
---------
45 00 00 3e 31 c4 40 00 80 06 45 9e 
c0 a8 01 03 c0 a8 01 04

TCP Header
----------
0b 27 04 d2 b0 f7 47 61 28 6c fd a7 50 18
fa f0 8e a0 00 00

TCP Data Payload
----------------
48 61 6c 6c 6f 20 64 61 73 20
69 73 74 20 65 69 6e 20 54 65 73 74 
```

以及完整的wireshark解码......

```
Frame 1: 76 bytes on wire (608 bits), 76 bytes captured (608 bits)
    WTAP_ENCAP: 1
    Arrival Time: Nov 24, 2012 07:12:54.000000000 Central Standard Time
    [Time shift for this packet: 0.000000000 seconds]
    Epoch Time: 1353762774.000000000 seconds
    [Time delta from previous captured frame: 0.000000000 seconds]
    [Time delta from previous displayed frame: 0.000000000 seconds]
    [Time since reference or first frame: 0.000000000 seconds]
    Frame Number: 1
    Frame Length: 76 bytes (608 bits)
    Capture Length: 76 bytes (608 bits)
    [Frame is marked: False]
    [Frame is ignored: False]
    [Protocols in frame: eth:ip:tcp:data]
Ethernet II, Src: AsustekC_2e:68:24 (f4:6d:04:2e:68:24), Dst: CadmusCo_b3:23:63 (08:00:27:b3:23:63)
    Destination: CadmusCo_b3:23:63 (08:00:27:b3:23:63)
        Address: CadmusCo_b3:23:63 (08:00:27:b3:23:63)
        .... ..0\. .... .... .... .... = LG bit: Globally unique address (factory default)
        .... ...0 .... .... .... .... = IG bit: Individual address (unicast)
    Source: AsustekC_2e:68:24 (f4:6d:04:2e:68:24)
        Address: AsustekC_2e:68:24 (f4:6d:04:2e:68:24)
        .... ..0\. .... .... .... .... = LG bit: Globally unique address (factory default)
        .... ...0 .... .... .... .... = IG bit: Individual address (unicast)
    Type: IP (0x0800)
Internet Protocol Version 4, Src: 192.168.1.3 (192.168.1.3), Dst: 192.168.1.4 (192.168.1.4)
    Version: 4
    Header length: 20 bytes
    Differentiated Services Field: 0x00 (DSCP 0x00: Default; ECN: 0x00: Not-ECT (Not ECN-Capable Transport))
        0000 00.. = Differentiated Services Codepoint: Default (0x00)
        .... ..00 = Explicit Congestion Notification: Not-ECT (Not ECN-Capable Transport) (0x00)
    Total Length: 62
    Identification: 0x31c4 (12740)
    Flags: 0x02 (Don't Fragment)
        0... .... = Reserved bit: Not set
        .1.. .... = Don't fragment: Set
        ..0\. .... = More fragments: Not set
    Fragment offset: 0
    Time to live: 128
    Protocol: TCP (6)
    Header checksum: 0x459e [correct]
        [Good: True]
        [Bad: False]
    Source: 192.168.1.3 (192.168.1.3)
    Destination: 192.168.1.4 (192.168.1.4)
    [Source GeoIP: Unknown]
    [Destination GeoIP: Unknown]
Transmission Control Protocol, Src Port: msrp (2855), Dst Port: search-agent (1234), Seq: 1, Ack: 1, Len: 22
    Source port: msrp (2855)
    Destination port: search-agent (1234)
    [Stream index: 0]
    Sequence number: 1    (relative sequence number)
    [Next sequence number: 23    (relative sequence number)]
    Acknowledgment number: 1    (relative ack number)
    Header length: 20 bytes
    Flags: 0x018 (PSH, ACK)
        000\. .... .... = Reserved: Not set
        ...0 .... .... = Nonce: Not set
        .... 0... .... = Congestion Window Reduced (CWR): Not set
        .... .0.. .... = ECN-Echo: Not set
        .... ..0\. .... = Urgent: Not set
        .... ...1 .... = Acknowledgment: Set
        .... .... 1... = Push: Set
        .... .... .0.. = Reset: Not set
        .... .... ..0\. = Syn: Not set
        .... .... ...0 = Fin: Not set
    Window size value: 64240
    [Calculated window size: 64240]
    [Window size scaling factor: -1 (unknown)]
    Checksum: 0x8ea0 [validation disabled]
        [Good Checksum: False]
        [Bad Checksum: False]
    [SEQ/ACK analysis]
        [Bytes in flight: 22]
Data (22 bytes)

0000  48 61 6c 6c 6f 20 64 61 73 20 69 73 74 20 65 69   Hallo das ist ei
0010  6e 20 54 65 73 74                                 n Test
    Data: 48616c6c6f20646173206973742065696e2054657374
    [Length: 22] 
```

# c# - asp.net 单击后禁用按钮，同时保持 CausesValidation 和 OnClick-Method

> ID：13541229
> 
> 赞同：1
> 
> 时间：2012-11-24T12:32:30.617
> 
> 标签：c#, asp.net

**.aspx**

```
 <asp:TextBox ID="txtInvite" Width="170px" Height="20px" runat="server" 
                          Font-Size="Small" ></asp:TextBox>

                          <AjaxToolkit:TextBoxWatermarkExtender ID="tbexInvite" 
                          runat="server" SkinID="skinTextBoxWatermarkExtender" 
                          TargetControlID="txtInvite" WatermarkText="Email"></AjaxToolkit:TextBoxWatermarkExtender>

                          <asp:RequiredFieldValidator ID="rfvInvite" runat="server" 
                          Display="None" ValidationGroup="Inivitation" SetFocusOnError="true" 
                          ControlToValidate="txtInvite" ErrorMessage="Enter Email."></asp:RequiredFieldValidator>

                          <asp:RegularExpressionValidator ID="regExpInvite" runat="server" 
                          Display="None" ValidationGroup="Inivitation" SetFocusOnError="true" 
                          ValidationExpression="\s*\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*\s*" 
                          ControlToValidate="txtInvite" ErrorMessage="Invalid Email Format."></asp:RegularExpressionValidator>

 <div  class="ButtonLogin" style="margin-top:-27px;margin-right:143px;_margin-right:105px;">
                        <asp:UpdatePanel ID="UpdatePanel1" runat="server" >
                          <ContentTemplate>
                            <asp:Button ID="btnInvite" runat="server" CssClass="cssLoginButton blue" Text="Invite" ToolTip="Invite" ValidationGroup="Inivitation" CausesValidation="true" onclick="btnInvite_Click" />

                          </ContentTemplate>
                       </asp:UpdatePanel>
                 </div>
                      <asp:UpdateProgress ID="UpdateProgress1" runat="server" AssociatedUpdatePanelID="UpdatePanel1" DisplayAfter="0">
                           <ProgressTemplate>
                                  <asp:Image ID="Image1" ImageUrl="~/App_Themes/Lifetrons/images/progressbar.gif" AlternateText="Processing" runat="server" />
                           </ProgressTemplate>
                      </asp:UpdateProgress> 
```

页面加载代码

**。CS**

```
this.btnInvite.Attributes.Add("onclick", "this.disabled=true;" + Page.ClientScript.GetPostBackEventReference(this.btnInvite, "").ToString()); 
```

我想在单击它并保持验证和 Onlick 方法后禁用按钮。我指的是[这个问题](https://stackoverflow.com/questions/8521253/disable-button-after-click-whilst-maintaining-causesvalidation-and-an-onclick-me)，我的问题和这个问题一样，但我还没有解决我的问题。我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T22:52:06.783

无需处理您的代码隐藏 Page_Load 事件。在您的按钮控件中，只需添加以下代码段：

```
OnClientClick="if(Page_ClientValidate('Inivitation')){this.disabled=true;}" 
```

这样你的按钮看起来像

```
<asp:Button ID="btnInvite" runat="server" CssClass="cssLoginButton blue" Text="Invite"
ToolTip="Invite" ValidationGroup="Inivitation" CausesValidation="true"
onclick="btnInvite_Click" OnClientClick="if(Page_ClientValidate('Inivitation')){this.disabled=true;}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:36:49.827

您应该能够使用 Button_Click 方法禁用该按钮。使您的第一行如下所示：

```
Button.Enabled = False; 
```

不过这种方法有问题。如果页面加载太快或代码冻结，它不会正确禁用按钮。如果验证失败或超时，请记住在方法结束时重新启用按钮。

您可以尝试的另一种方法是使用 CSS 隐藏它。我是这个的忠实粉丝，因为它总是有效并且非常简单。您需要一种像 jQuery 这样的技术，您可以在其中动态添加类。您可以使用 jQuery 中的 AddClass 和 RemoveClass API 在运行时添加/删除 CSS 类。看看这里。 [http://jqueryui.com/addClass/](http://jqueryui.com/addClass/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-06T09:47:32.433

你可以像这样使用

```
<asp:Button ID="btnInvite" runat="server" CssClass="cssLoginButton blue" Text="Invite" ToolTip="Invite" ValidationGroup="Inivitation" CausesValidation="true" UseSubmitBehavior = False"onclick="btnInvite_Click" /> 
```

# c++ - 如何折叠 STL 向量的子向量？

> ID：13541243
> 
> 赞同：2
> 
> 时间：2012-11-24T12:34:09.397
> 
> 标签：c++, algorithm, stl, vector

给定一个数字向量，如何将其连续的子向量折叠成一个较小的向量？当然，使用 STL 算法。

例如折叠向量 {1,2,3,4,5,6,7}，子向量大小为 3，求和运算应该得到 {1+4+7,2+5,3+6}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:17:21.473

这似乎可以解决问题。可以进一步模板化以支持除添加之外的操作。

```
#include <vector>
#include <algorithm>
#include <functional>
using namespace std;

template <typename T>
std::vector<T> foldSubVectors(const std::vector<T>& v, unsigned int foldSize)
{
    std::vector<T> result (foldSize, 0);

    unsigned int i = 0;
    for (i = 0; i + foldSize <= v.size(); i += foldSize)
        std::transform(result.begin(), result.end(), v.begin() + i,
                       result.begin(), std::plus<T>());
    if (i < v.size())
        std::transform(result.begin(), result.begin() + (v.size() - i),
                       result.begin() + i, result.begin(), std::plus<T>());

    return result;
} 
```

# iphone - Nsfilemanager 错误

> ID：13541244
> 
> 赞同：0
> 
> 时间：2012-11-24T12:34:17.400
> 
> 标签：iphone, ios, nsfilemanager

我认为这`availableDate`部分工作不正常？？

```
NSFileManager *filey = [NSFileHandle fileHandleForReadingAtPath:savedTextMsg];

    NSString *tMessage=[[NSString alloc] initWithData:[filey availableData] encoding:NSUTF8StringEncoding]; 
```

No visible `@interface`for`NSFileManager`声明选择器`availableData`是错误消息。这到底是什么意思？谢谢垫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:36:36.257

`-fileHandleForReadingAtPath:`返回 an `NSFileHandler`，因此您需要将第一行更改为

```
NSFileHandler *filey = [NSFileHandle fileHandleForReadingAtPath:savedTextMsg]; 
```

出现错误消息是因为您声明`filey`为 的实例`NSFileManager`，而该类未声明方法`-availableData`。

# batch-file - windows cURL cmd 和多行

> ID：13541247
> 
> 赞同：3
> 
> 时间：2012-11-24T12:35:01.553
> 
> 标签：batch-file, cmd

我已经为 Windows 安装了 cURL 命令行。

现在我想将此 cURL 用于 REST api (redmine)。

我想创建的最基本的脚本是推送一个新的“过去”。但问题是，过去可以包含多行文本。

为了创造一个新的过去，我使用：

```
curl -k -s -H "X-Redmine-API-Key: %API_KEY%" --data-urlencode "paste[text]=%TEXT%" %URL% 
```

但问题是当 %TEXT% 由多行组成时，windows cmd 失败。

前任：

```
curl -k -s -H "X-Redmine-API-Key: XXXXXX" --data-urlencode "paste[text]=ST_METHOD_POST',    'POST',    true);
define('HTTP_REQUEST_METHOD_PUT',     'PUT',     true);
define('HTTP_REQUEST_METHOD_DELETE',  'DELETE',  true);" "https://etc" 
```

并且 cmd 在第一个换行符之后停止......

我尝试在运行 cmd 之前解析 TEXT，方法是在行尾添加 ^ 以模拟多行 win cmd 但不起作用...

* * *

**更新1：**

我试试

```
curl -k -s -H "X-Redmine-API-Key: %API_KEY%" --data-urlencode "paste[text]@tmp.txt" %URL% 
```

其中 tmp.txt 等于

```
hello world 
```

但请求被转换为

```
{"paste":{"id":xxx,"author_id":xxx,"project_id":xxx,"title":"Paste #xxx","text":" 
■h\u0000e\u0000l\u0000l\u0000o\u0000 \u0000w\u0000o\u0000r\u0000l\u0000d\u0000",
"created_on":"2012-11-26T09:24:15Z","updated_on":"2012-11-26T09:24:15Z"}} 
```

最后的结果不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-20T16:11:12.183

这是在 Windows 上发出多行 SSL POST curl 请求的完美方法（它也适用于批处理/cmd 文件）：

```
curl -i -k -X POST -H "Content-Type: text/xml" -d             ^
"^<?xml version=\"1.0\" encoding=\"UTF-8\" ?^>                ^
    ^<Transaction^>                                           ^
        ^<SomeParam1^>AD6084-01^</SomeParam1^>                ^
        ^<Password^>SomePassW0rd^</Password^>                 ^
        ^<Transaction_Type^>00^</Transaction_Type^>           ^
        ^<CardHoldersName^>John Smith^</CardHoldersName^>     ^
        ^<DollarAmount^>9.97^</DollarAmount^>                 ^
        ^<Card_Number^>4111111111111111^</Card_Number^>       ^
        ^<Expiry_Date^>1118^</Expiry_Date^>                   ^
        ^<VerificationStr2^>123^</VerificationStr2^>          ^
        ^<CVD_Presence_Ind^>1^</CVD_Presence_Ind^>            ^
        ^<Reference_No^>Some Reference Text^</Reference_No^>  ^
        ^<Client_Email^>john@smith.com^</Client_Email^>       ^
        ^<Client_IP^>123.4.56.7^</Client_IP^>                 ^
        ^<Tax1Amount^>^</Tax1Amount^>                         ^
        ^<Tax2Amount^>^</Tax2Amount^>                         ^
    ^</Transaction^>                                          ^
" "https://example.com/transaction" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T00:49:25.167

Windows 环境变量不支持多行字符串。也许您可以将文本（包括前导`paste[text]=`）写入文件并使用

```
curl --data-urlencode data@FILE ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T11:35:01.100

要成功地将换行符传递给另一个命令，您应该使用延迟扩展而不是百分比扩展。

试试看

```
setlocal EnableDelayedExpansion
set LF=^

set "text=ST_METHOD_POST',    'POST',    true);"
set "text=!text!!LF!define('HTTP_REQUEST_METHOD_PUT',     'PUT',     true);"
set "text=!text!!LF!define('HTTP_REQUEST_METHOD_DELETE',  'DELETE',  true);"
echo ----
echo !text!
echo ----
curl -k -s -H "X-Redmine-API-Key: %API_KEY%" --data-urlencode "paste[text]=!TEXT!" !URL! 
```

如果`text`确实包含换行符，则应该可以。

# c# - 使用 itext sharp 在现有 pdf 上创建按钮

> ID：13541248
> 
> 赞同：1
> 
> 时间：2012-11-24T12:35:03.280
> 
> 标签：c#, visual-studio-2010, itextsharp

我已经尝试了很长时间，但没有成功abc.pdf”。

我正在使用 itextsharp，C# VS 2010 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:28:10.250

我能找到的最接近的解决方案如下所示。

```
static void AddPushbuttonField(string inputFile, iTextSharp.text.Rectangle buttonPosition, string buttonName, string outputFile)
{
    using (PdfStamper stamper = new PdfStamper(new PdfReader(inputFile), File.Create(outputFile)))
    {
        PushbuttonField buttonField = new PushbuttonField(stamper.Writer, buttonPosition, buttonName);

        stamper.AddAnnotation(buttonField.Field, 1);
        stamper.Close();
    }
} 
```

这来自这里，但没有被列为解决方案。代码看起来不错，根据我对 itextsharp 的经验，我认为这可以解决问题。

来源： [使用 iTextSharp 在 pdf 文件中添加按钮](https://stackoverflow.com/questions/9193145/adding-button-in-a-pdf-file-using-itextsharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-30T12:48:12.933

```
Rectangle _rect;
                        _rect = new Rectangle(50, 100, 100, 100);
                        PushbuttonField button = new PushbuttonField(writer, _rect, "button");
                        PdfAnnotation widget = button.Field;
                        button.BackgroundColor = new GrayColor(0.75f);
                        button.BorderColor = GrayColor.GRAYBLACK;
                        button.BorderWidth = 1;
                        button.BorderStyle = PdfBorderDictionary.STYLE_BEVELED;
                        button.TextColor = GrayColor.GRAYBLACK;
                        button.FontSize = 11;
                        button.Text = "Text";
                        button.Layout = PushbuttonField.LAYOUT_ICON_LEFT_LABEL_RIGHT;
                        button.ScaleIcon = PushbuttonField.SCALE_ICON_ALWAYS;
                        button.ProportionalIcon = true;
                        button.IconHorizontalAdjustment = 0; 
```

# javascript - 复选框的多维数组？

> ID：13541254
> 
> 赞同：4
> 
> 时间：2012-11-24T12:36:04.923
> 
> 标签：javascript, html, forms

> **可能重复：**
> [在javascript中获取复选框多维数组](https://stackoverflow.com/questions/9479574/fetching-checkbox-multidimensional-array-in-javascript)

是否可以实现多维复选框数组？

例如

```
 <input type='checkbox' name='question[0][]' value='0'>
     <input type='checkbox' name='question[0][]' value='1'>
     <input type='checkbox' name='question[0][]' value='2'>

     <input type='checkbox' name='question[1][]' value='0'>
     <input type='checkbox' name='question[1][]' value='1'>
     <input type='checkbox' name='question[1][]' value='2'>

     <input type='checkbox' name='question[2][]' value='0'>
     <input type='checkbox' name='question[2][]' value='1'>
     <input type='checkbox' name='question[2][]' value='2'> 
```

如果这是可能的，您将如何确定是否在 javascript 中选中了复选框？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T15:21:13.293

那么可以选择一个特定的复选框。

您可以在 name 属性上进行选择，`question[x][]`然后遍历这些属性以获取它们的每个检查值。

使用 jQuery 的示例：

```
var checkedBoxes = {0: [], 1: [], 2: []};
$("input[name='question[0][]']").each(function(){
    checkedBoxes[0].push(this.checked);
});
//then do the same for 1 and 2

//after everything:
console.log(checkedBoxes); //a multidimesional array of checked boxes 
```

或者让它更*漂亮*：

```
var checkedBoxes = {0: [], 1: [], 2: []};
for(index in checkedBoxes) {
    $("input[name='question[" + index + "][]']").each(function(){
        checkedBoxes[index].push(this.checked);
    });
}
//after everything:
console.log(checkedBoxes); //a multidimesional array of checked boxes 
```

小提琴：http: [//jsfiddle.net/maniator/XA8XV/](http://jsfiddle.net/maniator/XA8XV/)

# jquery - jQuery ajax 和“when”函数

> ID：13541260
> 
> 赞同：6
> 
> 时间：2012-11-24T12:36:45.457
> 
> 标签：jquery, ajax, promise

我有一些（*可以说是 5 个*`jQuery.ajax`）ajax 请求，我使用函数同时运行这些请求。

现在我想同步和汇总他们的结果，我使用`jQuery.when`函数来实现这一点。

我的问题是，`$.when`一旦其中一个请求失败，就会立即返回，即使其他请求成功，也会阻止它们返回。

如何同步并从我的所有 ajax 请求（*那些失败的和成功的*）中获取所有结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:16:37.587

您可以定义一个、两个或三个更新函数（取决于您想要做什么）来获取相应承诺（ajax 回调）的响应：

```
function bindPromises(updateSuccess, updateFail, updateAnyway) {
    var arrPromises = [];

    // automate the promise retrieval if you want, that's up to you.
    arrPromises[0] = ajaxRequest1();
    arrPromises[1] = ajaxRequest2();
    arrPromises[2] = ajaxRequest3();
    arrPromises[3] = ajaxRequest4();
    arrPromises[4] = ajaxRequest5();

    for(var j = 0; j < arrPromises.length; j++) {
        arrPromises[j].then( updateSuccess, updateFail, updateAnyway );
    }
} 
```

或者，如果您想进一步自动化：

```
function bindPromises(arrayOfAjaxCalls, updateSuccess, updateFail, updateAnyway) {
    var arrPromises = [];

    for(var i = 0; i < arrayOfAjaxCalls.length; i++) {
        arrPromises[i] = (arrayOfAjaxCalls[i])();
        arrPromises[i].then( updateSuccess, updateFail, updateAnyway );
    }
} 
```

如果您不熟悉 Promises，我想向您推荐一篇涵盖该主题的精彩文章：[Understanding jQuery.Deferred and Promise](http://joseoncode.com/2011/09/26/a-walkthrough-jquery-deferred-and-promise/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:49:24.043

工作演示：http: [//jsbin.com/ocawoj/4/edit](http://jsbin.com/ocawoj/4/edit)

```
function waitForAllPromisesToFinish () {
    var i,
        responses = [],
        deferred = $.Deferred(),
        helpers = {
            addToResponses: function (index, data) {
                responses[index] = data;

                var i = 0,
                    isAnyNull = false;

                for (i = 0; i < responses.length; i++) {
                    if (responses[i] === null) {
                        isAnyNull = true;
                        break;
                    } 
                }

                if (isAnyNull === false) {
                    deferred.resolve(responses);
                }
            },
            setupPromise: function (promise, index) {
                promise.always(function () {
                    var args = Array.prototype.slice.call(arguments);
                    helpers.addToResponses(index, args);
                });
            }
        },
        ajaxPromises = Array.prototype.slice.call(arguments);

    for (i = 0; i < ajaxPromises.length; i++) {
        responses[i] = null;
    }

    for (i = 0; i < ajaxPromises.length; i++) {
        helpers.setupPromise(ajaxPromises[i], i);
    }

    return deferred.promise();
} 
```

该函数返回一个承诺。您附加了一个与您提供给 $.when() 的处理程序略有不同的完成处理程序。该函数跟踪每个 ajax 承诺的响应。每当它发现所有 ajax Promise 都返回了数据，无论是成功还是失败，它都会解决这个 Promise。

可能有更有效的方法来实现相同的目标，尽管这是我首先想到的。

# xaml - XAML 中的图像固定尺寸

> ID：13541264
> 
> 赞同：1
> 
> 时间：2012-11-24T12:37:12.320
> 
> 标签：xaml, windows-8, microsoft-metro, winrt-xaml, frontend

我正在尝试为一些（不同尺寸的）图像提供相同的尺寸。我所有的图像都应该是 90x258 (w*h)，但不知何故我无法让它工作。

这是我的代码：

```
<StackPanel Orientation="Horizontal">
    <Border BorderThickness="4,0,0,0" BorderBrush="BlanchedAlmond">
        <Image x:Name="Image" Source="{Binding Image}" Width="90" Height="258" />
    </Border>

    <StackPanel Orientation="Vertical" Width="164">
        <TextBlock TextWrapping="Wrap" Style="{StaticResource ItemTextStyle}" Text="{Binding Title}" Margin="10,0"/>
        <TextBlock TextWrapping="Wrap" Style="{StaticResource CaptionTextStyle}" Text="{Binding Authors}" Margin="10"/>
    </StackPanel>
</StackPanel> 
```

我玩弄了`Stretch`图像的属性，但无论我选择什么，图像都不会是 90x258。

使用默认`Uniform`拉伸时，它会保持纵横比（我不希望这样），当我选择`None`图像时，它会以其原始尺寸显示，`UniformToFill`并且`Fill`会使图像如此之大，以至于实际上只有一小部分显示在图像容器。

这是一个例子：

![在此处输入图像描述](../Images/94f6276b13c2556bbc4d15365e0172e4.png)

我希望它以 90x258 显示本书的完整封面：

![在此处输入图像描述](../Images/6d00e69367b28dd091b01a66e41f015a.png)

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T00:20:31.437

尝试将高度设置为自动，将拉伸设置为填充

```
<StackPanel Orientation="Horizontal">
    <Border BorderThickness="4,0,0,0" BorderBrush="DodgerBlue">
        <Image x:Name="Image" Source="{Binding Image}" HorizontalAlignment="Left" Width="94" Stretch="Fill" />
    </Border>

    <StackPanel Orientation="Vertical" Width="164">
        <TextBlock TextWrapping="Wrap" Style="{StaticResource ItemTextStyle}" Text="{Binding Title}" Margin="10,0"/>
        <TextBlock TextWrapping="Wrap" Style="{StaticResource CaptionTextStyle}" Text="{Binding Authors}" Margin="10"/>
    </StackPanel>
</StackPanel> 
```

# c# - 以编程方式向网站服务器发送信息

> ID：13541266
> 
> 赞同：-1
> 
> 时间：2012-11-24T12:37:12.743
> 
> 标签：c#, web, contact-form

如果这是一个愚蠢的问题，我对任何与网络相关的东西都没有什么经验，所以很抱歉。

我有一个带有联系表格的 Wordpress 网站，用户可以使用该表格从该网站向我发送消息。用户填写表格，然后将其转换为电子邮件发送给我。

我想从我的 c# 桌面应用程序中获得类似的功能。换句话说，我正在寻找一种方法来以编程方式调用我网站上的联系表格，或者将信息发送到我的网站，它将转换为电子邮件并直接发送给我。

我应该研究哪些一般概念？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:56:12.667

输入到 Web 表单中的信息可能会使用 HTTP POST 方法发送回 Web 服务器。本质上，输入到 Web 表单中的数据被转换为名称值对并发送到 WordPress 应用程序。有关 HTTP POST 的更多信息：[HTTP POST（维基百科）](http://en.wikipedia.org/wiki/POST_%28HTTP%29)

要在 C# 应用程序中执行相同操作，您需要以类似的方式将数据格式化为 POST，然后查看使用 HttpWebRequest 类。此 stackoverflow 线程显示了一个示例：[带有 POST 的 HTTP 请求](https://stackoverflow.com/questions/4015324/http-request-with-post)。如果您将信息发布到网页使用的同一 URL，则服务器应生成电子邮件。

还要注意的是，如果 WordPress 应用程序要求您在提交信息之前登录，那么您需要在 C# 应用程序中包含代码以使用 WordPress 应用程序进行身份验证。

我希望这有帮助！

# mysql - 此更新模式如何对索引执行？

> ID：13541269
> 
> 赞同：0
> 
> 时间：2012-11-24T12:37:27.330
> 
> 标签：mysql, sql

我已经看到一些研究比较了索引如何处理单调递增值（例如索引当前时间戳的列）和随机值（索引访问令牌的列）上的插入/更新负载。而那个。前者要快得多。

对于每个用户，文档总是单调增加的索引（用户，文档）怎么样？例如，

```
 (user, document)
 0, 0
 0, 1
89, 0
0, 2
89, 1 
```

该索引如何执行插入和更新？它会比随机插入更快吗？我希望所有查询始终包括用户。有没有更好的方法来索引这些？

这种插入模式是否被明确研究过？

# jquery - 使用 jquery 的灯箱

> ID：13541273
> 
> 赞同：1
> 
> 时间：2012-11-24T12:38:05.397
> 
> 标签：jquery, html, css, internet-explorer-6, lightbox

如何在单击按钮时使用 jquery 在灯箱中动态显示 div？[我想在这个网站](http://www.g2o.in)的灯箱中显示感谢信息我试过了，但 IE6 不支持它。请给我一个有效的插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T12:45:49.860

插件：

1.  [花式盒子网](http://fancybox.net/)
2.  [jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)

# c - 无用条件下的变量修改

> ID：13541274
> 
> 赞同：6
> 
> 时间：2012-11-24T12:38:12.853
> 
> 标签：c, variables

`foo == 13`如果为假，此代码是否具有明确定义的行为？

```
if (foo == 13 && ++bar > 42)
{
    ...
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-24T12:39:53.213

是的。如果第一个条件为假，则永远不会评估第二个条件。

请参阅[避免执行第二个表达式的副作用](http://en.wikipedia.org/wiki/Short-circuit_evaluation#Avoiding_the_execution_of_second_expression.27s_side_effects)。

# php - 如何从 PHP 启动 jQuery Overlay 并使用`rel` attr？

> ID：13541275
> 
> 赞同：1
> 
> 时间：2012-11-24T12:38:14.210
> 
> 标签：php, jquery, overlay, launch

我需要在两种（称为三种）情况下启动 jQuery Overlay：

1.  从 HTML 按钮（使用`rel`attr.）
2.  从 PHP 调用时
3.  (2a) （保持打开状态）在 $_POST 提交之后。

对于（1）和（2）我试过这个：

```
//my js func
function triggerOverlay(elem){

    if(!elem){
        elem = "button[rel]";
        load = false;
    }else{
        load = true;
    }

    $(elem).overlay({
        top         : 'center',
        closeOnClick: false   ,
        load        : load   ,
        speed       : 0,
    });
};

//call from html file
<script type="text/javascript">
    $(document).ready(function() {
    <?php
//I'm calling Launch::init(); from where I need to launch it, and it sets self::$open_overlay = TRUE;
    if(Launch::$open_overlay){
        echo 'var elem = "#orderOverlay";'."\r\n";
    }
    ?>
        if(!elem){
           var elem = false;
        }
        triggerOverlay(elem);
    });
</script> 
```

这个问题是 var **elem**在我调用 PHP 后会阻止使用按钮`Launch::init()`。所以，我需要另一种方法，它可以让我同时使用手动和自动启动 jQuery Overlay。

*然后，我将处理步骤 (3)-> 在提交表单后重新加载页面时，我将发送与 (2) 相同的命令。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:21:34.877

假设您使用`jQuery tools`插件进行叠加，则有一些示例和文档可用于以编程方式管理叠加。查看`Scripting API`文档页面和演示`Opening overlays programmatically`

您可以使用以下方法在表单提交处理程序或元素单击处理程序中打开覆盖：

```
 $(selector).overlay().load(); 
```

参考：http: [//jquerytools.org/documentation/overlay/index.html](http://jquerytools.org/documentation/overlay/index.html)

如果您没有使用`jQuery tools`，请查看您正在使用的插件的 API

# c++ - Lua 捕获异常

> ID：13541276
> 
> 赞同：0
> 
> 时间：2012-11-24T12:38:34.710
> 
> 标签：c++, error-handling, lua

我正在使用 Lua（和 C++）进行编码。我想捕获异常并将它们打印到控制台中。之后`lua_atpanic`无法正常工作（程序无论如何都退出了）。我想使用例外。

这是我的编辑部分`luaconf.h`：

```
/* C++ exceptions */
#define LUAI_THROW(L,c) throw(c)
#define LUAI_TRY(L,c,a) try { a } catch(...) \
{ if ((c)->status == 0) (c)->status = -1; }
#define luai_jmpbuf int  /* dummy variable */ 
```

这是`init.lua`加载的：

```
int init = luaL_loadfile(L, "lua/init.lua");
if(init == 0)
{
    printf("[LUA] Included lua/init.lua\n");
    init = lua_pcall(L, 0, LUA_MULTRET, 0);
} 
```

所以现在我想，在使用 C++ 异常时，我会将该代码编辑为以下内容：

```
try {
    int init = luaL_loadfile(L, "lua/init.lua");

    if(init == 0)
    {
        printf("[LUA] Included lua/init.lua\n");
        init = lua_pcall(L, 0, LUA_MULTRET, 0);
    }

    // Error Reporting
    if(init != 0) {
        printf("[LUA] Exception:\n");
        printf(lua_tostring(L, -1));
        printf("\n\n");
        lua_pop(L, 1);
    } else {
        lua_getglobal(L, "Init");
        lua_call(L, 0, 0);
    }
} catch(...)
{
    MessageBox(NULL, "Hi", "Hio", NULL);
} 
```

只是看看有没有什么事情发生。但什么也没有发生。（Lua 错误是调用一个`nil`值）

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T13:20:08.220

从[这里](http://pgl.yoyo.org/luai/i/lua_atpanic)您可以看到，`lua_atpanic`除非您从恐慌函数中进行长跳转，否则它将始终退出应用程序。

从[这里](http://pgl.yoyo.org/luai/i/lua_pcall)你可以看到，`lua_pcall(L, 0, LUA_MULTRET, 0)`当你不给它一个堆栈位置（errfunc 为 0）时，调用会将错误消息推送到堆栈。

由于 Lua 是一个 C 库，它不使用异常（即 C++ 异常），所以你永远不会`catch`从 Lua 代码中获得这样的野兽。但是，您的代码可能会引发异常。为此，您必须将 Lua 库编译为 C++。

进一步阅读：

[从 Lua 调用函数时如何处理 C++ 异常？](https://stackoverflow.com/questions/4615890/how-to-handle-c-exceptions-when-calling-functions-from-lua)和

[除了避免'extern C'并获得'C++异常'之外，将Lua编译为C++有什么好处？](https://stackoverflow.com/questions/8400016/what-is-the-benefit-to-compile-lua-as-c-other-than-avoid-extern-c-and-get-c)

# python-3.x - 如何根据python中的舍入值比较两个字典？

> ID：13541278
> 
> 赞同：0
> 
> 时间：2012-11-24T12:38:54.290
> 
> 标签：python-3.x

我需要检查两个字典是否相等。如果四舍五入到小数点后 6 位的值相等，则程序必须说它们相等。例如，以下两个字典是相等的

```
{'A': 0.00025037208557341116} 
```

和

```
{'A': 0.000250372085573415} 
```

谁能建议我如何做到这一点？我的字典很大（超过 8000 个条目），我需要多次访问这些值来进行其他计算。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T12:54:32.923

`dict`在迭代生成第二个密钥时测试每个密钥。从您要比较的字典中查找键/值对很便宜（线性成本），并在找到它们时将值四舍五入。

您实际上是在执行集合差异来测试键的相等性，这至少需要对最小集合进行完整循环。如果您已经需要循环生成其中一个 dicts，那么您将处于优势，因为这将为您提供最快确定相等性的最短*路径*。

要在设定的容差范围内测试两个浮点数是否相同，请参阅[在 Python 中比较浮点数是否相等的最佳方法是什么？](https://stackoverflow.com/questions/5595425/what-is-the-best-way-to-compare-floats-for-almost-equality-in-python).

# java - 为什么我不能有 classcastexception？

> ID：13541281
> 
> 赞同：0
> 
> 时间：2012-11-24T12:39:34.447
> 
> 标签：java

为什么我不能有 classcastexception？E 在示例中表示 C，不是吗？B 不是 C，我认为我的演员表必须只适用于编译器。我的错误在哪里？

```
public class A{
public static void main(String...s){
    Monitor<C> m = new Monitor<C>(); 
    C arg2 = new C();
    B d = m.f(arg2);
    System.out.println(d);
    }
}
class B extends A{}
class C extends B{}
class Monitor<E extends B>{
public E f(E E){
    return (E) new B();//Why this place didn't give me ClassCastException?
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T12:47:26.350

Read the tutorial about generics: [http://docs.oracle.com/javase/tutorial/java/generics/](http://docs.oracle.com/javase/tutorial/java/generics/)

Because of type erasure you cannot cast to E, see [http://docs.oracle.com/javase/tutorial/java/generics/restrictions.html](http://docs.oracle.com/javase/tutorial/java/generics/restrictions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T12:51:42.037

This is because of type erasure in generics. Since you have generic type `<E extends B>` statement `return (E) new B()` is compiled into `return (B) new B()` so you have not got `ClassCastException`.

# csv - 用于读取 CSV 的 shell 脚本缺少第一行

> ID：13541283
> 
> 赞同：0
> 
> 时间：2012-11-24T12:39:44.070
> 
> 标签：csv, sh

我正在使用以下内容：

```
#!/bin/sh

export IFS=","

cat myfile.csv | while read a b c d e f g h i j
do
#example do
echo "a=$a"
echo "b=$b:"
echo "c=$c:"
echo "d=$d:"
echo "e=$e:"
echo "f=$f:"
echo "g=$g:"
echo "h=$h:"
echo "i=$i:"
echo "j=$j:"
done 
```

从`CSV`文件中读取变量。它工作得很好，只是它似乎错过了文件的第一行，这是为什么呢？我也可以将其更改为捕获第一行吗？

# php - Fuelphp相关限制

> ID：13541286
> 
> 赞同：1
> 
> 时间：2012-11-24T12:39:50.280
> 
> 标签：php, mysql, limit, fuelphp

我目前正在制作一个故事板，我在那里上传图片来讲述一个故事。

所以问题是我只想限制相关查询。

故事板与图像有`has_many`关系。在故事板出现的列表中，我只想显示第一张图片，当有人点击它时，它会显示全部，显示全部很好，但我可以只限制我视图中的相关图片。

我完全对它感到困惑，因为我在论坛上阅读了很多关于它的信息，尝试了可能的变化，限制被忽略了，或者我得到了错误

所以这是我的代码

控制器

```
$stories = Model_Storyboard::find('all', array('related' => array('storyboardimage')));

$this->template->title = "Sotry Board | " . Config::get('site_name');
$this->template->content = View::forge('storyboard/index', array('stories' => $stories)); 
```

那么我怎样才能限制`storyboardimage`显示每个故事板的第一张图片呢？

对不起，如果我要求太多，但如果有人能给我一个工作示例，我会非常高兴，因为我尝试了很多变化，但没有任何效果......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T14:58:19.213

您可以将条件添加到关系上，即`where`,`order_by`等`limit`。

例如（注意这是未经测试的）

```
$stories = Model_Storyboard::find('all', array(
    'related' => array(
        'storyboardimage'   =>  array(
            'limit' =>  1,
            'order_by'  =>  array(
                'field_indicative_of_first_image' => 'desc'
            ),
        )
    )
)); 
```

在上面的示例中，我添加了`field_indicative_of_first_image`其中简单的意思是将其替换为可用于获取第一张图像的列。例如，这可能是一`created_at`列或一`weight`列`sort_order`。在不知道您的数据库架构的情况下，我无法告诉您您需要哪个。

# java - TCP 服务器 Java 与 PHP

> ID：13541295
> 
> 赞同：1
> 
> 时间：2012-11-24T12:40:50.230
> 
> 标签：java, php, tcp

JAVA代码：

```
import java.io.*;
import java.net.*;

class Server {
   public static void main(String args[]) {
      try {
         ServerSocket srvr = new ServerSocket(51);
         Socket skt = srvr.accept();
         System.out.print("Server has connected!\n");
         PrintWriter out = 
                 new PrintWriter(skt.getOutputStream(), true);
         BufferedReader in = 
                 new BufferedReader(new InputStreamReader(skt.getInputStream()));
         if(in.readLine() == "xFF"){
             out.print("OK");
         }
         in.close();
         out.close();
         skt.close();
         srvr.close();
      }
      catch(Exception e) {
         System.out.print("Whoops! It didn't work!\n");
      }
   }
} 
```

PHP代码：

```
<?php
    $con = fsockopen("127.0.0.1", 51, $errno, $errstr, 10);
    fwrite($con, "xFF");
    if(fread($con, 256) == "OK"){
        // Its Works
    }
?> 
```

PHP 代码返回：致命错误：第 7 行 C:\xampp\htdocs\index.php 中的最大执行时间超过 60 秒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:47:09.917

`if(in.readLine() == "xFF")`=> 这将永远阻塞，因为您没有在 PHP 脚本中发送换行符。因此，您永远不会从您的 Java 应用程序中发送任何内容，并且 fread 将永远不会读取任何内容。`fwrite($con, "xFF\n");`应该做的伎俩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T12:43:24.780

如果我猜对了，您正在尝试使用 PHP 实现“TCP-Server”。这是不可能的，你认为是这样的：

通常，PHP 脚本将在 60 秒后终止。但是您可以通过 .htaccess 文件、php.ini 或使用 php 函数来覆盖此行为。

**.htaccess**

```
<IfModule mod_php5.c>
php_value max_execution_time 500
</IfModule> 
```

**php.ini**

寻找`max_execution_time`与增加值的线。

**PHP**

```
set_time_limit(0); 
```

但是我建议不要在 PHP 中实现服务器。PHP 脚本应该简单地快速传递一些数据并退出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T12:48:43.410

您的脚本**超过**了 60 秒的最大执行时间，像这样将其增加到 300 秒或更多秒

```
<?php
    ini_set('max_execution_time', 300); //max execution time set to 300 seconds
    $con = fsockopen("127.0.0.1", 51, $errno, $errstr, 10);
    fwrite($con, "xFF");
    if(fread($con, 256) == "OK"){
        // Its Works
    }
?> 
```

# jquery - 通过 Sinatra 控制器将 Haml 视图加载到 Ajax 请求的布局中

> ID：13541296
> 
> 赞同：2
> 
> 时间：2012-11-24T12:40:56.597
> 
> 标签：jquery, ajax, json, sinatra, haml

我正在我的页面中实现实时搜索功能。我有以下简化的 sinatra 控制器

```
get '/search_item/:for' do
//do some search stuff
haml :search_item,:layout => (request.xhr? ? false : :layout),
                  :locals => {  :found_items => queried_items,
                                :current_user => current_user,
                                } 
end 
```

然后我有一个带有输入字段的 layout.haml 文件

```
%input(type="text" id="search_query" name="search_query"  size="15" value="") 
```

和两个 div

```
#content
    = yield

#results(style="display=none") 
```

现在开始我的问题我需要一个 jquery/javascript 函数来发送 xhr 或 json 请求，使用 sinatra 控制器中的输入生成 search_item 视图，然后应该在布局#results div 中呈现/加载该视图而不刷新整个页面. 现在我有类似的东西：

```
:javascript
 $(function() {
 $("#search_query").keyup(function(){
    var q = $("#search_query").val();
    if(q != ""){
----------- this is the problem part -------------
    $.get('/search_item/'+q, function(data) {
    $('#results').html(data);})
--------------------------------------------------
    $("#content").css("display","none");
    $("#results").css("display","inline");

    }
    else{
    $("#content").css("display","inline");
    $("#results").css("display","none");
    }}); }); 
```

有没有办法像这样简单地将路由的haml视图加载到div中

```
 var url = "/search_item/"+q;
    $('#results').load(url); 
```

我试过了，但它不起作用..

我没有使用导轨！所以我有三个问题：

1.  如何正确地将 keyup 请求发送到 sinatra 以及如何在那里使用它？
2.  那么如何在不刷新的情况下将 search_item.haml 渲染到 layout.haml #results div 中。
3.  有没有更优雅的方法来做到这一点？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:00:13.337

> 如何正确地将 keyup 请求发送到 sinatra 以及如何在那里使用它？

您需要在您的`$.get()`

> 那么我如何在不刷新的情况下将 search_item.haml 渲染到 layout.haml #results div

首先，您需要将 haml 视图编译为 html（浏览器不支持 haml，但 haml 编译为您已经在做的 html/erb 模板！），然后您最好的方法可能是使用`$('some_selector').append( data_recieved_from_get_call)`, 或`$('some_selector').html( data_recieved_from_get_call)`.

> 有没有更优雅的方法来做到这一点？

我建议检查一下[主干.js](http://backbonejs.org/)，它是一种用于管理单页 UI 的 javascript 框架。

一旦你掌握了它，我建议你检查一下[backbone.marionette.js](http://marionettejs.com/)。你最终只能用主干重新发明轮子，所以一旦你了解主干是如何工作的，这将真正有助于提高工作效率。

最后但同样重要的是，[coffeescript](http://coffeescript.org/)。它更具可读性！

这三件事需要一些时间才能理解，但这是值得的！！

# c# - 使用 LINQ 解析收据 XML

> ID：13541298
> 
> 赞同：0
> 
> 时间：2012-11-24T12:41:17.743
> 
> 标签：c#, xml, linq

我正在开发一个使用店内购买的 Windows 应用商店应用程序。进行购买时，会返回一些 XML。我正在尝试查看用户是否成功购买了该产品。我知道我可以用 LINQ 确定这一点，但我不确定如何编写我的 LINQ 查询。

```
private bool WasProductPurchasedFromStore(string productName)
{
        string data = "<?xml version=\"1.0\" encoding=\"utf-8\"?><Receipt Version=\"1.0\" ReceiptDate=\"2012-11-24T12:22:20Z\" CertificateId=\"\" ReceiptDeviceId=\"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa\"><ProductReceipt Id=\"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb\" AppId=\"MyNamespace.MyApp_t7396xywk1mky\" ProductId=\"Upgrade\" PurchaseDate=\"2012-11-24T12:22:20Z\" ProductType=\"Durable\"  /></Receipt>";
  XDocument xml = XDocument.Parse(data);

  // Return true if the productName is found in the XML.
  // THIS IS WHERE I'M STUCK
  var result = from receipt in xml
               select receipt;

  // Return false if the user did not make the purchase
  return false;
} 
```

如何查询我的 xml 以查看是否存在具有与 in 中的值匹配的属性值的`ProductReceipt`元素？`ProductId``productName`

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:11:41.947

如果你总是知道元素和属性会在那里，试试这样：

```
bool result = xml.Descendants("ProductReceipt")
    .Attributes().Single(x => x.Name == "ProductId")
    .Value == productName; 
```

如果元素和属性可能丢失，您可以执行 SingleOrDefault 并检查每个步骤

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:12:27.393

假设您的产品名称在`AppId`属性中，这就是我要做的

```
private bool WasProductPurchasedFromStore(string productName)
{
    string data = "<?xml version=\"1.0\" encoding=\"utf-8\"?><Receipt Version=\"1.0\" ReceiptDate=\"2012-11-24T12:22:20Z\" CertificateId=\"\" ReceiptDeviceId=\"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa\"><ProductReceipt Id=\"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb\" AppId=\"MyNamespace.MyApp_t7396xywk1mky\" ProductId=\"Upgrade\" PurchaseDate=\"2012-11-24T12:22:20Z\" ProductType=\"Durable\"  /></Receipt>";
    XDocument xml = XDocument.Parse(data);

    return xml.Descendants("ProductReceipt")
        .Any(e => string.Compare(e.Attribute("AppId").Value, productName, StringComparison.InvariantCultureIgnoreCase) == 0);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T13:22:50.930

试试这个：

```
var result = from productReceipt in xml.Root.Elements("ProductReceipt")
                from prodId in productReceipt.Attributes("ProductId")
                where prodId.Value == productName
                select prodId.Value;

return = result.Any(); 
```

`xml.Root`是`Receipt`元素，该`Elements`方法返回具有给定名称的元素序列，并且该`Attributes`方法返回具有给定名称的属性序列。从您提供的 XML 示例中，我不太确定该`ProductId`属性是否包含产品名称。如果不是这样，可以在 LINQ 查询的第二行轻松更改。

# azure-storage - 无法创建 Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener

> ID：13541302
> 
> 赞同：9
> 
> 时间：2012-11-24T12:41:48.477
> 
> 标签：azure-storage, azure-table-storage, azure-diagnostics

在 WCFService WebRole 中使用 Windows Azure 表存储时，尝试通过以下方式创建 CloudStorageAccount：

```
storageAccount = 
CloudStorageAccount.Parse(Microsoft.WindowsAzure.CloudConfigurationManager.GetSetting("[Setting name]")) 
```

获取异常：

> ConfigurationErrorsException “无法创建 Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener，Microsoft.WindowsAzure.Diagnostics，版本 = 1.0.0.0，文化 = 中性，PublicKeyToken = 31bf3856ad364e35。”

MSDN 帮助说 1) Visual Studio 必须以管理员身份运行。2) 角色必须在完全信任下运行（将 .NET 信任级别选项更改为完全信任）。

全部完成，但我仍然有同样的例外。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-11T09:35:22.777

可能导致此错误的一件事是运行 Web 角色本身，而不是运行包含的云项目。如果这是问题所在，您可以通过确保将云项目设置为调试的启动项目而不是 Web 角色来解决它。

运行自行定义 Web 角色的 ASP.NET 项目是可能的，有时也很有用。这比在 Azure Compute Emulator 中运行要快得多。它还可以使您无需运行 VS 提升即可开发您的项目。另外，我发现模拟器往往会导致Visual Studio时不时报出无效的内存访问错误，此时需要重启VS。直接运行 Web 角色可以避免所有这些问题。

但是，有一些事情可以阻止这个工作，你描述的异常是这些问题之一的症状。如果您的 Web 角色`Web.config`包含 Azure 的配置`DiagnosticMonitorTraceListener`（并且 Visual Studio 在您创建 Web 角色时默认添加该配置），那么如果您在模拟器之外运行，则尝试生成跟踪输出的第一件事将因您描述的错误而崩溃。碰巧的是，从中检索设置`CloudConfigurationManager`似乎可以做到这一点。

顺便说一句，这不是特有的`CloudConfigurationManager`。它所做的只是产生一些跟踪输出。VS 将 Web 角色配置为将所有跟踪输出发送到 Azure 诊断侦听器，并且由于该侦听器只能在计算模拟器或实际 Azure 实例中运行，因此尝试生成跟踪输出的第一件事将崩溃。`CloudConfigurationManager`是一个常见的候选，因为它恰好产生跟踪输出，并且通常在角色启动时早期使用。但原则上，任何产生跟踪输出的东西都可能遇到这个异常。

避免这种情况的一种简单方法是从配置文件中删除相关部分。创建新的 Web 角色时，Visual Studio 会添加一个`<system.diagnostics>`部分，用于配置默认跟踪输出以转到 Azure 诊断侦听器。你可以把它注释掉。这将使您能够直接在 Visual Studio 中调试 Web 角色，而无需使用计算模拟器（假设您没有做任何其他取决于处于角色环境中的事情）。

当然，这样做的问题是在 Azure 中运行时您将不再获得任何诊断跟踪。解决这个问题的一种方法是将相关配置移动到`Web.config.Release`文件中（添加必要的`xdt:`属性）。

当您使用本地计算模拟器时，此更改还将停止运行 Azure 诊断跟踪侦听器。（这不是问题，因为跟踪消息仍会出现在调试器中。这只是意味着您不会像实际运行时那样将跟踪的持久副本复制到表存储中。）解决此问题的明显方法似乎要对`Web.config.Debug`（或在模拟器中运行发布版本）进行类似的修改，但有一个障碍：默认情况下，云项目在为模拟器打包时不应用配置文件转换。幸运的是，您可以解决此问题：http: [//blog.hill-it.be/2011/03/07/no-web-config-transformation-in-local-azure/](http://blog.hill-it.be/2011/03/07/no-web-config-transformation-in-local-azure/)展示了如何在计算模拟器中启用转换以进行本地调试。（顺便说一句，直接从 VS 中调试 ASP.NET 项目时，从不应用转换。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:26:22.967

我发现此错误是由您的 web.config 中的错误版本引起的

即，你可能没有 `Version=1.0.0.0`

`Microsoft.WindowsAzure.Diagnostics``1.8.0.0`截至目前的版本

尝试更新到当前版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-30T02:30:24.593

删除 Web.config < add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener 中的行

# iphone - 在 iphone 中使用亚马逊产品广告 API 需要帮助

> ID：13541303
> 
> 赞同：4
> 
> 时间：2012-11-24T12:41:49.973
> 
> 标签：iphone, ios, xcode, ios5, amazon

如何使用亚马逊产品广告 API 在我的 iPhone 应用程序中展示产品？

我有我的亚马逊帐户、密钥和必要的凭据但是，我不知道如何为此创建网络服务以及如何使用 API。

我指的是这个链接：[https](https://affiliate-program.amazon.com/gp/advertising/api/detail/main.html) ://affiliate-program.amazon.com/gp/advertising/api/detail/main.html但没有得到任何明确的想法如何使用它。

1.  如果有任何示例项目或代码将不胜感激。
2.  用户可以通过 iPhone 购买产品，还是只能看到产品详细信息？
3.  亚马逊会允许移动设备这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T09:28:57.163

大家好，我研究了很多，但没有找到适合亚马逊移动设备的产品搜索 API。他们似乎关闭了移动设备中产品广告的 API。

这是一个链接：[http ://www.zdnet.com/blog/apple/how-amazon-killed-delicious-library-for-iphone/4354](http://www.zdnet.com/blog/apple/how-amazon-killed-delicious-library-for-iphone/4354)

他们的官方条件：“未经我们通过此链接请求的明确事先书面批准，您不得在设计或打算与手机或其他手持设备一起使用的任何网站或应用程序上或与之相关的任何产品广告内容中使用任何产品广告内容。” 所以我认为我们必须先获得许可才能使用它。

链接： [https](https://affiliate-program.amazon.com/gp/advertising/api/detail/agreement.html) ://affiliate-program.amazon.com/gp/advertising/api/detail/agreement.html (4.e)

我回答了这个问题，因为我认为有人可能需要这个，如果有人可以找到任何最近的更新或解决方案，请修改或编辑答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-29T09:22:20.043

我写了亚马逊产品广告客户端[https://github.com/m1entus/RWMAmazonProductAdvertisingManager](https://github.com/m1entus/RWMAmazonProductAdvertisingManager)

# c++ - 处理像文件描述符（fstream）这样的套接字描述符？C++/Linux

> ID：13541313
> 
> 赞同：7
> 
> 时间：2012-11-24T12:43:05.827
> 
> 标签：c++, linux, sockets, stream

偶然我发现我可以在套接字描述符上使用读写。我可以以某种方式（ab）使用 fstream 机制将数据输出到套接字描述符中吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-24T15:54:47.180

标准文件流不支持使用文件描述符。然而，I/O 流类使得创建自己的抽象变得相当容易，从而允许创建自己的字符源或目标。魔术类`std::streambuf`的职责是在适当的时候缓冲字符并读取或写入字符。Nicolai Josuttis 的[“C++ 标准库”](https://rads.stackoverflow.com/amzn/click/com/0321623215)详细描述了如何做到这一点（多年前我为 Nico 做出了贡献）。使用套接字进行读取和写入的流缓冲区的简单实现如下所示：

```
#include <algorithm>
#include <iostream>
#include <iterator>
#include <streambuf>
#include <cstddef>
#include <unistd.h>

class fdbuf
    : public std::streambuf
{
private:
    enum { bufsize = 1024 };
    char outbuf_[bufsize];
    char inbuf_[bufsize + 16 - sizeof(int)];
    int  fd_;
public:
    typedef std::streambuf::traits_type traits_type;

    fdbuf(int fd);
    ~fdbuf();
    void open(int fd);
    void close();

protected:
    int overflow(int c);
    int underflow();
    int sync();
};

fdbuf::fdbuf(int fd)
  : fd_(-1) {
    this->open(fd);
}

fdbuf::~fdbuf() {
    this->close();
}

void fdbuf::open(int fd) {
    this->close();
    this->fd_ = fd;
    this->setg(this->inbuf_, this->inbuf_, this->inbuf_);
    this->setp(this->outbuf_, this->outbuf_ + bufsize - 1);
}

void fdbuf::close() {
    if (!(this->fd_ < 0)) {
        this->sync();
        ::close(this->fd_);
    }
}

int fdbuf::overflow(int c) {
    if (!traits_type::eq_int_type(c, traits_type::eof())) {
        *this->pptr() = traits_type::to_char_type(c);
        this->pbump(1);
    }
    return this->sync() == -1
        ? traits_type::eof()
        : traits_type::not_eof(c);
}

int fdbuf::sync() {
    if (this->pbase() != this->pptr()) {
        std::streamsize size(this->pptr() - this->pbase());
        std::streamsize done(::write(this->fd_, this->outbuf_, size));
        // The code below assumes that it is success if the stream made
        // some progress. Depending on the needs it may be more
        // reasonable to consider it a success only if it managed to
        // write the entire buffer and, e.g., loop a couple of times
        // to try achieving this success.
        if (0 < done) {
            std::copy(this->pbase() + done, this->pptr(), this->pbase());
            this->setp(this->pbase(), this->epptr());
            this->pbump(size - done);
        }
    }
    return this->pptr() != this->epptr()? 0: -1;
}

int fdbuf::underflow()
{
    if (this->gptr() == this->egptr()) {
        std::streamsize pback(std::min(this->gptr() - this->eback(),
                                       std::ptrdiff_t(16 - sizeof(int))));
        std::copy(this->egptr() - pback, this->egptr(), this->eback());
        int done(::read(this->fd_, this->eback() + pback, bufsize));
        this->setg(this->eback(),
                   this->eback() + pback,
                   this->eback() + pback + std::max(0, done));
    }
    return this->gptr() == this->egptr()
        ? traits_type::eof()
        : traits_type::to_int_type(*this->gptr());
}

int main()
{
    fdbuf        inbuf(0);
    std::istream in(&inbuf);
    fdbuf        outbuf(1);
    std::ostream out(&outbuf);

    std::copy(std::istreambuf_iterator<char>(in),
              std::istreambuf_iterator<char>(),
              std::ostreambuf_iterator<char>(out));
} 
```

# javascript - 如何使用各自的纬度和经度值计算两个地方之间的距离？

> ID：13541314
> 
> 赞同：1
> 
> 时间：2012-11-24T12:43:09.263
> 
> 标签：javascript, latitude-longitude

我知道这是一个重复的问题，但我不得不问，因为我的代码不起作用。我不知道为什么不。

我的代码：

```
<!DOCTYPE html>
<html>
<head>
<script>
function displayDistance()
{

var R = 6371; // km
var dLat = (23.87284-23.76119).toRad();
var dLon = (90.39603-90.43491).toRad(); 
var a = Math.sin(dLat/2) * Math.sin(dLat/2) + 
        Math.cos(23.76119.toRad()) * Math.cos(23.87284.toRad()) *
        Math.sin(dLon/2) * Math.sin(dLon/2); 
var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
var d = R * c;
document.getElementById("demo").innerHTML=d;
}
</script>
</head>
<body>
<div id="demo"></div>
<button type="button" onclick="displayDistance()">Display Distance</button>

</body>
</html> 
```

但只是没有任何反应。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T12:50:46.073

`toRad` is not a native javascript function. You must declare it before using it.

```
/** Converts numeric degrees to radians */
if (typeof(Number.prototype.toRad) === "undefined") {
  Number.prototype.toRad = function() {
    return this * Math.PI / 180;
  }
} 
```

Code from here : [toRad() Javascript function throwing error](https://stackoverflow.com/questions/5260423/torad-javascript-function-throwing-error)

You can check this jsfiddle : [http://jsfiddle.net/ySsQ3/](http://jsfiddle.net/ySsQ3/)

By the way, you really should put your javascript code at the end of the `body` (and not in the `head`)

# excel - excel行功能：在同一单元格中按顺序增加数字

> ID：13541315
> 
> 赞同：0
> 
> 时间：2012-11-24T12:43:14.437
> 
> 标签：excel, function, excel-formula, rows, worksheet

我在 Excel 电子表格中使用 ROWS 函数来自动增加文本中的数字。我现在使用的公式是这样的：

```
="text"&ROWS(A$1:A1)&"text"&ROWS(A$1:A1)&"text"&ROWS(A$1:A1)&"text"&ROWS(A$1:A1)&"text"&ROWS(A$1:A1)&"text" 
```

产生以下输出：

(CELL A:1) text1text1text1text1text1text

当我向下复制单元格时，数字增加 1，即：

(单元格 A:2) text2text2text2text2text2text

我实际需要的输出是将数字顺序增加 1：

(单元格 A:1) text1text2text3text4text5text

(CELL A:2) text6text7text8text9text10text ...等

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:08:20.913

试试这个版本

`="text"&(ROWS(A$1:A1)-1)*5+1&"text"&(ROWS(A$1:A1)-1)*5+2&"text"&(ROWS(A$1:A1)-1)*5+3&"text"&(ROWS(A$1:A1)-1)*5+4&"text"&(ROWS(A$1:A1)-1)*5+5&"text"`

*5 基于每个单元格 5 个文本值

# cakephp - CakePHP 从本地主机到远程服务器 - 空白页

> ID：13541316
> 
> 赞同：2
> 
> 时间：2012-11-24T12:43:16.357
> 
> 标签：cakephp

我想解决这个问题很长时间了，但到目前为止没有运气，也许有人可以帮助我。

我的计算机（本地主机）上安装了 2.2.2 cakephp，一切正常。但现在我希望同一个项目在远程服务器上在线。我上传了所有内容，设置了 mysql 路径，但在尝试访问该站点时出现空白页。

如果我上传一个新的 cakephp 它可以工作，但我的项目没有。调试设置为默认值，认为应该是 2？我还删除了缓存/tmp 中的文件，但仍然没有错误或任何东西，只是空白页。

任何信息都会有帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:39:48.847

我讨厌这种情况发生:)。通常，如果某处出现错误并且您无法看到它，因为错误已关闭，因此您应该调用 phpinfo() 并查看 display_errors 是否打开。由于 display_errors 是从 php.ini 设置的，因此并非每次都更改调试模式。

不幸的是，如果这是问题所在并且您无权编辑 php.ini 文件，您可能需要要求托管服务提供商更改它并重新启动 php 服务。

你也可以试试这个：error_reporting(E_ALL)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-21T23:48:30.910

我将更改上传到我的 cakephp 网站，发现特定控制器的所有操作都返回了一个空白页面。我发现了错误是什么，并且能够用另一个控制器重现它。

问题是在我的控制器文件的第一行中，我在开始的 php 标记之前有一个空格。

一个空间花了我几个小时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T19:07:50.003

只是上传所有文件不会削减它。确保完成此清单：

1.  首先，检查位于 下的错误日志文件`app/tmp/logs/error.log`，这通常包含一些非常好的指针，可以说明什么是错误的。
2.  *确保您已上传包含正确*详细信息的 app/Config/database.php 文件。本地安装通常有`root`没有密码的用户。在线服务器（显然）没有！
3.  在这种情况下，还要确保您实际上拥有托管服务提供商的数据库（您的托管服务商向您发送了信息，或者您需要使用他们的控制面板自己创建）。
4.  确保您还上传了所有`.htaccess`文件（根目录下的文件 and`/app`和`/app/webroot`），某些 FTP 程序默认不会显示此“隐藏”文件。

如果一切都失败了，请联系您的托管服务提供商以获得进一步的支持，因为他们通常可以访问更详细的服务器日志，这些日志也可以保存线索。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T14:00:21.930

真正的问题只是我在记事本++中使用的编码。我所有的文件都是用 UTF-8 编码的，但它们应该是没有 BOM 的 UTF-8。在我将其更改为没有 BOM 的 UTF-8 后，一切都开始正常工作。

# c# - 忽略字符串中的字符“”

> ID：13541317
> 
> 赞同：2
> 
> 时间：2012-11-24T12:43:21.917
> 
> 标签：c#, string, special-characters

我想要一个能够写入文件的程序：

```
addr_new = serverInfo.REGION_DICT[0][serverNum]["channel"][serverChannel]["ip"] 
```

, 但必须忽略文本中的字符“”

我的结果：Visual Studio 不会忽略字符串中的字符“”，而是需要 IP 等字符串。谢谢帮助

对不起我的英语

有我的程序：

```
 string path = System.IO.Directory.GetCurrentDirectory()+ "logininfo.py";

    string[] lines = {
    "import serverInfo"
    , "serverNum=1"
    , "serverChannel=1"
    , "addr_new = serverInfo.REGION_DICT[0][serverNum]["channel"][serverChannel]["ip"]"};

System.IO.StreamWriter file = new System.IO.StreamWriter(path);
file.WriteLine(lines);

file.Close(); 
```

我差点忘了我想要更多的行，这个程序被修剪了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T12:48:42.900

You can escape those characters with a slash:

```
string[] lines = {
    " import serverInfo" ,
    "serverNum=1" ,
    "serverChannel=1" ,
    "addr_new = serverInfo.REGION_DICT[0][serverNum][\"channel\"][serverChannel][\"ip\"] "}; 
```

or use a [@-quoted string](http://msdn.microsoft.com/en-us/library/362314fe%28v=vs.100%29.aspx) and use `""` instead of `"` like so:

```
string[] lines = {
    " import serverInfo" ,
    "serverNum=1" ,
    "serverChannel=1" ,
    @"addr_new = serverInfo.REGION_DICT[0][serverNum][""channel""][serverChannel][""ip""] "}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T12:47:06.443

You need to [concatenate](http://en.wikipedia.org/wiki/Concatenation) the strings:

```
"addr_new = serverInfo.REGION_DICT[0][serverNum][" + channel + "][serverChannel][" + ip + "]"}; 
```

Or if you wish for "channel" to be used as a string value, use single quotes:

```
"addr_new = serverInfo.REGION_DICT[0][serverNum]['channel'][serverChannel]['ip']"}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T12:49:54.877

Escape the special characters

```
"addr_new = serverInfo.REGION_DICT[0][serverNum][\"channel\"][serverChannel][\"ip\"]" 
```

# android - 关闭所有活动后无法访问数据库

> ID：13541320
> 
> 赞同：1
> 
> 时间：2012-11-24T12:43:34.740
> 
> 标签：android, android-service, android-sqlite

我的 android 应用程序需要每 30 分钟更新一次数据库。我使用它`scheduleAtFixedRate()` 。但问题是一段时间后应用程序关闭并显示错误`connection pool closed`scheduleatfixedrate() 写入服务类。

请任何人建议我定期更新数据库的安全方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:13:32.060

我认为最好的方法是在您的服务和检查打开数据库的方法中创建一个单一的数据库连接。

# html - 如何获取对文档加载到其中的 iframe 的引用？

> ID：13541321
> 
> 赞同：0
> 
> 时间：2012-11-24T12:43:40.163
> 
> 标签：html, dom, iframe

我需要从 iframe 内部获取页面上的 DOM iframe 元素。两个文档都来自同一个域，所以不用担心跨域限制。iframe 内的文档需要在加载它的 iframe 上放置一个偶数侦听器。即使父文档中有多个框架，这也应该有效。

**编辑：**

`window.parent`将获得父文档。现在我需要获取父文档中的 iframe 之一。`window.parent.frames`是这些 iframe 的列表。现在的问题是如何从该列表中获取正确的 iframe。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T12:58:25.013

您可以使用该[`window.frameElement`属性](https://developer.mozilla.org/en-US/docs/DOM/window.frameElement)来获取包含该页面的元素。不过，这仅在 HTML5 中标准化，因此并非所有浏览器都支持。

对于跨浏览器解决方案，您将使用该[`window.parent`属性](https://developer.mozilla.org/en-US/docs/DOM/window.parent)来获取父窗口，然后在其中找到 iframe 元素。您需要一种识别 iframe 的方法，例如元素的 id：

```
var frame = window.parent.document.getElementById('#frame'); 
```

# java - Java如何排序multimap vs？

> ID：13541322
> 
> 赞同：1
> 
> 时间：2012-11-24T12:43:41.350
> 
> 标签：java, sorting, arraylist, multimap

我使用 Guava multimap 来存储来自文本文件的数据。文本文件数据格式如下：

```
p1 10
p2 30
p3 40
p1 20
p2 50
p3 60
..
..

```

第一列是键，第二列是值。我想从最高到最低对分数（值）进行排序，但不知道如何对多图进行排序..或者是否有更好的存储来存储这种数据？

我想到的其他事情是制作两个数组列表，一个用于名称，另一个用于分数，不过

我不知道是否可以链接两个列表。

```
list1 = {p1,p2,p3}
list2 = {10, 20, 30, 40, 50, 60} 
```

p1索引指向10和20。这种事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:47:10.407

You can try something like this:-

```
 public static ImmutableMultimap<Integer, MyObject> indexOnScore(Iterable<MyObject> i) {
  List<MyObject> sorted = Ordering.natural().onResultOf(myObjectToScore())
  .sortedCopy(i);
   return Multimaps.index(sorted, myObjectToScore());
} 
```

Another option might be to create a `TreeMultimap` and use `Ordering.arbitrary()` as the Comparator for the values.

# c++ - C++ optimise away private variable

> ID：13541325
> 
> 赞同：2
> 
> 时间：2012-11-24T12:44:24.440
> 
> 标签：c++

Does ISO C++ (11) permit a private non-static class member variable to be optimised away? This could be detected:

```
class X { int x; };
assert (sizeof(X) >= sizeof(int)); 
```

but I am not aware of a clause that demands the assertion above.

To clarify: (a) Is there a clause in the C++ Standard that ensure the assertion above.

(b) Can anyone think of any other way to detect the elision of x? [offsetof?]

(c) Is the optimisation permitted anyhow, despite (a) and (b)?

I have a feeling the optimisation could be possible if the class is local to a function but not otherwise (but I'd like to have a definitive citation).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:44:32.257

我不认为这是禁止的，但我认为这是不切实际的。

> **§9类[类]**
> 
> **7/**标准布局类是这样的类：
> 
> *   没有非标准布局类（或此类类型的数组）或引用类型的非静态数据成员，
> *   没有虚函数 (10.3) 和虚基类 (10.1)，
> *   对所有非静态数据成员具有相同的访问控制（第 11 条），
> *   没有非标准布局的基类，
> *   要么在派生最多的类中没有非静态数据成员，并且最多有一个具有非静态数据成员的基类，要么没有具有非静态数据成员的基类，并且
> *   没有与第一个非静态数据成员相同类型的基类。 107
> 
> **8/****标准布局结构**是使用 class-key`struct`或 class-key定义的标准布局类`class`。

...因此`class X { int x; };`是标准布局结构。

> **§9.2 类成员 [class.mem]**
> 
> **16/**如果两个标准布局结构（第 9 条）类型具有相同数量的非静态数据成员并且相应的非静态数据成员（按声明顺序）具有布局兼容类型（3.9），则它们是布局兼容的。

...因此`class X { int x; };`与布局兼容`struct Y { int y; };`。

不幸的是，标准中没有正式定义布局兼容。然而，考虑到布局一词的使用，其意图似乎是声明两个布局兼容的类型应该具有相同的底层表示。

因此，要能够删除`x`in `X`one 必须证明所有与*布局兼容的*结构（例如`Y`）都可以进行相同的优化（以保持布局兼容性）。在任何非平凡的程序中，这似乎都......不太可能......

# android - 如何保持基本活动运行？

> ID：13541332
> 
> 赞同：0
> 
> 时间：2012-11-24T12:45:19.417
> 
> 标签：android, android-intent, android-activity

我有一个名为 MainActivity 的活动。我在其中开始了另一项活动（ContentDetails）

```
 public void onItemClick(AdapterView<?> adapterView, View view, int position, long id) {

    Uri contactUri = ContentUris.withAppendedId(People.CONTENT_URI, id);
    Intent intent = new Intent(this, ContactDetails.class);
    intent.setData(contactUri);
    startActivity(intent);

} 
```

在 ContactDetails.java 中，我编写了拨打电话的代码。但是当我结束通话时。它完成所有应用程序而不是重定向到基本活动

以下是 ContactDetails.java 的代码

```
 public class ContactDetails extends Activity{

    TextView nameField = null;
    TextView phoneField = null;
    TextView idField = null;

    final Context context = this;
    private Button button;

    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.details);

        idField = (TextView) findViewById(R.id.contact_id);
        nameField = (TextView) findViewById(R.id.contact_name);
        phoneField = (TextView) findViewById(R.id.contact_phone);

        button = (Button) findViewById(R.id.call_button);

        // add PhoneStateListener
        PhoneCallListener phoneListener = new PhoneCallListener();

        TelephonyManager telephonyManager;

        telephonyManager = (TelephonyManager) this.getSystemService(Context.TELEPHONY_SERVICE);
        telephonyManager.listen(phoneListener,PhoneStateListener.LISTEN_CALL_STATE);

        // add button listener
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Intent callIntent = new Intent(Intent.ACTION_CALL);
                callIntent.setData(Uri.parse("tel:03577899456"));
                startActivity(callIntent);

            }

        });

    }

    @Override
    protected void onStart() {

        super.onStart();

        Cursor cursor = managedQuery(getIntent().getData(), null, null, null, null);
        cursor.moveToFirst();

        //idField.setText(cursor.getString(cursor.getColumnIndex(People._ID)));
        nameField.setText(cursor.getString(cursor.getColumnIndex(People.DISPLAY_NAME)));
        phoneField.setText(cursor.getString(cursor.getColumnIndex(People.NAME)));

    }
    private class PhoneCallListener extends PhoneStateListener {

        private boolean isPhoneCalling = false;

        String LOG_TAG = "LOGGING 123";

        @Override
        public void onCallStateChanged(int state, String incomingNumber) {

            if (TelephonyManager.CALL_STATE_RINGING == state) {
                // phone ringing
                Log.i(LOG_TAG, "RINGING, number: " + incomingNumber);
            }

            if (TelephonyManager.CALL_STATE_OFFHOOK == state) {
                // active
                Log.i(LOG_TAG, "OFFHOOK");

                isPhoneCalling = true;
            }

            if (TelephonyManager.CALL_STATE_IDLE == state) {
                // run when class initial and phone call ended, need detect flag
                // from CALL_STATE_OFFHOOK
                Log.i(LOG_TAG, "IDLE");

                if (isPhoneCalling) {

                    Log.i(LOG_TAG, "restart app");

                    // restart app
                    try{
                    //  Intent intentAndroid = new Intent().setClass(this, ContactList.class);
                    Intent i = getBaseContext().getPackageManager()
                            .getLaunchIntentForPackage(getBaseContext().getPackageName());

                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);
                    }catch (Exception e) {
                        // TODO: handle exception
                    }

                    isPhoneCalling = false;
                }

            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T12:47:13.100

实际上，我认为您必须使用

```
startActivityForResult(callIntent, <RESULT_OK>); 
```

代替

```
startActivity(callIntent); 
```

并在您的**ContactDetails**活动中**覆盖。** `onActivityResult()`

 **试试这个，让我知道会发生什么..

同样从您的代码中，我建议您不要使用标志`i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);`作为清除当前活动状态任务的方法。**

# java - 在 AppWidget 上更改 TextView 的字体大小

> ID：13541335
> 
> 赞同：3
> 
> 时间：2012-11-24T12:45:52.430
> 
> 标签：java, android, widget, android-appwidget

从我的配置活动中，用户可以选择他/她想要的小部件字体大小。我这样设置字体大小：

```
RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget);
views.setFloat(R.id.tvConfigInput, "setTextSize", 25); 
```

但我不知道如何用选定的大小更新小部件

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:58:36.427

您必须使用您的 AppWidgetManager。例如，在 AppWidgetProvider 的 onReceive() 方法中执行以下操作：

```
@Override
public void onReceive(Context context, Intent intent) {
    views = new RemoteViews(context.getPackageName(),
                    R.layout.widget);
    AppWidgetManager mManager = AppWidgetManager.getInstance(context);
    ComponentName cn = new ComponentName(context,YourAppWidgetProvider.class);
    ...
    mManager.updateAppWidget(cn, views);

} 
```

这`YourAppWidgetProvider`是扩展类的名称`AppWidgetProvider`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T12:58:52.260

你所拥有的应该像`setTextSize()`a一样工作`RemotableViewMethod`（至少在当前的源代码中），因此应该与`RemoteViews`.

首先，在 Android 4.2 模拟器上试用您的应用小部件，看看它是否有效。如果是这样，那么答案是`setTextSize()`在 Android 4.2 上可用，在您最初尝试的任何环境中都无法使用，并且应该在它们之间的某个地方可用。

否则，请确保您实际上正在更新应用程序小部件，`AppWidgetManager`使用`updateAppWidget()`.

# c# - Not able to capture "NeedsSize" change event for Lync conversation window

> ID：13541338
> 
> 赞同：0
> 
> 时间：2012-11-24T12:46:29.600
> 
> 标签：c#, lync, lync-2010

I am developing sample application using Lync 2010 SDK. In that application i want to capture Lync IM window resize event.

As I know Lync 2010 SDK do provides API's to capture re-size event for the Lync IM window.

The application is launched successfully and on launching an IM window i do get the Lync Conversation Added event, but after that i don't get resize event for it on resizing the same Lync IM window. Here is the code of sample application. Please review the code and let me know if something is missing.

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using Microsoft.Lync.Model;
using Microsoft.Lync.Model.Conversation;
using Microsoft.Lync.Model.Extensibility;

namespace LyncWpfSample
{
/// <summary>
/// Interaction logic for Window1.xaml
/// </summary>
public partial class Window1 : Window
{
    LyncClient _client = null;

    ConversationManager _conversationManager = null;

    Automation _automation = null;

    public Window1()
    {
        InitializeComponent();

        _client = LyncClient.GetClient();

        _conversationManager = _client.ConversationManager;

        _conversationManager.ConversationAdded += new EventHandler<ConversationManagerEventArgs>(ConversationManager_ConversationAdded);
    }

    void ConversationManager_ConversationAdded(object sender, ConversationManagerEventArgs e)
    {
        Conversation conv = e.Conversation;

        ConversationWindow convWindow = _automation.GetConversationWindow(conv);

        convWindow.NeedsSizeChange += new EventHandler<ConversationWindowNeedsSizeChangeEventArgs>(Conversation_convWindow_NeedsSizeChange);
        convWindow.NeedsAttention+=new EventHandler<ConversationWindowNeedsAttentionEventArgs>(Conversation_convWindowNeedsAttention);

    }

    void Conversation_convWindow_NeedsSizeChange(object sender, ConversationWindowNeedsSizeChangeEventArgs e)
    {
        MessageBox.Show("Conversation Window Size changed");
    }

    void Conversation_convWindowNeedsAttention(object sender, ConversationWindowNeedsAttentionEventArgs e)
    {
        MessageBox.Show("Conversation Window Needs Attention");
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:20:47.170

只有当我们使用 Conversation.Dock（[其他窗口句柄]）将该 IM 窗口停靠到某个其他窗口时，我们才能获得 Lync IM 调整大小事件。

如果我们没有将此 IM 停靠到另一个窗口，我们将不会收到调整大小事件。

# java - 在java中将目录，子目录和文件从一台服务器复制到另一台服务器

> ID：13541346
> 
> 赞同：0
> 
> 时间：2012-11-24T12:47:18.907
> 
> 标签：java

我编写了一个 java 代码来将所有目录和文件从一个位置复制到同一台机器上的另一个位置，并且运行良好。但是，我不确定如何将所有目录和文件从一台服务器复制到另一台服务器。有人可以帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T12:55:55.667

你试过什么了？您当前的逻辑如何？

考虑通过传递目录来通过[文件](http://docs.oracle.com/javase/6/docs/api/java/io/File.html)对象访问目录，例如*C:\Source*。当 Source 位于服务器上并且是网络共享时，您还可以使用*\\server\Source*创建一个 File 对象。

*查看上面链接的File*对象的文档以获取更多信息。不要忘记测试目录是否可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T08:31:28.780

我猜你的 Windows 服务器有 Samba 共享。所以你的目标看起来像这样 \192.168.100.111\share\target_dir

首先确保您对共享文件夹具有正确的读/写权限。然后将共享文件夹映射到驱动器号。你可以看看这个教程：[http](http://compnetworking.about.com/od/windowsxpnetworking/ht/mapnetworkdrive.htm) ://compnetworking.about.com/od/windowsxpnetworking/ht/mapnetworkdrive.htm 你对XP以外的其他版本的做法基本相同。

现在您有了目标共享的驱动器号。所以你的目标看起来像 x:\target_dir

这个目标现在可以在 java File 对象中使用。

此外，您可以使用其他库直接访问 samba 共享或使用其他共享，例如 ftp。

# java - 在Java中搜索文件中的子字符串，返回行和位置

> ID：13541349
> 
> 赞同：0
> 
> 时间：2012-11-24T12:47:46.793
> 
> 标签：java, substring, bufferedreader

我想编写一个程序，它将字符串作为输入，在`java`文件中搜索字符串并输出行和它出现的位置。

我的主要问题是为我的结果创建一个“存储”。我不能使用列表，所以我想用二维数组 [] [] 来解决这个问题。但我不能只为每一行添加一个新的第一级元素，为字符串出现的每个位置添加一个二级元素。

我必须知道已经有多少个字符串来创建数组，不是吗？

我的主要想法：我需要通过读取一行`input.readLine()`并检查`indexOf()`子字符串是否在该行中。如果是，我保存位置 a 并继续搜索，直到它返回 -1。我继续，直到`input.readLine`返回`null`。如果这个概念是正确的，我只需要解决“存储”问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:18:59.993

您可以使用多图。

```
 HashMap<String, List<Integer>> map = new HashMap<String, List<Integer>>();
    ArrayList<Integer> lineAndPosition = new ArrayList<Integer>();
    lineAndPosition.add(1); //line number
    lineAndPosition.add(23); //position number 
    map.put("key", lineAndPosition); 
```

所以每个键都将映射到一个数组，该数组将存储行号和出现的位置。

# java - How to increase Graphics2D text quality?

> ID：13541351
> 
> 赞同：9
> 
> 时间：2012-11-24T12:48:17.317
> 
> 标签：java, rendering, barcode, graphics2d, text-rendering

I have a question concerning printing additional information on barcodes. I am using [http://barbecue.sourceforge.net/](http://barbecue.sourceforge.net/) to create my barcodes.

After I created my barcodes I want to add some additional information. At the moment i do this with the following way! For example:

```
Graphics2D g2d5 = container4Barcode.createGraphics();
g2d5.setBackground(Color.WHITE);
g2d5.clearRect(0, 33, 200, 200);
g2d5.setColor(Color.BLACK);
g2d5.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,
    RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
g2d5.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,
    RenderingHints.VALUE_TEXT_ANTIALIAS_GASP);
g2d5.setFont(new Font("Arial", Font.PLAIN, 8));
g2d5.drawString(barcode, 8, 40);
g2d5.drawString(generateRandomNumber(ekPreis), 57, 40);
String datumResult = datum;
g2d5.drawString(location, 98, 40);
g2d5.drawString(datum.substring(2), 114, 40);
g2d5.dispose(); 
```

The output is in a pdf the following: ![enter image description here](../Images/9570a8bfb951460061d4b85322ddf8be.png)

As you can see is the quality of my text (above and under the barcode) is really bad ... How can I increase the quality of the text to make the text more smoother and not that pixelated?!

(When I print my barcodes, the barcodes look very pixelated ...)

Any tips?

**UPDATE:**

So, I added here the a picture of my latest outcome ... When I print out these barcodes they look horrible! So here is the code what I did:

```
Graphics2D g2d6 = container4Barcode.createGraphics();
g2d6.setColor(Color.black);
g2d6.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,
    RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
g2d6.setFont(new Font("Verdana", Font.BOLD, 7));
g2d6.drawString("FLORETT", 9, 20);
g2d6.drawString("50-521-60", 57, 20);
Graphics2D g2d4 = container4Barcode.createGraphics();
g2d4.setColor(Color.black);
g2d4.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,
    RenderingHints.VALUE_TEXT_ANTIALIAS_ON); 
g2d4.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS, 
    RenderingHints.VALUE_FRACTIONALMETRICS_ON);
g2d4.setFont(new Font("Verdana", Font.BOLD, 11));
g2d4.drawString("SSYYS", 105, 19);
g2d4.dispose(); 
```

With that Code I get the best results! Of course I played with "Metrics, AA_GASP, LCS_HRGB, different fonts (Verdana is the best in my opinion) ..." and a lot more, but some of them I couldn't use, because then my barcode got blurred! So actioally I am forcing the problem that I am unable to improve the quality of my text-quality of the drawstring from graphics2d!

So, I want to ask if there is a possibility to let the "SSYYS" (Font Size 11) and the "FLORETT" (Font Size 7) look much nicer! Is there a possibility in JAVA to draw "smooth" text on an image with a font size less than "12" ? Is there a workaround to to that ? As you can see in the picture the letters "S and Y" look very awful...

**2nd Update:**

Some Example code so far... Please be sure that the following folder exists: C:\TestBarcodes\

Hope I reduced my code to the minimum that you can imagine what my problem is...

```
package generator;

import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.image.BufferedImage;
import java.io.FileOutputStream;
import java.io.IOException;

import net.sourceforge.barbecue.Barcode;
import net.sourceforge.barbecue.BarcodeException;
import net.sourceforge.barbecue.BarcodeFactory;
import net.sourceforge.barbecue.output.OutputException;

import org.apache.pdfbox.exceptions.COSVisitorException;
import org.apache.pdfbox.pdmodel.PDDocument;
import org.apache.pdfbox.pdmodel.PDPage;
import org.apache.pdfbox.pdmodel.edit.PDPageContentStream;
import org.apache.pdfbox.pdmodel.graphics.xobject.PDJpeg;
import org.apache.pdfbox.pdmodel.graphics.xobject.PDXObjectImage;

public class BarcodeGen {

  // sets the picWidth
  private static int picWidth = 149;
  // sets the picHeigth
  private static int picHeigth = 60;

  public static void main(String[] args) 
      throws BarcodeException, OutputException, COSVisitorException, IOException {
    generateBarcode("11138500");
  }

  public static void generateBarcode(String barcode) 
      throws IOException, COSVisitorException, BarcodeException, OutputException {

    Barcode barcode2 = BarcodeFactory.createCode39(barcode, false);
    int gw = barcode2.getWidth();
    // change this to suit if you want higher, default 50
    // barcode2.setBarWidth(50);
    // this sets DPI
    barcode2.setResolution(100);
    // barcode2.setFont(font);
    int gh = barcode2.getHeight();
    // change this if you want a coloured background
    // image = new BufferedImage(t, s, BufferedImage.TYPE_INT_RGB)
    BufferedImage image = new BufferedImage(gw, gh, BufferedImage.TYPE_INT_RGB);

    Graphics2D g2 = (Graphics2D) image.getGraphics();
    // default is black so draw a white box first
    // change type to INT_RGB if you want a coloured background
    g2.setColor(Color.white);
    g2.fillRect(0, 0, gw, gh);
    barcode2.draw(g2, 0, 0);

    // CREATE ADDITIONAL INFORMATION ON BARCODE

    BufferedImage container4Barcode = new BufferedImage(
        picWidth, picHeigth, image.getType());
    Graphics2D g2d = container4Barcode.createGraphics();

    g2d.setBackground(Color.WHITE);
    g2d.clearRect(0, 0, picWidth, picHeigth);
    g2d.setColor(Color.black);
    g2d.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,
        RenderingHints.VALUE_TEXT_ANTIALIAS_LCD_HRGB);
    g2d.drawImage(image, 8, 21, 130, 18, null);
    g2d.dispose();

    Graphics2D g2d6 = container4Barcode.createGraphics();
    g2d6.setColor(Color.black);
    g2d6.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,
        RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
    g2d6.setFont(new Font("Verdana", Font.BOLD, 7));

    g2d6.drawString("FLORETT", 9, 20);
    g2d6.drawString("50-521-60", 57, 20);

    Graphics2D g2d4 = container4Barcode.createGraphics();
    g2d4.setColor(Color.black);
    g2d4.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,
        RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
    g2d4.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS,
        RenderingHints.VALUE_FRACTIONALMETRICS_ON);
    g2d4.setFont(new Font("Verdana", Font.BOLD, 11));
    g2d4.drawString("SSYYS", 105, 19);
    g2d4.dispose();

    // PRINT PDF

    int ver = 782;

    PDDocument doc = new PDDocument();
    PDPage page = new PDPage(PDPage.PAGE_SIZE_A4);
    doc.addPage(page);

    PDXObjectImage image2 = new PDJpeg(doc, container4Barcode);
    PDPageContentStream content = new PDPageContentStream(doc, page);
    content.drawImage(image2, 5, ver);
    content.close();

    doc.save(new FileOutputStream("C:\\TestBarcodes\\barcode.pdf"));

    // opens the pdf file
    Process p = Runtime
        .getRuntime()
        .exec("rundll32 url.dll,FileProtocolHandler C:\\TestBarcodes\\barcode.pdf");
    try {
      p.waitFor();
    } catch (InterruptedException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
    }
  }
} 
```

![enter image description here](../Images/0f528ae093bb875bc85c75e369e4491e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-08T12:00:28.610

如果有人想在这种情况下使用像素图像，而不是矢量，那么**应该放大图像以**获得更好的打印质量：

```
static final int PIXELS_PER_POINT = 4; // 4x 
```

**然后以点**定义所有维度，而不是像素：

```
// Image size in points
static final int IMAGE_WIDTH = 150;
static final int IMAGE_HEIGHT = 60;
// Font size in points
static final int FONT_SIZE = 11; 
```

现在，在进行任何绘图时，始终使用转换为像素的点：

```
static int toPixels(int value) {
    return value * PIXELS_PER_POINT;
}

BufferedImage draw() {
    BufferedImage image = 
        new BufferedImage(toPixels(IMAGE_WIDTH), toPixels(IMAGE_HEIGHT), TYPE_INT_ARGB);
    Graphics2D g = image.createGraphics();
    // <graphics init code goes here>

    Font font = new Font("Arial", Font.PLAIN, toPixels(FONT_SIZE));
    g.setFont(font);
    g.drawString("Grapes", toPixels(5), toPixels(40)); // coordinates are in points

    g.dispose()
    return image;
} 
```

因此，通过这种方法，您可以使用“标准”尺寸进行操作。这种方法对我来说非常适合中低复杂度的图纸。

您可以更进一步并转换`PIXELS_PER_POINT`为参数：`1x`用于普通显示网页上的图像，`2x`用于 Retina 显示和`4x`打印！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-21T15:12:59.873

要修复 Graphics2d 中文本或形状中的锯齿状边缘，您需要设置**RenderingHint**。

```
Graphics2D g2d = bufferedImage.createGraphics();

    g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    g2d.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON); 
```

**解释**

典型的抗锯齿算法通过根据估计的形状的部分像素覆盖率将形状边界的像素的现有颜色与请求的填充油漆混合来工作。

文本抗锯齿提示键。TEXT_ANTIALIASING 提示可以控制文本抗锯齿算法的使用，而与用于形状渲染的选择无关。通常，应用程序可能只想对文本使用抗锯齿，而不对其他形状使用。此外，用于减少文本混叠伪影的算法通常比为一般渲染开发的算法更复杂，因此此提示键提供了额外的值，可以控制某些特定于文本的算法的选择。如果保留在 DEFAULT 状态，此提示通常将遵循常规 KEY_ANTIALIASING 提示键的值。

# webstorm - webstorm 中的 node.js 外部库

> ID：13541358
> 
> 赞同：1
> 
> 时间：2012-11-24T12:49:15.797
> 
> 标签：webstorm

我注意到 webstorm 在项目资源管理器中有一个外部库节点。在那里我看到了 Node.js 0.6.15 以及 Node.js Globals 的一个选项。

两个问题：

1.  我可以让它参考节点 0.8 吗？
2.  Node.js 全局变量有什么用？

外部库是否用于代码完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T00:05:01.550

Node.js 被配置为 WebStorm 中的全局库。如果要使用其他版本，请删除现有库并[按照文档](http://www.jetbrains.com/webstorm/webhelp/node-js-2.html)配置新版本，在配置过程中将添加一个新的全局库。

它用于代码完成和调试模式下的单步执行。

# c# - 如何使扩展 WPF 工具包 ColorPicker 工作？

> ID：13541361
> 
> 赞同：11
> 
> 时间：2012-11-24T12:49:31.000
> 
> 标签：c#, wpf, wpftoolkit, color-picker

我希望能够在我的应用程序中使用这个颜色选择器：

[http://wpftoolkit.codeplex.com/wikipage?title=ColorPicker&referringTitle=Documentation](http://wpftoolkit.codeplex.com/wikipage?title=ColorPicker&referringTitle=Documentation)

我正在使用安装了 .NET 4 的 Visual Studio 2010 Ultimate。我正在使用 C# 和 WPF (XAML) 进行编码。

到目前为止我所做的：

1.  下载并解压 WPFToolkit.Extended.dll
2.  在 Visual Studio 中添加了对它的引用（我可以以某种方式验证吗？）
3.  将此行添加到 MainWindow.xaml.cs：*using Xceed.Wpf.Toolkit;*
4.  将粗线添加到 MainWindow.xaml：

    < 窗口 x:Class="TDDD49Task2.ColorWindow" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006 /xaml" **xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit/"** [...]>

5.  尝试在 MainWindow.xaml 中使用 <xctk:ColorPicker>（错误消息：“*找不到类型 'xctk:ColorPicker'。验证您没有丢失程序集引用并且所有引用的程序集都已构建。* ”）。

6.  谷歌搜索解决方案、教程或示例，但没有取得多大成功。

请解释如何使用扩展 WPF 工具包或为我指明正确的方向。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-24T14:11:08.800

当您不取消阻止程序集时也会发生此错误。

以下是对此的简短说明：

1.  右键单击“WPFToolkit.Extended.dll”。
2.  单击安全部分中的取消阻止。

![在此处输入图像描述](../Images/e5fa44730425541f5aadafa4fb1e1fa9.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-24T13:23:25.377

虽然它对我有用，但`namespace`你包含的内容不正确。`Remove the last backslash at the end`. 它应该是 -

```
xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit" 
```

代替

```
xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit/" 
```

# linux - 想用一个命令完成所有行 - IFS

> ID：13541367
> 
> 赞同：1
> 
> 时间：2012-11-24T12:50:17.100
> 
> 标签：linux, bash

我有一个脚本可以在 /etc/passwd 中恢复一行的 UID，但前提是 UID > 500。这是可行的，但是...我只想用一个命令恢复所有行，但我不知道如果它是可能的。

让我向您展示我的代码：

```
#!/bin/bash
while IFS=: read -r f1 f2 f3 f4 f5 f6 f7
do
  if [ $f3 -gt 500 ]
  then
     echo "$f1:$f2:$f3:$f4:$f5:$f6:$f7"  <<< there is a single command for that ?
  fi
done < /etc/passwd 
```

感谢您的回复:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T12:54:24.893

尝试

```
awk -F: '$3>=500 {print $0}' /etc/passwd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T13:21:25.177

使用数组：

```
#!/bin/bash
while IFS=: read -r -a f; do
  if (( ${f[2]} > 500 )); then
     IFS=: b="${f[*]}"
     echo "$b"
  fi
done < /etc/passwd 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T13:14:42.010

我会将整行读入一个变量，然后在循环内拆分。

```
while read line; do
    old=IFS
    IFS=:
    set -- $line
    IFS=$old
    test $3 -gt 500 || continue
    printf "%s\n" "$line"
done </etc/passwd 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T13:20:23.037

一个bash解决方案：

```
while read  line
do
  arr=(${line//:/ })
  [ ${arr[2]} -gt 500 ] && echo $line
done < /etc/passwd 
```

将整个记录拆分为一个数组并检查包含用户 ID 的第二个索引元素。

# iphone - 使用 NSPredicate 删除对象

> ID：13541371
> 
> 赞同：1
> 
> 时间：2012-11-24T12:51:01.083
> 
> 标签：iphone, objective-c, ios, nsdictionary, nspredicate

我有以下词典，其中包含许多子词典。如何`isChanged = 1`使用从父字典中删除对象`NSPredicate`？

```
{
    "0_496447097042228" =     {
        cellHeight = 437;
        isChanged = 1;
    };
    "100000019882803_193629104095337" =     {
        cellHeight = 145;
        isChanged = 0;
    };
    "100002140902243_561833243831980" =     {
        cellHeight = 114;
        isChanged = 1;
    };
    "100004324964792_129813607172804" =     {
        cellHeight = 112;
        isChanged = 0;
    };
    "100004324964792_129818217172343" =     {
        cellHeight = 127;
        isChanged = 0;
    };
    "100004324964792_129835247170640" =     {
        cellHeight = 127;
        isChanged = 1;
    };
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T16:24:00.363

作为使用 NSPredicate 的简单替代方法，您可以使用内置的 NSDictionary`keysOfEntriesPassingTest:` 这个答案假设“isChanged”是一个 NSString，值 0 或 1 是一个 NSNumber：

```
NSSet *theSet = [dict keysOfEntriesPassingTest:^(id key, id obj, BOOL *stop) {
    return [obj[@"isChanged"] isEqualToNumber: @1];
}]; 
```

返回的集合是通过测试的键列表。从那里，您可以删除所有匹配的内容：

`[dict removeObjectsForKeys:[theSet allObjects]];`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T05:26:49.820

我通过以下方式解决了我的问题：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"isChanged == %d", 1];

NSArray *allObjs = [parentDict.allValues filteredArrayUsingPredicate:predicate];

[allObjs enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    NSMutableArray *keys = [[NSMutableArray alloc] initWithCapacity:0];
    [keys setArray:[parentDict allKeysForObject:obj]];
    [parentDict removeObjectsForKeys:keys];
    [keys release];
}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T16:04:19.470

当您拥有字典数组时，您可以使用 NSPredicate 删除所选类别的数据

这是代码

```
NSString *selectedCategory = @"1";

//filter array by category using predicate
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"isChanged == %@", selectedCategory];

NSArray *filteredArray = [yourAry filteredArrayUsingPredicate:predicate];

[yourAry removeObject:[filteredArray objectAtIndex:0]]; 
```

但是在您的问题中，数据不在数组中，而是在字典中

你的数据应该是这种格式

```
(
 {
     cellHeight = 437;
     isChanged = 1;
 },
 {
     cellHeight = 145;
     isChanged = 0;
 },
 {
     cellHeight = 114;
     isChanged = 1;
 }
 ) 
```

# php - 网站图表的 HTML 解析器

> ID：13541372
> 
> 赞同：-3
> 
> 时间：2012-11-24T12:51:03.387
> 
> 标签：php, html, web

所以，有这个网站，他们有一些关于该网站的统计数据，并且每天都会更新。我想做的是废弃该网站并将这些信息检索到我的网站并将它们放入折线图中。像这些[http://code.google.com/apis/ajax/playground/?type=visualization#line_chart](http://code.google.com/apis/ajax/playground/?type=visualization#line_chart) 或 这些[http://code.google.com/apis/ajax/playground/?type=visualization#image_line_chart](http://code.google.com/apis/ajax/playground/?type=visualization#image_line_chart)唯一的问题是我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:51:34.400

### 获得许可

如果你需要爬取一个远程页面，你应该首先确保你没有做任何非法的事情。我无法就你想做的事情的合法性向你提供咨询，但我可以肯定地说，有些人不喜欢他们的数据被废弃——你真的应该与网站管理员核实一下如果他们对此有任何问题。

### 得到许可了吗？好的...

清除后，考虑使用[DOMDocument](http://php.net/manual/en/class.domdocument.php)类在一系列嵌套对象中创建 DOM 表示，您可以与这些对象进行非常简单的交互：

```
$doc = new DOMDocument();
$doc->loadHTML(file_get_contents("http://foo.com/data/statistics")); 
```

如果您完全熟悉 JavaScript 中的 DOM 遍历和选择方法，那么该`DOMDocument`界面看起来会非常熟悉。为了通过 ID 获取特定元素，您将使用适当的方法：

```
$statistics = $doc->getElementById("statistics"); 
```

并获取*该*`TD`元素中的所有元素：

 *```
$cells = $statistics->getElementsByTagName("td"); 
```

无需过多赘述，您可以继续使用`DOMDocument`该类提供给您的方法来遍历和选择数据。当您到达您正在寻找的实际节点时，您可以轻松地将它们的值保存到一个数组中，然后将该数组输出为带有一些 JavaScript 的字符串以显示 Google 图。

### 对人好点！

缓存此操作的结果是明智的，这样您就不会在每次脚本运行时都访问远程服务器。将输出保存到带有时间戳的本地文件，并检查该时间戳是否过期 - 当它过期时，将其删除，并在其位置创建一个新的缓存结果。

### 这可能是什么样子

这是您的解决方案完成后可能类似于的一个非常基本的实现。请注意，我们*每天最多只访问远程服务器一次*。

```
// Silence errors due to malformed HTML
libxml_use_internal_errors(true);

// This function builds out data out, when necessary
function build_output () {
    // Create a DOMDocument, grab debt-clock HTML
    $doc = new DOMDocument();
    $doc->loadHTML(file_get_contents("http://brillig.com/debt_clock/"));

    // Find element representing total National Debt
    $total = $doc->getElementsByTagName("img")->item(0);
    // Grab value from the alt attribute
    $total = $total->attributes->getNamedItem("alt")->nodeValue;
    // Second paragraph has two more values of interest
    $parag = $doc->getElementsByTagName("p")->item(1);

    // Build out resulting array of data: Natl. Debt, Population, Ind. Debt
    $data = Array(
        "ntl" => str_replace(" ", "", $total),
        "pop" => $parag->getElementsByTagName("b")->item(0)->nodeValue,
        "pay" => $parag->getElementsByTagName("b")->item(1)->nodeValue
    );

    // Return a JSON string of this data
    return json_encode($data);
}

// Most recent cache file (today)
$cache_name = date("Y-m-d");

if (!file_exists($cache_name)) {
    // Today's cache doesn't exist, create it.
    $output = build_output();
    $message = "Fresh: " . $output;
    file_put_contents($cache_name, $output);
} else {
    // Today has already been cached, load it.
    $message = "Cached: " . file_get_contents($cache_name);
}

// Show the user the output
echo $message; 
```

从缓存加载时，上述脚本的输出类似于：

```
Cached: {
    "ntl":"$16,293,644,693,599.87",
    "pop":"313,929,808",
    "pay":"$51,902.19"
} 
```

您现在可以将该 JSON 数据加载到您喜欢的任何服务中，以生成表示其数据的图像。*

# ruby - Ruby: parsing XML containing entities declaration in separate files with Nokogiri

> ID：13541373
> 
> 赞同：1
> 
> 时间：2012-11-24T12:51:05.173
> 
> 标签：ruby, xml, xml-parsing, nokogiri

I have a bunch of XML files that reference entities declared in separate files that look like this:

```
<!ENTITY Seealso           "See also">
<!ENTITY Date              "Date:">
<!ENTITY GettingStarted    "Getting Started">
<!ENTITY InstallAndConfigure "Installation and Configuration">
<!ENTITY Installation      "Installation">
<!ENTITY Features          "Features">
<!ENTITY Security          "Security">
<!-- .... --> 
```

there is no other markup (no `<!DOCTYPE blahblah [` or kind of), just a lots of declarations.

How do i fed them to Nokogiri? I've tried direct parsing, but it throws errors :(

I'm using SAX parser so I thought maybe it can somehow ask user code for entity dereferencing, but i didn't find any callbacks for that :(

So how do I parse such thing?

# silverlight - Hub Tiles 动画“半展开”破碎

> ID：13541376
> 
> 赞同：5
> 
> 时间：2012-11-24T12:51:29.087
> 
> 标签：silverlight, windows-phone-7, xaml

我对 Windows Phone 工具包的中心磁贴有疑问。

当动画状态更改为“半展开”时，我所有的集线器图块都会消失（一半图标+文本可见的图块）。一段时间后，它们的动画状态将更改为不同的状态，并且文本或正确的图像会按照您的预期显示。

它适用于模拟器，但不适用于我的 Lumia 800 和 VS 的 XAML 预览版。在 Win7 x64 上使用 VS 2010 为 WP 7.5 编程。

```
 <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
            <Grid HorizontalAlignment="Stretch" Margin="0,0,0,12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <toolkit:HubTile 
                    Grid.Row="1" 
                    Grid.Column="0"
                    Margin="12,12,0,0"
                    Title="Brew &#13;House"
                    Source=""
                    Tap="HubTile_Tap" 
                    Name="BrewHouseTile">
            </toolkit:HubTile>
            <toolkit:HubTile 
                    Grid.Row="1" 
                    Grid.Column="1" 
                    Margin="12,12,0,0"
                    Title="Hops" 
                    Source="/BrewingApp;component/Images/icon_hops_big.png"
                    Tap="HubTile_Tap" 
                    Name="HopsTile" />
                <toolkit:HubTile 
                    Grid.Row="2" 
                    Grid.Column="0" 
                    Margin="12,12,0,0"
                    Title="Convert &#13;Units" 
                    Tap="HubTile_Tap"
                    Source="/BrewingApp;component/Images/icon_scales_big.png"
                    Name="ConvertersTile" />

              ... more Hub Tiles
            </Grid>
    </Grid> 
```

![集线器图块消失](../Images/ab4e0738a5902910c9f0e9faa32994cb.png) [![Hub Tiles 正确显示](../Images/d8f6bb1234cc08633a8fa69bd84f92e7.png)](https://i.stack.imgur.com/Eog5Q.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T15:29:31.410

这实际上是 Windows Phone 工具包中的一个错误。调整 Hub Tiles 的大小后，将再次计算宽度和高度。此计算使用依赖于 CultureSetting 的 Float.TryParse() 方法。但是，当不设置为 EN-US 时会出现此中断。Codeplex 上有一个快速修复的问题：

[http://phone.codeplex.com/workitem/10602](http://phone.codeplex.com/workitem/10602)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T20:38:15.967

这正是发生在我身上。

要解决该错误：

1.  您需要从这里下载工具包源：http: [//phone.codeplex.com/SourceControl/changeset/view/80797#](http://phone.codeplex.com/SourceControl/changeset/view/80797#)

2.  [按照http://phone.codeplex.com/workitem/10602](http://phone.codeplex.com/workitem/10602)中的说明修改 HubTileConverters.cs

3.  然后编译。dll 文件将位于 Bin ->Debug 或 Bin->Release 中，具体取决于您是在调试模式还是设备模式下编译。

您使用这个新的 dll 修复并完美运行。

# java - 如何在不使用非最终静态变量的情况下从非上下文类获取 SharedPreferences？

> ID：13541378
> 
> 赞同：2
> 
> 时间：2012-11-24T12:52:00.867
> 
> 标签：java, android, sharedpreferences, static-methods, static-members

我需要从一个`A`不扩展任何东西的抽象类中获取对共享首选项的引用。

我无法将`Context`对象传递给此类以获取共享首选项，因为是抽象的，我不实例化它。我创建了`A`由共享单个属性的其他 POJO 扩展的类，即`uuid`. UUID 在应用程序第一次运行时生成一次，这就是我将它存储在共享首选项中的原因。在 class`A`的构造函数中，我希望`uuid`根据共享首选项中的内容进行设置。

```
public abstract class A {
    private String uuid;
    public A() {
        // this is how I'm hoping to use the shared preferences
        this.uuid = sharedPrefs.getString("KEY_UUID", "null");
    }
    // getter and setter
} 
```

[我发现的一个建议](https://stackoverflow.com/a/3806138/855680)是扩展`Application`，比如说在一个名为 的类中，并在清单的标签中`App`包含一个属性。我想会这样写：`android:name=".App"``<application>``App`

```
public class App extends Application {
    private static App app;
    public void onCreate() {
        this.app = this;
    }
    public static App getApp() {
        return app;
    }
} 
```

...所以在课堂`A`上，我可以这样做：

```
this.uuid = App.getApp().getSharedPreferences("prefs_name.txt", Context.MODE_PRIVATE).getString("KEY_UUID", "null"); 
```

但是，当 Android 终止进程或手机重新启动时，非最终静态字段是否`app`会失去对 的引用并变为 null ？`App`如何在不使用此方法的情况下获得对共享首选项的引用？还是我应该手动将 UUID 写入文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T12:56:20.503

将您的 App 类修改为如下所示：

```
public class App extends Application
{
    private static Context context;

    @Override
    public void onCreate()
    {
        super.onCreate();
        App.context = getApplicationContext();
    }

    public static Context getStaticContext()
    {
        return App.context;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T12:55:52.193

> 我无法将 Context 对象传递给此类以获取共享首选项，因为是抽象的，我不实例化它。

你当然可以。`Context`作为参数放在构造函数上。或者，`SharedPreferences`如果您愿意，可以将其作为构造函数的参数。您的子类的构造函数将需要采用相同的参数并将其传递给`super()`调用。

> 但是，当Android终止进程或手机重新启动时，非最终静态字段app是否会失去对App的引用并变为null？

好吧，整个过程都过去了。说它失去了“它对应用程序的引用并变为空”类似于说一个处于核爆炸零地面的人会在被蒸发之前被晒伤 - 虽然可能是真的，但这一点有点没有实际意义。:-)

# c# - 无法为 java 和 c# (winrt) 获得相同的 hmac_sha1 结果

> ID：13541380
> 
> 赞同：3
> 
> 时间：2012-11-24T12:52:14.230
> 
> 标签：c#, java, cryptography, sha1, hmac

我正在尝试将基于 java 的代码转换为 c#，如下所示；

原始的java代码；

```
String str2 = "5f1fa09364a6ae7e35a090b434f182652ab8dd76:{\"expiration\": 1353759442.0991001, \"channel\": \"dreamhacksc2\", \"user_agent\": \".*"

Mac localMac = Mac.getInstance("HmacSHA1");
localMac.init(new SecretKeySpec("Wd75Yj9sS26Lmhve".getBytes(), localMac.getAlgorithm()));
String str3 = new BigInteger(1, localMac.doFinal(str2.getBytes())).toString(16);
Object[] arrayOfObject2 = new Object[2];
arrayOfObject2[0] = str3;
arrayOfObject2[1] = URLEncoder.encode(str2);
String str4 = String.format("%s:%s", arrayOfObject2); 
```

这是我基于 WinRT 的 c# 代码

```
var token="5f1fa09364a6ae7e35a090b434f182652ab8dd76:{\"expiration\": 1353759442.0991001, \"channel\": \"dreamhacksc2\", \"user_agent\": \".*";

var encoding = new System.Text.UTF8Encoding();
var key = encoding.GetBytes("Wd75Yj9sS26Lmhve");
//var key = Convert.FromBase64String("Wd75Yj9sS26Lmhve");

var tokenData = encoding.GetBytes(token);

var result = HmacSha1(key, tokenData);

var hexString = new BigInteger(result).ToString("x");
var urlEncoded = System.Net.WebUtility.UrlEncode(token);

var combined = String.Format("{0}:{1}", hexString, urlEncoded); 
```

和我在 WinRT 上运行的 hmacsha1 函数；

```
 public static byte[] HmacSha1(byte[] key, byte[] data)
    {
        var crypt = Windows.Security.Cryptography.Core.MacAlgorithmProvider.OpenAlgorithm("HMAC_SHA1");
        var keyBuffer = Windows.Security.Cryptography.CryptographicBuffer.CreateFromByteArray(key);
        var cryptKey = crypt.CreateKey(keyBuffer);

        var dataBuffer = Windows.Security.Cryptography.CryptographicBuffer.CreateFromByteArray(data);
        var signBuffer = Windows.Security.Cryptography.Core.CryptographicEngine.Sign(cryptKey, dataBuffer);

        byte[] result;
        Windows.Security.Cryptography.CryptographicBuffer.CopyToByteArray(signBuffer, out result);

        return result;
    } 
```

所以这是相应的输出；

```
(JAVA) 92e893efe72a2f7df6ed409ce35819faba191a63:5f1fa09364a6ae7e35a090b434f182652ab8dd76%3A%7B%22expiration%22%3A+1353759442.0991001%2C+%22channel%22%3A+%22dreamhacksc2%22%2C+%22user_agent%22%3A+%22.*
  (C#) 63b10e1d8e9f99cd7fba2ed46fe8e4a4a40222f5:5f1fa09364a6ae7e35a090b434f182652ab8dd76%3A%7B%22expiration%22%3A+1353759442.0991001%2C+%22channel%22%3A+%22dreamhacksc2%22%2C+%22user_agent%22%3A+%22.* 
```

如上所示，java 和 c# 的 HMAC_SHA1 的输出不相等。有任何想法吗？我在运行编码问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T21:17:31.587

只要保持简单并且代码相同即可。

爪哇：

```
public static String toHexString(byte[] bytes) {
    StringBuilder sb = new StringBuilder(bytes.length * 2);
    for (int i = 0; i < bytes.length; ++i) {
        sb.append(String.format("%02x", bytes[i]));
    }
    return sb.toString();
}

public static void main(String[] args) {
    String str2 = "5f1fa09364a6ae7e35a090b434f182652ab8dd76:{\"expiration\": 1353759442.0991001, \"channel\": \"dreamhacksc2\", \"user_agent\": \".*";
    Mac localMac;
    try {
        localMac = Mac.getInstance("HmacSHA1");

        localMac.init(new SecretKeySpec("Wd75Yj9sS26Lmhve"
                .getBytes("UTF-8"), localMac.getAlgorithm()));
        byte[] result = localMac.doFinal(str2.getBytes("UTF-8"));
        String hexString = toHexString(result);
        System.out.println(hexString);
    } catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
    } catch (InvalidKeyException e) {
        e.printStackTrace();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    }

} 
```

结果：

```
f52202a4a4e4e86fd42eba7fcd999f8e1d0eb163 
```

C＃：

```
var token = "5f1fa09364a6ae7e35a090b434f182652ab8dd76:{\"expiration\": 1353759442.0991001, \"channel\": \"dreamhacksc2\", \"user_agent\": \".*";

var encoding = new System.Text.UTF8Encoding();
var privateKey = "Wd75Yj9sS26Lmhve";
HMACSHA1 hmac_sha1 = new HMACSHA1(encoding.GetBytes(privateKey));
hmac_sha1.Initialize();
byte[] result = hmac_sha1.ComputeHash(encoding.GetBytes(token));

string hexString = String.Join( "", result.Select( a => a.ToString("x2") ));

Console.WriteLine(hexString); 
```

结果：

```
f52202a4a4e4e86fd42eba7fcd999f8e1d0eb163 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T18:57:04.277

三个提示：

1.  当我测试你的 Java 代码时，我收到了 str3 的这个值：`f52202a4a4e4e86fd42eba7fcd999f8e1d0eb163`这与你发布的 Java 和 C# 结果不同。（[这个在线工具](http://hash.online-convert.com/sha1-generator)也计算我的结果。）

2.  Wikipedia 包含一个[示例](http://en.wikipedia.org/wiki/Hash-based_message_authentication_code#Examples_of_HMAC_.28MD5.2C_SHA1.2C_SHA256.29)，根据 Java 代码和在线计算器，它似乎是正确的。第一步，使用`"The quick brown fox jumps over the lazy dog", "key", "de7c9b85b8b78aa6bc8a7a36f70a90701c9db4d9"`三元组测试您的 Java 和 C# 代码。

3.  使用 BigInterger.toString(16) 将字节数组转换为十六进制字符串不是一个好主意，因为当字节数组以一个或多个零位（或十六进制？）开头时，转换后的十六进制字符串将不包含前导 0 字符.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T00:27:43.420

您将字节与字符串混淆了。结果`getBytes()`取决于默认的[字符编码](/questions/tagged/character-encoding "显示标记为“字符编码”的问题")，可能因系统而异。

# javascript - 使用循环将行添加到 sqlite 数据库（Phonegap）

> ID：13541381
> 
> 赞同：4
> 
> 时间：2012-11-24T12:52:20.783
> 
> 标签：javascript, android, sqlite, cordova

我创建了一个小Phonegap 应用程序，它通过XML 从Ajax 调用中获取新闻数据。这很好用，但我想将数据存储在数据库表中，以允许离线阅读新闻。

所以当 Ajax 回调循环数据时，我用它填充一个全局新闻对象，然后调用一个函数来检查数据是否已经存储在数据库中。如果不是，则应将其插入到数据库的新闻表中。

问题是在将新闻存储在表中的事务中，似乎我的新闻对象不再存在，因为我收到了消息：

> 未捕获的类型错误：无法读取...中未定义的属性“标题”

那么我怎样才能确保这个工作呢？这是我选择新闻并想检查它是否已经存在的部分的代码：

```
//  Check if a news from the internet already exists in the database; If not, insert it
function checkNewsInDB(){
    db.transaction(function(tx){
        tx.executeSql("SELECT * FROM NEWS", [], checkSuccess, dbErrorCB);
    }, dbErrorCB, dbSuccessCB);
}

//  Result Callback from the News Check
function checkSuccess(ctx, result){
    var len = result.rows.length;
    var found = false;
    for(var n = 0; n < newsContainer.length; n++){
        for(var r = 0; r < len; r++){
            if(result.rows.item(r).n_title == newsContainer[n].title 
               && result.rows.item(r).n_pubdate == newsContainer[n].pubdate){
                found = r;
            }
        }
        if(found == false){
            db.transaction(function(tx){
                tx.executeSql("INSERT INTO NEWS (n_title, n_link, n_creator, n_pubdate, n_description) VALUES (?,?,?,?,?)", [newsContainer[n].title, newsContainer[n].link, newsContainer[n].creator, newsContainer[n].pubdate, newsContainer[n].description], insertSuccess, dbErrorCB);
            }, dbErrorCB, dbSuccessCB);
        } else {
            found = false;
        }
    }
} 
```

newsContainer 填充了几行数据，我已经检查过了。如果有人可以帮助我理解为什么这不起作用，我会很高兴。

提前致谢！

问候，

伯恩德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T14:40:29.610

db.transaction 是异步的 - 到 executeSql 实际运行时，n 已经递增到循环结束。

不要为每个项目创建一个新事务，而是尝试在事务函数中移动循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T15:01:46.807

感谢你的回答。这是适用于所有有相同问题的人的代码：

```
//  Check if a news from the internet already exists in the database; If not, insert it
function checkNewsInDB(){
    db.transaction(function(tx){
        tx.executeSql("SELECT * FROM NEWS", [], checkSuccess, dbErrorCB);
    }, dbErrorCB, dbSuccessCB);
}

//  Result Callback from the News Check
function checkSuccess(ctx, result){
    var len = result.rows.length;
    var found = false;
    for(var n = 0; n < newsContainer.length; n++){
        for(var r = 0; r < len; r++){
            if(result.rows.item(r).n_title == newsContainer[n].title 
               && result.rows.item(r).n_pubdate == newsContainer[n].pubdate){
                found = r;
            }
        }
        if(found == false){
            var title = newsContainer[n].title;
            var link = newsContainer[n].link;
            var creator = newsContainer[n].creator;
            var pubdate = newsContainer[n].pubdate;
            var description = newsContainer[n].description;
            ctx.executeSql("INSERT INTO NEWS (n_title, n_link, n_creator, n_pubdate, n_description) VALUES (?,?,?,?,?)",
                        [title, link, creator, pubdate, description], insertSuccess, dbErrorCB);
        } else {
            found = false;
        }
    }
} 
```

# java - 更改和删除按钮的方法

> ID：13541382
> 
> 赞同：1
> 
> 时间：2012-11-24T12:52:23.097
> 
> 标签：java, swing, layout, methods, mouselistener

我刚刚学习 Java 的时间很短，出于某种原因，这件小事让我一直坚持我目前的项目。我有一个`jframe`完整的更改/删除按钮，但我需要弄清楚如何让它们工作。我需要它在编码中实际更改它，并在实际代码中将其删除或永久更改。

```
package admin;

import java.awt.*;
import javax.swing.*;
import javax.swing.border.*;
import javax.swing.table.*;
import java.awt.event.*;

public class Project3 extends JFrame {

    private JPanel contentPane;
    private JTable table_1;
    private JScrollPane scrollPane;
    String[] columnNames = {"Restaurant", "Dish", "Type", "Price", "Rating"};
    Object[][] data = {
        {"Nemo", "Vesuvio", "Pizza", new String("65kr"), new Integer(7)},
        {"John", "Doe", "Rowing", new Integer(3), new Boolean(true)},
        {"Sue", "Black", "Knitting", new Integer(2), new Boolean(false)},
        {"Jane", "White", "Speed reading", new Integer(20),
            new Boolean(true)},
        {"Joe", "Brown", "Pool", new Integer(10), new Boolean(false)}};

    /**
    * Launch the application.
    */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            public void run() {
                try {
                    Project3 frame = new Project3();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
    * Create the frame.
    */
    public Project3() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 800, 600);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new BorderLayout(0, 0));
        setContentPane(contentPane);
        JPanel panel = new JPanel();
        contentPane.add(panel, BorderLayout.CENTER);
        panel.setLayout(null);
        scrollPane = new JScrollPane();
        scrollPane.setBounds(139, 162, 469, 420);
        panel.add(scrollPane);
        table_1 = new JTable(data, columnNames);
        scrollPane.setViewportView(table_1);
        table_1.setFillsViewportHeight(true);
        table_1.setModel(new DefaultTableModel(new Object[][]{
                {"Nemo", "blah", "Pizza", "65kr", new Integer(7)},
                {"Nemo", "blah", "Rowing", "1 000 000kr", Boolean.TRUE},
                {"Sue", "blah", "Knitting", new Integer(2), Boolean.FALSE},
                {"Jane", "blah", "Speed reading", new Integer(20), Boolean.TRUE},
                {"Joe", "Brown", "Pool", new Integer(10), Boolean.FALSE},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},},
            new String[]{
                "Restaurant", "Dish", "Type", "Price", "Rating"}));
        JButton btnChangeadd = new JButton("Change/Add");
        btnChangeadd.addMouseListener(new MouseAdapter() {

            @Override
            public void mouseClicked(MouseEvent e) {
                // CALL CHANGE METHOD HERE
            }
        });
        btnChangeadd.setFont(new Font("Lucida Grande", Font.PLAIN, 16));
        btnChangeadd.setBounds(143, 104, 175, 42);
        panel.add(btnChangeadd);
        JLabel lblNewLabel = new JLabel("Welcome RestaurantID");
        lblNewLabel.setFont(new Font("Lucida Grande", Font.PLAIN, 24));
        lblNewLabel.setBounds(264, 56, 260, 36);
        panel.add(lblNewLabel);
        JButton button = new JButton("+");
        button.addMouseListener(new MouseAdapter() {

            @Override
            public void mouseClicked(MouseEvent e) {
                // CALL SOMETHING HERE IF YOU WANT
            }
        });
        button.setBounds(66, 248, 40, 29);
        panel.add(button);
        JButton button_1 = new JButton("-");
        button_1.addMouseListener(new MouseAdapter() {

            @Override
            public void mouseClicked(MouseEvent e) {
            }
        });
        button_1.setBounds(66, 289, 40, 29);
        panel.add(button_1);
        JButton btnDelete = new JButton("Delete");
        btnDelete.addMouseListener(new MouseAdapter() {

            @Override
            public void mouseClicked(MouseEvent e) {
                //DELETE METHOD
            }
        });
        btnDelete.setFont(new Font("Lucida Grande", Font.PLAIN, 16));
        btnDelete.setBounds(344, 104, 191, 42);
        panel.add(btnDelete);
        JButton btnLogOut = new JButton("Log out");
        btnLogOut.addMouseListener(new MouseAdapter() {

            @Override
            public void mouseClicked(MouseEvent e) {
            }
        });
        btnLogOut.setBounds(667, 6, 117, 29);
        panel.add(btnLogOut);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T14:04:10.440

我认为您正在寻找 ActionListener 而不是 MouseListener。您可以像添加 MouseListener 一样将 actionlistener 添加到 JButton。

```
button.addActionListener(new ActionListener(){  
    public void actionPerformed(ActionEvent e){  
        //code you want to run when the button gets pressed  
    }  
 } 
```

单击按钮时将运行 actionPerformed 方法。这是编写动作监听器的好教程：http: [//docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)

在那个教程中，他们做的事情有点不同。他们有一个扩展 ActionListener 并实现 actionPerformed 方法的类。如果以这种方式完成，那么您将整个类作为 actionlistener 添加到按钮。因此，如果您的按钮是在扩展 actionlistener 的类中创建的，您可以这样做：
`button.addActionListener(this);`
这允许您为多个按钮使用一个 actionPerformed 方法。要知道在 actionPerformed 方法中单击了哪个按钮，您可以像这样调用 ActionEvent 对象的 getSource 方法：
`if(e.getSource() == button)`
如果您需要更多关于让类扩展 ActionListener 的说明，请告诉我。

编辑：
绝对误解了你的要求。不过，我仍然建议使用动作监听器，而不是使用鼠标监听器处理按钮按下的方式。如果您澄清要如何更改数据，我可能会提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:05:50.547

如果要删除单击的 btn，请执行以下操作：

```
面板.remove(); 
面板.验证（）；
panel.repaint();
```

此外，您可以通过 e.getSource() 内部操作执行方法访问单击的源。

# resharper - Visual Studio 2012 中的 Resharper 7.1 单元测试时间跟踪错误

> ID：13541383
> 
> 赞同：0
> 
> 时间：2012-11-24T12:52:23.953
> 
> 标签：resharper

配置-visual studio 2012-windows 8-resharper 7.1.25.234

对此问题的手风琴 [为什么 resharper 7 测试会话窗口不显示 Visual Studio 2012 中的单元测试总执行时间？](https://stackoverflow.com/questions/12530602/why-resharper-7-tests-session-window-does-not-show-unit-tests-total-execution-ti) 总时间有问题，应该在 7.1.4.212 build 手风琴中修复这个问题 [http://youtrack.jetbrains.com/issue/RSRP-330088](http://youtrack.jetbrains.com/issue/RSRP-330088)

但是现在这不起作用，并且跟踪单次时间也很麻烦

![在此处输入图像描述](../Images/9f750e15466ebbc6627c0c6a3b38970f.png)

# android - BroadcastReceiver 被无限次调用

> ID：13541384
> 
> 赞同：0
> 
> 时间：2012-11-24T12:52:41.053
> 
> 标签：android

我有一个`BroadcastReceiver`可以监控我与 Wifi 或移动网络的连接状态。这样做的重点是在手机建立连接时`BroadcastReceiver`访问 a 。`SQLite Database`

所以在我的`onPause`方法中，我注册了接收者：

```
networkMonitor = new CaseQueueReceiver();
IntentFilter filter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);        
registerReceiver(networkMonitor, filter); 
```

在我的`onDestory`方法中，我取消注册它

```
unregisterReceiver(networkMonitor); 
```

到这个 networkMonitor 接收器

```
public class CaseQueueReceiver extends BroadcastReceiver {

    public boolean available;
    DatabaseHandler db;
    QueueDB queueDB; 
    HashMap<String, String> queueHashMap;

    public CaseQueueReceiver() {
        db = new DatabaseHandler(ContextHelper.context());
        queueDB = new QueueDB(ContextHelper.context()); 
        queueHashMap = new HashMap<String, String>(); 
    }

    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent.getAction().equals(ConnectivityManager.CONNECTIVITY_ACTION)) {
            NetworkInfo info = intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);
            String typeName = info.getTypeName();
            String subtypeName = info.getSubtypeName();
            available = info.isAvailable();
            Log.i("Network Monitor", "Network Type: " + typeName 
                + ", subtype: " + subtypeName
                + ", available: " + available);

          //call a method which will get all the unsent cases from the database, and update their field of sent status
         //in order to do so, add an extra column in the database, also remember to delete the cases.    

         if(available) {

             int count = queueDB.countUnsentCases();
             Log.i("Count unsentCases: ", Integer.toString(count));
             queueDB.getUnsetCases();

            // Iterator<Entry<String, String>> it = queueHashMap.entrySet().iterator();
//           while (it.hasNext()) {
//                  Map.Entry pairs = (Map.Entry)it.next();
//                  Log.i("In the Queue: ", "PCN: " + pairs.getKey() + " Nist-File: " + pairs.getValue());
//           }

         }
        }
    } 
```

还有我来自 QueueDB 的两种方法

```
public int countUnsentCases() {

        String SQLQuery = "SELECT COUNT(" + PCN + ") FROM "
                + TABLE_CASES_IN_QUEUE + ";";
        SQLiteDatabase db = this.getWritableDatabase();

        Cursor cursor = db.rawQuery(SQLQuery, null);
        cursor.moveToFirst();
        int count = cursor.getInt(0);
        cursor.close();
        db.close();

        return count;
    }

    public HashMap<String, String> getUnsetCases() {

        HashMap<String, String> queueHashMap = new HashMap<String, String>();

        SQLiteDatabase db = this.getWritableDatabase();
        String query = "SELECT * FROM " + TABLE_CASES_IN_QUEUE + ";";
        Cursor cursor = db.rawQuery(query, null);

        if (cursor.moveToFirst()) {
            do {

                Log.i("CURSOR(0)", cursor.getString(0));
                // queueHashMap.put(cursor.getString(0), cursor.getString(1));
            } while (cursor.moveToNext());
        }
        cursor.close();
        db.close();

        return queueHashMap;
    } 
```

我遇到的问题是，`onReceive`当我打开 Wifi 时，该方法将被称为无限。这不会导致任何异常，我的应用程序只会挂起，并占用堆的内存。我知道我应该在线程中读取/写入数据库。谁能解释为什么这个`onReceive`方法会被调用这么多次？解决此问题的最佳方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T12:58:50.450

```
public static final String CONNECTIVITY_ACTION

Added in API level 1
A change in network connectivity has occurred. A connection has either been established or lost. The NetworkInfo for the affected network is sent as an extra; it should be consulted to see what kind of connectivity event occurred.

If this is a connection that was the result of failing over from a disconnected network, then the FAILOVER_CONNECTION boolean extra is set to true.

For a loss of connectivity, if the connectivity manager is attempting to connect (or has already connected) to another network, the NetworkInfo for the new network is also passed as an extra. This lets any receivers of the broadcast know that they should not necessarily tell the user that no data traffic will be possible. Instead, the reciever should expect another broadcast soon, indicating either that the failover attempt succeeded (and so there is still overall data connectivity), or that the failover attempt failed, meaning that all connectivity has been lost.

For a disconnect event, the boolean extra EXTRA_NO_CONNECTIVITY is set to true if there are no connected networks at all.

Constant Value: "android.net.conn.CONNECTIVITY_CHANGE" 
```

# java - Java 构造函数的默认访问修饰符

> ID：13541386
> 
> 赞同：26
> 
> 时间：2012-11-24T12:53:04.127
> 
> 标签：java, constructor, access-modifiers

谁能解释**显式无参数构造函数**（和其他构造函数）的默认访问修饰符是什么？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-11-24T13:03:33.043

在这方面，构造函数与方法相同——如果你没有给出明确的 public、private 或 protected，那么构造函数将获得默认的“包私有”可见性。它可以从同一个类或同一个包中的任何其他类调用，但不能从不同包中的子类调用（因此，如果一个类只有包可见的构造函数，那么任何子类都必须在同一个包中）。

私有构造函数可防止任何*其他*类实例化这个类，但您可以在类中拥有一个公共静态工厂方法，该方法调用其自己的私有构造函数。这是单例之类的常见模式。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-11-24T12:55:27.370

**JLS 8.8.9 默认构造函数**

> 如果一个类不包含构造函数声明，则自动提供一个不带参数的默认构造函数：
> 
> 如果该类被声明为public，则默认构造函数被隐式地赋予访问修饰符public；
> 如果该类被声明为受保护，则默认构造函数被隐式赋予访问修饰符保护；
> 如果该类被声明为私有，则默认构造函数被隐式赋予访问修饰符私有；否则，
> 默认构造函数具有没有访问修饰符隐含的默认访问权限。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-24T14:03:18.173

**-**当**没有****明确**定义访问修饰符时， A`constructor`将具有类型的**访问控制**。所以这个构造函数将有一个**Package Level Access**。在该包中定义为具有此默认构造函数的类的类将能够访问它，并且扩展包含默认构造函数的此类的类也将能够通过继承访问它。`default`

 ********-**如果**构造函数**被构造`private`，那么只有**该类中的代码**可以访问它。

**单例示例**

```
public class Test {

  private static Test uniqueInstance = new Test();

  private Test(){}

  public static Test getInstance(){

    return uniqueInstance;

 }

} 
```

**-**即使类中的**非静态成员** `inner classes`也**可以访问其私有成员，反之亦然。**

**例如：**

```
public class T {

    private T(){

        System.out.println("Hello");
    }

    class TT{

        public TT(){

            new T();
        }
    }

    public static void main(String[] args){

        T t = new T();
        T.TT i = t.new TT();

    }

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-16T11:16:40.330

它取决于您是为常规类还是枚举编写构造函数：

*   [对于课程， JLS §6.6.1](https://docs.oracle.com/javase/specs/jls/se8/html/jls-6.html#jls-6.6.1)给出了答案：

    > 没有访问修饰符声明的类成员或构造函数隐式具有**包**访问权限。

*   [对于枚举， JLS §8.9.2](https://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.9.2)给出了答案：

    > 在枚举声明中，没有访问修饰符的构造函数声明是**private**。

    （枚举构造函数始终是私有的，以防止其他类实例化更多枚举常量。）******

# javascript - Page_Load 上的 ScriptManager.RegisterStartupScript 在 Framework 2.0 上不起作用

> ID：13541388
> 
> 赞同：1
> 
> 时间：2012-11-24T12:53:08.883
> 
> 标签：javascript, .net-2.0, scriptmanager, pageload, registerstartupscript

这是一个非常奇怪的问题

```
protected void Page_Load(object sender, EventArgs e)
{ ScriptManager.RegisterStartupScript(UpdatePanel1,UpdatePanel1.GetType(),"Script","Test()",true);
} 
```

我的代码不工作，但在按钮单击事件上它工作我知道它来自 2.0 版本，因为在 4.0 上它工作但我真的需要它在 2.0 框架和页面加载。因此，如果有替代方法或解决方案，我将非常感激

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:24:57.230

尝试一个随机值：

```
protected void Page_Load(object sender, EventArgs e)
{
    ScriptManager.RegisterStartupScript(this.Page, typeof(UpdatePanel1) , new Guid().ToString(),"Test();",true);
} 
```

# bash - 删除两个分隔符之间的字符串，包括

> ID：13541389
> 
> 赞同：2
> 
> 时间：2012-11-24T12:53:09.757
> 
> 标签：bash, sed

在 bash 脚本中，我该如何删除两个字符串之间的文本，包括字符串。

原文：

```
(ABC blah1)blah 2(def blah 5)blah 7)(DEF blah 8)blah 9 
```

我想删除 '(def' 和下一个 ')' 之间的所有文本。所以我想要的输出是：

```
(ABC blah1)blah 2blah 7)blah 9 
```

最好让搜索不区分大小写...在上面的示例中，它找到并删除了 '(def...)' 和 '(DEF...)'

我努力了：

```
echo "(ABC blah1)blah 2(def blah 5)blah 7)(DEF blah 8)blah 9" | sed 's/(def.*)//gI' 
```

但输出是：

```
(ABC blah1)blah 2blah 9 
```

我认为这是因为 '.*' 在 sed 中是贪婪的。

任何想法如何格式化我的 sed 搜索字符串？sed 甚至是最好的工具吗？我从 bash 脚本运行它，所以任何基本的 util 都可以通过 bash 使用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T13:01:56.153

确实，sed 是贪婪的。但你可以这样做：

```
sed 's/(def[^)]*)//gi' 
```

请注意，并非所有 sed 都接受该`i`标志，因此您可能需要这样做：

```
sed 's/([dD][eE][fF][^)]*)//g' 
```

# php - 使用 preg_replace 查找页面上的所有图像

> ID：13541391
> 
> 赞同：-3
> 
> 时间：2012-11-24T12:53:17.027
> 
> 标签：php, regex, preg-replace

如何使用“preg_replace”找到所有图像链接？我很难理解如何实现正则表达式

到目前为止我已经尝试过：

```
$pattern = '~(http://pics.-[^0-9]*.jpg)(http://pics.-[^0-9]*.jpg)(</a>)~';
$result = preg_replace($pattern, '$2', $content); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T13:00:32.853

`preg_replace()`，顾名思义，替换某些东西。你想用`preg_match_all()`.

```
<?php
// The \\2 is an example of backreferencing. This tells pcre that
// it must match the second set of parentheses in the regular expression
// itself, which would be the ([\w]+) in this case. The extra backslash is
// required because the string is in double quotes.
$html = "<b>bold text</b><a href=howdy.html>click me</a>";

preg_match_all("/(<([\w]+)[^>]*>)(.*?)(<\/\\2>)/", $html, $matches, PREG_SET_ORDER);

foreach ($matches as $val) {
    echo "matched: " . $val[0] . "\n";
    echo "part 1: " . $val[1] . "\n";
    echo "part 2: " . $val[2] . "\n";
    echo "part 3: " . $val[3] . "\n";
    echo "part 4: " . $val[4] . "\n\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T13:23:52.787

另一种从网页中查找所有图像链接的简单方法，使用简单的 html dom 解析器

// 从 URL 或文件创建 DOM

```
$html = file_get_html('http://www.google.com/'); 
```

// 查找所有图像

```
foreach($html->find('img') as $element) 
echo $element->src . '<br>'; 
```

这是从任何网页获取所有图像链接的简单方法。

# ruby-on-rails - Ruby 超时在 Rails 中不起作用？

> ID：13541395
> 
> 赞同：0
> 
> 时间：2012-11-24T12:54:02.067
> 
> 标签：ruby-on-rails, ruby, sockets

通过 TCPSocket 连接到不可用的远程资源时，我在尝试超时时遇到问题。它只是无限期地挂起而不会超时。理想情况下，我希望它每 2 分钟左右尝试重新连接一次，但 TCPSocket.new 调用似乎阻塞了。我试过使用 timeout() 但这也无济于事。在 IRB 实例中尝试相同的调用非常有效，但是在 Rails 中时，它会失败。有人可以解决这个问题吗？

我的代码如下所示：

```
def self.connect!
  @@connection = TCPSocket.new IP, 4449
end

def self.send(cmd)
puts "send  "
unless @@connection
  self.connect!
end

loop do
  begin
    @@connection.puts(cmd)
    return
  rescue IOError
    sleep(self.get_reconnect_delay)
    self.connect!
  end
end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T14:58:35.080

不幸的是，目前没有办法直接在 TCPSocket 上设置超时。

有关功能请求，请参阅[http://bugs.ruby-lang.org/issues/5101](http://bugs.ruby-lang.org/issues/5101)。您将使用基本的 Socket 类并设置套接字选项。

# c - 第一个 fwrite 有效，但第二个无效

> ID：13541398
> 
> 赞同：0
> 
> 时间：2012-11-24T12:54:12.547
> 
> 标签：c, fwrite, fread

我不知道为什么第一个`fwrite()`for `customer`, 有效，但不是第二个`fwrite()`for 消息的符号。我的程序想要检查客户和消息中的符号是否已包含在库中`.dat`。这是我的一段代码：

```
typedef struct {
    char Name[50];
    int totalmsg;
    int totalword;
} Customer;

typedef struct {
    char symbol;
    char alphabet[20];
} Ssymbol;

void add_customer () {
    boolean found;
    int i;

    fp = fopen("customer.dat", "wb+"); 
    fread(&Customer_history, sizeof(TabInt), 102, fp);

    i = GetLastIdx(Customer_history);
    do {
        printf ("Please input customer's name: ");scanf("%s",&temp); 
        if (i == 0) {
            i++;
            SetName(&Customer_history,i,temp);
            SetMsg(&Customer_history,i,i);
            SetEff(&Customer_history,i);
            printf("Do you still wanna add another customer ?(Y/N)"); scanf("%s",&CC);
        }
        else {
            found = Search_name(Customer_history,temp);
            if (found == true) {
                printf("The name is already exist \n\n");
            }
            else {
                i++;
                SetName(&Customer_history,i,temp);
                    SetMsg(&Customer_history,i,i);
                    SetEff(&Customer_history,i);
            }
            printf("Do you still wanna add another customer ?(Y/N)"); scanf("%s",&CC);
        } 
    } while ((CC == 'y') || (CC =='Y'));
    fwrite(&Customer_history, sizeof(Customer), 102, fp);
    fclose(fp);
}

void add_symbol() {

    char tempc;
    char tempalphabet[20];
    boolean found;
    int i;

    fp = fopen("library.dat","wb+");

    fread(&list_symbol, sizeof(Ssymbol), 52, fp);

    i = GetLastIdx2(list_symbol);

    do{
        printf("Please input new symbol:");
        scanf("%s", &tempc);

        printf("Please input the alphabet of the symbol:");
        scanf("%s", &tempalfabet);

        if (i==0){
            i++;
            SetSymbol(&list_symbol,i,tempc);
            SetAlphabet(&list_symbol,i,tempalphabet);
            printf("Do you want to add another symbol? (Y/N)");
            scanf("%s",&CC);
        }      
        else{
            found = Search_symbol(list_symbol, tempc);
            if (found==true){
                printf("Symbol is already exist \n\n");
            }
            else{
                i++;
                SetSymbol(&list_symbol,i,tempc);
                SetAlphabet(&list_symbol,i,tempalphabet);
                printf("Do you want to add another symbol? (Y/N)");
                scanf("%s",&CC);
            }            
        }
    }

    while((CC=='y') || (CC=='Y'));

    fwrite(&list_symbol, sizeof(Ssymbol),52, fp);
    fclose(fp);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T07:27:27.690

如果您在这里只期待一个字符：

```
scanf("%s", &tempc); 
```

然后将其更改为：

```
scanf("%c", &tempc); 
```

否则，您需要将 tempc 定义为一个数组（并且不要使用`&`）。

同样，由于 tou 正在传递一个数组，因此不应使用 address-of ( `&`)：

```
printf("Please input the alphabet of the symbol:");
// scanf("%s", &tempalfabet); is wrong
scanf("%s", tempalfabet); // correct 
```

检查代码中的所有 scanf 调用并修复它们

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T16:10:22.333

如果没有更“可编译”的代码版本，很难说......这里有一些要点：

A)`boolean`不是 C 中的类型。您需要类似以下内容：

```
#include <stdbool.h> // or some other header that defines bool
typedef bool boolean; 
```

做不到这一点：

```
typedef int boolean;
#define false 0
#define true 1 
```

B）`add_customer()`并`add_symbol()`使用`fp`未定义的。您需要`FILE * fp`为这些操作定义一个。

C）以下（我假设是）方法未定义：`GetLastIdx()`, `SetName()`, `SetMsg()`, `SetEff()`, `Search_Name()`, `GetLastIdx2()`, `SetSymbol()`, `SetAlphabet()`,`Search_symbol()`

D）以下（我假设是）全局变量和数据结构没有定义：`Customer_history`, `TabInt`, `temp`, `CC`, `list_symbol`,`tempalfabet`

根据你的问题描述，我假设你有这个工作，所以这些都应该被定义。如果您可以提供更完整、可编译的代码版本来显示问题，我可以提供更多帮助。

所以根据我所拥有的，这里有一些输入：

1）你正在读入你的`list_symbol`，这应该是一个指向一个足够大的内存块的指针`52*sizeof(Ssymbol)`，这应该是大约 1092 字节。

```
fread(&list_symbol, sizeof(Ssymbol), 52, fp); 
```

另请注意，如果`list_symbol`是一个`Ssymbol`s 数组，那么您的读取代码会因为您的结构中有一个数组而被搞砸，它将逐*字节*读取`fread()`和填充您的数据。例如：

 *```
Ssymbol list_symbol[52];
FILE * fp = fopen("test.txt", "r");
memset(list_symbol, 0, 52*sizeof(Ssymbol));
fread(list_symbol, sizeof(Ssymbol), 52, fp); 
```

让我们说“test.txt”里面有：

```
C abcdefghijklmn
3 12345678 
```

然后你的`list_symbol`会看起来像：

```
list_symbol[0].symbol = 'C'
list_symbol[0].alphabet = ' abcdefghijklmn3 12' //note the newline and spaces fill it
list_symbol[1].symbol = '3'
list_symbol[1].alphabet = '45678' 
```

这可能不是你想做的。确保您的数据与您的结构匹配！

2）您`scanf()`完全显示的错误：

```
char tempc;
...
scanf("%s", &tempc); 
```

如果你想要一个字符，你想要“%c”，而不是“%s”。我没有看到上面的其他声明（参见 D 点），但是根据您的打印和使用情况，我可以告诉您`tempalfabet`并且`CC`几乎可以肯定也是错误的。

3）`scanf()`除非您使用它们，否则您的 s 将留下换行符：

```
printf("Please input new symbol:");
scanf("%c\\n", &tempc);  // <-- escaped newline will do that for you 
```

4) 你用“wb+”打开你的文件。请参阅用于写入和附加到二进制文件的[fopen() 选项。](http://www.cplusplus.com/reference/cstdio/fopen/)如果你想要一个二进制文件来**读写**你需要：“ab+”，如果你想要一个文本文件“a+”就可以了。

5）您不重置文件指针：

```
fopen(file for reading, writing, and appending);
fread(stuff);
do c code;
fwrite(stuff); 
```

这将导致您编写的内容被附加到文件的底部。*我不知道那是不是你想要的*。因此，如果您想读取完整`list_symbol`的数据，然后将新数据集附加到文件底部，这可能不是问题。我***怀疑***您想覆盖文件中的内容......在这种情况下，您需要[fseek()](http://www.cplusplus.com/reference/cstdio/fseek/)回到开头，或者您可以简单地关闭并打开文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T15:46:21.140

I am trying to *guess* the issue, since the entire code is not vailable..

Is it possible that the number of symbols is exceeding 52, and you are writing only first 52 symbols? So fwrite is indeed working, but it is not changing the data file. Try printf'ing i(=GetLastIdx2), to see if it is exceeding 52.

Also, instead of having array for list_symbols, I would recommend using a linked list & fread/fwrite, using a while loop, to read/write all the symbols in the data file.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T06:36:15.773

从代码逻辑来看，它想从文件中读取一些数据然后更新它。

然后你应该使用“rb+”模式打开文件，而不是“wb+”，它会截断整个数据。在 "wb+" 模式下，文件数据被截断并且`fread()`应该返回 0，整个 do/while 变得无效。

我不知道为什么第一个`fwrite()`有效，他们都不应该。

总而言之，在 中尝试`ab+`模式`fopen()`，并且在调用之前不要忘记`fseek()`使用 SEEK_SET 来重置文件位置指示器`fwrite()`，它可能会解决您的问题。*

# sql - SQL 连接错误显示 INVALID OBJECT NAME

> ID：13541400
> 
> 赞同：0
> 
> 时间：2012-11-24T12:54:17.963
> 
> 标签：sql, connection

我已经完成了以下编码，但它显示错误

## 无效的对象名称“sanket”

导入 System.Data.SqlClient

公共类 Form1 Dim con As New SqlConnection Dim cmd As New SqlCommand Dim da As SqlDataAdapter Dim ds As New DataSet Dim str As String

```
Private Sub ConnectToSQL()
    Try
        con.ConnectionString = "Data Source=SA_N_KET-PC\SQLEXPRESS;Initial Catalog=repeat;Integrated Security=true;"
        con.Open()
    Catch ex As Exception
        MessageBox.Show("Error while connecting to SQL Server." & ex.Message)
    Finally
        'DoNothing.
    End Try
End Sub
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    'TODO: This line of code loads data into the 'CryrptDataSet.sanket' table. You can move, or remove it, as needed.
    Me.SanketTableAdapter.Fill(Me.CryrptDataSet.sanket)
    ConnectToSQL()
End Sub
Public Sub exe()
    str = "insert into sanket(n)values ('" & TextBox1.Text & "')"
    da = New SqlDataAdapter(Str, con)
    da.Fill(ds, "sanket")
End Sub

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    exe()
End Sub 
```

结束类

# ios5 - 重复符号_OBJC_CLASS_$_LoginController

> ID：13541402
> 
> 赞同：9
> 
> 时间：2012-11-24T12:54:28.150
> 
> 标签：ios5, linker, linker-errors, mach-o, duplicate-symbol

我知道这个问题之前已经被问过很多次了，但是直到现在都没有解决我的问题。我知道当您在项目中获得文件的多个副本时会发生此错误。我试图清理构建，删除*编译源中的任何**LoginController.m*文件，然后构建。很好 - 没有错误。当我在 Complie 资源中添加我的 LoginController.m 文件时，编译器再次给出了同样的错误。

 *接下来我尝试的是从编译源中删除所有 .m 文件，成功清理和重建，并非常小心地添加每个 .m 文件。再次提出了同样的错误。我没有找到任何重复的文件，那为什么会发生这种情况？

请有人指导我。非常感谢。

**编辑：** 错误是：

`Ld /Users/svp/Library/Developer/Xcode/DerivedData/TryAgain-dhbbyywxclvxfodbunqysmmfefcl/Build/Products/Debug-iphonesimulator/TryAgain.app/TryAgain normal i386 cd /Users/svp/Desktop/TryAgain setenv MACOSX_DEPLOYMENT_TARGET 10.6 setenv PATH "/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin" /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/clang -arch i386 -isysroot /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk -L/Users/svp/Library/Developer/Xcode/DerivedData/TryAgain-dhbbyywxclvxfodbunqysmmfefcl/Build/Products/Debug-iphonesimulator -L/Users/svp/Desktop/TryAgain/TryAgain -L/Users/svp/Desktop/TryAgain/../CorePlot_1.0/Binaries/iOS -F/Users/svp/Library/Developer/Xcode/DerivedData/TryAgain-dhbbyywxclvxfodbunqysmmfefcl/Build/Products/Debug-iphonesimulator -filelist /Users/svp/Library/Developer/Xcode/DerivedData/TryAgain-dhbbyywxclvxfodbunqysmmfefcl/Build/Intermediates/TryAgain.build/Debug-iphonesimulator/TryAgain.build/Objects-normal/i386/TryAgain.LinkFileList -mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -ObjC -all_load -fobjc-arc -D__IPHONE_OS_VERSION_MIN_REQUIRED=50000 -framework MediaPlayer -lz -framework AVFoundation -framework MobileCoreServices -framework SystemConfiguration -framework CFNetwork -framework QuartzCore -framework UIKit -framework Foundation -framework CoreGraphics -lCorePlot-CocoaTouch -o /Users/svp/Library/Developer/Xcode/DerivedData/TryAgain-dhbbyywxclvxfodbunqysmmfefcl/Build/Products/Debug-iphonesimulator/TryAgain.app/TryAgain`

`ld: duplicate symbol _OBJC_CLASS_$_LoginController in /Users/svp/Library/Developer/Xcode/DerivedData/TryAgain-dhbbyywxclvxfodbunqysmmfefcl/Build/Intermediates/TryAgain.build/Debug-iphonesimulator/TryAgain.build/Objects-normal/i386/LoginController.o and /Users/svp/Library/Developer/Xcode/DerivedData/TryAgain-dhbbyywxclvxfodbunqysmmfefcl/Build/Intermediates/TryAgain.build/Debug-iphonesimulator/TryAgain.build/Objects-normal/i386/Navigator.o for architecture i386 Command /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/clang failed with exit code 1`

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-24T14:50:07.470

您的错误消息表明从 LoginController.m 和 Navigator.m 创建的二进制文件为您的`LoginController`类定义了一个实现。有时这是因为共享头文件包含实现逻辑。检查您的 Navigator.h/.m 以获取对`LoginController`.*

# php - 特殊字符在 php symfony twig 程序中不起作用

> ID：13541406
> 
> 赞同：0
> 
> 时间：2012-11-24T12:54:39.740
> 
> 标签：php, special-characters, twig

我的 symfony 程序中的特殊字符有问题，我通常使用不带 BOM 的 UTF-8 保存我的页面（我使用记事本++），例如此页面正确显示：

```
 je suis lé
<h1>Ajouter un acteur</h1>
{% if message %}
<p>{{ message }}</p>
{% endif %}
<form action="" method="post" {{ form_enctype(form) }}>
    {{ form_widget(form) }}
    <input type="submit" />
</form>
<p><a href="{{ path('myapp_acteur_lister') }}">Retour à la liste des acteurs</a></p> 
```

这条线`je suis lé`显示得很好，但是当我执行一个返回字符串的控制器函数时，这个字符串显示得不好：这是函数：

```
public function editerAction($id = null)
{
     $message='';
     $em = $this->container->get('doctrine')->getEntityManager();
     if (isset($id)) 
     {
      // modification d'un acteur existant : on recherche ses données
      $acteur = $em->find('MyAppFilmothequeBundle:Acteur', $id);
      if (!$acteur)
      {
       $message='Aucun acteur trouvé';
      }
     }
     else 
     {
      // ajout d'un nouvel acteur
      $acteur = new Acteur();
     }
     $form = $this->container->get('form.factory')->create(new ActeurForm(), $acteur);
     $request = $this->container->get('request');
     if ($request->getMethod() == 'POST') 
     {
            $form->bindRequest($request);
     if ($form->isValid()) 
     {
      $em->persist($acteur);
      $em->flush();
      if (isset($id)) 
      {
       $message='Acteur modifié avec succès !';
      }
      else 
      {
       $message='Acteur ajouté avec succès !';
      }
     }
     }
     return $this->container->get('templating')->renderResponse(
    'MyAppFilmothequeBundle:Acteur:editer.html.twig',
     array(
     'form' => $form->createView(),
     'message' => $message,
     ));
} 
```

这是页面的捕获：

![在此处输入图像描述](../Images/e238709e407d06039d5a8cd418522701.png)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:02:00.210

确保控制器 php 文件也使用 UTF-8 保存。

# visual-studio-2012 - Visual Studio 2012 慢速单元测试

> ID：13541411
> 
> 赞同：24
> 
> 时间：2012-11-24T12:55:06.340
> 
> 标签：visual-studio-2012

最近在 VS2012 上运行单元测试非常慢，当我运行它们时，它们需要大约 12 秒才能开始实际测试。

当我在遇到第一个断点之前进行调试时，情况是一样的。

我连接了进程监视器，然后我发现了这个：

`CreateFile \\WORKSTATION*\MAILSLOT\NET\NETLOGON SUCCESS`

`WriteFile \\WORKSTATION*\MAILSLOT\NET\NETLOGON BAD NETWORK PATH`

之后，它保持安静 9 秒。

`CloseFile \\WORKSTATION*\MAILSLOT\NET\NETLOGON SUCCESS`

这到底是怎么回事？我根本找不到 MAILSLOT 和 Visual Studio 之间的任何关系，但它现在已经持续了大约 2 周。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-09T11:19:14.293

我遇到了同样的问题，使用 VS2012 Update 1。根据[http://social.technet.microsoft.com/Forums/en-US/winserverDS/thread/20eb50e9-3e68-4d29-bcdd-a4fc166b9c00](http://social.technet.microsoft.com/Forums/en-US/winserverDS/thread/20eb50e9-3e68-4d29-bcdd-a4fc166b9c00)中的建议，我禁用了 NetBios通过我的 NIC 上的 TCP。测试现在立即启动，procmon 显示在 \MACHINE*\MAILSLOT\NET\NETLOGON 上的等待时间从 5 秒下降到大约 40 微秒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T06:58:08.180

Visual Studio 更新 1 现在可用，并且显然解决了单元测试的一些速度问题，无论它是否与 Mailslot 相关我不知道，但如果它以某种方式被 mstest 用作通信机制，来自 MSDN 论坛，大概这是可能的：

> 在即将发布的 Visual Studio 季度版本中（参考[http://blogs.msdn.com/b/visualstudioalm/archive/2012/10/08/visual-studio-2012-update-1-ctp.aspx](http://blogs.msdn.com/b/visualstudioalm/archive/2012/10/08/visual-studio-2012-update-1-ctp.aspx)），我们做了一些性能改进。简而言之，我们改变了底层存储机制以提高发现/运行时间。

在此处下载链接和信息：

[http://blogs.msdn.com/b/visualstudioalm/archive/2012/11/26/visual-studio-and-team-foundation-server-2012-update-1-now-available.aspx](http://blogs.msdn.com/b/visualstudioalm/archive/2012/11/26/visual-studio-and-team-foundation-server-2012-update-1-now-available.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T02:17:00.977

这可能不相关，但我注意到在我今天做的一些测试中，我的单元测试似乎运行得越来越慢。偶然我退出/重新启动了 Visual Studio，我的测试现在更快了。单元测试机制中可能存在某种内存泄漏或其他资源问题。我正在运行更新 1。

# android - 我想在 ImageView 的右侧放置/附加文本描述？

> ID：13541414
> 
> 赞同：-1
> 
> 时间：2012-11-24T12:55:38.040
> 
> 标签：android, android-layout

我在 ListView 项的单元格底部有三个 ImageView。我想在这些图像的右侧附加一些文本，以便它与 ImageView 保持一致。我意识到我可以为此使用线性和相对布局，但我认为也许有一种方法可以将文本放置在 ImageView 旁边。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:06:53.170

使用RelativeLayout 它工作。简单的例子：

```
<ImageView
    android:id="@+id/imageView1"
    android:layout_alignParantLeft="true" />

<TextView
    android:layout_alignLeft="@+id/ImageView1"
    android:layout_alignRight="@+id/ImageView1" /> 
```

这将使 textview 左侧 = imageview 左侧和 textview 右侧 = imageview 右侧，因此来自 textview 的内容将在您的 imageview 内。您可以使用所有类型的位置，只需从 android 开发属性中读取相对或线性布局。

但我完全不确定有什么问题:)

# javascript - 滚动富媒体网页最流畅的方式是什么？

> ID：13541418
> 
> 赞同：1
> 
> 时间：2012-11-24T12:56:11.683
> 
> 标签：javascript, jquery, html, css, browser

我正在制作一个网页，其中包含几个 JavaScript 幻灯片、大量 CSS、动画菜单和 CSS 过渡动画，而且我在 iPad 上的页面高度也很长。我有一个导航菜单，当用户单击它时，它将滚动到页面上的特定位置：

```
var $viewport = $('html:not(:animated),body:not(:animated)');
    $viewport.animate({scrollTop: dest}, 2000, function(){menu_scrolling=false;}); 
```

我的网页在我的 macbook pro 上可以像丝绸一样流畅地滚动，在 Firefox、Chrome 和 safari 上进行了测试，但在我的 iPad 上，它像地狱一样结结巴巴，几乎就像跳过了动画一样，即使捏缩放也很滞后。我尝试了 jQuery scrollto 插件、jquery-animation 增强插件，这些在 iPad 上都是滞后的。在 iPad 上制作菜单以平滑滚动富媒体网页的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T22:43:33.037

一种想法可能是依赖 CSS 过渡，并希望触发硬件加速。

说你申请

```
transition: all ease 0.5s; 
```

到你的容器，然后做类似的事情

```
$container.css( 'transform', 'translate3d(0,' + offsetValue + 'px,0)' ); 
```

完成后，您可以删除转换并将 scrollTop 设置为正确的值，以便用户仍然可以手动上下滚动页面。要在 iOS6 上触发硬件加速，您可能需要快速浏览一下[http://indiegamr.com/ios6-html-hardware-acceleration-changes-and-how-to-fix-them/](http://indiegamr.com/ios6-html-hardware-acceleration-changes-and-how-to-fix-them/)

# c# - 在运行时调整形状的大小

> ID：13541423
> 
> 赞同：0
> 
> 时间：2012-11-24T12:56:58.410
> 
> 标签：c#, wpf, visual-studio-2010

我有这个简单的房子图，我想调整屋顶改变它的宽度，因为房屋主体改变它的宽度**和/或**门适应房屋主体的宽度。我已经在任何解决方案上工作了几个小时，但是对于像这样的初学者项目来说，有效的代码似乎很复杂。这是我的代码。我尝试了一些将主体与 mouseLeftButtonDown 连接的功能，但它不起作用。

```
<Window x:Class="LAB2.MainWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="MainWindow" Height="400" Width="600">

              <Canvas UseLayoutRounding="True">
                <Rectangle Canvas.Left="86"  Canvas.Top="190" Height="171" Fill="Blue"    Name="body" Stroke="Black" MouseEnter="body_MouseEnter" MouseLeave="body_MouseLeave" Width="395" />
                <Rectangle Canvas.Left="118" Canvas.Top="229" Height="82" Fill="{Binding ElementName=body, Path=Fill}"  Name="window" Stroke="Black" Width="89"/>
                <Rectangle Canvas.Left="346" Canvas.Top="229" Fill="{Binding ElementName=body, Path=Fill}" Height="132"  Name="door" Stroke="Black" Width="83"/>
                <Polygon Points="10,110 230,10 500,110" Fill="{Binding ElementName=body, Path=Fill}" Stroke="Black" Name="triangle" Canvas.Left="35" Canvas.Top="86" />
                <Rectangle Canvas.Left="156" Canvas.Top="109" Height="61" Fill="{Binding ElementName=body, Path=Fill}" Name="chimney" Stroke="Black" Width="36" />
                <Button Canvas.Left="491" Canvas.Top="12" Content="Click" Height="23" Name="button1" Width="75" />
             </Canvas>

</Window> 
```

我将非常感谢有关此任务的任何建议或指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:02:54.633

好的，这是您的解决方案...我再次使用了简单的触发器。

```
<Control>
        <Control.Template>
            <ControlTemplate>
                <Canvas>
                    <Grid x:Name="HouseBody" Height="153" Width="350" HorizontalAlignment="Left" VerticalAlignment="Bottom" Canvas.Left="78" Canvas.Top="159">
                        <Rectangle Height="Auto" Fill="Blue" x:Name="body" Stroke="Black" Width="Auto"/>
                        <Rectangle Height="Auto" Fill="Blue"  x:Name="window" Stroke="Black" Width="89" HorizontalAlignment="Left" Margin="25,17,0,54"/>
                        <Rectangle Fill="Blue" Height="Auto"  x:Name="door" Stroke="Black" Width="Auto" Margin="235.5,17,25.5,0" HorizontalAlignment="Stretch"/>
                    </Grid>
                    <Grid x:Name="HouseRoof" Height="131.5" Width="350" HorizontalAlignment="Left" VerticalAlignment="Bottom" Canvas.Left="77" Canvas.Top="27.5">
                        <Rectangle Height="Auto" Fill="Blue" x:Name="chimney" Stroke="Black" Width="40" HorizontalAlignment="Stretch" Margin="44.066,22.965,265.934,8" />
                        <Path x:Name="path" Data="M74.752528,159.37536 L429.11068,159.37578 242,26.5 z" Fill="Blue" Height="Auto" Stretch="Fill" Stroke="Black" Width="Auto" Margin="0.25,0,-2.589,-0.865"/>
                    </Grid>
                </Canvas>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="body" Property="Fill" Value="Red" />
                        <Setter TargetName="window" Property="Fill" Value="Red" />
                        <Setter TargetName="door" Property="Fill" Value="Red" />
                        <Setter Property="Fill" TargetName="path" Value="Red"/>
                        <Setter Property="Fill" TargetName="chimney" Value="Red"/>
                        <Setter Property="Width" TargetName="HouseBody" Value="395"/>
                        <Setter Property="Width" TargetName="HouseRoof" Value="395"/>
                    </Trigger>
                    <!--<Trigger Property="IsMouseOver" Value="False">
                        <Setter TargetName="body" Property="Fill" Value="Green" />
                        <Setter TargetName="window" Property="Fill" Value="Green" />
                        <Setter TargetName="door" Property="Fill" Value="Green" />
                        <Setter TargetName="triangle" Property="Fill" Value="Green" />
                    </Trigger>-->
                </ControlTemplate.Triggers>     
            </ControlTemplate>
        </Control.Template>
    </Control> 
```

唯一的大变化是我用路径替换了多边形。希望我有所帮助。您可以使用 StoryBoards 执行相同的操作，当然，当您将对象分组到命名网格中时，使用 codeBehind 和 C# 会容易得多。您只需设置网格宽度并完成。

它会是这样的：

XAML：

```
<Grid>
    <Canvas MouseLeftButtonDown="Canvas_MouseLeftButtonDown" MouseLeftButtonUp="Canvas_MouseLeftButtonUp">
        <Grid x:Name="HouseBody" Height="153" Width="350" HorizontalAlignment="Left" VerticalAlignment="Bottom" Canvas.Left="78" Canvas.Top="159">
            <Rectangle Height="Auto" Fill="Blue" x:Name="body" Stroke="Black" Width="Auto"/>
            <Rectangle Height="Auto" Fill="Blue"  x:Name="window" Stroke="Black" Width="89" HorizontalAlignment="Left" Margin="25,17,0,54"/>
            <Rectangle Fill="Blue" Height="Auto"  x:Name="door" Stroke="Black" Width="Auto" Margin="235.5,17,25.5,0" HorizontalAlignment="Stretch"/>
        </Grid>
        <Grid x:Name="HouseRoof" Height="131.5" Width="350" HorizontalAlignment="Left" VerticalAlignment="Bottom" Canvas.Left="77" Canvas.Top="27.5">
            <Rectangle Height="Auto" Fill="Blue" x:Name="chimney" Stroke="Black" Width="40" HorizontalAlignment="Stretch" Margin="44.066,22.965,265.934,8" />
            <Path x:Name="path" Data="M74.752528,159.37536 L429.11068,159.37578 242,26.5 z" Fill="Blue" Height="Auto" Stretch="Fill" Stroke="Black" Width="Auto" Margin="0.25,0,-2.589,-0.865"/>
        </Grid>
    </Canvas>
</Grid> 
```

和代码隐藏：

```
 private void Canvas_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        HouseBody.Width = 400;
        HouseRoof.Width = 400;
    }

    private void Canvas_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {
        HouseBody.Width = 350;
        HouseRoof.Width = 350;
    } 
```

# c# - twitter WebResponse 冻结 C#

> ID：13541424
> 
> 赞同：1
> 
> 时间：2012-11-24T12:57:04.420
> 
> 标签：c#, .net, twitter, httpwebresponse

好的，我的 Twitter 客户端遇到了一个非常奇怪的问题。

我用于获取 twitter 时间线的代码是

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(resource_url);
request.Headers.Add("Authorization", authHeader);
request.Method = "GET";
request.ContentType = "application/x-www-form-urlencoded";

WebResponse response = request.GetResponse();
StreamReader read = new StreamReader(response.GetResponseStream());
string read_string = read.ReadToEnd();
read.Close(); 
```

问题是我可以多次调用此代码并得到响应。我还使用另一个代码向 twitter 发送状态消息。但是，每当我第二次向 twitter 发送消息然后调用此代码时，WebResponse 就会冻结。没有错误代码它只是冻结。

最初我怀疑我可能与编写代码的共享变量有关，所以我将它们分开。但这仍然无济于事。

Guyz 在这方面需要紧急帮助，已经尝试解决了几个小时，但没有用。如果需要，我可以发布整个代码。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:08:06.030

关闭响应：

```
response.Close(); 
```

# asp-classic - 如果子句没有按预期工作

> ID：13541426
> 
> 赞同：4
> 
> 时间：2012-11-24T12:57:13.827
> 
> 标签：asp-classic

我有以下 if 子句：

```
if ucase(displayanzeige) = "Y" \
or isnull(displayanzeige)      \
and ucase(bstatus) = "2"       \
or ucase(bstatus) = "1" 
```

if 子句的第一部分正在工作：

```
if ucase(displayanzeige) = "Y" \
or isnull(displayanzeige) 
```

但第二部分不起作用：

```
and ucase(bstatus) = "2"      \
or ucase(bstatus) = "1" 
```

if 子句有什么问题？请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T12:59:14.273

使用括号来帮助识别您的 if 条件：

```
if (ucase(displayanzeige) = "Y" or isnull(displayanzeige))
    and (ucase(bstatus) = "2" or ucase(bstatus) = "1") 
```

您目前拥有：

```
1 or 2 and 3 or 4 
```

系统可以将此解释为“ *1 必须为真或 2 且 3 或 4 必须为真*”

放置括号，如：

```
(1 or 2) and (3 or 4) 
```

会告诉系统“ *1 或 2 必须为真，3 或 4 必须为真*”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T13:00:08.430

使用括号可以解决您的问题：-

```
 if (ucase(displayanzeige) = "Y" or isnull(displayanzeige)) and (ucase(bstatus) = "2" or ucase(bstatus) = "1") 
```

目前，系统无法按照您的意愿解释条件。使用`brackets`对您来说是一个更好的选择。

# ios - UICollectionView 标头重复每一行

> ID：13541428
> 
> 赞同：2
> 
> 时间：2012-11-24T12:57:32.937
> 
> 标签：ios, uicollectionview

我正在子类化`UICollectionViewController.`

`UITableView`标题在我拥有的每一行单元格之后重复。我需要标题是“单一的”并且始终位于屏幕顶部（如导航栏）。

我正在使用以下代码：我的`UICollectionViewController`班级：

```
- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView
{
    return [categoryArray count] / 2;
}

- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
{
    return 2;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    CategoryCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"CategoryCell" forIndexPath:indexPath];
    CategoryViewModel *category = [categoryArray objectAtIndex:(indexPath.section*2 + indexPath.row)];
    cell.name.text = category.name;
    cell.image.image = category.image;
    return cell;
}

-(UICollectionReusableView *) collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath{
    if(headerIndexPath == nil){
        headerIndexPath = indexPath;
    }
    CategoryScreenHeader *categoryScreenHeader = [collectionView dequeueReusableSupplementaryViewOfKind:
                                         UICollectionElementKindSectionHeader withReuseIdentifier:@"CategoryScreenHeader" forIndexPath:headerIndexPath];
    categoryScreenHeader.headerName.text = @"Some title";
    categoryScreenHeader.headerImage.image = [UIImage imageNamed:@"step-0.png"];
    return categoryScreenHeader;
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:02:28.890

我发现这个精彩绝伦的教程很有效！[http://blog.radi.ws/post/32905838158/sticky-headers-for-uicollectionview-using](http://blog.radi.ws/post/32905838158/sticky-headers-for-uicollectionview-using)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:42:53.507

UICollectionView 没有像 UITableView 那样的表格标题（据我所知），只有部分标题会随着内容滚动。

如果您想在屏幕顶部保留一个视图，那么您应该向控制器的视图添加 2 个子视图，一个用于标题，一个用于集合视图。将集合视图插入到该底部子视图中，而不是插入到控制器的主视图中。删除您在 collectionView:viewForSupplementaryElementOfKind:atIndexPath: 中的代码（除非您还需要节标题）。

# boost - boost apply::visitor -> 丢弃限定符

> ID：13541434
> 
> 赞同：3
> 
> 时间：2012-11-24T12:58:16.673
> 
> 标签：boost, constants, static-visitor

我使用 boost::variant 制作了一个程序，但不知何故 const 不正确。

错误：将 'const CompareTitle' 作为 'bool CompareTitle::operator()(const T1&, const T2&) [with T1 = TestSeizoen, T2 = TestSeizoen]' 的 'this' 参数传递，丢弃限定符 [-fpermissive]

[T1=TestFilm, T2 = TestSeizoen] 等的相同错误。

这是代码：

```
#include <iostream>
#include <vector>
#include "boost/variant.hpp"

using namespace std;

class TestFilm{
private:
   string titel_;
public:
   TestFilm(const string& titel): titel_(titel){};
   const string titel() const {return titel_;};
};

class TestSeizoen{
private:
    string titel_;
public:
    TestSeizoen(const string& titel): titel_(titel){};
    const string titel() const {return titel_;};
};

struct CompareTitle: boost::static_visitor<bool>{
  template <typename T1, typename T2>
  bool operator() (const T1& t1 , const T2& t2){
     return t1.titel() == t2.titel();
  }
};

int main() {
   typedef boost::variant<TestFilm,TestSeizoen> var;
   vector <var> vec;
       TestFilm film1("titel1");
   vec.push_back(film1);
   TestSeizoen seizoen1("titel2");
   vec.push_back(seizoen1);
   vector<var>::iterator it;
   bool compare = boost::apply_visitor(CompareTitle(),*vec.begin(),*(vec.begin()+1));
   return 0;
} 
```

我试图使 operator() 成为 const 成员函数，但这并没有解决问题。有人可以帮忙吗？如果需要，我可以提供更多信息。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T13:38:03.153

我认为您需要保证 operator() 不会更改结构成员，即：

```
bool operator() (const T1& t1 , const T2& t2) const {
...
} 
```

这为我编译（使用 GCC 4.4.5）。

# ios - NSdate 格式化程序和结果转换为 NSstring

> ID：13541435
> 
> 赞同：0
> 
> 时间：2012-11-24T12:58:19.207
> 
> 标签：ios, nsdate

想问一下 NSDate Formatter

我想像这样创建日期和时间

> 2013 年 6 月 12 日星期五

我的代码

```
NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
    [dateFormatter setDateFormat:@"EEEE"];
    NSLog(@"%@", [dateFormatter stringFromDate:[NSDate date]]); 
```

输出=

> 周六

有谁知道如何像上面那样创建日期并将其转换为 nsstring？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T13:11:01.133

您想向用户显示该字符串吗？如果是这样设置，`dateStyle`因为您想要一个区域设置感知字符串。

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateStyle:NSDateFormatterFullStyle];
NSLog(@"%@", [df stringFromDate:[NSDate date]]); 
```

使用美国语言环境的用户将获得`Saturday, November 24, 2012`.
德国用户将获得`Samstag, 24\. November 2012`.

# maple - 在 Maple 中按部分积分

> ID：13541439
> 
> 赞同：0
> 
> 时间：2012-11-24T12:58:39.600
> 
> 标签：maple

我知道在“with(student)”包下，我可以分部分解决一些积分问题。例如，我将其应用于 $int(x*sin(x),x)$ 并得到了答案，但不能用于 $int(exp(x)*sin(x),x)$ 。请问with(student)下打包的这条规则命令是否可以应用于某种积分？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T00:48:06.243

```
with(student):

s1 := Int(exp(x)*sin(x),x) = intparts(Int(exp(x)*sin(x),x),sin(x));

   /                                    /  /                 \
  |                                     | |                  |
  |  exp(x) sin(x) dx = exp(x) sin(x) - | |  cos(x) exp(x) dx|
  |                                     | |                  |
 /                                      \/                   /

s2 := Int(exp(x)*cos(x),x) = expand( intparts(Int(exp(x)*cos(x),x),cos(x)) );

   /                                    /  /                 \
  |                                     | |                  |
  |  cos(x) exp(x) dx = cos(x) exp(x) + | |  exp(x) sin(x) dx|
  |                                     | |                  |
 /                                      \/                   /

s3 := subs(s2,s1);

        /                                                 
       |                                                  
       |  exp(x) sin(x) dx = exp(x) sin(x) - cos(x) exp(x)
       |                                                  
      /                                                   

           /  /                 \
           | |                  |
         - | |  exp(x) sin(x) dx|
           | |                  |
           \/                   /

s4 := lhs(s3) + Int(exp(x)*sin(x),x) = rhs(s3) + Int(exp(x)*sin(x),x);

      /  /                 \                                
      | |                  |                                
    2 | |  exp(x) sin(x) dx| = exp(x) sin(x) - cos(x) exp(x)
      | |                  |                                
      \/                   /                                

lhs(s4)/2 = rhs(s4)/2;

      /                                                     
     |                     1                 1              
     |  exp(x) sin(x) dx = - exp(x) sin(x) - - cos(x) exp(x)
     |                     2                 2              
    / 
```

......我们完成了。

# asp.net - 从服务器端更改输入或选择的值使其不同步

> ID：13541440
> 
> 赞同：0
> 
> 时间：2012-11-24T12:58:48.113
> 
> 标签：asp.net, html

在我解释之前，我必须告诉你，在我的项目中我必须使用 HTML 输入和按钮（没有 asp 控件）。

我的项目中有一个用户编辑页面，其中输入和选择的值由当前数据设置，应该起作用的是 - 将数据设置为表单上新编辑的数据。

但是，**当我像这样从服务器端更改值时：**

```
tbEmail.Value = dTable.Rows[userIndex]["Email"].ToString(); 
```

（tbEmail 是“文本”类型的输入）

然后，当管理员用户编辑按钮**onserversideclick**事件中的信息时，脚本在某种程度上使用了预设值。如果我评论这些 .Value 设置行，那么它工作正常（**但我想让函数编辑并且在不知道当前数据的情况下编辑不舒服**）

***感谢您的帮助***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T21:19:17.793

如果我没记错的话，我的问题是没有在页面加载时使用 IsPostBack 方法。回答只是以防其他人遇到这个愚蠢的小问题。

# tidesdk - TideSDK 在加载 java 小程序时崩溃

> ID：13541443
> 
> 赞同：0
> 
> 时间：2012-11-24T12:59:02.813
> 
> 标签：tidesdk

加载包含 java 小程序的 iframe 时，一切都会崩溃，包括调试窗口，因此没有关于崩溃的数据。

这是通过加载一个 Tide 项目来完成的，其中只有一个 iframe 元素指向任何网站，然后单击该网站以访问他们的 Java 小程序。一旦打算加载小程序，它就会崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:10:06.007

你能在我们的 github 上提出问题吗：[https ://github.com/TideSDK/TideSDK/](https://github.com/TideSDK/TideSDK/)

另请提及您正在使用的 TideSDK 的确切版本，并提及您所在的平台。

这似乎是在下一个主要版本 1.4.0 中升级的 webkit 的问题。我们将进行同样的调查。

# javascript - 多个标记和 div 背景之间的通信失败

> ID：13541445
> 
> 赞同：4
> 
> 时间：2012-11-24T12:59:14.053
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在尝试在谷歌地图中的一些标记和地图外的一些 div 之间进行通信。如果我将鼠标悬停在地图中的标记上，我想在单独的 Div 中更改背景颜色。如果我只有一个标记，它可以正常工作，但如果我有五个，就像在示例中一样，只会显示列表中的最后一个。

这是为什么？怎么了？有人能帮我吗？

```
function initialize() {
  var locations = [
    ['E021066', 39.521753693611515, 2.480292320251465, 4],
    ['E033012', 39.52724876810637, 2.48166561126709, 5],
    ['E023016', 39.50193802307746, 2.4660873413085938, 3],
    ['E019512', 39.522349566080855, 2.4886178970336914, 2],
    ['E032023', 39.510927787044295, 2.4994325637817383, 1]
  ];
  var latlng = new google.maps.LatLng(39.5075442, 2.476614799999993);
  var myOptions = {
    zoom: 12,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.SATELLITE
  };
  var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
  var infowindow = new google.maps.InfoWindow();
  var marker, i;
  var image1 = 'images/marker1.png';
  var image2 = 'images/marker2.png';
  for (i = 0; i < locations.length; i++) {
    **var id = locations[i][0];**
    marker = new google.maps.Marker({
      position: new google.maps.LatLng(locations[i][1], locations[i][2]),
      map: map,
      icon: image1
    });
    google.maps.event.addListener(marker, 'click', (function(marker, i) {
      return function() {
        marker.setImage("images/marker.png");
      }
    })(marker, i));
    google.maps.event.addListener(marker, 'mouseover', function() {
      this.setIcon(image2);
      **id.style.backgroundColor='#ccc';**
    });
    google.maps.event.addListener(marker, 'mouseout', function() {
      this.setIcon(image1);
      **id.style.backgroundColor='#fff';**
    });
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T16:45:31.087

这是一个常见的问题。marker 是一个全局变量，当循环结束时，它指向最后一个创建的变量。我建议使用函数闭包（createMarker 函数）将鼠标悬停/移出和单击侦听器与标记相关联。就像是：

```
function createMarker(location)
{
  var id = location[0];
  var marker = new google.maps.Marker({
    position: new google.maps.LatLng(location[1], location[2]),
    map: map,
    icon: image1
  });
  google.maps.event.addListener(marker, 'click', function() {
      marker.setImage("images/marker.png");
  });
  google.maps.event.addListener(marker, 'mouseover', function() {
    this.setIcon(image2);
    id.style.backgroundColor='#ccc';
  });
  google.maps.event.addListener(marker, 'mouseout', function() {
    this.setIcon(image1);
    id.style.backgroundColor='#fff';
  });
} 
```

然后你的循环变成：

```
for (i = 0; i < locations.length; i++) {
  createMarker(locations[i]);
} 
```

我不希望它能够工作，但也许在 IE 中除外。

[工作示例](http://www.geocodezip.com/v3_SO_mouseoverA.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T13:19:48.357

谢谢，工作正常，但只有在我转换了 ID 字符串之后。

```
var locations = [
  [E021066, 39.521753693611515, 2.480292320251465, 0]
]; 
```

现在我有最后一个问题，当用户将鼠标移到 div 上时，我还想更改标记图像，不幸的是我不知道我是如何指代标记的。有人有建议吗？

```
<div class="offer_box" id="E021066"><a href="#" onmouseover="createMarker['E021066'].setIcon('marker2.png')" onmouseout="createMarker['E021066'].setIcon('marker1.png')"> 
```

# javascript - 全局数组的值在退出函数后重置

> ID：13541448
> 
> 赞同：0
> 
> 时间：2012-11-24T12:59:48.750
> 
> 标签：javascript, jquery

所以我正在做一些事情，我从一个 JSON 对象分配一个全局数组的值，然后再使用它们。这就是我正在看的

```
var Arr = new Array();
function parseFile() {
        $.ajax({
           type: "GET",
           url: "openCSVScript.php",
           success: function(data){
              Arr = jQuery.parseJSON(data);
              Console.log(Arr[0]); //shows a proper value
           }
        });
    } 
```

但是，在另一个函数中使用了这一行：

```
console.log("Length of Arr: " + Arr.length); //displays 0 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:02:08.997

您没有将结果分配给全局数组。查看 var 名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:02:44.537

你永远不会分配任何东西给`callNumArr`. 所以它*永远*是空的。

除此之外，您的函数很有可能在异步请求完成之前被调用。任何依赖的代码`callNumArr`都应该从`success`回调中调用，除非以其他方式保证它不会在 AJAX 请求完成之前执行（但这不太可能，例如请求可能比预期花费更长的时间等）。

# visual-studio-2012 - 如何为多个 Visual Studio 版本准备 Visual Studio 加载项？

> ID：13541454
> 
> 赞同：0
> 
> 时间：2012-11-24T13:00:58.183
> 
> 标签：visual-studio-2012, visual-studio-addins

我安装了 Visual Studio 2012，我想创建一个新的 Visual Studio 加载项。在创建向导中，我得到了这个窗口：

![应用主机](../Images/cb0cb348f2181709f0e57d0afaae9fd3.png)

我也想为其他（以前的）版本创建一个加载项。有可能吗，如果可以，我该怎么做？我了解 VS 2008 使用不同的插件机制，但有没有办法至少将 VS 2010 添加到该列表中？

我已阅读[Developing Visual Studio addins for multiple versions of Visual Studio](https://stackoverflow.com/questions/13495654/developing-visual-studio-addins-for-multiple-versions-of-visual-studio)，但无法从中真正了解*如何*添加 VS 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:55:52.307

如果您想在 2012 年开发，最简单的方法是在 VS2010 中创建插件项目，然后将其导入 VS2012。

否则，您需要像 VS2012 一样创建插件，然后执行几个步骤：

*   将项目框架更改为 4.0
*   编辑 .AddIn 文件以将 HostApplication 版本设置为 10.0
*   更新所有引用以使用 VS2010 SDK
*   将调试外部程序和工作目录设置为VS2010
*   可能其他几个步骤

# django - Django 管理员：排序/排序动态 readonly_fields

> ID：13541456
> 
> 赞同：1
> 
> 时间：2012-11-24T13:01:00.710
> 
> 标签：django, sorting, admin

如何对 readonly_fields 进行排序/排序（请参阅[https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.readonly_fields](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.readonly_fields)）？

这就是我所做的：

```
class MyUserAdmin(UserAdmin):
    readonly_fields = ('pinCount')
    list_display = ('username', 'email', 'first_name', 'last_name', 'is_staff', 'is_active', 'date_joined', 'last_login', 'pinCount')

    def pinCount(self, instance):
        return Pin.objects.filter(user=instance).count()

admin.site.unregister(User)
admin.site.register(User, MyUserAdmin) 
```

在管理员中，应该可以按 pinCount 对列表进行排序。由于它不是直接的数据库字段，因此根据文档这是不可能的。有什么办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:57:14.203

排序由数据库完成，而不是由管理员完成（这是更改列表上的调试工具栏输出）：

![在此处输入图像描述](../Images/579a723786467145ebac9d4bf2110e30.png)

这就是为什么您不能使用自定义管理方法订购的原因。您可以通过覆盖[方法](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.queryset)`Count`向管理员的查询集添加注释： [`ModeAdmin.queryset`](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.queryset)

```
class MyModelAdmin(admin.ModelAdmin):

    ...

    def queryset(self, request):
        qs = super(MyModelAdmin, self).queryset(request)
        return qs \
            .annotate(pin_count=Count('pin')) \
            .order_by('-pin_count') 
```

或者如果您需要更多控制，您可以尝试[对管理员显示的查询集进行排序，](https://stackoverflow.com/questions/2412770/good-ways-to-sort-a-queryset-django)但我尚未对此进行测试：

```
class MyModel(models.Model):
    ...

    @property
    def pin_count(self):
        return self.pin.count()

import operator  
class MyModelAdmin(admin.ModelAdmin):

    ...

    def queryset(self, request):
        qs = super(MyModelAdmin, self).queryset(request)
        return sorted(qs, key=operator.attrgetter('pin_count')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T14:01:47.940

我自己没有这样做，但似乎有解决方案（一个涉及为相关模型定义自定义 ModelManager，另一个依赖于管理界面魔法）： [Django admin: how to sort by one of the custom list_display 没有数据库字段的字段](https://stackoverflow.com/questions/2168475/django-admin-how-to-sort-by-one-of-the-custom-list-display-fields-that-has-no-d)

您的问题是有问题的模型是用户模型，这可能不是一个好主意。在您的情况下，我建议添加自定义 UserProfile 模型，如下所述： [Django user profile](https://stackoverflow.com/questions/6085025/django-user-profile)

如果您需要经常查询此值，我建议您在用户配置文件模型中为每个用户具体化 pinCount 值。根据您的要求，您可以使用数据库触发器来更新此值。

# android - 如何从Android中的ListViewAdapter隐藏默认键盘

> ID：13541457
> 
> 赞同：6
> 
> 时间：2012-11-24T13:01:02.057
> 
> 标签：android, listview, android-edittext, hide, android-softkeyboard

我正在使用 ListViewAdapter 在我的主页上绑定 ListView，并使用自定义键盘。但是当我单击 EditText 时，会显示默认键盘。

我试图通过使用以下代码来隐藏它：

```
InputMethodManager mgr = (InputMethodManager)activity.getSystemService(Context.INPUT_METHOD_SERVICE);
                    mgr.hideSoftInputFromWindow(diesel.getWindowToken(), 0);

activity.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

但它没有用。

如何从 ListViewAdapter 隐藏默认键盘？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T13:20:25.127

终于我明白了。我解决了这个问题。刚刚在 ListViewAdapter 中添加了以下行。

(EditTextName).setInputType(0);

现在它不会在 EditText Click 或 Touch 上打开默认键盘。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T13:07:52.240

适配器不适合进行**任何**与 UI 相关的活动。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-11T05:56:05.083

如果要在单击按钮等事件时隐藏键盘，请使用此

```
public void onClick(View v)
{
     InputMethodManager imm = (InputMethodManager) v.getContext()
                        .getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(v.getWindowToken(), 0);
} 
```

# database - 我的服务器上的语言编码和显示问题

> ID：13541459
> 
> 赞同：2
> 
> 时间：2012-11-24T13:01:28.070
> 
> 标签：database, unicode, utf-8, http-headers, arabic

我的应用程序中有阿拉伯语内容。在我的开发环境（localhost XAMPP）上一切正常。现在我使用 Plesk 移动到 Windows 2008 Server，但阿拉伯文内容不显示。相反，我得到问号???????。我检查了数据库，我可以看到其中的阿拉伯语内容，并且我确保数据库存储了 UTF-8。什么原因会导致这种情况？我真的很感激任何帮助。

# java - jsoup中什么方法可以返回修改后的html？

> ID：13541460
> 
> 赞同：3
> 
> 时间：2012-11-24T13:01:51.983
> 
> 标签：java, html, jakarta-ee, html-parsing, jsoup

当我用**jsoup****解析**html 文件（存储在本机中）时。我修改了html文件中的一些元素，**所以我想保存修改后的html，并替换旧的？**有人知道jsoup 中的**哪种方法可以完成这项工作吗？** 非常感谢！！！

 ******* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T13:08:49.263

你可以写任何一个的内容

```
document.toString() 
```

或者

```
document.outerHtml() 
```

归档，从哪里`document`得到

```
Document document = Jsoup.connect("http://...").get();
// any document modifications... 
```

像这样：

```
BufferedWriter htmlWriter = 
     new BufferedWriter(new OutputStreamWriter(new FileOutputStream(outputFile), "UTF-8"));
htmlWriter.write(document.toString()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T13:14:13.570

将修改后的 jSoup 元素更改为 HTML 字符串：

[http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#html%28%29](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#html%28%29)

```
String html = document.html(); 
```

写入文件：

```
Writer writer = new PrintWriter("/file.html", html);
writer.write(html);
writer.close(); 
```

更多信息： [使用 jsoup 将自定义 css 添加到 html 代码](https://stackoverflow.com/questions/5614352/add-custom-css-to-html-code-with-jsoup)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-27T12:32:06.843

有 6 票的声明答案是正确的，除了一部分，它需要多 1 行代码。

“htmlWriter.close();” 或“htmlWriter.flush();” 如果你愿意，或者两者兼而有之。在他的代码段末尾，因为我遇到了同样的问题并且我使用了他的版本，但是他缺少这部分（从帖子的第一条评论可以看出：gist.github.com/4139609。所以完成的代码段是：

```
BufferedWriter htmlWriter = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(outputFile), "UTF-8"));
System.out.println("\n" + doc.outerHtml());
htmlWriter.write(doc.toString());
htmlWriter.flush();
htmlWriter.close(); 
```******

# ruby-on-rails - 是否有类似慢性的自然语言解析器用于时间/日期间隔？

> ID：13541463
> 
> 赞同：0
> 
> 时间：2012-11-24T13:01:59.207
> 
> 标签：ruby-on-rails

我正在尝试找到一个可以解析的宝石，就像[Chronic](http://lee.jarvis.co/chronic/)一样，重复间隔。`weekly`或`every three days`或之类的东西`twice a year`。

有谁知道有没有？慢性做它，我只是想念它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:36:41.077

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T14:56:13.340

我不知道有什么宝石可以提供这个。`Repeater`通过使用 Chronic 的类（等）`RepeaterDay`，您也许可以到达某个地方。`RepeaterWeek`

似乎没有关于这些类的任何文档，但是您可以在Chronic 的 GitHub 的**测试目录中看到一些示例用法：** [https ://github.com/mojombo/chronic](https://github.com/mojombo/chronic)

-

你到底希望收到什么？下一次发生的时间，定义时间段内的时间对象数组，还是其他？

# arrays - 不使用 eval 的间接寻址

> ID：13541465
> 
> 赞同：2
> 
> 时间：2012-11-24T13:02:04.410
> 
> 标签：arrays, bash, indirection

我正在寻找一种干净的方式（没有 eval 命令）来间接引用数组。这是我想要的更准确的描述：

```
function valueof {
   echo "indirection1 \$$1=${!1}"
   eval "echo indirection2 \\\$$1=\${$1[@]}" # Untill this step its fine.

   # My final objective is to do this (but eval is not a very sexy solution) : 
   for i in $(eval "echo \${$1[@]}") ; do 
      echo $i
   done

   # Here is the "problem", ie. "bad substitution"
   echo "indirection3 \$$1=${!1[@]}"  
   # "1[@]" is evaluated first i guess?
} 
```

使用以下值调用：

```
a=("a" "aa" "aaa")
b=("b" "bb" "bbb")
valueof a
valueof b 
```

我的输出是：

```
indirection1 $a=a
indirection2 $a=a aa aaa
a
aa
aaa
indirection1 $b=b
indirection2 $b=b bb bbb
b
bb
bbb 
```

在 stderr 上：

```
prog.sh: line 10: indirection3 $1=${!1[@]}: bad substitution
prog.sh: line 10: indirection3 $1=${!1[@]}: bad substitution 
```

感谢您对此问题的回答/评论:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:13:15.877

我建议从 git devel 分支构建 Bash，并`typeset -n`像大多数其他带有数组的健全的 shell 一样使用。所有其他涉及函数和数组的解决方案都需要`eval`或利用古怪的未记录行为。两者都需要同等的照顾，并且彼此之间不一定有优势。

这是一个通用示例，它演示了您可以在没有 eval 的情况下间接执行的所有操作。命名空间冲突仍然可能发生。

```
isSubset() {
    local -a 'xkeys=("${!'"$1"'[@]}")' 'ykeys=("${!'"$2"'[@]}")'
    set -- "${@/%/[key]}"

    (( ${#xkeys[@]} <= ${#ykeys[@]} )) || return 1

    local key
    for key in "${xkeys[@]}"; do
        [[ ${!2+_} && ${!1} == "${!2}" ]] || return 1
    done
}

a=(abc def [4]=ghi jkl)
b=(abc def [4]=ghi jkl)
c=(abc [3]=def [6]=ghi xyz)
isSubset a b
echo $? # 0
isSubset b c
echo $? # 1 
```

这在某些方面确实`eval`是伪装的。大多数人都没有意识到，每当他们将变量名传递给内置函数和算术表达式时，他们都在有效地执行 eval。您必须始终确保变量名称和索引在内部受到控制，并且永远不会受到用户输入或您无法保证结果的其他副作用的影响。

从您对分词和引用的滥用来看，您可能应该改用另一种语言。Bash 并不是真的要处理安全封装。

# apache - Mod_Rewrite 重写 URL 而不更改地址栏

> ID：13541466
> 
> 赞同：1
> 
> 时间：2012-11-24T13:02:07.990
> 
> 标签：apache, mod-rewrite, web

好的，我看到了很多关于这个主题的不同帖子。
但我只是不明白这一切是如何运作的。
所以我不得不再次发布这个问题。

所以我知道我可以使用 Mod_Rewrite 进行重写或重定向。我也知道，如果我不希望地址栏发生变化，我必须不将 R Prop 设置在我的规则后面。

我考虑了所有这些事情并创建了我的规则：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^blabla\.ch$ [OR]
RewriteCond %{HTTP_HOST} ^www\.blabla\.ch$
RewriteRule ^/?$ "http\:\/\/blabla\.ch\/wordpress" [L] 
```

所以你可以看到，如果有人进入域 www.blabla.ch 我想将其重写为 www.blabla.ch/wordpress，而不更改地址栏。

但这行不通。

我将此规则写入根 www 文件夹的 .htaccess 中。

我尝试了不同的东西，在不同的网站上提到过。请有人告诉我，为什么这不起作用？我的错误是什么？我在哪里以错误的方式思考？

# c# - 如何覆盖 TreeNode.Clone() 方法？

> ID：13541472
> 
> 赞同：2
> 
> 时间：2012-11-24T13:02:46.110
> 
> 标签：c#, .net, winforms

我有自己的类`MyTreeNode`派生自`TreeNode`：

```
public class MyTreeNode : System.Windows.Forms.TreeNode
{
    [Localizable(true)]
    public bool Foo { get; set; }
} 
```

我尝试克隆节点：

```
MyTreeNode myTreeNode = new MyTreeNode();
myTreeNode.Foo = foo;
//
//And here is the problem, all fields have been copied to the new node but Foo
//
MyTreeNode newNode = (MyTreeNode)myTreeNode.Clone(); 
```

结果，`newNode`有空`Foo`字段。我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T13:14:49.257

如果您想`Foo`在调用 时也被复制`Clone()`，则需要重写该`Clone()`方法并添加执行此操作的逻辑。

您需要做的就是将其添加到您的`MyTreeNode`课程中：

```
public override object Clone()
{
    var obj = (MyTreeNode)base.Clone();
    obj.Foo = this.Foo;
    return obj;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T13:12:39.357

在你的 MyTreeNode 类中尝试这样的事情

```
public override object Clone()
{
    object objReturn = base.Clone();
    ((MyTreeNode)objReturn).Foo = this.Foo;
    return objReturn;
} 
```

# javascript - 带有文件输入的单击和 onchange 事件在 ie 中无法正常工作

> ID：13541473
> 
> 赞同：2
> 
> 时间：2012-11-24T13:02:59.330
> 
> 标签：javascript, iframe, file-upload

我有一个文件上传脚本，可以在包括 ie 在内的所有主要浏览器中正常工作，但是当我隐藏文件输入并为其放置一个按钮并尝试使用 iframe 方法上传它时，我使用 javascript 调用文件输入的点击事件和在用户选择一个文件后，我再次使用 javascript 调用 onchange 事件以使用 iframe 方法提交表单条目...

我分析了脚本，发现当我使用 javascript click 事件调用文件输入时它会导致这个问题，否则它对我来说真的很好......

现在我想使用 IE 中的按钮调用文件输入...

脚本如下：

```
<form><input type="file" name="file_url" id="file_url" onChange="fileUpload(this.form,'filename.php','div_id'); return false;" />

</form>
<img src="uploadbtn.png" onClick="callclick(); return false;" />
<div id="div_id"></div> 
```

# c# - 加载 Xml 文件引发异常 HRESULT：0xC00CE584

> ID：13541476
> 
> 赞同：1
> 
> 时间：2012-11-24T13:03:38.723
> 
> 标签：c#, windows-8, windows-runtime

我正在尝试从 Steam 加载 XML 文件，但它抛出了这个异常 HRESULT: 0xC00CE584。从 localhost 和其他网站加载其他 xml 文件正在工作。我还尝试将所有 XMLSettings 设置为 true，但它不起作用。

这是我的代码：

```
Uri steamUriTemp = new Uri("http://api.steampowered.com/ISteamNews/GetNewsForApp/v0002/?appid=440&count=3&maxlength=300&format=xml");
var steamXML = await XmlDocument.LoadFromUriAsync(steamUriTemp); 
```

这是我要加载的 XML 文件：[http ://api.steampowered.com/ISteamNews/GetNewsForApp/v0002/?appid=440&count=3&maxlength=300&format=xml](http://api.steampowered.com/ISteamNews/GetNewsForApp/v0002/?appid=440&count=3&maxlength=300&format=xml)

这个 xml 文件有问题吗？有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T16:30:04.427

您可以尝试传递一个将 ProhibitDTD 属性设置为 false 的 XmlLoadSettings 对象，如下所示：

```
var steamXML = await XmlDocument.LoadFromUriAsync(steamUriTemp, new XmlLoadSettings{ProhibitDTD = False}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:24:32.057

此错误的最常见原因是文件中包含无效字符。类似于 & 或 <。这些是 XML 特殊字符，当用作数据而不是指标时会导致违规。

您尝试加载的文件中包含一些 HTML 标记，这很可能是导致此问题的原因。特别是 Team Fortress 2 的 Contents 元素。我认为如果您删除保留字符，该文件将像您测试的其他文件一样正常加载。

# webgl - 各种尺寸的webgl中的高斯模糊

> ID：13541477
> 
> 赞同：2
> 
> 时间：2012-11-24T13:03:52.857
> 
> 标签：webgl

有没有办法在 WebGL 中快速获得着色器中高斯模糊图像的值？

一个代码片段会很好。

可能 mipmap 会有所帮助，但我不知道如何使用它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:37:36.800

使用片段着色器高斯模糊在全屏四边形上渲染图像。如果在 2 个通道中分别渲染垂直模糊和水平模糊会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-27T16:22:45.897

这是一个不错的、灵活的单通道模糊着色器：[https ://www.shadertoy.com/view/XdfGDH](https://www.shadertoy.com/view/XdfGDH)

# ios - Xcode错误词法或预处理器？

> ID：13541478
> 
> 赞同：1
> 
> 时间：2012-11-24T13:04:09.613
> 
> 标签：ios, xcode, frameworks, smtp, directory

我正在制作一个涉及表单的应用程序。我有我的`SMTP`框架，但我无法构建它，因为它给了我你可以在下面的屏幕截图中看到的错误。我也有一个框架来展示我是如何设置它的。有人可以帮忙吗？

```
Lexical or Preprocessor Issue: NS Data + Base64Additions.h file... 
```

![词法或预处理器问题](../Images/e077cee57cbaa5941334f752863492b5.png)

![在此处输入图像描述](../Images/0670d425cd58f6f30e4cb4ff3eac6947.png)

# java - 找不到符号符号：构造函数 A() 位置：A 类

> ID：13541481
> 
> 赞同：3
> 
> 时间：2012-11-24T13:04:47.653
> 
> 标签：java, class, object, inheritance, constructor

```
class A {
     A(int i){    
        System.out.println("A(int)");
     }
 }

class B1 extends A{
    public static void main(String args[]){
        A ob=new A(2);  
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T13:07:43.673

您已*在* `constructor`. `class A`因此，*编译器*不提供*默认的 0-arg* `constructor`。

现在，在 中`class B1`，您还没有定义任何`constructor`，因此*编译器*在该类中添加了一个*默认的* *0-arg* `constructor`，如下所示：-

```
public B1() {
    super();
} 
```

如您所见，*Compiler*添加了一个`super()`调用来调用 的`0-arg constructor`，`super class`在`class A`本例中为 。

现在，由于您的`class A`, 没有任何*0-arg* `constructor`，因此出现错误。

* * *

**因此，**您可以`0-arg constructor`在 A 类中添加一个：-

```
public A() {

} 
```

这将解决问题。

* * *

**或者，**`0-arg constructor`在您的`class B1`显式中添加 a，并添加对of的`super()`调用：-`1-arg constructor``class A`

```
public B1() {
    super(0);  // Or any value
} 
```

* * *

但是，第二个解决方案中的问题是，从您的每个构造函数中`class B1`，您必须显式调用`1-arg constructor`of `class A`。一旦你错过一个，你会`compiler`立即得到一个错误。

因此，我建议与`1st option`. `0-arg constructor`在`class A`. _ 你们都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:09:55.193

基本上你需要在子类中定义一个构造函数，像这样：

```
class B1 extends A{

    public B1(int x){
       super(x);
    }

    ...
} 
```

或者

在类 A 中添加一个默认构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T13:36:22.080

```
 class A {

    A(){
    }
    A(int i){    
        System.out.println("A(int)");
     }
 }

class B1 extends A{
    public static void main(String args[]){
        A ob=new A(2);  
    }
} 
```

> 在这种情况下，您必须提供默认构造函数，因为 A(int i) 隐藏了它，并且当您制作 a 类的对象时，它会显示错误。上面我的代码工作正常。

# android - 触摸覆盖项目时出现空指针异常

> ID：13541482
> 
> 赞同：0
> 
> 时间：2012-11-24T13:04:52.940
> 
> 标签：android, google-maps, overlayitem

嘿，我是 android 新手，我正在处理一个面向地图的项目，现在我在触摸覆盖项目时遇到问题，它在 log-cat 中显示空指针异常，我不明白这是什么意思。这里我有两个类MyPlacemapActivity 和 AddItemizedOverlay 有人请帮我解决这个问题，这是我的课程代码

**AddItemizedOverlay.java**

```
public class AddItemizedOverlay extends ItemizedOverlay<OverlayItem> {

       private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();

       private Context context;
       String reference;
       private String username;

       String p_u_name;
       public AddItemizedOverlay(Drawable defaultMarker) {
            super(boundCenterBottom(defaultMarker));
       }

       public AddItemizedOverlay(Drawable defaultMarker, Context context) {
            this(defaultMarker);
            this.context = context;
       }

       public AddItemizedOverlay(Drawable defaultMarker, Context context,String StringData) {
                   this(defaultMarker);
                   this.context = context;
       this.username=StringData;
       System.out.println("AdditemizedOverlay:got username:"+username +StringData);
              }

       @Override
       public boolean onTouchEvent(MotionEvent event, MapView mapView)
       {   
               if (event.getAction() == 1) {
               GeoPoint geopoint = mapView.getProjection().fromPixels(
                   (int) event.getX(),
                   (int) event.getY());
           }
           return false;
       } 

       @Override
       protected OverlayItem createItem(int i) {
          return mapOverlays.get(i);
       }
       @Override
       public int size() {
          return mapOverlays.size();
       }

      @Override
       protected boolean onTap(int index) {
         OverlayItem item = mapOverlays.get(index);
         AlertDialog.Builder dialog = new AlertDialog.Builder(this.context);
         reference = item.getSnippet();
         username =  item.getTitle();
         dialog.setTitle("");
         dialog.setMessage("Do you want ot park here ?");
         System.out.println("Inside Additemized:"+reference+username);
         dialog.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {

                SharedPreferences prefs = context.getSharedPreferences("myprefs", 0);
                SharedPreferences.Editor editor =prefs.edit();
                editor.putString("KEY_REFERENCE", reference);
                editor.putString("KEY_USERNAME", username);
                editor.commit();                

                Intent intent = new Intent(context, SinglePlaceActivity.class);
                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                context.startActivity(intent);
            }
         })
            .setNegativeButton("No",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    // if this button is clicked, just close
                    // the dialog box and do nothing
                    dialog.cancel();
//                  MainActivity.this.finish();
                }
            });
         dialog.show();
         return true;
       }

       public void addOverlay(OverlayItem overlay) {
          mapOverlays.add(overlay);
       }

       public void populateNow(){
           this.populate();
       }

    } 
```

**MyPlacemapActivity.java**

```
public class MyPlacemapActivity extends MapActivity {
    // Nearest places
    PlacesList nearPlaces;

    // Map view
    MapView mapView;

    // Map overlay items
    List<Overlay> mapOverlays;

    AddItemizedOverlay itemizedOverlay;
    MyItemizedOverlay myitemizedoverlay;
    FindItemizedOverlay finditemizedoverlay;

    GeoPoint geoPoint;
    // Map controllers
    MapController mc;

    Drawable defaultMarker,drawable;

    double latitude;
    double longitude;
    OverlayItem overlayitem;

    String p_u_name;
    String type,keyword;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map_places);

        SharedPreferences prefs = getSharedPreferences("myprefs", 0);
        p_u_name = prefs.getString("KEY_USERNAME", "");

        Intent i = getIntent();

        // Users current geo location
        String user_latitude = i.getStringExtra("user_latitude");
        String user_longitude = i.getStringExtra("user_longitude");
        type = i.getExtras().getString("KEY_TYPES");
        keyword =i.getExtras().getString("KEY_KEYWORD");

        System.out.println("sarath"+user_latitude + user_longitude + type);

        // Nearplaces list
        nearPlaces = (PlacesList) i.getSerializableExtra("near_places");

        mapView = (MapView) findViewById(R.id.mapView);
        mapView.setBuiltInZoomControls(true);

        mapOverlays = mapView.getOverlays();

        // Geopoint to place on map
        geoPoint = new GeoPoint((int) (Double.parseDouble(user_latitude) * 1E6),(int) (Double.parseDouble(user_longitude) * 1E6));

        // Drawable marker icon
        Drawable drawable_user = this.getResources().getDrawable(R.drawable.mark_red);

        myitemizedoverlay = new MyItemizedOverlay(drawable_user, this);

        // Map overlay item
        overlayitem = new OverlayItem(geoPoint, "Your Location","That is you!");

        myitemizedoverlay.addOverlay(overlayitem);

        mapOverlays.add(myitemizedoverlay);
        myitemizedoverlay.populateNow();

        System.out.println("keyword:"+keyword+"type:"+type);
//----------------------------------------------------------------------------------------------------------        
        // Drawable marker icon
        if(type.equalsIgnoreCase("gas_station")&&keyword.equalsIgnoreCase("gas_station")){
             drawable= this.getResources().getDrawable(R.drawable.mark_gasstation);
             finditemizedoverlay = new FindItemizedOverlay(drawable);

        mc = mapView.getController();

        // These values are used to get map boundary area
        // The area where you can see all the markers on screen
        int minLat = Integer.MAX_VALUE;
        int minLong = Integer.MAX_VALUE;
        int maxLat = Integer.MIN_VALUE;
        int maxLong = Integer.MIN_VALUE;

        // check for null in case it is null
        if (nearPlaces.results != null) {

            // loop through all the places
            for (Place mplace : nearPlaces.results) {

                latitude = mplace.geometry.location.lat; // latitude
                longitude = mplace.geometry.location.lng; // longitude

                // Geopoint to place on map
                geoPoint = new GeoPoint((int) (latitude * 1E6),
                        (int) (longitude * 1E6));

                // Map overlay item
                overlayitem = new OverlayItem(geoPoint,p_u_name,mplace.reference);

                finditemizedoverlay.addOverlay(overlayitem);

                // calculating map boundary area
                minLat  = (int) Math.min( geoPoint.getLatitudeE6(), minLat );
                minLong = (int) Math.min( geoPoint.getLongitudeE6(), minLong);
                maxLat  = (int) Math.max( geoPoint.getLatitudeE6(), maxLat );
                maxLong = (int) Math.max( geoPoint.getLongitudeE6(), maxLong );
            }
            mapOverlays.add(finditemizedoverlay);

            // showing all overlay items
            finditemizedoverlay.populateNow();
        }

        // Adjusting the zoom level so that you can see all the markers on map
        mapView.getController().zoomToSpan(Math.abs( minLat - maxLat ), Math.abs( minLong - maxLong ));

        // Showing the center of the map
        mc.animateTo(new GeoPoint((maxLat + minLat)/2, (maxLong + minLong)/2 ));
        mapView.postInvalidate();
        }

        else if(type.equalsIgnoreCase("shopping_mall")&&keyword.equalsIgnoreCase("shopping_mall")){
            drawable= this.getResources().getDrawable(R.drawable.mark_shopping);
             finditemizedoverlay = new FindItemizedOverlay(drawable);

        mc = mapView.getController();

        // These values are used to get map boundary area
        // The area where you can see all the markers on screen
        int minLat = Integer.MAX_VALUE;
        int minLong = Integer.MAX_VALUE;
        int maxLat = Integer.MIN_VALUE;
        int maxLong = Integer.MIN_VALUE;

        // check for null in case it is null
        if (nearPlaces.results != null) {

            // loop through all the places
            for (Place mplace : nearPlaces.results) {

                latitude = mplace.geometry.location.lat; // latitude
                longitude = mplace.geometry.location.lng; // longitude

                // Geopoint to place on map
                geoPoint = new GeoPoint((int) (latitude * 1E6),
                        (int) (longitude * 1E6));

                // Map overlay item
                overlayitem = new OverlayItem(geoPoint,p_u_name,mplace.reference);

                finditemizedoverlay.addOverlay(overlayitem);

                // calculating map boundary area
                minLat  = (int) Math.min( geoPoint.getLatitudeE6(), minLat );
                minLong = (int) Math.min( geoPoint.getLongitudeE6(), minLong);
                maxLat  = (int) Math.max( geoPoint.getLatitudeE6(), maxLat );
                maxLong = (int) Math.max( geoPoint.getLongitudeE6(), maxLong );
            }
            mapOverlays.add(finditemizedoverlay);

            // showing all overlay items
            finditemizedoverlay.populateNow();
        }

        // Adjusting the zoom level so that you can see all the markers on map
        mapView.getController().zoomToSpan(Math.abs( minLat - maxLat ), Math.abs( minLong - maxLong ));

        // Showing the center of the map
        mc.animateTo(new GeoPoint((maxLat + minLat)/2, (maxLong + minLong)/2 ));
        mapView.postInvalidate();
        }

    else if(type.equalsIgnoreCase("restaurant")&&keyword.equalsIgnoreCase("restaurant")){
        drawable= this.getResources().getDrawable(R.drawable.mark_restaurant_blue);
         finditemizedoverlay = new FindItemizedOverlay(drawable);

    mc = mapView.getController();

    // These values are used to get map boundary area
    // The area where you can see all the markers on screen
    int minLat = Integer.MAX_VALUE;
    int minLong = Integer.MAX_VALUE;
    int maxLat = Integer.MIN_VALUE;
    int maxLong = Integer.MIN_VALUE;

    // check for null in case it is null
    if (nearPlaces.results != null) {

        // loop through all the places
        for (Place mplace : nearPlaces.results) {

            latitude = mplace.geometry.location.lat; // latitude
            longitude = mplace.geometry.location.lng; // longitude

            // Geopoint to place on map
            geoPoint = new GeoPoint((int) (latitude * 1E6),
                    (int) (longitude * 1E6));

            // Map overlay item
            overlayitem = new OverlayItem(geoPoint,p_u_name,mplace.reference);

            finditemizedoverlay.addOverlay(overlayitem);

            // calculating map boundary area
            minLat  = (int) Math.min( geoPoint.getLatitudeE6(), minLat );
            minLong = (int) Math.min( geoPoint.getLongitudeE6(), minLong);
            maxLat  = (int) Math.max( geoPoint.getLatitudeE6(), maxLat );
            maxLong = (int) Math.max( geoPoint.getLongitudeE6(), maxLong );
        }
        mapOverlays.add(finditemizedoverlay);

        // showing all overlay items
        finditemizedoverlay.populateNow();
    }

    // Adjusting the zoom level so that you can see all the markers on map
    mapView.getController().zoomToSpan(Math.abs( minLat - maxLat ), Math.abs( minLong - maxLong ));

    // Showing the center of the map
    mc.animateTo(new GeoPoint((maxLat + minLat)/2, (maxLong + minLong)/2 ));
    mapView.postInvalidate();
    }

    else if(type.equalsIgnoreCase("parking")&&keyword.equalsIgnoreCase("garage parking")){
        drawable= this.getResources().getDrawable(R.drawable.mark_blue);
         itemizedOverlay = new AddItemizedOverlay(drawable);

    mc = mapView.getController();

    // These values are used to get map boundary area
    // The area where you can see all the markers on screen
    int minLat = Integer.MAX_VALUE;
    int minLong = Integer.MAX_VALUE;
    int maxLat = Integer.MIN_VALUE;
    int maxLong = Integer.MIN_VALUE;

    // check for null in case it is null
    if (nearPlaces.results != null) {

        // loop through all the places
        for (Place mplace : nearPlaces.results) {

            latitude = mplace.geometry.location.lat; // latitude
            longitude = mplace.geometry.location.lng; // longitude

            // Geopoint to place on map
            geoPoint = new GeoPoint((int) (latitude * 1E6),
                    (int) (longitude * 1E6));

            // Map overlay item
            overlayitem = new OverlayItem(geoPoint,p_u_name,mplace.reference);

            System.out.println("inside mymap:"+mplace.reference+p_u_name);

            itemizedOverlay.addOverlay(overlayitem);

            // calculating map boundary area
            minLat  = (int) Math.min( geoPoint.getLatitudeE6(), minLat );
            minLong = (int) Math.min( geoPoint.getLongitudeE6(), minLong);
            maxLat  = (int) Math.max( geoPoint.getLatitudeE6(), maxLat );
            maxLong = (int) Math.max( geoPoint.getLongitudeE6(), maxLong );
        }
        mapOverlays.add(itemizedOverlay);

        // showing all overlay items
        itemizedOverlay.populateNow();
    }

    // Adjusting the zoom level so that you can see all the markers on map
    mapView.getController().zoomToSpan(Math.abs( minLat - maxLat ), Math.abs( minLong - maxLong ));

    // Showing the center of the map
    mc.animateTo(new GeoPoint((maxLat + minLat)/2, (maxLong + minLong)/2 ));
    mapView.postInvalidate();
    }
    else if(type.equalsIgnoreCase("parking")&&keyword.equalsIgnoreCase("street parking")){
        drawable= this.getResources().getDrawable(R.drawable.mark_blue);
         itemizedOverlay = new AddItemizedOverlay(drawable);

    mc = mapView.getController();

    // These values are used to get map boundary area
    // The area where you can see all the markers on screen
    int minLat = Integer.MAX_VALUE;
    int minLong = Integer.MAX_VALUE;
    int maxLat = Integer.MIN_VALUE;
    int maxLong = Integer.MIN_VALUE;

    // check for null in case it is null
    if (nearPlaces.results != null) {

        // loop through all the places
        for (Place mplace : nearPlaces.results) {

            latitude = mplace.geometry.location.lat; // latitude
            longitude = mplace.geometry.location.lng; // longitude

            // Geopoint to place on map
            geoPoint = new GeoPoint((int) (latitude * 1E6),
                    (int) (longitude * 1E6));

            // Map overlay item
            overlayitem = new OverlayItem(geoPoint,p_u_name,mplace.reference);

            System.out.println("inside mymap:"+mplace.reference +p_u_name);

            itemizedOverlay.addOverlay(overlayitem);

            // calculating map boundary area
            minLat  = (int) Math.min( geoPoint.getLatitudeE6(), minLat );
            minLong = (int) Math.min( geoPoint.getLongitudeE6(), minLong);
            maxLat  = (int) Math.max( geoPoint.getLatitudeE6(), maxLat );
            maxLong = (int) Math.max( geoPoint.getLongitudeE6(), maxLong );
        }
        mapOverlays.add(itemizedOverlay);

        // showing all overlay items
        itemizedOverlay.populateNow();
    }

    // Adjusting the zoom level so that you can see all the markers on map
    mapView.getController().zoomToSpan(Math.abs( minLat - maxLat ), Math.abs( minLong - maxLong ));

    // Showing the center of the map
    mc.animateTo(new GeoPoint((maxLat + minLat)/2, (maxLong + minLong)/2 ));
    mapView.postInvalidate();
    }
    else
    {
         AlertDialog.Builder builder = new AlertDialog.Builder(MyPlacemapActivity.this);
           builder.setTitle("Connection Error.");
           builder.setMessage("Try again?.")  
                  .setCancelable(false)
                  .setPositiveButton("OK", new DialogInterface.OnClickListener() {
                      public void onClick(DialogInterface dialog, int id) {
                          Intent u = new Intent(getApplicationContext(),Find_TabActivity.class);
                          startActivity(u);
                        dialog.dismiss();
                      }
                  });                     
           AlertDialog alert = builder.create();
           alert.show();    
    }
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T13:35:28.577

问题出在这条线上：

```
finditemizedoverlay = new FindItemizedOverlay(drawable); 
```

您正在初始化 a`ItemizedOverlay`而没有传递`onTap()`创建`AletDialo`.

您应该将其替换为：

```
finditemizedoverlay = new FindItemizedOverlay(drawable, this); 
```

`Note:`如果您将 logcat 放在您的问题中，它会有所帮助。

问候。

# windows-8 - Windows 8、.NET 4.5 DefineUninitializedData 问题

> ID：13541483
> 
> 赞同：2
> 
> 时间：2012-11-24T13:04:54.887
> 
> 标签：windows-8, .net-4.5, reflection.emit, il

我试图找出我们的编译器和 .NET 4.5 与 Windows 8 的问题的根源。我已将其简化为一小段代码，并想知道是否有人对此问题有任何见解。我编写了一些 C#，它使用反射来生成显示问题的程序集。C# 是（在 VS2010 解决方案中[https://dl.dropbox.com/u/10931452/sdata.zip](https://dl.dropbox.com/u/10931452/sdata.zip)）在这篇文章的底部。它创建一个类“sdata”并向其添加一个名为“blank16”的静态字段。然后它创建一个初始化这个字段的静态构造函数。生成的可执行文件将写入 c:\temp\sdatatest.exe。当 sdatatest 在 .NET 4.5 下的 Windows 8 上运行时，它会产生：

> 未处理的异常：System.TypeInitializationException：“sdata”的类型初始化程序引发了异常。---> System.AccessViolationException: 试图读取或写入受保护的内存。这通常表明其他内存已损坏。在 sdata..cctor() --- 内部异常堆栈跟踪结束 --- 在 sdata.main()

在安装了 .NET 4.5 的 Windows 7 上运行时，它会运行。在早期的 .NET 框架上运行时，它也可以运行——并且已经运行了十年。

生成的 IL 看起来有效：

![在此处输入图像描述](../Images/815f2d40155eb3ac0d9671fd0b84c31b.png)

JITed x86 代码看起来也完全有效：

![在此处输入图像描述](../Images/74775d5f47120409b7afb3d748a88d86.png)

edi 的值看起来可疑地像加载的可执行文件中的位置，而不是托管内存空间中的位置，如果它是只读的，则可以解释访问冲突。为什么这会在 Windows 8 上发生变化？

C# 生成 sdatatest 程序集：

```
using System;
using System.IO;
using System.Reflection;
using System.Reflection.Emit;
using System.Threading;

namespace sdata
{
    class Program
    {
        static void Main( string[] args )
        {
            AssemblyName name = new AssemblyName( );
            name.Name = "sdatatest.exe";
            string exepath = "c:\\temp\\" + name.Name;
            name.CodeBase = "file:://" + exepath;
            AssemblyBuilder ass_bldr = Thread.GetDomain( ).DefineDynamicAssembly( name, AssemblyBuilderAccess.RunAndSave, Path.GetDirectoryName( exepath ));
            ModuleBuilder module_bldr = ass_bldr.DefineDynamicModule( Path.GetFileName( exepath ), Path.GetFileName( exepath ), true );
            TypeBuilder tb = module_bldr.DefineType( "sdata", TypeAttributes.Public | TypeAttributes.AnsiClass );
            TypeBuilder sixteen = module_bldr.DefineType( "sixteen", TypeAttributes.Sealed, typeof( ValueType ), PackingSize.Size8, 16 ); // value type of size 16
            Type t16 = sixteen.CreateType( );
            var fb = tb.DefineUninitializedData( "blank16", 16, FieldAttributes.Public | FieldAttributes.Static );
            ConstructorBuilder cons = tb.DefineConstructor( MethodAttributes.Static, CallingConventions.Standard, Type.EmptyTypes ); // ..cctor
            var il = cons.GetILGenerator( );
            il.BeginScope( );
            il.Emit( OpCodes.Ldsflda, fb );
            il.Emit( OpCodes.Ldc_I4, 0 );
            il.Emit( OpCodes.Ldc_I4, 16 );
            il.Emit( OpCodes.Initblk );
            il.Emit( OpCodes.Ret );
            il.EndScope( );
            MethodBuilder mb = tb.DefineMethod( "main", MethodAttributes.Static | MethodAttributes.Public );
            il = mb.GetILGenerator( );
            il.BeginScope( );
            il.Emit( OpCodes.Ldsflda, fb );
            il.Emit( OpCodes.Pop );
            il.Emit( OpCodes.Ret );
            il.EndScope( );
            tb.CreateType( );
            ass_bldr.SetEntryPoint( mb );
            ass_bldr.Save( Path.GetFileName( exepath ) );
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T21:41:31.580

答案是 Windows 8 更改了 .sdata 部分的访问权限：使其成为只读的。如果您使用的是 DefineUninitializedData，那么您的代码可能会在 Windows 8 上中断并且需要更改。

# c# - 使用 RenderTarget2D 从 Stream 加载 Texture2D，游戏窗口最小化后纹理消失

> ID：13541489
> 
> 赞同：1
> 
> 时间：2012-11-24T13:05:54.263
> 
> 标签：c#, xna-4.0

我从目录加载纹理时遇到了一些问题。也许先编码：

```
private Texture2D LoadTextureStream(string filePath)
{
    Texture2D file = null;
    RenderTarget2D result = null;

    try
    {
        using (System.IO.Stream titleStream = TitleContainer.OpenStream(filePath))
        {
            file = Texture2D.FromStream(GraphicsDevice, titleStream);
        }
    }
    catch
    {
        throw new System.IO.FileLoadException("Cannot load '" + filePath + "' file!");
    }
    PresentationParameters pp = GraphicsDevice.PresentationParameters;
    //Setup a render target to hold our final texture which will have premulitplied alpha values
    result = new RenderTarget2D(GraphicsDevice, file.Width, file.Height, true, pp.BackBufferFormat, pp.DepthStencilFormat);

    GraphicsDevice.SetRenderTarget(result);
    GraphicsDevice.Clear(Color.Black);

    //Multiply each color by the source alpha, and write in just the color values into the final texture
    BlendState blendColor = new BlendState();
    blendColor.ColorWriteChannels = ColorWriteChannels.Red | ColorWriteChannels.Green | ColorWriteChannels.Blue;

    blendColor.AlphaDestinationBlend = Blend.Zero;
    blendColor.ColorDestinationBlend = Blend.Zero;

    blendColor.AlphaSourceBlend = Blend.SourceAlpha;
    blendColor.ColorSourceBlend = Blend.SourceAlpha;

    SpriteBatch spriteBatch = new SpriteBatch(GraphicsDevice);
    spriteBatch.Begin(SpriteSortMode.Immediate, blendColor);
    spriteBatch.Draw(file, file.Bounds, Color.White);
    spriteBatch.End();

    //Now copy over the alpha values from the PNG source texture to the final one, without multiplying them
    BlendState blendAlpha = new BlendState();
    blendAlpha.ColorWriteChannels = ColorWriteChannels.Alpha;

    blendAlpha.AlphaDestinationBlend = Blend.Zero;
    blendAlpha.ColorDestinationBlend = Blend.Zero;

    blendAlpha.AlphaSourceBlend = Blend.One;
    blendAlpha.ColorSourceBlend = Blend.One;

    spriteBatch.Begin(SpriteSortMode.Immediate, blendAlpha);
    spriteBatch.Draw(file, file.Bounds, Color.White);
    spriteBatch.End();

    //Release the GPU back to drawing to the screen
    GraphicsDevice.SetRenderTarget(null);

    return result as Texture2D;
} 
```

首先，纹理是从流中加载的。然后，我更改了一些混合选项以达到行为，例如在 ContentPipeline 加载的纹理中。不幸的是，以这种方式获得的纹理会在游戏窗口最小化后消失。我读了一些关于这个问题的东西，很多事情表明 RenderTarget2D 是错误的，因为渲染目标毕竟设置为 null。我应该怎么做才能永久保留我的纹理？

## 编辑 - 固定代码

好的，我使用了第四个选项，它工作得很好。这是固定代码：

```
private Texture2D LoadTextureStream(string filePath)
{
    Texture2D file = null;
    Texture2D resultTexture;
    RenderTarget2D result = null;

    try
    {
        using (System.IO.Stream titleStream = TitleContainer.OpenStream(filePath))
        {
            file = Texture2D.FromStream(GraphicsDevice, titleStream);
        }
    }
    catch
    {
        throw new System.IO.FileLoadException("Cannot load '" + filePath + "' file!");
    }
    PresentationParameters pp = GraphicsDevice.PresentationParameters;
    //Setup a render target to hold our final texture which will have premulitplied alpha values
    result = new RenderTarget2D(GraphicsDevice, file.Width, file.Height, true, pp.BackBufferFormat, pp.DepthStencilFormat);

    GraphicsDevice.SetRenderTarget(result);
    GraphicsDevice.Clear(Color.Black);

    //Multiply each color by the source alpha, and write in just the color values into the final texture
    BlendState blendColor = new BlendState();
    blendColor.ColorWriteChannels = ColorWriteChannels.Red | ColorWriteChannels.Green | ColorWriteChannels.Blue;

    blendColor.AlphaDestinationBlend = Blend.Zero;
    blendColor.ColorDestinationBlend = Blend.Zero;

    blendColor.AlphaSourceBlend = Blend.SourceAlpha;
    blendColor.ColorSourceBlend = Blend.SourceAlpha;

    SpriteBatch spriteBatch = new SpriteBatch(GraphicsDevice);
    spriteBatch.Begin(SpriteSortMode.Immediate, blendColor);
    spriteBatch.Draw(file, file.Bounds, Color.White);
    spriteBatch.End();

    //Now copy over the alpha values from the PNG source texture to the final one, without multiplying them
    BlendState blendAlpha = new BlendState();
    blendAlpha.ColorWriteChannels = ColorWriteChannels.Alpha;

    blendAlpha.AlphaDestinationBlend = Blend.Zero;
    blendAlpha.ColorDestinationBlend = Blend.Zero;

    blendAlpha.AlphaSourceBlend = Blend.One;
    blendAlpha.ColorSourceBlend = Blend.One;

    spriteBatch.Begin(SpriteSortMode.Immediate, blendAlpha);
    spriteBatch.Draw(file, file.Bounds, Color.White);
    spriteBatch.End();

    //Release the GPU back to drawing to the screen
    GraphicsDevice.SetRenderTarget(null);

    resultTexture = new Texture2D(GraphicsDevice, result.Width, result.Height);
    Color[] data = new Color[result.Height * result.Width];
    Color[] textureColor = new Color[result.Height * result.Width];

    result.GetData<Color>(textureColor);

    for (int i = 0; i < result.Height; i++)
    {
        for (int j = 0; j < result.Width; j++)
        {
            data[j + i * result.Width] = textureColor[j + i * result.Width];
        }
    }

    resultTexture.SetData(data);

    return resultTexture;
} 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T14:11:03.410

这个开始让我发疯了。这个问题我已经回答过*很多*次了。因此，我将尝试使这一点成为确定的。

这个问题不断出现，因为 - 首先，XNA 的文档记录很差 - 还因为人们不断在教程和论坛中发布这样的代码，并坚持认为它“没问题”，因为它*似乎*工作......直到你最小化窗口和所有你的纹理不见了！此外，还有一种误解是——通过在 GPU 上完成工作——它*必须*更快（它可能不会）。

* * *

## 这是正在发生的事情：

在**C#/CPU 层**，a`RenderTarget2D` ***是***`Texture2D`. 在`as Texture2D`你的方法结束时，它什么也不做。您制作的演员表可能是隐含的。强制转换不对引用的对象实例进行任何更改。您可以将其转换回 a`RenderTarget2D`并且再次，它不会更改对象本身。

`RenderTarget2D`继承自的原因`Texture2D`是您可以将渲染目标传递给任何需要纹理并使其正常工作的方法。但是它们的底层功能有一些重要的区别：

在**Direct3D/GPU 层**，发生的事情是您收到“设备丢失”错误，因为您使用的设备上下文消失了（由于窗口被最小化 - 但这不是唯一的事情这可能会导致它）。这意味着您将失去所有您正在使用的 GPU 内存 - 包括纹理和渲染目标。

常规（您使用or`Texture2D`加载或设置）维护数据的 CPU 端副本。因此，当设备丢失时，XNA 会自动从 CPU 端副本重新创建该纹理的内容。`ContentManager.Load``Texture2D.FromStream``SetData`

但是 a`RenderTarget2D`完全保存在 GPU 上。如果它丢失，XNA 无法重新创建它。每当您更改它时，获取其内容的 CPU 端副本将需要从 GPU 获取*极其昂贵的副本。*

* * *

## 以下是您修复它的方法：

*   **选项 1**是*始终*在每帧开始时重新渲染渲染目标的内容。这是使用渲染目标的标准方式，因为通常每帧都会更改它们的内容。不适用于您的情况。

*   **选项 2**[`RenderTarget2D.ContentLost`](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.rendertarget2d.contentlost(v=xnagamestudio.40).aspx)是通过重新创建渲染目标的内容来响应事件。（或者：检查`IsContentLost`每一帧的标志。）

*   **选项 3**是创建纹理的 CPU 端副本。基本上从渲染目标获取数据`GetData`。然后创建一个新`Texture2D`的并将数据设置到它上面`SetData`。XNA 将为您处理任何设备丢失（如上所述）。

*   **选项 4**是根本不使用渲染目标！用于`GetData`获取纹理数据，在软件中执行转换，然后使用`SetData`. 看到纹理数据无论如何都会被复制 - 为什么不自己复制并同时预乘呢？

*   **选项 5**是`FromStream`用加载时预乘的东西替换。这类似于选项 4，但为您节省了一些副本。大概是矫枉过正。

*   **选项 6**是首先以预乘格式存储您的纹理。尽管此时您也可能正在使用内容管道。

就您个人而言，我可能会根据您的情况选择**选项 4**。

* * *

最后：不要忘记调用`Dispose`您自己创建的任何资源（纹理、渲染目标等）（使用`new`or `FromStream`，但**不是**from `ContentManager`），您已经使用完毕。

我注意到，在您的代码中，您正在泄漏`Texture2D file`.

* * *

为了节省一些疯狂，我将在我的答案中添加一个简单的、未经测试的方法，该方法完全在 CPU 上预乘纹理：

```
public static void PremultiplyTexture(Texture2D texture)
{
    Color[] buffer = new Color[texture.Width * texture.Height];
    texture.GetData(buffer);
    for(int i = 0; i < buffer.Length; i++)
    {
        buffer[i] = Color.FromNonPremultiplied(
                buffer[i].R, buffer[i].G, buffer[i].B, buffer[i].A);
    }
    texture.SetData(buffer);
} 
```

# objective-c - 子类化 UITextField

> ID：13541490
> 
> 赞同：2
> 
> 时间：2012-11-24T13:05:59.423
> 
> 标签：objective-c, ios, uitextfield, subclassing

我是新手，我正在努力解决子类化的实现。

我了解创建新文件并使其成为任何父类的子类的基本原理（在这种情况下，我选择了 UITextField）。我创建了自己的子类，然后将相应 UITextField 对象的身份检查器中的类更改为我的新类，简称为“myTextField”。我已经使用 SO 上其他地方的代码来修改占位符文本的表示，并且它工作正常（来自子类对象）。

我（在故事板中）将 viewController 设置为我的子类 textFields 的代表。

并根据需要触发适当的方法，例如在视图控制器 .m 文件中的“返回”按钮上激活 textFieldShouldReturn 方法。

但是这些方法只在视图控制器上触发，而不是在我的子类中。在视图控制器对它们做任何事情之前，我想访问这些。

换个说法，我仍然希望它按原样触发，但我也想在子类对象中执行一个操作，但在主文件中仍然有完整的方法触发。例如，当用户点击返回时，我希望子类对象直接处理键盘的放下，但仍然触发 viewcontrollers 方法。

这只是一个例子，可能是一个很差的例子，但想法是，我不一定要带走主视图控制器的原始方法的功能，我仍然希望它是委托；我只希望子类对象文件也能做一些工作。在此示例中，可能是放下键盘并播放叮当声。正如我所说，这是一个例子，行动本身是无关紧要的。但是让动作在我想要的地方执行是问题所在。

我知道我没有正确地理解子类化，如果我错过了一些非常基本的东西，我很抱歉。

我会很感激这方面的任何指示，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T14:03:36.323

听起来好像您对子类化有很好的掌握，但可能是委派问题。

委托的意义在于有**一个（唯一的）**对象代表另一个对象执行某些工作。当您需要多个对象来对某事做出反应时，通知是一个更好的策略。

对于您的示例，我可以看到两个选项。一种方法是让委托显式调用子类中的方法。另一种方法是让委托方法发布自定义通知，然后任何想要对此做出反应的对象。

在这些之间进行选择将取决于您希望解决方案的一般性或具体性。

# java - 使用 java 以编程方式从多个 main() 方法中查找默认 main() 方法

> ID：13541493
> 
> 赞同：1
> 
> 时间：2012-11-24T13:06:46.117
> 
> 标签：java, main, main-method

鉴于以下课程，我试图找到程序的主要入口点：

```
public class Demo {
    public static void main(String[] args) {
        System.out.println("Hello World!");
    }

    public static void main(String a, String b){
        // ...
    }

    public void main(int a){
        // ...
    }
} 
```

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T13:14:17.533

找到名为 的方法`main`，它是公共的、静态的、返回 void，并接受一个字符串数组作为参数。

[`Class.getDeclaredMethod()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getDeclaredMethod%28java.lang.String,%20java.lang.Class...%29)可以用来做到这一点。你只需要过滤返回的方法，只在它是公共的、静态的并且返回 void 时才保留它。Method 类的[`getModifiers()`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Method.html#getModifiers%28%29)和[`getReturnType()`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Method.html#getReturnType%28%29)方法可用于执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:11:38.517

在 Java 中，如果您要捆绑到一个 jar，您可以在 jar 的清单中定义您的入口点。在 Java 中，计算机在您实际执行程序时确定“入口点”，而不是在您编译时。

# powershell - powershell windows窗体按钮链接

> ID：13541494
> 
> 赞同：1
> 
> 时间：2012-11-24T13:06:51.283
> 
> 标签：powershell, windows-forms-designer

我将如何链接按钮以使用 powershell 在 Windows 窗体中打开批处理文件，我下面的代码只需要添加点击事件

```
$run = New-Object System.Windows.Forms.Button
$run.Location = New-Object System.Drawing.Size(95,450)
$run.Size = New-Object System.Drawing.Size(75,23)
$run.Text = "Run"
$run.Add_Click({   })
$objForm.Controls.Add($run) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T15:57:07.977

打开，你的意思是执行脚本还是在文字处理器中编辑它？

您可以将 Add_Click 事件中的括号视为任何 'ole [ScriptBlock]。

要执行批处理文件：

```
$run.Add_Click({ Invoke-Expression "cmd /c c:\path\to\batch\file.bat" }) 
```

或者，在记事本中打开它：

```
$run.Add_Click({
    Write-Verbose "Running Batch Script!"
    Invoke-Expression "notepad c:\path\to\file.bat"        
}) 
```

或者调用其他函数..

```
$run.Add_Click({ Start-MyFunction }) 
```

# join - Ebean过滤findList结果与其他表

> ID：13541497
> 
> 赞同：1
> 
> 时间：2012-11-24T13:06:57.390
> 
> 标签：join, filter, ebean

在检索对象列表时，我想根据我只有 ID 的另一个表过滤结果。对象未链接到 ORM 模型中，而是只包含一个 UUID。

IE：

```
@Entity
class A {
    @Id
    private UUID id;
    private UUID refB; // links to B
}

@Entity
class B {
    @Id
    private UUID id;
    private boolean visible;
} 
```

我想检索 B.hidden 为假或 B 不存在的所有 A。

在 SQL 中，我会做类似的事情

```
SELECT t0.* FROM a_table t0 LEFT JOIN b_table t1 ON (t0.ref_b = t1.id)
    WHERE t1.hidden IS NULL OR t1.hidden = 0; 
```

我不只是使用 RawSql 的原因是我找不到在选择中使用通配符的任何方法，因此必须在选择中维护和手动添加所有属性。

我也试过

```
List<A> listA = Ebean.find(A.class).where()
     .join("LEFT JOIN b_table t1 ON (t0.ref_b = t1.id)")
     .where().in("t1.hidden", "0", "NULL"); 
```

但后来我收到一个错误，因为 WHERE 放在“LEFT JOIN”之前。

我认为“正确”的方法是将“private UUID refB”替换为“private B refB”。但这样做会更容易规避某些安全措施。

这是可能的还是我必须在 RawSql 中添加所有属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T15:54:43.717

Ebean 中的过滤不仅用于操作`WHERE`子句，还有其他目的，请查看[其他问题](https://stackoverflow.com/a/11704403/1066240)中的比较。

在这里，您有一个正确的方法（我更改了模型以显示完整的工作示例）

楷模

```
@Entity
public class A extends Model {

    @Id
    public Integer id;

    @ManyToOne
    public B b;

    public static Finder<Integer, A> find
                = new Finder<Integer, A>(Integer.class, A.class);

}

@Entity
public class B extends Model {

    @Id
    public Integer id;
    public Boolean hidden;

    public static Finder<Integer, B> find
            = new Finder<Integer, B>(Integer.class, B.class);

} 
```

控制器

```
public static Result index() {

    // Insert some data one every request
    B bFalse = new B();
    bFalse.hidden = false;
    bFalse.save();

    B bTrue = new B();
    bTrue.hidden = true;
    bTrue.save();

    A a1 = new A();
    a1.b = bFalse;
    a1.save();

    A a2 = new A();
    a2.b = bTrue;
    a2.save();

    A a3 = new A();
    a3.b = bTrue;
    a3.save();

    // Let's search...
    List<A> aListOfNotHidden = A.find.where().and(Expr.eq("b.hidden", false), Expr.isNotNull("b.hidden")).findList();
    for (A a : aListOfNotHidden) {
        Logger.info("NOT hidden " + a.id);
    }

    List<A> aListOfHidden = A.find.where().eq("b.hidden", true).findList();
    for (A a : aListOfHidden) {
        Logger.warn("HIDDEN " + a.id);
    }

    return ok("check logs in your console");
} 
```

H2的结果SQL

```
-- all NOT hidden
select t0.id c0, t0.b_id c1
from a t0
left outer join b t1 on t1.id = t0.b_id
where (t1.hidden = false  and t1.hidden is not null ) 

-- all hiden
select t0.id c0, t0.b_id c1 
from a t0
left outer join b t1 on t1.id = t0.b_id  
where t1.hidden = true 
```

或者，您也可以使用[SqlQuery](http://www.avaje.org/static/javadoc/pub/com/avaje/ebean/SqlQuery.html)仅获取[SqlRows](http://www.avaje.org/static/javadoc/pub/com/avaje/ebean/SqlRow.html)（不是对象）检查链接的 API 以获取使用示例、设置命名参数等：

```
List<SqlRow> rows = Ebean.createSqlQuery("select t0.*  " +
        "from a t0 left outer join b t1 on t1.id = t0.b_id " +
        "where (t1.hidden = false  and t1.hidden is not null ) ").findList();

for (SqlRow row : rows) {
    // do something with each row here, use methods such 
    // as getString("fieldname") for retrieving data  
    // (from SqlRow API)
} 
```

# c++ - C++ win客户端发送linux服务器变量

> ID：13541500
> 
> 赞同：1
> 
> 时间：2012-11-24T13:07:30.717
> 
> 标签：c++, winsock, send, recv

我对 C++ 编程相当陌生。我正在尝试编写一个与 linux 服务器通信的 windows 客户端。那部分我已经成功完成了。

现在我不知道该怎么做才能继续这样做。这是我需要做的（但不知道如何做）。

现在我的客户要 3 样东西。例子

```
 declared client variables 1,2,3 as string...

 Enter Anything: dgasggfds 
 //dgasggfds is now stored to cvariable1
 Enter Anything again: zxcasd
 //zxcasd is now stored to cvariable2
 Enter Anything again again: qwert
 //qwer is now stored to cvariable3 
```

现在客户端应该将每个变量发送到服务器。然后，服务器还将使用这些变量并执行其代码。

所以现在在服务器上

```
 cvariable1 is now svariable1 on the server.
 cvariable2 is now svariable2 on the server.
 cvariable3 is now svariable3 on the server. 
```

一旦所有变量都在那里，它将执行代码。

请指教。谢谢。

- 编辑 -

我尝试使用 send() recv() 它可以工作，但我只能发送 1 个变量。而且我不知道如何将 recv 数据设置为服务器上的变量。

- 编辑 -

我有点了解如何将 recv 数据保存到变量中。但是仍然不知道如何处理多个数据。

此外，这 3 个变量必须始终在一起。他们不能分开。服务器代码需要这 3 个变量/数据才能正确执行 cmd。

- 编辑 -

这有道理吗？

```
string* packet = new string[3];
packet[0] = 'var1';
packet[1] = 'var2';
packet[2] = 'var3';

//send request
if (send(sock, packet.c_str(), packet.length(), 0) != request.length())
    die_with_wserror("send() sent a different number of bytes than expected"); 
```

它给了我一些错误。packet:expression 必须具有类类型。

我现在要做的是将它发送到一个数组中，然后在服务器上分解一次数组，这个逻辑可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:23:17.983

您在服务器上也有相同的变量。当客户端读取并发送第一个字符串时，服务器将其存储在第一个变量中，就像客户端上的 on 一样。其他两个以此类推。

可以这样想：服务器从客户端接收输入，就像客户端从用户接收输入一样。唯一的区别是客户端使用 eg`cin`而服务器使用`recv`. 它实际上可以被抽象成一个单独的类来处理输入，然后您使用该类的一个实例进行`cin`（或更确切地说`istream`）输入，而另一个从套接字获取其输入。但是这个输入类的用户使用相同的函数集，不管输入来自哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:50:37.967

在客户端使用特殊字符连接三个变量以分隔它们，例如

```
string sending = variable1 + "_" + variable2 + "_" + variable3; 
```

并发送

在服务器端

```
ssize_t bytes_recieved;
char incoming_data_buffer[1000];
bytes_recieved = recv(socketfd, incoming_data_buffer,1000, 0); 
```

您将在incoming_data_buffer 中有您的数据。现在使用“_”拆分incoming_data_buffer，您将拥有3个变量。

# c++ - C++ 对象堆分配和成员变量

> ID：13541506
> 
> 赞同：2
> 
> 时间：2012-11-24T13:07:57.707
> 
> 标签：c++, memory, heap-memory, stack-memory

```
class OtherClass
{
    ...
};

class Test
{
    OtherClass otherClass;
};

int main()
{
    Test *pTest = new Test;
} 
```

`pTest`指向类型的对象`Test`。是`otherClass`在堆上还是在栈上分配？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T13:09:45.593

```
Test *pTest = new Test; 
```

在 Freestore(Heap) 上创建一个`Test`对象，所有的成员`Test`也都在同一个上面。
所以是的。

请注意，从技术上讲，该标准从不使用术语堆或堆栈，但是您可以假设它们，因为几乎所有实现都使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T13:10:32.617

它在堆上分配。由于`pDataMember`是具有类型的数据成员`OtherClass`（不是指针！），它是为 class 的对象分配的内存的一部分`Test`，因此它将位于`Test`对象所在的任何位置。

也许您不应该命名非指针`pDataMember`？这很令人困惑。

# macos - 在 Mac OSX 上使用 Skype API 获取头像

> ID：13541510
> 
> 赞同：1
> 
> 时间：2012-11-24T13:08:43.113
> 
> 标签：macos, cocoa, skype

我使用此命令在 mac osx 应用程序上获取用户的头像

```
[SkypeAPI sendSkypeCommand:[NSString stringWithFormat:@"GET USER %@ AVATAR 1 %@", skypeId, path]]; 
```

但这有错误是

> ERROR 1 一般语法错误

我搜索此解决方案，但它适用于窗口

[http://community.skype.com/t5/General-Discussion/My-Profile-Pic/mp/200606#M2303](http://community.skype.com/t5/General-Discussion/My-Profile-Pic/m-p/200606#M2303)

如何在 MacOS 上解决这个问题？

# php - 高尔夫差点计算器的 PHP 计算

> ID：13541517
> 
> 赞同：-3
> 
> 时间：2012-11-24T13:10:02.527
> 
> 标签：php, wordpress

我在 wordpress 中有一个高尔夫差点计算器设置，显示结果如下所示。目前，这是基于所玩的所有回合计算让分盘（得分减去 ACR 得出回合差，然后将其加在一起并通过所玩的回合跳水并乘以 0.93，得出结果）。

但我需要它来执行以下操作：

如果用户已经玩了 3-6 轮，那么只使用最低的差价

如果用户已经玩了 7-8 轮，那么只使用最低的 2 个差值

如果用户已经玩了 9-10 轮，那么只使用最低的 3 个差值，依此类推...

我将每轮差异存储在一个名为 $results 的变量中，如下所示

```
// Begin calculations
        $result = $score - $acr;         //gives each rounds differential   
        array_push($array,$result);      //puts all differentials in array 
        $num = $the_query->found_posts;  //counts number of rounds 
        $av = array_sum($array) / $num;  //calculates average differential
        $round = round($av) * 0.93;      //this is the final handicap 
```

关于如何最好地实现这一目标的任何想法？？？

![在此处输入图像描述](../Images/5c3e16ef1321a13b09cc9e6dd034777f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T13:22:11.727

计算您的差异，将它们从最低到最高排序。然后使用`if()`轮数并根据 #of 轮数获取所需的差值。做剩下的数学。

除此之外的任何其他答案都需要为您编写整个代码，而 SO 不是那种类型的网站。

# rendering - 球体瓷砖的分层截锥剔除

> ID：13541526
> 
> 赞同：3
> 
> 时间：2012-11-24T13:10:57.843
> 
> 标签：rendering, computational-geometry, terrain, virtual-earth

我现在正在研究 3d 行星地形可视化。我的地形可视化方法很常见，并且基于细节渲染级别。有N个细节层次。图片上显示了其中一个级别：

![在此处输入图像描述](../Images/d86006daeaf856d861ecbab776651972.png)

当搜索所需的详细程度时，执行截锥剔除。

截锥体剔除是通过截锥体与定向边界框的相交来执行的。这些边界框形成包围体层次结构，因此当放大到球体上的蓝色图块时，会检查其绿色、黄色等父图块的可见性。

截锥体与定向边界框的交集会消耗过多的 CPU 时间。所以我想问一下通常使用什么方法来执行这种剔除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T04:31:40.627

您可以优化 AABB 检查，或使用球体。什么是 CPU 时间过多？进行了多少次 AABB 检查？我会发表评论，但我没有足够的代表。

# android - 如何从我的 HTC one x 获取 db 文件？

> ID：13541527
> 
> 赞同：1
> 
> 时间：2012-11-24T13:10:57.923
> 
> 标签：android, htc-android

我想获取我的应用程序的数据库。通常我会通过 DDMS 文件浏览器转到手机上的“数据”文件夹，将我的 db 文件导出到计算机上，然后通过 FF 的 SQLiteManager 插件打开它。但是在 HTC 上，一个 X 'data' 文件夹是空的，我找不到我的应用程序的安装位置。

您能否给我一个建议或解决方案，我可以在哪里找到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T13:18:57.397

如果您使用的是实际设备，除非您对手机进行 root，否则您将无法从外部查看或访问它。

如果您使用的是模拟器，DDMS 视图将让您导航到它并从那里拉取它。

或者，您可能在创建数据库时遇到问题。没有看到您的代码，我们无法判断。

如果您想从真实设备上获取文件，您需要实现一种方法将其从数据目录复制到您可以访问的某个地方（例如您的 SD 卡）。这可以解决问题：

```
public void backup() {
    try {
        File sdcard = Environment.getExternalStorageDirectory();
        File outputFile = new File(sdcard,
                "YourDB.bak");

        if (!outputFile.exists()) 
             outputFile.createNewFile(); 

        File data = Environment.getDataDirectory();
        File inputFile = new File(data, "data/your.package.name/databases/yourDB");
        InputStream input = new FileInputStream(inputFile);
        OutputStream output = new FileOutputStream(outputFile);
        byte[] buffer = new byte[1024];
        int length;
        while ((length = input.read(buffer)) > 0) {
            output.write(buffer, 0, length);
        }
        output.flush();
        output.close();
        input.close();
    } catch (IOException e) {
        e.printStackTrace();
        throw new Error("Copying Failed");
    }
} 
```

# css - 使用 IE7 在文本旁边显示图像

> ID：13541530
> 
> 赞同：0
> 
> 时间：2012-11-24T13:11:37.267
> 
> 标签：css, internet-explorer-7

以下脚本显示了一些文本旁边的图像。它不适用于IE7。应该如何修改？谢谢

```
<style type="text/css">

    div {width:200px}
    div span {
        padding: 0 5px 0 30px;
        background-image: url("bg.gif");
        background-position:center; 
        background-repeat: no-repeat;   
    }

</style> 

<body>
    <div>Text 1<span></span></div>
    <div>Text 2<span></span></div>
    <div>Text 3<span></span></div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T13:35:44.213

您是否在 html 页面中指定了文档类型？例如：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:20:58.420

```
div, div > span{
    display:inline;
    float:left;
} 
```

我根据您的问题、浏览器问题和 html 提供了一小段脚本。我建议将此代码放在 HTML IE7 条件中：

```
<!--[if IE7]-->
    <!-- your CSS here -->
<!--[endif]--> 
```

这将删除所有浏览器的 CSS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T13:35:08.793

看起来我不应该使用背景图片。

```
<style type="text/css">
    div img.image {
        padding-left: 15px;
    }

</style> 

<body>
    <div><span>Text 1</span><img class="image" src="bg.gif" /></div>
    <div><span>Text 2</span><img class="image" src="bg.gif" /></div>
    <div><span>Text 3</span><img class="image" src="bg.gif" /></div>
</body> 
```

# scala - Scala 数组对象

> ID：13541533
> 
> 赞同：1
> 
> 时间：2012-11-24T13:11:45.783
> 
> 标签：scala

如何定义一个包含一个整数和三个只有 20 个元素的字符串的数组并用零填充整数？

我试过但没有成功：

```
val a = Array [(Int,String,String,String)].fill(20)(0) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T13:29:20.303

填充答案很好，但值得在这里说的是，当您处于 4 元组时，您的代码清晰度几乎肯定会通过案例类得到改善。尤其如此，因为您的三个字段是字符串，这将很容易混淆哪个字段的含义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T13:18:39.320

尝试这样的事情： -

```
 Array.fill(20)((0,"","","")) 
```

# jquery - jqm 1.2 listview - 动态追加新 元素到顶部

> ID：13541534
> 
> 赞同：1
> 
> 时间：2012-11-24T13:11:56.020
> 
> 标签：jquery, listview, mobile, append, splice

有谁知道将新元素附加到列表视图顶部的方法？

append 的普通方法将元素添加到列表视图的末尾。

也许有一种方法（反向/追加/反向）或等效于 javascript 数组方法？例如： splice(0,0,"topelement")?

对于许多面向数据库的应用程序，强烈建议将元素添加到视图顶部和相应的排序/反向功能的可能性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:13:11.570

使用`prepand`而不是`append`

这将完成您的工作

# android - CyanogenMod10 如何确定来电者的位置？

> ID：13541537
> 
> 赞同：4
> 
> 时间：2012-11-24T13:12:32.480
> 
> 标签：android, android-4.2-jelly-bean, cyanogenmod

**编辑**：将 JellyBean 更改为 cyanogenmod 10，因为它可能是氰基功能

我注意到我在 CyanogenMod10 电话下的电话在通话记录中显示来电者的（近似）位置（仅当该号码是固定电话而不是我的联系人时）。

它不仅仅依赖于国家代码，因为它还会在找到呼叫者时显示呼叫者所在的城市。我浏览了联系人包应用程序，发现值是从数据库中获取的（在 com.android.contacts.CallDetailActivity 中）

```
final String countryIso = callCursor.getString(COUNTRY_ISO_COLUMN_INDEX);
final String geocode = callCursor.getString(GEOCODED_LOCATION_COLUMN_INDEX); 
```

所以我虽然在成功拨打或接听电话后它在电话包应用程序中。但是我很快就迷失在源头中……我想知道在哪里以及（简要地）如何设置这些值以及如何解析地理编码。

电话号码是否发送到神秘的网络服务？

Cyanogen 是否有一张包含世界所有国家代码和城市前​​缀的表格（我对此表示怀疑）？

还是根据您所在的国家/地区下载该数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:55:16.327

最后我发现了这个东西是如何工作的

第一个 ContactsProvider 在调用 DefaultCallLogInsertionHelper.addComputedValues 时添加这个值

看这里

[https://github.com/CyanogenMod/android_packages_providers_ContactsProvider/blob/ics/src/com/android/providers/contacts/DefaultCallLogInsertionHelper.java#L59](https://github.com/CyanogenMod/android_packages_providers_ContactsProvider/blob/ics/src/com/android/providers/contacts/DefaultCallLogInsertionHelper.java#L59)

```
@Override
public void addComputedValues(ContentValues values) {
    // Insert the current country code, so we know the country the number belongs to.
    String countryIso = getCurrentCountryIso();
    values.put(Calls.COUNTRY_ISO, countryIso);
    // Insert the geocoded location, so that we do not need to compute it on the fly.
    values.put(Calls.GEOCODED_LOCATION,
            getGeocodedLocationFor(values.getAsString(Calls.NUMBER), countryIso));
} 
```

所以你看到的代码

```
final String countryIso = callCursor.getString(COUNTRY_ISO_COLUMN_INDEX);
final String geocode = callCursor.getString(GEOCODED_LOCATION_COLUMN_INDEX); 
```

实际上是从保存的数据中读取

因此，真实数据来自 PhoneNumberOfflineGeocoder，您可以在此处找到 [https://github.com/CyanogenMod/android_external_libphonenumber/blob/ics/java/src/com/android/i18n/phonenumbers/geocoding/PhoneNumberOfflineGeocoder.java](https://github.com/CyanogenMod/android_external_libphonenumber/blob/ics/java/src/com/android/i18n/phonenumbers/geocoding/PhoneNumberOfflineGeocoder.java)

那就是所谓的`libphonenumber`

[https://code.google.com/p/libphonenumber/](https://code.google.com/p/libphonenumber/)

# python - 使用 mechanize 绕过 404

> ID：13541540
> 
> 赞同：3
> 
> 时间：2012-11-24T13:12:57.690
> 
> 标签：python, csv, beautifulsoup, mechanize

我正在创建一个可以读取 URL 文件的 Python 脚本，但我知道并非所有这些都可以工作。我试图弄清楚如何解决这个问题并让它读取文件的下一行，而不是引发我在下面发布的错误。我知道我需要某种 if 语句，但我无法弄清楚。

```
from mechanize import Browser
from BeautifulSoup import BeautifulSoup
import csv

me = open('C:\Python27\myfile.csv')
reader = csv.reader(me)
mech = Browser()

for url in me:
    response =  mech.open(url)
    html = page.read()
    soup = BeautifulSoup(html)
    table = soup.find("table", border=3)

for row in table.findAll('tr')[2:]:
    col = row.findAll('td')
    BusinessName = col[0].string
    Phone = col[1].string
    Address = col[2].string
    City = col[3].string
    State = col[4].string
    Zip = col[5].string
    Restaurantinfo = (BusinessName, Phone, Address, City, State)
    print "|".join(Restaurantinfo) 
```

当我运行该代码块时，它会引发此错误：

> httperror_seek_wrapper：HTTP 错误 404：未找到

基本上我要求的是如何让 Python 忽略它并尝试下一个 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T15:55:21.983

如果您的文件中只有 url，那么每行编写一个 url 并使用如下代码会更简单：

```
from mechanize import Browser
from BeautifulSoup import BeautifulSoup

me = open('C:\Python27\myfile.csv')
mech = Browser()

for url in me.readlines():
    ... 
```

如果你想保留你的代码，你必须使用：

```
for url in reader:
    ... 
```

# magento - 删除 Magento 未使用的文件和数据库表

> ID：13541541
> 
> 赞同：3
> 
> 时间：2012-11-24T13:12:57.143
> 
> 标签：magento, resource-cleanup

我已经开发了一个 Magento 站点几个月了，在此过程中，我安装并删除了许多扩展，这些扩展本身在我的数据库和服务器上的文件中创建了许多表，以及我尝试构建自己的多个扩展包括很多文件。

我想知道是否有一种方法可以监视正在读取和使用哪些文件，然后能够删除任何未使用的表或文件。

基本上我只想清理未使用的文件和表的存储。

有谁知道这以前是否做过？如果有的话，还从哪里开始寻找？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T14:04:09.130

据我所知，没有一种工具可以自动“删除所有未使用的扩展表”，因为这可能非常危险（删除仍在使用的表，或者只是禁用扩展的表等）。

如果您想继续，请**备份，备份，备份！！**. *然后*，*只有*这样，手动浏览数据库并查看每个表（phpMyAdmin 使这变得容易得多）。如果它以未使用的扩展名命名空间开头（通常表名类似于：）`namespace_module_tablename`，请查看该表以查看其中是否包含当前/相关数据。Magento DB 模式有一个方便的参考 (http://www.magereverse.com/)。但是，我不知道您对 Magento DB 有多熟悉，如果一个人不小心/知识渊博，您可能会造成巨大的损害。

如果您对 Magento 不是非常熟悉，我会引导您远离执行此操作。根据它是现场商店还是只是您的开发机器，您总是可以重新开始。然后你就知道这是一个好的、干净的开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T16:45:07.813

未使用的表格不会占用太多空间，如果您要删除 Magento 本身为您已禁用的 Magento 模块创建的任何表格，则删除它们可能会比您节省的空间更麻烦。

至于使用第三方模块，由于 Magento 是免费的，最好为模块安装设置一个单独的测试服务器，看看它们是否真的有用和/或兼容，然后将它们安装在你的开发安装中，以便在你的网站上运行.

话虽如此，事实上，每个模块都有一个 mysql 安装程序脚本，您可以阅读该脚本以查看进行了哪些数据库更改，以便您可以尝试将它们撤消。这些通常住在`app/code/local/(namespace)/(modulename)/sql/(modulename)_setup/*`或`app/code/community/(namespace)/(modulename)/sql/(modulename)_setup/*`。它们将按照上述约定命名，`mysql4-install-*.php`或者`mysql4-upgrade-*.php`尽管上述任何约定都可能被不严格遵守约定的第三方开发人员破坏。

您可以使用其中的 SQL 代码来撤销模块所做的更改。**强烈推荐备份。**

# html - 将 JSON 与传统的表单编码数据发布为提交表单的数据格式

> ID：13541542
> 
> 赞同：8
> 
> 时间：2012-11-24T13:13:09.690
> 
> 标签：html, json, forms, post, field

将 JSON 与传统的表单编码发布为从 HTML 表单向服务器提交数据的数据格式。HTML 表单是动态的，用户可以添加新行（例如）并填写数据。有一个论点是在这种情况下使用带有 MVC 框架的表单字段更容易，因为像 Spring MVC 这样的 MVC 框架负责绑定到表单（在动态生成的 HTML 等中生成 id），我们可以在控制器在使用 AJAX 作为表单编码的内容类型发布表单时收集这些值。

我在考虑使用 JSON，你的看法是什么？

1.  使用表单编码格式（传统方式）是更好的选择，还是使用 JSON 作为有效负载？您遇到过哪些优点和缺点？
2.  Web 应用程序是否使用 JSON 作为提交表单的数据格式？
3.  我们目前没有与移动应用程序等进行任何集成，那么 JSON 是否值得在传统的表单字段方法中使用？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T13:20:06.110

### 1\. 使用表单字段是更好的选择还是使用 JSON 更好？

你不能比较这个。你可以说，要么是传统的 Submit 更好，要么是 JSON 方式，但你需要做出选择。通过 JSON 提交时，不能发送文件，但需要 AJAX 或类似技术与服务器对话。所以要检查浏览器的兼容性。

### 2\. Web 应用程序是否使用 JSON 来提交表单？

问题本身是错误的。答案是不，因为大多数表单都是由提交的，`POST`并且值是作为序列化发送的，这并不总是意味着 JSON。

### 3\. 我们目前没有与移动应用程序等进行任何集成，那么 JSON 是否值得在传统的表单字段方法中使用？

再次，浏览器兼容性和用户带宽起着重要作用。如果人们有好的浏览器，那就去吧。

### 我的建议：

有一套规则和最佳实践可用于设计各种 Web 应用程序。请仔细阅读并处理您的项目。`:)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T13:19:28.020

我建议您坚持使用您正在使用的框架的标准格式。在性能、安全性和可靠性方面，开发框架的人通常会比开发此类基础设施的人做得更好。

这篇文章[普通表单提交 vs. JSON](https://stackoverflow.com/questions/12042476/normal-form-submission-vs-json)对基本表单提交与 JSON 提交的主题进行了一些讨论。我同意的一点是，当您开始研究复杂的数据结构时，结构化格式而不是平面格式可能会非常有利。也就是说，正如您自己所说，Spring MVC 和其他类似框架负责绑定。对我来说，这是 JSON 比标准表单提交做得更好的一件事。如果框架默认处理它，请坚持使用默认值。不要在不必要的地方增加复杂性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T13:24:44.817

你有什么特别的理由来发布 JSON 吗？

如果不是，那么我会说默认选择是发布表单数据，因为所有浏览器和所有服务器都原生支持。您可以在没有任何客户端脚本的情况下发布表单数据，并且默认情况下任何服务器实现都会处理它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-01T09:04:15.360

更新。看看[http://www.w3.org/TR/html-json-forms/](http://www.w3.org/TR/html-json-forms/)

但是“请注意。该规范不再处于积极维护中，HTML 工作组也不打算进一步维护它。”。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-24T13:18:13.953

> 使用表单字段是更好的选择还是使用 JSON 是可行的方式？

您正在将苹果与锤子进行比较。JSON 是数据格式，而表单是数据源。您可以在 HTML 表单字段中发送 JSON 数据，所以这个问题有点奇怪。

> Web 应用程序是否使用 JSON 来提交表单？

HTML 表单？不

> 我们目前没有与移动应用程序等进行任何集成，那么 JSON 是否值得在传统的表单字段方法中使用？

再次 - 阅读您想要使用的技术。这有助于理解它是什么。不要在获得基础知识之前开始实施，否则您会浪费时间“重构”您的项目。从头开始...

# apache-flex - Flex 4 ConstraintLayout 不可重用

> ID：13541544
> 
> 赞同：0
> 
> 时间：2012-11-24T13:13:11.943
> 
> 标签：apache-flex, layout, flex4, reusability

为什么不能重用 ConstraintLayout？我想在 ItemRenderer 中布局一个组，我的目的是将一次性创建的 ConstraintLayout 注入每个 ItemRenderer。但这不起作用。有没有比为每个 ItemRenderer 创建一个新布局更便宜的方法？

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" 
           initialize="initializeHandler(event)" 
           xmlns:local="*"
           >

<fx:Script>
    <![CDATA[
        import mx.containers.utilityClasses.ConstraintColumn;
        import spark.layouts.ConstraintLayout;

        [Bindable] private var cLayout1 : ConstraintLayout;
        [Bindable] private var cLayout2 : ConstraintLayout;

        protected function initializeHandler(event:FlexEvent):void {
            // produce one two ConstraintLayouts, with the same constraintColumns
            var v : Vector.<ConstraintColumn> = new Vector.<ConstraintColumn>();
            var col : ConstraintColumn = new ConstraintColumn();
            col.width = 100;
            v.push(col);
            col = new ConstraintColumn();
            col.width = 150;
            v.push(col);
            cLayout1 = new ConstraintLayout();
            cLayout1.constraintColumns = v;  
            cLayout2 = new ConstraintLayout();
            cLayout2.constraintColumns = v; 
        }

    ]]>
</fx:Script>
<s:VGroup width="100%" gap="3">
    <!-- works fine: -->
    <s:Group layout="{cLayout1}" >
        <s:Label left="col1:0" text="A1" />
        <s:Label left="col2:0" text="B1" />
    </s:Group>

    <!-- reuse cLayout1 does not work: (nothing is shown) -->
    <s:Group layout="{cLayout1}" >
        <s:Label left="col1:0" text="A2" />
        <s:Label left="col2:0" text="B2" />
    </s:Group>

    <!-- reuse of the vector, but new Layout is ok: -->
    <s:Group layout="{cLayout2}" >
        <s:Label left="col1:0" text="A3" />
        <s:Label left="col2:0" text="B3" />
    </s:Group>
</s:VGroup>

</s:Application> 
```

# objective-c - 停止 AVAudioPlayer

> ID：13541546
> 
> 赞同：0
> 
> 时间：2012-11-24T13:13:29.377
> 
> 标签：objective-c, ios, xcode

我有两个视图控制器：

主菜单视图：

```
- (void)viewDidLoad
{
 NSString *path = [[NSBundle mainBundle] pathForResource:@"BackgroundSound" ofType:@"mp3"];
    play =[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
    play.delegate=self;
    [play play];
} 
```

和 PlayAreaView：

```
- (void)counttimer
{
    ///here is my code for NSTimer, if Timer is 0, Automatically I go to GameOver viewController
    MainMenuView *vv = [[MainMenu alloc]init];
    [vv.play stop];
    GameOver *gv = [[GameOver alloc]init];
    [self presentViewController:gv animated:YES completion:nil];
} 
```

在我去 GameOver 之前，或者当我已经在游戏概览中时，我想停止`AVAudioPlayer`我的`MainMenuView`. 请帮忙。我尝试分配`MainMenuView`和使用`[MainMenu.play stop]`，但不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T14:49:49.193

首先，您应该稍微不同地命名变量。`[play play]`在代码中看到“ ”真的很*奇怪*。

其次，当我查看您的 " `counttimer`" 方法时，我看到的是您通过 " " & " " 创建了您的 " `MainMenuView`" 视图控制器，并在加载视图之前立即停止播放器。`alloc``init`

如果您想停止播放器，请确保您的 " `AVAudioPlayer`" 对象已实际加载。

所以在你的代码中，做这样的事情：

```
if (vv.play)
    [vv.play stop];
else
    NSLog( @"vv.play is NULL, it doesn't exist yet"); 
```

这应该可以帮助您找到合适的位置来调用“ `stop`”。

# compiler-construction - 当我尝试与 LD 链接时，MinGW for Windows 不起作用

> ID：13541555
> 
> 赞同：0
> 
> 时间：2012-11-24T13:14:54.153
> 
> 标签：compiler-construction, 64-bit, mingw, ld, djgpp

我现在正在用 C 语言开发一个测试操作系统……我一直在寻找[http://www.osdever.net/tutorials/view/brans-kernel-development-tutorial](http://www.osdever.net/tutorials/view/brans-kernel-development-tutorial)以开始使用。我得到了适用于 Windows 7（64 位）的 MinGW。我设置了教程中的链接器脚本和一个批处理文件，以使用 NASM、GCC 和 LD 自动构建。当它尝试将 .o 文件与 LD 链接时，我收到此消息“ld：无法对非 PE 输出文件执行 PE 操作”。为什么会这样？

此外，我使用 MinGW 而不是 DJGPP（它在编译器下的第二页上说）的原因是因为我找不到适用于 Windows 64 位的下载。我收到一条消息说 16 位应用程序与我的 Windows 版本不兼容。

如果有人可以提供帮助...我将不胜感激！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T04:02:55.263

我对此并不完全确定。但我认为这是因为 MinGW 目标的编译器需要一些额外的步骤来生成 Windows 可执行文件。因此，构建通用 elf 交叉编译器（针对 x86_64-unknown-elf）可能更容易，至少比[构建针对 DJGPP 的交叉编译器](http://www.delorie.com/howto/djgpp/linux-x-djgpp.html)要容易得多。

# android - Android 需要类似于 session/cache 的东西

> ID：13541561
> 
> 赞同：1
> 
> 时间：2012-11-24T13:16:22.033
> 
> 标签：android, data-structures

我有这种情况：

Android 应用程序白衣 4 活动：

*   Activity1 ：登录，调用 Web 服务并检索第二个活动的数据（将其存储在一个对象中）并切换到第二个活动。
*   Activity2：使用webservice调用的对象结果创建，有一个list item，onclick item调用另一个web service并检索第三个activity的数据，然后将控制切换到第三个activity
*   Activity3：使用webservice调用的对象结果创建，有一个list item，onclick item调用另一个web service并检索第四个activity的数据，然后将控制切换到第四个activity
*   Activity4：显示一些数据。

除了第一个活动外，每个活动都有两个按钮，注销和返回（如果我在活动 3 中，我将返回活动 2）。

后退按钮是我的问题。我不想将 Web 服务调用回活动。我想将每个 Web 服务调用的结果存储在一个结构中，当我单击返回时，我想使用它来重新填充具有相同数据的活动。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T13:30:47.227

您可以提供自己的`Application`类并在那里存储程序范围的数据。只要您的程序运行，它就会一直存在。我发现在销毁和重新创建 Activity 时保存/检索数据更清晰、更容易处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T13:18:55.110

使用[onSaveInstanceState](https://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)和[onRestoreInstanceState](https://developer.android.com/reference/android/app/Activity.html#onRestoreInstanceState%28android.os.Bundle%29)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T16:06:14.917

我希望我明白你想要什么，你应该正确实施活动生命周期，当你打开新活动时，onCreate、onStart 和 onResume 被调用，当你进入下一个活动时，前一个活动的 onPause 被调用，然后第二个活动的 onCreate 被调用， onResume ，onStart 然后 onStop 从珍贵的活动中调用。当您返回第一个活动时，将调用 onStart 然后调用 onResume 。当你回来时没有调用 onCreate 有什么不同，你可以在 onCreate 上实现你的 webservice 所以当你回来时 onStart 不会调用 onCreate 所以你的 webservice 不会被调用。这是活动生命周期[链接](http://developer.android.com/reference/android/app/Activity.html)，以防您不理解我所说的。[另一个链接](http://developer.android.com/training/basics/activity-lifecycle/index.html)

# python - Python：具有简单解决方案的多边形 shapefile 中的轮廓特征

> ID：13541562
> 
> 赞同：3
> 
> 时间：2012-11-24T13:16:30.737
> 
> 标签：python, math, geometry, polygon, ellipse

尊敬的会员名单，

首先，我很抱歉发布这个从以前的帖子修改和改进的问题。最近我正在研究 shapefiles 多边形以计算基本轮廓特征：

1.  区域，
2.  周长，
3.  面积凸包，
4.  周边凸包，
5.  主轴长度 = 给出主轴的长度，
6.  短轴长度 = 给出短轴的长度，

其中长轴和短轴长度是根据下图计算的：

![在此处输入图像描述](../Images/92506420eb25ab5acec63f9d1e64cc39.png)

使用 osgeo.gdal、ogr 和 shapely[可以](http://pypi.python.org/pypi/Shapely)加载和计算所有索引，但不能加载和计算长轴和短轴长度。在线阅读解决方案可以使用

1.  [scikit-image](http://scikit-image.org/docs/dev/auto_examples/plot_regionprops.html) = 测量区域属性
2.  [开放式CV](http://opencvpython.blogspot.dk/2012/04/contour-features.html)

我正在寻找一个简单的解决方案，以使我的代码简单而优雅。一些博客建议对我的多边形进行椭圆近似，以检索长轴和短轴长度。这是最好的解决方案吗？

任何参考资料都会很有帮助。提前致谢

* * *

```
import osgeo.gdal, ogr
from shapely.geometry import Polygon

shp = osgeo.ogr.Open('../examples/mypoly.shp')
layer = shp.GetLayer()
feature = layer.GetFeature(0)
geometry = feature.GetGeometryRef()
# get area
Area = geometry.GetArea()
pts = geometry.GetGeometryRef(0)
points = []
for p in range(pts.GetPointCount()):
   points.append((pts.GetX(p), pts.GetY(p)))
polygon = Polygon(points)
# get Perimeter
Perimeter = polygon.length
# convex Hull
ConvexHull = polygon.convex_hull
# get Perimeter convex Hull
PerimeterConvexHull = ConvexHull.length
# get Area convex Hull
AreaConvexHull = ConvexHull.area 
```

这些是我的多边形的坐标顶点

```
polygon = Polygon([(560023.4495758876400000 6362057.3904932579000000),(560023.4495758876400000 6362060.3904932579000000),(560024.4495758876400000 6362063.3904932579000000),(560026.9495758876400000 6362068.3904932579000000),(560028.4495758876400000 6362069.8904932579000000),(560034.9495758876400000 6362071.8904932579000000),(560036.4495758876400000 6362071.8904932579000000),(560037.4495758876400000 6362070.3904932579000000),(560037.4495758876400000 6362064.8904932579000000),(560036.4495758876400000 6362063.3904932579000000),(560034.9495758876400000 6362061.3904932579000000),(560026.9495758876400000 6362057.8904932579000000),(560025.4495758876400000 6362057.3904932579000000),(560023.4495758876400000 6362057.3904932579000000)]) 
```

为了从这里测试我的代码：

```
polygon = Polygon(points)
# get Perimeter
Perimeter = polygon.length
# convex Hull
ConvexHull = polygon.convex_hull
# get Perimeter convex Hull
PerimeterConvexHull = ConvexHull.length
# get Area convex Hull
AreaConvexHull = ConvexHull.area 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-02-01T09:17:43.210

嗨，我有一些关于 shapefile 多边形的工作，喜欢你的工作。我使用 minimum_rotated_rectangle 来定义majoraxis_length和minoraxis_length。我的代码是：

```
polygon = Polygon(points)  
ConvexHull = polygon.convex_hull  #  convex Hull
#minimum_ rotated_ Rectangle is the minimum boundary rectangle, exterior is the external point coordinates of the minimum boundary matrix, and coords is the coordinates of the points
p1 = Point(ConvexHull.minimum_rotated_rectangle.exterior.coords[0])
p2 = Point(ConvexHull.minimum_rotated_rectangle.exterior.coords[1])
p3 = Point(ConvexHull.minimum_rotated_rectangle.exterior.coords[2])
majoraxis_length  =  p1.distance(p2)
minoraxis_length = p2.distance(p3) 
```

# php - Yii 会话管理

> ID：13541565
> 
> 赞同：9
> 
> 时间：2012-11-24T13:16:51.033
> 
> 标签：php, session, yii

我正在尝试使用以下代码在 Yii 中设置一些会话变量：

```
 $session=new CHttpSession;
            $session->open() ;
            $session->setSessionName('My Session') ; 
            $session['sleep'] = 0 ;
            $session['attempts'] = 0 ;
            $session->writeSession('sleep','0') ; 
            $session['ip'] = $this->get_ip_address() ; $session->close() ;    var_dump($session,$session['ip']) ; 
```

但是，我无法在上面设置会话变量，转储结果如下：

```
object(CHttpSession)#17 (5) { ["autoStart"]=> bool(true) ["behaviors"]=> array(0) { } ["_initialized":"CApplicationComponent":private]=> bool(false) ["_e":"CComponent":private]=> NULL ["_m":"CComponent":private]=> NULL } string(3) "::1" 
```

它将 $session 和 $session['ip'] 视为两个完全不同的变量。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-24T15:30:24.747

我以另一种方式在 Yii 下使用会话，我使用 app() 变量下的全局会话变量。所以你可以像这样存储值：

```
Yii::app()->session['sleep'] = "value"; 
```

你可以得到这样的值：

```
$sleep = Yii::app()->session['sleep']; 
```

最后你可以像这样删除它：

```
unset(Yii::app()->session['sleep']); 
```

这样您就可以在代码中的任何地方访问它们。我建议您阅读这篇文章：[http](http://www.larryullman.com/2011/05/03/using-sessions-with-the-yii-framework/) ://www.larryullman.com/2011/05/03/using-sessions-with-the-yii-framework/它包含您需要的所有信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-11T07:31:13.353

要删除 yii 中的会话变量...

请使用此实际格式。

```
Yii::app()->session->remove('session_name'); 
```

[http://www.yiiframework.com/doc/api/1.1/CHttpSession#remove-detail](http://www.yiiframework.com/doc/api/1.1/CHttpSession#remove-detail)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-07-22T07:07:37.553

```
$session = 新 \yii\web\Session();

$会话->打开（）；

$session['account_id'] = $id;

$session['account_name'] = $name;

```

# python - Python csv.reader 与 csv.dictreader 的区别？

> ID：13541567
> 
> 赞同：5
> 
> 时间：2012-11-24T13:16:54.313
> 
> 标签：python

有两个脚本会给出非常不同的结果。首先使用 csv.reader 并且工作正常，然后使用 csv.dictreader 给我带来了问题。两个脚本都使用相同的数据集，两个文件之间的唯一区别是 dictreader 使用的一个具有标题。

```
import csv

inv = csv.reader(open('inv.txt', 'rU'), dialect='excel', delimiter="\t")

for PART_CODE,MODEL_NUMBER,PRODUCT_NAME,COLOR,TOTAL_ONHAND,TOTAL_ON_ORDER,TOTAL_SALES,SALES_YEAR_TO_DATE,SALES_LASTYEAR_TO_DATE,\
TOTAL_NUMBER_OF_QTYsSOLD,TOTAL_PURCHASES,PURCHASES_YEAR_TO_DATE,PURCHASES_LASTYEAR_TO_DATE,TOTAL_NUMBER_OF_QTYpurchased,DATE_LAST_SOLD,DATE_FIRST_SOLD in inv:
    if int(TOTAL_ON_ORDER) >= 1:
        print ('%-20s %-100s OnHand: %-4s OnOrder: %-4s') % (MODEL_NUMBER,PRODUCT_NAME,TOTAL_ONHAND,TOTAL_ON_ORDER) 
```

以上工作正常，它将解析 20,000 多个项目而没有错误。现在，如果我选择使用如下所示的 dictreader，脚本会在一段时间后遇到问题......

```
import csv

inv = csv.DictReader(open('ireport.txt', 'rU'), dialect='excel', delimiter="\t")

for row in inv:
    if int(row['TOTAL_ON_ORDER']) >= 1:
        print ('%-20s %-100s OnHand: %-4s OnOrder: %-4s') % (row['MODEL_NUMBER'],row['PRODUCT_NAME'],row['TOTAL_ONHAND'],row['TOTAL_ON_ORDER']) 
```

打印出大约 100 个左右，然后失败并报告此错误：

```
if int(row['TOTAL_ON_ORDER']) >= 1:

ValueError: invalid literal for int() with base 10: 'False' 
```

让我感到困惑，因为两个脚本都使用相同的数据（除了阅读器没有标题行而 dictreader 有）一个完美无瑕，另一个抱怨。有什么线索吗？

inv.txt 的片段：

```
61965901576 383964  Sandisk 128MB 3.3V Smartmedia Card      0   0   0   0   0   0   0   0   0   0   00/00/00    00/00/00
61965901521 348236  Sandisk 128MB Compactflash Card     0   0   54.26   0   0   1   0   0   0   0   01/09/02    01/09/02
61965902011 SDCZ2-1024-A10  Sandisk 1GB Cruzer Mini USB Flash Drive     0   0   0   0   0   0   0   0   0   0   00/00/00    00/00/00
61965901571 266796  Sandisk 256MB CompactFlash Disk     0   0   678.22  0   0   5   0   0   0   0   06/27/02    03/08/02 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T14:33:40.927

看起来它正在函数中将布尔值读取为整数（它不满意）`DictReader`，而在`reader`函数中它并没有像这样进行转换。

试试这个：

```
import csv

inv = csv.DictReader(open('ireport.txt', 'rU'), dialect='excel', delimiter="\t")

for row in inv:
    try:
      if int(row['TOTAL_ON_ORDER']) >= 1:
          print ('%-20s %-100s OnHand: %-4s OnOrder: %-4s') % (row['MODEL_NUMBER'],row['PRODUCT_NAME'],row['TOTAL_ONHAND'],row['TOTAL_ON_ORDER'])
    except Exception as Err:
      print row['TOTAL_ON_ORDER'],Err
      break #if you want to end the function) 
```

这会告诉你它在哪条线上窒息，如果你去掉断线，应该会穿过它。

祝你好运！

# css - 在 Mac OS 上的 Chrome 中刷新页面时出现浮动错误。为什么？

> ID：13541570
> 
> 赞同：2
> 
> 时间：2012-11-24T13:17:30.833
> 
> 标签：css, macos, google-chrome

有时刷新页面，向左或向右浮动的页面元素呈现错误，跳到其实际位置下方。只能在 Mac OS X 10.8 上使用最新版本的 Google Chrome 来重现此错误。一些截图：

好： ![好的](../Images/deb93f2610e3588feff8e33b986a75b1.png) 坏： ![错误的](../Images/615065685357005550414908ea91c6e5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:09:49.860

由于空间限制，通常最后一个元素会跳到底部，我的建议是尝试给 Div.Basket 内的每个 DIV 一个边框并检查每个 div 的宽度，很可能你会注意到最后一个元素没有足够的空间要适合盒子，如果是这种情况，那么只需减少任何 div 的宽度以腾出空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:10:00.780

将父级设置为“位置：相对；” 和交叉到“位置：绝对；顶部：0；右：0；”。它将保持十字架在父级的上角。

# eclipse - 多个版本的eclipse

> ID：13541571
> 
> 赞同：0
> 
> 时间：2012-11-24T13:17:45.907
> 
> 标签：eclipse

我可以下载经典的 Eclipse 版本并添加可以让我获得任何其他可供下载的软件包吗？

我想要 java 开发和 C/C++ 开发版本，但希望它们在一个 Eclipse 安装中。这是可能的还是我必须下载两个 Eclipse 并保留两个安装并运行两个版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:26:43.780

您只需要安装一个 Eclipse。所有软件包都可以通过安装软件菜单选项安装。Java 和 C/C++ 版本之间的唯一区别是预先安装的软件包，从而节省了开始安装的时间。

# java - 尝试为实体创建密钥时出现 IllegalArgumentException

> ID：13541574
> 
> 赞同：7
> 
> 时间：2012-11-24T13:18:43.010
> 
> 标签：java, google-app-engine, key

我正在研究 Google App Engine，但我被困在了一个点上。我正在尝试为我的实体创建一个密钥。这是代码：

```
Element child = (Element) itr.next();
                String name = "";
                if(child.getQualifiedName().equals("name")){
                    name += child.getText();
                }
                Key drugKey = KeyFactory.createKey("DrugTarget", name); 
```

我 100% 确定 child.getText() 不会返回 null。我已经测试过了。我有另一段代码可以完美地创建 Key。两者看起来彼此相似。

```
String drug = req.getParameter("drugname");
Key drugKey = KeyFactory.createKey("DrugTarget", drug); 
```

我真的不明白为什么它会出错。第一段代码属于 Java 类，我在 Java Servlet 类中调用这个类。第二个属于 Java Servlet 类。但我认为问题是不同的。能否请你帮忙？谢谢。

编辑部分：

```
if(child.getQualifiedName().equals("name")){
                    if(child.getText() != null){
                    name = child.getText();
                    }
                    else{
                        name = "asd";
                    }
                } 
```

我把它放到我的代码中，仍然出现空错误。child.getText() 不返回 null 并且名称不等于“asd”。

忘记添加错误消息：

```
Uncaught exception from servlet
java.lang.IllegalArgumentException: name cannot be null or empty
at com.google.appengine.api.datastore.KeyFactory.createKey(KeyFactory.java:73)
at com.google.appengine.api.datastore.KeyFactory.createKey(KeyFactory.java:60)
at guestbook.saxParser2.getDrug(saxParser2.java:42)
at guestbook.SignGuestbookServlet.doPost(SignGuestbookServlet.java:77)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:102)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:266)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:146)
at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:447)
at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T13:45:32.703

错误信息说：

```
Uncaught exception from servlet
java.lang.IllegalArgumentException: name cannot be null or empty 
```

而你的实际代码：

```
String name = "";
if(child.getQualifiedName().equals("name")){
  name += child.getText();
}
Key drugKey = KeyFactory.createKey("DrugTarget", name); 
```

因此，在 if 语句中，`child.getQualifiedName().equals("name")`表达式为假，“name”字符串变量仍然是一个空字符串 ( `String name = ""`)。这就是错误消息所说的：不能是`Key drugKey = KeyFactory.createKey("DrugTarget", name);`作为参数的空字符串。

编辑：试试这个：

```
Element child = (Element) itr.next();
String name = "defaultName";
if(child.getQualifiedName().equals("name")){
  name = child.getText();
}
Key drugKey = KeyFactory.createKey("DrugTarget", name); 
```

问题不在于是否`child.getText()`返回 null，问题在于您的 if 语句中的表达式 will be `false`，因此`name += child.getText();`无法访问并且`name`仍然是空字符串。

```
if(child.getQualifiedName().equals("name")){
      name += child.getText();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T14:01:33.430

“煮”准备吃。

```
Element child = (Element) itr.next();
                String name;
                if(child.getQualifiedName().equals("name")){
                    name = child.getText();
                 if(name!=null){
                    Key drugKey = KeyFactory.createKey("DrugTarget", name);
                 }
                } 
```

# encryption - 在 WinRT 中，是否可以解密使用 .NET RijndaelManaged 算法加密的文本？

> ID：13541576
> 
> 赞同：0
> 
> 时间：2012-11-24T13:18:52.130
> 
> 标签：encryption, cryptography, windows-runtime

WinRT 库（C# Windows 8 应用程序开发）没有 .NET 所具有的[RijndaelManaged](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rijndael%28v=vs.90%29.aspx)类。但它确实有很多[AES-algorithms](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.cryptography.core.symmetrickeyalgorithmprovider.openalgorithm%28v=win.10%29.aspx)，据我所知，这是[Rijndael](http://blogs.msdn.com/b/shawnfa/archive/2006/10/09/the-differences-between-rijndael-and-aes.aspx)算法的一个子集。我可以使用 RijndaelManaged 类解密在 .NET 中加密的文本，其中我使用了 128 位 IV 和 256 位密钥？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T15:00:56.450

是的，这当然是可能的。这是一种标准化算法，在我看来，至少 CBC + PKCS7Padding 两者都存在。*当然，当 Rijndael 的块*大小选择为 256 位而不是标准化的 128 位时，这不起作用。

# wpf - WPF DataGrid隐藏后刷新缓慢

> ID：13541577
> 
> 赞同：4
> 
> 时间：2012-11-24T13:18:53.237
> 
> 标签：wpf, performance, datagrid

我正在使用 .NET 4.0 WPF `DataGrid`，绑定到`ObservableCollection<T>`. 该集合每秒添加和删除几次行。`DataGrid`包含在/ `TabControl`/`TabItem`中`Grid`。

只要我让它可见，它或多或少都可以工作。如果我转到应用程序中的其他选项卡，然后在几分钟后返回，UI 线程会锁定 30 秒（总共大约 1200 行，其中大约 40 行在屏幕上）。所有行数据都已经在内存中，所以没有 I/O。所有绑定的属性要么是简单的字符串、数字或日期，要么创建它们的逻辑非常简单；没有什么复杂或耗时的计算。

当有超过几百行时，选择一个新的列进行排序是很慢的。添加新行似乎也很慢。如果我切换到另一个选项卡，然后立即切换回来，网格会很快重新出现。

调整窗口大小可以正常工作。

滚动性能一开始很慢，但在网格完全加载后得到；它从来都不是很好。没有`ScrollView.CanContentScroll="False"`，滚动速度太慢以至于无法使用。相反，在用户放开滚动条后，使用`IsDeferredScrollingEnabled="True"`它会导致渲染延迟 10 秒以上——这仍然是一种不可接受的用户体验。

有 17 个`DataGridTextColumns`。有几个列使用 custom `StringFormats`，但并不复杂。没有`TypeConverters`。

Visual Studio 性能工具/分析器一直没用。这似乎是一个相对简单/直接的设置。任何有关如何提高性能的建议将不胜感激。

我也想知道**为什么**这么**慢**。

```
<DataGrid x:Name="MyGrid" AutoGenerateColumns="False" Margin="3,35,3,20" VerticalContentAlignment="Center" Width="Auto" 
                          FontSize="12" FontFamily="Consolas" ScrollViewer.CanContentScroll="False"
                          CanUserResizeRows="False" AlternationCount="2" AlternatingRowBackground="#FFE3F0FF"
                          VirtualizingStackPanel.VirtualizationMode="Recycling" IsReadOnly="True">
    <DataGrid.Columns>
        <DataGridTextColumn Header="XX" Binding="{Binding Path=XX}" />
        <DataGridTextColumn Header="YY" Binding="{Binding Path=YY, StringFormat={}{0:0.0}}">
            <DataGridTextColumn.ElementStyle>
                <Style>
                    <Setter Property="TextBlock.TextAlignment" Value="Right" />
                </Style>
            </DataGridTextColumn.ElementStyle>
        </DataGridTextColumn>
        . . .
    </DataGrid.Columns>
</DataGrid> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T13:33:55.407

删除`ScrollViewer.CanContentScroll = "False"`. 它将禁用 WPF DataGrid 的默认 UI 虚拟化支持。

请参阅此处的答案[Physical scrolling disable UI Virtualization](https://stackoverflow.com/questions/3724593/why-setting-scrollviewer-cancontentscroll-to-false-disable-virtualization)。

从答案 -

> “ScrollViewer 目前允许两种滚动模式：平滑逐像素滚动 (CanContentScroll = false) 或离散逐项滚动 (CanContentScroll = true)。目前 WPF 仅在逐项滚动时支持 UI 虚拟化。基于像素的滚动是也称为“物理滚动”，基于项目的滚动也称为“逻辑滚动”。”

**更新**

如果您希望在拖动滚动条时平滑操作，可以将其设置`IsDeferredScrollingEnabled`为`true`。它将使视图中的项目仅在您释放滚动条拇指后才呈现，而不是在拖动操作期间创建所有项目。

```
<DataGrid ScrollViewer.IsDeferredScrollingEnabled="True"/> 
```

此外，来自[MSDN](http://msdn.microsoft.com/en-us/library/cc716879.aspx)的此链接可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T20:24:50.023

我建议您在选项卡项之间切换时调查非持久选项卡项状态的 TabControl 问题。

TABCONTROL具有特定的行为 - 当Tab项目未被选中时，其内容被破坏，并且必须在选择选项卡项目再次选择时重新创建它，这意味着必须重新创建整个DataGrid及其所有可见数据杂志。

只是谷歌“在 WPF TabControl 中保持视觉树”或“在 WPF TabControl 中保持状态”。

# jquery - jQuery UI（切换）下拉菜单与其他菜单重叠

> ID：13541582
> 
> 赞同：2
> 
> 时间：2012-11-24T13:19:01.270
> 
> 标签：jquery, html, css, jquery-ui, drop-down-menu

菜单与其他菜单重叠。当您单击第一个菜单“关于我们”时，它会打开。但是当您单击“产品”时，“关于我们”不会关闭，因此“产品”菜单会与“关于我们”菜单重叠。

**[jsfiddle](http://jsfiddle.net/iamthestig/ncTQr/)**

HTML

```
<body>
<nav>
   <ul class="nav">
        <li><a href="#"></a></li>
        <li class="menuabout"><a>About</a>
             <ul class="subnav01 clearfix">
                  <li><a href="#">About One</a></li>
                  <li><a href="#">About Two</a></li>
                  <li><a href="#">About Three</a></li>
                  <li><a href="#">About Four</a></li>
                  <li><a href="#">About Five</a></li>
                  <li><a href="#">About Six</a></li>
             </ul>
        </li>
        <li class="menuproducts"><a>Products</a>
             <ul class="subnav02 clearfix">
                  <li><a href="#">Product One</a></li>
                  <li><a href="#">Product Two</a></li>
                  <li><a href="#">Product Three</a></li>
                  <li><a href="#">Product Four</a></li>
                  <li><a href="#">Product Five</a></li>
                  <li><a href="#">Product Six</a></li>
             </ul>
        </li>
        <li><a href="#">Services</a></li>
        <li><a href="#">Contact</a></li>
   </ul>             
</nav> 
```

​</p>

CSS

```
* {
    margin: 0;
    padding: 0;
}

body {
    width: 100%;
    height: 100%;
    background: darkgray;
}

.nav {
    width: 100px;
    position: absolute;
    top: 30px;
    right: 20px;
    list-style: none;
}

.nav li {
    margin: 0 0 10px 0;
    font-family: Helvetica;
    font-size: 11px;
    text-align: right;
    text-transform: uppercase;
    line-height: 1;
}

.nav li:nth-child(5) {
    margin: 0;
}

.nav li a {
    height: 10px;
    padding: 10px 10px 10px 0;
    color: white;
    text-decoration: none;
    display: block;
    cursor: pointer;
    position: relative;
}

.subnav01, .subnav02 {
    width: 300px;
    position: absolute;
    top: 29px;
    left: -300px;
    display: none;
}
.subnav01 li, .subnav02 li {
    width: 150px;
    margin: 0;
    text-align: center;
    float: left;
}

.subnav01 li a, .subnav02 li a {
    -webkit-transition: all 0.5s ease;
    -moz-transition: all 0.5s ease;
    -ms-transition: all 0.5s ease;
    -o-transition: all 0.5s ease;
    transition: all 0.5s ease;
    background: dodgerblue;
    height: 10px;
    display:block;
}

.subnav01 li a:hover, .subnav02 li a:hover {
    background: dimgray;
}

.clearfix:before,
.clearfix:after {
    content: " "; /* 1 */
    display: table; /* 2 */
}

.clearfix:after {
    clear: both;
}

.active > a {
    background: dodgerblue !important;
}​ 
```

JS/jQuery/jQuery UI/

```
jQuery(document).ready(function($){
    $(".menuabout").on("click", function(){
        $(".subnav01").toggle ("slide", {direction: "right"}, "slow");
        $(this).toggleClass("active");
    });
    $(".menuproducts").on("click", function(){
        $(".subnav02").toggle ("slide", {direction: "right"}, "slow");
        $(this).toggleClass("active");
    });
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T15:27:10.640

好吧，您可以尝试这样的事情。我已将`menu`所有菜单元素的类更改为，因此您可以对所有菜单元素使用一个功能

[**JSFIDDLE**](http://jsfiddle.net/ncTQr/35/)

```
jQuery(document).ready(function($){
    $(".menu").on("click", function(){
        deactivateAll(this);
        toggle(this);
    });

    function deactivateAll(current) {
        $( "li" ).each(function( index, elem ){
            if (elem != current && $(elem).hasClass("active")) {
                toggle(elem);
            }
        });
    }

    function toggle(elem) {
        $(elem).find("ul").toggle ("slide", {direction: "right"}, "slow");
        $(elem).toggleClass("active");
    }
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T14:02:42.330

这有效：（[小提琴](http://jsfiddle.net/ncTQr/8/)）

```
jQuery(document).ready(function($){
    $(".menuabout").on("click", function(){
        reset();
        $(".subnav01").toggle ("slide", {direction: "right"}, "slow");
        $(this).toggleClass("active");
    });
    $(".menuproducts").on("click", function(){
        reset();
        $(".subnav02").toggle ("slide", {direction: "right"}, "slow");
        $(this).toggleClass("active");
    });
    function reset() {
        $("ul.nav li").removeClass("active");
        $("ul.nav li ul").hide();        
    }
});​ 
```

你也可以稍微重构你的代码，这样它就不会重复太多。添加更多根导航元素意味着每次都复制您的代码:)

# c - 是否可以创建一个指向结构（节点）的指针数组？

> ID：13541583
> 
> 赞同：1
> 
> 时间：2012-11-24T13:19:25.763
> 
> 标签：c, arrays, pointers, tree, treenode

所以我正在尝试制作一个前缀树，但我不确定这是否会导致某种逻辑错误？

```
typedef struct TreeTag
{
    char letter;
    struct TreeTag *links[26]; /* Is this advisable? */
    int fullword;
    int linknum;
}TreeNode; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:21:46.547

是的，允许指向结构节点的指针数组

如果你这样做：

```
struct node * p; //it's allowed 
```

所以声明指针数组没有问题。

当您需要多个指向同一结构的指针时，您可以这样做

```
struct node * left;
 strcut node * right; 
```

那你为什么不能这样做

```
struct node *child[2]; 
```

同样`struct node *p[26]`也是可能的，但一切都取决于您的要求和实施。

一个要求，正如我所想到的`d-ary tree`（每个节点都有 d 个节点）并且您想直接从父节点导航到它的子节点。

所以`struct node *child[d]`是合法的（其中 d 是`#defined`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:21:09.247

没关系。您可以在结构内使用指向结构的指针。

在您声明成员时，该结构被视为已声明但未定义，并且指向已声明但尚未定义类型的指针很常见。例如，您如何能够在二叉树或链表中定义节点？对于列表，您通常会执行类似的操作

```
typedef struct ListItem {
   struct ListItem * next;
   SomeType data;
} ListItem; 
```

# c# - 从两个不同的字典中获取相同的键

> ID：13541586
> 
> 赞同：3
> 
> 时间：2012-11-24T13:19:38.077
> 
> 标签：c#, linq, dictionary

我有两个不同的字典：

```
Dictionary<int, User> X;
Dictionary<int, User> Y; 
```

我想使用 LINQ 从他们那里获取相同键的列表。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T13:20:58.497

```
var sameKeys = X.Keys.Intersect(Y.Keys).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:24:13.350

我会推荐这样的东西： -

```
 var dict = new Dictionary<int, HashSet<string>>();
  dict.Add(1, new HashSet<string>() { "first", "second" }); 
```

或者你可以试试这个： -

```
 var items = new List<KeyValuePair<int, String>>();
  items.Add(new KeyValuePair<int, String>(1, "first"));
  items.Add(new KeyValuePair<int, String>(1, "second"));
  var lookup = items.ToLookup(kvp => kvp.Key, kvp => kvp.Value);

  foreach (string x in lookup[1])
  {
     Console.WriteLine(x);
  } 
```

# actionscript-3 - 皮肤火花闪光按钮

> ID：13541588
> 
> 赞同：1
> 
> 时间：2012-11-24T13:19:59.853
> 
> 标签：actionscript-3, flash, flash-builder

我试图用我自己的自定义图像更改经典的火花按钮图像。为此，我使用了按钮的 skinsClass 属性。我的问题是当我短时间单击按钮时，我的图像会出现并消失，然后执行按钮的操作。我想实现静态图像点击之类的东西。

这是按钮的代码：

```
var button:Button = new Button();   
button.setStyle('skinClass', skins.ImageButtonSkin); 
```

这是皮肤类的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark"
        minWidth="48" minHeight="48"
        alpha.up="1"
        alpha.down="0">
    <!-- host component -->
    <fx:Metadata>
        [HostComponent("spark.components.Button")]
    </fx:Metadata>

    <!-- states -->
    <s:states>
        <s:State name="disabled" />
        <s:State name="down"  />
        <s:State name="over" />
        <s:State name="up" />
    </s:states>

    <s:BitmapImage source="../assets/gift-icon.png" includeIn="down"/>
    <s:BitmapImage source="../assets/gift-icon.png" includeIn="up"/>
    <s:BitmapImage source="../assets/gift-icon.png" includeIn="over"/>
    <s:BitmapImage source="../assets/gift-icon.png" includeIn="disabled"/>
    <!-- SkinParts
    name=iconDisplay, type=spark.primitives.BitmapImage, required=false
    name=labelDisplay, type=spark.core.IDisplayText, required=false
    -->
</s:Skin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:02:37.033

为了克服这个问题，我使用属性 buttonMode="true" 代替 s:Button 和 s:Image

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T10:41:41.410

alpha.down="0" -> alpha.down="1"

# javascript - 获取轮播中ul的索引

> ID：13541589
> 
> 赞同：0
> 
> 时间：2012-11-24T13:20:01.787
> 
> 标签：javascript, jquery, indexing, carousel

我有一个带有不同列表的轮播。接下来我有一个按钮。当我单击按钮时，轮播向左移动 200 像素。比你可以看到的其他图像。但我对这个定制的旋转木马有疑问。

我把脚本放在 Jsfiddle 上：http: [//jsfiddle.net/kwdMP/2/](http://jsfiddle.net/kwdMP/2/)

我想获得轮播的 .index 。但轮播不适用于 .index。谁能帮我修好这个旋转木马？谢谢各位帮忙！

这是我的 js 代码：

```
$(document).ready(function() {
    // Add width en height to the container - wrapper
    var ul = $('.list-thumbnails');
    var lengthUL = $('.list-thumbnails').length + 1;
    var containerWidth = $(ul).outerWidth() * lengthUL;

    $('.container-list-thumbnails').css({
        width: containerWidth
    });

    // Buttons for next and previous
    $('.container-thumbnails').append('<div class="buttons"><a href="#" title="Ga naar de vorige" class="previous">Vorige</a><a href="#" title="Ga naar de volgende" class="next">Volgende</a></div>')
    var buttonPrevious = $('.container-thumbnails .previous');
    var buttonNext = $('.container-thumbnails .next');

    buttonNext.click(function(e) {
        e.preventDefault();

        if (this.ignoreButtons) {
            return;
        }

        var section = $('.container-list-thumbnails');
        var sectionIndex = section.index();

        var x = -300 * (sectionIndex + 1);

        console.log(x);

        this.ignoreButtons = true;

        $('.container-list-thumbnails').animate({
            left: x,
        }, function() {
            this.ignoreButtons = false;
        }.bind(this));
    }.bind(this));
});
​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:10:14.050

我修改了您的滑块以对两个按钮使用一键式处理程序，并使用 jQuery存储`sectionIndex`在父元素中。您需要进一步改进它，使其不能低于零或超过拇指列表的长度`buttons``data('sectionIndex')`

```
$('.buttons').data('sectionIndex', 0);
var section = $('.container-list-thumbnails');
$('.buttons a').click(function(e) {
    e.preventDefault();
    var isNext = $(this).is('.next');
    var $parent = $(this).parent();

    //if (this.ignoreButtons) {
        //return;
    //}
    var currIndex = $parent.data('sectionIndex');

    var sectionIndex = isNext ? currIndex + 1 : currIndex - 1;

    $parent.data('sectionIndex', sectionIndex);

    var x = -300 * sectionIndex;

    console.log(x);

    // this.ignoreButtons = true;
    $('.container-list-thumbnails').animate({
        left: x,
    }, function() {
        this.ignoreButtons = false;
    });
}); 
```

演示：http: [//jsfiddle.net/kwdMP/3/](http://jsfiddle.net/kwdMP/3/)

# mysql - 如何根据计数退回商品

> ID：13541590
> 
> 赞同：0
> 
> 时间：2012-11-24T13:20:03.613
> 
> 标签：mysql

我正在尝试从桌子上退回属于 an 的最有天赋的`order`物品`orders`。目前这会退回任何已赠送的物品，我希望它做的是在退回之前检查该物品是否已多次赠送，作为检查礼物不是一次性的并且实际上是一个受欢迎的礼物选择。

这是我目前拥有的：

```
SELECT Item_Type, Item_Desc, item_Cost 
FROM rbickers.Item

LEFT join rbickers.Basket 
ON Item.Item_id = Basket.theItem_id

LEFT join rbickers.order
on basket.ord_ID = Order.order_ID

LEFT join rbickers.Session 
on Order.Session_id = Session.Ses_id 

WHERE Order.order_isGift = "true"
order by item_type 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:42:10.893

您可能正在寻找[GROUP BY](http://dev.mysql.com/doc/refman/5.1/en/group-by-modifiers.html)和 HAVING：

```
SELECT Item_Type, Item_Desc, Item_Cost 
FROM Item
JOIN Basket ON theItem_id = Item_ID
JOIN Order ON Order_ID = Ord_ID
WHERE Order_isGift = "true"
GROUP BY Item_ID
HAVING count(1) > 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T13:26:14.000

你有没有想过有另一张桌子简单地计算礼物，因为它们是有天赋的？然后你可以排序`Times_Gifted`，它会在后端节省一些操作。

否则，如果它是一次性计算，也许是这样的

```
SELECT count(*) FROM `tablename` 
```

根据您的需要使用适当的其他过滤器（摘自[http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html](http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html)）

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T17:50:17.153

您需要将每个项目的赠送次数相加，将结果排序为我最大的计数，然后只取第一行：

```
SELECT Item_Type, Item_Desc, item_Cost, sum(Basket.qty) as total_ordered
FROM rbickers.Item
LEFT join rbickers.Basket ON Item.Item_id = Basket.theItem_id
LEFT join rbickers.order on basket.ord_ID = Order.order_ID
LEFT join rbickers.Session on Order.Session_id = Session.Ses_id 
WHERE Order.order_isGift = "true"
GROUP BY 1, 2, 3
ORDER BY sum(Basket.qty) DESC
LIMIT 1; 
```

# c++ - 使用基类的静态函数而不指定参数以避免歧义

> ID：13541592
> 
> 赞同：5
> 
> 时间：2012-11-24T13:20:15.097
> 
> 标签：c++, c++11, class-template

我的一些基类有很多参数。现在我想指定使用哪个静态函数：

```
template <typename... Types>
struct SBase {
    static void func() {
    }
};

struct A : public SBase<int> {
};

struct B : public A, public SBase<int, double, short,
    unsigned int, float, unsigned char, long, unsigned long> {

    // using SBase::func; // Not possible.
    // Horrible, but works.
    using SBase<int, double, short,
    unsigned int, float, unsigned char, long, unsigned long>::func;
}; 
```

如您所见，我需要编写两次模板参数，这会导致代码重复。

有没有办法摆脱它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T13:34:20.067

您可以使用 typedef：

```
typedef SBase<int, double, short, unsigned int, float, unsigned char,
      long, unsigned long> B_SBase;

struct B : public A, public B_SBase {
    using B_SBase::func;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T13:39:32.847

如果 B 已经是一个模板（这在我的代码中主要是这种情况），那么你可以像这样使用 sth：

```
template <typename MyBase = SBase<int, double, short,
                                  unsigned int, float, unsigned char,
                                  long, unsigned long> >
struct B : public A, public MyBase {
  using MyBase::func;
}; 
```

但是，如果不是，那么我知道不可能不重复基类或使用`typedef SBase<...> Bs_Base`. 但如果你很聪明，你只需要写两次：

```
struct B : public A, public SBase<int, double, short,
    unsigned int, float, unsigned char, long, unsigned long> {
  typedef SBase<int, double, short, unsigned int, float,
                unsigned char, long, unsigned long> MyBase;
};
static_assert(std::is_base_of<B::MyBase, B>::value, ""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T13:33:02.220

制作`B`班级模板。在那里，没有重复：

```
template<typename... Types>
struct B : public A, public SBase<Types...> {
  using SBase<Types...>::func;
};

typedef B<int, double, short, unsigned int, float, unsigned char, long, unsigned long> BB;

void foo ()
{
  BB::func();
} 
```

# python - 如何在 Django 中动态设置模型选择

> ID：13541594
> 
> 赞同：0
> 
> 时间：2012-11-24T13:20:23.443
> 
> 标签：python, django

首先请看我下面的代码：

```
Project = models.ForeignKey(Project,null=False, blank=True)
if Porject is 'A':
    Owner = models.CharField(max_length=100, choices=**owner_set_A**)
else:
    Owner = models.CharField(max_length=100, choices=**owner_set_B**) 
```

所以所有者的选择应该从 owner_set_A 切换到 B，这取决于 Project 的值。谁告诉我我该怎么做，谢谢蒂米的回复，但是我应该在models.Model中做什么

```
class Task(models.Model):
    project = models.ForeignKey(Project,null=False, blank=True)
    if Porject is 'A':
        Owner = models.CharField(max_length=100, choices=**owner_set_A**)
    else:
        Owner = models.CharField(max_length=100, choices=**owner_set_B**) 
```

有没有办法获取项目字段值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:35:50.843

您不需要两个单独的字段。该字段仅包含数据，您需要过滤[`choices`](https://docs.djangoproject.com/en/dev/ref/models/fields/#choices)用户在其表单中呈现的内容。例如，如果您使用 django admin，您可以执行类似（未经测试）的操作

```
class MyModelForm(forms.ModelForm):
    def __init__(self, *args, *kwargs):
         super(MyModel, self).__init__(args, kwargs)
         if self.fields['project'].foo == "bar":
             self.fields['owner'].choices = ((0, "X"), (1, "Y"),...)
         else:
             self.fields['owner'].choices = ((0, "A"), (1, "B"),...)

    class Meta:
         model = MyModel 
```

**管理员.py**

```
class MyModelAdmin(admin.ModelAdmin):
    form = MyModelForm 
```

# c# - 托管 c# 客户端和非托管 c++ 应用程序之间的 dll 桥接器

> ID：13541595
> 
> 赞同：1
> 
> 时间：2012-11-24T13:20:45.053
> 
> 标签：c#, c++, web-services, unmanaged, managed

我需要在我的 c++ 应用程序中从远程服务器使用 Web 服务（不是 wcf 服务）。我遵循了@Matt Davis 在此链接中给出的示例。 [为非托管 C++ 客户端创建 WCF 服务，](https://stackoverflow.com/questions/686452/create-wcf-service-for-unmanaged-c-clients) 即使用 c++ dll 来弥合托管 c# WCF 客户端和非托管 c++ 应用程序之间的差距。为了测试它的可行性，我几乎复制了整个代码并遵循了所有的配置步骤，除了该服务是由远程服务器提供的遗留 Web 服务。下面是我的bridge.cpp

```
#include "bridge.h"
#include "Ibridge.h"
#include<string>

using namespace System;
using namespace System::Runtime::InteropServices;
using namespace System::ServiceModel;
using namespace System::ServiceModel::Channels;

std::string Ibridge::getSupportCity(std::string name)
{   std::string rv;
    Binding^ binding = gcnew WSHttpBinding();
    EndpointAddress^ address = gcnew EndpointAddress(gcnew     String("http://www.webxml.com.cn/WebServices/WeatherWebService.asmx"));
    client::ServiceReference1::WeatherWebServiceSoapClient^ client1 = gcnew  client::ServiceReference1::WeatherWebServiceSoapClient(binding, address);
    try {
    String^ message=client1->getSupportCity(gcnew System::String(name.c_str()))[0];
        client1->Close();

        IntPtr ptr = Marshal::StringToHGlobalAnsi(message);
        rv = std::string(reinterpret_cast<char *>(static_cast<void *>(ptr)));
        Marshal::FreeHGlobal(ptr);
    } catch (Exception ^) {
        client1->Abort();
    }
    return rv; 
```

getSupportCity 是在 c# 中返回 String[] 的方法之一，为了简化过程，我在方法调用中只返回它的第一个元素。下面是我如何在 MFC 应用程序中调用该方法。

```
void CMFCappDlg::OnBnClickedButton1()
{
    std::string cities = Ibridge::getSupportCity("ALL");
       AfxMessageBox(CString(cities.c_str()));
} 
```

我很确定在运行代码时，“try”部分的第一行（即调用 getSupportCity 时）会引发异常 0xE0434352，并且代码会直接跳转到“catch”部分。

我的编程环境是win7 64bit，vs2010和.NET 4.0。我对这个领域很陌生，非常感谢你的建议。

# php - 无法连接到 MySQL 服务器/Android

> ID：13541596
> 
> 赞同：0
> 
> 时间：2012-11-24T13:20:53.117
> 
> 标签：php, android, mysql

我是安卓新手。我想使用 PHP 连接到 MySQL 服务器。

我有一个交易数据库。在这个数据库中，我创建了一个表`category`。该表由两列组成。首先是`category_id`，它具有 auto_increment 和 primary_key 并且具有数据类型 INT。第二列是`category`，其数据类型为 VARCHAR(30)。

我的 PHP 脚本

```
<?php
$con = mysql_connect("127.0.0.1","root","");
if (!$con) {
  die('Could not connect: ' . mysql_error());
}
mysql_select_db("deal",$con);
$sql=mysql_query("SELECT *  FROM category ORDER BY `category`.`category` ASC");
while($row=mysql_fetch_assoc($sql))
  $output[]=$row;
  print(json_encode($output));
mysql_close($con);
?> 
```

我的安卓代码：

```
package com.example.city;
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import android.app.Activity;
import android.app.ListActivity;
import android.net.ParseException;
import android.os.Bundle;
import android.util.Log;
import android.widget.ArrayAdapter;
import android.widget.Toast;

public class MainActivity extends ListActivity {
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    String result = null;
InputStream is = null;
StringBuilder sb = null;
ArrayList nameValuePairs = new ArrayList();  
List r = new ArrayList();
try{
      //http post
      HttpClient httpclient = new DefaultHttpClient();
      HttpPost httppost = new HttpPost("http://127.0.0.1/city.php");
      httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
      HttpResponse response = httpclient.execute(httppost);
      HttpEntity entity = response.getEntity();
      is = entity.getContent();
    }
    catch(Exception e){
      Toast.makeText(getBaseContext(),e.toString() ,Toast.LENGTH_LONG).show();
}
//Convert response to string
try {
      BufferedReader reader = new BufferedReader(new InputStreamReader(is,"UTF-8"));
      sb = new StringBuilder();
      String line = null;
      while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
      }
      is.close();
      result = sb.toString();
}
catch(Exception e) {
      Toast.makeText(getBaseContext(),e.toString() ,Toast.LENGTH_LONG).show();
    }
//END Convert response to string
try{
      JSONArray jArray = new JSONArray(result);
      JSONObject json_data=null;
      for(int i=0;i<jArray.length();i++ ){
        json_data = jArray.getJSONObject(i);
        r.add(json_data.getString("category"));
      }
      setListAdapter(new ArrayAdapter(this, android.R.layout.simple_expandable_list_item_1, r));
    }
    catch(JSONException e1){
      Toast.makeText(getBaseContext(),e1.toString() ,Toast.LENGTH_LONG).show();
    }
    catch (ParseException e1) {
      Toast.makeText(getBaseContext(),e1.toString() ,Toast.LENGTH_LONG).show();
    }
  }
} 
```

错误

> 11-24 18:47:59.501: I/dalvikvm(1574): threadid=3: 对信号 3 做出反应
> 11-24 18:47:59.621: I/dalvikvm(1574): 将堆栈跟踪写入 '/data/anr/ traces.txt'
> 11-24 18:47:59.741: D/AndroidRuntime(1574): 关闭 VM
> 11-24 18:47:59.741: W/dalvikvm(1574): threadid=1: 线程以未捕获的异常退出（组= 0x409c01f8)
> 11-24 18:47:59.751: E/AndroidRuntime(1574): 致命异常: main
> 11-24 18:47:59.751: E/AndroidRuntime(1574): java.lang.RuntimeException: 无法启动活动 ComponentInfo {com.example.city/com.example.city.MainActivity}：java.lang.NullPointerException
> 11-24 18:47:59.751：E/AndroidRuntime(1574)：在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java: 1956)
> 11-24 18:47:59.751: E/AndroidRuntime(1574): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
> 11-24 18:47:59.751: E/AndroidRuntime(1574): 在 android. app.ActivityThread.access$600(ActivityThread.java:123)
> 11-24 18:47:59.751: E/AndroidRuntime(1574): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
> 11-24 18 :47:59.751: E/AndroidRuntime(1574): 在 android.os.Handler.dispatchMessage(Handler.java:99)
> 11-24 18:47:59.751: E/AndroidRuntime(1574): 在 android.os.Looper。循环（Looper.java:137）11-24
> 18:47:59.751：E/AndroidRuntime（1574）：在 android.app.ActivityThread.main（ActivityThread.java:4424）
> 11-24 18:47:59.751: E/AndroidRuntime(1574): 在 java.lang.reflect.Method.invokeNative(Native Method)
> 11-24 18:47:59.751: E/AndroidRuntime(1574): 在 java.lang .reflect.Method.invoke(Method.java:511)
> 11-24 18:47:59.751: E/AndroidRuntime(1574): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
> 11-24 18:47:59.751: E/AndroidRuntime(1574): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
> 11-24 18:47:59.751: E/AndroidRuntime(1574) : 在 dalvik.system.NativeStart.main(Native Method)
> 11-24 18:47:59.751: E/AndroidRuntime(1574): 由: java.lang.NullPointerException
> 11-24 18:47:59.751: E/AndroidRuntime( 1574）：在 org.json.JSONTokener.nextCleanInternal（JSONTokener.java:116）
> 11-24 18:47:59.751: E/AndroidRuntime(1574): 在 org.json.JSONTokener.nextValue(JSONTokener.java:94)
> 11-24 18:47:59.751: E/AndroidRuntime(1574): 在 org. json.JSONArray.(JSONArray.java:87)
> 11-24 18:47:59.751: E/AndroidRuntime(1574): 在 org.json.JSONArray.(JSONArray.java:103)
> 11-24 18:47:59.751: E/AndroidRuntime(1574): 在 com.example.city.MainActivity.onCreate(MainActivity.java:69)
> 11-24 18:47:59.751: E/AndroidRuntime(1574): 在 android.app.Activity.performCreate(Activity .java:4465)
> 11-24 18:47:59.751: E/AndroidRuntime(1574): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
> 11-24 18:47:59.751: E/AndroidRuntime(1574 ): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
> 11-24 18:47:59.751: E/AndroidRuntime(1574): ... 11 更多
> 11-24 18:48:00.011: I/dalvikvm(1574): threadid=3: 对信号 3 做出反应
> 11-24 18: 48:00.011：I/dalvikvm(1574)：将堆栈跟踪写入“/data/anr/traces.txt”11-24
> 18:48:00.291：I/dalvikvm(1574)：threadid=3：对信号 3
> 11做出反应-24 18:48:00.321: I/dalvikvm(1574): 将堆栈跟踪写入“/data/anr/traces.txt”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T15:47:13.287

我已经回答了关于连接 php n mySQL 的问题，这里是[链接](https://stackoverflow.com/questions/13245771/how-to-validate-the-user-login-credentials-in-android-using-php-mysql-with-the/13248082#13248082) 在这个你将看到如何从 php/mySQL 获取数据以登录 android。试试这个代码，然后你可以修改它以使用你想要的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:36:58.250

下面：

```
 JSONObject json_data=null;
  for(int i=0;i<jArray.length();i++ ){
    json_data = jArray.getJSONObject(i);
    r.add(json_data.getString("category"));
  } 
```

在使用之前确保 json_data 有效。

# php - 在 MongoDB 文档中嵌入许多字符串？

> ID：13541600
> 
> 赞同：3
> 
> 时间：2012-11-24T13:20:59.387
> 
> 标签：php, mongodb, symfony, doctrine-odm, doctrine-mongodb

我需要在我的文档中有一个简单的字符串数组/集合，但无法通过 Doctrine ODM 找到实现这一目标的方法。

这是一个示例类/文档，`$tags`需要是一个简单的字符串数组：

```
namespace Acme\ExampleBundle\Document;
use Doctrine\ODM\MongoDB\Mapping\Annotations as MongoDB;

/** @MongoDB\Document */
class MyDocument {

    /** @MongoDB\Id */
    protected $id;

    /** @MongoDB\String */
    protected $name;

    /** @MongoDB\EmbedMany */
    protected $tags = array();
} 
```

我尝试过不同的事情，`@MongoDB\EmbedMany`或者`@MongoDB\EmbedMany(targetDocument="String")`我知道最后一个没有理由工作，但我只是在尝试我能想到的任何事情。

Mongo DB 作为 JSON 的最终结果就像这样简单：

```
{
    "_id": ObjectId("a0afa410caeea70de1000000"),
    "name": "Example Name",
    "tags": ["tag1", "example", "test tag"]
} 
```

我需要帮助的是，如何使用 @MongoDB\EmbedMany 批注以允许我仅将字符串添加到集合中，然后将其保存到数据库时看起来像上面的 JSON。

我希望有人可以提供帮助，因为我现在真的很困惑。感觉应该就是这么简单！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T15:31:15.767

Doctrine MongoDB ODM 将数组的映射类型称为“哈希”，这有点令人困惑。您的课程将如下所示：

```
namespace Acme\ExampleBundle\Document;
use Doctrine\ODM\MongoDB\Mapping\Annotations as MongoDB;

/** @MongoDB\Document */
class MyDocument {

    // ...

    /** @MongoDB\Hash */
    protected $tags = array();
} 
```

如您在问题中所述，刷新到 MongoDB 应该会导致存储在您的集合中的哈希值。

如需进一步参考，请查看[HashType 实现](https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Mapping/Types/HashType.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-14T19:24:28.443

也`type="collection"`和哈希一样工作

```
 /**
 * @MongoDB\Field(type="collection")
 */

protected $possibleTags;

/**
 * Set tags
 *
 * @param collection $possibleTags
 * @return $this
 */
public function setPossibleTags($possibleTags)
{
    $this->possibleTags = $possibleTags;
    return $this;
}

/**
 * Get tags
 *
 * @return collection $tags
 */
public function getPossibleTags()
{
    return $this->possibleTags;
} 
```

# objective-c - 使用 UIButtons 和 CoreAnimation 创建柔和的随机运动

> ID：13541607
> 
> 赞同：0
> 
> 时间：2012-11-24T13:21:54.160
> 
> 标签：objective-c, ios, uiview, core-animation, uitouch

我正在尝试使用一组 UIButton 在 iPhone 上创建一个动画，每个 UIButton 都应该在 UIView 内缓慢而随机地移动，并相互反弹。我意识到这是一个非常开放的问题，所以我只是为这种效果寻找一个更好的名称，以便我可以进行一些搜索。脉动似乎是合乎逻辑的，但大多数搜索都会因此而定期进出。

我想的几乎就像细胞的“显微镜下”视图，它们各自独立地自行移动，当它们相互撞击时会反弹，或者将很多弹珠放在一个盒子里的效果. 我最终会想要实现用户“轻弹”它们，但这将在稍后进行。

关于从哪里开始寻找的任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T15:12:32.600

我会研究一些 2D 物理引擎，如[Chipmunk](http://chipmunk-physics.net/)或[Box2D](http://box2d.org/) ，因为它们会自行提供碰撞检测和*适当的反应。*然后，您可以将您`UIButtons`的简单刚体建模为具有非常低的初始速度。为按钮设置动画就像在每次绘制时手动移动它们一样简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T14:59:48.307

我首先在布朗运动上搜索，它可能比显微镜下的细胞更随机，因为细胞至少在理论上可以有一些目的和方向。

但是您可能还想查看成群结队或蜂拥而至的行为，这不是您要问的，但它可能在视觉上很有趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T15:22:24.193

你想让你的按钮沿着随机选择的直线移动直到它们撞到什么东西，还是你想让它们蜿蜒曲折？

我不知道您正在尝试做什么的任何示例，但我可以推荐一些要研究的东西。

您可以预先生成 CGPath，然后使用 CAKeyframeAnimation 对象沿路径为按钮设置动画。

检测碰撞以使它们相互反弹是很棘手的。你必须询问视图层的presentationLayer。您可以获取每个按钮的presentationLayer 框架并检查相交，或者使用hitTest 方法检查每个框架的角以查看它们是否落在另一个按钮的框架内。

我在 Github 上有一个示例应用程序，它说明了沿曲线路径为视图设置动画，它还展示了如何使用 CALayer hitTest 方法在图像视图动画时检测点击。

您可以通过***[单击此处访问](https://github.com/DuncanMC/iOS-CAAnimation-group-demo)***Github 项目。

# asp.net - 创建与asp.net上可用数据对应的动态图像

> ID：13541608
> 
> 赞同：0
> 
> 时间：2012-11-24T13:21:55.830
> 
> 标签：asp.net, c#-4.0

我的主页正在使用 jquery 显示图像幻灯片，所有这些图像都是在运行时从 mysql 检索的。我在分区内创建了 9 个由 jquery 移动的图像，我从代码隐藏中给出图像 url 的值。请看我的下面的代码，如果数据库包含少于 9 个图像，则应隐藏空图像。我该怎么做？

```
 <a href="#"> 
```

```
 DataTable dt = Db.ids("home_table");
Image1.ImageUrl = "~/Handler1.ashx?id=" + Convert.ToInt16(dt.Rows[0]["id"].ToString());

Image2.ImageUrl = "~/Handler1.ashx?id=" + Convert.ToInt16(dt.Rows[1]["id"].ToString()); 
```

所有9张图像都遵循此方法...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T13:23:22.787

您不能连接字符串和整数：

```
Image1.ImageUrl = "~/Handler1.ashx?id=" + Convert.ToInt16(dt.Rows[0]["id"]); 
```

转换`ToString()`为解决：

```
Image1.ImageUrl = "~/Handler1.ashx?id=" + Convert.ToInt16(dt.Rows[0]["id"]).ToString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T13:30:26.243

因为您直接访问不存在的行，所以您收到错误。您需要计算 DT 中的行数。

```
numberOfRows = dt.Rows.Count 
```

在那之后

```
if ( numberOfRows >= 2 )
{
   Image2.ImageUrl = "~/Handler1.ashx?id=" + ...    }

if ( numberOfRows >= 3 )
{
   Image3.ImageUrl = "~/Handler1.ashx?id=" + ....    } 
```

等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T13:34:25.527

两种方法解决。

简单的方法：

您可以创建一个图像控件的静态数组（一个包含 9 个元素的数组），然后在从零到图像数量的循环中 - 1。然后，您取消对该数组的引用以更改 url。应该看起来像这样（示例代码，未编译，可能有错误或拼写错误）

声明：

```
Image imageArray[] = { Image1, Image2 ... , Image9}; 
```

在循环：

```
imageArray[index].ImageUrl = "~/Handler1.ashx?id=" + Convert.ToInt16(dt.Rows[index]["id"].ToString()); 
```

或者困难的方式：

将图像控件动态添加到页面。

# php - 返回 json 时出现 Chrome 扩展错误：资源被解释为脚本但使用 MIME 类型 text/json 传输

> ID：13541612
> 
> 赞同：0
> 
> 时间：2012-11-24T13:22:13.117
> 
> 标签：php, javascript, json, google-chrome-extension

我正在制作一个使用[http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)添加令牌的 chrome 扩展。

```
$(function() {
  $("#token").tokenInput("http://localhost/token/search", {
    preventDuplicates: true,
  });
}); 
```

在我的 php 代码中，我返回了一个 json 编码的数组（并且通过应用程序本身使用了相同的函数并且正在工作）：

```
echo json_encode($token_array);
exit; 
```

但是结果没有正确返回，chrome 在控制台中报告以下错误：

> 资源解释为脚本，但使用 MIME 类型 text/html 传输

当我单击源链接时，它的格式似乎正确：

```
[
    {
        "id": "5",
        "name": "token1"
    },
    {
        "id": "3",
        "name": "token2"
    },
    {
        "id": "4",
        "name": "token3"
    }
] 
```

我需要在我的 php 代码中设置标题吗？我试过了：

```
header('Content-type: text/json'); 
```

这会产生以下错误：

> 资源解释为脚本，但使用 MIME 类型 text/json 传输：

当我尝试

```
header('Content-type: application/json'); 
```

它似乎没有提出请求。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:31:54.203

应该是`text/javascript`内容类型：

`header('content-type:text/javascript');`

# objective-c - 将 NSTableView 动画与绑定一起使用

> ID：13541613
> 
> 赞同：15
> 
> 时间：2012-11-24T13:22:22.717
> 
> 标签：objective-c, cocoa, nstableview

我有一个`NSTableView`绑定到一个`NSArrayController`. 的属性绑定到一个`NSArrayController`。一切都很好。`contentSet``NSMutableSet`

现在我想使用内置的动画`NSTableView`来删除行。我可以做到这一点，`- [NSTableView removeRowsAtIndexes:withAnimation:]`并且该行很快就会动画化，但是我从 tableview 中删除的对象仍然挂在`NSMutableSet`支持 tableview 的对象中。显然我需要删除它。如果我尝试通过`NSArrayController`'`removeObject:`方法将其删除，则该对象会立即从 tableview 中消失，这意味着动画不会发生或在中途被切断。

绑定可以创造奇迹并使事情变得如此简单，但是当同时使用绑定和`NSTableView`动画时，保持数据源和 tableview 同步的正确方法到底是什么？答案还应该解决如何`NSTableView`使用动画将行添加到边界。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-09-08T00:57:14.830

动画完成后需要立即更新模型：

```
@IBAction func onRemoveClick(sender: AnyObject?) {
    let selection = listController.selectionIndexes
    NSAnimationContext.runAnimationGroup({
        context in
        self.tableView.removeRowsAtIndexes(selection, withAnimation: .EffectFade | .SlideUp)
    }, completionHandler: {
        self.listController.removeObjectsAtArrangedObjectIndexes(selection)
    })
} 
```

在我的应用程序中使用绑定。在 OS X 10.9、10.10 和 10.11 上测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-09T06:13:16.843

我刚刚在 OS X 10.9 上玩过这个，一切*似乎*对我来说都很好。这是我的代码（我的基于视图的表的每一行都有一个“-”按钮：

```
- (IBAction)removeRow:(id)sender {
    NSUInteger selectedRow = [self.myTable rowForView:sender];
    if (selectedRow == -1) {
        return;
    }
    [self.myTable removeRowsAtIndexes:[NSIndexSet indexSetWithIndex:selectedRow] withAnimation:NSTableViewAnimationSlideUp];
    [self.myArrayHookedUpToTheNSArrayController removeObjectAtIndex:selectedRow];
} 
```

也许在 10.9 中发生了一些变化？所有这些都是从主线程运行的，这可能是为什么？（您是否尝试过在 a 中调用代码`dispatch_async(dispatch_get_main_queue(), block())`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-10T23:23:35.323

当您从 NSTableView 中删除项目时，您还应该更新您的 mutableSet 变量。当你从 mutableSet 中移除项目时，你需要告诉 NSArrayController 更新。去做这个

```
[self willchangeValueForKey:@"mutableSet"]; //your mutableset variable Name
[self.myTable removeRowsAtIndexes:[NSIndexSet indexSetWithIndex:selectedRow] withAnimation:NSTableViewAnimationSlideUp];
[mutableSet removeObject:item];
[self didchangeValueForKey:@"mutableSet"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-17T14:56:54.013

Big Sur 有一些更新。要获得流畅的动画，必须使用`NSAnimationContext`. 没有它运行`NSTableView`将重新加载其所有数据。

```
- (IBAction)delete:(nullable id)sender
{
    NSIndexSet *indexSet = [self.tableView indexesToProcessForContextMenu];
    [NSAnimationContext runAnimationGroup:^(NSAnimationContext * _Nonnull context) {
        context.allowsImplicitAnimation = YES;
        [self.tableView removeRowsAtIndexes:indexSet withAnimation:NSTableViewAnimationEffectFade | NSTableViewAnimationSlideUp];
    } completionHandler:^{
        [self.resultsArrayController removeObjectsAtArrangedObjectIndexes:indexSet];
    }];

    //CODE THAT CAUSES TABLE RELOAD ON BIG SUR
    //[self.tableView removeRowsAtIndexes:indexSet withAnimation:NSTableViewAnimationEffectFade | NSTableViewAnimationSlideUp];
    //[self.resultsArrayController removeObjectsAtArrangedObjectIndexes:indexSet];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-19T20:50:22.257

发现自己处于同样的境地：想尽可能多地使用绑定（尽量减少胶水代码的数量），并且仍然能够添加特定于我的应用程序的小块逻辑。

我有一个 NSTableView，它在其每一行上都显示一个删除按钮。删除按钮连接到我的 NSViewController 子类上的 IBAction。该表已正确绑定到 NSArrayController（通过 IB 在我的 Storyboard 中完成）。我还想要一个关于行删除的动画。

我正在使用 swift（但我认为将其转换为objective-c 应该非常简单）。我让它与绑定一起工作的唯一方法是使用计时器来延迟从 NSArrayController 中删除对象（使用下面的半秒延迟 - 更改它以满足您的需要）：

```
import Cocoa

class ProjectsController: NSViewController {

    @IBOutlet var arrayController: NSArrayController!
    @IBOutlet weak var tableView: NSTableView!

    @IBAction func deleteRow( object: AnyObject ) {
        let row = tableView.rowForView( object as! NSView )
        if ( row > -1 ) {
            let indexSet = NSIndexSet( index:row )
            tableView.removeRowsAtIndexes( indexSet, withAnimation: NSTableViewAnimationOptions.EffectFade )
            NSTimer.scheduledTimerWithTimeInterval( 0.5, target: self, selector: "rowDeleted:", userInfo: row, repeats: false )
        }
    }

    func rowDeleted( timer:NSTimer ) {
        let row = timer.userInfo as! Int
        arrayController.removeObjectAtArrangedObjectIndex( row )
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-03T12:10:10.870

从评论中对您的问题的讨论看来，没有一个简单的“绑定”适当的答案。因此，作为一种解决方法，您不能在开始动画后立即发出简单的“performSelector:withObject:afterDelay”命令吗？显然，延迟时间将近似于动画记录的方式，并且在选择器中是您从 NSMutableSet 中删除对象的位置。

# xcode - 在 Mac App 中显示图像

> ID：13541614
> 
> 赞同：0
> 
> 时间：2012-11-24T13:22:36.687
> 
> 标签：xcode, image, macos, interface-builder

Interface Builder (XCode 4) 中是否有可以显示图像的控件？我想在运行时在该控件中显示预览缩略图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T14:41:04.247

菲利普（其答案现已被删除）采用了正确的方法。听起来您正在寻找的是一个很好的图像（实际的类名是 NSImageView）。

现在，如果你想要一个带有图像的实际控件（例如按钮或其他东西），那就有点不同了。通过 Interface Builder 放入某些 UI 的 NSButton 可以拍摄图像，但您需要将按钮缩放为适合缩小图像的大小并分配图像，您必须通过代码以编程方式进行（即设置按钮到插座，然后以这种方式设置图像）。

# git - 如何删除 .gitignore 中列出但仍在存储库中的文件？

> ID：13541615
> 
> 赞同：504
> 
> 时间：2012-11-24T13:22:40.197
> 
> 标签：git, ignore, gitignore

我的存储库中有一些文件应该被忽略，我将它们添加到 .gitignore 但是，当然，它们并没有从我的存储库中删除。

所以我的问题是，是否有一个使用 filter-branch 的神奇命令或脚本可以重写我的历史记录并轻松删除所有这些文件？或者只是一个将创建将删除它们的提交的命令？

* * *

## 回答 #1

> 赞同：635
> 
> 时间：2012-11-24T13:34:35.997

您可以手动将它们从存储库中删除：

```
git rm --cached file1 file2 dir/file3 
```

或者，如果您有很多文件：

```
git rm --cached `git ls-files -i -c --exclude-from=.gitignore` 
```

但这似乎不适用于 Windows 上的 Git Bash。它会产生一条错误消息。以下效果更好：

```
git ls-files -i -c --exclude-from=.gitignore | xargs git rm --cached 
```

在 Windows 上的 PowerShell 中，这效果更好（处理路径和文件名中的空格）：

```
git ls-files -i -c --exclude-from=.gitignore | %{git rm --cached $_} 
```

关于在没有这些文件的情况下重写整个历史，我非常怀疑是否有一种*自动*的方法可以做到这一点。
而且我们都知道重写历史是不好的，不是吗？:)

* * *

## 回答 #2

> 赞同：496
> 
> 时间：2015-12-23T11:58:30.537

无论操作系统如何，一种更简单的方法是

```
git rm -r --cached .
git add .
git commit -m "Drop files from .gitignore" 
```

您基本上删除并重新添加所有文件，但`git add`会忽略`.gitignore`.

使用该`--cached`选项会将文件保留在文件系统中，因此您不会从磁盘中删除文件。

注意：有些人在评论中指出您将丢失所有文件的历史记录。我在 MacOS 上使用 git 2.27.0 对此进行了测试，但事实*并非*如此。如果您想检查正在发生的事情，请`git diff HEAD~1`在推送您的提交之前检查您的。

* * *

## 回答 #3

> 赞同：186
> 
> 时间：2016-04-12T12:45:48.387

由于**.gitignore**中的文件没有被跟踪，您可以使用**git clean**命令递归删除不受版本控制的文件。

用于`git clean -xdn`执行试运行并查看将删除的内容。
然后`git clean -xdf`用来执行它。

基本上，`git clean -h`或`man git-clean`（在 unix 中）会给你帮助。

请注意，此命令还将删除不在暂存区域中的**新文件。**

希望能帮助到你。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-09-29T17:54:16.647

通过使用 sed 操作 .gitignore 语句的输出，我做了一个非常简单的解决方案：

`cat .gitignore | sed '/^#.*/ d' | sed '/^\s*$/ d' | sed 's/^/git rm -r /' | bash`

解释：

1.  打印 .gitignore 文件
2.  从印刷品中删除所有评论
3.  删除所有空行
4.  将 'git rm -r' 添加到行首
5.  执行每一行。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-05-23T21:07:36.420

" [`git clean`](https://github.com/git/git/blob/33be431c0c7284c1adf0fe49f7838dbc8aee6ea9/Documentation/git-clean.txt)" ^(( [man](https://git-scm.com/docs/git-clean) ))和^( ^([man](https://git-scm.com/docs/git-ls-files#Documentation/git-ls-files.txt--i)) ^)在处理或显示被忽略目录中的被忽略路径时感到困惑，这已在 Git 2.32（2021 年第二季度）中得到纠正。[`git ls-files -i`](https://github.com/git/git/blob/33be431c0c7284c1adf0fe49f7838dbc8aee6ea9/Documentation/git-ls-files.txt#L51)

这意味着[接受的答案](https://stackoverflow.com/a/13541721/6309)的 2021 版本将是：

```
git ls-files -i -c --exclude-from=.gitignore | xargs git rm --cached  
                ^^ 
```

参见[Elijah Newren ( ) 的提交](https://github.com/newren)[b548f0f](https://github.com/git/git/commit/b548f0f1568f6b01e55ca69c24d3cb19489f92aa)、提交[dd55fc0](https://github.com/git/git/commit/dd55fc0df15c338a8dbec6dec6ca6b58edc8acef)、[提交 aa6e1b2](https://github.com/git/git/commit/aa6e1b21e5de8fae7121b8c6543e1482144c1ed3)、[提交 a97c7a8](https://github.com/git/git/commit/a97c7a8bc4f2068b2e8c23ce8d17f7db8333ded0)、[提交 2e4e43a](https://github.com/git/git/commit/2e4e43a6910393d681d095f515d41232c2372966)、[提交 b338e9f](https://github.com/git/git/commit/b338e9f668737e08201c990450b8c3d744f63162)、[提交 7fe1ffd](https://github.com/git/git/commit/7fe1ffdafa56b8453a47a40b866d029f24a56d76)、[提交 7f9dd87](https://github.com/git/git/commit/7f9dd87922c9065c8adcea1469c3caf3b3af2afa)（2021 年 5 月 12 日[）](https://github.com/newren)。 请参阅[Derrick Stolee ( ) 的](https://github.com/derrickstolee)[提交 4e689d8](https://github.com/git/git/commit/4e689d81718eb6e939cace317ea3e33cb994dcbb)（2021 年 5 月 12 日[）](https://github.com/derrickstolee)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 33be431](https://github.com/git/git/commit/33be431c0c7284c1adf0fe49f7838dbc8aee6ea9))^(中，2021 年 5 月 20 日）)[`newren`](https://github.com/newren)
[`derrickstolee`](https://github.com/derrickstolee)
^([`gitster`](https://github.com/gitster))

> ## [`ls-files`](https://github.com/git/git/commit/b338e9f668737e08201c990450b8c3d744f63162): 除非指定了 -o 或 -c，否则 -i 会出错
> 
> ^(签字人：以利亚·纽伦)

> [`ls-files --ignored`](https://github.com/git/git/blob/b338e9f668737e08201c990450b8c3d744f63162/Documentation/git-ls-files.txt#L52)^(( [man](https://git-scm.com/docs/git-ls-files#Documentation/git-ls-files.txt---ignored) ))可以与`--others`or一起使用`--cached`。
> 
> 在迷惑了一段时间并深入研究代码之后，我认为它`ls-files -i`只是坏了，没有打印任何东西，当我终于意识到`-i`可以用来`--cached`查找跟踪的忽略时，我准备好提交一个不错的补丁。
> 
> 虽然这是我的错误，仔细阅读文档可能会更清楚这一点，但我怀疑这也是其他人可能犯的错误。
> 事实上，在我们的测试套件中的两种用途中，我相信两者中的一种确实犯了这个错误。
> 在 t1306.13 中，没有跟踪文件，并且在该测试和之前的测试中建立和使用的所有排除项都必须与未跟踪文件有关。
> 然而，由于他们正在寻找一个空的结果，这个错误并没有被注意到，因为他们的错误命令也恰好给出了一个空的答案。
> 
> `-i`将大部分时间与 一起使用`-o`，这表明我们可以在没有 a或的情况下进行`-i`暗示，但这将是一个向后不兼容的中断。 相反，让我们只标记没有 a或作为错误，并更新两个相关的测试用例以指定它们的意图。`-o``-o``-c`
> `-i``-o``-c`

这意味着如果没有`-c`，您将获得（从 Git 2.32 开始，2021 年第二季度）：

```
fatal: ls-files -i must be used with either -o or -c 
```

注意：这仍在进行中，因为它已[在 Git 2.32-rc2 中恢复，](https://github.com/git/git/commit/2c9f1bfdb47acde21052bb33ff083347cbcb574d)但已通过[Junio C Hamano (](https://github.com/gitster) [)的](https://github.com/gitster)[提交 2c9f1bf](https://github.com/git/git/commit/2c9f1bfdb47acde21052bb33ff083347cbcb574d)和[提交 1df046b](https://github.com/git/git/commit/1df046bcff6085f3800088c51e344594f822df57)（2021 年 5 月 27 日）修复。 请参阅[Elijah Newren ( ) 的](https://github.com/newren)[提交 906fc55](https://github.com/git/git/commit/906fc557b70b2b2995785c9b37e212d2f86b469e)（2021 年 5 月 27 日[）](https://github.com/newren)。 请参阅[Derrick Stolee ( ) 的](https://github.com/derrickstolee)[提交 eef8148](https://github.com/git/git/commit/eef814828f175290ca1fcd17ad74faff95346c85)（2021 年 5 月 27 日[）](https://github.com/derrickstolee)。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 329d63e](https://github.com/git/git/commit/329d63e7be044524d29dcb43e8ed52bc1f3b9241))^(中，2021 年 5 月 28 日）)[`gitster`](https://github.com/gitster)
[`newren`](https://github.com/newren)
[`derrickstolee`](https://github.com/derrickstolee)
^([`gitster`](https://github.com/gitster))

> ## [`dir`](https://github.com/git/git/commit/906fc557b70b2b2995785c9b37e212d2f86b469e): 介绍`readdir_skip_dot_and_dotdot()`助手
> 
> ^(签字人：以利亚·纽伦)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-11-23T10:03:03.113

如果您真的想修剪`.gitignore`d 文件的历史记录，请首先保存`.gitignore`在 repo 之外，例如 as `/tmp/.gitignore`，然后运行

```
git filter-branch --force --index-filter \
    "git ls-files -i -X /tmp/.gitignore | xargs -r git rm --cached --ignore-unmatch -rf" \
    --prune-empty --tag-name-filter cat -- --all 
```

笔记：

*   `git filter-branch --index-filter`在`.git`我认为的目录中运行，即如果你想使用相对路径，你必须先添加`../`一个。显然，由于某种原因，您不能使用`../.gitignore`实际`.gitignore`文件，它会产生“致命：不能使用 ../.gitignore 作为排除文件”（可能在`git filter-branch --index-filter`工作目录（认为）为空期间？）
*   我希望使用类似的东西`git ls-files -iX <(git show $(git hash-object -w .gitignore))`来避免在`.gitignore`其他地方复制，但仅此一项就已经返回一个空字符串（而`cat <(git show $(git hash-object -w .gitignore))`确实`.gitignore`按预期打印了 's 的内容），所以我不能使用`<(git show $GITIGNORE_HASH)`in `git filter-branch`...
*   如果您实际上只想`.gitignore`-clean 特定分支，`--all`请在最后一行替换为它的名称。那时可能无法正常工作，`--tag-name-filter cat`即您可能无法直接正确传输单个分支的标签

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-26T15:21:15.863

在 linux 中，您可以使用以下命令：

例如我想删除`*.py~`所以我的命令应该是 ==>

`find . -name "*.py~" -exec rm -f {} \;`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-24T06:43:46.347

该解决方案添加了回车符（我是 WSL 用户，所以这很重要）和括号转义（有时这对 LaTeX 用户很重要，例如`*.synctex(busy)`）。

* * *

受[斯科特解决方案的](https://stackoverflow.com/a/46494462/9564132)启发：

```
cat .gitignore | sed "s/\r//" | sed -r "/^(#.*|\s*)$/d" | sed -r "s/([()])/\\\\\1/g" | sed "s/^/git rm -r /" | bash 
```

1.  删除：回车 ( `s/\r//`)。
2.  删除包含以下内容的行：注释 ( `/^#.*$/`)、空行组 ( `/^\s*$/`、匹配空格或空行)。注意管道`|`字符，这是标准的正则表达式，并且需要`-r`（尽管我相信`-E`也可以）。
3.  替换：括号`/([()])/`及其转义版本`\\\1`，`\1`匹配组，在这种情况下，它表示`[()]`, or `(`or `)`, 任何匹配的内容。注意`g`标志，这是为了匹配（并替换）*所有*括号。可以重写，就`"s/(\(|\))/\\\\\1/g"`好像你喜欢那样。
4.  前置`git rm -r`

更换的样子`s/$old/$new/$flags`。删除看起来像`/$old/d`。前置是替换`/^/`. 你可以通过替换来追加`/$/`。当然，有些字符会被转义，因为据我所知，你不能在 bash 中制作原始字符串。最后，这行可以压缩，但为了可读性，我选择将其扩展。

* * *

我看到有人质疑（在斯科特的解决方案中）这`sed`是直截了当的。我喜欢将这种方法视为最基本和最猴子的方法，这很好，因为如果您需要这种方法的变体，您可以当场制作。如果有的话，这是练习正则表达式的好借口。

* * *

## 回答 #9

> 赞同：-5
> 
> 时间：2012-11-24T13:31:16.170

将 .gitignore 模式添加到 .gitignore 后，git 将忽略匹配的文件。

但是存储库中已经存在的文件仍然存在。

用于`git rm files_ignored; git commit -m 'rm no use files'`删除被忽略的文件。

# c# - MEF 中的参数化策略模式

> ID：13541618
> 
> 赞同：1
> 
> 时间：2012-11-24T13:23:05.940
> 
> 标签：c#, design-patterns, mef, strategy-pattern

我有三种类型的算法，每种都采用不同的参数类型进行处理。

```
class AlgorithmA
{
    Execute(int param);
}

class AlgorithmB
{
    Execute(string param);
}

class AlgorithmC
{
    Execute();
} 
```

为了使用 MEF 的策略模式，我做了以下事情：

```
interface IAlgorithm
{
    int IntegerParam{get;set;}
    string StringParam{get;set;}
    string AlgorithmName {get;}
    void Execute();
} 
```

在客户端：

```
[ImportMany]
IEnumerable<IAlgorithm> Algorithms { get; set; }

IAlgorithm algorithm=Algorithms.Single(a => a.AlgorithmName == name);
algorithm.IntegerParam=integerParam;
algorithm.StringParam=stringParam;
algorithm.Execute(); 
```

**现在的问题是**，提供必要的参数作为属性显然是错误的，但另一方面，如果我将它们作为构造函数参数提供，它将违背模式的目的。
你会怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:38:35.977

策略模式应该将相同的参数传递给它的策略，而不管实际选择的是什么；然后，每个策略都应该决定如何处理这些参数。

如果您需要传递两个参数，您可能应该定义如下内容：

```
interface IAlgorithm
{
    string AlgorithmName {get;}
    void Execute(string paramA, int paramB);
}

algorithm.Execute(stringParam, intParam); 
```

那么如果某个策略只需要使用第一个参数，那么它就简单地使用它而忽略另一个参数。

我认为你缺少的是，如果你尝试将不同的参数传递给不同的策略，那么你几乎放弃了这里的策略，因为你已经知道了一些关于正在使用的策略，它是如何在内部工作的以及它是什么需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T23:45:05.053

这可能是您问题的解决方案：[http ://www.hillside.net/plop/2010/papers/sobajic.pdf](http://www.hillside.net/plop/2010/papers/sobajic.pdf)

# android - 布局背景缩放，使用xml文件作为背景

> ID：13541621
> 
> 赞同：1
> 
> 时间：2012-11-24T13:23:14.057
> 
> 标签：android, android-layout

我正在开发的应用程序有一个背景图像，我希望它可以缩放到不同的设备尺寸，最重要的是它应该适合宽度。背景逐渐变为黑色，所以我可以在主视图上拥有一个永久的黑色背景，看起来还不错。

我制作了一个 background.xml 文件，目前我在 res 文件夹中只有 800x1280 px 图形的 xlarge 背景图像。当我使用三星 Galaxy S3 的设置在 AVD 上运行我的应用程序时，背景宽度不会填满整个屏幕，但其余控件可以很好地缩放到屏幕上。

这是我观点的开始：

```
<ScrollView android:id="@+id/MainScrollView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:background="#000000" 
    android:orientation="vertical"
    android:fillViewport="true">

<LinearLayout
    android:id="@+id/lineLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:background="@drawable/background"
    android:orientation="vertical"> 
```

我的 background.xml 看起来像这样：

```
<bitmap xmlns:android="http://schemas.android.com/apk/res/android" 
android:src="@drawable/mainappbg" 
android:gravity="top|left" android:filter="true" android:dither="true" /> 
```

希望有人可以提供帮助。

谢谢

我已经尝试过了，插入了一个图像作为背景，但只有 TasksButton 和 ServiceRapportButton 可见，其余内容消失。

```
<ScrollView android:id="@+id/MainScrollView"
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
xmlns:android="http://schemas.android.com/apk/res/android" 
android:background="#000000" 
android:orientation="vertical"
android:fillViewport="true">

<RelativeLayout 
   android:layout_width="fill_parent" 
   android:layout_height="fill_parent">
  <ImageView 
      android:id="@+id/imageView1" 
      android:layout_width="fill_parent" 
      android:layout_height="fill_parent" 
      android:src="@drawable/mainappbg"/>

<LinearLayout
android:id="@+id/lineLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<RelativeLayout
    android:id="@+id/RelativeLayout1"
    android:layout_width="fill_parent"
     android:layout_height="85dp">
   <Button android:id="@+id/TasksButton" android:layout_width="wrap_content"      android:layout_height="wrap_content" android:layout_alignParentRight="true" android:layout_alignParentTop="true" android:layout_marginRight="5dp" android:layout_marginTop="5dp" android:background="@drawable/opgaver" android:onClick="TasksClickHandler" android:textSize="12sp"/>
   <Button android:id="@+id/ServiceRapportButton" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_alignParentRight="true" android:layout_alignParentTop="true" android:layout_marginRight="15dp" android:layout_marginTop="40dp" android:background="@drawable/rapport" android:onClick="ServiceRapportClickHandler" android:textSize="12sp"/>       
</RelativeLayout>
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/tableLayout1">
      <Button android:id="@+id/LineButton" android:layout_weight="1" android:layout_width="0dp" android:layout_height="match_parent" android:background="@drawable/lines" android:onClick="LineClickHandler" android:textSize="12dp"/>        
      <Button android:id="@+id/ServiceButton" android:layout_weight="1" android:layout_width="0dp" android:layout_height="match_parent" android:background="@drawable/service" android:textSize="12dp" android:onClick="ServiceClickHandler"></Button>
      <Button android:id="@+id/NavigationButton" android:layout_weight="1" android:layout_width="0dp" android:layout_height="match_parent" android:background="@drawable/navigate" android:textSize="12dp" android:onClick="NavigateClickHandler"></Button>         
</LinearLayout> 
```

编辑，添加截图，我想在这些控件后面放置一个背景： ![应用程序屏幕截图](../Images/c21be0d8e53472359c67c0b4774213ca.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T14:10:00.307

`LinearLayout`如果( )的唯一目的`@id/lineLayout1`是充当 bg 容器，则将其替换为`ImageView`set [android:scaleType](http://developer.android.com/reference/android/widget/ImageView.html#attr_android%3ascaleType)以匹配您想要实现的缩放结果。

**编辑**

将其包裹在 RelativeLayout 布局中，并将 ImageView 作为 BG 容器：

```
<ScrollView
   xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/MainScrollView"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent" 
   android:background="#000000" 
   android:orientation="vertical"
   android:fillViewport="true">

   <RelativeLayout 
       android:layout_width="fill_parent" 
       android:layout_height="fill_parent">
      <ImageView 
          android:id="@+id/imageView1" 
          android:layout_width="fill_parent" 
          android:layout_height="fill_parent" 
          android:src="@drawable/beta_bg_drawable"/>

        <LinearLayout 
            android:layout_width="fill_parent" 
            android:layout_height="fill_parent" 
            android:background="#5500ff00" 
            android:orientation="vertical">
        </LinearLayout>

   </RelativeLayout>

</ScrollView> 
```

# php - 使用 PHP 和 MySQL 列出记录

> ID：13541626
> 
> 赞同：-1
> 
> 时间：2012-11-24T13:23:39.370
> 
> 标签：php, mysql, record

我创建了一个表格（笔记本），用于保存用户的文本。表是这样的：

```
+------+------------+-------+------+--------+------------------------+
|  id  |  Username  | title | html | public |  create_date           |
|--------------------------------------------------------------------|
|   1  | sorge13248 | Test  | ...  |  n     |2012-11-24 9:00:00      |
+------+------------+-------+------+--------+------------------------+ 
```

id = INT(25) A_I NOT NULL
Username = VARCHAR(65) NOT NULL
title = VARCHAR(26) NOT NULL
html = LONGTEXT NOT NULL
public = VARCHAR(11) NOT NULL
create_date = TIMESTAMP CURRENT_TIMESTAMP NOT NULL

所以，我试过了使用此代码为用户列出所有笔记本的记录：

```
$link = mysql_connect("localhost", "mysql_user", "password");
mysql_select_db("notebook", $link);

$result = mysql_query("SELECT * FROM notebook WHERE Username = '"$username."'", $link);

if(0 == mysql_num_rows($result)) {
    echo 'No notebook was created for this user';
}
else { 
    while(row = mysql_fetch_array($result)) {
       // do whatever you want with the data here
    }
} 
```

代码取自：[How to list rows for a query or display 'no records' using a single query](https://stackoverflow.com/questions/2590680/how-to-list-records-for-a-query-and-to-display-no-records-when-no-rows-returne)，我已经对其进行了编辑，以便与我的表一起使用。

现在，我很困惑，我必须在“//对这里的数据做任何你想做的事情”字符串中写什么来列出记录？

**编辑：**现在，我有这段代码，但 Chrome 显示“HTTP 500 错误，内部服务器错误”：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Notebook</title>
</head>

<body>
<h1>Notebook</h1><br/>
<?=
$link = mysql_connect("localhost", "database_username", "password");
mysql_select_db("database_name", $link);

$result = mysql_query("SELECT * FROM notebook", $link);

// If if result set contains rows
if(0 == mysql_num_rows($result)) {
    echo 'No notebook was created for this user';
}
else { 
    while(row = mysql_fetch_array($result)) {
   printf( '%d: &quot;%s&quot; by %s<br />', $row['id'], 
                 htmlspecialchars($row['title']), 
                 htmlspecialchars($row['Username']) );
}
}
?>
</body>

</html> 
```

错误在哪里？正确提供了 MySQL 凭据...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:26:31.057

示例：您可以使用 echo`$row['title']`打印用户的注释标题。

用于`var_dump($row)`查看更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:29:19.067

使用您想要显示的任何内容形成 HTML，因此您的`while`循环看起来像，即：

```
while(row = mysql_fetch_array($result)) {
   printf( '%d: &quot;%s&quot; by %s<br />', $row['id'], 
                 htmlspecialchars($row['title']), 
                 htmlspecialchars($row['Username']) );
} 
```

这将列出所有项目，例如

```
1: "Test" by sorge13248 
```

PS：您应该始终使用相同的命名约定以避免出现问题。在您的数据库中，所有列都是小写的，除了`Username`)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T13:40:58.610

首先，`mysql_`不鼓励使用函数，因为它将来会被弃用。考虑更改您的代码以使用[MySQLi](http://www.php.net/manual/en/book.mysqli.php)或[PDO](http://www.php.net/manual/en/ref.pdo-mysql.php) API。

您可以在 php 手册文章中阅读更多信息：[选择 API](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)

如php手册所述[mysql_fetch_array](http://php.net/manual/en/function.mysql-fetch-array.php)函数：

> 以关联数组、数值数组或两者的形式获取结果行

然后移动到下一行，直到没有任何其他行有结果，此时函数将返回 false 并且您的循环将结束。

在您的特定情况下， $row 变量将返回以下结果：

```
$row['id'] = 1;
$row['Username']= "sorge13248"; 
$row['title']= "Test"; 
$row['html']="... &";
$row['public']="n';
$row['create_date']="2012-11-24 9:00:00"; 
```

因此，`do whatever you want`本教程意味着您可以通过使用上述方法访问数据库来返回结果。例如，假设您有兴趣回显某个用户的创建日期，您可以执行以下操作：

```
echo "<p>User: ".$row['Username']." was created in: ". $row['create_date']</p>"; 
```

Wich 会将以下内容输出到脚本正在生成的页面：

```
<p>User: sorge1348 was created in: 2012-11-24 9:00:00</p> 
```

我希望它有所帮助，干杯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-15T15:10:53.320

我在使用 mysql_fetch_array 时遇到了麻烦，因为它在 PHP 7.0.0 中被删除了。

对我有用的是：

```
$sql = "SELECT * FROM notebook;";
if($result = mysqli_query($conn, $sql))
{ 

    while($row = $result->fetch_object())
    {
       echo $row->username . "<br>";    
    } 
    $result -> free_result();
} 
```

# svn - webSVN 不要求使用存储库进行身份验证

> ID：13541629
> 
> 赞同：0
> 
> 时间：2012-11-24T13:24:04.203
> 
> 标签：svn, websvn

我只是在我的本地网络上设置了 SVN 服务器。它按预期工作正常，但是为了更方便地使用 SVN，我刚刚配置了 webSVN。但是在配置 webSVN 的`config.php`文件之后，它向我显示了所有存储库，并且它没有要求我提供任何身份验证，例如用户名和密码。我`/etc/httpd/conf.d/subversion.conf`有的是

```
<Location /mysvn>
DAV svn
      SVNParentPath /var/www/html/svn
         AuthzSVNAccessFile /etc/svn-acl-conf
         AuthType Basic
         AuthName "Subversion repos"
         AuthUserFile /etc/svn-auth-conf
         Require valid-user
         SVNListParentPath on
</Location> 
```

我刚刚在我的 webvpn`config.php`文件中取消了对这一行的注释

```
 $config->parentPath('/var/www/html/svn'); 
```

我正在使用单个用户访问控制文件来管理不同存储库的权限。

如果我在我的 config.php 文件中添加以下行，那么我得到的错误是“您没有查看此内容的必要权限。”

```
$config->useAuthenticationFile('/etc/svn-acl-conf'); // Global access file 
```

我该如何解决这个权限问题，我需要做什么配置来解决这个问题？给我一些提示或想法来解决我的问题。

感谢和问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:04:40.820

尝试以下操作：

注释行 useAuthenticationFile 并取消注释下一行：

```
$config->addRepository('My Repo', 'http://x.x.x.x/svn/repository', NULL, 'username', 'password'); 
```

用户名和密码是 svn 身份验证。

并且密码通过 ht-access 保护主目录。

# javascript - 在 IE8+ 中访问对象中的唯一属性

> ID：13541632
> 
> 赞同：2
> 
> 时间：2012-11-24T13:24:38.170
> 
> 标签：javascript, internet-explorer-8

我有一个从 解析的对象，`JSON`它总是只包含一个属性，但是这个属性的名称（即键名）会随每个`JSON`msg 发生变化。

在 IE9+ 和其他现代浏览器中，我可以使用：

```
value = msg[Object.keys(msg)[0]]; 
```

访问此属性的值。但是，IE8 不支持`keys`，那么什么是完全兼容的访问值的方式呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T13:26:08.383

你可以定义这样一个函数：

```
function getVal(obj) {
  for (var key in obj) return obj[key];
} 
```

然后做

```
value = getVal(msg); 
```

# android - 重置后无法选择先前选择的 RadioButton

> ID：13541634
> 
> 赞同：2
> 
> 时间：2012-11-24T13:24:50.887
> 
> 标签：android, radio-button, unchecked

我有一组三个 RadioGroups，每个 RadioGroups 由三个 RadioButtons 组成。还有一个重置按钮，将所有组中的所有 RadioButtons 设置为 false (setChecked(false))。

重置工作正常（所有 RadioButtons 都未选中），除了重置后，在每个 RadioGroup 中，只有在单击重置按钮时未选中的两个按钮可以检查。只有在这样做之后，才能像以前一样再次检查组中的所有三个按钮。

我尝试在重置期间添加 setFocusable(true) 和 setClickable(true) 但这并没有什么不同。那么还有什么焦点或可点击性可能导致此问题以及如何解决？

我的目标是 Android API 7。

这是完整的 MainActivity.java：

```
 package nl.ch.simplescore;

import nl.ch.simplescore.R;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.RadioButton;
import android.widget.TextView;

public class MainActivity extends Activity {

    Button scoretoevoegenButton; 
    RadioButton radio11RadioButton;
    RadioButton radio12RadioButton;
    RadioButton radio13RadioButton;
    RadioButton radio21RadioButton;
    RadioButton radio22RadioButton;
    RadioButton radio23RadioButton;
    RadioButton radio31RadioButton;
    RadioButton radio32RadioButton;
    RadioButton radio33RadioButton;

    TextView textView15;
    TextView textView16;
    TextView textView17;
    TextView textView18;
    TextView textView19;
    TextView textView20;
    TextView textView21;
    TextView textView22;
    TextView textView23;
    TextView textView24;
    TextView textView25;
    TextView textView26;

    int speler1score = 0;
    int speler2score = 0;
    int speler3score = 0;

    int speler1score123 = 0;
    int speler1score12 = 0;
    int speler1score13 = 0;
    int speler1score23 = 0;
    int speler2score123 = 0;
    int speler2score12 = 0;
    int speler2score13 = 0;
    int speler2score23 = 0;
    int speler3score123 = 0;
    int speler3score12 = 0;
    int speler3score13 = 0;
    int speler3score23 = 0;

    int speler1sumscore123 = 0;
    int speler1sumscore12 = 0;
    int speler1sumscore13 = 0;
    int speler1sumscore23 = 0;
    int speler2sumscore123 = 0;
    int speler2sumscore12 = 0;
    int speler2sumscore13 = 0;
    int speler2sumscore23 = 0;
    int speler3sumscore123 = 0;
    int speler3sumscore12 = 0;
    int speler3sumscore13 = 0;
    int speler3sumscore23 = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        scoretoevoegenButton = (Button) this.findViewById(R.id.button1);
        radio11RadioButton = (RadioButton) this.findViewById(R.id.radio11);
        radio12RadioButton = (RadioButton) this.findViewById(R.id.radio12);
        radio13RadioButton = (RadioButton) this.findViewById(R.id.radio13);
        radio21RadioButton = (RadioButton) this.findViewById(R.id.radio21);
        radio22RadioButton = (RadioButton) this.findViewById(R.id.radio22);
        radio23RadioButton = (RadioButton) this.findViewById(R.id.radio23);
        radio31RadioButton = (RadioButton) this.findViewById(R.id.radio31);
        radio32RadioButton = (RadioButton) this.findViewById(R.id.radio32);
        radio33RadioButton = (RadioButton) this.findViewById(R.id.radio33);

        textView15 = (TextView) this.findViewById(R.id.textView15);
        textView16 = (TextView) this.findViewById(R.id.textView16);
        textView17 = (TextView) this.findViewById(R.id.textView17);
        textView18 = (TextView) this.findViewById(R.id.textView18);
        textView19 = (TextView) this.findViewById(R.id.textView19);
        textView20 = (TextView) this.findViewById(R.id.textView20);
        textView21 = (TextView) this.findViewById(R.id.textView21);
        textView22 = (TextView) this.findViewById(R.id.textView22);
        textView23 = (TextView) this.findViewById(R.id.textView23);
        textView24 = (TextView) this.findViewById(R.id.textView24);
        textView25 = (TextView) this.findViewById(R.id.textView25);
        textView26 = (TextView) this.findViewById(R.id.textView26);

            }

    public void radio11ClickHandler(View v) {
        speler1score = 3;
    }

    public void radio12ClickHandler(View v) {
        speler1score = 2;
    }

    public void radio13ClickHandler(View v) {
        speler1score = 1;
    }

    public void radio21ClickHandler(View v) {
        speler2score = 3;
    }

    public void radio22ClickHandler(View v) {
        speler2score = 2;
    }

    public void radio23ClickHandler(View v) {
        speler2score = 1;
    }

    public void radio31ClickHandler(View v) {
        speler3score = 3;
    }

    public void radio32ClickHandler(View v) {
        speler3score = 2;
    }

    public void radio33ClickHandler(View v) {
        speler3score = 1;
    }

    public void scoretoevoegenClickHandler(View v) {
        scoreTonen();
    }

    public void resetClickHandler(View v) {
        speler1score = 0;
        speler2score = 0;
        speler3score = 0;

        radio11RadioButton.setChecked(false);
        radio12RadioButton.setChecked(false);
        radio13RadioButton.setChecked(false);
        radio21RadioButton.setChecked(false);
        radio22RadioButton.setChecked(false);
        radio23RadioButton.setChecked(false);
        radio31RadioButton.setChecked(false);
        radio32RadioButton.setChecked(false);
        radio33RadioButton.setChecked(false);

        textView15.setText(null);
        textView16.setText(null);
        textView17.setText(null);
        textView18.setText(null);
        textView19.setText(null);
        textView20.setText(null);
        textView21.setText(null);
        textView22.setText(null);
        textView23.setText(null);
        textView24.setText(null);
        textView25.setText(null);
        textView26.setText(null);

    }

    public void scoreTonen() {
        int kolom; 

        kolom = 0;
        if (speler1score!=0) {
            if (speler2score!=0 && speler3score!=0) {
                kolom = 123;
            }
            if (speler2score!=0 && speler3score==0) {
                kolom = 12;
            }
            if (speler2score==0 && speler3score!=0) {
                kolom = 13;
            }
            switch (kolom) {
            case 123: 
                textView15.setText(Integer.toString(speler1score));
                break;
            case 12:    
                textView16.setText(Integer.toString(speler1score));
                break;
            case 13:
                textView17.setText(Integer.toString(speler1score));
                break;
            default: // niets doen  
            }
        }

        kolom = 0;
        if (speler2score!=0) {
            if (speler1score!=0 && speler3score!=0) {
                kolom = 123;
            }
            if (speler1score!=0 && speler3score==0) {
                kolom = 12;
            }
            if (speler1score==0 && speler3score!=0) {
                kolom = 23;
            }
            switch (kolom) {
            case 123: 
                textView19.setText(Integer.toString(speler2score));
                break;
            case 12:    
                textView20.setText(Integer.toString(speler2score));
                break;
            case 23:
                textView22.setText(Integer.toString(speler2score));
                break;
            default: // niets doen  
            }
        }

        kolom = 0;
        if (speler3score!=0) {
            if (speler1score!=0 && speler2score!=0) {
                kolom = 123;
            }
            if (speler1score!=0 && speler2score==0) {
                kolom = 13;
            }
            if (speler1score==0 && speler2score!=0) {
                kolom = 23;
            }
            switch (kolom) {
            case 123: 
                textView23.setText(Integer.toString(speler3score));
                break;
            case 13:    
                textView25.setText(Integer.toString(speler3score));
                break;
            case 23:
                textView26.setText(Integer.toString(speler3score));
                break;
            default: // niets doen  
            }
        }
    }

    public void sumScoreTonen() {
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-24T15:55:27.087

在这里找到它：

[清除检查问题后的android单选按钮检查](https://stackoverflow.com/questions/10030495/android-radiobutton-check-after-clearing-check-issue?rq=1)

应该为每个单独的按钮使用 radioGroup.clearCheck() 而不是 radioButton.setChecked(false)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T14:08:32.207

`RadioButton`group 强制执行此规则：任何时候只选择一个选项。您不应取消选中全部或选中多个。`CheckBox`专为此类用途而设计。

# textarea - Redactor.js maxlength textarea 模式

> ID：13541636
> 
> 赞同：4
> 
> 时间：2012-11-24T13:25:06.373
> 
> 标签：textarea, javascript, maxlength

如何为 Redactor 区域指定“最大长度”以防止用户介绍许多字符？

# c# - 基类和派生类

> ID：13541639
> 
> 赞同：1
> 
> 时间：2012-11-24T13:25:36.747
> 
> 标签：c#

如果我有将处理所有常见属性的 Person 类

```
Person.cs

public class Person
{
   public FirstAndLastName {get; set;}
   public Health Health {get; set;}
   public Personality Personality {get; set;}
} 
```

现在我需要 Player 对象，稍后需要不同类型的球员（soccerPlayer、bballplayer 等）。既然球员是一个人，我可以使用这种方法吗

```
Player.cs
public class Player:Person
{
   public Sport Sport {get; set;}
} 
```

现在我想实现一些基于运动的球员独特的属性，比如：在篮球场上，或者在足球（足球）中截击。你有照片。

```
Basketball.cs
public class Basketball:Player
{
   public int AlleyUpLevel {get; set;}
} 
```

问题：这是创建基类和派生类的正确方法吗，我的篮球运动员是否可以访问 Person 类中定义的所有属性？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T13:30:27.877

这是创建基类和派生类的正确方法。因为您的类`Basketball`继承自`Player`which 继承自`Person`，所以`Basketball`确实可以访问`Person`标记为`public`or的所有内容`protected`。任何被标记的东西`private`都不能被继承类访问。还要记住，在许多构造（例如字段和方法）的情况下，缺少访问修饰符将默认为`private`访问级别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T13:41:22.980

由于您的属性是 all `public`，因此*任何人*，而不仅仅是那些派生自 的人`Person`，都可以访问获取和设置属性的值。

您可以考虑制作 setter`private`或`protected`，如

```
public Personality Personality { get; protected set; } 
```

关键字的`protected`意思是“只能从包含类和从包含类派生的类访问”。另一方面`private`意味着“仅从包含的类/结构访问”。

# svn - 为什么版本控制中的修订号不会一直加 1？

> ID：13541642
> 
> 赞同：7
> 
> 时间：2012-11-24T13:25:42.003
> 
> 标签：svn, version-control

比如我用“svn log”查看修订历史的时候，发现修订号并不是一直一个一个增加。例如，一个修订版的修订版号为“1234”，但其下一个修订版的修订版号为“1256”而不是“1235”。这两个修订之间会发生什么？什么他们的修订号不连续？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-24T13:56:13.813

您在 SVN 存储库中的项目可能不是唯一的。
SVN repo 任何部分的任何修订都会将*全局*修订号加一。
也可以看看：

*   “[如何在颠覆中计算修订号的增量](https://stackoverflow.com/questions/8265214/how-increment-in-revision-number-calculated-in-subversion#comment10173995_8265259)”。
*   "[跨多个项目的 Subversion 修订号](https://stackoverflow.com/questions/15674/subversion-revision-number-across-multiple-projects)"

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T14:22:06.420

如果您从存储库的根目录获取日志，您将看到修订号一一递增。但是，您正在从您的 repo 的子目录中获取日志。这意味着有很多不属于您的子目录的修订。

# c# - 如何自动调整表单的大小以适应控件的大小？

> ID：13541646
> 
> 赞同：0
> 
> 时间：2012-11-24T13:26:25.690
> 
> 标签：c#, winforms, resize, picturebox

假设（为了简单起见）我有一个事件，当被解雇时，调用

```
pictureBox1.Size = new Size(500, pictureBox1.Size.Height); 
```

问题是虽然控件变大了，但主 Form1 不会调整大小......（所以我只看到主窗体内的控件的一部分）（注意：不知道是否重要，但图片框是锚定的)

我尝试使用 AutoSize 和 AutoSizeMode 属性，但它不起作用。你能帮我个忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:31:35.863

您必须首先禁用图片框锚，然后调整表单大小（我想通过更改其大小属性），然后重新启用锚。

或者更好的解决方案是，由于图片框锚定在表单中，那么您只能调整表单的大小，并且期望锚点也会导致图片框的大小调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:30:03.280

您可以使用[Dock](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.dock.aspx)和[Anchor](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.anchor.aspx)属性

# android - android移动View包含RelativeLayout

> ID：13541648
> 
> 赞同：1
> 
> 时间：2012-11-24T13:26:42.823
> 
> 标签：android, view, android-relativelayout

我想创建一个简单的类似拼字游戏的棋盘游戏。我已经使用 RelativeLayout 创建了一个 XML 文件，其中包含我的电路板的所有字段。现在我想要完成的是让这个板子可以移动——这样用户就可以放大、缩小和在屏幕上移动。为了实现这一点，我使用了[HERE](https://stackoverflow.com/questions/9398057/android-move-a-view-on-touch-move-action-move)的提示。我用自己的简单 BoardView 替换了 TextView：

```
public class BoardView extends View {

        public BoardView(Context context) {
            super(context);
            setContentView(R.layout.board);
        }

    } 
```

不幸的是它不起作用......我的董事会没有移动。请帮帮我。也许你对这种游戏有完全不同的方法？我很想听听。

我的 BoardActivity 代码：

```
public class BoardActivity extends Activity implements OnTouchListener {

private int deltaX_;
private int deltaY_;

private ViewGroup root_;
private BoardView view_;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_board);

    root_ = (ViewGroup) findViewById(R.id.rootBoard);

    view_ = new BoardView(this);

    RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(540, 540);
    layoutParams.leftMargin = 50;
    layoutParams.topMargin = 50;
    layoutParams.bottomMargin = -2500;
    layoutParams.rightMargin = -2500;
    view_.setLayoutParams(layoutParams);

    view_.setOnTouchListener(this);
    root_.addView(view_);
}

public boolean onTouch(View v, MotionEvent event) {

        final int X = (int) event.getRawX();
        final int Y = (int) event.getRawY();
        switch (event.getAction() & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN:
            RelativeLayout.LayoutParams lParams = (RelativeLayout.LayoutParams) v.getLayoutParams();
            deltaX_ = X - lParams.leftMargin;
            deltaY_ = Y - lParams.topMargin;
            break;
        case MotionEvent.ACTION_UP:
            break;
        case MotionEvent.ACTION_POINTER_DOWN:
            break;
        case MotionEvent.ACTION_POINTER_UP:
            break;
        case MotionEvent.ACTION_MOVE:
            RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) v.getLayoutParams();
            layoutParams.leftMargin = X - deltaX_;
            layoutParams.topMargin = Y - deltaY_;
            layoutParams.rightMargin = -2500;
            layoutParams.bottomMargin = -2500;
            view_.setLayoutParams(layoutParams);
            break;
        }
        return true;
    }
} 
```

我的 board.xml 布局与[此](http://staticallytyped.wordpress.com/2011/01/26/android-avoiding-custom-views-with-resources/)类似：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
  <ImageView
    android:background="@drawable/special_square"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/square_a1" />
  <ImageView
    android:layout_toRightOf="@id/square_a1"
    android:background="@drawable/normal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/square_a2" />
   ...and so on... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T13:22:53.553

```
 case MotionEvent.ACTION_MOVE:
        RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) v.getLayoutParams();
        layoutParams.leftMargin = X - deltaX_;
        layoutParams.topMargin = Y - deltaY_;
        layoutParams.rightMargin = -2500;
        layoutParams.bottomMargin = -2500;
        //no needs to setLayout again: view_.setLayoutParams(layoutParams);

        //requestLayout is required
        view_.requestLayout(); 
```

# mysql - mysql十进制四舍五入

> ID：13541650
> 
> 赞同：4
> 
> 时间：2012-11-24T13:26:45.217
> 
> 标签：mysql, decimal, truncate, rounding

我是 mysql 新手，需要一些基本的东西。

我需要像这样四舍五入小数：

21,4758 应该是 21,48

0,2250 应该是 0,22

23,0850 应该是 23,08

22,9950 应该是 22,99

我尝试了很多东西，但无法做到。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T13:32:02.650

试试这个：

```
// round the value to two decimal places 
SELECT ROUND(<YOUR_FIELD>, 2) field FROM <YOUR_TABLE>
// use truncate if you don't wan't to round the actual value
SELECT TRUNCATE(<YOUR_FIELD>, 2) field FROM <YOUR_TABLE>
// you can also use round or truncate depending whether the third decimal is > 5
SELECT IF(SUBSTR(<YOUR_FIELD>, 5, 1) > 5, 
   ROUND(<YOUR_FIELD>, 2), 
   TRUNCATE(<YOUR_FIELD>, 2)) field 
FROM <YOUR_TABLE>; 
```

以上不是一个完整的解决方案，但也许它会为您指明正确的方向。

阅读文档[`mysql round()`](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_round)和[`mysql truncate()`](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_truncate)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-26T18:10:11.200

```
DECLARE @old decimal(38, 10)
DECLARE @p decimal(38, 10)
SET @p = 21.4758

SET @p = @p * 100
SET @p = @p - 0.01
SET @p = ROUND(@p, 0)
SET @p = @p / 100.0
SELECT @p 
```

# ruby-on-rails - 将多个参数传递给黄瓜步骤定义

> ID：13541651
> 
> 赞同：1
> 
> 时间：2012-11-24T13:26:50.710
> 
> 标签：ruby-on-rails, cucumber

下面的代码将参数传递给黄瓜步骤定义：

```
Then /^I should see a message "([^\"]*)"$/ do |arg1|
  page.should have_content (arg1)
end 
```

任何人都可以帮助我，如何传递多个参数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T13:29:29.833

为了传递多个参数，您需要有多个“捕获组”。这是一个具有两个捕获组的示例：

```
Then /^I should see a message "([^\"]*)" and another message "([^\"]*)" $/ do |arg1, arg2|
  page.should have_content(arg1)
  page.should have_content(arg2)
end 
```

# android - 如果不存在，Android SQLite 会有效地添加大量数据

> ID：13541652
> 
> 赞同：1
> 
> 时间：2012-11-24T13:27:11.030
> 
> 标签：android, json, performance, sqlite, large-data

我有下面描述的场景，我的问题是：

*   我怎样才能使它更有效率？
    *   我可以改进表结构吗？
    *   我可以改进查询/数据访问和写入吗？

目前它每秒可以解析大约 100 个对象。

**编辑：**通过在“案例 1：”上添加 InsertHelper，现有值的速度提高了，这主要是这种情况。但是，当您需要“last_insert_rowid()”时，我找不到任何有关如何使用它的资源

数据库结构：

```
data {
  id integer primary key autoincrement
  name text not null
  ...
}

reference {
  id integer (same id as in table1, not unique here tho)
  source text not null
  source_id text not null
} 
```

表“引用”保留来自源的引用和源中的 id 到我的数据库中的 id。“数据”表中的每个条目在“参考”表中至少有一个条目。

我在流中有一个 JSON，我一次解析和构建一个对象。流可以高达几 MB，包含超过 8000 个对象。构建对象时，它将包含一个引用。

对于每个构建的对象，我想：

```
if(reference for this object does not exist){
  if(we find the object name in data)
    add to reference with the found id then break
  else
    add to data, get new id, add to reference then break
} 
```

代码看起来像（有点伪代码，使其更易于阅读）：

```
beginTransaction();
try {
  while(parsing next object is successful){
    if("SELECT 1 FROM reference WHERE source = ? and source_id = ?" == null){
      Object[] objects = "SELECT * FROM data WHERE name = ?"
      switch(objects.length){
        case 0:
          "INSERT INTO data (name) VALUES(?)"
          "INSERT INTO reference  (id, source, source_id) VALUES (last_insert_rowid(), ?, ?)"
          break;
        case 1:
          "INSERT INTO reference  (id, source, source_id) VALUES (?, ?, ?)"
          break;
      }
    }
  }
  setTransactionSuccessful();
} finally {
  endTransaction();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T14:58:27.640

`SELECT`如果您还没有索引，您可以通过在查找字段上创建索引来加快查询速度。

`INSERT`包装 SQL命令 (`SQLiteDatabase.insert`和) 的所有函数都`InsertHelper.execute`返回`rowid`插入记录的 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-22T06:15:06.483

您可以进入异步模式以加快操作。打开你的 sqlite 后，执行这个查询：

```
yourdb.execSQL("PRAGMA synchronous = OFF"); 
```

完成插入所需的所有内容后，通过简单的关闭/重新打开刷新数据库：

```
public synchronized SQLiteDatabase flush() {
    if (database != null && database.isOpen()) {
        database.close();
        database = helper.getWritableDatabase();
        return database;
    }
    return database;
} 
```

希望这可以帮助。

# java - 在布局中组合 2 个图像视图

> ID：13541655
> 
> 赞同：0
> 
> 时间：2012-11-24T13:27:28.737
> 
> 标签：java, android, android-layout

我想在布局中组合两个任意宽度和相同高度的图像（填充设备的宽度）。

此示例尺寸为：

*   骰子：427x427
*   多米诺骨牌：900x427

给定一个带有多米诺骨牌的图像和另一个带有骰子的图像，目标可能是这样的：

![在此处输入图像描述](../Images/322bf42938bb16507114ff643eb98146.png)

我的初始代码是：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#999999"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:adjustViewBounds="true"
            android:src="@drawable/domino" />

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:adjustViewBounds="true"
            android:src="@drawable/dice" />

    </LinearLayout> 
```

对于 xlarge 屏幕，结果是：

![在此处输入图像描述](../Images/08b9fe15434eee0519d2faaa3d637733.png)

对于较小的屏幕，多米诺骨牌占据了所有宽度，甚至不会出现骰子。

还尝试将两个图像的权重设置为 1，但结果也是错误的，并且取决于屏幕尺寸。

我该如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:51:12.477

看看这是不是你想要的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#999999" >

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/dice" />

    <ImageView
        android:id="@id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@id/imageView2"
        android:layout_alignParentLeft="true"
        android:layout_toLeftOf="@id/imageView2"
        android:src="@drawable/domino" />

</RelativeLayout> 
```

您可能需要该`android:scaleType`属性`ImageViews`来“拉伸”图像。

# python - Django：在我的模型中使用标准 Auth lib

> ID：13541656
> 
> 赞同：1
> 
> 时间：2012-11-24T13:28:09.237
> 
> 标签：python, django, django-models

如何使用 ForeignKey 在我的模型中使用标准 django 用户库？我尝试使用此代码：

```
class File(models.Model):
    name = models.CharField(max_length=30)
    uploader = models.ForeignKey('django.contrib.auth.models.User') 
```

但它会引发错误，例如此用户模型不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:35:46.727

```
uploader = models.ForeignKey('auth.User') 
```

# java - 另一个类中的链表可从一种方法访问，但不能从另一种方法访问

> ID：13541659
> 
> 赞同：1
> 
> 时间：2012-11-24T13:28:17.090
> 
> 标签：java, model-view-controller, iterator, linked-list, paint

好的，我真的不明白为什么这不起作用。

```
class SketcherModel extends Observable implements Iterable<Element>{

    public Iterator<Element> iterator(){
        return elements.iterator();
    }   

    public LinkedList<Element> elements = new LinkedList<Element>();
} 
```

所以我在`Element`应用程序的“模型”部分的类中有一个 LinkedList。这个想法是，当应用程序的“视图”部分执行该`paint()`方法时，它将访问链接列表并绘制`Element`其中包含的每个链接，如下面的代码所示：

```
public class SketcherView extends JComponent implements Observer{
    public SketcherView(Sketcher theApp){
        this.theApp = theApp;

        //Testing to see if I can access the linked list, 'elements', outside of the paint() method;
        Element test = theApp.getModel().elements.iterator().next() 
    }

    public void update(Observable o, Object rectangle){
        //Code to respond to changes in model...
    }

    public void paint(Graphics g){
        Graphics2D g2D = (Graphics2D)g;
        for(Element element : theApp.getModel()){
            element = (Element)elements.iterator().next();
            g2D.setPaint(element.getColor());
            g2D.draw(element.getShape());
        }    
    } 
```

现在，当从类构造函数访问链表时`elements`，似乎发现它没有问题，但是当我使用基于集合的 for 循环通过`elements`迭代器运行时，它说“元素无法解析”。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T13:33:11.830

```
public void paint(Graphics g){
    Graphics2D g2D = (Graphics2D)g;
    for(Element element : theApp.getModel()){
        element = (Element)elements.iterator().next();
        g2D.setPaint(element.getColor());
        g2D.draw(element.getShape());
    } 
} 
```

您在方法中没有任何`elements`变量。并且循环的当前元素已经在 for 循环中声明。代码应该是

```
for(Element element : theApp.getModel()){
    g2D.setPaint(element.getColor());
    g2D.draw(element.getShape());
} 
```

另一个未实现的问题是您应该覆盖`paintComponent()`，而不是`paint()`。

# java - 清理图像以帮助在 Android 上进行 tesseract

> ID：13541660
> 
> 赞同：5
> 
> 时间：2012-11-24T13:28:25.820
> 
> 标签：java, android, opencv, javacv

我正在尝试从数独板上提取数字。在检测到电路板、它的角并进行转换后，我只剩下一个漂亮的、排列整齐的电路板图像。现在我正在尝试使用 Tesseract android 实现 Tess-Two 来识别数字。我将图像分成 9 个部分

```
currentCell = undistortedThreshed.submat(rect); 
```

其中`rect`是围绕图像的矩形。

现在到数字识别。

有些数字，比如 4，它可以完美识别。一些，主要是 6、7、8 被识别为 0 或什么都没有。

`currentCell`我想通过清理图像来尽可能多地帮助 tesseract 。目前它看起来像这样 ![倒 6](../Images/22839b3f7d4e8e57501c2bf7bb928368.png)。（也尝试过不使用倒置阈值）。我想摆脱白线（数独线）。我试过这样的东西（取自[这里](https://stackoverflow.com/a/7975315/975959)）

```
Imgproc.Canny(currentCell, currentCell, 80, 90);
Mat lines = new Mat();
int threshold = 50;
int minLineSize = 5;
int lineGap = 20;

Imgproc.HoughLinesP(currentCell, lines, 1, Math.PI / 180,
        threshold, minLineSize, lineGap);
for (int x = 0; x < lines.cols() && x < 1; x++) {
    double[] vec = lines.get(0, x);
    double x1 = vec[0], y1 = vec[1], x2 = vec[2], y2 = vec[3];
    Point start = new Point(x1, y1);
    Point end = new Point(x2, y2);

    Core.line(currentCell, start, end, new Scalar(255), 10);

} 
```

但它什么也没画，我试着弄乱线条的宽度和颜色，但还是什么都没有。尝试在大图像上画线，在未脱粒的图像上，没有任何效果..

有什么建议么？

**编辑**

出于某种原因，它似乎找不到任何行。这是该图像在对其应用 canny 后的样子，![6 精明之后](../Images/0b94d379a6e355a6517ad4895d5e5ef5.png)但`HoughLines`没有检测到任何线条。如OpenCV文档中所示，尝试了两者`HoughLines`并`HoughLinesP`使用不同的值，但没有任何效果......这些都是非常明显的线条......我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T05:18:34.780

我最终做了一些不同的事情。

我曾经`findContours`得到最大的轮廓，即数字。

通过使用得到它的边界框`boundingRect`。

使用`submat`和voilla提取了这个。我只得到了数字。

不幸的是，它似乎根本没有任何区别。Tesseract 仍然无法正确识别数字。有时它没有给出任何结果，有时，在扩大数字后它会将 6 识别为 0。但这是另一个问题的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T02:20:27.893

这是我脑海中的一个想法：

将计算霍夫线的代码保留在图像中。这意味着您可以获得与网格对应的线条。

现在，只需在原始图像上绘制这些线条，但将颜色设置为黑色。

大多数白线现在将被新绘制的黑线覆盖。由于霍夫线位置与实际线不完全匹配，因此可能会保留一些小白点。通过连接组件（并丢弃太小的组件）甚至一些形态学操作来消除它们 - 注意实际数字保持不变 - 可以处理这些缺陷。

试试看，让我知道。希望这对您有所帮助。

# java - 使用 Java 代码从 Windows 机器运行 bash 脚本

> ID：13541664
> 
> 赞同：3
> 
> 时间：2012-11-24T13:29:14.983
> 
> 标签：java, bash

我有一个 bash 脚本可以恢复我的数据库。数据库在远程 Linux 服务器上，我的 Java 代码在 Windows 上。如何运行脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:36:37.233

你说的还原是什么意思？如果您只想加载数据库的转储，可以创建备份数据库，然后将行复制到目标数据库。如果您确实需要运行此脚本，最简单的方法是通过 ssh 连接到远程服务器并启动该脚本。使用 Putty 或一些 ssh java lib 建立连接并发送命令以运行。更多关于腻子的信息[在这里](https://stackoverflow.com/q/6147203/1387612)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T13:37:27.440

尝试这样的事情： -

```
 Process p = Runtime.exec("ssh myhost");
 PrintStream out = new PrintStream(p.getOutputStream());
 BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream());

 out.println("ls -l /home/me");
 while (in.ready()) {
 String s = in.readLine();
 System.out.println(s);
 }
 out.println("exit");

p.waitFor(); 
```

从源[线程](https://stackoverflow.com/questions/2514439/how-to-run-ssh-commands-on-remote-system-through-java-program)

# matlab - 两列之间的相关系数

> ID：13541669
> 
> 赞同：-3
> 
> 时间：2012-11-24T13:29:40.457
> 
> 标签：matlab

我需要两列之间的相关系数以及线性拟合和颜色条比例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T13:46:24.017

我想这是你的硬件，所以我会提供一个使用 Matlab 通用函数的解决方案。

```
>> x = sin(0:0.01:20);
>> y = cos(0:0.01:20);
>> R = corrcoef(x,y)

R =

    1.0000    0.0392
    0.0392    1.0000

>> R = corrcoef(x,x)

R =

    1.0000    1.0000
    1.0000    1.0000 
```

我想下次你可能会表现出一些努力。

# php - 我如何在 PHP 上仅在用户上传的评论中显示图像

> ID：13541670
> 
> 赞同：1
> 
> 时间：2012-11-24T13:29:40.877
> 
> 标签：php, mysql, image, comments

我想显示我所做的数据库中的评论，但是如果用户上传了评论，我也想添加评论的图像，目前我将图像存储在一个文件夹中，如果图像路径位于评论旁边的数据库中用户添加了带有评论的图像，但是它没有显示图像，并且它还在没有图像的评论中创建图像空间，代码如下

```
<?php
   include('../c_database.php');

   $queryAll = "SELECT ID, Username, Comments, time_added FROM comments ORDER BY ID DESC";

   $executeQuery = mysqli_query($dbc, $queryAll);

   while($row = mysqli_fetch_array($executeQuery)){

   echo '<div class="commentbox">';
   echo '<div class="comments">';
   echo '<fieldset class="comment">';
   echo '<legend>';
   echo $row['Username'];
   echo '</legend>';
   echo '<br>'; 
   echo '<br>'; 
   echo '<img src="'.$row['imagepath'].'" width="100px" height="100px"></img>';
   echo '&nbsp'; 
   echo $row['Comments']; 
   echo '<br>';
   echo '<br>';
   echo '<div class="commentdetails">';
   echo '<fieldset>';
   echo $row['time_added'];
   echo ' / '; 
   echo 'Comment ID: ';
   echo $row['ID'];  
   echo '</div>'; 
   echo '</fieldset>';
   echo '</div>';
   echo '<br>';
   echo '</div>';
}

?> 
```

那么如何仅在用户上传的评论中显示图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:33:31.117

好吧，如果用户拥有或只能上传一张个人资料图片，那么在将文件上传到目录时，使用用户会话 ID 重命名文件，例如：`$image_name = $_SESSION['user']` 然后如果用户的会话`id = 1`，那么个人资料图片将像`1.jpg`

现在，当显示图片时，您可以使用用户 ID 调用图像。

这是一种较弱的方法，但我曾经创建过一个用户只能上传一张图片的网站，并且成功了。

在你的代码中，你可以做

`echo '<img src="uploads/$_SESSION['user'].jpg" width="100px" height="100px"></img>'`

或者 `echo '<img src="user.php?id=$id.jpg" width="100px" height="100px"></img>'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:49:25.187

看看你的查询。您已经在 SELECT 语句中指出了表中需要的所有列，但 imagepath 除外。如果我理解正确，您的评论表中有图像路径？如果是这种情况，那么您需要执行下一步： 相反`echo '<img src="'.$row['imagepath'].'" width="100px" height="100px"></img>';` Do `echo (!empty($row['imagepath'])) ? '<img src="'.$row['imagepath'].'" width="100px" height="100px"></img>' : '';`。

# php - 为查询结果创建单个对象

> ID：13541671
> 
> 赞同：0
> 
> 时间：2012-11-24T13:29:48.540
> 
> 标签：php, oop

我有三个模型（数据库表的表示），它们基本上具有 setter 和 getter 方法。我有一个具有操作方法的服务类。在一个服务类方法中，我正在编写一个连接两个表的查询。我想知道如何为查询结果创建单个对象。

例如：

我有两个模型文件 m1.php 和 m2.php

m1.php

```
class M1Model {
  public $id;
  public $name;

  public function setM1ID($id) {
    $this->id = $id;
  }

  public function setM1Name($name) {
    $this->name = $name;
  }

  public function getM1ID() {
    return $this->id;
  }

  public function getM1Name() {
    $this->name;
  }
} 
```

m2.php

```
class M2Model {

  public $id;
  public $cat_name;
  public $m1_id;

  public function setM2ID($id) {
    $this->id = $id;
  }

  public function setM2CatName($cat_name) {
    $this->cat_name = $cat_name;
  }

  public function setM1ID($m1_id) {
    $this->m1_id = $m1_id;
  }

  public function getM2ID() {
    return $this->id;
  }

  public function getM2CatName() {
    return $this->cat_name;
  }

  public function getM1ID() {
    return $this->m1_id;
  }
} 
```

服务.php

```
include m1.php;
include m2.php;

class DataService {

  function __construct() {
    $m1 = new M1Model();
    $m2 = new M2Model();
  }

  function getAllData() {
    $query = "database query using join";
    //Here I want to return object (Not generic object)
    return $object;
  }
} 
```

从 getAllData()，我想返回单个对象和非通用对象。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T08:09:24.057

如果你想要的是一个 DataService 对象，你可以把你的 $query 放在 DataService 构造函数中......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:38:56.867

使用[`PDOStatement::fetch(PDO::FETCH_OBJ)`](http://www.php.net/manual/en/pdostatement.fetch.php)or获取查询结果[`mysqli_fetch_object()`](http://www.php.net/manual/en/mysqli-result.fetch-object.php)。

请参阅 PHP 文档：

```
$sth = $dbh->prepare("SELECT name, colour FROM fruit");
$sth->execute();
$result = $sth->fetch(PDO::FETCH_OBJ);
print $result->NAME; 
```

# css - CSS中的自定义图像边框

> ID：13541672
> 
> 赞同：0
> 
> 时间：2012-11-24T13:29:52.263
> 
> 标签：css

所以我想制作一个如下所示的文本字段：

![在此处输入图像描述](../Images/8c7377b687e20dd80892c46b9e13f899.png)

可以像这样随着文本变短或变长而调整大小

前任; ![在此处输入图像描述](../Images/8fd547a672110015555e3d517e5dbadb.png)和![在此处输入图像描述](../Images/a02136d7f466b45ccc7fedfc771e71ac.png)

这是我得到的零件![在此处输入图像描述](../Images/9736beedcd4c71ede679bd497d9b8efd.png)，，![在此处输入图像描述](../Images/e80d7bbe72f3c0992e3388fddf91ab8e.png)![在此处输入图像描述](../Images/de877a403130b8dbd4fcacd7cfb9307f.png)

那么有什么简单的方法可以用css做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:38:49.207

例子

```
<style>

.class_name{border: 1px solid white;-moz-border-radius:19px;
-webkit-border-radius: 19px;
border-radius:5px;
-moz-box-shadow: 0px 0px 5px #666;
-webkit-box-shadow: 0px 0px 5px #666;
box-shadow: 0px 0px 5px #666;
padding:2px 10px;
text-align:center;
width:70px; height:auto;
margin:0px auto;}
</style> 
```

html代码

```
<div class="class_name">sample</div> 
```

# ios - 'birdsighting' 没有可见的@interface 声明选择器'initwithname:location:date:'

> ID：13541677
> 
> 赞同：1
> 
> 时间：2012-11-24T13:30:33.030
> 
> 标签：ios, xcode

我是 ios 编程的新手，并且停留在我的第二个教程中，该教程在 developer.apple.com 中调用了关于观鸟的第二个 iOS 应用程序。在“在细节场景中显示信息”部分的末尾，当我运行代码时，BirdSightingDataController.m 文件中出现“'birdsighting' 没有可见的@interface 声明选择器'initwithname:location:date:'”错误"sighting = [[BirdSighting alloc] initWithName:@"Pigeon" location:@"Everywhere" date:today];" 线。我检查了很多次文档并再次进行了 tut 但找不到如何纠正这个问题？

```
#import "BirdSightingDataController.h"
#import "BirdSighting.h"
@interface BirdSightingDataController ()
- (void)initializeDefaultDataList;
@end
@implementation BirdSightingDataController
- (void)initializeDefaultDataList {
    NSMutableArray *sightingList = [[NSMutableArray alloc] init];
    self.masterBirdSightingList = sightingList;
    BirdSighting *sighting;
    NSDate *today = [NSDate date];
    sighting = [[BirdSighting alloc] initWithName:@"Pigeon" location:@"Everywhere" date:today];
    [self addBirdSightingWithSighting:sighting];
}
- (void)setMasterBirdSightingList:(NSMutableArray *)newList {
    if (_masterBirdSightingList != newList) {
        _masterBirdSightingList = [newList mutableCopy];
    }
}
- (id)init {
    if (self = [super init]) {
        [self initializeDefaultDataList];
        return self;
    }
    return nil;
}
- (NSUInteger)countOfList {
    return [self.masterBirdSightingList count];
}
- (BirdSighting *)objectInListAtIndex:(NSUInteger)theIndex {
    return [self.masterBirdSightingList objectAtIndex:theIndex];
}
- (void)addBirdSightingWithSighting:(BirdSighting *)sighting {
    [self.masterBirdSightingList addObject:sighting];
}
@end 
```

Birdsighting.h 文件

```
#import <Foundation/Foundation.h>

@interface BirdSighting : NSObject

@property (nonatomic, copy) NSString *name;
@property (nonatomic, copy) NSString *location;
@property (nonatomic, strong) NSDate *date;
-(id)initWithName:(NSString *) name locaiton:(NSString *)location date:(NSDate *) date;

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:36:52.373

检查 Birdsighting.h 并确保该方法

```
- (id)initWithName:(NSString *)name location:(NSString *)location date:(NSDate *)date; 
```

在那里声明。这实质上是告诉其他类哪些方法可用于 Bidsighting 类的实例。

接口声明中可能存在拼写错误（即使在苹果示例中也会发生这种情况）。

# arrays - 在汇编中操作数组

> ID：13541679
> 
> 赞同：0
> 
> 时间：2012-11-24T13:30:38.750
> 
> 标签：arrays, assembly, x86, nasm, reverse

我有一个问题，我无法弄清楚：

在汇编语言中，编写一个函数，该函数接收指向整数数组的指针和该数组的大小，并通过反转其元素来更改数组，而无需将数组复制到堆栈。使用专用指令和寄存器来处理数组 ( `esi`, `edi`; `lodsb`, `stosb`, `cld`, `std`)。

示例：1 2 3 4 5 -> 5 4 3 2 1

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T02:39:53.383

`lodsb`使用and反转数组`stosb`需要`cld`and`std`为每个元素（因为一个指针需要递增，另一个需要递减），或者，您可以忘记`cld`并`std`取消另一个指针的不正确递增（或递减）在每个元素之后减去 2（或加 2）。

无论如何，在我看来，在这种情况下使用`lodsb`and`stosb`会使事情变得不必要地复杂。我会使用这样的东西：

```
 mov esi,start_address
    mov edi,end_address

    mov ecx,edi
    sub ecx,esi

x1: test ecx,ecx
    jz @ready

    mov al,[esi]
    xchg al,[edi]
    mov [esi],al
    inc esi
    dec edi
    dec ecx
    jmp x1

@ready: 
```

# mysql - MySQL触发器 - 插入可变命名表

> ID：13541682
> 
> 赞同：0
> 
> 时间：2012-11-24T13:30:54.810
> 
> 标签：mysql, triggers

从 MySQL 触发器开始，如下所示：

```
delimiter #

create trigger comments_after_ins_trig after insert on comments
for each row
begin
  insert into comment_types (comment, user_id) values (new.comment, new.user_id);
end# 
```

假设我想将插入内容拆分到不同的表中，例如，如果评论包含粗俗词 ( `LOCATE('sh**', comment) > 0`)，而不是 comment_types 我想插入到名为 vulgar_comments 的表中，如果评论包含词“谢谢”或“不错”插入进入 nice_comments 等。基本上如何使表名插入到该触发器的变量中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T17:43:17.337

试试这个，我已经测试过了，这对我有用：

```
delimiter $$
drop trigger if exists `comments_after_ins_trig`$$
create trigger `comments_after_ins_trig` after insert on comments
for each row
begin
 if(locate("sh**", new.comment) > 0) then
   insert into vulgar_comments(comment, user_id) values (new.comment, new.user_id);
 else
   insert into comment_types (comment, user_id) values (new.comment, new.user_id);
 end if;
end$$

delimiter ; 
```

# asp.net - 如果存在静态文件，则提供静态文件，否 则创建它

> ID：13541685
> 
> 赞同：2
> 
> 时间：2012-11-24T13:31:01.940
> 
> 标签：asp.net, asp.net-mvc, iis, httphandler

如何使 StaticFile 处理程序仅服务实际存在的文件并使其他人转到 asp.net mvc 管道或自定义 http 处理程序。

```
1) GET /images/file.jpg
  exists => serve it (StaticFile handler / as efficiently as possible)

2) GET /images/file_640x480.jpg
  1\. request (doesn't exist)
  * load file.jpg
  * resize
  * save as file_640x480.jpg
  => serve from memory

  following requests 
  => should use 1) because the file is now there 
```

这很简单，`<modules runAllManagedModulesForAllRequests="true" />` 但我想这更像是一种解决方法，而不是真正的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T21:24:28.183

我没有尝试过这段代码，但这些行上的东西应该可以工作

```
public FilePathResult GetFile(string name)
{
    FileInfo info = new FileInfo(name);
    if (!info.Exists)
    {
        //Code to load the original file, resize and save would go here
    }

    return File(name, "text/plain");
} 
```

# c - Unix/C - 2 方法有不同的行为

> ID：13541690
> 
> 赞同：1
> 
> 时间：2012-11-24T13:31:39.577
> 
> 标签：c, function, unix, char, malloc

我是 UNIX C 开发的初学者，需要一点帮助。我有这两个功能：

```
void edit_char(){

     int i;
     int length = strlen(expression);
     char *tmp = (char *) malloc((length+1)*sizeof(char));
     pom[0]='*';
     for(i=1;i<length+1;i++){
         tmp[i] = expression[i-1];
     }
     strcpy(expression,tmp);
     free((void *) tmp);
 }

 char *edit_char2(char *string){

     int i;
     int length = strlen(string);
     char *tmp = (char *) malloc((length+1)*sizeof(char));
     tmp[0]='/';
     for(i=1;i<length+1;i++){
         tmp[i] = string[i-1];
     }
     strcpy(string,tmp);
     free((void *) tmp);
     return string;
  } 
```

edit_char() 编辑全局变量`char *expression`- 它在开头放置一个符号“*”。第二个 edit_char2() 几乎相同，但不是编辑全局变量，而是编辑参数中的字符串。

第一个函数工作正常，问题出在第二个函数的 tmp 变量上。Malloc 不返回大小为 (length+1) 的空字符数组。它返回“xd\372\267xd\372\267\020”。

什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T13:38:42.730

malloc 只是返回一个指向新分配的内存的指针，这不被认为是“空的”。如果你想“清空”它 - 即用 NULL 填充你的内存，你需要~~手动执行它~~需要手动使用[`calloc`](http://linux.die.net/man/3/calloc)或填充它，例如：

*   [~~`bzero`~~](http://linux.die.net/man/3/bzero)（已弃用）
*   [`memset`](http://linux.die.net/man/3/memset)

**编辑：**另外我认为，因为你要为每个字符串添加一个字符，你不应该使用

```
newstring = malloc((strlen(string) + 1) * sizeof(char)) 
```

但反而

```
newstring = malloc((strlen(string) + 2) * sizeof(char)) 
```

为新字符和终止分配空间`\0`。

**EDIT2：**这也意味着您的功能***无法工作/不安全***！您正在尝试制作两者`string`并`expression`包含比最初分配的字符多 1 个字符！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T13:34:11.307

```
 tmp[0]='/';
 for(i=1;i<length+1;i++){
     tmp[i] = string[i-1];
 } 
```

您没有复制`string`. 这是需要的`strcpy(string,tmp);`

请注意，您可以使用`memmove`来执行复制而不是`for`循环。另请注意，返回值的`malloc`强制转换不是必需的，应该避免。参数的演员表`free`也不是必需的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T16:20:32.300

如前所述，您的代码将不起作用。

`strcpy(target, tmp)`在这两个函数中使用时都会出现错误。您需要了解，这样做几乎肯定会溢出`target`. 如果目标只是指向一个数组`strlen(target + 1)`（目标中的所有字符加上一个尾随的 NULL），那么您正在复制一个`tmp`太短的内存数组的内容`char`。为了说明这一点，运行一个循环，例如：

```
/* allocate two strings, containing copies
   of constant string "Hello World" */
local_string = strdup("Hello World");
expression = strdup("Hello World");
for (i = 0; i < 100; i++) {
    edit_char();
    edit_char2(local_string);
    printf("global_string after: [%s]\n", expression);
    printf("local_string after: [%s]\n", local_string);
} 
```

几乎总是会导致程序异常终止，早在第 100 次迭代之前。在 Debian Linux Squeeze 上，我得到以下输出：

```
user@host$ ./a.out
global_string before: [Hello World]
local_string before: [Hello World]
global_string after: [*Hello World]
[...]
global_string after: [************Hello World]
local_string after: [////////////Hello World]
*** glibc detected *** ./a.out: double free or corruption (!prev): 0x00000000020e2050 
```

你需要使用更多的指针魔法来实现你想要的。这是一个工作示例，设计改进限制了代码重复：

### 输出

```
 user@host$ ./a.out
global_string before: [Hello World]
local_string before: [Hello World]
global_string after: [*Hello World]
local_string after: [/Hello World] 
```

### 代码

```
#include     <stdlib.h>
#include     <string.h>
#include     <stdio.h>

char        *global_string;

void        add_one_leading_character(char leading, char **pointer_to_string)
{

    char    *new_string;
    char    *old_string;

    /* old_string will hold the content of
       pointer_to_string, for convenience */
    old_string = *pointer_to_string;
    /* allocate a new, empty string
       (= filled with NULLs) holding enough space
       for an additional character */
    new_string  = calloc(sizeof(*old_string), strlen(old_string) + 2);
    /* new_string now holds the leading character,
       followed by NULLs */
    new_string[0] = leading;
    /* concatenate the old_string to the new_string */
    strcat(new_string, old_string);
    /* make the pointer parameter points to the
       address of new_string */
    *pointer_to_string = new_string;
    /* free the memory pointed by old_string */
    free(old_string);
}

int        main(int ac, char **av)
{
    char   *local_string;

    /* allocate two strings, containing copies
       of constant string "Hello World" */
    local_string = strdup("Hello World");
    global_string = strdup("Hello World");
    printf("global_string before: [%s]\n", global_string);
    printf("local_string before: [%s]\n", local_string);
    /* add leading characters */
    add_one_leading_character('/', &local_string);
    add_one_leading_character('*', &global_string);
    printf("global_string after: [%s]\n", global_string);
    printf("local_string after: [%s]\n", local_string);
} 
```

# vb.net-2010 - 事件创建按钮未按预期对齐的问题

> ID：13541696
> 
> 赞同：0
> 
> 时间：2012-11-24T13:32:40.050
> 
> 标签：vb.net-2010

新人再次出现问题。我在表单上有一个按钮，该按钮设置为在其当前位置创建另一个按钮，然后使用运行的计时器

```
 button.top = button.top + 10 
```

对于每个刻度，设计创建（又名按钮创建者）按钮向下移动到新按钮下方，并保持相同的对齐方式。由于我正在处理的表单的大小，一旦这样做了 3 次，创建者按钮现在是歪斜的，稍微在其上方添加的按钮的右侧，而不是在同一个地方，因为控件现在超出了表单大小并且滚动条变得可见。

我已经进行了一些搜索，但到目前为止，我找到的答案并没有帮助——可能更多的是因为我没有正确理解——而且它开始让我深思熟虑，因为它在逻辑上应该如此简单。

当我意识到这是先前添加的按钮正在从

```
 location.x = 100 
```

至

```
 location.x = 91 
```

而不是改变它的习惯的创造者按钮。

谁能指出什么可能如此简单以至于我为了使这些对齐而忽略了？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T02:43:42.810

而不是使用 location.x 属性尝试使用对象的 LEFT 属性...所以当您创建 NEW 按钮并设置其初始位置时，请使用 ThisButton.Left = Value 来定位它...。

其中 ThisButton 是按钮的名称，Value 是 X 位置数值。

# django-forms - Django 脆皮表单，在模板中隐藏/显示字段

> ID：13541700
> 
> 赞同：6
> 
> 时间：2012-11-24T13:33:10.587
> 
> 标签：django-forms, django-crispy-forms

我在 Django 中使用 Crispy-Form 和 Bootstrap。它工作得很好。现在，我希望有一个字段仅在另一个字段输入时显示。基本上我有一个`multpile select list`叫做 A 可见的和一个`text field`B 隐藏的。一旦用户关注/选择 A 中的一个或多个值，B 应该变得可见。如果没有选择它应该变得不可见。

cripsy form是否有这个功能或者可以写JS？还是我必须在呈现表单的 html 页面中编写 JS？

再见

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T21:13:37.947

我曾经做过类似的事情。我为您最初想要隐藏的输入分配了一个“隐藏”类。这可以通过将字段嵌套在 Div 中并分配 css_class 来完成。见[http://django-crispy-forms.readthedocs.org/en/d-0/layouts.html#universal-layout-objects](http://django-crispy-forms.readthedocs.org/en/d-0/layouts.html#universal-layout-objects)

然后在发生特定操作时使用 javascript 删除“隐藏”类。

如果您决定使用 jQuery，可以使用以下函数： $("input[name='a_hidden_​​field']").removeClass('hidden')

# javascript - 计算剩余下载时间

> ID：13541702
> 
> 赞同：2
> 
> 时间：2012-11-24T13:33:23.067
> 
> 标签：javascript, math, time

我正在通过 Ajax 分块上传文件。目前，每个块重 50 KiB。

在上传过程中，我有以下信息：

*   文件大小
*   块数
*   时间开始
*   以毫秒为单位上传当前块需要多长时间

我还可以添加完成此操作所需的几乎所有内容，我想到的不是依赖上传速度，而是依赖平均块上传时间，这是我目前的错误公式：

```
(averageUplTime * ((FileSize / ChunkSize) ) -  AmountOfChunks) / 1000 
```

它实际上几乎可以工作，我可以在数字之间看到它以几乎正确的方式减少，但我得到了这些长数字`9.16174`，我无法找出正确的方法来做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T13:42:47.700

假设`startTime`自纪元以来以毫秒为单位的时间戳，这应该有效：

```
var elapsedTime = (new Date().getTime()) - startTime;
var chunksPerTime = currentChunk / elapsedTime;
var estimatedTotalTime = amountOfChunks / chunksPerTime;
var timeLeftInSeconds = (estimatedTotalTime - elapsedTime) / 1000;

var withOneDecimalPlace = Math.round(timeLeftInSeconds * 10) / 10; 
```

只要上传速度波动不大，这只是“准确”的。`chunksPerTime`通过仅考虑要计算的最后 X 个块（并对这些块的最后 Y 值取平均值），您可以获得更好的结果。

# .net - 在另一台计算机上跳过后台工作人员的 DoWork

> ID：13541706
> 
> 赞同：0
> 
> 时间：2012-11-24T13:33:56.153
> 
> 标签：.net, vb.net

在一个项目中，我使用的是 Backgroundworker（在 vb.net 中）。我在 Windows 8 Pro（64 位）下工作，项目在它上面运行良好......但是如果我在 Windows 7（64 位）的机器上传输可执行文件，就会发生奇怪的事情！Backgroundworker 的 DoWork 不起作用，它直接跳到 RunWorkerCompleted。我不明白为什么。我用 Visual Studio 2012 Express Edition 编译它。你有解决这个问题的想法吗？谢谢你。

这是一些代码：

```
Private Sub bgw_extract_DoWork(sender As Object, e As System.ComponentModel.DoWorkEventArgs) Handles bgw_extract.DoWork
        MsgBox("test dowork") 'this appear
        extract_cycle() 'this isn't executed
        MsgBox("end dowork") 'this isn't executed
End Sub

Private Sub extract_cycle()
'nothing is executed here
        MsgBox("test2") 'not executed
        Try
            'my code....
        Catch ex As Exception
            MessageBox.Show(ex.ToString(), "Extract Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
        End Try
End Sub

Private Sub bgw_extract_RunWorkerCompleted(sender As Object, e As System.ComponentModel.RunWorkerCompletedEventArgs) Handles
 bgw_extract.RunWorkerCompleted
         MsgBox("RunWorkCompleted") 'this is executed in every case
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T14:32:06.263

可能您的 extract_cycle 方法引用了目标机器上不存在的程序集；并且因此在 JITted 时抛出异常（因此在`MsgBox("test2")`执行之前）。

如果您[捕获未处理的异常](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)（甚至查看事件日志），您应该能够看到正在发生的事情。

# crystal-reports - 如何自动运行水晶报表

> ID：13541708
> 
> 赞同：0
> 
> 时间：2012-11-24T13:34:05.920
> 
> 标签：crystal-reports

每周一次，我需要运行一堆 Crystal Reports，然后通过电子邮件发送给他们。我想知道是否有办法自动运行它们？我试过使用 Crystal-Delivery，但由于某种原因，它只运行没有参数的报告。

有没有人使用过 Crystal-Delivery 并为我的问题提供解决方案？他们的论坛不是很有帮助。或者有没有其他软件可以做我需要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:29:18.007

有几种方法可以剥皮。有多种选项可以从给定的报告构建 pdf（例如，如果您正在使用 java 构建），并且可以相当容易地在 cron 上运行 java，然后在 cron 上运行一个邮件脚本以发送这些文件一次它们已经创建（该邮件脚本可以是 php 或 java 或任何你喜欢的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T15:32:00.487

是的，有多种解决方案，包括我已成功使用带有参数的报告的 Crystal Delivery。添加报表后双击，完成“参数”选项卡。

# extjs - ExtJs 4：如何让验证器在字段失去焦点时触发？

> ID：13541712
> 
> 赞同：0
> 
> 时间：2012-11-24T13:34:11.400
> 
> 标签：extjs

我想向字段添加自定义验证器，我这样做：

```
Ext.apply( Ext.form.field.VTypes,{
sampleSetExist: function(val, field) {
    alert('val='+val);
}
}); 
```

我发现一旦我的按键就会触发验证器，有没有办法让验证器在字段失去焦点时触发？谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:38:26.210

您可以使用**[blur](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.Text-event-blur)**事件，该事件会在字段失去焦点时触发

要使按钮仅在表单有效时才处于活动状态，请使用

```
formBind: true, //only enabled once the form is valid
disabled: true, 
```

# c++ - IASetIndexBuffer 内存泄漏原因

> ID：13541719
> 
> 赞同：1
> 
> 时间：2012-11-24T13:34:27.303
> 
> 标签：c++, directx

例如，我循环运行这段代码：

```
m_device->CreateBuffer(&index_buffer_desc, &index_data, &buffer);
Release(buffer); 
```

其中 m_device 是 ID3D11Device 和 buffer 是 ID3D11Buffer

没有泄漏 - 我创建对象然后销毁它。

如果我将它附加到管道，如下所示：

```
m_device->CreateBuffer(&index_buffer_desc, &index_data, &buffer);
m_device_context->IASetIndexBuffer(buffer, DXGI_FORMAT_R32_UINT, 0);
Release(buffer); 
```

比内存泄漏开始。

MSDN 关于 IASetIndexBuffer 说：“该方法不会保存对传入接口的引用。因此，应用程序应注意不要释放设备当前正在使用的接口。”

好的。附加后我重置索引缓冲区：

```
m_device->CreateBuffer(&index_buffer_desc, &index_data, &buffer);
m_device_context->IASetIndexBuffer(buffer, DXGI_FORMAT_R32_UINT, 0);
m_device_context->IASetIndexBuffer(NULL, DXGI_FORMAT_R32_UINT, 0);
Release(buffer); 
```

但是内存窃取泄漏。

是什么原因？这个物体还在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:09:28.473

真的，我只是重新启动这段代码，没有任何反应，没有泄漏。什么都没有改变。这真是奇怪的行为。

在发布这个问题之前，总是尝试使用 ID3D11DeviceContext::ClearState 方法，但内存窃取泄漏。

无论如何，现在一切都好。

# macos - 在终端中生成随机文本文件

> ID：13541724
> 
> 赞同：7
> 
> 时间：2012-11-24T13:35:26.447
> 
> 标签：macos, bash, unix, random, terminal

我正在尝试从终端在我的 macbook 上生成一个随机文本文件。我正在尝试的是：

```
tr -dc A-Za-z0-9 < /dev/urandom | head -c100 > RandomFile.txt 
```

但我得到

***tr：非法字节序列***

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T13:48:10.900

设置这个环境变量，你应该很高兴：

```
setenv LC_ALL C 
```

[我在此页面上找到的答案](http://www.real-world-systems.com/docs/tr.1.html)。

有了这个环境变量，我看到了一个格式很好的输出：

```
tr -dc A-Za-z0-9 < /dev/urandom | head -c100
Kk4kfjR3O0UraMpfTGicGvYCziFClJQUTO3zCXdo05RTxEUigqPXTkjtiGOsTsaNyqNR3rX2dsmPlHkSdqO5qWBTmIFIYezsekWT[~]:; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T14:33:23.937

```
# Print or assign a random alphanumeric string of a given length.
# rndstr len [ var ]
function rndstr {
    if [[ $FUNCNAME == "${FUNCNAME[1]}" ]]; then
        unset -v a
        printf "$@"
    elif [[ $1 != +([[:digit:]]) ]]; then
        return 1
    elif (( ! $1 )); then
        return
    else
        typeset -a a=({a..z} {A..Z} {0..9})
        eval '${2:+"$FUNCNAME" -v} "${2:-printf}" -- %s "${a[RANDOM%'"${#a[@]}"']"{1..'"$1"'}"}"'
    fi
}

rndstr 100 
```

这是我的库函数。优点是性能和直接分配给变量的能力。可能对你来说太过分了。

# java - 从 MySQL 归档 Jframe

> ID：13541728
> 
> 赞同：1
> 
> 时间：2012-11-24T13:35:34.537
> 
> 标签：java, mysql, database, swing, jdbc

在这里我的项目真的卡住了，我对 java 还很陌生，对数据库也很陌生。我在代码中所做的是用一堆单词填充“数据”对象，但我想做的是用我制作的数据库中的信息填充这些框架。我一直在谷歌搜索和搜索几天，但没有找到任何可以帮助我理解我需要做什么的东西。任何帮助将不胜感激。

```
import java.awt.*;
import javax.swing.*;
import javax.swing.border.*;
import javax.swing.table.*;
import java.awt.event.*;

public class Project3 extends JFrame {
private JPanel contentPane;
private JTable table_1;
private JScrollPane scrollPane;
String[] columnNames = { "Restaurant", "Dish", "Type", "Price", "Rating" };
Object[][] data = {
        { "Nemo", "Vesuvio", "Pizza", new String("65kr"), new Integer(7) },
        { "John", "Doe", "Rowing", new Integer(3), new Boolean(true) },
        { "Sue", "Black", "Knitting", new Integer(2), new Boolean(false) },
        { "Jane", "White", "Speed reading", new Integer(20),
                new Boolean(true) },
        { "Joe", "Brown", "Pool", new Integer(10), new Boolean(false) } };

/**
 * Launch the application.
 */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                Project3 frame = new Project3();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the frame.
 */
public Project3() {
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 800, 600);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    contentPane.setLayout(new BorderLayout(0, 0));
    setContentPane(contentPane);
    JPanel panel = new JPanel();
    contentPane.add(panel, BorderLayout.CENTER);
    panel.setLayout(null);
    scrollPane = new JScrollPane();
    scrollPane.setBounds(139, 162, 469, 420);
    panel.add(scrollPane);
    table_1 = new JTable(data, columnNames);
    scrollPane.setViewportView(table_1);
    table_1.setFillsViewportHeight(true);
    table_1.setModel(new DefaultTableModel(new Object[][] {
            { "Nemo", "blah", "Pizza", "65kr", new Integer(7) },
            { "Nemo", "blah", "Rowing", "1 000 000kr", Boolean.TRUE },
            { "Sue", "blah", "Knitting", new Integer(2), Boolean.FALSE },
            { "Jane", "blah", "Speed reading", new Integer(20),
                    Boolean.TRUE },
            { "Joe", "Brown", "Pool", new Integer(10), Boolean.FALSE },
            { null, null, null, null, null },
            { null, null, null, null, null },
            { null, null, null, null, null },
            { null, null, null, null, null },
            { null, null, null, null, null },
            { null, null, null, null, null },
            { null, null, null, null, null },
            { null, null, null, null, null },
            { null, null, null, null, null },
            { null, null, null, null, null },
            { null, null, null, null, null },
            { null, null, null, null, null },
            { null, null, null, null, null },
            { null, null, null, null, null },
            { null, null, null, null, null },
            { null, null, null, null, null },
            { null, null, null, null, null },
            { null, null, null, null, null },
            { null, null, null, null, null },
            { null, null, null, null, null },
            { null, null, null, null, null },
            { null, null, null, null, null }, }, new String[] {
            "Restaurant", "Dish", "Type", "Price", "Rating" }));
    JButton btnChangeadd = new JButton("Change/Add");
    btnChangeadd.addMouseListener(new MouseAdapter() {
        @Override
        public void mouseClicked(MouseEvent e) {
            // CALL CHANGE METHOD HERE
        }
    });
    btnChangeadd.setFont(new Font("Lucida Grande", Font.PLAIN, 16));
    btnChangeadd.setBounds(143, 104, 175, 42);
    panel.add(btnChangeadd);
    JLabel lblNewLabel = new JLabel("Welcome RestaurantID");
    lblNewLabel.setFont(new Font("Lucida Grande", Font.PLAIN, 24));
    lblNewLabel.setBounds(264, 56, 260, 36);
    panel.add(lblNewLabel);
    JButton button = new JButton("+");
    button.addMouseListener(new MouseAdapter() {
        @Override
        public void mouseClicked(MouseEvent e) {
            // CALL SOMETHING HERE IF YOU WANT
        }
    });
    button.setBounds(66, 248, 40, 29);
    panel.add(button);
    JButton button_1 = new JButton("-");
    button_1.addMouseListener(new MouseAdapter() {
        @Override
        public void mouseClicked(MouseEvent e) {

        }
    });
    button_1.setBounds(66, 289, 40, 29);
    panel.add(button_1);
    JButton btnDelete = new JButton("Delete");
    btnDelete.addMouseListener(new MouseAdapter() {
        @Override
        public void mouseClicked(MouseEvent e) {
            //DELETE METHOD
        }
    });
    btnDelete.setFont(new Font("Lucida Grande", Font.PLAIN, 16));
    btnDelete.setBounds(344, 104, 191, 42);
    panel.add(btnDelete);
    JButton btnLogOut = new JButton("Log out");
    btnLogOut.addMouseListener(new MouseAdapter() {
        @Override
        public void mouseClicked(MouseEvent e) {
        }
    });
    btnLogOut.setBounds(667, 6, 117, 29);
    panel.add(btnLogOut);
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T14:27:54.217

[从JDBC 教程](http://docs.oracle.com/javase/tutorial/jdbc/)开始，然后学习文章[*Table From Database*](http://tips4java.wordpress.com/2009/03/12/table-from-database/)。还，

*   在可用时使用常量或工厂，而不是不必要的构造函数，例如：

    ```
    {"Nemo", "Vesuvio", "Pizza", "65kr", 7},
    {"John", "Doe", "Rowing", 3, true},
    {"Sue", "Black", "Knitting", Integer.valueOf(3), Boolean.FALSE}, 
    ```

*   使用`@Override`注解避免粗心重载：

    ```
    @Override
    public void run() {
        ...
    } 
    ```

*   开始使用[*Java Collections Framework*](http://docs.oracle.com/javase/tutorial/collections/index.html)来接受面向对象，而不是数组。请注意引用的示例如何指定形式参数，例如`List<T>`，其中`List`是接口类型和`T`泛型类型参数。

# objective-c - OS X 语音识别库

> ID：13541733
> 
> 赞同：3
> 
> 时间：2012-11-24T13:35:55.683
> 
> 标签：objective-c, speech-recognition

我真的要疯了才能运行这个库： [libsprec](https://github.com/H2CO3/libsprec)

使用“os x”的makefile，我创建了所有文件*.o*和文件*.dylib*。makefile 还将创建的文件复制到*/usr/lib*和*/usr/include*。现在，在我的项目框架中拖动文件 .dylib 后，我已经导入了这个头文件：

```
#import <sprec/sprec.h> 
```

但 Xcode 说我：

```
> sprec.h not found 
```

我没有在 OS X 上找到任何其他用于语音识别的库（NSSpeechRecognition 不会将语音作为字符串，但它只找到预定义的“命令”）。

我应该怎么办？

感谢任何回复的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:52:06.003

也许这可以工作

[https://github.com/H2CO3/VocalKit](https://github.com/H2CO3/VocalKit)

[http://www.politepix.com/openears/](http://www.politepix.com/openears/)

你试过这些吗？

# jquery - IE9 中的 JQuery UI 选项卡无响应

> ID：13541740
> 
> 赞同：1
> 
> 时间：2012-11-24T13:36:38.500
> 
> 标签：jquery, ajax, json, user-interface

我有一个使用 JQuery UI 选项卡的页面，它们加载正常（尽管整个页面在 IE9 中渲染速度要慢得多），但在 IE9 中单击/悬停非常慢。该页面在 Chrome/Firefox 中很好。我确实有一些 Ajax/Json 在页面上加载了各种位，我已经减少了它，但我无法弄清楚如何在 IE9 中纠正这个问题。仅仅是因为有很多后台 JQuery 正在进行，而 IE9 无法应对吗？任何人都可以帮忙吗？我希望我错过了一些明显的东西，因为目前我正在查看页面的完整重新设计......！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:26:09.837

发布后很快就找到了答案，但我想我会把它放回这里。没有响应的原因是因为我还在使用 jquery.livequery.js。这有某种冲突，因为当我删除它时，一切都好得多。

# .htaccess - htaccess 子域 ssl 通配符未打开文件

> ID：13541742
> 
> 赞同：3
> 
> 时间：2012-11-24T13:36:48.197
> 
> 标签：.htaccess, ssl, subdomain, wildcard, bluehost

好的所以我遇到了我的 htaccess 以及如何让它工作的问题。

我刚刚为我的主域和子域购买了一个 ssl 通配符。我和 bluehost 在一起，他们建议添加这个：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^subdomain.example.com$
RewriteCond %{REQUEST_URI} !^/subfolder/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /subdomain/$1
RewriteCond %{HTTP_HOST} ^subdomain.example.com$
RewriteRule ^(/)?$ subfolder/index.php [L] 
```

目前我只有这个...

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^domain\.com
RewriteRule ^(.*)$ https://www.domain.com/$1 [L]

RewriteCond %{HTTP_HOST} ^sub.domain.com
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule . sub_folder/index.php [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule . /index.php [L] 
```

但是这有效，我无法得到它，所以当我打开文件时，它只会打开没有重定向的文件......所以如果我打开 sub.domain.com/file/fil1.js 它将打开 index.php这是我不想要的...

但如果我做 /browse 或类似的东西，它会起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:37:26.510

好吧，经过一番折腾和玩弄之后，文件请求不包括子域文件夹，这导致它找不到文件位置。所以我设法对文件进行了手动检查，这就是我得到的。这似乎正是我想要的。我不确定是否有更有效的方法，但这就是它所得到的。

```
#-------------------SUB.DOMAIN.COM---------------------
RewriteCond %{HTTP_HOST} ^sub.domain.com
RewriteCond %{DOCUMENT_ROOT}/sub_folder%{REQUEST_URI} -f
RewriteRule . %{DOCUMENT_ROOT}/sub_folder%{REQUEST_URI} [L]

RewriteCond %{HTTP_HOST} ^sub.domain.com
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteRule . sub_folder/index.php [L]
#-------------------------------------------------------------- 
```

代替

```
RewriteCond %{HTTP_HOST} ^sub.domain.com
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule . sub_folder/index.php [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:46:32.197

您需要更改第二条规则，使其仅在请求为 时应用`^(/)?$`，然后您需要复制 bluehost 告诉您执行的操作。本质上，替换：

```
RewriteCond %{HTTP_HOST} ^sub.domain.com
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule . sub_folder/index.php [L] 
```

他们告诉你使用什么：

```
RewriteCond %{HTTP_HOST} ^sub.domain.com$
RewriteCond %{REQUEST_URI} !^/subfolder/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /subdomain/$1 [L]
RewriteCond %{HTTP_HOST} ^sub.domain.com
RewriteRule ^/?$ /sub_folder/index.php [L] 
```

# php - 使用 mod_rewrite 通过 php check 访问隐藏文件

> ID：13541750
> 
> 赞同：1
> 
> 时间：2012-11-24T13:37:22.803
> 
> 标签：php, apache, mod-rewrite, redirect

我有一堆文件位于网络服务器的非公共区域。这些文件可能非常大，应该可以通过动态生成的临时链接访问（例如有效期为 1 小时）。经常提到的一种解决方案是使用散列并在 php 中检查散列是否仍然有效，然后从 php 脚本流式传输文件：

```
<?
$hash = $_GET['hash'];
if (hash == OK)
{
header("Content-Type: ...");
readfile(‘/path/of/file.zip");
}
?> 
```

假设用户的互联网连接速度非常慢，那么 php 脚本可能会在 30 秒后超时。我认为更好的解决方案是 mod_rewrite，但是如何正确完成？：

```
RewriteEngine On
// Check if hash is ok. If true get real filename from php and stream it's content 
```

# php - AJAX 加载 div 中的 AJAX 电子邮件表单验证？

> ID：13541753
> 
> 赞同：2
> 
> 时间：2012-11-24T13:37:33.793
> 
> 标签：php, jquery, ajax, forms, alerts

我创建了一个非常简单的站点，`.load()`当您单击导航链接时，它会通过 jquery 函数加载其所有内容，并且效果很好。我现在想要的是加载带有 AJAX 样式验证的电子邮件联系表单，在运行 php 提交之前提醒用户有关无效输入字段的信息。

换句话说，用户单击“联系我”的导航链接，一个表单被加载到内容 div 中。如果用户输入了无效的姓名或电子邮件并点击提交，则相应的错误消息将出现在这些输入字段旁边。我真的不在乎表单通过后会发生什么，无论是弹出窗口还是重定向页面。

几周以来我一直在努力解决这个问题，我准备放弃了。表单加载正常，但我无法弄清楚获取 AJAX 加载表单以响应用户而不重新加载页面并清除其字段的基本结构。我什至让 php 表单提交部分完全按照我的意愿工作，但是让客户端脚本与服务器端 php 函数一起运行似乎很困难。

这甚至可能吗？我该怎么办？这种事情的基本概念和工具是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:46:25.613

### 你有什么问题？为什么不能使用简单的 jQuery 验证器插件？

一些例子：

1.  [插件/验证/验证](http://docs.jquery.com/Plugins/Validation/validate)
2.  [jQuery 插件：验证](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)
3.  [插件/验证](http://docs.jquery.com/Plugins/Validation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:02:52.573

我让我的表单使用 jquery 验证插件工作！感谢 Praveen 的建议。这是一个很棒的工具。

根本的问题是我真的没有把头绕在 .load() 上。一旦我使用了 .load() 回调函数，验证运行良好。我创建了一个名为contact.js 的外部javascript 文件，其中包含嵌套在contactPageScript() 函数中的验证插件规则和submitHandler。我用 .load() 回调调用了contactPageScript()，瞧：

```
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"></script>
<script type="text/javascript" src="js/contact.js"></script>

<script>
  $(document).ready(function(){
    $("div#menu ul li a").click(function() {
      var whichPage = $(this).attr('href');
      $('div#page_content').load(($(this).attr('href') + ' #contentB'), function(){
                    if (whichPage == 'contact.html') {
                        contactPageScript();
                    }}
      );
    });
  });
</script>
</head> 
```

当然，验证脚本也可以很好地嵌套在回调函数中，而不是作为外部 .js，但它对我的口味来说太长了。还有一些关于验证规则的小细节需要解决。这是我用作参考的验证代码块：

```
$(document).ready(function() {
  $('#mailform').validate( { 
    rules: {
      fullname: {
        required: true,
        minlength:2
      },
      email: {
        required: true,
        email: true
      }
    },
    messages: {
      fullname: 'Please enter a valid name',
      email: 'Please enter a valid email address'
    },
    submitHandler: function(form) {
       $.post('php/submitForm.php', $('#mailform').serialize(), function() { DO STUFF });
    }
  });
}); 
```

起初我无法让插件脚本在调试期间工作。注意规则后面的多余逗号！还请注意，某些 copypasta 教程中包含隐藏的无效字符！你永远不会知道！我不得不手动重写整个代码以使其验证！

我后来在回调中添加了嵌套的 if/else 语句，以调用站点上需要 jquery/javascript 的所有其他页面的函数。起初我尝试使用开关而不是嵌套的 if/else，但这并不理想。看说明书很有帮助！

干杯。

# jquery - 在 jQuery UI 对话框的 beforeClose 上延迟关闭事件

> ID：13541759
> 
> 赞同：0
> 
> 时间：2012-11-24T13:38:19.097
> 
> 标签：jquery, jquery-ui, css, animation, jquery-ui-dialog

我有以下代码，其中运行在`.in`和`.out`类上的 CSS 动画。我的问题是对话框立即关闭，您根本看不到关闭动画。所以在关闭对话框之前我需要约 500 毫秒的延迟；

```
$.extend( $.ui.dialog.prototype.options, { 
    modal: true, 
    open: function() { 
        $(this).parents('.ui-dialog').removeClass('out').addClass('in'); 
    }
});

$confirm.dialog({

    buttons: {

        "ok": {
            text:'Ok',
            click: function() { $(this).dialog('close'); }
        },

        "cancel": {
            text:'Cancel',
            click: function() { $(this).dialog('close'); }
        }
    },

    beforeClose: function(event, ui) {

        $('.ui-dialog').removeClass('in').addClass('out');

    }

}).dialog('widget').appendTo('.dialogWrapper'); 
```

我尝试添加`return false`到`beforeClose`, 然后手动调用该`.dialog('close')`函数，但这只是运行一个无限循环，手动隐藏对话框似乎是浪费代码（更不用说对话框的覆盖层也需要删除）

对于此事，我将不胜感激。

矽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:43:45.530

这是未经测试的，但我会按照这些思路想象一些东西会让你到达你想去的地方？？？

```
$.extend( $.ui.dialog.prototype.options, { 
    modal: true, 
    open: function() { 
        $(this).parents('.ui-dialog').removeClass('out').addClass('in'); 
    }
});

$confirm.dialog({

    buttons: {

        "ok": {
            text:'Ok',
            click: function() { closeDialog(this); }
        },

        "cancel": {
            text:'Cancel',
            click: function() { closeDialog(this); }
        }

    }).dialog('widget').appendTo('.dialogWrapper');

function closeDialog(element){
        $(element).removeClass('in').addClass('out');
        $(element).delay(500);
        $(element).dialog('close');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:07:20.490

非常感谢大卫·劳埃德·布鲁克斯的回复；这是我在这里获取此代码所需的跳板：

```
// function to close dialog using css animations.
$.fn.animateDialogClose = function() {
    var $dialog = $(this);
    $dialog.parents('.ui-dialog').removeClass('in').addClass('out');
    setTimeout( function() { $dialog.dialog('close'); }, 500);
};

$confirm.dialog({
    buttons: {
        "ok": {
            text:'Ok', class:'btn red',
            click: function() {  }
        },
        "cancel": {
            text:'Cancel', class:'btn',
            click: function() { $(this).animateDialogClose(); }
        }
    }

}).dialog('widget').appendTo('.ui-dialog-perspective-wrapper'); 
```

仍然存在不幸的问题，尽管这仅适用于为其设置的按钮，而不适用于（例如）“X”关闭按钮或退出键。我会投票，但我认为你没有回答我的问题......甚至可能没有答案:(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T20:02:16.787

我决定运行它并对其进行测试，这是您需要的代码，它也更流畅：

```
<script type="text/javascript">
    function showDialog() {
        $('#myDialog').on("dialogbeforeclose", function (event, ui) { });
        $('#myDialog').dialog({
            beforeClose: function myCloseDialog() {
                alert('Closing Dialog Now...');
            }
        });
    }

</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-18T11:53:20.723

这是另一种方法。该`dialogue`函数可以采用`hide`接受以下[http://api.jqueryui.com/dialog/#option-hide的属性](http://api.jqueryui.com/dialog/#option-hide)

您可以通过`effect` `hide`然后设置 a `delay`of `500`，保持大部分原始功能不变，例如。

```
$confirm.dialog({
    hide: {
        effect: 'hide',
        delay: 500
    },
    // etc...
}); 
```

# chat - PHP WebSocket 聊天：私人对话

> ID：13541762
> 
> 赞同：0
> 
> 时间：2012-11-24T13:38:33.760
> 
> 标签：chat, one-to-one, phpwebsocket

我试过那个代码：[http](http://www.flynsarmy.com/2012/02/php-websocket-chat-application-2-0/) ://www.flynsarmy.com/2012/02/php-websocket-chat-application-2-0/ 它工作得很好。但这并不是我真正想要的。

该代码创建了一个“房间”，只有一个 websocket 的“实例”。我希望有像 FB 这样的“一对一对话”一样多的实例。

有人知道如何进行私人对话 websocket 的聊天吗？

**tl;dr：**如果有 3 个对话（6 人），我想自动创建 3 个“房间”。

太感谢了。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:37:39.247

这仍然可以由一个 websocket 服务器实例处理。您只需为每个用户 1 存储相应的用户 2。每次 user1 发送消息时，它只会转发给 user2，反之亦然。当然，为了避免冗余数据，您应该只存储 user1 和 user2 之间的关系一次。

# c# - 无法写入 RichTextBox 控件

> ID：13541765
> 
> 赞同：0
> 
> 时间：2012-11-24T13:38:46.787
> 
> 标签：c#, winforms, richtextbox

我不能在 richTextBox 或 textBox 中写东西，每当我开始写东西时，它就会冻结我的程序。知道它是什么吗？我没有更改文本框的代码或属性中的任何内容。

```
using System.Text;
using System.Windows.Forms;
using System.IO;

public partial class Form1 : Form
{
  public Form1()
  {
    InitializeComponent();
  }

  private void saveToolStripMenuItem_Click(object sender, EventArgs e)
  {
    File.WriteAllText("TextFile1.txt", richTextBox1.Text);
  }

  private void richTextBox1_TextChanged(object sender, EventArgs e)
  {
    richTextBox1.LoadFile ("TextFile1.txt");
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:45:32.710

看起来您正在将文件加载到您正在写入的文本框中：

所以摆脱这段代码：

```
 private void richTextBox1_TextChanged(object sender, EventArgs e)
 {
    richTextBox1.LoadFile ("TextFile1.txt");
 } 
```

尝试将其移动到表单的 OnLoad 方法中（假设您希望在表单打开时填充文本框）：

```
protected override void OnLoad(EventArgs e) {
  base.OnLoad(e);

  richTextBox1.LoadFile ("TextFile1.txt");
} 
```

RichTextBox 还有一个 SaveFile 方法。从您的代码中不清楚“富”文本是否对应用程序很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T13:47:25.980

```
bool _isLoading = false;

private void richTextBox1_TextChanged(object sender, EventArgs e)
{
    if(_isLoading) return;
    _isLoading = true;
    richTextBox1.LoadFile ("TextFile1.txt");
    _isLoading = false;
} 
```

# jsf - 提交父表单但子表单未提交

> ID：13541775
> 
> 赞同：0
> 
> 时间：2012-11-24T13:39:52.340
> 
> 标签：jsf, primefaces

我有一个父表单，这个表单在我的五个选项卡上包含另外 5 个表单。问题是当我提交我的父表单时，父表单上的数据正在提交，但所有子表单都没有在服务器上进行。正如我认为通过提交父表单所有子表单都被忽略。如果我是对的，请为这个问题提出一个解决方案。我非常感谢你们所有人。我正在使用 jsf2.0 primefaces 3.4

* * *

将父表单和子表单合并为一个表单后，我的页面出现了一些问题。我无法更新`<h:textarea>`行选择事件。建议我在更新事件上出错的地方我的代码在下面

```
<h:form id="mainForm">
    <h:panelGrid>
    <p:accordionPanel activeIndex="#{salesLetterProBean.activeIndex}">
        <p:tab title="Product Introduction" id="productinfooTab">
            <p:panel header="Please Fill In The Details" style="padding:5px;"
                id="productInfoPanel">
                <h:panelGrid  cellpadding="1" cellspacing="0" columns="1"
                    columnClasses="a,b,c,d,e" rowClasses="plainRow,shadedRow">
                    <h:outputLabel value="Introductory HeadLine:" class="field-title"
                        id="proInfoPanelGrid"/>
                    <p:inputTextarea value="#{salesLetterProBean.productIntroductoryLineRow.description}"
                        id="proIntroductorySentence"
                        style="width:1060px;height:400px;" effectDuration="400" />
                </h:panelGrid>
                <p:dataTable var="productIntroSentenceList" first="1"
                    value="#{salesLetterProBean.productIntroductorySentenceList}"
                    paginator="true" rows="5" rowsPerPageTemplate="5,10,15,20,25"
                    rowIndexVar="rowIndex" rowKey="#{productIntroSentenceList.id}"
                    selection="#{salesLetterProBean.productIntroductoryLineRow}"
                    selectionMode="single" update="proIntroductorySentence">
                    <p:ajax event="rowSelect" listener="#{salesLetterProBean.onRowSelect}" />
                    <p:column headerText="#">
                        <p:cellEditor>
                            <f:facet name="output">
                                <h:outputText value="#{rowIndex}" />
                            </f:facet>
                            <f:facet name="input">
                                <p:inputText value="#{rowIndex}" />
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column headerText="Description">
                        <p:cellEditor>
                            <f:facet name="output">
                                <h:outputText value="#{productIntroSentenceList.description}" />
                            </f:facet>
                            <f:facet name="input">
                                <p:inputText value="#{productIntroSentenceList.description}" />
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column headerText="Select">
                        <p:commandLink process="@none">
                            <!--  -->
                            <span title="Select" class="ui-icon ui-icon-check"/>
                        </p:commandLink>        
                    </p:column>
                </p:dataTable>
                <h:panelGrid cellpadding="1" cellspacing="0" columns="1"
                    columnClasses="a,b,c,d,e" rowClasses="plainRow,shadedRow">
                    <h:outputLabel value="Feature List:" class="field-title" />
                    <p:inputTextarea style="width:1060px;height:400px;"
                        effectDuration="400" id="featureList"
                        value="#{salesLetterProBean.featureList}"/>
                    <h:outputLabel value="How Your Product Solve The Problems :"
                        class="field-title" />
                    <p:inputTextarea style="width:1060px;height:400px;"
                        effectDuration="400" id="prbSolutions"
                        value="#{salesLetterProBean.problemSolutions}" />
                </h:panelGrid>
                <h:commandButton value="Previous"
                    actionListener="#{applicantManagedBean.changeActiveIndex}"
                    immediate="true" class="defaultButton" />
                <h:commandButton value="   Next   "
                    actionListener="#{applicantManagedBean.changeActiveIndex}"
                    immediate="true" class="defaultButton" />
            </p:panel>
        </p:tab>
    </p:accordionPanel> 
    </h:panelGrid>
</h:form> 
```

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-03T08:40:40.710

不允许嵌套表单，但您可以将多个表单作为堆栈。

# java - 如何在 Stripes ActionBean 方法的不同模块中注入 EJB Bean？

> ID：13541776
> 
> 赞同：2
> 
> 时间：2012-11-24T13:39:58.177
> 
> 标签：java, ejb, stripes

我正在编写包含三个模块的 JavaEE 应用程序。在 web 模块中，我需要注入 ejb bean（在 Stripes 动作 bean 方法中），它位于 ejb 模块中。

所以我跟着这个教程 [http://www.stripesframework.org/display/stripes/Stripes+Injection+Enricher](http://www.stripesframework.org/display/stripes/Stripes+Injection+Enricher)

我的代码是这样的>

```
@EJB
private CustomerServiceLocal customerService; //service layer for customer 
```

在 GlassFish 上部署后，它返回以下异常>

```
No EJB found in JNDI, tried the following names:
list of JNDI that it tried. 
```

bean声明如下>

```
@Stateless
@Local(value=CustomerServiceLocal.class)
@LocalBean
public class CustomerService implements CustomerServiceLocal { 
```

界面>

```
@Local
public interface CustomerServiceLocal 
```

我不知道哪些代码可能是相关的，所以如果我错过了什么，请告诉我应该在这里复制什么。

那么你知道如何解决它吗？如何在 Stripes ActionBean 方法的不同模块中设置 EJB Bean？

似乎条纹注入浓缩器在某种程度上配置错误。

问题是我需要服务层工作，因为它负责使用 DB，没有它，我只能使用临时本地对象，这是无用的。

此致，

奥西里斯

# java - 当我序列化一个对象时出现 StackOverflowError

> ID：13541778
> 
> 赞同：2
> 
> 时间：2012-11-24T13:40:05.430
> 
> 标签：java, serialization, stack-overflow

我想用这种方法对一个对象进行序列化：

```
public void serializ(CRDT m) throws IOException {
    ByteArrayOutputStream byteOutput = new ByteArrayOutputStream();
    ObjectOutputStream stream = new ObjectOutputStream(byteOutput);
    stream.writeObject(m);
    sumMemory = byteOutput.size();

    stream.flush();
    stream.close();
    byteOutput.flush();
    byteOutput.close();
} 
```

我有一个例外`java.lang.StackOverflowError`

```
Exception in thread "main" java.lang.StackOverflowError
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1169)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
    ... 
```

我读了一些论坛，我需要重新实现这些`writeObject / readObject`方法。这是唯一可能的解决方案吗？以及如何重新实现`writeObject / readObject`

我要序列化的对象是： http: [//pastebin.com/D1kEidtn](http://pastebin.com/D1kEidtn)

导致错误的两个类是： [pastebin.com/Sb3X0Quq](http://www.pastebin.com/Sb3X0Quq)并[在此处输入链接描述](http://www.pastebin.com/cw15LQ1z)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T14:18:37.213

CRDT 是被序列化的 Object m 的超类。错误是派生自 CRDT 的类似乎有对自身的引用，导致无限递归
您在堆栈跟踪中看到了这一点。
Tipp 通过使用调试器或在您的 serialize() 方法的开头添加 System.out.println(m.getClass()) 找出对象 CRDT m: 的类。然后，当您知道该类时，请检查该对象是否具有对其自身的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T14:22:29.590

您还没有发布具体的类，因此很难发现错误，但
简而言之，任何递归算法都可能溢出堆栈并且堆栈是有限的。
对于深度嵌套的对象图，Java 内置序列化需要过多的堆栈空间。
有关详细信息，请参阅
[http://c2.com/cgi/wiki?JavaSerializationIsBroken](http://c2.com/cgi/wiki?JavaSerializationIsBroken)
[http://c2.com/cgi/wiki?JavaSerializationAndTheStack](http://c2.com/cgi/wiki?JavaSerializationAndTheStack)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T15:05:17.930

我只是添加`-Xss512m`到 Netbeans，它的工作：D

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-27T22:32:21.970

顺便说一句，我有同样的问题，但看起来我的与检查点持续时间太大有关。看起来，Spark 在写出它时会维护某种对象链接，如果持续时间太大，它将导致堆栈溢出。

# c# - 如何在 C# 中编写这个 C++ 函数？

> ID：13541779
> 
> 赞同：-6
> 
> 时间：2012-11-24T13:40:09.300
> 
> 标签：c#, c++

我在 C++ 中有以下函数：

```
void put8At ( unsigned char *b, int pos, int v )
{
    union
    {
        short a;
        unsigned char b[2];
    } u;

    u.a = v;
    b += pos;
    *b = v & 0xff;
} 
```

你将如何在 C# 中编写代码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T13:43:39.843

以下是我将如何在 C++ 中对其进行编码：

```
void put8At ( unsigned char *b, int pos, int v )
{
    b[pos] = v & 0xff;
} 
```

现在这可能更容易转换为 C#。

# android - Android：XML 资源（值）

> ID：13541783
> 
> 赞同：1
> 
> 时间：2012-11-24T13:41:01.763
> 
> 标签：android, xml

我必须为我的应用程序做一些翻译。但是当我编译我的应用程序时，控制台会写：

```
[2012-11-24 15:31:43 - com.ddm.ctimer.MainForm] W/ResourceType( 4892): Bad XML block: header size 297 or total size 0 is larger than data size 0
[2012-11-24 15:31:43 - com.ddm.ctimer.MainForm] C:\Users\Roman\Desktop\NewTimer\NewTimer\res\values-fr\strings.xml:6: error: Found text "
[2012-11-24 15:31:43 - com.ddm.ctimer.MainForm] В В В В  " where item tag is expected 
```

代码：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="app_name">CTimer</string>
<!--RUS strings-->
    <!--MainForm-->
    <string name="main_form_sec">Chronomètre</string>
     <string name="main_form_tim"> Minuterie </string>
     <string name="main_form_set"> Paramètres </string>
<string name="main_form_bg">#000000</string>

    <!--Menu-->
    <string name="menu_about">À propos du programme</string>
    <string name="menu_buy">Supprimer les annonces</string>
    <!--Preferences(Settings)--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:58:05.980

最好使用 colors.xml 作为颜色：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="main_form_bg">#000000</color>
</resources> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T14:02:22.743

很可能您的编码有问题，资源文件应该以 UTF-8 编码。

请尝试用简单的英语替换**“Chronomètre”**，看看您的错误是否消失或移动到下一个“已翻译”行。

# iphone - UITableVIew 中来自 URL 的图像问题

> ID：13541785
> 
> 赞同：0
> 
> 时间：2012-11-24T13:41:15.350
> 
> 标签：iphone, objective-c, xcode, image, uitableview

我注意到我的 UITableView 有一些奇怪的行为。

我想在 TableViews ImageView 中显示缩略图。该图像位于我的客户端服务器上，并且该图像的链接是在 XML 文件中获取的。每当我从 XML-Parser 获取 URL 并尝试在 ImageView 中显示来自该链接的图像时，我都没有得到预期的结果。TableViews ImageView 保持为空。

```
NSString * imagePath = [[self.parseResults objectAtIndex:indexPath.row] objectForKey:@"imagelink"];

NSURL * imageURL = [NSURL URLWithString:imagePath];
NSData * imageData = [NSData dataWithContentsOfURL:imageURL];
UIImage * image = [UIImage imageWithData:imageData];

cell.imageView.image = image;

return cell; 
```

但是，当我硬编码 URL 时，它工作得很好：

```
NSString * imagePath = @"http://www.test.com/test.jpg";

NSURL * imageURL = [NSURL URLWithString:imagePath];
NSData * imageData = [NSData dataWithContentsOfURL:imageURL];
UIImage * image = [UIImage imageWithData:imageData];

cell.imageView.image = image;

return cell; 
```

这将在 ImageView 中显示图像。

我已经使用 NSLog 来比较 URL，但我没有发现任何区别。但是，当我进行字符串比较时，链接似乎有所不同。

有什么特殊的编码之类的吗？

谢谢你的帮助！

# c# - .NET WinForms 应用程序中未显示数据库异常

> ID：13541786
> 
> 赞同：1
> 
> 时间：2012-11-24T13:41:16.863
> 
> 标签：c#, .net, winforms, sqlconnection, sqldataadapter

我使用 VS2010 模板之一创建了一个 WinForms 应用程序，但发现它在调试模式下不会引发数据库异常。我必须将方法显式包装到 try-catch 块中以查看错误，否则它只会中断方法的执行而不会显示任何错误。我没有修改应用程序配置中的某些内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T13:54:48.730

您可能正在`Form.Load`事件中连接到数据库（`Form1_Load`例如）。当满足以下条件时，Form.Load 事件中引发的异常不会冒泡堆栈跟踪：

1.  您在 64 位版本的 Windows 上运行（您的应用程序是为 32 位还是 64 位构建的并不重要；只有操作系统的位深度）
2.  您正在使用 Visual Studio 调试应用程序（使用异常捕获的默认选项）

有关更多信息，请参阅此博客文章：[http ://blog.adamjcooper.com/2011/05/why-is-my-exception-being-swallowed-in.html](http://blog.adamjcooper.com/2011/05/why-is-my-exception-being-swallowed-in.html)

# cmake - 尽管存在符号，但 CMake 中的符号查找失败

> ID：13541788
> 
> 赞同：3
> 
> 时间：2012-11-24T13:41:46.307
> 
> 标签：cmake, lookup, symbols

我正在尝试使用 CMake 检查符号 getaddrinfo_a 是否存在：

```
list(APPEND CMAKE_REQUIRED_DEFINITIONS -D_GNU_SOURCE)
check_symbol_exists(getaddrinfo_a netdb.h HAVE_GETADDRINFO_A)
list(REMOVE_ITEM CMAKE_REQUIRED_DEFINITIONS -D_GNU_SOURCE) 
```

虽然在 netdb.h 中定义了 getaddrinfo_a（假设 _GNU_SOURCE 已定义），但 CMake 无法找到它：

```
-- Looking for getaddrinfo_a
-- Looking for getaddrinfo_a - not found. 
```

知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T09:09:02.623

根据[getaddrinfo_a](http://www.kernel.org/doc/man-pages/online/pages/man3/getaddrinfo_a.3.html)手册页，该功能需要`libanl`在链接时。`CMAKE_REQUIRED_LIBRARIES`在调用之前尝试设置`check_symbol_exists`：

```
list(APPEND CMAKE_REQUIRED_DEFINITIONS -D_GNU_SOURCE)
list(APPEND CMAKE_REQUIRED_LIBRARIES anl)
check_symbol_exists(getaddrinfo netdb.h HAVE_GETADDRINFO_A) 
```

# c# - 那么用户已经登录了，我该如何实现重定向到主页呢？(ASP MVC 3)

> ID：13541789
> 
> 赞同：0
> 
> 时间：2012-11-24T13:42:22.203
> 
> 标签：c#, asp.net-mvc-3

我很困惑如何实现这个功能。最初，当用户访问网站时，他们会看到登录页面。

```
[HttpGet]
public ActionResult SignIn()
{
  return View() ;
} 
```

当用户输入详细信息时，它会调用：

```
[HttpPost]
public ActionResult Sign(SignInModel signInModel)
{
   if(service.ValidateUser(signInModel.userName,signInModel.passWord))
    {
        FormsAuthentication.SetAuthCookie(signInModel.userName, true);return           
        return RedirectToAction("Index", "Home");
    } 
} 
```

但是，作为测试，我决定返回登录页面，因此**localhost/Account/SignIn**，但它不会将我重定向回主页..所以我尝试了一些来自 SO 的类似问题的建议答案：

```
[HttpGet]
public ActionResult SignIn()
{
  if(HttpContext.User.Identity.IsAuthenticated) 
  {
            return RedirectToAction("Index", "Home");
  }
  return View() ;

} 
```

但我不明白它是如何工作的，所以我决定调试它。但事实证明它使用了错误的`Identity`.

为了解释，我使用默认的 MVC 模板来让我的项目正常工作，我在该模板上使用 James 登录。然而，在我自己的项目中，我使用 Peter 登录。

但是`HttpContext.User.Identity`在我自己的项目中是指默认网站的詹姆斯**而不是**彼得..所以那里显然有问题，但是什么？

TL；DR 我如何保留 StackOverflow 之类的信息？只有在会话到期或用户退出时，用户才能看到登录页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:03:44.253

如果我没有正确理解它，请纠正我。

*   您在 localhost 上托管这两个网站。很可能是不同的端口号。
*   您首先登录了虚拟网站（模板网站）。你得到了一个身份验证cookie。
*   您没有退出虚拟网站。因此，您的身份验证 cookie 仍然有效。
*   然后，您启动了实际的网站（您的项目）。当您请求登录页面时，您之前收到的 cookie 也会发送到服务器。发生这种情况的原因是 cookie 的范围仅限于域`localhost`和应用程序路径`\`。这两个网站都匹配。
*   您将自己视为已登录和其他人。

**你能做些什么来解决这个问题？**

退出两个网站。不要登录虚拟网站。登录到实际网站。玩得开心。

**更永久的修复？**

要看。问题的发生是因为 cookie 的范围太松。如果需要在 上运行这两个网站`localhost`，那么您可以将 IDE 配置为在文件夹下启动它们。意思是虚拟网站在 启动，`http://localhost:1234/dummy/`实际在 启动`http://localhost:4321/actual`。对于普通 cookie，您将直接设置路径。对于 auth cookie，您可以使用该`FormsAuthentication.GetAuthCookie`方法。

来源：http : [//telligent.com/support/telligent_evolution_platform/w/documentation/common-things-to-check-when-using-forms-authentication.aspx](http://telligent.com/support/telligent_evolution_platform/w/documentation/common-things-to-check-when-using-forms-authentication.aspx)

```
HttpCookie cookie = FormsAuthentication.GetAuthCookie(username, true);
cookie.Path = "/dummy";
Response.Cookies.Add(cookie); 
```

**编辑：**

似乎普遍的共识是不设定路径。[https://stackoverflow.com/a/6940281/30007](https://stackoverflow.com/a/6940281/30007)

> Cookie 路径区分大小写，因此：
> 
> ```
> http://site/path
> http://site/PATH 
> ```
> 
> 浏览器有 2 个不同的 cookie - 它们（IE、FX、Safari、Opera 或 Chrome）都不会将 /PATH 的 cookie 发送到 /path，反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T15:39:11.867

我认为您正在寻找的答案在那里：[如何将 /Home 重定向到根目录？](https://stackoverflow.com/questions/5072925/how-do-i-301-redirect-home-to-root)

**编辑：**

在这种情况下，试试这个：当你生成登录链接时，你可能想要传递`returnUrl`参数：

```
@Html.ActionLink("Log On", "LogOn", "Account", new { returnUrl = Request.Url }, null) 
```

在您的具体情况下，您可以通过`returnUrl`成为主页。很抱歉造成混乱。

希望这可以帮助

# jsf-2 - 如何在 JSF 2.0 的 panelGrid 中填充数组列表？

> ID：13541791
> 
> 赞同：1
> 
> 时间：2012-11-24T13:42:31.550
> 
> 标签：jsf-2, arraylist, populate, uirepeat

从arraylist填充数据时，jsf panelgrid出现问题。我收到错误消息`javax.el.PropertyNotFoundException: /facelet/crew/searchCrew.xhtml @14,95 value="#{searchCrewBean.searchCrewParam.staffNum}": Target Unreachable, 'searchCrewParam' returned null`

请在下面找到我的代码，请帮助我..

JSF 代码如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">
<h:body>
    <ui:composition template="/facelet/layout/mainlayout.xhtml">
    <ui:define name="content">
        <h:form>
            <h:panelGrid columns="7" border="2" title="Crew information"
                rendered="true">
                <f:facet name="header">
                    <h:panelGroup border="2">
                        <h:inputText value="Staffnum" size="6" />
                        <h:inputText value="Surname" size="10" maxlength="25" />
                        <h:inputText value="Age" size="2" />
                        <h:inputText value="Rank" size="3" />
                        <h:inputText value="Type" size="1" />
                        <h:inputText value="Scexpiry" size="10" />
                        <h:inputText value="Mailboxno" size="4" />
                    </h:panelGroup>
                <ui:repeat var="o" value="#{searchCrewBean.listOfSearchCrew}">
                    <h:panelGroup rendered="true">
                        <h:inputText id="staffnum" value="o.staffNum" size="6" />
                        <h:inputText id="surname" value="o.surName" size="10"
                            maxlength="25" />
                        <h:inputText id="age" value="o.age" size="2" />
                        <h:inputText id="rank" value="o.rank" size="3" />
                        <h:inputText id="type" value="o.type" size="1" />
                        <h:inputText id="scexpiry" value="o.scExpiry" size="10" />
                        <h:inputText id="mailboxno" value="o.mailBoxNo" size="4" />
                    </h:panelGroup>
                </ui:repeat>

            </h:panelGrid>
        </h:form>
    </ui:define>
</ui:composition>
</h:body>
</html> 
```

我的支持豆在这里...

```
@ManagedBean(name="searchCrewBean")
public class SearchCrewBean {
    private ArrayList<Crew> listOfSearchCrew ;

        public ArrayList<Crew> getListOfSearchCrew() {
        return listOfSearchCrew;
    }

    public void setListOfSearchCrew(ArrayList<Crew> listOfSearchCrew) {
        this.listOfSearchCrew = listOfSearchCrew;
}

//business logic goes here to add listofcrew
    } 
```

还有我这里的船员班...

公共类船员{

```
private String staffNum;

private String surName;

private Integer age;

private String rank;

private Character type;

private String scExpiry;

private Long mailBoxNo;
} 
```

@Akselwillgert 我正在加载人员列表，如下所示 private ArrayList listOfCrew ；私有 ArrayList listOfSearchCrew ;

```
public void loadCrew()
{
    listOfCrew = new ArrayList<Crew>();
    listOfCrew.add(new Crew("000212", "HATHELY", 70, "CPT",'T',"13.03.2013",Long.parseLong("1012")));
    listOfCrew.add(new Crew("000213", "MIKE", 52, "F/O",'T',"14.03.2013",Long.parseLong("1013")));
    listOfCrew.add(new Crew("000214", "JOHN", 45, "S/O",'T',"15.03.2013",Long.parseLong("1014")));
    listOfCrew.add(new Crew("000215", "NOTE", 35, "CPT",'T',"16.03.2013",Long.parseLong("1015")));
    listOfCrew.add(new Crew("000216", "KARTHIK", 27, "CPT",'T',"17.03.2013",Long.parseLong("1016")));
    listOfCrew.add(new Crew("000217", "JESSIE", 30, "PUR",'C',"18.02.2013",Long.parseLong("1017")));
    listOfCrew.add(new Crew("000218", "LISSA", 29, "F/A",'C',"19.02.2013",Long.parseLong("1018")));
    listOfCrew.add(new Crew("000219", "MARKUS", 40, "CPT",'T',"13.03.2013",Long.parseLong("1019")));
    listOfCrew.add(new Crew("000220", "JONTHAN", 46, "F/O",'T',"13.03.2013",Long.parseLong("1020")));
    listOfCrew.add(new Crew("000221", "BATMAN", 33, "S/O",'T',"13.03.2013",Long.parseLong("1021")));

} 
```

仍然面临同样的问题...

```
@ManagedBean(name="searchCrewBean")
public class SearchCrewBean {

private SearchCrew searchCrewParam;
}

public class SearchCrew {

private String staffNum;

private String surName;

private String rank;
//getters and setters goes here..
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T18:58:21.200

所以如果你`loadCrew`在同一个类中有这个方法，试试这个

```
public ArrayList<Crew> getListOfSearchCrew() {
  if( listOfSearchCrew == null ) {
     loadCrew() ;
   }
   return listOfSearchCrew;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:04:52.267

我在这里犯了一个错误，在支持 bean 中我忘记实例化搜索组参数，如下所示 `@ManagedBean(name="searchCrewBean") public class SearchCrewBean { private SearchCrew searchCrewParam; // old line private SearchCrew searchCrewParam= new SearchCrew(); // newline }`

为了在 jsf 页面中显示 arraylist，我使用`h:dataTable`了 jsf 中的标签，这很有帮助。参考[http://www.mkyong.com/jsf2/jsf-2-datatable-example/](http://www.mkyong.com/jsf2/jsf-2-datatable-example/)

# reporting-services - 根据父报表中点击的字段值设置子报表参数

> ID：13541798
> 
> 赞同：0
> 
> 时间：2012-11-24T13:43:34.890
> 
> 标签：reporting-services

我正在尝试在 ssrs 2005 中设计一个子报表，其中子报表的参数值设置在父报表中单击的字段值上。

例如，父报表有一个部门名称列。如果有人单击部门名称值之一，该值将作为参数传递给子报表，然后子报表将根据该部门值显示图表。

我尝试针对部门名称字段创建一个操作并选择“转到报告”选项，选择子报表的名称并将部门字段值作为参数传递，但是当我运行报表并单击字段值时，它会在单独的窗口作为单独的报告。

我正在寻找一种解决方案，当有人单击父报表的部门字段值而父报表保持可见时，刷新子报表的图表。

有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T10:14:02.327

以下答案和屏幕截图基于 SSRS 2008。如果我没记错的话，它在 SSRS 2005 中以类似的方式工作（SSRS 2005 的[文档](http://msdn.microsoft.com/en-us/library/ms159847%28v=sql.90%29.aspx)也暗示了这一点）。

以下是基本步骤：

*   单击带有字段的文本框，然后选择`Action`属性
*   选择“转到报告”操作，指定您的子报告
*   “添加”一个参数，并将字段的值传递给它

这是用于设置的 2008 对话框的屏幕截图：

![带有参数的子报表对话框](../Images/aef49e92f10a0723f5685b8647a6ec49.png)

# actionscript - 在实例中覆盖 MovieClip 的变量

> ID：13541800
> 
> 赞同：0
> 
> 时间：2012-11-24T13:44:07.230
> 
> 标签：actionscript, instance-variables, overriding

假设我有一个movieclip，在这个movieclip 中我定义了一些Actionscript 变量。例如

```
var majorValue:Number = 20;  
var minorValue:Number = 10; 
```

默认情况下，舞台上此影片剪辑的每个实例都将具有这些变量，并设置为这些值。现在，假设我在舞台上有这个影片剪辑的三个实例，我将它们称为“Moe”、“Larry”和“Curly”。假设我想将 Moe 和 Larry 作为影片剪辑的默认实例，但我想调整“Curly”实例，使其 majorValue 为 50，minorValue 为 15。我该怎么做呢？

我已经尝试通过指定来做到这一点：

```
Curly.majorValue = 50;
Curly.minorValue = 15; 
```

在父时间轴中，但这似乎不起作用，因为动作脚本似乎首先在父剪辑中执行，然后在子剪辑中执行。所以换句话说，我对“Curly”实例特殊值的声明被剪辑的默认声明覆盖，这些声明在父剪辑的动作脚本之后执行。

有谁知道如何为特定实例覆盖影片剪辑的默认变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:40:33.737

关于使用时间线有一个古老的提示，“如果有疑问，请添加关键帧”。实际上，更好的建议是尽可能避免完全使用时间线。

我认为你对正在发生的事情的总结可能是正确的。实际上，您正在尝试在实例被正确实例化之前更新它的属性。当它被实例化时，这些值被重置为默认值。

解决方案是添加一个额外的框架，并将设置属性的代码放在第二个框架中（连同一个`stop`动作）。这将确保在实例化实例后执行代码。

# mysql - 为单行关系创建关系表？

> ID：13541801
> 
> 赞同：0
> 
> 时间：2012-11-24T13:44:31.413
> 
> 标签：mysql, database, relationship

我有以下结构：

```
-- Table Users ---
-  User1
-  User2
-  User3

-- Table Roles ---
-  Role1
-  Role2
-  Role3
-  Role4 
```

每个用户都必须有一行，不多也不少。我应该创建一个新表，例如。`user_roles" 并在其中存储用户角色，例如：

```
-- Table user_roles --
-  user_id = User1     role_id = Role2
-  user_id = User2     role_id = Role1
-  user_id = User3     role_id = Role4 
```

或者，我应该将用户角色存储在`Users`表中吗？由于每个用户始终只有一个角色，我认为没有理由不将其保留在`Users`表中。我的想法是正确的还是应该放在单独的表格中？很简单的问题，但我想了很久。过去我一直把“钥匙”放在`Users`桌子上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T13:49:04.113

为了强制每个用户*都*必须有一个角色，你应该在 users 表中添加一个 role_id，创建它`not null`并引用角色表

```
create table roles 
(
  id integer primary key,
  role_name varchar(50) not null
);

create table users
(
   id integer not null primary key,
   username varchar(50) not null,
   role_id integer not null,
   ... other columns ...
);
alter table users 
   add constraint fk_users_rol 
   foreign key (role_id) references roles(id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:49:42.680

如果规范不会改变，您可以将 RoleID 存储在用户表中。为了扩展，如果您希望将来支持每个用户的更多角色，您可能有 UserRoles 表。目前：

```
Users(UserID, UserName, ..... RoleID); 
```

# javascript - 设置正确的 JS 继承所必需的“构造函数”属性吗？

> ID：13541802
> 
> 赞同：0
> 
> 时间：2012-11-24T13:44:48.627
> 
> 标签：javascript, inheritance, properties, constructor

> **可能重复：**
> [为什么要设置原型构造函数？](https://stackoverflow.com/questions/8453887/why-is-it-necessary-to-set-the-prototype-constructor)

我很难理解在构建层次结构时将 javascript 对象的“构造函数”属性设置为子类的必要性。我发现下面的代码在不更改构造函数属性的情况下完成了预期的操作，但在我发现的关于该主题的几乎所有参考资料中，构造函数都是明确设置的。我错过了什么吗？（我也没有在 ECMAScript 规范中找到任何明确的使用）。

```
A = function() {
    this.value = "a";

    this.A = function() {
        window.alert( this.value + " instanceof A : " + ( this instanceof A ) );
    }
}

B = function() {
    this.value = "b";

    this.B = function() {
        window.alert( this.value + " instanceof B : " + ( this instanceof B ) );
    }
}

B.prototype = new A();

test = function() {
    var b = new B();
    b.A();
    b.B();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:55:23.723

首先，正确的 JS 继承意味着将方法放入原型中：

```
var A = function() {
    this.value = "a";
};

A.prototype.A  = function() {
        window.alert( this.value + " instanceof A : " + ( this instanceof A ) );
};

var B = function() {
    this.value = "b";
}; 
```

其次，在建立原型链时不要运行构造函数：

```
B.prototype = Object.create( A.prototype ); 
```

每当您重新分配整个`.prototype`时，您都会完全覆盖该对象。因此需要重新分配构造函数属性（如果要使用它）：

```
B.prototype.constructor = B;

B.prototype.B = function() {
    window.alert( this.value + " instanceof B : " + ( this instanceof B ) );
}; 
```

`Object.create`旧浏览器不支持，但您可以执行以下操作：

```
Object.create = Object.create || function( proto ) {
     if( proto == null ) {
         return {};
     }
     function f(){}
     f.prototype = proto;
     return new f();
}; 
```

# javascript - jQuery无限缩略图滚动循环

> ID：13541804
> 
> 赞同：1
> 
> 时间：2012-11-24T13:45:09.030
> 
> 标签：javascript, jquery

我正在开发一个无限循环的图像缩略图滚动。我让滚动部分工作但不是循环。

这是我所做的现场演示[http://jsfiddle.net/tVbkM/1/](http://jsfiddle.net/tVbkM/1/)

HTML：

```
<div id="a_top">Top</div>
  <div id="s_area">
   <div id="s_container">
    <div id="s_cont">
      <img class="img_none" src="http://tinyurl.com/buev4y2" width="175" height="175" />
      <img class="img_none" src="http://tinyurl.com/buev4y2" width="175" height="175" />
      <img class="img_none" src="http://tinyurl.com/buev4y2" width="175" height="175" />
      //// 18 images in total.

    </div>
  </div>
</div>
<div id="a_down">Down</div> 
```

CSS：

```
 img {width:175px; height:175px; background-color:#ccc; text-align:center; vertical-align:middle;}
 #a_top { width:73px; height:22px; margin:0px auto; cursor:pointer; background-color:#ccc; text-align:center; magin:10px; }
 #s_cont { height:auto; width:auto; margin:0px; padding:0px;}
 #s_area { width:185px; margin:0px auto;  height:555px; overflow:hidden;}
 #a_down { width:73px; height:22px; margin:0px auto; cursor:pointer;  background-color:#ccc; text-align:center; magin:10px;}
 .img_none { border:#000 solid 1px; margin:4px; cursor:pointer;}
 .img_select { border:#642d8a solid 4px;  margin:1px;}
 #s_container { height:auto; width:100%;} 
```

脚本：

```
$("#s_area img").click(function() {
    $("#s_area img.img_select").removeClass("img_select");
    $("#s_area img").addClass("img_none");
    $(this).removeClass("img_none");
    $(this).addClass("img_select");
    var bagName = $(this).attr("link");
    $("#nxt_stp a").attr("href", bagName + ".html");
    return false;
});
var h = $("#s_container").height();

function setIt() {
   ///alert($("#s_container").offset().top);
   ///alert($("#s_container img").outerHeight());
    var offset = Math.abs((($("#s_container").offset().top) - 22) / 185);
    var roundoff = (Math.round(offset)) * 185;
    $("#s_area").stop().animate({
        scrollTop: roundoff
    }, 800);
}

$("#a_top").mousedown(function() {
    $("#s_area").stop().animate({
        scrollTop: 0
    }, 5000, function() {
        $("#s_cont img:last").before("#s_cont img:first");
    });
}).mouseup(function() {
    setIt();
});

$("#a_down").mousedown(function() {
    $("#s_area").stop().animate({
        scrollTop: h
    }, 5000, function() {
        $("#s_cont img:first").after("#s_cont img:last");
    });
}).mouseup(function() {
    setIt();
}); 
```

# .htaccess - URL 问题中的目录文件夹不是唯一的（删除 .html 扩展名）

> ID：13541807
> 
> 赞同：1
> 
> 时间：2012-11-24T13:45:45.450
> 
> 标签：.htaccess

我有我的重写规则来删除 .html 扩展名。工作正常，除了一个特定的 .html 文件，该文件与其所在的目录同名。换句话说，目录文件夹在 URL 中不是唯一的，例如 test/test.html。

这会导致浏览器显示目录结构而不是重定向到文件。

有人知道解决方法吗？

我的 .htaccess 文件目前是：

```
RewriteEngine on

RewriteOptions inherit

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html 
```

谢谢

开发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:39:06.227

不太确定试试。

```
RewriteEngine on
RewriteOptions inherit
RewriteRule /test/$1 [L]
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html 
```

# ajax - Ajax 调用期间会发生什么？

> ID：13541810
> 
> 赞同：3
> 
> 时间：2012-11-24T13:46:03.397
> 
> 标签：ajax, jquery, ajaxcontroltoolkit, ajax4jsf

你们能告诉我ajax浏览器后面发生了什么吗...我只知道不刷新页面所有数据都已加载...

这是我的代码

```
<script>
function loadXMLDoc()
{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","ajax_info.txt",true);
xmlhttp.send();
}
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T14:02:33.230

当您发出 AJAX 请求时，您的浏览器会向给定地址发送 HTTP 请求。请求另一端的服务器做出响应，并将数据返回给您的浏览器。这与您导航到新网页时发生的事情相同。

AJAX 的不同之处在于，它不是导航到新页面并直接显示它，而是获取响应数据并将其封装在 JavaScript 变量中。然后可以使用 JavaScript 操作此变量并动态插入到您的页面中。

就是这样！唯一可能对您来说有点神秘的是这行：

```
xmlhttp.onreadystatechange=function() 
```

它的作用是将事件附加到`xmlhttp`对象，该对象实际执行请求。每次对象的“就绪状态”更改时都会触发该事件。“就绪状态”是请求状态的一种状态指示器。AJAX 请求一般会经历五个阶段：

*   未发送 (0)
*   已打开 (1)
*   HEADERS_RECEIVED (2)
*   正在加载 (3)
*   完成 (4)

在请求达到“完成”阶段之前，您的数据不可用。通过检查就绪状态代码 4，您实际上是在检查请求是否已完成。请注意，在某些浏览器中，您还可以使用上面定义的常量来检查状态，但是因为这些常量并不是在所有浏览器中都通用定义的（Opera 是一个明显的例外），但最好还是坚持检查数字代码。

还值得一提的是，并非所有的浏览器都必须访问所有就绪状态。代码 4 几乎是一个安全的选择，但一些较早的代码并不总是被实施。本文对该主题进行了更深入的探讨：http: [//www.ibm.com/developerworks/web/library/wa-ajaxintro3/](http://www.ibm.com/developerworks/web/library/wa-ajaxintro3/)。

与就绪状态代码一起检查的另一件事是 HTTP 状态代码。您检查它是否等于 200，因为代码 200 表示请求正常执行。当请求未成功完成时，其他代码将返回给您。可以在此处找到 HTTP 代码列表[http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)。

# algorithm - 理论上知道您需要多么强大的微控制器来运行您的程序？

> ID：13541811
> 
> 赞同：7
> 
> 时间：2012-11-24T13:46:05.643
> 
> 标签：algorithm, cpu, processing, microcontroller

有大量的微控制器，甚至不同级别的 arduino 提供比上一个更多的功率，是否有一种数学方法或某种方法可以知道您需要多少处理能力，仅通过分析来运行您设计的程序为了选择合适的微？

无需反复试验。即不只是尝试它，如果它太慢购买下一个芯片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:29:52.263

我不得不对尚不存在的计算机系统进行性能预测。诸如周期时间比率之类的东西只能提供一个非常粗略的指导。一般来说，我不得不求助于模拟，这是我能在实际硬件上进行测量的最接近的方法。

也就是说，您可能能够找到与您的代码类似的基准测试数字，这至少可以为您提供一个起点。

我不会一次处理一个芯片来做到这一点——你的代码可能有一个问题，它对于任何可行的芯片来说都太慢了。我会尝试找到一个足够快的芯片，如果它比需要的快得多，就开始工作。

# google-chrome-extension - 谷歌浏览器扩展：弹出窗口处理

> ID：13541814
> 
> 赞同：0
> 
> 时间：2012-11-24T13:46:17.003
> 
> 标签：google-chrome-extension

我的扩展应该打开一个弹出窗口（一个普通的弹出窗口，而不是默认的扩展弹出窗口），具有以下条件：

1.  此刻只能打开一扇窗，
2.  我想在 localStorage 中保存窗口大小和位置，并在下次打开时恢复它们。

怎么做？

我试过了：

```
chrome.browserAction.onClicked.addListener(function() {

  // 1\. In this case, variable win is a window object. But it's empty. There
  // is no properties/methods to operate with.
  var win = window.open('http://example.com','windowname');

  chrome.windows.create({
    'url': 'http://example.com',
    'type': 'popup'
  }, function(win) {
    // 2\. In this case, variable win has some properties, but they are static
    // and won't change on window resize/close.
  });
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T18:13:36.380

我认为，您可以使用`window.open()`.

**1-此刻只能打开一个窗口，**

如果你给相同`name`的, `window.open()`,

*   如果不存在同名的窗口，它将创建一个新窗口
*   否则，如果有一个打开的同名窗口，它只会刷新它。

**2-我想在 localStorage 中保存窗口大小和位置，并在下次打开时恢复它们。**

是的，您可以通过附加`window.onresize`事件来做到这一点，

这是一个基本的例子，

```
chrome.browserAction.onClicked.addListener(function() {
  var wOpt = getWindowDefaultOptions(); // options from localStorage
  var win = window.open("http://www.example.com", "myscriptpopup", "width="+wOpt.width+", height="+wOpt.height+", top="+wOpt.top+", left="+wOpt.left);
  win.onresize = function() {
      var newOptions = {};
      newOptions.width = this.innerWidth;
      newOptions.height = this.innerHeight;
      newOptions.top = this.screenY;
      newOptions.left = this.screenX;
      setWindowDefaultOptions(newOptions); //save Options to localStorage
  }
});

//Default Options For Window
var winOptions = {
      "width" : "200",
      "height" : "100",
      "top" : "50",
      "left" : "50"
}; 
```

# c# - 如何实现泛型类的装饰器的复制方法？

> ID：13541820
> 
> 赞同：4
> 
> 时间：2012-11-24T13:46:30.707
> 
> 标签：c#, generics, copy, decorator

想象一下，你有一个通用接口，它定义了一个通用值和一个像这样的复制构造函数（替换 ICloneable）：

```
// T: type of value to hold, TU: type of the class itself
interface ICopyable<T,TU> where TU: ICopyable<T,TU> {
    T Value { get; set; }
    TU Copy();
} 
```

这可以通过像这样的布尔值持有者来实现：

```
class BooleanHolder : ICopyable<Boolean, BooleanHolder> {
    public BooleanHolder Copy() { 
        return new BooleanHolder(){ Value = Value }; 
    }
} 
```

现在问题来了：你将如何定义一个包含另一个 ICopyable 的装饰器类？我不工作的想法是：

```
class DecoratingHolder<T,TU> : ICopyable<ICopyable<T,TU>, DecoratingHolder<T,TU>> {
    public DecoratingHolder<T,TU> Copy {
        // won't compile as Value is of type T and not of type ICopyable<T,TU> 
        // as I expected - why is that?
        return new DecoratingHolder<T,TU>(){ Value = Value.Copy };
    }
} 
```

请注意，我`Copy`还要求复制类型的值`ICopyable<T,TU>`，这是为了确保深拷贝。

那么我必须改变什么才能使这个结构起作用呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T14:12:40.950

您可能只需要添加一个约束。您定义了它，`ICopyable<T, TU> where TU : ICopyable<T, TU>`但在您的 中，`DecoratingHolder`您永远不会明确约束`TU`.`DecoratingHolder`

更具体地说，我认为这是该行的这一部分：

```
class DecoratingHolder<T,TU> : ***ICopyable<ICopyable<T,TU>*** 
```

这就是问题的根源。您正在定义一个`ICopyable<T,TU>`类型，但`TU`并没有被限制为`ICopyable<T, TU>`. （也许可以从类声明/继承的其余部分*推断出*这一点，但编译器不会）一旦添加了约束，编译器就会*知道*这`Value`是一个兼容的`ICopyable<T,TU>`类型。

这对我来说编译得很好（必须用您提供的伪代码修复一些其他小问题）：

```
class DecoratingHolder<T,TU> : ICopyable<ICopyable<T,TU>, DecoratingHolder<T,TU>> 
    where TU : ICopyable<T,TU>
{
    public ICopyable<T,TU> Value { get; set; }

    public DecoratingHolder<T,TU> Copy() {
        return new DecoratingHolder<T, TU>(){ Value = Value };
    }
} 
```

编辑：回想起来，你甚至需要那个约束`ICopyable`吗？似乎没有做太多，因为无论如何您已经普遍定义了传出类型。除非您在其他地方有代码取决于它`ICopyable<T, TU>`出于某种原因返回的事实（无论如何它都会固有地返回一个强类型的`TU`or `BooleanHolder`or `DecoratingHolder`），然后考虑转储它。

```
interface ICopyable<T,TU>
{
    T Value { get; set; }
    TU Copy();
}

class BooleanHolder : ICopyable<Boolean, BooleanHolder> 
{
    public bool Value { get; set; }
    public BooleanHolder Copy() { 
        return new BooleanHolder(){ Value = Value }; 
    }
}

class DecoratingHolder<T,TU> : ICopyable<ICopyable<T,TU>, DecoratingHolder<T,TU>> 
{
    public ICopyable<T,TU> Value { get; set; }

    public DecoratingHolder<T,TU> Copy() {
        return new DecoratingHolder<T, TU>(){ Value = Value };
    }
} 
```

编辑：从您需要深拷贝的评论中，保留约束（您将需要它们），然后调用`Copy`（`Value`对不起，我一定错过了那个细节）

```
class DecoratingHolder<T,TU> : ICopyable<ICopyable<T,TU>, DecoratingHolder<T,TU>> 
    where TU : ICopyable<T,TU>
{
    public ICopyable<T,TU> Value { get; set; }

    public DecoratingHolder<T,TU> Copy() {
        return new DecoratingHolder<T, TU>(){ Value = Value.Copy() };
    }
} 
```

然后`Copy`，任何给定类的方法都应确保它们执行深层复制。（如果您的框架*需要*它们是深拷贝并且您不希望实现意外地做浅层，我建议重命名`Copy`为）`DeepCopy`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T14:12:47.767

一个演员为我工作：

```
 public DecoratingHolder<T, TU> Copy()
    {
        return new DecoratingHolder<T, TU>() { Value = (ICopyable<T, TU>)Value.Copy() };
    } 
```

我想在这种情况下，编译器并没有去建立这一点，`TU`而且`ICopyable<T, TU>`是一回事。*

# facebook - 如何使用 Node.js 发布到 facebook 服务器端

> ID：13541821
> 
> 赞同：1
> 
> 时间：2012-11-24T13:46:36.483
> 
> 标签：facebook, node.js, facebook-graph-api, https

根据问题标题，我正在尝试使用 node.js 发布到 facebook 服务器端不幸的是，我的操作方式有问题......我收到了错误

{ [错误：套接字挂起]代码：'ECONNRESET'}

```
app.post('/post/:id?', function(req, res)
{
var id = req.route.params.id;
var token = tokens[id].token;
var path = '/' + id + '/feed?access_token=' + token;
var message = "server side post to facebook";

console.log("post.id = " + req.route.params.id);

var jsonobject = JSON.stringify(
{
    'message'   :   message
});

var options = {
    host: 'graph.facebook.com',
    port: 443,
    path: path,
    method: 'post',
    headers: {
      'content-type': 'application/json',
      'content-length': jsonobject.length()
    }
};

var req = https.request(options, function(res) {
    console.log("statuscode: ", res.statuscode);
    console.log("headers: ", res.headers);
    res.setencoding('utf8');
    res.on('data', function(d) {
        process.stdout.write(d);
    });
    res.on('end', function(){ // see http nodejs documentation to see end
        console.log("finished posting message");
    });
});

req.on('error', function(e) {
    console.error(e);
});

req.write(jsonobject);
req.end();
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T05:04:39.633

我不确定我到底做了什么，但经过大量黑客攻击后它似乎工作......所以对于任何感兴趣的人：

```
app.post('/post/:id?', function(req, res)
{
var id = req.route.params.id;
var token = tokens[id].token;
var path = '/' + id + '/feed?access_token=' + token;
var strToPost = "server side post to facebook";

console.log("post.id = " + req.route.params.id);

var post_data = querystring.stringify({
    'message' : 'testing server side post'
});

var options = {
    host: 'graph.facebook.com',
    port: 443,
    path: path,
    method: 'POST',
    headers: {
      'Content-Type'    : 'application/x-www-form-urlencoded',
      'Content-Length'  : post_data.length
    }
};

var req = https.request(options, function(res) {
    console.log("statuscode: ", res.statuscode);
    console.log("headers: ", res.headers);
    res.setEncoding('utf8');
    res.on('data', function(d) {
        console.log("res.on data");
        process.stdout.write(d);
    });
    res.on('end', function(){ // see http nodejs documentation to see end
        console.log("\nfinished posting message");
    });
});

req.on('error', function(e) {
    console.log("\nProblem with facebook post request");
    console.error(e);
});

req.write(post_data);
req.end();
}); 
```

# java - LinkedList Java 的动态名称

> ID：13541822
> 
> 赞同：0
> 
> 时间：2012-11-24T13:46:53.990
> 
> 标签：java, object, linked-list

我有`LinkedList`某种类型的`<Structure>`. 在遍历目录时，我有一些文件夹可以阅读。我动态地想`LinkedList`用读取目录的名称创建这些。

即如果目录读取是`Kitchen`或`Lobby`。我想：

```
LinkedList<Structure> Kitchen = new LinkedList<Structure>();
LinkedList<Strucutre> Lobby = new LinkedList<Strucure>(); 
```

结构对象有`(String, ImageIcon, ImageIcon, ImageIcon)`

这里的问题是根据读取目录收到的名称来命名 LinkedList。

```
URL url = getClass().getResource("/path/to/directory/");
File file = new File(url.getPath() + "/");
File[] directories = file.listFiles();
for (int i = 0; i < directories.length; i++) {
     if (directories[i].isDirectory()) {
         // if directory then create LinkedList with that name
     }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T13:49:36.227

在我看来你想要一个新课程，例如

```
class Room {
    private final String name;
    private final LinkedList<Structure> elements;

    ...
} 
```

或者，您可以在`Map<String, LinkedList<Structure>>`加载不同文件时使用并填充地图。

然后，当您加载每个房间时，您可以提供对象的名称。区分变量（有名称）和对象（没有名称，除非您添加一个字段来表示该名称，就像我上面所说的那样），这一点非常*重要。*变量名通常只与代码相关——因此“动态生成的变量名”的想法毫无意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T13:49:50.180

您可以通过使用`Map<String, LinkedList<Structure>>`Map 的 String 键是目录名称来解决此问题。然后您可以通过目录 String 轻松访问相关的 LinkedList。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T13:50:17.843

你不能做这个。变量的名称只是您用于编程的符号。在运行时，所有这些都归结为对内存中某些空间的引用。此外，您或其他任何人都无法真正看到这些变量的名称，所以无论如何这里没有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T13:54:47.997

Java 变量名称本身不是*变量*，但您可以使用[MultiMap<String, LinkedList<Structure>>](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)。这将有助于处理重复的名称条目。

# php - 正则表达式：选择多个组的问题

> ID：13541824
> 
> 赞同：0
> 
> 时间：2012-11-24T13:47:05.803
> 
> 标签：php, regex

我需要从以下文本中创建 3 个组：

```
[startA]
this is the first group
 [startB]
 blabla
[end]
[end]
[startA]
this is the second group
 [startB]
 blabla
[end]
[end]
[startA]
this is the second group
 [startB]
 blabla
[end]
[end] 
```

如您所见，每个组都以 开头`[startA]`和结尾`[end]`，制作与此匹配的正则表达式应该很容易。
但问题是在一个组内，字符串`[end]`被使用了任意次数。正则表达式应该匹配一个在 next 之前以 right
开头`[startA]`和结尾的组，而不是 previous 。`[end]``[startA]``[end]`

我认为应该通过前瞻来完成，但到目前为止我的尝试都没有奏效。
是否可以使用正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T15:15:18.067

您应该使用递归正则表达式模式

```
preg_match_all('/\[(?!end)[^[\]]+\](?:[^[\]]*|[^[\]]*(?R)[^[\]]*)\[end\]\s*/', $s, $m); 
```

请参阅**[此演示](http://ideone.com/XjHAbj)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:55:19.777

是的，您确实可以通过前瞻来解决这个问题：

```
$test_string = <<<TEST
[startA]
this is the first group
 [startB]
 blabla
[end]
[end]
[startA]
this is the second group
 [startB]
 blabla
[end]
[end]
[startA]
this is the third group
 [startB]
 blabla
[end]
[end]
TEST;
preg_match_all('#\[startA](.+?)\[end]\s*(?=\[startA]|$)#s', 
    $test_string, $matches);
var_dump($matches[1]); 
```

这是[**ideone 演示**](http://ideone.com/TLKY6H)。

关键是在前瞻子模式中使用交替来测试下`[startA]`一部分或字符串的结尾（`$`）。

注意`/s`修饰符：没有它，`.`元字符将不匹配结束线（“\n”）。

# php - 以十六进制编码/解码字符串并返回

> ID：13541827
> 
> 赞同：5
> 
> 时间：2012-11-24T13:47:30.107
> 
> 标签：php, string, unicode, hex

给定一个可能包含任何字符（包括 unicode 字符）的字符串，我怎样才能将此字符串转换为十六进制表示，然后从十六进制反转并获取此字符串？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-24T13:51:30.227

使用`pack()`和`unpack()`：

```
function hex2str( $hex ) {
  return pack('H*', $hex);
}

function str2hex( $str ) {
  return array_shift( unpack('H*', $str) );
}

$txt = 'This is test';
$hex = str2hex( $txt );
$str = hex2str( $hex );

echo "{$txt} => {$hex} => {$str}\n"; 
```

会产生

> 这是测试 => 546869732069732074657374 => 这是测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T13:53:54.300

### 使用这样的函数：

```
<?php
function bin2hex($str) {
    $hex = "";
    $i = 0;
    do {
        $hex .= dechex(ord($str{$i}));
        $i++;
    } while ($i < strlen($str));
    return $hex;
}

// Look what happens when ord($str{$i}) is 0...15
// you get a single digit hexadecimal value 0...F

// bin2hex($str) could return something like 4a3,
// decimals(74, 3), whatever the binary value is of those.

function hex2bin($str) {
    $bin = "";
    $i = 0;
    do {
        $bin .= chr(hexdec($str{$i}.$str{($i + 1)}));
        $i += 2;
    } while ($i < strlen($str));
    return $bin;
}

// hex2bin("4a3") just broke. Now what?

// Using sprintf() to get it right.
function bin2hex($str) {
    $hex = "";
    $i = 0;
    do {
        $hex .= sprintf("%02x", ord($str{$i}));
        $i++;
    } while ($i < strlen($str));
    return $hex;
}

// now using whatever the binary value of decimals(74, 3)
// and this bin2hex() you get a hexadecimal value you can
// then run the hex2bin function on. 4a03 instead of 4a3.
?> 
```

### 来源： http: [//php.net/manual/en/function.bin2hex.php](http://php.net/manual/en/function.bin2hex.php)

# c# - 从另一个类中的主窗体上的画布中渲染图像

> ID：13541837
> 
> 赞同：0
> 
> 时间：2012-11-24T13:49:22.940
> 
> 标签：c#, wpf

我正在尝试在名为**Main的应用程序的主窗体上的画布（****布局**）中呈现一些 Image 对象。我正在使用 C# 和 WPF 创建应用程序，但无法从另一个类中获取要呈现的图像，但在**Main** form 部分类中可以正常工作。

 ****```
public static void renderStarscape(int density = 200)
    {
        Main main = new Main();
        Random random = new Random();
        for (int x = 0; x < density; x++)
        {
            int starSize = random.Next(1, 10);
            int starOpacity = random.Next(10, 30);
            int starX = random.Next(0, 800);
            int starY = random.Next(0, 500);
            Image Star = new Image();
            Star.Name = (x < 10) ? "star_0" + x : "star_" + x;
            Star.Source = streamImage("star_background.png");
            Star.Height = starSize;
            Star.Width = starSize;
            Star.Opacity = (double)starOpacity / 100;
            main.Layout.Children.Add(Star);
            Canvas.SetLeft(Star, starX);
            Canvas.SetTop(Star, starY);
            Canvas.SetZIndex(Star, 0);
        }
    } 
```

任何帮助都会很棒，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:53:42.227

您正在使用`new instance of Main`与 UI 上显示的方法不同的方法创建一个 all。

而是将 Canvas 的实例传递给该方法并绘制类似这样的东西 -

```
public static void renderStarscape( Canvas layout, int density = 200)
{
    // Use layout and remove the Main object initialization from the method.
    layout.Children.Add(Star);
} 
```

它在类的部分声明中起作用的原因是您使用的是相同的实例而不是为`Main()`.****

# database - 正确的代码，但无法插入数据库

> ID：13541839
> 
> 赞同：1
> 
> 时间：2012-11-24T13:49:26.893
> 
> 标签：database, vb.net, visual-studio-2010, ms-access, insert

我有一个使用 Access 数据库的 Visual Basic 项目。我运行查询，但在我的数据库表上没有看到任何新数据。我没有任何异常或错误。而不是显示成功消息框。这是我的代码：

```
 Dim ID As Integer = 2
    Dim TableNumber As Integer = 2
    Dim OrderDate As Date = Format(Now, "General Date")
    Dim TotalPrice As Double = 100.0
 Dim ConnectionString As String = "myconnectionstring"
    Dim con As New OleDb.OleDbConnection(ConnectionString)

    Try
        Dim InsertCMD As OleDb.OleDbCommand

        InsertCMD = New OleDb.OleDbCommand("INSERT INTO Orders([ID],[TableNumber],[OrderDate],[TotalPrice]) VALUES(@ID,@TableNumber,@OrderDate,@TotalPrice);", con)
        InsertCMD.Parameters.AddWithValue("@ID", ID)
        InsertCMD.Parameters.AddWithValue("@TableNumber", TableNumber)
        InsertCMD.Parameters.AddWithValue("@OrderDate", OrderDate)
        InsertCMD.Parameters.AddWithValue("@TotalPrice", TotalPrice)

        con.Open()
        InsertCMD.ExecuteNonQuery()
        MessageBox.Show("Successfully Added New Order",
                        "Success", MessageBoxButtons.OK, MessageBoxIcon.Information)
        con.Close()
    Catch ex As Exception
        'Something went wrong
        MessageBox.Show(ex.ToString)
    Finally
        'Success or not, make sure it's closed
        If con.State <> ConnectionState.Closed Then con.Close()
    End Try 
```

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T23:00:58.307

发生了两种情况之一：数据没有更新，或者数据更新了，但是当您之后查找它时却丢失了它。ExecuteNonQuery 通常返回操作的行数。如果它为零，那么它可能毫无例外地失败。这可能与重复 ID 有关。

如果插入成功，则由于某种原因您看不到新记录。也许您在寻找错误的地方，或者由于某种原因该记录没有出现在查询中。我不知道默认情况下“重复更新”的任何内容，但如果 Access 有它可能会导致问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T23:21:04.123

Dim ConnectionString As String = "myconnectionstring"

我使用 ADO 和 Delphi 连接到 Access，所以可能有点不同，但我想像这样的连接字符串你可能甚至没有连接到数据库，更不用说更新它了。

con.Open() 可能是一个函数，它将返回某种指示连接成功或失败的结果。Open 和 ExecuteNonQuery 命令的失败可能不会导致引发异常，在这种情况下，您的成功消息将显示连接是否已实现。异常不是唯一的错误类型。通常，如果函数返回指示成功或失败的结果，您应该在条件语句中查询该结果以确定是否处理或显示错误消息。在异常处理程序中包装大量代码是懒惰的，并且在许多情况下没有用处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:24:58.347

我能看到的唯一可能的问题是数据库中的 ID 字段是否是自动增量字段，否则它应该可以工作。或者，我发现以下方法更简单

使用表适配器和数据集插入新数据如下

Me.OrdersTableadapter.insert(ID, tableNumber, orderDate, TotalPrice) '注意：此方法的参数将按您的表格列顺序排列 Me.OrdersTableadapter.Fill(me.Dataset.Orderstableadapter)

# c++ - C++ 递归类型特征

> ID：13541850
> 
> 赞同：5
> 
> 时间：2012-11-24T13:50:35.047
> 
> 标签：c++, templates, typetraits

我正在尝试实现一个模板类（`Get<>`在此处命名），给定一个结构，如果*限定ID*不存在，`H`则类型`Get<H>::type`为`H`自身，否则为。我无法理解以下代码有什么问题： *`H::der``Get<H::der>::type`*

 *```
#include <iostream>
#include <typeinfo>
using namespace std;

template<class U, class V = void>
struct Get
{
  static const char id = 'A';
  typedef U type;
};

template<class U>
struct Get<U,typename U::der>
{
  static const char id = 'B';
  typedef typename Get<typename U::der>::type type;
};

struct H1
{ };
struct H2
{ typedef double der; };
struct H3
{ typedef void der; };
struct H4
{ typedef H2 der; };

void print(char id, const char* name)
{
  cout << id << ", " << name << endl;
}
int main(int , char *[])
{
  print(Get<H1>::id, typeid(Get<H1>::type).name()); // prints "A, 2H1", OK
  print(Get<H2>::id, typeid(Get<H2>::type).name()); // prints "A, 2H2", why?
  print(Get<H3>::id, typeid(Get<H3>::type).name()); // prints "B, v"  , OK
  print(Get<H4>::id, typeid(Get<H4>::type).name()); // prints "A, 2H4", why?
} 
```

我需要一些帮助以使此代码按预期运行。更具体地说，我希望它`Get< H2 >::type`等于`double`，并且对于`Get< H4 >::type`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T14:10:29.260

模板`Get<>`有一个默认的模板参数——这是非常危险的。取决于是否`V`相等`int`，`void`或者`double`你得到不同的结果。这就是发生的事情：

`Get<H2>::type`排`Get<H2, void>`在第一位（带有`id='A'`）。现在来检查，是否有它的专业化。你的 B`Get<U,typename U::der>`变成了`Get<U, double>`。但这与 whith 不匹配`Get<H2, void>`，因此`A`被选中。事情变得有趣`Get<H2>::type`。那么变体 B 也是`Get<U, void>`并且提供了更好的匹配。但是，该方法不适用于所有类型。

这就是我实施的方式`Get`：

```
template<class U>
class Get
{
  template <typename T, typename = typename T::der>
  static typename Get<typename T::der>::type test(int);
  template <typename T>
  static T test(...);
public:
  typedef decltype(test<U>(0)) type;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T14:32:25.730

虽然我给@ipc 答案+1 并且对于启用C++11 的编译器来说非常好，但对于C++03 编译器，您应该使用不同的方法，因为C 中不支持函数模板参数的默认值++03。所以我有这个代码：

```
template<class U, class V = void>
struct Get
{
    static const char id = 'A';
    typedef U type;
};

template< class T >
struct is_type {
    static const bool value = true;
};

template<class U>
struct Get<U,
    typename std::tr1::enable_if<is_type<typename U::der>::value, void>::type>
{
    static const char id = 'B';
    typedef typename Get<typename U::der>::type type;
}; 
```*

# c - 在 C 中随时退出循环

> ID：13541859
> 
> 赞同：-4
> 
> 时间：2012-11-24T13:51:34.977
> 
> 标签：c

> **可能重复：**
> [随时退出循环](https://stackoverflow.com/questions/13540995/exit-a-loop-at-anytime)

抱歉，我还有另一个问题。如果我改变'time_t end = time(0) + 1;' to 'time_t end = time(0) + 5;'... 然后我的程序不会立即退出循环，而是在 5 秒后退出。如何更改它以立即退出循环？假设是一分钟，因为我正在创建一个程序，一个停车计时器，您可以随时退出循环以要求退款。参考下面的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main(void)
{
    int b=0, i;
    int seconds;
    printf("\nEnter number of seconds : ");
    scanf("%d", &seconds);
    while (b==0)
    {
        b=kbhit();
        for(i=1;i<=seconds;i++)
        {
            while (b==0)
            {
                b=kbhit();
                time_t end = time(0) + 5; //5 seconds delay.
                while(time(0) < end)
                {
                    b=kbhit();
                }
                seconds -= 5;
                printf("Number of seconds left : %d\n", seconds);
                b=kbhit();  
            }
        }
        if(seconds == 0)
        {
            exit(0);
        }
        b=kbhit();
    }
    printf("Number of remaining seconds left : %d\n", seconds);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:54:18.463

使用 a`break`是退出循环的更好解决方案

# forms - 在数据表子表单中使用级联组合框

> ID：13541860
> 
> 赞同：4
> 
> 时间：2012-11-24T13:51:34.410
> 
> 标签：forms, ms-access, vba

在 Access 2010 中，我有表`Task`，并且`Action`通过 table 具有多对多关系`ActionTask`。在 for 的表单中`Task`，我想通过联结表`Action`为与当前任务相关的所有 s放置一个子表单。`ActionTask`

这本身，我可以做到。

诀窍是这`Action`实际上是四层表层次结构的底层。每个`Action`属于一个`Goal`，每个`Goal`属于一个`Theme`，每个`Theme`属于一个`Strategy`。

`Action`我想为`Strategy`/ `Theme`/ `Goal`/使用级联组合框，而不仅仅是一个列出所有可用s 的组合框`Action`。

这个我也可以。

问题是当我在数据表中使用此技术时，如果我选择给定行，则所选行显示正确的`Strategy`// `Theme`/ `Goal`，`Action`但在所有其他行中

*   是`Action`空白的
*   `Strategy`//设置为当前行的值，而不是该行的`Theme`值`Goal`

![在数据表视图中选择一行](../Images/0f21cd1784a9c5b9970770e602e26b8e.png) ![在数据表视图中选择另一行](../Images/6605f8b40373787d807553e153df7f1c.png)

我尝试使用“连续表单”视图而不是“数据表”视图，但结果几乎相同。

![在连续表单视图中选择一行](../Images/915debdf2cff135e6c4bf265f3cb40ef.png) ![在连续表单视图中选择另一行](../Images/4e535dbcf1ce0473f094d70716a6ea8a.png)

我想我知道为什么（`Me.StrategyCombo = ...`我的`Form_Current`回调中的东西），但我不知道另一种方法来实现这一点。

如何使子表单正确显示所有行？

* * *

[这是 Access 文件](https://docs.google.com/open?id=0B6-U1uFbN8Ckc05ocFdhTEhHQXM)，但所有相关细节都应在下方。

```
Tables:
  Strategy   : (ID, Desc)
  Theme      : (ID, StrategyID, Desc)
  Goal       : (ID, ThemeID, Desc)
  Action     : (ID, GoalID, Desc)
  Task       : (ID, Desc, ...)
  ActionTask : (ActionID, TaskID)

Form Settings:

  [Forms]![Task]![ActionTaskSub]:
    Link Master Fields: ID
    Link Child Fields : TaskID

  [Forms]![Task]![ActionTaskSub].[Form]:
    On Current:
      Private Sub Form_Current()
          ' when the form loads a record, should reverse propegate
          ' action > goal > theme > strategy
          Dim goalID, themeID, strategyID

          ' figure out the goal, theme, and strategy that go with this action
          If (Me.ActionID) Then
            goalID = DLookup("[GoalID]", "Action", "[ID] = " & CStr(Me.ActionID))
            themeID = DLookup("[ThemeID]", "Goal", "[ID] = " & CStr(goalID))
            strategyID = DLookup("[StrategyID]", "Theme", "[ID] = " & CStr(themeID))
          End if

          ' populate the combo boxes and make the appropriate selections
          Me.StrategyCombo = strategyID
          Me.ThemeCombo.Requery
          Me.ThemeCombo = themeID
          Me.GoalCombo.Requery
          Me.GoalCombo = goalID
          Me.ActionCombo.Requery
          Me.ActionCombo = Me.ActionID
      End Sub

  [Forms]![Task]![ActionTaskSub].[Form]![StrategyCombo]:
    Row Source  : SELECT [Strategy].[ID], [Strategy].[Desc] FROM [Strategy];
    After Update:
      Private Sub StrategyCombo_AfterUpdate()
          Me.ThemeCombo = Null
          Me.ThemeCombo.Requery
          Call ThemeCombo_AfterUpdate
      End Sub

  [Forms]![Task]![ActionTaskSub].[Form]![ThemeCombo]:
    Row Source  : SELECT [Theme].[ID], [Theme].[Desc] FROM [Theme] WHERE 
                  [Theme].[StrategyID] = [Forms]![Task]![ActionTaskSub].[Form]![StrategyCombo];
    After Update:
      Private Sub ThemeCombo_AfterUpdate()
          Me.GoalCombo = Null
          Me.GoalCombo.Requery
          Call GoalCombo_AfterUpdate
      End Sub

  [Forms]![Task]![ActionTaskSub].[Form]![GoalCombo]:
    Row Source  : SELECT [Goal].[ID], [Goal].[Desc] FROM [Goal] WHERE 
                  [Goal].[ThemeID] = [Forms]![Task]![ActionTaskSub].[Form]![ThemeCombo];
    After Update:
      Private Sub GoalCombo_AfterUpdate()
          Me.ActionCombo = Null
          Me.ActionCombo.Requery
      End Sub

  [Forms]![Task]![ActionTaskSub].[Form]![ActionCombo]:
    Row Source  : SELECT [Action].[ID], [Action].[Desc] FROM [Action] WHERE 
                  [Action].[GoalID] = [Forms]![Task]![ActionTaskSub].[Form]![GoalCombo]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-07-26T13:12:05.127

我解决了数据表中依赖（级联）组合框的问题。从本质上讲，如果组合框 1 依赖于组合框 2 中的值，它会将当前行中的“行源”应用于数据表中的所有行

解决方案：

1 在加载或设计器中，定义行源以包含所有行，以便其后面的数据值始终与行源中的选项匹配（否则显示空白值）

IE：

```
Private Sub Form_Load()
    Me.cmbProjects.RowSource = "SELECT [Projects].[ProjectPK],  [Projects].[ProjectName], [Projects].[PI_ID] FROM [Projects]  ORDER BY  [ProjectName] "
End Sub 
```

2 在从属组合框获取焦点事件中，将行源重新定义为基于前者所依赖的另一个组合框的值。重新查询控件

```
Private Sub cmbProjects_GotFocus()
Me.cmbProjects.RowSource = "SELECT [Projects].[ProjectPK],  [Projects].[ProjectName], [Projects].[PI_ID],  [Projects].[Status] FROM [Projects]  WHERE [PI_ID] = " + CStr(cmbPIs.Value) + " ORDER BY [PI_ID], [ProjectName] "
cmbProjects.Requery
End Sub 
```

3 在从属组合框失去焦点事件中，将行源重新定义为不基于前者所依赖的另一个组合框的值。

```
Private Sub cmbProjects_LostFocus()
Me.cmbProjects.RowSource = "SELECT [Projects].[ProjectPK],  [Projects].[ProjectName], [Projects].[PI_ID],  [Projects].[Status] FROM [Projects]  ORDER BY [PI_ID], [ProjectName] "
cmbProjects.Requery
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T13:59:50.973

你不能。任何操作都适用于子表单当前记录，但似乎会影响所有控件。有各种变通方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-04T01:46:59.013

据我所知你不能，但你可以通过创建一个连续的表单来解决它，将你的字段放在表格布局中，然后为每个组合框添加一个文本框（如果字段是 prodID，那么我将文本框命名为 txtprodID）。将文本框向右移动到组合框的顶部，但稍微窄一点，就在组合列表箭头附近，然后编写代码来更新文本框。

# asp.net - CashU 支付网关响应返回 URL

> ID：13541861
> 
> 赞同：1
> 
> 时间：2012-11-24T13:51:39.213
> 
> 标签：asp.net, payment-gateway

我正在使用 asp.net、c# 在我的网站中集成 CashU 支付网关。我想知道付款后如何从本地主机上的站点获取响应。

对于 CashU，我们必须在注册 CashU 时提供返回 URL，而不是从页面发送。我们已将 localhost 注册为“http://127.0.0.1:61996/ReturnPage.aspx”

但它不会返回到返回 URL。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T13:54:51.040

当然不是。127.0.0.1 是任何人的本地主机地址。不确定它会重定向到谁，无论是服务器本身还是用户的机器。但绝对不是你的机器......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-09T06:13:36.770

Cachu 提供两种反馈 url，一种是**“返回 URL”**，另一种是**“通知 URL”**， **返回 URL**是 url，交易成功后，页面将被重定向。 **通知 URL**是交易成功后将被通知的 URL。毕竟，你提供的url不是live url，它只是一个本地url，只有你的本地机器才能识别，所以制作一个可以被CashU服务器识别的live url。

# python - python控制台和python脚本之间的不同行为

> ID：13541862
> 
> 赞同：5
> 
> 时间：2012-11-24T13:51:51.473
> 
> 标签：python, console, gtk, pydev

我在使用 python 控制台和 python 脚本的同一代码上遇到了不同的行为。

代码如下：

```
import gtk
import webkit
win = gtk.Window()
win.show()
web = webkit.WebView()
win.add(web)
web.show()
web.open("http://www.google.com") 
```

在 python 控制台中运行代码时，输​​出是一个包含 google 主页的新框架。

将代码作为脚本运行时，结果是空帧。它关闭得非常快，但即使我使用延迟功能，webkit 也不会添加到框架中。

这怎么可能？

此外，使用 PyDev IDE 它会标记：“未解析的导入：gtk”，但如果我运行该项目，程序启动时不会出现编译问题。正常吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T14:04:25.573

添加

```
gtk.main() 
```

到你的脚本的末尾。这将启动`gtk`事件循环。

* * *

```
import gtk
import webkit

class App(object):
    def __init__(self):
        win = gtk.Window()
        win.connect("destroy", self.destroy)
        web = webkit.WebView()
        web.open("http://www.google.com")
        win.add(web)
        web.show()
        win.show()
    def destroy(self, widget, data = None):
        gtk.main_quit()
app = App()
gtk.main() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T14:00:20.430

我的猜测是控制台保持 python 会话打开，而在脚本结束时程序关闭。当脚本关闭时，它会使用它创建的所有内容。

测试这个理论的东西：如果你在控制台中输入“exit”，你会看到界面以同样的方式关闭吗？`raw_input`如果是这样，请考虑一些允许脚本保持打开状态的代码（例如，a 之类的暂停）。

祝你好运！

# c++ - C ++ 11 - 2个向量之间的emplace_back不起作用

> ID：13541865
> 
> 赞同：7
> 
> 时间：2012-11-24T13:53:11.880
> 
> 标签：c++, vector, c++11, move-semantics

我试图调整一些代码并将内容从一个向量移动到另一个使用`emplace_back()`

```
#include <iostream>
#include <vector>

struct obj
{
  std::string name;

  obj():name("NO_NAME"){}
  obj(const std::string& _name):name(_name){}

  obj(obj&& tmp): name(std::move(tmp.name)) {}
  obj& operator=(obj&& tmp) = default;

};

int main(int argc, char* argv[])
{

  std::vector<obj> v;
  for( int i = 0; i < 1000; ++i )
  {
    v.emplace_back(obj("Jon"));
  }

  std::vector<obj> p;
  for( int i = 0; i < 1000; ++i )
  {
    p.emplace_back(v[i]);
  }

  return(0);
} 
```

这段代码不能用 g++-4.7、g++-4.6 和 clang++ 编译：它有什么问题？

我总是遇到 1 个主要错误

> 调用 obj 的隐式删除的复制构造函数

?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T00:47:42.757

尽管现有答案提供了一种解决方法 using`std::move`使您的程序可以编译，但必须说您的使用`emplace_back`似乎是基于误解。

您描述它的方式（*“我试图 [...] 使用`emplace_back()`”*将内容从一个向量移动到另一个向量）以及您使用它的方式表明您将其`emplace_back`视为一种*将*元素移动到向量中的方法，并且of`push_back`作为将元素*复制到向量中的方法。*您用来填充向量的第一个实例的代码似乎也暗示了这一点：

```
std::vector<obj> v;
for( int i = 0; i < 1000; ++i )
{
  v.emplace_back(obj("Jon"));
} 
```

但这不是`emplace_back`和之间的区别`push_back`。

**首先，`push_back`***如果仅给定一个右值并且元素类型具有移动赋值运算符，even**会将元素*****移动*****（而不是复制）到向量中。***

 ***其次，真正的用例是*在原地*`emplace_back`构造元素***，即当你想将对象放入一个尚不存在的向量时使用它。的参数`emplace_back`是对象*构造函数的参数*。所以你上面的循环应该看起来像这样：*

 *```
std::vector<obj> v;
for( int i = 0; i < 1000; ++i )
{
  v.emplace_back("Jon");   // <-- just pass the string "Jon" , not obj("Jon")
} 
```

您现有代码有效的原因是它`obj("Jon")`也是构造函数（特别是移动构造函数）的有效参数。但是 的主要思想`emplace_back`是您无需创建对象*然后*`obj("Jon")`将其移入。当您传递而不是传递给它时，您不会从该想法中受益`"Jon"`。

另一方面，在您的第二个循环中，您正在处理之前创建的对象。`emplace_back`用它来移动已经存在的对象是没有意义的。同样，`emplace_back`应用于现有对象并不意味着该对象被移动。它只意味着它是使用普通的复制构造函数（如果存在的话）就地创建的。如果你想移动它，只需使用`push_back`, 应用于结果`std::move`：

```
std::vector<obj> p;
for( int i = 0; i < 1000; ++i )
{
  p.push_back(std::move(v[i]));  // <-- Use push_back to move existing elements
} 
```

**进一步说明**
1) 您可以使用 C++11 基于范围的 for 来简化上述循环：

```
std::vector<obj> p;
for (auto &&obj : v)
  p.push_back(std::move(obj)); 
```

2）无论你使用普通的for循环还是基于范围的for，你都一个一个地移动元素，这意味着源向量`v`将保持为1000个空对象的向量。如果您确实想在过程中清除向量（但仍然使用移动语义将元素传输到新向量），您可以使用向量本身的移动构造函数：

```
std::vector<obj> p(std::move(v)); 
```

这将第二个循环减少到只有一行，并确保源向量被清除。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-24T14:05:32.143

问题是

```
p.emplace_back(v[i]); 
```

将左值传递给`emplace_back`，这意味着您的移动构造函数（需要右值引用）将不起作用。

如果您确实想将值从一个容器移动到另一个容器，则应显式调用[`std::move`](http://en.cppreference.com/w/cpp/utility/move)：

```
p.emplace_back(std::move(v[i])); 
```

（移动构造函数背后的想法`obj(obj&& tmp)`是，它`tmp`应该是一个不会存在很长时间的对象。在您的**第一个**循环中，您将一个临时对象传递给`emplace_back`，这很好 - 右值引用可以绑定到临时对象并从中窃取数据，因为临时对象即将消失。在您的**第二个**循环中，您传递给的对象`emplace_back`有一个名称：`v[i]`。这意味着它不是临时的，并且可以在程序中稍后引用。这就是为什么你必须用[`std::move`](http://en.cppreference.com/w/cpp/utility/move)它告诉编译器“*是的，我真的是想从这个对象中窃取数据，即使其他人以后可能会尝试使用它。* ”）

* * *

**编辑：**我假设你相当不寻常的用法`emplace_back`是不得不为我们制作一个小例子的遗物。如果不是这种情况，请参阅@jogojapan 的回答，了解为什么使用`std::vector`移动构造函数或重复调用`push_back`对您的示例更有意义。**

# javascript - 我如何在加载函数中传递带有 url 的字符串变量？

> ID：13541866
> 
> 赞同：2
> 
> 时间：2012-11-24T13:53:15.017
> 
> 标签：javascript, jquery

在这里我有变量 fileVal 需要像 uploads/import/abc.pdf 这样的文件路径

var fileVal = $('#fileimport').val();

这里 fileVal 采用像 uploads/import/abc.pdf 这样的文件路径

我必须将此文件路径作为 url 变量发送到 php 文件，然后在 messagediv 上显示结果。像

```
 $('#messagediv').load('../xyz.php?file='+fileVal); 
```

这里没有 url 变量，它可以完美地获取 messagediv 的值。

但是在哪里使用 url 变量它不是。

我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:19:48.947

尝试`encodeURIComponent()`

```
var fileVal =  encodeURIComponent($('#fileimport').val()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T14:12:06.900

除非您有语法错误，否则应该可以正常工作

```
// $var fileVal = $('#fileimport').val();
var fileVal = $('#fileimport').val(); 
```

# hive - 蜂巢 - 如何删除外部蜂巢表以及数据

> ID：13541870
> 
> 赞同：14
> 
> 时间：2012-11-24T13:53:41.953
> 
> 标签：hive, hdfs, drop-table

我在用

```
drop table <table_name> 
```

如果我重新创建具有相同架构和名称的表，我将取回旧数据。我应该从 hdfs 文件系统中删除表目录以完全摆脱数据吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-04-04T13:14:37.647

在删除它之前，您必须将外部表更改为内部表：

**例子**

```
beeline> ALTER TABLE $tablename SET TBLPROPERTIES('EXTERNAL'='False'); // make the table as internal 
```

接着：

```
beeline> drop table $tablename; //if you drop the table data will be dropped as well. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-05T10:27:28.460

首先使用以下命令获取表的路径：

***hive> 描述格式化的 database_name.table_name；***

然后复制出现在描述中的整个位置，例如：/user/hive/warehouse/database_name.db/table_name

在此之后使用以下命令截断给定表中的所有数据：

```
***hive> dfs -rmr /user/hive/warehouse/database_name.db/table_name;*** 
```

或者

```
***hive> dfs -rm -r /user/hive/warehouse/database_name.db/table_name;*** 
```

然后您可以使用 DROP TABLE 命令完全擦除它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T17:54:23.077

虽然我同意 pensz 的观点，但稍作改动，你**不必放弃**桌子。只需将外部 hdfs 文件替换为您想要的任何新文件（替换文件的结构应该相同），当您对上一个表执行 select * 时，您会注意到它将具有新数据而不是旧数据一。

外部表基本上只表示数据的模式和文件的位置。您可以将许多文件添加到同一位置，您的表格将自动包含与这些文件相关的所有数据。同样，您可以替换任何数据，并且您的表格将自动反映这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T14:13:51.887

无需删除 hdfs 中的目录，除非您需要更多 hdfs 空间。

如果你想替换新数据，你只需要替换 hdfs 中的文件。

如果您想将表名用于其他用途，请删除该表并删除 hdfs 中的目录。

事实上，我认为这是一个非常方便的功能，您可以更改表的架构（例如，您想更改字段名称或将两个字段连接到一个字段）而不会丢失任何数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-26T20:14:14.360

如果它是一个外部表，删除该表意味着您只是在删除该方案

所以你必须手动从 HDFS 中删除文件

或创建一个新表，并在 tbl 属性中提供不同的文件位置

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-10-09T16:21:50.937

确实删除 EXTERNAL TABLES 不会删除数据。

您可以使用 TRUNCATE TABLE 删除数据。

文档在这里：[https ://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-TruncateTable](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-TruncateTable)

如果需要，然后使用 DROP TABLE 删除架构

# ruby - Nokogiri 从 XML::NodeSet 中选择超链接

> ID：13541874
> 
> 赞同：0
> 
> 时间：2012-11-24T13:54:05.827
> 
> 标签：ruby, xml, rss, nokogiri

我编写了以下简单的脚本来解析 reddit/r/documentaries

```
require 'open-uri'
require 'nokogiri'

top_docs = Nokogiri::XML(open("http://www.reddit.com/r/Documentaries/top.rss"))
top_docs.xpath('//item').each do |documentary|
    documentary_description = documentary.xpath('description')
end 
```

我正在尝试收集 documentary_description 中所有超链接的数组。我应该使用什么选择器/方法来完成这个？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T14:02:23.337

可以使用[`extract`](http://railsapi.com/doc/ruby-v1.8/classes/URI.html#M004495)URI提供的方法：

```
top_docs.xpath('//item').each do |documentary|
  documentary_description = documentary.xpath('description')
  links = URI.extract(documentary_description.text)
  ...
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T14:31:53.923

单线（使用`URI#extract`@shioyama 指出的方便）：

```
links = URI.extract(top_docs.xpath('//item/description').to_a.join(" ")) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T22:48:46.457

小心使用 URI#extract，在这种情况下，它会选择一个可能不需要的 img src。Nokogiri更可靠：

```
links = Nokogiri::HTML(documentary_description.text).search('a').map{|x| x[:href]} 
```

# iphone - 在 iPhone5 中自动调整 UIView 的大小

> ID：13541876
> 
> 赞同：1
> 
> 时间：2012-11-24T13:54:19.753
> 
> 标签：iphone, objective-c, ios

我为 iPhone4 开发了一个应用程序，它运行良好。但是当我在 iPhone 5 中打开它时，一些视图有一个奇怪的行为。例如，某些空间更大或某些元素更大，我不希望这样。其中一个失败是像消息应用程序这样的屏幕，用于书写的文本字段在 iPhone 4 中可以完美运行，但在 iPhone 5 中它要大得多。我试图用这个来调整它：

```
CGRect screenBounds = [[UIScreen mainScreen] bounds];
if (screenBounds.size.height == 568) {
    // code for 4-inch screen
    NSLog(@"Iphone 5");
    CGRect frameTable = CGRectMake(0, 0, 320, 454);
    [tableView setFrame:frameTable];

    CGRect frameTextView = CGRectMake(0, 454, 320, 50);
    [textInputView setFrame:frameTextView];
} else {
    // code for 3.5-inch screen
    NSLog(@"Iphone 4");
    CGRect frameTable = CGRectMake(0, 0, 320, 376);
    [tableView setFrame:frameTable];

    CGRect frameTextView = CGRectMake(0, 376, 320, 50);
    [textInputView setFrame:frameTextView];
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T15:58:20.963

打开您的 xib 文件。转到“身份检查器”并取消选中“使用自动布局”。

# angularjs - AngularJS - 将值从后端传递到前端

> ID：13541881
> 
> 赞同：29
> 
> 时间：2012-11-24T13:54:56.513
> 
> 标签：angularjs

将值从后端传递到前端的 AngularJS 的最佳方法是什么？我正在使用 Django，模板能够吐出我需要的值，但是我不确定将这些值传递给 AngularJS 的最佳实践是什么。

想想一篇博客文章及其评论，如果我有一个 AngularJS 服务，它通过将文章 ID 传递给服务来检索某个博客文章的所有评论，并且 Django 正在呈现 HTML 模板并且它确实知道文章 ID 是什么，但是我需要将此帖子 ID 传递给 AngularJS，然后再传递给服务。

一个想法是将它隐藏起来`<input>`并将这个输入分配给模型。不是很吸引人。

另一个是有一个指令并将属性中的这个值传递给这个指令，这样我就可以访问这个属性的值：

```
// Django (or any backend) is rendering {{ object.value }}
<div class="myDirective" data-object-id={{ object.value }}>
   ...
</div>

angular.module('myDirectives', []).
    directive('myDirective', function() {
        return {
            restrict: 'C',
            transclude: false,
            link: function postLink($scope, $element, $attrs) {
                // $attrs.objectId would have the value
            }
        }
    }); 
```

这两种方法看起来不错。但我想知道是否有更清洁的方法来做到这一点？遵循 AngularJS 最佳实践的任何方法？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-24T20:05:48.930

如果您只需要从视图中初始化少数模型值，则该`ng-init`指令可能就是您正在寻找的： http://docs.angularjs.org/api/ng.directive: [ngInit](http://docs.angularjs.org/api/ng.directive:ngInit)

使用它你可以简单地写：

```
<div ng-init="myModel=backend-generated-value-here">
   ...
</div> 
```

如上所述，您可能很难为您的用例找到最佳实践，因为 AngularJS 专注于 Web2.0，全客户端 Web 应用程序。目前，它与服务器端生成内容的播放效果并不理想。它可能会在 AngularJS 的未来版本中发生变化。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-24T16:49:06.800

如果您只需要为给定的“页面”（意味着对视图的后端调用）设置初始值，那么您可以按照您的演示进行操作。我只会通过 javascript 设置全局变量来使其“更干净”，如下所示：

```
// Django (or any backend) is rendering {{ object.value }}
<script>
  var backendVars = {
    {{object.name}} : {{object.value}}
    //and any other objects, manually parsed
  }
</script> 
```

并在引导过程中使用角度阅读它。

但是，angularJS 是它自己的 MVC，因此您可能希望能够设置/获取数据或后端控制器的进程，而不必重新加载整个页面。“最干净”的方法是让 Web 服务返回您需要的数据（例如，返回 JSON 的视图）并通过 $http 或 $resource 服务检索它：

```
angular.module('myApp', []).
  controller('MainCtrl', function($scope, $html) {
    $html({
    method: 'GET',
    url: '/your/JSON/view.json'
      }).
      success(function(data, status){
        $scope.yourData = data;
      }).
      error(function(data, status){
        //whatever you need to do if the data is not available
      });
  } 
```

另外，我应该注意，您不应该将数据和逻辑直接放在指令上——它们是用于 DOM 操作的——而是在控制器上获取信息，然后通过范围继承、属性或 2-way 将其传递给指令数据绑定。希望能帮助到你。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-07-11T11:25:04.110

我相信正确的方法是让服务器使用[value provider](https://docs.angularjs.org/guide/providers#value-recipe)呈现脚本，然后将其依赖注入到您的应用程序中。像这样：

索引.php：

```
<html ng-app='myApp'>

<head>
    <title>AngularJS Back to Front</title>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.18/angular.min.js"></script>
    <script src='index.js'></script>
    <?php
        $globals = array(
            'count' => 1, 
            'title' => 'Active users',
            'users' => array(
                'name' => 'john',
                'age'  => 21
            )
        );

        $globalsJSON = json_encode( $globals )
    ?>

    <script>
        myApp.value('globals', <?=$globalsJSON;?>);
    </script>
</head>

<body ng-controller="myController">
    <div>{{title}}</div>
</body>

</html> 
```

index.js：

```
var myApp = angular.module( 'myApp', [] );

myApp.controller( 'myController', [ 'globals', '$scope', function( globals, $scope ) {
    // Copy globals to scope
    for ( var property in globals ) {
        $scope[ property ] = globals[ property ];
    }
}]); 
```

# java - 如何将带有 GroupLayout 的面板添加到 JFrame？

> ID：13541883
> 
> 赞同：1
> 
> 时间：2012-11-24T13:55:08.713
> 
> 标签：java, swing, layout, awt, panel

如何将带有 GroupLayout 的面板添加到 JFrame？还有许多其他面板。

我用`FlowLayout`（`btnPanel`数组）做了一些面板。`GroupLayout`我用( )将它们添加到另一个面板`btnPanel2`。垂直，一切都很好。

但是如何添加`btnPanel2`到框架中？

```
public static String[][] NORMAL_BUTTONS = {
    {"MC", "MR", "MS", "M+" ,"M-"},
    {"<-", "CE", "C" , "+/-","√"  },
    {"7" , "8" , "9" , "/"  ,"%" },
    {"4" , "5" , "6" , "*"  ,"1/x"},
    {"1", "2", "3", "-","="},
    {"0", ".", " ","+"}
};

Panel BtnPanel[]=new Panel[6];//(new FlowLayout());
  BtnPanel[0]=new Panel();
  BtnPanel[0].setLayout(new FlowLayout());

 for(int i=0;i< NORMAL_BUTTONS.length;i++){
     BtnPanel[i]=new Panel();
     BtnPanel[i].setLayout(new FlowLayout());

     for(int j=0;j<NORMAL_BUTTONS[i].length;j++)
     {
     Button btn = new Button(NORMAL_BUTTONS[i][j]);
     // btn.setFont(BTN_FONT);
     BtnPanel[i].add(btn);       
     }
 }

 JPanel BtnPanel2=new JPanel();
 GroupLayout myl=new GroupLayout(BtnPanel2);
 myl.setAutoCreateGaps(true);
 myl.setAutoCreateContainerGaps(true);

 myl.setVerticalGroup(myl.createSequentialGroup()
         .addGroup(myl.createParallelGroup(GroupLayout.Alignment.BASELINE))

               // THE FOLLOWING PANELS SHOULD HE VERTICALLY ALIGNED 
                // THE FOLLOWING PANELS SHOULD HE VERTICALLY ALIGNED  
               .addComponent(BtnPanel[0]) 
           .addComponent(BtnPanel[1])
           .addComponent(BtnPanel[2])
           .addComponent(BtnPanel[3])
           .addComponent(BtnPanel[4])
           .addComponent(BtnPanel[5])

        );

 BtnPanel2.setLayout(myl); 
```

导致问题的行如下

```
 frame.add(BtnPanel2,BorderLayout.EAST); 
```

```
线程“主”java.lang.IllegalStateException 中的异常：java.awt.Panel[panel0,0,0,0x0,invalid,layout=java.awt.FlowLayout] 未附加到水平组
    在 javax.swing.GroupLayout.checkComponents（未知来源）
    在 javax.swing.GroupLayout.prepare（未知来源）
    在 javax.swing.GroupLayout.preferredLayoutSize（未知来源）
    在 java.awt.Container.preferredSize（未知来源）
    在 java.awt.Container.getPreferredSize（未知来源）
    在 javax.swing.JComponent.getPreferredSize（未知来源）
    在 java.awt.BorderLayout.preferredLayoutSize（未知来源）
    在 java.awt.Container.preferredSize（未知来源）
    在 java.awt.Container.getPreferredSize（未知来源）
    在 javax.swing.JComponent.getPreferredSize（未知来源）
    在 javax.swing.JRootPane$RootLayout.preferredLayoutSize（未知来源）
    在 java.awt.Container.preferredSize（未知来源）
    在 java.awt.Container.getPreferredSize（未知来源）
    在 javax.swing.JComponent.getPreferredSize（未知来源）
    在 java.awt.BorderLayout.preferredLayoutSize（未知来源）
    在 java.awt.Container.preferredSize（未知来源）
    在 java.awt.Container.getPreferredSize（未知来源）
    在 java.awt.Window.pack（未知来源）
    在 myPackage.Calc.createAndShowGui(Test.java:188)
    在 myPackage.Test.main(Test.java:199)

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T14:15:00.233

你`HorizontalGroup`在你的`GroupLayout`.

使用时`GroupLayout`，您必须指定水平和垂直布局。每个组件必须在每个组中仅指定一次。不这样做会导致`IllegalStateException`.

请参阅：[如何使用 GroupLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/group.html)

# apache - 将 apache /whatever 重定向到 /en/whatever

> ID：13541887
> 
> 赞同：0
> 
> 时间：2012-11-24T13:55:26.583
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

如果 en 不存在，我想将我的用户从 mysite.com/mobiles 重定向到 mysite.com/en/mobiles：

我试过这个：

```
RewriteCond %{REQUEST_URI}{3} !^/en$ [NC]
RewriteCond %{REQUEST_URI} ^(.+)$
RewriteRule ^(.+)$ /en/$1 [R=301,L] 
```

它给了我一个无限循环..第一行好吗？我可以只比较请求 uri 的前 3 个字符吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T15:20:05.897

问题是这一行：

```
RewriteCond %{REQUEST_URI}{3} !^/en$ [NC] 
```

`%{REQUEST_URI}{3}`变量无效。您不能在比较的右侧混合正则表达式（希望成为变量和/或文字）。您希望左侧的正则表达式仅检查它是否不以 开头`/en/`：

```
RewriteCond %{REQUEST_URI} !^/en/ 
```

# jquery-mobile - jQuery Mobile div 作为链接和后退按钮问题

> ID：13541888
> 
> 赞同：0
> 
> 时间：2012-11-24T13:55:39.227
> 
> 标签：jquery-mobile, jquery

我正在尝试为自己制作一个简单的应用程序并使用 jQuery mobile 玩一下。我创建了 3 个简单的网站：

[http://jsfiddle.net/ZweUQ/2/](http://jsfiddle.net/ZweUQ/2/)

```
var clickEvent = 'click'; // 'tap'
// global init handler
$(document).live('pageinit', function() {
    console.log('init');
    $('.clck').bind(clickEvent, function(e) {
        console.log($(this).attr("data-href"));
    $.mobile.changePage('#search_what');
}); 
```

我遇到的问题是，第二页上的 div，我想成为可点击/可点击并切换到站点 3。当我单击时，site3 即将到来，但是当我单击后退按钮时，然后windows 正在切换回站点 2 并立即再次切换回站点 3。

单击站点 3 上的“什么”div 和后退按钮 2-3 次，这样您就可以看到我想告诉您的内容。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:29:55.123

这是一个常见的 jQuery 移动问题。这是因为多个事件绑定到同一个元素。每次返回上一页时，都会再次绑定相同的事件。

这个问题有2个解决方案。

1.  在将事件绑定到某个元素之前，请检查同一事件是否尚未绑定。

    例子：

    ```
    $('.menu-browse:Event(!' + touchEvent + ')').each(function(){
        $('.menu-browse').bind(touchEvent, function(e) {

        });
    }); 
    ```

或者

2.  每次绑定事件时，先取消绑定。

    例子：

    ```
    $(this).unbind();
    $(this).bind(touchEvent, function(e) {

    }); 
    ```

可悲的是，这个问题没有万无一失的解决方案。

现在看看：

[http://jsfiddle.net/Gajotres/ZweUQ/4/](http://jsfiddle.net/Gajotres/ZweUQ/4/)

# oracle - 如何通过从 pl/sql 中的另一个表中获取数据来创建 XML 类型的新表

> ID：13541889
> 
> 赞同：0
> 
> 时间：2012-11-24T13:55:43.447
> 
> 标签：oracle, plsql

这是一个名为“CARS”的示例表，它只是一个更大的表的一部分。

```
MODEL              ID

Ferrari             1
Mustang             2
Taurus              3 
```

我想创建一个名为 CARS_XML 的新表，将每一行从 CARS 更改为单个 XML 类型列，使用游标从表 CARS 中获取数据（而不是插入每行的值）以形成新表 CARS_XML。生成的表具有 XML 标记`CAR`，`MODEL`并且`ID`第一个表的值`CARS`插入到 XML 标记内的正确位置，因此 select * from CARS_XML 将如下所示：

```
< CAR>< MODEL>Ferrari< /MODEL>< ID>1< /ID>< /MODEL>< /CAR>
< CAR>< MODEL>Mustang< /MODEL>< ID>2< /ID>< /MODEL><  /CAR>
< CAR>< MODEL>Taurus< /MODEL>< ID>3< /ID>< /MODEL>< /CAR> 
```

首先，我是否声明`sys.xmltype`并定义它，如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T16:41:54.977

为什么要将您的放在另一个表中，而不是在需要时从表中即时`xml`生成。`xml``CARS`

我之所以这么说是因为`CARS`表具有来自另一个表的约束。您需要在该 CAR_XML 上复制以保持一致性。

另一个原因是，每当您将数据插入`CARS`表中时，您都需要将相同的数据插入到表中`CAR_XML`。所以编写一个从`CARS`FLY 表中获取数据的函数。如果不是，则在 CARS 表上创建一个触发器，打开`insert update delete`，它在表上执行相同的操作`CAR_XML`。

```
create table cars(model varchar2(200),id number);
insert into cars values('Ferrari',1);
insert into cars values('Mustang',2);
insert into cars values('Taurus',3);

SELECT XMLElement("CAR", 
                        XMLElement("MODEL",c.model) ,
                        XMLElement("ID", c.id)
                 ) AS "RESULT" 
FROM cars c; 
```

*输出*

```
< CAR>< MODEL>Ferrari< /MODEL>< ID>1< /ID>< /MODEL>< /CAR>
< CAR>< MODEL>Mustang< /MODEL>< ID>2< /ID>< /MODEL><  /CAR>
< CAR>< MODEL>Taurus< /MODEL>< ID>3< /ID>< /MODEL>< /CAR> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T16:40:29.250

我认为下面的脚本会做你正在寻找的东西，虽然我不能完全检查它。但是，您尝试做的似乎是有问题的。大概在将来的某个时候，您将把这个 xml 发送到某个地方，对我来说，将数据转换为 xml 的最佳时间是当您想要发送它时，而不是将其留在表中，占用您的空间数据库。您现在在 2 个不同的地方也有相同的数据，这在数据库设计中通常是一件坏事。

```
CREATE TABLE cars
(model varchar2(30)
,id   number(3));

INSERT INTO cars
(model
,id)
VALUES ( 'Ferrari',1);

INSERT INTO cars
(model
,id)
VALUES ( 'Mustang',2);

INSERT INTO cars
(model
,id)
VALUES ( 'Taurus',3);

CREATE TABLE cars_xml
(xml_data xmltype);

INSERT INTO cars_xml
SELECT xmlelement("CAR",xmlelement("MODEL",c.model)||xmlelement("ID",c.id))
FROM cars c; 
```

# javascript - 如何使用 jQuery 使用正则表达式按 ID 选择元素？

> ID：13541898
> 
> 赞同：61
> 
> 时间：2012-11-24T13:57:07.760
> 
> 标签：javascript, jquery, regex

我有以下输入元素：

```
<input id="AAA_RandomString_BBB" type="text" />
<input id="AAA_RandomString_BBB_Start" type="text" />
<input id="AAA_RandomString_BBB_End" type="text" /> 
```

AAA 和 BBB 是常数，我将永远知道它们是什么。但是 RandomString 将始终是随机的。

我想获得 AAA_RandomString_BBB 的值。我不希望 ID 以 _Start 或 _End 结尾的输入元素中的值。

我尝试了以下方法：

```
$('[id^="AAA_"]') 
```

但上面选择了所有 ID 以“AAA_”开头的输入元素

我需要一些方法来选择使用正则表达式类型语法，例如：

```
$('[id^="AAA_(.+?)_BBB"]') 
```

这可能吗？如果没有，任何人都可以建议一种选择方法

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-11-24T14:03:00.200

您可以将两个选择器组合在一个[多属性选择器](http://api.jquery.com/multiple-attribute-selector/)中。

```
​$("[id^=AAA_][id$=_BBB]") 
```

它将返回匹配所有指定属性过滤器的所有元素：

*   [`[id^=AAA_]`](http://api.jquery.com/attribute-starts-with-selector/)匹配具有以 ,`id`开头的属性的元素`AAA_`，并且
*   [`[id$=_BBB]`](http://api.jquery.com/attribute-ends-with-selector/)匹配`id`属性以 . 结尾的元素`_BBB`。

* * *

另一个通用的替代方案：

*   使用[自定义`:regex()`选择器](https://stackoverflow.com/a/190255/417685)，
*   使用[`.filter()`基于的方法](https://stackoverflow.com/a/193787/417685)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-24T14:03:40.863

### 用这个：

```
$('[id^="AAA_"][id$="_BBB"]') 
```

### 小提琴：http: [//jsfiddle.net/J6hGx/](http://jsfiddle.net/J6hGx/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-24T14:07:03.157

您可以查找 id 的开头`AAA`和结尾，`BBB`如下所示：

```
​$("[id^=AAA_][id$=_BBB]") 
```

工作小提琴：http: [//jsfiddle.net/DN9uV/](http://jsfiddle.net/DN9uV/)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-11-24T14:15:32.033

这可以这样做：

```
$('input').filter(function(){ return this.id.match(/^AAA_.+_BBB$/) }) 
```

您可以使用`$('input', <context>)`使搜索更精确。另请参阅[此处](https://stackoverflow.com/questions/190253/jquery-selector-regular-expressions)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T14:14:43.387

我用不需要唯一的类选择器来解决这个问题。

这对速度也有积极影响，因为不需要复杂的搜索此外，您可以将其用于不同元素的不同样式

例如

```
<elem id="1" class="aa">element type aa</elem>
<elem id="2" class="aa">element type aa</elem>
<elem id="3" class="aa bb">element type aa and bb</elem>
<elem id="4" class="bb">element type bb</elem> 
```

现在您可以简单地使用类选择器

```
$('.aa').click(function(){
     console.log( 'clicked type aa #' + $(this).attr('id') );
});

$('.bb').click(function(){
     console.log( 'clicked type bb #' + $(this).attr('id') );
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-24T18:20:36.233

最好只检查以 _BBB 结尾的 id

```
 $("[id$=_BBB]") 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-14T06:25:42.990

这个怎么样 ：

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
    </head>
    <body>
        <input id="AAA_RandomString_BBB" type="text" />
        <input id="AAA_RandomString_BBB_Start" type="text" />
        <input id="AAA_RandomString_BBB_End" type="text" />

        <script>
            $(document).ready(function () {
                debugger
                var targetElement = $('input')
                .filter(function () {
                    var el = this.id.match(/^AAA.*BBB$/g);
                    return el;
                });
                console.log(targetElement.val());
            })
        </script>
    </body>
</html> 
```

# vb.net - 选择二维数组位置以添加值

> ID：13541903
> 
> 赞同：1
> 
> 时间：2012-11-24T13:57:30.500
> 
> 标签：vb.net, visual-studio-2010, visual-studio-2008

我正在 VB 中制作一个二维数组，我需要帮助试图弄清楚如何在二维数组中选择一个位置，然后输入一个值。我知道如何遍历数组元素并向其添加值，但如果我只是选择一个位置并输入一个值，这将是一种更快的方法。

谢谢

Console.WriteLine("想在什么位置输入值：") userInput = Console.ReadLine

```
 Console.WriteLine(" Would you like to enter another 1 ?? (Y or N)")
    If (reply = "Y") Or (reply = "y") Then
        reply = Console.ReadLine()
        Console.WriteLine("What position would like to enter a value:")
        userInput = Console.ReadLine

    End If

    For row = 0 To cRow
        For column = 0 To cColumn
            If grid(row, column) = 0 Then
                Console.Write(Chr(32))
            Else
                Console.Write(Chr(42))
            End If
        Next
        Console.WriteLine()
    Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T22:54:10.147

如果您想获得该职位，您显然必须要求用户提供它。由于这是用户输入，您必须检查用户输入的内容是否有帮助（规则 1：永远不要信任用户！）

```
Sub Main()

    Dim matrix(8, 8) As String

    Do
        ' get user input
        Console.Write("Enter coordinates in the form: 'x,y'")
        Dim input As String = Console.ReadLine()
        ' empty string=quit
        If input.Length = 0 Then Exit Do
        ' split on ',' character
        Dim spl = input.Split(","c)
        ' there must be exactly two values
        If spl.Count <> 2 Then Continue Do
        ' check if user entered two NUMBERS
        Dim x, y As Integer
        If Not Integer.TryParse(spl(0), x) Or Not Integer.TryParse(spl(1), y) Then Continue Do
        ' Validate x
        If x < 0 OrElse x > UBound(matrix, 1) Then
            Console.WriteLine("x must be 0..{0}", UBound(matrix, 1))
            Continue Do
        End If
        ' Validate y
        If y < 0 OrElse y > UBound(matrix, 2) Then
            Console.WriteLine("y must be 0..{0}", UBound(matrix, 2))
            Continue Do
        End If
        ' set value
        matrix(x, y) = "x"
        Console.WriteLine("Value saved")
    Loop

    ' output matrix
    For y = 0 To UBound(matrix, 2)
        For x = 0 To UBound(matrix, 1)
            If String.IsNullOrEmpty(matrix(x, y)) Then
                Console.Write(".")
            Else
                Console.Write(matrix(x, y))
            End If
        Next
        Console.WriteLine()
    Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T15:08:31.663

您需要三个信息来为数组添加一个值，两个坐标（行、列）和值。假设你有这些信息，你就会这样做。

```
 Dim grid(2, 2) As String
    Dim row As Integer = 1
    Dim column As Integer = 0
    Dim value As String = "something"

    grid(row, column) = value 
```

# spring - 多线程中的Spring HibernateTemplate HibernateOptimisticLockingFailureException

> ID：13541907
> 
> 赞同：1
> 
> 时间：2012-11-24T13:57:50.523
> 
> 标签：spring, exception, optimistic-locking

当我使用 Spring 中的HibernateTemplate**访问****mysql**数据库时遇到问题。它在单线程环境中工作正常，但它总是抛出关于 多线程中的***OptimisticLocking的异常。***

 ***详细异常如下图

```
org.springframework.orm.hibernate3.HibernateOptimisticLockingFailureException: Object of class [com.cmcol.Mapping.Resource_Movie] with identifier [2357708]: optimistic locking failed; nested exception is org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.cmcol.Mapping.Resource_Movie#2357708]
at org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:683)
at org.springframework.orm.hibernate3.HibernateAccessor.convertHibernateAccessException(HibernateAccessor.java:412)
at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:411)
at org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)
at org.springframework.orm.hibernate3.HibernateTemplate.saveOrUpdate(HibernateTemplate.java:737)
at com.cmcol.Atom.DatabaseTemplate.storeResource(DatabaseTemplate.java:55)
at com.cmcol.XMLCatcher.DoubanMovieInfoCatcherXML.Storage(DoubanMovieInfoCatcherXML.java:191)
at com.cmcol.XMLCatcher.DoubanMovieInfoCatcherXML.Controller(DoubanMovieInfoCatcherXML.java:79)
at com.cmcol.Atom.CatcherProcess.MovieCatcher(CatcherProcess.java:69)
at com.cmcol.Atom.CatcherProcess.run(CatcherProcess.java:52)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)
Caused by: org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.cmcol.Mapping.Resource_Movie#2357708]
at org.hibernate.persister.entity.AbstractEntityPersister.check(AbstractEntityPersister.java:1950)
at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2594)
at org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java:2494)
at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2821)
at org.hibernate.action.EntityUpdateAction.execute(EntityUpdateAction.java:113)
at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:273)
at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:265)
at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:185)
at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)
at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51)
at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1216)
at org.springframework.orm.hibernate3.HibernateAccessor.flushIfNecessary(HibernateAccessor.java:390)
at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:407)
... 10 more 
```

Mapping.Resource_Movie 源代码显示为

```
@Entity
@Table(name = "resource_movie")
public class Resource_Movie implements MappingResourceInterface {
@Version
private int version;
@Id
@Column(name = "movieID")
private Integer movieID;
@Column(name = "id")
private Integer id;
@Column(name = "[title]")
@Basic(fetch = FetchType.LAZY)
private String title;
//get and set functions} 
```

我创建了一个名为**com.cmcol.Atom.DatabaseTemplate**的类，其中包含来自 Spring autowired 的**HibernateTemplate**的一个实例。它的代码是

```
@Repository
public class DatabaseTemplate {
@Autowired
@Qualifier("resourceTemplate")
private HibernateTemplate resourceTemplate;
public synchronized boolean storeResource(Resource_Movie entity) {
resourceTemplate.saveOrUpdate(entity);
return true;
}   } 
```

DatabaseTemplate 也会自动装配到其他实例中，但是在多线程环境中会遇到 OptimisticLocking 的问题。

是什么原因以及如何解决？***

# android - 关于从 C2DM 迁移到 GCM 和 google 帐户

> ID：13541909
> 
> 赞同：0
> 
> 时间：2012-11-24T13:58:22.330
> 
> 标签：android, notifications

我有一个关于在我的应用程序中从 C2DM 迁移到 GCM 的问题。

现在，我正在使用 C2DM，使用我的应用程序的人需要在 Account & Sync 菜单中创建一个 google 帐户。如果我迁移到 GCM，这仍然需要吗？它是否适用于 Android 4.0.3 下的自定义 ROM？

谢谢，周末愉快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:02:21.793

来自[developer.android.com](http://developer.android.com/guide/google/gcm/gcm.html)：

GCM 使用现有的 Google 服务连接。对于 3.0 之前的设备，这要求用户在其移动设备上设置其 Google 帐户。运行 Android 4.0.4 或更高版本的设备不需要 Google 帐户。

没有理由它不应该在自定义 rom 上工作（如果安装了 Google Apps），所以是的，它会工作。

# objective-c - 在 mailViewController 中禁用横向模式

> ID：13541912
> 
> 赞同：0
> 
> 时间：2012-11-24T13:58:38.107
> 
> 标签：objective-c, ios, xcode

我在我的应用程序中使用以下代码禁用了横向模式。：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);

} 
```

但是当邮件视图显示它以某种方式启用陆地横向模式时。

邮件操作代码：

```
if ([MFMailComposeViewController canSendMail])
            {
                MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];
                mailer.mailComposeDelegate = self;
                [mailer setSubject:@"Subject 1"];
                UIImage *myImage = [UIImage imageNamed:@"logo_v22.png"];
                NSData *imageData = UIImagePNGRepresentation(myImage);
                [mailer addAttachmentData:imageData mimeType:@"image/png" fileName:@"mobiletutsImage"];
                NSString *emailBody = @"Test ";
                [mailer setMessageBody:emailBody isHTML:NO];

                [self presentModalViewController:mailer animated:YES];

            } 
```

**主要问题：**如何在 mailView 中禁用横向模式？

* * *

*附加问题*：如何更改 mailView 中按钮的颜色？（取消按钮和发送按钮）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:13:41.810

您需要做的是子类化 MFMailViewController 并覆盖它的方向。这里有一个很好的例子：[横向的 MFMailComposeViewController](https://stackoverflow.com/questions/1518499/mfmailcomposeviewcontroller-in-landscape)你只需要改变它以适应你想要的方向。

编辑：这基本上是因为视图控制器默认启用了此模式，它不是从您的主视图控制器派生的，因此需要对其进行子类化

# iphone - 用户的位置未显示在地图上

> ID：13541918
> 
> 赞同：3
> 
> 时间：2012-11-24T13:59:51.277
> 
> 标签：iphone, objective-c, ios, ipad, mapbox

我下载了 MapBox Me。用户位置未显示在地图上。属性`mapView.isUserLocationVisible`是`YES`。`mapView.showsUserLocation = YES`. 但我在地图上看不到蓝色圆圈或圆点。我应该怎么做才能让它可见？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-04T22:27:29.007

设置`mapView.showsUserLocation = YES`会自动将蓝点添加到地图上。如果您想以蓝点为中心在屏幕上移动它，您需要`mapView.userTrackingMode`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T02:44:27.120

当前位置 (RMUserLocation) 是 RMAnnotation 的扩展。如果你想显示你的位置，你可以像其他符号一样把它放在地图上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-18T12:58:13.117

一秒钟我遇到了同样的问题，但是一旦在 layerForAnnotation 方法中 GPS 可用，就确实看到 RMUserLocation 出现，但仍未在地图上绘制。

一个可能的原因是您试图为用户位置绘制一个标记。

尝试添加此代码：

```
- (RMMapLayer *)mapView:(RMMapView *)mapView layerForAnnotation:(RMAnnotation *)annotation
{
    //Show the user location
    if( [annotation isKindOfClass:[RMUserLocation class]] )
        return nil;
    .... run your own code
} 
```

为我解决了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T02:18:38.287

如果没有更多信息（从您正在使用的代码开始），就不可能确切地知道您在地图上显示用户位置时遇到问题的原因。

仅设置属性 Map.showsUserLocation 不足以显示用户的位置。

# facebook-graph-api - Facebook 的 API 是否比网站更严格？

> ID：13541919
> 
> 赞同：-1
> 
> 时间：2012-11-24T14:00:04.623
> 
> 标签：facebook-graph-api

我刚刚开始使用 Facebook Graph API，我的印象是 API 在提供给我的信息方面比网站更具限制性。

例如，尝试使用[Graph API Explorer](https://developers.facebook.com/tools/explorer)时，我似乎无法列出朋友的朋友。这是可以预料的吗？我可以通过 Facebook Graph API 获取的信息集是否只是我可以通过 Facebook Web 界面获取的数据的一个子集？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T14:07:06.323

> 我刚刚开始使用 Facebook Graph API，我的印象是 API 在提供给我的信息方面比网站更具限制性。

是的，当然是。

> 例如，尝试使用 Graph API Explorer 时，我似乎无法列出朋友的朋友。这是可以预料的吗？

自然。如果您不仅可以获得活跃用户的朋友，还可以获得朋友的朋友——没有什么可以阻止应用程序通过一遍又一遍地重复此步骤来“映射”谁是谁的朋友的*整个图表。*

> 我可以通过 Facebook Graph API 获取的信息集是否只是我可以通过 Facebook Web 界面获取的数据的一个子集？

肯定的。

# javascript - 两个单词之间的正则表达式

> ID：13541921
> 
> 赞同：0
> 
> 时间：2012-11-24T14:00:20.583
> 
> 标签：javascript, ajax, regex, parsing

我将非常感谢您的帮助。发生的情况是我的代码通过 ajax 从 php 文件中获取了一个字符串。php 文件返回一个包含以下内容的长字符串`"css":["DSK\/y"],"js":["V5Llk","1dVnw"],"onload":["goURI(\"\\\/procedure\\\/376993639056176\\\/?context=create\");"],"bootloadable":{"IframeShim":{"resources":[...`。

我想要的是`376993639056176`使用作为服务器变量的 javascript 获取数字并使用它来保持进程。你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T14:03:18.267

您的服务器正在返回一个包含多个信息的 JSON，并且您想要它的“onload”属性的数字部分。您可以执行以下操作

以下函数将仅从您的字符串中获取数字

```
var serverJSONString = stringReturnedByServer();
var longUri = serverJSONString.onload[0]; //This will get only the "onload" string;
var decodedNumber = longUri.replace (/[^\d]/g, "");
alert(decodedNumber); 
```

这是一个功能[小提琴](http://jsfiddle.net/brunovieira/MqUsm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T14:09:31.457

如果该字符串中唯一的数字实际上是您要查找的数字，则可以使用正则表达式

```
 var regex = new RegExp("[^0-9]*([0-9][0-9]*)[^0-9]*","g")
 var number = yourString.replace(regex,"$1"); 
```

# objective-c - Objective-c 英里/公里转换

> ID：13541922
> 
> 赞同：1
> 
> 时间：2012-11-24T14:00:34.897
> 
> 标签：objective-c, nsuserdefaults, unit-conversion

在我的 iPhone 应用程序中，用户可以在首选项中更改单位（公里或英里）。

```
[[NSUserDefaults standardUserDefaults] setObject:@"km" forKey:@"distanceUnit"]; 
```

或者

```
[[NSUserDefaults standardUserDefaults] setObject:@"mile" forKey:@"distanceUnit"]; 
```

我在**核心数据中仅以公里为单位保存距离。**我与**int**一起工作。所以每次我得到距离时，我都会执行以下操作：

```
if ([unit isEqualToString:@"km"]) {
} else {
    intTotalKM = intTotalKM * 0.621371192;
} 
```

在节省距离时，我执行以下操作：

```
if ([unit isEqualToString:@"km"]) {
} else {
    intTotalKM = intTotalKM / 0.621371192;
} 
```

例如，在不改变距离的情况下，当我保存并获取它时，我会损失 1 或 2 公里/英里。

由于**0.621371192**和我只使用**int** ，我失去了精度。我不想使用双精度值。您对如何处理这个问题有任何想法吗？

编辑：我想知道是否还有其他更适合我情况的转换方式。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T14:28:33.273

唯一无损的解决方案是以原始单位存储距离。添加一个单字符列，指定表示距离的单位，并存储一个代码（例如，`'K'`英里`km`和`'M'`英里）以及实际距离。

如果添加列不是一个选项，您可以将单位放在您存储的数字的高位：由于您的应用程序中的最大距离是`2^20`，您可以使用数字的剩余 12 位来编码单位表示距离。用于`dist & 0xFFFFF`提取实际距离，并`dist >> 20`提取单位代码（`1`for `km`，`0`for `mi`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T18:20:46.000

如果您真的希望使用整数并保持精度，请使用较小的单位。如果您的最大要求为 999999km，那么如果您的整数是 32 位的，您可以以米为单位存储值并调整转换以产生码。如果您的整数是 64 位的，那么您可以使用 cm 甚至 mm，但您可能不需要走那么远。这就是一些财务计算的完成方式，例如 1.59 美元不是存储为 1.59 而是存储为 159。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T22:58:09.147

如果通过**一次**转换数字而导致的精度损失是可以接受的，那么我会在每次显示/保存它时停止来回转换，并且仅在用户输入值时才转换（如果需要） .

所以换句话说，就像你的用户默认值一样，只有内存中的值代表 km。

```
- (void)textFieldDidEndEditing:(UITextField *)textField {
    intTotalKM = [textField.text intValue];

    if ([unit isEqualToString:@"mile"]) {
        intTotalKM = intTotalKM / 0.621371192;
    }
} 
```

请注意，此转换**仅**在用户输入新值时进行一次。

要向用户显示该值，您可以根据需要将该值转换为英里。保存该值时，您只需保存 intTotalKM 而不进行任何转换，因为它始终存储在 KM 中。

否则，您应该以不会有这种精度损失的方式存储该值。通过存储数字的小数部分（使用双精度数），另存为不同的单位（如米 - 我个人最喜欢的）或存储单位并使用本机值，所有这些都在此处的其他答案中建议。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T14:04:01.860

你自己已经回答了这个问题：你失去了精度，因为你使用的是整数......你没有太多的选择。要么更改为 double，要么坚持使用 int 和不准确的值...

# android - 我们可以从广播接收器启动一个用户定义的服务吗？

> ID：13541945
> 
> 赞同：0
> 
> 时间：2012-11-24T14:03:38.927
> 
> 标签：android, android-intent, broadcastreceiver, android-service, android-2.2-froyo

我正在为 Android 中的手机和平板电脑开发应用程序。**我使用的是安卓 2.2**

在广播接收器中，我们可以放置一些简单的进程（小进程/小运行模块代码片段）。它不适合长时间运行的进程/长时间运行的模块，如**gps 位置捕获**等。

我们可以从广播接收器启动服务（用户定义的服务 - 不是 Android 服务）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:14:51.220

是的，您可以从`BroadcastReceiver`. 您实际上需要`Context`启动一个`Service`. 例如：

```
@Override
public void onReceive(Context context, Intent intent) {

    Intent intent = new Intent(context, YourService.class);
    context.startService(intent);
} 
```

# node.js - Node.js，无法打开文件。错误：ENOENT，stat './path/to/file'

> ID：13541948
> 
> 赞同：126
> 
> 时间：2012-11-24T14:03:56.103
> 
> 标签：node.js, express

我在我的计算机上使用 express 框架开发了一个 node.js 程序，它运行良好，没有任何抱怨。

但是，当我在我的 SUSE Studio 设备上运行该程序时，我在任何文件交互时都会收到错误消息。

```
Error: ENOENT, stat './path/to/file' 
```

我检查了文件权限是否正确，它们是正确的。如果这很重要，我的计算机和我的设备正在运行不同版本的节点。

有什么想法吗？

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2012-11-24T17:32:56.960

用 a 指定的路径`.`是相对于当前工作目录的，而不是相对于脚本文件的。因此，如果您运行，则可能会找到该文件，`node app.js`但如果您运行`node folder/app.js`. 唯一的例外是`require('./file')`，这只是可能的，因为`require`每个模块都存在，因此知道它是从哪个模块调用的。

要创建相对于脚本的路径，您必须使用该`__dirname`变量。

```
var path = require('path');

path.join(__dirname, 'path/to/file') 
```

或可能

```
path.join(__dirname, 'path', 'to', 'file') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-24T04:57:55.863

这里是使用你的 app.js 的代码

输入指定文件名

```
res.download(__dirname+'/'+input); 
```

# ajax - 从 Ajax 将 XML 数据发布到 ASP.NET MVC 时遇到问题

> ID：13541953
> 
> 赞同：1
> 
> 时间：2012-11-24T14:04:17.990
> 
> 标签：ajax, asp.net-mvc-3

我在将 XML 数据从 Ajax 发送到 ASP.NET MVC 时遇到问题。不发送数据。阿贾克斯代码：

```
`function SendXmlToServer(ServerXml) {
       $.ajax({ url: "/Home/XmlData",
           type: "POST",
            processData: false, 
           data: { ResXml: ServerXml }, dataType: "xml",
           success: function () {
               alert("Successful");
               return false;
           }
       })
   }` 
```

ASP.NET MVC 代码：

```
[HttpPost]
    public ActionResult XmlData(string ResXml) 
    {   
        return null;
    } 
```

为什么 ResXml 变量为空？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:21:08.250

默认模型绑定不适用于`processData`设置为`false`. 如果`ServerXml`是 XML 字符串，删除它应该可以工作：

```
function SendXmlToServer(ServerXml) {
   $.ajax({ url: "/Home/XmlData",
       type: "POST",
       data: { ResXml: ServerXml }, dataType: "xml",
       success: function () {
           alert("Successful");
           return false;
       }
   });
} 
```

您还必须将`ValidateInput`属性添加到您的操作方法中，因为通常不允许使用“HTML 标记”：

```
[HttpPost]
[ValidateInput(false)]
public ActionResult XmlData(string ResXml) 
{   
    return null;
} 
```

或者，您可以使用自定义模型绑定来无缝反序列化 XML，如[本博](http://lostechies.com/jimmybogard/2011/06/24/model-binding-xml-in-asp-net-mvc-3/)文中所述。

# c - 如何用c语言运行一个可执行文件？

> ID：13541956
> 
> 赞同：2
> 
> 时间：2012-11-24T14:04:23.230
> 
> 标签：c, system

我试图使用 C 语言编译器 3.0 执行这个程序，一切正常，但是当我运行这个程序时，它永远不会打开 firefox，当我运行这个程序的可执行文件时，它显示兼容性问题错误:(请帮助我

```
#include<stdlib.h>
#include<stdio.h>
int main(void)
{
 system("C:\\Program Files (x86)\\Mozilla Firefox\\firefox.exe");
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:05:43.173

看看 execve 函数： http: [//msdn.microsoft.com/en-us/library/hyw61wtd (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/hyw61wtd(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-10-07T10:15:00.587

用。。。来代替 ”/”

```
#include <stdio.h>
#include <stdlib.h>

int main(){
    system("C:/Program file(x86)/Mozilla Firefox/firefox.exe");
    return 0;
} 
```

# function - Mathematica：简化函数符号

> ID：13541960
> 
> 赞同：1
> 
> 时间：2012-11-24T14:04:44.900
> 
> 标签：function, wolfram-mathematica, notation

我有一些带有任意函数的计算。在输出中，Mathematica 始终显示函数参数。我想通过在输出中隐藏参数来稍微整理一下符号。我怎样才能做到这一点？或者更好的是，有没有办法在代码中只写一次函数参数？记住它是一个任意函数。

例如，它是这样的：

```
f[x,y] + (f[x,y])^2 = ... 
```

我更喜欢这样：

```
f + f^2 = ... 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:49:35.783

你的意思是仅仅为了展示目的？可能是一个简单的`/.`?

```
Clear[x, y, f]
expr = f[x, y] + (f[x, y])^2 == 34;
expr /. f[__] -> f 
```

给

```
Out[29]= f + f^2 == 34 
```

您甚至可以修改`$PrePrint`为自动执行此操作

```
Clear[x,y,f]
$PrePrint=#/.f[__]->f&;
expr=f[x,y]+(f[x,y])^2==34

Out[6]= f+f^2==34

expr
Out[7]= f+f^2==34 
```

要取回它，请执行

```
$PrePrint=.
expr

Out[10]= f[x,y]+f[x,y]^2==34 
```

在实际编程中我没有足够的勇气自己做这件事，但它可以尝试。

# matlab - 在 matlab 中读取文本失败

> ID：13541961
> 
> 赞同：0
> 
> 时间：2012-11-24T14:04:53.790
> 
> 标签：matlab, fopen

```
Reading: 2012-11-14 17:51:30.188000
Orient: 0.128638193011,0.485114246607,0.864937186241,0.347732484341
Gyro: -0.0267551075667,0.0950478315353,-0.131820827723
Accel: -0.199179515243,-0.979403376579,-0.0331153795123
Compass: 0.819754898548,-0.555078268051,-0.141031831503
Reading: 2012-11-14 17:51:30.300000
Orient: 0.102125242352,0.50507569313,0.85701161623,0.353488951921
Gyro: 0.0196692775935,0.134142056108,0.073423832655
Accel: -0.197360157967,-0.978824615479,-0.0543242283165
Compass: 0.823461055756,-0.549835622311,-0.139974221587 
```

如上所述是我拥有的数据`.txt`形式......但是当我尝试读取其中一行数据以显示它时，`Matlab`我无法显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T14:38:21.417

我不会给你一个解决方案，但我会指导你。

```
fid = fopen('C:\Users\KaeBin\Desktop\log.txt');
while ~feof(fid)
   line = fgets(fid);
   title = sscanf(line, ['%s:']);
   if strcmp(title, 'Gyro:')==1
     [name num]=strtok(line, ':');
     num=strtok(num, ':');
     nums_of_gyro=sscanf(num, '%f, %f, %f')
     ....
     ....
   end
   ...
   ...
end 
```

**解释：**

我正在从第一行到最后一行扫描文本文件：

*   `while ~feof(fid)`我从文件中读入`line`每一行。
*   `title = sscanf(line, ['%s:']);`这里我提取了文本文件中的第一个作品。
*   `if strcmp(title, 'Gyro:')==1`现在我检查第一个工作是否是`Gyro`. 如果是这样，那么我会为我提取相关信息（在这种情况下是三个数字）。

现在您可以执行相同的操作来从中提取信息`Accel`并进行一些操作。您可以轻松地编辑代码，从中添加和删除行以实现您的目标。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:26:16.813

我会遵循这个过程（仅针对前两个文本行，但可以扩展到整个文件）：

```
clc, clear all, close all

fid = fopen(filename,'r');

A = textscan(fid,'%s','Delimiter','\r');

A = A{1};

a = A{1}(length('Reading')+2:end);
b = A{2}(length('Orient')+2:end); 
```

这样，您可以将每个文本行的属性存储到一个唯一的数组中。

我希望这有帮助。

# javascript - 数组长度不起作用

> ID：13541965
> 
> 赞同：4
> 
> 时间：2012-11-24T14:05:48.117
> 
> 标签：javascript, multidimensional-array

> **可能重复：**
> [数组长度未定义](https://stackoverflow.com/questions/13310566/array-length-undefined)

我有以下数组，但每当我试图找出它的长度时，`categoryData.length`它只会给我`undefined`. 如果我键入`console.log(categoryData)`它会给我数组中的所有对象。

```
var categoryData = {
animals: {
    name: "Animals",
    description: "All your favorites from aardvarks to zebras.",
    items: [
        {
            name: "Pets"
        },
        {
            name: "Farm Animals"
        },
        {
            name: "Wild Animals"
        }
    ]
},
colors: {
    name: "Colors",
    description: "Fresh colors from the magic rainbow.",
    items: [
        {
            name: "Blue"
        },
        {
            name: "Green"
        },
        {
            name: "Orange"
        },
        {
            name: "Purple"
        },
        {
            name: "Red"
        },
        {
            name: "Yellow"
        },
        {
            name: "Violet"
        }
    ]
},
vehicles: {
    name: "Vehicles",
    description: "Everything from cars to planes.",
    items: [
        {
            name: "Cars"
        },
        {
            name: "Planes"
        },
        {
            name: "Construction"
        }
    ]
} 
```

};

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-24T14:08:06.090

那是因为 categoryData 不是一个数组——它是一个对象。虽然一些 JS 对象（`arguments`例如 ）支持`length`属性，但那些使用对象文字符号创建的对象不支持。

您可以自己计算对象的长度，如下所示：

```
function countProps(obj) {
    var count = 0;
    for (var p in obj) {
      obj.hasOwnProperty(p) && count++;
    }
    return count; 
} 
```

如果您的目标环境支持（或已填充）该`Object.keys`方法，这甚至可以以更简单的方式完成：

```
function sizeObj(obj) {
  return Object.keys(obj).length;
} 
```

...这正是在[Underscore.js 库方法](https://github.com/documentcloud/underscore/blob/master/underscore.js#L366)中完成的方式：

```
_.size = function(obj) {
    if (obj == null) return 0;
    return (obj.length === +obj.length) ? obj.length : _.keys(obj).length;
}; 
```

# c# - 在 WinRT 中使用动态数据类型反序列化 JSON

> ID：13541966
> 
> 赞同：1
> 
> 时间：2012-11-24T14:06:26.960
> 
> 标签：c#, json, dynamic, windows-runtime, json.net

我最近尝试使用带有动态数据类型的 JSON.Net API 反序列化 JSON 内容。

我真的很努力地搜索了论坛，发现在WinRT中确实可以这样做。

示例 JSON 可以是：

```
string json = "{\"message\":\"Sample Message\"}" 
```

我使用了以下格式：

```
dynamic result = JsonConvert.DeserializeObject<dynamic>(json); 
```

它成功地将内容反序列化为结果。但是当我尝试使用如下语法访问它时：

```
string message = result.message; 
```

它会导致一个错误，即：

> “object”不包含“message”的定义，并且找不到接受“object”类型的第一个参数的扩展方法“message”（您是否缺少 using 指令或程序集引用？）

我在互联网上尝试了许多 json 样本，但错误仍然相同。说真的，几个小时前我试过了，它确实有效！但是这次我找不到我缺少的东西。

PS：我只需要使用动态，因为我的实际 Json 包含动态字段名称。一旦它就像：

```
{"New York" : "Its in United States"} 
```

有时就像：

```
{"London" : "Its in United Kingdom"} 
```

（虽然是废话！：P）我猜json2csharp类方法在这里不起作用，如果有一些次要和更有效的方法。请指导我。我要解析的真实 Json 非常复杂。如果需要发布，我会发布它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T14:20:20.160

我在我的个人项目中使用 JSON.NET，但使用方括号语法进行反序列化，如下所示：

```
Id = jsonResult["object_id"].ToObject<int>(), 
```

要实际获取 JSON 对象，我会这样做：

```
var response = await client.GetStringAsync(parameters);
var jsonResult = JToken.Parse(response)["results"].Children(); 
```

在对使用 JSON.NET 的不同方式进行了大量研究之后，我采用了这种方法。读完这篇文章后，我认真考虑过走动态路线：[http ://www.west-wind.com/weblog/posts/2012/Aug/30/Using-JSONNET-for-dynamic-JSON-parsing](http://www.west-wind.com/weblog/posts/2012/Aug/30/Using-JSONNET-for-dynamic-JSON-parsing)

然而，最后我决定反对动态对象，因为当我用方括号语法填充我的普通对象时，我会立即返回到强类型环境，智能感知将开始捕捉我可能犯的任何错误。我将它与 LINQ 查询结合起来，并在相对较少的行中填充一组相当复杂的对象。

对我来说，动态对象是反序列化过程中的一个弱类型步骤，我希望尽可能避免。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T14:18:50.030

我不太确定您尝试做什么，但也许这会有所帮助：

```
[TestCase("{\"message\":\"Sample Message\"}", "Sample Message")]
[TestCase("{\"New York\" : \"Its in United States\"}", "Its in United States")]
[TestCase("{\"London\" : \"Its in United Kingdom\"}", "Its in United Kingdom")]
public void TestNameTest(string json, string expected)
{
    var result = JObject.Parse(json);
    var value = result.Values().Single();
    var jValue = new JValue(expected);
    Assert.AreEqual( jValue,value);
} 
```

# java - 识别独特的访客，先进的方法？(PHP/Java)

> ID：13541967
> 
> 赞同：9
> 
> 时间：2012-11-24T14:06:32.093
> 
> 标签：java, php, ip

我是一个主要的，所谓的“顶级名单”的创始人。用户可以将他们的网站提交到toplist 并通过获得toplist 条目的投票来获得更高的位置。

游客平均年龄较小，主要在 13-20 岁之间。它们带来好处，但也带来坏处。在过去的 5 年里，我一直在积极打击使用机器人来获取选票的“骗子”。这些机器人使用代理、不同的用户代理，甚至设法解决多种验证码问题（reCAPTCHA、SolveMedia 和自定义验证码）。自从我引入了一个新系统，该系统进行随机布局并在每次页面加载时加载 15 个不同的 CAPTCHA 系统中的 1 个，这些机器人的使用已经大大减少。这似乎不再是问题了。

人们现在已经转向手动作弊。他们使用的浏览器插件几乎在每次页面加载时都会更改其 IP 地址（例如：[https](https://addons.mozilla.org/en-us/firefox/addon/ipflood/) ://addons.mozilla.org/en-us/firefox/addon/ipflood/ ）。我似乎真的找不到解决这个问题的方法，但这是一个非常大的问题。很难相信，但这些孩子甚至手动解决了 5000 个验证码问题，这需要很长时间。

我的问题是，谁能帮我想办法解决这个问题？我一直在使用 cookie 和会话设置，但他们已经开始注意到并删除它们。我将介绍用户账户，让通过账户投票变得更有趣，但我不想要求账户。我怀疑是否存在，但是否还有其他方法可以对抗作弊（可能就像 Java 网络应用程序一样，它可以避开浏览器设置的代理并将真实 IP 传递给页面，如果可能的话？）？还是我应该放弃并聘请人们进行日常检查，看看该网站是否有可能获得如此多的选票？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T14:41:13.110

我建议你实现某种 IP 可信机制，因为开放代理使用的 IP 地址通常用于非法用途。
如此多的这些地址被蜜罐捕获并被多个组织列入黑名单。以蜜罐项目为例：
[https](https://www.projecthoneypot.org/)
://www.projecthoneypot.org/ 这是一个巨大的数据库，可以`PHP`使用 DNS 查找功能轻松实现。
[如果我没记错的话， http://www.stopforumspam.com/](http://www.stopforumspam.com/)也
很好，它提供了一个 REST 接口。
除此之外，还有数百个将各种活动列入黑名单的 DNSBL，请查看一些代理 dnsbls：
[http](http://spamlinks.net/filter-dnsbl-lists.htm) ://spamlinks.net/filter-dnsbl-lists.htm或[http://dnsbl.tornevall.org/](http://dnsbl.tornevall.org/)或[http://www.sorbs.net/](http://www.sorbs.net/)

最后但并非最不重要的是，您可以使用常见的 PHP 方法来阻止代理（最简单的方法是检查 HTTP-X-Forwarded 标头，但并非所有代理都提供它）
在此处继续阅读：[https](https://meta.wikimedia.org/wiki/Proxy_blocking) ://meta.wikimedia.org/wiki/Proxy_blocking或此处：[通过 PHP 检测具有代理服务器的客户端](https://stackoverflow.com/questions/858357/detect-clients-with-proxy-servers-via-php)

# javascript - javascript 表单验证 if 语句

> ID：13541968
> 
> 赞同：2
> 
> 时间：2012-11-24T14:06:45.513
> 
> 标签：javascript, html, forms, validation

我正在构建一个注册表单，我发现 Safari 浏览器不能使用 HTML5 的“必需”标签。所以我构建了这个 Javascript 脚本来确保用户必须提交数据，否则表单将不会提交。

但是，如果您输入了用户名和密码，但没有输入电子邮件地址，则表单仍会提交。（如果您遗漏用户名和/或密码，则不会提交表单）。

所以问题似乎出在脚本的电子邮件地址部分。如果电子邮件字段为空白，我不希望提交表单。

这是我的代码：

```
<script>
function ValidateLoginForm()
{
    var username = document.form1.username;
    var password = document.form1.password;
    var email = document.form1.email;

      if (username.value == "")
    {
        alert("Your username wasn't recognised.");
        username.focus();
        return false;
    }

      if (password.value == "")
    {
        alert("Please enter a password.");
        password.focus();
        return false;
    }
      if (email.value == "")
    {
        alert("Please enter your email address.");
        mypassword.focus();
        return false;
    }
    else{
    return true;
    }
}
</script> 
```

这是我的表格（在表格内）

```
<table width="300" border="0" align="center" cellpadding="0" cellspacing="1" bgcolor="#CCCCCC">
<tr>
<form name="form1" method="post" action="login/process.php" onsubmit="return ValidateLoginForm();">
<td>
<table width="100%" border="0" cellpadding="3" cellspacing="1" bgcolor="#FFFFFF">
<tr>
<td colspan="3"><center><strong>Registration Form</strong></center></td>
</tr>
<tr>
<td width="78">Username</td>
<td width="6">:</td>
<td width="294"><input name="username" type="text" id="username" required></td>
</tr>
<tr>
<td>Password*</td>
<td>:</td>
<td><input name="password" type="text" id="password" pattern=".{5,}" title="Minimum length of 5 letters or numbers."  required></td>
</tr>
<tr>
<tr>
<td>Email</td>
<td>:</td>
<td><input name="email" type="text" id="email" required></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><input type="submit" name="submit" value="Submit Registration Form"></td>
<p>*Password must consist of numbers and letters.. 5 Characters minimum.</p>
</tr>
</table>
</td>
</form>
</tr>
</table> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:09:20.473

看起来您正在关注一个不存在的项目`mypassword`，这会导致您的脚本错误终止并且表单正常提交。

```
if (email.value == "")
{
    alert("Please enter your email address.");
    // Focus the email rather than mypassword (which doesn't exist)
    email.focus();
    return false;
}
// All's well if you got this far, return true
return true; 
```

[这是工作代码](http://jsfiddle.net/2fZAn/)

始终在打开浏览器的错误控制台的情况下开发 JavaScript，这一点很重要。您会看到有关 undefined object 的错误`mypassword`，这可能会将您指向代码中的错误行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T14:26:10.723

如果没有 html5 标签，使用一个通用的类名，它会是

```
<form name="form1" method="post" action="login/process.php" onsubmit="return ValidateLoginForm();">
<td>
<table width="100%" border="0" cellpadding="3" cellspacing="1" bgcolor="#FFFFFF">
<tr>
<td colspan="3"><center><strong>Registration Form</strong></center></td>
</tr>
<tr>
<td width="78">Username</td>
<td width="6">:</td>
<td width="294"><input class="inputElement" type="text" name="username" id="username" ></td>
</tr>
<tr>
<td>Password*</td>
<td>:</td>
<td><input class="inputElement" type="text" name="password" id="password" pattern=".{5,}" title="Minimum length of 5 letters or numbers."  ></td>
</tr>
<tr>
<tr>
<td>Email</td>
<td>:</td>
<td><input class="inputElement" type="text" name="email" id="email" ></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><input type="submit" name="submit"  value="Submit Registration Form"></td>
<p>*Password must consist of numbers and letters.. 5 Characters minimum.</p>
</tr>
</table>
</td>
</form>

<script type="text/javascript">

function ValidateLoginForm()
{
    var inputElements = document.getElementsByClassName('inputElement');;
    for(var i=0;i<inputElements.length;i++){
        if(!inputElements[i].value){
            alert(inputElements[i].name +' cannot be empty');
            return false;
        }
    }
    return true;
}
</script> 
```

# java - 以编程方式导航到 JSF 2.0 中的错误页面

> ID：13541974
> 
> 赞同：0
> 
> 时间：2012-11-24T14:07:46.447
> 
> 标签：java, jsf-2, exception-handling, navigation, faces-config

在我的应用程序中，每当发生异常时，我都愿意导航到错误页面。被`RuntimeException`处理和检查并再次抛出。为此，我在 Faces 配置中定义了一个全局导航规则：

```
<navigation-rule>
    <from-view-id>*</from-view-id>
    <navigation-case>
        <from-outcome>error</from-outcome>
        <to-view-id>/error.xhtml</to-view-id>
    </navigation-case>
</navigation-rule> 
```

在我的`catch`街区中，我试图导航为：

```
FacesContext fctx = FacesContext.getCurrentInstance();
Application application = fctx.getApplication();
NavigationHandler navHandler = application.getNavigationHandler();
navHandler.handleNavigation(fctx,null, "error"); 
```

但它不起作用。我`Exception`强行抛出一个，但它没有导航到所需的错误页面。

任何指针都会对我很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:42:56.993

我想建议`error`使用重定向页面`ExternalContext`。你必须配置你`Exception`的`web.xml`

```
FacesContext context = FacesContext.getCurrentInstance();
ExternalContext extContext = context.getExternalContext();
String url = extContext.encodeActionURL(extContext.getRequestContextPath() + "/error");
extContext.redirect(url); 
```

web.xml

```
<error-page>
    <exception-type>java.lang.Exception</exception-type>
    <location>/error</location>
</error-page> 
```

如果使用`Jboss-Seam`，很容易重定向`error/warnning`基于`exception`.

页面.xml

```
<exception class="org.jboss.seam.security.NotLoggedInException">
    <redirect view-id="/login.xhtml">
        <message severity="warn">#{messages['org.jboss.seam.NotLoggedIn']}</message>
    </redirect>
</exception>

<exception>
    <redirect view-id="/error.xhtml">
        <message severity="error">Unexpected error, please try again</message>
    </redirect>
</exception> 
```

# java - 使用 Java 处理跨浏览器的多次登录

> ID：13541975
> 
> 赞同：1
> 
> 时间：2012-11-24T14:07:49.260
> 
> 标签：java, login

我已经创建了动态 Web 应用程序。有一个带有 ENABLED 列的 USER 表来检查用户是否已经登录：

*   **ENABLED** = true --> 登录，否则不登录
*   如果我登录了，我不能同时在另一个浏览器中登录
*   但是如果我登录并关闭浏览器，我该如何处理进一步的登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T14:35:31.683

通常你会指定一个会话超时，（即 10 分钟），这意味着会话将在最后一次连接后存活 10 分钟。

也许您可以将启用的列更改为存储会话到期时间的日期时间列，该列应在用户发出的每个请求中更新。

在此过期时间之前完成的任何登录请求都应返回错误，但超过此过期时间的登录请求可能会成功。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T18:01:46.847

除非您需要登录历史记录，否则您无需保留登录启用列来维护用户会话。以下是实现目标的步骤。

1.  用户打开登录页面并首次登录，将登录信息保存在会话映射中。
2.  当他们注销时，清除会话映射或使会话无效（`httpSession.invalidate(); userSessionMap.remove(userName);`）
3.  如果用户已经登录并尝试从其他浏览器，请检查会话映射并向他们发出警告“您已经登录，是否要从其他位置注销？”
4.  对于 3，如果说是，则使先前的会话无效并创建新的登录
5.  保持会话超时
6.  如果他们关闭浏览器而无需注销，下一个登录页面将提示与第 3 点中提到的相同的警告消息，因为每次都会创建一个新会话。

而已。希望你能实施。

# c# - 如何通过代码自动化/模拟 Java Applet 的用户导航？

> ID：13541978
> 
> 赞同：1
> 
> 时间：2012-11-24T14:08:28.980
> 
> 标签：c#, java, applet, screen-scraping

我有一个旧的外部 Java Applet 应用程序。当我说外部时，我的意思是我无法访问源代码。我正在寻找有关如何通过代码执行以下操作的建议：

1.  在后台打开小程序。
2.  浏览小程序，选择几个选项
3.  从 TextBox 获取输出并将输出放入内存中，以便我可以进行一些处理
4.  关闭小程序。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-24T14:24:05.690

您想要自动化用户操作。有很多软件可以做到这一点，[WinAutomation](http://www.winautomation.com/) ，[AutoIt](http://www.autoitscript.com/autoit3/index.shtml)， [AutoHotkey](http://www.autohotkey.com/) 等等......搜索谷歌会有所帮助

# asp.net - 天蓝色 asp.net Web 应用程序上的 Hotmail 登录

> ID：13541980
> 
> 赞同：0
> 
> 时间：2012-11-24T14:08:40.570
> 
> 标签：asp.net, iis, azure, hotmail

我正在开发将在 Windows Azure 上运行的 ASP.NET Web 应用程序。在我的本地环境中，应用程序的 http 地址是 127.0.0.1:81。

我想使用 hotmail 帐户登录用户的可能性。为此，我必须注册我的应用程序域才能使用 hotmail 服务（例如 www.application.com）。

要进行开发 hotmail 文档，建议将域地址绑定到我的开发机器本地主机地址。（通过更改主机文件并将行 127.0.0.1 www.application.com），这样每次在我的机器上都会引用我的域地址应用程序它被重定向到本地主机。

我面临的问题是 Azure 默认使用端口 81，因此我的应用程序的 localhost 地址是 127.0.0.1:81，当我将 IIS 服务器设置为默认侦听该端口时，Azure 会更改该端口。因此，两个应用程序必须在一个端口 Azure 本地开发环境和 IIS 上工作。

任何人都可以指出我的解决方案吗？

问候沃伊切赫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:36:35.480

您是否考虑过使用身份联合[访问控制服务？](http://msdn.microsoft.com/en-us/library/windowsazure/gg429786.aspx)这应该允许您使用 live-id 对您的应用程序进行身份验证如果没有 - 请查看[Using Access Control Service for Identity Federation](http://yossidahan.wordpress.com/2011/10/17/using-access-control-service-for-identity-federation/)和[End-to-end authentication and authorization scenario for MVC+ACS](http://yossidahan.wordpress.com/2012/02/19/end-to-end-authentication-and-authorisation-scenario-for-mvcacs/)

我知道已经添加了额外的功能，并且我已经有一段时间没有看到这个了（可能会在几周内再次花一些时间），但希望如上所述的现有功能没有太大变化。

# ruby-on-rails-3 - 活动模型验证 rails 3

> ID：13541981
> 
> 赞同：0
> 
> 时间：2012-11-24T14:08:53.017
> 
> 标签：ruby-on-rails-3, activemodel

我有一个消息模型，我一直在查看各种 gems/js 以进行客户端验证。然后我开始阅读有关 Active Model Validations 的内容，我对 Rails 很陌生，所以请原谅我没有完全理解文档。

首先，我是否正确地说我可以使用 ActiveModel Validation 执行客户端验证并设置我自己的自定义错误消息

我在消息模型的顶部

```
include ActiveModel::Validations 
```

进一步阅读已确定

我应该使用

```
 validates_with MyValidator 
```

但这不起作用，因为我收到错误消息

```
uninitialized constant Message::MyValidator 
```

如果我把它放在模型中

我也读过-

```
 To cause a validation error, you must add to the record‘s errors directly from within the validators message

class MyValidator < ActiveModel::Validator
def validate(record)
record.errors.add :base, "This is some custom error message"
record.errors.add :first_name, "This is some complex validation"
# etc...
end 
```

所以这是说我可以在客户端添加我自己的自定义错误消息？

我目前的问题是弄清楚它要做什么，我把这些类和方法放在哪里等等。如果有人能指出我正确的方向，我将不胜感激，我真的很想学习

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:23:11.820

ActiveModel 验证不提供客户端验证。如果您想在客户端使用 Rails 验证器，我建议您使用[client_side_validations](https://github.com/bcardarella/client_side_validations) gem。

如果您在开始时遇到问题，我建议您在模型中执行一个简单的验证，并在尝试将其移动到客户端之前验证它是否有效。例如，在您的`Message`班级中：

```
# app/models/message.rb
class Message
  include ActiveModel::Validations
  attr_accessor :sender
  validates :sender, presence: true
end

# in the console
m = Message.new

m.valid?                #=> false
m.errors.full_messages  #=> ["Sender can't be blank"] 
```

然后开始使用其他类型`validates`的.`validate``validates_with`

# c - 我什么时候应该使用和不使用寄存器变量？有缺点吗？

> ID：13541982
> 
> 赞同：0
> 
> 时间：2012-11-24T14:09:09.667
> 
> 标签：c, variables, types

> **可能重复：**
> [C 中的“注册”关键字？](https://stackoverflow.com/questions/578202/register-keyword-in-c)

如果我将几乎所有内容都声明为寄存器变量怎么办？这会加快我的程序是吗？或者有什么缺点。因为我很难选择声明为寄存器变量的变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T14:14:52.670

您不能获取寄存器变量的地址。

除此之外，编译器擅长寄存器分配，而且您几乎不想自己将变量声明为寄存器（编译器可以自由地忽略提示——如果主要编译器假装`register`什么都不做，我不会感到惊讶，除非被告知不要优化代码）。

# ruby-on-rails - Ruby on Rails 表单中的 HTML5“必需”验证

> ID：13541983
> 
> 赞同：68
> 
> 时间：2012-11-24T14:09:13.887
> 
> 标签：ruby-on-rails, html, validation

我在其他任何地方都看不到这个问题，希望它是一个快速而简单的问题。

如何在我的表单（ruby on rails）中使用 HTML5 验证器，例如“必需”？

例如，如果我在其中使用 HTML5 验证，这个基本表单会是什么样子？

```
<%=form_for @testimonial do |t|%> 
<dl>
  <dt><label for="testimonial_rating">Rating</label></dt>
  <dd><%=t.select :rating, Testimonial.ratings%></dd>
  <dt><label for="testimonial_content">Comments</label></dt> 
  <dd><%=t.text_area :content, :rows => 3%></dd>
  <dd><button class="button success">Submit Review</button></dd>
</dl>
<%end%> 
```

不用说，仍然需要服务器端验证。

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-11-24T14:26:25.250

啊，这很容易`:required => true`

例如：`<%=t.text_area :content, :rows => 3, :required => true%>`

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-11-24T16:16:49.673

补充一点，如果您有电子邮件字段，您还可以使用“模式”属性来验证电子邮件的格式

```
<%=form.text_field :email, :required => true, :pattern => '[^@]+@[^@]+\.[a-zA-Z]{2,6}' %> 
```

:)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-05-13T18:37:34.783

除了@prashantsahni 答案。您也可以使用**type = 'email'**而不是正则表达式模式，那么您的 erb 模板将如下所示：

```
<%= f.email_field :email, id: 'user_email', type:'email', required: true, placeholder: "Email" %> 
```

[有关使用 html5 进行表单验证的更多信息](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Forms/Data_form_validation)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-04-17T20:55:36.680

新语法 `<%= f.text_field :email, class: "form-control", required: true %>`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-03-24T13:23:10.917

这是一个带有通用属性的小示例，对于必需，您只需添加 required:true，但不要忘记在后端应用此验证。

```
<%= f.text_field
    id: "yourID",
    class: "yourCLass",
    placeholder: "Your message",
    maxlength: 14,
    required: true
%> 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-03-13T10:47:55.137

这可以通过`:required => true`在输入字段中添加参数来轻松完成：

例如

```
f.text_field :first_name, :required => true
text_field_tag :first_name, nil, :required => true 
```

进一步推动边界，您可以为您的输入添加模式匹配器，例如电子邮件：

```
f.email_field :email, 'Email', :required => true, :pattern => '[^@]+@[^@]+\.[a-zA-Z]{2,6}' 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-05-16T11:09:37.890

为了完成其他答案，有一个很棒的[gem html5_validations](https://github.com/amatsuda/html5_validators)，它充分利用了从模型中的 ActiveRecord Validations 读取的 HTML5 验证。不需要额外的代码，只需安装它。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-07-17T19:26:04.980

如果没有任何效果，请使用它

```
include_blank: false, required: true 
```

# ruby - 如何在事件机器中捕获异常

> ID：13541984
> 
> 赞同：3
> 
> 时间：2012-11-24T14:09:15.610
> 
> 标签：ruby, exception, eventmachine

我将 eventmachine 1.0.0 与 ruby​​ 1.9.3 一起使用。现在，当发生异常时，它会被默默地忽略。反应堆继续运行，没有任何输出。当然，我没有任何 `rescue`捕获异常的自定义命令。

这就是我启动反应堆的方式。但我`error_handler`从来没有被叫过...... :-(

```
 EventMachine::run do
    EventMachine.error_handler do |e|
      $stderr.puts "Exception during event: #{e.message} (#{e.class})"
      $stderr.puts (e.backtrace || [])[0..10].join("\n")
    end

    puts "Starting ftp server on port 21"
    EventMachine::start_server("0.0.0.0", 21, self)
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T03:36:57.250

看看[这个线程上的`error_handler`使用](https://groups.google.com/forum/#!topic/eventmachine/I9UjAUjMTtM)。如果您的代码出现异常，则事件循环终止。这可能是没有调用 error_handler 的原因。它主要用于将 C 级错误传达给 Ruby。

# html - 接受 html 形式的字符集属性

> ID：13541988
> 
> 赞同：2
> 
> 时间：2012-11-24T14:09:30.127
> 
> 标签：html, http-headers

[accept-charset](http://www.w3schools.com/tags/att_form_accept_charset.asp)属性指定要用于表单提交的字符编码。在对表单提交数据进行编码时，该属性会覆盖页面头字段中指定的html页面的默认编码。服务器如何知道表单提交的数据使用哪种编码进行编码？浏览器是否发送任何请求标头以指定编码类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:00:58.467

[HTML5 建议将此作为表单输入值：](http://dev.w3.org/html5/spec/attributes-common-to-form-controls.html#attr-fe-name)

> _字符集_
> 
> 如果将该值用作没有 value 属性的 Hidden 控件的名称，则在提交期间会自动赋予一个由提交字符编码组成的值。

快速测试似乎表明它在浏览器中得到了很好的支持，至少可以追溯到 IE7。

# c - 函数中的 malloc 不能正常工作

> ID：13541990
> 
> 赞同：2
> 
> 时间：2012-11-24T14:09:47.547
> 
> 标签：c, ubuntu, malloc

我不明白为什么整个事情都不起作用。

我只想`malloc`在函数中做`func`，当我从它返回时，`malloc`消失了......我得到了

> *** 检测到 glibc****./test: free(): 无效指针: 0xb76ffff4 ** **

 *```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>

#include <string.h>
#include <errno.h>

int func(char *p) {
    p=(char*)malloc(1);
    *p='a';
    printf("1\. p= %c\n",*p);
    return 0;
}

int main()
{
    char *p;

    func(p);
    printf("2\. p= %c\n",*p);
    free(p);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T14:22:39.423

```
char *p; 
```

使指针指向main（），您可以将其传递给另一个函数，但是您通过值传递它，因此您对它所做的任何更改（例如更改其指向的内容）超出范围。不会“坚持” .

解决方案是将指针传递给指针，或者简单地传递 p 的地址：

```
func(&p); 
```

但是不要忘记更改func()的参数列表！

```
int func(char **p) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T14:11:34.177

在 func 中，p 是您传递给它的指针的副本，因此 p 在 func 内部创建并在 func 完成时删除。

你有两个解决方案：

1.  传递一个指向指针的指针，一个 char **p，然后 do `*p = malloc(1)`，然后 func 将接受一个 char **p
2.  返回分配的变量 un func 并分配它： `p = func();`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-24T14:14:02.687

传入`&p`main 意味着调用 func`func(&p)` 将函数签名更改`func(char *p)`为`func(char **p)`

`p`in`func`是本地的，所以`func`当`func`退出时它被破坏并导致内存泄漏。

在 main 中，您正在释放一个未指向由 分配的内存的指针，`malloc`在这种情况下也是`calloc`如此，并且它没有释放您分配的内存，因此它是内存泄漏`free(p)``Undefined behaviour``func`

第一种方法：

```
void func(char **p)
{
 *p=malloc(1); 
//rest of your code here 
 }

int main()
{
 int *p;
 func(&p);
 // your code here 
 free(p); 
} 
```

方法二：简单不用`**`

```
char * func(char *p)
{
p=malloc(1);
// rest of code here 
return p; 
}

int main()
{
char *p;
p=func(p);
//rest of code here 
free(p);
} 
```*

# xslt - 如何在 xsl:when 中只显示第一个节点

> ID：13541991
> 
> 赞同：1
> 
> 时间：2012-11-24T14:09:58.963
> 
> 标签：xslt

我有一个 xsl:when 显示：

*   类别
*   图片

我想要的是显示所有图像，但只在它们上方显示一次类别名称，因为它们对于该图像集都是相同的。

问：我该如何做到这一点？

```
<xsl:for-each select="/data/commissions/entry">
    <xsl:variable name="category-path" select="commission-category"/>

    <xsl:for-each select="imageset/item">               
            <xsl:variable name="image-path" select="image/filename"/>

            <li>
                    <!-- this is the category name --> 
                    <xsl:value-of select="$name-path" />

                    <!-- this is the photo -->
                    <img src="{$image-path}" alt="" />
            </li>
    </xsl:for-each> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T15:52:08.263

移动这个：

```
<xsl:value-of select="$name-path" /> 
```

*`<xsl:for-each>`指令*前*：*

 *```
<xsl:for-each select="/data/commissions/entry">
    <xsl:variable name="category-path" select="commission-category"/>

    <!-- this is the category name --> 
    <xsl:value-of select="$name-path" />

    <xsl:for-each select="imageset/item">               
            <xsl:variable name="image-path" select="image/filename"/>

            <li>

                    <!-- this is the photo -->
                    <img src="{$image-path}" alt="" />
            </li>
    </xsl:for-each> 
```*

# iphone - iphone 802.11 扫描

> ID：13541993
> 
> 赞同：2
> 
> 时间：2012-11-24T14:10:05.830
> 
> 标签：iphone, geolocation, position, wifi

我正在开发一个室内位置使用wifi的系统。但是我遇到了与这个苹果图书馆有关的问题。曾经是私有的，现在是公开的。

我在哪里使用代码。

```
libHandle = dlopen(”/System/Library/SystemConfiguration/IPConfiguration.bundle/IPConfiguration”, RTLD_LAZY);

apple80211Open = dlsym(libHandle, “Apple80211Open”);
apple80211Bind = dlsym(libHandle, “Apple80211BindToInterface”);
apple80211Close = dlsym(libHandle, “Apple80211Close”);
apple80211Scan = dlsym(libHandle, “Apple80211Scan”);
apple80211Open(&airportHandle);
apple80211Bind(airportHandle, @”en0″); 
```

这是 IOS6 中的代码工作 - 在根 /Application

扫描设备旁边的天线，以防 Iphone。从而测量与天线相关的距离。

把苹果阻止访问这个库。我想知道这种发展是否还有其他选择。一个新的图书馆。执行相同的功能。

不打算越狱应用程序安装在设备的根文件夹中时可以完美运行。

但是打算将源代码发布到社区。甚至在苹果商店推出一个测试应用程序。

谢谢您的帮助。att Eduardo Rabelo 电子邮件 eduardorabelo@live.com

# .htaccess - 这个 .htaccess 有什么问题？

> ID：13541996
> 
> 赞同：1
> 
> 时间：2012-11-24T14:10:33.910
> 
> 标签：.htaccess, apache2, html5boilerplate, server-error

这个 .htaccess 是由 crontab 生成的；顺便说一句，我想指定访问 + 1 周。但是我拥有的 .htaccess 是：

```
<FilesMatch "(./|\.(html|js))$">
Header set Cache-Control "max-age=604800, public"
Header set Expires "Sat, 01 Dec 2012 02:34:43 UTC"
</FilesMatch>
<FilesMatch "(\.css)$">
Header set Cache-Control "max-age=2592000, public"
Header set Expires "Mon, 24 Dec 2012 02:34:43 UTC"
</FilesMatch>
<FilesMatch "\.(ico|pdf|flv|jpg|jpeg|png|gif|swf)$">
Header set Cache-Control "max-age=31536000, public"
Header set Expires "Sun, 24 Nov 2013 02:34:43 UTC"
</FilesMatch> 
```

该文件是 /home/jonathan/.htaccess，Apache2 错误日志指出：

[2012 年 11 月 24 日星期六 14:03:46] [警报] [客户端 66.249.75.28] /home/jonathan/.htaccess：无效命令“标题”，可能拼写错误或由服务器配置中未包含的模块定义
[星期六十一月24 14:03:46 2012] [alert] [client 66.249.75.28] /home/jonathan/.htaccess: 无效的命令“标题”，可能拼写错误或由服务器配置中未包含的模块定义

如何更改此 .htaccess 以便理想情况下它是静态的，为不同的扩展指定一周或一个月或其他任何内容，并且无论如何设置它不会在有人尝试使用它时产生服务器错误（500）？关于 Header 的抱怨看起来像是二次伤害；这发生在我迁移到 H5BP 时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T04:16:12.730

而不是`Headers`你可以尝试`Expires`这样的指令：

```
ExpiresActive on
ExpiresByType text/html "access plus 1 week"
ExpiresByType text/javascript "access plus 1 week"
ExpiresByType application/javascript "access plus 1 week"
ExpiresByType text/css "access plus 1 week"
ExpiresByType image/gif "access plus 1 week"
ExpiresByType image/jpg "access plus 1 week"
ExpiresByType image/png "access plus 1 week"
...
... 
```

PS：这需要你`mod_expires`在你的`httpd.conf`

# html - 超链接继承颜色，如何克服

> ID：13541997
> 
> 赞同：0
> 
> 时间：2012-11-24T14:10:35.370
> 
> 标签：html, css

我正在编辑 wordpress 的 style.css

我想用白色显示一个超链接，即

```
<a class="viewall" href="/">View All</a>

.viewall {
  color: #ffffff;
} 
```

但它仍然显示黑色的超链接，因为它是从上面定义的 css 继承的。如何克服这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T14:15:00.613

您还需要包含“已访问”的样式。

```
 a.viewall, a.viewall:visited {
     color: #ffffff;
   } 
```

[更多阅读](http://www.w3schools.com/cssref/sel_visited.asp)——包括未访问、已访问、悬停和活动链接的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T14:13:08.457

尝试将 !important 添加到您的 CSS 样式中：

```
.viewall {
  color: #ffffff !important;
} 
```

# asp.net - 如何在 JSON.NET 中编码单引号/撇号

> ID：13541998
> 
> 赞同：11
> 
> 时间：2012-11-24T14:10:40.760
> 
> 标签：asp.net, json.net, json

如何使用 JSON.NET对`'`to进行编码？`\u0027`

所以 json 字符串看起来像这样：

```
{"Id":8,"CompanyName":"Jane\u0027s bakery"} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-02-03T22:10:55.017

样品电话

```
 Newtonsoft.Json.JsonConvert.SerializeObject(your_object,
   Newtonsoft.Json.Formatting.None, 
   new Newtonsoft.Json.JsonSerializerSettings 
   { StringEscapeHandling = Newtonsoft.Json.StringEscapeHandling.EscapeHtml }) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-26T02:22:57.497

Json.NET 4.5 Release 11 添加了一个选项来控制字符串转义。选项之一是转义所有包含单引号的 HTML 字符。

[JsonWriter.StringEscapeHandling](http://james.newtonking.com/projects/json/help/index.html?topic=html/P_Newtonsoft_Json_JsonWriter_StringEscapeHandling.htm)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-20T15:16:20.103

我以为我有同样的要求，但@nick_w 的评论让我意识到我根本不需要转义单引号。

如果您在服务器端代码中将 json 生成为字符串，然后将其输出到客户端 javascript，因此可以将其转换为 javascript 对象，则不需要转义。

（使用 asp 样式语法显示的代码）

使用需要转义单引号的额外步骤...

```
var myData = JSON.parse('<%=myServerGeneratedStringWithSingleQuotesEscaped %>'); 
```

按原样使用 JSON...

```
var myData = <%=myServerGeneratedString %>; 
```

Javascript 将解释一个不带引号的字符串，例如

> [{"name":"Bill"}, {"name":"Ted"}]

作为 javascript 对象。

由于在处理服务器端和客户端字符串时很容易混淆，因此此提醒可能对某人有用。它可能适用于 OP，也可能不适用于 OP - 我敢肯定在很多情况下单引号确实需要转义。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-07-13T21:45:13.857

`Newtonsoft.Json.JsonConvert.SerializeObject(your_object, Newtonsoft.Json.Formatting.None, new Newtonsoft.Json.JsonSerializerSettings { StringEscapeHandling = Newtonsoft.Json.StringEscapeHandling.EscapeHtml })`

是我在对象可能包含撇号时使用的，例如用户名。

# uibutton - 如何隐藏和取消隐藏具有相同 UIButton 的按钮？

> ID：13541999
> 
> 赞同：1
> 
> 时间：2012-11-24T14:10:56.117
> 
> 标签：uibutton, ibaction

当我点击一个按钮时，我必须隐藏一些按钮，并在我再次点击按钮时取消隐藏它们。
这就是我所拥有的：

```
- (IBAction)hideButtons {
    backbutton.hidden = YES; 
    nextbutton.hidden = YES;
    resetbutton.hidden = YES;
} 
```

和

```
- (IBAction)showButtons {
    backbutton.hidden = NO; 
    nextbutton.hidden = NO;
    resetbutton.hidden = NO;
} 
```

我怎样才能用一个按钮做到这一点？起初，按钮应该是不隐藏的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T14:12:48.157

只需使用这个：（如果所有按钮首先处于相同状态，则有效）：

```
backbutton.hidden=!backbutton.hidden; 
nextbutton.hidden=!nextbutton.hidden;
resetbutton.hidden=!resetbutton.hidden; 
```

希望这可以帮助