# StackOverflow 问答 14017000-14017999

# objective-c - 使用 Facebook iOS SDK 的私人消息 Facebook 页面？

> ID：14017002
> 
> 赞同：1
> 
> 时间：2012-12-24T04:15:52.000
> 
> 标签：objective-c, ios, facebook, private-messaging

我正在开发一个 iOS 应用程序，我想让用户使用 Facebook SDK 登录我的应用程序，然后私下向我创建的 Facebook 页面发送消息。我的应用程序可以正常登录 Facebook，我可以让用户在他们自己的墙上发帖，但我想让用户私下向我的 Facebook 页面发送消息？关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T04:36:16.417

你不能用iOS Facebook SDK给他发私信，但是你可以给他发一个App Request，它会显示在用户的AppCenter中，下面的代码会帮助你

```
Facebook * fbReq = [[Facebook alloc] initWithAppId:@"xxxxxxxxxxxxxx" andDelegate:self];

NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"xxxxxxxxxxxxxxxxxxxxx", @"title",
                               @"xxxxxxxxxxxxxxxxxxxxxxxxxxxx",  @"message", 
                               @"xxxxxxxxxxx", @"to",
                               nil];  

[fbReq dialog:@"apprequests" andParams:params andDelegate:self]; 
```

# go - 无法识别的导入路径

> ID：14017005
> 
> 赞同：1
> 
> 时间：2012-12-24T04:16:33.207
> 
> 标签：go

刚刚通过自制软件安装，尝试安装软件包并获得以下信息：

```
~: go get https://github.com/vova616/chipmunk
package https:/github.com/vova616/chipmunk: unrecognized import path "https:/github.com/vova616/chipmunk" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T04:18:59.577

```
go get github.com/vova616/chipmunk 
```

您需要删除`https://`.

有关更多信息，请运行`go help remote`.

# ruby-on-rails - 保存常量查询 - Rails

> ID：14017006
> 
> 赞同：0
> 
> 时间：2012-12-24T04:16:44.623
> 
> 标签：ruby-on-rails

假设我有一个 Products 模型和一个 Categories 模型。

我想在首页上显示每个类别的顶级产品。

我正在做这样的事情（简化）：

```
# Using closure tree gem for category hierarchy
# This returns a list of category IDs, somewhat expensive call if 
# there are a lot of categories nested within "toys"
@categories = Category.find('toys').self_and_descendants
@top_toys = Products.joins(:categories).where(:categories => {:id => category_ids}}).limit(5) 
```

我不确定这是否是最有效的方法。似乎有一种方法可以存储那些相对恒定的类别 ID。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:20:26.157

这更有效一点：

```
@category_ids = Category.select(:id).find('toys').self_and_descendants.collect(&:id)
@top_toys = Products.where(:category_id => @category_ids).limit(5) 
```

几点：

1.  没有理由从类别表中获取类别 ID 以外的任何内容
2.  当您所做的只是使用 category_id 过滤产品时，加入类别表是没有意义的

如果不经常更改，您可以使用 Rails 缓存来存储 @categories 结果。这可能看起来像这样

```
class Category < ActiveRecord::Base

  def self.ids_for_type(category_type) 
    Rails.cache.fetch "category:#{category_type}", :expires_in => 1.day do
      select(:id).find(category_type).self_and_descendants.collect(&:id)
    end
  end

  ..
end 
```

进而

```
@top_toys = Products.where(:category_id => Category.ids_for_type('toys')).limit(5) 
```

注意：**memcache**缓存客户端支持**expires_in**参数，但其他缓存提供者可能不支持。

# vb.net - 如何将十六进制值转换为 ASCII？

> ID：14017007
> 
> 赞同：0
> 
> 时间：2012-12-24T04:16:46.890
> 
> 标签：vb.net, hex, ascii

我正在尝试使用 fstream 编写可执行文件：

```
Dim buffer As String
Dim c As Char = Chr(9)
Dim fs As System.IO.FileStream = New System.IO.FileStream("test.exe", IO.FileMode.OpenOrCreate)
Dim w As System.IO.BinaryWriter = New System.IO.BinaryWriter(fs)

w.Seek(0, System.IO.SeekOrigin.Begin)
w.Write(HEX VALUES HERE)

w.Close()
fs.Close() 
```

要将十六进制转换为 ASCII，我尝试了以下方法：

```
 MessageBox.Show(ChrW(Convert.ToInt32("48", 16)))
  MessageBox.Show(Chr(CInt("&H" & "48")))
  MessageBox.Show(Chr(CInt("&H48"))) 
```

但是，这些功能中的每一个都只能使用单个字符。如何使这些函数适用于整个字符串？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T13:34:02.597

我正在发布另一个答案。您可以使用以下代码来实现您的功能。

```
Dim st As String = "49204c6f76652050726f6772616d6d696e672e"
    Dim com As String
    For x = 0 To st.Length - 1 Step 2
        Dim k As String = st.Substring(x, 2)
        com &= System.Convert.ToChar(System.Convert.ToUInt32(k, 16)).ToString()
    Next 
```

您还可以使用以下代码功能：

```
Dim st As String = "49204c6f76652050726f6772616d6d696e672e"
Dim com As String
For x = 0 To st.Length - 1 Step 2
    com &= ChrW(CInt("&H" & st.Substring(x, 2)))
Next 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T04:25:35.623

您可以使用它来将十六进制字符串转换为 ASCII：

```
Dim hexValue = "48"
Dim ASCII_value = System.Convert.ToChar(System.Convert.ToUInt32(hexValue, 16)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-18T17:03:35.933

我收集了各种十六进制函数并对其进行了更改，直到它们起作用为止。他们来了：

[http://pastebin.com/ewQh5iRa](http://pastebin.com/ewQh5iRa)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-16T19:08:47.690

将 H 转换为十六进制： debug.Print hex(asc("H")) >48 返回再次获得 H： debug.Print chr(val("&H" & "48")) >H

> 让我发送更多细节，举一个简单的例子。**请记住您的答案是如何将十六进制转换为ASCII。**为此，您只需要获取下面描述的函数 hex_to_ascii。

```
Sub test()
Dim str_word As Variant
str_word = "Hello Word"
Debug.Print "We've set=" & str_word

Dim hex_word As Variant
hex_word = str_to_hex(str_word)
Debug.Print "Just for convert to Hex format=" & hex_word
'48656C6C6F20576F7264

Dim ascii_word As Variant
ascii_word = hex_to_ascii(hex_word)
Debug.Print "Getting ASCII format from Hex=" & ascii_word
'072101108108111032087111114100

Dim hex_word_from_ascii As Variant
hex_word_from_ascii = ascii_to_hex(ascii_word)
Debug.Print "Finally converting Hex value to ascii=" & hex_word_from_ascii
'48656C6C6F20576F7264

Dim str_from_hex As Variant
str_from_hex = hex_to_str(hex_word_from_ascii)
Debug.Print "Remember=" & str_from_hex
'Hello Word
End Sub

Function str_to_hex(p_str As Variant) As Variant
Dim x As Long
Dim resp As Variant
Dim tmp As String
For x = 1 To Len(p_str)
  tmp = Mid$(p_str, x, 1)
  resp = resp & Hex(Asc(tmp))
Next
str_to_hex = resp
End Function

Function hex_to_str(p_hex As Variant) As Variant
Dim x As Long
Dim resp As Variant
Dim tmp As String
For x = 1 To Len(p_hex) Step 2
  tmp = Mid$(p_hex, x, 2)
  resp = resp & Chr(Val("&H" & tmp))
Next
hex_to_str = resp
End Function

Function hex_to_ascii(p_hex As Variant) As Variant
Dim x As Long
Dim resp As Variant
Dim tmp As String
For x = 1 To Len(p_hex) Step 2
  tmp = Mid$(p_hex, x, 2)
  resp = resp & Format(Val("&H" & tmp), "000")
Next
hex_to_ascii = resp
End Function

Function ascii_to_hex(p_ascii As Variant) As Variant
Dim x As Long
Dim resp As Variant
Dim tmp As String
For x = 1 To Len(p_ascii) Step 3
  tmp = Mid$(p_ascii, x, 3)
  resp = resp & Hex(tmp)
Next
ascii_to_hex = resp
End Function 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-17T10:37:43.237

有点多余，但我会添加一些我觉得更简单的东西。当你有一个字节数组时使用它。

```
Dim str As String = String.Empty
For Each c In byteArray
    str &= ChrW(c)
Next 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-19T08:54:46.327

**久经考验的代码**

通过复制粘贴创建一个函数

```
Function HexToString(ByVal hex As String) As String
    Dim text As New System.Text.StringBuilder(hex.Length \ 2)
    For i As Integer = 0 To hex.Length - 2 Step 2
        text.Append(Chr(Convert.ToByte(hex.Substring(i, 2), 16)))
    Next
    Return text.ToString
End Function 
```

像这样使用它

```
Debug.WriteLine(HexToString("73696D306E")) 
```

[资源](https://sim0n.wordpress.com/2009/03/28/vbnet-hex-to-string-conversion/)

# javascript - jQuery触发函数是否保证同步

> ID：14017013
> 
> 赞同：18
> 
> 时间：2012-12-24T04:17:16.387
> 
> 标签：javascript, jquery, concurrency, jquery-events

触发功能似乎是同步的。也就是说，所有绑定的函数似乎都是按顺序同步执行的（被调用的函数可能会异步执行某些操作，但这不是问题）。

对于自定义和非自定义（单击、悬停等）事件是否如此？是否有任何 Javascript 的单线程保证不成立的事件？

如果是这样，是否可以更改行为以异步执行它们而不在每个绑定函数中插入超时？

这是一个演示问题的示例：

```
var ele = $('#blah');
// Example of the bound function doing something synchronously
ele.bind('customEvent.sync', function() {
    // Do something synchronously
    window.foo = 'foo';
});

// Example of the bound function doing something asynchronously
ele.bind('customEvent.async', function() {
    window.setTimeout(function() {
        // Do something asynchronously
        window.bar = 'bar';
    }, 0);
});

// Trigger both events
ele.trigger('customEvent');

// If trigger is guaranteed to be synchronous this should alert 'foo:undefined' or possibly 'foo:bar' depending on whether the asych function was called first
// If trigger is NOT synchronous 'undefined:undefined', 'foo:undefined', 'undefined:bar', or 'foo:bar' could be alerted
alert(window.foo + ':' + window.bar); 
```

**更新** 请参阅：[JavaScript 是否保证是单线程的？](https://stackoverflow.com/questions/2734025/is-javascript-guaranteed-to-be-single-threaded) 由于 Javascript 的单线程特性，自定义事件可以保证是同步的。由于浏览器不一致，某些内置事件类型可能不同步。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-24T06:26:12.440

*我自己在上面提供的经过轻微修改的评论选集 - Beetroot-Beetroot：*

*   事件没有持续时间；如果附加了处理程序，它们会导致线程启动。因此，事件本身既不能是同步的，也不能是异步的。事件激发的线程将始终是同步的，但可能会启动一个或多个异步进程。

*   `.trigger()`无论触发事件处理程序中可能启动的任何异步进程如何，调用始终是同步的。当触发的处理程序返回时，执行恢复到 .trigger(...) 之后的语句。即， .trigger() 是一个美化的函数调用。

*   在 javascript 中，即使超时持续时间为 0，在使用 setTimeout() 放置的任何内容开始之前，绝对保证当前线程运行完成。与 ajax 相同 - 例如，`$.ajax(...)`保证调用的线程在之前运行完成任何成功/错误/完成处理程序都会启动，即使服务器要立即响应。

*   单线程是 ECMA-262 (javascript) 所固有的，即。在任何时候，最多可以运行一个线程。

*附加点：*

接受的答案[是否保证 javascript 是单线程的？](https://stackoverflow.com/questions/2734025/is-javascript-guaranteed-to-be-single-threaded)是基于一个错误的前提。没有证据表明 javascript 不是单线程的。@KrisGiesing 的评论揭穿了这种误解。

# jquery - Jquery“地址”无法刷新

> ID：14017014
> 
> 赞同：0
> 
> 时间：2012-12-24T04:17:20.187
> 
> 标签：jquery, jquery-plugins

我正在使用 jQuery 地址，但无法在刷新时对其进行初始化...（在除 IE 之外的所有主要浏览器中）这是问题...

当我单击一个链接时，ajax 加载它会完美加载并将“选定”类添加到链接中，因为它应该是。当我使用后退按钮时它也很完美，但是在我单击链接然后点击刷新按钮后，它会重新加载原始状态（减去 ajax）并且不会将“selected”类添加到任何链接或之后再加载 ajax .

这是该页面的链接。[http://www.weightlossexp.com/articles](http://www.weightlossexp.com/articles)

非常感谢任何帮助，在此先感谢。

**[编辑] 代码**

jQuery

```
var init = true, 
        state = window.history.pushState !== undefined;
        // Handles response
        var handler = function(data,topic,w) {
          $("#title_back h1").hide().html(topic).fadeIn(800);
          $('title').html(topic);
          $('#content').html(data).animate({width:w},1500);
          $('#lc').show();
          // $.address.title(/>([^<]*)<\/title/.exec(data)[1]);
        };
        $.address.state('/articles').init(function() {
            // Initializes the plugin
            $('#lc a').address();                
        }).change(function(event) {
            // Selects the proper navigation link
            $('#lc a').each(function() {
                //alert($(this).attr('href')+' - - '+$.address.state() + event.path);
                if ($(this).attr('href') == ($.address.state() + event.path)) {
                    $(this).addClass('selected').focus();
                } else {
                    $(this).removeClass('selected');
                }
            });
            var classL = $(".selected").length;
            if(classL == 1){
                var topic = $('.selected h2').html();
                var action = event.path.substr(1);
                var width = '100%';
            }else{ 
                var topic = "Topics"; 
                var action = '';
                var width = '0px';
            }
            if (state && init) {
                init = false;
            } else {
                // Loads the page content and inserts it into the content area
                $.ajax({
                    url: "scripts/ajax/getSubTitles.php",
                    data: {action:action},
                    type: "post",
                    success: function(data, textStatus, XMLHttpRequest) {
                        handler(data,topic,width);
                    }
                });
            }
        }); 
```

html

```
<div id="lc" style="position:absolute; overflow:hidden;">
                    <a href="/articles/ap" id="ap"><div class="topics" style="border-top:1px solid #d1d1d1; margin-top:20px;"><h2>Anatomy and Physiology</h2></div></a>
                    <a href="/articles/end" id="end"><div class="topics"><h2>Endurance</h2></div></a>
                    <a href="/articles/flex" id="flex"><div class="topics"><h2>Flexibility</h2></div></a>
                    <a href="/articles/myth" id="myth"><div class="topics"><h2>Myths</h2></div></a>
                    <a href="/articles/nut" id="nut"><div class="topics"><h2>Nutrition 101</h2></div></a>
                    <a href="/articles/corr" id="corr"><div class="topics"><h2>Post-Rehab/Corrective Exercise</h2></div></a>
                    <a href="/articles/power" id="power"><div class="topics"><h2>Power</h2></div></a>
                    <a href="/articles/stab" id="stab"><div class="topics"><h2>Stability</h2></div></a>
                    <a href="/articles/str" id="str"><div class="topics"><h2>Strength/Resistance Training</h2></div></a>
                    <a href="/articles/supp" id="supp"><div class="topics"><h2>Supplements</h2></div></a>
                    <a href="/articles/wg" id="wg"><div class="topics"><h2>Weight Gain</h2></div></a>
                    <a href="/articles/wl" id="wl"><div class="topics"><h2>Weight Loss</h2></div></a>
                <div id="content">
                </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T04:34:49.430

您的代码的问题是在您包含 javascripts 的行中

```
<script type="text/javascript" src="lib/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="lib/jquery.address-1.5.min.js"></script> 
```

点击链接后，网址将从

> [http://www.weightlossexp.com/articles](http://www.weightlossexp.com/articles)

至

> [http://www.weightlossexp.com/articles/something](http://www.weightlossexp.com/articles/something)

并且在新的 url 中找不到这两个**js**文件，所以 jquery 和 jquery.address 都不会被加载。

只需用斜杠“/”开始你的 JS 文件的路径，你的代码就可以正常工作了。

所以代码将是这样的：

```
<script type="text/javascript" src="/lib/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="/lib/jquery.address-1.5.min.js"></script> 
```

# python - 如何从scrapy中的json文件中读取行

> ID：14017015
> 
> 赞同：3
> 
> 时间：2012-12-24T04:17:34.600
> 
> 标签：python, json, scrapy, readlines

我有一个 json 文件存储一些用户信息，包括`id`,`name`和`url`. json 文件如下所示：

```
{"link": "https://www.example.com/user1", "id": 1, "name": "user1"}
{"link": "https://www.example.com/user1", "id": 2, "name": "user2"} 
```

这个文件是由一个scrapy spider编写的。现在我想从 json 文件中读取 url 并抓取每个用户的网页。但我无法从 json 文件中加载数据。

目前，我不知道如何获取这些 url。我想我应该先从 json 文件中读取这些行。我在 Python shell 中尝试了以下代码：

```
import json    
f = open('links.jl')    
line = json.load(f) 
```

我收到以下错误消息：

```
Raise ValueError(errmsg("Extra data", s, end, len(s)))
ValueError: Extra data: line 2 column 1- line 138 column 497(char498-67908) 
```

我在网上做了一些搜索。搜索表明 json 文件可能存在一些格式问题。但是json文件是使用scrapy管道创建并填充项目的。有人知道导致错误的原因吗？以及如何解决？关于阅读网址有什么建议吗？

非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T19:30:11.027

正如导出器名称所暗示的那样，这些是 json 行。

看一看，看看和`scrapy.contrib.exporter`之间的区别`JsonItemExporter``JsonLinesItemExporter`

这应该可以解决问题：

```
import json

lines = []

with open('links.jl', 'r') as f:
    for line in f:
        lines.append(json.loads(line)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T06:25:53.693

嗯……那个例外很有趣……我就……把它留在这里（没有保证或良心）。

```
import json
import re

parse_err = re.compile(
    r'Extra data: line \d+ column \d+'
    r' - line \d+ column \d+'
    r' \(char (\d*).*')

def recover_bad_json(data):
    while data:
        try:
            yield json.loads(data)
            return
        except ValueError, e:
            char = parse_err.match(e.args[0]).group(1)
            maybe_data, data = data[:int(char)], data[int(char):]
            yield json.loads(maybe_data)

CORPUS = r'''{"link": "https://www.domain.com/user1", "id": 1, "name": "user1"}

{"link": "https://www.domain.com/user1", "id": 2, "name": "user2"}
'''

gen_recovered = recover_bad_json(CORPUS)

print gen_recovered.next()
print gen_recovered.next()
print gen_recovered.next() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T08:12:19.100

AFAIK，一个 JSON 文件应该包含一个对象。在您的情况下，您有几个：

```
{"link": "https://www.domain.com/user1", "id": 1, "name": "user1"}

{"link": "https://www.domain.com/user1", "id": 2, "name": "user2"} 
```

我会做类似的事情：

```
Python 2.7.3 (default, Sep 26 2012, 21:51:14) 
>>> import json
>>> inpt_json = """{"link": "https://www.domain.com/user1", "id": 1, "name": "user1"}
...     
...     {"link": "https://www.domain.com/user1", "id": 2, "name": "user2"}"""

>>> for line in inpt_json.splitlines():
...     line = line.strip()
...     if line:
...             print json.loads(line)
... 
{u'link': u'https://www.domain.com/user1', u'id': 1, u'name': u'user1'}
{u'link': u'https://www.domain.com/user1', u'id': 2, u'name': u'user2'}
>>> 
```

因此，说“我有一个存储一些用户信息的 json 文件……”是不正确的。Scrapy 将输出存储为“带有 json 编码行的文件”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T05:23:26.193

如果您怀疑 JSON 文档可能格式不正确，我建议将该文档提交给[JSONLint](http://jsonlint.com/)。该工具将美化文档格式，并突出在解析过程中遇到的任何结构或样式问题。我过去曾使用此工具在 JSON 文档生成器中查找多余的逗号和断引号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T05:27:03.150

我以前发现过这种格式设计不佳的 JSON API。这可能不是最好的解决方案，但这是我用来将这种输出转换为包含列表中所有结果对象的 dict 的一个小函数。

```
def json_parse(data):
    d = data.strip().replace("\n\n", ",")
    d = '{"result":[' + d + ']}'
    return json.loads(d) 
```

您可能需要稍微修改一下，具体取决于分隔它们的换行符的数量等。读取文件`.read()`并调用`json_parse`数据，您应该能够通过访问`data["results"]`.

如果您可以让您的抓取结果提供有效的 JSON，那就更好了，但与此同时，这样的事情也可以工作。

# image - 使用鼠标悬停效果时，图像不会调整为骨架容器

> ID：14017027
> 
> 赞同：1
> 
> 时间：2012-12-24T04:20:34.100
> 
> 标签：image, hover, responsive-design, mouseover, image-resizing

我正在使用 Skeleton 创建一个响应式网站。通常，当浏览器窗口大小发生变化时，每个容器中的图像都会相应地调整，但是，我遇到了两个包含鼠标悬停效果的图像的问题。

这是HTML。将鼠标悬停在图像上会触发替换图像。

```
<div class="row">
  <div id="feature" class="eight columns alpha">
<a href="http://swordandplough.com/pages/lookbook" class="cssmouseover" style="background-image: url('http://cdn.shopify.com/s/files/1/0176/5914/files/Flag-Lookbook-Link.jpg?3039');"></a>
</div>
  <div id="feature" class="eight columns omega">
<a href="http://swordandplough.com/pages/video" class="cssmouseover" style="background-image: url('http://cdn.shopify.com/s/files/1/0176/5914/files/Flag-Video-Link.jpg?3039');"></a>
</div>
</div> 
```

这是鼠标悬停 CSS。

```
a.cssmouseover {
display:block;
width:580px;
height:260px;
max-width:100%;
max-height:100%;
background-position:50% 0%;
}
a.cssmouseover:hover {
background-position:50% -100%;
} 
```

我还添加了以下 div ID 以尝试正确调整图像大小，但它不起作用。

```
#feature img {
max-width: 100%;
height: auto;
} 
```

不是按比例缩放，而是图像高度保持相同大小，并且宽度在两侧被裁剪。

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T18:35:21.323

因为您使用的是背景图像，所以应用于#feature img 的属性没有做任何事情。您可能想探索使用`background-size: cover`和使用 2 张图像进行悬停，而不是精灵。这是一篇带有一些很好文档的文章。 [http://voormedia.com/blog/2012/11/responsive-background-images-with-fixed-or-fluid-aspect-ratios](http://voormedia.com/blog/2012/11/responsive-background-images-with-fixed-or-fluid-aspect-ratios)

# iphone - UIScrollview 不会一直滚动

> ID：14017028
> 
> 赞同：0
> 
> 时间：2012-12-24T04:20:48.593
> 
> 标签：iphone, ios, uiscrollview, scroll

所以我有一个滚动视图，我把它放到了我的视图中（在 nib 文件中），因此还没有以编程方式完成任何事情。然后我在这个滚动视图中放置了 9 个间隔开的按钮。现在滚动视图可以完美运行，它可以平滑滚动，但它不会一直滚动到第 9 个按钮。它一直到第 7 个按钮，我假设它是屏幕大小，现在滚动得更远。我是否必须以编程方式执行任何操作来解决此问题，或者我可以只编辑 nib 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:47:06.017

确保您已为滚动视图声明对象并正确连接并在 xib 中也设置了 setDelegate。

进而

请`ViewDidLoad`放置此代码..

```
int width = 320; (if iphone)

int height = 440; (if iphone)

[yourScrollView setContentSize:CGSizeMake(width,height)]; 
```

请根据您的计算确定您的高度和宽度。

# jquery - 如何添加自定义 jquery 验证？

> ID：14017034
> 
> 赞同：0
> 
> 时间：2012-12-24T04:21:10.137
> 
> 标签：jquery, regex, jquery-validate

如何添加自定义 jquery 验证以验证一位或两位数字以及 * 或 #，例如：*2#、*23#

我已经尝试了以下代码，但它不符合我的要求，

```
 $.validator.addMethod("shortCodes", function(value, element) {
    return this.optional(element) || value === "NA" ||
       value.match(/^[0-9,\*#]+$/);
 }, "Please enter only one or two digit number along with(* or #)"); 
```

任何帮助都会非常有用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T04:39:31.507

正则表达式应该是：

```
/^(NA|[0-9*#]{1,2})$/ 
```

使用此正则表达式，您无需单独检查“NA”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:23:18.340

```
 $.validator.addMethod("pattern", function(value, element) {
    return this.optional(element) || this.patternCheck(value);

}, "Please enter 1 or 2 digit number or number along with special characters(* or #)         (ex:5,55,*5,5#,*55#).");

this.patternCheck = function(value){
    if(value.match(/^[\*#]\d{1,2}?[\*#]$/)){
        return true;
    }else if(value.match(/^[\*#]\d{1,2}$/)){
        return true;
    }else if(value.match(/^\d{1,2}[\*#]$/)){
        return true;
    }else if(value.match(/^\d{1,2}$/)){
        return true;
    }else if(value.match(/^[\*#]$/)){
        return true;
    }else{
        return false;
    }

}; 
```

# qt - 调整窗口大小时使 ui 元素调整大小

> ID：14017035
> 
> 赞同：0
> 
> 时间：2012-12-24T04:21:12.230
> 
> 标签：qt, user-interface, resize

我对在 Qt 上使用 ui 文件很陌生。我需要知道的是当用户调整窗口大小时如何使所有元素调整大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T07:09:52.437

要拥有自动调整大小的小部件，您应该将它们放入布局中。看看[Qt 布局管理](http://qt-project.org/doc/qt-4.8/layout.html)系统。

# image - Windows Phone 8 - 在后台生成锁屏图像

> ID：14017042
> 
> 赞同：6
> 
> 时间：2012-12-24T04:22:24.713
> 
> 标签：image, background, windows-phone-8, lockscreen

我正在尝试创建一个使用新的 Windows Phone 8 Live Lockscreen API 的 Windows Phone 8 应用程序（我当前发布的“The Quote”的更新）。我基本上想从应用程序包中随机选择一个图像背景，并在其上放置一个带有随机引号的文本块来创建锁屏图像。我怎样才能在后台定期任务中做到这一点？肯定有办法做到这一点（许多当前的应用程序，包括不同的天气和新闻应用程序在后台本地创建实时锁屏），但我似乎无法找出如何以及到目前为止没有互联网搜索让我得到任何东西有用。

非常感谢任何帮助！

非常感谢你！

**编辑：**

我能够找到一种方法来使用我的内容创建一个 UserControl 并以这种方式对其进行截图：

```
var bmp = new WriteableBitmap(768, 1280);
bmp.Render(LayoutRoot, null);

String tempJPEG = "TempJPEG.jpg";

var myStore = IsolatedStorageFile.GetUserStoreForApplication();
if (myStore.FileExists(tempJPEG))
{
    myStore.DeleteFile(tempJPEG);
}
IsolatedStorageFileStream myFileStream = myStore.CreateFile(tempJPEG);

WriteableBitmap wb = new WriteableBitmap(bmp);

wb.SaveJpeg(myFileStream, wb.PixelWidth, wb.PixelHeight, 0, 100);
myFileStream.Close(); 
```

这种方法给我带来了三个不同的问题：

1.  如果我没有在构造函数中设置 WriteableBitmap 的大小，它会错误地选择它并且锁屏是无用的。

2.  如果我运行上面的代码，它会引发 OutOfMemory 错误

3.  在第一种情况下，控件的背景也存在问题（变黑，即使我已将主网格的背景画笔设置为 ImageBrush 链接到主 Appx 包中的本地文件。

这是完全错误的吗？有更好的（工作）方式吗？

非常感谢大家，感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T16:37:05.733

您很可能在后台代理中遇到内存上限限制，在 WP8 上为 11 MB。我建议您在服务器/Azure 上渲染您的图像，然后将其下载到后台代理中，将其保存到手机中并在锁屏上显示，或者使用 Resource Intesive Task 进行渲染？
我在我的一个应用程序中使用了平铺渲染，当我尝试仅渲染 2 个大小为 336x336 + 159x159px 的平铺图像时遇到了内存上限，因此您可以想象渲染 768x1280 图像也可以轻松达到此上限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T00:53:34.327

> 如果我没有在构造函数中设置 WriteableBitmap 的大小，它会错误地选择它并且锁屏是无用的。

您是否尝试使用 Application.Current.Host.ActualHeight 和 ActualWidth 作为生成的锁屏图像的大小？基本上使锁屏图像适应操作系统当前使用的大小？我很确定 Application.Current 在后台可能为空，因此您必须将其缓存在主应用程序的 ApplicationSettings 中，并在后台代理中使用该信息。

> 如果我运行上面的代码，它会引发 OutOfMemory 错误

是的，那是因为您在 SaveJpeg 调用中使用了 ImageQuality=100。请记住，在 WP8 上运行的后台代理的工作集内存限制为 11MB。将 ImageQuality 降低到 70-80，你应该没问题。

> 在第一种情况下，控件的背景也存在问题（变黑，即使我已将主网格的背景画笔设置为 ImageBrush 链接到主 Appx 包中的本地文件。

加载图像可能需要更长的时间。首先，在将其保存到文件之前尝试调用 WriteableBitmap.Invalidate()。如果这不起作用（因为图像来自远程源），您将不得不等到您尝试捕获的图像的 BitmapImage.ImageOpened 事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-25T23:47:03.957

您可以生成一个图像，但它需要相当多的工作。正如您所指出的 - 您不能只保存整个图像。因此，我更改了保存逻辑以循环遍历图像并一次保存 60 行。请注意，我调用 GC.Collect 3 次以遍历所有 3 代 GC 并摆脱所有内存分配。

```
static IEnumerable<ExtendedImage> GetImageSegments(LockScreenTile tileControl)
{
    const int segmentMaxHight = 60;
    var aggregatePixelHeight = (int)tileControl.ActualHeight;
    tileControl.LayoutRoot.Height = aggregatePixelHeight;
    for (int row = 0; row < aggregatePixelHeight; row += segmentMaxHight)
    {
        tileControl.LayoutRoot.Margin = new Thickness(0, -row, 0, 0);
        tileControl.Height = Math.Min(segmentMaxHight, aggregatePixelHeight - row);
        yield return tileControl.ToExtendedImage();
        GC.Collect();
        GC.WaitForPendingFinalizers();
        GC.Collect();
        GC.WaitForPendingFinalizers();
        GC.Collect();
        GC.WaitForPendingFinalizers();
    }
 } 
```

ExtendedImage 来自 ImageTools 库。一旦我得到可枚举的返回，我调用 PNG 压缩（我调整它以使用图像片段持久化）：

```
var segments = GetImageSegments(tileControl);
double pixelRatio = (template.PixelWidth) / tileControl.ActualWidth;
segments.SaveToPngImage(
    aggregatePixelHeight: (int)(savedActualHeight * pixelRatio),
    pixelWidth: template.PixelWidth,
    densityX: template.DensityX,
    densityY: template.DensityY, 
    directoryName: tileDirectoryName, 
    filePath: filePath); 
```

最后，SaveToPngImage 使用 ImageTools 中的 PngEncoder，我已对其进行了修改：

```
 private void WriteDataChunks(IEnumerable<ExtendedImage> verticalImageSegments)
    {
        byte[] compressedBytes;
        MemoryStream underlyingMemoryStream = null;
        DeflaterOutputStream compressionStream = null;
        try
        {
            underlyingMemoryStream = new MemoryStream();
            compressionStream = new DeflaterOutputStream(underlyingMemoryStream);

            foreach (var verticalImageSegment in verticalImageSegments)
            {
                byte[] pixels = verticalImageSegment.Pixels;
                var data = new byte[verticalImageSegment.PixelWidth*verticalImageSegment.PixelHeight*4 + verticalImageSegment.PixelHeight];
                int rowLength = verticalImageSegment.PixelWidth*4 + 1;

                for (int y = 0; y < verticalImageSegment.PixelHeight; y++)
                {
                    byte compression = 0;
                    if (y > 0)
                    {
                        compression = 2;
                    }
                    data[y*rowLength] = compression;

                    for (int x = 0; x < verticalImageSegment.PixelWidth; x++)
                    {
                        // Calculate the offset for the new array.
                        int dataOffset = y*rowLength + x*4 + 1;

                        // Calculate the offset for the original pixel array.
                        int pixelOffset = (y*verticalImageSegment.PixelWidth + x)*4;

                        data[dataOffset + 0] = pixels[pixelOffset + 0];
                        data[dataOffset + 1] = pixels[pixelOffset + 1];
                        data[dataOffset + 2] = pixels[pixelOffset + 2];
                        data[dataOffset + 3] = pixels[pixelOffset + 3];

                        if (y > 0)
                        {
                            int lastOffset = ((y - 1)*verticalImageSegment.PixelWidth + x)*4;

                            data[dataOffset + 0] -= pixels[lastOffset + 0];
                            data[dataOffset + 1] -= pixels[lastOffset + 1];
                            data[dataOffset + 2] -= pixels[lastOffset + 2];
                            data[dataOffset + 3] -= pixels[lastOffset + 3];
                        }
                    }
                }

                compressionStream.Write(data, 0, data.Length);
            }
            compressionStream.Flush();
            compressionStream.Finish();

            compressedBytes = underlyingMemoryStream.GetBuffer();
        }
        finally
        {
            if (compressionStream != null)
            {
                compressionStream.Dispose();
                underlyingMemoryStream = null;
            }
            if (underlyingMemoryStream != null)
            {
                underlyingMemoryStream.Dispose();
            }
        }

        int numChunks = compressedBytes.Length/ MaxBlockSize;
        if (compressedBytes.Length % MaxBlockSize != 0)
        {
            numChunks++;
        }

        for (int i = 0; i < numChunks; i++)
        {
            int length = compressedBytes.Length - i * MaxBlockSize;

            if (length > MaxBlockSize)
            {
                length = MaxBlockSize;
            }

            WriteChunk(PngChunkTypes.Data, compressedBytes, i*MaxBlockSize, length);
        }
    } 
```

# c++ - 用于directx的c++智能指针

> ID：14017050
> 
> 赞同：1
> 
> 时间：2012-12-24T04:24:20.883
> 
> 标签：c++, c++11, directx

我最近一直在经历用 c++11 智能指针替换所有原始指针的过程，现在我终于完成了，但我的 DirectX 长指针除外。

我想实现以下内容：

```
std::shared_ptr<IDirect3D9> p_d3d;
p_d3d( Direct3DCreate9(D3D_SDK_VERSION), [](IDirect3D9 *p) {//smart pointer initialization(1)
        p->Release();
}); 
```

我从 Visual Studio 收到以下错误：

> 错误：在没有适当的 operator() 或将函数转换为指针函数类型的情况下调用类类型的对象

我更喜欢使用 std::unique_ptr 或 std::shared_ptr 而不是 CComPtr。关于为什么会发生这种情况以及可能的实施方法的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T04:48:17.480

您似乎在 shared_ptr 上调用 operator()。这不是您构造 shared_ptr 的方式。尝试使用重置，或在声明变量的同一行构造指针。

请注意，您调用的创建函数会为您提供一个引用计数为 1 的指针。

# php - PHP嵌套for循环来定位图标精灵

> ID：14017054
> 
> 赞同：0
> 
> 时间：2012-12-24T04:25:12.050
> 
> 标签：php, loops, for-loop, sprite

我正在尝试自动化一组中的 100 个图标。我有一个 320 像素 x 320 像素的图像精灵，其中包含 100 个图标，每个图标为 32 像素 x 32 像素。我想要实现的是有一个 php 循环，我可以在其中复制图标 div 代码 100 次，但在该循环中，使用其他循环来定位图像精灵的背景。我需要做的是将x坐标增加32 px，前10个从0到-288，y坐标将为0。然后再次从0到-288重复x代码，但y坐标增加32px ， 等等。因此，对于每行 10 个图标，x 每次增加 32px，然后重置为 0，y 坐标每 10 个图标增加一次，直到总共达到 100 个图标。我有以下代码成功循环了总共 100 个图标，但无法使嵌套循环正常工作。希望这是有道理的。

```
<?php
   for ($i=1; $i<=100; $i++) { ?>
   <div id="menu_icon_edit_cont">
      <div class="menu_icons" style="background-position: -<?= (x coordinate here) ?>px -<?= (y coordinate here) ?>px">
      </div>
   </div>
<? } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T04:27:38.310

您可以`$i`轻松地将单个迭代器“转换”为坐标：`$y = floor($i/10); $x = $i%10;`. 然后这只是乘以图像宽度（在本例中为 32）的情况，你就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T05:00:54.853

有很多方法可以做到这一点，您选择的应该是您认为最容易阅读和维护的。

新手经常犯的一个错误是假设他们的 for 循环需要准确地模仿他们想要做什么（你想要 100 个图标，所以你假设你应该只从 1 迭代到 100）。

您真正想要的是最终产品，例如：

```
 for ($y = 0; $y < 320; $y += 32) {
        for ($x = 0; $x > -320; $x -= 32) {
            //output your html using $x/$y
        }
    } 
```

走您发布的路线，尽管它可能看起来像：

```
 for($i=0;$i<100;$i++){

        $x = $i%10 * -32;
        $y = floor($i/10)*32;

        //output your html using $x/$y
    } 
```

我更喜欢第一种方式，因为它更清楚它的目的是什么。

# asp.net-mvc-3 - 使用变量/参数创建视图

> ID：14017061
> 
> 赞同：2
> 
> 时间：2012-12-24T04:26:30.150
> 
> 标签：asp.net-mvc-3, variables, view

我有一个用户填写的表单，然后被定向到包含输入数据的视图。如何创建此视图，以便它使用初始化为用户输入的变量。视图应该如何。我已经阅读了有关将参数传递给视图的信息，但我需要一种方法来创建它，然后将传递给视图中每个变量的参数分配给它们。

编辑：来自布赖恩·罗杰的例子

说有模特

```
public class MyModel
{
    public string Name { get; set; }
} 
```

还有一个视图（使用另一个名为 mod 的模型），例如

```
@using (Html.BeginForm("Example", "Test", FormMethod.Get))
  {
     <input type="text" name="Name" value="@Model.Name" />
      <input type="submit" value="Go" />
 } 
```

填写表格后，我想获取数据并将其显示在另一个视图 view2 中

```
@model MyModel
@{
   Layout = "~/Views/Shared/_Layout.cshtml";
 }

<h2>Example of passing data between the view and controller using a model</h2>
 @if (string.IsNullOrEmpty(Model.Name))
  {
    <p>Enter your name below and click Go.</p>
  }
 else
 {
    <p>You entered "@Model.Name".
 } 
```

我的提交按钮控制器看起来像

```
public ActionResult Example(MyModel model)
{
    model.Name = mod.Name;
    return View("view2", model);
} 
```

mod.Name 的值是正确的，但我只是没有传递给新视图

编辑2：

view2 的控制器看起来像这样

```
public ActionResult view2(MyModel model)
{
  return View(model)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T05:06:03.447

在 MVC3 中，为了将值来回传递给视图，您使用模型对象。模型对象只是一个包含一些属性的 C# 类。在您的控制器中，您使您的操作方法接受模型作为参数，根据需要进行任何处理，然后将更新的模型作为 ActionResult 的一部分返回给视图。在视图中，您可以通过视图上的 Model 属性引用模型对象。

这是一个人为的例子。

模型类：

```
public class MyModel
{
    public string Name { get; set; }
} 
```

控制器类：

```
public class TestController : Controller
{
    public ActionResult Example(MyModel model)
    {
        if (model == null)
        {
            model = new MyModel();
        }
        return View(model);
    }
} 
```

视图（这将是 Test/Example.cshtml）：

```
@model MyModel
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Example of passing data between the view and controller using a model</h2>
@if (string.IsNullOrEmpty(Model.Name))
{
    <p>Enter your name below and click Go.</p>
}
else
{
    <p>You entered "@Model.Name".  If you want to change it, 
       enter a new name below and click Go.</p>
}
@using (Html.BeginForm("Example", "Test", FormMethod.Post))
{
    <input type="text" name="Name" value="@Model.Name" />
    <input type="submit" value="Go" />
} 
```

@model 指令告诉视图模型类是`MyModel`. 因此，您可以通过视图的 Model 属性引用其属性。将表单控件命名为与模型类的属性相同，因此 MVC 框架在提交表单时将模型传递给控制器​​时会将值放回模型对象中。

有关更深入的示例，您可能需要查看一些 MVC 教程，例如[这些](http://www.asp.net/mvc/tutorials). 希望这可以帮助。

**编辑：**更新显示从一个视图获取数据并在另一个视图中显示的示例

这是更新的控制器类：

```
public class TestController : Controller
{
    // This method corresponds to the first view which just displays an empty form
    public ActionResult Example()
    {
        MyModel model = new MyModel();
        return View(model);
    }

    // This method corresponds to the second view which displays the data
    public ActionResult Example2(MyModel model)
    {
        return View(model);
    }
} 
```

这是显示表单的第一个视图 (Views/Test/Example.cshtml)。注意它是如何发布到`Example2`控制器中的方法的。

```
@model MyModel

<h2>Example view with a form</h2>
<p>Enter your name below:</p>
@using (Html.BeginForm("Example2", "Test", FormMethod.Post))
{
    <input type="text" name="Name" value="@Model.Name" />
    <input type="submit" value="Go" />
} 
```

这是显示来自第一个视图的数据的第二个视图 (Views/Test/Example2.cshtml)：

```
@model MyModel

<h2>Example view that displays data from another view</h2>
<p>You entered "@Model.Name".</p> 
```

# php - 在网站/应用程序的所有文件中共享一个 PHP 文件中定义的变量的方法有多少？

> ID：14017064
> 
> 赞同：0
> 
> 时间：2012-12-24T04:27:11.877
> 
> 标签：php, global-variables, scope

现在我知道`File1.php`该文件是否包含我想要共享的变量。我可以：

1.  在声明变量的文件中包含需要使用变量的文件。

    ### 文件1.php

    ```
    <?php
        session_start();
        $username="user1";
        $_SESSION['username']=$username;
        include('File2.php');
    ?> 
    ```

    在 File2.php 中，访问这样的用户名：

    ```
    <?php
        echo $username;
    ?> 
    ```

2.  将带有变量定义的文件包含到另一个需要它的 php 文件中。

    ### 文件3.php

    ```
    <?php
        include('File1.php');
        echo $username;
    ?> 
    ```

3.  并使用 Session 访问我想要的任意数量文件中的变量，例如`File5.php`,`File6.php`等...

    ### 文件5.php

    ```
    <?php
        session_start();
        echo $_SESSION['username'];
    ?> 
    ```

    ### 文件6.php

    ```
    <?php
        session_start();
        echo $_SESSION['username'];
    ?> 
    ```

在所有这些方法中，使用会话的方法确实是您可以用来在多个文件之间共享变量的唯一方法。

在多个文件之间共享一个文件中声明的变量的其他方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T04:31:48.103

1.  包括
2.  会议
3.  曲奇饼
4.  数据库
5.  文件
6.  常数
7.  什么不是（自定义）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T04:31:13.240

[HTTP](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)是无状态的，这意味着每个请求都完全独立于其他所有请求。换句话说，实际上没有办法将变量从一个页面加载传递到另一个页面。

但是，[cookie](http://en.wikipedia.org/wiki/HTTP_cookie)是一种解决方法。然而，重要的是要注意状态是保存在浏览器端（发送什么 cookie）和服务器端（哪些会话数据可能与这些 cookie 相关联），但它们之间的连接不知道这个状态转移。

基本上：不，除了您所概述的之外，没有其他方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T04:32:59.897

您可以使用 PHP5 的[自动加载](http://php.net/manual/en/language.oop5.autoload.php)来执行此操作。创建一个名为“Constants”或其他东西的类并覆盖该`__get()`方法[（参见this）](http://php.net/manual/en/language.oop5.overloading.php#object.get)以从文件或其他东西中读取值。

使用这种方法，您将能够在任何文件中编写这样的代码，而无需包含任何内容。

```
$constants = new Constants();
$myVar = $constants->var_name; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T04:31:36.713

使用[PHP 的](http://en.wikipedia.org/wiki/PHP) [`define`](http://php.net/manual/en/function.define.php)，就像在这个例子中一样：

```
define("CONSTANT", "Hello world."); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T04:32:33.680

你可以使用 PHP 类，这样你就有更多的选项来使用其他类的变量！

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-24T04:39:37.280

您还可以将其声明为全局：

```
global $variable; 
```

# python - 如何理解 Django 视图函数的配置文件输出

> ID：14017081
> 
> 赞同：1
> 
> 时间：2012-12-24T04:30:50.223
> 
> 标签：python, django, profiling

我正在尝试加快我的 django 项目中的视图。使用[https://code.djangoproject.com/wiki/ProfilingDjango](https://code.djangoproject.com/wiki/ProfilingDjango)中的脚本，我生成了以下输出，其中前 3 名占我总时间的 57%。

```
 ncalls  tottime  percall  cumtime  percall filename:lineno(function)
       11    2.898    0.263    2.898    0.263 /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py:406(readline)
        1    0.340    0.340    0.343    0.343 /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py:537(create_connection)
    37587    0.305    0.000    0.346    0.000 /Users/nai/.virtualenvs/tripconomics/lib/python2.7/posixpath.py:130(islink) 
```

我之前没有做过太多的python/应用程序代码优化。我应该如何解释这一点并尝试降低总时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T04:45:36.213

您的数据描述了调用给定函数的次数以及在该函数中花费了多少时间。

*   ncalls 是函数被调用的次数
*   tottime 是在该函数中花费的总时间，不包括子函数
*   percall 是函数每次调用所花费的平均时间，或 tottime/ncalls
*   cumtime 是在该函数中花费的总时间，包括子函数
*   percall 类似于第一个 percall 但现在是 cumtime

所以这告诉你大量的时间都花在了`socket.py`. 具体来说，`readline`被调用了几次，每次都需要相当长的时间。 `create_connection`只调用一次，但这比调用`readline`. 而在`posixpath.py`,`islink`被称为大量的时间，但在每个过程中花费的时间非常少

鉴于`create_connection`它只被调用一次（这是有道理的），你可能无能为力来改变它。

您可以`readline`通过确定何时调用函数并更改代码以避免多次调用`readline`一次就足够了，从而减少调用次数，但我对您的代码没有足够的了解来说明是否是可行的。

您似乎很可能可以减少调用次数，`islink`但这只会在速度上产生很小的差异。

实际上，要显着提高代码速度的唯一方法是减少这些`readline`调用，因此我将专注于弄清楚它何时被调用并最小化这些调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T04:44:26.073

这表明您有 11 次调用 readline 需要将近 3 秒。如果要降低此值，则需要停止（或减少）正在执行的任何 I/O（我假设，打开文件并解析行）。

# sql - SQL：检索自定义配置文件字段、禁止状态和非活动状态

> ID：14017083
> 
> 赞同：1
> 
> 时间：2012-12-24T04:31:08.900
> 
> 标签：sql, database, phpbb

我正在尝试创建一个 PHP 文件，该文件将打开我的 PHPBB3 数据库并检索论坛上所有 Minecraft 用户名的列表，该列表将用作相关游戏服务器上的白名单。用户名（urbb_profile_fields_data.pf_mcusername）需要通过以下过滤：用户名不为空，不为空，未被禁止（ID与urbb_banlist.ban_userid内的ID不匹配）并已激活（urbb_users.user_inactive_reason为0 ）。

诚然，我对 SQL 的了解很差，但我已经完全正常工作并实现了：

`SELECT urbb_profile_fields_data.pf_mcusername, urbb_profile_fields_data.user_id, urbb_banlist.ban_userid FROM urbb_profile_fields_data, urbb_banlist WHERE ((pf_mcusername IS NOT NULL) AND (pf_mcusername <> '')) AND ban_userid != urbb_profile_fields_data.user_id`

但是，当我尝试使用: `urbb_users.user_inactive_reason`within`SELECT` 和`urbb.users`within`FROM`时，SQL 将检索到 7000 多个似乎循环的结果。一旦我进入，就会发生这种`urbb_users`情况`FROM`。

毫无疑问，我在这里缺少一些东西，因为我对 JOIN 不是很熟悉（我已经阅读了一些关于它的教程）所以我希望有人可以在这里提供帮助！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:46:26.910

您的查询实现存在重大问题。即使没有涉及任何其他表，它实际上也不应该工作。

“ **FROM A, B”**在 SQL 中的意思是*“创建另一个表，其中包含 A 和 B 的所有字段，并且它的行都是 A 和 B 的所有可能组合”*并从那里选择。因此，假设每个表中有 4 行，结果表将有 16 行。要过滤不必要的行，请使用条件**"WHERE A.user_id = B.user_id"**。这样，结果表将只有行，这两个部分实际上都对应于同一用户。

您的查询虽然有**“WHERE A.user_id != B.user_id”**，但应该返回一个循环集，其中包含两个部分不匹配的所有行。如果你在禁止列表中只有 1 名玩家，它会起作用，但如果至少有 2 名，它不仅会循环，还会让被禁止的玩家进入结果列表。此外，如果您没有禁止用户，则查询结果将为空。

正确的查询如下所示：

```
SELECT A.username, B.user_id FROM A LEFT JOIN B ON A.user_id = B.banned_id
WHERE B.banned_id IS NULL 
```

基本上，您在表 A 中查找与表 B 中不匹配的行。要将其他表添加到查询中，您需要像这样连接它们：

```
SELECT A.username, B.user_id FROM A LEFT JOIN B ON A.user_id = B.banned_id
LEFT JOIN C ON A.user_id = C.user_id WHERE B.banned_id IS NULL 
```

希望能帮助到你...

# c - 在 Rcpp 的这个范围内没有声明字符串

> ID：14017088
> 
> 赞同：1
> 
> 时间：2012-12-24T04:31:38.170
> 
> 标签：c, r, rcpp

我正在通过 Hadley 的教程[在这里](https://github.com/hadley/devtools/wiki/Rcpp)学习使用 Rcpp 。但是，当我将以下代码放入名为 .cpp 的文件中时`scalar_missing.cpp`

```
# include <Rcpp.h>
using namespace Rcpp;

// [[Rcpp::export]]
List scalar_missings() {
  int int_s = NA_INTEGER;
  String chr_s = NA_STRING;
  bool lgl_s = NA_LOGICAL;
  double num_s = NA_REAL;

  return List::create(int_s, chr_s, lgl_s, num_s);
}

/*** R
  str(scalar_missings())
*/ 
```

然后在R中，我`sourceCpp("scalar_missing.cpp")`用来运行，我收到以下错误：

```
'String was not declared in this scope' 
```

什么地方出了错？我`sessionInfo`的是

```
R version 2.15.1 (2012-06-22)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods  
[7] base     

other attached packages:
[1] Rcpp_0.10.1

loaded via a namespace (and not attached):
[1] tools_2.15.1 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:14:14.740

如已发布说明中所述，`Rcpp::String`该类已添加到 Rcpp 0.10.2 中。

对于他的教程，您可能需要让 Hadley 澄清需要什么以及从何处获取。

# coq - 取元组列表中的第一个类型

> ID：14017097
> 
> 赞同：3
> 
> 时间：2012-12-24T04:32:38.417
> 
> 标签：coq

我有一个列表`l`有类型：`l: list (list (A * B * C * D))`我希望它为我返回一个类型`list (list A)`

我正在尝试`split`带有参数的函数代码`list (A * B * C * D)`以查看结果。

```
Require Import List.
Variables A B C D : Type.
Definition split_list (l: list (A * B * C * D)) : list (A * B * C) * list D 
           := split l. 
```

我该如何编写函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T16:47:02.650

我会这样做：

```
π1 : A × B → A
π1 ∘ π1 : A × B × C → A
π1 ∘ π1 ∘ π1 : A × B × C × D → A
map (π1 ∘ π1 ∘ π1) : (A × B × C × D) * → A *
map (map (π1 ∘ π1 ∘ π1)) : ((A × B × C × D) *) * → (A *) * 
```

你可能需要这个：

```
Definition comp {s1 s2 s3 : Set} (f2 : s2 -> s3) (f1 : s1 -> s2) (o1 : s1) : s3 :=
  f2 (f1 o1).

Notation "f2 ∘ f1" := (comp f2 f1) (at level 30, right associativity).

Inductive Prod (s1 s2 : Set) : Set :=
  | Pair : s1 -> s2 -> Prod s1 s2.

Arguments Pair {_ _} _ _.

Notation "s1 × s2" := (Prod s1 s2) (at level 40, left associativity).

Notation "( o1 , o2 , .. , o3 )" := (Pair .. (Pair o1 o2) .. o3) (at level 0).

Definition proj_1 {s1 s2 : Set} (p1 : s1 × s2) : s1 :=
  match p1 with
  | (o1, _) => o1
  end.

Notation "'π1'" := proj_1 (at level 0).

Inductive List (s1 : Set) : Set :=
  | Nil : List s1
  | Cons : s1 -> List s1 -> List s1.

Arguments Nil {_}.

Arguments Cons {_} _ _.

Notation "s1 *" := (List s1) (at level 30, no associativity).

Notation "'ε'" := Nil (at level 0).

Notation "o1 ◁ l1" := (Cons o1 l1) (at level 60, right associativity).

Fixpoint map {s1 s2 : Set} (f1 : s1 -> s2) (l1 : s1 *) : s2 * :=
  match l1 with
  | ε => ε
  | o1 ◁ l2 => (f1 o1) ◁ (map f1 l2)
  end. 
```

# python - 如何在 PyQT 中检测父小部件关闭？

> ID：14017102
> 
> 赞同：5
> 
> 时间：2012-12-24T04:33:30.010
> 
> 标签：python, qt, pyqt

我创建了一个`QVBoxLayout`包含多个其他小部件的。当`QVBoxLayout`（当前为 a `QDialog`）的父窗口关闭时，我需要通知所有小部件关闭事件，以便它们可以删除临时文件。这是惯用的，我该怎么做？

在我的应用程序中，我`QLabel`使用一个类进行子类化，该类允许我存储对构成它的 pixMap 的临时文件的引用。当它的父窗口关闭时，我需要能够关闭文件。

**编辑：**我已经尝试过处理关闭事件：

```
def closeEvent(self, event):
    self.imgFile.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T05:16:00.077

这里有几种方法可以实现这一点，使用我认为是惯用的 Qt。

1.  使用`closeEvent`父级直接对每个子级执行清理。
2.  使用`destroyed`父级上的信号间接调用每个子级上的清理
3.  从父节点发出自定义信号`closeEvent`，直接连接到子节点的清理。

选项 #2/#3 在下面被注释掉：

```
from PyQt4 import QtCore, QtGui

class MainWidget(QtGui.QDialog):

    # Option #3 - Custom signal
    closing = QtCore.pyqtSignal()

    def __init__(self):
        super(MainWidget, self).__init__()

        self.layout = QtGui.QVBoxLayout(self)

        for i in xrange(5):
            label = ResourceLabel('label%02d' % i)
            self.layout.addWidget(label)

            # option #2
            # Let a signal trigger the cleanup on the children
            # self.destroyed.connect(label.close)

            # option #3
            # Use a custom signal emitted from the closeEvent,
            # wired directly to the cleanup slot on the object
            # self.closing.connect(label.close)

    def closeEvent(self, event):
        print "Closing main window"

        # option #1
        # if you want to trigger a cleanup specifically when
        # this widget is closed, as opposed to destroyed
        for i in xrange(self.layout.count()):
            item = self.layout.itemAt(i)
            widget = item.widget()       
            if widget:
                try:
                    widget.close()
                except:
                    pass

        # Or Option #3 - emit a custom signal
        self.closing.emit()

        super(MainWidget, self).closeEvent(event)

class ResourceLabel(QtGui.QLabel):

    def __init__(self, *args, **kwargs):
        super(ResourceLabel, self).__init__(*args, **kwargs)
        self.aResource = "FOO"

    def close(self):
        print "Cleaning up", self
        self.aResource = None

if __name__ == "__main__":
    app = QtGui.QApplication([])
    win = MainWidget()
    win.show()
    win.raise_()
    app.exec_() 
```

任何一个都可以。我更喜欢选项#2，因为它让父窗口对其子窗口保持一点不可知论，并在构建时简单地将正确的窗口连接到将清理它们的插槽。

选项 #3 的原因是基于您在下面的评论。在您发布的代码中，我的猜测是您的对话框并没有真正被删除。它仍然存在，只是被关闭了。所以应该触发关闭事件而不是破坏信号。因此，选项 3 将自定义信号放入 closeEvent 中，该信号准确地模拟了`destroyed`信号在被删除时会做什么。

# objective-c - 在 ios 6.0 中使用 SLRequest 获取 Facebook 好友列表

> ID：14017105
> 
> 赞同：10
> 
> 时间：2012-12-24T04:34:05.693
> 
> 标签：objective-c, facebook, ios6, social

我按照描述在 ios 6.0 中集成了 facebook

[如何使用 SLRequest 在 iOS 6 中集成 Facebook？](https://stackoverflow.com/questions/12757449/how-to-integrate-facebook-in-ios-6-using-slrequest)

但我无法使用 SLRequest 获取 facebook 好友列表。谁能知道该怎么做？我想在我的游戏中实现“与朋友一起玩”的功能。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-24T05:56:27.063

我想它应该如何工作。

下面的代码对我来说工作正常。

```
 NSArray *accounts = [accountStore
                               accountsWithAccountType:facebookAccountType];
          ACAccount *facebookAccount = [accounts lastObject];
          NSString *acessToken = [NSString stringWithFormat:@"%@",facebookAccount.credential.oauthToken];
          NSDictionary *parameters = @{@"access_token": acessToken};
          NSURL *feedURL = [NSURL URLWithString:@"https://graph.facebook.com/me/friends"];
          SLRequest *feedRequest = [SLRequest
                                    requestForServiceType:SLServiceTypeFacebook
                                    requestMethod:SLRequestMethodGET
                                    URL:feedURL
                                    parameters:parameters];
          feedRequest.account = facebookAccount;
          [feedRequest performRequestWithHandler:^(NSData *responseData,
                                                   NSHTTPURLResponse *urlResponse, NSError *error)
           {
               NSLog(@"%@",[[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding]);
           }];
      }
      else
      {
          // Handle Failure
      } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-19T11:40:00.613

```
-(void)getFacebookFriendsList
{
    if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook])
    {
        ACAccountStore *store = [[ACAccountStore alloc] init];

        ACAccountType *facebookTypeAccount = [store accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
        //Replace with your Facebook.com app ID
        NSDictionary *options = @{ACFacebookAppIdKey:kFacebookAppID, ACFacebookPermissionsKey:@[@"email", @"read_friendlists"],
                                  ACFacebookAudienceKey:ACFacebookAudienceFriends};

        [store requestAccessToAccountsWithType:facebookTypeAccount
                                       options:options
                                    completion:^(BOOL granted, NSError *error){

                                        if(granted)
                                        {
                                            NSArray *accounts = [store accountsWithAccountType:facebookTypeAccount];
                                            ACAccount *facebookAccount = [accounts lastObject];

                                            NSURL *meurl = [NSURL URLWithString:@"https://graph.facebook.com/me"];
                                            SLRequest *merequest = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                                                                      requestMethod:SLRequestMethodGET
                                                                                                URL:meurl
                                                                                         parameters:nil];
                                            merequest.account = facebookAccount;

                                            NSURL *requestURL = [NSURL URLWithString:@"https://graph.facebook.com/me/friends"];

                                            SLRequest *request = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                                                                    requestMethod:SLRequestMethodGET
                                                                                              URL:requestURL parameters:@{@"fields":@"id, name, email, picture, first_name, last_name, gender, installed"}];
                                            request.account = facebookAccount;
                                            [request performRequestWithHandler:^(NSData *data,
                                                                                 NSHTTPURLResponse *response,
                                                                                 NSError *error) {
                                                if(!error)
                                                {
                                                    NSDictionary *list =[NSJSONSerialization JSONObjectWithData:data
                                                                                                        options:kNilOptions
                                                                                                          error:&error];
                                                    if([list objectForKey:@"error"] != nil)
                                                    {
                                                        // if error occured e.g. Invalid Auth etc.
                                                    }
                                                    else
                                                    {
                                                        [self.arrayFriendsList removeAllObjects];

                                                        NSArray *dictFbFriend = [list objectForKey:@"data"];

                                                        for (NSDictionary *dict in dictFbFriend)
                                                        {
                                                            NSDictionary *pictureDataDict = [[dict objectForKey:@"picture"] objectForKey:@"data"];

                                                            Contacts *objContact = [[Contacts alloc] initWithName:[dict objectForKey:@"name"]
                                                                                                         andEmail:nil
                                                                                                     andFirstName:[dict objectForKey:@"first_name"]
                                                                                                      andLastName:[dict objectForKey:@"last_name"]
                                                                                                        andGender:[dict objectForKey:@"gender"] andPhotoPath:[pictureDataDict objectForKey:@"url"]
                                                                                                   andIsInstalled:[dict objectForKey:@"installed"] ? [[dict objectForKey:@"installed"] boolValue] : NO
                                                                                                    andFacebookId:[dict objectForKey:@"id"]
                                                                                    ];

                                                            [self.arrayFriendsList addObject:objContact];
                                                            objContact = nil;
                                                        }

                                                        NSSortDescriptor *descriptor=[[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES];
                                                        NSArray *descriptors=[NSArray arrayWithObject: descriptor];
                                                        self.arrayFriendsList = (NSMutableArray *)[self.arrayFriendsList  sortedArrayUsingDescriptors:descriptors];

                                                    }
                                                }
                                                else
                                                {
                                                    NSLog(@"Error%@", error);

                                                    //                                                    [progressHUD hide:YES];
                                                }

                                                dispatch_async(dispatch_get_main_queue(), ^{
                                                    [progressHUD hide:YES];
                                                    [self.tblFriendsList reloadData];
                                                });
                                            }];
                                        }
                                        else
                                        {
                                            NSLog(@"Grant Error:%@", error);

                                            [progressHUD hide:YES];

                                            UIAlertView *alertView = [[UIAlertView alloc]
                                                                      initWithTitle:@"Error"
                                                                      message:@"You need to set up Facebook account on the Settings App."
                                                                      delegate:self
                                                                      cancelButtonTitle:@"OK"
                                                                      otherButtonTitles:nil];
                                            [alertView show];
                                        }
                                    }];
    }
    else
    {
        [progressHUD hide:YES];

        UIAlertView *alertView = [[UIAlertView alloc]
                                  initWithTitle:@"Error"
                                  message:@"You need to set up Facebook account on the Settings App."
                                  delegate:self
                                  cancelButtonTitle:@"OK"
                                  otherButtonTitles:nil];
        [alertView show];
    }
} 
```

# ios - 以编程方式通过 ipad 3 连接打印机

> ID：14017108
> 
> 赞同：-1
> 
> 时间：2012-12-24T04:34:40.733
> 
> 标签：ios

大家好，我只想通过我的 ipad 3 中的**附近打印机**打印显示在我的**UIWebView中****的 pdf** ，任何人都可以提供一些样本吗？提前致谢

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:04:36.120

从 ipad 打印并不是很困难，本教程：http: [//iphonedevsdk.com/forum/iphone-sdk-development/67176-airprint-tutorial-simple-print-file-30-lines-code.html](http://iphonedevsdk.com/forum/iphone-sdk-development/67176-airprint-tutorial-simple-print-file-30-lines-code.html)向您展示了如何从 ipad 打印任何内容，但您应该能够对其进行修改以适合您。我要做的是获取 UIWebView 的编程屏幕截图，然后像教程一样打印该图像。希望这可以帮助！****

# android - 在 Android 中使用矢量图标

> ID：14017110
> 
> 赞同：5
> 
> 时间：2012-12-24T04:35:18.310
> 
> 标签：android, xml, android-actionbar, android-imageview, vector-graphics

## 作为序言：

我曾考虑将其放在 graphicsdesgin.stackexchange.com 上，但我得出的结论是，我的 android 特定问题可能不是最好的地方。这就是我选择stackoverflow的原因，因为它似乎更多的是Android imageViews而不是图形本身的问题。谢谢你。

* * *

* * *

我需要在我的 Android 应用程序中使用一些基本图标。我有 Illustrator 和 Photoshop（其中任何一个都不擅长，但我能过得去）。我偶然发现了[http://www.androidicons.com/](http://www.androidicons.com/)，我看到了一个很好的机会，只需 25 美元就可以节省我几个小时的时间。为了了解在我的应用程序中使用它们需要做什么，我下载了免费的“BONUS ICONS 01”包。

![在此处输入图像描述](../Images/03d9a59be5f0507370a2452107e9dbda.png)

我决定尝试使用时钟图标，看看它在我的应用程序中是如何工作的。我在 Illustrator 中将图标放大到大约 800 像素，然后将其复制并粘贴到 Photoshop 中。我将它保存为 .png，然后我创建了一个示例应用程序来测试它。

该图像仅放入 xhdpi 文件夹，因为我可能会将此图标用于比操作栏更大的东西，但不会占用整个屏幕。我的想法是，如果您要为所有单独的 dpi 级别创建操作栏图标，那么您必须确切知道要制作它们的大小（以像素为单位），因此它们看起来都非常好（例如，如果您从 google 下载操作栏图标，它们会以几种尺寸提供给您，而不仅仅是一种）。**但是，如果它们要用于比这更大的事情呢？我怎么知道要制作什么尺寸。**

真正表达我对我无法理解这个主题的挫败感。这是我的应用程序的代码，以及它最终在我的 Galaxy Nexus 上的样子。较大的图标很好，而较小的图标肯定看起来不那么清晰。**我该如何解决？在 Illustrator 中制作图像并进入 Photoshop 并确保它们在使用的任何尺寸下看起来都很棒的正确方法是什么？**

真挚地，

*不懂图形的*安卓开发者。

 *![在此处输入图像描述](../Images/ae85751c6074f7daea2275c0f4116ab0.png)

如您所见，图像在大时看起来不错，但在较小时使用它会导致 IMO 出现一些问题。有什么办法可以解决吗？是我太挑剔了吗？即使我将它的大小调整为更小，并将其放入 mdpi，我的布局是否还能接受它？

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:gravity="center|center_horizontal" >

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/anti_huge"
                android:layout_weight="1" />

            <ImageView
                android:id="@+id/imageView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/anti_huge"
                android:layout_weight="1" />
            <ImageView
                android:id="@+id/imageView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/anti_huge"
                android:layout_weight="1" />
            <ImageView
                android:id="@+id/imageView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/anti_huge"
                android:layout_weight="1" />

        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:gravity="center|center_horizontal" >

            <ImageView
                android:id="@+id/imageView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/anti_huge" />

        </LinearLayout>

    </LinearLayout>

</RelativeLayout> 
```

## 问题总结：

1.  但是，如果它们要用于比这更大的事情呢？（“那个”= ActionBarIcons）
2.  我怎么知道要制作什么尺寸？（Google 给我的 ActionBarIcons 设置了像素尺寸，他们是如何计算出这些尺寸的）
3.  我该如何解决？（测试应用程序上的大图标看起来不错，而较小的图标看起来参差不齐）
4.  在 Illustrator 中制作图像并进入 Photoshop 并确保它们在使用的任何尺寸下看起来都很棒的正确方法是什么？
5.  有什么办法可以解决吗？
6.  是我太挑剔了吗？（请告诉我我是……这种磨难正在杀死我。）
7.  即使我将其重新调整为更小，并将其放入 mdpi 中，我的布局是否还能接受它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T04:54:06.160

你做的不对；）

Android 从最接近的匹配中缩放图像。如果您只提供一个（非常大的）位图，那么 Android 会将其缩放到您请求的较小尺寸。如果你这样做，你会失去抗锯齿，图标看起来和你的一样。

您*要做*的是将 png 导出为使用时实际需要的（物理）尺寸，然后导出为所需的屏幕密度。

可点击区域的最小建议尺寸是 40x40dp，即 1/4" 正方形。您可能会使用 10% 的边框，因此您最终会在 mdpi 中看到一个 32x32 像素的图标。

因此，现在您将矢量图像渲染为 32x32 用于 mdpi (160dpi)、24x24 用于 ldpi (120dpi)、48x48 用于 hdpi (240dpi) 和 64x64 用于 xhdpi (320dpi)。

如果您想要更大的相同图标，请将其渲染为单独的资产。假设您想要时钟的 2x2" 水印，您将以 320x320px 为 mdpi 等渲染它。

您在布局中将图像指定为 200dp x 200dp，Android 将根据设备分辨率在屏幕上拉取正确的图像。

对于一些重复渲染，我使用[Android Asset Studio](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)。您可以设置颜色、图标、效果等，它允许您下载一组适用于所有分辨率的图标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T05:17:24.980

ActionBar 图标的大小在 Android Developers 的[Action Bar Icons](http://developer.android.com/guide/practices/ui_guidelines/icon_design_action_bar.html)部分中指定。

你把

*   项目的 xhdpi 资源文件夹中的 48x48 像素图标
*   hdpi 文件夹中的 36x36
*   mdpi 文件夹中的 24x24 图标

但如果我理解你的问题，你想知道如何拍摄其中一张图像并创建一个大版本，例如作为活动背景：

*   首先，您需要图像的矢量版本。在 Illustrator 中打开它。
*   选择一个 dpi 作为起点，比如 hdpi。从 Illustrator 创建一个大小适合作为 hdpi 设备背景的 png 文件。这是一种审美选择，没有对错之分。假设它的大小为 300 x 300 像素。
*   如果您喜欢 hdpi 设备上的图像外观，请将该图像放在项目的 hdpi 资源文件夹中。
*   为 mdpi 文件夹创建一个大小为 0.75 倍的版本，即 225 x225 像素。
*   为 xhdpi 文件夹创建一个大小为 1.5 倍的版本，即 450 x 450 像素。

如何在 Illustrator 中执行此操作：

*   创建/打开矢量图像。
*   文件 > 保存为 Web 和设备
*   选择图像大小选项卡并为 hdpi 输入 100%
*   节省。以 75% 的 mdpi 和 150% 的 xhpdi 重做。

![在此处输入图像描述](../Images/5a056186b3744d58528a13310c22f74d.png)*

# haskell - 如何在 Haddock 文档中嵌入图像

> ID：14017112
> 
> 赞同：26
> 
> 时间：2012-12-24T04:35:43.067
> 
> 标签：haskell, documentation, haddock

如何在本地[Haddock](http://en.wikipedia.org/wiki/Haddock_%28software%29)文档中嵌入图像？

例如，我看到[该`lens`包](http://hackage.haskell.org/package/lens)仅使用图像的外部链接，但我想将图像存储在本地。

[（这个问题与邮件列表上的一个（未回答的）问题](http://www.haskell.org/pipermail/haskell-cafe/2011-December/097898.html)非常相似）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-26T16:52:58.470

如果您想在本地存储图像，您可以：

```
-- A longer description of the package.
description: Some haskell package description.

    <<file:///home/user/your_image.png>> 
```

结果：

![在此处输入图像描述](../Images/115ec3ee66e3957f80365dee6f6d05fe.png)

如果您不想或不能通过相对路径添加图像，只需输入不带完整路径的图像名称：

`<<your_image.png>>`

在这种情况下，您的图像必须在`project/docs`目录中。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-26T18:57:27.330

正如您引用的邮件列表线程中所解释的，一种选择是使用[数据 URL](http://en.wikipedia.org/wiki/Data_URI_scheme)将图像内联到您的文档中。它使源本身读起来有点不愉快（因为它散布着大量的 base64 编码数据），尽管使用 Haddock 的[命名块](http://www.haskell.org/haddock/doc/html/ch03s05.html)可以帮助，通过将所有图像放在文件末尾的命名块中。有关此方法的实际示例，请参阅[circle-packing 包的 Haddock 文档](http://hackage.haskell.org/packages/archive/circle-packing/0.1.0.2/doc/html/Optimisation-CirclePacking.html)。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-05-10T13:43:49.477

正如[Ian Ross 在博客文章](http://www.skybluetrades.net/blog/posts/2014/02/21/haddock-images-on-haskell.html)中所解释的，您可以使用`extra-doc-files`cabal 选项将额外文件捆绑到文档中。

# javascript - 改变为 使用您拥有的一系列引号，使用 JavaScript 每次点击都会显示文本

> ID：14017118
> 
> 赞同：1
> 
> 时间：2012-12-24T04:36:22.500
> 
> 标签：javascript, paragraph

所以这是我的问题，（我知道这可能是一个非常简单的问题，但我对 JavaScript 完全陌生）。所以我有一个报价清单。我需要一个脚本，每次用户单击窗口的任何部分时，它都会根据我想要的时间顺序更改报价。然后当报价完成时再次重新启动。所以让我说，一旦用户打开页面，我有一个带有quote1的段落，而不是用户在任何地方点击，这会发生：同一段落得到quote2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T04:39:45.470

很难具体回答，因为你留下了很多悬而未决的问题。但是，从概念上讲，步骤如下：

1.  注册一个单击事件处理程序，以便在发生所需单击时调用您的代码。
2.  当您的点击处理程序被调用时，您需要获取`<p>`要更改的标签的 DOM 对象。
3.  然后，您需要获取下一个要显示的报价。据推测，您会将这些存储在一个数组中，并保留当前显示的数组位置的索引，以便获得下一个。如果您希望它在不同的页面加载中工作，那么您需要将索引存储在 cookie 中，以便它持续到此计算机上的其他页面加载。
4.  获得 DOM 元素和引号后，只需设置 DOM 元素的 innerHTML 属性即可插入所需的引号。

如果您的 HTML 是这样的：

```
<p id="theQuote">This is the first quote</p> 
```

并且，您希望单击此按钮来更改报价：

```
<button onclick="changeQuote()">Change Quote</button> 
```

或者，如果您想点击页面中的任何位置，您可以将其用于您的正文标签：

```
<body onclick="changeQuote()"> 
```

然后，您可以使用以下代码执行此操作：

```
var quoteIndex = 0;
var quotes = [
    "First Quote",
    "Second Quote",
    "Third Quote"
];
function changeQuote() {
    ++quoteIndex;
    if (quoteIndex >= quotes.length) {
        quoteIndex = 0;
    }
    document.getElementById("theQuote").innerHTML = quotes[quoteIndex];
} 
```

如果您确实希望单击页面中的任何位置来旋转引用（这似乎不太可能是正确的设计），那么您可以将点击处理程序分配给 body 标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T04:42:10.510

你有什么尝试？

在这里，我使用 jquery 来获得更快的代码

```
var quotes = ["quote1","quote2"];
var current = 0;

function changeQuote(){
    if (current >= quotes.length) current = 0;
    document.getElementById("paragraph").innerHTML(quotes[current]);
    current++;
}

document.body.onclick = changeQuote; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T04:42:14.270

尝试这样的事情：

```
<html>
<head>
<script type="text/javascript">
    var quotes = ["Quote 1", "Quote 2"]
    var index = 0;

    function updateQuote() {
        index = index + 1;
        if(index == quotes.length) {
            index = 0;
        }

        document.getElementById("myQuote").innerHTML = quotes[index];
    }
</script>
</head>
<body onClick="updateQuote(); return false;">
<p id="myQuote"></p>
</body>
</html> 
```

# obfuscation - 混淆理论和符号计算

> ID：14017121
> 
> 赞同：1
> 
> 时间：2012-12-24T04:36:58.340
> 
> 标签：obfuscation

是否有任何文档或特定文本描述了生成功能等效但语义不同的计算机程序的理论基础？[理想情况下，我正在寻找涵盖从离散指令派生符号指令的基础的文档，用于与KLEE](http://klee.github.io/klee/klee-files.html)相同的实际编程语言。

我也很好奇在确定两段代码是否共享等效连续执行状态的某个子集时是否存在复杂性的下限，即状态@指令指针和同时的全局变量、堆栈和堆值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:14:07.437

对于您的第一个问题，您可能对[多态代码](http://en.wikipedia.org/wiki/Polymorphic_code)的研究感兴趣，这是您描述的功能的一个子集。

对于第二个问题：

确定两段代码在功能上是否等效与*停止问题*一样困难，这是一个众所周知的*不可判定*问题——没有计算机可以解决所有问题实例。

要看到这一点，请注意我们可以通过询问要测试的程序是否具有与非停止程序相同的功能来解决停止问题`for(;;);`。我们忽略了副作用，所以我们不在乎程序在此期间是否做了其他事情——我们只关心它是否最终完成。

# python - 有没有办法知道 p4 分支中存在的所有文件

> ID：14017123
> 
> 赞同：0
> 
> 时间：2012-12-24T04:37:47.253
> 
> 标签：python, version-control, perforce, p4v

我有一个要求，一旦提供了 perforce 分支，我需要打开该分支中存在的所有文件并检查一些内容，是否有 p4 命令或 python 方式来执行此操作？请提供输入

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T15:55:01.653

如果您尝试在一组文件中搜索指定内容，“p4 grep”应该可以很好地完成这项工作：[http ://www.perforce.com/perforce/doc.current/manuals/cmdref/grep.html #1040665](http://www.perforce.com/perforce/doc.current/manuals/cmdref/grep.html#1040665)

# javascript - 生成 0 - 9 但不是 6 之间的随机数

> ID：14017124
> 
> 赞同：6
> 
> 时间：2012-12-24T04:38:08.667
> 
> 标签：javascript, random

在Javascript中生成0 - 9（包括两者）之间的随机数的最简单方法是什么，不包括6？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-24T04:45:36.397

这是您的单线解决方案:(

```
[0,1,2,3,4,5,7,8,9][Math.floor(Math.random()*9)] 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-24T04:39:09.197

生成一个 0 到 8 之间的随机数，如果 >=6 则加 1

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-24T04:42:06.610

天真的方法：

```
var r;
do {
    r = Math.floor(Math.random() * 10);
} while (r == 6); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-24T05:00:02.233

我会在这里偷懒，并采取@H2CO3 的答案来工作而不尝试它。

```
<script type="text/javascript">

function generate(var UNWANTED) {
    var r;
    do {
        r = Math.floor(Math.random() * 10);
    } while (r == UNWANTED);
    return r;
}

function GENERATE_RANDOM_FROM_0_TO_10_BUT_NOT_6_OR_SOMETHING_ELSE_(var NOT_GOOD){
    return generate(NOT_GOOD)     <== One line solution.
}
<script> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-24T05:43:55.370

```
var n = (n = Math.floor(Math.random() * 9)) == 6 ? 9 : n; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-24T04:46:08.250

试试这个：

```
var numbers = "012345789";
var rnum = Math.floor(Math.random() * numbers.length);
var randomnumber = parseInt(numbers.substring(rnum,rnum+1)); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-24T04:54:16.940

试试这个：

```
var rr=(Math.floor(Math.random()*10));
result=(rr==6)?1:rr; 
```

**编辑：**
1 的概率不太可能是其他的，所以如果它生成 6，我将其设为递归。

```
function notSix() {
  var rr=(Math.floor(Math.random()*10));
  return (rr==6)?notSix():rr;
}

notSix() 
```

更正第一个例子：首先
生成0-8之间，如果输出6转换为9；

```
var rr=(Math.floor(Math.random()*9));
result=(rr==6)?9:rr; 
```

# ruby-on-rails-3 - 如何使用 heroku 控制台将布尔值插入到 postgresql 数据库中？

> ID：14017125
> 
> 赞同：1
> 
> 时间：2012-12-24T04:38:22.470
> 
> 标签：ruby-on-rails-3, heroku

我正在尝试使用 heroku 控制台将记录从 false 更改为 true。

我尝试过的一切都给出了同样的错误。

我试过这样：

```
entry.boolean = true
entry.save 
```

它总是给出这个错误：

```
TypeError: can't convert Fixnum into String 
```

接下来我应该尝试什么？

这是来自控制台的完整错误：

```
Loading production environment (Rails 3.2.9)
irb(main):001:0> entry = RegisterEntry.first
  RegisterEntry Load (53.6ms)  SELECT "register_entries".* FROM "register_entries" LIMIT 1
=> #<RegisterEntry id: 5, checkout: "2012-10-03", checkin: "2012-12-23", notes: "", publisher_id: 42, territory_id: 79, created_at: "2012-12-23 20:52:06", updated_at: "2012-12-23 20:54:27", written: false>
irb(main):002:0> entry.written = true
=> true
irb(main):003:0> entry.save
   (2.1ms)  BEGIN
   (2.5ms)  UPDATE "register_entries" SET "written" = 't', "updated_at" = '2012-12-24 12:32:45.224914' WHERE "register_entries"."id" = 5
  Territory Load (17.2ms)  SELECT "territories".* FROM "territories" WHERE "territories"."id" = 79 LIMIT 1
  Publisher Load (18.7ms)  SELECT "publishers".* FROM "publishers" WHERE "publishers"."id" = 42 LIMIT 1
   (3.5ms)  ROLLBACK
TypeError: can't convert Fixnum into String
    from /app/app/models/register_entry.rb:30:in `delete'
    from /app/app/models/register_entry.rb:30:in `block in <class:RegisterEntry>'
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/callbacks.rb:405:in `_run__731746304271343388__update__2234592017401079067__callbacks'
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/callbacks.rb:405:in `__run_callback'
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/callbacks.rb:385:in `_run_update_callbacks'
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/callbacks.rb:81:in `run_callbacks'
    from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/callbacks.rb:272:in `update'
    from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/persistence.rb:348:in `create_or_update'
    from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/callbacks.rb:264:in `block in create_or_update'
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/callbacks.rb:425:in `_run__731746304271343388__save__2234592017401079067__callbacks'
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/callbacks.rb:405:in `__run_callback'
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/callbacks.rb:81:in `run_callbacks'
    from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/callbacks.rb:264:in `create_or_update'
    from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/persistence.rb:84:in `save'
    from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/validations.rb:50:in `save'
    from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/attribute_methods/dirty.rb:22:in `save'
    from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
    from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
    from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
    from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/transactions.rb:208:in `transaction'
    from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
    from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/transactions.rb:259:in `block in save'
    from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
    from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/transactions.rb:258:in `save'
    from (irb):3
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/commands/console.rb:47:in `start'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/commands/console.rb:8:in `start'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:40:28.973

尝试`entry.update_attribute(:boolean, true)`

# git - 使用 reposurgeon 将 svn repo 转换为 git

> ID：14017127
> 
> 赞同：10
> 
> 时间：2012-12-24T04:38:41.473
> 
> 标签：git, svn, svnadmin

我正在尝试使用[reposurgeon](http://www.catb.org/esr/reposurgeon)将 svn repo 转换为 git 。

这是我所做的（有一个具有 svn 名称 -> git 名称映射的 repo.map 文件）：

```
svnadmin dump /home/subversion > repo.svn
reposurgeon "verbose 1" "repo.svn" "authors read" "write repo.fi" 
```

reposurgeon 运行了好几个小时（很多交换，因为它是一个 12GB 的转储文件），一切看起来都很好。这是我得到的输出：

```
 reposurgeon: verbose 1
    reposurgeon: from repo.svn...copynodes+filemaps+copysets+commits+branches+parents+root+branchlinks+svn-mergeinfo+tagifying+tagify-empty+polishing+canonicalizing+resets+debubbling+renumbering+14163 revisions (1/s)...(9810.18 sec) done.
reposurgeon: r13: deleting parentless zero-op commit.
.
.
.
reposurgeon: r13726: deleting parentless zero-op commit.
    2012-12-24T01:16:23Z * repo.svn 
```

此时，reposurgeon 只是坐着。目前我不确定在哪里寻找解决方案，因为它实际上从未给我一条错误消息。任何建议都非常受欢迎。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-13T23:34:03.877

它已成功导入存储库，但随后它会处理`authors read`命令，但您没有指定文件。此时它实际上是在等待文件出现在标准输入上。使用`authors read <author-map`author-map 是包含地图的文件的名称。

`write >repo.fi`出于类似的原因，您还需要将 write 命令更改为 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T15:27:56.323

如果您考虑替代 reposurgeon 和 git-svn，请查看[SubGit](http://subgit.com/)。

```
$ subgit configure /home/subversion
#edit /home/subversion/conf/subgit.conf to set 'core.authorsFile' option to path to "repo.map" file
$ subgit install /home/subversion
$ subgit uninstall --purge /home/subversion 
```

转换后的存储库将位于 /home/subversion/.git 目录中。作为奖励，您将所有 svn:ignore 和 svn:eol 风格的属性转换为它们的 Git 模拟。

通常 SVN 存储库比相应的转储文件紧凑约 4 倍，因此原始存储库的转换可以比基于转储的转换更快。

# regex - 正则表达式中的 (\d+)/(\d+) 是什么？

> ID：14017134
> 
> 赞同：25
> 
> 时间：2012-12-24T04:39:49.793
> 
> 标签：regex

我知道这是一个正则表达式。我在一段代码中看到了这个特殊的正则表达式。它有什么作用？谢谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-24T04:51:02.433

扩展 minitech 的答案：

*   `(`启动捕获组
*   `\d`一个[速记字符类](https://www.regular-expressions.info/shorthand.html)，匹配所有数字；它与`[0-9]`
*   `+`一个或多个表达式
*   `)`结束捕获组
*   `/`字面正斜杠

这是一个例子：

```
>>> import re
>>> exp = re.compile('(\d+)/(\d+)')
>>> foo = re.match(exp,'1234/5678')
>>> foo.groups()
('1234', '5678') 
```

如果删除括号`()`，表达式仍将匹配，但您只会捕获一组：

```
>>> foo = re.match('\d+/(\d+)','1234/5678')
>>> foo.groups()
('5678',) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-24T04:40:45.830

它匹配一个或多个数字，后跟一个斜线，后跟一个或多个数字。

这里的两个“一个或多个数字”也组成了组，可以提取使用。

# delphi - 顺序列表实现

> ID：14017138
> 
> 赞同：0
> 
> 时间：2012-12-24T04:40:41.290
> 
> 标签：delphi

我试图实现一个类似于 Delphi 的 TList 类的顺序链表类。在这里，类将自动增加/减少 count 属性，而不是允许用户设置 count 属性。因此，该类不会在 setcount 过程中初始化数组，而是在将对象引用添加到数组之前初始化数组元素。这是代码：

```
 PObjectarray = ^TObjectarray;
    TObjectarray = array of TObject;
    TSequentialList = class
    private
      FObjects: PObjectarray;
      FCapacity: Integer;
      FCount: Integer;
    protected
      procedure GrowList;virtual;
      procedure SetCapacity(aValue: Integer);
    public
      constructor Create(aCapacity: Integer); overload;
      Constructor Create;overload;
      procedure Add(aObject:TObject);
      procedure Delete(aIndex:Integer);
      destructor Destroy;override;    
   End; 
```

执行： -

```
 procedure TSequentialList.Add(aObject: TObject);
    begin
      if FCount=FCapacity then
        GrowList;
      FillChar(FObjects^[FCount],sizeof(TObject),0);//Initialize the FCount's member space
      FObjects^[FCount]:=aObject;
      Inc(FCount);
    end;

    constructor TSequentialList.Create(aCapacity: Integer);
    begin
      FCapacity := 0;
      FCount := 0;
      SetCapacity(aCapacity);
    end;

    constructor TSequentialList.Create;
    begin
      FCapacity := 0;
      FCount := 0;
    end;

    procedure TSequentialList.Delete(aIndex: Integer);
    var tmpObj:TObject;
    i:Integer;
    begin
     if (aIndex>=FCount) or (aIndex<0) then raise ELinkedListException.Create('Invalid Index in Delete..!');
     tmpObj:=FObjects^[aIndex];
     tmpObj.Free;

     System.Move(FObjects^[aIndex+1],FObjects^[aIndex],(FCount-aIndex)* SizeOf(TObject));
     Dec(FCount);
    end;

    destructor TSequentialList.Destroy;
    begin
      SetCapacity(0);
      inherited;
    end;

    procedure TSequentialList.GrowList;
    var delta:Integer;
    begin
      if FCapacity>64 then
        delta:=FCapacity div 64
      else if FCapacity>16  then
           delta:=8
      else delta:=4;
      SetCapacity(FCapacity+delta);
    end;

    procedure TSequentialList.SetCapacity(aValue: Integer);
    var i:Integer;
    begin
      if FCapacity <> aValue then begin
         if aValue<FCount then begin
            for i := FCount-1 downto  aValue do
               Delete(i);
         end;
         ReallocMem(FObjects, aValue*sizeof(TObject));
         FCapacity := aValue;
      end;
    end; 
```

用法：//不起作用

```
 procedure TForm2.Button1Click(Sender: TObject);
    var lst:TSequentialList;
    obj:TIntObj;
    begin
      lst:=TSequentialList.Create(4);
      obj:=TIntObj.Create(10);
      lst.Add(obj);
      lst.Add(TIntObj.Create(20));
      lst.Free;
    end; 
```

退出上述方法后系统挂起。请指导我程序有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:31:25.213

我首先要说这不是一个链表。这是一个非常不同的结构。`TObjectList`更重要的是，您应该简单地使用 Delphi 提供的内置类，而不是重新实现。

* * *

您的代码的根本问题是您错误地使用了动态数组。您不得使用原始分配函数，如`ReallocMem`. `GetMem`等函数`ReallocMem`用于原始指针。动态数组的生命周期由编译器/运行时库管理。

要分配动态数组，您必须使用`SetLength`.

另一个重大错误是调用`System.Move`移动了错误数量的元素。

下面的代码是您的代码的简化和更正变体。

```
type
  TMyObjectList = class
  private
    FObjects: array of TObject;
    FCount: Integer;
  protected
    procedure GrowList;
    procedure SetCapacity(aValue: Integer);
  public
    constructor Create(aCapacity: Integer); overload;
    constructor Create; overload;
    destructor Destroy; override;
    procedure Add(aObject: TObject);
    procedure Delete(aIndex: Integer);
  end;

constructor TMyObjectList.Create(aCapacity: Integer);
begin
  inherited Create;
  SetCapacity(aCapacity);
end;

constructor TMyObjectList.Create;
begin
  Create(0);
end;

destructor TMyObjectList.Destroy;
begin
  SetCapacity(0);
  inherited;
end;

procedure TMyObjectList.Add(aObject: TObject);
begin
  if FCount = Length(FObjects) then
    GrowList;
  FObjects[FCount] := aObject;
  Inc(FCount);
end;

procedure TMyObjectList.Delete(aIndex: Integer);
begin
  if (aIndex >= FCount) or (aIndex < 0) then
    raise Exception.Create('Invalid Index in Delete..!');

  FObjects[aIndex].Free;
  System.Move(FObjects[aIndex+1], FObjects[aIndex], 
    (FCount-aIndex-1)*SizeOf(TObject));
  Dec(FCount);
end;

procedure TMyObjectList.GrowList;
var
  delta: Integer;
begin
  if Length(FObjects) > 64 then
    delta := Length(FObjects) div 64
  else if Length(FObjects) > 16 then
    delta := 8
  else
    delta := 4;
  SetCapacity(Length(FObjects) + delta);
end;

procedure TMyObjectList.SetCapacity(aValue: Integer);
var
  i: Integer;
begin
  if Length(FObjects) <> aValue then
  begin
    for i := aValue to FCount-1 do
      FObjects[i].Free;
    SetLength(FObjects, aValue);
  end;
end; 
```

但我强烈建议您使用已知有效的内置 RTL 类。例如，如果您使用的是现代版本的 Delphi，您可以使用`System.Generics.Collections`. 在你的情况下`TObjectList<T>`似乎是你需要的。在较旧的 Delphi 版本中，您将`TObjectList`在`Contnrs`单元中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:46:47.667

删除方法中的这一行绝对是错误的：

```
 for i := FCount-1 downto  aValue do
           Delete(i); 
```

`Delete(aValue)`而是打电话。

但是，您的代码没有实现链表。看起来很像您正在尝试实现 TObjectList。

# security - 检查模式以避免 XSS 攻击

> ID：14017143
> 
> 赞同：0
> 
> 时间：2012-12-24T04:41:25.750
> 
> 标签：security, jsf, xss, jsf-1.2

我写了一个`Filter`下面是代码。

```
public void doFilter(ServletRequest request, ServletResponse response,FilterChain chain)
            throws IOException, ServletException {

HttpServletRequest srequest = (HttpServletRequest) request;
HttpServletResponse sresponse = (HttpServletResponse) response;

String url = srequest.getRequestURI();
if(url.contains("//What patterns to be checked here?"))
{
 //Invalidate the Session
 //Redirect to error page
} 
```

正在阅读形成的 URL 并希望避免`XSS`攻击。因此，我想检查 URL 中是否存在任何可能表明它可能导致`XSS`攻击的模式。

我可以在这里查看所有模式的综合列表吗？例如，

```
url.contains("<script>"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T08:02:52.523

哇，不要。有很多资料可以向您解释原因：

*   黑名单几乎总是一件坏事
*   您不应该在输入上检查 XSS，但是，无论其来源如何，都应转义输出

如果您想了解有关防止 XSS 的更多信息，请转到[Owasp xss 备忘单](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)。

On the other site if you want to add some limited scripting/editing functionality to your web site, you could and should use substitution (like in stackoverflow you don't write <\b> you use ** which is later transformed to appropriate html tags). Or you can use whitelisting, only and only allow text and some of the tags, but it can be tricky and you would have to be very careful.

# mysql - 在外语字段上使用 ORDER BY 子句

> ID：14017146
> 
> 赞同：7
> 
> 时间：2012-12-24T04:41:30.100
> 
> 标签：mysql, sql, select

我在 MySQL db 表中有一些不同语言的国家名称，表可以支持 utf8。但`SELECT * FROM countries ORDER BY 'name_czech'`总是按英文字母顺序排序

![在此处输入图像描述](../Images/d371606a4ee9ba830e778ddd3ae8d895.png)

![在此处输入图像描述](../Images/ed6a85a23ffed243fd5bc0c3a4e23c1b.png)

我的问题是我们如何按外语字段对记录进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T04:44:22.820

也许您想使用反引号而不是单引号

```
SELECT * 
FROM countries 
ORDER BY `name_czech` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T15:24:59.373

我不完全理解这个问题，或者你想要实现什么，但我可以通过你提供的样本猜测，除了默认的 mysql 排序之外没有任何排序发生。为了能够按列排序，您需要使用反引号 (`) 字符。在某些情况下，也允许使用 " 字符，尽管我怀疑这就是您所需要的。

回到排序问题，如果列的名称意味着什么，那么我猜这些是捷克语的名称。列有什么排序规则很重要。如果是 utf8 捷克语排序规则，则排序将根据该排序规则进行。如果没有，您始终可以强制使用不同于您为列定义的排序规则，使用`ORDER BY name_czech COLLATE utf8_czech_ci`该排序规则将为相应的排序规则应用排序。如果该列是 utf8，你应该没有更多的惊喜。

基本上，如果不是适当的列（通过更改表），这又回到了更改列的排序规则，或者在查询期间更改排序规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T05:02:58.210

明白了，我只是删除字段名称上的单引号

```
select * from countries order by name_czech 
```

感谢所有的朋友。

# iphone - 实现 MKPinAnnotationView 拖动功能？

> ID：14017150
> 
> 赞同：0
> 
> 时间：2012-12-24T04:42:06.593
> 
> 标签：iphone, ios, mkmapview, draggable, mkpinannotationview

谁能推荐一个`MKPinAnnotationView`在 iPhone中实现拖动功能的好教程`MKMapView`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T05:44:56.543

[您可以从此](http://code4app.net/ios/MapKit-Drag-And-Drop/4f8cc5ff06f6e73e69000000)链接找到 MKPinAnnotationView 拖放功能的源代码演示。

**更新：**上述站点 url 中给出的 Github 项目链接不起作用。[但我从这个](https://github.com/nithinkmichael/iOS-MapKitDragAndDrop)url找到了新的项目示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T05:15:27.223

要使注释可拖动，请将注释视图的可拖动属性设置为 YES。

这通常在 viewForAnnotation 委托方法中完成，因此请确保将`MKMapView`委托设置为`self`并符合 .h 文件中的委托。

例如：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;

    static NSString *reuseId = @"pin";
    MKPinAnnotationView *pav = (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:reuseId];
    if (pav == nil)
    {
        pav = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:reuseId];
        pav.draggable = YES; // Right here baby!
        pav.canShowCallout = YES;
    }
    else
    {
        pav.annotation = annotation;
    }

    return pav;
} 
```

好的，这是管理注释拖动操作的代码：

```
- (void)mapView:(MKMapView *)mapView 
    annotationView:(MKAnnotationView *)annotationView 
    didChangeDragState:(MKAnnotationViewDragState)newState 
    fromOldState:(MKAnnotationViewDragState)oldState 
{
    if (newState == MKAnnotationViewDragStateEnding) // you can check out some more states by looking at the docs
    {
        CLLocationCoordinate2D droppedAt = annotationView.annotation.coordinate;
        NSLog(@"dropped at %f,%f", droppedAt.latitude, droppedAt.longitude);
    }
} 
```

这应该有帮助！

# java - 正则表达式在java中匹配带有或不带有http的url

> ID：14017154
> 
> 赞同：-1
> 
> 时间：2012-12-24T04:42:49.637
> 
> 标签：java, regex

我想验证带有或不带有 http 的 url。我试过了 `^http(s{0,1})://[a-zA-Z0-9_/\\-\\.]+\\.([A-Za-z/]{2,5})[a-zA-Z0-9_/\\&\\?\\=\\-\\.\\~\\%]*`

但这是火柴`http://google.com but not www.google.com`。我也想要一个匹配 www.google.com 的正则表达式。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T04:44:52.773

尝试使用`^(https?://)?`而不是开始您的正则表达式`^http(s{0,1})://`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T04:45:29.650

`^(?:https?://)? ... the rest of your regex`

*   `?:`表示不捕获组
*   `?`量词缩小（如果存在则匹配，如果不存在 - 省略它）

PS我不确定是否`quantifier minification`对英语为母语的人有意义，这是俄语的粗略翻译:)希望，如果我弄错了，有人能理解我的意思并可以解决我的问题。

# c# - RavenDB 模型 设计一对多

> ID：14017157
> 
> 赞同：3
> 
> 时间：2012-12-24T04:42:58.357
> 
> 标签：c#, ravendb

如果我有一个包含列表的对象。我应该将该列表存储在与对象相同的文档中，还是将该列表存储在带有引用的单独文档中。或者我应该将它存储在两者中，也不是照片列表对象的大小会增加，感谢您的任何建议。

```
public class Album
{
    public string Name { get; set; }

    //Should I store this inside of the album document?
    public List<Photo> Photos {get; set; } 
}

public class Photo
{
    public string Title { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T22:35:28.137

两者都可以接受。不过阿隆索是对的，等到你有令人信服的理由把它分开。

一个令人信服的原因的例子是，如果您经常需要访问相册的其余信息并且照片列表非常大。另一个示例是，如果您想要在相册上而不是在照片列表上进行版本跟踪。

第三种可能性是将每张照片存储在单独的文档中并引用相册 ID，而不是保留一个列表。

```
public class Photo
{
    public string Id { get; set; }
    public string Title { get; set; }
    public string AlbumId { get; set; }
} 
```

这实际上取决于什么对您的场景更有效。没有一种正确的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T09:42:11.193

将列表存储在包含的对象/文档中。除非您有真正令人信服的理由不这样做。

# typemock - Typemock Isolator - 如何模拟返回非硬编码值的属性

> ID：14017158
> 
> 赞同：1
> 
> 时间：2012-12-24T04:43:02.223
> 
> 标签：typemock, typemock-isolator

在 Isolator 中是否可以为（只读）属性返回非硬编码值？

如果不将伪造的对象替换为具体类的新实例，该实例具有明确定义为所需行为的属性（然后可能需要引用测试方法来访问所需的数据），这似乎是不可能的？

```
 public class MyClass
    {
        public int Number { get; private set; }
    }

    [Test]
    public void TestPropertyGetter_ReturningNonHardCodedValuesIsolator()
    {
        var fake = new MyClass();
        var x = 0;
        Isolate.WhenCalled(() => fake.Number).WillReturn(x);
        x++;

        Assert.AreEqual(1, fake.Number);
    } 
```

理想情况下，我正在寻找一个与 MOQ 语法等效的简单 1 班轮。

```
 fake.SetupGet(x => x.Number).Returns(() => x); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T13:01:09.443

我的名字是 Nofar，来自 Typemock 的支持团队。

当您使用 WillReturn API 时，您将获得与编写 willReturn 短语时相同的“x”值。所以，在这句话之后改变它的价值是不相关的。

对于这种情况，您可以使用 DoInstead API，如下所示：

```
 [TestMethod]
    public void TestPropertyGetter_ReturningNonHardCodedValuesIsolator()
    {
        var fake = new MyClass();
        var x = 0;
        Isolate.WhenCalled(() => fake.Number).DoInstead(y =>
                                                            {
                                                                return x;
                                                            });
        x++;

        Assert.AreEqual(1, fake.Number);
    }
} 
```

请问您要测试的是什么？

问候，

诺法尔

类型模拟支持

单元测试公司

# c++ - 在非 VS 项目中包含 VS DLL

> ID：14017159
> 
> 赞同：0
> 
> 时间：2012-12-24T04:43:05.617
> 
> 标签：c++, visual-studio, qt, dll

我在编写 DLL 或 Visual Studio 方面没有太多经验。基本上我想在非VS（即Qt）项目中使用在Visual Studio中创建的DLL。默认 DLL (VS2010)的`.h`文件是：

```
// test-lib.h

#pragma once

using namespace System;

namespace testlib {

    public ref class Class1
    {
        //...
    };
} 
```

我能够毫无问题地构建 DLL，但我不知道如何将它包含在我的 Qt 项目中。也就是说，当我尝试编译它时，我得到

> ..\test-lib.h:6: error: C2871: 'System': 不存在同名的命名空间 ..\test-lib.h:10: error: C2059: 语法错误: 'public' .. \test-lib.h:11：错误：C2143：语法错误：缺少';' 在'{'等之前

尽管事实上我正在使用 VS2012 的编译器进行编译，并且我的 Qt 版本也是使用它构建的。有谁知道我怎样才能使这项工作？在我的`.pro`文件中，我目前添加了 dll `LIBS`，是否需要添加其他 dll？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:46:42.940

假设您的 DLL 是用 C 语言编写的，带有符号导出等。

```
typedef void (*NameOfMyDLLFunction)(double* data, int size);
QLibrary* myLibrary = new QLibrary("NameOfMyLibraryFile", this);

myLibrary->load();

NameOfMyDLLFunction dllFunction = reinterpret_cast<NameOfMyDLLFunction(myLibrary->resolve("dllFunction ")); 
```

现在您可以调用您的`dllFunction(double* data, int size)`.

# android - 使用数组适配器在 ListView 中插入分隔符

> ID：14017160
> 
> 赞同：1
> 
> 时间：2012-12-24T04:43:36.050
> 
> 标签：android, android-layout, android-listview, android-arrayadapter

场景：我有 n 个选项卡，每个选项卡都有自己的列表视图。我正在使用数组适配器来生成列表视图。传递给 arrayadaper 的数组具有对象数组。每个对象都有 和 。现在基于菜单类型，如果菜单类型是“菜单组”，我需要使用不同的布局进行绘制并将背景设置为红色。

问题很简单.. 每当我向下/向上滚动时，listview 中 menugroup 行的属性就会传递给 listview 中的其他行。换句话说，滚动会干扰分隔符。

以下是适配器的代码。你能指导我到需要更正的地方吗？提前致谢。

```
public class MyCustomAdapter  extends ArrayAdapter<Menu> {
private ArrayList<Menu> menuItemList; 
Context context;
LayoutInflater vi;

    public MyCustomAdapter(Context context ,ArrayList<Menu> menu) {    
        super(context, 0, menu );    
        this.menuItemList = new ArrayList<Menu>();    
        this.menuItemList.addAll(menu); 
        this.context =context;
        vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);  
    }    

    private class ViewHolder {
        TextView menuItem;   
        TextView menuGroup;  
    }
    public View getView(final int position, View convertView, ViewGroup parent) {      
        ViewHolder holder;    
        int type =0;
        String menuType = menuItemList.get(position).getMenuType();
        if (menuType.equals("menugroup"))
            type=1;
        if (menuType.equals("menuitem"))
            type=2;

        if (convertView == null) { 
            holder = new ViewHolder();  
            switch (type) {
                case 1:
                convertView = vi.inflate(R.layout.group,  null); 
                holder.menuItem = (TextView) convertView.findViewById(R.id.tvGroup);
                convertView.setBackgroundColor(Color.RED); 
                break;              

                case 2:
                convertView = vi.inflate(R.layout.item,  null); 
                holder.menuItem = (TextView) convertView.findViewById(R.id.tvItem); 
                break; 
            }  
            convertView.setTag(holder); 
    } else {
        holder = (ViewHolder) convertView.getTag();  
    }    

    switch (type) {
    case 1:         
    holder.menuItem.setText(menuItemList.get(position).getItemName()) ; 
        convertView.setBackgroundColor(Color.RED); 
    break;              
    case 2:
          holder.menuItem.setText(menuItemList.get(position).getItemName()) ;  
    break; 
        }
        return convertView; 
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T04:49:06.490

> 现在基于菜单类型，如果菜单类型是“菜单组”，我需要使用不同的布局进行绘制并将背景设置为红色。

您需要覆盖`getItemViewType()`并`getViewTypeCount()`显示不止一种类型的布局，否则您将与适配器的回收器作斗争......

* * *

看起来您已经完成了大部分工作，但让我们更改您的一些代码：

```
public int getItemViewType(int position) {
    if (menuItemList.get(position).getMenuType().equals("menugroup")) 
        return 0;
    return 1;
}

public int getViewTypeCount() {
    return 2;
} 
```

然后`getView()`像这样使用：

```
public View getView(final int position, View convertView, ViewGroup parent) {      
    ViewHolder holder;    
    if (convertView == null) { 
        holder = new ViewHolder();  
        switch (getItemViewType(position)) {
        case 0:
            convertView = vi.inflate(R.layout.group,  null); 
            holder.menuItem = (TextView) convertView.findViewById(R.id.tvGroup);
            convertView.setBackgroundColor(Color.RED); 
            break;              
        case 1:
            convertView = vi.inflate(R.layout.item,  null); 
            holder.menuItem = (TextView) convertView.findViewById(R.id.tvItem); 
            break; 
        }  
        convertView.setTag(holder); 
    } else {
        holder = (ViewHolder) convertView.getTag();  
    }    

    holder.menuItem.setText(menuItemList.get(position).getItemName()); 

    return convertView; 
} 
```

* * *

> 如何忽略 menuGroups 行上的点击？

以非常相似的方式，您需要覆盖另外两个方法`areAllItemsEnabled()`和`isEnabled(int)`. 由于启用的项目只是上面的特定项目类型，因此代码看起来也相同。

```
public boolean areAllItemsEnabled() {
    return false;
}

public boolean isEnabled(int position) {
    return menuItemList.get(position).getMenuType().equals("menugroup"); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T04:54:16.300

您可以通过像这样绑定自定义 xml 文件来添加分隔符。

```
<LinearLayout
    android:id="@+id/lnrblog"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:layout_weight="1.18" >

        <TextView
            android:id="@+id/blog_title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_weight="1.20"
            android:gravity="center_vertical"
            android:text="Title"
            android:textColor="#ffffff"
            android:textSize="16sp"
            android:textStyle="bold" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/blog_date"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_weight="1.20"
            android:gravity="center_vertical"
            android:text="Date"
            android:textColor="#ffffff"
            android:textSize="16sp" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/lnrdivider"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/blog_desc"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_weight="1.20"
            android:gravity="center_vertical"
            android:text="Description"
            android:textColor="#ffffff"
            android:textSize="16sp" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linear123"
        android:layout_width="fill_parent"
        android:layout_height="2dp"
        android:background="@drawable/seprater_line" >

    </LinearLayout>
</LinearLayout> 
```

并在你的java文件中写下这段代码..

```
@Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.customer_list);

        btnAddCustomer=(Button)findViewById(R.id.btnAddCustomer);
        lst_customer_list=(ListView)findViewById(R.id.listView1);

        list=new ArrayList<String>();

        list.add("Mehul");
        list.add("Sanket");
        list.add("Nitin");
        list.add("Angel");
        list.add("Kirti");
        list.add("Kirit");
        list.add("Gangeshwar");
        list.add("Bhavesh");

        lst_customer_list.setAdapter(new Listadapter(getApplicationContext(), R.id.listView1, list));

    }

    public class Listadapter extends ArrayAdapter<String>
    {   
        ArrayList<String> mList = new ArrayList<String>();

        public Listadapter(Context context, int textViewResourceId,ArrayList<String> list) 
        {
            super(context, textViewResourceId, list);
            this.mList = list;

        }
        @Override
        public View getView(final int position, View convertView, ViewGroup parent) 
        {

            View v = convertView;

            if(v==null)
            {
                LayoutInflater li = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v=li.inflate(R.layout.custom_row, null);

            }

            TextView Title = (TextView) v.findViewById(R.id.custom_text);
            final RelativeLayout content = (RelativeLayout) v.findViewById(R.id.main);

            String listitem=mList.get(position);

            Title.setText(listitem);

            content.setOnClickListener(new OnClickListener()
            {

                @Override
                public void onClick(View arg0) 
                {

                }
            });

            return v;
        }

    } 
```

# php - 如何将一个字符串加密为另一个长度为 4 到 6 的字符串

> ID：14017161
> 
> 赞同：0
> 
> 时间：2012-12-24T04:43:54.187
> 
> 标签：php, cryptography

我想为我的 SMS 服务将一个字符串加密为另一个长度为 4 到 6 的字符串。例如，我想将 UserID 加密为字符串 xxxx。所以用户只需发送“MyPage xxxx”然后发送到我的短信服务，我将解密字符串 xxx 以知道谁发送了这条消息。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T05:30:12.030

Sure, you can store 4-6 character unique string in your database and have your users to send it.

However, this raises some flags:

1.  What if some other user learns this secret string and sends SMS with it? Would you trust such SMS that it was sent by user you have assumed? I don't think so.

2.  If somebody is sending SMS to your server, presumably you will know their phone number where it was sent from - SMS will provide it. In that case, why bother asking user to provide anything more? Also, it is relatively difficult to forge sending SMS phone number. Don't get me wrong, sending phone number can be forged, but I think that it is still more secure than your approach.

3.  Asking user to type anything that they need to remember is too much to ask. They will forget, they will make mistakes, they will screw it up. Don't do that, make it fully automatic, and just rely on sending phone number.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T04:46:42.707

您可以为每个用户生成一个随机的 4 字符标识符（例如在注册时）并将其存储在数据库中。然后，当您获得文本时，您可以检查数据库中的标识符并查看谁发送了该消息。

# git - git从本地推送到本地

> ID：14017168
> 
> 赞同：1
> 
> 时间：2012-12-24T04:44:44.343
> 
> 标签：git, git-push

我正在尝试在我的本地机器上添加第二个本地仓库。所以我创建了一个目录，在`git init`那里做了一个然后我跑了：`git remote add new_repo /path/.git`

然后从我的本地仓库中，我跑了`git push -u mybranch`，知道这是我推送的工作分支，然后我得到了错误：

```
No refs in common and none specified; doing nothing.
Perhaps you should specify a branch such as 'master'. 
```

我怎样才能成功地将我的东西推送到第二个 repo 上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T04:54:59.717

你必须告诉它推到*哪里。*`git push -u new_repo mybranch`将`mybranch`在本地推送到`mybranch`on `new_repo`（并设置跟踪，以便将来`git push`默认推`mybranch`送到`new_repo`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T04:52:06.280

Git 只是不知道*要*推送什么——告诉它：

```
git push new_repo mybranch:mybranch 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-07T09:05:03.250

从一个本地 repo 推送到另一个本地 repo
这里从当前本地 repo2 的 dev 分支推送到本地 repo1的 master 分支
注意： repo1**的 master 分支不应该处于签出状态**，否则推送会失败，您可以在测试时添加新分支并结帐

```
cd /path/to/repo2.git/
git push /path/to/repo1.git/ dev:master 
```

# javascript - 怎么拉 来自外部 html 页面的标签并在它们之间旋转

> ID：14017171
> 
> 赞同：0
> 
> 时间：2012-12-24T04:44:55.867
> 
> 标签：javascript, jquery, html

我建立了一个没有任何服务器端脚本/语言的网站，只使用 HTML/JavaScript/jQuery。

在我的网站中，我保留了一个普通的 stream.html 页面（没有 CSS、格式等）

```
<html>
<head>
</head>
<body>
<div id="textParagraphs">
<p>Para 1</p>
<p>Para 2</p>
<p>Para 3</p>
<p>Para 4</p>
</div>
</body>
</html> 
```

在我拥有的所有其他 html 页面中（使用 divs/formatting/css 等），我打算在标题中保留一个部分，该`<p>`部分从页面中提取前三个部分，并通过旋转效果显示它们。例如： 有三个段落之后，应该显示 Para1 ->淡出 -> Para2 -> Fade out -> Para3

如何`<p>`从另一个页面中提取部分并在此处显示它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T04:55:49.807

我建议将这些段落存储为 JSON。

然后，您可以使用 jquery 从每个页面请求它们，`$.getJSON()`而不必解析 HTML 文档。如果您想维护 stream.html 文件，您可以获取 JSON 并打印所有这些文件，而不是只处理前三个文件。

在此处查看示例：http: [//api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

获得 (3) 项列表后，您可以设置轮播（google for `carousel javascript`）。有大量的脚本或 jQuery 插件可以做到这一点，找到一个你喜欢的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T05:06:39.330

`jQuery.get()`基本上，您可以使用函数获取该 html 页面的内容。然后在结果中您应该`<p>`使用`jQuery(result).find("p")`. 现在您有了`p`标签数组，您可以使用这个简单的`carousel`脚本在它们之间进行轮换：

```
var carousel = {
    _defaultParameters: {
        container: null,
        paragraphs: [],
        timeout: 3000,
        nextItemIndex: 0
    },

    rotate: function(param){
        var param = $.extend(true, {}, this._defaultParameters, param);

        if(param.paragraphs.length == 0) return;
        if(param.nextItemIndex > param.paragraphs.length - 1){
            param.nextItemIndex = 0;
        }

        param.container.empty().append(param.paragraphs[param.nextItemIndex]);

        param.nextItemIndex++;
        setTimeout(function(){ carousel.rotate(param); }, param.timeout);
     }
}

$(function(){

    jQuery.get('data_source.html', function(result) { // replace data_source.html with your external html file url
        var paragraphs = jQuery(result).find("p");

        carousel.rotate({
            container: $("#rotatorContainerID"), //replace this with your container
            paragraphs: paragraphs
        });
    });

}); 
```

替换`'data_source.html'`为包含该`<p>`标签的外部 html 文件的地址。还将更改为`container: $("#rotatorContainerID")`将`id`承载`<p>`标签的元素，并且将在其中发生旋转。

要演示`carousel`功能，您可以检查这个小提琴：http: [//jsfiddle.net/5AgcE/4/](http://jsfiddle.net/5AgcE/4/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-24T05:01:39.523

这是最简单的方法：

```
var allPs = $('p');

var p1 = $(allPs[0]).html();

var p2 = $(allPs[1]).html();

var p3 = $(allPs[2]).html(); 
```

您还可以添加一些测试，例如：

```
if(allPs.length >= 3) {

} 
```

# javascript - Paper.js 构建错误：env：节点：没有这样的文件或目录

> ID：14017172
> 
> 赞同：0
> 
> 时间：2012-12-24T04:45:21.947
> 
> 标签：javascript, bash, build

我似乎无法运行 build.sh 脚本来开始使用 paper.js。

从构建文件夹中我得到： env: node: No such file or directory

奇怪的是，我可以使用以下命令从构建文件夹外部运行它：./build/build.sh

但得到另一个与路径相关的错误：./build/build.sh: line 37: ./preprocess.sh: No such file or directory

我假设这是运行 bash 脚本的一般问题。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:04:27.200

脚本调用[`build/prepro.js`](https://github.com/paperjs/paper.js/blob/master/build/prepro.js)，它在 node.js 中运行（参见第一行：）`#!/usr/bin/env node`，但您似乎没有安装它（或者至少它没有被 找到`env`）。

尝试安装 node.js，或使其可用于`env`，这样构建脚本就可以工作了。

# ruby - 红宝石/推特宝石。Twitter::错误::未找到

> ID：14017173
> 
> 赞同：0
> 
> 时间：2012-12-24T04:45:23.367
> 
> 标签：ruby, twitter, gem, twitter-gem

节日快乐！

使用 Twitter gem，我在[查找](https://dev.twitter.com/docs/api/1.1/get/users/lookup)一批 id时偶尔会遇到此[错误。](http://rdoc.info/gems/twitter/Twitter/Error/NotFound)有没有办法知道哪些 id 没有找到，哪些是？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T14:53:13.970

当您传递的所有 id 都未找到或您仅传递一个 id 而未找到时，就会发生这种情况。如果您传递的至少一个 id 可用，那么您将返回一个包含该值的列表，而不是任何缺失的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:46:00.450

也许您会收到此消息，因为 twitter 无法返回私人用户的 id，所以这可能会有所帮助：
在询问 id 之前，请先放...

a_user = Twitter.user(screen_name)
if a_user.protected != true { ... }

# mod-rewrite - .htaccess 重写在某些情况下不会加载 css

> ID：14017175
> 
> 赞同：0
> 
> 时间：2012-12-24T04:45:28.880
> 
> 标签：mod-rewrite

这是我的重写规则：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME}.php -f
RewriteCond %{REQUEST_URI} !/$
#RewriteRule (.*)/?$ $1\.php [L]
RewriteRule profile/ profile.php
RewriteRule profile profile.php 
```

我对此有点陌生，但是当我转到 localhost/profile 时，一切正常，但是当我转到 localhost/profile/ 时，实际页面加载，但 css 没有加载，我必须手动将其更改为/style.css 来加载它，有谁知道我怎么能做到这一点，同时使 / 在最后是可选的（不必放置我的整个域或绝对路径）？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:32:46.443

you can Try this `<? echo '<link rel="stylesheet" type="text/css" href="'."http://".$_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI']."../style.css".'" />' ?>`

But this is not the best solution. What you can do is you can define a global variable use that to give absoluete paths. i.e

```
<?php 
//at the beginning of your page
define('LINK',"http://localhost/");

//for your css href
echo LINK."style.css"; 
```

Note: The path is assumption as i do not know your folder structure.

# android - 我无法在 Android 中从 GCM onMessage 打开对话框

> ID：14017176
> 
> 赞同：3
> 
> 时间：2012-12-24T04:45:32.810
> 
> 标签：android, google-cloud-messaging

当使用谷歌云消息向我的 android 应用程序发送消息时，我不知道如何打开一个是或否对话框（如 javasrcript 确认框），如果他们点击是，则在浏览器中打开一个网站，如果他们点击则什么都不做不。

我已经花费了太多时间，并且讨厌向您展示这个基本代码而没有应该在最后出现的失败代码，但是我只是没有想法并且尝试了太多我在网上找到的示例变体。我怀疑他们失败是因为我使用了错误的上下文，或者是因为我试图从这个服务类中做到这一点。

```
public class GCMIntentService extends GCMBaseIntentService {
@Override
protected void onMessage( Context myContext, Intent intent ) {
    // TODO Auto-generated method stub
    Log.i( LOG_TAG, "GCMIntentService onMessage called" );
    Log.i( LOG_TAG, "Message is: " + intent.getStringExtra( "data" ) );
    JSONObject o = API.getJSONObj(intent.getStringExtra( "data" ));
    String URL = "";
    String message = "";
    try {
            URL = o.getString("URL");
    } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
    }
    try {
            message = o.getString("message");
    } catch (JSONException e) {
    // TODO Auto-generated catch block
            e.printStackTrace();
    }

    /* Code to open dialog or website goes here */ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T06:02:13.620

每次收到通知时都会调用 onMessage 方法。要打开通知对话框，您可以在 onMessage 中启动另一个活动并将您的代码（用于对话框）放入该活动中。或者您也可以将其设为通知。像这样：-

```
public class GCMIntentService extends GCMBaseIntentService
{
   @Override
   protected void onMessage( Context myContext, Intent intent) 
   {
        <your code>
        //if you want to show any dialog directly.
        Intent i = new Intent(myContext,<your Activity.class>);
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
        i.putExtra("message", message);
        myContext.startActivity(i); 

      //if you want to show message through notification.
      NotificationManager notificationManager = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
      Notification notification = new Notification(R.drawable.notification_icon,arg1.getStringExtra("message"), when);
      String title = context.getString(R.string.app_name);
      Intent notificationIntent = new Intent(context,<Your Activity>.class);
      // set intent so it does not start a new activity  
      notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
      PendingIntent intent = PendingIntent.getActivity(context, 0,notificationIntent, 0);
      notification.setLatestEventInfo(context, title, arg1.getStringExtra("message"), intent);
      notification.flags |= Notification.FLAG_AUTO_CANCEL;
      notificationManager.notify(0, notification);
  }
} 
```

请让我知道这是否对您和圣诞节有帮助:-)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T05:52:46.230

试试这个工作，在 GCMIntentService 中写上面的代码生成通知

```
private static void generateNotification(Context context, String message) {
        long when = System.currentTimeMillis();
        NotificationManager notificationManager = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(R.drawable.appicon,
                message, when);
        String title = context.getString(R.string.app_name);
        Intent notificationIntent = new Intent(context,
                YourClassName.class);
        // set intent so it does not start a new activity
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP
                | Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent = PendingIntent.getActivity(context, 0,
                notificationIntent, 0);
        notification.setLatestEventInfo(context, title, message, intent);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notificationManager.notify(0, notification);
    } 
```

当单击通知时，它会转到您的应用程序中的活动，之后在活动中您可以创建对话框以及您想要放入活动中的任何内容

# mysql - 优化 select by 多个 group by 和 sub 查询

> ID：14017177
> 
> 赞同：0
> 
> 时间：2012-12-24T04:45:33.833
> 
> 标签：mysql, group-by, subquery

我正在尝试通过以下方式选择所有订单：

1.  选择所有超过 1 个订单的地址（使用邮政编码和街道地址）；
2.  选择所有这些订单。

我当前的查询如下所示：

```
SELECT  o.*
FROM    ( SELECT o2.orders_id
              FROM `zen_orders` o2
              GROUP BY delivery_postcode, delivery_street_address
              HAVING COUNT(o2.orders_id) > 1
        ) AS o3
LEFT JOIN zen_orders AS o ON (o.orders_id = o3.orders_id)
ORDER BY delivery_street_address 
```

查询非常慢，我想知道我做错了什么以及我应该如何解决它。

编辑：按要求添加索引，速度要快得多。还跑了“解释”：

[http://i.stack.imgur.com/ndHnC.png](http://i.stack.imgur.com/ndHnC.png)

# javascript - Javascript 中如何创建、合并和销毁 xmlhttprequest 对象

> ID：14017183
> 
> 赞同：9
> 
> 时间：2012-12-24T04:46:32.383
> 
> 标签：javascript, html, ajax, xmlhttprequest

我的背景是传统的编译型面向对象语言，例如 C++ 和 .NET 编程，现在我正在为一个新项目涉足一些 JavaScript。我正在涉足 AJAX，并遇到了一个令人困惑的方面，即浏览器如何管理对象。

**[编辑 #2] - 活动内容脚本的更改**

我有一个带有三个按钮的练习页面，每个按钮更新一个`<textarea>`使用`XMLHttpRequest`对象：

1.  按钮 1 使用来自*slowtime.php的文本内容更新 TextArea1*
2.  按钮 2 使用来自*slowtime.php的文本内容更新 TextArea2*
3.  按钮 3 使用来自*fasttime.php的文本内容更新 TextArea3*

其中*slowtime.php*和*fasttime.php*是简单的脚本，它们返回带有两个时间戳的文本/HTML 页面：一个在页面加载时，一个在经过一段时间后。

每次单击一个按钮时，每个按钮都可以正常工作。如果我在第一个请求完成之前单击按钮 2，然后单击按钮 3，则更新仍按预期工作。

如果我在第一个请求完成之前单击按钮 1，然后单击按钮 2，则 TextArea1 和 TextArea2 会收到正确的值；但是，`onreadystatechange`事件调用同时发生，即第一个响应迟到并且仅在第二个响应到达时才处理。

**示例代码**

网站

```
<!DOCTYPE html>
<html>
<head>
<script>
function loadXMLDoc(url,target)
{
var xmlhttp;
xmlhttp=new XMLHttpRequest();

xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById(target).value=xmlhttp.responseText;
    }
  }
xmlhttp.open("POST",url,true);
xmlhttp.send();
}
</script>
</head>

<body>
<form>

<input type="button" value="Button 1" onClick="loadXMLDoc('slowtime.php','TextArea1')"/>
<input type="button" value="Button 2" onClick="loadXMLDoc('slowtime.php','TextArea2')"/>
<input type="button" value="Button 3" onClick="loadXMLDoc('fasttime.php','TextArea3')"/>

<div><textarea id="TextArea1"></textarea></div>
<div><textarea id="TextArea2"></textarea></div>
<div><textarea id="TextArea3"></textarea></div>

</form>
</body>
</html> 
```

PHP 代码 ( *slowtime.php* )

```
<?php
     echo date('h:i:s') . "\n";
     sleep(5);
     echo date('h:i:s') . "\n";
?> 
```

**问题[修订]**

浏览器如何管理`XMLHttpRequest`对象？按下按钮 2 和 3 表示每次按下都会实例化一个新对象，并且每个按钮都有独立的事件处理程序。如果对象在初始函数调用之后存活（因为它们的事件处理程序存活），它们何时从内存中清除/销毁？

如果它们`XMLHttpRequests`是单独的对象，那么向同一个 URL 发送第二个请求如何影响第一个请求的响应时间？这可能是服务器端问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T19:37:59.853

除非在对象上显式调用 delete，否则永远不会删除 XMLHttpRequest 的上下文。在这种情况下：xmlhttp。如果您希望您的应用程序运行精简和干净，您真的应该以某种方式跟踪该 var 并清理它。Javascript 最初是为网页设计的，因此它往往会让事情变得疯狂，除非你自己阻止它。

否则，一旦对象不再被任何其他函数使用或有任何剩余的回调，浏览器的垃圾收集器可能会清除该对象。

至于您对同时发生的事件的问题，我自己无法重现该问题，这确实让我相信您的 php 配置有问题。您的服务器是否可能不允许同时运行多个脚本？

这是您在我的服务器上的示例，有一些细微的变化： [http ://www.seijohki.net/test.php](http://www.seijinohki.net/test.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T19:53:48.537

这是一个浏览器问题。

*   Chrome 23&26 会以这种方式运行。
*   Opera 12 没有
*   IE 9 没有
*   Firefox 17 没有

如果您使 url 独一无二，例如`slowtime.php?1`然后`slowtime.php?2`chrome 不再以这种方式运行。

顺便说一句-在我的测试 chrome 中使用相同的值更新两个文本区域 - 第一个请求中的值。并且它们都在第一个请求完成时更新，而不是在第二个请求完成时更新。这肯定是一个错误，因为它完全是错误的。我通过网络服务器日志验证了第二个请求永远不会被发送。

# delphi - 使用 IdHttp 解码响应内容失败

> ID：14017186
> 
> 赞同：1
> 
> 时间：2012-12-24T04:47:02.150
> 
> 标签：delphi, encoding, indy, idhttp

我使用 TIdHttp 来获取网页内容。响应头指示内容编码为 utf8。我想将控制台中的内容打印为 CP936（简体中文），但实际内容不可读。

```
Result := TEncoding.Utf8.GetString(ResponseBuffer); 
```

我在 python 中做同样的事情（使用 httplib2）没有任何问题。

```
def python_try():
    conn = httplib2.HttpConn()
    respose, content = conn.get(...)
    print content.decode('utf8') # readable in console 
```

* * *

**更新 1**

我调试了原始响应并注意到内容被压缩了。

```
HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Content-Type: text/html;charset=UTF-8
Transfer-Encoding: chunked
Content-Encoding: gzip
Vary: Accept-Encoding
Date: Mon, 24 Dec 2012 15:27:44 GMT
Connection: Keep-Alive 
```

我试图将 IdCompressorZLib 实例分配给 IdHttp 实例。不幸的是，应用程序在解压缩 gzip 内容时会崩溃。测试地址为“http\://www.baidu.com”（编码=gb2312）。

* * *

**更新 2**

我还尝试下载一个 gzipped jquery 脚本文件，它只包含 ascii 字符。这次成功了，这意味着是Indy库的问题。如果我没有错，我应该关闭这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T01:00:21.353

`TIdHTTP`如果您有一个`TIdCompressorZLib`组件分配给该`TIdHTTP.Compressor`属性，则为您处理 gzip 解压缩。否则，您将不得不手动解压缩它（如果未分配该属性，则默认情况下`TIdHTTP`不会发送标头）。`Accept-Encoding``Compressor`

至于 UTF-8 编码，如果您正在调用返回值而不是填充对象的or方法`TIdHTTP`的重载版本，也可以为您处理。它将为您将 UTF-8 解码为 UTF-16。要将其转换为 CP936，您可以让 RTL 为您进行转换：`TIdHTTP.Get()``TIdHTTP.Post()``String``TStream`

```
type
  Cp936String = type AnsiString(936);
var
  S: Cp936String;
begin
  S := Cp936String(IdHTTP1.Get(...)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T06:58:04.250

不要使用任何自动检测编码，它不能可靠地完成。只需相信 Content-Type 标头即可。

```
Result := TEncoding.Utf8.GetString(ResponseBuffer); 
```

如果 Content-Type 标头丢失或撒谎，则需要检测编码。虽然我不会使用任何将 UTF-8 误检测为 CP936 的算法......

# c#-4.0 - 在不使用 DataMember 的情况下，将请求 DTO 属性映射到 ServiceStack 中不同名称的 URI 参数？

> ID：14017187
> 
> 赞同：1
> 
> 时间：2012-12-24T04:47:17.407
> 
> 标签：c#-4.0, rest, servicestack, dto

根据 ServiceStack 的 wiki 示例，如果您有这样的 URI：

```
www.servicestack.net/ServiceStack.Hello/servicestack/hello?Name=World 
```

您的请求 DTO 如下所示：

```
[Route("/hello")]
public class Hello
{
    public string Name { get; set; }
} 
```

但是，如果 URI 是这样的：

```
www.servicestack.net/ServiceStack.Hello/servicestack/hello?n=World 
```

您将如何使用上面相同的 DTO 但将 Name 映射到“n”？是否有一个属性可以用来装饰 DTO 属性？

我尝试使用 DataContract 和 DataMember 属性，如下所示：

```
[DataContract]
[Route("/hello")]
public class Hello
{
    [DataMember(Name = "n")]
    public string Name { get; set; }
} 
```

但是，这很好用，当您有很多属性时，它会停止工作，除非您使用 [DataMember] 属性装饰每个属性。

无论如何提供与属性不同的参数的自定义名称而不使用 DataContract 和 DataMember？也许是 ServiceStack 提供的自定义属性，所以只有需要以不同方式映射的属性才具有属性，而其余的就不用管了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T07:48:44.607

.NET DataContract 序列化程序在 DTO 上使用不同名称的标准方法是使用`[DataMember]`属性。如果您不想这样做，可以使属性名称与 QueryString 变量同名（不区分大小写）。

除此之外，您可以提供自己的[自定义请求绑定](https://github.com/ServiceStack/ServiceStack/wiki/Serialization-deserialization)器，或者您可以直接从服务或过滤器内部访问 QueryString：

```
var name = base.Request.QueryString["n"]; 
```

如果您对很多变量执行此操作，您可以包装从 QueryString 中提取并将请求 DTO 填充到[过滤器属性中](https://github.com/ServiceStack/ServiceStack/wiki/Filter-attributes)

# javascript - 函数后结束javascript？

> ID：14017191
> 
> 赞同：1
> 
> 时间：2012-12-24T04:47:26.580
> 
> 标签：javascript

我的 javasctipt 出现问题。基本上，它设置为隐藏两个 div 层，每次用户按下按钮时，它们会依次淡入。

因此，如果他们按一次，div layer 1 隐藏，div layer 2 淡入。如果再次按，div layer 2 隐藏，div layer 3 淡入。

它工作正常，但是如果用户第三次按下按钮，所有的 div 都会相互叠加并全部取消隐藏。我可以阻止这种情况发生吗？

我是 javascript 初学者，不太了解，所以如果有人可以请告诉我这会有所帮助。谢谢。

```
<script>
$(".modcontentnewestmore").hide();
$(".modcontentnewestmore2").hide();
$('.morebutton').click(function () {
    if ($('.modcontentnewestmore').is(":hidden")) {
         $(".modcontentnewestfirst").fadeOut(500);
         $('.modcontentnewestmore').delay(700).fadeIn(500);

    } else {

        $('.modcontentnewestmore').fadeOut(500);
              $('.modcontentnewestmore2').delay(700).fadeIn(500);

    }

  });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T04:56:40.953

尝试这个：

```
<script>
    $(".modcontentnewestmore").hide();
    $(".modcontentnewestmore2").hide();

    $('.morebutton').click(function () {
        if ($('.modcontentnewestfirst').is(":visible")) {
             $(".modcontentnewestfirst").fadeOut(500);
             $('.modcontentnewestmore').delay(700).fadeIn(500);

        } else if ($('.modcontentnewestmore').is(":visible")) {
            $('.modcontentnewestmore').fadeOut(500);
            $('.modcontentnewestmore2').delay(700).fadeIn(500);

        } else {
            $('.modcontentnewestmore2').fadeOut(500);
            $('.modcontentnewestfirst').delay(700).fadeIn(500);
        }
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T04:59:17.993

作为一个忠告，您可以很容易地在 css 和 html 中完成此操作，并且可以避免在阻止 javascript 的浏览器中进行任何故障排除。

```
<style type='text/css'>
div.div1{
    position:absolute;
    width:100px;
    height:100px;
    background:rgb(240,240,240);
    border:1px solid rgb(220,220,220);
    transition:all 500ms ease;
    -moz-transition:all 500ms ease;
    -webkit-transition:all 500ms ease;
    -o-transition:all 500ms ease;
    opacity:0;
}
div.div2{
    position:absolute;
    width:100px;
    height:100px;
    background:rgb(240,240,240);
    border:1px solid rgb(220,220,220);
    transition:all 500ms 700ms ease;
    -moz-transition:all 500ms 700ms ease;
    -webkit-transition:all 500ms 700ms ease;
    -o-transition:all 500ms 700ms ease;
}
input.button:checked~div div.div1{
    opacity:1;
    transition:all 500ms 700ms ease;
    -moz-transition:all 500ms 700ms ease;
    -webkit-transition:all 500ms 700ms ease;
    -o-transition:all 500ms 700ms ease;
}
input.button:checked~div div.div2{
    opacity:0;
    transition:all 500ms ease;
    -moz-transition:all 500ms ease;
    -webkit-transition:all 500ms ease;
    -o-transition:all 500ms ease;
}
</style>
<input class='button' type='checkbox'/>
<div>
    <div class='div1'>
        div 1
    </div>
    <div class='div2'>
        div 2
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T05:23:57.677

设置父 div（我的示例中的 modcontent 类），然后根据可见元素切换它们：

HTML：

```
<div class="modcontent">
  <div class="modcontentnewestfirst">modcontentnewestfirst</div>
  <div class="modcontentnewestmore">modcontentnewestmore</div>
  <div class="modcontentnewestmore2">modcontentnewestmore2</div>
</div>
<button class="morebutton">morebutton</button>​ 
```

JS：

```
var modcontent = $('.modcontent');
modcontent.children().hide().first().show();
$('.morebutton').click(function() {
    var current = modcontent.children(':visible');
    var next = current.next()
    if (next.length === 0) next=modcontent.children().first();
    current.stop().fadeOut(500);
    next.stop().hide().delay(700).fadeIn(500);
}); 
```

​<a href="http://jsfiddle.net/wa8Hr/1/" rel="nofollow">DEMO

# objective-c - 解析包含多个数组的json响应以填充ios中tableView的单元格

> ID：14017194
> 
> 赞同：0
> 
> 时间：2012-12-24T04:47:54.770
> 
> 标签：objective-c, ios, ios6

目前我正在开发一个应用程序，该应用程序将有一个用于新闻部分的 UITableView。我将进行 API 调用以检索新闻以填充 tableView 中的单元格。目前我正在通过 JSON 返回数据，这是 JSON 响应的样子：（放在换行符上，这样阅读结构会更容易一些）

```
[
    {
        "news_id": "1",
        "news_title": "Sample headline",
        "news_date": "2012-12-19",
        "news_news": "news article 1",
        "news_priority": "3"
    },
    {
        "news_id": "2",
        "news_title": "On the Outside, Looking in",
        "news_date": "2012-11-20",
        "news_news": "news article 2",
        "news_priority": "2"
    },
    {
        "news_id": "3",
        "news_title": "Fla. Plans to Mark Death Penalty's Return",
        "news_date": "2012-12-23",
        "news_news": "news article 3",
        "news_priority": "1"
    }
] 
```

在通过 php 进行 JSON 编码之前，我的数组如下所示：

```
Array
(
[0] => Array
    (
        [news_id] => 1
        [news_title] => Sample headline
        [news_date] => 2012-12-19
        [news_news] => news article 1
        [news_priority] => 3
    )
[1] => Array
    (
        [news_id] => 2
        [news_title] => On the Outside, Looking in
        [news_date] => 2012-11-20
        [news_news] => news article 2
        [news_priority] => 2
    )
[2] => Array
    (
        [news_id] => 3
        [news_title] => Fla. Plans to Mark Death Penalty's Return
        [news_date] => 2012-12-23
        [news_news] => news article 3
        [news_priority] => 1
    )
) 
```

我通过执行以下操作来存储响应：

```
// populate the dictionary with the json response.
NSDictionary *data = [NSJSONSerialization JSONObjectWithData:returnData options:NSJSONReadingMutableContainers error:&error];
return data;

// model has a method to construct the url request/connection etc   
NSDictionary *newsDict = [model makeServerAPICall:kURL postMessage:@"method=getNews"];
NSString *string = [newsDict objectForKey:@"news_id"]; 
```

到目前为止，一切似乎都很好，除非我尝试访问数组内部的元素时出现此崩溃并出现错误：

> -[__NSArrayM objectForKey:]：无法识别的选择器发送到实例 0xab13a40 即使这是一个 NSDictionary。在这一点上我很困惑，因为“数据”是一个 NSDictionary。

我正在尝试使用将news_title列出的返回的数据设置我的表观视图，并在选定时将其推向详细视图，以显示该文章的相对数据。我进行了许多 API 调用，其中返回的数据是非常简单的 JSON 格式。这是我第一次尝试从 JSON 响应中提取包含多个数组的数据。老实说，在这一点上，我不知道从这里还能去哪里。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:31:52.193

你安静的困惑。

*   您没有从服务器获得字典。
*   你实际上得到的是一个字典数组。
*   所以，`[model makeServerAPICall:kURL postMessage:@"method=getNews"];`不会返回字典。
*   它实际上返回一个字典数组。

所以这段代码将解决你的问题。

```
NSArray *dictArray = [model makeServerAPICall:kURL postMessage:@"method=getNews"];
for(NSDictionary *newsDict in dictArray){
    NSString *string = [newsDict objectForKey:@"news_id"];
    NSLog(@"%@", string);
} 
```

这将解决你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T06:14:33.670

使用 JSONKit。你会在这里得到它：https://github.com/johnezang/JSONKit

```
NSArray *arrJSONData = //your JSON array
NSString *strJSON = [arrJSONData JSONString];
NSLog("Data:%@",strJSON); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T05:20:15.093

“此时我很困惑，因为“数据”是一个 NSDictionary”

不，不是，它是一个数组，这就是 JSON 打印输出中方括号的含义。仅仅因为您将 data 声明为 NSDictionary，并不能使其成为一体——它将是 NSJSONSerialization 方法返回的任何对象。如果你不知道你会返回一个数组还是字典，你应该在尝试使用它之前检查它的类。

# exception - db4o 枚举集异常

> ID：14017198
> 
> 赞同：1
> 
> 时间：2012-12-24T04:48:52.267
> 
> 标签：exception, db4o, object-oriented-database, enumset, oodb

我正在使用具有透明激活/持久性的 db4o 8.0 ......我有一个包含 EnumSet （和其他东西）的类。我实例化，将枚举值添加到集合和存储中。当我在 DB 中搜索时，获取它并尝试激活我得到这个异常的对象：

```
Exception in thread "main" java.lang.ClassCastException: class Resources.Enums$fooEnum_t != null
    at java.util.EnumSet.typeCheck(EnumSet.java:380)
    at java.util.RegularEnumSet.add(RegularEnumSet.java:160)
    at java.util.RegularEnumSet.add(RegularEnumSet.java:36)
    at com.db4o.typehandlers.CollectionTypeHandler.addToCollection(CollectionTypeHandler.java:120)
    at com.db4o.typehandlers.CollectionTypeHandler.activate(CollectionTypeHandler.java:45)
    at com.db4o.internal.Handlers4.activate(Handlers4.java:300)
...
... 
```

要将 enumSet 存储到 db4o 中，我使用：

```
config.common().objectClass(EnumSet.class).translate(new com.db4o.config.TSerializable()); 
```

我无法弄清楚问题是什么。有任何想法吗？

**编辑：**
我不知道在哪里可以询问有关 db4o 的问题。SO 社区似乎对 db4o 不太活跃。这是因为 db4o 不是很受欢迎还是有其他地方可以“支持”？

**编辑 2：**
我在 versant 的论坛上发现该帖子可能相关但无济于事：http: [//community.versant.com/Forums/tabid/98/aft/1046/Default.aspx#3370](http://community.versant.com/Forums/tabid/98/aft/1046/Default.aspx#3370)

> 我又认出了一件事。没有对 java.util.EnumMap 和 java.util.EnumSet 的内置支持，db4o 将抛出异常，因为没有默认构造函数，并且所有带空参数的构造函数对于这些类都将失败。Db4o.configure().objectClass("java.util.EnumMap").translate(new com.db4o.config.TSerializable()) 当然会解决这个问题。我认为应该支持标准的集合框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:25:29.787

我什至会小心在 db4o 中使用枚举。db4o 存储枚举的方式非常危险。如果您重构，更改枚举，它可能会导致超级奇怪的行为，当您将该枚举存储在 db4o 中时出现错误。到目前为止，枚举上的 switch 语句可能会跳转到错误的位置。

简短的理由：db4o 像对象实例一样存储枚举，并在加载时设置每个反射的枚举值，这可能导致非常奇怪的错误，因为枚举不应该改变。

我会避免存储（Java）枚举，因此也避免存储枚举集。

# python - Python从类列表创建实例

> ID：14017199
> 
> 赞同：0
> 
> 时间：2012-12-24T04:48:52.047
> 
> 标签：python, class, instantiation

我想保留我的自定义类的字典，以便我可以从其他字典（从 db 加载）动态实例化它们，但我不确定要存储什么。

```
class_register = {}

class Foo(object):
    def __init__(self, **kwargs):
        class_register[self.__class__.__name__] = ??  # what to store here?
        self.__dict__.update(kwargs)

new_instance = class_register[result['class_name']](**result['data']) 
```

接受任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T04:51:41.500

只需存储类本身：

```
class_register[self.__class__.__name__] = self.__class__ 
```

但这有点矫枉过正，因为您每次实例化时都在注册该类。

更好的是使用这个：

```
def register(cls):
    class_register[cls.__name__] = cls

class Foo(object):
    # blah blah

register(Foo) 
```

然后你可以把它变成一个类装饰器，像这样使用：

```
def register(cls):
    class_register[cls.__name__] = cls
    return cls

@register
class Foo(object):
    # blah blah 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-01T22:44:14.840

我会从同一个基类继承它们，然后请求`__subclasses__()`那个类，一旦我确定它们都完成了。也许形式：

```
 Base.class_register = dict((x.__name__, x) for x in Base.__subclasses__()) 
```

它使用较少的魔法让 Python 进行簿记。

此外，如果它们没有足够的共同点来让这个超类看起来很有必要，那么在构建后以任何不混淆的方式在相同的代码中使用它们可能会遇到麻烦。

# google-app-engine - 涉及购买独特商品的应用引擎交易的最佳实践？

> ID：14017206
> 
> 赞同：2
> 
> 时间：2012-12-24T04:50:54.043
> 
> 标签：google-app-engine, transactions, idempotent

**没关系：**问题出在客户端，显然 google chrome 在缓存 get 请求的结果方面比我预期的更激进。使用 firefox 进行测试会产生预期的结果。我将投票赞成删除这个问题。

我有 2 个模型，用户和项目。用户有一个“credits”属性，表示用户有多少钱。项目有一个“所有者”属性，如果它不拥有，则为“无”，如果拥有，则为用户的 id。我正在尝试将以下步骤放入事务中：

1.  通过 id 获取用户（不是祖先查询）
2.  通过 id 获取项目（不是祖先查询）
3.  如果该项目已被拥有，则中止。
4.  如果用户没有足够的积分，则中止。
5.  通过项目的价格减少用户的信用。
6.  将项目的“所有者”属性设置为用户的 ID。

如果一切顺利，我会向客户表明他们的购买已经完成，在 @ndb.transactional 装饰函数之外。

为了测试，我快速敲击这个功能（模拟快速按下购买按钮）。作为回应，我得到了几个迹象表明我的购买已经完成，但我预计只有一个这样的迹象。我的期望是第一个事务会通过，其他事务会在第 3 步失败。如果他们在第 3 步没有失败，那么我假设它们是一起开始的，但只有一个事务会在第 3 步结束时通过测试检查更新时间并抛出异常的事务。我的两个假设似乎都是错误的。

值得注意的是，我的交易“有效”，因为我不会超支信用。我只是多次告诉客户他们进行了相同的购买，因为我没有例外。

此外，第三步的中止确实会在短暂延迟后开始触发，但还不足以捕获最初的垃圾邮件。

```
class BuyItem(webapp2.RequestHandler):

    @ndb.transactional(xg=True)
    def buyItemTransaction(self, user_id, item_id):
        user = User.get_by_id(user_id)
        item = Item.get_by_id(item_id)
        if item.owner_id is not None:
            return dict(result='error', message='Item already owned.')
        if user.credits < 5000:
            return dict(result='error', message='Not enough credits.')
        user.credits -= 5000
        user.put()
        item.owner_id = user_id
        item.put()
        return dict(result='success', message='You bought the item.') 

    def get(self):
        user_id = users.get_current_user().user_id()
        item_id = self.request.get('item_id')
        try:
            response = self.buyItemTransaction(user_id, item_id)
        catch TransactionFailedError, e:
            # Transaction went through previously, so send no response.
            return
        self.response.out.write(json.dumps(response)) 
```

我的误解是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:43:49.160

正如我所见，您的实施还可以。

你的问题：

> 为了测试，我快速敲击这个功能（模拟快速按下购买按钮）。作为回应，我得到了几个迹象表明我的购买已经完成，但我预计只有一个这样的迹象。

所以想象一下，你没有使用交易，只是在购买后点击按钮。

它不应该总是在第 3 步失败吗？是吗？

所以你的问题不在于交易。那应该没问题。您的问题在于对步骤 3 等的检查

**编辑**

> 为同时写入实体组的机会而变化的多个进程称为争用。两个进程在争夺写入；最先提交获胜

换句话说，您的第二个（并发事务）可能正在记录消息，但如果第一个事务成功，则不会应用实际的读/写

在重复发布同一消息之前，应检查您添加的最新代码。

这可能会有所帮助：

> 数据存储使用实体组来确定当两个进程尝试同时更新实体组中的数据时会发生什么。发生这种情况时，完成“获胜”的第一个更新，而另一个更新被取消。App Engine 通过引发异常来通知其更新被取消的进程。在大多数情况下，该过程可以再次尝试更新并成功。但是应用程序必须自己决定如何重试，因为重要数据可能在尝试之间发生了变化。这种管理并发访问的方式称为乐观并发控制。从某种意义上说，它是“乐观的”，即数据库尝试执行操作而不检查另一个进程是否正在处理相同的数据（例如使用“锁定”机制），并且只在最后检查冲突，乐观地认为这些行动会成功。更新不能保证成功，如果更新期间数据发生变化，应用程序必须重新尝试操作或采取其他措施。

还要尝试处理异常：

```
 try:
      response = self.buyItemTransaction(user_id, item_id)
  except TransactionFailedError, e:
      # Report an error to the user. 
```

# ios - 如何在 iOS 应用程序的 SUP（sybase 无线平台）中以离线模式工作

> ID：14017209
> 
> 赞同：0
> 
> 时间：2012-12-24T04:51:14.027
> 
> 标签：ios, sup

我是纯 iOS 开发人员我对 Sybase 无线平台一无所知，我有一些与 SUP 离线模式相关的任务，我不知道我在离线模式下做什么，我已经在[http://infocenter.sybase.com](http://infocenter.sybase.com)上进行了研究但我没有从这个链接中得到任何帮助。

如果您知道任何有用的链接或任何示例源代码或与我相同的共享相关的任何内容，请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:24:15.733

在 2.1#3 之后，该方法`offlineLogin`被弃用。我不知道现在如何完成它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:09:56.443

SUP API 非常智能地工作。您可以根据[infocenter](http://infocenter.sybase.com)以离线模式登录 SCC ：

**OfflineLogin 根据最后一次成功验证的凭据进行验证。此方法中没有与 Unwired Server 的通信。**

您必须调用以下方法而不是 onlineLogin: 或登录：

`- (BOOL)offlineLogin:(SUPString)user password:(SUPString)pass;`

在离线模式下订阅包时，它将返回您之前同步的持久数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:42:50.597

任何 SUP 应用程序都必须在第一次运行时在线。这使用DB文件的以下方法 `onlineLogin`方法。对于所有其他运行，您可以使用`offlineLogin`DB 文件的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-02T07:52:42.197

您可以使用phonegap实现离线功能，例如在设备中创建本地数据库（sqllite）。我已经在我的混合应用程序中对其进行了测试，并且运行良好。

# django - Django-tinymce-filebrowser 浏览按钮不起作用

> ID：14017211
> 
> 赞同：1
> 
> 时间：2012-12-24T04:51:38.403
> 
> 标签：django, tinymce

嗨，我在 Django 中使用 jquery TinyMce 编辑器。

对于图像上传，我在我的项目中尝试了来自[https://github.com/aisayko/Django-tinymce-filebrowser](https://github.com/aisayko/Django-tinymce-filebrowser)的Django-tinymce-filebrowser 。

```
tinyMCE.init({
           ...
           file_browser_callback : "mce_filebrowser"
    }); 
```

在编辑器中，显示带有浏览按钮的图像 url。但是通过单击浏览按钮，什么也没有发生。帮我解决这个问题。

提前致谢。

# redis - 模仿慢速 Redis 服务器

> ID：14017215
> 
> 赞同：5
> 
> 时间：2012-12-24T04:51:52.603
> 
> 标签：redis, autotest

我正在寻找一种最简单的方法来模仿慢速 Redis 服务器（从我现在正在调试的客户端的角度来看）。

理想情况下，这将是一个`DEBUG SLEEP <seconds>`命令，但 AFAIK 没有这样的事情。

比如说，我可以使用`BLPOP`阻塞读取——但这需要一个单独的线程来解除阻塞……有没有更简单的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T10:14:41.197

实际上，有一个 debug sleep 命令可以完全满足您的要求。它在 debug.c 文件中定义为：

```
} else if (!strcasecmp(c->argv[1]->ptr,"sleep") && c->argc == 3) {
    double dtime = strtod(c->argv[2]->ptr,NULL);
    long long utime = dtime*1000000;

    usleep(utime);
    addReply(c,shared.ok);
} else { 
```

请注意，它会阻塞整个 Redis 事件循环（所有连接），而 BLPOP 只会阻塞一个连接。

```
> ./redis-cli debug sleep 2
 ... 2 seconds wait ...
OK 
```

使用 BLPOP，您不需要第二个线程，因为您可以指定超时：

```
> ./redis-cli blpop dummy_key_which_does_not_exist 2
 ... 2 seconds wait ...
(nil) 
```

另一种使 Redis 无响应的方法是发送 STOP 和 CONT 信号。获得实例的 pid 后，只需启动：

```
kill -STOP $pid
sleep 1
kill -CONT $pid 
```

使用这个信号技巧，redis 实例的所有线程都将被冻结（即不仅是事件循环）。这包括 I/O 后台线程。

# .net - 预发布 Collections.Immutable

> ID：14017219
> 
> 赞同：12
> 
> 时间：2012-12-24T04:52:21.637
> 
> 标签：.net, f#, immutability

`System.Collections.Immutable`有没有人成功地在 F# 中打开 NuGet的预发布版本？

我收到此错误：

> 此处需要类型 'IEnumerable`1'，但不可用。您必须添加对程序集“System.Runtime, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a”的引用。

即使我的项目是 .NET 4.5

尝试显式打开 System.Runtime ，但这也不起作用。我在参考`.NETCore\v4.5\System.Runtime.dll`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-24T16:12:26.730

这是 Microsoft 相关团队正在调查的已知问题。同时，以下是解决方法步骤：

1.  创建一个面向 .NET Framework 4.5 的 F# 应用程序项目
2.  `Install-Package Microsoft.Bcl.Immutable -pre`
3.  添加对“%ProgramFiles%\Reference Assemblies\Microsoft\Framework.NETFramework\v4.5\Facades\System.Runtime.dll”的引用
4.  从框架中添加对 System.ComponenModel.Composition.dll 程序集的引用。

之后，早期测试表明 F# 可以很好地处理不可变集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-08T12:17:43.090

您可以从 NuGet 安装“System.Collections.Immutable”组件来解决您的问题。

查看 URL [https://www.nuget.org/packages/Microsoft.Bcl.Immutable/](https://www.nuget.org/packages/Microsoft.Bcl.Immutable/)

# matlab - matlab如何让多个脚本共享一个大矩阵？

> ID：14017220
> 
> 赞同：3
> 
> 时间：2012-12-24T04:52:49.410
> 
> 标签：matlab, parallel-processing

> **可能重复：**
> [在进程之间共享内存 [matlab]](https://stackoverflow.com/questions/872209/sharing-memory-between-processes-matlab)

我目前正在处理一个涉及a `huge dense matrix`（大约3e4 * 3e4，mat文件大约2.3G）的问题。我有几个不同的脚本，它们对应于不同的实验设置，但是所有这些脚本都使用了这个矩阵。由于这些实验非常耗时，我想并行运行它们，但我只有有限的内存量，所以我无法多次将这个矩阵加载到内存中。

**问题：**有没有办法并行运行这些脚本，但也让它们共享相同的矩阵（即只将矩阵加载到内存中一次）？

谢谢！

# wpf - 在运行时生成 WPF 图像时出现问题，儿童不会拉伸

> ID：14017223
> 
> 赞同：2
> 
> 时间：2012-12-24T04:53:30.410
> 
> 标签：wpf

我正在尝试在 Web 应用程序的运行时生成一些 WPF 元素的图像。我取得了一定程度的成功，但是如果我在 WPF 桌面应用程序中使用相同的代码，尽管运行正常，但存在一个问题，即子元素不会伸展以填充其父元素。这是代码：

```
Canvas imageCanvas = new Canvas { Width = 1651, Height = 2551, Background = Brushes.White };

Canvas Test = new Canvas();

System.Windows.Shapes.Path Path = new System.Windows.Shapes.Path();
Path.Data = Geometry.Parse("M 0,0 H 287 V 287 H 0 Z");
Path.Stretch = Stretch.Fill;
Path.Stroke = Brushes.Black;
Path.StrokeThickness = 1;

Test.Width = 500;
Test.Height = 500;
Test.Children.Add(Path);

imageCanvas.Children.Add(Test);

Canvas.SetTop(Test, 10);
Canvas.SetLeft(Test, 10);

// Update layout
Size size = new Size(imageCanvas.Width, imageCanvas.Height);
imageCanvas.Measure(size);
imageCanvas.Arrange(new Rect(size));

RenderTargetBitmap bitmapRenderer = new RenderTargetBitmap((int)size.Width, (int)size.Height, 96, 96, PixelFormats.Pbgra32);
bitmapRenderer.Render(imageCanvas); 
```

我期望看到的是填充它的父画布的正方形，但这不会发生。实际上，父级的大小似乎完全被忽略了，路径始终相同。我能做些什么来强制调整大小吗？我认为最上面的画布上的 measure 和安排调用可以做到这一点，但显然不是。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:35:25.580

这是画布的一个限制，我知道克服这个问题的唯一方法是将你的画布放在“ViewBox”或它的变体中，查看此链接 [http://msdn.microsoft.com/en-us/library /system.windows.controls.viewbox.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.viewbox.aspx)

# jquery - 退格键需要禁用

> ID：14017224
> 
> 赞同：-1
> 
> 时间：2012-12-24T04:53:43.000
> 
> 标签：jquery, html

> **可能重复：**
> [如何使用 jQuery 禁用除文本框以外的退格键](https://stackoverflow.com/questions/14012024/how-to-disable-backspace-except-textbox-using-jquery)

我想禁用 BACKSPACE 按钮，除非它在 ​​TEXT 字段中。

我正在使用以下代码，但它阻止退格功能包括文本字段.. BACKSPACE 应该仅适用于 TEXT 字段..

请帮忙解决这个...

```
$(document).on("keydown", processKeyEvents);
$(document).on("keypress", processKeyEvents);

function processKeyEvents(event) {
    // Backspace
    if (event.keyCode == 9) {
        // myTextBox is id of the valid textbox
        if ($("*:focus") != $("#myTextBox")) {
            event.preventDefault();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T04:56:25.117

你不能像这样比较 jQuery 对象，你只需要一个键事件，退格键*不是*键 9。

```
$(document).on('keydown', function(e) {
    if(e.keyCode === 8 && !$('#myTextBox').is(':focus')) {
        e.preventDefault();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T05:07:42.357

如何使用`event.target`获取元素

```
function processKeyEvents(event) {
    // Backspace
    if (event.keyCode == 8) {
        // myTextBox is id of the valid textbox
        if (!$(event.target).is("#myTextBox")) {
            event.preventDefault();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T05:15:33.480

```
$(document).keydown(function(e) {
    var elid = $(document.activeElement).hasClass('textInput');
    if (e.keyCode === 8 && !elid) {
        return false;
    };
}); 
```

# android - 如何在应用程序多个活动、片段和游标加载器中关闭数据库资源

> ID：14017226
> 
> 赞同：0
> 
> 时间：2012-12-24T04:54:01.393
> 
> 标签：android, android-sqlite

**DBHelper.java**

```
public class DBHelper extends SQLiteOpenHelper{

    public DBHelper(Context context) {
        super(context, DBConstants.DATABASE_NAME, null,DBConstants.DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(DBConstants.CREATE_LOGINTABLE);
        db.execSQL(DBConstants.CREATE_DATA_TABLE);
        db.execSQL(DBConstants.CREATE_LATEST_DATA_TABLE);
        db.execSQL(DBConstants.CREATE_ALERTS_TABLE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL(DBConstants.DELETE_LOGINTABLE);
        db.execSQL(DBConstants.DELETE_DATA_TABLE);
        db.execSQL(DBConstants.DELETE_LATEST__DATA_TABLE);
        db.execSQL(DBConstants.DELETE_ALERTS_TABLE);
        onCreate(db);
    }

    @Override
    public synchronized void close() {
        super.close();
    }
} 
```

**Class1（我的应用程序中的一个活动或片段）：**

```
DBHelper myDbHelper=new DBHelper(context);
SQLiteDatabase myDB = myDbHelper.getWritableDatabase();

Cursor c1= myDB.query(DBConstants.LATEST_DATA_TABLE,mycolumns, null, null, null, null, null);
  /* is it correct */
c1.close();
myDB.close();
myDbHelper.close();
/* is it correct */ 
```

**Class2（我的应用程序中的一个活动或片段）：**

```
DBHelper myDbHelper=new DBHelper(context);
SQLiteDatabase myDB = myDbHelper.getWritableDatabase();

Cursor c1= myDB.query(DBConstants.LATEST_DATA_TABLE,mycolumns, null, null, null, null, null);

/* is it correct */
c1.close();
myDB.close();
myDbHelper.close();
/* is it correct */ 
```

在这里，我是要关闭所有 c1、myDB、myDbHelper 对象还是关闭 c1 和 myDbHelper 就足够了？哪个是最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T09:50:11.640

*   `myDbHelper.close()`在内部关闭数据库。所以不需要打电话`myDb.close`。
*   当然，`c1.close()`这是您想要习惯的最佳实践。

代码：

```
try {
    //your database queries.
} catch (...) {

} finally {
    if (cursor != null && !cursor.isClosed()) {
        c1.close();
    }
    myDbHelper.close();
} 
```

finally 块将确保无论发生什么都释放这些资源。

# wpf - 图像显示在上下文菜单中使用转换器类和 WPF 样式

> ID：14017236
> 
> 赞同：-3
> 
> 时间：2012-12-24T04:55:33.960
> 
> 标签：wpf, c#-4.0

我在我们正在设置的上下文菜单中使用样式，`Property="MenuItem.Icon"`我们正在使用绑定作为它的值，在绑定中我使用转换器类来设置图像源，但我面临这个问题。
请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:11:13.870

我不确定你所说的conventer是什么意思，但也许这个简单的例子可以帮助你：

```
<Window.Resources>
    <Image x:Key="Icon" Source="Icon.ico"/>
    <Style x:Key="MenuItem">
        <Setter Property="MenuItem.Icon" Value="{DynamicResource Icon}"/>
    </Style>
</Window.Resources> 
```

# php - 从链接中选择选项更新数据库

> ID：14017246
> 
> 赞同：0
> 
> 时间：2012-12-24T04:58:03.417
> 
> 标签：php, database, select, hyperlink, option

如何从选择选项更新数据库。

如果选择测试，则从数据库行更新用户 ID。

```
<form action="action.php?id=<?php echo $dnn['id'] ?>" method="post">
<select name="op">
<option value="test">test</option>
<option value="test2">test2</option>
</select>
<input name="submit" type="submit" value="submit" />
</form>
<?php
if (isset($_POST['submit']))
{
if ($_POST['op'] == "test") 
{ 
$sql = "UPDATE * from users SET increment = increment + 1 WHERE id = '".$id."'";
mysql_query($sql); 
}
else 
{ 
echo "test2 is selected can't update the db"; 
}
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:04:05.760

[**从这里**](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-data-manipulation.html)学习 MySQL 基础知识。

和变化：

```
$sql = "UPDATE * from users SET increment = increment + 1 WHERE id = '".$id."'"; 
```

至

```
$sql = "UPDATE users SET increment = increment + 1 WHERE id = '".$id."'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T05:11:48.827

我认为您正在谈论检索`id`您通过 get 方法从操作属性发送的主键。将您的查询更新为

```
$sql = "UPDATE users SET increment = increment + 1 WHERE id = '".$_REQUEST['id']."'"; 
```

# regex - 简单的正则表达式令人困惑

> ID：14017247
> 
> 赞同：0
> 
> 时间：2012-12-24T04:58:14.580
> 
> 标签：regex, r

我似乎无法从以下短语中获取电子邮件地址：

> “mailto:fwwrp-3492801490@yahoo.com？”

到目前为止我已经尝试过

```
regexpr(":([^\\?*]?)", phrase) 
```

代码逻辑如下：

1.  以分号字符开头：
2.  获取不是问号的每个字符
3.  返回括号内的那些字符。

我不确定我的正则表达式哪里出错了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T05:22:05.963

让我们看看你的正则表达式，我们会看看你哪里出错了。我们将把它拆开以便更容易讨论：

```
:            Just a literal colon, no worries here.
(            Open a capture group.
    [        Open a character class, this will match one character.
        ^    The leading ^ means "negate this class"
        \\   This ends up as a single \ when the regex engine sees it and that will
             escape the next character.
        ?    This has no special meaning inside a character class, sometimes a
             question mark is just a question mark and this is one of those
             times. Escaping a simple character doesn't do anything interesting.
        *    Again, we're in a character class so * has no special meaning.
    ]        Close the character class.
    ?        Zero or one of the preceding pattern.
)            Close the capture group. 
```

去除噪音给了我们`:([^?*]?)`。

所以你的正则表达式实际上匹配：

> 冒号后跟零个或一个不是问号或星号的字符以及非问号或非星号将位于第一个捕获组中。

这和你想要做的完全不同。一些调整应该可以解决您的问题：

```
:([^?]*) 
```

那匹配：

> 后跟任意数量的非问号和非问号的冒号将位于第一个捕获组中。

`*`字符类外部是特殊的，字符类外部表示“零或多个”，字符类内部只是一个`*`.

我会把它留给其他人来帮助你处理 R 方面的事情，我只是想让你了解正则表达式发生了什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T05:03:22.477

这是一个非常简单的方法`gsub`：

```
gsub("([a-z]+:)(.*)([?]$)", "\\2", "mailto:fwwrp-3492801490@yahoo.com?")
## Or, if you expect things other than characters before the colon
gsub("(.*:)(.*)([?]$)", "\\2", "mailto:fwwrp-3492801490@yahoo.com?")
## Or, discarding the first and third groups since they aren't very useful
gsub(".*:(.*)[?]$", "\\1", "mailto:fwwrp-3492801490@yahoo.com?") 
```

从@TylerRinker 开始的地方开始，您还可以使用`strsplit`如下方式（以避免不得不`gsub`问号）：

```
strsplit("mailto:fwwrp-3492801490@yahoo.com?", ":|\\?", fixed=FALSE)[[1]][2] 
```

如果你有一个这样的字符串列表呢？

```
phrase <- c("mailto:fwwrp-3492801490@yahoo.com?", 
            "mailto:somefunk.y-address@Sqmpalm.net?")
phrase
# [1] "mailto:fwwrp-3492801490@yahoo.com?"  
# [2] "mailto:somefunk.y-address@Sqmpalm.net?"

## Using gsub
gsub("(.*:)(.*)([?]$)", "\\2", phrase)
# [1] "fwwrp-3492801490@yahoo.com"     "somefunk.y-address@Sqmpalm.net"

## Using strsplit
sapply(phrase, 
       function(x) strsplit(x, ":|\\?", fixed=FALSE)[[1]][2], 
       USE.NAMES=FALSE)
# [1] "fwwrp-3492801490@yahoo.com"     "somefunk.y-address@Sqmpalm.net" 
```

我更喜欢这种方法的简洁性`gsub`。

# android - 在xml中设置样式

> ID：14017250
> 
> 赞同：2
> 
> 时间：2012-12-24T04:58:28.347
> 
> 标签：android, xml, colors, background

我正在尝试在 styles.xml 中设置背景和文本颜色并将其应用于我的整个应用程序，但它根本不适用于每个活动。

**样式.xml**

```
<resources>

<style name="AppTheme" parent="android:Theme.Light" >
    <item name="android:textColor">#00FF00</item>
    <!--<item name="android:windowNoTitle"> true</item>-->
   <item name="android:windowFullscreen">true</item>
   <item name="android:windowBackground">@color/black</item>
</style>    

</resources> 
```

我的**Strings.xml**包括这一行：

```
<color name="black">#000000</color> 
```

最后，我的**AndroidManifest.xml**包括：

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="Hack the World"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:configChanges="keyboardHidden|orientation|screenSize"
        android:screenOrientation="landscape" >
    </activity> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T05:30:17.223

试试这个。它适用于我的情况......

```
<style name="AppTheme" parent="android:Theme.Light">
    <item name="android:textColor">#00FFFF</item>
    <item name="android:windowFullscreen">true</item>
    <item name="android:background">#FF00FF</item>

</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T06:20:59.993

要为整个应用程序在 styles.xml 中设置背景颜色和文本颜色，请确保您**没有**在布局文件中填充整个布局的根元素之一上设置 android:background 属性。

```
android:background="#0000FF" 
```

对于您的颜色，在 value 文件夹中创建一个 color.xml 文件。

```
<resources>

  <color name="text_color_green">#00FF00</color>
  <color name="background_color_red">#4BFF0000</color>

</resources> 
```

要设置其他文本颜色然后是主要文本颜色，您必须为 style.xml 文件中的每个小部件创建一些自定义样式。

```
-->
<style name="AppBaseTheme" parent="android:Theme.Light">
    <!--
        Theme customizations available in newer API levels can go in
        res/values-vXX/styles.xml, while customizations related to
        backward-compatibility can go here.
    -->
</style>

<!-- Application theme. -->
<style name="AppTheme" parent="AppBaseTheme">

    <!-- All customizations that are NOT specific to a particular API-level can go here. -->
    <item name="android:windowBackground">@color/background_color_red</item>
    <item name="android:textColor">@color/text_color_green</item>
    <item name="android:windowFullscreen">true</item>

    <!-- Custom style on widgets -->
    <item name="android:editTextStyle">@style/AppTheme_EditTextStyle</item>
    <item name="android:buttonStyle">@style/AppTheme_ButtonStyle</item>

</style>

<!-- Custom Style EditText Widget -->
<style name="AppTheme_EditTextStyle" parent="@android:style/Widget.EditText">
    <item name="android:textColorHint">@color/text_color_green</item>
    <item name="android:textColor">@color/text_color_green</item>
</style>

<!-- Custom Style Button Widget -->
<style name="AppTheme_ButtonStyle" parent="@android:style/Widget.Button">
    <item name="android:textColor">@color/text_color_green</item>
</style> 
```

为应用程序设置自定义主题

```
 <application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <!-- App Activities here-->

</application> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T05:30:48.037

您是否在项目的 /res/values 文件夹中保存了 styles.xml？由于您的样式的父级是预定义的 android 主题，它应该是可访问的！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T06:07:09.500

确保您也更改了值 v11 或 v14 的样式。v11 是 api 版本 11 的值，v14 是 api 版本 14 的值。因此，请确保您在哪个构建目标上编译您的项目。

# css - 为什么会发生特异性较低的 css

> ID：14017252
> 
> 赞同：0
> 
> 时间：2012-12-24T04:58:49.347
> 
> 标签：css

```
<html>
<head>
<style>
#wo{
    color: red;
}

p{
    color: yellow;
}
</style>
</head>
<body>

<div id="wo">
<p>Hi</p>

</div>
</body>
</html> 
```

这是我的代码。我声明了 id wo 的属性，它在 css(0,1,0,0) 中比 p(0,0,0,1) 具有更高的特异性，那么为什么我的段落显示黄色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T05:02:20.440

因为`Hi`is inside`p`元素，而不是 inside `div#wo`。元素只是通过继承`p`间接地受到规则的影响，但规则直接针对元素，因此它会覆盖继承的属性。`#wo``p``p`

仅当两个规则匹配相同的元素时，特异性才适用，这不是您的情况。

# go - 为什么我必须同时导入“图像/颜色”和“图像”？

> ID：14017253
> 
> 赞同：2
> 
> 时间：2012-12-24T04:58:53.283
> 
> 标签：go

我刚刚学习 Go 并编写了以下 struct( `Image`) 来实现`image.Image`接口。

```
package main

import (
    "image"
    "image/color"
    "code.google.com/p/go-tour/pic"
)

type Image struct{}

func (img Image) ColorModel() color.Model {
    return color.RGBAModel
}

func (img Image) Bounds() image.Rectangle {
    return image.Rect(0, 0, 100, 100)
}

func (img Image) At(x, y int) color.Color {
    return color.RGBA{100, 100, 255, 255}   
}

func main() {
    m := Image{}
    pic.ShowImage(m)
} 
```

如果我只是 import`image/color`而不是 import `image`，`image.Rect`则未定义。为什么？不应该`image/color`已经涵盖的方法和属性`image`？

此外，如果我将函数接收器从 更改`(img Image)`为`(img *Image)`，则会出现错误：

```
Image does not implement image.Image (At method requires pointer receiver) 
```

这是为什么？不`(img *Image)`表示指针接收器？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-24T05:26:20.997

如果您查看[包](http://golang.org/src/pkg/image/)及其子包的[源代码，您会发现它`image`](http://golang.org/src/pkg/image/)[`image/color`根本不依赖`image`](http://golang.org/src/pkg/image/color/color.go)，因此它永远不会导入它。

[`image`然而确实进口`image/color`](http://golang.org/src/pkg/image/image.go)

对于问题的第二部分，您将所有接收器更改为指针，这意味着您还应该将 Image 指针传递给`ShowImage`：

```
func main() {
    m := Image{}
    pic.ShowImage(&m)
} 
```

在指针接收器上定义的方法必须在指针上访问。但是仅在结构上定义的方法可以从指针或值访问。

这是一些解释方法的指针或值接收器之间的区别的文档：

1.  [我应该在值或指针上定义方法吗？](http://golang.org/doc/go_faq.html#methods_on_values_or_pointers)
2.  [为什么 T 和 *T 有不同的方法集？](http://golang.org/doc/go_faq.html#different_method_sets)

# flash - Chrome 上的 flash 和 Firefox 一样吗？

> ID：14017261
> 
> 赞同：1
> 
> 时间：2012-12-24T05:00:24.387
> 
> 标签：flash, google-chrome, firefox, crash

我让 Chrome 运行一个 Flash 游戏，而 Firefox 运行另一个 Flash 应用程序。当 Firefox 上的 Flash 崩溃时，它会影响当前在 Chrome 上运行的 Flash 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:02:46.277

不; 不同的 Flash 实例在不同的进程中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T05:15:06.240

最新版本的 Chrome 默认使用 PepperFlash，它在 Chrome 进程之间被沙盒化。我不认为一个人应该影响另一个人。

[http://blog.chromium.org/2012/08/the-road-to-safer-more-stable-and.html](http://blog.chromium.org/2012/08/the-road-to-safer-more-stable-and.html)

[http://en.wikipedia.org/wiki/Google_Native_Client](http://en.wikipedia.org/wiki/Google_Native_Client)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T11:36:04.453

正如其他答案所说，默认情况下，它不是一回事，但 Chrome 通常能够使用 Firefox 使用的相同插件。可以将 Firefox 插件目录符号链接到 Chrom 的插件目录，并使用完全相同的二进制文件来完成这两件事。

我遇到了一些情况，第二个更适合使用两种浏览器的人，并且对 Pepper 插件的某些特性感到沮丧，但这是规则的一个例外。

# magento - 如何在观察者 magento 中访问 Varien 对象值

> ID：14017269
> 
> 赞同：2
> 
> 时间：2012-12-24T05:01:48.083
> 
> 标签：magento, magento-1.7

嗨，在我的自定义模块中，我使用 cms_page_save_after 事件通过 cms pages 保存更多数据。而在 oberver 中，我得到了无法处理的此类数据。

```
Varien_Event_Observer Object
(
    [_data:protected] => Array
        (
            [event] => Varien_Event Object
                (
                    [_observers:protected] => Varien_Event_Observer_Collection Object
                        (
                            [_observers:protected] => Array
                                (
                                )

                        )

                    [_data:protected] => Array
                        (
                            [data_object] => Mage_Cms_Model_Page Object
                                (
                                    [_cacheTag:protected] => cms_page
                                    [_eventPrefix:protected] => cms_page
                                    [_eventObject:protected] => object
                                    [_resourceName:protected] => cms/page
                                    [_resource:protected] => 
                                    [_resourceCollectionName:protected] => cms/page_collection
                                    [_dataSaveAllowed:protected] => 1
                                    [_isObjectNew:protected] => 
                                    [_data:protected] => Array
                                        (
                                            [form_key] => 1TVTYLITcZn3dUZm
                                            [page_id] => 3
                                            [title] => About Us
                                            [identifier] => about-magento-demo-store
                                            [stores] => Array
                                                (
                                                    [0] => 1
                                                )

                                            [is_active] => 1
                                            [content_heading] => 
                                            [content] => 
```

我尝试了 $observer->getData('page_id') 代码，但没有显示任何内容。有谁知道如何使用这个对象。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T05:39:58.503

```
$observer->getEvent()->getDataObject()->getPageId() 
```

# objective-c - iPhone/iPad 圆形自定义按钮和 png 文件

> ID：14017273
> 
> 赞同：1
> 
> 时间：2012-12-24T05:02:30.517
> 
> 标签：objective-c, ios, ipad, uibutton

我正在 Snow Leopard 上使用 XCode 4.2 开发一个通用应用程序，并希望显示嵌入了 png 文件的圆形按钮。圆形按钮来自 cocoacontrols.com 的 UIGlossyButton 类。png 文件是视网膜和非视网膜变体。我在 iPhone 上将 UIButtons 的高度和宽度设置为 60、60，在 iPad 上设置为 120、120。我附上了 iPad 模拟器（非视网膜版本）的屏幕截图。我有点担心图标的大小。它看起来那么小。我希望该应用程序可以在 iPad 2 和 Mini 上运行，因为它们都是非视网膜显示器。这是在真正的 iPad2 设备上显示的正确方法吗？另外，圆形按钮在 iPad 上看起来完美吗？我还没有为开发者许可证付费，而且我没有 iPad。

以下是绘制圆角 UIGlossy 按钮的代码（引用圆角按钮类）：

```
UIGlossyButton *b;
    b = (UIGlossyButton*) [self.view viewWithTag: 78];
    b.tintColor = [UIColor colorWithRed:0.2 green:0.3 blue:0.7 alpha:1.0];
    [b useWhiteLabel: YES];
    b.buttonBorderWidth = 2.0f;
    b.buttonCornerRadius = 200.0f; //iPad. For iPhone, I'm using 40.0f
    [b setGradientType: kUIGlossyButtonGradientTypeLinearSmoothExtreme];
    [b setExtraShadingType:kUIGlossyButtonExtraShadingTypeRounded];
} 
```

截图如下所示，

![http://www.use.com/2dcafe08c92ec00c41fe](../Images/a2972e317f5ff3aab2caf1bb243ab19f.png)

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T06:08:11.307

您是否担心按钮太小，或者按钮顶部的灰度图像太小？如果您担心按钮的大小，那么更改按钮的框架会使它们变大。

但是，如果您担心按钮图像，请注意“视网膜显示屏”不会改变肉眼感知的图像大小，它只会在有适当`@2x`图像可用的情况下提高图像的分辨率。因此，图标图像的“大小”在视网膜和非视网膜显示器上都是相同的。也就是说，如果你在 iPad 1 和 iPad 3 上打开同一个 App，一切都会是相同的大小，但 iPad 3 屏幕上的图像会因为分辨率的提高而显得更流畅。

（这是因为当您设置 a 的大小时，`UIButton`您将其设置为`points`，而不是`pixels`.`Points`被设计为与分辨率无关 - 请参阅[此处的点与像素部分](http://developer.apple.com/library/ios/#documentation/2DDrawing/Conceptual/DrawingPrintingiOS/GraphicsDrawingOverview/GraphicsDrawingOverview.html)。）

当然，有了 iPad Mini，无论如何，一切都会显得更小一些——但仍然是成比例的。

因此，如果按钮上的图标看起来太小，则需要使用较大的叠加图像。如果你这样做，图标会在所有显示器上看起来更大，视网膜和非视网膜都一样。

至于看起来“完美”的圆形按钮，我看不出按钮上的光泽有什么问题，就像你在上面展示的那样，但我会说它们上的图标太小了（而且很难看到灰色-蓝色的）。因此，我会使用更大的图标图像。- 但这是我个人的看法。

* * *

**回复评论：**

@2x 图像仅用于视网膜屏幕（iPad 3+、iPhone 4+）。你永远不应该直接加载@2x 图像，设备会处理这个问题。如果图标只在 iPad 上显得很小，请尝试制作图像的副本（普通和@2x），然后在 Photoshop/Preview/etc 中手动放大它们（比如 1.5x）。然后，修改您的代码，以便 iPhone 正常加载图像，但 iPad 加载这些稍大的图像。因此，您的 App 捆绑包可能包括：

*   `buttonImage_Tag_iPhone.png`--- 说 64x64
*   `buttonImage_Tag_iPhone@2x.png`--- 因此，128x128
*   `larger_button_image_tag_iPad.png`--- 说 96x96
*   `larger_button_image_tag_iPad@2x.png`--- 因此，192x192

然后您可以使用以下代码加载相应的图像：

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    // Use larger_button_image_tag_iPad.png
}
else {
    // Use buttonImage_Tag_iPhone.png
} 
```

当然，您可以为图像命名任何您喜欢的名称，我只是在示例中使它们有所不同。

# javascript - 在循环范围变量中使用闭包

> ID：14017276
> 
> 赞同：-2
> 
> 时间：2012-12-24T05:03:08.893
> 
> 标签：javascript, closures

> **可能重复：**
> [for循环和词法环境中的闭包](https://stackoverflow.com/questions/4418326/closures-in-a-for-loop-and-lexical-environment)

我正在学习 JavaScript 中的闭包...我看到了简单代码的示例：

```
for (var i = 0; i < 10; i++) {
  document.getElementById('box' + i).onclick = function() {
    alert('You clicked on box #' + i);
  };
} 
```

但究竟发生了什么，无论`div`您选择什么，您都会收到关于最后一次迭代的警报`i`。

我看到了使用内部函数解决该问题的方法，但为什么会发生这种情况？它不是`onclick`在每次迭代时都绑定事件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:05:52.413

每次迭代都会创建一个新函数，但每个函数都引用**相同的**变量`i`（内存中的一个位置）。的值`i`仅在执行处理程序时评估。那一刻是在`for`循环完成之后很长时间，并且在那个时候，`i`有 value `10`。

[维基百科关于闭包的文章](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)值得一读，并提到了闭包的两种工作方式：绑定变量的当前值或对变量本身的引用。后者是 JavaScript 的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T05:05:02.983

好旧的同变量问题。`i`您可以通过将其传递给作为参数的自调用函数来轻松绕过它：

```
for(var i = 0; i < 10; i++) {
    (function(i) {
        document.getElementById('box' + i).onclick = function() {
            alert('You clicked on box #' + i);
        };
    })(i);
} 
```

这是必要且有效的原因`i`是通常总是相同的 - JavaScript 只有一个函数范围。通过使用以参数为参数的自调用函数，`i`您每次都创建一个新函数，`i`然后将其保存在回调函数的闭包中。

# jquery - 令人困惑的鼠标移出行为

> ID：14017281
> 
> 赞同：2
> 
> 时间：2012-12-24T05:03:22.137
> 
> 标签：jquery, mouseout

鉴于以下无序列表，我希望该列表在 mouseout 事件时消失。

注意当这一行 *$(this).css('display','none')* ; 被注释掉的行为就像我期望的那样，当鼠标移入和移出列表时背景会改变颜色。

但是，当我取消注释该行时，我希望 UL 在**mouseout**事件中消失。相反，只要将鼠标移入列表，它就会**消失**。

我已经在这呆了六个小时。我错过了什么？

谢谢，

苹果电脑

```
 <style type="text/css">

    * {
        color: navy;
        font-family: arial;
        font-size: 18px;
    }

    ul, li {
        padding: 0;
        margin: 0;
        list-style: none;
    }

    ul#member {
        position: absolute;
        left: 10px;
        top: 0px;
        //clear: left;
        border: 1px solid red;
        padding: 4px;
        margin-left: 10px;
        margin-top: 10px;
        display: block;
        line-height:1.5;
    }
    </style>

    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script>
    $(document).ready(function() {
    //alert ('jQuery Is Alive and Well');

     $('ul#member').mouseover (function() {
          $(this).css('background-color','silver');
        });

     $('ul#member').mouseout (function(){
            $(this).css('background-color','gray');
           // $(this).css ('display','none');

        });
    }); //end of document ready
    </script>
    </head>
<body>
    <ul id='member'>
       <li>Change Villages ID#</li>
       <li>Change Address</li>
       <li>Changes Phone Numbers</li>
       <li>Change Name</li>
    </ul> 
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T05:08:02.640

您想`li`为 css 修改选择单个标签，如下所示：

```
$('ul#member li')

<ul id='member'>
    <li>Change Villages ID#</li>
    <li>Change Address</li>
    <li>Changes Phone Numbers</li>
    <li>Change Name</li>
</ul>​ 
```

[http://jsfiddle.net/bTh3A/6/](http://jsfiddle.net/bTh3A/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T05:12:12.700

这里的问题是你的`mouseover()\mouseout()`功能

```
`mouseover` fires when the pointer moves into the child element as well (li). 
```

利用`mouseenter() \ mouseleave()`

```
`mouseenter` fires only when the pointer moves into the bound element. 
```

**或者**

```
use `hover()` 
```

这是正确的链接，可以帮助您理解这一点

[http://www.bennadel.com/blog/1805-jQuery-Events-MouseOver-MouseOut-vs-MouseEnter-MouseLeave.htm](http://www.bennadel.com/blog/1805-jQuery-Events-MouseOver-MouseOut-vs-MouseEnter-MouseLeave.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T05:17:07.473

问题是当你没有可以触发`hide`的区域时。因此，您需要按住该区域以获得鼠标悬停。我在一个 div 中添加了 ul，该 div 具有一些宽度和高度，当 ul 隐藏并与此父 div 绑定事件时，这些宽度和高度会保留下来。`ul``mouseover`

**[现场演示](http://jsfiddle.net/UJ6vK/1/)**

*html*

```
<div id="divId" style="widht:200px; height:200px;">
  <ul id='member'>
   <li>Change Villages ID#</li>
   <li>Change Address</li>
   <li>Changes Phone Numbers</li>
   <li>Change Name</</li>
  </ul>
</div>​ 
```

*Javascript*

```
$('#divId').mouseover (function() {
   // $('ul#member').css('background-color', 'silver');
    $('ul#member').show();
})

$('#divId').mouseout(function() {
   // $('ul#member').css('background-color', 'gray');
    $('ul#member').hide();

})​ 
```

# http - Apache2 HTTP conf RewriteRule www.domain.com/page1 到 /domain/com/www/page1?

> ID：14017283
> 
> 赞同：1
> 
> 时间：2012-12-24T05:04:14.677
> 
> 标签：http, mod-rewrite, apache2

如果这是一个相当简单的问题，我很抱歉，我正在设置一个测试 Web 服务器，我正在尝试将它从多个 VirtualHost 语句转换为一个动态的语句，并且可以自动增长而无需创建新的 VirtualHost 条目每次设计新网站时。

结构是`/domain/suffix/prefix/folder1`

例如

`www.hello.com/world1` 会去

`/var/www/hello/com/www/world1`

`blog.world.net/world2`会去

`/var/www/world/net/blog/world2`

有任何想法吗？那很好啊。干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T06:46:09.607

为什么不能有一个 Common Front Controller 文件（最好是 index.php）。这个前端控制器文件可以解析和路由请求参数以到达适当的模块/子文件夹。

Apache mod-rewrite 逻辑将帮助我们：

```
<VirtualHost my.domain.com:80>
    ServerName   my.domain.com
    DocumentRoot /var/www/     
    RewriteEngine off     
    <Location />
        RewriteEngine On
        RewriteCond %{REQUEST_FILENAME} -s [OR]
        RewriteCond %{REQUEST_FILENAME} -l [OR]
        RewriteCond %{REQUEST_FILENAME} -d
        RewriteRule ^.*$ - [NC,L]
        RewriteRule ^.*$ /index.php [NC,L]
    </Location>
</VirtualHost> 
```

# iphone - 如何向一个 UIView 添加多个 UIImageView；从图像列表中

> ID：14017284
> 
> 赞同：2
> 
> 时间：2012-12-24T05:04:54.977
> 
> 标签：iphone, objective-c, ios, uiview, uiimageview

我想`UIImageView`在一个`UIView`.

我正在构建一个视图，然后成功保存到库中。我从相机或库中添加一张图片作为背景，然后在其上添加多张图片；从一个`TableListController`。在我为每个可用的图像`viewDidLoad`写下每一个；`UIImageView`并且视图仅出现在用户从中挑选的图像上`TableListController`。

这是一个有限的解决方案。当用户选择相同的图像时；图像被覆盖。我希望能够在视图上复制图像。

我想为`UIImageView`用户选择的每个图像写一个并让他们留在视图上。

如何添加多个`UIImageViews`；`UIView`从图像中挑选`TableListController`？

这就是我现在所拥有的。我需要一个更动态的解决方案。

```
CGRect myFrame = CGRectMake(0,-20,320,480);
self.createView = [[UIView alloc] initWithFrame:myFrame];
self.createView.backgroundColor = [UIColor yellowColor];
[self.view addSubview:self.createView];

self.bgImgView = [[UIImageView alloc] initWithImage:image];
self.bgImgView.frame = CGRectMake(0,0,320,480);
[self.createView addSubview:self.bgImgView];

NSData *imageDataz = [[NSUserDefaults standardUserDefaults] objectForKey:@"catzero-item-0"];
UIImage *myPickZero = [UIImage imageWithData:imageDataz];
UIImageView *test0 = [[UIImageView alloc] initWithImage:(UIImage *)myPickZero];
test0.frame = CGRectMake(0,0,320,480);
[self.createView addSubview:test0];

NSData *imageDatao = [[NSUserDefaults standardUserDefaults] objectForKey:@"catzero-item-1"];
UIImage *myPickOne = [UIImage imageWithData:imageDatao];
UIImageView *test1 = [[UIImageView alloc] initWithImage:(UIImage *)myPickOne];
test1.frame = CGRectMake(0,0,320,480);
[self.createView addSubview:test1]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T06:14:40.463

如果你想做一些更动态的事情，你可以这样做：

```
CGRect frame = self.view.bounds; // probably better to get the parent's bounds, rather than hardcoding frame dimensions

CGRect myFrame = frame;
myFrame.origin.y -= 20; // I'm not sure why you're offsetting this by 20, but you really do, grab the superview's bounds and offset it
self.createView = [[UIView alloc] initWithFrame:myFrame];
self.createView.backgroundColor = [UIColor yellowColor];
[self.view addSubview:self.createView];

self.bgImgView = [[UIImageView alloc] initWithImage:image];
self.bgImgView.frame = frame;
[self.createView addSubview:self.bgImgView];

self.imageViews = [[NSMutableArray alloc] init];
NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
NSInteger i = 0;
NSData *data;

while ((data = [userDefaults objectForKey:[NSString stringWithFormat:@"catzero-item-%d", i++]]) != nil)
{
    UIImage *image = [UIImage imageWithData:data];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
    imageView.frame = frame;
    [self.createView addSubview:imageView];
    [self.imageViews addObject:imageView];
} 
```

这将读取前缀为的键的`@"catzero-item-"`图像并为它们创建图像视图。我还将单个`UIImageView`引用保存到`NSMutableArray`我创建的属性中，`imageViews`. 你是否这样做取决于你。

话虽如此，你的代码的某些部分我不太明白：例如，每个`UIImageView`都有相同的框架......我不知道你为什么要创建会被彼此遮挡的图像视图，但那是由你决定。

我也不倾向于将图像数组存储在 中`NSUserDefaults`，但这又取决于您。我可能倾向于使用`CoreData`or`SQLite`或 a`plist`来存储这组图像（或者，更准确地说，将文件名存储在那里，并将图像保存在`Documents`文件夹中）。但是使用`NSUserDefaults`要求我们遍历假设的键名，这是脆弱的（例如，如果您有 3 张图像然后去掉第二张图像怎么办……您是否要重命名所有键以避免键名中的间隙）。但是，如果您使用 a `plist`or 使用`CoreData`or `SQLite`，您可以遍历图像集合，而不必担心缺少键名。

无论如何，希望这能让您了解如何更动态地检索图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T06:29:18.080

这是答案；如何向一个 UIView 添加多个 UIImageView；从图像列表中。

以下代码目前在 iOS6 中运行：

创建视图控制器.h

```
#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>
#import "Item.h"
#import "PickTableViewController.h"
#import "CreateViewController.h"
@interface CreateViewController : UIViewController {
    CGPoint startLocation;
}

@property(nonatomic, strong)UIView *createView;
@property(nonatomic, strong)UIImageView *bgImgView;

@property(nonatomic, strong) Item *currentItem;
@property(nonatomic, strong)UIImage *myPick;
@property(nonatomic, strong)UIImage *myImage;

@property(nonatomic, strong)NSMutableArray *imageViews;
@property(nonatomic, strong)NSMutableArray *imageViewItems; 
```

创建视图控制器.m

```
// create a view on top of base view controller.
CGRect myFrame = CGRectMake(0,-20,320,480);
self.createView = [[UIView alloc] initWithFrame:myFrame];
[self.view addSubview:self.createView];
// This is an pic chosen by user from camera or library or default image.
self.bgImgView = [[UIImageView alloc] initWithImage:image];
[self.createView addSubview:self.bgImgView];

// currentItem is set in TableViewController and passed via prepareforsegue.
NSString *cat = currentItem.category;
NSString *file = currentItem.filename;

// add images to "imageViewItems" array.
imageViewItems = [[NSMutableArray alloc] init];
Item *img = [[Item alloc] init];
[img setCategory:cat];
[img setFilename:file];
[imageViewItems addObject:img];
img = [[Item alloc] init];
[img setFilename:@"catone-item-0.png"];
[imageViewItems addObject:img];
img = [[Item alloc] init];
[img setCategory:@"catone"];
[img setFilename:@"catone-item-1.png"];
[imageViewItems addObject:img];

// create array of uiimageviews from array of images.
CGRect frame = self.view.bounds;
CGRect _myFrame = frame;
for (int i = 0; i < [imageViewItems count]; i++) {
    // get array item.
    Item *arrayItem = [imageViewItems objectAtIndex:i];
    // get filename from array item.
    NSString *curpick = arrayItem.filename;
    // create UIImage from array item filename.
    image = [UIImage imageNamed:curpick];

    // create UIImageView with UIImage
    ItemUIImageView *imageView = [[ItemUIImageView alloc] initWithImage:image];
    imageView.frame = _myFrame;
    imageView.userInteractionEnabled = YES;
    // add subview to createView.
    [self.createView addSubview:imageView];
    // add UIImageView to array.
    [self.imageViews addObject:imageView];
} 
```

这是子类 UIImageView 文件，在 CreateViewController.h 和 .m 中引用，用于可拖动图像。

项目UIImageView.h

```
#import <UIKit/UIKit.h>

@interface ItemUIImageView : UIImageView {
    CGPoint startLocation;

}

@end 
```

项目UIImageView.m

```
#import "ItemUIImageView.h"

@implementation ItemUIImageView

- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) {
    // Initialization code

}
return self;
}

- (void) touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event {

CGPoint pt = [[touches anyObject] locationInView:self];
startLocation = pt;
}

-(void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

CGPoint pt = [[touches anyObject] locationInView:self];
CGFloat dx = pt.x - startLocation.x;
CGFloat dy = pt.y - startLocation.y;
CGPoint newCenter = CGPointMake(self.center.x + dx, self.center.y + dy);
self.center = newCenter;
} 

@end 
```

该文件是用于存储图像对象信息的自定义类。

项目.h

```
#import <Foundation/Foundation.h>

@interface Item : NSObject

@property (nonatomic, strong) NSString *filename;
@property (nonatomic, strong) NSString *category;

@end 
```

项目.m

```
#import "Item.h"

@implementation Item

@synthesize filename, category;

@end 
```

我不确定在 Rob 帮助之后我是否要回答我自己的问题。我没有在堆栈中找到完整的示例，所以这是我的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T06:13:13.097

看看这个[示例代码](https://developer.apple.com/library/ios/#samplecode/MyImagePicker/Introduction/Intro.html)。

来自[developer.apple.com](https://developer.apple.com)

这会对你有很大帮助。

# python - 代理服务器将请求解析给自己

> ID：14017286
> 
> 赞同：1
> 
> 时间：2012-12-24T05:05:11.323
> 
> 标签：python, linux, networking, proxy, tor

我正在尝试使用 Tor 上的 HTTP 代理服务器发出一些 HTTP 请求。到目前为止，我已经尝试过 Privoxy、Tinyproxy 和 Polipo。但是每当我通过这些代理服务器中的任何一个发出请求时，它们都会以某种方式获取自己，并陷入循环。

为了检查 DNS 或网络是否有任何问题，我尝试在没有代理的情况下获取 URL，它工作正常。我正在使用 Ubuntu 12.04 64 位服务器，并使用带有请求模块的 python 来测试设置。

此外，我在具有两个静态 IPv4 地址的服务器上遇到此问题，在具有一个静态 IPv4 地址的服务器上，它工作正常。我试图在 EC2 服务器上模拟这一点，它也适用于具有弹性 IP 地址的服务器，但在没有弹性 IP 地址的服务器上，我遇到了同样的问题。

我试图通过编辑 Tinyproxy 的源代码来更深入地了解错误发生的原因，这是因为代理服务器认为请求的“主机”是 127.0.0.1。如果我在请求标头中指定“主机”，那么它可以正常工作。但这不是正常的行为。

如果它可能只是一个代理服务器，那么我可能会认为它是一个软件错误。但是所有代理服务器都存在问题，这让我想知道网络设置是否有问题

这是我试图提出请求的方式

```
import requests
# tinyproxy listens on Port 8888
r = requests.get("http://google.com", proxies={'http': '127.0.0.1:8888'}) 
```

我得到以下回应

```
 400 Bad Request <p>You tried to connect to the machine the proxy is running on </p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T06:11:05.127

原来这是最新版本的请求库的问题。[https://github.com/kennethreitz/requests/pull/1060](https://github.com/kennethreitz/requests/pull/1060)

# wordpress - 为什么 wp_query 调用错误的类别帖子？

> ID：14017288
> 
> 赞同：0
> 
> 时间：2012-12-24T05:05:48.693
> 
> 标签：wordpress

在`php`我使用代码的文件上：

```
<div>
    <?php
        include('../blog/wp-blog-header.php');
        define('WP_USE_THEMES', false);
        $my_query = new WP_Query(array ('cat=11', 'orderby' => 'date', 'order' => 'DESC', 'posts_per_page' => '2' ));
        while ($my_query->have_posts()) : $my_query->the_post();
    ?>
    <h3><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h3>
    <?php the_excerpt() ?>
    <?php endwhile; ?>
    <?php wp_reset_postdata();?>
</div>
<ul>
    <?php
        $my_query = new WP_Query(array ('cat=11', 'orderby' => 'date', 'order' => 'DESC', 'posts_per_page' => '10','offset' => 2  ) );
        $i=0;
        while ($my_query->have_posts()) : $my_query->the_post();
    ?>
    <li  <?php if($i==4) echo 'class="except"'; ?>>
        <a href="<?php the_permalink() ?>" ><?php the_title(); ?></a>
    </li>
    <?php $i++;?>
    <?php endwhile; ?>
    <?php wp_reset_postdata();?>
</ul> 
```

上面的代码不仅调用了id为11的category，还调用了其他category。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:52:08.940

代替

```
$my_query = new WP_Query(array ('cat=11', 'orderby' => 'date', 'order' => 'DESC', 'posts_per_page' => '10','offset' => 2  ) ); 
```

和：

```
$my_query = new WP_Query(array ('cat' => 11, 'orderby' => 'date', 'order' => 'DESC', 'posts_per_page' => '10','offset' => 2  ) ); 
```

参考：[http ://codex.wordpress.org/Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)

# cakephp - 使用动态变量获取php数组列值

> ID：14017292
> 
> 赞同：0
> 
> 时间：2012-12-24T05:05:51.360
> 
> 标签：cakephp

我在这里和其他地方搜索过答案，但似乎找不到任何有效的方法。

我有一个数组`$dsxx = array("field1" => 2, "field2" => 4, "field3" => 6, "field4" => 8);` 请注意，我的数组实际上要大得多，名称更加晦涩，而且值到处都是。

根据我的代码中其他地方设置的条件，我需要特定数组元素的值。假设代码确定我需要来自`"field3"`. 然后我设置`$usefield = "field3"`.

我已经尝试了我能想到的双引号、单引号、花括号等的每一种组合，但无法让 field3 的值 6 返回。在伪代码中，我需要知道如何`$answer = $dsxx[$usefield]`返回值 6。

任何帮助或指向正确的方向表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T06:13:50.817

此代码可以正常工作。

这是3行代码

```
$dsxx = array("field1" => 2, "field2" => 4, "field3" => 6, "field4" => 8);
$usefield = 'field3';
echo 'Value of field3 is: ' . $dsxx[$usefield]; 
```

这是[工作演示](http://codepad.org/1mLlMq88)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T05:10:28.353

如果我理解正确，请设置

```
$usefield = $dsxx["field3"] 
```

**$usefield**现在的值为**6**

如果您想将数组的键（例如“field3”）更改为“usefield”，那么

```
$newkey = "usefield"
$oldkey = "field3"
$dsxx[$newkey] = $arr[$oldkey];
unset($arr[$oldkey]);

$answer = $dsxx["usefield"]; // 6 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T05:12:16.517

它很简单

```
$answer = $dsxx["field3"]; 
```

如果您设置`$usefield = "field3"`，则以下两项将给出相同的结果。

```
$answer = $dsxx["field3"];
$answer = $dsxx[$usefield]; 
```

# php - cookie 存储表单元素

> ID：14017295
> 
> 赞同：-2
> 
> 时间：2012-12-24T05:06:20.813
> 
> 标签：php, javascript, cookies

我已经设置了以下内容：[http ://webhostlet.com/POP.htm](http://webhostlet.com/POP.htm)

我想要一个“保存”按钮，当按下它时，它会记住页面上每个表单元素的值。（复选框、文本框）。或者甚至可以在没有“保存”按钮的情况下自动记住这些值。我已经查过了，但是 cookie 让我很困惑……我什至不知道在这种情况下使用 php 还是 javascript 对我来说更好，php 看起来更简单，但你只能在 html 元素之前设置它们。 . 这使它复杂化了... =/

假设我有 13 个复选框，带有 ID 的“rama”、“ramb”、“ramc”等……我将如何记住这些并在用户下次访问时加载它们？

文本框也是如此，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T05:09:35.920

您可以序列化表单，使用 jQuery。

```
$('yourform').serialize(); 
```

然后使用cookie来存储序列化的字符串。

# game-theory - 解决游戏的 Sprague-Grundy 定理。（代码厨师的ASTRGAME）

> ID：14017302
> 
> 赞同：3
> 
> 时间：2012-12-24T05:07:41.553
> 
> 标签：game-theory

我在这里问这个，因为我在代码厨师论坛上没有得到答案。

[在 codechef 的线程。](http://discuss.codechef.com/questions/4623/astrgame-and-sprague-grundy-theorem)

这是我解决的第一个问题。我收到 TLE 错误。

[问题 - ASTRGAME。](http://www.codechef.com/problems/ASTRGAME)

所以我最初的方法是创建一个*Min-Max 游戏树*。这是我[最近的解决方案。](http://www.codechef.com/viewsolution/1605368)

伪码算法是：

```
def recursiveFunction(string, currentTurn):
        for word in dictionary: 
             if word is in string: //use a string matching algorithm
                  remove word from string, and split the remaining string
                  value-a = recursiveFunction(string-a, !currentTurn)
                  if value-a == currentTurn return currentTurn //winning position
                  value-b recursiveFunction(string-b, !currentTurn)
                  if value-b == currentTurn return currentTurn //winning position

        if none of the words in the dictionary are in the string (or none of them are winning positions)
            return !currentTurn   //losing position 
```

（我认为这是正确的）。

所以想法是，它递归地分支出来，但如果它找到一个肯定会获胜的分支，那么它可以跳过该级别的其他分支。

但是，当然，我遇到了 TLE 错误，所以我在这里查看了执行此操作的指南。

[社论](http://discuss.codechef.com/questions/4200/astrgame-editorial)建议使用Sprague-Grundy 定理。阅读了一些关于使用 SG 定理的内容。几个好的来源 ：[一二](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=algorithmGames) [。](http://sbjoshi.wordpress.com/tag/sprague-grundy-theorem/)

现在，这两个教程都在 Nim 游戏的背景下讨论 SG 定理。使用 Nim，-我知道您*不需要*递归地分支树来查找每个游戏的 grundy 数字，您可以从一开始就应用 XOR 函数，并立即解决它。（你不需要为 nim 扩展树的原因是因为你知道一堆 N 个硬币，有一个糟糕的 N - 你通过思考知道这一点 - 例如，一堆 3，扩展可以是一堆2、1还是0，一堆2可以是0、1，一堆1只能变成0，所以1的grundy数是1，2的grundy数是2，3有一个3 的脏数字...）。

同样，对于[本教程](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=algorithmGames)中提到的马棋游戏，我们可以对棋盘上每个位置的粗略数字进行预处理，并为我们的棋盘配置查找这些粗略数字并应用 XOR 函数。

但是我发现我们如何将其应用于这个问题并不是那么清楚。甚至社论似乎也暗示涉及一些递归：

> 游戏分为两个子游戏，S(i, a-1) 和 S(b+1, j)。因为玩家可以在他/她的回合中选择任何游戏，所以游戏的 Grundy 数只是两个子游戏的 Grundy 数的 XOR。

即 - 它似乎仍然涉及扩展树直到你找到一个失败的位置，然后传递它。

即是这样的：

```
 def recursiveFunction(string):
     set = []
     for word in dictionary:
         if word is in string: 
             remove word from string and split the remaining string:
             set.add(recursiveFunction(string-a) XOR recursiveFunction(string-b))
     return mex(set) 
```

我看不出这与 min-max 解决方案有根本的不同。实际上 - 是不是 min-max*更快*？- 因为 min-max 一旦找到获胜的分支就可以退出，而 SG 需要继续尝试每个单词。

所以，要么我需要澄清我对 SG 定理的使用，要么这只是优化我当前算法的问题。例如，我认为我不需要每次迭代都进行字符串搜索，我可以只存储索引位置。

# qtip - jquery qTip在不聚焦时不隐藏工具提示使用tab键

> ID：14017306
> 
> 赞同：2
> 
> 时间：2012-12-24T05:07:59.503
> 
> 标签：qtip

我在我的表格上应用 qtip

```
<script type="text/javascript">
...
show: 'focus',
hide: 'unfocus'
</script>

<input type="text" name="username" size="30" alt="Tài khoản không được để trống" /> <br />
<input type="text" name="password" size="30" alt="Mật khẩu của bạn" /> <br /> 
```

但是，只有当我点击每个输入时它才能正常工作，当我按下键盘上的键 Tab 时，它会显示所有工具提示，当鼠标失焦时不会隐藏，如何修复它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-09T21:25:15.833

从文档中：

**特别活动**

qTip2 为您实现了一些自定义隐藏和显示事件，因此您不必手动编写代码。目前只有一个：不专注。此事件允许您在单击工具提示以外的任何内容时隐藏工具提示。

```
$('.selector').qtip({
    content: {
        text: 'I\'ll hide when you click anywhere else on the document'
    },
    hide: {
        event: 'unfocus'
    }
}); 
```

注意：这是一个仅限 qTip 的事件，它不适用于任何普通的 jQuery 绑定/实时/委托调用。

话虽如此，我不相信“不聚焦”是唯一的，因为我使用过点击并且它有效。

[看到这篇文章](https://stackoverflow.com/questions/2859321/)，它似乎已经为我解决了这个问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T14:29:16.617

试过这个？

```
$('.selector').qtip({
    content: {
        text: 'I\'ll hide when you click anywhere else on the document',
    },
    hide: {
        event: 'unfocus'//event: 'click mouseleave'
    }
}); 
```

# html - 为什么我在纯 HTML 中得到 â€ 字符？

> ID：14017309
> 
> 赞同：3
> 
> 时间：2012-12-24T05:09:01.897
> 
> 标签：html, unicode, html-encode

我已将数据绑定到 ab asp.net 应用程序中的转发器控件。当数据在浏览器中以纯 HTML 文本显示时，它带有以下字符：â€。我无法弄清楚这背后的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T05:12:05.473

您现在正在编写哪种 html 文档类型。如果是 HTML 5，则检查您是否`<meta charset=utf8 />`在`<head>`标签下。如果您在标签`<meta http-equiv="Content-Type" content="text/html; charset=utf8" />`下使用。`<head>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T05:10:51.523

```
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"> 
```

你在你的代码中给出了这个吗？

[http://ask-leo.com/why_do_i_get_odd_characters_instead_of_quotes_in_my_documents.html](http://ask-leo.com/why_do_i_get_odd_characters_instead_of_quotes_in_my_documents.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-11T04:20:48.137

还要查看数据库中的表，看看它们是什么排序规则，例如 latin1_swedish_ci、utf8_general_ci

# c++ - 类方法的结果类型？

> ID：14017311
> 
> 赞同：1
> 
> 时间：2012-12-24T05:09:23.203
> 
> 标签：c++, templates, c++11, typetraits, result-of

考虑以下示例：

```
#include <iostream>
#include <numeric>
#include <array>
#include <type_traits>

// Array: I cannot modify this class
template<typename T, unsigned int N>
class Array
{
    public:
        Array() : _data() {std::iota(std::begin(_data), std::end(_data), 0);}
        inline T& operator[](unsigned int i) {return _data[i];}
        inline const T& operator[](unsigned int i) const {return _data[i];}
        static constexpr unsigned int size() {return N;}
    protected:
        T _data[N];
};

// Test function: How to get the type returned by T::operator[](unsigned int) ?
template<typename T>
typename std::result_of<T::operator[](const unsigned int)>::type f(const T& x)
{
    return x[0];
}

// Main
int main(int argc, char* argv[])
{
    Array<double, 5> x;
    std::array<double, 5> y = {{0}};
    for (unsigned int i = 0; i < x.size(); ++i) std::cout<<x[i]<<std::endl;
    for (unsigned int i = 0; i < y.size(); ++i) std::cout<<y[i]<<std::endl;
    std::cout<<f(x)<<std::endl;
    std::cout<<f(y)<<std::endl;
    return 0;
} 
```

有没有办法得到返回的类型`T::operator[](unsigned int)`？

目前，g++ 说：`argument in position '1' is not a potential constant expression`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:57:50.237

最简单的方法是使用 trailing-return-type，它允许您访问函数参数，以及`decltype`，它允许您获取表达式的类型。

```
template<typename T>
auto f(const T& x) -> decltype(x[0])
{
    return x[0];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:30:06.460

您所需要的只是使用带有语法的新式函数定义`auto foo(...) -> T`。 [看这里](http://www.cprogramming.com/c++11/c++11-auto-decltype-return-value-after-function.html)

# knockout.js - 在模板中使用时，knockoutjs if 和 ifnot 绑定无法正常工作

> ID：14017315
> 
> 赞同：1
> 
> 时间：2012-12-24T05:09:58.260
> 
> 标签：knockout.js, knockout-2.0

我正在使用带有淘汰赛js的以下模板

```
<tbody data-bind="foreach: List">
            <tr>
                <td><input type="button" data-bind="if: ($parent.IsFVL || $parent.AllowChat || $root.Me().AllowChatMonitoring), value: ID, click: SelectVisit" /><span data-bind="ifnot: ($parent.IsFVL || $parent.AllowChat || $root.Me().AllowChatMonitoring), text: ID"></span></td>... 
```

并像这样调用/启动模板

```
<div data-bind="template: { name: 'tplVisitsGrid', data: { Title: 'My Visits', 'List': MVL, 'AllowChat': true, 'AllowPing': false, 'IsFVL': false } }"></div> 
```

我还仔细检查了“$root.Me().AllowChatMonitoring”的值是否为真，但 input[type=button] 和 span 都在渲染。我会错过什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:25:13.493

因为您将多个属性组合到`if`and`ifnot`中，所以您需要评估它们。试试这个（假设`IsFVL`,`AllowChat`并且`AllowChatMonitoring`都是可观察的 - 它们必须是）：

```
<td><input type="button" data-bind="if: ($parent.IsFVL() || $parent.AllowChat() || $root.Me().AllowChatMonitoring()), value: ID, click: SelectVisit" /><span data-bind="ifnot: ($parent.IsFVL() || $parent.AllowChat() || $root.Me().AllowChatMonitoring()), text: ID"></span></td>... 
```

之前实际发生的是比较 3 个函数，而不是函数的返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:29:36.770

访问 IsFVL、AllowChat 等时不应使用`$parent`。尝试将模板更新为以下内容：

```
<input type="button" data-bind="if: (IsFVL || AllowChat || $root.Me().AllowChatMonitoring), value: ID, click: SelectVisit" />
<span data-bind="ifnot: (IsFVL || AllowChat || $root.Me().AllowChatMonitoring), text: ID"></span></td> 
```

如果这没有帮助，请解决您的问题。

# php - 在新的弹出窗口中打开标题重定向？

> ID：14017318
> 
> 赞同：-2
> 
> 时间：2012-12-24T05:10:08.510
> 
> 标签：php, redirect, hyperlink

> **可能重复：**
> [在新的弹出窗口中打开标题位置？](https://stackoverflow.com/questions/14016395/open-header-location-in-new-pop-up-window)

有人可以让我知道一种可能的方式，我可以在 php 中设置标头重定向以在新窗口中打开。

我有一个我正在使用的 jquery 弹出窗口，称为漂亮的照片。通常，当用户单击链接时，页面将在该链接中打开（这里是代码：）

```
<a href="link.php?iframe=true&height=260"   rel="prettyPhoto[1]">Link</a> 
```

所以现在我试图让标题重定向打开'limit.php'以在同一个漂亮的照片弹出窗口中打开。

这就是我的意思，这是我的标头重定向代码：

```
header('Location: limit.php'); 
```

如果我无法获得标头重定向来执行此操作，我可以不简单地在 limit.php 文件中放置一个代码来说明是否打开 - 使用漂亮的照片打开吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:19:02.660

您可以通过使用 javascript 来做到这一点。

```
<a href="http://limit.php" onClick="javascript:void window.open('http://limit.php',width=700,height=500, resizable=1, left=0, top=0'); return false;">Show Pop-up</a> 
```

# windows - 使用 VBA 切换 Internet Explorer Windows

> ID：14017321
> 
> 赞同：-1
> 
> 时间：2012-12-24T05:10:27.960
> 
> 标签：windows, internet-explorer, excel, automation, vba

我一直在使用 Excel 宏来自动化工作中的 Internet Explorer 进程。我非常接近于弄清楚一切，但最后，宏单击“下载报告”按钮，该按钮会启动一个新窗口。我需要在这个新窗口上启动一些事情，但我不知道如何将宏的焦点更改为新窗口。我在网上找到了一些东西，但都没有成功。我知道有一些方法可以通过告诉 Excel 查找浏览器窗口的名称并激活它来在浏览器窗口之间切换，但是新窗口的部分名称不断变化（它是该特定窗口的唯一 URL） .

我想知道是否有办法让宏只查找窗口的前九个字母并切换到该窗口？类似于excel中的LEFT函数？原因是 URL 的前 9 个字符永远不会改变。原始窗口的名称（我试图切换的那个）永远不会改变，所以也许我可以告诉 Excel 查找未命名为原始窗口的浏览器窗口？还是有其他想法？

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:11:41.273

您正在寻找 VBA AppActivate 命令吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T16:34:28.670

您将需要添加对 Internet 控件和 shell 的引用。您只需要循环浏览 IE 窗口并查看 url 的左侧。见下文

```
Function GetInternetWindow(urlToLookFor as String) As InternetExplorer

Dim winShell As Shell
Dim ie As InternetExplorer

Set winShell = New Shell
'loop through the windows and look at the urls
For Each ie In winShell.Windows
    If Left(ie.LocationURL, 9) = urlToLookFor Then        
        GetInternetWindow = ie
        Exit For
    End If
Next
End Function 
```

# php - 将变量值从 javascript 传递到 php

> ID：14017322
> 
> 赞同：-1
> 
> 时间：2012-12-24T05:10:33.017
> 
> 标签：php, javascript, ajax

我正在开发一个使用 ajax 进行异步数据库访问的项目。我将值存储在 JavaScript 变量中，如下所示..

```
var content=xmlhttp.responseText; 
```

现在我想要的是将此值传递给同一页面上的 php 模块..请建议我..它很紧急

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:12:23.700

您必须向另一个脚本发出单独的 AJAX 请求才能实现此目的。PHP 是服务器端的，因此不能直接与客户端交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:02:16.187

我不清楚您需要将值从 javascript 传递到 php。

但我可以给你，

1.  一种不推荐但可行的方法来解决您的问题：
    您说，您一开始是在进行 Ajax 调用。在处理相应的服务器端 php 函数时，将响应值（xmlhttp.responseText 的值）存储到**$_SESSION**变量中。最后在 ajax 响应处理函数中重新加载页面（使用 location.reload()）。

2.  以及针对您的问题的推荐方法：
    您可能在 php 代码中添加了一些 if-else 控制流结构，并期望在获得 ajax 响应值后执行它们（遗憾的是您不能这样做）。因此，如果您确实有类似的逻辑，则将这些 if-else 条件转换为相应的 Javascript 代码。可能是一个 javascript 函数，并通过将 ajax 响应值传递给它来调用该函数。这个新功能将使用您的 ajax 响应值并通过应用必要的逻辑对网页的某些部分进行更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T05:25:36.317

您应该在 PHP 中处理数据（分配给内容），因为正如这里的其他答案告诉您的那样，PHP 是服务器端的，而 JavaScript 是客户端的。如果您从您控制的页面获取此数据，而不是`var content = xhr.responseText;`在发送之前修改数据。例如，如果您正在`process.php`对服务器上的文件进行 AJAX 调用以获取您`content`在 JavaScript 中分配给的数据，请确保在 echo()'ing 数据之前处理 process.php 中的数据（您然后存储在`content`客户端内部）：

在 process.php 中：

```
// below is the normal server script which you are storing in content on the client
// echo $result;
// instead, we are going to operate on the data first:
return doSomething($result); 
```

然后在客户端：

```
var newContent = xhr.responseText; 
```

该`newContent`变量将包含您之前希望使用 PHP 修改的数据。如果您无法控制使用 AJAX 调用的服务器脚本，那么正如这里已经提到的，您需要使用 PHP 向服务器发送 SECOND AJAX 调用，并使用`$_GET`或`$_POST`检索该`content`数据，然后使用它在那里。

# extjs - 使用 extjs 网格和 Java 休息服务分页无法正常工作

> ID：14017326
> 
> 赞同：-1
> 
> 时间：2012-12-24T05:11:46.830
> 
> 标签：extjs

我有一个 extjs 网格面板。它包含分页工具栏。

这是分页工具栏代码：

```
 xtype: 'pagingtoolbar',
            store: 'courseStoreForGrid',   // same store GridPanel is using
            pageSize: 2,
            displayInfo: true,
            displayMsg: 'Displaying topics {0} - {1} of {2}',
            emptyMsg: "No topics to display", 
```

这是我的商店代码：

```
 var itemsPerPage = 2; 
                 var courseStoreForGrid= Ext.create('Ext.data.Store',{
              fields : [ 'id','name','minimumAge','maximumAge','suggestedDurationDays','tags'],
             storeId:'courseStoreForGrid',
             remoteSort:true,
             pageSize:itemsPerPage,
             sortInfo: 
             {
              field: "name",
              direction: "ASC"
            }, 
```

//autoLoad:true, proxy :{ type : 'rest', url : 'http://localhost:8080/WebService/iTest/course/PagingCourse.json', method : 'GET', scope : this, reader : {类型：'json'，根：'课程'，totalProperty：'totalCount'}

```
 }

    });
                    courseStoreForGrid.load({params:{start:0, limit:2}}); 
```

我的数据库中共有 7 条记录。当我第一次在该网格上执行分页时，它在不工作后工作正常。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T05:20:43.377

您使用的是哪个版本的 Ext-js？

在下面的 URL 中，您可以找到带有“网格面板”和“分页工具栏插件”示例的官方 EXT-JS 4.x 文档

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel)

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.toolbar.Paging](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.toolbar.Paging)

# maven-2 - 将 web 应用项目转换为 maven 项目并将对应的 .classpath 文件转换为 pom.xml

> ID：14017329
> 
> 赞同：2
> 
> 时间：2012-12-24T05:12:06.483
> 
> 标签：maven-2, classpath, pom.xml

将简单的Web应用程序项目转换为maven项目后，是否可以将项目.classpath文件转换为pom.xml？因为如果我的项目使用了很多 jars，并且我想将其转换为 maven，那么我将执行 configure->convert to maven，但是不可能在 pom.xml 中手动添加所有 jars 依赖项。那么有没有任何工具可以转换它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T09:47:58.090

首先，没有工具可以做这些事情。问题通常是你有大量的依赖项，你不需要放入**pom.xml**文件，因为 Maven 处理[传递依赖](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)项，这意味着你只需要添加直接依赖项。最好的办法是查看当前项目的 jar 文件并尝试在[Maven Central](http://search.maven.org/)中找到它们并将搜索输出中的信息剪切并粘贴到您的 pom.xml 中。当然，在命令行上通过 Maven 测试构建。

# python - 如何在 Python 中捕获此异常？

> ID：14017333
> 
> 赞同：-4
> 
> 时间：2012-12-24T05:12:16.173
> 
> 标签：python, exception-handling

如果用户输入了不存在的不正确目录名称，rsync 会生成此错误。我正在使用`subprocess.Popen`Python。如何在 Python 中捕获此错误？

```
rsync: link_stat "/fdsfsd" failed: No such file or directory (2)
    rsync error: some files/attrs were not transferred (see previous errors) (code 23) at main.c(1637) [Receiver=3.1.0dev]
    rsync: [Receiver] write error: Broken pipe (32) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T05:15:30.310

这看起来不像异常，而是由`rsync`. 因此，您无法在 Python 中捕获它。你可以做的是监控`Popen`对象的返回码，看看进程是否成功终止。阅读有关[returncode](http://docs.python.org/2/library/subprocess.html#subprocess.Popen.returncode)的文档。

如果您想尝试解析错误消息，我想您可以尝试使用正则表达式，但这可能不值得。当您调用外部进程时，没有通用方法可以知道其打印的错误消息如何映射到 Python 异常类型。该程序可以做任何事情并以任何未知的方式失败。您最好的选择是简单地查看返回码，如果它不为零，则引发异常，说明“外部进程以某种方式失败”。这基本上是`subprocess.check_call`为你做的。

# javascript - 如何从另一个主干视图调用主干视图中的函数

> ID：14017335
> 
> 赞同：4
> 
> 时间：2012-12-24T05:12:43.850
> 
> 标签：javascript, backbone.js

在我当前的应用程序中，我的`save`一个主干视图中有一个功能。

`custom_save : function() { // this method's save code // have to call another views save function here }`

另一个视图名称是`App.SettingsView`，它有一个`save`方法。我必须在逻辑`save`之后立即调用此方法。`custom_save`如何`App.SettingsView save`在函数内部调用`custom_save`函数。请不要两者都是2个不同的文件

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-24T05:23:10.647

你到那里是一个不好的做法。视图之间的耦合。为什么不创建一个继承自然`Backbone.Events`后触发另一个视图订阅的事件的 EventBus。当事件发生时，只需触发保存功能即可

**查看#1 保存**

```
save:function(){
 EventBus.trigger("save:view");
} 
```

**查看#2 保存**

```
initialize:function(){
 EventBus.on("save:view:",this.save);
},
save:function(){
//your code
} 
```

听起来不错 ？它应该 ：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T05:14:19.733

创建一个新的视图对象并调用它。

```
var anotherView = new App.SettingView();
anotherView.save(); 
```

# javascript - JavaScript .execute 命令可以同步运行，还是转换为 Ajax？

> ID：14017336
> 
> 赞同：0
> 
> 时间：2012-12-24T05:12:58.920
> 
> 标签：javascript, ajax, synchronous

我正在使用此处找到的 ArcGIS API for Javascript：http: [//help.arcgis.com/en/webapi/javascript/arcgis/index.html](http://help.arcgis.com/en/webapi/javascript/arcgis/index.html)

这段 JavaScript 好像是异步运行的，有没有可能让它同步运行，甚至转成同步的 Ajax 呢？

我似乎在 .execute 命令上找不到太多信息

我需要它同步运行，以便 PHP 可以抓取结果（最终结果将回显真或假，警报仅用于调试）

```
var identifyTask = new esri.tasks.IdentifyTask("http://website.here");
var identifyParams = new esri.tasks.IdentifyParameters();
identifyParams.tolerance = 0;
identifyParams.returnGeometry = true;
identifyParams.layerIds = [layerID];
identifyParams.width = map.width;
identifyParams.height = map.height;
identifyParams.geometry = geom;
identifyParams.mapExtent = map.extent;

identifyTask.execute(identifyParams, function(results) {
    if (results.length == 0) {
        alert('true');
    } else {
        alert('false');
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T05:17:37.030

API Spec [Here](http://help.arcgis.com/en/webapi/javascript/arcgis/help/jsapi_start.htm)不包括同步执行的规范。

它仅适用于回调和`onComplete`和`onError`事件。

该`execute()`方法不是 Javascript 标准库的一部分。请注意在您的示例代码中如何开始使用`esri`. 您正在使用`esri`的库。快速谷歌搜索“esri javascript”找到了 API 站点，然后浏览 API 找到了你在代码中使用的内容。

至于你说你希望 PHP 抓取结果，你没有多大意义。此 javascript 旨在运行客户端，而 PHP 是一种服务器端技术。请进一步详细说明 PHP 将如何抓取结果以及为什么这种同步方法会对此产生任何影响。

# iphone - 您可以从另一个应用程序中删除一个应用程序吗？

> ID：14017338
> 
> 赞同：0
> 
> 时间：2012-12-24T05:13:11.247
> 
> 标签：iphone, ios, windows-phone-7, windows-phone, windows-phone-8

喜欢这篇文章，

[在 Android 中，您可以从另一个应用程序中删除一个应用程序吗？](https://stackoverflow.com/questions/4412588/in-android-can-you-delete-an-application-from-another-application)

**您可以从windows phone 7 或 8 上**的另一个应用程序中删除一个应用程序吗？（包括企业功能）

我对 iOS 有**同样的问题**。我知道企业功能提供通过 url 安装另一个应用程序。但是“卸载”呢，有可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T05:22:55.547

不，Windows Phone 将不允许您的应用访问您自己的应用沙箱之外的任何文件。您无法删除其他应用程序，甚至无法访问其数据。允许应用程序这样做将是一个巨大的安全问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T05:14:36.177

在 iOS 中，无法从另一个应用程序中删除一个应用程序。Apple 绝不会在普通设备中允许这样做。我不确定越狱的 iPhone。用户必须手动删除普通设备的应用程序。看起来即使是 Windows 手机也不允许这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T03:44:36.997

写。对于企业功能，您可以安装包，以及查看已安装包的状态（已安装、已安装百分比、待安装），以及应用图标等各种属性。但仍然没有用于卸载这些包的 API。请参阅 MSDN 上的 InstallationManager API：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/windows.phone.management.deployment.installationmanager (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/windows.phone.management.deployment.installationmanager(v=vs.105).aspx)

# java - 在客户端计算机上打开文件的最佳方式

> ID：14017339
> 
> 赞同：0
> 
> 时间：2012-12-24T05:13:17.397
> 
> 标签：java, file, applet, client

我正在编写一个基于 Web 的版本控制系统，当用户签出代码文件时，它会自动复制到他们有权访问的共享网络文件夹中。然后，我想使用他们的默认程序在他们的计算机上自动打开该文件类型。我不希望用户必须下载然后打开文件，因为它需要全部自动化。

我尝试编写一个 Java 小程序，但遇到了一些障碍，在我进一步了解之前，我想知道人们认为什么是实现此功能的最简单或最佳方式。我希望用户在使用系统之前不必安装软件。这就是我最初尝试小程序的目的。

我感谢任何意见或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:25:14.013

我决定编写一个客户端协议处理程序，我可以通过将浏览器重定向到“myprotocol:data”来调用它。不幸的是，它涉及一些客户端设置，因为它们需要协议处理程序，但它非常简单、基本、轻量级以及事件驱动，因此不需要侦听器。

# windows - SSDT 注册表挂钩

> ID：14017340
> 
> 赞同：2
> 
> 时间：2012-12-24T05:13:21.450
> 
> 标签：windows, api

我是内核编程和驱动程序概念的新开发人员。

我需要挂钩`ssdt`以保护注册表的某些键值，但我找不到任何有用的教程或简单的源代码。

我发现`zwopenkey`并且`zwcreatkey`应该被钩住并且他们的权限更改为只读。我正在寻找一些 SSDT 注册表挂钩的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:34:47.330

您不需要挂钩 SSDT，也不应该这样做。还有其他方法可以保护您的密钥。许多解决方案之一是例如使用[注册表回调](http://msdn.microsoft.com/en-us/library/windows/hardware/ff560903%28v=vs.85%29.aspx)。

# java - 如何计算二十一点游戏的分数？我哪里错了？

> ID：14017341
> 
> 赞同：1
> 
> 时间：2012-12-24T05:13:30.513
> 
> 标签：java, processing

我的计算不能正常工作。我看不出代码有什么问题。有时它不能正确计算分数。有时它做得很完美。我什至无法理解它什么时候做得好，什么时候做得不好。

分数计算应该是这样的：

Ace 可以在总分上加 1 或 11。如果得分高于 21，则 ace 计算为 1；否则 ace 是 11。

这是我的代码：

```
 // Updates the the value of the cards the player has in their hand
  int updateValueOfHand() {
    int result = 0;                             // it will be returned
    int ace = 0;                                // value of ace

    for (int i =0; i < playerHand.size(); i++)  // loop to see players hand
    {
      int cardValue;                            // card value of hand
      Card card=(Card)playerHand.get(i);        // check the card
      cardValue = card.getRank();
      if (cardValue == 1)                       // if card value is 1 (ace)
      {
        cardValue = 0;                         // assign to 0
        ace += 1;                              // ace is 1 (if there are 2 aces ace is 2 ...)
      }
      result = result + cardValue;             // result is card value (no ace)
    }
    //return result;
    println("Number of ace: " + ace);
    if (ace!=0)                                //if there is ace
    {
      for (int j=0; j<ace; j++)                // if there is more than 1 ace
      {
        if (result+11<=21) {                   // if result is <= 21 when you count ace as 11, then ace is 11
          result+=11;
        }        
        else {
          result+=1;                          // otherwise ace is 1
        }        
      }
    }
    return result;
  } 
```

![在此处输入图像描述](../Images/22979ba89093557a9475803f2bc4bf2b.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T05:20:59.553

考虑一手牌，一张K，两张A。这应该计算为 10 + 1 + 1，否则它将大于 21。

但是，程序会循环遍历每个 Ace，并且：

```
// if result is <= 21 when you count ace as 11, then ace is 11 
```

由于国王加上算作 11 的第一个 A 是 <= 21，因此程序选择将第一个 A 算作 11，但这是不正确的。

这里有一个解决方法：在你的第一个`for`循环中，`result`每个 Ace 增加 1，然后在第二个`for`循环中，`result`只要它保持 <= 21，每个 Ace 增加 10。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-24T21:48:27.980

[有没有一种优雅的方式来处理二十一点中的王牌？](https://stackoverflow.com/questions/837951/is-there-an-elegant-way-to-deal-with-the-ace-in-blackjack)

只需将每个 ace 视为 11。如果您的值超过 21，则遍历并获得手中的 ace，从总分中减去 10，直到您的得分为 21 或更少，或者您已经通过了每个 ace。这将是你的最终分数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-16T20:00:20.070

对我来说，最好的方法是获得 2 个总数：

*   手牌总数（考虑 11 为 A）
*   手中的 A 总数。

然后，如果 hand_total > 21 从 hand_total 中减去 10，直到 <= 21 为止
，除非它需要为 1 以防止爆牌，否则应始终将 ace 计为 11。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-30T22:55:21.660

这是我的尝试

```
public int handScore(Hand hand)
{
    int score = 0;
    int aceCount = 0;
    for (Card card : hand.getCards())
    {
        switch (Card.RANK_SYMBOLS[card.getRank()])
        {
            case "2": score += 2; break; 
            case "3": score += 3; break;
            case "4": score += 4; break;
            case "5": score += 5; break;
            case "6": score += 6; break;
            case "7": score += 7; break;
            case "8": score += 8; break;
            case "9": score += 9; break;
            case "10":
            case "j":
            case "q":
            case "k": score += 10; break;
            case "a": score += 11; aceCount++; break;
        }

        while(score>21 && (aceCount-->=0))
            score -= 10;

    }
    return score; 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-24T22:00:26.840

这是我正在使用的 .NET 代码，其中 Hand 是我的卡片的专门集合...无论如何，您仍然了解基本概念，并且应该能够轻松地将语法和命名约定转换为 Java。

```
protected int EvaluateHand(Hand hand)
    {
        int score = 0;
        foreach (Card currentCard in hand)
        {
            switch (currentCard.Value)
            {
                case Value.Two:
                    score += 2;
                    break; 
                case Value.Three:
                    score += 3;
                    break;
                case Value.Four:
                    score += 4;
                    break;
                case Value.Five:
                    score += 5;
                    break;
                case Value.Six:
                    score += 6;
                    break;
                case Value.Seven:
                    score += 7;
                    break;
                case Value.Eight:
                    score += 8;
                    break;
                case Value.Nine:
                    score += 9;
                    break;
                case Value.Ten:
                case Value.Jack:
                case Value.Queen:
                case Value.King:
                    score += 10;
                    break;
                case Value.Ace:
                    score += 11;
                    break; 

            }

        }

        // after evaluating with 11 for each ace, if score has busted, then change each ace value from 11 to 1
        if (score > 21)
        {   // if our evaluated score is over 21, subtract 10 foreach ace in the hand. 
            foreach (Card currentAceCheckCard in hand)
            {
                if (score <= 21)
                {   // if we've subtracted enough until we're not busted, then break and return value
                    break;
                }
                if (currentAceCheckCard.Value == Value.Ace)
                {
                    score -= 10;
                }
            }
        }
        return score; 
    } 
```

# ruby - Ruby - 从 csv 文件中删除列并转换为管道分隔的 txt 文件

> ID：14017342
> 
> 赞同：1
> 
> 时间：2012-12-24T05:13:36.067
> 
> 标签：ruby, csv, file-io

我正在尝试获取一个 CSV 文件，删除几列，然后输出一个以管道分隔的文本文件。

这是我的代码，几乎可以工作。唯一的问题是该`CSV.generate`块是在整个内容周围添加双引号，以及在换行符所在的位置周围添加双引号的随机逗号。

```
require 'csv'

original = CSV.read('original.csv', { headers: true, return_headers: true })

original.delete('Column header 1')
original.delete('Column header 2')
original.delete('Column header 3')

csv_string = CSV.generate do |csv|
  csv << original
end

pipe_string = csv_string.tr(",","|")

File.open('output.txt', 'w+') do |f|
  f.write(pipe_string)
end 
```

有一个更好的方法吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T05:34:26.210

Try this:

```
require 'csv'

original = CSV.read('original.csv', { headers: true, return_headers: true })

original.delete('Column header 1')
original.delete('Column header 2')
original.delete('Column header 3')

CSV.open('output.txt', 'w', col_sep: '|') do |csv|
  original.each do |row|
    csv << row
  end
end 
```

# python - 是否有一个 Python 模块可以透明地将文件的内容用作缓冲区？

> ID：14017349
> 
> 赞同：5
> 
> 时间：2012-12-24T05:14:35.463
> 
> 标签：python

我正在为事件日志开发一个纯 Python 文件解析器，其大小可能从千字节到千兆字节不等。是否有一个模块可以将显式 // 调用抽象`.open()`为一个简单的类似缓冲区的对象`.seek()`？您可能会认为这是 的倒数。我希望它可能看起来像：`.read()``.close()``StringIO`

```
with FileBackedBuffer('/my/favorite/path', 'rb') as buf:
    header = buf[0:0x10]
    footer = buf[0x10000000:] 
```

该`mmap`模块可以满足我的要求；但是，我有两个保留意见，希望得到反馈：

1.  模块处理大于可用 RAM/swap 的文件很重要。我不确定是否`mmap`可以很好地做到这一点。
2.  `mmap`构造函数因操作系统而异。这让我犹豫不决，因为我正在寻找编写出色的跨平台代码，并且不想在操作系统细节上搞砸。如果需要，我会这样做，但这引发了我可能找错地方的警告。

如果`mmap`是诸如任务的正确模块，它如何处理这两点？如果不是，什么是合适的模块？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T05:31:03.840

mmap 可以轻松处理大于 RAM/swap 的文件。mmap 不能处理大于地址空间的文件，这意味着 32 位系统在他们可以使用多大的文件方面受到限制。

发生的情况`mmap`是操作系统在内存中只会有它选择的尽可能多的数据，但你的程序会认为它就在那里。但请注意使用模式，因为如果您的数据不适合 RAM 并且您跳得太随意，它将交换（丢弃您最近未使用的文件中的页面，以便为要加载的新页面腾出空间） .

如果您不需要指定任何 base`fileno`和`length`，我认为您无需担心`mmap`. 如果您确实需要担心额外的参数，那么您要么必须掌握 Windows 与 Unix，要么将其传递给您的用户。我不知道您的库将是什么，但在两个平台上提供合理的默认值同时还允许用户调整选项可能会很好。在我看来，您不太可能关心 Windows`tagname`选项，此外，如果您是跨平台的，那么只需接受 Unix 默认值，`prot`因为您在 Windows 上别无选择。只剩下关心`MAP_PRIVATE`和`MAP_SHARED`。默认是`MAP_SHARED`，但我不确定这是否是最接近 Windows 行为的选项，但在那里接受默认值可能没问题。

# c# - 使用实体数据模型从存储过程中选择多行

> ID：14017352
> 
> 赞同：0
> 
> 时间：2012-12-24T05:15:05.617
> 
> 标签：c#, asp.net, sql, entity-framework, ado.net

我想要一个存储过程返回多行，并且我正在使用实体数据模型。我还想检索作为输出给出的所有行的列的值。

我已经使用`SqlDataReader`,`SqlCommand`和完成了这件事`SqlConnection`。

```
SqlCommand cmd = new SqlCommand("select leave_details,LID,from_date,to_date from LeaveTable where E_ID=1 and from_date<@toDate and to_date>@fromDate", con);
cmd.Parameters.Add("@toDate", System.Data.SqlDbType.Date);
cmd.Parameters["@toDate"].Value = to_date;
cmd.Parameters.Add("@fromDate", System.Data.SqlDbType.Date);
cmd.Parameters["@fromDate"].Value = from_date;
con.Open();

obj = cmd.ExecuteReader(); 
```

我可以使用`obj.read()`.

我可以使用读取特定列的值

```
leave_id = (int)obj.GetValue(1); 
```

如何通过存储过程完成相同的事情并使用实体数据模型创建函数导入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:29:08.060

有几个步骤可以做到这一点我相信这是迄今为止最好的教程，可以在网上找到

[http://msdn.microsoft.com/en-us/data/gg699321.aspx](http://msdn.microsoft.com/en-us/data/gg699321.aspx)

您基本上必须创建一个新的复杂类型，因为您要从多个表中进行选择我相信本教程有一个关于如何执行此操作的示例。基本上，您将在列表中返回一组值，然后您可以从 alist 中读取每个值/对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:10:25.263

您可以在实体框架对象模型中添加存储过程作为函数导入，同时添加它会询问您返回类型......因此它可以生成复杂的自定义实体。在与存储过程通信时，它将从实体框架中获取数据并将其添加到自定义实体中，因此您将从表中获得多行，当您创建实体对象时再获得一个点，然后您将获得我们设置的函数名称.ToLIst() 到它的调用端，因此它将返回结果集列表。

IE

实体团队合作：abcentity

创建实体对象：abventity abc = new abcentity();

调用 SP 函数：var Result = abc.SPCall(parmae​​ters).tolist();

结果，您将从存储过程中获得结果列表

# iphone - 在 XCode 中检查应用程序 API 版本？

> ID：14017360
> 
> 赞同：0
> 
> 时间：2012-12-24T05:17:18.600
> 
> 标签：iphone

> **可能重复：**
> [当有新版本的 iOS 应用程序可用时发出警报](https://stackoverflow.com/questions/8496640/alert-when-new-version-of-ios-app-is-available)

我需要可以嵌入到我的项目代码中的代码，以便从应用程序到服务器的每个请求都包含 API 版本，以防我的 iPhone 应用程序获得新的更新，以便它可以通知用户更新应用程序的新版本。

我应该在哪里添加代码来检查它以及它需要哪一行代码。我没有得到正确的程序来遵循。

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:19:14.343

你可以这样做：

1.  只需在服务器端创建单独的 Web 服务，其参数为应用程序版本。

2.  在保存最新版本应用程序的服务器端设置全局变量。

3.  现在，从您的应用程序中，当应用程序启动时，使用应用程序中使用的 api 版本参数调用此服务。（此 api 版本将是静态的，因为您已经完成了相同的代码。当您更新应用程序时，您将自己更改 api 代码。希望您理解）。

4.  检查服务器端的 api 版本，如果应用 api 使用最新版本，则返回 TRUE。如果应用程序上的 api 使用较低版本，则返回 FALSE。

5.  现在，在应用程序中，如果 web-service 返回 FALSE，那么只需通过 ALERT 通知用户，他正在使用较低版本的 api 并下载最新的应用程序以使用最新的 api。

希望，你知道该怎么做。

干杯。

# iphone - 将 ios4 应用程序转换为 ios5

> ID：14017361
> 
> 赞同：-1
> 
> 时间：2012-12-24T05:17:22.997
> 
> 标签：iphone, ios5, ios4, cocoalibspotify-2.0

我已经创建了一个与 ios<5 兼容的应用程序。这已经存在于[Workout DJ FREE for Spotify](https://itunes.apple.com/in/app/workout-dj-free-for-spotify/id586168732?mt=8)

现在在下一个版本中，我也希望这个应用程序与 ios5 兼容。为此，我需要做什么？

我计划选择这两个选项中的任何一个

1.  为每个屏幕制作单独的 xib
2.  创建所有具有更多视网膜显示的图像并使用@(some)X 命名。就像我们为视网膜显示做@2x 一样。

我认为第二个选项根本不起作用，是吗？

我正在寻求ios5专家的指导。我该怎么办？我应该选择以上两个选项中的任何一个，还是有其他标准和最佳选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:30:46.460

You shouldn't need separate views for the iPhone 5 and <= iPhone 4.

Just add a new Default screen for the iPhone 5 to trigger automatic view sizing to work on the iPhone 5 and make sure all of your Autolayout or resizing masks are correct.

Yes, you'll want to make sure you supply retina graphics so everything looks good on the retina displays in the iPhone 4 and iPhone 5.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:20:28.383

只需按照以下教程进行操作。您将了解如何为 iPhone 4 和 5 兼容设置设计。

[http://mobile.tutsplus.com/tutorials/iphone/working-with-the-iphone-5-display/](http://mobile.tutsplus.com/tutorials/iphone/working-with-the-iphone-5-display/)

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T05:20:30.880

有多种方法可以做到这一点，请尝试使用谷歌搜索。也许尝试在这里查看这篇论坛文章：http: [//forums.macrumors.com/showthread.php?t=1356952](http://forums.macrumors.com/showthread.php?t=1356952)

# java - 如何创建 Java gradle 项目

> ID：14017364
> 
> 赞同：125
> 
> 时间：2012-12-24T05:17:25.507
> 
> 标签：java, gradle

如何从命令行创建 Java Gradle 项目？

它应该创建[标准的 Maven 文件夹布局](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)，如下图所示。

![使用 Eclipse 插件创建的 Java Gradle](../Images/6a52301eedc29d4d4b43bb9193ea42e3.png)

更新：

.1。从[http://www.gradle.org/docs/current/userguide/tutorial_java_projects.html](http://www.gradle.org/docs/current/userguide/tutorial_java_projects.html) 我需要`build.gradle`用 2 行创建文件

> ```
> apply plugin: 'java'
> apply plugin: 'eclipse' 
> ```

.2\. 添加到`build.gradle`下面的任务，而不是执行`gradle create-dirs`

> ```
> task "create-dirs" << {
>    sourceSets*.java.srcDirs*.each { it.mkdirs() }
>    sourceSets*.resources.srcDirs*.each { it.mkdirs() }
> } 
> ```

.3\. 然后运行`gradle eclipse`（或对应配置的其他 IDE 插件的字符串）

那么有没有办法在一个命令中做到这一点？

* * *

## 回答 #1

> 赞同：289
> 
> 时间：2014-06-14T09:13:41.087

创建Java项目：新建一个项目目录，跳进去执行

```
gradle init --type java-library 
```

将构建源文件夹和 Gradle 构建文件（包括包装器）。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-12-07T22:48:46.530

gradle 家伙正在尽最大努力解决我们所有（你）的问题 ;-)。他们最近（从 1.9 开始）添加了一个新功能（孵化）：“build init”插件。

请参阅：[构建初始化插件文档](http://www.gradle.org/docs/current/userguide/build_init_plugin.html)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-12-24T06:43:35.563

不幸的是，你不能在一个命令中做到这一点。该功能存在一个未[解决的问题](http://issues.gradle.org/browse/GRADLE-1289)。

目前，您必须手动完成。如果你需要经常做，你可以创建一个[自定义的 gradle 插件](http://www.gradle.org/docs/current/userguide/custom_plugins.html)，或者只是准备你自己的项目骨架并在需要时复制它。

**编辑**

截至 2013 年 5 月 1 日，上述 JIRA 问题已得到解决，并在 1.7-rc-1 中修复。[Build Init Plugin](http://www.gradle.org/docs/current/userguide/build_init_plugin.html)的文档是可用的，尽管它表明此功能仍处于“孵化”生命周期中。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-04-11T06:11:41.980

最后在比较所有解决方案之后，我认为从`build.gradle`文件开始会很方便。

Gradle 发行版有`samples`包含很多示例的文件夹，并且有`gradle init --type basic`命令参见[第 47 章. Build Init Plugin](http://www.gradle.org/docs/current/userguide/userguide_single.html#build_init_plugin)。但他们都需要一些编辑。

您也可以使用下面的[模板](https://github.com/Nodeclipse/nodeclipse-1/blob/master/org.nodeclipse.enide.editors.gradle/docs/java/basic/build.gradle)，然后运行`gradle initSourceFolders eclipse`

```
/*
* Nodeclipse/Enide build.gradle template for basic Java project
*   https://github.com/Nodeclipse/nodeclipse-1/blob/master/org.nodeclipse.enide.editors.gradle/docs/java/basic/build.gradle
* Initially asked on
*   http://stackoverflow.com/questions/14017364/how-to-create-java-gradle-project
* Usage
*   1\. create folder (or general Eclipse project) and put this file inside
*   2\. run `gradle initSourceFolders eclipse` or `gradle initSourceFolders idea`
* @author Paul Verest; 
* based on `gradle init --type basic`, that does not create source folders 
*/

apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'idea'

task initSourceFolders { // add << before { to prevent executing during configuration phase
   sourceSets*.java.srcDirs*.each { it.mkdirs() }
   sourceSets*.resources.srcDirs*.each { it.mkdirs() }
}

task wrapper(type: Wrapper) {
    gradleVersion = '1.11'
}

// In this section you declare where to find the dependencies of your project
repositories {
    // Use Maven Central for resolving your dependencies.
    // You can declare any Maven/Ivy/file repository here.
    mavenCentral()
}

// In this section you declare the dependencies for your production and test code
dependencies {
    //compile fileTree(dir: 'libs', include: '*.jar')
    // The production code uses the SLF4J logging API at compile time
    //compile 'org.slf4j:slf4j-api:1.7.5'

    // Declare the dependency for your favourite test framework you want to use in your tests.
    // TestNG is also supported by the Gradle Test task. Just change the
    // testCompile dependency to testCompile 'org.testng:testng:6.8.1' and add
    // 'test.useTestNG()' to your build script.
    testCompile "junit:junit:4.11"
} 
```

结果如下所示。

![概述](../Images/6ab5b9b1b4b4359ba5b25711aa16cca1.png)

这可以在没有任何 Eclipse 的 Gradle 插件的情况下使用，
或者与[（Enide）Gradle for Eclipse、Jetty、Android](http://marketplace.eclipse.org/content/gradle)替代[Gradle Integration for Eclipse一起使用](http://marketplace.eclipse.org/content/gradle-integration-eclipse)

![编辑框](../Images/fbe6b2ce8f86069f157ef390ffcc2208.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-10T14:57:38.520

如果您使用 Eclipse，对于现有项目（有一个`build.gradle`文件），您只需键入`gradle eclipse`将为该项目创建所有 Eclipse 文件和文件夹的类型。

它会为您处理所有依赖项，并将它们添加到 Eclipse 中的项目资源路径中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-10-14T14:41:27.560

这对我有用。我想用 gradle 创建一个 hello world java 应用程序，并满足以下要求。

1.  应用程序具有外部 jar 依赖项
2.  创建一个可运行的胖 jar，并将所有依赖类复制到 jar
3.  创建一个可运行的 jar，将所有依赖库复制到目录“dependencies”，并在清单中添加类路径。

这是解决方案：

*   安装最新的 gradle（检查 gradle --version 。我用的是 gradle 6.6.1）
*   创建文件夹并打开终端
*   执行`gradle init --type java-application`
*   在命令行中添加所需数据
*   将项目导入 IDE（IntelliJ 或 Eclipse）
*   使用以下任务编辑 build.gradle 文件。

**可运行的脂肪罐**

```
task fatJar(type: Jar) {
 clean
 println("Creating fat jar")
 manifest {
    attributes 'Main-Class': 'com.abc.gradle.hello.App'
 }
 archiveName "${runnableJar}"
 from {
    configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
    configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
 } with jar
 println("Fat jar is created")
} 
```

**复制依赖**

```
task copyDepends(type: Copy) {
   from configurations.default
   into "${dependsDir}"
} 
```

**在清单中创建具有类路径依赖项的 jar**

```
task createJar(type: Jar) {
   println("Cleaning...")
   clean
   manifest {
    attributes('Main-Class': 'com.abc.gradle.hello.App',
            'Class-Path': configurations.default.collect { 'dependencies/' + 
             it.getName() }.join(' ')
    )
}
  from {
      configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
  } with jar
  println "${outputJar} created"
} 
```

这是完整的 build.gradle

```
plugins {
    id 'java'
   id 'application'
}
repositories {
    mavenCentral()
}
dependencies {
  implementation 'org.slf4j:slf4j-api:1.7.30'
  implementation 'ch.qos.logback:logback-classic:1.2.3'
  implementation 'ch.qos.logback:logback-core:1.2.3'
  testImplementation 'junit:junit:4.13'
}
def outputJar = "${buildDir}/libs/${rootProject.name}.jar"
def dependsDir = "${buildDir}/libs/dependencies/"
def runnableJar = "${rootProject.name}_fat.jar";

//Create runnable fat jar
task fatJar(type: Jar) {
   clean
   println("Creating fat jar")
   manifest {
    attributes 'Main-Class': 'com.abc.gradle.hello.App'
  }
  archiveName "${runnableJar}"
  from {
    configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
    configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
  } with jar
  println("Fat jar is created")
}

//Copy dependent libraries to directory.
task copyDepends(type: Copy) {
 from configurations.default
 into "${dependsDir}"
}

//Create runnable jar with dependencies
task createJar(type: Jar) {
 println("Cleaning...")
 clean
 manifest {
    attributes('Main-Class': 'com.abc.gradle.hello.App',
            'Class-Path': configurations.default.collect { 'dependencies/' + 
            it.getName() }.join(' ')
    )
 }
 from {
     configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
 } with jar
  println "${outputJar} created"
} 
```

Gradle 构建命令
创建 fat jar：`gradle fatJar`
复制依赖项：`gradle copyDepends`
创建具有依赖项的可运行 jar：`gradle createJar`

更多细节可以在这里阅读：[https ://jafarmlp.medium.com/a-simple-java-project-with-gradle-2c323ae0e43d](https://jafarmlp.medium.com/a-simple-java-project-with-gradle-2c323ae0e43d)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-28T19:51:44.693

我可以使用 groovy 方法来处理它，`build.gradle`为 java、资源和测试创建所有源文件夹。然后我将它设置为在`gradle eclipse`任务之前运行。

```
eclipseClasspath.doFirst {
    initSourceFolders()
}

def initSourceFolders() {
    sourceSets*.java.srcDirs*.each { it.mkdirs() }
    sourceSets*.resources.srcDirs*.each { it.mkdirs() }
} 
```

现在我们可以只用一个命令设置一个新的 gradle Java EE 项目来 Eclipse。我把这个例子放在[GitHub](https://github.com/edysegura/gradle-javaweb)

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2016-12-13T13:40:08.070

我刚刚尝试使用 Eclipse Neon.1 和 Gradle：

```
------------------------------------------------------------
Gradle 3.2.1
------------------------------------------------------------

Build time:   2016-11-22 15:19:54 UTC
Revision:     83b485b914fd4f335ad0e66af9d14aad458d2cc5

Groovy:       2.4.7
Ant:          Apache Ant(TM) version 1.9.6 compiled on June 29 2015
JVM:          1.8.0_112 (Oracle Corporation 25.112-b15)
OS:           Windows 10 10.0 amd64 
```

[![在此处输入图像描述](../Images/0afbd1affdd906964d12e2731b1045f9.png)](https://i.stack.imgur.com/VwcoL.png)

在带有 Java 版本的 Windows 10 上：

```
C:\FDriveKambiz\repo\gradle-gen-project>java -version
java version "1.8.0_112"
Java(TM) SE Runtime Environment (build 1.8.0_112-b15)
Java HotSpot(TM) 64-Bit Server VM (build 25.112-b15, mixed mode) 
```

正如您在 Eclipse 中看到的那样，它失败得很惨。但是在 Intellij 中像翱翔的鹰一样航行......我不知道 Intellij，并且是 eclipse 的忠实粉丝，但是普通的家伙，这意味着对于最简单的用例没有一个 teste Neon.1......导入一个 gradle 项目。这还不够好。我正在为 gradle 项目切换到 Intellij：

[![在此处输入图像描述](../Images/9d49007c166c45ba05383f5baee0e617.png)](https://i.stack.imgur.com/j9LGy.png)

# scala - Scala 代码正在编译但返回运行时错误。

> ID：14017367
> 
> 赞同：0
> 
> 时间：2012-12-24T05:18:08.177
> 
> 标签：scala, runtime, traits

下面的代码编译正常，但在运行时返回错误。我认为我对 Scala 中的 Traits 有一些误解。在应用程序中调用 addItem 函数时会出现问题。我只是好奇我做错了什么。错误消息跟在代码后面。

```
trait Heap {
  def addItem(item: Int): Heap
}

case class heap(n: Int,
                l: Heap,
                r: Heap ) extends Heap {
  val node: Int = n
  val left: Heap = l
  val right: Heap = r

  def addItem(item: Int): Heap = {
    if (item < node) {
      new heap(item,r.addItem(node),l)
    } else {
      new heap(node,l,r.addItem(node))
    }
  }
}

case class leaf extends Heap {
  def addItem(item: Int): Heap = {
    new heap(item,new leaf,new leaf)
  }
} 

object test extends Application {
  var a = new leaf
  a.addItem(5);
}

Exception in thread "main" java.lang.NoClassDefFoundError: Heap (wrong name: heap) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:31:17.583

It turns out that something is wrong about my naming convention for Heap, the trait, and heap, the class. I think the JVM is compiling the names together in such a way that the trait Heap is taking the same name as the class heap. Changing the name from heap to h solved problem.

# mysql - WHERE 值不在（子查询）

> ID：14017369
> 
> 赞同：13
> 
> 时间：2012-12-24T05:18:16.787
> 
> 标签：mysql, subquery

我一直在努力解决这个问题。我有两张桌子。一张带有优惠券和发票号码。一种带有发票编号和客户姓名。

我需要获取没有使用给定优惠券的客户。

以下是表格：

促销表：

```
Promotions
Invoice | Coupon
----------------
1       | couponA
2       | couponB
3       | couponB 
```

订单表：

```
Orders
Invoice | Customer
------------------
1       | Jack
2       | Jack
3       | Jill 
```

所以杰克使用了优惠券 A 和 B。而吉尔只使用了优惠券 B。

如果我的查询是选择没有使用优惠券 A 的客户，我应该得到 Jill。

这行得通，但它似乎笨拙和缓慢。有没有更好的办法？

```
SELECT Customer 
FROM Promotions INNER JOIN Orders
ON Promotions.Invoice = Orders.Invoice
WHERE Customer NOT IN(
    SELECT Customer 
    FROM Promotions INNER JOIN Orders
    ON Promotions.Invoice = Orders.Invoice
    WHERE Coupon = couponA)
GROUP BY Customer 
```

感谢您的关注！

编辑：这是一个 SQLFiddle 架构 [http://sqlfiddle.com/#!2/21d31/6](http://sqlfiddle.com/#!2/21d31/6)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T07:30:03.450

**更新：**当它对我们来说很容易做时，我们应该使用更喜欢使用连接以获得更好的性能。[加入与子查询](https://stackoverflow.com/questions/2577174/join-vs-sub-query#answer-2577188)

### [Sql 小提琴](http://sqlfiddle.com/#!9/31ec8b/6)

```
Select distinct Customer from orders o
join 
(
  SELECT distinct Customer as changedname FROM Orders o2 
  join
  (
     Select distinct invoice from Promotions where Coupon='couponA'
  ) t3
  on o2.invoice = t3.invoice      
) t2
on o.customer != t2.changedname; 
```

注意：我为 t3 更改了列名 customer，因为两个连接表必须具有不同的列名

**解释：**

当您拥有大数据时，使用内部或子查询会很昂贵。改为使用连接，让我们学习将子查询转换为连接

使用**子查询**我们有：

```
Select distinct Customer from orders where customer not in 
(SELECT distinct Customer FROM Orders where invoice in
(Select distinct invoice from Promotions where Coupon='couponA')); 
```

**将子查询转换为加入**

第一步：

```
Select distinct Customer from orders o
join 
(
  SELECT distinct Customer as changedname FROM Orders where invoice in
  (Select distinct invoice from Promotions where Coupon='couponA')
) t2
on o.customer != t2.changedname; 
```

第二步：

```
Select distinct Customer from orders o
join 
(
  SELECT distinct Customer as changedname FROM Orders o2 where invoice 
  join
  (
     Select distinct invoice from Promotions where Coupon='couponA'
  ) t3
  on o2.invoice = t3.invoice      
) t2
on o.customer != t2.changedname; 
```

就是这样，对于有很多行的表来说要快得多

**原答案：**

使用`not in`. 看一看。

```
Select distinct Customer from orders where customer not in 
(SELECT distinct Customer FROM Orders where invoice in
(Select distinct invoice from Promotions where Coupon='couponA')); 
```

**编辑**我添加了 distinct 以使查询更快

### [SQL小提琴](http://sqlfiddle.com/#!9/31ec8b/1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T06:56:25.703

```
 SELECT DISTINCT o2.customer FROM ORDER o2 
LEFT JOIN (promotions p1 
    JOIN Orders o1 ON p1.cuopon = 'CuoponA' AND p1.invoice = o1.invoice ) p3 
    ON o2.customer = p3.customer 
WHERE p3.customer IS NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T05:30:07.693

Try this query instead:

```
SELECT DISTINCT Customer
FROM Orders o1
WHERE NOT EXISTS (
    SELECT 1 
    FROM Orders o2
    INNER JOIN Promotions ON Promotions.Invoice = o2.Invoice
    WHERE o1.Customer = o2.Customer AND Coupon = 'couponB') 
```

The idea is to get rid of the `GROUP BY` by removing a join in the top part of the query, and also eliminate the `NOT IN` by making a *coordinated subquery*.

[Here is a link to sqlfiddle.](http://sqlfiddle.com/#!2/21d31/35)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T05:44:32.783

用正确的连接试试这个

```
SELECT Customer, Coupon
FROM Promotions 
RIGHT JOIN Orders ON Promotions.Invoice = Orders.Invoice
    AND Coupon = 'couponA'
GROUP BY Customer
HAVING Coupon IS NULL 
```

# grails - Grails 脚手架模板

> ID：14017370
> 
> 赞同：0
> 
> 时间：2012-12-24T05:18:53.083
> 
> 标签：grails

我将 Grails 1.37 与 Netbeans 一起使用。当我生成脚手架时，如何只在 GSP 中生成表单，而不是 grails 徽标等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T22:21:13.243

利用`grails generate-views yourpackage.yourDomainClass`生成视图

利用`grails generate-controller yourpackage.yourDomainClass`生成具有完整 crud 操作的控制器

利用`grails generate-all yourpackage.yourDomainClass`执行上述两个命令

如果要自定义脚手架引擎，请查看`src/templates/scaffolding`目录

愿这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:16:49.953

grails 生成视图 com.package.Domain

# jquery - 表单确认 JQuery .submit()

> ID：14017371
> 
> 赞同：0
> 
> 时间：2012-12-24T05:18:57.853
> 
> 标签：jquery, forms, jquery-mobile, submit

我有一个需要使用摘要身份验证验证的表单。我仍在进行身份验证，但我已经布置了基本的 HTML 表单。

```
<form method="post" id="loginForm" class="validate">

            <div data-role="fieldcontain">
                <label for="password">Email:</label> 
                <input class="required email" type="text" name="username" id="username" placeholder="username@target.com">
            </div>

            <div data-role="fieldcontain"> 
                <label for="password">Password:</label>
                <input class="required" type="password" name="password" id="password" placeholder="password">
            </div>

            <input type="submit" value="Login">

        </form> 
```

我还有一个名为 digest_auth.js 的外部 js 文件，方法是

```
$('#loginForm').submit(function() {
  alert('click');   
  username = $('#username').value();
  password = $('#password').value();
  realm = tokens['realm'];
  nonce = tokens['nonce'];
  qop = tokens['qop'];
  alert('submitted');
  ha1 = bcrypt(username + ":" + realm + ":" + password);
  ha2 = bcrypt("GET:" + "http://localhost:8090/web/login");
  response = bcrypt(ha1 + ":" + nonce + ":" + nc + ":" + cnonce + ":" + qop + ":" ha2);

  $.ajax(
    type: 'GET', // maybe POST?
    url: url,
    complete: function(xhr, status) {
      if (status == 200) {
        // success. save the nonce and nc in the local storage.
        // whenever you send a request to the server, use the nonce
        // and nc
          alert('Success');
      }
      else {
        // failure, try again
          alert('Failure');
      }
    }
  )
}); 
```

但是， .submit 没有被调用。我在开头添加了 alert() 但我什么也没得到。我确实使用链接外部

```
<script type="text/javascript" src="digest_auth.js"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T05:23:03.037

问题在于您的 ajax 请求：

错误：

1.  响应的串联中缺少“+”
2.  ajax 属性应该在大括号内

用这个：

```
$(document).ready(function(){
  $('#loginForm').submit(function() {
      alert('click');   
      username = $('#username').value();
      password = $('#password').value();
      realm = tokens['realm'];
      nonce = tokens['nonce'];
      qop = tokens['qop'];
      alert('submitted');
      ha1 = bcrypt(username + ":" + realm + ":" + password);
      ha2 = bcrypt("GET:" + "http://localhost:8090/web/login");
      response = bcrypt(ha1 + ":" + nonce + ":" + nc + ":" + cnonce + ":" + qop + ":" + ha2);

      $.ajax({
        type: 'GET', // maybe POST?
        url: url,
        complete: function(xhr, status) {
          if (status == 200) {
            // success. save the nonce and nc in the local storage.
            // whenever you send a request to the server, use the nonce
            // and nc
              alert('Success');
          }
          else {
            // failure, try again
              alert('Failure');
          }
        }
      })
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T05:24:14.063

确保`$('#loginForm')`在页面中存在表单元素之后执行。

如果该脚本运行并且找不到表单，则提交将触发但不会触发您的函数。

它在这里工作：http: [//jsfiddle.net/MxgEf/7/](http://jsfiddle.net/MxgEf/7/) ​​​​</p>

# ruby-on-rails - Accept_nested_attributes_for 和 has_many 多态

> ID：14017374
> 
> 赞同：2
> 
> 时间：2012-12-24T05:19:03.183
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我使用回形针上传附加到学生课程作业的多个文件，但我失败了。

**模型**

```
class StudentCourseAssignment < ActiveRecord::Base
    attr_accessible :score, :comment, :finish_status,:attachments
    accepts_nested_attributes_for :attachments
    belongs_to :assignment
    belongs_to :user
    has_many :attachments ,:as => :attachmentable,:dependent => :destroy
end

class Attachment < ActiveRecord::Base
    attr_accessible :user_upload 
    belongs_to :attachmentable , :polymorphic => true
    has_attached_file :user_upload
end 
```

**控制器**

```
**new**

    @sca = StudentCourseAssignment.new 
    @sca.attachments.build
    @sca.attachments.build

**create**

    @sca = StudentCourseAssignment.new(params[:student_course_assignment])
    @assignment = Assignment.find(params[:assignment_id])
    @sca.user = current_user
    @sca.assignment = @assignment
    if @sca.save
        flash[:alert] = "success"
        redirect_to course_years_path
    else
        flash[:alert] = "fail"
        redirect_to course_years_path
    end 
```

** 看法**

```
<%= form_for @sca, :url => assignment_student_course_assignments_path(@assignment),
:html => { :id => 'student-assignment-form', :multipart => true } do |f| %>
file:
<%= f.fields_for :attachments do |a_f| %>
<%= a_f.file_field :user_upload %>
<%= submit_tag "create" %>
<% end%>
<% end %> 
```

**错误的**

```
No association found for name `attachments'. Has it been defined yet? 
```

如果去掉accepts_nested_attributes_for :attachments，还是不对

```
Attachment(#70201401779680) expected, got Array(#70201383294620) 
```

**希望你的帮助！谢谢！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:46:47.233

改变

从：

```
attr_accessible :score, :comment, :finish_status,:attachments 
```

至：

```
attr_accessible :score, :comment, :finish_status,:attachments_attributes 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-21T05:10:35.200

我意识到这是一个老问题，但我认为你需要搬家

`accepts_nested_attributes_for :attachments`

之后出现

`has_many :attachments, :as => :attachmentable,:dependent => :destroy`

我曾经在一个项目中遇到过这个问题；很确定它归结为`accepts_nested_attributes_for`期望关系在调用之前已经被声明。

# asp.net - 弹出窗口中的 Asp.net 进度条

> ID：14017375
> 
> 赞同：0
> 
> 时间：2012-12-24T05:19:37.327
> 
> 标签：asp.net, popup, progress-bar

我想在弹出窗口中显示**progrssbar 。**我参考[这个](http://weblogs.asp.net/guillermo/archive/2008/02/24/ajax-how-to-create-a-quot-processing-quot-modal-window-using-updateprogress-and-modalpopup-asp-net-ajax-controls.aspx)网站在弹出窗口中显示进度条。我正在从 Gmail、Yahoo、Hotmail 导入联系人。当我导入我的联系人并选择联系人并单击邀请按钮时，我的弹出窗口会显示。但问题是我的进度条，即**loading.gif**没有循环。谁能告诉我为什么我会遇到这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:41:17.927

您是否使用更新面板？，因为它仅适用于更新面板。

# linux - linux中的设备驱动程序

> ID：14017376
> 
> 赞同：-6
> 
> 时间：2012-12-24T05:19:49.037
> 
> 标签：linux

嗨朋友们，我想从基础知识了解**linux 中的设备驱动程序，**所以请您推荐任何从基础知识解释它的书。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T05:26:09.780

[http://lwn.net/Kernel/LDD3/](http://lwn.net/Kernel/LDD3/)这是Linux 设备驱动程序编程的权威书籍。也就是说，它不涵盖某些专业领域，例如编写 ALSA 驱动程序。为此，请找到 ALSA 教程：[http ://www.alsa-project.org/~tiwai/writing-an-alsa-driver/](http://www.alsa-project.org/~tiwai/writing-an-alsa-driver/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T09:50:02.200

基本 Linux 设备驱动程序 - Sreekrishnan Venkateswaran

Linux 设备驱动程序，第三版，作者：Jonathan Corbet、Alessandro Rubini 和 Greg Kroah-Hartman

请注意，Linux Device Drivers, 3rd Edition 有点过时了。本书中的示例程序不经过修改就无法运行。但是，它很好地解释了基础知识。Essential Linux Device Drivers 是一本最新的书，用简单的术语解释了所有的概念。最好从 Essential Linux Device Drivers 中的前几章（涉及通用概念）开始，然后阅读 Linux Device Drivers, 3rd Edition。

# java - Eclipse PDE 中的日志记录策略

> ID：14017378
> 
> 赞同：4
> 
> 时间：2012-12-24T05:20:07.743
> 
> 标签：java, logging, eclipse-plugin, eclipse-rcp, eclipse-pde

我正在编写一个 Eclipse 3.7 插件。我是 Eclipse PDE 的新手，但不是 JAVA 的新手。我试图了解应该使用的日志记录策略。我的问题是——

1.  我应该如何从我的插件中进行日志记录？我找到了一些资源（[Eclipse PDE Logging](https://stackoverflow.com/questions/8122787/eclipse-pde-logging)），但我仍然不太清楚应该如何去做。一个代码片段会很有帮助。

2.  这些文件将放在哪里？

**更新：**我做了更多的研究，发现了[状态管理器](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/statushandlers/StatusManager.html)。但仍不清楚它应该如何使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T08:52:57.093

每个插件都有[自己的记录器](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/runtime/Plugin.html)已经可用。它的用法在 Eclipse 网站上的一个[简短的常见问题页面中进行了描述。](http://wiki.eclipse.org/FAQ_How_do_I_use_the_platform_logging_facility%3F)使用该记录器的主要好处是您的插件在 Eclipse 的[错误日志视图](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.user/reference/ref-error_log_view.htm)中显示其日志条目，就像其他插件一样。如果您想将插件部署为 Eclipse 应用程序，那么您可以将错误日志视图捆绑在一个单独的可选功能中，以便您的用户可以选择在应用程序中是否使用此日志视图。

还有另一个[关于所有可用日志文件的常见问题解答](http://wiki.eclipse.org/FAQ_Where_can_I_find_that_elusive_.log_file%3F)。但是如果您使用错误日志视图，您通常不需要直接搜索或操作日志文件。而且对于最终用户来说，直接在应用程序中查看错误可能更方便，并且可以直接从 UI 导出日志。

# c++ - 如何在 OpenGL 3.2 中绘制全屏四边形？

> ID：14017380
> 
> 赞同：1
> 
> 时间：2012-12-24T05:20:16.303
> 
> 标签：c++, opengl

我在尝试让 OpenGL 3.2 工作时遇到问题，在花了几个小时试图找出问题所在后，我意识到它不支持 glBegin。我在引擎中使用该命令大约 50-100 次来绘制全屏四边形和 GUI 元素。那么使用 OpenGL 3.2 绘制矩形的简单方法是什么？我真的必须创建一个顶点缓冲区、片段着色器和顶点着色器来做这么简单的事情吗？！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T05:28:18.767

> 我真的必须创建一个顶点缓冲区、片段着色器和顶点着色器来做这么简单的事情吗？！

是的，核心配置文件中没有免费赠品。

# jquery - 在按键事件上打开 jquery fancybox

> ID：14017386
> 
> 赞同：0
> 
> 时间：2012-12-24T05:20:59.350
> 
> 标签：jquery, fancybox

有人知道如何在按键上打开/启动灯箱（fancybox）而不是点击缩略图吗？例如，如果您按空格键，灯箱会打开吗？

我对jquery不太熟悉，所以如果答案似乎很明显，请原谅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:56:12.750

例如，您可以使用以下脚本打开按字母“ **F** ”的 fancybox：

```
$(document).keyup(function(event) {
    // open fancybox pressing "F"
    if (event.keyCode === 70) {
        $.fancybox({
            href: "http://fancyapps.com/fancybox/demo/1_b.jpg"
        });
    }
}); //keyup 
```

...~~我看到的问题是您无法`href`动态传递（如链接中的），但您必须将其硬编码到脚本中~~* [参见编辑]。

查看**[演示](http://jsfiddle.net/R9nPu/)**（在按“F”之前，您必须关注“结果”窗口）

为了知道每个返回的密钥号`keyup`，您可以添加

```
console.log(event.keyCode); 
```

...到同一个脚本（在我的演示中被注释掉了）

**注意**：这是用 fancybox v2.1.3 测试的

* * *

**编辑**（2014 年 3 月 11 日）：您实际上可以将 fancybox 绑定到常规链接并在*keypress*`click`之后触发该元素上的a ，因此拥有以下 html：

 *```
<a class="fancybox" href="image.jpg">open fancybox</a> 
```

你可以这样做：

```
$(document).keyup(function (event) {
    // console.log(event.keyCode);
    // open fancybox pressing "F"
    if (event.keyCode === 70) {
        $(".fancybox").eq(0).trigger("click");
    };
}).ready(function () {
    $(".fancybox").fancybox();
}); 
```

这将触发fancybox，或者按“F”或点击链接。

见分叉`[JSFIDDLE](http://jsfiddle.net/T52aB/1/)`*

# java - 如何使用 UnitilsJUnit4 模拟静态方法？

> ID：14017394
> 
> 赞同：0
> 
> 时间：2012-12-24T05:23:09.243
> 
> 标签：java, mocking, static-methods, unitils

我`getAllCustomers`在`CustomerService`课堂上有方法。在这个方法中，我从`CustomerDao`类中调用另一个静态方法。现在，当我`getAllCustomers`在`customerService`类中为方法编写 junit 时，我想在其中模拟对`CustomerDao`ie的静态方法的调用`getAllCustomers`。`getAllCustomers`这是类内部 方法的简短代码片段`CustomerService`。**是否可以使用 unitils 模拟静态方法调用？**

```
Public static List<CustomerDate> getAllCustomers()
{
//some operations
List<CustomerDate> customers=CustomerDao.getAllCustomers();// static method inside CustomerDao
//some operations
} 
```

上面的代码只是我试图提出的一个例子。请避免讨论为什么这些方法被设计为静态方法。那是一个单独的故事。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T05:48:31.297

我怀疑它是否可以用unitils实现。但请考虑改用[PowerMock](http://code.google.com/p/powermock/wiki/MockStatic)，它似乎能够处理你需要的东西。它可以模拟静态方法、私有方法等（参考：[PowerMock](http://code.google.com/p/powermock/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:08:50.700

这将是一个问题：

*   设置模拟
*   调用模拟并期望返回一些数据
*   根据您的数据验证通话的最终结果

所以，不用多说关于静态调用，这里是您可以在 PowerMock 中设置它的方式：

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(CustomerDao.class)
public class CustomerTest {

    @Test
    public void testCustomerDao() {
        PowerMock.mockStatic(CustomerDao.class);
        List<CustomerDate> expected = new ArrayList<CustomerDate>();
        // place a given data value into your list to be asserted on later
        expect(CustomerDao.getAllCustomers()).andReturn(expected);
        replay(CustomerDao.class);
        // call your method from here
        verify(CustomerDao.class);
        // assert expected results here
    }
} 
```

# android - 无法刷新 ViewPager 内容

> ID：14017402
> 
> 赞同：0
> 
> 时间：2012-12-24T05:24:37.030
> 
> 标签：android, android-fragments, android-viewpager

这段代码非常简单。我有一个 ViewPager，里面有几个 Fragment。和一个“添加新寻呼机”按钮将新寻呼机添加到 ViewPager 的第一个位置。

这是我的代码

```
public class TestPagerActivity extends SherlockFragmentActivity {

    private ArrayList<String> mData = new ArrayList<String>();
    private ViewPager mPager;
    private TestPagerAdapter mAdapter;

    @Override
    protected void onCreate(Bundle b) {
        // TODO Auto-generated method stub
        super.onCreate(b);
        setContentView(R.layout.testpager);

        mData.add("Looking");
        mData.add("into");
        mData.add("your");
        mData.add("dark");
        mData.add("blue");
        mData.add("eyes");
        mPager = (ViewPager) findViewById(R.id.pager);
        mAdapter = new TestPagerAdapter(getSupportFragmentManager(), mData);
        mPager.setAdapter(mAdapter);
    }

    public void onAddNewPagerClick(View v) {
        mData.add(0, "When");
        mAdapter.notifyDataSetChanged();
        mPager.invalidate();
    }

    public static class TestPagerAdapter extends FragmentStatePagerAdapter {

        private List<String> mData;

        public TestPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        public TestPagerAdapter(FragmentManager fm, List<String> data) {
            super(fm);
            mData = data;
        }

        public void updateAdapter(List<String> data) {
            mData = data;
            notifyDataSetChanged();
        }

        @Override
        public Fragment getItem(int position) {
            return TestFragment.newInstance(mData.get(position), position + "/" + mData.size());
        }

        @Override
        public int getCount() {
            return mData.size();
        }

    }

    public static class TestFragment extends SherlockFragment {
        private static final String KEY_CONTENT = "TestFragment:Content";
        private static final String KEY_POSITION = "TestFragment:Position";

        public static TestFragment newInstance(String content, String position) {
            TestFragment fragment = new TestFragment();

            StringBuilder builder = new StringBuilder();
            builder.append("Page ").append(position).append("\n");
            for (int i = 0; i < 20; i++) {
                builder.append(content).append(" ");
            }
            builder.deleteCharAt(builder.length() - 1);
            fragment.mContent = builder.toString();

            return fragment;
        }

        private String mContent = "???";
        private String mPosition = "x/y";

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            if ((savedInstanceState != null) && savedInstanceState.containsKey(KEY_CONTENT)) {
                mContent = savedInstanceState.getString(KEY_CONTENT);
                mPosition = savedInstanceState.getString(KEY_POSITION);
            }
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            TextView text = new TextView(getActivity());
            text.setGravity(Gravity.CENTER);
            text.setText(mContent);
            text.setTextSize(20 * getResources().getDisplayMetrics().density);
            text.setPadding(20, 20, 20, 20);

            LinearLayout layout = new LinearLayout(getActivity());
            layout.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
            layout.setGravity(Gravity.CENTER);
            layout.addView(text);

            return layout;
        }

        @Override
        public void onSaveInstanceState(Bundle outState) {
            super.onSaveInstanceState(outState);
            outState.putString(KEY_CONTENT, mContent);
            outState.putString(KEY_POSITION, mPosition);
        }
    }
} 
```

问题是：当我在添加新寻呼机后刷新 ViewPager 时，其内容无法正确显示。一开始我有6个页面，但是添加一个新页面后，这里仍然显示6个页面，而我预计有7个页面。

谁能告诉我这里有什么问题？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T17:32:24.770

突出的第一件事是您在页面列表的前面插入新项目，但您还没有实现 PagerAdapter 方法[`getItemPosition(Object)`](http://developer.android.com/reference/android/support/v4/view/PagerAdapter.html#getItemPosition%28java.lang.Object%29)来告诉 ViewPager 在数据集更改后页面移动到了哪里。正如该方法的文档所述，默认实现报告页面永远不会改变位置。如果您的适配器未正确实现此方法，则具有更改位置的页面的 ViewPager 将无法正常运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-27T06:11:33.793

**避免使用 FragmentPagerAdapter 并使用 FragmentStatePagerAdapter。**

我希望它也对你有用。

# php - Paypal 立即购买按钮如何在 ipn 监听器中捕获价格/选项下拉数据

> ID：14017403
> 
> 赞同：2
> 
> 时间：2012-12-24T05:24:43.253
> 
> 标签：php, html, paypal, paypal-ipn

我有一个带有下拉菜单的 paypal pay now 按钮，用户可以在其中选择 2 个不同的事件。

如何捕获下拉列表中选择的内容？我目前的表格不起作用。

```
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="TFMANJVCMFZX4">
<input type="hidden" name="option_name1" value="Dinner/Show">
<input type="hidden" name="notify_url" value="http://mysite.com/ipn">
<label>Dinner/Show</label>
<select name="os0" id="paypalDropdown">
    <option value="Meal + Event">Meal + Event $15.00 USD</option>
    <option value="Event Only">Event Only $10.00 USD</option>
</select>
<input type="hidden" name="currency_code" value="USD">
<input id="paypalButton" type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1"> 
```

更具体地说，我正在使用这个库 - [https://github.com/orderly/codeigniter-paypal-ipn](https://github.com/orderly/codeigniter-paypal-ipn)我正在记录变量并且所有的`option_name`和`option_selection`变量都是空白的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:27:18.513

要使用字段**os0**，您还必须使用字段**on0**

在哪里：

> **on0** = 第一个选项字段名称。如果省略，则不会将任何变量传回给您。

.

- 祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T05:29:42.963

onchange="myFunction(this)"

这是整个对象，在 JavaScript 中可以这样访问

```
function myFunction(obj) {
    var dropDownValue = obj.value;
} 
```

编辑：糟糕，只需阅读您的代码。可以像这样在 PHP 中访问选择值 :)

```
 echo $_POST['os0']; // the select fields name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T02:51:50.317

看起来您正在尝试使用托管的贝宝按钮，但尚未在您的个人资料中定义任何配置。

您可能会收到此错误消息：“由于卖家网站出现问题，PayPal 无法处理此交易”

无需在上面的表单中捕获值，因为这是通过 paypal 帐户上的配置来处理的，如下所示：

1.  登录到您的贝宝帐户
2.  转到个人资料-> 销售偏好-> 我保存的按钮
3.  编辑示例按钮（添加带有价格和选项的下拉菜单，例如 Meal + Event $15.00 USD、notify_url 等）
4.  保存更改
5.  选择自动生成的表单代码，无需任何更改即可使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T05:39:57.133

如果您有 IPN，那么 PayPal 将调用您为这一刻准备的 URL 并在付款后，paypal 将发送您需要的所有数据。从地址和货币到他购买的物品的名称和价格。所以你可以在那个时候得到它们。
否则，您必须编写一个 javascript 来捕获所选值并通过 ajax 将其发送到其他地方...

# unix - 在记事本或 bbedit 或使用 unix 命令 tr 中用 ',' 替换换行符？

> ID：14017407
> 
> 赞同：3
> 
> 时间：2012-12-24T05:25:26.657
> 
> 标签：unix, notepad, tr, bbedit

我必须用“，”替换换行符，以便在某些 oracle 命令中使用，但在单个命令中使用。我不知道该怎么做。

输入：

```
R1
R2
R3
R4 
```

所需输出：

```
'R1','R2','R3','R4' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T05:44:51.427

使用 sed：

```
 sed -n '1h;1!H;${ g; s/\n/,/g; s/\([^,]*\)/'\''\1'\''/gp}' input 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T06:00:28.807

这是一种使用方法`sed`：

```
sed ":a;N;\$!ba;s/\n/','/g;s/^\|$/'/g" file 
```

结果：

```
'R1','R2','R3','R4' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T14:17:12.470

在 BBedit 中，您可以使用类似这样的 grep 进行查找：

```
(R[0-9]+)\r 
```

并替换：

```
'\1', 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T05:33:38.897

使用`tr`：

```
cat data.txt | tr '\n' ',' 
```

如果您需要引号，您可以通过管道发送到`sed`：

```
cat data.txt | tr '\n' ',' | sed "s/,/','/g" 
```

......这让你非常接近：

```
R1','R2','R3','R4',' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-24T13:14:20.110

替换换行符的要求与您的示例输出不匹配。要将换行符替换为`,`，您可以这样做`tr \\n ,`，但这会为您提供带有尾随逗号且没有尾随换行符的输出。此外，它没有引用您的输入。也许您正在寻找：

```
paste -s -d, input 
```

或者，如果您确实希望引用字段：

```
< input sed "s/^\|$/'/g" | paste -s -d, 
```

在上面，您的输入文件名为`input`. 最后的命令也可以写成：

```
sed "s/^\|$/'/g" input | paste -s -d, 
```

# c# - PropertyInfo.GetValue(object obj, object[] index) 抛出“目标”异常

> ID：14017411
> 
> 赞同：1
> 
> 时间：2012-12-24T05:25:43.490
> 
> 标签：c#, generics, propertyinfo

我需要一个具有扩展搜索机制的通用列表，所以我创建了一个`List<T>`带有附加索引器的通用列表（base）。因此，如果 T 是一个对象，则列表允许基于字段获取项目。这是示例代码

```
public class cStudent
    {
      public Int32 Age { get; set; }
      public String Name { get; set; }
    }

TestList<cStudent> l_objTestList = new TestList<cStudent>();
l_objTestList.Add(new cStudent { Age = 25, Name = "Pramodh" });
l_objTestList.Add(new cStudent { Age = 28, Name = "Sumodh" });
cStudent l_objDetails = l_objTestList["Name", "Pramodh"]; 
```

**还有我的通用清单**

```
class TestList<T> : List<T>
    {
          public T this[String p_strVariableName, String p_strVariableValue]
           {
             get
               {
                 for (Int32 l_nIndex = 0; l_nIndex < this.Count; l_nIndex++)
                  {
                       PropertyInfo l_objPropertyInfo = (typeof(T)).GetProperty(p_strVariableName);
                       object l_obj = l_objPropertyInfo.GetValue("Name", null);  // Wrong Statement -------> 1                
                  }
                return default(T);
               }
           }
    } 
```

但我无法获得该属性的值，它会抛出“目标异常”。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T05:29:46.447

这行代码需要是这样的......

```
object l_obj = l_objPropertyInfo.GetValue("Name", null); 
```

=>

```
object l_obj = l_objPropertyInfo.GetValue(this[l_nIndex], null); 
```

GetValue 函数的第一个参数是您要从中检索属性值的对象实例。

# sql - Oracle10g 引用运算符 q 不适用于 & 和 &&

> ID：14017412
> 
> 赞同：0
> 
> 时间：2012-12-24T05:25:49.313
> 
> 标签：sql, oracle10g

Oracle10g 支持引号操作符`q`。使用它，可以通过选择自定义引号分隔符来消除字符串文字中以前的附加引号字符串。但是，对于`&`和`&&`，这似乎效果不佳。如果我想输入`&`and该`&&`怎么办？

```
SQL> desc t
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------
 ID                                                 VARCHAR2(1000)

SQL> insert into t values(q'['test'''',;,,']');           

1 row created.

SQL> insert into t values(q'['test''&,,,;;;''']');

1 row created.

SQL> insert into t values(q'['test''&jj,,,,,'''']');  
Enter value for jj: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:31:04.813

利用

```
set define off 
```

在运行语句之前，以禁用 SQL*Plus 变量的评估。

有关详细信息，请参阅手册：[http ://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve040.htm#i2698854](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve040.htm#i2698854)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T08:34:08.867

您的问题是特定于 Oracle 客户端的。对于 sql+ ：您是否 - 设置扫描关闭？另外 - 你可以 SET ESCAPE '\' 然后*插入到 t values(q'['test \&jj,,,,,'''']');*

# python - 这是如何检查对象是否在模板中没有相关对象？

> ID：14017413
> 
> 赞同：0
> 
> 时间：2012-12-24T05:25:50.110
> 
> 标签：python, django

这是我目前必须检查作者是否在相关照片模型中有一些照片：

```
{% if author.photo_set.count > 0 %}
<h2>...</h2>
<div style="clear: both;"></div>
<div class="author_pic">
    {% for photo in author.photo_set.all %}
        <img src="..." />
    {% endfor %}
    <div style="clear: both;"></div>
</div>
<div style="clear: both;"></div>
{% endif %} 
```

这是正确的方法还是我可以以某种方式避免两个查询？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T05:35:06.850

您可以使用`with`标签来避免多次查询。

```
{% with author.photo_set.all as photos %}
    {% if photos %}
    <h2>...</h2>
    <div style="clear: both;"></div>
    <div class="author_pic">
        {% for photo in photos %}
            <img src="..." />
        {% endfor %}
        <div style="clear: both;"></div>
    </div>
    <div style="clear: both;"></div>
    {% endif %}
{% endwith %} 
```

您还`empty`可以在 for 循环中使用标签，但这可能不适用于您的示例。

[https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#for-empty](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#for-empty)

```
<ul>
{% for athlete in athlete_list %}
    <li>{{ athlete.name }}</li>
{% empty %}
    <li>Sorry, no athlete in this list!</li>
{% endfor %}
<ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T06:48:10.760

正如@pyrospade 建议的那样，您可以查看照片对象是否存在。或者您也可以检查 photo_set 列表的长度（检查[长度](https://docs.djangoproject.com/en/1.0/ref/templates/builtins/#length)模板标签），如下所示：

```
{% if author.photo_set.all|length > 0 %}
    <h2>...</h2>
    <div style="clear: both;"></div>
    <div class="author_pic">
        {% for photo in author.photo_set.all %}
            <img src="..." />
        {% endfor %}
        <div style="clear: both;"></div>
    </div>
    <div style="clear: both;"></div>
{% endif %} 
```

# function - 用于检查方法是否已定义的 VFP 函数

> ID：14017415
> 
> 赞同：1
> 
> 时间：2012-12-24T05:26:19.780
> 
> 标签：function, methods, visual-foxpro

我想通过 using 触发对象的方法`BINDEVENT()`，但该方法可能不存在。因此，我想在发布之前检查该方法是否已定义`BINDEVENT()`。

例如，在下面的代码片段中，如果`oHandler.myresize()`不存在，则会在`BINDEVENT()`.

```
PUBLIC oHandler
oHandler=NEWOBJECT("myhandler")
DO (_browser)
BINDEVENT(_SCREEN,"Resize",oHandler,"myresize")

DEFINE CLASS myhandler AS Session
   PROCEDURE myresize
      IF ISNULL(_obrowser) THEN
         UNBINDEVENTS(THIS)
      ELSE
         _obrowser.left = _SCREEN.Width - _obrowser.width
      ENDIF
   RETURN
ENDDEFINE 
```

因此，我想检查该方法是否`myresize()`存在。
为此目的是否有任何语言功能？[它与 php 函数function_exits()](http://php.net/manual/en/function.function-exists.php)或[method_exists()](http://php.net/manual/en/function.method-exists.php)非常相似。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:10:15.517

PEMSTATUS(VariableNameRepresentingTheObject, "MethodOrPropertyLookingFor", 5 )

如果存在于给定对象上，则返回 true 或 false。

# php - 处理大型 CSV 时内存泄漏

> ID：14017417
> 
> 赞同：0
> 
> 时间：2012-12-24T05:26:50.267
> 
> 标签：php, memory-leaks, spl

我有一个脚本，它下载一个大型产品 CSV 文件，处理其中的信息（下载图像并调整大小并准备其他数据以插入数据库），然后创建所有已处理项目的另一个 txt 文件。问题是它似乎在某处破坏记忆。我收到错误 500 返回，但日志显示内存使用量过多。我已经尽可能多地取消设置，并且我正在使用 SPL 迭代器，这些迭代器应该占用更少的内存，但我仍然可以使用脚本来完成执行并输入所有信息。任何人都可以在脚本中指出有助于防止内存泄漏的内容吗？

```
<?php

define('IN_PHPBB', true);
define('IN_SHOP', true);
$phpbb_root_path = './../forum/';
$root_path = './../';
$phpEx = substr(strrchr(__FILE__, '.'), 1);
include($phpbb_root_path.'common.'.$phpEx);

// Start session management
$user->session_begin();
$auth->acl($user->data);
$user->setup();

set_time_limit(172800);

define('THUMBNAIL_IMAGE_MAX_WIDTH', 150);
define('THUMBNAIL_IMAGE_MAX_HEIGHT', 150);

function generate_thumb($source_image_path, $thumbnail_image_path)
{
    list($source_image_width, $source_image_height, $source_image_type) = getimagesize($source_image_path);
    switch ($source_image_type) {
        case IMAGETYPE_GIF:
            $source_gd_image = imagecreatefromgif($source_image_path);
            break;
        case IMAGETYPE_JPEG:
            $source_gd_image = imagecreatefromjpeg($source_image_path);
            break;
        case IMAGETYPE_PNG:
            $source_gd_image = imagecreatefrompng($source_image_path);
            break;
    }
    if ($source_gd_image === false) {
        return false;
    }
    $source_aspect_ratio = $source_image_width / $source_image_height;
    $thumbnail_aspect_ratio = THUMBNAIL_IMAGE_MAX_WIDTH / THUMBNAIL_IMAGE_MAX_HEIGHT;
    if ($source_image_width <= THUMBNAIL_IMAGE_MAX_WIDTH && $source_image_height <= THUMBNAIL_IMAGE_MAX_HEIGHT) {
        $thumbnail_image_width = $source_image_width;
        $thumbnail_image_height = $source_image_height;
    } elseif ($thumbnail_aspect_ratio > $source_aspect_ratio) {
        $thumbnail_image_width = (int) (THUMBNAIL_IMAGE_MAX_HEIGHT * $source_aspect_ratio);
        $thumbnail_image_height = THUMBNAIL_IMAGE_MAX_HEIGHT;
    } else {
        $thumbnail_image_width = THUMBNAIL_IMAGE_MAX_WIDTH;
        $thumbnail_image_height = (int) (THUMBNAIL_IMAGE_MAX_WIDTH / $source_aspect_ratio);
    }
    $thumbnail_gd_image = imagecreatetruecolor($thumbnail_image_width, $thumbnail_image_height);
    imagecopyresampled($thumbnail_gd_image, $source_gd_image, 0, 0, 0, 0, $thumbnail_image_width, $thumbnail_image_height, $source_image_width, $source_image_height);
    imagejpeg($thumbnail_gd_image, $thumbnail_image_path, 90);
    imagedestroy($source_gd_image);
    imagedestroy($thumbnail_gd_image);
    unset($source_image_width, $source_image_height, $source_image_type, $source_gd_image, $source_aspect_ratio, $thumbnail_aspect_ratio, $thumbnail_image_width, $thumbnail_image_height, $thumbnail_gd_image);
    return true;
}

$regex = <<<'END'
/
  (
    (?: [\x00-\x7F]               # single-byte sequences   0xxxxxxx
    |   [\xC0-\xDF][\x80-\xBF]    # double-byte sequences   110xxxxx 10xxxxxx
    |   [\xE0-\xEF][\x80-\xBF]{2} # triple-byte sequences   1110xxxx 10xxxxxx * 2
    |   [\xF0-\xF7][\x80-\xBF]{3} # quadruple-byte sequence 11110xxx 10xxxxxx * 3 
    )+                            # ...one or more times
  )
| ( [\x80-\xBF] )                 # invalid byte in range 10000000 - 10111111
| ( [\xC0-\xFF] )                 # invalid byte in range 11000000 - 11111111
/x
END;
function utf8replacer($captures) {
  if ($captures[1] != "") {
    // Valid byte sequence. Return unmodified.
    return $captures[1];
  }
  elseif ($captures[2] != "") {
    // Invalid byte of the form 10xxxxxx.
    // Encode as 11000010 10xxxxxx.
    return "\xC2".$captures[2];
  }
  else {
    // Invalid byte of the form 11xxxxxx.
    // Encode as 11000011 10xxxxxx.
    return "\xC3".chr(ord($captures[3])-64);
  }
}

/* download file from source */
function getDataCSV(){
    $thefile = 'http://feeds.cnv.com/xxxxxxxxxxxxxx/Bronze/ELD-B01.csv';
    $file = 'ELD-B01.csv';

    $fh = fopen($file, "w");
    $rows = file($thefile);
    foreach($rows as $num => $row){
        if($num != 0){
            fwrite($fh, $row);
        }
    }
    fclose($fh);

    include("DataSource.php");

    $csv = new File_CSV_DataSource;
    if ($csv->load($file)) {
        $items = $csv->getHeaders();
        $csv->getColumn($items[2]);
        if ($csv->isSymmetric()) {
            $items = $csv->connect();
        } else {
            $items = $csv->getAsymmetricRows();
        }
        $items = $csv->getrawArray();
    }
    unset($csv);
    return $items;
}

$iter = new ArrayIterator(getDataCSV());

$google_list = array();
$google_list[] = array('id', 'title', 'description', 'google_product_category', 'product_type', 'link', 'image_link', 'condition', 'availability', 'price', 'brand', 'mpn');

$sql = "TRUNCATE TABLE ".SHOP_ITEMS;
$db->sql_query($sql);

foreach($iter as $item){
    if($item[12] != ""){
        $catName = str_replace(" ", "-", str_replace("and ", "", str_replace(",", "", str_replace("&amp;", "and", str_replace("-", "", $item[12])))));
    }else{
        $catName = str_replace(" ", "-", str_replace("and ", "", str_replace(",", "", str_replace("&amp;", "and", str_replace("-", "", $item[11])))));
    }

    $sql = 'SELECT cat_id FROM '.SHOP_CATS.' WHERE cat_clean = "'.$catName.'"';
    $result = $db->sql_query($sql);
    $row = $db->sql_fetchrow($result);
    $db->sql_freeresult($result);
    $catId = $row['cat_id'];

    $img = $item[9];
    $ext = substr($img, strrpos($img, '.') + 1);
    $image = 'images/products/'.$item[0].'.'.$ext;
    file_put_contents($root_path.$image, file_get_contents($img));
    $thumb = "images/products/thumbs/".$item[0]."_thumb.".$ext;

    generate_thumb($root_path.$image, $thumb);

    $itmRow = array(
        'item_name' => str_replace("/", "", preg_replace_callback($regex, "utf8replacer", html_entity_decode(html_entity_decode($item[1], ENT_QUOTES)))),
        'item_price' => $item[2],
        'item_description' => preg_replace_callback($regex, "utf8replacer", html_entity_decode(html_entity_decode($item[4], ENT_QUOTES))),
        'item_model' => $item[0],
        'item_manufacturer' => ($item[6] == '') ? 'No Info' : $item[6],
        'item_image' => $image,
        'item_cat' => ($catId) ? $catId : 0,
        'item_number' => $item[0],
        'item_vendor_code' => "ELD",
        'item_stock' => (strtolower($item[5]) == 'in stock') ? 1 : 0,
        'item_added' => strtotime($item[8]),
        'item_upc' => ($item[13] == '') ? 'No Info' : $item[13],
        'item_url' => '',
        'item_weight' => ($item[14] == '') ? 'No Info' : $item[14],
    );

    $sql = 'INSERT INTO '.SHOP_ITEMS.' '.$db->sql_build_array('INSERT', $itmRow);
    $db->sql_query($sql);
    $itmId = $db->sql_nextid();

    if(strstr($itmRow['item_name'], "-") == FALSE){
        $seo = urlencode(str_replace(" ", "-", $itmRow['item_name'])).".html";
    }else{
        $seo = urlencode(str_replace(" ", "_", $itmRow['item_name'])).".html";
    }
    if($item[5] == "oos"){
        $stock = "Out of Stock";
    }else{
        $stock = "In Stock";
    }
    $u_product = "https://therealmsofwickedry.com/product/".$seo;

    $google_list[] = array($itmId, $itmRow['item_name'], $itmRow['item_description'], 'Mature > Erotic', $catName, $u_product, "https://therealmsofwickedry.com/".$itmRow['item_image'], "new", $stock, $itmRow['item_price'], $itmRow['item_manufacturer'], $itmRow['item_model']);
    unset($catName, $catId, $img, $ext, $image, $thumb, $itmRow, $itmId, $seo, $stock, $u_product);
}

$line = '';

foreach($google_list as $list){
    $line .= implode("\t", $list);
    $line .= "\n";
}

$google = 'google_products.txt';
$h = fopen($google, "w");
fwrite($h, $line);
fclose($h);

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T07:45:17.623

Tanzeel 正确地假设文件正在被完整地读入内存。

这是逐行读取文件的方法。

```
$file_handle = fopen($file, 'r');
// You can ignore the file header line if you know the format.
$first_line  = fgetcsv($fh);

while ($single_line = fgetcsv($file_handle)) {
   print_r($single_line);
}
fclose($single_line); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T06:51:43.620

我不确定这是内存泄漏，它一定是“内存不足”异常。我的猜测是您的脚本在读取**大文件**时一定会死掉。阅读您的代码时，我发现以下内容：

```
$rows = file($thefile); 
```

此代码行会将**整个“大文件”读入****内存**中的数组。第一步应该是确保您的脚本不会因此而死亡。您可以尝试在 PHP 中使用`fopen`和`fread`函数来读取字节块并写入目标文件。理想情况下，这应该在阅读时处理占用内存资源。

要诊断是否`getDataCSV()`是真正的罪魁祸首，请修改以下行：

```
$iter = new ArrayIterator(getDataCSV()); 
```

在你的代码中：

```
$iter = new ArrayIterator(getDataCSV());
die('I died after getDataCSV. There is another culprit somewhere else causing the script to fail!'); 
```

如果您`die`在浏览器上收到消息，那么您应该开始查看代码中可能杀死脚本的其他地方。

我没有彻底阅读您的代码，但您还应该确保在本地处理文件时遵循相同的读取文件块的过程。例如，一旦您的文件被下载，您将对其进行处理以生成一些数据。您可以使用数组和循环来实现它，但由于要处理的数据很大，您仍然应该处理文件的部分块而不是将其全部转储到内存中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T08:20:50.850

事实证明，该`utf8replacer()`功能是问题的原因。感谢您的输入，虽然:)

# string - 如何解析单元格并从excel中删除选定的数据

> ID：14017421
> 
> 赞同：0
> 
> 时间：2012-12-24T05:28:16.817
> 
> 标签：string, excel, parsing

我在 excel 2010 中有几个单元格：

[![](../Images/8d2d22ed68329a7bfcccc2ea7ff2e32c.png)](https://i.stack.imgur.com/Le7xo.png)
[（来源：[gyazo.com](http://gyazo.com/04cc77e7ec88d5a69616a4031a59ff54.png?1356329967)）]

我正在努力完成一些事情，尽管它们实际上都是同一件事的所有变体。

在“支付的价格”和“返回的价格”中，我的值可以格式化为“# (type)”或“# (type)+# (type2) ...”形式的表达式。我正在尝试做的是将表达式从当前状态简化为数值。如果它只是第一种情况（“#（类型）”），我已经想出了如何做到这一点，但是我在做第二种情况时遇到了问题，因为解析在“”的第一个实例之后停止。下面我有我在 Numerical Paid 和 Numerical Returned 中使用的代码。ISNUMBER 类别只是为了显示哪些东西注册为数字，哪些不注册。

数字付费和数字返回代码：

```
=INT(IF(ISNUMBER(D2),D2,LEFT(D2,FIND(" ",D2,1)-1))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T21:51:32.040

我做了一些更多的谷歌搜索，发现有人已经编写了一个 VBA 函数来做到这一点。迷人的。

我已经链接了下面的来源。

[http://www.vbusers.com/code/codeget.asp?ThreadID=624&PostID=1](http://www.vbusers.com/code/codeget.asp?ThreadID=624&PostID=1)

我所要做的就是用“+-/*”替换“.”，这样它就可以处理所有操作。简单、优雅、实用。之后，我使用了此处发布的解决方案（作为我另一个问题的答案）：

[如何使一个单元格等于另一个单元格中表达式的值（Excel 2010）？](https://stackoverflow.com/questions/14015917/how-to-make-a-cell-equal-to-the-value-of-an-expression-in-another-cell-excel-20/14016621#14016621)

评估结果字符串。

谢谢大家。

# mysql - MySQL UNION、Order By 和 IN 语句多合一查询

> ID：14017424
> 
> 赞同：0
> 
> 时间：2012-12-24T05:28:46.627
> 
> 标签：mysql, database, search

好的，所以我正在为 MySQL 开发一个搜索功能，但遇到了一些我似乎无法解决的问题。我正在尝试制作一个脚本来搜索用户的朋友，并以更好的分数返回朋友。这是我到目前为止所拥有的：

```
SELECT id, first_name, last_name, image_id FROM users
WHERE id IN (
    SELECT receiver AS friend FROM friends WHERE initiator = :me AND status = :status        
     UNION
    SELECT initiator AS friend FROM friends WHERE receiver = :me AND status = :status
) ORDER BY score AND concat(first_name, ' ', last_name) LIKE '%test query%'; 
```

现在一切正常，直到我尝试按分数订购朋友。任何人都可以锻炼如何按分数排序朋友吗？如果您需要我澄清任何事情，请询问。

我有以下两张表。

**用户表**：![在此处输入图像描述](../Images/08f3c97d08fd848261d82265f2562bed.png)

**好友表：**![在此处输入图像描述](../Images/58c72219eddd61819b7a7d265ed59d1c.png)

**根据要求，这里是一些示例数据：**

例如，我有三个用户：

```
ID: 1, first_name: Michael, last_name: Sample
ID: 2, first_name: John, last_name: Citizen
ID: 3, first_name: Caitlin, last_name: Wired 
```

下面的第一个条目将通过显示 Michael 发起了一个好友请求并且 Caitlin（接收者）接受了它，从而使 Michael 和 Caitlin 成为朋友。（因此状态为 1）他们的基本分数是 10。第二个条目显示 John 也是 Caitlin 的朋友（由 Caitlin 发起），但分数更高。

```
ID: 10000, initiator: 1, receiver: 3, status: 1, score: 10
ID: 10001, initiator: 3, receiver: 2, status: 1, score: 20 
```

所以在这个示例数据的情况下。如果 Caitlin 是搜索她的朋友的用户，它应该显示 John 而不是 Michael。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T05:48:14.867

外部语句仅从`users`没有列的`score`列中选择。几乎任何使用子选择的语句都可以（并且应该）使用连接重写。在这种特殊情况下，它将允许`friends`在子句中使用所有字段。

```
SELECT u.id, u.first_name, u.last_name, u.image_id 
  FROM users AS u
    JOIN friends AS f 
      ON ... 
```

`WHERE`子选择的子句中使用的表达式成为连接条件。联合在某种意义上等同于`OR`（两者基本上都是[连词](http://en.wikipedia.org/wiki/Logical_conjunction)）。

```
 ON    (u.id = f.receiver AND f.initiator=:me AND status=:status)
         OR (u.id = f.initiator AND f.receiver=:me AND status=:status) 
```

声明的其余部分几乎保持原样。

```
 WHERE concat(first_name, ' ', last_name) LIKE '%test query%'
  ORDER BY score
; 
```

总之就是：

```
SELECT u.id, u.first_name, u.last_name, u.image_id 
  FROM users AS u
    JOIN friends AS f 
      ON    (u.id = f.receiver AND f.initiator=:me AND status=:status)
         OR (u.id = f.initiator AND f.receiver=:me AND status=:status)
  WHERE concat(first_name, ' ', last_name) LIKE '%test query%'
  ORDER BY score
; 
```

请注意，这是未经测试的，就在我的脑海中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T05:38:33.707

*   你没有选择分数
*   联合查询在外部查询中排序

例如，用于联合订购

```
SELECT T.* /*ANY COLUMN SET WITH(OUT) SCORE */ FROM(
 SELECT SCORE,.... FROM ANOTHERTABLE  WHERE .....
 UNION SELECT SCORE,.... FROM ANOTHERTABLE WHERE ...

) T
ORDER BY SCORE 
```

*更好的复述*

```
SELECT id, first_name, last_name, image_id FROM users
JOIN (
SELECT score,receiver AS friend FROM friends WHERE initiator = :me AND status = :status        
 UNION
SELECT score,initiator AS friend FROM friends WHERE receiver = :me AND status = :status
) t ON T.ID = users.id ORDER BY score AND concat(first_name, ' ', last_name) LIKE '%test query%'; 
```

# performance - CPU 负载高但 CPU 使用率和 RAM 使用率低

> ID：14017429
> 
> 赞同：0
> 
> 时间：2012-12-24T05:29:42.670
> 
> 标签：performance, nginx, webserver, php

我正在运行一个移动网站，以获取印度任何火车的实时运行状态。它是[http://www.spoturtrain.com](http://www.spoturtrain.com)。完整代码用 PHP 编写，Nginx 用作 webserver，php-fpm 用作应用程序服务器。所有 php 请求都被代理到应用服务器。在早上的交通高峰时段，系统负载飙升至 4，但 CPU% 和内存使用率很低。请看一下服务器顶部命令的快照。

![在此处输入图像描述](../Images/2d82a3d2428a44d38d8e378f84508f6a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T06:17:29.370

底部显示的 Th %CPU 是 per-thread，表示指定线程使用的一个 CPU 内核的百分比。CPU(s) 部分表示正在使用的可用 CPU 总量，因此可能有一个线程报告它正在使用 100% CPU，而只有 25%（4 核）或 12.5%（8 核）的总 CPU 周期被消耗。

[分析 Linux 上的线程 CPU 使用率](http://publib.boulder.ibm.com/infocenter/javasdk/tools/index.jsp?topic=/com.ibm.java.doc.igaa/_1vg0001475cb4a-1190e2e0f74-8000_1007.html)

您并没有真正提出问题，因此很难判断您是想要一些建议还是只是要求解释数字。正如@Charles 所说，在发生明显的性能下降之前，典型的“可接受”负载是每个 CPU 核心 1 个，但是对于在大多数 Web 服务器上运行 PHP 的情况，您可能（但在大多数情况下可能不会）开始注意到问题以上任何内容 1\. 你是否这样做在很大程度上取决于你的磁盘和网络 I/O。

我无法回答您的应用程序是否可以接受性能，但您可以查看此线程以了解更多地方，以了解让您的 Web 服务器处理请求的选项。

[什么是 PHP 中的线程安全或非线程安全](https://stackoverflow.com/questions/1623914/what-is-thread-safe-or-non-thread-safe-in-php)

您是否可以对此做任何事情取决于您的托管情况。

# jsf - Accessing FacesContext in servlet

> ID：14017441
> 
> 赞同：3
> 
> 时间：2012-12-24T05:31:04.050
> 
> 标签：jsf, servlets

I'm working on a JSF (v1.2) application. In my application I need a generic servlet which could serve any resource (PDF, Images, Excel, etc). My idea is to ask the caller to send the required information so that I can find out the correct delegator class using some configurations.

This delegator class will take care of serving the correct resource.

For example this is the request url

```
http://example.com/servlet?delegatorid=abcd 
```

My Servlet code is something like this.

```
protected void doGet(HttpServletRequest request, HttpServletResponse response){
 String delegatorID=request.getParameter("delegatorid");
//Get the configuration from Configuration table
configuration=getConfiguration(delegatorID);
//invoke the method of the delegator class based on this configuration
Object result=invokeMethod(configuration);
//write the response to the stream
} 
```

My question is what is the best way to do this in a JSF project?

1.  Should I completely avoid JSF dependency in this operation? I can find the delegator method and class and invoke it using reflection. Will there be any potential restrictions in future if I avoid JSF dependency. [One problem which I can think about is, in one of the code, I need to get the user information from session. I'm doing this through FacesContext. Since FacesContext is not available, it will fail, I should have another option to get the session.
2.  If I have to introduce JSF dependency, how do I get the FacesContext here? As far as I know, only the beans that are stored in application scope can be accessed here. I don't want to do that. Is there any other way of getting it?
3.  Instead of using a servlet, can I do this by invoking a ManagedBean method directly using the URL? This will give me FacesContext. I think I need to have a dummy JSP page for the managed bean method to get invoked.

Could you please let me your thoughts on this?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T11:27:30.093

( `FacesContext`and `ExternalContext`) 只是 , , , , etcetara 的一个外观，以及一些在[普通](http://en.wikipedia.org/wiki/Facade_pattern)的 vanilla servlet 中根本不需要的 JSF 细节。无非是 的抽象映射。`HttpServletRequest``HttpServletResponse``HttpSession``ServletContext``ExternalContext#getSessionMap()``HttpSession#get/setAttribute()`

在一个普通的 servlet 中，会话只能由`request.getSession()`应用程序以`getServletContext()`通常的方式使用。另请参阅此相关问题：[Get JSF managed bean by name in any Servlet related class](https://stackoverflow.com/questions/2633112/jsf-get-managed-bean-by-name)。

您也可以将需要由 JSF 和 Servlet 共享的代码重构为一个实用方法，该方法不依赖于`javax.faces.*`nor`javax.servlet.*`类（或最多仅依赖于类`javax.servlet.*`），最后让调用者各自传递必要的信息。

# javascript - Capturing only a portion of canvas with .todataurl Javascript/HTML5

> ID：14017442
> 
> 赞同：12
> 
> 时间：2012-12-24T05:31:06.617
> 
> 标签：javascript, html, canvas

I can capture a full canvas with .todataurl without a problem. But I do not see or know if there is anyway to capture only a portion of the canvas and save that to image.

e.i. Mr. Potatohead script draws hats, hands feet faces etc etc. mixed all over the canvas and you can drag and drop them onto the mr potato in the center of the canvas. Press a button save the image of mr potato looking all spiffy to jpg for you. Without all the extra hats/feet/faces in the image.

I have resigned myself to the fact that this is impossible based on everything I've read. But you folks have proven to be smarter than google (or atleast google in my hands) a few times so i am taking a shot.

Sorry no code to post this time... unless you want this:

```
var canvas  = document.getElementById("mrp");
var dataUrl = canvas.toDataURL();

window.open(dataUrl, "toDataURL() image", "width=800, height=600"); 
```

But that is just the example of dataurl i am working off of.. and it works outside of the fact it doesnt cap just the mr potato

My fallback is to pass the image to php and work with it there to cut out everything i dont want then pass it back.

**EDIT**

tmcw had a method for doing this. Not sure if its the way it SHOULD be done but it certainly works.

```
document.getElementById('grow').innerHTML="<canvas id='dtemp' ></canvas>";
var SecondaryCanvas  = document.getElementById("dtemp");
var SecondaryCanvas_Context = SecondaryCanvas.getContext ("2d");
SecondaryCanvas_Context.canvas.width = 600;
SecondaryCanvas_Context.canvas.height = 600;
var img = new Image();
img.src = MainCanvas.toDataURL('image/png');
SecondaryCanvas_Context.drawImage(img, -400, -300);
var du = SecondaryCanvas.toDataURL();
window.open(du, "toDataURL() image", "width=600, height=600");
document.getElementById('grow').innerHTML=""; 
```

grow is an empty span tag, SecondaryCanvas is a var created just for this SecondaryCanvas_Context is the getcontext of SecondaryCanvas img created just to store the .toDataURL() of the main canvas containing the Mr. PotatoHead drawImage with negative (-) offsets to move image of MainCanvas so that just the portion i want is showing. Then cap the new canvas that was just created and open a new window with the .png

on and if you get an error from the script saying security err 18 its because you forgot to rename imgTop to img with the rest of the variables you copy pasted and chrome doesnt like it when you try to save local content images like that.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-04-11T06:41:34.697

这是一个使用离屏画布的方法：

```
var canvas = document.createElement('canvas');
canvas.width = desiredWidth;
canvas.height = desiredHeight;
canvas.getContext('2d').drawImage(originalCanvas,x,y,w,h,0,0,desiredWidth, desiredHeight);
result = canvas.toDataURL() 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-24T05:34:41.093

Create a new Canvas object of a specific size, use drawImage to copy a specific part of your canvas to a specific area of the new one, and use toDataURL() on the new canvas.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-18T21:44:08.280

提取部分图像的更有效（并且可能更清洁）的方式：

```
// x,y are position in the original canvas you want to take part of the image
// desiredWidth,desiredHeight is the size of the image you want to have
// get raw image data
var imageContentRaw = originalCanvas.getContext('2d').getImageData(x,y,desiredWidth,desiredHeight);
// create new canvas
var canvas = document.createElement('canvas');
// with the correct size
canvas.width = desiredWidth;
canvas.height = desiredHeight;
// put there raw image data
// expected to be faster as tere are no scaling, etc
canvas.getContext('2d').putImageData(imageContentRaw, 0, 0);
// get image data (encoded as bas64)
result = canvas.toDataURL("image/jpeg", 1.0) 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2016-09-06T13:10:02.700

您可以为 toDataURL 函数提供 left、top、width 和 Height 参数。这是根据画布上的对象获取数据图像的代码。

```
mainObj = "your desired Object"; // for example canvas._objects[0];

var image   = canvas.toDataURL({ left: mainObj.left, top:mainObj.top,
    width: mainObj.width*mainObj.scaleX, height: mainObj.height*mainObj.scaleY}); 
```

# excel - Excel VBA How to delete rows based on the value of a cell in a different worksheet

> ID：14017444
> 
> 赞同：0
> 
> 时间：2012-12-24T05:31:26.053
> 
> 标签：excel, criteria, delete-row, vba

I am trying to create a macro that will automatically delete rows from a raw data file based on multiple criteria. I have been able to create a macro that will delete rows where certain columns have blank values, but I also need to delete rows that have a date that is equal or greater than a date contained in a specific cell in another worksheet. I have been all over the internet but have not found an explanation that addresses this particular case or one similar enough for me to figure it out. I am working on automating a number of other reports, and this is the final piece that I need to be able to finish several of them. Here is the code I am trying to use.

```
 Sub Deletedatesbeyondreportmonth()

 Application.ScreenUpdating = False

 With ActiveSheet

    .AutoFilterMode = False

    .Columns("E").AutoFilter Field:=1, Criteria1:=">= sheets("Sheet2").Range("C1")"

    .AutoFilter.Range.Offset(1, 0).EntireRow.Delete

    .AutoFilterMode = False

End With

End Sub 
```

If I replace the criteria `sheets("Sheet2").Range("C1")` with the actual value that is contained in the specified cell the macro works, however I need it to be able to run based off the value contained in that cell. I have played with some syntax variations and got different error messages, but haven't been able to figure it out. If I run this as is, it highlights the word Sheet2 on the criteria line and says:

> Compile Error expected: End of statement

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T05:35:54.083

这可能是嵌套的双引号。尝试使用双双引号，例如：

```
.Columns("E").AutoFilter Field:=1, Criteria1:=">= sheets(""Sheet2"").Range(""C1"")" 
```

[这里](http://social.msdn.microsoft.com/Forums/is/isvvba/thread/61239b43-f16c-456a-9479-e41c19c228da)的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:37:05.907

当您用引号封装 VBA 逻辑时，您实际上对字符串进行了硬编码，因此它将使用`Sheets("Sheet2").Range("C1")`过滤器中的文本而不是评估 Range 值。您需要使用以下内容：

```
.Columns("E").AutoFilter Field:=1, Criteria1:=">=" & Sheets("Sheet2").Range("C1") 
```

# html - How is the "default style" for HTML rendering defined?

> ID：14017446
> 
> 赞同：2
> 
> 时间：2012-12-24T05:32:03.653
> 
> 标签：html, browser

What goes behind the scene when a web browser is served with HTML content and it renders it?

For example, if the browser encounters, say, an `<h1>` tag, how does it first look for a style defined and if not goes for the default `<h1>` font style? Where/How is this default style defined?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T06:39:10.407

实现 CSS 以呈现 HTML 的浏览器使用用户代理默认样式表（在级联中具有低优先级，因此在您自己的 CSS 中覆盖它们很简单）。这就是他们在没有作者样式表的情况下获取各种元素的默认样式的方式。

一些供应商提供了他们的 UA 默认样式表的源代码，因此您可以查看它们并了解某些浏览器在默认情况下如何准确地设置某些元素的样式。[您可以在这个问题](https://stackoverflow.com/questions/6867254/browsers-default-css-for-html-elements)中找到一些链接。

大多数浏览器都提供用户样式表功能，您可以在其中编写适用于所有网站（或仅适用于特定网站，通过[`@document`规则](https://developer.mozilla.org/en-US/docs/CSS/@document)）的 CSS。这是`!important`常用且可接受使用的地方，因为作者样式（即来自网站本身的样式）通常会覆盖用户样式。您通常根本不想修改浏览器的用户代理样式表，即使它是开源的，除非您打算将其分叉成全新的东西*并且*您需要添加特定于该分叉的样式。

至于浏览器如何查找样式定义：这是一个非常广泛的问题，但它主要涉及查看每个样式表以及任何内联样式属性并相应地解决级联和任何其他环境约束，以获得一个值它可以用于实际绘图。级联本身是[一个半广泛的话题](http://www.w3.org/TR/CSS21/cascade.html)，浏览器如何解析 CSS 并实现级联解析是一个实现细节，因此高度依赖于您正在查看的浏览器。如果您对血腥细节感兴趣，[Tali Garsiel 对接收和显示网页的整个过程进行了令人难以置信的记录](http://www.html5rocks.com/en/tutorials/internals/howbrowserswork)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T05:44:58.650

将浏览器视为**语言解释器**。这里的语言是 CSS、JS、HTML 等。所以他们有内置的引擎来处理你的 html 标签并根据规范适当地呈现它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T06:53:49.363

根据我的经验，我可以接受。我还要说明 Flash 和 php 支持哪些目标 tese CSS 样式。

# angularjs - AngularJS：绑定内部指令

> ID：14017448
> 
> 赞同：4
> 
> 时间：2012-12-24T05:32:24.837
> 
> 标签：angularjs

我正在尝试将数据绑定到指令内的服务返回的值。

我有它的工作，但我跳过箍，我怀疑有更好的方法。

例如：

```
<img my-avatar> 
```

这是一个指令的同义词：

```
<img src="{{user.avatarUrl}}" class="avatar"> 
```

在哪里`user`：

```
$scope.user = CurrentUserService.getCurrentUser(); 
```

这是我用来让它工作的指令：

```
.directive('myAvatar', function(CurrentUser) {
    return {
        link: function(scope, elm, attrs) {
            scope.user = CurrentUser.getCurrentUser();
// Use a function to watch if the username changes,
// since it appears that $scope.$watch('user.username') isn't working
            var watchUserName = function(scope) {
                return scope.user.username;
            };
            scope.$watch(watchUserName, function (newUserName,oldUserName, scope) {
                elm.attr('src',CurrentUser.getCurrentUser().avatarUrl); 
            }, true);
            elm.attr('class','avatar');

        }
    }; 
```

是否有更简洁、“角度”的方式来实现相同的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T07:12:55.853

这个怎么样 ？[笨蛋](http://plnkr.co/edit/qGAvEtXmkJ3opTRvZUMQ)

您的指令的主要思想是

```
.directive('myAvatar', function (CurrentUserService) {
        "use strict";
        return {
            restrict: 'A',
            replace: true,
            template: '<img class="avatar" ng-src="{{url}}" alt="{{url}}" title="{{url}}"> ',
            controller: function ($scope, CurrentUserService) {
                $scope.url = CurrentUserService.getCurrentUser().avatarUrl;
            }
        };
    }); 
```

# sql-server-2005 - how to calculate total number of L Prasent in my table with in 1 year for a person

> ID：14017450
> 
> 赞同：0
> 
> 时间：2012-12-24T05:32:38.957
> 
> 标签：sql-server-2005

I want to make a web app for salary management. In which I want to calculate total number of leaves with in a year if there is more than 16 L present in my table than it will count as A absent.

How to make procedure for this?

Any help is appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T05:44:43.463

也许这可以工作。

```
SELECT
     EmployeeID,
     DaysAbsent=(SELECT COUNT(DISTINCT aDate)FROM aDateTable
                  WHERE Absent=1 and EmployeeID=Employees.EmployeeID)
FROM 
    Employess 
```

# c - Quake2中qglTexImage2D的第三个internalFormat

> ID：14017452
> 
> 赞同：1
> 
> 时间：2012-12-24T05:32:48.537
> 
> 标签：c, opengl, quake2

从 Quake2 源，gl_rsufr.c 中的函数 GL_BeginBuildingLightmaps，我看到了这些代码：

```
if ( toupper( gl_monolightmap->string[0] ) == 'A' )
{
    gl_lms.internal_format = gl_tex_alpha_format;
}
/*
** try to do hacked colored lighting with a blended texture
*/
else if ( toupper( gl_monolightmap->string[0] ) == 'C' )
{
    gl_lms.internal_format = gl_tex_alpha_format;
}
else if ( toupper( gl_monolightmap->string[0] ) == 'I' )
{
    gl_lms.internal_format = GL_INTENSITY8;
}
else if ( toupper( gl_monolightmap->string[0] ) == 'L' ) 
{
    gl_lms.internal_format = GL_LUMINANCE8;
}
else
{
    gl_lms.internal_format = gl_tex_solid_format;
}
GL_Bind( gl_state.lightmap_textures + 0 );
qglTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
qglTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
qglTexImage2D( GL_TEXTURE_2D, 
               0, 
               gl_lms.internal_format,
               BLOCK_WIDTH, BLOCK_HEIGHT, 
               0, 
               GL_LIGHTMAP_FORMAT, 
               GL_UNSIGNED_BYTE, 
               dummy ); 
```

## `qglTexImage2D`与 glTexImage2D 相同。

问题出在调试中，我看到 is 的第三个参数（internalFormat）的输入值为`qglTexImage2D`3。3`gl_tex_solid_format`是参数 internalFormat 的有效值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:12:38.030

`3`是一个完全合法的值`internalFormat`。

从[文档](http://www.opengl.org/sdk/docs/man2/xhtml/glTexImage2D.xml)：[_`glTexImage2D()`](http://www.opengl.org/sdk/docs/man2/xhtml/glTexImage2D.xml)

> `internalFormat`：指定纹理中颜色分量的数量。**必须是 1、2、3 或 4**或以下符号常量之一： ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:06:59.703

变量 gl_tex_solid_format 的值来自哪里？您确定已将 GL_RGBA 分配给变量 gl_tex_solid_format 吗？也许您将 3 分配给变量 gl_tex_solid_format。

# android - Call another activity from spinner using Onitemselect Listener.

> ID：14017454
> 
> 赞同：-4
> 
> 时间：2012-12-24T05:33:03.073
> 
> 标签：android, android-widget

I am new to android.

In android is it possible to call another class or xml in spinner using `onItemselectedListener`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:58:07.300

是的，当从微调器中选择一个项目时，您可以调用另一个活动，首先您需要覆盖`onItemSelected()`,

```
mySpinner.setOnItemSelectedListener(new OnItemSelectedListener()
    {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3)
        {
            // Create the intent to start new activity
            Intent i = new Intent(CurrentActivityName.this, NextActivityName.class);
            i.setflags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(i);

        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T05:50:31.077

像这样试试

```
 mList.setOnItemSelectedListener(new OnItemSelectedListener()
    {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3)
        {
            // start ur activity

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0)
        {
            // TODO Auto-generated method stub

        }
    }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T07:24:44.440

使用 Onitemselect 侦听器从微调器调用另一个活动。是的。

# android - Can alert dialog changes the title at Runtime in android

> ID：14017456
> 
> 赞同：1
> 
> 时间：2012-12-24T05:33:29.483
> 
> 标签：android, android-alertdialog, android-dialog

In Android, can I change the title of a dialog box at Runtime?

```
AlertDialog.Builder builder;
builder = new AlertDialog.Builder(Manage_Holidays.this);
builder.setMessage("Are you sure you want to insert new holiday")
.setCancelable(false)
.setTitle("Confirmation")
.setNegativeButton("No",new DialogInterface.OnClickListener() {
    public void onClick(    DialogInterface dialog,int id) {
                   // Title need to changed ass progress                            }})
.setPositiveButton("Yes",new DialogInterface.OnClickListener() {
    public void onClick(    DialogInterface dialog,int id) {
    builder.setMessage("Processing...");
    builder.setTitle("dsjc");
    }}).setCancelable(false);
 AlertDialog alert = builder.create();
 alert.show(); 
```

In this, I thought to display a string on clicking **yes** button and another string for **no** button..=

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:19:33.443

您不能重复使用相同的警报对话框

```
 final AlertDialog.Builder builder,anotherbuilder;
     builder = new AlertDialog.Builder(MainView.this);
     anotherbuilder =new AlertDialog.Builder(this);
     builder.setMessage("Are you sure you want to insert new holiday")
     .setCancelable(false)
     .setTitle("Confirmation")
     .setNegativeButton("No",new DialogInterface.OnClickListener() {
         public void onClick(    DialogInterface dialog,int id) {
                        // Title need to changed ass progress                   
             }})
     .setPositiveButton("Yes",new DialogInterface.OnClickListener() {
         public void onClick(    DialogInterface dialog,int id) {
         anotherbuilder.setMessage("Processing...");
         anotherbuilder.setTitle("dsjc");
         AlertDialog alert = anotherbuilder.create();
          alert.show();
         }}).setCancelable(false);

      AlertDialog alert = builder.create();
      alert.show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T05:47:43.053

```
DialogInterface.OnClickListener dialogClickListener = new  DialogInterface.OnClickListener() {
@Override
public void onClick(DialogInterface dialog, int which) {
    switch (which){
    case DialogInterface.BUTTON_POSITIVE:
        //Yes button clicked
        break;

    case DialogInterface.BUTTON_NEGATIVE:
        //No button clicked
        break;
    }
}
};

AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setMessage("Are you sure?").setPositiveButton("Yes", dialogClickListener)
.setNegativeButton("No", dialogClickListener).show(); 
```

如果您有其他是/否框，您还可以重用该 DialogInterface.OnClickListener

# java - java中的空引用

> ID：14017461
> 
> 赞同：3
> 
> 时间：2012-12-24T05:34:10.937
> 
> 标签：java

我有一段代码，我必须知道如何分配内存

```
public class Demo {

public void checkNullReference(){
    ConsumerName name =  null;
    addReference(name);
    System.out.println(name.getConsumerName());
}

public void addReference(ConsumerName name){
    name = new ConsumerName();
    name.setConsumerName("KRISHNA");
}

public static void main(String []args){
    Demo demo = new Demo();
    demo.checkNullReference();
}
} 
```

代码给出了空指针异常，我已经给方法一个对象的引用，并且我正在为它分配新对象并设置名称，如果我重写方法，那么一切都按预期工作。

```
public void checkNullReference(){
    ConsumerName name =  new ConsumerName();
    addReference(name);
    System.out.println(name.getConsumerName());
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T05:35:40.047

您不能从被调用方法更改调用方法中的引用。因此，使用此代码：

```
public void checkNullReference(){
    ConsumerName name =  null;
    addReference(name);
    System.out.println(name.getConsumerName());
} 
```

`name`仍然会`null`在调用 之后`addReference(name)`，不管`addReference`它的正式参数是什么。

您可以重新设计`addReference`以*返回*. `ConsumerName`当您使用它时，您可以删除该参数，因为它被忽略了。结果可能是：

```
public void checkNullReference(){
    ConsumerName name =  addReference();
    System.out.println(name.getConsumerName());
}

public ConsumerName addReference(){
    ConsumerName name = new ConsumerName();
    name.setConsumerName("KRISHNA");
    return name;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T05:41:23.220

您正在使用 null 作为输入调用 addReference() 方法，因此.. 没有通过引用发生传递，并且 ConsumerName 是在 addReference() 中新分配的，其范围将仅保留在该方法中。因此，您修改代码以返回 ConsumerName 的新实例。

```
public class Demo {

public void checkNullReference(){
    ConsumerName name =  null;
    name = addReference(name);
    System.out.println(name.getConsumerName());
}

public ConsumerName addReference(ConsumerName name){
    name = new ConsumerName();
    name.setConsumerName("KRISHNA");
    return name ;
}

public static void main(String []args){
    Demo demo = new Demo();
    demo.checkNullReference();
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T05:38:53.863

永远记住，java 使用按值传递。当你这样做

```
name = new ConsumerName();
name.setConsumerName("KRISHNA"); 
```

它只是简单地创建一个位于 addReference 函数堆栈内的新本地对象。因此，一旦函数返回，您就丢失了该对象。换句话说，checkNullReference 中的 ConsumerName 对象与 AddReference 中的 ConsumerName 对象不同。

# javascript - adding search icon to input box

> ID：14017464
> 
> 赞同：16
> 
> 时间：2012-12-24T05:34:39.493
> 
> 标签：javascript, search, input, icons

```
<div id="inputs">
<input type="text" value="">
<input type="text" value="">
</div>
<input type="button" id="add" value="Add input">

<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script type="text/javascript">
$(function(){
$('#add').click(function(){
 $('#inputs').append('<input type="text" value="">');
});
});
</script> 
```

Within the code above, i want to add a search icon for every new input generated with a button (id=add ; not shown here for simplicity). This would be a typical input:

```
<label>
<input type="text" class="search" name="word" autofocus="autofocus" />
<span class="search-icon">
    <span class="glass"></span>
    <span class="handle"></span>
</span>
</label> 
```

With CSS i could position the search icons in a fixed way.

Thanks

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-24T05:48:57.390

这是我将使用的 CSS 代码：

```
#add {
  padding: 17px;
  padding-left: 55px;
  width: 300px;
  border: 1px solid #f5f5f5;
  font-size: 13px;
  color: gray;
  background-image: url('http://i47.tinypic.com/r02vbq.png');
  background-repeat: no-repeat;
  background-position: left center;
  outline: 0;
} 
```

注意：我添加了很多额外的代码使搜索框看起来更好，使搜索框出现的必要代码是 padding-left、background-image:url、background-repeat 和 background-position。将“ [http://i47.tinypic.com/r02vbq.png](http://i47.tinypic.com/r02vbq.png) ”替换为您想要的任何搜索图标。

同样重要的是要知道现在在 HTML5 中，大多数浏览器都会呈现

```
<input type="search" results> 
```

带有搜索图标。输入类型搜索使其成为一个搜索框，用“x”按钮清除，添加“结果”也显示一个搜索框。当然，您也可以将带有 CSS 和 JavaScript 的 x 按钮添加到常规搜索框。同样重要的是要注意输入类型搜索只允许很少的样式。在 Mac 上的 Safari 上演示：

![演示](../Images/227a78fe847f933c8bab591dddca1a48.png)

告诉我这是否对您有帮助，并确保标记为答案。:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T05:55:23.323

将图像放入 span，例如使用`background-image`，然后给它一个相对位置并将其向左移动，使其与搜索框的右端重叠，例如：

```
#g-search-button {
  display: inline-block;
  width: 16px;
  height: 16px;
  position: relative;
  left: -22px;
  top: 3px;

  background-color: black;  /* Replace with your own image */
} 
```

[JSBin 上的工作示例](http://jsbin.com/ujate4)

注意：这不是我的答案，我在[这里找到了](https://stackoverflow.com/a/4079774/1551730)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-26T04:54:22.680

这里有关于 kirupa.com 的一步一步： [http ://www.kirupa.com/html5/creating_an_awesome_search_box.htm](http://www.kirupa.com/html5/creating_an_awesome_search_box.htm)

在这里为您提供相关的 CSS：

```
input[type=text] {
    width: 260px;
    padding: 5px;
    padding-right: 40px;
    outline: none;
    border: 2px solid #999999;
    border-radius: 5px;
    background-color: #FBFBFB;
    font-family: Cambria, Cochin, Georgia, serif;
    font-size: 16px;
    background-position: 270px -10px;
    background-image: url('http://www.kirupa.com/images/search.png');
    background-repeat: no-repeat;
} 
```

# apache - .htaccess 将特定子目录重定向到查询字符串参数

> ID：14017469
> 
> 赞同：1
> 
> 时间：2012-12-24T05:35:22.780
> 
> 标签：apache, .htaccess, redirect, rewrite

需要`.htaccess`执行以下操作，但我无法正常工作：

重定向任何以`/recordings/`to结尾的 url`?recordings`

例如：

```
www.mysite.com/example-product-one/recordings/ 
```

变成

```
www.mysite.com/example-product-one/?recordings 
```

或者，

```
www.mysite.com/products/category/three/recordings 
```

变成

```
www.mysite.com/products/category/three/?recordings 
```

建议？谢谢你。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-25T20:13:22.343

感谢您为我指明正确的方向......这就是最终的工作：

```
RewriteEngine On
RewriteBase /
RewriteRule /recordings/$ %{REQUEST_URI}../?recordings [L,R=301] 
```

# javascript - jQuery隐藏li元素，然后在按钮悬停时淡入

> ID：14017476
> 
> 赞同：1
> 
> 时间：2012-12-24T05:35:58.597
> 
> 标签：javascript, jquery

我有一个`ul`包含五个`li`元素的标准列表。在第三个元素之后，我在列表中放置了一个带有 CSS 类的按钮`.morecats`。

```
<ul>
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <button class="morecats">+</button>
    <li>4</li>
    <li>5</li>
</ul> 
```

使用 jQuery，我隐藏了前三个`li`元素：

```
$('ul')
  .find('li:gt(3)')
  .hide()
  .end(); 
```

`li`现在，当用户将鼠标悬停在 button 上时，我希望 jQuery 淡入并显示隐藏的元素`.morecats`。我还想要一个单独的 div`.bg`来淡入/出现。

这怎么可能实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T05:41:40.147

实现此目的的一种方法是通过[jQuery 悬停功能](http://api.jquery.com/hover/)。官方的例子甚至有一个淡入淡出的例子，你可以看看。

```
$(".morecats").hover(
    function(){   // When the hover begins
        $('li').slice(-2).fadeIn(500);
    }, 
    function(){   // When the hover ends
        $('li').slice(-2).fadeOut(500);
    } 
); 
```

切片获取最后两个`li`元素。

jsfiddle：http: [//jsfiddle.net/wDLVQ/2/](http://jsfiddle.net/wDLVQ/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T06:20:11.650

您可以通过`prevAll()`jQuery 函数来实现它：

你可以在这里阅读更多 - **[http://api.jquery.com/prevAll/](http://api.jquery.com/prevAll/)**

```
$('ul')
.find('li:lt(3)')
.hide();           //<----------------------------first 3 li hidden

$(".morecats").hover(
    function(){
        $(this).prevAll('li').fadeIn(500); // when hover the button fadeIn the 
        $('.bg').fadeIn(500);              // hidden li and .bg div.
    },
    function(){ 
        $(this).prevAll('li').fadeOut(500); // used it to fadeout the first 3
    }                                       // lis again.
); 
```

# mysql - MYSQL WHERE CLAUSE: WHERE 'X' 排除？

> ID：14017477
> 
> 赞同：0
> 
> 时间：2012-12-24T05:36:00.483
> 
> 标签：mysql, where-clause

有没有办法添加到这个 mysql 查询中来说明“x”在哪里不包括在查询中？

```
function get_newest_members() {
            global $connection;
            $query = "SELECT *
                        FROM ptb_users, ptb_profiles
                        WHERE ptb_users.account_type = \"member\" AND ptb_users.account_status = \"Active\" AND ptb_profiles.user_id = ptb_users.id
                        ORDER BY date_created DESC
                        LIMIT 0 , 6";
            $newest_set = mysql_query($query, $connection);
            confirm_query($newest_set);
            return $newest_set;
        } 
```

我想添加 exclude where ptb_profiles.user_id = '99999' ？

这可能吗，如果可以，有人可以告诉我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T05:36:55.897

只需在您的情况下添加它

```
SELECT ...
FROM   ...
WHERE  ... AND ptb_profiles.user_id <> '99999' 
```

作为旁注，使用单引号而不是双引号，因此`\`不需要

```
$query = "SELECT *
          FROM ptb_users INNER JOIN ptb_profiles
                ON ptb_profiles.user_id = ptb_users.id
          WHERE ptb_users.account_type = 'member' AND 
                ptb_users.account_status = 'Active'    
          ORDER BY date_created DESC
          LIMIT 0 , 6"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T05:39:58.953

试试这个...

`SELECT * FROM ptb_users, ptb_profiles WHERE ptb_users.account_type = \"member\" AND ptb_users.account_status = \"Active\" AND ptb_profiles.user_id = ptb_users.id AND ptb_profiles.user_id!='99999' ORDER BY date_created DESC LIMIT 0 , 6`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T05:37:31.453

如果您想`99999`从结果中排除具有 user_id 的用户

只需添加

```
ptb_profiles.user_id != '99999' 
```

# android - Android：活动将变量保存在内存中

> ID：14017480
> 
> 赞同：0
> 
> 时间：2012-12-24T05:36:28.000
> 
> 标签：android, android-activity

有一个活动和一些变量。它们是从前一个传递过来的。情况是： - 当用户点击主页按钮并返回主屏幕时，用户点击应用程序图标返回应用程序一段时间后，应用程序崩溃。我认为那是因为 Android 系统杀死了活动或其他东西，然后它试图做`onCreate()`，不幸的是有一个`NullpointerException`所以应用程序崩溃了。

有什么想法可以解决这个问题，或者我应该如何处理这个异常？谢谢。

请允许我提前祝你圣诞快乐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:10:29.990

当您按下“home”时，控制转到 Home 应用程序，并将当前应用程序推到后台。Android 可能随时终止进程以回收内存。

当您返回 Activity 时，它可能是同一个实例（如果 Android 没有终止该进程），也可能是 Activity 的新实例。

如果内存非常紧张并且您从 Activity 向前推进，也会发生同样的事情；Activity 可以被释放。当您按返回时，您可能会遇到同样的问题。

如果要保留数据，则应使用 onSaveInstanceState(Bundle) 存储要恢复的任何数据。

请注意， onCreate() 将 Bundle 作为参数。如果 Activity 暂停（例如按下 Home 时发生），则调用 onSaveInstanceState() 以允许您临时存储数据，并将相同的数据传递回 onCreate()。如果 Activity 是新启动的，则该捆绑包将为空。

因此，您应该执行以下操作：

```
public void onSaveInstanceState(Bundle bundle) {
    super.onSaveInstanceState(bundle);
    // store data in the bundle
}
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (savedInstanceState != null) {
        // read old data from the Bundle
    } else {
        // you're starting clean; no saved data
    }
    ...
} 
```

几点注意事项：

*   存储在 Bundle 中的所有数据必须是原始的、可序列化的，或者更好的是 Parcelable
*   Android 视图中设置了 android:id 的数据会自动存储在包中，并在重新创建 Activity 时检索（例如，将为您保存在 EditText 中键入的数据）
*   不属于 Android View 的其他数据不会自动保存，您的自定义 View 中的数据也不会自动保存

希望这可以帮助！

# silverlight - 在 WP7 Silverlight 中运行时复制画布及其内容

> ID：14017481
> 
> 赞同：2
> 
> 时间：2012-12-24T05:36:35.380
> 
> 标签：silverlight, windows-phone-7

我可以用它的内容制作像画布的“模具”，这样我就可以在运行时制作尽可能多的副本吗？

如果有人可以告诉我这样做的方法甚至替代方法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T05:48:25.827

我发现创建一个用户控件，将所有内容放入其中，然后在需要时使用该控件可以解决问题。

[WP7 教程自定义 ListBox 项与 CheckBox 和 Circle](http://www.youtube.com/watch?v=wATgStBdsxI)

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T23:44:35.903

看看[http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap(v=VS.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap(v=VS.95).aspx)和[http://writeablebitmapex.codeplex.com](http://writeablebitmapex.codeplex.com)

去年 MSDN 杂志上有一篇文章展示了一个万花筒应用程序，它可以从相机中复制和反转视频帧。我现在找不到指向它的链接，但这应该接近你想要做的。

# asterisk - 星号来电显示名称

> ID：14017482
> 
> 赞同：0
> 
> 时间：2012-12-24T05:36:53.890
> 
> 标签：asterisk

我有一个 IVR 连接到`spa400`.

`spa400`有 4 个 FXO 端口，所以我可以连接 4 条电话线。问题是当来电时我不知道它来自哪条线路。`spa400`和 IVR 通过以太网连接。我在某个地方读到过，`PORTIDs`但我不知道如何获得它们。

有人在下面的链接上发布了[这个](http://www.pbxinaflash.com/community/index.php?threads/spa400-port-selection.6250/)，但我不明白。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:25:32.360

该链接的意思是您在 SPA400 上设置的 PORT_ID 将是 Asterisk 的 ${CALLERID(name)} 中的后缀。

# asp.net - 无法理解 vbscript 变量声明

> ID：14017488
> 
> 赞同：1
> 
> 时间：2012-12-24T05:38:06.943
> 
> 标签：asp.net, vb.net

我的任务是将这个 asp.net(vbs) 应用程序转换为 javascript...

我是一名 PHP / JS 开发人员，老实说，15 年多来我什至没有读过一行 Visual Basic 代码，所以我很生疏……

有人可以向我解释这里发生了什么吗？

```
Dim VarName(100) as Double 
```

在我看来，他们将 VarName 转换为一个数组，同时作为一个双精度数。这让我很困惑。它是一个双打数组吗？还是有 100 位数字的双精度数？

除了字符串，他们也做同样的事情

```
Dim VarName(100) as String 
```

是什么赋予了？我试着用谷歌搜索我得到的只是新手的东西，不包括以这种方式调光。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T05:39:03.777

它声明`array`了 100个 double 类型，您可以在**[msdn](http://msdn.microsoft.com/en-us/library/vstudio/wak0wfyt.aspx)**`elements`上阅读有关在 VB 中声明数组的更多信息

声明数组的不同方式。

```
Dim cargoWeights(10) As Double 
Dim atmospherePressures(2, 2, 4, 10) As Short 
Dim inquiriesByYearMonthDay(20)()() As Byte 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T05:56:20.577

来自 VB

```
Dim VarName(100) as Double 'array of doubles with length 100 
```

-> PHP

```
$VarName = array(100) 
```

VB

```
Dim VarName(100) as String 'string with 100 chars 
```

-> PHP

```
$name = "What is your name?" //JUST declare variable and assign it string value 
```

# three.js - Three.js 使用 WebRTC 并应用 Shader

> ID：14017491
> 
> 赞同：4
> 
> 时间：2012-12-24T05:38:25.790
> 
> 标签：three.js, webgl, shader, webrtc

我不知道如何将着色器应用于具有视频纹理的 three.js 对象。

我一直在使用 webRTC 和 three.js，并使用标准材质成功地将视频纹理映射到网格上：

```
 var material    = new THREE.MeshBasicMaterial({
            color   : 0xffffff,
            map : videoTexture
        }); 
```

我想更进一步，将着色器（在本例中为 sobel 着色器）应用于此纹理。我的尝试在这里：http: [//jsfiddle.net/xkpsE/1/](http://jsfiddle.net/xkpsE/1/)

我收到一堆 INVALID_OPERATION 警告，但无法理解如何调试问题。我也没有看到其他人这样做，所以我认为将这些知识公开是有益的:)

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T07:26:08.220

你很亲密。这是：http: [//jsfiddle.net/82fJh/1/](http://jsfiddle.net/82fJh/1/)。它至少可以在 OS X 上的 Chrome 下运行。

您有一些着色器制服格式错误，您需要将 uv 作为变量传递。

```
var sobelShader = {
    uniforms: {
        'texture': {
            type: 't',
            value: videoTexture
        },
         'width': {
            type: 'f',
            value: 320.0
        },
         'height': {
            type: 'f',
            value: 240.0
        }
    },
    vertexShader: [
        'varying vec2 vUv;',
        'void main() {',
           'vUv = uv;',
           'gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',
        '}'
        ].join('\n'),
    fragmentShader: [
        'uniform sampler2D texture;',
        'uniform float width;',
        'uniform float height;',
        'varying vec2 vUv;',
        'void main(void) {',
            'float w = 1.0/width;',
            'float h = 1.0/height;',
            'vec2 texCoord = vUv;',
            'vec4 n[9];',
            'n[0] = texture2D(texture, texCoord + vec2( -w, -h));',
            'n[1] = texture2D(texture, texCoord + vec2(0.0, -h));',
            'n[2] = texture2D(texture, texCoord + vec2(  w, -h));',
            'n[3] = texture2D(texture, texCoord + vec2( -w, 0.0));',
            'n[4] = texture2D(texture, texCoord);',
            'n[5] = texture2D(texture, texCoord + vec2(  w, 0.0));',
            'n[6] = texture2D(texture, texCoord + vec2( -w, h));',
            'n[7] = texture2D(texture, texCoord + vec2(0.0, h));',
            'n[8] = texture2D(texture, texCoord + vec2(  w, h));',
            'vec4 sobel_horizEdge = n[2] + (2.0*n[5]) + n[8] - (n[0] + (2.0*n[3]) + n[6]);',
            'vec4 sobel_vertEdge  = n[0] + (2.0*n[1]) + n[2] - (n[6] + (2.0*n[7]) + n[8]);',
            'vec3 sobel = sqrt((sobel_horizEdge.rgb * sobel_horizEdge.rgb) + (sobel_vertEdge.rgb * sobel_vertEdge.rgb));',
            'gl_FragColor = vec4( sobel, 1.0 );',
        '}'
        ].join('\n')
} 
```

三.js r.53

# google-play - Google Play 应用内结算示例 Trivial Drive 不起作用

> ID：14017493
> 
> 赞同：3
> 
> 时间：2012-12-24T05:38:35.947
> 
> 标签：google-play, in-app-billing

我正在开发**Google Play 应用内结算服务**。

我已经下载了版本 3 API 示例并作为草稿应用程序上传到我的开发者控制台。但是当我在手机和电脑上启动应用程序时，这个程序会停留在**ONE SEC**屏幕上，并且永远不会改变。

有人以前见过吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:11:28.380

以下是我在运行 Trivial Drive 演示后收到的几条错误消息以及我如何解决这些问题。第一个与您的问题最相似，但请继​​续阅读，因为第二个的部分内容也可能适用于您。

**问题**：屏幕消息长时间显示“一秒”，然后最终显示一个警告对话框，*“**错误：无法查询库存：IabResult：错误刷新库存...”*，然后消息返回*“一秒”*并停留停留在该消息上（就像您描述的那样）。

> **解决方案**：转到设置-> 帐户和同步并确保选中“背景数据”。

**问题**：您解决了上述问题，链接到 Google Play，但收到此消息，*“应用程序的版本未配置为通过 Google Play 计费。”*

> **解决方案**：您可以使用调试密钥运行应用程序，但如果您不使用生产密钥导出 apk，您将无法在 Google Play 上成功购买任何东西。因此，不是从 Eclipse 运行应用程序的“简单方法”，而是需要 File->Export-> 并使用生产密钥的密码等完成创建生产 apk 的过程（就像部署真正的应用程序一样）。然后我转到 DOS 命令并“adb install MainActivity.apk”将其安装到我的手机上。

Trivial Drive“自述文件”非常好：从那里开始并确保您明确地遵循每一步。您必须上传生产 apk，然后设置应用内产品，等待几个小时让谷歌处理事情，然后您就可以进行测试了。这是一个来回的过程，因为没有暂存环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T05:28:47.653

1) 另外，请确保您不要从 Ecilpse 将程序安装到您的手机上。我必须使用命令提示符来安装 apk 文件才能使其正常工作。要通过命令提示符安装 apk，请将您的 apk 文件放入“android-sdks\platform-tools”文件夹，然后按照以下步骤操作

[从命令提示符安装 apk 文件？](https://stackoverflow.com/questions/7076240/install-an-apk-file-from-command-prompt)

当您输入“adb install YourFile.apk”时，请确保您位于“android-sdks\platform-tools”目录中。

2) 确保您的 Google Play 开发者网站中的所有绿色复选标记都已勾选。我说的是“APK”、“商品详情”和“定价和分发”。

3) 要添加测试人员帐户，请转到 Google Play 开发者网站上的“设置”。在“具有测试访问权限的 Gmail 帐户”中添加电子邮件。

# jquery - Jquery 提交并重新加载结果

> ID：14017494
> 
> 赞同：0
> 
> 时间：2012-12-24T05:38:39.750
> 
> 标签：jquery, jquery-load

我将函数与 jquery 一起用于发布表单并获得结果

**我的代码是：**

```
function click_post(id)
{
    $("#form_order_sel_"+id).submit( function () {  
        $.ajax({   
            type: "POST",
            data : $(this).serialize(),
            cache: false,  
            url: "indexer_adm.php", 
            success: function(data){
                $("#load_order").html(data); 
            }   
        });   
        return false; 
    }); 
} 
```

它需要更新 div 的问题，我尝试了不同的方法，但我无法得到这个，因为如果我将 setTimeOut 用于重新加载 div，则帖子不起作用等

**我认为问题就在这里：**

```
$("#load_order").html(data); 
```

但是，当我使用带有 jquery 的 POST 方法时，我需要多一行来更新新内容

**感谢和问候 ！！！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T05:53:38.063

对于这个问题，这里有几点需要考虑，

1.  通过调用 $(this).Serialize() 检查正在发布的数据
2.  php 文件的返回类型是什么，如果是 html 标记，这应该可以正常工作，否则如果是 JSON 数据，您应该在使用它之前使用 JSON.parse(data)。
3.  尝试使用 chrome 调试器并找到作为对 AJAX 调用的响应而获得的数据，并将这些详细信息以及检查点的状态提供给我们以进一步指导。

# html - 相对链接路径中的小数有什么作用？

> ID：14017500
> 
> 赞同：1
> 
> 时间：2012-12-24T05:39:09.637
> 
> 标签：html

> **可能重复：**
> [“./”（点斜杠）在 HTML 文件路径位置方面指的是什么？](https://stackoverflow.com/questions/7591240/what-does-dot-slash-refer-to-in-terms-of-an-html-file-path-location)

以下广泛使用的对外部 css 表的引用中小数的用途是什么。提前致谢。

**为什么是小数？这里是“./css”？**

```
<link rel="stylesheet" href="./css/style.css" type="text/css" media="screen" charset="utf-8"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T05:40:32.527

`.`指当前文件夹。它并没有真正做任何事情，它是一种无操作。

# php - 我不能在后数组 codeigniter 中使用文件输入名称

> ID：14017501
> 
> 赞同：1
> 
> 时间：2012-12-24T05:39:53.030
> 
> 标签：php, codeigniter, file-upload

我试图将几个文件与 CI 框架一起上传。我想要的是将文件上传到不同的文件夹。因此，我尝试检查文件输入元素的名称并设置填充路径。

这是清楚了解我的问题的代码。

```
$config['allowed_types'] = 'jpg|doc|pdf|docx';
        //$config['max_size']   = '100';
        //$config['max_width']  = '1024';
        //$config['max_height']  = '768';
            if($this->input->post('bankbook_attachment')){
                echo 'bank'.$this->input->post('bankbook_attachment');
                $config['upload_path'] = './uploads/bank/';

                $fillselect='bankbook_attachment';
                $this->load->library('upload', $config);

                if ( ! $this->upload->do_upload($fillselect))
                {
                        $error = array('error' => $this->upload->display_errors());

                        echo 'error'.print_r($error);
                }
                else
                {
                     //   $data = array('upload_data' => $this->upload->data());
                       // print_r($data);
                        $datame=$this->upload->data();
                        $fillnamebank= $datame['file_name'];
                        echo 'fillname is'.$fillnamebank;
                      // $this->load->view('upload_success', $data);
                }

            }
            if($this->input->post('emp_nic_attachment')){
                $config['upload_path'] = './uploads/nic/';
                $fillselect='emp_nic_attachment';
                $this->load->library('upload', $config);

                if ( ! $this->upload->do_upload($fillselect))
                {
                        $error = array('error' => $this->upload->display_errors());

                        echo 'error'.print_r($error);
                }
                else
                {
                     //   $data = array('upload_data' => $this->upload->data());
                       // print_r($data);
                        $datame=$this->upload->data();
                        $fillnamenic= $datame['file_name'];
                        echo 'fillname is'.$fillnamenic;
                      // $this->load->view('upload_success', $data);
                }
            } 
```

但是当我运行代码时，我注意到它不验证 if 条件，它会留下它们。在 CI 示例中，我注意到他们不使用 post 数组来获取名称，而是直接使用硬编码。但这在我的应用程序中是不可能的。

如何解决这个问题。我认为问题出在这一行`$this->input->post('emp_nic_attachment')`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:24:55.163

由于您正在更新中的上传目录`$config`，我认为您不必检查“填写名称”。下面的代码就足够了

```
$config['upload_path'] = './uploads/bank/';
$this->load->library('upload', $config);

if ( ! $this->upload->do_upload('bankbook_attachment'))
{
    $error = array('error' => $this->upload->display_errors());
    echo 'error'.print_r($error);
}
else
{
    $datame=$this->upload->data();
    $fillnamebank= $datame['file_name'];
    echo 'fillname is'.$fillnamebank;
}

$config['upload_path'] = './uploads/nic/';
$this->load->library('upload', $config);
if ( ! $this->upload->do_upload('emp_nic_attachment'))
{
    $error = array('error' => $this->upload->display_errors());
    echo 'error'.print_r($error);
}
else
{
    $datame=$this->upload->data();
    $fillnamenic= $datame['file_name'];
    echo 'fillname is'.$fillnamenic;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:55:58.037

在花了几个小时和论坛的帮助后，我找到了答案。简单而重要的概念是我们每次进行多次上传时都必须加载上传库和配置文件。

```
$config['upload_path'] = './uploads/bank/';
                $config['allowed_types'] = 'doc|docx|pdf|jpg';
        $fillselect='bankbook_attachment';
        $this->load->library('upload', $config);

        if ( ! $this->upload->do_upload($fillselect))
        {
            $error = array('error' => $this->upload->display_errors());

            echo 'error'.print_r($error);
        }
        else
        {
            $data = array('upload_data' => $this->upload->data());
                       // print_r($data);
                        $datame=$this->upload->data();
                        $fillnamebank= $datame['file_name'];
            echo 'fillname is'.$fillnamebank;
                      // $this->load->view('upload_success', $data);
        }

                $config['upload_path'] = './uploads/nic/';
                $config['allowed_types'] = 'doc|docx|pdf|jpg';
        $fillselect2='emp_nic_attachment';
        $this->load->library('upload', $config);

        if ( ! $this->upload->do_upload($fillselect2))
        {
            $error = array('error' => $this->upload->display_errors());

            echo 'error'.print_r($error);
        }
        else
        {
            $data = array('upload_data' => $this->upload->data());
                       // print_r($data);
                        $datame=$this->upload->data();
                        $fillnamenic= $datame['file_name'];
            echo 'fillname is'.$fillnamenic;
                      // $this->load->view('upload_success', $data);
        } 
```

我犯的另一个错误是在构造函数中调用 uplod 库。这是无用的。

# php - 试图从 INNER JOIN 中删除（通过 PHP 的 MYSQL）在哪里连接的表具有我想要关闭的值？

> ID：14017508
> 
> 赞同：0
> 
> 时间：2012-12-24T05:40:45.147
> 
> 标签：php, mysql

我在 MYSQL 中有两个表：

```
Encounters  
+----+--------+------------+
| Id | GameId | LocationId |
+----+--------+------------+
| 1  | 5      |     10     |
| 2  | 5      |     12     |
| 3  | 5      |     45     |
+----+--------+------------+
EncounterCards  
+----+-------------+--------+
| Id | EncounterId | CardId |
+----+-------------+--------+
|  6 | 1           | 26     |
|  7 | 2           |  5     |
|  8 | 3           |  5     |
+----+-------------+--------+ 
```

我正在尝试加入这两个表并删除`EncounterCards`表中的所有记录`GameId = 5`。当我进行内部连接时，它似乎不允许我这样做，因为它正在查找表`GameId`中的列`EncounterCards`，但它只在 Encounters 表中。

`EncounterCards`所以在这个用例中，它会从表中删除所有记录。

这是我的查询：

```
`$query = "DELETE FROM EncounterCards INNER JOIN Encounters ON Encounters.Id = EncounterCards.EncounterId WHERE Encounters.GameId = {$game_id}";` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T05:47:59.637

如果在您的情况下使用 an`INNER JOIN`不是*那么*重要，您还可以使用以下内容：

```
DELETE FROM EncounterCards
WHERE EncounterId IN (
    SELECT id FROM Encounters
    WHERE GameId = {game_id_to_filter}
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T05:43:02.080

试试这个查询：

```
DELETE EncounterCards 
FROM EncounterCards INNER JOIN Encounters 
ON Encounters.Id = EncounterCards.EncounterId 
WHERE Encounters.GameId = {$game_id} 
```

在 FROM 关键字之前添加了表名。请参阅[多表删除语法](http://dev.mysql.com/doc/refman/5.0/en/delete.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T05:43:12.873

您需要指定应删除记录的位置。在这种情况下，我在关键字`ALIAS`之前添加了一个。`FROM`

```
DELETE  a
FROM    EncounterCards a 
        INNER JOIN Encounters b
            ON a.EncounterID = b.ID
WHERE   b.GameID = 5 
```

*   [SQLFiddle 演示链接](http://sqlfiddle.com/#!2/20c56/1)

# applescript - applescript 和 Fetch

> ID：14017511
> 
> 赞同：0
> 
> 时间：2012-12-24T05:41:32.050
> 
> 标签：applescript

我打算使用 Automator 运行一些远程到本地的备份，但需要做一些循环，所以我认为 Applescript 会是一个更好的选择。作为 Applescript 的完全新手，我第一次尝试从给定文件夹中下载具有特定特征的所有文件导致错误：

```
set today to current date
set yesterday to (today - 1)
tell application "Fetch"
    activate
    open remote folder "/public_html/books/book_3/_thumbs/Images"
    copy every file of folder to beginning of alias "MacintoshHD:Users:franciscaparedes:Desktop:untitled folder:"
whose modification date is greater than yesterday
end tell 
```

这是我的错误：
`Fetch got an error: Can’t set beginning of alias \"Macintosh HD:Users:franciscaparedes:Desktop:untitled folder:\" whose «class pMod» > date \"Monday, December 24, 2012 6:37:17 AM\" to every file of folder." number -10006 from insertion point 1 of alias "Macintosh HD:Users:franciscaparedes:Desktop:untitled folder:" whose modification date > date "Monday, December 24, 2012 6:37:17 AM"`

任何想法将不胜感激。

-埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:00:53.400

这行得通。

我只是快速浏览了一下。这意味着这很可能更简单。

Fetch 库在 IMO 中没有得到很好的解释。但我认为大多数applescript库都是如此。

但是你应该阅读图书馆。这将帮助您了解应用程序中可编写脚本的内容以及要使用的语法。

访问应用程序的库。在 Applescript 编辑器中。转到 Windows-> 库菜单。这将打开库窗口。如果您在那里看到您的应用程序，请双击它。将打开一个新库，其中包含您可以使用的所有语法和命令。

当你看到它时不要退出并开始思考哦，是的宝贝，这很好，世界是我的......哈哈哈。因为您很快就会发现要花一些时间来锻炼如何将它们组合在一起。

如果您的应用不在库窗口中。在 finder 中找到应用程序并将其拖放到上面。如果它是可编写脚本的，它将被添加到库中。

另请阅读[Apples Applescript 概念](https://developer.apple.com/library/mac/#documentation/applescript/conceptual/applescriptx/Concepts/work_with_as.html)

```
set today to current date
set number_of_days to 1

tell application "Fetch"
    activate

    #open a shortcut
    open shortcut "Shortcut Name"
    #set the remote window to your remote path
    open remote folder "/public_html/books/book_3/_thumbs/Images"

    #get the properties of every file in remote window. This will give use the modified date and url of each file
    set props to properties of remote items of transfer window 1

    #iterate through the files
    repeat with i from 1 to number of items in props
        # one of the items
        set this_item to item i of props
        #get its modification date
        set modDate to modification date of this_item
        # compare the dtae by using number of days
        set TimeDiff to (today - modDate) -- the difference in seconds
        set DaysOut to (TimeDiff div days) -- the number of days out

        if DaysOut is greater than number_of_days then
            #use the files url to download it to the POSIX file path of you folder
            download url (url of this_item) to file "MacintoshHD:Users:franciscaparedes:Desktop:untitled folder:"
        end if

    end repeat

end tell 
```

# c# - WPF datagrid 更新数据库

> ID：14017513
> 
> 赞同：0
> 
> 时间：2012-12-24T05:42:16.880
> 
> 标签：c#, wpf, database, datagrid, updates

我是 C# 的新手。我正在编写一个小型 GUI 数据库应用程序，它使用数据网格来显示表数据。当我在网格中编辑一行时，按下更新按钮，就会调用 tableadapter 的更新函数，并将更改传播回 DB。然后我为行更改事件实现了一个处理程序，该处理程序依次调用 tableadapter 的更新函数。但是这一次，当某个值发生更改并按下回车键时，将调用处理程序并引发 InvalidOperationException 并显示消息“已经有一个打开的 DataReader 与此命令相关联，必须先关闭它。” 但无论如何数据库都已更改。如何停止引发异常。我在连接字符串中有多个活动结果集设置为 true。

构造函数

```
public WSim(MainWindow h)
{
   InitializeComponent();

   //database connection with strongly typed dataset
   usersAdapter = new testDBDataSetTableAdapters.usersTableAdapter();
   users = usersAdapter.GetUsers();

   users.usersRowChanged +=new testDBDataSet.usersRowChangeEventHandler(users_usersRowChanged);

   this.DataContext = users.DefaultView;
} 
```

行更改事件处理程序

```
private void users_usersRowChanged(object sender, testDBDataSet.usersRowChangeEvent e) 
{
    output.Content = "Row Modified";
    usersAdapter.Update(users);
} 
```

数据网格 xaml

```
<DataGrid Height="200" HorizontalAlignment="Left" Margin="26,249,0,0" Name="userGrid" VerticalAlignment="Top" Width="381" AutoGenerateColumns="True"
              SelectionMode="Extended" SelectionUnit="FullRow"  ItemsSource="{Binding}"
              CanUserReorderColumns="True" CanUserResizeColumns="True" CanUserSortColumns="True"
              CanUserAddRows="True" CanUserDeleteRows="True"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:03:20.213

正如例外所说，您应该先关闭阅读器。您没有提供足够的信息，我无法解释更多；但请参阅此[链接](http://blogs.msdn.com/b/spike/archive/2009/08/20/there-is-already-an-open-datareader-associated-with-this-command-which-must-be-closed-first-explained.aspx)。我想它会对你有所帮助。

# vi - 特殊注释的 Vim 语法高亮

> ID：14017515
> 
> 赞同：3
> 
> 时间：2012-12-24T05:42:27.660
> 
> 标签：vi, vim, vim-syntax-highlighting

Vim 中是否有一种简单的方法来扩展语言的语法高亮显示以突出​​重要的注释？例如，如果以开头的行`//`表示 C 文件中的常规注释，我希望以`//!!`更突出的颜色突出显示以开头的行。

```
// this is a regular comment - line color should be the default color for comments

//!! this is an important comment - highlight line in red 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T05:51:39.203

```
:syn match specialComment #//!!.*# | hi specialComment ctermfg=red guifg=red 
```

* * *

正如 Ingo Karkat 指出的那样，您可以在`.c`加载文件后执行命令，方法是将它们放在`~/.vim/after/syntax/c.vim`.

另一种选择，如果您想将所有内容放在一个文件中，例如`~/.vimrc`，可以将命令绑定到缓冲区输入事件：

```
au! BufEnter *.c syn match specialComment #//!!.*#  " C files (*.c)
au! BufEnter *.py syn match specialComment /#!!.*/  " Python files (*.py)

...

hi specialComment ctermfg=red guifg=red 
```

# android - 如何使用 Hackbook 示例获取 Facebook 好友即将到来的生日

> ID：14017516
> 
> 赞同：2
> 
> 时间：2012-12-24T05:42:27.260
> 
> 标签：android, facebook, facebook-graph-api

我正在使用 Facebook Android Developers Hackbook 示例，我想知道如何获取 Facebook 好友即将到来的生日，例如：*今天 27 岁，10 天后 28 岁*等等，使用`GraphAPI`或`FQL`

```
 public class graphApiRequestListener extends BaseRequestListener {

    @Override
    public void onComplete(final String response, final Object state) {
        dialog.dismiss();
        // access token is appended by Facebook object, hence params are
        // added here after request is complete
        if (!params.isEmpty()) {
            url += "?" + Util.encodeUrl(params); // Params
        }
        metadataObject = null;
        params.clear();
        try {
            JSONObject json = Util.parseJson(response);
            if (json.has("metadata")) {
                metadataObject = json.getJSONObject("metadata");
                json.remove("metadata");
            } else {
                metadataObject = null;
            }
            setText(json.toString(2));
        } catch (JSONException e) {
            setText(e.getMessage());
            e.printStackTrace();
        } catch (FacebookError e) {
            setText(e.getMessage());
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T06:12:44.267

这里有一些使用 facebook 旧 SDK 的代码试试这个

```
 Facebook fb = new Facebook(main.APP_ID);
    SessionStore.restore(fb, mActivity);
    mAsyncRunner = new AsyncFacebookRunner(fb);

    String graphPath = "me/friends";
    Bundle bundle_friends = new Bundle();
    bundle_friends.putString("fields", "id,birthday");

    mAsyncRunner.paramsRequest(graphPath, bundle_friends, new AsyncRequestListener(mActivity) {

        @Override
        public void onComplete(JSONObject obj, Object state) {

            try {
                JSONArray data = obj.getJSONArray("data");
                for (int i = 0; i < data.length(); i++) {
                    JSONObject temp = data.getJSONObject(i);
                    if (!temp.isNull("birthday"))
                        bundleForBirthdays.putString(temp.getString("id"), temp.getString("birthday"));
                }

            } catch (JSONException e) {
                e.printStackTrace();
            }

        }
    }); 
```

# javascript - 识别数字/字符串是否包含数字 6

> ID：14017520
> 
> 赞同：-3
> 
> 时间：2012-12-24T05:43:23.720
> 
> 标签：javascript

我们如何识别数字/字符串是否包含数字 6？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:57:51.213

您可以使用javascript`indexOf()`函数，如

```
var str="Your string containing 6 or not";
if(str.indexOf(6)==-1) {
// don't contains
} else {
//contains
} 
```

或与正则表达式`.search`

```
 var str="Your string containing 6 or not";
    var pat=/6/
    if(str.search(pat,str)==-1) {
    // don't contains
    } else {
    //contains
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T05:45:03.973

如果你愿意使用 underscore.js，那就是：

```
_.contains("myString", "6"); 
```

或使用`.indexOf()`：

```
"myString".indexOf("6") >= 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T05:48:47.390

你可以使用[`RegExp::test`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test)：

```
> /6/.test('16')
true
> /6/.test(6001)
true 
```

量子点

# serial-port - 称重秤与远程 php 程序集成

> ID：14017521
> 
> 赞同：0
> 
> 时间：2012-12-24T05:43:47.870
> 
> 标签：serial-port, client-side

我在 php 中开发了一个计费屏幕，它托管在 linux 服务器中。浏览器在连接称重机的本地机器上呈现此页面。从远程服务器程序中获取称重机读数的最佳和最快的方法是什么？我能够以连续流的形式获取称重机的输出客户端机器..但是程序在服务器中，我需要在那里访问这个连续流..有没有办法？数据库在 mysql 中。

# c# - 如何在插入语句期间从 C# 中的访问数据库中获取下一个自动增量值

> ID：14017526
> 
> 赞同：0
> 
> 时间：2012-12-24T05:44:30.890
> 
> 标签：c#, ms-access-2007

我目前正在从用 C# 编写的 Windows 窗体应用程序输入数据。我的数据库是 Microsoft Access 数据库。一切正常接受我不断收到重复我的主键值的错误。我已经在互联网上搜索了一段时间，并没有发现与我的问题有关的太多内容。

我当前的表格设置如下：

```
Field Name     Data
-------------------
ID             AutoNumber
MonsterName    Text
Drop           Text
AmountDropped  Text 
```

我当前的 SQL 查询如下：

```
"INSERT INTO MonsterDrops (MonsterName, Drop, AmountDropped) VALUES ('" +
Monsters.SelectedCells[0].Value.ToString() + "','" + DropName + "'," + Amount + ")" 
```

这给了我错误：“INSERT INTO 语句中的语法错误”

我正在使用此函数执行查询：

```
private void executeNonQuery(string query)
    {
        //create a new connection and pass in config settings for it
        OleDbConnection db = new OleDbConnection(Properties.Settings.Default.DFUWDBConnectionString);
        try
        {
        //Open the DB
        db.Open();

            try
            {
            //create a new command object
            OleDbCommand command = new OleDbCommand();

            //set the command to be your query
            command.CommandText = query;

            //set the DB for the query to be performed on
            command.Connection = db;

            //execute the insert
            command.ExecuteNonQuery();
        }
        catch (Exception e)
        {
            MessageBox.Show(e.Message);
        }
    }
    catch (Exception e)
    {
        MessageBox.Show(e.Message);
    }
    finally
    {
        db.Close();
    }
} 
```

我读到如果 Identity 设置为 true，您不必包含 AutoNumber 字段，不确定我的设置是否如此。如何在运行 SQL 查询时让自动编号功能工作？？？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:05:50.870

自动编号使您不必费心获取下一个值。AutoNumber 不应该在插入时为您提供任何问题，因为您没有使用它的字段集，它会自动获取下一个值以进行插入。

首先你尝试

```
"INSERT INTO MonsterDrops (MonsterName, Drop, AmountDropped) VALUES 
('BOOGYMAN', 'BOOGERS', '1')"; 
```

然后试试这个

```
"INSERT INTO MonsterDrops (MonsterName, Drop, AmountDropped) VALUES
 ('" + Monsters.SelectedCells[0].Value.ToString() + "','" + DropName + "'
,'" + Amount + ")"'" 
```

如果您在第二个中发现问题，那么您获得的值会立即出现问题

否则，如果您在第一次查询中遇到问题，那么您应该尝试这种方式

制作您的 ID 字段`Number`而不是自动编号并尝试

```
"INSERT INTO MonsterDrops (ID,MonsterName, Drop, AmountDropped) VALUES 
(2222, 'BOOGYMAN', 'BOOGERS', '1')"; 
```

如果您以这种方式成功，那么您必须阅读有关自动编号的更多信息，您将轻松解决您的问题，如果您遇到问题，我愿意提供进一步的帮助。

**Edit** From comments: Change your `Drop` named field to `Drop111` or something other than `Drop`. Because, the `Drop` is keyword in SQL.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T05:51:55.000

我相信你需要设置自动增量，比如

```
ALTER TABLE MonsterDrops
   ALTER COLUMN ID AUTOINCREMENT(1001,1) 
```

基本上用你的最后一个 ID 替换 1001 并且你想将你的下一个插入增加 1

# android-wifi - 在android中打印pdf

> ID：14017529
> 
> 赞同：0
> 
> 时间：2012-12-24T05:44:48.883
> 
> 标签：android-wifi, android-wireless

是否有任何常见的 sdk 、库等可以通过 wifi 将手机或标签连接到任何打印机（任何公司）并能够打印出 pdf？我不想使用像 epson iprint 这样的应用程序，因为我必须集成它并且云打印不是一个选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:07:51.710

我还从我在 Epson 矩阵打印机上的应用程序中搜索打印 PDF 的解决方案。您可以尝试此代码，该代码适用于 HP 网络激光打印机：

```
File pdfFile = new File (Environment.getExternalStorageDirectory() + "/testPdf.pdf");

Socket clientSocket = null;
FileInputStream fis;
BufferedInputStream bis = null;

try {
    clientSocket = new Socket("192.168.101.45", 9100);
} catch (UnknownHostException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
}

byte [] mybytearray  = new byte [(int) pdfFile.length()];
try {
    fis = new FileInputStream(pdfFile);
    bis = new BufferedInputStream(fis);
    bis.read(mybytearray, 0, mybytearray.length);
    OutputStream os = clientSocket.getOutputStream();
    os.write(mybytearray, 0, mybytearray.length);
    os.flush();
} catch (FileNotFoundException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} finally {
    try {
        clientSocket.close();
        bis.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:33:42.550

我们在从 Android 打印 PDF 时遇到了很大的问题。Android 几乎没有打印机驱动程序。

此代码在您连接打印机的特定套接字上打开流。我们有大而好的 HP 激光打印机，使用此代码 PDF 文件打印效果很好。但是我们的用户没有那么好的打印机:)

现在我们像打印预览一样使用 PDF，但对于打印，我们使用带有打印机序列的文本。这种创建文档的方法可能非常困难。您必须为您的打印机创建带有打印顺序的文本文件，然后，您可以将此代码设置为打印机：

```
outToServer = new DataOutputStream(clientSocket.getOutputStream());
outToServer.writeUTF(stringForPrint);
outToServer.flush(); 
```

您可以在文本文件中添加标签（如 HTML ），在将文本发送到打印机之前，您可以将标签替换为序列：

```
 // bold on
        text = text.replaceAll("<B>", Character.toString((char)27) + "E");
        // bold off
        text = text.replaceAll("</B>", Character.toString((char)27) + "F"); 
```

我读过（没有尝试），也许如果您的 PDF（图像）可以转换为 PostScript 并在打印机上发送 PostScript 文件，并且如果打印机支持 PostScript，则 PDF 可能会打印得很好。我还认为 GhostScript 可能有助于转换。祝你好运 ：）

# apache - 在 tomcat 部署时自动启动 Web 应用程序

> ID：14017533
> 
> 赞同：1
> 
> 时间：2012-12-24T05:45:02.307
> 
> 标签：apache, tomcat, servlets, web.xml

我有一个在 apache tomcat 上运行的 JSP/Servelt webapp。我正在使用 .WAR 文件在外部 tomcat 服务器中部署这个 webapp。

我如何配置它，当部署 .WAR 文件时，webapp 也会自动启动。（我必须在 web.xml 文件或 context.xml 中进行哪些更改或任何其他更改）

我该如何配置，一个 web 应用程序启动它连续运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T05:48:52.197

通过外部脚本（如 shell 脚本）自动化您的 Web 应用程序（WAR）部署，一旦您的部署完成，运行 tomcat 的启动脚本。

这比考虑修改部署描述符更安全。

# java - LDAP 身份验证查询

> ID：14017538
> 
> 赞同：2
> 
> 时间：2012-12-24T05:46:13.243
> 
> 标签：java, ldap

1.  我在 Java LDAP 身份验证（AD）中有问题。我不明白这个 LDAP 身份验证是如何发生的

下面的代码是他们尝试使用用户名和密码获取 LDAP 服务器的所有详细信息的 InitialDirContext，如果它抛出基于返回代码决定的异常。

```
private void doSimpleAuthentication() {
        try {
            String hostURL = "ldap://" + hostName + ":" + port + "/";
            env.put(Context.PROVIDER_URL, hostURL);
            env.put(Context.SECURITY_AUTHENTICATION, "simple");

            String principal = userName + "@" + domain;

            // First connect to LDAP Server using Directory Manager credentials

            DirContext ctx = connectToDirServer(principal, password);
            returnCode = VALID_USER;

            if (warningPeriod >= 0) {
                String filter = "(sAMAccountName=" + userName + ")";
                SearchControls ctrl = new SearchControls();
                ctrl.setSearchScope(SearchControls.SUBTREE_SCOPE);
                NamingEnumeration results = ctx.search(baseDn, filter, ctrl);

                if (results != null && results.hasMoreElements()) {
                    SearchResult result = (SearchResult) results.next();
                    String attPrincipal = (result).getName() + "," + baseDn;

                    if ((!isPwdNeverExpires(result)) && isPasswordNearingExpiry(ctx, attPrincipal)) {
                        returnCode = PASSWORD_NEARING_EXPIRY;
                    }
                }
            }
            if (ctx != null) ctx.close();
        } catch (CommunicationException e) {
            errorMessage = e.getMessage();
            errorStackTrace = AgsUtil.convertToString(e);
            returnCode = SERVER_NOT_AVAILABLE;
        } catch (Exception e) {
            errorMessage = e.getMessage();
            errorStackTrace = AgsUtil.convertToString(e);
            returnCode = UNKNOWN_ERROR;
            if (errorMessage.indexOf("525") != -1 || errorMessage.indexOf("successful bind must be completed") != -1) {
                returnCode = USER_NOT_FOUND;
            } else if (errorMessage.indexOf("52e") != -1) {
                returnCode = INVALID_PASSWORD;
            } else if (errorMessage.indexOf("701") != -1 || errorMessage.indexOf("532") != -1 || errorMessage.indexOf("773") != -1) {
                returnCode = PASSWORD_EXPIRED;
            } else if (errorMessage.indexOf("533") != -1) {
                returnCode = USER_DISABLED;
            } else if (errorMessage.indexOf("775") != -1) {
                returnCode = USER_LOCKOUT;
            } else if (errorMessage.indexOf("530") != -1) {
                returnCode = LOGON_DENIED_AT_THIS_TIME;
            }
        }
    }
public DirContext connectToDirServer(String distinguishedName, String password) throws Exception {
        env.put(Context.SECURITY_PRINCIPAL, distinguishedName);
        env.put(Context.SECURITY_CREDENTIALS, password);
        return new InitialDirContext(env);
    } 
```

2.我在客户处面临一个问题，如果在 LDAP(AD) 中找不到用户，它会将状态代码返回为“INVALID_USERID_PASSWORD”而不是“USER_NOT_FOUND”。客户要求我提供以下信息信息

针对应用程序对 ldap 服务器或其他术语的查询，作为 ldap 查询传递的请求字符串是什么。请参阅下面有关 LDAP 查询的一些信息。

您可以在此处参考示例的参考链接。

[http://www.google.com/support/enterprise/static/postini/docs/admin/en/dss_admin/prep_ldap.html](http://www.google.com/support/enterprise/static/postini/docs/admin/en/dss_admin/prep_ldap.html)

如何继续，我没有找到有关如何使用这些查询的任何信息。用上面的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T11:47:22.483

`invalid password`当 BIND 请求中的条目不存在时，LDAP 目录服务器可能会以结果代码进行响应。它可以防止攻击者知道条目是否存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:57:52.163

您可能需要绑定为具有权利的人。

我们在[LDAP Wiki](http://ldapwiki.willeke.com/wiki/Basic%20JNDI%20Search%20with%20Administration%20Account)上有一个示例。

# python - 如何将 Python 中的数字转换为 8 个二进制字节（64 位长）？

> ID：14017540
> 
> 赞同：2
> 
> 时间：2012-12-24T05:46:32.103
> 
> 标签：python, python-2.x

如何将 Python 中的数字转换为 8 个二进制字节（64 位长）？

我有一个网络消息的蓝图，其中一部分是一个用八个字节表示的数字。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T05:49:37.607

使用[struct.pack](http://docs.python.org/2/library/struct.html#format-strings)：

```
>>> import struct
>>> struct.pack('!Q', 123)
'\x00\x00\x00\x00\x00\x00\x00{' 
```

第一个参数是控制编码的[格式字符串。](http://docs.python.org/2/library/struct.html#format-strings)`!`表示网络字节顺序，`Q`用于 8 字节无符号整数。

# breeze - Breeze.js 在保存期间出现错误

> ID：14017541
> 
> 赞同：1
> 
> 时间：2012-12-24T05:46:35.100
> 
> 标签：breeze

保存数据时出现以下错误，Get 工作正常。我正在使用 VS2012，创建 MVC4 Webapi 项目，`Nuget`用于获取`Breeze.js`. 在服务器上，我使用 Code First 中的 DbContext。

**服务器端代码**

```
 [BreezeController]
    public class CountryController : ApiController
    {
        private CountryContext db = new CountryContext();

            readonly EFContextProvider<CountryContext> _contextProvider =
        new EFContextProvider<CountryContext>();

        // ~/api/todos/Metadata 
        [HttpGet]
        public string Metadata()
        {
            return _contextProvider.Metadata();
        }

        // GET api/Country
        public IQueryable<Country> GetCountries()
        {
            return db.Countries.AsQueryable();
        }

        // ~/api/todos/SaveChanges
        [AcceptVerbs("POST")]
        public SaveResult SaveChanges(JObject saveBundle)
        {
            return _contextProvider.SaveChanges(saveBundle);
        }

        protected override void Dispose(bool disposing)
        {
            db.Dispose();
            base.Dispose(disposing);
        }
    }
} 
```

**数据库上下文**

```
public class CountryContext : DbContext
    {

        public CountryContext() : base("name=CountryContext")
        {
        }

        public DbSet<Country> Countries { get; set; }
    } 
```

**标题**

```
{
   "entities":[
      {
         "Country_ID":1,
         "Country_Code":"USA modified",
         "Country_Name":"Unites states hjk",
         "entityAspect":{
            "entityTypeName":"Country:#LearnKnockout.Models",
            "entityState":"Modified",
            "originalValuesMap":{
               "Country_Name":"Unites states"
            },
            "autoGeneratedKey":{
               "propertyName":"Country_ID",
               "autoGeneratedKeyType":"Identity"
            }
         }
      }
   ],
   "saveOptions":{
      "allowConcurrentSaves":false
   }
} 
```

**回复**

```
{
   "$id":"1",
   "$type":"System.Web.Http.HttpError, System.Web.Http",
   "Message":"An error has occurred.",
   "ExceptionMessage":"Method not found: 'System.Data.Objects.ObjectContext System.Data.Entity.Infrastructure.IObjectContextAdapter.get_ObjectContext()'.",
   "ExceptionType":"System.MissingMethodException",
   "StackTrace":" at Breeze.WebApi.EFContextProvider 1.get_ObjectContext()\r\n at Breeze.WebApi.EFContextProvider 1.ProcessSaves(Dictionary2 saveMap)\r\n at Breeze.WebApi.EFContextProvider 1.SaveChangesCore(Dictionary2 saveMap)\r\n at Breeze.WebApi.ContextProvider.SaveChanges(JObject saveBundle)\r\n at LearnKnockout.Controllers.CountryController.SaveChanges(JObject saveBundle) in c:\\Users\\nssidhu\\Documents\\Visual Studio 2012\\Projects\\CountryWebAPI\\CountryWebAPI\\Controllers\\CountryController.cs:line 43\r\n at lambda_method(Closure , Object , Object[] )\r\n at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.b__c(Object instance, Object[] methodParameters)\r\n at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)\r\n at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.b__4()\r\n at System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func 1 func, CancellationToken cancellationToken)"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T00:29:55.640

我猜你是怎么陷入这个烂摊子的。

首先，我打赌您正在使用 Visual Studio 中的可视化“管理 NuGet 包”对话框。

其次，我敢打赌你在左上角的组合框中选择了“**包括售前赛”。**这是我可以重现您的经历的唯一方法。请您检查该组合框设置并在此处为我们发表评论吗？

如果是这样，如果项目中没有 EF，NuGet 将安装 EF v.6 alpha，如果项目中没有，则将 EF 5 升级到 EF 6。**哎哟!** 如果您单独升级现有项目的 EF 包，也会发生这种情况。

我强烈建议每个人都坚持“**仅稳定**”设置，除非你绝对确定你想要一个预发布包；然后请记住将其设置回“仅稳定”，因为组合框设置为“粘性”。

是的，我们*可以*在 NuGet 包中限制 EF 版本的上限……也许我们会这样做。坦率地说，这[与 NuGet 指南相反，](http://docs.nuget.org/docs/Reference/Versioning)管理所有版本控制排列非常困难，并且在偏离标准路径时承担责任很重要。

我不清楚您是如何获得缺少*BreezeControllerAttribute的旧版本****Breeze.WebApi.dll***的。***除了安装Breeze.MVC4WebApiClientSample*** NuGet 包之外，您是如何了解*[BreezeController]*属性的？这是唯一可以在其中找到该属性的 NuGet 包......并且安装（或升级到）该包应该已将正确的 Breeze.WebApi.dll 引用传递给伴随的“包”文件夹。

 ***我怀疑您的项目文件有点混乱。**你在 NuGet 地狱**，除非你真的很了解 NuGet，否则你通常最好从头开始重建项目，复制你的自定义代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T18:22:20.820

## 2013 年 10 月 28 日更新：

截至目前，Breeze 1.4.5 已支持 Microsoft 的 ASP.NET WebApi 2 和 Entity Framework 6。请参阅[http://www.breezejs.com/documentation/download](http://www.breezejs.com/documentation/download)。

## 旧帖...

我们尚未使用 Entity Framework 版本 6 ***alpha***测试 Breeze，并且在它至少达到***beta***之前不太可能这样做。

也就是说，JsonFormatter 和 ODataActionFilter 属性与 BreezeController 属性一起仍然存在于最新版本的微风中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T19:54:37.490

由于 EF 6.0 中的命名空间更改而引发缺少方法异常。具体如下：

System.Data.Objects.ObjectContext => System.Data.Entity.Core.Objects.ObjectContext System.Data.EntityState => System.Data.Entity.EntityState

更多信息：[http ://entityframework.codeplex.com/wikipage?title=Updating%20Applications%20to%20use%20EF6](http://entityframework.codeplex.com/wikipage?title=Updating%20Applications%20to%20use%20EF6)

您可以获取源并修改 EFContextProvider.cs 以使用这些命名空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-16T13:46:08.450

正如[ckal](https://stackoverflow.com/a/14060485/1029874)所述，您必须更新 EFContextProvider.cs 并使用 Entity Framework 6 中的新命名空间。

这是更新代码的[要点](https://gist.github.com/al222cv/6008807)。您必须更新到 Breeze.WebApi 项目中的 Entity Framework 6 才能使其工作。

我已经在我自己的项目中对其进行了测试，它似乎和以前一样工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T01:55:04.670

似乎最新的 Nuget Packagae 存在问题（主要是实体 FramewroK 的 alpha 版本）。

我卸载了当前的 BreezeNuget 包，然后安装了早期版本，一切正常（使用旧版本我必须将属性更改为 Jsonformater，oDataActionfilter 而不是 Breezecontroller）

安装包 Breeze.MVC4WebApi -版本 0.78.1***

# java - 如何在显示窗口之前更改 JavaFX 中的 FXML 控制器变量值？

> ID：14017542
> 
> 赞同：5
> 
> 时间：2012-12-24T05:46:50.403
> 
> 标签：java, javafx-2, javafx

我想在`FXML`显示之前更改弹出窗口中的标签和文本。这样做是因为所有的**帮助**项目都非常相似，我想制作一个模板`FXML`，然后相应地更改标签和文本区域的值以减少编码。

我很惊讶我没有遇到模板方法`JavaFX`。如果有更好的方法来解决这个问题，请提出建议。

对于手头的任务，我有以下内容：

```
@FXML
private void documentationAction(ActionEvent action) throws IOException {
    Stage dialogue = new Stage();
    Parent root = null;
    FXMLLoader loader = new FXMLLoader();
    root = loader.load(getClass().getResource("dialogues/dialogue.fxml"));
    Scene scene = new Scene(root);
    /*
     * change text values in title (Label) and text (TextArea)
     * and change the behavior of the findMore button
     */
    dialogue.setTitle("Documentation");
    dialogue.setScene(scene);
    dialogue.show();
} 
```

我希望能够更改`FXM`L 文件中的变量，我为此`getters`在`setters`控制器类中创建了这些变量，但我不知道如何做到这一点。

有办法吗？似乎有必要在多窗口应用程序中的窗口之间更改信息，所以我确信我缺少一些简单的东西。

控制器的更新代码：

```
public class DialogueController implements Initializable {

    @FXML
    private Button more;
    @FXML
    private Button close;
    @FXML
    private TextArea text;
    @FXML
    private Label title;

    public TextArea getText() {
        return text;
    }

    public void setText(String text) {
        this.text.setText(text);
    }

    public Label getTitle() {
        return title;
    }

    public void setTitle(String text) {
        this.title.setText(text);
    }

    @FXML
    public void closeAction(ActionEvent action) {
        // get a handle to the stage
        Stage stage = (Stage) close.getScene().getWindow();
        // do what you have to do
        stage.close();
    }

    @FXML
    public void moreAction(ActionEvent action) {
    }

    @FXML
    public void makeDocumentation(ActionEvent action) {
        this.title.setText("Documentation");
    }

    /**
     * Initializes the controller class.
     */
    @Override
    public void initialize(URL url, ResourceBundle rb) {
    }
} 
```

全对话 FXML

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.net.*?>
<?import java.util.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<AnchorPane id="AnchorPane" padding="$x1" prefHeight="500.0" prefWidth="400.0" styleClass="mainFxmlClass" xmlns:fx="http://javafx.com/fxml" fx:controller="pdbpro.dialogues.DialogueController">
  <children>
    <GridPane alignment="CENTER" prefHeight="400.0" prefWidth="600.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
      <children>
        <Label fx:id="title" alignment="CENTER_LEFT" prefWidth="-1.0" styleClass="title" text="Title" underline="false" visible="true" GridPane.columnIndex="0" GridPane.rowIndex="0">
          <GridPane.margin>
            <Insets fx:id="x1" />
          </GridPane.margin>
        </Label>
        <TextArea fx:id="text" editable="false" focusTraversable="false" prefWidth="200.0" wrapText="true" GridPane.columnIndex="0" GridPane.rowIndex="1">
          <GridPane.margin>
            <Insets bottom="24.0" left="15.0" right="15.0" />
          </GridPane.margin>
        </TextArea>
        <ToolBar GridPane.columnIndex="0" GridPane.rowIndex="2">
          <items>
            <Button fx:id="more" mnemonicParsing="false" text="Find more" />
            <Button fx:id="close" mnemonicParsing="false" onAction="#closeAction" text="Close" />
          </items>
          <GridPane.margin>
            <Insets bottom="14.0" />
          </GridPane.margin>
        </ToolBar>
      </children>
      <columnConstraints>
        <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
      </columnConstraints>
      <padding>
        <Insets fx:id="x1" />
      </padding>
      <rowConstraints>
        <RowConstraints maxHeight="60.0" minHeight="60.0" prefHeight="60.0" valignment="CENTER" vgrow="NEVER" />
        <RowConstraints maxHeight="1.7976931348623157E308" minHeight="50.0" prefHeight="0.0" vgrow="ALWAYS" />
        <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES" />
      </rowConstraints>
    </GridPane>
  </children>
  <stylesheets>
    <URL value="@dialogue.css" />
  </stylesheets>
</AnchorPane> 
```

这些行的完整堆栈跟踪错误

```
FXMLLoader loader = new FXMLLoader();
Parent root = loader.load(getClass().getResource("dialogues/dialogue.fxml"));
DialogueController dc = loader.getController();
dc.makeDocumentation(); //ERROR
Scene scene = new Scene(root);

java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
    at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1440)
    at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:69)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:217)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:170)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:37)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:53)
    at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:28)
    at javafx.event.Event.fireEvent(Event.java:171)
    at javafx.scene.control.MenuItem.fire(MenuItem.java:456)
    at com.sun.javafx.scene.control.skin.ContextMenuContent$MenuItemContainer.doSelect(ContextMenuContent.java:1188)
    at com.sun.javafx.scene.control.skin.ContextMenuContent$MenuItemContainer$6.handle(ContextMenuContent.java:1139)
    at com.sun.javafx.scene.control.skin.ContextMenuContent$MenuItemContainer$6.handle(ContextMenuContent.java:1137)
    at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:69)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:217)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:170)
    at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:38)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:37)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:53)
    at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:33)
    at javafx.event.Event.fireEvent(Event.java:171)
    at javafx.scene.Scene$MouseHandler.process(Scene.java:3324)
    at javafx.scene.Scene$MouseHandler.process(Scene.java:3164)
    at javafx.scene.Scene$MouseHandler.access$1900(Scene.java:3119)
    at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1559)
    at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2261)
    at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:228)
    at com.sun.glass.ui.View.handleMouseEvent(View.java:528)
    at com.sun.glass.ui.View.notifyMouse(View.java:922)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29)
    at com.sun.glass.ui.win.WinApplication$3$1.run(WinApplication.java:73)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1435)
    ... 37 more
Caused by: java.lang.NullPointerException
    at pdbpro.MainController.documentationAction(MainController.java:82)
    ... 42 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T08:31:19.463

我可以看到的一种方法是让您的控制器实现可初始化并实现初始化方法。当控制器被 fxml 加载器创建时，initialize 方法将被自动调用。当调用 initialize 方法时，所有声明的 fxml 对象都应该被初始化并准备好进行定制。

[编辑] 在阅读了[initializable 的文档](http://docs.oracle.com/javafx/2/api/javafx/fxml/Initializable.html)后，它说如果创建了一个没有参数的名为 initialize 的方法，它将被 fxml 加载器自动调用。因此，据我了解，您不需要实现可初始化。只需创建一个没有参数的初始化方法。

如果需要，可以在[fxml 的介绍中](http://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html#controllers)找到更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T08:28:00.650

尝试这个：

```
root = (Parent) loader.load(getClass().getResource("dialogues/dialogue.fxml").openStream());
DialogueController dc = loader.getController();
dc.setTitle("title");
dc.setTextArea("text");
// and so on..
...
dialogue.show(); 
```

断言 DialogueController dc 不为空。并假设“标题”是 fxml 文件中的标签`fx:id=titleLabel`，它应该在您的控制器类中得到支持，如下所示：

```
...
@FXML private Label titleLabel;
...
public void setTitle(String txt) {
    titleLabel.setText(txt);
}
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-20T08:40:29.470

我建议您将所有 FXML 加载代码隐藏到控制器。为此，可以扩展 Stage 类：

控制器：

```
public class DialogueController extends Stage implements Initializable{
    @FXML private Button more;
    @FXML private Button close;
    @FXML private TextArea text;
    @FXML private Label title;

    public DialogueController(Parent parent){
        FXMLLoader loader = new FXMLLoader(getClass().getResource("dialogues/dialogue.fxml"));
        fxmlLoader.setController(this);
        super.setTitle("Documentation");
        try{
            setScene(new Scene((Parent) loader.load()));
        }catch(IOException e){
            e.printStackTrace();        
        }
        /*
         * Change values here
         */     
    }   
} 
```

调用你的控制器：

```
@FXML
private void documantationAction(ActionEvent action) throws IOException{
    DialogueController controller = new DialogueController(null);
    controller.show();
} 
```

# controller - 如何在 Unity 3d 的第一人称角色控制器中旋转相机

> ID：14017544
> 
> 赞同：1
> 
> 时间：2012-12-24T05:47:06.100
> 
> 标签：controller, camera, rotation, character, unity3d

我正在开发一个包含第一人称角色控制器的 Unity 3D 游戏。我正在尝试旋转其顶部的主摄像机，以模拟角色沿直线行走时左右转动头部。我的问题是我的旋转相机的代码似乎干扰了它作为父对象的角色控制器对象的旋转。

这是我的代码。这个问题似乎发生在最后一行。

```
void Update () {
    //Send screen image to controller
    StartCoroutine(ScreenshotEncode());

    //the camera is parented to the Character Controller game object.  
    //Dude
    //  +-Capsule
    //  +-MainCamera

    //This code come directly from the Unity script manual
    DudeBase.transform.Rotate(0, Input.GetAxis("Horizontal") * flrBaseMaxRotateSpeed, 0);
    //get the vector the base in pointing toward
    vctBaseDir = DudeBase.transform.TransformDirection(Vector3.forward);
    //get the speed of the base
    fltBaseSpeed = fltBaseMaxSpeed * Input.GetAxis("Vertical");
    //apply speed and direction to the character controller
    controller.SimpleMove(vctBaseDir * fltBaseSpeed);

    //The camera controller comes from the device in degress in the form of a string.
    //get the heading the controller is pointing toward
    fltCamControllerDir = ParseControllerData(strCamControllerData);
    //get the heading of the base
    fltBaseDir = Mathf.Atan2(vctBaseDir.x, vctBaseDir.z);
    //we want to point the camera the angle as the controller.
    //since the camera is sitting on top of and is parented to the base, it needs to offset by the bases heading
    fltCamDir = fltBaseDir + fltCamControllerDir;
    //set the camera's y axis angle
    MainCam.transform.eulerAngles = new Vector3(0, fltCamDir, 0);  // <=== issue seems to be here
    //if i comment out the last line, the character controller moves and rotates as expected.
    //if i uncomment this line, the camera moves on top of the character controller as expected. But,
    //the character controller itself no longer rotates.
} 
```

如何在不影响其父对象的情况下旋转相机对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T01:17:52.707

Jerdak 的评论是正确的答案：

> 向您的第一人称添加一个新的空子对象并将其命名为`head. Make the camera a child of`head`。

当玩家移动或旋转时，`head`物体会移动或旋转，并带上相机。如果您想独立于机身移动或旋转相机，只需在`head`不接触机身的情况下移动/旋转即可。

# google-bigquery - 大数据集上的扁平化+分区与嵌套记录

> ID：14017546
> 
> 赞同：2
> 
> 时间：2012-12-24T05:47:25.723
> 
> 标签：google-bigquery

我有一个扁平数据集，每一行都包含用户属性（年龄、位置等）、注册和访问日期时间。每天分区。每天约 1000 万访问行，2500 万用户，500 万用户。这现在可以处理几个月的数据，并且在 1 年内，它将是约 30 亿行以上。

为了提高效率和减小大小，我正在考虑转向嵌套行：每个用户都将拥有嵌套记录，只有注册和访问日期时间。

在我做大的改变之前，假设我不会超过每行 64K 的限制，我会相应地改变我的查询。这会比展平行更好吗？

问题：

*   如果我使用嵌套，我会按访问日期松开每日分区，因为我将它们嵌套到一个记录中。（我可以按月分区吗？）

*   加载时，我需要将 CSV 转换为 JSON 并知道将每一行加载到哪个分区，所以我想我会取消分区。

*   较少分区但嵌套的查询性能应该更好？

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T18:02:20.060

1：json数据的实际导入行大小限制是20MB，不是64k。我已经提交了一个文档错误，以便在我们的公共文档中更新它。

1.  嵌套数据可能会在一定程度上提高性能，但在不了解实际查询的情况下，很难知道。它不太可能对性能产生很大影响。但是，它可能会降低您的查询成本。

2.  您可以将多个分区合并，然后按分组或按每个分组来收集每个用户的访问。在生产之前使用较小的数据样本进行尝试可能是个好主意。

我的猜测是，更复杂的查询和加载逻辑将意味着嵌套数据不会带来太多好处。您最好保持数据非规范化和扁平化，按天对数据进行分区，并在查询中需要的表的联合上进行查询。我们正在研究使在查询中指定表范围变得更容易的方法，这可能会有所帮助。

# random - 这会输出一百万次随机洗牌吗？rand() C++

> ID：14017548
> 
> 赞同：1
> 
> 时间：2012-12-24T05:47:52.647
> 
> 标签：random, shuffle

我正在尝试运行一百万次纸牌游戏模拟以返回一定百分比的“赌场优势”。

我对 rand() 函数的理解还不够清楚，无法知道这是否会每次都产生新的随机播放或是否有限制。换句话说，在百万场比赛的某个时刻，是否会出现相同的洗牌模式？

```
 srand(time(NULL));

for (int games=0;games<iGames;games++){

                  ///shuffle///
for (int i=0; i<(iUserDeckSize-1); i++) {
    int r = i + (rand() % (iUserDeckSize-i)); // Random remaining position.
    card temp = cards[i]; cards[i] = cards[r]; cards[r] = temp;
}

// rest of card game code goes here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T00:10:26.747

我相信它是特定于实现的，例如参见这里[C 的 rand() 使用了哪些常用算法？](https://stackoverflow.com/questions/1026327/what-common-algorithms-are-used-for-cs-rand). 但是如果实际的实现开始如此迅速地重复，我会感到震惊，我会认为你至少会进入 int32 允许的数十亿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T00:29:46.360

不，有两个原因（一个你想到过，一个不那么明显）。

您使用的算法是错误的。抛开令人担忧的 -1 （最后一个元素根本不会被洗牌），你有`n^n`可能的运行（接收到的随机数的空间），同时`n!`可能有洗牌。一般来说`n!`，这不是`n^n`导致您有偏差输出的一个因素（即，某些结果会比其他结果更频繁地发生）。我建议要么实现[Knuth-Tares shuffle](http://en.wikipedia.org/wiki/Knuth_shuffle)，要么使用已经实现的算法，例如`random_shuffle`from `<algorithm>`。

也就是说 - 你需要有至少有`n!`状态的 PRNG。根据牌组大小，rand() 可能不够——它通常有 ~48 位，而标准 52 张牌组有 ~225 位状态 ( `log2(52!)`)——换句话说，没有机会击中某些序列（它可能不是一个问题，但更好的 PRNG 的开销可以忽略不计）。我会考虑[随机提升](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_random.html)，因为它有几个很好的 PRNG 实现，并且至少有一个可能足够好（比如52 卡示例的[mt11213b](http://www.boost.org/doc/libs/1_52_0/doc/html/boost/random/mt11213b.html)）。

# iphone - 如何在我的应用程序中从存折访问通行证？

> ID：14017551
> 
> 赞同：6
> 
> 时间：2012-12-24T05:48:23.087
> 
> 标签：iphone, objective-c, ios, ios6, passbook

我正在创建应用程序，在其中添加和显示从 iOS6 的存折应用程序到我的应用程序的通行证。但是当我在模拟器上运行应用程序时，它会显示添加的通行证，但是当我在设备上运行相同的应用程序时，它显示我的存折是空的。

我已经按照[iOS6 教程集成存折您的应用程序](http://blogs.captechconsulting.com/blog/jonathan-tang/ios-6-tutorial-integrating-passbook-your-applications)链接以创建、添加和显示通行证。

为了访问通行证，我使用了以下代码 -

```
NSArray * passArray = [_passLib passes];
NSLog(@"number of passes in library are: %d",[passArray count]);

//if more tha one pass in library, just use the first one.
if ([passArray count] > 0)
{

    for (int i = 0; i<[passArray count]; i++) 
    {    
    PKPass *onePass = [passArray objectAtIndex:i]; 

    //access general fieldnames
    NSLog(@"%@",[onePass localizedName]);
    NSLog(@"%@",[onePass organizationName]);

    //access a specific field name
    NSLog(@"%@",[onePass localizedValueForFieldKey:@"rewards"]);    
    }
} 
```

如果我们在设备上运行应用程序以支持存折集成，是否需要进行任何更改？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T05:21:10.647

创建类似于 passTypeIdentifier 的 AppId。例如，如果您的 passTypeIdentifier 是 pass.abc.xyz 那么您的 AppId 必须是 com.abc.xyz 。在创建配置文件时，请使用此 appId 并为您的应用程序使用此配置文件。然后，只有您能够区分存折中可用的通行证。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T22:33:43.063

当您在模拟器上运行应用程序时，它基本上会忽略**passTypeIdentifier** ，Passbook应用程序中的通行证是使用创建的。因此，如果模拟器上的 Passbook 应用程序至少有一次通过，它将显示在您的应用程序中。

另一方面，在设备**PKPassLibrary**上，仅使用使用**passTypeIdentifier**创建的通行证进行初始化，该通行证等于您在配置文件中拥有并在应用程序的权利中设置的通行证。严格来说 - 只有你自己的通行证。

请记住，您签署代码时使用的 App ID 也应该在 Provisioning 门户上**为 Passes 启用。**

# javascript - 如何在 Windows 8 中显示整页启动画面

> ID：14017562
> 
> 赞同：0
> 
> 时间：2012-12-24T05:49:27.703
> 
> 标签：javascript, windows, iframe, microsoft-metro, splash-screen

有谁知道 Windows 8 App 是否允许整页启动画面？我查看了 app.manifest，它需要一张 600 x 300 的彩色背景图片。

我还研究了缩放，但这似乎适用于分辨率更高的屏幕。因此，即使我提供 1116 x 540 的图像，它仍然会在更高分辨率的显示器中显示相对于标准图像相同的图像。

我现在能想到的唯一方法是以某种方式关闭启动画面并在 iframe 中添加我自己的。（我的应用程序是通过 iframe 加载的）或者有人知道另一种方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:07:30.057

不，您描述的方式是解决此问题的正确方法。但是请考虑用户可能只想尽快进入您的应用程序。

此[代码示例](http://code.msdn.microsoft.com/windowsapps/Splash-screen-sample-89c1dc78)可能会对您有很大帮助。

# python - Qprogressbar 停止滑动

> ID：14017568
> 
> 赞同：0
> 
> 时间：2012-12-24T05:50:05.853
> 
> 标签：python, pyqt

对于我正在开发的 Python 应用程序，我需要使用 QT 4.7 显示一个滑动进度条，我可以做到，但它只能在 QmessageBox 可见时滑动，这非常令人讨厌，我尝试了许多不同的方式来保持它在没有消息框的情况下滑动而没有任何成功，我在互联网上没有找到任何关于它的信息；这是我显示栏的代码：

```
 d=QtGui.QMainWindow()
    screen = QtGui.QDesktopWidget().screenGeometry()
    size =  self.progressBar.geometry()
    self.progressBar.move((screen.width()/2)-size.width()/2,(screen.height()/2)-size.height()-100)
    self.progressBar.show() 
```

为了让它动起来，我必须添加这个：

```
 d=QtGui.QMainWindow()
        infoString="sto creando mmasgisDB!"
        QtGui.QMessageBox.information(d,"Info", infoString) 
```

一旦我单击“确定”按钮，该栏就会冻结。所以我认为有一些我不知道与 QMainWindow 相关的东西，我需要更多专家的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:38:38.010

您是否尝试过创建 a`QMessageBox`并将其分配给一个变量，就像您为主窗口所做的那样。然后`QMessageBox.setInformation()`设置你想要的字符串。之后你可以试试`QMessageBox.execute()`。

您也可以尝试使用 QMessageBox`activate()`和`show()`机制。我希望它对 PyQT 也一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:54:41.770

如果您希望您的小部件在另一个小部件中正确显示，则必须将它们添加到布局中：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

import sip
sip.setapi('QString', 2)
sip.setapi('QVariant', 2)

from PyQt4.QtCore import *
from PyQt4.QtGui import *

class windowSlider(QMainWindow):
    def __init__(self, parent=None):
        super(windowSlider, self).__init__(parent)

        self.centralwidget = QWidget(self)

        self.progressBar = QProgressBar(self.centralwidget)
        self.progressBar.setValue(24)

        self.horizontalSlider = QSlider(self.centralwidget)
        self.horizontalSlider.setOrientation(Qt.Horizontal)

        self.verticalLayout = QVBoxLayout(self.centralwidget)
        self.verticalLayout.addWidget(self.progressBar)
        self.verticalLayout.addWidget(self.horizontalSlider)

        self.setCentralWidget(self.centralwidget)

if __name__ == "__main__":
    import  sys

    app = QApplication(sys.argv)
    main = windowSlider()
    main.show()
    sys.exit(app.exec_()) 
```

# firefox-addon-sdk - 如何使用 Firefox 插件 SDK 访问搜索栏？

> ID：14017569
> 
> 赞同：0
> 
> 时间：2012-12-24T05:50:06.783
> 
> 标签：firefox-addon-sdk

是否可以使用[Firefox 的插件 SDK](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/index.html)访问搜索栏？

我已经看到了有关如何访问菜单、上下文菜单和书签侧边栏的示例。但我找不到任何有关如何访问搜索栏的文档或教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T15:22:41.937

```
const winUtils = require("sdk/deprecated/window-utils");
var searchbar = winUtils.activeBrowserWindow.document.getElementById("searchbar"); 
```

# android - 旋转设备时出现 OutOfMemory 错误

> ID：14017570
> 
> 赞同：0
> 
> 时间：2012-12-24T05:50:11.310
> 
> 标签：android, rotation, imageview, out-of-memory

我制作了一个图像查看器项目，`TouchImageView`用于实现缩放、拖放、全景查看器等。

查看器工作正常，除了`OutOfMemory`旋转设备时出现错误，特别是全景图（不是很大，3.5 MB 应该很容易被 Galaxy Note 处理）。这是违规行：

```
final Bitmap myBitmap = BitmapFactory.decodeFile(filename); 
```

当然，因为它是全景图，所以我想缩放，所以在解码时压缩图像，如此处所建议[的](https://stackoverflow.com/questions/11116913/outofmemoryerror-imageview)，不是一种选择（我已经尝试过，并且有效，但是低质量扼杀了全景图的想法）。

我认为我的项目中没有内存泄漏，因为它不是内存密集型的，只会在旋转时冻结，并且违规行仅在旋转时执行一次。我可以看到全景在屏幕上对角线冻结。我认为问题在于 ImageView 的“旋转动画”。也许我应该禁用它？如果是这样，怎么做？

下面是崩溃日志。

谢谢！！

**日志-**

```
58:38.845: W/dalvikvm(2465): threadid=1: thread exiting with uncaught exception (group=0x40c531f8)
12-24 02:58:38.850: E/AndroidRuntime(2465): FATAL EXCEPTION: main
12-24 02:58:38.850: E/AndroidRuntime(2465): java.lang.OutOfMemoryError
12-24 02:58:38.850: E/AndroidRuntime(2465):     at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
12-24 02:58:38.850: E/AndroidRuntime(2465):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:587)
12-24 02:58:38.850: E/AndroidRuntime(2465):     at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:389)
12-24 02:58:38.850: E/AndroidRuntime(2465):     at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:418)
12-24 02:58:38.850: E/AndroidRuntime(2465):     at com.floritfoto.apps.xvf.Foto.pic(Foto.java:180)
12-24 02:58:38.850: E/AndroidRuntime(2465):     at com.floritfoto.apps.xvf.Foto.onCreate(Foto.java:383)
12-24 02:58:38.850: E/AndroidRuntime(2465):     at android.app.Activity.performCreate(Activity.java:4465)
12-24 02:58:38.850: E/AndroidRuntime(2465):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
12-24 02:58:38.850: E/AndroidRuntime(2465):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
12-24 02:58:38.850: E/AndroidRuntime(2465):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
12-24 02:58:38.850: E/AndroidRuntime(2465):     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3363)
12-24 02:58:38.850: E/AndroidRuntime(2465):     at android.app.ActivityThread.access$700(ActivityThread.java:127)
12-24 02:58:38.850: E/AndroidRuntime(2465):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1163)
12-24 02:58:38.850: E/AndroidRuntime(2465):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-24 02:58:38.850: E/AndroidRuntime(2465):     at android.os.Looper.loop(Looper.java:137)
12-24 02:58:38.850: E/AndroidRuntime(2465):     at android.app.ActivityThread.main(ActivityThread.java:4507)
12-24 02:58:38.850: E/AndroidRuntime(2465):     at java.lang.reflect.Method.invokeNative(Native Method)
12-24 02:58:38.850: E/AndroidRuntime(2465):     at java.lang.reflect.Method.invoke(Method.java:511)
12-24 02:58:38.850: E/AndroidRuntime(2465):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
12-24 02:58:38.850: E/AndroidRuntime(2465):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
12-24 02:58:38.850: E/AndroidRuntime(2465):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T06:08:28.063

首先尝试调试代码并检查堆大小如何增加，然后查看以下[链接](http://developer.android.com/training/displaying-bitmaps/index.html)

了解 android 如何使用其尺寸计算图像大小。要缩小图像，如果您想以编程方式缩小图像，可以尝试以下代码

```
public static Bitmap getResizedBitmap(Bitmap image, int newHeight, int newWidth) {
    int width = image.getWidth();
    int height = image.getHeight();
    float scaleWidth = ((float) newWidth) / width;
    float scaleHeight = ((float) newHeight) / height;
    // create a matrix for the manipulation
    Matrix matrix = new Matrix();
    // resize the bit map
    matrix.postScale(scaleWidth, scaleHeight);
    // recreate the new Bitmap
    Bitmap resizedBitmap = Bitmap.createBitmap(image, 0, 0, width, height,
            matrix, false);
    return resizedBitmap;
} 
```

如果您想手动缩小尺寸，您可以将图像的尺寸更改为原始尺寸的大约一半

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-24T05:54:28.073

试试这个功能..

```
public static Bitmap decodeFile(File f,int WIDTH,int HIGHT){
        try {
            //Decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f),null,o);

            //The new size we want to scale to
            final int REQUIRED_WIDTH=WIDTH;
            final int REQUIRED_HIGHT=HIGHT;
            //Find the correct scale value. It should be the power of 2.
            int scale=1;
            while(o.outWidth/scale/2>=REQUIRED_WIDTH && o.outHeight/scale/2>=REQUIRED_HIGHT)
                scale*=2;

            //Decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        } catch (FileNotFoundException e) {}
        return null;
    } 
```

# ffmpeg - 使用 ffmpeg 将 RTP 数据包转换为 WAV 或 AU

> ID：14017573
> 
> 赞同：1
> 
> 时间：2012-12-24T05:50:39.000
> 
> 标签：ffmpeg, rtp, audio-converter

我有一个文件，其中包含一系列包装在 UDP/IP 数据包中的 RTP 数据包。我想将此文件转换为 WAV 或 AU 文件，并被告知 ffmpeg 可能能够完成这项工作。但是，该工具的行为不像我预期的那样。出于某种原因，它需要一个 SDP 文件，但我没有这样的文件，我想知道为什么需要它，因为 RTP 数据包似乎包含足够的信息来进行转换。它还报告错误的有效负载类型。

有任何想法吗？以下是我尝试过的。输入文件 alaw.rtp 中的 RTP 数据包只有有效载荷类型 8（A-law）和 72（RTCP 相关），所以我不知道有效载荷类型 105 的来源。

```
$ ffmpeg -f rtp -i alaw.rtp alaw.au
...
[rtp @ 0x9dbdfe0] Unsupported RTP version packet received
    Last message repeated 89 times
[rtp @ 0x9dbdfe0] Unable to receive RTP payload type 105 without an SDP file describing it
[rtp @ 0x9dbdfe0] Estimating duration from bitrate, this may be inaccurate
Input #0, rtp, from 'alaw.rtp':
  Duration: N/A, bitrate: N/A
File 'alaw.au' already exists. Overwrite ? [y/N] y
Output #0, au, to 'alaw.au':
Output file #0 does not contain any stream 
```

这是我用过的ffmpeg版本

```
ffmpeg version 0.10.6-6:0.10.6-0ubuntu0jon1~lucid2
built on Nov 12 2012 15:20:22 with gcc 4.4.3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-14T11:17:08.107

如果您打算听到 .pcap 文件中的声音，您可以按照以下步骤操作。

安装 Wireshark：

1.  文件 -> 打开文件名.pcap

2.  分析 -> 解码为

    从列表中选择 RTP，然后单击应用

3.  电话 -> RTP -> 显示所有流 -> 分析

4.  然后点击播放器->解码

5.  启用为每个文件显示的复选框并播放

6.  现在你可以在这里流。

注意：确保您安装了最新版本的 Wireshark。

# android - 单击按钮时更改arrayadapter布局资源

> ID：14017576
> 
> 赞同：0
> 
> 时间：2012-12-24T05:51:19.127
> 
> 标签：android, layout, resources, listadapter

我有一个`listview`，它显示得很好，但是当我单击“编辑”操作按钮时，我希望`listview`使用不同的布局资源，以便按钮显示在列表中的每个项目旁边。

```
layout before: listitem_routine
layout I want after "edit" action button clicked: listitem_routine_edit 
```

这是我的有效代码：

```
 @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_routines);

    datasource = new RoutinesDataSource(this);
    datasource.open();

    List<Routine> values = datasource.getAllRoutines();

    ArrayAdapter<Routine> adapter = new ArrayAdapter<Routine>(this,
        R.layout.listitem_routine, R.id.listitem_routine_name, values);
    setListAdapter(adapter);
  }

  @Override
  public boolean onOptionsItemSelected(MenuItem item) {
      ArrayAdapter<Routine> adapter = (ArrayAdapter<Routine>) getListAdapter();
      // Handle item selection
      switch (item.getItemId()) {
      case R.id.button_routines_edit:
            // change the list view adapter resource layout to *_edit
            // hide this button and show the "done editing (checkmark)" button
          return true;
      default:
          return super.onOptionsItemSelected(item);
      }
  } 
```

我知道这种情况很`R.id.button_routines_edit`有效，因为我在点击它时做了吐司。很好吃。我从那以后删除了该代码...

但是有什么方法，我将如何在`R.id.button_routines_edit`单击时更改布局资源？所有代码都在那里，我只是不知道如何更改布局资源，然后显然更新`listview`以显示新的行布局......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T05:57:57.767

单击操作按钮后，使用新资源重新加载列表视图，如下所示。

```
 @Override
public boolean onOptionsItemSelected(MenuItem item) {

  // Handle item selection
  switch (item.getItemId()) {
  case R.id.button_routines_edit:
         ArrayAdapter<Routine> adapter = new ArrayAdapter<Routine>(this,
    R.layout.listitem_routine_edit, R.id.listitem_routine_name, values);

setListAdapter(adapter);
      return true;
  default:
      return super.onOptionsItemSelected(item);
  }
} 
```

# bash - 使用 shell 脚本合并两个属性文件

> ID：14017577
> 
> 赞同：10
> 
> 时间：2012-12-24T05:51:20.263
> 
> 标签：bash, shell, unix

如何合并两个属性文件，例如使用 shell 脚本： - 如果我有两个属性文件，例如

```
first.properties
/test/file="anish"
/test/version=3.0

second.properties
/test/author=nath
/test/version=2.0 
```

如果我将 first.properties 合并到 second.properties 上，那么常见的现有属性应该取自 first.properties 所以我的输出应该看起来像

```
final.properties
/test/file="anish"
/test/version=3.0
/test/author=nath 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-24T06:00:48.627

其他方式：

```
$ awk -F= '!a[$1]++' first.properties second.properties 
```

此 awk 的输入是第一个文件的内容，然后是第二个文件。`!a[$1]++`仅打印特定键的第一次出现，从而删除出现在第二个文件中的重复项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T05:58:41.260

```
$ cat first.properties second.properties | awk -F= '!($1 in settings) {settings[$1] = $2; print}'
/test/file="anish"
/test/version=3.0
/test/author=nath 
```

# html - 有没有办法使html模块化

> ID：14017584
> 
> 赞同：5
> 
> 时间：2012-12-24T05:52:15.880
> 
> 标签：html, module

我想把html分成几个部分，比如模块。例如：

*   domHeader.html
*   bodyheader.html
*   内容.html
*   页脚.html

所有页面必须具有相同的 domHeader、bodyHeader 和 footer 以及不同的内容。我只需要在所有页面中引用它们。如果我想更改页脚，我不需要更改所有页面页脚。我只需要更改 footer.html。

我知道java和其他语言可以做。我只是一个初级的web开发人员，只知道html css js，没有个人网站。

我查看了一些 js 模板，但没有找到此功能。有简单的方法吗？节点.js ??

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T06:03:56.797

最简单和“正确”的方法是使用服务器端代码（无论语言如何），但如果您受限于浏览器，您可以使用 JavaScript 来完成。创建一个基本的 HTML 文件并执行 Ajax 请求以填充一些占位符（带有 HTML 片段，存储在单独的文件中）。当与页面交互（单击链接等）而不是离开页面时，只需执行更多 Ajax 请求并替换那些占位符（这样您最终会得到一个单页站点）。

另一种选择是让许多页面使用相同的脚本，并且所有页面都将使用 Ajax 请求以相同的方式在加载时“组装”它们的内容。

如果您有兴趣，我可以给您一些示例，但我应该指出，如果关闭 JavaScript，这将使您的网站无法使用。更糟糕的是，它不会被搜索引擎正确解析（即您的网站排名很差，人们无法通过谷歌搜索轻松找到它）。由于这些原因，我强烈建议学习一些服务器端编程（是否使用 Node.js 或其他取决于您）。

# iphone - StopUpdatingLocation 方法不适用于 iOS5

> ID：14017587
> 
> 赞同：4
> 
> 时间：2012-12-24T05:52:26.863
> 
> 标签：iphone, objective-c, cocoa-touch, ios5, ios4

我正在开发地图应用程序，

我正在尝试使用`[locationManager stopUpdatingLocation];`方法来停止位置服务。

它似乎在 iOS4.3 中运行良好，但在 iOS5 中，它不起作用。

请任何人建议我如何在 iOS5 中停止定位服务？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-24T06:31:25.893

有时会发生位置管理器即使在之后也不会停止`stopUpdationLocations`。

您需要为该集合释放您的位置管理器：

```
locationManager = nil; 
```

这应该写在之后：

`[locationManager stopUpdatingLocation];`

另外，请注意不要在将 locationManager 对象设置为 nil 后调用它，否则您的应用程序将崩溃。

如果它仍然没有停止位置服务，那么有解决方案，如果您以后不想使用它，只需使用 BOOL 变量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-24T06:38:10.660

您可以从以下两个链接获得帮助：

**链接-1：**

[http://iphonedevsdk.com/forum/iphone-sdk-development/2299-cllocationmanager-stopupdatinglocation-not-working.html](http://iphonedevsdk.com/forum/iphone-sdk-development/2299-cllocationmanager-stopupdatinglocation-not-working.html)

**请参阅上面链接中的 site_reg 的答案：**

我遇到了同样的问题，似乎可以通过在 .m 文件中声明一个静态 BOOL 并在输入 didUpdateToLocation 方法时检查它来解决。

```
@implementation MyFile
@synthesize MySynth;
static BOOL haveAlreadyReceivedCoordinates = NO; 
```

然后在您的 didUpdateToLocation 方法中：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {

    if(haveAlreadyReceivedCoordinates) {
        return;
    }
    haveAlreadyReceivedCoordinates = YES;
    ...
} 
```

从技术上讲，这不会使其停止接收更新，但它将忽略第一个更新之后的任何更新。如果您的应用程序依赖于仅获取一个位置更新来完成其工作，那么这应该会有所帮助。

**编辑-1：**

同样，一旦完成，您可以在行`locationManager.delegate = nil;`后添加`[locationManager stopUpdatingLocation];`。

**链接-2：**

[为什么 self.locationManager stopUpdatingLocation 不停止位置更新](https://stackoverflow.com/questions/9469741/why-self-locationmanager-stopupdatinglocation-doesnt-stop-location-update)

**请参阅上面链接中 jnic 的答案：**

> 对面的`startMonitoringSignificantLocationChanges`不是 `stopUpdatingLocation`，是的 `stopMonitoringSignificantLocationChanges`。
> 
> 您可能希望替换 `startMonitoringSignificantLocationChanges`为 `startUpdatingLocation`以进行更定期的更新，除非您有特定原因仅监视重大位置更改。
> 
> 查看[CLLocation 文档](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html) 以获取更多详细信息。

我添加了链接中的答案只是为了确保即使提供的链接将来出现故障，该答案也是有用的。

# c++ - 使用指针向量创建线程

> ID：14017591
> 
> 赞同：0
> 
> 时间：2012-12-24T05:53:13.173
> 
> 标签：c++, c++11

好的新尝试，

我将我的代码从正常更改`vector<Individual>`为`vector<shared_ptr<Individual>>`. 从那以后，我的线程代码不起作用，我不知道如何修复它。Start() 是 Individual 的 void 成员，但是如果只有指向它们的指针，我该如何称呼它？

```
std::vector<thread> threads;
for (int i=0;i<(Individuals.size()-howManyChampions-howManyMutations);i++) {
    threads.push_back(thread(&Individual::start,&Individuals.at(i)));
    if (threads.size() % 5 == 0) {
        for(auto& thread : threads){
            thread.join();
        }
        threads.clear();
    }
}
for(auto& thread : threads){
    thread.join();
} 
```

当我将它改回向量和非并行版本时，它可以工作：

```
 for (int i=0;i<(int)Individuals.size();i++) {
    Individuals.at(i)->start();
} 
```

像魅力一样工作，也是。所以我认为线程 push_back 有问题？错误消息（粗略翻译）是：

```
 instance created from »_Res std::_Mem_fn<_Res (_Class::*)(_ArgTypes ...)>::operator()(_Tp&, _ArgTypes ...) const [mit _Tp = std::shared_ptr<Individual>*, _Res = void, _Class = Individual, _ArgTypes = {}]«|
 instance created from »void std::_Bind_result<_Result, _Functor(_Bound_args ...)>::__call(std::tuple<_Args ...>&&, std::_Index_tuple<_Indexes ...>, typename std::_Bind_result<_Result, _Functor(_Bound_args ...)>::__enable_if_void<_Res>::type) [mit _Res = void, _Args = {}, int ..._Indexes = {0}, _Result = void, _Functor = std::_Mem_fn<void (Individual::*)()>, _Bound_args = {std::shared_ptr<Individual>*}, typename std::_Bind_result<_Result, _Functor(_Bound_args ...)>::__enable_if_void<_Res>::type = int]«|
 instance created from »std::_Bind_result<_Result, _Functor(_Bound_args ...)>::result_type std::_Bind_result<_Result, _Functor(_Bound_args ...)>::operator()(_Args&& ...) [mit _Args = {}, _Result = void, _Functor = std::_Mem_fn<void (Individual::*)()>, _Bound_args = {std::shared_ptr<Individual>*}, std::_Bind_result<_Result, _Functor(_Bound_args ...)>::result_type = void]«|
 instance created from »void std::thread::_Impl<_Callable>::_M_run() [mit _Callable = std::_Bind_result<void, std::_Mem_fn<void (Individual::*)()>(std::shared_ptr<Individual>*)>]«|
 instanziiert von hier|
 Pointer to element type »void (Individual::)()« with Objecttype »std::shared_ptr<Individual>« incompatible
 Return-Command with value in »void« returning Function [-fpermissive] 
```

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:33:25.103

试试这个 ：

```
threads.push_back(thread(&Individual::start,Individuals.at(i).get())); 
```

`shared_ptr`您可以通过with`get`方法访问指针保持。但是，您应该确保`shared_ptr`在加入所有线程之前不要处理 this 的所有实例，否则它们将有一个悬空指针`Individual`.

# asp.net - 带有表单身份验证的 Web API 匿名服务访问

> ID：14017595
> 
> 赞同：2
> 
> 时间：2012-12-24T05:53:58.017
> 
> 标签：asp.net, web-config, asp.net-web-api, forms-authentication

我正在尝试确定如何在表单身份验证下配置对 Web API 控制器服务的访问。如果我通过添加授权元素添加授权配置以拒绝所有匿名用户：

<authorization>
   <!-- 拒绝所有匿名用户 -->
   <deny users="?" />
</授权>

只能按预期访问登录页面。但我也想访问从控制器返回的列表。我将 [AllowAnonymous] 属性添加到一个简单的服务，该服务返回用于填充下拉菜单的值。例如：

```
namespace WebAPI.Controllers
{
    public class RegisterController : ApiController
    {
        [AllowAnonymous]
        public List<ListElement> GetActivitiesList()
        {
            List<ListElement> li = new List<ListElement>();

            li.Add(new ListElement() { Id = 1, Text = "Item 1" });
            li.Add(new ListElement() { Id = 2, Text = "Item 2" });
            li.Add(new ListElement() { Id = 3, Text = "Item 3" });

            return li;

        }

    }
} 
```

我将控制器目录添加到 web.config 中的允许列表中：

<location path="Controllers">
   <system.web>
   <authorization>
      <allow users="*" />
   </authorization>
   </system.web>
</location>

如果我浏览示例页面以调用控制器，即使我添加了 [AllowAnonymous] 属性，表单身份验证仍会通过 302 重定向拒绝访问登录页面。如果我删除整个站点的授权元素“<deny users="?" />”，我可以使用 [Authorize] 和 [AllowAnonymous] 属性控制访问。

目标是能够在几个页面上为匿名用户使用特定服务（如注册），而其余的站点访问仅限于经过身份验证的用户。访问服务与访问文件并不完全相同，所以我的猜测是我必须为这种情况编写一个特殊的处理程序，但我不确定如何去做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T06:28:00.290

首先，当您使用 ASP.NET MVC 时，不要使用老式的 ASP.NET 允许/拒绝机制来控制访问。我不认为这是受支持的，并且可能会在您的站点（[源代码](https://stackoverflow.com/questions/570769/problem-with-authorization-with-iis-and-mvc/571075#571075)）中创建安全漏洞。在 ASP.NET MVC 中控制访问的正确方法是在您的问题中提到的控制器类和/或方法上使用 [Authorize] 和 [AllowAnonymous] 属性。

如果你想让你的整个应用程序除了一对夫妇之外的每个方法都需要登录，你可以将类级别的 [Authorize] 属性应用于所有控制器，然后在方法级别应用 [AllowAnonymous] 属性对于那些不需要身份验证的方法。还有一种编写 FilterProvider 的方法，它会以编程方式自动将 [Authorize] 属性应用到任何尚未应用此类属性的控制器。这很方便，因为这样您就不会意外忘记应用 [Authorize] 属性。看[这篇文章](http://farm-fresh-code.blogspot.com/2011/04/default-authorization-filter-provider.html)有关如何执行此操作的详细信息。请注意，MVC4 中引入的 [AllowAnonymous] 属性与作者在文章中描述的自定义 [Public] 属性执行相同的功能。另请参阅[这篇文章](http://blogs.msdn.com/b/rickandy/archive/2011/05/02/securing-your-asp-net-mvc-3-application.aspx)，其中讨论了一般保护 MVC 应用程序的内容。两篇文章都有点过时（2011 年），但基本思想仍然合理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:16:40.770

所以首先我们对应用程序的其余部分一无所知——是 MVC 还是 WebForms？

如果您的应用程序是 MVC，我完全同意 Brian 的观点，即您应该在所有控制器上使用 [Authorize] 和 [AllowAnoynmous]。

如果你不能这样做——你确实可以在规则中“打洞”——但你需要使用“真实”的 URL，比如

..是的 - 小心;）

# android - sqlite和mysql android之间的数据同步

> ID：14017598
> 
> 赞同：4
> 
> 时间：2012-12-24T05:54:20.263
> 
> 标签：android, database, synchronization

目前我正在开发一个应用程序，在该应用程序中，当设备上没有互联网连接时，我使用 sqlite 数据库，并在互联网可用时使用 Web 服务。

我不得不问，同步的最佳方法是什么？

*   是否可以通过设置标志并检查更新然后同步来实现。
*   或者有任何工具可以解决这个问题。
*   或任何其他可用的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T05:56:41.920

你可以做一件事：

每当您拨打网络电话时，返回一个字段值“LastSyncedDate”，将此日期值存储在 Android 应用程序中。

因此，每当您下次拨打网络电话时，请在网络电话中发送此存储值。

**注意：** 此答案用于检查在 android 应用中进行的最后同步。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T06:00:02.510

我认为做一个`boolean function`就像： -

```
public static boolean isNetworkAvailable(Context context) {
    ConnectivityManager connectivityManager = (ConnectivityManager) context
            .getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo info = connectivityManager.getActiveNetworkInfo();
    if (info == null)
        return false;

    return info.isConnected();
} 
```

& 检查网络是否可用：- 调用 Web 服务，否则调用你的 SQLite 数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T17:56:30.830

SymmetricDS Pro 是一款用于在 Android 上同步 SQLite 数据库的工具。

> SymmetricDS 现在可以在 Android 移动计算平台上使用其支持 Web 的容错数据库同步软件。Android 客户端遵循所有相同的概念，并为 Android 带来与全功能、基于 Java 的 SymmetricDS 客户端相同的所有核心 SymmetricDS 功能。客户端被设计为作为一个库被引用，以便与需要同步其 SQLite 数据库的 Android 应用程序在进程内运行。

[同步 Android 应用程序](http://www.jumpmind.com/blog/synchronizing-android-applications-part1)

# ajax - 如何在下拉项目选择期间在文本字段中显示对象值

> ID：14017604
> 
> 赞同：0
> 
> 时间：2012-12-24T05:55:22.730
> 
> 标签：ajax, jsf, object, selectonemenu

下拉列表：

```
<h:outputLabel value="#{build.approvedRecons}" for="reconSearchFunctionalAreaID"></h:outputLabel>
    <p:selectOneMenu style="width:200px;" id="reconSearchFunctionalAreaID" >
        <f:selectItem itemValue="-Select One-" itemLabel="-Select One-" />
         <f:selectItems value="#{approvedReconDetailsBean.reconItemList}"/>
          <p:ajax update="@form" listener="#{approvedReconDetailsBean.reconDetailsDisplay}" event="onChange"></p:ajax>
    </p:selectOneMenu>............<h:outputLabel for="reconNameID" value="#{build.appvReconName}" />
                 <h:outputText value="#{build.colon}" />
                 <h:outputText value="#{approvedReconDetailsBean.reconCtxVO.reconID}" id="reconNameID" /> 
```

听者：

```
public void reconDetailsDisplay(SelectEvent event){

    ReconContextVO tempReconContextVO = ((ReconContextVO) event.getObject());
    ReconContextVO reconCtxVO1 = new ReconContextVO(); 
    reconCtxVO1.setReconID(tempReconContextVO.getReconID());
    reconCtxVO1.setReconName(tempReconContextVO.getReconName());
    reconCtxVO1.setTxnProcessingType(tempReconContextVO.getTxnProcessingType());
    reconCtxVO1.setTxnProcessingType(tempReconContextVO.getTxnProcessingType());
    this.setReconCtxVO(reconCtxVO1);
} 
```

`reconItemList`是类型 `List<ReconContextVO>`。在我的 bean 中，我转换`reconsList`为`reconItemList`. `ReconContextVO`包含

```
private String reconName; 
private String txnProcessingType; 
private String txnProcessingLevel; 
// and their setter & getters 
```

现在我想在下拉列表更改的文本字段中显示, `reconName`。我像上面的代码一样编写了 ajax listner 方法。我不明白。`txnProcessingType``txnProcessingLevel`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:38:07.393

您的具体问题是由`<p:ajax>`. `event="onChange"`无效。它应该是`event="change"`（这已经是默认设置，因此可以安全地省略）。监听器方法参数也是无效的，应该是`AjaxBehaviorEvent`.

但是，毕竟，您不需要为此使用侦听器方法。您可以`<p:selectOneMenu value>`直接将 绑定到 bean 属性。

```
<p:selectOneMenu value="#{approvedReconDetailsBean.reconCtxVO}">
    <f:selectItem itemValue="-Select One-" itemLabel="-Select One-" noSelectionOption="true" />
    <f:selectItems value="#{approvedReconDetailsBean.reconItemList}" />
    <p:ajax update="reconDetails" />
</p:selectOneMenu>

<h:panelGroup id="reconDetails">
    <h:outputText value="#{approvedReconDetailsBean.reconCtxVO.reconID}" />
    <h:outputText value="#{approvedReconDetailsBean.reconCtxVO.reconName}" />
    <h:outputText value="#{approvedReconDetailsBean.reconCtxVO.txtProcessingType}" />
    <h:outputText value="#{approvedReconDetailsBean.reconCtxVO.txnProcessingLevel}" />
</h:panelGroup> 
```

请注意，我假设您已经`Converter`为该对象设置了 a 并且它`equals()`已正确实现。如果没有正确完成，您应该会收到转换/验证错误。

# c# - 是否可以在 Silverlight 中使用 MediaElement 仅缓冲视频文件的指定片段？

> ID：14017615
> 
> 赞同：1
> 
> 时间：2012-12-24T05:56:51.993
> 
> 标签：c#, silverlight-5.0, mediaelement

我有一个场景，我必须从多个视频文件中播放某些片段。当我试图实现它时，完整的视频会缓冲到我的临时文件夹中。因为我使用的文件是非常大的文件（> 500MB），所以缓冲需要时间，并且在缓冲期间播放不流畅。由于我只需要播放视频中的一小部分，是否可以只缓冲指定的片段而不是完整的文件？

# wcf - Oracle Apex 身份验证机制

> ID：14017616
> 
> 赞同：2
> 
> 时间：2012-12-24T05:56:55.023
> 
> 标签：wcf, authentication, oracle-apex

我是 oracle apex 的新手，我需要了解 Oracle Apex 执行的身份验证机制。基本上，我使用的是 LDAP 身份验证，一旦用户/密码通过身份验证，在会话到期之前不会再进行身份验证。

该过程是内置的，任何人都可以让我知道它经过身份验证后会发生什么，例如创建 cookie/会话或任何其他机制？

这个想法是将 asp.net 网站与 Oracle apex（在 iframe 中）集成。登录页面将存在于 asp.net 网站中，一旦用户单击提交按钮，asp.net 网站和 Oracle Apex 都应处理身份验证机制。

我已经完成了 windows 身份验证，需要探索更多选项（如 ldap 身份验证、集成 WCF/webservice 身份验证）。为帮手点赞。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-10T04:41:54.610

[APEX 文档中的此页面](http://docs.oracle.com/cd/E37097_01/doc/doc.42/e35125/sec_authentication.htm)解释了用户身份验证的过程并指导您完成可用选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T05:41:52.177

听起来您正在寻找的是“会话管理”。简单浏览一下[Oracle 的文档](http://docs.oracle.com/cd/E23903_01/doc/doc.41/e21674/concept_ses.htm)后，Oracle Apex 服务器似乎生成了一个会话 ID，该会话 ID 作为 URI 的一部分通过底层 http(s) 通道传递。Oracle 文档还谈到了会话超时和类似的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-02T20:13:22.017

另一种选择可能是使用 Thoth 网关并使用 windows 集成身份验证。请参阅“透特中不在 mod_plsql 中的功能”部分

[https://github.com/mortenbra/thoth-gateway](https://github.com/mortenbra/thoth-gateway)

来自站点的片段：集成 Windows 身份验证（如果包含 Thoth 网关的虚拟目录设置了集成 Windows 身份验证，您可以通过 owa_util.get_cgi_env('LOGON_USER') 获取经过身份验证的用户的用户名）

# ios - 隐藏 UISearchBar 直到用户滚动？

> ID：14017618
> 
> 赞同：12
> 
> 时间：2012-12-24T05:57:12.413
> 
> 标签：ios, ios6, uisearchbar

我在表格视图的顶部实现了一个搜索栏和搜索显示控制器。

当视图加载时，搜索栏和相关范围总是可见的。

有没有一种简单的方法来隐藏它，直到用户向下滚动，就像它发生在音乐应用程序中一样？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-24T06:00:01.417

您需要将搜索栏添加为表格视图的标题，然后将表格视图的`contentoffset`属性设置`viewDidLoad`为，

```
[self.tableView setContentOffset:CGPointMake(0,44) animated:YES];//or (0, 88) depends on the height of it 
```

对于搜索显示控制器，你也可以试试这个，

```
[self.searchDisplayController setActive:NO animated:YES]; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-03-15T08:31:57.523

另一种没有硬编码的方法

```
[self.tableView setContentOffset:CGPointMake(0.0, self.tableView.tableHeaderView.frame.size.height) animated:YES]; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-11-03T23:27:20.930

拉了几个小时的头发后，一些有效的东西

*   在 iOS 9 上
*   不依赖于表中的行数
*   具有可变高度行

    考虑到搜索栏是 tableView.tableHeaderView

    ```
    @interface MyTableViewController ()

    @property (nonatomic, assign) BOOL firstLayout;

    @end

    - (void) viewDidLoad {
    [super viewDidLoad];

    self.firstLayout = YES;
    //your code

    }

    -(void)viewDidLayoutSubviews{

    [super viewDidLayoutSubviews];

    if(self.firstLayout){
    CGPoint offset = CGPointMake(0, self.tableView.tableHeaderView.frame.size.height - self.tableView.contentInset.top);
    [self.tableView setContentOffset:offset];

        self.firstLayout = NO;

    }

    } 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-01T18:56:00.933

适用于 iOS 7 并使用`UINavigationController`

```
[self.tableView setContentOffset:CGPointMake(0, self.searchBar.height + self.navigationController.navigationBar.height)]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-05T06:51:23.567

我重新加载tableview的最佳方式

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:YES];     
    [self performSelector:@selector(reload:) withObject:nil afterDelay:0.0];
    self.edgesForExtendedLayout = UIRectEdgeNone;
}

- (void)reload:(__unused id)sender {
        [self.searchDisplayController setActive:YES];
        [self.tableView reloadData];
        [self.refreshControl endRefreshing];
    } else {
        [self.refreshControl endRefreshing];
        [[[UIAlertView alloc]initWithTitle:@"Error" message:[error localizedDescription] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil] show];
    }
} 
```

谢谢

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-11T20:05:07.787

这在 iOS9+ 上运行良好

```
- (void)viewDidLoad {
    [super viewDidLoad];

    dispatch_async(dispatch_get_main_queue(), ^{
        self.tableView.contentOffset = CGPointMake(0, -20);
    });
} 
```

# java - 带有 SQLiteCursorLoader 的 ExpandableListView 和 SimpleCursorTreeAdapter，未调用 getChildrenCursor

> ID：14017624
> 
> 赞同：2
> 
> 时间：2012-12-24T05:58:18.797
> 
> 标签：java, android, expandablelistview, android-cursorloader

首先我会说我已经研究了这个特定的死亡解决方案，并且知道[“这里已经解决”](https://stackoverflow.com/questions/10611927/simplecursortreeadapter-and-cursorloader-for-expandablelistview)和[这里](https://stackoverflow.com/questions/13304484/accessing-a-loader-created-in-one-fragment-from-another-fragment)的解决方案，但我无法让这些工作。其他信息：我正在使用兼容性库和 actionbarsherlock，它们都运行良好，我认为没有问题。

我有一个 SQLite 数据库，我想将我的条目填充到按日期分组的可扩展列表中。我知道我的数据库已正确填充，以下是我已验证包含正确数据的列：

```
ID  (1, 2, 3, 4, etc)

TITLE (some text)

URL  (url as string)

DATE (ddMMyyyy) 
```

其中日期列数据是这样的：22Dec2012 或 23Dec2012 等。

每个日期有很多条目，我想将这些条目分组为以日期为组的子项。我看到数据库中充满了正确的信息。我有一些问题，主要是我的 getChildrenCursor 永远不会被调用，只有构造函数被调用。其次，根据链接的示例，我无法将 getSherlockActivity 上下文放入我的适配器（getActivity() 也不起作用，仅用于测试目的）。我将在下面用 logcat 解释错误。

我的片段

```
public class MyFragment extends SherlockFragment implements LoaderManager.LoaderCallbacks, OnItemClickListener {    

public static MyFragment newInstance(String symbol) {
    MyFragment f = new MyFragment();

    Bundle args = new Bundle();
    args.putString(Consts.INFO, info);
    f.setArguments(args);

    return f;
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    View myView = inflater.inflate(R.layout.fragment_layout3, container, false);
    mListView = (ExpandableListView)myView.findViewById(R.id.expandableListView);
    mListView.setOnItemClickListener(this);
    return myView;
}    

@Override
public void onPause() {
    super.onPause();

}    

@Override
public void onResume() {
    super.onResume();

    refresh();
}

public void refresh() {
    Log.v(TAG, "refresh");

    populateExpandableList();

    loader = getLoaderManager().getLoader(-1);
    if (loader != null && !loader.isReset()) {
      getLoaderManager().restartLoader(-1, null, this);
    } else {
      getLoaderManager().initLoader(-1, null, this);
    }

    if (getLoaderManager().getLoader(0x9999) == null) {
        getLoaderManager().initLoader(0x9999, null, this);
        //getLoaderManager().initLoader(-1, null, this);
    }
    else {
        getLoaderManager().restartLoader(0x9999, null, this);
        //getLoaderManager().restartLoader(-1, null, this);
    }
    getLoaderManager().getLoader(0x9999).forceLoad();
    //getLoaderManager().getLoader(1).forceLoad();
}

private void populateExpandableList() {
    // Set up our adapter
    Log.v(TAG, "Endtering setup adapter");
    mDbHelper = new DBHelper(getSherlockActivity(), DBConstants.DATABASE_NAME, null, DBConstants.DATABASE_VERSION);
    mAdapter = new MyExpandableAdapter(getSherlockActivity(), this, 
      R.layout.news_list_group,
      R.layout.news_list_child,
      new String[] { DBConstants.DATE_GROUP_NAME }, // Name for group layouts
      new int[] { R.id.group_title },
      new String[] { DBConstants.TITLE_NAME, DBConstants.URL_NAME }, // Name for child layouts
      new int[] { R.id.item_title, R.id.item_value });

    mListView.setAdapter(mAdapter);
  }    

@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    // TODO Auto-generated method stub      
}   

@Override
public Loader onCreateLoader(int loaderId, Bundle args) {
    topics = new ArrayList<String>();

    if (loaderId == 0x9999) {
        return new MyLoader(getSherlockActivity(), mHandler, topics.toArray(new String[topics.size()]));
    }
    if (loaderId != -1 && loaderId != 0x9999) {
        Log.v(TAG, "CreateLoader child cursor: loader ID: "+loaderId);
        // child cursor
        mCursorLoader = new SQLiteCursorLoader(getSherlockActivity(), mDbHelper, "SELECT _ID, "+DBConstants.TITLE+", " +DBConstants.URL + ", " + DBConstants.TIME + ", " + DBConstants.STATUS + " FROM "+DBConstants.TABLE+" WHERE "+  DBConstants.KEY_ID+"="+String.valueOf(loaderId)+" ORDER BY "+DBConstants.TIME+" DESC", null);
        return mCursorLoader;
    }       
    else if (loaderId != 0x9999) {
        Log.v(TAG, "CreateLoader group cursor: loader ID: "+loaderId);
        // group cursor
        mCursorLoader = new SQLiteCursorLoader(getSherlockActivity(), mDbHelper, "SELECT date, "+DBConstants.TITLE+", "+DBConstants.URL+" FROM "+DBConstants.TABLE, null);
        return mCursorLoader;
    }

    return null;
}

@Override
public void onLoadFinished(Loader loader, Object result) {
    Log.v(TAG, "onLoadFinished");
    if(result != null /*&& result.length > 0*/) {
        if (loader.getId() == 0x9999) {
            getLoaderManager().restartLoader(-1, null, this);
            getLoaderManager().getLoader(-1).forceLoad();

        }
        if (loader.getId() != -1 && loader.getId() != 0x9999) {
            Log.v(TAG, "LoadFinished second loader: loaderID: "+loader.getId());
            if (!((Cursor) result).isClosed()) {
                Log.v(TAG, "data.getCount() " + ((Cursor) result).getCount());

                HashMap<Integer,Integer> groupMap = mAdapter.getGroupMap();
                try {
                    int groupPos = groupMap.get(loader.getId());
                    Log.v(TAG, "onLoadFinished() for groupPos " + groupPos);
                    mAdapter.setChildrenCursor(groupPos, (Cursor) result);
                } catch (NullPointerException e) {
                    Log.w("DEBUG","Adapter expired, try again on the next query: "
                    + e.getMessage());
                }
            }
            else {
                mAdapter.setGroupCursor((Cursor) result);
            }
        }
        else {

        }
    }
}

@Override
public void onLoaderReset(Loader loader) {
    int id = loader.getId();
    Log.v(TAG, "onLoaderReset() for loader_id " + id);
    if (id != -1) {
        // child cursor
        try {
            mAdapter.setChildrenCursor(id, null);
        } catch (NullPointerException e) {
            Log.w("TAG", "Adapter expired, try again on the next query: "
                    + e.getMessage());
        }
    } else {
      mAdapter.setGroupCursor(null);
    }
}

public class MyExpandableAdapter extends SimpleCursorTreeAdapter  {
    private final String TAG = getClass().getSimpleName().toString();
    private MyFragment mFragment;
    protected HashMap<Integer, Integer> mGroupMap = null;

    public NewsFeedExpandableAdapter(Context context, MyFragment mf, int groupLayout, int childLayout, String[] groupFrom,
            int[] groupTo, String[] childrenFrom, int[] childrenTo) {
        super(context, null, groupLayout, groupFrom, groupTo, childLayout, childrenFrom, childrenTo);       
        mFragment = mf;
        mGroupMap = new HashMap<Integer, Integer>();
        Log.v(TAG, "Adapter constructor");
    }

    @Override
    protected Cursor getChildrenCursor(Cursor groupCursor) {        
        // Given the group, we return a cursor for all the children within that group
        Log.v(TAG, "getChildrenCursor");
        int groupPos = groupCursor.getPosition();
        int groupId = groupCursor.getInt(groupCursor.getColumnIndex(DBConstants.TIME_GROUP_NAME));
        Log.v(TAG, "getChildrenCursor() for groupPos " + groupPos);
        Log.v(TAG, "getChildrenCursor() for groupId " + groupId);

        mGroupMap.put(groupId, groupPos);

        Loader loader = mFragment.getLoaderManager().getLoader(groupId); 
        if ( loader != null && !loader.isReset() ) { 
            mFragment.getLoaderManager().restartLoader(groupId, null, mFragment); 
        } else { 
            mFragment.getLoaderManager().initLoader(groupId, null, mFragment); 
        } 

        return null;    
    }

    //Accessor method
    public HashMap<Integer, Integer> getGroupMap() {
        return mGroupMap;
    }
} 
```

}

现在在我上面的适配器中，你看到我正在使用：

```
Loader loader = mFragment.getLoaderManager().getLoader(groupId); 
        if ( loader != null && !loader.isReset() ) { 
            mFragment.getLoaderManager().restartLoader(groupId, null, mFragment); 
        } else { 
            mFragment.getLoaderManager().initLoader(groupId, null, mFragment); 
        } 
```

而不是这个：

```
Loader loader = getSherlockActivity().getLoaderManager().getLoader(groupId); 
        if ( loader != null && !loader.isReset() ) { 
            getSherlockActivity().getLoaderManager().restartLoader(groupId, null, mFragment); 
        } else { 
            getSherlockActivity().getLoaderManager().initLoader(groupId, null, mFragment); 
        } 
```

因为当我使用 getActivity 或 getSherlockActivity 时，代码在上面的第一行给出了一个错误：

```
"Type mismatch, cannot convert from Loader<Object> to Loader" 
```

以及第三行和第五行错误：

```
"The method restartLoader(int, Bundle, LoaderManager.LoaderCallbacks<D>) in the type LoaderManager is not applicable for the arguments (int, null, MyFragment)" 
```

有谁可能知道为什么我不能在这里使用 getActivity ？这让我完全发疯了。所以我尝试使用 mFragment.getLoaderManager 而不是使用我传递给适配器的片段，但我不知道这是否正确。

我在代码中放置了断点，它显示适配器构造函数被调用，就是这样，getChildrenCursor 永远不会被调用。在片段断点中，它到达“Create Group Loader id=-1”，就是这样。在 onLoadFinished 中，日志中只显示第一个“onLoadFinished”标签。它永远不会进入 onLoadFinished 中的 IF 语句。当我检查 logcat 中的 loadFinished 结果不为空时，它显示为一个光标对象被传递给 onLoadFinished，但有些东西不能正常工作。

在尝试可扩展列表之前，我使用这些相同的 SQLiteCursorLoader 设置，只是检索所有列，它们工作正常。我绝对承认，也许我的两个 SELECT 语句都不正确。但是我尝试了很多不同的选择查询，每次我得到相同的结果，什么都没有。任何人都可以请帮助我，我很绝望，很疯狂。谢谢。

# ios - 下载 iOS 6 模拟器

> ID：14017625
> 
> 赞同：0
> 
> 时间：2012-12-24T05:58:25.897
> 
> 标签：ios, xcode, ios6, simulator

我安装了 xcode 4.5.2。我想在 iOS 6 中测试我的应用程序。我去了`Xcode/Preferences/Downloads`，但我没有在列表中看到 iOS 6 模拟器。我应该如何下载它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T06:04:06.480

Xcode 4.5.2 应该带有 iOS 6 模拟器。但如果不是：

在显示模拟器版本的地方（“运行”和“停止”旁边的应用程序名称旁边的选项卡）单击它并向下滚动并按“更多模拟器”，您可以选择安装更多模拟器。有 iOS 6 模拟器吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T06:01:41.307

Xcode 4.5.2 附带 iOS 6 SDK，因此当您在模拟器中启动应用程序时，您会自动使用 iOS 6 进行测试。

除非您在 Xcode 下载窗格中下载 iOS 5 模拟器并将模拟器设置为在 iOS 5 环境中进行测试。

# android - 针对最大数量的受支持设备优化 Android 清单文件

> ID：14017627
> 
> 赞同：12
> 
> 时间：2012-12-24T05:59:10.933
> 
> 标签：android, android-manifest, manifest, compatibility, android-compatibility

当我上传新的 APK 文件时，我无法让我的 Manifest 文件与许多较新的手机兼容，但我不明白为什么。我正在全新的[HTC Evo V](http://www.gsmarena.com/htc_one_v-4575.php)上对其进行测试，但无论出于何种原因，该设备都不会出现在兼容性列表中。

我正在针对 API 17 进行编译，最低支持 API 10，因此应该包含绝大多数手机。

我试过的：

*   删除所有权限；不用找了
*   尝试制作不需要WIFI；不用找了
*   删除`installLocation`以查看是否有所作为；不用找了
*   甚至尝试添加小屏幕支持以查看它是否会出现；不用找了

我读过的：

*   [http://developer.android.com/google/play/filters.html](http://developer.android.com/google/play/filters.html)
*   [http://developer.android.com/guide/practices/screens-distribution.html](http://developer.android.com/guide/practices/screens-distribution.html)
*   [http://developer.android.com/guide/practices/compatibility.html](http://developer.android.com/guide/practices/compatibility.html)
*   [http://developer.android.com/guide/topics/manifest/manifest-intro.html](http://developer.android.com/guide/topics/manifest/manifest-intro.html)

我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.somecompany.appname"
      android:versionCode="10"
      android:versionName="1.0"
      android:installLocation="preferExternal">

    <!-- For expansion pack downloads -->
    <!-- Required to access Android Market Licensing -->
    <uses-permission android:name="com.android.vending.CHECK_LICENSE" />
    <!-- Required to download files from Android Market -->
    <uses-permission android:name="android.permission.INTERNET" />
    <!-- Required to keep CPU alive while downloading files (NOT to keep screen awake) -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <!-- Required to poll the state of the network connection and respond to changes -->
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <!-- Required to check whether Wi-Fi is enabled -->
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
    <!-- Required to read and write the expansion files on shared storage -->
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <uses-sdk android:minSdkVersion="10" android:targetSdkVersion="17"/>
    <supports-screens android:normalScreens="true"/>
    <supports-screens android:largeScreens="true"/>
    <supports-screens android:xlargeScreens="true"/>

    <compatible-screens>
        <screen android:screenSize="normal" android:screenDensity="mdpi" />
        <screen android:screenSize="large" android:screenDensity="hdpi" />
        <screen android:screenSize="xlarge" android:screenDensity="xhdpi" />
    </compatible-screens>                      
    <application android:icon="@drawable/icon" android:label="@string/app_name" android:allowBackup="false">
        <activity android:name="somecompany.appname.SplashScreen"
                  android:label="@string/app_name"
                  android:theme="@android:style/Theme.NoTitleBar"
                  android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="somecompany.appname.SoundAndCallActivity" android:screenOrientation="portrait" android:theme="@android:style/Theme.NoTitleBar"/>
        <activity android:name="somecompany.appname.MainScreenActivity"   android:screenOrientation="portrait" android:theme="@android:style/Theme.NoTitleBar"/>
        <activity android:name="somecompany.appname.SettingsActivity"   android:screenOrientation="portrait" android:theme="@style/Theme.Transparent"/>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-24T05:59:10.933

我想发布这个问题以及**一个**答案，因为我发现一开始就很难弄清楚。但是，这将我支持的设备数量从 499 更改为 1968。希望这将在未来帮助更多的人，因为这似乎是一个晦涩的话题。

**技巧 1：**没有显示更多设备的原因是，当您使用`<compatible-screens>`标签时，Google 会更积极地过滤。就我而言，我没有足够的不同屏幕尺寸和密度组合，所以它过滤掉了我遗漏的所有内容（参见下面的技巧 2）。

如果您只使用`<supports-screens />`标签，那么您将使更多设备能够找到您的应用程序。因此，请帮自己一个忙，并删除`<compatible-screens>`块中的所有其他标签。

您可以使用这样的简写形式：

```
<supports-screens android:largeScreens="true" android:normalScreens="true" android:smallScreens="true" android:anyDensity="true"></supports-screens> 
```

引用[原文章](http://developer.android.com/google/play/filters.html)：

> 如果设备屏幕尺寸和密度与“兼容屏幕”元素中的任何屏幕配置（由“屏幕”元素声明）不匹配，Google Play 会过滤应用程序。
> 
> 警告：通常，您不应使用此清单元素。通过排除您未列出的所有屏幕尺寸和密度组合，使用此元素可以显着减少您的应用程序的潜在用户群。您应该改为使用“supports-screens”清单元素（如上表 1 中所述）来为您没有考虑替代资源的屏幕配置启用屏幕兼容模式。

**技术 2：**您可以使用的另一种技术是更*具体地*使用您的`<compatible-screens>`标签并摆脱`<supports-screens />`标签。您可以根据您的应用要求以及[最新的设备分发编号](http://developer.android.com/about/dashboards/index.html)做出这些决定。

在下面的示例中，我不想支持小屏幕或`ldpi`普通、大或 xlarge 屏幕的密度，所以我将它们排除在外。

```
<compatible-screens>
    <!-- all normal size screens -->
    <screen android:screenSize="normal" android:screenDensity="mdpi" />
    <screen android:screenSize="normal" android:screenDensity="hdpi" />
    <screen android:screenSize="normal" android:screenDensity="xhdpi" />
    <!-- all large size screens -->
    <screen android:screenSize="large" android:screenDensity="mdpi" />
    <screen android:screenSize="large" android:screenDensity="hdpi" />
    <screen android:screenSize="large" android:screenDensity="xhdpi" />
    <!-- all xlarge size screens -->
    <screen android:screenSize="xlarge" android:screenDensity="mdpi" />
    <screen android:screenSize="xlarge" android:screenDensity="hdpi" />
    <screen android:screenSize="xlarge" android:screenDensity="xhdpi" />
</compatible-screens> 
```

# c# - 在 Windows Phone 8 应用程序中使用 Windows Live ID 身份验证

> ID：14017648
> 
> 赞同：3
> 
> 时间：2012-12-24T06:02:27.547
> 
> 标签：c#, visual-studio-2012, windows-phone-8, windows-live-id

我正在尝试编写一个 Windows Phone 8 应用程序，该应用程序需要在云中保存有关用户的一些信息，以便将来能够识别他/她。对于云数据库，我使用的是 Azure 移动服务。但是，我不确定将哪些信息用作唯一用户 ID。要么我可以想出我自己的东西，要么我可以使用一些现有的身份服务。

知道 Windows Live ID（现在称为 Microsoft 帐户）与 Windows Phone 工作流程如此集成，我想我可以使用它，但似乎没有一种简单的方法可以做到这一点？

有谁知道我的应用程序如何利用用户已经用来登录电话的 Windows Live ID 信息？

我想让应用程序用户的流程尽可能无缝，这就是为什么我想避免让用户注册我的自定义识别机制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T10:48:14.267

[匿名 ID](http://msdn.microsoft.com/en-us/library/microsoft.phone.info.userextendedproperties.getvalue%28v=VS.92%29.aspx)可能是您要查找的内容：

```
string anid = UserExtendedProperties.GetValue("ANID") as string;
string anonymousUserId = anid.Substring(2, 32); 
```

此 ID 与用户的真实帐户相关联。因此，它应该可用于唯一标识用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T19:52:58.387

用于*Win Phone 8*应用程序

```
string anid = UserExtendedProperties.GetValue("ANID2") as string; 
```

还要确保从**WMAppManifest检查这些**

```
<Capability Name="ID_CAP_IDENTITY_DEVICE" />
<Capability Name="ID_CAP_IDENTITY_USER" /> 
```

# android - 带有 android 2.3.3 Mediaplayer 的 SeekBar！如何在我的项目中添加搜索栏？

> ID：14017649
> 
> 赞同：0
> 
> 时间：2012-12-24T06:02:27.320
> 
> 标签：android, seekbar

我想添加一个`SeekBar`来控制我的`mediaplayer`过程，但我不知道如何添加代码。请帮助我，并在我的项目代码中举一些例子！包lamTo.OSDC_Project；

```
public class OSDC_Mini_ProjectActivity extends Activity implements MediaPlayer.OnCompletionListener {

    private ImageButton play,pause,stop;
    private MediaPlayer mp;
    private SeekBar seekbar;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        play = (ImageButton)findViewById(R.id.play);
        pause = (ImageButton)findViewById(R.id.pause);
        stop = (ImageButton)findViewById(R.id.stop);

        play.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                play();
            }
        });

        pause.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                pause();
            }
        });

        stop.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                stop();
            }
        });

        setup();
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        if (stop.isEnabled()) {
            mp.stop();
        }
    }

    public void onCompletion(MediaPlayer mp) {
        stop();
    }

    private void play() {
        mp.start();
        play.setEnabled(false);
        pause.setEnabled(true);
        stop.setEnabled(true);
    }

    private void stop() {
        mp.stop();
        pause.setEnabled(false);
        stop.setEnabled(false);

        try {
            mp.prepare();
            mp.seekTo(0);
            play.setEnabled(true);
        }
        catch (Throwable t) {
            error(t);
        }
    }

    private void pause() {
        mp.pause();
        play.setEnabled(true);
        pause.setEnabled(false);
        stop.setEnabled(true);
    }

    private void loadClip() {
        try {       
            mp=MediaPlayer.create(this, R.raw.bigbang);
            mp.setOnCompletionListener(this);
        }
        catch (Throwable t) {
            error(t);
        }
    }

    private void setup() {
        loadClip();
        play.setEnabled(true);
        pause.setEnabled(false);
        stop.setEnabled(false);
    }

    private void error(Throwable t) {
        AlertDialog.Builder builder=new AlertDialog.Builder(this);
        builder
            .setTitle("Error!")
            .setMessage(t.toString())
            .setPositiveButton("Yes", null)
            .show();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T06:20:46.057

在您的设计布局中，添加此

```
<SeekBar
 android:id="@+id/SeekBar01"
 android:layout_height="wrap_content"
 android:layout_width="fill_parent"
 /> 
```

在你的 onCreate() 添加这个

```
seekBar = (SeekBar) findViewById(R.id.SeekBar01);
seekBar.setMax(mPlayer.getDuration());
seekBar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

public void onStopTrackingTouch(SeekBar seekBar) {
// TODO Auto-generated method stub
}

public void onStartTrackingTouch(SeekBar seekBar) {
// TODO Auto-generated method stub
}

public void onProgressChanged(SeekBar seekBar, int progress,
 boolean fromUser) {
seekChange(seekBar, progress, fromUser); 

}
});
 }

 // This makes the seekbar follow the music
public void startPlayProgressUpdater() {
seekBar.setProgress(mPlayer.getCurrentPosition());

if (mPlayer.isPlaying()) {
Runnable notification = new Runnable() {
public void run() {
startPlayProgressUpdater();
}
};
handler.postDelayed(notification,1000);
}else{
mPlayer.pause();
buttonPlayStop.setText(getString(R.string.play_str));
seekBar.setProgress(0);
}
 } 

// This is event handler thumb moving event
private void seekChange(SeekBar seekBar, int progress,
boolean fromUser){
mPlayer.seekTo(progress);
 } 
```

完整的教程在[这里](http://www.hrupin.com/2010/12/simple-android-mp3-media-player)有源代码。

# android - Android - SAX 和 Pull Parser - 性能

> ID：14017651
> 
> 赞同：3
> 
> 时间：2012-12-24T06:03:19.243
> 
> 标签：android, xml-parsing

我正在构建一个 android 应用程序，它从远程 url 获取 xml 并保存在 SD 卡位置。

Xml 相对较大（3 MB - 大约 30000 个元素）。我需要解析整个文档并从中构建一个 java 模型..

我使用了开箱即用的 android 的 SAX 和 Pull 解析器实现，但性能并不理想。我用不同类型的移动设备 armv7/998MHZ、500MHZ、260MHZ 进行了测试，但是当测试更多时性能并没有线性提高强大的设备..

**萨克斯：**
`xmlIn.parse(new InputSource(new FileInputStream(myfile)));`

**拉：**
`parser.setInput(new FileInputStream(myfile), null);`

就我而言，SAX 比 Pull 做得好一点。有什么方法可以改进这些解析器吗？像 NIO 一样，使用非阻塞/缓冲技术来提高性能？

由于 Android 不支持 StAX，因此我无法使用 FasterXML Aalto。

任何输入表示赞赏。

# c++ - C++ - 更有条理和高效的函数原型

> ID：14017654
> 
> 赞同：0
> 
> 时间：2012-12-24T06:03:33.237
> 
> 标签：c++, prototyping, function-prototypes

是否有一种更有条理的方式来使用功能原型或类似且更有效的方法？我在函数原型设计变得杂乱无章并且用外部和空洞填充我的大部分文件时遇到了一些问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T06:47:21.587

我假设`function prototyping`您问的是如何组织所有函数签名，以便其他编译模块可以重用它们。

*   显而易见：将原型放入头文件

*   使用标题生成器（[Makeheaders](http://www.hwaci.com/sw/mkhdr/)， [GCC AutoInclude](http://gcc.gnu.org/ml/gcc/2011-01/msg00150.html)） - 这样您就不必自己编写这些。

# iphone - 将子视图添加到 UITableView 的父视图

> ID：14017660
> 
> 赞同：1
> 
> 时间：2012-12-24T06:04:18.687
> 
> 标签：iphone, ios, ipad, uitableview

我正在尝试将*子视图*添加到 UITableView 的父视图，以便在 UITableView 滚动时有一个不会移动的*子视图。*当我将*子视图*添加到 UITableView 时，它会随着用户滚动操作的表格一起移动。

到目前为止，我的场景是我在 UITabBarController 上有 3 个 UINavigationController。每个都有一个 UITableViewController。我想在各个控制器的屏幕上添加一个子视图。但是，我不希望像这样将新的子视图添加到整个应用程序中：

```
[[[UIApplication sharedApplication] keyWindow] addSubview:newView]; 
```

当我将一个新控制器推送到堆栈或弹出一个时，我希望*子视图*随着它位于其顶部的 UITableView 一起移动和消失。保持这样一个事实，即当用户滚动 UITableView 时，新的*子视图*位于其位置而不移动。使 UITableView 和新的*子视图*处于同一级别。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:30:43.450

将您的子视图添加到 tableview..

实现委托方法scrollViewDidScroll。在 scrollViewDidScroll 上，只需设置所需的子视图中心即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T06:37:31.587

几种方法：

首先，要将视图添加到用户滚动时保留的表格视图，如果您的表格只有一个部分，您可以为该部分添加标题。例如，这会`UIView`在 tableview 中添加一个纯蓝色作为标题：

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, self.view.bounds.size.width, 50)];
    view.backgroundColor = [UIColor blueColor];
    return view;
}

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    return 50;
} 
```

其次，如果你有多个部分，但是，这个技巧不起作用，你会想要使用 a`UIViewController`而不是 a `UITableViewController`，将你的 header 添加到该控制器视图的顶部，并在底部添加一个 tableview看法。您需要确保`IBOutlet`为 tableview 设置 (a) an （通常设置为名为 的属性`tableView`，以避免混淆）；(b) 将视图控制器指定为此 tableview 的数据源和委托。

第三，如果您希望此标头出现在应用程序的每个场景中，另一种方法（在 iOS5+ 应用程序中）是使用视图控制器包含，创建一个包含您的标头的容器视图，然后将您的应用程序的第一个场景添加为子视图那个视图容器。这并不难，但如果你是一个新开发者，我可能会劝阻你不要尝试。我已经做到了，效果很好，但并不适合所有人。

第四，如果您的应用使用导航控制器，您可以自定义导航栏以呈现您的自定义外观。这一切都取决于你试图用标题完成什么。

# java - 一个leetcode程序，看不懂语句

> ID：14017662
> 
> 赞同：1
> 
> 时间：2012-12-24T06:04:29.963
> 
> 标签：java, c++

'。' 匹配任何单个字符。'*' 匹配零个或多个前面的元素。匹配应覆盖整个输入字符串（不是部分）。

函数原型应该是： bool isMatch(const char *s, const char *p)

一些例子：

```
isMatch(“aa”,”a”) → false
isMatch(“aa”,”aa”) → true
isMatch(“aaa”,”aa”) → false
isMatch(“aa”, “a*”) → true
isMatch(“aa”, “.*”) → true
isMatch(“ab”, “.*”) → true
isMatch(“aab”, “c*a*b”) → true 
```

最后一行

```
isMatch(“aab”, “c*a*b”) → true 
```

不确定是什么`*`意思，我只是想`*`可以匹配许多字符的零，比如`*`可以匹配任何字符串（字符序列），但似乎不对

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T06:06:09.120

> '*' 匹配零个或多个前面的元素。

`c*a*b`可以翻译成

c - 0 次、a - 2 次和 b - 1 次

因此，等价于`aab`。在提供的定义中要查看的关键是 -“'*' 匹配**零个或多个**前面的**元素**。”

# android - 如何构建用于登录的 UI

> ID：14017663
> 
> 赞同：-1
> 
> 时间：2012-12-24T06:04:44.520
> 
> 标签：android, listview, user-interface

![在此处输入图像描述](../Images/ca6d7a8186646157f89787c713311438.png)

我想让我的用户界面与此类似。作为android的新手，我想获得一些帮助，我应该如何解决这个问题。

我正在考虑 listView 持有 2 行（电子邮件/密码）和一个页脚（登录按钮）。

一个有经验的安卓开发者将如何构建这个 UI？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T06:14:22.770

我会创建一个`RelativeLayout`灰色背景（Color.LTGRAY），或者使用一个 9-patch 纹理图像。作为孩子们的观点，我会在顶部附近居中放置一个标题图像，并`ImageButton`在一个均匀间隔的水平居中使用两个 s `LinearLayout`，. 登录部分将是`LinearLayout`一个白色（Color.WHITE）背景，我会在上面为每个行分隔符添加一个图像。s将`EditText`具有清晰的 (android.R.color.transparent) 背景，并且提示将分别设置为“电子邮件地址”和“密码”。下面将是一个带有黑色文本的清除按钮，显示“登录”。最后，`TextView`位于布局中心的按钮和 ImageButtons 之间的 a 将显示文本“或登录使用”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:11:40.857

这是您需要的 XML 代码。根据您的需要更改它

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true">

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="10dp">

        <TextView 
            android:layout_width="match_parent"
            android:layout_height="wrap_content" 
            android:gravity="center" 
            android:id="@+id/name" 
                android:text="Your company name"/>

        <TextView 
            android:layout_width="match_parent" 
            android:layout_height="wrap_content" 
            android:gravity="center" 
            android:id="@+id/tv_login_info" 
            android:text="Login" />

        <TableLayout 
            android:layout_width="match_parent" 
            android:layout_height="wrap_content">

            <TableRow 
                android:layout_marginBottom="15dp"
                android:layout_marginTop="15dp">
                <TextView 
                    android:layout_width="0dp" 
                    android:layout_height="wrap_content" 
                    android:layout_weight="0.25"
                    android:gravity="right" 
                    android:id="@+id/tv_user" 
                    android:text="User" 
                     />

                <EditText  
                    android:layout_width="0dp"
                                android:layout_weight="0.75"
                    android:id="@+id/et_user"
                    android:singleLine="true">
                    <requestFocus/>
                </EditText >    
            </TableRow>

            <TableRow>
                <TextView 
                    android:layout_width="0dp" 
                    android:layout_height="wrap_content"
                    android:layout_weight="0.25" 
                    android:gravity="right" 
                    android:id="@+id/tv_password" 
                    android:text="Password" 
                />

                <EditText  
                    android:layout_width="0dp" 
                    android:layout_weight="0.75"
                    android:id="@+id/et_password"           
                    android:password="true"
                    android:singleLine="true"/>
             </TableRow>
        </TableLayout>

        <LinearLayout 
            android:layout_width="match_parent" 
            android:layout_height="wrap_content" 
            android:layout_marginTop="20dp"
            android:gravity="center">
                <Button
                    android:id="@+id/btn_fb" 
                    android:layout_height="wrap_content"
                    android:layout_width="wrap_content" 
                    android:text="Facebook"/>
                <Button
                    android:id="@+id/btn_twitter" 
                    android:layout_width="wrap_content" 
                    android:layout_height="wrap_content" 
                    android:text="Twitter"  />            

        </LinearLayout>

        <TextView
            android:id="@+id/tv_filler" 
            android:layout_height="0dp"            
            android:layout_width="fill_parent"           
            android:layout_weight="1"/> 

    </LinearLayout>
</ScrollView> 
```

# python - Python：一种在给定范围内生成素数的紧凑方法

> ID：14017664
> 
> 赞同：0
> 
> 时间：2012-12-24T06:04:52.953
> 
> 标签：python, lambda, primes

最近我读到了一种非常简洁的方式来生成素数列表，在 Python

```
#'prime' should be a pre-defined upper bound of the range
filter(lambda prime:all(prime%num for num in range(2,prime)),range(2,prime)) 
```

什么是`pros`和`cons`来适应它来生成素数？它是 Pythonic 的吗？

我个人的想法是它有点可读且非常简化，我不确定这是否是一种好的编码方式，我不肯定代码是否有效

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T06:21:21.113

该代码执行78021`prime = 10000`次除法，而传统方法只需要 2302 次。

[http://ideone.com/X0MhGO](http://ideone.com/X0MhGO)

您的方法可以通过仅检查奇数并停在 来改进`sqrt(x)`：

```
primes = [2] + filter(lambda p: all(p % n for n in range(3, int(sqrt(p)) + 1, 2)), range(3, max, 2)) 
```

这仍然比“传统”算法差，但比原来的算法好得多（2351 divs vs 78021）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T06:21:47.633

优点和缺点主要是算法而不是句法。这段代码使用一种简单的方法来生成这些素数，虽然您可以对其进行一些优化，但如果遇到性能问题，最好使用[完善的算法。](http://en.wikipedia.org/wiki/Generating_primes)否则，这并不重要，尽管我个人会将上面的代码编写为生成器表达式：

```
(cand for cand in range(2,upper_limit) if all(cand%num for num in range(2,cand))) 
```

（注意：你有两个不相关的变量都`prime`在你的原始代码中命名，所以我将它们重命名为我认为合适的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T06:14:30.917

有更好的方法，这个函数很慢，原因如下：

*   一个一个地经历，当你可以简化为两个两个时，因为除了两个之外的所有偶数都不是素数

*   此外，它一直循环到最终数字，当它永远不会超过它的平方根时

[这](http://www.daniweb.com/software-development/python/code/216880/check-if-a-number-is-a-prime-number-python)是检查数字是否为素数的更好功能的示例。

如果您至少在寻找速度，那么这些是主要问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T06:09:48.483

缺点：生成器将是更好的选择。我也发现它相当慢。

优点：它将所有素数放入一个列表中，我想这是一个优点。

这是我在素数周围使用的[函数。](https://bitbucket.org/jgrigonis/projecteuler/src/3932138e20771594ab3cef4e94c443ef9af55d96/prime.py?at=default)

# c# - 每个程序集一个命名空间？

> ID：14017666
> 
> 赞同：4
> 
> 时间：2012-12-24T06:05:27.903
> 
> 标签：c#, .net, namespaces

每个程序集至少有一个命名空间是一般准则吗？

在什么情况下，多个程序集通常应该共享同一个命名空间？

开发环境：C#和.NET

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:15:37.627

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms973231.aspx)

**集会**

> 程序集是构成功能逻辑单元的类型和资源的集合。.NET Framework 中的所有类型都必须存在于程序集中；每次使用 Visual Basic .NET 创建 Microsoft Windows® 应用程序、Windows 服务、类库或其他应用程序时，您都在构建一个程序集。每个程序集都存储为 .exe 或 .dll 文件。

**命名空间**

> 命名空间不是程序集的替代品，而是补充程序集的第二种组织方法。命名空间是一种对类型名称进行分组并减少名称冲突机会的方法。命名空间可以包含其他命名空间和类型。类型的全名包括包含该类型的命名空间的组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:20:39.320

答案是——视情况而定。

如果您的程序集都是给定项目的小组件，那么它们可能不需要自己的命名空间，只要它们是不同的、独立的并且都“适合”整个项目的命名空间。

如果您正在构建仅相切相关并且可以轻松用于各种项目的程序集，您可能希望将它们分组到它们自己的命名空间中。

如果您正在创建一个与项目或 CLR 中的现有类具有相似功能或重复成员的类，那么您也需要一个命名空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T08:06:10.310

我建议让命名空间匹配它的文件位置。尝试安装 resharper，你会明白我的意思。

我不知道程序集应该共享相同命名空间的情况。只有命名空间的第一部分应该是相同的，即公司或产品的名称。

看到马克[的这篇文章](http://mmeuer.blogspot.nl/2007/07/warning-somewhat-serious-c-geekage-lies.html)

[这篇文章](http://confluence.jetbrains.net/display/ReSharper/Namespace+does+not+correspond+to+file+location)告诉Resharper来解决这个问题。

# algorithm - 从删除空格并重新排序单词字母的句子中改写句子的算法？

> ID：14017667
> 
> 赞同：3
> 
> 时间：2012-12-24T06:05:27.123
> 
> 标签：algorithm

我正在网上寻找一些谜题以提高我对算法的了解......

我遇到了以下问题：

“你有一个句子，其中有几个单词删除了空格，单词的字符顺序被打乱了。你有一本字典。编写一个算法来生成带有空格和正常字符顺序的单词的句子。”

我不知道什么是解决这个问题的好方法。

我是算法的新手，但只是看着问题，我想我会让程序做一个智力头脑会做的事情。

这是我能想到的：

-首先从字典中手动找出常见的短英文单词，如“is”“the”“if”等，并放入dataset-1。

-然后找出数据集1中单词的排列（例如“si”，“eht”或“eth”或“fi”）并放入数据集2

-然后从输入句中找出与数据集2的单词匹配的字符序列并放入它们在 dataset-3 中并在输入句子中插入空格而不是找到的那些。

- 对于其余的单词，我会执行排列以从字典中找出单词。

我是算法的新手......这是一个糟糕的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:44:42.820

这似乎是一个完美的解决方案，

一般来说，判断一个算法有2个参数。

1.  正确性——算法是否提供正确的答案。

2.  资源 - 提供答案所需的时间或存储大小。

通常在这两个参数之间进行权衡。

因此，例如，您的字典的大小决定了您可以重建哪些打乱的句子，从而为您提供更多输入的正确答案，但是整个搜索过程将花费更长的时间并且需要更多的存储空间。

您提出的问题的难点在于您需要计算排列，而且排列**很多**。

所以检查它们都是昂贵的，一个好的方法是按照你的建议做，创建一小部分常用词并首先检查它们，这样平均情况会更好。

**注意：**只是说您检查排列/搜索没问题，但最后您需要指定执行此操作的确切方式。

目前你写的是一个算法的想法，但它不允许你接受给定的输入并机械地计算输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:06:54.830

实际上，从按字长对字典进行分区开始可能是明智的。

然后尝试找到可以使用可用字母组成的最大单词，而不是找到最小的单词。短词更常见，因此更难缩小范围。IE：真的是“如果”还是“无花果”。

然后对于每个字长 w，您可以一次处理 w 个字符。

但是仍然有很多可能的组合，仅仅因为你找到了一个有效的词，并不意味着它是正确的词。一旦你浏览了所有子字符串，其中应该有类似[O(c^4*d)](http://www.wolframalpha.com/input/?i=sum%20of%20%28sum%20of%20k%20from%201%20to%20i%29%20from%201%20to%20c)的东西，其中 d 是字典中的单词数，c 是句子中的字符数。实际上，如果字典按字长排序，它会比这少一点。然后你必须使用有效的单词，并找出一个有效的顺序，以便使用所有字符。可能有多种解决方案。

# objective-c - 识别表格视图中的数据类型

> ID：14017671
> 
> 赞同：0
> 
> 时间：2012-12-24T06:05:42.430
> 
> 标签：objective-c, ios, uitableview, amazon-web-services, amazon-s3

我有一个表格视图，其中数据是从 Web 服务加载的。Web 服务有 4 个字典，每个字典都包含不同格式的数据。字典 1 有文本数据（表的第 1 行），字典 2 有图像数据（第 2 行），字典 3 有音频数据（第 3 行），字典 4 有视频数据（第 4 行）。所有数据都是从 Web 服务加载的。Web 服务返回驻留在其他主机上的图像、音频和视频数据的路径。就像图像和音频数据驻留在 amazon s3 上一样。图像和音频的 url 是 amazon s3 url，video 也是文件的 url(path)。现在我希望当用户点击第 1 行时，文本应该显示在我已经完成的文本视图中的另一个视图上。当点击第 2 行时，相应的图像应显示在图像视图中的另一个视图上。当点击第 3 行时，用户应该能够在另一个视图上观看视频，当点击第 4 行时，用户应该能够播放音频文件（这是来自 amazon s3 的文件路径）。这应该怎么做。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T06:27:35.933

这很简单.. 只需相应地为单元格定义标签。

比如 1 = 文本单元，2 = 图像单元等。

并在 cellForRowAtIndexPath 中，相应地设置单元格的标签。

然后在 didSelectRowAtIndexPath 中，使用选定的 indexPAth 调用 cellForRowAtIndexPath。

在返回的单元格中，检查标签并相应地采取行动..

# java - 如何使用公共 IP 地址而不是 localhost 访问我的 webapp？

> ID：14017673
> 
> 赞同：0
> 
> 时间：2012-12-24T06:05:57.297
> 
> 标签：java, servlets, localhost, webserver

是否可以使用公共 IP 地址访问我的 Web 应用程序，例如，

`http:/AppServerIP:8180/myWar/myServlet`

如果我像下面这样通过 Web 服务器，它可以正常工作（`Servlet`被调用）

`http:/WebServerIP(public)/myWar/myServlet`

当我试图`Servlet`从我的应用程序服务器调用时，我得到了以下异常。

```
java.net.ConnectException: Connection timed out
        at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
        at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
        at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
        at java.net.Socket.connect(Socket.java:529)
        at java.net.Socket.connect(Socket.java:478) 
```

`Servlet`当另一个最终用户同时登录到同一端口时，通过代码在内部调用。所以，我想调用它`Servlet`并使当前会话无效。我不想通过 Web 服务器，因为它也可能将请求发送到其他端口。

我的项目堆栈：Jboss AS 5.1.0 GA，Apache Web 服务器 2.2.5，**端口号为 8180**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T06:32:13.870

首先，您需要获取您的公共 IP 地址，您可以`ipconfig`在 Windows 机器上使用命令找到该地址。

然后，您可以像这样尝试

```
http://<your_public_ip_address>:<your_webserver_port>/ 
```

它将向您显示服务器欢迎页面。你需要打开你的特定项目。然后，试试这个

```
 http://<your_public_ip_address>:<your_webserver_port>/myproject/ 
```

它将显示您的项目`index`或`home`页面。

**注意：**您需要确定您的**IP 地址**和**端口号**

# c++ - std::hash 和/或 boost::hash 的目的是什么？

> ID：14017674
> 
> 赞同：0
> 
> 时间：2012-12-24T06:06:02.267
> 
> 标签：c++, c++11, hash, stdhash

为什么要提供散列函数而不指定任何参考实现，也没有指定参考算法（md5、sha256 等）？

数据结构也有类似的特性，例如符合 C++ 标准的`std::unordered_map/set/multimap/multiset::hash_function`.

所以我不明白的是：

*   为什么提供这种未记录的方法
*   从程序员的角度来看，实现细节是正确使用散列函数的基础，这些函数的目的是什么
*   这个函数可以链接到特定的算法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T06:09:14.380

> 为什么提供这种未记录的方法

他们不是无证的。

> 从程序员的角度来看，实现细节是正确使用散列函数的基础，这些函数的目的是什么

实现是未指定的，它们只是应该与无序容器一起使用。它们应该是尽可能好的散列函数，以有效地将元素分配到桶中。其他任何内容都未指定。

请注意，如果使用具有*用户定义类型*的无序容器，用户应该提供这些。

> 这个函数可以链接到特定的算法吗？

为什么不？

# php - 如何在zend框架中过滤部分视图

> ID：14017675
> 
> 赞同：1
> 
> 时间：2012-12-24T06:06:02.697
> 
> 标签：php, zend-framework

![在此处输入图像描述](../Images/8fb26b455cf43a56a557fb08db2302b6.png)

我在 zend 中有一个视图，其中我们有提交条目的表单，在底部我们列出了以前的条目。当我们点击搜索按钮时，我已经应用了搜索功能并且它工作正常。现在我想要的是使用 getJSON 事件对 keyup 事件应用搜索，以便我们可以立即搜索内容。

我为搜索添加了两个条件...使用搜索按钮单击进行搜索。

```
 if($req->isPost()) {

        {
            //$ajaxPostedData = $req->getPost();
        $ajaxPostedData = $req->getParams();
        //echo $ajaxPostedData['search_term'];
        $select->where("ma_heading like '%".$ajaxPostedData['search_term']."%'");       
        //$select->where($val)
        //echo $select->__toString();die;
        //print_r($data = $db_model->fetchAll($select));
        //die;
        //echo $select->__toString();

        return $data = $db_model->fetchAll($select);

        # Paging section
        $paginator = Zend_Paginator::factory($data);
        $paginator->setItemCountPerPage(PAGING_RESULT_PER_PAGE);
        $paginator->setCurrentPageNumber($page);
        $paginator->setPageRange(PAGING_PAGES_RANGE_PER_PAGE);
        $this->view->data = $paginator;
            //$this->_helper->P($ajaxPostedData);die;
            //

    } 
```

和 keyup 事件

```
if($req->isXmlHttpRequest())
        {
            //$ajaxPostedData = $req->getPost();
        $ajaxPostedData = $req->getParams();
        //echo $ajaxPostedData['search_term'];
        $select->where("ma_heading like '%".$ajaxPostedData['search_term']."%'");       
        //$select->where($val)
        //echo $select->__toString();die;
        //print_r($data = $db_model->fetchAll($select));
        //die;
        //echo $select->__toString();

        return $data = $db_model->fetchAll($select);

        # Paging section
        $paginator = Zend_Paginator::factory($data);
        $paginator->setItemCountPerPage(PAGING_RESULT_PER_PAGE);
        $paginator->setCurrentPageNumber($page);
        $paginator->setPageRange(PAGING_PAGES_RANGE_PER_PAGE);
        $this->view->data = $paginator;
            //$this->_helper->P($ajaxPostedData);die;
            //
        } 
```

但是当我们在 keyup 上搜索内容时，内容不会动态替换。

请帮助我如何在 zend 中应用 keyup 搜索。

这是我用来发送请求的 jQuery 脚本

```
jQuery('#txt_heading_filer').keyup(function() {
        var heading = jQuery('#txt_heading_filer').val();

        $.getJSON('admin/admin/announcements/search_term/'+heading, function() {            

        });
    }); 
```

这是需要在搜索时刷新的表

```
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="top-table-bg">
        <tr>
            <th width="" align="left"><?php echo $obj_trans->_('heading'); ?></th>
            <th width="20%" align="left"><?php echo $obj_trans->_('expiry date'); ?></th>
            <th width="10%" align="center"><?php echo $obj_trans->_('publish/unpublish'); ?></th>
            <th width="10%" align="center"><?php echo $obj_trans->_('action'); ?></th>
        </tr>
        <?php  
        foreach($data_arr as $key => $data) { ?>
        <tr>
          <td align="left" class="name" ><span><?php echo $data[PREFIX_MASTER_ANNOUNCEMENTS . 'heading']; ?></span></td>
          <td align="left" class="name">
          <?php echo (!empty($data[PREFIX_MASTER_ANNOUNCEMENTS . 'expiry_date'])) ? date("j", strtotime($data[PREFIX_MASTER_ANNOUNCEMENTS . 'expiry_date'])).'<sup>'.date("S", strtotime($data[PREFIX_MASTER_ANNOUNCEMENTS . 'expiry_date'])).'</sup> '.date("M, Y", strtotime($data[PREFIX_MASTER_ANNOUNCEMENTS . 'expiry_date'])) : "N/A"; ?>
          </td>
          <td align="center">
            <?php Admin_View_Helper_GeneralHelper::status_icon($data[PREFIX_MASTER_ANNOUNCEMENTS . 'status']); ?></td>
          <td align="center">
            <a href="javascript:;" class="info_tooltip update_data" title="Edit" rel="<?php echo $data[PREFIX_MASTER_ANNOUNCEMENTS . 'id']; ?>" id="link_edit"><?php echo $this->img("img/admin/icons/edit.png", array('id' => 'icon_edit')) ?></a>

            <a href="<?php echo $this->url(array('controller' => 'admin', 'action' => 'announcements', 'do' => 'delete', 'item' => $data[PREFIX_MASTER_ANNOUNCEMENTS . 'id'])); ?>" class="info_tooltip delete_data" title="Delete" rel="<?php echo $data[PREFIX_MASTER_ANNOUNCEMENTS . 'id']; ?>" id=""><?php echo $this->img("img/admin/icons/delete.png", array('id' => 'icon_delete')) ?></a>
          </td>
        </tr>
        <?php } ?>

      </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:37:58.250

首先，您必须将表格放在带有 id 的 div 中

```
<div  id='search-result-table'>
    <table width="100%" border="0" cellspacing="0" cellpadding="0" class="top-table-bg">
        <!-- rows here -->
    </table>
</div> 
```

然后在js函数上，调用ajax，将div中的内容替换为response

```
var heading = jQuery('#txt_heading_filer').val();
var url = 'admin/admin/announcements/search_term/'+heading;
$.get(url, function(data) {
  $('#search-result-table').html(data.result);
}); 
```

然后准备结果。不需要`if($req->isPost())`条件。您必须为所有类型的请求调用分页器。

```
if($req->isXmlHttpRequest())
{
    $this->_helper->viewRenderer->setNoRender(); //Disable view
    $this->_helper->layout->disableLayout();    //Disable layout
    $html = $this->view->render('searchresult.phtml');  //Create a new view file in the script location and put the result (same code as in the view page) in it
    echo Zend_Json::encode(array('result'=>$html));     //Get the result and encode it
} 
```

在`searchresult.phtml`：

```
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="top-table-bg">
    <!-- rows here -->
</table> 
```

# r - 获取R中矩阵每一行中K个最小或最大元素的索引

> ID：14017677
> 
> 赞同：8
> 
> 时间：2012-12-24T06:06:19.093
> 
> 标签：r, sorting, matrix, indices

如何在R中矩阵的每一行中获取K个最小或最大元素的索引？

例如我有矩阵：

```
2   3   1  65  2
46  7   9  3   2
9   45  3  5   7
24  65  87 3   6
34  76  54 33  6 
```

我想在每行中获得 2 个最小元素（以任何方式打破平局）的索引矩阵。结果应采用以下格式：

```
3 1
5 4
3 4
4 5
5 4 
```

我尝试了一些使用`sort`, `apply`,`arrayInd`等的命令`which`。但仍然无法获得所需的结果。欢迎任何帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-24T06:12:20.827

```
apply(mat, 1, which.max)  #.....largest
apply(mat, 1, which.min)  #.....smallest

t(apply(mat, 1, sort)[ 1:2, ])  # 2 smallest in each row

t(apply(mat, 1, order)[ 1:2, ])  # indices of 2 smallest in each row 
```

除了使用 reduction=TRUE，您还可以将其用于连续最大的两个：

```
t(apply(mat, 1, order)[ 5:4, ]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-03T09:47:51.817

关于什么

*   查找每行中 k 个最大值的索引

    ```
    apply(mat, 1, function(x, k) which(x <= max(sort(x, decreasing = F)[1:k]), arr.ind = T), k)` 
    ```

*   查找每行中 k 个最小值的索引

    ```
    apply(mat, 1, function(x, k) which(x >= min(sort(x, decreasing = T)[1:k]), arr.ind = T), k)` 
    ```

在您的示例中，对于`k <- 2`，前者导致

```
 [,1] [,2] [,3] [,4] [,5]
[1,]    2    1    1    2    2
[2,]    4    3    2    3    3 
```

后者导致

```
[[1]]
[1] 1 3 5

[[2]]
[1] 4 5

[[3]]
[1] 3 4

[[4]]
[1] 4 5

[[5]]
[1] 4 5 
```

将 的第二个参数从 1更改`apply`为 2 以搜索列。

# c++builder - 在borland c ++ builder中的表单之间传输数据

> ID：14017678
> 
> 赞同：4
> 
> 时间：2012-12-24T06:06:23.380
> 
> 标签：c++builder, c++builder-2010, c++builder-xe2

我在 c++ builder 中设计了两种形式：

*   主函数
*   选择名称

在 TfrmMain 类中，我有一个名为 btnNext 的按钮。单击 btnNext 时，下面的代码将运行并创建新的 TfrmChooseName。

```
frmChooseName = new TfrmChooseName(this);
this->Hide();
frmChooseName->ShowModal();
this->Show();
delete frmChooseName;
frmChooseName = NULL; 
```

同样在 TfrmMain 我有名为 txtInput 的 TEdit 控件。
在 TfrmChooseName 的构造函数中，我想获取 txtInput 的文本并将其设置为表单的标题，但发生访问波动错误！
我也让这两个班级成为朋友！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T23:51:13.937

处理此问题的最佳方法是将所需的 Caption 值传递给构造函数本身，而不是对其进行编码以寻找该值，例如：

```
__fastcall TfrmChooseName(TComponent *Owner, const String &ACaption)
    : TForm(Owner)
{
    Caption = ACaption;
} 
```

.

```
frmChooseName = new TfrmChooseName(this, txtInput->Text); 
```

或者，您可以在构造函数退出后设置 Caption，例如：

```
frmChooseName = new TfrmChooseName(this);
frmChooseName->Caption = txtInput->Text; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T23:50:42.800

我认为如果不查看更多代码就不可能检测到确切的问题。不需要让类成为朋友，因为使用表单设计器添加的组件无论如何都具有公共访问权限。

您是否已从`TfrmChooseName`自动创建表单中删除？如果不是，并且如果`frmChooseName`是指向自动创建表单的全局变量，则可能会导致访问冲突。

RADStudio 文档文章[动态创建表单](http://docwiki.embarcadero.com/RADStudio/XE3/en/Creating_Forms_Dynamically)说：

> 注意：如果您使用其构造函数创建表单，请务必检查该表单是否不在“项目”>“选项”>“表单”页面上的“自动创建表单”列表中。具体来说，如果您创建新表单而不从列表中删除同名表单，Delphi 在启动时创建表单，并且此事件处理程序创建表单的新实例，覆盖对自动创建的实例的引用。自动创建的实例仍然存在，但应用程序无法再访问它。事件处理程序终止后，全局变量不再指向有效表单。任何使用全局变量的尝试都可能使应用程序崩溃。

您可能还想看看[使用局部变量创建表单实例](http://docwiki.embarcadero.com/RADStudio/XE3/en/Creating_a_Form_Instance_Using_a_Local_Variable)。

# xcode - 将新的 dropbox.framework 添加到 xcode 给出错误

> ID：14017680
> 
> 赞同：0
> 
> 时间：2012-12-24T06:06:53.433
> 
> 标签：xcode, frameworks, dropbox

我试图将 Dropbox 框架添加到我的 xcode 4.5 但我收到如下错误

**ld：架构 armv7 的 14 个重复符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）**

所以我搜索了一下，发现 xcode 4.5 不再支持 drop box 框架。所以我尝试添加新的 1.3 版本的 Dropbox 框架，但仍然出现同样的错误。请帮帮我。如何克服这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:55:13.153

首先尝试先清理项目并尝试再次运行它。如果没有，你看过这个： http: [//www.mathiastauber.com/integration-o-dropbox-in-your-ios-application/](http://www.mathiastauber.com/integration-o-dropbox-in-your-ios-application/)

# java - 从不同的类更新 JProgressBar

> ID：14017682
> 
> 赞同：0
> 
> 时间：2012-12-24T06:07:09.513
> 
> 标签：java, swing, jprogressbar

我已经构建了一个小型 java 应用程序，它用于更新 mysql 数据库上产品的产品价格、数量和特价等，使用 csv 文件作为我从父亲电气零售业务的封闭计算机系统收到的输入。

除了进度条，我一切正常。由于 JProgressBar 的设置，我终其一生都无法弄清楚如何将 JProgressBar 放入我的应用程序中。在获得软件工程学位的前 6 个月，我对编程还比较陌生。

基本上，我有 3 个类：数据库（执行与 mysql db 的所有交互）更新程序（解释 .csv 文件并与数据库模块交互以执行功能。它循环通过从 .csv 文件创建的数组，并更新记录） GUI（基本 gui ，由 JFrame、JPanel、按钮和文本字段组成，用于数据库登录和浏览 .csv 文件）

GUI 创建数据库实例，使用其文本字段作为输入，这被传递给更新程序类的实例，也由 GUI 创建。

我应该在这个项目的哪里插入进度条，或者我应该对我的项目设置进行哪些更改以允许这样做？

非常感谢您的帮助，我卡住并搜索了互联网，找不到合适的方法使进度条适合我的情况。

请对我放轻松：PI知道我可能在整个设置过程中犯了根本错误，哈哈

谢谢，威尔逊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T07:54:49.420

进度条肯定是 GUI 组件，那么它还属于哪里呢？然而，它经常显示在您自己的非 Swing 线程中发生的事情的进度（在 Swing 线程中做太多会冻结 GUI 控件）。您不能直接从非 Swing 线程触摸进度条。使用[invokeLater](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/SwingUtilities.html#invokeLater%28java.lang.Runnable%29)或[invokeAndWait](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/SwingUtilities.html#invokeAndWait%28java.lang.Runnable%29)将其向前移动。为了避免内存垃圾，可以重用相同的[Runnable](http://docs.oracle.com/javase/1.4.2/docs/api/index.html)，将所需的进度分配给内部字段。

```
Runnable doProgress = new Runnable() {

   int progress = 0;

   public void run() {
       myProgressBar.setValue(progress++);
   }
};
// do something 
SwingUtilities.invokeLater(doProgress);
// do more
SwingUtilities.invokeLater(doProgress); 
```

# java - 如何设置键盘上按键图标的高度和宽度

> ID：14017683
> 
> 赞同：0
> 
> 时间：2012-12-24T06:07:30.563
> 
> 标签：java, android

我创建了我的`Keyboard`. 我需要展示`icon`一个`Key`。

```
 Keyboard.Key key;
 key = this.getKeys().get( 0);
 Drawable icon = context.getResources().getDrawable( iKeyIcon); // iKeyIcon - id of my file resource with icon
 key.icon  = icon; 
```

如何以编程方式设置其高度和宽度？

# sharepoint-2010 - 访问路径被拒绝

> ID：14017684
> 
> 赞同：1
> 
> 时间：2012-12-24T06:07:40.393
> 
> 标签：sharepoint-2010

我在 SharePoint 2010 中工作。我的要求是在 SharePoint 布局中创建文件夹并在该文件夹中创建一个文件。我还需要访问当前登录用户的文件。

布局-> 文件-->file1.txt。

请查看下面的代码。

```
String tempFilePath = SPUtility.GetGenericSetupPath(String.Empty) + "TEMPLATE\\LAYOUTS\\Files";         

DirectorySecurity securityRules = new DirectorySecurity();
securityRules.AddAccessRule(new FileSystemAccessRule(strUserName, FileSystemRights.FullControl, AccessControlType.Allow));
bool IsExist = System.IO.Directory.Exists(v);

if (!IsExist )
System.IO.Directory.CreateDirectory(tempFilePath ,securityRules); 
```

在上面的代码中，如果 strUserName 是管理员，那么目录（文件）将被成功创建。但对于管理员帐户以外的其他帐户，CreateDirectory 将失败（拒绝访问路径）。谁能告诉我如何为具有完全权限的任何用户创建 sharpoint 布局中的文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:00:23.140

使用 SPSecurity.RunWithElevatedPrivileges 为其他登录用户制作代码。

检查下面给出的示例链接

> [http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spsecurity.runwithelevatedprivileges.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spsecurity.runwithelevatedprivileges.aspx)

# dynamics-crm-4 - 如何在 Microsoft crm 的预约中添加所需的与会者

> ID：14017685
> 
> 赞同：0
> 
> 时间：2012-12-24T06:07:53.227
> 
> 标签：dynamics-crm-4

我从 C# 在 microsoft dynamics 4.0 中添加了一个新联系人。如何从代码中要求与会者？我创建了一个这样的联系人。现在如何将此联系人添加为所选约会所需的与会者？

```
 CRM.CrmService service = GetService();

        var contactResult = new contact
        {
            emailaddress1 = userContact.Email
        };

        var requestContact = new RetrieveDuplicatesRequest
        {
            BusinessEntity = contactResult
            ,
            MatchingEntityName = EntityName.contact.ToString()
            ,
            PagingInfo = new PagingInfo
                             {
                                 PageNumber = 1,
                                 Count = 1
                             }
        };

        bool blnEmailExists = false;

        try
        {

            var response = (RetrieveDuplicatesResponse)
                                    service.Execute(requestContact);

            foreach (contact contactItem in response.DuplicateCollection.BusinessEntities)
            {
                blnEmailExists = true;
                contactResult.contactid = new Key();
                contactResult.contactid.Value = new Guid(contactItem.contactid.Value.ToString());
                contactResult.firstname = userContact.FirstName;
                contactResult.lastname = userContact.LastName;
                contactResult.fullname = userContact.FullName;
                contactResult.mobilephone = userContact.PhoneNumber;
                contactResult.description = userContact.Description;

                service.Update(contactResult);
            }

            if (!blnEmailExists)
            {
                contactResult.firstname = userContact.FirstName;
                contactResult.lastname = userContact.LastName;
                contactResult.fullname = userContact.FullName;
                contactResult.mobilephone = userContact.PhoneNumber;
                contactResult.description = userContact.Description;

                Guid contactId = service.Create(contactResult);

                if (!string.IsNullOrEmpty(userContact.Notes))
                    AppendToNotesSection(userContact.Notes, contactId, service);
            }
        }
        catch (System.Web.Services.Protocols.SoapException ex)
        {
            throw new Exception(ex.Message);
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:14:35.913

通过activityParty可以更新它，最后我找到并修复了它。

```
CRM.CrmService service = GetService();

        appointment appointment = (appointment)service.Retrieve(EntityName.appointment.ToString(), activityid, new AllColumns());

        if(appointment == null)
        {
            throw new ArgumentNullException("Invalid Appointment");
        }

        contact contact = RegisterContact(userContact, service);

        activityparty[] activityParty = new activityparty[appointment.requiredattendees.Length + 1];
        activityParty[0] = new activityparty();
        activityParty[0].partyid = new Lookup();
        activityParty[0].partyid.Value = contact.contactid.Value;
        activityParty[0].partyid.type = "contact";
        Int16 index = 1;
        foreach (var item in appointment.requiredattendees)
        {
            //for avoiding duplicates
            if (item.partyid.Value != contact.contactid.Value)
            {
                activityParty[index] = new activityparty();
                activityParty[index].partyid = item.partyid;
                activityParty[index].partyid.Value = item.partyid.Value;
                activityParty[index].partyid.type = item.partyid.type;
                index++;
            }
        }

        appointment.requiredattendees = activityParty;

        try
        {
            service.Update(appointment);
        }
        catch (System.Web.Services.Protocols.SoapException ex)
        {
            Console.WriteLine(ex.Message + ". " + ex.Detail.InnerText);
        } 
```

# java - Java Server Page Param 混淆

> ID：14017686
> 
> 赞同：0
> 
> 时间：2012-12-24T06:08:09.543
> 
> 标签：java, jsp, jsp-tags

当执行`jsp:include`或时`jsp:forward`，包含的页面或转发的页面将看到原始请求对象，原始参数增加了新参数，并且新值在适用时优先于现有值。

例如，如果请求有参数 `Lname=abc`，并且`Lname=xyz`为转发指定了参数，则转发的请求将具有`Lname=xyz, abc`.

新参数优先

请举例说明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T06:49:38.453

让我们了解 jsp:include 和 jsp:forward 之间的主要区别。

jsp:include，包含当前页面内的页面。因此，包含的页面将出现在您在当前页面中添加 jsp 命令的位置。

例如

```
...
<jsp:include page="inc/include.jsp" />
... 
```

但是 jsp:forward 会将当前页面转发到转发页面。这意味着当调用当前页面时，会立即调用转发页面。

例如

```
if (...) { forwarded to pageOne.jsp }
else if (...) { forwarded to pageTwo.jsp } 
```

下面是我们可以访问 jsp:forward 和 jsp:include 参数的方式。

jsp:include ：我们可以使用参数而不是请求对象来访问参数。例如

```
${param.param1} 
```

而在 jsp:forward 中：我们可以使用请求对象访问参数。例如

```
request.getParameter("param1") 
```

这是 jsp:inlcude 和 jsp:forward 中的参数之间的主要区别。因此，我们在 jsp:forward 中获得了新的价值（比如 Lname=xyz）。

例子：

假设我们在请求对象中有一个参数 Lname=xyz。在当前的 jsp 中，可以使用以下代码访问它

```
<%= (String)request.getParameter("Lname"); %> <%-- This will print xyz on jsp --%> 
```

现在，进一步相同的参数名称可以与 jsp:forward 一起使用，例如...

```
<jsp:forward page="fwd/pageOne.jsp?Lname=abc" /> 
```

或者

```
<jsp:forward page="fwd/pageOne.jsp">
    <param name="Lname" value="abc"/>
</jsp:forward> 
```

这将使用 request.getParameter() 方法在 fwd/pageOne.jsp 中产生 Lname=abc。

谢谢

# jquery - 滚动页面不起作用

> ID：14017689
> 
> 赞同：0
> 
> 时间：2012-12-24T06:08:29.593
> 
> 标签：jquery, mobile, scroll

我有这个页面，在我的一生中，我无法在 iPhone 上滚动工作。我尝试了几种不同的技术，但我无法让它发挥作用。任何建议，将不胜感激。这是jquery手机。

```
<!DOCTYPE html>
<html class="ui-mobile">
   <head>
      <style type="text/css">@media print {  .gmnoprint {    display:none  }}@media screen {  .gmnoscreen {    display:none  }}</style>
      <base href="http://ha.com/calendartoporig.html" />
      <meta name="viewport" content="initial-scale = 1.0, maximum-scale = 1.0, user-scalable = no" />
      <link rel="apple-touch-icon-precomposed" href="apple-touch-icon-precomposed.png" />
      <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script><script src="http://maps.gstatic.com/intl/en_us/mapfiles/api-3/9/12/main.js" type="text/javascript"></script>
      <script src="../../codebase/dhtmlxscheduler_mobile.js" type="text/javascript"></script>
      <script type="text/javascript">var switchTo5x=true;</script>
      <!-- <script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
         <script type="text/javascript" src="http://s.sharethis.com/loader.js"></script>-->
      <link rel="stylesheet" href="/jquery.mobile-1.0.1/jquery.mobile-1.1.0.css" />
      <link rel="stylesheet" href="../../_assets/css/jqm-docs.css" />
      <link rel="stylesheet" type="text/css" href="../../codebase/dhtmlxscheduler_mobile.css" />
      <link rel="stylesheet" type="text/css" href="applemartinigreen.css" />
      <script src="jquery.js"></script>
      <script src="../../../experiments/themeswitcher/jquery.mobile.themeswitcher.js"></script>
      <script src="../../_assets/js/jqm-docs.js"></script>
      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
      <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
      <script src="mi.js"></script>
      <script src="Footer.js"></script>
      <link rel="stylesheet" href="jquery.ui.datepicker.mobile.css" />
      <script src="jQuery.ui.datepicker.js"></script>
      <script src="jquery.ui.datepicker.mobile.js"></script>
      <script src="stay_standalone.js" type="text/javascript"></script>
      <title>Event Home</title>
   </head>
   <body>
      <!-- InviteMakingView -->
      <div data-role="page" data-theme="g" id="eventhome" />
      <div data-role="content" style="padding: 0px">
         <div class="nav-glyphish-example ui-navbar" data-role="navbar" data-iconpos="top" data-theme="g" role="navigation">
            <ul class="ui-grid-d">
               <li class="ui-block-a">
                  <a id="home" href="index.php" data-ajax="false" data-theme="g" data-icon="home" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-iconpos="top" data-inline="true" class="ui-btn ui-btn-up-g ui-btn-inline ui-btn-icon-top"><span class="ui-btn-text">
                  Happening
                  </span></a>
               </li>
               <li class="ui-block-c">
                  <a id="friends" href="friendshome.html" data-ajax="false" data-theme="g" data-icon="custom" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-iconpos="top" data-inline="true" class="ui-btn ui-btn-up-g ui-btn-inline ui-btn-icon-top"><span class="ui-btn-text">
                  People
                  </span></a>
               </li>
               <li class="ui-block-d">
                  <a id="companies" href="companyhome.html" data-ajax="false" data-theme="g" data-icon="custom" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-iconpos="top" data-inline="true" class="ui-btn ui-btn-inline ui-btn-icon-top ui-btn-up-g"><span class="ui-btn-text">
                  Places
                  </span></a>
               </li>
               <li class="ui-block-e">
                  <a id="invites" href="eventhome.php" data-ajax="false" data-theme="g" data-icon="custom" class="ui-btn-active ui-state-persist ui-btn ui-btn-up-g ui-btn-inline ui-btn-icon-top" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-iconpos="top" data-inline="true"><span class="ui-btn-text">
                  Parties
                  </span></a>
               </li>
               <li class="ui-block-b">
                  <a id="me" href="me.html" data-ajax="false" data-theme="g" data-icon="custom" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-iconpos="top" data-inline="true" class="ui-btn ui-btn-up-g ui-btn-inline ui-btn-icon-top"><span class="ui-btn-text">
                  Me
                  </span></a>
               </li>
            </ul>
         </div>
         <div>
         </div>
         <div class="ui-grid-a">
            <div class="ui-block-f">
               <div id="eventsetup" class="ui-block-b">
                  <div id="eventdetails">
                     <form action="evententry.php" method="post" data-ajax="false">
                        <p>
                           <b>
                           Event Name: <input id="evententry" type="text" name="eventname" />
                           </b>
                        </p>
                        <p>
                           <b>
                           <input id="evententry" type="hidden" name="companyname" value="<?= $fgmembersite->UserEmail() ?>" />
                           </b>
                        </p>
                        <p>
                           <b>
                           <input id="evententry" type="hidden" name="userid" value="<?= $fgmembersite->UserID() ?>" />
                           </b>
                        </p>
                        <p>
                           <b>
                           Start Date:  <input id="evententry" type="date" name="sdate" id="date" value="" />
                           </b>
                        </p>
                        <p>
                           <b>
                           End Date:  <input id="evententry" type="date" name="edate" id="date" value="" />
                           </b>
                        </p>
                        <p>
                           <b>
                           Time:  <input id="evententry" type="text" name="eventtime" />
                           </b>
                        </p>
                        <p>
                           <b>
                           Location: <input id="evententry" type="text" name="eventlocation" />
                           </b>
                        </p>
                        <p>
                           <b>
                           Dress Code: <input id="evententry" type="text" name="eventdress" />
                           </b>
                        </p>
                        <div id="footerSlideContainereh">
                           <div id="caltoolbar" data-tap-toggle="false" data-role="footer" data-position="fixed" data-theme="g">
                              <a id="refreshme" data-icon="custom" data-role="button" data-transition="fade" data-theme="g" onclick="location.reload()">
                              </a>
                              <input id="eventsub" type="submit" value="Enter Event" />
                     </form>
                     </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <script></script>
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T18:53:08.687

我弄清楚了这个问题。调度程序中有一些影响本机滚动的 js 代码。我删除了这些代码，问题解决了。谢谢

# directx - 渲染到纹理，但如何使用 DirectX 以透明度保存它？

> ID：14017691
> 
> 赞同：1
> 
> 时间：2012-12-24T06:08:54.447
> 
> 标签：directx, png, transparency, render-to-texture

我正在使用 DirectX 11 SDK 并为纹理渲染一些东西（它的工作原理）。比使用 D3DX11SaveTextureToFile 将输出保存到 PNG 纹理。一切正常，但我没有得到透明度。

**我想让背景**（没有渲染任何元素的空间）**透明**。而不是这个，我得到了一些背景。

我试图将`float ClearColor[4]`for`ClearRenderTargetView`函数更改为，`{ 0.0f, 0.0f, 0.0f, 1.0f }`因为我认为最后一个是 alpha 和**1.0f**给我透明度，但这对我不起作用（**对于 0.0f 也是**如此）。

这是我的代码中可能有用的部分：

混合状态（我认为这很好，它们适用于在屏幕上渲染透明元素 - 当然监视器的屏幕总是有一些“背景”，PNG文件没有）：

```
D3D11_BLEND_DESC blendDesc;
ZeroMemory(&blendDesc, sizeof(D3D11_BLEND_DESC) );
blendDesc.AlphaToCoverageEnable = false;
blendDesc.IndependentBlendEnable = false;        
blendDesc.RenderTarget[0].BlendEnable = true;
blendDesc.RenderTarget[0].SrcBlend = D3D11_BLEND_SRC_ALPHA;
blendDesc.RenderTarget[0].DestBlend = D3D11_BLEND_INV_SRC_ALPHA;
blendDesc.RenderTarget[0].BlendOp = D3D11_BLEND_OP_ADD;

blendDesc.RenderTarget[0].SrcBlendAlpha = D3D11_BLEND_ZERO; 
blendDesc.RenderTarget[0].DestBlendAlpha = D3D11_BLEND_ZERO; 
blendDesc.RenderTarget[0].BlendOpAlpha = D3D11_BLEND_OP_ADD;
blendDesc.RenderTarget[0].RenderTargetWriteMask = D3D11_COLOR_WRITE_ENABLE_ALL ;

ID3D11BlendState * blendState;

if(FAILED(device->CreateBlendState(&blendDesc, &blendState))){
        //...
}

g_pImmediateContext->OMSetBlendState(blendState,NULL,0xffffffff); 
```

和：

```
// Setup the render target texture description.
textureDesc.Width = textureWidth;
textureDesc.Height = textureHeight;
textureDesc.MipLevels = 1;
textureDesc.ArraySize = 1;
textureDesc.Format = DXGI_FORMAT_R32G32B32A32_FLOAT;
textureDesc.SampleDesc.Count = 1;
textureDesc.Usage = D3D11_USAGE_DEFAULT;
textureDesc.BindFlags = D3D11_BIND_RENDER_TARGET | D3D11_BIND_SHADER_RESOURCE;
textureDesc.CPUAccessFlags = 0;
textureDesc.MiscFlags = 0;
textureDesc.SampleDesc.Quality = 0;
textureDesc.Format = DXGI_FORMAT_R8G8B8A8_UNORM;    
...
//Create the render target texture.
result = device->CreateTexture2D(&textureDesc, NULL, &renderTargetTexture);  
...
result = device->CreateShaderResourceView(renderTargetTexture, 
    &shaderResourceViewDesc, &shaderResourceView);  
...
g_pImmediateContext->OMSetRenderTargets(1, &renderTargetView, 
    g_pDepthStencilView);
float ClearColor[4] = { 0.0f, 0.0f, 0.0f, 1.0f }; //red, green, blue, alpha
g_pImmediateContext->ClearRenderTargetView( renderTargetView, ClearColor );

//clear the depth buffer to 1.0 (max depth)
g_pImmediateContext->ClearDepthStencilView( g_pDepthStencilView, 
    D3D11_CLEAR_DEPTH, 1.0f, 0 ); 
...
//render here
...
D3DX11SaveTextureToFile(g_pImmediateContext, renderTargetTexture, 
    D3DX11_IFF_BMP, CommonFunctions::s2ws(newTextureName).c_str()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T13:38:27.387

如果要保存 PNG 文件，请`D3DX11_IFF_PNG`使用`D3DX11_IFF_BMP`.

* * *

正如 PolGraphic 在他的评论中提到的，可能需要将混合状态从 D3D11_BLEND_SRC_ALPHA 和 D3D11_BLEND_INV_SRC_ALPHA 更改为适用于 PNG 的 D3D11_BLEND_ONE。但是，在大多数情况下，默认设置 SRC_ALPHA / INV_SRC_ALPHA 应该可以工作。

# android - 如何降低自定义 ProgressBar 的速度

> ID：14017693
> 
> 赞同：7
> 
> 时间：2012-12-24T06:09:00.323
> 
> 标签：android, progress-bar

我已经实现了一个自定义进度条，并且在从 URL 获取数据时显示它，它工作正常，因为进度条正在旋转，但我的问题是我目前无法找到降低其旋转速度的适当方法它旋转得非常快。

请帮助我提出您的建议并回复。

进度条的xml布局：-

```
 <ProgressBar
        android:id="@+id/showProgress"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:indeterminateDrawable="@drawable/my_progress_indeterminate" /> 
```

这里还有“my_progress_indeterminate”，用于旋转我的自定义进度条：-

```
<?xml version="1.0" encoding="utf-8"?>
<animated-rotate xmlns:android="http://schemas.android.com/apk/res/android"
    android:drawable="@drawable/image_loading"
    android:pivotX="50%"
    android:pivotY="50%" /> 
```

如果可能的话，请分享一些例子来降低旋转速度。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-03-19T08:39:27.010

将代码添加到progress.xml

```
android:fromDegrees="0"

android:toDegrees="1080"   <!-- Add in code to progress custumize xml to speed up --> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-07T05:36:44.120

尝试这个。它会帮助你。

创建progressbar_custom.xml

`/res/drawable/progressbar_custom.xml:`

```
<?xml version="1.0" encoding="utf-8"?>
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="3000"
    android:fromDegrees="0"
    android:pivotX="50%"
    android:pivotY="50%"
    android:toDegrees="360" >

    <shape
        android:innerRadius="18dp"
        android:shape="ring"
        android:thickness="5dp"
        android:useLevel="false" >
        <size
            android:height="48dp"
            android:width="48dp" />

        <gradient
            android:centerColor="#802A67AD"
            android:centerY="0.5"
            android:endColor="#ff2A67AD"
            android:startColor="#002A67AD"
            android:type="sweep"
            android:useLevel="false" />
    </shape>

</rotate> 
```

在 XML 文件中添加进度条

```
 <ProgressBar
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:indeterminateDrawable="@drawable/progressbar_custom" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-29T04:30:38.443

使用“旋转”而不是“动画旋转”并更改 android:toDegrees 或 android:toDegress 应该让它变慢。

```
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
    android:drawable="@drawable/image_loading"
    android:pivotX="50%"
    android:pivotY="50%"
    android:toDegrees="360" /> 
```

# android - 相对于另一个按钮的弹出对话框

> ID：14017695
> 
> 赞同：1
> 
> 时间：2012-12-24T06:09:13.103
> 
> 标签：android, popup

我是 android 新手，我想修复一个相对于另一个按钮的弹出对话框。我正在使用代码膨胀弹出窗口。我怎样才能获得按钮的当前位置，以便我可以使用这些值来膨胀弹出窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T13:21:56.713

这是我用来获取任何`View`对象的当前 x/y 坐标的代码：

```
/**
 * @return the absolute x and y coordinates of the given view
 */
public Point currentPosition(View view)
{
    int[] loc = new int[2];
    view.getLocationOnScreen(loc);
    return new Point(loc[0], loc[1]);
} 
```

# .htaccess - 如何编写 RedirectMatch，从 url 中删除 Last Words

> ID：14017698
> 
> 赞同：-1
> 
> 时间：2012-12-24T06:09:41.977
> 
> 标签：.htaccess, redirect

我想将管理员附加到 URL 的末尾

这`www.aaa.net/author/admin/page/61/admin`

至`www.aaa.net/author/admin/page/61/`

和`www.aaa.net/news1/admin`

至`www.aaa.net/news1/`

我写了重定向匹配

```
RedirectMatch 301 /(.*)/admin(.*) http://www.aaa.net/$1 
```

但结果是`www.aaa.net/author/`

从 url 中删除`/admin`Last Words

怎么写`RedirectMatch`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:38:07.740

如果 URL 始终采用以下形式

`/author/admin/page/61/admin`

你可以像这样重定向

```
RedirectMatch 301 /((.*)/admin/(.*)/(.*)/)(.*) http://www.aaa.net/$1 
```

# php - 如何为移动设备中的div提供滚动条

> ID：14017703
> 
> 赞同：0
> 
> 时间：2012-12-24T06:10:40.233
> 
> 标签：php, css, facebook, html

谁能告诉我如何给div一个滚动条？在我的程序中，我在一个 div 中列出了我的 Facebook 好友。我给 div 指定了固定高度。我将粘贴代码。

```
<div id="main_fb">
   <div id="friend_list">

   // friendlist code.......

 </div>
</div> 
```

而CSS是：

```
 #main_fb {

        height:250px;
 }

 #friend_list {

        overflow-y:scroll;
        height:224px;
        width:100%;
        overflow:none;

 } 
```

我的代码有什么问题吗？请给我一个解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T06:29:20.573

你有`overflow-y: scroll`然后`overflow:none`，我认为他们在某种程度上是冲突的。对于触摸设备上的 webkit，有特定于供应商的`-webkit-overflow-scrolling: touch;`，但仅在最新版本中受支持。有关更多信息，请参见此处：[-webkit-overflow-scrolling:touch 有多少支持](https://stackoverflow.com/questions/7768363/how-much-support-is-there-for-webkit-overflow-scrollingtouch)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:29:27.080

我认为第二个可能`overflow`会覆盖`overflow-y`您的 CSS 中的第一个。因为您已经将宽度指定为页面的 100%，所以我个人会通过使用`overflow:scroll;`并忘记该`overflow-y`属性来简化事情。

相关 SOF 问题：[div 滚动而不是页面滚动条中的滚动条](https://stackoverflow.com/questions/6653668/scrollbar-in-div-scroll-instead-of-page-scrollbar)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-01T06:43:16.207

我有同样的问题兄弟。如果您遇到类似情况，请参阅[此内容。](https://stackoverflow.com/q/16859957/2163837)就我而言，我最终了解到，在 android 2.3.x 版本中忽略了滚动我不知道你的目标设备是什么，但我想仍然可能会有所帮助。

# android - 在 onDestroy 中释放资源真的不对吗？

> ID：14017704
> 
> 赞同：4
> 
> 时间：2012-12-24T06:10:44.757
> 
> 标签：android

Android 文档说（在[http://developer.android.com/training/basics/activity-lifecycle/stopping.html](http://developer.android.com/training/basics/activity-lifecycle/stopping.html)中）：

> 在极端情况下，系统可能会简单地杀死您的应用程序进程而不调用活动的最终 onDestroy() 回调，因此使用 onStop() 释放可能会泄漏内存的资源很重要。

听起来好像是错的。杀死进程怎么会泄漏内存？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T06:15:12.447

假设您在 onStart() 方法中启动了一项服务，并且您打算在用户退出 Activity 时停止该服务。

如果您将停止服务的代码放在 onDestroy() 中，则该代码可能永远不会被调用，这会使该服务继续运行，直到 Android 决定终止它（如果有的话，这可能暂时不会发生）。该正在运行的服务是在应用程序外部泄漏内存/资源的示例。

您应该将这样的清理代码放在保证被调用的方法中。

请注意，在调用 onPause() 之后进程是可终止的，因此 onPause() 确实是您绝对必须进行清理的地方。

（有关活动生命周期的详细信息，请参见[https://developer.android.com/guide/components/activities.html中的表 1）](https://developer.android.com/guide/components/activities.html)

另一件可能非常糟糕的泄漏：蓝牙发现或位置报告（基于 GPS 或基于网络的）打开但没有尽快关闭 - 对电池寿命非常不利。

# java - 打印异常

> ID：14017706
> 
> 赞同：0
> 
> 时间：2012-12-24T06:11:06.483
> 
> 标签：java, exception, jasper-reports

我正在使用*Java*开发软件。

我将*JasperReports*与用于账单打印的条码访问链接。

我的问题是，当我尝试打印该报告时，发生了此异常：

```
net.sf.jasperreports.engine.JRRuntimeException: java.io.IOException: SAX2 driver class org.apache.crimson.parser.XMLReaderImpl not found
    at net.sf.jasperreports.renderers.BatikRenderer.ensureSvg(BatikRenderer.java:198)
    at net.sf.jasperreports.renderers.BatikRenderer.getDimension(BatikRenderer.java:142)
    at net.sf.jasperreports.engine.export.draw.ImageDrawer.draw(ImageDrawer.java:110)
    at net.sf.jasperreports.engine.export.draw.PrintDrawVisitor.visit(PrintDrawVisitor.java:117)
    at net.sf.jasperreports.engine.export.draw.PrintDrawVisitor.visit(PrintDrawVisitor.java:55)
    at net.sf.jasperreports.engine.fill.JRTemplatePrintImage.accept(JRTemplatePrintImage.java:393)
    at net.sf.jasperreports.engine.export.draw.FrameDrawer.draw(FrameDrawer.java:231)
    at net.sf.jasperreports.engine.export.draw.FrameDrawer.draw(FrameDrawer.java:179)
    at net.sf.jasperreports.engine.export.JRGraphics2DExporter.exportPage(JRGraphics2DExporter.java:259)
    at net.sf.jasperreports.engine.export.JRGraphics2DExporter.exportReportToGraphics2D(JRGraphics2DExporter.java:232)
    at net.sf.jasperreports.engine.export.JRGraphics2DExporter.exportReport(JRGraphics2DExporter.java:171)
    at net.sf.jasperreports.engine.export.JRPrintServiceExporter.print(JRPrintServiceExporter.java:325)
    at sun.print.RasterPrinterJob.printPage(RasterPrinterJob.java:1968)
    at sun.print.RasterPrinterJob.print(RasterPrinterJob.java:1457)
    at net.sf.jasperreports.engine.export.JRPrintServiceExporter.exportReport(JRPrintServiceExporter.java:286)
    at Server.Print.Url.Print.printReport(Print.java:62)
    at Server.Print.Url.Print.createReports(Print.java:116) 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:16:14.747

您的应用程序没有找到所需的库。据我所知，您需要下载[Apache 的 Crimson XML Parser](http://xml.apache.org/crimson/)并将其添加到应用程序的类路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:54:22.607

看起来该库不在您的类路径中

如果您在命令行上运行

1.  更新清单以将 jar 包含在其类路径中

2.  在您的行中手动包含使用“-cp”以添加更多同学条目。例如 java -co jar1.jar;jar2.jar -jar my.jar 这假定 Windows 作为分隔符是 ;

# java - Spring-Batch 第二步无法正常工作

> ID：14017707
> 
> 赞同：1
> 
> 时间：2012-12-24T06:11:13.693
> 
> 标签：java, spring, batch-processing, spring-batch

我正在用两步配置作业，这两个步骤都需要读取不同的文件并将数据转储到数据库。当我启动作业时，它执行了第一步并成功保存数据，第二步没有读取文件。但是在数据库中我可以看到两个步骤状态都是成功的。我的配置看起来像：

```
job id="job1" job-repository="jobRepository" xmlns="http://www.springframework.org/schema/batch" restartable="true">
    <step id="step1">
        <tasklet transaction-manager="transactionManager" task-executor="taskExecutor">
            <chunk reader="DomainItemReader" writer="DomainItemWriter" commit-interval="40" skip-limit="10">
                <skippable-exception-classes>
                    <include class="java.lang.Exception"/>
                    <exclude class="java.io.FileNotFoundException"/>
                </skippable-exception-classes>
                <listeners>
                    <listener ref="MyListener"/>
                </listeners>
            </chunk>
        </tasklet>
        <next on="COMPLETED" to="step2"/>
    </step>
    <step id="step2" >
        <tasklet transaction-manager="transactionManager" task-executor="taskExecutor" allow-start-if-complete="true">
            <chunk reader="DomainItemReader2" writer="DomainItemWriter2" commit-interval="100" skip-limit="10">
                <skippable-exception-classes>
                    <include class="java.lang.Exception"/>
                    <exclude class="java.io.FileNotFoundException"/>
                </skippable-exception-classes>
                <listeners>
                    <listener ref="MyListener2"/>
                </listeners>
            </chunk>
        </tasklet>
    </step>
</job> 
```

我的读者看起来像：

```
<bean id="billDomainItemReader" class="org.springframework.batch.item.file.FlatFileItemReader">
    <property name="resource" value="file:./firstfile.txt" />
    <property name="linesToSkip" value="1" />
    <property name="lineMapper">
        <bean class="org.springframework.batch.item.file.mapping.DefaultLineMapper">
            <property name="lineTokenizer">
                <bean class="org.springframework.batch.item.file.transform.DelimitedLineTokenizer">
                        <property name="delimiter">
                        <util:constant static-field="org.springframework.batch.item.file.transform.DelimitedLineTokenizer.DELIMITER_TAB"/>
                    </property>
                </bean>
            </property>
            <property name="fieldSetMapper">
                <bean class="com.abc.DomainMapper">
                    <property name="accessJobParam" ref="accessJobParam"/>
                </bean>
            </property>
        </bean>
    </property>
</bean> 
```

我第二步的读者看起来像：

```
<bean id="DomainItemReader2" class="org.springframework.batch.item.file.FlatFileItemReader" scope="step">
    <property name="resource" value="file:./secondFile.txt" />
    <property name="linesToSkip" value="1" />
    <property name="lineMapper">
        <bean class="org.springframework.batch.item.file.mapping.DefaultLineMapper">
            <property name="lineTokenizer">
                <bean class="org.springframework.batch.item.file.transform.DelimitedLineTokenizer">
                    <!-- <property name="names" value="PRODUCT_ID,NAME,DESCRIPTION,PRICE" />-->
                    <property name="delimiter">
                        <util:constant static-field="org.springframework.batch.item.file.transform.DelimitedLineTokenizer.DELIMITER_TAB"/>
                    </property>
                </bean>
            </property>
            <property name="fieldSetMapper">
                <bean class="com.abc.DomainMapper2">
                    <property name="accessJobParam" ref="accessJobParam"/>
                </bean>
            </property>
        </bean>
    </property>
</bean> 
```

任何人都可以告诉我我做错了什么以及为什么它没有处理我的第二步文件。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:37:10.557

我删除了

```
allow-start-if-complete="true"` 
```

从我的第二步开始并添加

```
parent="step1" 
```

在我的第二步中，它对我来说很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:19:50.870

在您的第二个阅读器配置中

```
<property name="fieldSetMapper">
                <bean class="com.DomainMapper2">
                    <property name="accessJobParam" ref="accessJobParam"/>
                </bean>
            </property> 
```

检查 bean 类映射`<bean class="com.DomainMapper2">`

这个bean是在同一个包中还是在不同的包中`<bean class="com.abc.DomainMapper2">`

# python - 将 Tornado 类中的变量导出到另一个模块

> ID：14017709
> 
> 赞同：1
> 
> 时间：2012-12-24T06:11:41.743
> 
> 标签：python, variables, python-2.7, scope, tornado

我正在使用`Tornado framework`and `Websockethandler`，它从客户端接收数据，并将值存储在变量中。如何将该变量发送到另一个模块。这是代码（部分）：

```
#module a.py

class Handler(tornado.websocket.WebSocketHandler):    
    @tornado.web.asynchronous
    @gen.engine

    def on_message(self, event):
        data = urlparse.parse_qs(event)
        event= data.get('type') 
```

如何将变量`event`传递给模块`b.py`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T06:36:52.073

`b.py`例如，在 module 中创建一个函数`on_message`并将其传递给您的`event`变量：

`b.py`：

```
def handle_event(new_event):
    print new_event 
```

`a.py`：

```
import b

class Handler(tornado.websocket.WebSocketHandler):    
    @tornado.web.asynchronous
    @gen.engine

    def on_message(self, event):
        data = urlparse.parse_qs(event)
        event= data.get('type')
        b.handle_message(event)  # this 
```

# c# - 在c#中的服务器端运行时查找div

> ID：14017711
> 
> 赞同：5
> 
> 时间：2012-12-24T06:11:50.420
> 
> 标签：c#, asp.net, html

嘿嘿。

我在 index.aspx 页面中有这样的 div

```
<div id="MainDiv" runat="server"> 
```

我正在从服务器端（在运行时）创建 div

```
 for (Int32 i = 0; i < 4; i++)
    {

        //Create here divFinal
        HtmlGenericControl divFinal = new HtmlGenericControl("div");
        divFinal.ID = i.ToString();

        divFinal.Attributes.Add("class", "column");

        mainDiv.Controls.Add(divFinal);
        //add to maindiv

        HtmlGenericControl div = new HtmlGenericControl("div");
        div.ID = "t_e_" + i.ToString() + "_a";
        div.Style["background-color"] = "#CFD8E6";
        div.Attributes.Add("class", "grid");
        div.Attributes.Add("onclick", "OnMouseDownDiv(this)");

        div.Attributes.Add("onmouseover", "OnMouseDown(this)");
        div.Attributes.Add("onmouseout", "OnMouseUp(this)");
        divFinal.Controls.Add(div);

        // add to dvfinal

    } 
```

在生成评分后，它在 HTML 表单中看起来像这样

```
 <div id="mainDiv"><div id="0" class="column"><div id="t_e_0_a"></div></div><div id="1" class="column"><div id="t_e_1_a"></div></div></div> 
```

现在我需要在主 Divdiv 中找到 div id t_e_0_a。

```
HtmlGenericControl div = 
    ((HtmlGenericControl)showdiv.FindControl("0")); 
```

但它给我错误....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T06:18:37.570

你不能像你想要的那样做，因为它不是一个控件。您应该`runat="server"`在其上放置属性，或者您可以通过某种方式获取它`showdiv.InnerHtml`- 它应该以字符串的形式呈现，您可以使用 .net 的一些 HTML 解析器对其进行解析（例如，[此处](https://stackoverflow.com/questions/56107/what-is-the-best-way-to-parse-html-in-c)建议的[HTMLAgilityPack](http://htmlagilitypack.codeplex.com/)）

要在运行时创建服务器端控件，您可以使用以下内容：

```
for (Int32 i = 0; i < 2; i++)
{
        HtmlGenericControl div = new HtmlGenericControl("div");
        div.ID = i.ToString();
        div.InnerHtml = i.ToString();
        div.ClientIDMode = ClientIDMode.Static; //this is for .NET 4.5 only. Required to have ClientID the same as ID.
        showdiv.Controls.Add(div);
} 
```

而且，在添加控件之后，您应该能够使用这样的东西：

```
HtmlGenericControl div=((HtmlGenericControl)showdiv.FindControl("1")) 
```

获得这些控制。但请记住，必须为每个请求添加这样添加的控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T13:26:45.057

您应该尝试过如何使用递归函数`Page.FindControl`。

```
private Control getFollowingControl(Control c, string key,out Control returnControl)
{        
    if(c.hasChild)
    {
        foreach(Control item in c.controls)
        {
            getFollowingControl(item,key,out returnControl);
        }
    }
    else
    {
        if(c.Id==key)
        {
            returnControl=c;
            break;
        }

    }
} 
```

现在您可以使用上述 recusive 函数来查找任何深度的任何控件....

```
Control getThisControl=null;
getFllowingControl(this,"myButton1",out getThisControl); 
```

最后，它将为您提供在 GetThisControl 控件对象中具有 Id="myButton1" 的控件。

# exception - 我想知道，为什么会出现redis.clients.jedis.exceptions.JedisConnectionException的异常？

> ID：14017712
> 
> 赞同：0
> 
> 时间：2012-12-24T06:12:09.313
> 
> 标签：exception, redis, jedis

我在我的 java 项目中使用了 jedis，有一个 master 和一个 slave，一旦 slave 启动，它就会在 redis_slave.log 中出现：

```
44764 [2721] 24 Dec 14:07:41.157 * Connecting to MASTER...
44765 [2721] 24 Dec 14:07:41.158 * MASTER <-> SLAVE sync started
44766 [2721] 24 Dec 14:07:41.158 # Error condition on socket for SYNC: Connection refused 
```

在我的java源文件中，我想删除redis中的所有数据，所以我写了这段代码：

```
public class TestJedisPool {

    private Jedis jedis = null;
    private JedisPool jedisPool = null;

    public TestJedisPool() {
        initialPool();
        jedis = jedisPool.getResource();
        jedis.auth("123456");
    }

    private void initialPool() {
        JedisPoolConfig config = new JedisPoolConfig();
        config.setMaxActive(20);
        config.setMaxIdle(5);
        config.setMaxWait(1000L);
        config.setTestOnBorrow(false);
        jedisPool = new JedisPool(config, "192.168.144.3", 6397);
    }

    private void masterThread() {

        System.out.println(jedis.flushAll());       
        jedisPool.returnResource(jedis);
        jedis.disconnect();
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        TestJedisPool test = new TestJedisPool();
        test.masterThread();
    }
} 
```

并得到这样的异常：

```
 Exception in thread "main" redis.clients.jedis.exceptions.JedisConnectionException: Could not get a resource from the pool
Exception in thread "main" redis.clients.jedis.exceptions.JedisConnectionException: Could not get a resource from the pool
    at redis.clients.util.Pool.getResource(Pool.java:22)
    at com.oppo.testpool.TestJedisPool.<init>(TestJedisPool.java:15)
    at com.oppo.testpool.TestJedisPool.main(TestJedisPool.java:41)
Caused by: redis.clients.jedis.exceptions.JedisConnectionException: java.net.ConnectException: Connection refused: connect 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T09:04:30.327

我修改了您的代码，它适用于：

```
import java.util.ArrayList;
import java.util.List;
import java.util.Map;
import java.util.Set;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

import redis.clients.jedis.Jedis;
import redis.clients.jedis.JedisPoolConfig;
import redis.clients.jedis.JedisShardInfo;
import redis.clients.jedis.Pipeline;
import redis.clients.jedis.ShardedJedis;
import redis.clients.jedis.ShardedJedisPool;

public class TestJedisPool {

    static ExecutorService executor = Executors.newSingleThreadExecutor();

    final static ShardedJedisPool redisStatsPool;
    static {
        String host = "127.0.0.1";
        int port = 6379;
        List<JedisShardInfo> redisClickShard = new ArrayList<JedisShardInfo>();
        redisClickShard.add(new JedisShardInfo(host, port));

        JedisPoolConfig config = new JedisPoolConfig();
        config.maxActive = 1000;
        config.maxIdle = 10;
        config.minIdle = 1;
        config.maxWait = 30000;
        config.numTestsPerEvictionRun = 3;
        config.testOnBorrow = true;
        config.testOnReturn =  true;
        config.testWhileIdle =  true;
        config.timeBetweenEvictionRunsMillis = 30000;
        redisStatsPool = new ShardedJedisPool( config, redisClickShard);
    }

    public TestJedisPool() {        

    }

    String[] getRandomNumber(int min, int max){
        String[] test = new String[8];
        for (int i = 0; i < test.length; i++) {
            int partition = min + (int)(Math.random() * ((max - min) + 1)); 
            test[i] = "key"+partition;
        }       
        return test;
    }

    static volatile long  sum = 0;

    public Runnable hincrBy(final String keyname, final String[] keyfields , final long val){
        Runnable job = new Runnable() {
            @Override
            public void run() {
                c++;
                System.out.println(c);
                try {
                    ShardedJedis shardedJedis = redisStatsPool.getResource();
                    final Jedis jedis = shardedJedis.getShard("") ;
                    Pipeline p = jedis.pipelined();
                    for (String keyfield : keyfields) {
                        p.hincrBy(keyname, keyfield, val);  
                        sum += val;
                    }
                    p.sync(); 
                    redisStatsPool.returnResource(shardedJedis);
                } catch (Exception e) {
                    //e.printStackTrace();
                }
            }
        };
        return job;
    }

    static volatile int c = 0;
    static final int MAX = (int) Math.pow(10, 6);
    void masterThread() {       
        for (int i = 0; i < MAX; i++) {
            String[] keynames = getRandomNumber(100, 1000);
            executor.submit(hincrBy("test10^6", keynames, 1L));
        }
        executor.shutdown();
        while(!executor.isTerminated()){
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }   
    }
    public int sumTest() {
        int total = 0;
        try {
            ShardedJedis shardedJedis = redisStatsPool.getResource();
            final Jedis jedis = shardedJedis.getShard("") ;
            Map<String,String> map  = jedis.hgetAll("test10^6");
            Set<String> keys = map.keySet();

            for (String keyfield : keys) {
                int v = Integer.parseInt(map.get(keyfield));
                total += v;
            }

            redisStatsPool.returnResource(shardedJedis);
        } catch (Exception e) {
            //e.printStackTrace();
        }
        return total;
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        TestJedisPool test = new TestJedisPool();
        test.masterThread();
        System.out.println(sum);
        System.out.println(test.sumTest());
        System.out.println(test.sumTest() == sum);
    }
} 
```

# connection - amqp 不采用提供的配置哈希

> ID：14017715
> 
> 赞同：0
> 
> 时间：2012-12-24T06:12:31.977
> 
> 标签：connection, runtime-error, amqp, eventmachine

我尝试使用正确的 amqp 凭据启动 amqp，但它失败了。我已经在端口 5678 上启动了 rabbitmq 服务器，我正在使用 0.7.0 版本的 amqp gem，我正在使用 ruby​​-1.9.2

这是我在 irb 中所做的日志

```
± irb
/Users/ckgagan/.rvm/rubies/ruby-1.9.2-p320/bin/irb:4: warning: Insecure world writable dir /usr/local/bin in PATH, mode 040777
1.9.2-p320 :001 > require 'mq'
 => true 
1.9.2-p320 :002 > AMQP.start({"host"=>"localhost", "port"=>5678, "user"=>"username", "password"=>"password"}) do
1.9.2-p320 :003 >     puts "hello"
1.9.2-p320 :004?>   end
AMQP::Error: Could not connect to server 127.0.0.1:5672
    from /Users/ckgagan/.rvm/gems/ruby-1.9.2-p320@my_gemset/gems/amqp-0.7.0/lib/amqp/client.rb:76:in `block in initialize'
    from /Users/ckgagan/.rvm/gems/ruby-1.9.2-p320@my_gemset/gems/amqp-0.7.0/lib/amqp/client.rb:107:in `call'
    from /Users/ckgagan/.rvm/gems/ruby-1.9.2-p320@my_gemset/gems/amqp-0.7.0/lib/amqp/client.rb:107:in `block in unbind'
    from /Users/ckgagan/.rvm/gems/ruby-1.9.2-p320@my_gemset/gems/eventmachine-1.0.0/lib/eventmachine.rb:959:in `call'
    from /Users/ckgagan/.rvm/gems/ruby-1.9.2-p320@my_gemset/gems/eventmachine-1.0.0/lib/eventmachine.rb:959:in `block in run_deferred_callbacks'
    from /Users/ckgagan/.rvm/gems/ruby-1.9.2-p320@my_gemset/gems/eventmachine-1.0.0/lib/eventmachine.rb:956:in `times'
    from /Users/ckgagan/.rvm/gems/ruby-1.9.2-p320@my_gemset/gems/eventmachine-1.0.0/lib/eventmachine.rb:956:in `run_deferred_callbacks'
    from /Users/ckgagan/.rvm/gems/ruby-1.9.2-p320@my_gemset/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run_machine'
    from /Users/ckgagan/.rvm/gems/ruby-1.9.2-p320@my_gemset/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run'
    from /Users/ckgagan/.rvm/gems/ruby-1.9.2-p320@my_gemset/gems/amqp-0.7.0/lib/amqp.rb:81:in `start'
    from (irb):2
    from /Users/ckgagan/.rvm/rubies/ruby-1.9.2-p320/bin/irb:16:in `<main>' 
```

即使我尝试**在 5678 连接 Rabbitmq 服务器**，它也尝试连接到默认端口

```
Could not connect to server 127.0.0.1:5672 
```

为什么即使我指定了端口 5678 ，它仍试图**连接到****端口 5678**？

我无法弄清楚这一点并卡在这里

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:17:55.213

AMQP 配置散列将符号作为键，而不是字符串。

```
require "amqp"

AMQP.start({:host => "localhost", :port => 5678}) do
  puts "hello"
end 
```

此外，您可能需要考虑升级到最新版本的 gem。0.7 到 0.9.x 或 1.0.0的[CHANGELOG](https://github.com/ruby-amqp/amqp/blob/master/CHANGELOG)有几页长。

# android - 如何在 Android 的 Activity 之间使用 Intent 传递值？

> ID：14017720
> 
> 赞同：13
> 
> 时间：2012-12-24T06:13:07.660
> 
> 标签：android

我想将一个活动类中的位置值传递给另一个......

我的代码如下：

```
protected void onListItemClick(ListView listView, View v, int position,
            long id) {
        switch (position) {
            case 1:
                Intent newActivity1 = new Intent(this, BucketItemActivity.class);
                newActivity1.putExtra("bucketno", position);
                startActivity(newActivity1);
                break;
            case 2:
                Intent newActivity2 = new Intent(this, BucketItemActivity.class);
                newActivity2.putExtra("bucketno", position);
                startActivity(newActivity2);
                break;
    }
} 
```

将接收它的活动类..

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_bucket_item);
        String value = getIntent().getExtras().getString("bucketno");
        TextView textView = new TextView(this);
        textView.setTextSize(40);
        textView.setText(value);
        setContentView(textView);
    } 
```

但我总是在字符串值中得到一个空值......

请帮忙。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-24T06:14:11.190

换这个，

```
String value = getIntent().getExtras().getString("bucketno"); 
```

和

```
int value = getIntent().getExtras().getInt("bucketno"); 
```

您正在尝试传递 int 值但检索字符串数据。这就是为什么您会收到 nullpointerException。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-24T06:14:43.890

您可以使用 ：

**在第一个活动中（MainActivity 页面）**

```
Intent i = new Intent(MainActivity.this,SecondActivity.class); 
i.putExtra("YourValueKey", yourData.getText().toString()); 
```

然后您可以通过以下方式从您的第二个活动中获取它：
**在第二个活动中（SecondActivity 页面）**

```
Intent intent = getIntent();
String YourtransferredData = intent.getExtras().getString("YourValueKey"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-24T06:16:18.843

```
String value = Integer.toString(getIntent().getExtras().getInt("bucketno")); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-13T06:41:42.960

```
Bundle extras = getIntent().getExtras();

if (extras != null) { 
    String data = intent.getExtras().getString("key").toString();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-10T03:36:12.617

**从第一个活动**

```
Intent i=new Intent(getApplicationContext(),BookPractionerAppoinment.class);
i.putExtra("prac","test");
startActivity(i); 
```

**在第二个 ACT 活动中获取价值**

```
String prac=getIntent().getStringExtra("prac); 
```

**对于序列化对象：**

> 通过

```
Intent i=new Intent(getApplicationContext(),BookPractionerAppoinment.class);
 i.putExtra("prac",pract);
 startActivity(i); 
```

> 得到

```
pract= (Payload) getIntent().getSerializableExtra("prac"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-09T16:22:33.903

采用：

```
String value = getIntent().getExtras().get("key").toString(); 
```

`getIntent().getExtras()`会给你Boundle。`get()`方法可用于获取值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-14T14:23:30.253

另外谁有不同的情况

```
 double userDMH = Util.getInstance(TakeInfoOne.this).calculateBMH(userGender, kg, talll, currentAge, activityy);
                        Intent intentTogeneral = new Intent(TakeInfoOne.this, TakeInfoTwo.class);
                        intentTogeneral.putExtra("user_current_age",userDMH );
                        startActivity(intentTogeneral); 
```

如果您放置其他原语，例如 double 、 boolean 、 int ，请不要忘记在第二个活动中获取值时输入正确的格式

```
Bundle extras = getIntent().getExtras();
    if (extras != null) {
        double value =  extras.getDouble("user_current_age");
        txt_metabolism.setText(""+value);
    } 
```

在这里 `extras.getDouble()`输入您关注的值类型，例如

```
extras.getInt("user_current_age");
extras.getBoolean("user_current_age");
 extras.getString("user_current_age"); 
```

# html - Jquery移动页面列表视图内容未更新

> ID：14017723
> 
> 赞同：2
> 
> 时间：2012-12-24T06:13:12.493
> 
> 标签：html, cordova, jquery-mobile

我是 phonegap jquery 移动应用程序的新手。在我的应用程序中，我有一些页面，每个页面都使用 json 将其内容作为列表视图获取。现在内容只会加载一次，即当我们第一次点击页面时，其他页面也是如此。稍后即使 json 得到更新，它也不会显示在列表中。只有在我从应用程序中注销后，我才能注意到更新的列表视图。然后我再次登录到应用程序。即内容只有在我重新启动会话后才会更新！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:56:34.983

看看这个例子，一个例子使用 xml 创建一个列表视图，另一个使用 JSON 文件：

XML：http: [//jsfiddle.net/Gajotres/AzXdT/](http://jsfiddle.net/Gajotres/AzXdT/)

JSON：http: [//jsfiddle.net/Gajotres/8uac7/](http://jsfiddle.net/Gajotres/8uac7/)

您可能在错误的页面事件中加载它，如果可能，请始终像这样使用 pagebeforeshow：

```
$('#index').live('pagebeforeshow',function(e,data){        
   $.ajax({url: "http://api.themoviedb.org/2.1/Movie.search/en/json/23afca60ebf72f8d88cdcae2c4f31866/The Goonies",
        dataType: "jsonp",
        jsonpCallback: 'successCallback',
        async: true,
        beforeSend: function() {
            $.mobile.showPageLoadingMsg(true);
        },
        complete: function() {
            $.mobile.hidePageLoadingMsg();
        },
        success: function (result) {
            ajax.parseJSONP(result);
        },
        error: function (request,error) {
            alert('Network error has occurred please try again!');
        }
    });
}); 
```

也可以看看我的另一篇文章，它会让你更好地理解 jQM 页面事件流：[https ://stackoverflow.com/a/14010308/1848600](https://stackoverflow.com/a/14010308/1848600)

# c++ - 如何在 C++ 中的文件末尾添加数据？

> ID：14017724
> 
> 赞同：2
> 
> 时间：2012-12-24T06:13:22.017
> 
> 标签：c++, ofstream

我已按照网上的说明进行操作，此代码假设将输入添加到文件“数据库”的末尾。但是当我检查时，数据会覆盖现有数据。请帮忙，这是我的代码：

```
int main(){
    string name;
    string address;
    string handphone;
    cout << "Name: ";
    getline(cin, name);
    cout << "Address: ";
    getline(cin, address);
    cout << "Handphone Number: ";
    getline(cin, handphone);
    ofstream myfile("database", ios_base::ate);
    myfile.seekp( 0, ios_base::end );
    myfile << name<<endl;
    myfile << address<<endl;
    myfile << handphone<<endl;
    myfile.close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T06:17:32.833

利用：

```
ofstream myfile("database",  ios::out | ios::app); 
```

`ios::out`：为输出操作打开。

`ios::app`：所有输出操作都在文件末尾执行，将内容附加到文件的当前内容中。此标志只能在为仅输出操作打开的流中使用。

# css - 当鼠标悬停并远离按钮时，如何为primefaces按钮放置图像？

> ID：14017725
> 
> 赞同：0
> 
> 时间：2012-12-24T06:13:23.913
> 
> 标签：css, jsf, user-interface, primefaces

我正在使用primefaces 3.5

当鼠标悬停和鼠标离开按钮时，我在将图像设置为按钮时遇到问题。请告诉我如何为primefaces做这件事。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T11:07:29.517

我知道了

XHtml 代码：

```
 <p:commandButton icon="myIcon" styleClass="myButton"  
                     actionListener="#{routeController.createNewRoute}"
                     update=":routeHeaderForm"/> 
```

CSS 代码：

```
.myButton .myIcon {
                background: url('../images/add_off_18.png');
                width: 39px; height: 19px;
                left: 1%;
                margin-left:0px;
            }

          .myIcon:hover {
                width: 39px; height: 19px;
                background: url('../images/add_on_18.png');
            }

          .myButton {
                width: 39px; height: 19px;
            } 
```

# javascript - HTML & JavaScript - 将滚动动作从一个元素传递到另一个元素

> ID：14017728
> 
> 赞同：11
> 
> 时间：2012-12-24T06:13:55.580
> 
> 标签：javascript, jquery, html, dom, scroll

假设我有两个 div：

```
<div id="control"></div>
<div id="view">(A scrollable list)</div> 
```

而且我想这样做，以便当光标停在里面`#control`并且滚动鼠标滚轮时，`#view`将会滚动。无论如何要实现这一目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-08-10T23:40:27.747

好的，快速修复对我有用。即使固定的 div 不可滚动，因为它没有超出其边界的内容，您仍然可以检测到`mousewheel`事件。`mousewheel`事件包含滚动的 x/y 维度的增量。

注意：这适用于鼠标或触控板，并且会为您提供正确的方向 (-/+)，无论反转 Y 轴设置如何（阅读：Apple 的（非）自然滚动）

因此，您可以执行以下操作：

```
var fixedDiv = document.querySelector('.my-fixed-div');
var scrollableDiv = document.querySelector('.my-scrollable-list');

fixedDiv.addEventListener('mousewheel', function (e) {
    e.preventDefault();
    scrollableDiv.scrollTop += e.deltaY;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-23T02:51:17.997

**不知道布局是什么样子**

但是如果它们彼此相邻，您可以使用

```
#control{pointer-events : none} 
```

并改变一些事情。

这是一个小提琴：http: [//jsfiddle.net/filever10/QVRNd/](http://jsfiddle.net/filever10/QVRNd/)

如果元素不能那么接近，这将无济于事。

它通过将控件放在列表上并禁用控件上的指针事件来工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T06:49:31.310

这可能会帮助您：

文档有它的功能 onscroll。

```
document.onscroll=moveSetting; 
```

假设`div1`要滚动并且鼠标指针应该在`div2`。
所以我们必须`scFunc()`只在鼠标位于 div2 时才执行。我们可以通过

```
function moveSetting(evt)
{       var div2Obj=document.getElementById('div2');
        var width=div2Obj.style.width;
        var border=div2Obj.style.border;
       var x=evt.pageX,y=evt.pageY,
       var leftChk=div2Obj.offsetLeft;
       var topChk=div2Obj.offsetTop;
        if(x>=leftChk && x<=(leftChk+width+border*2) && y>=topChk && y<=(topChk+width+border*2)) {
                scrollFunc();       
    }

}

var i,j;
    function scrollFunc() {
       var i=document.getElementById('div1').scrollTop;

       i++;
       i=j-1;

       document.getElementById('div1').scrollTop=i;
       /* manage your code yourself to scroll div1 from here */
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T21:08:49.427

我对此进行了测试，我可以在元素上实现`onscroll`事件的唯一方法是使用“浮动”的活动滚动条。解释浮动：它的位置在距离顶部 100 像素处，当它滚动时，我们检查它是向上还是向下，然后我们将它带回原来的位置。所以请记住，您需要一个活动滚动条（元素的内部内容应该高于自身：您可以使用多个`<br>`等...）；

Javascript代码：

```
<script type="text/javascript">
        var defaultScrollTop = 100; /* testing value */

        window.onload = function() {
            var div1 = document.getElementById("div1");
            var div2 = document.getElementById("div2");

            div1.scrollTop = defaultScrollTop; // Initialize to float

            div1.onscroll = function(event) {
                if (defaultScrollTop < div1.scrollTop) {
                    div2.scrollTop += 100; //scrollDown
                } else if (defaultScrollTop > div1.scrollTop) {
                    div2.scrollTop -= 100; //scrollUp
               }

               div1.scrollTop = defaultScrollTop;                
            }
        }
    </script> 
```

CSS：

```
<style>
    #div1, #div2 {
        max-height: 100px; /* For testing */
        overflow-y: scroll;
    }
</style> 
```

所以，当你在里面滚动时`div1`，它会检查它是否向上/向下滚动，向上/向下滚动`div2`并将 div1 设置为它的默认滚动值。希望这个技巧有帮助。

PS：如果您进行一些研究，您可以使滚动条不可见（`overflow:hidden`因为不会有活动的滚动条而不起作用）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-18T06:38:58.387

尝试以下解决方案。`mousewheel`您可以在 div 上监听事件并根据执行的滚动量滚动`control`另一个 div （使用 检索值）；`view``WheelEvent.deltaY`

更多信息可以在这里找到：[https ://developer.mozilla.org/en-US/docs/Web/API/WheelEvent/deltaY](https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent/deltaY)

```
var fixedDiv = document.getElementById('control'),
    scrollableDiv = document.getElementById('view');

fixedDiv.addEventListener('mousewheel', function (e) {
  scrollableDiv.scrollTop += e.deltaY;
  console.log(scrollableDiv.scrollTop);
});
```

```
#control,
#view {
  width: 500px
}

#view {
  height: 500px;
  overflow: auto;
  padding-top: 30px
}

#control {
  position:fixed;
  height: 50px;
  background-color: red
}
```

```
<div id="control">Keep your mouse here and scroll</div>
<div id="view">
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
  <div class="item">item</div>
</div>
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-01-31T19:56:46.550

看最后一个例子 -->

[http://api.jquery.com/scroll/](http://api.jquery.com/scroll/)

# android - Android - 在 xml 中绘制正方形

> ID：14017738
> 
> 赞同：0
> 
> 时间：2012-12-24T06:14:45.160
> 
> 标签：android

我想在 xml 中并排绘制三个正方形，以便它们水平填充屏幕（每边减去 12 dp 的边距）。根据[这篇文章](https://stackoverflow.com/questions/2843087/android-alignment-of-four-squares)，似乎可以用表格布局来做这件事，但我想知道是否有更好的方法。这是我使用嵌套 LinearLayouts 的尝试，它绘制垂直填充整个屏幕的矩形，但其他方面我正在寻找：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_margin="12dp"
    android:background="#ffffff"
    android:baselineAligned="false"
    android:orientation="horizontal" >
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:background="@drawable/rectangle" >
    </LinearLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:background="@drawable/rectangle" >
    </LinearLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:background="@drawable/rectangle" >
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:18:12.257

尝试将三个内部线性布局的 android:layout_width="match_parent" 更改为 "wrap_content"。

我刚刚使用以下 xml 代码进行了测试。请注意，您的版本有两个更改：

1 我将 match_parent 更改为三个子布局的 wrap_content。2 由于我没有你的背景图片，所以我只使用三种不同的颜色作为背景。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_margin="12dp"
    android:background="#ffffff"
    android:baselineAligned="false"
    android:orientation="horizontal" >
    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:background="#ff121212" >
    </LinearLayout>
    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:background="#ff676767" >
    </LinearLayout>
    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:background="#ffababab" >
     </LinearLayout>
</LinearLayout> 
```

我得到这个屏幕：

![我的测试结果](../Images/9bfe0ff4b10c88eea332d3dd6230b0c8.png)

因此，如果将 match_parent 更改为 wrap_content 但不起作用，我猜你的背景图片太大了。

另外，转向对 layout_weight 的理解。Layout_weight 不决定元素的大小，它只有在每个元素从父布局中需要必要的大小后才起作用，然后父布局根据 layout_weight 为每个元素分配剩余的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:18:47.720

尝试这种方式来获取边距和高度。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#ffffff"
    android:baselineAligned="false"
    android:orientation="horizontal" >
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:layout_marginLeft="12dp"
        android:background="@drawable/rectangle" >
    </LinearLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:background="@drawable/rectangle" >
    </LinearLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:layout_marginRight="12dp"
        android:background="@drawable/rectangle" >
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T18:19:35.440

似乎最好的解决方案是创建一个具有覆盖的自定义视图组件`onMeasure()`：

```
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, widthMeasureSpec);
} 
```

# google-apps-script - 在 html 页面中调用 google 脚本函数

> ID：14017739
> 
> 赞同：0
> 
> 时间：2012-12-24T06:14:48.413
> 
> 标签：google-apps-script

我在 Google 脚本编辑器中创建了一个函数，它在 Google 电子表格中附加了一行。值作为参数传递。现在，我想要做的是，在我的 HTML 页面（使用 UI 服务而不是 HTML 服务构建）中调用此函数并传递要从此页面存储的值。我找不到办法。请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T04:34:17.463

在你问这个问题的时候，文档还不是很丰富。它已经有了很大的改进，并且提供了一些接近你想要做的例子。

使用[UI Service](https://developers.google.com/apps-script/uiapp)，您可以通过使用处理函数（[客户端](https://developers.google.com/apps-script/uiapp#ClientHandlers)或[服务器](https://developers.google.com/apps-script/uiapp#ServerHandlers)端）来完成此操作，这将由按钮单击触发（例如），并处理“表单”的提交（一组输入文本区域等）。处理程序将调用您的存储函数，传递从表单返回的值。

请参阅上面提供的文档链接中的示例。

如果您的 Web 应用程序使用 Html 服务，您将有多个选项来调用服务器端应用程序脚本，请参阅[Html 服务：与服务器函数通信](https://developers.google.com/apps-script/guides/html-service-communication)。这里还有许多问题可以证明这一点：

*   [在 HTML 中调用 Google Apps 脚本函数](https://stackoverflow.com/questions/13867291/call-a-google-apps-script-function-in-html)
*   [HtmlService 表单提交打开带有 foo bar URL 的新选项卡](https://stackoverflow.com/questions/16597301/gas-spreadsheets-htmlservice-form-submit-opens-new-tab-with-foo-bar-url)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-31T00:16:32.727

简短的回答：

`google.script.run.nameOfYourFunction();`

使用它从 html 文件中调用在 html 文件之外定义的函数。基于[文档](https://developers.google.com/apps-script/guides/html/communication)

# android - Android Listview Header 和 Section 月份和日期列表

> ID：14017742
> 
> 赞同：5
> 
> 时间：2012-12-24T06:15:32.837
> 
> 标签：android, android-layout, android-emulator

我是一个新的安卓开发者。我已经搜索了很多谷歌，但我没有得到想要的结果。我也尝试了我的逻辑，但我没有得到它。如果有人可以对此提供帮助，我将不胜感激。

```
1\. My problem is that

    ______________
    November,2012     //This is header 
    ______________
    November 12,2012
    November 15,2012   //This list of date that contain in month
    _____________
    December,2012      //This is header 
    _____________
    December 23,2012
    December 30,2012    //This list of date that contain in month 
```

我的问题是如何获取包含同一月份的项目列表并列出其中的项目我怎样才能解决这个问题？请提出一些想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T07:38:38.740

这是一种方法

使用 Separator 视图创建自定义 ListView ROW 布局文件。（一个标题文本视图）

listview_row_with_separator.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <!-- list Separator TextView Style - the list separator Header-->
   <TextView
        style="?android:attr/listSeparatorTextViewStyle"
        android:id="@+id/textview_header_separator"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="@android:color/black"
        android:text="November, 2012"
        android:visibility="gone"
         />

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView_row_value"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="November 12, 2012"
        android:textAppearance="?android:attr/textAppearanceMedium" >
    </TextView>

    </LinearLayout>
    </LinearLayout> 
```

**重要！**确保您的列表以某种方式排序（按日期）

扩展一个包含 "Your_List_Item" 的 ArrayAddapter 并实现一个 populateView(Your_List_Item) 如果下一个列表项不等于前一个列表项，则显示分隔符。

```
public class Your_List_Adapter extends ArrayAdapter<Your_List_Item> {
private Activity mActivity;
private String mCurrentMonth = "";

public Your_Adapter(Activity activity) {
    super(activity, 0);
      mActivity = activity;
}

public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    if (convertView == null) {
        convertView = mActivity.getLayoutInflater().inflate(
                R.layout.listview_row_with_separator, null);
        holder = new ViewHolder(convertView);
        convertView.setTag(holder);
    } else {
        // the (list row) convertView is already inflated, so we can get
        // it from the Tag
        holder = (ViewHolder) convertView.getTag();
    }

    Your_List_Item your_list_item = getItem(position);

    //Check if the next list item is not equal the previous list item.
    if (!mCurrentMonth.equalsIgnoreCase(your_list_item.month.toString())) {
        holder.populateView(your_list_item, true);
        mCurrentMonth = your_list_item.date;
    } else{
        holder.populateView(your_list_item, false);
    }

    return convertView;
}
} 
```

如果需要，适配器的 ViewHolder 类显示分隔符

```
class ViewHolder { 

/********** DECLARES ************/
private TextView textView_row_value;
public TextView textview_header_separator;

public ViewHolder(final View root) {
    /********** INITIALIZES *************/
    textview_header_separator = (TextView) root.findViewById(R.id.textview_header_separator);
    textView_row_value = (TextView) root.findViewById(R.id.textView_row_value);
}

public void populateView(final Your_List_Item your_list_item,final boolean needSeparator) {
    /*
     *  add Separator
     */

    if (needSeparator) {
             //set header text: November, 2012
         textview_header_separator.setText(your_list_item.date);
             textview_header_separator.setVisibility(View.VISIBLE);
    } else {
             textview_header_separator.setVisibility(View.GONE);
    }
    //set row value: November 12, 2012
    textView_row_value.setText(your_list_item.date);

 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:04:02.130

如果您想在列表中包含多个标题并且当您单击列出子日期的所需标题时，您可以使用可扩展的 ListView 但如果您想在列表之外选择您的月份，然后匹配的日期与所选月份一起列出，您可以使用

```
youradapter.setFilterQueryProvider 
```

或者您可以使用 textwatcher 以您想要的月份过滤您的列表

# javascript - 提醒复选框的状态

> ID：14017748
> 
> 赞同：1
> 
> 时间：2012-12-24T06:16:01.110
> 
> 标签：javascript, jquery, checkbox

我知道这可能是我正在做的一些愚蠢的错误。我的问题是我想显示复选框的状态。单击复选框时，如果它被选中，那么它将显示为选中状态，如果它未被选中，它将警告未选中。

但我的问题是，无论是选中还是未选中，它总是显示选中...

这是我的示例代码，首先是 jquery 或 javascript

```
function increase_seat()
{
   if($(this).prop("checked", true))
        alert("checked");
   else if($(this).prop("checked", false))
        alert("unchecked");
} 
```

和 php/html 脚本是

```
for($i=1;$i<=10;$i++)
        {?>

              <input type="checkbox" name="checkbox[]" value="<?php echo $i;?>" class="check" />
       <?php
        }?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T06:17:13.287

您正在设置属性**检查**而不是获取`value`属性。[在这里](http://api.jquery.com/prop/)检查道具。您可以使用`is(":checked")`复选框来查找检查状态。

改成

*html*

```
<input type="checkbox" onclick="increase_seat(this);" name="checkbox[]" value="<?php 
```

echo $i;?>" class="check" />

*Javascript*

```
function increase_seat(source)
{
   if($(source).is(":checked"))
          alert("checked");
    else 
          alert("unchecked");
} 
```

*如果您有 jQuery 1.7 或更高版本，最好使用 attr 而不是使用 prop。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:18:25.753

### 用这个：

```
if( $(this).is(":checked") )
    alert("checked");
else
    alert("unchecked"); 
```

您在代码中所做的是**设置**而不是**获取**属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T06:29:12.583

尝试：

```
if($('#TestCheck').prop("checked"))
{
        alert("checked");
}
else 
{
       alert("unchecked");
} 
```

[演示小提琴](http://jsfiddle.net/shree/akCmS/2/)

从文档：

.prop("checked") ---- true (布尔值)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T06:34:42.367

`is(":checked")`按如下方式使用该属性：

# 示例代码

```
$(document).ready(function(){
    $('#check').click(function(){
    if($(this).is(":checked") === true){
        alert("Checked");
    } else {
        alert("Unchecked");
    }
    });
});​ 
```

# 工作小提琴

这是一个有效的[JSFiddle](http://jsfiddle.net/xxLjT/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T06:39:38.350

如果您需要“1”或“0”结果而不是空白，您应该使用**单选按钮**。将两个按钮都设置为未选择，然后通过要求选择一个选项来进行验证。

# php - 带有if语句问题的PHP复选框

> ID：14017749
> 
> 赞同：0
> 
> 时间：2012-12-24T06:16:09.953
> 
> 标签：php

我的表单中有这个复选框输入

```
<input name='new' type='checkbox' value='0' /> 
```

我数据库中的新列是 TINYINT 基于复选框的值，如果值为 1，我想显示一个带有类的 div，所以我实现了这段代码

```
if(isset($_POST[$URL['new']]) 
   && isset($_POST[$URL['new']]) == 1)
   {
    echo '<div class="premiere">Premiere</div>';
    } 
```

一切似乎工作正常，没有错误、警告和通知。但 div 没有显示在页面中。代码有什么问题，我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T06:21:10.417

```
if ( isset($_POST["new"]) && $_POST["new"] == 1 )
{
  echo '<div class="premiere">Premiere</div>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:18:22.840

我认为，您已应用第二个条件来检查“新”变量的值。

你应该这样写条件

```
if(isset($_POST[$URL['new']]) && $_POST[$URL['new']] == 1){
}
else{
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T07:11:00.610

您可以使用此查询在选中复选框时显示 div，在取消选中复选框时，您可以隐藏显示的 div。

```
 $(document).ready(function(){
     $("#new").change(function(e){
     var addDiv = $("#new").val();
     if($("#new").attr('checked'))
      { 
       $("#form2").append("<div class="premiere">Premiere</div>");
      }
      else
      {
       $(".premiere").remove();
      }
     });
    }); 
```

HTML 代码：

```
 <form method="post" id="form2">
    <input id="new" name='new' type='checkbox'/>
    </form> 
```

希望这篇文章对您非常有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T06:41:33.147

```
if ( isset($_POST["new"]) && $_POST["new"] == 1 )
{
  echo '<div class="premiere">Premiere</div>';
} 
```

确保类“首映”没有通过 CSS 代码隐藏。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T15:59:42.587

问题是，我试图从 foreach 循环中的数组访问密钥，所以我只是从密钥中删除 $_POST 并引用 URL['new'] 代替。它工作正常。

```
if(isset($URL['new']) 
   && isset($URL['new']) == 1)
      {
  echo '<div class="new">Premiere</div>';
   } 
```

# javascript - 在 Javascript 中将函数作为参数传递时的返回值

> ID：14017755
> 
> 赞同：0
> 
> 时间：2012-12-24T06:17:04.133
> 
> 标签：javascript

当我将对象传递给方法时，我有一些 javascript 代码可以正常工作。在[API 文档中](http://docs.angularjs.org/#dsq-login-google)中，它说我也可以将函数传递给该方法。当我尝试这个时，我能够传递参数并发出警报以验证参数是否正在传递。但是，我无法返回该值。

我缺少正确返回值的 javascript 行是什么？

```
var result = {model: "todo"};

//$httpBackend.whenGET(/^\/api\//).respond(result);
$httpBackend.whenGET(/^\/api\//).respond(do_something);

function do_something(method, url, data) {
    alert("url "+url); // or whatever
    var result =  {model: "todo"};
    return result;
}

//From the API documentation
//   $httpBackend.whenGET('/.*/').respond(function(method, url, data) {
//     do something
//}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T06:20:35.667

据推测，该函数的返回值被忽略了。当然，它没有在您当前的代码中使用。

您需要让该函数影响函数本身之外的变量：

```
var result;
$httpBackend.whenGET(/^\/api\//).respond(do_something);
// Do something with `result`...
alert(result.model); // or whatever

function do_something(method, url, data) {
    alert("url "+url); // or whatever
    result =  {model: "todo"};
} 
```

# c - 将结构体地址从 C 传递到 Lua 并在 Lua 中访问其内容而无需复制数据

> ID：14017757
> 
> 赞同：2
> 
> 时间：2012-12-24T06:17:18.343
> 
> 标签：c, lua, stack, luabind

考虑我有一个数据包（网络数据包），它存储在 C 中的一个数组中。我在 Lua 中有一个可以处理这个数据包的模块。现在我需要将此数据包传递给 Lua 进行处理。我想避免复制数据。为此，我可以使用*userdata*或*lightuserdata*。但是在这种情况下，基地址将被推送到堆栈顶部，我需要在 Lua 中编写回调或在 C 中为其编写元表。

我在如何开始用 C 编写一个基本的小回调时遇到了困难。我所需要的只是假设我有一个如下结构：

```
struct abc_{
    int a;
    int b;
    char* c;
} abc_t;

int arr1[] = {'100', '2', '4' , '5', '6'}; 
```

现在我有一个包含一些数据的数组。在 C 语言中，我可以使用这种结构对该数组进行类型转换以获取特定值。

```
abc_t *test;
test = (abc_t *)arr1; 
```

我如何在 Lua 中做同样的事情，我已经传递了`arr1`堆栈顶部的地址并且结构是在 C 中定义的？我怎样才能得到变量的值`a`，`b`在没有副本的 Lua

**问题2**

假设我正在使用 C 并使用 Lua 堆栈来处理数组。

如果我想访问`a[2]`，`a`我的表在哪里，2 是索引，那么`2`需要在堆栈的顶部，我需要将`a`堆栈中的位置作为第二个参数传递给`lua_gettable()`. 我怎样才能对*结构*做同样的事情？我想访问结构的特定元素。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:32:38.230

如果您不想将结构数据从 C 复制到 Lua，则需要将指向结构实例的指针装箱到具有专用元表的完整用户数据*中*。轻量级用户数据对于这种用法不够灵活，因为您无法为其分配元表。

元表应该定义`__index`和`__newindex`元方法。如果 Lua 传递的索引是`"a"`,`"b"`或`"c"`，则元方法返回或分配对应的结构体字段。元`__gc`方法可以调用`free`结构实例，并且`__tostring`元方法总是有利于调试。

如果您按照问题标签的建议使用*luabind*，则该库能够为您生成元表。您也可以手写装订。

要回答您的第二个问题，如果您`__index`按照建议进行定义，您可以通过首先将用户数据推*送到*堆栈上，然后将字段名称作为字符串推送，然后使用`lua_gettable`. 函数为此提供了一个快捷方式`lua_getfield`。

# jquery - 是否可以从 CSS 中的背景图像创建链接

> ID：14017763
> 
> 赞同：1
> 
> 时间：2012-12-24T06:17:50.437
> 
> 标签：jquery, html, css

嘿，伙计们，我有一个我一直在建立的电子商务网站，他们决定在每个产品中都有一个贝宝账单我的标志，他们大约有 900 个。所以我刚刚创建了一个背景图像，放置在添加购物车按钮的下方。我这样做是为了不必通过 900 多种产品来整合自己。

那么我可以创建一些代码或其他东西来链接它吗？这将是一个通用链接，对于每个产品上的每个图像都是相同的。

CSS 代码：

```
.singular .pricing {
    padding-left:0;
    padding-bottom: 4em;
    background-image: url(http://www.prodjsoundlighting.com/wp-content/uploads/2012/12/render.png);
    background-position: bottom left;
    background-repeat: no-repeat;
    background-size: 15em;  
} 
```

所以我想把上面的背景图片创建成一个可点击的链接，而不是进入每个产品并为它创建一个链接。

圣诞节快乐！！！

更新：

示例 HTML

```
<div class="prodslideshow">
<div class="slidecontainer">
[superzoomgallery] 
</div>
</div>
<div class="item-post"><a href="/">
<div class="prod-image-cont">
<img src="" alt="" width="145px" height="160px" />
</div></a>
<div class="discription"></div>
<div class="pricing">
<h2  class="producthover"></h2>
<h2></h2>
[wp_cart:led-par-56-24-uvb:price:329.99:end]
</div>
</br></br></br></br></br>
<div class="prodinfo">
<h3 style="color:black; font-weight:bold;">About:<br/></h3>

<br/>
<h3 style="color:black; font-weight:bold;">Features:<br/></h3>

<br/>
<h3 style="color:black; font-weight:bold;">Specifications:<br/></h3>
</div>
</div> 
```

背景图像位于此处：

```
<div class="pricing">
    <h2  class="producthover"></h2>
    <h2></h2>
    [wp_cart:led-par-56-24-uvb:price:329.99:end]
    </div> 
```

这是每个单独产品的 HTML 模板。

每个产品的 HTML 模板都会影响每个产品：

```
<div id="primary">
            <div id="content" role="main">
                <div class="singlepostcontent">
                <?php while ( have_posts() ) : the_post(); ?>

                    <nav id="nav-single">
                        <h3 class="assistive-text"><?php _e( 'Post navigation', 'twentyeleven' ); ?></h3>
                        <span class="nav-previous"><?php previous_post_link( '%link', __( '<span class="meta-nav">&larr;</span> Previous', 'twentyeleven' ) ); ?></span>
                        <span class="nav-next"><?php next_post_link( '%link', __( 'Next <span class="meta-nav">&rarr;</span>', 'twentyeleven' ) ); ?></span>
                    </nav><!-- #nav-single -->

                    <?php get_template_part( 'content', 'single' ); ?>

                    <?php comments_template( '', true ); ?>

                <?php endwhile; // end of the loop. ?>
                </div><!-- .singlepostcontent -->
            </div><!-- #content -->
        </div><!-- #primary --> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T06:26:36.423

这是一个巧妙的小技巧，可让您使用 CSS 在任何背景图像上创建多个可点击区域。对我来说，这比以前用 HTML 制作图像地图要容易。

首先将背景图像添加到页面上的元素

这是此框的 CSS。确保您提供框位置：相对，否则链接将无法正常工作。

```
 .box1 { 
    position: relative; 
    margin: 20px 0 20px 40px; 
    padding: 5px 0; width: 300px; 
    height: 100px; 
    background-image: url(images/background.jpg); 
    background-repeat: no-repeat; 
    } 
```

然后创建一个透明框，绝对定位，正好适合您想要使其可点击的背景图像部分的顶部。给这个盒子一个边框更容易，这样你就可以在将它放置到位时实际看到它。它应该如下所示：

这是盒子的CSS。操作顶部、左侧、宽度和高度像素，直到将其放置在您想要的位置（如果您不希望用户看到它，请不要忘记删除边框）：

```
 #box-link { 
    position: absolute; 
    top: 8px; 
    left: 20px; 
    width: 83px; 
    height: 83px; 
    background-color: transparent; 
    border: 1px solid yellow; } 
```

这是该盒子最终版本的 HTML 及其链接：

```
 <div class="box1">
    <a id="box-link" href="#"></a>
    <p>The background of this box is an image.</p>
    </div> 
```

我希望这有帮助！您可以使用此技术在任何背景图像上创建任意数量的可点击区域。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T06:35:08.777

可能没有必要这样做，因为所有 900 种产品都将使用一个模板作为其标准信息。因此，找到使用的模板并向其添加单个购买按钮。然后你会看到它出现在所有产品下。

然后，如果您用于显示按钮的代码在链接查询中包含一些产品信息，您可以通过链接发送您唯一的产品数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T06:23:53.360

您可以创建使用 css 作为背景图像的包装 div 的链接。例如，虽然有很多：

```
<style type="text/css">
.myspan {
    display: block;
}
</style>
<a href="#"><span class="myspan">text</span></a> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-24T07:18:06.013

[**jsFiddle 演示**](http://jsfiddle.net/z6Qdw/)

只需使用 jQuery`.each()`方法来迭代所有产品图像。

这样做会将**Paypal 徽标**附加到可点击的 div 元素中。

**jQuery：**

```
$(document).ready(function(){

    $('.product').each(function(){
        $(this).append('<div class="paypal" />');
    });

    $('.paypal').click(function(){
        alert('Paypal Logo clicked!');
    });

}); 
```

但是，正如[**WilliamK**在此页面上的回答](https://stackoverflow.com/a/14017927/1195891)所暗示的那样，我同意他的观点，即最好的方法是更改​​正在使用的任何模板。随着最近对您的问题的更新，您似乎应该有一个 PHP 模板可以根据需要进行修改。

# qt - 如何在 Qt 中连续写入文件？

> ID：14017766
> 
> 赞同：0
> 
> 时间：2012-12-24T06:18:05.660
> 
> 标签：qt, qt4

我把这段代码写成一个函数，每次调用这个函数，我都想写入文件。但是这个函数只向文件写入一次。每当我从windows打开文件时，我发现只有一个单词写入文件。每次调用时如何连续写入文件？

```
/* Try and open a file for output */
    QString outputFilename = "Results.txt";
    QFile outputFile(outputFilename);
    outputFile.open(QIODevice::WriteOnly);

    /* Check it opened OK */
    if(!outputFile.isOpen()){
    qDebug() <<"- Error, unable to open" << outputFilename << "for output";
    return ;
    }

    /* Point a QTextStream object at the file */
    QTextStream outStream(&outputFile);

    /* Write the line to the file */
    outStream <<"\n"<< szTemp;//"Victory!\n";

    /* Close the file */
    outputFile.close(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T06:21:29.740

当该行`outputFile.open(QIODevice::WriteOnly);`打开文件时，它会替换文件中已经存在的所有内容。尝试将行替换为：

```
outputFile.open(QIODevice::Append); 
```

以将数据附加到文件中存在的任何内容的模式打开它。

请注意，为每一行打开文件是一种低效的解决方案，尤其是当您要编写很多很多行时。打开文件一次，然后在关闭文件之前将所有单词写入文件，会更快。

# postgresql - centos上安装pdo_pgsql

> ID：14017774
> 
> 赞同：4
> 
> 时间：2012-12-24T06:18:50.560
> 
> 标签：postgresql, pdo, installation, pecl

我已经通过在 CentOS 5.7 上运行以下命令来安装 pdo_pgsql

```
pecl install pdo_pgsql 
```

但它不会在 phpinfo 页面上显示为已安装的扩展。我在那里看到的唯一信息是

```
--with-pgsql=shared 
```

我错过了什么吗？

在我的机器上安装了 php 5.3.3。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T06:28:58.150

```
--with-pgsql=shared 
```

表示默认 PostgreSQL 扩展在编译 PHP 时被编译为模块。

Pecl 不只是安装一个模块，它还从源代码编译它们，因此有很多不能自动解决的依赖关系。

如果 pecl 没有输出任何错误信息，你可能只需要在你的`/etc/php.ini`

```
extension=pdo_pgsql.so 
```

您是否尝试使用 yum 安装扩展程序？

**编辑**

删除 pecl 扩展

```
sudo pecl uninstall extension_name 
```

不要忘记在安装后重新启动 Apache，这样任何更改才会真正生效。

```
sudo service httpd restart 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-10T10:07:37.460

我使用这个命令来安装`php-pgsql`PHP 扩展：

```
sudo yum install php-pgsql 
```

之后我`pdo_pgsql`在命令的输出中看到：

```
php -m 
```

# c++ - 什么决定了 boost::asio 中 TCP 数据包的数量？

> ID：14017776
> 
> 赞同：2
> 
> 时间：2012-12-24T06:19:24.917
> 
> 标签：c++, windows, tcp, boost-asio, packet

我正在通过`asio::tcp::socket`.

我的问题是，虽然每次我发送的数据大约是**800 字节**并且最大数据包大小是**1500 字节**，但数据是以超过 5 个数据包的形式发送的。

（我在 sniffsmart 软件中查看数据包的数量和数据）

这是为什么？！

我应该如何解决或跟踪这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T08:00:34.093

**编辑**：像 TCP 这样的流协议中的数据包数量取决于您的网络配置。但是，此答案优化了套接字的使用，因此程序在传输数据包的数量方面不会增加任何开销。

如果您尝试获取更大的数据包，您应该尝试一次将所有数据放在套接字上。您可能自己将其分成多个数据包。由于 TCP 的[Nagle](http://en.wikipedia.org/wiki/Nagle%27s_algorithm)算法，TCP 堆栈会立即将可用数据发送给对等方。因此，如果您多次将数据放在套接字上，其余数据将转到下一个数据包。

或者你可以像这样关闭 Nagle 的算法：

```
m_socket.set_option(tcp::no_delay(true)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:39:20.990

TCP是一个流。您无法控制某些数据包将包含哪些内容。您可以打开/关闭 Nagle 算法，这会影响传输速度，但您无法自行控制数据包的大小。此外，这些数据包可以在途中被任何路由器拆分/加入。所以它本质上是流，你不能改变它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T06:24:59.887

TCP是一种流数据。send() 仅将数据放入发送缓冲区，系统 TCP 堆栈实现决定如何将数据放入网络。这就是为什么您通过嗅探看到的数据包与您的 send() 调用不匹配的原因。如果您真的希望发送数据包与发送（）匹配，我记得有一个 TCP 选项。你可以查一下，我现在想不起来了。

# javascript - 使用 javascript 提交数据，而不是调用提交按钮

> ID：14017778
> 
> 赞同：0
> 
> 时间：2012-12-24T06:19:43.213
> 
> 标签：javascript, html, css

```
<script type="text/javascript">
function getFile()
   {  
  document.getElementById("image").click();
   }
function sub()
   {  
   document.getElementById("button").click();
   }

</script>

<form action="addexec.php" method="post" enctype="multipart/form-data" name="addroom">
<div id="yourBtn" onclick="getFile()">click to upload a file</div>
<div style='height: 0px; width: 0px;overflow:hidden;'>
<input id="image" type="file" value="image" name='image' onchange="sub()"/></div>
<input id='button' type='submit' />
</form> 
```

我如何直接提交图像，而不是在函数 sub() 中调用提交按钮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:22:39.950

直接使用以下行提交表单：

```
document.addroom.submit(); 
```

# java - 如何连接两个 ArrayList？

> ID：14017779
> 
> 赞同：59
> 
> 时间：2012-12-24T06:20:05.853
> 
> 标签：java, arraylist, concatenation, concat

我有两个`ArrayList`大小相同的 s。列表 1 包含 10 个姓名，列表 2 包含他们的电话号码。

我想将名称和数字合并为一个`ArrayList`。我该怎么做呢？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-12-24T06:22:41.113

您可以使用[`.addAll()`](http://developer.android.com/reference/java/util/ArrayList.html)将第二个列表的元素添加到第一个：

```
array1.addAll(array2); 
```

**编辑：**根据您上面的说明（“*我想在新的 Arraylist 中有一个字符串，它同时具有名称和编号。* ”），您可能希望遍历第一个列表并将第二个列表中的项目附加到它。

像这样的东西：

```
int length = array1.size();
if (length != array2.size()) { // Too many names, or too many numbers
    // Fail
}
ArrayList<String> array3 = new ArrayList<String>(length); // Make a new list
for (int i = 0; i < length; i++) { // Loop through every name/phone number combo
    array3.add(array1.get(i) + " " + array2.get(i)); // Concat the two, and add it
} 
```

如果你输入：

```
array1 : ["a", "b", "c"]
array2 : ["1", "2", "3"] 
```

你会得到：

```
array3 : ["a 1", "b 2", "c 3"] 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-12-24T06:22:32.707

将一个 ArrayList 添加到第二个 ArrayList 为：

```
Arraylist1.addAll(Arraylist2); 
```

**编辑：**如果您想从两个现有的 ArrayList 创建新的 ArrayList，请执行以下操作：

```
ArrayList<String> arraylist3=new ArrayList<String>();

arraylist3.addAll(Arraylist1); // add first arraylist

arraylist3.addAll(Arraylist2); // add Second arraylist 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-24T06:23:25.890

```
ArrayList<String> resultList = new ArrayList<String>();
resultList.addAll(arrayList1);
resultList.addAll(arrayList2); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-27T19:07:53.337

对于不复制条目的轻量级列表，您可以这样使用：

```
List<Object> mergedList = new ConcatList<>(list1, list2); 
```

这里的实现：

```
public class ConcatList<E> extends AbstractList<E> {

    private final List<E> list1;
    private final List<E> list2;

    public ConcatList(final List<E> list1, final List<E> list2) {
        this.list1 = list1;
        this.list2 = list2;
    }

    @Override
    public E get(final int index) {
        return getList(index).get(getListIndex(index));
    }

    @Override
    public E set(final int index, final E element) {
        return getList(index).set(getListIndex(index), element);
    }

    @Override
    public void add(final int index, final E element) {
        getList(index).add(getListIndex(index), element);
    }

    @Override
    public E remove(final int index) {
        return getList(index).remove(getListIndex(index));
    }

    @Override
    public int size() {
        return list1.size() + list2.size();
    }

    @Override
    public void clear() {
        list1.clear();
        list2.clear();
    }

    private int getListIndex(final int index) {
        final int size1 = list1.size();
        return index >= size1 ? index - size1 : index;
    }

    private List<E> getList(final int index) {
        return index >= list1.size() ? list2 : list1;
    }

} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-07-11T09:13:14.450

如果您想做一行并且不想更改 list1 或 list2 您可以使用 stream

```
List<String> list1 = Arrays.asList("London", "Paris");
List<String> list2 = Arrays.asList("Moscow", "Tver");

List<String> list = Stream.concat(list1.stream(),list2.stream()).collect(Collectors.toList()); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-24T06:25:27.670

一个 ArrayList1 添加到数据，

```
mArrayList1.add(data); 
```

和第二个 ArrayList2 添加其他数据，

```
mArrayList2.addAll(mArrayList1); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-24T06:39:59.353

```
var arr3 = new arraylist();
for(int i=0, j=0, k=0; i<arr1.size()+arr2.size(); i++){
    if(i&1)
        arr3.add(arr1[j++]);
    else
        arr3.add(arr2[k++]);
} 
```

正如您所说，“名称和数字并排”。

# javascript - jquery自动完成传递组合框作为参数

> ID：14017786
> 
> 赞同：0
> 
> 时间：2012-12-24T06:20:31.930
> 
> 标签：javascript, jquery, html, jquery-autocomplete

我想将组合框作为参数传递，但自动完成仅从组合框中获取第一个选项值，这是我的代码
Jquery：

```
 <script type="text/javascript">
        var op="";
        $(document).ready(function(){

            $("#drp").change(function(){
                op=$("#drp").val();
            });
            $("#tag").keypress(function(){
                op=$("#drp").val();
            });
            $("#tag").autocomplete("search_all_check.php", {
                selectFirst: true,
                extraParams: { param: op }
            });
        });
    </script> 
```

和html：

```
 <select  name="users" id="drp"  class="search_department" >
                   <option name="graid" id="grade_id" value="grade">Graid</option>
                    <option name="div" id="div_id"  value="division">Division</option>
                    <option name="department" id="dep_id"  value="department">Department</option>
                    <option name="card" id="card_id"  value="id_card">Id Card</option>
                    <option name="education" id="education_id"  value="education">Education</option>
                    <option name="age" id="age_id"  value="age">Age</option>
                 </select>
            <input type="text" name="text" id="tag" value="" > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T06:37:29.587

您需要将`multiple`属性添加到您的`<select>`元素：

```
<select  name="users" id="drp"  class="search_department" multiple > 
```

# java - java swing中使用jTable的论坛主题视图

> ID：14017790
> 
> 赞同：1
> 
> 时间：2012-12-24T06:20:45.140
> 
> 标签：java, sql, swing, jtable, listselectionlistener

我试图在 java swing 中创建一个论坛。目前我有不同的类别。主题由 topicId 区分。当我单击某些类别中的某些行时，我尝试这样做，然后应用程序将重定向到由 topicId 过滤的某些线程内容。

例如，我有一个线程。该主题属于讨论类别，topidId 为 5。当我单击论坛主页上的讨论部分时，它会将我重定向到数据库中按类别过滤的表。然后，当我单击 jTable 第 3 行中的线程时，它将显示数据库中 topicId 5 的数据。

我知道有一些方法可以通过在 jTable 中使用 getSelectedRow 方法来做到这一点。所以这是我的代码：

```
 jTable.getSelectionModel().addListSelectionListener(new ListSelectionListener() {
            @Override
            public void valueChanged(ListSelectionEvent e) {
                if (!e.getValueIsAdjusting()) {
                    int viewRow = jTable.getSelectedRow();
                    if (viewRow >= 0) {
                        topicId = jTable.convertRowIndexToModel(viewRow);
                        System.out.println(topicId);
    }
                }
            }
        });

    jTable.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent e) {                      
    eForumTopics topics = new eForumTopics(topicId);
                topics.retrieveThread();
                getJFrame().dispose();
                eForumThreadContent myWindow = new eForumThreadContent(topicId);
                myWindow.getJFrame().setVisible(true);
            }
        }); 
```

这是我的retrieveThread 方法：

```
 public boolean retrieveThread(){
    boolean success = false;
    ResultSet rs = null;
    DBController db = new DBController();
    db.setUp("IT Innovation Project");
    String dbQuery = "SELECT topic_title,topic_description,topic_by FROM forumTopics WHERE topic_id = " + topicId
            + "";
    rs = db.readRequest(dbQuery);
    db.terminate();
    return success;
} 
```

}

我在 jTable 的第 0 列有一个 Id 列。因此，每当用户点击某行时，该行的 Id 将存储到 topicId 并执行以下操作。但是，即使我单击不同的行，此应用程序也会继续返回第 0 行。那么有没有其他方法可以在java swing中显示论坛的主题视图？我的意思是如果不使用 getSelectedRow 方法来获取 topicId。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T07:15:36.587

您可以确定选定的行，而不是`MouseListener`上的，如[*如何使用表格*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#selection)中所示。[此处](https://stackoverflow.com/a/12306104/230513)和[此处](http://docs.oracle.com/javase/tutorial/uiswing/events/listselectionlistener.html#eg)说明的 A是对选择更改做出反应的好方法。`JTable`[](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#selection)*[`ListSelectionListener`](http://docs.oracle.com/javase/tutorial/uiswing/events/listselectionlistener.html)*

 *As your threads sound hierarchical in nature, also consider an `Outline` view, shown [here](https://codereview.stackexchange.com/a/4447/6692). It uses the same selection listener, shown [here](https://stackoverflow.com/a/2841582/230513).*

# javascript - 如何在javascript中找到第二高的数字

> ID：14017794
> 
> 赞同：-4
> 
> 时间：2012-12-24T06:20:54.250
> 
> 标签：javascript, arrays

如何找到数组中第二大的数字

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T06:28:59.320

```
function getSecondHighest(arrCheck){
    var first=0,second=0;
    for(var i=0;i<arrCheck.length;i++){
        if(arrCheck[i] > first){
            second = first;
            first = arrCheck[i];
        }
        else if(arrCheck[i]>second && arrCheck[i]<first){
            second = arrCheck[i];
       } 
    }
    return second;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T06:25:29.497

如果您遍历列表一次；你会发现最高的数字。现在再重复一次，您将获得第二高的数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T06:36:25.240

```
 var big = a[0];
    var secondLargest = null;
    for (var i = 0; i < a.length; i++) {
        if (a[i] > big) {
            secondLargest = big;
            big = a[i];
        } else if (a[i] > secondLargest) {
            secondLargest = a[i];
        }
    }
    return secondLargest;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T06:35:11.523

看到这个：

```
var array = [267, 306, 108, 50, 909, 200];
var newCopy = [0];
for (i = 0; i < array.length; i++) {
    newCopy[i] = array[i];
}
var largest = Math.max.apply(Math, newCopy);
newCopy.splice(newCopy.indexOf(largest), 1);
largest = Math.max.apply(Math, newCopy);
alert(largest);​ 
```

# c - 为什么我只能看到带有此代码的主机的 inet 地址之一？

> ID：14017796
> 
> 赞同：0
> 
> 时间：2012-12-24T06:21:01.517
> 
> 标签：c, networking, network-programming

我刚刚写了这个片段：

```
#include <iostream>
#include <netdb.h>
#include <arpa/inet.h>

int main(void)
{
    sockaddr_in self;
    hostent *he;
    char local[HOST_NAME_MAX];
    gethostname(local, sizeof(local));
    he = gethostbyname(local);

    if (he)
    {
        std::cout << "Addresses: " << std::endl;
        unsigned int i = 0;
        while(he->h_addr_list[i] != NULL)
        {
            std::cout << "\t" << i << " --> ";
            memcpy(&self.sin_addr, he->h_addr_list[i], he->h_length);
            std::cout << self.sin_addr.s_addr;
            std::cout << " ( " << inet_ntoa( *( struct in_addr*)( he-> h_addr_list[i])) << " )" << std::endl;
            i++;
        }
    }
    else
        std::cout << "gethostname failed" << std::endl;
} 
```

当我在示例主机上运行它时，我会得到类似这样的东西（不过我在这里编了这些地址）：

地址：0 --> 1307150150 ( 10.23.215.61 )

而如果我运行，`ifconfig`我会得到更多的输出，特别是上面的地址只对应于第一个显示的界面，而`ifconfig`在这些界面之前至少还有两个`eth0`。怎么会？我本来希望这会贯穿该主机中所有可能的网络地址...

在下面的答案之后，我做了以下（使用getaddrinfo）：

```
int main(void)
{
    struct addrinfo *result;
    struct addrinfo *res;
    int error;

    char local[HOST_NAME_MAX];
    gethostname(local, sizeof(local));

    error = getaddrinfo(local, NULL, NULL, &result);
    if (error != 0)
    {
        fprintf(stderr, "error in getaddrinfo: %s\n", gai_strerror(error));
        return 1;
    }

    for (res = result; res != NULL; res = res->ai_next)
    {
        struct in_addr addr;
        addr.s_addr = ((struct sockaddr_in *)(res->ai_addr))->sin_addr.s_addr;
        std::cout << addr.s_addr
                  << " ("
                  << inet_ntoa(addr)
                  << " )"
                  << std::endl;
    }

    freeaddrinfo(result);
} 
```

我现在得到与以前相同的输出......除了重复“正确”的次数。（即从 ifconfig 我看到三个接口，我大概可以从多播中发送，我得到第一个重复三次的 inet 地址作为上面的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:01:50.700

该函数`gethostname`返回主机配置的名称。您可以使用您选择的任何名称自由配置*您的*计算机。

该函数`gethostbyname`为您的操作系统执行“正常”名称解析过程。通常，它会首先查看`/etc/hosts`您的 DNS 解析器，如果查询失败。

要`gethostbyname`返回您配置的所有 IP 地址，您必须将它们放入您的`/etc/hosts`文件中或要求您的 DNS 管理员更新您的服务器。

顺便说一句，`gethostbyname`不推荐使用[getaddrinfo](https://www.rfc-editor.org/rfc/rfc3493#section-6 "IPv6/库函数的基本套接字接口扩展")。

# android - 在 Android 应用程序中使用庞大的数据集

> ID：14017802
> 
> 赞同：0
> 
> 时间：2012-12-24T06:22:03.520
> 
> 标签：android, string, dataset, storage, large-data

因此，我必须在应用程序中保存大量数据（简单字符串）以用于自动完成目的。它基本上是所有英国邮政编码的列表。

由于有数百万种不同的代码，我想知道做这些事情的最佳方法是什么。将它们放在一个简单的数组中是非常愚蠢的（而且确实不切实际）。

如何最好地解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T06:25:08.860

只需将您的数据放入`SqLite Database`并将数据库存储在`Project:Asset` **文件夹**中，然后从该文件夹中检索数据

可能是它的简单方法。

因为如果您将数据存储在首选项中，那么您的应用在安装时将占用更多空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:26:00.400

霍夫曼代码是压缩数据的一种选择： [http ://en.wikipedia.org/wiki/Huffman_coding](http://en.wikipedia.org/wiki/Huffman_coding)

看看这里的具体实现： [http ://rosettacode.org/wiki/Huffman_coding](http://rosettacode.org/wiki/Huffman_coding)

然后，您可以按照此处的建议将树存储在物理中： [Efficient way of storage Huffman tree](https://stackoverflow.com/questions/759707/efficient-way-of-storing-huffman-tree)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T06:27:43.300

如果您尚未阅读有关 Android 存储选项的文档，请从[这里](http://developer.android.com/guide/topics/data/data-storage.html)开始。通常，对于如此大的数据集，数据库将是最节省时间和空间的。

# macos - 在我的mac上使用apache作为我网络中的人可以连接并获取信息的游戏服务器是否合理？

> ID：14017803
> 
> 赞同：0
> 
> 时间：2012-12-24T06:22:22.727
> 
> 标签：macos, apache, client-server, multiplayer

不确定它是否可行或合理的想法。我是新手，如果我忘记了一些简单的事情，请原谅我。我的想法是我将拥有一个可以由我的网络中的多个人玩的游戏。我想做的是让我的本地 apache 服务器监听连接并处理所有监听器的游戏状态逻辑，并更新所有监听器，例如每个客户端的位置。这可行吗？目前我在我的 Mac 上有我的本地 apache 设置。我可以通过输入我的 ip 地址从我的 android 设备连接到我的 mac。对下一步有帮助吗？我想得到一个至少使用 apache 的 hello-world 客户端/服务器程序。只是需要一些指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:58:33.600

这个问题太宽泛了，在这种网站上无法回答。如果您是一名开发人员并想开始使用 Java 开发在线服务，您可以查看[我的博客](http://amirzucker.wordpress.com/2012/11/05/creating-an-online-service-dont-start-from-scratch/)，如果您喜欢 PHP，您可以找到其他可以帮助您入门的博客。

# c# - 命名空间 ASP 中不存在 global_asax

> ID：14017807
> 
> 赞同：3
> 
> 时间：2012-12-24T06:22:37.747
> 
> 标签：c#, asp.net, .net, global-asax

嗨，我向 global.asax 添加了一个类文件。

global_asax 内的代码：

```
<%@ Application Language="C#" CodeFile="Global.asax.cs" Inherits="Global" %> 
```

global.asax.cs 中的代码：

```
public partial class Global : System.Web.HttpApplication
{} 
```

但我仍然收到上述错误：

> 命名空间“ASP”中不存在类型或命名空间名称“global_asax”（您是否缺少程序集引用？）

这是命名空间 ASP 代码：

```
using System.Diagnostics;
using System.Runtime.CompilerServices;

namespace ASP
{
[CompilerGlobalScope]
public class global_asax :HttpApplication
{
    [DebuggerNonUserCode]
    public global_asax();
}
} 
```

这里 global_asax 正在继承 HttpApplication ..我如何更改此文件并使其继承 Global Class

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T06:33:03.470

加载后打开 Visual Studio 2010

```
open explorer -> goto > C:\Program Files\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0 
```

将所需的 System.ComponentModel.DataAnnotations.dll 复制到您的项目“References”文件夹中，选择该引用并在属性下将“复制本地”设置为 true，一旦发布，它将位于您的 bin 文件夹中，并且不会对任何服务器产生影响它是 x32 或 x64。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:35:24.207

你的文件*真的*被称为`global_asax`and`global_asax.cs`吗？不是`global.asax`和`global.asax.cs`？

通常，`global.asax`会引用`Global`项目命名空间中的类，如下所示：

```
<%@ Application Codebehind="Global.asax.cs" Inherits="WebApplication1.Global" Language="C#" %> 
```

并`global.asax.cs`因此被命名为：

```
namespace WebApplication1
{
    public class Global : HttpApplication
    {
    }
} 
```

# javascript - 使用字符串调用函数方法？

> ID：14017812
> 
> 赞同：-1
> 
> 时间：2012-12-24T06:22:55.713
> 
> 标签：javascript

> **可能重复：**
> [如何将字符串值转换为 javascript 中的变量？](https://stackoverflow.com/questions/1893277/how-to-convert-a-string-value-to-a-variable-in-javascript)

在 Javascript 中，我有一个如下所示的对象：

```
clock = function(){
    this.load = function(){
        alert("once");
    }

    this.once = function(){
        alert("load");
    }
}
var clock =  new clock(); 
```

在页面加载时，我`load()`像这样调用时钟对象中的函数

```
clock.load(); 
```

但是，当用户单击链接时，我需要能够运行`clock.once()`. 像这样称呼它很好，但不适合我正在做的事情的动态需求。

假设我需要`clock.once()`在用户单击`<a>`标签时调用：

```
$("a").click(function(){
    var id = $(this).attr("href").match(/[a-zA-Z]+/g);
    [id].once();
} 
```

我认为这会起作用，其中`once()`调用函数的对象是从 string中获取的`id`。

但是，在运行此程序时，我收到以下错误：

> 未捕获的类型错误：对象时钟没有“一次”方法

`once()`通过使用手动调用`clock.once()`工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:25:25.020

`[id].once`不会起作用，因为您没有引用您创建的包含时钟对象的特定数组。您将需要一个特定的数组，其中存储了多个时钟对象实例（如果您构建了正确的数组）。

如果您之前创建了一个时钟对象数组：

```
var clocks = [];
clocks.push(new clock());
clocks.push(new clock()); 
```

然后，您可以像这样对特定数组进行索引，假设 id 是该数组的有效索引：

```
clocks[id] 
```

如果您真的只是想问如何将字符串转换为数字，您可以通过多种方式进行操作。这里有两种常见的方法：

```
parseInt(id, 10)
+id 
```

# angularjs - 如何让函数等待异步调用完成？

> ID：14017813
> 
> 赞同：3
> 
> 时间：2012-12-24T06:23:01.707
> 
> 标签：angularjs

我有一项`angularjs`服务来获取我的`json`数据。

```
// Controller.js file
$scope.data=Events.query();

$scope.getEventtypes = function(){
    angular.forEach($scope.data,function(value, key){
        var arr = [];
        if(key==$scope.month+$scope.year)  {
            for(var i=0; i<key.length; i++) {
                arr.push(value[i].type);
                $scope.eventtypes=arr.unique();
            }
        }
    });
}; 
```

尝试访问`value[i].type`时会抛出错误**cannot read property `type`of undefined**。我知道这是因为异步调用。

```
//i want to add success function like this
$http.get('').success(function(data) {
....
}); 
```

谁能帮我？？如果你建议做一些比这更有效的事情会更好。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T12:36:35.417

我使用异步 $http 服务（使用 jsonp）得到了类似的答案。

基本上你需要：

*   使用回调或
*   使用承诺对象

**承诺：**

```
var promise = service.getHistoricalDataWithQ($scope.symbol, $scope.startDate, $scope.endDate);

promise.then(function(data) {
   $scope.items = data;
}); 
```

**使用回调：**

```
service.getHistoricalDataWithCallback(function (data) {
    $scope.items = data;
}, $scope.symbol, $scope.startDate, $scope.endDate); 
```

[请参阅使用 $htp 和 YQL](https://stackoverflow.com/a/14013434/1916258)回答Angular 。

见我的[jsFiddle](http://jsfiddle.net/asgoth/7bNAd/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T10:52:51.823

虽然@Mahbub 的建议是正确的（promises 使协调异步函数变得更容易），但它并不是唯一的技术。好的，旧的回调也可以工作。`$resource`虽然 Promise 可以说是更优雅的 API，但在当前版本的 AngularJS 中不支持 Promise API 的苦涩事实。

除了理论，在您的特定情况下，您可以简单地使用回调并完成它：

```
$scope.data=Events.query(function(data){

   angular.forEach(data,function(value, key){
        var arr = [];
        if(key==$scope.month+$scope.year)  {
            for(var i=0; i<key.length; i++) {
                arr.push(value[i].type);
                $scope.eventtypes=arr.unique();
            }
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T08:33:24.007

为此，$resource 需要像 $http 一样返回一个 Promise 对象。但是 Angular 的最新版本还不支持。

Partap 的 pull 被标记为 "good to merge"，它返回了 $resource 的承诺。[https://github.com/angular/angular.js/pull/1547](https://github.com/angular/angular.js/pull/1547)。您需要使用此[https://github.com/partap/angular.js/blob/005e865e5629a241d99c69a18f85fc2bb5abb1bc/src/ngResource/resource.js更改您的 resource.js 文件](https://github.com/partap/angular.js/blob/005e865e5629a241d99c69a18f85fc2bb5abb1bc/src/ngResource/resource.js)

所以你可以使用它并像这样重构你的代码

```
Events.query().$q.then(function(response){
 $scope.data=response;
 ....
 ....
}); 
```

# objective-c - 隐藏底栏后如何增加视图控制器的高度以覆盖全屏？

> ID：14017814
> 
> 赞同：0
> 
> 时间：2012-12-24T06:23:15.987
> 
> 标签：objective-c, hide, fullscreen, uitabbar

我想在这里实现两件事

1）当我推动视图控制器时隐藏底栏

2) 显示视图控制器的全高，使其覆盖整个屏幕高度

我的代码如下：

```
DMUserProfileViewController *upvc = [[DMUserProfileViewController alloc]initWithNickname:[UserInfo sharedUserInfo].getNickname];
upvc.view.frame = CGRectMake(0, 0, self.frame.size.width, 431);
upvc.hidesBottomBarWhenPushed = YES;

[self.navigationController pushViewController:upvc animated:YES]; 
```

但是如下所示，框架的设置似乎不会影响结果。（视图控制器下方的空白区域）。如何增加视图的高度以使其覆盖整个屏幕？

![在此处输入图像描述](../Images/7f1f7795f1f02a3651db3e1f03381ffa.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:02:52.870

尝试这个：

```
[self.view sendSubviewToBack:self.tabbar]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:56:44.267

删除线

```
upvc.view.frame = CGRectMake(0, 0, self.frame.size.width, 431); 
```

# objective-c - SQL 参数化插入联合查询

> ID：14017815
> 
> 赞同：1
> 
> 时间：2012-12-24T06:23:17.937
> 
> 标签：objective-c, sql, sqlite, ios5, multiple-insert

我已经成功地多次插入了大约 200 条记录，但我的问题是插入数据的顺序。记录插入到`SD_0`, `SD_1`, `SD_10`, `SD_100`, .. 等等。

我需要的订单是`SD_0`, `SD_1`, `SD_2`, `SD_3`,.... 等等。

这是我的查询：-

```
insert into Coffee (coffeeName,price) select ? as coffeeName ,? as price
 UNION SELECT ? , ?
 UNION SELECT ? , ?
 UNION SELECT ? , ?
 UNION SELECT ? , ?
 UNION SELECT ? , ?
 UNION SELECT ? , ?
 UNION SELECT ? , ?
 UNION SELECT ? , ?
 UNION SELECT ? , ? 
```

让我知道此查询是否需要任何更改。

我将此查询与 Objective-C 代码一起使用。

下面我添加代码：

-(void)addCoffee: (NSMutableDictionary *)dictParam {

```
 NSString *strQuery = [NSString stringWithFormat:@"insert into Coffee (%@) select ? as %@",[[dictParam allKeys] componentsJoinedByString:@","],[[dictParam allKeys] objectAtIndex:0]];

     //For second line of query SELECT 'data1' AS 'column1', 'data2' AS 'column2'
     for (int i = 1; i<[dictParam count]; i++) {
               strQuery = [strQuery stringByAppendingFormat:@" ,? as %@",[[dictParam allKeys] objectAtIndex:i]];
     }

     strQuery = [strQuery stringByAppendingFormat:@"\n"];

     //For another union statements
     for (int j = 1; j < [[dictParam valueForKey:[NSString stringWithFormat:@"%@",[[dictParam allKeys] objectAtIndex:0]]] count]; j++) {

          strQuery = [strQuery stringByAppendingFormat:@"UNION SELECT ?"];

          for (int i = 1; i<[dictParam count]; i++) {

               strQuery = [strQuery stringByAppendingFormat:@" , ?"];
          }
          strQuery = [strQuery stringByAppendingFormat:@"\n"];

      }
      const char *sql =  [strQuery UTF8String];

      if(sqlite3_prepare_v2(database, sql, -1, &addStmt, NULL) != SQLITE_OK)
        NSAssert1(0, @"Error while creating add statement. '%s'", sqlite3_errmsg(database));

      int counter = 1;

      for (int j = 0; j < [[dictParam valueForKey:[NSString stringWithFormat:@"%@",[[dictParam allKeys]       objectAtIndex:0]]] count]; j++) {

         for (int i = 0; i<[dictParam count]; i++) {

               sqlite3_bind_text(addStmt, counter, [[NSString stringWithFormat:@"%@",[[dictParam valueForKey:[NSString stringWithFormat:@"%@",[[dictParam allKeys] objectAtIndex:i]]] objectAtIndex:j]] UTF8String], -1, SQLITE_TRANSIENT);

               counter++;

         }
       }
       if(SQLITE_DONE != sqlite3_step(addStmt))
          NSAssert1(0, @"Error while inserting data. '%s'", sqlite3_errmsg(database));
       else
          coffeeID = sqlite3_last_insert_rowid(database);

   //Reset the add statement.
   sqlite3_reset(addStmt); 
```

}

# hadoop - 使用 Hadoop Pipes 在 Hadoop 映射器中获取文件名

> ID：14017816
> 
> 赞同：2
> 
> 时间：2012-12-24T06:23:17.967
> 
> 标签：hadoop, hadoop-streaming

如何获取正在执行的***输入文件***`hadoop mapper`名`Hadoop Pipes?`

我可以在基于 java 的 map reducer 中轻松获取文件名，例如

> FileSplit fileSplit = (FileSplit)context.getInputSplit(); 字符串文件名 = fileSplit.getPath().getName(); System.out.println("文件名"+文件名); System.out.println("目录和文件名"+fileSplit.getPath().toString());

但是我怎样才能进入 C++；

请帮帮我

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T19:37:42.720

对于流/管道作业，作业配置被序列化以处理环境变量。

定义输入文件的作业配置属性名为`map.input.file`. 启动 C++ 程序的[PipeMapRed](http://svn.apache.org/viewvc/hadoop/common/tags/release-1.0.4/src/contrib/streaming/src/java/org/apache/hadoop/streaming/PipeMapRed.java?view=markup)类负责此序列化（`configure`方法，第 151 行），并确保作业配置属性名称被转义（`addJobConfToEnvironment`方法行 206/266） - 这意味着所有非`a-Za-z0-9`字符都替换为下划线（`safeEnvVarName`方法，第 276/284 行） - 因此您在 c++ 程序中查找的实际环境变量将命名为`map_input_file`.

我不是 C++ 程序员，所以我不能告诉你如何获取环境变量，但我确信它足够简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-23T09:16:36.603

通过解析`mapreduce_map_input_file`（新）或~~`map_input_file`~~（已弃用）环境变量，可以获取地图输入文件名。

注意：
这两个环境变量是**区分大小写的**，所有字母都应该**小写**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-26T14:35:59.380

如果您在Python中使用**HADOOP 2.x ：**

```
file_name = os.environ['mapreduce_map_input_file'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T17:35:56.187

弄清楚如何在 Python 中执行此操作：

```
import os
filename = os.environ['map_input_file'] 
```

文件名是您想要的变量 - 这将为您提供映射器正在处理的文件名。

其他一些有用的环境变量是：

*   mapred_job_id = 完整的作业 ID
*   mapred_tip_id = 特定映射器或减速器任务的 id

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-25T07:41:16.523

我一直在努力解决同样的问题。我找到了解决方案。

```
void map(HadoopPipes::MapContext& context) {                                                                                         
    string path;
    path = context.getInputSplit();                                                                                                    
    path.erase(path.end()-1);
} 
```

我只发布了阅读文件名部分。getInputSplit() 方法返回文件的整个路径 + 最后的一些未知字符。我想要文件的纯路径，所以删除字符串的结束字符。我不知道为什么奇怪的字符被添加到字符串的末尾，但是让我们通过删除结束字符来使用它~！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-28T19:00:44.273

下面的代码将能够打印文件名

```
filepath = os.environ['mapreduce_map_input_file']

filename = os.path.split(filepath)[-1]

print filename 
```

# html - 如何将 HTML 选择范围限制为文本本身

> ID：14017818
> 
> 赞同：6
> 
> 时间：2012-12-24T06:23:25.670
> 
> 标签：html, css, selection

这个问题一直困扰着我。

当我们在 div 中创建段落/列表/跨度时，我们希望用户能够仅选择文本，而不是网页上的整个水平块。

但是当我创建一个网页时，我在选择文本时得到的结果如下：

![在此处输入图像描述](../Images/42b6875851705b0df46115c6fc2b0f40.png)

有没有办法通过 html 或 CSS 来限制用户的选择范围？还是我构建导致问题的 div 的方式？

*理想*情况：

![在此处输入图像描述](../Images/c31800ce2efadc8bb2420551562993ca.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T06:48:04.257

看起来只有 Chrome 会像在图片上一样创建全页宽度的选择。1\. Firefox、Opera 和 IE 10 像在图片上一样处理它。2.（[检查自己](http://jsfiddle.net/GdW9p/1/)。）

有一个非标准的 CSS 属性可能会给出预期的结果：（`user-select: element`受 Webkit、Firefox 和 IE 10 支持，带有尊重的前缀）；它将选择限制在所选元素的范围内。但是没有用：Webkit 不支持`element`value，并且其他浏览器已经可以按照您的意愿工作。

* * *

### 更新

在 Chrome 中看起来像`float: left`或`position: relative`“修复”文本选择。（[见小提琴](http://jsfiddle.net/GdW9p/2/)。）

# eclipse - 设置 TFS 后无法启动 Eclipse

> ID：14017822
> 
> 赞同：1
> 
> 时间：2012-12-24T06:24:34.830
> 
> 标签：eclipse, tfs

我正在尝试为我的项目配置 TFS。在我重新启动日食之前，一切都很好。弹出“发生错误。请参阅日志文件”。一旦我检查了日志文件，它就会显示这个错误。请帮忙。

```
!SESSION 2012-12-24 14:18:16.082 -----------------------------------------------
eclipse.buildId=I20120608-1400
java.version=1.6.0_35
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_MY
Command-line arguments:  -os win32 -ws win32 -arch x86_64

!ENTRY org.eclipse.osgi 4 0 2012-12-24 14:18:16.762
!MESSAGE FrameworkEvent ERROR
!STACK 0
org.osgi.framework.BundleException: Exception in org.eclipse.osgi.framework.internal.core.SystemBundleActivator.start() of bundle org.eclipse.osgi.
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:734)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.InternalSystemBundle.resume(InternalSystemBundle.java:225)
    at org.eclipse.osgi.framework.internal.core.Framework.launch(Framework.java:657)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.startup(EclipseStarter.java:274)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)
Caused by: java.lang.IllegalStateException: Expected to find an object at table index: 333
    at org.eclipse.osgi.internal.resolver.StateReader.getFromObjectTable(StateReader.java:83)
    at org.eclipse.osgi.internal.resolver.StateReader.readGenericDescription(StateReader.java:600)
    at org.eclipse.osgi.internal.resolver.StateReader.readBundleDescriptionLazyData(StateReader.java:350)
    at org.eclipse.osgi.internal.resolver.StateReader.fullyLoad(StateReader.java:823)
    at org.eclipse.osgi.internal.resolver.BundleDescriptionImpl.loadLazyData(BundleDescriptionImpl.java:662)
    at org.eclipse.osgi.internal.resolver.BundleDescriptionImpl.getExportPackages(BundleDescriptionImpl.java:160)
    at org.eclipse.osgi.framework.internal.core.PackageAdminImpl.setFrameworkVersion(PackageAdminImpl.java:706)
    at org.eclipse.osgi.framework.internal.core.PackageAdminImpl.setResolvedBundles(PackageAdminImpl.java:656)
    at org.eclipse.osgi.framework.internal.core.SystemBundleActivator.start(SystemBundleActivator.java:67)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    ... 13 more
Root exception:
java.lang.IllegalStateException: Expected to find an object at table index: 333
    at org.eclipse.osgi.internal.resolver.StateReader.getFromObjectTable(StateReader.java:83)
    at org.eclipse.osgi.internal.resolver.StateReader.readGenericDescription(StateReader.java:600)
    at org.eclipse.osgi.internal.resolver.StateReader.readBundleDescriptionLazyData(StateReader.java:350)
    at org.eclipse.osgi.internal.resolver.StateReader.fullyLoad(StateReader.java:823)
    at org.eclipse.osgi.internal.resolver.BundleDescriptionImpl.loadLazyData(BundleDescriptionImpl.java:662)
    at org.eclipse.osgi.internal.resolver.BundleDescriptionImpl.getExportPackages(BundleDescriptionImpl.java:160)
    at org.eclipse.osgi.framework.internal.core.PackageAdminImpl.setFrameworkVersion(PackageAdminImpl.java:706)
    at org.eclipse.osgi.framework.internal.core.PackageAdminImpl.setResolvedBundles(PackageAdminImpl.java:656)
    at org.eclipse.osgi.framework.internal.core.SystemBundleActivator.start(SystemBundleActivator.java:67)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.InternalSystemBundle.resume(InternalSystemBundle.java:225)
    at org.eclipse.osgi.framework.internal.core.Framework.launch(Framework.java:657)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.startup(EclipseStarter.java:274)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)

!ENTRY org.eclipse.osgi 4 0 2012-12-24 14:18:16.774
!MESSAGE Startup error
!STACK 1
java.lang.RuntimeException: Exception in org.eclipse.osgi.framework.internal.core.SystemBundleActivator.start() of bundle org.eclipse.osgi.
    at org.eclipse.osgi.framework.internal.core.InternalSystemBundle.resume(InternalSystemBundle.java:233)
    at org.eclipse.osgi.framework.internal.core.Framework.launch(Framework.java:657)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.startup(EclipseStarter.java:274)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)
Caused by: org.osgi.framework.BundleException: Exception in org.eclipse.osgi.framework.internal.core.SystemBundleActivator.start() of bundle org.eclipse.osgi.
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:734)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.InternalSystemBundle.resume(InternalSystemBundle.java:225)
    ... 11 more
Caused by: java.lang.IllegalStateException: Expected to find an object at table index: 333
    at org.eclipse.osgi.internal.resolver.StateReader.getFromObjectTable(StateReader.java:83)
    at org.eclipse.osgi.internal.resolver.StateReader.readGenericDescription(StateReader.java:600)
    at org.eclipse.osgi.internal.resolver.StateReader.readBundleDescriptionLazyData(StateReader.java:350)
    at org.eclipse.osgi.internal.resolver.StateReader.fullyLoad(StateReader.java:823)
    at org.eclipse.osgi.internal.resolver.BundleDescriptionImpl.loadLazyData(BundleDescriptionImpl.java:662)
    at org.eclipse.osgi.internal.resolver.BundleDescriptionImpl.getExportPackages(BundleDescriptionImpl.java:160)
    at org.eclipse.osgi.framework.internal.core.PackageAdminImpl.setFrameworkVersion(PackageAdminImpl.java:706)
    at org.eclipse.osgi.framework.internal.core.PackageAdminImpl.setResolvedBundles(PackageAdminImpl.java:656)
    at org.eclipse.osgi.framework.internal.core.SystemBundleActivator.start(SystemBundleActivator.java:67)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    ... 13 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T07:22:15.950

仅当使用 TFS 插件安装语言包时才会出现问题。卸载语言包解决了启动问题，这样eclipse就可以不用了`-clean`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T08:17:19.117

我不知道发生了什么，但是在我放入之后 Eclipse 工作`-clear`正常`eclipse.ini`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T04:50:54.570

如果您安装 TFS 语言包，则会在 Eclipse 启动时产生问题，首先从帮助菜单中卸载 TFS 语言包，它将清除所有问题。

否则，每次启动 eclipse 时都必须执行 eclipse -clean 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-12T03:42:26.163

编辑位于 Eclipse 安装目录中的 eclipse.ini 文件。插入 -clean 作为第一行。

这将强制 Eclipse 运行。然后，您可以从 .ini 文件中删除 -clean 行。

[更多细节](https://stackoverflow.com/questions/11849024/why-is-eclipse-3-2-throwing-an-error-on-startup)

# node.js - 使用 node.js 在 mongodb 中存储文件

> ID：14017826
> 
> 赞同：3
> 
> 时间：2012-12-24T06:25:03.297
> 
> 标签：node.js, mongodb, gridfs

嗨，我需要使用 node.js 在 mongodb 中存储一个文件，该文件放在我的桌面中，我必须将它存储在我的 mongodb 数据库中。我遇到了一个叫做 gridfs 的东西，但不知道如何继续。任何帮助都会不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T13:05:09.203

如果您的文件大小超过 16Mb（Mongo 的最大文档大小），如果您希望将文件存储在数据库中，则必须使用 gridFS。

这里有一个非常有用的使用 gridFS 的原因：http: [//docs.mongodb.org/manual/faq/developers/#faq-developers-when-to-use-gridfs](http://docs.mongodb.org/manual/faq/developers/#faq-developers-when-to-use-gridfs)

在节点中的实现方面（如果使用 nativ mongo 驱动程序）：

```
var  mongodb = require('mongodb')
   , MongoClient = mongodb.MongoClient
   , Grid = mongodb.Grid //use Grid via the native mongodb driver
   ; 
```

设置连接后，将文件写入 gridFs

```
var grid = new Grid(db, 'fs'); //db being a handle to your database

var buffer = //read the file in to a buffer

//write the buffer out to mongo
grid.put(buffer, {metadata:{category:'text'}, content_type: 'text'}, function(err, fileInfo) {
 if(err) {
   //handle any errors here
 }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T06:31:23.573

虽然我不建议在 Mongo 中存储大文件，但有可能，较小的文件会更好。

只需读取文件的文本（如果它是文本文件）或二进制文件（如果它是二进制格式，即可执行文件）。您可以使用该`fs`库来读取文件并相应地对其进行编码。

然后将存储在变量中的数据插入数据库中。

```
var fs = require('fs');

// Read file with proper encoding...
var data = //...

// Insert into Mongo
mongo.insert({file: data}); 
```

当你想从数据库中检索文件时，你会做相反的事情。编码/解码的过程因文件类型而异。

# c# - Eazfuscator.NET 发生一个或多个错误 --> 索引超出范围

> ID：14017827
> 
> 赞同：2
> 
> 时间：2012-12-24T06:25:05.373
> 
> 标签：c#, compiler-errors, obfuscation, eazfuscator

我正在使用 Eazfuscator 3.3（免费版），我**可以**混淆我的所有项目，**除了一个**项目（在特定解决方案中）。

这是我得到的错误：

> 错误 16 处理输入文件“DAL.dll”时发生错误 --> 发生一个或多个错误 --> 索引超出范围。必须是非负数且小于集合的大小。
> C:\项目**__****_* **__** *DAL\EXEC* ****__** _DAL***

 ***我试图手动运行它：

```
C:\Program Files (x86)\Eazfuscator.NET\Eazfuscator.NET.exe "C:\Projects\________\______DAL\bin\Release\______DAL.dll" --msbuild-project-path "C:\Projects\______\______DAL\______DAL.csproj" --msbuild-project-configuration "Release" --msbuild-project-platform "AnyCPU" --msbuild-solution-path "C:\Projects\______\______.sln" -n --newline-flush -v 3.3" 
```

但我得到了同样的结果。

我什至试过这个：

```
C:\Program Files (x86)\Eazfuscator.NET>Eazfuscator.NET.exe "C:\Projects\_______\_______DAL\bin\Release\________DAL.dll" 
```

但是，正如你所看到的 - 我得到了相同的结果：

> Eazfuscator.NET 版本 3.3（发布版本 3.3.161.40493） 版权所有 (C) 2007-2012 Oleksiy Gapotchenko
> 
> 混淆程序集“ ***_* __** *DAL.dll”...错误：处理输入文件“”时出错*****____** _DAL.dll' --> 出现一个或多个错误 --> 索引超出范围。必须是非负数且小于集合的大小。**

 **我有一种感觉，因为我的参考资料 - *FluentNHibernate.dll* (1.2.0.712)、*NHibernate.dll* (3.1.0.4000)、*NHibernate.ByteCode.Castle.dll* (3.1.0.4000)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T12:01:13.270

这是一个已知问题，已在最新版本的 Eazfuscator.NET 中得到修复。

**有一个快速的解决方法：**

```
[assembly: Obfuscation(Feature = "optimization", Exclude = true)] 
```

请将上面显示的属性应用于相关程序集。这将关闭 Eazfuscator.NET 优化器。*****

# java - 将数组值添加到 Activity 中的 OnItemClickListener()

> ID：14017836
> 
> 赞同：0
> 
> 时间：2012-12-24T06:25:46.710
> 
> 标签：java, android, listview, listactivity

我正在使用这段代码：

```
final ListView lv = getListView();
    lv.setTextFilterEnabled(true);  
    lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
            @SuppressWarnings("unchecked")

            HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);                   
            Intent intent = new Intent(TestActivity.this, TestDetailActivity.class);
            intent.putExtra("id_card", o.get("id_card"));
            intent.putExtra("card_title", o.get("card_title"));
            intent.putExtra("card_number", o.get("card_number"));
            startActivity(intent);
        }
    }); 
```

我`HashMap<String, String> o = (HashMap<String, String>)`用来获取一些值，我将有意地传递给另一个活动。

它在我使用时有效，`ListActivity`但我不知道如何在 Activity 中实现它，请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T06:31:50.890

因为[getListView()](http://developer.android.com/reference/android/app/ListActivity.html#getListView%28%29)是[**ListActivity的方法**](http://developer.android.com/reference/android/app/ListActivity.html)

这意味着当你使用

> 最终列表视图 lv = getListView();

ListView 将使用 初始化`super`，而您的简单`Activity`类不包含任何 ListView。

ListActivity-> *ListActivity 承载一个可以绑定不同数据源的ListView对象*

要在 Activity 类中使​​用相同的内容，您必须使用显式 ListView 并将其映射到 ID

```
<ListView android:id="@+id/list_view"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"/> 
```

现在你可以像这样初始化

```
final ListView lv = (ListView) findViewById(R.id.list_view); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:32:06.090

调用`getListView()`仅适用于`ListActivity`. 您将需要以不同的方式访问您的 ListView。在您的活动中实现此方法：

```
public ListView getListView()
{
    return findViewById(android.R.id.list);
} 
```

（或者如果您的列表 id 是其他东西，请改用该 id）

# freebase - /user、/base 和 /people 之类的域之间有什么区别？

> ID：14017839
> 
> 赞同：1
> 
> 时间：2012-12-24T06:26:09.370
> 
> 标签：freebase, mql

我看到在特定域下列出了几种类型，但我看到这些域要么以 开头`/user`，要么以OR之`/base`类的更有意义的东西开头。在这三种类型中的一种中具有类型之间的基本区别是什么？`/music``/people`

是否`/user`意味着有人创建了此域？如果是这样，那是什么`/base`？我确实了解其中包含大量主题的`/people`..类型的域。`/music`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:39:02.007

您可能想要查看[域](http://wiki.freebase.com/wiki/Domains)、[共享](http://wiki.freebase.com/wiki/Commons)和[基础](http://wiki.freebase.com/wiki/Base)的 wiki 页面。

是的，所有 /user/foo/... 类型都是由 /user/foo 创建的。作为基地的领域可以从几乎不包含任何内容的实验工作到大型人口稠密的基地，例如我的美国[国家历史名胜名录](http://www.freebase.com/view/base/usnris)基地，其中包含近 40,000 个主题。

# login - codenameone 通过短信打开表格

> ID：14017843
> 
> 赞同：2
> 
> 时间：2012-12-24T06:26:36.547
> 
> 标签：login, java-me, lwuit, codenameone

我在我的代号应用程序中创建了一些表单。此应用程序使用 SMS 与其服务器通信以传递和获取数据。

当特定的短信来临时，我想打开特定的表格。在每条短信中，我都会在移动设备中输入一个打开表单的命令。

假设我想登录：

1.  从设备向服务器发送登录命令。
2.  从服务器进行身份验证并将登录命令发送到设备。
3.  接收短信并处理它应该显示的内容：显示错误或打开另一个表单。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:26:36.060

您无法在 Codename One 的设备上拦截 SMS，该 API 不可用，并且在某些平台（例如 iOS）上是不可能的。`ConnectionRequest`您可以使用该类连接到服务器并执行其他所有操作。

# c# - Jquery $.ajax() 总是返回 xhr.status 作为本地主机上的请求中止

> ID：14017844
> 
> 赞同：1
> 
> 时间：2012-12-24T06:26:46.997
> 
> 标签：c#, asp.net, jquery-ui, jquery

我在本地 pc 上部署了 JSON 服务，我正在使用 ASP.net/C# 并且在 IE 9 中返回的数据是有效的 JSON 响应，并通过格式化程序和解析器进行了检查。

下面是 JQuery 调用（使用 JQuery 1.7.1 版），我正在制作一个 HTML 文件。

`[http://mylocalhostpc:2483/Portfolio.html](http://mylocalhostpc:2483/Portfolio.html)`

```
<script type="text/javascript">
$(document).ready(function () {

    $.ajax({
        url: "http://mylocalhostpc/JSONService/ServiceHandler.ashx?seed=ptr&cnt=2",
        contentType: "application/json; charset=utf-8",
        type: "GET",
        dataType: 'json',
        data: {},
        success: function (data) {
            if (data.results[0]) {
                var htmlText = data.results[0];
                var jsonObject = parseAndConvertToJsonObj(htmlText);
            } else {
                document.getElementById("footer-bottom").innerHTML = "Could not load the page.";
            }
        },
        error: function (xhr, status,thrownError) {
            switch (xhr.status) {
                case 200:
                    alert(xhr.status + ":- " + thrownError);
                    break;
                case 404:
                    alert('File not found');
                    break;
                case 500:
                    alert('Server error');
                    break;
                case 0:
                    alert('Request aborted: ' + !xhr.getAllResponseHeaders());
                    break;
                default:
                    alert('Unknown error ' + xhr.status + ":- " + thrownError);
            }
        }
    });
}); 
```

我每次都收到“请求中止：真”的错误消息。但是，当我检查 URL 时：

`[http://mylocalhostpc/JSONService/Default.aspx?seed=ptr&cnt=2](http://mylocalhostpc/JSONService/Default.aspx?seed=ptr&cnt=2)`

以下数据已成功重新调整。

```
{ "Table" : [ { 
    "Product_Active" : true,
    "Product_DateAdded" : "/Date(1349352480000+0530)/",
    "Product_ISBN" : "9788179637494",
    "Product_Id" : 71,
    "Product_Price" : 45,
    "Product_Rating" : 5
  },
  { 
    "Product_Active" : true,
    "Product_DateAdded" : "/Date(1349352480000+0530)/",
    "Product_ISBN" : "9789350492536",
    "Product_Id" : 142,
    "Product_Price" : 150,
    "Product_Rating" : 5
  }
] } 
```

web.config 文件代码

```
<urlMappings>
  <add url="~/Default.aspx" mappedUrl="~/ServiceHandler.ashx"/> 
```

服务处理程序背后的代码 - ServiceHandler.ashx.cs

```
public class ServiceHandler : IHttpHandler
{
public void ProcessRequest(HttpContext context)
{
    if (context.Request.QueryString["seed"] != null)
    {
        string searchstring = string.Empty;
        Products oProducts = new Products();
        context.Response.ContentType = "text/json";

        switch (context.Request.QueryString["seed"].ToString())
        {
            case "pra":
            // prODUCT aLL
                context.Response.Write(ProcessingRequest.Serialize(oProducts.getAllProducts("0", "")));
                break;
            case "ptr":
                // pRODUCTS tOP rATED
                searchstring = context.Request.QueryString["cnt"] == null ? "20" : context.Request.QueryString["cnt"].ToString();
                context.Response.Write(ProcessingRequest.Serialize(oProducts.getTopRatedProducts(searchstring)));
                break;
            default:
                context.Response.Write("Invalid service request, please check the url.");
                break;
        }
        context.Response.End();
    }
    else
    {
        context.Response.Write("Invalid service request, please provide valid seed.");
        context.Response.End();
    }
}
public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

我在哪里犯了任何错误，请帮我解决这个问题？

我也尝试将 dataType 用作“jasonp”和“脚本”，但运气不好，错误更改为“未知错误未定义”

PS：经过更多努力，我得到了以下错误：

在我的 jquery 错误处理程序中添加了一个代码

`case 200: alert(xhr.status + ":- " + thrownError); break;`

它返回了我的错误代码

> 200:- 错误：未调用 jQuery171049959372938610613_1356351917595

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T06:57:22.863

我认为您必须以这种方式使用它：

```
success: function (data) {
   $.each(data.Table, function(i, resp){
        if (resp) {
            var htmlText = resp;
            var jsonObject = jQuery.parseJSON(htmlText);
            console.log(jsonObject);
        } else {
            $("#footer-bottom").html("Could not load the page.");
        }
   });
}, 
```

你也可以试试这个：

```
success: function (data) {
   $.each(data.Table, function(i, resp){

            console.log(resp);

   });
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-26T10:49:07.750

*（代表 OP 发布）*。

通过在不同的服务器上托管服务和客户端来解决。

# php - Ajax 聊天 - 登录问题

> ID：14017846
> 
> 赞同：-9
> 
> 时间：2012-12-24T06:27:23.743
> 
> 标签：php, mysql, chat

在我的*Ajax 聊天*脚本中，我收到了以下警告：

```
Warning: mysql_fetch_array() expects parameter 1 to be resource,
boolean given in /home/mychat/public_html/c/listChats.php on line 7 
```

第 7 行：

```
while($row = mysql_fetch_array($sql)){ 
```

listChats.php：

```
<?php 
$chats = "";

include_once("scripts/connect_db.php");

$sql = mysql_query("SELECT * FROM (
    SELECT * FROM chatBox order by id DESC LIMIT 20
) TMP ORDER BY tmp.id ASC");

while($row = mysql_fetch_array($sql)){
    $chat = $row['chatBody'];
    $username = $row['username'];
    $chats = '<p><span id="un">' . $username . ':</span> ' . $chat . '</p>';
    echo "$chats";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:30:29.347

您的查询语法错误

尝试这个

```
$sql = mysql_query("SELECT *,(

    SELECT * FROM chatBox order by id DESC LIMIT 20

) as data FROM TMP ORDER BY tmp.id ASC"); 
```

更新的查询

```
select *,(select username from chatBox where id=".$_SESSION['userid'].") from chatBody where user_id=".$_SESSION['userid'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:52:30.617

我认为您使用了错误的表名。

尝试这个

```
$sql = mysql_query("SELECT *,(

    SELECT * FROM chatBox order by id DESC LIMIT 20

) as data FROM TMP ORDER BY TMP.id ASC"); 
```

如果你的桌子是`TMP`那么使用`TMP.id`如果它是`tmp`那么使用`tmp.id`

# image-processing - 如何在以特定尺寸打印的网站上制作元素？

> ID：14017858
> 
> 赞同：0
> 
> 时间：2012-12-24T06:28:47.310
> 
> 标签：image-processing, printing, screen-resolution, dimensions

我正在使用 php，并且正在为可以打印的游戏锦标赛生成玩家身份证页面。

如何设置一个元素（例如一个 div），以便它以信用卡的大小打印？（86 毫米 x 54 毫米）

有什么方法可以确保卡片的尺寸在不同的计算机上正确打印，或者它们的屏幕分辨率设置会影响打印尺寸吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:02:19.173

无论是显示卡片的文本还是图像，只需设置高度和宽度的大小（以像素为单位）。如果您使用的是文本，请指定外边框或 div 区域的宽度（以像素为单位）。如果使用图像，则应该已经设置了它们的大小参数。

然后为确保打印机不会更改任何内容，请将卡片内容放入一个表格或 div 中，该表格或 div 设置为以像素为单位的宽度和高度，以匹配 A4 页面的常用可打印区域。选择一个可以填满 A4 而不会裁剪的尺寸。

例如：

```
<table align="center" border="1" cellspacing="0" cellpadding="10" width="600" height="900" >
<tr> 
<td align="center"><img src="image.jpg" width="500" height="500"></td>
</tr>
</table> 
```

人们普遍认为这会受到计算机屏幕和图像分辨率的影响，但这种方法已经过测试并证明是有效的。

# java - spring aop如何改变返回值

> ID：14017860
> 
> 赞同：23
> 
> 时间：2012-12-24T06:28:50.750
> 
> 标签：java, spring, aop

我在DAO层有一个带有返回值的方法，我想通过spring AOP根据不同的要求更改返回值，然后发送到SERVICE层中的相应方法；但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-24T06:37:24.560

您可以将`@Around`方面应用于应修改其返回类型的方法。您可以查看我的[博客文章](http://vikdor.blogspot.com/2012/10/memoize-in-java-using-spring-and-aspects.html)，了解如何将 Spring AOP 方面添加到 Spring 应用程序，然后编写`@Around`方面。我将此方面用于`Memoizing`方法的结果，但在您的情况下，您将获取 的返回值`ProceedingJoinPoint.proceed()`，将其类型转换为适当的类，然后对其进行修改并返回它。

如果您计划完全返回一个完全不同的对象，那么这将导致 ClassCastException，除非实际返回的对象是返回类型的子类。

# javascript - 如何使用javascript检查标签是否存在而不会出错

> ID：14017864
> 
> 赞同：6
> 
> 时间：2012-12-24T06:29:06.070
> 
> 标签：javascript, xml, getelementsbyname

我有带有根“客户端”的 xml 数据，它可以在其中包含多个“客户端”元素。有时 XML 文件中没有返回客户端元素（这没关系）。我需要确定是否返回了任何客户端元素，因此我尝试使用：

```
if(typeof myfile.getElementsByTagName("client")){
  alert("no clients");
} 
```

这完成了预期的工作，但只要没有“客户端”元素，我就会收到一个萤火虫错误。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-24T06:31:56.330

为什么不只检查 NodeList 的长度？

```
if( myfile.getElementsByTagName("client").length == 0 )
{
 alert("no clients");
} 
```

添加此项以检查是否已定义 myfile

```
if( typeof myfile == "undefined" || myfile.getElementsByTagName("client").length == 0 )
{
 alert("no clients");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T06:32:28.717

尝试：

```
if (!myfile.getElementsByTagName("client").length) {}
//                                          ^ falsy (0) if no elements 
```

如果您不确定是否`myfile`作为元素存在，则应首先检查：

```
if (typeof myfile !== 'undefined'
    && myfile.getElementsByTagName 
    && myfile.getElementsByTagName("client").length) {} 
```

# java - 即使用户在页面上进行活动，Liferay 会话也会过期

> ID：14017867
> 
> 赞同：1
> 
> 时间：2012-12-24T06:29:14.050
> 
> 标签：java, ajax, liferay, liferay-6

我的页面上有一个 portlet，对于我们使用 ajax 调用资源 URL 的所有用户操作，只有 portlet 中的内容不断变化。现在的问题是，即使用户在页面上一直处于活动状态，我们也会在页面上获得会话过期。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:36:29.320

简单的答案是因为您实际上并没有在 Liferay 周围导航。使用 AJAX 不算作用户执行阻止其会话过期的操作。您需要该页面重新加载或延长会话时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:47:53.380

您可以按照以下两个步骤解决此问题：

1- 将此行添加到**portal-ext.properties**文件中：

（3000 是会话到期前的分钟数）

```
session.timeout=3000

session.timeout.warning=0 
```

2-转到**/conf/web.xml（Tomcat**服务器）并编辑会话配置超时：

```
<session-config>
        <session-timeout>3000</session-timeout>
  </session-config> 
```

# javascript - 点击“关闭”按钮后，有什么方法可以防止浏览器关闭

> ID：14017879
> 
> 赞同：1
> 
> 时间：2012-12-24T06:30:25.643
> 
> 标签：javascript, c#, asp.net, vb.net, dom-events

我的要求如下：

当用户`close`在页面中单击浏览器上的按钮时，`customized popup`将出现窗口。我已经设计了`popup`窗口，我可以使用以下代码打开该窗口：

```
 window.onbeforeunload = function (e) {
            openwindow(200, 100, 'Close.aspx');
        }; 
```

`any`但我的最终要求是在弹出窗口上单击按钮后不应关闭主父窗口。我不希望浏览器的默认警报返回消息窗口，我在这里显示弹出窗口而不是浏览器的默认警报窗口。有没有办法阻止浏览器关闭..？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T06:55:38.947

由于安全原因，这是不可能的！

您可以使用显示确认对话框`onbeforeunload`（参见例如[此处](https://stackoverflow.com/questions/3256919/displaying-a-custom-dialog-when-the-user-exits-the-browser)了解如何操作），让用户可以选择不离开页面。但是你不能阻止违背用户意愿的关闭。

```
window.onbeforeunload = function(e) {
    return 'Dialog text here.';
}; 
```

# android - Android 应用程序互联网连接

> ID：14017882
> 
> 赞同：1
> 
> 时间：2012-12-24T06:30:33.810
> 
> 标签：android

我是 Android 新手，这是我的第一个应用程序。我要连接互联网并从我的公司服务器下载 JSON，但无法获取输入流，请检查此代码并为我提供帮助。

```
URL url = new URL("http://www.android.com/");
HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
urlConnection.connect();
InputStream in = new BufferedInputStream(urlConnection.getInputStream()); 
```

URL 不是我测试过许多 URL 的问题。在此代码中，最后一行给出了错误。我在我的开发机器上使用开放连接（没有代理只有防火墙），并且模拟器浏览器能够访问互联网。

我已经添加了

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

与 Manifest 文件中的 uses-sdk 标签平行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:40:31.793

在尝试影响输入流之前尝试建议服务器您准备接受什么样的数据，如果它是 json，让服务器知道您接受 application/json 类型的数据，例如

```
httpcon = (HttpURLConnection) ((new URL(http://www.android.com/).openConnection()));
httpcon.setRequestProperty("Accept", "application/json"); 
```

并且不要忘记您要执行的操作，GET 或 POST

```
httpcon.setRequestMethod("POST"); or  httpcon.setRequestMethod("GET"); 
```

请提及您收到的错误/消息，以便我们知道服务器想说什么！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:35:22.930

用这个。

```
URL url = new URL("http://www.google.com/");
   HttpURLConnection myConnection = (HttpURLConnection) url.openConnection();
   try {
     InputStream in = new BufferedInputStream(myConnection.getInputStream());
     readStream(in);
    finally {
     myConnection.disconnect();
   }
 } 
```

并在清单文件中添加用户权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T06:37:53.373

这是我的工作代码示例..

您只需要**在 AsyncTask**类中运行以下代码并**传递您的 URL**，它将返回来自服务器的响应。

```
public String getResult(String url) {

        Log.v(TAG, "Final Requsting URL is : :"+url);

        String line = "";
        String responseData = null;

        try {
            StringBuilder sb = new StringBuilder();
            String x = "";
            URL httpurl = new URL(url);
            URLConnection  tc= httpurl.openConnection();

            /*URLConnection tc = twitter.openConnection();
            HttpURLConnection httpConnection = (HttpURLConnection) tc;
            httpConnection.setRequestMethod("POST");*/
            //tc.setRe
            //tc.setDoOutput(false);

            BufferedReader in = new BufferedReader(
                           new InputStreamReader(tc.getInputStream()));

            while ((line = in.readLine()) != null) {
                sb.append(line + "\n");
                x = sb.toString();
            }
            responseData = new String(x);
        }
        catch (UnknownHostException uh){            
            Log.v("NewWebHelper", "Unknown host :");
            uh.printStackTrace();
        }
       catch (FileNotFoundException e) {
           Log.v("NewWebHelper", "FileNotFoundException :");
            e.printStackTrace();
         }
        catch (IOException e) {
            Log.v("NewWebHelper", "IOException :");
            e.printStackTrace();
        }
      catch (Exception e) {
          Log.v("NewWebHelper", "Exception :");
            e.printStackTrace();
        }
        return responseData;
    } 
```

还**请确保您在清单**文件中需要以下 Internet 权限。

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

让我知道你对此的评论！！

# javascript - 使用 Ext Js 4.0 Accordion 布局

> ID：14017883
> 
> 赞同：0
> 
> 时间：2012-12-24T06:30:37.180
> 
> 标签：javascript, extjs

我正在使用 Ext Js 4.0 并使用在带有 Accordion 布局的面板中添加的 3 个网格面板。

保留这些面板之外的一个按钮，我希望在单击它时获取当前展开面板的选定行数据。

为了从单个面板的网格中获取数据，我使用了以下代码：

```
lside.items.items[0].getSelectionModel().getSelection()[0].data 
```

（`lside`是带有 Accordion 布局的面板）。

问题是我不知道，也无法弄清楚如何确定展开哪个面板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:21:01.640

扩展面板必须有一个（或更多）额外的 css 类 - 用 firebug 检查它。通过检查 html 元素是否有此类，您可以确定面板是否展开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T20:43:14.023

我不知道我是怎么错过`getCollapsed`的，但是面板方法帮助我确定哪个面板处于活动状态

只需要遍历所有面板并检查哪个面板`getCollapsed`返回 false 作为结果

# xml - 使用 XSLT 在 xml 中计算相同的值

> ID：14017885
> 
> 赞同：0
> 
> 时间：2012-12-24T06:30:50.517
> 
> 标签：xml, xslt, xpath, xslt-2.0

我想添加`<LineNum>[number]</LineNum>`输出，如果我们有不同的值，LineNum 必须再次从“1”开始`<cell num="4">`

源代码：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<table>
   <sheet name="Notification" num="1">
      <row num="1">
         <cell num="1">IBD</cell>
         <cell num="2">YES</cell>
         <cell num="3">6600027830(010000)</cell>
         <cell num="4">800015001</cell>
      </row>
      <row num="2">
         <cell num="1">IBD</cell>
         <cell num="2">YES</cell>
         <cell num="3">6600027830(010000)</cell>
         <cell num="4">800015001</cell>
      </row>
      <row num="3">
         <cell num="1">IBD</cell>
         <cell num="2">YES</cell>
         <cell num="3">6600027831(010000)</cell>
         <cell num="4">800015002</cell>
      </row>
      <row num="4">
         <cell num="1">IBD</cell>
         <cell num="2">YES</cell>
         <cell num="3">6600027831(010000)</cell>
         <cell num="4">800015002</cell>
      </row>
      <row num="5">
         <cell num="1">IBD</cell>
         <cell num="2">YES</cell>
         <cell num="3">6600027831(010000)</cell>
         <cell num="4">800015002</cell>
      </row>
   </sheet>
</table> 
```

在这种情况下也是如此：

```
<cell num="4">800015001</cell>
<LineNum>1</LineNum>
<cell num="4">800015001</cell>
<LineNum>2</LineNum>

<!-- cell num="4" different from previous, start LineNum from 1 -->
<cell num="4">800015002</cell>
<LineNum>1</LineNum>
<cell num="4">800015002</cell>
<LineNum>2</LineNum>
<cell num="4">800015002</cell>
<LineNum>3</LineNum> 
```

我可以添加全局变量，将单元格 num="4" 分配给它，然后检查当前值是否与全局变量相同，如果不是 - 再次从 1 开始 LineNum 并重新分配全局变量。遗憾的是 XSLT 不提供重新分配。

我能做些什么？

**UPD：** 试图以某种方式修改其他问题[XSL: Counting Previous Unique Siblings](https://stackoverflow.com/questions/941662/xsl-counting-previous-unique-siblings)中的示例，但没有运气..

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="text"/>

  <!-- don't copy whitespace -->
  <xsl:template match="text()"/>

  <xsl:template match="row/cell[@num=4]">
    <xsl:variable name="roles-so-far" select=". | preceding::row/cell[@num=4]"/>
    <xsl:value-of select="count($roles-so-far)"/>
    <xsl:value-of select="' '"/>
    <xsl:value-of select="."/>

    <!-- Only select the first instance of each ROLE name -->
    <xsl:variable name="roles-so-far-unique"
                  select="$roles-so-far[not(. = preceding-sibling::row/cell[@num=4])]"/>

    <xsl:apply-templates select="/"/>
    <xsl:text> </xsl:text>
    <xsl:value-of select="count($roles-so-far-unique)"/>
    <xsl:text>&#xA;</xsl:text> <!-- linefeed -->

  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:55:44.360

将问题标记为 xslt-2.0 后，您可以轻松使用`for-each-group group-adjacent`：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes="xs"
  version="2.0">

<xsl:output indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* , node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="sheet">
  <xsl:copy>
    <xsl:for-each-group select="row" group-adjacent="cell[@num = 4]">
      <xsl:apply-templates select="current-group()"/>
    </xsl:for-each-group>
  </xsl:copy>
</xsl:template>

<xsl:template match="row">
  <xsl:copy>
    <xsl:apply-templates select="@* , node()"/>
    <LineNum><xsl:value-of select="position()"/></LineNum>
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

当我将上面的 Saxon 9.4 代码应用于您的输入示例时，我得到以下结果：

```
<table>
   <sheet>
      <row num="1">
         <cell num="1">IBD</cell>
         <cell num="2">YES</cell>
         <cell num="3">6600027830(010000)</cell>
         <cell num="4">800015001</cell>
         <LineNum>1</LineNum>
      </row>
      <row num="2">
         <cell num="1">IBD</cell>
         <cell num="2">YES</cell>
         <cell num="3">6600027830(010000)</cell>
         <cell num="4">800015001</cell>
         <LineNum>2</LineNum>
      </row>
      <row num="3">
         <cell num="1">IBD</cell>
         <cell num="2">YES</cell>
         <cell num="3">6600027831(010000)</cell>
         <cell num="4">800015002</cell>
         <LineNum>1</LineNum>
      </row>
      <row num="4">
         <cell num="1">IBD</cell>
         <cell num="2">YES</cell>
         <cell num="3">6600027831(010000)</cell>
         <cell num="4">800015002</cell>
         <LineNum>2</LineNum>
      </row>
      <row num="5">
         <cell num="1">IBD</cell>
         <cell num="2">YES</cell>
         <cell num="3">6600027831(010000)</cell>
         <cell num="4">800015002</cell>
         <LineNum>3</LineNum>
      </row>
   </sheet>
</table> 
```

# c# - 在 C# 中不使用 String.Split 反转句子的单词

> ID：14017886
> 
> 赞同：1
> 
> 时间：2012-12-24T06:30:53.677
> 
> 标签：c#, .net, string, algorithm

最近我在一次讨论中被要求编写一个算法来实现一个句子的单词反转（不是整个句子的反转），而不使用除 ToCharArray 和 Length 之外的 Split/Replace/Reverse/Join 等字符串操作。以下是我可以在 5 分钟内设计的内容。尽管该算法运行良好，但它的实现方式似乎有点难看。有人可以通过完善代码来帮助我吗？

```
string ReverseWords(string s)
{
    string reverseString = string.Empty;
    string word = string.Empty;

    var chars = s.ToCharArray();
    List<ArrayList> words = new List<ArrayList>();
    ArrayList addedChars = new ArrayList();
    Char[] reversedChars = new Char[chars.Length];
    int i = 1;
    foreach (char c in chars)
    {
        if (c != ' ')
        {
            addedChars.Add(c);
        }
        else
        {
            words.Add(new ArrayList(addedChars));
            addedChars.Clear();
        }
        if (i == s.Length)
        {
            words.Add(new ArrayList(addedChars));
            addedChars.Clear();
        }
        i++;
    }
    foreach (ArrayList a in words)
    {
        for (int counter = a.Count - 1; counter >= 0; counter--)
        {
            reverseString += a[counter];
        }
        if(reverseString.Length < s.Length)
            reverseString += " ";
    }
    return reverseString;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T06:46:14.363

有一个相对*优雅的***解决方案，它使用 LIFO 堆栈**。
然而，问题听起来像家庭作业，所以我只会提供伪代码。

```
currWord = new LIFO stack of characters
while (! end of string/array)
{
  c = next character in string/array
  if (c == some_white_space_character) {
     while (currWord not empty) {
       c2 = currWord.pop()
       print(c2)
     }
     print(c)
  }
  else
    currWord.push(c)
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-24T06:59:53.150

这有点简单：

```
string inp = "hai how are you?";
StringBuilder strb = new StringBuilder();
List<char> charlist = new List<char>();
for (int c = 0; c < inp.Length; c++ )
{

    if (inp[c] == ' ' || c == inp.Length - 1)
    {
        if (c == inp.Length - 1)
            charlist.Add(inp[c]);
        for (int i = charlist.Count - 1; i >= 0; i--)
            strb.Append(charlist[i]);

        strb.Append(' ');
        charlist = new List<char>();
    }
    else
        charlist.Add(inp[c]);
}
string output = strb.ToString(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T17:43:52.617

一种抛光版本：-

```
string words = "hi! how are you!";
string reversedWords = "";

List<int> spaceEncounter = new List<int>();
spaceEncounter.Add(words.Length - 1);

for (int i = words.Length - 1; i > 0; i--)
{ 
    if(words[i].Equals(' '))
    {
        spaceEncounter.Add(i);

        for (int j = i+1; j < spaceEncounter[spaceEncounter.Count - 2]; j++)
            reversedWords += words[j];

        reversedWords += " ";
    }
}

for (int i = 0; i < spaceEncounter[spaceEncounter.Count - 1]; i++)
    reversedWords += words[i]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-29T23:04:23.320

您的代码中有一个小错误。`yo are how hi!`因此，在给定输入字符串的情况下，输出字符串将显示为`hi! how are you`。它正在截断最后一个单词的最后一个字符。

改变这个：

```
spaceEncounter.Add(words.Length - 1); 
```

至：

```
spaceEncounter.Add(words.Length); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-01T11:57:57.780

最简单的答案之一如下所示，请仔细阅读，

```
public static string ReversewordString(string Name)
    {
        string output="";
        char[] str = Name.ToCharArray();
        for (int i = str.Length - 1; i >= 0; i--)
        {
            if (str[i] == ' ')
            {
                output = output + " ";
                for (int j = i + 1; j < str.Length; j++)
                {
                    if (str[j] == ' ')
                    {
                        break;
                    }
                    output=output+ str[j];
                }
            }
            if (i == 0)
            {
                output = output +" ";
                int k = 0;
                do
                {
                    output = output + str[k];
                    k++;
                } while (str[k] != ' ');
            }
        }
        return output;
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-23T22:38:31.677

好吧，你没有说任何关于其他 LINQ 扩展方法的事情 :)

```
static string ReverseWordsWithoutSplit(string input)
{
    var n = 0;
    var words = input.GroupBy(curr => curr == ' ' ? n++ : n);

    return words.Reverse().Aggregate("", (total, curr) => total + string.Concat(curr.TakeWhile(c => c != ' ')) + ' ');
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-01T00:11:21.730

```
 string temp = string.Empty;
        string reversedString = string.Empty;

        foreach (var currentCharacter in testSentence)
        {
            if (currentCharacter != ' ')
            {
                temp = temp + currentCharacter;
            }
            else
            {
                reversedString = temp + " " + reversedString;
                temp = string.Empty;
            }
        }
        reversedString = temp + " " + reversedString; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-11-28T11:06:11.393

一个简单的递归函数如何检查“”然后相应地子字符串？

```
 private static string rev(string inSent) { 
        if(inSent.IndexOf(" ") != -1) 
        { 
            int space = inSent.IndexOf(" "); 
            System.Text.StringBuilder st = new System.Text.StringBuilder(inSent.Substring(space+1)); 
            return rev(st.ToString()) + " " + inSent.Substring(0, space); 
        } 
        else 
        { 
            return inSent; 
        } 
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-23T21:21:36.960

这个版本就地工作，没有任何中间数据结构。首先，它反转每个单词中的字符。“我也是”=>“em oot”。然后它反转整个字符串：“em oot”=>“too me”。

```
 public static string ReverseWords(string s)
    {
        if (string.IsNullOrEmpty(s))
            return s;

        char[] chars = s.ToCharArray();
        int wordStartIndex = -1;

        for (int i = 0; i < chars.Length; i++)
        {
            if (!Char.IsWhiteSpace(chars[i]) && wordStartIndex < 0)
            {
                // Remember word start index
                wordStartIndex = i;
            }
            else
            if (wordStartIndex >= 0 && (i == chars.Length-1 || Char.IsWhiteSpace(chars[i + 1]))) {
                // End of word detected, reverse the chacacters in the word range
                ReverseRange(chars, wordStartIndex, i);

                // The current word is complete, reset the start index  
                wordStartIndex = -1;
            }
        }

        // Reverse all chars in the string
        ReverseRange(chars, 0, chars.Length - 1);

        return new string(chars);
    }

    // Helper
    private static void ReverseRange(char[] chars, int startIndex, int endIndex)
    {
        for(int i = 0; i <= (endIndex - startIndex) / 2; i++)
        {
            char tmp = chars[startIndex + i];
            chars[startIndex + i] = chars[endIndex - i];
            chars[endIndex - i] = tmp;
        }            
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-07-31T09:24:56.397

在 C# 中使用堆栈

```
string str = "ABCDEFG";
Stack<char> stack=new Stack<char>();
foreach (var c in str)
{
    stack.Push(c);
}
char[] chars=new char[stack.Count];
for (int i = 0; i < chars.Length; i++)
{
    chars[i]=stack.Pop();
}
var result=new string(chars); //GFEDCBA 
```

# jquery - jquery的javascript有没有办法调用不等变量？

> ID：14017888
> 
> 赞同：3
> 
> 时间：2012-12-24T06:31:16.237
> 
> 标签：jquery, javascript

似乎应该有一个简单的方法来做到这一点。我正在其他一些元素上切换类名，并将此更改与该操作联系起来。我有启动淡入的 i 变量集，但想淡出可能存在的其他编号 ID。有没有一种快速的方法来做到这一点，也许是一个符号，说要对不等于这个 i 变量的任何东西进行更改？或者在我开始淡入之前执行操作的通用数字符号？

```
$('#SiteDescriptions' + i).animate({opacity: "1"}, 500);
$('#SiteDescriptions' + !i).animate({opacity: "0"}, 500); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T06:37:00.923

不要使用 id 并依赖选择器。而是使用类：

```
 $SD = $('.SiteDescription'); // cache jquery object
 $SD.on('click',function(){
     // fade out all with this class
     $SD.stop().animate({opacity:0},500);
     // fade in new active element 
     $(this).stop().animate({opacity:1},500);
 }); 
```

如果您尝试选择除该 id 之外的任何内容，您将选择页面上不是它的每个元素。我不认为那是你想要的。

不要这样做，以课堂方式进行，但这更接近您的要求：

```
$('#SiteDescriptions'+i).animate({opacity : 1 },500)
 // I don't want to speculate on your dom structure, but if you are using id's
 // you still need a way to prevent from fading out everything on the page that
 // isn't the new action. So I am assuming that all the #SiteDescriptions are siblings
.siblings().not('#SiteDescriptions'+i).animate({opacity: 0}, 500); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T06:50:55.710

可以使用`startsWith`选择器和`not()`. 也`fadeIn`和与不透明度`fadeOut`相同`animate`

```
var site = $('#SiteDescriptions' + i).stop(true,true).fadeIn( 500);
$('div[id^="SiteDescriptions"]').not(site).stop(true,true).fadeOut(500) 
```

也不确定是什么触发了动画...`stop()`当您在同一元素上调用另一个动画时，如果有可能动画正在进行，请使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T06:49:28.297

我认为这就是你想要的：

```
$('#SiteDescriptions' + i).animate({opacity: "1"}, 500);
$('[id^=SiteDescriptions]').not($('#SiteDescriptions' +i)).animate({opacity: "0"}, 500); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T06:33:56.247

### 如果`i`是`boolean`，使用三元运算符

```
$('#SiteDescriptions' + i).animate({opacity: (i) ? "1" : "0" }, 500); 
```

# google-app-engine - 在谷歌应用引擎中存储表单数据

> ID：14017891
> 
> 赞同：-3
> 
> 时间：2012-12-24T06:31:24.230
> 
> 标签：google-app-engine

我正在尝试了解如何将我的表单数据存储在 Google 应用引擎中。我已经用html制作了表格。我现在应该怎么做才能存储表单中输入的所有数据？

一个例子或代码会很好理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T06:39:45.990

这是我的两个建议：

1.  您将不得不通过 AJAX 调用（[jQuery 链接](http://api.jquery.com/jQuery.ajax/)）将表单数据发送到您的 GAE 服务器。当您的服务器（即 Java servlet）接收到 HTTP 请求时，您可以执行所需的任何逻辑，然后将数据存储到数据存储中。我强烈建议您尝试一下[Objectify](http://code.google.com/p/objectify-appengine/)。它对所有技能水平的 GAE 开发人员都很有用，因为它能够直接持久化 Java 对象而不使用复杂的查询（即 SQL）。
2.  我建议您在客户端将表单转换为 JSON 字符串并将其发送过来，而不是直接将 HTML 表单提交到服务器。JSON 正在成为事实上的 Internet 数据传输格式。

# c++ - 它如何在内存中使用指针以及一般情况下工作？

> ID：14017892
> 
> 赞同：0
> 
> 时间：2012-12-24T06:31:24.340
> 
> 标签：c++, pointers, memory

假设我有一个指向**C++**中的 int 的指针。

```
int i = 1;
int* myInt = &i; 
```

在`myInt`中，我有内存位置的信息来获取实际的整数值。我想其中的信息`myInt`必须存储在内存中。

但是编译器怎么知道`myInt`内存在哪里呢？我想它必须将地址保存`myInt`在内存中。但是它把最后的信息保存在哪里呢？`Memoryinception`?

这更像是一个关于如何管理内存的一般问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T06:38:43.377

编译器知道 myInt 在哪里，因为它将它放在首位。在编译期间，一个称为[符号表](http://en.wikipedia.org/wiki/Symbol_table)的数据结构用于跟踪这些位置。编译代码只包含地址而不包含变量名（或[词法名称](http://en.wikipedia.org/wiki/Lexical_analysis)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T06:35:37.963

每个变量都有自己的内存地址，不管它包含什么。因此，当您存储一个指向整数的指针时，您只是存储了一个指向变量数据的地址。这个地址容器也有一个地址。您可以通过制作指向指针的指针并以您满意的方式显示它们来进行实验：

```
int i = 1;
int* pointer = &i;
cout << "address1:[" << &i << "] address2:[" << &pointer << "]\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T07:12:30.730

每个变量都有一个地址。

全局和静态变量相对于“加载器”放置在内存中的整个模块进行寻址。加载器读取“模块重定位表”，其中包含代码中应更正地址的位置，并更正这些位置。谷歌：也定位独立代码。

自动变量（在函数体中声明）相对于激活记录进行寻址。每次调用函数时，都会将激活记录压入堆栈，这是所有自动变量的“结构”。激活记录的地址存储在硬件寄存器中，用于寻址每个变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T07:18:01.050

包括指针在内的所有局部变量都存储在堆栈中。编译后的代码使用堆栈指针相对寻址来访问它们。因此，您的第一个变量将位于 0+sp，您的第二个变量位于第一个变量 + sp 的大小等处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T07:51:11.547

的实际地址`i`以及 的实际地址`myInt`直接嵌入到机器代码、访问的实际机器命令`i`和访问的实际机器命令中`myInt`。

这些最终地址不存储在数据存储器中。相反，它们直接嵌入到通过 CPU 的机器命令流中。它们被称为“立即操作数”。CPU 接收这些地址以及实际的机器命令，因此 CPU 不必从数据存储器中的其他位置检索它们。

所以这就是这个看似“无限”的递归停止的方式。这就是它触底的方式。

对于全局变量，确切的地址在编译时就知道了，并直接嵌入到机器命令中。对于局部变量，当前堆栈帧中的地址偏移量在编译时是已知的，并直接嵌入到机器命令中。

# c - 使用 TSC（时间戳计数器）计算时间

> ID：14017894
> 
> 赞同：5
> 
> 时间：2012-12-24T06:31:34.387
> 
> 标签：c, linux, performance, linux-kernel, multiprocessing

我正在尝试通过 Linux 内核模块以非常高的精度测量 Linux 内核中的某些代码所花费的时间。

为此，我尝试**了 rdtscl()**，它给出了代码中使用的时钟滴答数，如下所示：

```
unsigned long ini, end;
rdtscl(ini);
//some code...
rdtscl(end);
printk("time taken=%lu ticks",end-ini); 
```

正如我所提到的那样，[http](http://en.wikipedia.org/wiki/Time_Stamp_Counter) ://en.wikipedia.org/wiki/Time_Stamp_Counter说**TSC 是自 Pentium 以来所有 x86 处理器上都存在的 64 位寄存器**。那么，如果我有双核处理器，这个计数器会出现在两个内核中，还是只有一个，因为它只有一个处理器但双核？

第二个问题是：我有 Intel Xeon i3 处理器，它有 4 个处理器，每个处理器有 2 个内核。然后，测量时钟滴答声，将给出单个处理器的滴答声还是所有 4 个处理器的加法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T08:52:40.370

如果您没有时钟滴答，那么您的代码有严重问题。你是自己写的`rdtscl`[或从不是一个好的来源的地方复制它？]

顺便说一句，现代英特尔（和 AMD）处理器很可能具有“恒定 TSC”，因此停止、睡眠、运行速度较慢等的处理器仍会以与其他处理器相同的速度滴答作响 - 它可能不在仍然同步，但这是另一回事。

尝试只运行一个从计数器打印值的循环 - 只是 RDTSC 指令本身应该需要大约 30-50 个时钟周期，所以你应该看到它在移动。

编辑：这是我的 rdtsc 函数：

```
void rdtscl(unsigned long long *ll)
{
    unsigned int lo, hi;
    __asm__ __volatile__ ("rdtsc" : "=a"(lo), "=d"(hi));                        
    *ll = ( (unsigned long long)lo)|( ((unsigned long long)hi)<<32 );  
} 
```

或者，作为返回值的函数：

```
unsigned long long rdtscl(void)
{
    unsigned int lo, hi;
    __asm__ __volatile__ ("rdtsc" : "=a"(lo), "=d"(hi));                        
    return ( (unsigned long long)lo)|( ((unsigned long long)hi)<<32 );  
} 
```

我注意到您的代码没有传递 unsigned long 的指针，这让我怀疑您实际上并没有将时间戳计数器传递回调用者，而是只是保留它碰巧具有的任何值 - 这很可能是两个值相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T08:38:21.900

同一篇[WikiPedia](http://en.wikipedia.org/wiki/Time_Stamp_Counter)文章确实提到了 TSC 的问题，如下所示，

```
With the advent of multi-core/hyper-threaded CPUs, systems with multiple CPUs, and 
hibernating operating systems, the TSC cannot be relied on to provide accurate results 
— unless great care is taken to correct the possible flaws: rate of tick and whether 
all cores (processors) have identical values in their time-keeping registers. **There 
is no promise that the timestamp counters of multiple CPUs on a single motherboard will 
be synchronized**. In such cases, programmers can only get reliable results by locking 
their code to a single CPU. Even then, the CPU speed may change due to power-saving 
measures taken by the OS or BIOS, or the system may be hibernated and later resumed 
(resetting the time stamp counter). In those latter cases, to stay relevant, the 
counter must be recalibrated periodically (according to the time resolution your 
application requires). 
```

这意味着现代 CPU 可以更改其 CPU 时钟频率以节省可能影响 TSC 值的功率。此外，TSC 永远不会在诸如内核可能执行 HALT 并停止处理器直到接收到外部中断的情况下增加。

```
the second question is that i have intel xeon i3 processor which has 4 processors & 
each having 2 cores then measuring the clock ticks will give the ticks of single 
processor or addition of all 4 processors..? 
```

这可能会导致进程可以在一个处理器上读取时间，移动到第二个处理器并遇到比它在第一个处理器上读取的时间更早的时间，从而导致 TSC 成为不稳定的时间源。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T07:08:09.240

所有内核都有自己的 TSC；它基本上计算周期 - 但要注意 - TSC 时钟可能不同步！如果您的代码开始在一个核心上运行并迁移到第二个核心，这在一般情况下当然是可能的，那么您的计数将是错误的！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-28T22:53:41.863

这里提到的一些事情是准确的，例如由于 CPU 中的 S 状态，TSC 不是时间度量。但我认为即使在多核环境中，TSC 也可以用于相对排序。有一个名为 TSCInvariant 的标志在 Intel CPU >= nehalem arch 中设置为 true。在这些 CPU 中，TSC 在所有内核上以恒定速率变化。因此，如果您将上下文切换到不同的核心，您将永远不会返回 TSC 计数。

在 Ubuntu 中，您可以执行 sudo apt-get install cpuid

cpuid | grep TscInvariant 在您的桌面上验证它。

# macos - 使用 CGDisplayStream 捕获屏幕

> ID：14017895
> 
> 赞同：6
> 
> 时间：2012-12-24T06:31:37.213
> 
> 标签：macos, xcode4.5

我正在尝试在我的应用程序中实现一个将记录屏幕的功能。我在一些示例代码和 WWDC 2012 视频中找到了一些代码。

到目前为止，我有这个。

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {

    // Get a list of displays.  Copied from working apple source code.
    [self getDisplayList];

    DisplayRegistrationCallBackSuccessful = NO;

    // Register the event for modifying displays.
    CGError err =  CGDisplayRegisterReconfigurationCallback(DisplayRegisterReconfigurationCallback, NULL);
    if (err == kCGErrorSuccess) {
        DisplayRegistrationCallBackSuccessful = YES;
    }

    // Insert code here to initialize your application

    const void *keys[1] = { kCGDisplayStreamSourceRect };
    const void *values[1] = { CGRectCreateDictionaryRepresentation(CGRectMake(0, 0, 100, 100)) };
    CFDictionaryRef properties = CFDictionaryCreate(NULL, keys, values, 1, NULL, NULL);

    stream = CGDisplayStreamCreate(displays[0], 100, 100, '420f', properties,
                                                  ^(CGDisplayStreamFrameStatus status, uint64_t displayTime, IOSurfaceRef frameSurface, CGDisplayStreamUpdateRef updateRef) {
                                                      NSLog(@"Next Frame"); // This line is never called.
                                                  });

    runLoop = CGDisplayStreamGetRunLoopSource(stream);

    CGError err = CGDisplayStreamStart(stream); 
    if (err == CGDisplayNoErr) {
        NSLog(@"Works");
    } else {
        NSLog(@"Error: %d", err);
    }
} 
```

我遇到的问题是 DisplayStream 的回调块没有被调用。我没有收到任何错误或警告。有什么我遗漏的或者我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T05:11:42.237

`CGDisplayStreamCreateWithDispatchQueue`我通过使用和传递`dispatch_queue_create("queue for dispatch", NULL);`作为队列解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T04:11:48.773

对于它的价值，看起来你正在获取运行循环源，但没有将它添加到当前运行循环（CFRunLoopAddSource）

# c# - EntityType 'Movie_Category_Map' 没有定义键。定义此 EntityType 的键

> ID：14017898
> 
> 赞同：2
> 
> 时间：2012-12-24T06:31:52.740
> 
> 标签：c#, .net, entity-framework, entity-framework-5

请帮我解决这个问题。我已经坐了 2 天，发现不知道我在哪里做错了。我在下面看过这篇文章：

*   [EntityType 'MyProfile' 没有定义键。定义此 EntityType 的键](https://stackoverflow.com/questions/5306947/entitytype-myprofile-has-no-key-defined-define-the-key-for-this-entitytype)
*   [https://stackoverflow.com/questions/5011145/entity-framework-code-first-entitytype-has-no-key-define](https://stackoverflow.com/questions/5011145/entity-framework-code-first-entitytype-has-no-key-define)
*   [EntityType 'ApplicantPosition' 没有定义键](https://stackoverflow.com/questions/7764609/entitytype-applicantposition-has-no-key-defined)
*   [实体框架代码优先 - 定义此 EntityType 的键](https://stackoverflow.com/questions/5482670/entity-framework-code-first-define-the-key-for-this-entitytype)
*   [EntityType 'SelectListItem' 没有定义键](https://stackoverflow.com/questions/6691439/entitytype-selectlistitem-has-no-key-defined)

但我还没有解决我的问题，所以我终于问了这个。以下是我的完整课程，因此您可以复制该问题。

`Movie`实体

```
public class Movie
{
    public Movie()
    {
        this.MovieCategoryList = new List<Movie_Category>();
    }
    public string MovieID { get; set; }
    public string MovieName { get; set; }
    public Nullable<int> YearReleased { get; set; }
    public virtual ICollection<Movie_Category> MovieCategoryList { get; set; }
}

public class MovieMap : EntityTypeConfiguration<Movie>
{
    public MovieMap()
    {
        // Primary Key
        this.HasKey(p => p.MovieID);

        // Property
        this.Property(p => p.MovieID)
            .IsRequired()
            .HasMaxLength(15);

        this.Property(p => p.MovieName)
            .IsRequired()
            .HasMaxLength(50);

        this.Property(p => p.YearReleased)
            .IsOptional();

        // Table and Column Mappings
        this.ToTable("Movie");
        this.Property(p => p.MovieID).HasColumnName("MovieID");
        this.Property(p => p.MovieName).HasColumnName("MovieName");
        this.Property(p => p.YearReleased).HasColumnName("YearReleased");

        // Relationships
    } 
```

`Category`实体

```
public class Category
{
    public Category()
    {
        this.MovieCategoryList = new List<Movie_Category>();
    }
    public string CategoryID { get; set; }
    public string CategoryName { get; set; }
    public virtual ICollection<Movie_Category> MovieCategoryList { get; set; }
}

public class CategoryMap : EntityTypeConfiguration<Category>
{
    public CategoryMap()
    {
        // Primary Key
        this.HasKey(p => p.CategoryID);

        // Property
        this.Property(p => p.CategoryID)
            .IsRequired()
            .HasMaxLength(15);

        this.Property(p => p.CategoryName)
            .IsRequired()
            .HasMaxLength(30);

        // Mappings
        this.ToTable("Category");
        this.Property(p => p.CategoryID).HasColumnName("CategoryID");
        this.Property(p => p.CategoryName).HasColumnName("CategoryName");

    }
} 
```

和`Movie_Category`which 映射`Movie`到，`Category`因为它是一种`Many-to-Many`关系

```
public class Movie_Category
{
    public int MovieCategoryID { get; set; }
    public string MovieID { get; set; }
    public string CategoryID { get; set; }

    public virtual Movie Movie { get; set; }
    public virtual Category Category { get; set; }
}

public class Movie_Category_Map : EntityTypeConfiguration<Movie_Category>
{
    public Movie_Category_Map()
    {
        // Primary Key
        this.HasKey(p => p.MovieCategoryID);

        // Property
        this.Property(p => p.MovieCategoryID)
            .IsRequired()
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);

        this.Property(p => p.CategoryID)
            .IsRequired()
            .HasMaxLength(15);

        this.Property(p => p.MovieID)
            .IsRequired()
            .HasMaxLength(15);

        // Mappings
        this.ToTable("Movie_Category");
        this.Property(p => p.MovieCategoryID).HasColumnName("RecordID");
        this.Property(p => p.MovieID).HasColumnName("MovieID");
        this.Property(p => p.CategoryID).HasColumnName("CategoryID");

        // Relationship
        this.HasRequired(t => t.Category)
            .WithMany(t => t.MovieCategoryList)
            .HasForeignKey(p => p.CategoryID);

        this.HasRequired(t => t.Movie)
            .WithMany(t => t.MovieCategoryList)
            .HasForeignKey(p => p.MovieID);

    }
} 
```

`MovieShopContext`继承自`DbContext`

```
public class MovieShopContext : DbContext
{
    public DbSet<Movie> MovieList { get; set; }
    public DbSet<Category> CategoryList { get; set; }
    public DbSet<Movie_Category_Map> MovieCategory { get; set; }

    static MovieShopContext()
    {
        Database.SetInitializer<MovieShopContext>(null);
    }

    public MovieShopContext()
        : base(@"Data Source=Newbie;Initial Catalog=SampleDB;Integrated Security=True;")
    { }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        //modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();

        modelBuilder.Configurations.Add(new MovieMap());
        modelBuilder.Configurations.Add(new CategoryMap());
        modelBuilder.Configurations.Add(new Movie_Category_Map());
    }
} 
```

所以在我的`Data Access Layer`，我有这个代码：*我已经删除了 try-catch 块*

```
using (MovieShopContext _db = new MovieShopContext())
{
    Movie _movie = new Movie();
    _movie.MovieID = "M-1212-001";
    _movie.MovieName = "Book of Riddles";
    _movie.YearReleased = 2001;

    _db.MovieList.Add(_movie);  // stops here

    _db.SaveChanges();
    MessageBox.Show("Action Completed!", "Success", MessageBoxButtons.OK, MessageBoxIcon.Information);
} 
```

当我尝试运行代码时，它在线停止

```
_db.MovieList.Add(_movie); 
```

并抛出此异常消息，

> 在模型生成期间检测到一个或多个验证错误：
> 
> \tSystem.Data.Entity.Edm.EdmEntityType: : EntityType 'Movie_Category_Map' 没有定义键。定义此 EntityType 的键。
> 
> \tSystem.Data.Entity.Edm.EdmEntitySet: EntityType: EntitySet 'MovieCategory' 基于没有定义键的类型'Movie_Category_Map'。

据我所知，在`Movie_Category_Map`配置中，我已经设置了一个主键，

```
this.HasKey(p => p.MovieCategoryID); 
```

你能指出我哪里做错了吗？或者我在哪里失踪？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T06:40:41.053

```
public DbSet<Movie_Category_Map> MovieCategory { get; set; } 
```

这条线给你带来麻烦

这应该是

```
public DbSet<Movie_Category> MovieCategory { get; set; } 
```

您正在将 EntityTypeConfiguration 添加为实体，因此它正在为密钥大喊大叫（当然不存在）

# xaml - windows8中位图图像和字节数组之间的转换

> ID：14017900
> 
> 赞同：0
> 
> 时间：2012-12-24T06:32:01.010
> 
> 标签：xaml, windows-8, bytearray, bitmapimage, writeablebitmap

我编写下面的代码将图像转换为字节数组并稍后再转换回来，但它不起作用。任何人都可以帮忙吗？

```
FileOpenPicker picker = new FileOpenPicker();
        picker.ViewMode = PickerViewMode.Thumbnail;
        picker.SuggestedStartLocation = PickerLocationId.PicturesLibrary;
        picker.FileTypeFilter.Add(".jpg");
        picker.FileTypeFilter.Add(".png");
        StorageFile file = await picker.PickSingleFileAsync();
        byte[] pixeByte;
        using (IRandomAccessStream stream = await file.OpenReadAsync())
        {
            WriteableBitmap image = new WriteableBitmap(400, 250);
            image.SetSource(stream);
            testImage.Source = image;
            BitmapDecoder decoder = await BitmapDecoder.CreateAsync(stream);
            BitmapTransform transform = new BitmapTransform();
            transform.ScaledWidth = 400;
            transform.ScaledHeight = 250;
            PixelDataProvider pixeldata =await decoder.GetPixelDataAsync(BitmapPixelFormat.Bgra8, BitmapAlphaMode.Straight, transform, ExifOrientationMode.IgnoreExifOrientation, ColorManagementMode.DoNotColorManage);
            pixeByte = pixeldata.DetachPixelData();
        }

        using (InMemoryRandomAccessStream stream = new InMemoryRandomAccessStream())
        {
            BitmapImage image = new BitmapImage();
            await stream.WriteAsync(pixeByte.AsBuffer());
            stream.FlushAsync().AsTask().Wait();
            stream.Seek(0);
             image.SetSource(stream);
            testImage2.Source = image;
        } 
```

解决了：

```
public static async Task<byte[]> ImageToByteArrayAsync(StorageFile file)
    {
        using (IRandomAccessStream stream = await file.OpenReadAsync())
        {                
            using (DataReader reader = new DataReader(stream.GetInputStreamAt(0)))
            {
                await reader.LoadAsync((uint)stream.Size);
                byte[] pixeByte = new byte[stream.Size];
                reader.ReadBytes(pixeByte);
                return pixeByte;
            }
        }
    }

    // Convert a byte array to BitmapImage
    public static async Task<BitmapImage> ByteArrayToImageAsync(byte[] pixeByte)
    {
        using (InMemoryRandomAccessStream stream = new InMemoryRandomAccessStream())
        {
            BitmapImage image = new BitmapImage();
            await stream.WriteAsync(pixeByte.AsBuffer());
            stream.Seek(0);
            image.SetSource(stream);
            return image;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:26:37.873

我已经提取了用于将流转换为字节数组的部分：-

```
public async Task<byte[]> ImageToBytes(IRandomAccessStream sourceStream)
{
    byte[] imageArray;

    BitmapDecoder decoder = await BitmapDecoder.CreateAsync(sourceStream);

    var transform = new BitmapTransform { ScaledWidth = decoder.PixelWidth, ScaledHeight = decoder.PixelHeight};
    PixelDataProvider pixelData = await decoder.GetPixelDataAsync(
        BitmapPixelFormat.Rgba8,
        BitmapAlphaMode.Straight,
        transform,
        ExifOrientationMode.RespectExifOrientation,
        ColorManagementMode.DoNotColorManage);

    using (var destinationStream = new InMemoryRandomAccessStream())
    {
        BitmapEncoder encoder = await BitmapEncoder.CreateAsync(BitmapEncoder.PngEncoderId, destinationStream);
        encoder.SetPixelData(BitmapPixelFormat.Rgba8, BitmapAlphaMode.Premultiplied, decoder.PixelWidth,
                                decoder.PixelHeight, 96, 96, pixelData.DetachPixelData());
        await encoder.FlushAsync();

        BitmapDecoder outputDecoder = await BitmapDecoder.CreateAsync(destinationStream);
        await destinationStream.FlushAsync();
        imageArray = (await outputDecoder.GetPixelDataAsync()).DetachPixelData();
    }
    return imageArray;
} 
```

试一试，看看它是否适合你。

# sass - Sass：创建一个“复杂”的 mixin 以在不同的媒体查询中使用

> ID：14017902
> 
> 赞同：1
> 
> 时间：2012-12-24T06:32:11.847
> 
> 标签：sass, mixins

我是 Sass 的新手，而且由于我不是程序员，所以对一些概念进行梳理对我来说有点困难，所以这就是我寻求帮助的原因。

这对 Sass 大师来说应该很容易。

我需要制作一个可以在不同媒体查询中使用的 mixin。这个 mixin 用于网站的主要导航。

`scss`看起来像这样：

```
/*Nav bar*/
a.menu-link { display:none; }       
.js nav[role=navigation] { max-height:0; }      
nav[role=navigation] ul { margin:0 0 0 -0.25em; border:none;
  & li { display:inline-block; margin:0 0.25em;
       & a { border:none; }
  }
} 
```

我正在设想像这样使用 mixin: `@include navBar`，但我不知道我是否过于简化它或什么。

任何帮助是极大的赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T17:45:42.133

对于您的代码块，这将是一种将其编写为 mixin 的方式：

```
@mixin navBar {
    a.menu-link { display:none; }

    .js & { max-height: 0; }

    ul { // note that the & isn't necessary here...
        margin: 0 0 0 -0.25em;
        border: none;

        li {
            display: inline-block;
            margin: 0 0.25em;
            a { border: none; }
        }
    }
}

nav[role=navigation] {
    @include navBar;
} 
```

如果您想自定义导航栏的外观，则必须编写重复的选择器（也许您希望在`li`s 上有边框或在悬停时使用特殊的 bg 颜色）。情况可能更糟，但你不会那样手工编写 CSS。

包含`nav[role=navigation]`在您的选择器中，该代码块对我来说看起来有点*过于*具体，因为我可能希望内联显示内容列表，但它不是导航元素的一部分（可能是标签云或列表类别）。

这是我自己的库中的一个 mixin，它只包含将列表转换为内联列表的最基本要素（当然，它也不必是列表，它可以是一个包含一堆`div`s 的容器，如果我想了）：

```
@mixin inline-menu($type: inline, $child: li) {
    @if $type == float {
        overflow: hidden;
    }

    > #{$child} {
        @if $type == float {
            float: left;
            //list-style: none;
        } @else {
            display: inline-block;
        }

        @content;

        a { white-space: nowrap }
    }
} 
```

我会这样调用它：

```
ul.drop-menu {
    margin: 0;
    padding: 0;

    a {
        color: red;
    }

    @include inline-menu {
        border: 1px solid red;
        > a {
            padding: .5em 1em;
            display: block;
        }

        &:hover > a {
            background: red;
            color: orange;
        }

        @include drop-menu {
            border: 1px solid;
            padding: 1em 1em 1em 2em;
            background: orange;
            color: red;
            margin: 0;
            left: -1px;
            z-index: 1;
        }
    }
} 
```

现在，这样做的好处是你不会得到很多（如果有的话）重复的选择器。如果您想为您`ul`的`ul`.

这是代码生成的 CSS：

```
ul.drop-menu {
  margin: 0;
  padding: 0;
}

ul.drop-menu a {
  color: red;
}

ul.drop-menu > li {
  display: inline-block;
  border: 1px solid red;
  position: relative;
}

ul.drop-menu > li > a {
  padding: .5em 1em;
  display: block;
}

ul.drop-menu > li:hover > a {
  background: red;
  color: orange;
}

ul.drop-menu > li ul {
  display: none;
}

ul.drop-menu > li:hover ul, ul.drop-menu > li.active ul {
  display: block;
  position: absolute;
  border: 1px solid;
  padding: 1em 1em 1em 2em;
  background: orange;
  color: red;
  margin: 0;
  left: -1px;
  z-index: 1;
}

ul.drop-menu > li a {
  white-space: nowrap;
} 
```

看不到重复的选择器。这个 mixin 背后的魔力是`@content`指令。花括号 ( `{}`) 之间的所有内容都包含在`@content`中，只需要在适当的地方调用即可。

# java - 通过选择微调器的关闭值禁用任何字段

> ID：14017905
> 
> 赞同：-2
> 
> 时间：2012-12-24T06:32:27.653
> 
> 标签：java, android

`EditText`是否可以通过选择微调器的任何特定值来禁用任何。如果是，那么如何？请指导我会感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T06:35:17.560

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int id, long arg3) {
                // TODO Auto-generated method stub
                if (id == mySlctNum)
                {
                    ediTxt.setEnabled(false);
                }
            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:35:44.497

是的，您可以在`setEnabled(false);`选择微调器的特定项目时将 editText 设置为，甚至您也可以通过 setVisibility(View.VISIBLE) 将 edittext 设置为不可见；和 setVisibility(View.GONE); . 如果您可以使用更多详细信息编辑您的问题，那么就有可能编辑我的答案。

# templates - Drupal 7在使用登录链接登录之前重定向用户？

> ID：14017912
> 
> 赞同：2
> 
> 时间：2012-12-24T06:33:07.417
> 
> 标签：templates, drupal-7

我创建了一个 Drupal 7 自定义登录页面并使用 user-login.tpl.php 模板文件更改了布局。一切都很顺利，直到我意识到大多数强制登录都重定向到 /user 而不是 /user/login 对于匿名用户。我不想修改 user.tpl.php 模板，因为这显然会改变我的个人资料页面的布局。

我搜索了一下，找到了一些 template.php 文件的代码，以检查用户是否已登录，如果没有则重定向到 user-login.tpl.php 文件。

```
<?php
function mytheme_preprocess_page(&$vars) {
  // Check to see that the user is not logged in and that we're on the correct page.
  if ($vars['user']->uid == 0 && arg(0) == 'user' && (arg(1) == '' || arg(1) ==    'login')) {
// Add a custom template-file.
array_unshift($vars['template_files'], 'page-login');
// Add body classes for easier css.
$vars['body_classes'] .= ' logged';
 }
}
?> 
```

显然去掉了 php 标签并将 Mytheme 更改为我的主题名称，它似乎仍然不起作用。我还删除了添加的身体类，但没有去。我认为这是添加的正文类的错误。

```
Warning: array_unshift() expects parameter 1 to be array, null given in framework_preprocess_page() (line 123 of /Applications/MAMP/htdocs/mysite/sites/all/themes/framework/template.php).
Notice: Undefined index: body_classes in framework_preprocess_page() (line 125 of /Applications/MAMP/htdocs/mysite/sites/all/themes/framework/template.php). 
```

如果被移除

```
Warning: array_unshift() expects parameter 1 to be array, null given in framework_preprocess_page() (line 123 of /Applications/MAMP/htdocs/mysite/sites/all/themes/framework/template.php). 
```

我也尝试了一个基本的重定向

```
<?php
function YOURTHEME_preprocess_page(&$vars) {
  // Check to see that the user is not logged in and that we're on the correct page.
 if ($vars['user']->uid == 0 && arg(0) == 'user' && (arg(1) == '' || arg(1) == 'login'))     {
drupal_goto("user/login");
  }
}
?> 
```

但该功能会挂起页面

页面未正确重定向

```
Firefox has detected that the server is redirecting the request for this address in a way that will never complete. 
```

此问题有时可能是由禁用或拒绝接受 cookie 引起的。

切换另一个页面的“用户/登录”路径有效，而不是 /login 路径。

有任何想法吗？我是一个 php 新手，所以简单的代码/解释是最好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T15:37:01.233

你有一个无限的重定向循环。当当前请求的页面是：yourwebsite.com/user/login时，您将**用户**重定向到页面：yourwebsite.com/user/login**这** 是由您的if语句引起的。

这部分`arg(0) == 'user' && (arg(1) == '' || arg(1) == 'login')`是对 URL yourwebsite.com/user/login 的**检查**。

我假设您想要解释为什么该语句总是返回 true。对于`arg()`函数的逻辑，它的工作方式如下：yourwebsite.com/arg **(0)/arg(1)/arg(2)**等等。

# javascript - 使用 Javascript 正则表达式

> ID：14017915
> 
> 赞同：0
> 
> 时间：2012-12-24T06:33:15.997
> 
> 标签：javascript, regex

我是 javascript 正则表达式的新手..

这是我的问题：

```
http://example/uploads/files/full/images/image.png 
```

我只想得到`uploads/files/full/images/image.png`

我如何使用正则表达式来做到这一点？

帮助任何人..谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T06:37:21.280

```
var someString = "http://example/uploads/files/full/images/image.png";
var path = someString.match(/https?:\/\/example\/(.+)$/)[1]; 
```

[http://jsfiddle.net/Squeegy/QwHsC/](http://jsfiddle.net/Squeegy/QwHsC/)

```
// matches http or https
https?

// matches :// since you have to escape slashes
:\/\/

// matches the domain name
example/

// captures the path all the way to the end of the string
(.+)$ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T06:43:18.083

如果您想在将来为此类事情使用更全面的库（即，而不是根据需要构建/请求特定的正则表达式），您可以查看以下内容：

[http://blog.stevenlevithan.com/archives/parseuri](http://blog.stevenlevithan.com/archives/parseuri)

在这种情况下，

```
parseUri("http://example/uploads/files/full/images/image.png").path 
```

会回来

```
uploads/files/full/images/image.png 
```

# jsp - 如何在多行数据库中显示内容一个字段值

> ID：14017917
> 
> 赞同：0
> 
> 时间：2012-12-24T06:33:26.680
> 
> 标签：jsp, struts2

我想在表格的一个字段的多行中显示值，并且分隔将添加任何特殊标记。当获得特殊标记时，迭代器将为新内容生成新行，依此类推，直到数据结束这是**为了jsp视图**

数据字段的值：

```
8/11/2011<\r\n> •  Bhopal-10 Years<br/> • Bhopal -09 Years<br/> 
```

想出去

```
 From 8/11/2011
• Bhopal-10 Years

• Bhopal -09 Years 
```

这个“db.div_info”有整个段落并且想在多行中显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:13:13.530

您可以在 Struts2 标签中调用 String`split`方法，例如在`<s:iterator>`标签中，并使用此模式拆分您的值`<br/>|<\r\n>`。

```
<s:iterator value="your_value.split('<br/>|<\r\n>')">
  <s:property/><br/>
</s:iterator> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:50:34.457

如果你想用 HTML 显示，那么在 JSP 中使用这种代码：

```
<%="8/11/2011"> // Replace the string by a dynamic variable you use.
<br/>
<ul>
    <li>Bhopal-10 Years</li>
    <li> Bhopal -09 Years</li>
</ul>. 
```

# jsp - JSP 和 Beans：放置类文件的位置

> ID：14017921
> 
> 赞同：0
> 
> 时间：2012-12-24T06:33:46.653
> 
> 标签：jsp, javabeans

我是 jsp 新手，有一个关于 jsp 和 bean 的问题。

我将以下 java 文件创建为 bean，对其进行编译并将 java 和类文件保存在*C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\jspfiles\WEB-INF\classes*文件夹中：

```
package test;

public class Hello
{
private String str;

    public void setStr (String value)
    {
        str = value;
    }

    public String getStr ()
    {
        return str;
    }
} 
```

我的 jsp 文件 test.jsp 包含以下代码，位于*C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\jspfiles*文件夹中。

```
<!DOCTYPE html>
<%@ page contentType="text/html;charset=windows-1252"%>

<jsp:useBean id="test" class="test.Hello" scope="session"/> 
```

当我打开 test.jsp 文件 (http://localhost:8082/jspfiles/test.jsp) 时，我收到此错误：

```
HTTP Status 500 - /test.jsp (line: 4, column: 0) The value for the useBean class attribute test.Hello is invalid.

type Exception report

message /test.jsp (line: 4, column: 0) The value for the useBean class attribute test.Hello is invalid.

description The server encountered an internal error that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: /test.jsp (line: 4, column: 0) The value for the useBean class attribute test.Hello is invalid.
    org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:42)
    org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:408)
    org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:149)
    org.apache.jasper.compiler.Generator$GenerateVisitor.visit(Generator.java:1234)
    org.apache.jasper.compiler.Node$UseBean.accept(Node.java:1182)
    org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2376)
    org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2428)
    org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2434)
    org.apache.jasper.compiler.Node$Root.accept(Node.java:475)
    org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2376)
    org.apache.jasper.compiler.Generator.generate(Generator.java:3490)
    org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:250)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:373)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
    org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)

note The full stack trace of the root cause is available in the Apache Tomcat/7.0.34 logs. 
```

上面有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:42:22.167

你有一个`test`很好的包。您的类文件应位于与包结构匹配的目录中。在这种情况下，在 call 下创建一个目录`classes`并将`test`其放置`Hello.class`在其中。

```
WEB-INF/classes/test/Hello.class 
```

# android - 发送十六进制代码到蓝牙

> ID：14017924
> 
> 赞同：1
> 
> 时间：2012-12-24T06:34:08.403
> 
> 标签：android, bluetooth, arduino

我有 0x38、0x39、0xC0 和 0xE8 之类的十六进制代码，我想将这个十六进制代码原样发送到蓝牙，无需转换为十六进制或整数。我使用此代码在我的应用程序中发送（蓝牙活动）：

```
 byte[] hex_txt = {(byte)0x38, (byte)0x39, (byte)0xC0, (byte)0xE8};
     OutputStream outStream;
     try {
    outStream = socket.getOutputStream();
        outStream.write(hex_txt);
        System.out.println("byte sent: " + hex_txt);
         } 
```

当我将此代码发送到蓝牙时，它会进一步发送到 Arduino 板，它必须匹配这些十六进制代码并执行一些操作。我的 arduino 代码是：

```
 if(Serial.available()>3)
    {

          if(Serial.read()==0x38 && Serial.read()==0x39)
          code=Serial.read()+Serial.read()*256;
          irsend.sendCode(code,16);
          Serial.println("code sent is");
          Serial.println(code,DEC);
   } 
```

这个 Arduino 代码没有问题，但是从我的应用程序发送到蓝牙的内容可能是错误的......所以它不匹配。我需要以什么类型发送这些十六进制代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:53:14.947

`-64`十进制可能是`0xC0`（参见[http://en.wikipedia.org/wiki/Signed_number_representations](http://en.wikipedia.org/wiki/Signed_number_representations)）的表示。我不喜欢 Arduino 代码，但我建议您确保返回的值`Serial.read()`被解释为无符号整数/字节。这将使您手动解释带符号的位表示和数字输出。

# python - matplotlib 在颤动图中改变范围

> ID：14017926
> 
> 赞同：3
> 
> 时间：2012-12-24T06:34:45.980
> 
> 标签：python, matplotlib

我有一个显示云的 imshow 图和一个显示云运动矢量的叠加颤动图。该图现在以像素为单位显示，但我想以千米为单位显示，即云场景的大小。我可以在 imshow 中更改范围，但颤动图不再适合。

你有什么建议吗？任何帮助，将不胜感激！

圣诞节快乐

这是我的代码：

```
# size I want to be shown in the plot (in kilometer)
size = 9.750

# -> extent[0, size, 0, size]

# arrays used in plot (pixel size)

im_current = np.array((275,275))  
xdis_mean = np.array((275,275))
ydis_mean = np.array((275,275))

# settings for the quiver plot

sliceNr=20  # every x pixel will be shown
sy,sx =np.shape(im_current) 
x=np.arange(sx)[::sliceNr]
y=np.arange(sy)[::sliceNr]

# colormap for the quiver plot
M = sqrt(pow(xdis_mean[::sliceNr,::sliceNr], 2) + pow(ydis_mean[::sliceNr,::sliceNr], 2))

fig=plt.figure()

ax=fig.add_subplot(111)
cax=ax.imshow(im_current,origin='lower', cmap=cmap,vmin=0,vmax=1,norm=norm)

setp(plt.Axes.get_xticklabels(plt.gca()), fontsize=10)
setp(plt.Axes.get_yticklabels(plt.gca()), fontsize=10)

title('image at t=0 \n with mean displacement vector field')

xlabel('area size [pixel]',fontsize=9)
ylabel('area size [pixel]',fontsize=9)

# get axes from subplot to adjust colorbar to these axes
divider = make_axes_locatable(plt.gca())
cax1 = divider.append_axes("right", "5%", pad="4%")

cbar1=plt.colorbar(cax,cax=cax1,cmap=cmap,boundaries=bounds,ticks=[0,1],use_gridspec=True)
cbar1.ax.set_yticklabels(['0','1'],fontsize=10)

v=ax.quiver(x,y,xdis_mean[::sliceNr,::sliceNr],ydis_mean[::sliceNr,::sliceNr],M, units='xy',angles='xy',scale=1,scale_units='xy',cmap='autumn')

cax2 = divider.append_axes("bottom", "5%", pad="9%")
cbar2=plt.colorbar(v,cax=cax2,orientation='horizontal',use_gridspec=True)
for t in cbar2.ax.get_xticklabels():
    t.set_fontsize(10)

plt.tight_layout()

show() 
```

为了说明这一点，下图： ![在此处输入图像描述](../Images/40cd5118ac556b009f3edbc9356a50d6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T17:07:48.353

有两种方法可以做到这一点：您可以重新缩放箭袋的 (x,y) 数据，或者设置标签格式化程序。

选项 A 是这样的：

```
x,y = x*km_per_pixel + km_offset_x, y*km_per_pixel + km_offset_y
im = ax.imshow(...,exent=lims_in_km)
q = ax.quiver(x,y,...) 
```

选项 B 是这样的：

```
q = ax.quiver(..)
im = ax.imshow(...) # exactly like you had before
ax.get_xaxis().set_major_formatter(
    matplotlib.ticker.FuncFormatter(
        lambda x,i: '%.2f' % (x * km_per_pixel + km_offset_x)))
ax.get_yaxis().set_major_formatter(
    matplotlib.ticker.FuncFormatter(
        lambda x,i: '%.2f' % (x * km_per_pixel + km_ofset_y))) 
```

您应该将格式化字符串调整为您喜欢的任何内容。如果您想更好地控制刻度线的位置，请查看*s*`Locator` . （所有这些类的文档都在[这里](http://matplotlib.org/api/ticker_api.html)）

# javascript - 将 flash 参数 AllowScriptAccess 设置为 'sameDomain' 而不是 'always'

> ID：14017933
> 
> 赞同：1
> 
> 时间：2012-12-24T06:35:27.343
> 
> 标签：javascript, primefaces

我在我的 Web 应用程序中使用了 prime faces jar。主要面孔 jar 包含`utility.js`文件。我需要在文件中设置 flash 参数`AllowScriptAccess`值。我对手动编辑 jar 文件不感兴趣。`'sameDomain'``'always'``utility.js`

这是一个具有挑战性的。有人对此有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:57:06.247

尝试将该实用程序*.js*文件的修改副本放在您的资源文件夹中并使用加载它`<f:facet name="last">`，这样您的文件副本应该最终加载并覆盖 jar 中的 js 文件

```
<f:facet name="last">
     <!-- load css, js or others -->
</f:facet> 
```

看看[PrimeFaces 中的这个 Resource ordering](http://www.mkyong.com/jsf2/primefaces/resource-ordering-in-primefaces/)

# android - 在android中的SQLite中获取一行的ID

> ID：14017934
> 
> 赞同：0
> 
> 时间：2012-12-24T06:35:29.990
> 
> 标签：android, sqlite

在我的应用程序中，我想获取特定行的 id。我正在使用以下代码：

```
public String getid(String  heading) throws SQLException
    {
        System.out.println("ddbpos="+heading);
        long recc=0;
        String rec=null;
        Cursor mCursor = db.rawQuery(
                 "SELECT id  FROM  savedstoriestable WHERE heading="+heading , null);
    if (mCursor != null) 
    {
    mCursor.moveToFirst();
    recc=mCursor.getLong(0);
    rec=String.valueOf(recc);
    }
    return rec;
    } 
```

我的数据库如下所示：

```
id      heading                                              Description                                    
1       Congress countdown for 2014 polls:                   ghdfsfdghsdjfsdfhds
        Possibility of UPA-III hinges on how other 
```

但它显示“ `Force to close`”错误：

我的Logcat如下：

```
12-24 12:02:10.733: E/AndroidRuntime(22030): Uncaught handler: thread main exiting due to uncaught exception
12-24 12:02:10.804: E/AndroidRuntime(22030): android.database.sqlite.SQLiteException: near "countdown": syntax error: , while compiling: SELECT id  FROM  savedstoriestable WHERE heading=Congress countdown for 2014 polls: Possibility of UPA-III hinges on how other parties fare
12-24 12:02:10.804: E/AndroidRuntime(22030):    at android.database.sqlite.SQLiteProgram.native_compile(Native Method)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at android.database.sqlite.SQLiteProgram.compile(SQLiteProgram.java:110)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:59)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:49)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:49)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1221)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1194)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at com.newspaper.DBadapter.getid(DBadapter.java:104)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at com.newspaper.SavedStoriesActivity.onOptionsItemSelected(SavedStoriesActivity.java:72)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at android.app.Activity.onMenuItemSelected(Activity.java:2170)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:730)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:139)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:855)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at com.android.internal.view.menu.IconMenuView.invokeItem(IconMenuView.java:525)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at com.android.internal.view.menu.IconMenuItemView.performClick(IconMenuItemView.java:122)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at android.view.View.onTouchEvent(View.java:4179)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at android.widget.TextView.onTouchEvent(TextView.java:6541)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at android.view.View.dispatchTouchEvent(View.java:3709)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at android.os.Looper.loop(Looper.java:123)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at android.app.ActivityThread.main(ActivityThread.java:4363)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at java.lang.reflect.Method.invokeNative(Native Method)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at java.lang.reflect.Method.invoke(Method.java:521)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
12-24 12:02:10.804: E/AndroidRuntime(22030):    at dalvik.system.NativeStart.main(Native Method) 
```

帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T06:37:39.917

试试这个：

```
Cursor mCursor = db.rawQuery(
                 "SELECT id  FROM  savedstoriestable WHERE heading= '"+heading+"'" , null); 
```

标题是一个字符串。所以你必须把它放在''里面。

# ruby-on-rails - 为什么我的嵌套表单不能正确提交数据？

> ID：14017938
> 
> 赞同：0
> 
> 时间：2012-12-24T06:35:42.820
> 
> 标签：ruby-on-rails, ruby-on-rails-3

Community has_many CommunityTopics
当我访问 example.com/shop/WALMART/topic/new
并在提交后创建新记录时，它显示 CommunityTopics 的形式。
但是我输入的所有数据都不会被保存，它们都变成了空的:(

我的代码是

**路线.rb**

```
resources :communities, :path => "shop", do
    resources :community_topics, :path => "topic", :as => :'topic'
end 
```

**模型/社区.rb**

```
def to_param
  "#{community_name}"
end 
```

**community_topics_controller.rb #new**

```
 def new
    @community = Community.find_by_community_name(params[:community_id]) 
    @community_topic = @community.community_topics.build 
    @community_topic.user_id = current_user.id 

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @community_topic }
    end
  end 
```

**community_topics_controller.rb #create**

```
 def create
    @community = Community.find_by_community_name(params[:community_id]) 
    @community_topic = @community.community_topics.build (params[:id]) 

    respond_to do |format|
      if @community_topic.save
        format.html { redirect_to community_topic_path(@community.community_name, @community_topic), notice: 'Community topic was successfully created.' }
        format.json { render json: [@community, @community_topic], status: :created, location: @community_topic }
      else
        format.html { render action: "new" }
        format.json { render json: @community_topic.errors, status: :unprocessable_entity }
      end
    end
  end 
```

**意见/community_topics/_form.html.erb**

```
<%= form_for :community_topic, url: community_topic_index_url, :html => { :class => 'form-horizontal' } do |f| %>
  <div class="control-group">
    <%= f.label :community_id, :class => 'control-label' %>
    <div class="controls">
      <%= f.number_field :community_id, :class => 'number_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :user_id, :class => 'control-label' %>
    <div class="controls">
      <%= f.number_field :user_id, :class => 'number_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :title, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :title, :class => 'text_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :body, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_area :body, :class => 'text_area' %>
    </div>
  </div>

  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                community_topic_index_path, :class => 'btn' %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:42:30.390

看这条线

```
@community_topic = @community.community_topics.build (params[:id]) 
```

你传递了错误的参数。应该

```
params[:community_topic] :) 
```

# list - 如何将元素移动到groovy中List的第一个位置

> ID：14017941
> 
> 赞同：6
> 
> 时间：2012-12-24T06:36:32.393
> 
> 标签：list, groovy

我如何重新排序列表说：

```
['apple', 'banana', 'orange'] 
```

如果用户选择香蕉，列表变为

```
['banana', 'apple', 'orange'] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-12T12:29:07.980

另一种方法：

```
def list = ['apple', 'banana', 'orange']
// get a reference to the selection (banana)
def pick = list.find { it == 'banana' }
// remove selection from the the list
def newList = list.minus(pick)
// add selection back at the beginning
newList.add(0, pick) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-12-03T23:23:48.900

拆分为两个列表并重新组合 - 很容易概括为非字符串列表：

```
List<String> moveToStart(List<String> original, String input) {
  original.split {it.equals(input)}.flatten()
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-24T07:36:22.863

```
List pickToFirst(List list, int n) {
    return list[n,0..n-1,n+1..list.size()-1]
} 
```

在你的情况下，

```
 def list = ['apple', 'banana', 'orange']
    def newList = pickToFirst(list, 1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-18T11:59:50.000

从 2022 年的未来一年开始回答，因为我必须查一下；使用 + 和 -。

```
arr = ["lol", "rofl", "omg"]
selected = "omg"
println([selected] + (arr - selected)) 
```

# objective-c - 支持 iOS 4.2 及更高版本

> ID：14017942
> 
> 赞同：0
> 
> 时间：2012-12-24T06:36:32.703
> 
> 标签：objective-c, ios

我想确保我编写的代码受 iOS 4.2 及更高版本的支持。

我该怎么做呢？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T06:48:51.667

将您的部署目标设置为 iOS 4.2 如果您使用 4.2 或之后不支持的 API，这将有助于 Xcode 标记任何错误或警告。此外，在构建应用程序时使用 4.2 模拟器。

最终，您需要在具有 iOS 4.2 的真实 iOS 设备上进行测试，才能 100% 确定它可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T06:50:17.797

您的代码很可能适用于较新的操作系统版本，但一种简单的方法是将部署目标设置为 iOS 4.2 或更高版本，然后在模拟器中运行。这很容易告诉你它是否可以在没有警告的情况下构建。

您可以在应用程序的构建设置中设置部署目标。希望这可以帮助。

# iphone - 旋转后视图高度发生变化

> ID：14017944
> 
> 赞同：-1
> 
> 时间：2012-12-24T06:36:54.100
> 
> 标签：iphone, objective-c

我的 webview 显示包含视频的网页。这个 webview 包含导航栏和状态栏。

问题是在以横向模式观看视频并返回 webview 后，视图高度发生了变化。并且当时没有任何 webview 方法被调用。

它在人像模式下工作正常。

以下是一些视图的屏幕截图：

* * *

## 观看视频前/观看视频后纵向旋转

![](../Images/1c27189ccc4ad113cd98c21d380168bc.png)

* * *

## 横向旋转观看视频后

![在此处输入图像描述](../Images/23efd942e815cf0963f874bdc65ffda8.png)

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:46:13.327

观看视频后尝试添加此行..

```
[[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationNone]; 
```

**更新：**

```
- (void)viewWillAppear:(BOOL)animated
{
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(update:) name:@"MPAVControllerPlaybackStateChangedNotification" object:nil];

        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(update:) name:@"MPMoviePlaybackStateInterrupted" object:nil];
} 
```

更新方法如下...

```
#pragma mark - 
#pragma mark NSNotification Action

- (void)update:(NSNotification *)n {
    NSLog(@">>>>>>>>>>>>>>>>>>   Str Key ===>>%@",[NSNotificationCenter defaultCenter]);

    NSLog(@"\n\n\n\n\n>>>>>>>>>>> Updateing  >> %@ >>>>>>>>\n\n",[n description]);

    if ([[[n userInfo]objectForKey:@"MPAVControllerNewStateParameter"] intValue] == 0) {
        NSLog(@">>>>>>  1111111111111111111111111111111111111");
    }
    /*
     >>>>>>>>>>> Updateing  >> NSConcreteNotification 0x9c85740 {name = MPAVControllerPlaybackStateChangedNotification; object = <MPAVController: 0x6770010>; userInfo = {
     MPAVControllerNewStateParameter = 1;
     MPAVControllerOldStateParameter = 2;
     }}>>>>>>>>
     */

    if ([[[n userInfo]objectForKey:@"MPAVControllerNewStateParameter"] intValue] == 1 && [[[n userInfo]objectForKey:@"MPAVControllerOldStateParameter"] intValue] == 2  ) {
        [[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationNone];
        //[[UIDevice currentDevice] setOrientation:UIInterfaceOrientationPortrait];
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:47:28.793

我设法修复它的方法非常简单，基本上是问题的核心：当您旋转视图并且 NavigationController 重新计算其新位置时，它认为它应该位于窗口顶部，因为状态栏是隐。之后显示状态栏和导航栏时，它们是重叠的。

解决这个问题的方法非常简单，只需保留一个 BOOL 来记住您的叠加层是显示还是隐藏，并在您的 ViewController 中实现 willRotateToInterfaceOrientation 和 willAnimateRotationToInterfaceOrientation 。

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    if (!isOverlayShowing)
    {
        [[UIApplication sharedApplication] setStatusBarHidden:NO];
    }
    [super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];
}

- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    if (!isOverlayShowing)
    {
        [[UIApplication sharedApplication] setStatusBarHidden:YES];
    }
    [super willAnimateRotationToInterfaceOrientation:toInterfaceOrientation duration:duration];
} 
```

通过在这两种方法中快速显示和隐藏 StatusBar，StatusBar 在 NavigationBar 重新计算其位置的确切时刻显示。我不知道这是否是解决此问题的最佳实施方式，但到目前为止，此方法有效并且不会在屏幕上产生任何闪烁并且非常流畅。

# pagination - 活动管理员中的面板分页

> ID：14017946
> 
> 赞同：12
> 
> 时间：2012-12-24T06:37:11.693
> 
> 标签：pagination, activeadmin, kaminari

我正在为管理面板使用活动管理员。在用户展示页面上，我需要展示他的朋友。我有两个模型用户和朋友。

我想在“与面板的友谊”即`user.friends`块中添加分页。

如何在一个面板上添加分页？这是我正在使用的代码。

```
show do
  attributes_table  do
    row("Photo") { |user| image_tag(user.facebook_photo_url) }
    rows :name, :sex,:city
  end

  panel 'Friendship with' do
    table_for user.friends do
      column "" do |friend|
        (link_to image_tag(friend.facebook_photo_url('small')), admin_friend_path(friend)) + " &nbsp; &nbsp; &nbsp; ".html_safe +  (link_to friend.name, admin_user_path(friend))
      end

    end
  end  

  active_admin_comments
end 
```

Friend 模型实际上是 Facebook 朋友，所以我不能在 User 模型上使用自引用连接（所以不要说使用一个模型而不是两个模型），并且我在同一页面上有一些其他面板。我需要确保每个面板都有自己的分页参数名称，这样它们就不会相互冲突。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-27T14:32:28.090

前段时间我写了这样的东西来为一页上的多个表添加分页。通过更改 paginated_collection 参数，您可以拥有多个表。

我希望这段代码可以提供帮助。

```
users = User.by_customer(customer.customer_id) #by_customer is scope
panel 'Users' do
  paginated_collection(users.page(params[:users_page]).per(15), param_name: 'users_page') do
    table_for(collection) do |cr|
      column(I18n.t("cr.start")) { |cr| I18n.l cr.start, format: :raw }
        #other columns...
     end
   end
 end 
```

# c# - 如何知道是否已建立连接

> ID：14017947
> 
> 赞同：0
> 
> 时间：2012-12-24T06:37:15.137
> 
> 标签：c#, sql, database, ado.net

我正在尝试使用 ado.net 使用 c# 访问和插入数据。我的计算机中安装了 sql 服务器，因此我觉得机器名称将是服务器名称。以下是我用来连接数据库的步骤。

```
private void dbButton_Click(object sender, EventArgs e)
    {
         connectionString = "Server = ITSL-SALT-33; Database = sampleADO; User Id = sa; Password = abcd;";
         try
         {
             SqlConnection conn = new SqlConnection(connectionString);
             conn.Open();
             MessageBox.Show("Successfully connected to the database.");
             insertButton.Enabled = true;
             loadButton.Enabled = true;

         }

         catch (Exception exc)
         {
             Console.WriteLine(exc.ToString());
             MessageBox.Show("Connection attempt failed");
         }
    } 
```

下面是插入按钮的代码：

```
private void insButton_Click(object sender, EventArgs e)
    {
       cmdString="INSERT INTO books (name,author,price) VALUES (@val1, @va2, @val3)";

        SqlCommand comm = new SqlCommand();

    comm.Connection = conn;
    comm.CommandText= cmdString;
    comm.Parameters.AddWithValue("@val1", txtBook.Text);
    comm.Parameters.AddWithValue("@val2", txtAuthor.Text);
    comm.Parameters.AddWithValue("@val3", txtPrice.Text);
    comm.Parameters.AddWithValue("@val3", txtComments.Text);
    try
    {
        MessageBox.Show(conn.DataSource);
        Console.WriteLine(comm.ExecuteNonQuery());
        Console.ReadLine();

    }
    catch(Exception exc)
    {
        MessageBox.Show("In Insert catch");

    }
} 
```

当我尝试插入数据时，它总是在消息框中显示“in insert catch”。我无法理解故障在哪里，或者我是否缺少任何步骤。我是使用数据库或 sql 的新手，只是想学习如何在 .net 中与数据库交互。请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:29:09.740

我认为有一个小错误只是将您`@va2`的`INSERT`查询更改为`@val2`它现在应该可以工作了..

`cmdString="INSERT INTO books (name,author,price) VALUES (@val1,` **@va2** ,`@val3)";`

# java - 如何处理 IntutTypeMismatchException 以再次从用户那里获得正确的输入而不重新运行程序？

> ID：14017950
> 
> 赞同：0
> 
> 时间：2012-12-24T06:37:20.523
> 
> 标签：java, input, exception-handling, java.util.scanner

我有这个程序代码。如果用户以字符串格式输入输入，例如“三”，我希望该程序显示错误消息并再次提示用户输入正确的输入，而无需重新运行程序。但是程序不再接受输入。

```
//Program to get radius form user & calculate area of circle.
import java.util.InputMismatchException;
import java.util.Scanner;

public class AreaOfCircle {
public static void main(String[] args) {
    final float PI=3.14f;
    double rad=0.0;
    Scanner input=new Scanner(System.in);
    while(true){
        try {
            System.out.println("Enter radius of circle: ");
            rad = input.nextDouble();
            break;
            } 
            catch (InputMismatchException e) {
                System.out.println("Please enter radius in proper  format");
            }
        }
    System.out.println("Area of circle is: "+(PI*rad*rad));
}

} 
```

输出是这样的。

```
Enter radius of circle: 
Three
Please enter radius in proper  format
Enter radius of circle: 
Please enter radius in proper  format
Enter radius of circle: 
Please enter radius in proper  format
Enter radius of circle: 
Please enter radius in proper  format
(infitely...) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:51:06.333

错误的输入仍在扫描仪中。尝试`input.nextLine()`在你的 catch 子句中做一个。

# java - Java Axis2 发生意外错误。407 需要代理身份验证

> ID：14017957
> 
> 赞同：2
> 
> 时间：2012-12-24T06:37:43.963
> 
> 标签：java, web-services

> WAB0135E 发生意外错误。407 需要代理身份验证

当我尝试从 Web 服务启动资源管理器启动我的 WSDL 时出现上述消息，但它无法访问 tomcat 服务器，尽管 java 应用程序类主要测试它工作正常但不在服务器上，该项目在我的家庭 eclipse 上工作，但在我的工作 eclipse 上没有；我包括了所有 jar、axis2、jdbc 等。就像 home 但给了我这个信息。**有一件事要提一下，我在工作时在我的 Eclipse 上设置了一个代理。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:23:12.113

实际上我在本地主机上工作所以我不需要**代理**我添加它来下载插件但是当我取消选中本地主机上的代理时它工作

`--window-->preferences-->networkconnections --localhost`

因为我只需要在 http

[链接 Network Connections eclipse如何配置](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.user/reference/ref-net-preferences.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:20:17.713

我的猜测是发生错误是因为您的互联网连接位于代理后面。Axis 文档的“网络配置”部分显示了如何配置客户端代理：[http](http://axis.apache.org/axis/java/client-side-axis.html) ://axis.apache.org/axis/java/client-side-axis.html 。尝试使用您的身份验证凭据对其进行配置

# java - EhCache：简单程序不起作用

> ID：14017961
> 
> 赞同：0
> 
> 时间：2012-12-24T06:37:59.963
> 
> 标签：java, caching, ehcache

我是 EhCache 的新手，正在实现分布式缓存服务。我正在尝试简单的程序，但无法解决错误。我能够将数据存储到缓存中，但无法检索它。

这是我为测试编写的两个简单程序。

```
 package com.db.tests;

import net.sf.ehcache.Cache;
import net.sf.ehcache.CacheManager;
import net.sf.ehcache.Element;

public class TestCachePut {

    public TestCachePut() {
        // TODO Auto-generated constructor stub
    }

    /**
     * @param args
     */
    public static void main(String[] args) {

        CacheManager cache= CacheManager.create("E:/ehcache-2.6.2/ehcache.xml");

        Cache caches = cache.getCache("cache1");

        Element element= new Element("testKey", "inserted to cache");
        caches.put(element);

        System.out.println("Put in to cache");

    }

} 
```

方案二：

```
 package com.db.tests;

import net.sf.ehcache.CacheManager;
import net.sf.ehcache.Element;

public class TestCacheGet {

    public TestCacheGet() {
        // TODO Auto-generated constructor stub
    }

    /**
     * @param args
     */

    public static void main(String[] args) {

        CacheManager caches =  CacheManager.getInstance();
        Element val = caches.getCache("cache1").get("testKey");
        System.out.println(" cache content: "+val.getValue());

    }

} 
```

我将 ehcache.xml 配置为`<cache name="cache1" maxEntriesLocalHeap="10000" maxEntriesLocalDisk="1000" eternal="false" diskSpoolBufferSizeMB="20" timeToIdleSeconds="3000" timeToLiveSeconds="6000" memoryStoreEvictionPolicy="LFU" transactionalMode="off"> <persistence strategy="localTempSwap"/> </cache>`

Teracotta 服务器已启动，并显示其正在运行。当我运行程序 1 时，它运行时没有任何错误。之后我跑了第二个，我得到了 NPE 错误，

```
 24 Dec, 2012 12:05:42 PM net.sf.ehcache.config.ConfigurationFactory parseConfiguration
WARNING: No configuration found. Configuring ehcache from ehcache-failsafe.xml  found in the classpath: jar:file:/E:/ehcache-2.6.2/lib/ehcache-core-2.6.2.jar!/ehcache-failsafe.xml
Exception in thread "main" java.lang.NullPointerException
    at com.db.tests.TestCacheGet.main(TestCacheGet.java:22) 
```

如果我在这两种情况下都指定了配置 xml，它会再次生成带有警告的 NPE：

```
4 Dec, 2012 12:22:34 PM net.sf.ehcache.DiskStorePathManager resolveAndLockIfNeeded
WARNING: diskStorePath 'E:\Users\SKRISH~1\AppData\Local\Temp' is already used by an existing CacheManager either in the same VM or in a different process.
The diskStore path for this CacheManager will be set to E:\Users\SKRISH~1\AppData\Local\Temp\ehcache_auto_created1315701513913502723diskstore.
To avoid this warning consider using the CacheManager factory methods to create a singleton CacheManager or specifying a separate ehcache configuration (ehcache.xml) for each CacheManager instance. 
```

我做错了什么？请输入一些信息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:43:35.230

还指定配置文件`TestCacheGet`：

```
CacheManager cacheManager =  CacheManager.create("E:/ehcache-2.6.2/ehcache.xml"); 
```

[编辑]

而且，`localTempSwap`策略是特定于 VM 的。尝试`localRestartable`指定`diskStore path`。（仅适用于企业版）

```
<ehcache>
<diskStore path="/Users/me/store/data"/>
<cache name="cache1" maxEntriesLocalHeap="10000" maxEntriesLocalDisk="1000" eternal="false" diskSpoolBufferSizeMB="20" timeToIdleSeconds="3000" timeToLiveSeconds="6000" memoryStoreEvictionPolicy="LFU" transactionalMode="off"> <persistence strategy="localRestartable" synchronousWrites="true"/> </cache>
</ehcache> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T13:15:30.687

看起来您想通过 Terracotta 分发（并在 JVM 重新启动时持续存在）您的缓存。在这种情况下，您必须通过在 ehcache.xml 中添加指向服务器的 TerracottaConfig 元素来分发缓存（与缓存处于同一级别）

```
<terracottaConfig url="localhost:9510" /> 
```

完成后，添加

```
<terracotta/> 
```

标记到您的缓存以使其分发。

希望有帮助！

# android - 获取用户名和密码时出错

> ID：14017964
> 
> 赞同：1
> 
> 时间：2012-12-24T06:38:24.433
> 
> 标签：android, gmail, accountmanager

尝试从客户经理处获取 Gmail 用户名和密码时，出现以下异常：

`java.lang.SecurityException: caller uid 10073`与验证者的 uid 不同

```
 AccountManager accountManager = AccountManager.get(mContex);
 Pattern emailPattern = Patterns.EMAIL_ADDRESS; // API level 8+
        Account[] accounts = AccountManager.get(mContex).getAccounts();
        for (Account account : accounts) {
            if (emailPattern.matcher(account.name).matches()) {
                String possibleEmail = account.name;                    
                String possiblePassword = accountManager.getPassword(account) ;                 
                System.out.println("User name :- "+possibleEmail);
                System.out.println("User Password :- "+possiblePassword);

            }

        } 
```

在 Manifest.xml 中添加了权限：

```
 <uses-permission android:name="android.permission.AUTHENTICATE_ACCOUNTS"></uses-permission>
  <uses-permission android:name="android.permission.GET_ACCOUNTS"></uses-permission>
  <uses-permission android:name="android.permission.MANAGE_ACCOUNTS"></uses-permission>
  <uses-permission android:name="android.permission.USE_CREDENTIALS"></uses-permission> 
  <uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

关于如何解决此异常的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:01:02.597

你不能。只有管​​理帐户的身份验证器才能访问存储的凭据（在本例中为 Google 身份验证器）。

有关如何使用 向身份验证器请求安全令牌的信息，请参阅[AccountManager](http://developer.android.com/reference/android/accounts/AccountManager.html)`getAuthToken()`，这将允许您登录帐户（但不会向您提供用户密码）。

> 许多服务器支持某种身份验证令牌的概念，它可用于对服务器的请求进行身份验证，而无需发送用户的实际密码。（身份验证令牌通常使用包含用户凭据的单独请求创建。）AccountManager 可以为应用程序生成身份验证令牌，因此应用程序不需要直接处理密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:16:24.377

如果您是从 github 下载的，请确保类中的 String ACCOUNT_TYPE 与您的身份验证器的 XML 定义中的常量相同。

在 file1.java

```
class AuthenticatorService extends Service {
public static final String ACCOUNT_TYPE = "com.joelapenna.foursquared"; 
```

在文件 1.xml 中

```
<account-authenticator xmlns:android="http://schemas.android.com/apk/res/android"
android:accountType="com.joelapenna.foursquared.account" ... /> 
```

删除 xml 文件中的“...”，这会导致字符串不匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T08:04:57.407

```
Account[] accounts = AccountManager.get(getApplicationContext())
                .getAccounts();

        for (Account account : accounts) {

            if (account.name.endsWith("gmail.com")) {

            String  email = account.name;

            }

        } 
```

# javascript - 按时间排序 JSON

> ID：14017969
> 
> 赞同：-1
> 
> 时间：2012-12-24T06:38:46.183
> 
> 标签：javascript, jquery, json, sorting

我有一个从 API 获取 JSON 的函数（使用 PHP 获取）。我不知道我会按`payload.time`. JSON 是随机顺序的，所以`.reverse()`没有任何好处。我想知道如何按时间顺序对以下 JSON 进行排序？

```
{
   "code":0,
   "payload":[
      {
         "time":1349661897,
         "packages":[
            "49381"
         ],
         "ign":"player1",
         "price":"15.99",
         "currency":"USD"
      },
      {
         "time":1354504024,
         "packages":[
            "33109"
         ],
         "ign":"player2",
         "price":"6.99",
         "currency":"USD"
      }
} 
```

这是我的 JS：

```
var Donors = function(api) {

   this.list = api;

   $.each(this.list.payload.slice(0, 25), function(i, donor) {
     var ign = donor.ign,
       price = donor.price,
       currency = donor.currency,
       el = '<li id="' + ign + '" class="player big" data-player="' + ign + '" title="'+ ign + ' // ' + price + ' ' + currency + '">☺&lt;/li>';
      if(price !== "-") $('#donors').append(el);

    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:04:52.777

您可以编写一个函数来对 JSON 数组进行排序：

```
function sortBy(jsonArray, key){
    if(jsonArray){
       var sortedArray = jsonArray.sort(function(left, right) { 
                         //array.sort is buit-in function
           var a = left[key];
           var b = right[key];
           if (a !== b) {
               if (a > b || a === void 0) return 1;
               if (a < b || b === void 0) return -1;
           }
           return 0;
      });
      return sortedArray;
    }
} 
```

调用此函数：

```
sortBy(payload, 'time') 
```

**注意：**代码片段未经测试。

# ajax - 更改事件在 selectOneMenu 中不起作用

> ID：14017975
> 
> 赞同：0
> 
> 时间：2012-12-24T06:39:25.673
> 
> 标签：ajax, jsf

我有 2 个下拉列表：国家和州。我想在更改国家列表的选择时重新加载州列表。我尝试了[如何在 selectOneMenu 中将值传递给侦听器](https://stackoverflow.com/questions/13244620/how-to-pass-value-into-listener-in-selectonemenu)。但是，我的代码中的更改事件不起作用。谁能帮助我？谢谢你。

![国家和州下拉菜单](../Images/545c975f4a7abc8cb9c905b54ee617b0.png)

```
<h:selectOneMenu id="ddlCountry" value="#{Bean.companyCountry}" >
    <f:selectItems value="#{Bean.countries}" var="country" itemValue="#{country.value}" itemLabel="#{country.name}" />
    <f:ajax event="change" listener="#{Bean.loadStates}" render="ddlState" execute="@this"/>
</h:selectOneMenu>

<h:selectOneMenu id="ddlState" value="#{Bean.companyState}">
    <f:selectItems value="#{Bean.states}" var="state" itemValue="#{state.value}" itemLabel="#{state.name}" />
</h:selectOneMenu> 
```

Java Bean 类[sscce](http://sscce.org/)

```
private ArrayList<State> states;
public ArrayList<State> getStates() {
    return states;
}
public void loadStates(AjaxBehaviorEvent event) {
    states = new ArrayList<State>();
    if(companyCountry.equals("USA")){
        states.add(new State("1","UT"));
        states.add(new State("2","WA"));
        states.add(new State("3","CA"));
    }
} 
```

* * *

jsf ajax 监听器仍然无法在我的项目中工作。所以我使用了 primefaces 标签，它可以解决我的问题。

```
<h:selectOneMenu id="ddlCountry" value="#{Bean.companyCountry}"  >
    <f:selectItems value="#{Bean.countries}" var="country" itemValue="#{country.value}" itemLabel="#{country.name}" />
    <p:ajax event="valueChange" update="ddlState" process="@this"/>
</h:selectOneMenu>

<h:selectOneMenu id="ddlState" value="#{Bean.companyState}">
    <f:selectItems value="#{Bean.states}" var="state" itemValue="#{state.value}" itemLabel="#{state.name}" />
</h:selectOneMenu> 
```

Java Bean 类[sscce](http://sscce.org/)

```
private ArrayList<State> states;
public ArrayList<State> getStates() {
    states = new ArrayList<State>();
    if(companyCountry.equals("USA")){
        states.add(new State("1","UT"));
        states.add(new State("2","WA"));
        states.add(new State("3","CA"));
    }
    else{
        states.clear();
    }
    return states;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:16:32.927

将您的 bean 范围从更改`@RequestScoped`为`@ViewScoped`

否则，在您调用该`listener`方法后，将创建一个新的 bean 实例，而您的另一个实例`h:selectOneMenu`将填充空值。

# iphone - iPhone - 两个不同的自定义单元格，具有不同的设计，在同一个 UITableViewController - 单元格保持初始大小

> ID：14017980
> 
> 赞同：1
> 
> 时间：2012-12-24T06:39:47.943
> 
> 标签：iphone, uitableview, tableview

我正在尝试使用两个不同的自定义单元格制作 UITableViewController。我看过很多帖子，最值得注意的是[this](https://stackoverflow.com/questions/1405688/2-different-types-of-custom-uitableviewcells-in-uitableview)，它建议使用两个不同的重用标识符。我正在这样做，我似乎仍然得到了第一个自定义单元格的大小。它没有显示第二个单元格的标签等，但大小似乎相同。数据显示不同，但单元格大小相同。

由于我不知道问题出在哪里，我可能会包含不必要的代码，所以我提前道歉。

这是我的 TableViewController 代码：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    // Return the number of rows in the section.
    //set equal to the information in the array
    return [jsonDataArray count];
}

- (void) addHeaderAndFooter
{
    UIView *v = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 1)];
    v.backgroundColor = [UIColor clearColor];
    //[self.tableView setTableHeaderView:v];
    [self.tableView setTableFooterView:v];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *SCellIdentifier = @"SCell";
    static NSString *PCellIdentifier = @"PCell";

    NSLog(@"%@",indexPath);
    NSLog(@"JSONDATAARRAY: %i", jsonDataArray.count);
    NSDictionary *jsoninfo = [jsonDataArray objectAtIndex:indexPath.row];
    if (indexPath.row == 0)
    {
        OBPromoCell *cell = nil;
        cell = [tableView dequeueReusableCellWithIdentifier:PCellIdentifier forIndexPath:indexPath];
        if (cell == nil) {
            cell = [[OBPromoCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:PCellIdentifier];
        }

        //get required keys from dictionary and assign to vairables
        NSString *title = [jsoninfo objectForKey:@"title"];
        NSString *subtitle = [jsoninfo objectForKey:@"subtitle"];
        NSURL *imageURL = [NSURL URLWithString:[jsoninfo objectForKey:@"image_URL"]];

        //download the images. This will most lilely need to be made asynchronous.... I don't think it is now.

        NSData *imgData = [NSData dataWithContentsOfURL:imageURL];
        UIImage *img = [[UIImage alloc] initWithData:imgData];

        //fill in text to cells
        cell.CustomCellTopLabel.text = title;
        cell.CustomCellBottomLabel.text = subtitle;
        cell.CellImageView.image = img;

        return cell;
    }

    else
    {
        OBStandardCell *cell = nil;
       cell = [tableView dequeueReusableCellWithIdentifier:SCellIdentifier forIndexPath:indexPath];
        if (cell == nil) {
            cell = [[OBStandardCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:SCellIdentifier];
        }   

        //get required keys from dictionary and assign to vairables
        NSString *title = [jsoninfo objectForKey:@"title"];
        NSString *subtitle = [jsoninfo objectForKey:@"subtitle"];
        NSURL *imageURL = [NSURL URLWithString:[jsoninfo objectForKey:@"series_image_URL"]];

        //download the images. This will most lilely need to be made asynchronous.... I don't think it is now.

        NSData *imgData = [NSData dataWithContentsOfURL:imageURL];
        UIImage *img = [[UIImage alloc] initWithData:imgData];

        //fill in text to cells
        cell.CustomCellTopLabel.text = title;
        cell.CustomCellBottomLabel.text = subtitle;
        cell.CellImageView.image = img;

        return cell;
    }
} 
```

这是我的故事板设置方式的图像以供参考。同样，它们确实有不同的重用标识符：

![故事板](../Images/443207fc64b5ffd10e6cada97d841bec.png)

感谢您的任何帮助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:57:40.930

几乎你已经完成了这些事情。问题与数据显示有关。

您需要实现 UITableView 的“heightForRowAtIndexPath”方法，并根据单元格显示设置高度。

```
Method:
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

希望它能解决你的问题。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:46:11.033

UITableView 有一个属性

```
@property(nonatomic) CGFloat rowHeight 
```

你可以设置它，但它会为你的表格中的所有行设置高度，

如果你想要不同的行高，你应该实现 UITableViewDelegate 这个方法

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

# iphone - ios 上的 Tumblr 集成

> ID：14017986
> 
> 赞同：3
> 
> 时间：2012-12-24T06:40:19.353
> 
> 标签：iphone, ipad, oauth, tumblr

我想在**tumblr**上分享我的照片，就像我们在 facebook 或 Twitter 上分享一样。为此，我将参考用作[http://www.tumblr.com/docs/en/api/v2](http://www.tumblr.com/docs/en/api/v2)和 OAuth。

我的问题是使用**OAuth**（根据开发人员博客 tumblr 类似于 twitter，所以我只需替换代码中的所有密钥和 api）我可以**在 webview 中成功登录 tumblr**，![在此处输入图像描述](../Images/124a17534c762c34ad194e199e5a6bea.png)然后单击 Allow 按钮（见快照）我想要身份验证令牌，但在我的情况下，我重定向到我在注册我的应用程序时传递的回调 URL。

在单击 webview 上的完成按钮时，我没有得到 pin，这就是为什么我无法获取令牌和接收`failedAuthorization`消息的原因。

如果可能，请建议我任何参考或其他在 tumblr 上发布照片的方式。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:43:34.730

您为什么不尝试使用共享套件。它是最可靠的共享来源，例如：

脸书，推特，领英，不倒翁。尝试使用 Share 工具包实现。很容易成为

也实施了。

# c# - 根据用户输入创建图像数组

> ID：14017992
> 
> 赞同：1
> 
> 时间：2012-12-24T06:40:53.223
> 
> 标签：c#, wpf, wpf-controls

我需要根据用户输入创建一组图像，如下所示。

![图片](../Images/2777c0288b5b30ea27db6d4132858170.png)

现在我正在以编程方式创建按钮并设置图像属性。
但这很痛苦，因为它有一堆 C# 代码要编写。

有没有更好的方法来实现这一目标？

**注意：**鼠标悬停在图像数组中的每个项目上时，它必须在数组中显示其编号，如 2x1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T07:41:04.833

```
<script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">

    $(document).ready(function(){
        $("#generate").click(function(){
            var cols = $("#cols").val();
            var rows = $("#rows").val();
            var table= '';
            table +=  '<table>' ;

            for(i=0;i<rows;i++){
                table += '<tr>' ;
                for(j=0;j<cols;j++){
                    table += '<td><img src="http://cdn1.iconfinder.com/data/icons/woocons1/Speaker.png" /></td>';
                }
                table += '</tr>' ;
            }
            table += '</table>';
            $('#output').html( table ); // outputing generated table
        });

        $(document).on("hover", "#output img", function(){ 
            var col_no = $(this).parent().parent().children().index($(this).parent()) + 1;
            var row_no = $(this).parent().parent().index() + 1;
            $('#position').html(row_no + 'x' + col_no);

        })
    });

</script>
Number of Rows:<input type="text" id="rows" /><br />
Number of Columns:<input type="text" id="cols" /> <br />
<input type="button" value="Generat" id="generate" />

<div id="output"></div>
<div id="position"></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T07:00:18.777

希望这些代码可以指导您：

```
int numberOdRows=int32.Parse(NoRows.Text); //NoRows is the 1st textBlock
int numberOdColumns=int32.Parse(NoCols.Text); //NoCols is the 2st textBlock

StackPanel _stack0=new StackPanel { orientation = Orientation.Vertical};
for (int i=1;i<numberOdRows;i++)
{
    StackPanel _stack1=new StackPanel{ orientation = Orientation.Horizontal};
    for (int j=1;i<numberOdColumns;i++)
    {
         image; //I assume you can call it
        _stack1.Children.Add(image)

        //here you can set the Tooltip too.
        // i is the number of row
        // j is the number of column
        image.ToolTip="(" + i.ToString() + "," + j.ToString() + ")" ;
    }
    _stack0.Children.Add(_stack1)
}

//Add _stack0 to your panel 
```

编辑：我添加了 ToolTip 部分

# cloud-foundry - 在 cloudfoundry 上部署 Sinatra 应用程序时出错

> ID：14017993
> 
> 赞同：0
> 
> 时间：2012-12-24T06:41:06.193
> 
> 标签：cloud-foundry

我尝试在**cloudfoundry上部署****Sinatra**应用程序。我收到以下错误：

 **```
$vmc push

Would you like to deploy from the current directory? [Yn]:
Application Name: myapp
Detected a Sinatra Application, is this correct? [Yn]:
Application Deployed URL [myapp.cloudfoundry.ctrls.com]:
Memory reservation (128M, 256M, 512M, 1G, 2G) [128M]:
How many instances? [1]:
Would you like to save this configuration? [yN]:
Creating Application: OK
Uploading Application:
  Checking for available resources: OK
  Packing application: OK
  Uploading (0K): OK  
Push Status: OK
Staging Application 'myapp': OK                                                
Starting Application 'myapp': .......**Error:
Application 'myapp's state is undetermined, not enough information available.** 
```

如果我运行**vmc apps**，它不会显示应用程序的运行状况

```
$ vmc apps

+-------------+----+--------+------------------------------+----------+
| Application | #  | Health | URLS                         | Services |
+-------------+----+--------+------------------------------+----------+
| myapp       | 1  | N/A    | myapp.cloudfoundry.xxxxx.com |          |
+-------------+----+--------+------------------------------+----------+ 
```

当我手动启动应用程序时，我得到应用程序已经启动

```
$vmc start myapp
Application 'myapp' already started 
```

以下是“vmc 日志”的输出

```
$vmc logs myapp

 Sinatra/1.2.1 has taken the stage on 26952 for production with backup from Thin
 Thin web server (v1.2.11 codename Bat-Shit Crazy)
 Maximum connections set to 1024
 Listening on 0.0.0.0:26952, CTRL+C to stop 
```

如果我尝试重新启动应用程序，我会收到上面发布的相同错误。

请提供一些解决方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:14:34.563

您为应用程序使用的 URL 是什么？目前，在 cloudfoundry.com 上，您不能使用自定义 URL，只能使用遵循 *.cloudfoundry.com 模式的 URL**

# c# - 难以将 mvc 模型绑定到 JSON 帖子

> ID：14017994
> 
> 赞同：2
> 
> 时间：2012-12-24T06:41:11.963
> 
> 标签：c#, json, asp.net-mvc-4

我有以下 JSON 请求正文（从 ie10 管理面板网络捕获复制）

```
{"FirstName":"James","LastName":"Jones","Email":"jJones@system.net"} 
```

我的控制器如下（x 变量要中断）：

```
[HttpPost]
public void EditPerson(PersonUpdateViewModel person)
{
    int x = 0;
} 
```

我的视图模型如下：

```
public class PersonUpdateViewModel
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Email { get; set; }
} 
```

达到了 EditPerson 操作，我打破了 x 变量，但是 person 变量中的所有属性都是空的，有没有人暗示我可能做错了什么？在这一点上，我什至可以接受原始 JSON 字符串并从那里解析，但我无法将任何参数放入操作方法。

我通过请求发布的 javascript 函数：

```
var submitEdit2 = function () {
    var editables = $('.editable')
    var person = new Object();
    for (var i = 0; i < editables.length; i++) {
        var editable = editables[i];
        person[editable.name] = editable.value;
    }
    var jform = JSON.stringify(person);
    $.post('/Person/EditPerson', jform, null, 'json');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-11T00:24:32.927

尝试使用 AJAX 帖子并将
contentType 指定为 'application/json; 字符集=utf-8'

```
 $.ajax( {
     type: "POST",
     url: /Person/EditPerson',
     contentType: 'application/json; charset=utf-8',
     data: jform
     } 
```

如果这不能解决问题，请发布标题信息。我猜测使用 $post 正在发送 .NET MVC 不喜欢的“application/x-www-form-urlencoded”数据。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# python - 有没有办法将可选参数传递给函数？

> ID：14017996
> 
> 赞同：137
> 
> 时间：2012-12-24T06:41:24.883
> 
> 标签：python

Python中有没有办法在调用函数时将可选参数传递给函数，并且在函数定义中有一些基于“仅当传递可选参数时”的代码

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-12-24T07:29:19.990

[Python 2 文档，](http://docs.python.org/2/reference/compound_stmts.html#function-definitions) *7.6 [*。*](http://docs.python.org/2/reference/compound_stmts.html#function-definitions)[*函数定义*](http://docs.python.org/2/reference/compound_stmts.html#function-definitions)为您提供了几种方法来检测调用者是否提供了可选参数。*

 *首先，您可以使用特殊的形参语法`*`。如果函数定义有一个以单个 开头的形式参数`*`，则 Python 会使用与前面的形式参数不匹配的任何位置参数（作为元组）填充该参数。如果函数定义有一个以`**`. 该函数的实现可以检查这些参数的内容是否有您想要的任何“可选参数”。

例如，这里有一个函数`opt_fun`，它接受两个位置参数`x1`和`x2`，并寻找另一个名为“可选”的关键字参数。

```
>>> def opt_fun(x1, x2, *positional_parameters, **keyword_parameters):
...     if ('optional' in keyword_parameters):
...         print 'optional parameter found, it is ', keyword_parameters['optional']
...     else:
...         print 'no optional parameter, sorry'
... 
>>> opt_fun(1, 2)
no optional parameter, sorry
>>> opt_fun(1,2, optional="yes")
optional parameter found, it is  yes
>>> opt_fun(1,2, another="yes")
no optional parameter, sorry 
```

其次，您可以提供`None`调用者永远不会使用的某个值的默认参数值。如果参数有这个默认值，你就知道调用者没有指定参数。如果参数具有非默认值，则您知道它来自调用者。

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2012-12-24T06:43:07.320

```
def my_func(mandatory_arg, optional_arg=100):
    print(mandatory_arg, optional_arg) 
```

[http://docs.python.org/2/tutorial/controlflow.html#default-argument-values](http://docs.python.org/2/tutorial/controlflow.html#default-argument-values)

我发现这比使用`**kwargs`.

为了确定是否传递了参数，我使用自定义实用程序对象作为默认值：

```
MISSING = object()

def func(arg=MISSING):
    if arg is MISSING:
        ... 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-06-30T13:07:59.980

```
def op(a=4,b=6):
    add = a+b
    print add

i)op() [o/p: will be (4+6)=10]
ii)op(99) [o/p: will be (99+6)=105]
iii)op(1,1) [o/p: will be (1+1)=2]
Note:
 If none or one parameter is passed the default passed parameter will be considered for the function. 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-12-24T06:49:04.323

如果你想给一个参数指定一些默认值，在 () 中赋值。像（x = 10）。但重要的是首先应该强制参数然后是默认值。

例如。

(y, x =10)

但

(x=10, y) 错误

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-01T19:21:28.677

您可以使用永远不会传递给函数的内容为可选参数指定默认值，并使用`is`运算符对其进行检查：

```
class _NO_DEFAULT:
    def __repr__(self):return "<no default>"
_NO_DEFAULT = _NO_DEFAULT()

def func(optional= _NO_DEFAULT):
    if optional is _NO_DEFAULT:
        print("the optional argument was not passed")
    else:
        print("the optional argument was:",optional) 
```

那么只要你不这样做，`func(_NO_DEFAULT)`你就可以准确地检测到参数是否通过，并且与公认的答案不同，你不必担心 ** 表示法的副作用：

```
# these two work the same as using **
func()
func(optional=1)

# the optional argument can be positional or keyword unlike using **
func(1) 

#this correctly raises an error where as it would need to be explicitly checked when using **
func(invalid_arg=7) 
```*

# javascript - 当我的变量和函数名称相同时，会有什么警报？

> ID：14017997
> 
> 赞同：-1
> 
> 时间：2012-12-24T06:41:31.617
> 
> 标签：javascript

```
var test = 100;

function test(){

var i=0;

}

alert(test); 
```

您能否对此进行测试并让我知道变量和函数名称的优先级是什么？

经过上述测试后，请尝试评论第一行`// var test = 100;` 并检查输出是什么。

我只想知道为什么会这样？

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:55:48.867

好吧，让我们看看javascript如何处理以下代码：

```
var test = 100;

function test(){

var i=0;

}

alert(test); 
```

使用[提升](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)，这是 JS 解析器将如何转换您的代码：

```
// Variables & functions declarations are hoisted
var test;
function test() {
    var i = 0;
}

// Then the actual code is run. Thus, your assignment.
test = 100;

alert(test); 
```

我想你现在明白为什么它会发出 100 警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:13:43.117

不要使用与变量名相同的函数名。
如果你先定义一个变量然后函数，这个变量用函数覆盖。

```
function test(){

alert(3);

} 
```

和

```
var test=function() {alert(3)}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T07:32:41.700

根据变量作用域，如果你想调用函数，它将使用函数作用域值 i=0，你需要调用 test() 并返回值，那么只有它会从作用域变量中获取值。

```
var test = 100;
function test(){
var i=0;
return i;
}
alert(test()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T06:44:44.970

它输出 100。我假设因为你是`alert()`变量`test`，而不是`test()`函数

我对它做了一个小提琴..

[jsfiddle测试](http://jsfiddle.net/Mdgr2/)

# testng - 在 TestNG 中的线程之间共享数据

> ID：14017999
> 
> 赞同：1
> 
> 时间：2012-12-24T06:41:32.667
> 
> 标签：testng

我有一个`testmethod`在数据库`testNG`中`threadPoolSize = 10`创建记录的 in

我需要计算所有线程创建所有记录所花费的总时间请帮助我找到相同的。

```
@Test(threadPoolSize = 10, invocationCount = 10)
public void testCreate(){
       long StartTime = new Date().getTime() ; 
        //operation to create records
       long EndTime = new Date().getTime() ;

     } 
```

如何计算上述代码中所有线程所花费的时间？

上面的代码给了我一次只被一个线程占用的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:06:06.897

我会调用一个类似于 startTick() 的外部函数，它会跟踪 startTime，然后一旦设置，就不会被覆盖，而 endTick() 会收集所有结束时间。在 afterTest 中，我可以做 endTick - startTick..类似的事情：

```
startTick(){
  if(startTime == null)
    startTime = new Date().getTime();
}

testCreate() {
  startTick(); 
        //operation to create records
  endTick();
}

endTick(){
    endTime = new Date().getTime();
}
@AfterTest
afterTest(){
  endTime - startTime;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T00:14:15.950

听起来您需要发布有关测试时间的数据，以便它可以在报告中使用，而不是在同一测试的其他线程中使用。

为此，您可以将每个测试的结果存储在某个中心位置并稍后查找总数。以下对您有用吗？

```
public class TimeTest {
    Map<Long, Long> timeRecord = new ConcurrentHashMap<Long, Long>();

    @Test(threadPoolSize = 10, invocationCount = 10)
    public void testCreate(){
        long threadID = Thread.currentThread().getId();
        long startTime = new Date().getTime() ; 

        //operation to create records

        long endTime = new Date().getTime();
        long diffTime = endTime - startTime;
        timeRecord.put(threadID, diffTime);
        // Log time taken
        System.out.println("TestMethod[" + threadID + "] TestTime: " + diffTime);
    }

    @AfterTest
    public void displayTime() {
        long runtime = 0;
        for (Long threadID : timeRecord.keySet()) {
            runtime += timeRecord.get(threadID);
        }
        System.out.println("AfterSuite TotalTime: " + runtime);
    }

} 
```

如果你想为整个测试计时，而不仅仅是它的一部分，你可以使用`ITestResult`TestNG 提供的接口。

```
@AfterMethod
public void recordTime(ITestResult testResult){
    long threadID = Thread.currentThread().getId();
    long timeDiff = testResult.getEndMillis() - testResult.getStartMillis();
    // Log time taken
    System.out.println("AfterMethod[" + threadID + "] TestTime: " + timeDiff);
} 
```

但是，时间可能与上述时间不同，因为可能会有额外的开销。