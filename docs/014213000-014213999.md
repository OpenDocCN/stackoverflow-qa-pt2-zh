# StackOverflow 问答 14213000-14213999

# java - 在特定使用 Servlet 之后将 mysql 列值重置为默认值

> ID：14213003
> 
> 赞同：1
> 
> 时间：2013-01-08T10:33:45.377
> 
> 标签：java, mysql, servlets

我是 Web 开发的新手 我正在使用 java servlet 制作一些 Web 服务，但我被困在了这么多 怎么做？东西 ：（

我正在开发一个应用程序，我需要在某个时间将 mysql 表列值重置为默认值，假设我们需要在每个星期日晚上 10:00 重置计数器@。

有没有像Java或mysql中的警报管理器这样可以一直在后台运行并触发@特定时间的东西。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:02:29.893

Java有一个很好的接口ScheduledExecutorService。你可以试试这段代码

```
ScheduledExecutorService service = Executors.newScheduledThreadPool(1);
//every day to execute
long everyDayDelay = 24*60*60*1000;
//first time to execute, it can be your special date
//for example 5 seconds after launch
long timeToExecute = System.currentTimeMillis()+5*1000;

service.scheduleWithFixedDelay(new Task(), getTimeToLaunch(timeToExecute), everyDayDelay, TimeUnit.MILLISECONDS); 
```

在哪里

```
//return difference between now and timeToExecute
public static long getTimeToLaunch(long timeToExecute){
    long current = System.currentTimeMillis();
    return timeToExecute - current;
}

class Task implements Runnable{

    @Override
    public void run() {
        System.out.println("Run task!");
    }    
} 
```

更新：执行你的 sql 任务的类

```
public class SqlExecutionService1 {

    public static final long everyDayDelay = 24*60*60*1000;

    public SqlExecutionService1(){
        ScheduledExecutorService service = Executors.newScheduledThreadPool(1);
        //every day to execute

        //first time to execute
        //for example 5 seconds after launch
        long timeToExecute = System.currentTimeMillis()+5*1000;

        service.scheduleWithFixedDelay(new SqlTask1(), getTimeToLaunch(timeToExecute), everyDayDelay, TimeUnit.MILLISECONDS);
    }

    private long getTimeToLaunch(long timeToExecute){
        long current = System.currentTimeMillis();
        return timeToExecute - current;
    }
}
class SqlTask1 implements Runnable{

    @Override
    public void run() {
        //your sql tasks
    }    
} 
```

要创建此类，请在您的应用服务器启动时 - 在您的一个主要 servlet 中使用方法 init()。例子 -

```
public class MainInitServlet extends HttpServlet {
    public void init() {
       new SqlExecutionService1();    
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T12:01:33.467

数据库的数据应该是计算的基础**，**而不是计算的结果。在示例中，法案将永远不会被成功修改。

我想这个事实将永远是程序员和架构师之间的冲突。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T10:46:48.243

`is there any thing like alarm manager in Java or mysql that can run all the time in background and trigger @ specific time.`

查看一个名为[Quartz](http://www.quartz-scheduler.org/)的 API ，您的程序可以在其中安排 Jobs 并在那时运行它。

使用方法`execute(JobExecutionContext jobExecution)`用于触发触发器。

例如：

```
SchedulerFactory schedulerFactory = new StdSchedulerFactory();
// Retrieve scheduler 
Scheduler scheduler = null;
try {
scheduler = schedulerFactory.getScheduler();
}
catch (SchedulerException e) {
e.printStackTrace();
}

//this is a job
JobDetail job = new JobDetail("jobDetail", "jobDetailGroup",       ImplementedJob.class);
 SimpleTrigger trigger = new SimpleTrigger("Trigger Name","defaultGroup", DATE);

// schedule 
scheduler.scheduleJob(job, trigger);
// start the scheduler
scheduler.start(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T10:56:21.120

你也可以使用[mysql的事件调度机制](http://dev.mysql.com/doc/refman/5.1/en/events.html)

这取决于mysql的版本以及是否启用

# cakephp - PHP 中的 beforeSave() 错误，而 cakePhp 中的 move_uploaded_file 错误

> ID：14213004
> 
> 赞同：2
> 
> 时间：2013-01-08T10:34:01.840
> 
> 标签：cakephp, file-upload, php

我正在将图像从 Android 上传到 php 服务器。文件正确上传，但是当我尝试将文件移动到另一个目录时，它会出错。我在 Win7 上的 WAMP 中使用 CakePHP。我在 php.ini 中设置了 file_uploads = On

**PHP代码：**

```
if ($this->request->is('post') && !empty($this->request->data)) {
    $base=$_REQUEST['image'];       

//  base64 encoded utf-8 string     
    $binary=base64_decode($base);

//  binary, utf-8 bytes     
    header('Content-Type: bitmap; charset=utf-8');

    $filename = $this->request->data['name'];
    pr($filename);

    $folder_URL = 'C:\wamp\tmp\\' . $filename; 

    pr($folder_URL);

    $file = fopen($folder_URL, 'wb');

    //write to file
    fwrite($file, $binary);

    fclose($file);

    $url = 'C:\wamp\www\moccv\app\webroot\img\profile_pics\arora.jpg';
    $success = move_uploaded_file($folder_URL, $url);

    if ($success) {
        pr('image uploaded successfully');
    } else {
        pr('could not upload image');
        print_r(error_get_last());
    }

} 
```

**输出 -**

```
arora.jpg
C:\wamp\tmp\arora.jpg
could not upload image
Array( [type] => 2048 [message] => Declaration of SluggableBehavior::beforeSave() should be compatible with that of ModelBehavior::beforeSave() [file] => C:\wamp\www\moccv\app\Plugin\Sluggable\Model\Behavior\SluggableBehavior.php [line] => 23) 
```

**PHP 代码：SluggableBehavior.php**

```
<?php
/* SVN FILE: $Id: sluggable.php 36 2007-11-26 15:10:14Z mgiglesias $ */

/**
 * Sluggable Behavior class file.
 *
 * @filesource
 * @author Mariano Iglesias
 * @link http://cake-syrup.sourceforge.net/ingredients/sluggable-behavior/
 * @version    $Revision: 36 $
 * @license    http://www.opensource.org/licenses/mit-license.php The MIT License
 * @package app
 * @subpackage app.models.behaviors
 */

/**
 * Model behavior to support generation of slugs for models.
 *
 * @package app
 * @subpackage app.models.behaviors
 */
class SluggableBehavior extends ModelBehavior
{
    /**
     * Contain settings indexed by model name.
     *
     * @var array
     * @access private
     */             
     var $__settings = array();

/**
 * Initiate behavior for the model using specified settings. Available settings:
 *
 * - label:     (array | string, optional) set to the field name that contains the
 *                 string from where to generate the slug, or a set of field names to
 *                 concatenate for generating the slug. DEFAULTS TO: title
 *
 * - slug:        (string, optional) name of the field name that holds generated slugs.
 *                 DEFAULTS TO: slug
 *
 * - separator:    (string, optional) separator character / string to use for replacing
 *                 non alphabetic characters in generated slug. DEFAULTS TO: -
 *
 * - length:    (integer, optional) maximum length the generated slug can have.
 *                 DEFAULTS TO: 100
 *
 * - overwrite: (boolean, optional) set to true if slugs should be re-generated when
 *                 updating an existing record. DEFAULTS TO: false
 *
 * @param object $Model Model using the behaviour
 * @param array $settings Settings to override for model.
 * @access public
 */
function setup(&$Model, $settings = array())
{
    $default = array('label' => array('title'), 'slug' => 'slug', 'separator' => '-', 'length' => 100, 'overwrite' => false, 'translation' => null);

    if (!isset($this->__settings[$Model->alias]))
    {
        $this->__settings[$Model->alias] = $default;
    }

    //$this->__settings[$Model->alias] = am($this->__settings[$Model->alias], ife(is_array($settings), $settings, array()));
    if ( is_array($settings) ) {
        $retSettings = $settings;
    } else {
        $retSettings = array();
    }
    //pr( $retSettings );

    $this->__settings[$Model->alias] = am(
        $this->__settings[$Model->alias],
        $retSettings
    );

}

/**
 * Run before a model is saved, used to set up slug for model.
 *
 * @param object $Model Model about to be saved.
 * @return boolean true if save should proceed, false otherwise
 * @access public
 */
function beforeSave(&$Model)
{
    $return = parent::beforeSave($Model);

    // Make label fields an array

    if (!is_array($this->__settings[$Model->alias]['label']))
    {
        $this->__settings[$Model->alias]['label'] = array($this->__settings[$Model->alias]['label']);
    }

    // Make sure all label fields are available

    foreach($this->__settings[$Model->alias]['label'] as $field)
    {
        if (!$Model->hasField($field))
        {
            return $return;
        }
    }

    // See if we should be generating a slug

    if ($Model->hasField($this->__settings[$Model->alias]['slug']) && ($this->__settings[$Model->alias]['overwrite'] || empty($Model->id)))
    {
        // Build label out of data in label fields, if available, or using a default slug otherwise

        $label = '';

        foreach($this->__settings[$Model->alias]['label'] as $field)
        {
            if (!empty($Model->data[$Model->alias][$field]))
            {
                if ( !empty($label) ) {
                    $prepend = ' ';
                } else {
                    $prepend = '';
                }
                $label .= $prepend . $Model->data[$Model->alias][$field];
            }
        }

        // Keep on going only if we've got something to slug

        if (!empty($label))
        {
            // Get the slug

            $slug = $this->__slug($label, $this->__settings[$Model->alias]);

            // Look for slugs that start with the same slug we've just generated

            $conditions = array($Model->alias . '.' . $this->__settings[$Model->alias]['slug'].' LIKE' => $slug . '%');

            if (!empty($Model->id))
            {
                $conditions[$Model->alias . '.' . $Model->primaryKey.' !='] = $Model->id;
            }

            $result = $Model->find('all', array('conditions' => $conditions, 'fields' => array($Model->primaryKey, $this->__settings[$Model->alias]['slug']), 'recursive' => -1));
            $sameUrls = null;

            if (!empty($result))
            {
                $sameUrls = Set::extract($result, '{n}.' . $Model->alias . '.' . $this->__settings[$Model->alias]['slug']);
            }

            // If we have collissions

            if (!empty($sameUrls))
            {
                $begginingSlug = $slug;
                $index = 1;

                // Attach an ending incremental number until we find a free slug

                while($index > 0)
                {
                    if (!in_array($begginingSlug . $this->__settings[$Model->alias]['separator'] . $index, $sameUrls))
                    {
                        $slug = $begginingSlug . $this->__settings[$Model->alias]['separator'] . $index;
                        $index = -1;
                    }

                    $index++;
                }
            }

            // Now set the slug as part of the model data to be saved, making sure that
            // we are on the white list of fields to be saved

            if (!empty($Model->whitelist) && !in_array($this->__settings[$Model->alias]['slug'], $Model->whitelist))
            {
                $Model->whitelist[] = $this->__settings[$Model->alias]['slug'];
            }

            $Model->data[$Model->alias][$this->__settings[$Model->alias]['slug']] = $slug;
        }
    }

    return $return;
}

/**
 * Generate a slug for the given string using specified settings.
 *
 * @param string $string String from where to generate slug
 * @param array $settings Settings to use (looks for 'separator' and 'length')
 * @return string Slug for given string
 * @access private
 */
function __slug($string, $settings)
{
    if (!empty($settings['translation']) && is_array($settings['translation']))
    {
        // Run user-defined translation tables

        if (count($settings['translation']) >= 2 && count($settings['translation']) % 2 == 0)
        {
            for($i=0, $limiti=count($settings['translation']); $i < $limiti; $i+=2)
            {
                $from = $settings['translation'][$i];
                $to = $settings['translation'][$i + 1];

                if (is_string($from) && is_string($to))
                {
                    $string = strtr($string, $from, $to);
                }
                else
                {
                    $string = r($from, $to, $string);
                }
            }
        }
        else if (count($settings['translation']) == 1)
        {
            $string = strtr($string, $settings['translation'][0]);
        }

        $string = strtolower($string);
    }
    else if (!empty($settings['translation']) && is_string($settings['translation']) && in_array(strtolower($settings['translation']), array('utf-8', 'iso-8859-1')))
    {
        // Run pre-defined translation tables

        $translations = array(
            'iso-8859-1' => array(
                chr(128).chr(131).chr(138).chr(142).chr(154).chr(158)
                .chr(159).chr(162).chr(165).chr(181).chr(192).chr(193).chr(194)
                .chr(195).chr(196).chr(197).chr(199).chr(200).chr(201).chr(202)
                .chr(203).chr(204).chr(205).chr(206).chr(207).chr(209).chr(210)
                .chr(211).chr(212).chr(213).chr(214).chr(216).chr(217).chr(218)
                .chr(219).chr(220).chr(221).chr(224).chr(225).chr(226).chr(227)
                .chr(228).chr(229).chr(231).chr(232).chr(233).chr(234).chr(235)
                .chr(236).chr(237).chr(238).chr(239).chr(241).chr(242).chr(243)
                .chr(244).chr(245).chr(246).chr(248).chr(249).chr(250).chr(251)
                .chr(252).chr(253).chr(255),
                'EfSZsz' . 'YcYuAAA' . 'AAACEEE' . 'EIIIINO' . 'OOOOOUU' . 'UUYaaaa' . 'aaceeee' . 'iiiinoo' . 'oooouuu' . 'uyy',
                array(chr(140), chr(156), chr(198), chr(208), chr(222), chr(223), chr(230), chr(240), chr(254)),
                array('OE', 'oe', 'AE', 'DH', 'TH', 'ss', 'ae', 'dh', 'th')
            ),
            'utf-8' => array(
                array(
                    // Decompositions for Latin-1 Supplement
                    chr(195).chr(128) => 'A', chr(195).chr(129) => 'A',
                    chr(195).chr(130) => 'A', chr(195).chr(131) => 'A',
                    chr(195).chr(132) => 'A', chr(195).chr(133) => 'A',
                    chr(195).chr(135) => 'C', chr(195).chr(136) => 'E',
                    chr(195).chr(137) => 'E', chr(195).chr(138) => 'E',
                    chr(195).chr(139) => 'E', chr(195).chr(140) => 'I',
                    chr(195).chr(141) => 'I', chr(195).chr(142) => 'I',
                    chr(195).chr(143) => 'I', chr(195).chr(145) => 'N',
                    chr(195).chr(146) => 'O', chr(195).chr(147) => 'O',
                    chr(195).chr(148) => 'O', chr(195).chr(149) => 'O',
                    chr(195).chr(150) => 'O', chr(195).chr(153) => 'U',
                    chr(195).chr(154) => 'U', chr(195).chr(155) => 'U',
                    chr(195).chr(156) => 'U', chr(195).chr(157) => 'Y',
                    chr(195).chr(159) => 's', chr(195).chr(160) => 'a',
                    chr(195).chr(161) => 'a', chr(195).chr(162) => 'a',
                    chr(195).chr(163) => 'a', chr(195).chr(164) => 'a',
                    chr(195).chr(165) => 'a', chr(195).chr(167) => 'c',
                    chr(195).chr(168) => 'e', chr(195).chr(169) => 'e',
                    chr(195).chr(170) => 'e', chr(195).chr(171) => 'e',
                    chr(195).chr(172) => 'i', chr(195).chr(173) => 'i',
                    chr(195).chr(174) => 'i', chr(195).chr(175) => 'i',
                    chr(195).chr(177) => 'n', chr(195).chr(178) => 'o',
                    chr(195).chr(179) => 'o', chr(195).chr(180) => 'o',
                    chr(195).chr(181) => 'o', chr(195).chr(182) => 'o',
                    chr(195).chr(182) => 'o', chr(195).chr(185) => 'u',
                    chr(195).chr(186) => 'u', chr(195).chr(187) => 'u',
                    chr(195).chr(188) => 'u', chr(195).chr(189) => 'y',
                    chr(195).chr(191) => 'y',
                    // Decompositions for Latin Extended-A
                    chr(196).chr(128) => 'A', chr(196).chr(129) => 'a',
                    chr(196).chr(130) => 'A', chr(196).chr(131) => 'a',
                    chr(196).chr(132) => 'A', chr(196).chr(133) => 'a',
                    chr(196).chr(134) => 'C', chr(196).chr(135) => 'c',
                    chr(196).chr(136) => 'C', chr(196).chr(137) => 'c',
                    chr(196).chr(138) => 'C', chr(196).chr(139) => 'c',
                    chr(196).chr(140) => 'C', chr(196).chr(141) => 'c',
                    chr(196).chr(142) => 'D', chr(196).chr(143) => 'd',
                    chr(196).chr(144) => 'D', chr(196).chr(145) => 'd',
                    chr(196).chr(146) => 'E', chr(196).chr(147) => 'e',
                    chr(196).chr(148) => 'E', chr(196).chr(149) => 'e',
                    chr(196).chr(150) => 'E', chr(196).chr(151) => 'e',
                    chr(196).chr(152) => 'E', chr(196).chr(153) => 'e',
                    chr(196).chr(154) => 'E', chr(196).chr(155) => 'e',
                    chr(196).chr(156) => 'G', chr(196).chr(157) => 'g',
                    chr(196).chr(158) => 'G', chr(196).chr(159) => 'g',
                    chr(196).chr(160) => 'G', chr(196).chr(161) => 'g',
                    chr(196).chr(162) => 'G', chr(196).chr(163) => 'g',
                    chr(196).chr(164) => 'H', chr(196).chr(165) => 'h',
                    chr(196).chr(166) => 'H', chr(196).chr(167) => 'h',
                    chr(196).chr(168) => 'I', chr(196).chr(169) => 'i',
                    chr(196).chr(170) => 'I', chr(196).chr(171) => 'i',
                    chr(196).chr(172) => 'I', chr(196).chr(173) => 'i',
                    chr(196).chr(174) => 'I', chr(196).chr(175) => 'i',
                    chr(196).chr(176) => 'I', chr(196).chr(177) => 'i',
                    chr(196).chr(178) => 'IJ',chr(196).chr(179) => 'ij',
                    chr(196).chr(180) => 'J', chr(196).chr(181) => 'j',
                    chr(196).chr(182) => 'K', chr(196).chr(183) => 'k',
                    chr(196).chr(184) => 'k', chr(196).chr(185) => 'L',
                    chr(196).chr(186) => 'l', chr(196).chr(187) => 'L',
                    chr(196).chr(188) => 'l', chr(196).chr(189) => 'L',
                    chr(196).chr(190) => 'l', chr(196).chr(191) => 'L',
                    chr(197).chr(128) => 'l', chr(197).chr(129) => 'L',
                    chr(197).chr(130) => 'l', chr(197).chr(131) => 'N',
                    chr(197).chr(132) => 'n', chr(197).chr(133) => 'N',
                    chr(197).chr(134) => 'n', chr(197).chr(135) => 'N',
                    chr(197).chr(136) => 'n', chr(197).chr(137) => 'N',
                    chr(197).chr(138) => 'n', chr(197).chr(139) => 'N',
                    chr(197).chr(140) => 'O', chr(197).chr(141) => 'o',
                    chr(197).chr(142) => 'O', chr(197).chr(143) => 'o',
                    chr(197).chr(144) => 'O', chr(197).chr(145) => 'o',
                    chr(197).chr(146) => 'OE',chr(197).chr(147) => 'oe',
                    chr(197).chr(148) => 'R',chr(197).chr(149) => 'r',
                    chr(197).chr(150) => 'R',chr(197).chr(151) => 'r',
                    chr(197).chr(152) => 'R',chr(197).chr(153) => 'r',
                    chr(197).chr(154) => 'S',chr(197).chr(155) => 's',
                    chr(197).chr(156) => 'S',chr(197).chr(157) => 's',
                    chr(197).chr(158) => 'S',chr(197).chr(159) => 's',
                    chr(197).chr(160) => 'S', chr(197).chr(161) => 's',
                    chr(197).chr(162) => 'T', chr(197).chr(163) => 't',
                    chr(197).chr(164) => 'T', chr(197).chr(165) => 't',
                    chr(197).chr(166) => 'T', chr(197).chr(167) => 't',
                    chr(197).chr(168) => 'U', chr(197).chr(169) => 'u',
                    chr(197).chr(170) => 'U', chr(197).chr(171) => 'u',
                    chr(197).chr(172) => 'U', chr(197).chr(173) => 'u',
                    chr(197).chr(174) => 'U', chr(197).chr(175) => 'u',
                    chr(197).chr(176) => 'U', chr(197).chr(177) => 'u',
                    chr(197).chr(178) => 'U', chr(197).chr(179) => 'u',
                    chr(197).chr(180) => 'W', chr(197).chr(181) => 'w',
                    chr(197).chr(182) => 'Y', chr(197).chr(183) => 'y',
                    chr(197).chr(184) => 'Y', chr(197).chr(185) => 'Z',
                    chr(197).chr(186) => 'z', chr(197).chr(187) => 'Z',
                    chr(197).chr(188) => 'z', chr(197).chr(189) => 'Z',
                    chr(197).chr(190) => 'z', chr(197).chr(191) => 's',
                    // Euro Sign
                    chr(226).chr(130).chr(172) => 'E'
                )
            )
        );

        return $this->__slug($string, am($settings, array('translation' => $translations[$settings['translation']])));
    }

    $string = strtolower($string);
    $string = preg_replace('/[^a-z0-9_]/i', $settings['separator'], $string);
    $string = preg_replace('/' . preg_quote($settings['separator']) . '[' . preg_quote($settings['separator']) . ']*/', $settings['separator'], $string);

    if (strlen($string) > $settings['length'])
    {
        $string = substr($string, 0, $settings['length']);
    }

    $string = preg_replace('/' . preg_quote($settings['separator']) . '$/', '', $string);
    $string = preg_replace('/^' . preg_quote($settings['separator']) . '/', '', $string);

    return $string;
}
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:41:46.363

我不能评论所以我正在回答

我在 CakePHP 上上传时遇到了一些问题，结果是 php.ini 中的“post_max_size”限制，可能还想检查“upload_max_filesize”。当您超过限制时，CakePHP 中不会显示错误消息，并且它会丢弃您的 $this->request->data 的一部分。

错误消息就像@Kuf 所说，由于使用不同的签名覆盖了方法 beforeSave 。因此，将参数从 &$model 更改为 Model $model 应该可以解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:41:34.780

您在哪个用户中运行 Web 服务器？

确保：

1.  您保存到的路径有效
2.  运行该文件的用户`wamp`拥有该文件的权限

尝试将路径更改为一些简单的路径，甚至可能是相对路径，以及将目标文件的权限更改为所有用户都可以访问

尝试添加

```
error_reporting(E_ALL);
ini_set("display_errors", 1); 
```

到您的页面并检查 apache 错误日志以获取更多信息

**编辑**

不确定错误是否相关，尝试标记该行

```
$success = move_uploaded_file($folder_URL, $url); 
```

并检查错误是否仍然显示。的方法签名`SluggableBehavior`必须与`ModelBehavior`类的方法签名相同，这意味着方法的方法签名`beforeSave()`必须从：

```
function beforeSave(&$model) 
```

至：

```
function beforeSave(Model $model) 
```

您是否尝试更改路径并检查权限？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:48:21.980

在下面更改的 php.ini 文件中。

```
file_uploads = On
```

如果不是，请检查我在评论中提到的可能错误。
如果仍然没有，则检查文件上传大小限制。如果您使用的是 cakephp，那么以下代码将对您有所帮助。

```
if (is_uploaded_file($this->data['MODEL_NAME']['upload']['tmp_name']))
{
    $arr = explode('.',$this->data['MODEL_NAME']['upload']['name']);
    $image_name = time().".".$arr[1];

    $dest = APP.WEBROOT_DIR.DS.'img'.DS.'other_file'.DS.$image_name;
    move_uploaded_file($this->data['MODEL_NAME']['upload']['tmp_name'],$dest);

    if(DO_CHECK)
    {
        /*****************code after success*****************/
    }
}
```

# iphone - 播放和保存视频文件

> ID：14213007
> 
> 赞同：1
> 
> 时间：2013-01-08T10:34:09.573
> 
> 标签：iphone, objective-c

我已经录制了一个视频并将其保存到文档目录中。现在我想将视频编辑为慢速、快速或正常速度。我可以做到快速和正常的视频速度。但我不能做慢速视频。它总是转换为正常速度。这是我的代码

```
 AVMutableComposition *composition = [AVMutableComposition composition];
    AVURLAsset * sourceAsset = [[AVURLAsset alloc] initWithURL:[NSURL fileURLWithPath:inputVideoPath] options:nil];
    AVMutableCompositionTrack *compositionVideoTrack = [composition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
    BOOL ok = NO;

    AVAssetTrack * sourceVideoTrack = [[sourceAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];

    CMTimeRange x = CMTimeRangeMake(kCMTimeZero, [sourceAsset duration]);

    ok = [compositionVideoTrack insertTimeRange:x ofTrack:sourceVideoTrack  atTime:kCMTimeZero error:nil];
    CMTime fiveSecondsIn;
    if([Cell.text isEqualToString:@"Fast"]){
        fiveSecondsIn = CMTimeMake(10,1);
    }
    else if([Cell.text isEqualToString:@"Normal"]){
        fiveSecondsIn = CMTimeMake(1,1);
    }
    else if([Cell.textLabel.text isEqualToString:@"Slow"]){
        fiveSecondsIn = CMTimeMake(1,.5);
    }

    CMTimeRange video_timeRange = CMTimeRangeMake(kCMTimeZero,sourceAsset.duration);

    [compositionVideoTrack  scaleTimeRange:video_timeRange toDuration:fiveSecondsIn];

    if([[NSFileManager defaultManager] fileExistsAtPath:filePath]){
         [[NSFileManager defaultManager] removeItemAtPath:filePath error:nil];
    }

    NSURL    *exportUrl = [NSURL  fileURLWithPath:filePath];
    AVAssetExportSession *exporter = [[AVAssetExportSession alloc]initWithAsset:composition presetName:AVAssetExportPresetHighestQuality];
    exporter.outputURL=exportUrl;
    exporter.outputFileType = @"com.apple.quicktime-movie";
    [exporter exportAsynchronouslyWithCompletionHandler:^(void){

       [self performSelectorOnMainThread:@selector(playnewVideo) withObject:nil waitUntilDone:NO];

    }]; 
```

# iphone - 自定义视图作为标签栏，pushViewController 不起作用

> ID：14213015
> 
> 赞同：0
> 
> 时间：2013-01-08T10:34:46.760
> 
> 标签：iphone, xcode

使用自定义视图作为选项卡栏，它在委托中声明，以便它可以在所有视图上使用。但问题是 pushViewController 没有在那里实现。我正在使用自定义视图在底栏上获取导航控制器动画，因为这无法在标签栏上实现。那么，我怎样才能对条形按钮执行 pushViewController。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
// Override point for customization after application launch.
self.homeViewController = [[[HomeViewController alloc] initWithNibName:@"HomeViewController" bundle:nil] autorelease];

navController = [[UINavigationController alloc]initWithRootViewController:self.homeViewController];

navController.navigationBar.barStyle = UIBarStyleBlack;

[self.window addSubview:self.navController.view];

AppDelegate *appDelegate = (AppDelegate *)[UIApplication sharedApplication].delegate;   [appDelegate addCustomBottomBar];

[self.window makeKeyAndVisible];
return YES;
}

-(void)addCustomBottomBar{
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.5];
[UIView setAnimationTransition:UIViewAnimationTransitionNone forView:self.window cache:YES];

viewBotBar = [[UIView alloc]initWithFrame:CGRectMake(0, 402, 320, 79)];
viewBotBar.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"1aa.png"]];
[self.window addSubview:viewBotBar];
[self.window bringSubviewToFront:viewBotBar];

[UIView commitAnimations];

UIButton *btnHome = [UIButton buttonWithType:UIButtonTypeCustom];
btnHome.frame = CGRectMake(0, 25, 54, 50);
[btnHome setImage:[UIImage imageNamed:@""] forState:UIControlStateNormal];
[btnHome addTarget:self action:@selector(home) forControlEvents:UIControlEventTouchUpInside];
[viewBotBar addSubview:btnHome];

UIButton *btnLoc = [UIButton buttonWithType:UIButtonTypeCustom];
btnLoc.frame = CGRectMake(58, 25, 63, 50);
[btnLoc setImage:[UIImage imageNamed:@""] forState:UIControlStateNormal];
[btnLoc addTarget:self action:@selector(loc) forControlEvents:UIControlEventTouchUpInside];
[viewBotBar addSubview:btnLoc];

UIButton *btnSer = [UIButton buttonWithType:UIButtonTypeCustom];
btnSer.frame = CGRectMake(124, 25, 63, 50);
[btnSer setImage:[UIImage imageNamed:@""] forState:UIControlStateNormal];
[btnSer addTarget:self action:@selector(ser) forControlEvents:UIControlEventTouchUpInside];
[viewBotBar addSubview:btnSer];

UIButton *btnBook = [UIButton buttonWithType:UIButtonTypeCustom];
btnBook.frame = CGRectMake(190, 25, 63, 50);
[btnBook setImage:[UIImage imageNamed:@""] forState:UIControlStateNormal];
[btnBook addTarget:self action:@selector(book) forControlEvents:UIControlEventTouchUpInside];
[viewBotBar addSubview:btnBook];

UIButton *btnMore = [UIButton buttonWithType:UIButtonTypeCustom];
btnMore.frame = CGRectMake(256, 25, 62, 50);
[btnMore setImage:[UIImage imageNamed:@""] forState:UIControlStateNormal];
[btnMore addTarget:self action:@selector(more) forControlEvents:UIControlEventTouchUpInside];
[viewBotBar addSubview:btnMore];

btnDwn = [UIButton buttonWithType:UIButtonTypeCustom];
btnDwn.frame = CGRectMake(135, 0, 45, 28);
[btnDwn setImage:[UIImage imageNamed:@""] forState:UIControlStateNormal];
[btnDwn addTarget:self action:@selector(down) forControlEvents:UIControlEventTouchUpInside];
btnDwn.tag = 1;
[viewBotBar addSubview:btnDwn];
}

-(void)down
{
if (btnDwn.tag == 1) {
    // perform your required functionality
    btnDwn.tag = 2;

    CGRect newFrameSize = CGRectMake(0, 452, 320, 28);
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.0];
    viewBotBar.frame = newFrameSize;
    viewBotBar.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"bottom-hidden.png"]];
   // self.tabController.tabBar.hidden = YES;
    [UIView commitAnimations];

}
else if (btnDwn.tag == 2) {
    // perform your required functionality
    btnDwn.tag = 1;

    CGRect newFrameSize = CGRectMake(0, 402, 320, 79);
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.0];

    viewBotBar.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"1aa.png"]];
    viewBotBar.frame = newFrameSize;
     //self.tabController.tabBar.hidden = NO;
    [UIView commitAnimations];
}
}

-(void)loc
{
LocationViewController *location = [[LocationViewController alloc]init];
[self.navigationController pushViewController:location animated:YES];
}

-(void)ser
{
ServicesViewController *services = [[ServicesViewController alloc]initWithNibName:@"ServicesViewController" bundle:nil];
[self.navigationController pushViewController:services animated:YES];
}

-(void)book
{
BookingViewController *book = [[BookingViewController alloc]initWithNibName:@"BookingViewController" bundle:nil];
[self.navigationController pushViewController:book animated:YES];
}

-(void)more
{
MoreViewController *more = [[MoreViewController alloc]initWithNibName:@"MoreViewController" bundle:nil];
[self.navigationController pushViewController:more animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:47:32.280

use

```
self.window.rootViewController = self.navController; 
```

instead of

```
[self.window addSubview:self.navController.view]; 
```

see these custom `UITabBar` Demos Links..

1.  [Many Demos](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=tabbar)

2.  [PeekabooTabBarController](https://github.com/a1phanumeric/PeekabooTabBarController)

# c# - 获取 Windows 序列号（原为：Getting MachineGuid from Registry）

> ID：14213020
> 
> 赞同：13
> 
> 时间：2013-01-08T10:35:06.820
> 
> 标签：c#, windows, registry, wmi, serial-number

我正在尝试`MachineGuid`从注册表中获取，为我的许可证系统创建与操作系统的某种级别的绑定。从我可以使用的文档中

```
string key = "HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography";
string r = (string)Registry.GetValue(key, "MachineGuid", (object)"default"); 
```

为拿到它，为实现它。此外，文档告诉我，`"default"`当找不到名称或`null`密钥不存在时，我会得到。如果我无权访问，我应该得到一个安全异常。

上面的代码给了我`"default"`，这意味着找不到名字。但是，如果我用 RegEdit 查看注册表，它就在那里。如何在`MachineGuid`没有管理员权限的情况下从应用程序中获取值？

**更新**：使用时`reg.exe`我没有问题获得价值。

**更新**：我更新了标题，因此寻找确定 Windows 安装的独特方法的人也可以在这里找到。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-08T13:45:36.797

> 这可能就是为什么它不能在不同版本的 Windows 中可靠工作的原因

不，这不是原因。此问题是由您的 EXE 项目的平台目标选择引起的。项目 + 属性、构建选项卡、平台目标组合框。您将其设置为 x86 而不是 AnyCPU。在 VS2012 上，“首选 32 位”复选框很重要。此设置强制您的程序在 64 位版本的 Windows 上以 32 位模式运行。这有许多副作用，这里重要的是重定向对注册表项的访问。您的程序实际上正在读取 HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Cryptography\MachineGuid 的值。哪个不存在。

x86 选项是 VS2010 及更高版本的默认选项，之前 AnyCPU 是默认选项。Microsoft 更喜欢 x86，Visual Studio 更适合 32 位模式进程。特别是在调试时，VS 本身是一个 32 位进程，因此如果您的程序在 64 位模式下执行，则需要远程调试器。其中有一些限制，例如不支持混合模式调试。编辑 + 继续功能仅适用于 32 位代码。但是，如果您在 AnyCPU 上进行了设置，您的程序本身会“更好地”运行，包括不会被文件系统和 Windows 内置的注册表重定向 appcompat 功能所困扰。

如果您真的坚持使用 x86 模式，通常是因为您依赖于无法更新的 32 位本机代码，那么下一个解决方法是使用 .NET 4+ RegistryKey.OpenBaseKey() 方法。它允许您通过 RegistryView.Registry64，确保您将读取非重定向键。

当然，使用 WMI 是一种解决方法。请记住，当您使用 Win32_OperatingSystem.SerialNumber 时，您*不会*读取相同的信息。我不清楚不同机器上的密钥在多大程度上是可靠随机的，我们只是说这个值对于那些对为您的产品支付许可费不太感兴趣的用户来说是一个非常有吸引力的目标。

最后但并非最不重要的一点是，请考虑生成完全不依赖于 Windows 的您自己的唯一 ID 非常容易。具有相当大的优势，即当您的客户在他的机器上更新 Windows 时，您不会惹恼他。只需使用一次 Guid.NewGuid() 并将值存储在文件中。当驱动器出现故障时，这将丢失，但这通常也会导致您的产品失效。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-08T11:30:34.897

正如其他人已经指出的那样，您不应该直接从注册表中获取该值（这可能是它在不同版本的 Windows 中无法可靠工作的原因）。

稍微搜索一下，我就找到了[WMI 课程](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394554%28v=vs.85%29.aspx)。使用这个类，你实际上可以得到 Windows 序列号。我花了一些搜索和试验才能让它正确，但这是在 C# 中使用它的方法。[`Win32_OperatingSystem`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394239%28v=vs.85%29.aspx#methods)

确保您`System.Management.dll`的项目中有参考：

```
using System.Management;

...

ManagementObject os = new ManagementObject("Win32_OperatingSystem=@");
string serial = (string)os["SerialNumber"]; 
```

使用`[]`运算符，您可以获得类中的任何属性。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-12-01T18:25:37.270

我的拙见，没有一个答案能满足这个问题；非常直接地要求一种从注册表中读取 MachineGuid 的方法......所以这是我的答案：您需要添加对“Microsoft.Win32”的引用。此代码是为演示目的而编写的，应进行相应调整。

**编辑：**有人错误地指出 x64 代码是无用的。
在 64 位操作系统中，可以找到正确的密钥。

所以这个答案是唯一满足这个问题的答案。

```
private void buttonGetMachineGuid_Click(object sender, RoutedEventArgs e)
{
  try
  {
    string x64Result = string.Empty;
    string x86Result = string.Empty;
    RegistryKey keyBaseX64 = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Registry64);
    RegistryKey keyBaseX86 = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Registry32);
    RegistryKey keyX64 = keyBaseX64.OpenSubKey(@"SOFTWARE\Microsoft\Cryptography", RegistryKeyPermissionCheck.ReadSubTree);
    RegistryKey keyX86 = keyBaseX86.OpenSubKey(@"SOFTWARE\Microsoft\Cryptography", RegistryKeyPermissionCheck.ReadSubTree);
    object resultObjX64 = keyX64.GetValue("MachineGuid", (object)"default");
    object resultObjX86 = keyX86.GetValue("MachineGuid", (object)"default");
    keyX64.Close();
    keyX86.Close();
    keyBaseX64.Close();
    keyBaseX86.Close();
    keyX64.Dispose();
    keyX86.Dispose();
    keyBaseX64.Dispose();
    keyBaseX86.Dispose();
    keyX64 = null;
    keyX86 = null;
    keyBaseX64 = null;
    keyBaseX86 = null;
    if(resultObjX64 != null && resultObjX64.ToString() != "default")
    {
      MessageBox.Show(resultObjX64.ToString());
    }
    if(resultObjX86 != null && resultObjX86.ToString() != "default")
    {
      MessageBox.Show(resultObjX86.ToString());
    }
  }
  catch(Exception)
  {
  }
} 
```

希望这对某人有所帮助。

# nhibernate - 事务提交后休眠 LazyLoad

> ID：14213022
> 
> 赞同：0
> 
> 时间：2013-01-08T10:35:12.323
> 
> 标签：nhibernate, transactions, lazy-loading

如果我在使用 nHibernate 提交事务（为搜索选择对象而打开）后访问对象的“lazyLoad”属性会发生什么？

在我的测试用例中，这可以正常工作而不会出现任何错误，但这可以吗？

它来自 WF 实现，其中第一个操作选择要处理的对象，稍后在其他操作中可能会访问一些延迟加载属性（附件，...）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:57:47.530

> 如果我在使用 nHibernate 提交事务（为搜索选择对象而打开）后访问对象的“lazyLoad”属性会发生什么？

在事务完成后访问具有lazyLoad 属性的对象时，会启动新的隐式事务来加载该对象。

> 在我的测试用例中，这可以正常工作而不会出现任何错误，但这可以吗？

有时您在查询完成后必须加载这些对象时，您没有得到返回结果中的集合。例如，您已经设置了引用类（如附件）的映射。

# javascript - 如何在选择元素中添加自由文本选项？

> ID：14213023
> 
> 赞同：0
> 
> 时间：2013-01-08T10:35:13.813
> 
> 标签：javascript, jquery, forms, option

我需要构建一个内部带有空文本输入的选择元素，以允许用户添加新选项。我发现该插件：[http](http://codecanyon.net/item/wscombo-select-replacement/1066471) ://codecanyon.net/item/wscombo-select-replacement/1066471 （参见示例 5）但它似乎不再受支持，并且被最新的 jquery 版本破坏。任何人都知道可以提供帮助的东西吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:44:36.670

我不确定该框架是如何工作的，但我只是检查了一个示例。它似乎正在执行以下过程：

*   它有 1 个隐藏的选择框、1 个输入文本框和 1 个按钮
*   当您单击按钮时，它将获取选择框的所有元素并将其显示在绝对定位的 ul li 列表中。
*   当您单击 ul li 列表的任何元素时，它将将该值放入文本框中。或者您可以选择输入。当您键入该时间时，它会触发诸如 onChange 或 onKeyUp 之类的事件，并且仅显示 ul li 中与您的关键字匹配的那些列表项。

# andromda - AndroMDA 不生成代码

> ID：14213027
> 
> 赞同：1
> 
> 时间：2013-01-08T10:35:25.607
> 
> 标签：andromda

我最近开始使用 AndroMDA 并试图编写一个应用程序。我正在做以下事情：

*   使用 AndroMDA 原型创建项目
*   创建了两个实体类
*   为以上两个实体创建了两个值对象类
*   创建了一个服务类

现在当我运行`mvn install`maven 时找不到我的实体类，也找不到我的值对象类。

我刚刚生成了这些文件（`mvn install`在将实体引用提供给服务类之前我已经生成了）。

我的问题是为什么 AndroMDA 在使用它们之前不创建这些类？

# javascript - 在淘汰赛中将属性绑定到模型视图函数

> ID：14213030
> 
> 赞同：1
> 
> 时间：2013-01-08T10:35:29.017
> 
> 标签：javascript, knockout.js

## 我有：

`userAccess`目的：

```
var userAccess = new (
  function() {
      this.userLogedIn = false;
  }
); 
```

我有模型视图，绑定到 UI

```
var modelview = new (
  function(){             

     this.itemVisible = 
       function(data) {
           if(data.id === "ID2")
             return userAccess.userLogedIn;

            return true;
       };     

    this.items = [{id:"ID1", text:"text1"}, {id:"ID2", text:"text2"}];
  }
); 
```

在 UI 上，内部`foreach`绑定我有：

```
<span data-bind="text: text, visible:$parent.itemVisible($data)"> </span> 
```

所以元素的**可见性**绑定到's 函数。`span``modelview`

该函数根据其和 的值确定*当前*项目的可见性。`ID``userAccess`

## 问题：

在这种情况下，双向绑定不起作用。例如，如果我使`userAccess.userLogedIn = true`元素“ID2”不可见。

这是因为缺少`observable`，但在我看来，我不能在这种模式中拟合一个可观察的。

我也知道我可以手动更新绑定，但如果可能的话，我想避免这种情况。

我觉得我在这里遗漏了一些明显的东西。

[CodePen 上的完整源代码](http://codepen.io/Tigran/pen/njmiB)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:53:07.350

您可能应该重构整个设置以使用可观察对象。否则，由于缺少自动视图更新（如您所见），使用敲除没有多大意义。

```
var userAccess = new (
    function() {
        // It is likely that this value will change, so make it an observable!
        this.userLogedIn = ko.observable(false);
    }
);

// Create a "class" for the items in the list be able to encapsulate behavior /
// properties such as "is this item visible"?
var Item = function(id, text) {
    var self = this;

    self.id = id; // <-- will most likely never change (?) => not an observable
    self.text = ko.observable(text);

    // Use a "computed observable" for things that require more sophisticated logic
    self.visible = ko.computed(function() {
        if (self.id === "ID2") {
            return userAccess.userLogedIn(); // <-- observable = () required!
        } else {
            return true;
        }
    });
};

var modelview = new (
    function() {             
        this.items = ko.observableArray([
            new Item("ID1", "text1"), new Item("ID2", "text2")
        ]);
    }
); 
```

并在 HTML

```
<span data-bind="text: text, visible: visible"> </span> 
```

示例：http: [//jsfiddle.net/a89VL/](http://jsfiddle.net/a89VL/)

# java - 从 O(n)squre 到 O(n)cube 的算法复杂度

> ID：14213031
> 
> 赞同：-6
> 
> 时间：2013-01-08T10:35:29.420
> 
> 标签：java, performance, algorithm, time-complexity

我正在大学做研究我需要将以下算法的时间复杂度从算法复杂度从 O(n)square 更改为 O(n)cube 来做一些措施

```
public class bubble_sort_alg {

public void bubbleSort(int[] arr) {

    boolean swapped = true;

    int j = 0;

    int tmp;

    while (swapped) {

        swapped = false;

        j++;

        for (int i = 0; i < arr.length - j; i++) {

            if (arr[i] > arr[i + 1]) {

                tmp = arr[i];

                arr[i] = arr[i + 1];

                arr[i + 1] = tmp;

                swapped = true;

            }

        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:42:19.217

`Why do you want to do that ?`

如果这是您的要求，那么内部`for`循环再次遍历所有项目，`(arr.length)`这将产生 n 多维数据集复杂度

# javascript - 在 JavaScript / JQuery 中使迭代更具功能性

> ID：14213034
> 
> 赞同：1
> 
> 时间：2013-01-08T10:35:37.557
> 
> 标签：javascript, functional-programming

我编写了一段简单的 JavaScript 来创建 HTML 表格。
它是通过迭代数组来填充的

```
var resultSet;
for (var i = 0, i < questions.length;; i++){ 
   ...
    resultSet += '<tr>' + '<td>' + i + '</td><td>' + questions[i].question + '</td><td>' + questions[i].userAnswer + '</td><td>' +
questions[i].correctAnswer + '</td>' + '</tr>';
} 
```

所以这是一种势在必行的方法。我正在阅读有关 Scala 的内容，其中类似的示例是：

```
questions.map(n => '<tr>' + '<td>' + '</td><td>' + questions[i].question  + ...); 
```

这是一个功能。重点是什么而不是如何。

所以我想知道如何让我的 JavaScript 更实用？

当然允许使用 JQuery。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T10:46:00.433

然而， Javascript[`Array.forEach`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)的兼容性有限：虽然所有其他浏览器都支持它，但 IE 仅从 IE9 开始支持它——因此您可能需要其他 IE 的 shim。

基本上你可以写：

```
questions.forEach(function(a){
resultSet += '<tr><td>' + a.question + '</td><td>' + 
             a.userAnswer + '</td><td>' +
             a.correctAnswer + '</td></tr>';
}); 
```

jQuery 提供[`.each()`](http://api.jquery.com/jQuery.each/)了相同的功能：

```
$.each(questions, function(index, value) {
  /* Do your stuff*/
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T10:42:13.813

首先，正确的 Scala 将是

```
questions.map(q => '<tr>' + '<td>' + '</td><td>' + q.question  + ...); 
```

其中`q`是 的元素`questions`，而不是索引。

JavaScript 也有[`map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)（请参阅末尾的浏览器兼容性了解支持此方法的浏览器）。所以它是一样的：

```
questions.map(function(q) { 
  return '<tr>' + '<td>' + '</td><td>' + q.question + ... 
}); 
```

# titanium - Titanium appcelerator 是否值得在 ipad、iphone 和 android 上开发复杂的应用程序？

> ID：14213040
> 
> 赞同：0
> 
> 时间：2013-01-08T10:35:51.463
> 
> 标签：titanium, appcelerator

Titanium appcelerator 是否值得在 ipad、iphone 和 android 上开发复杂的应用程序？哪些可以支持图表、网格、小部件和日程控制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:02:09.940

Mr.Seyal，Titanium Appcelerator 支持所有原生控件（直到 iPhone 4）。我认为图表、网格、小部件和时间表控件只是第三方控件。在 Titanium 中使用这些控件非常困难。您可以选择使用[webview](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.WebView)。您需要使用 html 绘制图形并需要使用 webview 加载它。但是您不能将其用于其他目的，例如创建网格或使用其他控件

您可以选择使用[Phonegap](http://phonegap.com/)，它是一个跨平台，支持您的所有要求（插件可满足您的要求）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T10:38:21.317

不，它不支持每个设备的所有本机功能。例如，Android 中的用户界面需要一个小部件。Appcelerator 不支持该功能，因为它特定于 Android。

# linux - 如何在 shell 脚本中获得函数列表？

> ID：14213044
> 
> 赞同：0
> 
> 时间：2013-01-08T10:35:56.830
> 
> 标签：linux, list, function, shell, typeset

我想在 shell 脚本（我正在采购的 shell 脚本函数库）中生成所有函数的列表。目前，我正在尝试以下方式排版：

```
typeset -f
typeset -F
typeset -F | awk -F"declare -f " '{print $2}' | grep -v '_' 
```

我遇到的一个困难是列出了一些不在函数库中的函数，我不知道如何从函数列表中删除这些函数或如何以更好的方式生成函数列表。我欢迎您对此有任何想法。

一个好处是按照函数在 shell 脚本中出现的顺序生成函数列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:23:25.853

我假设 bash 是外壳。排版（或声明）显示当前环境，函数是环境的一部分：

*   环境中没有固有的顺序（名称按输出排序）
*   不需要的功能可能是从环境中继承的，之前已使用 declare -x 标记为导出

您可以尝试使用“env”在干净的环境中启动脚本，尝试：

```
env -i "PATH=$PATH" "TERM=$TERM" "LANG=$LANG" myscript.sh 
```

作为起点。

此处记录了在 bash 中枚举函数的最佳方法：[Where is function's declaration in bash？](https://stackoverflow.com/questions/1444078/where-is-functions-declaration-in-bash) 请注意，“declare -F”不会规范化文件名，它将被调用/获取。

```
while read xx yy fn; do
    func=( $(shopt -s extdebug; declare -F $fn) )
    printf  "%-30s %4i %-30s\n" "${func[@]:2}" "${func[1]}" "${func[0]}"
done < <(declare -F) 
```

您需要做的就是按所需文件名过滤，然后按行号排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:29:24.613

我的一种方法如下（代码包含在函数库脚本中）：

```
initialListOfFunctionsInEnvironment="$(typeset -F | awk -F"declare -f " '{print $2}')"
# declare functions
finalListOfFunctionsInEnvironment="$(typeset -F | awk -F"declare -f " '{print $2}')"
diff  <(echo "${initialListOfFunctionsInEnvironment}" ) <(echo "${finalListOfFunctionsInEnvironment}") | grep -E '^(<|>)' | awk -F"> " '{print $2}' 
```

这似乎会生成一个简单的列表，其中列出了在获取函数库脚本时添加到环境中的所有函数。对这种方法的批评将不胜感激。

# clojure - 将函数应用于具有常量参数的集合元素

> ID：14213046
> 
> 赞同：2
> 
> 时间：2013-01-08T10:36:07.567
> 
> 标签：clojure

> **可能重复：**
> [用常数映射序列](https://stackoverflow.com/questions/5190004/mapping-over-sequence-with-a-constant)

我正在尝试执行以下操作（只是一个示例）：

```
(defn f [x param] ( 
  ; do something with "x" AND with "param"
  ))
(defn filtered-list [param] (map f ["a" "b" "c"]))
; called later as
(filtered-list 123)
; expected calls are: (f "a" 123), (f "b" 123) and (f "c" 123) 
```

所以，我需要找到一种方法来传递`param`给`f`，被`map`. 在 Clojure 中可以吗？这个特征也可以称为[“功能闭包”](http://en.wikipedia.org/wiki/Closure_(computer_science))。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:48:34.250

用于`partial`从 f 创建一个柯里化函数，并传递参数

```
(defn f [param x] ( 
  ; do something with "x" AND with "param"
  ))

(defn filtered-list [param] (map (partial f param) ["a" "b" "c"])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T10:48:44.120

使用[partial](http://clojuredocs.org/clojure_core/1.3.0/clojure.core/partial)怎么样？

```
(defn f [param x]  
    (str param \- x) ;; do something
)

(defn filtered-list 
    [param] 
    (map (partial f param) ["a" "b" "c"])) 
```

但是，您必须更改 的参数的顺序`f`。

# ember.js - 如何制作“案例”？

> ID：14213047
> 
> 赞同：1
> 
> 时间：2013-01-08T10:36:16.570
> 
> 标签：ember.js

我需要显示关于变量的不同视图。我已经开始使用 #if 或 #if else 但是否可以提出案例？

是否可以使用多个 #if 来实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T11:05:30.910

我认为最好的替代方法（也是 Ember.js 所鼓励的）是在你的视图（或控制器）中定义一个计算属性，在这个中创建你的 switch case，然后直接使用模板中的计算属性。

在您显示多个视图的情况下，我认为您必须实现容器视图，并使用其 currentView 属性。这应该直接在javascript中完成。如果您提供更多使用细节，也许我可以告诉您如何开始。

# php - PHP中多个文件的问题

> ID：14213048
> 
> 赞同：0
> 
> 时间：2013-01-08T10:36:20.550
> 
> 标签：php, ajax, html, file-upload

首先，我很抱歉我的英语不好。

我想使用 HTML5 + JavaScript + PHP 将多个文件上传到服务器

用 HTML 和 JS 做就好像模拟做一样。正确操作。

```
<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style>
  .thumb {
    height: 75px;
    border: 1px solid #000;
    margin: 10px 5px 0 0;
  }
</style>
</head>

<body>

<form action="lanzar.php" enctype="multipart/form-data" method="post"  >
<input type="file" id="files"  name="files[]" multiple />
<input type="submit" />
<input type="reset"/>
<output id="list"></output>
</form>

<script>
  function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object

    // Loop through the FileList and render image files as thumbnails.
    for (var i = 0, f; f = files[i]; i++) {

      // Only process image files.
      if (!f.type.match('image.*')) {
        continue;
      }

      var reader = new FileReader();

      // Closure to capture the file information.
      reader.onload = (function(theFile) {
      return function(e) {
      // Render thumbnail.
      var span = document.createElement('span');
          span.innerHTML = ['<img class="thumb" src="', e.target.result,'" title="', escape(theFile.name), '"/>'].join('');
          document.getElementById('list').insertBefore(span, null);
        };
      })(f);

      // Read in the image file as a data URL.
      reader.readAsDataURL(f);
    }
  }

  document.getElementById('files').addEventListener('change', handleFileSelect, false);
</script>
</body>
</html> 
```

然后我有一个简单的 PHP 代码可以显示图像。我的问题是只到最后一个被选中的文件。案子没有休息。就好像数组不是制作数据的正确方法。

```
if(isset($_FILES['files']['tmp_name'])){
    echo $num_files = count($_FILES['files']['tmp_name']);

    foreach($_FILES['files']['name'] as $key =>$value){

        is_uploaded_file($_FILES['files']['tmp_name'][$key]);

        $origen = $_FILES['files']['tmp_name'][$key];
        $destino = "img/".$_FILES['files']['name'][$key];
        move_uploaded_file($origen, $destino);
    }
} 
```

我在做什么坏事？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:07:28.907

我认为您的脚本运行良好，因为我在本地服务器上对其进行了测试，所有图像都正在上传。请再检查一次。

# xml - 尝试使用 xslt 将 CDATA 文本插入 xml

> ID：14213049
> 
> 赞同：0
> 
> 时间：2013-01-08T10:36:24.163
> 
> 标签：xml, xpath, xslt-1.0

> **可能重复：**
> [尝试将 CDATA 部分插入 xml](https://stackoverflow.com/questions/14215573/trying-to-insert-cdata-section-into-a-xml)

我正在尝试插入 xml 但低于错误 XSLT 错误 (javax.xml.transform.TransformerException): XML 文档结构必须在同一实体内开始和结束。线程“main”java.lang.RuntimeException 中的异常：XML 文档结构必须在同一个实体内开始和结束。

输入xml

```
 <Create>
 <requestXml>
 <ISD_XMLGateway>
  <Entity>HLR_ALC</Entity>
  <Origin>Comverse One</Origin>
  <Log_Level>0</Log_Level>
  <Params>
  <Param Name="HLR_System" Value="JT"/>
  <Param Name="HLR_ALC_Command" Value="Send_HLR_Command"/>
  <Param Name="HLR_Command"   Value="CRESBX:MSIN=Start43515213,MODEL=MODEL002,SNBSV=7797098765-TEL;"/>
     </Params>
                                         </ISD_XMLGateway>
                          </requestXml>
            </Create> 
```

输出我期望的是

```
 <Create>
 <requestXml><![CDATA[
 <ISD_XMLGateway>
 <Entity>HLR_ALC</Entity>
 <Origin>Comverse One</Origin>
 <Log_Level>0</Log_Level>
 <Params>
  <Param Name="HLR_System" Value="JT"/>
  <Param Name="HLR_ALC_Command" Value="Send_HLR_Command"/>
   <Param Name="HLR_Command" Value="CRESBX:MSIN=Start43515213,MODEL=MODEL002,SNBSV=7797098765-TEL;"/>
   </Params>
   </ISD_XMLGateway>]]>
                          </requestXml>
            </Create> 
```

在 XSL 中，我在 requestXml 节点之后添加了两个文本节点，如下所示 `<xsl:text disable-output-escaping="yes">&lt;![CDATA[</xsl:text> <xsl:text disable-output-escaping="yes">]]&gt;</xsl:text>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:12:37.633

将元素的内容输出为 CDATA 部分很容易使用`cdata-section-elements`属性打开，`xsl:output`但您似乎还希望`requestXml`在输入 XML 中序列化元素内的节点以形成 CDATA 部分的内容。要进行序列化，您要么需要检查您的 XSLT 处理器是否支持执行此操作的扩展，要么您需要使用 XSLT 1.0 样式表来执行此操作，例如[http://lenzconsulting.com/xml-to-string/](http://lenzconsulting.com/xml-to-string/)上提供的。

然后，您可以导入该样式表并按如下方式使用它：

```
<xsl:stylesheet version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:import href="xml-to-string.xsl"/>

<xsl:output method="xml" cdata-section-elements="requestXml"/>

<xsl:template match="/">
  <xsl:apply-templates/>
</xsl:template>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="requestXml">
  <xsl:copy>
    <xsl:call-template name="xml-to-string">
      <xsl:with-param name="node-set" select="node()"/>
    </xsl:call-template>
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

这样输入

```
<Create>
 <requestXml>
 <ISD_XMLGateway>
  <Entity>HLR_ALC</Entity>
  <Origin>Comverse One</Origin>
  <Log_Level>0</Log_Level>
  <Params>
  <Param Name="HLR_System" Value="JT"/>
  <Param Name="HLR_ALC_Command" Value="Send_HLR_Command"/>
  <Param Name="HLR_Command"   Value="CRESBX:MSIN=Start43515213,MODEL=MODEL002,SNBSV=7797098765-TEL;"/>
     </Params>
                                         </ISD_XMLGateway>
                          </requestXml>
            </Create> 
```

转化为结果

```
<Create>
 <requestXml><![CDATA[
 <ISD_XMLGateway>
  <Entity>HLR_ALC</Entity>
  <Origin>Comverse One</Origin>
  <Log_Level>0</Log_Level>
  <Params>
  <Param Name="HLR_System" Value="JT"/>
  <Param Name="HLR_ALC_Command" Value="Send_HLR_Command"/>
  <Param Name="HLR_Command" Value="CRESBX:MSIN=Start43515213,MODEL=MODEL002,SNBSV=7797098765-TEL;"/>
     </Params>
                                         </ISD_XMLGateway>
                          ]]></requestXml>
            </Create> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:57:22.013

此页面似乎有您正在寻找的答案： [http ://www.bernzilla.com/2008/02/12/utilizing-cdata-section-elements-in-xsl/](http://www.bernzilla.com/2008/02/12/utilizing-cdata-section-elements-in-xsl/)

您是否尝试过我为您对这个问题的其他表述提出的解决方案？ [我想用 > 替换 > 对于我的 xml 中的一些节点，使用 xslt](https://stackoverflow.com/questions/14126812/i-want-to-replace-with-gt-for-some-of-my-nodes-in-my-xml-using-xslt/14163310#14163310)

# php - symfony2 和 symfony1 应用相同的密码加密

> ID：14213053
> 
> 赞同：3
> 
> 时间：2013-01-08T10:36:37.470
> 
> 标签：php, security, symfony, symfony-1.4

我有一个带有 sfGuardUser 插件的 symfony1 应用程序。我需要在我的新 symfony2 应用程序中使用相同的数据库。

我应该如何定义密码编码器以匹配 symfony1 编码的密码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T13:36:05.213

如果您当时没有提供不同的编码算法，那么 Symfony 1.x 将使用`sha1($salt.$rawPassword)`. 所以你的 PasswordEncoder 应该是这样的：

```
use Symfony\Component\Security\Core\Encoder\PasswordEncoderInterface;

class PasswordEncoder implements PasswordEncoderInterface
{
    public function encodePassword($raw, $salt)
    {
        return sha1($salt.$raw);
    }

    public function isPasswordValid($encoded, $raw, $salt)
    {
        return $this->encodePassword($raw, $salt) === $encoded;
    }
} 
```

祝你好运！

# android - 安卓标签。使用布局打开每个选项卡的新活动包括

> ID：14213057
> 
> 赞同：0
> 
> 时间：2013-01-08T10:36:52.183
> 
> 标签：android, android-intent, tabs

> **可能重复：**
> [在android所有活动上设置标签栏底部](https://stackoverflow.com/questions/14120910/set-the-tabbar-bottom-on-android-all-activities)

我有一个带有 3 个选项卡的应用程序。每个选项卡打开一个布局。我使用包含选项。

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TabHost
        android:id="@android:id/tabhost"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >
            </TabWidget>

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

                <include
                    android:id="@+id/tab1_ref"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    layout="@layout/tab1" />

                <include
                    android:id="@+id/tab2_ref"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    layout="@layout/tab2" />

                <include
                    android:id="@+id/tab3_ref"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    layout="@layout/tab3" />
            </FrameLayout>
        </LinearLayout>
    </TabHost>

</LinearLayout> 
```

主要活动有以下代码：

```
 public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

         //Prueba con TABS
        Resources res = getResources();

        TabHost tabs=(TabHost)findViewById(android.R.id.tabhost);
        tabs.setup();

        TabHost.TabSpec spec=tabs.newTabSpec("Tab 1");
        spec.setContent(R.id.tab1_ref);
        spec.setIndicator("Tab 1", null);
        tabs.addTab(spec);

       //Dont WORK the Intent 
       // Intent tab1Intent = new Intent(this, Tab1Activity.class);
       // spec.setContent(tab1Intent);

        spec=tabs.newTabSpec("Tab 2");
        spec.setContent(R.id.tab2_ref);
        spec.setIndicator("Tab 2", null);
        tabs.addTab(spec);

        spec=tabs.newTabSpec("Tab 3");
        spec.setContent(R.id.tab3_ref);
        spec.setIndicator("Tab 3", null);
        tabs.addTab(spec);

        tabs.setCurrentTab(0);

        tabs.setOnTabChangedListener(new OnTabChangeListener() {
            public void onTabChanged(String tabId) {
                Toast.makeText(getApplicationContext(),"Pulsada pestaña: " + tabId, Toast.LENGTH_LONG).show();
            }
        });
        //Fin prueba tabs
    } 
```

这项工作，当我推入不同的选项卡时，我可以看到不同的布局。

但是，当我激活新布局时如何打开新活动？例如，如果我推入 tab2 打开 tab2activity.class。我试过这个并且出现异常：

```
Intent tab1Intent = new Intent(this, Tab1Activity.class);
 spec.setContent(tab1Intent); 
```

激活新布局时如何打开新活动？

最好的祝福。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:28:13.180

请编写以下代码而不是您的代码以在一个 TabActivity 中添加多个活动，它将解决您的问题。

ActivityStack.java

```
private Stack stack;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (stack == null)
        stack = new Stack<String>();
    // start default activity
    push("FirstStackActivity", new Intent(this, Tab_SampleActivity.class));
}

@Override
public void finishFromChild(Activity child) {
    pop();
}

@Override
public void onBackPressed() {
    pop();
}

public void push(String id, Intent intent) {
    Window window = getLocalActivityManager().startActivity(id, intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
    if (window != null) {
        stack.push(id);
        setContentView(window.getDecorView());
    }
}

public void pop() {
    if (stack.size() == 1)
        finish();
    LocalActivityManager manager = getLocalActivityManager();
    manager.destroyActivity(stack.pop(), true);
    if (stack.size() > 0) {
        Intent lastIntent = manager.getActivity(stack.peek()).getIntent();
        Window newWindow = manager.startActivity(stack.peek(), lastIntent);
        setContentView(newWindow.getDecorView());
    }
} 
```

TabActivity.java

```
public class TabActivity extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tab_screen);
        TabHost tabHost = getTabHost();
        Intent intent = new Intent().setClass(this, ActivityStack.class);
        TabHost.TabSpec spec = tabHost.newTabSpec("tabId").setIndicator("Temp", getResources().getDrawable(R.drawable.home));
        spec.setContent(intent);

        tabHost.addTab(spec);

        Intent intent1 = new Intent().setClass(this, ActivityStack.class);
        TabHost.TabSpec spec1 = tabHost.newTabSpec("tabId").setIndicator("Temp", getResources().getDrawable(R.drawable.invoice));
        spec1.setContent(intent1);
        tabHost.addTab(spec1);

        tabHost.setCurrentTab(0);
    }
} 
```

第一活动.java

```
public class FirstActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TextView textView = new TextView(this);
        textView.setText("Tab Sample Activity ");
        textView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent intent = new Intent();
                intent.setClass(getParent(), SecondActivity.class);
                ActivityStack activityStack = (ActivityStack) getParent();
                activityStack.push("SecondActivity", intent);
            }
        });
        setContentView(textView);
    }
} 
```

SecondActivity.java

```
public class SecondActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TextView textView = new TextView(this);
        textView.setText("First Stack Activity ");
        textView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent intent = new Intent();
                intent.setClass(getParent(), ThirdActivity.class);
                ActivityStack activityStack = (ActivityStack) getParent();
                activityStack.push("ThirdActivity", intent);
            }
        });
        setContentView(textView);
    }
} 
```

第三活动.java

```
public class ThirdActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

将以下 XML 文件添加到您的 res/layout 文件夹中。

1) tab_screen.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:padding="3dp" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_above="@android:id/tabs"
            android:layout_weight="1" />

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true" />
    </RelativeLayout>

</TabHost> 
```

2) main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

</LinearLayout> 
```

AndroidManifest.xml:-

```
<?xml version="1.0" encoding="utf-8"?>

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.android.tabsample"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".FirstActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".TabActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ActivityStack"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".SecondActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ThirdActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

有关在一个 TabActivity 下添加多个活动的更多信息，请参阅下面的链接到我的博客，并附上完整的示例。

[Android - 一个 TabActivity 下的多个 Android 活动](http://androidcodeexamples.blogspot.in/2012/08/multiple-android-activities-in.html)

# android - 不同安卓版本的字体变化

> ID：14213060
> 
> 赞同：1
> 
> 时间：2013-01-08T10:36:55.993
> 
> 标签：android, fonts, textview, version

我在 textview 上使用 sp 而不是 dp 作为 textsize，我的设备（7 英寸）android 版本是 4.1.1，但它的字体更改并且在具有相同英寸但 Android 3.2 的设备上变大。我该如何防止这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:42:10.563

与屏幕尺寸无关，不同的设备可以有不同的屏幕分辨率，从而产生不同的屏幕密度。因此，您应该始终使用与设备无关的像素，因此最好的办法是根据您的字体大小从 SP 切换到 DP。每个设备都会以不同的方式处理 SP。

系统将根据其分辨率自动缩放。

更多关于 Android 上的像素密度和屏幕分辨率及其对开发人员的意义，请参见[此处](http://developer.android.com/guide/practices/screens_support.html)。

**编辑：（**来自下面的评论）

您可以将自己的字体添加到项目中，方法是将其放置在您的资产文件夹中并调用

`Typeface tf = Typeface.createFromAsset(getContext().getAssets(), "myFont.ttf");`

其次是

```
TextView.setTypeface(tf ,1); 
```

# asp.net - asp.net 动态创建了 n 个下拉列表并取选定的索引值

> ID：14213061
> 
> 赞同：1
> 
> 时间：2013-01-08T10:36:58.850
> 
> 标签：asp.net, vb.net

我创建了一个动态下拉列表，下拉列表的数量等于所选月份的总天数。

我已将所有下拉列表放入，`asp:table`但我无法获取数据表单下拉列表，也无法触发`selectedindexchange`事件。

我的代码如下

```
Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
        Table2.Rows(0).Cells(0).Text = v1_drop_month.SelectedItem.Text
        helper.return_month(v1_drop_month.SelectedItem.Text)

        i = 1
        For row = 0 To 6
            For cell = 1 To 7

                Dim dd As New DropDownList

                Dim label As New Label
                If row = 0 And cell = 1 Then
                    Table2.Rows(row).Cells(cell - 1).BackColor = Drawing.Color.Teal
                ElseIf row = 1 Then
                    Table2.Rows(1).Cells(cell - 1).Font.Size = 14
                    Table2.Rows(1).Cells(cell - 1).HorizontalAlign = HorizontalAlign.Center
                    Table2.Rows(1).Cells(cell - 1).ForeColor = Drawing.Color.White
                    Table2.Rows(1).Cells(cell - 1).BackColor = Drawing.Color.Black

                ElseIf row >= 2 Then
                    If i <= helper.month_num Then

                        dates = helper.Month_no & "-" & i & "-" & v1_drop_month.SelectedItem.Text.Substring(4, 4)
                        day = New DateTime(v1_drop_month.SelectedItem.Text.Substring(4, 4), helper.Month_no, i)

                        If Table2.Rows(1).Cells(cell - 1).Text = day.DayOfWeek.ToString() Then
                            label.Text = i
                            label.Font.Size = 20
                            label.ForeColor = Drawing.Color.Red
                            Table2.Rows(row).Cells(cell - 1).HorizontalAlign = HorizontalAlign.Right
                            label.ID = row & "-" & cell

                            Table2.Rows(row).Cells(cell - 1).Controls.Add(label)
                            If day.DayOfWeek.ToString() <> "Sunday" Then
                                label.ForeColor = Drawing.Color.Blue

                                Table2.Rows(row).Cells(cell - 1).Controls.Add(dd)
                                dd.ID = "dd" & row & "-" & cell

                                sql = String.Empty
                                sql = "select distinct route_number from fr_route where territory='" & v1_drop_territory.SelectedItem.Text & "' and state='" & v1_drop_state.SelectedItem.Text & "' and hq='" & v1_drop_hq.SelectedItem.Text & "'"
                                helper.dropdown_change(sql, "route_number", dd)

                                Table2.Rows(row).Cells(cell - 1).BackColor = Drawing.Color.SkyBlue
                                dd.BackColor = Drawing.Color.Khaki
                                Table2.Rows(row).Cells(cell - 1).Height = 50

                            End If

                            i = i + 1
                        End If
                    Else

                    End If
                End If
            Next
        Next
        v1_but_save.Visible = True
        v1_but_reset.Visible = True
        v1_but_send.Visible = True

    End Sub 
```

我已经用于`asp:table`显示下拉菜单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:01:31.010

为下拉列表启用“AutoPostBack=True”

# informatica-powercenter - Informatica 的标准数据类型

> ID：14213066
> 
> 赞同：3
> 
> 时间：2013-01-08T10:37:31.990
> 
> 标签：informatica-powercenter, informatica

我在某个地方读过，但我很困惑。他们问，informatica 的数据类型。Informatica 是一种工具，而不是一种编程语言。那么，informatica 如何拥有自己的数据类型。如果它仍然可用，请告诉我。

还告诉我，什么是 informatica 数据类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T11:34:03.683

*数据类型*不是编程语言独有的概念。Excel 是一种工具，但您可以将单元格的数据类型（在 Excel 中称为*类别*`Number`）设置为、`Date`和`Percentage`其他一些类型。

不同的转换支持不同的数据类型，但这里有一个表达式列表：

*   `bigint`
*   `binary`
*   `date/time`
*   `decimal`
*   `double`
*   `integer`
*   `nstring`
*   `ntext`
*   `real`
*   `small integer`
*   `string`
*   `text`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-02T18:31:32.037

Informatica 有自己的一组数据类型，因为它有助于将任何源数据类型（数据库/文件）转换为`Informatica compatible datatypes for further processing.`

Whenever you drag any source definition in a mapping it automatically creates a source qualifier which converts source datatypes into suitable Informatica datatypes.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-09-07T14:31:20.777

*In informatica various data types are supported ( depending on transformation and clients requirements) . Below are the most usable data types :*

1.  bigint
2.  small integer
3.  date/time
4.  date
5.  decimal
6.  double
7.  integer
8.  nstring
9.  string

# javascript - 为什么 window.scrollTo() 在页面加载时不起作用？

> ID：14213070
> 
> 赞同：5
> 
> 时间：2013-01-08T10:37:48.020
> 
> 标签：javascript, scroll

我在页面上有一些选项卡式内容，URL 中有散列段，可将您带到正确的选项卡内容。没有什么不寻常的。但是，由于选项卡位于页面下方很短的位置，因此当有人在 URL 中使用哈希目标访问时，他们会被放到页面下方的选项卡位 - 这会切断顶部导航栏和面包屑。

我不希望这种情况发生。这让人迷失方向。

我认为纠正起来很简单：类似于：

```
$(function(){
window.scrollTo(0,0)
}); 
```

那是行不通的。您仍然会被丢弃在哈希锚点处。

我试过在 window.load() 上调用它。我尝试将脚本从 <head> 移动到 . 我试过 window.scrollTo 和 window.scroll。没有任何效果。我能够真正将我移回页面顶部的唯一脚本是：

```
$(function(){
    setTimeout(function(){
        window.scrollTo(0,0)
    },2000);
}); 
```

...这比根本不滚动还要糟糕。

为什么别的什么都行不通？我做错了什么，还是有其他什么阻止我将用户移回页面顶部？

====================== 编辑：

一个例子（你可能想用更多的 Lorem paras 来填充它）。将其保存到一个新的 HTML 文件，然后转到 #hash1 URL：

```
<!doctype html>
<html lang="en">

<head>
<meta http-equiv="Content-type" content="text/html;charset=utf-8" />
<title>Load</title>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script type="text/javascript">
/*

// doesn't work
$(function(){
    window.scrollTo(0,0);
});

// doesn't work
$(window).on('load', function(){
    window.scrollTo(0,0);
});

// doesn't work
window.scrollTo(0,0);

// works, but horrible UX.
$(function(){
    setTimeout(function(){
        window.scrollTo(0,0)
    },2000);
});

*/
</script>

</head>

<body>

    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
    tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
    consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
    cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
    proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

    <p><a name="hash1"></a>Hash 1</p>

<script type="text/javascript">
    // doesn't work
    // window.scrollTo(0,0);
</script>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:48:05.903

browsers will scroll on certains conditions (hashtags, restoring the previous scroll state when doing F5, focusing elements or calling scrollIntoView). Scroll events won't be fired in all these cases.

Unfortunately, I haven't found any reliable way to avoid this.

First, I suggest you monitor scroll events on window, and see if you can cancel the event.

If it doesn't work, I see no solution but to move your anchors to the top, or just remove them.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:09:02.973

-> 你的 jquery 函数很可能不会被调用 onLoad 可以发布一个简单的代码示例 -> 使用 javascript 而不是 jquery 这个函数滚动到 html 文件加载的指定位置。

```
<html>
<head>
  <script>
  function windowscroll(yscroll,scrollspeed){
  //alert('hi');
  window.scrollBy(0,-9000);//initial scroll to the top of the page
  for (var iscroll=0;iscroll<yscroll;iscroll++){
    setTimeout('window.scrollBy(0,' + iscroll + ')',scrollspeed*iscroll);
  }
  }
  </script>
  </head>
  <body onLoad="windowscroll(0,0)">
  <div>
  Click here</div>
 <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
 <br/><br/><br/>asdasd asdasf sdfgsdf<br/><br/><br/><br/>
 <br/><br/><br/><br/><br/><br/>zxd<br/><br/><br/><br/><br/>

 zxc dsf sdf asdf
 <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
 <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
 <br/><br/><br/><br/><br/><br/>
 <br/>dasfsdf<br/><br/>
 </body>
</html> 
```

# ssis - 如何在 COZYROC 查找加结果列中添加多列

> ID：14213072
> 
> 赞同：1
> 
> 时间：2013-01-08T10:38:03.237
> 
> 标签：ssis

查找加

在 Lookup 定义中，我们有输入 Column,Reference result Column,no Null 和 No Match 。

我们如何将多个列添加到结果列中。

在结果列中，我需要从我的表中添加多个列。

我怎么能得到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:24:02.327

我没有经常使用该组件，但似乎您可以添加第二行：

如果您的行是：

```
Input column   :   Reference    :  Result column   : On NULL : No Match

    ID             lkpID           Desc              0         0 
```

通过开始在行中输入“*”来添加另一行，以引入额外的列，如下所示：

```
 ID             lkpID           CodeValue         0         0 
```

# javascript - 是什么让 my.class.js 如此之快？

> ID：14213074
> 
> 赞同：-3
> 
> 时间：2013-01-08T10:38:20.103
> 
> 标签：javascript, oop, instantiation, jsperf

我一直在查看[my.class.js](https://github.com/jiem/my-class/blob/master/my.class.js)的源代码，以了解是什么让它在 Firefox 上运行得如此之[快。](http://jsperf.com/oop-benchmark/107 "JavaScript 面向对象库基准测试 · jsPerf")这是用于创建类的代码片段：

```
my.Class = function () {
    var len = arguments.length;
    var body = arguments[len - 1];
    var SuperClass = len > 1 ? arguments[0] : null;
    var hasImplementClasses = len > 2;
    var Class, SuperClassEmpty;

    if (body.constructor === Object) {
        Class = function () {};
    } else {
        Class = body.constructor;
        delete body.constructor;
    }

    if (SuperClass) {
        SuperClassEmpty = function() {};
        SuperClassEmpty.prototype = SuperClass.prototype;
        Class.prototype = new SuperClassEmpty();
        Class.prototype.constructor = Class;
        Class.Super = SuperClass;
        extend(Class, SuperClass, false);
    }

    if (hasImplementClasses)
        for (var i = 1; i < len - 1; i++)
            extend(Class.prototype, arguments[i].prototype, false);    

    extendClass(Class, body);

    return Class;
}; 
```

该`extend`函数仅用于将第二个对象的属性复制到第一个对象（可选地覆盖现有属性）：

```
var extend = function (obj, extension, override) {
    var prop;
    if (override === false) {
        for (prop in extension)
            if (!(prop in obj))
                obj[prop] = extension[prop];
    } else {
        for (prop in extension)
            obj[prop] = extension[prop];
        if (extension.toString !== Object.prototype.toString)
            obj.toString = extension.toString;
    }
}; 
```

该`extendClass`函数将所有静态属性复制到类上，并将所有公共属性复制到类的原型上：

```
var extendClass = my.extendClass = function (Class, extension, override) {
    if (extension.STATIC) {
        extend(Class, extension.STATIC, override);
        delete extension.STATIC;
    }
    extend(Class.prototype, extension, override);
}; 
```

这一切都很简单。当你创建一个类时，它只是返回你提供给它的构造函数。

然而，让我无法理解的是，创建此构造函数的实例如何比创建用[Vapor.js编写的相同构造函数的实例](http://vaporjs.com/ "Vapor.js |  世界上最小和最快的 JavaScript 库")[执行得更快](http://jsperf.com/oop-benchmark/107 "JavaScript 面向对象库基准测试 · jsPerf")。

这就是我想要理解的：

1.  像 my.class.js 这样的库的构造函数是如何在 Firefox 上如此快速地创建这么多实例的？库的构造函数都非常相似。执行时间不应该也相似吗？
2.  为什么类的创建方式会影响实例化的执行速度？定义和实例化不是分开的过程吗？
3.  my.class.js 从哪里获得这种速度提升？我没有看到构造函数代码的任何部分应该使它执行得更快。事实上，遍历一个长原型链`MyFrenchGuy.Super.prototype.setAddress.call`应该会显着减慢它。
4.  构造函数是否被 JIT 编译？如果是这样，那么为什么其他库的构造函数也不被 JIT 编译？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-15T10:46:11.277

我并不是要冒犯任何人，但是这种事情*真的*不值得关注，恕我直言。几乎所有浏览器之间的速度差异都取决于 JS 引擎。例如，V8 引擎非常擅长内存管理；特别是当您将它与旧的 IE 的 JScript 引擎进行比较时。

考虑以下：

```
var closure = (function()
{
    var closureVar = 'foo',
    someVar = 'bar',
    returnObject = {publicProp: 'foobar'};
    returnObject.getClosureVar = function()
    {
        return closureVar;
    };
    return returnObject;
}()); 
```

上次我检查时，chrome 实际上是 GC'ed `someVar`，因为它没有被 IIFE 的返回值引用（由 引用`closure`），而 FF 和 Opera 都将整个函数范围保存在内存中。
在这个片段中，这并不重要，但是对于使用包含数千行代码的模块模式（AFAIK，几乎是所有这些）编写的库，它*可以*有所作为。

无论如何，现代 JS 引擎不仅仅是*“愚蠢的”*解析和执行的东西。正如您所说：正在进行 JIT 编译，但也有很多技巧可以尽可能地优化您的代码。您发布的片段很可能是以 FF 引擎*喜欢*的方式编写的。
同样重要的是要记住，Chrome 和 FF 之间正在就谁拥有最快的引擎进行某种速度之战。上次我检查 Mozilla 的 Rhino 引擎时，据说性能优于 Google 的 V8，如果今天仍然如此，我不能说……从那时起，Google 和 Mozilla 都在研究他们的引擎……

底线：不同浏览器之间存在速度差异 - 没有人可以否认这一点，但单点差异是微不足道的：你永远不会编写一个一遍又一遍地只做一件事的脚本。重要的是整体性能。
你必须记住，JS 也是一个棘手的基准测试程序：只需打开你的控制台，编写一些递归函数，然后在 FF 和 Chrome 中运行 100 次。比较每次递归所需的时间和整体运行时间。然后等待几个小时再试一次……有时 FF 可能会排在首位，而其他时候 Chrome 可能会更快，但仍然如此。我已经用这个功能试过了：

```
var bench = (function()
{
    var mark = {start: [new Date()],
                end: [undefined]},
    i = 0,
    rec = function(n)
    {
        return +(n === 1) || rec(n%2 ? n*3+1 : n/2);
        //^^ Unmaintainable, but fun code ^^\\
    };
    while(i++ < 100)
    {//new date at start, call recursive function, new date at end of recursion
        mark.start[i] = new Date();
        rec(1000);
        mark.end[i] = new Date();
    }
    mark.end[0] = new Date();//after 100 rec calls, first element of start array vs first of end array
    return mark;
}()); 
```

但是现在，回到您最初的问题：

首先：您提供的代码段与 jQuery 的方法相比并不完全`$.extend`：没有*真正的*克隆，更不用说深度克隆了。它根本不检查循环引用，这是我研究过的大多数其他库。检查循环引用确实会减慢整个过程，但它有时会派上用场（下面的示例 1）。性能差异的部分原因可以解释为该代码执行的*操作较少*，因此需要的时间较少。

其次：声明一个构造函数（类在 JS 中不存在）和创建一个实例确实是两件不同的事情（尽管声明一个构造函数本身就是创建一个对象的实例（`Function`确切地说是一个实例）。你的方式编写您的构造函数可以产生*巨大*的差异，如下面的示例 2 所示。同样，这是一个概括，可能不适用于某些引擎上的某些用例：例如，V8 倾向于为所有引擎创建单个函数对象实例，即使该函数是构造函数的一部分 - 或者我被告知。

第三：正如你所提到的，遍历一个很长的原型链并不像你想象的那么不寻常，实际上远非如此。您不断地遍历 2 或 3 个原型链，如示例 3 所示。这不应该减慢您的速度，因为它只是 JS 解析函数调用或解析表达式的方式所固有的。

最后：它可能是 JIT 编译的，但是说其他库不是 JIT 编译的只是没有叠加。他们可能，再一次，他们可能不会。正如我之前所说：不同的引擎在某些任务上比其他引擎执行得更好……*可能*是 FF JIT 编译此代码，而其他引擎没有。
我可以看到为什么其他库不会被 JIT 编译的主要原因是：检查循环引用、深度克隆功能、依赖关系（即`extend`，由于各种原因，方法在所有地方都使用）。

示例 1：

```
var shallowCloneCircular = function(obj)
{//clone object, check for circular references
    function F(){};
    var clone, prop;
    F.prototype = obj;
    clone = new F();
    for (prop in obj)
    {//only copy properties, inherent to instance, rely on prototype-chain for all others
        if (obj.hasOwnProperty(prop))
        {//the ternary deals with circular references
            clone[prop] = obj[prop] === obj ? clone : obj[prop];//if property is reference to self, make clone reference clone, not the original object!
        }
    }
    return clone;
}; 
```

这个函数克隆一个对象的第一层，所有被原始对象的属性引用的对象，仍然是共享的。一个简单的解决方法是简单地递归调用上面的函数，但随后您将不得不处理所有级别的循环引用的讨厌事务：

```
var circulars = {foo: bar};
circulars.circ1 = circulars;//simple circular reference, we can deal with this
circulars.mess = {gotcha: circulars};//circulars.mess.gotcha ==> circular reference, too
circulars.messier = {messiest: circulars.mess};//oh dear, this is hell 
```

当然，这不是最常见的情况，但如果你想防御性地编写代码，你必须承认很多人一直在编写疯狂代码的事实......

示例 2：

```
function CleanConstructor()
{};
CleanConstructor.prototype.method1 = function()
{
     //do stuff...
};
var foo = new CleanConstructor(), 
bar = new CleanConstructor);
console.log(foo === bar);//false, we have two separate instances
console.log(foo.method1 === bar.method1);//true: the function-object, referenced by method1 has only been created once.
//as opposed to:
function MessyConstructor()
{
    this.method1 = function()
    {//do stuff
    };
}
var foo = new MessyConstructor(),
bar = new MessyConstructor();
console.log(foo === bar);//false, as before
console.log(foo.method1 === bar.method1);//false! for each instance, a new function object is constructed, too: bad performance! 
```

理论上，声明第一个构造函数比杂乱无章的方式*要慢*`method1`：在创建单个实例之前创建引用的函数对象。第二个示例不创建 a `method1`，除非在调用构造函数时。但是缺点是*巨大*的：忘记`new`第一个例子中的关键字，你得到的只是一个返回值`undefined`。第二个构造函数在省略`new`关键字时创建一个全局函数对象，当然每次调用都会创建新的函数对象。你有一个构造函数（和一个原型），事实上，它是空闲的......这将我们带到*示例 3*

示例 3：

```
var foo = [];//create an array - empty
console.log(foo[123]);//logs undefined. 
```

好的，那么幕后会发生什么：`foo`引用一个*object*， instance of `Array`，而后者又继承了 Object 原型（只是 try `Object.getPrototypeOf(Array.prototype)`）。这是有道理的，因此 Array 实例的工作方式与任何对象几乎相同，因此：

```
foo[123] ===> JS checks instance for property 123 (which is coerced to string BTW)
    || --> property not found @instance, check prototype (Array.prototype)
    ===========> Array.prototype.123 could not be found, check prototype
         ||
         ==========> Object.prototype.123: not found check prototype?
             ||
             =======>prototype is null, return undefined 
```

换句话说，像您描述的链条并不太牵强或不常见。这就是 JS 的工作原理，所以期待它放慢速度就像期待你的大脑因为你的想法而煎炸：是的，你可能会因为想太多而筋疲力尽，但要知道什么时候该休息一下。就像原型链的情况一样：它们很棒，只知道它们有点慢，是的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T00:48:46.000

我不完全确定，但我确实知道，在编程时，最好在不牺牲功能的情况下使代码尽可能小。我喜欢这样称呼它`minimalist code`。

这可能是混淆代码的一个很好的理由。混淆通过使用更小的方法和变量名来缩小文件的大小，使其更难进行逆向工程，缩小文件大小，使其下载速度更快，以及潜在的性能提升。Google 的 javascript 代码被高度混淆，这有助于提高他们的速度。

所以在 JavaScript 中，更大并不总是更好。当我找到一种可以缩减代码的方法时，我会立即实施它，因为我知道它会提高性能，即使是最少量的。

例如，`var`在函数外部不需要变量的函数中使用关键字有助于垃圾收集，与将变量保留在内存中相比，这提供了非常小的速度提升。

像这样的库可以产生“每秒数百万次操作”（Blaise 的话），小的性能提升可以带来明显/可测量的差异。

因此，它可能`my.class.js`是“极简编码”或以某种方式优化的。它甚至可以是`var`关键字。

我希望这有所帮助。如果它没有帮助，那么我希望你能得到一个好的答案。

# .net - 在 PostgreSQL 中关闭连接时出现错误消息

> ID：14213076
> 
> 赞同：0
> 
> 时间：2013-01-08T10:38:21.593
> 
> 标签：.net, vb.net, postgresql

我正在查询一个外部数据库，它会引发以下错误：

```
ERROR: 25006: cannot execute UNLISTEN during recovery 
```

我的理解是，postgreSQL 每次完成都会调用这个，这表明这是由关闭连接引起的。

对我来说奇怪的是，代码似乎可以打开与数据库的连接，但在尝试关闭连接时出错。此外，这似乎只是偶尔发生，所以这可能是由于数据库本身重新启动吗？

postgreSQL 如何打开一个连接，但不能关闭一个？

下面是执行的代码，麻烦的行是 dbConn.Close()

```
 Dim sConnectionString as String = "Server=10.2.21.46;Port=5432;User Id=myuser;Password=mypsw;Database=demos;"
        Dim sErrorMessage As String = ""
        Dim bConnectionOpen As Boolean = False
        Dim dbConn As Npgsql.NpgsqlConnection = New Npgsql.NpgsqlConnection(sConnectionString)
        Try
            dbConn.Open()
            bConnectionOpen = True
        Catch
            sErrorMessage = "open connection fail."
        End Try

        If bConnectionOpen Then
            Dim cmdTxt As String = sQueryString
            Dim cmdTmp As Npgsql.NpgsqlCommand = New Npgsql.NpgsqlCommand(cmdTxt, dbConn)

            Dim bReaderOpen As Boolean = False
            Dim rsTmp As Npgsql.NpgsqlDataReader
            Try
                rsTmp = cmdTmp.ExecuteReader()
                bReaderOpen = True
            Catch
                sErrorMessage = "ExecuteReader fail."
            End Try

            If bReaderOpen Then rsTmp.Close()
            rsTmp = Nothing
            dbConn.Close()
        End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:59:42.353

根据[此处](http://doxygen.postgresql.org/utility_8c_source.html)的 PostgreSQL 源代码，只有当服务器试图从错误状态或长时间失败的事务中执行恢复时才会发生此错误（换句话说，目前感觉不太好）。

`ERRCODE_READ_ONLY_SQL_TRANSACTION`令人困惑的是，在这种情况下，它使用的是错误代码 25006 。我认为真正发生的事情是服务器不想将任何内容写入磁盘以不干扰当前的恢复 - 这就是它是只读事务的原因。

我认为您应该联系该外部服务器的管理员并请他看一下。简单的服务器重启可能会有所帮助。或者，它可能需要从备份中恢复...

**编辑：**

该服务器也可能是/是热备用服务器。在热备状态下，即使是只读连接，您也会看到完全相同的行为。[源代码](http://doxygen.postgresql.org/utility_8c_source.html)片段：

```
/* 
 * ... there are a few commands that are allowed
 * in "read-only" xacts but cannot be allowed in Hot Standby mode.
 * Those commands should call this function.
 */

PreventCommandDuringRecovery(const char *cmdname)
... 
```

# c++ - 构造函数的顺序 - 链式继承

> ID：14213085
> 
> 赞同：2
> 
> 时间：2013-01-08T10:39:05.420
> 
> 标签：c++

我在下面运行程序，在 main 的第一行之后我得到了这个输出：

> 1
> 6
> 1
> 6
> 13

谁能解释为什么它两次进入`Grand`and的构造函数？`Father`

```
//base class 
class Grand{
public:
    Grand(){cout<<"1"<<endl;}
    Grand(const Grand & g){cout<<"2"<<endl;}
    virtual ~Grand  (){cout<<"3"<<endl;}
    virtual void fun1(Grand g){cout<<"4"<<endl;}
    virtual void fun3(){cout<<"5"<<endl;}
private:
    int m_x;
    };

//derived class 
    class Father: public Grand{
    public:
        Father(){cout<<"6"<<endl;}
        Father(const Father & f){cout<<"7"<<endl;}
        ~Father(){cout<<"8"<<endl;}
        void fun1(){cout<<"9"<<endl;}
        void fun2(Father & f){
            cout<<"10";
            f.fun3();
        }
        void fun3(){
            cout<<"11"<<endl;
        }
        virtual void fun4(){
            cout<<"12"<<endl;
        }
    };

sing namespace std;

//derived class 
        class Son: public Father{
        public:
            Son(){cout<<"13"<<endl;}
            Son(const Son& s){cout<<"14"<<endl;}
            ~Son(){cout<<"15"<<endl;}
            void fun3(){cout<<"16"<<endl;}
            virtual void fun5(Son& s){
                cout<<"17"<<endl;
                s.fun1();
            }
        private:
            Father m_f;
            };

int main(){
Grand * pGrand= new Son; 
.........
.........
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T10:42:42.590

因为你都从父亲继承并实例化了一个父亲类型的成员，所以现在 Son 有两个父亲对象——直接基类和一个成员。

# android - 比较Android中的两个声音

> ID：14213090
> 
> 赞同：17
> 
> 时间：2013-01-08T10:39:12.110
> 
> 标签：android

可以将语音与手机中已录制的语音进行比较。基于比较，我们可以评价为好、非常好、优秀等。大多数封闭的声音获得高评价。

有人知道在Android中可以吗？

帮助是非常可观的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T23:49:04.597

对于一般的音频处理库，我可以推荐[marsyas](http://sourceforge.net/projects/marsyas/)。不幸的是，[官方主页](http://marsyas.info/)目前已关闭。

Marsyas 甚至提供了一个示例 android 应用程序。获得合适的信号分析框架后，您需要分析您的信号。例如，marsyas 的[AimC](http://code.google.com/p/aimc/)实现可用于比较语音。

我建议在您的计算机上安装 marsyas 并使用 python 示例脚本。

对于您的语音分析，您可以使用这样的网络：

```
vqNetwork = ["Series/vqlizer", [
        "AimPZFC/aimpzfc",
        "AimHCL/aimhcl",
        "AimLocalMax/aimlocalmax",
        "AimSAI/aimsai",
        "AimBoxes/aimBoxes",
        "AimVQ/vq",
        "Gain/g",
    ] 
```

该网络获取您的音频数据并对其进行转换，就像人耳处理它一样。之后，它使用矢量量化将许多可能的矢量减少为具有 200 个条目的非常特定的码本。然后，您可以将网络的输出转换为可读字符（例如 utf8），然后您可以使用字符串编辑距离（例如 Levenshtein 距离）之类的东西进行比较。

另一种可能性是使用 MFCC（梅尔频率倒谱系数）进行[marsyas 支持](http://sourceforge.net/p/marsyas/code/5002/tree/trunk/src/marsyas/MFCC.cpp)的语音识别，并使用[动态时间规整](http://sourceforge.net/p/marsyas/code/5002/tree/trunk/src/marsyas/DTW.cpp)等东西来比较输出。[本文档](http://www.ijest.info/docs/IJEST10-02-12-198.pdf)很好地描述了该过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-29T13:45:07.147

使用“Musicg”库，您可以比较两个语音（.wav 格式）文件。使用 Wave 对象加载要在 pgm 中实例化的波形文件。这里使用 FingerPrintSimilarity 函数传递预先录制的 wav 文件以获取输出。android gradle 依赖：实现组：'com.github.fracpete'，名称：'musicg'，版本：'1.4.2.2'

```
for more:
https://github.com/loisaidasam/musicg

sample code:
   private void compareTempFile(String str) {
        Wave w1 = new Wave(Environment.getExternalStorageDirectory().getAbsolutePath()+"/sample1.wav");
        Wave w2 = new Wave(Environment.getExternalStorageDirectory().getAbsolutePath()+"/sample2.wav");

        println("Wave 1 = "+w1.getWaveHeader());
        println("Wave 2 = "+w2.getWaveHeader());
        FingerprintSimilarity fpsc1 = w2.getFingerprintSimilarity(w1);

        float scorec = fpsc1.getScore();
        float simc= fpsc1.getSimilarity();
        tvSim.setText(" Similarity = "+simc+"\nScore = "+scorec);
        println("Score = "+scorec);
        println("Similarity = "+simc);

    } 
```

# mysql - 在表格中查找缺失的日历周

> ID：14213098
> 
> 赞同：1
> 
> 时间：2013-01-08T10:39:27.133
> 
> 标签：mysql, sql

我正在寻找一个 SQL 语句，它根据表输出缺少的日历周。这是一个简短的例子。我们正在使用 MySQL。我删除了所有不相关的列。

```
+------+--------------+
| Year | CalendarWeek |
+------+--------------+
| 2012 |            1 |
| 2012 |            5 |
| 2012 |            8 |
| 2012 |            9 |
| 2012 |           51 |
| 2013 |            2 |
+------+--------------+ 
```

我想得到什么：

```
+------+--------------+
| Year | CalendarWeek |
+------+--------------+
| 2012 |            2 |
| 2012 |            3 |
| 2012 |            4 |
| 2012 |            6 |
| 2012 |            7 |
| 2012 |           10 |
|  ... |          ... |
| 2012 |           50 |
| 2012 |           52 |
| 2013 |            1 |
+------+--------------+ 
```

我添加了点以缩短输出。

**进一步背景：**每行中的列是通过 Java 中的一些逻辑计算的。如果我们创建一个新行，比如说当前日历周，我们必须检查是否需要填补空白。它是一个简单的例程。前一周有排吗？是的？很好，我们完成了。否则计算前一周的值，插入它并检查前一周的值。整个程序中唯一的一个 do-while 循环。

如果我们从一个有多个间隙的表开始，这显然会失败。在这种情况下，我们必须遍历每年的所有日历周并检查缺失的行。需要一些时间。

**tl; dr**我正在尝试使用快捷方式减少到数据库的往返次数。

# java - 如何进行轮询并定期检查数据库中的新传入数据

> ID：14213099
> 
> 赞同：4
> 
> 时间：2013-01-08T10:39:26.700
> 
> 标签：java, multithreading, object, methods, polling

在这里，该方法读取具有唯一 ID 且序列号不断增加的数据库，因为我是 java 初学者，我能否知道如何实现这种重复轮询并每次检查新传入消息。

```
/**
 * Method which defines polling of the database and also count the number of Queries
 * @return pojo collection
 * @throws Exception
 */
public List<KAMessage> fullPoll() throws Exception {
    Statement st = dbConnection.createStatement();  
    ResultSet rs = st.executeQuery("select * from msg_new_to_bde where ACTION = 804 order by SEQ DESC");
        List<KAMessage> pojoCol = new ArrayList<KAMessage>();
        while (rs.next()) {
            KAMessage filedClass = convertRecordsetToPojo(rs);
            pojoCol.add(filedClass);
        }

        return pojoCol;
        }

/**
 * Converts a provided record-set to a {@link KAMessage}.
 * 
 * The following attributes are copied from record-set to pojo:
 * 
 * <ul>
 * <li>SEQ</li>
 * <li>TABLENAME</li>
 * <li>ENTRYTIME</li>
 * <li>STATUS</li>
 * </ul>
 * 
 * @param rs
 * @return the converted pojo class object
 * @throws SQLException
 *     
 */
private KAMessage convertRecordsetToPojo(ResultSet rs) throws SQLException {

    KAMessage msg = new KAMessage();
    int sequence = rs.getInt("SEQ");
    msg.setSequence(sequence);
    int action = rs.getInt("ACTION");
    msg.setAction(action);
    String tablename = rs.getString("TABLENAME");
    msg.setTableName(tablename);
    Timestamp entrytime = rs.getTimestamp("ENTRYTIME");
    Date entryTime = new Date(entrytime.getTime());
    msg.setEntryTime(entryTime);
    Timestamp processingtime = rs.getTimestamp("PROCESSINGTIME");
    if (processingtime != null) {
        Date processingTime = new Date(processingtime.getTime());
        msg.setProcessingTime(processingTime);
    }
    String keyInfo1 = rs.getString("KEYINFO1");
    msg.setKeyInfo1(keyInfo1);
    String keyInfo2 = rs.getString("KEYINFO2");
    msg.setKeyInfo2(keyInfo2);
    return msg;
    }
      } 
```

这是我尝试过的：

```
 while(true){
        try {

           incomingMessages.addAll(fullPoll());
       System.out.println("waiting 6 seconds");
           //perform this operation in a loop
           Thread.sleep(6000);
           } 
           catch (InterruptedException e)
           {
        // TODO Auto-generated catch block
         e.printStackTrace();
        }
            catch (Exception e) 
            {
        // TODO Auto-generated catch block
        e.printStackTrace();                               
           } 
```

如何使用准备好的语句将参数传递到此代码的查询中。

```
public List<KAMessage> fullPoll() throws Exception {
            PreparedStatement oldSeq = null;
    PreparedStatement newSeq = null;
    Statement st = dbConnection.createStatement();
    System.out.println("Polling");
    String query = "select * from msg_new_to_bde where ACTION = 804 and SEQ between           oldSeq and newSeq order by SEQ DESC";// insert in table
    pstmt = conn.prepareStatement(query);
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:55:14.043

实现重复轮询可能有多种方法，我能想到的最简单的方法是将轮询方法放在一段时间内，例如 thread.sleep：

```
 while(true){
        fullPoll();
        Thread.sleep(10000);
     } 
```

不要忘记使用 try catch，因为您抛出了异常。或者，您可以使用诸如计时器任务或框架之类的东西作为石英。

为了检查数据库中是否有新数据，我可以即时考虑以下方法（可以有更优化的方法）：

您可以记录行数，以了解是否添加了其他行，以便重新运行查询。

这不包括删除和重新插入行的情况，为了涵盖这一点，您可以尝试将上次查询数据库时使用的最大 id 存储在某处，并每次检查新的最大 id 是否与上一次不同记住，如果是，则数据库已更改。

例如，如果您将旧索引保留在变量 oldSeq 中，并将新索引保留在变量 newSeq 中，并且您只想获取新添加的消息，则可以使用以下查询：

```
select * from msg_new_to_bde where ACTION = 804 and SEQ between oldSeq and newSeq order by SEQ DESC 
```

您应该检查您的数据库之间是否还包括测试值（oldSeq 和 newSeq）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T10:44:58.093

您可以`fullPoll()`在 while 循环中调用您的方法并`thread.sleep(<number of millis>)`在调用之间等待。

另一种解决方案是使用成熟的调度程序框架，例如石英。

希望这能回答你的问题。

# php - 我的情况的 PHP 正则表达式

> ID：14213100
> 
> 赞同：0
> 
> 时间：2013-01-08T10:39:27.540
> 
> 标签：php, regex

我想在 php 中创建一个正则表达式以确保字符串是以下格式之一：

*   仅整数示例：1122
*   整数，整数示例：88,99
*   整数，整数，整数示例：88,99,19

任何人都可以帮助我，无法思考。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T10:41:07.507

最简单的正则表达式是`\d+(,\d+)*`

*   `\d+`- 匹配从 0 到 9 的数字
*   `(,\d+)*`- 匹配逗号和（如上）从 0 到 9 的数字。 * 表示可能出现 0 次或更多次

如果您需要限制为 3 次重复，那么这可以正常工作：`\d+(,\d+){0,2}`

*   `(,\d+){0,2}`- 匹配逗号和（如上）从 0 到 9 的数字。{0,2} 表示最多可能出现 2 次（请记住，第一次`\d+`将匹配第一个整数）

**编辑**

您在评论中描述的问题是使用的 PHP 函数执行搜索而不是完全匹配。

> `preg_match`-在主题中**搜索**与模式中给出的正则表达式的匹配项。

所以正则表达式很好。但是对于`preg_match`功能它应该是

*   `preg_match('/^\d+(,\d+)*$/')`- 第一个正则表达式
*   `preg_match('/^\d+(,\d+){0,2}$/')`- 第二个正则表达式

`^`匹配字符串的开头（主题）并`$`匹配字符串的结尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T10:42:50.237

```
/^(\d+,)*\d+$/ 
```

这将匹配任何整数字符串或以逗号分隔的整数列表。

```
$var = '12'; // allow
//$var = '12,13'; // allow
//$var = '12,13,13'; // allow
//$var = 'aaa12,13,13fff'; // won't allow
//$var = '12,13,13,11'; // allow

if (preg_match('/^(\d+,)*\d+$/', $var))
{
    echo 'correct';
}
else
{
    echo 'wrong';
} 
```

# android - 随机 android.content.res.Resources$NotFoundException

> ID：14213101
> 
> 赞同：23
> 
> 时间：2013-01-08T10:39:29.523
> 
> 标签：android, android-resources

一段时间以来，我们一直从我们的生产应用程序（通过 Play 商店）收到奇怪的 android.content.res.Resources$NotFoundException 异常。

尝试访问在 中声明的字符串资源时通常会出现该错误`res/values`。

举一个具体的例子，在我们的 Application 子类中，我们在`onCreate()`方法中加载一个字符串 ressources（所以在任何应用程序启动时）。

字符串资源实际上存在于`res/values`其中，并且生产应用程序在我们所有的测试设备上都可以正常工作，因此它不会来自错误的`R`文件生成。

我们猜测这是因为这些值没有在其他值包（如 values-hdpi 或其他包）中重新定义，并且将字符串值复制到所有包中实际上停止了异常。

尽管如此，根据Android文档，如果没有找到具体的值，则默认采用默认包的值，所以我们不明白为什么会出现这个错误。

我们认为这可能是自定义 rom 无法“正常”运行，所以我想知道其他人是否有同样的问题或任何人有其他建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T05:35:49.160

有这么多不同配置的安卓设备。因此，当我们不保留特定于相应匹配设备配置的资源 [drawable-hdpi、values-en、layout-land 等] 时，android 系统会查看该资源的默认配置 [drawable、values & layout]。

**因此建议在各自的位置保留默认和配置特定资源。**

# java - 推土机中的多态性

> ID：14213110
> 
> 赞同：4
> 
> 时间：2013-01-08T10:39:59.270
> 
> 标签：java, polymorphism, dozer

我有四门课：

```
public class A { }
public class B extends A { }
public class C extends B { }
public class D extends B { } 
```

从我在推土机文档中读到的关于继承的内容，它必须非常简单，我需要将超类相互映射，以及子类。这是它在 xml 中的外观：

```
<mapping>
<class-a>foo.A</class-a>
<class-b>foo.bar.A</class-b>
</mapping>

<mapping>
<class-a>foo.B</class-a>
<class-b>foo.bar.B</class-b>
</mapping>

<mapping>
<class-a>foo.C</class-a>
<class-b>foo.bar.C</class-b>
</mapping>

<mapping>
<class-a>foo.D</class-a>
<class-b>foo.bar.D</class-b>
</mapping> 
```

所有这些类都是相同的，我的意思是 D 和 D 具有相同的属性，C 和 C 等等。

**问题：** 在我传递给推土机的对象中，我有一个 B 类型的属性，它可以由 C 或 D（多态性）初始化。当推土机返回新的映射对象时，它总是返回 B 的属性类型给我，而不是 C 或 D。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:32:31.530

请看一下[继承映射部分](http://dozer.sourceforge.net/documentation/baseattributes.html "继承映射部分")。您可以将此类映射用于具有子类的字段类。

```
<mapping>
    <class-a>foo.Source</class-a>
    <class-b>foo.Dest</class-b>
    <field>
      <a>attr</a>
      <b>attr</b>
      <a-hint>foo.B, foo.C, foo.D</a-hint>
      <b-hint>foo.bar.B, foo.bar.C, foo.bar.D</b-hint>
   </field>
</mapping> 
```

编辑：我实现了某种类型的自动多态[功能请求](https://github.com/DozerMapper/dozer/issues/57 "功能要求")。我认为，它将包含在下一个 Dozer 版本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:42:40.767

**-**我认为你需要一个`explicit cast`.

**例如：**

```
B b = new C();

go(b)

//////////Called Method////////////////

public void go(B bx){

    C c = (C) bx;

} 
```

# delphi - 对 Delphi 数据集进行排序

> ID：14213119
> 
> 赞同：3
> 
> 时间：2013-01-08T10:40:34.077
> 
> 标签：delphi, delphi-xe2, devart

我有一个未排序的数据集（来自 Devart 的 TMSQuery），我无法使用 ORDER BY 进行排序，因为我在打开查询后操作了记录，因此“ORDER BY”给出的顺序丢失了。

我不想重写整个逻辑，所以我应该找到一种方法来对数据集进行排序。

我可以将数据集分配给 TMemDataSet（TMemDataSet 是 DevArt 类）后代（来自 Devart 的 TVirtualTable），但是在此之后我如何排序（我需要按日期字段排序）？

我读[了这个问题](https://stackoverflow.com/questions/7903093/custom-sort-order-for-dataset-after-executing-query)，但它并不包含我正在寻找的答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T13:32:31.030

使用`IndexFieldNames`我解决了问题，这就是我正在寻找的。直接来自`TMSQuery`组件：

```
MSQuery1.IndexFieldNames := 'EXECUTION_DATE'; //this does the job 
```

# php - SQLSTATE[42000]：语法错误或访问冲突

> ID：14213121
> 
> 赞同：0
> 
> 时间：2013-01-08T10:40:42.440
> 
> 标签：php, mysql, pdo

我真的不明白错误在哪里。我有一个名为 giderler 的数据库。它包括id（主键），kisi（varchar），tur（varchar），fiyat（varchar），mal（varchar），tarih（datetime），hesap（int）。我只想在表中添加一些记录。我在网上找了一个小时，但我找不到任何答案。

这是代码：

```
if(isset($_POST['AddExpense'])){

    /* Formdan gerekli veiler alınıyor */
    $kisi = $_POST['kisi'];
    $tur = $_POST['tur'];
    $fiyat = $_POST['fiyat'];
    $mal = $_POST['mal'];

    if(!is_numeric($fiyat))
    {
        /* Fiyat sadece integer değer alıyor. */
        echo '<div id="error">Lütfen Fiyatı Sadece Rakam Olarak Giriniz!</div>';
        die;
        }

    $tarih = date("d-m-Y 00:00:00");        /* Tarih formatı gg-aa-yy */
    echo $kisi. ' - ' .$tur. ' - ' .$mal. ' - ' .$fiyat. ' - '. $tarih;
    /* Veritabanına kayıt gerçekleştiriliyor */
    try{
    $add_expense = $db->prepare("INSERT INTO giderler (kisi,tur,mal,fiyat,tarih,hesap) VALUES (:kisi,:tur,:mal,:fiyat,:tarih,:hesap");
    $add_expense->execute(array(
        ':kisi' => $kisi,
        ':tur' => $tur,
        ':mal' => $mal,
        ':fiyat' => $fiyat,
        ':tarih' => $tarih,
        ':hesap' => 0 /* Yeni girilen kayıt. Ödeşmeler gerçekleşmedi. Bu değer ay sonunda 1 olacak */
        ));

    echo '<div id="successs">Sayın '.$kisi.', Kaydınız Başarıyla Eklendi.</div>';

    /*Exception fırlatılıyor*/
    }catch(PDOException $ex){
        echo 'Error: '.$ex->getMessage();
        }   
    } 
```

这是一个例外：

> 错误：SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:42:48.027

你`)`最后错过了一个

```
$db->prepare("INSERT INTO giderler (kisi,tur,mal,fiyat,tarih,hesap) 
              VALUES (:kisi,:tur,:mal,:fiyat,:tarih,:hesap");
                                                          ^-------here 
```

# xml - CakePHP 生成 XML

> ID：14213124
> 
> 赞同：6
> 
> 时间：2013-01-08T10:40:54.343
> 
> 标签：xml, cakephp

我想创建以下格式的 XML

```
<?xml version="1.0" encoding="utf-8"?>
<categories>
    <category>
        <name>Hill Station</name>
        <slug>hill_station</slug>
    </category>

    <category>
        <name>Water Fall</name>
        <slug>water_fall</slug>
    </category>

    <category>
        <name>Wild Life</name>
        <slug>wild_life</slug>
    </category>

    <category>
        <name>Piligrim</name>
        <slug>piligrim</slug>
    </category>

    <category>
        <name>Archeology</name>
        <slug>archeology</slug>
    </category>
</categories> 
```

我有一个数组，如下形式的数据库，我想将其转换为上述格式。

```
array(
    (int) 0 => array(
        'Category' => array(
            'id' => '4',
            'name' => 'Archeology',
            'slug' => 'archeology',
            'is_active' => true,
            'created' => '2013-01-08 07:34:07',
            'modified' => '2013-01-08 07:34:07'
        )
    ),
    (int) 1 => array(
        'Category' => array(
            'id' => '1',
            'name' => 'Hill Stations',
            'slug' => 'hill-stations',
            'is_active' => true,
            'created' => '2013-01-08 07:33:39',
            'modified' => '2013-01-08 07:33:39'
        )
    ),
    (int) 2 => array(
        'Category' => array(
            'id' => '3',
            'name' => 'Waterfall',
            'slug' => 'waterfall',
            'is_active' => true,
            'created' => '2013-01-08 07:33:54',
            'modified' => '2013-01-08 07:33:54'
        )
    ),
    (int) 3 => array(
        'Category' => array(
            'id' => '2',
            'name' => 'Wild Life',
            'slug' => 'wild-life',
            'is_active' => true,
            'created' => '2013-01-08 07:33:47',
            'modified' => '2013-01-08 07:33:47'
        )
    )
) 
```

我试过的

```
$this->Category->recursive = -1;
$categories = $this->Category->find('all', array('order' => 'Category.name asc'));
debug($categories);

$category = array();
foreach($categories as $c){
    $cat['name'] = $c['Category']['name'];
    $cat['slug'] = $c['Category']['slug'];
    $cat['active'] = ($c['Category']['is_active'] == 1) ? true : false;

    $category['categories']['category'][] = $cat;
}
//debug($category);

$xml = Xml::build($category);

echo $xml;
debug($xml); 
```

我无法通过上面的代码生成 XML。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T11:18:52.270

```
$xmlObject = Xml::fromArray($category);
$xmlString = $xmlObject->asXML(); 
```

# r - ggplot2 对象中存储的比例颜色在哪里？

> ID：14213126
> 
> 赞同：2
> 
> 时间：2013-01-08T10:40:59.943
> 
> 标签：r, plot, ggplot2

假设我创建了一个情节：

```
df <- data.frame(A = 1:100, B = jitter(1:100, 25), C = c('One', 'Two'))

p <- ggplot(df, aes(A, B, colour = C)) + 
  geom_point() + 
  scale_colour_manual(values = c('red', 'green')) 
```

这些颜色（红色和绿色）存储在`p`哪里？

* * *

我可以在这里看到函数中使用的函数调色板：

```
p$scales$scales[[1]]$palette 
```

这个函数的内容是：

```
function (n) 
{
  if (n > length(values)) {
    stop("Insufficient values in manual scale. ", n, " needed but only ", 
      length(values), " provided.", call. = FALSE)
  }
  values
} 
```

我认为颜色必须存储在`values`那里，但我不知道它们实际在哪里`p`。

* * *

Ps 我看过这个问题：[如何从 ggplot 对象中提取填充颜色？](https://stackoverflow.com/questions/11774262/how-to-extract-the-fill-colours-from-a-ggplot-object). 但是对于我正在尝试做的事情，我无法构建情节。我需要在它建成之前得到颜色。

如果有某种递归搜索`p`字符“红色”或“绿色”的方法可能有助于找到这些值。

* * *

编辑：我最终想要做什么。

我正在尝试在绘制图之前对其进行编辑。这个想法是给定一些情节`p`，你可以做这样的事情：

```
apply_theme(p) 
```

...并且配色方案应用于整个绘图（包括比例、渐变等）。这是为了避免必须执行以下操作：

```
p + some_theme + scales_colour_manual(values = plot_theme) 
```

我试图减少用户的工作量，以便他们可以将主题应用于整个情节，而不必担心他们是否正在为渐变、离散比例或其他内容着色。

构建情节是部分解决方案。但我希望能够应用主题并且以后仍然能够编辑情节。

我已经能够进行编辑`p`，以便追溯地将任何颜色应用于几何。但我就是找不到如何用刻度颜色来做到这一点。我知道颜色一定在某个地方！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T15:37:37.717

进展不大，但我已经排除了它可能隐藏的几个地方。

您可以看到`p`包含的所有字符向量

```
Filter(is.character, unlist(p))
# $labels.x
# [1] "A"

# $labels.y
# [1] "B"

# $labels.colour
# [1] "C" 
```

所以它不是直接存储的。

通过设置`options(error = recover)`然后仅通过提供一种颜色来强制错误，我们可以检查调用堆栈。

```
(p <- ggplot(df, aes(A, B, colour = C)) + 
  geom_point() + 
  scale_colour_manual(values = 'red')
)

 1: print(list(data = list(A = 1:100, B = c(4.32692646654323, 3.46481398493052, 0.4989527114667, 
...
13: scale$palette(n) 
```

进入 frame `13: scale$palette(n)`，我们可以看到该变量`values`确实存储了颜色信息。

```
Browse[1]> values
[1] "red" 
```

我们可以搜索调用堆栈中的每一帧，但奇怪的事情正在发生——它似乎不在任何地方。

```
Browse[1]> sapply(
  sys.frames(), 
  function(envir) 
  {
    exists("values", envir, inherits = FALSE)
  }
)
[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[16] FALSE FALSE 
```

（有关`sys.status()`调用堆栈的完整详细信息，请参阅。）

`Scales`我怀疑参考类正在使用一些奇怪的评估技术。

# google-tv - 可以使用anymote协议在两个android设备之间进行通信吗？

> ID：14213128
> 
> 赞同：0
> 
> 时间：2013-01-08T10:41:01.517
> 
> 标签：google-tv

我正在尝试使用另一个来控制一个 android 设备。为此，我想在我的实现中包含 ANYMOTE 协议。据我了解，我可以在其中一台设备上使用已经存在的“Google TV android remote”应用程序作为我的客户端。但我坚持的是，我需要自己实现服务器端吗？或者 是否有相同的、免费可用的现有实现（在 Google TV 中使用），我可以将其集成到我的 android 设备中并对其进行自定义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:53:51.593

谷歌还没有为谷歌电视开源他们的 Anymote 实现的服务器端。但是，该协议已完整记录：[https ://developers.google.com/tv/remote/docs/anymote](https://developers.google.com/tv/remote/docs/anymote)

Anymote 专为 IP 远程控制而设计。因此，根据您的用例，它可能不一定是从另一台控制一台 Android 设备的方式。此外，Anymote 服务器需要进行系统级的触摸和按键事件注入，这是第三方应用程序不允许的，只有谷歌签名的系统级应用程序才允许。

# google-drive-api - 来自 about.get() 用户的 exportFormats 是否依赖于用户？

> ID：14213130
> 
> 赞同：0
> 
> 时间：2013-01-08T10:41:15.027
> 
> 标签：google-drive-api

我希望我的用户能够选择其原生云端硬盘文档的导出格式。

理想情况下，我希望使用资源动态构建可用导出格式的列表`exportFormat`，`About`并在用户在 Google Drive 中进行身份验证**之前构建。**

显然，如果`exportFormat`依赖于用户（我能看到的唯一原因是因为应用程序），我不能做我想做的事。但如果不是，我可以通过在 Google Drive 中验证我的应用程序来获取这些信息。

作为一个附带问题，如果我的主要问题的答案是“否”，是否可以检索未经身份验证的导出格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:47:15.927

AFAIK，可用格式列表独立于用户。它们因文件类型而异——文档、演示文稿和电子表格等将具有不同的支持格式集。

对于第二个问题，无法匿名检索该列表。

# nlog - 使用 NLog 将水平线或分隔符写入日志文件

> ID：14213139
> 
> 赞同：4
> 
> 时间：2013-01-08T10:41:34.010
> 
> 标签：nlog

我想将一个独立的字符串（如水平线或分隔符）写入日志文件。

如果我使用

```
string delimiter = "------------------------------------------------";
_logger.Info(delimiter); 
```

然后在日志文件中我得到：

```
2013-01-08 15:58:54.4008 INFO ------------------------------------------------ 
```

我不想要行首的额外信息。

有没有办法用 NLog 编写这样的分隔符？我检查了 NLog wiki，但没有找到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T15:02:19.653

在此处查看我对类似问题的回答：

[Nlog - 为日志文件生成标题部分](https://stackoverflow.com/questions/4196663/nlog-generating-header-section-for-a-log-file)

总而言之，我建议定义另一个日志记录目标。如果要记录到文件，请定义第二个文件目标，指向同一个文件，但布局不同。定义布局，使其具有您想要的格式。您可以将布局定义为硬编码为所需的标头值（在您的情况下为“---------------”），或者您可以定义布局以仅记录消息和然后你可以将布局传递给它。

这是可能工作的最短的事情。请注意，我从上面链接的答案中剪切并粘贴，并针对您的情况稍作修改。我没有测试它。

定义布局：

```
<variable name="HeaderLayout" value="${message}"/>
<variable name="FileLayout" value="${longdate} | ${logger} | ${level} | ${message}" /> 
```

使用布局定义目标：

```
<target name="fileHeader" xsi:type="File" fileName="xxx.log" layout="${HeaderLayout}" />
<target name="file" xsi:type="File" fileName="xxx.log" layout="${InfoLayout}" /> 
```

定义规则/记录器：

```
<rules>
  <logger name="headerlogger" minlevel="Trace" writeTo="fileHeader" final="true" />
  <logger name="*" minlevel="Trace" writeTo="file" />
</rules> 
```

使用记录器：

```
public class MyClass
{
  private static Logger logger = LogManager.GetCurrentClassLogger();
  private static Logger headerLogger = LogManager.GetLogger("headerlogger");

  public void DoSomething()
  {
    headerLogger.Info("---------------------");
    logger.Info("Inside DoSomething");
    headerLogger.Info("---------------------");
  }
} 
```

或者，您可以定义布局，使其具有标题定义：

```
<variable name="HeaderLayout" value="-----------------------------"/>
<variable name="FileLayout" value="${longdate} | ${logger} | ${level} | ${message}" /> 
```

然后你会像这样使用它：

```
Logger headerLogger = LogManager.GetLogger("headerlogger"); //Assuming same rules/loggers definition as above.

headerLogger.Info("It doesn't matter what you put here because the layout has the header message hardcoded"); 
```

您可以编写一个辅助函数，这样您就不必显式处理标头记录器：

```
public void WriteHeader()
{
  LogManager.GetLogger("headerlogger").Info("This string does not matter");
} 
```

我认为这应该让您深入了解如何完成您正在尝试做的事情。

希望这可以帮助！

祝你好运！

# mvc-mini-profiler - 在一页上多次调用迷你分析器资源

> ID：14213140
> 
> 赞同：3
> 
> 时间：2013-01-08T10:41:34.057
> 
> 标签：mvc-mini-profiler

我有一个奇怪的问题，我正在使用 MiniProfiler，它很棒，在我的本地机器上没有任何问题，但它在我们的测试服务器上似乎表现不同。它似乎对迷你分析器资源产生了许多查询，其中查询的数量是随机的（？）。它产生了 8 到 22 个额外的呼叫。

测试和本地机器使用的数据基本相同。我们正在使用 MVC 3 和 RavendDB（带有 RavenDB MiniProfiler 插件）。

我很乐意得到任何可能的建议。谢谢。

![许多电话](../Images/8381439a428120c1c9fc00e07ff7ba36.png) ![多调用 Chrome 网络图](../Images/22b2648a54e63cc3d3737024b6df8d14.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:09:46.017

事实证明，当前的负载均衡器将用户 IP 地址隐藏在他的后面。此外，我们很少有服务不断发送正常运行时间请求，因为负载均衡器由相同的 ip 标识。

MiniProfiler 默认存储每个 ip 的请求分析结果。这些结果由客户端请求异步读取，并且只有在读取它们时才会被清除。这意味着我得到了由非我的正常运行时间服务产生的所有分析结果，但由于我们有相同的 IP，它们被识别为我的。

可能的可用解决方案：

*   确保您的 IIS 获得唯一 IP
*   MiniProfiler 允许 IUserProvider ( [https://github.com/SamSaffron/MiniProfiler/blob/master/StackExchange.Profiling/IUserProvider.cs](https://github.com/SamSaffron/MiniProfiler/blob/master/StackExchange.Profiling/IUserProvider.cs) ) 的扩展点，因此如有必要，我们可以通过其他方式区分用户。GetUser 正在获取 HttpRequest 作为参数。例如，一种方法是从 HttpRequest 中传递的 cookie 中读取会话 ID。

# php - 查找特定公式以在 PHP 中对数组进行排序

> ID：14213141
> 
> 赞同：1
> 
> 时间：2013-01-08T10:41:38.720
> 
> 标签：php, arrays, loops, sequence, algebra

我想知道是否有任何数学家可以帮助我解决以下问题：

我正在尝试将数字序列 012345678 转换为 036147258。

目的是对没有标准排序函数可行的 PHP 数组的索引进行排序。

据我所知：

```
for($i=0; $i<count($arrayWithNineIndices); $i++)
{
    $j=($i%3)*3;
    echo $j;
    if($i%3===0) echo " <----";
    echo "<br />";
} 
```

它垂直输出 036036036 并在零上标记。

理想情况下，我需要一种机制，将一个添加到第一个标记之后的值，然后将两个添加到第二个标记之后的值。

我整个上午都在尝试，主要是`(j=0; j<3; j++)`循环，但无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T10:46:42.290

```
$result = array();

for ($i = 0; $i < 3; $i++) {
  for ($j = $i; isset($array[$j]); $j += 3) {
    $result[] = $array[$j];
  }
}

print_r($result); 
```

[看到它工作](http://codepad.org/bWufA3YT)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T10:49:08.447

您可以使用

```
$str = "012345678";
list($a, $b, $c) = array_chunk(str_split($str), 3);
foreach ( array_map(null, $a, $b, $c) as $part ) {
    echo implode($part);
} 
```

输出

```
036147258 
```

[观看现场演示](http://eval.in/6176)

对于通用功能

```
echo autoShift("012345678", 3), PHP_EOL;
echo autoShift("0123456", 3), PHP_EOL;
echo autoShift("012345678", 2), PHP_EOL;
echo autoShift("0123", 2), PHP_EOL; 
```

输出

```
036147258
0361425
024681357
0213 
```

使用的功能

```
function autoShift($str, $shift = 3) {
    $args = array_chunk(str_split($str), $shift);
    array_unshift($args, null);
    return implode(array_map("implode", call_user_func_array("array_map", $args)));
} 
```

# ruby-on-rails - 生成设计时发生冲突

> ID：14213142
> 
> 赞同：0
> 
> 时间：2013-01-08T10:41:44.127
> 
> 标签：ruby-on-rails, devise

我正在使用带有 Devise 2.0 的 Rails 3

我正在使用[本教程](http://railscasts.com/episodes/209-introducing-devise) `User`

问题是 ：

1-命令

```
rails generate devise User 
```

没有生成所需的视图，我不得不运行

```
rails generate devise_views 
```

为了生成视图文件..这是错的吗？

2- 一切正常并生成路线，我可以在输入 rake 路线时显示登录和注册路线，但是

打开任何链接时

```
localhost:3000/users/sign_up 
```

Rails 假定这`sign_up`是用户的 id 并显示此消息

```
Showing /Users/wrightgd/.rvm/gems/ruby-1.9.3-p0/gems/devise-1.1.rc0/app/views/devise/sessions/new.html.erb where line #3 raised:

wrong number of arguments (3 for 2) 
```

**找到答案**

我尝试“设计”，“2.1.2” gem 并再次重新生成文件，它运行良好，甚至不必 `rails generate devise_views`

# regex - 在 Perl 中解析文件并将分隔部分存储在数组中

> ID：14213146
> 
> 赞同：0
> 
> 时间：2013-01-08T10:41:49.087
> 
> 标签：regex, arrays, perl, parsing

我需要使用外部数据，一个纯文本文件，其中包含要在 Perl 中处理的数据（我正在学习这种语言）。

```
{NAME}
orga:21:12348:oragnisation
serv:22:12348:service
{NAME-END}
{DATA}
palm:data:fluid:147
rose:data:fluid:149
{DATA-END}
{OTHER}
palm:data:fluid:147
rose:data:fluid:149
germ:data:fluid:189
{OTHER-END} 
```

我如何读取这个文件并将每个部分存储在数组中（部分是已知的并在`{xxxx}`和之间分隔`{xxxx-END}`。部分中的每个数据都转换为一个列表并存储在数组中。我希望有这样的东西，例如：

```
@name = ( ("orga","21","12348","organisation"), ("serv","22","12348","service") ) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T10:57:29.420

尝试创建根据其他变量的值命名的变量是一个坏主意。最好的方法是构建数组的散列，而不是像`@name`.

像这个程序这样的东西会做你需要的。我曾经用来[`Data::Dump`](https://metacpan.org/module/Data%3a%3aDump)显示程序构建的数据结构。

```
use strict;
use warnings;

use Data::Dump;

open my $fh, '<', 'data.txt' or die $!;

my %data;
my $sect;
while (<$fh>) {
  chomp;
  if (/^\{(\w+)\}$/) {
    $sect = $1;
  }
  elsif (/^\{($sect-END)\}$/) {
    undef $sect
  }
  elsif (defined $sect) {
    push @{ $data{$sect} }, [split /:/];
  }
}

dd \%data; 
```

**输出**

```
{
  DATA  => [
             ["palm", "data", "fluid", 147],
             ["rose", "data", "fluid", 149],
           ],
  NAME  => [
             ["orga", 21, 12348, "oragnisation"],
             ["serv", 22, 12348, "service"],
           ],
  OTHER => [
             ["palm", "data", "fluid", 147],
             ["rose", "data", "fluid", 149],
             ["germ", "data", "fluid", 189],
           ],
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:53:27.473

像这样的东西怎么样：

```
my %list;
while(<DATA>) {
    chomp;
    if (/^\{(.*?)\}/ .. /^\{${1}-END\}/) {
        push @{$list{$1}}, $_ unless /^\{/;
    }
}
say Dumper\%list; 
```

**输出：**

```
$VAR1 = {
          'OTHER' => [
                     'palm:data:fluid:147',
                     'rose:data:fluid:149',
                     'germ:data:fluid:189'
                   ],
          'NAME' => [
                    'orga:21:12348:oragnisation',
                    'serv:22:12348:service'
                  ],
          'DATA' => [
                    'palm:data:fluid:147',
                    'rose:data:fluid:149'
                  ]
        }; 
```

# c# - Dotfuscator 和 VS2012

> ID：14213148
> 
> 赞同：4
> 
> 时间：2013-01-08T10:41:59.180
> 
> 标签：c#, visual-studio-2012, dotfuscator

所有，我们刚刚决定硬着头皮从 升级`VS2010`到`VS2012`. 作为升级过程的负责人，我做的第一件事是将现有的 VS2010 项目加载到`VS2012`. 这适用于 WinForms 项目，但 [ `PreEmptive`]`Dotfuscator`项目未被识别。我安装了 Dotfuscator，并重新设置了“社区编辑”。我试图升级现有的安装和卸载/重新安装，但没有...

如何将`Dotfuscator`项目合并到我的 VS2012 解决方案中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T11:18:41.067

所有，经过两个小时的闲逛。这是解决方案...

您可能已经安装了 Dotfuscator 4.9（内部版本 4.9.8500_2.0），但 VS2012 无法识别此安装（相关的 VS2012 插件不会与 VS2012“链接”）。我首先尝试完全卸载`Dotfuscator`并重新安装，令人惊讶的是，这在运行 Windows 8 的 Sony VAIO 上不起作用，但在 Windows 7 机器上却如此——这可能是一个反常现象。为了在 Windows 8 系统上获得 VS2012 中的 Dotfuscator 项目类型，我没有卸载 Dotfuscator，而只是重新运行了安装包——这似乎可行。

我希望这可以节省其他人几个小时。

# php - 从 Android 到 PHP 的 POST 后的自定义 HttpResponse

> ID：14213150
> 
> 赞同：1
> 
> 时间：2013-01-08T10:42:01.297
> 
> 标签：php, android, post, httpresponse

我有一个类执行 POST 到 php 页面，该页面应该对发布的数据进行一些操作，并返回结果（类似于 OK，KO）。如何在 PHP 中将结果发送回，以及如何在 android 中使用它？

在Android方面，我有这个，它发布数据：

```
public int postData(String id, String webrispid, String userid) {
            // Create a new HttpClient and Post Header
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://www.server.com/postpage.php");
            int responseCode = 0;
            try {
                // Add your data
                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
                nameValuePairs.add(new BasicNameValuePair("id", id));               
                nameValuePairs.add(new BasicNameValuePair("user", userid));
                nameValuePairs.add(new BasicNameValuePair("webrisid", webrispid));
                try {
                    nameValuePairs.add(new BasicNameValuePair("token",AeSimpleSHA1.SHA1(userid) ));
                } catch (NoSuchAlgorithmException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                // Execute HTTP Post Request
                HttpResponse response = httpclient.execute(httppost);
                responseCode = response.getStatusLine().getStatusCode();
                System.out.println(response);

            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
            } catch (IOException e) {
                // TODO Auto-generated catch block
            }
            return responseCode;
        } 
```

实际上 postpage.php 看起来像这样：

```
<?php

if ( isset($_POST['user']) ) {
// try to store the data posted

//if data is stored return "ok"

// else return "ko"

} else {
// error
}
?> 
```

所以在android端，我应该停止发送相同的数据并开始处理其余数据并最终将其发送到页面......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:53:40.153

如果只是“OK”或“KO”，您可以执行以下操作：

```
<?php
  if ( isset($_POST['user']) ) { // try to store the data posted
    //do some test
    echo "OK"; //or KO
  } else { 
    echo "ERROR"; 
  }
?> 
```

android 部分可能如下所示：

```
// Execute HTTP Post Request
String status = httpclient.execute(httpPost, new BasicResponseHandler());
System.out.println(status); //will be OK or KO or ERROR 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:47:57.017

当您在操作结束时从 PHP 文件返回时，请使用

```
echo  json_encode("return status or some specific value");` 
```

在 Android 端，解析它`json`以获得状态结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:56:11.073

看到这个：

```
public int postData(String id, String webrispid, String userid) {
        // Create a new HttpClient and Post Header
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://www.server.com/postpage.php");
        int responseCode = 0;
        try {
            // Add your data
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("id", id));               
            nameValuePairs.add(new BasicNameValuePair("user", userid));
            nameValuePairs.add(new BasicNameValuePair("webrisid", webrispid));
            try {
                nameValuePairs.add(new BasicNameValuePair("token",AeSimpleSHA1.SHA1(userid) ));
            } catch (NoSuchAlgorithmException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            // Execute HTTP Post Request
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
        Log.e("JSON", json);
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);

                    String status = jObj.getString("status");   

    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
        } catch (IOException e) {
            // TODO Auto-generated catch block
        }
        return responseCode;
    } 
```

这里的“状态”是使用 echo json_encode() 函数从 php 文件返回的 jsonObject。

# windows - 获取 SVN 中所有具有 svn:externals 的项目到某个存储库

> ID：14213152
> 
> 赞同：0
> 
> 时间：2013-01-08T10:42:06.983
> 
> 标签：windows, svn

我在 SubVersion 中有很多项目都`svn:externals`引用了一个核心项目（假设它们有一个 svn:externals 属性指向一个本地路径*`/Components`*）`http://svn/repos/core_components`。

现在，我想获取一个包含对该核心项目的 svn:externals 引用的所有项目/文件夹的列表。是否有 SVN 命令/脚本/工具来执行此操作？（我在 Windows 上）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:52:38.043

~~如果您的外部定义分散在存储库树中 - 您将有一个糟糕的一天（tm）：您必须递归地遍历每个存储库中的所有节点，对于 Windows 而言，这不是一项简单的任务。~~ 对于递归测试 repo-tree 添加`-R`选项到使用的命令

如果您在 repo 中的所有外部都有共同的地方（root /of trunk/ 是很好的候选者），您可以使用

`svn propget svn:externals`（只检查一个属性）

或者

`svn proplist -v`（获取所有具有值的属性）

你会得到 grepable 输出（或者在 propget 和缺少外部的情况下没有）

**样品：**

*   带有外部的路径的非递归propget

`>svn propget svn:externals`

`https://subversion.assembla.com/svn/subversion-trouble-shooting/trunk/lib lib`

*   带有外部路径的非递归详细 proplist

`>svn proplist -v`

`Properties on '.':`

`svn:externals`

`https://subversion.assembla.com/svn/subversion-trouble-shooting/trunk/lib lib`

*   带有外部的路径的递归propget

`>svn propget svn:externals -R`

`tags\1.0.1 - -r 2 https://subversion.assembla.com/svn/subversion-trouble-shooting/trunk/lib@2 lib`

`trunk - https://subversion.assembla.com/svn/subversion-trouble-shooting/trunk/lib lib`

*   没有外部的路径的非递归propget

`>svn propget svn:externals`

# java - 应用程序启动时启动 servlet

> ID：14213162
> 
> 赞同：5
> 
> 时间：2013-01-08T10:42:23.033
> 
> 标签：java, servlets, web.xml, servlet-listeners

我想首先在加载 jsp 页面之前触发 servlet 类，因为我需要在 jsp 页面中填充数据库中的一些数据。web.xml 中的 Servlet 映射

```
 <servlet>
        <servlet-name>Index</servlet-name>
        <servlet-class>com.Teklabz.Servlets.IndexServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Index</servlet-name>
        <url-pattern>/index</url-pattern>
    </servlet-mapping> 
```

但它没有用，在跟踪代码时它永远不会到达 servlet 类。我也试图像这个[链接](https://stackoverflow.com/questions/3289737/load-on-startup-tomcat)一样使用 ServletContextListener ，但我遇到了同样的问题。

监听代码：

```
public class ServletListener implements ServletContextListener{

    @Override
    public void contextInitialized(ServletContextEvent sce) {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void contextDestroyed(ServletContextEvent sce) {
        throw new UnsupportedOperationException("Not supported yet.");
    }
} 
```

web.xml 代码：

```
 <listener>
        <listener-class>com.techlabz.listener.ServletListener</listener-class>
    </listener> 
```

我不知道做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T11:05:29.093

有多种方法可以实现这一目标..

1.  您可以在服务方法中填充数据，`com.Teklabz.Servlets.IndexServlet`然后在属性中设置数据`request`，然后转发到该属性`jsp`。
2.  如果要使用，`loadonstartiup`则可以在`com.Teklabz.Servlets.IndexServlet`servlet 的`init`方法中从 db 填充数据，然后将其设置在某个可访问的范围内`(request,session,context)`，并通过直接访问 jsp 从该范围获取数据。
3.  在侦听器中，您也可以这样做，但在这种情况下，您还需要在某个范围内设置数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:55:13.803

您的代码绝对正确。您需要添加注释@WebListener

```
 @WebListener
   public class ServletListener implements ServletContextListener{
    //your code
   } 
```

# php - 无法从 sql 数据库中获取 php 数组中确切数量的元素

> ID：14213164
> 
> 赞同：-1
> 
> 时间：2013-01-08T10:42:34.483
> 
> 标签：php

我有一个名为 user 的数据库表，其中只有一个条目。建立连接后，我这样做

```
function dbQuery($sql)
    {
    $result = mysql_query($sql) or die(mysql_error());

    return $result;
    } 
```

这将运行收到的查询。然后

```
function getUser(){
    $sql = "select username from user";
    return dbQuery($sql);
} 
```

现在我调用这个`getUser()`函数来获取用户名

```
while($row=mysql_fetch_array(getUser())){
    echo($row['username']);
  } 
```

**问题是它无限打印用户名。请帮忙**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:46:04.717

```
while($row=mysql_fetch_array(getUser())){ 
```

这个的执行是：

1.  称呼`getUser`
2.  调用`mysql_fetch_array`结果
3.  将结果分配给`$row`
4.  **从 1 开始重复。**

你`getUser()`一遍又一遍地打电话，每次都得到一个新的结果集。调用一次并将结果保存到变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:23:26.877

问题是您正在调用`getUser()`它在循环中重新生成结果。

此代码将执行以下操作：

```
$row=mysql_fetch_array(getUser());
echo $row['username']; 
```

MySQL 扩展已被弃用，因此请考虑根据 derWilly 的评论移至不同的扩展

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-08T11:10:08.153

由于您只想要一行结果，请考虑使用 mysql_fetch_row();

```
$row = mysql_fetch_row(getUser()); 
```

这将在 $row 中返回一个包含该行字段的数组。

无论如何，如果您仍想使用 mysql_fetch_array()，请不要忘记为结果数组的类型（MYSQL_ASSOC、MYSQL_NUM 或 MYSQL_BOTH）传递第二个参数

```
while ($row = mysql_fetch_array(getUser(), MYSQL_NUM)) {
    echo($row[0]); 
} 
```

# android - getChildAt 返回一个为空的视图

> ID：14213165
> 
> 赞同：0
> 
> 时间：2013-01-08T10:42:36.027
> 
> 标签：android

我尝试为我的单个项目设置动画`ListView`，我发现这有点难。但是，经过一番谷歌搜索后，我想出了一些合并的代码片段，但是当我尝试调用我`ListView`的 's`getChildAt`以返回视图时，它返回 null。

```
public void animateSingleItemInListView() {
        final Animation animBounce = AnimationUtils.loadAnimation(context, R.anim.bounce);
        int totalItemsInListView = lastCases.getCount();
        int wantedPosition = 1; // Whatever position you're looking for
        int firstPosition = lastCases.getFirstVisiblePosition() - lastCases.getHeaderViewsCount(); // This is the same as child #0
        int wantedChild = wantedPosition - firstPosition;
        // Say, first visible position is 8, you want position 10, wantedChild will now be 2
        // So that means your view is child #2 in the ViewGroup:
        int childs = lastCases.getChildCount();
        if (wantedChild < 0) {
          Log.w("UPDATEUI", "Unable to get view for desired position, because it's not being displayed on screen.");
          return;
        }
        // Could also check if wantedPosition is between listView.getFirstVisiblePosition() and listView.getLastVisiblePosition() instead.
        View wantedView = lastCases.getChildAt(firstPosition);
        wantedView.setAnimation(animBounce);
    } 
```

从代码：

返回 10，这`totalItemsInListView`是 my 中正确的行数`ListView`。整数`firstPosition`当然是0，但是`getChildAt()`方法只返回n​​ull。怎么来的？我怎样才能得到我的第`View`一个`ListView`？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-08T10:50:19.557

尝试使用

```
lastCases.getItemAtPosition(firstPosition) 
```

# emacs - 在 Emacs Paredit 中交换括号和方括号

> ID：14213173
> 
> 赞同：4
> 
> 时间：2013-01-08T10:42:53.500
> 
> 标签：emacs, elisp, paredit

如何在 paredit 模式下定义交换括号和方括号的命令？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-07-16T15:21:02.017

所以任务就是转这个，例如：

```
(blah
 (a (b)
    c)) 
```

进入这个：

```
(blah
 [a (b)
    c]) 
```

使用 paredit 模式，移动到表达式的开头，`(a ..)`然后：

```
C-M-SPC [ <right> M-s 
```

没有 paredit，但仍想在转换期间保持平衡的括号，移动到`a`然后按`C-M-SPC`多次直到出现错误，然后（假设 CUA 模式已打开）：

```
C-x <timeout> <right> <backspace> <backspace> [ ] <left> C-v 
```

嗯，这很复杂，所以让我们坚持使用 paredit 模式版本，并尝试从中发出命令。键盘宏编辑器会告诉您正在使用的命令的名称，因此您至少可以想出以下代码：

```
(defun my-switch-to-square ()
  "Change (..) to [..]."
  (interactive)
  (mark-sexp --)
  (paredit-open-square --)
  (right-char --)
  (paredit-splice-sexp --)) 
```

`--`表示我们尚未决定的部分代码。阅读代码中每个函数的文档后，您将了解要传递哪些参数，并且无需调用`mark-sexp`. 重写 docstring 并添加对 的调用后`left-char`，您最终得到的代码将是：

```
(defun my-switch-to-square ()
  "Change |(..) to |[..]. | is point position."
  (interactive)
  (paredit-open-square 1)
  (right-char 1)
  (paredit-splice-sexp)
  (left-char 1)) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T22:38:52.760

以下代码可以满足您的要求。您可以绑定`swap-parens`到您想要的任何键绑定。

```
(defvar swap-paren-pairs '("()" "[]"))
(defun swap-parens-at-points (b e)
  (let ((open-char (buffer-substring b (+ b 1)))
        (paren-pair-list (append swap-paren-pairs swap-paren-pairs)))
    (while paren-pair-list
      (if (eq (aref open-char 0) (aref (car paren-pair-list) 0))
          (save-excursion
            (setq to-replace (cadr paren-pair-list))
            (goto-char b)
            (delete-char 1)
            (insert (aref to-replace 0))
            (goto-char (- e 1))
            (delete-char 1)
            (insert (aref to-replace 1))
            (setq paren-pair-list nil))
        (setq paren-pair-list (cdr paren-pair-list))))))

(defun swap-parens ()
  (interactive)
  (cond ((looking-at "\\s(")
         (swap-parens-at-points (point) (save-excursion (forward-sexp) (point))))
        ((and (> (point) 1) (save-excursion (forward-char -1) (looking-at "\\s)")))
         (swap-parens-at-points (save-excursion (forward-sexp -1) (point)) (point)))
        ((message "Not at a paren")))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T15:30:15.507

我不确定您所说的“定义命令”是什么意思？你可以这样做：

```
|(foo bar) 
```

“|” 是点。

```
;; Keyboard Macro Editor.  Press C-c C-c to finish; press C-x k RET to cancel.
;; Original keys: C-u [ C-f <M-up> C-b

Command: last-kbd-macro
Key: none

Macro:

C-u [       ;; paredit-open-square
C-f         ;; forward-char
<M-up>      ;; paredit-splice-sexp-killing-backward
C-b         ;; backward-char 
```

虽然老实说，这种类型的使用场景对于 VIM 诡计来说更常见。我从来没有真正使用过这个 IRL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T12:22:56.720

bzr 分支 lp:sx-emacs-werkstatt

将提供一个受 paredit 启发的库，但提供更详细的命令

Mx ar-bracket-parentized-atpt RET

将括号放在 parenteses 周围

查看 thing-at-point-utils.el 和其他文件中还提供了什么

# html - 每次重复该功能

> ID：14213174
> 
> 赞同：0
> 
> 时间：2013-01-08T10:42:55.297
> 
> 标签：html, jquery-plugins

```
 function fader(){
    $('#numbers').animate({backgroundColor: '#FFFFFF'}, 900);
    } 
```

**HTML**

```
<div id="numbers" style="background-color: blue; width:200px;" onclick="fader()">1234567890</div> 
```

上面的代码在单击事件时将 div 的背景颜色从蓝色更改为白色。但它仅适用于第一次点击。

每次单击div时如何更改颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:44:50.870

### 你需要让它再次变蓝！

```
function fader()
{
    $('#numbers')
        .css('background-color', '#FF0000')
        .animate({
          backgroundColor: '#FFFFFF'
        }, 900);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:44:21.913

尝试`background-color`使用单独的 CSS 样式而不是使用内联 CSS 来设置。

# jquery - 如何使用 underscore.js 中的油门

> ID：14213175
> 
> 赞同：3
> 
> 时间：2013-01-08T10:43:01.303
> 
> 标签：jquery, underscore.js, throttling

我想使用[underscore.js 中的油门，](http://documentcloud.github.com/underscore/#throttle)但我不知道如何在我的代码中实现它。

```
<script type="text/javascript"> 
    $(document).ready(function() {
        /* Scroll event handler */
        $(window).bind('scroll',function(e){
            parallaxScroll();
        });
    }); 

    /* Scroll the background layers */
    function parallaxScroll(){
        var scrolled = $(window).scrollTop();
        $('header').css('top',(0+(scrolled*1))+'px');
        $('#balken0').css('top',(-600+(scrolled*1))+'px');
        $('#balken1').css('top',(-1465+(scrolled*1))+'px');
        $('#balken2').css('top',(-2320+(scrolled*1))+'px');
    }
</script> 
```

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:46:18.260

您可以使用计时器来获得相同的结果。为一个函数 IMO 包含整个库是没有意义的。

尝试这个：

```
$(document).ready(function() {
    var timer;

    /* Scroll event handler */
    $(window).bind('scroll', function(e) {
        clearTimeout(timer);
        timer = setTimeout(parallaxScroll, 100);
    });
}); 
```

这将确保滚动事件仅在滚动结束后触发视差函数，而不是为页面滚动的每个像素调用一次。

# iphone - 是否可以获取从 iTunes 添加的视频的路径？

> ID：14213179
> 
> 赞同：0
> 
> 时间：2013-01-08T10:43:18.170
> 
> 标签：iphone, ios, video, ios6

我想获取存储在 iPhone 视频应用程序中的视频路径，如图所示（不是在相机胶卷中）。

![在此处输入图像描述](../Images/87ec63ea847ed6c5f377665a80e4cda6.png)

示例：我从 iTunes 向我的 iPhone 添加了 2 或 3 个视频，现在我想在应用程序中播放该视频，因此我需要获取 iPhone 上所有视频的路径才能这样做.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:22:57.640

**MPMediaPropertyPredicate** *predicate = [MPMediaPropertyPredicate predicateWithValue:[NSNumber numberWithInteger:MPMediaTypeMovie] forProperty:MPMediaItemPropertyMediaType];

```
MPMediaQuery *query = [[MPMediaQuery alloc] init];
[query addFilterPredicate:predicate];

NSArray *items = [query items];
NSURL *url = [[NSURL alloc]init];
for (MPMediaItem* item in items)
{
    //get the Title of video
    NSString* title = [item valueForProperty:MPMediaItemPropertyTitle];
     NSLog(@"title %@",title);

    //get the path of Video
     url = [item valueForProperty:MPMediaItemPropertyAssetURL];
    NSLog(@"url %@",url);
} 
```

# sql - 选择具有 MAX 计数器的行

> ID：14213181
> 
> 赞同：1
> 
> 时间：2013-01-08T10:43:26.720
> 
> 标签：sql, oracle

我有以下查询：

```
Select MAX("Counter") as "Counter", "DestinationId" FROM (          
 Select t1."Counter", t2.* From
           (SELECT "HierarchyNodeId", (SELECT "Description"
            FROM "Destination"
           WHERE "DestinationId" = hn."DestinationId") "Description", "DestinationId",
         (SELECT "DestinationTypeId"
            FROM "Destination"
           WHERE "DestinationId" = hn."DestinationId") "DestinationTypeId"
    FROM "HierarchyNode" hn
WHERE "DestinationId" IN (SELECT "DestinationId" From(SELECT COUNT ("HierarchyNodeId"), "DestinationId" FROM "HierarchyNode" GROUP BY "DestinationId" HAVING COUNT ("HierarchyNodeId") > 1))) t2, 
(select COUNT (*) "Counter", "HierarchyNodeId" From "HierarchyDetail"
Group By "HierarchyNodeId") t1
Where t1."HierarchyNodeId" = t2."HierarchyNodeId"
ORDER BY "DestinationId", "Counter" Desc
)
GROUP BY "DestinationId" 
```

输出显示每个目标 ID 的最大计数器。我需要的额外信息是与该特定行相对应的 HierarchyId（具有该特定目标 ID 和计数器）。

如果我将其更改为：

```
Select MAX("Counter") as "Counter", "DestinationId", "HierarchyId" FROM ( .... 
```

我收到一个错误，因为我没有在 Group By 中包含 HierarchyId。但是，如果我为 DestinationId - HierarchyId 的每个组合包含一个获取最大计数器（不是每个 DestinationId 仅）。

所以我尝试了这个：

```
Select * From (
Select t1."Counter", t2.* From
           (SELECT "HierarchyNodeId", (SELECT "Description"
            FROM "Destination"
           WHERE "DestinationId" = hn."DestinationId") "Description", "DestinationId",
         (SELECT "DestinationTypeId"
            FROM "Destination"
           WHERE "DestinationId" = hn."DestinationId") "DestinationTypeId"
    FROM "HierarchyNode" hn
WHERE "DestinationId" IN (SELECT "DestinationId" From(SELECT COUNT ("HierarchyNodeId"), "DestinationId" FROM "HierarchyNode" GROUP BY "DestinationId" HAVING COUNT ("HierarchyNodeId") > 1))) t2, 
(select COUNT (*) "Counter", "HierarchyNodeId" From "HierarchyDetail"
Group By "HierarchyNodeId") t1
Where t1."HierarchyNodeId" = t2."HierarchyNodeId"
ORDER BY "DestinationId", "Counter" Desc
) test1
Inner Join
(
Select MAX("Counter") as "Counter", "DestinationId" FROM (          
 Select t1."Counter", t2.* From
           (SELECT "HierarchyNodeId", (SELECT "Description"
            FROM "Destination"
           WHERE "DestinationId" = hn."DestinationId") "Description", "DestinationId",
         (SELECT "DestinationTypeId"
            FROM "Destination"
           WHERE "DestinationId" = hn."DestinationId") "DestinationTypeId"
    FROM "HierarchyNode" hn
WHERE "DestinationId" IN (SELECT "DestinationId" From(SELECT COUNT ("HierarchyNodeId"), "DestinationId" FROM "HierarchyNode" GROUP BY "DestinationId" HAVING COUNT ("HierarchyNodeId") > 1))) t2, 
(select COUNT (*) "Counter", "HierarchyNodeId" From "HierarchyDetail"
Group By "HierarchyNodeId") t1
Where t1."HierarchyNodeId" = t2."HierarchyNodeId"
ORDER BY "DestinationId", "Counter" Desc
)
GROUP BY "DestinationId"
) test2
On test1."DestinationId" = test2."DestinationId"
And test1."Counter" = test2."Counter" 
```

当第一个查询给我 1256 时，这个给我 1456 条记录......但我只希望第一个查询的每一行都有 1 个 HierachyNodeId。所以这没有意义。它应该是 1256 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:48:07.277

使用`keep dense_rank`：

```
Select 
    MAX("Counter") as "Counter", 
    "DestinationId" 
    max("HierarchyId") keep (dense_rank first order by counter desc) as "HierarchyId"
FROM ( query)
GROUP BY "DestinationId"; 
```

# asp.net-mvc-3 - 使用 MVC 3 ViewBag 动态更改图像

> ID：14213182
> 
> 赞同：2
> 
> 时间：2013-01-08T10:43:25.833
> 
> 标签：asp.net-mvc-3, visual-studio-2010

我是 MVC 3 的新手，仍在学习。我目前正在构建一个静态 2 页网站，该网站在两个页面上都有不同的图像，但位于同一个地方。有人告诉我，我可以使用 ViewBag 根据我所在的页面更改此图像，但是我不知道从哪里开始将其应用于我的网站。

任何帮助将不胜感激。感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T11:23:18.570

在控制器的 Action 方法上，像这样制作 ViewBag 或 ViewData

```
ViewBag.Imagename="nameofimage";

ViewData["img"]="nameofimage"; 
```

在您看来，您可以像这样制作 img 标签

```
<img src="@ViewBag.Imagename"> 
```

或者如果您创建了 ViewData

```
<img src="@ViewData["img"]"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-01T19:31:33.183

出于某种原因，当我尝试使用它时它对我**不起作用**

```
@ViewBag.BackgroundImage = "~/Content/images/image.jpg"
...
<img src="@ViewBag.BackgroundImage" /> 
```

但对**我**有用的是

```
@ViewBag.BackgroundImage = "image.jpg"
...
<img src = "~/Content/images/@(ViewBag.BackgroundImage)" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T13:00:40.103

我个人不喜欢在控制器中指定任何相关的视图，我在操作方法名称和图像之间使用命名约定：

```
<img src="~/Content/images/@(ViewContext.RouteData.Values["action"].ToString().ToLower())_img.jpg"> 
```

索引操作方法的图片名称为“index_img.jpg”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-06T09:44:39.307

对于那些想要在 viewbag 中使用完整路径的人，使用这个

```
@ViewBag.BackgroundImage = "Content/images/image.jpg"
...
<img src="~/@ViewBag.BackgroundImage" /> 
```

缺少 hallordylo 示例无法使用完整路径的原因`"~/"`，`src="..."`并且此标志`"~/"`不应位于 ViewBag 中。

# android - 没有url的textview上的超链接未显示且不可点击

> ID：14213184
> 
> 赞同：3
> 
> 时间：2013-01-08T10:43:28.533
> 
> 标签：android, hyperlink, android-alertdialog

我想在 textview 上显示超链接，但不在 url 上，例如：嗨，“url”如何。（这里的 url 将打开 www.google.com）。所有这些都将出现在警报对话框中。

我遵循了以下方法，但没有得到正确的解决方案..

String.xml---
<a href=http://www.google.co.in>谷歌</a>

```
 String str = getResources().getString(R.string.link);
        final TextView txtvw = new TextView(this);
        txtvw.setText(Html.fromHtml(str));
        txtvw.setClickable(true);
        txtvw.setAutoLinkMask(RESULT_OK);
        txtvw.setMovementMethod(LinkMovementMethod.getInstance());
        Linkify.addLinks(txtvw, Linkify.WEB_URLS);

        AlertDialog.Builder alt_bld = new AlertDialog.Builder(context);
        alt_bld.setTitle(title);

        alt_bld.setCancelable(false);

        alt_bld.create();
        alt_bld.setView(txtvw).show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:50:06.317

使用 CDATA 标签：

```
<string name="link"><![CDATA[ <a href="http://www.google.co.in">Google</a> ]]></string> 
```

更新：

```
String str = getResources().getString(R.string.link);
final TextView txtvw = new TextView(this);
txtvw.setText(Html.fromHtml(str));
txtvw.setMovementMethod(LinkMovementMethod.getInstance());

new AlertDialog.Builder(context)
                .setTitle(title)
                .setCancelable(false)
                .setView(txtvw)
                .show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:46:25.520

我不知道。但这可能是因为您错过了 href 上的双引号，

试试这个格式，

```
<a href="http://www.google.co.in">Google</a> 
```

# linux - 无法通过 FreeNX 连接到 Ubuntu ec2 实例

> ID：14213185
> 
> 赞同：1
> 
> 时间：2013-01-08T10:43:32.157
> 
> 标签：linux, ubuntu, amazon-web-services, amazon-ec2

我最近在 AWS 中创建了一个新的 Ubuntu 12.04 实例。我在连接和打开服务器的 SSH 终端时没有问题。连接到实例后，我能够毫无问题地安装 Ubuntu 桌面和 FreeNX，并在服务器实例上启用密码验证。

我在运行 Windows 8 的 PC 上下载并安装了适用于 Windows 的 NX 客户端。输入用户凭据后，我可以连接到服务器并进行身份验证。我是 Linux 世界的新手，但此时一切都进行得如此顺利，我正准备把我的 Windows 许可证扔给狗——幸好我推迟了。

**“问题：在客户端，出现 !M 徽标窗口，但几秒钟后该窗口就关闭了，即使没有显示任何错误消息。”**

该问题陈述用引号引起来，因为它正是 FreeNX Ubuntu 社区支持文档[https://help.ubuntu.com/community/FreeNX#Troubleshooting](https://help.ubuntu.com/community/FreeNX#Troubleshooting)中描述的问题。

所以我很自然地遵循指南中的解决方案：

**“解决方案：问题是由于自定义 VNC 配置。在服务器中，访问您的主目录并运行这些命令，”**

```
sudo rm .Xauthority*
touch .Xauthority
chmod 600 .Xauthority 
```

不幸的是，这完全没有解决问题。如果我有错误消息，问题会更容易诊断，但参考问题陈述，没有错误消息。几个小时的谷歌搜索没有任何结果，所以想知道这里是否有人过去遇到过这个问题，如果有，他们愿意提供帮助。

谢谢！

# windows-runtime - 应用程序屏幕外的项目在滚动回屏幕时被截断

> ID：14213186
> 
> 赞同：0
> 
> 时间：2013-01-08T10:43:36.083
> 
> 标签：windows-runtime, winrt-xaml

我试图在我的实际内容后面有一个视差移动的图像背景。我根据约翰的解决方案添加了一个转换器： [http ://w8isms.blogspot.com/2012/09/parallax-background-in-xaml-revisited.html](http://w8isms.blogspot.com/2012/09/parallax-background-in-xaml-revisited.html)

视差滚动部分工作正常，虽然我偶然发现了以下问题 - 初始应用程序屏幕区域之外的图像被截断，所以当我向右滚动时，只有白色区域开始出现，而不是其余图像，因为这些内容必须重新绘制。有人知道我可以做些什么来解决它吗？

这是我的代码：

```
<Grid Background="White">        
    <StackPanel Orientation="Horizontal">
        <StackPanel.RenderTransform>
            <CompositeTransform
               TranslateX="{Binding ElementName=MyScrollViewer, Path=HorizontalOffset, Converter={StaticResource ParallaxConverter}}" />
        </StackPanel.RenderTransform>
        <Image Source="1.jpg"/>
        <Image Source="2.jpg"/>
        <Image Source="3.jpg"/>
    </StackPanel>
    <ScrollViewer
       x:Name="MyScrollViewer"
       HorizontalScrollMode="Enabled"
       HorizontalScrollBarVisibility="Auto">
        <TextBlock
           VerticalAlignment="Center"
           FontSize="180"
           Text="Hello world! This text will extend to the right." />
    </ScrollViewer>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:57:33.963

解决它！必须将我的 StackPanel 包装在 Canvas 元素中。

# android - 视频缓存

> ID：14213187
> 
> 赞同：0
> 
> 时间：2013-01-08T10:43:37.827
> 
> 标签：android, caching

我正在尝试通过此缓存视频

```
try {       
    URL oracle = new URL(url);
    URLConnection yc = oracle.openConnection();
    InputStream in = yc.getInputStream();

    File file = new File(getApplicationContext().getCacheDir() ,url);

    if(!file.exists()){
        file.setReadable(true);
        file.createNewFile();
        if (file.canWrite()){

            FileOutputStream out = new FileOutputStream(file);   

            byte[] buffer = new byte[1024];
            int len1 = 0;
            while ( (len1 = in.read(buffer)) > 0 ) {
                out.write(buffer,0, len1);
            }

            out.close();
        }

        in.close();

        Runtime.getRuntime().exec("chmod 755 "+getCacheDir() +"/"+ url);  
        videoView.setVideoPath("chmod 755 "+getCacheDir() +"/"+ url);

    }else {

        videoView.setVideoURI(Uri.parse(videoUrl));
    }
} catch (Exception e) {
    // TODO: handle exception
}
videoView.setVideoURI(Uri.parse(videoUrl));    
MediaController mc = new MediaController(VideoViewC.this);
videoView.setMediaController(mc);
videoView.requestFocus();
videoView.start();          
mc.show(); 
```

但我发现 Error java.net.SocketException: Connection reset by peer。

如果您有任何建议，请给我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-29T12:22:48.073

我有我的案例问题，它特别包括我的 http 服务器，如果没有正确验证只是关闭了客户端连接，这是我的问题：

[android-async-http 状态码和对 onFailure 的响应](https://stackoverflow.com/questions/19333959/android-async-http-status-code-and-response-to-onfailure)

也许你也有它，因为你的 httpservers 的特殊性

您是否实现了缓存视频文件？

# css - 为什么 Tumblr 默认图片尺寸最大为 500 像素？

> ID：14213188
> 
> 赞同：2
> 
> 时间：2013-01-08T10:43:39.340
> 
> 标签：css, image, tumblr

当我将图片上传到 Tumblr 时，最大尺寸为 500 像素。为什么是这样？

有没有一种简单的方法可以更改最大尺寸，而无需对每个帖子进行硬编码或从外部加载它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:02:53.727

我相信，这取决于您使用的主题。

Tumblr 确实允许您上传高质量的图像，只是 Tumblr 的模板引擎没有针对大于 500 的图像大小的标签，除了加载全分辨率的图像。Tumblr 主题库中有一个高分辨率类别应该会有所帮助。

# javascript - 在 request.execute 中调用 Google 的 Javascript API request.execute

> ID：14213192
> 
> 赞同：1
> 
> 时间：2013-01-08T10:43:54.870
> 
> 标签：javascript, callback, google-api, google-api-js-client

我要做的是从谷歌获取日历列表，然后从每个日历中获取事件列表。所以基本上我在 calendarList.list 方法的回调函数中调用 events.list 方法。但是，在使用 Firebug 进行调试时，似乎根本没有调用 events.list 方法的回调函数。

```
var request2 = gapi.client.calendar.events.list({
    "calendarId":calendarId
    });

request2.execute(function(response2) {
    resp2 = response2;
    findEvent();
    }); 
```

我最多可以调试到 request2.execute，但永远不会执行 function(response2)。resp2 是一个全局变量，所有这些代码都在一个从第一个请求的回调中调用的函数中。一个非常相似的代码非常适合第一次调用，但具有不同的全局变量。我试过删除回调中的任何一行都没有效果。

谢谢你的帮助。

# java - iText 最新的 Maven 依赖

> ID：14213195
> 
> 赞同：13
> 
> 时间：2013-01-08T10:44:01.123
> 
> 标签：java, maven, pdf, itext

iText 的最新版本是什么？什么是 Maven 依赖项？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-08T11:20:37.510

您需要注意Java版iText的许可：

*   iText : iText Group NV`2.1.7`的最新**官方**`MPL`版本，在&`GPL`许可下，带有`com.lowagie`groupId;
*   iText : ymasory/InProTopia`4.2.1`最新的**非官方**`MPL`版本，在&`GPL`许可下，带有`com.lowagie`groupId;
*   iText`5.0.0`及更高版本：由 iText Group NV 在`AGPL`许可下发布，带有`com.itextpdf`groupId。一个整体罐子。
*   iText`7.0.0`及更高版本：由 iText Group NV 在`AGPL`许可下发布，带有`com.itextpdf`groupId。几个模块化罐子。

在这里，您可以在 Maven 存储库中找到 2.1.7 和 4.2.x 版本：

在 5.x 版本之前查找： [http ://search.maven.org/#search|gav|1|g%3A%22com.lowagie%22%20AND%20a%3A%22itext%22](http://search.maven.org/#search|gav|1|g%3A%22com.lowagie%22%20AND%20a%3A%22itext%22)

查找 5.x 版本： [http ://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22com.itextpdf%22%20AND%20a%3A%22itextpdf%22](http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22com.itextpdf%22%20AND%20a%3A%22itextpdf%22)

~~您可能希望坚持使用 MPL 和 GPL 版本，除非您可以遵循 AGPL 许可证规范...~~

编辑：您应该注意您选择的版本；

根据 Bruno Lowagie 的评论，由于技术和法律原因， [2.1.x 版本已被弃用](http://lowagie.com/itext2)，不应使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T11:23:31.120

看起来 5.3.5 还没有在存储库中，所以 5.3.4 对我有用：

```
<dependency>
    <groupId>com.itextpdf</groupId>
    <artifactId>itextpdf</artifactId>
    <version>5.3.4</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-25T14:28:57.173

iText 7 于 2016 年 5 月发布。iText 7 不再像以前的 iText 5 那样是一个单一的 jar 文件。您只使用您需要的那些模块。

把它放在你的 POM 文件中：

```
<dependencies>

  <dependency>
    <groupId>com.itextpdf</groupId>
    <artifactId>barcodes</artifactId>
    <version>7.0.0</version>
    <!-- barcodes depends on kernel -->
  </dependency>

  <dependency>
    <groupId>com.itextpdf</groupId>
    <artifactId>font-asian</artifactId>
    <version>7.0.0</version>
  </dependency>

  <dependency>
    <groupId>com.itextpdf</groupId>
    <artifactId>forms</artifactId>
    <version>7.0.0</version>
    <!-- forms depends on kernel and layout -->
  </dependency>

  <dependency>
      <groupId>com.itextpdf</groupId>
      <artifactId>hyph</artifactId>
      <version>7.0.0</version>
  </dependency>

  <dependency>
    <groupId>com.itextpdf</groupId>
    <artifactId>io</artifactId>
    <version>7.0.0</version>
  </dependency>

  <dependency>
    <groupId>com.itextpdf</groupId>
    <artifactId>kernel</artifactId>
    <version>7.0.0</version>
    <!-- kernel depends on io -->
  </dependency>

  <dependency>
    <groupId>com.itextpdf</groupId>
    <artifactId>layout</artifactId>
    <version>7.0.0</version>
    <!-- layout depends on kernel -->
  </dependency>

  <dependency>
    <groupId>com.itextpdf</groupId>
    <artifactId>pdfa</artifactId>
    <version>7.0.0</version>
    <!-- pdfa depends on kernel -->
  </dependency>

  <dependency>
    <groupId>com.itextpdf</groupId>
    <artifactId>sign</artifactId>
    <version>7.0.0</version>
    <!-- sign depends on kernel, layout and forms -->
  </dependency>

</dependencies> 
```

可以在[https://developers.itextpdf.com/itext-7-java上找到此信息以及更多信息](https://developers.itextpdf.com/itext-7-java)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-08T11:46:44.523

与许多（任何？）开源库一样，他们的网站包含一个变更日志。iText 的可以在[这里](https://itextpdf.com/posts/changelog)找到。

截至今天，最新版本是~~[5.5.9](https://itextpdf.com/posts/changelog/559)~~ [7.0.0](https://developers.itextpdf.com/itext-7-java)。

版本 5.5.9 的依赖项将是

```
<dependency>
    <groupId>com.itextpdf</groupId>
    <artifactId>itextpdf</artifactId>
    <version>5.5.9</version>
</dependency> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-05-25T12:32:27.507

```
This was the latest release as of today

<!-- http://mvnrepository.com/artifact/com.itextpdf/itextpdf -->

<dependency>
<groupId>com.itextpdf</groupId>
<artifactId>itextpdf</artifactId>
<version>5.5.9</version>
</dependency> 
```

# android - 幻灯片删除视图类似于 Gmail 的 API 7+

> ID：14213196
> 
> 赞同：0
> 
> 时间：2013-01-08T10:44:01.530
> 
> 标签：android, android-animation, android-view

我不想重新发明轮子，这显然已经由谷歌在 Gmail 应用程序中完成。我想达到与从 gmail 中删除手指滑动消息相同的效果。它也在通知栏中实现（您可以通过向左或向右滑动来删除通知）

我想知道我是否可以指出正确的方向。也许这在谷歌开发者网站的某处有所描述。

API 7+ 最重要的是我需要它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:08:53.630

您必须实施两个不同的原则：

1.  是捕获所有运动事件以用手指翻译您的视图
2.  使用[Gesture Detector](https://developer.android.com/reference/android/view/GestureDetector.html)检测 onFling()，检查 fling 方向是否正确，如果是，则应用您需要的任何操作。

不幸的是我从来没有实现过这样的，所以我不能给你看任何代码。但希望这能为您指明正确的方向。

# iphone - 方向没有得到修复 ipad 6？

> ID：14213197
> 
> 赞同：0
> 
> 时间：2013-01-08T10:44:11.943
> 
> 标签：iphone, ipad

嗨，我在 ios 4 中开发了一个应用程序，现在我正在 ios 6 上构建它，但方向不起作用。我正在为 iPad 使用 splitview。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:50:57.483

I had the same issue before.

I fixed it by setting the rootview controller of window as UISplitView.

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [self.window setRootViewController:viewController];
} 
```

Where `UISplitViewController *viewController;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:45:55.910

在这个链接上检查我的答案我的朋友。

[视图加载期间iOS 6中的设备方向处理？](https://stackoverflow.com/questions/14189828/device-orientation-handling-in-ios-6-during-view-load/14195659#14195659)

如果你没有得到然后告诉我..

让我知道它是否有效...

快乐编码！！！

# ruby-on-rails - Rails：用户中的 NoMethodError#show

> ID：14213203
> 
> 赞同：0
> 
> 时间：2013-01-08T10:44:23.053
> 
> 标签：ruby-on-rails

我是 Rails 的新手，我一直在 stackoverflow 周围漫无目的地徘徊，试图找到解决问题的方法，但似乎无法弄清楚。我正在阅读 Michael Hartl 教程的第 10 章，当我尝试查看特定用户的个人资料时，localhost:3000 页面出现以下错误消息：

```
"NoMethodError in Users#show" 
```

其次是

```
"undefined method `name' for nil:NilClass". 
```

源代码列为我的 show.html.erb 文件的第一行，但我看不出代码有任何问题。

主页工作正常，用户索引可见，但除此之外它不起作用。我知道这可能意味着 @user 对象为零，但我不确定如何解决这个问题。我的 Rspec 测试也失败了 - 任何帮助将不胜感激。

我的 users_controller.rb 文件：

```
 class UsersController < ApplicationController
  before_filter :signed_in_user, only: [:index, :edit, :update, :destroy]
  # Arranges for a particular method to be called before the given actions.
  before_filter :correct_user,    only: [:edit, :update]
  before_filter :admin_user,      only:  :destroy # Restricts the destroy action to admins.

  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Welcome to the Sample App!"
      redirect_to @user
    else
      render 'new'
    end
  end

  def index
    @users = User.paginate(page: params[:page])
  end

  def edit
    # @user = User.find(params[:id])
  end

  def update
    # @user = User.find(params[:id])
    if @user.update_attributes(params[:user])
      flash[:success] = "Profile updated"
      sign_in @user
      redirect_to @user
    else
      render 'edit'
    end
  end

  def destroy
    User.find(params[:id]).destroy
    flash[:success] = "User destroyed."
    redirect_to users_url
  end

  private

    # def signed_in_user
    #   unless signed_in?
    #     store_location
    #     redirect_to signin_url, notice: "Please sign in."
    #   end
    # end

    def correct_user
      @user = User.find(params[:id])
      redirect_to(root_path) unless current_user?(@user)
    end

    def admin_user
      redirect_to(root_path) unless current_user.admin?
    end

    def show
      @user = User.find(params[:id])
      @microposts = @user.microposts.paginate(page: params[:page])
    end
end 
```

我的 show.html.erb 文件：

```
<% provide(:title, @user.name) %>
<div class="row">
  <aside class="span4">
    <section>
      <h1>
        <%= gravatar_for @user %>
        <%= @user.name %>
      </h1>
    </section>
  </aside>
  <div class="span8">
    <% if @user.microposts.any? %>
      <h3>Microposts (<%= @user.microposts.count %>)</h3>
      <ol class="microposts">
        <%= render @microposts %>
      </ol>
      <%= will_paginate @microposts %>
    <% end %>
  </div>
</div> 
```

和 users_helper.rb

```
module UsersHelper

    # Returns the Gravatar (http://gravatar.com/) for the given user.
  def gravatar_for(user, options = { size: 50 })
    gravatar_id = Digest::MD5::hexdigest(user.email.downcase)
    size = options[:size]
    gravatar_url = "https://secure.gravatar.com/avatar/#{gravatar_id}?s=#{size}"
    image_tag(gravatar_url, alt: user.name, class: "gravatar")
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:53:22.513

您的查询未找到用户：

```
@user = User.find(params[:id]) 
```

显然返回`nil`。

请检查具有给定 ID 的用户是否存在。此外，当没有找到对象时，您应该让您的操作安全失败：

```
<% if @user.nil? %>
  <% provide(:title, 'Not found') %>
  No user with that ID has been found.
<% else %>
  <!-- Contents of your current show.html.erb -->
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:50:38.143

Here @user is nil. Because there is no record with the id (params[:id]). Thats why this error is coming.

```
 <h1>
 <%= gravatar_for @user %>
 <%= !@user.nil? @user.name : "" %>
 </h1>

         It will check whether the @user having any record, if its having it will display it's name else it will display empty. 
```

# uitableview - 表格视图中的每个单元格必须与 IOS 中的不同网页连接

> ID：14213204
> 
> 赞同：0
> 
> 时间：2013-01-08T10:44:25.207
> 
> 标签：uitableview, uiwebview

我试图连接表格视图中的每个单元格都必须在网络视图中与不同的网页连接，并且我还使用了导航控制器。

这是 maincontroller.m 文件

```
 `-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section    
   {   
        return [self.settle count];   
   }  
               -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:            (NSIndexPath *)indexPath  
  {        
            static NSString *simpletableidentifier = @"tcell";   
      UITableViewCell *cell = [tableView       dequeueReusableCellWithIdentifier:simpletableidentifier];   
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpletableidentifier];  
    }

    cell.textLabel.text = [settle objectAtIndex:indexPath.row];
    return cell;       

}
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
if ([segue.identifier isEqualToString:@"show"]) {
    NSIndexPath *indexPath=self.tableView.indexPathForSelectedRow;
        website *destViewController = segue.destinationViewController;
               destViewController.web = [settle objectAtIndex:indexPath.row];

    switch (indexPath.row) {
        case 0:
             destViewController.u=@"http//www.google.com";
            break;

        case 1:
            destViewController.u=@"http//www.yahoo.com";
            break;

        default:
            break;
    }
    }
` 
```

在另一个视图控制器文件中

```
@implementation website
@synthesize web;
@synthesize u;
//@synthesize recipeLabel;
//@synthesize recipeName;
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Add code to load web content in UIWebView
   {

            NSURL *url = [NSURL URLWithString:@"u"];

            NSURLRequest *request = [NSURLRequest requestWithURL:url];
            [web loadRequest:request];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T10:42:43.063

首先，您不需要为每个单元格创建单独的 UIWebview 对象。单个 Webview 可用于加载不同的 URL。

为了解决你的问题在 viewDidLoad 方法中，正确创建 url 对象为

```
(void)viewDidLoad
{
   [super viewDidLoad];

   NSURL *url = [NSURL URLWithString:self.u];

   NSURLRequest *request = [NSURLRequest requestWithURL:url];
   [web loadRequest:request];
} 
```

并给出正确的 url 格式，如`@"http://www.google.com/`.

# image - 如何使用 gdal 对光栅图像进行子集化？

> ID：14213205
> 
> 赞同：-4
> 
> 时间：2013-01-08T10:44:31.027
> 
> 标签：image, visual-c++, raster, gdal, qgis

我已经使用 Visual Studio 2010（vc++）中的 GDAL 库读取了光栅图像的像素值。接下来是，我必须根据形状文件中给出的网格裁剪图像（子集）。这次忘了网格。我只想剪裁正方形或矩形区域并保存到新文件中。我已经阅读了一些建议使用 gdal_translate 和 gdal_warp 函数的文档，但它只能在我想使用 c++ 的 python 中运行。请尽早帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T06:45:17.497

我已经解决了使用带有 gdal 库的 VC++ 裁剪图像的问题。我已经创建了要裁剪的所需栅格大小的 VRTDataset，然后使用 CreateCopy() 保存它。

# android - 对 ViewPager 的 PagerAdapter 有误解。InstantianteItem 方法永远不会被调用

> ID：14213218
> 
> 赞同：2
> 
> 时间：2013-01-08T10:45:21.227
> 
> 标签：android, android-viewpager, android-pageradapter

这是我用于分页的简单 PagerAdapter 和 onCreate() 活动。

```
public class MPagerAdapter extends PagerAdapter{

    List<ViewGroup> pages = null;

    public MPagerAdapter(List<ViewGroup> pages){
        this.pages = pages;
    }

    @Override
    public Object instantiateItem(ViewGroup collection, int position){
        ViewGroup v = pages.get(position);
        ((ViewPager) collection).addView(v, 0);
        return v;
    }

    @Override
    public void destroyItem(ViewGroup collection, int position, Object view){
        ((ViewPager) collection).removeView((View) view);
    }

    @Override
    public int getCount(){
        return pages.size();
    }

    @Override
    public boolean isViewFromObject(View view, Object object){
        return view.equals(object);
    }

    @Override
    public void finishUpdate(View arg0){
    }

    @Override
    public void restoreState(Parcelable arg0, ClassLoader arg1){
    }

    @Override
    public Parcelable saveState(){
        return null;
    }

    @Override
    public void startUpdate(View arg0){
    }
} 
```

这是寻呼机将存在的活动的 onCreate() 。

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_pager);
    getActionBar().setDisplayHomeAsUpEnabled(true);

    Intent intent = getIntent();
    String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);
    amount=Integer.parseInt(message);

    Resources res = getResources();
    Drawable background =  res.getDrawable(R.drawable.page_back1);

    BackgroudImage bImage = new BackgroudImage(x, y, background);

    List<MyLayout> pages = new ArrayList<MyLayout>();
    int a = amount/bImage.mPointsList.size();
    for (int i=0; i<=a; i++){
        MyLayout page = new MyLayout(getBaseContext(), bImage);     
        page.setLayoutParams(new ViewGroup.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
        pages.add(page);
    }
    MPagerAdapter pagerAdapter = new MPagerAdapter(pages);
    ViewPager viewPager = (ViewPager)findViewById(R.id.pager);//new ViewPager(this);
    viewPager.setAdapter(pagerAdapter);
    viewPager.setCurrentItem(1); 
} 
```

我的自定义布局的 OnLayout() 方法，用作 pagerView 页面的控件

```
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    if (PagerActivity.amount<=points.size()) {

        for (int i=0; i<PagerActivity.amount; i++){
            ImageView childV = new ImageView(super.getContext());
            childV.setBackgroundResource(R.drawable.lesson_frame_closed);
            ViewGroup.LayoutParams imageParams = new ViewGroup.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
            childV.setOnClickListener(new View.OnClickListener() {

                  @Override
                  public void onClick(View view) {

                  }

                });
            this.addView(childV, imageParams);
        }
        PagerActivity.amount=0;
    } 

    if ((float)(bgrImage.getBackground().getIntrinsicWidth())/(float)(bgrImage.getBackground().getIntrinsicHeight())<(float)this.getMeasuredWidth()/(float)this.getMeasuredHeight()) {
        scaleFX=(float)this.getMeasuredHeight()/(float)bgrImage.getBackground().getIntrinsicWidth();
        scaleFY=(float)this.getMeasuredHeight()/(float)bgrImage.getBackground().getIntrinsicHeight();
    } else {
        scaleFX=(float)this.getMeasuredWidth()/(float)bgrImage.getBackground().getIntrinsicWidth();
        scaleFY=(float)this.getMeasuredWidth()/(float)bgrImage.getBackground().getIntrinsicHeight();
    }

    for (int i = 0; i < getChildCount(); i++) {
        final View childV = getChildAt(i);
        if (childV.getVisibility() != View.VISIBLE)
        continue;
        childV.layout((int)(points.get(i).getOriginX()*scaleFX), (int)(points.get(i).getOriginY()*scaleFY), childV.getWidth(), childV.getHeight());
    }

} 
```

不明白为什么 InstantiateItem() 没有被调用。任何有用的想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:17:56.997

这`ViewPager`是一个`View`并且应该添加到 UI 中。通常通过在布局文件中声明它。

从 SDK 示例中提取：

*   布局文件：

    ```
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center_horizontal"
        android:orientation="vertical"
        android:padding="4dip" >

        <android.support.v4.view.ViewPager
            android:id="@+id/pager"
            android:layout_width="match_parent"
            android:layout_height="0px"
            android:layout_weight="1" >
        </android.support.v4.view.ViewPager>
        ... 
    ```

*   活动课

    ```
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.fragment_pager);

        mAdapter = new MyAdapter(getSupportFragmentManager());

        mPager = (ViewPager)findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);
        ... 
    ```

完整的源码在 SDK 的 extras/android/support/samples/Support4Demos 目录下

# android - java.lang.NoClassDefFoundError:android 和 junit 测试

> ID：14213219
> 
> 赞同：46
> 
> 时间：2013-01-08T10:45:24.157
> 
> 标签：android, junit, testcase

我看到我不是唯一一个遇到这个问题的人，但我没有找到正确的答案。我有一个要测试的 android 项目。我为项目的每个类创建了一个 junit 测试类。我的问题是当我运行测试时，出现以下错误：

```
java.lang.NoClassDefFoundError: android/content/Context 
```

这是我的课堂测试：

```
public class DevicesBDDTest extends TestCase {

    DevicesBDD bdd;

    /**
     * @throws java.lang.Exception
     */
    protected static void setUpBeforeClass() throws Exception {
    }

    /**
     * @throws java.lang.Exception
     */
    protected static void tearDownAfterClass() throws Exception {
    }

    protected void setUp() throws Exception {
        super.setUp();
        Context ctx = mock(Context.class);
        final MaBaseSQLiteInterface mockMaBaseSQLite = mock(MaBaseSQLiteInterface.class);
        bdd = new DevicesBDD(ctx){
            @Override
            public MaBaseSQLiteInterface createMaBaseSQlite(Context context) {
                return mockMaBaseSQLite;
            }
        };
    }

    protected void tearDown() throws Exception {
        super.tearDown();
    }

    public void test() {
        assertEquals(1, 1);
    }
} 
```

我的类 DevicesBDD 需要一个对象上下文，因此我创建了一个模拟（使用模拟）。我也尝试了一个对象 MockContext ，但它不起作用。

这是我的 Java 构建路径：

*   mockito-all-1.9.5.jar
*   安卓 2.1 -> android.jar
*   Android 依赖项 -> annotations.jar
*   Junit 3 -> junit.jar

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2017-03-02T10:27:39.203

不确定我是否遇到与您相同的问题，但我正在使用 gradle，由于某种原因，测试不再运行，出现与您相同的错误。我尝试清洁和重建，但无济于事。经过数小时的沮丧并试图找到答案后，我在 GitHub 线程中发现了一个简单的解决方案：

> 我通过**删除项目中的 .gradle 文件夹**并重建项目解决了这个问题。

（感谢 vpetrov）

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2017-03-22T09:20:46.900

您可以`./gradlew clean test`在终端中运行。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2019-04-10T20:56:44.177

按照以下步骤修复了该问题-

1.打开模块级build.gradle文件，进入依赖项，进入这一行——

```
testImplementation 'junit:junit:4.12' 
```

2.将junit版本更改为低于它的任何其他版本（如4.10）

```
testImplementation 'junit:junit:4.10' 
```

3.同步项目

4.在我的情况下，此时已解决的问题

5.如果需要，请将 junit 版本设置回之前的版本（在我的情况下为 4.12）

```
testImplementation 'junit:junit:4.12' 
```

6.同步项目

更改 junit 版本和同步项目在我的情况下有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-01T15:48:20.200

Robolectric 4.4 版似乎不支持 jdk 14。所以我可以切换到 jdk 13 或将 robolectric 更新为 `4.5-alpha-1`

# android - 如何在 onClick 方法中获取按钮名称

> ID：14213231
> 
> 赞同：1
> 
> 时间：2013-01-08T10:46:07.000
> 
> 标签：android

如何获取文本按下按钮，内部`onClick`方法。我不能使用变量，因为它会改变。

```
 Button[] mButtonsArray = new Button[MyArrayList.size()];
        for (Button b : mButtonsArray) 
        {
b = new Button(this);
            b.setText("name");
            b.setOnClickListener(
                    new OnClickListener() 
                    {
                        @Override
                        public void onClick(View arg0) 
                        {
                            MyClass.MyMethod(ButtonName);
                        }
                });
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T10:52:54.427

在 onclick 方法中使用它。

```
((Button) arg0).getText().toString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T10:48:49.377

您可以使用`setTag`和`getTag`...

```
Button[] mButtonsArray = new Button[MyArrayList.size()];
    for (Button b : mButtonsArray) 
    {
b = new Button(this);
        b.setText("name");
        b.setTag("name");
        b.setOnClickListener(
                new OnClickListener() 
                {
                    @Override
                    public void onClick(View arg0) 
                    {
                        MyClass.MyMethod((String)arg0.getTag());
                    }
            });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T10:50:25.390

你为什么不直接使用

```
b.setOnClickListener(
                    new OnClickListener() 
                    {
                        @Override
                        public void onClick(View arg0) 
                        {
                            MyClass.MyMethod(((Button) arg0).getText().toString());
                        }
                }); 
```

这样会很简单。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T10:50:54.723

你可以在这里使用`setTag()`和`getTag()`，

```
b.setTag("name"); 
```

并获取它使用，

```
 b.setOnClickListener(
     new OnClickListener() 
    {
       @Override
        public void onClick(View arg0) 
        {
            String name = (String)arg0.getTag();
        }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T10:52:31.930

只需使用以下代码：

```
Button[] mButtonsArray = new Button[MyArrayList.size()];
        for (Button b : mButtonsArray) 
        {
b = new Button(this);
            b.setText("name");
            b.setOnClickListener(
                    new OnClickListener() 
                    {
                        @Override
                        public void onClick(View arg0) 
                        {
                            Button b=(Button)arg0;
                            name=b.getText();
                        }
                });
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T10:53:27.610

```
b.setOnClickListener(
         new OnClickListener() {
              @Override
              public void onClick(View arg0) {
                   String name = ((Button) arg0).getText().toString();
              }
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-08T10:54:17.060

您可以通过在 arg0 上使用 getText() 将其转换为如下所示的按钮类型来获得。

```
 b.setOnClickListener(new OnClickListener() {
 @Override
 public void onClick(View arg0) 
 {
  Button btn = (Button)arg0;
  if(btn != null)
MyClass.MyMethod(btn.getText());
  } 
```

});

# javascript - 未捕获的 ReferenceError：无效的左侧表达式

> ID：14213236
> 
> 赞同：2
> 
> 时间：2013-01-08T10:46:23.427
> 
> 标签：javascript

我有5次以下错误：

> 未捕获的 ReferenceError：后缀操作中的左侧表达式无效

你们明白为什么吗？感谢你的帮助 ！

```
toQueryParams: function (string, separator) {
  var match = _(string).strip().match(/([^?#]*)(#.*)?$/);
  if (!match) return {};
  return _(match[1].split(separator || '&')).reduce(function (hash, pair) {
    if ((pair = pair.split('='))[0]) {
      var key = decodeURIComponent(pair.shift()),
        value = pair.length > 1 ? pair.join('=') : pair[0];
      if (value != undefined) value = decodeURIComponent(value);
      if (key in hash) {
        if (!_.isArray(hash[key])) hash[key] = [hash[key]];
        hash[key].push(value);
      }
      // Uncaught ReferenceError: Invalid left - hand side expression in postfix operation
      // Uncaught ReferenceError: Invalid left - hand side expression in postfix operation
      // Uncaught ReferenceError: Invalid left - hand side expression in postfix operation
      // Uncaught ReferenceError: Invalid left - hand side expression in postfix operation
      // Uncaught ReferenceError: Invalid left - hand side expression in postfix operation
      else hash[key] = value;
    }
    return hash;
  }, {});
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:22:24.507

我弄清楚发生了什么。不是这段代码，而是在尝试使用旧版本的 JSMin 缩小 underscore.js 时......

我现在要搬到更丑的地方。

# .net - 带有 `selectedindexchanged` 句柄的 sub 调用自身

> ID：14213243
> 
> 赞同：0
> 
> 时间：2013-01-08T10:46:34.517
> 
> 标签：.net, vb.net, winforms, visual-studio-2010

我有一个表单，它被后台工作人员称为对话框。在此对话框中，有一个组合框和几个按钮。`selectedindexchanged`我有一个基于组合框的带有手柄的子。

在此子的条件之一内，组合框的选定索引被更改。更改时`selectedindex`，调试器似乎停止在当前行并`selectedindexchanged`再次调用 sub。它通过子程序运行到最后没有错误，然后在更改索引的行之后恢复。但是，当子例程的第一个实例结束时，从后台工作程序调用对话框的行会引发错误。`Exception has been thrown by the target of an invocation.`

所以在这里我基本上有两个问题，可以用一种解决方案来解决。首先如何停止`selecetedindexchanged`sub 运行两次，其次如何在 sub 结束时出错。

下面的示例代码。

调用对话框的代码：

```
 If diaImpSelectedSite.IsAccessible = False Then diaImpSelectedSite.Activate()
                    diaImpSelectedSite.RequestSender = Me
                    diaImpSelectedSite.ShowDialog()
                    DialogResult = diaImpSelectedSite.Result()
                    diaImpSelectedSite.Close() 
```

代码`SelectedIndexChanged`

```
 Private Sub cmbSites_SelectedIndexChanged(sender As System.Object, e As System.EventArgs) Handles cmbSites.SelectedIndexChanged
    If Not cmbSites.SelectedIndex = -1 Then
        If cmbSites.SelectedIndex = cmbSites.Items.Count - 1 Then
            MsgBox(Str(cmbSites.SelectedIndex) & "/" & Str(cmbSites.Items.Count))
            Dim result As String = funAddSite()
            FillSites()
            cmbSites.SelectedIndex = SiteFromSiteName(result) - 1
            Exit Sub
        Else
            bttYes.Enabled = True
        End If
    End If
End Sub 
```

上述子函数中的代码

```
Private Function funAddSite()
    Dim showndiaAddsite As diaAddSite = New diaAddSite()
    showndiaAddsite.RequestSender = Me
    showndiaAddsite.ShowDialog()
    Return showndiaAddsite.Result()
    showndiaAddsite.Close()
End Function 
```

`Fillsites` 私人子 FillSites()的代码

```
 Dim RecordCounter As Integer
    Dim sitetags As New List(Of Integer)
    cmbSites.Items.Clear()

    If Not UserSites(0) Is Nothing Then
        For RecordCounter = 1 To Sites.Rows - 1 Step 1
            If Not Sites.Value(0, RecordCounter) = Nothing Then
                sitetags.Add(RecordCounter)
                cmbSites.Items.Insert(cmbSites.Items.Count, "TTSite_" & Format(RecordCounter, "000") & " " & Sites.Value(0, RecordCounter))
            End If
        Next
    End If
    cmbSites.Items.Insert(cmbSites.Items.Count, "New Site...")
    cmbSites.Text = "Select Site..."
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:17:53.860

有几种方法可以阻止事件处理程序运行两次，其中两种是：

**简单**
您可以设置一个成员变量来指示事件处理程序当前是否正在执行，并且仅在未设置标志时才执行事件处理程序：

```
Private Sub cmbSites_SelectedIndexChanged(sender As System.Object, e As System.EventArgs) Handles cmbSites.SelectedIndexChanged
    If Not m_alreadyInSelectedIndexChanged And Not cmbSites.SelectedIndex = -1 Then
        m_alreadyInSelectedIndexChanged = True
        Try
            If cmbSites.SelectedIndex = cmbSites.Items.Count - 1 Then
                MsgBox(Str(cmbSites.SelectedIndex) & "/" & Str(cmbSites.Items.Count))
                Dim result As String = funAddSite()
                FillSites()
                cmbSites.SelectedIndex = SiteFromSiteName(result) - 1
                Exit Sub
            Else
                bttYes.Enabled = True
            End If
        Finally
            m_alreadInSelectedIndexChanged = False
        End Try
    End If
 End 
```

**高级**
进入事件处理程序时 删除事件`cmbSites.SelectedIndexChanged`的事件处理程序，并在完成事件处理程序之前重新添加。

# c++ - 在使用 Boost Graph 库生成随机图时添加省略的顶点

> ID：14213245
> 
> 赞同：1
> 
> 时间：2013-01-08T10:46:42.033
> 
> 标签：c++, graph, vertex, boost-graph

我有一段代码，它生成一个随机图，每个顶点最多有 4 条边。代码如下：

```
int const N = read_int("Number of vertices: ",
        "I did not understand, try again. Number of vertices: ");   

    // Creating a instance g of unigraph undirected graph
    undigraph g;

    //Assigining property(name) to graph vertex
    property_map<undigraph, vertex_name_t>::type
        name = get(vertex_name, g);
    typedef graph_traits<undigraph>::vertex_descriptor Vertex;
    Vertex u1;
    u1=add_vertex(g);
    name[u1] = "Controller";

    //Creatng other vertices in the graph by iterating
    for(Vertex p = 1; p <= N-1; ++p)
    {
        p=add_vertex(g);
    }

    // Priting out the controller
    vp = vertices(g);
    std::cout << "The name of the first vertex is " << name[*vp.first]<<" and the output graph is:" <<std::endl;

    // --------------------------------------------------------------
    // Generating a random edges from a vertex, maximum edges are four
    //    Using Mersenne twister- A Pseudo random generator algorithm
    //     Mersenne twister gives un-distributed random numbers
    //----------------------------------------------------------------

    RNGType rng( time(0) );
    boost::uniform_int<> one_to_four( 0, (N-1) );
    boost::variate_generator< RNGType, boost::uniform_int<> >gen(rng, one_to_four);
    for(int i =0; i<N; i++)
    {
        // Intialising the number of inedges and outedges to a vetrex
        // to k, so that number of edges from a vertex are less than 4.
        int k = (in_degree(i, g) + out_degree(i, g)); 
        while(k<4)
            //while(k<(N/2 -1))
        {  
            //Getting a random number from Mersenne twister
            int n  = gen();

            // The coming block adds edges onto the graph "g" and outputs it in grpahviz format

            // Checking if there are edges such as (3,2) and (2,3), if any one of them exist, then the edges are not added.
            if(!boost::edge(i, n, g).second && !boost::edge(n, i, g).second)    
            {
                //if(i !=n )
                // Checking if no of incoming edges and outgoing edges from a vertex is 4 or less than it
                if ((in_degree(n,g) + out_degree(n,g) + 1) <= 4)
                {
                    // Adding edges after performing all the checks.
                    add_edge(i, n, g);
                }        
            }k++;
        }
        // Removing edges that directs on the same vertex where they are originated.
        if(i == i)
        {
            remove_edge(i,i,g);
        }
    }   
    //output the graph in graph viz format in the console.
    write_graphviz(cout, g);
    return 0;
} 
```

但是当我输入顶点数时，比如说 20，我得到如下输出：

![vertices=20 的 graphviz 输出](../Images/ef621f5df49e62e0a5109fff6f2479d8.png)

可以看出，顶点 10 和 13 是分开的，并且没有连接到任何其他顶点。有没有办法将此顶点连接到某个随机顶点？

任何帮助将非常感激。

# c# - 带有 ASP.NET Webform 的 IIS7 上的 FileNotFoundException

> ID：14213251
> 
> 赞同：1
> 
> 时间：2013-01-08T10:46:53.100
> 
> 标签：c#, asp.net, file-upload, iis-7, dynamics-crm-2011

在过去的几个小时里，我确实经常使用 google 和 stackoverflow，但我没有找到帮助我解决问题的解决方案或主题。

任务和问题：

我创建了一个 ASP.NET Webform，它可以在我的本地机器上完美运行。它允许用户在 Dynamics CRM 2011 中创建客户。在此旁边，用户可以向客户添加注释并添加要上传的文件。

下一步是在 IIS7 上发布此 Webform，以便您可以远程访问它，它位于远程 Windows 2008 R2 Server 上。如果我现在测试 Webform 并从 FileUpload 控件中选择一个数据，IIS7 没有得到正确的 Path `(FileNotFoundException)`，它总是使用他的根目录而不是数据中的 Filepath，即使我想直接从服务器“上传”一个文件安装 IIS 的位置。

堆栈跟踪：

```
[FileNotFoundException: Die Datei "c:\windows\system32\inetsrv\test.txt" konnte nicht gefunden werden.]
System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) +12898679
System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath) +2481
System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, String msgPath, Boolean bFromProxy) +229
System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share) +102
System.IO.File.OpenRead(String path) +55
FirstWebform._Default.create_Button_Click(Object sender, EventArgs e) in C:\Users\flah\Documents\Visual Studio 2010\Projects\FirstWebform\FirstWebform\Main.aspx.cs:86
System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +154
System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3707 
```

我试过的：

*   我已经读过，我必须先将 IIS7 上的文件保存在临时目录中，`FileUpload.Saveas("C:\\folder\\" + FileUpload.Filename)`然后才能使用它，但同样的问题发生了，文件路径错误并且它没有得到它。

*   我试图获得`Path.GetFullPath(FileUploadControl.PostedFile.FileName);`也不起作用的路径名 - 与`Server.MapPath();`

*   我已经在服务器上为用户设置了权限

我不明白为什么 IIS 总是使用他的根目录，`FileUpload`以及为什么它在我的本地机器上运行良好。

没有我尝试的重要代码：

```
if (FileUpload1.HasFile)
{
    FileStream stream = File.OpenRead(FileUpload1.PostedFile.FileName);
    byte[] byteData = new byte[stream.Length];
    stream.Read(byteData, 0, byteData.Length);
    stream.Close();

    //Dynamics CRM 2011 upload
    string encodedData = System.Convert.ToBase64String(byteData);                     
    newAnnotation.DocumentBody = encodedData;
    EntityReference refNote = new EntityReference();
    refNote.LogicalName = "account";
    refNote.Id = newAccountId;
    newAnnotation.Attributes.Add("objectid", refNote);
    service.Create(newAnnotation);
} else {
    EntityReference refNote = new EntityReference();
    refNote.LogicalName = "account";
    refNote.Id = newAccountId;
    newAnnotation.Attributes.Add("objectid", refNote);
    service.Create(newAnnotation);
} 
```

我希望有人可以帮助我。也许它只是一个小配置或者我对整个架构的轻描淡写一定是错误的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:08:10.577

我相信您需要先处理文件才能使用它。IIS 已收到该文件，并将其保存在一个临时位置，直到用户代码`FileUpload1`处理保存。

我相信您已经尝试过下面的代码，但只是为了确保；因为您需要在访问之前保存文件。这是执行此操作的标准方法，但您的代码示例不会尝试保存。

尝试以下操作：

```
String savePath = @"c:\temp\uploads\"; // Save folder - Ensure exists, permissions etc

if (FileUpload1.HasFile)
{
    // Append the name of the file to upload to the path.
    savePath += FileUpload1.FileName;

    // TODO : Error checking - verify file is accepted type/size/does not already exist
    FileUpload1.SaveAs(savePath);

    int fileLen = FileUpload1.PostedFile.ContentLength;
    Byte[] Input = new Byte[fileLen];
    System.IO.Stream myStream = FileUpload1.FileContent;
    myStream.Read(Input, 0, fileLen);

    // TODO : Other Processing

} else {
    // TODO : Handle not hasfile
} 
```

[请参阅MSDN Library 上 FileUpload](http://msdn.microsoft.com/en-us/library/ysf0192b.aspx)页面底部的一些示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:22:03.187

您需要使用[FileUpload.PostedFile.InputStream](http://msdn.microsoft.com/en-us/library/system.web.httppostedfile.inputstream.aspx)来获取实际上传的内容。例如，

```
if (FileUpload1.HasFile)
{
    var stream = FileUpload1.PostedFile.InputStream;
    byte[] byteData = new byte[FileUpload1.PostedFile.ContentLength];
    stream.Read(byteData, 0, byteData.Length);
    stream.Close();

    ... 
```

**编辑**：关于您使用现有代码获得的异常，问题出在该行上`File.OpenRead(FileUpload1.PostedFile.FileName);`- 您试图在客户端计算机上存在文件时在服务器计算机上打开一个具有名称的文件。因为您没有提到任何路径信息，所以它正在某个默认（比如 system32）目录中查找文件 - 所以如果客户端机器和服务器机器相同并且文件是从根目录上传的，那么代码将起作用，但出于所有实际目的这是没用的。

# java - 每次 junit 测试后 Spring 自动装配依赖项

> ID：14213252
> 
> 赞同：0
> 
> 时间：2013-01-08T10:46:53.643
> 
> 标签：java, spring, junit

我遇到了一个问题，即 spring 正在重新创建我的 bean 并在每次运行 junit 测试后重新自动接线。我只希望 spring 在测试类的 post 构造上执行一次，这就是我将其配置为执行的操作。

我也尝试将@DirtiesContext 类模式设置为AFTER_CLASS，但这仍然没有解决问题。

有任何想法吗？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-12-20T08:46:46.400

您可以创建一个类：

```
@SpringJUnitConfig(classes = {ConfigClassOne.class, ConfigClassTwo.class, ConfigClassThree.class})
public abstract class ModelTest {} 
```

并在测试类中扩展它。不会重新创建 Bean，因为注释中已经提到了应用程序上下文。

# android - 动态地将分隔线添加到列表视图中的最后一项

> ID：14213254
> 
> 赞同：0
> 
> 时间：2013-01-08T10:47:00.687
> 
> 标签：android, android-listview, android-linearlayout

我正在以编程方式将列表视图添加到这样的线性布局中：

```
ArrayList<Answer> ans = (ArrayList<Answer>) ques.getAnswers();
    adapter = new AnswerAdapter(Test.this, ans);

    ansList = new ListView(Test.this); // my list view adding dynamically
    ansList.setAdapter(adapter);
    ansList.setVerticalScrollBarEnabled(false);
    ansList.setOnItemClickListener(cellClickListener);
    ansLayout.addView(ansList); 
```

现在的问题是它在除最后一项之外的每个项目之后都有默认分隔线，我希望分隔线在最后一项之后也可见。

我在 SO 中研究了许多问题，他们在布局中添加视图，但我需要以编程方式添加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:55:32.307

您可以在列表视图中添加页脚视图...所以制作页脚视图的布局...并如下绑定

```
View footerView = ((LayoutInflater)getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.track_footer_view, null, false);
listview.addFooterView(footerView); 
```

所以你可以在最后一个项目的末尾有页脚视图..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:05:42.713

**-**将该分隔符添加`footer`为您的`ListView`.

**例如：**

```
View mfooter = View.inflate(MyClass.this, R.layout.imagelayout, null);
lv.addFooterView(mfooter, null, false); 
```

# .net - The HTTP request to 'http:///xxx.svc' has exceeded the allotted timeout

> ID：14213256
> 
> 赞同：2
> 
> 时间：2013-01-08T10:47:12.707
> 
> 标签：.net, wcf, http, .net-remoting

I am investigating the following TimeoutException exception. Has anyone encountered this before? Can anyone suggest a solution?

We have a clients that connect to a WCF service to upload a payload of data via HTTP. Recently the server is failing. Here are some exception details:

> mscorlib threw TimeoutException The HTTP request to 'http:///xxx.svc' has exceeded the allotted timeout of 00:00:10\. The time allotted to this operation may have been a portion of a longer timeout.
> 
> Server stack trace: at System.Runtime.AsyncResult.End[TAsyncResult](IAsyncResult result)
> at System.ServiceModel.Channels.ServiceChannel.SendAsyncResult.End(SendAsyncResult result) at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[] outs, IAsyncResult result) at System.ServiceModel.Channels.ServiceChannelProxy.InvokeEndService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)
> 
> Exception rethrown at [0]: at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type

Please excuse my brevity. I am not a WCF expert. Any recommendations would be much appreciated.

Is there a timeout value I can increase?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:04:33.837

您可以增加`receiveTimeout`绑定的属性。

以下是 MSDN 上的几个链接：

常规：[使用配置文件配置服务](http://msdn.microsoft.com/en-us/library/ms733932.aspx)

绑定：[为 Windows Communication Foundation 服务配置绑定](http://msdn.microsoft.com/en-us/library/ms733099.aspx)

# jqgrid - jqgrid group header not showing ampersand character in IE 7/8

> ID：14213259
> 
> 赞同：0
> 
> 时间：2013-01-08T10:47:23.247
> 
> 标签：jqgrid, jqgrid-asp.net

I am using jqgrid to show dynamic data in it, my sql stored procedure returns some data as "T & E". I am displaying this data in group header, i can only see "T" in the group header the rest of the data is trimmed down in IE 7/8\. The same thing when i run it in Firefox it show correctly as "T & E". Please tell me the solution for this problem, any help would be appreciated.

I have tried the autoencode property setting it to true, but it did not work, I have kept the meta tag character encoding utf-8 in the aspx file.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:50:47.437

我在编辑时遇到了类似的问题。这个[链接](http://blogs.teamb.com/craigstuntz/2010/02/08/38548/)通过一些调整帮助我实现了我想要的。

我的系统配置。

用IE8赢7

编辑时，“&”后面的文本丢失了。例如：如果我们有像“a&a”这样的文本，那么只有“a”会出现在网格中并最终被保存。

自定义格式化程序如何对我有用。

```
//In col Model 
//Assuming description is one of your column in the jqGrid
//Note the formatter , this is the custom formatter which does the magic for us in this case.
{ name: 'Description', index: 'Description', align: "center", sorttype: 'text', sortable: true, resizable: false, editable: editGrids, formatter: formatTextDisplay,unformat:unformatTextDisplay}

//Formatter code
var formatTextDisplay = function (cellval, opts, action) {
            if (cellval) {
                return $.jgrid.htmlEncode(cellval);
            };
            return "";
        }

//Un formatter code, in case you want to read through the text in its original state from the grid for processing in the javascript file.
var unformatTextDisplay = function (cellval, opts, action) {
            if (cellval) {
                return $.jgrid.htmlDecode(cellval);
            };
            return "";
        } 
```

# postgresql - 插入时，如何以编程方式将空值转换为列的默认值？

> ID：14213267
> 
> 赞同：3
> 
> 时间：2013-01-08T10:48:05.430
> 
> 标签：postgresql

我有一个表，我为其中的一些列提供了默认值。我想创建一个函数，其参数对应于将在将任何空值修改为列的默认值后在表中插入记录的列。我不想根据哪些参数为空来以编程方式构造查询。基本上我想要类似的东西

```
INSERT into Table (c1, c2, c3, c4)
Values (coalesce(somevar, DEFAULT(c1)), ...) 
```

这可能吗？我已经看到[mysql 可以做到这一点](https://stackoverflow.com/questions/13867593/insert-default-into-not-null-column-if-value-is-null)。postgres 是否提供类似的功能？我使用的是 9.1 版

更新：这个[问题](https://stackoverflow.com/questions/8146448/get-the-default-values-of-table-columns-in-postgres)提供了一些有趣的解决方案，但不幸的是结果总是文本。我想将默认值作为其真正的数据类型，以便我可以使用它来插入它。我试图找到一种解决方案，将默认值从文本转换为其数据类型（以文本形式提供），但我找不到方法：

```
SELECT column_name, column_default, data_type
FROM information_schema.columns
WHERE (table_schema, table_name) = ('public', 'mytable')
AND column_name = 'mycolumn'
ORDER BY ordinal_position; 
```

以上将 column_default 和 data_type 作为文本返回，那么如何将 column_default 转换为 data_type 的**值**？如果我能做到这一点，那么我的问题就迎刃而解了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T23:38:40.183

如果表定义接受所有列的默认值的 INSERT，则以下两步方法可能有效：

```
CREATE FUNCTION insert_func(c1 typename, c2 typename, ...)
RETURNS VOID AS $$
DECLARE
 r record;
BEGIN
 INSERT into the_table default values  returning *,ctid INTO r;
 UPDATE the_table set
  col1=coalesce(c1,r.col1),
  col2=coalesce(c2,r.col2),
  ...
 WHERE the_table.ctid=r.ctid;
END;
$$ language plpgsql; 
```

诀窍是在插入时将所有默认值放入`r`记录变量中，然后在 UPDATE 中使用它们来替换任何非默认值。`ctid`是一个伪列，指定刚刚插入的行的内部唯一 ID。

**警告**：如果某些列具有默认空值和非空检查（或任何暗示不接受默认值的检查），此方法将不起作用，因为第一个 INSERT 将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:05:05.937

我已经使用类似于 Daniel 的解决方案解决了我的问题，方法是创建一个带有`LIKE`和`INCLUDING DEFAULTS`子句的临时表以匹配我的行类型，然后我使用

`INSERT INTO temp_table (c1, c2, ...) VALUES(x1, DEFAULT, ..)`

对我感兴趣的任何列使用默认关键字。然后我通过从临时表中选择并使用

`VALUES( x1, coalesce(x2, temp_table.c2), ...)`.

我不喜欢它，但它工作正常：我可以选择我想在哪些列上执行此“null-replace-with-default”检查，如果我重载我的函数以接受，它可以一次性处理多行一个记录数组。

# c++ - sigaction 结构和函数

> ID：14213270
> 
> 赞同：2
> 
> 时间：2013-01-08T10:48:14.617
> 
> 标签：c++, linux, signals

以下代码编译，

```
struct sigaction sa;
memset (&sa, 0, sizeof (sa));
sa.sa_handler = &handler;
sigaction (SIGRTMIN + 5, &sa, NULL); 
```

但如果我省略`struct`它会给我错误：

> 预期的 ';' 在'sa'之前

我正在使用`struct`不需要 using 关键字的 c++。

当我使用它时它是如何工作`struct`的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T10:53:51.107

在 C 中，结构标签与其他名称位于单独的名称空间中，因此它们不会发生冲突。在 C++ 中，语言中有一个特殊的技巧来支持这一点：除了通常的函数重载之外，您可以在同一范围内拥有两个相同的符号，提供一个是指定类类型或枚举的类型名称。查找名称时，编译器将选择*不是*类型名称的名称，除非该名称紧跟在类键（`class`或`struct`）`union`或关键字之后`enum`。

# c# - ASP.NET & TCP 服务器解决方案

> ID：14213271
> 
> 赞同：3
> 
> 时间：2013-01-08T10:48:14.527
> 
> 标签：c#, asp.net, sockets, tcp

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-06T08:29:25.223

如果您从另一个 SignalR 客户端（网页）获取消息，SignlaR 是一个很好的解决方案。

但是，如果这些消息是通过 TCP/IP 从第三个系统发送的呢？然后您需要在 ASP.NET Web 应用程序中打开一个 TCP 端口，并在收到消息后将其推送到 Web 客户端。

但问题是，将这种 TCP 侦听器托管在 Web 应用程序 (ASP.NET) 中的最佳方式是什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T10:55:21.643

如果您的“消息”主要是文本，您可能需要查看[SignalR](http://signalr.net/)。

SignalR 是一个新的 asp.net 库，用于启用实时 Web 功能。

它使用 websockets（如果 websockets 在服务器/客户端不可用，则使用长轮询）。

它支持不同的客户端类型。

# html - Rangy - selectNode() - 不同浏览器中的不同行为？

> ID：14213273
> 
> 赞同：0
> 
> 时间：2013-01-08T10:48:22.670
> 
> 标签：html, cross-browser, selection, rangy

我正在与 rangy 合作，并遇到了一个与选择及其跨浏览器行为有关的问题。

我在 div 中有一些元素（例如超链接），我希望能够在单击该元素内部时选择**outerHTML 。**

```
<div>Lorem ipsum <a href="#">duo dolores</a> tempor.</div> 
```

因此，我尝试`range.selectNode()`并期望选择整个节点，以便`selection.toHtml()`为我提供超链接的 outerHTML。要获得 innerHTML 我会调用`range.selectNodeContents()`. 这就是它在 IE 9 中的工作方式。

但在 Chrome 中，在这两种情况下都只选择了 innerHTML。rangy 插件（应该是跨浏览器）中是否存在错误，或者我做错了什么？

检查[这个小提琴](http://jsfiddle.net/SNv83/5/)，看看我的意思。首先在 IE 9 中打开它，将插入符号放在超链接内，然后单击第一个按钮（检查输出`selection.toHtml()`）。然后再次将插入符号放在超链接内并单击第二个按钮（再次检查输出）。之后在 Chrome 中执行相同的操作。

# java - 如何防止 java.net.ConnectException：连接超时？

> ID：14213287
> 
> 赞同：2
> 
> 时间：2013-01-08T10:49:05.300
> 
> 标签：java, jdbc, socket-timeout-exception

任何人都可以解释 java.net.ConnectException: Connection timed out

```
Caused by: java.net.ConnectException: Connection timed out 
    at java.net.PlainSocketImpl.socketConnect(Native Method) 
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:337) 
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:198) 
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:180) 
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391) 
    at java.net.Socket.connect(Socket.java:579) 
    at sun.reflect.GeneratedMethodAccessor11.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at net.sourceforge.jtds.jdbc.SharedSocket.createSocketForJDBC3(SharedSocket.java:289) 
    at net.sourceforge.jtds.jdbc.SharedSocket.(SharedSocket.java:250) 
    at net.sourceforge.jtds.jdbc.ConnectionJDBC2.(ConnectionJDBC2.java:297) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:59:12.593

如果您能够 ping 通 sql server，那么这可能是 sql server 实例中的 TCP/IP 配置有问题。

您可以参考[这个关于如何启用 TCP/IP](https://stackoverflow.com/questions/9138172/enable-tcp-ip-remote-connections-to-sql-server-express-already-installed-databas)的问题，也可以参考微软的[这篇](http://msdn.microsoft.com/en-us/library/bb909712%28v=vs.90%29.aspx)文章和[这篇](http://msdn.microsoft.com/en-us/library/hh231672.aspx)文章。

> 1.  启动 SQL Server 配置管理器。单击开始，指向所有程序，然后单击 Microsoft SQL Server。单击配置工具，然后单击 SQL Server 配置管理器。
> 2.  在 SQL Server 配置管理器的控制台窗格中，展开 SQL Server 网络配置。
> 3.  在控制台窗格中，单击 的协议。
> 4.  在详细信息窗格中，右键单击 TCP/IP，然后单击启用。
> 5.  在控制台窗格中，单击 SQL Server 服务。
> 6.  在详细信息窗格中，右键单击 SQL Server ()，然后单击重新启动，以停止并重新启动 SQL Server 服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:07:31.403

这意味着驱动程序试图在该端口上打开与该 IP 的连接，但~~没有人在该端口上侦听~~，因此没有人回答因此“连接超时”消息。

正如 Arunn P Johny 建议的那样，如果您打开命令行并运行

```
telnet localhost 4545 
```

它的反应是这样的

```
Trying 127.0.0.1...
telnet: Unable to connect to remote host: Connection refused 
```

这意味着没有人在听。例如，尝试在该端口上打开套接字（数据库连接）将导致连接超时异常。（选择端口 4545 是因为我的电脑上没有任何东西在监听）

如果它回应其他任何东西，例如

```
telnet localhost 3306

Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'. 
```

这意味着端口是开放的，不会抛出异常。（我的电脑上有 MySQL 监听 3306）。

~~[很可能您的数据库连接字符串](http://en.wikipedia.org/wiki/Connection_string)中的 IP 和端口（请参阅此处以供[参考](http://www.connectionstrings.com/)）是错误的，例如设置为没有数据库正在侦听的某个端口。~~

请参阅此[答案](https://stackoverflow.com/a/14102489/679982)和[HTTP 错误 408 请求超时](http://www.checkupdown.com/status/E408.html)的解释（这是相同的错误）。

编辑：

我最初给出了一个错误的答案（正如 EJP 指出的那样）。建立连接时，这两个错误都发生在 TCP 级别：

*   `Connection refused`表示没有人在给定端口上监听
*   `Connection timeout`表示无法建立连接，或者如 EJP 所述，连接尝试超时。

假设您在 Java 中有以下行，最终 JDBC 驱动程序会在某些时候执行（类似的操作）：

```
Socket s = new Socket(IP,PORT); 
```

*在*执行此行之前，（TCP）连接已*关闭*。*在*执行此行并且没有抛出异常之后，连接就*建立了*（如[构造函数的 apidoc 中](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#Socket(java.net.InetAddress,%20int))所述）。*当*这条线正在执行时，这就是实际发生的情况（称为*TCP 三向握手*）：

![TCP 三次握手](../Images/075f8490d57bb1ad937eb86334c304a1.png)

让我们回顾一下两种可能的情况。

首先，假设 IP 是可访问的（例如`ping IP`，从命令行开始打印响应时间到控制台）但没有进程在 PORT 上侦听。三向握手将按照绘制的方式进行，但是一旦*建立*连接，服务器将找不到他的任何进程在该端口上侦听，并将立即开始关闭连接 -`Connection refused`将被抛出。

*这是此异常的唯一可能结果*。

现在，让我们假设 IP 不可访问。客户端将发送*连接请求*，但永远不会收到已*授予的连接*。在给定的时间段（*超时*）过去后，`Connection timeout`将被抛出。考虑以下代码：

```
 String reachableIP = "127.0.0.1";
    String unreachableIP = "10.192.0.1";
    int connTimeout = 1000;
    long duration = 0;        
    try {
        duration = System.currentTimeMillis();            
        new Socket().connect(new InetSocketAddress(unreachableIP, 3306), connTimeout);
    }
    catch (Exception e) {
        duration = System.currentTimeMillis() - duration;           
        System.out.println("connect attempt duration measured in ms:" + duration);
        System.out.println(e.getMessage());
    } 
```

输出：

```
connect attempt duration measured in ms:1009
connect timed out 
```

[这在连接方法](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#connect(java.net.SocketAddress,%20int))的 apidoc 中也有说明。因此，如果目标 IP 无法访问，则会引发此异常。但是，网络上的计算机*无法访问*的原因可能有很多。我首先想到的是主机被关闭，或者改写EJP的评论：

*有许多原因，例如积压队列已满，或可能导致此异常的网络连接问题。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T00:24:02.573

在大多数情况下，连接超时问题是由于您的 Internet 代理而发生的。确保您已在 IDE 的网络设置以及默认系统代理设置中提供了所有代理设置。

如果问题仍然存在，您必须尝试不使用代理连接...希望对您有所帮助

# python - 在 Tornado 中保持多少秒 Keep-Alive？

> ID：14213291
> 
> 赞同：1
> 
> 时间：2013-01-08T10:49:16.703
> 
> 标签：python, tornado

我有两个小问题：

*   EventDriven 模型和 Thread 模型在处理打开的连接上有什么区别？
*   在关闭连接之前需要多少秒 IOLoop？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T02:44:49.897

1.  事件驱动意味着客户端请求了信息，服务器将发起请求。请求就是事件。线程是在IO线程（即主线程）之外运行的进程。

2.  依靠。[http://www.tornadoweb.org/documentation/httpserver.html?highlight=keep%20alive#http-server](http://www.tornadoweb.org/documentation/httpserver.html?highlight=keep%20alive#http-server)搜索“no_keep_alive”

如果您询问浏览器将等待请求完成多长时间，那么我无限期地相信。所以它会一直打开，直到你完成响应。但是，我认为某些浏览器可能会退出请求并以超时响应......但我不确定。我刚刚做了一个测试，浏览器仍在等待 4 分钟后完成并计数。

# java - 具有出色 UI 的桌面应用程序 - 平台决策

> ID：14213297
> 
> 赞同：3
> 
> 时间：2013-01-08T10:49:34.180
> 
> 标签：java, qt, user-interface, desktop-application

我们已经开始构建一个桌面应用程序。UI 已在 Photoshop 上准备就绪，以及所有功能决定。在纸面上，UI 看起来很棒，我们希望在应用程序中复制同样的效果。

现在的问题是：我们是一个由 3 人组成的团队（2 名开发人员 + 1 名设计师）。为 Mac 和 Windows 构建单独的应用程序根本不可行。

所以选项是：

1.  在 Java Swing 上进行。节省时间。但是天啊！我会疯狂地建造它。
2.  使用 SWT 或其他工具包。很难开始，但如果它可以提供所需的产品，就可以做到。

还有其他选择吗？？语言无障碍（但相同的代码需要在 Mac 和 Windows 平台上运行）。产品需要很棒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:59:57.417

有些人（包括我）实际上成功地构建了 Swing 应用程序而没有发疯 :) 《[肮脏的富客户端](http://filthyrichclients.org/)》一书是在 Swing 中创建“很棒”的 GUI 的良好开端。

一个较新的替代品是 JavaFX，它应该更容易使用（我没有使用它的经验）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T10:53:44.090

也许是QT？有一个项目 QT Jambi ( [http://qt-jambi.org/](http://qt-jambi.org/) )

# c# - 将数字字符串拆分为数组

> ID：14213298
> 
> 赞同：3
> 
> 时间：2013-01-08T10:49:36.360
> 
> 标签：c#, arrays

我有字符串（10325710），我想将字符串拆分为一个数组。将字符串拆分为数组后，数组将为`{1,0,3,2,5,7,1,0}`. 注意字符串中有两个`1`s 和两个`0`s。我不想拆分“1”和“0”。因此，我希望得到的数组是`{10,3,2,5,7,10}`.

有什么建议吗？

我的 C# 代码：

```
string myNumber = "10325710";
string[] myArray = myNumber.Select(p => p.ToString()).ToArray(); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-08T10:59:56.023

```
int[] nums = myNumber.Replace("10", "A")
                     .Select(c => Convert.ToInt32(c.ToString(), 16))
                     .ToArray(); 
```

基本上用“A”替换“10”，然后将每个字符视为基数为 16 的数字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T11:06:57.043

好吧，只是把一些正则表达式放在桌子上：

```
Regex.Split(myNumber, @"(?!^)(?=[1-9])"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T10:53:24.770

你可以很容易地手动完成。

```
int i = 0;

int len = 0;
for (int j = 0; j < s.Length; j++)
    if (s[j] != '0')
        len++;

int[] result = new int[len];
int index = 0;
while (i < s.Length)
{
    if (i < s.Length - 1 && int.Parse(s[i + 1].ToString()) == 0)
    {
        result[index++] = int.Parse(s[i].ToString()) * 10;
        i += 2;
    }
    else
    {
        result[index++] = int.Parse(s[i].ToString());
        i++;
    }
}

return result; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T11:36:16.240

陈述：

```
var myArray=Regex.Matches(myNumber, @"1?\d").Cast<Match>().Select(p => p.ToString()).ToArray(); 
```

代码：

```
var myNumber="98765432101032571001210345610789";
var myMatches=Regex.Matches(myNumber, @"1?\d").Cast<Match>();
var myArray=myMatches.Select(p => p.ToString()).ToArray();

var whats_in_myArray="{ "+String.Join(", ", myArray)+" }";
Debug.Print("{0}", whats_in_myArray); 
```

输出：

```
{ 9, 8, 7, 6, 5, 4, 3, 2, 10, 10, 3, 2, 5, 7, 10, 0, 12, 10, 3, 4, 5, 6, 10, 7, 8, 9 } 
```

# mongodb - MongoDB $group 和具有计算列的显式组形成

> ID：14213300
> 
> 赞同：2
> 
> 时间：2013-01-08T10:49:39.520
> 
> 标签：mongodb, group-by, mongodb-query, calculated-columns

考虑一下 SQL 中的这段代码，它根据工资范围形成组：

`;With TableWithComputedColumn as (
select
computedcolumn =
Case
when Salary<30000 then 'Under 30K'
when Salary>30000 and Salary<60000 then '30K-60K'
else 'Above 60K'
end from Tbl_UserMaster
)
select computedcolumn, COUNT(*)
from TableWithComputedColumn group by computedcolumn`

我想在 Mongo 中执行此操作。我的猜测是 CTE 部分将要求我首先输出`{computed column}`到一个临时集合，然后`$group`对该集合执行一个操作。另一种方式（也是我更喜欢的方式）可能是使用作为聚合管道中的第一个流`$project`进行投影`{computed column}`，然后执行`$group`.

`db.UM.aggregate( {$project: { "computed_column": { //something with $cond}} },
{$group: {_id: {Salary_Slab:"$computed_column"}, count: {$sum:1}}}
);`

还请通过我之前问过的类似问题：

[MongoDB 中的条件 $sum](https://stackoverflow.com/questions/14102596/conditional-sum-in-mongodb)

它基本上给了我一个旋转的输出。在这种情况下，我需要非透视输出。为了比较两者，另一个问题的答案将创建三列：{Under 30K, 30K-60K, Above 60K} 单行计数，而我需要三行来表示 Under 30K、30K-60K 和 Above 60K在一列中，它们各自的计数在第二列中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T13:47:03.150

你在正确的轨道上。在这种情况下，您需要`$cond`像这样嵌套运算符：

```
db.UM.aggregate(
    { $project: {
        computed_column: {$cond: [{$gt: ['$Salary', 30000]},
            {$cond: [{$gt: ['$Salary', 60000]}, 'Above 60K', '30K-60K']},
            'Under 30K']}
    }},
    { $group: {_id: {Salary_Slab: '$computed_column'}, count: {$sum: 1}}}) 
```

结果：

```
[ { _id: { Salary_Slab: 'Above 60K' }, count: 3 },
  { _id: { Salary_Slab: '30K-60K' }, count: 1 },
  { _id: { Salary_Slab: 'Under 30K' }, count: 2 } ] 
```

# c# - Bluebeam pdf文件转换

> ID：14213301
> 
> 赞同：1
> 
> 时间：2013-01-08T10:49:40.423
> 
> 标签：c#

我创建了 c-sharp 应用程序，其中 bluebeam 软件用于将 doc 文件转换为 pdf 文件。Bluebeam Q 管理器正在网络中的一台机器上运行。

我使用以下代码连接到 bluebeam 服务。

```
ITask task = TaskManager.CreateNewTask();

IInputFile[] inputFile = { task.InputFiles.Add(sourceFile[j]) };
taskController = task.GetController("servername where bluebeam service is running"); 
```

它连接到 Bluebeam Q。我通过从本地驱动器浏览添加了输入文件。

```
IInputFile[] inputFile = { task.InputFiles.Add(sourceFile[j]) }; 
```

例如说 D:\Test.doc.. 需要使用 Bluebeam Q 转换为 pdf。

但我面临的问题是 Bluebeam Q 管理器检查我在其自己的本地目录中传递的输入文件并返回错误。我也尝试通过以下方式给出路径，

```
\\ipaddressof my machine\D$\inputfilename 
```

但这似乎不起作用。由于成千上万的用户将使用该应用程序，我也无法将文件写入服务器。有什么建议吗？

# bash - Bash：计算目录中最新文件的年龄

> ID：14213305
> 
> 赞同：1
> 
> 时间：2013-01-08T10:49:48.203
> 
> 标签：bash, backup, zabbix

我需要一个 bash 脚本来获取给定目录中最新文件的年龄（以小时或秒为单位）。例如：

```
-rw-r--r-- 1 root root 3.0M 2012-12-31 12:36 2012_12_31_1236_redis_dump_encrypted.tgz
-rw-r--r-- 1 root root 2.8M 2013-01-01 11:33 2013_01_01_1133_redis_dump_encrypted.tgz
-rw-r--r-- 1 root root 2.4M 2013-01-04 14:17 2013_01_04_1417_redis_dump_encrypted.tgz
-rw-r--r-- 1 root root 2.7M 2013-01-05 12:26 2013_01_05_1226_redis_dump_encrypted.tgz
-rw-r--r-- 1 root root  54M 2013-01-06 14:16 2013_01_06_1415_redis_dump_encrypted.tgz
-rw-r--r-- 1 root root 3.7M 2013-01-07 16:42 2013_01_07_1642_redis_dump_encrypted.tgz
-rw-r--r-- 1 root root 3.4M 2013-01-08 12:36 2013_01_08_1236_redis_dump_encrypted.tgz 
```

命令应接受目录路径并返回自`2013_01_08_1236_redis_dump_encrypted.tgz`创建最新文件 ( ) 以来经过的秒数。

我需要这个来使用 zabbix 监控最新备份的年龄（我想要一个警报，以防备份机制中断）。单线会很棒，因为它更方便用作 zabbix 用户参数，但不是必需的。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T11:11:47.927

Perl 的救援：

```
perl -le '$d=shift;chomp($f=(`ls -t $d/*`)[0]);print 24*60*60*-M$f' /path/to/dir 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-28T14:47:31.963

这是旧帖子，但也许它可以帮助某人。

我使用以下方法来计算文件的时间（以小时为单位）

```
 echo $(( ( $(date +%s) - $(stat -c %Y filen.name)) / (60*60)  )) 
```

date +%s - 自 1970-01-01 00:00:00 UTC 以来的秒数

stat -c %Y - 为参数中的文件提供相同的值

这在 OS X 和 BSD 上不起作用，stat 没有 -c 选项，但大多数 Linux 发行版应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T11:06:21.843

这可能有点脆弱，但应该以秒为单位返回最新文件（或目录）的年龄`$DIR`：

```
echo $(( $(date +%s) - $(ls -t $DIR | head -1 | xargs stat -f %a -t %s) )) 
```

%s 时间格式是自纪元以来的秒数，因此上述行获取最新文件的名称 ( `ls -t $DIR | head -1`)，获取自纪元 () 以来以秒为单位的上次访问时间`stat -f %a -t %s`，并从当前时间中减去自纪元以来的秒数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T14:18:34.803

这将返回以秒为单位的年龄和文件名。

```
stat -c "%Y %n" -- * | sort -rn | awk -v d=$(date +%s) 'NR==1 {print (d-$1), $2; exit}' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-09T20:05:18.363

```
# If no files less than 5 minutes old are found, print a 1\. Otherwise print a 0.
if [[ -z $(find $PATH -type f -mmin -5 2>/dev/null) ]]; then echo "1"; else echo "0"; fi 
```

这对于单行来说非常干净！在您需要发送命令行参数的那一刻，您需要.. 一个程序！G0T0 10 FTW!!!!1!!

# c++ - 遍历哈希表是如何实现的？

> ID：14213306
> 
> 赞同：13
> 
> 时间：2013-01-08T10:49:48.800
> 
> 标签：c++, qt, hash, iterator, complexity-theory

我试图了解如何实现对哈希表的迭代。我只是无法想象。我对这种迭代的速度特别感兴趣。例如：

```
QHash<int, std::string> hashTable;
...
for (auto it = hashTable.begin(); it != hashTable.end(); ++it)
    std::cout << it.value() << std::endl; 
```

这是`O(hashTable.size())`手术吗？

我试图挖掘源代码，但找不到正确的定义。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-08T10:53:55.983

哈希表的一些实现还维护所有条目的链接列表以允许快速迭代（所谓的“链接哈希映射”）。

如果他们不这样做，唯一的方法是遍历哈希表的所有桶，同时也遍历每个桶中的元素。

此操作的速度取决于表格的填充状态。当它非常低时，需要迭代很多空桶，这很浪费时间。当表格填满，并且每个桶中有一个或多个元素时，这几乎就像迭代一个链表。在每个桶只包含一个元素的完美哈希映射上，这就像迭代一个数组。

# ajax - Cakephp中的Ajax分页未设置页面

> ID：14213307
> 
> 赞同：3
> 
> 时间：2013-01-08T10:49:49.180
> 
> 标签：ajax, cakephp, pagination

我已经按照[CakeBook](http://book.cakephp.org/2.0/en/core-libraries/helpers/js.html#ajax-pagination)创建了基于 Ajax 的分页。链接都正常工作，路由正常工作，因为它将请求发送到控制器上的正确操作。我在控制器操作中获取了相关的页码，然后将其发送到 Paginate 助手以获取数据。但这只会返回结果的第一页，而与设置的页面无关。所以我在模型上覆盖了分页功能，果然我总是将页面设置为 1。

控制器动作代码..

```
public function reviews(){
   if ($this->RequestHandler->isAjax()) { 
        if(!empty($this->params['page'])) {
            $review = $this->Page->find('first',     array('conditions'=>array('friendly'=>'reviews')));
            $this->layout = 'ajax';
            $this->paginate = array(
                'page' => $this->params['page'],
                'limit' => 3,
                'order' => array(
                    'Review.rating'=>'desc')
            );
            $reviews = $this->paginate('Review');       
            $this->set(compact('review','reviews'));
        }
} 
} 
```

那么如何让 Paginator 使用我发送的页面呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:01:16.283

好的，找到了解决方案。分页的默认设置是使用命名参数。它为您提供诸如 blah/page:6 之类的 URL。我不知道为什么，但是如果您单独留下 Pagination 数组并且不设置页面，那么它似乎会忽略请求中的页码。所以我将分页中的选项更改为

```
 $this->paginate = array('Review'=>array(
                'paramType' => 'querystring',
                'page' => $this->params['page'],
                'limit' => 3,
                'order' => array(
                    'Review.rating'=>'desc')
            )); 
```

然后这没有正确地通过路由，我从 AJAX 请求中得到了错误的页面。这让我认为这可能是一个路由问题....我没有遵循这一点，因为我只是在创建分页链接时通过将视图上的分页选项设置为强制路由： -

```
$this->Paginator->options(array(
    'update' => '#tabReviews',
    'evalScripts' => true,
    "url"=>(array("controller"=>'home',"action"=>'reviews',"plugin"=>'tyres'))
)); 
```

这现在正在工作，所以我希望它可以帮助其他有同样问题的人。

# asp.net - 删除记录作为结束会话

> ID：14213308
> 
> 赞同：0
> 
> 时间：2013-01-08T10:50:01.667
> 
> 标签：asp.net, global-asax

当用户关闭浏览器时，我想从数据库中删除一条记录。我要删除的记录属于关闭浏览器或注销的用户。我在全局中编写此代码，但它不起作用。有谁能够帮我。注意：我想删除具有注销用户用户名的记录。非常感谢全球代码：

```
 void Session_End(object sender, EventArgs e) 
    {

        string connStr = ConfigurationManager.ConnectionStrings["dbconn"].ConnectionString;
        SqlConnection sqlconn = new SqlConnection(connStr);
        SqlCommand sqlcmd = new SqlCommand("delete ChatRoomList where UserName=@UserName", sqlconn);
        sqlcmd.Parameters.AddWithValue("@UserName", (string)Session["User"]);
        sqlconn.Open();
        sqlcmd.ExecuteNonQuery();
        sqlconn.Close();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:51:55.090

There is no reliable way to achieve this. `Session_End` event would only fire for in-process session state storage and the trigger point would be session expiration which is different than the browser close or user log-out.
So in your case, you may observe the event when your session actually gets timed out (if you have a logout link then you can force session expiry using `Session.Abandon`)

There are some other ways such as making an AJAX call to server to tell that user has logged out (or closing the browser window) and they may provide you with better results but again not 100% reliable. The most reliable way that I can think of is to have your own timer - i.e. to ping the server (using AJAX call) periodically from browser side and when pings are not received within certain time-out value, assume the user session to be dead/ended.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:07:53.023

它可以在 IE 上运行

```
 window.onbeforeunload = function (event) {
    if (((window.event.clientX || event.clientX) < 0) || ((window.event.clientY || event.clientY) < 0)) // close button
    {
        //call here you you jQuery function to delete either page method, web service or http 
    }
    if ((window.event.clientX < 0) || (window.event.clientY < 0)) // close button
    {
        //call here you you jQuery function to delete either page method, web service or http 

    }
    else if (window.event.altKey == true || window.event.ctrlKey == true) // ALT + F4
    {
       //call here you you jQuery function to delete either page method, web service or http handler
    }
    else // for all other unload events
    {

    }

}
}); 
```

# android - MenuItem 没有出现在操作栏上

> ID：14213312
> 
> 赞同：1
> 
> 时间：2013-01-08T10:50:14.423
> 
> 标签：android, menu

我无法让菜单项出现在操作栏上。它们仅出现在菜单上。

```
public boolean onCreateOptionsMenu(Menu menu) {
    menu.add(Menu.NONE, Menu.FIRST, Menu.NONE, "Favorites").setIcon(
            android.R.drawable.btn_star_big_on);
    menu.add(Menu.NONE, Menu.FIRST, Menu.NONE, "Favorites").setIcon(
            android.R.drawable.btn_star_big_on);
    return true;
} 
```

# sql - 主键和聚集索引有什么区别？

> ID：14213314
> 
> 赞同：10
> 
> 时间：2013-01-08T10:50:17.207
> 
> 标签：sql

> **可能重复：**
> [SQL Server 中主键和唯一聚集索引之间的性能差异](https://stackoverflow.com/questions/11546688/performance-difference-between-primary-key-and-unique-clustered-index-in-sql-ser)

我确保我搜索了这个论坛，但之前没有人问过这个问题，我也无法在任何地方找到任何答案。

我的问题是 =“主键和聚集索引有什么区别？”

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-08T11:01:14.910

好吧，对于初学者来说，一个是*key*，另一个是*index*。

在大多数数据库术语中，密钥是以某种方式识别数据的东西，与数据的存储或性能没有明确的关系。*主键*是唯一标识该数据的一段数据。

另一方面，索引是描述访问数据的（更快）方式的东西。它（通常）不关心数据的完整性和意义，它只关心性能和存储。特别是在 SQL Server 中，聚集索引是指示行存储的物理顺序的索引。它所做的事情非常复杂，但一个有用的近似值是行按聚集索引的值排序。这意味着当您不指定 order 子句时，数据很可能会按照聚集索引的值进行排序。

所以，它们是完全不同的东西，有点互补。这就是为什么当您通过设计器创建主键时，SQL Server 会连同它一起抛出一个免费的聚集索引。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-08T11:08:56.367

在你问主键和聚集索引的区别之前，你必须知道键和索引不是一回事。

键可以是主键或外键。每个表只能有一个主键（但可能不止一列）。密钥是一个逻辑事物，它服务于业务逻辑并定义数据的完整性。外键是对另一个表的主键的引用。

索引有助于加快查询速度，因为它会构建对您选择的列的引用。因此，它会创建单独的文件来帮助您使用索引列的查询。

聚集索引是一种特殊的索引，它定义了表的物理顺序（它应该是顺序数据）。

我试图用我自己的话来解释这一点，但是你会通过谷歌搜索找到你需要的所有资源（我绝对建议你阅读很多这个！）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-08T11:18:14.810

**主键**是记录的唯一标识符。它**负责**该字段的唯一值。它只是现有的或专门创建的字段或唯一标识行的字段组。

**聚集索引**是一种通过访问有序记录来**提高数据检索操作速度**的数据结构。索引是表的一部分的副本。它在硬盘上占据额外的物理位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T11:11:11.717

据我所知，在许多 RDBMS 中，当您创建 PK 时，后面的引擎会创建聚集索引。PK 用于`Entity integrity`聚集索引设置数据顺序并用于性能。

# mysql - 如何在mysql中对两个字段和一个值使用like？

> ID：14213317
> 
> 赞同：-1
> 
> 时间：2013-01-08T10:50:28.163
> 
> 标签：mysql, sql-like

我有这样的查询：

```
select * from users where `firstname` like '%jack%' or `lastname` like '%Mr green%' 
```

但是，当我想找到她的名字`jack`和姓氏是`Mr green`或名字是杰克先生并且姓氏是绿色的人时，此代码不适合。
换句话说，我有一个文本框，用户用名字和姓氏填充这个文本框，它们之间有一个空格，我想在用户表中搜索并找到使用搜索器搜索的用户（搜索器是填充文本框的人）。
有没有办法使用`like`两列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:05:27.533

我认为如果名称是值，您可以使用它

```
 (`firstname` like '%value%' or `lastname` like '%value%' or concat(firstname,' ', lastname) LIKE '%value%') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:01:18.117

更改`OR`为`AND`：

```
select * from users
where `firstname` like '%jack%'
AND `lastname` like '%Mr green%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T11:01:24.877

很难确切地说出你在问什么，但我认为你想要的是名字或姓氏匹配（*但不能同时*匹配）。在这种情况下：

```
SELECT 
    * 
FROM 
    `users`
WHERE 
    (
        `firstname` LIKE '%jack%'
        AND
        `lastname` NOT LIKE '%Mr green%'
    )
    OR
    (
        `firstname` NOT LIKE '%jack%'
        AND
        `lastname` LIKE '%Mr green%' 
    ) 
```

# php - 如何获得一行的宽度（多个单元格）？

> ID：14213321
> 
> 赞同：1
> 
> 时间：2013-01-08T10:50:35.357
> 
> 标签：php, phpexcel

我想获得一行的宽度（由几个单元格组成）

我试过这个：

```
$this->objDrawing = new PHPExcel_Worksheet_Drawing();
$this->objDrawing->setCoordinates('A12:I12');
$this->objDrawing->getWidth(); 
```

.. 并且 getWidth() 返回 0，即使在 A12:I12 我在每个单元格中都有内容。

为什么是 getWidth(); 返回 0，当我期望它返回行的总宽度时？那么我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:07:51.450

当您将文件添加到绘图对象时设置宽度，并且基于图像文件的宽度（具有任何比例调整），而不是它占据的列。

**编辑**

用于计算工作表中一系列列的宽度：

```
$defaultColumnWidth = $pSheet->getDefaultColumnDimension()->getWidth(); 
```

除非明确覆盖，否则将为您提供每列的默认宽度；尽管您通常会为此使用 9.10。

然后对于每个单独的 columnDimension，检查定义的宽度以及是否启用了 autosize：

如果启用了自动调整大小，那么您需要根据该列中所有值的内容计算将使用的宽度

使用工作表 calculateColumnWidths() 方法。

这会将 columnDimension 宽度设置为计算值，然后您可以使用该值。

注意隐藏或折叠的列。

# iphone - how to sort an array of date objects in it?

> ID：14213322
> 
> 赞同：-2
> 
> 时间：2013-01-08T10:50:36.133
> 
> 标签：iphone, ios, sorting

> **Possible Duplicate:**
> [Sort NSArray of date strings or objects](https://stackoverflow.com/questions/1132806/sort-nsarray-of-date-strings-or-objects)

I want to sort an array which contain Dates in ascending order

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:12:06.400

这是一种非常通用的方法`NSArray`，可以使用块对任何类型的对象进行排序。现在，它只是被指定为您当前`NSDate`对象问题的解决方案。

```
NSArray *_arrayOfDates = // your array with the NSDate objects;
NSArray *_sortedArrayOfDates = [_arrayOfDates sortedArrayUsingComparator:^NSComparisonResult(id obj1, id obj2) {
    return [((NSDate *) obj1) compare:((NSDate *)obj2)];
}];
NSLog(@"%@", _sortedArrayOfDates); 
```

* * *

*请注意：*您可以使用`NSMutableArray`with`-sortUsingComparator:`方法，它提供相同的结果，但数组将在其内部进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T10:54:11.007

尝试这个：

```
 NSLog(@"livevideoparsingarray..%@",livevideoparsingarray);
            NSSortDescriptor * descLastname = [[NSSortDescriptor alloc] initWithKey:@"active" ascending:YES];
            [livevideoparsingarray sortUsingDescriptors:[NSArray arrayWithObjects:descLastname, nil]];
            [descLastname release];
            videoparsing = [livevideoparsingarray copy]; 
```

livevideoparsingarray 是我的数组，我有排序 & active 是我的标签，它在我有排序的数组中。你随着你的要求而改变。

# php - How to Get Error Details From MySQL Stored Procedure

> ID：14213327
> 
> 赞同：1
> 
> 时间：2013-01-08T10:50:53.473
> 
> 标签：php, mysql, stored-procedures, pdo

I am calling a mysql stored procedure using PDO in PHP

```
try {

    $conn = new PDO("mysql:host=$host_db; dbname=$name_db", $user_db, $pass_db);    
    $stmt = $conn->prepare('CALL sp_user(?,?,@user_id,@product_id)');    
    $stmt->execute(array("user2", "product2"));    
    $stmt->setFetchMode(PDO::FETCH_COLUMN, 0);
    $errors = $stmt->errorInfo();
    if($errors){
        echo $errors[2];
    }else{
        /*Do rest*/
    }

}catch(PDOException $e) {
  echo "Error : ".$e->getMessage();
} 
```

that return below error because the name of the field in insert query was given wrong

```
Unknown column 'name1' in 'field list' 
```

So i want to know if this is possible to get detailed error information something like:-

```
Unknown column 'Tablename.name1' in the 'field list'; 
```

that could tell me what column of which table is Unknown.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:50:33.253

在创建 pdo 连接时，传递错误模式和编码等选项： PDO 系统由 3 个类组成：PDO、PDOStatement 和 PDOException。**PDOException**类是您进行错误处理所需要的。

这是一个例子：

```
try
{
    // use the appropriate values …
    $pdo = new PDO($dsn, $login, $password);
    // any occurring errors wil be thrown as PDOException
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $ps = $pdo->prepare("SELECT `name` FROM `fruits` WHERE `type` = ?");
    $ps->bindValue(1, $_GET['type']);
    $ps->execute();
    $ps->setFetchMode(PDO::FETCH_COLUMN, 0);
    $text = "";
    foreach ($ps as $row)
    {
         $text .= $row . "<br>";
    }
    // a function or method would use a return instead
    echo $text;
} catch (Exception $e) {
    // apologise
    echo '<p class="error">Oops, we have encountered a problem, but we will deal with it. Promised.</p>';
    // notify admin
    send_error_mail($e->getMessage());
}
// any code that follows here will be executed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-02T05:33:30.027

我发现这对我很有帮助。“error_log”打印到 php 错误日志，但您可以用任何您想显示错误的方式替换。

```
} catch (PDOException $ex){
    error_log("MYSQL_ERROR"); //This reminds me what kind of error this actually is
    error_log($ex->getTraceAsString()); // will show the php file line (and parameter 
                                        // values) so you can figure out which
                                        // query/values caused it
    error_log($ex->getMessage());  // will show the actual MYSQL query error 
                                   // e.g. constraint issue
} 
```

ps 我知道这有点晚了，但也许它可以帮助某人。

# javascript - Kendo-Knockout：可观察的小部件未填充实际的小部件

> ID：14213330
> 
> 赞同：0
> 
> 时间：2013-01-08T10:51:01.080
> 
> 标签：javascript, knockout.js, kendo-ui

我正在使用 RPNiemeyer 的 kendo-knockout 库。我有一个剑道窗口：

HTML：

```
<div data-bind="kendoWindow: {isOpen: isOpen, title:'Language', width: 400, height: 200, modal: true, widget: popUpWindow }" > 
```

居中窗口的 JavaScript 部分：

```
this.popUpWindow = ko.observable();
    self.isOpen.subscribe(function (newValue) {
        if (newValue) {
            self.popUpWindow().center();
        }
    }); 
```

我正在使用上一个问题中的源代码作为我的小提琴：

[Kendo-Knockout：窗口没有正确关闭](https://stackoverflow.com/questions/14020493/kendo-knockout-window-does-not-close-correctly)

我正在按照此处显示的步骤操作：

[Kendo-Knockout：如何使窗口居中](https://stackoverflow.com/questions/13891681/kendo-knockout-how-to-center-window)

我正在定义可观察的小部件，但是当我想使用它时，它并没有填充实际的小部件。

小提琴：http: [//jsfiddle.net/dcYRM/15/](http://jsfiddle.net/dcYRM/15/)

任何有关工作示例的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T14:48:31.163

看起来有几个问题：

首先，您的`isOpen`订阅在小部件被填充之前正在运行。

其次，在填充小部件后，它会导致数据源被刷新，并试图序列化包括小部件在内的模型，这会导致问题。这最终是因为 Knockout-Kendo 在解包传递给网格的数据方面有点过于激进。

我看到了两种非常简单的方法来解决这个问题。`open`最简单的方法是为小部件的事件和呼叫中心设置一个全局处理程序。

将此与上一个问题中的事件放在一起`close`看起来像：

```
 ko.bindingHandlers.kendoWindow.options = {
    close: function() {
      $('.k-window, .k-overlay').remove();
    },
    open: function(event) {
       event.sender.center();
    }
  }; 
```

现在，无论何时打开任何窗口，它都会居中，您根本不需要弄乱小部件。示例：http: [//jsfiddle.net/rniemeyer/F4JGG/](http://jsfiddle.net/rniemeyer/F4JGG/)

这看起来是最好的选择。要使其与对小部件本身的引用一起使用，您需要解决库中的问题。如上所述，它有点过于激进并且展开选项，并且似乎这会在初始化小部件、传递小部件参数并且已经填充有小部件时导致问题。当我有机会时，我应该能够在图书馆解决它。

否则，您将不得不这样做：

```
self.popUpWindow = ko.observable();
self.popUpWindow.subscribe(function (widget) {
  if (widget) {
    widget.center();
    self.popUpWindow(null); //hack - Knockout-Kendo should handle this one
  }
}); 
```

因此，请在调用后清除 observable `center`。这是一个示例：http: [//jsfiddle.net/rniemeyer/PVMjy/](http://jsfiddle.net/rniemeyer/PVMjy/)。我还订阅了小部件的 observable 本身，因此没有`isOpen`上面提到的时间问题。

在这种情况下，设置全局`open`处理程序似乎是最干净和最好的选择。

# ios - Navigation Bar Higher like Safari App

> ID：14213331
> 
> 赞同：0
> 
> 时间：2013-01-08T10:51:03.590
> 
> 标签：ios, xcode, safari, uinavigationbar

I was wondering if there is a way to create a navigationBar like the one in this photo: [http://s2.postimage.org/ewem26czd/foto.jpg](http://s2.postimage.org/ewem26czd/foto.jpg)

and there is a way to customize its background?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:59:12.633

自定义 UINavigationBar 相当容易。只需创建它的子类，然后在找到 UINavigationController 的 XIB 中，使用右侧的检查器将导航控制器导航栏的类更改为您的子类。

# iphone - touchesBegan - Only needs the last touch action - iPhone

> ID：14213332
> 
> 赞同：0
> 
> 时间：2013-01-08T10:51:04.503
> 
> 标签：iphone, ios, touch

In

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
```

method I am doing some actions and in

```
- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
```

method I'm doing some other action.

If I'm tapping 3 times the touchesBegan will call 3 times. What I want is if the user continuously taps only the last touch action should perform. Is it possible or not?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:56:24.230

您可以尝试`UITapGestureRecognizer`改为，并在第一次点击后禁用它。

否则，您可以使用in和in`performSelector:withObject:afterDelay:`的短暂延迟。`touchesEnded:withEvent:``cancelPreviousPerformRequestsWithTarget:selector:object:``touchesBegan:withEvent:`

那有意义吗？

# python - get latest objects django

> ID：14213333
> 
> 赞同：2
> 
> 时间：2013-01-08T10:51:08.593
> 
> 标签：python, django, sqlite, distinct

I think many similar questions have already been asked, but I could not make up a copy-paste solution. So here is the problem:

I periodically compute analysis on my user data for reporting. I made up a model to store these computations in my `sqlite` database.

```
class report_data(models.Model):
    name = models.TextField()
    matrix = PickledObjectField()
    creation_date = models.DateTimeField('date of creation') 
```

I am using an append only scheme, to persist historical data, so there are many records in database, that have

*   same name
*   different matrix
*   different creation date

My report view now needs **a set, which contains that records with most recent creation date and unique names**. Unfortunately `sqlite` does not support `DISTINCT ON` and the solution I found [here](https://stackoverflow.com/questions/3038575/distinct-clause-in-sqlite), does not make sure, that it is always the most recent matrix, does it?

```
report_data.objects.all().distinct() 
```

Does not work either, because, these records are all distinct by there key. As well as

```
report_data.objects.all().latest("creation_date") 
```

does not work, because it does only return the one most recent element without taking into account the `name` column.

I am quite a beginner in django, in SQL I would try something like

```
SELECT max(date),name,matrix FROM report_data group by name 
```

but I have not tested this.

EDIT:

By support of the comment discussion I made up some kind of solution, which looks like this:

```
a = report_data.objects.values('name').annotate(latest=Max('creation_date')) 
```

Then, I got all the right creation dates, but how to get the annotated objects?

EDIT2:

Now I use a ReportManager, that looks like this:

```
class ReportManager(models.Manager):
    def recent(self):
        a = report_data.objects.values("name").annotate(latest_id=Max('id'))
        a = list(v['latest_id'] for v in a)
        return report_data.objects.filter(id__in=a).order_by('-creation_date') 
```

But I am not quite happy with this solution. Thanks for posting a **real** solution!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:56:56.523

你在找[麦克斯](https://docs.djangoproject.com/en/dev/topics/db/aggregation/)吗？

```
from django.db.models import Max # also available: Q, Count, Min, Sum, Avg, StdDev, Variance, ...
report_data.objects.all().aggregate(Max('creation_date')) 
```

# arrays - 数组相等检查方法

> ID：14213337
> 
> 赞同：0
> 
> 时间：2013-01-08T10:51:15.613
> 
> 标签：arrays, loops, if-statement, for-loop, return

我有一种方法可以检查两个数组是否相等。

```
private bool CheckArray(int[] ilk_dizi, int[] son_dizi)
{
    for (int i = 0; i < 5; i++)
    {
        if (ilk_dizi[i]==son_dizi[i])
        {
            if (i==4)
            {
                return true;
            }
            else
            {
                continue;
            }
        }
        else
        {
            return false;
        }
    }
} 
```

但我有一个“并非所有代码都返回值”错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:59:54.020

你有一个“不返回”的可能性 使用 continue 时要小心，很多时候它不是真的必要。

尝试如下优化您的代码

```
private bool CheckArray(int[] ilk_dizi, int[] son_dizi)
{
   for (int i = 0; i < 5; i++)
   {
       if (ilk_dizi[i]!=son_dizi[i])
       {
           return false;
       }
   }

   return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:00:48.770

您`continue`在其中一个`else`块内 - 静态分析器无法推断传入的数组长度为 5 并且`i=4`最终会达到。

想象一下，你传递了两个大小为 2 的相等数组——然后你会点击`continue`两次并退出`for`循环——然后会返回什么？因此发出警告。

要么放在`return true;`方法主体的末尾，要么修改你的算法。

# javascript - 函数执行后加载表

> ID：14213339
> 
> 赞同：-2
> 
> 时间：2013-01-08T10:51:24.210
> 
> 标签：javascript, jquery, html

我需要隐藏下表 onLoad 页面并在函数`fnValidatefields()`完全执行后立即显示它。请提出一些建议。

```
<input type='button' name='button' value='Find' onclick="fnValidatefields()">
<table><tr><td></td><tr></table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:52:29.170

为表格添加样式`display: none;`，并在函数执行成功后进行更改。

```
<input type='button' name='button' value='Find' onclick="fnValidatefields()">
<table style="display: none;" id="table1"><tr><td></td><tr></table>

fnValidatefields() {
    //ur code...
    document.getElementById("table1").style.display = "";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T10:54:25.263

试试这个：

```
<input type='button' name='button' value='Find' onclick="fnValidatefields()">
<table style="display:none;" id="tbl"><tr><td></td><tr></table> 
```

在脚本文件中使用如下：

```
function fnValidatefields()
{
   //code...

   $("#tbl").show();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:53:19.313

最标准和最方便的方法是最初通过*样式表定义**隐藏*表格，例如

 *```
.yourTableClass {
    display: none;
} 
```

在您的`fnValidatefields`功能中，您重置该值。

```
function fnValidatefields() {
    // ...
    $('.yourTableClass').show();
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-08T10:54:26.260

首先隐藏你的桌子：

```
$('table.hideTable').hide(); 
```

在您的 fnValidatefields() 中，您可以使用

```
$('table.hideTable').show(); // Shows the table again 
```*

# java - 在超类构造函数中将“this”转换为子类

> ID：14213340
> 
> 赞同：2
> 
> 时间：2013-01-08T10:51:25.503
> 
> 标签：java, android, constructor, downcast

有两个类：`A`和`B`。`B`是 的子类`A`。`A`存储 的引用，*在某些情况下*`B`也可能是对的引用。*`this`*

 *```
public B b; 
```

在 的构造函数中，将引用转换为(*前提*是我知道正在构造的对象的具体类型是)`A`是否合法？（语法上，我知道；设计方面，它可能反映了糟糕的组件设计；但我想知道它是否有任何严重的风险，因此是不可接受的。）`this``B`*`B`*

 *```
public A(...parameters) {
    b = (B) this;
} 
```

问题出现了，因为此时， 的构造函数`B`尚未完成（因为 this 恰好在`B`调用时运行`super`）。

我知道`b`在其构造函数完成之前访问意味着我正在访问（语义上）未初始化的成员（所以我从不这样做），但这就是全部吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:56:33.663

**-**如果有任何**其他类也扩展到 A**，那么问题就会出现，那么它可能会**默认转换为 B 类。**

**-**我建议你用`instanceof`它来解决这个问题......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:50:07.593

除了良好的面向对象设计之外，这个星座不违反任何其他规则。Java 已为这种情况做好了准备，因为 B 的所有字段甚至在调用任何构造函数之前都已初始化，如以下示例所示：

```
public class A {

    int aMember;

    public static final void main(String[] args) {
        new B();
    }

    A() {
        B b = (B) this;

        System.out.println("in A(), before b.bMember    has been set here, b.bMember    = " + b.bMember);
        System.out.println("in A(), before this.aMember has been set here, this.aMember = " + this.aMember);

        this.aMember = 5;
        b.bMember = 1; // will be overwritten in B()

        System.out.println("in A(), after  b.bMember    has been set here, b.bMember    = " + b.bMember);
        System.out.println("in A(), after  this.aMember has been set here, this.aMember = " + this.aMember);
    }
} 
```

--

```
public class B extends A {

    int bMember;

    B() {
        super(); // invokes A()

        System.out.println("in B(), before this.bMember has been set here, this.bMember = " + this.bMember);

        this.bMember = 6;

        System.out.println("in B(), after  this.bMember has been set here, this.bMember = " + this.bMember);
    }
} 
```

这输出：

```
in A(), before b.bMember    has been set here, b.bMember    = 0
in A(), before this.aMember has been set here, this.aMember = 0
in A(), after  b.bMember    has been set here, b.bMember    = 1
in A(), after  this.aMember has been set here, this.aMember = 5
in B(), before this.bMember has been set here, this.bMember = 1
in B(), after  this.bMember has been set here, this.bMember = 6 
```

这意味着在 A() 中，B 的成员变量在设置之前与 A 的成员变量处于相同的状态。两者都已初始化为其默认值（0 表示 int，false 表示布尔值，null 表示对象，...）并且可以使用。一个很大的坑是B的成员变量可以在A()中设置，但是可以被B自己的构造函数覆盖，这很违反直觉。

我喜欢这个问题，因为它表达得简单明了，但它提出了更复杂的问题，这些问题涉及到其他主题，如编译器内部和对象创建的细节。**

# php - Error when do multiple query in php

> ID：14213341
> 
> 赞同：-1
> 
> 时间：2013-01-08T10:51:27.110
> 
> 标签：php, mysql

Hi I was doing some query in php file

```
 <?php 
    include_once('Query.Class.php');
    @session_start();
    $idPlayer = $_SESSION['ID_PLAYER'];
    $obj = new Query();
    $playerData = $obj->getPlayerData($idPlayer);

    ?>
<?php 
        echo "<a href=profile.php?id=".$playerData['ID_PLAYER'].">".$playerData['USERNAME']."</a>";?></h1>
<?php 
        $playerMoney = $obj->getPlayerMoney($idPlayer);
        for($i = 1; $i <= count($playerMoney); $i++){
        echo"
            <tr>
              <td width='20' align='left'>".$playerMoney[$i]['CURENCY_NAME']."</td>
              <td width='10'>:</td>
              <td width='70' align='left'>".$playerMoney[$i]['CURENCY_AMMOUNT']."</td>
            </tr>";
        }
          ?>
<?php
        $playerInventory = $obj->getPlayerInventory($idPlayer);
        for($i = 1; $i <= count($playerInventory); $i++){
        echo"
            <tr>
              <td width='20' align='left'>".$playerInventory[$i]['ITEMS_NAME']."</td>
              <td width='10'>:</td>
              <td width='70' align='left'>".$playerInventory[$i]['QUANTITY']."</td>
            </tr>";
        } 
```

this is Query.php

```
<?php
include_once('Connection.Class.php');

class Query{
    private $connection;
    public function Query(){
        $this->connection = new Connection();
    }
    public function executeQuery($str){
        $this->connection->connect();
        $result = mysql_query($str);
        if(!$result){
            $this->connection->disconnect();
            return false;
        }
        else{
            $this->connection->disconnect();
            return $result;
        }
    }
    public function newExecuteQuery($str){
        $this->connection->connect();
        $result = mysql_query($str);
        if($result){
            $this->connection->disconnect();
            return $result;
        }
        else{
            $this->connection->disconnect();
            return false;
        }
    }
    public function login($username,$password,$ip_adreess){
        $username = addslashes($username);
        $md5Password = md5($password);
        $str = "CALL sp_login('$username','$md5Password','$ip_adreess')";
        $result = $this->executeQuery($str);
        if(mysql_num_rows($result)>0){
            $row_array = mysql_fetch_array($result);
            return $row_array;
        }
        else{
            return false;
        }
    }
    public function getIDPlayer($username,$password){
        $username = addslashes($username);
        $md5Password = md5($password);
        $str = "CALL sp_getPlayerData('$username','$md5Password')";
        $result = $this->executeQuery($str);
        if(mysql_num_rows($result)>0){
            $row_array = mysql_fetch_array($result);
            return $row_array;
        }
        else{
            return false;
        }
    }
    public function getPlayerData($idPlayer){
        $str="SELECT * FROM player where ID_PLAYER = '$idPlayer'";
        $result = $this->executeQuery($str);
        if(mysql_num_rows($result)>0){
            $row_array = mysql_fetch_array($result);
            return $row_array;
        }
        else {
            return false;
        }
    }
    public function getPlayerMoney($idPlayer){
        $str="CALL sp_getPlayerMoney($idPlayer)";
        $i =1;
        $result_array = array();
        $result = $this->executeQuery($str);
        while($row = mysql_fetch_array($result)){
            $result_array[$i]['CURENCY_ID']=$row['CURENCY_ID'];
            $result_array[$i]['CURENCY_AMMOUNT']=$row['CURENCY_AMMOUNT'];
            $result_array[$i]['CURENCY_NAME'] = $row['CURENCY_NAME']; 
            $i++;
        }
        return $result_array;
    }
    public function getPlayerInventory($idPlayer){
        $str="CALL sp_getPlayerInventory($idPlayer)";
        $i =1;
        $result_array = array();
        $result = $this->executeQuery($str);
        while($row = mysql_fetch_array($result)){
            $result_array[$i]['ITEMS_NAME']=$row['ITEMS_NAME'];
            $result_array[$i]['ITEMS_ID']=$row['ITEMS_ID'];
            $result_array[$i]['QUANTITY'] = $row['QUANTITY']; 
            $i++;
        }
        return $result_array;
    }

}
?> 
```

I got below Error:

```
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in C:\xampp\htdocs\City\index\Query.Class.php on line 88
in invectory section. but when i delete query for money, query for inventory will return true 
```

any help ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:00:21.513

您的金钱 sql 查询返回 FALSE，因此最好在运行之前执行此操作`mysql_fetch_array`，以便您知道您没有任何结果：

```
if($result === FALSE) {
    die(mysql_error());
} 
```

喜欢：

```
public function getPlayerMoney($idPlayer){
 $str="CALL sp_getPlayerMoney($idPlayer)";
 $i =1;
 $result_array = array();
 $result = $this->executeQuery($str);
 if($result === FALSE) {
   die(mysql_error());
   //OR return empty array
   return array(); //empty array
 }        
 while($row = mysql_fetch_array($result)){
 ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:05:45.460

正如@Sudhir 所说，您的查询返回 FALSE。最常见的错误处理如下所示：

```
$result = mysql_query($str) or die(mysql_error()); 
```

# jquery - Codeigniter jquery search tutorial

> ID：14213342
> 
> 赞同：-1
> 
> 时间：2013-01-08T10:51:38.313
> 
> 标签：jquery, codeigniter, search

Can you guys suggest me a good codeigniter search tutorial having functionalities like [http://myfav.es/settings/sites/#/all-sites/](http://myfav.es/settings/sites/#/all-sites/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:54:00.657

您可以使用像[datatables](http://www.datatables.net/)这样的 jquery 插件，它有一个[过滤](http://www.datatables.net/plug-ins/filtering)插件（按表或每列）。

[这里的例子。](http://www.datatables.net/examples/plug-ins/range_filtering.html)

# javascript - Node.Js 中 optimist 模块有什么用

> ID：14213345
> 
> 赞同：-1
> 
> 时间：2013-01-08T10:51:45.473
> 
> 标签：javascript, node.js, command-line-arguments

[https://github.com/substack/node-optimist](https://github.com/substack/node-optimist)

> Optimist 是一个 node.js 库，用于为讨厌选项解析的人提供选项解析。更具体地说，此模块适用于喜欢所有程序使用的 --bells 和 -whistlz 但认为 optstrings 浪费时间的人。

```
var argv = require('optimist').argv;

if (argv.rif - 5 * argv.xup > 7.138) {
  console.log('Buy more riffiwobbles');
}
else {
  console.log('Sell the xupptumblers');
} 
```

1.  在这段代码中，is`rif`和`xup`are 两个参数。
2.  是否像将命令行参数传递给您的脚本，而不是在脚本本身中这样做。
3.  这个模块的主要目的是什么，任何用其他语言构建的实时示例都可能会有所帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T10:58:06.050

这是一种访问命令行参数的快捷方式，无需在实际使用它们之前在代码中定义它们。示例的第二部分（您在问题中省略了）实际上回答了您的第一个问题：

```
$ ./xup.js --rif=55 --xup=9.52
Buy more riffiwobbles

$ ./xup.js --rif 12 --xup 8.1
Sell the xupptumblers 
```

所以这些论点最终出现在`argv.rif`and中`argv.xup`。

# jquery - How to integrate with hoverIntent?

> ID：14213351
> 
> 赞同：1
> 
> 时间：2013-01-08T10:52:08.310
> 
> 标签：jquery, drop-down-menu, menu, hoverintent

a newbie here. i have a menu, which using a jQuery slide effect. I want to integrate with hoverIntent. I try to include the file, but still didnt work. Can you guys help me? :)

```
<ul id="nav">
    <li><a href="1.html" id="CorporateMenu">Corporate Profile</a>

        <ul>
            <li><a href="#">Vision &amp; Mission</a>
            </li>
            <li><a href="#">Board of Director</a>
            </li>
            <li><a href="#">Senior Management</a>
            </li>
            <li><a href="#">Group Companies</a>
            </li>
        </ul>
    </li>
    <li><a href="index.html" id="HomeMenu">Home</a>
    </li>
</ul>
<!-- menu dropdown animated -->
<script type="text/javascript">
    $(document).ready(function() {
        $('#nav li').hover(function() {
            $('ul', this).slideDown(250);
            $(this).children('a:first').addClass("hov");
        }, function() {
            $('ul', this).slideUp(150);
            $(this).children('a:first').removeClass("hov");
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T13:05:35.550

听起来您正在使用 hoverIntent 插件。如果这是真的使用 .hoverIntent 而不是 .hover 作为事件。

小提琴：http: [//jsfiddle.net/HbjuW/](http://jsfiddle.net/HbjuW/)

```
$(document).ready(function() {   
  $('#nav li').has('ul').hoverIntent({
    over: function() {
      $('ul', this).slideDown(250);
      $(this).children('a:first').addClass("hov");
    },
    timeout: 500,
    out: function() {
      $('ul', this).slideUp(150);
      $(this).children('a:first').removeClass("hov");
    }
  });
}); 
```

# php - 清理要在引号内和 URL 内使用的数据

> ID：14213352
> 
> 赞同：3
> 
> 时间：2013-01-08T10:52:21.740
> 
> 标签：php, javascript, encoding, sanitization

如果我想在 Javascript 中的单引号之间放置一个值，我该如何对其进行清理/编码，以便值中的任何引号都不会引起问题？

然后我还想在查询字符串中使用这个值，然后将其传递给 PHP。

无论使用什么，我都需要能够使用 PHP 将其解码回正常值。

**例子：**

```
$foo = "Hey, what's up!?"; // PHP

getGrades('<?=$foo?>'); // JS Function

function getGrades(var) {

        // Set file to get results from..
        var loadUrl = "ajax_files/get_grades.php";

        // Set data string
        var dataString = 'grade=' + var;

        // Run the AJAX request
        runAjax(loadUrl, dataString);          

}

function runAjax(loadUrl, dataString) {

    jQuery.ajax({
        type: 'GET',
        url: loadUrl,
        data: dataString,
        dataType: 'html',
        error: ajaxError,
        success: function(response) {
            someFunction(response);
        }
    });    

}

// get_grades.php file

$grade = $_GET['grade']; // We now want this value to be it's normal value of "Hey, what's up!?"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:55:49.483

如果您使用单引号字符串连接，那将不是问题。剩下的就是当你在查询字符串中使用它时。在这种情况下，您应该使用[encodeURIComponent](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)。

也改变你`var`的东西。`var`是 JavaScript 中的关键字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:06:05.117

> `getGrades('<?=$foo?>'); // JS Function`

`json_encode`将使字符串 JavaScript 安全（并引用它）。

```
getGrades(<?php echo json_encode($foo); ?>); 
```

* * *

> 然后我还想在查询字符串中使用这个值，然后将其传递给 PHP。

传递`data:`一个*对象*，而不是一个字符串。jQuery 将为您处理转义。

```
var dataString = { grade: var }; // Rename the variable too 
```

# blackberry - 保存网页黑莓的资源

> ID：14213356
> 
> 赞同：-1
> 
> 时间：2013-01-08T10:52:33.247
> 
> 标签：blackberry, web

如何从 url 保存网页的所有资源？我的意思是保存 HTML 并自动存储所有相关文件（图像、CSS 文件、js 文件等）而不在浏览器字段上显示页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:29:22.710

如果您使用的是 Java SDK，则打开该文件的 InputStream 实例，读取该文件，解析其内容，为该文件内的资源打开新流并将所有文件保存在设备内存/micro sd 卡上。

我更喜欢 micro SD 卡作为文件目的地。因为内部设备内存的可用容量对于设备操作系统至关重要。并且它的短缺导致设备故障。

# firebug - 为什么使用typeof时firebug和chrome的控制台会产生不同的结果？

> ID：14213358
> 
> 赞同：2
> 
> 时间：2013-01-08T10:52:41.967
> 
> 标签：firebug

使用 firebug 和 google chrome 的 web 控制台测试 typeof 会显示不同的结果。

萤火虫：

```
console.log(typeof Node); //object
console.log(typeof HTMLDivElement); //object 
```

Chrome 的控制台

```
console.log(typeof Node); //function
console.log(typeof HTMLDivElement); //function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:15:05.353

这与开发工具无关；只是 Firefox 没有完全遵循规范。这在最近的版本中发生了变化，这两个版本都应该与 Firefox 19 中的 Chrome 匹配。[[1]](https://bugzilla.mozilla.org/show_bug.cgi?id=773780) [[2]](https://bugzilla.mozilla.org/show_bug.cgi?id=807075)

# javascript - 如何通过 JavaScript 以编程方式在 iPhone 上的 Mobile Safari 中显示地址栏？

> ID：14213364
> 
> 赞同：1
> 
> 时间：2013-01-08T10:53:15.653
> 
> 标签：javascript, iphone, ios, iscroll, address-bar

如果您通过移动 Safari 查看网站并向上滚动到最顶部，它将显示地址栏。

在我的网站上，我必须使用到目前为止运行良好的 iScroll，但是当我向上滚动时，它不会显示地址栏，因为 iScroll 仅在`<div>`不使用浏览器的本机滚动行为的情况下伪造在自己的元素内滚动。

对于用户来说，这是一个可用性噩梦，因为显示地址栏的唯一方法是点击 iPhone 屏幕顶部的细黑条，我注意到有些用户不知道这一点。

所以，我想，也许有一种方法可以在用户滚动到 iScroll 容器的最顶部时以编程方式显示地址栏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:35:09.610

对于 iOS 版本 5+，我发现此解决方案只需替换 iScroll：[http ://damien.antipa.at/2012/10/16/ios-pull-to-refresh-in-mobile-safari-with-native-scrolling/](http://damien.antipa.at/2012/10/16/ios-pull-to-refresh-in-mobile-safari-with-native-scrolling/)

基本思想是使用：

```
<div class="scrollable">
 Foo
</div>

.scrollable{
 overflow-y:auto;
 -webkit-overflow-scrolling:touch;
 -webkit-transform:translateZ(0);
} 
```

这可以解决问题。对于较旧的 iOS 版本（4 及更低版本），这个问题没有解决方案（至少我找不到任何解决方案）。

# wso2 - 限制不适用于 WSO2 ESB 4.0.3 中的域类型

> ID：14213379
> 
> 赞同：1
> 
> 时间：2013-01-08T10:53:48.067
> 
> 标签：wso2, esb, wso2esb

当我尝试在 WSO2 ESB 4.0.3 中为服务 ECHO 配置域类型的限制时。我试图通过命令行将肥皂消息从客户端发送到服务器：

curl --data-binary @soaptest.xml -H 'Content-Type: text/xml;charset=UTF-8' "http://dc2nix2d11:8282/services/echo"

但是，尽管我为客户端机器的域设置了访问拒绝，但我仍然得到了结果。我尝试使用 IP 类型进行相同的配置节流，并且可以正常工作。

也许 Throttling 不适用于 WSO2 ESB 4.0.3 中的域类型？

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:48:35.713

If you are using service hosting feature on WSO2 ESB you could alternatively use recently released WSO2 AS 5.1.0 which support for domain based throttling to host your services till the next ESB version get released.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:36:27.350

这是一个已知问题。它已在下一个 ESB 版本中修复

# seo - ExpressionEngine 分页：访问最后一段

> ID：14213380
> 
> 赞同：0
> 
> 时间：2013-01-08T10:53:49.473
> 
> 标签：seo, pagination, expressionengine

我正在为我的表达式引擎网站进行一些搜索引擎优化。我需要在我的脑海中添加一些链接标签，以允许谷歌爬虫确认我博客中分页页面之间的关系。

我需要补充：

```
<link rel="next" href="http://www.mysite.com/news/latest-news/P10" /> 
```

到第一个新闻页面，然后：

```
<link rel="prev" href="http://www.mysite.com/news/latest-news/" />
<link rel="next" href="http://www.mysite.com/news/latest-news/P20" /> 
```

到下一页，还有一些一直到我要添加的最后一页

```
<link rel="prev" href="http://www.mysite.com/news/latest-news/PXX" /> 
```

我一直在尝试通过使用以下代码来实现这一点：

第一个新闻页面：

```
{if last_segment == "latest-news"}
        <link rel="next" href="http://www.6dg.co.uk/news/latest-news/P10" />
    {/if} 
```

这很好用，但是对于后续页面，我已经尝试过了，这不起作用，因为 PX 不能作为 url 段访问。

```
{if last_segment == "P10"}
        <link rel="prev" href="http://www.6dg.co.uk/news/latest-news" />
        <link rel="next" href="http://www.6dg.co.uk/news/latest-news/P20" />
    {/if} 
```

{last_segment} 返回最新消息。

有谁知道我该如何解决这个问题？

我对这种方法还有另一个问题。目前我只有 3 个分页页面，但是随着更多条目的添加，这会增加，所以我不知道要定位什么段值来添加我的最终链接标签。

任何帮助将不胜感激。

我正在使用表达式引擎版本 2.2.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:43:56.917

这实际上是一个非常棘手的问题。在 EE 中没有本地方法可以完成此操作，因此您必须编写自定义插件才能正确执行此操作。

您可能想要删除它，而是将其发布到新的[ExpressionEngine StackExchange](http://expressionengine.stackexchange.com)上，在那里您将有更多的能力关注它。

# vim - 重新加载 Vim 高亮设置和配色方案

> ID：14213381
> 
> 赞同：2
> 
> 时间：2013-01-08T10:53:50.377
> 
> 标签：vim

如果我更改 Vim 的`highlight`设置，如何“重新加载”它以使配色方案生效？

所以，在我的情况下，我删除`highlight`的光标行号

```
se hl-=N:CursorLineNr 
```

`highlight`从改变

> highlight=8:SpecialKey,@:NonText,d:Directory,e:ErrorMsg,i:IncSearch,l:Search,m:Mor eMsg,M:ModeMsg,n:LineNr, **N:CursorLineNr** ,r:Question,s:StatusLine ,S:StatusLineNC,c:Vert Split,t:Title,v:Visual,V:VisualNOS,w:WarningMsg,W:WildMenu,f:Folded,F:FoldColumn,A:D iffAdd,C:DiffChange,D:DiffDelete ,T:DiffText,>:SignColumn,-:Conceal,B:SpellBad,P:Spel lCap,R:SpellRare,L:SpellLocal,+:Pmenu,=:PmenuSel,x:PmenuSbar,X:PmenuThumb,*:TabLine, #:TabLineSel,_:TabLineFill,!:CursorColumn,.:CursorLine,o:ColorColumn

至

> highlight=8:SpecialKey,@:NonText,d:Directory,e:ErrorMsg,i:IncSearch,l:Search,m:Mor eMsg,M:ModeMsg,n:LineNr,r:Question,s:StatusLine,S:StatusLineNC ,c:VertSplit,t:Title,v:Visual,V:VisualNOS,w:WarningMsg,W:WildMenu,f:Folded,F:FoldColumn,A:DiffAdd,C:DiffChange,D:DiffDelete,T:DiffText, >:SignColumn,-:Conceal,B:SpellBad,P:SpellCap,R:SpellRar e,L:SpellLocal,+:Pmenu,=:PmenuSel,x:PmenuSbar,X:PmenuThumb,*:TabLine,#:T​​abLineSel,_ : TabLineFill,!:CursorColumn,.:CursorLine,o:ColorColumn

*（我已经强调了变化。）*

但是光标行号还是“高亮”的！

更改`highlight`不会更新颜色方案 - 那么我如何“强制”更新？我尝试将语法着色设置为关闭然后再次打开并更改颜色方案无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T11:47:48.420

如果要重置/清除突出显示组，可以使用`:hi`cmd。

在您的情况下，请尝试：

```
:hi CursorLineNr NONE   #this will disable the hl setting for the given group

:hi clear CursorLineNr  #this will set the given group's highlight setting to default. 
```

`:h hi`查看详细信息

如果你想重新加载你的配色方案，你可以`:color xxx`

希望能帮助到你

# xmpp - Ejabberd - Exauth 身份验证有效，但用户在 pidgin 中彼此显示未授权

> ID：14213383
> 
> 赞同：0
> 
> 时间：2013-01-08T10:53:53.040
> 
> 标签：xmpp, ejabberd

我安装了 Ejabberd 服务器并为 php 脚本配置了 ExAuth。我正在检查与 ubuntu 和 windows xp（在 virtualbox 中）上的 pidgin 聊天客户端的聊天。我可以通过 ExAuth（我的 mysql 数据库中列出的用户）在不同用户的 ubuntu 和 windows 中登录。但是，他们无法互相聊天，因为彼此的状态显示为未授权。

早期我检查了内部 auth_method。我通过 web admin 添加了两个用户，然后在 windows 和 linux 机器上登录。当我添加好友时，请求转到其他用户，在其他用户请求批准后，聊天工作。但是在 ExAuth 中，即使在发送请求之后，其他用户也没有收到任何请求。

如果有人知道问题区域在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T20:31:05.563

I think you are confusing authentication (allowing to open an XMPP session on the server) and presence subscription as defined in the roster (you should still be able to chat presence subscription is Independant from messaging).

# performance - 在 oracle 中计算会话“总等待时间”的正确方法

> ID：14213389
> 
> 赞同：0
> 
> 时间：2013-01-08T10:54:10.907
> 
> 标签：performance, oracle, session, wait

**我需要找出会话处于活动状态时等待的总时间。**

为此，我使用了如下查询...

```
SELECT (SUM (wait_time + time_waited) / 1000000)
  FROM v$active_session_history
 WHERE session_id = 614 
```

但是，我觉得我没有得到我想要的使用这个查询。就像，当我第一次运行这个查询时，我得到了 145.980962，@第二次=145.953926，@第三次我得到了 127.706429。

理想情况下，时间应该相同或增加。但是，如您所见，返回的值每次都在减少。

请纠正我做错的地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T11:59:35.180

它不包含整个历史，`v$active_session_history`“忘记”旧行。将其视为一圈缓冲区。写入所有缓冲区后，它会从第一个缓冲区重新启动。
要获取某个会话的事件，请查看`v$session_event`.
要获取活动会话的当前（活动）事件：（`v$session_wait`在最近的 Oracle 版本中，您也可以在 中找到此信息`v$session`）
**注意：** v$session_event 视图不会显示 CPU 时间（这不是事件，但可以在 中看到`v$active_session_history`）。例如，`v$sesstat`如果需要，您可以添加它...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:30:19.760

你的大器是你没有理解的性质`v$active_session_history`：它是一个*样本*而不是一个日志。也就是说，ASH 中的每条记录都是一个时间点，并不回溯到以前的记录。

别担心，这是一个常见的错误。

这是`WAIT_T`IME 的一个特殊问题。这是等待特定事件发生的总时间。因此，如果等待事件跨越两个样本，则第一个记录中的`WAIT_TIME`值为 1（一秒），下一个样本中的值为 2（两秒）。但是，a`SUM(WAIT_TIME)`总共会产生*3*，这太多了。当然，这是一个算术进程，所以如果等待事件延伸到十个样本（十秒），`SUM(WAIT_TIME)`那么总共会产生 55 个样本。

基本上，`WAIT_TIME`是一个标志 - 如果它是 0，则会话在 CPU 上，如果它大于零，它正在等待。

`TIME_WAITED`仅在事件停止等待时填充。所以 a `SUM(TIME_WAITED`) 不会给出夸大的值。事实上恰恰相反：它只会为采样时间正在进行的等待事件填充。因此，在该 SUM 中不会出现的样本间隙之间可能会有很多等待。

这就是为什么 ASH 适合突出重大性能问题而不适合识别背景问题的原因。

那么为什么每次运行查询时总时间都不会增加呢？因为 ASH 是一个循环缓冲区。较旧的记录会老化，以便为新样本让路。AWR 将一定百分比的 ASH 记录存储在磁盘上；它们可以通过`DBA_HIST_ACTIVE_SESSION_HIST`（默认为十分之一的记录）进行访问。因此，在您运行查询的第二次和第三次之间，ASH 可能会清除一些等待时间较长的样本。您可以通过包含`MIN(SAMPLE_TIME)`在选择列表中来检查。

最后，请记住 SID 会被重用。识别会话的主键是`(SID, Serial#)`，您的查询仅按 SID 分组，因此它可能使用来自多个不同会话的数据。

格雷厄姆·伍兹（Graham Woods）对从事 ASH 工作的 Oracle 专家进行了一个有用的演示，名为“Shifting through the ASHes”。尽管听格雷厄姆讲话会更好，但幻灯片本身仍然提供了一些有用的见解。 [在这里找到它](http://www.oracle.com/technetwork/database/manageability/ppt-active-session-history-129612.pdf "警告：PDF")。

**tl;博士**

ASH 是样本而不是日志。将其用于计数而不是总和。

* * *

> “查询这些表的方式有什么问题吗？”

正如我上面所说的，但可能还不够清楚，`DBA_HIST_ACTIVE_SESSION_HIST`只保存了 ASH 的一小部分记录。因此，`SUM()`在其列上运行比在实时 ASH 上运行的意义更小。

而`V$SESSION_EVENT`实际的事件日志。它的等待时间可靠且准确。这就是您支付启用[定时统计](http://docs.oracle.com/cd/B28359_01/server.111/b28320/initparams245.htm#i1134696)的开销的原因。话虽如此，`V$SESSION_EVENT`它只给我们每个会话的聚合值，所以它在诊断中并不是特别有用。

# c - 结构初始化

> ID：14213390
> 
> 赞同：1
> 
> 时间：2013-01-08T10:54:14.827
> 
> 标签：c, arrays, structure

代码的输出必须为零，但我有一个错误，请指导。我可以使用其类型变量初始化结构，但是如何使用指针初始化整个结构？

```
#include<stdio.h>

typedef struct student
{
  int roll_id[10];
  int name_id[10];
  int postn;
} student;

int main()
{

  student p; /// here i can do student p={ {0} };

  student *pptr=&p;
  pptr= { {0} };  /// but can i initialize in this way ?? //error: expected       
                      expression before ‘{’ token
  pptr->roll_id[9]=1;
  printf (" %d\n", pptr->postn);   
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:58:22.357

正如克里斯在评论中所说，您正在将“不是整数的东西”分配给指针。您应该分配`{ {0} }`给该指针的**内容**（*指针）：

```
*pptr= { {0} }; //bad! 
```

无论如何，这不是填充该结构的正确方法，您应该使用：

```
*pptr= (student){ {0}, {0}, 0 }; 
```

举个例子

*编辑以解决 unwind 指出的错误*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T10:59:33.150

如果您使用的是 C99 或更高版本，则可以使用[复合文字](http://gcc.gnu.org/onlinedocs/gcc/Compound-Literals.html)。否则你不能，并且必须分别初始化每个字段。

使用文字：

```
*pptr = (student) { 0, 0, 0 }; 
```

没有：

```
pptr->roll_id[0] = 0;
pptr->name_id[0] = 0;
pptr->postn = 0; 
```

**更新**编辑，出于某种原因，我认为`roll_id`and`name_id`字段是字符串，但它们不是。

仅用`memset()`于此可能更容易，将所有值初始化为零：

```
memset(pptr, 0, sizeof *pptr); 
```

请注意，与往常一样，这是`sizeof` *与指针*一起使用的绝佳机会，因为减少了打字并且更易于阅读和验证（对于我们这里的合理变量名称）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T11:10:59.240

如果你想要的只是一个 0 初始化的结构，你不妨这样做：

```
struct student *pptr = calloc(1, sizeof(struct student)); 
```

或者，按照您发布的代码：

```
struct student p;
struct student *pptr = &p;

memset(pptr, 0, sizeof(struct student)); 
```

当然，这些方法只有在你想要一个 0 初始化的结构时才有效。对于任何更花哨的东西，你必须把它写出来，或者使用一些`memcpy`魔法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T11:07:51.633

如下使用

```
int main()
{

  student p[] = { {0, 0, 0, 0, 0, 0, 0, 0, 0, 0}};

  student *pptr = p;

  pptr->roll_id[9] = 1;
  printf (" %d\n", pptr->postn);   
  return 0;
} 
```

如果要初始化作为结构成员的整个数组，则必须像上面那样做。

# php - 如何使用查询构建器在 Symfony2 表单中创建字段，排除没有多对多关系的实体？

> ID：14213391
> 
> 赞同：1
> 
> 时间：2013-01-08T10:54:14.320
> 
> 标签：php, forms, symfony, doctrine-orm, query-builder

在我的 Symfony2 应用程序中，人们可以编写将发布在网页上的文本。有一个编写新文本的选项，您必须选择它所属的网页。

我想要实现的是，此网页列表仅显示还没有文本的网页。否则，您最终将替换现有文本。

所以我想***在我的表单类型***中写这样的东西：

```
$qb->select('wp')
->from('MyBundle:Webpage', 'wp')
->where('wp.webtexts is null')
->orderBy('wp.id'); 
```

问题出现在“wp.webtexts is null”语句周围。这是一个（功能齐全的）多对多关系，我想测试这里是否没有关系。我收到的错误是：

> [语义错误] 第 0 行，第 70 列“webtexts 为空”附近：错误：无效的 PathExpression。需要 StateFieldPathExpression 或 SingleValuedAssociationField。

如何查询与任何网络文本无关的网页？

**添加：**

我如何计算关系的数量？这个符号：

```
 $qb->where($qb->expr()->count('wp.webtexts < 1')) 
```

...给我：

> [语法错误] 第 0 行，第 85 列：错误：预期的 Doctrine\ORM\Query\Lexer::T_CLOSE_PARENTHESIS，得到 '<'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T13:03:48.497

如果您尝试检查 webtexts 对象，您应该查询 webtexts id 字段而不是 webtexts 对象。Doctrine 最终仍在尝试编写 SQL，而在 SQL 中，您必须查询一个字段：

```
$qb->select('wp')
    ->from('MyBundle:Webpage', 'wp')
    ->leftJoin('wp.webtexts', 'wt')
    ->where('wt.id IS NULL')
    ->orderBy('wp.id'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:18:57.070

像这样：

```
$em->createQuery('SELECT wp FROM MyBundle:Webpage wp LEFT JOIN wp.webtexts wt WHERE wt.id IS NULL ORDER BY wp.id'); 
```

它需要加入或不加入文本的网页，然后消除那些与文本有关系的网页......所以你有没有关系的网页！

# wpf - 如何在 xaml 中填充 wpf 组合框

> ID：14213398
> 
> 赞同：11
> 
> 时间：2013-01-08T10:54:31.190
> 
> 标签：wpf, combobox

我需要用固定的字符串集合填充 wpf 组合框（例如从 1 月到 12 月的几个月）。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-08T10:58:17.423

在命名空间中添加声明：

```
xmlns:sys="clr-namespace:System;assembly=mscorlib" 
```

然后在适当的地方添加组合框：

```
<ComboBox>
  <sys:String>January</sys:String>
  <sys:String>February</sys:String>
  <sys:String>March</sys:String>
                ...
  <sys:String>December</sys:String>
</ComboBox> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T10:57:39.800

像这样？

```
<ComboBox > 

<ComboBoxItem Content="January"></ComboBoxItem> 

<ComboBoxItem Content="February"></ComboBoxItem> 

<ComboBoxItem Content="March"></ComboBoxItem> 

<ComboBoxItem Content="April"></ComboBoxItem> 

// .... and so on....

</ComboBox> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T05:15:33.170

您应该将`ItemsSource`组合框的属性绑定到`List<string>.`

# python - Django makemessage 错误

> ID：14213400
> 
> 赞同：0
> 
> 时间：2013-01-08T10:54:37.500
> 
> 标签：python, django

**python manage.py makemessages -l en**返回此错误 - [http://pastebin.com/GtXbT7ti](http://pastebin.com/GtXbT7ti) 你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:27:43.673

在文件的开头设置，例如

```
#! coding:utf-8 
```

好像您的文件中有俄语或其他非 ASCII 字符。

# stream - 关于 RTSP over HTTP 隧道的困惑

> ID：14213406
> 
> 赞同：3
> 
> 时间：2013-01-08T10:55:11.187
> 
> 标签：stream, rtsp, live555, http-tunneling

我有一个困惑，我搜索但没有得到任何答案。

我正在使用隧道传输视频文件`RTSP`，`HTTP`然后当我看到wire-shark 以查看数据包源和目标以及协议时，我看到了一个`UDP`协议，尽管我使用`RTSP`的是`HTTP`隧道传输。

谁能告诉我为什么我看不到`TCP`协议而不是`UDP`从源发送到目的地的数据包的协议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:32:18.297

RTSP 为流式传输视频和音频设置 RTP 流。它们可能是通过 UDP 发送的，而不是通过现有 TCP 连接的隧道。

仅仅因为 RTSP 通过 HTTP 进行隧道传输并不能保证 RTP 流将被配置为使用相同的套接字。请求传输由客户端决定，但您可以将服务器更改为仅支持交错传输。看到这个答案[https://stackoverflow.com/a/3536969/759140](https://stackoverflow.com/a/3536969/759140)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:02:18.913

RTSP 是一种网络控制协议。根据[维基百科](http://en.wikipedia.org/wiki/Real_Time_Streaming_Protocol)，

> 对于 UDP（已弃用且很少使用）和 TCP 传输，RTSP 协议的默认端口为 554。

结论：将使用 UDP 或 TCP，取决于您使用的服务器和设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T19:12:49.687

非常正确，但是如果您指定在 ffmpeg 中使用 tcp-transport，如果为它配置了服务器，它应该使用 TCP。

如果您不指定任何传输选项，新版本的 ffmpeg 将尝试 UDP，如果失败，它将重试连接或 TCP。

# inno-setup - 如何在运行部分之前处理注册表部分？

> ID：14213407
> 
> 赞同：2
> 
> 时间：2013-01-08T10:55:13.150
> 
> 标签：inno-setup

我注意到该`[Registry]`部分是在该`[Run]`部分之后处理的。如何使该`[Registry]`部分在该部分之前进行处理`[Run]`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:44:42.683

您可以使用`CurStepChanged`程序在安装文件的最开始添加注册表项。

举个例子：

```
[Code]
procedure CurStepChanged(CurStep: TSetupStep);
begin
  if CurStep = ssInstall then begin
    RegWriteStringValue(HKEY_CURRENT_USER, 'Software\My Company\My Program',
    'UserName', ExpandConstant('{sysuserinfoname}'));
  end;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T09:43:58.023

你误会了。该`[Registry]`部分**安装**在该`[Run]`部分之前。请参阅[安装顺序](http://www.jrsoftware.org/ishelp/topic_installorder.htm)帮助主题。

# ubuntu-10.04 - 在启动时多次应用 IPTables 规则

> ID：14213415
> 
> 赞同：0
> 
> 时间：2013-01-08T10:55:42.793
> 
> 标签：ubuntu-10.04, iptables, blacklist

专门谈论 Ubuntu 10.04 LTS 服务器（Lucid Lynx），尽管它可能适用于其他 Linux 版本。

我正在浏览一些网站的日志，可以说是在进行一些春季大扫除，并注意到一些 IP 地址一直表现不佳，所以我想将它们添加到黑名单中。

基本上我玩的是IPtables，IP的黑名单只是一个文本文件。然后我创建了一个 shell 脚本来循环遍历文本文件并阻止 IPtables 中的每个 IP 地址。

当手动运行 shell 脚本时，这工作得很好。但显然我希望它在启动时自动运行，以便在服务器重新启动时自动运行。所以我将shell脚本包含在

代码：

```
/etc/network/if-pre-up.d/iptables 
```

所以现在看起来像

代码：

```
#!/bin/sh 
/sbin/iptables-restore < /etc/iptables.up.rules
sh /etc/addBlacklist.sh 
```

所以我重新启动了服务器和应用了黑名单规则，但似乎它们已经应用了多次。就像运行 iptables -L 时出现的重复行一样。

只是想知道是否有人会知道这样做的原因？

我想这在宏伟的计划中并不重要，但我很好奇。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:32:21.777

从来没有发现为什么它们被多次应用，但我只是删除了单独的黑名单文件并将其合并到 iptables.up.rules 文件中。

不那么漂亮，但停止了重复。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-24T22:16:49.070

只需`iptables -F`在脚本的开头添加，这样当脚本启动时，它会自动刷新旧条目，然后再次阻止 ip。

# jsf - 从 Servlet 访问 ViewScoped ManagedBean

> ID：14213422
> 
> 赞同：2
> 
> 时间：2013-01-08T10:56:16.477
> 
> 标签：jsf, jakarta-ee, jsf-2, applet, managed-bean

背景信息：我的 jsf 页面中有一个文件上传小程序。这个小程序需要一个可以发送它的 POST 请求的地址。（我无法编辑此帖子请求以添加更多字段或其他内容）。然后我的 servlet 的 post 方法存储该文件。这项工作不能由托管 bean 完成，因为 servlet 必须使用 @MultiPartConfig 进行注释，并且我无法将此注释添加到 jsf 托管 bean。为了强制上传小程序使用相同的会话，我根据这篇[文章](https://stackoverflow.com/q/13194034/1644061)在发布请求中添加了一个名为 jsessionId 的 URL 属性。在我的 servlet 中，我现在可以访问会话范围的 bean。

现在我有一个 ViewScoped bean，我在其中存储了一些我想在 servlet 中使用的表单输入数据，因为将这些输入添加到 post 请求中不起作用（Applet 是第三方项目（JUploadApplet）并且由于某种原因它没有不能添加额外的表单数据）。现在是否可以从 servlet 中访问 ViewScoped bean？如果我将范围更改为 SessionScope，我可以处理输入，但是使用 ViewScoped 如果我尝试像这样访问 bean，我会得到 NullPointerException： UploadBean uploadBean = (UploadBean)request.getSession().getAttribute("uploadBean");

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T13:13:51.847

这是不可能的。最好的办法是让视图范围的 bean 生成一个唯一键，通过该键将自身存储在会话范围中，并将该键作为附加参数传递给小程序，最后让 servlet 通过该键访问会话属性。

例如

```
private String sessionKey;

@PostConstruct
public void init() {
    sessionKey = UUID.randomUUID().toString();
    FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put(sessionKey, this);
}

@PreDestroy
public void destroy() {
    FacesContext.getCurrentInstance().getExternalContext().getSessionMap().remove(sessionKey);
} 
```

让小程序把`sessionKey`as请求参数传给servlet，这样servlet就可以做

```
String sessionKey = request.getParameter("sessionKey");
Bean bean = (Bean) request.getSession().getAttribute(sessionKey);
// ... 
```

请注意，除了 bean 本身，您还可以只存储任意 bean/valueobject/等。

# android - 会话提供给处于未打开状态的请求

> ID：14213429
> 
> 赞同：8
> 
> 时间：2013-01-08T10:56:33.853
> 
> 标签：android, facebook

Facebook SDK 3.0 中的 Facebook 好友选择器示例显示错误对话框。消息框显示：“com.facebook.Facebook 异常：会话提供给处于未打开状态的请求。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:29:17.653

我遇到了这个确切的错误，如果您是从 Eclipse 运行它，那么很有可能在 log cat 中有更详细的错误。对我来说，我发现真正的错误是我的 Android 哈希键与我提供给 Facebook 的哈希键不匹配。

仔细检查您使用的哈希键是否正确。请参阅此答案以设置您的哈希键

[Android-Facebook 应用程序的密钥哈希](https://stackoverflow.com/questions/4388992/key-hash-for-android-facebook-app)

此外，使用 Keytool 对我的 HashKey 没有帮助，相反，我遵循了本指南中的建议：

[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

在第 4 步中，请参阅故障排除，并修改代码以输出您的 HashKey 并改用该代码。我从 Keytool 生成的 hashkey 与这个有很大不同。之后重新编译所有内容，它应该可以正常工作。

# android - 如何通过运行应用程序获取 CPU 使用率

> ID：14213436
> 
> 赞同：2
> 
> 时间：2013-01-08T10:57:21.990
> 
> 标签：android, process, cpu-usage

我正在开发一个应用程序，我需要根据正在运行的应用程序显示 CPU 使用率（就像任务管理器一样）。

我关注了这篇文章，[获取 CPU 使用率](https://stackoverflow.com/a/5560634/1626878)，但它演示了总 CPU 使用率。在这里，它使用了以下代码来读取 CPU 统计信息，

```
RandomAccessFile reader = new RandomAccessFile("/proc/stat", "r"); 
```

我想获得所有单独运行的应用程序的 cpu 使用率。到目前为止，我已经能够获取所有正在运行的应用程序的列表，

```
 ActivityManager activityManager = (ActivityManager)
                      getSystemService(ACTIVITY_SERVICE);

    List<RunningAppProcessInfo> listOfRunningProcess = activityManager
                    .getRunningAppProcesses(); 
```

现在我想获取这些应用程序的 CPU 使用率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:26:01.913

使用 top 命令并通过使用执行它`Runtime.execute("your top command")`这将为您提供一个字符串，您必须对其进行解析以获取每个应用程序的 CPU 使用情况。

在这里查看更多关于[Top](http://linux.about.com/od/commands/l/blcmdl1_top.htm)命令的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:25:10.183

那么您可以使用 linux [top](http://linux.about.com/od/commands/l/blcmdl1_top.htm)命令来获取每个进程（PID）的内存使用情况。

你可以在[这里](http://www.cleanappnetwork.com/tutorial-finding-cpu-usage-for-individual-android-apps/)找到完整的实现。

# c# - 从存储的数据构造链表的最有效方法？

> ID：14213437
> 
> 赞同：5
> 
> 时间：2013-01-08T10:57:26.650
> 
> 标签：c#, xml, algorithm, data-structures, linked-list

我将数据存储在描述链表的 XML 文档中；除了一个之外的所有节点都跟随另一个，所以数据看起来像这样：

```
<cars>
    <car id="9" follows="34" />
    <car id="12" follows="20" />
    <car id="20" follows="9" />
    <car id="29" follows="30" />
    <car id="30" />
    <car id="34" follows="29" />
</cars> 
```

...给出30、29、34、9、20、12的顺序。我正在使用.NET的`LinkedList`类来构造一个链表来反映这些数据，但是构造起来很尴尬，因为这些值是乱序的。我真正想要做的是假设数据是有效的——只有一个第一个值，而所有其他值都有“跟随”列表中另一个节点之后的值。像这样的代码会很好（这`FindFirstForwards`是我编写的自定义扩展方法，用于查找给定 lambda 返回 true 的第一个链表条目）：

```
LinkedList<CarInstance> orderedCars = new LinkedList<CarInstance>();
XPathNodeIterator xmlIterator = _nav.Select("/dflt:cars/dflt:car", _namespaceResolver);
while (xmlIterator.MoveNext()) {
    if (!(xmlIterator.Current.Select("@follows").Count > 0)) {
        orderedCars.AddFirst(new CarInstance {
            CarId = int.Parse(xmlIterator.Current.GetAttribute("id", _defaultNamespace))
        });
    }
    else {
        orderedCars.AddAfter(orderedCars.FindFirstForwards(car => car.CarId == int.Parse(xmlIterator.Current.GetAttribute("follows", _defaultNamespace))), new CarInstance {
            CarId = int.Parse(xmlIterator.Current.GetAttribute("id", _defaultNamespace))
        });
    }
} 
```

麻烦的是，如果这个跟随的车还没有被添加到`orderedCars`，则会抛出异常，因为`FindFirstForwards`没有找到具有“跟随”ID 的车。我真正想做的是说“将其添加到链接列表中，假设它会跟随某个具有特定 ID 的未来条目，即使该条目尚未添加，并继续。” 最后，检查链表的完整性，确保每个节点都指向另一个节点，并且有一个头节点。

有没有一种简洁的方法来做到这一点？如果不是，那么将此 XML 转换为内存中链表的最有效（最好是代码简洁）的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T11:15:16.117

我会以两步的方式做到这一点：

1.  将所有汽车加载到字典中，由汽车的 id 键入，而不考虑它们的顺序
2.  通过循环遍历所有汽车（按字典顺序，无关紧要）来链接所有汽车，并通过字典找到下面的汽车，此时应该是一个`O(1)`操作。

如果您不能在没有将下一辆车链接到该点的情况下构造汽车对象，即。汽车对象的“跟随”部分（或全部）是不可变的，我会创建一个临时类，甚至将 XML 节点存储在字典中，然后在您获得它们的顺序后构造汽车对象。

此外，即使您只有一个从一个对象到另一个对象的链接，您也可以为此考虑拓扑排序，但请注意，该算法的快速实现通常也使用字典。

# browser-cache - 从浏览器缓存中删除单个文件

> ID：14213439
> 
> 赞同：3
> 
> 时间：2013-01-08T10:57:30.860
> 
> 标签：browser-cache

我的页面中有一张图片，图片缓存在浏览器中。

现在我已经删除了图像，但是因为它被缓存了，所以请求没有到达服务器，它又出现了。

那么如何从浏览器缓存中删除它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T11:14:40.877

不，您不能物理删除缓存的文件。相反，您可以动态生成文件的链接，例如

```
<script type="text/javascript">
document.write('<img id="without-cache" src="image.jpg?v=' + new Date().getTime() + '" />');
</script> 
```

`?v=`当你想重新加载它而不从缓存中加载它时，最终会改变源代码。

```
$("#without-cache").attr("src", "image.jpg?v=" + new Date().getTime()); 
```

# matlab - 带有零填充数字的 Matlab 文件名

> ID：14213442
> 
> 赞同：4
> 
> 时间：2013-01-08T10:57:39.143
> 
> 标签：matlab, string-formatting

我有 11x11 矩阵，我将它们保存为`.mat`文件，从`F01_01`到`F11_11`. 我必须`Func`在每个文件上运行一个函数。由于需要很长时间，我想编写一个脚本来自动运行该功能：

```
for i=01:11  
    for j=01:11  
        filename=['F',num2str(i), '_', num2str(j),'.mat'];  
        load(filename);  
        Func(Fi_j);   % run the function for each file  Fi_j  
    end  
end 
```

但它不起作用，Matlab 找不到 mat 文件。
有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T11:33:02.337

## 问题

```
i=01; 
j=01; 
['F',num2str(i), '_', num2str(j),'.mat'] 
```

评估为

> F1_1.mat

而不是

> F01_01.mat

正如预期的那样。

这样做的原因是这`i=01`是一个双重类型赋值并且`i`等于`1`- 这些类型的变量没有前导零。

## 一个办法

该问题的可能解决方案是

```
for ii = 1:11
    for jj= 1:11
        filename = sprintf('F_%02d_%02d.mat', ii, jj );
        load(filename);  
        Func(Fi_j);   % run the function for each file  Fi_j  
     end  
end 
```

### 几条评论：

1.  请注意使用`sprintf`格式化双精度`ii`和`jj`使用前导零`%02d`。

2.  您可以使用 的第二个参数[`num2str`](http://www.mathworks.com/help/matlab/ref/num2str.html)来格式化其输出，例如：`num2str(ii,'%02d')`.

3.  在处理字符串时使用[字符串格式化](http://www.mathworks.com/help/matlab/matlab_prog/formatting-strings.html)工具是一种很好的做法。

4.  在 matlab 中最好[**不要**使用`i`和`j`作为循环计数器](https://stackoverflow.com/questions/14790740/using-i-and-j-as-variables-in-matlab)，因为它们在 matlab 中的默认值为`sqrt(-1)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:32:59.070

这是另一种解决方案，请注意[@Shai](https://stackoverflow.com/a/14214042/1714410)的解决方案更容易扩展到多位数字，但这需要对字符串格式的了解较少。

```
for i=1:11  
        for j=1:11  
            filename=['F',num2str(floor(i/10)),num2str(mod(i,10)) '_', num2str(floor(j/10)),num2str(mod(j,10)),'.mat'];  
            load(filename);  
            Func(Fi_j);   % run the function for each file  Fi_j  
       end  
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-27T14:12:36.843

`num2str`可以做零填充来填充该字段。在下面的示例中，4 是所需的字段宽度+1。

```
num2str(1,'% 04.f') 
```

答案 =`001`

# c - 条件和指针

> ID：14213445
> 
> 赞同：2
> 
> 时间：2013-01-08T10:57:46.647
> 
> 标签：c, conditional-statements

如果我有这样的事情

```
 if(pointer!=NULL&&(*pointer)==x) { ... } 
```

如果指针为NULL，它会出现段错误吗？如果它是特定于编译器的，我想知道它在 GCC 中的情况。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T10:59:12.140

不，因为[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)。

如果 LHS 为*false*，则不会评估 RHS。因此，如果它是一个`NULL`指针，它永远不会命中 RHS 并尝试取消引用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:09:17.990

如果`&&`使用，则仅当第一个条件为 时才会执行第二个条件`TRUE`。这永远不会导致分段错误。

我们也可以进行同样的检查`||`。

```
if ((pstr_buf == NULL)  || (pstr_buf[0] == '\0'))
{
   printf("\ninvalid string buffer\n");
} 
```

# android - apk 扩展文件未从 Playstore 下载

> ID：14213449
> 
> 赞同：9
> 
> 时间：2013-01-08T10:57:52.603
> 
> 标签：android, expansion

我正在使用从 SDk 下载的示例 apk 扩展文件。我的主要扩展文件大小约为 5 MB，其格式为`"main.1.mypackage_name"`.

我将我的应用程序作为草稿应用程序与扩展文件一起上传到 Play 商店。但问题是当扩展文件下载进行时，会在**"Android/obb/mypackage"**下创建一个带有包名的文件夹。但是该文件夹中没有这样的文件。

有时我`STATE_FAILED_UNLICENSED`会在下载开始时从 Playstore 收到消息。

这应该是什么原因？文件名格式有什么问题吗？有谁能够帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:09:05.740

根据 Goole Play for Developers..

> 请注意，apk 文件的包名是唯一且永久的，因此请明智地选择。包名称以后不能删除或重复使用。请记住，如果您丢失了密钥库，则必须使用新的包名称和新密钥发布应用程序。您还应该更新原始应用程序的描述并取消发布它。

这2个链接可能对您有所帮助..

*   [上传申请](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=113469)
*   [APK 扩展文件](http://developer.android.com/google/play/expansion-files.html)（请参阅此处**下载扩展文件）**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:49:39.267

在 Google Play 开发者控制台中，有一个区域可以添加 gmail 帐户，可以接收许可证响应以进行测试，您还可以更改许可证响应。这可以在“编辑配置文件”链接（旧设计）或“设置”（新设计）中找到。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T13:59:40.330

**可能有助于以下解决方案：-**

在 manifest.xml 中添加检查标记

```
 <uses-permission android:name="com.android.vending.CHECK_LICENSE"/> 
```

检查添加了所有 libaray 和项目中的所有类：-

```
 com.google.android.vending.licensing. 
```

检查从 google play 商店帐户添加到项目的许可证密钥。

使用以下格式检查上传的文件夹。

```
 main.1.mypackage_name.obb.zip 
```

谢谢！！

# c# - Unity ResolveAll，并解析未注册的类型

> ID：14213456
> 
> 赞同：1
> 
> 时间：2013-01-08T10:58:33.007
> 
> 标签：c#, unity-container

*简单的问题*；`ResolveAll<T>`对于未注册的类型，是否有可能？

在一个理想的世界里，我会有类似于`IPluggable`接口的东西，当它被解析时会返回一个继承该接口的对象集合。

```
// both unregistered types
public class PluginOne : IPluggable { }
public class PluginTwo : IPluggable { }

// returns instances of PluginOne and PluginTwo
IEnumerable<IPluggable> result = container.ResolveAll<IPluggable> 
```

据我所知，它可以通过 StructureMap 等替代方案实现，但遗憾的是我们的结构是围绕 Unity 构建的。我能想到的唯一解决方案是创建一个引导程序来使用一些反射和命名空间挖掘来自动注册某些类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:06:33.430

是的，你是对的。Unity 不会解析任何未注册的类型（除非您要求类的单个实例而不是接口）。提出的解决方案 - 引导程序 - 是我在许多项目中成功使用的解决方案。我遇到的唯一问题是选择要扫描的 dll 列表，如果您希望它在文件夹中找到扩展名，这可能会很棘手。最节省的方法是为此添加一个配置部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:12:14.443

我创建了自己的扩展，它根据我的接口 IBlock 解析类型。该扩展仅查看正在执行的程序集，但可能会查看您想要的任何位置。从这里应该可以做一个你想要的扩展。

块：

```
using Microsoft.Practices.Unity;

public interface IBlock
{
    void Register(IUnityContainer unity);
} 
```

延期：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Reflection;
using Microsoft.Practices.Unity;

public class UnityBlockRegistrationExtender : UnityContainerExtension
{
    private readonly NameToTypesMap nameToTypesMap = new NameToTypesMap();

    protected override void Initialize()
    {
        var blockType = typeof(IBlock);
        var blockTypes = Assembly.GetEntryAssembly().GetTypes()
            .Where(block => blockType.IsAssignableFrom(block) && block.IsClass);
        foreach (var type in blockTypes)
        {
            if (this.nameToTypesMap.AddType(type.AssemblyQualifiedName, type))
            {
                var block = this.Container.Resolve(type) as IBlock;
                block.Register(this.Container);
            }
        }
    }

    private class NameToTypesMap
    {
        private readonly Dictionary<string, Type> map = new Dictionary<string, Type>();

        internal bool AddType(string name, Type type)
        {
            if (name == null)
            {
                throw new ArgumentNullException("name", "A name is required.");
            }

            if (type == null)
            {
                throw new ArgumentNullException("type", "A Type object is required.");
            }

            lock (this.map)
            {
                if (!this.map.ContainsKey(name))
                {
                    this.map[name] = type;
                    return true;
                }
            }

            return false;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T11:31:49.013

[Unity](http://tecx.codeplex.com/wikipage?title=AdvancedConfigurationEngineForUnity&referringTitle=Home)有一个扩展，其工作方式与 Structure Map 的配置引擎非常相似。

它允许您扫描程序集以查找接口的实现，并为您提供对自定义约定的支持。

# java - 在 netbeans 中构建后 Jar 文件无法正常运行

> ID：14213458
> 
> 赞同：0
> 
> 时间：2013-01-08T10:58:36.953
> 
> 标签：java, swing, jar, netbeans-7, executable-jar

我做了一个项目，当我通过 net beans 运行它时，它运行正常意味着我的登录屏幕出现，当我输入我的 ID 和密码时，它会打开下一个屏幕....但是当我使用 .jar 文件运行它时，它正在打开登录文件，但是当我输入（有效）ID 和密码时，它没有打开下一个窗口。它正在阻止登录按钮，这意味着它正在加载，但一段时间后它没有显示下一个屏幕。如果我使用 net beans 构建或运行它，它不会显示一个问题..这是我的构建输出

```
ant -f C:\\Users\\Administrator\\Documents\\NetBeansProjects\\IDocCsMain run
init:
Deleting: C:\Users\Administrator\Documents\NetBeansProjects\IDocCsMain\build\built-jar.properties
deps-jar:
 Updating property file:C:\Users\Administrator\Documents\NetBeansProjects\IDocCsMain\build\built-jar.properties 
```

编译：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:49:07.017

这是我在“Andrew Thompson”给我的“Advise”的帮助下自己编写的解决方案。我得到一个图标并将其设置在构造函数中的 JLabel 上。当我通过 net beans 运行它时，它运行得很好，但是当我在没有 net beans 的情况下运行它时，使用 .jar 文件它没有得到图标的路径并显示抛出异常（通过在命令提示符下运行它来检查它）。我动态设置了我的路径，现在它运行正常。

# javascript - 如何像这样创建自定义 jQuery

> ID：14213460
> 
> 赞同：3
> 
> 时间：2013-01-08T10:58:43.647
> 
> 标签：javascript, jquery, html, jquery-plugins

# 我想要的是

我想创建一个函数在我的控制台中记录一个字符串。下面只是一个例子来展示我想要什么。

```
var helloWorld = 'Hello World';
helloWorld.log();

function log(string)
{
   console.log(string);
} 
```

这`helloWorld.log();`部分没有像预期的那样工作，但我希望这样做，但我不知道怎么做。

# 我试过的

[看这个例子](http://www.ibm.com/developerworks/library/wa-jqplugin/index.html)

## 1

```
(function($) {
  $.fn.log= function() {
    console.log($(this));
  };
})(jQuery); 
```

## 2

```
var log = function() {
    console.log($(this));
} 
```

## 3

```
jQuery.fn.log = function(){
    console.log($(this));
} 
```

# 让我发疯的错误

> 类型错误：helloWorld.log 不是函数

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T11:02:00.073

如果你想在 hello world 变量（它是一个字符串）上打印它，你可以使用一个原型函数来为字符串提供一个日志方法。

例如像这样的东西：

```
String.prototype.log= function() {
    console.log(this.toString());
}); 
```

然后当你调用`helloWorld.log()`它时应该调用这个函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T11:02:45.870

为了能够做到这一点，`"Hello World".log()`您必须扩展本机 String 对象，例如：

```
String.prototype.log = function() { console.log(this); } 
```

要使用`log`而不是`console.log`，你需要这样的东西：

```
window.log = (window.console && window.console.log && window.console.log.bind) ?
    console.log.bind(console) : 
    function (e) {alert(JSON.stringify(e)); }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T11:01:23.493

将 更改`helloWorld.log();`为`log(helloWorld);`。

这可能会有所帮助

# ssis - 2 使用 ssis 将 csv 文件导出到 excel 文件

> ID：14213467
> 
> 赞同：0
> 
> 时间：2013-01-08T10:59:27.340
> 
> 标签：ssis

我正在尝试从 2 个 csv 文件中读取数据并导出到新的 excel 文件中，但我无法将数据导出到 excel 目标中。在进行列映射时，输入列中有 4 列，但在可用输出列中仅显示 F1 列中的 1 列。请让我知道如何解决此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:31:45.483

打开一个excel表，在第一行，给出列标题。A、B、C 和 D 列应与源列同名。完成后，保存 excel 文件并关闭工作簿。转到 SSIS 并打开 Excel 目标映射。您现在应该能够映射它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:09:40.827

如果我正确理解了这个问题，您将无法将列映射到“新”XL 文件。如果是这种情况，映射的元数据可能就是问题所在。

首先尝试使用所需的列标题和列类型创建一个新的 xl 文件，然后映射到此文件。
或者，右键单击 excel 目标并使用“显示高级编辑器”选项，然后调整“输入和输出设置”选项卡的“外部列”中的列。

然后，您可能需要将 Excel 目标组件的 ValidateExternalMetadata 选项设置为 false，以便允许从头开始创建新文件。

# php - 跳过 xml“数据过早结束”错误

> ID：14213470
> 
> 赞同：1
> 
> 时间：2013-01-08T10:59:31.050
> 
> 标签：php, xml, handler

我有一个错误的 xml 提要。它切断了一些节点，它们被破坏了，我收到以下错误消息 -

```
Warning: DOMDocument::load() [function.DOMDocument-load]: Premature end of data in tag 

hotelDescription line 30760 in /srv/disk9/561574/www/source.xml, line: 30760 in /srv/disk9/561574/www/file.php on line 22

Warning: DOMDocument::load() [function.DOMDocument-load]: Premature end of data in tag product line 30741 in /srv/disk9/561574/www/source.xml, line: 30760 in /srv/disk9/561574/www/file.php on line 22

Warning: DOMDocument::load() [function.DOMDocument-load]: Premature end of data in tag products line 2 in /srv/disk9/561574/www/source.xml, line: 30760 in /srv/disk9/561574/www/file.php on line 22
0 
```

我已经设置了一个错误处理程序，但我不确定如何或者是否有可能在导致错误时忽略一个元素？

```
/* load the file on the DOM*/
$dom = new DomDocument();
$dom->load($filename);

if (!$dom->load($filename)) {
    foreach (libxml_get_errors() as $error) {
        // handle errors here

    }

    libxml_clear_errors();
} 
```

非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T01:44:30.117

经过大量研究后发现，这似乎不可能跳过损坏的元素。

[https://stackoverflow.com/a/13609656/1122187](https://stackoverflow.com/a/13609656/1122187)

在我的情况下，提要在最后中断，所以我使用 XMLreader 只通过一定数量，使用限制，所以它不会到达最后一个中断的元素。

```
while ($reader->read()) 
{
    if (($reader->name == $element1  || $reader->name == $element2) && $reader->nodeType == XMLReader::ELEMENT)
    {
    $name = $reader->name;
        if ($i == $limit) break;
        while ($reader->read())
        {
            if ($reader->nodeType == XMLReader::TEXT
                || $reader->nodeType == XMLReader::CDATA
                || $reader->nodeType == XMLReader::WHITESPACE
                || $reader->nodeType == XMLReader::SIGNIFICANT_WHITESPACE)
            {
                $product[$i][$name] = $reader->value;
            }
            else if ($reader->nodeType == XMLReader::END_ELEMENT && $reader->name == $element1)
            {
                break;
            }
            else if ($reader->nodeType == XMLReader::END_ELEMENT && $reader->name == $element2)
            {
                break;
            }

         }

         if($name == $element2)
    $i++;

    }
}
$reader->close(); 
```

上面的代码归功于此链接中的 Jose Vega - [PHP xmlreader to array](https://stackoverflow.com/questions/4349105/php-xmlreader-to-array)

# xcode - 使用 AFNetworking 解析 JSON 会给出带有圆括号的结果

> ID：14213471
> 
> 赞同：0
> 
> 时间：2013-01-08T10:59:31.110
> 
> 标签：xcode, json, parsing, afnetworking

这是简化的 JSON 文件，我需要从网络服务下载它并在表格中解析结果！

**编辑：**我现在提供更精确的代码，通过在线工具清理和格式化：

```
{
  "main": [
    {
      "id": 0, <--- float value
      "type": "type0", <--- STRING value
      "valueA": {
        "valueA1": 1, <--- float value
        "valueA2": 2, <--- float value
        "valueA3": 3  <--- float value
      },
      "valueB": {
        "valueB1": 1, <--- float value
        "valueB2": 2  <--- float value
      },
      "valueC": [
        {
          "valueC1": "string0C1", <--- STRING value
          "valueC2": 2, <--- float value
          "valueC3": 3, <--- float value
        }
      ]
    }, 
```

通过在线工具 jsonviewer.stack.hu 格式化：

![在此处输入图像描述](../Images/c2351129c02ba3d4b4346068a0ddd1c9.png)

我需要用 AFJSONRequestOperation 解析它，我写了这段代码：

```
NSMutableArray *main = [JSON objectForKey:@"main"];
arrayID = [main valueForKey:@"id"];
arrayType = [main valueForKey:@"type"];

NSMutableArray *arrayValueC = [main valueForKey:@"valueC"];
NSMutableString *stringC1 = [arrayValueC valueForKey:@"valueC1"]; 

// I CANT USE objectForKey, XCode give an exception -[__NSArrayI objectForKey:]: unrecognized selector sent to instance

NSLog(@"id: %@",arrayID);
NSLog(@"type: %@",arrayType);
NSLog(@"string: %@",stringC1); 
```

当我解析时，我从 NSLog 得到这个结果：

```
id: (
    0,
    1,
    2,
    3,
    4,
    5,
    6,
    7,
    8,
    9
)

type: (
    type0,
    type1,
    type2,
    type3,
    type4,
    type5,
    type6,
    type7,
    type8,
    type9
)

string: (
        (
        "string0C1"
    ),
        (
        "string2C1"
    ),
        (
        "string2C1"
    ),
        (
        "string3C1"
    ),
        (
        "string4C1"
    ),
        (
        "string5C1"
    ),
        (
        "string6C1"
    ),
        (
        "string7C1"
    ),
        (
        "string8C1"
    ),
        (
        "string9C1"
    )
) 
```

正如您所看到的那样，它非常完美，我可以推断 ID（浮点数）和 TYPE（字符串）的每个值，但我讨厌 valueC1 字符串的每个对象中的圆括号：我怎样才能得到没有括号和引号的干净 valueC1 ? 请如果你能提供一些代码。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T21:55:04.843

不要使用`valueForKey:`. 改为使用`objectForKey:`。这可能是主要问题。但是一旦你使用它，你可能会遇到新的问题：

以下包含`arrayValueA`第一次访问时会出现的问题：

```
NSMutableArray *arrayValueA = [arrayMain objectForKey:@"valueA"]; 
```

存储的元素`valueA`是一个对象，即字典而不是数组。

最后，您的*简化*JSON 无论如何都是无效的。有几个值缺少双引号，例如：

```
"id": id0 
```

应该：

```
"id": "id0" 
```

你最好展示真实的 JSON 数据和真实的代码。

**更新：**

您应该能够使用以下代码访问 JSON 数据：

```
NSArray *main = [JSON objectForKey:@"main"];
NSDictionary* main0 = [main objectAtIndex:0];
arrayID = [main0 objectForKey:@"id"];
arrayType = [main0 objectForKey:@"type"];

NSArray *arrayValueC = [main objectForKey:@"valueC"];
NSDictionary *elem0 = [arrayValueC objectAtIndex:0];
NSString *stringC1 = [arrayValueC objectForKey:@"valueC1"]; 

NSLog(@"id: %@",arrayID);
NSLog(@"type: %@",arrayType);
NSLog(@"string: %@",stringC1); 
```

# azure - 在不使用 cscfg 的情况下更新/升级 Azure Web 角色

> ID：14213483
> 
> 赞同：2
> 
> 时间：2013-01-08T11:00:29.823
> 
> 标签：azure, azure-web-roles

我有一个 Azure Web 角色 CSPKG，其中包含针对不同客户的多个 CSCFG 文件。当我部署新版本时，我需要指定要使用的包和配置文件。但有时在 Azure 门户中进行的更改在源 cscfg 文件中没有更改。（例如：自定义日志记录级别等）。

有什么方法可以升级现有实例而不覆盖 Azure 中的现有设置。（当然方案需要相同）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T11:29:06.427

这很容易做到：

1.  创建一个控制台应用程序，该应用程序从服务管理 API 获取当前属性（使用 embed-detail=true[获取托管服务属性](http://msdn.microsoft.com/en-us/library/windowsazure/ee460806)，查找 ExtendedProperties 元素）。
2.  让它更新您的本地 CSCFG 文件
3.  部署 CSPKG 和更新的 CSCFG 文件

# primefaces - Primefaces 和选择器

> ID：14213486
> 
> 赞同：0
> 
> 时间：2013-01-08T11:00:48.750
> 
> 标签：primefaces

我有一个`tabView`组件，在每个`tab`面板中，我都有一个`form`.

我还有一个标志图像来更改我的应用程序中的语言环境，当它被点击时，我想重新加载所有`tabView`新的语言环境更改。

在`tab`面板的一个表单中，我使用`captcha`组件并且我不想重新加载它，因为......没有所有重新加载页面是不可能的（不支持部分 Ajax 重新加载，我将使用`Recaptcha.reload()`JS 来完成重新加载的工作）。

所以我想重新加载`tabView`嵌套在`panel`名为...的组件中的所有组件，`panel`而不需要我的验证码。

*   我`tabView`嵌套在名为的面板中`panel`
*   我的验证码有 id`captcha`

我的 2 个语言环境更改按钮是这些：

```
<p:commandLink update="@(:panel:not(captcha))" rendered="#{locale.locale != 'fr'}">
    <h:graphicImage url="resources/images/flags/flag_fr.png" width="30" height="30" />
    <f:setPropertyActionListener target="#{locale.locale}" value="fr" />
</p:commandLink>
<p:commandLink update=":panel" rendered="#{locale.locale != 'en'}">
    <h:graphicImage url="resources/images/flags/flag_en.png" width="30" height="30" />
    <f:setPropertyActionListener target="#{locale.locale}" value="en" />
</p:commandLink> 
```

我已经在属性内测试了很多选择器组合，`update`但没有成功。

请问有什么选择器的想法吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:27:09.893

当您使用 PFS 时，您将引用组件的客户端 ID。例如，如果您的面板的客户端 ID 是`:panel`，您的选择器将是`@(#\\:panel)`（您必须转义分号）。检查生成的 html 并找出组件的真实客户端 ID。如果组件在命名容器中，则容器的 id 在子组件的 id 之前连接。例如，如果面板正在命名您的验证码容器，它将类似于：`@(#\\:panel:not(#\\:panel\\:captcha))`. 表单也是命名容器，因此您的 id 可能会更接近于此。

# c# - PrivateObject 不会返回参数

> ID：14213492
> 
> 赞同：11
> 
> 时间：2013-01-08T11:01:00.687
> 
> 标签：c#, unit-testing

我正在尝试在单元测试项目中测试私有方法。到目前为止，一切都很好，但是当我必须测试一个带有 out 参数的方法时，我遇到了一个问题。该方法的签名是：

```
private bool GotSSI(out SSI ssi, RSI rsi)
{
        ~code omitted~
} 
```

单元测试（不工作的部分）看起来像这样：

```
SSI ssi = null;
object[] p = new object[]{ssi,rsi};
Type[] t = new Type[] { typeof(SSI).MakeByRefType(), typeof(RSI) };
actual = (bool) privateTarget.Invoke("GotSSI",t,p); 
```

GotSSI 方法有效。我已经在单元测试中以调试模式对其进行了测试，我可以看到在方法内部设置了“ssi”输出变量，然后返回它的真值或假值。但是当测试返回到它自己的代码时，“ssi”变量仍然为空。所以问题是我在“GotSSI”方法中创建的对象没有从 PrivateObject 调用方法中解析出来。

有人知道我错过了什么吗？

**更新（Rafal 的解决方案）**

Rafal 的解决方案完美运行，这就是我实施该解决方案的方式。

我创建了一个代表：

```
delegate bool GotSSIInternal(out SSI ssi, RSI rsi); 
```

当我创建了我想要测试的对象时，我构建了委托（目标是我正在测试的对象）：

```
GotSSIInternal gotSSIInternal = (GotSSIInternal) Delegate.CreateDelegate(
            typeof (GotSSIInternal), 
            target,
            typeof(OfflineResolver).GetMethod("GotSSI", BindingFlags.NonPublic | BindingFlags.Instance)); 
```

之后调用委托非常简单：

```
actual = gotSSIInternal.Invoke(out ssi, rsi); 
```

解决方案非常简单，就像一个魅力。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-13T15:53:27.180

尽管被接受的最终解决方案可行，但有一种更简单的方法可以做到这一点。如果您按照 Rafal 接受的答案中给出的链接，您会发现与此问题类似的问题，有两个答案。第二个答案（最“有用”的点）是两者中较简单的一个。

这是专门针对测试场景的该答案的修改版本：

```
//method to test is a private method of the class ClassTotest with signature 
//    TryGetCustomerData(List<Invoice> invoices, out CustomerData customerData) 
//set up
var objToTest = new ClassToTest();
var invoices = GetInvoices();
CustomerData customerData = null;

//set up the arguments
var args = new object[] { invoices, customerData };
//get the MethodInfo of the method you want to test
var method = typeof(ClassToTest).GetMethod("TryGetCustomerData",
    BindingFlags.NonPublic | BindingFlags.Instance);
//invoke it
var success = (bool)method.Invoke(objToTest, args);
//get back the customerData argument - the "out" parameter
var actual = args[1] as CustomerData; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T11:12:04.733

如果您想获取 out 值，则使用 out 参数调用方法是错误的。有关如何使用反射调用它的信息，请参阅[this 。](https://stackoverflow.com/questions/2438065/c-sharp-reflection-how-can-i-invoke-a-method-with-an-out-parameter)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T11:16:17.793

您需要问自己是否真的需要测试私有方法？我个人不测试私有方法，但这完全取决于个人意见（而且它可能会变得非常激烈）。有很多原因/文章/意见。[一个好的 SO 线程可以在这里找到](https://stackoverflow.com/questions/105007/should-i-test-private-methods-or-only-public-ones)。

已接受答案的摘录是“*私有方法是一个实现细节，应该对类的用户隐藏。测试私有方法会破坏封装......* ”

我不测试我的私有方法的原因是因为它们比公共接口更有可能改变。如果您涵盖所有私有方法，它会使重构更加复杂（再次，只是我的观点）。如果您更改私有方法并且公共接口中断，您将知道您的单元测试失败，然后您可以向下钻取。

这只是我的意见，我知道很多人不同意，所以把它放在那里！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-09T05:08:33.113

我可以使用`PrivateObject`它来执行此操作，尽管它在技术上不是“返回值”，例如：

```
object[] p = new object[] { null, rsi };
Type[] t = new Type[] { typeof(SSI).MakeByRefType(), typeof(RSI) };
actual = (bool)privateTarget.Invoke("GotSSI", t, p);
SSI ssi = p[0]; 
```

实际上，如果可以在没有它的情况下确定方法重载，则可以省略类型数组：

```
object[] p = new object[] { null, rsi };
actual = (bool)privateTarget.Invoke("GotSSI", p);
SSI ssi = p[0]; 
```

# javascript - 动画失败

> ID：14213495
> 
> 赞同：0
> 
> 时间：2013-01-08T11:01:09.227
> 
> 标签：javascript, jquery, html

我在这里有一个脚本，其中包含来自数据库的产品的 3 个 div 动画。它在第一次加载页面时动画效果很好，但我的问题是它在一分钟后动画效果不佳，并且每次我刷新页面时。

```
<html>
<script src='jquery.js'></script>
<script> 
    $(document).ready(function(){
    $("#Slide2").hide();
    $("#Slide3").hide();
});
var h = 1;
var x = setTimeout(show2, 3000);

function show1()
{
    h = 1;
    $("#Slide1").show();
    $("#Slide2").hide();
    $("#Slide3").hide();
    $("#Slide1").css("left", "-400px");
    $("#Slide1").animate({left:'-1px'});
    clearTimeout(x);
    x = setTimeout(show2, 3000);
}
function show2()
{
    if(h <= 2)
    {
        h = 2;
        $("#Slide2").show();
        $("#Slide1").hide();
        $("#Slide3").hide();
        $("#Slide2").css("right", "-400px");
        $("#Slide2").animate({right:'-1px'});
        clearTimeout(x);
        x = setTimeout(show3, 3000);
    }
    else
    {
        h = 2;
        $("#Slide2").show();
        $("#Slide1").hide();
        $("#Slide3").hide();
        $("#Slide2").css("left", "-400px");
        $("#Slide2").animate({left:'-1px'});
        clearTimeout(x);
        x = setTimeout(show3, 3000);
    }
}
function show3()
{

    h = 3;
    $("#Slide3").show();
    $("#Slide2").hide();
    $("#Slide1").hide();
    $("#Slide3").css("right", "-400px");
    $("#Slide3").animate({right:'-1px'});
    clearTimeout(x);
    x = setTimeout(show1, 3000);
}

</script>
<style>
    #Slide1 , #Slide2, #Slide3
    {
        width:530px;
        height:100px;
        position:relative;
        background:blue;
    }
    #container
    {
        width:500px;
        margin:auto;
        border:1pt solid black;
        overflow:hidden;
        height:auto;
    }
</style>
    <body>
        <div id='container'>
            <button onclick="check1()">1</button>
            <button onclick="check2()">2</button>
            <button onclick="check3()">3</button>
            <br></br>
            <div style='width:530px;margin:auto'>
            <div id='Slide1'>
                <div style='width:120px;height:100px;float:left;margin-left:10px;background:#ff0'></div>
                <div style='width:120px;height:100px;float:left;margin-left:10px;background:#ff0'></div>
                <div style='width:120px;height:100px;float:left;margin-left:10px;background:#ff0'></div>
                <div style='width:120px;height:100px;float:left;margin-left:10px;margin-right:10px;background:#ff0'></div>
            </div>
            <div id='Slide2' >
                <div style='width:120px;height:100px;float:left;margin-left:10px;background:green'></div>
                <div style='width:120px;height:100px;float:left;margin-left:10px;background:green'></div>
                <div style='width:120px;height:100px;float:left;margin-left:10px;background:green'></div>
                <div style='width:120px;height:100px;float:left;margin-left:10px;margin-right:10px;background:green'></div>
            </div>
            <div id='Slide3' >
                <div style='width:120px;height:100px;float:left;margin-left:10px;background:red'></div>
                <div style='width:120px;height:100px;float:left;margin-left:10px;background:red'></div>
                <div style='width:120px;height:100px;float:left;margin-left:10px;background:red'></div>
                <div style='width:120px;height:100px;float:left;margin-left:10px;margin-right:10px;background:red'></div>
            </div>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:43:00.950

You are not clearing your previous setInterval before starting new setInterval. Use clearInterval(x) before every setInterval in your show1(), show2() and show3() . hope it ll help.

You have redundant if else loop in your show2() . check it here (http://jsfiddle.net/cJ9FK/)

Hope it'll help, Thank you

# php - 尝试在 Zend Framework 2 中发送电子邮件时出现致命错误

> ID：14213496
> 
> 赞同：0
> 
> 时间：2013-01-08T11:01:10.320
> 
> 标签：php, zend-framework2

尝试在 ZF2 中发送电子邮件时出现以下致命错误： **致命错误：在 /var/www/zend/ZendFramework-minimal-2.0.6/ 中找不到类“Zend\Mail\Protocol\Exception\RuntimeException” library/Zend/Mail/Protocol/AbstractProtocol.php 在第 262 行**

触发这个的代码是：

```
$email = new \Zend\Mail\Message();
$email->setBody('This is a test body.');
$email->setFrom('sender@example.com', 'Sender Name');
$email->addTo('recipient@example.com', 'Recipient Name');
$email->setSubject('Test Subject');

$this->getServiceLocator()->get('Zend\Mail\Transport')->send( $email );

die("I am here"); 
```

Where`$this->getServiceLocator()->get('Zend\Mail\Transport')`返回 Zend\Mail\Transport\Smtp 的一个实例。

然而，这个问题似乎很奇怪，因为：

*   尽管有错误，但实际上总是发送电子邮件。
*   该错误似乎直到脚本之后才被触发。在上面的示例中，脚本输出“我在这里”，然后是致命错误。
*   这*似乎*与上述代码块出现的位置有关。例如，当块出现在某些控制器中而不是其他控制器中时会触发错误，尽管控制器之间的唯一区别是它们的名称。

如果有人能给我一个关于为什么会发生这种情况的线索，我将不胜感激。

# android - 如果给过去时间，警报管理器现在正在工作

> ID：14213504
> 
> 赞同：0
> 
> 时间：2013-01-08T11:01:37.277
> 
> 标签：android, scheduling, alarmmanager

我从时间选择器中抽出时间，当我设置调度时间做工作时，它会产生问题

```
 SharedPreferences prefs = getSharedPreferences("CONSTANT_FILE_NAME",Context.MODE_WORLD_WRITEABLE);
             SharedPreferences.Editor editor=   prefs.edit();
             editor.putLong("timepickerhour", timePicker.getCurrentHour());
                editor.putLong("timepickerminute", timePicker.getCurrentMinute());
                editor.putLong("milis", milis);
                editor.commit();

    SharedPreferences prfs = getSharedPreferences("CONSTANT_FILE_NAME",Context.MODE_PRIVATE);
                h =prfs.getLong("timepickerhour",0); 
                m =prfs.getLong("timepickerminute",0); 
                r =prfs.getLong("milis",0);
                AlarmManager am = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
                Intent intent1 = new Intent(Scheduling.this, Feedback.class);
                PendingIntent pendingIntent = PendingIntent.getBroadcast(Scheduling.this, 0,
                  intent1, PendingIntent.FLAG_UPDATE_CURRENT);
                Calendar calendar1 = Calendar.getInstance();
                calendar1.set(Calendar.HOUR_OF_DAY, (int) h);
                calendar1.set(Calendar.MINUTE, (int) m);
                am.setInexactRepeating(AlarmManager.RTC_WAKEUP,calendar1.getTimeInMillis(),
                        r, pendingIntent); 
```

当我给过去的时间时，我现在面临问题，就像现在时间是下午 4:25，如果我将时间设置为下午 2:25，那么调度任务会在现场运行......如果现在时间是 4，也会出现问题：下午 38 点，我将时间设置为凌晨 4:38，然后现在也运行代码

请帮帮我

提前谢谢

像这样的同样问题 [我如何在android中使用警报管理器调用过去的警报？](https://stackoverflow.com/questions/7361835/how-can-i-invoke-the-alarm-for-the-past-time-using-alarm-manager-in-android)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:22:27.523

```
 if (calendar1.before(cal_now)) {// if its in the past increment
                    calendar1.add(Calendar.DATE, 1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:06:39.373

只需添加这一行我认为你会得到正确的时间：---

```
Calendar calendar1 = Calendar.getInstance();
calendar1.setTimeInMillis(System.currentTimeMillis()); 
```

# c# - 从dxf转换为pdf的简单方法

> ID：14213506
> 
> 赞同：0
> 
> 时间：2013-01-08T11:01:40.870
> 
> 标签：c#, .net, pdf, converter, dxf

有没有一种简单的方法可以在不打开 AutoCad 的情况下从 dxf 转换为 pdf？我尝试通过在 c# 中使用 AutoCad (ObjectARX) 库来做到这一点，但没有结果。我试过的代码是这样的：

```
{

SaveFileDialog savedlg = new SaveFileDialog(); 
string st = savedlg.FileName;

int fileExtPos = st.LastIndexOf(".");
if (fileExtPos >= 0)
st = st.Substring(0, fileExtPos);

AcadDocument doc = AcApp.ActiveDocument;
AcadSelectionSet ss = doc.SelectionSets.Add("MySet");
ss.Select(AcSelect.acSelectionSetAll, null, null, null, null);
try
{
if (ss.Count > 0)
{ doc.Export(st, "pdf", ss);
MessageBox.Show("Saved....");
AcApp.Quit();
}
}
finally
{
ss.Delete();
}
} 
```

它是从这里提取的：[Convert from dwg to pdf](http://www.codeproject.com/Questions/103830/convert-from-dwg-to-pdf)

我不确定，但似乎这个特定的解决方案只有在您打开 AutoCad 时才有效（见该`AcadDocument doc = AcApp.ActiveDocument;`行）。

你知道比这更好的解决方案吗？或者你能看到这个解决方案的错误在哪里吗？解决方案可以是任何语言，所以如果您知道任何其他语言的解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-18T17:13:02.923

我想建议您使用 AutoCAD 2013。

我知道您不想打开**完整**的 AutoCAD，但说明在 2013 版本，它带有 *控制台*版本，功能齐全！

在此之前，我曾经制作过两个应用程序，一个在 DLL 中加载到 autocad 中，另一个用于启动/加载/处理每个文件。

使用启动速度非常快的 AutoCAD 控制台模式，您可以制作一个脚本来*打印 PDF*以针对每个文件执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T03:49:31.127

您可以使用第三方软件来执行此操作，只需搜索“dxf to pdf”，您会发现许多流行的 dxf to pdf 转换器，无需 AutoCAD。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-05T13:40:36.093

```
SaveFileDialog dlg = new SaveFileDialog();
dlg.Filter = "PDF (*.pdf)|*.pdf";
if (DialogResult.OK == dlg.ShowDialog())
{
    renderView.Renderer.Print(dlg.FileName);
} 
```

# jquery - 未捕获的 ReferenceError：$ 未定义（匿名函数）

> ID：14213509
> 
> 赞同：2
> 
> 时间：2013-01-08T11:01:51.500
> 
> 标签：jquery, xpages

我的 Xpages 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">
<script scr="js/jquery.min.js"></script>
<script scr="js/pdf.min.js"></script>
<script scr="js/jquery-pdfdoc.js"></script>
<link rel="stylesheet" href="css/jquery-pdfdoc.css"></link>
<div style="width : 800px height: 600px;">
<div id="mypdfdoc"></div>
    </div>
<xp:scriptBlock id="scriptBlock2">
    <xp:this.value><![CDATA[
        $('document').ready(function(){
        $('#mypdfdoc').PDFDoc( { source : '1.pdf' } );
    });
        ]]></xp:this.value>
</xp:scriptBlock>   
</xp:view> 
```

我在 Google chrome 中收到上述错误。这意味着什么 ？没有加载 jquery 还是这意味着别的什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-08T11:06:10.370

你的 javascript 标签是错误的：它必须是*src*而不是*scr*：

```
<script src="js/jquery.min.js"></script>
<script src="js/pdf.min.js"></script>
<script src="js/jquery-pdfdoc.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:07:07.593

这似乎您在脚本中遇到了一些冲突。试试这个，看看是否有帮助：

```
var jq = jquery.noConflict(); 
jq('document').ready(function($){
    $('#mypdfdoc').PDFDoc( { source : '1.pdf' } );
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T13:44:57.567

尚不能发表评论（根据要求的#），但[Sven Hasselbach](https://stackoverflow.com/users/1254944/sven-hasselbach)是 100% 正确的。我昨天得到了其中一个，并立即追踪了它。

当 jQuery 的句柄（使用 $，它也被用于 XPages 的 JavaScript 负载计算的不同语法中）找不到它正在寻找的东西时，它会被抛出，所以如果 jQuery 库无法获得句柄在一个字段上（比如我为一些更清洁的测试关闭了可见性的 EditBox），它会声称你在谈论 jive 并抱怨它。因此，由于您的库是用“scr=”而不是“src=”定义的，因此 jQuery 并没有参与处理的操作。

希望这是超越直接解决方案的一个很好的解释。

# r - 如何在python中使用rpy包调用ltm函数

> ID：14213517
> 
> 赞同：0
> 
> 时间：2013-01-08T10:24:04.607
> 
> 标签：r, python

我正在尝试以下代码：

```
from rpy import *
r.library("ltm")

dat= #some data frame or matrix
r.ltm(r('dat~z1')) 
```

> 即将出现的错误是--- RPy_RException：eval（expr，envir，enclos）中的错误：找不到对象'dat'

请告诉我使用 rpy 库调用[ltm函数的正确方法](http://cran.r-project.org/web/packages/ltm/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:50:12.837

我会尝试使用 rpy2 和类似以下内容的通用方法：

```
from rpy2.robjects import *
r("library('ltm')")
r.assign('r_var_name',py_var_name)
r("r_var_name<-as.desired.data.type(r_var_name)") 
```

然后在进一步的 r("blah") 语句中使用 'ltm' 包函数对 'r_var_name' 执行任何命令。

例如，获取 ltm 包示例之一的系数：

```
In [30]: py_obj = r("coef(ltm(Abortion ~ z1, control = list(GHk = 20, iter.em = 20)))")
In [32]: py_obj
Out[32]: 
<Matrix - Python:0x4db0290 / R:0x52f04f0>
[0.188998, -0.256378, -0.367623, ..., 4.542567, 5.840821, 3.243826] 
```

# objective-c - 触摸按钮时如何更改 UIButton 图像

> ID：14213520
> 
> 赞同：0
> 
> 时间：2013-01-08T11:02:33.530
> 
> 标签：objective-c, ios, uibutton, uicontrol

我试图在触摸按钮时更改 UIButton 图像。目前我它改变了，但只在突出显示的状态改变。我希望它改变并留在那里。我尝试 UIControlStateSelected 进行状态更改，但没有运气。

谢谢您的帮助

这是我的代码：

```
 // Create buttons for the sliding category menu.
    NSMutableArray* buttonArray = [NSMutableArray array];
    NSArray * myImages = [NSArray arrayWithObjects:@"category-cafe-unsel.png", @"category-food-unsel.png", @"category-clothing-unsel.png", @"category-health-unsel.png", @"category-tech-unsel_phone.png" , @"category-tech2-unsel.png", @"catefory-theatre-unsel.png", @"category-travel-unsel.png", nil];

    NSArray * myImagesSel = [NSArray arrayWithObjects:@"category-cafe-sel.png", @"category-food-sel.png", @"category-clothing-sel.png", @"category-health-sel.png", @"category-tech-sel_phone.png" , @"category-tech2-sel.png", @"catefory-theatre-sel.png", @"category-travel-sel.png", nil];

    // only create the amount of buttons based on the image array count
    for(int i = 0;i < [myImages count]; i++)
    {
        // Custom UIButton

        btn = [UIButton buttonWithType:UIButtonTypeCustom];

        [btn setFrame:CGRectMake(0.0f, 20.0f, 52.0f, 52.0f)];
        [btn setTitle:[NSString stringWithFormat:@"Button %d", i] forState:UIControlStateNormal];
        [btn setImage:[UIImage imageNamed:[myImages objectAtIndex:i]] forState:UIControlStateNormal];
        [btn setImage:[UIImage imageNamed:[myImagesSel objectAtIndex:i]] forState:UIControlStateHighlighted];

        NSLog(@"The button title is %@ ", btn.titleLabel.text);

        [btn addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
        [buttonArray addObject:btn]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:06:06.673

在您的 IBAction 方法中添加以下行：

```
 - (IBAction)change:(id)sender
 {
   UIButton *button = (UIButton *)sender;
   int tagOfButton = button.tag - 1;
   [button setImage:[UIImage imageNamed:[myImagesSel objectAtIndex:tagOfButton]] forState:UIControlStateNormal];
 } 
```

在 for 循环中添加一行，例如：

```
for(int i = 0;i < [myImages count]; i++)
{
    // other stuffs
    btn.tag  = i+1;
} 
```

**编辑：**

如果单击其他按钮时需要撤消先前的选择：

在您的 IBAction 方法中编写此循环。

```
for(int i = 0;i < [myImages count]; i++)
{
  UIButton *but = (UIButton *)[buttonArray objectAtIndex:i];
  if(but != button)
  {
       [btn setImage:[UIImage imageNamed:[myImages objectAtIndex:i]] forState:UIControlStateNormal];
  }
} 
```

或者只是将前一个按钮标签存储到一个变量中。并使用它来更改未完成的图像更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:40:49.357

```
[btn setTitle:@"I'm not selected" forState:UIControlStateNormal];
[btn setImage:[UIImage imageNamed:[myImages objectAtIndex:i]] forState:UIControlStateNormal];
[btn setTitle:@"I'm selected" forState:UIControlStateSelected];
[btn setImage:[UIImage imageNamed:[myImagesSel objectAtIndex:i]] forState:UIControlStateSelected];

[btn addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];

-(IBAction)buttonPressed:(id)sender {
  btn.selected = !btn.selected;
} 
```

# c++ - cv::findcontours 导致程序崩溃

> ID：14213526
> 
> 赞同：3
> 
> 时间：2013-01-08T11:03:05.693
> 
> 标签：c++, opencv

我正在尝试从我的框架中获取轮廓，这就是我所做的：

```
 cv::Mat frame,helpframe,yframe,frame32f;
 Videocapture cap(1); 
.......
while(waitkey()){
cv::Mat result = cv::Mat::zeros(height,width,CV_32FC3);
cap >> frame; // get a new frame from camera
frame.convertTo(frame32f,CV_32FC3);
for ( int w = 0; w< 10;w ++){
            result += frame32f;
        }   
         //Average the frame values.
        result *= (1.0/10);
        result /= 255.0f;
cvtColor(result,yframe,CV_RGB2YCrCb); // converting to Ycbcr///// the code work fine when I use frame instead of result 
extractChannel(yframe,helpframe,0); //extracting the Y channel
cv::minMaxLoc(helpframe,&minValue,&maxValue,&min,&max);
std::vector<std::vector<cv::Point>> contours;
cv::findContours(helpframe, contours,CV_RETR_LIST /*CV_RETR_EXTERNAL*/, CV_CHAIN_APPROX_SIMPLE); 
```

..................................................... ..

程序在 处崩溃`findcontours`，我调试时收到以下错误消息：

> > OpenCV 错误：未知函数中不支持的格式或格式组合（[Start]FindContours 仅支持 8uC1 和 32sC1 图像），文件......\src\openc v\modules\imgproc\src\contours.cpp，第 196 行

@Niko 感谢您的帮助我认为我必须将帮助框架转换为另一种类型。当我使用 **result**我得到 helpframe.type() => 5 和**frame** 我得到 0
我不知道这是什么意思？但我会尝试找到一种方法来转换帮助框架。

转换 helpframe 后： helpframe.convertTo(helpframe2,CV_8U)

我什么也没得到 helpframe2 is = 0 ?? 当我尝试使用 frame 而不是 resultframe 时，转换是否有效？

知道我应该如何更改帮助框架类型，因为我使用结果而不是框架？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T11:24:44.413

在识别轮廓之前，您需要将图像缩小为二值图像。这可以通过例如应用某种边缘检测算法或通过简单的阈值处理来完成：

```
// Binarize the image
cv::threshold(helpframe, helpframe, 50, 255, CV_THRESH_BINARY);

// Convert from 32F to 8U
cv::Mat helpframe2;
helpframe.convertTo(helpframe2, CV_8U);

cv::findContours(helpframe2, ...); 
```

# php - 在执行之前完成 php 脚本

> ID：14213531
> 
> 赞同：0
> 
> 时间：2013-01-08T11:03:24.783
> 
> 标签：php, mysql, ajax, stored-procedures

我正在制作一个多人智能手机游戏，其中我有 PHP 作为我的后端。当玩家移动时，信息被发送到我的 PHP 脚本，该脚本执行脚本，最后将一些信息发送回智能手机。当很多玩家同时使用 atr 时（现在我的工作负载为每毫秒 2-4 个请求），响应时间有点长……我有大约 3-4 个不同的 SELECT 查询和 4-5 个 UPDATE/INSERT在我的脚本中查询。

我一直在研究存储过程，并且正在考虑使用 AJAX，但不确定。我想要完成的是通过尽快在脚本中发回数据来缩短智能手机的响应时间，然后再执行其余的！

解决这个问题的最佳方法是什么？

提前感谢您的所有建议；-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:16:40.597

如果您使用 PHP 作为快速 CGI (php-fpm)，那么您可以尝试返回响应并在“后台”中继续脚本。

见函数 fastcgi_finish_request

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:08:00.180

Ajax 是一个不错的选择，因为它不会呈现所有页面并执行所有必要的查询。

然后，您检查您的查询：是否有所有索引？您是否避免多次加入？

所以，有两种方法：ajax，减少响应传输（使用信息很少的json很好）并优化您的数据库

# php - 使用 exec 在后台运行 php 脚本

> ID：14213535
> 
> 赞同：2
> 
> 时间：2013-01-08T11:03:37.297
> 
> 标签：php, exec

我有一个 php 文件来创建一个目录。我希望该 php 文件在后台执行。我写了 2 个文件，如下所示。

文件1.php

```
<?php
error_reporting(E_ALL); 
ini_set("display_errors", 1);
echo 'calling file1';
if(!is_dir('testdir')){
   mkdir('testdir');
}
?> 
```

索引.php

```
<?php
error_reporting(E_ALL); 
ini_set("display_errors", 1);
$i = '';
exec("php file1.php $i > test.txt &");
?> 
```

我希望通过浏览器执行 index.php 时创建一个目录。我认为我在编写 exec() 函数时犯了错误。谁能告诉我会怎么样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:55:40.963

因此，答案是使用 CURL，因为您不需要为此使用任何 PHP 二进制文件。

如果您不希望 file1.php 等到 file2.php 完成添加超时到 file1 上的 cUrl 请求：

```
$curlcontext,CURLOPT_CONNECTTIMEOUT_MS,100; 
```

现在，将它添加到 file2.php 很重要：

```
ignore_user_abort (true); 
```

这意味着 file2.php 在超时或 file1.php 后不会终止

[http://php.net/manual/en/function.ignore-user-abort.php](http://php.net/manual/en/function.ignore-user-abort.php) http://php.net/manual/en/function.curl-setopt.php

# php - php无法显示图片

> ID：14213537
> 
> 赞同：-2
> 
> 时间：2013-01-08T11:03:42.467
> 
> 标签：php, session, post, get

我正在创建一个函数，在插入用户名后将从数据库中检索用户显示图片。但我的代码遇到了一些问题。请帮我检查一下^^非常感谢。

```
<?php
include("connection.php");

$name = $_SESSION['login_username']; // login_username is test123, this is $_SESSION from another .php file
$_SESSION['name'] = $storename;

echo '<img src="display2.php"width="90" height="90"/>'; //this is how i display my picture
?> 
```

Display.php（不工作）

```
mysql_select_db($database) or die("Can not select the database: ".mysql_error());

$storename = $_SESSION['name']; // is there an error with my $_session statement?
$name = (string)$storename; 

if(!isset($name) || empty($name)){
     die("Please select your image!");

}else{

$query = mysql_query("SELECT * FROM customerdetail WHERE customer_username='$name'");
$num_row = mysql_fetch_array($query);
$content = $num_row['image'];

header('Content-type: image/jpg');
echo $content;

 }
} 
```

Display.php（工作）

```
 $storename = "test123"; // it worked if i store the id in string but not passing from another page.
    $name = (string)$storename;

if(!isset($name) || empty($name)){
     die("Please select your image!");
}else{

$query = mysql_query("SELECT * FROM customerdetail WHERE customer_username='$name'");
$row = mysql_fetch_array($query);
$content = $row['image'];

header('Content-type: image/jpg');
         echo $content;

}
?> 
```

谁能帮我弄清楚出了什么问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:07:11.723

`header('Content-type: image/jpg');`声明输出将是 jpg 图像，因为代码从`<img src="">`

无法将文本显示为图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:50:35.603

在您的 php 文件（两者）的最顶部，放置这行代码（`<?php`当然，在标记之后）：

```
session_start(); 
```

# c# - 在 C# Winforms 应用程序中嵌入 Windows XP 主题

> ID：14213538
> 
> 赞同：3
> 
> 时间：2013-01-08T11:03:45.087
> 
> 标签：c#, winforms, windows-xp, themes

我有一个旧版 C# Windows 窗体应用程序，其布局基于 Windows XP 默认主题设计。
由于需要将其作为 Citrix 应用程序分发，该应用程序现在看起来像一个经典主题应用程序，因为 Citrix 不鼓励使用主题系统服务。

所以，现在我不想再依赖 Themes 系统服务，而是保留 Windows XP 默认 Theme 设计，即使在 Windows 7 计算机上（Citrix 服务器是 Windows 2008 R2 计算机）。

有没有办法做到这一点，将 Windows XP 默认主题 DLL 嵌入到我的应用程序中？

# iphone - 从登录服务器验证后切换到新的视图控制器

> ID：14213539
> 
> 赞同：0
> 
> 时间：2013-01-08T11:03:47.177
> 
> 标签：iphone, ios, viewcontroller

当我使用登录屏幕并与服务器通信时，我正在尝试制作一个应用程序。
当我连接到服务器时，如果我的登录正确，则返回值 true；如果登录不正确，则返回 false。
然后，如果只有登录正确，我会尝试让应用程序切换到新的 UIViewController（按下登录按钮后）。
为此，我将服务器返回的值存储在一个字符串中，并将其与另一个值进行比较并实现 UIViewController 开关。
运行我的应用程序后出现错误

```
:Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 

Could not load NIB in bundle: 'NSBundle </Users/dimitriskoumouras/Library/Application Support/iPhone 

Simulator/6.0/Applications/9E756F03-38C1-453C-A26E-497AA7DDAECA/Administrator.app> (loaded)' 

with name 'FourthViewController.xib''!! 
```

发布一些代码：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData*)data {
    NSLog(@"EWYFPicOneViewController - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData*)data {");
    string = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
    NSLog(@" data == %@",string);

    NSString *compare = [NSString stringWithFormat:@"true"];

    if ( [compare isEqualToString:string])  {
        UIViewController* FourthViewController = [[UIViewController alloc] initWithNibName:@"FourthViewController.xib" bundle:[NSBundle mainBundle]];
        [self.view addSubview:FourthViewController.view];
    }
    else
        NSLog(@"validation not complete");
} 
```

有什么想法吗？？（我开始认为也许我的整个逻辑都是错误的）..

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:07:21.727

解析后试试这个...

```
 if ( [compare isEqualToString:string])  {

UIViewController* FourthViewController = [[UIViewController alloc] initWithNibName:@"FourthViewController" bundle:[NSBundle mainBundle]];
 [self.navigationController pushViewController:FourthViewController animated:YES]; 
```

}

也用这个....

```
 UIViewController* FourthViewController = [[UIViewController alloc] initWithNibName:@"FourthViewController" bundle:[NSBundle mainBundle]];
  [self.view addSubview:FourthViewController.view]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:07:31.430

> 运行我的应用程序后，我收到一个错误：由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法在包中加载 NIB：“NSBundle（已加载）”，名称为“FourthViewController.xib”

xib 文件是 xml nib 文件，它们被编译成 nib。所以你应该加载`FourthViewController.nib`（或简单地删除扩展）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T11:08:24.970

首先从该行中删除 xib，然后检查：initWithNibName:@"FourthViewController.xib"

# php - 从另一个创建新数组

> ID：14213540
> 
> 赞同：-1
> 
> 时间：2013-01-08T11:03:55.383
> 
> 标签：php, arrays

我有一个数组：

```
Array
(
    [users] => Array
        (
            [101] => Array
                (
                    [odata] => Array
                        (
                            [0] => 2
                            [1] => 1
                            [2] => 1
                            [3] => 1
                        )

                )

            [200] => Array
                (
                    [odata] => Array
                        (
                            [0] => 2
                            [1] => 1
                            [2] => 1
                            [3] => 0
                        )

                )

        )

    [rjad] => Array
        (
            [2] => Array
                (
                    [0] => red
                    [1] => blue
                    [2] => green
                )

        )

) 
```

在此数组中 [rjad] 键 = [odata] 键，并且 [odata] 值 = [rjad] 中的第二个键。

我想要的是用第二个数组中的用户 ID 值从旧数组创建新数组：

像这样：

```
[rjad] => Array
            (
                [2] => Array
                    (
                        [0] => red
                        [1] => Array
                                   (
                                     [blue] => Array
                                               (
                                                 [0] => 101
                                                 [1] => 200
                                                )
                        [2] => green
                    )

            ) 
```

挣扎了3个小时没有成功。任何如何获得它的想法都非常受欢迎。

图片确实解释了关系 [http://imageshack.us/photo/my-images/818/phparray.jpg/](http://imageshack.us/photo/my-images/818/phparray.jpg/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:35:28.453

我会认真重新考虑您的结构，但这是一个可行的（如果丑陋的）解决方案

```
foreach ($users as $userId => $user) {
    foreach ($user['odata'] as $key => $value) {
        if (isset($rjad[$key][$value])) {
            if (!is_array($rjad[$key][$value])) {
                $colour = $rjad[$key][$value];
                $rjad[$key][$value] = array();
                $rjad[$key][$value][$colour] = array();
            } else {
                reset($rjad[$key][$value]);
                $colour = key($rjad[$key][$value]);
            }
            $rjad[$key][$value][$colour][] = $userId;
        } 
    }
} 
```

工作演示-> [http://codepad.viper-7.com/IEcpvU](http://codepad.viper-7.com/IEcpvU)

根据评论，您可能需要一个单独的数组，这很容易解决

```
// copy the array and act on it instead of directly on $rjad
$result = $rjad;
foreach ($users as $userId => $user) {
    foreach ($user['odata'] as $key => $value) {
        if (isset($result[$key][$value])) {
            if (!is_array($result[$key][$value])) {
                $colour = $result[$key][$value];
                $result[$key][$value] = array();
                $result[$key][$value][$colour] = array();
            } else {
                reset($result[$key][$value]);
                $colour = key($result[$key][$value]);
            }
            $result[$key][$value][$colour][] = $userId;
        } 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:10:16.857

您的问题并不完全清楚 - rjad...blue 与其他阵列中的那些用户帐户之间的关系是什么？odata 数组中的项目 0 是默认颜色吗？

# canvas - 在画布图像上写一段超过2行的段落

> ID：14213542
> 
> 赞同：0
> 
> 时间：2013-01-08T11:04:01.003
> 
> 标签：canvas, textarea

**JS 小提琴： http:** [//jsfiddle.net/amaan/WxmQR/1/](http://jsfiddle.net/amaan/WxmQR/1/) 我想知道用户何时按下 Enter 如何将画布上的文本移至下一行。目前，它仅将所有内容写在一行中。谢谢你。

示例代码：

```
var tCtx = document.getElementById('textCanvas').getContext('2d'),
imageElem = document.getElementById('image');

document.getElementById('text').addEventListener('keyup', function (){
tCtx.canvas.width = tCtx.measureText(this.value).width;
tCtx.fillText(this.value, 0, 10);
imageElem.src = tCtx.canvas.toDataURL();    
}, false); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:59:33.570

你的问题是`fillText`不太关心`\n`. 因此，您需要更改`keyup`处理程序以检测文本中有多少换行符，然后通过移动 y 坐标来相应地呈现它。

因此，在`keyup`处理程序中，添加

```
...
var t = this.value.split('\n');
tCtx.height = t.length * 10;

var y = 10;
for(var i=0; i<t.length; i++, y+=10) {
    tCtx.fillText(t[i], 0, y);
}
... 
```

**[工作示例](http://jsfiddle.net/K34a7/)**。

# android - 如何在 android 中测试我的 dbmanager 类？

> ID：14213544
> 
> 赞同：1
> 
> 时间：2013-01-08T11:04:03.557
> 
> 标签：android, android-testing

在我的 android 应用程序中，我使用的是 ormlite。现在我想为 db helper 方法创建一些测试用例。我不知道这应该如何正常工作。在开始具体测试之前，需要在我的测试用例中创建数据库。例如，我想测试是否会按预期创建用户。为此，我有一个应该测试的 addUser 方法，但是怎么做呢？

目前我为我的 DBManager-Class 创建了一个带有 TestCase 的 TestProject。

这是我的 DBHelper 类

```
public class DBHelper extends OrmLiteSqliteOpenHelper{

    private static final String DATABASE_NAME = "pdixattach.db";
    private static final int DATABASE_VERSION = 4;
    private static final String TAG = DBHelper.class.getSimpleName();
    private static DBHelper _helperInstance;

    private Dao<Attachment, Integer> attachmentDao = null;
    private Dao<User, Integer> userDao = null;
    private Dao<Comment, Integer> commentDao = null;
    private Dao<Job, Integer> jobDao = null;
    private Dao<Target, Integer> targetDao = null;

    public DBHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db, ConnectionSource source) {
        Log.i(TAG, "onCreate");

        try{
            dropTables(source);
            TableUtils.createTable(source, Attachment.class);
            TableUtils.createTable(source, User.class);
            TableUtils.createTable(source, Comment.class);
            TableUtils.createTable(source, Target.class);
            TableUtils.createTable(source, Job.class);
            TableUtils.createTable(source, ConfigurationParameter.class);

        } catch (Exception e){
            Log.e(TAG, "error while creating tables "  + e.getMessage());
            throw new RuntimeException(e);
        }

    }

    @Override
    public void onUpgrade(final SQLiteDatabase db, final ConnectionSource connectionSource, final int oldVersion, final int newVersion) {
        Log.i(TAG, "onUpgrade");
        try {
            dropTables(connectionSource);
            onCreate(db, connectionSource);

        } catch (SQLException e) {
            Log.e(TAG, "error while upgrading tables " + e.getMessage());
            throw new RuntimeException(e);
        }

        // after we drop the old databases, we create the new ones
        onCreate(db, connectionSource);

    }

    private void dropTables(final ConnectionSource connectionSource)
            throws SQLException {

        TableUtils.dropTable(connectionSource, Attachment.class, true);
        TableUtils.dropTable(connectionSource, User.class, true);
        TableUtils.dropTable(connectionSource, Target.class, true);
        TableUtils.dropTable(connectionSource, Job.class, true);
        TableUtils.dropTable(connectionSource, Comment.class, true);
        TableUtils.dropTable(connectionSource, ConfigurationParameter.class, true);
    }

    public Dao<Attachment, Integer> getAttachmentDao() throws SQLException {
        if (this.attachmentDao == null) {
            this.attachmentDao = getDao(Attachment.class);
        }
        return this.attachmentDao;
    }

    public Dao<User, Integer> getUserDao() throws SQLException {
        if (this.userDao == null) {
            this.userDao = getDao(User.class);
        }
        return this.userDao;
    }

    public Dao<Comment, Integer> getCommentDao() throws SQLException {
        if (this.commentDao == null) {
            this.commentDao = getDao(Comment.class);
        }
        return this.commentDao;
    }

    public Dao<Target, Integer> getTargetDao() throws SQLException {
        if (this.targetDao == null) {
            this.targetDao = getDao(Target.class);
        }
        return this.targetDao;
    }

    public Dao<Job, Integer> getJobDao() throws SQLException {
        if (this.jobDao == null) {
            this.jobDao = getDao(Job.class);
        }
        return this.jobDao;
    }

    /**
     * Close the database connections and clear any cached DAOs.
     */
    @Override
    public void close() {
        super.close();
        _helperInstance = null;
        this.attachmentDao = null;
        this.commentDao = null;
        this.jobDao = null;
        this.targetDao = null;
        this.userDao = null;
    } 
```

}

和我想要测试的 DBManager，例如 storeUser 方法

```
public class DBManager {

private DBHelper helper;
private static DBManager uniqueInstance;
private static final String TAG = DBManager.class.getSimpleName();

public DBManager(Context context) {
    helper = new DBHelper(context);
}

public static void init(Context context) {
    if (uniqueInstance == null) {
        uniqueInstance = new DBManager(context);
    }
}

public static DBManager getInstance() {
    return uniqueInstance;
}

public boolean addUser(User u) {
    boolean retVal = false;
    if (u == null) {
        throw new IllegalArgumentException("user must not be null");
    }

    try {
        helper.getUserDao().create(u);
        retVal = true;
    } catch (SQLException e) {
        Log.e(TAG, "error while adding user to db " + e.getMessage());
    }

    return retVal;
}

public boolean addServiceEndpoint(String endpoint) {
    Log.d(TAG, "adding Service Endpoint " + endpoint);

    boolean retVal = false;
    if (endpoint == null) {
        throw new IllegalArgumentException("endpoint must not be null");
    }

    try {
        Target t = new Target(endpoint);
        int result = helper.getTargetDao().create(t);
        Log.d(TAG, "creating target entry resulted with value " + result);
        retVal = (result == 1);

    } catch (SQLException e) {
        Log.e(TAG,"error while adding target to db, with service endpoint " + endpoint + "error" + e.getMessage());

    }

    return retVal;

}

public List<Target> getAllTargets() {
    List<Target> retVal = new ArrayList<Target>();
    try {
        retVal = helper.getTargetDao().queryForAll();

    } catch (SQLException e) {
        Log.e(TAG,
                "error while retrieving service endpoints, error" + e.getMessage());
    }

    return retVal;
}

public User storeUser(String username, String hashedPw, Target target,
        boolean storeLogin) {

    User loggedInUser = null;
    int loginState = (storeLogin) ? 1 : 0;

    if (username == null || hashedPw == null || target == null) {
        throw new IllegalArgumentException(
                "cannot store login with empty/null values");
    }

    try {

        QueryBuilder<User, Integer> queryBuilder = helper.getUserDao().queryBuilder();
        Where<User, Integer> where = queryBuilder.where();
        where.eq(User.USERNAME, username)
                .and().eq(User.TARGET_ID, target.getServiceEndpoint());

        PreparedQuery<User> prepareStmt = queryBuilder.prepare();
        List<User> userList = helper.getUserDao().query(prepareStmt);

        if (userList.isEmpty()) {
            Log.d(TAG, "no user found with this name in the db, need to store it");
            User newUser = new User(username, hashedPw, target);
            newUser.setStored(loginState);
            addUser(newUser);

            userList = helper.getUserDao().query(prepareStmt);

            loggedInUser = userList.get(0);

        } else {
            Log.d(TAG, "found at least one user with username " + username  + " target " + target);
            for (User u : userList) {
                if (u.getPassword().equals(hashedPw)) {
                        Log.d(TAG, "password is equal to the one in db");
                } 
                else {
                    u.setPassword(hashedPw);
                }
                // setze diesen User als aktiv!
                u.setStatus(1);
                u.setStored(loginState);
                helper.getUserDao().update(u);
                loggedInUser = u;
            }
        }

    } catch (SQLException e) {
        Log.d(TAG, "error while storing login" + e.getMessage());
    }
    return loggedInUser;

}

public Comment addComment(Comment cmt) {
    Comment retVal = null;

    if (cmt == null) {
        throw new IllegalArgumentException("cannot create a comment entry in database without comment");
    }

    try {
        retVal = helper.getCommentDao().createIfNotExists(cmt);
    } catch (SQLException e) {
        e.printStackTrace();
    }

    return retVal;

}

public Attachment addAttachment(Attachment att) {

    if (att == null) {
        throw new IllegalArgumentException(
                "cannot create attachment entry in database without attachment");
    }

    Attachment dbAttach = null;
    try {
        dbAttach = helper.getAttachmentDao().createIfNotExists(att);
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return dbAttach;
}

public Job addJob(Job job) {
    Job dbJob = null;

    if (job == null) {
        throw new IllegalArgumentException(
                "no job given, cannot create an entry");
    }

    try {
        QueryBuilder<Job, Integer> queryBuilder = helper.getJobDao()
                .queryBuilder();
        Where<Job, Integer> where = queryBuilder.where();
        if (job.getInstanceId() == null)
            where.isNull(Job.INSTANCE_ID);
        else
            where.eq(Job.INSTANCE_ID, job.getInstanceId());

        where.and().eq(Job.COMMENT_ID, job.getComment().getComment()).and()
                    .eq(Job.ATTACH_ID, job.getAtach().getAttUri()).and()
                    .eq(Job.STATUS, "0").and()
                    .eq(Job.TARGET_ID, job.getTarget().getServiceEndpoint());

        PreparedQuery<Job> prepareStmt = queryBuilder.prepare();
        Log.d(TAG, "querystring is " + prepareStmt.getStatement());
        List<Job> jobList = helper.getJobDao().query(prepareStmt);

        if (jobList.isEmpty()) {
            Log.d(TAG, "no job with these parameters given, need to create one");

            Log.d(TAG, "job id is " + job.getId());

            dbJob = helper.getJobDao().createIfNotExists(job);
            Log.d(TAG, "dbJob id is " + dbJob.getId());

        } else {
            Log.d(TAG,
                    "job does already exists for this parameters, wont create new");
            dbJob = jobList.get(0);
            // hier comment und status usw updaten
        }
    } catch (SQLException e) {
        Log.d(TAG, "Exception during adding a job to db: " + e.getMessage());
    }

    return dbJob;

}

public void attachInstanceIdToJob(String instanceId, long jobId) {
    Log.d(TAG, "attaching instance id " + instanceId + " to job with id " + jobId);

    try {
        Job job = helper.getJobDao().queryForId((int) jobId);
        if (job != null){
            job.setInstanceId(instanceId);
            helper.getJobDao().update(job);
        }

    } catch (NumberFormatException e) {

        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SQLException e) {
            Log.d(TAG, "error while attaching instance id " + instanceId + " to job with id " + jobId);
    }

}

public List<Job> getAllOpenJobs() {
    List<Job> jobList = null;

    QueryBuilder<Job, Integer> queryBuilder;
    try {
        queryBuilder = helper.getJobDao()
                .queryBuilder();
    Where<Job, Integer> where = queryBuilder.where();
        where.eq(Job.STATUS, JobStatusEnum.OPEN.getState())
        .or().eq(Job.STATUS, JobStatusEnum.RETRY.getState());
        ;

    PreparedQuery<Job> prepareStmt = queryBuilder.prepare();
    Log.d(TAG, "querystring is " + prepareStmt.getStatement());
    jobList = helper.getJobDao().query(prepareStmt);

    } catch (SQLException e) {
        Log.d(TAG, "error while retrieving open jobs from db" + e.getMessage());
    }
    return jobList;
}

public void getDataForJob(Job j, User u, Attachment att, Target target, Comment comment) {
    try {
        if (j != null){
            helper.getUserDao().refresh(j.getUser());
            helper.getAttachmentDao().refresh(j.getAtach());
            helper.getTargetDao().refresh(j.getTarget());
            helper.getCommentDao().refresh(j.getComment());
        }
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public User getCurrentStoredUser(){

    try {
        List<User> users = helper.getUserDao().queryForAll();
        for (User u: users){
            if (u.getStored() == 1){
                return u;
            }
        }

    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return null;
}

public void updateJob(Job j) {

    if (j != null){
        try {
            helper.getJobDao().update(j);
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

}
/**
 * The status of the given user will be configured to stored. All others will be set to unstored
 * @param loggedInUser
 */
public void setUserStatusToStored(User loggedInUser) {
    List<User> listOfUsers;
    try {
        listOfUsers = helper.getUserDao().queryForAll();

        for (User u: listOfUsers){
            if (u.equals(loggedInUser)){
                u.setStatus(UserStatusEnum.STORED.getState());
            }
            else{
                u.setStatus(UserStatusEnum.UNSTORED.getState());
            }

            helper.getUserDao().update(u);
        }
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }           
}
} 
```

和我的TestClass

```
public class DBManagerTest
    extends TestCase
{

protected void setUp() throws Exception {
    super.setUp();
}

protected void tearDown() throws Exception {
    super.tearDown();
}

public void testDBManager() {
    fail( "Not yet implemented" );
}
} 
```

有人可以帮我解决问题，我想一旦第一个测试运行，其他测试就应该清楚了。谢谢

# android - Android中的滚动区域

> ID：14213545
> 
> 赞同：0
> 
> 时间：2013-01-08T11:04:06.317
> 
> 标签：android, xml, layout

我有这种风格的布局

![在此处输入图像描述](../Images/0ef4c19976649e6871527e3f4de40909.png) ![在此处输入图像描述](../Images/a74a4626dd2881fa42afde66a9e8cc2d.png)

在这个设计中，所有箭头在红色方块中滑动我在橙色方块中有列表视图我有滑块

# 如何用红色箭头滚动我的布局显示

# 最好的 xml 设计

滚动列表视图时与此相同或隐藏滑块？

![在此处输入图像描述](../Images/d962e7cab42176024c0ca608b3dcc102.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:07:45.940

如果您想滚动整个屏幕，您可以`ScrollView`在所有内容周围放置 a，其中包括 the`Slider`和`ListView`部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:25:23.590

```
listView1.setOnTouchListener(new OnTouchListener() {

    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
        if (event.getAction() == MotionEvent.ACTION_MOVE) {
            listView1.scrollBy(0, 1);
        }
        return false;
    }
}); 
```

# magento-1.7 - Magento 在产品平面数据重新索引时出错

> ID：14213546
> 
> 赞同：2
> 
> 时间：2013-01-08T11:04:08.830
> 
> 标签：magento-1.7, magento

收到此错误

使用 ssh 命令重新索引时

```
exception 'PDOException' with message 'SQLSTATE[HY000]: General error: 1005 Can't create table './admin_magento16/catalog_product_flat_4.frm' (errno: 150)' in /home/magesite/public_html/store/lib/Zend/Db/Statement/Pdo.php:228 
```

在我的 magento 数据库中没有 catalog_product_flat_4 表存在

我应该为此做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:44:07.373

您在重新索引之前清理了 Magento 缓存吗？我可以建议您使用原始[Magento 数据库修复工具检查您的数据库](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/db-repair-tool)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:28:28.987

能够与我们的团队一起解决这个问题

第一次我检查了数据库

检查 core_store 表有 4 个商店创建

还错过了 catalog_product_flat_2 、 3 、 4 表

我检查了我的管理面板，只有 1 家商店

所以从管理面板创建站点添加添加 catalog_product_flat_2 , 3 , 4 然后重新索引工作正常

干杯:)

# silverlight - Silverlight：在 ItemsControl 内的 DataGrid 标头中绑定按钮命令

> ID：14213547
> 
> 赞同：1
> 
> 时间：2013-01-08T11:04:09.423
> 
> 标签：silverlight, binding, datagrid, itemscontrol

我在将按钮命令绑定到“外部”数据上下文的属性时遇到了一些问题。

下图显示了我的布局。我正在尝试将“清除”按钮（红色轮廓）的 CommandParameter 绑定到 LocationId。ItemsControl 重复一个 ObservableCollection 位置（参见下面的位置定义）。

清除按钮基本上是试图删除附加到位置的地址，以清除 DataGrid。为此，我需要将 LocationId 传递给 ViewModel。

实际命令被完美触发，但 CommandParameter 上的绑定不太正确。

![页面布局](../Images/1a47e42ffb9ef47731b2f943117ba03f.png)

以下是位置和地址的基础类：

```
class Location 
{   
    int Id;
    ObservableCollection<Address> Addresses;
}

class Address
{
    string AddressText;
} 
```

这里是用三种替代尝试和错误消息注释的 XAML：

```
<ItemsControl ItemsSource="{Binding Locations, Mode=TwoWay}">
  <ItemsControl.ItemsPanel>
    <ItemsPanelTemplate>
      <StackPanel VerticalAlignment="Stretch" />
    </ItemsPanelTemplate>
  </ItemsControl.ItemsPanel>
  <ItemsControl.ItemTemplate>
    <DataTemplate>
      <TextBlock Text="{Binding Id}"/>
      <sdk:DataGrid x:Name="ResponseDataGrid" ItemsSource="{Binding Addresses}">
        <sdk:DataGrid.Columns>
          <sdk:DataGridTextColumn Header="Response" Width="*" Binding="{Binding AddressText}"/>
          <sdk:DataGridTemplateColumn Width="100">
            <sdk:DataGridTemplateColumn.HeaderStyle>
              <Style TargetType="sdk:DataGridColumnHeader">
                <Setter Property="ContentTemplate">
                  <Setter.Value>
                    <DataTemplate>
                      <Button Content="Clear" 
                              Command="{Binding DataContext.ClearLocationCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}" 
                              CommandParameter="{Binding Id, RelativeSource={RelativeSource AncestorType=ItemsControl}}"/>
                      <!--System.Windows.Data Error: BindingExpression path error: 'Id' property not found on 'System.Windows.Controls.ItemsControl' -->

                      <!--CommandParameter="{Binding ItemsSource.Id, RelativeSource={RelativeSource AncestorType=ItemsControl}}"/>-->
                      <!--System.Windows.Data Error: BindingExpression path error: 'Id' property not found on 'System.Collections.ObjectModel.ObservableCollection`1[UI.Location]' -->

                      <!--This gives me the ID but uses a specific index so only works for the first repeated Location-->
                      <!--CommandParameter="{Binding ItemsSource[0].Id, RelativeSource={RelativeSource AncestorType=ItemsControl}}"/>-->
                    </DataTemplate>
                  </Setter.Value>
                </Setter>
              </Style>
            </sdk:DataGridTemplateColumn.HeaderStyle>
            <sdk:DataGridTemplateColumn.CellTemplate>
              <DataTemplate>
                <Button Content="Accept">
                  <i:Interaction.Triggers>
                    <i:EventTrigger EventName="Click">
                      <i:InvokeCommandAction 
                        Command="{Binding DataContext.SelectedAddressCommand , RelativeSource={RelativeSource AncestorType=ItemsControl}}" 
                        CommandParameter="{Binding SelectedItem, RelativeSource={RelativeSource AncestorType=sdk:DataGrid}}"/>
                    </i:EventTrigger>
                  </i:Interaction.Triggers>
                </Button>
              </DataTemplate>
            </sdk:DataGridTemplateColumn.CellTemplate>
          </sdk:DataGridTemplateColumn>
        </sdk:DataGrid.Columns>
      </sdk:DataGrid>
    </DataTemplate>
  </ItemsControl.ItemTemplate>
</ItemsControl> 
```

从错误来看，按钮似乎看不到重复的位置对象，它可以看到位置的集合或特定的索引位置，但看不到我需要的重复生成的位置！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:38:34.173

如果将`ClearLocationCommand`属性移动到`Location`类中，请记住更改以下绑定：

```
<Button Content="Clear" 
    Command="{Binding DataContext.ClearLocationCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}" 
    CommandParameter="{Binding Id, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
    /> 
```

至：

```
<Button Content="Clear" 
    Command="{Binding ClearLocationCommand}" 
    CommandParameter="{Binding Id}"
    /> 
```

因为每个外部`Location`对象现在都有自己的**清除**命令，并且您已经在`DataContext`该项目行中正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:00:46.643

所以你有一个 ViewModel`ObservableCollection<Location>`和点击清除清除`ObservableCollection<Address>`指定位置，对吗？

为什么不直接将 Clear 命令放入 Location 类中？我不知道此命令触发的逻辑，但这样做您将能够访问正确的位置 ID 属性。

编辑：这是我的示例工作：

**课程**

```
public class Location
{
    public Location(int id, IEnumerable<Address> addresses)
    {
        this.Id = id;
        this.Addresses =new ObservableCollection<Address>(addresses);
        this.ClearLocationCommand = new RelayCommand<int>(e => MessageBox.Show(string.Format("Clear command called on Location {0}", this.Id)));
    }

    public int Id { get; set; }
    public ObservableCollection<Address> Addresses { get; set; }

    public ICommand ClearLocationCommand { get; set; }
}

public class Address
{
    public Address(string text)
    {
        this.AddressText = text;
    }

    public string AddressText { get; set; }
}

public class MainWindowViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    public MainWindowViewModel()
    {
        Locations = new ObservableCollection<Location>(new []
            {
                new Location(1, new [] { new Address("A1") }), 
                new Location(2, new [] { new Address("A2"), new Address("A3"), }), 
            });
    }

    public ObservableCollection<Location> Locations { get; set; }

    private void OnPropertyChanged(string porpertyName)
    {
        var e = this.PropertyChanged;
        if (e != null)
        {
            e(this, new PropertyChangedEventArgs(porpertyName));
        }
    }
} 
```

**XAML**

```
<Window x:Class="TestBindingButtons.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:TestBindingButtons="clr-namespace:TestBindingButtons" Title="MainWindow" Height="350" Width="525">
<Window.DataContext>
    <TestBindingButtons:MainWindowViewModel />
</Window.DataContext>
<Grid>
    <ItemsControl ItemsSource="{Binding Locations, Mode=TwoWay}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel VerticalAlignment="Stretch" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <StackPanel>
                    <TextBlock Text="{Binding Id}"/>
                    <DataGrid x:Name="ResponseDataGrid" ItemsSource="{Binding Addresses}">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Response" Width="*" Binding="{Binding AddressText}"/>
                            <DataGridTemplateColumn Width="100">
                                <DataGridTemplateColumn.HeaderStyle>
                                    <Style TargetType="DataGridColumnHeader">
                                        <Setter Property="ContentTemplate">
                                            <Setter.Value>
                                                <DataTemplate>
                                                    <Button Content="Clear"
                                                            Command="{Binding DataContext.ClearLocationCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                                            />
                                                </DataTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </DataGridTemplateColumn.HeaderStyle>
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Button Content="Accept">

                                        </Button>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </StackPanel>                    
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Grid>
</Window> 
```

PD：我没有发布 RelayCommand 的实现，使用你自己的。我没有使用你的“sdk”框架，只是普通的微软东西。

# video - 如何使用 ffmpeg 创建带有图像和不同时间间隔的视频

> ID：14213550
> 
> 赞同：2
> 
> 时间：2013-01-08T11:04:22.857
> 
> 标签：video, ffmpeg, slideshow, video-processing

似乎重复： [如何创建带有图像和不同时间间隔的视频？](https://stackoverflow.com/questions/10546755/how-to-create-video-with-images-and-different-time-interval) 但它不是重复的，因为上述问题的作者已经构筑了错误的标题，因为图像以固定的时间间隔显示。

我想做的是这个

1.  图 1：5 秒

2.  图 2-5：10 秒

3.  图 6：4 秒

请让我知道如何使用 ffmpeg 实现这一目标。我尝试谷歌搜索，但没有发现任何类似的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T13:07:24.850

您是否可以选择制作具有特定长度的单独视频并最终将它们组合在一起？`ffmpeg -i "concat:file1.yuv|file2.yuv" -f <format> -c copy out.xxx`

# php - Joomla 用户配置文件更新无法正常工作

> ID：14213552
> 
> 赞同：0
> 
> 时间：2013-01-08T11:04:32.277
> 
> 标签：php, mysql, joomla, joomla2.5

在我的本地网络服务器上一切正常。但是在实时服务器上它不起作用。该网站是1：1相同的。

**我的问题是：**当我单击保存配置文件时，它会在我的数据库中存储到表中：`user_profiles`以下条目：

`user_id key value ordering`
`78 profile.address1 "" 1`
`78 profile.address2 "" 2`
`78 profile.city "" 3`
`78 profile.region "" 4`
`78 profile.country "" 5`
`78 profile.postal_code "" 6`
`78 profile.phone "" 7`
`78 profile.website "" 8`
`78 profile.favoritebook "" 9`
`78 profile.aboutme "" 10`
`78 profile.dob "" 11`

这里的问题是，这`profile.dob ""`不是一个有效的日期字符串，这会产生另一个错误，当然，然后写在你的个人资料中看起来不太好`""`。在我的本地服务器上，如果用户没有输入任何值，它也不会向表中写入任何内容`user_profiles`。

我试图找到负责所有这些的代码，但似乎几乎不可能找到正确的位置。

我怎样才能摆脱这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:15:47.940

#__user_profiles 中的 profile_value 列是 varchar，因此它不能以 MySQL 格式存储日期。

根据您显示该信息的方式，您需要

如果默认情况下该字段为空（“”），Joomla 应在个人资料页面中显示消息“未输入信息”。

# jquery - 如何处理多个资产主机和 tinymce-rails？

> ID：14213557
> 
> 赞同：1
> 
> 时间：2013-01-08T11:04:46.737
> 
> 标签：jquery, ruby-on-rails, tinymce, asset-pipeline

我在我的应用程序中使用 tinymce。 [https://github.com/sophlenz/tinymce-rails](https://github.com/spohlenz/tinymce-rails)

我需要它`application.js`

```
//= require tinymce-jquery 
```

我最近将我的资产移到了几个主机名之外。

```
config.serve_static_assets = false
config.assets.compile = true
config.assets.digest = true
config.action_controller.asset_host = "http://assets%d.somehost.com"
config.assets.compress = false
config.assets.debug = false 
```

之后我的tinmce因错误而崩溃`Domains, protocols and ports must match.`

我想我必须在文件顶部覆盖`tiny_mce_popup.js`：

```
document.domain = 'somehost.com'; 
```

但是，既然这个文件在 gem 中，那么最好的方法是什么？

# lua - lua5.2 的错误：检测到多个 Lua VM

> ID：14213559
> 
> 赞同：4
> 
> 时间：2013-01-08T11:04:50.770
> 
> 标签：lua

我最近使用5.2进行学习，我想这样尝试：

第一步，为lua构建ac模块：

```
#include "lua.h"
#include "lauxlib.h"
#include "lualib.h"
#include <stdlib.h>

static int add(lua_State *L) {
    int x = luaL_checkint(L, -2);
    int y = luaL_checkint(L, -1);
    lua_pushinteger(L, x + y);
    return 1;
}

static const struct luaL_Reg reg_lib[] = {
    {"add", add}
};

int luaopen_tool(lua_State *L) {
    luaL_newlib(L, reg_lib);
    lua_setglobal(L, "tool");
    return 0;
} 
```

我用liblua.a编译并链接它，我确信它在像“require（”tool“）tool.add（1,2）”这样的lua脚本中运行良好

第 2 步，我编写了另一个 C 程序，它希望在第 1 步中需要我的 c 模块，如下所示：

```
#include "lua.h"
#include "lauxlib.h"
#include "lualib.h"
#include <stdlib.h>

int main(int argc, char* const argv[]) {
    lua_State *L = luaL_newstate(); 
    luaL_requiref(L, "base", luaopen_base, 1);
    luaL_requiref(L, "package", luaopen_package, 1);
    lua_getglobal(L, "require");
    if (!lua_isfunction(L, -1)) {
        printf("require not found\n");
        return 2;
    }
    lua_pushstring(L, "tool");
    if (lua_pcall(L, 1, 1, 0) != LUA_OK) {
        printf("require_fail=%s\n", lua_tostring(L, -1));
        return 3;
    }
    lua_getfield(L, -1, "add");
    lua_pushinteger(L, 2);
    lua_pushinteger(L, 3);
    lua_pcall(L, 2, 1, 0);
    int n = luaL_checkint(L, -1);
    printf("n=%d\n", n);
    return 0;
} 
```

我也编译并与 liblua.a 链接，但是当我运行它时出现错误：“require_fail=检测到多个 Lua VM”

有人的博客说，在lua5.2中，你应该动态链接c模块和c宿主程序，而不是静态链接。

有没有人有同样的问题，或者我的代码有问题，谢谢。

注意：

通过使用-Wl，-E编译主程序已经解决了这个问题，非常感谢您的帮助^^。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T19:51:29.230

当您从中创建 .so 时，不要将您的 C 模块与 liblua.a 链接。例如，请参阅我的 Lua 库页面：[http](http://www.tecgraf.puc-rio.br/~lhf/ftp/lua/) ://www.tecgraf.puc-rio.br/~lhf/ftp/lua/ 。您可以将 liblua.a 静态链接到主程序，但您必须通过`-Wl,-E`在链接时添加来导出其符号。这就是 Lua 解释器在 Linux 中的构建方式。

# c++ - 存储多边形汤

> ID：14213561
> 
> 赞同：1
> 
> 时间：2013-01-08T11:04:58.467
> 
> 标签：c++, data-structures, 3d, gis, mesh

我需要在 3D 系统中存储大型网格信息。输入以简单的方式提供为多边形汤（确切的格式是[三角形不规则网络](http://www.ems-i.com/wmshelp/Files/File_Formats/TIN_Files.htm)）

如果这样的汤中有数百万或数千万个顶点，那么处理这些数据的相对有效的方法是什么？使用堆分配结构是不好的，因为与分配更多堆栈的老式矩阵相比，它可能会阻碍流动性并改变缓存一致性。将数据存储在数组中通常是最好的做法，但就查询有用信息而言，这可能非常乏味，而且可能不值得。

因此，如果我使用半边或翼边等专用结构来存储拓扑信息，这种设计会改变几何建模和多分辨率方法中一些常见操作的速度吗？（更重要的是，我想将小波分析、边缘塌陷、细分以及所有这些“魔法”应用于大网格 - 小波与矩阵一起工作，但如果没有一些特殊的数据结构，这些矩阵并不容易构建）。

# c - 精确地将 float 32 转换为 unsigned short 或 unsigned char

> ID：14213566
> 
> 赞同：1
> 
> 时间：2013-01-08T11:05:07.363
> 
> 标签：c, casting, char, unsigned, short

首先很抱歉，如果这是重复的，我找不到任何主题来回答我的问题。

我正在编写一个小程序，用于将 32 位浮点值转换为 short int（16 位）和 unsigned char（8 位）值。这是用于 HDR 图像的目的。

从[这里](http://lol.zoy.org/blog/2011/3/20/understanding-fast-float-integer-conversions)我可以获得以下功能（没有钳位）：

```
static inline uint8_t u8fromfloat(float x)
{
    return (int)(x * 255.0f);
} 
```

我想以同样的方式我们可以通过乘以得到short int`(pow( 2,16 ) -1)`

但后来我最终想到了有序抖动，尤其是拜耳抖动。要转换为 uint8_t 我想我可以使用 4x4 矩阵和 8x8 矩阵来表示无符号短。

我还想到了一个查找表来加速这个过程，这样：

```
uint16_t LUT[0x10000] // 2¹⁶ values contained 
```

并存储对应于浮点数的 2^16 个无符号短值。由于 unsigned short ↔ unsigned int 之间的隐式转换，同一个表也可以用于 uint8_t

但是这样的查找表在内存中不是很大吗？还有一个人怎么会填满这样的桌子？！

现在我很困惑，你认为什么是最好的？

在 uwind 回答后编辑：现在假设我还想同时进行基本的色彩空间转换，即在转换为 U8/U16 之前，进行色彩空间转换（浮点数），然后将其缩小为 U8/U16 . 在那种情况下使用LUT不是更有效吗？是的，我仍然有索引 LUT 的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:12:38.737

在我看来，查找表无济于事，因为要对其进行索引，您需要将浮点数转换为某种整数类型。捕获 22。

该表需要 0x10000 * sizeof (uint16_t) 字节，即 128 KB。以现代标准衡量并不多，但另一方面缓存是宝贵的。但是，正如我所说，该表并没有为解决方案添加太多内容，因为您需要将浮点数转换为整数才能进行索引。

您可以创建一个由浮点数的原始位索引的表，重新解释为整数，但这必须是 32 位，这会变得非常大（8 GB 左右）。

进行您概述的直接运行时转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:16:53.483

只需坚持乘法 - 它会正常工作。

几乎所有现代 CPU 都具有适用于这些东西的矢量指令（SSE、AVX、...），因此您可能会考虑为此进行编程。或者，如果可能的话，使用自动矢量化代码的编译器（英特尔 C 和 GCC）。即使在查找表是一种可能的解决方案的情况下，这通常也会更快，因为您不会受到内存延迟的影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T01:08:02.347

首先，需要注意的是，`float`有24位的精度，不可能适应16位`int`甚至8位。其次，float的范围要大得多，不能存储在任何`int`或`long long int`

所以你的问题标题实际上是**不正确**的，无法将任何浮点数精确转换为短或字符。您希望将0 到 1 之间的浮点值***映射****到 8 位或 16 位 int*范围。

* * *

对于您上面使用的代码，它可以正常工作。然而**，值 255 极不可能被返回**，因为它需要**恰好 1.0 作为输入**，否则诸如 254.99999 之类的值最终将被截断为 254。您应该将值四舍五入

```
return (int)(x * 255.0f + .5f); 
```

或者更好，使用链接中提供的代码以获得更**平衡的分布**

```
static inline uint8_t u8fromfloat_trick(float x)
{
    union { float f; uint32_t i; } u;
    u.f = 32768.0f + x * (255.0f / 256.0f);
    return (uint8_t)u.i;
} 
```

使用 LUT 不会更快，因为**16 位值的表太大而无法放入缓存**中，实际上可能会大大降低您的性能。上面的代码片段只需要 2 条浮点指令，或者只需要 1 条[FMA](https://en.wikipedia.org/wiki/FMA_instruction_set)指令。SIMD 将进一步提高性能 4-32 倍（或更多），因此 LUT 方法的性能很容易被超越，因为并行化表查找要困难得多

# javascript - 舍入 autoSumForm 值

> ID：14213574
> 
> 赞同：0
> 
> 时间：2013-01-08T11:05:44.430
> 
> 标签：javascript

我已经搜索了几天，试图找到解决方案。我查看了 php.net 信息，但它似乎与我下面的代码格式不同。请有人能告诉我如何四舍五入这种计算。谢谢

```
function startCalc(){
  interval = setInterval("calc()",1);
}
function calc(){
  one = document.autoSumForm.firstBox.value;
  two = document.autoSumForm.secondBox.value = ((one*20) + (110*20))/17;
three = document.autoSumForm.thirdBox.value;
  four = document.autoSumForm.fourthBox.value = ((three*20) + (150*20))/17;
five = document.autoSumForm.fifthBox.value;
  six = document.autoSumForm.sixthBox.value = ((five*20) + (250*20))/17;
  seven = document.autoSumForm.seventhBox.value = (four*1) - (two*1);
eight = document.autoSumForm.eigthBox.value = (six*1) - (two*1);
}

function stopCalc(){
  clearInterval(interval);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:27:39.563

这可能是因为您的代码是 Javascript，而不是 PHP。此外，这也不是跨平台的 Javascript。

你最好做这样的事情：

```
document.forms['autoSumForm'].elements['firstBox'].value 
```

您可以使用像 jQuery 这样的库来使它更容易和更具可读性，但是如果它变得如此复杂，那么像 jQuery 这样的大型库可能会过大。

# ruby - Ruby 方法链接 - 带有替换的“点击”

> ID：14213576
> 
> 赞同：3
> 
> 时间：2013-01-08T11:05:48.177
> 
> 标签：ruby, function, functional-programming

> **可能重复：**
> [红宝石中是否有“管道”等价物？](https://stackoverflow.com/questions/12848967/is-there-a-pipe-equivalent-in-ruby)

我正在查看`tap`Ruby 中的方法 - 但不幸的是，从传递的块返回的对象没有传递。我使用什么方法来传递对象？

这是我正在尝试（不成功）做的事情：

```
obj.tap{ |o| first_transform(o) }.tap{ |o| second_transform(o)} 
```

当然，这等价于`second_transform(first_transform(o))`。我只是问如何以第一种方式做到这一点。

这样做对于列表来说是微不足道的：

```
list.map{ |item| first_transform(item) }.map{ |item| second_transform(item)} 
```

为什么对象不那么容易？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T11:35:10.513

```
class Object
  def as
    yield self
  end
end 
```

有了这个，你可以做`[1,2,3].as{|l| l << 4}.as{|l| l << 5}`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T11:39:14.473

您还可以考虑创建项目类的实例方法（当然还返回转换后的项目）`#first_transform`。`#second_transform`

这些方法定义应如下所示：

```
class ItemClass
  # If you want your method to modify the object you should
  # add a bang at the end of the method name: first_transform!
  def first_transform
    # ... Manipulate the item (self) then return it
    transformed_item
  end
end 
```

这样，您可以简单地以这种方式链接方法调用：

```
list.map {|item| item.first_transform.second_transform } 
```

以我的拙见，它甚至读起来更好；）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-08T11:42:00.683

简单的答案是`tap`没有做你认为它做的事情。

`tap`在一个对象上调用并且总是返回同一个对象。

作为`tap`s 使用的简单示例

```
"foo".tap do |foo|
  bar(foo)
end 
```

这仍然返回`"foo"`

在您的示例中，您有一个对象，并且您希望连续对其应用两个函数。

```
second_transform(first_transform(obj)) 
```

* * *

更新：

所以我想我会问你为什么要以这种方式链接。

```
obj.do{|o| first_transform(o)}.do{|o| second_transform(o)} 
```

这真的比

```
second_transform(first_transform(obj)) 
```

举个我经常用的例子

```
markdown(truncate(@post.content)) 
```

或者

```
truncated_post = truncate(@post.content)
markdown(truncated_post) 
```

我想这取决于你的性质`transform`

# jquery - 当触发我的链接的点击事件时，该事件也会在父 .post_box 上触发，从而导致循环

> ID：14213577
> 
> 赞同：1
> 
> 时间：2013-01-08T11:05:51.233
> 
> 标签：jquery

这是代码：

```
jQuery(document).ready(function(){
    jQuery('.post_box').on('click', function(e) { 
        jQuery(this).find(".read_more").trigger("click");
    });  
}); 
```

当我单击 div post_box 时，它会触发一个位于 post_box 子 div 中的链接（弹出灰色框），该链接具有 read_more 类，现在它工作正常，但是当我关闭链接灰色框时出现问题，然后再次单击 div post_box它不起作用，我必须刷新页面才能单击它。

如果我把 on() 函数改为，在第一次点击时它会触发链接并被阻止，我认为它触发的链接不止一个，因为子 div 这是 HTML 代码

```
<div class="post_box" >
    <div class="post_box_top">
        <div class="post_box_center">
            <div class="post_box_content">

                <div class="post_date">

                </div>
                <div class="post_content">

              <?php   echo   $content_post = get_post(get_the_ID());?>

                </div>
                <div class="post_footer">
                    <a href="<?php the_permalink();?>" title="<?php the_title(); ?>" class="read_more"  rel="gb_pageset[search_sites]"  data-greybox-type="iframe">Read more</a>
               // this the link i should trigger when someone click on the <div class="post_box">   
               </div>
            </div>
        </div>
    </div>
</div>` 
```

[http://ec2-107-22-235-75.compute-1.amazonaws.com/](http://ec2-107-22-235-75.compute-1.amazonaws.com/)请看这里，这个带有功能 one() 的网站，以防我在点击 div 时更改为 on()阻止[http://haiders.imcserver.ro/telugu](http://haiders.imcserver.ro/telugu)你可以在这里用 on() 看看第二种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:07:47.907

我不会触发点击事件，而是创建一个偶数处理程序（函数）并运行该函数，例如：

```
$(document).ready(function(){
    var     
    readMoreHandler = function (ev) {
        el = $(this).find(".read_more")
        // open read more for the above element
    };

    $('.post_box').on('click', readMoreHandler);  
}); 
```

这样你就没有事件冒泡问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T12:18:29.157

尝试停止链接上的传播：

```
$(".read_more").click(function(e){
    e.stopPropagation();
});

$(document).ready(function(){
    $('.post_box').on('click', function(e) { 
        $(this).find(".read_more").click();
    }); 
}); 
```

这样，当事件从链接冒泡时，不会触发外部 div 的事件处理程序。

这是一个演示：http: [//jsfiddle.net/7wFQz/](http://jsfiddle.net/7wFQz/)

# android - 用户滑动屏幕时停止执行 AsyncTask 的 doInbackground() 方法

> ID：14213580
> 
> 赞同：2
> 
> 时间：2013-01-08T11:05:57.863
> 
> 标签：android, android-asynctask

在我的 android 应用程序中，我在线获取歌词。此任务使用 AsyncTask 类在后台执行。在 doInbackground() 中，我正在调用另一个类的方法来获取歌词。我想使用 AsyncTask 的 cancel() 方法从我当前的活动中停止执行其他类的方法。但它不会停止当前活动之外的方法的执行。有没有办法停止执行该方法执行？

这是我的代码..

```
 public class musicplayer extends Activity
    {
          DownloadWebPageTask task;

          public void playSong(int songIndex)
          {
             task = new DownloadWebPageTask();
             task.execute(new String[] { title, artist });
          }
          private class DownloadWebPageTask extends AsyncTask<String, String, String> 
          {
              @Override
              protected void onPreExecute() 
              {
            try 
            {
                super.onPreExecute();
                progressBar = (ProgressBar) findViewById(R.id.showLoading);
                } 
            catch (Exception e) 
            {
                e.printStackTrace();
            }
            }
            @Override
            protected String doInBackground(String... arg0) 
            {
                try 
            {
                 if(! isCancelled())
                 {
                // get lyrics
                lyricsArray = SearchHelper.findLyrics(arg0[0], arg0[1]);
                        publishProgress(OutputString);
                     }
                 else
                 {
                System.out.print("Cancelled");
                 }
            }
            catch (Exception ex) {
                                ex.printStackTrace();
                }

                return artistArray;
            }
                @Override
            protected void onProgressUpdate(String... st) 
            {
                super.onProgressUpdate(st);
                progressBar.setVisibility(View.GONE);
                        tvMain.setText(Html.fromHtml(st[0].toString()));

                 }
                @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float                             velocityX,float velocityY) 
        {
                 try 
             {
                        task.cancel(true);
            playSong(currentSongIndex + 1);
                     }
                } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:36:30.470

我假设您想`AsyncTask`在您的主要活动未运行或不是用户的焦点时停止您的活动。基于此：

当您的 Activity 失去焦点时，系统调用`onPause()`后跟`onStop()`. 应用程序通过覆盖`Activity`. 因此，在`onPause()`或中`onStop()`，您应该添加：

```
 DownloadWebPageTask.cancel(true) 
```

为此，您应该有权`static`访问 Task 类。

[更新] 你也可以在`onDestroy()`Activity 被杀死时调用它。

[更新] 如果您只想在用户滑动时取消任务，则使用这样的`onFling()`事件监听器：

```
 SimpleOnGestureListener simpleOnGestureListener = new SimpleOnGestureListener(){

         @Override
         public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,){
          // handle swipe event
         }
    }; 
```

如果您想检测小部件上的滑动，还可以查看[Gesture Overlay View](http://developer.android.com/reference/android/gesture/GestureOverlayView.html)

# javascript - 如何在剑道ui中动态设置图例系列

> ID：14213582
> 
> 赞同：3
> 
> 时间：2013-01-08T11:06:02.243
> 
> 标签：javascript, html, kendo-ui

我们如何设置具有不同值的相同字段名称的系列。这样图例就可以以不同的值显示。

我曾以这种方式尝试过代码：

```
 $(document).ready(function(){
  var db = new kendo.data.DataSource({
      data: data,
      group: {
          field: "studentmarks"
      }

  });

  db.read();

  $("#Chart").kendoChart({
  theme: $(document).data("kendoSkin") || "silver",
  dataSource: db,
  aggregate: [{ field: "studentmarks", aggregate: "sum"}],
          group: { field: "studentsmarks" },

    title: {
        text: "Studentdetails"
    },
    dateField: "time",
    legend: {
        position: "bottom"
    },
    chartArea: {
        background: ""
    },
    seriesDefaults: {
        type: "line",field:"ID"
    },
    series: [{
        name: "marks",
        data: data,
        filter: "studentmarks",
        color: "#FC0505",
        width: 2,
        visibleInLegend: "studentmarks",

        markers: {
            visible: false
        },
        tooltip: {
            visible: true,
            format: "{0}%"
        }
    }, {
        name: "ID",
        filter: "studentmarks",
        data: data,
         axis: "",
        color: "#2605FC",
        width: 2,

        markers: {
            visible: true
        },
        tooltip: {
            visible: true,
            format: "{0}"
        }
    }, {
        name: "phone",
        filter: "studentmarks",
        data: data,
         axis: "",
        color: "#ED9AA5",
        width: 2,

        markers: {
            visible: true
        },
        tooltip: {
            visible: true,
            format: "{0}%"
        }

    },
     {
         name: "cbs",
        filter:"studentmarks",
        data: data,
         axis: "",
         color: "#9AA5ED",
        visible: true,
        opacity: .4,
        width: 2,

        markers: {
            visible: true
        },
        tooltip: {
            visible: true,
            format: "{0}%"
        }
    }],
    valueAxis: [{
        title: { text: "" },
        name: "ID",
            majorUnit: 0.5,
            max: 5.0,
            min: 0
    }, {
        name: "ink",
        title: { text: "" },
        min: 0,
        max: 6727.14,
        majorUnit: 1000,
        minorUnit: 500
    }],

      navigator: {
            series: {
                type: "area",
                color: "red",
                field: "studentmarks",
                //stack: "true",
                //value:"",
                data: data,
                aggregate: "min",
                name: "sai",
                select: {
                    from: "2009-01-01 17:08:04",
                    to: "2013-12-24 20:30:26"
                },
                //labels: { color: "green", visible: false },
                tooltip: { background: "green", format: "{0}", color: "white", visible: true }
            }
        }
});

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T12:51:32.593

也许这会有所帮助？

```
var checkCookie = function(){
    var chartData1 = [{
                    name: "Hans",
                    color: "black",
                    data: [1,2,3,4,5]
    }]

    var chartData2 = [{
                    name: "Hans",
                    color: "black",
                    data: [1,2,3,4,5]
                }, {
                    name: "Franz",
                    color: "red",
                    data: [6,7,8,9,10]
    }]
    if (cookieThere) {
        return chartData1
    } else {
        return chartData2
    }
}

$("#chart").kendoChart({
    theme: $(document).data("kendoSkin") || "default",
    chartArea: {
        background: "",
        height: 150
    },
    legend: {position: "bottom"},
    seriesDefaults: {
        type: "column",
        stack: true,
        overlay: {gradient: "none"},
    },
    series: checkCookie(),
    ... 
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-27T07:27:03.190

```
 var mydata=checkCookie();
$("#chart").kendoChart({
        theme: $(document).data("kendoSkin") || "default",
        chartArea: {
            background: "",
            height: 150
        },dataSource:{
    data:mydata,
     serverSorting: false,
    group: {
        field:"name",
    },sort: [{field: "name", dir: "asc"}, 

    schema:{
        model:{
            fields:{
                "name":{"type":"string"},
                "data":{"type":"number"}
            }
        }
    }
},
        legend: {position: "bottom"},

        series: [{type:"column", field:"data", stack:true,colorField: "color"}], 
```

# java - 如何在 JXTreeTable 中选择父节点和所有子节点？

> ID：14213586
> 
> 赞同：1
> 
> 时间：2013-01-08T11:06:09.990
> 
> 标签：java, swing, selection, swingx, jxtreetable

我需要在 JXTreeTable 中为单击的父节点及其所有子节点选择行。在带有已弃用 JXTreeTable 的旧 Swingx 中，可以使用 TreeSelectionListener 来完成。我有监听器（mTable 已弃用 JXTreeTable）：

```
 mTable.addTreeSelectionListener(new javax.swing.event.TreeSelectionListener() {    
            public void valueChanged(javax.swing.event.TreeSelectionEvent evt) {
                selectionPerformered(evt);
            }
        }); 
```

和方法 selectionPerformed(evt)：

```
private void selectionPerformered(javax.swing.event.TreeSelectionEvent evt) {
        boolean unlock = true;
        TreePath parentPath = evt.getNewLeadSelectionPath();
        if (parentPath != null) {
            ListSelectionModel list = mTable.getSelectionModel();
            TreeNode node = ((TreeNode) (parentPath.getLastPathComponent()));
            if (node.getChildCount() > 0) {
                TreePath path = new TreePath(
                        ((DefaultTreeTableModel) mTable.getTreeTableModel()).getPathToRoot((TreeTableNode) node.getChildAt(0)));
                int begin = mTable.getRowForPath(path);
                path = new TreePath(
                        ((DefaultTreeTableModel) mTable.getTreeTableModel()).getPathToRoot((TreeTableNode) node.getChildAt(node.getChildCount() - 1)));
                int end = mTable.getRowForPath(path);
                list.addSelectionInterval(begin, end);
            }
            unlock = false;
        }
        disableUnlock(unlock);
    } 
```

当我点击“组件”事件被触发了几次并使用 list.addSelectionInterval(begin, end); 选择工作正常，看起来像这样：

![好一个](../Images/9dcf82dcb1629b4da2219dbc45564fe7.png)

但是现在，使用新的 swingx 1.6，使用新的 JXTreeTable，当我在调试模式下单击“组件”时，此事件仅触发一次，因此结果如下所示：

![坏的](../Images/526ecbe34612ac4ec30888d7aa07ff1f.png)

例如，如果我单击“管理”程序选择这一行和接下来的 3 行及其子项。但是如果我单击“组件”，我需要为孩子和每个孩子的孩子选择这一行和所有行。如果你知道我的意思:) 有什么方法可以触发这个事件吗？或者也许还有另一种选择方式？

# objective-c - iphone 开发：如何使用 GoogleAnalytics 跟踪 GLKViewController？

> ID：14213587
> 
> 赞同：1
> 
> 时间：2013-01-08T11:06:12.080
> 
> 标签：objective-c, ios, opengl-es, google-analytics, glkit

在我的 iPhone 应用程序中，我使用 Open GL GLKViewController。这是一个简单的游戏。我想用 GoogleAnalytics 跟踪游戏，但它提供了更改

```
@interface AboutViewController : UIViewController 
```

有了这个

```
#import "GAITrackedViewController.h"

@interface AboutViewController : GAITrackedViewController 
```

但就我而言，我使用 GLKViewController，所以我不能只删除它并放置 GAITrackedViewController。有没有办法用谷歌分析来跟踪它？

```
@interface GameViewController : GLKViewController <UIAccelerometerDelegate>
{
.....
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-27T19:50:54.863

这是一个老问题，但对于下一个要在这里寻找相同答案的人来说，它是：

您可以手动执行此操作：

```
// May return nil if a tracker has not already been initialized with a
// property ID.
id tracker = [[GAI sharedInstance] defaultTracker];

// This screen name value will remain set on the tracker and sent with
// hits until it is set to a new value or to nil.
[tracker set:kGAIScreenName value:@"Home Screen"];

[tracker send:[[GAIDictionaryBuilder createAppView] build]]; 
```

# web-services - 加载限制策略时 WSO2 API Manager 服务 API 调用失败

> ID：14213588
> 
> 赞同：0
> 
> 时间：2013-01-08T11:06:14.273
> 
> 标签：web-services, wso2, axis2, wso2-am

目前我们正在尝试通过 WSO2 API 管理器公开我们的 Axis2 Web 服务。然而，在某些情况下，服务不返回结果并查看 WSO2 API 管理器上的日志，我们看到以下内容

```
ERROR {org.wso2.carbon.apimgt.gateway.handlers.throttling.APIThrottleHandler} -  Unable         to load throttling policy using key: gov:/apimgt/applicationdata/tiers.xml   {org.wso2.carbon.apimgt.gateway.handlers.throttling.APIThrottleHandler} TID: [0] [AM] [2013-01-07 16:42:22,951]  
INFO {org.apache.synapse.mediators.builtin.LogMediator} -  To: /TestService/1.0.0, WSAction: urn:testOperation, SOAPAction: urn:testOperation, MessageID: urn:uuid:a8f94f58-5e2d-4d51-afc7-83182b51d173, Direction: request, STATUS = Executing default 'fault' sequence, ERROR_CODE = 0, ERROR_MESSAGE = Unable to load throttling policy using key: gov:/apimgt/applicationdata/tiers.xml, Envelope: <?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Body><p:testOperation xmlns:p="http://example.com"><param>d1</param></p:testOperation></soapenv:Body></soapenv:Envelope> {org.apache.synapse.mediators.builtin.LogMediator} 
```

对于配置，我使用默认的 h2 数据库作为用户和 api 管理器数据库的注册表和 mysql 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:38:51.783

此问题是已知问题 [1]，将在下一个 AM 版本中修复。我们在一个实例中也遇到过这个问题，当我们尝试同时或在短时间内调用两个不同的 API 时。

谢谢;

[1] [https://wso2.org/jira/browse/APIMANAGER-835](https://wso2.org/jira/browse/APIMANAGER-835)

# java - 从 URL 下载的 XML 文件/无法识别

> ID：14213589
> 
> 赞同：0
> 
> 时间：2013-01-08T11:06:18.067
> 
> 标签：java, xml, xpath, google-directions-api

我已经使用这个[Java NIO](https://stackoverflow.com/questions/921262/how-to-download-and-save-a-file-from-internet-using-java)从 Google Direction 下载了一个 xml 文件。

在 IE 中打开的 xml 文件的[屏幕截图](https://dl.dropbox.com/u/4251080/Capture.PNG)。这是它应该如何看起来正确的另一个[屏幕截图。](https://dl.dropbox.com/u/4251080/Capture1.PNG)

由于某种原因，标签似乎无法识别，因此当我使用 xPath 评估和查询 XML 文件时，我得到如下输出：

```
Continue onto <b>Derwent St</b>

 338
 0.3 km

At the roundabout, take the <b>1st</b> exit onto <b>Corporation St</b>

 102
 0.1 km 
```

有没有更简单的方法来解决这个问题，还是我必须使用 SAX 解析器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:13:26.240

显示`<b>`为*数据*而不是标签。它将被表示为`&lt;b&gt;`或出现在 CDATA 块中。

即 XML 包含一个 HTML 片段作为数据。它不包括命名空间的 XHTML。

输出是您应该期望的。

你接下来要做什么取决于你想要达到的目标。无论它是什么，您都需要将数据作为字符串（而不是 textNode）来获取，并将该字符串视为 HTML，而不是文本。

如果要查询 HTML，则需要先通过 HTML 解析器运行它。

# php - 无法回显 Javascript 调用

> ID：14213596
> 
> 赞同：0
> 
> 时间：2013-01-08T11:06:39.003
> 
> 标签：php, javascript, jquery, ajax

> **可能重复：**
> [带有脚本标签的 Jquery 加载](https://stackoverflow.com/questions/5952123/jquery-load-with-script-tags)

在 PHP 页面中，我尝试使用带有 onclick 调用的 jquery 将一些内容插入到名为“内容”的 DIV 中。

```
<div id="content" class="content"></div> 
```

我正在调用的 jquery 版本是：

```
//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js 
```

单击链接时，它会调用以下 javascript：

```
function loadA(a_variable) {
    $("#content").load("build.php?variable=" + a_variable); 
} 
```

build.php 页面做了一些事情并尝试包含一些文本插入 javascript：

```
echo "Lorem ipsum dolor sit amet, consectetuer adipiscing elit";

echo "<script type='text/javascript' src='script_name.js'></script>";

echo "Lorem ipsum dolor sit amet, consectetuer adipiscing elit"; 
```

一切正常，除了脚本被删除并且没有出现在我的客户端中。知道为什么会发生这种情况以及如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:29:25.537

jQuery 实际上并不将`<script>`元素附加到 DOM。相反，它只是评估脚本的内容。因为它不在 DOM 中，所以你找不到它，尽管你可以通过检查从以下获得的内容来检查你的 php echo'ed 内容是否包含脚本标签`.load`：

```
$("#content").load("build.php?variable=" + a_variable, function(data) {
  console.log(data); // check if you see script in the content or not
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:10:24.393

尝试将 HTML 标记添加到您的 PHP 中，例如：

```
echo "<html><body>data.<script></script>...</body></html>" 
```

使用任何网络嗅探器（如 FireBug，或者如果您在开发人员控制台中使用 chrome 的“网络”选项卡），查看您从 php 获得的内容，您的页面中可能存在 404 错误）

# java - 元素在 sql 的 php 数组上重复

> ID：14213597
> 
> 赞同：0
> 
> 时间：2013-01-08T11:06:38.500
> 
> 标签：java, php, sql, arrays, select

我有两个数组：在一个数组中，我从我的 SELECT 中插入了所有问题 ID，在另一个数组中，我想插入相同的 ID，但这次不重复。我在第二个数组中的代码不起作用，我不知道为什么。我不能在我的 SELECT 中使用 DISTINCT，因为它不起作用（行是不同的），我不想为此使用两个选择。

```
 $query_slidersanswers= "SELECT A.QuestionIDFK, A.AnswerIDPK, A.AnswerValue, A.SortOrder
                        FROM tblquestionset AS QS
                          INNER JOIN tblquestion AS Q ON QS.QuestionIDFKPK = Q.QuestionIDPK
                          INNER JOIN tblanswer AS A ON Q.QuestionIDPK = A.QuestionIDFK
                        WHERE QS.QuestionSetIDPK = '0' 
                          AND QS.OnPage = '1' 
                          AND Q.Constructor = '".$_session['slider']."'";

$Query_Sliders= mysql_query($query_slidersanswers);         

$currentQuestionID= 0;
while($row_Slider=mysql_fetch_array($Query_Sliders)){

    $QuestionID=$row_Slider['QuestionIDFK'] ;
    $AnswerID=$row_Slider['AnswerIDPK'] ;
    $AnswerValue=$row_Slider['AnswerValue'] ;
    $SortOrder=$row_Slider['SortOrder'] ;

   $tableslidersqid[] = array($QuestionID);

   if($QuestionID != $currentQuestionID){
   //I DO THIS FOR OBTAIN other array with THE UNIQUES ID'S (non repeated)

    $tableslidersREALqid[] = array($QuestionID);
    $CurrentQuestionID = $QuestionID;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:23:10.633

假设您的问题 id 数组如下

```
$input = array( "19", "55", "19", "55", "78" );
$result = array_unique($input);
print_r($result); 
```

上面的示例将输出：

```
Array
(
   [0] => 19
   [1] => 55
   [4] => 78
) 
```

**array_unique($array)**将检测数组中的相同值并只给出第一个出现的值，其余的被跳过。

**编辑：**

```
while($row_Slider=mysql_fetch_array($Query_Sliders)){

   $QuestionID[]=$row_Slider['QuestionIDFK']; //used $QuestionID[], instead of $QuestionID

   //$AnswerID=$row_Slider['AnswerIDPK'] ;
   //$AnswerValue=$row_Slider['AnswerValue'] ;
   //$SortOrder=$row_Slider['SortOrder'] ;

  //$tableslidersqid[] = array($QuestionID);

  //if($QuestionID != $currentQuestionID){
     //$tableslidersREALqid[] = array($QuestionID);
     //$CurrentQuestionID = $QuestionID;
  //}
}

$result = array_unique($QuestionID); //make array unique here, after all the ids are in the array 
```

# php - 无法连接到 Mongodb：套接字已关闭

> ID：14213598
> 
> 赞同：1
> 
> 时间：2013-01-08T11:06:41.073
> 
> 标签：php, sockets, mongodb

我让 mongod 启动并使用命令运行`sudo mongod --journal --rest --config /etc/mongodb.conf`- ，在它说的日志中`waiting for connections on port 27017`

我正在尝试使用 - $connection = new MongoClient($connectionString, $opts); 从我的 PHP 脚本连接到 mongod；

在哪里`$connectionString = 'mongodb://127.0.0.1:27017'` 和`$opts= array('replicaSet' => false, 'connect' => true);`

不管 $opts，我“经常”得到例外 - `'MongoConnectionException' with message: Failed to connect to: 127.0.0.1:27017: send_package: error reading from socket: The socket is closed`

上次我看到这样的错误时，我重新启动了 mongod 并清除了异常。但现在它又站起来了。有时刷新浏览器可以解决问题。关于为什么这种不可靠行为的任何线索？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:03:14.143

我正在使用 symfony2 连接到 MongoDB，当我从选项列表中删除端口时它可以工作！

试试看

# objective-c - 关闭 iphone SDK 中选择的 Popover 行上的模态视图

> ID：14213599
> 
> 赞同：0
> 
> 时间：2013-01-08T11:06:43.400
> 
> 标签：objective-c, ios, uisplitviewcontroller

我在一个被点击的按钮上展示了一个模态视图。

在那个视图中，我创建了一个新视图（额外视图）。在额外视图中，我有一个`UITableView`& a `UIButton`。

当我单击该按钮时，我在 popOVer 中打开一个视图（Leftview）。现在，我想在单击 leftView 的表行时关闭“Extraview”。

我的代码如下：

```
// Leftside view:

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    [[NSNotificationCenter defaultCenter] postNotificationName:@"DismissModal"object:nil];

}

// Presented modal view.m

- (void)viewDidLoad
{

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(dismissModal:) name:@"DismissModal" object:nil];
}

-(void)dismissModal:(NSNotification *)notif
{

   [self dismissViewControllerAnimated:YES completion:nil];

} 
```

**我的错误如下：**

[Reader_ViewdismissModal]：无法识别的选择器发送到实例 0xb494e10 2013-01-08 16:12:00.468 AFFeedsReader[3449:1d903] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[Reader_ViewdismissModal]：发送了无法识别的选择器到实例 0xb494e10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:38:46.277

在您的“Leftview.h”中，执行以下操作

```
@protocol DismissingDelegate

- (void) dismissextra;

@end
@property (weak, nonatomic) id<DismissingDelegate>delegate; 
```

初始化左视图时，将委托分配给显示模态视图的 ViewController。

在该控制器中，将其定义为“DismissingDelegate”，并实现以下方法：

```
- (void) dismissextra {
     [self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T09:23:29.400

我通过实施发布通知解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T10:44:00.453

请不要将通知用于简单任务，因为它会消耗大量资源……所以请始终使用任何可用的委托方法……除非确实需要在整个应用程序上获取通知……

# scripting - 我可以实例化来自另一个 Beanshell 脚本的 beanshell 类吗？

> ID：14213600
> 
> 赞同：3
> 
> 时间：2013-01-08T11:06:50.763
> 
> 标签：scripting, beanshell

我想运行从不同 beanshell 文件导入的类。但我不知道如何从主 beanshell 文件中实例化类。这可能吗？

我导入的类：

```
class HelloW {
public void run(){
    print("Hello World");
}
} 
```

应该运行和实例化类的主 beanshell 文件：

```
Interpreter i = new Interpreter();
i.source("HelloW.bsh"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T17:26:21.910

[BeanShell 文档](http://www.beanshell.org/manual/bshmanual.html#Embedding_BeanShell_in_Your_Application)在这方面非常出色，因此您应该先通读一遍。在您的情况下，几乎没有问题。也就是说，有脚本对象。此外，您开始使用的 .bsh 文件需要执行脚本化对象。以您的示例为例，此代码应该可以工作：

```
Hello() {
 run(){
     print("Hello World");
 }

 return this;
}

myHello = Hello();
myHello.run(); // Hello World 
```

**更新了支持脚本类的 BeanShell 2.0b1 及更高版本的答案 **：

我创建了两个 beanshell 文件并将它们放在一个目录“脚本”中。

我相信，第一个“executor.bsh”就是您所说的“父”脚本。

```
// executor.bsh

addClassPath(".");
importCommands("scripts");

source(); // This runs the script which defines the class(es)

x = new HelloWorld();
x.start(); 
```

第二个文件包含脚本类。请注意，我使用的是脚本命令，并且根据 BeanShell 文档，文件名必须与命令名相同。

```
// source.bsh

source() {
    public class HelloWorld extends Thread {
        count = 5;
        public void run() {
            for(i=0; i<count; i++)
                print("Hello World!");
        }

    }
} 
```

我在一个 java 类中调用了 executor.bsh：

```
Interpreter i = new Interpreter();
i.source("scripts/executor.bsh");

// Object val = null;
    // val = i.source("scripts/executor.bsh");
// System.out.println("Class:" + val.getClass().getCanonicalName());
// Method m = val.getClass().getMethod("start", null);
// m.invoke(val, null); 
```

请注意，我留下了一些注释代码，这些代码还显示我使用反射从 Java 执行脚本类。这是结果：

```
Hello World!
Hello World!
Hello World!
Hello World!
Hello World! 
```

# android - 熊猫板上的android jellybean预建二进制文件无法启动

> ID：14213606
> 
> 赞同：0
> 
> 时间：2013-01-08T11:07:09.497
> 
> 标签：android, android-4.2-jelly-bean, pandaboard

我正在尝试使用我从 linaro.org (http://releases.linaro.org/12.12/android/panda/) 下载的 Android jellybean 预构建二进制文件来启动 panda-board omap4430。我正在将 SD 卡上的两个分区创建到文件系统中。首先是包含 boot.tar.bz2 和 u-boot.img 的可引导 FAT32，其他 ext3 分区包含 userdata.tar.bz2 和 system.tar.bz2。将我的 SD 卡放入熊猫板并通过我的 Ubuntu 电脑上的 minicom 将其连接后，我什至看不到去皮或其他东西或任何日志的单个字符。我是不是错过了什么。我之前已经成功地在 Beagle 板上完成了 Ubuntu 移植。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:40:57.537

你是第一次在熊猫板上闪烁它然后它有一些其他方法，因为他们给出了如下过程

格式化SD卡

在 fat 32 分区中复制 MLO 和 u-boot.bin

然后按照 OMAPpedia release nots 上的给定流程进行操作。

# android - 为什么 getCheckedItemPositions() 返回反真值

> ID：14213609
> 
> 赞同：0
> 
> 时间：2013-01-08T11:07:16.897
> 
> 标签：android, listview

我有一个`ListView`多选模式。每当我单击一个项目时，我都想处理该事件。为此，我使用以下逻辑。

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    OverlayTypes selected = (OverlayTypes) getListAdapter().getItem(
            position);
    boolean isChecked = getListView().getCheckedItemPositions().valueAt(
            position);
    Log.i(TAG, position+" is "+isChecked);
} 
```

但是，每当检查一个项目时，`getChecked`它是“假”和“真”，反之亦然。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:11:56.510

这可能是时间问题，在您打印到 LogCat 之前，复选框的值可能不会更新。

尝试改变你的线路

```
boolean isChecked = getListView().getCheckedItemPositions().valueAt(position); 
```

到

```
boolean isChecked = l.getCheckedItemPositions().valueAt(position); 
```

看看阅读本地副本而不是全局副本是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:42:18.947

我的问题是我在获取`getView()`自定义适配器的方法方面过于雄心勃勃。在`getView()`中，我尝试将`Checkable`视图设置为它在我的设置中的值，但没有意识到检查状态是在适配器中处理的。

如果这是有道理的。

# iphone - 如何为数组中的每个 UIButton 设置一个方法

> ID：14213610
> 
> 赞同：0
> 
> 时间：2013-01-08T11:07:16.530
> 
> 标签：iphone, objective-c, ios, uibutton

我在下面的代码中有一个 UIButtons 数组。我遇到的问题是我需要一个与每个按钮关联的唯一方法。目前任何按下的按钮都使用`action:@selector(buttonPressed:)`

我被困在如何将一个方法连接到每个按钮上。

```
 // Create buttons
        NSMutableArray* buttonArray = [NSMutableArray array];
        NSArray * myImages = [NSArray arrayWithObjects:@"category-cafe-unsel.png", @"category-food-unsel.png", @"category-clothing-unsel.png", @"category-health-unsel.png", @"category-tech-unsel_phone.png" , @"category-tech2-unsel.png", @"catefory-theatre-unsel.png", @"category-travel-unsel.png", nil];

        // only create the amount of buttons based on the image array count
        for(int i = 0;i < [myImages count]; i++)
        {
            // Custom UIButton
            UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];

            [btn setFrame:CGRectMake(0.0f, 20.0f, 52.0f, 52.0f)];
            [btn setTitle:[NSString stringWithFormat:@"Button %d", i] forState:UIControlStateNormal];
            [btn setImage:[UIImage imageNamed:[myImages objectAtIndex:i]] forState:UIControlStateNormal];

            [btn addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
            [buttonArray addObject:btn];
        } 
```

谢谢你的帮助

:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T11:11:22.657

最好的选择是使用`same method`所有的`buttons`。为此，你应该使用`tags`. 所以每个按钮都有自己的标签。

```
btn.tag = i; 
```

这里`tag number`将用于`differentiating`which `button`was `called`。

然后在获取标签的方法中，这也可以通过[switch-statement](http://www.techotopia.com/index.php/The_Objective-C_switch_Statement)来完成：

```
-(void)buttonPressed:(UIButton*)sender
{
    if( sender.tag == 1 ){

    } else {

    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T11:37:32.167

使用以下代码：

```
-(void)buttonPressed:(UIButton*)sender
{
    UIButton *btn = sender;
    for(int i = 0;i < [myImages count]; i++)
    {
       if (i == [btn tag]) {

       //Your code

       break;
       }
     }
} 
```

它工作正常。当您获得标签值时，您可以根据标签值执行操作。

谢谢，

鹤芒。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T11:13:29.797

```
[btn addTarget:self action:@selector(NSSelectorFromString([NSString stringWithFormat:@"button%d", i])) forControlEvents:UIControlEventTouchUpInside]; 
```

相应的操作将是：

```
-(void)button1:(UIButton*)sender
-(void)button2:(UIButton*)sender
-(void)button3:(UIButton*)sender
-(void)button4:(UIButton*)sender 
```

等等。

但是，也可以考虑仅使用一种操作方法并使用标签来分隔操作方法中的按钮。

# javascript - Android WebView加载谷歌地图数据渲染

> ID：14213614
> 
> 赞同：2
> 
> 时间：2013-01-08T11:07:26.493
> 
> 标签：javascript, android, android-webview, webviewclient

我正在尝试使用以下功能在 WebView 中显示 div

```
String baseUrl = "";
String mimeType = "text/html";
String encoding = "UTF-8";
html = sb.toString();
String historyUrl = "";

webViewDataViewer.loadDataWithBaseURL(baseUrl, html, mimeType, encoding, historyUrl); 
```

这是我的html：

```
 "<html> "+
    " <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />" +
    " <head> <body>  " +
    " <script type='text/javascript' src='http://maps.googleapis.com/maps/api/js?sensor=true' ></script> " +
    " <script type='text/javascript'>" +
    " <div id='map_canvas' style='width:100%;height:100%;'></div>" +
    "  var locations = [ ['<h3>A1 A2</h3><img src='assets/user_26/thumb_0.jpg' alt='img' /><p>S, I</p><p>G</p><p>G, 4343, India</p>amit', 28.6392112, 77.3496616], ['<h3>F</h3><img src='' alt='img' /><p>Test</p><p>Test</p><p>Test, 355441, India</p>amit', 19.5851331, -99.0572702]," +
    " ['<h3>B1</h3><img src='' alt='img' /><p>Test</p><p>Test</p><p>Test, 45665, India</p>am', 19.5851331, -99.0572702]," +
    " ['<h3>C1</h3><img src='assets/user_34/thumb_userImage.png' alt='img' /><p>2134 Lawton st</p><p>San Francisco, 94122, United States</p>amit', 37.757809, -122.485946]," +
    " ['<h3>D1</h3><img src='' alt='img' /><p>La</p><p>La</p><p>Abc, 110031, </p>amit', 30.0041868, -90.2159207]," +
    " ['<h3>E1</h3><img src='assets/user_36/thumb_0.jpg' alt='img' /><p>US</p><p>US, 123456, United States</p>amit', 34.797063, -82.294022]," +
    " ['<h3>G1</h3><img src='assets/user_38/thumb_0.jpg' alt='img' /><p>1 Market St</p><p>San Francisco, 94123, United States</p>amit', 37.7944988, -122.3947446]," +
    " ['<h3>T0</h3><img src='' alt='img' /><p>Sfvf</p><p>Fgf</p><p>Fsv, 33133, India</p>amit', 25.7307897, -80.2377078], " +
    " ['<h3>GT7</h3><img src='assets/user_45/thumb_0.jpg' alt='img' /><p>Newyork</p><p>Us</p><p>Hju, 4556, India</p>amit', 40.760118, -73.830034]," +
    " ['<h3>R2</h3><img src='' alt='img' /><p>Asdfhjkkl</p><p>San Fran, 94104, United States</p>amit', 37.7911148, -122.4021273],];" +
    "  var count = 0; "+
    "  var total_lng = 0;  var total_lat = 0; " +" total_lat += 28.6392112;"+
                                           " total_lng += 77.3496616;"+
                                            "count += 1; "+                                
                                           " total_lat += 19.5851331;"+
                                           " total_lng += -99.0572702;"+
                                           " count += 1; " +                             
                                           "total_lat += 19.5851331;"+
                                           "total_lng += -99.0572702;"+
                                           "count += 1;"+                                       
                                           "total_lat += 37.757809;"+
                                           "total_lng += -122.485946;"+
                                           "count += 1;"  +                                    
                                           "total_lat += 30.0041868;"+
                                           "total_lng += -90.2159207;"+
                                          " count += 1;   total_lat += 34.797063;    total_lng += -82.294022;"+ 
                                         "  count += 1;             total_lat += 37.7944988;  total_lng += -122.3947446;   "+
                                          " count += 1; total_lat += 25.7307897;     total_lng += -80.2377078;" +                           
                                           " count += 1; total_lat += 40.760118;    total_lng += -73.830034;"+                             
                                           " count += 1;   total_lat += 37.7911148;  total_lng += -122.4021273;"+                                    
                                           " count += 1;   "+                                     

                           " if(count) {"+
                           "     avg_lat = total_lat / count;"+
                           "     avg_lng = total_lng / count;  "+                          
                           " } else {"+
                           "     avg_lat = 40;"+
                           "     avg_lng = -96;"+
                           " }"+

                        "var mapOptions = "+
                       "{"+
                         "   center: new google.maps.LatLng(avg_lat, avg_lng), "+
                          "  zoom: 4,"+
                        "    scrollwheel: false,"+
                        "    streetViewControl: false,"+

                      "      mapTypeId: google.maps.MapTypeId.ROADMAP,"+
                        "    navigationControlOptions: {"+
                       "         style: google.maps.NavigationControlStyle.SMALL"+

                          "}"+
                        "};"+

                       " var map = new google.maps.Map(document.getElementById('map_canvas'),  mapOptions);"+
                      "  var infowindow = new google.maps.InfoWindow();"+
                      "  var marker, i;"+
                      "  if(locations.length > 0) {"+
                         "   for (i = 0; i < locations.length; i++) "+
                           " {   "+                   
                          "      marker = new google.maps.Marker({"+
                             "       position: new google.maps.LatLng(locations[i][1], locations[i][2]),"+
                              "      map: map"+
                             "   });"+

                               " google.maps.event.addListener(marker, 'click', (function(marker, i) {"+
                                "    return function() {"+
                                   "     infowindow.setContent(locations[i][0]);"+
                                     "   infowindow.open(map, marker);"+
                                    "}"+
                               " })(marker, i));     "+           
                            "}   "+
                        "} </script>    "
           "  </body> </head>  </html>" 
```

这在 Android 浏览器中正确显示，但在 Android WebView 中没有显示数据。我无法弄清楚这里出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:18:26.380

试试这样：

```
String html= "<html><body>You scored <b>192</b> points.</body></html>";
webview.loadData(html, "text/html", null); 
```

当然，将我给出的 html 示例替换为您的 html。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T11:31:16.287

```
String html = " ...  your html here ..."
webView = (WebView) findViewById(R.id.your_webview);
webView.getSettings().setJavaScriptEnabled(true);
webView.loadData(html,"text/html", "UTF-8"); 
```

您是否在 webview 上启用了 javascript？

# java - Java - 轮询超时的最佳方式

> ID：14213616
> 
> 赞同：3
> 
> 时间：2013-01-08T11:07:30.040
> 
> 标签：java

我有这样的代码：

```
while(isResponseArrived)
   Thread.yield(); 
```

但我真正想做的是这样的：

```
long startTime = System.currentTimeInMilliseconds();

while(isResponseArrived)
{
   if(isTimeoutReached(startTime))
       throw new TimeOutExcepton(); 
   Thread.yield();
} 
```

我还不确定是否抛出异常（这对这个问题并不重要），但我想知道的是如何让它尽可能高性能，所以我不会在处理器上大吃一惊。换句话说，我怎样才能使 isTimeoutReached(long startTime) 尽可能性能友好。

我测试过：

```
for(int x=0; x<99999999; x++)
    System.nanoTime(); 
```

相对

```
for(int x=0; x<99999999; x++)
    System.currentTimeInMilliseconds(); 
```

而且差异很小，在完成时间方面不到 10%

我还考虑使用 Thread.sleep()，但我真的希望在有更新并且处理器正在等待时尽快通知用户。Thread.yield() 不会让处理器搅动，它只是一个 NOP，给予其他任何处理器优先级，直到它可以继续。

无论如何，在不限制 CPU 的情况下测试超时的最佳方法是什么？这是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:11:40.673

根据我的经验，超时是任意选择的，例如不是时间关键的。如果我选择 1000 毫秒的超时并且它需要 1001 毫秒，那么影响应该是微不足道的。对于实现超时，我建议使实现尽可能简单。

您可以使用 ScheduledExecutorService 实现超时，例如

```
final ScheduledExecutorService ses = Executors.newSingleThreadScheduledExecutor();

public void addTimeoutForTask(final Future future, int timeOutMS) {
    ses.schedule(new Runnable() {
        @Override
        public void run() {
            future.cancel(true);
        }
    }, timeOutMS, TimeUnit.MILLISECONDS);
} 
```

如果您正在执行一些非阻塞操作并且您希望它超时，您可以这样做。

```
interface TimedPoller {
    public void poll();

    /**
     * @return is it now closed.
     */
    public boolean checkTimeout(long nowNS);
}

private final Set<TimedPoller> timedPollers = new LinkedHashSet<>();
private volatile TimedPoller[] timedPollersArray = {};

public void add(TimedPoller timedPoller) {
    synchronized (timedPollers) {
        long nowNS = System.nanoTime();
        if (!timedPoller.checkTimeout(nowNS) && timedPollers.add(timedPoller))
            timedPollersArray = timedPollers.toArray(new TimedPoller[timedPollers.size());
    }
}

public void remove(TimedPoller timedPoller) {
    synchronized (timedPollers) {
        if (timedPollers.remove(timedPoller))
            timedPollersArray = timedPollers.toArray(new TimedPoller[timedPollers.size());
    }
}

private volatile boolean running = true;

public void run() {
    while (running) {
        // check the timeout for every 1000 polls.
        for (int i = 0; i < 1000; i += timedPollersArray.length) {
            TimedPoller[] pollers = timedPollersArray;
            for (TimedPoller poller : pollers) {
                poller.poll();
            }
        }
        long nowNS = System.nanoTime();
        TimedPoller[] pollers = timedPollersArray;
        for (TimedPoller poller : pollers) {
            if (poller.checkTimeout(nowNS))
                remove(poller);
        }
    }
} 
```

要么放弃 CPU，要么不放弃。如果你放弃 CPU，其他线程可以运行，但你会得到一个延迟，然后才能再次运行。或者你没有放弃 CPU 来提高你的响应时间，但是另一个线程无法运行。

看来您希望能够让其他东西运行，而无需放弃 CPU。这不是微不足道的，但如果做得正确，可以给你带来两者的一些好处（或者如果没有有效地完成，两者都会带来最坏的结果）

你可以做的是实现你自己的线程逻辑，前提是你有很多小任务，例如你想轮询十个你可以只使用一个 CPU 的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T11:20:34.977

我认为使用等待/通知会更有效

```
boolean arrived;

public synchronized void waitForResponse(long timeout) throws InterruptedException, TimeoutException {
    long t0 = System.currentTimeMillis() + timeout;
    while (!arrived) {
        long delay = System.currentTimeMillis() - t0;
        if (delay < 0) {
            throw new TimeoutException();
        }
        wait(delay);
    }
}

public synchronized void responseArrived() {
    arrived = true;
    notifyAll();
} 
```

# .net - Ironpython - 编译为单个 exe

> ID：14213619
> 
> 赞同：0
> 
> 时间：2013-01-08T11:07:35.177
> 
> 标签：.net, ironpython

我用 pyc.py 编译了我的代码，命令如下：

```
ipy.exe "F:\IronPython 2.7\Tools\Scripts\pyc.py" /target:winexe /embed /standalone /platform:x86 /main:"C:\Users\Mito125\Documents\SharpDevelop Projects\mst\mst\Program.py" "C:\Users\Mito125\Documents\SharpDevelop Projects\mst\mst\MainForm.py" 
```

在没有安装程序的情况下分发单个文件。该代码在 SharpDevelop 上正常工作，或者如果我使用 ipy.exe 启动它，并且编译的 exe 在我的计算机上正常工作。但是如果我尝试在不同的电脑上启动，我会得到一个错误。

首先我认为python模块导入是问题，所以我删除了所有导入（如import os），但错误仍然存​​在。如何正确编译单个 exe 中的所有 dll 和脚本？

编辑：我注意到 /embed /standalone 参数并没有真正嵌入所有必要的 dll ......如果我复制所有 dll + exe 程序效果很好......

# sql - 在预期条件的上下文中指定的非布尔类型的表达式，靠近“THEN”

> ID：14213620
> 
> 赞同：1
> 
> 时间：2013-01-08T11:07:35.783
> 
> 标签：sql, sql-server, boolean

谁能向我解释 SQL Server 中的这种行为。我有一个 UPDATE 语句作为存储过程的一部分，它得到一个'在预期条件的上下文中指定的非布尔类型的表达式，在某些情况下接近'THEN'错误，如下所示。先声明。

```
UPDATE MyDB.dbo.OrganisationUnits
SET OrganisationUnit = Inserted.OrganisationUnit,
ParentOrganisationUnit = 
    (CASE WHEN ((SELECT Count(1) 
                 FROM [172.24.112.10].Consurgo.dbo.OrganisationUnits CO1
                 WHERE CO1.OrganisationUnit = Inserted.ParentOrganisationUnit) = 1)
          THEN Inserted.ParentOrganisationUnit
          ELSE CO.ParentOrganisationUnit
END),
OrganisationLevel = Inserted.OrganisationLevel
FROM Inserted, Deleted, MyDB.dbo.OrganisationUnits CO
WHERE CO.OrganisationUnit = Deleted.OrganisationUnit 
```

错误出现在“= 1”部分的 CASE 语句中。

就像现在的声明一样，它有效。如果我将 =1 部分更改为 > 0，则它会失败并显示上面的错误消息。

<> 0 它也失败了。但是使用 <> 1 它可以工作。

它也适用于 =2 和 <>2。

# java - 转换数组列表 到 JTable 构造函数接受的字段

> ID：14213626
> 
> 赞同：0
> 
> 时间：2013-01-08T11:07:47.517
> 
> 标签：java, swing, arraylist, jtable, type-conversion

当我想填满我的 JTable 时，我刚刚发现了这个问题，我有这个方法返回一个类别的数组列表：

```
public static ArrayList<Categorie> findAll() {
    ArrayList<Categorie> list  = new ArrayList<Categorie>();
    try {

        Statement st = connect.createStatement();
        String sql = "select * from categorie ";
        ResultSet rs = st.executeQuery(sql);
        while (rs.next()){
            Categorie tmp = new Categorie(rs.getInt("idcategorie"),rs.getString("description"));
            list.add(tmp);
        }

    } catch (SQLException e) {
            e.printStackTrace();
    }
    return list;

} 
```

这是类别类（POJO）：

```
 package modele;

public class Categorie {
private int idcategorie;
private String description;
public Categorie(){

}
public Categorie(int idcategorie, String description) { 
    this.idcategorie = idcategorie;
    this.description = description;
}
public int getIdcategorie() {
    return idcategorie;
}
public void setIdcategorie(int idcategorie) {
    this.idcategorie = idcategorie;
}
public String getDescription() {
    return description;
}
public void setDescription(String description) {
    this.description = description;
}
@Override
public String toString() {
    return "Categorie [idcategorie=" + idcategorie + ", description="
            + description + "]";
}

} 
```

所以，我想用这个 arrayList 填充我的 JTable，但构造函数不接受

```
arrayList<Categorie> 
```

我也测试了：

```
ArrayList<Contact> listc = ContactDAO.findAll();    
Contact[] cs = listc.toArray(new Contact[listc.size()]);
        JTable t = new JTable(cs, columnNames); 
```

但它不接受`cs`字段

你有什么主意吗

先感谢您

# java - sql.exception：未找到列

> ID：14213631
> 
> 赞同：1
> 
> 时间：2013-01-08T11:07:54.740
> 
> 标签：java, sql, ms-access-2010

嗨，你们能告诉我我的代码有什么问题吗？当我将我的 ResultSet 设置为“SELECT * FROM Table1”时，它工作得很好，如果它是“SELECT key, itemName, itemPrice, itemQuantity FROM Table1”但是当我尝试只使用其中一个或两个时它会打印出一个错误列未找到。

我的数据库存储在 MS Access 中。这是我的主要内容：

```
try (Connection cn = DBUtil.getConnection(DBType.MS_ACCESS);
    Statement st = cn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_READ_ONLY);
    ResultSet rs = st.executeQuery("SELECT Table1.key FROM Table1");) {

    Table1.displayData(rs);

} catch (SQLException ex) {
    DBUtil.processException(ex);
} 
```

那就是 Table1.java：

```
public class Table1 {
    public static void displayData(ResultSet rs) throws SQLException {
        // to print out my database
        while (rs.next()) {
            StringBuffer buffer = new StringBuffer();

            buffer.append(rs.getString("key") + " ");
            buffer.append(rs.getString("itemName") + " ");

            double price = rs.getDouble("itemPrice");
            DecimalFormat pounds = new DecimalFormat("£#,##0.00");
            String formattedPrice = pounds.format(price);
            buffer.append(formattedPrice + " ");

            buffer.append(rs.getInt("itemQuantity") + " ");

            System.out.println(buffer.toString());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:10:13.637

您的结果集将仅包含您在选择查询中定义的列。所以如果你这样做

```
rs.getString("itemName") 
```

那么您必须在查询中选择该列，而您没有

```
st.executeQuery("SELECT Table1.key FROM Table1")
                                  ^-----------------column missing 
```

做

```
st.executeQuery("select key, itemName, itemPrice, itemQuantity from Table1") 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T11:13:20.410

你应该使用
buffer.append(rs.getString("Table1.key") + " ");

结果集具有您在选择查询中给出的名称的数据。（key = Table1.key）

# tomcat - 如何在 nginx 中重写 tomcat 提供的相关链接

> ID：14213635
> 
> 赞同：1
> 
> 时间：2013-01-08T11:08:01.163
> 
> 标签：tomcat, nginx

我正在寻找通过 nginx 提供 tomcat webapp 的服务，并且我的主页运行良好。但是，来自主页的链接包含在 tomcat 中提供的相关链接。是否可以从此相对链接中删除已知字符串。

例如

new.site.com -到 localhost:8080/myapp/ newsite 的主页代理

但这然后包含此作为示例链接：
new.site.com/myapp/newsite/about

我希望能够从 URL 中删除“myapp/newsite/”。

# mongodb - $cond 中存在 $exists 的条件分组

> ID：14213636
> 
> 赞同：68
> 
> 时间：2013-01-08T11:08:03.973
> 
> 标签：mongodb, mongodb-query

我有两个键 A 和 B，它们在文档中的存在是互斥的。当A存在时我必须按A分组，当B存在时我必须按B分组。因此，我`$project`将所需的值放入名为 MyKey 的计算键中，我将在该键上执行`$group`. 但看起来我在语法上犯了一个错误。我尝试以两种方式编写 $project：

`{$project: {MyKey: {$cond: [{$exists: ["$A", true]}, "$A", "$B"]}}}`

和

`{$project: {MyKey: {$cond: [{"A": {$exists:true}}, "$A", "$B"]}}}`

但我不断收到错误：

`{ "errmsg" : "exception: invalid operator '$exists'", "code" : 15999, "ok" : 0 } ...`

怎么了？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-01-08T14:09:05.537

使用[`$ifNull`](http://docs.mongodb.org/manual/reference/operator/aggregation/ifNull/)而不是`$cond`在你的`$project`：

```
{ $project: {MyKey: {$ifNull: ['$A', '$B'] }}} 
```

如果`A`存在且不存在，`null`将使用其值；否则使用 的值`B`。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2017-03-09T07:19:41.010

如果想在 $cond 中检查 $exists，另一种方法是使用 $not 和 $cond

```
{$project: {MyKey: {$cond: [{$not: ["$A"]}, "$B", "$A"]}}} 
```

$not 的真值表是

[![在此处输入图像描述](../Images/c7599e22e2f1541dc5781a85b51b581f.png)](https://i.stack.imgur.com/0LcjL.png)

希望有帮助

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2017-09-07T05:20:40.383

你可以模拟存在

```
$ne : [$var_to_check, undefined] 
```

如果定义了 var，则返回 true

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-13T15:47:29.727

我在寻找类似问题时发现了您的问题，但是插入了一个键，我正在寻找我的参数。我终于解决了这个问题。

这就是我用于*$_id.status*参数的内容，以检查它是否存在于 cond 中。

```
$cond: [{
     $or: [{
          $ne: ["$_id.status", null]
     }]
}, 1, null] 
```

*$or*不需要。我把它放在那里……只是为了好玩。我认为它暂时不会对查询产生太大影响。我稍后会测试速度。

# asp.net-mvc-3 - 带有 MvcContrib 的 url.Action 生成无效链接

> ID：14213637
> 
> 赞同：1
> 
> 时间：2013-01-08T11:08:05.777
> 
> 标签：asp.net-mvc-3, mvccontrib, urlhelper

在我们的应用程序中，我们使用 MvcContrib 生成链接，但跨区域链接除外，其中 Contrib 似乎无法正常工作（或者我们做错了什么）。在服务中，我们有一个生成 List< ZakladkaModel > 的函数，其中包含 url 和其他用于通过自定义 html 帮助器生成 tabstrib 的属性。该函数将数据库对象的 id 和 UrlHelper 作为参数，以帮助创建链接。

```
m_service.GenerowanieZakladkiDlaKontrolera_ARCH_Akt(idAktu, new UrlHelper(this.ControllerContext.RequestContext)); 
```

然后在 GenerowanieZakladkiDlaKontrolera_ARCH_Akt 我们有这样的东西：

```
model.Add(new ZakladkaModel { Aktywnosc = true, NazwaZakladki = "Akt", Url = "" });
model.Add(new ZakladkaModel { Aktywnosc = true, NazwaZakladki = "Wzmianki", Url = url.Action<Usc.Presentation.Areas.FU_RAU.Controllers.ARCH.ARCH_WzmiankiController>(c => c.Index(idAktu)) });
if (tekstJednolity.StanTekstuJednolitego == "RB" || tekstJednolity.StanTekstuJednolitego == "SW")
{
model.Add(new ZakladkaModel { Aktywnosc = true, NazwaZakladki = "t.j. aktu", Url = url.Action<Usc.Presentation.Areas.FU_RAU.Controllers.ARCH.ARCH_TekstJednolityController>(c => c.Edytuj(tekstJednolity.Id)) });
}
else
{
model.Add(new ZakladkaModel { Aktywnosc = true, NazwaZakladki = "t.j. aktu", Url = url.Action<Usc.Presentation.Areas.FU_RAU.Controllers.ARCH.ARCH_TekstJednolityController>(c => c.Raport(tekstJednolity.Id)) });
}
model.Add(new ZakladkaModel { Aktywnosc = true, NazwaZakladki = "Przypisek 1", Url = url.Action<Usc.Presentation.Areas.FU_RAU.Controllers.ARCH.Przypisek1Controller>(c => c.Index(idAktu)) });
model.Add(new ZakladkaModel { Aktywnosc = true, NazwaZakladki = "Przypisek 2", Url = url.Action<Usc.Presentation.Areas.FU_RAU.Controllers.ARCH.Przypisek2Controller>(c => c.Index(idAktu)) });
model.Add(new ZakladkaModel { Aktywnosc = true, NazwaZakladki = "Przypisek 3", Url = url.Action<Usc.Presentation.Areas.FU_RAU.Controllers.ARCH.Przypisek3Controller>(c => c.Edytuj(idAktu)) });
model.Add(new ZakladkaModel { Aktywnosc = true, NazwaZakladki = "Przypisek 4", Url = url.Action<Usc.Presentation.Areas.FU_RAU.Controllers.ARCH.Przypisek4Controller>(c => c.Edytuj(idAktu)) }); 
```

现在的问题是，在某些同事的计算机上，它会正确生成指向操作的链接，而在某些计算机上，它看起来像是从我们的应用程序中获取随机区域并尝试创建无效链接。我们可以使用一个简单的 url.Action("action","controler") ，它在所有方面都可以正常工作，但我们更喜欢 MvcContrib :)。有谁知道为什么会这样？或者可以分享一个替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:16:03.427

似乎在下面使用的 LinkBuilder 根本不使用 GetVirtualPatchForArea ，正如我所读的那样，这是 MVC 错误。所以我决定制作自己的 HtmlHelper 使用该方法：

```
 public static string ActionArea<TController>(this HtmlHelper urlHelper, Expression<Action<TController>> expression) where TController : Controller
{
     RouteValueDictionary routeValues = GetRouteValuesFromExpression(expression);
     VirtualPathData vpd = new UrlHelper(urlHelper.ViewContext.RequestContext).RouteCollection.GetVirtualPathForArea(urlHelper.ViewContext.RequestContext, routeValues);
   return (vpd == null) ? null : vpd.VirtualPath;
}

public static string ActionArea<TController>(this UrlHelper urlHelper, Expression<Action<TController>> expression) where TController : Controller
        {
            RouteValueDictionary routeValues = GetRouteValuesFromExpression(expression);
            VirtualPathData vpd = urlHelper.RouteCollection.GetVirtualPathForArea(urlHelper.RequestContext, routeValues);
            return (vpd == null) ? null : vpd.VirtualPath;
        }

public static RouteValueDictionary GetRouteValuesFromExpression<TController>(Expression<Action<TController>> action) where TController : Controller
        {
            if (action == null)
            {
                throw new ArgumentNullException("action");
            }

            MethodCallExpression call = action.Body as MethodCallExpression;
            if (call == null)
            {
                throw new ArgumentException("Akcja nie może być pusta.", "action");
            }

            string controllerName = typeof(TController).Name;
            if (!controllerName.EndsWith("Controller", StringComparison.OrdinalIgnoreCase))
            {
                throw new ArgumentException("Docelowa klasa nie jest kontrolerem.(Nie kończy się na 'Controller')", "action");
            }
            controllerName = controllerName.Substring(0, controllerName.Length - "Controller".Length);
            if (controllerName.Length == 0)
            {
                throw new ArgumentException("Nie można przejść do kontrolera.", "action");
            }

            // TODO: How do we know that this method is even web callable?
            //      For now, we just let the call itself throw an exception.

            string actionName = GetTargetActionName(call.Method);

            var rvd = new RouteValueDictionary();
            rvd.Add("Controller", controllerName);
            rvd.Add("Action", actionName);

            var namespaceNazwa = typeof(TController).Namespace;

            if(namespaceNazwa.Contains("Areas."))
            {
                int index = namespaceNazwa.IndexOf('.',namespaceNazwa.IndexOf("Areas."));
                string nazwaArea = namespaceNazwa.Substring(namespaceNazwa.IndexOf("Areas.") + 6, index - namespaceNazwa.IndexOf("Areas.") + 1);
                if (!String.IsNullOrEmpty(nazwaArea))
                {
                    rvd.Add("Area", nazwaArea);
                }
            }

            //var typ = typeof(TController).GetCustomAttributes(typeof(ActionLinkAreaAttribute), true /* inherit */).FirstOrDefault();
            /*ActionLinkAreaAttribute areaAttr = typ as ActionLinkAreaAttribute;
            if (areaAttr != null)
            {
                string areaName = areaAttr.Area;
                rvd.Add("Area", areaName);
            }*/

            AddParameterValuesFromExpressionToDictionary(rvd, call);
            return rvd;
        }

private static string GetTargetActionName(MethodInfo methodInfo)
        {
            string methodName = methodInfo.Name;

            // do we know this not to be an action?
            if (methodInfo.IsDefined(typeof(NonActionAttribute), true /* inherit */))
            {
                throw new InvalidOperationException(String.Format(CultureInfo.CurrentUICulture,
                    "Nie można wywoływać metod innych niż akcje.", methodName));
            }

            // has this been renamed?
            ActionNameAttribute nameAttr = methodInfo.GetCustomAttributes(typeof(ActionNameAttribute), true /* inherit */).OfType<ActionNameAttribute>().FirstOrDefault();
            if (nameAttr != null)
            {
                return nameAttr.Name;
            }

            // targeting an async action?
            if (methodInfo.DeclaringType.IsSubclassOf(typeof(AsyncController)))
            {
                if (methodName.EndsWith("Async", StringComparison.OrdinalIgnoreCase))
                {
                    return methodName.Substring(0, methodName.Length - "Async".Length);
                }
                if (methodName.EndsWith("Completed", StringComparison.OrdinalIgnoreCase))
                {
                    throw new InvalidOperationException(String.Format(CultureInfo.CurrentUICulture,
                       "Nie można wywoływać kompletnych metod.", methodName));
                }
            }

            // fallback
            return methodName;
        }

static void AddParameterValuesFromExpressionToDictionary(RouteValueDictionary rvd, MethodCallExpression call)
        {
            ParameterInfo[] parameters = call.Method.GetParameters();

            if (parameters.Length > 0)
            {
                for (int i = 0; i < parameters.Length; i++)
                {
                    Expression arg = call.Arguments[i];
                    object value = null;
                    ConstantExpression ce = arg as ConstantExpression;
                    if (ce != null)
                    {
                        // If argument is a constant expression, just get the value
                        value = ce.Value;
                    }
                    else
                    {
                        value = CachedExpressionCompiler.Evaluate(arg);
                    }
                    rvd.Add(parameters[i].Name, value);
                }
            }
        } 
```

希望这可以帮助有类似问题的人。上面的一些代码我从 mvc2-rtm-sources 获得修改为我的需要[http://aspnet.codeplex.com/releases/view/41742](http://aspnet.codeplex.com/releases/view/41742)

# android - 当我不知道异步任务何时完成工作时，如何让主线程等待。

> ID：14213642
> 
> 赞同：4
> 
> 时间：2013-01-08T11:08:13.400
> 
> 标签：android, android-asynctask

我正在使用异步任务解析包含一些名称的 xml 文件，并通过主线程再次将这些名称填充到列表视图中。但是在我的情况下发生的事情是，当异步任务仍在运行时，主线程已经将名称填充到列表视图中，这导致列表视图上没有任何项目。我应该让主线程等到异步任务完成工作还是有其他方法可以解决这个问题？如果是的话，当我不知道异步任务可能需要多长时间才能完成时，如何让主线程等待。？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T11:12:19.643

如果你想完成 AsycTask，那么你可以使用`.get()`AsyncTask 中的方法。（**这将阻止 MainUiThread**）

但我认为最好的方法是在不阻塞**MainUiThread**的情况下，您必须启动**ProgressDialog**`onPreExecute()`并在AsyncTask中填充**ListView**后完成**ProgressDialog**。`onPostExecute()`**`onPostExecute()`**

 *** * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T11:27:52.930

If you have used AsyncTask, then do the xml fetch in doInBackground() and update all your UI elements of the listview inside the onPostExecute(), this runs on the main UI thread and is automatically after doInBackground(). This way you dont have to explicitly make the UI thread wait

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T11:11:33.170

您不想阻塞主线程并等待异步任务（这会破坏异步任务的目的）。相反，异步任务应该在`onPostExecute`方法中完成时触发更新。

您可能还想看看最近的`Loader`设计。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-08T11:12:24.887

**-**首先，**Android**`Main`中的线程是.**`Dedicated UI thread`**

 ****-**您需要做的是通过使用名称解析 xml 来填充列表，然后继续在 ListView 上显示它。

**-**您可以使用`CoundDownLatch`from `java.util.concurrent`package 将数据填写到列表中，然后再显示在`ListView`.

**-**使用`await()`和`countDown()`of之类的方法`CoundDownLatch`来执行此操作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-08T11:11:47.323

使用[AsyncTask.get()](http://developer.android.com/reference/android/os/AsyncTask.html#get%28%29) 等待 AsyncTask 完成。

**注意：**这将停止执行 Main Thead，直到未从 AsyncTask 检索到结果

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-08T11:26:36.033

```
String str_result= new RunInBackGround().execute().get();
Log.e("","show this"); 
```

RunInBackGround is your AsyncTasc class name. First will run async task and when it finished will show the bellow message!****

# ms-word - Word 2013 公式：为什么 TRUE 函数不起作用？

> ID：14213643
> 
> 赞同：0
> 
> 时间：2013-01-08T11:08:15.547
> 
> 标签：ms-word

我正在尝试`TRUE`在 Word 表中使用该函数，但我只得到一个我无法解释的语法错误。两个类似的功能工作得很好。有什么问题？

我的 2 列 3 行的简单表指定了以下函数：

```
function             return
=OR(1=1;1=5)         1
=TRUE(1=1)           !Syntax Error, (
=NOT(1=1)            0 
```

公式参考： http: [//office.microsoft.com/en-us/word-help/use-a-formula-in-a-word-table-HA102329800.aspx#_Toc281293376](http://office.microsoft.com/en-us/word-help/use-a-formula-in-a-word-table-HA102329800.aspx#_Toc281293376)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:51:12.183

看起来 TRUE 不接受任何参数。它只返回 1，因为 FALSE 只返回 0。

```
function             return
=TRUE                1
=FALSE               0 
```

所以文档是错误的，我想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:01:23.780

首先，您链接到的文档适用于 Word 2007 和 2010，而不适用于 2013。但是，我同意您的看法 - 这看起来像一个文档错误。

在[此文档页面上](http://office.microsoft.com/en-us/word-help/field-codes-formula-field-HA102017594.aspx?CTT=5&origin=HA102749146)，我发现该`TRUE`函数在 Word 2007、2010 和 2013 中的记录行为被定义为：始终返回`1`- 解释出现语法错误的原因。

所以是的，这两页肯定是相互矛盾的，但我会去我提供的文档页面，因为它也涵盖了 Word 2013（这似乎是你正在使用的版本）。

# c# - 减少行数

> ID：14213644
> 
> 赞同：0
> 
> 时间：2013-01-08T11:08:15.943
> 
> 标签：c#, sql-server, sql-server-2008

在我的应用程序中，我有一个`Employee Swipedaily_Tbl`包含 11 列的 SQL Server 2008 表，其中插入了员工每日滑动。

我的公司有大约 8000 名员工。这意味着每天将至少创建 16000 行。

我打算在月底删除所有行并将它们保存到另一个表中以提高性能......或由应用程序本身将上个月的数据备份为 dmb 文件

由于我是 SQL Server 和 DBA 的新手，任何人都可以建议是否有更好的主意？

我可以从应用程序创建转储文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:39:31.040

要么使用[分区表](http://msdn.microsoft.com/en-us/library/ms190787.aspx)，因此在大容量数据库表中插入新数据不会影响其性能，要么使用脚本每月使用 SQL 作业备份数据并从现有数据中删除，但如果您使用的是标识列，则可能需要对脚本进行一些更改避免新旧数据冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:16:34.973

1.  创建一个相同的表
2.  创建一个 SQL 脚本，将所有早于给定日期（比如今天的日期）的数据复制到该表并从表中删除
3.  配置 SQL 代理作业以在每月 1 日执行该脚本

但是，通过适当的索引，您应该可以将原始表本身中的数据重新计算更长的时间 - 365 天 x 8000 名员工 x 2 次滑动 = 584 万条记录，对于 SQL Server 来说处理不了太多。

拉吉

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T11:20:49.407

您可以创建另一个`Swipedaily_Tbl(11 columns)`与其他列相同的表，该列将告诉您何时将特定记录插入到备份表中。然后，您可以创建一个脚本来备份超过一个月的数据并从原始表中删除该数据。然后，您可以创建可以安排在月底运行的批处理或控制台应用程序。

希望这有帮助。

谢谢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T11:21:39.433

这将取决于您对“旧”数据的要求。就个人而言，我强烈考虑使用表分区。请参阅：[http ://technet.microsoft.com/en-us/library/dd578580(v=sql.100).aspx](http://technet.microsoft.com/en-us/library/dd578580(v=sql.100).aspx)

将所有记录保存在表格中；这将使同时查看当前和历史数据的查询更简单，并且可能更便宜。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T16:39:22.800

通常情况下，这取决于。本机分区需要 SQL Server 企业版，但是有一些方法可以绕过它（虽然不是很干净），[比如](http://www.simple-talk.com/sql/sql-tools/sql-server-partitioning-without-enterprise-edition/).

如果您确实有 SQL Server 的企业版，我会认真考虑分区（在此处的其他一些答案中有很好的链接），但是我不会按月拆分，可能会按季度或半年拆分，因为每天两次滑动少于每月一百万行，以及 1.5-3 百万。行表对于 SQL Server 来说并不能处理那么多。

如果您此时遇到性能问题，可能有几个月的数据，您是否检查过最常访问表的查询并确保它们使用索引？

# objective-c - 如何在我的 iOS 应用程序中从 SHOUTCast 流式传输在线广播？

> ID：14213645
> 
> 赞同：3
> 
> 时间：2013-01-08T11:08:15.660
> 
> 标签：objective-c, ios, audio-streaming, internet-radio

我正在开发一个 iPhone Online Radio Streamer 应用程序。我使用 Matt Gallaher 的 AudioStreamer 类从 SHOUTCast 流式传输在线电台。但问题是AudioStreamer API已经被废弃，无法播放各种广播频道。我用谷歌搜索并找到了各种替代方案，包括：AVPlayer、MPMoviePlayer 等。

请推荐最能满足要求的玩家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T11:14:56.363

您可以使用 MPMovieplayerviewcontroller。它非常适合流式传输音频/视频。我也是

使用它在我的一个应用程序中流式传输音频，而且它看起来像 iPhone 的默认播放器。

好的，这是我在项目中使用此播放器的编码：

```
 NSString *geturl = [[radiotablearray objectAtIndex:btntag]objectForKey:@"iurl"];
    NSLog(@"geturl..%@",geturl);
    NSURL *fileURL=[NSURL URLWithString:geturl];
    NSLog(@"fileURL..%@",fileURL);
    moviePlayerController = [[MPMoviePlayerViewController alloc] initWithContentURL:fileURL];
    [moviePlayerController.moviePlayer prepareToPlay];
    moviePlayerController.moviePlayer.shouldAutoplay=YES;
    moviePlayerController.view.frame = self.view.frame;
    [self presentMoviePlayerViewControllerAnimated:moviePlayerController];
[moviePlayerController.moviePlayer play]; 
```

还要在 App 中添加 mediaplayer 和 Avfoundation 框架。并在 .h 文件中添加或导入这两个：

```
#import <MediaPlayer/MediaPlayer.h>
#import <AVFoundation/AVFoundation.h> 
```

& 将`#import <MediaPlayer/MediaPlayer.h>`其导入 .m 文件。还在 .h 文件中制作如下播放器的属性：

```
MPMoviePlayerViewController *moviePlayerController;
 @property(strong,retain)  MPMoviePlayerViewController *moviePlayerController; 
```

并在您想要的地方添加方法，但也可以根据您的需要更改代码我只是将我的实现代码发送给您，您只需根据您的要求更改它。如果你有任何问题然后问我。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-19T09:39:07.163

```
// viewcontroller.h

MPMoviePlayerViewController *moviePlayer;

//viewcontroller.m 
```

这是在`viewDidLoad`

```
moviePlayer = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@",@"http://sample url"]]];

[moviePlayer.moviePlayer prepareToPlay];

moviePlayer.view.hidden = YES;

[self.view addSubview:moviePlayer.view];

[moviePlayer.moviePlayer play]; 
```

# r - 在 R 中调用 RPostgreSQL 的函数

> ID：14213646
> 
> 赞同：1
> 
> 时间：2013-01-08T11:08:24.220
> 
> 标签：r, function, call, rpostgresql

我在 R 中很新。我正在使用`RPostgreSQL`并且我想利用代码自动将新表写入数据库。我正在使用此代码，但我不知道如何调用它。

```
ndatatwrit <- list(n25,n28,n29,n31,n32)
lapply (ndatatwrit, function(i) {dbWriteTable (con,"i",ndatatwrit[[i]],overwrit)}) 
```

其中`n25`, `n28`, `n29`, `n31`,`n32`是新表。

# ios - iOS上的Phonegap - 如何让偏好出现在设备的“设置”中

> ID：14213648
> 
> 赞同：10
> 
> 时间：2013-01-08T11:08:37.177
> 
> 标签：ios, cordova

在 iOS 上，应用程序的设置可以显示在 phonegap 应用程序之外的操作系统级别设置应用程序中。

![在此处输入图像描述](../Images/2a40a8e738cdcf53edd10d0f7a0e95b4.png)

在 Phonegap 中，如何让我的应用程序设置显示在那里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T11:20:10.787

你必须使用这个插件

[应用程序偏好插件](https://github.com/phonegap/phonegap-plugins/tree/DEPRECATED/iOS/ApplicationPreferences)

# scripting - 脚本操作员 - 有什么方法可以让它更短？

> ID：14213657
> 
> 赞同：0
> 
> 时间：2013-01-08T11:09:26.780
> 
> 标签：scripting

在脚本方面我不是新手，但我一直想知道！假设我想检查“num”是否等于 2 或等于 4、6 和 8。

```
if(num == 2 || num == 4 || num == 6 || num == 8) 
```

但是，有什么办法可以让它变短吗？就像是

```
if(num == 2 || 4 || 6 || 8) 
```

我知道它不起作用，但我只是想知道。学习一些东西会很酷。

编辑：例如使用上述数字。数学公式对我不起作用，因为我实际上想在“num”和变量名之间进行比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:45:06.857

在 PHP 中，您可以执行以下操作：

```
if (in_array($num, array(2, 4, 6, 8)) !== false) {
} 
```

在 jQuery 中，您可以执行以下操作：

```
if ($.inArray(num, new Array(2, 4, 6, 8))) {
} 
```

如果语言 X 没有提供这样的函数，那么您可以编写一个函数来循环并进行检查，直到成功，然后以 true 退出循环，否则返回 false。

# c# - LINQ C# 构建具有匿名类型的表达式

> ID：14213658
> 
> 赞同：1
> 
> 时间：2013-01-08T11:09:27.713
> 
> 标签：c#, linq, lambda, expression

我有`BinaryTree<Student>`DeserializedStudents 和 linq 查询：

```
var students = DeserializedStudents.OrderBy(testResult => testResult.Test_Result).
Select(cust => new { name = cust.Name, result = cust.Test_Result }); 
```

有人可以告诉我如何构建一个等于这个查询的表达式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:20:47.387

使用复杂的表达式，您可以作弊并查看编译器的作用：

```
Expression<Func<IEnumerable<Student>, IEnumerable<Student>>> expression = 
  query => query
    .OrderBy(testResult => testResult.Test_Result)
    .Select(cust => new { name = cust.Name, result = cust.Test_Result }); 
```

只需`expression`在调试器中查看即可。

顺便说一句，[LINQPad](http://www.linqpad.net/)对此非常有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:21:30.140

您可以使用`IQueryable`接口实现基于以下内容自动构建表达式`LinQ`：

```
var query = DeserializedStudents.AsQueryable()
    .OrderBy(testResult => testResult.Test_Result)
    .Select(cust => new { name = cust.Name, result = cust.Test_Result });

var expression = query.Expression; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T11:16:20.467

像这样？：

```
var students = from cust in DeserializedStudents
               orderby cust.Test_Result
               select new { name = cust.name, result = cust.Test_Result }; 
```

# python - 在 Gui 中显示图像

> ID：14213662
> 
> 赞同：0
> 
> 时间：2013-01-08T11:09:43.910
> 
> 标签：python, user-interface, python-imaging-library

我需要在 Gui 中实现一个函数，所以你按下按钮`mirror`，它会调用函数`flip`，并在 Gui 中显示 img。
假设插入到`mirror`/的图片`flip`是B&W img。
我检查了一下`flip`，它工作正常，但当我试图将它组合到`Gui`.
我错过了什么？

```
def flip(im):
    '''Flips a picutre horizontally, and returns a new image that is a mirror view of the original'''
    org=Image.open(im)
    new=Image.new("L",org.size)   
    for x in range(org.size[0]):
        for y in range(org.size[1]):
            pixel=org.getpixel((x,y))
            new.putpixel((org.size[0]-x-1,y),pixel)
    return new

def mirror():
    '''Flips the image like a mirror does, left to right'''
    global img
    out = Image.new('L',img.size, 'white')
    out=flip(img)
    img = out  
    display() 

def display():
    delete()
    global img
    global photo
    photo = ImageTk.PhotoImage(img)
    canvas.create_image(250, 250, image=photo)
    canvas.pack()

### GUI packing ###
g = Gui()    
g.title('PhotoPy 0.2')
global img
### canvas
canvas=g.ca(500, 500, bg='white')

### menu 
g.row(weights=[1,0,0,0])
filename = g.en(text='python.bmp', width=16)
g.bu(text='...', command=browse)
g.bu(text='Save', command=save)
g.bu(text='Load', command=load)
g.bu(text='Mirror', command=mirror)
g.endrow() 
### start
g.mainloop() 
```

我收到此错误消息：

```
Exception in Tkinter callback
Traceback (most recent call last):
  File "C:\Python27\lib\lib-tk\Tkinter.py", line 1410, in __call__
    return self.func(*args)
  ... line 87, in mirror
    out=flip(img)
  ... line 24, in flip
    org=Image.open(im)
  ... line 1956, in open
    prefix = fp.read(16)
  ... in __getattr__
    raise AttributeError(name)
AttributeError: read 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:32:38.930

假设`Image`是`pil.Image`，该`open`函数需要一个文件名或一个文件对象作为参数。在您的代码`img`中可能是`None`因为您没有在任何地方设置它。

另一方面，如果您不确定是否真的需要它们，则不应为图像使用全局变量，或者一般使用全局变量。将您的代码重构为具有图像作为属性的类。此外，声明`photo`为 global in`display`是完全不必要的，因为`display`无论如何你只使用它。

# openlayers - 返回圆形/多边形内的要素

> ID：14213664
> 
> 赞同：1
> 
> 时间：2013-01-08T11:09:44.823
> 
> 标签：openlayers, geoserver, wps

我是 Openlayers 的新手，不确定这个问题是否属于 Openlayers 或 Geoserver 的范围。我在地图上以图层的形式显示了一些 poi 数据。

要求是用户可以在地图上的任何位置绘制圆形或多边形，并且我必须拉出该区域内的所有 POI。

我不确定如何实施。我正在使用 createRegularPolygon 创建圆形或多边形，但不确定它如何获取圆形内的特征。有什么输入吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T23:29:31.780

为此，您需要使用 WPS（Web 处理服务）。它在 Geoserver 中可用，甚至在 Geoserver 中还有一个 Request Builder，请参见此处：

[Geoserver WPS 请求生成器](http://docs.geoserver.org/stable/en/user/extensions/wps/requestbuilder.html#wps-request-builder)

这是一个相关的问题，我认为它与您想做的事情相同：

[gis.stackexchange.com - 显示用户定义多边形的特征信息](https://gis.stackexchange.com/questions/28318/displaying-feature-info-for-a-user-defined-polygon)

您应该在那里发布所有与 GIS 相关的问题，因为有更多人知道 GIS 问题的答案。

# database - Ganglia - RRD（循环数据库）可扩展性

> ID：14213667
> 
> 赞同：1
> 
> 时间：2013-01-08T11:09:56.023
> 
> 标签：database, rrdtool, ganglia

我最近通过尝试神经节监控系统遇到了 RRD。Ganglia 将监控数据存储在 RRD 中。我只是想知道，从可扩展性的角度来看，RRD 是如何工作的？如果我有潜在的大量数据要存储怎么办。像 ganglia 案例一样，如果我想存储所有历史监控统计信息，而不是仅存储最近使用特定 TTL 的数据，RRD 是否足以应付这种情况？

使用 RRD 的人可以分享一些关于 RRD 如何扩展的经验，以及它与 RDBMS 甚至大表相比如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T13:01:31.087

rrdtool 的内置整合功能是可配置的，因此根据您的磁盘空间，您可以使用 rrdtool 存储的高精度数据量没有限制。同样由于它的设计，rrdtool 数据库永远不需要被清理或以其他方式维护，因此您可以将设置扩展到惊人的大小。显然，您需要足够的内存和快速磁盘来让 rrdtool 处理大数据，但这对于任何大数据步骤都是一样的。

有些人对 rrdtools 的功能感到困惑，因为您也可以在微型嵌入式系统上运行它，当这些人开始在阁楼上的旧电脑上记录千兆字节的数据并发现它无法处理时，他们想知道...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T11:34:14.410

RRD 旨在随着时间的推移自动模糊（平均化）您的数据，以便数据库的总大小保持大致相同，即使新数据不断到达。

所以，只有当你想要一些历史数据并且愿意随着时间的推移而失去精确度时，它才是好的。

换句话说，您无法真正将 RRD 与标准 SQL 数据库或 Bigtable 进行比较，因为标准 SQL 和 NoSQL 数据库都精确地存储数据——您将准确地阅读所写的内容。

然而，对于 RRDtool，没有这样的保证。但它的速度使其成为各种监控解决方案的有吸引力的解决方案，其中只有最近的数据很重要。

# java - 使用 RSA 的解密结果在普通 Java 和 Android 中有所不同

> ID：14213668
> 
> 赞同：0
> 
> 时间：2013-01-08T11:09:58.067
> 
> 标签：java, android, rsa, pki

我加密/解密如下消息：加密字符串 -> base64 编码字节 -> 序列化字符串 -> 反序列化字符串 -> 解码 b64 -> 解密字节。

加密看起来像这样：

```
PublicKey pubKey = readPublicKey();
Cipher cipher;
cipher = Cipher.getInstance(CRYPTO_ALG);
cipher.init(Cipher.ENCRYPT_MODE, pubKey);
byte[] cipherData;
cipherData = cipher.doFinal(message.getBytes());
return cipherData; 
```

解密是这样完成的：

```
PrivateKey pk = readPrivateKey();
Cipher cipher = Cipher.getInstance(CRYPTO_ALG);
cipher.init(Cipher.DECRYPT_MODE, pk);

return new String(cipher.doFinal(data)); 
```

密钥是这样读取的：

```
ObjectInputStream oin =
   new ObjectInputStream(new BufferedInputStream(is));
BigInteger m = (BigInteger) oin.readObject();
BigInteger e = (BigInteger) oin.readObject();

RSAPrivateKeySpec keySpec = new RSAPrivateKeySpec(m, e);
KeyFactory fact = KeyFactory.getInstance("RSA");
PrivateKey privKey = fact.generatePrivate(keySpec);

return privKey; 
```

我在这里省略了 b64 的东西，但我已经验证问题不会影响该代码。

现在发生的事情是我实际上得到了正确的答案，但它前面带有二进制乱码。如果我加密“TESTDATA”，我将得到 TESTDATA。该代码在纯 Java 中运行良好，但在 Android 中失败。有谁知道如何解决这一问题？

编辑：使用 RSA/NONE/NoPadding 加密/解密似乎没有帮助。我还在普通的 JRE 中使用 org.bouncycastle。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:20:58.257

根据我的经验，默认值是 Java 加密中难以发现的错误的巨大且永无止境的来源。他们可以咬任何人，但他们捕食初学者。初学者最有可能选择默认值，因为就其本质而言，他们会感到困惑并寻求简化。而且它们很难被发现，实际上几乎是看不见的，因为它们*不*存在。当你看它时，`String.getBytes()`它看起来完全无辜。为什么初学者会*怀疑*`new String(s.getBytes())`不等于？最糟糕的是，测试似乎表明这是真的。只有当您将from传输到具有不同平台默认字符集的另一个平台时，您才会注意到该错误。 *`s``byte[]``s.getBytes()`*

 *永远不要用[`String.getBytes()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#getBytes%28%29)，永远用[`String.getBytes(Charset)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#getBytes%28java.nio.charset.Charset%29)。永远不要使用[`String(byte[])`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#String%28byte%5B%5D%29)构造函数，总是使用[`String(byte [], Charset)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#String%28byte%5B%5D,%20java.nio.charset.Charset%29)构造函数。您始终可以使用 UTF-8 字符集 ( `Charset.forName("UTF-8")`)。我专门使用它。

同样，始终在工厂方法中指定所有三个组件*算法/模式/填充。*[`Cipher.getInstance(String)`](http://docs.oracle.com/javase/6/docs/api/javax/crypto/Cipher.html)*

# vb.net - 在winrt的vb.net中设置不透明度动画

> ID：14213671
> 
> 赞同：0
> 
> 时间：2013-01-08T11:10:07.367
> 
> 标签：vb.net, xaml, animation, windows-runtime, opacity

我在 winrt 和 xaml 中有以下代码：

```
<Storyboard x:Name="myStoryboard">
<DoubleAnimation
Storyboard.TargetName="myImage"
Storyboard.TargetProperty="Opacity"
From="1.0" To="0.0" Duration="0:0:3"
AutoReverse="True" RepeatBehavior="Forever" />
</Storyboard> 
```

我想将此代码转换为 vb.net，以便我可以为任何图像动态设置动画。我的问题是，在 vb.net 中，似乎行 Animation.Storyboard.SetTargetName(xBewegung, "Opacity") ，其中 xBewegung 是双动画，创建失败：WinRT-Informationen：未指定动画目标。

在某些示例中，我看到类似 new PropertyPath("Opacity") 的内容，但这似乎在 winrt 下不起作用。

那么正确的语法是什么。

下一个问题：是否有一个很好的来源可以查看我需要哪些字符串，例如需要“Image.Angle”等的旋转变换。

提前致谢， 巴西利乌斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:19:57.263

您可以使用对对象的引用来设置动画目标：

```
Dim sb As New Storyboard()
Dim da As New DoubleAnimation()
da.From = 1
da.To = 0
da.Duration = New Duration(TimeSpan.FromSeconds(3))
da.AutoReverse = True
da.RepeatBehavior = RepeatBehavior.Forever
sb.Children.Add(da)

Storyboard.SetTarget(da, myImage) //myImage is the reference to the Image control
Storyboard.SetTargetProperty(da, "Opacity") 
```

你可能有一个参考。这样您就不必处理元素名称。问题`.SetTargetName`在于 WinRT 缺乏`NameScopes`. 不幸的是，我无法让它工作。但`SetTarget`无论如何，在许多情况下应该是更好的解决方案。

# ruby-on-rails - FactoryGirl 中的条件

> ID：14213678
> 
> 赞同：0
> 
> 时间：2013-01-08T11:10:33.840
> 
> 标签：ruby-on-rails, rspec, mongoid, factory-bot, where-clause

我正在尝试使用 Ruby On Rails 和 MongoDb 作为后端创建一个应用程序。我正在使用 FactoryGirl 进行测试。

由于我是这些技术的新手，我不确定是否可以使用 where 条件并在 FactoryGirl 中查询模型中的数据。帮助将是可观的。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:13:37.003

如果没有您的代码，很难给出细节，但是，如果您查看FactoryGirl 文档中的[惰性属性](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#lazy-attributes)，您将看到以下示例：

```
factory :user do
  # ...
  activation_code { User.generate_activation_code }
  date_of_birth   { 21.years.ago }
end 
```

注意**activation_code**和**date_of_birth**属性——它们在构建时使用惰性属性来获取值。块定义（大括号）允许您编写任何 Ruby 代码（包括对现有数据进行 ActiveRecord 查询）。此块的结果将分配给该属性。

# ruby-on-rails - Nailgun 模式下 JRuby 1.7 上的 Rails 应用程序无法启动

> ID：14213679
> 
> 赞同：10
> 
> 时间：2013-01-08T11:10:36.210
> 
> 标签：ruby-on-rails, jruby, nailgun

我在 RVM 中安装了 JRuby 1.7.2，创建了一个 gemset，执行了捆绑安装。现在，我运行这个：

第 1 学期：

```
[lzap@lzapx my_app]$ bundle exec jruby --ng-serv
NGServer started on all interfaces, port 2113. 
```

第 2 学期：

```
[lzap@lzapx my_app]$ JRUBY_OPTS="--1.9 --ng" bundle exec rails s 
```

问题是什么都没有发生，终端不打印任何东西，它只是永远挂起。Top 没有显示任何 java/jruby 进程正在工作。

如果我尝试在没有 --ng 的情况下启动应用程序，它可以正常工作。问题是什么？打包机？

防火墙当然是禁用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T19:32:01.020

### 一台钉枪服务器

可以为 rails 生成 binstub ...</p>

```
$ bundle binstubs rails 
```

…并对其进行编辑以设置 JRUBY_OPTS。

```
ENV['JRUBY_OPTS'] = '--1.9 --ng --nailgun-port 2113'
load Gem.bin_path('rails', 'rails') 
```

这样，只有客户端的捆绑器包装部分在捆绑器包装的 nailgun 服务器中执行。

由于 nailgun 不传播信号，您可能需要使用控制器来停止它：

```
class RailsController < ApplicationController
  def stop
    Process.kill :INT, 0
  end
end 
```

基准：

```
$ time bin/rails -v  # modified
Rails 3.0.11

real    0m3.737s
user    0m6.579s
sys     0m0.223s

$ time bin/rails -v  # unmodified
Rails 3.0.11

real    0m5.547s
user    0m12.739s
sys     0m0.411s

$ time bundle exec rails -v
Rails 3.0.11

real    0m9.145s
user    0m20.708s
sys     0m0.682s 
```

### 两个钉枪服务器

理论上可以使用第二个“非捆绑执行”服务器。为避免显式重启但允许杀死（按两次 Ctrl-C），我建议使用此循环：

```
$ while sleep 1; do jruby --ng-server 2112; done 
```

第二个 nailgun 实例的端口必须在外部客户端中指定：

```
$ JRUBY_OPTS='--1.9 --ng --nailgun-port 2112' bin/rails s 
```

我没有看到性能改进，并且出现在“错误”控制台中的输出很烦人。但也许这在其他系统上更快。其他人可能会看到改进这种方法的方法？

# google-visualization - 具有双 y 轴 Google 图表的多个基线

> ID：14213680
> 
> 赞同：2
> 
> 时间：2013-01-08T11:10:38.963
> 
> 标签：google-visualization

我将 Google Visualization API 用于一个简单的销售图表，该图表有两个系列，即销售数量和销售价值，我在带有两个垂直轴的柱形图上显示。销售价值可以是负数，例如退货，但这会导致图表显示两个不同的基线。销售数量的零基线与最低销售价值数字一致。这是带有一些示例数据的代码示例：

```
google.load('visualization', '1.0', { 'packages': ['corechart'] });
google.setOnLoadCallback(drawSalesChart);

function drawSalesChart() {
    var dataTable = new google.visualization.DataTable();
    dataTable.addColumn('string', 'Order Source');
    dataTable.addColumn('number', 'Num Sales');
    dataTable.addColumn('number', 'Sales Value');

    dataTable.addRows([
        ['Web (Order)', 300, 31000],
        ['Call Centre (Order)', 700, 61000],
        ['Call Centre (Return)', 50, -4100],
        ['Call Centre (Exchange)', 10, 800]
    ]);

    var options = {
        title: 'Sales by Order Source',
        hAxis: { title: 'Order Source' },
        series: {
            0: { targetAxisIndex: 0 },
            1: { targetAxisIndex: 1 },
        },
        vAxes: {
            0: { title: 'Num Sales' },
            1: { title: 'Sales Value' }
        }
    };

    new google.visualization.ColumnChart(
        document.getElementById('livesales-chart-container')).draw(dataTable, options);
} 
```

我已经阅读了 API 文档，因为有关于设置基线的信息，但似乎没有办法将每个 vAxis 的零与同一点联系起来。我试过搜索 Google 和 StackOverflow，也有类似的问题，但我看不到有人遇到过这个问题。

我怎样才能，甚至怎样才能为两个系列显示一个零基线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:54:53.787

从可视化的角度来看，创建两个单独的图表可能会更好，因为提供的数据在范围和解释的内容上都非常不同。

```
<!--
You are free to copy and use this sample in accordance with the terms of the
Apache license (http://www.apache.org/licenses/LICENSE-2.0.html)
-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>
      Google Visualization API Sample
    </title>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load('visualization', '1', {packages: ['corechart']});
    </script>
    <script type="text/javascript">

      function drawSalesChart() {
        var dataTable = new google.visualization.DataTable();
        dataTable.addColumn('string', 'Order Source');
        dataTable.addColumn('number', 'Num Sales');
        dataTable.addColumn('number', 'Sales Value');

        dataTable.addRows([
          ['Web (Order)', 300, 31000],
          ['Call Centre (Order)', 700, 61000],
          ['Call Centre (Return)', 50, -4100],
          ['Call Centre (Exchange)', 10, 800]
        ]);

        var dataView1 = new google.visualization.DataView(dataTable);
        dataView1.setColumns([0,1]);

        var dataView2 = new google.visualization.DataView(dataTable);
        dataView2.setColumns([0,2]);

        var options1 = {
          title: 'Sales by Order Source',
          hAxis: { title: 'Order Source' },
          vAxis: { title: 'Num Sales' }
        };

        var options2 = {
          title: null,
          hAxis: { title: null, textPosition: 'none' },
          vAxis: { title: 'Sales Value' }
        };

        new google.visualization.ColumnChart(
          document.getElementById('chart1')).draw(dataView1, options1);
        new google.visualization.ColumnChart(
          document.getElementById('chart2')).draw(dataView2, options2);
      }

      google.setOnLoadCallback(drawSalesChart);

    </script>
  </head>
  <body style="font-family: Arial;border: 0 none;">
    <div id="chart1" style="width: 600px; height: 300px;"></div>
    <div id="chart2" style="width: 600px; height: 100px;"></div>
  </body>
</html> 
```

当然，这需要一些修饰以使图形正确排列，并使颜色按您的意愿工作，但这样您就可以专注于您想要显示的主要数据，同时保留其他信息附近作为参考。

如果您坚持在同一张图上执行它们，您将需要编写一个函数来计算网格线的位置（或者弄清楚谷歌是如何做到的，但我在网络搜索中找不到它）。

要弄清楚图表上的最大值/最小值应该是多少，一种“简单”的方法是取最小值和最大值之间的差，计算您将拥有的网格线数（谷歌的默认值为 5），四舍五入直到您最大数字的最接近的有效数字，并将它们用作您的网格线分隔线。

例如取你的第一列：300​​、700、50、10

```
Max Value: 700
Min Value: 10
Exponent: LEN(Max)-1 = 2 = 10^2, nearest 100
Grid Lines: 5 - 1 = 4 (assuming you want the bottom value to serve as the floor at the same rounding, you need 4 more iterations to go over the top value)
Difference Between Max and Min: 690
Required Interval: 690 / 4 = 172.5
Rounded up to the nearest 100: 200

Min Value: FLOOR(Min,200) = 0
Max Value: CEILING(Max,200) = 800

Grid Line 1: 0
Grid Line 2: 200
Grid Line 3: 400
Grid Line 4: 600
Grid Line 5: 800 
```

请注意，这与您的图表显示的内容相符。但是，它不适用于负值，因为数学变得有点复杂。

首先，您需要计算出负值与最小值和最大值的总差值之比。

例如，给定您的第 2 列数据：31000、61000、-4100、800

```
Min Value: -4100
Max Value: 61000
Difference: 65100
Negative Ratio: 6.3% 
```

所以你范围的 6.3% 在负数部分。给定 5 条网格线，这意味着 1 条网格线需要低于 0，而正数部分只有 4 条网格线。由于负部分小于正部分，正部分将决定网格线间距。

所以现在你有 4 条网格线来覆盖正部分 (0 - 61000)，这意味着你有 3 个从 0 到 61000 的线段。

这意味着 61000 / 3，四舍五入到 4 位有效数字，即 30,000。

这使您的网格线：

```
-30,000
0
30,000
60,000
90,000 
```

巧合的是，这就是你在图表中得到的。

现在您知道第二个系列有 1 个负网格线，您必须重新调整您的第一个系列以匹配第二个系列。因此，您现在没有 5 条网格线（上面的 0 和 4 条），而是有 1 条负网格线，1 0，然后 3 高于零，需要达到 700。因此，您将 700 正值除以 3，得到 233.333 .

将其四舍五入到最接近的 100，得到 300。

因此，您的第一个图表最大/最小值将重新调整为 -300，以下网格线为 900：

```
-300
0
300
600
900 
```

这将设置相同的基线。

这将解决您的问题——您需要做的就是将该逻辑编码到 Javascript 中！如果您这样做，请告诉我们，我相信其他人也会遇到同样的问题。

# javascript - 将事件处理程序添加到 jquery 滑块的咖啡脚本类

> ID：14213681
> 
> 赞同：0
> 
> 时间：2013-01-08T11:10:43.080
> 
> 标签：javascript, jquery, coffeescript

我是一个咖啡脚本新手，想在一个客户端视图上使用多个 jquery 滑块。我想将幻灯片事件用于几个功能。滑块显示，值在开始时显示，滑块可用，但未使用事件。

```
class Slider  
 constructor: (@min, @max, @value, @id) ->
   d3.select(@id).attr("style", "width: 500px; margin: 15px;")
   @myslider = $(@id).slider
     min: @min
     max: @max
     value: @value
   $(@id).bind
  slide: @slideme

 slideme: (event, ui) =>
   $(@id +"_data").val(@value)

$(document).ready ->
  slider1 = new Slider(0,800,100,'#testslider')
  $("#testslider_data").val($("#testslider").slider("value")) 
```

使用滑块时，我需要做什么才能使 html 中显示的幻灯片的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:35:30.150

您的缩进已关闭。这个：

```
 $(@id).bind
slide: @slideme 
```

应该是这样的：

```
$(@id).bind
  slide: @slideme 
```

或者：

```
$(@id).bind slide: @slideme 
```

或者我个人最喜欢的：

```
$(@id).bind(slide: @slideme) 
```

CoffeeScript 对空格和格式非常敏感，您的格式定义了大部分代码的结构，因此您**必须**小心且一致；您正在为缩进混合一个和两个空格，这只会造成麻烦。

您的原始代码：

```
constructor: (@min, @max, @value, @id) ->
  #...
  $(@id).bind
 slide: @slideme 
```

会是这样的：

```
constructor: (@min, @max, @value, @id) ->
  #...
  $(@id).bind

slide: @slideme 
```

因此，您`slide: @slideme`打算用于的参数`bind`将看起来像该类的另一个属性，并且最终将作为以下 JavaScript：

```
Slider.prototype.slide = Slider.slideme; 
```

将您的代码粘贴到coffeescript.org 的**TRY COFFEESCRIPT**[面板](http://coffeescript.org/)中，您将看到它认为您的CoffeeScript 意味着什么。

# php - 发布指向未显示页面的链接？

> ID：14213682
> 
> 赞同：0
> 
> 时间：2013-01-08T11:10:45.240
> 
> 标签：php, facebook, facebook-php-sdk, facebook-page

```
<?php
$appId  =   'XXXXX';
$pageId =   'XXXXX';
$secret =   'XXXXX';
$token  =   'XXXXX';

$data   =   array(
    'access_token'  => $token,
    'description'   => 'test_description',
    'link'          => 'http://www.google.co.uk',
    'message'       => 'test_message',
    'name'          => 'test_name'
);

try
{
    require_once 'facebook/facebook.php';

    $sdk    =   new Facebook(
        array(
             'appId'    => $appId,
             'secret'   => $secret,
             'cookie'   => true
        )
    );

    $post   =   $sdk->api('/'.$pageId.'/feed', 'POST', $data);

    print_r($post);
}
catch (FacebookApiException $e)
{
    echo $e;
}
?> 
```

使用上面的代码，我试图在我的页面墙上发布指向 Google 的链接。当我运行代码时，我得到了我所期望的 ID 响应。然而，尽管拥有有效的 ID，但页面上没有显示任何内容。

如果我删除“链接”并重试，我会得到另一个 ID，并且帖子会显示在我的页面上。

难道我做错了什么？

为什么“链接”值会导致返回ID但不显示帖子？

* * *

这是 Facebook 看到的（通过 Graph API 浏览器查询）：

```
{
  "id": "484729401573953",
  "created_time": "2013-01-08T12:03:27+0000",
  "caption": "www.readesresidential.com",
  "description": "test_description",
  "from": {
    "name": "David Reade",
    "id": "100003544363105"
  },
  "icon": "http://static.ak.fbcdn.net/rsrc.php/v2/yD/r/aS8ecmYRys0.gif",
  "link": "http://www.readesresidential.com/brookside-crescent-northop-hall-ch7-6hw-ps03009/",
  "message": "test_message",
  "name": "test_name",
  "picture": "http://external.ak.fbcdn.net/safe_image.php?d=AQC7MpbP6aNe2CVP&w=90&h=90&url=http%3A%2F%2Fwww.readesresidential.com%2Fframework%2Fstatic-487d%2F2%2Fimg%2Fv3%2Ffacebook.png",
  "privacy": {
    "description": "Friends",
    "value": "ALL_FRIENDS",
    "allow": "",
    "deny": "",
    "networks": "",
    "friends": ""
  }
} 
```

我可以看到它说“ALL_FRIENDS” - 这可能是导致帖子不显示的原因吗？您不能与页面成为朋友，可以吗？

* * *

我现在已将“数据”变量修改为以下内容：

```
$data   =   array(
    'access_token'  => $token,
    'description'   => 'test_description',
    'link'          => 'http://www.readesresidential.com/go/ps02618',
    'message'       => 'test_message',
    'name'          => 'test_name',
    'privacy'       => array(
        'value'   => 'EVERYONE'
    )
); 
```

来自 Graph API 浏览器的响应是：

```
{
  "id": "454654274601000",
  "created_time": "2013-01-08T12:14:52+0000",
  "caption": "www.readesresidential.com",
  "description": "test_description",
  "from": {
    "name": "David Reade",
    "id": "100003544363105"
  },
  "icon": "http://static.ak.fbcdn.net/rsrc.php/v2/yD/r/aS8ecmYRys0.gif",
  "link": "http://www.readesresidential.com/church-street-tarvin-ch3-8eb-ps02618/",
  "message": "test_message",
  "name": "test_name",
  "picture": "http://external.ak.fbcdn.net/safe_image.php?d=AQC7MpbP6aNe2CVP&w=90&h=90&url=http%3A%2F%2Fwww.readesresidential.com%2Fframework%2Fstatic-487d%2F2%2Fimg%2Fv3%2Ffacebook.png",
  "privacy": {
    "description": "Public",
    "value": "EVERYONE",
    "allow": "",
    "deny": "",
    "networks": "",
    "friends": ""
  }
} 
```

即使帖子现在是“公开的”并且我使用了一个全新的 URL，它仍然没有显示。

这可能是 Facebook 的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:30:55.270

> 为什么“链接”值会导致返回ID但不显示帖子？

如果同一用户再次发布相同的链接（这两个帖子之间只有一定的时间），通常会发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:06:05.233

在修改了代码之后，我发现了如何解决这个问题。结果我使用的访问令牌不正确，即使调试器工具说它是有效的并且具有适当的权限。

我必须查询 Graph API，特别是 /me/accounts 位，它使用返回页面信息但完全不同的访问令牌的访问令牌。这个有问题的访问令牌没有过期时间（我认为这个功能已经没有了？？）并且在将它插入我的代码后，帖子现在可以正确显示给所有用户。

这些步骤都没有在任何地方的 Facebook 文档中，如果它们是，那么它们就很难找到。

# objective-c - 用于类延续的 Xcode 代码片段？

> ID：14213686
> 
> 赞同：2
> 
> 时间：2013-01-08T11:11:05.573
> 
> 标签：objective-c, ios, xcode, code-snippets

我有一个用于创建属性的 Xcode (4.6) 代码片段——一个用于弱属性，一个用于强属性：

![Xcode 代码片段编辑器中的弱/强属性片段](../Images/db3d896e64f94565268ccbbb69f8be65.png)

键入`propstrong`在接口声明（.h 文件）中工作得很好，但是**当我在类延续中这样做时没有提供代码片段：**

```
@interface MyClass () 
```

`propstrong`   // 什么都没发生 ：（

```
@end 
```

我已经尝试了片段编辑器中的所有完成范围（甚至是“全部”），但无济于事。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:26:31.677

我错误地将 Language 字段留在了奇怪的默认选择 Objective-C++ 中。将其更改为 Objective-C，该代码段将在类延续中工作。

# c - 加载后缺少数据

> ID：14213687
> 
> 赞同：0
> 
> 时间：2013-01-08T11:11:06.117
> 
> 标签：c, file, save, fwrite, missing-data

我有以下结构：

```
typedef struct PList {
    struct PList* next;
    Person value;
} PList;

typedef struct Person{
        char name[100]; // Left as "" if empty Person
        PersonID ID;
        float amountOwed;
}Person;

typedef struct PersonID{
        char letter;
        int number; // 7 digits
}PersonID; 
```

在我离开程序之前，所有内容都已正确存储，但是在离开（因此保存）然后重新打开（因此加载）之后，Person.ID.number 变为 0

以下是保存和加载部分（客户是 PList）：

保存

```
file = fopen("SaveData/customers.dat", "w");
int a;
    a = lengthPList(&customers);
    fwrite(&a, sizeof(int), 1, file);
    PList* temp;
    temp = &customers;
    for (; a > 0; a--) {
        int b;
        b = sizeof(temp->value);
        fwrite(&b, sizeof(int), 1, file);
        fwrite(&temp->value, sizeof(temp->value), 1, file);
        if (a > 1)
            temp = temp->next;
    } 
```

正在加载

```
file = fopen(fileName, "r");
int a;
            fread(&a, sizeof(int), 1, file);
            for (; a > 0; a--) {
                Person a;
                int b;
                fread(&b, sizeof(int), 1, file);
                fread(&a, b, 1, file);
                addPersonToList(&a, &customers);
            } 
```

***旧代码***

保存

```
file = fopen(fileName, "w");
int a;
a = lengthPList(&customers);
fwrite(&a, sizeof(int), 1, file);
fwrite(&customers, sizeof(customers), a, file); 
```

正在加载

```
file = fopen(fileName, "r");
int a;
fread(&a, sizeof(int), 1, file);
fread(&customers, sizeof(customers), a, file); 
```

# magento - 在 addSuccess() 方法中使用 html

> ID：14213691
> 
> 赞同：2
> 
> 时间：2013-01-08T11:11:15.477
> 
> 标签：magento

我必须在成功消息中插入一个锚标记。显示消息时，Magento 会去除 html。

有解决方法吗？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T11:43:06.543

Flag Mage_Core_Block_Messages::$_escapeMessageFlag defines if to use htmlEscape() method with the message text, so you can set up your rule for the selected path.

```
Mage::app()->getLayout()->getBlock('messages')->setEscapeMessageFlag(false); 
```

# php - CURL 响应代码是 200 而不是 302

> ID：14213695
> 
> 赞同：0
> 
> 时间：2013-01-08T11:11:30.070
> 
> 标签：php, https, cron

我有以下代码：

```
 $curl=curl_init();      
    $allowAppPostPArams = 'utf8=%E2%9C%93&authenticity_token='.$this->authToken.'&permissions=manage_likes%2Cmanage_relationships%2Cmanage_comments%2C&response_type=code&app_id=d2a4fc6d2751&redirect_uri=http%3A%2F%2FsocialCamFollower%2Findex.php&choice=authorize&commit=Authorize';
    curl_setopt($curl, CURLOPT_POSTFIELDS, $allowAppPostPArams);
    curl_setopt($curl, CURLOPT_POST, 1);

    curl_setopt($curl, CURLOPT_COOKIEFILE, $cookie_file);
    curl_setopt($curl, CURLOPT_COOKIEJAR, $cookie_file);

    curl_setopt($curl, CURLOPT_URL, 'https://socialcam.com/oauth/form_submit');        
    curl_setopt($curl, CURLOPT_REFERER, $urlAppPage);

    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($curl, CURLOPT_USERAGENT, 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:17.0) Gecko/20100101 Firefox/17.0');
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);

    curl_close($curl); 
```

**浏览器的请求：** ![在此处输入图像描述](../Images/23e1caa899235be9583b19e69898dcfd.png)

**卷曲日志** ![卷曲日志](../Images/dcfa5f462e012f317e2efcd9c4c3974f.png)

> **问题：为什么 CURL 显示 200 而不是 302？**

服务器：MAMP、Apache2、php5.3.14。安全模式和 open_basedir 未设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:27:20.093

用这个

```
curl_setopt($ch, CURLOPT_HEADERFUNCTION, 'read_header');
...
curl_exec($ch);
...
function read_header($curl, $header) {
  echo $header;
  return strlen($header);
} 
```

启用 CURLOPT_FOLLOWLOCATION 后，您应该得到类似的输出

```
HTTP/1.0 301 Moved Permanently
Date: Fri, 20 Apr 2012 11:26:37 GMT
Server: Apache
Location: http://www.spiegel.de/
Content-Length: 230
Content-Type: text/html; charset=iso-8859-1
X-Cache: MISS from lnxp-3968.srv.mediaways.net
X-Cache-Lookup: MISS from lnxp-3968.srv.mediaways.net:91
Via: 1.0 lnxp-3968.srv.mediaways.net (squid/3.1.4)
Connection: close

HTTP/1.0 200 OK
Date: Fri, 20 Apr 2012 11:25:38 GMT
Server: Apache-Coyote/1.1
X-Powered-By: Servlet 2.4; JBoss-4.0.3SP1 (build: CVSTag=JBoss_4_0_3_SP1 date=200510231054)/Tomcat-5.5
Cache-Control: max-age=120
Expires: Fri, 20 Apr 2012 11:27:38 GMT
X-Host: lnxp-2885
X-Robots-Tag: index, follow, noarchive
Content-Type: text/html;charset=ISO-8859-1
Content-Length: 161305
Vary: Accept-Encoding
Age: 59
X-Cache: HIT from lnxp-3954.srv.mediaways.net
X-Cache-Lookup: HIT from lnxp-3954.srv.mediaways.net:90
Via: 1.1 www.spiegel.de, 1.0 lnxp-3954.srv.mediaways.net (squid/3.1.4)
Connection: close 
```

# .net - 在给定程序集中查找不需要的类

> ID：14213698
> 
> 赞同：2
> 
> 时间：2013-01-08T11:11:36.583
> 
> 标签：.net, visual-studio-2012, .net-assembly

我有一个巨大的.Net 库，里面有几百个类。但是，我只使用这个库的一个子集。所以我想只用必需的和依赖的类而不是使用整个东西来创建一个新的程序集。

是否有一种快速、免费且简单的方法来识别所需的类和依赖类？

手动不是一种选择，就像我说的那样，有几百个！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:29:35.463

这可能无法以一般方式进行，让我解释一下原因。

如果您使用任何使用“约定优于配置”的库、模式或诸如此类的东西，那么 100% 确定是否可以删除类的唯一方法是执行代码，并且您必须确保执行所有场景的所有代码路径，这在大多数情况下是不可能的。

例如，如果任何代码使用反射来确定哪些类可用，那么您是否可以安全地删除该反射代码会找到的类将取决于找到后对该类所做的操作。

例如，您最终可能会从 ASP.NET MVC 4 程序集中删除类，因为看起来 View 类没有被使用，但它们是通过反射找到和使用的，而不是在您的代码中显式地使用。

我的建议是要么忽略这一点，毕竟 2MB 并不算多，要么我会按主题将较大的项目拆分为较小的项目。这样，项目只会引用它需要的类库部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:13:37.057

N依赖 4.0。14 天全功能 - 免费试用是我用来完成任务的。

感谢**dandan78**的提示！

# jquery - 如果子元素满足指定条件，则默认不显示父元素

> ID：14213700
> 
> 赞同：3
> 
> 时间：2013-01-08T11:11:39.033
> 
> 标签：jquery, css

我有以下列表：

```
<ul>
<li class="container">
<div class="age">24</div>
<div class="married">no</div>
</li>

<li class="container">
<div class="age">27</div>
<div class="married">yes</div>
</li>

<li class="container">
<div class="age">34</div>
<div class="married">no</div>
</li>
</ul> 
```

**期望的结果**

默认情况下不显示 包含的`li`元素。[此代码](http://jsbin.com/urodit/168/edit)使用 Jquery 执行此操作。`div.married``yes`

但是在我的项目中有很多条目，所以**每次加载页面时，您都可以看到所涉及的条目在几分之一秒内闪烁**。我认为这是因为页面开始在浏览器上显示，然后才完全加载在正文标记末尾上方的行上加载的脚本。

**关于解决方案的问题和评论**

*   有没有办法只使用 css 来做我想做的事？（ `:contains`在 css 中有，但我不想依赖它，因为 css3 不推荐使用它）

*   我尝试在`head`元素中为该 Jquery 行创建一个单独的脚本条目，但仍然有明显的闪烁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:31:40.977

恐怕纯 CSS 是不可能的。如果您想避免闪烁效果，我建议使用这种方法：

js：

```
$(document).ready(function() {
  $(function(){
  ////Jquery in here/////  

  $(".married:contains(no)").parent().css('display','block');

   //////////////////////
 });
}); 
```

CSS：

```
li {
 display:none;
} 
```

# javascript - 解析变量内的单引号

> ID：14213702
> 
> 赞同：-1
> 
> 时间：2013-01-08T11:11:44.623
> 
> 标签：javascript

我有一个 javascript 函数调用，其中我的 ${va} 被解析为 CNX'ion 之类的名称。所以我的调用失败了，因为最后它有三个引号，例如

```
 <a href="javascript:editVendorDetails('${v.a}')// this changing into 

 <a href="javascript:editVendorDetails('CNX'ion')//have three quotes 
```

任何人都可以告诉我如何在我的 js 函数中获取 ${va} 的值，其中可能有引号，如上所述

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:21:17.200

使用可以使用 JSON.stringify('${va}')

# sml - SML/NJ 中的转发声明（A 呼叫 B，B 呼叫 A）

> ID：14213709
> 
> 赞同：1
> 
> 时间：2013-01-08T11:12:06.633
> 
> 标签：sml, smlnj

考虑-`fun A()`调用`fun B()`，反之亦然，我`A()`之前实现`B()`，如下所示：

```
fun A() = 
  B() ; 

fun B() =
  A() ; 
```

在这种情况下，SML/NJ 解释器会提示 -

```
 Error: unbound variable or c onstructor: B 
```

我该如何解决这个问题？也许像*前向声明*之类的东西？

（让它导致无限循环）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T12:21:00.847

您可以使用`and`关键字来声明相互递归的函数。

```
fun A () = B ()
and B () = A () 
```

您还可以使用相同的关键字来创建相互递归的数据类型。

注意，通常你会用小写的第一个字母写函数名：

```
fun a () = b ()
and b () = a () 
```

这有助于区分函数和值构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T12:20:46.207

没有必要为此使用 let 绑定。您也可以在顶层声明它：

```
fun a () = b ()    
and b () = a () 
```

# c# - HashSet vs HashedSet（Iesi）：奇怪的行为

> ID：14213715
> 
> 赞同：1
> 
> 时间：2013-01-08T11:12:30.110
> 
> 标签：c#, nhibernate, readonly-collection, iesi-collections

今天我在我的领域模型上测试了一些东西，我意识到这种行为不是我所期望的。

我试图隔离创建一个简单`Customers-Orders`模型的问题。

这是我的映射。

**顾客：**

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <class xmlns="urn:nhibernate-mapping-2.2" name="NHVariousTests.Domain.Customer, NHVariousTests" table="Customers">
    <id name="Code" type="System.Guid">
        <column name="CustomerCode" />
        <generator class="guid.comb" />
    </id>
    <version name="Version" type="System.Int32" unsaved-value="0" access="backfield"">
        <column name="Version" not-null="true" />
    </version>
    <property name="Description" type="AnsiString">
          <column name="Description" not-null="false" />
    </property>   
    <set name="Orders" access="field.pascalcase-underscore" cascade="all-delete-orphan" inverse="true" lazy="true">
        <key column="CustomerCode" />
        <one-to-many class="NHVariousTests.Domain.Order, NHVariousTests" />
    </set>
  </class>
</hibernate-mapping> 
```

**命令：**

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <class xmlns="urn:nhibernate-mapping-2.2" name="NHVariousTests.Domain.Order, NHVariousTests" table="Orders">
    <id name="Code" type="System.Guid">
        <column name="OrderCode" />
        <generator class="guid.comb" />
    </id>
    <version name="Version" type="System.Int32" unsaved-value="0" access="backfield">
        <column name="Version" not-null="true" />
    </version>
    <property name="Description" type="AnsiString">
        <column name="Description" not-null="false" />
    </property>   
    <many-to-one class="NHVariousTests.Domain.Customer, NHVariousTests" name="Customer">
        <column name="CustomerCode" not-null="true" />
    </many-to-one>
  </class>
</hibernate-mapping> 
```

我的`Order`课很简单：

```
public class Order : EntityGuid
{
    public Order()
    {
    }

    public virtual string Description { get; set; }

    public virtual Customer Customer { get; set; }
} 
```

这是我的`Customer`课：

```
public class Customer : EntityGuid
{
    public Customer()
    {
        this._Orders = new HashSet<Order>();
    }

    public virtual string Description { get; set; }

    #region Orders

    private readonly ICollection<Order> _Orders = null;

    public virtual ReadOnlyCollection<Order> Orders
    {
        get { return (new List<Order>(_Orders).AsReadOnly()); }
    }

    public virtual bool AddOrder(Order order)
    {
        if ((order != null) && (!this._Orders.Contains(order)))
        {
            order.Customer = this;
            this._Orders.Add(order);
            return (true);
        }
        return (false);
    }

    public virtual bool RemoveOrder(Order order)
    {
        if ((order != null) && (this._Orders.Contains(order)))
        {
            this._Orders.Remove(order);
            order.Customer = null;
            return (true);
        }
        return (false);
    }

    #endregion
} 
```

在第一个示例中，我使用了一个`ICollection<Order>`创建为`HashSet<Order>`.

如果我运行此代码：

```
using (var session = sessionFactory.OpenSession())
{
    using (var tx = session.BeginTransaction())
    {
        var customer = new Domain.Customer() { Description = "ACME Ltd" };

        var order = new Domain.Order() { Description = "Coffee" };
        customer.AddOrder(order);

        order = new Domain.Order() { Description = "Milk" };
        customer.AddOrder(order);

        session.Save(customer);

        tx.Commit();
    }
} 
```

我可以看到`INSERT`客户的和`INSERT`订单的两个，但我也有`UPDATE`客户的。

![在此处输入图像描述](../Images/bc15a43147df1e8b5547ccd2d6eaecc3.png)

如果我改变我的`Customer`班级切换到**Iesi**收藏：

```
public class Customer : EntityGuid
{
    public Customer()
    {
        this._Orders = new Iesi.Collections.Generic.HashedSet<Order>();
    }

    public virtual string Description { get; set; }

    #region Orders

    private readonly ICollection<Order> _Orders = null;

    public virtual ReadOnlyCollection<Order> Orders
    {
        get { return (new List<Order>(_Orders).AsReadOnly()); }
    }

    public virtual bool AddOrder(Order order)
    {
        if ((order != null) && (!this._Orders.Contains(order)))
        {
            order.Customer = this;
            this._Orders.Add(order);
            return (true);
        }
        return (false);
    }

    public virtual bool RemoveOrder(Order order)
    {
        if ((order != null) && (this._Orders.Contains(order)))
        {
            this._Orders.Remove(order);
            order.Customer = null;
            return (true);
        }
        return (false);
    }

    #endregion
} 
```

我得到了预期的行为：

![在此处输入图像描述](../Images/de9bcdbe972afcd74e25cb734d6e8ec4.png)

这是我的`EntityGuid`课：

```
public abstract class EntityGuid : EntityWithTypedId<Guid>, IAuditedEntity
{
    public EntityGuid()
    {
        this.CreatedDate = DateTime.Now;
        this.UpdatedDate = DateTime.Now;
        this.CreatedBy = "";
        this.UpdatedBy = "";
    }

    public virtual DateTime CreatedDate { get; set; }
    public virtual string CreatedBy { get; set; }

    public virtual DateTime UpdatedDate { get; set; }
    public virtual string UpdatedBy { get; set; }

    public virtual int Version { get; private set; }

    public virtual bool IsTransient()
    {
        return (EntityWithTypedId<Guid>.Equals(this.Code, default(Guid)));
    }

    public virtual bool IsTransient(EntityWithTypedId<Guid> obj)
    {
        return obj != null && Equals(obj.Code, default(Guid));
    }

} 
```

有没有人可以帮助我尝试了解正在发生的事情？

问候。

**如果有人真的有兴趣看看代码。我已经清理了所有东西并使其尽可能简单。可以在[这里](https://skydrive.live.com/embed?cid=669ADF1AF64DF389&resid=669ADF1AF64DF389!236&authkey=AMW35O2P4XrsF5Y)下载(NH_CollectionProblems)。**

*我正在使用 NHibernate 3.3.2.4000*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:45:51.433

您期望的行为是错误的，您应该期望在版本化实体上修改集合会更新版本。此行为在用于映射集合的文档中进行了描述，[该文档](http://nhforge.org/doc/nh/en/index.html#collections-mapping)还描述了如何禁用它：

> 乐观锁（可选 - 默认为 true）：更改集合状态的物种会导致拥有实体的版本增加。（对于一对多关联，禁用此设置通常是合理的。）

我确实拉下项目并验证更改此设置会切换正在发布的更新：false = 无更新，true（默认）= 更新。但是，我无法使用 Iesi HashedSet 获得预期的行为。我认为这是一个错误，但我现在没有更多时间来处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:12:37.447

任何一个...

*   等待 NH 4.0（它针对 BCL 的 ISet 可用的 .net 4.0）。一个 alpha 版本将很快推出。
*   使用[https://bitbucket.org/jfromaniello/nhibernate.setfornet4](https://bitbucket.org/jfromaniello/nhibernate.setfornet4)。在 nuget 上可用，[http:](http://nuget.org/packages/NHibernate.SetForNet4) //nuget.org/packages/NHibernate.SetForNet4 。

# javascript - 在onclick上检测img标签是否在span中

> ID：14213718
> 
> 赞同：2
> 
> 时间：2013-01-08T11:12:39.877
> 
> 标签：javascript, jquery

每当我点击跨度时，我想检测我是否包含 img 标签或标签。我怎样才能做到这一点。

```
<span class="scorecount" id="6" onclick="javascript:changethevalue(this)">
<img src="images/lock.png" width="25px" height="25px">
</span>

<span class="scorecount" id="6" onclick="javascript:changethevalue(this)">
 4
</span>

function changethevalue(object) {
     console.log($(object).children('img'));
} 
```

输出是当我点击 img

[img，prevObject：jQuery.fn.jQuery.init[1]，上下文：span#4.scorecount，选择器：“img”，构造函数：函数，init：函数...]

在 4 上是 [prevObject: jQuery.fn.jQuery.init[1], context: span#2.scorecount, selector: "img", constructor: function, init: function…]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T11:13:39.123

您可以使用[**has()**](http://api.jquery.com/has/)，如果`length`为零，则表示 的后代中没有 img 标签`object`。

```
console.log($(object).has('img').length); 
```

# css - iPad4 在横向模式下忽略媒体查询

> ID：14213721
> 
> 赞同：1
> 
> 时间：2013-01-08T11:13:06.287
> 
> 标签：css, ipad, media-queries, landscape

我正在尝试创建一个响应式网站。`hgroup`如果我的 iPad 处于横向模式，我想降低标签的高度，但它忽略了我的媒体查询。如果它处于纵向模式，它不会再忽略我的媒体查询。

这是我写的：

```
@media only screen and (min-device-width: 2048px) and (orientation:landscape)  {
        hgroup {
            height:200px;
        }
} 
```

当我在 responsivepx.com 测试我的网站并将浏览器大小调整为 2048 像素时，`hgroup`假设高度为 200 像素。iPad没有。

我已经在寻找解决方案并尝试了一些，但没有一个对我有用。例如：

```
@media only screen and (-webkit-min-device-pixel-ratio: 2) {
} 
```

# java - 注释属性 RequestMapping.value 的值必须是常量表达式

> ID：14213723
> 
> 赞同：5
> 
> 时间：2013-01-08T11:13:12.033
> 
> 标签：java, spring-mvc, url-routing

使用以下代码片段时：

```
public class MyUrls {

    // properties get initialized using static{...}
    public final static String URL_HOMEPAGE = properties.getProperty("app.homepage");    

}

@Controller
public class HomepageController {

    @RequestMapping(MyUrls.URL_HOMEPAGE)
    public String homepage() {
        return "/homepage/index";
    }

} 
```

我收到以下错误：

```
The value for annotation attribute RequestMapping.value must be a constant expression 
```

但实际上，`URL_HOMEPAGE`确实是一个常数，因为它被声明为`public final static`。我错了吗？如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T11:35:11.390

虽然`URL_HOMEPAGE`它是一个常数，但它的值可能不是，它只能在运行时确定。我相信注释中使用的值必须在编译时可解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:21:45.347

它是一个常量，但是在请求映射初始化之后才被初始化。您正在调用 `properties.getProperty("app.homepage");` 当类加载器加载您的类时， URL_HOMEPAGE 尚未初始化，因此出现错误。
您需要将初始化字符串作为参数，例如“/path/subpath”

# java - Java 持久性 .jar 文件未运行

> ID：14213725
> 
> 赞同：3
> 
> 时间：2013-01-08T11:13:23.890
> 
> 标签：java, netbeans, persistence

我已经构建了一个简单的应用程序，它使用 java 持久性、实体管理器连接在 derby(Netbeans) 中制作的数据库，该数据库与 jTable 绑定。问题是当我在其他系统上运行 .jar 文件时，它不会执行。谁能告诉我为什么会这样？

在其他系统上运行时出错：

```
C:\>java -jar persist.jar
[EL Info]: 2013-01-08 17:06:45.715--ServerSession(4597467)--EclipseLink, version
: Eclipse Persistence Services - 2.3.2.v20111125-r10461
[EL Severe]: 2013-01-08 17:06:48.24--ServerSession(4597467)--Exception [EclipseL
ink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.p
ersistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLNonTransientConnectionException: java.net.Connec
tException : Error connecting to server localhost on port 1527 with message Conn
ection refused: connect.
Error Code: 40000
Exception in thread "AWT-EventQueue-0" javax.persistence.PersistenceException: E
xception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r104
61): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLNonTransientConnectionException: java.net.Connec
tException : Error connecting to server localhost on port 1527 with message Conn
ection refused: connect.
Error Code: 40000
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(En
tityManagerSetupImpl.java:517)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.get
DatabaseSession(EntityManagerFactoryDelegate.java:188)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.cre
ateEntityManagerImpl(EntityManagerFactoryDelegate.java:277)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createE
ntityManagerImpl(EntityManagerFactoryImpl.java:294)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createE
ntityManager(EntityManagerFactoryImpl.java:272)
    at persist.NewJFrame.initComponents(NewJFrame.java:30)
    at persist.NewJFrame.<init>(NewJFrame.java:17)
    at persist.NewJFrame$1.run(NewJFrame.java:101)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Sour
ce)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v2
0111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLNonTransientConnectionException: java.net.Connec
tException : Error connecting to server localhost on port 1527 with message Conn
ection refused: connect.
Error Code: 40000
    at org.eclipse.persistence.exceptions.DatabaseException.sqlException(Dat
abaseException.java:324)
    at org.eclipse.persistence.exceptions.DatabaseException.sqlException(Dat
abaseException.java:319)
    at org.eclipse.persistence.sessions.DefaultConnector.connect(DefaultConn
ector.java:138)
    at org.eclipse.persistence.sessions.DatasourceLogin.connectToDatasource(
DatasourceLogin.java:162)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAn
dDetectDatasource(DatabaseSessionImpl.java:584)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.log
in(EntityManagerFactoryProvider.java:206)
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(En
tityManagerSetupImpl.java:488)
    ... 21 more
Caused by: java.sql.SQLNonTransientConnectionException: java.net.ConnectExceptio
n : Error connecting to server localhost on port 1527 with message Connection re
fused: connect.
    at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(Unkn
own Source)
    at org.apache.derby.client.am.SqlException.getSQLException(Unknown Sourc
e)
    at org.apache.derby.jdbc.ClientDriver.connect(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at org.eclipse.persistence.sessions.DefaultConnector.connect(DefaultConn
ector.java:98)
    ... 25 more
Caused by: org.apache.derby.client.am.DisconnectException: java.net.ConnectExcep
tion : Error connecting to server localhost on port 1527 with message Connection
refused: connect.
    at org.apache.derby.client.net.NetAgent.<init>(Unknown Source)
    at org.apache.derby.client.net.NetConnection.newAgent_(Unknown Source)
    at org.apache.derby.client.am.Connection.<init>(Unknown Source)
    at org.apache.derby.client.net.NetConnection.<init>(Unknown Source)
    at org.apache.derby.client.net.NetConnection40.<init>(Unknown Source)
    at org.apache.derby.client.net.ClientJDBCObjectFactoryImpl40.newNetConne
ction(Unknown Source)
    ... 29 more
Caused by: java.net.ConnectException: Connection refused: connect
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at javax.net.DefaultSocketFactory.createSocket(Unknown Source)
    at org.apache.derby.client.net.OpenSocketAction.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    ... 35 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:29:25.457

看看[这个 SO question](https://stackoverflow.com/questions/14100042/using-task-scheduler-for-running-java-jar-from-batch-file/14100196#14100196)。似乎是一个类似的问题（即，依赖 jar(s) 可能不在`classpath`.

**编辑**
由于您发布了堆栈跟踪，现在很明显您有一些数据库连接问题：

```
java.net.ConnectException : Error connecting to server localhost on port 1527 with messageConnection refused: connect. 
```

您是否检查过数据库是否在其他系统上正常运行？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:12:51.420

检查您的 persistence.xml 中的数据库 url

```
<properties>
 <property name="javax.persistence.jdbc.password" value="sa"/>
 <property name="javax.persistence.jdbc.user" value="sa"/>
 <property name="javax.persistence.jdbc.driver" 
                         value="org.apache.derby.jdbc.ClientDriver"/>
 <property name="javax.persistence.jdbc.url" value="jdbc:derby://??:1527/??"/>
</properties> 
```

当您在创建数据库的 netbeans 中运行应用程序时，Netbeans 会分配默认位置。我建议您将 url 作为参数传递以创建实体管理器工厂，或者将其放在属性文件中并加载它。

```
java -jar project.jar persistence.properties 
```

# css - 用图像作为背景包装存在的元素

> ID：14213732
> 
> 赞同：0
> 
> 时间：2013-01-08T11:13:43.150
> 
> 标签：css

我在页面中有一些容器，如下所示：

```
<div id="con1" class="window">
    <div>xxxx</div>
    <div>xxxx</div>
</div>

<div id="con2" class="window">
    <div>xxxx</div>
    <div>xxxx</div>
</div> 
```

像这样的图像：

![在此处输入图像描述](../Images/172dc0c8262ae7d82695f84d086ea861.png)

现在，我想将图像作为容器的背景，使容器看起来像一个窗口。像这样：

![在此处输入图像描述](../Images/4fe0b73473ed2be68916c95b8786ae16.png)

此外，容器的大小可能会根据用户而改变。所以我希望它可以在添加容器的内容时​​自动扩展。

任何的想法？

* * *

更新：

我已经尝试过的：

![9个div布局](../Images/37484ed30ed692d7231f52c3392d3581.png)

这就是我现在得到的：[jsfiddle](http://jsfiddle.net/TqutW/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:17:25.723

编辑：

**解决方案 n.2：**

您甚至可以使用两个 div，一个带有渐变背景、可选阴影和圆角边框的“外部”，以及一个带有包含您的东西的白色背景的“内部”。

演示：http: [//jsfiddle.net/TqutW/4/](http://jsfiddle.net/TqutW/4/)

HTML

```
<div class="windowBorder" >
    <div class="windowContent" >
       <div >xxxxxxxxxxxxxxx</div>
       <div >xxxxxxxxxxxxxxx</div>
       <div >xxxxxxxxxxxxxxx</div>
       <div >xxxxxxxxxxxxxxx</div>                          
    </div>        
</div> 
```

CSS（跨浏览器）

```
.windowBorder{
  margin: 30px;  
  padding: 20px 8px 8px 8px;  
  box-shadow: 2px 2px 5px 1px #111111;
  border-radius: 10px;
background: #7d7e7d; /* Old browsers */
background: -moz-linear-gradient(top, #7d7e7d 0%, #0e0e0e 13%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#7d7e7d), color-stop(13%,#0e0e0e)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #7d7e7d 0%,#0e0e0e 13%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #7d7e7d 0%,#0e0e0e 13%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #7d7e7d 0%,#0e0e0e 13%); /* IE10+ */
background: linear-gradient(to bottom, #7d7e7d 0%,#0e0e0e 13%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#7d7e7d', endColorstr='#0e0e0e',GradientType=0 ); /* IE6-9 */
}

.windowContent {    
   padding: 10px;
   background-color: white;   
} 
```

您只需要通过 javascript 围绕您的内容创建 div...

* * *

**解决方案 n. 1**

你真的不需要为此使用*图像*。

（例如，您需要使用带有“木头”边框的图像，那么您应该以老式的方式进行操作……每个角度的图像，垂直线的图像，水平线的图像，还有很多 div...)

您在这里所拥有的只是渐变（使用 可实现`CSS3 Gradients`）和圆角边框（使用可实现`CSS3 border-radius`）。`CSS3 box-shadow`您也可以使用...添加阴影

渐变很容易用[CSS3 Gradient Generator 生成](http://www.colorzilla.com/gradient-editor/)，但现在它们只是跨浏览器的`BACKGROUND`属性......你可以[在 webkit 浏览器中的 BORDERS 上使用渐变](https://stackoverflow.com/questions/2717127/css3-gradient-borders)，但在 FF 或 IE 中还不行......但你可以添加一个 div 作为窗口的标题，带有渐变背景。

这是一个用于在带有圆形边框和阴影（没有渐变）的窗口内包装内容的小提琴：

[http://jsfiddle.net/TqutW/3/](http://jsfiddle.net/TqutW/3/)

唯一需要的 javascript 是将新类应用到容器 div 的那个……享受吧。

HTML

```
 <div id="container1">            
        <div >xxxxxxxxxxxxxxx</div>
        <div >xxxxxxxxxxxxxxx</div>
        <div >xxxxxxxxxxxxxxx</div>
        <div >xxxxxxxxxxxxxxx</div>
   </div>
   <br/>
   <input type="button" id="click"  value="windowization! :)"/> 
```

CSS

```
.window{    
  margin: 30px;
  padding: 10px;
  border-style: solid;  
  border-width: 20px 8px 8px 8px;
  border-color: #444;
  border-radius: 10px;
  box-shadow: 2px 2px 10px 1px #111111;
} 
```

JS

```
document.getElementById("click").onclick=function(){
   document.getElementById("container1").className+=" window ";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:52:01.540

试试小提琴， [http://jsfiddle.net/siyakunde/TqutW/1/](http://jsfiddle.net/siyakunde/TqutW/1/) 这是你想做的吗？

```
#content{
  background-image: url('http://www.google.com/images/srpr/logo3w.png');
  background-size: 100% 100%;
} 
```

# javascript - ajax成功的window.location.href不起作用

> ID：14213737
> 
> 赞同：12
> 
> 时间：2013-01-08T11:14:14.013
> 
> 标签：javascript, jquery, ajax

我一直在尝试解决这个问题一段时间，但我无法让它工作。当用户单击链接时，系统会要求他确认是否要执行此操作。然后进行 ajax 调用。被调用的脚本工作正常，并返回一个重定向到的字符串。

我在这里看到了几个关于 window.location 问题的帖子，但是没有一个可以解决我的问题。

我的代码：

```
function confirm(a,b,c){
        var r=confirm("Are you sure to do this?");
        if(r==true){
            $.ajax({
                type: "POST",
                url: "/process-action.php",
                async: false,
                data: {a:a,b:b,c:c},
                success: function(data){
                    window.location.href = data;
                }
            });
        } else {
            return false;
        }
    } 
```

如果我这样做`alert(data)`而不是`window.location.href = data`我可以看到传递了正确的数据。例如 /user/homepage。然而，重定向并没有发生。

如果尝试用整个 url 替换相对路径，但这也不起作用。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-08T11:15:12.757

尝试`assign()`改用：

```
window.location.assign(data); 
```

`window.location.href`是属性，不是方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:19:00.193

位置[assign()](http://www.w3schools.com/jsref/met_loc_assign.asp)方法

```
The assign() method is supported in all major browsers. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-07T06:10:58.787

你可以用这个

`<form action="submit.php" onsubmit="return false;" method="post">`

并且您的相同脚本将起作用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-08T11:38:29.390

您也可以使用 window.location = "someurl";

# php - 如何每个 IP 只允许两个帐户？

> ID：14213738
> 
> 赞同：0
> 
> 时间：2013-01-08T11:14:15.290
> 
> 标签：php, pdo, count

我试图阻止来自同一 IP 的多个帐户：

```
if (! empty($_SERVER['HTTP_CLIENT_IP']))
{
    $ip = $_SERVER['HTTP_CLIENT_IP'];
}
elseif (! empty($_SERVER['HTTP_X_FORWARDED_FOR']))
{
    $ip = $_SERVER['HTTP_X_FORWARDED_FOR'];
}
else
{
    $ip = $_SERVER['REMOTE_ADDR'];
}

$stmt = $db->prepare("SELECT 1 FROM users WHERE ip = :ip");
$stmt->bindParam(':ip', $ip, PDO::PARAM_STR);
$result = $stmt->execute();
$row = $stmt->fetch();

if ($row)
{
    die("Only one account per IP is allowed !");
} 
```

这行得通，但是如果我想允许每个 IP 有两个帐户怎么办？我试过了：

```
$stmt = $db->prepare("SELECT * FROM users WHERE ip = :ip");
$stmt->bindParam(':ip', $ip, PDO::PARAM_STR);
$result = $stmt->execute();
$row = $stmt->fetch();

if ($row > 1)
{
    die("Only one account per IP is allowed !");
} 
```

不工作。不允许使用第二个帐户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:18:51.410

你需要数一下。使用 count()

```
SELECT count(*) as count FROM users WHERE ip = :ip 
```

[http://php.net/manual/en/pdostatement.rowcount.php](http://php.net/manual/en/pdostatement.rowcount.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:52:55.670

只需更新如下查询：

```
$stmt = $db->prepare("SELECT count(*) FROM users WHERE ip = :ip"); 
```

# extjs - Extjs Grid滚动在应用程序运行后不起作用

> ID：14213740
> 
> 赞同：0
> 
> 时间：2013-01-08T11:14:27.380
> 
> 标签：extjs, gridpanel, scrollbars

我正在使用 Extjs 开发一个应用程序。

在应用程序中，我在视口上有一个网格。由于某些原因，我需要经常向网格添加记录（可能每秒几次）。当网格存储超过 150 条记录时，存储删除第一条记录，然后在底部添加新记录。所以网格存储最多包含 150 条记录。

我的问题：网格面板的滚动条在开始时工作，但在应用程序运行后不起作用。

有没有人对这个问题有任何想法或解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T01:05:49.993

将您的 ExtJS 版本升级到 4.1.2 或更高版本。4.0.7 中的虚拟婴儿车存在这些问题。

# sqlite - sqlite FTS 查询问题

> ID：14213749
> 
> 赞同：1
> 
> 时间：2013-01-08T11:15:10.563
> 
> 标签：sqlite, full-text-search

这是我的查询：

```
SELECT firstName, lastName FROM users WHERE users MATCH 'firstName:joh*' 
```

我想获取lastName长度为1+（非空）的所有行

我应该如何修改我的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:06:23.907

FTS 无法做到这一点；只需使用普通表达式：

```
SELECT firstName, lastName
FROM users
WHERE users MATCH 'firstName:joh*'
  AND length(lastName) >= 1 
```

（请注意，`NULL`and `''`（空字符串）是不同的值，都被排除在外。）

# c++ - 编译器可以忽略对 constexpr 函数中“未采用”分支的评估吗？

> ID：14213754
> 
> 赞同：1
> 
> 时间：2013-01-08T11:15:26.323
> 
> 标签：c++, c++11, ternary-operator, language-lawyer, constexpr

在尝试回答[Mehrdad 的问题时](https://stackoverflow.com/q/14210378/147192)，我编写了下面的小函数（在[liveworkspace](http://liveworkspace.org/code/tTrKx$12)中运行）：

```
template <typename T, unsigned low, unsigned high>
static constexpr auto highest_index_in() ->
   typename std::enable_if<high >= low, unsigned>::type
{
   return low == high                 ? low :
          high == low + 1             ? (exists<T, high>() ? high : low) :
          exists<T, (high + low)/2>() ? highest_index_in<T, (high+low)/2, high>() :
                                        highest_index_in<T, low, (high+low)/2>();
} // highest_index_in 
```

（`exists`O（1）在哪里）

虽然编译非常慢（在 liveworkspace 上），并且尝试使用广泛的范围完全失败，编译器崩溃（`[0, ~0u]`不起作用......）。

我相信我设法正确地实现了递归（我很高兴被反驳），但是......

因此问题是：**在这里评估各种三元运算符调用时，编译器可以省略未采用分支的计算吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T13:44:59.580

不，编译器不能跳过对三元运算符的未采用分支的评估，因为这样做意味着编译器首先必须确定在任何可能呈现的分支中没有冲突的重载和/或模板特化该程序格式错误。为此，编译器必须有效地实例化分支上使用的模板并对函数执行重载决策。

# php - php echo在将strtotime函数分配给javascript变量时不起作用

> ID：14213755
> 
> 赞同：0
> 
> 时间：2013-01-08T11:15:27.550
> 
> 标签：php, jquery

这工作正常

```
<html>
<head>
<script src="jquery.js"></script>
<script>
    $(document).ready(function(){       
    var timeLeft = <?php echo '1279'; ?>;       

    $("#time").text(timeLeft); 
    });
</script>
</head>

<body>
    <div id="time"></div>
</body>
</html> 
```

但这不是

```
<script>
    $(document).ready(function(){       
         var timeLeft = <?php echo strtotime("now"); ?>;       
         $("#time").text(timeLeft); 
    });
</script> 
```

它给出了错误 Uncaught SyntaxError: Unexpected token < 。它是一个 php 扩展文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:17:25.987

尝试这个：

```
<script>
$(document).ready(function(){       
     var timeLeft = '<?php echo strtotime("now"); ?>';       
     $("#time").text(timeLeft); 
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T10:56:36.310

在javascript中直接使用php是非常危险的。因为 timetostr 可能会输出一些关于时区等的警告，并且您的代码将在没有任何视觉线索的情况下被破坏。

在我的项目中，如果我必须在我的 javascript 中使用任何 php 输出，我会创建隐藏的 div 并从 javascript 访问值：

```
<div class='hidden' id='values'>
<div class='val-time'><?php echo strtotime("now"); ?></div>
</div>

<script>
    $(document).ready(function(){       
         var timeLeft = $("#values .val-time").html();       
         $("#time").text(timeLeft);
    });
</script> 
```

因此，每当您想调试代码时，只需从#values 中删除“隐藏”类，然后查看 PHP 输出了哪些值。

# svn - 当 SVN 无法再访问 svn:externals 中的 url 时会发生什么

> ID：14213756
> 
> 赞同：0
> 
> 时间：2013-01-08T11:15:28.450
> 
> 标签：svn, svn-externals

假设我有一个这样的存储库：

```
trunk/
   src/
   lib/
      somelib 
```

Somelib 链接到我无法控制的 subversion 存储库的特定修订版，位于`http://some.svn.url.com/trunk`.

如果`http://some.svn.url.com/trunk`从互联网上消失会怎样？存储库的干净签出是否会缺少此依赖项？还是 SVN 服务器会发送最后一个可用的副本？

是否有某种方法可以链接到外部存储库但制作本地缓存（在 SVN 服务器上），这样如果无法再访问原始存储库，文件仍然可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:48:46.330

如果存储库从 Internet 上消失，则您的干净签出将缺少依赖项。当您使用 svn:externals 时，实际上发生的事情是您只是自动告诉 Subversion 客户端也执行给定存储库的签出/更新。这与您手动完成没有什么不同。

您可以使用的一种替代方法是运行 svnsync 将远程存储库镜像到本地存储库，然后将外部存储库更改为指向镜像。有关 svnsync 的详细信息，请查看 Subversion 手册。

# magento - 单个magento上具有不同域名的多个网站

> ID：14213758
> 
> 赞同：1
> 
> 时间：2013-01-08T11:15:31.933
> 
> 标签：magento, magento-1.7, magento-1.5

我已经安装了一个 magento 实例。我想添加 2 个网站wholesale.com 和retail.com。批发和零售网站都在一个 magento 中。两个网站的产品和目录相同，但批发和零售网站的价格会有所不同。

当我打开一个批发网站时，客户不应该看到产品的价格。要查看他/她需要登录的产品价格。并且在retail.com 客户可以看到产品的零售价格。

此外，这两个站点的客户也会有所不同。即批发客户属于批发网，零售客户属于零售网。

我尝试了一些链接，但无法做到这一点。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:49:36.997

是的，你可以这样做。

1.  对于此设置，您应该在您的 magento 实例中创建 2 个网站。一个用于批发.com，另一个用于零售.com。

2.  每个网站都有自己的类别，所有产品都必须添加到两个网站和两个网站的类别中。

3.  要配置产品价格的可见性，您必须创建或安装扩展程序。它必须对批发.com 有效，而对零售.com 无效。

4.  您可以确定如何在您的 magento 安装中共享用户帐户：系统范围或每个网站。您可以在系统 - 配置 - 客户配置下找到此设置。

5.  您可以为客户组配置不同的价格。在您的情况下，我将为批发网站创建一个客户组。因此，retail.com 将显示默认价格。在系统 - 配置 - 客户配置下，您还可以为新帐户设置默认组。将您的范围更改为批发.com 并选择批发客户组。

我相信这应该这样做。

# jpeg - 使用 c/c++ 读取 jpeg 图像

> ID：14213759
> 
> 赞同：1
> 
> 时间：2013-01-08T11:15:32.450
> 
> 标签：jpeg

如何在不使用任何库的情况下使用 c/c++ 读取 jpeg 图像的像素值。我在课程中读到了 jpeg 压缩是如何发生的，我想要标题信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:58:29.800

终于找到了一些非常有用的链接..

[链接 1](http://www.w3.org/Graphics/JPEG/itu-t81.pdf)

[链接 2](http://www.juliasets.dk/JPEG_Programs.htm)

感谢您的帮助和支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:50:58.330

对于文件的语法，您可以查看[wikipedia](http://en.wikipedia.org/wiki/Jpeg#Syntax_and_structure)。

每个段都有自己的标记。可变长度段的长度有一个两字节字段。到目前为止，这并不是一个真正的问题，因为您可以使用此信息提取所有片段（或者至少乍一看似乎如此）。

更有问题的部分是实际上对段内的数据做一些有用的事情。维基百科页面提供了关于这个主题的信息，但它需要相当多的数学知识才能真正解码和抓取像素。

# android - 如何在android中自定义屏幕保护程序？

> ID：14213760
> 
> 赞同：0
> 
> 时间：2013-01-08T11:15:41.480
> 
> 标签：android, screen, screensaver

是否可以在android中自定义屏幕保护程序？可能这个问题是[Android Screen Saver Sample Code](https://stackoverflow.com/questions/5261388/android-screen-saver-sample-code)的副本。但我没有得到任何有用的答案。我不是在谈论“锁定屏幕”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:23:41.090

在 android 锁屏中充当屏幕保护程序。如果您想使用任何其他动画作为屏幕保护程序代替默认锁屏，请尝试如何创建自定义锁屏？

如果您正在寻找普通 PC 的屏幕保护程序，您必须修改/创建主屏幕应用程序以添加此屏幕保护程序功能。我认为直到 android 2.3.3 才有屏幕保护程序的概念。我不知道2.3.3之后。

# c# - 使用dotnetzip压缩文件，打开时损坏

> ID：14213763
> 
> 赞同：4
> 
> 时间：2013-01-08T11:15:54.573
> 
> 标签：c#, asp.net-mvc, dotnetzip

我从字节数组在控制器中创建了一个 zip 文件，并将该 zip 文件作为文件结果返回。当我下载 zip 文件并解压缩文件时，它已损坏。我是这样做的：

```
byte[] fileBytes =array
MemoryStream fileStream = new MemoryStream(fileBytes);
MemoryStream outputStream = new MemoryStream();
fileStream.Seek(0, SeekOrigin.Begin);

using (ZipFile zipFile = new ZipFile())
{
    zipFile.AddEntry(returnFileName, fileStream);
    zipFile.Save(outputStream);
}

outputStream.Position = 0;

FileStreamResult fileResult = new FileStreamResult(outputStream, System.Net.Mime.MediaTypeNames.Application.Zip);
fileResult.FileDownloadName = returnFileName + ".zip";

return fileResult; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T12:40:12.467

您可能会不幸遇到*DotNetZip*中的一个未解决的错误。例如，根据文件大小（[https://dotnetzip.codeplex.com/workitem/14087](https://dotnetzip.codeplex.com/workitem/14087)）存在问题。

不幸的是，*DotNetZip*存在一些关键问题，并且该项目似乎不再得到积极维护。更好的选择是使用 SharpZipLib（如果您遵守他们基于 GPL 的许可证），或[zlib 的 .NET 端口之一](http://www.zlib.net/)。

如果您使用的是 .NET 4.5，则可以使用命名空间中的内置类[`System.IO.Compression`](http://msdn.microsoft.com/en-us/library/3z72378a%28v=vs.110%29)。可以在[`ZipArchive`](http://msdn.microsoft.com/en-us/library/system.io.compression.ziparchive.aspx)该类的文档中找到以下示例：

```
using System;
using System.IO;
using System.IO.Compression;

namespace ConsoleApplication
{
    class Program
    {
        static void Main(string[] args)
        {
            using (var zipToOpen = 
                new FileStream(@"c:\tmp\release.zip", FileMode.Open))
            {
                using (var archive = 
                     new ZipArchive(zipToOpen, ZipArchiveMode.Update))
                {
                    var readmeEntry = archive.CreateEntry("Readme.txt");
                    using (var writer = new StreamWriter(readmeEntry.Open()))
                    {
                            writer.WriteLine("Information about this package.");
                            writer.WriteLine("========================");
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:09:29.873

```
public class HomeController : Controller
{
    public FileResult Index()
    {
        FileStreamResult fileResult = new FileStreamResult(GetZippedStream(), System.Net.Mime.MediaTypeNames.Application.Zip);
        fileResult.FileDownloadName = "result" + ".zip";
        return fileResult;
    }

    private static Stream GetZippedStream()
    {
        byte[] fileBytes = Encoding.ASCII.GetBytes("abc");
        string returnFileName = "something";

        MemoryStream fileStream = new MemoryStream(fileBytes);
        MemoryStream resultStream = new MemoryStream();

        using (ZipFile zipFile = new ZipFile())
        {
            zipFile.AddEntry(returnFileName, fileStream);
            zipFile.Save(resultStream);
        }

        resultStream.Position = 0;
        return resultStream;
    }
} 
```

# c++ - 指向对象方法内部对象的空指针

> ID：14213765
> 
> 赞同：1
> 
> 时间：2013-01-08T11:16:05.687
> 
> 标签：c++

我有A级

```
class A
{
  A();
  ~A();

  DoSomething();
} 
```

然后我声明一个对象和一个指向分配对象的指针

```
A Obj;
A* pObj = &Obj; 
```

我发现在 DoSomething() 内部我将 pObj 设置为 NULL

```
A::DoSomething()
{ 
    pObj=NULL;
} 
```

所以在一个方法中，我正在杀死指向自己的指针......这并没有崩溃......

注意：我注意到在调试器中*这是（Obj* const）。

我很难理解为什么这不会导致任何形式的腐败。我认为这不安全，但我无法真正理解它的后果。

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T11:17:59.363

> 所以在一个方法中，我正在杀死指向自己的指针......这并没有崩溃......

它绝对没有理由崩溃。你可以有很多指向一个对象的指针。他们将其中一个或多个重置为 NULL 的事实并不自动意味着应该发生任何不好的事情。

需要注意的两类问题是：

1.  如果您在将指针设置为 NULL 后尝试取消引用，则代码的行为将是未定义的（很可能会崩溃）。
2.  如果对象是在堆上分配的（你的不是）并且你在没有调用的情况下重置*了所有*指向它的指针`delete`，你就会泄漏内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T11:24:01.600

将 pObj 视为一张写有地址的纸。如果你烧掉这张纸，它“指向”的建筑物将保持原样。删除对象的所有引用和指针不会自动释放它。

顺便说一句，您甚至可以`delete this;`在类的方法内部调用它也可以工作*，除非*您在删除后尝试访问该实例的成员。*但是，仅*在*真正*需要时才应使用此解决方案。

但请记住，如果它是指向实例的唯一指针，您将无法再访问它，这将导致内存泄漏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T11:19:53.013

您的对象保持不变。只是改变*了一些指向*对象的指针。这不是问题。这是一个可视化：

```
+---------+
|   Obj   |  <-------- pObj
+---------+ 
```

现在你在里面所做`A::DoSomething`的就是从上图中删除箭头。`Obj`继续，好像什么都没发生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T11:23:02.953

它不会崩溃，因为从实例内部访问不是通过存储在变量中的指针发生的`pObj`，而是通过`this`关键字访问的内部隐式常量指针（不是`this`那个变量，它只是一个获取实例在内存中实际位置的指针的方法，但对于任何实际应用程序，它都表现为常量指针）。

因此，当您使用 NULL 覆盖变量`pObj`时，您的对象不会消失，并且对象内的所有内部引用仍然有效，因为它们不依赖于您定义的任何变量，而是由编译器解析为直接引用实例在内存中的位置。

# php - 如何在jquery中编写if else if语句，其中条件由wordpress选项设置设置

> ID：14213774
> 
> 赞同：0
> 
> 时间：2013-01-08T11:16:34.587
> 
> 标签：php, jquery, wordpress, if-statement, jquery-selectors

如何使用 if else 语句将 wordpress 选项设置值作为条件来切换 jquery 功能？

Wordpress 选项设置值是“选择类型”值，在我的模板中使用

```
<?php echo get_option('my_animation_module') ?> 
```

到目前为止，它可能只打印一个值，如animation1、animation2、animation3等等。

我想将此选项值作为条件在 jquery 中传递，以使用此 wordpress 选项值获得不同的动画效果。

HTML：

```
<div id="content-page>
<img src="images/myimage.png"/> 
<div> 
```

查询：

```
$(document).ready(function(){ 

    $('#content-page').hover(function() {
            $(this).find('img').stop(false,true).animate({'top':480, 'left':270}, {duration:600});
                   },

        function() {
            $(this).find('img').stop(false,true).animate({'top':0, 'left':270}, {duration:500});

        });

      }); 
```

这是我第一个使用 jQuery 的示例动画效果。我想在图像上添加不同的动画效果，并且使用 jQuery 中的 if else 语句和 wordpress 选项值作为条件来打乱这些效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:41:06.933

```
 $(document).ready(function(){ 

             if('<?php echo get_option('my_animation_module') ?>' == "animation1")
             {
             //js code for animation1
             }
             else if('<?php echo get_option('my_animation_module') ?>' == "animation2")
             {
             //js code for animation2
             }
             else if('<?php echo get_option('my_animation_module') ?>' == "animation3")
             {
             //js code for animation3
             }

        }); 
```

根据要求更新答案

我可以通过将其存储为变量来在 jQuery 中获取此选项值吗？是的。参见例如。

```
var myval = '<?php echo get_option('my_animation_module') ?>';
alert(myval); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:14:50.703

如果你的 jQuery 代码很小，你可以把它内联在 HTML 文档的底部，就在 < /html> 之前，然后像 Dasun 显示的那样回显 PHP 数据。

如果你的代码比较大，你最好把它放在一个单独的 js 文件中。要将数据发送到文件中的该代码，在 HTML 文档中，您只需使用数据设置一个 JS 变量，然后在主代码中测试该变量是否已设置，如果已设置，则处理它。

```
<script>
var mydata = <?php echo $mydata; ?>;
</script> 
```

# c# - 在不丢失旧代码的情况下更改 c# 程序

> ID：14213775
> 
> 赞同：2
> 
> 时间：2013-01-08T11:16:37.153
> 
> 标签：c#, visual-studio-2012

我是一名业余程序员，我为我的办公室创建了一个应用程序。每隔一段时间，我就需要改进代码、添加功能或修复在某些情况下出现的问题——即使在应用程序大量使用 3-4 个月后，我也发现了错误或无效的编码。问题是每当我修改代码时，Visual Studio 都会保存更改。这意味着，如果我想使用该程序，我必须非常快速地进行编码和调试，否则它将无法构建——而且我将无法使用它……有什么办法可以保留旧的吗？程序的版本，而不必将完整的项目文件夹保存在其他地方？就像创建一个新版本但保留返回旧版本的选项 - 工作 - 一个......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T11:17:44.140

您正在寻找的是所谓的[源代码控制](http://en.wikipedia.org/wiki/Software_configuration_management)。

那里有很多系统，两个流行的是[subversion](http://subversion.apache.org/)和[Git](http://git-scm.com/)。

如果使用得当，您将拥有项目中每个文件的完整历史记录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T11:19:48.710

在我写这篇文章时，这里还有两个关于源代码控制的答案，但也有另一个角度。

您正在从*开发*目录执行*生产副本。*不要这样做。

 *当您将程序开发为稳定版本后，请在其他地方制作一份副本并使用该副本。通过这种方式，您可以自由地继续在软件上进行开发，而不会破坏您继续使用现有稳定版本的能力。

至于源代码控制，如果您还没有这样做，您绝对应该使用它。除其他外，它允许您返回并修复带有小错误修复的稳定版本，同时仍对软件进行重大重写，以及此处其他人提到的功能，您的项目的完整历史，“无限”撤消，等等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T11:18:20.503

我不确定您在修改代码时 Visual Studio 会保存代码是什么意思。默认情况下，它会在您构建时保存，但我认为它不会在您输入时保存。

无论如何，你正在寻找的是一个**源代码控制**系统。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T11:21:09.857

您可以尝试 Microsoft 的 Team Foundation Service。

它工作正常，您可以与同事分享您的项目。

[http://tfs.visualstudio.com/](http://tfs.visualstudio.com/)

编辑：这是您可以使用的免费选项，直到您想与超过 4 人分享您的项目！比你必须为 TFS 支付的费用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T12:03:45.070

你需要源代码控制。

如果您的项目是开源的，您可以使用[codeplex](http://www.codeplex.com/)，它是一个开源网站，工程师和计算机科学家可以在这里分享项目和想法。它的功能包括 wiki 页面、基于 Mercurial、Team Foundation Server 或 Subversion（也由 TFS 提供支持）的源代码控制、Git、讨论论坛、问题跟踪、项目标记、RSS 支持、统计和发布

如果您不想共享代码，可以使用[Team Foundation Server](http://msdn.microsoft.com/en-us/vstudio/ff637362.aspx)*

# javascript - 为什么 If-else 条件无法正常工作

> ID：14213776
> 
> 赞同：0
> 
> 时间：2013-01-08T11:16:39.420
> 
> 标签：javascript, jquery, if-statement

当变量有空间使用时，我的 if 函数总是返回 false

```
'&nbsp;' 
```

我的字符串是 -

```
var Report = "Tab";
$(Report).text($(Report).text() + '&nbsp;&nbsp;X');

if ($(Report).text() == "Tab  X") {

}
else{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:19:45.593

你有效地做这样的事情：`$('Tab')`这不是正确的jQuery。

为初学者尝试这样的事情：

```
var Report = $("#tab");         // cache element with id="tab"
Report.text(Report.text() + '&nbsp;&nbsp;X');

if (Report.text() === "Tab&nbsp;&nbsp;X") {

}
else{

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:22:38.640

`&nbsp;`是一个 HTML 实体，你用 text() 来设置它，`&`用`&amp;`. 您的元素以 结尾`Tab&nbsp;&nbsp;X`，而不是空格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T11:18:03.437

这是不正确的，因为你没有`$('tab')`我假设的元素：

```
var Report = "Tab";
 $(Report) 
```

您正在从字符串创建一个对象！？

此外，您正在将 htmlspecialchars 与任何内容进行比较，因此您的情况总是错误的。

我建议这样做：

```
var Report = "Tab";
Report.text(Report.text()+" X");

if (Report.text() == "Tab  X") {

}
else{

} 
```

# java - Java中输出流的意外结果

> ID：14213778
> 
> 赞同：3
> 
> 时间：2013-01-08T11:16:41.270
> 
> 标签：java, io

我正在尝试一个简单的程序来打印字符。当我这样做时：

```
import java.io.*;

public class listit {

  public static void main(String[] args) {

    for (int i = 32; i < 127; i++) {
      System.out.write(i);
      // break line after every eight characters.
      if (i % 8 == 7) System.out.write('\n');
      else System.out.write('\t');
    }
    System.out.write('\n');
   }
} 
```

我得到了预期的结果，即正在打印出 ASCII 字符集的可打印子集。但是，当我尝试类似的事情时：

```
import java.io.*;
public class listit {
public static void main(String[] args) {
int i = 122;
System.out.write(i);
}
} 
```

当我期待**z**时，我根本没有得到任何输出。这个程序与上面的程序有什么不同，除了没有循环吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T11:20:04.327

PrintStream 支持自动刷新或刷新换行符。

System.out 启用了自动刷新，但对于 System.out.write('A') 它只会在您编写换行符时自动刷新。注意：如果你这样做 System.out.write("A".getByte()) 将自动刷新。

PrintStream.write(int) 状态的 Javadoc

> 将指定的字节写入此流。如果字节是换行符并且启用了自动刷新，`flush`则将调用该方法。

这意味着您需要自动刷新并编写换行符。

注意： PrintStream.print(char) 状态

> 这些字节完全按照 write(int) 方法的方式写入。

这并不清楚冲洗是不同的。如果您有自动刷新或写入新行，它将刷新。

```
System.out.print('a');
System.out.write('b'); 
```

只打印

```
a 
```

我怀疑这种不一致是一个长期存在的错误而不是一个功能（换句话说，它不会被修复）。;)

这意味着您必须

```
System.out.flush(); 
```

或者

```
System.out.write('\n'); 
```

看到最后一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:22:37.997

可能，写一个新行`\n`会刷新流。

在第二个程序中，您没有打印换行符，并且内容不会从流中刷新。所以你看不到输出。

请参阅：[何时/为什么在 Java 中调用 System.out.flush()](https://stackoverflow.com/questions/7166328/when-why-to-call-system-out-flush-in-java)

# c++ - 可变函子是否仍然“有效”可以使用

> ID：14213779
> 
> 赞同：3
> 
> 时间：2013-01-08T11:16:49.573
> 
> 标签：c++, c++11, constants, mutability

看完[You don't know const and mutable](http://channel9.msdn.com/posts/C-and-Beyond-2012-Herb-Sutter-You-dont-know-blank-and-blank)后，我有点疑惑`mutable`以后如何正确处理。虽然我认为这种情况`const`非常安全，因为默认情况下会假定物理只读（减去旧的*逻辑*异常），正确处理`mutable`让我感到困惑。例如，对于新的线程安全条件，以下似乎是错误的：

```
int main() {
    int n;
    [=]() mutable {n = 10;}();
    return n;
} 
```

我会假设，在这种情况下，`n`必须以另一种方式将其包装到 a 或受并发写入保护`std::atomic`的副本中！？`n`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:28:00.947

如果我们明确地写出 lambda，您可能会更清楚：

```
struct mylambda
{
    mylambda(int n) : n(n) {}

    void operator()() /* const <- lambda specified as mutable, operator not const */
    {
        n = 10;
    }

private:
    int n;
};

int main() {
    int n = 0;
    mylambda(n)();
    return n;
} 
```

（旁注：您的示例中实际上有未定义的行为，因为当您的 lambda 复制时`n`，它正在从未初始化的变量中读取。我在这里对其进行了初始化以修复那个小错误。）

如您所见，您没有可变成员，因此无需更改任何内容以实现线程安全（根据谈话）。*只是一个可以通过非常量*成员函数改变的常规成员变量；不假定非常量成员函数是线程安全的。

我不知道您是否可以将 lambda 成员标记为`mutable`; 如果可以的话，您可能处于需要关注线程安全的位置（加上 const 函数调用运算符）。但我不认为这是可能的。

# android - SurfaceView 如何处理屏幕外元素？

> ID：14213782
> 
> 赞同：3
> 
> 时间：2013-01-08T11:16:57.580
> 
> 标签：android, android-canvas, surfaceview

我在问自己如何`SurfaceView`处理可见区域之外的绘图。我进行了一些在线研究，但找不到任何提出问题的人或任何回答问题的人。所以我做了一些测试，我的测试设置如下所示：

我在 a 上绘制 5000 个圆，`SurfaceView`x 轴偏移为 -100，每 1000 个圆额外偏移 -100。偏移量`Matrix`作为翻译存储在 a 中，并在使用 绘制之前应用于画布`Canvas.concat()`。结果是`SurfaceView`在其上绘制了 5000 个圆圈，但最初它们都在可见区域之外，您在屏幕上看不到它们。我运行了我的测试应用程序，对 . 应用了一个翻译`Canvas`，这样圆形堆栈一个接一个地出现，并测量了每秒的帧数。所有更新和绘图都是使用一个尽可能频繁循环的简单线程完成的。

测量结果为：

*   0 个可见圆圈 -> ~ 40 FPS
*   1000 个可见圆圈 -> ~ 30 FPS
*   2000 个可见圆圈 -> ~ 20 FPS
*   3000 个可见圆圈 -> ~ 15 FPS
*   4000 个可见圆圈 -> ~ 12 FPS
*   5000 个可见圆圈 -> ~ 10 FPS

我需要提一下，这一切都是使用我自己的 2D 引擎完成的。在没有任何元素的情况下，它以 60 FPS 的速度运行。我认为第一个“丢失”的 20 FPS 可能是由于我的渲染管道迭代了 5000 个元素。

有谁知道更多关于`SurfaceView`or`Canvas`并且可以解释这种行为？

提前致谢！

测试设置：Nexus 10，Android 4.2.1，最小 SDK：14，目标 SDK：17

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:48:09.960

根据 WarrenFaith 发布的关于图形硬件的解释，我测量了绘制所有圆圈和绘制前检查之间的差异。事实证明完全没有区别！可以肯定的是，我什至将圆圈数增加到 50000，并且两个测试都以大约 4 到 5 FPS 的速度运行，没有可见的圆圈。

# jenkins - Jenkins 构建 XCode 项目 + 运行单元测试

> ID：14213785
> 
> 赞同：1
> 
> 时间：2013-01-08T11:17:20.133
> 
> 标签：jenkins, xcode4.5

我一直在努力追随我能找到的每一篇文章、博客文章等。我需要设置 Jenkins 来构建我的 XCode 4.5.2 项目并运行单元测试......我让构建部分工作但不是单元测试部分......

我首先尝试了 Xcode 插件，然后使用 xcodebuild 等从命令行运行它的所有其他选项都失败了......

Xcode 4.5.2 Mac OS Lion 詹金斯 CI

谁能给我参考可以帮助我的东西？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:17:15.610

我看到很多人抱怨 XCode 4.5 破坏了命令行单元测试的执行。这是一个可能的解决方法的参考帖子：
[Xcode 4.5 command line unit testing](https://stackoverflow.com/questions/12557935/xcode-4-5-command-line-unit-testing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T15:59:43.577

Facebook 构建了一个可能有用的工具：[https ://github.com/facebook/xctool](https://github.com/facebook/xctool)

如果这对您不起作用，您将不得不等到 Apple 为单元测试和持续集成构建更好的工具。

# javascript - 内部javascript函数的正则表达式

> ID：14213788
> 
> 赞同：-1
> 
> 时间：2013-01-08T11:17:30.303
> 
> 标签：javascript, regex

这是功能

```
function getChecked(button, form)
{
    var name;
    for (i = 0; i < document.forms['CheckForm'].list.length; i++) {
        name = "Check" + (i + 0);
        if (document.forms['CheckForm'].list[i].checked == true) {
            if (name == "Check0")
                form.Check0.value = "2337667";
            else if (name == "Check1")
                form.Check1.value = "2335765";
            else if (name == "Check2")
                form.Check2.value = "2332651";
            else if (name == "Check3")
                form.Check3.value = "2328582";
        } 
```

如何编写一个正则表达式来单独获取值的值`form.check0.value`，如果可能的话，获取`form.check0.value`和`form.check1.value`等的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:33:38.873

您可能正在寻找类似这样的正则表达式：

```
/\d{2,}/g 
```

例子：

```
var s = 'function getChecked(button, form){\n    var name;\n    for (i = 0; i < document.forms["CheckForm"].list.length; i++) {\n        name = "Check" + (i + 0);\n        if (document.forms["CheckForm"].list[i].checked == true) {\n            if (name == "Check0")\n                form.Check0.value = "2337667";\n            else if (name == "Check1")\n                form.Check1.value = "2335765";\n            else if (name == "Check2")\n                form.Check2.value = "2332651";\n            else if (name == "Check3")\n                form.Check3.value = "2328582";\n        }\n    }\n}';
console.log(s.match(/\d{2,}/g)); 
```

输出：

```
["2337667", "2335765", "2332651", "2328582"]; 
```

至于@Daverandom 提供的那个 PHP 示例，可以大大缩短：

```
preg_match_all('/\d{2,}/', $str, $matches); // Get all numbers that are at least 2 characters long.
print_r($matches[0]); 
```

**[如本贴所示](http://codepad.viper-7.com/fm6DUg)**

# bash - 有条件地包含其他 makefile

> ID：14213801
> 
> 赞同：1
> 
> 时间：2013-01-08T11:18:07.177
> 
> 标签：bash, include, makefile, conditional

我想根据 xml 文件和产品的内容有条件地包含 makefile。
我的 xml 文件（myxml.xml）：

```
<product1>
  <component1 dirname=dir1 />
  <component2 dirname=dir2 />
</product1>
<product2>
  <component1 dirname=dir1 />
  <component3 dirname=dir3 />
</product2> 
```

在 dir1 我有一个 config.mk 文件，如下所示：

```
SRC_JS+=dir1/file1.js
SRC_JS+=dir1/file2.js
SRC_HTML+=dir1/file3.html 
```

dir2 和 dir3 相同，它们都是 makefile 目录的子目录。

现在我想根据 xml 文件中的内容，根据指定的产品包含某些 config.mk 文件。
所以我的makefile：

```
myjscode.js: myxml.xml
  read_dirs.py -p $PRODUCT $< > mydirs.txt
  while read mydir; do \
    include $$mydir/config.mk ; \
  done < mydirs.txt;
  js-compiler $(addprexis --js ,$SRC_JS) -output $@ 
```

这可以做到吗？仅供参考：我正在使用 bash 并且 read_dirs.py 脚本输出一个“每个目录一行”列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:54:19.660

首先是简单的部分。该`include`指令不能在规则的命令中。修改`read_dirs.py`以产生类似这样的东西（当`PRODUCT`=“product2”时）：

```
include dir1/config.mk
include dir3/config.mk 
```

然后在你的makefile中：

```
mydirs.mk: myxml.xml
    read_dirs.py -p $PRODUCT $< > $@

include mydirs.mk 
```

无需依赖其他任何东西`mydirs.mk`；既然有了这个makefile `includes`，Make会在必要时重建它。

现在是困难的部分。我假设您希望包含的 makefile 的选择不仅在更改时`myxml.xml`更改，而且在更改时`PRODUCT`更改。但`PRODUCT`不是文件，所以我们有一些选择。我们可以有一个`product.mk`包含`PRODUCT`变量的文件。或者，`mydirs.mk`我们可以为每个 PRODUCT 使用不同的文件。或者我们可以强制`mydirs.mk`每次构建。这取决于您如何设置`PRODUCT`以及您的优先级是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T13:41:42.490

```
include $(shell read_dirs.py -p $(PRODUCT) myxml.xml|sed s,$$,/config.mk,)
myjscode.js: myxml.xml
    js-compiler ... 
```

# android - 使用 Tabs Activity 在选项卡旁边添加视图时，TabsActivity 会留下垂直间隙

> ID：14213805
> 
> 赞同：0
> 
> 时间：2013-01-08T11:18:19.740
> 
> 标签：android, android-layout, android-tabs

![在此处输入图像描述](../Images/1bac6508fac6c3980479a15f02b06c80.png)

我正在尝试将视图水平放置在选项卡的右侧。如果我将视图放在选项卡旁边，则选项卡中显示的活动不会覆盖选项卡外部的区域，因此它会为该视图留下空隙。有谁知道如何解决这一问题。

暂时，我使用视图而不是选项卡，这使我的布局非常复杂。

# php - Php 用 < 符号获取请求特殊性？

> ID：14213808
> 
> 赞同：-4
> 
> 时间：2013-01-08T11:18:36.673
> 
> 标签：php, get

```
$in = $_GET['in'];
print $in; 
```

当我输入`?in=<<<`它时它会打印出来`<<<`。但是当你这样做时，`?in=<<<A`它只会打印出来`<<`并且`<A`部分丢失。这种特殊性的解释是什么？我知道那`<<`是`T_LS`并且`<<<`是`T_START_HEREDOC`，但不知何故我不明白那`<A`是怎么消失的。

编辑：对不起，我暂时感到困惑。我的困惑来自这样一个事实，即当我评估代码时

```
eval("\$out = $in"); 
```

并输入`?in=<<<A\nout\nA;\n`我得到一个 T_LS 语法错误。

**抱歉我的轻率问题。模组可以删除或关闭此帖子。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:22:34.457

浏览器将 解释`<A`为打开的 HTML 标记，因此不会在页面上显示它，但它仍然存在于源代码中。

这与作为 heredoc 或任何其他 PHP 语法无关，因为 PHP 将其打印为字符串，而不是执行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:22:17.993

就像[我编辑了你的问题](https://stackoverflow.com/revisions/14213808/2)一样。`<<<A`is`<<`和锚标记的开始`<A`。所以在输出中你看不到它，因为**它创建了一个格式错误的 html**。您应该使用[htmlentities()](http://php.net/htmlentities)函数

```
$data = "<<<A";
echo htmlentities($data); 
```

# c# - 在 JS 中访问 Asp.Net Session 变量

> ID：14213809
> 
> 赞同：6
> 
> 时间：2013-01-08T11:18:36.277
> 
> 标签：c#, javascript

我无法访问 .js 文件中的变量

我在页面顶部的代码是：

```
<script type="text/javascript">
    privilage = '<%=Session["privilage"]%>';
</script> 
```

然后我想在我的 .js 文件中访问权限。

我现在只想提醒这一点。我能做到吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:31:41.490

只需使用：

```
var privilage = '<%=Session["privilage"]%>'; 
```

或尝试：

```
alert(privilage); 
```

它将显示您的会话值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T12:56:35.610

您必须将会话值存储在 HiddenField 中。之后，您可以在 JS 中访问 HiddneFieldValue

```
 <script type="text/javascript">
     document.getElementById('hdnField').value = '<%=Session["privilage"]%>';
 </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-10T06:54:59.023

采用

```
<script type="text/javascript">
    var privilage = '<%=Session["privilage"]%>';
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-09T13:50:25.810

我用这种方式。

```
<asp:TextBox ID="txtValue" runat="server" CssClass="txtValue" style="display: none;" /> 
```

然后我使用 jQuery 来访问该值。

```
<script>
var txtValue = $(".txtValue").val();
</script> 
```

甚至在一个控件上。

```
<asp:LinkButton ID="lnkPrint" runat="server" CausesValidation="true"
CommandName="Print" CommandArgument='<%# Bind("PrintData") %>'
Text="<img src='/images/print_on.png' onmouseover='cursor: pointer;'
class='PrintButton' />" ToolTip="Print" OnClientClick="if ($('.txtValue').val()
!= '1') { $('.txtValue').val('1'); alert('Warning: Please enable pop-ups for
this site!'); }" /> 
```

此方法在 ajax 和回发中存在。

干杯

# php - 在管理员中重新索引时在 magento 中获取超时错误

> ID：14213812
> 
> 赞同：1
> 
> 时间：2013-01-08T11:18:41.353
> 
> 标签：php, zend-framework, magento, timeout, execution

嗨，我在**重新索引**数据时在**magento**管理员中遇到了**最大超时错误**我该如何解决这个问题

 ***** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T11:34:43.857

你有两种方法可以解决这个问题。

方法 1 - 使用 php

```
set_time_limit ( int $seconds ) 
```

set_time_limit() 从零重新启动超时计数器。换句话说，如果超时是默认的 30 秒，并且在脚本执行 25 秒后调用了诸如 set_time_limit(20) 之类的调用，则脚本将在超时之前总共运行 45 秒。[阅读更多](http://php.net/manual/en/function.set-time-limit.php)

方法二

更改我的 php.ini 中的 max_execution_time

```
max_execution_time = 1000 
```

记得重启服务器

如果您有任何问题，请告诉我

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:20:48.743

在 PHP 配置中增加 max_execution_time 值。

您可以在代码中执行此操作： set_time_limit(0) - 这完全禁用时间限制。****

# javascript - 将相同的处理程序应用于多个 jQuery 对象

> ID：14213816
> 
> 赞同：0
> 
> 时间：2013-01-08T11:19:01.023
> 
> 标签：javascript, jquery

我知道我可以`$.each`将相同的事件处理程序应用于两个不同的 jQuery 对象。我很惊讶不可能有更清晰的语法，例如：

```
 var $span = $('span');
  var $div = $('div');

  var clickHandler = function () {
    $(this).toggleClass('red');
  }

  $($span, $div).on('click', clickHandler); // <-- Neater syntax
  $([$span, $div]).on('click', clickHandler); // <-- A little worse, but still better than $.each 
```

为什么我尝试过的语法不起作用？有没有比使用更整洁的替代方法`$.each`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:21:14.430

您可以对多个选择器使用 CSS 语法 - 逗号`,`：

```
$('span, div').on('click', clickHandler); 
```

或者，如果您有包含元素的变量，则可以使用`add()`

```
$span.add($div).on('click', clickHandler); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T11:21:37.030

```
$span.add($div).on('click', clickHandler) 
```

[`add()`根据文档](http://api.jquery.com/add)，应该做你想做的事。

1.  `$($span, $div)`被解释为`$span`'s 的后代`$div`。
2.  `$([$span, $div])`期望数组元素是`DOMElements`，而不是 jQuery 对象（我一直希望这也是可能的）

[您可以在jQuery 文档](http://api.jquery.com/jQuery)中看到这两种语法的描述

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T11:20:50.873

您还可以使用 jQuery 的[`.add()`^(链接)](http://api.jquery.com/add/)方法来*扩展*包装集

```
$span.add( $div ).on( 'click', clickHandler ); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-08T11:33:05.097

在我看来，您在理解选择器而不是处理程序方面存在问题，就像上面建议的其他人一样：使用；

```
$('span, div') 
```

# ios - 如何显示弹出视图

> ID：14213818
> 
> 赞同：0
> 
> 时间：2013-01-08T11:19:08.560
> 
> 标签：ios, uitableview, uiview, uipopovercontroller

我有 UiView，在我的 Uiview 中有一个 Button 和一个 textField。当我单击按钮时，我需要显示日期值的弹出窗口。当我单击文本字段时，其他带有名称的弹出窗口。如果用户从那里选择任何名称，该名称将显示在文本字段中。如果用户单击按钮，日期将按升序或降序排列。问题是，我的 Uiview 也包含一个主表。现在如何区分主表和弹出视图。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:30:02.957

将您的其他弹出窗口创建为单独的类，并在需要时将它们添加到您的视图中。

例子：

创建一个名为“Names”的类，它继承自 UIView 或 UIViewController 创建一个名为“Dates”的类，它继承自 UIView 或 UIViewController

要将这些类中的任何一个显示为弹出窗口，您有 2 个选项：

*   如果您使用了 UIView，那么您可以展示它们`[self addsubview:nview] & [UIView animationwithduration]`以制作弹出动画。
*   如果您使用 UIViewController，只需使用`[self presentViewController:nview]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:37:23.603

每个视图都会有标签，使用它们。 `tableView.tag = 1; textBoxView.tag = 2; alertView.tag = 3;` 现在您有了标签，您可以根据标签区分视图。

# java - Java SQL：Statement.hasResultSet()？

> ID：14213824
> 
> 赞同：2
> 
> 时间：2013-01-08T11:19:29.710
> 
> 标签：java, sql, sqlite, jdbc, resultset

我的应用在一个平台上使用 MySQL，而在另一个平台上使用 SQLite，因此存在差异，例如在使用以下查询时`DELETE FROM USERS`：

*   在**MySQL**上，`PreparedStatement.getResultSet()`将返回`null`。
*   在**SQLite**上，`PreparedStatement.getResultSet()`会抛出`java.sql.SQLException: no ResultSet available`.

这可能是也可能不是 SQLite 实现中的错误（我认为它应该返回`null`），但我必须以某种方式处理这个问题。

我可以使用 a `try { ... } catch (SQLException e) { ... }`，如果异常消息是`"no ResultSet available"`，只需手动返回 null 。不过，这感觉不是正确的方法。

我可以提出一个 if 来检查正在使用的 JDBC 驱动程序并做出相应的反应，但同样，这并不是解决问题的好方法。

我真正想要的是`.hasResultSet()`返回一个`boolean` *或*`SELECT, UPDATE, INSERT`从已执行语句中获取 SQL 命令（等）的方法。[不过，我在 SQL API 中都找不到这两者。](http://docs.oracle.com/javase/7/docs/api/java/sql/package-summary.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T09:59:04.400

当执行返回未知数量结果的查询时，您需要使用[`execute()`](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#execute%28%29). 此方法返回一个`boolean`指示结果类型：

*   `true`: 结果是`ResultSet`
*   `false`: 结果是更新计数

如果结果是`true`，则使用[`getResultSet()`](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#getResultSet%28%29)检索`ResultSet`，否则[`getUpdateCount()`](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#getUpdateCount%28%29)检索更新计数。如果更新计数是`-1`，则意味着没有更多结果。请注意，更新计数也将`-1`是当前结果为`ResultSet`. 知道`getResultSet()`如果没有更多结果或者结果是更新计数应该返回 null 也很好，因此 SQL Lite 抛出异常的行为似乎是错误的。

现在，如果您想检索更多结果，请调用[`getMoreResults()`](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#getMoreResults%28%29)（或其兄弟接受`int`参数）。该`boolean`方法的返回值与 的含义相同`execute()`，`false`并不代表没有结果！

如果`getMoreResults()`返回 false**并** `getUpdateCount()`返回，则只有没有更多结果`-1`（如 Javadoc 中所述）

从本质上讲，这意味着如果您想正确处理所有结果，您需要执行以下操作：

```
PreparedStatement pstmt = connection.prepareStatement(...);
// ...
boolean result = pstmt.execute();
while(true)
    if (result) {
        ResultSet rs = pstmt.getResultSet();
        // Do something with resultset ...
    } else {
        int updateCount = pstmt.getUpdateCount();
        if (updateCount == -1) {
            // no more results
            break;
        }
        // Do something with update count ...
    }
    result = pstmt.getMoreResults();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T11:36:58.110

问题是您使用无效的方法来执行删除操作。而不是使用`getResultSet`你应该使用[`Statement#execute(String)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Statement.html#execute%28java.lang.String%29)

恕我直言，SQLite 实现中的 Exeption 对于 MySQL 来说比 null 更有效。`delete`不返回集合，而是返回删除行的标量值。

# asp.net - IIS 中的模拟是否不安全？

> ID：14213826
> 
> 赞同：0
> 
> 时间：2013-01-08T11:19:33.237
> 
> 标签：asp.net, iis, impersonation

我是新手。对于 IIS 中的模拟，您怎么看？我认为这是不安全的。IIS 如何产生一个 Win32 线程来处理具有用户身份的用户请求？这是否意味着该线程可以在未经用户许可的情况下使用用户身份做任何事情？例如，该线程可以连接到其他服务器并使用用户的身份进行操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:39:06.767

使用模拟时，您通常会创建一个只有足够权限来执行所需操作的用户，例如读取 c:\inetpub\wwwroot 中文件夹的内容。类似于当您只需要读取一些值时，您不会创建可以删除表的数据库用户。

# sql-server - 无向图的唯一约束格式 - 给定 (1,2)，防止 (2,1)

> ID：14213835
> 
> 赞同：1
> 
> 时间：2013-01-08T11:19:53.807
> 
> 标签：sql-server, sql-server-2008, constraints

我的 SQL Server (2008) 数据库中有一个无向图表，我想要一个约束来防止重复。我的链接表有 2 列 (City1, City2)，它们都是 Cities 表的整数引用。我可以使用以下内容：

```
ALTER TABLE dbo.CityConnections
ADD CONSTRAINT CK_CityConnections_OneWayOnly UNIQUE (City1, City2) 
```

这做了我想要的一半，但这并不妨碍添加“反向”连接。

谷歌向我展示了

```
... UNIQUE (MIN(City1,City2), MAX(City1,City2)) 
```

看起来它将完全符合我的要求，但语法无效。

我也使用 CASE 尝试了一个复杂的约束，但我也无法正确地得到这个语法。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T11:26:53.150

假设您可以控制您对表格的输入，以下应该可以工作；

```
ALTER TABLE dbo.CityConnections
ADD CONSTRAINT CK_CityConnections_Unq UNIQUE (City1, City2)
ALTER TABLE dbo.CityConnections
ADD CONSTRAINT CK_CityConnections_OneWayOnly CHECK (City1 < City2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:44:04.693

太好了，只要我提出一个困扰我多年的问题，我就会得到灵感并自己解决。我的解决方案是添加计算列并将其用作唯一约束（索引）

我现在有：

```
CREATE TABLE [CityConnections]
(
    [City1] [int] NOT NULL,
    [City2] [int] NOT NULL,
    [minCity]  AS (case when [City1]<[City2] then [City1] else [City2] end),
    [maxCity]  AS (case when [City1]>[City2] then [City1] else [City2] end),
CONSTRAINT [CK_CityConnections_OneWayOnly] UNIQUE NONCLUSTERED 
(
    [minCity] ASC,
    [maxCity] ASC
) 
```

编辑 - 经过进一步思考（和评论），我同意这不是最好的解决方案

# sql - SQL Server 2008 如何通过 GROUP(ing) 其他列选择具有值的行？

> ID：14213836
> 
> 赞同：1
> 
> 时间：2013-01-08T11:19:53.183
> 
> 标签：sql, sql-server-2008

大家好，我是 SQL 的初学者，所以请多多包涵.. :)

我的问题如下。

我得到了这张桌子：

```
 DateTime         ID     Year    Month   Value    Cost
-------------------|------|--------|-------|-------|--------|
 1-1-2013 00:00:01 |  1   |  2013  |   1   |  30   |   90   |
 1-1-2013 00:01:01 |  1   |  2013  |   1   |  0    |   0    |
 1-1-2013 00:02:01 |  1   |  2013  |   1   |  1    |   3    |
 1-2-2013 00:00:01 |  1   |  2013  |   2   |  2    |   6    |
 1-2-2013 00:01:01 |  1   |  2013  |   2   |  3    |   9    |
 1-2-2013 00:02:01 |  1   |  2013  |   2   |  4    |   12   |
 1-3-2013 00:00:01 |  1   |  2013  |   3   |  5    |   15   |
 1-3-2013 00:01:01 |  1   |  2013  |   3   |  6    |   18   |
 1-3-2013 00:02:01 |  1   |  2013  |   3   |  7    |   21   | 
```

现在我想要得到的是这个结果

```
 Year    Month   Value    Cost
|--------|-------|-------|--------|
|  2013  |   1   |  1    |   3    |
|  2013  |   2   |  4    |   12   |
|  2013  |   3   |  7    |   21   | 
```

如您所见，我正在尝试按 [月] 和 [年] 分组，并获取每个 [月] 的最后一个 [值]。

现在，正如您从结果中可以理解的那样，我不会尝试从 [Value] 列中获取 MAX() 值，而是每个 [Month] 的最后一个值，这是我的问题..

提前致谢

PS
我能够对 [Year] 和 [Month] 进行 GROUP BY，但据我所知，当我添加 [Value] 列时，GROUP BY 不会影响结果，因为 SQL 需要对你的值进行更多规范SQL 来获取..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:38:07.750

除了使用`row_number()`，您还可以使用`rank()`。使用`rank()`可能会在同一年和同一月内为您提供多个值，请参阅[这篇文章](https://stackoverflow.com/questions/7747327/sql-rank-versus-row-number)。因此，添加了分组依据。

```
SELECT
  [Year],
  [Month],
  [Value],
  [Cost]
FROM
(
  SELECT 
    [Year],
    [Month],
    [Value],
    [Cost],
    Rank() OVER (PARTITION BY [Year], [Month] ORDER BY [DateTime] DESC) AS [Rank]
  FROM [t1]
) AS [sub]
WHERE [Rank] = 1
GROUP BY 
  [Year],
  [Month],
  [Value],
  [Cost]
ORDER BY
  [Year] ASC,
  [Month] ASC 
```

如评论中所述，这可能仍会在一个月内返回多条记录。因此，可以根据所需的功能扩展 ORDER BY 语句：

```
Rank() OVER (PARTITION BY [Year], [Month] ORDER BY [DateTime] DESC, [Value] DESC, [Cost] ASC) AS [Rank] 
```

切换`[Value]`and`[Cost]`或`ASC`<>的顺序`DESC`会影响排名，因此会影响结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:23:40.107

由于您使用的是 SQL Server 2008，因此您可以使用[`row_number()`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)以下命令获取结果：

```
select year, month, value, cost
from
(
  select year, month, value, cost,
    row_number() over(partition by year, month order by datetime desc) rn
  from yourtable
) src
where rn = 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/aecd2/4)

或者您可以使用子查询来获取此信息（*注意：*`datetime`使用此版本，如果您每月有多个相同最大值的记录，那么您将返回每条记录：

```
select t1.year, t1.month, t1.value, t1.cost
from yourtable t1
inner join
(
  select max(datetime) datetime
  from yourtable
  group by year, month
) t2
  on t1.datetime = t2.datetime 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/aecd2/6)

两者都给出相同的结果：

```
| YEAR | MONTH | VALUE | COST |
-------------------------------
| 2013 |     1 |     1 |    3 |
| 2013 |     2 |     4 |   12 |
| 2013 |     3 |     7 |   21 | 
```

# gwt - Gwt 中的可点击 Imagemap

> ID：14213840
> 
> 赞同：1
> 
> 时间：2013-01-08T11:20:03.727
> 
> 标签：gwt, imagemap

嗨，我想要 gwt 项目中的可点击图像地图...我已经创建了一个简单的 XY 地图，但现在我想要可点击的图像地图...请帮助我，我只想创建一个鼠标悬停效果发生的图表...。这是我的代码

```
public class ChartGenerator extends ApplicationFrame{

private List<String> trainTypeArray = new ArrayList<String>();
private String lineType;
private List<Long> startTimeOfTrain = new ArrayList<Long>();
private List<Boolean> labelVisibility = new ArrayList<Boolean>();
private List<Integer>  stationDistance= new ArrayList<Integer>();
private List<String> lineColorArray = new ArrayList<String>();
private List<String> lineShadeArray = new ArrayList<String>();
private List<String> stationNames = new ArrayList<String>();
private List<String> trainArray = new ArrayList<String>();

private JFreeChart chart =null;
private int startTimeLong;
private int endTimeLong;
private String timezone;
private boolean prediction;
public ChartGenerator(String title, Date dt, String startTime, String endTime, String serviceDirection, String lineType, int delay, boolean prediction) throws BombardierBaseException, BombardierException {
    /*super(title)*/;       
    String[] startSplit = startTime.split(":");
    String[] endTimeSplit = endTime.split(":");
    this.timezone = startTime +"-"+endTime;
     startTimeLong = Integer.parseInt(startSplit[0])*60*60*1000+Integer.parseInt(startSplit[1])*60*1000;
     endTimeLong = Integer.parseInt(endTimeSplit[0])*60*60*1000+Integer.parseInt(endTimeSplit[1])*60*1000;
     endTimeLong = endTimeLong+(60*1000);
     this.prediction = prediction;
    SimpleDateFormat sdf = new SimpleDateFormat("dd-MMM-yy");
    String dtOfJourney = "'" +sdf.format(dt)+"'";
    this.lineType = lineType;
    System.out.println("Create data-set now");
    final XYDataset dataset = createDataset(dtOfJourney, startTimeLong,endTimeLong,serviceDirection);
    chart= createChart(dataset, dtOfJourney, serviceDirection);

}

public int getStartTimeLong() {
    return startTimeLong;
}

public void setStartTimeLong(int startTimeLong) {
    this.startTimeLong = startTimeLong;
}

public int getEndTimeLong() {
    return endTimeLong;
}

public JFreeChart getChart(){
    return chart;
}

public BufferedImage getBufferedImage(int width, int height){
    ChartRenderingInfo info = new ChartRenderingInfo(new StandardEntityCollection());
    return this.chart.createBufferedImage(width,height, info);      
}

private double getStationDistion(String name){
    return InitializeProperties.getStationDistance(name);       
}

private XYDataset createDataset(String dtOfJourney, long startTime,long endTime,String serviceDirection) throws BombardierBaseException {
    ResultSet resultSet =null;
    Statement readstatement = null;
    Connection con = null;
    System.out.println("Entering get Connection now");
    System.out.flush();
    try{
        System.out.println("Getting connection");
        System.out.flush();
        con = InitializeProperties.getConnection();
        System.out.println("Connection initialized");
        System.out.flush();
        readstatement= con.createStatement();

        final XYSeriesCollection dataset1 = new XYSeriesCollection();

        String lineTypeFilter = "";
        if(!this.lineType.equals("A")){
            if(lineType.equals("L")){
                lineTypeFilter = "and lt.act_lineType like ' '";
            }else{
                lineTypeFilter = "and lt.act_lineType like '" + this.lineType + "'";
            }
        }

        int n = 0;
        String serviceDirectionClause = ""; 
```

# javascript - onclick 工作，但从另一个页面运行时停止

> ID：14213845
> 
> 赞同：0
> 
> 时间：2013-01-08T11:20:10.237
> 
> 标签：javascript, jquery

因此，当用户单击按钮时，将加载图像。这适用于以下代码：

```
 <script type ="text/javascript">
        function showImg() 
        {
              $("#imagePreview").attr("src", "//this is a url for image");

         }
        </script>

        <div style="height:50px; margin-top:25px; margin-bottom:25px;">
            <img id="imagePreview" alt="" width="30" height ="30"></img>
            <input type="button" onclick="javascript:showImg()" />
        </div> 
```

但是我试图改变它，以便在另一个页面上使用 onclick 按钮事件，所以我将上面的代码更改为：

```
 <script type ="text/javascript">
        function showImg(url) 
        {
              $("#imagePreview").attr("src", "url");

         }
        </script>

        <div style="height:50px; margin-top:25px; margin-bottom:25px;">
            <img id="imagePreview" alt="" width="30" height ="30"></img>
        </div> 
```

在另一页上我添加了

```
 <asp:HyperLink runat="server" ID="HyperLink1" NavigateUrl="<%# FieldValueString %>" Text="View Image" Visible="true" />
<input type="button" onclick="javascript:showImg("<%# "FieldValue" %>")" />
<asp:Label runat="server" ID="Label1" Text="No Image" Visible="false" /> 
```

但是单击按钮时没有任何反应。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:22:56.067

您将参数**url**作为字符串...无需`""`在 url中使用

它应该是

```
 function showImg(url) 
 {
     $("#imagePreview").attr("src", url); //here

 } 
```

# ide - IAR Embedded Workbench 和自定义构建

> ID：14213846
> 
> 赞同：1
> 
> 时间：2013-01-08T11:20:15.220
> 
> 标签：ide, build-process, iar

我在 IAR Embedded Workbench 中有一个运行良好的项目。在这个项目中有一个由另一个工具自动创建的源文件 (webpages.c)。此工具从位于指定文件夹 pages 中的文件开始创建文件 pages.c（因此从一组文件开始生成一个文件）。

我想以这样的方式在 IAR 中配置项目，在构建过程之前，如果自上次构建以来网页文件夹中的文件发生更改，则该工具会自动运行。

我配置了一个预构建步骤，它确实适用于 Rebuild All。但是，如果我只更改网页文件夹中的一个文件并发出 Make 命令，IDE 会认为该项目是最新的并且不会开始构建。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T17:51:24.883

> > 您不能将它们作为文件添加到单独的组下的项目中吗？

然后，右键单击该组的选项，选择自定义构建，选中“覆盖继承的设置”并填写自定义构建步骤的命令。

# regex - ".+" 和 ".+?" 的区别

> ID：14213848
> 
> 赞同：35
> 
> 时间：2013-01-08T11:20:22.993
> 
> 标签：regex

`.+`有人可以解释和之间的区别吗`.+?`

我有字符串：`"extend cup end table"`

1.  该模式`e.+d`发现：`extend cup end`
2.  模式`e.+?d`发现：`extend`和`end`

我知道那`+`是一或多，`?`是一或零。但我无法理解它是如何工作的。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-01-08T11:22:56.860

两者都将匹配一个或多个字符的任何序列。不同之处在于：

*   `.+`是*贪婪*的，并尽可能多地消耗字符。
*   `.+?`不*情愿*并且尽可能少地消耗字符。

请参阅Java 教程中的[Greedy、Reluctant 和 Possessive 量词之间的差异。](http://docs.oracle.com/javase/tutorial/essential/regex/quant.html#difs)

因此：

*   `e.+d`查找以 开头`e`和结尾的最长子字符串`d`（并且在两者之间至少包含一个字符）。在你的例子`extend cup end`中会找到。
*   `e.+?d`找到最短的这样的子串。在您的示例中，`extend`and`end`是两个这样的非重叠匹配项，因此它找到了两者。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-08T11:33:32.320

正则表达式`e.+?d`匹配 an `'e'`，然后尝试匹配尽可能少的字符（不贪婪或不情愿），然后是`'d'`. 这就是匹配以下 2 个子字符串的原因：

```
extend cup end table
^^^^^^     ^^^
  1         2 
```

正则表达式`e.+d`匹配 an`'e'`然后尝试匹配尽可能多的字符（贪婪），然后是 a `'d'`。发生的情况`'e'`是找到第一个，然后`.+`尽可能多地匹配（直到行尾或输入）：

```
extend cup end table
^^^^^^^^^^^^^^^^^^^^ 
```

正则表达式引擎到达行尾（或输入），无法匹配`'d'`正则表达式模式中的。所以它回溯到最后一个`'d'`被看见的地方。这就是找到单个匹配项的原因：

```
extend cup end table
^^^^^^^^^^^^^^<----- backtrack
  1 
```

# xaml - Scrollviewer 不通过触摸滚动

> ID：14213849
> 
> 赞同：1
> 
> 时间：2013-01-08T11:20:25.203
> 
> 标签：xaml, windows-8, scroll, scrollviewer

所以我已经到了这一点，我一遍又一遍地对自己说，我错过了一些基本的东西。我有一个带有[将 HTML 转换为内容](https://stackoverflow.com/questions/13729540/convert-simple-html-to-a-richtextblock)的 RichTextBlock 的 ScrollViewer 。

一切都按预期显示，但我无法滚动！我有隐藏的 VerticalScrollBarVisibility，但我已经把它拿出来了。在 StackOverflow 中看到[这个 anwsear](https://stackoverflow.com/questions/10332867/the-scrollviewer-does-not-scroll)后，我停止使用以下代码：

```
<ScrollViewer VerticalAlignment="Stretch"
    HorizontalScrollMode="Disabled" 
    VerticalScrollBarVisibility="Visible" 
    VerticalScrollMode="Auto"
    ZoomMode="Disabled" 
    Padding="52" 
    Background="#60000000" >

    <RichTextBlock rtbx:Properties.Html="{Binding TextHTML}"
         TextAlignment="Justify" 
         FontSize="20" />

</ScrollViewer> 
```

似乎[PanningMode](http://msdn.microsoft.com/en-us/library/system.windows.controls.scrollviewer.panningmode.aspx)在 Windows 8 中不可用，但我相信它仍然是通过触摸滚动的预期行为。

我试图在 ScrollViewer 中将 ManipulationMode 设置为 All，并尝试在 RichTextBlock 中设置为 none。但是，这些方法我没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:54:05.173

删除操作模式并隔离问题并简化我正在使用的“选项”使我得出结论，ScrollViewer 不是问题。

问题是：我有一个控件，它位于隐藏的 ScrollViewer 之上（不透明度 = 0）。这个控件吞下了我在 ScrollViewer 中需要的所有事件。基本错误。

我不得不把可见性等于折叠。

# c++ - 使用 Boost 高效生成数字

> ID：14213854
> 
> 赞同：0
> 
> 时间：2013-01-08T11:20:43.487
> 
> 标签：c++, boost

我希望使用 Boost 生成超过 10^8 个随机数。它们必须以标准差 1 和均值 0 正态分布。这是我的 MWE：

```
#include <iostream>
#include <vector>

#include <time.h>
#include <boost/random/normal_distribution.hpp>
#include <boost/random/mersenne_twister.hpp>
#include <boost/random/variate_generator.hpp>

using namespace std;

int main()
{
    typedef boost::mt19937                     ENG;
    typedef boost::normal_distribution<double> DIST;
    typedef boost::variate_generator<ENG,DIST> GEN;

    ENG  eng;
    DIST dist(0,1);
    GEN  gen(eng,dist);

    gen.engine().seed(time(0));

    vector<double> nums;

    for(int i=0; i<500; i++)
    {
        nums.push_back(gen());
    }

    return 0;
} 
```

在这方面我有两个问题：

1.  我用来播种引擎的方法是否正确？还是我需要在*每个*数字之前播种？
2.  我的方法有效吗？或者，还有更好的方法？

**编辑**请注意，代码中没有瓶颈。我只是想知道从专业角度来看我的方法是否正确

我应该说这些数字（全部）必须在之后按适当的常数进行缩放。我的计划是为此使用 for 循环。

最好的，奈尔斯。

# asp.net - 用于 ASP.NET 的 CKEditor 插件，“ExtraPlugins”属性不起作用

> ID：14213864
> 
> 赞同：0
> 
> 时间：2013-01-08T11:21:14.103
> 
> 标签：asp.net, plugins, ckeditor

我有两个 ASP.NET Web 窗体应用程序，首先针对 v4.0，其次针对 .NET 框架的 v4.5。我使用 ASP.NET CKeditor 插件 v3.6.4。一切都很好，除了我无法使用“ExtraPlugins”属性注册我的“短语”插件。Javascript 解决方案有效：

```
CKEDITOR.replace('<%=CKEditor1.ClientID%>',
        {
            extraPlugins: 'phrases',
            toolbar:
            [
                ['Bold', 'Italic', '-', 'NumberedList', 'BulletedList', '-', 'Link', 'Unlink'],
                ['phrases']
            ]
        }); 
```

但是“ExtraPlugins”属性解决方案不起作用：

```
<CKEditor:CKEditorControl ID="CKEditor1" BasePath="~/ckeditor" ExtraPlugins="phrases" Toolbar="Basic" runat="server" /> 
```

请寻求帮助。

最好的问候， WP

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T09:57:02.797

我做了一些实验，最后我知道它是如何工作的。

以下 ASP.NET CKEditor Web Control 标记放置在 *.aspx 页面中：

```
<CKEditor:CKEditorControl ID="CKEditor1" BasePath="~/ckeditor" ExtraPlugins="phrases" Toolbar="Basic" runat="server" /> 
```

然后，这个标签在输出的 HTML 文档中呈现，并以这种方式传送到用户浏览器：

第一部分：

```
<script type="text/javascript">
//<![CDATA[
function WebForm_OnSubmit() {
CKEditor_TextBoxEncode('CKEditor1', 0); 
return true;
}
//]]>
</script> 
```

第二部分：

```
<textarea name="CKEditor1" rows="2" cols="20" id="CKEditor1">
</textarea> 
```

第三方：

```
<script type="text/javascript">
//<![CDATA[
var CKEditor_Controls=[],CKEditor_Init=[];function CKEditor_TextBoxEncode(d,e){var f;if(typeof CKEDITOR=='undefined'||typeof CKEDITOR.instances[d]=='undefined'){f=document.getElementById(d);if(f)f.value=f.value.replace(/</g,'&lt;').replace(/>/g,'&gt;');}else{var g=CKEDITOR.instances[d];if(e&&(typeof Page_BlockSubmit=='undefined'||!Page_BlockSubmit)){g.destroy();f=document.getElementById(d);if(f)f.style.visibility='hidden';}else g.updateElement();}};(function(){if(typeof CKEDITOR!='undefined'){var d=document.getElementById('CKEditor1');if(d)d.style.visibility='hidden';}var e=function(){var f=CKEditor_Controls,g=CKEditor_Init,h=window.pageLoad,i=function(){for(var j=f.length;j--;){var k=document.getElementById(f[j]);if(k&&k.value&&(k.value.indexOf('<')==-1||k.value.indexOf('>')==-1))k.value=k.value.replace(/&lt;/g,'<').replace(/&gt;/g,'>').replace(/&amp;/g,'&');}if(typeof CKEDITOR!='undefined')for(var j=0;j<g.length;j++)g[j].call(this);};window.pageLoad=function(j,k){if(k.get_isPartialLoad())setTimeout(i,0);if(h&&typeof h=='function')h.call(this,j,k);};if(typeof Page_ClientValidate=='function'&&typeof CKEDITOR!='undefined')Page_ClientValidate=CKEDITOR.tools.override(Page_ClientValidate,function(j){return function(){for(var k in CKEDITOR.instances){if(document.getElementById(k))CKEDITOR.instances[k].updateElement();}return j.apply(this,arguments);};});setTimeout(i,0);};if(typeof Sys!='undefined'&&typeof Sys.Application!='undefined')Sys.Application.add_load(e);if(window.addEventListener)window.addEventListener('load',e,false);else if(window.attachEvent)window.attachEvent('onload',e);})();CKEditor_Controls.push('CKEditor1');
CKEditor_Init.push(function(){if(typeof CKEDITOR.instances['CKEditor1']!='undefined' || !document.getElementById('CKEditor1')) return;CKEDITOR.replace('CKEditor1',{"extraPlugins" : "phrases", "htmlEncodeOutput" : true, "toolbar" : "Basic"}); });
//]]>
</script> 
```

在源代码的第三部分，有一个最重要的语句，它被渲染为等效于 ASP.NET CKEditor 标记：

```
CKEDITOR.replace('CKEditor1',{"extraPlugins" : "phrases", "htmlEncodeOutput" : true, "toolbar" : "Basic"}); }); 
```

正如我们所见，ASP.NET WebControl 的属性`ExtraPlugings`与`extraPlugins`CKEditor 实例的 Javascript 配置中的属性相关联。

经过一些认识，事实证明，JS 配置`extraPlugins`选项实际上并没有附加插件以在 CKEditor 工具栏中可见并准备好使用，而实际上只是注册插件以允许使用它。插件可以通过这种方式注册，也可以在`config.js`CKEditor 的配置文件中注册：

```
CKEDITOR.editorConfig = function( config )
{
    config.extraPlugins = 'phrases';

    // Define changes to default configuration here. For example:
    // config.language = 'fr';
    // config.uiColor = '#AADC6E';
}; 
```

注册后，必须以某种方式将插件添加到工具栏以供使用，例如以这种方式：

```
<CKEditor:CKEditorControl ID="CKEditor1" BasePath="~/ckeditor" ExtraPlugins="phrases" Toolbar="[{ name: 'plugins', items: ['phrases'] }]" runat="server" /> 
```

或通过使用 Javascript 代码。

因此，总而言之：`ExtraPlugins`属性只会导致插件注册。如果我们想在 CKEditor Toolbar 上拥有它，我们必须编写适当的语句来配置 CKEEditor 工具栏。

# java - 如何在 J2ME 应用程序中编写 build.xml？

> ID：14213868
> 
> 赞同：0
> 
> 时间：2013-01-08T11:21:29.683
> 
> 标签：java, ant, java-me, lwuit, build.xml

我开发了一个 j2me 应用程序，它运行良好。

在我的应用程序中，我有 build.xml，当我运行这个 build.xml 时，它会生成一个 jar 和 jad 文件。

但是这里构建失败但是创建了jar和jad，当我运行那个jad时，应用程序没有运行。

请帮助我如何在 j2me 中编写 build.xml，以下是我的 build.xml

```
<project name="DEMO" default="build" basedir=".">

<!-- set global properties for this build -->

    <taskdef resource="antenna.properties" classpath="../antenna/antenna-bin-1.2.1-beta.jar" />

    <property name="lib" location="../lib" />

    <property name="program_name" value="DEMO" />
    <property name="package_name" value="DEMO" />

    <property name="midp_home" value="C:/WTK2.5.2_01" />
    <property name="wtk.home" value="C:/WTK2.5.2_01" />
    <property name="wtk.midp.version" value="2.0" />
    <property name="wtk.cldc.version" value="1.1" />

    <path id="lib.path">
            <fileset dir="${lib}">
                    <include name="LWUIT.jar"/>
            </fileset>
    </path>

    <property name="src" value="src" />
    <property name="res" value="res" />
    <property name="build" value="build" />
    <property name="dist" value="dist" />

    <!--Create the build directory structure used by compile and dist-->
    <target name="init">
        <delete dir="${build}" />
        <delete dir="${dist}" />

        <mkdir dir="${build}" />
        <mkdir dir="${dist}" />
        <mkdir dir="${build}/classes" />
    </target>

    <!-- Compile Source -->
    <target name="compile" depends="init">
        <wtkbuild srcdir="src" destdir="${build}/classes" preverify="false">
           <classpath refid="lib.path"/>
        </wtkbuild>

      <unjar src="../lib/LWUIT.jar" dest="${build}/classes" />

    </target> 

    <!-- Creat build and Preverify  -->
    <target name="package" depends="compile" >

    <wtkjad jadfile="${dist}\${program_name}.jad" manifest="${dist}/MANIFEST.MF"
            jarfile="${dist}\${program_name}.jar" name="DEMO"
            vendor="xyz" version="1.2">
            <midlet name="DEMO" icon="/i.png" class="MM" />
            <attribute name="endpoint"
                value="http://localhost/j2meservice" />
            <attribute name="MicroEdition-Configuration" value="CLDC-1.1"/> 
            <attribute name="MicroEdition-Profile" value=" MIDP-2.0"/>
            <attribute name="MIDlet-Description" value=" Smart Phones"/>
            <attribute name="devicetype" value="bb" />
        </wtkjad>

        <wtkpackage jarfile="${dist}/${program_name}.jar"
           jadfile="${dist}/${program_name}.jad" obfuscate="false"
            preverify="false">

            <fileset dir="${build}/classes" includes="**/*.class" />
            <fileset dir="${res}" includes="**" />
        </wtkpackage>
    </target>

    <target name="obfuscate" depends="package">
            <wtkobfuscate jarfile="${dist}/${program_name}.jar"
                    jadfile="${dist}/${program_name}.jad" obfuscator="proguard" >
                <argument value="-defaultpackage"/>
                <argument value="-repackageclasses"/>
                </wtkobfuscate>
            </target>

    <target name="preverify" depends="obfuscate">
       <wtkpreverify jarfile="${dist}/${program_name}.jar" jadfile="${dist}/${program_name}.jad" >
       </wtkpreverify>
   </target>

   <target name="build" depends="preverify">
   </target>

    <target name="run">
        <exec executable="${midp_home}/bin/emulator">
            <arg line="-Xdescriptor:${dist}/${program_name}.jad" />
        </exec>
    </target>

</project> 
```

这是我的 build.xml 的输出

```
Buildfile: D:\eclipse-pulsar-copy-workspace\DEMO\build.xml
init:
   [delete] Deleting directory D:\eclipse-pulsar-copy-workspace\DEMO\build
   [delete] Deleting directory D:\eclipse-pulsar-copy-workspace\DEMO\dist
    [mkdir] Created dir: D:\eclipse-pulsar-copy-workspace\DEMO\build
    [mkdir] Created dir: D:\eclipse-pulsar-copy-workspace\DEMO\dist
    [mkdir] Created dir: D:\eclipse-pulsar-copy-workspace\DEMO\build\classes
compile:
 [wtkbuild] **************************************************************
 [wtkbuild] * Antenna 1.2.1 initialized for project "DEMO"          *
 [wtkbuild] * Using "Sun Wireless Toolkit 2.5" (CLDC-1.1; MIDP-2.0)      *
 [wtkbuild] **************************************************************
 [wtkbuild] Compiling 705 source files to D:\eclipse-pulsar-copy-workspace\DEMO\build\classes
 [wtkbuild] Note: Some input files use or override a deprecated API.
 [wtkbuild] Note: Recompile with -Xlint:deprecation for details.
    [unjar] Expanding: D:\eclipse-pulsar-copy-workspace\lib\LWUIT.jar into D:\eclipse-pulsar-copy-workspace\DEMO\build\classes
package:
   [wtkjad] Creating JAD file D:\eclipse-pulsar-copy-workspace\DEMO\dist\DEMO.jad
   [wtkjad] Creating MANIFEST file D:\eclipse-pulsar-copy-workspace\DEMO\dist\MANIFEST.MF
[wtkpackage] Building jar: D:\eclipse-pulsar-copy-workspace\DEMO\dist\DEMO.jar
[wtkpackage] Updating JAD file D:\eclipse-pulsar-copy-workspace\DEMO\dist\DEMO.jad
obfuscate:
[wtkobfuscate] Obfuscating D:\eclipse-pulsar-copy-workspace\DEMO\dist\DEMO.jar with ProGuard
[wtkobfuscate] ProGuard, version 4.8
[wtkobfuscate] Reading input...
[wtkobfuscate] Reading program jar [D:\eclipse-pulsar-copy-workspace\DEMO\dist\DEMO.jar]
[wtkobfuscate] Reading library jar [C:\WTK2.5.2_01\lib\cldcapi11.jar]
[wtkobfuscate] Reading library jar [C:\WTK2.5.2_01\lib\midpapi20.jar]
[wtkobfuscate] Initializing...
[wtkobfuscate] Warning: com.sun.lwuit.M3G: can't find referenced class javax.microedition.m3g.Graphics3D
[wtkobfuscate] Warning: com.sun.lwuit.M3G: can't find referenced class javax.microedition.m3g.Graphics3D
[wtkobfuscate] Warning: com.sun.lwuit.M3G: can't find referenced class javax.microedition.m3g.Graphics3D
[wtkobfuscate] Warning: com.sun.lwuit.M3G: can't find referenced class javax.microedition.m3g.Graphics3D
[wtkobfuscate] Warning: com.sun.lwuit.M3G: can't find referenced class javax.microedition.m3g.Image2D
[wtkobfuscate] Warning: com.sun.lwuit.M3G: can't find referenced class javax.microedition.m3g.Image2D
[wtkobfuscate] Warning: com.sun.lwuit.M3G: can't find referenced class javax.microedition.m3g.Graphics3D
[wtkobfuscate] Warning: com.sun.lwuit.M3G: can't find referenced class javax.microedition.m3g.Graphics3D
[wtkobfuscate] Warning: com.sun.lwuit.M3G: can't find referenced class javax.microedition.m3g.Image2D
[wtkobfuscate] Warning: com.sun.lwuit.M3G$Callback: can't find referenced class javax.microedition.m3g.Graphics3D
[wtkobfuscate] Warning: com.sun.lwuit.impl.midp.GameCanvasImplementation: can't find referenced class javax.microedition.media.control.VideoControl
[wtkobfuscate] Warning: com.sun.lwuit.impl.midp.GameCanvasImplementation: can't find referenced class javax.microedition.media.control.VideoControl
[wtkobfuscate] Warning: com.sun.lwuit.impl.midp.GameCanvasImplementation: can't find referenced class javax.microedition.media.control.VideoControl
[wtkobfuscate] Warning: com.sun.lwuit.impl.midp.GameCanvasImplementation: can't find referenced class javax.microedition.media.control.VideoControl
[wtkobfuscate] Warning: com.sun.lwuit.impl.midp.GameCanvasImplementation: can't find referenced class javax.microedition.media.control.VideoControl
[wtkobfuscate] Warning: com.sun.lwuit.impl.midp.GameCanvasImplementation: can't find referenced class javax.microedition.media.control.VideoControl
[wtkobfuscate] Warning: com.sun.lwuit.impl.midp.GameCanvasImplementation: can't find referenced class javax.microedition.media.control.VideoControl
[wtkobfuscate] Warning: com.sun.lwuit.impl.midp.GameCanvasImplementation: can't find referenced class javax.microedition.media.control.VideoControl
[wtkobfuscate] Warning: com.sun.lwuit.impl.midp.GameCanvasImplementation: can't find referenced class javax.microedition.media.control.VideoControl
[wtkobfuscate] Warning: com.sun.lwuit.impl.midp.GameCanvasImplementation: can't find referenced class javax.microedition.media.control.VideoControl
[wtkobfuscate] Warning: com.sun.lwuit.impl.midp.GameCanvasImplementation: can't find referenced class javax.microedition.media.control.VideoControl
[wtkobfuscate] Warning: com.sun.lwuit.util.Log: can't find referenced class javax.microedition.io.file.FileSystemRegistry
[wtkobfuscate] Warning: com.sun.lwuit.util.Log: can't find referenced class javax.microedition.io.file.FileConnection
[wtkobfuscate] Warning: com.sun.lwuit.util.Log: can't find referenced class javax.microedition.io.file.FileConnection
[wtkobfuscate] Warning: com.sun.lwuit.util.Log: can't find referenced class javax.microedition.io.file.FileConnection
[wtkobfuscate] Warning: com.sun.lwuit.util.Log: can't find referenced class javax.microedition.io.file.FileConnection
[wtkobfuscate] Warning: com.sun.lwuit.util.Log: can't find referenced class javax.microedition.io.file.FileConnection
[wtkobfuscate] Warning: com.sun.lwuit.util.Log: can't find referenced class javax.microedition.io.file.FileConnection
[wtkobfuscate] Warning: com.sun.lwuit.util.Log: can't find referenced class javax.microedition.io.file.FileSystemRegistry
[wtkobfuscate] Warning: com.sun.lwuit.util.Log: can't find referenced class javax.microedition.io.file.FileConnection
[wtkobfuscate] Warning: com.sun.lwuit.util.Log: can't find referenced class javax.microedition.io.file.FileConnection
[wtkobfuscate] Note: com.sun.lwuit.M3G: can't find dynamically referenced class javax.microedition.m3g.Graphics3D
[wtkobfuscate] Note: com.sun.lwuit.impl.midp.GameCanvasImplementation: can't find dynamically referenced class com.siemens.mp.game.Light
[wtkobfuscate] Note: com.sun.lwuit.impl.midp.GameCanvasImplementation: can't find dynamically referenced class com.motorola.phonebook.PhoneBookRecord
[wtkobfuscate] Note: com.sun.lwuit.impl.midp.GameCanvasImplementation: can't find dynamically referenced class com.nokia.mid.ui.FullCanvas
[wtkobfuscate] Note: com.sun.lwuit.impl.midp.GameCanvasImplementation: can't find dynamically referenced class net.rim.device.api.system.Application
[wtkobfuscate] Note: com.sun.lwuit.impl.midp.GameCanvasImplementation: can't find dynamically referenced class com.mot.iden.util.Base64
[wtkobfuscate] Note: com.sun.lwuit.impl.midp.GameCanvasImplementation: can't find dynamically referenced class mmpp.media.MediaPlayer
[wtkobfuscate] Note: there were 7 unresolved dynamic references to classes or interfaces.
[wtkobfuscate] Warning: there were 31 unresolved references to classes or interfaces.
[wtkobfuscate]       You should check if you need to specify additional program jars.
[wtkobfuscate]          You may need to specify additional library jars (using '-libraryjars').
[wtkobfuscate] java.io.IOException: Please correct the above warnings first.
[wtkobfuscate]  at proguard.Initializer.execute(Initializer.java:321)
[wtkobfuscate]  at proguard.ProGuard.initialize(ProGuard.java:212)
[wtkobfuscate]  at proguard.ProGuard.execute(ProGuard.java:87)
[wtkobfuscate]  at proguard.ProGuard.main(ProGuard.java:493)

BUILD FAILED
D:\eclipse-pulsar-copy-workspace\DEMO\build.xml:75: Obfuscation failed (result=1)

Total time: 28 seconds 
```

如何成功构建这个？

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T13:33:20.947

这与 build.xml 无关。您链接的是通用库 LWUIT.jar，而不是您想要的 LWUIT 的 MIDP 版本。

# html - 如何使用css为图像中的区域坐标提供边框

> ID：14213873
> 
> 赞同：0
> 
> 时间：2013-01-08T11:21:38.157
> 
> 标签：html, css

我已经尝试过这段代码，我正在获取该区域，但该区域的边框没有显示

```
<area shape="poly"coords="288,25,283,12,278,6,272,4,266,3,252,3,247,6,240,10,236,14,235,18,236,26,236,33,237,37,238,32,244,22,250,18,256,16,261,12,268,12,278,15,282,19,290,24" href="#" onClick="document.getElementById('finRot1').checked=!document.getElementById('finRot1').checked;" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:49:45.143

你可以试试 jQuery 和 maphilight：

[http://davidlynch.org/projects/maphilight/docs/](http://davidlynch.org/projects/maphilight/docs/)

演示在这里可用：

[http://davidlynch.org/projects/maphilight/docs/demo_simple.html](http://davidlynch.org/projects/maphilight/docs/demo_simple.html)

# logging - 带有 InstallAnywhere 的日志记录摘要屏幕

> ID：14213877
> 
> 赞同：0
> 
> 时间：2013-01-08T11:21:56.360
> 
> 标签：logging, summary, installanywhere

我正在使用基于控制台的 InstallAnywhere 2010 安装程序，并且想要记录摘要屏幕的所有内容。

任何想法，如何实现？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:45:44.870

找不到任何方法来记录摘要屏幕。

可以使用 IA 控件“调试信息”来调试变量、安装树结构等所有细节。但是您可以记录摘要屏幕。

我所做的就是使用 CustomCosoleAction 类来生成摘要，而不是使用 IA“摘要屏幕”。

:)

# maven - Maven - 传递参数以在 mvn 包中使用

> ID：14213878
> 
> 赞同：1
> 
> 时间：2013-01-08T11:22:00.223
> 
> 标签：maven, pom.xml, jira-plugin

我是 maven 新手，我想通过命令行（win7 和 maven 2.1.0）动态地分配 jira 插件的 jar 版本，将参数传递给 maven，因此我可以使用 svn 修订版生成 jar 文件名：

```
mvn -Dsvnrev=1 package 
```

或者

```
mvn package -Dsvnrev=1 
```

但有一个错误：*[INFO] Invalid task '1': you must specify an valid生命周期阶段，或格式为 plugin:goal 或 pluginGroupId:pluginArtifactId:pluginVersion:goal 的目标*

我在 pom.xml 中定义了参数，但是有什么我遗漏的吗？

```
<properties>
    <myprop>MyJarStaticName${svnrev}</myprop>
</properties>

<version>${myprop}</version> 
```

我也试过

```
<properties>
    <myprop>${myprop}</myprop>
</properties>

<version>MyJarStaticName-${myprop}</version> 
```

我有看这篇[文章](https://stackoverflow.com/questions/3421918/maven-pass-argument-to-use-in-exec-maven-plugin/14212756)和[这个](https://stackoverflow.com/questions/4757426/maven-specify-the-outputdirectory-only-for-packaging-a-jar)但它对我不起作用:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:14:35.940

对于命令

```
mvn -Dsvnrev=1 package 
```

尝试使用

```
${env.svnrev} 
```

在 pom.xml 中

# javascript - jSlider jQuery插件：设置最小范围，并格式化最小值？

> ID：14213880
> 
> 赞同：0
> 
> 时间：2013-01-08T11:22:05.627
> 
> 标签：javascript, jquery, jquery-plugins, jquery-slider

我正在使用[jSlider](http://egorkhmelev.github.com/jslider/)来实现一个触摸友好的范围滑块，但我有两个问题：

1.  我想将最低**范围**设置为 10 美元，但我似乎无法做到这一点。（换句话说，下限值和上限值之间总是至少有 10 美元。）
2.  我无法获得正确格式化为 $0 的最小值 - 它显示**而**`$`不是`$0`（实际上我更喜欢它，`$1`但我也无法实现）。

我用我的滑块设置了一个 JSFiddle：http: [//jsfiddle.net/v3gUg/9/](http://jsfiddle.net/v3gUg/9/)

这里也是代码，供参考：

```
var options = { 
  from: 0,
  to: 500,
  round: 10, 
  heterogeneity: ['50/100', '75/250'], 
  scale: ["£0", '|', "£50", '|' , "£100", '|', "£250", '|', "£500"],
  limits: true,
  step: 10,
  format: { format: '£#' }, // Doesn't return 0 correctly. 
  skin: "round_plastic",
  onstatechange: function() { 
      // Check range here and return false if too small?
      // But return false doesn't seem to do anything. 
     return false;
  }
};
jQuery("#price-slider").slider(options); 
```

任何人都可以提出解决这两个问题的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:27:54.743

编辑：

```
 $(document).ready(function() { 

  var options = { 
      from: 0,
      to: 500,
      round: 10, 
      heterogeneity: ['50/100', '75/250'], 
      scale: ["$0", '|', "$50", '|' , "$100", '|', "$250", '|', "$500"],
      limits: true,
      step: 10,
      format: { format: '$#,' },
      skin: "round_plastic",
    callback: function() { 
      // if (range too small)
      //return false;
    },
  onstatechange: function( value ){
    var array = value.split(";");

    if(array[0] == array[1])
    {
      value = array[0]+";"+array[1];
      $(".holder").slider("value", p1, p2)
    }
  } 
    };
  jQuery("#price-slider").slider(options);

}); 
```

# xcode - 如果我添加 FacebookSDK.framework，xcode 4.5.2 崩溃

> ID：14213882
> 
> 赞同：0
> 
> 时间：2013-01-08T11:22:16.067
> 
> 标签：xcode, facebook, facebook-ios-sdk

我只是在 ios 项目中添加了 facebookSDK.framework。附加应用程序后，xcode 不断崩溃。即使我无法运行 facebooksdk 3.1 示例。xcode 崩溃，但样本已成功附加到模拟器。因为我能够在 xcode 崩溃后在模拟器上运行它。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:20:10.473

您是否按照以下步骤操作：安装 Facebook sdk[链接](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)请参阅视频 --

配置应用并从 Facebook 获取应用 ID

启动 Xcode 项目 -- 将 Framework 文件夹拖放到项目框架文件夹中 添加 Resource Bundle (和版本 -- A -- DeprecatedHeaders)

检查三个框架——帐户、添加支持和社交框架的
检查构建设置——其他链接器标志（双击它）“-sqlite3.0”

在app配置中设置Facebook app id——在项目的project-name.plist文件的support文件中——新增一行Facebook AppId——字符串值并输入app id URL Types——添加URL Scheme(Array) -- Item 0 (string) -- fbAppId (App ID 和 fb 前缀)

让我知道您是否完成了所有步骤，但如果它仍然不起作用......

# wpf - Gridsplitter 防止调整网格列的大小

> ID：14213886
> 
> 赞同：0
> 
> 时间：2013-01-08T11:22:21.680
> 
> 标签：wpf, button, grid, gridsplitter

我试图在单击 a`Grid`时隐藏 a 的前两列`Button`。我的`Grid`布局有 3 列，一列带有网格，第二列带有网格拆分器，第三列`Grid`带有`Button`.

当我使用下面的代码运行我的程序时，它会按预期折叠前两列`Button`并调整第三个网格的大小，但是当我使用拆分器调整网格大小时，这不再起作用。它隐藏了列，但是第三列未调整大小以填充`Window`. 我希望前 2 列折叠，第三列填充窗口的整个区域（如果我不使用拆分器调整大小，则会发生这种情况）。

xml如下：

```
<Grid>
    <ColumnDefinition Width="Auto" x:Name="column1"/>
    <ColumnDefinition Width="Auto" x:Name="column2"/>
     <ColumnDefinition Width="*"/>
</Grid.ColumnDefinitions>

<Grid Grid.Column="0" x:Name="left" MinWidth="100">
    <Border Background="Red" Margin="5"/>
    <TextBlock Text="A Brown fox jumped oversomething" Width="{Binding ActualWidth, ElementName=TreeView}" Margin="5"></TextBlock>
</Grid>

<GridSplitter x:Name="splitter"
            Width="5"
            Grid.Column="1"
            HorizontalAlignment="Left"
            Margin="0,5,0,5"
            Panel.ZIndex="1"
            VerticalAlignment="Stretch"                
            ResizeDirection="Columns"/>

<Grid Grid.Column="2">        
    <Grid Grid.Column="0" Grid.Row="0">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="20"></RowDefinition>
        </Grid.RowDefinitions>
        <Border Grid.Row="0" Background="Green" Margin="5"/>
        <Button Grid.Row="1" Click="OnClick">HideAndResize</Button>
    </Grid>
</Grid>
</Grid> 
```

事件`Button.click`处理如下：

```
private bool clicked;

private void OnClick(object sender, RoutedEventArgs e)
{
    clicked = !clicked;

    left.Visibility = clicked ? Visibility.Collapsed : Visibility.Visible;
    splitter.Visibility = clicked ? Visibility.Collapsed : Visibility.Visible;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:09:21.967

似乎 Column 没有正确自动调整大小，所以它仍然不是 0，即使它的子 Visibility 设置为 Collapsed。

一个快速而肮脏的解决方案是：

```
 private bool clicked;
    private double oldLenght;
    private void OnClick(object sender, RoutedEventArgs e)
    {
        clicked = !clicked;

        splitter.Visibility = clicked ? Visibility.Collapsed : Visibility.Visible;
        left.Visibility = clicked ? Visibility.Collapsed : Visibility.Visible;
        oldLenght = clicked ? column1.ActualWidth : oldLenght;
        column1.Width = clicked ? new GridLength(0.0) : new GridLength(oldLenght);
    } 
```

# c# - 实体框架更新不起作用

> ID：14213900
> 
> 赞同：1
> 
> 时间：2013-01-08T11:23:11.150
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-mvc-4, updatemodel

我在 ASP.NET MVC 4 中编写了我的代码。我使用 MVC 编辑模板创建了一个编辑表单，这是我`POST`保存编辑数据的代码。

> ```
>  [AcceptVerbs(HttpVerbs.Post)]
>     [Authorize(Roles = "User")]
>     public ActionResult Register(Models.UserBasicProfile profile)
>     {
>             if (ModelState.IsValid)
>             {
>                 using (Models.SocialServicesDataContainer context = new Models.SocialServicesDataContainer())
>                 {
>                     Models.UserBasicProfile update =
>                         context.UserBasicProfiles
>                         .SingleOrDefault(c => c.Id == profile.Id);
>                     if (update.Id > 0)
>                     {
>                         profile.RegisterDate = update.RegisterDate;
>                         update = profile;
>                         context.SaveChanges();
>                         return RedirectToRoute("User_ShowProfile_Alter", new {username = User.Identity.Name });
>                     }
>                     else
>                     {
>                         return View(profile);
>                     }
>             }
>       } 
> ```

此代码运行正确，没有错误。但是当重定向到用户配置文件发生时，修改的字段仍然具有以前的值。
我该怎么办 ？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T11:33:53.983

我会说这是因为`profile`变量没有“连接”到上下文。上下文不知道配置文件对象。因此，当运行`context.SaveChanges()`配置文件变量中的更改时，不会被注意到。

您需要更新`update object with the values from profile`. 或者也许将配置文件对象附加到上下文。

[查看这篇文章，了解如何在保存实体框架 4 - AddObject vs Attach](https://stackoverflow.com/questions/3920111/entity-framework-4-addobject-vs-attach)之前附加到上下文

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T11:35:19.847

看起来您实际上并没有更改从数据库返回的对象中的数据。您正在设置 update = profile，但这只是取消引用更新变量，因此它不再指向 EF 跟踪的对象。

您需要从配置文件中复制所有属性值以进行更新。

# wordpress - 子域映射

> ID：14213901
> 
> 赞同：0
> 
> 时间：2013-01-08T11:23:12.477
> 
> 标签：wordpress, subdomain, azure-storage, cname

我已将我网站上的**word press**博客转移为其子域，但内部页面仍显示旧博客的**URL**。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:24:05.250

阅读[移动 WordPress](http://codex.wordpress.org/Moving_WordPress)，关于如何在 Codex 中移动 Wordpress 博客的规范文档，尤其是第 10 项。

> 现有图像/媒体链接上传的媒体将引用旧文件夹，并且必须使用新位置进行更新。您可以使用[Velvet Blues 更新 URL 插件](http://wordpress.org/extend/plugins/velvet-blues-update-urls/)，或使用[搜索和替换工具](http://interconnectit.com/124/search-and-replace-for-wordpress-databases/)，或手动在 SQL 数据库中执行此操作，按照[Tamba2 教程“在 PC 中移动您的博客”中的说明进行操作。](http://www.tamba2.org.uk/wordpress/move3)

# algorithm - 用于将电影列表连接到长度不大于给定数量的新连接电影列表的算法

> ID：14213902
> 
> 赞同：4
> 
> 时间：2013-01-08T11:23:16.623
> 
> 标签：algorithm

我有不同长度的电影剪辑（*a1,...,an ）的（播放）列表***（A） 。**我想创建一个新列表**(B)**，其中剪辑 ( *b1,...,bm ) 与***(A)**中的剪辑连接。

 ******还有一个限制**MAX_LEN**，**（B）**中的*bx*不能超过。只有 a 中的相邻剪辑可以连接（*a1+a2+a3*是合法的连接，*a1+a3*不是）。**(A)**中的所有剪辑必须在**(B)**中出现一次，并且必须按照它们在**(A)中出现的顺序出现**

 ********最优解主要：

**1)最小化****(B)**中的剪辑数量。

和次要的：

**2)最大化****(B)**中最短剪辑的持续时间。

主要约束**1)**比**2)**更重要，因此对于NumOfClips( **S1** ) < NumOfClips( **S1** )的 2 个不同解决方案**S1**和**S2** ，即使 durationOfShortestClip( **S1** ) < durationOfShortestClip( **S2 )，** **S1**也比**S2** “更优” 。

 ******这是一个示例，显示了一个输入列表**(A)**三个可能的输出**(B1)**和**(B2)**和**(B3)**。( B1 **)**或**(B2)**都满足**1)**（尽管**(B2)**是比**(B1)**更好的解决方案，因为 25>23）最佳解决方案是**(B3)**。 ![输入和输出列表示例](../Images/1df8d3f499db604e5ce1524acfee61e8.png)

我想知道如何以有效的方式找到最佳解决方案？其他帮助完整的信息/线索，例如存在或不存在最优子问题等，也值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:45:31.940

一个非常模糊的想法，但它至少证明你的问题是多项式的。我的解决方案是那种`O(N^3 * log N * log L)`，其中 L 是所有剪辑的长度之和。

首先找到适当的最小可能数量的剪辑组`G`- 这相当简单。只需将尽可能多的剪辑放在第一组中，然后继续下一个。`G`这肯定会产生（即标准1）的最小值。然而，根据标准 2) 的最优性仍有待找到。

这是怎么回事：

*   创建矩阵`mat[i][j]`，`mat[i][j] = 1`其中包含索引之间的 iff 剪辑`i`索引之间且`j`总和小于`MAX_LEN`。中的所有其他值`mat`均为 0。
*   您对所有组中剪辑总和的最小值进行二分搜索。这一步给出了`log L`我算法中的因素。假设在给定的步骤中，选择的值是`M`
*   复制`mat`as `copy_mat`。`copy_mat[i][j] = 1 <=> mat[i][j] = 1 and SUM(clips i..j) >= M`
*   将此矩阵提高到找到的剪辑组数的幂`G`。矩阵乘法给出因子`N^3`了最简单的方法。提高权力会增加额外的`log N`因素。
*   如果`copy_mat[1][N] = 1`然后有一个解决方案`M`，请尝试增加它。否则 - 减少。
*   减少二分查找步骤。

当二分搜索完成时，它将找到最佳值`M`。如果您需要找到确切的分组，则需要在进行矩阵乘法时使用一个辅助矩阵，但我认为您应该能够自己弄清楚最后一点。

我将继续考虑更快的解决方案，但我的至少证明您的问题不是复杂性指数级的，并且可以相对快速地处理大约 1000 个剪辑的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:43:31.677

对于实现的主要约束，您可以使用贪心算法。因为您应该将（A）中的第一个元素剪辑设置为（B）中的第一个元素，现在如果您在第一个元素（B）中有空白空间，并且在（A）中有第二个元素剪辑) 可以在第一个元素中设置为 (B)，所以这样做，否则设置为 B 中的第二个元素。重复此解决方案以设置 (A) 中的所有剪辑在 (B) 中出现一次。在这个结果中，您将 (B) 中的剪辑数量减少了 o(n)。对于最佳解决方案，您实现了次要约束，您应该最大化最短的持续时间。假设贪心算法提供 B，即 B(i) 是列表中的第 i 个元素项。很明显，B(i) 中的任何剪辑都不能出现在 B(i-1) 中，所以只有 b(i) 中的最后一个成员) 可以出现在 b(i+1) 中。所以检查移动是否最大化（B）中最短剪辑的持续时间。********************

# jakarta-mail - Javamail 不阅读电子邮件多部分/相关

> ID：14213903
> 
> 赞同：1
> 
> 时间：2013-01-08T11:23:19.013
> 
> 标签：jakarta-mail, multipart

我有代码：

```
Message[] arrayMessages = folderInbox.getMessages();

        for (int i = 0; i < arrayMessages.length; i++) {
            Message message = arrayMessages[i];
            Address[] fromAddress = message.getFrom();
            String from = fromAddress[0].toString();
            String subject = message.getSubject();
            String sentDate = message.getSentDate().toString();

            String contentType = message.getContentType();
            String messageContent = "";

            // store attachment file name, separated by comma
            String attachFiles = "";

            if (contentType.contains("multipart")) {
                // content may contain attachments
                Multipart multiPart = (Multipart) message.getContent();
                int numberOfParts = multiPart.getCount();
                for (int partCount = 0; partCount < numberOfParts; partCount++) {
                    MimeBodyPart part = (MimeBodyPart) multiPart.getBodyPart(partCount);
                    if (Part.ATTACHMENT.equalsIgnoreCase(part.getDisposition())) {
                        // this part is attachment
                        String fileName = part.getFileName();
                        attachFiles += fileName + ", ";
                        part.saveFile(saveDirectory + File.separator + fileName);
                    } else {
                        // this part may be the message content
                        messageContent = part.getContent().toString();
                    }
                }

                if (attachFiles.length() > 1) {
                    attachFiles = attachFiles.substring(0, attachFiles.length() - 2);
                }
            }else if (contentType.contains("text/plain")|| contentType.contains("text/html")) {
                Object content = message.getContent();
                if (content != null) {
                    messageContent = content.toString();
                }
            }

            // print out details of each message
            System.out.println("Message #" + (i + 1) + ":");
            System.out.println("\t From: " + from);
            System.out.println("\t Subject: " + subject);
            System.out.println("\t Sent Date: " + sentDate);
            System.out.println("\t Typ wiadomosci: " + contentType);
            System.out.println("\t Message: " + messageContent);
            System.out.println("\t Attachments: " + attachFiles);
            System.out.println("------------------------------------------------");
        } 
```

此代码获取带有附件的电子邮件，我在获取电子邮件类型时遇到问题：多部分/相关。我没有消息：com.sun.mail.util.BASE64DecoderStream@f61227 或 javax.mail.internet.MimeMultipart@7612a

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:28:00.400

多部分/相关部分显示为 Java 类型 MimeMultipart。

# iphone - 在 ios 6 sdk 中获取 facebook 用户详细信息？

> ID：14213912
> 
> 赞同：0
> 
> 时间：2013-01-08T11:23:41.153
> 
> 标签：iphone, objective-c, ios

如何使用 ios 6 内置 facebook sdk 检索 facebook 用户详细信息？我尝试了几个例子，但无法工作。

```
- (void) getFBDetails {

if(!_accountStore)
    _accountStore = [[ACAccountStore alloc] init];

ACAccountType *facebookTypeAccount = [_accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

[_accountStore requestAccessToAccountsWithType:facebookTypeAccount
                                       options:@{ACFacebookAppIdKey: @"514284105262105", ACFacebookPermissionsKey: @[@"email"]}
                                    completion:^(BOOL granted, NSError *error) {
                                        if(granted){
                                            NSArray *accounts = [_accountStore accountsWithAccountType:facebookTypeAccount];
                                            _facebookAccount = [accounts lastObject];
                                            NSLog(@"Success");

                                            [self me];

                                        }else{
                                            // ouch
                                            NSLog(@"Fail");
                                            NSLog(@"Error: %@", error);
                                        }
                                    }];

}

- (void)me{
NSURL *meurl = [NSURL URLWithString:@"https://graph.facebook.com/me"];

SLRequest *merequest = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                          requestMethod:SLRequestMethodGET
                                                    URL:meurl
                                             parameters:nil];

merequest.account = _facebookAccount;

[merequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
    NSString *meDataString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

    NSLog(@"%@", meDataString);

}]; 
```

}

但这无法从 facebook 获取数据。我的应用程序 ID 是正确的。

这是我收到的错误消息

```
Error: Error Domain=com.apple.accounts Code=7 "The Facebook server could not fulfill this access request: no stored remote_app_id for app" UserInfo=0x1d879c90 {NSLocalizedDescription=The Facebook server could not fulfill this access request: no stored remote_app_id for app} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:47:16.287

不确定这是否会修复它，但您是否在应用程序的 AppName-Info.plist 文件中设置了 Facebook 应用程序 ID？

所需的键是`FacebookAppID`，它的类型是`String`。尝试在那里填写您的 App ID 并查看它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T11:28:48.627

在 iOS6.0 中，您必须分别询问读写权限。首先请求读取权限，即电子邮件，然后根据应用要求请求其他权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-07T17:05:49.217

```
in .h file

#import <Accounts/Accounts.h>
#import <Social/Social.h>

@property (nonatomic, strong) ACAccountStore *accountStore;
@property (nonatomic, strong) ACAccount *facebookAccount;

in .m file 

- (void) getuserdetails
{

    self.accountStore = [[ACAccountStore alloc]init];
    ACAccountType *FBaccountType= nil;
    //[self.accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

    if (! FBaccountType) {
        FBaccountType = [_accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
    }
    NSString *key =kFBAppId;
    NSDictionary *dictFB = [NSDictionary dictionaryWithObjectsAndKeys:key,ACFacebookAppIdKey,@[@"email"],ACFacebookPermissionsKey, nil];

    [self.accountStore requestAccessToAccountsWithType:FBaccountType options:dictFB completion:
     ^(BOOL granted, NSError *e)
     {
         if (granted)
         {
             NSArray *accounts = [self.accountStore accountsWithAccountType:FBaccountType];
             self.facebookAccount = [accounts lastObject];
             NSLog(@"facebook account =%@",self.facebookAccount);
             [self get];
         }
         else
         {
             NSLog(@"fb error %@",e.description);

             dispatch_async(dispatch_get_main_queue(), ^
                            {
                                [self performSelectorOnMainThread:@selector(hideLoader) withObject:nil waitUntilDone:YES];
                                NSLog(@"%@",e.description);
                                if([e code]== ACErrorAccountNotFound)
                                {
                                    UIAlertView* alt = [[UIAlertView alloc] initWithTitle:@"Account not found"
                                                                                  message:msgSetUpFBAccount delegate:self cancelButtonTitle:nil otherButtonTitles:@"Ok",nil];
                                    [alt show];
                                }
                                else
                                {
                                    UIAlertView* alt = [[UIAlertView alloc] initWithTitle:msgFBAccessDenied
                                                                                  message:@"" delegate:self cancelButtonTitle:nil otherButtonTitles:@"Ok",nil];
                                    [alt show];
                                }

                            });
             NSLog(@"error getting permission %@",e);

         }
     }];
}

-(void)get
{

    NSURL *requestURL = [NSURL URLWithString:@"https://graph.facebook.com/me"];

    SLRequest *request = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                            requestMethod:SLRequestMethodGET
                                                      URL:requestURL
                                               parameters:nil];
    request.account = self.facebookAccount;
    [request performRequestWithHandler:^(NSData *data,
                                         NSHTTPURLResponse *response,
                                         NSError *error)
     {

         if(!error)
         {
             list =[NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];

             NSLog(@"Dictionary contains: %@", list );

             if([list objectForKey:@"error"]!=nil)
             {
                 [self attemptRenewCredentials];
             }
             dispatch_async(dispatch_get_main_queue(),^{
             });

         }
         else
         {
             [self performSelectorOnMainThread:@selector(hideLoader) withObject:nil waitUntilDone:YES];
             NSLog(@"error from get%@",error);
         }

     }];

}

-(void)attemptRenewCredentials{
    [self.accountStore renewCredentialsForAccount:(ACAccount *)self.facebookAccount completion:^(ACAccountCredentialRenewResult renewResult, NSError *error){
        if(!error)
        {
            switch (renewResult) {
                case ACAccountCredentialRenewResultRenewed:
                    NSLog(@"Good to go");

                    [self get];
                    break;
                case ACAccountCredentialRenewResultRejected:
                {
                    NSLog(@"User declined permission");
                    UIAlertView* alt = [[UIAlertView alloc] initWithTitle:@"Access Denied"
                                                                  message:@"You declined permission" delegate:self cancelButtonTitle:nil otherButtonTitles:@"Ok",nil];
                    [alt show];
                    break;
                }
                case ACAccountCredentialRenewResultFailed:
                {
                    NSLog(@"non-user-initiated cancel, you may attempt to retry");
                    UIAlertView* alt = [[UIAlertView alloc] initWithTitle:@"Access Denied"
                                                                  message:@"non-user-initiated cancel, you may attempt to retry" delegate:self cancelButtonTitle:nil otherButtonTitles:@"Ok",nil];
                    [alt show];
                    break;
                }
                default:
                    break;
            }

        }
        else{
            //handle error gracefully
            NSLog(@"error from renew credentials%@",error);
        }
    }];

}

T**o get this code work the bundle Identifier with which you have registered your application with facebook and bundle identifier in application plist file should be same** 
```

# python - 大多数pythonic方法来获取一个半径范围，并过滤掉太大或太小的条目

> ID：14213915
> 
> 赞同：1
> 
> 时间：2013-01-08T11:23:46.420
> 
> 标签：python

我已经实现了这个算法：

```
def get_hot_pages(self, radius = 2):
    if self.page == None or self.max_pages == None: return []
    hot_pages = []
    for page in xrange(self.page - radius, self.page + radius + 1):
        if page < 0 or page >= self.max_pages : continue
        hot_pages.append(page)
    return hot_pages 
```

但有些事情告诉我这可以更好地实施。有没有更蟒蛇的方式来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T11:31:38.853

通常的“技巧”是使用`max()`and`min()`来设置最小和最大页码：

```
def get_hot_pages(self, radius = 2):
    if self.page is None or self.max_pages is None: return []
    return range(max(self.page-radius, 0), min(self.page+radius+1, self.max_pages)) 
```

这种方法的主要优点是：

*   了解此标准程序的人会立即理解代码的作用（只需阅读一行）。无需阅读整个循环块（其中包含过滤器测试）即可了解某些页面可能超出范围。
*   这是有效的：循环内没有测试，每次迭代都运行并过滤掉不正确的页码。关注效率通常是件好事（即使在这里无关紧要，但在其他情况下可能很重要）：解决方案经常会*同时*简单、易读且非常有效（即，寻找效率）实际上可以使代码更清晰，因为它迫使人们隔离手头问题的本质）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:26:40.207

首先，一个非常简单的改进是不生成列表，而是使其成为生成器，这使得函数变得懒惰（并且更易于阅读）：

```
def get_hot_pages(self, radius=2):
    if self.page is None or self.max_pages is None: 
        return
    for page in xrange(self.page - radius, self.page + radius + 1):
        if 0 <= page < self.max_pages: 
            yield page 
```

我们还可以反转循环中的逻辑，删除`continue`，并使用 Python 更好的语法对单个值进行多次比较，以减少检查的大小。这一切都使它更具可读性和效率。

还要注意`x == None`to的变化`x is None`，这通常被认为更具可读性（这是因为所有实例`None`都是相同的，所以通过身份检查就可以了）。除了`or`，我们也可以这样做`None in {self.page, self.max_pages}`- 尽管只有两个项目，我会说`or`更清楚。

我还对空格进行了一些更改以符合[PEP-8](http://www.python.org/dev/peps/pep-0008/#pet-peeves)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T11:29:06.220

你可以这样转：

```
hot_pages = []
for page in xrange(self.page - radius, self.page + radius + 1):
    if page < 0 or page >= self.max_pages : continue
    hot_pages.append(page) 
```

对此：

```
hot_pages = filter( lambda k: k >= 0 and k < self.max_pages, xrange( self.page - radius, self.page + radius + 1 ) ) 
```

虽然没什么大不了的，而且阅读起来有点困难（至少在我看来）。

# powershell - 自动删除 Windows 机器中的临时文件内容

> ID：14213916
> 
> 赞同：-2
> 
> 时间：2013-01-08T11:23:50.603
> 
> 标签：powershell

我正在使用 Windows XP。现在我遇到了一些问题，导致我`PC`运行缓慢。所以我经常需要从目录中删除一些临时文件`C:\WINDOWS\Temp`。有什么办法可以用脚本自动完成吗？

**错误**

当我尝试从我的机​​器运行脚本时出现以下错误：

```
Microsoft Windows XP [Version 5.1.2600]
(C) Copyright 1985-2001 Microsoft Corp.

C:\Documents and Settings\rakshiar>D:\WIPData\cleanup.ps1

C:\Documents and Settings\rakshiar>powershell.exe D:\WIPData\cleanup.ps1
File D:\WIPData\cleanup.ps1 cannot be loaded because the execution of scripts i
s disabled on this system. Please see "get-help about_signing" for more details
.
At line:1 char:23
+ D:\WIPData\cleanup.ps1 <<<<
    + CategoryInfo          : NotSpecified: (:) [], PSSecurityException
    + FullyQualifiedErrorId : RuntimeException

C:\Documents and Settings\rakshiar> 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T12:23:11.240

您必须更改您的 executionPolicy （默认情况下 powershell 不允许运行脚本），因此以管理员身份启动 powershell 并运行： `Set-ExecutionPolicy remotesigned`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:30:59.620

我使用这个 powershell 脚本来清理我的 Windows 机器上的文件夹。它通过计划任务运行；使用类似这样的命令“powershell.exe &'c:\psbin\cleanup.ps1'”。

```
$dir = "C:\SomeDirectory"
$d = [System.DateTime]::Now.AddDays(-1)
gci -recurse $dir | ?{ !$_.psiscontainer -and $_.LastWriteTime -lt $d } | %{ remove-item -Force $_.FullName } 
```

这将删除超过 1 天的文件。更改 AddDays 以更改此设置。

# java - Java：在 if 语句中访问字符串

> ID：14213920
> 
> 赞同：-1
> 
> 时间：2013-01-08T11:24:03.997
> 
> 标签：java, string, if-statement

显示在 If 语句中声明的字符串时出现问题，代码如下：

```
import java.util.Scanner;

// This program reads a temp and prints its current state
public class P03_01_2 {

    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);

        // get temp
        System.out.print("Enter a temperature: ");
        if (in.hasNextDouble()) {
            double temp = in.nextDouble();

            // determine temp type and determine state

            System.out.print("Enter C for Celcius or F for Fahrenheit: ");
            String type = in.nextLine();
            if (type.equals("c") || type.equals("C")) {
                if (temp <= 0) {
                    String state = "frozen";
                } else if (temp >= 100) {
                    String state = "gaseous";
                } else {
                    String state = "water";
                }
            }
            if (type.equals("f") || type.equals("F")) {
                if (temp <= 32) {
                    String state = "frozen";
                } else if (temp >= 212) {
                    String state = "gaseous";
                } else {
                    String state = "water";
                }
            } else if ((!type.equals("c") || !type.equals("C") || !type.equals("f") || !type.equals("F"))) {
                System.out.print("Not valid input.");
                System.exit(0);

            } else {
                System.out.println("Not valid input.");
                System.exit(0);
            }

            System.out.println("The state of the water is " + state);

        }
    }
} 
```

我曾尝试将“String state = null before”放在第一个 if 语句中，但不断出现错误......谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T11:26:13.213

您在每个块中声明变量。即，每个声明都在其自己的块中，并分别限定范围。

```
String state = null;
if (...) {
   String state = "";
   // this is a different variable to 'state' outside the block!
} 
```

您需要在块之外*声明**变量*，然后在例如

```
String state = null;
if (...) {
   state = "";
}

// state is still visible here 
```

这是一个关于 Java 中作用域概念的[简单教程](http://www.java2s.com/Tutorial/Java/0020__Language/VariableScope.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:26:51.593

尝试：

```
public static void main(String[] args) {
    Scanner in = new Scanner(System.in);

    // get temp
    System.out.print("Enter a temperature: ");
    if (in.hasNextDouble()) {
        double temp = in.nextDouble();

        // determine temp type and determine state

        System.out.print("Enter C for Celcius or F for Fahrenheit: ");
        String type = in.nextLine();
        if (type.equals("c") || type.equals("C")) {
            if (temp <= 0) {
                String state = "frozen";
            } else if (temp >= 100) {
                String state = "gaseous";
            } else {
                String state = "water";
            }
        }
        String state = null;
        if (type.equals("f") || type.equals("F")) {
            if (temp <= 32) {
                state = "frozen";
            } else if (temp >= 212) {
                state = "gaseous";
            } else {
                state = "water";
            }
        } else if ((!type.equals("c") || !type.equals("C") || !type.equals("f") || !type.equals("F"))) {
            System.out.print("Not valid input.");
            System.exit(0);

        } else {
            System.out.println("Not valid input.");
            System.exit(0);
        }

        System.out.println("The state of the water is " + state);

    }
} 
```

`state`必须在范围内...请注意，它现在可能是`null`. 虽然这不会导致错误...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T11:30:06.797

如果您尝试输入“String state = null”，那么您应该只在类似 state='frozen' 而不是 String state = freeze 的情况下为“state”分配值。

# css - JavaFX 2.x：图表设置 X 和 Y 轴 css 字体颜色

> ID：14213928
> 
> 赞同：3
> 
> 时间：2013-01-08T11:24:44.667
> 
> 标签：css, fonts

如何设置 X 和 Y 轴的字体颜色？

在我只找到的字体的[css 参考中](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html#typefont)

```
font-size, font-style and font-weight 
```

但与字体颜色无关。我努力了

```
-fx-font-color 
```

但它不起作用。

谢谢你的帮助

**编辑：**

这是我的情况：

```
Set<Node> axisNode = lineChart.lookupAll(".axis");
        for(final Node axis : axisNode){

            axis.setStyle("-fx-minor-tick-visible:false;");
            axis.setStyle("-fx-font-size: 8;")
            axis.setStyle("-fx-font-color: red;");
        } 
```

我无法弄清楚如何使用

```
 color:#008800; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-06-28T09:26:36.463

我从您的问题中了解到的是您想要更改图表轴字体颜色，因为您必须在您的 css 文件中添加此代码：

```
.axis-label { -fx-text-fill: #008800; } 
```

# java - java.lang.RuntimeException：无法启动活动 ComponentInfo（启动时程序崩溃）

> ID：14213929
> 
> 赞同：1
> 
> 时间：2013-01-08T11:24:44.517
> 
> 标签：java, android

我知道这个问题已经被问了数百次了，感觉就像我已经通过它们都没有找到答案。

我一直在关注如何向 googlemaps 添加标记的答案。[如何在谷歌地图 API v2 中添加叠加层 | 安卓 |](https://stackoverflow.com/questions/14114131/how-to-add-overlay-in-google-maps-api-v2-android)

我没有收到任何错误，但是当我运行应用程序时，我得到“程序已停止”，并且我在 logcat 中收到这些错误：

```
01-08 13:22:20.658: W/dalvikvm(9338): threadid=1: thread exiting with uncaught exception (group=0x40c701f8)
01-08 13:22:20.663: E/AndroidRuntime(9338): FATAL EXCEPTION: main
01-08 13:22:20.663: E/AndroidRuntime(9338): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.googlemaps/com.googlemaps.MainActivity}: android.view.InflateException: Binary XML file line #9: Error inflating class fragment
01-08 13:22:20.663: E/AndroidRuntime(9338):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at android.os.Looper.loop(Looper.java:137)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at android.app.ActivityThread.main(ActivityThread.java:4511)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at java.lang.reflect.Method.invokeNative(Native Method)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at java.lang.reflect.Method.invoke(Method.java:511)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at dalvik.system.NativeStart.main(Native Method)
01-08 13:22:20.663: E/AndroidRuntime(9338): Caused by: android.view.InflateException: Binary XML file line #9: Error inflating class fragment
01-08 13:22:20.663: E/AndroidRuntime(9338):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:272)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at android.app.Activity.setContentView(Activity.java:1835)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at com.googlemaps.MainActivity.onCreate(MainActivity.java:19)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at android.app.Activity.performCreate(Activity.java:4470)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
01-08 13:22:20.663: E/AndroidRuntime(9338):     ... 11 more
01-08 13:22:20.663: E/AndroidRuntime(9338): Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.google.android.gms.maps.supportMapFragment: make sure class name exists, is public, and has an empty constructor that is public
01-08 13:22:20.663: E/AndroidRuntime(9338):     at android.support.v4.app.Fragment.instantiate(Fragment.java:401)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at android.support.v4.app.Fragment.instantiate(Fragment.java:369)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
01-08 13:22:20.663: E/AndroidRuntime(9338):     ... 21 more
01-08 13:22:20.663: E/AndroidRuntime(9338): Caused by: java.lang.ClassNotFoundException: com.google.android.gms.maps.supportMapFragment
01-08 13:22:20.663: E/AndroidRuntime(9338):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
01-08 13:22:20.663: E/AndroidRuntime(9338):     at android.support.v4.app.Fragment.instantiate(Fragment.java:391)
01-08 13:22:20.663: E/AndroidRuntime(9338):     ... 24 more 
```

这是我的主要java：

```
package com.googlemaps;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.MarkerOptions;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;

public class MapActivity extends FragmentActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main); 
    LatLng sala = new LatLng(59.918434,16.618195);

    GoogleMap mMap;
    mMap = ((SupportMapFragment)(getSupportFragmentManager().findFragmentById(android.R.id.content))).getMap();
    mMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
    mMap.addMarker(new MarkerOptions()
            .position(sala)
            .title("Här ligger sala")
            .snippet("Detta är sala")
            .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_AZURE)));
    mMap.getUiSettings().setCompassEnabled(true);
    mMap.getUiSettings().setZoomControlsEnabled(true);
    mMap.animateCamera(CameraUpdateFactory.newLatLngZoom(sala,10));

} 
```

这是我的xml：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

<fragment 
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.supportMapFragment"

    />
</RelativeLayout> 
```

还有我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.googlemaps"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="17" />
    <permission
        android:name="com.googlemaps.permission.MAPS_RECEIVE"
        android:protectionLevel="signature"/>

    <uses-permission android:name="com.googlemaps.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission     
    android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <uses-library android:required="true"
            android:name="com.google.android.maps" />
        <activity
            android:name="com.go8oglemaps.MapActivity"
            android:label="@string/app_name" 
            android:screenOrientation="portrait">

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <!-- adds google API key to manifest -->
        <meta-data 
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzaSyDSVPzsvOratkVZoMEKa0sF_GLOtcFI7yg"
            />
    </application>

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:37:14.320

在您的清单上更改您的 MapActivty 的名称。有拼写错误。

```
android:name="com.go8oglemaps.MapActivity" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:02:00.277

```
setContentView(R.layout.your_xml_file); 
```

在 super.onCreate(savedInstanceState); 之后添加上述行 在您的 onCreate() 中并更新结果。

# php - 将 UTF8 字符串分解为大写或数字字符

> ID：14213932
> 
> 赞同：5
> 
> 时间：2013-01-08T11:25:17.067
> 
> 标签：php, regex, string, utf-8, preg-replace

作为[这个问题](https://stackoverflow.com/questions/8577300/explode-a-string-on-upper-case-characters/14212615)，我可以拆分包含大写的字符串，如下所示：

```
function splitAtUpperCase($string){
    return preg_replace('/([a-z0-9])?([A-Z])/','$1 $2',$string);
}

$string = 'setIfUnmodifiedSince';
echo splitAtUpperCase($string); 
```

输出为“如果未修改则设置”

但我需要一些修改：

*   当这些字符存在于 string: 中时，该代码片段不处理这些情况`ÇÖĞŞÜİ`。我不想音译字符。然后我失去了词的意义。我需要使用一些 UTF 字符。该代码使“HereÇonThen”变为“HereÇon Then”
*   我也不想拆分大写缩写。如果单词是“IKnowYouWillComeASAPHere”，我需要将其转换为“I Know You Will Come ASAP Here”
*   如果所有字母都是大写，则不要爆炸。就像“不要来这里”
*   也分解数值。“2013 年结束前”到“2013 年结束前”
*   如果第一个字符是哈希键 (#)，则展开。

案例和预期结果

1.  "comeHEREtomorrow" => "明天来这里"
2.  "KissYouTODAY" => "今天吻你"
3.  "comeÜndeHere" => "来ÜndeHere"
4.  “从不说” => “从不说”
5.  "2013willCome" => "2013 即将到来"
6.  "2013 年结束前" => "2013 年结束前"
7.  “我知道” => “我知道”
8.  "#whatiknow" => "#whatiknow"

对于这些情况，我使用后续`str_replace`操作。我寻找一个简短的解决方案，它不会使循环检查单词过多。如果可能的话，最好将它作为`preg_replace`或等等。

编辑：任何人都可以通过更改`convert`这个 PHP 小提琴中的函数来尝试他的解决方案：http: [//ideone.com/9gajZ8](http://ideone.com/9gajZ8)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:31:35.220

`/([[:lower:][:digit:]])?([[:upper:]]+)/u`应该这样做。

这里`/u` 用于 Unicode 字符。并且`([[:upper:]]+)`用于大写字母的序列。

笔记。字母的大小写取决于您使用的字符集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T17:59:55.093

一些注意事项：

*   使用[Unicode 属性](http://www.php.net/manual/en/regexp.reference.unicode.php)搜索大写和小写字母（甚至是标题大小写字母 f.ex. `ǅ ǈ ǋ ǲ`）
*   `comeHEREtomorrow`&`IKnowThat`不能使用一种方法，除非您使用一些字典来查找确切的单词。

    因为如果你想翻译`comeHEREtomorrow`成`come HERE tomorrow`, `IKnowThat`will be `IK now That`( 甚至`IK now T hat`);

    如果你想翻译`IKnowThat`为`I Know That`,`comeHEREtomorrow`将是`come H E R E tomorrow`

我的解决方案：http: [//ideone.com/oALyTo](http://ideone.com/oALyTo)（不包括非字母和非数字字符）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T23:13:11.823

好吧，[我匹配了你所有的测试用例](http://ideone.com/K1MOal)，但我仍然认为这不是一个好的解决方案。（测试驱动设计中为数不多的缺陷之一）。

我采取了稍微不同的方法。我没有尝试为单词之间的位置编写一个正则表达式，而是编写了一个正则表达式，它查找显然是一个单词的所有内容，然后内爆。

```
function convert($keyword) {
   $wResult = preg_match_all('/(^I|[[:upper:]]{2,}|[[:upper:]][[:lower:]]*|[[:lower:]]+|\d+|#)/u', $keyword, $matches);
   return implode(' ',$matches[0]);
} 
```

正如你所看到的，这就是我决定作为一个词的资格：

```
^I                 A capital I at the beginning of the string.  Break point: Icons.
[[:upper:]]{2,}    Consecutive capitals.  Break Point:  WellIKnowThat
[[:upper:]][[:lower:]]*    A single Capital followed by some lower case letters
[[:lower:]]+       A string of lower case letters
\d+                A string of digits
#                  A literal # 
```

它并不完美 - 仍然有很多断点。你可以继续完善这些词定义，但坦率地说，总会有你无法捕捉到的边缘情况。然后你慢慢地扩展这个正则表达式，直到它完全无法管理。您可以尝试使用字典，但最终也会失败。你怎么处理“旋风”？还是“伊坦”？是“IT an”还是“I Tan”？举个例子？ [这](http://ideone.com/76PAyR)是在我试图捕捉我的一些错误之后。它变得如此庞大，想出它断裂的字符串仍然是微不足道的。这个函数是关于度数的——花多少时间教你的算法所有世界语言的所有有趣点是值得的？

编辑：经过一些工作，并决定当且仅当紧随其后的是一个大写字母和一个小写字母时，我可以将我作为自己的单词分开，[我已经更新了我对答案的尝试。](http://ideone.com/Ewdm8L)

```
function convert($keyword, $debug = false) {
   $wResult = preg_match_all('/I(?=[[:upper:]][[:lower:]])|[[:upper:]]{2,}|[[:upper:]][[:lower:]]*|[[:lower:]]+|\d+|#/u', $keyword, $matches);
   if($debug){
       var_dump($matches);
       var_dump($matches[0]);
       var_dump(implode(' ',$matches[0]));
   }
   return implode(' ',$matches[0]);
} 
```

我还添加了一些新的测试用例：

```
 convert("Icons") = "Icons"
 convert("WellIKnowThat") == "Well I Know That"
 convert("ITan") == "I Tan"
 convert("whirlwind") == "whirlwind" 
```

我认为这和今天的表现差不多。最后一组按优先顺序排列的“词定义”是：

1.  大写 I，前提是后跟一个大写字母和一个小写字母：`I(?=[[:upper:]][[:lower:]])`
2.  两个或多个连续的大写字母：`[[:upper:]]{2,}`
3.  一个大写字母，后跟尽可能多的小写字母：`[[:upper:]][[:lower:]]*`
4.  一个或多个连续的小写字母：`[[:lower:]]+`
5.  一个或多个连续数字：`\d+`
6.  文字磅符号：`#`

我添加了另一个词定义，一个测试用例，[并改进了测试小提琴](http://ideone.com/sd92SE)。新词定义与 的规则相匹配`I`，但带有`A`- 英语中唯一的另一个单字母词。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T10:45:42.507

你需要 Unicode 正则表达式： `\p{Lu} for upercase`和`\p{Li} for lowercase`

因此，您的用法将如下所示： `/([\p{Ll}0-9])?([\p{Lu}])/`

# c++ - 创建模板化抽象类的实例

> ID：14213941
> 
> 赞同：1
> 
> 时间：2013-01-08T11:26:02.137
> 
> 标签：c++

我想实例化一个模板化的抽象类，如下所示：

```
template <class T>
class non_sense {
public:
    void virtual nonsesnse_func() = 0;
}; 
```

为了制作这个类的整数实例，我尝试了以下方法：

```
void non_sense<int>::nonsesnse_func(){
} 
```

然后我在 main 中创建我的实例：

```
non_sense<int> xx; 
```

所以整个程序如下：

```
template <class T>
class non_sense {
public:
    void virtual nonsesnse_func() = 0;
};

void non_sense<int>::nonsesnse_func(){
}

void main(){
    non_sense<int> xx;
} 
```

这对我来说完全有意义，但编译器不接受它，说这个类是抽象的。我不想采取使用特定模板创建从此类继承的新类的路线，因为我试图制作的大型应用程序将是大量写作。有人可以向我解释为什么编译器会拒绝这个，除了为我想要的特定实例创建一个新类之外，还有什么方法可以解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T11:27:44.477

non_sense 是一个抽象类，所以它永远不能被实例化为一个对象。

但是，这会编译并运行：

```
#include <iostream>

template <class T>
class non_sense {
public:
    virtual void nonsesnse_func();
};

// Specialize the method
template<>
void non_sense<int>::nonsesnse_func(){
    std::cout << "no_sense<int>::nonsense_func" << std::endl;
}

int main(){
    non_sense<int> xx;

    xx.nonsesnse_func();

    return 0;
} 
```

这里的代码显示了如何使用纯抽象类运行它（我已将 nosnsnsense 重命名为废话，输入起来更容易；）：

```
#include <iostream>

template <class T>
class non_sense {
public:
    virtual void nonsense_func() = 0;
};

template<class T> 
class non_sense_concrete : public non_sense<T> {

    public: 
        void nonsense_func() {
            std::cout << "non_sense_concrete<T> generic code" << std::endl;
        }

};

// Specialize the concrete class
template<>
void non_sense_concrete<int>::nonsense_func(){
    std::cout << "no_sense<int>::nonsense_func" << std::endl;
}

int main(){

    non_sense_concrete<double> objectGeneric;
    objectGeneric.nonsense_func(); 

    non_sense_concrete<int> objectInt;
    objectInt.nonsense_func();

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:45:45.510

看起来很奇怪，纯虚方法*可以*在 C++ 中实现。这并没有改变方法是纯虚拟的并且包含它的类是抽象的事实。

如果您希望该类`non_sense`对除 之外的所有类型都是抽象的`int`，则必须为整个类提供专门化，而不仅仅是为纯虚拟成员：

```
template <class T>
class non_sense {
public:
    virtual void nonsense_func() = 0;
};

template <>
class non_sense<int> {
public:
    virtual void nonsense_func()
    {
        std::cout << "no_sense<int>::nonsense_func" << std::endl;
    }
}; 
```

对于较大的类，继承可能会更容易，因为派生类可以从 继承其他成员`non_sense`，而不必复制整个类（正如您在创建专业化时需要做的那样）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T11:42:11.210

如果您有一个具有纯虚函数（即抽象）的类，您必须创建第二个实现该虚函数的类。否则，您将永远无法使用该类。

在您的代码中，您实现了一个函数，但它不是虚拟的，因为它不在类内部。它需要被声明和定义为 non_sense 的子类的一部分才能工作。请记住，只有类才能具有虚函数。

# python - Python中嵌套for循环中的语法错误

> ID：14213942
> 
> 赞同：-10
> 
> 时间：2013-01-08T11:26:09.750
> 
> 标签：python, python-3.x, python-2.7

下面是一个用 Python2.7 编写的 for 循环，它在 Python3.3 中执行时会引发语法错误。我是这门语言的新手，想了解一下这是什么样的外观？谢谢。:)

```
for link in (links.pop(0) for _ in xrange(len(links))): 
```

我在执行时将 xrange() 更改为 range()。'links' 是一个 url 列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T11:28:51.607

在 Python 3.3 中，不支持[xrange 。](http://docs.python.org/2/library/functions.html#xrange)您需要更改语句以使用范围。

[xrange](http://docs.python.org/2/library/functions.html#xrange)与 Python 2.X 中的 range 不同，它返回一个迭代器，而[range](http://docs.python.org/3.1/library/functions.html#range)返回一个列表。在 Python 3.X 中，xrange 已被删除，取而代之的是 range 现在返回一个迭代器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T11:29:52.710

这与 非常相似`for link in links:`，那么您为什么要这样做？除此之外，它在 python3 中的语法是正确的，如果你说你替换了`xrange`.

如果您想消费`links`，您可以执行以下操作：

```
links=[1,2,3,4,5]
links.reverse() #If the order matters
while links:
    print(links.pop())
    print(links) 
```

出去：

```
1
[5, 4, 3, 2]
2
[5, 4, 3]
3
[5, 4]
4
[5]
5
[] 
```

# c# - .NET 4：如何在 Web.Config 的其他程序集中配置 EDMX 文件

> ID：14213943
> 
> 赞同：8
> 
> 时间：2013-01-08T11:26:09.933
> 
> 标签：c#, asp.net, sql-server, web-config, connection-string

我在配置 EDMX 文件时遇到问题，该文件位于其他程序集中，而不是 Web 项目。我的项目看起来有点像这样：

```
Project 1
--> Database.edmx
--> App.Config

Project 2
--> Ton's of .cs and .aspx files.
--> Web.Config with the proper connection string. 
```

在 Visual Studio 中，项目 1 中 .EDMX 文件的更新进展顺利，当我在项目 2 中拥有 .EDMX 文件时，应用程序按预期运行。

任何人都知道如何在项目 1 中配置 .EDMX 文件以指向 Web.Config 的连接字符串？（或者我应该使用 Project1.dll.config 来配置项目 1？）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-08T11:48:35.667

您必须更改`*`.edmx 文件所在的程序集名称的连接字符串：

```
<add name="Entities" connectionString="metadata=res://*/Models.EF.Model.csdl|res://*/Models.EF.Model.ssdl|res://*/Models.EF.Model.msl;provider=System.Data.SqlClient;provider connection ... ;" providerName="System.Data.EntityClient" /> 
```

为了

```
<add name="Entities" connectionString="metadata=res://Project2/Models.EF.Model.csdl|res://Project2/Models.EF.Model.ssdl|res://Project2/Models.EF.Model.msl;provider=System.Data.SqlClient;provider connection ... ;" providerName="System.Data.EntityClient" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T14:18:57.343

事实证明，有两个问题。一个是解决替换连接字符串中的 * 的问题。

第二个问题是这里描述的问题：http: [//blogs.teamb.com/craigstuntz/2010/08/13/38628/](http://blogs.teamb.com/craigstuntz/2010/08/13/38628/)

它与路径 .csdl、.ssdl 和 .msl 文件作为 Project1 程序集中的资源有关

无论如何，现在一切正常

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T11:44:57.800

更简单的方法是从 Web.Config 获取连接字符串并将它们复制到 App.Config 并将 EDMX 的连接字符串指向相同的数据库信息。例如

```
 <connectionStrings>
    <add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" />
    <add name="aspnetdbEntities" connectionString="metadata=res://*/Data.PSBData.csdl|res://*/Data.PSBData.ssdl|res://*/Data.PSBData.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.\SQLEXPRESS;attachdbfilename=|DataDirectory|\aspnetdb.mdf;integrated security=True;user instance=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings> 
```

如果您已将 Database.edmx 从项目 2 移动到项目 1，您还需要检查命名空间是否正确，您可以通过打开 Database.edmx 并转到后面的代码来检查。

# c# - 在 Visual Studio 2012 Professional 中从 UML 类图生成 C# 源代码

> ID：14213945
> 
> 赞同：-1
> 
> 时间：2013-01-08T11:26:12.947
> 
> 标签：c#, visual-studio

我们可以在 Visual Studio 2012 中使用 UML 建模器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:34:03.623

是的，只需按照以下说明将其添加到您的项目中：http: [//msdn.microsoft.com/en-us/library/hyxd8c85.aspx](http://msdn.microsoft.com/en-us/library/hyxd8c85.aspx)

完成后，只需将其打开并开始添加内容即可。它将自动添加文件和您的骨架代码。

# android - 在 Android 中，如果短信是由类 SmsManager 发送的，而不是应用程序消息器默认值，那么短信传出保存在哪里

> ID：14213946
> 
> 赞同：0
> 
> 时间：2013-01-08T11:26:15.393
> 
> 标签：android

我想读取由 Android 中的 SmsManager 类发送的短信传出信息，而不是设备中默认的应用程序信使。有什么想法可以帮助我吗？非常感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:39:33.827

没有任何东西被保存`SmsManager`。消息通过移动网络发送给他们的收件人，就是这样。

个别*应用程序*可能会保存他们*也*通过 发送的消息`SmsManager`。哪些应用程序保存的详细信息取决于应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:14:36.137

请按照以下两个步骤操作：
1\. 发送您的消息
2.将消息**插入**“已发送”消息框

```
SmsManager smsManager = SmsManager.getDefault();

String address = "address here";
String text = "text message here";

// Send you message
smsManager.sendTextMessage(address, null, text, null, null);

Uri uri = Uri.parse("content://sms/sent/");

ContentValues values = new ContentValues();
values.put("address", address);
values.put("body", text);

// Insert the message to "sent" messages box
getContentResolver().insert(uri, values); 
```

PS：你可以在[**这里查看完整的代码**](https://github.com/DailyEfforts/android_basics/blob/master/app/src/com/gmail/dailyefforts/android/basic/message/MessageActivity.java)

# android - 从片段到活动的 onAttach 回调

> ID：14213947
> 
> 赞同：15
> 
> 时间：2013-01-08T11:26:16.847
> 
> 标签：android

我想将`String`数据从发送`fragment`到`activity`。

`onAttach`我已阅读有关使用回调在 android 开发人员中的片段和活动之间进行通信的文章。

谁能清楚地解释如何将数据从片段发送到活动？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-08T11:35:14.353

你应该做这样的事情。首先创建一个用于与您的活动通信的接口，例如：

```
public interface OnViewSelected {
public void onViewSelected(int viewId);
} 
```

在你`onAttach`这样做：

```
OnViewSelected _mClickListener;
@Override
public void onAttach(Context context) {
    super.onAttach(context);
    try {
        _mClickListener = (OnViewSelected) context;
    } catch (ClassCastException e) {
        throw new ClassCastException(context.toString() + " must implement onViewSelected");
    }
} 
```

在您的 Fragment 实现`OnClickListener`和您的`onClick()`方法中执行以下操作：

```
@Override
public void onClick(View v) {
    _mClickListener.onViewSelected(456);
} 
```

之后，在您的 Activity 中，您必须实现您在 Fragment 中创建的接口，它会要求您添加未实现的方法，并且在您的 Activity 中，您将具有如下功能：

```
@Override
public void onViewSelected(int data) {
    Log.d("","data : "+data); // this value will be 456.
} 
```

就这样。:)

# c# - 订阅长寿命对象事件时，我附加的 DependencyProperty 是否泄漏？

> ID：14213948
> 
> 赞同：3
> 
> 时间：2013-01-08T11:26:23.207
> 
> 标签：c#, silverlight, xaml, dependency-properties, windows-phone

我一直在编写一个小的 Silverlight 帮助器类来实现一个附加属性，该属性可以绑定到`ICollection`/`INotifyCollectionChanged`并在绑定集合为空时切换目标对象的可见性。

我没有完全掌握`DependencyProperty`有关内存管理和对象生命周期的行为。

这是来源：

```
public class DisplayOnCollectionEmpty : DependencyObject
{
    #region Constructor and Static Constructor

    /// <summary>
    /// This is not a constructable class, but it cannot be static because 
    /// it derives from DependencyObject.
    /// </summary>
    private DisplayOnCollectionEmpty()
    {
    }

    #endregion

    public static object GetCollection(DependencyObject obj)
    {
        return (object)obj.GetValue(CollectionProperty);
    }

    public static void SetCollection(DependencyObject obj, object value)
    {
        obj.SetValue(CollectionProperty, value);
    }

    // Using a DependencyProperty as the backing store for Collection.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty CollectionProperty =
    DependencyProperty.RegisterAttached("Collection", typeof(object), typeof(FrameworkElement), new PropertyMetadata(OnCollectionPropertyChanged));

    private static void OnCollectionPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        FrameworkElement fe = d as FrameworkElement;

        NotifyCollectionChangedEventHandler onCollectionChanged = (sender, collectionChangedEventArgs) =>
        {
            fe.Visibility = GetVisibility(e.NewValue as ICollection);
        };

        if (e.OldValue is INotifyCollectionChanged)
        {
            ((INotifyCollectionChanged)e.OldValue).CollectionChanged -= onCollectionChanged;
        }
        if (e.NewValue is INotifyCollectionChanged)
        {
            ((INotifyCollectionChanged)e.NewValue).CollectionChanged += onCollectionChanged;
        }

        fe.Visibility = GetVisibility(e.NewValue as ICollection);
    }

    private static Visibility GetVisibility(ICollection collection)
    {
        if (collection == null) return Visibility.Visible;
        return collection.Count < 1 ? Visibility.Visible : Visibility.Collapsed;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:59:19.520

看起来您在设置集合时订阅了 INotifyCollectionChanged 的​​ CollectionChanged，并且只有在更改集合时才取消订阅。

我还将通过从 CollectionChanged 事件中注销来处理 FrameworkElement 的 Unloaded 事件。

我看到您没有检查 e.OldValue 或 e.NewValue 是否为空。

出于同样的目的，您可以使用行为来代替依赖属性。我的想法主要是一样的。我还没有考虑过利弊。以下是一些关于行为与依赖属性的有趣链接： [Interactivity.Behavior<T> 与附加属性](https://stackoverflow.com/questions/2327554/wpf-interactivity-behaviort-vs-attached-properties)

[https://web.archive.org/web/20130622113553/http://briannoyes.net/2012/12/20/AttachedBehaviorsVsAttachedPropertiesVsBlendBehaviors.aspx](https://web.archive.org/web/20130622113553/http://briannoyes.net/2012/12/20/AttachedBehaviorsVsAttachedPropertiesVsBlendBehaviors.aspx)

# perl - 使用 Perl 的 3D 立方体中的点或球体

> ID：14213949
> 
> 赞同：4
> 
> 时间：2013-01-08T11:26:25.573
> 
> 标签：perl, 3d

假设我有`@points[$number][$x][$y][$z][$color]`并且我只是出于调试目的希望它们在 3D 立方体中可视化以更好地观察我所拥有的。通常我将它们导出到`*.txt`并使用 R 3D 绘图，但也许在 Perl 中有简单的方法可以做到这一点？有半径的球体会更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:19:28.973

我的答案：使用 OpenGL perl 绑定

我还没有完全回答你的问题，但我相信你可以采用这个代码

我以前没有做过 OpenGL，但这是一个有趣的小晚会项目

```
use OpenGL qw/ :all /;
use constant ESCAPE => 27;
# Global variable for our window
my $window;
my $CubeRot = 0;
my $xCord = 1;
my $yCord = 1;
my $zCord = 0;
my $rotSpeed = 0.02 ;
($width, $height) = (1366,768);
@points = ( [ 30,40,40,[100,0,0]], #red
            [ 100,100,40,[0,100,0]], #green
            [ 100,10,60,[0,100,100]], #turquoise
            [ 200,200,100,[0,0,100]] #blue
            );
sub reshape  {  

glViewport(0, 0, $width, $height); # Set our viewport to the size of our window  
glMatrixMode(GL_PROJECTION); # Switch to the projection matrix so that we can manipulate how our scene is viewed  
glLoadIdentity(); # Reset the projection matrix to the identity matrix so that we don't get any artifacts (cleaning up)  
gluPerspective(60, $width / $height, 1.0, 100.0); # Set the Field of view angle (in degrees), the aspect ratio of our window, and the new and far planes  
glMatrixMode(GL_MODELVIEW); # Switch back to the model view matrix, so that we can start drawing shapes correctly  
glOrtho(0, $width, 0, $height, -1, 1);   # Map abstract coords directly to window coords. 
  glScalef(1, -1, 1);           # Invert Y axis so increasing Y goes down. 
  glTranslatef(0, -h, 0);       # Shift origin up to upper-left corner. 

}  
sub keyPressed {

    # Shift the unsigned char key, and the x,y placement off @_, in
    # that order.
    my ($key, $x, $y) = @_;
    # If escape is pressed, kill everything.
    if ($key == ESCAPE) 
    { 
        # Shut down our window 
        glutDestroyWindow($window); 

        # Exit the program...normal termination.
        exit(0);                   
    }
}

sub InitGL {              

    # Shift the width and height off of @_, in that order
    my ($width, $height) = @_;

    # Set the background "clearing color" to black
    glClearColor(0.0, 0.0, 0.0, 0.0);

    # Enables clearing of the Depth buffer 
    glClearDepth(1.0);                    

    glDepthFunc(GL_LESS);         
    # Enables depth testing with that type
    glEnable(GL_DEPTH_TEST);              

    # Enables smooth color shading
    glShadeModel(GL_SMOOTH);      

    # Reset the projection matrix
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity;
    # Reset the modelview matrix
    glMatrixMode(GL_MODELVIEW);
}
    sub display {  
    glClearColor(1.0,0.0,0.0,1.0); 
    glClear(GL_COLOR_BUFFER_BIT);
    glLoadIdentity;

    glTranslatef(0.0, 0.0, -5.0); # Push eveything 5 units back into the scene, otherwise we won't see the primitive  
    #glPushMatrix();
    #glRotatef($CubeRot, $xCord, $yCord, $zCord);

   # this is where the drawing happens, adjust glTranslate to match your coordinates
   # the centre is is 0,0,0
    for my $sphere ( @points ) {
        glPushMatrix();
        glColor3b( @{$sphere->[3]}) ;
        glRotatef($CubeRot, $xCord, $yCord, $zCord);
        glTranslatef($sphere->[0]/50 -2 ,$sphere->[1]/50 -2 ,$sphere->[2]/50 -2);
        glutWireSphere(1.0,24,24); # Render the primitive  
        glPopMatrix();
        }
    $CubeRot += $rotSpeed;
    glFlush; # Flush the OpenGL buffers to the window  
    }  

# Initialize GLUT state
glutInit;  

# Depth buffer */  
glutInitDisplayMode(GLUT_SINGLE);

# The window starts at the upper left corner of the screen
glutInitWindowPosition(0, 0);  

# Open the window  
$window = glutCreateWindow("Press escape to quit");

# Register the function to do all our OpenGL drawing.
glutDisplayFunc(\&display);  

# Go fullscreen.  This is as soon as possible. 
glutFullScreen;
glutReshapeFunc(\&reshape);
# Even if there are no events, redraw our gl scene.
glutIdleFunc(\&display);

# Register the function called when the keyboard is pressed.
glutKeyboardFunc(\&keyPressed);

# Initialize our window.
InitGL($width, $height);

# Start Event Processing Engine
glutMainLoop;  

return 1; 
```

# excel - EPPlus 如何检查循环引用？

> ID：14213950
> 
> 赞同：2
> 
> 时间：2013-01-08T11:26:26.707
> 
> 标签：excel, c#-4.0, epplus

我正在使用 EPPlus 库来构建一个 excel 文件，并且想知道是否有办法使用这个库来检查公式中的循环引用？

我知道[Microsoft Interop](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.worksheet.circularreference.aspx)具有*Range CircularReference { get; }*，但我试图避免使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-05T22:13:53.467

如果存在循环引用并且您不允许在计算选项中使用它，则在尝试计算时将引发异常。

顺便说一句，默认情况下循环引用会引发异常。允许他们将属性更改为 true。

您还可以计算整个工作表/工作簿。

检查单元格是否包含循环引用的示例代码：

```
//Assign Formula
var cell = worksheet.Cells["A2"]; //Example Cell
cell.Formula = "YourFormula";

//Initiate calculation option
var calculateOptions = new ExcelCalculationOption();
calculateOptions.AllowCirculareReferences = false;

bool isFormulaCircularReference = false;
try
{
    cell.Calculate(calculateOptions);
}
catch (CircularReferenceException ex)
{
    //If there is a circular reference this exception will be thrown
    isFormulaCircularReference = true;
} 
```

# jquery - 在 Jquery Mobile 中拉伸水平单选按钮

> ID：14213951
> 
> 赞同：2
> 
> 时间：2013-01-08T11:26:28.533
> 
> 标签：jquery, html, jquery-ui, jquery-mobile

如何将水平单选按钮拉伸到全宽。

```
<fieldset data-role="controlgroup" data-type="horizontal"  class="row_b"> 

 <input type="radio" name="q2" id="q2_0" value="0" checked="checked" />
            <label for="q2_0">C</label>
            <input type="radio" name="q2" id="q2_1" value="1" />
            <label for="q2_1">s</label>
            <input type="radio" name="q2" id="q2_2" value="2" />
            <label for="q2_2">P</label>

    </fieldset> 
```

CSS

```
.row_b .ui-btn {
    text-align: center;
    width: 33.3%;
} 
```

检查此链接后尝试为 3 个单选按钮设置上述方法.. [http://jsfiddle.net/6rCmY/1/](http://jsfiddle.net/6rCmY/1/)但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:40:01.707

尝试这个：

```
.row_b .ui-btn {
    text-align: center;
    width: 33%;
} 
```

我将宽度参数更改为 33%，经过测试，它们显示正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:20:27.497

您必须使 .row_b 的内部容器（**.ui-** controlgroup-controls ）（特别是当您应用 jqm 的 data-role="controlgroup" 时）填充整个屏幕宽度。

因此，尝试：

```
.row_b .ui-controlgroup-controls { 
    width: 100%; 
}
.row_b .ui-btn { 
    text-align: center;
    width: 33.3333%;
} 
```

CSS3 替代方案：

```
.row_b .ui-controlgroup-controls {
    display:-moz-box;
    display:-webkit-box;
    display:box;
    -moz-box-orient:horizontal;
    -webkit-box-orient:horizontal;
    box-orient:horizontal;
    width: 100%;
}
.row_b .ui-radio {
    text-align: center;
    -moz-box-flex:1;
    -webkit-box-flex:1;
    box-flex:1;
} 
```

# drupal - 注册加入/放弃og组

> ID：14213953
> 
> 赞同：0
> 
> 时间：2013-01-08T11:26:38.613
> 
> 标签：drupal, drupal-7, drupal-modules, organic-groups

当用户请求加入群组时，我需要在自定义日志中注册。然后我需要注册用户已加入群组或已放弃此群组。

如果不更改原始模块，我不知道该怎么做。我不知道如何正确扩展贡献模块的功能。

感谢任何调查指导。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T13:12:45.803

使用模块[规则](https://drupal.org/project/rules) 事件触发规则：

```
OG member subscribe (Active): rules_og_member_active
OG member subscribe (Pending): rules_og_member_pending
OG member subscribe (Blocked): rules_og_member_blocked
OG member denied (Deny) :rules_og_member_denied_deny_ 
```

# android - 如何在 2.3 中设置 EditText 光标样式

> ID：14213957
> 
> 赞同：0
> 
> 时间：2013-01-08T11:26:51.337
> 
> 标签：android

我正在尝试设置edittext cursor ion 2.3 的样式。我正在尝试使用属性 android:textCursorDrawable 但这适用于 3.0 及更高版本。我还尝试制作文件夹 layout-v12，然后使用此属性但仍然出现错误。请提出任何解决方案。提前致谢

# javascript - Greasemonkey 脚本和内联脚本？

> ID：14213959
> 
> 赞同：0
> 
> 时间：2013-01-08T11:26:55.600
> 
> 标签：javascript, greasemonkey

我需要一个 Greasemonkey 脚本来自定义我经常访问的站点之一。如何确保我的脚本首先执行，修改 html，成功结束，然后才允许任何内联脚本运行？

编辑：我已经把我原来的问题分成了2个。这里有一个：[查找所有元素具有除某些指定属性之外的任何属性](https://stackoverflow.com/questions/14225887/find-all-elements-have-any-attribute-other-than-some-specified-attributes)（已解决）

我对页面的真正目标是针对一些特殊元素（我从另一个问题中得到），但是内联脚本会改变一些元素的属性，甚至删除这些元素。如果无法阻止该脚本，我该怎么办？

# javascript - 如何根据列的宽度换行

> ID：14213964
> 
> 赞同：1
> 
> 时间：2013-01-08T11:27:17.720
> 
> 标签：javascript, jquery, css

嗨，我有一张不同列宽的表格，如下所示

```
${"#goldBarList"} table tr td:first-child{width:5%;}
${"#goldBarList"} table tr td:first-child+td{width:5%;}
${"#goldBarList"} table tr td:first-child+td+td{width:6%;}
${"#goldBarList"} table tr td:first-child+td+td+td{width:7%;}
${"#goldBarList"} table tr td:first-child+td+td+td+td{width:7%;}
${"#goldBarList"} table tr td:first-child+td+td+td+td+td+td+td{width:11%;}
${"#goldBarList"} table tr td:first-child+td+td+td+td+td+td+td+td{width:11%;}
${"#goldBarList"} table tr td:first-child+td+td+td+td+td+td+td+td+td{width:11%;}
${"#goldBarList"} table tr td:first-child+td+td+td+td+td+td+td+td+td+td{width:11%;}
${"#goldBarList"} table tr:first-child{read-only:true; font-size:90%; font-weight:bold;

} 
```

我用了

```
${"#goldBarList"} table{
table-layout:fixed;
word-wrap:break-word;
} 
```

使表格固定并将文本包装在单元格中。但问题是它没有根据列的宽度包装文本。表示宽度为 5%，宽度为 11% 时，它会环绕超过 8 个字符的文本。但我想根据列宽包装文本。这个怎么做..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:35:48.953

如果你想用 javascript 包装文本，

```
var getFormattedString  = function (str, length){
    if(str == null || str == '') return '';
    return (str.length>length)?(str.substr(0,length) + "...") : str;
} 
```

像下面这样调用上面的函数。

```
var name = "This is the long long long text";
$(selector).attr('title', name).html(getFormattedString (name, 10)); 
```

其中元素的标题属性将显示默认工具提示。

# java - 使用 struts2 重定向动态参数不起作用

> ID：14213967
> 
> 赞同：3
> 
> 时间：2013-01-08T11:27:25.767
> 
> 标签：java, jakarta-ee, parameters, struts2, action

我在尝试使用动态参数重定向映射时遇到问题。

**我在 Struts2 中映射的方式：**

```
<action name="Delete" class="templateLalaAction" method="remove">
    <result name="success" type="redirect-action">
        <param name="actionName">LalaTemplatesDisplay</param>
        <param name="buId">${buId}</param>
    </result>
    <result name="failure" type="redirect-action">
        LalaTemplatesDisplay
    </result>
</action> 
```

**动作中的“删除”方法：**

```
remove() {

    putRequestAttribute("buId",Long.valueOf("1111"));
    return SUCCESS;
} 
```

如果我这样做，我正在设置`buId=1111`，但是当我运行应用程序时，以`url`结尾`buId= (it's empty)`，即没有传递任何参数。如果我评论该`putRequestAttribute`方法，并将 struts 传递`buId`参数设置为`static`值：

```
<action name="Delete" class="templateLalaAction" method="remove">
    <result name="success" type="redirect-action">
        <param name="actionName">LalaTemplatesDisplay</param>
        <param name="buId">1111</param>
    </result>
    <result name="failure" type="redirect-action">
        LalaTemplatesDisplay
    </result>
</action> 
```

它有效，并以 .`url`结尾`buId=1111`。

我还阅读了这个[问题](https://stackoverflow.com/questions/784527/struts-2-parameters-between-actions)，其中接受的答案教我们做同样的事情，但如果我们阅读用户所做的评论，我们会看到他有同样的问题。我可能做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:34:02.610

在您的方法中只需分配`buId`变量，您需要在您的操作类中为它设置 getter/setter。

```
public String remove() {
  buId = 1111l;
  return SUCCESS;
} 
```

此外，您使用的是旧语法`redirect-action`，使用驼峰式大小写`redirectAction`。

# c# - 对使用 OrderBy 的 linq 查询进行分页

> ID：14213971
> 
> 赞同：7
> 
> 时间：2013-01-08T11:27:41.747
> 
> 标签：c#, linq, entity-framework

我想返回按某个属性分组的某个实体的列表，按时间戳降序排列并分页（使用 Skip 和 Take）。我得到的是这样的：

```
container.CoinMessageSet.Where(
                c => c.MessageState != MessageStateType.Closed &&
                     (c.DonorOperator.OperatorCode.Equals("opcode") ||
                      c.RecipientOperator.OperatorCode.Equals("opcode"))
                ).OrderByDescending(c => c.TimeStamp)
                 .GroupBy(c => c.Reference).Skip(x).Take(100); 
```

执行后我得到了异常：

```
The method 'Skip' is only supported for sorted input in LINQ to Entities. 
The method 'OrderBy' must be called before the method 'Skip'. 
```

...我调用了 OrderBy()（尽管是降序），我在 Skip() 之前调用了它！我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T11:31:51.357

您还没有订购组；您需要先执行此操作，然后才能分页。例如：

```
.GroupBy(c => c.Reference).OrderBy(grp => grp.Key).Skip(x).Take(100); 
```

`OrderByDescending`（如果您希望组以相反的顺序也可以替换）

另外：由于您正在分组，因此原始数据中的顺序在很大程度上没有意义；您可能可以删除`OrderByDescending(c => c.TimeStamp)`.

所以最终结果：

```
var query = container.CoinMessageSet.Where(
            c => c.MessageState != MessageStateType.Closed &&
                 (c.DonorOperator.OperatorCode.Equals("opcode") ||
                  c.RecipientOperator.OperatorCode.Equals("opcode"))
            ).GroupBy(c => c.Reference).OrderBy(grp => grp.Key)
             .Skip(x).Take(100); 
```

或者可能：

```
var query = (from c in container.CoinMessageSet
             where c.MessageState != MessageStateType.Closed &&
                  (c.DonorOperator.OperatorCode == "opcode" ||
                   c.RecipientOperator.OperatorCode == "opcode")
             group c by c.Reference into grp
             orderby grp.Key
             select grp).Skip(x).Take(100); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T11:32:03.563

这很可能是`GroupBy`因为`OrderByDescending`.

我想你可以试试：

```
container.CoinMessageSet.Where(
                c => c.MessageState != MessageStateType.Closed &&
                     (c.DonorOperator.OperatorCode.Equals("opcode") ||
                      c.RecipientOperator.OperatorCode.Equals("opcode"))
                ).OrderByDescending(c => c.TimeStamp)
                 .GroupBy(c => c.Reference).OrderByDescending(c = > c.Key).Skip(x).Take(100); 
```

# ios - 在 IOS 设备上获取当前主屏幕壁纸

> ID：14213974
> 
> 赞同：3
> 
> 时间：2013-01-08T11:27:52.073
> 
> 标签：ios, cocoa

我知道在 IOS 设备上没有用户交互的情况下**无法**设置主屏幕壁纸，但是否可以获得有关当前正在使用的壁纸的任何信息？原因是我需要尽可能模拟主屏幕

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T11:40:32.037

不，据我所知，该信息不可用。

另外，请小心模仿主屏幕。[Apple's Guidelines](https://developer.apple.com/app-store/review/guidelines/)中有关于做这种事情的警告。

# api - 拉出墙帖的标题

> ID：14213977
> 
> 赞同：0
> 
> 时间：2013-01-08T11:28:13.163
> 
> 标签：api, facebook-graph-api

只是想知道是否有办法使用 API 分别提取帖子标题和描述？基本上我想要这样：

```
$post['author'] = $p['from'];    
$post['title'] = $p['?'];    
$post['content'] = $p['?']; 
```

谢谢

编辑。我也很乐意只删除一个新帖子的标题......

编辑2。我的错误，Facebook 帖子中没有标题。我的咖啡终于开始了，我的无知向我暴露了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:37:22.477

试试这个[http://www.wescutshall.com/2011/12/getting-facebook-user-data-with-php/](http://www.wescutshall.com/2011/12/getting-facebook-user-data-with-php/)

如您所见，您需要 FB 的一些特殊权限才能获取所需的数据。之后，您可以使用他们的 api（如之前 url 中所述）来获取您的数据。

编辑：在这里你可以看到你可以从一个人那里得到的信息：http: [//developers.facebook.com/docs/reference/login/extended-profile-properties/](http://developers.facebook.com/docs/reference/login/extended-profile-properties/)

在这里，您可以获得一条消息（user_status）：http: [//developers.facebook.com/docs/reference/fql/location_post/](http://developers.facebook.com/docs/reference/fql/location_post/)

有了这个之后，您可以使用以下方法提取信息：

```
$config = array(
‘appId’ => FBAPPID,
‘secret’ => FBAPPSECRET,
);

$facebook = new Facebook($config);
$fbuserid = $facebook->getUser();

$params = array(
“scope” => “user_status”,
“redirect_uri” => “http://www.yoursite.com/”
);

$loginurl = $facebook->getLoginUrl($params); 
```

# php - WideImage 因未知原因无法保存到文件，并且由于标题问题而无法输出

> ID：14213979
> 
> 赞同：0
> 
> 时间：2013-01-08T11:28:23.463
> 
> 标签：php, image

当我尝试让 WideImage 创建缩略图时（在检查它是否存在之后）：

```
 public function printSummaryArticle($article, $copy) {
    // create a thumbnail for the image as per the row data if one does not exist
    if (!file_exists('/images/articles/thumbs/th_' . $article['image'])) {
        $image_handle = imagecreatefromjpeg(Config::getAbsPath() . '/images/articles/' . $article['image']);
        // WideImage plugin
        WideImage::load($image_handle)->resize(300, 200)->saveToFile(Config::getAbsPath() . '/images/articles/thumbs/th_' . $article['image']);
    }
    // echo the thumbnail just created
    echo
        '<div class="summary_article"><img src="/images/articles/thumbs/th_'
        . $article['image']
        . '">';
} 
```

我收到以下错误：

```
Warning: imagejpeg(/images/articles/thumbs/th_037.jpg): failed to open stream: No such file or directory in /home2/obmonco1/public_html/gulfinsight/lib/omc_frmwrk/plugins/WideImage/Mapper/JPEG.php on line 39

Fatal error: Uncaught exception 'WideImage_UnknownErrorWhileMappingException' with message 'WideImage_Mapper_JPEG returned an invalid result while saving to /images/articles/thumbs/th_037.jpg' in /home2/obmonco1/public_html/gulfinsight/lib/omc_frmwrk/plugins/WideImage/Image.php:164 Stack trace: #0 /home2/obmonco1/public_html/gulfinsight/lib/omc_frmwrk/bespoke/DisplayEngine.php(181): WideImage_Image->saveToFile('/images/article...') #1 /home2/obmonco1/public_html/gulfinsight/lib/omc_frmwrk/bespoke/PageTemplate.php(70): DisplayEngine->printSummaryArticle(Array, Object(GetCopy)) #2 /home2/obmonco1/public_html/gulfinsight/index.php(100): PageTemplate->homePage() #3 {main} thrown in /home2/obmonco1/public_html/gulfinsight/lib/omc_frmwrk/plugins/WideImage/Image.php on line 164 
```

我必须使用绝对路径，但无论有没有路径的“根”部分（*Config::getAbsPath()*），它都不起作用。如上所示，我还尝试直接访问图像，而不是先创建图像处理程序。

当我尝试使用输出方法直接输出图像时：

```
 public function printSummaryArticle($article, $copy) {
    // create a thumbnail for the image as per the row data if one does not exist
    if (!file_exists('/images/articles/thumbs/th_' . $article['image'])) {
        $image_handle = imagecreatefromjpeg(Config::getAbsPath() . '/images/articles/' . $article['image']);
        // WideImage plugin
        WideImage::load($image_handle)->resize(300, 200)->output('jpeg');
    }
    // echo the thumbnail just created
    echo
        '<div class="summary_article"><img src="/images/articles/thumbs/th_'
        . $article['image']
        . '">';
} 
```

我收到以下错误：

```
Warning: Cannot modify header information - headers already sent by (output started at D:\Open Media Collective\Projects\Gulf Insight\web\publish\lib\omc_frmwrk\bespoke\DisplayEngine.php:130) in D:\Open Media Collective\Projects\Gulf Insight\web\publish\lib\omc_frmwrk\plugins\WideImage\Image.php on line 198 
```

*其后是图像的二进制数据*

我已经打开并检查了每个 php 文件，我必须在打开和关闭 php 标记之前和之后查找空格。我宁愿不使用输出缓冲区。

编辑：忘了提一下，我已将图像、文章和拇指文件夹的权限设置为 777。同样的错误。

要求的补充：

“第 39 行的 WideImage/Mapper/JPEG.php”

```
 return imagejpeg($handle, $uri, $quality); 
```

我不应该碰图书馆。我尝试提供文件、本地主机和远程主机的绝对路径。没什么区别。我知道图像的路径是正确的。这就是错误没有意义的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:47:20.253

解决了：

违规行是这样的：

```
WideImage::load($image_handle)->resize(300, 200)->saveToFile('/images/articles/thumbs/th_' . $article['image']); 
```

即使在这里，我也必须使用完整路径（包括根：Config::getAbsPath()），而不仅仅是在图像处理程序中。

# javascript - jQuery，单击滚动窗口向下到 div 的顶部

> ID：14213986
> 
> 赞同：1
> 
> 时间：2013-01-08T11:29:16.293
> 
> 标签：javascript, jquery

我试图让我的浏览器窗口在单击时向下滚动到 div 的顶部。唯一的问题是其他一切正常，但窗口应向下滚动到单击的 div 的顶部...

到目前为止，我有：

```
$('.work-showcase').click(function(){
    $('.work-showcase').animate({height:'135px'}, 500);
    $(this).animate({height:'400px'}, 500);
    $(window).scrollTop;
}); 
```

我做了一个 jsfiddle 来向你展示我的意思...... [http://jsfiddle.net/Jq4Vw/](http://jsfiddle.net/Jq4Vw/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T11:34:45.753

只要窗口没有最大化，这就是滚动到 div 顶部的方式：

```
$('.work-showcase').click(function(){

    $('html,body').animate({
        scrollTop: $(this).offset().top},
        'slow');
}); 
```

我不确定您在滚动之前要达到的目标

在这里看到它[jsFiddle](http://jsfiddle.net/Jq4Vw/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:36:44.780

试试这个：

```
$('.work-showcase').click(function(){
    $('.work-showcase').animate({height:'135px'}, 500);
    $(this).animate({height:'400px'}, 500);
    $("html, body").animate({ scrollTop: $(this).offset().top }, 500);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T11:39:26.487

看到这个：http: [//jsfiddle.net/Jq4Vw/4/](http://jsfiddle.net/Jq4Vw/4/)

```
$('.work-showcase').click(function(){
   $('.work-showcase').animate({height:'135px'}, 500);
  $(this).animate({height:'400px'}, 500,function() {  
  $("html, body").animate({ scrollTop: $(this).offset().top });  
   });
 }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T11:45:15.410

我认为您正在尝试实现这一目标：http: [//jsfiddle.net/Jq4Vw/7/](http://jsfiddle.net/Jq4Vw/7/)

```
$('.work-showcase').click(function(){
   $('.work-showcase').animate({height:'135px'}, 500);
   $(this).animate({height:'400px'}, 500).promise().done(function(){
       $('html,body').animate({scrollTop: $(this).offset().top},500);
       $(this).addClass('current').unbind('click'); // just add this line
   });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T11:36:10.267

```
$('.work-showcase').click(function(){
    window.location = "#top";
}); 
```

确保存在顶部 ID。

```
<div id="top">
I am at the top of the document.
</div> 
```

[工作小提琴](http://jsfiddle.net/gyAMX/)

# html - 如何在 div 类的列表（ul li）上居中项目？

> ID：14213987
> 
> 赞同：1
> 
> 时间：2013-01-08T11:29:20.610
> 
> 标签：html, css, styles, html-lists, center

我正在尝试将小图标的水平列表居中。对于熟悉 Launchrock 的任何人来说，用户都可以自定义所有代码。注意我看不到他们的任何标准 CSS，但我们可以覆盖他们所有的 CSS。

```
<div class="LR-site-connect">
    <ul class="LR-connect-share-links LR-clearfix">
        <li><a href="#" class="LR-connect-icon connect-rss" title="rss"></a></li>
        <li><a href="#" class="LR-connect-icon connect-github" title="github"></a></li>
        <li><a href="#" class="LR-connect-icon connect-pinterest" title="pinterest"></a></li>
        <li><a href="#" class="LR-connect-icon connect-youtube" title="youtube"></a></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:48:23.607

假设你的图标是 16px 宽并且你希望布局是：

```
[      [ ] [ ] [ ] [ ]      ] 
```

您可以尝试以下方法：

```
.LR-connect-share-links { width: 94px; margin: 0 auto; overflow: hidden; }
.LR-connect-share-links > li { float: left; width: 16px; margin-right: 10px; }
.LR-connect-share-links > li:last-child { margin-right: 0; } 
```

将一些`!important`s 添加到需要覆盖的属性中，您应该有一个可行的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:35:41.983

you can use this to override any css and stick that centered:

```
margin:0 auto !important; 
```

# jira - 为 JIRA 中的问题上传时限制 .bmp、.exe、.bat 附件类型

> ID：14213990
> 
> 赞同：0
> 
> 时间：2013-01-08T11:29:27.000
> 
> 标签：jira, jira-plugin

无论如何限制类型的附件 - .bat/.exe/.bmp 等在用户尝试将它们上传到 JIRA 时受到限制。

我尝试在 JIRA 中使用 Servlet-Filter 插件模块。但我在上传附件时无法获取 URL。此外，我正在尝试收听附件事件的问题。

是否有任何其他选择来限制这些文件类型。

任何帮助都感激不尽。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:48:57.220

好吧，有一个可用的附件过滤器，但我不确定它是否仍然相关——如果我没记错的话，它实际上似乎[不再相关](https://jira.atlassian.com/browse/CONF-6931)，它是用于 Confluence 的。所以你需要为此编写一个自定义插件。

您可以实现`com.atlassian.jira.issue.AttachmentManager`，默认实现是`com.atlassian.jira.issue.managers.DefaultAttachmentManager`并包装它，以便您检查上传的情况 - 文件类型等。但请务必检查 mime-type - 不仅是文件名和/或扩展名。看看[这个](https://answers.atlassian.com/questions/27836/restrict-attachment-based-on-file-type)。

# jquery - 单击下一张幻灯片时停止 SoundCloud HTML5 iframe 播放器

> ID：14213996
> 
> 赞同：0
> 
> 时间：2013-01-08T11:29:47.723
> 
> 标签：jquery, html, widget, soundcloud

--- **[编辑** ---

我不得不使用`getElementByID`下面的工作，但是，有没有办法一次影响轮播中的*所有*iframe，而不是单独添加 ID，即以编程方式？我在 CMS 中生成 SoundCloud 播放器，因此需要一种方法，每次添加新播放器时我都不必更新 JS...

下面编辑代码以反映工作解决方案。

---**编辑]** ---

当您转到下一张幻灯片时，我正在尝试找到一种方法来阻止 SoundCloud 播放当前在轮播*中的各种 iframe*中播放的任何歌曲，但是，我在这样做时遇到了重大问题。

我已经修改了这里的建议：

[使用自定义按钮控制 Soundcloud HTML5 Widget Player](https://stackoverflow.com/questions/11479747/controlling-soundcloud-html5-widget-player-with-custom-buttons)

并引用了 API：

[http://developers.soundcloud.com/docs/api/html5-widget](http://developers.soundcloud.com/docs/api/html5-widget)

但是，在运行我的脚本时，`api.js`根据 FireBug，我在第一行收到此错误：

```
'Uncaught TypeError: Cannot read property 'parentWindow' of undefined' 
```

**这是我页面顶部的代码：**

```
<!-- Load SoundCloud API and controls -->
    <script src="http://w.soundcloud.com/player/api.js" type="text/javascript"></script>
    <script>
$(document).ready(function() {
    /* ****************************************************************** */
                    /* !SOUNDCLOUD WIDGET CONTROLLER */
    /* ****************************************************************** */ 
    // Get elements by ID
    var widget1 = SC.Widget(document.getElementById('sc-1'));
    var widget2 = SC.Widget(document.getElementById('sc-2'));
    widget1.bind(SC.Widget.Events.READY, function() {
        console.log('Ready...');
    });
    widget2.bind(SC.Widget.Events.READY, function() {
        console.log('Ready...');
    });
    $('#nx, #pr').click(function() {
        widget1.pause();
        widget2.pause();
    });
});
</script> 
```

**这是 HTML 标记：**

```
<div class="carousel">
    <div class="slide">
        <h3>Intro</h3>
        <div class="desc"></div>
        <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.</p>
    </div>
    <div class="slide">
        <h3>Reel</h3>
        <div class="desc"></div>
        <span class="embed"><iframe width="100%" id="sc-1" height="315" frameborder="no" scrolling="no" src="#soundcloudurl"></iframe></span>
    </div>
    <div class="slide">
        <h3>Another reel</h3>
        <div class="desc"></div>
        <span class="embed"><iframe width="100%" id="sc-2" height="315" frameborder="no" scrolling="no" src="#soundcloudurl"></iframe></span>
    </div>...
</div> <!-- End div#carousel -->
<a href="javascript:void(0);" class="cnav" id="pr"></a>
<a href="javascript:void(0);" class="cnav" id="nx"></a> 
```

谁能帮我解决这个问题？

谢谢

大须

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T15:47:04.510

您实际上不必使用 ID 来与小部件交互，DOM 节点引用也一样好。

```
var widgets = [];

// here's a selector that gets the widgets
$('.carousel iframe').each(function (index, iframe) {
  widgets.push(SC.Widget(iframe));
});

// at this point, `widgets` holds collection of all widgets in your carousel
// you could also get whatever iframes you like, first, last, first couple of them etc.
$('#nx, #pr').click(function() {
  for (var i = 0, len = widgets.length; i < len; i++) {
    widgets[i].pause();
  }
}); 
```

# c++ - 列表中的多个类c ++

> ID：14213997
> 
> 赞同：0
> 
> 时间：2013-01-08T11:29:50.370
> 
> 标签：c++, list

> **可能重复：**
> [为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)

主班

```
 int main() {
      initCarList();
   }

   void initCarList() {
        List<Car> carList;
        Car c1 = Car("Toyota", "Bettle", 5);
        carList.add(c1);
        Car c2 = Car("Mercedes", "Bettle", 7);
        carList.add(c2);
        Car c3 = Car("FireTruck", "Large Van", 20);
        carList.add(c3);
        Car c4 = Car("Puma", "Saloon Car", 10);
        carList.add(c4);
    } 
```

列表类

```
#include "List.h"
#include <iostream>

using namespace std;

template <typename ItemType>
class List {
private:
    ItemType itemList[10];
    int size;
public: 
    List();
    void add(ItemType);
    void del(int index);
    bool isEmpty();
    ItemType get(int);
    int length();
};

template<typename ItemType>
List<ItemType>::List() {
    size = 0;
}

template<typename ItemType>
void List<ItemType>::add(ItemType item) {
    if(size < MAX_SIZE) {
        itemList[size] = item;
        size++; 
    } else {
        cout << typename << " list is full.\n";
    }
} 
```

我遇到了这样的错误

> 错误 3 错误 LNK2019：函数“void __cdecl initCarList(void )" (?initCarList@@YAXXZ) C:\Users\USER\Desktop\New 文件夹\DSA_Assignment\main.obj DSA_Assignment

我在我的代码中做错了什么吗？需要帮助谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:53:38.760

您的代码中存在语法错误 ( `cout << typename`)。我不知道你是如何得到链接器错误的。可能是它根本没有被编译。

否则没关系[http://ideone.com/PGWGZu](http://ideone.com/PGWGZu)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:54:19.527

显然你做了，因为它不起作用！抛开浮夸，让我们一点一点地看一下错误信息：

```
Error 3 error LNK2019: unresolved external symbol 
```

所以这是一个*链接*错误。链接器试图将单独编译的单元放在一起，但在这种情况下，它找不到`external symbol`- 通常是函数或变量名。

```
"public: void __thiscall List::add(class Worker)" (?add@?$List@VWorker@@@@QAEXVWorker@@@Z) 
```

这是您缺少的功能的完整签名。不幸的是，它的名字被管理了，但是根据您对正在编写的代码的上下文了解，您应该能够知道它是：

```
void List::add(Worker) 
```

下一点...

```
referenced in function "void __cdecl initWorkerList(void)" (?initWorkerList@@YAXXZ) C:\Users\USER\Desktop\New folder\DSA_Assignment\main.obj DSA_Assignment 
```

...告诉您问题发生在哪里，即它试图链接的代码中的哪里，有一个对丢失函数的引用。再一次，在拆解它之后：

```
void initWorkerList() 
```

正如你所看到的，通过一点移植，你可以准确地确定你在这里做错了什么。希望这可以帮助。