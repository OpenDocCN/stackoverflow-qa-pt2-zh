# StackOverflow 问答 16182000-16182999

# sql - SQL Oracle CREATE - 未知问题

> ID：16182001
> 
> 赞同：1
> 
> 时间：2013-04-24T01:42:23.670
> 
> 标签：sql, oracle

在第一次遇到很多虐待之后，我问了这个问题，我已经冷静下来，我正在再次尝试并尝试更具体。

我为 Uni 完成了一项作业，以下是其中一个问题的提示：

```
Write Create Table SQL statements for the relational schema that you have created
Place the text in the specified location in the file: ASS1_SQL.TXT
• All tables must have primary keys.
• All tables must have appropriate foreign key constraints.
• Each foreign key column must have identical column name, datatype and size of the primary key
that it refers to
• Add any NOT NULL constraints as dictated by the ERD
• The following columns data types and sizes must be used
suppid, stkid                 number(2)
suppname, stkname             varchar2(30)
sellprice, purchaseprice      number(6,2) 
```

我对此的回应是：

```
CREATE Table SUPPLIER(
suppid Number(2) NOT NULL,
suppname varchar2(30),
stkid Number(2) NOT NULL,
citycode Number(2) NOT NULL,
Primary Key (suppid),
Foreign Key (citycode) references CITY
)

CREATE Table STOCKITEM( 
stkid Number(2) NOT NULL, 
stkname varchar2(30) , 
sellprice Number(6,2) , 
purchaseprice Number(6,2) , 
suppid Number(2) , 
Primary Key (stkid) , 
whid Number(2) NOT NULL, 
suppid Number(2) Foreign Key references SUPPLIER , 
whid Number(4) Foreign Key references WAREHOUSE 
) 
```

在您说我指向我尚未创建的表（并将我的问题标记下来）之前，请注意我已经在使用的数据库中创建了`WAREHOUSE`和表。`CITY`

此代码有效并创建表。但是，我得到了 0 分（满分 10 分），没有任何解释。上面的代码比最初略有改进，因为（我相信）我已经修复了 NOT NULL 属性。

`Do my NOT NULL and FOREIGN KEY Constraints seem to have the right syntax?`

ERD 可在[https://www.dropbox.com/sh/eohlj5h073kwp4u/Ot08kbdY7Q的 pdf 文件中找到](https://www.dropbox.com/sh/eohlj5h073kwp4u/Ot08kbdY7Q)

在否决这个问题之前，请先咨询我，我可以调整它。我是这个网站的新手，所以请给我一个机会

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:58:14.747

您的外键语法*不正确*。

试试这个：

```
CONSTRAINT fk1 FOREIGN KEY (suppid)
    REFERENCES STOCKITEM(suppid) 
```

将您的语法更改为与上述类似。

此外，您的主键应在任何变量之前声明。

最后，oracle 中的主键语法如下所示：

```
CONSTRAINT pk PRIMARY KEY (suppid)); 
```

# 完整代码：

```
CREATE Table SUPPLIER(
suppid Number(2) NOT NULL,
suppname varchar2(30),
stkid Number(2) NOT NULL,
citycode Number(2) NOT NULL,
CONSTRAINT pk1 PRIMARY KEY (suppid),
CONSTRAINT fk1 FOREIGN KEY (citycode) References ParentTable(primary_key_column)
)

CREATE Table STOCKITEM( 
stkid Number(2) NOT NULL, 
stkname varchar2(30) , 
sellprice Number(6,2) , 
purchaseprice Number(6,2) , 
suppid Number(2) , 
whid Number(2) NOT NULL, 
CONSTRAINT pk2 PRIMARY KEY (stkid),
CONSTRAINT fk2 FOREIGN KEY (suppid) References SUPPLIER(primary_key_column),
CONSTRAINT fk3 FOREIGN KEY (whid) References WAREHOUSE (primary_key_column)
) 
```

# 笔记：

当然，您需要将上面示例中的 *primary_key_column* 更改为您的列名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T01:56:48.340

这是错误的：

```
Foreign Key (citycode) references CITY 
```

因为它没有引用该表中的字段。

此外，这些似乎是错误的顺序：

```
Primary Key (stkid) , 
whid Number(2) NOT NULL, 
```

我总是在我的钥匙之前声明我的所有领域。

# c++ - 将文本文件中的数据读取到结构中，然后打印数据

> ID：16182002
> 
> 赞同：0
> 
> 时间：2013-04-24T01:42:24.043
> 
> 标签：c++

嘿伙计们，我正在编写一个程序，它从文件中读取数据并将其存储在一个结构中，我有几个问题。文本文件如下所示：

```
阿兹林，尼尔
2.3 6.0 5.0 6.7 7.8 5.6 8.9 7.6
巴贝奇，查尔斯
2.3 5.6 6.5 7.6 8.7 7.8 5.4 4.5

```

行中的第一个数字是难度级别，接下来的 7 个数字是分数，接下来是 24 个不同的名称。

我的程序将打印所有潜水员的姓名和难度级别。然后它只会打印潜水员 #1 的第一个分数，而不是所有分数。

此外，对于 2 号潜水员的分数，它会打印出第二个分数（第三个数字）而不是第一个分数（第二个数字）。对每个潜水员依此类推。

我怎样才能让它读取并打印每个潜水员的所有分数？

我已经为此工作了几个小时，因此非常感谢任何帮助！

我的代码：

```
for (lcv = 0; lcv < NUM_NAMES; lcv++)                    //reads in all of the data
{
getline(inFile, diveList[lcv].diversName);

inFile >> diveList[lcv].diff;

for (count = 0; count < NUM_SCORES; count++)
{
inFile >> diveList[lcv].scores[count];              //the problem may be here on down below where i print out the data... im not sure
}

inFile.ignore(200, '\n');

}

printTableOne (diveList);

void printTableOne (const diverList diveList)
{
int lcv;
int count = 0;
cout << "The number of divers for round 1 is: " << NUM_NAMES << endl << endl;

for (lcv = 0; lcv < NUM_NAMES; lcv++)
{

cout << "Diver #" << lcv << endl;
cout << setprecision(1) << fixed <<  endl;
cout << "NAME: " << diveList[lcv].diversName << endl;
cout << "DIFFICULTY LEVEL: " << diveList[lcv].diff << endl;
cout << "SCORES: " << diveList[lcv].scores[lcv] << endl;     //problem here??

cout << endl << endl;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:46:37.143

问题确实在一线

```
cout << "SCORES: " << diveList[lcv].scores[lcv] << endl; 
```

在这里您只打印一个分数，它使用与潜水员相同的索引。而且由于您的潜水员数量多于分数，因此您很快就会从数组*外部打印分数。*

你需要一个循环，就像你从文件中读取分数一样。

# c++ - 如何处理由于项目中涉及的库的不同构建标志而出现的堆损坏（在调试模式下）的错误

> ID：16182003
> 
> 赞同：1
> 
> 时间：2013-04-24T01:42:35.247
> 
> 标签：c++, debugging, dll, build, heap-corruption

**简介：**
我正在重构win32应用程序，我使用VS 2008。该应用程序由我自己的dll和第三方dll组成。

**问题：**
当我在调试模式下运行应用程序并执行某些操作时，会引发错误：应用程序已触发断点，堆已损坏。

**采取的措施：**
我在网上搜索了这个错误，发现这个错误可能是因为项目中的 dll 使用了不同的构建标志（多线程调试`/MD`和多线程调试 dll `/MDd`）（这导致他们使用不同的 c 运行时库，并且为每个库维护自己的内存使用列表，因此可能导致堆损坏）。我检查了我的 dll - 它们都有相同的标志：调试多线程 dll。所以我认为第三方 DLL 之一可能是用多线程调试标志构建的。

**问题：**

*   是否有可能找出构建了哪个标志 3-rd 方库，如果可以，我该怎么做。
*   我如何对您的不同构建标志问题进行分类？
*   我对该错误的猜测是由于不同的构建标志是正确的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:16:29.113

> 是否可以找出构建了什么标志 3-rd 方库，如果可以，我该怎么做

是的。使用 Visual Studio 版本 2005 和 2008 构建的 C 或 C++ DLL 需要一个清单，说明它们需要哪个版本的 C 运行时 DLL。你可以用VS看到它，File + Open + File，选择DLL并打开标有“RT_MANIFEST”的节点。资源 ID 2 是说明 CRT 类型和版本的清单。它应该与您的匹配。将其导出以使其更易于阅读。如果它丢失了，那么它要么不是用 /MD 构建的，要么是使用了完全不同的 VS 版本，这本身就是个坏消息。

> 我如何对您的不同构建标志问题进行分类？

你不能。您需要联系第 3 方并请求与您兼容的构建。

> 我对该错误的猜测是由于不同的构建标志是正确的吗？

这是可能的，但可能性不大。不匹配不会自动导致崩溃，程序员当然可以设计 DLL 接口，这样就不会出现问题。您通常可以从函数签名和文档中看出。问题案例是 DLL 分配对象并且您应该释放它的位置。当函数返回一个指针时，这将是显而易见的。或标准 C++ 类库对象，如 std::string。不太明显的是它何时抛出异常。这样的问题也是高度可重复的，它会持续轰炸，而不是偶尔轰炸。

你犯的最大错误是在这里问这个问题。您应该与从事此 DLL 工作的第 3 方雇用的程序员交谈。他会知道您的问题的*确切*答案，并且可以很容易地解决您的问题。如果你不能得到这种支持，那么你**不**应该使用这些 DLL，它们会让你的生活在很长一段时间内都很痛苦。

# objective-c - Objective-C 中是否有“with”语句？

> ID：16182006
> 
> 赞同：0
> 
> 时间：2013-04-24T01:42:56.153
> 
> 标签：objective-c

我正在寻找类似的东西：

```
with car.body.wheel 
begin
.airPressure = 3.0;
.diameter = 20;
end 
```

我想我可以为它写一个宏，但想知道是否有内置的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T01:44:40.230

不。与其为它编写一个宏，这可能会使其他 Objective-C 程序员难以阅读您的代码，您应该以正常的 ObjC 方式进行：

```
car.body.wheel.airPressure = 3.0;
car.body.wheel.diameter = 20; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T01:46:17.143

答案是否定的，Objective C 中没有这样的东西。

就这样做

```
XObject *x = car.body.wheel;
x.airPressure = 3.0;
x.diameter = 20; 
```

当然，换成`XObject`任何`wheel`类型

更新：摆脱了 id 语法

# r - 存储 oAuth 令牌的最佳位置

> ID：16182009
> 
> 赞同：2
> 
> 时间：2013-04-24T01:43:31.453
> 
> 标签：r, oauth

我正在编写一个名为 rCharts 的 R 包，它允许用户从 R 创建、自定义和发布 JS 图表。发布的选项之一是 gist.github.com。

我已经使用 Github 的 v3 API 实现了基本身份验证，该 API 使用用户名和密码来获取令牌，然后使用该令牌创建一个 gist。

现在，我想在第一次生成令牌时存储令牌，以便 (a) 不会每次都提示用户输入用户名和密码，以及 (b) 通过每次生成新令牌来防止令牌扩散。

我想到了几个可以存储令牌的位置。

1.  rCharts 包目录。
2.  `~/.rCharts`
3.  `.rProfile`

我正在尝试思考每种方法的优缺点。我喜欢使用`.rProfile`，但是如果用户从不同的目录打开 R 怎么办。

如果有人可以帮助我了解什么是最佳解决方案，我将不胜感激。

更新。感谢@hadley，我发现我实际上使用的是 OAuth 而不是基本授权。使用基本授权，发布要点真的很容易。这是我的代码。我相信，检索用户名和密码最安全的方法是使用`options`. 由于 Github API 最近发生了一些变化，因此需要用户代理字符串。

```
require(httr)
POST(
  url = 'https://api.github.com/gists',
  config = c(
    authenticate('username', 'password', type = 'basic'),
    add_headers("User-Agent" = "Dummy")
  ),
  body = body
) 
```

# java - 如何让 Java 计时器在按键时重新启动？

> ID：16182016
> 
> 赞同：1
> 
> 时间：2013-04-24T01:43:57.533
> 
> 标签：java, swing, timer

我正在尝试用java制作俄罗斯方块游戏，我对如何使游戏正常工作有一个很好的想法，我只是想弄清楚如何让方块每x毫秒掉落一次。这是我第一次尝试 Java 游戏。

我很早就遇到了 Timer 类并开始尝试弄清楚它，但随后开始考虑键绑定将如何影响它，因为我希望在再次向下移动块之前重置计时器。

这样想...阻止丢弃，0.5秒等待，阻止丢弃，0.5秒等待，阻止丢弃，0.25秒等待因为用户点击向下箭头，0.5秒等待，阻止丢弃......等

我目前没有编写任何代码，因为我只是想先弄清楚我的所有逻辑。

当前计划：（伪代码）

```
while(game is not over)
{
  if(game is not paused)
   {
       getNextBlock();
       while(current block hasn't hit the bottom)
       {
           // x amount of time paused (time will decrease as levels increase)
           dropBlock();
       }
       //check for finished lines and award points/levels
   }    
} 
```

我应该研究什么才能处理按键？或者是否有比使用计时器更简单的方法？

编辑：我正在使用 Swing 并且正在查看 Swing Timer。游戏将在电脑（而非手机）上运行。

# angularjs - angularjs如何在没有视图的情况下在$scope上定义一个新属性

> ID：16182022
> 
> 赞同：0
> 
> 时间：2013-04-24T01:44:28.493
> 
> 标签：angularjs

我正在尝试使用 Jasmine 和 angularJS 应用程序进行 BDD。我的要求是在我的视图中创建一个选择元素，该元素从工厂获取数据。因此，本着 BDD 的真正精神，我在开始编写视图之前先编写我的工厂和控制器。

我对工厂的测试：

```
 describe('getTypeOfUnit', function(){
    it('should return typeofunits', inject(function(getTypeOfUnit){
        expect(getTypeOfUnit).not.toBeNull();
        expect(getTypeOfUnit instanceof Array).toBeTruthy();
        expect(getTypeOfUnit.length).toBeGreaterThan(0);
    })) ;
  }); 
```

所以我正在测试我的数据不为空，是一个数组并且至少包含一个项目。它失败了，因为没有工厂。

这是使测试通过的工厂：

```
angular.module('myApp.services', [])
  .factory('getTypeOfUnit', function(){
        var factory = ['Research Lab', 'Acedamic Unit', 'Misc'];
        return factory;
    }); 
```

现在进入控制器。这是空控制器：

```
angular.module('myApp.controllers', [])
    .controller('describeUnitController',[function($scope){        
        console.log('exiting describeUnit');
    }]); 
```

并测试控制器：

```
describe('controllers', function(){
    var describeScope;

    beforeEach(function(){
        module('myApp.controllers');
        inject(function($rootScope, $controller){
            console.log('injecting contoller and rootscope in beforeEach');
            describeScope  = $rootScope.$new();
            var describerController = $controller('describeUnitController', {$scope: describeScope});

        });
    }) ;

    it('should create non empty "typeOfUnitsModel"', function() {
        expect(describeScope["typeOfUnits"]).toBeDefined();
        var typeOfUnits =   describeScope.typeOfUnits;
        expect(typeOfUnits instanceof  Array).toBeTruthy();
        expect(typeOfUnits.length).toBeGreaterThan(0);
    });
}); 
```

所以我正在测试我的控制器是否返回一个非空数组。和服务一样。这些测试失败。所以下一步是在控制器的范围对象上定义一个属性：

```
.controller('describeUnitController',[function($scope){
        $scope.typeOfUnits = [];
        console.log('exiting describeUnit');
    }]); 
```

现在我收到一个错误：TypeError: Cannot set property 'typeOfUnits' of undefined

为什么控制器不知道范围？我认为DI会自动使其可用？

先感谢您。也请评论我的测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T02:24:10.397

发现我的代码有两个错误：

1.  控制器不知道 $scope。不知道为什么。所以我可以执行以下操作之一：

    .controller('describeUnitController',['$scope',function($scope){ $scope.typeOfUnits = []; console.log('exiting describeUnit'); }]);

或者

```
.controller('describeUnitController',function describeUnitController($scope){
            $scope.typeOfUnits = [];
            console.log('exiting describeUnit');
        }); 
```

我不确定为什么会这样。但吸取了教训。

1.  然后我尝试按如下方式使用该服务：

    .controller('describeUnitController',function describeUnitController($scope, GetTypeOfUnit){ $scope.typeOfUnits = getTypeOfUnit; });

这给了我著名的错误：GetTypeOfUnit 的未知提供者

显然，我必须将服务模块添加到工厂模块才能使用服务并使测试通过。但是我的 app.js 都定义了它们：

```
angular.module('myApp', ['myApp.filters', 'myApp.services', 'myApp.directives', 'myApp.controllers','ui.bootstrap','$strap.directives']) 
```

但由于我正在测试，我还必须在控制器模块中加载服务模块。如果应用程序正在加载（如在浏览器中），我不必这样做。

我是否正确理解这一点？谢谢你们。

# javascript - 使用 FileReader 时 chrome 出现无效状态错误

> ID：16182027
> 
> 赞同：5
> 
> 时间：2013-04-24T01:45:26.027
> 
> 标签：javascript, filereader

我只是尝试使用 FileReader 来显示图像文件，但是当我尝试使用超过 1 个图像时，我得到以下“InvalidStateError：DOM Exception 11”。但是，在 Firefox 中，它可以正常工作。

这是我的代码

```
 function addImages(images)
            {
                var reader=new FileReader()

                reader.onload=function()
                {
                    $("#images").append('<img src="'+this.result+'"/><br/>')
                }

                for(var count=0;count<images.length;count++)
                {
                    reader.readAsDataURL(images[count])
                }
            }

            function uploadImagesToBrowser(e)
            {
                addImages(e.target.files)   
            }
$("#imagefiles").on("change",uploadImagesToBrowser) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-29T20:34:57.997

不幸的是不起作用。正如 janje 所提到的，您需要在每次迭代时创建一个新的 FileReader。由于JavaScript[中的“在循环中创建函数](http://blog.jbrantly.com/2010/04/creating-javascript-function-inside.html)”问题，还记得在绑定事件处理程序时创建一个闭包。

[Eric Bidelman 的帖子](http://www.html5rocks.com/en/tutorials/file/dndfiles/#toc-reading-files)是一个很好的来源：

```
function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object

    // Loop through the FileList and render image files as thumbnails.
    for (var i = 0, f; f = files[i]; i++) {

      var reader = new FileReader();

      // Closure to capture the file information.
      reader.onload = (function(theFile) {
        return function(e) {
          // Render thumbnail.
        };
      })(f);

      // Read in the image file as a data URL.
      reader.readAsDataURL(f);
    }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T13:51:49.207

您必须使用 readAsDataURL 为每次迭代创建一个新的 FileReader（和一个新的变量来存储它）。

# python - 用于查看/修改 IP 路由规则的 Python 界面

> ID：16182029
> 
> 赞同：7
> 
> 时间：2013-04-24T01:45:30.617
> 
> 标签：python, linux, routing, ip, subprocess

我正在尝试为`ip route`Linux 上的 -style 命令的功能找到一个 Pythonic 接口，类似于[`python-iptables`一个不错的 Pythonic 接口，`iptables`](https://stackoverflow.com/questions/5891779/is-there-a-python-interface-to-iptables)它直接调用 C 库函数，而不是`subprocess`用来调用和解析 running 的输出`/usr/sbin/iptables`。这样的模块存在吗？

如果不是，那么在 Python 中执行以下操作的最佳方法是什么（最好不涉及`subprocess`-parsing）：

*   获取机器的IP路由表
*   向 IP 路由表添加新规则
*   从 IP 路由表中删除规则？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-09-02T21:56:19.440

你试过了[`pyroute2`](https://pypi.python.org/pypi/pyroute2)吗？Pyroute2 是一个纯 Python netlink 和 Linux 网络配置库。它只需要 Python 标准模块，不需要其他 3rd 方库。稍后它可以更改，但依赖关系树将尽可能简单。

# javascript - 如何使传单地图重新调整大小？

> ID：16182032
> 
> 赞同：1
> 
> 时间：2013-04-24T01:45:42.570
> 
> 标签：javascript, jquery, map, leaflet

我的页面中嵌入了一个`leaflet`地图，但我想添加一个控件以允许用户调整带有传单地图的 div 的大小。我已经尝试过像`jquery.ba-resize`,`twinhelix`和另一个这样的插件，但我似乎无法让我在 div 附近有一个带有传单地图的按钮并即时调整它的大小。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T02:13:31.380

看起来我找到了一个简单的答案，我只是拿了我的地图的 ID（'地图'，创意），然后

$('#map).resizable();

在页面上有一个 jquery-ui 插件。

足够我想要的了！

# java - Jetty - 检测断开连接的客户端（续）

> ID：16182033
> 
> 赞同：1
> 
> 时间：2013-04-24T01:45:53.680
> 
> 标签：java, jetty, comet, continuation

我正在使用带有 Continuations 的 Jetty 来实现长轮询，但我看不到检测客户端断开连接的方法。

我知道在第一次运行（创建延续）和任何后续运行之间的时间里，由于 HTTP 的性质，客户端和服务器之间可能没有流量，但我可以解决只是能够检测到客户端正在尝试发回消息时断开连接（服务器调用继续）。

我一直在试图找到一种方法来检测作者实际上并没有写信给客户，但我似乎找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:32:02.067

在 Java 中，如果不尝试写入连接然后捕获故障，就无法知道客户端已断开连接。如果您尝试编写自己的长轮询实现，我的建议是简单地使用 cometd (cometd.org)，因为它已经完成了所有这些并为您提供了完整的消息传递语义。如果这不起作用并且您仍然需要编写自己的，那么该项目是如何最好地使用延续（或 servlet 3.0 异步 servlet）的一个很好的例子。

# php - 如何连接两列并使用like 子句连接列？

> ID：16182034
> 
> 赞同：0
> 
> 时间：2013-04-24T01:46:05.947
> 
> 标签：php, mysql, codeigniter, join

目前我正在使用 CodeIgniter 制作搜索页面。我面临的问题是我的`products`表中有两列，`brand`并且`model`. 我正在尝试根据具有三种状态的查询来选择结果，如图所示：

查询只包含品牌
查询只包含型号
查询包含两者

前两个查询工作正常，但问题是当查询同时包含`brand`和时`model`。如何对两个列`brand`和`model`连接列使用 LIKE 子句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T02:55:05.537

对于灵活的查询，最好使用 CodeIgniter 活动记录类：

```
$this->db->like('model', 'model');
$this->db->like('brand', 'brand');
$this->db->select('*');
$this->db->get('products'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:39:38.410

如果您只是想查找同时包含特定品牌和特定型号的行，则可以在 where 子句中使用两个 like 语句：

`select * from products where model like '%MODEL%' and brand like '%BRAND%'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:06:35.543

用这个：

```
if(!empty($brandsearchtext)){
    $this->db->like('p.brand', $this->db->escape_like_str($brandsearchtext));
}
if(!empty($modelsearchtext)){
    $this->db->like('p.model', $this->db->escape_like_str($modelsearchtext));
}

$this->db->select("*");
$this->db->from('products');

$result = $this->db->get();
//echo $this->db->last_query(); 
```

# c# - 从 XML 文件读取到 Sql 服务器表 C#

> ID：16182036
> 
> 赞同：0
> 
> 时间：2013-04-24T01:46:13.650
> 
> 标签：c#, sql-server, xml

我想从 XML 文件读取数据到 sql server 表，如果所有节点都存在，我的代码可以正常工作，但如果其中一个节点不存在，它会显示错误这里是我的 xml 文件

```
<?xml version="1.0" standalone="yes"?>
 <DocumentElement>
 <student>
 <rfidip>3000E2009150501900880530DE07</rfidip>
 <timegetin>2013-04-09T00:53:25+03:00</timegetin>
 <timegetout>2013-04-09T00:55:59+03:00</timegetout>
 </student>
<student>
<rfidip>3000E20075232318015114907CF6</rfidip>
<timegetin>2013-04-09T00:53:25+03:00</timegetin>
<timegetout>2013-04-09T00:55:59+03:00</timegetout>
</student>
<student>
 <rfidip>3000E20075232318015112409741</rfidip>
 <timegetin>2013-04-09T00:53:25+03:00</timegetin>
 </student>
 </DocumentElement> 
```

这是我读取 XML 并将数据插入 sql server 表的代码

```
 XmlDocument xmlDoc = new XmlDocument();
       xmlDoc.Load("C:\\Users\\TOSHIBA\\Desktop\\student.XML");

       XmlNodeList dataNodes = xmlDoc.SelectNodes("/DocumentElement/student");

        foreach (XmlNode node in dataNodes)
           {

                   rfidip = node.SelectSingleNode("rfidip").InnerText.ToString();
                   timegetin = (node.SelectSingleNode("timegetin").InnerText);
                   timegetout = node.SelectSingleNode("timegetout").InnerText;

             sql = "insert into tripStudent (Student_ID,trip_number,time_getin,time_getout) values(@rfidip,@trip_number,@timegetin,@timegetout)";
             //sql = "insert into students values(" + rfidip + ",'" + timegetin + "'," + timegetout + ")";
              command = new SqlCommand(sql, connection);
             command.Parameters.AddWithValue("@rfidip", rfidip);
              command.Parameters.AddWithValue("@trip_number",trip_number);
              command.Parameters.AddWithValue("@timegetin", Convert.ToDateTime(timegetin));
              command.Parameters.AddWithValue("@timegetout", Convert.ToDateTime(timegetout));

               command.ExecuteNonQuery(); 
```

有谁能够帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:51:05.123

与其以这种方式工作，为什么不只`Entity Framework`用于更新值和`XDocument`xml 解析呢？

```
string xml = @"<?xml version=""1.0"" standalone=""yes""?>
        <DocumentElement>
            <student>
                <rfidip>3000E2009150501900880530DE07</rfidip>
                <timegetin>2013-04-09T00:53:25+03:00</timegetin>
                <timegetout>2013-04-09T00:55:59+03:00</timegetout>
            </student>
            <student>
                <rfidip>3000E20075232318015114907CF6</rfidip>
                <timegetin>2013-04-09T00:53:25+03:00</timegetin>
                <timegetout>2013-04-09T00:55:59+03:00</timegetout>
            </student>
            <student>
                <rfidip>3000E20075232318015112409741</rfidip>
                <timegetin>2013-04-09T00:53:25+03:00</timegetin>
            </student>
        </DocumentElement>";

//use var xDoc = XDocument.Load(xmlPathGoesHere); if you using xml path
var xDoc = XDocument.Parse(xml);
var studentElements = xDoc.Descendants("student");

studentElements.ToList().ForEach(student => {
    //Create you Insert Query here, see sample below how to get values
    var rfid = student.Element("rfidip").Value;
    var timeIn = student.Element("timegetin").Value;
    var timeOut= string.Empty;
    try {
        timeOut = student.Element("timegetout").Value;
    } catch {
        //since you have no xml value on your time get out, I catch this line
    }
}); 
```

请参阅下面的参考：

1.)[实体框架](http://msdn.microsoft.com/en-us/data/ef.aspx)

2.) [XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T01:59:41.450

如果元素不存在，则 SelectSingleNode 返回 null，因此当您在 null 上调用 InnerText 时，它会引发异常，因此您可以像这样更改代码：

```
rfidip = (node.SelectSingleNode("rfidip") != null)? node.SelectSingleNode("rfidip").InnerText.ToString(): string.Empty; 
```

其余代码也是如此，确保元素存在

希望这对你有帮助

# php - 联系表单在提交时未正确重定向

> ID：16182045
> 
> 赞同：0
> 
> 时间：2013-04-24T01:46:52.687
> 
> 标签：php, javascript, jquery, html, forms

我有一个联系表格，您可以通过按电话然后在屏幕上联系表格来获得。随意测试通过它给我发邮件，没问题。当我按下提交时，我被重定向到提交，并且联系表也消失了。

我目前正在尝试实现类似于重定向到[http://develop-web.com/404.php](http://developed-web.com/404.php)的目标，只是为了确认一个有效的重定向。我在哪里决定这个？

编码

```
if(isset($_POST['submitted']))
{
   if($formproc->ProcessForm())
   {
        $formproc->_redirect("http://developed-web.com/404.php");
   }
} 
```

似乎什么也没做。

**编辑：**

我还包括一个文件，其中包含

```
function RedirectToURL($url)
{
    header("Location: $url");
    exit;
} 
```

是否相关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:50:07.893

如果标头已通过，您将无法重定向页面。为了重定向使用

`ob_start()`在代码的开头“保留”标题

然后`ob_end_flush()`在代码的末尾发送标头，然后您就可以重定向页面了。

# mysql - 同时从另一个表中选择数据和计数

> ID：16182046
> 
> 赞同：1
> 
> 时间：2013-04-24T01:47:00.200
> 
> 标签：mysql

我只想回应文章并按用户评论的最多数量对其进行排序。这是我的两张桌子

tbl_articles

```
article_id  |  articles_title  |
 1          |     This is 1st  |
 2          |     This 2nd    | 
```

tbl_comment:

```
comment_id  |   user_id     | article_id | comment_msg
 1          |       1       |    1       | my comment1
 2          |       1       |    2       | my comment2
 3          |       2       |    1       | some comment1 
```

如何加入这些表并强制产生这样的结果

```
 article_id|articles_title|  comment_count  |
     1     |  This is 1st |    2            |
     2     |  This 2nd    |    1            | 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:48:49.567

下面的查询使用`INNER JOIN`它只会显示结果中的所有文章，如果它至少有`1`评论。如果您想在没有评论的情况下显示文章，请更改`INNER JOIN`为`LEFT JOIN`.

```
SELECT  a.article_ID,
        a.article_title,
        COUNT(*) Comment_Count
FROM    articles a
        INNER JOIN comment b
            ON a.article_ID = b.article_ID
GROUP   BY a.article_ID, a.article_title 
```

*   [SQLFiddle 演示（使用`INNER JOIN`）](http://www.sqlfiddle.com/#!2/aa86c/3)
*   [SQLFiddle 演示（使用`LEFT JOIN`）](http://www.sqlfiddle.com/#!2/37145/2)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T01:49:54.210

这是一个带有聚合的简单连接查询：

```
select article_id, articles_title, count(c.comment_id) as comment_count
from tbl_articles a left outer join
     tbl_comment c
     on a.article_id = c.article_id
group by article_id, articles_title 
```

这使用 a`left outer join`来保留所有文章，即使它们没有评论。

# delphi - 是否可以在 Delphi XE4 中更改应用程序短标题而不使其与项目 dpr 名称相同？

> ID：16182047
> 
> 赞同：8
> 
> 时间：2013-04-24T01:47:14.467
> 
> 标签：delphi, firemonkey-fm2, delphi-xe4, delphi-ios

我正在编写我的第一个由 delphi 驱动的 iPhone 应用程序。我已经创建了它，但我希望它被命名为 .dpr 文件的名称以外的名称，因为 dpr 文件不能包含空格，例如，EXE 名称并不总是与可能分配给应用程序的人类可读名称相同.

而在 Windows Delphi 应用程序中，EXE 的名称与 .dpr 文件相同，这很好，因为快捷方式中的英文名称、桌面或任何其他非英文位置的开始菜单中的本地化名称不一定是与您的项目名称相同。在 iOS 中，应用程序的短名称可能包含空格，而 Delphi 项目名称则不能，所以我很惊讶地看到这两者是硬链接在一起的。

在 XCode 中，您可以分别设置包名称、项目名称和在 iOS 主屏幕上可见的名称。

我的问题是，因为我今天刚刚安装了 Delphi XE4 (RTM)，我正在尝试：

1.  我可以在项目选项中的某处设置捆绑 ID 吗？我似乎找不到它。Bundle id 对于任何前往应用商店的应用都非常重要，但我看不到可以设置它的 UI 元素。

2.  我还可以在某处设置显示名称吗？

3.  我可以在某处查看和编辑应用程序的 .plist（Apple 要求所有应用程序在 iOS 上具有的属性列表）还是为我生成而没有机会查看或修改它？似乎 .plist 文件位于 Windows 中我的 Debug\ 文件夹中的磁盘上，这意味着 Delphi XE4 将其视为输出工件而不是输入源文档，就像在 Xcode 项目中那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T08:06:58.057

是的，在项目选项下，您会找到版本信息。对于 iOS 应用程序，这是捆绑信息。您可以不理会大部分内容，但有一个 CFBundleDisplayName 属性可用于更改显示名称。您也可以在此处设置其他捆绑信息。

[Xe4 文档维基](http://docwiki.embarcadero.com/RADStudio/XE4/en/Version_Info)

# iphone - 需要从“friendUsers”数组中提取 Facebook ID，并在 Facebook 查询他们的姓名或个人资料图片

> ID：16182057
> 
> 赞同：0
> 
> 时间：2013-04-24T01:48:21.923
> 
> 标签：iphone, objective-c, facebook

我正在以一种迂回的方式来做这件事。我正在拉动我的应用程序的当前用户以及当前用户的 Facebook 朋友。

当您打印friendUsers [这是一个数组]时，您会得到：

```
"<PFUser:1234567:(null)> {\n    fbId = abcdefg;\n    username = ausername;\n}"
) 
```

为了简单起见，我显然换掉了一些信息，但你明白了。

因此，如果我有很多用户的数组，我会想要提取 fbId，并查询 facebook 并让他们的个人资料图片显示在表格中。然后你可以点击他们的个人资料图片。这个想法是改变对象分配给谁。

我得到一个不兼容的指向整数转换的指针，将 NSIndexPath strong 发送到 .NSUInteger 类型的参数`didSelectRowAtIndexPath`。

不仅如此，我还意识到我在这里只是选择了一个用户：

```
PFUser *facebookID = [[PFUser alloc] init];
    facebookID = [friendUsers objectAtIndex:0]; 
```

那是因为目前我只有一个其他用户安装了我的应用程序。我这样做只是为了查看我的应用在查询 Facebook 时是否正常工作。但是，如果有很多用户，我将如何获取所有的 facebookID？

```
#import "FacebookFriendViewController.h"
#import "MainQueryViewController.h"
#import <Parse/Parse.h>

@interface FacebookFriendViewController ()

@end

@implementation FacebookFriendViewController

@synthesize friendUsers;
@synthesize pic;
@synthesize object;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSLog(@"This is what was passed to the view controller.");
    NSLog(@"Printing friendUsers: %@", friendUsers);
    NSLog(@"%@", object);

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
#warning Potentially incomplete method implementation.
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    NSLog(@"The count is... count=%d",[friendUsers count]);
    // Return the number of rows in the section.
    return [friendUsers count];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"friendCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    PFUser *facebookID = [[PFUser alloc] init];
    facebookID = [friendUsers objectAtIndex:0];
    NSString *fbIdString = [[NSString alloc] init];
    fbIdString = [facebookID objectForKey:@"fbId"];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    }
    NSLog(@"This is a facebook ID:%@", fbIdString);
    NSURL *profilePictureURL = [NSURL URLWithString:[NSString stringWithFormat:@"https://graph.facebook.com/%@/picture?type=large", fbIdString]];
    NSData *picData = [NSData dataWithContentsOfURL:profilePictureURL];
    UIImageView *fbPic = (UIImageView *)[self.view viewWithTag:1001];
    [fbPic setImage:[UIImage imageWithData:picData]];

    // Configure the cell...

    return cell;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    [object setObject:[friendUsers objectAtIndex:indexPath] forKey:@"assignedTo"];

}

@end 
```

谢谢你的帮助

**更新**

根据 HRM 的询问，这里是发送到朋友选择器视图的内容。

```
 PF_FBRequest *request = [PF_FBRequest requestForMyFriends];
        [request startWithCompletionHandler:^(PF_FBRequestConnection *connection,
                                              id result,
                                              NSError *error) {
            if (!error) {
                // result will contain an array with your user's friends in the "data" key
                NSArray *friendObjects = [result objectForKey:@"data"];
                NSMutableArray *friendIds = [NSMutableArray arrayWithCapacity:friendObjects.count];
                // Create a list of friends' Facebook IDs
                for (NSDictionary *friendObject in friendObjects) {
                    [friendIds addObject:[friendObject objectForKey:@"id"]];
                }

                // Construct a PFUser query that will find friends whose facebook ids
                // are contained in the current user's friend list.
                PFQuery *friendQuery = [PFUser query];
                [friendQuery whereKey:@"fbId" containedIn:friendIds];

                // findObjects will return a list of PFUsers that are friends
                // with the current user
                NSArray *friendUsers = [friendQuery findObjects];

                NSLog(@"%@", friendUsers);

                [self performSegueWithIdentifier:@"sendToFriend" sender:friendUsers];
            }
        }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T04:50:32.803

要解决您的不兼容指针问题，您必须传递`indexPath.row`给 cellForRowAtIndexPath。

您可以非常轻松地获取 fb 用户 ID： `facebookID = [friendUsers objectAtIndex:indexPath.row];`在 cellForRowAtIndexPath 方法中。

我希望这有帮助。

# php - PDO 创建表不起作用

> ID：16182062
> 
> 赞同：1
> 
> 时间：2013-04-24T01:48:49.897
> 
> 标签：php, mysql, pdo

只是无法使用 PDO 插入新表。我得到的错误是：

> SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 ''25500' 附近使用的正确语法（第 149440 行的`id` INT(11) NOT NULL AUTO_INCREMENT, `date`TIMESTAMP NOT NULL DEFAUL' 不存在！

请注意 $id 是表名。

```
function createTable($dbh, $id, $description)
{
try {
$stmt = "CREATE TABLE '$id' (
`id` INT(11) NOT NULL AUTO_INCREMENT,
`date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ,
`prodtitle` VARCHAR(50) NOT NULL ,
`unitsize` VARCHAR(10) NOT NULL ,
`price` VARCHAR(10) NOT NULL ,
`wasprice` VARCHAR(10) NOT NULL ,
`specprice` VARCHAR(10) NOT NULL ,
PRIMARY KEY (`id`) ) COMMENT = '$description'";

if($dbh->exec($stmt) !== false) echo 'The sites table is created';
} 
catch (PDOException $e) { echo $e->getMessage();
}
} 
```

它一定很简单，但我就是挑不出。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T01:50:56.217

TableName 不应该用单引号引起来，因为它不是字符串文字。尝试用反引号更改单引号，

```
$stmt = "CREATE TABLE `$id` (
`id` INT(11) NOT NULL AUTO_INCREMENT,
`date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ,
`prodtitle` VARCHAR(50) NOT NULL ,
`unitsize` VARCHAR(10) NOT NULL ,
`price` VARCHAR(10) NOT NULL ,
`wasprice` VARCHAR(10) NOT NULL ,
`specprice` VARCHAR(10) NOT NULL ,
PRIMARY KEY (`id`) ) COMMENT = '$description'" 
```

# sql-server-2008 - 同时具有 Happy Green 和 Red 重定向路径时的原始源文件行数

> ID：16182063
> 
> 赞同：1
> 
> 时间：2013-04-24T01:49:02.327
> 
> 标签：sql-server-2008, ssis

我有一个数据流任务，它将行定向到数据库表（快乐的绿色路径）并将行重定向到错误文件。

我想做的是在两个数据流中添加一列，表示原始源文件的记录数，而不是流向任一方向的记录数。我在想我需要两个脚本任务的输入/输出*变量。*如果一行指向任一路径，则全局变量递增，其值映射到输出列。

这看起来是正确的方法吗？我从来没有锁定变量（或经常使用它们），我想知道脚本任务的 Input0_ProcessInputRow(Input0Buffer Row) 方法中的锁定是否是正确的，甚至是正确的地方。任何有关如何执行此操作或示例的建议将不胜感激。

同样，我看到了有关如何计算脚本组件的行数的示例，但它们涉及脚本任务模块级别的变量而不是外部变量。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T02:42:28.837

你会认为脚本任务会工作，但它不会。问题是 SSIS 变量的工作方式是您只能在 OnPostExecute 事件中更新它们。这就是为什么您会在 ProcessInputRow 事件中看到修改脚本任务变量的示例，并且只有在结束阶段才*允许*他们尝试修改变量。

因此，您有 Script Task 1 和 Script Task 2 都试图修改相同的全局值，但由于锁定和同步垃圾，它不起作用。

我认为您最好的方法是使用两个行计数转换。数一数快乐的行，数一数愤怒的行。如果您需要组合答案，只需添加第三个变量 RowsTotalInput 并使其成为表达式`@[User::RowsInputHappy] + @[User::RowsInputAngry]`

# javascript - 在插入 DOM 之前用 HTML 包装字符串

> ID：16182066
> 
> 赞同：0
> 
> 时间：2013-04-24T01:49:31.087
> 
> 标签：javascript, jquery

我有以下返回字符串的 if 语句：

```
var _title = ( data.complete.question ) ? 'Correct' : 'Incorrect'; 
```

是否可以在插入 DOM 之前用 HTML 包装这个字符串？就像是 ：

```
// determine if correct or incorrect
var _title = ( data.complete.question ) ? 'Correct' : 'Incorrect';

// wrap the returned string in a h2 tag, store this into a variable
// when ready 
// append to the DOM 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T01:52:42.457

```
$("<div>").text(_title).appendTo(... 
```

# python - PyUnicodeUCS2_AsEncodedString 错误

> ID：16182067
> 
> 赞同：1
> 
> 时间：2013-04-24T01:49:38.193
> 
> 标签：python

使用 Python 2.7、django 和 virtualenv，每当我尝试运行 python manage.py validate 时都会收到以下错误。仅供参考，我已经激活了 python 的 virtualenv 和文件路径，并且站点包似乎是正确的。

```
Traceback (most recent call last):
  File "manage.py", line 11, in <module>
    execute_from_command_line(sys.argv)
  File "/home/bitnami/Sites/env.example/lib/python2.7/site-packages/django/core/management/__init__.py", line 453, in execute_from_command_line
    utility.execute()
  File "/home/bitnami/Sites/env.example/lib/python2.7/site-packages/django/core/management/__init__.py", line 392, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/bitnami/Sites/env.example/lib/python2.7/site-packages/django/core/management/__init__.py", line 263, in fetch_command
    app_name = get_commands()[subcommand]
  File "/home/bitnami/Sites/env.example/lib/python2.7/site-packages/django/core/management/__init__.py", line 109, in get_commands
    apps = settings.INSTALLED_APPS
  File "/home/bitnami/Sites/env.example/lib/python2.7/site-packages/django/conf/__init__.py", line 53, in __getattr__
    self._setup(name)
  File "/home/bitnami/Sites/env.example/lib/python2.7/site-packages/django/conf/__init__.py", line 49, in _setup
    self._configure_logging()
  File "/home/bitnami/Sites/env.example/lib/python2.7/site-packages/django/conf/__init__.py", line 71, in _configure_logging
    from django.utils.log import DEFAULT_LOGGING
  File "/home/bitnami/Sites/env.example/lib/python2.7/site-packages/django/utils/log.py", line 6, in <module>
    from django.views.debug import ExceptionReporter, get_exception_reporter_filter
  File "/home/bitnami/Sites/env.example/lib/python2.7/site-packages/django/views/debug.py", line 11, in <module>
    from django.http import (HttpResponse, HttpResponseServerError,
  File "/home/bitnami/Sites/env.example/lib/python2.7/site-packages/django/http/__init__.py", line 2, in <module>
    from django.http.request import (HttpRequest, QueryDict, UnreadablePostError,
  File "/home/bitnami/Sites/env.example/lib/python2.7/site-packages/django/http/request.py", line 8, in <module>
    from io import BytesIO
  File "/opt/bitnami/python/lib/python2.7/io.py", line 60, in <module>
    import _io
ImportError: /home/bitnami/Sites/env.example/lib/python2.7/lib-dynload/_io.so: undefined symbol: PyUnicodeUCS2_AsEncodedString 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T13:42:25.523

你能先执行以下吗？

`. /opt/bitnami/scripts/setenv.sh`（注意点和脚本路径之间的空格）。这将在 BitNami 环境中加载库。

# c - C - 反映二维数组中的值

> ID：16182070
> 
> 赞同：3
> 
> 时间：2013-04-24T01:49:45.493
> 
> 标签：c, multidimensional-array

我在 C 中处理的一个简短的任务有点麻烦。我有一个二维数组，如下所示：

```
0 5 5 5
0 0 5 5
0 0 0 5
0 0 0 0 
```

我想在对角线上反映 5，所以它看起来像这样：

```
0 0 0 0
5 0 0 0
5 5 0 0
5 5 5 0 
```

这就是我所拥有的：

```
//reflect the 5's
for(i = 0; i < arraySize; i++) {
    for (j = 0; j < arraySize; j++) {
        int temp = array[i][j];
        array[i][j] = array[j][i];
        array[j][i] = temp;
    }
} 
```

它没有反映 5，当我在发生这种情况后打印出数组时，它看起来与我的初始化数组相同。我觉得这是我应该做的，但我做错了吗？感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:53:32.440

交换值时，您必须在循环中途停止，否则您会将它们交换回您开始的位置！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T01:55:10.420

正如我在评论中提到的那样，由于您正在迭代整个矩阵，因此您确实在反射，但是当您低于对角线时，您会将`5`s 反射回其原始位置。内部循环应该从开始，`i+1`这将使您保持在对角线之上：

```
for (j = i+1; j < arraySize; j++) {
         ^^^ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T01:54:27.447

正如评论者指出的那样，当您在对角线下方进行迭代时，您正在反思，撤消您刚刚进行的交换。

你的阵列总是方形的吗？如果是这样，这应该适合你：

```
for(i = 0; i < arraySize; i++) {
    for (j = i+1; j < arraySize; j++) { 
```

这很有效，因为`i`它还告诉我们应该沿对角线开始多远。我们添加`+1`，因为我们不需要交换对角线的中间值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T01:53:47.713

一般：swap(a[i][j], a[j][i]) for j=i+1..arrSize

```
//reflect the 5's
for(i = 0; i < arraySize; i++) {
    for (j = i+1; j < arraySize; j++) {
        int temp = array[i][j];
        array[i][j] = array[j][i];
        array[j][i] = temp;
    }
} 
```

# mysql - Perl 脚本使用 DBI 模块访问不同安装的 MySQL

> ID：16182081
> 
> 赞同：0
> 
> 时间：2013-04-24T01:50:36.620
> 
> 标签：mysql, perl, dbi

所以我使用 Perl DBI 模块来访问服务器 linux 机器上的 MySQL 数据库，我没有 root 访问权限。管理员安装了 MySQL 并为我创建了一个数据库。我可以编写一个 Perl 脚本来访问数据库就好了。

然后我在本地空间中安装了 MySQL 并更改环境变量以使用本地安装的 mysql 可执行文件。我可以从命令行访问数据库。但是在我相应地更改 Perl 脚本并执行它之后，我得到了“拒绝访问”错误。而且似乎 Perl 脚本仍然尝试使用管理员安装的 mysql 来访问。

那么我该如何解决呢？

这是我的连接方式：

```
my $conn = DBI->connect("dbi:mysql:dbname:localhost:3366", "root", "root")
    or die DBI::errstr; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:45:06.283

我找到了解决方案，所以我会回答我自己的问题。

我所做的是重新编译和安装 perl DBD-mysql 模块，并给它本地安装的 mysql 的路径。

```
perl Makefile.PL PREFIX=/path/to/perl/local/lib 
             --mysql_config=/path/to/locally_installed_mysql/bin/mysql_config 
```

参考： [http ://cpansearch.perl.org/src/RUDY/DBD-mysql-2.9008/INSTALL.html](http://cpansearch.perl.org/src/RUDY/DBD-mysql-2.9008/INSTALL.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T05:25:01.650

通常在数据库连接字符串、密码字符串和 sql 查询中使用单引号，因为这些可能会给您带来双引号错误。因为双引号用于插值。

所以请尝试使用单引号。

```
my $conn = DBI->connect('dbi:mysql:dbname:localhost:3366', 'root', 'root') or die "..." 
```

正如您所说，我假设您可以通过命令行（手动）使用具有密码的 root 用户访问 mysql。

# php - 警告：mysql_result()：无法跳转到 MySQL 结果索引 5 上的第 0 行

> ID：16182082
> 
> 赞同：-1
> 
> 时间：2013-04-24T01:50:46.620
> 
> 标签：php, mysql, database

在我正在创建的社交网络大学项目中出现此错误。

> 警告：mysql_result()：无法跳转到第 63 行 /customers/2/f/b/somesrandomsite.com/httpd.www/rnfunctions.php 中 MySQL 结果索引 5 的第 0 行

这是有问题的PHP代码...

```
function showProfile($user) {

    $UserID = mysql_result(mysql_query("SELECT `user_id` FROM `rnprofiles` WHERE `user` = '$user'"), 0) or die(mysql_error());        
    $Query = mysql_query("SELECT * FROM `images` WHERE `user_id` = '$UserID'") or die(mysql_error());
    while ($ImageData = mysql_fetch_assoc($Query)) {

        echo '<p><a title="'.$user.'" class="fancybox" data-fancybox-group="gallery" href="'.$ImageData['location'].'"><img src="'.$ImageData['location'].'" border="" align="left" height="150" width="150" alt=""/></a></p>';// Display each image belonging to the user
    }

    $result = queryMysql("SELECT * FROM rnprofiles WHERE user='$user'") or die(mysql_error());

    if (mysql_num_rows($result))
    {
        $row = mysql_fetch_row($result);
        echo stripslashes($row[1]) . "<br clear=left /><br />";
    }

} 
```

如果有人有任何想法，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T02:27:12.290

每当你会使用`$row = mysql_fetch_row($result);`

因为`$result`只存储资源ID。因此，每次您将在循环中迭代它时，它都会转到另一行（如果存在）。

要获取所有数据，您必须使用 while 循环，如下所示

```
while($row = mysql_fetch_row($result))
{
  //do your operation
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T04:19:42.527

> 对 mysql_result() 的调用不应与对处理结果集的其他函数的调用混合。

[参考这里](http://www.php.net/manual/en/function.mysql-result.php#)

所以，改变

```
$UserID = mysql_result(mysql_query("SELECT `user_id` FROM `rnprofiles` WHERE `user` = '$user'"), 0) or die(mysql_error()); 
```

对此

```
$result=mysql_query("SELECT `user_id` FROM `rnprofiles` WHERE `user` = '$user'") or die(mysql_error());
$UserID = mysql_result($result,0); 
```

此外，还有语法错误。更改`queryMysql`为`mysql_query`

# ios - 在 Objective-C 中将值从一个 ViewController 传递到另一个 ViewController

> ID：16182084
> 
> 赞同：1
> 
> 时间：2013-04-24T01:50:58.433
> 
> 标签：ios, objective-c, uiviewcontroller

我正在尝试将`NSString`（`message`）从`ViewController`（发送者）传递给`MyViewController`（接收者）。

我创建了一个`MyViewController`in `ViewController`called实例`testViewContoller`，通过该实例我`NSString`使用以下`setTitle:`方法发送：

```
MyViewController *testViewController = [[MyViewController alloc] init];
[testViewController setTitle:message]; 
```

这是`MyViewController.h`：

```
- (void)setTitle:(NSString*)title; 
```

这是`MyViewController.m`：

```
- (void)setTitle:(NSString*)title {

_testField.text = title;

} 
```

我不完全确定为什么这不起作用，但我认为这与调用`viewDidLoad`之前的加载有关`setTitle:`。

您能提供的任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T03:14:13.197

这基本上与内存分配给`_testField`. 如果您以编程方式创建`_testField`in`viewDidLoad`

```
MyViewController *testViewController = [[MyViewController alloc] init];
testViewController.testFieldText = message; 
```

这两行将无济于事，因为内存尚未分配给`_testField so the text cannot come up.`即使您在情节提要板上创建它并在方法中分配字符串

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
    {

            SecondViewController *obj = segue.destinationViewController;
            [obj setTitle:@"New Title"];
    } 
```

这也无济于事，因为再次没有分配内存。这个问题的简单解决方案是：

1.  `MyViewController`在设置`_testField`例如之前访问视图属性：

    ```
    MyViewController    *obj = [[MyViewController alloc] init];
    [self.navigationController pushViewController:obj animated:YES];
    [obj setTitle:@"New Title"]; 
    ```

2.  将字符串设置在 a`@property`中`MyViewController`，并将字符串从属性重新分配给`_testField`。

是的，`setTitle`是 的一个属性`UIViewController`，如果您自定义它将与默认属性混淆。安全起见... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:05:55.040

在哪里`_testField`创建？如果它是 in `viewDidLoad`，那么它就是`nil`当你调用 时`setTitle`，这意味着它是一个无操作。 `viewDidLoad`当视图添加到窗口时调用，这意味着如果您只是调用`init`视图控制器`viewDidLoad`可能永远不会被调用。

我会在其上定义一个属性，`MyViewController`即所需的字段文本，然后`_testField.text = title`在`viewDidLoad`：

```
MyViewController *testViewController = [[MyViewController alloc] init];
testViewController.testFieldText = message;

- (void)viewDidLoad {
     [super viewDidLoad];

     // do something to initialize _testField here

     _testField.text = title;
} 
```

另请注意，`UIViewController`已经有一个名为的属性`title`，并且覆盖`setTitle:`可能会产生您没有预料到的副作用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-11-02T11:35:20.913

在第一个 ViewController 中，您使用了以下内容

```
SecondViewcontroller *MyViewController = [[self storyboard] instantiateViewControllerWithIdentifier:@"SecondViewcontroller"];
MyViewController.Title = @"Welcome";
[self presentViewController:MyViewController animated:YES completion:Nil]; 
```

在 secondViewcontroller 中使用以下

要编辑的 secondViewcontroller.h 文件

```
@interface SecondViewcontroller : UIViewController
    @property (strong, nonatomic) NSString *Title;
@end 
```

然后将 Title 值打印到 secondviewcontroller

# css - 如何创建多个图像按钮并让它们适用于所有显示器分辨率？

> ID：16182088
> 
> 赞同：0
> 
> 时间：2013-04-24T01:51:28.407
> 
> 标签：css, image, button, resolution, monitor

好的，这就是我目前的网页：j sfiddle(dot)net/gTF9y/4/

这只是一张图片，带有 css 代码，可以使一张图片适应不同的显示器分辨率。

我想要做的是现在有完全相同的网页外观，但是在同一位置有 12 个单独的图像而不是 1 个大图像，这样我就可以使这些图像本质上是可以点击的“按钮”转到不同的网页。

我想保留图像调整到不同显示器分辨率的功能。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T02:07:27.360

这是我如何将页面划分为 4x3 网格的示例：

```
<html>
    <body>
        <div>1</div><div>2</div><div>3</div><div>4</div>
        <div>1</div><div>2</div><div>3</div><div>4</div>
        <div>1</div><div>2</div><div>3</div><div>4</div>
    </body>
</html> 
```

```
html, body
{
    height: 99%;
    margin: 0;
}

div
{
    display: inline-block;
    height: 33%;
    width: 25%;
}

div img
{
    height: 100;
    width: 100%;
} 
```

制作这个：

![](https://i.stack.imgur.com/l1HLk.png)

现在您需要做的就是`<img src="something.png">`在每个`<div></div>`.

这是一个添加了所有图像的[JSFiddle](http://jsfiddle.net/ZsdAr/7/show/)（[编辑）。](http://jsfiddle.net/ZsdAr/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:14:45.590

您可以使用 css 创建 3x3 的图像网格。

[http://jsfiddle.net/gTF9y/1/](http://jsfiddle.net/gTF9y/1/)

```
.block { width:33.33333%; float:left; display:block; }
.block img {display:block; max-width:100%; width:100%; } 
```

如果您真的想在页面加载时扭曲图像，您可以使用 jQuery 将图像设置为窗口高度和宽度的 1/3。抛出 .resize() 并在加载后响应浏览器中的更改。

[http://jsfiddle.net/gTF9y/3/](http://jsfiddle.net/gTF9y/3/)

# sql - 表正在变异，触发器/函数可能看不到它（阻止平均成绩降至 2.5 以下）

> ID：16182089
> 
> 赞同：14
> 
> 时间：2013-04-24T01:51:34.640
> 
> 标签：sql, oracle, triggers

这是问题所在：

创建一个触发器，以防止对录取关系进行任何更改，从而将任何特定班级的总体平均成绩降至 2.5 以下。注意：此触发器并非旨在解决任何给定学生的平均 GPA，而是应解决特定班级中分配的所有成绩的平均成绩。

这是架构：

```
Student-schema =(studentnum, name, standing, gpa, major)
Class-schema = (schedulenum, semester, department, classnum, days, time, place, enrollment)
Instructor-schema = (name, department, office)
Teaches-schema = (name, schedulenum, semester)
Taking-schema = (studentnum, schedulenum, semester, grade) 
```

我在这些触发器上度过了一段糟糕的时光，但这是我尝试完成这项工作的尝试：

```
CREATE OR REPLACE TRIGGER stopChange
    AFTER UPDATE OR INSERT OR DELETE ON taking
    REFERENCING OLD AS old
    NEW AS new
    FOR EACH ROW
DECLARE

grd_avg taking.grade%TYPE;

BEGIN
    SELECT AVG(grade)
    INTO grd_avg
    FROM taking
    WHERE studentnum = :new.studentnum
    AND schedulenum = :new.schedulenum
    AND semester = :new.semester;

    IF grd_avg < 2.5 THEN
        UPDATE taking
        SET grade = :old.grade
        WHERE studentnum = :old.studentnum
        AND schedulenum = :old.schedulenum
        AND semester = :old.semester;
    END IF;

END;   
/ 
```

我显然做错了，因为当我去更新或删除一个元组时，我得到了错误：

```
ERROR at line 1:
ORA-04091: table TAKING is mutating, trigger/function may not see it
ORA-06512: at "STOPCHANGE", line 6
ORA-04088: error during execution of trigger 'STOPCHANGE' 
```

有什么建议吗？我正在使用甲骨文。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-24T12:58:27.533

首先，您需要阅读有关触发器、变异表错误和复合触发器的信息：http: [//docs.oracle.com/cd/E11882_01/appdev.112/e25519/triggers.htm#LNPLS2005](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/triggers.htm#LNPLS2005)

您的触发器是 AFTER UPDATE OR INSERT OR DELETE。意味着如果您在此表上运行 UPDATE OR INSERT OR DELETE 语句，触发器将触发。但是您正尝试在触发器中再次更新同一个表，这是 compl。错误的。这就是您收到错误的原因。您不能修改触发器正在触发的同一个表。触发器的目的是在您的情况下更新、插入或删除表时自动触发。你需要的是一些程序，而不是触发器。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-07-12T11:16:10.190

在里面使用这个语句`DECLARE`，它会起作用。

```
pragma autonomous_transaction; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-24T02:27:18.757

我认为您可以通过将其重写为*前*触发器而不是*后*触发器来解决此问题。但是，这对于插入和删除可能有点复杂。这个想法是：

```
CREATE OR REPLACE TRIGGER stopChange
    BEFORE UPDATE OR INSERT OR DELETE ON taking
    REFERENCING OLD AS old
    NEW AS new
    FOR EACH ROW
DECLARE

grd_avg taking.grade%TYPE;

BEGIN
    SELECT (SUM(grade) - oldgrade + new.grade) / count(*)
    INTO grd_avg
    FROM taking
    WHERE studentnum = :new.studentnum
    AND schedulenum = :new.schedulenum
    AND semester = :new.semester;

    IF grd_avg < 2.5 THEN
        new.grade = old.grade
    END IF;
END; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-25T19:35:09.810

我遇到了同样的问题，我注意到如果您在同一张桌子上进行选择，您可能会/将会遇到这个问题。您可以删除**FOR EACH ROW** 或使用**:New**中的数据进行计算（如果可能），然后进行更新。

在您的情况下，使用单独的表格来获得每学期的 avg_grade 会更有意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-04T09:36:52.283

即使我们在我们的项目中也遇到了同样的问题。但是在几个oracle论坛搜索后，我们找到了以下解决方案。

1）将旧/新列数据保存在临时表中，作为行级触发器的一部分。2）编写语句级触发器，使用步骤1中保存的数据。

这将解决我认为的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-26T14:19:47.140

如果您想通过连接其他表（TABLE_ADDRESS）来检索其他数据。这是我的解决方案。

```
 CREATE OR REPLACE TRIGGER TRIGGER_TABLE_ACTIVITIES AFTER  INSERT ON TABLE_NAME
     FOR EACH ROW
    DECLARE 
    V_ADDRESS VARCHAR2(100); 
    BEGIN 

            SELECT A.ADDRESS INTO V_ADDRESS 
            FROM TABLE_ADDRESS A
            WHERE A.ADDRESSID = :NEW.ADDRESSID
            ;
            INSERT INTO TABLE_ACTIVITIES(
                            NAME, ADDRESS)
            VALUES(:NEW.NAME, V_ADDRESS);
    END;
    / 
```

# python - 使用 eyeD3 从 Python 中的 mp3 文件中检索歌词

> ID：16182094
> 
> 赞同：3
> 
> 时间：2013-04-24T01:52:38.357
> 
> 标签：python, mp3, mutagen, eyed3

我目前正在尝试使用 Python 及其 eyeD3 库从 mp3 文件中提取歌词。歌词已经嵌入到 mp3 文件中（通过：MusicBee）。我正在尝试使用 eyeD3 来返回歌词。我不知道该怎么做。我在网上进行了广泛的搜索，发现的只是显示如何设置歌词的教程。我只想从文件中读取它们。这是我当前的代码：

```
track = eyed3.load(path)
tag = track.tag
artist = tag.artist
lyrics = tag.lyrics 
```

**艺术家**正确返回艺术家的姓名，但**歌词**返回以下内容：

```
<eyed3.id3.tag.LyricsAccessor object at 0x27402d0> 
```

我怎样才能返回嵌入到 mp3 中的原始文本歌词？这可能吗？

非常感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T02:34:56.103

看起来那是一个迭代器。尝试

```
tag.lyrics[0] 
```

或者

```
for lyric in tag.lyrics:
  print lyric 
```

最后的手段打印对象目录并寻找有用的功能

```
print dir(tag.lyrics) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-02T09:51:52.067

```
u"".join([i.text for i in tag.lyrics]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-29T06:25:10.330

这对我有用：

```
tag.lyrics[0].text 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T04:30:04.590

DonJuma，Python 告诉你：

```
<iterator object at hex_location> 
```

您可以尝试以下方法，但在字符串上失败

```
hasattr(myObj, '__iter__') 
```

user:mindu[在这里](https://stackoverflow.com/questions/1952464/in-python-how-do-i-determine-if-an-object-is-iterable)解释说，您可以编写一个健壮的函数来检查

```
try:
    some_object_iterator = iter(some_object)
except TypeError, te:
    print some_object, 'is not iterable' 
```

**但！！！** 这不是 Pythonic。Python 相信[Duck Typing](http://en.wikipedia.org/wiki/Duck_typing#In_Python "鸭打字")，它基本上说：“如果它看起来像鸭子，叫起来像鸭子，那它一定是鸭子。” 有关更多信息，请参阅链接。

# ruby-on-rails-3 - ajax：远程提交表单时未调用成功 rails3

> ID：16182095
> 
> 赞同：0
> 
> 时间：2013-04-24T01:52:41.323
> 
> 标签：ruby-on-rails-3, jquery

基本上，我想提交一个创建新课程表单并使用 JQuery 处理响应。我的表格喜欢

```
<div id="create_coursem">
  <%= form_tag({:controller => "coursem", :action => "create"}, :id => "check_coursem_form", :method => "post", :remote => true) do %>
      <p>
      <b> <%= label_tag(:name, "Name:") %> </b>
      <%= text_field_tag(:name) %>
      </p>
      <p>
      <b> <%= label_tag(:department, "Department:") %> </b>
      <%= select_tag "department", @result.html_safe %>
      </p>
      <%= submit_tag("Create") %>

  <% end %>

</div> 
```

在我的控制器中，我有

```
 def create
    @coursem = Coursem.createCoursemByUser(params[:name], params[:department])
    @errCode = @coursem
    if @coursem.class != Fixnum
      @errCode = 1
    end
    @dic = {:errCode => @errCode, :coursem => @coursem}
    respond_to do |format|
      format.json { render json: @dic}
    end
  end 
```

响应状态为200，表示成功返回了一个json。在我的 JS 文件中，我有

```
$(document).ready(function() {
    panelHandler();
    //showOverview();
    showResources();
    resourceHandler();
    calendarChangeMonth();
    subscribeHandler();

    shownewresourceform();

    eventinfo();
    closeeventbox();
    showneweventform();
    colorrecentevents();
    check_coursem();
})
    function check_coursem() {
        $("form#check_coursem_form").on('ajax:beforeSend', function(xhr, settings) {alert("hello");})
                                .on('ajax:success',    function(data, status, xhr) {alert("hello");})
                                .on('ajax:complete', function(xhr, status) {alert("hello");})
                                .on('ajax:error', function(xhr, status, error) {alert("hello");});
    } 
```

但是当我单击创建按钮时，它只返回创建控制器生成的 json，不显示任何警报。有谁知道原因吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:02:46.517

也许它会尝试将响应解析为 javascript 响应，而不是 json 响应。

尝试这个：

```
form_tag({:controller => "coursem", :action => "create"}, :id => "check_coursem_form", :method => "post", :remote => true, :data => { :type => 'json' }) do %> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T03:55:25.563

我没有大量使用 ajax，但我从未见过像这样格式化的请求...您是否尝试过在[文档](http://api.jquery.com/jQuery.ajax/)中实现类似的东西？

```
// Assign handlers immediately after making the request,
// and remember the jqxhr object for this request
var jqxhr = $.ajax( "example.php" )
    .done(function() { alert("success"); })
    .fail(function() { alert("error"); })
    .always(function() { alert("complete"); });

// perform other work here ...

// Set another completion function for the request above
jqxhr.always(function() { alert("second complete"); }); 
```

# heroku - heroku 非 www 重定向到 www 域的网络解决方案

> ID：16182098
> 
> 赞同：5
> 
> 时间：2013-04-24T01:52:47.100
> 
> 标签：heroku, dns, subdomain, http-redirect, no-www

这是我关于将网络解决方案上的域重定向到 Heroku 上托管的 web 应用程序的一个非常具体的问题。我已经进行了设置，以便在 CNAME 记录中，Allias www 指的是 heroku 中的主机名。问题是，目前如果我输入没有 www 的网址，它不会呈现我的页面。有人可以帮我吗？我已经非常努力地想弄清楚这一点。希望这篇文章将来也能帮助其他人。

![CNAME 重定向屏幕截图。 没有 www 别名就无法工作](https://i.stack.imgur.com/YhSc3.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-11-14T16:07:59.513

**将 yourdomain.com 指向 www.yourdomain.com 的网络解决方案。就是这样。**

在客户经理中，选择我的域名

```
Select the domain name that you want to manage 
```

在绿色框中，选择更改域点的位置

```
Select Advanced DNS, then Continue 
```

首先，通过选择编辑 A 记录来编辑 A 记录

```
For the "@ none" enter the following IP address 205.178.189.129, 
clear (delete) the records for the "www" and "* (All others)", 
then select Continue.
Sometimes this takes a few moments for the first step to take effect. 
```

其次，通过选择编辑 CNAME 记录来编辑主机别名（CNAME 记录）

> 在别名栏中输入“www”
> 
> 将 TTL 设置为 7200，但在同一行，在 Other Host 部分输入博客服务提供的名称服务器 [IE FOLLOW THE HEROKU INSTRUCTIONS NOW www --> yourapp.herokuapp.com (Cedar Stack)]

选择继续

现在等待并使用以下终端命令检查域：

主机 domain.com 主机 www.domain.com

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-13T13:21:11.787

如果在这种情况下，您在编辑 C 名称记录时收到此错误：

```
An A record already exists for the entered Alias 
```

注销，然后重新登录。

这是网络解决方案客户支持提供的解决方案，除了@railrailrail 的回答之外，它还为我工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:04:19.000

您需要将您的顶级域转发到您的`www`子域。在这里更详细地解释：

*   [https://stackoverflow.com/a/16041655/95741](https://stackoverflow.com/a/16041655/95741)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-04T21:59:20.013

由于网络解决方案 205.178.189.129 重新路由技巧似乎不再起作用，您将不得不寻找第三方来重定向您的顶级域。

这里有几个选项：

*   DNSimple [http://blog.dnsimple.com/2011/11/introducing-alias-record/](http://blog.dnsimple.com/2011/11/introducing-alias-record/)
*   DNS 变得简单[http://www.dnsmadeeasy.com/aname-records/](http://www.dnsmadeeasy.com/aname-records/)
*   如果您将 Google Apps 用于您的电子邮件，您可以让 Google Apps 重定向 apex 域。[使用带有 Heroku 和 CNAME 的电子邮件](https://stackoverflow.com/questions/11693394/using-email-w-heroku-and-cname/20115583#20115583)
*   如果您有可用的网络服务器，您可以使用[Nginx](https://serverfault.com/questions/500866/nginx-redirecting-only-www-subdomain-to-main-domain)、[Apache](https://stackoverflow.com/questions/1100343/apache-redirect-from-non-www-to-www)或您最喜欢的网络服务器进行自定义重定向。

# actionscript-3 - 我在记分板上做错了什么

> ID：16182099
> 
> 赞同：-3
> 
> 时间：2013-04-24T01:52:57.583
> 
> 标签：actionscript-3

嗨，我是一个非常初学者，所以这对某些人来说似乎很愚蠢，但我正在努力寻找答案。我为配对游戏制作了一个简单的记分牌。您的得分为 50 分，每次选择不正确都会丢分。但是我的分数始终保持在 50。感谢您的帮助。

```
package 
{
//importing classes
import flash.display.*;
import flash.events.MouseEvent;
import flash.utils.Timer;
import flash.events.TimerEvent;
import flash.events.*;
import flash.text.TextField;

//end of importing classes
public class Main extends Sprite
{
private var pickedTiles:Array = new Array();
private const NUMBER_OF_TILES:uint=20;
private var pauseGame:Timer;
private var canPick:Boolean=true;
public var score:int;
public var scoreTextField:TextField;
public static var win: int;
public static var score: int;
{

    public function Main()
    {
        trace("Welcome to Aaron Collins' Beard Concentration");
        //variable and constants
        const NUMBER_OF_TILES:uint=20;
        var tiles:Array=new Array();

        const TILES_PER_ROW: uint=5;

        var tile: tile_movieclip;
        //end of variable and constants

        //tiles creation loop
        for (var i: uint=0; i<NUMBER_OF_TILES; i++)

        {
            tiles.push(Math.floor(i/2));
        }
        trace("My tiles: "+tiles);
        // end of tiles creation loop
        //shuffling loop
        var swap,tmp:uint;
        for (i=NUMBER_OF_TILES-1; i>0; i--)
        {
            swap=Math.floor(Math.random()*i);
            tmp=tiles[i];
            tiles[i]=tiles[swap];
            tiles [swap]=tmp;
        }

        trace ("My shuffled tiles: "+tiles);

        win = 0;
        score = 50;
        traceScore();

        //end of shuffling loop

        //tile placing loop
        for (var i:uint=0; i<NUMBER_OF_TILES; i++)
             {
                 tile=new tile_movieclip();
                 addChild(tile);
                 tile.cardType=tiles[i];
                 tile.x=5+(tile.width+5)*(i%TILES_PER_ROW);
                 tile.y=5+(tile.height+5)*       (Math.floor(i/TILES_PER_ROW));
                 tile.gotoAndStop(NUMBER_OF_TILES+1);
                 tile.buttonMode = true;
            tile.addEventListener(MouseEvent.CLICK,onTileClicked); 
             }
             //end of placing loop
    }
    private function onTileClicked(e:MouseEvent)
    {
        if(canPick)

        {
        var picked:tile_movieclip=e.currentTarget as tile_movieclip;
            trace ("you picked a "+e.currentTarget.cardType);

        //Checking to see if the current tile has already been picked
            if (pickedTiles.indexOf(picked)==-1)
            {
                pickedTiles.push(picked);
                picked.gotoAndStop(picked.cardType+1);
            }
            //end checking if current tile has already been picked
            //checking if we picked two tiles

            if(pickedTiles.length==2)
            {
                canPick=false;
                pauseGame=new Timer(1000,1);
                pauseGame.start();
                if (pickedTiles[0].cardType==pickedTiles[1].cardType)
                    {
                        //tiles match
                        trace ("tiles match!!")

                        gameOver();

                        getPoints();

                        traceScore();

                            pauseGame.addEventListener(TimerEvent.TIMER_COMPLETE,removeTiles);

                           //pickedTiles[0].removeEventListener(MouseEvent.CLICK, onTileClicked);
                        //pickedTiles[1].removeEventListener(MouseEvent.CLICK, onTileClicked);
                        //removeChild(pickedTiles[0]);
                        //removeChild(pickedTiles[1]);

                    }
                    else
                    {
                        //tiles do not match
                        trace ("tiles do not match")

                        gameOver();

                        losePoints();

                        traceScore();

                        pauseGame.addEventListener(TimerEvent.TIMER_COMPLETE,resetTiles);

                        //pickedTiles[0].gotoAndStop(NUMBER_OF_TILES/2+1);
                        //pickedTiles[1].gotoAndStop(NUMBER_OF_TILES/2+1);

                    }
                    //pickedTiles = new Array();
                    //end checking if we picked 2 tiles
                }
        }
            }

            private function resetTiles(e:TimerEvent)
        {
            pauseGame.removeEventListener(TimerEvent.TIMER_COMPLETE, resetTiles);
            pickedTiles[0]. gotoAndStop(NUMBER_OF_TILES/2+1);
            pickedTiles[1]. gotoAndStop(NUMBER_OF_TILES/2+1);
            pickedTiles = new Array();
            canPick = true;

        }
            private function removeTiles(e:TimerEvent)
        {
            pauseGame.removeEventListener(TimerEvent.TIMER_COMPLETE, removeTiles);
            pickedTiles[0].removeEventListener(MouseEvent.CLICK,onTileClicked);
            pickedTiles[1].removeEventListener(MouseEvent.CLICK,onTileClicked);
            removeChild(pickedTiles[0]);
            removeChild(pickedTiles[1]);
            pickedTiles = new Array();
            canPick = true;
        }

            public function getPoints()
        {
            score + 5;
            win + 1;
        }

            public function losePoints()
        {
            score - 5;
        }

            public static function traceScore()
        {
            trace("Your Score Is " + score + "");
        }

            public function gameOver()
        {
                if (score == 0)
            {
                MovieClip(root).gotoAndStop("GameOver")
            }
                if (win == 10)
            {
                MovieClip(root).gotoAndStop("YouWin")
            }
        }

}
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T02:00:38.110

这是因为您没有更新代码中的 score 变量，请查看以下方法：

```
 public function getPoints() {
        score + 5;
        win + 1;
    }

    public function losePoints() {
        score - 5;
    } 
```

它们应如下所示：

```
 public function getPoints() {
        score += 5;
        win += 1;
    }

    public function losePoints() {
        score -= 5;
    } 
```

# python - 如何将 mysql 中的 datetime.date 转换为 unix 时间戳

> ID：16182106
> 
> 赞同：0
> 
> 时间：2013-04-24T01:53:53.040
> 
> 标签：python, mysql, datetime

花了几个小时试图解决这个问题，但没有成功。

我已经从 MySQL 导入了一些“日期”（不是日期时间）字段到 python 列表中。如果我打印列表，值将显示为：

```
my_list = [[100, datetime.date(2013, 3, 11)], [101, datetime.date(2013, 4, 13,)],[102,datetime.date(2013, 4, 13)] 
```

（...其中 101、102、103 是我对应的 event_id，你可以忽略它们）

我发现以下内容将使转换正确：

```
unix_time = time.mktime(datetime.date(2009,2,17).timetuple()) 
```

但是，如果我尝试执行以下操作：

```
for x in my_list:
    x[1] = time.mktime(datetime.date(x[1]).timetuple()) 
```

不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T02:03:39.200

第一个解决方案很丑陋，新编辑：

```
for x in my_list:
  x[1] = time.mktime(x[1].timetuple()) 
```

应该给你你的清单。无需将 datetime.date 包装在另一个 datetime.date

# c++ - 为 LBP 人脸识别器格式化图像

> ID：16182108
> 
> 赞同：0
> 
> 时间：2013-04-24T01:54:13.053
> 
> 标签：c++, opencv, image-processing, face-recognition

我正在从事一个需要识别人类的监视项目。目前我已经创建了一个使用 LBP 人脸检测器收集人脸数据的界面。这是我在训练阶段所做的：

1.  人需要坐在摄像机前。
2.  程序检测他/她面部的 ROI
3.  程序按原样保存投资回报率。

该程序为同一个人制作数百张这样的图像。我想知道在训练识别器之前是否需要对保存的 ROI 图像进行预处理或按原样提供？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:11:53.177

您可以这样做，保持原样或[标准化](http://en.wikipedia.org/wiki/Normalization_%28image_processing%29)图像。

您应该通过标准化找到更好的结果，但是您还需要标准化您的测试视频

# c - 释放缓冲区时出错

> ID：16182114
> 
> 赞同：0
> 
> 时间：2013-04-24T01:54:42.933
> 
> 标签：c, winapi

我的代码：

```
wchar_t buffer[64];

wsprintf(buffer, L"%d, %d, %d", x, y, z);
SendMessage(hwndEdit, WM_SETTEXT, NULL, (LPARAM)buffer);

free(buffer); // <-- crashes 
```

该代码在不释放缓冲区时工作正常，但是在使用 free(buffer) 时会崩溃。

这条线有必要吗，如果没有，为什么不呢？用完后不需要释放内存吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T01:55:39.313

分配在堆栈上，而`buffer`不是在堆上，您不需要`free`自己分配。

如果`buffer`是使用`malloc`（在 C 中）或`new`（在 C++ 中）动态创建的，则需要`free`（在 C 中）或`delete`（在 C++ 中）。动态数组是在堆上创建的。静态数组（大小在编译时已知）在堆栈上分配。

# c - 注意：'point_forward' 的先前隐式声明在这里

> ID：16182115
> 
> 赞同：13
> 
> 时间：2013-04-24T01:54:54.093
> 
> 标签：c

我似乎无法正确编译这个递归函数，我不知道为什么。代码如下：

```
void point_forward (mem_ptr m) {
  mem_ptr temp;
  temp = m->next;
  if (temp->next != NULL) point_forward(temp);
  m->next = temp->next;
} 
```

我的编译器返回这个：

> mm.c:134:6：警告：“point_forward”的类型冲突 [默认启用]
> mm.c:96:2：注意：“point_forward”的先前隐式声明在这里

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-24T02:05:30.033

关键在于：

> 'point_forward' 的先前**隐式声明在这里**

在第 96 行，您有：

```
point_forward(m); // where m is a mem_ptr; 
```

由于编译器还没有看到 的函数声明`point_forward(m)`，它“隐式定义”（即假设）一个返回 int 的函数：

```
int point_forward(mem_ptr m); 
```

这与后面的定义冲突：

```
void point_forward (mem_ptr m) { 
```

* * *

要解决此问题，您可以：

1.  在第 96 行之前的某处放置一个显式声明：`void point_forward(mem_ptr m);`这将告诉编译器在第 96 行看到它时如何处理`point_forward()`，即使它还没有看到函数实现。

2.  或者，在第 96 行之上定义整个函数（将函数定义从第 134 行移至第 96 行之上）。

这里有[更多关于声明函数](http://opencbp.sourceforge.net/en_US.ISO8859-1/books/opencbook/func.prototypes.html)的内容。

一般来说，对于风格，我会：

*   如果您不想`point_forward()`在任何其他 C 文件中使用，请完整定义它：

    `static void point_forward(mem_ptr m) { ..function body goes here.. }`

    在源文件的顶部。

*   如果要`point_forward()`在其他 C 文件中使用，请提出前向声明：

    ```
    void point_forward(mem_ptr m); 
    ```

    在要包含的其他文件的头文件中。

# android - 自定义 Android 图像裁剪

> ID：16182120
> 
> 赞同：18
> 
> 时间：2013-04-24T01:55:29.463
> 
> 标签：android, crop

我只想分享我写的这段代码。我尝试搜索自定义裁剪活动，但尽管存在自定义裁剪或徒手裁剪活动问题，但其中大多数会导致默认的“com.android.camera.action.CROP”。反正我自己做了一个，希望对大家有帮助。

```
public class CropView extends ImageView {

    Paint paint = new Paint();
    private int initial_size = 300;
    private static Point leftTop, rightBottom, center, previous;

    private static final int DRAG= 0;
    private static final int LEFT= 1;
    private static final int TOP= 2;
    private static final int RIGHT= 3;
    private static final int BOTTOM= 4;

    private int imageScaledWidth,imageScaledHeight;
    // Adding parent class constructors   
    public CropView(Context context) {
        super(context);
        initCropView();
    }

    public CropView(Context context, AttributeSet attrs) {
        super(context, attrs, 0);
        initCropView();
    }

    public CropView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        initCropView();
    }

    @Override
    protected void onDraw(Canvas canvas)
    {
        super.onDraw(canvas);
        if(leftTop.equals(0, 0))
            resetPoints();
        canvas.drawRect(leftTop.x, leftTop.y, rightBottom.x, rightBottom.y, paint);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        int eventaction = event.getAction();
        switch (eventaction) { 
            case MotionEvent.ACTION_DOWN:
                previous.set((int)event.getX(), (int)event.getY());
                break; 
            case MotionEvent.ACTION_MOVE: 
                if(isActionInsideRectangle(event.getX(), event.getY())) {
                    adjustRectangle((int)event.getX(), (int)event.getY());
                    invalidate(); // redraw rectangle
                    previous.set((int)event.getX(), (int)event.getY());
                }
                break; 
            case MotionEvent.ACTION_UP: 
                previous = new Point();
                break;
        }         
        return true;
    }

    private void initCropView() {
        paint.setColor(Color.YELLOW);
        paint.setStyle(Style.STROKE);
        paint.setStrokeWidth(5);  
        leftTop = new Point();
        rightBottom = new Point();
        center = new Point();
        previous = new Point();
    }

    public void resetPoints() {
        center.set(getWidth()/2, getHeight()/2);
        leftTop.set((getWidth()-initial_size)/2,(getHeight()-initial_size)/2);
        rightBottom.set(leftTop.x+initial_size, leftTop.y+initial_size);
    }

    private static boolean isActionInsideRectangle(float x, float y) {
        int buffer = 10;
        return (x>=(leftTop.x-buffer)&&x<=(rightBottom.x+buffer)&& y>=(leftTop.y-buffer)&&y<=(rightBottom.y+buffer))?true:false;
    }

    private boolean isInImageRange(PointF point) {
        // Get image matrix values and place them in an array
        float[] f = new float[9];
        getImageMatrix().getValues(f);

        // Calculate the scaled dimensions
        imageScaledWidth = Math.round(getDrawable().getIntrinsicWidth() * f[Matrix.MSCALE_X]);
        imageScaledHeight = Math.round(getDrawable().getIntrinsicHeight() * f[Matrix.MSCALE_Y]);

        return (point.x>=(center.x-(imageScaledWidth/2))&&point.x<=(center.x+(imageScaledWidth/2))&&point.y>=(center.y-(imageScaledHeight/2))&&point.y<=(center.y+(imageScaledHeight/2)))?true:false;
    }

    private void adjustRectangle(int x, int y) {
        int movement;
        switch(getAffectedSide(x,y)) {
            case LEFT:
                movement = x-leftTop.x;
                if(isInImageRange(new PointF(leftTop.x+movement,leftTop.y+movement)))
                    leftTop.set(leftTop.x+movement,leftTop.y+movement);
                break;
            case TOP:
                movement = y-leftTop.y;
                if(isInImageRange(new PointF(leftTop.x+movement,leftTop.y+movement)))
                    leftTop.set(leftTop.x+movement,leftTop.y+movement);
                break;
            case RIGHT:
                movement = x-rightBottom.x;
                if(isInImageRange(new PointF(rightBottom.x+movement,rightBottom.y+movement)))
                    rightBottom.set(rightBottom.x+movement,rightBottom.y+movement);
                break;
            case BOTTOM:
                movement = y-rightBottom.y;
                if(isInImageRange(new PointF(rightBottom.x+movement,rightBottom.y+movement)))
                    rightBottom.set(rightBottom.x+movement,rightBottom.y+movement);
                break;      
            case DRAG:
                movement = x-previous.x;
                int movementY = y-previous.y;
                if(isInImageRange(new PointF(leftTop.x+movement,leftTop.y+movementY)) && isInImageRange(new PointF(rightBottom.x+movement,rightBottom.y+movementY))) {
                    leftTop.set(leftTop.x+movement,leftTop.y+movementY);
                    rightBottom.set(rightBottom.x+movement,rightBottom.y+movementY);
                }
                break;
        }
    }

    private static int getAffectedSide(float x, float y) {
        int buffer = 10;
        if(x>=(leftTop.x-buffer)&&x<=(leftTop.x+buffer))
            return LEFT;
        else if(y>=(leftTop.y-buffer)&&y<=(leftTop.y+buffer))
            return TOP;
        else if(x>=(rightBottom.x-buffer)&&x<=(rightBottom.x+buffer))
            return RIGHT;
        else if(y>=(rightBottom.y-buffer)&&y<=(rightBottom.y+buffer))
            return BOTTOM;
        else
            return DRAG;
    }

    public byte[] getCroppedImage() {
        BitmapDrawable drawable = (BitmapDrawable)getDrawable();
        float x = leftTop.x-center.x+(drawable.getBitmap().getWidth()/2);
        float y = leftTop.y-center.y+(drawable.getBitmap().getHeight()/2);
        Bitmap cropped = Bitmap.createBitmap(drawable.getBitmap(),(int)x,(int)y,(int)rightBottom.x-(int)leftTop.x,(int)rightBottom.y-(int)leftTop.y);
        ByteArrayOutputStream stream = new ByteArrayOutputStream();
        cropped.compress(Bitmap.CompressFormat.PNG, 100, stream);
        return stream.toByteArray();
    }
} 
```

我所做的是，我扩展了 ImageView 并添加了裁剪功能。它很容易使用。保存类后，只需像这样在布局中使用它。

```
 <"your package name".CropView
        android:id="@+id/image_preview"
        android:layout_width="fill_parent"
        android:layout_height="match_parent" /> 
```

就是这样！希望能帮助到你！如果您遇到任何问题，请随时询问:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T11:00:25.247

你应该试试：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setContentView(R.layout.crop_layout);

    myCropView = new CropView(this);

    Uri imageUri = getIntent().getExtras().getParcelable("path");

    b = (BitmapDrawable) BitmapDrawable.createFromPath(imageUri.getPath()); 

    myCropView.setImageURI(imageUri);
} 
```

（取自对您问题的编辑。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T10:10:36.033

谢谢thehippo ...但我已经解决了通过布局找到视图的问题

```
Uri imageUri = getIntent().getExtras().getParcelable("path");
    b = (BitmapDrawable) BitmapDrawable.createFromPath(getRealPathFromURI(imageUri));
    myCropView = (CropView) findViewById(R.id.image_preview);
    myCropView.setBackground(b); 
```

但现在我无法处理触摸事件。即使我触摸屏幕，矩形也会保持静止......

编辑：好的，我已经成功了。但是现在，矩形只在较小的区域内移动，而不是在整个图像中移动。我想这里有问题

```
private boolean isInImageRange(PointF point) {
    // Get image matrix values and place them in an array
    float[] f = new float[9];
    getImageMatrix().getValues(f);

    // Calculate the scaled dimensions
    imageScaledWidth = Math.round(getBackground().getIntrinsicWidth() * f[Matrix.MSCALE_X]);
    imageScaledHeight = Math.round(getBackground().getIntrinsicHeight() * f[Matrix.MSCALE_Y]);

    return (point.x>=(center.x-(imageScaledWidth/2))&&point.x<=(center.x+(imageScaledWidth/2))&&point.y>=(center.y-(imageScaledHeight/2))&&point.y<=(center.y+(imageScaledHeight/2)))?true:false;
} 
```

我做了一些改变以使代码工作：getBackground() 而不是 getDrawable

编辑 2：好的，我明白了，我做错了。你的代码很好。为了设置图像，我使用了 view.seBackground()...而不是 view.setImageDrawable()。现在一切正常。也许我只会检查是否有可能创建一个更大的区域来触发矩形的缩放

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-07T15:09:22.970

我找到了一个支持这个的库：来自[https://android-arsenal.com/details/1/2366](https://android-arsenal.com/details/1/2366)的 SimpleCropView 。一般来说，我不会推荐它，它的性能与原生安卓裁剪应用程序相差甚远。

我试过使用它，我的想法是：

*   在您的应用程序中实现非常简单，我花了大约 5 分钟的时间让裁剪和旋转功能与我现有的应用程序一起使用

*   裁剪区域的重新调整大小非常缓慢，我不希望我的用户看到它。

更新：事实上，我在 Github 上找到了一个非常好的解决方案，如 jdamcd/android-crop：[https](https://github.com/jdamcd/android-crop) ://github.com/jdamcd/android-crop 摘要：

*   在您的应用中使用非常简单

*   快，因为它使用来自本机画廊应用程序的代码

*   可定制，如果你想花一些时间玩它。默认情况下，它会为您提供一个 Activity，您可以在其中进行裁剪。如果你想把它整合到你自己的活动中，这将需要一点时间。（对于我的项目，我本来希望整合它，并且将来会这样做，但现在一个单独的活动就足够了）。

希望这能提供一些见解！

# ios - 是否可以使用 UIImageView 组合/分层图像并仍然保持其透明度？

> ID：16182121
> 
> 赞同：0
> 
> 时间：2013-04-24T01:55:32.570
> 
> 标签：ios, xcode, uiimageview, calayer, alpha

我正在尝试将一些灰度图像与不同的 alpha 相结合以创建分层效果。我正在将图像加载到 UIImageView 中，并且在屏幕上看起来与预期的一样。但是，当我保存组合图像时，只有顶层被保存；是否可以创建和保存组合图像层？

我附上了图像的链接——一个是图像应该是什么样子的屏幕截图（分层），另一个是最终保存的简单单值（非分层）。

[https://dl.dropboxusercontent.com/u/8263889/good.png](https://dl.dropboxusercontent.com/u/8263889/good.png) - 这就是我想要的 [https://dl.dropboxusercontent.com/u/8263889/bad.png](https://dl.dropboxusercontent.com/u/8263889/bad.png) - 这就是发生的事情。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:59:08.500

你想保存到 UIImage 吗？如果是这样，试试这个。

```
+ (UIImage *)imageWithView:(UIView *)view
{
  UIGraphicsBeginImageContextWithOptions(view.bounds.size, view.opaque, 0.0);
  [view.layer renderInContext:UIGraphicsGetCurrentContext()];

  UIImage * img = UIGraphicsGetImageFromCurrentImageContext();

  UIGraphicsEndImageContext();

  return img;
} 
```

# c - 计算机理解的管道

> ID：16182131
> 
> 赞同：0
> 
> 时间：2013-04-24T01:56:40.313
> 
> 标签：c, architecture, system, piping

我理解管道**a < b > c**意味着使用文件b的数据作为输入来编程a而不是stdin，并将程序b的输出写入文件c而不是stdout。

我不明白的是如何给出管道命令以使用文件 b 的数据作为输入来编程 a 而不是 stdin，并将程序 a 的输出写入文件 c 而不是 stdout。

b 会放在哪里？

我有一个 < b 用于标准输入，但没有找到获得标准输出的方法。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:58:44.280

你应该做这个：

```
a < b > c 
```

正如你在问题中提到的那样。这并没有按照您的意思做：它不使用 b 作为 a 的输入，也不使用 c 作为 b 的输出。这使用 b 作为 a 的输入和 c 作为 a 的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T02:14:04.900

这实际上不是管道，而是输入和输出流的重定向。

管道是获取一个进程的标准输出并将其附加到另一个进程的标准输入，例如：

```
seq 1 5 | sort -r 
```

它生成数字 1 到 5（按该顺序），然​​后按相反顺序对它们进行排序，如下所示：

```
pax> seq 1 5
1
2
3
4
5

pax> seq 1 5 | sort -r
5
4
3
2
1 
```

序列：

```
prog <infile >outfile 
```

在进程中运行`prog`程序并从`infile` *文件*中获取其标准输入并将其标准输出发送到`outfile`文件。只涉及一个过程。

要“使用文件 b 的数据作为输入来编程 a 而不是 stdin，并将程序 a 的输出写入文件 c 而不是 stdout”，您可以使用：

```
a <b >c 
```

和你一样。`<`您会注意到，在我的示例中，重定向字符（或）和文件名之间没有空格`>`——我相信这会使关系更清晰，因为`>xyzzy`意味着“将输出发送到`xyzzy`文件”。

您关于做什么的错误断言`a < b > c`（“使用文件 b 的数据作为输入来编程 a 而不是标准输入，并将程序 b 的输出写入文件 c 而不是标准输出”）将更适合*单独*的命令：

```
a <b ; b >c 
```

`a`和`b`程序之间没有真正的联系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T02:01:28.550

你的理解是错误的。

一个命令如

```
a <b >c 
```

只有一个命令，即`a`. 输入`a`来自 file `b`，输出来自 file `c`。

没有正在执行的命令`b`（或`c`）。

简而言之，该命令已经完成了您想要的操作。

# apache - 强制 www。不强迫它在子域上？

> ID：16182138
> 
> 赞同：1
> 
> 时间：2013-04-24T01:57:46.993
> 
> 标签：apache, .htaccess, subdomain

我目前正在使用 ht.access 在我的域名上强制使用 WWW 前缀....

```
RewriteCond %{HTTP_HOST} !^$
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteCond %{HTTPS}s ^on(s)|
RewriteRule ^ http%1://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

我想保留它，但对于我的子域，它显示为

www.subdomain.mydomain.com 但我想要它没有 www。在我的子域....

**目前：** [http ://www.subdomain.mydomain.com](http://www.subdomain.mydomain.com) **想要：** [http ://subdomain.mydomain.com](http://subdomain.mydomain.com)

对该代码或任何其他 .htaccess 代码是否有任何已知的良好编辑来完成我需要的操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T04:03:36.323

您必须要么明确说明域名，要么只假设特定数量的 TLD（否则会变得更难）。

明确的域：

```
RewriteCond %{HTTP_HOST} !^$
RewriteCond %{HTTP_HOST} !^www\.domain\.com [NC]
RewriteCond %{HTTPS}s ^on(s)|
RewriteRule ^ http%1://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

RewriteCond %{HTTP_HOST} !^$
RewriteCond %{HTTP_HOST} ^www\.([^.]+)\.domain\.com [NC]
RewriteCond %{HTTPS}s::%1 ^(on(s)|offs)::(.*)$
RewriteRule ^ http%2://%3.domain.com%{REQUEST_URI} [R=301,L] 
```

或只有 1 个顶级域名：

```
RewriteCond %{HTTP_HOST} !^$
RewriteCond %{HTTP_HOST} !^www\.([^.]+\.[^.]{2,4})$ [NC]
RewriteCond %{HTTPS}s ^on(s)|
RewriteRule ^ http%1://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

RewriteCond %{HTTP_HOST} !^$
RewriteCond %{HTTP_HOST} ^www\.([^.]+\.[^.]+\.[^.]{2,4})$ [NC]
RewriteCond %{HTTPS}s::%1 ^(on(s)|offs)::(.*)$
RewriteRule ^ http%2://%3.domain.com%{REQUEST_URI} [R=301,L] 
```

# javascript - 通过传递带有路径和值的字符串来扩展 JavaScript 对象

> ID：16182141
> 
> 赞同：2
> 
> 时间：2013-04-24T01:57:59.067
> 
> 标签：javascript, jquery, extend

有没有一种通过传递字符串和值来扩展 JavaScript 对象的简单方法？

基本上我需要这样的东西：

```
myObject = {}

var extendObj = function(obj, path, value){
}

var path = "a.b.c", value = "ciao";
extendObj(myObject, path, value);

console.log(myObject.a.b.c) //will print "ciao" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T02:07:58.413

```
myObject = {};

var extendObj = function (obj, path, value) {
    var levels = path.split("."),
        i = 0;

    function createLevel(child) {
        var name = levels[i++];
        if(typeof child[name] !== "undefined" && child[name] !== null) {
            if(typeof child[name] !== "object" && typeof child[name] !== "function") {
                console.warn("Rewriting " + name);
                child[name] = {};
            }
        } else {
            child[name] = {};
        }
        if(i == levels.length) {
            child[name] = value;
        } else {
            createLevel(child[name]);
        }
    }
    createLevel(obj);
    return obj;
}

var path = "a.b.c",
    value = "ciao";
extendObj(myObject, path, value);

console.log(myObject.a.b.c) //will print "ciao" 
```

[http://jsfiddle.net/DerekL/AKB4Q/](http://jsfiddle.net/DerekL/AKB4Q/)

![在此处输入图像描述](https://i.stack.imgur.com/KEZnS.png)

您可以在控制台中看到它根据`path`您输入的路径创建路径。

# c++ - RegQueryValueEx 给出奇怪的数据

> ID：16182145
> 
> 赞同：0
> 
> 时间：2013-04-24T01:58:41.523
> 
> 标签：c++, windows, unicode, registry

```
DWORD dwType = REG_SZ;
TCHAR keyData[1024];
DWORD keyDataLength = 1024;
cchValue = MAX_VALUE_NAME; 
achValue[0] = '\0';     
HKEY currentKey;
long err = RegOpenKeyEx(HKEY_CURRENT_USER, TEXT("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run"), NULL, KEY_READ, &currentKey);
_tprintf(TEXT("OpenKey Error Code: %d\n"), err);
err = RegQueryValueEx(currentKey, TEXT("STEAM"), NULL, NULL, (LPBYTE)&keyData, &keyDataLength);
_tprintf(TEXT("QueryKey Error Code: %d\n"), err);
_tprintf(TEXT("Data: %d\n"), keyData); 
```

上面的代码产生以下结果：

```
OpenKey Error Code: 0
QueryKey Error Code: 0
Data: 15332432 
```

如何让 keyData 显示正确的结果？我在网上看了很长时间，这几乎是我在网上找到的工作示例的副本......它设置为 UNICODE，我不想切换字符集。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T02:04:25.130

`keyData`是一个数组`TCHAR`。尝试使用 打印 char 数组`%s`。

```
 _tprintf(TEXT("Data: %s\n"), keyData);
                    //^^^ not %d 
```

**编辑** 谢谢`@Windows programmer`

另外，`keyDataLength`应该是计算字节数，所以应该是`1024 * sizeof(TCHAR)`或者更简单`sizeof(keyData)`。

# android - 为什么我无法在 Android 中删除此联系人？

> ID：16182147
> 
> 赞同：0
> 
> 时间：2013-04-24T01:58:42.637
> 
> 标签：android

我可以像这样更新电话号码：

```
 ops.add(ContentProviderOperation.newUpdate(Data.CONTENT_URI)
         .withSelection("_id =?", new String[] { id })
         .withValue(Phone.NUMBER, "5555555555").build());

         getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops); 
```

但是在我更新显示名称的地方，它不起作用：

```
ops.add(ContentProviderOperation.newUpdate(Data.CONTENT_URI)
         .withSelection("_id=?", new String[] { id })
         .withValue("display_name", "jack").build()); 
```

这两个词都不是：

```
context.getContentResolver().update(
                ContactsContract.Data.CONTENT_URI,
                values,
                ContactsContract.CommonDataKinds.StructuredName._ID + "="
                        + id
                        + " and  mimetype='vnd.android.cursor.item/name'",
                null); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T02:51:02.040

display_name 是只读的。

任何想要使用 Contacts Provider 进行详细工作的人都应该阅读*Contacts* Provider API 指南并遵循 Contacts Provider Android 培训。联系人提供程序是一个复杂的数据库系统，有许多规则，除非您了解提供程序的基本布局，否则您会遇到令人沮丧的问题。

CommonDataKinds.StructuredName.DISPLAY_NAME 和 CommonDataKinds.Phone.NUMBER 都设置为 data1，因为实际上它们并不引用单独的表。相反，它们都引用 ContactContracts.Data 中的 DATA1 列。*联系人的所有*详细数据都存储在 ContactContracts.Data 中，无论它是什么。例如，联系人的所有电话号码和所有电子邮件地址都存储在 ContactContracts.Data 中。区分一种类型的行与另一种类型的方法是通过该行的 MIMETYPE 值。文档对此进行了详细说明。

另一个提示：您应该避免在自己的代码中对联系人提供程序进行添加、删除或更新。相反，发送一个启动设备的联系人应用程序或允许用户选择要使用的联系人应用程序的 Intent。这允许用户在联系人应用程序而不是您的应用程序中完成工作。这也在文档中进行了描述。

# java - Hibernate SessionFactory 注解错误

> ID：16182150
> 
> 赞同：0
> 
> 时间：2013-04-24T01:59:05.050
> 
> 标签：java, hibernate, spring-mvc, sessionfactory

收到此错误。想尽一切办法解决它。浏览了大量类似的问题，但没有结果。也许你们中的一个人可能会发现错误？先感谢您。

**错误日志：**

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'studentService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: miniVLE.dao.MiniVLEDAOImplementation miniVLE.service.StudentService.dao; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'miniVLEDAOImplementation': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.hibernate.SessionFactory miniVLE.dao.MiniVLEDAOImplementation.sessionFactory; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.hibernate.SessionFactory] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)} 
```

我的调度员-servlet：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/aop 
       http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
       http://www.springframework.org/schema/tx 
       http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context-3.0.xsd
       http://www.springframework.org/schema/mvc
       http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <context:annotation-config />
    <context:component-scan base-package="miniVLE.controller" />
    <context:component-scan base-package="miniVLE.service" />
    <context:component-scan base-package="miniVLE.beans" />
    <context:component-scan base-package="miniVLE.dao" />
   <!-- <mvc:annotation-driven />-->
    <!--tx:annotation-driven transaction-manager="transactionManager" /-->
    <tx:annotation-driven transaction-manager="hibernateTransactionManager"/>

    <!-- Declare a view resolver-->
    <bean id="viewResolver"
          class="org.springframework.web.servlet.view.InternalResourceViewResolver"
          p:prefix="/WEB-INF/jsp/"
          p:suffix=".jsp" />

    <!-- Connects to the database based on the jdbc properties information-->
    <bean id="dataSource" class ="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name ="driverClassName" value="com.mysql.jdbc.Driver"/>
        <property name ="url" value="jdbc:derby://localhost:1527/minivledb"/>
        <property name ="username" value="root"/>
        <property name ="password" value="123" />
    </bean>

     <!-- Declares hibernate object -->
    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect"> ${hibernate.dialect}</prop>
                <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
            </props>
        </property>
        <!-- A list of all the annotated bean files, which are mapped with database tables-->
        <property name="annotatedClasses">
            <list>
                <value> miniVLE.beans.Course </value>
                <value> miniVLE.beans.Student </value>
                <value> miniVLE.beans.Department </value>  
                <value> miniVLE.beans.Module </value>  
                <value> miniVLE.beans.TimeSlot </value> 
            </list>
        </property>
    </bean>

    <!-- Declare a transaction manager-->
    <bean id="hibernateTransactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

</beans> 
```

我的 DAO 类实现：

```
import java.util.ArrayList;
import java.util.List;
import miniVLE.beans.Course;
import miniVLE.beans.Department;
import miniVLE.beans.Module;
import miniVLE.beans.Student;
import miniVLE.beans.TimeSlot;
import org.hibernate.SessionFactory;
import org.hibernate.criterion.Restrictions;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;

@Repository
public class MiniVLEDAOImplementation implements MiniVLEDAO{

    // Used for communicating with the database
    @Autowired
    private SessionFactory sessionFactory; ... 
```

服务：

```
@Service
@Transactional(propagation = Propagation.SUPPORTS, readOnly = true)
public class StudentService {

    @Autowired
    MiniVLEDAOImplementation dao; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:35:00.647

哦……真是愚蠢的错误！确保在 applicationContext.xml 中没有加倍

```
<context:component-scan base-package="miniVLE.controller" />
<context:component-scan base-package="miniVLE.service" />
<context:component-scan base-package="miniVLE.beans" />
<context:component-scan base-package="miniVLE.dao" /> 
```

天哪..我杀了一天试图解决它！

# android - 使用 OnTouchListener 获取位图中的 X 和 Y 点

> ID：16182154
> 
> 赞同：0
> 
> 时间：2013-04-24T01:59:28.183
> 
> 标签：android, bitmap, coordinates, imagemap, ontouchlistener

我在屏幕上放置了一个位图，并且想要制作它，以便当您触摸该位图上的某个点时，会发生特定于该点的某些事情。为此，我需要它，以便当触摸位图上的一个点时，返回位图上该点的 x 和 y。

例子

![在此处输入图像描述](https://i.stack.imgur.com/f3IvE.png)

我想要这样，如果你触摸他的二头肌，二头肌这个词就会弹出，如果你触摸他的胸部，胸部这个词就会弹出。

我需要这个在不同尺寸的屏幕上工作。

提前致谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-24T02:25:31.253

假设您的图像位于被`ImageView`调用的`bitmap`.

```
bitmap.setOnTouchListener(new OnTouchListener{
@Override
public boolean onTouch(View v, MotionEvent ev){
    float x = ev.getX(); //the most recent x coordinate of the touch
    float y = ev.getY(); //the most recent y coordinate of the touch
}
}); 
```

除此之外，使用透明矩形区域覆盖您的图像可能更容易，这些区域充当交互按钮，在触摸时显示文本。这样你就不需要处理屏幕坐标和你想要的图像坐标之间的潜在坐标不匹配。

# haskell - 如何使用'（<）'作为变量？

> ID：16182156
> 
> 赞同：-1
> 
> 时间：2013-04-24T01:59:39.107
> 
> 标签：haskell

我将如何使用大于或小于符号作为变量，以便当我输入时`Main> mySort (<) [1,5,3,6,4,1,3,3,2]`，`Main> mySort (>) [1,5,3,6,4,1,3,3,2]`它会根据我选择输入的符号从最高到最低或从最低到最高对列表进行排序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T02:34:25.533

您可以传入`(<)`并使用它比较每个值。

类似的功能

```
mySort :: (a -> a -> Ordering) -- Comparator function
       -> [a]
       -> [a] 
```

而且 Haskell 非常聪明，以至于它已经作为`sortBy`. 这使您可以传入一个返回的`Ordering`函数

```
data Ordering = LT | EQ | GT deriving(...) 
```

但是你有函数`a -> a -> Bool`，所以你需要把它变成一个排序，然后你可以将它与`sortBy`.

```
wrap f a b | not $ f a b || f b a = EQ
           | f a b                = LT
           | otherwise            = GT 
```

现在你可以用它来包裹`(<)` 和`(>)`抬起它来使用`sortBy`

```
mySort :: (a -> a -> Bool) -> [a] -> [a]
mySort = sortBy . wrap 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:05:19.443

Data.List 中已经有一个功能与您想要的功能非常相似，它称为**sortBy**。
但是，如果你真的想实现它，你可以像这样使用 sortBy：

```
mySort cop ls = sortBy (\a b -> if (cop a b) then LT else GT) ls 
```

甚至更短（使用 eta 减少）：

```
mySort cop = sortBy (\a b -> if (cop a b) then LT else GT) 
```

# scala - sbt：图书馆应该如何依赖 scala-actors？

> ID：16182158
> 
> 赞同：2
> 
> 时间：2013-04-24T01:59:42.097
> 
> 标签：scala, sbt

我们有一个使用 scala-actors 2.10.x 的内部库。它在它的 build.sbt 中有这个

```
libraryDependencies <++= scalaVersion(v =>
  Seq("org.scala-lang" % "scala-actors" % v)
) 
```

该库仅使用 2.10.0 编译并推送到我们的内部 Maven 存储库。

我们依赖库的项目之一已更新到 2.10.1。依赖项目具有相同的功能`libraryDependencies`，因此现在编译依赖项目会发出警告：

```
$ sbt
[info] Loading project definition from /tmp/foo/project
[info] Set current project to bar (in build file:/tmp/foo/)
[warn] Potentially incompatible versions of dependencies of {file:/tmp/foo/}bar:
[warn]    org.scala-lang: 2.10.1, 2.10.0 
```

使用依赖 sbt 插件显示了这一点：

```
[info]   +-com.example:ourlibrary_2.10:1.0.1 [S]
[info]   | +-org.scala-lang:scala-actors:2.10.0 (evicted by: 2.10.1)
[info]   |
[info]   +-org.scala-lang:scala-actors:2.10.1 [S] 
```

最好的图书馆应该怎么`libraryDependencies`写？我有以下内容，但是有没有更清洁的方法？

```
libraryDependencies <++= scalaVersion(v =>
  {
    // Use any version of scala-actors for this version of Scala.
    val split = v.split('.')
    val major = split(0).toInt
    val minor = split(1).toInt
    val revision = "[%s.%s,%s.%s)".format(major, minor, major, minor+1)
    Seq("org.scala-lang" % "scala-actors" % revision)
  }
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-09T01:57:03.340

Scala 2.10.x 保证是二进制兼容的，所以无论你做什么都很好。常春藤似乎正确驱逐`org.scala-lang:scala-actors:2.10.0`，所以它不应该引起任何问题。

事实上，您提到的警告消息被认为是错误[#709](https://github.com/sbt/sbt/issues/709)，它不应该显示在最近的 sbt 0.12 和 0.13 版本中。

# java - JasperReport 在单个文件中包含多个页面

> ID：16182171
> 
> 赞同：1
> 
> 时间：2013-04-24T02:01:54.633
> 
> 标签：java, jasper-reports

我想知道是否可以多次填写报告模板并将结果导出到单个 PDF 文件。到目前为止，这是我生成单个报告的代码：

```
 String input=FacesContext.getCurrentInstance().getExternalContext().getRealPath("/report.jrxml");

        File reporte= new File(input);

        design = JRXmlLoader.load(reporte);

        report = JasperCompileManager.compileReport(design);
        print= JasperFillManager.fillReport(report, parametros, new JREmptyDataSource());

        byte[]archivo=JasperExportManager.exportReportToPdf(print);
        InputStream stream=new ByteArrayInputStream(archivo); 
```

所有页面的报告模板都相同，但每个生成的报告都有一个参数不同。

# internet-explorer-8 - Highcharts markers positioning errors in IE8

> ID：16182172
> 
> 赞同：0
> 
> 时间：2013-04-24T02:02:15.293
> 
> 标签：internet-explorer-8, highcharts

Ive been working with some code implementing highcharts into a page with images for markers. When not using custom marker images the markers display in the right position in all browsers, however when using custom markers for the data the images are pushed to the bottom right corner of the graph in IE8.

[Here is a sample of the code which is causing this.](https://dl.dropboxusercontent.com/u/2450739/work/index_bare.html) I've noticed that setting the inverted property to true makes the graph work correctly, however the graph needs to be display with the x and y axis inverted.

Thanks for any help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:45:52.757

它看起来像已知的错误，在这里报告：[https ://github.com/highslide-software/highcharts.com/issues/1343](https://github.com/highslide-software/highcharts.com/issues/1343)

# java - Using PageObjects, Page Factory and WebDriverWait in Selenium WebDriver using Java

> ID：16182173
> 
> 赞同：6
> 
> 时间：2013-04-24T02:02:23.637
> 
> 标签：java, selenium-webdriver, pageobjects

I've been using Selenium WebDriver to implement functional tests for some projects that I've worked with. I'm trying to use the Page Object design pattern with Page Factory to factor out my locators. I've also created a static WaitTool object (singleton) that implements several waiting techniques with optional timeout parameters.

My current problem is that I would like to use my wait methods before the PageFactory attempts to initialise the WebElements. The reason I would like to wait is because the PageFactory may try to initialise the page elements before they are available on the page.

Here is a sample PageObject:

```
public class SignInPage extends PageBase {
    @FindBy(id = "username")
    @CacheLookup
    private WebElement usernameField;

    @FindBy(id = "password")
    @CacheLookup
    private WebElement passwordField;

    @FindBy(name = "submit")
    @CacheLookup
    private WebElement signInButton;

    public SignInPage(WebDriver driver) {
        super(driver);

        WaitTool.waitForPageToLoad(driver, this);

        // I'd like initialisation to occur here
    }

    public MainPage signInWithValidCredentials(String username, String password){
        return signIn(username, password, MainPage.class);
    }

    private <T>T signIn(String username, String password, Class<T> expectedPage) {
        usernameField.type(username);
        passwordField.type(password);
        signInButton.click();

        return PageFactory.initElements(driver, expectedPage);
    }
} 
```

Here is a sample TestObject:

```
public class SignInTest extends TestBase {
    @Test
    public void SignInWithValidCredentialsTest() {
        SignInPage signInPage = PageFactory.initElements(driver, SignInPage.class);

        MainPage mainPage = signInPage.signInWithValidCredentials("sbrown", "sbrown");

        assertThat(mainPage.getTitle(), is(equalTo(driver.getTitle())));
    }
} 
```

I tend to put my logic in the Page Object as much as possible (including waits), as it makes the test cases much more readable.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T05:45:52.870

PageFactroy 中的 WebElements 实际上是 WebElements 的代理。这意味着每次访问 WebElement 时，它都会执行搜索以查找页面上的元素。

这有一些优点：

*   初始化 PageFactory 时，代理已配置，但此时未找到 WebElement（因此您不会收到 NoSuchElementException）
*   每次您使用 WebElement 时，它都会再次找到它，因此您不应该设置 StaleElementException's

您正在使用 @CacheLookup 注释，它失去了第二个好处，因为它会找到元素一次然后保留对它的引用，您现在更有可能看到 StaleElementExceptions。

话虽如此，您仍然保留了主要好处，即 Selenium 在您第一次使用它之前不会进入页面并实际找到该元素。

所以总而言之，你需要做的就是移动

```
PageFactory.initElements(driver, this); 
```

进入您的构造函数，一切都会正常工作。

# c# - Accessing properties on System.Collections.Generic.List

> ID：16182174
> 
> 赞同：6
> 
> 时间：2013-04-24T02:02:26.513
> 
> 标签：c#, mono, mono.cecil

Using **Mono.Cecil** I can iterate over the fields on `System.Collections.Generic.List` (`_items`, `_size`, `_version`, etc.), however if I try to use them I always get the exception

> Member 'T[] System.Collections.Generic.List`1::_items' is declared in another module and needs to be imported

I have two questions regarding this:

1.  Is it not possible to access the underlying fields of the generics?
2.  If it is possible, what would the import statement look like for this?

I've successfully accessed private members on objects (as long as they're not compiler generated), so I'm assuming (1) is ok. I've also successfully imported things, although I admit my understanding of how the import is working is shaky (aka "if it gives an error, just try importing it").

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-01T10:50:09.633

在写入指向它的 IL 之前，您需要将 FieldDefinition 导入 ModuleDefinition。

因此，在查看您的代码之后，它将是这样的。

```
var fieldReference = ModuleDefinition.Import(field);
Action<Collection<Instruction>> load = collection => collection.AddI(OpCodes.Ldfld, fieldReference); 
```

我还注意到您还有另一个错误。当您在上面的代码中时，您已经丢失了类型参数的上下文。所以你试图调用一些东西`List<T>`而不是像`List<MyClass>`. 但是如果你不能解决那个问题，你可以提出另一个 SO 问题:)

# c++ - D3D11CreateDeviceAndSwapChain Unresolved External

> ID：16182175
> 
> 赞同：3
> 
> 时间：2013-04-24T02:02:43.210
> 
> 标签：c++, windows, directx, windows-7-x64

This is completely driving me insane. When I compile my program, I get the following error message:

error LNK2019: unresolved external symbol _D3D11CreateDeviceAndSwapChain@48

I know that I have all of the correct lib / and include directories (x86), and I have tracked the problem down to the fact that if I go to the definition (F12) I get two symbols, one for the DirectXSDK install directory, and one at "c:\Program Files (x86)\Windows Kits\8.0\Include\um".

For the life of me, I have no idea what to do. I have gone through all of the include / exclude directories and I can't get it to resolve, and I don't know what to do. Can anyone help me?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-06T20:09:47.443

我自己遇到了这个错误，并用卢克在他的评论中的建议解决了这个问题。

假设您使用的是 Visual Studio，请尝试打开项目的属性窗口，然后导航到链接器 -> 输入。在“附加依赖项”下添加`d3d11.lib`，然后再次尝试链接。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-24T06:29:39.657

好的。在疯狂驾驶之前，请检查：

*   您链接到与您的应用程序相同的架构：x86、x64、arm（这是常见的陷阱=））

    `C:\Program Files (x86)\Windows Kits\8.0\Lib\win8\um\x86`

    `C:\Program Files (x86)\Windows Kits\8.0\Lib\win8\um\x64`

    `C:\Program Files (x86)\Windows Kits\8.0\Lib\win8\um\arm`

*   您从与标头相同的 sdk 链接 lib（在您的源代码中，尝试显式输入路径）：

    `#include "c:\Program Files (x86)\Windows Kits\8.0\Include\um\header.h"`

    `#pragma comment(lib, "C:\\Program Files (x86)\\Windows Kits\\8.0\\Lib\\win8\\um\\x64\\library.lib")`

*   检查库本身是否正常（存在，未损坏）：卸载旧的 DXSDK 和 Win8SDK，然后仅重新安装其中一个，尝试一下，而不是另一个。（另外，最好从旧 SDK 中复制某处的文档和教程，卸载它并完全忘记它）

*   尝试带有详细标志的 new `#pragma linker`(not `#pragma lib`) 以获得一些链接器输出：

    `#define USE_OLD_DXSDK`

    `#ifdef USE_OLD_DXSDK`

    `#pragma comment(linker "c:\\path\\to\\old_sdk\\d3d11.lib -verbose")`

    `#else`

    `#pragma comment(linker, "c:\\path\\to\\new_sdk\\d3d11.lib -verbose")`

    `#endif`

*   换一种方式：创建一个新的小应用程序并尝试`D3D11CreateDeviceAndSwapChain`从头开始编写东西。只有`#include`现在`link`需要什么，没有别的。尝试重现您的链接器错误以了解它发生的原因并找出如何在您的主应用程序中修复它。

快乐编码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T18:27:37.843

重新检查您的 IDE 中的库，并确保您的 IDE 使用的是 Unicode 字符集，并且您正确地使用了 unicode 函数和字符串。此外，检查两次是否将 \lib\x86（或 x64，如果是这种情况）正确添加到项目的库中。

# android - android mediaplayer 仅在 android 2.3 上播放一些文件

> ID：16182176
> 
> 赞同：0
> 
> 时间：2013-04-24T02:02:49.380
> 
> 标签：android, media-player

我正在制作一个应用程序，它需要显示我从服务器下载的一些视频。然而，一些视频只是在 Gingerbread 上出现错误，而在 Jelly Bean 上运行良好。

```
File f = new File(file);
// Tried to set source with the absolute path (file)
mPlayer.setDataSource(ParcelFileDescriptor.open(f, ParcelFileDescriptor.MODE_READ_ONLY).getFileDescriptor());
// holder is the surfaceholder for the SurfaceView
mPlayer.setDisplay(holder);
mPlayer.prepare(); 
```

我已经在老三星、模拟器和老索尼爱立信上测试了视频。有些手机可以播放其他手机不能播放的视频。

我收到了 Quicktime 格式 (.mov) 的视频并使用了

```
ffmpeg -i file.mov -vcodec copy -acodec copy file.mp4 
```

在所有视频上获取 android 应该理解的 MPEG-4。这就是为什么有些视频有效而另一些视频无效的原因。

视频下载到

```
context.getExternalFilesDir(null).getAbsolutePath() + "/path/to/videos/"; 
```

我检查了 sha1sum 以验证下载是否正常。

我得到的错误各不相同。

我在模拟器上收到 MediaPlayer 错误 (1, -2147483648)，在三星设备上收到 MediaPlayer 错误 (1, -15)。

那么如何让视频播放？

# php - 在 PHP 关联数组索引中使用空格是一种不好的做法吗？

> ID：16182178
> 
> 赞同：7
> 
> 时间：2013-04-24T02:02:54.750
> 
> 标签：php, arrays

我必须使用关联数组传递一些参数，如下所示：

```
$blockGroup['name=products type=complete'] 
```

做一些测试我发现它有效，但这是一个不好的做法吗？是否有可能产生任何错误或意外行为？

感谢您的任何建议！

**编辑 1**

我在视图实现中使用这个数组，完整的结构是：

```
$blockGroup['name=products type=complete'][] =
    array(
        'name'  => 'GeForce',
        'value' => '99.99'
    ); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-24T02:09:37.020

不，这不对。编程中的空格符号并没有真正的特殊含义。用引号括起来并因此形成字符串的符号可以用作关联数组键。

事实上，很多时候将这些键用于关联数组会使您的代码可读且便于对其进行更改。

```
$scores = array("John Doe" => 100, "Ivan Ivanovich" => 75.3); 
```

我看到的是你试图使用数组键作为表达式，这真的是不好的做法。事物的意义在于它们的意义。使用关联键作为关联键。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T02:07:27.783

它会起作用，而且是**不错的做法**。空格只是索引字符串中的常规字符。这没问题。

在许多编程情况下，您在数组中使用的索引是动态创建的，这是必要的。索引甚至可以是二进制字符串。检查此示例，典型情况。我们想从文件中删除重复的行，并且每行只打印一次：

*文件.txt*

```
hello world. 
foo bar
hello world
123 
```

*例子.php*

```
$printed = array(); 
foreach(file('file.txt') as $line) {
    if(isset($printed[$line])) {
        continue; // skip the line
    }

    echo $line;
    $printed[$line] = true; // line will contain spaces
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T02:29:41.327

我不认为空格是键中的问题，但我确实认为使用等号似乎很尴尬。根据您的代码示例，我不明白为什么您不会像这样在数组上使用 3 维：

```
 $blockGroup['products']['complete'][] =
    array(
        'name' => 'GeForce',
        'value' => '99.99'
    ); 
```

我可能误解了你的情况，但这对我来说似乎更合乎逻辑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T02:07:40.070

回答您的原始问题，PHP 中的关联数组将键映射到值。在这种情况下，您使用的键是字符串，这就是 PHP 在这种情况下关心的全部内容，不一定是这些字符串的内容（即它们可能有也可能没有空格）。我这么说是因为您似乎不确定这在该语言中是否合法（而不仅仅是它是否是不好的做法）。

至于这是否是不好的做法，我不知道。这取决于上下文，如果这种键自然地映射到您要存储的值，那么它应该没问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T02:09:05.670

我会说是的，这是不好的做法，但它**会**起作用。无论你想达到什么目的，都可以用不同的方式来完成。我可以建议一个多维数组吗？或者也许是一个键和一个值？

我想这样的事情可能会在路上引起头痛。IMO 拼写错误的空间更大。再加上它不是很好看。

请记住，我专门指的是您的示例。这些方面的东西很好：

```
array('toaster oven' => 100, 'heater' => 50); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-24T02:09:40.897

这是有效的语法，但它可能是实现您想要做的任何事情的更好方法。

数组可以有 Integer、Floating、Null、Bool 和 String 键。

对于字符串，PHP 在内部将它们表示为字节序列，因此据我所知，没有机会通过使用空格或特殊字符作为键来引入漏洞。

但是，在我看来，由于错误地键入了一个键，它使代码的可读性降低并且更容易出错，并且花费了无数个小时来找出你应该键入的内容

`$myKey['name=guitar price=200.00']`

代替：

`$myKey['name=gutiar price=200.00']`

PHP 手册页详细解释了为什么这是一种不好的做法：

> 在未来的某个时候，PHP 团队可能想要添加另一个常量或关键字，或者其他代码中的常量可能会干扰。例如，以这种方式使用单词 empty 和 default 已经是错误的，因为它们是保留关键字。

[http://php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-06-10T16:31:50.837

关于最佳实践，可读性和实用性应该是主要关注点。如果数组键中的空格使代码可读，那么请随意使用它们。这整篇文章可以用作数组键，但不实用。

如果您打算使用数组键作为变量名来创建变量变量，我不建议使用空格 - 使用`extract()`. 当与您无法控制的数据（例如用户输入）一起使用时，这可能很危险，所以要小心。

如果您打算创建变量变量，仍然可以使用空格，只需事先将空格转换为下划线即可。

变量变量的来源：[https ://www.php.net/manual/en/language.variables.variable.php](https://www.php.net/manual/en/language.variables.variable.php)

来源`extract()`：[https ://www.php.net/manual/en/function.extract.php](https://www.php.net/manual/en/function.extract.php)

# visual-studio-2012 - MSBuild referencing DLL's in Task

> ID：16182179
> 
> 赞同：4
> 
> 时间：2013-04-24T02:03:02.253
> 
> 标签：visual-studio-2012, msbuild, msbuild-task, msbuild-4.0

I have the following inline task defined in a .csproj file that should run BeforeBuild.

```
<UsingTask TaskName="VersioningTask" TaskFactory="CodeTaskFactory" AssemblyFile="$(MSBuildToolsPath)\Microsoft.Build.Tasks.v4.0.dll">
<ParameterGroup>
    <FileName ParameterType="System.String" Required="true" />
    <XmlFileName ParameterType="System.String" Required="true" />
</ParameterGroup>
<Task>
    <Reference Include="System.Xml.dll" />
    <Reference Include="System.Xml.Linq.dll"/>
    <Using Namespace="System" />
    <Using Namespace="System.IO" />
    <Using Namespace="System.Linq" />
    <Using Namespace="System.Text" />
    <Using Namespace="System.Text.RegularExpressions" />
    <Using Namespace="System.Xml.Linq" />
    <Code Type="Fragment" Language="cs"><![CDATA[
        var xDoc = XDocument.Load(XmlFileName);
        //... 
```

When building the project from VS2012 I get the following error:

> Could not find reference "System.Xml.dll". If this reference is required by your code, you may get compilation errors.
> 
> Could not find reference "System.Xml.Linq.dll". If this reference is required by your code, you may get compilation errors.

If I remove the XML stuff and the two references, the build succeeds. I have tried to use full paths to the DLL's (%windir%/assembly) without any success.

Any ideas whats wrong here are highly appreciated.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-17T01:20:23.290

我在引用 System.Xml.Linq 时遇到了同样的问题。切换到已编译任务确实可以解决您的解决方案，但是要将原始代码实现为内联任务，只需从引用中删除文件扩展名，然后删除内联任务，以便引用根命名空间而不是文件名。

改变这个：

```
<Reference Include="System.Xml.dll" />
<Reference Include="System.Xml.Linq.dll"/> 
```

读书：

```
<Reference Include="System.Xml" />
<Reference Include="System.Xml.Linq"/> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-26T20:12:52.853

通过使用常规任务而不是使用内联任务来解决它。

# iphone - 使用数据库的新信息更新数组

> ID：16182182
> 
> 赞同：0
> 
> 时间：2013-04-24T02:03:46.263
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uitableview

**如何更新组数组数据库的新信息，而不是使用旧信息？**

所以基本上，我有一个 Group 模型对象。它在另一个视图中得到更新。

但是在我的主表视图控制器中，我有以下代码。

```
NSArray *sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"dateAdded" ascending:NO]];
_groups = [NSMutableArray arrayWithArray:[[[GGUser groups] allObjects] sortedArrayUsingDescriptors:sortDescriptors]]; 
```

这不会更新到数据库中的新信息。

**只有当应用程序重新启动时，它才会使用数据库的新信息进行更新。**

*所以它基本上只使用自应用程序启动以来获得的信息。*

注意：在收集有关该问题的更多信息后，此问题与最初的问题略有不同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T02:19:59.700

每当更新 tableViews 数据源时，您需要调用 [self reloadData]。

如果您已经这样做了，则可能是您通过导航栏后退按钮返回到 tableview 控制器。这意味着不会再次调用 ViewDidLoad，因此不会更新 _groups 变量。

我会尝试将您的 _groups 代码放在 viewDidAppear 中，然后在 tableView 上调用 reloadData。如果可行，那么我会考虑重构您的代码以使用委托或通知来让表格视图知道数据源已更新

# linux - 来自 Bash 脚本内部的服务器的 scp 文档

> ID：16182190
> 
> 赞同：0
> 
> 时间：2013-04-24T02:04:45.763
> 
> 标签：linux, bash, shell, scp

我通常`scp`这样使用：

```
myUser@myMachine:~/myapp$ scp devops@myserver.org:/path/to/bin/*.derp .
devops@myserver.org's password: ********
herp1.derp                                100%  732     0.7KB/s   00:00    
herp2.derp                                100%  215     0.2KB/s   00:00    
herp3.derp                                100%  682     0.7KB/s   00:00    
myUser@myMachine:~/myapp$ 
```

我现在想编写一个 Bash 脚本，除其他外，它会为我执行此操作，但密码存储在脚本中，并且脚本不会询问用户输入它：

```
sh dostuff.sh 
```

只需将`scp`所有`*.derp`文件运行到用户的本地目录即可。

所以我问：我**怎样才能`scp`从我的脚本中提供密码？**提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T02:10:36.467

无需在 shell 脚本中硬编码密码，而是使用 SSH 密钥，它更简单、更安全。

```
$ scp -i ~/.ssh/id_rsa devops@myserver.org:/path/to/bin/*.derp . 
```

假设您的私钥在`~/.ssh/id_rsa`

要生成公钥/私钥对：

```
$ ssh-keygen -t rsa 
```

以上将生成2个文件，`~/.ssh/id_rsa`（私钥）和`~/.ssh/id_rsa.pub`（公钥）

要设置 SSH 密钥以供使用（一次性任务）：复制内容`~/.ssh/id_rsa.pub`并粘贴到服务器`~devops/.ssh/authorized_keys`的新行中`myserver.org`。如果`~devops/.ssh/authorized_keys`不存在，请随意创建它。

[此处](http://www.linuxproblem.org/art_9.html)提供了清晰的操作指南。

# c# - 验证器不接受空值

> ID：16182193
> 
> 赞同：1
> 
> 时间：2013-04-24T02:05:06.207
> 
> 标签：c#, asp.net, entity-framework, asp.net-mvc-4

我正在使用带有 C# 的 ASP.NET MVC4。Visual Studio 基于我已经创建的数据库创建了一些模型。数据库中的一列设置为非空。此后，我返回数据库并将该列更改为接受空值。但是在某个地方（不在模型文件中）它仍然将该列表示为非空。如果不在表单中输入内容来创建记录，我会收到红色验证错误，即该值不能为空。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T02:10:26.107

我想这是因为如果您生成了一个过时的数据库模型图。

打开数据库图表文件，删除那里的所有表（或只编辑您需要的表）。如果您正在刷新整个图表并删除了当前图表，请打开数据库资源管理器工具栏并刷新它，选择所有表，然后再次将它们拖放到打开的图表文件中。最后保存它，当然。

# ubuntu - 我怎么能关闭 DRM mod 调试打印

> ID：16182194
> 
> 赞同：1
> 
> 时间：2013-04-24T02:05:14.480
> 
> 标签：ubuntu, drm

每秒超过 10 行的 DRM mod 打印日志。我在 ubuntu12.04 上工作。而 DRM modinfo 为：

```
filename:       /lib/modules/3.5.0-28-generic/kernel/drivers/gpu/drm/drm.ko
license:        GPL and additional rights
description:    DRM shared core routines
author:         Gareth Hughes, Leif Delgass, José Fonseca, Jon Smirl
srcversion:     769B61070F6EB3D96F43DBD
depends:
intree:         Y
vermagic:       3.5.0-28-generic SMP mod_unload modversions 
parm:           edid_fixup:Minimum number of valid EDID header bytes (0-8, default 6) (int)
parm:           debug:Enable debug output (int)
parm:           vblankoffdelay:Delay until vblank irq auto-disable [msecs] (int)
parm:           timestamp_precision_usec:Max. error on timestamps [usecs] (int) 
```

我的问题是我如何在启动时使用 deug:disable 来安装这个 mod？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-30T18:47:41.087

编辑`/etc/default/grub`，换行：

`GRUB_CMDLINE_LINUX_DEFAULT="drm.debug=0xe plymouth:debug"`

至

`GRUB_CMDLINE_LINUX_DEFAULT="quiet splash acpi=force"`

此解决方法也纠正了关机错误（有时无法关机）。

# ios - 目前不允许 iTunes 沙盒购买

> ID：16182196
> 
> 赞同：12
> 
> 时间：2013-04-24T02:05:18.310
> 
> 标签：ios, in-app-purchase, app-store-connect, appstore-sandbox

我正在开发具有应用内购买功能的应用，但出现此错误：

> 您目前无权在 Sandbox 中购买此 InApp。

**我确信我已经正确设置了一切。**我已经为购买物品创建了沙盒帐户。我的代码完好无损（感谢*Ray Wenderlich*），我很确定其他一切都井井有条。但一定有什么不对。

**什么可能导致此错误？**

**编辑：**

我正在研究 Xcode 模拟器。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-04T06:38:11.593

您可能正在使用来自不同开发人员帐户的配置文件。就我而言，产品是在客户开发者帐户中注册的，我使用自己的开发者帐户来测试应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-30T15:47:36.360

如果您有多个 iTunes Connect 帐户，请确保您的测试用户帐户与应用程序存在于同一个 iTunes Connect 帐户中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-03T18:32:33.163

您的 iTunes 测试用户也可能已被删除。被删除的用户显然仍然可以登录，但不再进行购买。

# javascript - 带有 selenium 2 和 firebug 扩展的 Python

> ID：16182199
> 
> 赞同：0
> 
> 时间：2013-04-24T02:05:40.323
> 
> 标签：javascript, python, selenium

我什至不确定这是否可以解决我的问题，但我们开始吧。

所以我试图在网页上找到一个链接。问题是网页似乎正在执行 javascript 以获得实际的 html 代码。现在这是我不确定它真正属于哪个类别的东西。

我知道浏览器的源代码通常会在打开 javascript 后向您显示所有内容，但对于本网站，源代码不会显示任何网站内容。现在，查看站点内容的唯一方法是使用 firebug。

我想通过使用带有 selenium 的 firebug 如下，然后我将能够使用 xpath 或其他东西，但要么我不明白使用带有 selenium 的 firebug 背后的意义，要么我使用它完全错误。

有人可以帮忙吗？我一直在努力旋转这个。顺便说一句，如果这有所作为，那就是 ASPX 链接

```
from selenium.webdriver.common.keys import Keys
fp = webdriver.FirefoxProfile()
fp.add_extension(extension='firebug-1.11.2-fx.xpi')
fp.set_preference("extensions.firebug.currentVersion", "1.11.2")
browser = webdriver.Firefox(firefox_profile=fp)
browser.get("Example.com/start.aspx")
try: 
    #elem = browser.find_element_by_xpath("/html/body/div[2]/div[2]/table/tbody/tr/td[3]/a")
    elem = browser.find_element_by_link_text("SEARCH")
    elem.send_keys(Keys.RETURN)

except NoSuchElementException:
    assert 0, "can't find XPATH or Link Name" 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T01:10:15.910

其实我发现了我的问题。

没有显示整个 html 代码的问题是由于没有关注正确的 iframe

我所要做的就是通过以下切换到正确的“iframe”

**browser.switch_to_frame("iframe")**

您也不需要为此使用 firebug 扩展。

希望这会对遇到类似问题的一些人有所帮助。

完整的代码是这样的：

```
from selenium.webdriver.common.keys import Keys
browser = webdriver.Firefox()
browser.get("Example.com/start.aspx")
try: 
    #elem = browser.find_element_by_xpath("/html/body/div[2]/div[2]/table/tbody/tr/td[3]/a")

    browser.switch_to_frame("iframe")
    elem = browser.find_element_by_link_text("SEARCH")
    elem.send_keys(Keys.RETURN)

except NoSuchElementException:
    assert 0, "can't find XPATH or Link Name" 
```

问候，

# git - 如何修复 java.io.IOException：多个合并基础

> ID：16182201
> 
> 赞同：1
> 
> 时间：2013-04-24T02:05:58.500
> 
> 标签：git, jgit

当我使用`jgit`完成`git pull`如下：

```
git.pull().call(); 
```

它会导致异常

```
Caused by: java.io.IOException: Multiple merge bases for:
  0479d50e9bcb14f197e1f703cb9d20ce402e38be
  e52e86d1977a42c934a939f04d63deb8eaeb38bf found:
  518a66929b4480a5bd25defc5fe643937fc16cfa
  513273d6f0327f41c914c7cd5573adeb7d396d8f
    at org.eclipse.jgit.merge.Merger.getBaseCommit(Merger.java:217)
    at org.eclipse.jgit.merge.Merger.mergeBase(Merger.java:182)
    at org.eclipse.jgit.merge.ThreeWayMerger.mergeBase(ThreeWayMerger.java:121)
    at org.eclipse.jgit.merge.ResolveMerger.mergeImpl(ResolveMerger.java:187)
    at org.eclipse.jgit.merge.Merger.merge(Merger.java:156)
    at org.eclipse.jgit.merge.ThreeWayMerger.merge(ThreeWayMerger.java:108)
    at org.eclipse.jgit.api.MergeCommand.call(MergeCommand.java:208) 
```

我想知道为什么会显示`mutiple merge bases`？

我想知道如何仅使用`Jgit`而不是命令行 git 来修复错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:44:56.397

JGit 当前的稳定版本还没有[“递归”合并策略](http://git-scm.com/docs/git-merge#_merge_strategies)。

但它是在开发版本（master 分支）中实现的，将与 3.0 一起发布，请参阅以下提交和[错误 380314](https://bugs.eclipse.org/bugs/show_bug.cgi?id=380314)：

[http://git.eclipse.org/c/jgit/jgit.git/commit/?id=ab99b78ca08a6b52e9ae8b49afa04dd16496f2ac](http://git.eclipse.org/c/jgit/jgit.git/commit/?id=ab99b78ca08a6b52e9ae8b49afa04dd16496f2ac) [http://git.eclipse.org/c/jgit/jgit.git/commit/?id=aa7be667bcca4bdb28b2485e28a05da54c431df7](http://git.eclipse.org/c/jgit/jgit.git/commit/?id=aa7be667bcca4bdb28b2485e28a05da54c431df7)

因此，要么自己构建 JGit，要么从[Eclipse Maven 存储库](https://repo.eclipse.org/index.html#nexus-search;gav~org.eclipse.jgit~~~~)下载快照构建。

如果您使用支持 Maven 依赖项的构建工具，请使用以下存储库和工件版本：

```
<dependencies>
    <dependency>
        <groupId>org.eclipse.jgit</groupId>
        <artifactId>org.eclipse.jgit</artifactId>
        <version>3.0.0-SNAPSHOT</version>
    </dependency>
</dependencies>
<repositories>
    <repository>
        <id>eclipse-jgit</id>
        <url>https://repo.eclipse.org/content/groups/jgit/</url>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </repository>
</repositories> 
```

# c - 为包装在 C 结构中的 2d 指针数组分配内存

> ID：16182202
> 
> 赞同：0
> 
> 时间：2013-04-24T02:06:01.023
> 
> 标签：c, pointers, memory, multidimensional-array, allocation

假设我有一个名为 'Foo' 的结构，在其中我有一个二维指针数组

```
 typedef struct Foo {
          Stuff* (*stuff)[16];
      } Foo; 
```

我有一个 initializeFoo 函数，它可以为整个对象分配内存

```
 void initializeFoo(Foo **foo) {
          *foo = (Foo*)malloc(sizeof(Foo));
      } 
```

但是，在运行我的程序时，我会导致分段错误（核心转储），我认为我需要为 *stuff 分配内存，但我该怎么做呢？我会把它放在 initializeFoo 函数中吗？

我的猜测是使用：

```
 (*foo)->stuff = (Stuff*(*)[16])malloc(sizeof(Stuff)) 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T02:12:55.240

是的，您需要为`stuff`. 此外，您现在拥有的实际上是一个三维“数组”。

您也没有为`stuff`.

仅使用指针到指针来模拟二维数组实际上可能更简单：

```
typedef struct Foo {
    Stuff **stuff;
} Foo; 
```

然后在`initializeFoo`：

```
void initializeFoo(Foo **foo)
{
    *foo = malloc(sizeof(Foo));

    /* Allocate first dimension, 32 items */
    (*foo)->stuff = malloc(sizeof(Stuff *) * 32);

    /* Allocate second dimension, 16 items each */
    for (int i = 0; i < 32; i++)
        (*foo)->stuff[i] = malloc(sizeof(Stuff) * 16);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T02:18:29.083

可以肯定地说，我需要查看您的所有代码，但我的猜测是您传递给 initializeFoo 本身的双指针尚未分配。

例如，如果您这样做：

```
Foo ** foo;
initializeFoo(foo); 
```

您的程序将出现段错误，因为您取消引用尚未分配的 foo。但是，如果您使用：

```
Foo * foo;
initializeFoo(&foo); 
```

或者

```
Foo ** foo = (Foo **)malloc(sizeof(Foo *));
initializeFoo(foo); 
```

并且您的程序仍然存在段错误，那么问题一定出在其他地方。

# html - Twitter Bootstrap Mediagrid/Thumbnails & empty space

> ID：16182205
> 
> 赞同：1
> 
> 时间：2013-04-24T02:06:43.933
> 
> 标签：html, css, twitter-bootstrap

I'm trying to make a movie manager to get me back working with rails again. I'm reading the movies from a database, and trying to present their covers in a responsive grid.

I'm new to using Twitter Bootstrap, and having some weird issues with weird spacing. All my images are the same height and width, so that shouldn't be an issue.

To see the issue, go here: [http://jsfiddle.net/32AcT/](http://jsfiddle.net/32AcT/) (Due to the responsive grid, you may have to make the view window bigger, so they're not all in a single column.) I'm simply doing:

```
<ul class="thumbnails">
  <li>
    <a href="#">
      <div class="caption">2 Fast 2 Furious</div>
      <img alt="2 Fast 2 Furious" class="thumbnail" height="111" src="http://cf2.imgobject.com/t/p/w500/4rDV8TgaILHRfX1IRgpysjkD9A0.jpg" width="74" />
    </a>
  </li>
 ...
</ul> 
```

Here is an example of what it looks like (weird spacing highlighted with pink box): ![Example Image with highlighted issues](https://i.stack.imgur.com/dhyvQ.jpg)

I understand why the widths are off, due to the caption lengths being longer than the image's width (although I'd like to fix that somehow too). Why is this happening, and is there any good method to prevent it?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T06:16:38.363

试试这个，我想它会解决你的问题

[http://jsfiddle.net/32AcT/1/](http://jsfiddle.net/32AcT/1/)

```
.thumbnails > li { width:100px; }

.thumbnails .caption{ overflow :hidden; text-overflow:ellipsis; white-space:nowrap; }

.thumbnails img{ height:111px; width:74px} 
```

bootstrap-combined.min.css 第 23 行的主要问题`height:auto;`

```
img {
max-width: 100%;
width: auto 9;
height: auto;
vertical-align: middle;
border: 0;
-ms-interpolation-mode: bicubic;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:51:37.240

如果我的问题是正确的，说明是导致它的原因。你会对这样的解决方案说什么：http: [//jsfiddle.net/32AcT/4/](http://jsfiddle.net/32AcT/4/)

与您的解决方案的不同之处在于 Caption 在缩略图（见代码 1）div 内，因此宽度有限（见代码 2）。可能是您必须使用 div 的高度进行一轮比赛，但我想这将是“最佳”解决方案。

代码 1：

```
 <li class="span4">
        <div class="thumbnail">
            <img src="http://cf2.imgobject.com/t/p/w500/1ZjDmPKMUtout8hR77qmK1llgls.jpg">
            <div class="caption">
                <h3>Along Came a Spider</h3>
                <p><a href="#" class="btn btn-primary">Action</a> <a href="#" class="btn">Action</a></p>
            </div>
        </div>
    </li> 
```

代码 2：

```
.thumbnail{
    height:650px!important;
} 
```

# c# - 在 C# 中将小时转换为天

> ID：16182206
> 
> 赞同：1
> 
> 时间：2013-04-24T02:07:11.870
> 
> 标签：c#, asp.net, .net, datetime, timespan

我对 C# 很陌生，我一直在研究，但在我问这个问题之前找不到我正在寻找的具体内容。

在 C 中仅将小时数转换为天数的最佳方法是什么？

如果您知道任何文章或快速简单的答案来指出我，那就太好了。我会继续寻找。

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-24T02:09:38.883

您可以尝试使用`TimeSpan`结构。我们有一些静态方法来进行这些转换，比如：`TimeSpan.FromHours`它会返回一个新的`TimeSpan`，我们可以读取`TotalDays`属性。或者你可以为它创建一个方法：

```
public static double ConvertHoursToTotalDays(double hours)
{
    TimeSpan result = TimeSpan.FromHours(hours);

    return result.TotalDays;
} 
```

并称之为：

```
double days = ConvertHoursToTotalDays(120); // should be 5.0 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T02:09:18.030

为什么不简单地除以 24（一天中的小时数），您将得到天数。

```
int hours = 48;

double days = hours/24; 
```

# c++ - 依赖于其他 DLL 的 DLL？

> ID：16182215
> 
> 赞同：3
> 
> 时间：2013-04-24T02:07:57.307
> 
> 标签：c++, deployment

静态链接不是一种选择。

假设我有一个依赖 DLL 的可执行文件。一种解决方案是将 DLL 与可执行文件放在同一文件夹中。现在假设我需要将 DLL 注入到依赖 DLL 的进程中。因为 DLL 是注入的，我将把它依赖的 DLL 放在哪里？在同一个文件夹中？或者在注入的进程的目录中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T02:50:44.747

依赖于一个或多个其他 DLL 的 DLL 并不是什么特别的东西。即使是微不足道的 DLL 也会依赖于驻留在其他 DLL 中的 Windows 共享组件。这些“共享组件”的一个很好的例子是`Kernel32.dll`CRT DLL 等`MSVCR80.DLL`。

[您可以通过调用Dependency Walker](http://www.dependencywalker.com/)准确找出您的 DLL 或 EXE 需要哪些其他 DLL 。为此，只需`depends.exe`从 Visual Studio 命令提示符运行并将感兴趣的 DLL 拖放到出现的窗口中。如果您没有可用的依赖项步行器，您可以从上面的链接下载它。

我不确定 DLL 注入的东西，但如果将所有（其他 DLL）依赖项放在与 DLL 相同的文件夹中，通常应该就足够了，这将是加载这些 DLL 的 EXE 所在的文件夹。

例如：如果`C:\test\foo.exe`需要`bar.dll`（这又需要`baz.dll`，假设`baz.dll`不是标准的 Windows 共享组件），那么您可以将`bar.dll`和`baz.dll`放在`C:\test`.

操作系统如何确定加载哪个 DLL 的方式还有很多，因为同一 DLL 的多个版本可能存在于不同的位置，而且 MSDN 有一篇关于动态链接库搜索顺序的有用[文章](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586%28v=vs.85%29.aspx)。

# mysql - Web 应用程序数据库

> ID：16182217
> 
> 赞同：0
> 
> 时间：2013-04-24T02:07:58.617
> 
> 标签：mysql, database, web-applications, firebird

我想在**ASP.Net**中启动一个 Web 项目，但仍未决定使用哪个数据库。我有使用 MSSQL 和 Oracle 的经验，但我想要一个对最终用户免费的。

我的选择是：**MySQL、Firebird 和 PostgreSQL。**

你推荐什么，为什么？

感谢您的支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T02:21:33.097

我已经广泛使用了 MySql、PostgreSql 和 MS Sql。我会推荐MySql。它易于设置和配置，具有您需要的所有功能，并且被世界各地无数的开源项目使用，包括 Wordpress，大量的人使用它来支持他们的网站。

如果您需要更强大和更细粒度的支持，我会使用 PostgreSql。它和它的祖先一起已经存在了很长时间，并且曾经为世界上最大的数据库提供动力，这是一个由雅虎运行的 2 PB 的数据库。

不过，对于一个简单的 Web 应用程序，我会推荐 MySql。它被更多人使用，是事实上的开源数据库。

# c - 在 C 中使用 fork()？

> ID：16182218
> 
> 赞同：0
> 
> 时间：2013-04-24T02:08:23.890
> 
> 标签：c, fork

我被问到这个问题做家庭作业，我很难弄清楚。如果有人可以帮助我，我将不胜感激。

什么Linux库函数类似于fork()，但是父进程被终止了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T02:10:30.697

我相当肯定，无论是谁给你分配了这个作业**[`exec()`](http://linux.die.net/man/3/exec)**，都是从[POSIX](http://en.wikipedia.org/wiki/Posix) API 标头中寻找函数系列[**`<unistd.h>`**](http://en.wikipedia.org/wiki/Unistd.h)，因为没有什么比你描述的那种功能更接近的了。

该`exec()`函数族执行一个新进程，并用新执行的进程替换当前运行的进程地址空间。

从[手册页](http://linux.die.net/man/3/exec)：

> exec() 系列函数用新的进程映像替换当前进程映像。

它与“终止”父进程并不完全相同，但实际上它会导致类似的情况，即父进程的地址空间被子进程的地址空间擦除（替换）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:33:16.723

> 什么Linux库函数类似于fork()，但是父进程被终止了？

父进程不应该终止，因为它必须等待子进程完成执行，之后它们将处于一种称为“僵尸状态”的状态，现在清理子进程的剩余部分是父进程的责任. 父进程可以在不清理子进程的情况下终止，但这不是正确的方法，因为子进程的退出状态应该由父进程收集和检查。

这是一个示例，以演示我刚才所说的...

```
#include<stdio.h>
#include<unistd.h>
#include<sys/wait.h>

int main()
{
  pid_t cpid = 1 ;
  int status;

  cpid = fork();

  // Load a application to the child using execl() , and finish the job

  printf("Parent waiting for child to terminate\n");

  int wait_stat = waitpid(-1,&status,0);     // Parent will hang here till all child processes finish executing..
  if (wait_stat < 0)
  {
    perror("waitpid error");
    exit(-1);
  } 

  // WIFEXITED and WEXITSTATUS are macros to get exit status information, of the child process

  if (WIFEXITED (status))          
  {
  printf("Child of id %u cleaned up\n",wait_stat);
  printf("Exit status of application = %u\n",WEXITSTATUS(status));
  }

} 
```

# html - 放大时如何阻止边框破裂？

> ID：16182219
> 
> 赞同：1
> 
> 时间：2013-04-24T02:08:47.383
> 
> 标签：html, css, xhtml, border

[http://mistcave.com/temp/](http://mistcave.com/temp/)

放大页面并向右滚动。页眉底部的 1px 黑色边框被剪掉了一点。我该如何解决这个问题？

![](https://i.stack.imgur.com/iFKID.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T02:18:01.533

将边框底部属性放在标题 div 中

还要注意，如果您使用的是谷歌浏览器，您可以选择元素并查看每个 div 的尺寸，这将有助于您在未来排除故障

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:34:28.130

做了一个肮脏的黑客。坚韧它完美地工作。

[演示小提琴](http://jsfiddle.net/5mwhR/)

```
#wrap {
    width: 100%;
}

#header {
    border-bottom: 1px solid #000000;
    margin-bottom: -1px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T02:18:14.203

将 CSS 中#wrap 的宽度设置为 100%

或者只需执行以下操作：

```
body
{
    overflow-x: hidden;
}
.extendfull, .extendleft
{
    padding-left: 3000px;
    margin-left: -3000px;
}
.extendfull, .extendright
{
    padding-right: 3000px;
    margin-right: -3000px;
} 
```

overflow-x: hidden 防止水平滚动，增加填充是不言自明的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T02:19:27.650

这并不重要。因为边框底部效果遵循浏览器的大小。除了您之外，没有网络用户会放大和缩小页面。

它在每个屏幕尺寸上都很好，只是不要放大和缩小。这很好，每个站点也有这个问题，但这不是什么大问题。

# php - preg_replace 将下划线变为空格，除非下划线是给定模式的一部分

> ID：16182222
> 
> 赞同：2
> 
> 时间：2013-04-24T02:09:09.433
> 
> 标签：php, regex, preg-replace, preg-match

我正在尝试使用一个字符串，例如：

> $search = "Bob Loblaw + Mark Hamill RT45_part12 foo_092344"

并删除所有非字母数字字符，除非下划线位于**RT45_part12**中。

我想要的结果应该是：

“Bob Loblaw Mark Hamill RT45_part12 foo 092344”

> preg_replace("/[^A-Za-z0-9_]/", ' ', $search)

查找 RT45_part12 的正则表达式是

> \b[a-zA-Z]{2,4}[0-9]{1,5}_part[0-9]{1,5}\b

我不知道如何将这两者结合起来，以便它跳过 RT45_part12 中的下划线，但在 derrick 之后替换下划线。我需要使用前瞻、后瞻功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T02:53:30.973

希望这有帮助

```
$search = "Bob Loblaw + Mark Hamill RT45_part12 foo_092_34_4";

echo preg_replace("/[^a-zA-Z0-9 ]|(RT45_part12)/", '$1', $search);

//Bob Loblaw  Mark Hamill RT45_part12 foo092344 
```

或者

```
echo preg_replace("/[^a-zA-Z0-9 ]|([a-zA-Z]{2,4}[0-9]{1,5}_part[0-9]{1,5})/", '$1', $search); 
```

更新（非字母数字字符到空格）（它只适用于 RT45_part12 之后有空格）

```
echo preg_replace("/[^a-zA-Z0-9 ]|([a-zA-Z]{2,4}[0-9]{1,5}_part[0-9]{1,5}) /", '$1 ', $search); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:29:07.780

这限制够吗？

```
echo preg_replace ( "~[^\w ]++|_(?!part\d{1,5}\b)~i", " ", $mystring); 
```

但是，如果您想确定，请使用：

```
echo preg_replace ( "~[^\w ]++|(\b[a-z]{2,4}\d{1,5}_part\d{1,5}\b)|_~i", "$1 ", $mystring); 
```

# python - 在 Python 中，long 分割然后正确修改的问题

> ID：16182223
> 
> 赞同：0
> 
> 时间：2013-04-24T02:09:10.160
> 
> 标签：python, rsa, sieve, primality-test

我正在尝试为我作为练习编写的 RSA 实现实现素数测试。我主要使用 Rabin-Miller，但我确实有一个埃拉托色尼筛法，制定了一个低于 1000 个素数的列表，用于快速测试以确定候选人是否将其中一个作为素数。

相关功能是：

```
def comp_test(to_test, primeList):
    for i in primeList:
        if (to_test / float(i)) % 1 == 0:
            return False
    return True 
```

其中 primeList 是 Sieve 生成​​的素数列表。这在 to_test 值为 2^55 左右的情况下非常有效，但超过了这一点

```
(to_test / float(i)) % 1 
```

语句总是计算为 0.0，即使当我将它交给拉宾米勒确定为素数的 to_test 时也是如此。我不确定这可能是什么。我不太清楚 Python 如何处理非常大的数字，但据我所知 2^55 似乎不会是任何类型的溢出边界。使用 Sieve 时，该功能明显更快，并且为 2048 位实现生成密钥需要一段时间，所以即使这是一个练习，我想看看我是否可以让 Sieve 工作。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T02:12:03.320

Python 只处理浮点数的 53 位精度（大约 16 位小数），因此使用大的浮点数不会很好。

请改用模运算符：

```
>>> (2**80 / float(3)) % 1  # Doesn't work
    0.0
>>> 2**80 % 3  # Works
    1L
>>> 2**80 % 2  # Works
    0L 
```

它也比除法快很多：

```
>>> %timeit (2**40 / float(2)) == 0
1000000 loops, best of 3: 224 ns per loop
>>> %timeit 2**40 % 2 == 0        
10000000 loops, best of 3: 53.5 ns per loop 
```

如果`i`是 的一个因数`n`，则`n % i == 0`(`n`与`0`模一致`i`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T03:06:19.690

我建议您使用 GMP 来满足您的大量需求。

以下是我过去在 Python 中完成的一些与主要相关的项目：

```
http://stromberg.dnsalias.org/svn/primes-below
http://stromberg.dnsalias.org/svn/big-prime
http://stromberg.dnsalias.org/svn/huge-prime
http://stromberg.dnsalias.org/svn/sieve 
```

# javascript - JQuery Ajax POST 抛出空错误而不发出请求

> ID：16182233
> 
> 赞同：10
> 
> 时间：2013-04-24T02:09:42.217
> 
> 标签：javascript, ajax, jquery, post

我有一个对任何锚点发出 Ajax 请求的函数。请求方法可以是 GET 或 POST。在这种情况下，我想在不使用表单的情况下进行 POST，但 Ajax 请求甚至在发送请求之前就会引发错误。错误的值为“error”，所有错误/故障描述变量都是“”。

```
 function loadPage(url,elem_id,method,data) {
    ajaxLoading(elem_id);
    $.ajax({
        type: method,
        url: url,
        data: data,
        success:function(data){
            $("#"+elem_id).html(data);;
        },
        error:function(request,textStatus,error){
            alert(error);
        }
    });
 } 
```

当函数被调用时，参数是这些（从 js 控制台复制）：

```
data: "partial=yes"
elem_id: "page"
method: "post"
url: "/projects/2/follow" 
```

如所要求的，这里是调用 loadPage 函数的代码。

```
$("body").on("click","a.ajax",function(event) {
    var _elem = getDataElem($(this));
    var _method = getRequestMethod($(this));
    var _partial = getRequestPartial($(this));
    handlers.do_request(event,$(this).attr("href"),_elem, _method, _partial);
});

var handlers = (function() {
    var obj = {};
    obj.do_request = function(event,url,elem_id,method,data) {
        event.preventDefault();

        loadPage(url,elem_id,method,data);
        history.pushState({selector:elem_id,method:method,data:data},null,url);
    };
}()); 
```

Ajax 请求失败后，默认发出请求并响应成功。在我读过的所有内容中，这似乎是发出 POST 请求的有效方式（不需要表单）。

我在函数中做错了吗？为什么错误信息为空？

谢谢

编辑：

我一直在想，对于来自“表单”的 POST，当使用序列化函数（例如“var data = $(this).serialize();”）创建变量“数据”时，该函数可以工作。当我在没有“表单”的情况下进行 POST 时，“数据”的格式是否可能在某种程度上是错误的？也许 JQuery Ajax 函数在进行 POST 时不接受像“partial=yes”这样的简单字符串作为数据。对此有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-19T22:05:43.073

我刚遇到这个问题，一两个小时后，想尝试将缓存设置为 false。那为我修好了。

```
$.ajax({
    url: url,
    cache: false,
    type: method
}); 
```

不幸的是，当我再次删除缓存时，我的请求就像从未出现过问题一样工作。似乎设置`cache:false`使某些东西“点击”。

那好吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T03:36:45.490

只是一个猜测，但在[文档](http://api.jquery.com/jQuery.ajax/)中，类型参数全部大写，即`'POST'`而不是`'post'`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T16:43:41.000

尝试：

```
function loadPage(url,elem_id,method,dat) {
    ajaxLoading(elem_id);
    $.ajax({
        type: method,
        url: url,
        data: dat,
        success:function(data){
            $("#"+elem_id).html(data);;
        },
        error:function(request,textStatus,error){
            alert(error);
        }
    });
 } 
```

我想知道您是否在使用以关键字命名的变量时遇到问题。如果这不起作用，请尝试不带参数调用 loadPage 并对所有 ajax 参数进行硬编码，看看是否有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-28T18:03:48.273

无法解决问题，也找不到发生的原因。虽然，我找到了一种解决方法，通过使用隐藏的空表单而不是带有方法“POST”的锚点。对于表单，该功能运行良好。

感谢您的回答

# c++ - C++ 入门练习 2.41

> ID：16182237
> 
> 赞同：0
> 
> 时间：2013-04-24T02:10:21.937
> 
> 标签：c++

我被困在第 2 章末尾的 1 个练习中！我对这个练习的问题是我无法弄清楚如何在逻辑上循环询问多次输入！我编写了两次要求输入的代码！以前用书提供的标题我很容易完成这项任务，但这种方式不再起作用了。所以我会给你练习和代码，希望你能帮助我。对不起我的英语。

**练习**
编写程序，该程序将在您工作的地方有一个类`main`。
编写代码，它将读取具有相同书号的几笔交易，并用该书号计算每笔交易。

**我的代码**

```
#include <iostream>
#include <string>
using namespace std;

//Data structure Code 
struct Sales_Data
{
std::string bookNo;
unsigned unit_sold;
double revenue;
};
int main()
{

Sales_Data data1,data2; //Data wich will hold input 
double price;           //Price per book used to calculate total revenue

// Checking if there was data input of book number units sold and price
if (std::cin>>data1.bookNo>>data1.unit_sold>>price)
{
    int cnt=1;  //Start Counter 
    data1.revenue=data1.unit_sold*price;// data1 calculating total revenue from price and unit_sold 

    while (std::cin>>data2.bookNo>>data2.unit_sold>>price)
    {
        data2.revenue=data2.revenue*price;

              //checking if book name is same
        if (data1.bookNo == data2.bookNo)
        {
            ++cnt; //Incrementing counter if they same
            unsigned totalCnt=data1.unit_sold+data2.unit_sold;
            double totalRevenue=data1.revenue+data2.revenue;
            //Print out result
            std::cout<<cnt<<data1.bookNo<<" "<<totalCnt<<" "<<totalRevenue<<" ";
            getchar();
            getchar();
            getchar();
            if (totalCnt != 0)

                std::cout<<totalCnt/totalRevenue;
            else 
                std::cout<<"(No Sales)"<<std::endl;
                return 0;
        }else{
            std::cerr<<"Book numbers isn't same"<<std::endl;
            return -1;
        }           
    }
}
return 0;          
} 
```

而且也不确定为什么，但**收入**给了我垃圾号码。感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T02:13:00.350

你`data2.revenue`在使用它之前初始化了吗？

```
data2.revenue=data2.revenue*price; 
```

要 init `data2`，您可以：

```
struct Sales_Data
{
    std::string bookNo;
    unsigned unit_sold;
    double revenue;

    Sales_Data(std::string s = "", unsigned u = 0, double r = 0)
        : bookNo(s), unit_sold(u), revenue(r) {}
}; 
```

或者

```
Sales_Data data2 = { "a", 0, 0 }; 
```

或者

```
Sales_Data data2;
data2.bookNo = "";
data2.unit_sold = 0;
data2.revenue = 0; 
```

对于多个输入：

```
#include <map>
#include <string>
#include <iostream>
using namespace std

int main()
{
    map<string, Sales_Data> count;
    Sales_Data data;

    while (cin >> data.bookNo >> data.unit_sold) { // <- this will allow you read multiple transactions

        if (map.find(data.bookNo) != count.end()) {
            count[data.bookNo].unit_sold += data.unit_sold;
            // and do some other thing.
        } else {
            count[data.bookNo] = data.
        }
    }
    return 0;
} 
```

# javascript - 制作字典并按属性搜索

> ID：16182242
> 
> 赞同：0
> 
> 时间：2013-04-24T02:10:39.540
> 
> 标签：javascript

我如何制作一个返回单词含义的字典函数......例如

这是字典，一个简单的对象，具有属性或具有含义的单词，

```
var dictionary=
{
    'locomoción':
    {
        means:'Traslado de un lugar a otro.',
    }
} 
```

这是必须返回单词含义的函数，例如，我必须搜索“locomocion”的含义，该函数必须返回“Traslado de un...bla bla bla”

```
exports.diccionario=function(key)
{
    //search by object property
    //if(dictionary[key] exists) returns dictionary[key].means;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T02:15:43.497

使用`in`运算符检查是否存在：

```
var key = 'locomocion';

if (key in dictionary) {
  return dictionary[key].means;
} 
```

# c++ - C++ 代码输出说明

> ID：16182244
> 
> 赞同：-1
> 
> 时间：2013-04-24T02:11:07.170
> 
> 标签：c++, loops, pointers, for-loop, output

我有以下代码，问题要求我找到输出。我通过输入找到了输出 (2)，但我无法弄清楚如何/为什么。有什么帮助吗？

这是代码：

```
int scores[5];
int *numbers = scores;
for (int i=0; i <=4; i++)
  *(numbers+i)=i;
cout << numbers[2] <<endl; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T02:13:16.177

您的代码基本上可以

```
scores[2] = 2;
cout<<scores[2]<<endl; 
```

因此答案..

更详细地说：

```
int scores[5];
int *numbers = scores;  //numbers points to the memory location of the array scores
for (int i=0; i <=4; i++) // as mentioned, stray ';'
  *(numbers+i)=i; //same as numbers[i] = i  which is same as scores[i] = i
cout << numbers[2] <<endl; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:17:13.587

for 循环执行的唯一语句是

```
*(numbers+i)=i; 
```

它将使用尊重运算符 (*) 将 int 元素的索引存储在该位置。

然后打印出第三个数字，它等于 2，因为数组从索引 0 开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T02:19:55.940

您设置一个指向数组的第一个内存位置的指针，然后遍历一系列内存地址并写入它们。应该注意的是，使用带有解引用的指针算术，

```
*(pointer + i) = i; 
```

与使用下标运算符相同：

```
pointer[i] = i; 
```

# php - 如何检查是否已下订单

> ID：16182246
> 
> 赞同：0
> 
> 时间：2013-04-24T02:11:16.937
> 
> 标签：php, mysql, validation

我有一件很简单的事情要去这里。基本查询，但是当我决定更进一步时，我向自己抛出了一条曲线。

基本上它是这样的：

*   检查用户是否在表单中输入了值
*   如果不是，则退出并显示基本错误
*   如果他们这样做了，则根据数据库检查该值以确保它有效/存在
*   如果它有效/存在，设置一个会话变量并去订单表格
*   如果不是，则退出并显示基本错误

我现在要做的是在那里添加另一个签到，如果用户 ID 存在，那么我需要检查订单状态，如果他们已经下单，那么我想退出并显示一条简单的消息让他们知道他们已经下订单并正在处理中。如果他们还没有订购，那么我想继续上面的订购单。

数据库有一个名为“ordered”的字段，如果他们已订购，则为 1，如果尚未订购，则为 0。

这是我正在运行的代码，我尝试了几件事，但它一直在爆炸：

```
 <?php
    session_start();
    $db_host = 'localhost';
    $db_username = 'xxxxxx';
    $db_password = 'xxxxxxxx';
    $db_name = 'xxxxxxxx';

    mysql_connect( $db_host, $db_username, $db_password) or die(mysql_error());
    mysql_select_db($db_name); 

    if ($_SERVER['REQUEST_METHOD'] == "POST") {
        /** Check whether the user has filled in the text field "employee_id" */
        if ($_POST['employee_id'] == "") {
            $IdIsEmpty = true;
        }else{ 
            $employee_id = $_POST['employee_id'];  
            if(mysql_num_rows(mysql_query("SELECT employee_id FROM TABLE_2         WHERE         employee_id = '$employee_id'"))){
                // if userid exists
                $_SESSION['emp_id'] = $employee_id;
                header('Location: orderform.php');
            exit;
            }
            $IdNotFound = true;
        }
    }?>

    <head>
    </head>
    <body>
    <b>Please enter your Employee ID: </b><br><br>
    <form class="" action="index.php" method="post" enctype=
    "multipart/form-data" name="test_form" id="test" accept-charset=
    "utf-8"><input type="text" name="employee_id">
        <?php
        /** Display error messages if "employee_id" field is empty or if ID does not         exist */
        if ($IdIsEmpty) {
            echo ("<br>");
            echo ("<b>Enter your employee ID, please!</b>");
            echo ("<br>");
        }?>
        <?php
        /** Display error messages if "employee_id" field is empty or if ID does not exist */
        if ($IdNotFound) {
            echo ("<br>");
            echo ("<b>Your employee ID not found!</b>");
            echo ("<br>");
        }?>

        <input type="submit" value="Submit">
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T02:27:54.973

除了像 Shivan 建议的那样交换`mysql_`功能外`mysqli_`，您还应该这样做：

*   **转义**任何输入 - 你**永远不能**信任用户提供的数据，所以
    `$employee_id = mysql_real_escape_string($_POST['employee_id']);`
    如果它是一个数字，你也可以这样做
    `$employee_id = intval($_POST['employee_id']);`
    只要在使用输入时记住这一点。

*   现在解决您的问题：

只需`ordered`在同一查询中选择您的字段：

```
$order_qry = mysql_query("
    SELECT employee_id, ordered 
    FROM TABLE_2 WHERE employee_id = '$employee_id'
");
if(mysql_num_rows($order_qry)) {
    $order = mysql_fetch_object($order_qry);
    if( ! $order->ordered) { // If not ordered
        // ... do something
    } else { // If already ordered
    // ... tell the client
    }
} else {
// No record found ... error message here
} 
```

# datetime - 如何为 d3.js 配置时间范围

> ID：16182247
> 
> 赞同：3
> 
> 时间：2013-04-24T02:11:20.670
> 
> 标签：datetime, d3.js

我已经尝试`.ticks(d3.time.days, 2)`在此设置 xAxis 的配置时间范围。

```
var data = [{"date":"2012-03-20","total":3},{"date":"2012-03-21","total":8},{"date":"2012-03-22","total":2},{"date":"2012-03-23","total":10},{"date":"2012-03-24","total":3},{"date":"2012-03-25","total":20},{"date":"2012-03-26","total":12}, {"date":"2012-03-27","total":22}, {"date":"2012-03-28","total":21}, {"date":"2012-03-29","total":12}, {"date":"2012-03-30","total":12}, {"date":"2012-03-31","total":12}, {"date":"2012-04-1","total":12}];

var margin = {top: 40, right: 40, bottom: 40, left:40},
    width = 600,
    height = 500;

var x = d3.time.scale()
    .domain([new Date(data[0].date), d3.time.day.offset(new Date(data[data.length - 1].date), 1)])
    .rangeRound([0, width - margin.left - margin.right]);

var y = d3.scale.linear()
    .domain([0, d3.max(data, function(d) { return d.total; })])
    .range([height - margin.top - margin.bottom, 0]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient('bottom')
    .ticks(d3.time.days, 2)
    .tickFormat(d3.time.format('%a %d'))
    .tickSize(0)
    .tickPadding(20);

var yAxis = d3.svg.axis()
    .scale(y)
    .orient('left')
    .tickPadding(8);

var svg = d3.select('body').append('svg')
    .attr('class', 'chart')
    .attr('width', width)
    .attr('height', height)
  .append('g')
    .attr('transform', 'translate(' + margin.left + ', ' + margin.top + ')');

svg.selectAll('.chart')
    .data(data)
  .enter().append('rect')
    .attr('class', 'bar')
    .attr('x', function(d) { return x(new Date(d.date)); })
    .attr('y', function(d) { return height - margin.top - margin.bottom - (height - margin.top - margin.bottom - y(d.total)) })
    .attr('width', 10)
    .attr('height', function(d) { return height - margin.top - margin.bottom - y(d.total) });

svg.append('g')
    .attr('class', 'x axis')
    .attr('transform', 'translate(0, ' + (height - margin.top - margin.bottom) + ')')
    .call(xAxis);

    svg.append('g')
      .attr('class', 'y axis')
      .call(yAxis); 
```

但是时间范围是 Sat 31 - Sun 1。我希望它是 Sat 31 - Mon 2。

这是一个[jsFiddle](http://jsfiddle.net/vinhnguyenle/KWRxW/260/)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T08:10:23.797

我更新[了你的小提琴](http://jsfiddle.net/KWRxW/261/)，相关部分如下：

```
var startDate = new Date(data[0].date);
var endDate = new Date(data[data.length - 1].date);

var everyOtherIncorrect = d3.time.day.range(startDate, endDate, 2);

var everyDate = d3.time.day.range(startDate, endDate);
var everyOtherCorrect = everyDate.filter(function (d, i) {
    return i % 2 == 0;
}); 
```

您的问题是它`d3.time.day.range(start, end, 2)`实际上并不是每隔一天生成一次，而是总是从每月 1 日开始。（[参见 D3 API 参考](https://github.com/mbostock/d3/wiki/Time-Intervals#wiki-interval_range)）

使用时也会出现同样的问题

```
d3.svg.axis().ticks(d3.time.days, 2) 
```

因此，如果您将其替换为手动生成的日期，它将产生所需的结果：

```
d3.svg.axis().tickValues(everyOtherCorrect) 
```

# c++ - 我的 C++ 程序中出现非常奇怪的错误

> ID：16182250
> 
> 赞同：2
> 
> 时间：2013-04-24T02:12:08.023
> 
> 标签：c++, windows

在我插入数学部分之前，我完成的程序运行良好。完成数学部分后，我构建了代码，没有出现错误。但是，当我尝试调试我的程序时，我得到了这个提示：“Reciept.exe 中 0x4f7ccb1a (msvcr100d.dll) 处的未处理异常：0xC0000005：访问冲突写入位置 0x4e65ab48。”

我一开始以为是数学问题，但后来我删除了它并再次运行程序，而应该像以前那样出现的结果却没有。同样的提示出现了。

你能告诉我发生了什么事吗？

这是我的代码：

```
#include <iostream>
#include <string>
#include <iomanip>

using namespace std;

struct menuItemType
{
    string menuItem;
    double menuPrice;
    double sum;
    double amountTotal;
    double tax;
};

void getData(menuItemType menuList[8]);
void printCheck(menuItemType menuList[8]);
void showMenu(menuItemType menuList[8]);

int main()
{
    menuItemType menuList[8];
    getData(menuList);
    showMenu(menuList);
    printCheck(menuList);

    system ("pause");
    return 0;
}

void getData(menuItemType menuList[8])
{
    menuList[1].menuItem = "Plain Egg"; 
    menuList[1].menuPrice = 1.45;
    menuList[2].menuItem = "Bacon and Egg";
    menuList[2].menuPrice = 2.45;
    menuList[3].menuItem = "Muffin";
    menuList[3].menuPrice = 0.99;
    menuList[4].menuItem = "French Toast";
    menuList[4].menuPrice = 1.99;
    menuList[5].menuItem = "Fruit Basket";
    menuList[5].menuPrice = 2.49;
    menuList[6].menuItem = "Cereal";
    menuList[6].menuPrice = 0.69;
    menuList[7].menuItem = "Coffee";
    menuList[7].menuPrice = 0.50;
    menuList[8].menuItem = "Tea";
    menuList[8].menuPrice = 0.75;
}

 void showMenu(menuItemType menuList[8])
 {
    cout << "Please enter the numbers  beside the product that you 
        would like to  have today.
        When you are finished press 0.\n" << endl;
    cout << "1 - Plain Egg" << setw(14) << "$1.45" << endl;
    cout << "2 - Bacon and Egg" << setw(10) << "$2.45" << endl;
    cout << "3 - Muffin" << setw(17) << "$0.99" << endl;
    cout << "4 - French Toast" << setw(11) << "$1.99" << endl;
    cout << "5 - Fruit Basket" << setw(11) << "$2.49" << endl;
    cout << "6 - Cereal" << setw(17) << "$0.69" << endl;
    cout << "7 - Coffee" << setw(17) << "$0.50" << endl;
    cout << "8 - Tea" << setw(21) << "$0.75\n" << endl;
}

void printCheck(menuItemType menuList[8])
{
    int selections = 1;

    while(selections != 0)
    {
        cout << "\n Please enter one of the choice from our menu: ";
        selections += selections;
        cin >> selections;

        switch(selections)
        {
            case 0:
            break;

            case 1:
            cout << menuList[1].menuItem << setw(14) << "$1.45";
            break;
            case 2:
            cout << menuList[2].menuItem << setw(10) << "$2.45";
            break;
            case 3:
            cout << menuList[3].menuItem << setw(17) << "$0.99";
            break;
            case 4:
            cout << menuList[4].menuItem << setw(11) << "$1.99";
            break;
            case 5:
            cout << menuList[5].menuItem << setw(11) << "$2.49";
            break;
            case 6:
            cout << menuList[6].menuItem << setw(17) << "$0.69";
            break;
            case 7:
            cout << menuList[7].menuItem << setw(17) << "$0.50";
            break;
            case 8:
            cout << menuList[8].menuItem << setw(20) << "$0.75";
            break;
            default:
            cout << "The number you just enter is not between 1 and 8\. Please try again.\n";
            break;

            //  const double tax = 0.05; 
            int x;
            double amountTotal = 0;
            double tax = 0; 
            cout << endl;
            cout << endl;
            cout << endl;
            cout << " Welcome to Bry's Restaurant! " << endl; 
            cout << endl;

            for (x=0; x<2; x++) 
            { 
                cout.precision(2);
                cout << showpoint;
                tax = tax + ((menuList[x].menuPrice) * 0.10); 
                    cout << menuList[x].menuItem << setw(16) << "$ " << menuList[x].menuPrice <<  endl; 
            }
            cout.precision(2);
            cout << showpoint;
            cout<<"     Tax:                         $ " << tax << endl; 
            cout.precision(2);
            cout << showpoint;
            //amount
            for (x=0; x<2; x++) 
            { 
                cout.precision(2);
                cout << showpoint;
                amountTotal = amountTotal +(menuList[x].menuPrice);
            }
            amountTotal = amountTotal + tax;
            cout.precision(3);
            cout << showpoint;
            cout<<"     Amount Total:                  $ " << amountTotal <<endl;
        }
    }
    cout << "\n Thank you for coming to Bry's Restaurant! Have a blessed day!" << endl;
    system ("pause");
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T02:14:40.407

C 和 C++ 中的数组是从 0 开始的。您已声明：

```
menuItemType menuList[8]; 
```

这意味着您可以索引元素 0 到 7。但是您正在索引 1 到 8。当您读取或写入索引 8 时，您将遇到访问冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:15:11.390

C++ 中的数组索引从 0 开始，而不是 1。

# iphone - 核心数据与强大的数据库

> ID：16182254
> 
> 赞同：0
> 
> 时间：2013-04-24T02:12:53.957
> 
> 标签：iphone, sql-server, database, core-data

我正在编写一个 iphone 应用程序，它将在包含大量数据（包括地理和几何类型）的数据库上执行许多查询，但具有非常简单的模式。数据库显然将位于服务器上

这是我的问题： 1\. core-data 可以容纳大型数据库 2\. core-data 是否支持地理和几何类型，例如 sql server 和 oracle 数据库中的空间特征？3.关于iphone应用程序的最佳实践和推荐的数据库是什么

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T02:34:52.887

> core-data 可以保存大型数据库吗

谈到数据库，人们对“大”的含义有着截然不同的看法。[这个答案](https://stackoverflow.com/a/5717068/643383)很好地涵盖了核心数据的局限性；本质上，Core Data 的局限性取决于底层数据存储。在 iOS 上，Core Data 使用 SQLite 进行数据存储。

> core-data 是否支持地理和几何类型，例如 sql server 和 oracle 数据库中的空间特征？

如果您将 Core Data 视为数据库，那您就大错特错了。Core Data 是一个对象持久化管理器。它没有任何空间特征；另一方面，您可以在存储在 Core Data 中的对象中编写您想要的任何代码。

> iphone 应用程序的最佳实践和推荐的数据库是什么

当然，这取决于。如果你想要一个传统的数据库，有 SQLite。如果您要管理大量对象，请使用 Core Data。如果连接不会成为问题，那么连接到服务器端数据库的 Web 服务可能是可行的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:19:23.430

通常，在使用在线数据库和 Core Data 之后，使用 REST API 的在线数据库是您最好的选择。我还没有看到使用空间特征等特殊类型的选项，Apple 只为您提供它们的基本类型。

# c++ - 如何在 Mac OS X 上为 ZeroMQ 安装 C++ 绑定？

> ID：16182259
> 
> 赞同：14
> 
> 时间：2013-04-24T02:13:18.593
> 
> 标签：c++, macos, zeromq

上

```
g++ actualApp.cpp -lzmq 
```

我明白了

```
actualApp.cpp:6:19: error: zmq.hpp: No such file or directory
actualApp.cpp: In function ‘int main()’:
actualApp.cpp:13: error: ‘zmq’ has not been declared
actualApp.cpp:13: error: expected `;' before ‘context’
actualApp.cpp:14: error: ‘zmq’ has not been declared
actualApp.cpp:14: error: expected `;' before ‘socket’
actualApp.cpp:15: error: ‘socket’ was not declared in this scope
actualApp.cpp:18: error: ‘zmq’ has not been declared
actualApp.cpp:18: error: expected `;' before ‘request’
actualApp.cpp:21: error: ‘request’ was not declared in this scope
actualApp.cpp:28: error: ‘zmq’ has not been declared
actualApp.cpp:28: error: expected `;' before ‘reply’
actualApp.cpp:29: error: ‘reply’ was not declared in this scope
actualApp.cpp: At global scope:
actualApp.cpp:33: error: expected constructor, destructor, or type conversion at end of input 
```

为了

```
//
//  Hello World server in C++
//  Binds REP socket to tcp://*:5555
//  Expects "Hello" from client, replies with "World"
//
#include <zmq.hpp>
#include <string>
#include <iostream>
#include <unistd.h>

int main () {
    //  Prepare our context and socket
    zmq::context_t context (1);
    zmq::socket_t socket (context, ZMQ_REP);
    socket.bind ("tcp://*:5555");

    while (true) {
        zmq::message_t request;

        //  Wait for next request from client
        socket.recv (&request);
        std::cout << "Received Hello" << std::endl;

        //  Do some 'work'
        sleep (1);

        //  Send reply back to client
        zmq::message_t reply (5);
        memcpy ((void *) reply.data (), "World", 5);
        socket.send (reply);
    }
    return 0;
} 
```

我已经像这样在 Mac OS X 上安装了 zeromq - `./configure`, `make`, `make install`.

`-lzmq`我可以使用该标志编译 C 示例而不会出错。

我应该如何使用来自[https://github.com/zeromq/cppzmq](https://github.com/zeromq/cppzmq)`.hpp`的这个 C++头文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T03:05:32.357

我将文件 zmq.hpp 移动到 /usr/local/include 那里 zmq.h 也在那里

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-27T18:27:38.507

> 我应该如何使用这个 .hpp [https://github.com/zeromq/cppzmq](https://github.com/zeromq/cppzmq)文件？

1.  从上面的链接下载 CPP 绑定（只是 zmq.hpp 头文件）。
2.  确保在编译时包含此头文件。例如：g++ yourfile.cpp -I（zmq.hpp 的路径）-lzmq

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-24T18:11:05.583

如果 libzmq.so 在另一个文件夹中，则您没有提供包含文件和 lib 文件夹的路径。你需要使用

`g++ actualApp.cpp -I$(Path to ZMQ include files) -L$(Path to ZMQ library files) -lzmq`

`-o outFileName`除非您希望为可执行文件命名，否则您可能还想提供`a.out`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-09-13T05:45:21.003

我的食谱使用 Homebrew (2.1.11) 和 Xcode (10.3)。

**步骤1**

从 Homebrew 安装 ZMQ (4.3.2)

```
brew install zeromq 
```

**第2步**

从 GitHub 克隆 cppzmq

```
git clone https://github.com/zeromq/cppzmq.git 
```

**第 3 步：可选**

构建和测试 cppzmq。

```
cd /path/to/cppzmq
./ci_build.sh 
```

**第4步**

设置 Xcode 项目。

1.  复制`cppzmp/zmq.hpp`到`/usr/local/include`
2.  添加`/usr/local/include`到`Header Search Path`_`Build Settings`
3.  找出正确的标志：`pkg-config --libs libzmq`. 将结果`Other Linker Flags`放入`Build Settings`
4.  添加`#include <zmq.hpp>`到您的源文件。
5.  构建您的 Xcode 项目。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-03T16:23:45.930

将 /usr/local/include 添加到您的搜索路径

# cocos2d-iphone - 使用 CCLayerPanZoom 而不是 CCLayer 时出现黑屏

> ID：16182267
> 
> 赞同：1
> 
> 时间：2013-04-24T02:14:18.410
> 
> 标签：cocos2d-iphone

为了能够平移和缩放屏幕中的某些内容，我决定使用 CCLayerPanZoom 扩展。当我查看源代码时，我可以看到它派生自 CCLayer 类。因此，我将推送到导航堆栈的节点的父类从 CCLayer 更改为 CCLayerPanZoom。但是当应用程序启动时我得到的只是一个黑屏。为了让它更简洁，我创建了一个新类，它从 CCLayerPanZoom 派生，在 init 方法中添加了一个测试精灵，并将其推送到 AppDelegate.m 中的导航堆栈。我还是什么都没有，只是黑屏。这是我在课堂上实现的两种方法：

```
@interface TestPanZoom : CCLayerPanZoom {

}
+(CCScene *) scene;
@end

@implementation TestPanZoom
+(CCScene *) scene
{
    // 'scene' is an autorelease object.
    CCScene *scene = [CCScene node];

    // 'layer' is an autorelease object.
    TestPanZoom *layer = [TestPanZoom node];

    // add layer as a child to scene
    [scene addChild: layer];

    // return the scene
    return scene;
}

-(id)init{
    if(self=[super init])
    {
        CCSprite *sprite=[CCSprite spriteWithFile:@"Default.png"];
        sprite.scale=0.5;
        [self addChild:sprite];
    }
    return self;
}
@end 
```

# r - 从R中列表中的矩阵中提取一列

> ID：16182272
> 
> 赞同：5
> 
> 时间：2013-04-24T02:15:05.470
> 
> 标签：r

我有一个包含 100 个元素的列表。每个元素都是一个列表。这个列表中有两个元素。一个只是键，另一个是矩阵。这个矩阵有 5 列。我正在尝试从每个矩阵中为所有元素提取一列。所以基本上我会再次将 100 个矩阵作为列表的一个元素。这是列表的样子

```
a[[1]]
     [[1]]
          [1] "keyid"

      [[2]] 
              [,1]                [,2]          [,3]    [,4]    [,5]
          [1,] "1329397986.572332" "x" "y" "z" "a"
          [2,] "1329242747.368294" "x" "y" "z" "a"
          [3,] "1329194224.351232 "x" "y" "z" "a" 
```

所以你在这里看到的是一个列表，它有 100 个元素。每个元素都是 2 个元素的列表。我目前只对第二个元素感兴趣。第二个元素有一个矩阵。我想提取这个矩阵的第一列。只是想看看我是否可以将列提取到我可以做的向量中

```
a[[1]][[2]][,1] 
```

我将所有值作为向量获取，如下所示。

```
a[[1]][[2]][,1]  
       [1] "1329397986.572332" "1329242747.368294" "1329194224.351232" 
```

但是当我这样做时

```
 x <- lapply(a,function(r){r[[2]][,1]}) 
```

以下是我得到的错误。

```
> x <- lapply(a, function(r){r[[2]][,1]})
Error in r[[2]][, 1] : incorrect number of dimensions 
```

我不确定我为什么会这样。我检查了矩阵元素的尺寸。

```
> dim(a[[1]][[2]])
  [1] 52  5 
```

它看起来是正确的。所以我不确定错误在哪里。

dput(a) 给出

```
dput(a)
[[1]]
[[1]][[1]]
[1] "keyid"

[[1]][[2]]
  [,1]                [,2]          [,3]    [,4]    [,5]
[1,] "1329397986.572332" "x"   "y"     "z"     "a"
[2,] "1329242747.368294" "x"   "y"     "z"     "a"
[3,] "1329194224.351232" "x"   "y"     "z"     "a"

[[2]]
[[2]][[1]]
[1] "keyid"

[[2]][[2]]
  [,1]                [,2]          [,3]    [,4]    [,5]
[1,] "1329397986.572332" "x"   "y"     "z"     "a"
[2,] "1329242747.368294" "x"   "y"     "z"     "a"
[3,] "1329194224.351232" "x"   "y"     "z"     "a"

...

[[100]]
[[100]][[1]]
[1] "keyid"

[[100]][[2]]
  [,1]                [,2]          [,3]    [,4]    [,5]
[1,] "1329397986.572332" "x"   "y"     "z"     "a"
[2,] "1329242747.368294" "x"   "y"     "z"     "a"
[3,] "1329194224.351232" "x"   "y"     "z"     "a" 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T02:26:15.993

对于很少使用的功能来说，这似乎是一个完美的案例`rapply`。

在发布可重现的示例之前，我会将其发布为可能的解决方案

```
set.seed(1)
# a possible reproducible example
a <- replicate(5, list('a', matrix(runif(10), ncol=5)), simplify = FALSE)

# the first column
a1 <- rapply(a, classes = 'matrix', how = 'list', f = function(x) x[, 1, drop = FALSE]) 
# a second `lapply` is required to drop `NULL` entries

a1Only <- lapply(a1, Filter, f = Negate(is.null)) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T04:20:00.293

尝试这个：

```
a <- list(list("keyid", structure(c("1329397986.572332", "1329242747.368294", 
"1329194224.351232", "x", "x", "x", "y", "y", "y", "z", "z", 
"z", "a", "a", "a"), .Dim = c(3L, 5L))), list("keyid", structure(c("1329397986.572332", 
"1329242747.368294", "1329194224.351232", "x", "x", "x", "y", 
"y", "y", "z", "z", "z", "a", "a", "a"), .Dim = c(3L, 5L))))

sapply( lapply(a, "[[" , 2) , "[", TRUE, 1)
     [,1]                [,2]               
[1,] "1329397986.572332" "1329397986.572332"
[2,] "1329242747.368294" "1329242747.368294"
[3,] "1329194224.351232" "1329194224.351232" 
```

解释：inner`lapply`拉出每个子列表中的第二个元素，将其传递给 external `sapply`。（外部）`sapply`用于`[`从传递给它的每个对象中提取第一列。由于`[`是一个原始函数，即仅使用位置参数的函数，因此您确实需要使用占位符，这是提供“TRUE”参数的目的。它的目的是将“1”“推”到第二个参数位置，从而使其成为列选择器而不是行选择器。

# r - 涉及点击的网页抓取问题（使用 R）

> ID：16182277
> 
> 赞同：1
> 
> 时间：2013-04-24T02:15:59.563
> 
> 标签：r, web-scraping

我正在尝试抓取以下网站：

[http://www.healthgrades.com/hospital-directory/california-ca-san-mateo/affiliated-physicians-HGSTED418D46050070](http://www.healthgrades.com/hospital-directory/california-ca-san-mateo/affiliated-physicians-HGSTED418D46050070)

我正在使用 R 来抓取网站。特别是，我正在尝试从该网站复制所有医生的姓名和专业。但是，我正在处理的主要问题是当我按下箭头/下一步按钮时，url 链接不会改变。我不能使用任何基本技术来抓取这个页面。我怎么解决这个问题？将我收集的所有数据放在一个数据矩阵/电子表格中会很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T04:36:43.523

```
dum <- "http://www.healthgrades.com/hospital-directory/california-ca-san-mateo/affiliated-physicians-HGSTED418D46050070"
library(XML)
ddum <- htmlParse(dum)
noofpages <- xpathSApply(ddum,'//*/span[@class="paginationItem active"]/following-sibling::*[1]',xmlValue)[1]
noofpages <- (as.numeric(gsub(' of ','',noofpages))-1)%/%5+1
doctors <- c(); dspec <- c()
for(i in 1:noofpages){
 if(i>1){
  ddum <- htmlParse(paste0(dum,"?pagenumber=",i,'#'))
 }
 doctors <- c(doctors, xpathSApply(ddum,'//*/a[@class="providerSearchResultSelectAction"]',xmlValue))
 dspec <- c(dspec, xpathSApply(ddum,'//*/div[@class="listingHeaderLeftColumn"]/p',xmlValue))
}

paste(doctors,dspec,sep=',')
#  [1] "Dr. Julia Adamian, MD,Internal Medicine"                               
#  [2] "Dr. Eric R. Adler, MD,Internal Medicine"                               
#  [3] "Dr. Ramzi S. Alami, MD,General Surgery"                                
#  [4] "Dr. Jason L. Anderson, MD,Internal Medicine"                           
#  [5] "Dr. Karl A. Anderson, MD,Urology"                                      
#  [6] "Dr. Christine E. Angeles, MD,Geriatric Medicine, Pulmonology" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T03:17:18.590

看起来他们正在使用变量

```
?pagenumber=x 
```

您可能可以迭代`x`以获取数据。

* * *

顺便说一句，

我不确定您使用的是哪种浏览器，但 Chrome 有一个方便的功能，您可以右键单击按钮并选择`inspect element`.

# api - 有没有办法对 ec2 DescribeImages 的 API 调用进行分页？

> ID：16182280
> 
> 赞同：1
> 
> 时间：2013-04-24T02:17:07.160
> 
> 标签：api, amazon-ec2, pagination

你如何在 EC2 中对 API 调用进行分页？

我在 EC2 上做了一个简单的调用[`DescribeImages`](http://docs.aws.amazon.com/AWSEC2/latest/APIReference/ApiReference-query-DescribeImages.html)（没有任何可选的查询参数），响应大约需要 20 秒，以 XML 格式返回数百或数千个项目。

有没有办法说“给我前 20 个”，或者定义一些`LIMIT`, `PAGE`, 或`OFFSET`? 还是没有办法分页？

**更新**

它给了我 17051 张图片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T02:41:00.867

我不知道有任何方法可以对这个特定 API 操作的结果进行分页，但是，鉴于您当前正在使用它*而没有任何可选的查询参数*，您可能会错过[DescribeImages](http://docs.aws.amazon.com/AWSEC2/latest/APIReference/ApiReference-query-DescribeSnapshots.html)的特定微妙之处，即默认情况下它还会返回您不拥有的图像 - 特别是*Amazon EC2 会返回您拥有启动权限的所有 AMI*，其中还包括大量公开可用的图像，例如：

> 您可用的映像包括公共映像、您拥有的私有映像以及其他 AWS 账户拥有但您拥有明确启动权限的私有映像。

因此，许多用例强烈建议通过`Owner.n`请求参数限制这一点，并指定例如`self`仅包括您拥有的 AMI。

*   请注意，这也适用于相关的[DescribeSnapshots](http://docs.aws.amazon.com/AWSEC2/latest/APIReference/ApiReference-query-DescribeSnapshots.html)。

# html - 为什么这个输入按钮在 Chrome 中正确居中显示，但在 IE 和 Firefox 中却没有？

> ID：16182287
> 
> 赞同：1
> 
> 时间：2013-04-24T02:17:35.067
> 
> 标签：html, css

为什么此输入按钮在 Chrome 中正确居中显示，但在 IE 或 Firefox 中显示在右侧。这是链接，它是右侧的第二个按钮：

网站：[http ://dallaspetsalive.org/about/](http://dallaspetsalive.org/about/)

HTML：

```
<div style="float:center;text-align:center;">
<form action="http://linkhidden" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email     address" required>
<br /><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"    class="button" style="text-align:center;float:center;" >
</form>
</div> 
```

这是CSS：

```
input.button {
    background: -moz-linear-gradient(center top , #E8E8E8 0%, #D1D1D1 100%) repeat scroll 0 0 transparent;
    border: 1px solid #9D9D9D;
    border-radius: 15px 15px 15px 15px;
    box-shadow: 0 1px 0 #F5F5F5 inset;
    color: #656464;
    display: inline-block;
    padding: 6px 12px;
    text-shadow: 1px 1px 0 white;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T02:26:52.130

该属性`float: center`不存在。更改内联样式并添加以下内容：

```
float: none;
margin: 0 auto; 
```

* * *

您的输入标签应为

```
<input 
    type="submit" 
    value="Subscribe" 
    name="subscribe" 
    id="mc-embedded-subscribe"
    class="button" 
    style="float:none; margin: 0 auto;" 
/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:21:27.883

该按钮在 CSS 'input.button' 上有一个选择器，它具有 float:right。这是我用 firebug 找到的代码：

```
input.button {
    background: -moz-linear-gradient(center top , #E8E8E8 0%, #D1D1D1 100%) repeat scroll 0 0 transparent;
    border: 1px solid #9D9D9D;
    border-radius: 15px 15px 15px 15px;
    box-shadow: 0 1px 0 #F5F5F5 inset;
    color: #656464;
    display: inline-block;
    float: right;
    padding: 6px 12px;
    text-shadow: 1px 1px 0 white;
} 
```

如果你删除浮动，它以 Firefox 为中心，我猜 Chrome 和资源管理器也是如此。或在 HTML 中：

```
<div style="float:none; text-align:center;"> 
```

# c# - 如何在 C# 中获取存储过程的结果？

> ID：16182289
> 
> 赞同：0
> 
> 时间：2013-04-24T02:17:53.703
> 
> 标签：c#, sql, database, sql-server-2008, stored-procedures

这是我在 C# 中的代码：

```
float r_discountValue = 0;

SqlConnection con = Constant.GetConnection();

SqlCommand cmd = new SqlCommand("Coupon_GetDiscountFromValidCouponCode", con);
cmd.CommandType = CommandType.StoredProcedure;
cmd.Parameters.Add("@PKCouponCode", SqlDbType.VarChar);
cmd.Parameters["@PKCouponCode"].Value = "DIS_77";

try
{
    con.Open();

    SqlDataReader reader = cmd.ExecuteReader();

    if(reader.Read()){
       r_discountValue = float.Parse(reader[0].ToString());
    }

    reader.Close();
}
catch(Exception exception)
{
    throw exception;
}
finally{
    con.Close();
}

return r_discountValue; 
```

存储过程：

```
ALTER PROCEDURE [dbo].[Coupon_GetDiscountFromValidCouponCode]
    @PKCouponCode varchar(50)
AS
    SELECT * 
    FROM Coupon 
    WHERE CouponCode = @PKCouponCode AND Valid = 1 
```

这是数据库的样子：

![在此处输入图像描述](https://i.stack.imgur.com/7K2Dl.png)

我遇到错误

> 输入字符串的格式不正确

我不知道出了什么问题，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T02:24:29.100

如果你想要折扣值，那么你应该只返回来自 SP 的折扣（因为它**被**命名为`GetDiscountfrom`...）

```
SELECT CouponDiscount FROM Coupon WHERE CouponCode = @PKCouponCode AND Valid = 1 
```

这将使它成为一个单列结果集，与`reader[0]`来自 C# 的访问相匹配。

另一个选项当然是更改 C# 端以读取第二项（索引 1）或按名称引用列，例如

```
r_discountValue = float.Parse(reader[1].ToString());
r_discountValue = float.Parse(reader["CouponDiscount"].ToString()); 
```

你会得到`Input string was not in a correct format.`，因为它正在读取`float.parse`无法处理的“DIS_77”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T02:24:12.310

您正在使用第一列即`CouponCode`获取折扣。而不是你需要使用第二列，即。`couponDiscount`

所以尝试这样的事情

```
 r_discountValue = float.Parse(reader["CouponDiscount"].ToString()); 
```

# visual-c++ - 为什么在 Microsoft Visual C++ 中的 stdafx.h 标头之前定义类型会出错？

> ID：16182291
> 
> 赞同：0
> 
> 时间：2013-04-24T02:17:58.643
> 
> 标签：visual-c++

举个简单的例子：

```
struct Month
{
  int day;
};

#include "stdafx.h"

int _tmain(int argc, _TCHAR* argv[])
{
  Month a;
  a.day = 5;
  return 0;
} 
```

尝试在 VS2008、VS2010 或 VS2012 中编译它会导致 C2065（未声明的标识符错误）。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T02:31:25.687

Microsoft Visual C++ 不会`#include "stdafx.h"`在源文件中编译之前的任何内容；它假定源代码中直到并包括该行的所有代码都已编译。

预编译标题的[维基百科页面说明了这一点，并在](http://en.wikipedia.org/wiki/Precompiled_header)[微软自己的页面](http://msdn.microsoft.com/en-AU/library/z0atkd6c.aspx)上得到了证实：

> 编译器将`.h`文件之前出现的所有代码视为预编译。它跳到与文件`#include`关联的指令之外，使用文件中包含的代码，然后编译文件名之后的所有代码。`.h``.pch`

幕后*可能*发生的事情是，预编译头文件 ( ) 的*创建*`.pch`涉及到此时的状态存储。然后，当您*包含*`#include`标头时，它只会按原样加载该状态（覆盖当前状态）以及在该行被有效丢弃之前已在源文件中编译的所有内容。

# python - 在 Mac OS X 上安装 MySQL Python

> ID：16182294
> 
> 赞同：29
> 
> 时间：2013-04-24T02:18:04.417
> 
> 标签：python, mysql, macos

长话短说，当我写以下内容时：

```
sudo easy_install MySQL-python 
```

我得到错误

> 环境错误：找不到 mysql_config

好的，所以有很多关于如何解决这个问题的线程等，所以我运行这个代码：

```
export PATH=$PATH:/usr/local/mysql/bin 
```

然后我重新运行我的 sudo 代码：

```
sudo easy_install MySQL-python 
```

然后我收到以下错误。

> 安装脚本退出并出现错误：命令“llvm-gcc-4.2”失败，退出状态为 1

谷歌/堆栈溢出，我被告知下载我前几天做的[GCC](http://en.wikipedia.org/wiki/GNU_Compiler_Collection)包，大约 200 MB 左右，但仍然没有修复。

在这一点上我迷失了，他们说精神错乱是一遍又一遍地做同样的事情，同时期待不同的结果。好吧，我一直在运行上述代码，期望得到不同的结果，所以我离发疯不远了。

在我的 Python 职业生涯的这个阶段，我是新手，但我愿意尝试几乎任何事情来让它运行起来。

如果它有助于我正式运行 Mac OS X 10.7.5，并且我确实安装了[MAMP](https://en.wikipedia.org/wiki/MAMP)（这是一个问题吗？）

另外，前几天我第一次尝试所有这些时，我安装（重新安装？）MySQL，所以我在这一点上真的很困难。

有解决办法吗？

我绞尽脑汁，搜索谷歌，阅读堆栈溢出，并花了几个小时试图弄清楚这一点，但无济于事。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2014-09-18T18:36:54.263

这是我要安装的，特别是如果你想使用[homebrew](http://brew.sh)：

*   XCode 和命令行工具（由@7stud、@kjti 建议）
*   安装[自制软件](http://brew.sh/)
*   `brew install mysql-connector-c`
*   `pip install mysql-python`

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-04-24T13:32:36.710

另一种选择是使用[pymysql](https://github.com/PyMySQL/PyMySQL)，它是与 MySQL 的纯 Python 客户端连接，因此您不必乱编译，这是一个很好的练习，但如果您只是想完成某件事，它可能会令人沮丧。pymysql 遵循与 MySQLdb 相同的 API，它基本上可以用作替代品。

此外，它曾经是 MySQLdb，不适用于 Python 3，但这可能已经改变，pymysql 没有那个问题，这也导致我切换，但这可能已经改变。pymysql 可能比 MySQLdb 慢，但你必须看看你是否注意到，它也使用不同的许可证（pymysql 为 MIT，MySQLdb 为 GPL）

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-08-18T03:46:50.483

通过[homebrew](http://brew.sh/)安装 mysql ，然后你可以通过 pip 安装 mysql python。

```
pip install MySQL-python 
```

这个对我有用。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-01-04T23:20:41.123

**对于 Python 3+**，该`mysql-python`库已损坏。相反，请使用[mysqlclient 库](https://github.com/PyMySQL/mysqlclient-python)。`Install with: pip install mysqlclient`

它是支持 Python 3+的 mysql-python（*也称为 MySQLdb ）的一个分支*

这个库与 MySQL 客户端的 C 接口对话，比纯 python pymysql 库更快。

**注意**：您需要安装 mysql-developer 工具。在 Mac 上执行此操作的一种简单方法是运行

```
brew install mysql-connector-c 
```

将此任务委托给自制软件。如果您使用的是 linux，则可以通过[mysqlclient github 页面](https://github.com/PyMySQL/mysqlclient-python)上的说明安装这些。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-07-07T16:26:57.323

我正在使用 OSX -v **10.10.4**。上面的解决方案是一个[快速简单](https://stackoverflow.com/a/25920020/3276790)的.

发生的 OSX 默认没有连接库。

首先，您应该安装连接器：

```
brew install mysql-connector-c 
```

然后用 pip mysql 安装

```
pip install mysql-python 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-12-21T21:09:03.693

在 Mojave 上，我在查找 SSL 库时遇到了错误，这就是最终无需修改即可工作的方法`mysql_config`：

```
sudo pip install MySQL-Python --global-option=build_ext --global-option="-I/usr/local/opt/openssl/include" --global-option="-L/usr/local/opt/openssl/lib" 
```

希望这可以为某人节省几个小时的心痛

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-08-30T07:28:30.867

**安装 PyMySQL**

安装点子 =>`sudo easy_install pip`

安装 PyMySQL=>`sudo easy_install-3.7 pymysql`

终端命令检查是否安装=>`pip3 list`

或者

安装 PyMySQL=>`sudo pip install PyMySQL`

终端命令检查是否安装=>`pip3 list`

**MySQL**

macOS Sierra Public Beta 无法与 MySQL 5.7.x 配合使用，但现在这些问题已通过使用 MySQL 5.7.16 得到解决

MySQL 没有预装 macOS Sierra，需要从 MySQL 站点下载。

( [https://dev.mysql.com/downloads/mysql/](https://dev.mysql.com/downloads/mysql/) ) 最新版本的**MySQL 5.7.16**确实适用于 macOS 的公开版本。

如果您已经拥有 MySQL 5.7 并且您已将操作系统从 El Capitan 升级到 Sierra，我希望这没问题，但如果有人对此发表评论会很感兴趣。

使用**Mac OS X 10.11（x86，64 位），DMG 存档版本**（适用于 macOS Sierra）。

如果您是从以前的 OSX 升级并拥有较旧的 MySQL 版本，则不必更新它。MySQL 升级的一件事总是对数据库进行数据转储，以防万一出现问题，并且在升级到 macOS Sierra 之前，请确保您的 MySQL 服务器**没有**运行。

下载时您不必注册，请查找***» 不用了，请带我去下载！*** - 直接去下载镜像，从离你最近的镜像下载软件。

下载后打开 .dmg 并运行安装程序。

**完成安装后，您会看到一个带有临时mysql root 密码**的对话框——这是 MySQL root 密码而不是 macOS 管理员密码，复制并粘贴它以便您可以使用它。但我发现临时密码几乎没有用，所以我们需要立即更改它。

您还被告知：如果您丢失了此密码，请参阅 MySQL 参考手册中的如何重置 Root 密码部分。（[https://dev.mysql.com/doc/refman/5.7/en/resetting-permissions. html](https://dev.mysql.com/doc/refman/5.7/en/resetting-permissions.html) )

**更改 MySQL 根密码**

请注意，这与 macOS 的 root 或管理员密码不同 - 这是**mysql root 用户**的唯一密码，使用一个并记住/记下它是什么。

停止 MySQL

```
sudo /usr/local/mysql/support-files/mysql.server stop 
```

**如果停止引发权限问题**

首先检查错误文件。

```
tail -f /usr/local/mysql/data/*.err 
```

完全关闭或终止进程。确认没有mysql进程正在运行

```
mysqladmin -uroot shutdown
sudo killall mysqld 

ps -ef | grep mysql 
```

给予许可

```
sudo chown -RL root:mysql /usr/local/mysql
sudo chown -RL mysql:mysql /usr/local/mysql/data
chmod -R 755 /usr/local/mysql/data
chmod -R 755 /usr/local/mysql/data/accountname.local.pid

or Right click->get info and change the permission for 
/usr/local/mysql/data
/usr/local/mysql/data/Pushparajas-MacBook-Pro.local.pid 
```

启动mysql

```
sudo mysql.server start 
```

以安全模式启动它：

```
sudo mysqld_safe --skip-grant-tables 
```

这将是一个持续的命令，直到进程完成，因此**打开另一个 shell/终端窗口**，并使用临时生成的密码登录：

```
mysql -u root -p
FLUSH PRIVILEGES;
ALTER USER 'root'@'localhost' IDENTIFIED BY 'MyNewPass' 
```

; 将小写的“MyNewPass”更改为您想要的 - 并保留单引号。

```
\q 
```

启动 MySQL

```
sudo /usr/local/mysql/support-files/mysql.server start 
```

**启动 MySQL**

然后，您可以从系统偏好设置或通过命令行启动 MySQL 服务器。

命令行启动 MySQL。

```
sudo /usr/local/mysql/support-files/mysql.server start 
```

要从终端查找 MySQL 版本，请在提示符处键入：

```
/usr/local/mysql/bin/mysql -v -uroot -p 
```

这也使您进入与 mySQL 的 shell 交互式对话，键入 \q 退出。

安装后，为了在不输入命令的完整路径的情况下使用 mysql 命令，您需要将 mysql 目录添加到您的 shell 路径中，（可选步骤）这是在您的主目录中的“.bash_profile”文件中完成的，如果您没有那个文件，只需使用 vi 或 nano 创建它：

```
cd ; nano .bash_profile
export PATH="/usr/local/mysql/bin:$PATH" 
```

第一个命令将您带到您的主目录并打开 .bash_profile 文件，或者如果它不存在则创建一个新文件，然后添加上面的行，将 mysql 二进制路径添加到您可以运行的命令中。输入“control + x”退出文件，并在提示时输入“y”保存更改。这里要做的最后一件事是重新加载 shell 以使上述内容立即工作。

```
source ~/.bash_profile
mysql -v 
```

您将再次获得版本号，只需键入“q”即可退出。

修复 2002 MySQL Socket 错误

修复迫在眉睫的 2002 套接字错误 - 这是链接 MySQL 放置套接字的位置和 macOS 认为它应该在的位置，MySQL 将它放在**/tmp**和 macOS 在**/var/mysql**中查找它套接字是一种允许 mysql 客户端的文件/服务器通信。

```
sudo mkdir /var/mysql
sudo ln -s /tmp/mysql.sock /var/mysql/mysql.sock 
```

**phpMyAdmin**

**在httpd.conf**文件中取消注释下面的行

```
LoadModule php7_module libexec/apache2/libphp7.so 
```

如果您还没有从 MySQL 部分修复 2002 套接字错误，请首先修复 -

```
sudo mkdir /var/mysql
sudo ln -s /tmp/mysql.sock /var/mysql/mysql.sock 
```

下载 phpMyAdmin，( [https://www.phpmyadmin.net/downloads/](https://www.phpmyadmin.net/downloads/) ) zip 英文包适合很多用户，然后解压并将文件夹及其内容移动到文档根目录 (~/Sites/) 重命名文件夹到“phpmyadmin”。

制作**配置**文件夹

```
mkdir ~/Sites/phpmyadmin/config 
```

更改权限

```
chmod o+w ~/Sites/phpmyadmin/config 
```

在浏览器中运行设置 [http://localhost/~username/phpmyadmin/setup/](http://localhost/~username/phpmyadmin/setup/)或[http://localhost/phpmyadmin/setup/](http://localhost/phpmyadmin/setup/)

您需要创建一个新的 localhost mysql 服务器连接，单击**new server**。

切换到**Authentication**选项卡并设置本地 mysql root 用户和密码。

添加用户名“root”（可能已经填充，添加您之前为 MySQL root 用户设置的密码，单击保存，您将返回上一个屏幕。（这不是 macOS 管理员或 root密码——它是 MySQL root 用户）。

确保单击保存，然后 config.inc.php 现在位于 phpmyadmin 目录的 /config 目录中，将此文件**移动**到 /phpmyadmin 的根目录，然后删除现在为**空**的/config 目录。

**在最新的 phpmyadmin 中，下载 config.inc.php 并放在 phpmyadmin 目录中。**

如果要设置新服务器，请将 config.inc.php 移动到某个位置并尝试**[http://localhost/~username/phpmyadmin/setup](http://localhost/~username/phpmyadmin/setup)**

现在转到[http://localhost/~username/phpmyadmin/](http://localhost/~username/phpmyadmin/)将允许您与 MySQL 数据库进行交互。

要升级 phpmyadmin，只需下载最新版本并将旧的 '<strong>config.inc.php' 从现有目录复制到新文件夹并替换 - 备份旧版本以防万一。

**权限**

要运行没有权限问题的网站，最好将 Web 根目录及其内容设置为所有人可写，因为它是本地开发，所以不应该是安全问题。

**假设您在User Sites**文件夹中的以下位置**~/Sites/testsite**中有一个站点，您可以将其设置为可写，如下所示：

```
sudo chmod -R a+w ~/Sites/testsite 
```

如果您担心安全性，那么您可以将所有者设置为 Apache **_www** ，而不是让它成为世界可写，但是在处理文件时，您必须以管理员身份进行更多身份验证，您“不是”所有者，您可以这样做：

```
sudo chown -R _www ~/Sites/testsite 
```

这将递归地将内容设置为由 Apache 用户拥有。如果您将网站存储在**系统**级别的文档根目录中，例如**~/Sites/testsite**，那么它必须是后者：

```
sudo chown -R _www ~/Sites/testsite 
```

如果您有一个单用户工作站，另一种更简单的方法是将 Apache Web 用户从 _www 更改为您的帐户。而已！您现在拥有在 macOS Sierra 之上运行的原生 AMP 堆栈。

参考链接 - [https://coolestguidesontheplanet.com/get-apache-mysql-php-and-phpmyadmin-working-on-macos-sierra/#ssu](https://coolestguidesontheplanet.com/get-apache-mysql-php-and-phpmyadmin-working-on-macos-sierra/#ssu)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-10-08T01:11:55.113

正如我之前提到的其他人......让 Python 在 Mac 上与 MySQL 一起工作是一个 ?@#$@&%^!! 恶梦。

最初从原始 Django 网站在 Mac OS 10.7.5 上安装 Django 框架，当 MySQLdb 不起作用时，经过数小时的谷歌搜索和尝试 SO 的解决方案后，我已经从 BitNami [http://bitnami.com安装了 Django 堆栈/堆栈/django](http://bitnami.com/stack/django)

尽管如此，还是遇到了上面提到的问题，然后还有更多……

最终帮助我的是 Josh 在他的博客上推荐的内容：http: [//joshbranchaud.com/blog/2013/02/10/Errors-While-Setting-Up-Django.html](http://joshbranchaud.com/blog/2013/02/10/Errors-While-Setting-Up-Django.html)

现在 Python 2.7 终于连接到 MySQL 5.5

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-04-24T02:37:49.593

是时候成为一个大男孩并从源代码安装了。尝试这个：

1) 下载 MySQL-python-1.XXtar.gz 文件（默认会到你的下载目录）

2) 打开终端窗口并 cd 到下载目录。

3）解压你下载的文件：

```
~/Downloads$ tar xfvz MySQL-python-1.X.X.tar.gz 
```

这将在您的下载目录中创建一个名为 MySQL-python 的目录

4) cd 进入新创建的目录。

5) 通常，您只需打开名为 README 或 INSTALL 的文件并按照说明进行操作——但通常要安装 python 模块，您所做的只是：

```
$ sudo python setup.py install 
```

如果你想看看，在你新创建的 MySQL-python 目录中应该有一个名为 setup.py 的文件，你正在调用该程序来安装模块。

另请注意：

```
export PATH=$PATH:/usr/local/mysql/bin 
```

如果您在命令行上执行此操作，则不是永久性的。您需要将该行放在主目录（~/ 或等效的 /Users/YOUR_USER_NAME）中名为 .bashrc 的文件中。要查看 .bashrc 是否已经存在（它是一个隐藏文件），请发出命令：

```
$ ls -al 
```

并寻找 .bashrc。如果 .bashrc 不存在，则创建它。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-04-24T02:36:25.983

您遇到的问题是`gcc`您的 Mac 上未安装编译器。如果您安装了 XCode，它将被安装。您必须下载`gcc`编译器并手动安装。请点击以下链接并下载它 -

> [https://github.com/downloads/kennethreitz/osx-gcc-installer/GCC-10.7-v2.pkg](https://github.com/downloads/kennethreitz/osx-gcc-installer/GCC-10.7-v2.pkg)

我曾经在安装 Ruby 1.9 时遇到过这个问题，我不得不自己编译 ruby​​，因为当时不支持 Mountain Lion。安装包后，通过命令验证安装`gcc`。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-07-22T11:54:10.593

最重要的是，我无法解决它。但我将文件添加到 /usr/local/include 解决它。

[https://github.com/peterlee0304/MySQL-Python/blob/master/my_config.h](https://github.com/peterlee0304/MySQL-Python/blob/master/my_config.h)

在 /usr/local/include 中，添加一个 my_config.h 文件。

然后 pip install MySQL-Python

解决这个问题！

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-04-25T16:55:26.270

我在 Mac OS X 10.11.4 15E65 上使用 Python 2.7.11 :: Anaconda 2.3.0 (x86_64)。

您可能需要按照以下步骤操作：

*   安装自制软件
*   打开终端并运行： brew install mysql-connector-c
*   点安装 mysql-python

然后 Anaconda 将安装 mysql-python，然后您可以从 MySQLdb 开始。

祝你好运。谢谢。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-09-11T16:06:37.130

## 以下可能会有所帮助。

```
brew install mysql-connector-c
CFLAGS =-I/usr/local/Cellar/mysql-connector-c/6.1.11/include pip install MySQL-python
brew unlink mysql-connector-c 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-11-04T11:15:16.040

***我改用 PyMySQL，它工作正常！***

```
sudo easy_install-3.7 pymysql 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-02-02T10:30:55.707

对我有用的是：

```
LDFLAGS=-L/usr/local/opt/openssl/lib pip install mysql-python 
```

# c++ - 没有优先级并且是左关联的字符串计算器

> ID：16182297
> 
> 赞同：0
> 
> 时间：2013-04-24T02:18:17.330
> 
> 标签：c++, string, visual-c++, calculator

这个字符串计算器的代码没有运算符优先级，我不太确定如何修复它。我相信它与 switch 语句有关，但我需要这个字符串计算器从左到右移动并计算是否在减法/加法之前发生乘法运算。这是到目前为止的代码：

```
#include<iostream>
#include<sstream>
#include<string>
#include<cctype>
#include<cmath>
using namespace std;

enum {PLUS='+',MINUS='-',MULT='*'};

int numberValue(string &expr)
{
istringstream is(expr);
int value = 0;
is >> value;
return value;
}

int expressionValue(string &expr)
{
int i = 0;
int p = 0;

if(expr.at(0) == '(' && expr.at(expr.length()-1) == ')')
{
    for(i=0;i<expr.length();i++)
    {
        if(expr.at(i)=='(')
            p++;
        else if(expr.at(i)==')')
            p--;
        if(p==0)
            break;
    }
    if(i==expr.length()-1)
        return expressionValue(expr.substr(1,expr.length()-2));
}

for(i=0;i<expr.length();i++)
{
    if(expr.at(i)=='(')
        p++;
    else if(expr.at(i)==')')
        p--;
    else if(p==0 && ispunct(expr.at(i)))
    {
        switch(expr.at(i))
        {
        case PLUS:
            return expressionValue(expr.substr(0,i)) + 
                expressionValue(expr.substr(i+1,expr.length()-i-    1));
        case MINUS:

            return  expressionValue(expr.substr(0,i)) -
                expressionValue(expr.substr(i+1,expr.length()-i-1));
        case MULT:

            return  expressionValue(expr.substr(0,i)) *
                expressionValue(expr.substr(i+1,expr.length()-i-1));
        }
    }
}

return numberValue(expr);
}

bool Validate(string inputStr)
{
for(int x = 0;x < inputStr.length(); x ++)
{
    if((inputStr[x] == '+') || (inputStr[x] == '-'))
    {
        if((inputStr[x+1] == '+') || (inputStr[x+1] =='-'))
        {
            return false;
        }
    }
}

string arr = "0123456789+-*";
int count = 0;

for(int a = 0; a < inputStr.length(); a++)
{
    for(int b = 0; b < arr.length(); b++)
    {
        if(inputStr[a] == arr[b])
        {
            count++;
        }
    }
}
if(count == inputStr.length())
{
    return true;
}
else
{
    return false;
}
}

int main()
{
string expressionString;
string retry = "y";

cout << "Enter an expression as a string...you can use addition, subtraction \nand     multiplication."<< endl;
cout << "\nKeep in mind that this calculator does not accept decimals and the \nleading operand can not be negative." << endl;
cout << "\nOperands can have no more than 8 digits, each operator has the same \nprecedence, and each operator is left associative." << endl; 
do
{
cout << "\nEnter an expression: ";
cin >> expressionString;

if(Validate(expressionString) == true)
{
    cout << expressionValue(expressionString) << endl;
}
else
{
    cout << "An error has occured in the input" << endl;
}
cout << "Press \"y\" to enter another expression or \"n\" if you want to quit." <<     endl;

cin >> retry;

}while
(retry == "y");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T03:15:21.627

我发现您的代码存在两个问题。

首先，更容易修复。Cin >> 字符串只会占用第一个空格字符之前的所有内容。可能值得考虑[http://www.cplusplus.com/reference/istream/istream/getline/](http://www.cplusplus.com/reference/istream/istream/getline/)它将把所有东西都带到换行符。如果您键入“1 + 1”，这将阻止您的程序仅返回“1”

您的第二个问题，也是我认为您更感兴趣的问题，是您不小心使运算符具有右关联性这一事实。这是程序递归方式的结果。如果您考虑一下您的函数为语句 1 + 2 * 3 调用自身的方式。当它遇到第一个 + 时，它会调用 ExpressionValue('1') + ExpressionValue(2 * 3)。因此，在这种情况下，将在加法之前评估乘法。

解决该问题的最简单方法可能是向后解析字符串，但我怀疑这将需要大量更改处理括号的代码。

在一个有点无关的注释上。在样式方面，您的某些代码有点难以阅读，因为您没有缩进函数的内部。

# linux - SCP 错误：错误的配置选项：PermitLocalCommand

> ID：16182300
> 
> 赞同：1
> 
> 时间：2013-04-24T02:18:43.897
> 
> 标签：linux, ssh, scp

当我在下面执行此命令时：

```
scp -P 36000  hdfs@192.168.0.114:~/tmp.txt SOQ_log.txt 
```

我收到一个错误：

```
command-line: line 0: Bad configuration option: PermitLocalCommand 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-04T14:06:31.890

`scp`运行程序的副本`ssh`以创建通信通道，并使用以下选项运行 ssh：

```
-oForwardAgent=no -oPermitLocalCommand=no -oClearAllForwardings=yes 
```

所以这首先解释了“PermitLocalCommand”选项的来源。我将添加它`sftp`使用相同的选项来运行 ssh，因此它可能会显示相同的行为。

“PermitLocalCommand”通常是一个有效的 ssh 配置选项。如果您的 ssh 副本抱怨它，那么您的 ssh 副本似乎不是与您的 scp 副本一起使用的正常 ssh 副本。

[此服务器故障问题](https://serverfault.com/questions/92321/debian-permit-local-command-issue)表明该错误可能是由于有人`ssh`在您的系统上安装了恶意软件版本（即 rootkit）。[该论坛帖子](http://arstechnica.com/civis/viewtopic.php?f=16&t=1132387)还表明问题是由于更改了 的版本`ssh`，该问题已通过删除并重新安装 OpenSSH 客户端实用程序得到修复。

另一种解释是，某人（可能是您的 Linux 发行版维护者）在您的系统上安装了一个 ssh 版本，但删除了该选项，而您却在不知不觉中使用它。或者由于某种原因，您的程序版本非常旧`ssh`，不支持该选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-21T04:45:16.277

我的系统是 CentOs 5.9

我面临同样的问题，我发现这是由于 /etc/ssh/sshd_config 中的这个配置行：

```
# override default of no subsystems
Subsystem       sftp    /opt/libexec/sftp-server 
```

但我无法运行 /opt/libexec/sftp-server，它由于某种原因坏了

现在它通过重新安装远程openssh-server来解决：

```
yum erase openssh-server
yum install openssh-server 
```

现在更改为

```
# override default of no subsystems
Subsystem       sftp    /usr/libexec/openssh/sftp-server 
```

并且 /usr/libexec/openssh/sftp-server 是可运行的

不要忘记执行：

```
/etc/init.d/sshd restart 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2020-03-12T17:38:41.520

有时命令无法解析这种东西

:~/

我将其更改为完整路径。

# php - 生成 URL 的父路径数组

> ID：16182301
> 
> 赞同：0
> 
> 时间：2013-04-24T02:19:07.187
> 
> 标签：php, arrays, path, explode

所以如果我有这样的字符串，例如“/path1/folder/fun/yay/”

如何通过函数运行它以返回所有父路径的数组，如下所示：

```
array (
    '/',
    '/path1/',
    '/path1/folder/',
    '/path1/folder/fun/',
    '/path1/folder/fun/yay/'
) 
```

这是我到目前为止所拥有的，显然它不起作用，至少可以说令人困惑......

```
$a = explode('/',$path); $ii = 0; $path_array = array();

for ($i = 0; $i < sizeof($a); $i++) {

    if ($a[$i]) { 

        $path_array[$ii] = "";

        for ($n = 0; $n < $i; $n++)
        {

        $path_array[$ii] .= $a[$n];

        }

        $ii++;

    }   
}

file_put_contents('text.txt',serialize($path_array)); 
```

谢谢！

顺便说一句，我的最终目标是能够在文件夹路径表上运行 SQL 查询，以增加文件夹及其所有父级的值。

也许有某种 SQL 运算符，我可以在其中选择路径是我输入的路径的一部分的所有行？反过来有点像这样：

```
mysqli_query($mysqli,'UPDATE content_folders SET size = size+'.filesize("content/$id").' WHERE path LIKE "'.$path.'%"') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T02:47:00.813

至于 PHP 函数 - 这样的事情会起作用：

```
function returnAllPaths ( $fullPath = '/' , Array $pathHistory = array() )
{
    while ( strlen($fullPath) > 1 AND $fullPath[0] === '/' )
    {   
        array_push($pathHistory, $fullPath); 
        $fullPath = preg_replace('%(.*/)[^/]+(?:/)?$%is', '$1', $fullPath);        
    }
    array_push($pathHistory, $fullPath);
    return array_reverse($pathHistory);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:22:30.473

你可以用这个

```
$path = '/path1/folder/fun/yay/';
$path = explode('/',$path);
$path = array_filter($path);
$iniVal = '';
$array_paths = array();
array_push($array_paths,'/');
foreach($path as $array){
    $value = $iniVal.'/'.$array.'/';
    array_push($array_paths,$value);
    $iniVal .= '/'.$array;
}

//print_r($array_paths); 
```

输出将显示在数组中，例如：

```
Array ( [0] => / [1] => /path1/ [2] => /path1/folder/ [3] => /path1/folder/fun/ [4] => /path1/folder/fun/yay/ ) 
```

如同

```
array (
    '/',
    '/path1/',
    '/path1/folder/',
    '/path1/folder/fun/',
    '/path1/folder/fun/yay/'
) 
```

**演示**：[PHP 小提琴](http://codepad.viper-7.com/XB2nML)

# java - java中的super和super()有什么区别？

> ID：16182310
> 
> 赞同：-2
> 
> 时间：2013-04-24T02:19:32.597
> 
> 标签：java, super

像这样：

```
public class class1 {   
    public void xxx(){

        super.getXXX();

        super().getXXX();

    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T02:38:00.383

两者都在子类中用作调用或引用其超类的一种方式。

`super()`是您在构造函数或覆盖方法中调用超类的构造函数或超类的覆盖方法的方法调用。在这些情况下，super() 调用也可以接受参数。

请注意，由于默认情况下所有类都至少继承自 Object，因此您始终可以在构造函数中调用 super()（尽管它必须是构造函数中的第一条语句）。这个 super() 调用实际上通常由编译器默认插入到你的无参数构造函数中。

但是，如果超类没有无参数构造函数，这可能会变得很棘手，在这种情况下，如果没有适当的参数，您对 super() 的调用将失败。默认情况下通常会生成一个无参数的构造函数，因此您不必担心它，但是如果您使用 args 显式定义另一个构造函数，它将不会自动生成，因此您可能需要显式定义一个自己。

`super`另一方面，没有括号只是对超类本身的引用，就像任何其他变量一样。它可用于调用该类中的任何可访问方法或引用该类的任何可访问字段，就像您使用任何其他引用一样。例如：`super.doSomething()`或`super.x`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T02:25:41.913

java中的每个类都有一个超类。当您使用`super`关键字时，您指的是超类，并且点运算符`super`将使您可以访问超类的属性和方法。

`super()`是超类的构造函数。当您覆盖子类中的构造函数时，您必须先调用`super()`，然后才能执行自己的逻辑，如果不这样做，编译器将代表您插入对无参数构造函数的调用。（有时没有，代码编译失败）

在 Java 中，调用构造函数会为您提供类的实例，但在执行 a 时却不是一回事`super()`，因为在执行 a 时不会创建超类的单独实例`super()`。因此，while`MyClass().doSomething()`是一个完全有效的调用，`super().doSomethingElse()`但不是。

# c# - 粗糙的 Linq 查询

> ID：16182311
> 
> 赞同：1
> 
> 时间：2013-04-24T02:19:32.693
> 
> 标签：c#, linq

有如下表结构

![表结构](https://i.stack.imgur.com/s46LW.jpg)

我需要按记录没有工作流文件夹的状态计算转录数。这可以解决问题：

```
from p in Transcriptions
where p.WorkflowfolderID == null
group p by p.TranscriptionStatus.Description into grouped
select new 
{
   xp=grouped.Key,
   xp1= grouped.Count(),
} 
```

现在我需要添加Dueon日期过去的记录数，因为它已经超过了截止日期。类似于

```
EntityFunctions.DiffHours(p.DueOn,DateTime.Today)>0 
```

如何在不触发 2 个 SQL 查询的情况下将其包含在结果集中？我很高兴将它作为每一行中具有相同值的第三列。无论如何也可以将百分比纳入混合中，如下所示：

状态 | 计数 | % |
------------------
状态1 | 20 | 20%
状态2 | 30 | 30%
状态3 | 30 | 30%
逾期 |20 | 20%

我已将过期添加为一行，但很高兴将其作为具有相同值的列。

**编辑内容**

好吧，这是我能想到的最好的。它不是一个查询，但只有一个 SQL 行程。结果是：

状态 | 计数
----------------
状态1 | 20
状态2 | 30
状态3 | 30
逾期 |20

```
var q1= from p in Transcriptions
    where p.WorkflowfolderID == null
    group p by p.TranscriptionStatus.Description into grouped
    select new 
    {
       status= (string)grouped.Key,
       count= grouped.Count()
    };

    var q2 =(
      from p in Transcriptions select new {status = "Overdue", 
        count = (from x in Transcriptions 
        where x.DueOn.Value < DateTime.Now.AddHours(-24) 
        group x by x.TranscriptionID into 
        grouped select 1).Count() }).Distinct();
    q1.Union(q2) 
```

它是一个 Union 子句，一旦返回结果，就会进行 % 计算。奇怪的是，我想不出任何干净的方法来表示 LINQ 语句中的以下 SQL，这导致 var q2 中的 LINQ 相当混乱。

```
SELECT COUNT(*) , 'test' FROM [Transcription] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:30:16.677

您可以将条件添加到`Count`：

```
from p in Transcriptions
where p.WorkflowfolderID == null
group p by p.TranscriptionStatus.Description into grouped
select new 
{
    xp=grouped.Key,
    xp1= grouped.Count(),
    xp2= grouped
         .Count(p => EntityFunctions.DiffHours(p.DueOn, DateTime.Today) > 0)
} 
```

顺便说一句，通过实体框架，您也可以使用`p.DueOn < DateTime.Today`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:24:59.497

@格特·阿诺德

```
 from p in Transcriptions
        where p.WorkflowfolderID == null
        group p by p.TranscriptionStatus.Description into grouped
        select new 
        {

        status= (string)grouped.Key,
        count= grouped.Count(),
           overdue= grouped.Count(p => p.DueOn < EntityFunctions.AddHours(DateTime.Today, -24)),

        } 
```

上面的查询确实如我所愿。它产生格式的结果

状态| 计数 | 过期
----------------------
status1|2|0
status2|1|1

唯一的缺点是生成的 SQL 使用内部连接运行 2 个查询。我最初与工会的想法可能是一个更好的想法，但你回答了我的问题，对此我很感激。

这个查询可以用比我上面的尝试更简洁的方式表示吗？

```
SELECT COUNT(*) , 'test' FROM [Transcription] 
```

# django - django-sitetree 如何将数据迁移到生产服务器

> ID：16182312
> 
> 赞同：1
> 
> 时间：2013-04-24T02:19:37.290
> 
> 标签：django, django-south, data-migration, django-sitetree

我正在使用**南**将方案迁移到生产。此外，我正在使用**django-sitetree**模块在我的站点中显示菜单。

使用命令进行架构迁移没有问题：

```
./manage.py schemamigration myApp --freeze sitetree --auto
./manage.py migrate myApp 
```

但是，当我尝试通过命令迁移站点树数据时：

```
./manage.py datamigration myApp "new_version" --freeze sitetree 
```

它不会生成任何已创建的站点树元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T00:57:24.393

好的，经过一些研究并感谢以下来源：[Altering database tables in Django](https://stackoverflow.com/questions/35991/altering-database-tables-in-django) and [Fixtures 和初始数据](http://djangotricks.blogspot.com.ar/2008/09/gotchas-about-fixtures-for-initial-data.html)博客，似乎通过使用带有夹具的 initial_data.json 文件来传递菜单数据的更好方法。

1.  在您的 App 文件夹中创建“fixtures”文件夹。

2.  运行`./manage.py dumpdata --format=json --indent=4 sitetree > APP_PATH/fixtures/initial_data.json`如果您希望将其数据迁移到其他环境，您可以将更多应用程序添加到命令中。

3.  保存的数据`fixtures/initial_data.json`将始终通过运行插入/替换`./manage.py syncdb`请记住，如果数据已存在于 DB 中，将被替换，这意味着您不应转储动态数据。

还有另一种使用[站点树管理命令迁移站点树的方法](https://django-sitetree.readthedocs.org/en/latest/management.html)

```
# Dump...
python manage.py sitetreedump > treedump.json
# Restore...
python manage.py sitetreeload --mode=replace treedump.json 
```

感谢您对这个链接的[空闲签名](https://stackoverflow.com/users/308265/idle-sign)

# android - 没有清单的 SMS 广播接收器

> ID：16182314
> 
> 赞同：1
> 
> 时间：2013-04-24T02:19:48.050
> 
> 标签：android, android-intent

想知道如何在不使用 Manifest 文件的情况下创建 SMS 广播接收器。例如，这是我当前的清单文件行：

```
<receiver android:name="com.paradopolis.randomnotifications.SMSListener">
        <intent-filter>
          <action android:name="android.provider.Telephony.SMS_RECEIVED" />
       </intent-filter>
</receiver> 
```

它工作正常，但我希望能够删除线路并在我的服务中注册我的广播接收器，例如：

```
registerReceiver(new SMSListener() , [?????]); 
```

但我找不到要使用的 Intent 过滤器，因为 SMS_RECEIVED 是 Telephony 包的一部分。所以问题是：那个意图过滤器是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T02:30:52.323

`IntentFilter`在你的java文件中创建，然后`registerReceiver(Receiver, IntentFilter)`

该操作将`android.provider.Telephony.SMS_RECEIVED`作为一个字符串。

```
IntentFilter i = new IntentFilter("android.provider.Telephony.SMS_RECEIVED");
registerReceiver(new SMSListener() , i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T03:26:57.483

```
 mSmsReceiver = new SMSreceiver();
    IntentFilter filter = new IntentFilter();
    filter.setPriority(IntentFilter.SYSTEM_HIGH_PRIORITY);
    filter.addAction(SMS_RECEIVE_ACTION); // SMS
    filter.addAction(WAP_PUSH_RECEIVED_ACTION); // MMS
    this.registerReceiver(mSmsReceiver, filter);

    class SMSreceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        if (!getSMSBlockEnable()) {
            return;
        }

        if (TextUtils.equals(intent.getAction(), SMS_RECEIVE_ACTION)) {

            Bundle bundle = intent.getExtras();
            if (bundle == null) {
                return;
            }
            Object[] messages = (Object[])bundle.get("pdus");

            SmsMessage smsHeader = SmsMessage.createFromPdu((byte[])messages[0]);
            if (smsHeader != null) {
                mReceiveNumber = smsHeader.getOriginatingAddress();
                if(TextUtils.isEmpty(mReceiveNumber)) {
                    mReceiveNumber = INVALID_NUMBER;
                }
            }

           for (Object message : messages) {
                SmsMessage sms = SmsMessage.createFromPdu((byte[])message);
                  if (sms != null) {
                    body.append(sms.getDisplayMessageBody());
                  }
          }
          mReceiveBody = body.toString();
        }
    }
} 
```

# html - 当 url 不复存在时如何处理 popstate？

> ID：16182319
> 
> 赞同：0
> 
> 时间：2013-04-24T02:20:05.830
> 
> 标签：html, pushstate, popstate

我希望能够用 html5 popstate 做两件事，我没有使用任何插件，只是这两种方法：

推送状态：

```
function contentLoaded(...) {
    ...
    window.history.pushState({ pageUrl: url }, url, url);
    ...
} 
```

流行状态：

```
$(window).bind("popstate", function (e) {
    if (event.state) {
        loadContent(event.state.pageUrl);
    }
}); 
```

现在，如果我删除一条记录，`I want to avoid popping a state which couldn't be loaded`只需跳过它并尝试弹出下一条记录。

第二个问题是：（`How can I avoid try popping from an empty stack`我的应用程序中有一个后退按钮，但我可以以适当的理由摆脱它），但要清楚是否无法加载内容或堆栈中是否没有更多项目.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T04:14:14.197

历史并不意味着事后改变。您应该将 push/popstate 功能与内容加载功能分开；想想典型客户端 mvc 框架中的“路由器”或“导航器”模式。如果一个状态变得无效，内容加载代码可以“重定向”到另一个状态（通过调用 pushState），就像您在常规服务器端应用程序中所做的那样。

提醒一下，无论是在内部弹出状态还是使用相同的 url 实际加载页面，客户端应用程序都应该以相同的方式工作，即 HTML5 历史记录支持必须是透明的，或者换句话说，单独的 url 必须包含所有构造特定视图的信息（但在 popstate 的情况下，我们可以作弊并重用现有状态以加快速度）。

# ios - 您实际上在 Uncaught Exception Handler 中编写了哪些代码（如 Testflight 建议的设置）？

> ID：16182320
> 
> 赞同：1
> 
> 时间：2013-04-24T02:20:16.790
> 
> 标签：ios, exception-handling, testflight

我刚刚浏览了[Testflight SDK 文档](https://testflightapp.com/sdk/doc/1.2.4/)，并且刚刚收集了我的第一份崩溃报告——所有功能的行为都如文档中所述，非常棒。

我不明白的是 SDK 文档建议设置以下两个处理程序：

```
/*
My Apps Custom uncaught exception catcher, we do special stuff here, and TestFlight takes care of the rest
*/
void HandleExceptions(NSException *exception) {
    NSLog(@"This is where we save the application data during a exception");
    // Save application data on crash
}
/*
My Apps Custom signal catcher, we do special stuff here, and TestFlight takes care of the rest
*/
void SignalHandler(int sig) {
   NSLog(@"This is where we save the application data during a signal");
   // Save application data on crash
} 
```

*你在那里写什么东西？*

更加具体：

我注意到 Testflight 自己生成崩溃报告，即不使用这些处理程序，所以第一个问题是：

*我应该在这些处理程序中编写任何与 Testflight 相关的代码吗？*

我确实了解应该编写什么代码来保存特定于我的应用程序的数据，我对通常我可以/应该在这些处理程序中做什么很感兴趣，所以第二个：

*我知道，**NSSetUncaughtExceptionHandler(&HandleExceptions)**意味着一些通用代码来处理一些未知/意外的东西 - 所以我应该添加任何会影响我的应用程序崩溃的代码吗？*

# entity-framework - 如何使用实体框架功能找到某个单元格

> ID：16182321
> 
> 赞同：-1
> 
> 时间：2013-04-24T02:20:16.690
> 
> 标签：entity-framework

我有一个名为 product 的表，其中包含产品 ID、产品账单 ID 和......账单 ID 作为参数传递给我的控制器。

我可以使用框架中的实体并使用 db.tbl_product.Find(product id) 查找具有产品 id 的所有行。

但现在我需要使用账单 ID 查找所有交易。我怎么做？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T03:23:34.190

假设 tbl_product 是 a`DbSet<Product>`或类似的东西，您应该能够使用 LINQ 来查询`DbSet`. 要查找具有特定 BillId 属性值的单个项目，您可以执行以下操作：

```
var product = db.tbl_product.FirstOrDefault(p => p.BillId == billId); 
```

如果有多个产品具有相同的 BillId，您可以执行以下操作：

```
var products = db.tbl_product.Where(p => p.BillId == billId); 
```

这在很大程度上取决于表的架构以及您如何使用实体框架。我强烈建议阅读有关实体框架的书或教程。那里有很多，例如：[实体框架教程](http://entityframeworktutorial.net/EntityFramework4.aspx)。

# unsupervised-learning - lingpipe中的EM软聚类

> ID：16182322
> 
> 赞同：-1
> 
> 时间：2013-04-24T02:20:44.433
> 
> 标签：unsupervised-learning, expectation-maximization

在 Lingpipe 的 EM 教程中，他们说可以在没有监督数据的情况下运行算法：

> 通过让初始分类器随机分配类别，可以以完全无监督的方式训练分类器。只有类别的数量必须是固定的。算法完全一样，收敛后的结果或者最大epoch数就是一个分类器。

但是他们的课程`TradNaiveBayesClassifier`需要有标签和无标签的语料库才能运行。如何修改它以在没有标记数据的情况下运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T15:49:33.890

EM 是一种概率最大似然优化算法。一般来说，它适用于无监督算法（用于聚类），例如 PLSA、高斯混合模型。

我认为 linepipe 文档是说您可以使用所有数据标签的随机初始化（每个数据的标签分布），然后输入 NB 以计算 ELBO（证据下限），然后将其最大化以更新参数。

简而言之，您将需要使用 NB 来编写 M 步骤 --- 更新模型参数。

# iis-7 - 为什么 Web Deploy 会忽略我的 setParameter 标签？

> ID：16182323
> 
> 赞同：3
> 
> 时间：2013-04-24T02:21:00.533
> 
> 标签：iis-7, visual-studio-2012, webdeploy

我有一个 Web 部署包，它生成一个 App.SetParameters.xml 文件以及所有其他包文件。SetParameters 文件有几个`setParameter`节点应该更新连接字符串，但每当我执行 Web 部署脚本时，它总是报告`0 parameters changed`. 查看部署的 Web.config 文件表明它们确实没有更新。

部署脚本的详细输出没有说明它为什么跳过我的参数；它甚至从未提及它们。但是，如果我将其中一个`setParameter`标签更改为一个`parameter`标签，它会给我一个错误：

> 错误：已定义参数“ConnectionString-Web.config Connection String”。

因此，显然是在我的 Web.config 中找到该参数。我对为什么它会跳过这样的参数感到完全困惑。

环境：

*   视觉工作室 2012
*   网络部署 3.0
*   视窗服务器 2008 R2
*   IIS 7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:10:07.693

这个问题与这个问题中提出的[问题有关](https://stackoverflow.com/questions/6844868/getting-no-element-in-the-source-document-matches-configuration-applicationset)。因为我将此解决方案从 Visual Studio 2010 移至 Visual Studio 2012，所以我的所有 Web.config 文件仍将其作为其根节点：

```
<configuration xmlns="http://schemas.microsoft.com/.NetConfiguration/v2.0"> 
```

这会导致 Visual Studio 2012 Web.config 转换使用的 xpath 阻塞并导致错误：

```
No element in the source document matches '/configuration' 
```

但是，这个错误只在构建 Web Deploy Package 时出现，而不是在运行 web deploy 包时出现，所以 Web Deploy 只是认为没有配置部分要更新。您会认为 Web.config 文件中没有配置部分会是一个值得至少警告用户的问题，但显然不是。

解决方案是从基本 Web.config 文件的节点中删除`xmlns`属性，`<configuration>`从 Visual Studio 发布包，并确保“源文档中没有元素”警告不再出现在输出中。在那之后，Web Deploy 应该可以毫无问题地遵守您的`setParameter`指示。

# android - 如何在 DP (Android) 中绘图

> ID：16182329
> 
> 赞同：0
> 
> 时间：2013-04-24T02:21:55.463
> 
> 标签：android, user-interface, icons, dpi, paint.net

我知道 dp 是什么....但是我怎么知道我的计算机上有多少像素是一个 DP？还有一个程序可以让我在绘图时在 DP 中工作吗？我现在要做的基本上就是设计一个应用程序图标，但我似乎找不到方法。我觉得答案就在我面前。但本质上，我只是想让它知道我如何知道我绘制的图像的 DP 是什么，就像paint.net 程序一样。或者有没有办法计算？我（出于好奇）在我的电脑上尝试了一个 24 像素的东西....效果不太好。那么有人可以提供任何建议吗？我可以根据我的屏幕尺寸计算它吗？我根本不反对数学，但只需要知道如何制作应用程序图标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-24T19:50:57.190

检查[图标设计文档](http://developer.android.com/design/style/iconography.html)的第一页！
另请阅读[支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html)以了解更多信息。

到目前为止我所理解的本质以及我如何为启动器图标做到这一点：

1.  创建一个 512x512 像素的画布
    这是网络图标的大小，在开发者控制台中称为**高分辨率图标**
2.  绘制您想要创建的任何图标
3.  在您正在绘制的对象周围使用透明度
4.  尝试让它看起来像 3D，带有一点暗光/阴影
5.  完成后，将您的作品保存为*原始作品*
6.  然后根据下表打开*原图*并导出为不同大小的资源（png/jpg），并将每个文件放入对应的**drawable-??dpi**文件夹中：

```
╔═════════╦════════╦════════════╦═══════╦═════════ ══╦════════════╦════════════╗
║ 名称 ║ DPI ║ 乘数 ║ 比率 ║ 启动器 ║ 动作条 ║ 动作条 ║
║║║║║图标║图标║边距║
╠═════════╬════════╬════════════╬═══════╬═════════ ══╬════════════╬════════════╣
║ 尺寸* ║ - ║ - ║ - ║ 48dp/48dp ║ 24dp/32dp ║ 8dp ║
╠═════════╬════════╬════════════╬═══════╬═════════ ══╬════════════╬════════════╣
║ LDPI** ║ 120dpi ║ 0.75x ║ 1.5 ║ 36px ║ 24px ║ 6px ║
║ MDPI ║ 160dpi ║ 1x ║ 2 ║ 48px ║ 32px ║ 8px ║
║ TVDPI** ║ 213dpi ║ 1.33x ║ - ║ - ║ - ║ - ║
║ HDPI ║ 240dpi ║ 1.5x ║ 3 ║ 72px ║ 48px ║ 12px ║
║ XHDPI ║ 320dpi ║ 2x ║ 4 ║ 96px ║ 64px ║ 16px ║
║ XXHDPI ║ 480dpi ║ 3x ║ 6 ║ 144px ║ 96px ║ 24px ║
║ XXXHDPI ║ 640dpi ║ 4x ║ 8 ║ 192px ║ 128px ║ 32px ║
║ 网络*** ║ - ║ 5x ║ 10 ║ 512px ║ - ║ - ║
╚═════════╩════════╩════════════╩═══════╩═════════ ══╩════════════╩════════════╝

*光学正方形/完整资产大小，边距是它们之间的差异
** LDPI 是从 HDPI÷2 图像自动加载的，TVDPI 是从 MDPI/HDPI 自动加载的。
*** Web 不应被打包到 AP 中

```

如果您足够大，您仍然记得这些 dpi 大小是常用的屏幕分辨率 :)

要轻松计算您想要的任何倾角大小，您需要知道您正在寻找的密度，例如`xxhdpi`大小`50dp`是`3x 50px`（因为`mdpi`是`1x`，即`50px`）。

**请注意**：在设计图标时，它会感觉图标太大，尝试使用具有恒定小尺寸预览的编辑器（例如 Paint.net 在每个选项卡上显示预览）。将其调整为给定尺寸后，它们会感觉太小，但是如果将手机放在屏幕旁边，它们在屏幕上的物理尺寸会更大...

# android - ViewPager里面的ScrollView，自动滚动到中间

> ID：16182331
> 
> 赞同：23
> 
> 时间：2013-04-24T02:22:12.377
> 
> 标签：android, android-viewpager, android-scrollview

我有一个 ViewPager 包含同一片段的多个实例，这个片段包含一篇文章。文章视图层次结构非常简单，一个标题、一个横幅图像、一个副标题和一个正文；除了标题之外的所有内容都包含在滚动视图中。

**问题是**，当您滑动到新页面时，片段会在顶部显示视图，然后立即滚动到容器中间。（事实上​​，它会滚动到带有 id: **article_content**的 TextView 的开头）

我已经在问题的底部发布了布局。

现在， ViewPager 设置了一个简单的 a 实现`FragmentStatePagerAdapter`，代码如下：

```
class ScreenSlidePagerAdapter extends FragmentStatePagerAdapter {

    Bundle args;
    int count;

    public ScreenSlidePagerAdapter(FragmentManager fm) {
        super(fm);
        this.count = 8;
    }

    @Override
    public Fragment getItem(int position) {
        ArticleFragment mPrimaryFragment = new ArticleFragment();
        args = new Bundle();
        args.putString(ArticleFragment.KEY_ARTICLE_URL, mCurArticleLink);
        mPrimaryFragment.setArguments(args);
        return mPrimaryFragment;            
    }

    @Override
    public int getCount() {
        return count;
    }   
} 
```

Fragment 本身也很简单。首先，我检查一下`onCreate`我们是否有缓存文章，我调用`onCreateView`

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View view = inflater.inflate(R.layout.apk_article_view, null);

    mTitle = (TextView) view.findViewById(R.id.article_title);
    mBanner = (ImageView) view.findViewById(R.id.article_banner);
    mSubTitle = (TextView) view.findViewById(R.id.article_subtitle);
    mContent = (TextView) view.findViewById(R.id.article_content);

    if (isArticleCached) {
        Constants.logMessage("Article is cached, loading from database");
        setApkArticleContent();
    }
    else {
        Constants.logMessage("Article isn't cached, downloading");
        HtmlHelper.setApkArticleContent(mContext, mUrl, mTitle, mSubTitle, mContent, mBanner);
        setRefreshing(true);
    }

    return view;
} 
```

值得注意的是，这`setApkArticleContent`是一组简单的 Texts，没什么花哨的：

```
private void setApkArticleContent() {
    mTitle.setText(Html.fromHtml(mCursor.getString(mCursor.getColumnIndex(DbOpenHelper.TITLE))));
    mSubTitle.setText(Html.fromHtml(mCursor.getString(mCursor.getColumnIndex(DbOpenHelper.SUBTITLE))));
    mContent.setText(Html.fromHtml(mCursor.getString(mCursor.getColumnIndex(DbOpenHelper.BODY))));
    UrlImageViewHelper.setUrlDrawable(mBanner, mCursor.getString(mCursor.getColumnIndex(DbOpenHelper.BANNER)));     
} 
```

另外，请知道*我之前没有寻呼机*，片段只加载到一个空的活动中，并且它**在没有滚动到滚动视图中间的情况下工作**。

我真的不确定是什么触发了滚动，是的，我知道我可以以编程方式将其设置为在加载后滚动回顶部，但话又说回来，当片段加载时，这将是两个滚动动作，它会是对用户来说非常明显。

你们有什么想法为什么会这样？关于如何阻止无意滚动的任何想法？

谢谢，

下面是 ArticleFragment 的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/article_title"
    style="@style/headerTextBoldNoUnderline"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="left|center_vertical"
    android:text="" />

<ScrollView
    android:layout_height="match_parent"
    android:layout_width="match_parent"
    >

    <LinearLayout
        android:orientation="vertical"
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        >

        <ImageView
            android:id="@+id/article_banner"
            android:layout_gravity="center_vertical|center_horizontal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="12dp" />

        <TextView
            android:id="@+id/article_subtitle"
            style="@style/HeaderTextItalicNoUnderline"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="left|center_vertical" />

        <View
            android:layout_width="fill_parent"
            android:layout_height="1dp"
            android:background="?android:attr/dividerVertical" />

        <TextView
            android:id="@+id/article_content"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:fontFamily="sans-serif-light"
            android:gravity="left|center_vertical"
            android:padding="8dp"
            android:textColor="?android:attr/textColorSecondary"
            android:textIsSelectable="true"
            android:textSize="16sp" />
    </LinearLayout>
</ScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-24T03:23:08.853

这很可能是由`android:textIsSelectable`. 您可以尝试将以下内容添加到 ScrollView：

```
android:focusable="true"
android:focusableInTouchMode="true"
android:descendantFocusability="beforeDescendants" 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-10T12:33:38.060

将此属性值添加`android:descendantFocusability="blocksDescendants"`到 ScrollView 的子项，根据这个问题：[How to prevent a scrollview from scrolling to a webview after data is loaded?](https://stackoverflow.com/questions/9842494/how-to-prevent-a-scrollview-from-scrolling-to-a-webview-after-data-is-loaded)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-08T22:29:42.957

我也有这个问题。我通过设置`android:focusable="true"`和`android:focusableInTouchMode="true"`ScrollView 的 LinearLayout 中的第一个元素解决了它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-28T08:44:45.173

我尝试添加

```
 android:focusable="true"
    android:focusableInTouchMode="true"
    android:descendantFocusability="beforeDescendants" 
```

在根 viewGroup 中。它的工作很好。如下所示。

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:descendantFocusability="beforeDescendants"
    android:background="@color/normal_bg">

    <ScrollView
        android:id="@+id/scroll"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_above="@+id/rl_enter"
        android:scrollbars="none">
        </ScrollView>
    </RelativeLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-13T08:36:39.610

我尝试了解决方案：

```
android:focusable=true

android:focusableInTouchMode=true

android:descendantFocusability=beforeDescendants 
```

而且我不知道为什么，但我不能用作为父视图的 RelativeLayout 来做到这一点（这不起作用）。

我不得不将我的 TextView 包装在 FrameLayout 中，现在一切正常。也许这对某人有帮助。

```
 <FrameLayout
        android:id="@+id/detail_description_container"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/detail_parameters_container"
        android:layout_centerInParent="true"
        android:descendantFocusability="beforeDescendants"
        android:focusable="true"
        android:focusableInTouchMode="true" >

        <TextView
            android:id="@+id/detail_descritpion"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:autoLink="all"
            android:padding="10dp"
            android:textIsSelectable="true" />
    </FrameLayout> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-23T10:15:10.490

`ScrollView`里面`ViewPager`会自动滚动，但不会在中间滚动.. 看看这个。

```
pager.setOnPageChangeListener(new OnPageChangeListener() {

                @Override
                public void onPageSelected(int position) {
                    // TODO Auto-generated method stub
                    int x=iv.getLeft();
                    int y=iv.getTop();
                    scroll.scrollTo(x, y);
                } 
```

`pager`is`ViewPager`的对象 and `scroll`is `ScrollView`and `iv`is any `View`say `TextView`or `ImageView`.

当我们在 viewpager 中更改页面时，滚动条会自动滚动到左侧。如果您能找到中间的解决方案，请告诉我.. :)

# iphone - iPhone iOS 如何以编程方式检查 ✭ ♦ 之类的字符（以及该集合中的其他字符）？

> ID：16182332
> 
> 赞同：0
> 
> 时间：2013-04-24T02:22:20.463
> 
> 标签：iphone, ipad, ios6, ascii, nscharacterset

我知道 ✭star 和 ♦ diamond 都来自 ASCII 扩展字符集。但是 iOS 上是否有一些可用的 NScharacterSet 可以用来以编程方式检查这些字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:05:12.910

This can be done with the NSString object method: rangeOfCharacterFromSet. It returns NSRange object.

From that,

Eg.:

```
NSCharacterSet *charSet = [[NSCharacterSet characterSetWithCharactersInString:@"0123456789"] invertedSet];

NSString *string = @"Stach✭Overflow";

NSRange range = [string rangeOfCharacterFromSet:charSet];
if(range.location != NSNotFound) {
// one of those characters is exists in the string.
}else{
//no specifiedcharacter not found.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:48:52.030

您可以使用字符集显示这些符号`ISO 8859-1 or UTF-8.`

```
 [ ★ ] star solid [ number: &#9733;]

 [ ♦ ] black diamond suit [name: &diams;] [number: &#9830;] 
```

# javascript - 调用不同的 CSS transitionEnd 事件

> ID：16182334
> 
> 赞同：0
> 
> 时间：2013-04-24T02:22:32.010
> 
> 标签：javascript, jquery, css, css-transitions

我正在使用 CSS 转换为代码的这个特定部分的 Slider 内的两个元素设置动画。一个是加载图像 (gif)，另一个是滑块。

由于有两个元素要通过转换进行动画处理，因此我想听两个不同的 transitionEnd 事件。一个用于加载图像，一个用于滑块。

我目前正在使用此代码：

```
 base._initStage = function() {
                base._initListeners();

                //checks if all images in all slides are finished loading
                base.imagesLoaded( function($images, $proper, $broken) {
                    var $loading = globals.$pixslider.find('.loading');

                // bind transitionEnd on $loading element
                // PROBLEM : This calls alert('test') which is supposed to be called after adjusting $pixslider height
                    $loading.css('opacity', 0).one( transitionEnd, function() {
                        base.loadActiveSlide();
                    });
                });
            };

            base.loadActiveSlide = function() {
                var $active = globals.$activeSlide;

                // adjust $pixslider height depending on active slide's height
                globals.$pixslider.height( $active.height() );

                // bind transitionEnd on $pixslider element
                globals.$pixslider.one( transitionEnd, function() {
                    // PROBLEM : This gets called on end of loadings transitionEnd
                    alert('test');
                });

            }; 
```

我正在使用 jquery 的 .one() 方法来收听一次 transitionEnd，因为如果我使用 .bind() 或 .on()，它会被多次调用。

问题是 alert('test') 在 $loading 元素的 transitionEnd 上被调用，这不是我想要的，因为我希望它发生在 $pixslider 元素的 transitionEnd 上。

我没有得到关于 .one() 方法的信息，或者这是 transitionEnd 事件的常见问题吗？

我正在使用 modernizr 嗅探事件的方式：

```
var transEndEventNames = {
        'WebkitTransition': 'webkitTransitionEnd',
        'MozTransition': 'transitionend',
        'OTransition': 'oTransitionEnd otransitionend',
        'msTransition': 'MSTransitionEnd',
        'transition': 'transitionend'
    }, transitionEnd = transEndEventNames[Modernizr.prefixed('transition')]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T19:33:40.530

这不是问题`.one`。您只需要在事件对象触发时检查它的属性。此外，还有一种更快、更流畅的方式，无需modernizr。写吧：

```
globals.$pixslider.one('webkitTransitionEnd OTransitionEnd transitionend', function(event) {
    console.log(event);
    console.log(event.currentTarget);
    // some conditional logic depending on which element is firing the event
}); 
```

另外，我很确定不需要`MSTransitionEnd`，因为 IE9 不支持过渡，而 IE10 支持不带前缀的过渡。Modernizr 在这方面是错误的。我已经向他们提交了一张票

# sockets - 如何获取 sendto 函数使用的 IP？

> ID：16182338
> 
> 赞同：0
> 
> 时间：2013-04-24T02:22:56.203
> 
> 标签：sockets, winapi, ip

当发送方有多个网卡时，该函数`sendto`选择随机ip发送数据包。
那么获取使用的IP地址`sendto`？
代码：

```
fd = socket(AF_INET, SOCK_DGRAM, 0);
sendto(fd, buf, len, 0, (struct sockaddr*)&servaddr, sizeof(servaddr)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T02:26:01.147

它不会选择随机 IP。它使用操作系统的路由表来决定哪个本地 IP 最有可能将数据路由到目标地址。但是，无法查询`sendto()`实际选择使用哪个 IP。您可以直接访问操作系统的路由表并尝试手动找出它，但更好的选择是仅将套接字连接到您要用作发送 IP`bind()`的特定 IP ，例如：`sendto()`

```
fd = socket(AF_INET, SOCK_DGRAM, 0);

struct sockaddr_in localaddr;
memset(&localaddr, 0, sizeof(addr));
localaddr.sin_family = AF_INET;
localaddr.sin_addr.s_addr = inet_addr("192.168.0.1"); // the desired local IP

bind(fd, (struct sockaddr*)&localaddr, sizeof(localaddr));

sendto(fd, buf, len, 0, (struct sockaddr*)&servaddr, sizeof(servaddr)); 
```

# mongoid - 如何使用 bcrypt 和 mongoid 保护用户密码

> ID：16182340
> 
> 赞同：2
> 
> 时间：2013-04-24T02:23:05.793
> 
> 标签：mongoid, bcrypt, bcrypt-ruby

我刚刚开始使用`MongoDB`，特别是`Mongoid`.

自然，我想确保我`User`的密码保持良好和安全，以前我会这样做`ActiveRecord`并使用`bcrypt`. 我正在寻找一种漂亮、干净、安全、简单的方法来使用`Mongoid`.

我已经查看了[mongoid-encryptor，](https://github.com/juno/mongoid-encryptor)但我还没有完全了解如何使用它。

假设我的简化`User`看起来像这样，根据`mongoid-encryptor`自述文件中的示例。

```
class User
  include Mongoid::Document
  include Mongoid::Encryptor
  field :name
  field :password
  encrypts :password
end 
```

在我的 WebApp 中（`Sinatra`在这种情况下使用）我会定义一个助手，例如

```
def login (name, cleartxtpass)
  return User.where(name: name, password: cleartxtpass).first
end 
```

1.  我如何使用它`bcrypt`？
2.  是否有任何预处理我需要做`cleartxtpass`或`Mongoid::Encryptor`只处理？从文档中不清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T06:08:18.843

好吧，经过一番挖掘，我决定不再费心使用`Mongoid::Encryptor`，而是坚持我在使用`ActiveRecord`.

所以现在我的`User`样子

```
class User
  include Mongoid::Document
  field :name, type: String
  field :password_hash, type: String
  index({name: 1}, {unique: true, name: 'user_name_index'})

  include BCrypt
  def password
    @password ||= Password.new(password_hash)
  end

  def password=(new_password)
    @password = Password.create(new_password)
    self.password_hash = @password
  end
end 
```

我的身份验证辅助方法看起来像

```
 def auth_user(username, password)
    user = User.where(name: username).first
    return user if user && user.password == password
    return nil
  end 
```

这是一种享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-20T13:52:56.327

简单的方法是：

```
class User
  include Mongoid::Document
  include ActiveModel::SecurePassword

  field :name, type: String
  field :password_digest, type: String

  has_secure_password
end
```

# css - 使用 css 选择器 nth-of-type 不起作用

> ID：16182344
> 
> 赞同：1
> 
> 时间：2013-04-24T02:24:00.497
> 
> 标签：css, css-selectors

有一个关于使用 css nth-of-type 选择器[http://codepen.io/mnafricano/pen/ltKvy](http://codepen.io/mnafricano/pen/ltKvy)的很好的例子，但是当我自己运行这个例子时，我不能让它工作。有人可以指出使用 nth-of-type 出了什么问题吗

html是 `<h1 class='logo'>Google</h1>` ，css是

```
h1.logo span:nth-of-type(1){
  color:#0089ab;
}
h1.logo span:nth-of-type(2){
  color:#d91821;
}
h1.logo span:nth-of-type(3){
  color:#ffac05;
}
h1.logo span:nth-of-type(4){
  color:#0089ab;
}
h1.logo span:nth-of-type(5){
  color:#88c406;
}
h1.logo span:nth-of-type(6){
  color:#d91821;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T02:28:55.897

这里的 CSS 有效，诀窍是该页面上有一些 Javascript，它`<span>`在“Google”中的每个字母周围添加了一个包装器。

CSS专门寻找带有“logo”的第n个`span`内部。`h1``class`

如果你直接取 HTML 和 CSS，而不是 JS，那么 CSS 规则永远不会匹配。

如果您检查`h1`，您将看到以下内容：

```
<h1 class="logo">
  <span class="char1">G</span>
  <span class="char2">o</span>
  <span class="char3">o</span>
  <span class="char4">g</span>
  <span class="char5">l</span>
  <span class="char6">e</span>
</h1> 
```

如果您尝试使用该 HTML，它应该可以按预期工作。

这是一个[可能有帮助的 JSFiddle](http://jsfiddle.net/ykue3/)。

# php - 如何半快速地创建大型 pdf

> ID：16182345
> 
> 赞同：5
> 
> 时间：2013-04-24T02:24:03.797
> 
> 标签：php, pdf, adobe-indesign

我需要生成一个大的 PDF，确切地说是 2480 页。目前我正在使用 indesign，而输出正是我想要的。我宁愿不参与文档创建过程。indesign执行数据合并、生成pdf、保存pdf、保存pdf.indd文件需要31分钟。（我真的不需要 pdf.indd 文件，但如果 pdf 发生某些事情，我宁愿不必重新创建数据合并）

我希望有一个 php 或类似的解决方案。目前我的数据存储在 MySQL 中。大多数 pdf 是静态文本，有 19 个动态驱动的文本字段。pdf上有一张图片，75x100px @ 72dpi。

输出需要准确，pdf 文件被打印并在 4.25 英寸处切成两半。

我已经尝试过 TCPDF，虽然它可以快速生成多达 50 页，但在那之后它宁愿死掉也不愿给我一个输出。我也玩过 mPDF，发现它……不那么友好。我还考虑过生成许多小文件并使用一些实用程序将较小的 pdf 合并为一个大 pdf。虽然这看起来像是在山上开车。

任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T02:28:50.000

您当然可以直接使用 PHP 创建文档，但这可能很困难。如您所见，一种方法是使用各种 PDF 类之一来创建文档。另一种是创建图像（使用 ImageMagic、GD 等）并将其转换为 PDF。（此方法效率较低，因为您正在创建光栅图形，使整个 PDF 页面成为一个巨大的图形。）

但是，我认为您应该考虑简单地编写 InDesign 脚本。InDesign 能够通过 XML 读取数据并创建文档。这样，您的文档设计不依赖于您的编程能力，您仍然可以拥有以编程方式创建文档的能力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T02:30:57.190

对于 PDF 中的大量页面，**LaTeX**始终是最佳答案。没有什么能像**LaTeX**那样快速、准确和优雅地处理巨大的 PDF 生成。检查此[问题](https://tex.stackexchange.com/questions/3697/is-it-possible-to-connect-a-database-to-latex-to-produce-data-driven-documents)以了解如何从数据库中检索数据。

# ios - UITableView segue 不工作

> ID：16182351
> 
> 赞同：2
> 
> 时间：2013-04-24T02:24:40.860
> 
> 标签：ios, uitableview, segue

我按照文档中的 SimpleDrillDown 应用程序示例进行了锻炼应用程序，该应用程序在第一个 UITableView 中显示锻炼名称，在第二个 UITableView 中显示锻炼。

**我的应用程序在 Dropbox 中：http: [//db.tt/V0EhVcAG](http://db.tt/V0EhVcAG)**

我使用了故事板，有原型单元，但是当我在模拟器中加载时，第一个 UITableView 不会让我点击并转到详细的 UITableView。披露指标 V 形不加载。该应用程序成功构建并且没有正式错误。

我的 tableviews 在导航控制器中，我的 segue 和原型单元格都在故事板中相应地命名。

### SpitfireViewController.m

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [dataController countOfList];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"WorkoutCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    Workout *workoutAtIndex = [dataController objectInListAtIndex:indexPath.row];
    cell.textLabel.text = workoutAtIndex.title;

    return cell;
}
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showExercises"]) {
        NSIndexPath *selectedRowIndex = [self.tableView indexPathForSelectedRow];

        DetailViewController *detailViewController = [segue destinationViewController];

        detailViewController.workout = [dataController objectInListAtIndex:selectedRowIndex.row];
    }
} 
```

### 细节视图控制器.m

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return [workout.exercises count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"ExerciseCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [workout.exercises objectAtIndex:indexPath.row];
    return cell;
} 
```

### AppDelegate.h

```
#import <UIKit/UIKit.h>
@class DataController;
@class SpitfireViewController;

@interface SpitfireAppDelegate : UIResponder <UIApplicationDelegate>
{
    UIWindow *window;
    SpitfireViewController *spitfireViewController;
    DataController *dataController;
}

@property (strong, nonatomic) UIWindow *window;

@end 
```

### AppDelegate.m

```
#import "SpitfireAppDelegate.h"
#import "SpitfireViewController.h"
#import "DataController.h"

@implementation SpitfireAppDelegate
@synthesize window;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    spitfireViewController = [[SpitfireViewController alloc] init];
    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:spitfireViewController];

    DataController *controller = [[DataController alloc] init];
    spitfireViewController.dataController = controller;

    [window addSubview:[navController view]];
    [self.window makeKeyAndVisible];

    return YES;
}

@end 
```

![我的故事板](https://i.stack.imgur.com/WGAJE.png) ![SpitfireViewController (根)](https://i.stack.imgur.com/RjpAI.png) ![细节视图控制器](https://i.stack.imgur.com/RihWa.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-27T14:56:40.500

**如果您有 tableview 单元格 segue 选择问题。**

![启用了选择的 Tableview](https://i.stack.imgur.com/rdB6V.png)

*   您需要首先检查您的表格视图是否允许选择
*   您不需要实现`UITableViewDelegate`和`UITableViewDataSource`使用“静态单元格”时
*   您需要为辅助动作添加一个转场 + 为选择添加一个转场。

![一个用于表格视图选择的 segue 另一个用于辅助操作](https://i.stack.imgur.com/aIbOM.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T02:32:11.560

使用 Storyboards 时，您通常会在信息选项卡下的项目设置中设置故事板文件名。一旦你在那里选择了你的故事板，你基本上可以删除除方法`return YES`部分之外的所有内容`application:didFinishLaunchingWithOptions:`。这一切都在情节提要中为您处理好了。

**编辑：**

这是您设置情节提要的地方：

![设置主故事板](https://i.stack.imgur.com/KZsVa.png)

还要确保您的视图控制器设置为初始视图控制器：

![设置初始视图控制器](https://i.stack.imgur.com/gBPRn.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T03:54:18.663

我认为这是你的问题：

```
 spitfireViewController = [[SpitfireViewController alloc] init];
    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:spitfireViewController];

    DataController *controller = [[DataController alloc] init];
    spitfireViewController.dataController = controller; 
```

您在此处创建的 spitfireViewController 不是故事板中的那个，而是一个新的。您应该删除所有这些代码，因为您已经在故事板中创建的导航控制器中嵌入了一个 spitfireViewController。你应该在它的 viewDidLoad 方法中为 spitfireViewController 设置数据控制器：

```
 DataController *controller = [[DataController alloc] init];
    self.dataController = controller; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-24T02:49:43.207

您的“didSelectRowAtIndexPath”方法在哪里？

我建议将其放入然后触发 [self performSegueWithIdentifier:] 以使用表格单元格中的数据作为发送者来触发 segue。

# oracle - Oracle - 从子表中删除行锁定父表

> ID：16182353
> 
> 赞同：4
> 
> 时间：2013-04-24T02:24:56.120
> 
> 标签：oracle, locking, foreign-keys, deadlock

我们在 Oracle 11.2g 中有死锁问题。发生死锁的一个潜在原因是从子表中删除锁定父表。我从oracle文档中搜索，并没有找到这种锁的任何规范。任何解释或参考文档将不胜感激。

这是代码。

```
CREATE TABLE table_parent (a NUMBER PRIMARY KEY);
CREATE TABLE table_child (b NUMBER, a NUMBER,PRIMARY KEY (b), CONSTRAINT fk_relation FOREIGN KEY (a) REFERENCES table_parent(a));

INSERT INTO table_parent VALUES (1);
INSERT INTO table_parent VALUES (2);
INSERT INTO table_child VALUES (1,1);
INSERT INTO table_child VALUES (2,1);
INSERT INTO table_child VALUES (3,1);
INSERT INTO table_child VALUES (4,1);

COMMIT; 
```

然后从子表中删除 1 条记录。

```
DELETE FROM table_child WHERE b=4; 
```

当我们在执行提交之前查看 V$LOCK 表时。'TM' 类型有两个新锁，'table_child' 和 'table_parent'。

这是查看 V$LOCK 表的查询。

```
SELECT O.OWNER, O.OBJECT_ID, O.OBJECT_NAME, O.OBJECT_TYPE, L.TYPE
FROM DBA_OBJECTS O, V$LOCK L
WHERE O.OBJECT_ID = L.ID1; 
```

**问题是为什么'table_parent'被锁定了？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T06:59:26.297

为了维护“跨越多行”的约束（外键就是这种情况），有时（即 DBMS）需要序列化事务。需要序列化的时刻一对一地取决于事务对相关表执行的更改类型。理论上（在提供快照隔离的 DBMS 中，这是 Oracle 所做的），只有当更改的类型可能违反多行约束时，DBMS 才需要自动序列化事务（例如通过获取各种类型的锁）。

现在在外键的情况下，需要问自己：什么时候可以违反外键？有四种情况。

*   删除父行：如果子行仍然存在，将违反 FK。
*   父行的键被更新：如果子行直到“指向”键的旧值，将违反 FK。
*   插入子行：如果行指向不存在的父行，将违反 FK。
*   更新子行的 fk-column 值：如果新列值指向不存在的父行，将违反 FK。

所涉及的 (2) 表上的所有其他类型的事务永远不会违反 FK。因此，在您的情况下，删除了一个子行，不需要序列化。然而，Oracle 可能有一些“特定于实现”的原因，这迫使它确实获取某种锁。

我也见过 Oracle 执行这种“不必要”锁定的不同场景：您可以在这里找到它[https://forums.oracle.com/forums/thread.jspa?messageID=10050753峁](https://forums.oracle.com/forums/thread.jspa?messageID=10050753&#10050753)

香椿

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:50:47.367

在 table_child(a) 列上添加索引——出于这个原因，您总是索引外键列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-27T11:02:40.523

此处通过示例解释了此问题的答案[http://www.oraclebin.com/2012/12/what-is-deadlock-in-oracle.html](http://www.oraclebin.com/2012/12/what-is-deadlock-in-oracle.html)

# c# - 如何在 LINQ 中对由另一个分组的字段求和？

> ID：16182355
> 
> 赞同：2
> 
> 时间：2013-04-24T02:25:17.380
> 
> 标签：c#, linq

我正在尝试将特定配方（所有成分）的所有数量求和为单个值以获得总数量

假设我有以下数据集：

```
RecipeName IngredientName ReceiptWeight
Food1      Ingredient1    5
Food1      Ingredient2    2
Food2      Ingredient1    12
Food2      Ingredient3    1 
```

我希望得到以下信息：

```
RecipeName ReceiptWeight
Food1      7
Food2      13 
```

我到目前为止的代码是：

```
 Grouping =
                (
                from data in dataset
                group data by data.RecipeName into recipeGroup
                let fullIngredientGroups = recipeGroup.GroupBy(x => x.IngredientName)
                select new ViewFullRecipe()
                {
                    RecipeName = recipeGroup.Key,
                    ReceiptWeight = ???? 
```

如何获得 RecipeWeight 的值？谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T02:30:32.850

LINQ 确实有 sum

```
from d in dataset
group d by new { d.RecipeName } into g
select new {
     g.Key.RecipeName,
     ReceiptWeight = g.sum(o => o.ReceiptWeight)
} 
```

# c# - 是否可以使用 Microsoft.SharePoint.Client 以编程方式获取 Sharepoint 站点的时区？

> ID：16182356
> 
> 赞同：0
> 
> 时间：2013-04-24T02:25:22.980
> 
> 标签：c#, sharepoint, csom

是否可以在 C# 中使用 Microsoft.SharePoint.Client 以编程方式获取 Sharepoint 站点的时区？我需要 Sharepoint 站点时区以将其与特定时区匹配。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T11:31:49.907

不幸的是，对于 SharePoint 的客户端对象模型，无法获得时区本身。服务器对象模型和 SPServices 包含一个名为 RegionalSettings 的 SPWeb 属性，但是 CSOM 中缺少该属性。

这里的好处是 CSOM 有一个实用功能`FormatDateTime`，您可以使用它来将特定的字符串/日期转换为您网站的时区。

下面是一个在简单控制台应用程序中使用的示例：

```
 ClientContext clientContext = new ClientContext("http://yoursite.com");
        Site site = clientContext.Site;

        DateTime dt = DateTime.Parse("04/24/2013 5:44PM").ToUniversalTime();
        ClientResult<string> cr = Utility.FormatDateTime(clientContext, clientContext.Web, dt, DateTimeFormat.DateTime);
        clientContext.ExecuteQuery();
        string value = cr.ToString();
        DateTime webdt = DateTime.Parse(cr.Value.ToString());
        Console.WriteLine(webdt.ToString());
        Console.Read(); 
```

请注意，您需要将 SharePoint 客户端 DLL 包含在项目中并正确引用它们。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T16:18:59.907

```
ClientContext context = new ClientContext(yourSite);
var culture = context.Web.RegionalSettings;
context.Load(culture);
var tz = culture.TimeZone;
context.Load(tz);
context.ExecuteQuery();
context.Dispose(); 
```

tz 将包含您的时区、偏差等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-15T21:56:37.130

我的代码与 Deptor 的代码相似，但我认为我的代码修复了我尝试在我的 SP 2013 站点上运行它时遇到的一些语法问题。我还使用一些全局变量来存储诸如 ClientContext、Web、Culture 和 Timezone SP CSOM 对象之类的内容，以帮助学习者了解每个对象包含的内容。

代码：

```
var context, web, culture, tz;

var siteTzId, siteTzDesc, siteTzInformation;

getSiteRegionalTimeZone();

setTimeout(function(){
    alert("Site TZ = |"+ siteTzDesc +"|");
}, 2000);

function getSiteRegionalTimeZone() {
    context = new SP.ClientContext();
    web = context.get_web();
    culture = web.get_regionalSettings();
    context.load(culture);
    tz = culture.get_timeZone();
    context.load(tz);
    context.executeQueryAsync(function(){
        siteTzId = tz.$5_0.$H_0.Id;
        siteTzDesc = tz.$5_0.$H_0.Description;
        siteTzInformation = tz.$5_0.$H_0.Information;
    });
    context.dispose();
}; 
```

# asana - 事件发生时的回调，例如新评论或新任务

> ID：16182358
> 
> 赞同：5
> 
> 时间：2013-04-24T02:25:38.217
> 
> 标签：asana

有没有办法使用 Asana API 让我的程序在项目更改或添加（例如新任务或评论）时接收某种通知？我想制作一个与 Asana 集成的实时应用程序。例如，以人们之间实时聊天的方式使用对项目的评论。我想如果 Asana API 可以通过套接字或长轮询来支持这一点，那就太好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-29T18:15:38.110

（我在 Asana 工作。）目前还没有，但对通知系统的请求很常见，我们已经在为其设计解决方案。虽然我们的目标是实时或接近实时的响应能力，但我不能确定通过评论支持“实时聊天”是否合适，我也不能提供有关时间表的任何细节，但我们一定会在我们发布时宣布。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-04T09:49:08.223

他们最近在 asana api 中实现了[事件。](https://asana.com/developers/api-reference/events)

# networking - Why does UDP have the field "UDP Length" twice in its packet?

> ID：16182362
> 
> 赞同：3
> 
> 时间：2013-04-24T02:26:09.673
> 
> 标签：networking, udp, network-protocols

Why does UDP have the field "UDP Length" twice in its packet? Isn't it redundant? If it is required for some kind of error checking, please provide an example.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-25T10:33:20.267

你的观察是正确的。长度字段是多余的，因为 IP 头和 UDP 头都有一个长度字段。我对这种冗余原因的唯一猜测是，它的发生是因为 UDP 是在某个时候设计的，当时还不清楚 IP 协议套件会是什么样子。

所有合法的 UDP 数据包都应该有一个长度字段，该字段与从 IP 标头中的长度字段得出的值完全匹配。如果你不这样做，你就无法确定接收者将如何处理数据包。

具有不一致长度字段的 UDP 数据包在 Internet 上随处可见。我猜他们正在探测缓冲区溢出，如果一个长度字段用于分配内存而另一个长度字段用于将数据复制到分配的缓冲区时，可能会发生这种情况。

在较新的 UDP Lite 协议中，长度字段已被重新利用。UDP Lite 标头中的长度字段并不表示数据包中有多少数据，而是表示校验和已覆盖了多少数据。UDP Lite 数据包中的数据长度总是根据 IP 标头中的长度字段计算得出。这是 UDP 和 UDP Lite 标头格式之间的唯一区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:37:15.873

来自[RFC 768](https://www.rfc-editor.org/rfc/rfc768)：

> 长度是这个用户数据报的八位字节长度，包括这个头和数据。（这意味着长度的最小值是八。）
> 
> 概念上以 UDP 报头为前缀的伪报头包含源地址、目的地址、协议和 UDP 长度。 **此信息可防止错误路由的数据报**。此校验和过程与 TCP 中使用的相同。

```
 0      7 8     15 16    23 24    31
             +--------+--------+--------+--------+
             |          source address           |
             +--------+--------+--------+--------+
             |        destination address        |
             +--------+--------+--------+--------+
             |  zero  |protocol|   UDP length    |
             +--------+--------+--------+--------+ 
```

真正的答案是这是一个“伪标头”——也就是说，它用于计算校验和，但并未实际发送。至少这是我从[UDP/TCP 中使用的伪标头的意义是什么得出的结论](https://stackoverflow.com/questions/359045/what-is-the-significance-of-pseudo-header-used-in-udp-tcp)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T10:39:12.837

我不知道它在哪里出现了两次，udp 标头中只有一个“udp 长度”字段。

# c++ - Why Are Vtables Not Being Implemented Correctly On Embedded Platform?

> ID：16182365
> 
> 赞同：6
> 
> 时间：2013-04-24T02:26:33.977
> 
> 标签：c++, compiler-construction, embedded, vtable, freertos

I am developing code for an embedded system (specifically, the PSoC 5, using PSoC Creator), and writing in C++.

While I've overcome most hurdles with using C++ , first off compiling in C++ using the compiler flag `-x c++`, defining the new and delete operators, making sure exceptions aren't thrown with the compiler flag `-fno-exception`, I've come to a brick wall when it comes to using virtual functions.

If I try and declare a virtual function, the compiler gives me the error `undefined reference to "vtable for __cxxabiv1::__class_type_info"`. The only way to get around this is to use the compiler flag `-fno-rtti`, which prevents the error and makes it compile successfully. However, if I do that, the embedded program crashes when trying to run the overloaded virtual function, and I'm thinking this is because the vtable does not exist.

I don't see why you shouldn't be able to implement vtables on an embedded platform, since all it is a extra space in memory before or after member objects (depending on the exact compiler).

The reason I am trying to use virtual functions is because I am wanting to use FreeRTOS with C++, and other people have implemented this by using virtual functions (see [http://www.freertos.org/FreeRTOS_Support_Forum_Archive/July_2010/freertos_Is_it_possible_create_freertos_task_in_c_3778071.html](http://www.freertos.org/FreeRTOS_Support_Forum_Archive/July_2010/freertos_Is_it_possible_create_freertos_task_in_c_3778071.html) for the discussion, and [https://github.com/yuriykulikov/Event-driven_Framework_for_Embedded_Systems](https://github.com/yuriykulikov/Event-driven_Framework_for_Embedded_Systems) for a well written embedded C++ FreeRTOS framework)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T21:42:33.627

错误消息引用了一个名为的类这一事实`__cxxabiv1`表明您没有针对您的平台链接到正确的**C++ 运行时**。我对 PSoC 一无所知，但是在更“正常”的平台上，如果您在链接时使用`gcc`(resp. `clang`) 命令而不是`g++`(resp. `clang++`)，则可能会发生这种错误；或在手摇情况下，如果您使用或`-lc++`不使用.`-stdlib=libc++``-lstdc++``-stdlib=libstdc++`

使用该`-v`选项检查您的链接器命令行，并尝试找出它正在拉入的确切 C++ 运行时库。它可能会被命名为`libcxxabi`or `libcxxrt`。

[这家伙在这里](http://cladlab.com/programming/microcontrollers/psoc/using-cplusplus-with-psoc-creator)给出了在 PSoC Creator 中编译 C++ 的分步说明；但他从未想过如何与 C++ 运行时库链接，因此他所有的技巧都集中在如何从代码中*删除*C++ 主义（`-fno-rtti`, `-fno-exceptions`,...）。我同意网上似乎没有任何关于如何在 PSoC 中实际*使用*C++ 的信息。

对于此*特定*错误，您始终可以尝试自己定义缺少的符号：

```
// file "fix-link-errors.cpp"
namespace __cxxabiv1 {
    class __class_type_info {
        virtual void dummy();
    };
    void __class_type_info::dummy() { }  // causes the vtable to get created here
}; 
```

或者许多链接器能够`0x0`通过命令行选项定义未定义的符号，例如`-C`or `--defsym`。然而，这不仅是一个坏主意，而且不方便，因为您必须弄清楚 vtable 对象的实际（损坏的）名称是什么，而链接器并没有告诉您。（这是 GCC，可能类似于`__ZTVN10__cxxabiv117__class_type_infoE`.）

如果程序曾经试图对vtable*做*任何事情，那么这些“解决方案”中的任何一个都会导致可怕的崩溃；但是他们会关闭链接器，如果您只关心这些并且您知道该程序永远不会真正使用 RTTI。`-fno-rtti`但在这种情况下，在整个项目中一致使用就足够了。

具体来说，当您使用时出了什么问题`-fno-rtti`？

# asp.net - asp.net vbscript 向 ip 和端口发送消息

> ID：16182369
> 
> 赞同：1
> 
> 时间：2013-04-24T02:27:06.970
> 
> 标签：asp.net, tcp, vbscript, telnet

需要一些建议，我对 asp.net 很陌生，所以这是我试图创建的场景。

我知道设备的 IP 地址和端口，我可以发送一条简单的消息，例如“MMS”，设备就会对消息做出反应。

现在我想创建一个可以使用下拉列表连接到 IP 的网页，因为它们是一些设备，但一次连接是 1 个。我可以使用什么代码来建立连接？

然后我想要一些按钮可以在点击时发送消息。

希望你能帮忙。

# ruby - 带有位串的意外解包结果

> ID：16182371
> 
> 赞同：6
> 
> 时间：2013-04-24T02:27:16.013
> 
> 标签：ruby, unpack

为什么当我打开 irb 并运行时
`puts 'A'.unpack("B8")`
我得到`01000001`但当我运行时
`puts 'A'.unpack("B4B4")`
我只得到`0100`而不是`[0100,0001]`？

unpack 的分辨率是否只有一个完整的字节？一点也不少？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T13:03:27.777

让我们做一些测试来理解行为：

```
> 'A'.unpack('B8')
 => ["01000001"] 
```

它返回 char 的 8 个最高有效位 (MSB)`'A'`

```
> 'A'.unpack('B4')
 => ["0100"] 
```

它返回 char 的 4 个 MSB`'A'`

```
> 'A'.unpack('B16')
 => ["01000001"] 
```

它返回 char 的 16 个 MSB `'A'`，但由于只有 8 个，我们得到了 8 个 MSB

```
> 'AB'.unpack('B16')
 => ["0100000101000010"] 
```

它返回字符序列的 16 个 MSB `'AB'`（最后 8 位`01000010`对应于`'B'`）

```
> 'AB'.unpack('B10')
 => ["0100000101"] 
```

它返回 chars 序列的 10 个 MSB `'AB'`，即 8 个 MSB`'A'`和 2 个 MSB`'B'`

```
> 'ABC'.unpack('B*')
 => ["010000010100001001000011"] 
```

它返回 chars 序列的所有 MSB `'ABC'`，（最后 8 位`01000011`对应`'C'`）

```
> 'AB'.unpack('B8B8')
 => ["01000001", "01000010"] 
```

它返回以下数组：

*   第一个元素是 char 的 8 个 MSB`'A'`
*   第二个元素是 char 的 8 个 MSB`'B'`

_

```
> 'AB'.unpack('B8B7')
 => ["01000001", "0100001"] 
```

它返回以下数组：

*   第一个元素是 char 的 8 个 MSB`'A'`
*   第二个元素是 char 的 7 个 MSB`'B'`

_

```
> 'AB'.unpack('B4B8')
 => ["0100", "01000010"] 
```

它返回以下数组：

*   第一个元素是 char 的 4 个 MSB`'A'`
*   第二个元素是 char 的 8 个 MSB`'B'`

_

```
> 'AB'.unpack('B16B8')
 => ["0100000101000010", ""] 
```

它返回以下数组：

*   第一个元素是字符序列的 16 个 MSB`'AB'`
*   第二个元素为空，因为字符已被消耗

_

```
> 'AB'.unpack('B*B8')
 => ["0100000101000010", ""] 
```

它为您提供相同的结果，并消耗所有字符串。

```
> 'AB'.unpack('B9B8')
 => ["010000010", ""] 
```

它返回以下数组：

*   第一个元素是字符序列的 9 个 MSB`'AB'`
*   第二个元素为空，因为字符已被消耗

# 作为结论，

对字符串的指令`BN`最多会消耗字符串的第一个`((N-1) / 8) + 1`字符。如果字符串中仍有字符，并且您有第二个指令`BM`，则最多会消耗`((M-1) / 8) + 1`字符串的下一个字符。对于所有下一个指令，依此类推。如果使用指令`B*`，它将消耗所有字符，并返回其对应 MSB 的序列。

例如：

```
'ABCDEFG'.unpack('B17B*B8') 
```

它应该返回我们：

*   序列的 17 个 MSB`ABC`
*   序列的所有 MSB`DEFG`
*   一个空的位串

让我们检查：

```
> 'ABCDEFG'.unpack('B17B*B8')
 => ["01000001010000100", "01000100010001010100011001000111", ""] 
```

并且确实`'A'.unpack('B4B4')`返回数组`["0100", ""]`，因为第一个指令使用 char `A`。

# javascript - 如何从左侧为 div 设置动画，下一个 div 将在顶部设置动画

> ID：16182374
> 
> 赞同：0
> 
> 时间：2013-04-24T02:27:25.060
> 
> 标签：javascript, jquery, if-statement, jquery-animate

我只是 javascript 的新手。:) 我想为左侧的第一个 div 设置动画，下一个动画将在顶部设置动画。我应该如何解决这个问题；

我的html：

```
<div id="small-img1">
        <div id="slideimg">
            <div><img src="images/resize_1346910724.jpg" /></div>
            <div><img src="images/resize_1347348425.gif" /></div>
            <div><img src="images/resize_1347354705.png" /></div>
            <div><img src="images/resize_1347403947.jpg"/></div>
        </div>
</div> 
```

myjs 脚本

```
setInterval(function() {
  $('#slideimg > div:first').animate({left:"-62px"},500).appendTo('#small-img1');
},  4000); 
```

# highcharts - 在 highstock 中创建对数刻度

> ID：16182376
> 
> 赞同：0
> 
> 时间：2013-04-24T02:27:53.717
> 
> 标签：highcharts, highstock

如何在 highstock 中创建对数刻度，就像在这个 highchart [http://www.highcharts.com/demo/line-log-axis](http://www.highcharts.com/demo/line-log-axis)中的对数刻度一样 ？

如果我使用这种类型的设置：'logarithmic',minorTickInterval: 0.1 in highstock 仍然不成功

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T08:02:28.127

请看一下 Highstock 的例子，

[http://jsfiddle.net/7DDz8/](http://jsfiddle.net/7DDz8/)

```
 yAxis: {
            type: 'logarithmic',
            minorTickInterval: 0.1
        }, 
```

# php - PHP：按类分组的所有函数列表

> ID：16182378
> 
> 赞同：1
> 
> 时间：2013-04-24T02:28:00.477
> 
> 标签：php, class, function

我正在寻找一种方法来获取所有 php 函数的列表，但需要按它们所在的类对它们进行分组。不确定是否有办法从 PHP 文档中获取它，或者它是否内置在 PHP 中。我真的只是在寻找内置/流行的类，所以我不关心自定义的 mysqli 类，但我确实需要可以使用 PHP 安装的 mysql 库。

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T02:32:06.013

尝试这个：

```
foreach(get_declared_classes() as $classname) {
    echo $classname . PHP_EOL;
    $class = new ReflectionClass($classname);
    foreach($class->getMethods() as $m) {
        echo '  ' . $m->name . PHP_EOL;
    }
} 
```

我[`get_declared_classes()`](http://php.net/manual/en/function.get-declared-classes.php)用来获取所有声明的类的列表。然后我从它们创建一个[`ReflectionClass`](http://php.net/manual/en/class.reflectionclass.php)对象并遍历它们的方法。

# c# - LINQ to XML 类型声明

> ID：16182387
> 
> 赞同：1
> 
> 时间：2013-04-24T02:29:27.133
> 
> 标签：c#, linq, linq-to-xml

如果我们使用*C# **( [LINQ to XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx) )***循环遍历包含在小 (< 100kb) ***[XDocument对象中的节点，使用](http://msdn.microsoft.com/en-us/library/bb387063.aspx)******[XElement](http://msdn.microsoft.com/en-us/library/bb387085.aspx)***或标准隐式“ ***[var](http://msdn.microsoft.com/en-us/library/bb384061.aspx)*** ”类型是更好的做法还是更好的性能？

插图：

```
foreach (XElement el in node.Elements())
{
    ...
} 
```

或者

```
foreach (var el in node.Elements())
{
    ...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T07:09:34.517

这不会改变任何事情。`var`只是开发人员编写更短代码的一种简短形式。在编译时，它将根据`XElement`您的情况进行修改。

`var`是强类型！请不要理解`var`为 PHP 中的类型自由变量。

一个例子：

PHP

```
$i = 3;
$i = new MyObject();
//Everything is fine 
```

C＃

```
var i = 3;
i = new MyObject();
//compiler error! 
```

所以没有区别

```
var i = 3; 
```

和

```
int i = 3; 
```

编译后`var`无论如何都替换为`int`，因此执行时不会有更好的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:18:27.987

性能没有差异，因为 .NET 中的类型推断发生在编译时。所有变量在编译后都会被强类型化。

`var`变量声明的用法或类型名称也没有规则。这是个人喜好的问题。有些人喜欢看到他们使用的变量的类型，有些人认为类型声明是重复的形式（不是 foreach 语句的情况，而是简单的变量声明）。

当您使用匿名类型时，go 的真正力量`var`（这就是它被引入的原因）。您根本无法指定变量的类型名称：

```
var people = from p in doc.Descendants("Person")
             select new { p.Name, p.Id }; 
```

考虑阅读[Implicitly Typed Local Variables](http://msdn.microsoft.com/en-us/library/bb384061.aspx)文章。

# android - 在目标模式下向我的 NFC 屏蔽发送 ID# 的 APDU 应用程序

> ID：16182389
> 
> 赞同：1
> 
> 时间：2013-04-24T02:29:51.600
> 
> 标签：android, arduino, nfc, apdu

我正在尝试使用我的手机作为 ID。我想使用 APDU 发送大约 8 位数字。我有一个 arduino NFC 屏蔽，我已将其编程为“目标”模式（参考 b），所以它只是在等待“发起者”发送数据。我的项目基于这两个项目。

a) [http://sdiwc.net/digital-library/web-admin/upload-pdf/00000426.pdf](http://sdiwc.net/digital-library/web-admin/upload-pdf/00000426.pdf) b) [http://www.seeedstudio.com/wiki/NFC_Shield_V2.0](http://www.seeedstudio.com/wiki/NFC_Shield_V2.0)

我也一直在寻找一个原始应用程序，也许我可以添加它，但其中已经包含了 isodep。我对所有这些主题都很陌生。任何和所有的帮助将不胜感激。

# php - PHP：检测页面的内容类型

> ID：16182390
> 
> 赞同：4
> 
> 时间：2013-04-24T02:30:22.113
> 
> 标签：php

在 PHP 中，我们可以通过以下方式设置 Content-Type：

```
header('Content-Type: text/plain'); 
```

但是，如果我处理需要显示错误消息的 PHP 类，错误消息的格式根据内容类型显示，例如，如果页面是`text/html`，则显示 HTML 格式的错误消息；否则，显示纯文本错误消息。

是否有任何功能/片段可用于检测页面 Content-Type ？

注意：鉴于 PHP 类文件通过以下方式“附加”到页面上`require_once()`

**更新：**根据@Tamil 的回答，我进行了一个简短的测试：

```
<?php
header('Content-Type: text/plain');
$finfo = finfo_open(FILEINFO_MIME_TYPE); // return mime type ala mimetype extension
echo finfo_file($finfo, __FILE__) . "\n";
finfo_close($finfo);
?> 
```

它只返回`text/x-php`。但我希望结果会返回`text/plain`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T02:52:31.837

试用[`headers_list()`](http://php.net/manual/en/function.headers-list.php)功能：

```
<?php
header('Content-Type: text/plain');

$headers = headers_list();

var_dump($headers);
?> 
```

显示（在我的情况下）：

```
array(2) {
  [0]=>
  string(23) "X-Powered-By: PHP/5.4.5"
  [1]=>
  string(24) "Content-Type: text/plain"
} 
```

* * *

要标准化结果数组，您可以使用：

```
<?php
header('Content-Type: text/plain');

$headers = headers_list();

foreach($headers as $index => $value) {
    list($key, $value) = explode(': ', $value);

    unset($headers[$index]);

    $headers[$key] = $value;
}

var_dump($headers);
?> 
```

显示：

```
array(2) {
  ["X-Powered-By"]=>
  string(9) "PHP/5.4.5"
  ["Content-Type"]=>
  string(10) "text/plain"
} 
```

因此，`Content-Type`可以像这样获得具有标准化数组的标头：

```
echo $headers['Content-Type']; 
```

# nstimer - NSTimer 和 UICollectionView

> ID：16182393
> 
> 赞同：0
> 
> 时间：2013-04-24T02:30:32.587
> 
> 标签：nstimer, uicollectionview

如有必要，我可以显示一些代码，但我认为我的问题不需要它，因为它相当笼统。

我有一个 UIView，里面有一个 UICollectionView。这是一个具有自定义布局的 10 x 10 网格。我之所以定制它只是因为我希望它可以左右滚动和上下滚动。

我还有一个运行倒计时时钟的 NSTimer。NSTimer 运行平稳，除非用户滚动 UICollectionView。事实上，当用户向任何方向滚动时，NSTimer 会完全停止，然后，当用户停止时，计时器会从停止的地方重新开始。

我已经多次使用 NSTimer 并且从未见过简单的用户交互导致它停止。

有什么办法可以避免这种情况发生吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:36:08.010

你可以试试这个..将你的计时器添加到主运行循环

```
[[NSRunLoop mainRunLoop]addTimer:timer forMode:NSRunLoopCommonModes]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T04:10:37.670

只是对此的一个注释。您必须等到启动 NSTimer 才能放置此代码。它将因 nil NSTimer 对象而崩溃。

再次感谢。

# jquery-validation-engine - jquery Validation Engine funcCall not working if only rule

> ID：16182395
> 
> 赞同：6
> 
> 时间：2013-04-24T02:30:40.480
> 
> 标签：jquery-validation-engine

I have an input field that I am trying to add custom validation to (required depending on another field). If I put required AND funcCall() I can see that two errors are returned. If I only put the funcCall nothing is returned. I know it's getting in the function and the condition because I did a console.log() but for some reason it seems like it needs an initial rule to fail to show the error.

Call:

```
<input type="text" class="validate[funcCall[validatePassportRequired]]" id="form_register_passport_number" value="" name="passport_number" size="50"> 
```

Function:

```
function validatePassportRequired(field, rules, i, options) {
  if ($('#register_for').val()!='Local') {
    return options.allrules.required.alertText;
  }
} 
```

So If I change the Call to:

```
class="validate[required, funcCall[validatePassportRequired]]" 
```

I get two * This field is required

Do I have to have another validation rule along with the funcCall?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-03T22:18:56.240

只需在返回错误消息之前添加以下行，而不是在返回消息中将函数名称放在 .alertText 之前。

```
rules.push('required'); 
```

@sunzyflower 在您的情况下，您的功能会像这样..

```
function validatePassportRequired(field, rules, i, options) {
   if ($('#register_for').val()!='Local') {
   rules.push('required');  
   return options.allrules.validatePassportRequired.alertText;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-27T13:11:37.417

利用

```
funcCallRequired[validatePassportRequired] 
```

代替

```
funcCall[validatePassportRequired] 
```

这将在内部添加 required ，而不会出现双重消息。

如果您想了解有关（旧）问题的更多信息：

*   [https://github.com/posabsolute/jQuery-Validation-Engine/issues/392](https://github.com/posabsolute/jQuery-Validation-Engine/issues/392)
*   [https://github.com/posabsolute/jQuery-Validation-Engine/pull/785](https://github.com/posabsolute/jQuery-Validation-Engine/pull/785)

# oracle - why a non-dba user can log in as sysdba?

> ID：16182396
> 
> 赞同：0
> 
> 时间：2013-04-24T02:30:42.300
> 
> 标签：oracle, plsqldeveloper

in my oracle instance, I have a user called `xxx`, I remembered I just grant `resource` and `connect` role to `xxx`, but now the user can log in as `sysdba`(via pl/sql developer), even after executing `revoke dba from xxx` through `sys` account, the user `xxx` can still log in as `sysdba`, so why? What should I do to revoke his `dba` role?

*PS*: now I execute `revoke dba from xxx`, it reports an error: dba role is not granted to xxx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:05:44.527

`DBA`角色和`SYSDBA`角色是不同的。

```
revoke sysdba from xxx; 
```

[在此处](http://docs.oracle.com/cd/B28359_01/server.111/b28310/dba006.htm#i1006554)阅读有关管理权限的信息

# c - 使用 Windows SEH 和 GCC label-as-value 跳转到本地错误处理程序

> ID：16182401
> 
> 赞同：0
> 
> 时间：2013-04-24T02:31:03.043
> 
> 标签：c, windows, gcc, seh

我需要对一些失败案例引发异常的代码进行单元测试。简而言之，我需要通过展开堆栈帧或本地跳过错误来处理异常。使用 MSVC 不是一种选择。

AddVectoredExceptionHandler的[MSDN 示例](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681411%28v=vs.85%29.aspx "使用向量异常处理程序")表明我可以修改 eip 然后返回 EXCEPTION_CONTINUE_EXECUTION 来执行本地跳转。显而易见的问题是要跳转到什么地址。GCC 的[Label as Value](http://gcc.gnu.org/onlinedocs/gcc/Labels-as-Values.html "GCC 标签作为值")功能似乎应该就是这样。

如果错误函数只有一次返回，则下面的示例有效。但是，如果添加第二条 return 语句，则跳转的偏移量非常小，跳转失败。为什么？

```
#include <assert.h>
#include <stdbool.h>
#include <stdio.h>

#ifndef _WIN32_WINNT
#define _WIN32_WINNT 0x0502
#endif

#define WIN32_LEAN_AND_MEAN
#include <windows.h>

static bool handler_called;
static DWORD handler_eip;

static LONG WINAPI local_handler(struct _EXCEPTION_POINTERS* ExceptionInfo) {
   handler_called = true;
   PCONTEXT Context = ExceptionInfo->ContextRecord;
   Context->Eip = handler_eip;
   return EXCEPTION_CONTINUE_EXECUTION;
}

static void badcall(void) {
   handler_called = false;
   handler_eip = &&fail;

   int value = 100;
   int zero = 0;
   value = value/0;
   printf("not handled.\n");
   assert(false);
   //return; // Uncomment this to break the handler

   fail:
   printf("error handled.\n");
   return;
}

int main(int argc, char* argv[]) {
   void* old_handler = SetUnhandledExceptionFilter(&local_handler);
   badcall();
   SetUnhandledExceptionFilter(old_handler);
   return(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:40:07.723

GCC 的死代码消除似乎是罪魁祸首——与 SEH 无关。当函数的底部块不可达时，这些语句将被删除。然后 GCC 在我们获取地址的位置任意创建一个标签。

由于我们直接操作程序流，C 的规则告诉我们，当编译器做这样古怪的事情时，我们不能抱怨。

这是一个更简单的示例：

```
static void* handler_eip;
static void badcall(void) {
   handler_eip = &&fail;

   int value = 100/0;
   printf("not handled.\n");
   //goto fail;
   return;

   fail:
   printf("error handled.\n");
   return;
}
```

请注意 L2 的位置，并使用 goto：

```
_badcall:
    pushl    %ebp
    movl    %esp, %ebp
    subl    $56, %esp
    movl    $L2, _handler_eip
    movl    $100, %eax
    movl    $0, -28(%ebp)
    movl    %eax, %edx
    sarl    $31, %edx
    idivl    -28(%ebp)
    movl    %eax, -12(%ebp)
    movl    $LC0, (%esp)
    call    _puts
    nop
L2:
    movl    $LC1, (%esp)
    call    _puts
    nop
    leave
    ret
```

并且没有：

```
_badcall:
    pushl    %ebp
    movl    %esp, %ebp
    subl    $56, %esp
L2:
    movl    $L2, _handler_eip
    movl    $100, %eax
    movl    $0, -28(%ebp)
    movl    %eax, %edx
    sarl    $31, %edx
    idivl    -28(%ebp)
    movl    %eax, -12(%ebp)
    movl    $LC0, (%esp)
    call    _puts
    nop
    leave
    ret
```

# java - The dangers of using AJAX as a front end for the website

> ID：16182402
> 
> 赞同：2
> 
> 时间：2013-04-24T02:31:10.650
> 
> 标签：java, ajax, security, frontend

We have Java EE backend for database access. Servlets ask for XML data and send XML response according to them. Now we have to write frontend for it. The idea is to communicate with backend through jQuery AJAX sending xml requests to Java backend and process data on client side.

**Question is:** Are there any security holes, and is it worth of writing frontend using Java/JSP?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T02:55:28.637

无论您使用何种技术，都可能发生安全漏洞。XML & Jquery & Ajax 和 Java & JSP 都可能存在安全漏洞。您必须考虑哪些信息驻留在哪里，黑客将如何破解您的应用程序等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T22:01:53.887

这是一个太笼统的问题，无法回答，但是在编写客户端应用程序时，您通常需要考虑：

*   确保输入验证和授权检查等安全控制仍然在服务器端正确执行，而不是留给客户端控制的 JavaScript 来解决。您不应假设攻击者无法调用 AJAX 操作，因为这样做的功能在 UI 中不可见；让测试人员在注销或以其他用户身份登录时，尝试手动发送 AJAX 请求以进行登录操作或对属于一个用户的资源的操作。

*   确保客户端脚本没有任何导致 XSS 漏洞的 HTML 注入漏洞。例如，在 jQuery 中使用`html()`（或相关`append()`的`before()`等操作方法）和包含变量的标记字符串 - 改用`$('<element>', {dynamic attributes})`创建快捷方式。同样，在普通 JS 中更喜欢`createElement`/`setAttribute`到`innerHTML`.

*   确保客户端脚本没有任何导致 XSS 漏洞的 JS 注入漏洞。避免为超时或内联事件处理程序设置字符串；改用函数对象和适当的事件处理（例如 jQuery `.on()`）。

在考虑将应用程序编写为客户端 JS+AJAX 而不是中间层 HTML+forms 时，您必须要问的问题是，您是否可以在不支持所需 JavaScript 的用户代理中无法使用您的应用程序：

*   旧版浏览器
*   新浏览器遇到了您还不知道的错误
*   至关重要 - 搜索引擎

如果您对此感到满意，并做一些额外的工作以使 JS 可用/可访问，那么它是有意义的。

# c# - Convert to DateTime Format

> ID：16182408
> 
> 赞同：1
> 
> 时间：2013-04-24T02:32:28.783
> 
> 标签：c#, datetime, formatting, datetime-format, typeconverter

Hello is there a way to convert this string "Saturday 04/23/2013 11:05 PM" to a valid DateTime Format?

Because it gives me FormatExceptionError everytime I execute this condition:

> String was not recognized as a valid DateTime because the day of week was incorrect.

```
if(DateTime.Parse("Saturday 04/23/2013 11:05 PM") < DateTime.Today)
{
//code here
} 
```

Is there a solution to this problem?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T02:34:39.740

利用`DateTime.ParseExact()`

```
string _strdate = "Tuesday 04/23/2013 11:05 PM"; // should be tuesday
DateTime _date = DateTime.ParseExact(_strdate,"dddd MM/dd/yyyy hh:mm tt", 
                                     CultureInfo.InvariantCulture) 
```

*   [日期时间.ParseExact()](http://msdn.microsoft.com/en-us/library/system.datetime.parseexact.aspx)
*   [自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

![在此处输入图像描述](https://i.stack.imgur.com/e2YKp.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T02:42:03.640

如果您期望无效数据，您应该使用[TryParse](http://msdn.microsoft.com/en-us/library/system.datetime.tryparse.aspx)或[TryParseExact](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx)

```
DateTime myDate;
if(DateTime.TryParse("Saturday 04/23/2013 11:05 PM", out myDate))
{
   if (myDate < DateTime.Today) { //code here }
}
else
{
   //Do something here for invalid data
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T02:38:25.127

**由于星期几不正确**，字符串未被识别为有效的 DateTime 。

04/23/2013 是星期二，而不是星期六。

当您的日期时间声明是矛盾时，可能会发生异常。

希望它有帮助...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T02:40:04.600

日期和星期几不匹配。2013 年 4 月 23 日是星期二而不是星期六。在世界任何日历中，您都不会将这一天定为星期六。这就是为什么它给出错误**`String was not recognized as a valid DateTime because the day of week was incorrect.`**

所以它可能会转换您的日期然后验证。因此，它在验证中失败。

但是当提供星期二时，这将起作用。

```
string str = "Tuesday 04/23/2013 11:05 PM";

DateTime dt = DateTime.ParseExact(str, "dddd MM/dd/yyyy hh:mm tt", CultureInfo.InvariantCulture); 
```

![在此处输入图像描述](https://i.stack.imgur.com/uFPKW.jpg)

# c++ - c ++从文件中删除重复的数字

> ID：16182409
> 
> 赞同：0
> 
> 时间：2013-04-24T02:32:33.980
> 
> 标签：c++, arrays, file, duplicates

我试图用 c++ 制作一个可以通过 txt 文件运行的程序，如果这个文件中的数字有重复，不要打印它们，只打印出现一次的数字。

这是我得到的代码。但发生的事情是它打印出文件，然后再次打印出第二行而不是寻找重复项......

谁能告诉我我哪里出错了。对 C++ 来说相当新

```
// array.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include <iostream>
#include <fstream>
#include <string>
using namespace std;
int main ()
{
    int array[100]; // creates array to hold numbers
    short loop=0; //short for loop for input
    string line; //this will contain the data read from the file
    ifstream myfile ("problem3.txt"); //opening the file.
    if (myfile.is_open()) //if the file is open
    {
        while (! myfile.eof() ) //while the end of file is NOT reached
        {
            getline (myfile,line); //get one line from the file
            array[loop] = line;
            cout << array[loop] << endl; //and output it
            loop++;
        }

        for (int i = 1; i < loop; i++)
        {
            bool matching = false;
            for (int j = 0; (j < i)&& (matching == false); j++)
            {
                 if (array[i] == array[j]) 
                      matching = true;
             }
             if (!matching) 
                cout<< array[i] << " "
        }   
        myfile.close(); //closing the file
     }
      else 
         cout << "Unable to open file"; //if the file is not open output
     system("PAUSE");
     return 0;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T02:38:36.570

至少有一个错误：`array`被声明为整数数组，您正在读取字符串`line`并直接分配`string`给`int`下面：

```
 getline (myfile,line); //^^line is string, array[i] is int
 array[loop] = line; 
```

您可以尝试读取向量中的这些行，然后调用 std::unique 以使向量唯一并打印出来。您的文件行不一定是整数行，因此将它们存储在整数数组中可能不起作用。

你可以试试：

```
#include <vector>
#include <string>
#include <algorithm>
#include <iterator> 

int main()
{
    std::vector<std::string> data;
    ifstream myfile ("problem3.txt");
    string line;
    //if not required to use array
    while (getline(myfile, line))
    {
      data.push_back(line);
    }

    std::vector<std::string> data(dataArray, dataArray + 100);

    myfile.close();
    std::sort( data.begin(), data.end() );
    data.erase( std::unique( data.begin(), data.end()), data.end() );
    //now print vector out:
    std::copy(data.begin(), data.end(), ostream_iterator<string>(cout, " \n"));
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:53:21.480

我建议不要使用嵌套的 for 循环，而是使用数组来计算某个整数出现的次数。然后，您可以循环一次，只打印计数为 1 的整数。

嵌套 for 循环的问题之一是，由于您只检查重复项`j < i`，因此您可能会打印一个整数，即使它稍后在数组中有重复项。您只需检查整个数组以确保没有重复项。

如果你仍然想尝试，你可能想做这样的事情：

```
for (int i = 0; i < loop; i++) // start at 0!
{
   bool matching = false;
   for (int j=0; j<loop; j++) { // check the whole array for duplicates!
       if (i != j && array[i] == array[j]) {
           matching = true;
           break; // instead of complicated condition in for loop
       }
   }
   if (!matching) cout << array[i] << " ";
} 
```

# ruby-on-rails - Cloud9: rails server redirecting to OpenShift website

> ID：16182412
> 
> 赞同：3
> 
> 时间：2013-04-24T02:32:56.963
> 
> 标签：ruby-on-rails, cloud9-ide

I have a rails app on cloud9.

I try running its server like this: `rails server -b $IP -p $PORT`

It seems to work:

```
=> Call with -d to detach                                                                                                                                                                               
=> Ctrl-C to shutdown server                                                                                                                                                                            
[2013-04-23 22:29:02] INFO  WEBrick 1.3.1                                                                                                                                                               
[2013-04-23 22:29:02] INFO  ruby 1.9.3 (2012-11-10) [x86_64-linux]                                                                                                                                      
[2013-04-23 22:29:02] INFO  WEBrick::HTTPServer#start: pid=21452 port=8080                                                                                                                              

 Cloud9  Your application is running at https://twitter.itp301.c9.io 
```

But when I go to [https://twitter.itp301.c9.io](https://twitter.itp301.c9.io), it redirects to [http://openshift.com](http://openshift.com)

**What's going wrong?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:56:08.677

我昨晚遇到了这个问题，现在可以运行它。看起来一切都解决了！

# asyncfileupload - 异步文件上传 HasFile

> ID：16182415
> 
> 赞同：0
> 
> 时间：2013-04-24T02:33:40.517
> 
> 标签：asyncfileupload

决定删除 FileUpload 并尝试 AsyncFileUpload - 除了必须使用触发器使页面完全回发并让用户想知道发生了什么 FileUpload 工作顺利......我一生都无法让 AsyncFileUpload 工作并且 HasFile 总是错误的。有任何想法吗？在某个地方，我确实有一个由意大利开发人员构建的 Ajax 上传器，效果很好，但是首先将文件保存到服务器然后删除它有很多麻烦。

谢谢你。

```
 vCmd.Parameters.AddWithValue("@Status_ID", 1)
        vCmd.Parameters.AddWithValue("@Customer_ID", CustomerID)
        vCmd.Parameters.AddWithValue("@Application_Description", vDescription)
        If AsyncFileUpload1.HasFile Then
            Dim vLen As Integer = AsyncFileUpload1.PostedFile.ContentLength
            Dim vByte(vLen - 1) As Byte
            AsyncFileUpload1.PostedFile.InputStream.Read(vByte, 0, vLen)
            vCmd.Parameters.AddWithValue("@Documents_Main", vByte)
            vCmd.Parameters.AddWithValue("@Flag_DocumentLoaded", 1)
        Else
            vCmd.Parameters.AddWithValue("@Flag_DocumentLoaded", 0)
        End If
        vCmd.Parameters.AddWithValue("@Contractor_Name", vContractorName)
        vCmd.Parameters.AddWithValue("@Contractor_Address", vContractorAddress)
        vCmd.Parameters.AddWithValue("@Contractor_Licence", vContractorLicence)
        vCmd.Parameters.AddWithValue("@Contractor_Phone", vContractorPhone)
        vCmd.Parameters.AddWithValue("@Reference_One", vReferenceOne) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:16:39.697

终于设法让它工作

为 UploadedComplete 事件添加处理程序

```
AddHandler AsyncFileUpload1.UploadedComplete, AddressOf FileUploaded 
```

捕获事件中的字节

```
Private Sub FileUploaded(ByVal sender As Object, ByVal e As AjaxControlToolkit.AsyncFileUploadEventArgs)
    Try

        If AsyncFileUpload1.HasFile Then
            Session("UploadedPDF") = AsyncFileUpload1.FileBytes
        End If

    Catch ex As Exception
        EmailError(ex.ToString, "25")

    End Try
End Sub 
```

将文件上传到数据库（如果存在）

```
 If Not Session("UploadedPDF") Is Nothing Then
            vCmd.Parameters.AddWithValue("@Update_Document", Session("UploadedPDF"))
        End If 
```

# javascript - 谷歌地图 API 锚链接获取位置

> ID：16182416
> 
> 赞同：0
> 
> 时间：2013-04-24T02:33:44.587
> 
> 标签：javascript, jquery, google-maps-api-3

我对谷歌地图api没有什么问题。

我在此页面之后成功嵌入了谷歌地图 v.3（[https://developers.google.com/maps/documentation/javascript/examples/](https://developers.google.com/maps/documentation/javascript/examples/)）。

现在我想把一些链接放在同一个页面中，当我点击一个链接时，在地图上查明位置。并显示我的自定义地图图钉图标。

前任。
...

```
<a href="link to get this place's location">Blah Blah City Convention Center</a>
<a href="link to get this place's location2">Blah Blah Shopping Mall</a> 
```

如果有人知道官方页面对此进行了解释或一些好的教程网站，请告诉我。

我从 jsfiddle 页面开始。随意修改:)

[http://jsfiddle.net/nori2tae/NrYqA/](http://jsfiddle.net/nori2tae/NrYqA/)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-28T09:58:46.087

这是我创建两个使地图移动和缩放的链接所做的事情。

`You can <a href="#" onclick="oMap.setCenter(new google.maps.LatLng(20, 14.2));oMap.setZoom(2);"> zoom out to see the global perspective</a> or <a href="#" onclick="oMap.setCenter(new google.maps.LatLng(54, -4));oMap.setZoom(6);"> see the UK here</a>`.

这假设您的脚本块已经设置了一个名为`oMap`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:06:28.927

当您向地图添加标记并向每个标记添加事件时（向此标记添加事件时）使用您的地图、标记和超链接的 ID 调用以下方法。

```
function attachEvents(map, myMarker, linkID) {
      var markerRelDivObj = document.getElementById(linkID);
      if (markerRelDivObj) {
          markerRelDivObj.onmouseover = function () {
              if (!map.getBounds().contains(myMarker.getPosition())) {
                  map.panTo(myMarker.getPosition());
              }
              google.maps.event.trigger(myMarker, 'mouseover');
          };

          markerRelDivObj.onmouseout = function () {
                  google.maps.event.trigger(myMarker, 'mouseout');
          };
      }
  } 
```

# php - Double strings that are the same are being posted

> ID：16182418
> 
> 赞同：0
> 
> 时间：2013-04-24T02:33:54.273
> 
> 标签：php

So, I am trying to make a "quote" system for my comment area. Like, if someone were to quote someone else, it SHOULD appear like:

```
>quoted text 
```

and the quote text would be green. I got the green text to work, but my issue now is that when the post is quoted, the un-quoted version also appears, like:

```
>quote
quote 
```

My PHP:

```
<?php

include 'db.php';
$comment = mysql_query("SELECT * FROM posts");
while($row = mysql_fetch_assoc($comment))
{
$p_id = $row['id'];
$c_name = $row['name'];
$c_email = $row['email'];
$c_sub = $row['sub'];
$c_post = $row['post'];
$c_post = str_ireplace('>', "<span class=\"gtext\"><blockquote>$c_post</blockquote></span>", $c_post);
echo "<span class=\"sub\">$c_sub</span> <span class=\"postname\">$c_name</span> No.$p_id &nbsp; \n";
//echo "[a href=\"index.php?reply=$id\">Reply</a>]";
echo "<blockquote>$c_post</blockquote>";
echo "<hr>";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T02:45:24.373

您的`str_ireplace(...)`行用`>`整个引用的文本替换了字符，但原始文本没有被截断。

一种方法是`preg_replace(...)`像这样使用：

```
$post = preg_replace('/^>(.*)$/m', '<span class="gtext"><blockquote>\{1}</blockquote></span>', $post); 
```

这将匹配以下文本，`>` **并将**其替换为仅包含在标签内的文本。

另一种方法可以在没有正则表达式的情况下工作：

```
if(0 === strpos('>', $post)) {
    $post = substr($post, 1);
    $post = '<span class="gtext"><blockquote>' . $post . '</blockquote></span>';
} 
```

这将检查`>`位置 0 处的字符，将其修剪掉，并将帖子包装在标签中。
这仅在整体`$post`是否为单个 qoute 时才有效。
该`preg_replace(...)`方法将正确替换任何出现的`>`字符（匹配文本直到换行）。
表达式中使用的`m`修饰符将使其检查每一行而不是整个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:46:21.380

您的 str_ireplace 调用会查找 '>' 并将其替换为`"<span class=\"gtext\"><blockquote>$c_post</blockquote></span>"`，因此您仍然有引号。

为了纠正这个问题，您可以在“>”之后查找下一个换行符，存储它，删除新行之前和“>”之后的内容，然后使用第二个参数调用 str_ireplace 调用，而不是引用新存储的值第二个论点。

[http://php.net/manual/en/function.str-ireplace.php](http://php.net/manual/en/function.str-ireplace.php)

# nginx - Cgit and Nginx URL rewrite

> ID：16182421
> 
> 赞同：4
> 
> 时间：2013-04-24T02:34:03.843
> 
> 标签：nginx, cgit

Wired URL rewriting issues

while I goto

> [http://git.example.org/foo](http://git.example.org/foo)

it works fine, repos shows up. However the links on that page appended /foo again i.e.

> [http://git.example.org/foo/foo/commit](http://git.example.org/foo/foo/commit)

When I goto URL like

> [http://git.example.org/foo/commit?id=123123](http://git.example.org/foo/commit?id=123123)

It works, but each links on that page looks like

> [http://git.example.org/foo/commit/foo/snapshot/foo/4f0be51d35fe3160a9122894723b69df69a6fb7e.zip?id=4f0be51d35fe3160a9122894723b69df69a6fb7e](http://git.example.org/foo/commit/foo/snapshot/foo/4f0be51d35fe3160a9122894723b69df69a6fb7e.zip?id=4f0be51d35fe3160a9122894723b69df69a6fb7e)

Here is my nginx.conf, did I miss something?

```
server {
    listen 80;
    server_name git.example.org;
    root /var/www/htdocs/cgit;
    index cgit.cgi;

    location ~* ^.+\.(css|png|ico)$ {
        expires 30d;
    }

    if ($request_filename = cgit.cgi){
        rewrite ^/([^/]+/.*)$ /cgit.cgi?url=$1 last;
    }

    location / {
        try_files $uri @cgit;
    }

    location @cgit {
        fastcgi_pass unix:/var/run/fcgiwrap.socket;
        fastcgi_param SCRIPT_FILENAME $document_root/cgit.cgi;
        fastcgi_param HTTP_HOST $server_name;
        fastcgi_param PATH_INFO $uri;
        include fastcgi_params;

    }
    access_log /var/log/nginx/cgit_access.log;
    error_log /var/log/nginx/cgit_error.log warn;
} 
```

* * *

Update, SOLVED

it's cgit setting of virtual-root=/ And I updated my nginx.conf too, urls rewrite works now!!

```
server {
        listen 80;
        server_name git.mengzhuo.org;
        root /var/www/htdocs/cgit;

        location ~* ^.+\.(css|png|ico)$ {
                expires 30d;
        }

        location / {
                index cgit.cgi;
                fastcgi_param SCRIPT_FILENAME $document_root/cgit.cgi;
                fastcgi_pass unix:/var/run/fcgiwrap.socket;
                fastcgi_param HTTP_HOST $server_name;
                fastcgi_param PATH_INFO $uri;
                fastcgi_param QUERY_INFO $uri;
                include "fastcgi_params";

        }
        access_log /var/log/nginx/cgit_access.log;
        error_log /var/log/nginx/cgit_error.log warn;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-22T16:06:57.653

`virtual-root=/`/etc/cgitrc 中的设置为我解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:59:15.637

这与 Nginx 无关，生成 URL 的代码中存在错误。

在页面[http://git.example.org/foo](http://git.example.org/foo)你有一个链接写成：

```
<a href="foo/commit">Click to commit</a> 
```

它对于服务器应该是绝对的：

```
<a href="/foo/commit">Click to commit</a> 
```

或相对于当前目录为：

```
<a href="commit">Click to commit</a> 
```

大概在你初始化 cgit 的代码中的某个地方，你正在`foo`传递你应该传递的地方`/foo`。

# mysql - if not exist record checking

> ID：16182423
> 
> 赞同：0
> 
> 时间：2013-04-24T02:34:21.730
> 
> 标签：mysql, sql

i am trying to to something like if my database dont have the record, then insert it, the query below is my checking, the code have no errors, so i am not sure did i really make the checking ?

Record 1

```
IF NOT EXISTS ( SELECT 1 FROM TBL_AUDIT_LOG_TYPE WHERE AUDIT_LOG_TYPE_ID = 1 )
INSERT INTO TBL_AUDIT_LOG_TYPE ([AUDIT_LOG_TYPE_ID],[MODULE],[ACTION]) 
VALUES (1,'User','UserInfo') 
```

Record 2

```
IF NOT EXISTS ( SELECT 1 FROM TBL_AUDIT_LOG_TYPE WHERE AUDIT_LOG_TYPE_ID = 2 )
INSERT INTO TBL_AUDIT_LOG_TYPE ([AUDIT_LOG_TYPE_ID],[MODULE],[ACTION]) 
VALUES (2,'User2','UserInfo2') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:54:38.737

如果您只想获取某种类型的返回值，请使用函数或存储过程并返回一个值。例如，

```
IF EXISTS ( SELECT 1 FROM TBL_AUDIT_LOG_TYPE WHERE AUDIT_LOG_TYPE_ID = 1 )
   Return -1
Else
   INSERT INTO TBL_AUDIT_LOG_TYPE ([AUDIT_LOG_TYPE_ID],[MODULE],[ACTION]) 
   VALUES (1,'User','UserInfo')

IF EXISTS ( SELECT 1 FROM TBL_AUDIT_LOG_TYPE WHERE AUDIT_LOG_TYPE_ID = 2 )
   Return -2
Else
   INSERT INTO TBL_AUDIT_LOG_TYPE ([AUDIT_LOG_TYPE_ID],[MODULE],[ACTION]) 
   VALUES (2,'User2','UserInfo2') 
```

如果仅使用临时查询或 SSMS 中的查询窗口，请在其上方创建一个变量或仅打印消息。如果将变量与编码的 sql 查询一起使用，则可以取回返回值。

```
Declare @ErrorValues int;
Select @ErrorValues = 0;

IF EXISTS ( SELECT 1 FROM TBL_AUDIT_LOG_TYPE WHERE AUDIT_LOG_TYPE_ID = 1 )
 BEGIN
   Select @ErrorValues = @ErrorValues - 1;
   PRINT '-1';
Else
   INSERT INTO TBL_AUDIT_LOG_TYPE ([AUDIT_LOG_TYPE_ID],[MODULE],[ACTION]) 
   VALUES (1,'User','UserInfo')

IF EXISTS ( SELECT 1 FROM TBL_AUDIT_LOG_TYPE WHERE AUDIT_LOG_TYPE_ID = 2 )
 BEGIN
   Select @ErrorValues = @ErrorValues - 2;
   Print '-2'; --or PRINT 'audit_log_type_ID of 2 already exists';
 END
Else
   INSERT INTO TBL_AUDIT_LOG_TYPE ([AUDIT_LOG_TYPE_ID],[MODULE],[ACTION]) 
   VALUES (2,'User2','UserInfo2') 
```

# asp.net - TreeView如何使用css在表中选择第二个tr来为完整的父节点行设置BackColor

> ID：16182428
> 
> 赞同：0
> 
> 时间：2013-04-24T02:34:49.310
> 
> 标签：asp.net, css, treeview, css-selectors

我一直在尝试通过其他帖子 [CSS 选择器选择器/查找器的提示来找到答案？](https://stackoverflow.com/questions/2233809/css-selector-picker-finder) 我发现做我想做的最接近的部分解决方案是： [http ://asp-net-example.blogspot.com/2009/04/how-to-set-change-treeview-parent-node.html](http://asp-net-example.blogspot.com/2009/04/how-to-set-change-treeview-parent-node.html)

我需要的只是将所有父节点的背景颜色设置为#F0F0F0，正如您在上面的链接中看到的那样，下面的行只会为父区域设置背景颜色，但不会为整个行设置背景颜色。我想让所有父节点行具有相同的背景颜色。

```
<ParentNodeStyle Font-Bold="False" BackColor="#F0F0F0"/> 
```

我还尝试了 nth-child 的不同组合，包括下面的行，但它不起作用：

```
table.trvFileTree tr:nth-child(2)
{
background-color: #F0F0F0;

} 
```

我使用了 Dom Inspector 插件，如您所见，我希望所有 2nd trs 都具有特定的背景颜色。

另外，我尝试使用 firebug 获取第二个 tr 选择器的完整路径：

```
html body form#form1 div div.fullWidthWrp div.InnerfullWidth div.LCol div.InnerLCol div#trvFileTree.treeViewDim div#trvFileTreen0Nodes table tbody tr 
```

非常感谢您提前提供的帮助。

注意：无法在 stackoverflow 上发布屏幕截图，因为它需要超过 10 个声望点。但是，我在 droplr 图像共享网站上发布了我需要的屏幕截图：http: [//d.pr/i/OVIp](http://d.pr/i/OVIp)

更新（下面的代码与我的代码几乎完全相同，但我决定只为树视图放置代码，以便代码只显示需要完成的操作）：

1) 这是 TreeviewExample.aspx **ideone.com/3PXbSE的完整代码**

2) 这是 TreeviewExample.aspx **ideone.com/wpctLP的完整呈现标记**

3）这是TreeviewExample.aspx **d.pr/i/8ni6的浏览器视图截图**

正如您将在#2 上看到的完整代码）与下面呈现的几乎相同（具有相同的表结构）

下面的标记是树视图控件生成的代码的一部分，并显示了我想要具有不同背景颜色的父节点行：（从 firebug 复制，仅扩展了一些重要节点，以便标记更易于阅读）

```
 <div id="trvFileTree" class="treeViewDim" style="width: 100%;">
        <table cellspacing="0" cellpadding="0" style="border-width: 0;">
            <tbody>
                <tr>
                <tr style="height: 0px;">
            </tbody>
        </table>
        <div id="trvFileTreen0Nodes" style="display: block;">
        <table cellspacing="0" cellpadding="0" style="border-width: 0;">
            <tbody>
                <tr style="height: 0px;">
                <tr> <%--This row contains a parent node, and I want to set the background color for all the row--%>
                <tr style="height: 0px;">
            </tbody>
        </table>
        <div id="trvFileTreen1Nodes" style="display: block;">
            <table cellspacing="0" cellpadding="0" style="border-width: 0;">
                <tbody>
                    <tr style="height: 0px;">
                    <tr> <%--This row also contains a parent node, and I want to set the background color for all the row--%>
                    <tr style="height: 0px;">
                </tbody>
            </table>
            <table cellspacing="0" cellpadding="0" style="border-width: 0;"> <%--These tables contain child nodes--%>
            <table cellspacing="0" cellpadding="0" style="border-width: 0;">
        </div>
        <table cellspacing="0" cellpadding="0" style="border-width: 0;">
        <div id="trvFileTreen5Nodes" style="display: none;">
            <table cellspacing="0" cellpadding="0" style="border-width: 0;">
                <tbody>
                    <tr style="height: 0px;">
                    <tr>
                    <tr style="height: 0px;">
                </tbody>
            </table>
        </div>
        <table cellspacing="0" cellpadding="0" style="border-width: 0;"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:51:08.447

如果我理解你的问题，我有东西给你。

试试这个：

```
table tr:not(:nth-child(2n)){
  background-color: #F0F0F0;   
} 
```

[小提琴](http://jsfiddle.net/mmY5e/1/)

资料来源：

*   [CSS3：not() 选择器](http://kilianvalkhof.com/2008/css-xhtml/the-css3-not-selector/)和 [带有 mod（或 modulo）运算符的 nth-child](https://stackoverflow.com/questions/6127814/nth-child-with-mod-or-modulo-operator)

# javascript - 用本地副本覆盖远程 JavaScript 文件？

> ID：16182432
> 
> 赞同：0
> 
> 时间：2013-04-24T02:35:05.380
> 
> 标签：javascript, browser, environment

是否可以为一位开发人员使用本地副本覆盖远程 JavaScript 文件？

用例：要求尚未证明自己的 JavaScript 开发人员修复 JavaScript 文件中的某些错误。该文件是一个更大的应用程序的一部分，您还不想让这个开发人员写访问服务器副本。该应用程序应该按照预期在我们的服务器上运行，但是对于这个用户，当包含一个文件 , 时`SomeFile.js`，它包含`SomeFile.js`该开发人员自己的计算机上的本地版本。其他一切都在原地运行。

这可以做到吗？

1.  我可以用萤火虫更改元头中的标签，但更改不会停留在刷新上。有没有其他插件可以做到这一点？
2.  可以在操作系统级别使用类似于主机文件的文件覆盖文件（它需要重新映射一个文件，而不是域）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T02:53:06.997

最好的办法是给每个开发者一个测试服务器。使用虚拟机很容易做到这一点。然后，他们可以修改任何他们想要的东西。使用版本控制，没有什么可担心的。

当然，您可以配置代理来为特定 URL 加载不同的副本，但您为什么要这样做呢？为您的开发人员提供完成工作所需的工具。

# gwt - GWT Highcharts 使用 JSNI 调用 Javascript

> ID：16182433
> 
> 赞同：0
> 
> 时间：2013-04-24T02:35:06.643
> 
> 标签：gwt, highcharts, jsni, gwt-highcharts

我正在编写一个 GWT 应用程序并使用 highcharts。有些功能在 Java 中无法实现，但在 javascript 中。我得到了一个如何实现我可以使用的东西的例子，但是我不知道如何包含在我的代码中。

我的代码包含一个声明为的变量`Chart graph;`

我想实现一个事件，如this answer[中所示在悬停时将工具提示添加到highcharts中的图例](https://stackoverflow.com/questions/16137466/add-tooltip-to-legend-in-highcharts-when-hovering)

```
 chart: {
        type: 'column',
        events: {
            load: function () {
                var chart = this,
                    legend = chart.legend;

                for (var i = 0, len = legend.allItems.length; i < len; i++) {
                    var item = legend.allItems[i].legendItem;
                    item.on('mouseover', function (e) {
                        //show custom tooltip here
                        console.log("mouseover");
                    }).on('mouseout', function (e) {
                        //hide tooltip
                        console.log("mouseout");
                    });
                }

            }
        }

    }, 
```

如何将此功能添加到我的代码中。我尝试使用 chart.setOption(/chart/events/load", Object o) 如此处所示[http://www.moxiegroup.com/moxieapps/gwt-highcharts/apidocs/index.html](http://www.moxiegroup.com/moxieapps/gwt-highcharts/apidocs/index.html)但我想不出办法去做吧。

我认为它将通过创建一个方法来完成

```
private native void foo(JavaScriptObject c)/*-{

}-*/; 
```

或者

```
private native void foo(Chart c)/*-{

}-*/; 
```

但我不确定如何将两者联系起来。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-17T19:22:23.127

首先创建一个像这样的本机方法；

```
private native void foo(JavaScriptObject chart)/*-{
    var legend = chart.legend;

    for (var i = 0, len = legend.allItems.length; i < len; i++) {
        var item = legend.allItems[i].legendItem;

        item.on('mouseover', function (e) {
            //show custom tooltip here
            console.log("mouseover");
        }).on('mouseout', function (e) {
            //hide tooltip
            console.log("mouseout");
        });
    }
}-*/; 
```

然后`setLoadEventHandler()`像这样调用这个方法；

```
chart.setLoadEventHandler(new ChartLoadEventHandler() {

        @Override
        public boolean onLoad(ChartLoadEvent chartLoadEvent) {
            foo(chart.getNativeChart());

            return true;
        }
    }); 
```

就这样！希望这会帮助你。

# jquery - 使用新属性扩展 json 模型

> ID：16182434
> 
> 赞同：2
> 
> 时间：2013-04-24T02:35:07.497
> 
> 标签：jquery, json

给定 `model`的是一个 json 模型，它有很多从服务器返回的键属性映射，比如说`{name:"hello"}`，我如何用新的属性键扩展它

```
attribute key: hello
attribute value: hello1 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T02:37:54.877

因为它只是一个 JavaScript 对象字面量，所以你不能说：

```
myJson['hello'] = 'hello1'; 
```

（假设 myJson 是您保存模型的变量。）

调用应该产生`JSON.stringify()`：`myJson`

```
{ 
  'name': 'hello',
  'hello': 'hello1'
} 
```

# java - Android GPUImage 库

> ID：16182435
> 
> 赞同：0
> 
> 时间：2013-04-24T02:35:14.723
> 
> 标签：java, android, bitmap, gpuimage

在 iOS 中，我调用此过滤器函数来获取图像结果。

`UIImage filteredImage = [[[GPUImageAmatorkaFilter alloc] init] imageByFilteringImage:imgOriginal];`

回报是`UIImage`，所以是直截了当的，但在 Android 中回报不是`bitmap`。

那么，我怎样才能得到过滤`bitmap`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-10T10:02:08.627

Android 你可以使用[Android-GPUImage](https://github.com/CyberAgent/android-gpuimage)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-02T05:39:14.053

使用GPUImage库获取android中的位图有两种方法。

您可以设置图像文件并请求过滤的位图：

```
 GPUImage mGPUImage = new GPUImage(this);
    mGPUImage.setImage(mImage);
    mGPUImage.setFilter(mGPUImageFilter);
    mGPUImage.getBitmapWithFilterApplied(); 
```

mImage 可以是：

`Uri mImage File mImage Bitmap mImage`

或者您可以直接过滤位图：

```
 GPUImage mGPUImage = new GPUImage(this);
    mGPUImage.setFilter(mGPUImageFilter);
    Bitmap bitmapFiltered = mGPUImage.getBitmapWithFilterApplied(bitmapToFilter); 
```

# mysql - MYSQL：如何在不使用子查询的情况下将算术表达式分配为 SELECT 子句中字段的值？

> ID：16182441
> 
> 赞同：0
> 
> 时间：2013-04-24T02:36:39.760
> 
> 标签：mysql, sql

这是我的查询：

```
SELECT DISTINCT id, stat, date, user_id
FROM data AS T1
WHERE 2.0 >= (
         SELECT avg1
         FROM (
            SELECT stat, AVG(value) AS avg1
            FROM data
            WHERE date > SUBTIME(NOW(), MAKETIME(168, 0, 0))
            GROUP BY stat_name) b1
         WHERE stat = T1.stat
         AND id = T1.id)/
         (
         SELECT avg2
         FROM (
            SELECT stat, AVG(value) AS avg2
            FROM cata
            WHERE date > SUBTIME(NOW(), MAKETIME(336, 0, 0))
            AND date <= SUBTIME(NOW(), MAKETIME(168, 0, 0))
            GROUP BY stat) b2
         WHERE stat = T1.stat
         AND id = T1.id)
ORDER BY id; 
```

这个想法是我创建了一个统计数据表，其本周的平均值是上周平均值的两倍多。

我的问题是：我想为每个统计数据选择一个表示 MAX（本周值）- MAX（上周值）的列 diff_values，表示过去一周的增长。（基本上，今天创建的 stat 条目是昨天的 stat 加上增加。）如果不创建两个类似于 WHERE 子句中的子查询，我想不出一种方法，但这样做会使查询执行时间增加真的很长，因为数据是一个很大的表。

有没有办法在现有子查询之间拆分数学？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T02:43:52.137

如果我正确理解您的查询，那么您正在尝试计算本周和上周每个用户的每个统计数据的平均值。

如果是这样，以下查询以更简单的方式执行此操作：

```
select stat, user_id,
       avg(case when date > SUBTIME(NOW(), MAKETIME(168, 0, 0)) then value end) as thisweek,
       avg(case when date > SUBTIME(NOW(), MAKETIME(336, 0, 0)) AND date <= SUBTIME(NOW(), MAKETIME(168, 0, 0)) then value end) as lastweek
from data
group by stat, user_id
having 2.0 >= thisweek / lastweek 
```

它使用条件聚合来计算每个平均值（使用您当时的逻辑——我没有改变它）。然后它使用一个`having`子句进行比较。

# ios - 如何在 iOS 中使用 GL_EXT_occlusion_query_boolean 扩展

> ID：16182451
> 
> 赞同：2
> 
> 时间：2013-04-24T02:38:06.707
> 
> 标签：ios, opengl-es

在 iOS5 中，苹果添加了一个名为 'GL_EXT_occlusion_query_boolean' 的扩展来帮助开发者实现遮挡剔除。

我尝试在我的代码中使用它，但我完全不知道如何使用它。

这些是我的问题：

1.  我应该在同一帧还是在两个帧中实现查询和获取结果？
2.  如何绘制边界框？
3.  我应该在查询之前切换到离屏渲染吗？如果是这样，我应该怎么做才能实现离屏渲染？

我找到了一个可能的答案，但是[那里](https://stackoverflow.com/questions/8598368/iphone-ios5-querying-opengl-es-2-0-pipeline-objects-if-they-are-hidden-in-the-vi)的代码不是很清楚，并且缺少一些使用此扩展的关键代码。

# jquery - 将 JSON 解释为 Kendo UI Mobile Listview

> ID：16182452
> 
> 赞同：0
> 
> 时间：2013-04-24T02:38:17.750
> 
> 标签：jquery, ajax, json, kendo-ui, kendo-mobile

我正在尝试将我的 JSON 数据转换为 Kendo UI Mobile Listview。我的 php 脚本输出这些数据：

```
[{"eventID":"1","name":"test","time":"12:00:00","category":"####","subcategory":"####","description":"Event for testing purposes","locationID":"1","picturePath":"http:\/\/####\/~z3370257\/images\/1.jpg"},{"eventID":"2","name":"test2","time":"13:00:00","category":"####","subcategory":"SEIT","description":"Event for testing purposes2","locationID":"1","picturePath":"http:\/\/####\/~z3370257\/images\/1.jpg"}] 
```

[这个 JS fiddle](http://jsfiddle.net/MPzVu/4/)使用与我的应用程序相同的 html css 和 javascript 文件。

我的问题是，我需要在我的传输和读取方法中添加什么才能正确解释数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:13:13.280

你的剑道代码很好。只能有2个问题：

1.  服务返回的数据不是正确的 JSON。它应该像这样编码：

    ```
     [{ 
                    "category": "123",
                    "description": "Event for testing purposes",
                    "eventID": "1",
                    "locationID": "1",
                    "name": "Kendo",
                    "picturePath": "https://si0.twimg.com/profile_images/1514396238/KendoUI-Figure.png",
                    "subcategory": "SEIT",
                    "time": "12:00:00"
                } ,

                {
                    "category": "123",
                    "description": "Event for testing purposes",
                    "eventID": "1",
                    "locationID": "1",
                    "name": "jQuery",
                    "picturePath": "http://dochub.io/images/jquery_logo.png",
                    "subcategory": "SEIT",
                    "time": "12:00:00"
                }] 
    ```

2.  您的 DataSource 已在函数“dataInit”中初始化，该函数未在代码中的任何位置显示。并且 listview 在视图的 data-init 事件中被初始化。所以我假设列表在数据源之前初始化并导致数据不被绑定。解决此问题的方法是，您可以将 DataSource 保留在 dataInit 函数之外，如此小提琴所示，它可以按照您想要的方式使用您的代码：http: [//jsfiddle.net/whizkid747/MPzVu/](http://jsfiddle.net/whizkid747/MPzVu/)

    ```
    var app = new kendo.mobile.Application(document.body);        
    var dataSource = new kendo.data.DataSource({

        transport: {
            read: {
                //using jsfiddle echo service to simulate JSON endpoint
                url: "/echo/json/",
                dataType: "json",
                type: "POST",
                data: {
                    // /echo/json/ echoes the JSON which you pass as an argument
                    json: JSON.stringify([
                        {
                            "category": "123",
                            "description": "Event for testing purposes",
                            "eventID": "1",
                            "locationID": "1",
                            "name": "Kendo",
                            "picturePath": "https://si0.twimg.com/profile_images/1514396238/KendoUI-Figure.png",
                            "subcategory": "SEIT",
                            "time": "12:00:00"
                        } ,
                        {
                            "category": "123",
                            "description": "Event for testing purposes",
                            "eventID": "1",
                            "locationID": "1",
                            "name": "jQuery",
                            "picturePath": "http://dochub.io/images/jquery_logo.png",
                            "subcategory": "SEIT",
                            "time": "12:00:00"
                        }
                    ])
                }
            }
        }
    });

    function loadEventNames(){           
      $("#eventfeed").kendoMobileListView({
      dataSource: dataSource,
      template: $("#eventNameTemplate").html(),
      style:'inset'
     });
    } 
    ```

# java - Java>XML>通过 TagName 获取内容并更改内容

> ID：16182459
> 
> 赞同：0
> 
> 时间：2013-04-24T02:38:49.263
> 
> 标签：java, xml

这是我的 XML 文件。

```
<config> <properties> 
<entry key="delivaryDate">15-FEBRUARY-2013</entry> 
<entry key="externalCOID">123456</entry> 
<entry key="inputFileName">Generic_ChipONLY.chp</entry> 
<entry key="recordTotal">2</entry> 
<entry key="dueDate">15-MARCH-2013</entry>
</properties> </config> 
```

例如，我想将“recordTotal”中的记录从 2 更改为 10，我该怎么做？现在我只知道使用 getElementsByTagName("entry") 获取。

```
DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
Document doc = docBuilder.parse(new File("customer.xml"));
NodeList entry = doc.getElementsByTagName("entry"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:04:26.860

```
 String xmlFile = "customer.xml";

            DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
            Document doc = docBuilder.parse(xmlFile);

            //Retrieve the third entry node
            Node entryNode = doc.getElementsByTagName("entry").item(3);

            //Set new value
            entryNode.setTextContent("10");

            //Save to file
            TransformerFactory transformerFactory = TransformerFactory.newInstance();
            Transformer transformer = transformerFactory.newTransformer();
            DOMSource source = new DOMSource(doc);
            StreamResult result = new StreamResult(new File(xmlFile));
            transformer.transform(source, result); 
```

# ios - 倾斜 Sphero 的示例并更新 UISlider？

> ID：16182460
> 
> 赞同：0
> 
> 时间：2013-04-24T02:38:49.553
> 
> 标签：ios, sphero-api

我有一个带有 1 个滑块的视图。我想将 Sphero 球握在手中，因此当向左或向右倾斜球时，滑块会向左或向右移动。

解决这个问题的最佳示例项目是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:57:19.860

您应该检查以下之一：

*   [https://github.com/orbotix/Sphero-iOS-SDK/tree/master/samples/StreamingAnimation](https://github.com/orbotix/Sphero-iOS-SDK/tree/master/samples/StreamingAnimation)
*   [https://github.com/orbotix/Sphero-iOS-SDK/tree/master/samples/SensorStreaming](https://github.com/orbotix/Sphero-iOS-SDK/tree/master/samples/SensorStreaming)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T15:53:06.477

我会使用[https://github.com/orbotix/Sphero-iOS-SDK/tree/master/samples/SensorStreaming](https://github.com/orbotix/Sphero-iOS-SDK/tree/master/samples/SensorStreaming)

在 handleAsyncData 中添加对滑块的引用：

```
- (void)handleAsyncData:(RKDeviceAsyncData *)asyncData
{
   if ([asyncData isKindOfClass:[RKDeviceSensorsAsyncData class]]) {
       packetCounter++;
       if( packetCounter > (TOTAL_PACKET_COUNT-PACKET_COUNT_THRESHOLD)) {
           [self sendSetDataStreamingCommand];
       }

       // Received sensor data, so display it to the user.
       RKDeviceSensorsAsyncData *sensorsAsyncData = (RKDeviceSensorsAsyncData *)asyncData;
       RKDeviceSensorsData *sensorsData = [sensorsAsyncData.dataFrames lastObject];
       RKAccelerometerData *accelerometerData = sensorsData.accelerometerData;
       RKAttitudeData *attitudeData = sensorsData.attitudeData;

        // this Assumes your Slider has been hooked up in the Interface Builder
        // With float values between 1.0 and 0.0
       [MyAccelerometerSlider setFloatValue:accelerometerData.acceleration.x];
       // You could also set it to the Roll value which is better for controller stuff
       [MyOtherSlider setDoubleValue:attitudeData.roll];
   }
} 
```

只需将要监视的轴从 x 更改为 y 或 z。您还可以使用 Streaming 示例中的其他流式处理函数。IE。高度和四元数。

这是 Sphero 加速度计传感器的示意图：

![球头航向图](https://i.stack.imgur.com/esnbd.jpg)

# python - 解析代码以检测功能块

> ID：16182462
> 
> 赞同：-1
> 
> 时间：2013-04-24T02:38:57.937
> 
> 标签：python, string-parsing

我正在为 sublime 文本编辑器（使用 Python）编写一个插件，它只会在文件加载时折叠函数/方法。为了做到这一点，我必须解析文件内容，检测功能块并获取每个块的开始和结束位置（这是 API 进行折叠所必需的）。Regex 是我想到的第一件事，但我很快了解到它不适用于嵌套函数，尤其是对于 c 样式语法。

我目前这样做的方式是逐行查找'{'和'}'并检查函数定义是否在同一行或高于'{'。如果找不到函数定义，我认为它是一个控制结构。这远非完美，因为注释中不匹配的大括号符号将导致此逻辑失败。由于我不知道任何其他选择，这可能是完全错误的做法。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:02:25.770

查看 pyparsing 或 PLY，或者使用“递归下降解析器”做自己的事情。

嵌套括号（和花括号 - 相同）可能是无堆栈模式匹配器无法对任意深度执行的最常见示例。但是上面提到的3种技术应该都能做好。

# mysql - mysql 检查列值是否在字符串中

> ID：16182463
> 
> 赞同：-1
> 
> 时间：2013-04-24T02:39:15.560
> 
> 标签：mysql

当列值是字符串的一部分时，我需要在 MySQL 中查找。真的，我正在尝试输入像“/folder1/folder2/”这样的文件夹路径并更改其所有父文件夹的值。

这就是我所拥有的不起作用：

```
UPDATE content_folders SET size = size+47654765 WHERE path% LIKE "/folder1/folder2/" 
```

因此，例如使用“/folder1/folder2/”，我需要对列路径为“/”或“/folder1”的任何行进行操作。

我也试过这个无济于事：

```
mysqli_query($mysqli,"UPDATE content_folders SET size = size+".filesize("content/$id")." WHERE concat(path,'%') LIKE '".$path."'") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T02:44:33.717

使用 LIKE 运算符时，您在查询的字符串部分使用 % 通配符，而不是作为字段名称的一部分。

所以

```
UPDATE content_folders SET size = size+47654765 WHERE path% LIKE "/folder1/folder2/" 
```

应该

```
UPDATE content_folders SET size = size+47654765 WHERE path LIKE "/folder1/folder2/%" 
```

编辑：

我误读了原来的问题。

您可以使用以下内容选择父目录：

```
UPDATE content_folders SET size = size+47654765 WHERE INSTR("/folder1/folder2/", path) = 1 AND path != "/folder1/folder2/"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:56:05.877

我知道了。

```
UPDATE content_folders SET size = size+4674567 WHERE instr("/folder1/folder2/",path) 
```

# spring - 在 Struts2 上实现 Spring-security 的示例不起作用

> ID：16182472
> 
> 赞同：2
> 
> 时间：2013-04-24T02:40:06.027
> 
> 标签：spring, struts2, spring-security

我的应用程序应该只向具有 ROLE_ADMIN 访问权限的用户显示 secret.jsp 页面，但事实并非如此。

我定义了两个用户，一个具有 ROLE_ADMIN 访问权限，另一个具有 ROLE_USER 访问权限。我有两个问题第一个问题是登录页面不起作用我可以使用任何虚拟用户名和密码访问应用程序。

另一个问题是，secret.jsp 页面对 ROLE_ADMIN 用户不可见。一旦我打开 login.jsp 页面并输入用户的凭据，它就会进入注册页面，但是当我单击秘密链接时，它会重定向到 login.jsp 页面，而不是打开 secret.jsp 页面。

我在 Struts2 上实现 SpringSecurity。

**Web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>  
    </listener>
    <context-param> 
        <param-name>contextConfigLocation</param-name> 
        <param-value>
            /WEB-INF/applicationContext.xml
            /WEB-INF/medics-security.xml 
            /WEB-INF/login-service.xml
        </param-value> 
    </context-param> 
    <filter> 
        <filter-name>springSecurityFilterChain</filter-name> 
        <filter-class> 
            org.springframework.web.filter.DelegatingFilterProxy 
        </filter-class> 
    </filter> 

    <filter-mapping> 
        <filter-name>springSecurityFilterChain</filter-name> 
        <url-pattern>/*</url-pattern> 
    </filter-mapping>

    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

**医疗安全.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns='http://www.springframework.org/schema/security' 
        xmlns:beans='http://www.springframework.org/schema/beans' 
            xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' 
            xsi:schemaLocation='http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/security
    http://www.springframework.org/schema/security/spring-security-3.0.xsd'>
<beans:import resource='login-service.xml'/> 
<http auto-config="true" access-denied-page="/error.jsp">
    <intercept-url pattern="/" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
    <intercept-url pattern="/register*" access="ROLE_ADMIN" />
    <intercept-url pattern="/secret*" access="ROLE_ADMIN" />
    <form-login login-page="/login.jsp" authentication-failure-url="/login?error=true"/> 
    <remember-me/>
    <logout/>
</http> 

<authentication-manager> 
    <authentication-provider> 
        <user-service>
            <user name="admin" password="secret" authorities="ROLE_ADMIN"/>
            <user name="user" password="secret" authorities="ROLE_USER"/>
        </user-service>   
    </authentication-provider> 
</authentication-manager> 
</beans:beans> 
```

**登录服务.xml**

```
<beans xmlns='http://www.springframework.org/schema/beans' 
         xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' 
         xsi:schemaLocation='http://www.springframework.org/schema/beans 

    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd'>

</beans> 
```

**应用程序上下文.xml**

```
<?xml version='1.0' encoding='UTF-8'?> 
<beans xmlns='http://www.springframework.org/schema/beans' 
                xmlns:context='http://www.springframework.org/schema/context' 
                xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' 
                xsi:schemaLocation='http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context    
    http://www.springframework.org/schema/context/spring-context-3.0.xsd'>

    <context:component-scan base-package='com.myproject'/> 
    <bean id='internalResourceResolver' 
                 class='org.springframework.web.servlet.view.InternalResourceViewResolver'> 
        <property name='prefix' value='/Web Pages/'/> 
        <property name='suffix' value='.jsp'/> 
    </bean> 
    <bean 
    class='org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping'/>
    <bean class='org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter'/> 
    <bean id='placeholderConfig' 
                 class='org.springframework.beans.factory.config.PropertyPlaceholderConfigurer'/> 
   </beans> 
```

**struts.xml**

```
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>
    <!-- Configuration for the default package. -->
    <constant name="struts.action.extension" value="html"/> 
    <constant name="struts.enable.SlashesInActionNames" value="true"/> 
```

```
<action name="Login" class="com.myproject.struts.Login">
<result name="SUCCESS">login.jsp</result>
</action>

<action name="Register" class="com.myproject.struts.Register">
<result name="SUCCESS">register.jsp</result>
</action>

<action name="j_spring_security_check" class="com.myproject.struts.j_spring_security_check">
    <result name="SUCCESS">register.jsp</result>
</action> 
```

**注册.jsp**

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<%@ taglib prefix="s" uri="/struts-tags" %>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>secret page</title>
    </head>
    <body>
        <p>register</p>
        <a href="secret.jsp">secret</a>
    </body>
</html> 
```

**登录.jsp**

```
<html>
    <head>

    </head>
    <body>
        <form action="j_spring_security_check.html" method="post"> 
            <label for="j_username">Username</label>
            <input type="text" name="j_username" id="j_username"/><br/> 
            <label for="j_password">Password</label>
            <input type="password" name="j_password" id="j_password"/><br/> 
            <input type='checkbox' name='_spring_security_remember_me'/> Remember me<br/>   
            <input type="submit" value="Login"/>
            <input type="reset" value="Reset"/>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:06:16.050

在你的`medics-security.xml`你有

```
<http auto-config="true" access-denied-page="/error.jsp">
    <intercept-url pattern="/" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
    <intercept-url pattern="/register*" access="ROLE_ADMIN" />
    <intercept-url pattern="/secret*" access="ROLE_ADMIN" />
    <form-login login-page="/login.jsp" authentication-failure-url="/login?error=true"/> 
    <remember-me/>
    <logout/>
</http> 
```

第一个模式是“/”，它映射应用程序的根。Spring Security 按该顺序检查模式，第一个模式满足您的请求，Spring Security 允许您进入，因为它带有`access="IS_AUTHENTICATED_ANONYMOUSLY"`. 你应该把最宽的图案放在最后。您可以在日志中看到模式检查。

# python - python代码没有名为zmq的模块

> ID：16182473
> 
> 赞同：1
> 
> 时间：2013-04-24T02:40:17.167
> 
> 标签：python, zeromq

当我尝试运行此脚本时

```
# -*- coding: utf-8 -*- 

#
#   Hello World client in Python
#   Connects REQ socket to tcp://localhost:5555
#   Sends "Hello" to server, expects "World" back
#

import zmq

context = zmq.Context()

#  Socket to talk to server
print "Connecting to hello world server…"
socket = context.socket(zmq.REQ)
socket.connect ("tcp://localhost:5555")

#  Do 10 requests, waiting each time for a response
for request in range (10):
    print "Sending request ", request,"…"
    socket.send ("Hello")

    #  Get the reply.
    message = socket.recv()
    print "Received reply ", request, "[", message, "]" 
```

当我这样做时 - python peer.py

我明白了`ImportError: No module named zmq`

但是我已经使用 -easy_install pyzmq 为 zeromq 安装了 python 绑定。如何检查绑定是否未正确安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T02:58:53.910

尝试“python -v peer.py” - 这应该会显示正在搜索您的模块的路径。您可以在 Linux 上使用 strace 获得类似的结果，但在这种情况下，python -v 更具针对性。

还要考虑你的系统上有多个 Python 的可能性——如果你在一个带有 bash 的 Linux 上，“type -all python”可能会提供信息。

# javascript - HTML 表单格式问题

> ID：16182475
> 
> 赞同：0
> 
> 时间：2013-04-24T02:40:27.600
> 
> 标签：javascript, html

我正在使用简单的方法 makeInput() 动态创建 HTML 表单，并且想知道如何使文本输入框每行显示一个，而不是以从右到左的方式显示。截至目前，当您单击“添加课程”按钮时，它会在旧文本输入旁边而不是在新行上添加一个新文本输入。这是我到目前为止的代码：

```
<html>
<head>COURSES</head>
<title>Add Courses</title>
<script type="text/javascript">
var x = 0;
var f = document.createElement("form");
f.setAttribute('method',"post");
f.setAttribute('action',"tron.php");
f.id = "form1";
var s = document.createElement("input"); //input element, Submit button
s.setAttribute('type',"submit");
s.setAttribute('value',"Submit Courses");
f.appendChild(s);
function makeInput()
{

var i = document.createElement("input");
i.type = "text";
i.name = "cname"+ x;
i.id = "cname"+ x;

f.appendChild(i);
document.getElementById("test").appendChild(f);

x = x+1;
document.getElementById("course").innerHTML= "Number of courses: " + x;
}

</script>
<body>
<p id="course">Number of courses: </p>
<button onclick="makeInput()">Add Course</button>
<p id="test"></p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T02:51:25.067

我通常围绕 html 表单动态创建 div 和/或 span，以便您也可以将 css 应用于它们。如果您将输入框放在 div 中，则它们应该一次排一行，除非您专门添加 css 来做其他事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:55:20.220

只是将评论作为答案。

改变

```
document.getElementById("test").appendChild(f); 
```

到以下

```
document.getElementById("test").appendChild(f).innerHTML += '<br />'; 
```

这是小提琴：http: [//jsfiddle.net/UR4y7/](http://jsfiddle.net/UR4y7/)

# html - css 浮动在 div 上的问题

> ID：16182476
> 
> 赞同：1
> 
> 时间：2013-04-24T02:40:42.023
> 
> 标签：html, css, css-float

我不知道为什么在使用花车时总是发生这种情况

我的 div(samle) 看起来像这样

```
 <div class="main>
   <div class="inn_div">&nbsp</div>
 </div> 
```

和我的样式表

```
 .main{ width:250px; border:1px solid #000; }

  .main .inn_div{ float:left; width:25px; height:50px; border:1px solid #000; } 
```

它看起来像这样

[![通过这种方式显示](https://i.stack.imgur.com/Kb8vCs.png)](https://i.stack.imgur.com/Kb8vC.png)

inn_div 来自 .main 而且当我使用“inline-block 或 table-cell”时它工作正常我不需要那些 wat 的问题与浮动问题或我的家伙帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T02:46:14.353

添加`overflow:auto`到您的主 div。

**[jsFiddle 示例](http://jsfiddle.net/j08691/E9nac/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T02:54:43.027

你实际上需要清除浮动。

[演示](http://jsfiddle.net/Dv2cH/)

```
<div class="main">
   <div class="inn_div">
       &nbsp;
   </div>
    <div style="clear:left;"></div>
 </div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T02:47:14.853

如果您不希望它们重叠，则您的主 div 充当包装器 div，请不要将内部 div 放在主 div 内。但是如果你必须这样做，那么你可以使用 margin-top 属性或 padding-top 属性，直到你对间距感到满意为止

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T02:55:42.503

使用[CSS clear 属性](http://www.w3schools.com/cssref/pr_class_clear.asp)。例如。明确：两者

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T02:56:06.663

解决方案是为主类指定一个高度或最小高度。你只有宽度。不需要像 JavaScript 这样的任何其他脚本。

# java - java中后缀和一元和加法有什么区别

> ID：16182477
> 
> 赞同：1
> 
> 时间：2013-04-24T02:40:53.243
> 
> 标签：java, logic

请帮助我了解两个“TRUE”和“FALSE”输出之间的区别。并指导我如何在 Oracle Docs 中获取此逻辑和运算符相关主题。

```
int i = 1;
int j = 2;

System.out.println(i==j--);// FALSE
j = 2;
System.out.println(i==j-1);//TRUE
j = 2;
System.out.println(i==--j);//TRUE 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T02:43:39.827

`i == j--`方法`i == j; j = j - 1;`

`i == j-1`方法`i == (j-1);`

`i == --j`方法`j = j - 1; i == j;`

[这是运算符优先级表](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)，按从高到低的顺序排列。例如，`-`优先级高于`==`，这就是为什么`i==j-1`意味着`i==(j-1)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T02:44:28.270

等价物在下表中，以及每行开头的`i`is`1`和`j`is的解释：`2`

```
i==j--;   i==j; j--;  // 1==2 is false, j <- 1
i==j-1;   i==j-1;     // 1==(2-1) is true, j does not change
i==--j;   --j; i==j;  // j <- 1, 1==1 is true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T02:44:09.633

区别在于：

j-- 发生在调用之后（因此在比较期间它评估 i==j 是 j 的当前值。- 发生在（后缀）之后

j-1 是表达式的一部分，因此作为计算的一部分发生

--j 是函数调用前，所以它在（前缀）之前被减去

# mysql - 按优先级分组 NULL？

> ID：16182482
> 
> 赞同：0
> 
> 时间：2013-04-24T02:41:06.443
> 
> 标签：mysql, sql

桌子 ：

```
 ID                    in                   out
  1   2000-01-01 00:00:00   2000-01-01 12:00:00
  1   2000-01-02 00:00:00                  NULL
  2   2000-01-01 00:00:00   2000-01-01 12:00:00 
  2   2000-01-02 00:00:00   2000-01-02 11:00:00
  3   2000-01-01 00:00:00                  NULL 
```

结果 ：

```
 ID                    in                   out
  1   2000-01-02 00:00:00                  NULL
  2   2000-01-02 00:00:00   2000-01-01 11:00:00
  3   2000-01-01 00:00:00                  NULL 
```

所以我想获取所有*ID**中*的最新信息，并根据 ID 对它们进行排序。我尝试了 GROUP BY ，但这似乎得到了有价值的。

 *我现在拥有的类似于

```
SELECT * 
  FROM TABLE 
GROUP BY ID 
ORDER BY OUT IS NULL DESC, OUT DESC; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T02:47:02.763

您需要选择适当的值并通过以下方式进行排序：

```
select t.*
from t join
     (select t.id, max(t.in) as maxin
      from t
      group by t.id
     ) tsum
     on t.id = tsum.id and t.in = tsum.maxin
order by id 
```*

# ios6 - 如何获取用户动态添加的通行证的最后修改

> ID：16182486
> 
> 赞同：0
> 
> 时间：2013-04-24T02:41:26.687
> 
> 标签：ios6, header, last-modified, passbook

在我通过我的服务器并通过使用以下方式进行最后修改之前：
`header('Last-Modified: ' . date("D, d M Y H:i:s", filemtime('/Applications/MAMP/htdocs/passesWebserver/DigiClubCard.pkpass')) . ' GMT+07:00');` 现在我的服务器中没有任何通过，我只有数据库中的传递数据，所以我应该如何更改此标头才能获得通行证的最后修改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T03:42:52.557

如果您要发送一个新的、动态创建的通行证，以使用当前时间创建一个标头，您可以：

```
// Tell PHP to use UTC
date_default_timezone_set ('UTC');

// Create a header with the current time
header('Last-Modified: ' . date("D, d M Y H:i:s", time()) . ' GMT'); 
```

关于*timezone ，HTTP/1.1 标准*[**RFC2616**](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.3)的第 3.3.1 节指出：

> 所有 HTTP 日期/时间戳必须以格林威治标准时间 (GMT) 表示，无一例外。就 HTTP 而言，GMT 与 UTC（协调世界时）完全相同。这在前两种格式中通过包含“GMT”作为时区的三个字母缩写来表示，并且在读取 asctime 格式时必须假定。HTTP-date 区分大小写，除了语法中特别包含的 SP 之外，不得包含其他 LWS。

所以你不应该增加 7 小时到格林威治标准时间。

# clojure - 如何在遍历序列时访问序列中的两个相邻元素

> ID：16182492
> 
> 赞同：1
> 
> 时间：2013-04-24T02:42:05.380
> 
> 标签：clojure

我有一个 seq `(2 3 1 4)`。

我想遍历它，并且无论下一个元素小于哪个元素，那么 prev 元素都会替换两个 elems 另一个 seq。'（- 4 1）。

所以 f('(2 3 1 4)) => (2 (- 3 1) 4)。我该怎么写？

基本上 -

1）我想同时访问一个序列中的两个相邻元素。2）此时编辑并返回一个新的序列。3) 继续处理新返回的seq。

一般实现上述3的机制是什么。（map，reduce 都让我一次只能访问一个元素。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T06:42:00.317

这实际上不是成对消耗的问题，因为您如何划分序列取决于您对当前对执行的操作。请注意，有时您会从序列中消费*一项*`2 3`( )，但有时您会消费*两项*( `3 1`)。

因此，您不能使用任何在 clojure ( , 等) 中创建滑动窗口的常用`(partition 2 1 coll)`方法`(map fn coll (rest coll))`。您需要使用显式递归的东西。

你的算法应该是这样的：

1.  如果空 seq 发出 nil
2.  如果只有一个项目发出项目
3.  如果两个项目，测试大小：
    1.  如果 first > second，将两者都替换为`(- first second)`; 用剩余项目递归
    2.  否则，先发射；递归第二个和剩余的项目。

这是该算法的惰性实现。你也可以用`recur`一个累加器来做到这一点——它不会懒惰，但它仍然可以工作。

```
(defn combine-if-gt-next
  [[f s & r]]
  (cond
   (nil? f) nil
   (nil? s) (cons f nil)
   (> f s)  (cons (list '- f s) (lazy-seq (combine-if-gt-next r)))
   true (cons f (lazy-seq (combine-if-gt-next (cons s r)))))) 
```

例子：

```
(combine-if-gt-next '(2 3 1 4)) ; your example
;; (2 (- 3 1) 4)
(combine-if-gt-next [])
;; nil
(combine-if-gt-next [1 2 3])
;; (1 2 3)
(combine-if-gt-next [2 3 4 1])
;; (2 3 (- 4 1))
(combine-if-gt-next [2 3 4 1 4])
;; (2 3 (- 4 1) 4)
(combine-if-gt-next [2 1 4 1 4 5 1])
;; ((- 2 1) (- 4 1) 4 (- 5 1))
(combine-if-gt-next [5 4 3 2 1])
;; ((- 5 4) (- 3 2) 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T03:10:13.357

我不确定我是否完全理解您的问题，但我会尝试一下。

首先我们声明一个 var 来保存你的序列：

```
(def myseq '(2 3 1 4)) 
```

然后，我们可以将相同的序列压缩在一起，但起点不同。这样我们就可以轻松访问前一个元素。这将返回一个 seq 的 seq，这就是我们用来`mapcat`将结果连接到一个列表中的原因：

```
(mapcat
 (fn [prev curr]
   (if (< prev curr)
     [`(~'- ~curr ~prev)]
     [curr]))
 myseq (drop 1 myseq))

;; evaluates to((- 3 2) 1 (- 4 1)) 
```

或者，如果您在我提出的第二个输出之后：

```
(mapcat
 (fn [prev curr]
   (if (< prev curr)
     [`(~'- ~curr ~prev)]
     []))
 myseq (drop 1 myseq))

;; evaluates to ((- 3 2) (- 4 1)) 
```

希望这可以帮助。

**更新**：

好的，这给了你想要的输出：

```
(mapcat
 (fn [prev curr idx]
   (cond
    (< curr prev) [`(~'- ~prev ~curr)]
    (= (+ idx 2) (count myseq)) [curr]
    :else [prev]))
 myseq (drop 1 myseq) (range (count myseq)))

;; evaluates to (2 (- 3 1) 4) 
```

希望这就是你所追求的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T05:01:03.377

[partition](http://clojuredocs.org/clojure_core/clojure.core/partition)和 partition-all 让您可以将一个序列转换为一批元素，使用`(partition 2 1 data)`可以让您在一个滑动窗口对上进行迭代。

```
(def data '(2 3 1 4))

(loop [res [] pairs (partition-all 2 1 data)]
 (if-let [[l r] (first pairs)]
     (if (and r (< r l))
         (recur (conj res ['- l r]) (drop 2 pairs))
         (recur (conj res l) (rest pairs)))
     res))

;; returns [2 [- 3 1] 4] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T05:20:03.377

这是否解决了您的需求：

```
(defn my-fun [[f s & r]]
  (let [[flip next] (cond (and (nil? f) (nil? s)) ['() r]
                          (nil? f) [(list s) r]
                          (nil? s) [(list f) r]
                          (< s f) [(list (list (- f) s)) r]
                          :else [(list f) (cons s r)])]
    (if (nil? r)
      (concat flip next)
      (concat flip (my-fun next)))))

(my-fun '(2 3 1 4)) 
=> (2 (-3 1) 4)
(my-fun '(6 3 5 4))
=> ((-6 3) (-5 4)) 
```

# vector - java.lang.OutOfMemoryError：在 mahout 中运行 seq2sparse 时出现 Java 堆空间错误

> ID：16182495
> 
> 赞同：2
> 
> 时间：2013-04-24T02:42:23.770
> 
> 标签：vector, hadoop, mahout

我正在尝试在 mahout 中使用 k-means 对一些手工制作的日期进行聚类。我创建了 6 个文件，每个文件中几乎没有 1 或 2 个单词的文本。使用 ./mahout seqdirectory 从中创建了一个序列文件。在尝试使用 ./mahout seq2sparse 命令将序列文件转换为向量时，我收到 java.lang.OutOfMemoryError: Java heap space error。序列文件的大小为 .215 KB。

命令：./mahout seq2sparse -i mokha/output -o mokha/vector -ow

错误日志：

```
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/home/bitnami/mahout/mahout-distribution-0.5/m
ahout-examples-0.5-job.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/home/bitnami/mahout/mahout-distribution-0.5/l
ib/slf4j-jcl-1.6.0.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
Apr 24, 2013 2:25:11 AM org.slf4j.impl.JCLLoggerAdapter warn
WARNING: No seq2sparse.props found on classpath, will use command-line arguments
 only
Apr 24, 2013 2:25:12 AM org.slf4j.impl.JCLLoggerAdapter info
INFO: Maximum n-gram size is: 1
Apr 24, 2013 2:25:12 AM org.slf4j.impl.JCLLoggerAdapter info
INFO: Deleting mokha/vector
Apr 24, 2013 2:25:12 AM org.slf4j.impl.JCLLoggerAdapter info
INFO: Minimum LLR value: 1.0
Apr 24, 2013 2:25:12 AM org.slf4j.impl.JCLLoggerAdapter info
INFO: Number of reduce tasks: 1
Apr 24, 2013 2:25:12 AM org.apache.hadoop.metrics.jvm.JvmMetrics init
INFO: Initializing JVM Metrics with processName=JobTracker, sessionId=
Apr 24, 2013 2:25:12 AM org.apache.hadoop.mapreduce.lib.input.FileInputFormat li
stStatus
INFO: Total input paths to process : 1
Apr 24, 2013 2:25:12 AM org.apache.hadoop.mapred.JobClient monitorAndPrintJob
INFO: Running job: job_local_0001
Apr 24, 2013 2:25:12 AM org.apache.hadoop.mapreduce.lib.input.FileInputFormat li
stStatus
INFO: Total input paths to process : 1
Apr 24, 2013 2:25:12 AM org.apache.hadoop.mapred.Task done
INFO: Task:attempt_local_0001_m_000000_0 is done. And is in the process of commi
ting
Apr 24, 2013 2:25:12 AM org.apache.hadoop.mapred.LocalJobRunner$Job statusUpdate
INFO:
Apr 24, 2013 2:25:12 AM org.apache.hadoop.mapred.Task commit
INFO: Task attempt_local_0001_m_000000_0 is allowed to commit now
Apr 24, 2013 2:25:12 AM org.apache.hadoop.mapreduce.lib.output.FileOutputCommitt
er commitTask
INFO: Saved output of task 'attempt_local_0001_m_000000_0' to mokha/vector/token
ized-documents
Apr 24, 2013 2:25:12 AM org.apache.hadoop.mapred.LocalJobRunner$Job statusUpdate
INFO:
Apr 24, 2013 2:25:12 AM org.apache.hadoop.mapred.Task sendDone
INFO: Task 'attempt_local_0001_m_000000_0' done.
Apr 24, 2013 2:25:13 AM org.apache.hadoop.mapred.JobClient monitorAndPrintJob
INFO:  map 100% reduce 0%
Apr 24, 2013 2:25:13 AM org.apache.hadoop.mapred.JobClient monitorAndPrintJob
INFO: Job complete: job_local_0001
Apr 24, 2013 2:25:13 AM org.apache.hadoop.mapred.Counters log
INFO: Counters: 5
Apr 24, 2013 2:25:13 AM org.apache.hadoop.mapred.Counters log
INFO:   FileSystemCounters
Apr 24, 2013 2:25:13 AM org.apache.hadoop.mapred.Counters log
INFO:     FILE_BYTES_READ=1471400
Apr 24, 2013 2:25:13 AM org.apache.hadoop.mapred.Counters log
INFO:     FILE_BYTES_WRITTEN=1496783
Apr 24, 2013 2:25:13 AM org.apache.hadoop.mapred.Counters log
INFO:   Map-Reduce Framework
Apr 24, 2013 2:25:13 AM org.apache.hadoop.mapred.Counters log
INFO:     Map input records=6
Apr 24, 2013 2:25:13 AM org.apache.hadoop.mapred.Counters log
INFO:     Spilled Records=0
Apr 24, 2013 2:25:13 AM org.apache.hadoop.mapred.Counters log
INFO:     Map output records=6
Apr 24, 2013 2:25:13 AM org.apache.hadoop.metrics.jvm.JvmMetrics init
INFO: Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - al
ready initialized
Apr 24, 2013 2:25:13 AM org.apache.hadoop.mapreduce.lib.input.FileInputFormat li
stStatus
INFO: Total input paths to process : 1
Apr 24, 2013 2:25:13 AM org.apache.hadoop.mapred.JobClient monitorAndPrintJob
INFO: Running job: job_local_0002
Apr 24, 2013 2:25:13 AM org.apache.hadoop.mapreduce.lib.input.FileInputFormat li
stStatus
INFO: Total input paths to process : 1
Apr 24, 2013 2:25:13 AM org.apache.hadoop.mapred.MapTask$MapOutputBuffer <init>
INFO: io.sort.mb = 100
Apr 24, 2013 2:25:14 AM org.apache.hadoop.mapred.LocalJobRunner$Job run
WARNING: job_local_0002
java.lang.OutOfMemoryError: Java heap space
        at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.<init>(MapTask.java:
781)
        at org.apache.hadoop.mapred.MapTask$NewOutputCollector.<init>(MapTask.ja
va:524)
        at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:613)
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:305)
        at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:1
77)
Apr 24, 2013 2:25:14 AM org.apache.hadoop.mapred.JobClient monitorAndPrintJob
INFO:  map 0% reduce 0%
Apr 24, 2013 2:25:14 AM org.apache.hadoop.mapred.JobClient monitorAndPrintJob
INFO: Job complete: job_local_0002
Apr 24, 2013 2:25:14 AM org.apache.hadoop.mapred.Counters log
INFO: Counters: 0
Apr 24, 2013 2:25:14 AM org.apache.hadoop.metrics.jvm.JvmMetrics init
INFO: Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - al
ready initialized
Apr 24, 2013 2:25:15 AM org.apache.hadoop.mapreduce.lib.input.FileInputFormat li
stStatus
INFO: Total input paths to process : 1
Apr 24, 2013 2:25:15 AM org.apache.hadoop.mapred.JobClient monitorAndPrintJob
INFO: Running job: job_local_0003
Apr 24, 2013 2:25:15 AM org.apache.hadoop.mapreduce.lib.input.FileInputFormat li
stStatus
INFO: Total input paths to process : 1
Apr 24, 2013 2:25:15 AM org.apache.hadoop.mapred.MapTask$MapOutputBuffer <init>
INFO: io.sort.mb = 100
Apr 24, 2013 2:25:15 AM org.apache.hadoop.mapred.LocalJobRunner$Job run
WARNING: job_local_0003
java.lang.OutOfMemoryError: Java heap space
        at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.<init>(MapTask.java:
781)
        at org.apache.hadoop.mapred.MapTask$NewOutputCollector.<init>(MapTask.ja
va:524)
        at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:613)
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:305)
        at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:1
77)
Apr 24, 2013 2:25:16 AM org.apache.hadoop.mapred.JobClient monitorAndPrintJob
INFO:  map 0% reduce 0%
Apr 24, 2013 2:25:16 AM org.apache.hadoop.mapred.JobClient monitorAndPrintJob
INFO: Job complete: job_local_0003
Apr 24, 2013 2:25:16 AM org.apache.hadoop.mapred.Counters log
INFO: Counters: 0
Apr 24, 2013 2:25:16 AM org.apache.hadoop.metrics.jvm.JvmMetrics init
INFO: Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - al
ready initialized
Apr 24, 2013 2:25:16 AM org.apache.hadoop.mapreduce.lib.input.FileInputFormat li
stStatus
INFO: Total input paths to process : 0
Apr 24, 2013 2:25:16 AM org.apache.hadoop.mapred.JobClient monitorAndPrintJob
INFO: Running job: job_local_0004
Apr 24, 2013 2:25:16 AM org.apache.hadoop.mapreduce.lib.input.FileInputFormat li
stStatus
INFO: Total input paths to process : 0
Apr 24, 2013 2:25:16 AM org.apache.hadoop.mapred.LocalJobRunner$Job run
WARNING: job_local_0004
java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
        at java.util.ArrayList.RangeCheck(ArrayList.java:547)
        at java.util.ArrayList.get(ArrayList.java:322)
        at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:1
24)
Apr 24, 2013 2:25:17 AM org.apache.hadoop.mapred.JobClient monitorAndPrintJob
INFO:  map 0% reduce 0%
Apr 24, 2013 2:25:17 AM org.apache.hadoop.mapred.JobClient monitorAndPrintJob
INFO: Job complete: job_local_0004
Apr 24, 2013 2:25:17 AM org.apache.hadoop.mapred.Counters log
INFO: Counters: 0
Apr 24, 2013 2:25:17 AM org.slf4j.impl.JCLLoggerAdapter info
INFO: Deleting mokha/vector/partial-vectors-0
Apr 24, 2013 2:25:17 AM org.apache.hadoop.metrics.jvm.JvmMetrics init
INFO: Cannot initialize JVM Metrics with processName=JobTracker, sessionId= - al
ready initialized
Exception in thread "main" org.apache.hadoop.mapreduce.lib.input.InvalidInputExc
eption: Input path does not exist: file:/home/bitnami/mahout/mahout-distribution
-0.5/bin/mokha/vector/tf-vectors
        at org.apache.hadoop.mapreduce.lib.input.FileInputFormat.listStatus(File
InputFormat.java:224)
        at org.apache.hadoop.mapreduce.lib.input.SequenceFileInputFormat.listSta
tus(SequenceFileInputFormat.java:55)
        at org.apache.hadoop.mapreduce.lib.input.FileInputFormat.getSplits(FileI
nputFormat.java:241)
        at org.apache.hadoop.mapred.JobClient.writeNewSplits(JobClient.java:885)
        at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:7
79)
        at org.apache.hadoop.mapreduce.Job.submit(Job.java:432)
        at org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:447)
        at org.apache.mahout.vectorizer.tfidf.TFIDFConverter.startDFCounting(TFI
DFConverter.java:350)
        at org.apache.mahout.vectorizer.tfidf.TFIDFConverter.processTfIdf(TFIDFC
onverter.java:151)
        at org.apache.mahout.vectorizer.SparseVectorsFromSequenceFiles.run(Spars
eVectorsFromSequenceFiles.java:262)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)
        at org.apache.mahout.vectorizer.SparseVectorsFromSequenceFiles.main(Spar
seVectorsFromSequenceFiles.java:52)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(Progra
mDriver.java:68)
        at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:139)
        at org.apache.mahout.driver.MahoutDriver.main(MahoutDriver.java:187) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T00:24:16.483

bin/mahout 脚本读取环境变量“MAHOUT_HEAPSIZE”（以兆字节为单位）并从中设置“JAVA_HEAP_MAX”变量（如果存在）。我正在使用的 mahout 版本（0.8）将 JAVA_HEAP_MAX 设置为 3G。执行

```
export MAHOUT_HEAPSIZE=10000m 
```

在树冠集群运行似乎帮助我在单台机器上运行更长时间之前。但是，我怀疑最好的解决方案是切换到在集群上运行。

作为参考，还有另一个相关的帖子： [Mahout 用完堆空间](https://stackoverflow.com/questions/6026015/mahout-runs-out-of-heap-space)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T03:48:51.470

我不知道你是否尝试过这个，但只是发布它以防你错过它。

```
'Set the environment variable 'MAVEN_OPTS' to allow for more memory via 'export MAVEN_OPTS=-Xmx1024m' 
```

请参阅（在常见问题部分）[here](https://cwiki.apache.org/MAHOUT/buildingmahout.html)

# java - Java 字符串索引超出范围，不知道怎么回事

> ID：16182498
> 
> 赞同：0
> 
> 时间：2013-04-24T02:42:49.403
> 
> 标签：java

谁能看到我的代码为什么或在哪里会给我带来麻烦，我得到一个字符串索引超出范围：-1 错误。

我想要做的是通过 GUI 从用户那里获取输入并获取该输入并检查它是否包含任何数字，即 1,2,3... 并将它们转换为字符串（“one”，“two”， “三”），通过在一个句子中替换它们。

所以这句话（我有 9 只猫和 1 条狗）会导致（我有 9 只猫和 1 条狗）

我不确定我做错了什么，或者我想做的是合法编程，正如你所知，我对它很陌生。

多谢你们！！

```
private String getResultStr()
{
    /*** Local Variables ***/

    StringBuffer result;
    String userInput;
    int digit;
    int count;
    String finalResult = "";
        String digitAsStr;

    /*** Instantiate ***/

    result = new StringBuffer();

    /*** Extract Digits (if any) ***/

    userInput = txtInput.getText();
    result.append( userInput );

    count = 0;

    while ( count < result.length() )
    {

        for ( int i = 0; i < result.length(); i++ )
            if ( result.charAt( i ) >= '0' || result.charAt( i ) <= '9' )
            {
                digit = result.charAt( i );
                digitAsStr = digitToString( digit );
                result.deleteCharAt( i );
                result.insert( i - 1, digitAsStr );
            }

        count++;
    }

    finalResult = result.toString();

    return finalResult;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T02:47:58.880

你开始迭代 `for ( int i = 0; i < result.length(); i++ )`然后你得到

```
result.insert( i - 1, digitAsStr ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:46:36.830

您的 if 语句：`if ( result.charAt( i ) >= '0' || result.charAt( i ) <= '9' )`应该是：`if ( result.charAt( i ) >= '0' && result.charAt( i ) <= '9' )`否则一切都会被接受。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T02:49:32.533

你的线

```
result.insert( i - 1, digitAsStr ); 
```

在迭代 0 将尝试访问 -1 处的索引。

# android - 如何在 Android 上的对话框中设置视图

> ID：16182501
> 
> 赞同：0
> 
> 时间：2013-04-24T02:43:11.023
> 
> 标签：android, dialog

我使用以下代码在对话框中设置视图：

```
LayoutInflater inflater = LayoutInflater.from(this);
View layout = inflater.inflate(R.layout.mylayout, null);
TextView MyTextView = (TextView)findViewById(R.id.my_tv);
MyTextView.setText("test");
AlertDialog MyDialog;
AlertDialog.Builder MyBuilder = new AlertDialog.Builder(this);
MyBuilder.setTitle("title");
MyBuilder.setView(layout);
MyDialog = MyBuilder.create();
MyDialog.show(); 
```

my_tv 是 mylayout.xml 中的一个 TextView。
但它在 line 发生 NullPointer 错误`MyTextView.setText("test");`。
我该如何修改它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T03:00:41.437

当您实例化“MyTextView”时，您应该使用以下代码进行实例化：

```
TextView MyTextView = (TextView)layout.findViewById(R.id.my_tv); 
```

# attributes - eBay Find API - findItemByKeyword 搜索结果返回属性字段为空

> ID：16182512
> 
> 赞同：0
> 
> 时间：2013-04-24T02:44:39.103
> 
> 标签：attributes, ebay-api

我正在使用 eBay 的 Finding API (c#) 按关键字查找项目。我需要能够查看型号是否与我要查找的项目匹配。

我的印象是，一个项目的 MPN 包含在eBay 返回`Attributes`的`searchItems`中，但是为关键字返回的 100 个搜索项目中的每一个都将其属性设置为`null`。当我单击作为列表 URL 的对象中的链接时，我看到页面上明确定义了 MPN。

我在找错石头了吗？这是返回的物品的 eBay 页面的链接`Atrribute[] field = null`

[http://www.ebay.com/itm/Western-Digital-Caviar-Green-3-TB-Internal-5400-RPM-WD30EZRX-Hard-Drive-/300856751436?pt=US_Internal_Hard_Disk_Drives](http://www.ebay.com/itm/Western-Digital-Caviar-Green-3-TB-Internal-5400-RPM-WD30EZRX-Hard-Drive-/300856751436?pt=US_Internal_Hard_Disk_Drives)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T03:06:17.047

我建议您阅读[API 文档参考](http://developer.ebay.com/devzone/finding/CallRef/index.html)。

我不会被 Ebay 网站上发生的事情和你所看到的事情所愚弄。您的应用程序和 ebay.com 可能没有在幕后使用相同的服务

查看服务的原始响应。我相信这是您会感兴趣的服务 URI -

[http://svcs.ebay.com/services/search/FindingService/v1?OPERATION-NAME=findItemsByKeywords&SERVICE-VERSION=1.0.0&SECURITY-APPNAME=YourAppID&RESPONSE-DATA-FORMAT=XML&REST-PAYLOAD&keywords=harry%20potter%20phoenix](http://svcs.ebay.com/services/search/FindingService/v1?OPERATION-NAME=findItemsByKeywords&SERVICE-VERSION=1.0.0&SECURITY-APPNAME=YourAppID&RESPONSE-DATA-FORMAT=XML&REST-PAYLOAD&keywords=harry%20potter%20phoenix)

检查响应是否包含`<MPN>`标签。我无法这样做，因为我没有 ebay 的应用程序 ID。

我认为这不会有`<MPN>`标签 - [findItemsByKeywords 的 API 参考](http://developer.ebay.com/devzone/finding/callref/finditemsbykeywords.html)并未将其`<MPN>`列为其输出的一部分。

但是，如果您需要`<MPN>`，可以根据`GetItem`电话使用。这是[参考。](http://developer.ebay.com/DevZone/XML/docs/Reference/eBay/GetItem.html)

这

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-05T13:27:17.853

[Shopping API 中的GetMultipleItems](http://developer.ebay.com/DevZone/shopping/docs/CallRef/GetMultipleItems.html#Samples)返回 20 件商品的“属性”。您需要在请求中添加“IncludeSelector=ItemSpecifics”和项目 ID 列表。

# xna - XNA Spritebatch Point Clamp 纹理渲染故障

> ID：16182513
> 
> 赞同：2
> 
> 时间：2013-04-24T02:44:46.510
> 
> 标签：xna, spritebatch

在 XNA 中，我使用 PointClamp 采样器状态渲染纹理，并且我有一个 tilemap，它使用各种 8 x 8 平铺图像的水平对齐 spritesheet 来渲染每个平铺。我还使用变换矩阵来缩放和移动相机。我的问题是，在比例为 1 时，我的 tilemap sprite 绘制正确，但在更高的比例（2、3 等）下，当我移动相机时，瓷砖图像每隔一段时间就会偏移一个像素。您可以在此屏幕截图中看到我遇到的问题：

![在此处输入图像描述](https://i.stack.imgur.com/ymmQf.png)

此外，出现的小白线不应该在那里，只有当图像像这样绘制偏移时才会出现。有谁知道我怎样才能避免这样绘制瓷砖？

我有一种感觉，白色的“点”来自精灵表中的相邻图块。我可以在 spritesheet 上的平铺图像之间添加一个 1 像素的缓冲区，但我担心当这个问题发生时，这可能会导致平铺之间出现透明线。

# node.js - node-apn 是否提供持久连接？

> ID：16182514
> 
> 赞同：0
> 
> 时间：2013-04-24T02:44:53.400
> 
> 标签：node.js, apple-push-notifications

我对 node-apn 有一些疑问。我有三个想要发送推送通知的 iOS 应用程序。

我使用 创建了 3 个连接`apn.Connection`，这个连接是否持久？我应该创建与 APN 的连接并每次发送一个推送通知吗？我可以创建一个连接，然后稍后发送许多推送通知吗？如果我在创建连接后一天后发送第一个推送通知怎么办？

具体是做什么`connectionTimeout`的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:07:38.537

该连接将维护一个底层的持久连接，是的。您可以`apn.Connection`为每个应用使用一个并通过该对象发送所有通知。如果内部连接不存在，它将创建一个并在必要时维护它，如果连接失败并且没有待处理的通知，它将不会建立新连接，直到需要发送更多通知。

`connectionTimeout``apn.Connection`如果没有流量，将在定义的秒数后关闭底层连接。这并不*意味着*该`apn.Connection`对象不能再使用，只需推送另一个通知，它将自动重新打开连接。

# c++ - Apple Mach-O 链接器命令失败，退出代码为 1

> ID：16182515
> 
> 赞同：1
> 
> 时间：2013-04-24T02:45:08.777
> 
> 标签：c++, xcode, linker, include

我正在使用 Xcode 构建一个 C++ 项目。

但我不明白错误信息：

“Apple Mach-O 链接器命令失败，退出代码为 1”

我发现#include 是原因。

我有两个 .cpp 文件，其中包含一个相同的 .h 文件。如果我删除#include of one，它将成功构建。

其他头文件都很好，除了上面描述的头文件。我已经使用了“ifndef”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T02:53:40.210

`#ifndef`包含守卫仅在翻译单元级别（通常是单个源文件）起作用。

如果您在*两个*翻译单元中定义相同的对象两次，则包含保护不会解决此问题，但是当您尝试将两个对象文件组合成一个可执行文件时，链接器会抱怨。

我怀疑你的情况类似于：

```
hdr.h:
    #ifndef HDR_H
        #define HDR_H
        void rc(void);
        int xyzzy;
    #endif

prog1.c:
    #include "hdr.h"
    #include "hdr.h"
    int main (void) { rc(); return xyzzy; }

prog2.c:
    #include "hdr.h"
    void rc(void) { xyzzy = 0; } 
```

在这种情况下，include 守卫将防止标头被包含在两次中，`prog1.c`但它仍然会被包含在两者中`prog1.c` *，* `prog2.c`这意味着*每个*都会有一个`xyzzy`.

当您将它们链接在一起时，链接器将不喜欢那样。

解决方案是不在头文件中定义东西，而只是在那里声明它们，将定义留给 C 文件：

```
hdr.h:
    #ifndef HDR_H
        #define HDR_H
        int rc(void);
        extern int xyzzy;              // declare, not define
    #endif

prog1.c:
    #include "hdr.h"
    #include "hdr.h"
    int main (void) { rc(); return xyzzy; }

prog2.c:
    #include "hdr.h"
    int xyzzy;                         // define
    int rc(void) { xyzzy = 0; } 
```

声明是诸如函数原型、外部变量、类型定义等之类的东西（简单地说，声明某事物的事物存在而不实际创建“对象”）。

定义是创建“对象”的事物，例如非外部变量等。

您需要跟踪定义了两次的“对象”（链接器输出应该有类似的东西`doubly-defined symbol 'xyzzy'`），然后确保它没有在标题中*定义。*

# android - 应用程序空闲时如何处理 ANR 问题

> ID：16182518
> 
> 赞同：0
> 
> 时间：2013-04-24T02:45:32.363
> 
> 标签：android, android-anr-dialog, blackberry-android

我的 BB10 移植的 android 应用程序，如果闲置 15 分钟，我遇到了这个 ANR 问题，如何处理这种情况。

我无法在我的设备中重现，但我在客户端设备中遇到此问题。我无法重现此问题。

# javascript - 在 Angular.js 中测试模块控制器、工厂、服务等

> ID：16182519
> 
> 赞同：1
> 
> 时间：2013-04-24T02:45:38.870
> 
> 标签：javascript, angularjs

当我在模块中定义我的组件时，我无法让我的单元测试在 Angular.js 中工作。这是我在 Jasmine 中使用 Karma 测试运行器的单元测试。我看过几篇文章，看起来这是测试模块控制器的方法。但是，我的测试运行器输出显示“未定义模块”。我不确定我错过了什么。我需要在 karam.conf.js 中配置一些东西吗？

```
describe('bulkEditor factories', function() {
    beforeEach(module('BulkEditor'));

    it('should see the controller', inject(function($controller) {
        expect($controller('GroupController'.toBeTruthy()));
    }));

}); 
```

这是我的 karma.conf.js 文件中的一部分，它显示了包含的文件列表：

```
files = [
  JASMINE,
  JASMINE_ADAPTER,
  'https://ajax.googleapis.com/ajax/libs/angularjs/1.0.6/angular.min.js',
  'app/js/app/**/*.js',
  'test/*.spec.js'
]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:00:38.527

和函数在文件`module`中定义。您可以从[http://code.angularjs.org/](http://code.angularjs.org/)获取它（例如：[http](http://code.angularjs.org/1.0.6/angular-mocks.js) ://code.angularjs.org/1.0.6/angular-mocks.js ）。`inject``angular-mocks.js`

我必须说我已经将 Karma 与通过 CDN 引用的文件一起使用，但无论如何 angular-mocks.js 都没有部署在 CDN 上，因此您必须从[http://code.angularjs.org/获取它](http://code.angularjs.org/)

# android - Android多行编辑文本不会随着用户键入而增加其高度

> ID：16182526
> 
> 赞同：3
> 
> 时间：2013-04-24T02:46:31.957
> 
> 标签：android, height, android-edittext, android-relativelayout, multiline

所以布局非常简单。A`ListView`占据了屏幕的大部分，`RelativeLayout`底部的`EditText`a 包含 the 和`Button`右侧的 a。一切看起来都很好，但问题是当用户键入并输入新行时，它`EditText`并没有增加它的高度，以至于用户可以在不滚动的情况下看到所有的文本类型。您会认为`WRAP_CONTENT`在 the`EditText`及其父级上使用`RelativeLayout`会解决这个问题，但由于某种原因它不会。有任何想法吗？这是布局 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="match_parent"
     android:layout_height="match_parent" >

<RelativeLayout
    android:id="@+id/postCommentRelativeLayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:visibility="visible" >

    <Button
        android:id="@+id/viewCommentsPostCommentButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="false"
        android:text="@string/post" />

    <EditText
        android:id="@+id/viewCommentsInsertCommentTextEdit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@id/viewCommentsPostCommentButton"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="false"
        android:layout_toLeftOf="@+id/viewCommentsPostCommentButton"
        android:ems="10"
        android:hint="@string/enter_comment"
        android:inputType="textCapSentences|textMultiLine" >

        <requestFocus />
    </EditText>

</RelativeLayout>

<ListView
    android:id="@+id/entriesListView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_above="@id/postCommentRelativeLayout"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:focusable="false" >

</ListView>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T15:01:00.560

所以最后我想不通。相反，我在嵌套布局中使用了 a`LinearLayout`而不是 the 。`RelativeLayout`这是新的布局 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<LinearLayout
    android:id="@+id/postCommentLayout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:orientation="horizontal"
    android:visibility="visible" >

    <EditText
        android:id="@+id/viewCommentsInsertCommentTextEdit"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ems="10"
        android:hint="@string/enter_comment"
        android:inputType="textCapSentences|textMultiLine" />

    <Button
        android:id="@+id/viewCommentsPostCommentButton"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:layout_weight="4"
        android:text="@string/post" />

</LinearLayout>

<ListView
    android:id="@+id/entriesListView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_above="@id/postCommentLayout"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:focusable="false" >

</ListView>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T03:04:27.423

尝试设置`maxlines`属性，也许。

# asp.net-mvc - ASP MVC WebSecurity 不在网络服务器中

> ID：16182527
> 
> 赞同：2
> 
> 时间：2013-04-24T02:46:34.197
> 
> 标签：asp.net-mvc, security, simplemembership

只是想知道，是否可以在 asp mvc 应用程序之外使用 WebMatrix.WebSecurty 和 WebMatrix.Roles 的功能？例如，在基于控制台的应用程序或业务逻辑组件上使用它来管理所有用户和角色的创建？我尝试制作一个简单的控制台应用程序，但在尝试初始化 WebSecurity 时我不断收到异常。这一切的原因是，我需要将所有逻辑放在与网络服务器不同的组件上，因为网络服务器只负责使用此类服务​​。但是，在已经拥有 WebSecurity 的情况下自己实施所有用户管理将是一种浪费。

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

# c# - 条件检查组合框

> ID：16182528
> 
> 赞同：0
> 
> 时间：2013-04-24T02:46:35.060
> 
> 标签：c#, wpf

我需要帮助捕捉错误。下面是提供的代码。

这是表单的控件。当用户关闭下拉菜单时，表单将自动添加到另一行：

```
 private void addNewProfRow(object sender, EventArgs e) //all will invoke this generic method to display the visibility of the next
    {
        ComboBox selectedTest = (ComboBox)sender;
        Canvas thisRow = (Canvas)selectedTest.Parent;
        int index = Int32.Parse(thisRow.Name.Substring(thisRow.Name.Length - 1, 1)); //gets the num at the end of the name

        if (thisRow is Canvas && index == profMultipleCount && index < 9) //needs to ensure that only the previous canvas can invoke the next canvas once selection is done
        {
            profMultipleCount++; //points to the next row of canvas
            Canvas newRow = (Canvas)this.FindName("profileComp" + profMultipleCount); //finds the object and cast as Canvas
            newRow.Visibility = Visibility.Visible; //makes it visible

        }
        //hides the textBox in the case that user added a test component he did not want
        if (thisRow is Canvas && selectedTest.Text == "")
        {
            Canvas newRow = (Canvas)this.FindName("profileComp" + profMultipleCount);
            testComp = (ComboBox)this.FindName("testComp" + profMultipleCount);
            display = (CheckBox)this.FindName("profDisplay" + profMultipleCount);
            testComp.Text = "";
            display.IsChecked = false;
            newRow.Visibility = Visibility.Hidden;
            profMultipleCount--;
        }
    } 
```

这是保存用户输入的方法。

```
 private void saveProfile(object sender, RoutedEventArgs e)
    {
        int i = 1;
        Canvas newRow = (Canvas)this.FindName("profileComp" + i);
        testComp = (ComboBox)this.FindName("testComp" + i);
        while (testComp.Text!= "" && i < 10 && newRow.Visibility == Visibility.Visible) //order matters becoz newRow depends on i
        {
            //input the rowItem in the format (profileCode, testComp, displayable, action) of the excel sheet
            display = (CheckBox)this.FindName("profDisplay" + i);
            testComp = (ComboBox)this.FindName("testComp" + i);
            userData.setMulRowData(profileTab.Tag.ToString() + "," + (profileCodeCB.Text + "," + testComp.Text + "," + display.IsChecked.Value.ToString()[0]));
            Console.WriteLine(i + "," + (profileCodeCB.Text + "," + testComp.Text + "," + display.IsChecked.Value.ToString()[0]));
            i++; profileIndex++;
            newRow = (Canvas)this.FindName("profileComp" + i);
        }
        profileIndex++;
        clearProfile(sender, e);
    } 
```

我的 xaml 在这里：

```
<Grid Background="White" Height="3200" VerticalAlignment="Top">
        <Grid x:Name="panelTab" Height="410" Tag="Panel Component" VerticalAlignment="Top" Margin="10,0" IsEnabled="False">
            <Label Content="Panel Component:" HorizontalAlignment="Left" VerticalAlignment="Top" Cursor="None" FontSize="16" FontFamily="Segoe UI Symbol" Width="167" FontWeight="Bold"/>
            <Label Content="Panel Code:" HorizontalAlignment="Left" VerticalAlignment="Top" FontWeight="Bold" Margin="10,50,0,0"/>
            <ComboBox x:Name="panelCodeCB" HorizontalAlignment="Left" Margin="134,54,0,0" VerticalAlignment="Top" Width="85" IsEditable="True" Tag="Panel Code"/>
            <StackPanel x:Name="testCompList" HorizontalAlignment="Left" Height="274" Margin="10,92,0,0" VerticalAlignment="Top" Width="361">
                <Canvas x:Name="comp1" Margin="0,0,8,0" Height="26">
                    <Label Content="Panel Component 1*:" HorizontalAlignment="Left" VerticalAlignment="Top" FontWeight="Bold"/>
                    <ComboBox x:Name="pComp1" HorizontalAlignment="Left" VerticalAlignment="Top" Width="207" IsEditable="True" Tag="Panel Component" Canvas.Left="134" Canvas.Top="5" DropDownClosed="addNewPRow"/>
                </Canvas>
                <Canvas x:Name="comp2" Margin="0,0,8,0" Height="26" Visibility="Hidden">
                    <Label Content="Panel Component 2:" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                    <ComboBox x:Name="pComp2" HorizontalAlignment="Left" VerticalAlignment="Top" Width="207" IsEditable="True" Tag="Panel Component" Canvas.Left="134" Canvas.Top="5" DropDownClosed="addNewPRow"/>
                </Canvas>
            </StackPanel>
            <TextBlock HorizontalAlignment="Left" Margin="496,0,0,0" VerticalAlignment="Top"><Hyperlink NavigateUri="C:\Users\Documents\Visual Studio 2012\Projects\User Upload\Data Upload\MainPanel.xaml"><Run Text="Add New..."/></Hyperlink></TextBlock>
            <Button Name="panelBtn" Content="Save and Add Another" HorizontalAlignment="Left" Margin="418,344,0,0" VerticalAlignment="Top" Width="135" Click="savePanel"/>
        </Grid> 
```

当我为用户输入做一个 writeLine 时，我得到的是：

1,tth,1 2,tth,2 3,tth,3 4,tth,

但用户实际输入的是：

1,tth,1 2,tth,2 3,tth,3

所以我想问我的while循环为什么不限制空行并且仍然允许它进入？

编辑：当用户没有关闭最后一个下拉框时，我得到用户实际输入的内容，这就是我想要的，但我不知道为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:25:23.223

最好使用像 MVVM 这样的模式重新开始。有许多教程和书籍，但我会从一开始就指出。

Chris Mosers 有一个很好的[WPF 教程](http://www.wpftutorial.net)网站，从他[对 ​​MVVM 的解释](http://www.wpftutorial.net/MVVM.html)开始。

它将与您习惯的不同，但最终您将摆脱所显示的代码。不，它不是“简单的实现方式”，但如果它是简单或好的问题，那就永远好。

# tfs - 如何授予对自定义组的所有团队项目的访问权限

> ID：16182530
> 
> 赞同：2
> 
> 时间：2013-04-24T02:46:37.537
> 
> 标签：tfs, team-explorer

我在 TFS 中有一个自定义组，我想为每个团队项目授予对该组的访问权限，这样我们就不必一一进行。

似乎开发人员可以通过源代码管理资源管理器访问，但无法通过“连接到团队项目”查看这些项目。

知道出了什么问题，或者缺少什么权限吗？

我们在本地使用 TFS2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-06T19:12:18.200

tfssecurity命令行工具允许我们管理 TFS 组和用户的权限[。](https://www.visualstudio.com/en-us/docs/setup-admin/command-line/tfssecurity-cmd)我们可以在 PowerShell 脚本中使用它来授予对已经存在的项目的访问权限。但是，我还没有找到在 TFS 集合级别使用此命令以授予未来项目权限的方法。

我使用的方法是基于以下事实：除非明确拒绝，否则 TFS 权限是继承的。

要创建一个将自动访问所有现有项目以及未来项目的用户组，请按照以下步骤操作：

1.  在项目集合级别创建一个新的安全组。在 Visual Studio 中，您可以从“团队/团队项目集合设置/组成员资格”菜单中执行此操作。在 TFS Online 上，您可以访问“帐户设置/安全”页面。

2.  将新组添加为“项目集合管理员”组的成员。这将授予对集合中所有项目的访问权限，包括期货项目。

3.  拒绝新组的权限，以限制该组继承的管理员权限。您可以使用现有的 TFS 组作为模板，并拒绝所有权限，除了那些明确允许您要复制的行为的组。例如，如果要创建具有相同权限的组，该组具有默认的“项目集合有效用户”组，则可以拒绝除“创建工作区”、“查看构建资源”和“查看集合级别信息”之外的所有权限"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:04:19.847

这是可能的，但您需要为您的用户提供比他们需要的更多的日志权限。您可以授予他们类似于项目集合管理员的权限，他们将有权访问所有项目，但具有提升的权限。

可以这样做，但仅适用于您已经完成的源代码控制，但我不确定连接到项目、使用工作项等。

# wix - 使用 WiX Burn 选择要安装/修改/卸载的 .msi

> ID：16182537
> 
> 赞同：3
> 
> 时间：2013-04-24T02:47:19.877
> 
> 标签：wix, installation, burn

我正在查看此处提供的解决方案：

[WiX Burn - 确定已安装的项目](https://stackoverflow.com/questions/12917287/wix-burn-determine-what-items-are-already-installed)

但我看不出这对“修改”刻录屏幕（当有人决定删除某个 .msi 时）有何作用。

显示卸载/修改页面时查看 Burn .log（我调用了描述是否选中复选框的变量，“Checkbox1”到“Checkbox6”）：

```
[171C:1034][2013-04-23T11:49:24]i000: Initializing numeric variable 'Checkbox1' to value '1'
[171C:1034][2013-04-23T11:49:24]i000: Initializing numeric variable 'Checkbox2' to value '1'
[171C:1034][2013-04-23T11:49:24]i000: Initializing numeric variable 'Checkbox3' to value '1'
[171C:1034][2013-04-23T11:49:24]i000: Initializing numeric variable 'Checkbox4' to value '1'
[171C:1034][2013-04-23T11:49:24]i000: Initializing numeric variable 'Checkbox5' to value '1'
[171C:1034][2013-04-23T11:49:24]i000: Initializing numeric variable 'Checkbox6' to value '1' 
```

（ETC。）

```
[171C:1034][2013-04-23T11:49:24]i100: Detect begin, 3 packages
[171C:1034][2013-04-23T11:49:24]i000: Setting string variable 'NETFRAMEWORK40' to value '1'
[171C:1034][2013-04-23T11:49:24]i052: Condition 'NETFRAMEWORK40' evaluates to true.
[171C:1034][2013-04-23T11:49:24]i101: Detected package: NetFx40Redist, state: Present, cached: None
[171C:1034][2013-04-23T11:49:24]i101: Detected package: Setup, state: Present, cached: Complete
[171C:1034][2013-04-23T11:49:24]i101: Detected package: Setup1, state: Present, cached: Complete
[171C:1034][2013-04-23T11:49:24]i199: Detect complete, result: 0x0 
```

所以，这让我想知道，各种 .msi 的“检测”结果存储在哪里？为什么不能将它们存储到我自己的变量“Checkbox1”中，我以后用它来设置复选框的值，不管它是否被选中？

作为一个更基本的问题，Burn 的这种使用模式难道不是标准 UI 应该很好支持的关键使用模式之一吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T04:53:33.943

`InstallCondition`您可以通过设置软件包的属性来控制是否应安装软件包。例如，如果`Checkbox1`确定是否`Msi1`应该安装，你的链可能有：

```
<MsiPackage Id='Msi1' InstallCondition='Checkbox1' SourceFile='path\to\msi1.msi' /> 
```

您可能希望定义`Checkbox1`变量以使其保持其值：

```
<Variable Name='Checkbox1` Value='1' Persisted='yes' /> 
```

注意：默认情况下假定`Msi1`应该安装，因为该值默认为`'1'`.

剩下的唯一一件事就是将您`Checkbox1`与 wixstdba 中的 UI 联系起来。您可以通过覆盖主题文件并将复选框添加到用作控件的`Options`页面来执行此操作。`Checkbox1``@Id`

# ios - 如何识别此数组中某些字符的索引？

> ID：16182545
> 
> 赞同：0
> 
> 时间：2013-04-24T02:49:04.650
> 
> 标签：ios, objective-c, arrays, algorithm, multidimensional-array

对于我的游戏，我读入文本文件以设置我的地图。文本文件是由逗号分隔的一系列字符，每个字符代表游戏中的一个图块。例如，我的地图文件的一部分可能如下所示：

> 法，克，克，
> 
> g,fy,w,
> 
> g,g,w,

其中，“fr”代表花红，“g”代表草，“w”代表水，等等。现在的问题是地图比显示的地图部分大得多。例如，地图文件可能如下：

> g,g,g,w,g,g,fr
> 
> g,fy,w,w,g,g,g
> 
> g,g,w,g,g,fr,g
> 
> g,g,fy,g,g,w,g

但是我一次只会显示这些图块的 3x3 部分，因此例如我可以在地图的右上角显示上述地图文件的 3x3 部分，这将是图块：

> g,g,g,w, **g,g,fr**
> 
> g,fy,w,w, **g,g,g**
> 
> g,g,w,g, **g,fr,g**
> 
> g,g,fy,g,g,w,g

但由于我将此文件读入一维数组（Objective-C 中没有二维数组），我的问题是我无法弄清楚如何识别我想要显示的部分的索引。

所以这个地图将在内部表示为（粗体字符是要显示的字符）：

> g,g,g,w, **gz,g,fr** ,g,fy,w,w, **g,g,g** ,g,g,w,g, **g,fr,g** ,g,g,fy,g, g,w,g

我用“z”标识起始字符，所以如果我想显示右上角部分，上面的地图可能会显示如下：

> g,g,g,w, **gz,g,fr**
> 
> g,fy,w,w, **g,g,g**
> 
> g,g,w,g, **g,fr,g**
> 
> g,g,fy,g,g,w,g

我的问题是**如何识别构成我要显示的部分的字符的索引？**

**编辑：** 我根据@Ted 的回答修复了我的代码，但结果很奇怪。这是我制定的算法：

```
NSMutableArray *nodes = [[NSMutableArray alloc] init];
int tilesAcross = DEVICE_WIDTH/TILE_WIDTH;
int tilesUp = DEVICE_HEIGHT/TILE_HEIGHT;

int startX = self.renderer.indexOfStartNode / BIOME_WIDTH;
int startY = self.renderer.indexOfStartNode % BIOME_WIDTH;

for(int index = 0; index < self.entireMap.count; index++) {

    int currentX = index / BIOME_WIDTH;
    int currentY = index % BIOME_WIDTH;

    if((currentX > startX && currentX <= (startX + tilesAcross)) && (currentY > startY && currentY <= (startY + tilesUp))) {

        [nodes addObject:[self.entireMap objectAtIndex:index]];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T02:52:13.990

`w`对于在线性数组中逐行存储宽度的矩阵，您可以使用以下公式在线性索引`i`和坐标`row`之间来回转换：`column`

```
i = row * w + column
row = i / w
column = i % w 
```

这对于从零开始的索引有效。

# c - 为什么 printf() 之后的行（对 sleep() 的调用）在打印任何内容之前执行？

> ID：16182554
> 
> 赞同：2
> 
> 时间：2013-04-24T02:51:11.220
> 
> 标签：c, printf, sleep

我以为我在这里做一些简单的事情，但 C 决定对我进行异步处理。我不确定发生了什么事。这是我的代码：

```
#include <stdio.h>
int main() {
    printf("start");
    sleep(5);
    printf("stop");
} 
```

当我编译和运行时，我注意到它`sleep(5)`就像一个魅力。但是编译器认为跳过第一个`printf()`并出现乱序是个好主意，所以在运行时，程序等待 5 秒*然后*打印`startstop`.

这是怎么回事？我的理论是程序使用 shell 启动打印操作，然后继续执行程序，让 Bash 等到程序不再忙于实际呈现字符串。但我真的不知道。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T02:52:31.127

`printf`使用***缓冲输出***。这意味着数据在刷新到输出源之前首先在内存缓冲区中累积，在这种情况下是`stdout`（通常默认为控制台输出）。`fflush`在您的第一条语句之后使用`printf`以强制它将缓冲数据刷新到输出源。

```
#include <stdio.h>
int main() {
    printf("start");
    fflush(stdout);
    sleep(5);
    printf("stop");
} 
```

另请参阅[为什么 printf 在调用后不刷新，除非换行符在格式字符串中？](https://stackoverflow.com/questions/1716296/why-does-printf-not-flush-after-the-call-unless-a-newline-is-in-the-format-strin)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T03:21:38.393

尝试将 '\n' 添加到您的 printf 语句中，如下所示：

```
#include <stdio.h>
int main() {
    printf("start\n");
    sleep(5);
    printf("stop\n");
} 
```

编译器没有乱序执行。只是输出被累积，然后在程序退出时显示。'\n' 将调用 tty 驱动程序中的行规则来刷新输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T02:54:18.813

[阅读此问答，它解释了它。](https://stackoverflow.com/questions/1716296/why-does-printf-not-flush-after-the-call-unless-a-newline-is-in-the-format-strin)

# android - 添加转换为 JSONObject

> ID：16182555
> 
> 赞同：1
> 
> 时间：2013-04-24T02:51:12.043
> 
> 标签：android, json

我试图弄清楚如何将以下数据添加到我的 json 对象中。有人可以告诉我如何做到这一点。

{ "main_img":"Base64 字符串" }

但是，下面是使用这段代码的结果，出来了。

```
final int COMPRESSION_QUALITY = 100;
String encodedImage;
ByteArrayOutputStream byteArrayBitmapStream = new ByteArrayOutputStream();
bitmapPicture.compress(Bitmap.CompressFormat.JPEG, COMPRESSION_QUALITY,
byteArrayBitmapStream);
byte[] b = byteArrayBitmapStream.toByteArray();
encodedImage = "data:image/JPEG;base64," + Base64.encodeToString(b, Base64.DEFAULT);

JSONObject jObject = new JSONObject();
jObject.put("main_img", result); 
```

{ "main_img":"Base64 字符串

它用 } 显示，" 缺失。

# jquery - if 和 else 语句检查是否有类

> ID：16182556
> 
> 赞同：6
> 
> 时间：2013-04-24T02:51:13.980
> 
> 标签：jquery, if-statement

我似乎无法弄清楚这里发生了什么......我有点睡着了，真的想在我睡觉前完成这最后一件事哈哈。

我的目标：单击某人，然后检查它是否具有类，如果没有，则添加它，然后在 1 秒动画完成后将其删除。现在我在第 3 行得到了意想不到的标识符。（删除类）

注意：`slamedown`类是关键帧

```
$('#accountloginsignup h1').click(function() {
  if ($('#takeonebar').hasClass('slamdown')){
    $('#takeonebar')removeClass('slamedown');
  } else {
    $('#takeonebar').addClass('slamdown');
  }
}); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-24T02:54:05.510

[.toggleClass()](http://api.jquery.com/toggleClass/)用于此特定目的

从文档

> 根据类的存在或 switch 参数的值，从匹配元素集中的每个元素中添加或删除一个或多个类。

```
$('#accountloginsignup h1').click(function() {
    $('#takeonebar').toggleClass('slamdown');
}); 
```

有一个错字

```
$('#accountloginsignup h1').click(function() {
    if ($('#takeonebar').hasClass('slamdown')){
        $('#takeonebar').removeClass('slamdown');  /* missing . before removeClass */
    } else {
        $('#takeonebar').addClass('slamdown');
      }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T02:54:15.190

你有几个错别字：

```
$('#accountloginsignup h1').click(function() {
        if ($('#takeonebar').hasClass('slamdown')){
            $('#takeonebar').removeClass('slamdown');
        } else {
            $('#takeonebar').addClass('slamdown');
          }
        }); 
```

但你真正想要的是`$('#takeonebar').toggleClass('slamdown')`

[jQuery 文档](http://api.jquery.com/toggleClass)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-07-16T07:38:02.793

> 这在使用 hasclass 时帮助了我

$( "div" ).click(function() {

```
if ( $( this ).hasClass( "protected" ) ) {

    $( this )
        .animate({ left: -10 })
        .animate({ left: 10 })
        .animate({ left: -10 })
        .animate({ left: 10 })
        .animate({ left: 0 });

} 
```

});

[参考链接](https://learn.jquery.com/using-jquery-core/faq/how-do-i-test-whether-an-element-has-a-particular-class/)

# iphone - iOS：关于 [UIDocumentInteractionController presentOptionsMenuFromRect:inView:animated:]

> ID：16182561
> 
> 赞同：0
> 
> 时间：2013-04-24T02:52:27.580
> 
> 标签：iphone, ios, xcode, ipad

现在我在 Document 文件夹中有**一些文件**`[UIDocumentInteractionController interactionControllerWithURL:myFileA];`，我用它来获取 doc 控制器和我`[UIDocumentInteractionController presentOptionsMenuFromRect:inView:animated:];`用来展示一个选项表。所以现在我有**2 个**问题：

**[1]**如何给文档控制器提供**多个**文件 URL？有没有办法做到这一点？

**[2]**我发现该方法`[UIDocumentInteractionController presentOptionsMenuFromRect:inView:animated:];`在**iOS6 或更高版本**中运行良好，但在***iOS5.1*****中不行**。为什么？

 *希望您的回答。首先非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T19:48:33.970

在 iOS 5.1 和 6.0 上进行测试时，我在**[2]**中遇到了与您的问题类似的经历。`presentOptionsMenuFromRect:inView:animated:`在 iOS 6.0 中，我得到了一个完整的菜单，其中包含应用程序和其他选项，具体取决于文件。在 iOS 5.1 中，我的体验与您有所不同：我得到了一个只有一个选项的菜单。

我的解决方案是`presentOpenInMenuFromRect:inView:animated:`改用 iOS 5.0。这至少给了我不止一个应用程序来打开文档。

对于**[1]**，我同意其他人的观点，即目前还不可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-18T19:20:47.303

第一个问题：我认为你不能用那个特定的 API 来查看文档。

第二个问题：如文档所述，

> 如果菜单中没有合适的项目，则可能不会显示选项菜单。

这些包括具有未知扩展名的文件。然而，iOS6+ 确实很好地处理了这个问题。*

# java - 编写测试类的类方法

> ID：16182563
> 
> 赞同：0
> 
> 时间：2013-04-24T02:52:31.237
> 
> 标签：java

```
public class CirclTest{
    public static void main(String[] args){
        Circle first=new Circle('R',3.0);

        Circle first=new Circle('R',3.0);

        Circle second=new Circle();

        System.out.println("first's radius is " + first.getRadius());

        System.out.println("first's area is " + first.getArea());
        System.out.println("second's area is " + second.getArea());

        if(first.hasLargerAreaThan(20)){
            System.out.println("first's area is larger than 20\. ");
        }else{
            System.out.println("first's area is smaller than 20\. ");
        }
    }
} 
```

所以我应该写一个圆圈类。这就是我所做的。

```
public class Circle{
    private double radius=0.0;
    private double area=0.0;
    private char colour=' ';

    public Circle(char colour,double radius){
        this.colour=colour;
        this.radius=radius;
    }

    public Circle(){
        radius=0;
        colour='B';
    }

    public char getColour(){
        return colour;
    }
    public double getRadius(){
        return radius;
    }

    public double getArea(){
        return area;
    }

    } 
```

我实际上对如何编写一个类感到困惑。就像我知道我需要通过私有等初始化变量。我需要构建一个构造函数，但不知何故，上面的代码不起作用。测试方法是正确的。但我必须用它来实现我的课程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T03:09:41.830

首先，如果需要，您将需要使用测试框架来断言代码的有效性。查看[JUnit](http://junit.org/)。

如果区域大于某个值的示例断言将像这样编写。

```
@Test
public void assertArea_calculatedProperly() {
    //given that the radius is 5,
    Circle c = new Circle('R', 5);

    //when I get the area...
    double result = c.getArea();

    //then I expect it to be around 78.53981634.
    assertTrue(result < 78.6);
    assertTrue(result > 78.5);
} 
```

其次，您`getArea`实际上并没有获得该区域。您的代码中没有要检索的内容，然后计算面积。你甚至没有使用`Math.PI`. 我建议您实现这一点 - 但使用单元测试作为断言您将获得适当响应的有效方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:57:56.960

您正在声明变量

```
Circle first 
```

两次。如果要重新分配其值，只需执行

```
first=new Circle('R',3.0); 
```

在你调用的 if 语句中

```
first.hasLargerAreaThan(20) 
```

当我没有在您的班级中看到这样的方法时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T02:58:05.760

你能请你的代码不起作用的意思吗？如果您指的面积计算不正确并且始终为 0，则发生这种情况是因为您有一个与 0 相同的默认值并且从不计算它。您可能希望将计算逻辑放在 getArea() 方法中。

# python - 如何在没有zip的情况下在python中转置矩阵

> ID：16182572
> 
> 赞同：0
> 
> 时间：2013-04-24T02:53:54.667
> 
> 标签：python

我想知道如何将 python 中的用户输入更改为列表，或者更好的是矩阵，就像使用 int(input) 将其转换为整数一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T02:54:51.153

```
>>> L = [[1,2,3], [4,5,6], [7,8,9]]
>>> [[x[i] for x in L] for i in range(len(L[0]))]
[[1, 4, 7], [2, 5, 8], [3, 6, 9]] 
```

或者

```
>>> zip(*L)
[(1, 4, 7), (2, 5, 8), (3, 6, 9)] 
```

或者

```
>>> import numpy as np
>>> L = np.arange(1, 10).reshape((3, 3))
>>> L
array([[1, 2, 3],
       [4, 5, 6],
       [7, 8, 9]])
>>> L.transpose()
array([[1, 4, 7],
       [2, 5, 8],
       [3, 6, 9]]) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T02:58:54.153

`array([[1,2,3], [4,5,6], [7,8,9]]).T`如果您使用的是[numpy](http://numpy.org) ，它将做您想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T04:10:42.830

列表推导应该非常适合该法案。这是一般功能：

```
def transpose(the_array):
    return [[the_array[j][i] for j in range(0, len(the_array[i]))] for i in range(0, len(the_array))] 
```

# java - 当一组字符串与第三组相关联时，实现一个复杂的方法来比较两组字符串

> ID：16182573
> 
> 赞同：0
> 
> 时间：2013-04-24T02:54:00.767
> 
> 标签：java, string, map, wildcard

我有一个相当复杂的方法需要实现。因此，请耐心等待我尝试以尽可能简单的方式来描述它。

我得到了一组代表文件名的字符串——比如“abc”、“def”和“ghi”。我必须从这些名称中为每个名称派生一组“关联”文件名 - 比如说“abc_123”、“abc_456”和“abc_789”代表“abc”；“def”的“def_123”、“def_456”和“def_789”；和“ghi”的“ghi_123”、“ghi_456”和“ghi_789”。我能做的就这么多了。但是，这些关联的文件名可能附加了前缀或后缀，这些前缀或后缀是不可预测的字符串 - 因此“abc”的关联文件名实际上可能是“HELLOabc_123WORLD”、“FOOabc_456BAR”和“999abc_789000”。（就正则表达式而言，它' 只需在我上面写的相关文件名的两边都放一个 *）。简而言之，相关的文件名将如下所示：

```
*<original filename><other piece that I know>* 
```

其中星星表示任意数量的随机字符（可以是 0）。

这是第一块拼图。

接下来，我得到了另一组字符串 C，我将与一组关联文件名（组 B）进行比较。（如果您想知道，我正在尝试检查相关文件是否在某个目录中，并且我有该目录中的文件名列表，设置为 C）。如果我在集合 C 中找到某个文件的所有关联文件名，我可以继续从集合 A 中检查该文件。我必须检查集合 A 中的每个文件名，并且如果集合 B 中的所有关联文件名都是在集合 C 中找到，我可以从集合 A 中检查该文件。

最后，我必须返回未选中的集合 A 中的文件名（因此，如果找到所有内容，我将不返回任何内容）。

我一直在努力想出一种方法来实现这种方法。我想创建一个 Map ，它将文件名从集合 A 映射到包含与该文件名关联的所有文件名的 List ，如下所示：

```
Key        Value
abc        *abc_123*, *abc_456*, *abc_789*
def        *def_123*, *def_456*, *def_789*
ghi        *ghi_123*, *ghi_456*, *ghi_789* 
```

然后我可以遍历这个映射的元素和元素的值，将它们与集合 C 中的字符串进行比较。如果在集合 C 中找到给定键的值（列表）的所有元素，我可以标记那把钥匙从我的名单上删除。任何剩余的密钥都将被退回。

在我看来，这应该可行，但是将其放入代码中的实际机制对我来说非常具有挑战性。因此，如果您能给我任何小建议或指示，让我的思路朝着正确的方向发展，我将不胜感激。如果您想提供代码，我的实现语言将是 Java。伪代码也受到欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T04:58:14.877

我认为您已经正确地确定了部分解决您的问题的解决方案。您肯定需要一个 Map ，基本上您的问题归结为查找给定列表中的所有元素是否存在于 C 中的一组字符串中。我不确定什么数据结构保存了字符串的集合 B 或​​ C。但我可以为其余部分提供伪代码：

```
Initialize a HashMap<String, ArrayList>
for each string in set B
  if it matches the pattern *abc_*
     if "abc" is already in the Map
        get the value of this key in a temp list and append this string at the end of the list
     else
        add a new entry into the Map

   //follow the same for the other patterns.

for each entry in the Map
  traverse the list of values
    check if this value is present in the set C 
      if you reach the end of the list,
        remove the entry from the Map 
```

这样，您只剩下 Map 中需要返回的键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T04:58:46.907

我不太确定我是否正确理解了您的问题，但这就是我的想象：

```
List<String> setCStrings = //your set C strings I guess...
for(String aSetCString : setCStrings) {
    String pattern = ".*" + filename + "_" + associatedFileName + ".*";
    if(aSetCString.matches(pattern)) {
        // do what you want with this string that matches the filename and associated file name
    }
} 
```

# scheme - 从方案中的嵌套列表中计算元素

> ID：16182576
> 
> 赞同：1
> 
> 时间：2013-04-24T02:54:15.367
> 
> 标签：scheme

我正在尝试从方案中的嵌套列表中计算元素，并按频率顺序对它们进行排序。例如，我有一个 listP 看起来像这样 '((1 3 6)(1 4 7)(1 5 8)(2 5 7)) 并且我希望方案告诉我元素的频率顺序是 ( 1 5 7 2 3 4 6 8)。实际上我只需要最频繁的三个，所以（1 5 7）。

我找不到能找到最频繁元素的函数，然后得到下一个最频繁的元素，等等。我尝试了 max、min、map、length 和 count，但根本没有任何工作。

我希望有人能指出我需要的功能的方向。一旦我知道我可以使用什么功能，我就很乐意玩弄代码，但这让我现在就被打败了。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:35:35.417

这看起来像是 @ChrisJester-Young's 的工作[`bagify`](https://stackoverflow.com/a/5741004/201359)。这是一种可能的解决方案，在 Racket 中测试并使用 Chris 的第三个实现`bagify`：

```
(define (frequency lst)
  (map car
       (sort (hash->list (bagify (append* lst)))
             (lambda (x y) (> (cdr x) (cdr y))))))

(frequency '((1 3 6) (1 4 7) (1 5 8) (2 5 7)))
=> '(1 5 7 2 3 4 6 8) 
```

# netbeans - 尝试将库安装到 netbeans (Xstream)

> ID：16182577
> 
> 赞同：1
> 
> 时间：2013-04-24T02:54:16.107
> 
> 标签：netbeans, shared-libraries

我目前正在使用 NetBeans IDE 7.3 进行 Java 开发。

我下载了一个名为 XStream 的文件。

[http://x-stream.github.io/](http://x-stream.github.io/)

我试图通过右键单击库并选择添加库来将库添加到我的项目中。然后我为下载的 Xstream 选择了顶级文件夹；我无法将任何 Xstream 文件导入我的项目。我确信我错过了一个简单的步骤，但谷歌搜索“在 netbeans 中安装 XStream”并没有显示任何操作方法。

我还右键单击库并选择添加 Jar/Folder，但我仍然无法导入 XStream。

有人可以指出我在 Netbeans 中安装 XStream 的简单解释，以便我可以在 Java 项目中使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-29T21:32:42.783

我尝试了和你一样的东西，@Aaron，得到了同样的结果。但是，当我向下钻取并选择`xstream-1.4.8.jar`而不仅仅是**顶级文件夹**时，我取得了成功。我意识到这已经晚了几年，我只是希望这对未来的读者有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T16:08:16.633

为了在 Netbeans 中轻松添加库，您必须 -

1.  在项目查看器窗口中找到您的项目。然后点击下拉项目信息。
2.  找到“库文件夹”
3.  右键单击“库文件夹”
4.  您可以在那里添加一个库或使用该列表添加一个 jar

添加库后，您可能需要确保 jar 位于易于查找的位置。我通常在我的项目中创建一个文件夹并将 JAR 文件或库存储在那里以简化定位它们。

# c++ - 如何在 Qt 中显示 C 结构

> ID：16182581
> 
> 赞同：1
> 
> 时间：2013-04-24T02:54:37.330
> 
> 标签：c++, c, qt, structure

在 Qt 调试模式下，我们可以观察和编辑任何变量。我的问题：是否有任何现有的类可以做同样的事情，这意味着可以在表中显示 C 结构变量的所有成员并可以编辑成员的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:08:26.243

如果我猜对了，你的意思是回答否。在我看来，您正在寻找一种使用通用模型类在 QTableView 中显示任何 struct{} 变量/数组的能力。如果 C++ 有类似于 Java 反射的机制，那可以实现。

在您的情况下，解决方案之一是将结构更改为字段定义为 Q_PROPERTY 的类。然后你可以得到类似的行为。但这完全取决于您要实现的目标。

# ios - iOS 上内置 AEC 还是 WebRTC AEC？

> ID：16182583
> 
> 赞同：3
> 
> 时间：2013-04-24T02:54:46.363
> 
> 标签：ios, webrtc, aec

我是 iOS 新手（来自 android）。我已经使用 WebRTC 独立 AECM 模块在 android 上成功完成了 AEC 流程。

现在我必须在 iOS 上做同样的事情，但进展甚微。主要问题是我应该选择哪种解决方案在 iOS 上进行 AEC：

1.  使用 iOS 内置 AEC。
2.  再次使用 WebRTC 独立 AECM 模块。

对于第一个解决方案，我了解到 iOS 在语音处理 I/O 单元中内置了 AEC。但是听说VPU的性能不够好。可以？

对于第二个，在 android 上，我可以使用 AudioRecord 和 AudioTrack 的 API 和一些缓冲区技术来计算 WebRTC“audio_processing.h”中描述的“延迟”，但我没有信息。关于我应该使用什么 API 来计算 iOS 上的相同延迟。

我现在一直在搜索 google 和 iOS 文档。但也渴望在这里得到任何建议。尤其是已经在 iOS 上做过 AEC 的人。

多谢。

# javascript - 如何使用标记保存和恢复内容？

> ID：16182587
> 
> 赞同：1
> 
> 时间：2013-04-24T02:55:15.340
> 
> 标签：javascript, codemirror

我有一个 CodeMirror 实例，它有一些内容/文本和一些标记来突出显示某些区域。我想将包括标记在内的所有内容保存到某个后端服务。然后我想恢复内容和标记，使恢复的文档看起来像原始文档（包括标记）。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T22:45:47.630

你可以看看我的代码。我前段时间做过这个。

[http://jsfiddle.net/aljordan82/4ewe9/](http://jsfiddle.net/aljordan82/4ewe9/)

```
<html>
<head>
<style>
    .bg {
        background:#CCC;
    }
</style>
<script>
    $(document).ready(function() {
        var strSavedMarkers = $("#savedMarkers").val(); // get markers from textarea
        var arrMarkers = JSON.parse(strSavedMarkers)
        $("#markerStyle").html(".bg{background:#AAAAAA;}")
        var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
            mode: "text/html",
            lineNumbers: true,
            onCursorActivity: function() {}
        });
        //get content from textarea 
        editor.setValue($("#savedContent").val());
        applyMarkers();
        $("#mark").click(function() {
            // Marked selected text
            var marker = editor.markText(editor.getCursor(true), editor.getCursor(false), {
                className: "bg"
            });
            // get values of marker. [ch , line , ch ,  line]
            var tempArray = [marker.find().from.ch, marker.find().from.line, marker.find().to.ch, marker.find().to.line]
            // we push this array to arrMarkers
            arrMarkers.push(tempArray)
        });

        // when done editing 
        $("#save").click(function() {
            JSON.stringify(arrMarkers)
            $("#savedMarkers").val(JSON.stringify(arrMarkers))

        });

        function applyMarkers() {
            var strSavedMarkers = $("#savedMarkers").val(); // get markers from textarea
            var arrSavedMarkers = JSON.parse(strSavedMarkers)
            for (x in arrSavedMarkers) {
                var marker = arrSavedMarkers[x]
                editor.markText({
                    'ch': marker[0],
                        'line': marker[1]
                }, {
                    'ch': marker[2],
                        'line': marker[3]
                }, {
                    className: "bg"
                });
            }
        }
    });
</script>
<head>
<body>

    <p>we need two textareas, one to store array of markers and the other is so store the content.</p>
    <p></p>
    <textarea id="savedMarkers">[[20,3,40,3],[12,8,90,8]]</textarea>
    <textarea id="savedContent">
        <title>hidden textarea, poplate from back end</title>
        <catalog>
            <book id="bk101">
                <author>Gambardella, Matthew</author>
                <title>XML Developer's Guide</title>
                <genre>Computer</genre>
                <price>44.95</price>
                <publish_date>2000-10-01</publish_date>
                <description>An in-depth look at creating applications with XML.</description>
            </book>
            <book id="bk102">
                <author>Ralls, Kim</author>
                <title>Midnight Rain</title>
                <genre>Fantasy</genre>
                <price>5.95</price>
                <publish_date>2000-12-16</publish_date>
                <description>A former architect battles corporate zombies, an evil sorceress, and her own childhood to become queen of the world.</description>
            </book>
            <book id="bk103">
                <author>Corets, Eva</author>
                <title>Maeve Ascendant</title>
                <genre>Fantasy</genre>
                <price>5.95</price>
                <publish_date>2000-11-17</publish_date>
                <description>After the collapse of a nanotechnology society in England, the young survivors lay the foundation for a new society.</description>
            </book>
            <catalog>
    </textarea>
    <form>
        <br/>
        <textarea id="code" name="code"></textarea>
    </form>
    <button id="mark">Mark Selection</button>
    <button id="save">Save Markers and Content</button>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:38:59.360

一种简单的方法（假设您使用的是 3.x 版）是`cm.getDoc()`在某处调用并缓存结果，而不是`cm.swapDoc(doc: CodeMirror.Doc)`在新编辑器上使用。

从[文档](http://codemirror.net/doc/manual.html)：

> `CodeMirror.Doc`每个编辑器都与它的文档的一个实例相关联。一个文档代表编辑器的内容，加上一个选择、一个撤销历史和一个模式。一个文档一次只能与一个编辑器关联。您可以通过调用 `CodeMirror.Doc(text, mode, firstLineNumber)`构造函数来创建新文档。

# ruby-on-rails - Rails Capybara 测试有空的实例变量

> ID：16182589
> 
> 赞同：1
> 
> 时间：2013-04-24T02:55:22.863
> 
> 标签：ruby-on-rails, rspec, capybara, factory-bot, poltergeist

我有一个控制器向我的控制器发送供应商列表，并且在正常视图中它工作正常。

```
class VendorsController < ApplicationController

  respond_to :html, :json

  def index
    @vendor_categories = VendorCategory.where(:is_top_level => true)
    @vendors = Vendor.includes(:vendor_tier, :vendor_categorizations, :vendor_categories).order('vendor_tier_id DESC, name ASC')

    respond_with @vendors
  end
end 
```

在我看来，我有以下两行：

```
= debug @vendors
= debug current_user.user_vendor_choices 
```

如果我在浏览器中查看它，它再次起作用。但是，如果我用 Capybara 和 RSpec 测试它，它是空的。

```
require 'spec_helper'

describe 'Vendors' do
  before do
    category = create(:vendor_category)

    5.times do 
      vendor = create(:vendor)
      vendor_categorization = create(:vendor_categorization, vendor: vendor, vendor_category: category)
      p vendor
      p category
      p vendor_categorization
    end

    visit signup_path

    @new_user = sign_up
  end

  before(:each) do
    visit destroy_user_session_path
    visit new_user_session_path
    sign_in @new_user
    visit vendors_path
  end

  it 'should save selected vendors', js: true do
    p Vendor.includes(:vendor_tier, :vendor_categorizations, :vendor_categories).order('vendor_tier_id DESC, name ASC').count
  end

end 
```

`Vendor.all`和上面`Vendor.includes...`两个返回值，但由于某种原因在我的测试中它没有显示任何东西......得到一个`Capybara::Element not found`.

**更新**

出于测试目的，我直接使用控制器创建了供应商：

```
 def index

    @vendor_categories = VendorCategory.where(:is_top_level => true)
    4.times do
      Vendor.create({name: 'Test McTesterson', vendor_tier_id: 1})
    end
    @vendors = Vendor.includes(:vendor_tier, :vendor_categorizations, :vendor_categories).order('vendor_tier_id DESC, name ASC')

    respond_with @vendors
  end 
```

规范通过。什么——？这一定是 FactoryGirl 问题，或者由于某种原因，我的记录在运行测试之前被删除了？在我创建对象后对它们进行安慰显示了一条带有 ID 的记录，我想这并不能证明它正在将它们放入数据库中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:23:17.110

原来我在我的 spec_helper 中定义的 Database Cleaner 活动有点过于活跃了。我有：

```
RSpec.configure do |config|

  config.use_transactional_fixtures = false

  config.before(:suite) do
    DatabaseCleaner.strategy = :transaction
    DatabaseCleaner.clean_with(:truncation)
  end

  config.before(:each) do
    DatabaseCleaner.start
  end

  config.after(:each) do
    DatabaseCleaner.clean
  end

end 
```

我必须摆脱第二个块，所以它现在显示：

```
RSpec.configure do |config|

  config.use_transactional_fixtures = false

  config.before(:suite) do
    DatabaseCleaner.strategy = :transaction
    DatabaseCleaner.clean_with(:truncation)
  end

end 
```

它有效！不太清楚为什么......任何想法（除了显而易见的，在每次测试之前/之后调用数据库清理器之前）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-29T01:45:20.090

嗨，我粗略地看了一眼这个问题，不确定您甚至是否需要帮助，但我认为这失败的原因是您的答案只是修补的基本设置问题。

当您运行`js: true`规范时（顺便说一句，`js: true`应该`describe`在线，而不是`it`在线），短版本，Capybara 在不同的线程中工作，因此在`before`块中创建的实例变量与常规 Rspec 测试不同，在规范。为了使它们可用，您必须使用`truncation`清洁策略。

```
RSpec.configure do |config|
  config.use_transactional_fixtures = false

  config.before(:each, js: true) do
    DatabaseCleaner.strategy = :truncation
  end

  config.before(:each) do
    DatabaseCleaner.start
  end

  config.after(:each) do
    DatabaseCleaner.clean
  end
end 
```

TL;DR 在运行 js 测试时，基本上需要截断（除非显然您正在运行不需要任何数据库交互的 js 测试）。在运行所有其他测试时，使用事务（因为它也快得多）。我猜你的回答在某种程度上复制了这一点=）

# java - Ehcache，可快速重启并溢出到磁盘

> ID：16182593
> 
> 赞同：6
> 
> 时间：2013-04-24T02:55:57.270
> 
> 标签：java, ehcache, ehcache-bigmemory

我正在使用具有大内存的 ehcache entreprise 2.7。我想要一个缓存在满时溢出到磁盘，并且我希望这个缓存在重新启动时保持不变。

我目前的配置是：

```
<cache name="dataservice"
            eternal="true"
            maxEntriesLocalHeap="1"
            overflowToOffHeap="true"
            maxBytesLocalOffHeap="60M">
    <persistence strategy="localRestartable"/>
</cache> 
```

此配置通过重新启动使缓存持久化（并且效果很好），但它似乎没有溢出到磁盘。我真的很想使用“localRestartable”，因为它比旧属性diskPersistent =“true”更好。“localRestartable”与属性 overflowToDisk="true" 不兼容...

关于如何使缓存溢出到磁盘的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T09:18:17.060

我正在使用这样的东西，它不适用于重新启动（也不是企业版）但是，我正在使用某种“缓存管理器”（自己的解决方案） - 我正在将所有缓存备份到 XML 文件中20 秒。如果有更好的解决方案 - 我也会很感激一些建议。

```
<cache name="dataservice"
   maxElementsInMemory="1000"
   maxElementsOnDisk="10000"
   overflowToDisk="true"
   eternal="true"
   >
 </cache> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T15:45:08.223

至少从 4.1 开始，BigMemory Go + Ehcache Enterprise 不支持您正在寻找的内容。如果启用该`localRestartable`选项，Ehcache 会将您的内存缓存镜像到磁盘（同步或异步）。请注意，这不是磁盘的“溢出”或“溢出”。

> "localRestartable" — 启用快速重启功能，自动记录所有 BigMemory 数据。此选项通过容错数据持久性提供快速可重新启动性。（来自[http://www.terracotta.org/documentation/4.1/bigmemorygo/configuration/fast-restart](http://www.terracotta.org/documentation/4.1/bigmemorygo/configuration/fast-restart)）

# javascript - 如何在传单中设置 geojson 对象或图层的不透明度？

> ID：16182595
> 
> 赞同：5
> 
> 时间：2013-04-24T02:56:02.203
> 
> 标签：javascript, leaflet

我正在尝试应用`opacity`到`leaflet.js`. 该[文档](http://leafletjs.com/examples/geojson.html)似乎表明`opacity`可以在样式配置中进行设置。

```
var exteriorStyle = {
    "color": "#ffffff",
    "weight": 0,
    "opacity": 0.99
};

var exteriorMaskLayer = L.geoJson(exteriorMaskGeojsonPoly, {style: exteriorStyle}).addTo(map); 
```

我希望对象掩盖/隐藏背景图。在这里，使用`exteriorStyle`，颜色*确实*应用于结果`exteriorMaskLayer`，并显示多边形。

但是，该`opacity`值似乎被忽略了。

我也试过使用没有效果的`setOpacity()`方法。`exteriorMaskLayer`

```
var exteriorMaskLayer = L.geoJson(exteriorMaskGeojsonPoly, {style: exteriorStyle}).addTo(map);
exteriorMaskLayer.setOpacity(1.0); 
```

如何在传单中设置 geojson 对象或图层的不透明度？

*使用 Leaflet-Leaflet-v0.5.1-0-gc1d410f.zip*

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-24T03:30:33.853

Doh，我发现它浏览了其他一些传单文档。我需要的样式属性是`fillOpacity`.

我猜`opacity`只适用于边界。
`weight`，在这里，关闭了边框，所以我没有注意到任何变化。

所以这是可行的，将不透明度应用于多边形的内部：

```
var exteriorStyle = {
    "color": "#ffffff",
    "weight": 0,
    "fillOpacity": .75
};

var exteriorMaskLayer = L.geoJson(exteriorMaskGeojsonPoly, {style: exteriorStyle}).addTo(map); 
```

我找不到任何关于可用样式属性的文档。

# java - 来自 Maven/Spring 上下文的嵌入式数据库配置

> ID：16182599
> 
> 赞同：1
> 
> 时间：2013-04-24T02:56:10.120
> 
> 标签：java, spring, maven, configuration, embedded-database

我想在 Maven 和 Spring 上下文中使用相同的嵌入式数据库。通过 Maven Liquibase 插件，我正在创建数据库模式并用数据填充它。通过 Spring，我将使用数据库。我还需要一种通过 Intellij IDEA IDE 连接到数据库的方法。

在 Spring 3 中，可以使用以下方法配置嵌入式数据库：

```
<jdbc:embedded-database id="datasource" type="HSQL"/> 
```

为了通过 Maven 插件创建模式并填充数据库，我需要将其配置为：

```
<plugin>
    <groupId>org.liquibase</groupId>
    <artifactId>liquibase-maven-plugin</artifactId>
    <version>2.0.5</version>
    <configuration>
        <propertyFile>src/main/resources/db/config/${envProfile}-config.properties</propertyFile>
        <changeLogFile>src/main/resources/db/changelog/db.changelog-master.xml</changeLogFile>
    </configuration>
</plugin> 
```

在这种情况下，我的属性文件具有以下属性：

```
driver: org.hsqldb.jdbcDriver
#HSQLDB Embedded in file
url: jdbc:hsqldb:file:src/main/resources/db/hsqldb/dataFile 
```

第一个问题。如何同时使用 Spring 和 Maven 上下文使用相同的数据库？作为一种解决方案，我可以像往常一样在 Spring 中配置数据库 dataSource bean - 将属性文件中的配置选项传递给它。但我想完全使用 Spring 3 功能 - . 如果我可以在 Spring 上下文中连接它，那么我可以通过 Maven 插件连接它。我该怎么做？为什么到处都建议像往常一样配置dataSourse bean而不解决问题？为什么 Spring 中添加了新功能，但我只能在 Spring 上下文中使用它，而无法从基于 jdbc 的数据库可视化工具连接到数据库？

PS：似乎嵌入式HSQL数据库是全内存（我认为它可能是全文件）和进程内。因此，无法在一个进程中创建模式并将其填充。完成它。然后尝试从另一个进程中连接。请纠正我，如果我错了。

# ios - MPMusicPlayerController 未响应 currentPlaybackRate 接近 1

> ID：16182601
> 
> 赞同：1
> 
> 时间：2013-04-24T02:56:15.210
> 
> 标签：ios, mpmusicplayercontroller, ios6.1

我正在尝试使用 MPMusicPlayerController 上的 currentPlaybackRate 属性来调整音乐曲目播放时的速度。当比率小于 0.90 或大于 1.13 时，该属性按预期工作，但对于刚好高于和低于 1 的范围，似乎没有节奏变化。这是我正在尝试的：

```
UIAppDelegate.musicPlayer = [MPMusicPlayerController iPodMusicPlayer]; 
```

...从库中加载带有曲目的音乐播放器

```
[UIAppDelegate.musicPlayer play];

- (void)speedUp{

        UIAppDelegate.musicPlayer.currentPlaybackRate =  UIAppDelegate.musicPlayer.currentPlaybackRate + 0.03125;           
}

- (void)speedDown
{

        UIAppDelegate.musicPlayer.currentPlaybackRate = UIAppDelegate.musicPlayer.currentPlaybackRate - 0.03125;

} 
```

我可以监控 currentPlaybackRate 的值并查看它的设置是否正确，但在达到 0.9 或 1.13 阈值之前，播放速度似乎没有什么不同。有没有人对此事有任何指导或经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T03:04:41.510

我不是专家，但我怀疑这种现象可能只是用于在不提高或降低音高的情况下改变播放速度的算法的假象。这是一项棘手的工作，在这里必须实时完成，没有太多失真，因此可能需要节奏的整数倍。您可能想阅读关于时间拉伸的维基百科文章，[http ://en.wikipedia.org/wiki/Audio_timescale-pitch_modification](http://en.wikipedia.org/wiki/Audio_timescale-pitch_modification)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-19T03:29:26.017

实际上我发现了问题：语句 myMusicPlayer.currentPlaybackRate = 1.2 必须放在语句 .play() 之后。如果将速率设置放在 .play() 之前，它将不起作用。

# mysql - 如何将古吉拉特语数据存储到 mysql 服务器中？

> ID：16182604
> 
> 赞同：4
> 
> 时间：2013-04-24T02:56:46.687
> 
> 标签：mysql, locale

我想执行一项功能，其中我必须上传一个包含古吉拉特语字体数据的 Excel 表，上传后我必须将该数据存储到 mysql 数据库中。

现在在这里我必须使用两种语言来显示输出 - 一种是英语，一种是古吉拉特语。

我必须在某个地方用英语和古吉拉特语显示mysql db数据。

现在我需要建议我如何实现这样的功能？

我应该将 mysql 服务器语言环境更改为古吉拉特语，还是应该将 mysql 服务器保持在英语语言环境中，并在前端将数据从古吉拉特语转换为 eng 或 eng 到古吉拉特语。

请提出一些建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T03:04:17.640

您应该将字段的排序规则更改为，`utf8_bin`以便 MySQL 以古吉拉特语和英语正确存储数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-07T04:34:33.773

只是你必须喜欢...

在您的 Mysql 数据库表中。
只需将列名称的 'Collat​​ion' 更改 为**'** **utf8mb4_general_ci'**。

 **你可以在数据库中存储任何古吉拉特语字体

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-06-02T08:58:28.257

在您的连接文件中，您要包含一行代码：

```
mysql_query('set names utf8'); 
```**

# java - 创建不同的甲板对象

> ID：16182605
> 
> 赞同：0
> 
> 时间：2013-04-24T02:56:51.070
> 
> 标签：java, for-loop

在测试用例中，如果我试图调用方法（例如 placeOnTop()），它应该测试卡片来自哪个牌组。我不确定这个构造函数是如何标记的/或者是否完全创建不同类型的套牌......

```
public class StandardDeck implements Deck {
    List<Card> cards = new ArrayList<>();
    public StandardDeck() {
        for (Suit suit : Suit.values()) {
            for (int rank = 1; rank <= 13; rank++) {
                Card e = new StandardCard(suit, rank, this);
                cards.add(e);
            }
        }
    }

    public void placeOnTop(Card c) {
        cards.add(0, c);
    }
    public Card takeTop() {
        return cards.remove(0);
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T03:01:51.867

您没有“标记”字段，但每次调用`StandardDeck()`都会返回一个新的 StandardDeck 对象，该对象包含其自己的卡片对象，其类型为 List。

# java - java中的socket通信

> ID：16182609
> 
> 赞同：0
> 
> 时间：2013-04-24T02:57:53.303
> 
> 标签：java, sockets

```
this.cin = new DataInputStream(this.csocket.getInputStream()); 

public class ReceiveMessage extends Thread{             
    public void run(){
        while(stop == false)
            try {
                if(cin.available()>0)
                    receMessage();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
}

    // choke, unchoke, interested, notinterested, have, bitfield, request, piece
    public void receMessage(){
        int rv=0;
        byte[] length = new byte[4];        // total length
        try {
            rv = cin.read(length, 0, 4);
        } catch (IOException e) {
            e.printStackTrace();
        }

        if(rv <=0)              
            return;         

        byte[] type = new byte[1];
        try {
            cin.read(type, 0, 1);
        } catch (IOException e) {
            e.printStackTrace();
        }

        int size = byte2int(length) -4 -1; //size of payload            
        clearPayload();
        if(size > 0){               
            try {                   
                cin.read(this.payload, 0, size);
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

        byte mtype = type[0];
        switch(mtype){
            case (byte)0:
                receNoPayload((byte)0);
                break;
            case 1:
                receNoPayload((byte)1);
                break;
            case 2:
                receNoPayload((byte)2);
                break;
            case 3:
                receNoPayload((byte)3);
                break;
            case 4:
                receHave(payload);
                break;
            case 5: 
                receBitField(payload);
                break;
            case 6:
                receRequest(payload);
                break;
            case 7:             
                recePiece(payload, size);
                break;
            default:
                System.out.println("wrong message type!");
        }       

} 
```

上面的代码用于从套接字读取数据。我创建了一个线程从套接字读取数据。然后根据数据中包含的消息类型分析数据。现在，问题是如果我将 100 个字节传输到套接字，我可以正确地做所有事情；但是，如果我将 1000 个字节传输到套接字中，有时，读出的数据是错误的。例如，变量类型通常不能大于 7。但是现在读出的类型大于7，这是错误的。

在这两种情况下，除了传输的数据大小之外，我什么都没有改变。

请帮助我，谢谢！我已经做了我能做的一切，但我仍然无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T04:21:06.037

1.  摆脱`available()`电话。如果没有数据， read() 将阻塞。目前你只是在烧CPU。

2.  检查每次读取的结果。你不能假设它填满了缓冲区。或`DataInputStream.readFully()`改为使用。

# shell - 用匹配的字符串注释掉行

> ID：16182620
> 
> 赞同：2
> 
> 时间：2013-04-24T02:59:40.747
> 
> 标签：shell

如果行中存在字符串，则寻找一个简单的 shell 脚本（使用 sed 或 awk）来注释掉文本文件的行。例如，具有以下内容的文本文件：

```
line1 word1 word2
line2 word3 word4
line3 word5 word6
line4 word1 word7
line5 word10 word11 
```

改为：

```
#line1 word1 word2
line2 word3 word4
line3 word5 word6
#line4 word1 word7
line5 word10 word11 
```

如您所见，只有带有字符串“word1”的行被注释掉了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T03:16:39.307

我相信这会为你做到。

```
 sed -i .backup "/[[:<:]]word1[[:>:]]/s/^/#/g" file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T05:25:25.473

我认为，您的问题类似于[如何在关键字搜索匹配后在一行前面添加注释 (#)](https://stackoverflow.com/questions/12014275/how-do-i-add-a-comment-in-front-of-a-line-after-a-key-word-search-match)

如果我错了，请纠正我。我希望这能帮到您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T04:47:08.200

尝试这个：

```
$ sed -e '/[[:<:]]word1[[:>:]]/ s/^/# /' < file
# line1 word1 word2
line2 word3 word4
line3 word5 word6
# line4 word1 word7
line5 word10 word11 
```

这是如何运作的？[`sed`手册页](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/sed.1.html)说，

> sed 命令的格式如下：
> 
> ```
>  [address[,address]]function[arguments] 
> ```

稍后在手册页中，它阐明了地址可以是正则表达式，这导致该函数应用于与正则表达式匹配的每一行。因此，上面给出的命令所做的是，如果该行包含独立单词`word1`，则应用替换函数将行首锚点替换为`"# "`。

# python - Python：有效地删除列表前面附近的元素？

> ID：16182623
> 
> 赞同：1
> 
> 时间：2013-04-24T03:00:42.527
> 
> 标签：python, arrays, list, deque

有没有办法从一长串数字的开头删除元素？现在我正在做 del arr[i:i+x] 但它很慢，因为它必须将所有内容移到左侧，这对于大型列表来说很耗时。

我查看了双端队列，但不确定这些是否适用于此。可以使用一些方向！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T03:01:30.757

是[`deque`](http://docs.python.org/2/library/collections.html)的，这里确实适用，你应该使用它们，如果它们非常靠近前面，它将非常快，但如果起始索引位于中间，则速度会慢一些。

> 索引访问在两端都是 O(1)，但在中间慢到 O(n)。

```
>>> from collections import deque
>>> def delete_slice(d, start, stop):
        d.rotate(-start)
        for i in range(stop-start): # use xrange on Python 2
            d.popleft()
        d.rotate(start)

>>> d = deque(range(15))
>>> delete_slice(d, 5, 10)
>>> d
deque([0, 1, 2, 3, 4, 10, 11, 12, 13, 14]) 
```

**注意：**如前所述，从中间旋转会很慢，如果您想支持从右侧快速删除，您可以像这样扩展代码：

```
def delete_slice(d, start, stop):
    stop = min(stop, len(d)) # don't go past the end
    start = min(start, stop) # don't go past stop
    if start < len(d) // 2:
        d.rotate(-start)
        for i in range(stop-start): # use xrange on Python 2
            d.popleft()
        d.rotate(start)
    else:
        n = len(d) - stop
        d.rotate(n)
        for i in range(stop - start):
            d.pop()
        d.rotate(-n) 
```

当然，您还需要进行其他一些错误检查，但为了简单起见，我将把它排除在外。不幸的是，这些方法本身还没有提供`deque`，所以你必须像这样实现它们。

> 要实现双端队列切片，请使用类似的方法将`rotate()`目标元素带到`deque`. 用 删除旧条目，用`popleft()`添加新条目`extend()`，然后反转轮换。通过对该方法的微小变化，很容易实现 Forth 风格的堆栈操作，例如 dup、drop、swap、over、pick、rot 和 roll。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T03:05:09.683

是的，[`deque`](http://docs.python.org/2/tutorial/datastructures.html)适用于此。准备了一个示例来说明如何使用它：

```
import collections

"create deque from list"
d=collections.deque([1,2,3,4,5,6])
"remove first element"
d.popleft()

print d 
```

输出：

```
deque([2,3,4,5,6]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T03:18:00.807

如果您连续进行多次删除，使用带有过滤器的生成器创建新列表可能会更有效：

```
arr = [e for e in arr if not rejected(e)] 
```

如果您需要使用索引，可以使用枚举：

```
arr = [e for i, e in enumerate(arr) if not rejected(i)] 
```

这两个操作都是 O(n)（空间中的 O(2*n)），而在一行中执行多次删除是 O(n*m)（但空间中的 O(n)）。

`deque`有这个特点，可能不是你想要的：

> 索引访问在两端都是 O(1)，但在中间慢到 O(n)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T04:00:19.417

我想你可能想要一棵树或跳过列表。

不久前我对 Python 树的实现进行了研究： [http ://stromberg.dnsalias.org/~strombrg/python-tree-and-heap-comparison/](http://stromberg.dnsalias.org/~strombrg/python-tree-and-heap-comparison/)

您最好在网站的算法部分询问这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-05T10:27:41.477

列表未针对在前面追加或弹出进行优化。不过，双端队列是。

另请注意，`deque.remove(item)`CPython[实现中的](https://github.com/python/cpython/blob/main/Modules/_collectionsmodule.c)将从前面搜索。如果您需要经常移动/删除队列项目，您可能会受益于考虑是否大多数要删除的项目将接近尾声并在这种情况下使用翻转队列，即`appendleft`and`pop`而不是`append`and `popleft`。

# ruby - 用 ruby 中的实际单词替换

> ID：16182624
> 
> 赞同：0
> 
> 时间：2013-04-24T03:00:42.707
> 
> 标签：ruby, regex

我有以下字符串。

```
x = %q{ On the server side, my EJB3 application uses Spring for configuring all sorts of things. So my EJBs all look up various ApplicationContexts and use them as a sort of...well, I was going to say poor man's JNDI, but the reality is that JNDI in the J2EE environment is really a poor man's Spring. :-)

On the GUI side, I use it instead of resource injection to get access to my EJBs. That lets me test the GUI component with simple pojos. So ejb is very good technology} 
```

我正在替换字符串`"ejb"`，不区分大小写。我正在这样做：

```
 y = x.gsub(/(ejb)/i, '<em>EJB</em>')
 # => " On the server side, my <em>EJB</em>3 application uses Spring for configuring all sorts of things. So my <em>EJB</em>s all look up various ApplicationContexts and use them as a sort of...well, I was going to say poor man's JNDI, but the reality is that JNDI in the J2EE environment is really a poor man's Spring. :-)\n\nOn the GUI side, I use it instead of resource injection to get access to my <em>EJB</em>s. That lets me test the GUI component with simple pojos. So <em>EJB</em> is very good technology" 
```

我有一个小写匹配: `"ejb"`，我用这个替换: `"<em>EJB</em>"`。如何在不更改大小写的情况下更换它？我想要`"<em>ejb</em>"`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T05:28:32.403

```
x.gsub(/(ejb)/i, '<em>\1</em>') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T03:08:58.043

你要：

```
gsub(/(ejb)/i, "<em>#{$1}</em>") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T03:24:30.430

```
'test EjB123'.gsub(/ejb/i, "<em>#{$1}</em>")
 => "test <em>EjB</em>123" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T03:26:45.310

您可能想尝试：

```
x.gsub!(/(ejb)/i) {|m| "<em>#{$~}<em>"} 
```

有一`Special global variables`组由`Pattern matching`:

```
$~ is equivalent to ::last_match;
$& contains the complete matched text;
$` contains string before match;
$' contains string after match;
$1, $2 and so on contain text matching first, second, etc capture group;
$+ contains last capture group. 
```

欲了解更多信息： [红宝石正则表达式](http://ruby-doc.org/core-2.0/Regexp.html)

# c - C中随机数的完整变化

> ID：16182630
> 
> 赞同：3
> 
> 时间：2013-04-24T03:01:08.670
> 
> 标签：c

我正在尝试使用以下代码生成 64 位随机数。我想要二进制的数字，但问题是我无法让所有位都发生变化。我希望数字尽可能地变化

```
void PrintDoubleAsCBytes(double d, FILE* f)
{

f = fopen("tb.txt","a");

  unsigned char a[sizeof(d)];
  unsigned i;
  memcpy(a, &d, sizeof(d));
  for (i = 0; i < sizeof(a); i++){
    fprintf(f, "%0*X", (CHAR_BIT + 3) / 4, a[sizeof(d)-1-i]);

  }
   fprintf(f,"\n");
 fclose(f); /*done!*/
}

int main (int argc, char *argv)
{

int limit = 100 ;
double a, b;                
double result;
int i ;           
printf("limit = %d", limit );

for (i= 0 ; i< limit;i++)
    {
    a= rand();
    b= rand();
    result = a * b;
    printf ("A= %f B = %f\n",a,b);
    printf ("result= %f\n",result);
    PrintDoubleAsCBytes(a, stdout); puts("");
    PrintDoubleAsCBytes(b, stdout); puts("");
    PrintDoubleAsCBytes(result, stdout); puts("");

    }
} 
```

输出文件

```
41DAE2D159C00000        //Last bits remain zero, I want them to change as well as in case of the result
41C93D91E3000000
43B534EE7FAEB1C3
41D90F261A400000
41D98CD21CC00000
43C4021C95228080
41DD2C3714400000
41B9495CFF000000
43A70D6CAD0EE321 
```

我该如何做到这一点？我在软件编码方面没有太多经验

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T03:08:27.470

在 Java 中，这很容易：

```
Random rng = new Random(); //do this only once

long randLong = rng.NextLong();
double randDoubleFromBits = Double.longBitsToDouble(randLong); 
```

在 CI 中只知道一种 hack 方法:)

* * *

由于 RAND_MAX 可以低至 2^15-1 但由实现定义，也许您可​​以`rand()`通过执行掩码和位移来获得 64 个随机位：

```
//seed program once at the start
srand(time(NULL));

uint64_t a = rand()&0x7FFF;
uint64_t b = rand()&0x7FFF;
uint64_t c = rand()&0x7FFF;
uint64_t d = rand()&0x7FFF;
uint64_t e = rand()&0x7FFF;
uint64_t random = (a<<60)+(b<<45)+(c<<30)+(d<<15)+e; 
```

然后将其填充到一个联合中，并使用联合的另一个成员将其位解释为`double`. 就像是

```
union
{
    double d;
    long l;
} doubleOrLong;

doubleOrLong.l = random;
double randomDouble = doubleOrLong.d; 
```

（我没有测试过这段代码）

* * *

编辑：解释它应该如何工作

首先，`srand(time(NULL));`种子 rand 使用当前时间戳。所以你只需要在开始时这样做一次，如果你想重现早期的 RNG 系列，你可以根据需要重复使用该种子。

`rand()`返回介于 0 和 RAND_MAX 之间的随机无偏整数。RAND_MAX 保证至少为 2^15-1，即 0x7FFF。要编写程序以使 RAND_MAX 是什么无关紧要（例如，它可能是 2^16-1、2^31-1、2^32-1...），我们屏蔽掉除了底部之外的所有内容15 位 - 0x7FFF 是二进制的 0111 1111 1111 1111，或低 15 位。

现在我们必须将所有 15 个随机位打包成 64 位。移位运算符`<<`将左操作数（右操作数）位向左移动。因此，我们称为 random 的最终 uint64_t 具有从其他变量派生的随机位，如下所示：

`aaaa bbbb bbbb bbbb bbbc cccc cccc cccc ccdd dddd dddd dddd deee eeee eeee eeee`

但这仍然被视为 uint64_t，而不是双精度。这样做是未定义的行为，所以你应该确保它在你选择的编译器上按照你期望的方式工作，但是如果你把这个 uint64_t 放在一个联合中，然后读取联合的另一个双重成员，那么你会（希望！）将这些相同的位解释为由随机位组成的双精度位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T05:27:54.530

取决于您的平台，但假设 IEEE 754，例如[Wikipedia](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)，为什么不明确处理内部双格式？

（除非出现错误），这会生成随机但*有效*的双打。[这里还没有完全涵盖所有的基础，例如 case where `exp = 0`or `0x7ff`]

```
double randomDouble()
{
    uint64_t buf = 0ull;

    // sign bit
    bool odd = rand()%2 > 0;
    if (odd)
        buf  = 1ull<<63;

    // exponent

    int exponentLength = 11;

    int exponentMask = (1 << exponentLength) - 1;

    int exponentLocation = 63 - exponentLength;

    uint64_t exponent = rand()&exponentMask;

    buf += exponent << exponentLocation;

    // fraction

    int fractionLength = exponentLocation;
    int fractionMask  = (1 << exponentLocation) - 1;

    // Courtesy of Patashu

    uint64_t a = rand()&0x7FFF;
    uint64_t b = rand()&0x7FFF;
    uint64_t c = rand()&0x7FFF;
    uint64_t d = rand()&0x7FFF;

    uint64_t fraction = (a<<45)+(b<<30)+(c<<15)+d;
    fraction = fraction& fractionMask;
    buf += fraction;

    double* res = reinterpret_cast<double*>(&buf);
    return *res;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T05:40:56.403

使用可以使用这个：

```
void GenerateRandomDouble(double* d)
{
  unsigned char* p = (unsigned char*)d;
  unsigned i;
  for (i = 0; i < sizeof(d); i++)
    p[i] = rand();
} 
```

此方法的问题在于您的 C 程序可能无法使用此函数返回的某些值，因为它们是无效的或特殊的浮点值。

但是，如果您正在测试您的硬件，您可以生成随机字节并将它们直接输入到所述硬件中，而无需先将它们转换为`double`.

唯一需要将这些随机字节视为 a`double`的地方是硬件返回结果的验证点。

此时，您需要查看字节并查看它们是否代表有效值。如果他们这样做，您可以`memcpy()`将字节放入 a`double`并使用它。

下一个要处理的问题是上溢/下溢和异常，这些都是您需要对这些随机`doubles`数（加法、乘法等）执行的任何操作。您需要弄清楚如何在您的平台（编译器+CPU+OS）上处理它们，您是否可以安全可靠地检测到它们。

但这看起来像是一个单独的问题，并且可能已经被问及并得到了回答。

# iphone - 在 NSObject 中添加 @property 作为指向另一个 NSObject 中的 @property 的指针

> ID：16182632
> 
> 赞同：1
> 
> 时间：2013-04-24T03:01:16.127
> 
> 标签：iphone, ios

我有一个 1v1 游戏，我正在更新为 3 名玩家（最终是 4 名玩家），当用户与 2 名电脑玩家对战时，我遇到了玩家跟踪问题。

我有一个 Game NSObject，它处理游戏的所有主要代码，还控制计算机玩家的动作。过去，我对 Game.h 中的 2 个属性（用户和对手）很好，现在我有 3 个（用户、对手、对手2）。声明如下：

```
@property (retain) Player *user; 
```

当我需要使用控制计算机播放器操作的方法时，问题就出现了。例如，当计算机玩家需要出价时，它必须知道出价和其他一些关于它的对手的信息。旧代码的片段是：

```
- (void)computerBiddingObjects {
        // ... other stuff
    if (_opponentPoints == 110 && _userPoints >= 90 && _userDidBid != YES) {
          bid = bidTwenty;
    } else if (_opponentPoints == 115 && _userPoints >= 90 && _userDidBid != YES) {
          bid = bidTwentyFive;
    }
        // ... other stuff
} 
```

为了获取对方玩家的信息，我的想法是在 Player.h 中添加 2 个新属性，以跟踪每个玩家的对手（对手 1 和对手 2）。我的问题是，如果我为每个 Player 设置属性，如下所示：

```
_opponent.opponent = _user;
_opponent.opponent2 = _opponent2; 
```

我可以在这两种情况下引用它们和/或设置它们的单独属性吗？鉴于上述情况，这些陈述是否等效：

```
_opponent.opponent.didBid = YES;
_user.didBid = YES; 
```

另外，我可以像这个新版本的出价代码片段一样访问 Player 对象属性吗？

```
- (void)computerBiddingObjectsForOpponent:(Player *)opponent {
        // ... other stuff
    if (opponent.points == 110 && self.currentBid < bidTwenty && ((opponent.opponent1.points >= 90 && opponent.opponent1.didBid != YES) || (opponent.opponent2.points >= 90 && opponent.opponent2.didBid != YES))) {
          bid = bidTwenty;
    } else if (opponent.points == 115 && self.currentBid < bidTwentyFive && ((opponent.opponent1.points >= 90 && opponent.opponent1.didBid != YES) || (opponent.opponent2.points >= 90 && opponent.opponent2.didBid != YES))) {
          bid = bidTwentyFive;
    }
        // ... other stuff
    opponent.bid = bid.
} 
```

我是否偏离了基地/偏离轨道？有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:22:31.923

这确实是等价的。

但 ...

`didBid`也将由其他玩家设置（因为他们持有对该玩家的相同引用，覆盖每个玩家设置的内容。

您正在创建一个可能需要手动中断的保留循环（或将对手属性设置为`weak`）。

最好每个玩家都为每个对手保留一个“策略”对象，并且该策略将引用玩家。这样，每个玩家可能对任何其他玩家有不同的策略。

# c++ - 间歇性找不到 C++ 头文件

> ID：16182635
> 
> 赞同：1
> 
> 时间：2013-04-24T03:01:35.773
> 
> 标签：c++, visual-studio-2012, include

在处理一些 C++ 项目时，我注意到 VS2012 中有一些奇怪的行为。如果我将以下行放在头文件的顶部：（myclass.h）

```
#include <D3DX11.h> 
```

编译器会告诉我它找不到该文件（即使智能感知建议它）。但是，如果我将同一行放在不同的文件（myclass.cpp）中，一切正常。我不明白为什么在一个文件中使用时可以找到它，而在另一个文件中却找不到？到底是怎么回事 ？

**编辑/注意：**
这并不是 DirectX 特定的问题。当我决定问这个问题时，这正是我正在研究的。这也可能发生在其他地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:38:43.297

在较新版本的 Visual Studio 中，包含路径是在项目级别设置的。也许包含 cpp 的项目设置了正确的路径（请参阅 Jesse Good 在您的问题中的评论）。但是，对于您的解决方案中的另一个项目，情况可能并非如此。一旦您将 include 放入标头中，包括您的标头在内的所有其他项目也需要知道在哪里可以找到 directX-headers。

当心智能感知 - 如果您打开一个标头，它必须猜测您可能从哪个 cpp 中包含此标头，并且显示的信息并不总是正确的。我认为在较新的版本中，它甚至取决于打开了哪些其他文件/选择了项目。编译器应告知您包含标头时 cpp 实际导致问题的原因。

# html - 为什么标准规则必须是最后？

> ID：16182641
> 
> 赞同：2
> 
> 时间：2013-04-24T03:02:04.493
> 
> 标签：html, css, vendor-prefix

我们使用这样的css规则......

```
-moz-border-radius: 8px;
-webkit-border-radius: 8px;
-o-border-radius: 8px;
border-radius: 8px;  /* this must be at last ? */ 
```

为什么我一开始不应该像这样使用它......

```
border-radius: 8px; /* why not to use at first ? */
-moz-border-radius: 8px;
-webkit-border-radius: 8px;
-o-border-radius: 8px; 
```

**更新**

谁能给我看一个最初使用它时发生错误的例子？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T03:08:12.633

这个想法是，一旦规则标准化，就会推翻其他样式。由于标准规则在底部，如果浏览器知道如何使用，它将被用来代替供应商特定的规则。这允许标准化，同时仍支持当前的实现。

在您的第二个示例中，如果浏览器同时支持这两种规则，则供应商特定规则将覆盖标准化规则。供应商特定的实现可能与规范有所不同，一旦最终确定，最好遵循统一规范，以便更轻松地跨浏览器更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T04:10:09.807

在编写 CSS3 属性时，现代智慧是最后列出“真实”属性，然后首先列出供应商前缀：

```
.not-a-square {
  -webkit-border-radius: 10px;
  -moz-border-radius: 10px;
  border-radius: 10px;
} 
```

为什么这种排序属性的方法如此普遍？这是它的样子“`the wrong way":`

```
.not-a-square {
  border-radius: 10px;
  -moz-border-radius: 10px;
  -webkit-border-radius: 10px;
} 
```

即使以“错误的方式”进行操作，无论如何边界半径不会永远相同吗？快速调查可能会让您得出结论，它会，而这种属性排序是相当无稽之谈。

**很久很久以前：**不支持任何属性，顺序无关紧要。过去：仅支持供应商前缀，顺序无关紧要。现在：支持供应商前缀和实际属性。如果前缀是最后一个，它将覆盖实际属性，但无论如何两者都是相同的。未来：仅支持实际属性，顺序无关紧要。

**[更多关于](http://css-tricks.com/ordering-css3-properties/)**

# ruby - utf8 编码错误

> ID：16182643
> 
> 赞同：1
> 
> 时间：2013-04-24T03:02:08.440
> 
> 标签：ruby, utf-8, character-encoding, web-crawler

当我从某个网站获取数据时，有时数据以 utf8 编码，但看起来像这样：

```
Thỏ , Nạt 
```

重音符号与字符分开，而实际上这些字符串必须是：

```
Thỏ, Nạt 
```

我不知道这里有什么问题以及如何纠正它。有人可以帮我弄这个吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T05:22:53.553

第一个示例字符串包含两个分解形式的越南语字符。其中第一个是“ỏ”，由简单的字母“o”组成，后跟 U+0309 COMBINING HOOK ABOVE。

第二个示例字符串具有预先组合形式的这些字符。其中第一个是“ỏ” U+1ECF 拉丁文小写字母 O，上面带有钩子。

分解和预分解的形式被定义为“规范等价物”，通常期望产生相同的渲染（尽管这并不总是发生）。但是，它们并不相同。在字符和字符串的编程比较中，它们非常不同。

大多数带有变音符号的拉丁字母，例如“é”和“ä”，仅以预先组合的形式使用，因为这是键盘驱动程序、在线键盘、字符选择实用程序等通常产生的。但是，越南语键盘驱动程序通常会在输入基本字符后输入一些变音符号，从而将变音符号作为组合字符产生，即字母（如“ỏ”）然后是分解形式。

在许多情况下推荐的处理此问题的一种方法是将您的字符串转换为规范化表格 C (NFC)。这会将这些字符放入预先组合的形式。但是请注意，转换为 NFC 也消除了其他一些区别（但如果文本仅为越南语且不包含特殊符号，则这无关紧要）。

为什么第一个示例字符串在逗号之前有一个空格字符仍然是个谜。

# java - 为什么我的 Swing GUI 不能从一个 GUI 切换到下一个？

> ID：16182649
> 
> 赞同：0
> 
> 时间：2013-04-24T03:02:42.110
> 
> 标签：java, swing, user-interface, nullpointerexception

我正在构建一个带有临时用户名系统的简单聊天服务器。当屏幕弹出时，它以一个简单的屏幕开始，询问您的用户名。你可以放任何你想要的东西，这纯粹是暂时的（我也在试验）。代码告诉程序继续，将用户名保存到代码中以供临时使用，然后进入主聊天服务器（目前只是一个 GUI）。但事实并非如此。相反，Java 非常粗鲁地告诉我我犯了一个错误，我是一个坏人。我不确定我做错了什么或它是如何发生的，因为一切似乎都很好，我认为我的按钮监听器是正确的。我的错误是什么，我该如何解决？这是我的代码：

```
package coltGUI;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Font;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.UIManager;

public class MainGUI {

    String username;

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (Exception e) {
            e.printStackTrace();
        }

        MainGUI gui = new MainGUI();
        gui.preDisplay();
    }

    JFrame frame;
    JButton sendMessage;
    JTextField messageBox;
    JTextArea chatBox;
    JTextArea usernameChooser;
    JFrame preFrame;

    private void preDisplay() {
        JFrame preFrame = new JFrame("Choose your username!(Colt chat v 0.1");
        JTextField usernameChooser = new JTextField();
        JLabel chooseUsernameLabel = new JLabel("Pick a username:");
        JButton enterServer = new JButton("Enter Chat Server");
        JPanel prePanel = new JPanel(new GridBagLayout());
        GridBagConstraints preRight = new GridBagConstraints();
        preRight.anchor = GridBagConstraints.EAST;
        GridBagConstraints preLeft = new GridBagConstraints();
        preLeft.anchor = GridBagConstraints.WEST;
        preRight.weightx = 2.0;
        preRight.fill = GridBagConstraints.HORIZONTAL;
        preRight.gridwidth = GridBagConstraints.REMAINDER;
        preFrame.add(BorderLayout.CENTER, prePanel);
        prePanel.add(chooseUsernameLabel, preLeft);
        prePanel.add(usernameChooser, preRight);
        preFrame.add(BorderLayout.SOUTH, enterServer);
        preFrame.setVisible(true);
        preFrame.setSize(300, 300);

        enterServer.addActionListener(new enterServerButtonListener());
    }

    public void display() {

        frame = new JFrame("Colt Chat (Alpha 0.1)");
        JPanel southPanel = new JPanel();

        frame.add(BorderLayout.SOUTH, southPanel);
        southPanel.setBackground(Color.BLUE);
        southPanel.setLayout(new GridBagLayout());

        messageBox = new JTextField(30);
        sendMessage = new JButton("Send Message");
        chatBox = new JTextArea();
        chatBox.setEditable(false);
        frame.add(new JScrollPane(chatBox), BorderLayout.CENTER);

        chatBox.setLineWrap(true);

        GridBagConstraints left = new GridBagConstraints();
        left.anchor = GridBagConstraints.WEST;
        GridBagConstraints right = new GridBagConstraints();
        right.anchor = GridBagConstraints.EAST;
        right.weightx = 2.0;

        southPanel.add(messageBox, left);
        southPanel.add(sendMessage, right);

        chatBox.setFont(new Font("Serif", Font.PLAIN, 15));
        sendMessage.addActionListener(new sendMessageButtonListener());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(470, 300);
    }

    class sendMessageButtonListener implements ActionListener {
        public void actionPerformed(ActionEvent event) {
            if (messageBox.getText().length() < 1) {
                // do nothing 
            } else if (messageBox.getText().equals(".clear")) {
                chatBox.setText("Cleared all messages\n");
                messageBox.setText("");
            } else {
                chatBox.append("<" + username + ">:" + messageBox.getText() + "\n");
                messageBox.setText("");
            }
        }
    }

    class enterServerButtonListener implements ActionListener {
        public void actionPerformed(ActionEvent event) {
            username = usernameChooser.getText();
            preFrame.setVisible(false);
            frame.setVisible(true);

        }

    }
} 
```

这就是那个错误。当我尝试按下选择用户名 GUI 上的“输入服务器”按钮时会发生这种情况：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at coltGUI.MainGUI$enterServerButtonListener.actionPerformed(MainGUI.java:113)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T03:05:20.370

因为您的侦听器所依赖的字段尚未初始化

```
JFrame frame;
JButton sendMessage;
JTextField messageBox;
JTextArea chatBox;
JTextArea usernameChooser;
JFrame preFrame;

private void preDisplay() {
    // All the above fields have been redeclared here and are local to the constrcutor
    JFrame preFrame = new JFrame("Choose your username!(Colt chat v 0.1");
    JTextField usernameChooser = new JTextField();
    JLabel chooseUsernameLabel = new JLabel("Pick a username:");
    JButton enterServer = new JButton("Enter Chat Server");
    JPanel prePanel = new JPanel(new GridBagLayout());
    GridBagConstraints preRight = new GridBagConstraints();
    preRight.anchor = GridBagConstraints.EAST;
    GridBagConstraints preLeft = new GridBagConstraints(); 
```

应该更像...

```
JFrame frame;
JButton sendMessage;
JTextField messageBox;
JTextArea chatBox;
JTextArea usernameChooser;
JFrame preFrame;

private void preDisplay() {
    // All the above fields have been redeclared here and are local to the constrcutor
    preFrame = new JFrame("Choose your username!(Colt chat v 0.1");
    usernameChooser = new JTextField();
    JLabel chooseUsernameLabel = new JLabel("Pick a username:");
    JButton enterServer = new JButton("Enter Chat Server");
    JPanel prePanel = new JPanel(new GridBagLayout()); 
```

# java - 使用 for 循环将数组元素传递给 Oracle 数据库表

> ID：16182650
> 
> 赞同：1
> 
> 时间：2013-04-24T03:03:08.173
> 
> 标签：java, arrays, jsp, servlets, oracle10g

大家，早安 ！我创建了一个带有一些单选按钮的 jsp 页面。现在，我正在接收用户对 servlet 内的数组中的那些单选按钮的响应。现在我想将这些数组项发送到我的 oracle 数据库表中。但我遇到了问题。jsp页面的代码是：

```
<%@page import="java.util.Calendar"%>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<form action="TestAms" method="post">
<%
Calendar cal = Calendar.getInstance();
int md = cal.getActualMaximum(Calendar.DATE);
    for(int i = 0; i <= md; i++){
        %>
            <input type="radio" name="<%= i%>" value="<%=i %>">
        <%
    }
%>
<input type="submit" value="SUBMIT">
</form>
</body>
</html> 
```

servlet 的代码是：

```
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Calendar;
import java.util.Enumeration;
import java.util.Hashtable;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class TestAms extends HttpServlet {

protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    PrintWriter out = response.getWriter();

    Connection conn = null;
    PreparedStatement pstmt = null;

    Calendar cal = Calendar.getInstance();
    int md = cal.getActualMaximum(Calendar.DATE);
    int count =0;
    String s[] = new String[md+1];

    String jan = "JAN";
    String query;

    try {
        Class.forName("oracle.jdbc.driver.OracleDriver");
        conn = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE","urja","urja");

        for (int y=1; y<=md; y++){
            s[y] = request.getParameter(Integer.toString(y));
            out.println(s[y]);
            if( y  < md ){
                int z = y+1;
                out.println("db var : " + z);
                query = "UPDATE V_TEST SET \"" + z + "\" = ? WHERE V_MONTH = '"+ jan +"'";
                pstmt = conn.prepareStatement(query);
                pstmt.setString(z, s[y]);                   //getting error in this line as per the debug report.
                int i = pstmt.executeUpdate();
                out.println("inserted : " + i);
            }
        }

        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (SQLException e) {
            e.printStackTrace();
        }       
    finally {
        if (conn != null) {
            try {
                conn.close();
                pstmt.close();
            }
            catch (SQLException e) {
                e.printStackTrace();
            }
        }
    }
}
} 
```

我的表 sql 是：

```
CREATE TABLE  "V_TEST" 
(   "V_MONTH" VARCHAR2(4000) NOT NULL ENABLE, 
"1" VARCHAR2(4000), 
"2" VARCHAR2(4000), 
"3" VARCHAR2(4000), 
"4" VARCHAR2(4000), 
"5" VARCHAR2(4000), 
"6" VARCHAR2(4000), 
"7" VARCHAR2(4000), 
"8" VARCHAR2(4000), 
"9" VARCHAR2(4000), 
"10" VARCHAR2(4000), 
"11" VARCHAR2(4000), 
"12" VARCHAR2(4000), 
"13" VARCHAR2(4000), 
"14" VARCHAR2(4000), 
"15" VARCHAR2(4000), 
"16" VARCHAR2(4000), 
"17" VARCHAR2(4000), 
"18" VARCHAR2(4000), 
"19" VARCHAR2(4000), 
"20" VARCHAR2(4000), 
"21" VARCHAR2(4000), 
"22" VARCHAR2(4000), 
"23" VARCHAR2(4000), 
"24" VARCHAR2(4000), 
"25" VARCHAR2(4000), 
"26" VARCHAR2(4000), 
"27" VARCHAR2(4000), 
"28" VARCHAR2(4000), 
"29" VARCHAR2(4000), 
"30" VARCHAR2(4000), 
"31" VARCHAR2(4000)
); 
```

我得到的完整错误是：

```
java.sql.SQLException: Missing IN or OUT parameter at index:: 1
at oracle.jdbc.dbaccess.DBError.throwSqlException(DBError.java:134)
at oracle.jdbc.dbaccess.DBError.throwSqlException(DBError.java:179)
at oracle.jdbc.driver.OracleStatement.checkBindsInAndOut(OracleStatement.java:1876)
at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:2638)
at oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:589)
at TestAms.doPost(TestAms.java:47)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

![我的数据库看起来像这样](https://i.stack.imgur.com/UcXoi.jpg)

我想在每一列中存储日期（已检查 jsp 页面中的单选按钮的日期）。

这是我的jsp页面。 ![jsp页面](https://i.stack.imgur.com/AS6Pt.jpg)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:12:00.257

老实说，你在这里做错了很多。

首先，*使用参数化 SQL*。使用 PreparedStatements。 *除非绝对必须，否则不要使用连接来构建 SQL 字符串*，否则你会发现自己成为 SQL 注入攻击的受害者。这些天在讨论 SQL 注入时，这是强制性的，这里是关于 SQL 注入的 xkcd 漫画的链接：[http](http://www.xkcd.com/327) ://www.xkcd.com/327 。

其次，您收到 ORA-00927 错误，因为您发送到数据库的 SQL 语句无效。我不知道方括号在 Oracle SQL 中的任何地方都有效（字符串和双引号标识符之外）。 `s[md]`可能有一个 Java 表达式的值，但在字符串中它不会被评估，因此要求数据库执行一个`UPDATE V_TEST SET s[md]= ...`它不理解的查询。

Oracle 知道 SQL 语句应该是以下形式

```
UPDATE table SET column = value .... 
```

通过您的查询，它一直`UPDATE V_TEST SET s`以为`s`是列的名称，然后它感到惊讶，因为它`[`在想要 a 时找到了 a `=`。

此外，您的列名是数字，因此它们需要用双引号括起来，否则 Oracle 会认为您正在尝试为数字分配值。 `UPDATE V_TEST SET 1 = 'xyz'`不是有效的 SQL，`UPDATE V_TEST SET "1" = 'xyz'`是。

而不是写作，

```
 stmt = conn.createStatement();
    //Query is not right
    int i = stmt.executeUpdate("UPDATE V_TEST SET s[md] = '"+s[md]+"' WHERE V_MONTH = '"+jan+"'"); 
```

写

```
 // Use \" to escape the double-quotes, so that the query ends up like
    // UPDATE V_TEST SET "30" = ? WHERE V_MONTH = ?
    // In this case we have to use string concatenation to build up the query,
    // but we're only inserting an integer so this won't be a problem.
    String sql = "UPDATE V_TEST SET \"" + md + "\" = ? WHERE V_MONTH = ?";

    // stmt will need to be declared as a PreparedStatement, not a Statement.
    stmt = conn.prepareStatement(sql);

    // Set the values for the two '?' placeholders.
    stmt.setString(1, s[md]);
    stmt.setString(2, jan);

    int i = stmt.executeUpdate(); 
```

这应该可以解决您的前两个问题。

第三，您似乎没有关闭连接，因为您没有关闭连接（除非您的查询成功，他们目前没有这样做）。您应该在`finally`块中关闭它们，因为这样可以确保即使在抛出异常的情况下它们也被关闭。

您应该执行以下操作（这是一个草图）：

```
 Connection conn = null;
    try {
        // get database connection ...

        // do stuff with connection ...
    }
    catch (SQLException e) {
        // handle error connecting to the database or using it
    } 
    finally {
        if (conn != null) {
            try {
                conn.close();
            }
            catch (SQLException e) {
                // handle error disconnecting from the database.
            }
        }
    } 
```

除了关闭连接外，完成`Statement`s 和`PreparedStatement`s 后关闭它们也是一个好习惯。

第四，每次执行循环时，您都在创建一个新的数据库连接（这将在服务器上创建一个新进程）。这是完全没有必要的。您应该在循环之前创建一次数据库连接，在整个循环中使用相同的连接，并且只在循环结束时关闭连接。因为您在一个循环中创建了如此多的连接，并且没有关闭其中任何一个，所以您最终会很快达到数据库进程的限制。

第五，我强烈建议使用 Oracle JDBC 驱动程序（类名`oracle.jdbc.OracleDriver`，在 JAR 中命名`ojdbc6.jar`或类似），而不是“旧”的 JDBC-ODBC 桥驱动程序，[它将在 Java 8 中从 Java 中删除](https://blogs.oracle.com/Lance/entry/removal_of_the_jdbc_odbc)。

第六，即使按照我的建议修复了您的 SQL，也不太可能按照您的意愿行事。目前只会为当月最后一天对应的列设置一个值。您是否可能打算用名称更新列`y`？

**编辑**以回应您编辑的问题：问题出在这一行：

```
 pstmt.setString(z, s[y]);                   //getting error in this line as per the debug report. 
```

这应该是

```
 pstmt.setString(1, s[y]); 
```

该数字`1`是查询中占位符的索引`?`。这些索引从 1 开始。您的查询中只有一个占位符，因此它的索引为 1。

# javascript - Javascript 查询选择器 DSL 作为一个独立的库

> ID：16182652
> 
> 赞同：1
> 
> 时间：2013-04-24T03:03:21.017
> 
> 标签：javascript, json, node.js, mongodb, dsl

我真的很喜欢 mongodb 的 json dsl 来查询数据库。我想知道是否有任何独立的 node.js/browser 库可以将这种 json 表达式转换为可以应用于某些上下文对象的 js 函数。

这就是我的意思。假设您有以下表达式：

```
{
  "context.user.age": { "$gte": 30, "$lte": 40 },
  "context.user.hobby": { "$in": ["swimming", "running"] }
} 
```

这可以翻译成一个js函数：

```
var f = function (context) {
  // @return {Boolean}
  return (context.user.age >= 30) &&
         (context.user.age <= 40) &&
         (['swimming', 'running'].indexOf(context.user.hobby) >= 0)
} 
```

我需要这个，因为我正在构建自己的 DSL。那么，你对这种功能有什么了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T04:38:41.823

至少有两个库可以执行与问题正文中描述的类似或易于调整的功能。

*   Benjamin Arthur Lupton 的[查询引擎](https://github.com/bevry/query-engine)，功能丰富
*   Craig Condon 的[筛子](https://github.com/crcn/sift.js)，轻量级

为了产生我的布尔返回函数，我写了这个（使用 sift）：

```
 parseCondition = (condition) ->
        ###
            @param {Object} condition - a condition statement written in swift.
            @return {Function} - condition fn to be applied on a context
                                 which will return a Boolean.
            @see https://github.com/crcn/sift.js
        ###
        return (context) ->
            [expectedContext] = swift condition, [context]
            return expectedContext is context 
```

我传入上下文对象并检查返回的对象是否相同。如果是，则条件已通过。

# python - 使用 pyinstaller 尝试制作独立的 exe 以生成 tkinter 窗口，但生成的 exe 不生成任何窗口；我错过了什么？

> ID：16182655
> 
> 赞同：2
> 
> 时间：2013-04-24T03:03:45.487
> 
> 标签：python, tkinter, pyinstaller

晚上好，尊贵的专家。我很可能会再次出卖我的一些无知！

我已经编写了一个 python 脚本，它在 tkinter 中创建一个窗口，并按照我想要的方式工作，据我所知。我现在想做的是把它变成一个独立的.exe，双击它会生成所述窗口以供使用。

我已经安装了 pyinstaller，并输入了重要的命令来从我不起眼的 .py 创建 .exe

```
.../python pyinstaller.py -w -F examplename.py 
```

并制作了闪亮的新 .exe 并将其放入 /dist 文件夹中。我似乎遇到的问题是，运行此应用程序不会在脚本中打开 tkinter 窗口，我不知道为什么。根据我在网上看到的教程和我对这个过程的有限理解，我怀疑它可能与一个 SPEC 文件有关，我还没有摆弄它，因为我不能 100% 确定那是什么导致这个问题。

我将非常感谢对此的任何见解，如果我忽略了您需要的关键信息，我会尽快尝试填写。谢谢！

编辑：事实证明，我在此使用的模块之一（scipy）与 pyinstaller 存在一些已知问题。当我注释掉 scipy 的东西时，它按预期的方式工作......当然减去了 scipy。我将不得不花一些时间来弄清楚/理解它的解决方法。

# c# - JQuery AJAX 在局部视图中发布

> ID：16182656
> 
> 赞同：0
> 
> 时间：2013-04-24T03:03:45.753
> 
> 标签：c#, jquery, ajax, asp.net-mvc-4, partial-views

在我的 C# MVC4 应用程序中，我有两个主要视图：“Index”和“Index_Perm”。登录用户的角色决定了呈现这些视图中的哪一个。“Index”包含一个名为“PMain”的视图，Index_Perm 包含一个名为“PMain_Lim”的视图。“PMain”和“PMain_Lim”包含另一个名为“Analysis”的局部视图。在“Analysis”内部，我有这个脚本：

```
<script type="text/javascript" charset="utf-8">
    $(document).ready(function () {
        $('#SubmitAverage').click(function () {
            var $form = $('#form1');
            $.ajax({
                type: "POST",
                url: "Home/Average",
                data: $form.serialize(),
                success: function () {
                    alert("Edit successful");
                },
                error: function () {
                    alert('failure');
                }
            });
        });
    });
    </script> 
```

我的问题是，当“索引”是正在访问的主视图时，单击“提交”按钮时该脚本会正确运行。但是，当“Index_Perm”是主视图时，单击按钮时，AJAX 发布失败并出现错误：`The resource you are looking for has been removed, had its name changed, or is temporarily unavailable. The directory or file specified does not exist on the Web server.`在 Firebug 中进行一些调查后，我看到它正在尝试访问： `mylocalhost/Home/Index_Perm/Home/Average`而不是：`mylocalhost/Home/Average`指定为要发送的 url我脚本中的 POST。以下是“PMain”和“PMain_Lim”中相同的代码的适用部分，其中包含与脚本相关的按钮：

```
 <div id="Analysis" title="Analysis">
        @Html.Action("Analysis", "Home", Model)
    </div>
</section>
<section>
         <h3>
            <button class="btn" id="SubmitAverage" value ="SubmitAverage" name="action:SubmitAverage" type="button">Submit Averages</button>
        </h3>
    </section>
<section>
    <div id="OtherView" title="OtherView" class="OtherChanges">
        @Html.Action("OtherView", "Home", (string)ViewBag.SearchKey)
    </div>
</section> 
```

有什么想法为什么它忽略了我指定为在 JQuery AJAX POST 中使用的 URL 和/或如何更正它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:07:59.207

在您的 ajax 帖子中使用 urlhelper

```
url: '@Url.Action("Average","Home")', 
```

# android - onCheckedChanged viewpager 片段问题

> ID：16182662
> 
> 赞同：0
> 
> 时间：2013-04-24T03:04:24.710
> 
> 标签：android, android-fragments, android-viewpager

在 viewpager 的片段中；我有一个带有 OnCheckedChangeListener 的复选框。

片段的当前索引位置正确显示在页面中。但是当我单击复选框（`onCheckedChanged`）时：

*   它显示下一个位置编号

如何使用`onCheckedChanged`当前位置？

```
 public class PageFragment extends Fragment {  

     private static int currentQuestionNumber;
     private static CheckBox review;
         public static PageFragment newInstance(int index ) {

             PageFragment pageFragment = new PageFragment();
             Bundle bundle = new Bundle();   
             bundle.putInt("index", index);
             pageFragment.setArguments(bundle);
             return pageFragment;
         }

    @Override  
         public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {  
     PageFragment.currentQuestionNumber = getArguments().getInt("index");
    review = (CheckBox) view.findViewById(R.id.Review); 

    PageFragment.review.setOnCheckedChangeListener(new OnCheckedChangeListener() { 

             @Override 
             public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) { 

    Toast.makeText(getActivity(), PageFragment.currentQuestionNumber  // shows next index number
+"-" +isChecked, Toast.LENGTH_SHORT).show();                     

             }

         });        
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:12:08.273

您的索引指的是下一页，因为 viewpager 将在显示当前项目时预加载下一个片段。尝试使用 yourViewPager.getCurrentItem() 获取显示位置的索引。

# ios - UIScrollView 缩放到矩形

> ID：16182664
> 
> 赞同：0
> 
> 时间：2013-04-24T03:04:28.573
> 
> 标签：ios, objective-c, uiscrollview

我试图通过指定滚动视图坐标内的矩形来放大 UIScrollView 内部。但是它没有按预期工作。我认为这是因为缩放比例或者我错过了转换。我试图缩放的滚动视图来自 Apple 的示例 PhotoScroller -- ImageScrollView。此外，我还复制了代码以生成一个框架以从 Apple 的示例中进行缩放：

```
- (CGRect)zoomRectForScrollView:(UIScrollView *)scrollView withScale:(float)scale withCenter:(CGPoint)center {

    CGRect zoomRect;

    // The zoom rect is in the content view's coordinates.
    // At a zoom scale of 1.0, it would be the size of the
    // imageScrollView's bounds.
    // As the zoom scale decreases, so more content is visible,
    // the size of the rect grows.
    zoomRect.size.height = scrollView.frame.size.height / scale;
    zoomRect.size.width  = scrollView.frame.size.width  / scale;

    // choose an origin so as to get the right center.
    zoomRect.origin.x = center.x - (zoomRect.size.width  / 2.0);
    zoomRect.origin.y = center.y - (zoomRect.size.height / 2.0);

    return zoomRect;
} 
```

现在实际缩放的代码如下：

```
CGPoint scrollRectCenter = CGPointMake(rect.origin.x + (rect.size.width /2) ,
                                       rect.origin.y + (rect.size.height / 2));
CGFloat newZoomScale = self.imageScrollView.zoomScale * 1.3f;
newZoomScale = MIN(newZoomScale, self.imageScrollView.maximumZoomScale);
CGRect zoomToRect = [self zoomRectForScrollView:self.imageScrollView withScale:newZoomScale withCenter:scrollRectCenter];
[self.imageScrollView zoomToRect:zoomToRect animated:YES]; 
```

考虑到缩放后的 imageView 缩放比例，我如何缩放到矩形，以使其适合？

我想要实现的是照片应用程序的效果，其中裁剪网格被移动并且滚动视图缩放到该矩形。

有没有人知道一个链接或代码示例来实现与照片应用程序类似的效果？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:03:40.410

让我猜猜……你已经实现了`- (void)scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(UIView *)view atScale:(float)scale`委托方法。

出现你的问题是因为调用这个方法时scrollview的缩放比例被重置为1。不知道为什么，不要问我。

您可以通过 2 种方式修复它：

1.  您将比例保存到变量中，然后 `- (void)scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(UIView *)view atScale:(float)scale`将变量设置为适当的比例并使用您的比例进行计算。
2.  你没有实现血腥的方法，除非你的滚动视图中有多个视图并且每个视图都可以单独缩放它不值得（毕竟你可以访问缩放比例`scrollview.zoomScale`）

如果您不实施该方法，请忽略此答案:)

# xml - 如何查看与 XML 命名空间关联的 XML 模式？

> ID：16182670
> 
> 赞同：0
> 
> 时间：2013-04-24T03:05:14.197
> 
> 标签：xml, xsd

我使用 vmware ovftool 创建了一个 ovf 文件：

```
<Envelope vmw:buildId="build-931074" 
          xmlns="http://schemas.dmtf.org/ovf/envelope/1"  
          xmlns:cim="http://schemas.dmtf.org/wbem/wscim/1/common"  
          xmlns:ovf="http://schemas.dmtf.org/ovf/envelope/1"  
          xmlns:rasd="http://schemas.dmtf.org/wbem/wscim/1/cim-schem/2/CIM_ResourceAllocationSettingData"  
          xmlns:vmw="http://www.vmware.com/schema/ovf"  
          xmlns:vssd="http://schemas.dmtf.org/wbem/wscim/1/cim-schema/2/CIM_VirtualSystemSettingData"  
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
....//deleting some contents
<OperatingSystemSection ovf:id="74"  
                        vmw:osType="windows7_64Guest"> 
```

如何理解以下行：

```
xmlns:vmw="http://www.vmware.com/schema/ovf" 
```

我能从中得到的只是这声明了命名空间前缀`vmw`。但是，如何查看此命名空间的架构文件？我的意思是如果没有模式文件，我们就无法获得从该命名空间派生的词汇表。“vmw:osType”是来自命名空间的词汇表。提前感谢您的有用见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T03:09:31.960

您必须向`XSD`创建者询问该架构。但是，主`XSD`文件通常会`schemaLocation`指向架构的物理位置。

此外，XSD 位于[此处](http://schemas.dmtf.org/ovf/envelope/1/dsp8023_1.1.0.xsd)。他们在[这里](http://pubs.vmware.com/vcd-51/index.jsp?topic=/com.vmware.vcloud.api.reference.doc_51/doc/operations/GET-OperatingSystemSection.html)有一个很好的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:45:53.020

如果您可以从命名空间声明`xmlns:vmw="http://www.vmware.com/schema/ovf"`中得到的只是它声明了命名空间前缀`vmw`，那么原因之一是这实际上就是它可靠地做的所有事情。命名空间名称可用于多种用途，但 XML 中的命名空间设计唯一保证的是它们提供唯一的字符串，以便不同的人可以在 XML 文档中使用相同的本地名称而不会发生名称冲突。

使用 URI 作为命名空间名称的一个原因是 URI 可以被寻求更多信息的人取消引用，就像您一样。在这种情况下，URI 所有者似乎没有在命名空间 URI 中提供任何人类可读的信息，因此您只能靠自己。

如果您可以验证您显示的文档，那么您的 XSD 验证器正在某处为该名称空间查找架构文档；很可能（尽管不能绝对保证）该模式文档是从 XML 实例文档、`xsi:schemaLocation`属性中或从`xs:import`验证器正在咨询的模式文档之一中的元素指向的。

当然，您总是可以尝试询问命名空间所有者，或使用搜索引擎来帮助查找命名空间的架构文档。当然，您找到的任何模式文档都可能是命名空间的权威或非权威定义。

祝你好运。

# ruby-on-rails - 如何在 Ruby 中结束语句

> ID：16182673
> 
> 赞同：0
> 
> 时间：2013-04-24T03:05:28.313
> 
> 标签：ruby-on-rails, ruby-on-rails-3, conditional-operator, line-endings

我有类似的代码

```
word.include?("test") ? @test = word : #do nothing 
```

我的问题是，rails 在冒号之后需要一些东西，并将下一行代码视为上述条件语句的一部分。我知道我可以使用常规的 if end 语句，但很想知道是否可以在冒号之后和到达新行之前结束语句？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:07:22.077

你可能会考虑这样的事情：

```
@test = word if word.include?("test") 
```

# angularjs - 从脚本 onload 调用 Angular 控制器

> ID：16182678
> 
> 赞同：3
> 
> 时间：2013-04-24T03:05:53.060
> 
> 标签：angularjs, angularjs-scope

从 onload 回调加载脚本后，我试图更新控制器的状态。

我加载了谷歌客户端 API：

```
<script src="https://apis.google.com/js/client.js?onload=OnLoadCallback"></script> 
```

然后在 OnLoadCallback 我尝试手动引导 AngularJS 并将设置状态设置为我的控制器：

```
function OnLoadCallback() {         
      var $injector = angular.bootstrap(document, ['app']);
      // load required gapi APIs          
      var $controller = $injector.get('$controller');        
      var UserCtrl = $controller('UserCtrl');
      UserCtrl.user.apiLoaded = true;          
}; 
```

它似乎无法创建注入 $scope 的控制器。由于呼叫`$controller('UserCtrl')`失败：

> 未捕获的错误：未知的提供者：$scopeProvider <- $scope

您可以通过查看此[Plunk](http://plnkr.co/edit/X4iG5iOw1k70fR8NayYc?p=preview)中的控制台来查看错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T03:20:37.153

你对控制器的使用错误，值必须设置在控制器的范围内

```
function OnLoadCallback() {
  //gapi.client.setApiKey('XXXXXXXXXXXX');
  //gapi.client.load('drive', 'v2', function() {
  var $injector = angular.bootstrap(document, ['app']);
  console.log('Angualar bootstrap complete');         

  var $scope = angular.element('body').scope();
  console.log('Find scope', $scope)

  $scope.$apply(function(){
    $scope.user.apiLoaded = true; 
  })
} 
```

演示：[Plunker](http://plnkr.co/edit/9NJFwPbq1u2ZbRYZWbLL?p=preview)

如果要获取控制器实例，则必须手动传递预期的注入值

```
 var $controller = $injector.get('$controller');        
  var UserCtrl = $controller('UserCtrl', {
    $scope: $scope
  });
  console.log(UserCtrl, 'UserCtrl') 
```

演示：[Plunker](http://plnkr.co/edit/hCvbp6qpw8vmbdunh5b3?p=preview)

# excel - vba/excel - 根据用户输入到 sheet1 上的单元格中，从 sheet2 中的值填充 sheet1 中的单元格

> ID：16182679
> 
> 赞同：0
> 
> 时间：2013-04-24T03:05:59.873
> 
> 标签：excel, vba

我创建了一个通用的 excel 文件来帮助演示我想要做什么。我命名为 Tool.xlsm 的文件包含两个工作表；工作表 1 和工作表 2。Sheet1 将被设计为有几个可以接受用户输入的字段。Sheet2将从用户隐藏，但将包含各种下拉列表选择选项及其相应的描述，这些描述应在选择特定代码时在Sheep1上的另一个单元格中显示。此外，Sheet2 将在一列中包含许多 ID#，在下一列中包含它们对应的用户名。这样做的目的是让用户能够快速将 ID# 与其所属的用户相关联。

这是我到目前为止所拥有的......我怀疑我是否会尽可能高效地完成它，但我非常感谢你们的专业知识！

```
Sub Button1_Click()

'Based on selected value of C1, show corresponding message in J1'
'Can this be done by simply referencing the code descriptions in sheet2?'

If Range("C1") = "code 1" Then
    Range("J1") = "code 1 description"
End If

If Range("C1") = "code 2" Then
    Range("J1") = "code 2 description"
End If

'End of code selection'
End Sub

Sub Button2_Click()

'Based on ID# entered into C3, display corresponding name in J1 (Sheet2 contains ID#s with corresponding names)'
'There has to be an esier way to loop through 1000s of records and display corresponding ID# and Person''s name'
'Rather than assigning Person 1, to Range J1, I should be able to just reference the cell Sheet2!E3 but that doesn''t seem to work'

If Range("C3") = "1001" Then
    Range("J1") = "Person 1"
End If

If Range("C3") = "34349090" Then
    Range("J1") = "Person 83"
End If

'End ID# search'
End Sub

Sub Button3_Click()

'Clear unlocked cells'

End Sub 
```

[我在 Dropbox 中的文件](http://db.tt/tfQi0PDK)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:31:34.530

对于您的查询：

> 这可以通过简单地引用 sheet2 中的代码描述来完成吗？

是的。您可以`VLOOKUP`为此使用公式。

同样，您可以使用`VLOOKUP`公式根据 ID 返回名称。

例如，假设您的用户名在 K 列，ID 在 J 列：

在工作表 1 上，假设单元格 C3 中的 ID，输入公式：`=VLOOKUP(C3, Sheet2!$J$K, 2, False)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T03:27:53.877

您可以使用 worksheet_change 事件。请相应地设置 rngFindCode 和 rngFindCode1 范围以参考您在 sheet2 中的数据。

下面是代码。

```
Private Sub Worksheet_Change(ByVal Target As Range)
    On Error Resume Next

    Application.EnableEvents = False

    If Target.Address = "$C$1" And Target.Cells.Count = 1 And Target.Value <> "" Then

        Dim rngFindCode As Range '
        Dim cellCode As Range

        Set rngFindCode = Sheets("Sheet2").Range("C1:C100")    ' Refers to range where code is in sheet 2
        Set cellCode = rngFindCode.Find(What:=Target.Value, LookIn:=xlValues, LookAt:=xlWhole, SearchOrder:=xlByRows)

        If Not cellCode Is Nothing Then
            Range("J1").Value = cellCode.Offset(0, 1).Value
        End If

    ElseIf Target.Address = "$C$3" And Target.Cells.Count = 1 And Target.Value <> "" Then

        Dim rngFindCode1 As Range '
        Dim cellCode1 As Range

        Set rngFindCode1 = Sheets("Sheet2").Range("E1:E100")    'Refers to range where name is
        Set cellCode1 = rngFindCode1.Find(What:=Target.Value, LookIn:=xlValues, LookAt:=xlWhole, SearchOrder:=xlByRows)

        If Not cellCode1 Is Nothing Then
            Range("J1").Value = cellCode1.Offset(0, 1).Value
        End If

    Else
        Range("J1").Value = ""
    End If

    Application.EnableEvents = True
End Sub 
```

# ios - 将 void (^)() 作为完成处理程序传递

> ID：16182680
> 
> 赞同：0
> 
> 时间：2013-04-24T03:06:16.583
> 
> 标签：ios, objective-c

我正在使用第三方库来执行一些功能，然后在完成后触发完成事件。如何传递具有 void (^)() 类型的完成处理程序？

```
obj.completionHandler = ??? 
```

该文档没有给出任何示例，只是说接受 void (^)() 类型。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T03:09:00.463

`void (^)()`是块类型

所以你可以传递一个块给它

```
obj.completionHandler = ^ {
    // code to execute when completed
}; 
```

# ruby-on-rails - 运行 ruby 服务器时出错

> ID：16182683
> 
> 赞同：1
> 
> 时间：2013-04-24T03:06:29.233
> 
> 标签：ruby-on-rails, ruby

我正在尝试在 ubuntu 12.04、rails 2.3.11、ruby 1.8.3 gem 1.5.3 中运行 ruby​​ 服务器并得到这个。这是一个依赖问题。还是配置问题。请帮助我。提前致谢。

```
root@virinchy-Aspire-4535:~/BBYIDX-2/BBYIDX-master# script/server
=> Booting WEBrick
=> Rails 2.3.18 application starting on http:/0.0.0.0:3000

Faraday: you may want to install system_timer for reliable timeouts
/usr/local/rvm/gems/ruby-1.8.7-p371/gems/activerecord-2.3.18/lib/active_record/connection_adapters/postgresql_adapter.rb:941:in `initialize': 
```

有什么我需要在这里解决的吗

```
FATAL:  role "bbyidx" does not exist (PGError)
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activerecord-2.3.18/lib/active_record/connection_adapters/postgresql_adapter.rb:941:in `connect'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activerecord-2.3.18/lib/active_record/connection_adapters/postgresql_adapter.rb:941:in `connect'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activerecord-2.3.18/lib/active_record/connection_adapters/postgresql_adapter.rb:217:in `initialize'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activerecord-2.3.18/lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `new'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activerecord-2.3.18/lib/active_record/connection_adapters/postgresql_adapter.rb:37:in    `postgresql_connection'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activerecord-2.3.18/lib/active_record/connection_adapters/abstract/connection_pool.rb:223:in `send'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activerecord-2.3.18/lib/active_record/connection_adapters/abstract/connection_pool.rb:223:in    `new_connection'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activerecord-2.3.18/lib/active_record/connection_adapters/abstract/connection_pool.rb:245:in   `checkout_new_connection'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activerecord-2.3.18/lib/active_record/connection_adapters/abstract/connection_pool.rb:188:in `checkout'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activerecord-2.3.18/lib/active_record/connection_adapters/abstract/connection_pool.rb:184:in `loop'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activerecord-2.3.18/lib/active_record/connection_adapters/abstract/connection_pool.rb:184:in `checkout'
from /usr/local/rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/monitor.rb:242:in `synchronize'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activerecord-2.3.18/lib/active_record/connection_adapters/abstract/connection_pool.rb:183:in `checkout'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activerecord-2.3.18/lib/active_record/connection_adapters/abstract/connection_pool.rb:98:in `connection'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activerecord-2.3.18/lib/active_record/connection_adapters/abstract/connection_pool.rb:326:in   `retrieve_connection'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activerecord-2.3.18/lib/active_record/connection_adapters/abstract/connection_specification.rb:123:in    `retrieve_connection'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activerecord-2.3.18/lib/active_record/connection_adapters/abstract/connection_specification.rb:115:in    `connection'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activerecord-2.3.18/lib/active_record/base.rb:1299:in `table_exists?'
from /home/virinchy/BBYIDX-2/BBYIDX-master/app/models/user.rb:73
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.18/lib/active_support/dependencies.rb:406:in `load_without_new_constant_marking'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.18/lib/active_support/dependencies.rb:406:in `load_file'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.18/lib/active_support/dependencies.rb:547:in `new_constants_in'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.18/lib/active_support/dependencies.rb:405:in `load_file'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.18/lib/active_support/dependencies.rb:285:in `require_or_load'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.18/lib/active_support/dependencies.rb:451:in `load_missing_constant'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.18/lib/active_support/dependencies.rb:106:in `const_missing'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.18/lib/active_support/dependencies.rb:118:in `const_missing'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.18/lib/active_support/inflector.rb:364:in `constantize'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.18/lib/active_support/inflector.rb:363:in `each'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.18/lib/active_support/inflector.rb:363:in `constantize'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.18/lib/active_support/core_ext/string/inflections.rb:162:in `constantize'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activerecord-2.3.18/lib/active_record/observer.rb:157:in `observed_class'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activerecord-2.3.18/lib/active_record/observer.rb:183:in `observed_classes'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activerecord-2.3.18/lib/active_record/observer.rb:166:in `initialize'
from /usr/local/rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/singleton.rb:94:in `new'
from /usr/local/rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/singleton.rb:94:in `instance'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activerecord-2.3.18/lib/active_record/observer.rb:38:in `instantiate_observers'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activerecord-2.3.18/lib/active_record/observer.rb:36:in `each'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activerecord-2.3.18/lib/active_record/observer.rb:36:in `instantiate_observers'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/actionpack-2.3.18/lib/action_controller/dispatcher.rb:15:in `define_dispatcher_callbacks'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.18/lib/active_support/callbacks.rb:182:in `call'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.18/lib/active_support/callbacks.rb:182:in `evaluate_method'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.18/lib/active_support/callbacks.rb:166:in `call'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.18/lib/active_support/callbacks.rb:90:in `run'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.18/lib/active_support/callbacks.rb:90:in `each'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.18/lib/active_support/callbacks.rb:90:in `send'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.18/lib/active_support/callbacks.rb:90:in `run'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.18/lib/active_support/callbacks.rb:276:in `run_callbacks'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/actionpack-2.3.18/lib/action_controller/dispatcher.rb:51:in `send'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/actionpack-2.3.18/lib/action_controller/dispatcher.rb:51:in `run_prepare_callbacks'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/rails-2.3.18/lib/initializer.rb:631:in    `prepare_dispatcher'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/rails-2.3.18/lib/initializer.rb:185:in   `process'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/rails-2.3.18/lib/initializer.rb:113:in   `send'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/rails-2.3.18/lib/initializer.rb:113:in `run'

from /home/virinchy/BBYIDX-2/BBYIDX-master/config/environment.rb:22

from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.18/lib/active_support/dependencies.rb:182:in `require'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.18/lib/active_support/dependencies.rb:182:in `require'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.18/lib/active_support/dependencies.rb:547:in `new_constants_in'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.18/lib/active_support/dependencies.rb:182:in `require'
from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/rails-2.3.18/lib/commands/server.rb:84
from script/server:3:in `require'
from script/server:3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T03:14:04.100

这是你的问题：

```
FATAL:  role "bbyidx" does not exist (PGError) 
```

您正在尝试使用不存在的角色连接到您的 PostgreSQL 数据库。`createuser`您可以使用终端中的命令创建此角色。

```
createuser bbyidx 
```

# csv - 删除 Jmeter 输出 CSV 文件的标题

> ID：16182684
> 
> 赞同：1
> 
> 时间：2013-04-24T03:06:43.593
> 
> 标签：csv, jmeter

我已根据我的要求更改了 Jmeter 属性文件。一切正常，但我不想将标签（标题）保存到我的 csv 文件中。

那么我该怎么做呢？

这是我的 jmeter.propertie 文件，我在其中编辑了结果文件配置部分：

```
#---------------------------------------------------------------------------
# Results file configuration
#---------------------------------------------------------------------------
# This section helps determine how result data will be saved.
# The commented out values are the defaults.

# legitimate values: xml, csv, db. Only xml and csv are currently supported.
jmeter.save.saveservice.output_format=csv

# true when field should be saved; false otherwise

# assertion_results_failure_message only affects CSV output
#jmeter.save.saveservice.assertion_results_failure_message=false
#
# legitimate values: none, first, all
#jmeter.save.saveservice.assertion_results=none
#
#jmeter.save.saveservice.data_type=true
jmeter.save.saveservice.label=false
#jmeter.save.saveservice.response_code=true
# response_data is not currently supported for CSV output
#jmeter.save.saveservice.response_data=false
# Save ResponseData for failed samples
#jmeter.save.saveservice.response_data.on_error=false
#jmeter.save.saveservice.response_message=true
#jmeter.save.saveservice.successful=true
#jmeter.save.saveservice.thread_name=true
#jmeter.save.saveservice.time=true
#jmeter.save.saveservice.subresults=true
#jmeter.save.saveservice.assertions=true
#jmeter.save.saveservice.latency=true
#jmeter.save.saveservice.samplerData=false
#jmeter.save.saveservice.responseHeaders=false
#jmeter.save.saveservice.requestHeaders=false
#jmeter.save.saveservice.encoding=false
#jmeter.save.saveservice.bytes=true
#jmeter.save.saveservice.url=false
#jmeter.save.saveservice.filename=false
jmeter.save.saveservice.hostname=true
jmeter.save.saveservice.thread_counts=true
#jmeter.save.saveservice.sample_count=false
#jmeter.save.saveservice.idle_time=false

# Timestamp format - this only affects CSV output files
# legitimate values: none, ms, or a format suitable for SimpleDateFormat
#jmeter.save.saveservice.timestamp_format=ms
jmeter.save.saveservice.timestamp_format=yyyy/MM/dd HH:mm:ss.SSS

# For use with Comma-separated value (CSV) files or other formats
# where the fields' values are separated by specified delimiters.
# Default:
#jmeter.save.saveservice.default_delimiter=,
# For TAB, since JMeter 2.3 one can use:
#jmeter.save.saveservice.default_delimiter=\t

# Only applies to CSV format files:
jmeter.save.saveservice.print_field_names=false

# Optional list of JMeter variable names whose values are to be saved in the result data         files.
# Use commas to separate the names. For example:
#sample_variables=SESSION_ID,REFERENCE
# N.B. The current implementation saves the values in XML as attributes,
# so the names must be valid XML names.
# Versions of JMeter after 2.3.2 send the variable to all servers
# to ensure that the correct data is available at the client.

# Optional xml processing instruction for line 2 of the file:
#jmeter.save.saveservice.xml_pi=<?xml-stylesheet type="text/xsl"     href="../extras/jmeter-results-detail-report_21.xsl"?>

# Prefix used to identify filenames that are relative to the current base
#jmeter.save.saveservice.base_prefix=~/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:08:51.933

这是由以下控制的：

```
jmeter.save.saveservice.print_field_names=false 
```

所以你的配置看起来不错。

将它移动到 user.properties 以确保它没有在那里配置另一个值。

# php - WHERE子句等中的PHP未知列

> ID：16182686
> 
> 赞同：0
> 
> 时间：2013-04-24T03:06:55.110
> 
> 标签：php, mysql

我似乎遇到了错误，通常一切都对我有用，但我很累，我似乎无法弄清楚我哪里出错了。

我收到这些错误：

```
Notice: Unknown column 'test' in 'where clause'SELECT * FROM settings WHERE player = `test` in C:\xampp\htdocs\ranking\search.php on line 18

Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in C:\xampp\htdocs\ranking\search.php on line 26

Unknown column 'test' in 'where clause' 
```

这是我在 localhost 上使用的 php 代码。

```
<?php
//database infomation
$dbhost = "localhost";
$dbname = "databasesname";
$dbuser = "root";
$dbpass = "";
//Connect to database
mysql_connect ( $dbhost, $dbuser, $dbpass)or die("Could not connect: ".mysql_error());
mysql_select_db($dbname) or die(mysql_error());

if(isset($_POST['search'])) {
$searchinfo = $_POST['searchinfo'];
$type = $_POST['group1'];
if($type == "class"){

} else {
$query = "SELECT * FROM settings WHERE player = `$searchinfo`";
$result = mysql_query($query) or trigger_error(mysql_error().$query);

echo "<table><tr><th>Username</th>";
echo "<th> </th>";
echo "<th>Created</th>";
echo "<th>Infastructure</th>";
echo "<th>Statename</th>";
echo "<th>Money</th></tr>";
while ($row = mysql_fetch_array($result) or die($result."<br/><br/>".mysql_error())) { 
 echo '<tr><td>'
 . $row['player'] . '</td><td>'
 . $row['data_type'] . '</td><td>'
 . $row['data'] .  '</td><td> ';

 } }

}

?>
<html>
<head>
<rel href="includes/style.css" type="text/css">
<title> Ranking System for Herocraft | Search </title>
</head>
<center>
<div id="searchbar">
<form method="POST" action="<?=$_SERVER['PHP_SELF']?>">
<input type="radio" name="group1" value="username">Username
<input type="radio" name="group1" value="class">Class
<input name="searchinfo" id="searchinfo" size="30" value="Enter your search" maxlength="30" />
<input type="submit" name="search" value="search" /><br />
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T03:08:38.837

您正在使用反引号在 SQL 查询中引用您的玩家姓名。反引号用于列名。

使用普通引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T03:13:12.553

改变

```
$query = "SELECT * FROM settings WHERE player = `$searchinfo`"; 
```

至

```
$query = "SELECT * FROM settings WHERE player = '$searchinfo'"; 
```

# gcc - GCC 向后兼容性

> ID：16182687
> 
> 赞同：2
> 
> 时间：2013-04-24T03:07:00.440
> 
> 标签：gcc, g++, redhat, yum, rhel

我正在将应用程序移植到红帽企业 5 服务器，并且该服务器安装了 GCC v4.1.2。我需要 GCC 4.2，而 4.1.2 是 yum 网络中的最新版本。如果我下载一个较新的 .repo 文件并运行 yum install 来更新它，安装是否有可能导致服务器上运行的旧应用程序出现依赖关系失败？我不觉得它会，但我并不乐观，这是我第一次在实时服务器上工作，我不想搞砸任何事情。就这样去做安全吗？

感谢您的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:43:56.030

来自 GCC 4.2 的运行时库与来自 GCC 4.1 的运行时库向后兼容，因此与旧库链接的任何内容都应该适用于新库。

也就是说，可能存在依赖于特定 4.1.2 版本的 RPM 包会抱怨，即使从技术上讲它们可以与较新的库一起使用。当然，如果你搞砸了，那是你自己的错；-)

无论如何，我认为 RHEL5 没有比 GCC 4.1.2 更新的东西了

# java - 为什么这些按位运算会产生大写字母？

> ID：16182689
> 
> 赞同：2
> 
> 时间：2013-04-24T03:07:03.533
> 
> 标签：java, bitwise-operators

我有以下代码：

```
static char toUpper(char c)
{
    if (c >= 'a' && c <= 'z')
        return (char) (c & ~('a' - 'A'));

    return c;
} 
```

为什么这可以正确输入大写字母？按位运算是我最感兴趣的。我或多或少地理解数学，我知道它*确实有效，但不是它**为什么*有效的根本原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T03:13:59.817

它之所以有效，是因为在 ASCII（与 Unicode 的下半部分相同）中，位模式为`A`( `0100 0001`)`0x41`而`a`为`0110 0001`( `0x61`)。

因此`'a' - 'A'`is `0x20`or `0010 0000`，这是您必须在小写字母上清除以使其大写的位。

您可以从下表中看到，大写的范围从`0x41`through`0x5a`和等效的小写字母从`0x61`through `0x7a`：

![在此处输入图像描述](https://i.stack.imgur.com/vsb5f.gif)

清除位位置的方法是`and`对该位置进行逻辑否定。

因此（使用 8 位）`~0x20`是`0xdf`( `1101 1111`) 并且字母的操作`c`如下所示：

```
 0110 0011     0x63 or 'c'
& 1101 1111     0xdf, or ~('a' - 'A')
  ---- ----
  0100 0011     0x43 or 'C' 
```

有关按位运算符的更详细介绍，请参见[此处](https://stackoverflow.com/questions/1746613/bitwise-operation-and-usage/1746642#1746642)。

* * *

当然，值得一提的是，您可以更轻松地使用：

```
c = Character.toUpperCase (c); 
```

*无需*编写自己的函数。有关详细信息，请参见[此处](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#toUpperCase%28char%29)。而且，如果您真的想将其限制为 ASCII 小写字母，您仍然可以将其包装在`if`语句中，尽管如果您希望您的应用程序在非 ASCII 世界中使用，我建议这不是一个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T04:49:41.353

让我们举个例子来理解你的代码。

1) 假设您将字符 'p' 传递给您的方法**toUpper()**。

2) 现在您的 if 语句中的条件将始终为真，因为任何字母都介于“a”和“z”之间。

3）在 if 语句中，您有以下代码

```
return (char) (c & ~('a' - 'A')); 
```

4）在上述声明中这部分

```
('a' - 'A') 
```

将始终首先执行，因为它在括号中。在这里，您只是从“a”中减去“A”，即 97-65，它们是 ASCII 值。（A---> 65 和 a----> 97）。**因此，无论您传递给toUpper()**方法的字符如何，答案总是 32 。

5) 那么怎么有操作符**~**即

```
~('a' - 'A') 
```

正如我所说的 ('a' - 'A') 的答案总是 32，因此运算符 ~ 应用于数字 32 即

```
~32 
```

预测算子~的输出，公式如下图

*~(number)
= -(number) - 1*

因为这里的数字是 32，所以上面公式的 ~32 的输出是

*-(32) - 1
= -32 - 1
= -33*

所以输出

```
~('a' - 'A') 
```

总是-33

5）现在你有

```
(c & ~('a' - 'A')) 
```

IE

```
(c & -33) 
```

这里 c 有用户传递的字母表，在我们的例子中是 'p'

IE

```
p & -33 
```

由于 'p' 的 ASCII 值是 112，即

```
112 & -33 
```

IE

```
1110000 & 1011111 
```

分别是二进制112和-33的对应值

所以在应用运算符 & 我们得到

```
1010000 
```

6) 现在将 1010000 转换为十进制，我们得到 80，这是大写字母“P”的 ASCII 值。

7）所以一般来说我们可以说将要执行的操作是

```
(ASCII value of user inputted alphabet) & -33 
```

8）还有一件事“Java适用于Unicode。但是Unicode中的第一组字符是ASCII，@paxdiablo也说过。所以我在上面的答案中提到了ASCII。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T03:15:20.787

在 Java 中，字符只是无符号的 16 位整数。

对于 ascii，小写字符为 97-122，对应的大写字母为 65-90。所以你只需要从每个值中减去 32。

如果您查看代码`(char) (c & ~('a' - 'A'))`，您可以从内而外地评估它开始。

`'a' - 'A'`给你所需偏移量的负数，32。

`~(32)`翻转位，所以你现在有 -33。这是一个位掩码，除了倒数第六位 1 之外的所有内容。

`(c & -33)`应用位掩码，将适当的位设置为 0。这实际上减去了 32。

`(char)`只是做一个不必要的转换回 char （编译器无论如何都会插入一个转换）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T03:15:19.517

字符表示为数字。请查看[ascii 表](http://www.asciitable.com/)以了解每个字符被映射到的数字。

上面的按位运算，基本就是把小写字母对应的数字变成了大写字母对应的数字

# java - Java 克隆的替代方案

> ID：16182690
> 
> 赞同：-1
> 
> 时间：2013-04-24T03:07:20.540
> 
> 标签：java, clone

我有一些 Java 克隆的替代方法。我能否请一些帮助来描述这些替代方案的工作原理：

替代方案是：

```
•   Using a copy constructor for creating a new object as a copy of an existing object

•   Creating your own interface with copy methods 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T03:30:16.570

这是使用复制构造函数创建新对象作为现有对象的副本的示例：

```
public class MyClass {
  private int myVar;
  public MyClass() { this.myVar = 0; }
  public MyClass(MyClass other) { this.myVar = other.myVar; }
} 
```

这是使用复制方法创建自己的界面的示例

```
public interface MyCopy {
  Object copy();
}

public class MyClass implements MyCopy {
  private int myVar;
  public MyClass() { this.myVar = 0; }
  public MyClass(int myVar) { this.myVar = myVar; }
  public Object copy() { return new MyClass(myVar); }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T03:14:40.317

“使用复制构造函数创建新对象作为现有对象的副本”

```
public class SampleClass
{
    int x;
    int y;
    public SampleClass(SampleClass old)     // Copy Constructor
    {
        this.x = old.x;
        this.y = old.y;
    }

    public SampleClass(int x, int y)        // Regular constructor
    {
        this.x = x;
        this.y = y;
    }
} 
```

复制构造函数创建传递给构造函数的对象的副本。

“使用复制方法创建自己的界面”

老实说，不确定他们在这里指的是什么。也许他们的意思是创建一个带有 copy() 方法的接口，然后您可以实现该接口，但我不确定您为什么不只使用 Cloneable 接口。

# java - 很久以前正确设置后Eclipse自发无法导入ActionBarSherlock

> ID：16182692
> 
> 赞同：0
> 
> 时间：2013-04-24T03:07:32.567
> 
> 标签：java, android, eclipse, actionbarsherlock, slidingmenu

我正在开发一个同时使用 ActionBarSherlock 和 SlidingMenu 的应用程序。它工作得很好，当突然 eclipse 自发地决定它找不到 com.actionbarsherlock.app.SherlockActivity 时，我正准备发布它；

这是 SlidingActivity 扩展 SherlockActivity 的样子： ![http://i.imgur.com/VzTy42R.png](https://i.stack.imgur.com/IgP6T.png)

同样，我的应用程序本身也充满了错误。

它工作正常，我不知道会有什么改变。它在我的 Dropbox 中，所以也许以某种方式做了一些事情。它似乎仍然能够找到引用的 ABS 项目。我已经尝试从构建路径中删除引用并再次添加它，将 ABS 添加为外部 JAR，刷新项目，重新启动 eclipse ......基本上所有没有真正做任何事情的东西。如果有帮助，这里是参考和构建路径的图片：http: [//imgur.com/a/JpWtH](http://imgur.com/a/JpWtH)

谢谢你能指点我的任何东西！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:27:05.273

与其尝试自己添加外部 jar，不如尝试：1）右键单击您的 actionBarSherlock 库项目，转到属性，单击“Android”，转到底部，选中“是库”。2）右键单击您的主项目->属性-> Android，在底部（取消选中“是库”）单击“添加”并选择您之前添加的库。

您还应该从构建路径中删除任何错误的 jar 并重新构建您的项目。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T20:30:48.157

检查您是否安装了最新的**Android 构建系统**，然后**检查更新**。之后，重新启动 Eclipse，它应该可以正常构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:40:54.783

尝试将您的 android sdk 移动到其他文件夹，并将 eclipse 中的 sdk 路径更改为新复制的 sdk 路径。在 Eclipse 中更改 sdk 的路径

```
eclipse->windows->prefernces->android     //here you will see the path set earlier 
```

如果更改路径后在资源管理器中找不到项目，请导入它们。然后清理你的项目。

这对我有用，希望它也对你有用

# c# - 从字符串中提取值

> ID：16182696
> 
> 赞同：2
> 
> 时间：2013-04-24T03:07:50.817
> 
> 标签：c#, xml, string

我有一个这样的字符串：

```
<point srsName="EPSG:4326(WGS84)">
<coordinates>121.7725934555,25.1508396138</coordinates> 
```

我怎样才能只从这个字符串中获取值，例如`121.7725934555,25.1508396138`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T03:10:44.157

如果字符串很短并且您不需要从中解析任何其他内容，则可以使用正则表达式：

```
<coordinates>([^,]+),([^<]+)</coordinates> 
```

两个捕获组将得到`121.7725934555`和`25.1508396138`。

```
var str = @"<point srsName=""EPSG:4326(WGS84)"">
<coordinates>121.7725934555,25.1508396138</coordinates>";
var m = Regex.Match(str, "<coordinates>([^,]+),([^<]+)</coordinates>");
Console.WriteLine("'{0}' '{1}'", m.Groups[1], m.Groups[2]); 
```

这是[关于 ideone 的演示](http://ideone.com/bvEqXm)。

# sql - 如何在子查询结果上使用 MAX()？

> ID：16182700
> 
> 赞同：18
> 
> 时间：2013-04-24T03:08:10.427
> 
> 标签：sql, oracle, subquery, aggregate-functions, max

我是 Oracle 和 SQL 世界的新手。我有一个小问题，我一生都无法弄清楚，我花了几个小时尝试不同的方法，但我无法得到我期望的结果。所以这是我的查询：

```
SELECT *
from(Select membership.mem_desc,membership.mem_max_rentals,membership_history.mem_type,      
    count(membership_history.MEM_TYPE) as membership_count
    from membership_history
    JOIN membership ON membership.mem_type = membership_history.mem_type
    group by (membership_history.mem_type,membership.mem_desc,membership.mem_max_rentals)
    ) g
WHERE g.membership_count = (select MAX(membership_count) from g); 
```

所以内部查询完美运行并返回两个结果。现在我有了这两个值，我试图弄清楚如何返回具有最大成员计数的行，这是我一直卡住的地方。在上面的查询中，我尝试在 where 子句中使用 MAX()，但在该选择中，我不断收到错误“找不到表”（意思是“g”）。所以我的问题是如何对子查询的结果使用 MAX() 函数？任何想法或建议将不胜感激！！！！！！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-24T05:07:07.450

您不需要找到最大值的子查询。
反而， ; *在对行进行排序*后， 您只需要*第一*行：

 *```
select * from (
  select 
    membership.mem_desc,
    membership.mem_max_rentals,
    membership_history.mem_type,      
    count(membership_history.MEM_TYPE) as membership_count
  from membership_history
  JOIN membership ON membership.mem_type = membership_history.mem_type
  group by (membership_history.mem_type,membership.mem_desc,membership.mem_max_rentals)
  ORDER BY 4 DESC  -- Added this line
) g
WHERE ROWNUM = 1\. -- Added this line 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-19T16:48:14.520

这都是很好的 SQL。

使用最大主键列值查找列值的最佳方法是：

```
SELECT .... from tablename
WHERE ... AND
  (SELECT max(primary key name) FROM tablename WHERE .... ) = primary_key_name 
```

此示例将返回一个标量值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-15T23:52:02.663

我在 Access Query 中遇到了类似的问题……根据这个线程中的一些评论，我们是否理解 ACCESS MAX 函数只能用于/与主键字段一起使用？...基本上，我有一个表，其中定义了与实体相关的地址，但是略有不同；1）一旦保存，就不允许删除或更改记录（意味着一个实体可以有多个地址记录），2）任何当前实体地址都可以有；HOME（1 条记录）或 HOME 和 MAIL（2 条记录）......每个地址记录都有一个（ID）（自动编号主键）一个与 HOME 记录的（ID）匹配的 HOME ID（HID）（HID 不是主键和不是唯一的）和一个实体 ID（EID）......所以......当我尝试使用子查询来获取给定实体的最大（HID）值时，我只希望返回当前地址......

我发现解决此问题的唯一方法是将最大子查询替换为返回实体的 MAX HID 值的 Max 函数（该函数在 VBA 中使用带有 DAO 逻辑的子查询语句）

这是 HOME 子查询，它是主查询的一部分（主查询需要为每个实体返回一行；EID、Home.Address、Mail.Address）

```
Select *
From tbAddresses As tba1
Where tba1.aType = "Home"
  And tba1.HID = (Select MAX(tba2.HID) 
                      From tbAddresses As tba2 
                     Where tba1.EID = tba2.EID) 
```

仅当 Home 和 Mail 的 Where 子句（未显示）被以下函数替换时，主查询才能正常工作。如果如上所述包含 MAX 子查询，则它不起作用。

因此，如果 MAX 函数需要 PRIMARY KEY 字段才能工作，这可能解释了为什么我的查询失败，尽管这听起来像是一个主要限制。

```
Where tba1.HID = fnGetMaxHID(tba1.EID) 
```

这是一些应该只返回 3 行的测试数据

```
ID    HID    EID   aType  Address
 1      1    100   Home   Blah 1
 2      2    101   Home   Blah 2
 3      2    101   Mail   PO Box Blah 0
 4      4    102   Home   Blah 3
 5      5    101   Home   Blah 4 
```

最后一点，Access Pro 的几个版本；2002 年、2003 年、2016 年进行了测试，都产生了相同的结果。所以这个问题要么是 max 函数的固有怪癖，要么是某种可能被忽略或被忽视的错误？...该功能对我来说是一种解决方法，但可能对其他人不起作用，所以如果澄清 MAX 功能会很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-23T08:04:33.153

这里，聚合可能不会出现在 WHERE 子句中，除非它出现在 HAVING 子句或选择列表中包含的子查询中，并且正在聚合的列是 SQL Server 中的外部引用。

为了演示，我们有一个名为“Info”的表，其中包含一些记录。

```
--Select records from info
SELECT * FROM INFO 
```

**截屏**

![在此处输入图像描述](https://i.stack.imgur.com/GgrgV.png)

问题陈述：查找最大 id 的 INFO 的所有详细信息。

```
SELECT * FROM INFO WHERE ID = MAX(ID) 
```

当他执行上述脚本时，它给了他以下错误：

> 消息 147，级别 15，状态 1，第 3 行
> 聚合可能不会出现在 WHERE 子句中，除非它位于 HAVING 子句或选择列表中包含的子查询中，并且正在聚合的列是外部引用。

即使在查询描述中给出了解决方案，他也无法解决这个问题。

由于缺乏经验，他根据错误信息想出了上述查询的另一个版本。

```
SELECT * FROM INFO HAVING ID = MAX(ID) 
```

> 消息 8121，级别 16，状态 1，行 1
> 列“INFO.id”在 HAVING 子句中无效，因为它不包含在聚合函数或 GROUP BY 子句中。

他实际上想要的是ID的表INFO最大值。根据问题陈述，正确的解决方案如下，不会产生错误。

```
SELECT * FROM INFO WHERE ID = (SELECT MAX(ID) FROM INFO) 
```

**截屏**

![在此处输入图像描述](https://i.stack.imgur.com/zakvv.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T06:15:04.253

您不能直接在 where 子句中使用派生表，它会给出`table or view does not exist`错误，因此要获得可以使用`HAVING`子句或`Analytical Functions`之`Rownum`类的最大计数值

```
select * from
      (Select membership.mem_desc,membership.mem_max_rentals,membership_history.mem_type,      
      count(membership_history.MEM_TYPE) as membership_count
      from membership_history a
      JOIN membership b ON b.mem_type = a.mem_type
      group by (membership_history.mem_type,membership.mem_desc,membership.mem_max_rentals)
      having count(a.MEM_TYPE) = (Select      
      MAX(count(a.MEM_TYPE)) from membership_history a
      JOIN membership b ON b.mem_type = a.mem_type
      group by (a.mem_type,b.mem_desc,b.mem_max_rentals))); 
```

（或者）

```
select * from
(SELECT g.*,rank() over (order by membership_count desc) rnk from
      (Select membership.mem_desc,membership.mem_max_rentals,membership_history.mem_type,      
      count(membership_history.MEM_TYPE) as membership_count
      from membership_history
      JOIN membership ON membership.mem_type = membership_history.mem_type
      group by (membership_history.mem_type,membership.mem_desc,membership.mem_max_rentals)) g)
WHERE rnk=1; 
```

（或者）

```
select * from
(SELECT g.*,rownum rn from
      (Select membership.mem_desc,membership.mem_max_rentals,membership_history.mem_type,      
      count(membership_history.MEM_TYPE) as membership_count
      from membership_history
      JOIN membership ON membership.mem_type = membership_history.mem_type
      group by (membership_history.mem_type,membership.mem_desc,membership.mem_max_rentals)
      order by membership_count desc) g)
WHERE rn=1; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T03:26:44.347

你可以尝试类似的东西

```
 SELECT membership.mem_desc,membership.mem_max_rentals,membership_history.mem_type, membership_count, rank() over ORDER BY membership_count DESC as ranky
from
(Select membership.mem_desc,membership.mem_max_rentals,membership_history.mem_type,      
count(membership_history.MEM_TYPE) as membership_count
from membership_history
JOIN membership ON membership.mem_type = membership_history.mem_type
group by (membership_history.mem_type,membership.mem_desc,membership.mem_max_rentals)
) 
WHERE ranky =1; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-21T05:12:55.860

我认为最干净的解决方案是使用 ALL 比较条件。它用于将值与列表或子查询进行比较。

```
SELECT 
  m.mem_desc,
  m.mem_max_rentals,
  mh.mem_type,      
  COUNT(mh.mem_type) as membership_count
FROM membership_history mh
JOIN membership m ON m.mem_type = mh.mem_type
GROUP BY mh.mem_type,m.mem_desc,m.mem_max_rentals
HAVING membership_count >= ALL (
  SELECT count(*)
  FROM membership_history
  GROUP BY mem_type
) 
```*

# python - 为什么easy_install 使用python 2.6 进行zeromq 绑定安装？

> ID：16182703
> 
> 赞同：0
> 
> 时间：2013-04-24T03:08:36.870
> 
> 标签：python, zeromq

```
sudo easy_install pyzmq
Searching for pyzmq
Best match: pyzmq 13.0.2
Processing pyzmq-13.0.2-py2.6-macosx-10.8-intel.egg
pyzmq 13.0.2 is already the active version in easy-install.pth

Using /Library/Python/2.6/site-packages/pyzmq-13.0.2-py2.6-macosx-10.8-intel.egg
Processing dependencies for pyzmq
Finished processing dependencies for pyzmq 
```

现在我必须像这样用 zeromq 运行我的 python 程序

```
python2.6 program.py 
```

我的默认 python 是 python 2.7。如何使用 python 2.7 安装 pyzmq 模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T04:21:12.177

可能是因为`easy_install`你的路径是 Python 2.6。

检查输出

```
which easy_install
head -n 1 $(which easy_install) 
```

你可能会有你的答案。您可能需要为 Python 2.7 安装或重新安装 setuptools/distribute，或者只需确保 Python 2.7 easy_install 在您的 PATH 上的 2.6 之前。你可以试试

```
which -a easy_install 
```

查看多个easy_installs 在您的PATH 上的位置。

# java - 改变 JProgressBar 的形状

> ID：16182705
> 
> 赞同：2
> 
> 时间：2013-04-24T03:08:48.637
> 
> 标签：java, swing, shape, jprogressbar

我是 Java 新手，但需要知道开发人员是否可以更改`JProgressBar`. 我的意思是假设在我的情况下我想改变形状，使它看起来像一个圆圈或其他东西？

虽然我只是希望它从条形变为弧形，或者您可以说我想将条形更改为任何其他形状。我的进度条可能看起来像条形以外的曲线。我想在其中添加一条曲线。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T03:20:25.493

a 的外观`JProgressBar`由组件的 UI 委托控制，通常派生自`BasicProgressBarUI`. 您可以提供自己的委托，如此处所示[，](https://stackoverflow.com/a/8886795/230513)并覆盖所需的绘制方法。

附录：对于半圆形显示，您可以利用[`DialPlot`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/plot/dial/DialPlot.html)图书馆[`JFreeChart`](https://stackoverflow.com/tags/jfreechart/info)。[这里](https://stackoverflow.com/q/16163964/230513)讨论了一个完整的例子。您可以直接使用它或在 UI 委托中呈现图表。

![图片](https://i.stack.imgur.com/2rugK.png)

# ruby-on-rails - Ruby on Rails 中的脚手架问题

> ID：16182711
> 
> 赞同：-1
> 
> 时间：2013-04-24T03:09:21.880
> 
> 标签：ruby-on-rails, ruby, model-view-controller

我在 Rails 中尝试了一些东西，但在脚手架过程中遇到了一个特殊问题。这可能是我不熟悉的东西，让我告诉你我做了什么：

第一的：

```
rails g controller painel painel 
```

创建一个简单的首页二：

```
rails g scaffold Noticia title:string category:string tags:string text:text 
```

然后我重复了同一行，但更改了名称，如下所示：

```
rails g scaffold Artigo title:string category:string tags:string text:text 
```

`Ideia`我对and做了同样的事情`Analise`。

完成后，我查看了文件结构，Noticia 和 Ideia 的控制器是`noticia_controller.rb`and`ideia_controller.rb`但另外两个是`artigos_controller.rb`and `analises_controller.rb`，两个是复数，两个是单数。自然地，前两个在页面上没有按应有的方式工作，我试图一次又一次地重复相同的过程以获得相同的结果。我将不胜感激有关此事的任何想法，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T03:11:35.600

这是因为 Rails 中的复数规则更适合英语而不是其他语言。

我强烈建议避免使用脚手架生成器，而只使用以下两个命令生成控制器和模型：

```
rails g controller artigos
rails g model artigo category:string 
```

然后从那里开始建设。

# c - C中的员工薪酬程序，带有数组和结构

> ID：16182722
> 
> 赞同：2
> 
> 时间：2013-04-24T03:10:54.320
> 
> 标签：c, arrays, struct

我对这个程序的输出有一些问题。

逻辑似乎没问题，但是每当我编译/运行它时，我都会在输出部分得到一个（11db）（我使用 Xcode）。

它说“构建成功”并且代码本身没有显示任何错误。

基本上，您必须从输入文件“clock.txt”中读取一些值，其中包含：

*员工数 (n) *他们的名字和姓氏，然后是他们的工资率，（你把它放在一个名为员工的结构中）*周数 (k)

然后，您必须计算一周的总工资（超过，总税额和净工资（总税）。

这是我到目前为止所写的：

```
#include <stdio.h>
#include <string.h>
#define MAX_LEN 30

struct employee {
    char first[MAX_LEN];
    char last[MAX_LEN];
    double payperhr;
    double gross;
    double taxes;
    double hours_in_week;
} ;

int main() {
    FILE *ifp, *ofp;
    ifp = fopen("clock.txt", "r");
    ofp = fopen("w2.txt", "w");
    int i, j, n, k, m, l, matchLast, found;
    int hourIn, minIn, hourOut, minOut;
    double total_time_day = 0.0;
    double under40tax, over40tax, tax;
    double netPay;

    char  firstRead[MAX_LEN],  lastRead[MAX_LEN], lastName[MAX_LEN], firstName[MAX_LEN];
    float rateRead;

    fscanf(ifp, "%d", &n);

    struct employee arrayEmployees[n];

    for (i=0; i<n; i++) {
        fscanf(ifp, "%s", firstRead);
        fscanf(ifp, "%s", lastRead);
        fscanf(ifp, "%f", &rateRead);

        strcpy(arrayEmployees[n].first, firstRead);
        strcpy(arrayEmployees[n].last, lastRead);
        arrayEmployees[n].payperhr = rateRead;
    }

    fscanf(ifp, "%d", &k);
    fscanf(ifp, "%d", &m);

    for (i=0; i<k; i++) {
        for (j=0; j<m; j++) {
            fscanf(ifp, "%s", lastName);
            fscanf(ifp, "%s", firstName);

            for (l=0; l<n; l++)
                matchLast = strcmp(lastName, arrayEmployees[l].last);
            if (matchLast == 0) {
                found = matchLast;
                strcpy(arrayEmployees[i].last, lastName);
                strcpy(arrayEmployees[i].first, firstName);

                fscanf(ifp, "%d%d%d%d", &hourIn, &minIn, &hourOut, &minOut);
                hourIn%=12;
                hourOut%=12;
                total_time_day = (((hourOut*1.0) - hourIn)+((minOut*1.0) - minIn))/60;
                arrayEmployees[j].hours_in_week += total_time_day;
                arrayEmployees[j].gross += total_time_day*rateRead;
            }
        }
        if (arrayEmployees[i].hours_in_week/40<1) {
            under40tax = arrayEmployees[j].gross*.1;
            tax = under40tax;
            arrayEmployees[i].taxes = tax;
        }
        else if (arrayEmployees[j].hours_in_week/40>1) {
            over40tax = (40*.1)+((arrayEmployees[j].hours_in_week-40)*.2);
            arrayEmployees[i].gross -= 40;
            arrayEmployees[i].gross = arrayEmployees[i].hours_in_week*1.5;
            arrayEmployees[i].gross +=40;
            tax = over40tax;
            arrayEmployees[i].taxes = tax;
        }
        netPay = arrayEmployees[i].gross - tax;
        arrayEmployees[i].hours_in_week = 0.0;

        fprintf(ofp, "W2 Form\n");
        fprintf(ofp, "-----");
        fprintf(ofp, "Name: %s %s", arrayEmployees[i].last, arrayEmployees[i].first);
        fprintf(ofp, "Gross Pay:  %lf", arrayEmployees[i].gross);
        fprintf(ofp, "Taxes Withheld:  %lf", arrayEmployees[i].taxes);
        fprintf(ofp, "Net Pay:  %lf", netPay);

        arrayEmployees[i].hours_in_week = 0.0;
        arrayEmployees[i].taxes = 0.0;
        arrayEmployees[i].gross = 0.0;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T16:31:06.487

这里有问题

```
 for (i=0; i<n; i++) {
    fscanf(ifp, "%s", firstRead);
    fscanf(ifp, "%s", lastRead);
    fscanf(ifp, "%f", &rateRead);

    strcpy(arrayEmployees[n].first, firstRead);
    strcpy(arrayEmployees[n].last, lastRead);
    arrayEmployees[n].payperhr = rateRead;
} 
```

和

```
 for (j=0; j<m; j++) {
        fscanf(ifp, "%s", lastName);
        fscanf(ifp, "%s", firstName);

        for (l=0; l<n; l++)
            matchLast = strcmp(lastName, arrayEmployees[l].last);
        if (matchLast == 0) {
            found = matchLast;
            strcpy(arrayEmployees[i].last, lastName);
            strcpy(arrayEmployees[i].first, firstName);

            fscanf(ifp, "%d%d%d%d", &hourIn, &minIn, &hourOut, &minOut);
            hourIn%=12;
            hourOut%=12;
            total_time_day = (((hourOut*1.0) - hourIn)+((minOut*1.0) - minIn))/60;
            arrayEmployees[j].hours_in_week += total_time_day;
            arrayEmployees[j].gross += total_time_day*rateRead;
        }
    } 
```

实际上应该是

```
 for (i=0; i<n; i++) {
    fscanf(ifp, "%s", firstRead);
    fscanf(ifp, "%s", lastRead);
    fscanf(ifp, "%f", &rateRead);

    strcpy(arrayEmployees[i].first, firstRead);
    strcpy(arrayEmployees[i].last, lastRead);
    arrayEmployees[i].payperhr = rateRead;
} 
```

和

```
 for (j=0; j<m; j++) {

        fscanf(ifp, "%s", lastName);
        fscanf(ifp, "%s", firstName);

        for (l=0; l<n; l++){

            matchLast = strcmp(lastName, arrayEmployees[l].last);

            if (matchLast == 0) {

                found = matchLast;
                strcpy(arrayEmployees[j].last, lastName);
                strcpy(arrayEmployees[j].first, firstName);

                fscanf(ifp, "%d%d%d%d", &hourIn, &minIn, &hourOut, &minOut);

                hourIn%=12;
                hourOut%=12;
                total_time_day = (((hourOut*1.0) - hourIn)+((minOut*1.0) - minIn))/60;

                arrayEmployees[j].hours_in_week += total_time_day;
                arrayEmployees[j].gross += total_time_day*rateRead;
            }
        }
    } 
```

# actionscript-3 - 尝试删除子项时出现错误 2025，子项未包含在添加的位置？

> ID：16182724
> 
> 赞同：0
> 
> 时间：2013-04-24T03:11:03.380
> 
> 标签：actionscript-3, flash, class, removechild, addchild

我正在尝试编写一个基于 tile 的级别编辑器，其中 Main 类在单击/拖动鼠标时将 Tile 类实例添加为“tiles”movieclip 的子级。我可以将图块添加到容器中，并且它们会显示在舞台上，但是在启用擦除它们时我无法删除任何图块。它给了我以下错误

```
Error #2025: The supplied DisplayObject must be a child of the caller.
    at flash.display::DisplayObjectContainer/removeChild()
        at Main/Draw()
        at Main/::Go() 
```

此外，当我检查瓷砖是否在瓷砖容器内时，它告诉我父级为空。

所以，有点帮助？我尝试检查具有类似问题的其他问题，但似乎没有一个与我的问题相近。

```
package {
    import flash.display.MovieClip;
    import flash.display.Sprite;
    import flash.display.Stage;
    import flash.display.StageScaleMode;
    import flash.display.StageAlign;
    import flash.events.Event;
    import flash.events.MouseEvent;
    import flash.events.KeyboardEvent;
    //import flash.events.TimerEvent.updateAfterEvent;

    public class Main extends MovieClip {

        //containers
        var lines:Sprite = new Sprite();
        var tiles:Sprite = new Sprite();

        // Grid data
        var tileW:int = 20;
        var tileH:int = 20;
        var gridW:int = 20;//(inputWidth);
        var gridH:int = 20;//(inputHeight);
        var gridX:int = 50;
        var grixY:int = 50;
        var level:Array;

        //Drawing variables
        var go:Boolean = false;
        var erase:Boolean = false;

        var default_tile:int = 1;
        var type:int;

        var rect:Object = {x:100, y:50, width:(gridW * tileW)/100, height:(gridH * tileH)/100};

        //menus
        var sizeMenu:SizeMenu = new SizeMenu();

        var current:Tile = new Tile();

        public function Main():void {

            //Flash alignment and resizing
            stage.scaleMode=StageScaleMode.NO_SCALE;
            stage.align=StageAlign.TOP_LEFT;

            stage.addChild(lines);
            lines.x = rect.x;
            lines.y = rect.y;

            stage.addChild(tiles);
            tiles.x = rect.x;
            tiles.y = rect.y;

            stage.addChild(sizeMenu);

            stage.addChild(current);
            current.x = 50;
            current.gotoAndStop(default_tile);
            stage.addEventListener(MouseEvent.MOUSE_DOWN, Go);
            stage.addEventListener(MouseEvent.MOUSE_UP, Go);
            stage.addEventListener(MouseEvent.MOUSE_MOVE, Go);
            stage.addEventListener(KeyboardEvent.KEY_DOWN, ToggleErase);
            stage.addEventListener(KeyboardEvent.KEY_UP, ToggleErase);

            Setup();

        }
        //Draws grid lines
        private function Setup():void {
            trace("Drawing Grid...");
            // create an empty array
            level = new Array(gridH);
            for (var i=0; i < gridW; i++) {
                level[i] = new Array(gridW);
            }

            // attach lines to create a grid
            for (var k=0; k <= gridH; k++) {
                var line = new Line();
                line.name = "line"+k;
                line.scaleX = rect.width;
                line.y = tileH * k;
                lines.addChild(line);

                for (var j=0; j <= gridW; j++) {
                    line = new Line();
                    line.name = "line"+j+"_"+k;
                    line.scaleX = rect.height;
                    line.x = tileW * j;
                    line.rotation = 90;
                    lines.addChild(line);                   
                }
            }
            type = default_tile;
            trace("Done drawing grid!");
        }
        //Decided if drawing is possible
        private function Go(e:MouseEvent):void {
            if (e.type == "mouseDown") {
                go = true;
                Draw(e);
            }
            if (e.type == "mouseUp") {
                go = false;
            }
            if (e.type == "mouseMove") {
                if (go) {
                    Draw(e);
                }
                //e.updateAfterEvent();
            }
        }
        //Toggles erase
        private function ToggleErase(e:KeyboardEvent):void{
            if (e.shiftKey){
                erase = true;
            }
            if (e.type == "keyUp"){
                erase = false;
            }
        }

        // attaches the tiles when drawn on the grid
        public function Draw(e:MouseEvent) {
            var x = mouseX;
            var y = mouseY;
            var cx = Math.floor((x - rect.x) / tileW);
            var cy = Math.floor((y - rect.y) / tileH);

            if (cx >= 0 && cx < gridW && cy >= 0 && cy < gridH) {
                var target = e.currentTarget;
                if (!erase) {
                    if (tiles.contains(target)){
                        trace("Contained!");
                        tiles.removeChild(target);
                    }

                    var tile = new Tile();
                    tiles.addChild(tile);
                    tile.name = ("t_" + cy + "_" + cx);
                    tile.x = (tileW * cx);
                    tile.y = (tileH * cy);
                    tile.gotoAndStop(type);
                    level[cy][cx] = type;

                } else {
                    if (tiles.contains(target)){
                        trace("Contained!");
                        tiles.removeChild(target);
                    }

                    level[cy][cx] = default_tile - 1;
                }
            }
        }
        //Cleans the grid and redraws it
        private function ResetGrid():void {
            level = null;

            //Delete tiles
            while (tiles.numChildren) {
                tiles.removeChildAt(0);
            }
            //Delete lines 
            while (lines.numChildren) {
                lines.removeChildAt(0);
            }
            gridW=20;
            gridH=20;
            rect.width = (gridW * tileW)/100;
            rect.height = (gridH * tileH)/100;
        }
        // updates the current-clip
        private function update() {
            current.gotoAndStop(type);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T03:18:59.677

下面的代码导致了这个问题，基本上你`removeChild`为同一个对象调用了两次。

```
 if (tiles.contains(target)){
     trace("Contained!");
     tiles.removeChild(target);
 }
 tiles.removeChild(target); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T03:20:48.703

在您的代码中，我注意到您可以删除磁贴，然后在此块的末尾再次尝试将其删除：

```
 if (!erase) {
            if (tiles.contains(target)){
                trace("Contained!");
                tiles.removeChild(target);
            }

            var tile = new Tile();
            tiles.addChild(tile);
            tile.name = ("t_" + cy + "_" + cx);
            tile.x = (tileW * cx);
            tile.y = (tileH * cy);
            tile.gotoAndStop(type);
            level[cy][cx] = type;

        } else {
            if (tiles.contains(target)){
                trace("Contained!");
                tiles.removeChild(target);
            }
            // this is going to throw an error
            tiles.removeChild(target); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T06:36:16.620

让自己轻松一点，并`Tile`使用`remove`方法创建一个类。像这样的东西：

```
class Tile extends Sprite
{
    public function remove():void
    {
        if(parent) parent.removeChild(this);
    }
} 
```

这样，您可以简单地执行以下操作：

```
tile.remove(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T21:07:33.643

我已经解决了我的问题！所有瓦片实例在添加时都会根据它们在网格上的位置来命名。我没有将鼠标指向的对象作为目标，而是使用 getChildByName(); 搜索是否已经存在具有特定名称的对象，如果存在则将其删除。

```
if (cx >= 0 && cx < gridW && cy >= 0 && cy < gridH) {
    var target = tiles.getChildByName("t_" + cy + "_" + cx);

    if (!erase) {
        if (target){
            tiles.removeChild(target);
        }
        var tile = new Tile();
        tiles.addChild(tile);
        tile.name = ("t_" + cy + "_" + cx);
        tile.x = (tileW * cx);
        tile.y = (tileH * cy);
        tile.gotoAndStop(type);
        level[cy][cx] = type;
    } else {
        if (target){
            tiles.removeChild(target);
        }
        level[cy][cx] = default_tile - 1;
    }
} 
```

# ios - “Shake”的 Sphero 概念？

> ID：16182728
> 
> 赞同：1
> 
> 时间：2013-04-24T03:12:22.557
> 
> 标签：ios, sphero-api

告诉用户正在摇晃 Sphero 的最佳方式是什么？

我需要区分用户何时向左/向右/向上/向下倾斜 Sphero 以及何时向任何方向快速摇晃几次。

是否有一个很好看的示例项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T15:32:20.130

如果您正在收集加速度计过滤值以及“IMU”值，则加速度计值最适合检测晃动，而 IMU 值（滚动、俯仰、偏航）最适合检测倾斜。

如果您不关心它在哪个轴上摇晃，则通过获取它们平方和的平方来标准化轴'：`sqrt(x^2 + y^2 + z^2) > 2000`。这将为您提供加速度矢量的大小。它对于“一般加速度”来说是一个很好的值，并且对于检测抖动非常有用。

如果要隔离它在哪个轴上被摇动，那么对于每个轴，评估其加速度的绝对值是否高于阈值：`abs(x) > 2000`，因为轴的正值或负值是其自身的矢量幅度。

然后，只需使用 IMU 数据的 roll、pitch 和 yaw 值来确定 Sphero 的倾斜度。

# scala - Scala - 新对象与对象扩展

> ID：16182735
> 
> 赞同：7
> 
> 时间：2013-04-24T03:13:16.923
> 
> 标签：scala

使用 new 运算符定义对象与通过扩展类定义独立对象有什么区别？

更具体地说，给定 type ， 和`class GenericType { ... }`之间有什么区别？`val a = new GenericType``object a extends GenericType`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T04:20:34.830

实际上，`object`声明的初始化机制与字节码中的机制相同`new`。但是，有很多不同之处：

*   `object`作为单例——每个都属于一个只存在一个实例的类；
*   `object`被延迟初始化——它们只会在第一次被引用时被创建/初始化；
*   同名的an`object`和 a `class`(or ) 是*同伴*；`trait`
**   `object`在同伴上生成静态转发器上定义的方法`class`；*   成员`object`可以访问同伴的私有成员`class`；*   在搜索隐式时，会查看相关* 类或特征的伴随对象。*

 *这些只是我能想到的蝙蝠的一些差异。可能还有其他人。

* 什么是“相关”类或特征是一个较长的故事——如果您有兴趣，请查看 Stack Overflow 上的问题来解释它。`scala`如果找不到标签，请查看 wiki 中的标签。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T04:05:13.137

对象定义（无论它是否扩展了某些东西）意味着创建单例对象。

```
scala> class GenericType
defined class GenericType

scala> val a = new GenericType
a: GenericType = GenericType@2d581156

scala> val a = new GenericType
a: GenericType = GenericType@71e7c512

scala> object genericObject extends GenericType
defined module genericObject

scala> val a = genericObject
a: genericObject.type = genericObject$@5549fe36

scala> val a = genericObject
a: genericObject.type = genericObject$@5549fe36 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T10:29:51.470

虽然`object`声明与表达式具有不同的语义`new`，但本地`object`声明的所有意图和目的都与同名的 a`lazy val`相同。考虑：

```
class Foo( name: String ) {
  println(name+".new")
  def doSomething( arg: Int ) {
    println(name+".doSomething("+arg+")")
  }
}

def bar( x: => Foo ) {
  x.doSomething(1)
  x.doSomething(2)
}

def test1() {
  lazy val a = new Foo("a")
  bar( a )
}

def test2() {
  object b extends Foo("b")
  bar( b )
} 
```

`test1`定义`a`为用 的新实例初始化的惰性 val `Foo`，而`test2`定义`b`为`object`扩展的`Foo`。本质上，两者都懒惰地创建一个新实例`Foo`并为其命名（`a`/ `b`）。

您可以在 REPL 中尝试并验证它们的行为是否相同：

```
scala> test1()
a.new
a.doSomething(1)
a.doSomething(2)

scala> test2()
b.new
b.doSomething(1)
b.doSomething(2) 
```

`object`因此，尽管和 a之间存在语义差异`lazy val`（特别是语言对 's 的特殊处理`object`，如 Daniel C. Sobral 所述），a`lazy val`总是可以用对应的代替`object`（并不是说这是一个很好的做法），并且作为类/特征成员的`lazy val`/也是如此。`object`我能想到的主要实际区别是该对象具有更具体的静态类型：`b`is of type `b.type`(which extends `Foo`) 而`a`恰好具有 type `Foo`。*

# ios - ios过滤选项类似于苹果商店（下拉列表）

> ID：16182736
> 
> 赞同：0
> 
> 时间：2013-04-24T03:13:19.497
> 
> 标签：ios, ipad, cocoa-touch, uipopovercontroller

我试图弄清楚如何制作类似于苹果商店的过滤器选项的过滤器选项。我首先想到的是类似于网站的下拉列表。但它似乎没有在 xcode 中的对象选项上。想知道我应该从哪里开始才能实现这种功能。

它类似于此

[http://www.insightguides.com/docs/halo-asset-manager/images/apps/berlitz-cruise-2013-ipad-6.jpg](http://www.insightguides.com/docs/halo-asset-manager/images/apps/berlitz-cruise-2013-ipad-6.jpg)

除非你们能推荐别的东西吗？看着这个，在我看来这只是一个弹出窗口？如果是这样，我需要 4 - 5 个过滤器，这是否意味着我应该创建 4 - 5 个视图控制器来弹出？似乎很多空间仅用于过滤器，不确定如何仅使用 1 个视图控制器动态生成它。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T04:44:00.807

假设您的所有过滤器看起来都一样，但数据不同，那么您可以只拥有一个 FilterViewController 并根据过滤器类型更改其数据源。

是的，它看起来确实像一个简单的 UIPopoverController。

因此，当您必须显示一个新的弹出框时，请创建一个 FilterViewController 并为其分配适当的数据源。您可以使用委托通知父类选择了哪个过滤器，并使用数据源告诉过滤器视图控制器应该显示哪些数据进行过滤。

# java - 从文件在 SD 卡上创建数据库

> ID：16182744
> 
> 赞同：0
> 
> 时间：2013-04-24T03:14:39.657
> 
> 标签：java, android, sqlite, android-sdcard

我正在使用 Android，我正在尝试使用我已经拥有的数据库。我想把它放在SD卡上。我在项目的资产文件夹中有数据库文件。如何在安装了应用程序的任何设备的 SD 卡或外部存储上制作它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T05:03:10.413

```
//Step1 : Checked accessiblity on sd card
public boolean doesSDCardAccessible(){
    try {
        return(Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED));        
    } catch (Exception e) {
        // TODO: handle exception
        e.printStackTrace();        
    }   
    return false;
    }

//Step2 : create directory on SD Card
//APP_DIR : your PackageName 
public void createAndInitAppDir(){
    try {
    if(doesSDCardAccessible()){
    AppDir = new File(Environment.getExternalStorageDirectory(),APP_DIR+"/");
    if(!AppDir.exists()){
        AppDir.mkdirs();    
    }
    }
    } catch (Exception e) {
        // TODO: handle exception
        e.printStackTrace();
    }
    }

//Step 3 : Create Database on sdcard
//APP_DIR : your PackageName 
//DATABASE_VERSION : give Database Vesrion
//DATABASE_NAME : your Databsename Name
public void initDB()
{
    try {

    //Using SQLiteHelper Class Created Database
    sqliteHelper = new SQLiteHelper(Application.this,AppDir.getAbsolutePath()+"/"+DATABASE_NAME, 
                                    null, DATABASE_VERSION);    

    //OR use following
    //Creating db here. or db will be created at runtime whenever writable db is opened.

    db = SQLiteDatabase.openOrCreateDatabase(AppDir.getAbsolutePath()+"/"+DATABASE_NAME,                                                     null);*/
    db= sqliteHelper.getWritableDatabase();
    db.close();
    } catch (Exception e) {
        // TODO: handle exception
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T03:20:51.040

参考[这个答案](https://stackoverflow.com/a/11281048/1131435)，您可以通过尝试以下两种方法在 Android 4.0+ 中找到 SD 卡的目录（每个设备只能工作一个）：

```
new File("/mnt/external_sd/"); 
```

或者

```
new File("/mnt/extSdCard/"); 
```

在 Android <4.0 上，您可以使用

```
Environment.getExternalStorageDirectory(); 
```

你可以在那里创建你的 SQLite 数据库。此外，如果您找不到它，您可以遍历其中的所有目录`/mnt/`（注意：sdcard 将*始终*可以通过 访问`/mnt/`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T03:29:20.770

数据库就像任何其他平面文件一样。只需将其复制到您的 SD 卡。

```
public boolean backup()
{
    File sdcard = Environment.getExternalStorageDirectory();
    File data = new File("/data/data/com.mydomain.myappname/databases/");

    if (sdcard.canWrite())
    {
    File input = new File(data, DB_NAME);
    File output = new File(sdcard, "android/data/com.mydomain.myappname/databases/");

    if(!output.exists())
    {
        if(output.mkdirs())
        {
            output = new File(sdcard,
            "android/data/com.mydomain.myappname/databases/backup.db");
            output.createNewFile();
            result = true;
        }
        else
        {
            output = new File(sdcard,
            "android/data/com.mydomain.myappname/databases/backup.db");
            result = true;
        }

        if(input.exists() && result)
        {
            FileInputStream source;
            FileOutputStream destination;

            try
            {
                source = new FileInputStream(input);
                    try
                    {
                        destination = new FileOutputStream(output);
                        byte[] buffer = new byte[1024];
                        int length;

                        while((length = source.read(buffer)) > 0)
                        {
                            destination.write(buffer, 0, length);
                        }

                        source.close();
                        destination.flush();
                        destination.close();
                        result = true;
                   }
                   catch(Exception e)
                   {
                       result = false;
                       destination = null;
                   }
               }
               catch(Exception e)
               {
                   result = false;
                   source = null;
               }
           }
           else
           {
               result = false;
           }
       }
       else
       {
           result = false;
       }
    }
    catch(Exception e)
    {
        result = false;
    }
    return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T04:36:28.190

通过这个[链接](https://stackoverflow.com/questions/4447477/android-how-to-copy-files-in-assets-to-sdcard)

或尝试关注

```
 InputStream myInput;

        try {

                     AssetManager assetManager = getAssets();
            myInput =  assetManager.open("mydatabase.db");

            File directory = new File("/sdcard/some_folder");

            if (!directory.exists()) {
                directory.mkdirs();
            }

            OutputStream myOutput = new FileOutputStream(directory
                    .getPath() + "/DatabaseSample.backup");

            byte[] buffer = new byte[1024];
            int length;
            while ((length = myInput.read(buffer)) > 0) {
                myOutput.write(buffer, 0, length);
            }

            myOutput.flush();

            myOutput.close();

            myInput.close();

        } catch (FileNotFoundException e) {

            e.printStackTrace();
        } catch (IOException e) {

            e.printStackTrace();
        } 
```

# php - 将变量传递给wordpress php函数

> ID：16182753
> 
> 赞同：1
> 
> 时间：2013-04-24T03:16:12.337
> 
> 标签：php, css, wordpress, wordpress-theming, stylesheet

对于所选配色方案，我有一个来自 wordpress 主题选项的变量：

```
$themecolor 
```

我想使用以下代码正确包含样式表：

```
<?php /* enqueue color stylesheet */ 

function add_color_style() {
wp_register_style( 'color_style', get_template_directory_uri().'/css/'.$themecolor.'.css', 'all' );
wp_enqueue_style('color_style');
}

add_action('wp_enqueue_scripts', 'add_color_style'); ?> 
```

问题是 $themecolor 变量没有被传递给函数，所以输出结果如下：

```
<link rel='stylesheet' id='color_style-css'  href='http://bbmthemes.com/themes/expression/wp-content/themes/expression/css/.css' type='text/css' media='all' /> 
```

而不是这样：

```
<link rel='stylesheet' id='color_style-css'  href='http://bbmthemes.com/themes/expression/wp-content/themes/expression/css/lime.css' type='text/css' media='all' /> 
```

传递该变量的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T03:30:26.557

如果该选项来自表格，您可以`global $themecolor`在您的函数中使用或仅在该函数中使用。`$themecolor = get_option('themecolor');``wp_options`

你也可以这样做...

```
add_action('wp_enqueue_scripts', function() use ($themecolor) {
    wp_register_style( 'color_style', get_template_directory_uri().'/css/'.$themecolor.'.css', 'all' );
    wp_enqueue_style('color_style');
}); 
```

# c# - C# 泛型方法与强制转换

> ID：16182754
> 
> 赞同：4
> 
> 时间：2013-04-24T03:16:17.057
> 
> 标签：c#, performance, casting, generic-method

我正在用 C# 编写一个程序（目前为 3.5，但可能会根据需要适应其他版本），它使用简单的插件架构来控制输入和输出。每个插件都是一个 DLL，在用户选择要使用的插件时加载。

由于实际的插件类直到运行时才知道，所以我在包装类中使用反射来调用插件的方法和访问属性。

到目前为止，我一直在使用以下方法调用插件上的方法：

```
public object Method(string methodName, params object[] arguments) {
  // Assumed variables/methods/exceptions:
  //   Dictionary<string, MethodInfo> Methods: a cache of MethodInfo's
  //     of previously called methods.
  //   NoSuchMethodException: thrown if an unknown/unreachable method is
  //     requested. The message member contains the invalid method name
  //   void LoadMethod(string methodName, params object[] arguments): responsible
  //     for retrieving the MethodInfo's, or throw a NoSuchMethodException
  //   object Plugin: an instance of the dynamically loaded class.
  if (!Methods.ContainsKey(methodName)) {
    LoadMethod(methodName, arguments);
  }
  if (arguments != null && arguments.Length == 0) {
    arguments = null;
  }
  return Methods[methodName].Invoke(Plugin, arguments);
} 
```

使用如下：

```
string[] headers = (string[]) Plugin.Method("GetHeaders", dbName, tableName); 
```

只要调用者正确地将返回值转换为预期的类型，这就会很好地工作。插件必须实现某些接口，所以调用者应该知道这种类型。

然而，在对反射做了一些进一步的工作之后，我想到了以下替代形式：

```
public T Method<T>(string methodName, params object[] arguments) {
  if (!Methods.ContainsKey(methodName)) {
    LoadMethod(methodName, arguments);
  }
  if (Methods[methodName].ReturnType != typeof(T)) {
    // Could also move this into LoadMethod to keep all the throwing in one place
    throw new NoSuchMethodException(methodName);
  }
  if (arguments != null && arguments.Length == 0) {
    arguments = null;
  }
  return (T) Methods[methodName].Invoke(Plugin, arguments);
} 
```

这个用法如下：

```
string[] headers = Plugin.Method<string[]>("GetHeaders", dbName, tableName); 
```

此版本实质上将强制转换移动到 Method 方法中。调用者显然仍然需要知道预期的返回类型，但情况总是如此。它不适用于 void 方法，但我可以为此包含一个 Method 版本：

```
public void Method(string methodName, params object[] arguments) {
  // Good for void methods, or when you're going to throw away the return
  // value anyway.
  if (!Methods.ContainsKey(methodName)) {
    LoadMethod(methodName, arguments);
  }
  if (arguments != null && arguments.Length == 0) {
    arguments = null;
  }
  Methods[methodName].Invoke(Plugin, arguments);
} 
```

我的问题是 - 其中一个本质上是否比另一个更好（对于给定的“更好”值）？例如，一个明显更快吗？更容易理解？更支持？

我个人喜欢后者的外观，虽然我有点担心我的返回类型测试 ( `Methods[methodName].ReturnType != typeof(T)`) 可能过于简单。有趣的是，它最初是`!(Methods[methodName].ReturnType is T)`，但似乎总是失败。

我能找到的与此最接近的现有问题是[Generic method to type cast](https://stackoverflow.com/questions/6795402/generic-method-to-type-casting)，一些答案表明后一种方法比前者更昂贵，但那里的细节并不多（这个问题更多方法的实现而不是哪个更好）。

**澄清：**这是一个手动的、非常有限的插件系统，不使用 IPlugin。我对泛型方法本身是否比期望调用者在这种情况下强制转换更感兴趣的问题更感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T03:43:40.840

至于你的问题，我认为你应该同时提供。只需让通用版本调用非通用版本。你得到两全其美。关于性能，请考虑与动态调用方法和构建对象数组相比，转换对象所需的时间有多短。这里真的不值得考虑性能。从风格的角度来看，我更喜欢通用方法，但也考虑到如果需要，您可以应用类型约束。

```
public T Method<T>(string methodName, params object[] arguments)
{
    return (T)Method(methodName, arguments);
} 
```

* * *

**侧边栏**

如果我了解您的设计，我认为您的实现应该转换为预期的界面。如果您知道插件应该支持哪些方法，那么您真的不应该使用反射。

```
var plugin = (IPlugin)Activator.CreateInstance(pluginType);
var headers = plugin.GetHeaders(dbName, tableName); 
```

您可以尝试一些不同的方法，并要求插件实现一个允许他们注册自定义运行时行为的接口。

```
public interface IPlugin
{
     void Load(IAppContext context);
     void Unload();
} 
```

您的加载方法可能如下所示。

```
void LoadPlugins(Assembly a)
{
    var plugins = 
        a.GetTypes()
        .Where(t => typeof(IPlugin).IsAssignableFrom(t))
        .Select(t => (IPlugin)Activator.CreateInstance(t))
        .ToList();
     Plugins.AddRange(plugins);
     foreach (var p in plugins)
     {
         p.Load(Context);
     }
} 
```

# php - 根据每个子数组中的第一个整数对多维数组进行排序

> ID：16182755
> 
> 赞同：1
> 
> 时间：2013-04-24T03:16:29.947
> 
> 标签：php, arrays

```
$final = array(array([0] => 123, [1] => 3, [2] => "true"),
               array([0] => 9, [1] => 4, [3] => "false"),
               array([0] => 541, [1] => 1, [3] => "false")); 
```

我尝试使用 php 的排序函数，以便 $final 数组将根据 $final[$i][0] 值从最低到最高排序，但它似乎不起作用。为了简单起见，这只是一个简单的示例。在我正在处理的实际问题中，$final 数组中的数组从少至 3 个元素到多至 7 个元素不等。不知道这是否对问题有任何影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T03:18:18.020

这就是 PHP 的[`usort`](http://php.net/manual/en/function.usort.php)功能：

```
usort($final, function ($a, $b)
{    
    return $a[0] < $b[0] ? -1 : 1;
}); 
```

在此处查看实际操作：[http ://codepad.viper-7.com/omXxkR](http://codepad.viper-7.com/omXxkR)

# gwt - 在 GWT Bootstrap 单元格表中居中列的内容

> ID：16182759
> 
> 赞同：0
> 
> 时间：2013-04-24T03:17:04.823
> 
> 标签：gwt, uibinder, gwt-bootstrap

我有一个单元格表，列数据是我想要将这些复选框对齐到该列的中心的复选框

我尝试`column.setHorizontalAlignment(HasHorizontalAlignment.ALIGN_CENTER);` 在 CSS 中使用 text-align:middle。但它似乎不起作用。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:36:38.050

```
 Column<Person, Boolean> checkColumn = new Column<Person, Boolean>(
        new CheckboxCell(true, false)) {
      @Override
      public Boolean getValue(Person object) {
        // check box function
      }
    };
    checkColumn.setHorizontalAlignment(HasAlignment.ALIGN_CENTER); 
```

对我来说很好。

由于您没有提供太多代码，我只能做出几个假设：

*   检查您的单元格表 CSS [如果您使用自定义的] 没有过度写入对齐
*   仔细检查你的对齐右栏[发生]
*   如果您使用的是 UiBinder，请检查以确保仅在您的 java 类或 xml 中设置对齐方式

# javascript - Javascript Knockout，从值中查找属性名称

> ID：16182762
> 
> 赞同：0
> 
> 时间：2013-04-24T03:17:26.380
> 
> 标签：javascript, knockout.js

我有两个按钮，按玩家姓名和 ID 排序。我对每种类型都使用了两个函数。

```
<ul data-bind="template: { name: 'playerstmpl', foreach: players }"></ul>
<hr/>
<button data-bind="click: sortbyPlayer">Sort by Player</button>
<button data-bind="click: sortbyId">Sort by Id</button>
<script id="playerstmpl" type="text/html">
    <li> <span data-bind = "text: id"> </span>
        <input data-bind="value: FirstName" /> </li>
</script>

<script type="text/javascript">

    function Player(id, name) {
        return {
            id: ko.observable(id),
            FirstName: ko.observable(name)
            };
    }

    var viewModel = {
        players: ko.observableArray([
        new Player(64, "Yuvi"),
        new Player(22, "Gayle"),
        new Player(91, "Adam"),
        new Player(19, "Flintoff"),
        new Player(56, "Malinga")])
    };

    viewModel.sortbyPlayer = function () {
        var unsorted = viewModel.players();

        viewModel.players(unsorted.sort(viewModel.sortFunction = function (a, b) {

        return a.FirstName().toLowerCase() < b.FirstName().toLowerCase() ? -1 : 1;

        }));
    };

    viewModel.sortbyId = function () {
        var unsortedId = viewModel.players();

        viewModel.players(unsortedId.sort(viewModel.sortFunction = function (a, b) {
            return a.id() < b.id() ? -1 : 1;
        }));
    };
            ko.applyBindings(viewModel);

</script> 
```

我试图找到在函数中传递的属性，以便我可以将两个函数合并为一个..like

```
viewModel.sortbyPlayer = function () {
        var unsorted = viewModel.players();

        viewModel.players(unsorted.sort(viewModel.sortFunction = function (a, b) {

            if (Player[a] == "FirstName") {            // is string
                return a.FirstName().toLowerCase() < b.FirstName().toLowerCase() ? -1 : 1;
            }
       else {
            return a.id() < b.id() ? -1 : 1;
        }

        }));
    }; 
```

无论如何要对一个功能进行排序..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T04:58:45.073

我会在视图模型上保留这两个属性，`sortByPlayer`以便`sortById`在您的 ViewModel 上清楚您要公开的内容。接下来，我将创建一个函数来包装排序逻辑，但允许您传入一个参数，该参数指示您想要执行哪种排序（我称之为 this `sortFunction`）。然后您的`if`语句按预期工作，如果您希望对其他属性进行排序（如果/当您的`Player`对象更改时），您甚至可以将其转换为`switch`语句：

```
function Player(id, name) {
    return {
        id: ko.observable(id),
        FirstName: ko.observable(name)
    };
}

var viewModel = {
    players: ko.observableArray([
            new Player(64, "Yuvi"),
            new Player(22, "Gayle"),
            new Player(91, "Adam"),
            new Player(19, "Flintoff"),
            new Player(56, "Malinga")
    ])
};

var sortFunction = function (sortBy) {
    return function () {
        var unsortedId = viewModel.players();
        viewModel.players(
            unsortedId.sort(function (a, b) {
                if (sortBy === 'player') {
                    return a.FirstName().toLowerCase() < b.FirstName().toLowerCase() ? -1 : 1;
                } else {
                    return a.id() < b.id() ? -1 : 1;
                }
            })
        );
    };
};

viewModel.sortbyPlayer = sortFunction('player');
viewModel.sortbyId = sortFunction('id');

ko.applyBindings(viewModel); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T05:17:49.870

如果您正在寻找更通用的排序功能..您可以检查属性`type`..而不是它的`name`。这将适用于您的情况以及更一般的情况：

```
viewModel.sortbyPlayer = function () {
    var unsorted = viewModel.players();

    viewModel.players(unsorted.sort(viewModel.sortFunction = function (a, b) {
        if (typeof Player[a] === 'string') {            // is string
            return a.FirstName().toLowerCase() < b.FirstName().toLowerCase() ? -1 : 1;
        }
        if (typeofPlayer[a] === 'number') { 
            return a.id() < b.id() ? -1 : 1;
        }

    }));
}; 
```

您还可以使用魔法属性`arguments`来访问与函数一起使用的参数数组：

```
function someFunctionWithRandomParams(){
    if(arguments[0]){ 
        console.log('argument 1 of type'+ typeof arguments[0] +' and value'+arguments[0])
    }
    if(arguments[1]){ 
        console.log('argument 2 of type'+ typeof arguments[1] +' and value'+arguments[1])
    }
} 
```

# c# - C#安装的默认路径

> ID：16182763
> 
> 赞同：0
> 
> 时间：2013-04-24T03:17:31.713
> 
> 标签：c#, file-io, path, text-files

您好，在 c# 上创建文本文件时我应该指定什么路径。

我希望它放在我的应用程序的安装文件夹中。

因为我有这样的代码。

```
System.IO.StreamWriter file = new System.IO.StreamWriter("what path to put?"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T03:26:40.387

这将为您提供安装应用程序的目录的路径。（程序集所在的位置）

```
 string path = AppDomain.CurrentDomain.BaseDirectory; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T03:21:27.897

请参考[Application.StartupPath](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.startuppath.aspx)

# jobs - 使用调度java方法在ofbiz中的特定时间运行

> ID：16182766
> 
> 赞同：0
> 
> 时间：2013-04-24T03:17:43.580
> 
> 标签：jobs, ofbiz

是否可以安排方法在 ofbiz 的特定时间运行？像数据库中的工作？

我一直在阅读 ofbiz 中的服务，我遇到了 JobSandbox 实体，并且 ofbiz 提供了一个非常有用的 GUI 来设置我假设使用 JobSandbox 实体的作业的运行。

我只是想看看是否有参考或手册可以让我通过代码设置服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T23:32:38.493

是的，通过代码安排服务非常容易，请查看这个小片段：

```
long startTime = new java.util.Date().getTime(); 
 int frequency = RecurrenceRule.DAILY; 
 int interval = 1; 
 int count = 20; 
 LocalDispatcher dispatcher=dctx.getDispatcher(); 
 dispatcher.schedule("myService",_context, startTime, frequency, 
interval, count); 
         }catch (GenericServiceException e){ 
 Debug.logError("Error trying to Schedule My Service: " 
+ e.getMessage()); 
        } 
```

# database - 使用嵌套集/邻接列表进行用户标记的数据库模式

> ID：16182769
> 
> 赞同：3
> 
> 时间：2013-04-24T03:17:54.407
> 
> 标签：database, database-design, data-modeling, hierarchical-data, tagging

我看过很多关于为对象标记构建数据库模式的帖子（例如[dlamblin 的帖子](https://stackoverflow.com/questions/20856/how-do-you-recommend-implementing-tags-or-tagging)和[Artilheiro 的帖子](https://stackoverflow.com/questions/1329887/how-to-model-tags-in-the-database)）。

在我多天的研究中，我似乎找不到的是实现标记模式的模式逻辑，该模式允许将标签分配给用户（例如 LinkedIn 的[技能和专业知识](http://www.linkedin.com/skills/skill/C%23?trk=skills-hp-search)系统，其中标签已由用户添加可以被索引和搜索）。这可能就像将有问题的“*对象*”更改为用户一样简单，但我感觉它比这更复杂。

我希望能够构建几乎完全一样的东西，除了类别。例如，如果我们对 LinkedIn 的一些技能进行分类，我们可以有这样的东西：IT/计算、零售、项目管理等。

我知道有几种常见的方法和架构可以对数据进行分类，特别`Nested Set`是`Adjacency List`. 我听说过很多关于这两个方面的事情，例如“嵌套集的插入和删除是资源密集型的”，以及“邻接表模型很笨拙、有限，并且不能覆盖无限的深度”。

所以我在一篇文章中包含了两个问题：

*   *关于用户标记技能的粗略*示例模式是什么样的，它们可以在其中被索引和搜索，甚至能够为特定标记构建用户池？

*   鉴于分类的必要性，对这种性质的事物进行分类的最佳方法是什么？

*   有没有其他我不知道的更适合这个的模型？（哎呀，我认为这是三个问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T14:47:44.150

> 鉴于分类的必要性，对这种性质的事物进行分类的最佳方法是什么？

取决于你需要多大的灵活性。例如，如果您可以假设类别层次结构的深度具有固定的限制，例如 1 或 2 级，则邻接列表可能非常好。

> 有没有其他我不知道的更适合这个的模型？

**路径枚举**是一种在祖先名称的串联列表中表示层次结构的方法。所以每个子类别标签不仅会命名它自己的名字，还会命名它的父级和任何进一步的祖父级，直到根。

您已经熟悉任何 shell 环境中的绝对路径名：“/usr/local/bin”是“usr”、“local”和“bin”的路径枚举，它们之间的层次关系按字符串的顺序编码.

这个解决方案也有可能出现数据异常——为“/usr/local”和“/usr/local/bin”创建一个条目是你的责任，如果你不这样做，有些事情就会开始崩溃。

> 关于用户标记技能的粗略示例模式是什么样的，它们可以在其中被索引和搜索，甚至能够为特定标记构建用户池？

在数据库中实现这一点几乎就像单独命名标签一样简单，但它要求您的标签“名称”列足够长以存储层次结构中最长的路径。

```
CREATE TABLE taguser (
 tag_path VARCHAR(255),
 user_id INT,
 PRIMARY KEY (tag_path,user_id),
 FOREIGN KEY (tag_path) REFERENCES tagpaths (tag_path),
 FOREIGN KEY (user_id) REFERENCES users (user_id)
); 
```

索引与简单标记完全相同，但如果您从层次结构的根指定整个字符串，则只能搜索子类别标记。

```
SELECT user_id FROM taguser WHERE tag_path = '/IT/Computing'; -- uses index

SELECT user_id FROM taguser WHERE tag_path LIKE '%/Computing'; -- can't use index 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T14:28:08.127

你没有说*哪个*数据库，所以我将扮演魔鬼的拥护者并建议它如何在 MongoDB 中工作。像这样创建您的用户：

```
db.users.insert({
  name: "bob",
  skills: [ "surfing", "knitting", "eating"]
}) 
```

然后创建一个关于“技能”的索引。Mongo 会将数组中的每个技能添加到索引中，以便快速查找。查找具有 2 种技能交集的用户与 SQL 数据库的性能相似，但语法要好得多：

```
db.users.find({skills: "$in": ["surfing", "knitting"]}) 
```

好处是单个磁盘查找将获取您需要的用户的所有信息。缺点是它需要更多的磁盘空间和更多的 RAM。但是，如果它可以避免由连接引起的磁盘寻道，那可能是一个胜利。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-26T15:37:02.697

我认为最好的逻辑与您链接的帖子中的状态相同

```
+------- +
| user   |
+------- +
| userid |
| ...    |
+--------+

+-------- --+
| linktable |
+-----------+
| userid    | <- (fk and pk)
| tagid     | <- (fk and pk)
+-----------+

+-------+
| tag   |
+-------+
| tagid |
| ...   |
+-------+ 
```

去海事组织的方式非常好。如果您想对标签进行分类，您总是可以将类别表附加到标签表

# linux - 使用文件描述符调用 dlopen？

> ID：16182774
> 
> 赞同：5
> 
> 时间：2013-04-24T03:18:12.097
> 
> 标签：linux, shared-libraries, dlopen

我想将共享对象作为数据文件打开并对其执行验证检查。验证是签名检查，我对共享对象进行签名。如果验证成功，我想将当前打开的共享对象加载为正确的共享对象。

第一个问题：是否可以`dlopen`在签名检查期间调用共享对象并将其加载为数据文件，从而*不*执行代码？根据手册页，我不这么认为，因为我没有看到类似于`RTLD_DATA`.

由于我将共享对象作为数据文件打开，因此我有可用的描述符。验证成功后，我想将描述符传递给`dlopen`动态加载器，以便正确加载共享对象。我不想关闭文件然后通过重新打开它，`dlopen`因为它可能会引入竞争条件（验证的文件与打开和执行的文件不同）。

第二个问题：如何将打开的文件传递给`dlopen`使用文件描述符，以便`dlopen`执行共享对象的常规初始化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T05:43:36.353

在 Linux 上，您可能可以使用`dlopen`一些`/proc/self/fd/15`文件（对于文件描述符 15）。

`RTLD_DATA`似乎不存在。所以如果你想要它，你必须修补你自己的动态加载器。也许在[MUSL Libc](http://musl-libc.org/)中这样做可能不那么困难。我还是不明白你为什么需要它。

你必须以`dlopen`某种方式信任 -ed 插件（并且它会运行它的构造函数`dlopen`）。

`dlopen`您可以在使用一些[ELF](http://en.wikipedia.org/wiki/Executable_and_Linkable_Format)解析库（可能是[libelf](http://www.mr511.de/software/english.html)或`libbfd`（来自[binutils](http://sourceware.org/binutils/) ））之前分析共享对象插件；但我仍然不明白你想要进行什么样的分析（你真的应该解释一下；特别是如果插件间接链接到一些行为不良的软件会发生什么）。换句话说，您应该更多地解释您的验证步骤。请注意，共享对象可能会覆盖自身......

或者，不要`dlopen`只使用`mmap`您的文件（您需要解析一些[ELF](https://en.wikipedia.org/wiki/Executable_and_Linkable_Format)并处理[重定位](https://en.wikipedia.org/wiki/Relocation_(computing))；有关详细信息，请参阅[elf(5)](http://man7.org/linux/man-pages/man5/elf.5.html)和 Levine 的[*链接器和加载*](https://www.iecc.com/linker/)器，并查看您的源代码[`ld.so`](http://man7.org/linux/man-pages/man8/ld.so.8.html)，例如在[GNU glibc](https://www.gnu.org/software/libc/)中） .

也许使用一些[JIT 生成](https://en.wikipedia.org/wiki/Just-in-time_compilation)技术可能是有用的（你会从一些*经过验证*的数据中 JIT 生成代码），例如使用[GCCJIT](https://gcc.gnu.org/onlinedocs/jit/)、[LLVM](http://llvm.org/)或[libjit](http://savannah.gnu.org/git/?group=libjit)或[asmjit](https://asmjit.com/)（甚至是[LuaJit](http://luajit.org/)或[SBCL](https://sbcl.org/)）等......

如果你有两个文件描述符指向同一个共享对象，你可能不会有任何竞争条件。

一种选择是构建您的临时静态 C 或 C++ 源代码分析器（可能使用您提供的一些[GCC 插件](https://gcc.gnu.org/onlinedocs/gccint/Plugins.html)）。该插件可能（经过数月甚至数年的开发努力）检查用户 C++ 代码的某些属性。当心[赖斯定理](https://en.wikipedia.org/wiki/Rice%27s_theorem)（限制每个静态源代码分析器的属性）。然后你的程序可能（就像我的[manydl.c](https://github.com/bstarynk/misc-basile/blob/master/manydl.c)所做的那样，或者像[RefPerSys](https://refpersys.org/)将在 2020 年中期那样做，或者像几年前过时的[GCC MELT](http://starynkevitch.net/Basile/gcc-melt/)所做的那样）将用户 C++ 代码作为输入，对该 C++ 运行一些静态分析代码（例如，使用您的 GCC 插件），将该 C++ 代码编译为*临时*共享对象，然后`dlopen`将该共享对象。所以阅读 Drepper 的论文[*如何编写共享库*](https://www.akkadia.org/drepper/dsohowto.pdf)。

# php - PHP 向结果添加计算，推送到结果数组，排序，然后打印

> ID：16182776
> 
> 赞同：0
> 
> 时间：2013-04-24T03:18:21.373
> 
> 标签：php, mysql, arrays, loops

我有一个正在查询的 SQL 数据库，需要通过基于用户输入的计算进行排序，然后按所述计算排序，然后打印出来。

很奇怪，我知道。

因此，在称为 Google 的预言机的帮助下，我想出了以下代码：

```
$result = mysql_query($query) or die(mysql_error());
$buffer = array();
while($row = mysql_fetch_array($result)){
$vars;
$calc1 = [[equation]];
$calc2 = [[equation]];
$calc3 = [[equation]];
$calc4 = [[equation]];

$row['calc1'] = $calc1;
$row['calc2'] = $calc2;
$row['calc3'] = $calc3;
$row['calc4'] = $calc4;

$buffer[] = $row;
}

print "<table border='1px' cellpadding='4px' cellspacing='0'><tr><th>TABLE HEADERS</th></tr>";
foreach($buffer as $row){
    print "<tr><td>";
print $row['rows....'];

print "</tr>";

}
unset($buffer, $row);
print "</table>";
mysql_close(); 
```

显然要复杂得多，但代码目前是专有的。我将有数百个条目，计算如下：

`round((((($b1 / $b2) * ($bcMix * $pVm)) + (($c1 / $c2) * ((1 - ($bcMix * .01)) * $pVm)) * 12) * 5) + $pP, 2);`

我还想按两个标准对结果进行排序：计算本身以及数字数据库条目——从低到高。`usort`导致我的网站崩溃（无论出于何种原因）：

```
usort($buffer, function($a, $b){
 return $a['tcoy1'] < $b['tcoy1']; 
}); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T03:26:50.913

尝试获取缓冲区：

```
$result = mysql_query($query) or die(mysql_error());

$buffer = array();

while($row = mysql_fetch_array($result)){
    $vars;

    $calc1 = [[equation]];
    $calc2 = [[equation]];
    $calc3 = [[equation]];
    $calc4 = [[equation]];

    $row['calc1'] = $calc1;
    $row['calc2'] = $calc2;
    $row['calc3'] = $calc3;
    $row['calc4'] = $calc4;

    $buffer[] = $row;
}

// sort $buffer by 'calc1' DESC:
usort($buffer, function($a, $b){ return $a['calc1'] < $b['calc1']; });

print "<table border='1px' cellpadding='4px' cellspacing='0'><tr><th>TABLE HEADERS</th></tr>";

foreach($buffer as $row){
    print "<tr><td>";
    print $row['rows....'];
    print "</td></tr>";
}

unset($buffer, $row);

print "</table>";
mysql_close(); 
```

您不当使用[`array_push()`](http://php.net/manual/en/function.array-push.php). 检查手册。不过，我认为那里甚至不需要它。

***PS：*** [`php_mysql`](http://php.net/manual/en/book.mysql.php)扩展名已[***弃用***](http://www.php.net/manual/en/function.mysql-connect.php)。我建议使用[`php_mysqli`](http://www.php.net/manual/en/book.mysqli.php)or[`php_pdo`](http://www.php.net/manual/en/book.pdo.php)代替。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T03:41:38.490

使用`array_multisort()`或`usort()`与自定义比较功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T04:17:53.333

如果您要进行任何复杂的计算，最好在其中进行计算，`PHP`原因如下：

1.  支持[PHP](http://php.net/manual/en/ref.math.php)中的大多数数学类型，而[MySQL](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html)中没有那么多。
2.  在 PHP 中，您可以处理带有响应的失败方程式，如果您在数据库服务器上执行它们，则必须提取错误，分析并确定发生了什么。
3.  数据库是为存储数据而设计的，PHP 是一种用于运行程序（和方程式）的编程语言。
4.  您可以将方程式存储在安全的数据库表中，然后随意通过 PHP 运行它们。

名称中的任何内容`MySQL`仅适用于数据库。你正在做一些额外的事情。我假设因为您正在提取一个查询（尽管您没有显示查询），所以您将方程式存储在数据库中。

当您使用时，`mysqli_fetch_array()`您已经将结果从数据库中提取到一个数组中，因此无需调用它两次。`while()`除非将其加载到现有的 var 或数组中，否则在语句中提取的任何内容都将一直存在。

将查询存储在数据库中是一个棘手的问题，因为您可以`$`使用单引号存储一个字符，并将其作为一个文字字符，以便稍后用于评估。

```
<?php
//If the vars are set then we're ready for processing
if(!empty($_POST['var1'])&&!empty($_POST['var2'])){

$query = 'select * from equations';
$result = mysqli_query($query) or die(mysqli_error());

//Create the array for storing the equations
$equations = array();
while($row = mysqli_fetch_array($result)){
    $id = $row['id'];
    $equation = $row['id'];
    //store the equations into the array
    $equations[$id]=$equation;
}

//Do some sort of check here... I'm expecting a number
if(is_numeric($_POST['var1'])){
    $var1 = $_POST['var1'];
} else {
//set a default (not 0) 
    $var1 = 1;  
}

//Do some sort of check here... I'm expecting another number
if(is_numeric($_POST['var2'])){
    $var2 = $_POST['var2'];
} else {
//set a default (not 0) 
    $var2 = 1;  
}

//Cool little function for doing equations with 2 vars being passed.
function doEquation($eq,$var1,$var2){
//eg. $eq = '$var1+$var2';
    eval("\$answer=\"$eq\";");
    return $answer;
}

$code = "<!doctype html>\n<html>\n<body>\n";
$code .= "<table style='padding:4px;border:none;'><tr><th>Table Header</th></tr>";

foreach($equations as $id=>$eq){
    $answer = doEquation($eq,$var1,$var2);      
    $code .= "<tr><td>Answer $id = $answer</td></tr>\n";    

}

$code .= "</table>";
$code .= "</body></html>";
} else {
//No vars set we can show them the form for the calculations.

$code = "<!doctype html>\n<html>\n<body>\n";
$code .= "<form method='post'>";
$code .= "Enter Var1<br>";
$code .= "<input type='number' name='var1' value='1' />";
$code .= "Enter Var2<br>";
$code .= "<input type='number' name='var2' value='1' />";
$code .= "<input type='submit' name='submit' value='Calculate' />";
$code .= "</form>"; 
$code .= "</body></html>";
}

print $code;

?> 
```

您需要小心一些计算。您必须键入并检查所有传入的变量。例如，您不能除以 0，因为它会引发错误。也可以加载一个非常复杂的方程式，其中包含足够的信息来使服务器崩溃。请记住，将要解析的任何进入服务器的内容都需要过滤并检查您的预期。您不想使用`echo`命令并让某人开始将`$_SERVER`vars 扔到屏幕上。

还因为在我的示例中，我们使用`eval()`您希望确保这不能执行用户提交的任何其他方程或函数。`strip_tags()`依此类推。由于我的示例需要一个数字，因此我正在检查它是否为`is_numeric`.

# iphone - 我无法使用 mailcore 获取邮件列表

> ID：16182777
> 
> 赞同：0
> 
> 时间：2013-04-24T03:18:43.487
> 
> 标签：iphone, ios

这些天，我正在使用mailcore工作一个邮件客户端。每次都成功连接到imap服务器，但我无法获取INBOX列表。关键代码

```
CTCoreFolder *inbox = [account folderWithPath:@"INBOX"];
   NSArray *messageList = [inbox  messagesFromSequenceNumber :1 to:0 withFetchAttributes:CTFetchAttrEnvelope];

NSLog(@"%d",[messageList count]); 
```

Evertime，输出为0；我这样做有错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T04:56:38.577

为什么不使用`Address Book API`？

以下是一些答案：

[iOS 如何从邮件应用程序获取电子邮件联系人？](https://stackoverflow.com/questions/13450631/ios-how-to-get-email-contacts-from-mails-app)

[从联系人获取所有电子邮件地址 (iOS)](https://stackoverflow.com/questions/6865436/get-all-e-mail-addresses-from-contacts-ios)

# ruby-on-rails-3 - 稍后调用页面方法时，Kaminari 是否会加载所有记录？

> ID：16182778
> 
> 赞同：2
> 
> 时间：2013-04-24T03:18:45.363
> 
> 标签：ruby-on-rails-3, kaminari

在我的`User`模型中

```
def activities
    Activity.where actor_type: self.class.name
end 
```

当我调用`current_user.activities.page(params[:page])`控制器时，我想知道它是否会加载所有活动记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T03:22:23.910

ActiveRecord 是延迟加载的——它只会在您实际访问结果集中的数据时调用 SQL 查询。

在您执行类似`.all`或`.each`其他实际需要访问数据的操作之前，它不会加载活动数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-23T00:07:53.267

不，kaminari 不会一次加载所有记录。您可以在 rails 控制台中对其进行测试：

```
current_user.activities.page(params[:page]).to_sql # => "SELECT  \"activities\".* FROM \"activities\"  WHERE \"activities\".\"user_id\" = 1 LIMIT 25 OFFSET 25" 
```

如您所见，LIMIT 和 OFFSET 都涉及到 SQL 查询。当然，它是急切的加载。

# c++ - 如何创建异常？

> ID：16182781
> 
> 赞同：21
> 
> 时间：2013-04-24T03:18:56.413
> 
> 标签：c++, exception, custom-exceptions

所以我有一个即将到来的任务来处理异常并在我当前的通讯簿程序中使用它们，大部分作业都围绕着它。我决定尝试处理异常和整个 try catch 的事情，并使用类设计，这是我在几周内最终必须为我的作业做的事情。我有工作代码可以很好地检查异常，但我想知道的是，是否有办法标准化我的错误消息函数（即我的 what() 调用）：

这是我的代码：

```
#include <iostream>
#include <exception>
using namespace std;

class testException: public exception
{
public:
  virtual const char* what() const throw() // my call to the std exception class function (doesn't nessasarily have to be virtual).
  {
  return "You can't divide by zero! Error code number 0, restarting the calculator..."; // my error message
  }

  void noZero();

}myex;  //<-this is just a lazy way to create an object

int main()
{
void noZero();
int a, b;

cout << endl;

cout << "Enter a number to be divided " << endl;

cout << endl;

cin >> a;

cout << endl;

cout << "You entered " << a << " , Now give me a number to divide by " << endl;

cin >> b;

try
{    
    myex.noZero(b); // trys my exception from my class to see if there is an issue
}
catch(testException &te) // if the error is true, then this calls up the eror message and restarts the progrm from the start.
{
    cout << te.what() << endl;
    return main();
}

cout <<endl;

cout << "The two numbers divided are " << (a / b) << endl;  // if no errors are found, then the calculation is performed and the program exits.

return 0;

}

  void testException::noZero(int &b) //my function that tests what I want to check
  { 
    if(b == 0 ) throw myex;  // only need to see if the problem exists, if it does, I throw my exception object, if it doesn't I just move onto the regular code.
  } 
```

我想做的就是让我的 what() 函数可以根据调用的错误类型返回一个值。因此，例如，如果我调用一个看起来是顶部数字 (a) 的错误，以查看它是否为零，如果是，它会将消息设置为“你不能拥有一个零分子”，但仍然在 what() 函数中。这是一个例子：

```
 virtual const char* what() const throw() 
  if(myex == 1)
  {
      return "You can't have a 0 for the numerator! Error code # 1 "
  }
  else

  return "You can't divide by zero! Error code number 0, restarting the calculator..."; // my error message
  } 
```

这显然行不通，但是有没有办法做到这一点，所以我不会为每个错误消息编写不同的函数？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-24T09:36:16.660

您的代码包含很多误解。简短的回答是肯定的，您可以更改`what()`以返回您想要的任何内容。但是，让我们一步一步来。

```
#include <iostream>
#include <exception>
#include <stdexcept>
#include <sstream>
using namespace std;

class DivideByZeroException: public runtime_error {
public:

  DivideByZeroException(int x, int y)
    : runtime_error( "division by zero" ), numerator( x ), denominator( y )
    {}

  virtual const char* what() const throw()
  {
    cnvt.str( "" );

    cnvt << runtime_error::what() << ": " << getNumerator()
         << " / " << getDenominator();

    return cnvt.str().c_str();
  }

  int getNumerator() const
    { return numerator; }

  int getDenominator() const
    { return denominator; }

  template<typename T>
  static T divide(const T& n1, const T& n2)
    {
        if ( n2 == T( 0 ) ) {
            throw DivideByZeroException( n1, n2 );
        } 

        return ( n1 / n2 );
    }

private:
    int numerator;
    int denominator;

    static ostringstream cnvt;
};

ostringstream DivideByZeroException::cnvt; 
```

首先`runtime_error`，派生自`exception`是建议的异常类派生自。这是在 stdexcept 标头中声明的。您只需要使用您将在`what()`方法中返回的消息来初始化它的构造函数。

其次，你应该适当地命名你的类。我知道这只是一个测试，但描述性名称总是有助于阅读和理解您的代码。

如您所见，我更改了构造函数以接受引发异常的除数。您在异常中进行了测试......好吧，我尊重这一点，但作为一个可以从外部调用的静态函数。

最后，`what()`方法。由于我们将两个数字相除，因此最好显示两个引发异常的数字。实现这一目标的唯一方法是使用 ostringstream。在这里，我们将其设为静态，因此返回指向堆栈对象的指针没有问题（即，具有`cnvt`局部变量会引入未定义的行为）。

正如您在问题中列出的那样，该程序的其余部分或多或少：

```
int main()
{
int a, b, result;

cout << endl;

cout << "Enter a number to be divided " << endl;

cout << endl;

cin >> a;

cout << endl;

cout << "You entered " << a << " , Now give me a number to divide by " << endl;

cin >> b;

try
{    
        result = DivideByZeroException::divide( a, b );

    cout << "\nThe two numbers divided are " << result << endl;
}
catch(const DivideByZeroException &e)
{
    cout << e.what() << endl;
}

return 0;

} 
```

如您所见，我已删除您的`return main()`指示。这是没有意义的，因为你不能`main()`递归调用。此外，这样做的目的是一个错误：您希望重试引发异常的操作，但这是不可能的，因为异常是不可重入的。但是，您可以稍微更改源代码，以达到相同的效果：

```
int main()
{
int a, b, result;
bool error;

do  {
    error = false;

    cout << endl;

    cout << "Enter a number to be divided " << endl;

    cout << endl;

    cin >> a;

    cout << endl;

    cout << "You entered " << a << " , Now give me a number to divide by " << endl;

    cin >> b;

    try
    {    
        result = DivideByZeroException::divide( a, b ); // trys my exception from my class to see if there is an issue

        cout << "\nThe two numbers divided are " << result << endl;
    }
    catch(const DivideByZeroException &e) // if the error is true, then this calls up the eror message and restarts the progrm from the start.
    {
        cout << e.what() << endl;
        error = true;
    }
} while( error );

return 0;

} 
```

如您所见，如果出现错误，将执行直到输入“正确”除法。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-16T13:08:15.927

您可以像这样为长度错误创建自己的异常类

```
class MyException : public std::length_error{
public:
  MyException(const int &n):std::length_error(to_string(n)){}
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T04:16:06.883

```
class zeroNumerator: public std::exception
{
    const char* what() const throw() { return "Numerator can't be 0.\n"; }
};

//...

try
{
  myex.noZero(b); // trys my exception from my class to see if there is an issue
  if(myex==1)
  {
     throw zeroNumerator(); // This would be a class that you create saying that you can't have 0 on the numerator
  }

}
catch(testException &te) 
{
   cout << te.what() << endl;
   return main();
} 
```

You should always use std::exception&e. so do

```
catch(std::exception & e)
{
  cout<<e.what();
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-01T11:30:31.570

**您应该考虑类的层次结构。**

尝试使用异常仅用于传输字符串时，其原因可能并不明显，但使用异常的实际意图应该是一种高级处理异常情况的机制。很多事情都是在 C++ 运行时环境的引擎盖下完成的，而调用堆栈在从“throw”到对应的“catch”时展开。

类的一个例子可能是：

```
class CalculationError : public std::runtime_error {
public:
    CalculationError(const char * message)
        :runtime_error(message)
    {
    }
};

class ZeroDeviderError : public CalculationError {
public:
    ZeroDeviderError(int numerator, const char * message)
        : CalculationError(message) 
        , numerator (numerator)
    {
    }
    int GetNumerator() const { return numerator; }
private:
    const int numerator;
}; 
```

*   为错误提供不同的类，让开发人员有机会以特定方式处理不同的错误（不仅仅是显示错误消息）
*   为错误类型提供一个基类，让开发人员更加灵活——根据他们的需要进行具体化。

在某些情况下，他们可能想要具体

```
} catch (const ZeroDividerError & ex) {
    // ...
} 
```

在其他人中，不是

```
} catch (const CalculationError & ex) {
    // ...
} 
```

一些额外的细节：

*   在以您所做的方式抛出之前，您不应该创建异常对象。不管你的意图是什么，它都是无用的——无论如何，你正在使用 catch 部分中的对象副本（不要被通过引用访问混淆——抛出时会创建异常对象的另一个实例）
*   `catch (const testException &te)` 除非您确实需要非常量对象，否则使用 const 引用将是一种不错的方式。

另外，请注意，用于异常的类型（类）不允许从其复制构造函数中抛出异常，因为如果尝试通过值捕获初始异常，则可以调用复制构造函数（如果不是被编译器忽略），并且这个额外的异常将在捕获初始异常之前中断初始异常处理，这会导致调用 std::terminate。由于允许 C++11 编译器在某些情况下在捕获时消除复制，但省略并不总是明智的，如果明智的话，它只是许可而不是义务（参见[https://en.cppreference.com/ w/cpp/language/copy_elision](https://en.cppreference.com/w/cpp/language/copy_elision)了解详细信息；在 C++11 之前，该语言的标准并未规范此事）。

此外，您应该避免将异常（将它们称为附加）从构造函数中抛出，并移动用于异常的类型（类）的构造函数（将它们称为初始构造函数），因为在抛出对象时可以调用构造函数和移动构造函数类型作为初始异常，然后抛出一个额外的异常将阻止创建初始异常对象，并且初始异常对象将丢失。以及来自复制构造函数的附加异常，当抛出初始异常时，也会导致相同的结果。

# jsf - PrimeFaces Calendar mindate / maxdate 格式错误

> ID：16182784
> 
> 赞同：0
> 
> 时间：2013-04-24T03:19:28.037
> 
> 标签：jsf, jsf-2, primefaces, calendar

我正在尝试在 Primefaces 日历控件中设置 mindate 和 maxdate。我收到错误 java.lang.IllegalArgumentException: Cannot format given Object as a Date

代码非常简单：

```
<p:calendar value="" pattern="MM/dd/yyyy" mindate="01/01/2012" maxdate="05/31/2012" mode="inline"/> 
```

我认为问题出在 mindate 和 maxdate 属性的字符串中使用的格式，但我看不出问题出在哪里，尤其是当我在模式属性中明确定义了格式时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T04:42:51.247

`format`或`mindate`/没有任何问题`maxdate`。

问题实际上是`value=""`. 我认为您正在尝试将空白显示为默认值。作为严格类型组件的`<p:calendar/>`组件将尝试解析并转换`" "`为`java.util.Date`对象。显然这会导致它窒息。

您最好将`value`属性绑定到支持 bean 中的未初始化`Date`字段或使用属性设置默认值，该`pageDate`属性不是强类型（需要一个`Object`）

# c++ - 提取纹理特征 c++

> ID：16182786
> 
> 赞同：0
> 
> 时间：2013-04-24T03:19:37.637
> 
> 标签：c++, opencv, feature-extraction

我试图通过使用周围像素的灰度值来提取图像的每个像素的特征向量：http: [//img59.imageshack.us/img59/7398/texturemap.png](http://img59.imageshack.us/img59/7398/texturemap.png) 标记为黑色的像素是使用的像素，因为其他像素对于稍后使用的 SVM 的结果是多余的。

目前使用此代码：

```
vector<Histogram*> texture_based(image_file* image) {
  int cat;
  Mat img = cvLoadImage(image->getName().c_str(), CV_LOAD_IMAGE_GRAYSCALE);
  Mat img_b(img.rows + 12, img.cols + 12, img.depth());

copyMakeBorder(img, img_b, 6, 6, 6, 6, IPL_BORDER_CONSTANT, cvScalarAll(0));

vector<Histogram*> result;

for(int i = 6; i < img_b.rows - 6; ++i) {
    for(int j = 6; j < img_b.cols - 6; ++j) {
        Mat hist = Mat::zeros(1, 49, CV_32FC1);
        cat = 0;
        hist.at<float>(0, 0) = (float)img_b.at<char>(i - 6, j - 6);
        hist.at<float>(0, 1) = (float)img_b.at<char>(i - 5, j - 5);
        hist.at<float>(0, 2) = (float)img_b.at<char>(i - 4, j - 4);
        hist.at<float>(0, 3) = (float)img_b.at<char>(i - 3, j - 3);
        hist.at<float>(0, 4) = (float)img_b.at<char>(i - 2, j - 2);
        hist.at<float>(0, 5) = (float)img_b.at<char>(i - 1, j - 1);
        hist.at<float>(0, 6) = (float)img_b.at<char>(i, j);
        hist.at<float>(0, 7) = (float)img_b.at<char>(i + 1, j + 1);
        hist.at<float>(0, 8) = (float)img_b.at<char>(i + 2, j + 2);
        hist.at<float>(0, 9) = (float)img_b.at<char>(i + 3, j + 3);
        hist.at<float>(0, 10) = (float)img_b.at<char>(i + 4, j + 4);
        hist.at<float>(0, 11) = (float)img_b.at<char>(i + 5, j + 5);
        hist.at<float>(0, 12) = (float)img_b.at<char>(i + 6, j + 6);
        hist.at<float>(0, 13) = (float)img_b.at<char>(i + 6, j - 6);
        hist.at<float>(0, 14) = (float)img_b.at<char>(i + 5, j - 5);
        hist.at<float>(0, 15) = (float)img_b.at<char>(i + 4, j - 4);
        hist.at<float>(0, 16) = (float)img_b.at<char>(i + 3, j - 3);
        hist.at<float>(0, 17) = (float)img_b.at<char>(i + 2, j - 2);
        hist.at<float>(0, 18) = (float)img_b.at<char>(i + 1, j - 1);
        hist.at<float>(0, 19) = (float)img_b.at<char>(i - 1, j + 1);
        hist.at<float>(0, 20) = (float)img_b.at<char>(i - 2, j + 2);
        hist.at<float>(0, 21) = (float)img_b.at<char>(i - 3, j + 3);
        hist.at<float>(0, 22) = (float)img_b.at<char>(i - 4, j + 4);
        hist.at<float>(0, 23) = (float)img_b.at<char>(i - 5, j + 5);
        hist.at<float>(0, 24) = (float)img_b.at<char>(i - 6, j + 6);
        hist.at<float>(0, 25) = (float)img_b.at<char>(i, j - 6);
        hist.at<float>(0, 26) = (float)img_b.at<char>(i, j - 5);
        hist.at<float>(0, 27) = (float)img_b.at<char>(i, j - 4);
        hist.at<float>(0, 28) = (float)img_b.at<char>(i, j - 3);
        hist.at<float>(0, 29) = (float)img_b.at<char>(i, j - 2);
        hist.at<float>(0, 30) = (float)img_b.at<char>(i, j - 1);
        hist.at<float>(0, 31) = (float)img_b.at<char>(i, j + 1);
        hist.at<float>(0, 32) = (float)img_b.at<char>(i, j + 2);
        hist.at<float>(0, 33) = (float)img_b.at<char>(i, j + 3);
        hist.at<float>(0, 34) = (float)img_b.at<char>(i, j + 4);
        hist.at<float>(0, 35) = (float)img_b.at<char>(i, j + 5);
        hist.at<float>(0, 36) = (float)img_b.at<char>(i, j + 6);
        hist.at<float>(0, 37) = (float)img_b.at<char>(i - 6, j);
        hist.at<float>(0, 38) = (float)img_b.at<char>(i - 5, j);
        hist.at<float>(0, 39) = (float)img_b.at<char>(i - 4, j);
        hist.at<float>(0, 40) = (float)img_b.at<char>(i - 3, j);
        hist.at<float>(0, 41) = (float)img_b.at<char>(i - 2, j);
        hist.at<float>(0, 42) = (float)img_b.at<char>(i - 1, j);
        hist.at<float>(0, 43) = (float)img_b.at<char>(i + 1, j);
        hist.at<float>(0, 44) = (float)img_b.at<char>(i + 2, j);
        hist.at<float>(0, 45) = (float)img_b.at<char>(i + 3, j);
        hist.at<float>(0, 46) = (float)img_b.at<char>(i + 4, j);
        hist.at<float>(0, 47) = (float)img_b.at<char>(i + 5, j);
        hist.at<float>(0, 48) = (float)img_b.at<char>(i + 6, j);
        if(image->inAnyRec(i, j))
            cat = 1;

        Mat_<float> new_hist = hist;
        Histogram* t = new Histogram(&new_hist, cat);
        result.push_back(t);
    }
}

return result;
} 
```

其中 image_file* 一个指针指向一个包含图像信息的类。我想知道是否有更快的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:48:49.967

您可以计算 4 遍的操作；每个都将初始化一个包含 12 个（或 13 个）元素的向量，向东、向南、向东北或向东南移动一个像素，然后只替换向量中的一个像素。这还需要一次初始化所有直方图向量 (width-12)*(height-12), 49。

一个支持选项是将原始图像旋转/倾斜成四个数组 - 如果在该点执行 char->float 转换有意义，您必须进行分析。

```
a b c d   -->  a e i  -->  a f k  >  i f c
e f g h        b f j       b g l     j g d
i j k l        c g k      
               d h l 
```

从这些新数组中，内存读取模式/缓存位置可以产生影响。

# xcode - 如何在 iOS6 中的 UIView 上获得高斯模糊效果

> ID：16182788
> 
> 赞同：1
> 
> 时间：2013-04-24T03:19:45.363
> 
> 标签：xcode, twitter, uiview, blur, gaussian

有谁知道如何在 iOS6 中的 UIView 上实现高斯模糊效果？当过滤器菜单打开时，类似于 twitter 的#music 应用程序。（菜单下的背景变得模糊）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T13:20:43.787

我写了一个基于[GPUImage的库](https://github.com/BradLarson/GPUImage/)[RWBlurPopover](https://github.com/eternityz/RWBlurPopover) ，在呈现popover时可以达到类似的高斯模糊效果。支持 iPhone 和 iPad，并在 iOS 5.1+ 上运行。

# matlab - 在matlab中加载文件.dat时出错

> ID：16182789
> 
> 赞同：0
> 
> 时间：2013-04-24T03:19:54.817
> 
> 标签：matlab, compiler-errors, speech, matlab-load

当我尝试在 Matlab 中加载文件 .dat 时遇到问题。我关于语音数据的 .dat 文件：

```
% Read data file "orig.dat" with sampling rate of 8 kHz
% create an example sound
fs=8000;
t=0:1/fs:3;
x = 1*sin(2*pi*4*t)+0.25* sin(2*pi*560*t);
% play it back
%sound(x, 8000);
wavwrite(x,fs,16,'test56.wav');
y=wavread('test56.wav')
save y.dat y
load y.dat 
```

有一个错误：

> ？？？错误使用 ==> 加载 ASCII 文件 C:\Program Files\MATLAB\R2010b\bin\doan\y.dat 的第 1 行的列数
> 必须与前几行相同。
> ==> twosubband 在 8 加载 y.dat 时出错；% 加载语音数据

我不明白。帮我修一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:52:55.570

`load`期望有自己的数据格式的文件。尝试另存`y`为`y.mat`而不是`y.dat`. 也就是说，`y.dat`在保存的行和加载的行中都替换为`y.mat`.

这应该够了吧。

# c++ - 在我的程序中无法识别 cout<<？

> ID：16182798
> 
> 赞同：0
> 
> 时间：2013-04-24T03:20:58.230
> 
> 标签：c++, binary-search-tree

我正在创建一个包含多个文件的程序，但它无法识别我的 tnode 文件中的 cout<<。谁能找到问题出在哪里？在其他错误中，我在我的节点文件中收到此错误“cout 未在此范围内声明”。我的主要功能：

```
#include <iostream>
#include "bst.h"
using namespace std;

int main(int argc, char *argv[]) {
    cout<<"hi";
    bst *list = new bst();
    return 0;
} 
```

我的 BinarySearchTree 文件：

```
#ifndef bst_H
#define bst_H
#include <iostream>
#include <string>
#include "tnode.h"

class bst
{
    public:

    bst()
    {
    root = NULL;
    }
void add(int key, char value) {
      if (root == NULL) {
            root = new tnode(key, value);
            return
      } else
            root->add(key, value);
            return
}

tnode *root;

};

#endif 
```

我的节点文件：

```
#ifndef tnode_H
#define tnode_H
#include <iostream>
#include <string>

class tnode
{
public:
    tnode(int key, char value)
    {
                this->key = key;
                this->value = value;
                N = 1;
                left = NULL;
                right = NULL;
                cout<<"hi";
    }

void add(int key, char value) {
      if (key == this->key)
      {
            cout<<"This key already exists";
            return;
      }
      else if (key < this->key)
       {
            if (left == NULL) 
            {
                  left = new tnode(key, value);
                  cout<<"Your node has been placed!!";
                   return;
            } 
            else
            {
                  left->add(key, value);
                  cout<<"Your node has been placed!";
                  return;
            } 
      }
       else if (key > this->key)
       {
            if (right == NULL) 
            {
                  right = new tnode(key, value);
                  cout<<"Your node has been placed!!"; return;
            } 
            else
                  return right->add(key, value);
       }
      return;
}
        tnode* left;
        tnode* right;
        int key;
        char value;
        int N;

};

#endif 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T03:22:39.757

你需要做：

```
 using namespace std; 
```

或者

```
 std::cout 
```

在你的`tnode`文件中

但是`using namespace std`被认为是不好的做法，所以你最好使用第二种方式：

```
std::cout<<"Your node has been placed!!"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T03:22:31.490

您需要使用命名空间`std`。通过（可以进入 .cpp 文件但永远不会进入 .h 文件，请[在此处](https://stackoverflow.com/questions/1265039/using-std-namespace)`using namespace std`阅读有关原因的更多信息）或在调用它时使用。`std::cout`

# python - 改变matplotlib球体的颜色和调整形状python

> ID：16182802
> 
> 赞同：1
> 
> 时间：2013-04-24T03:21:07.747
> 
> 标签：python, graphics, 3d, matplotlib

**编辑**

我仍然想要解决方案的唯一部分是让球体看起来是球形的。如果我将轴缩放相同，则球体太小但呈球形。有没有办法将未使用的部分剪掉以便放大？或者我们是否需要将轴设置得这么大并获得所需的效果？

**结束编辑**

通过在[python 中绘制一个球体](https://stackoverflow.com/questions/16158339/plotting-a-sphere-in-python-for-an-orbital-trajectory/16161756#comment23120285_16161756)，我能够将两个球体添加到我的绘图中。

但是，无论我如何调整参数，我都无法让它们看起来像球形。此外，`'g'`在绘图末尾添加或任何其他颜色不会改变那里的颜色。

我也试过`color='g'`，但也没有用。

如何获得球形外观 ( `ax autoscale`) 并更改颜色？

```
#!/usr/bin/env python                                                             
#  This porgram numerically solves the trajectory from the Earth to the moon      
#  with the specified flight path, true anomaly, and initial conditions.          

import numpy as np
from scipy.integrate import odeint
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D
from numpy import linspace

me = 5.974 * 10 ** (24)  #  mass of the earth                                     
mm = 7.348 * 10 ** (22)  #  mass of the moon                                      
G = 6.67259 * 10 ** (-20)  #  gravitational parameter                             
re = 6378.0  #  radius of the earth in km                                         
rm = 1737.0  #  radius of the moon in km                                          
r12 = 384400.0  #  distance between the CoM of the earth and moon                 
M = me + mm

pi1 = me / M
pi2 = mm / M
mue = 398600.0  #  gravitational parameter of earth km^3/sec^2                    
mum = G * mm  #  grav param of the moon                                           
mu = mue + mum
omega = np.sqrt(mu / r12 ** 3)
nu = -134.979 * np.pi / 180  #  true anomaly angle in radian                      

x = 327156.0 - 4671
#  x location where the moon's SOI effects the spacecraft with the offset of the  
#  Earth not being at (0,0) in the Earth-Moon system                              
y = 33050.0   #  y location                                                       

vbo = 10.85  #  velocity at burnout                                               

gamma = 0 * np.pi / 180  #  angle in radians of the flight path                   

vx = vbo * (np.sin(gamma) * np.cos(nu) - np.cos(gamma) * np.sin(nu))
#  velocity of the bo in the x direction                                          
vy = vbo * (np.sin(gamma) * np.sin(nu) + np.cos(gamma) * np.cos(nu))
#  velocity of the bo in the y direction                                          

xrel = (re + 300.0) * np.cos(nu) - pi2 * r12
yrel = (re + 300.0) * np.sin(nu)

#  r0 = [xrel, yrel, 0]                                                           
#  v0 = [vx, vy, 0]                                                               
u0 = [xrel, yrel, 0, vx, vy, 0]

def deriv(u, dt):
    n1 = -((mue * (u[0] + pi2 * r12) / np.sqrt((u[0] + pi2 * r12) ** 2
                                               + u[1] ** 2) ** 3)
        - (mum * (u[0] - pi1 * r12) / np.sqrt((u[0] - pi1 * r12) ** 2
                                              + u[1] ** 2) ** 3))
    n2 = -((mue * u[1] / np.sqrt((u[0] + pi2 * r12) ** 2 + u[1] ** 2) ** 3)
        - (mum * u[1] / np.sqrt((u[0] - pi1 * r12) ** 2 + u[1] ** 2) ** 3))
    return [u[3],  #  dotu[0] = u[3]                                              
            u[4],  #  dotu[1] = u[4]                                              
            u[5],  #  dotu[2] = u[5]                                              
            2 * omega * u[4] + omega ** 2 * u[0] + n1,  #  dotu[3] = that         
            omega ** 2 * u[1] - 2 * omega * u[3] + n2,  #  dotu[4] = that         
            0]  #  dotu[5] = 0                                                    

dt = np.linspace(0.0, 320000.0, 1000000.0)  #  200000 secs to run the simulation  
u = odeint(deriv, u0, dt)
x, y, z, x2, y2, z2 = u.T

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
ax.plot(x, y, z)
#  adding the moon                                                                
phi = np.linspace(0, 2 * np.pi, 100)
theta = np.linspace(0, np.pi, 100)
xm = rm * np.outer(np.cos(phi), np.sin(theta)) + r12
ym = rm * np.outer(np.sin(phi), np.sin(theta))
zm = rm * np.outer(np.ones(np.size(phi)), np.cos(theta))
ax.plot_surface(xm, ym, zm)
ax.auto_scale_xyz([-50000, 400000], [0, 160000], [-130000, 130000])
#  adding the earth                                                               
xe = re * np.outer(np.cos(phi), np.sin(theta)) - 4671
ye = re * np.outer(np.sin(phi), np.sin(theta))
ze = re * np.outer(np.ones(np.size(phi)), np.cos(theta))
ax.plot_surface(xe, ye, ze, 'g')
ax.auto_scale_xyz([-50000, 400000], [0, 160000], [-130000, 130000])
#                                                                                 
plt.show()
#  The code below finds the distance between path and the moon                    
my_x, my_y, my_z = (384400,0,0)

delta_x = x - my_x
delta_y = y - my_y
delta_z = z - my_z
distance = np.array([np.sqrt(delta_x ** 2 + delta_y ** 2 + delta_z ** 2)])

minimum = np.amin(distance)

print(minimum) 
```

# postgresql - 如何在 OpenERP 版本 6.1.1 中删除重复记录

> ID：16182806
> 
> 赞同：0
> 
> 时间：2013-04-24T03:21:32.030
> 
> 标签：postgresql, openerp

我想为我的内部报告目的获取员工 ID、休假原因、休假类型和员工姓名。我写了一个 SQL 查询来检索这些数据，我也得到了一些重复的数据。

似乎缺少一些加入/外国ID映射部分

```
select
   h.id as employee_id,h.name as leave_reason,
   s.name,r.name as res_name
from 
   hr_holidays_status s,
   hr_holidays h,
   hr_employee e,
   resource_resource r
where 
   h.employee_id=e.id and 
   h.holiday_status_id=s.id and
   e.resource_id=r.id
order by 
   resource_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:54:32.417

您的查询看起来是正确的，但您可能会得到意想不到的结果，因为该`hr_holidays`表同时包含“离开请求”和“离开分配”。这就像一个复式系统，休假分配增加了员工或员工类别的休假天数，而休假请求减少了它。

您的查询可能应该考虑到这种区别，并且您可能还希望过滤其他字段，例如状态，因为某些记录可能尚未验证。

[查看 6.1 中hr.holidays](http://bazaar.launchpad.net/~openerp/openobject-addons/6.1/view/head:/hr_holidays/hr_holidays.py#L112)模型的声明，您会看到一些可以在查询中使用的值得注意的字段：

*   `type`: 可以是*Allocation* ( `'add'`) 表示递增，也可以是*Request* ( `'remove'`) 表示递减
*   `holiday_type`：可以是*Employee*（`'employee'`），在这种情况下，`employee_id`列表示哪个员工，或*Category*（`'category'`），在这种情况下，`category_id`列表示哪个类别
*   `state`：*新建*（`'draft'`）、*等待批准*（`'confirm'`）、*拒绝*（`'refuse'`）、*等待二次批准*（`'validate1'`）、*批准*（`'validate'`）、*取消*（`'cancel'`）

# iphone - 导航到导航控制器的主视图

> ID：16182809
> 
> 赞同：0
> 
> 时间：2013-04-24T03:21:52.983
> 
> 标签：iphone, objective-c, uinavigationcontroller

我有一个导航控制器中的视图列表。我有我的主页，带有我的开始按钮和其他按钮。单击开始按钮后，我的应用程序会加载带有更多按钮的第二页，选择这些按钮后，我会加载第三个视图。我不知道如何从堆栈中的第 3 个视图一直返回到我的主视图，而不必花时间使用后退按钮浏览每个视图；提前感谢和赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T03:33:42.730

我想`[self.navigationController popToRootViewControllerAnimated:YES];`这就是你要找的。

# java - 插入声音/音频

> ID：16182810
> 
> 赞同：-2
> 
> 时间：2013-04-24T03:21:53.823
> 
> 标签：java, android, sqlite, audio

我有一个包含一个`ListView`和一个图片的数据库，我想在每个语音数据中包含一个。我试过了，但我有很多错误。以下是我的java和xml。

![图片](https://i.stack.imgur.com/QrGyy.jpg)

数据库.java

```
package com.example.database;
    import android.content.ContentValues;
    import android.content.Context;
    import android.database.sqlite.SQLiteDatabase;
    import android.database.sqlite.SQLiteOpenHelper;
    public class Database extends SQLiteOpenHelper {
    final static String DB_NAME = "db_tum_obat";
public Database(Context context) {
    super(context, DB_NAME, null, 1);
    // TODO Auto-generated constructor stub
}

@Override
public void onCreate(SQLiteDatabase db) {
    String sql = "CREATE TABLE IF NOT EXISTS tum(_id INTEGER PRIMARY KEY AUTOINCREMENT, nama TEXT, nama_latin TEXT, khasiat TEXT, img BLOB, img2 BLOB)";
    db.execSQL(sql);

    ContentValues values = new ContentValues();
    values.put("_id", "1");
    values.put("nama", "Jarak Pagar");
    values.put("nama_latin", "Jatropha curcas Linn.");
    values.put("khasiat",
            "ketombe, lemah saraf, menghitamkan rambut, rambut rontok, rematik");
    values.put("img", R.drawable.im31);
    values.put("img2", R.drawable.home);// im31 nama file gambar dengan
                                        // ukuran 80 x 80 pixel yang ada di
                                        // folder res/drawable pada project
    db.insert("tum", "_id", values);

    values.put("_id", "2");
    values.put("nama", "Kumis Kucing");
    values.put("nama_latin", "Orthosipon aristatus (B1) Miq.");
    values.put("khasiat",
            "ketombe, lemah saraf, menghitamkan rambut, rambut rontok, rematik");
    values.put("img", R.drawable.im32);
    values.put("img2", R.drawable.keluar1);// im32 nama file gambar dengan
                                        // ukuran 80 x 80 pixel yang ada di
                                        // folder res/drawable pada project
    db.insert("tum", "_id", values);

    values.put("_id", "3");
    values.put("nama", "Lidah Buaya");
    values.put("nama_latin", "Aloe Verra Linn.");
    values.put("khasiat",
            "ketombe, lemah saraf, menghitamkan rambut, rambut rontok, rematik");
    values.put("img", R.drawable.im33);
    values.put("img2", R.drawable.home);// im33 nama file gambar dengan
                                        // ukuran 80 x 80 pixel yang ada di
                                        // folder res/drawable pada project
    db.insert("tum", "_id", values);

    values.put("_id", "4");
    values.put("nama", "Pandan Wangi");
    values.put("nama_latin", "Pandanus amryllifolius Roxb");
    values.put("khasiat",
            "ketombe, lemah saraf, menghitamkan rambut, rambut rontok, rematik");
    values.put("img", R.drawable.im34);
    values.put("img2", R.drawable.keluar1);// im34 nama file gambar dengan
                                        // ukuran 80 x 80 pixel yang ada di
                                        // folder res/drawable pada project
    db.insert("tum", "_id", values);

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS tum");
    onCreate(db);

}

} 
```

MainActivity.java

```
package com.example.database;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.view.View;
import android.widget.AdapterView;
import android.widget.EditText;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.Toast;
import android.widget.AdapterView.OnItemClickListener;

public class MainActivity extends Activity {
protected ListView lv;
protected ListAdapter adapter;
SQLiteDatabase db;
Cursor cursor;
EditText et_db;

@SuppressWarnings("deprecation")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    db = (new Database(this)).getWritableDatabase();
    lv = (ListView) findViewById(R.id.lv);
    et_db = (EditText) findViewById(R.id.et);

    try {
        cursor = db.rawQuery("SELECT * FROM tum ORDER BY nama ASC", null);
        adapter = new SimpleCursorAdapter(this, R.layout.isi_lv, cursor,
                new String[] { "nama", "nama_latin", "img" }, new int[] {
                        R.id.tv_nama, R.id.tv_penyebab, R.id.imV });
        lv.setAdapter(adapter);
        lv.setTextFilterEnabled(true);
        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View v,
                    int position, long id) {
                detail(position);

            }
        });
    } catch (Exception e) {
        e.printStackTrace();
    }

}

@SuppressWarnings("deprecation")
public void search_db(View v) {
    String edit_db = et_db.getText().toString();
    if (!edit_db.equals("")) {
        try {
            cursor = db.rawQuery("SELECT * FROM tum WHERE nama LIKE ?",
                    new String[] { "%" + edit_db + "%" });
            adapter = new SimpleCursorAdapter(this, R.layout.isi_lv,
                    cursor, new String[] { "nama", "nama_latin", "img" },
                    new int[] { R.id.tv_nama, R.id.tv_penyebab, R.id.imV });
            if (adapter.getCount() == 0) {
                Toast.makeText(
                        this,
                        "Tidak ditemukan data dengan kata kunci " + edit_db
                                + "", Toast.LENGTH_SHORT).show();
            } else {
                lv.setAdapter(adapter);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    } else {
        try {
            cursor = db.rawQuery("SELECT * FROM tum ORDER BY nama ASC",
                    null);
            adapter = new SimpleCursorAdapter(this, R.layout.isi_lv,
                    cursor, new String[] { "nama", "nama_latin", "img" },
                    new int[] { R.id.tv_nama, R.id.tv_penyebab, R.id.imV });
            lv.setAdapter(adapter);
            lv.setTextFilterEnabled(true);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}

public void detail(int position) {
    int im2 = 0;
    String _id = "";
    String nama = "";
    String latin = "";
    String khasiat = "";
    if (cursor.moveToFirst()) {
        cursor.moveToPosition(position);
        im2 = cursor.getInt(cursor.getColumnIndex("img2"));
        nama = cursor.getString(cursor.getColumnIndex("nama"));
        latin = cursor.getString(cursor.getColumnIndex("nama_latin"));
        khasiat = cursor.getString(cursor.getColumnIndex("khasiat"));
    }

    Intent iIntent = new Intent(this, DetailTum.class);
    iIntent.putExtra("dataIM2", im2);
    iIntent.putExtra("dataNama", nama);
    iIntent.putExtra("dataLatin", latin);
    iIntent.putExtra("dataKhasiat", khasiat);
    setResult(RESULT_OK, iIntent);
    startActivityForResult(iIntent, 99);
}

 } 
```

DetailTum.java

```
package com.example.database;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.Gallery;
import android.widget.ImageSwitcher;
import android.widget.ImageView;
import android.widget.TextView;

public class DetailTum extends Activity {
ImageView Im2;
TextView tv_nama, tv_latin, tv_khasiat, id, namaIm;
Gallery gallery;
ImageSwitcher imageSwitcher;
Integer[] imageIDs = new Integer[3];
int msg_im2;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.detail);

    Intent iIdentifikasi = getIntent();
    msg_im2 = iIdentifikasi.getIntExtra("dataIM2", 0);
    String msg_nama = iIdentifikasi.getStringExtra("dataNama");
    String msg_latin = iIdentifikasi.getStringExtra("dataLatin");
    String msg_khasiat = iIdentifikasi.getStringExtra("dataKhasiat");
    Im2 = (ImageView) findViewById(R.id.iv_detail2);
    tv_nama = (TextView) findViewById(R.id.tvNama);
    tv_latin = (TextView) findViewById(R.id.tvLatin);
    tv_khasiat = (TextView) findViewById(R.id.tvKhasiat);
    Im2.setImageResource(msg_im2);
    tv_nama.setText(msg_nama);
    tv_latin.setText(msg_latin);
    tv_khasiat.setText(msg_khasiat);
}
  } 
```

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#FFF567"
android:orientation="vertical"
tools:context=".MainActivity" >

<EditText
    android:id="@+id/et"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_toLeftOf="@+id/btn" >

    <requestFocus />
</EditText>

<Button
    android:id="@+id/btn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:onClick="search_db"
    android:text="Search" />

<ListView
    android:id="@+id/lv"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/et" >
</ListView> 
```

isi_lv.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ImageView
    android:id="@+id/imV"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:src="@drawable/ic_launcher" />

<TextView
    android:id="@+id/tv_nama"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@+id/imV"
    android:text="TextView"
    android:textSize="10pt" />

<TextView
    android:id="@+id/tv_penyebab"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/tv_nama"
    android:layout_below="@+id/tv_nama"
    android:text="TextView" /> 
```

详细信息.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#FFF567"
android:orientation="vertical" >

<ImageView
    android:id="@+id/iv_detail2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

<TableLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Nama" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text=":" />

        <TextView
            android:id="@+id/tvNama"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Nama Latin" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text=":" />

        <TextView
            android:id="@+id/tvLatin"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Khasiat" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text=":" />

        <TextView
            android:id="@+id/tvKhasiat"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />
    </TableRow>
</TableLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:00:13.257

如果您想保存路径，请按照 Telthien 所说的做。

如果要将文件作为一个整体保存，可以将数据保存为 BLOB 类型。[http://www.sqlite.org/datatype3.html](http://www.sqlite.org/datatype3.html)

# java - 如何在jsp页面中以缩略图形式显示目录数据

> ID：16182811
> 
> 赞同：0
> 
> 时间：2013-04-24T03:21:54.970
> 
> 标签：java, jsp, servlets

现在我正在以简单的表格行格式显示数据，但我想以缩略图格式显示数据，因此用户无需打开或下载即可看到它是什么。

我当前用于显示目录数据的 jsp 页面如下：

```
File folder = new File("d:\\Reports");
File[] listOfFiles = folder.listFiles();

for (int i = 0; i < listOfFiles.length; i++)
                {
                    if (listOfFiles[i].isFile())
                    {
                        if(listOfFiles[i].getName().equals(file_name))
                        {
                            String StrBgEven = "#C6C6C6", strBgOdd = "#CECECE";

                            String [] color={"#C6C6C6","#CECECE"};

                            %>

                                <tr height="28px"  id="table_row"    bgcolor="<%=color[row_counter]%>">
                                  <td width="7%"><div align="center"><%= id=id+1 %></div></td>
                                  <td width="39%"><%=listOfFiles[i].getName() %></td>
                                  <td width="12%"><%= file_type  %></td>
                                  <td width="14%"><%= file_size/1000 %> KB</td>
                                  <td width="14%"><div align="center"><a href="Deletefile?path=d:\Reports\&filename=<%=listOfFiles[i].getName()%>">Delete</a></div></td>
                                  <td width="14%"><div align="center"><a href="Savefile?path=d:\Reports\&filename=<%=listOfFiles[i].getName()%>">Download</a> </div></td>
                                </tr>                             
                            <%
                            row_counter = 1 - row_counter;
                        }
                    }
                } 
```

* * *

> 有没有人有解决方案？？

* * *

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-11-22T10:35:40.503

使用 div 并根据您的需要使其成为 css 并使所有事物动态化。尝试使用 css 但外部而不是内部或嵌入式。并将每一个显示为单独的，并且只使用一个内部脚本，它将适用于每一个结果相同...

# websocket - 如何保持 websocket 连接直到任一方关闭？

> ID：16182814
> 
> 赞同：5
> 
> 时间：2013-04-24T03:22:15.787
> 
> 标签：websocket, poco-libraries

我想在 websocket 上构建聊天应用程序，并选择 Poco C++ lib 作为 webserver (1.4.6p1)。同时有多个用户，poco websocket 会在读取帧时被阻塞，但如果浏览器没有收到任何内容，则在 60 秒后自动释放。

我想保持套接字连接以管理这么多活动（或空闲）用户，但如何到达那里？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-13T18:31:46.917

我用这个简单且有点脏的代码行“修复”了这个问题：

```
ws.setReceiveTimeout(Poco::Timespan(10, 0, 0, 0, 0)); 
```

基本上，我将接收超时设置为 10 天。因为我的 websocket 的寿命只有几个小时，所以 10 天对我来说是无限的。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T15:59:36.937

看看这个：

[Poco::Net 服务器和客户端 TCP 连接事件处理程序](https://stackoverflow.com/questions/14632341/poconet-server-client-tcp-connection-event-handler/14646650#14646650)

您有一些关于如何等待传入连接、超时等的示例。

祝你好运

# java - 无法在 Google App Engine 中删除数据存储索引

> ID：16182816
> 
> 赞同：1
> 
> 时间：2013-04-24T03:22:23.817
> 
> 标签：java, google-app-engine

我按照[Google App Engine 的入门指南进行](https://developers.google.com/appengine/docs/java/gettingstarted/)操作，并执行了“上传您的应用程序”步骤。当我上传我的应用程序时，数据存储索引从未进入状态服务，而是进入错误。

我删除了 datastore-indexes-auto.xml 并在 WEB-INF 目录中创建了自己的 datastore-indexes.xml 以查看是否有帮助。[当我尝试上传时，我根据此链接](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine/NLDsbDgg8qk)收到“无法在错误中构建索引”消息

我按照说明注释掉我的`<datastore-index>`元素并运行`appcfg vacuum_indexes Guestbook\war`. 这会将索引移动到删除状态，但最终它会再次进入错误而不是被删除。我尝试创建一个新索引，并且两者都发生了相同的行为。我不能摆脱他们！

任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:09:50.527

使用管理控制台中的“报告生产问题”链接。

# python - csv 和 xlsx 文件导入到 pandas 数据框：速度问题

> ID：16182822
> 
> 赞同：6
> 
> 时间：2013-04-24T03:22:42.533
> 
> 标签：python, csv, pandas, xlsx, openpyxl

从 xlsx 文件中读取数据（仅 20000 个数字）需要很长时间：

```
import pandas as pd
xlsxfile = pd.ExcelFile("myfile.xlsx")
data = xlsxfile.parse('Sheet1', index_col = None, header = None) 
```

大约需要 9 秒。

如果我以 csv 格式保存相同的文件，则需要大约 25 毫秒：

```
import pandas as pd
csvfile = "myfile.csv"
data = pd.read_csv(csvfile, index_col = None, header = None) 
```

这是 openpyxl 的问题还是我错过了什么？有没有其他选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T09:00:20.363

[xlrd](https://pypi.python.org/pypi/xlrd)支持 .xlsx 文件，这个[答案](https://stackoverflow.com/a/9897909/1452002)表明至少支持 .xlsx 的 xlrd 测试版比 openpyxl 更快。

当前的稳定版 Pandas (11.0) 使用 openpyxl 处理 .xlsx 文件，但在下一个版本中已更改。如果你想试一试，你可以从[GitHub下载开发版本](https://github.com/pydata/pandas)

# stack - Ada 初学者 Stack 程序

> ID：16182824
> 
> 赞同：3
> 
> 时间：2013-04-24T03:22:53.723
> 
> 标签：stack, ada, abstract-data-type, gnat

基本上，我有 2 个文件（.adb 和 .ads）。我对 Ada 以及如何编译 2 个文件完全陌生。该程序是一个基本的堆栈实现。编译 .adb 文件时出现此编译错误。

```
$ gcc -c test_adt_stack.adb
abstract_char_stack.ads:22:01: end of file expected, file can have only one compilation unit 
```

我拥有的 2 个文件是： **abstract_char_stack.ads**

```
-----------------------------------------------------------
package Abstract_Char_Stack is
  type Stack_Type is private;
  procedure Push(Stack : in out Stack_Type;
                 Item  : in Character);
  procedure Pop (Stack : in out Stack_Type;
                 Char  : out Character);
private
  type Space_Type is array(1..8) of Character;
  type Stack_Type is record
    Space : Space_Type;
    Index : Natural := 0;
  end record;
end Abstract_Char_Stack;
-----------------------------------------------------------
package body Abstract_Char_Stack is
----------------------------------------------
  procedure Push(Stack : in out Stack_Type;
                  Item : in Character) is
  begin
    Stack.Index := Stack.Index + 1;
    Stack.Space(Stack.Index) := Item;
  end Push;
--------------------------------------------
  procedure Pop (Stack : in out Stack_Type;
                 Char  : out Character) is
  begin
    Char := Stack.Space(Stack.Index);
    Stack.Index := Stack.Index - 1;
  end Pop;
--------------------------------------------
end Abstract_Char_Stack; 
```

另一个是**test_adt_stack.adb**

```
-----------------------------------------------------------
with Ada.Text_IO; use Ada.Text_IO;
with Abstract_Char_Stack; use Abstract_Char_Stack;
procedure Test_ADT_Stack is
  S1 : Stack_Type;
  S2 : Stack_Type;
  Ch : Character;
begin
  Push(S1,'H'); Push(S1,'E');  
  Push(S1,'L'); Push(S1,'L');
  Push(S1,'O');                          -- S1 holds O,L,L,E,H

  for I in 1..5 loop
    Pop(S1, Ch);  
    Put(Ch);                             -- displays OLLEH
    Push(S2,Ch); 
  end loop;                              -- S2 holds H,E,L,L,O

  New_Line;
  Put_Line("Order is reversed");

  for I in 1..5 loop
    Pop(S2, Ch);
    Put(Ch);                             -- displays HELLO
  end loop;

end Test_ADT_Stack;
----------------------------------------------------------- 
```

我究竟做错了什么？我只想让它编译并显示它应该做什么。这是一项研究计划类型的任务。但我不能让它编译或者不知道我是否做对了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T04:54:02.973

问题是 GNAT [和 FSF GNAT 是 GCC 使用的，IIRC] 不允许单个文件中有多个编译单元。（这是由于他们管理图书馆的方式，但这对于初学者来说可能有点过于详细了。）

解决方案，每个都需要自己的文件：

*   Abstract_Char_Stack 规范 ( `abstract_char_stack.ads`)
*   Abstract_Char_Stack 正文 ( `abstract_char_stack.adb`)
*   Test_ADT_Stack [过程] 正文 ( `test_adt_stack.adb`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-16T06:09:10.203

```
with Ada.Text_IO; use Ada.Text_IO;
with Ada.Integer_Text_IO; use Ada.Integer_Text_IO;
-----------------------------------------------------------

procedure Test_ADT_Stack is

    enter code here

package Abstract_Char_Stack is
  type Stack_Type is private;
  procedure Push(Stack : in out Stack_Type;
                 Item  : in Character);
  procedure Pop (Stack : in out Stack_Type;
                 Char  : out Character);
private
  type Space_Type is array(1..8) of Character;
  type Stack_Type is record
    Space : Space_Type;
    Index : Natural := 0;
  end record;
  end Abstract_Char_Stack;

   use Test_ADT_Stack.Abstract_Char_Stack ;
    S1 : Stack_Type;
    S2 : Stack_Type;
    Ch : Character;

-----------------------------------------------------------
package body Abstract_Char_Stack is
----------------------------------------------
  procedure Push(Stack : in out Stack_Type;
                  Item : in Character) is
  begin
    Stack.Index := Stack.Index + 1;
    Stack.Space(Stack.Index) := Item;
  end Push;
--------------------------------------------
  procedure Pop (Stack : in out Stack_Type;
                 Char  : out Character) is
  begin
    Char := Stack.Space(Stack.Index);
    Stack.Index := Stack.Index - 1;
  end Pop;
--------------------------------------------
end Abstract_Char_Stack;

-----------------------------------------------------------
begin
  Push(S1,'H'); Push(S1,'E');  
  Push(S1,'L'); Push(S1,'L');
  Push(S1,'O');                          -- S1 holds O,L,L,E,H

  for I in 1..5 loop
    Pop(S1, Ch);  
    Put(Ch);                             -- displays OLLEH
    Push(S2,Ch); 
  end loop;                              -- S2 holds H,E,L,L,O

  New_Line;
  Put_Line("Order is reversed");

  for I in 1..5 loop
    Pop(S2, Ch);
    Put(Ch);                             -- displays HELLO
  end loop;

end Test_ADT_Stack;
----------------------------------------------------------- 
```

# registry - 无需重新启动即可更新 Windows 资源管理器关联

> ID：16182826
> 
> 赞同：2
> 
> 时间：2013-04-24T03:23:05.083
> 
> 标签：registry, associations, explorer

我写了一个代码，改变资源管理器的文件关联。

```
public void Associate(String app, String ext)
{
        RegistryKey extKey = classesRoot.CreateSubKey("." + ext, RegistryKeyPermissionCheck.ReadWriteSubTree);

        String prevValue = (String) extKey.GetValue("");
        if (prevValue != null)
        {
            if (prevValue.Equals("BAMP_" + ext))
            {
                extKey.Close();
                return;
            }
            extKey.SetValue(BAMP_BACKUP, prevValue, RegistryValueKind.String);
        }

        extKey.SetValue("", "BAMP_" + ext, RegistryValueKind.String);
        extKey.Close();

        RegistryKey bampKey = classesRoot.CreateSubKey("BAMP_" + ext + "\\shell\\open\\command");

        bampKey.SetValue("", app + " \"\"%l\"\" ", RegistryValueKind.String);
        bampKey.Close();
    } 
```

实际上，它备份旧文件关联并设置新文件。

它运作良好，注册表已更改。但是，资源管理器不会读取新设置，直到重新启动。

阅读官方文档并没有找到如何强制它重新加载注册表设置。

是否可以强制资源管理器重新加载注册表设置而不重启 explorer.exe 进程？

提前致谢。

# parsing - parsec 使用 between 解析括号

> ID：16182833
> 
> 赞同：5
> 
> 时间：2013-04-24T03:23:45.987
> 
> 标签：parsing, haskell, parsec

例如，如果我想将具有多个括号组的字符串解析为包含每个组的字符串列表

```
"((a b c) a b c)" 
```

进入

```
["((a b c) a b c)","( a b c)"] 
```

我将如何使用秒差来做到这一点？使用`between`看起来不错，但似乎无法用开始值和结束值分开。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T04:35:18.327

我会使用递归解析器：

```
data Expr = List [Expr] | Term String

expr :: Parsec String () Expr
expr = recurse <|> terminal 
```

你的原语在哪里`terminal`，在这种情况下，这些似乎是字符串，所以

```
 where terminal = Term <$> many1 letter 
```

并且`recurse`是

```
 recurse  = List <$>
                  (between `on` char) '(' ')' (expr `sepBy1` char ' ') 
```

现在我们有一棵漂亮的`Expr`s 树，我们可以用它来收集它

```
collect r@(List ts) = r : concatMap collect ts
collect _           = [] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-24T06:00:18.640

虽然 jozefg 的解决方案与我提出的几乎相同（并且我完全同意他的所有建议），但有一些小的差异让我认为我应该发布第二个答案：

1.  由于初始示例的预期结果，没有必要将空格分隔的部分视为单独的子树。
2.  此外，查看实际计算预期结果的部分（即字符串列表）可能会很有趣。

所以这是我的版本。正如 jozefg 已经建议的那样，将任务分成几个子任务。那些是：

1.  将字符串解析为表示某种树的代数数据类型。
2.  收集这棵树的（期望的）子树。
3.  把树变成弦。

关于1，我们首先需要一个树数据类型

```
import Text.Parsec
import Text.Parsec.String
import Control.Applicative ((<$>))

data Tree = Leaf String | Node [Tree] 
```

然后是一个可以将字符串解析为这种类型的值的函数。

```
parseTree :: Parser Tree
parseTree = node <|> leaf
  where
    node = Node <$> between (char '(') (char ')') (many parseTree)
    leaf = Leaf <$> many1 (noneOf "()") 
```

在我的版本中，我确实将括号之间的孔串视为一个`Leaf`节点（即，我不会在空格处拆分）。

现在我们需要收集我们感兴趣的树的子树：

```
nodes :: Tree -> [Tree]
nodes (Leaf _) = []
nodes t@(Node ts) = t : concatMap nodes ts 
```

最后，s 的`Show`-instance`Tree`允许我们将它们转换为字符串。

```
instance Show Tree where
  showsPrec d (Leaf x) = showString x
  showsPrec d (Node xs) = showString "(" . showList xs . showString ")"
    where
      showList [] = id
      showList (x:xs) = shows x . showList xs 
```

然后可以解决原始任务，例如，通过：

```
parseGroups :: Parser [String]
parseGroups = map show . nodes <$> parseTree

> parseTest parseGroups "((a b c) a b c)"
["((a b c) a b c)","(a b c)"] 
```

# node.js - node.js express.js View 中的错误处理

> ID：16182834
> 
> 赞同：0
> 
> 时间：2013-04-24T03:24:02.487
> 
> 标签：node.js, error-handling, express

我对 node.js 和 express.js 以及编程概念非常陌生。我已经在 node 和 express 上制作了一个基本的 MVC 建模应用程序。

我的问题是你如何处理错误，我得到以下代码：

```
exports.submitBloodRequest=function(kaiseki,resView,request){
    var params = {
        bloodCenterId:request.session.centerID,
        bloodTypeId: request.body.bloodType,
        requestQuantity:request.body.numberOfDonors
    }
    kaiseki.createObject('blood_center_request', params, function(err, res, body, success) {
      if(success){
        resView.redirect('/bloodRequest')
      }else{
        //WHAT TO DO HERE?
      }
    });
} 
```

Kaiseki 只是 parse.com 的一个中间件，如果出现错误我不知道该怎么办。通常我使用 ajaxForm.js 来查找 BadRequest，然后使用 javascript 在我的视图中显示错误消息。

我希望我的错误出现在成功的同一页面中，我应该将 json 错误传递给我的视图吗？

或者仍然使用 ajaxForm.js 而不是 res.render 或 res.redirect 我应该使用 res.status(500)

无论如何要处理错误并将其显示到视图中。不使用任何 javascript 来检测 BadRequest？

视图可以有一个可选变量吗？在我看来，如果我没有传递任何值，它会给我错误，就像我有 #{variable} 它要求它的值。可以让它成为可选的吗？我使用翡翠模板

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T03:52:06.200

要响应带有错误的 XHR 请求，您可以执行类似的操作`return resView.status(500).send(err);`，将`err`对象作为 JSON 发送回。如果你想呈现一个 HTML 错误页面，你可以这样做`return resView.status(500).locals({err: err}).render('/errorPage');`

您没有说您使用的是哪个模板引擎，但很可能该`#{}`版本会自动为您转义 HTML 字符（变成`<`等`&lt;`）以避免 XSS 攻击和呈现问题，而`!{}`将直接呈现变量的内容而不转义，即如果变量包含任何用户生成的内容，则很危险，但如果变量具有您希望由浏览器呈现的 HTML，则这是必要的。

# amazon-ec2 - 如何在 Amazon Linux 上安装 SSSD

> ID：16182836
> 
> 赞同：2
> 
> 时间：2013-04-24T03:24:19.263
> 
> 标签：amazon-ec2, ldap, centos

我想在我的 Amazon Linux 服务器上进行 LDAP 身份验证。

CentOS howtos 说

```
yum install sssd 
```

但这给出了：

```
No package sssd available. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:36:26.717

Amazon Linux 不是 Centos，它不使用相同的存储库。通常，Amazon Linux 大多与 Redhat/Centos 存储库兼容。但是你可能会遇到依赖问题。

# mysql - 在 JPA/Hibernate 中持久化映射到 MySQL 视图的实体

> ID：16182838
> 
> 赞同：2
> 
> 时间：2013-04-24T03:24:26.817
> 
> 标签：mysql, hibernate, jpa, orm

我有一个实体 Customer，它映射到一个视图，该视图定义为我的数据库中客户、帐户和人员之间的一系列连接。

我正在使用带有 Hibernate 设置的 JPA 的 JSF 2.0。后备数据库是 MySQL

我的问题是，鉴于我的客户实体已映射到数据库视图这一事实，这将如何使新客户实体的持久化变得复杂？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:06:11.063

我引用 Adam Bien 的书：

“对于 SQL 查询，视图和表之间没有区别，因此您可以轻松地将 JPA 实体透明地映射到视图。Java 端的代码保持简洁 – 您甚至可以获得更好的性能。有一个缺点：并非所有视图都是可更新的。视图是否可更新很大程度上取决于复杂性和特定数据库。例如，在 Derby DB 中，所有视图都不可更新。

[http://www.dzone.com/links/r/mapping_jpa_entities_to_sql_views_it_works_even_w.html](http://www.dzone.com/links/r/mapping_jpa_entities_to_sql_views_it_works_even_w.html)

# ios - 让我的背景音乐播放器停止？目标 C

> ID：16182842
> 
> 赞同：0
> 
> 时间：2013-04-24T03:24:47.603
> 
> 标签：ios, objective-c, xcode

我有几个视图，其中一个是“选项”视图，在这个视图中会有一个按钮，允许用户单击一个按钮来“停止”背景音乐，或者单击它来重新打开它。我很确定我对如何做到这一点有大致的了解，问题是，我的代码不起作用，我不知道为什么。

这是“选项”类的实现文件中的代码：

```
 - (IBAction)musicIO:(id)sender {
    MenuViewController *myMusicPlayer = [[MenuViewController alloc] init];

    [myMusicPlayer backgroundMusicStart];

    } 
```

它调用我的菜单代码中的方法（不同的类）

这是我的菜单代码：

```
 -(IBAction) backgroundMusicStart{

if( i != 1){
NSURL * URL = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/backgroundMusic.wav", [[NSBundle mainBundle] resourcePath]]];
NSError *error;
backgroundPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:URL error:&error];
backgroundPlayer.numberOfLoops = -1;

    [backgroundPlayer play];
    i = 1;
    NSLog(@"In start music");
}
else if ( i == 1 ) {
[backgroundPlayer stop];
    i = 0;
    NSLog(@"In stop music");
  }

} 
```

“i”是一个全局声明的变量。

代码的问题：它运行，NSLog 输出它进入两个 if 语句都很好，问题是当它在 [backgroundPlayer stop] 括号中时，它不会停止音乐，我不知道为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T03:40:38.910

每次调用此方法时，您都在初始化 backgroundPlayer，并且仅在其中一种情况下。你应该做的是让 backgroundPlayer 成为一个实例变量并作用于它的共享实例......示例如下：

```
// static AVPlayer *backgroundPlayer;
- (IBAction) backgroundMusicStart {
if (backgroundPlayer == nil) { 
    backgroundPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:URL error:&error];
    backgroundPlayer.numberOfLoops = -1;
}

if (i == 1) { [backgroundPlayer stop]; }
else if (i == 0) { backgroundPlayer play]; }
} 
```

# actionscript-3 - AS3：即使添加了子对象也不显示

> ID：16182843
> 
> 赞同：0
> 
> 时间：2013-04-24T03:25:07.287
> 
> 标签：actionscript-3, object, addchild

好的，首先让我说这是我的第一个 AS3 项目。我对 Java 没问题，所以 OOP 和继承对我来说并不陌生。我确实花了几个小时坐在这里思考为什么我的代码没有像我想要的那样工作。我从一个试图发射子弹的炮塔开始。然而，子弹并没有被绘制到屏幕上，即使 x 和 y 坐标仍在变化。创建子弹/弹丸的方法称为 OnMouseClick。这是我的代码：

```
public class Main extends Sprite
{
    public var projectileArr : Array = new Array(); //array which the projectile objects are stored
    public var projCount : Number = 0; //projectile counter

    public var curX:Number; //mouse coords
    public var curY:Number;

    private var tri1:Sprite = new Sprite();
    private var tri1Height:Number = 50;

    private var rect1:Sprite = new Sprite();

    private var rect1W:Number = 2;
    private var rect1H:Number = 10;

    private var angle:Number = 0;
    private var acceleration:Number = 0;

    public var triSpeedX:Number = 0;
    public var triSpeedY:Number = 0;

    public var turretAngle:Number ;

    //keyboard booleans
    private var leftDown:Boolean = false, rightDown:Boolean = false, upDown:Boolean = false, downDown:Boolean = false;

    public function Main():void
    {
        if (stage)
            init();
        else
            addEventListener(Event.ADDED_TO_STAGE, init);
    }

    private function init(e:Event = null):void
    {
        removeEventListener(Event.ADDED_TO_STAGE, init);
        // entry point  

        //draw triangle
        addChild(tri1);

        tri1.graphics.lineStyle(1, 0xff00ff00);
        tri1.graphics.beginFill(0xff0000);
        tri1.graphics.moveTo(0, -tri1Height / 2)
        tri1.graphics.lineTo(tri1Height / 3, +tri1Height / 2);
        tri1.graphics.lineTo(-tri1Height / 3, +tri1Height / 2);
        tri1.graphics.endFill();

        tri1.x = 400;
        tri1.y = 300;

        //draw turret
        addChild(rect1);

        rect1.graphics.beginFill(0xFFFFFF);
        rect1.graphics.moveTo(rect1W / 2, -rect1H);
        rect1.graphics.lineTo(rect1W / 2, 0);
        rect1.graphics.lineTo(-rect1W / 2, 0);
        rect1.graphics.lineTo(-rect1W / 2, -rect1H);
        rect1.graphics.endFill();

        rect1.x = tri1.x;
        rect1.y = tri1.y;

        stage.addEventListener(KeyboardEvent.KEY_UP, onUp);
        stage.addEventListener(KeyboardEvent.KEY_DOWN, onDown);

        stage.addEventListener(Event.ENTER_FRAME, Run);
        stage.addEventListener(MouseEvent.MOUSE_MOVE, getMouseCoord);
        stage.addEventListener(MouseEvent.MOUSE_DOWN, OnMouseClick);
    }

            //creation of projectile on click
    public function OnMouseClick (e:MouseEvent):void 
    {
        projectileArr[projCount] = new Projectile (rect1.x, rect1.y, turretAngle); //create a new projectile object
        addChild(projectileArr [projCount]); //... then it doesn't display
        projCount++;
        trace ("BAM");

    }
    public function getMouseCoord(e:MouseEvent):void
    {

        curX = mouseX;
        curY = mouseY;

    }

    public function onUp(e:KeyboardEvent):void
    {

        if (e.keyCode == Keyboard.LEFT)
            leftDown = false;
        else if (e.keyCode == Keyboard.RIGHT)
            rightDown = false;

        if (e.keyCode == Keyboard.UP)
            upDown = false;
        else if (e.keyCode == Keyboard.DOWN)
            downDown = false;

    }

    public function onDown(e:KeyboardEvent):void
    {
        if (e.keyCode == Keyboard.LEFT)
            leftDown = true;
        else if (e.keyCode == Keyboard.RIGHT)
            rightDown = true;

        if (e.keyCode == Keyboard.UP)
            upDown = true;
        else if (e.keyCode == Keyboard.DOWN)
            downDown = true;
    }

    public function addProjToScreen (projectile:Projectile) : void
    {
        addChild(projectile);
    }
    private function Run(e:Event):void
    {
        acceleration = 0; //resets acceleration back to 0 to limit speed
        if (leftDown)
        {   
            angle -= 5;
        }
        else if (rightDown)
        {
            angle += 5;
        }

        if (upDown)
        {
            acceleration += 3;
        }
        else if (downDown)
        {
            acceleration -= 3;
        }

        triSpeedX += acceleration * Math.cos(angle * Math.PI / 180);
        triSpeedY += acceleration * Math.sin(angle * Math.PI / 180);

        tri1.x += triSpeedX;
        tri1.y += triSpeedY;

        //borders
        if (tri1.x < 0)
        {

            triSpeedX *= -.5;
            tri1.x = 0 ;
        }

        if (tri1.x > 800 )
        {
            tri1.x = 800;
            triSpeedX *= -.5;
        }

        if (tri1.y < 0)
        {

            triSpeedY *= -.5;
            tri1.y = 0 ;
        }
        if (tri1.y > 600)
        {
            triSpeedY *= -.5;
            tri1.y = 600;
        }

        //friction
        triSpeedX *= 0.95
        triSpeedY *= 0.95

        rect1.x = tri1.x;
        rect1.y = tri1.y;

        var xCurDist:Number = curX - rect1.x;
        var yCurDist:Number = curY - rect1.y;

        turretAngle = Math.atan(yCurDist / xCurDist) * 180 / Math.PI ;

        if (xCurDist < 0  )
        {
            turretAngle += 180;
        }
        if (xCurDist > 0 && yCurDist < 0 )
        {
            turretAngle += 360;
        }

        rect1.rotation= turretAngle + 90; // + 90 to account for the sprite originally pointing up, which is 270 degrees ccw

        tri1.rotation = angle + 90;

        for (var i:int = 0 ; i < projCount ; i ++)
        {
            projectileArr [i].move();
        }

    }

} 
```

和 Projectile 类：

```
public class Projectile extends MovieClip
{

    private var projectile : Sprite = new Sprite();

    private var speed: int = 10;
    private var angle :Number;

    private var xIncr: Number;
    private var yIncr: Number;

    public function Projectile(x:Number, y:Number, angle:Number) 
    {
        this.x = x;
        this.y = y;

        this.angle = angle;

        projectile.graphics.beginFill (0xFF0000);
        projectile.graphics.drawCircle (x, y, 4);
        projectile.graphics.endFill() ;
        xIncr = speed * Math.cos (angle); // angle needs to be converted to radians
        yIncr = speed * Math.sin (angle);
    }

    public function move () :void
    {
        trace (this.x + "  " + this.y);

        this.x += xIncr;
        this.y += yIncr;        

    }
  } 
```

我只是不知道我错过了什么......我正在为我所有新创建的对象调用 addChild，还有什么可做的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T03:35:24.827

您没有在构造函数中将精灵弹丸添加到 Projectile 的显示列表中。

```
addChild(projectile); 
```

此外，您在射弹类中将 x 和 y 坐标加倍。`projectile.graphics.drawCircle (x, y, 4);`通过更改为来纠正此问题`projectile.graphics.drawCircle (0, 0, 4);`

# java - 默认皮肤 LibGDX？

> ID：16182844
> 
> 赞同：46
> 
> 时间：2013-04-24T03:25:08.327
> 
> 标签：java, layout, libgdx

我一直在关注这个：[https](https://code.google.com/p/table-layout/#Quickstart) ://code.google.com/p/table-layout/#Quickstart来了解一下 LibGDX 中的表。我已经用按钮做了一些实验。

现在我有这个代码：

```
Label introLabel = new Label("Skip Intro", skin);
TextField introText = new TextField("", skin);

table.add(introLabel);
table.add(introText).width(100);
table.row(); 
```

但它抛出一个`NullPointerException`因为：`No com.badlogic.gdx.scenes.scene2d.ui.Label$LabelStyle registered with name: default`

我只将我的按钮（从屏幕的其他地方）添加到皮肤中：

```
atlas = new TextureAtlas("assets/gui/buttons/alpha_generic_buttons.pack");

skin = new Skin();
skin.addRegions(atlas); 
```

我现在的问题是桌子需要什么样的纹理，最重要的是，我如何将它们与桌子一起使用？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-04-24T07:42:48.580

当谈到 libGDX 中的 UI 时，您会发现它与您之前使用的（yaml、json、xml、UI Builders 等）非常不同。

**表格布局**- 这是 Scene2d UI 的结构和格式。您提供的链接是一个很棒的教程，但正如您已经意识到的那样，您需要一个皮肤来做大多数事情。

**LibGDX Skin** - 由 3 个东西组成，一个纹理包图像、一个纹理包文件和一个用于设置样式的 Json。您也可以像您正在做的那样以编程方式生成它们，但我发现简单地从文件中加载并使用它们要容易得多。如果您想了解有关如何制作皮肤或编辑它们等的更多信息，请点击此链接：[皮肤](https://github.com/libgdx/libgdx/wiki/Skin)。

现在，回到你得到的异常。这是因为您创建的皮肤没有用于描述各种 UI 元素样式的 json。在上述异常的情况下，文本字段内的标签没有默认样式。

您可以简单地使用测试文件夹中提供的模板：

1.  [Atlaspack 文件](https://github.com/libgdx/libgdx/blob/master/tests/gdx-tests-android/assets/data/uiskin.atlas)
2.  [json文件](https://github.com/libgdx/libgdx/blob/master/tests/gdx-tests-android/assets/data/uiskin.json)
3.  [Atlaspack 图片](https://github.com/libgdx/libgdx/blob/master/tests/gdx-tests-android/assets/data/uiskin.png)
4.  [字体图像](https://github.com/libgdx/libgdx/blob/master/tests/gdx-tests-android/assets/data/default.png)
5.  [字体文件](https://github.com/libgdx/libgdx/blob/master/tests/gdx-tests-android/assets/data/default.fnt)

将这些文件放在你的 android 项目的 assets 文件夹中。然后你可以用一行代码轻松加载这个皮肤：

```
Skin uiSkin = new Skin(Gdx.files.internal("uiskin.json")); 
```

这将缺少制作 TextField 对象的信息，以及一堆其他默认样式：

```
com.badlogic.gdx.scenes.scene2d.ui.Label$LabelStyle: {
    default: { font: default-font, fontColor: white },
} 
```

希望这可以帮助您入门。还有许多其他的小东西，所以不要害怕查看 wiki 上的[Scene2d.UI](https://github.com/libgdx/libgdx/wiki/Scene2d.ui)文章以获取更多信息。

**注意：**您可以使用`gdx-tools`artifact 来使用开箱即用[的默认 UI 皮肤](https://github.com/libgdx/libgdx/tree/master/extensions/gdx-tools/assets)（对于非常小的/简单的应用程序、调试、当您急于使 UI 可见时非常有用， ETC）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-09T21:46:42.067

或者，如果您想创建自己的，Raleus 制作了一个皮肤编辑器，非常友好的用户界面，使用简单，结果 [很棒](https://github.com/raeleus/skin-composer)更多关于皮肤以及你如何使用它们的信息

# maven - 通过 maven liquibase 插件填充时，Hsqldb 没有数据

> ID：16182846
> 
> 赞同：0
> 
> 时间：2013-04-24T03:25:32.720
> 
> 标签：maven, hsqldb, liquibase

我创建了模式并通过 Maven liquibase 插件填充它：

```
<plugin>
    <groupId>org.liquibase</groupId>
    <artifactId>liquibase-maven-plugin</artifactId>
    <version>2.0.5</version>
    <configuration>
        <propertyFile>src/main/resources/db/config/db.config.properties</propertyFile>
        <changeLogFile>src/main/resources/db/changelog/db.changelog-master.xml</changeLogFile>
    </configuration>
</plugin> 
```

属性文件：

```
driver: org.hsqldb.jdbcDriver
#HSQLDB Embedded in file
url: jdbc:hsqldb:file:src/main/resources/db/hsqldb/dataFile
username: SA
password: 
```

正如我在调用时在输出中看到的那样`mvn liquibase:update`：

```
[INFO] Executing on Database: jdbc:hsqldb:file:src/main/resources/db/hsqldb/dataFile
INFO 24.04.13 10:00:liquibase: Successfully acquired change log lock
INFO 24.04.13 10:00:liquibase: Creating database history table with name: DATABASECHANGELOG
INFO 24.04.13 10:00:liquibase: Reading from DATABASECHANGELOG
INFO 24.04.13 10:00:liquibase: Reading from DATABASECHANGELOG
INFO 24.04.13 10:00:liquibase: ChangeSet src/main/resources/db/changelog/db.changelog-1.0.xml::1::sav ran successfully in 7ms
INFO 24.04.13 10:00:liquibase: ChangeSet src/main/resources/db/changelog/db.changelog-1.0.xml::2::sav ran successfully in 3ms
INFO 24.04.13 10:00:liquibase: Successfully released change log lock
INFO 24.04.13 10:00:liquibase: Successfully released change log lock 
```

`db.changelog-master.xml`包含：

```
 <include file="src/main/resources/db/changelog/db.changelog-1.0.xml"/> 
```

`db.changelog-1.0.xml`包含：

```
 <changeSet id="1" author="sav">
        <createTable tableName="testTable">
            <column name="id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="active" type="boolean" defaultValueBoolean="true"/>
        </createTable>
    </changeSet>

    <changeSet id="2" author="sav">
        <insert tableName="testTable">
            <column name="id" value="1"/>
            <column name="name" value="First String"/>
        </insert>
        <insert tableName="testTable">
            <column name="id" value="2"/>
            <column name="name" value="Second String"/>
            <column name="active" value="false"/>
        </insert>
    </changeSet> 
```

似乎一切正常。现在我要去`src/main/resources/db/hsqldb/`文件夹并查看三个文件：

```
dataFile.log
dataFile.properties
dataFile.script 
```

但我`CREATE TABLE testTable`在`dataFile.script`. 接下来在 Intelli IDEA 中配置数据源插件（设置 jdbc hsql 驱动程序、url: `jdbc:hsqldb:file:/src/main/resources/db/hsqldb/dataFile`、 user: sa ）。连接它，调用查询：

```
SELECT * FROM   INFORMATION_SCHEMA.SYSTEM_TABLES; 
```

1.  我看不到我尝试创建的表。
2.  每个表的 hsqldb_type 字段的值 - 是 MEMORY。我希望它是类似的文件。

有任何想法吗？：）

PS：1、Maven仓库返回**HSQLDB**作为第一个搜索结果，其最新版本为1.8.0.10。实际上我不得不使用**HSQLDB DATABASE**及其 2.2.9 版本。它解决了创建表的问题。2\. 我必须使用文件的绝对路径和 ';ifexists=true' 属性来连接到 IDEA 数据源插件中的现有数据库。因此，我在属性文件中的 url 连接字符串与插件中使用的不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:24:13.507

您需要小心使用文件路径：

这是一个相对路径：

```
driver: org.hsqldb.jdbcDriver
#HSQLDB Embedded in file
url: jdbc:hsqldb:file:src/main/resources/db/hsqldb/dataFile 
```

这是当前驱动器中的绝对路径：

```
Next in Intelli IDEA I configure datasource plugin (set jdbc hsql driver, url: jdbc:hsqldb:file:/src/main/resources/db/hsqldb/dataFile, user: sa ) 
```

尝试使用绝对路径。

除此之外，在您尝试检查现有数据库中的内容时，通过添加`;ifexists=true`连接 URL 来明确要求数据库存在。

由于我们不确定 Liquibase 是否正确关闭了数据库，您可以在 Liquibase 连接 URL 中添加一个属性以确保数据被完全写入`;hsqldb.write_delay=false`。我们假设您为此属性使用 HSQLDB 2.x。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T11:17:27.877

使用 HSQLDB 1.8.x，liquibase <= 3.2.0 从不读取数据库上的表。这是因为`catalog`应该`null`在检索 JDBC 元数据时设置。我们不能强制目录为空，因为方法`AbstractJdbcDatabase.correctSchema()`不应该设置`catalog=schema`，如果`supportCatalogs()`返回 false。

我将为此发布一个问题。

# android - android中的慢速socket io通信

> ID：16182847
> 
> 赞同：2
> 
> 时间：2013-04-24T03:25:36.853
> 
> 标签：android, xmlhttprequest, socket.io

我在 Android 中使用[Socket Io Java 客户端](https://github.com/Gottox/socket.io-java-client)通过 xhr-polling 与我用 python 编写的服务器端应用程序进行通信。
问题是，它在基于 android 2.3 的手机中运行完美，但对于三星更高版本（4.x），响应我的请求需要 10 多秒。

相同的应用程序内置在 ios 中并访问相同的服务器，大约需要 3 秒才能从服务器获得响应。

任何人都可以帮我解决这个问题，我是否遗漏了什么，或者它对 4.x Android 套接字通信的一些限制？

# c++ - 函数返回指针

> ID：16182848
> 
> 赞同：1
> 
> 时间：2013-04-24T03:25:51.267
> 
> 标签：c++, pointers

下面的案例让我更加困惑。据我所知，局部变量不会通过指针或引用返回。例如

```
char * foo()
{
  return "Hello world";
}

int*  fooo() {
    static int i = 100;
    return &i;
} 
```

在这两种情况下会发生什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T03:30:27.740

字符串文字是静态存储的，当然`static int i`也是静态的。您可以从函数返回指向静态变量的指针，因为它们不是局部变量，并且当您退出函数时，它们不会像堆栈分配的变量一样被销毁。另一方面，您的第一个示例应返回 a `const char *`，

来自 C++ 标准部分 lex.string：

> 字符串文字...具有“n const char 数组”类型和静态存储持续时间（basic.stc），其中 n 是字符串的大小，如下定义，并使用给定字符初始化...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T03:52:25.050

您的第一个功能无效，您应该返回

```
const char* 
```

是的，您可以返回`static`变量的地址：它们在函数返回时不会被破坏，因为它们位于静态数据内存段中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T03:34:18.697

第一个代码不会编译。您可以将字符串转换为 char 数组并返回。第二个代码将编译，但您的变量将超出范围。因此，当函数返回时您将拥有的引用将不再有效。按地址返回局部变量是不好的。想要这种行为有什么具体原因吗？

您可以 new/malloc 一个 char 数组或 int，然后将其返回。只要您不手动释放/删除内存，就可以保证变量在范围内。然后你就可以愉快地从其他函数访问内存了。

希望这可以帮助。

# java - JavaScript to Java Applet 使用 DeployJava.js 运行命令行

> ID：16182849
> 
> 赞同：1
> 
> 时间：2013-04-24T03:26:10.447
> 
> 标签：java, javascript, applet, runtime.exec, deployjava

我对Java很陌生。我想创建一个 Java Applet，它允许我的 JavaScript 将命令行传递给 Java Applet。这只会在我的开发机器上运行 - 无需提醒我这是一个安全问题。用例是我的 ExtJS 应用程序有一个内省器，它允许我显示类。我希望能够单击一个类，将相关路径名传递给 Applet 并在 Eclipse 中打开该文件进行编辑。

我正在使用 Win7x64，jre 1.7

因此，要让 Eclipse 从命令行打开文件，命令是：

`D:\Eclipse\eclipse.exe --launcher.openFile C:\mytestfile.js`

这行得通。

我已经编写了 Applet，对其进行了自签名并使用下面显示的代码测试了 say() 方法。这样可行。但是，当我运行 executecmd() 方法时，我没有得到任何输出。如果我注释掉整个 try/catch 块，以便我只是返回传入的 cmd 字符串，则该方法有效。因此，我怀疑我的 try catch 设置不正确，并且由于我的 Java 技能和异常知识是原始的，我迷失了方向。

任何人都可以帮助我吗？至少要返回一些输出，如果不是如何实际运行传入的命令行？

而且，我正在传递整个命令行，因为当我有这个工作时，我想分享它（因为 Ext introspector 非常有用）。其他开发人员将使用不同的编辑器，因此他们可以通过传递特定的命令行来使用它。

谢谢！默里

我的 HTML 测试页面：

```
<html>
<head>
    <meta charset="UTF-8">
    <title>Test Run</title>
    <script src="http://www.java.com/js/deployJava.js"></script>
    <script>
        var attributes = { id:'testapp', code:'systemcmd.Runcmd', archive:'runcmd.jar', width:300, height:50} ;
        var parameters = {} ;
        deployJava.runApplet(attributes, parameters, '1.6');
    </script>
</head> 
<body>

<p>Hello</p>

<script type="text/javascript">

    //alert(testapp.say("Hello test")); // This works

    var command = "D:\Eclipse\eclipse.exe  --launcher.openFile C:\mytestfile.js"; 

    alert(testapp.executecmd(command)); // Nothing returned at all.

</script>

</body> 
</html> 
```

我的课：

```
package systemcmd;

import java.applet.Applet;
import java.io.IOException;
import java.security.AccessController;
//import java.security.PrivilegedAction;
import java.security.PrivilegedActionException;
import java.security.PrivilegedExceptionAction;

public class Runcmd extends Applet {

    private static final long serialVersionUID = -4370650602318597069L;

    /**
     * @param args
     */
    public static void main(String[] args) {

    }

    public String say(String arg)
    {
        String msg[] = {null};
        msg[0] = "In Say. You said: " + arg;
        String output ="";
        for(String str: msg)
            output=output+str;
        return output;
    }

    public String executecmd(final String cmd) throws IOException
    {       
        final String msg[] = {null};
        String output ="";
        msg[0] = "In executecmd, cmd="+cmd;

        try {
            try {
            AccessController.doPrivileged(
                  new PrivilegedExceptionAction() {
                    public Object run()  throws  IOException { //RuntimeException,
                        msg[1] = " Pre exec()";
                        Runtime.getRuntime().exec(cmd);
                        msg[2] = " Post exec()";
                        return null; 
                    }
                  }
                );  
            } catch (PrivilegedActionException e) {
                msg[3] = " Caught PrivilegedActionException:"+ e.toString();
                throw (IOException) e.getException();
            }
        }
        catch (Exception e) {
            msg[4] = " Command:" + cmd + ". Exception:" + e.toString();
        }
        msg[5] = " End of executecmd.";

        for(String str: msg)
            output=output+str;
        return output;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:29:34.623

将 Eclipse 设置为`.java`文件的默认使用者并使用[`Desktop.open(File)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html#open%28java.io.File%29)which..

> 启动关联的应用程序以打开文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:40:43.390

好的，@安德鲁。有进步，谢谢！

我将 *.js 文件的默认程序设置为 Eclipse，如果我双击一个文件，它将在 Eclipse 中打开。都好。

然后，我使用 RunAs Java Application 成功运行了以下命令——在 Eclipse 中打开的测试文件。越来越近！

```
public class Runcmd extends Applet {

    File file;   
    private static Desktop desktop;
    private static final long serialVersionUID = -4370650602318597069L;

    /**
     * @param args
     * @throws IOException 
     */
    public static void main(String[] args) throws IOException {

        System.out.println("hello");

        if (Desktop.isDesktopSupported()) {
            desktop = Desktop.getDesktop();
        }

        File file = new File("C:\\sites\\test.js");

        // This works if I execute it from the Eclipse RunsAs Java Application. 
        // ie the file is opened in Eclipse for editing. 
        // And, if I specify a non-existant file, it correctly throws and prints the error
        try {

            desktop.open(file);

        } catch (Exception ioe) {
            ioe.printStackTrace();
            System.out.println("Error: " + ioe.toString());
        }

    }} 
```

但是，当我添加以下方法并通过 DeployJava.js 运行它时（根据我上面的原始帖子），我得到以下输出返回，错误出现*是否 jar 是 self signed*。

> 开始：，支持桌面，错误：java.security.AccessControlException：访问被拒绝（“java.awt.AWTPermission”“showWindowWithoutWarningBanner”）

```
public static String openfile(String arg) {
    String output = "Started: ";

    File file = new File("C:\\sites\\test.js");

    if (Desktop.isDesktopSupported()) {
        desktop = Desktop.getDesktop();
        output = output + ", Desktop is supported ";
    }

    try {

        desktop.open(file);

    } catch (Exception ioe) {
        output = output + ", Error: " + ioe.toString();
    }

    return output + arg;
} 
```

那么，我需要添加什么来解决明显的安全问题？我已经阅读了文档和教程，并且正在转圈！似乎有很多相互矛盾的建议。:-(

再次感谢，默里

# objective-c - 如何获取 CoreData 子实体并找到它们的类名？

> ID：16182854
> 
> 赞同：0
> 
> 时间：2013-04-24T03:26:50.810
> 
> 标签：objective-c, core-data

我正在尝试构建一个通用的`SyncEngine`. 在其中，我按如下方式获取给定的父实体：

```
__block NSArray *newRecords = nil;
[[[CoreDataController sharedInstance] managedObjectContext] performBlockAndWait:^{
    NSError *error = nil;
    NSFetchRequest *request = [[NSFetchRequest alloc] initWithEntityName:className];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"serverID = nil"];
    [request setPredicate:predicate];
    newRecords = [[[CoreDataController sharedInstance] managedObjectContext] executeFetchRequest:request error:&error];
}]; 
```

我正在寻找一种方法来执行以下操作：

1.  测试检索到的实体是否有一组“孩子”。
2.  如果是这样 - 我想找到它的孩子的班级名称。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:25:42.873

您的子实体属于同一基类。
在该类型的基类上添加一个属性`NSString`（让我们称之为`className`）。

在你的`<BaseEntity>.h`（生成文件去编辑器->创建 NSManagedObject 子类）：像这样
实现：`- (void) awakeFromInsert`

```
- (void) awakeFromInsert
{
    self.className = self.entity.name;
} 
```

您的 fetch 请求现在应该是：

```
NSExpressionDescription* idDesc = [NSExpressionDescription new];
[idDesc setName:@"objectID"];
[idDesc setExpression:[NSExpression expressionForEvaluatedObject]];
[idDesc setExpressionResultType:NSObjectIDAttributeType];

NSFetchRequest* request = [NSFetchRequest alloc] initWithEntityName:@"<BaseEntity>"];
request.predicate = [NSPredicate predicateWithFormat:@"parent = %@",parent.objectID];
[request setResultsType:NSDictionaryResultType];
[request setPropertiesToFetch:@[@"className",idDesc]]; 
```

此请求将返回包含您请求的数据的字典数组。

# java - 由于 Java paintComponent() 引用单独的类而导致空指针异常错误的任何解决方案？

> ID：16182857
> 
> 赞同：1
> 
> 时间：2013-04-24T03:27:23.447
> 
> 标签：java, swing, error-handling, null, paintcomponent

我编码的时间不长，但这是迄今为止我见过的最奇特的错误。现在我知道它说 Null Pointer Exception 错误，这是，但它是一个特定的错误，我已经一个多星期没在网上找到了，持续两个。我遇到了一个非常独特的问题，我急需帮助。（我想出了一个解决方法，所以我会按时完成我的项目，但这个错误仍然困扰着我）。（代码将在问题的最底部）。

项目：创建一个交通灯模拟：

*   启动时处于“关闭”状态，必须使用键盘上的“o”键打开。它也必须能够关闭。
*   当按下“f”键时，会导致黄灯闪烁。
*   必须有一个真正的红绿灯进程（绿>黄>红>绿>等）

问题：当我的面板方法中的paintComponent(Graphics pen)发生时，会产生多个错误。（此处的屏幕截图：[错误](http://sadpanda.us/images/1554442-7DC663Y.png "错误截图")）

我推断它发生在面板内创建对象之后的某个时间（当您阅读代码时更有意义）。这很奇怪，因为解决方法只是从类方法中复制并粘贴到原始面板中。

即，如果我的代码是用 pen.drawOval(insert parameters) 绘制一个椭圆，它将在其中包含paintComponent(Graphics pen) 方法的面板类中工作。但是，如果它在一个 Circle 类中，它就行不通了。

仅当paintComponent 访问另一个类的对象、另一个类的变量或另一个类的方法时，才会生成此错误。

如果使用 Circle 对象，则 object.drawOval(parameters) 将不起作用，但如果面板中使用了另一个公共 void 方法，称为 objectDraw(Graphics pen) 并从 paintComponent 作为 objectDraw(pen) 运行，它将起作用.

我希望我能尽力解释它。

现在是生成区域的代码。

我有一种令人作呕的感觉，它是如此简单以至于我忽略了。这真的是我最后的手段，因为我无法发现为什么会产生错误。

（JComponent 会损坏吗？它可能只是用户特定的吗？）

编码：

将 Lights 视为一个组类，其中包含多个对象作为私有类。（这可能是问题吗，私人课程？）

```
 /******************
              * Lights.java
              * 
              * Creates graphic objects.
              * 
              ******************/
            import java.awt.*; //Import the awt package.

            public class Lights{ //Driver class header.

              private final int RED = 1; //Creates switch constant.
              private final int YELLOW = 2; //Creates switch constant.
              private final int GREEN = 3; //Creates switch constant.
              private final int ALL_ON = 5; //Creates switch constant.
              private final int ALL_OFF = 6; //Creates switch constant.
              private final int BACKGROUND = 0; //Background switch constant.
              private final int FOREGROUND = 8; //Foreground switch constant.
              private final int FLASHING_YELLOW = 4; //Creates Flashing Yellow
              private final int DARK_YELLOW = 9; //Case in case.
              private int flashingColor = YELLOW; //Case in case.
              private boolean flashingYellow = false; //Creates false by default flashingYellow boolean.
              private Color lightColor; //Color variable lightcolor.
              private int colorSwitch; //Switch integer using constants and lightcolor.
              private int typeSwitch; //Also similar to above.
              private int x, y, lightswitch; //Other integers.
              private Rectangle grayBG, blackBG;
              private Circle red, green, yellow, redFore, greenFore, yellowFore;

              public Lights(){
                Rectangle grayBG = new Rectangle(35, 35, 280, 830, true);
                Rectangle blackBG = new Rectangle(50, 50, 250, 800, true);
                Circle red = new Circle(80, 75, 200, 200, true);
                Circle green = new Circle(80, 575, 200, 200, true);
                Circle yellow = new Circle(80, 325, 200, 200, true);
                Circle redFore = new Circle(80, 75, 200, 200, false);
                Circle greenFore = new Circle(80, 575, 200, 200, false);
                Circle yellowFore = new Circle(80, 325, 200, 200, false);
              }

              //Drawn when flash is on.
              public void flashOn(Graphics g){
                drawYellowLight(g, true);        
                drawGreenLight(g, false);
                drawRedLight(g, false);
                drawFore(g);
              }

              //Drawn when light is off.
              public void flashOff(Graphics g){
                drawYellowLight(g, false); 
                drawGreenLight(g, false);
                drawRedLight(g, false);
                drawFore(g);  
              }

              //Draws the foreground.
              public void drawFore(Graphics pen){
                drawRed(pen);
                drawYellow(pen);
                drawGreen(pen);
              }

              //Draws the foreground's red, yellow, and green.
              public void drawRed(Graphics pen){    
                pen.setColor(Color.RED);
                redFore.draw(pen);    
              }  
              public void drawYellow(Graphics pen){    
                pen.setColor(Color.YELLOW);
                yellowFore.draw(pen);    
              }  
              public void drawGreen(Graphics pen){    
                pen.setColor(Color.GREEN);
                greenFore.draw(pen);    
              }

              //Draws the background.
              public void drawBox(Graphics pen){
                //HTML Color Code for 'LightYellow4' (looks gray though); Color GRAY = new Color(139, 139, 122);
                pen.setColor(new Color(139, 139, 122));
                grayBG.draw(pen);
                pen.setColor(Color.BLACK);
                blackBG.draw(pen);
              }

              //Draws the green light whether on or off.
              public void drawGreenLight(Graphics pen, boolean isOn){
                //Color darkGreen = new Color(105, 139, 105);
                //Color lightGreen = new Color(0, 238, 0);
                if(!isOn){
                  pen.setColor(new Color(105, 139, 105));
                  green.draw(pen);        
                } else {
                  pen.setColor(new Color(0, 238, 0));
                  green.draw(pen);
                }
              }

              //Draws the yellow light whether on or off.
              public void drawYellowLight(Graphics pen, boolean isOn){     
                //Color darkYellow = new Color(139, 69, 0);
                //Color lightYellow = new Color(255, 215, 0);
                if(!isOn){
                  pen.setColor(new Color(139, 69, 0));
                  yellow.draw(pen);      
                } else {
                  pen.setColor(new Color(255, 215, 0));
                  yellow.draw(pen); 
                } 
              }

              //Draws the red light whether on or off.  
              public void drawRedLight(Graphics pen, boolean isOn){     
                //Color darkRed = new Color(139, 26, 26);
                //Color lightRed = new Color(255, 48, 48);
                if(!isOn){
                  pen.setColor(new Color(139, 26, 26));
                  red.draw(pen);      
                } else {
                  pen.setColor(new Color(255, 48, 48));
                  red.draw(pen); 
                } 
              }

              /******************
                * Lights$Rectangle.java
                * 
                * Creates a graphic object named Rectangle.
                * 
                ******************/
              private class Rectangle{ //Driver class header.

                //Define global private integers.
                private int x, y, h, w;
                private boolean fill;

                //Methods

                //Object constructor, Definition.
                //Defines the info for a rectangle.
                public Rectangle(int a, int b, int height, int width, boolean isFilled){
                  x = a;
                  y = b;
                  h = height;
                  w = width;
                  fill = isFilled;
                }

                public void draw(Graphics pen){
                  if(fill == true){
                    int xPosition = x - w;
                    int yPosition = y - h;
                    pen.fillRect(xPosition, yPosition, w, h);
                  } else {      
                    int xPosition = x - w;
                    int yPosition = y - h;
                    pen.drawRect(xPosition, yPosition, w, h);  
                  }
                }

              }

              /******************
                * Lights$Circle.java
                * 
                * Creates a graphic object named Rectangle.
                * 
                ******************/
              private class Circle{
                //Define global private integers.
                private int x, y, radius;
                private boolean fill;

                //Object constructor, Definition.
                //Defines the info for a circle.
                public Circle(int a, int b, int size, int size_alt, boolean isFilled){
                  x = a;
                  y = b;
                  radius = ((int)size/2);
                  fill = isFilled;

                }

                public void draw(Graphics pen){
                  if(fill == true){
                    int diameter = (radius*2);
                    int xPosition = x - radius;
                    int yPosition = y - radius;
                    pen.fillOval(xPosition, yPosition, diameter, diameter);
                  } else {      
                    int diameter = (radius*2);
                    int xPosition = x - radius;
                    int yPosition = y - radius;
                    pen.drawOval(xPosition, yPosition, diameter, diameter);  
                  }
                }

              }
            } 
```

现在为框架类。编码：

Traffic.java 是这个项目的文字 JFrame 部分：

```
 /****************************
              * Traffic.java
              * 
              * 
              ******************************/
            import javax.swing.*; //Import swing package.
            import java.awt.*; //Import awt package.
            import java.awt.event.*; //Import events package.

            public class Traffic extends JFrame{

              public static void main(String[] args){

                //Create new JFrame.
                JFrame lightbox = new JFrame("Light Box");

                //Create new LightboxPanel.
                TrafficPanel traffic = new TrafficPanel();    

                //Set focus to the LightboxPanel in order to allow key inputs.
                traffic.setFocusable(true);   

                //Set the Default Close Operation to exit when the "x" button is selected.
                lightbox.setDefaultCloseOperation(EXIT_ON_CLOSE);

                //Add the LightboxPanel to the Lightbox JFrame.
                lightbox.add(traffic);

                //Pack the frame to the warranted preferred size of the LightboxPanel.
                lightbox.pack();

                //Set the frame's visibility to true.
                lightbox.setVisible(true);
              }
            } 
```

最后是面板类本身，TrafficPanel.java 更多的是调用方法从灯光绘制图形的面板。

编码：

```
 //*****************************************************************************
            //  TrafficPanel.java   
            //
            //  Panel that holds graphics for the traffic light simulation.
            //*****************************************************************************

            import java.util.Scanner;  // import Scanner class from util package
            import javax.swing.JPanel;  // import JPanel class from swing package 
            import javax.swing.JButton;
            import java.awt.*;         // import awt package 
            import java.awt.event.*;  // import event package from awt package
            import java.util.Random; // import Random class from the util package

            public class TrafficPanel extends JPanel
            {  
              private Lights shapes;  
              private final int RED = 1; //Creates switch constant.
              private final int YELLOW = 2; //Creates switch constant.
              private final int GREEN = 3; //Creates switch constant.
              private final int ALL_ON = 5; //Creates switch constant.
              private final int ALL_OFF = 6; //Creates switch constant.
              private final int FLASHING_YELLOW = 4; //Creates Flashing Yellow
              private final int DARK_YELLOW = 9; //Case in case.
              private int flashingColor = YELLOW; //Case in case.
              private boolean flashingYellow = false; //Creates false by default flashingYellow boolean.
              private Color lightColor; //Color variable lightcolor.
              private int colorSwitch; //Switch integer using constants and lightcolor.
              private int typeSwitch; //Also similar to above.
              private int x, y, lightswitch; //Other integers.

              public TrafficPanel()
              {    
                Lights shapes = new Lights();
                //KeyListener trafficListener = new KeyListener();
                addKeyListener(new KeyListener());    
                //Set the size.
                //Dimension preferred = new Dimension(800, 920);
                setPreferredSize(new Dimension(800, 920));    
                //Set the background.
                //Color bisque = new Color(255, 228, 196);
                setBackground(new Color(255, 228, 196));
              }

              public void paintComponent (Graphics g)
              {
                super.paintComponent (g);

                //Normal state of panel. Initially offline.
                Lights shapes = new Lights();
                shapes.drawBox(g);    
                shapes.drawRedLight(g, false);
                shapes.drawYellowLight(g, false);
                shapes.drawGreenLight(g, false);
                shapes.drawFore(g);

                //Check state of light.
                switch(lightswitch){

                  case ALL_OFF:
                shapes.drawBox(g);    
                shapes.drawRedLight(g, false);
                shapes.drawYellowLight(g, false);
                shapes.drawGreenLight(g, false);
                shapes.drawFore(g);
                    break;

                  case ALL_ON:
                shapes.drawBox(g);    
                shapes.drawRedLight(g, true);
                shapes.drawYellowLight(g, true);
                shapes.drawGreenLight(g, true);
                shapes.drawFore(g);
                    break;

                  case RED:
                shapes.drawBox(g);    
                shapes.drawRedLight(g, true);
                shapes.drawYellowLight(g, false);
                shapes.drawGreenLight(g, false);
                shapes.drawFore(g);
                    break;

                  case GREEN:
                shapes.drawBox(g);    
                shapes.drawRedLight(g, false);
                shapes.drawYellowLight(g, false);
                shapes.drawGreenLight(g, true);
                shapes.drawFore(g);
                    break;

                  case YELLOW:
                shapes.drawBox(g);    
                shapes.drawRedLight(g, false);
                shapes.drawYellowLight(g, true);
                shapes.drawGreenLight(g, false);
                shapes.drawFore(g);
                    break;

                  case FLASHING_YELLOW: //If Flashing yellow.
                    switch(flashingColor){
                    case DARK_YELLOW:
                      flashingColor = YELLOW;
                      break;
                    case YELLOW:
                      flashingColor = DARK_YELLOW;
                      break;
                  }

                    try{
                      if(flashingColor == YELLOW){
                        shapes.flashOn(g);
                      }
                      Thread.sleep(250);
                      if(flashingColor == DARK_YELLOW){
                        shapes.flashOff(g); 
                      }
                    } catch(Exception e){}
                    break;    
                }

                repaint ();
              }

              /*********************
                * TrafficPanel$KeyListener.java
                * Author: Ian Effendi
                * 
                * Extension of KeyAdapter.
                * Inputs of 'o', 'f', and the spacebar all return actions.
                **********************/
              private class KeyListener extends KeyAdapter{

                //Occurs when a key is pressed.
                public void keyPressed(KeyEvent event){

                }

                //Occurs, only, when a key is released.
                public void keyReleased(KeyEvent event){

                  //If the key input is 'o'.
                  if(event.getKeyCode() == KeyEvent.VK_O){

                    flashingYellow = false;        

                    //Switch on what lightswitch is equal to.
                    switch(lightswitch){
                      case ALL_ON:
                        lightswitch = ALL_OFF;
                        break;
                      case ALL_OFF: 
                        lightswitch = ALL_ON;
                        break;
                      case RED: 
                        lightswitch = ALL_OFF;
                        break;
                      case YELLOW:
                        lightswitch = ALL_OFF;
                        break;
                      case GREEN:
                        lightswitch = ALL_OFF;
                        break;
                      case FLASHING_YELLOW:
                        lightswitch = ALL_OFF;
                        break;
                    }

                    //If the key input is the spacebar.
                  } else if(event.getKeyCode() == KeyEvent.VK_SPACE){

                    flashingYellow = false;

                    //Switch on what lightswitch is equal to.
                    switch(lightswitch){
                      case ALL_ON:
                        lightswitch = RED;
                        break;
                      case ALL_OFF:
                        lightswitch = ALL_OFF;
                        break;
                      case RED:
                        lightswitch = GREEN;
                        break;
                      case YELLOW:
                        lightswitch = RED;
                        break;
                      case GREEN:
                        lightswitch = YELLOW;
                        break;
                      case FLASHING_YELLOW:
                        lightswitch = YELLOW;
                        break;
                    }

                    //If the key input is 'f'.
                  } else if(event.getKeyCode() == KeyEvent.VK_F){

                    flashingYellow = true;

                    //Switch on what lightswitch is equal to.
                    switch(lightswitch){
                      case ALL_ON:
                        lightswitch = FLASHING_YELLOW;
                        break;
                      case ALL_OFF:
                        lightswitch = ALL_OFF;
                        break;
                      case RED:
                        lightswitch = FLASHING_YELLOW;
                        break;
                      case YELLOW:
                        lightswitch = FLASHING_YELLOW;
                        break;
                      case GREEN:
                        lightswitch = FLASHING_YELLOW;
                        break;
                      case FLASHING_YELLOW:
                        lightswitch = YELLOW;
                        break;
                    }

                    //If nothing is input, lightswitch returns itself.
                  } else {
                    int x = lightswitch;
                    lightswitch = x;
                  }      
                }

                //Occurs when an input is typed(not held).
                public void keyTyped(KeyEvent event){

                }
              }

            }//end of class 
```

这就是所有的代码。请尽你所能提供帮助。任何提示也将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T03:47:09.377

当您收到 NullPointerException 时，这意味着您正在尝试使用一个尚未初始化的变量，一个尚未引用具体对象的变量。

解决方法是查看抛出 NPE 的行，NPE 错误文本会告诉你它是哪一行（这里是 ?LightBoxPanel 的第 211 行——一个不存在的类？？），然后看看为什么其中之一您尝试在该行上使用的变量为空。您可能没有通过调用变量将对象分配给 `Foobar myVariable = new Foobar();`它。

还，

*   不要在其中创建对象，`paintComponent(...)`因为此方法应仅用于绘画和绘画。
*   不要打`repaint()`进来`paintComponent(...)`。

编辑：你的问题是你隐藏了你的变量。您在类构造函数中重新声明它们，这意味着您在构造函数内部初始化的变量不是您认为它们是的类字段，而是构造函数的本地变量并且仅存在于构造函数中。因此，当您初始化这些局部变量时，您将类字段保留为空。解决方法：不要在构造函数中重新声明变量。

例如，改变这个：

```
class Lights {
   private final int RED = 1;
   private final int YELLOW = 2;

   // .... etc....

   private Rectangle grayBG, blackBG;
   private Circle red, green, yellow, redFore, greenFore, yellowFore;

   public Lights() {
      // the variables below are **local** to the constructor!
      Rectangle grayBG = new Rectangle(35, 35, 280, 830, true);
      Rectangle blackBG = new Rectangle(50, 50, 250, 800, true); 
```

对此：

```
class Lights {
   private final int RED = 1;
   private final int YELLOW = 2;

   // .... etc....

   private Rectangle grayBG, blackBG;
   private Circle red, green, yellow, redFore, greenFore, yellowFore;

   public Lights() {
      grayBG = new Rectangle(35, 35, 280, 830, true); // *** note the difference
      blackBG = new Rectangle(50, 50, 250, 800, true); // *** note the difference 
```

# java - 将值增加 1 将永远持续下去

> ID：16182859
> 
> 赞同：0
> 
> 时间：2013-04-24T03:27:38.627
> 
> 标签：java, android, if-statement, increment

所以，我一直在研究这段代码很长的一天。我确信必须有一种简单的方法来解决这个问题，但我现在什么都想不出来。首先是一小段代码：

```
 if(Settings.totalHits >= 50 && Settings.totalHits <= 99)
        {
           Settings.medal1 = true;
           Settings.save(game.getFileIO());
           totalMedals = totalMedals + 1;
        } 
```

这是一个非常基本的成就/奖牌系统。基本上，一旦用户总共完成了 50 次点击，它会将“medal1”的值设置为 true，这将删除仅在 Medal1 = false 时显示的“锁定”图像。

该问题涉及总奖牌部分。基本上，一个用户总共可以获得 32 个奖牌，解锁一个后，它需要将 totalMedals 更新 1。所以在这种情况下，输出将是“1/32”。除了，现在在解锁奖牌后（通过击中 50），锁定图像被正确删除，但总奖牌不断增加 1，而不是仅仅增加到“1”并停止。

就像我说的，我必须在这里俯瞰一些小的东西。我试图扔进一个 for 循环，但没有奏效（或者我做错了）。知道我可以改变什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T03:29:09.037

代替

```
if(Settings.totalHits >= 50 && Settings.totalHits <= 99) 
```

尝试：

```
if(Settings.totalHits >= 50 && Settings.totalHits <= 99 && !Settings.medal1) 
```

这样，勋章一旦被触发，就无法再次触发。因此，`totalMedals`只增加一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T03:31:59.910

*如果您已经达到阈值并且*您还没有解锁它，您只想解锁勋章（上限在这里无关紧要），因此您可以使用：

```
if (Settings.totalHits >= 50 && !Settings.medal1) {
    Settings.medal1 = true;
    Settings.save(game.getFileIO());
    totalMedals++;
}

if (Settings.totalHits >= 100 && !Settings.medal2) {
    Settings.medal2 = true;
    Settings.save(game.getFileIO());
    totalMedals++;
}

// and so on. 
```

当然，这肯定需要重构以有效地使用数组，例如：

```
for (i = 1; i < 33; i++) {
    if (Settings.totalHits >= 50 * i && !Settings.medal[i-1]) {
        Settings.medal[i-1] = true;
        Settings.save(game.getFileIO());
        totalMedals++;
    }
} 
```

而且，如果阈值不是 50 的直接倍数，您可以轻松地将任意复杂的函数（或数组查找）放入`if`语句中以满足您的需求。

# c - C：为什么我从这个计算中得到“浮点异常：8”？

> ID：16182862
> 
> 赞同：0
> 
> 时间：2013-04-24T03:28:06.263
> 
> 标签：c, exception, floating-point, integer

这是我的功能：

```
int scoreString(char *toScore) {
    int length = strlen(toScore);
    int score = 0;
    int spaceCount = 0;
    for (int i = 0; i < length; i++) {
        char current = toScore[i];
        if (current == ' ') {
            spaceCount++;
        }
        score += scoreChar(current);
    }
    //English words are ~5 characters
    int charsPerWord = (length/(spaceCount + 1));
    if (charsPerWord >=3 && charsPerWord <= 7) {
        //Big Bonus
        score = score * 2; //THIS LINE CAUSES PROBLEMS
    } else if (spaceCount <= 1) {
        //Big penalty
        score = score / 2; //THIS LINE CAUSES PROBLEMS
    }
    return score;
} 
```

如果我搭上了标记为引起问题的两条线路，那么一切都很好。在我正在测试的输入上，没有它们的这个函数的输出范围为 100-2000，所以这不应该是溢出错误......如果我将这两行中的任何一行留在我`Floating point exception: 8`执行几次之后。有任何想法吗？

# c++ - 如何获取临时文件夹并设置临时文件路径？

> ID：16182863
> 
> 赞同：4
> 
> 时间：2013-04-24T03:28:16.493
> 
> 标签：c++, path, syntax-error, temp

如何获取临时文件夹并设置临时文件路径？我尝试了下面的代码，但它有错误。非常感谢！

```
TCHAR temp_folder [255];
GetTempPath(255, temp_folder);

LPSTR temp_file = temp_folder + "temp1.txt";
//Error: IntelliSense: expression must have integral or unscoped enum type 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T03:44:18.117

这段代码添加了两个指针。

```
LPSTR temp_file = temp_folder + "temp1.txt"; 
```

它**没有** [连接](http://en.wikipedia.org/wiki/Concatenation)字符串，也没有为您想要的结果字符串创建任何存储。

对于 C 风格的字符串，使用[`lstrcpy`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647490%28v=vs.85%29.aspx)和[`lstrcat`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647487%28v=vs.85%29.aspx)

```
TCHAR temp_file[255+9];                 // Storage for the new string
lstrcpy( temp_file, temp_folder );      // Copies temp_folder
lstrcat( temp_file, T("temp1.txt") );   // Concatenates "temp1.txt" to the end 
```

根据[的文档`GetTempPath`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364992%28v=vs.85%29.aspx)`255`，将代码中所有出现的 替换为 也是明智之举`MAX_PATH+1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T03:49:17.273

您不能将两个字符数组相加并获得有意义的结果。它们是指针，而不是像 std::string 这样提供如此有用操作的类。

创建一个足够大的 TCHAR 数组并使用 GetTempPath，然后使用 strcat 将文件名添加到其中。

```
TCHAR temp_file [265];
GetTempPath(255, temp_file);
strcat(temp_file, "temp1.txt"); 
```

理想情况下，您还应该测试 GetTempPath 的结果是否失败。据我从另一个答案中链接的文档中可以看出，失败的最可能原因是提供的路径变量太小。按照那里的建议使用 MAX_PATH+1+9。

# joomla - BT 内容滑块中的 K2 额外字段访问

> ID：16182864
> 
> 赞同：0
> 
> 时间：2013-04-24T03:28:18.650
> 
> 标签：joomla, joomla-k2

我正在尝试访问 BT 内容滑块插件内的 K2 额外字段的内容。如果我做

```
print_r($row->extra_fields); 
```

我明白了

```
[{"id":"16","value":"http:\/\/www.youblisher.com\/p\/611670-Test-Intro-to-R\/"}] 
```

我需要访问该值，但我已经尝试了我能想到的一切，但没有运气。

我已经完成的测试（也尝试了 print_r 以防万一）：

```
echo $row->extra_fields[0]
echo $row->extra_fields[0]->value
echo $row->extra_fields->value
echo $row->extra_fields["value"] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T03:39:36.003

在尝试访问值之前，首先将您的字符串解码为 json 对象。

```
<?php
$json = json_decode('[{"id":"16","value":"http:\/\/www.youblisher.com\/p\/611670-Test-   Intro-to-R\/"}]');
print_r($json[0]->value);
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-19T09:16:09.897

好的，我让它按照我想要的方式工作。

我想用我称为 'Accroche' 的额外字段替换介绍/全文。这个额外字段的 ID 为 132（有助于了解将在下面的代码中使用的 ID）。

我们将编辑 2 个文件：

/modules/mod_bt_contentslider/classes/content.php 和 /modules/mod_bt_contentslider/classes/k2.php

首先要做的是从数据库中获取外场信息：

在 /modules/mod_bt_contentslider/classes/content.php （第 77 行附近）我添加 [b]a.extra_fields,[/b] 如下

```
 $model->setState('list.select', 'a.urls, a.images, a.fulltext, a.id, a.title, a.alias, a.introtext, a.extra_fields, a.state, a.catid, a.created, a.created_by, a.created_by_alias,' . ' a.modified, a.modified_by,a.publish_up, a.publish_down, a.attribs, a.metadata, a.metakey, a.metadesc, a.access,' . ' a.hits, a.featured,' . ' LENGTH(a.fulltext) AS readmore'); 
```

保存文件并关闭

现在让我们进入 /modules/mod_bt_contentslider/classes/k2.php （大约第 234 行），

替换此原始代码

```
// cut introtext
        if ($limitDescriptionBy == 'word') {

            $item->description = self::substrword($item->introtext, $maxDesciption, $replacer, $isStrips, $stringtags);

            $item->description = self::substring($item->introtext, $maxDesciption, $replacer, $isStrips, $stringtags);

        }
        $item->categoryLink = urldecode(JRoute::_(K2HelperRoute::getCategoryRoute($item->catid . ':' . urlencode($item->categoryalias))));

// get author name & link 
```

使用我评论过的这段代码，让像我这样的菜鸟可以理解；）

```
 // REPLACE intro/full text With extra-field info
        $extras = json_decode($item->extra_fields); // JSON Array we'll call extras (note final 's' : not to confuse with below variable)
        foreach ($extras as $key=>$extraField): //Get values from array
            if($extraField->value != ''):  //If not empty
                    if($extraField->id == '132'): // This is ID value for extrafield I want to show --- Search your K2 extrafield's id in Joomla backoffice ->K2 ->extrafields ---
                        if($extraField->value != ''): // If there's content in the extrafield of that ID 
                            $extra = $extraField->value; //Give $extra that value so we can hand it down below
                        endif; 
                    endif; 
            endif; 
        endforeach; 

        // cut introtext
        if ($limitDescriptionBy == 'word') {

           // $item->description = self::substrword($item->introtext, $maxDesciption, $replacer, $isStrips, $stringtags);
            $item->description = self::substrword($extra, $maxDesciption, $replacer, $isStrips, $stringtags);
        } else {

           // $item->description = self::substring($item->introtext, $maxDesciption, $replacer, $isStrips, $stringtags);
             $item->description = self::substring($extra, $maxDesciption, $replacer, $isStrips, $stringtags) ;

        }
        $item->categoryLink = urldecode(JRoute::_(K2HelperRoute::getCategoryRoute($item->catid . ':' . urlencode($item->categoryalias))));

        // get author name & link 
```

正如你所看到的，我已经注释掉了介绍文本，因为我不想要它们。如果你想要 introtext 和 extrafield，你可以修改它。

如果没有上面给出的 JSON 提示，我永远不会想到这一点。谢谢大家:)

希望这可以帮助。

干杯！

# ruby-on-rails - 呈现到电子邮件视图的文本未通过测试

> ID：16182865
> 
> 赞同：0
> 
> 时间：2013-04-24T03:28:21.760
> 
> 标签：ruby-on-rails, string, email, rspec

我正在尝试设置一封电子邮件来通知我 Rails 应用程序中发生的错误。我在测试中遇到了一个小错误，这些错误或多或少是无法正确说明我想要的东西。假设我的错误包括以下两行

```
2013-04-23 02:06:06 ERROR -- Errors for OUT6984-20130422-111427-1366647266.5769058.mp3:
2013-04-23 02:06:06 ERROR -- {:phone=>['is invalid']} 
```

当我写这个到我的电子邮件时，我写我的期望如下：

```
it "contains the right content" do
  @email.should have_body_text("2013-04-23 02:04:56 ERROR -- Errors for OUT6984-20130422-101157-1366643517.5758441.mp3:")
  @email.should have_body_text("2013-04-23 02:04:56 ERROR -- {:phone=>['is invalid']}")
end 
```

但我的测试失败了，因为......

```
expected the body to contain "2013-04-23 02:04:56 ERROR -- {:phone=>['is invalid']}" but was 
"<!DOCTYPE html> <html> <head> <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'> </head> <body> <h1>Errors for 20130423</h1> <br> <p>2013-04-23 02:04:56 ERROR -- Errors for OUT6984-20130422-101157-1366643517.5758441.mp3: 2013-04-23 02:04:56 ERROR -- {:phone=&gt;['is invalid']} </p> </body> </html> " 
```

最终哈希中的`>`char 被替换为`&gt;`. 我该如何解决这个问题，或者以通过的方式重写测试？测试完全按照我的意愿进行，代码也是如此。我只是不知道如何告诉它这*就是*我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T12:03:48.947

我不确定您的 @email 实例变量被定义为什么，但不是

```
@email.should have_body_text 
```

尝试使用

```
mail.body.encoded.should match 
```

并检查输出。

# wordpress - 将 WordPress Live 站点转移到 Localhost

> ID：16182867
> 
> 赞同：3
> 
> 时间：2013-04-24T03:29:05.640
> 
> 标签：wordpress, wamp

我通过 FTP 下载了所有文件并将它们粘贴到我的“www/mysite-live”文件夹中。

我正在使用 WAMP。我确实下载了实时 SQL 文件并通过 localhost/phpmyadmin 将其导入。

我确实更改了我的 wp-config.php 配置。

```
define('WPLANG', '');
define('WP_HOME','http://localhost/mysite-live');
define('WP_SITEURL','http://localhost/mysite-live');

define('DB_NAME', 'mysite_db');

/** MySQL database username */
define('DB_USER', 'root');

/** MySQL database password */
define('DB_PASSWORD', '');

/** MySQL hostname */
define('DB_HOST', 'localhost');

/** Database Charset to use in creating database tables. */
define('DB_CHARSET', 'utf8');

/** The Database Collate type. Don't change this if in doubt. */
define('DB_COLLATE', ''); 
```

现在，当我查看时，`http://localhost/mysite-live/`我只能查看主页，而无法访问其他页面和帖子。我得到404。

似乎是什么问题。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:02:30.823

**去你的 wp-admin->setting->permalinks**

> 再次将您的通用设置保存为您的实时站点。

# javascript - 在 PHP 文件中编写 jQuery 函数

> ID：16182873
> 
> 赞同：-1
> 
> 时间：2013-04-24T03:29:54.413
> 
> 标签：javascript, jquery

我遇到了 jQuery 和 PHP 的问题。我正在我的registration.php 文件中编写一个jQuery 函数，但它不起作用。这个jQuery函数是通过checkbox控制所有的文本框。

```
<script src="jquery.js"></script>
<script>
$(document).ready(function(){

$('#css').click(function(){
if (this.checked) {
$('#csc').removeAttr("disabled");
    $('#cse').removeAttr("disabled");
    $('#csp').removeAttr("disabled");
}
else {
$("#csc").attr("disabled", true);
    $("#cse").attr("disabled", true);
    $("#csp").attr("disabled", true);
}
});

$('#wrt').click(function(){
if (this.checked) {
$('#wsc').removeAttr("disabled");
    $('#wse').removeAttr("disabled");
    $('#wsp').removeAttr("disabled");
}
else {
$("#wsc").attr("disabled", true);
    $("#wse").attr("disabled", true);
    $("#wsp").attr("disabled", true);
}
});

$('#maths').click(function(){
if (this.checked) {
$('#msc').removeAttr("disabled");
    $('#mse').removeAttr("disabled");
    $('#msp').removeAttr("disabled");
}
else {
$("#msc").attr("disabled", true);
    $("#mse").attr("disabled", true);
    $("#msp").attr("disabled", true);
}
});

$('#sccb').click(function(){
if (this.checked) {
$('#ssc').removeAttr("disabled");
    $('#sse').removeAttr("disabled");
    $('#ssp').removeAttr("disabled");
}
else {
$("#ssc").attr("disabled", true);
    $("#sse").attr("disabled", true);
    $("#ssp").attr("disabled", true);
}
});

});

</script>

<table class="registration">
        <tr>
        <td width="250">
        <p style="font-color: black; font-size: 12px; margin-bottom: 1px"><strong>Subjects</strong></p>
        </td>
        <td width="220">
        <p style="font-color: black; font-size: 12px; margin-bottom: 1px"><strong>Full Name</strong></p>
        </td>
        <td width="200">
        <p style="font-color: black; font-size: 12px; margin-bottom: 1px"><strong>Email</strong></p>
        </td>
        <td width="150">
        <p style="font-color: black; font-size: 12px; margin-bottom: 1px"><strong>Phone Number</strong></p>
        </td>
        </tr>
        <tr>
        <td>
            <table>
                <tr>
                    <td><input type="checkbox" id="cscb" name="computerskills" value="computerskills"></td>
                    <td><img src="/wp-content/themes/twentyeleven/images/EATS/icas-subject-computerskills-icon.png"></td>
                    <td><p5>Computer Skills</p5></td>
                </tr>
            </table>
        </td>
        <td>
            <input type="text" id="csc" name="CScoor" disabled="disabled" size="30"></input>
        </td>
        <td>
            <input type="text" id="cse" name="CS_email" disabled="disabled" size="27"></input>
        </td>
        <td>
            <input type="text" id="csp" name="CS_phone" disabled="disabled"></input>
        </td>
        </tr>

        <tr>
        <td>
            <table>
                <tr>
                    <td><input type="checkbox" name="writing" value="writing"></td>
                    <td><img src="/wp-content/themes/twentyeleven/images/EATS/icas-subject-english-icon.png"></td>
                    <td><p5>English</p5></td>
                    <td><p5 style="font-size: 12px; font-weight: normal; color: #333333;"> & </p5></td>
                    <td><img src="/wp-content/themes/twentyeleven/images/EATS/icas-subject-writing-icon.png"></td>
                    <td><p5>Writing</p5></td>
                </tr>
            </table>
        </td>
        <td>
            <input type="text" id="wsc" name="Engcoor" disabled="disabled" size="30"></input>
        </td>
        <td>
            <input type="text" id="wse" name="Eng_email" disabled="disabled" size="27"></input>
        </td>
        <td>
            <input type="text" id="wsp" disabled="disabled" name="Eng_phone"></input>
        </td>
        </tr>

        <tr>
        <td>
            <table>
                <tr>
                    <td><input type="checkbox" name="mathematics" value="mathematics"></td>
                    <td><img src="/wp-content/themes/twentyeleven/images/EATS/icas-subject-mathematics-icon.png"></td>
                    <td><p5>Mathematics</p5></td>
                </tr>
            </table>
        </td>
        <td>
            <input type="text" id="msc"name="Mcoor" disabled="disabled" size="30"></input>
        </td>
        <td>
            <input type="text" id="mse" name="M_email" disabled="disabled" size="27"></input>
        </td>
        <td>
            <input type="text" id="msp" disabled="disabled" name="M_phone"></input>
        </td>
        </tr>

        <tr>
        <td>
            <table>
                <tr>
                    <td><input type="checkbox" id="sccb" name="science" value="science"></input>

                    </td>
                    <td><img src="/wp-content/themes/twentyeleven/images/EATS/icas-subject-science-icon.png"></td>
                    <td><p5>Science</p5></td>
                </tr>
            </table>
        </td>
        <td>
            <input type="text" id="ssc" name="Sccoor" disabled="disabled" size="30"></input>
            </script>
        </td>
        <td>
            <input type="text" id="sse" name="Sc_email" disabled="disabled" size="27"></input>
        </td>
        <td>
            <input type="text" id="ssp" name="Sc_phone" disabled="disabled"></input>
        </td>
        </tr>

        </table> 
```

为什么呢？请帮忙，我还是编程世界的新手。谢谢。

我试图将它保存为 .html 文件它可以工作，但它不适用于 .php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:49:08.510

对于更改`disabled`和其他 DOM 属性，您应该使用`prop`method 而不是`attr`，而不是使用 ID，您可以遍历 DOM 并使用`closest`和`find`方法找到目标输入。

```
$(document).ready(function () {
    $('table input[type=checkbox]').change(function () {
        $(this).closest('table')
               .closest('tr')
               .find('input[type=text]')
               .prop('disabled', !this.checked);
    });
}); 
```

[http://jsfiddle.net/hum7n/](http://jsfiddle.net/hum7n/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T03:49:53.853

我对其进行了一些调整

```
$(document).ready(function() {
    $('.skills').on('click', '.chk_skill', function(){
        $(this).closest('tr.skill').find('input').not(this).prop('disabled', !this.checked)
    })
}); 
```

HTML

```
<table class="registration">
    <tr>
        <td width="250">
            <p style="font-color: black; font-size: 12px; margin-bottom: 1px">
                <strong>Subjects</strong>
            </p>
        </td>
        <td width="220">
            <p style="font-color: black; font-size: 12px; margin-bottom: 1px">
                <strong>Full Name</strong>
            </p>
        </td>
        <td width="200">
            <p style="font-color: black; font-size: 12px; margin-bottom: 1px">
                <strong>Email</strong>
            </p>
        </td>
        <td width="150">
            <p style="font-color: black; font-size: 12px; margin-bottom: 1px">
                <strong>Phone Number</strong>
            </p>
        </td>
    </tr>

    <tr>
        <td>
            <table class="skills">
                <tr class="skill">
                    <td>
                        <table>
                            <tr>
                                <td><input class="chk_skill" type="checkbox" id="cscb" name="computerskills"
                                    value="computerskills" /></td>
                                <td><img
                                    src="/wp-content/themes/twentyeleven/images/EATS/icas-subject-computerskills-icon.png" /></td>
                                <td><p5>Computer Skills</p5></td>
                            </tr>
                        </table>
                    </td>
                    <td><input type="text" id="csc" name="CScoor"
                        disabled="disabled" size="30"></input></td>
                    <td><input type="text" id="cse" name="CS_email"
                        disabled="disabled" size="27"></input></td>
                    <td><input type="text" id="csp" name="CS_phone"
                        disabled="disabled"></input></td>
                </tr>
                <tr class="skill">
                    <td>
                        <table>
                            <tr>
                                <td><input class="chk_skill" type="checkbox" name="writing"
                                    value="writing"></td>
                                <td><img
                                    src="/wp-content/themes/twentyeleven/images/EATS/icas-subject-english-icon.png" /></td>
                                <td><p5>English</p5></td>
                            </tr>
                        </table>
                    </td>
                    <td><input type="text" id="wsc" name="Engcoor"
                        disabled="disabled" size="30"></input></td>
                    <td><input type="text" id="wse" name="Eng_email"
                        disabled="disabled" size="27"></input></td>
                    <td><input type="text" id="wsp" disabled="disabled"
                        name="Eng_phone"></input></td>
                </tr>

                <tr class="skill">
                    <td>
                        <table>
                            <tr>
                                <td><input class="chk_skill" type="checkbox"
                                    name="mathematics" value="mathematics" /></td>
                                <td><img
                                    src="/wp-content/themes/twentyeleven/images/EATS/icas-subject-mathematics-icon.png" /></td>
                                <td><p5>Mathematics</p5></td>
                            </tr>
                        </table>
                    </td>
                    <td><input type="text" id="msc" name="Mcoor"
                        disabled="disabled" size="30"></input></td>
                    <td><input type="text" id="mse" name="M_email"
                        disabled="disabled" size="27"></input></td>
                    <td><input type="text" id="msp" disabled="disabled"
                        name="M_phone"></input></td>
                </tr>

                <tr class="skill">
                    <td>
                        <table>
                            <tr>
                                <td><input class="chk_skill" type="checkbox" id="sccb"
                                    name="science" value="science"></input></td>
                                <td><img
                                    src="/wp-content/themes/twentyeleven/images/EATS/icas-subject-science-icon.png" /></td>
                                <td><p5>Science</p5></td>
                            </tr>
                        </table>
                    </td>
                    <td><input type="text" id="ssc" name="Sccoor"
                        disabled="disabled" size="30"></input></td>
                    <td><input type="text" id="sse" name="Sc_email"
                        disabled="disabled" size="27"></input></td>
                    <td><input type="text" id="ssp" name="Sc_phone"
                        disabled="disabled"></input></td>
                </tr>

            </table>
        </td>
    </tr>
</table> 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/56xhV/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T03:43:38.063

"css","wrt","maths" Id 属性未赋予相应的复选框。请添加此选项并尝试。

HTML 代码：

```
<table class="registration">
    <tr>
        <td width="250">
            <p style="font-color: black; font-size: 12px; margin-bottom: 1px"><strong>Subjects</strong></p>
        </td>
        <td width="220">
            <p style="font-color: black; font-size: 12px; margin-bottom: 1px"><strong>Full Name</strong></p>
        </td>
        <td width="200">
            <p style="font-color: black; font-size: 12px; margin-bottom: 1px"><strong>Email</strong></p>
        </td>
        <td width="150">
            <p style="font-color: black; font-size: 12px; margin-bottom: 1px"><strong>Phone Number</strong></p>
        </td>
    </tr>
    <tr>
        <td>
            <table>
                <tr>
                    <td><input type="checkbox" id="css" name="computerskills" value="computerskills"></td>
                    <td><img src="/wp-content/themes/twentyeleven/images/EATS/icas-subject-computerskills-icon.png"></td>
                    <td><p5>Computer Skills</p5></td>
    </tr>
</table>
</td>
<td>
    <input type="text" id="csc" name="CScoor" disabled="disabled" size="30"></input>
</td>
<td>
    <input type="text" id="cse" name="CS_email" disabled="disabled" size="27"></input>
</td>
<td>
    <input type="text" id="csp" name="CS_phone" disabled="disabled"></input>
</td>
</tr>

<tr>
    <td>
        <table>
            <tr>
                <td><input type="checkbox" name="writing" id="wrt" value="writing"></td>
                <td><img src="/wp-content/themes/twentyeleven/images/EATS/icas-subject-english-icon.png"></td>
                <td><p5>English</p5></td>
    <td><p5 style="font-size: 12px; font-weight: normal; color: #333333;"> & </p5></td>
<td><img src="/wp-content/themes/twentyeleven/images/EATS/icas-subject-writing-icon.png"></td>
<td><p5>Writing</p5></td>
</tr>
</table>
</td>
<td>
    <input type="text" id="wsc" name="Engcoor" disabled="disabled" size="30"></input>
</td>
<td>
    <input type="text" id="wse" name="Eng_email" disabled="disabled" size="27"></input>
</td>
<td>
    <input type="text" id="wsp" disabled="disabled" name="Eng_phone"></input>
</td>
</tr>

<tr>
    <td>
        <table>
            <tr>
                <td><input type="checkbox" id="maths" name="mathematics" value="mathematics"></td>
                <td><img src="/wp-content/themes/twentyeleven/images/EATS/icas-subject-mathematics-icon.png"></td>
                <td><p5>Mathematics</p5></td>
</tr>
</table>
</td>
<td>
    <input type="text" id="msc"name="Mcoor" disabled="disabled" size="30"></input>
</td>
<td>
    <input type="text" id="mse" name="M_email" disabled="disabled" size="27"></input>
</td>
<td>
    <input type="text" id="msp" disabled="disabled" name="M_phone"></input>
</td>
</tr>

<tr>
    <td>
        <table>
            <tr>
                <td><input type="checkbox" id="sccb" name="science" value="science"></input>

                </td>
                <td><img src="/wp-content/themes/twentyeleven/images/EATS/icas-subject-science-icon.png"></td>
                <td><p5>Science</p5></td>
</tr>
</table>
</td>
<td>
    <input type="text" id="ssc" name="Sccoor" disabled="disabled" size="30"></input>
</script>
</td>
<td>
    <input type="text" id="sse" name="Sc_email" disabled="disabled" size="27"></input>
</td>
<td>
    <input type="text" id="ssp" name="Sc_phone" disabled="disabled"></input>
</td>
</tr>

</table> 
```

# android - Android，如何从 XML 布局添加谷歌地图选项？

> ID：16182880
> 
> 赞同：5
> 
> 时间：2013-04-24T03:30:29.633
> 
> 标签：android, android-mapview, google-maps-android-api-2

我有一个包含 MapView 的片段。我在 XML 文件中添加了这个视图，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>

<com.google.android.gms.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:map="http://schemas.android.com/apk/res-auto"
    android:id="@+id/mapView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:clickable="true"
    map:uiCompass="true"
    android:background="#00000000" /> 
```

我已经将它链接到我的代码，如下所示：

```
public class HotSpotsFragment extends MainFragment implements LocationListener {

    private static final String TAG = "HotSpotsFragment";
    private Context context;
    private LocationManager locationManager;
    private MapView mapView;
    private GoogleMap googleMap;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        // create view
        View view = inflater.inflate(R.layout.fragment_hot_spots, container, false);

        // Getting context
        context = getActivity().getApplicationContext();

        // Make sure user's device supports Google play services
        try {
            MapsInitializer.initialize(getActivity());
        } catch (GooglePlayServicesNotAvailableException e) {
            Log.e(TAG, "Google play service is not available.");
            Toast.makeText(getActivity().getApplicationContext(), R.string.hot_spots_not_supported, Toast.LENGTH_LONG).show();
            return null;
        }

        Log.i(TAG, "Google play service is available.");

        mapView = (MapView) view.findViewById(R.id.mapView);
        mapView.onCreate(savedInstanceState);

        googleMap = ((MapView) view.findViewById(R.id.mapView)).getMap();
        if(googleMap == null) {
            Toast.makeText(getActivity().getApplicationContext(), R.string.hot_spots_not_supported, Toast.LENGTH_LONG).show();
            return null;
        }

        Log.i(TAG, "View created");

        return view;
    }
.
.
.
} 
```

我想添加以向我的地图视图添加选项。根据[GoogleMapOptions](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMapOptions)上提到的内容，“这些选项可以在以编程方式（而不是通过 XML）向您的应用程序添加地图时使用。如果您使用的是 MapFragment，您可以使用静态工厂方法 newInstance 传递这些选项(GoogleMapOptions)。如果您使用的是 MapView，则可以使用构造函数 MapView(Context, GoogleMapOptions) 传递这些选项。" 最后是我的案例，“**如果您使用 XML 添加地图，那么您可以使用自定义 XML 标签应用这些选项。** ”

我没有找到任何示例来展示如何通过 XML 添加选项。我想将 zOrderOnTop="true" 添加到我的 XML 代码中。

任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T03:48:58.157

这很容易

```
<com.google.android.gms.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:map="http://schemas.android.com/apk/res-auto"
    android:id="@+id/mapView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:clickable="true"
    map:uiCompass="true"
    map:zOrderOnTop="true"
    map:uiZoomControls="true"
    android:background="#00000000" /> 
```

然而，新的问题是添加`map:zOrderOnTop="true"`会从屏幕中删除覆盖对象，例如 ZoomIn/ZoomOut :(有关更多信息，请参阅[此链接](https://code.google.com/p/gmaps-api-issues/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Introduced%20Fixed%20Summary%20Stars%20ApiType%20Internal&groupby=&sort=&id=4812)。

# javascript - Cookie 没有被删除

> ID：16182884
> 
> 赞同：1
> 
> 时间：2013-04-24T03:31:20.347
> 
> 标签：javascript, vb.net, cookies

在我的 asp.net 应用程序中，我正在使用以下代码从服务器端创建一个 cookie

```
 Dim aCookie As New HttpCookie("StartDownload")
 aCookie.Value = "True"
 aCookie.Expires = DateTime.Now.AddMinutes(1)
 Response.Cookies.Add(aCookie) 
```

当我执行此代码时，正在创建 cookie，但无法通过单击按钮从 javascript 中删除 cookie。下面是javascript代码。

```
function delCookie() {
    alert(document.cookie);
    document.cookie = "StartDownload" + "=; expires=" + new Date(0).toUTCString();
    alert(document.cookie);
} 
```

我用的是IE浏览器。不确定是什么问题。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:46:46.017

您可以尝试对到期日期进行硬编码，例如，`Thu, 01-Jan-1970 00:00:01 GMT`看看这是否适合您。

如果仍然没有，您可能想问自己以下问题：

*   您是否检查了客户端和服务器端的 cookie 域和路径以确保它们相同？
*   一个cookie安全而另一个不安全吗？
*   是否有任何服务器/客户端时钟同步问题？

# javascript - 网络服务器如何可靠地确定发送请求的设备？

> ID：16182887
> 
> 赞同：1
> 
> 时间：2013-04-24T03:31:34.500
> 
> 标签：javascript, webserver, browser-detection, mobile-browser

我最近注意到我访问的一些网站能够检测到我用来查看网站的设备，但我不确定他们是如何做到这一点的。

例如，音乐流媒体应用程序 www.rdio.com 提供两种不同的服务；一种用于移动设备，一种用于笔记本电脑和台式计算机。他们对移动设备收取 10 美元/月的费用，对台式机和笔记本电脑收取 5 美元/月的费用。

显然，他们必须有一个很好的方法来检测发送请求的设备，因为他们的业务模型取决于它。rdio 和其他公司是如何做到这一点的？到目前为止，我所想到的一切似乎都很糟糕。例如，如果它们依赖于 http 请求中的标头变量，它们如何防止欺骗？或者，如果他们在客户端使用 javascript 来检查浏览器功能，您可以检查哪些功能来准确确定设备类型？您是否查看屏幕分辨率，或者是否存在陀螺仪或其他东西，因为如果我有一台具有笔记本电脑分辨率的移动设备，或者一台带有陀螺仪的笔记本电脑怎么办？

网络服务器检查 HTTP 请求或浏览器的哪些功能以准确确定设备类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T03:34:00.970

它们依赖于`User-Agent`浏览器来确定客户端使用的是哪种设备。

当然，User-Agents 是可以被欺骗的，而且你没有什么可以做的来阻止它。

虽然已经尝试通过尝试调用特定于这些浏览器的功能来检测真正的浏览器类型，但这并不可靠。

[`User-Agent`您可以在此处](https://en.wikipedia.org/wiki/User_agent)阅读更多信息。

# c++ - 与客户端功能的链接错误的共享库

> ID：16182889
> 
> 赞同：0
> 
> 时间：2013-04-24T03:32:04.840
> 
> 标签：c++, shared-libraries

我用这样的类写了一个共享库：

```
// lib.h
class LibClass {
    template<typename T>
    static void foo () {
        T *tmp = new T();
        tmp->bar();
    }
}; 
```

我在其他地方使用了 lib 并定义了类：

```
//client.cpp
class C {
public:
    void bar() { cout<<"bar"<<endl; }
};

int main () {
    LibClass::foo<C>();
    return 0;
} 
```

我得到了错误`undefined reference to 'C::bar()'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:53:48.473

我强烈怀疑您正在使用 *nix 链接器，并且您列出了目标文件（到编译器/链接为`client.o`然后`lib.so`. 但不幸的是，当链接器看到 client.o 它已经可以看到没有引用`C::bar`并且没有为它发出任何代码。

您需要在链接命令行上的库之前*和*之后使用对象组或列出`client.o`两次。

# ruby-on-rails - 使用“捆绑安装”时安装 Nokogiri 时出错

> ID：16182891
> 
> 赞同：1
> 
> 时间：2013-04-24T03:32:10.677
> 
> 标签：ruby-on-rails, ruby, rubygems, nokogiri

当我运行`bundle install`它时停止：

```
Installing nokogiri (1.4.3.1) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension. 
```

我尝试使用“ [Installing Nokogiri](http://nokogiri.org/tutorials/installing_nokogiri.html) ”手动安装它，但这确实对我有利。

我需要改变什么吗？

```
/usr/bin/ruby1.9.1 extconf.rb'   
extconf.rb:10: Use RbConfig instead of obsolete and deprecated Config.  
checking for libxml/parser.h... yes  
checking for libxslt/xslt.h... yes  
checking for libexslt/exslt.h... yes  
checking for xmlParseDoc() in -lxml2... yes  
checking for xsltParseStylesheetDoc() in -lxslt... yes  
checking for exsltFuncRegister() in -lexslt... yes  
checking for xmlFirstElementChild()... yes  
checking for xmlRelaxNGSetParserStructuredErrors()... yes  
checking for xmlRelaxNGSetParserStructuredErrors()... yes  
checking for xmlRelaxNGSetValidStructuredErrors()... yes  
checking for xmlSchemaSetValidStructuredErrors()... yes  
checking for xmlSchemaSetParserStructuredErrors()... yes  
creating Makefile 
```

或这个：

```
make  
compiling xml_dtd.c  
compiling xml_entity_reference.c  
compiling xml_sax_parser_context.c  
compiling xml_attribute_decl.c  
compiling xml_schema.c  
compiling xml_processing_instruction.c  
compiling xml_cdata.c  
compiling xml_xpath_context.c  
xml_xpath_context.c: In function ‘xpath_generic_exception_handler’:  
xml_xpath_context.c:154:3: error: format not a string literal and no format arguments [-     Werror=format-security]
cc1: some warnings being treated as errors  
make: *** [xml_xpath_context.o] Error 1  

Gem files will remain installed in /home/virinchy/.bundler/tmp/10048/gems/nokogiri-  1.4.3.1 for inspection.  
Results logged to /home/virinchy/.bundler/tmp/10048/gems/nokogiri- 1.4.3.1/ext/nokogiri/gem_make.out
An error occured while installing nokogiri (1.4.3.1), and Bundler cannot continue.  
Make sure that `gem install nokogiri -v '1.4.3.1'` succeeds before bundling.' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T23:18:37.643

首先，Nokogiri 1.4.3.1 已经快三年了。你应该升级。

其次，有关 Debian 如何强化 gcc 编译器的详细信息，请参阅[https://github.com/sparklemotion/nokogiri/issues/680](https://github.com/sparklemotion/nokogiri/issues/680)。您将需要使用旧版本的 debian 或新版本的 Nokogiri。

# arrays - 如何使用值数组来限制 perl 中的 for 循环？

> ID：16182896
> 
> 赞同：2
> 
> 时间：2013-04-24T03:32:55.783
> 
> 标签：arrays, perl, for-loop

我知道这个问题相当模糊，但我希望解释的空间可以帮助阐明，这是我整天绞尽脑汁但无法通过搜索找到任何建议的问题。

基本上我有一个数组@cluster，我试图用它来使迭代器 $x 跳过位于该数组中的值。数组的大小会有所不同，所以不幸的是，我不能（相当残忍地）做出 if 语句来适应所有情况。

通常，当我需要使用标量值执行此操作时，我会这样做：

```
for my $x (0 .. $numLines){
    if($x != $value){
        ...
    }
} 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T03:44:41.223

你可以做：

```
my @cluster = (1,3,4,7);
outer: for my $x (0 .. 10){
    $x eq $_ and next outer for @cluster;
    print $x, "\n";
} 
```

使用 Perl 5.10，您还可以：

```
for my $x (0 .. 10){
    next if $x ~~ @cluster;
    print $x, "\n";
} 
```

或者更好地使用哈希：

```
my @cluster = (1,3,4,7);
my %cluster = map {$_, 1} @cluster;
for my $x (0 .. 10){
    next if $cluster{$x};
    print $x, "\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T07:52:37.830

嗯...如果您要跳过行，为什么不直接使用该标准而不是记住需要过滤掉的行？

该[`grep`](http://perldoc.perl.org/functions/grep.html)函数是过滤列表的强大构造：

```
my @array = 1 .. 10;

print "$_\n" for grep { not /^[1347]$/ } @array;  # 2,5,6,8,9,10
print "$_\n" for grep {     $_ % 2     } @array;  # 1,3,5,7,9

my @text = qw( the cat sat on the mat );

print "$_\n" for grep { ! /at/ } @text;           # the, on, the 
```

更少的混乱，更多的 DWIM！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T03:43:41.833

你的意思是这样的吗：

```
for my $x (0 .. $numLines){
    my $is_not_in_claster = 1;
    for( @claster ){
         if( $x == $_ ){
             $is_not_in_claster = 0;
             last;
         }
    }
    if( $is_not_in_claster ){
        ...
    }
} 
```

?

# python - 解包模拟参数

> ID：16182898
> 
> 赞同：0
> 
> 时间：2013-04-24T03:33:26.200
> 
> 标签：python, parameters, scipy, emcee

我做了很多 ODE 模拟，并使用了一些需要作为列表传入参数的 Python 参数优化工具（例如 scipy.optimize.minimize、 [emcee ）。](http://dan.iel.fm/emcee/)这使它们非常麻烦，因为我必须将参数称为`params[0]`、`params[1]`等，而不是更直观的名称，这些名称实际上描述了它们在模拟中的作用。到目前为止，我对此的解决方案是这样的：

```
k1 = 1.0 
k2 = 0.5
N = 0.01

params = [k1,k2,N]

def sim(params,timerange):
    k1 = params[0]
    k2 = params[1]
    N = params[2]

    # run the simulation 
```

这真的很笨拙，并且由于多种原因而不能令人满意。每当我需要向模拟添加新参数时，我都必须修改参数列表并更改我在模拟函数中手动解包列表的方式；浪费一些时间在每一轮模拟中建立新的参考，等等。

我想知道是否有一个理智的、非笨拙的解决方案来定义带有名称的参数，将它们作为列表传递给函数，然后通过列表中的相同名称来引用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:26:04.100

我通常会按照 Joran 在他的回答中提出的建议：

```
def sim(params, timerange):
    k1, k2, N = params
    ... 
```

但你也可以这样做：

```
def sim((k1, k2, N), timerange):
    ... 
```

（至少，这在 Python 2.7 中有效。我没有在其他 Python 版本中尝试过。）我用`scipy.integrate.odeint`,`scipy.integrate.ode`和测试了这个想法`scipy.optimize.minimize`，它运行良好。例如，在以下代码中，您可以使用`cost`或`cost2`作为 的第一个参数`minimize`：

```
from scipy.optimize import minimize

def cost(z, a, b):
    x, y = z
    c = (x - a)**2 + (y - b)**2
    return c

def cost2((x, y), a, b):
    c = (x - a)**2 + (y - b)**2
    return c

if __name__ == "__main__":
    a = 5.0
    b = 1.5
    x0 = 4.2
    y0 = 1.5
    sol = minimize(cost2, (x0, y0), args=(a,b))
    print sol['x'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T03:54:38.523

```
def sim(params,timerange):
    k1,k2,N = params 
```

是你想要的我认为..,.. 如果你添加了一个额外的参数，你只需在 N 之后添加它......但它不会是一个可选参数

或者更好

```
def sim(*params,**kwargs):
    timerange = kwargs.get('timerange',default_timerange)
    K1,K2,N = params #assuming you know you have exactly 3

#then call it like so
sim(k1,k2,N,timerange=(-100,100)) 
```

# jquery - 带有rails的咖啡脚本（切换功能）仅在页面重新加载后才有效

> ID：16182899
> 
> 赞同：0
> 
> 时间：2013-04-24T03:33:29.700
> 
> 标签：jquery, ruby-on-rails, ruby, coffeescript, toggle

```
jQuery ->
  $("#toggle_button").click ->
    $("#toggle_answer").toggle() 
```

我必须每次刷新一次页面才能使切换按预期工作。如果我不刷新页面它不起作用？

有解决方案吗？我一直试图让它工作大约 3 小时。我尝试了很多其他的东西，例如：

```
$(document).ready() ->
  $("#toggle_button").click ->
    $("#toggle_answer").toggle() 
```

和

```
jQuery ($) ->
  $("#toggle_button").click ->
    $("#toggle_answer").toggle() 
```

我也尝试不使用咖啡脚本而只使用javascript，但我仍然遇到同样的问题。

这是rails如何工作的问题吗？单击指向另一个页面的链接后，可能没有加载 javascript？（我不认为这正在发生，但我不知道为什么它不起作用）

任何帮助，将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:05:52.280

触发或附加事件时，DOM 中缺少**#toggle_button**或**#toggle_answer**似乎有问题。您可以尝试使用 jQuery 方法`.on()`，该方法将查找给定选择器的元素并在添加到 DOM 时将事件附加到它们：

```
$("#toggle_button").on "click" ->
    $("#toggle_answer").toggle() 
```

`.on()`jQuery 中的替换`.live()`和`.delegate()`函数，你应该阅读它的文档：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

# .net - 让窗口忽略交互性（重影/覆盖窗口）

> ID：16182900
> 
> 赞同：1
> 
> 时间：2013-04-24T03:33:30.917
> 
> 标签：.net, vb.net, winforms

我有一个窗口，它的 FormBorderStyle 为 None，并带有一个停靠在表单上的图片框。所以基本上所有展示的只是一张照片。我现在已将其设置为 Top Most。我想要做的是，如果他们单击图像上的某个位置，它将忽略对该窗口的单击并与它下面的窗口进行交互。我这样做了，以为它会起作用，但事实并非如此。我猜点击速度不够快，无法显示表单，或者我可能必须关闭或最小化表单。

```
 Me.Hide()
    mouse_event(MOUSEEVENTF_LEFTDOWN, 0, 0, 0, 0)
    Me.Show() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T03:49:39.177

在 Win32 编程模型中，您所描述的窗口类型称为“透明”窗口。

请注意，这与*opacity*不同，它经常被混淆。透明窗口对于鼠标点击等事件是透明的，但它可能仍然是*不透明*的（即，视觉上不透明）。您可以同时拥有命中测试透明度和视觉透明度，或者只有一种，或者两者都没有。

要使窗口命中测试透明，您需要在创建窗口时设置[`WS_EX_TRANSPARENT`扩展窗口样式](http://msdn.microsoft.com/en-us/library/windows/desktop/ff700543.aspx)。

要从 VB.NET 执行此操作，请覆盖表单的[`CreateParams`属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.createparams.aspx)并添加样式标志，如下所示：

```
Protected Overrides ReadOnly Property CreateParams As CreateParams
    Get
        Const WS_EX_TRANSPARENT As Integer = &H20

        Dim cp As CreateParams = MyBase.CreateParams
        cp.ExStyle = cp.ExStyle Or WS_EX_TRANSPARENT
        Return cp
    End Get
End Property 
```

请注意，当您使窗口透明时，您会得到一个完全透明的窗口，就像您要求的那样。这意味着鼠标点击将*完全不可见*，包括在非客户区。用户甚至无法单击左上角的关闭框。应用程序必须以编程方式关闭窗口。您需要在设计中考虑到这一点。

* * *

打开和关闭样式需要更多代码。您需要 P/Invoke Win32 函数来检索和设置当前窗口样式。例如：

```
Imports System
Imports System.Windows.Forms
Imports System.Runtime.InteropServices
' ...etc.

Public Class MyForm : Inherits Form

    ' P/Invoke stuff

    Private Const GWL_EXSTYLE As Integer = -20
    Private Const WS_EX_TRANSPARENT As Integer = &H20

    <DllImport("user32.dll")> _
    Private Shared Function GetWindowLongPtr(hWnd As IntPtr, _
                                             nIndex As Integer) As IntPtr
    End Function

    <DllImport("user32.dll")> _
    Private Shared Function SetWindowLongPtr(hWnd As IntPtr, _
                                            nIndex As Integer, _
                                            dwNewLong As IntPtr) As IntPtr                                                
    End Function

    ' Toggling function
    Public Sub ToggleClickTransparency()
        ' Get the form's current extended window styles.
        Dim exStyle As IntPtr = GetWindowLongPtr(Me.Handle, GWL_EXSTYLE)

        ' Determine if the transparency flag is currently set.
        If (exStyle Or WS_EX_TRANSPARENT) = WS_EX_TRANSPARENT Then
            ' Remove the flag.
            exStyle = exStyle And (Not WS_EX_TRANSPARENT)
        Else
            ' Add the flag.
            exStyle = exStyle Or WS_EX_TRANSPARENT
        End If

        ' Update the window's styles.
        SetWindowLongPtr(Me.Handle, GWL_EXSTYLE, exStyle)
    End Sub

    ' Other code
    ' ...

End Class 
```

# css - 如何正确分离rails中的样式文件？

> ID：16182903
> 
> 赞同：-1
> 
> 时间：2013-04-24T03:33:54.077
> 
> 标签：css, ruby-on-rails, styles

我目前同时使用`rails 2`和`rails 3`

文档说所有页面的所有样式都被编译到一个文件中。

例如，一个新的 Rails 应用程序包含一个默认的 app/assets/javascripts/application.js 文件，其中包含以下行：

```
// ...
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

我对 rails 处理这个问题的方式感兴趣。如何将所有样式写入一个文件。它是为每一页做的，还是在单独的文件中制作样式？rails 2和rails 3之间的方法有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:41:02.323

Rails 3（准确地说是.1）给了我们[资产管道](http://guides.rubyonrails.org/asset_pipeline.html)。如您所见，资产管道使用 application.js 和 application.css。

资产管道所做的是将所有不同的 javascript 文件取出并打包成一个大文件（通常是 application.js）。

这里的想法是，您可以像您所说的那样为每个控制器编写一个 javascript 文件，然后资产管道将所有内容放在一起并将其作为一个大文件提供。这对性能有好处，对开发人员也有好处。（包含的小文件更容易推理和维护）。

资产管道还添加了一些约定：javascript 存在于`app/assets/javascripts`（以及我认为的其他一些定义的位置），每个控制器通常一个文件（但您可以有多个文件！），并且这个 javascript 实际上可以由某种语言机器生成输出 Javascript。（[Coffeescript](http://coffeescript.org/)是这种语言的一个例子——Coffeescript 不是 Javascript，但 Coffeescript 编译器输出 Javascript）。

资产管道为 Rails 应用程序带来了结构。通常，如果我在一个项目中，我会将 javascript 放在三个地方之一：`app/assets/javascript`对于我自己的应用程序代码，`lib/assets/javascript`对于我可能在不同项目中共享的一些常用实用程序，以及`vendor/assets/javascript`来自开源社区的 jQuery 或 Javascript 库之类的东西那不是我的。

以前，在 Rails 2 中，你所有的 Javascript 都存在于`public/javascripts/`. 我的意思是一切：可能包含您自己的逻辑的 javascript 文件，可能很大的文件（开发人员很难推理），因为每次您需要一个新的 jQuery 回调时，您都将其添加到`public/javascripts/application.js`. 您可以将实用程序模块与供应商代码与您希望有一天提取的 Javascript 混合在一起。用 DHH 的话来说，这是一个垃圾抽屉。

资产管道为我们提供了位置、每个控制器一个文件和打包/优化 Javascript 的约定，以便在客户端下载更快。

**总之**：Rails 脚手架命令生成`app/assets/javascripts/your_controller.js.coffee`。在此文件中，您应该添加与该控制器提供的视图相关的 Javascript。这是一个最佳实践和一个好主意。

值得注意的是，您的所有 Javascript 代码最终都会被计算机编译成一个大文件，并且有时这种抽象会泄漏。（例如，两个不同的 javascript 文件完全意外地将两个不同的事件绑定到同一个 Javascript id）。这些泄漏的抽象是为什么资产管道有很多尖锐的边缘，以及关于 SO 的很多资产管道问题。

# ios - 第一次后台任务后重复长时间运行的后台任务未启动计时器

> ID：16182910
> 
> 赞同：1
> 
> 时间：2013-04-24T03:34:20.087
> 
> 标签：ios

我通过重复启动计时器来尝试长时间运行的后台任务。但后台任务仅在第一次正常运行，下一次它会随机连续调用 endBackgroundTask 方法。

**我的后台任务代码：**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    if([self isMultiTaskingSupported])
    {
        NSLog(@"Multitasking Supported");
    }
    else
    {
         NSLog(@"Multitasking Not Supported.");
    }

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.viewController = [[INNOViewController alloc] initWithNibName:@"INNOViewController_iPhone" bundle:nil];
    } else {
        self.viewController = [[INNOViewController alloc] initWithNibName:@"INNOViewController_iPad" bundle:nil];
    }
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.

    [self startBackgroundTask:application];
}

-(void) startBackgroundTask:(UIApplication *)application
{
    if([self isMultiTaskingSupported]==NO)
    {
        return ;
    }

    self.myTimer = [NSTimer scheduledTimerWithTimeInterval:1.0f target:self selector:@selector(timerMethod:) userInfo:nil repeats:YES];

    self.backgroundTaskIdentifier = [application beginBackgroundTaskWithExpirationHandler:^(void){
        [self endBackgroundTask:application];

        [self startBackgroundTask:application];
    }];
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    // Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.

    if (self.backgroundTaskIdentifier != UIBackgroundTaskInvalid) {
        [self endBackgroundTask:(UIApplication *)application];
    }
}

-(BOOL) isMultiTaskingSupported
{
    BOOL result = NO;

    //NSLog(@"before %hhd",result);
    //NSLog(@"method exist or not -> %hhd",[[UIDevice currentDevice] respondsToSelector:@selector(isMultiTaskingSupported)]);
    if([[UIDevice currentDevice] respondsToSelector:@selector(isMultitaskingSupported)])
    {
        NSLog(@"isMultiTaskingSupported method available in sdk");
        result=[[UIDevice currentDevice] isMultitaskingSupported];
        //NSLog(@"after %hhd",result);
    }
    return result;
}

-(void) timerMethod:(NSTimer *)paramSender
{
    NSTimeInterval backgroundTimeRemaining = [[UIApplication sharedApplication] backgroundTimeRemaining];

    if(backgroundTimeRemaining == DBL_MAX)
    {
        NSLog(@"Background Time = undetermined");
    }
    else
    {
         NSLog(@"Background Time = %0.02f",backgroundTimeRemaining);
    }
}

-(void) endBackgroundTask:(UIApplication *)application
{
    NSLog(@"endBackgroundTask");
    dispatch_queue_t mainQueue =  dispatch_get_main_queue();

    __weak INNOAppDelegate *weakSelf=self;

    dispatch_async(mainQueue, ^(void){
        //Complete a long background task in AppDelegate
        INNOAppDelegate *strongSelf = weakSelf;

        if(strongSelf != nil)
        {
            [strongSelf.myTimer invalidate];
            [[UIApplication sharedApplication]endBackgroundTask:self.backgroundTaskIdentifier];
            strongSelf.backgroundTaskIdentifier=UIBackgroundTaskInvalid;

            NSLog(@"cleaned BackgroundTask");

        }
    });

} 
```

**日志：**

```
2013-04-24 08:50:14.510 MultiTasking[651:c07] Background Time = 17.00
2013-04-24 08:50:15.510 MultiTasking[651:c07] Background Time = 16.00
2013-04-24 08:50:16.510 MultiTasking[651:c07] Background Time = 15.00
2013-04-24 08:50:17.510 MultiTasking[651:c07] Background Time = 14.00
2013-04-24 08:50:18.510 MultiTasking[651:c07] Background Time = 13.00
2013-04-24 08:50:19.510 MultiTasking[651:c07] Background Time = 12.00
2013-04-24 08:50:20.510 MultiTasking[651:c07] Background Time = 11.00
2013-04-24 08:50:21.510 MultiTasking[651:c07] Background Time = 10.00
2013-04-24 08:50:22.510 MultiTasking[651:c07] Background Time = 9.00
2013-04-24 08:50:23.510 MultiTasking[651:c07] Background Time = 8.00
2013-04-24 08:50:24.510 MultiTasking[651:c07] Background Time = 7.00
2013-04-24 08:50:25.510 MultiTasking[651:c07] Background Time = 6.00
2013-04-24 08:50:26.510 MultiTasking[651:c07] Background Time = 5.00
2013-04-24 08:50:26.510 MultiTasking[651:c07] endBackgroundTask
2013-04-24 08:50:26.511 MultiTasking[651:c07] isMultiTaskingSupported method available in sdk
2013-04-24 08:50:26.512 MultiTasking[651:c07] cleaned BackgroundTask
2013-04-24 08:50:26.512 MultiTasking[651:c07] endBackgroundTask
2013-04-24 08:50:26.512 MultiTasking[651:c07] isMultiTaskingSupported method available in sdk
2013-04-24 08:50:26.513 MultiTasking[651:c07] endBackgroundTask
2013-04-24 08:50:26.514 MultiTasking[651:c07] isMultiTaskingSupported method available in sdk
2013-04-24 08:50:26.514 MultiTasking[651:c07] endBackgroundTask
2013-04-24 08:50:26.515 MultiTasking[651:c07] isMultiTaskingSupported method available in sdk
2013-04-24 08:50:26.515 MultiTasking[651:c07] cleaned BackgroundTask
2013-04-24 08:50:26.516 MultiTasking[651:c07] cleaned BackgroundTask
2013-04-24 08:50:26.516 MultiTasking[651:c07] cleaned BackgroundTask
2013-04-24 08:50:26.516 MultiTasking[651:c07] endBackgroundTask
2013-04-24 08:50:26.517 MultiTasking[651:c07] isMultiTaskingSupported method available in sdk
2013-04-24 08:50:26.518 MultiTasking[651:c07] endBackgroundTask
2013-04-24 08:50:26.518 MultiTasking[651:c07] isMultiTaskingSupported method available in sdk
2013-04-24 08:50:26.519 MultiTasking[651:c07] endBackgroundTask
2013-04-24 08:50:26.519 MultiTasking[651:c07] isMultiTaskingSupported method available in sdk
2013-04-24 08:50:26.520 MultiTasking[651:c07] endBackgroundTask
2013-04-24 08:50:26.520 MultiTasking[651:c07] isMultiTaskingSupported method available in sdk
2013-04-24 08:50:26.521 MultiTasking[651:c07] endBackgroundTask
2013-04-24 08:50:26.522 MultiTasking[651:c07] isMultiTaskingSupported method available in sdk
2013-04-24 08:50:26.523 MultiTasking[651:c07] endBackgroundTask
2013-04-24 08:50:26.523 MultiTasking[651:c07] isMultiTaskingSupported method available in sdk
2013-04-24 08:50:26.524 MultiTasking[651:c07] endBackgroundTask 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T04:08:43.133

这可能是由于您的过期处理程序块结束了任务然后再次启动它。

此外，您仍然`self`在您的`endBackgroundTask`块中捕获（使用`strongSelf.backgroundTaskIdentifier`）

# javascript - 使用 Javascript 在弹出窗口中打开链接

> ID：16182915
> 
> 赞同：11
> 
> 时间：2013-04-24T03:34:42.643
> 
> 标签：javascript, html, hyperlink, popup, modal-dialog

我正在尝试将 href 加载到特定尺寸的弹出窗口中，该窗口也位于屏幕中心。

这是我的来源：

```
<li>
    <a class="sprite_stumbleupon" href="http://www.stumbleupon.com/submit?url=http://www.your_web_page_url" target="_blank" onclick="return windowpop(545, 433)"></a>
</li> 
```

这是我的javascript：

```
function windowpop(url, width, height) {
    var leftPosition, topPosition;
    //Allow for borders.
    leftPosition = (window.screen.width / 2) - ((width / 2) + 10);
    //Allow for title and status bars.
    topPosition = (window.screen.height / 2) - ((height / 2) + 50);
    //Open the window.
    window.open(url, "Window2", "status=no,height=" + height + ",width=" + width + ",resizable=yes,left=" + leftPosition + ",top=" + topPosition + ",screenX=" + leftPosition + ",screenY=" + topPosition + ",toolbar=no,menubar=no,scrollbars=no,location=no,directories=no");
} 
```

测试时这似乎返回 404 错误。我究竟做错了什么？

多谢了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T03:48:06.193

`function windowpop(url, width, height)`该函数需要返回一个 URL。

`onclick="return windowpop(545, 433)"`你只返回`width`and `height`。

尝试使用以下方式返回 URL `this.href`：

```
onclick="return windowpop(this.href, 545, 433)" 
```

**示例：http:** [//jsfiddle.net/zKKAM/1/](http://jsfiddle.net/zKKAM/1/)

# php - Yii：如何通过 URL/slug 而不是 ID 在另一个模型中使用一个模型？

> ID：16182918
> 
> 赞同：1
> 
> 时间：2013-04-24T03:35:06.643
> 
> 标签：php, yii

我正在开发一个网站，其中包含事件类别和事件详细信息。这意味着首先我想使用事件类别表来显示所有事件，当用户选择特定事件时，将显示该类别下的所有事件。现在，如果用户将选择任何事件以获取详细信息，则 URL 必须如下所示：

如果用户选择任何事件类别说“音乐”，那么：

> www.domain.com/category/music/

当用户在音乐类别中选择事件时说“星夜”，那么：

> www.domain.com/category/music/event/star-night

我怎样才能完成这项任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:24:41.547

在您的 config/main.php 中：

```
// uncomment the following to enable URLs in path-format
'urlManager' => array(

    'rules' => array(
        // other rules...
        'category/<category>/<controller:\w+>/<slug>' => '<controller>/view', 
```

事件/或任何控制器将处理单个项目的视图。

在每个控制器中，让视图接受 slug/title 字符串而不是通常的 id。

```
public function actionView($slug) {
    $model = $this->loadModel($slug);

public function loadModel($slug) {
    $model = Event::model()->find('slug=:slug', array(':slug' => $slug)); 
```

# jquery - jQuery listviewbeforefilter，限制listview项

> ID：16182922
> 
> 赞同：2
> 
> 时间：2013-04-24T03:35:23.210
> 
> 标签：jquery, listview

我试图将可见的列表视图项目的数量限制为 5。机场变量是一个结构为 jsonp 的字符串。代码如下所示，但我无法弄清楚如何限制列表视图中出现的项目数量。我需要限制这个数字，因为 airports 变量包含数千个项目。谢谢你的帮助！

```
$( "#destinationListview" ).on( "listviewbeforefilter", function ( e, data ) {
    var $ul = $( this ),
        $input = $( data.input ),
        value = $input.val(),
        html = "";
    $ul.html( "" );
    if ( value && value.length > 3 ) {
        $ul.html( "<li></li>" );
        $ul.listview( "refresh" );
        $.each( airports, function ( i, val ) {
             html += "<li class='destination' id='" + val.code + "'>" + val.name + ", " + val.location + "</li>";
        });
        $ul.html( html );
        $ul.listview( "refresh" );
        $ul.trigger( "updatelayout");

        $(".destination").click(function() {
            $( data.input ).val($(this).attr("id"));
            $("#destination").val($(this).attr("id"));
            $("#destinationListview li").hide();
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T17:35:50.817

我猜机场是一个数组，所以我在这里做了一个简单的例子：http: [//jsfiddle.net/av94U/](http://jsfiddle.net/av94U/)

您要做的是将要在`ul`. 正如您所说，您只希望 5 个可见，因此您应该通过从机场数组中提取要在列表中显示的五个机场，例如：

```
var listItems = airports.length > 5 ? airports.slice(-5) : airports; 
```

然后`listItems`在你的`$.each( airports, ...)`-call 中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-13T03:29:46.187

要仅显示前五个列表项，它将是这样的

```
'''javascript
var listItems = airports.length > 5 ? airports.slice(0,5) : airports;
'''
```

# linux - 如何为 linux 应用程序添加版本信息

> ID：16182925
> 
> 赞同：0
> 
> 时间：2013-04-24T03:35:52.113
> 
> 标签：linux, shell, console, version

我在 linux 中开发了一个 GUI 应用程序。目前，应用程序的版本信息显示在 GUI 内。
现在，我的客户希望他能够通过键入以下命令来检查应用程序的版本：

```
[shell]: appName --version 
```

我所做的如下：

```
int main(int argc, char *argv[])
{

    /* Initialize Qt Application */
    QApplication simulatorGUI(argc, argv);

    QStringList argList = simulatorGUI.arguments();

    if((argList.count() == 2) && (argList[1].toStdString() == "--version"))
    {
        cout << "App Simulator V2.3" << endl;
    }

    simulatorGUI.setStyle(new QCleanlooksStyle);
        appSimulator simulatorInstance;
        simulatorInstance.show();
        return simulatorGUI.exec();
} 
```

使用此代码，我可以检查我的应用程序的版本信息：

```
[shell]: ./appSimulator --version      
App Simulator V2.3 
```

为了运行应用程序，我使用以下命令：

```
[shell]: ./appSimulator 
```

**我的疑问是：**
1.这是正确的实施方式吗？
2.有没有更好的方法来实现相同的？我可以实现以下目标：

```
[shell]: appSimulator --version 
```

代替

```
[shell]: ./appSimulator --version 
```

??

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:40:27.270

这应该足够了。./ 取决于您的路径，因此如果可以在您的路径中找到该程序，则不需要它。

# php - 命令行 cURL 到 PHP cURL

> ID：16182928
> 
> 赞同：2
> 
> 时间：2013-04-24T03:36:08.077
> 
> 标签：php, curl

我无法将命令行 cURL 转换为 php cURL。我已阅读有关此主题的其他链接，但仍然卡住，希望能提供任何帮助。

我正在尝试将网络表单中的联系信息自动放入在线 CRM 中。

API 信息： http: [//karmacrm.zendesk.com/entries/23648323-Contacts](http://karmacrm.zendesk.com/entries/23648323-Contacts)

我的代码：

```
$header = array('contact[first_name]=aaaaaaa','API-KEY: XXXXXXXXX');
$pageurl = "https://app.karmacrm.com/api/v2/contacts.json";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $pageurl);
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
curl_setopt($ch, CURLOPT_USERPWD, 'mXXXX@gmail.com:7iNXXXXXXXXXX');
curl_setopt($ch, CURLOPT_HEADER, TRUE); // -i
curl_setopt($ch, CURLOPT_VERBOSE, TRUE); // -v
curl_setopt($ch, CURLOPT_CUSTOMEREQUEST, "POST"); //-X
curl_setopt($ch, CURLOPT_BINARYTRANSFER, FALSE); // --data-binary, -d
$output = curl_exec($ch); 
curl_close($ch);
echo $output; 
```

响应：

```
HTTP/1.1 401 Unauthorized
Content-Type: application/json; charset=utf-8 
Transfer-Encoding: chunked 
Connection: keep-alive 
Status: 401 
X-Powered-By: Phusion Passenger (mod_rails/mod_rack) 3.0.11 
Strict-Transport-Security: max-age=31536000 
X-UA-Compatible: IE=Edge,chrome=1 
Cache-Control: no-cache, private 
X-Request-Id: 8d9397e1c2d43580db7XXXXXXXXXXXX 
X-Runtime: 0.004153 
Date: Wed, 24 Apr 2013 03:14:27 GMT 
X-Rack-Cache: miss 
Server: nginx/1.2.3 + Phusion Passenger 3.0.11 (mod_rails/mod_rack)

{"error":"You need to sign in or sign up before continuing."}1 
```

感谢您的帮助，我很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T03:46:54.157

您将 POST 值作为 HTTP 标头传递，这是不一样的。

用这个：

```
$data = array('contact[first_name]' => 'aaaaaaa', 'api_token' => 'XXXXXXXXX');
curl_setopt ($ch, CURLOPT_POST, true);
curl_setopt ($ch, CURLOPT_POSTFIELDS, $data); 
```

并删除该`CURLOPT_HTTPHEADER`选项。

顺便说一句：链接的 API 描述没有说明向 API 发送登录详细信息 - 只有 API 令牌（这对于 API 来说很常见）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T03:57:26.273

例子 ：

```
$url = 'link_to_api';
$params = array('username'=>'admin','password'=>'passw0rd');

    public function call_ws_post($url = '', $params = array()){
    $service_url = $url;
    $curl = curl_init($service_url);
    $curl_post_data = $params;
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($curl, CURLOPT_POST, true);
    curl_setopt($curl, CURLOPT_POSTFIELDS, $curl_post_data);
    $curl_response = curl_exec($curl);
    if ($curl_response === false) {
        $info = curl_getinfo($curl);
        curl_close($curl);
        die('error occured during curl exec. Additional info: ' . var_export($info));
    }
    curl_close($curl);
    $decoded = json_decode($curl_response);
    if (isset($decoded->response->status) && $decoded->response->status == 'ERROR') {
        die('error occured: ' . $decoded->response->errormessage);
    }
    return $decoded;
} 
```

# iphone - 过滤文件的 NSArray？

> ID：16182930
> 
> 赞同：0
> 
> 时间：2013-04-24T03:36:28.317
> 
> 标签：iphone, ios, objective-c, cocoa-touch, nspredicate

给定 Documents 目录中的以下文件-

```
Animals/Birds/file1.xyz
Animals/Birds/file2.xyz
Animals/Cats/file1.xyz
Cars/Ford/file1.xyz
Photos/MyAlbums/file1.xyz 
```

鉴于我们对这些文件有一个`NSArray`of `NSURLs`，是否可以使用 an`NSPredicate`按路径或路径/子路径过滤数组？例如

*   层次结构第一级中所有事物的唯一名称（动物、汽车、照片）
*   第二级中所有事物的唯一名称（鸟、猫）
*   Animals 目录中的文件 -- (/Animals)
*   Cats 目录中的文件 -- (/Animals/Cats)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T04:16:55.077

由于这些是实际 Documents 目录中的实际文件 URL，为什么不使用 NSFileManager`contentsOfDirectoryAtURL:`呢？它直接回答了您提出的问题（“Cats 目录中的文件”）。

或者，为了获得更多功能，请使用 NSDirectoryEnumerator 循环浏览文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T04:26:59.873

如果你真的想过滤一个 NSURL 数组，你可以这样做：

```
- (NSArray *)filteredArray:(NSArray *)originalArray withSubpath:(NSString *)subpath {
    NSPredicate *predicate = [NSPredicate predicateWithBlock:^BOOL(id evaluatedObject, NSDictionary *bindings) {
        NSURL *url = (NSURL *)evaluatedObject;
        NSRange range = [[url path] rangeOfString:subpath];
        return (range.location == 0);
    }];
    return [originalArray filteredArrayUsingPredicate:predicate];
} 
```

这是我测试它的方法：

```
NSArray *urls = @[[NSURL URLWithString:@"Animals/Birds/file1.xyz"],
                  [NSURL URLWithString:@"Animals/Birds/file2.xyz"],
                  [NSURL URLWithString:@"Animals/Cats/file1.xyz"],
                  [NSURL URLWithString:@"Cars/Ford/file1.xyz"]];

NSLog(@"Before: %@", urls);
urls = [self filteredArray:urls withSubpath:@"Animals/Birds"];
NSLog(@"After: %@", urls); 
```

输出日志是：

```
Before: (
    "Animals/Birds/file1.xyz",
    "Animals/Birds/file2.xyz",
    "Animals/Cats/file1.xyz",
    "Cars/Ford/file1.xyz"
)
After: (
    "Animals/Birds/file1.xyz",
    "Animals/Birds/file2.xyz"
) 
```

**注意**：它匹配子字符串，因此在这种情况下它不会匹配“/Animals”，因为前导斜杠（除非数组和子字符串都包含“/”）。

# objective-c - iOS: JSON Parsing Separated by Comma

> ID：16182931
> 
> 赞同：0
> 
> 时间：2013-04-24T03:36:37.703
> 
> 标签：objective-c, json, parsing, nsdictionary

Below is the code to get an NSDictionary from Google Places AutoComplete API:

```
(GooglePlacesAutocompletePlace *)placeFromDictionary:(NSDictionary *)placeDictionary 
{
    GooglePlacesAutocompletePlace *place = [[self alloc] init];
    place.name = [placeDictionary objectForKey:@"description"];
    return place;
} 
```

The code above stores the following in place.name:

```
"Name: Apple Store Palo Alto, University Avenue, Palo Alto, CA, United States" 
```

The results appear separated by Comma. What's the best way to remove the the name of the Country before storing it in place.name. I would like to only display the address up to the State.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T04:56:02.213

You can use rangeOfString:options:range with the option NSBackwardsSearch to find that last comma:

```
 NSString *s = @"Name: Apple Store Palo Alto, University Avenue, Palo Alto, CA, United States";
    NSRange lastCommaRange = [s rangeOfString:@"," options:NSBackwardsSearch range:NSMakeRange(0, s.length)];
    NSString *noCountryString = [s substringToIndex:lastCommaRange.location];
    NSLog(@"%@",noCountryString); 
```

# java - 测试 Web Service 是否处于活动状态（关闭或打开）的方法 - Client-Side Axis

> ID：16182932
> 
> 赞同：0
> 
> 时间：2013-04-24T03:36:38.023
> 
> 标签：java, web-services, jakarta-ee, web-applications, axis

我需要一个方法来返回**Web Service 是 active 还是 inactive**。换句话说，无论它是打开还是关闭。有人知道吗？我尝试进行测试（下面的代码）以在具有访问密码、用户：alpha 和密码：123 的 Web 服务上获取此方法。但是，它返回“连接被拒绝：连接”任何人都知道此异常的解决方案?

**注意：**我的应用程序需要的是一种方法，而不是像 SoapUI 这样的工具。

**错误：连接被拒绝：连接**

```
import javax.xml.namespace.QName;
import javax.xml.rpc.ServiceException;
import org.apache.axis.client.Call;
import org.apache.axis.client.Service;

public class TestWebService {

public static void main(String... agrs) {
     String endPoint = "http://www.example.org/MyFirstWSDLFile/MyFirst";
     Service service = new Service();
     try {
       Call call = (Call) service.createCall();
       call.setUseSOAPAction(true);
       call.setSOAPActionURI("http://sap.com/xi/WebService/soap1.1");
       call.setEncodingStyle(null);
       call.setProperty(org.apache.axis.client.Call.SEND_TYPE_ATTR, Boolean.FALSE);
       call.setProperty(org.apache.axis.AxisEngine.PROP_DOMULTIREFS, Boolean.FALSE);
       call.setSOAPVersion(org.apache.axis.soap.SOAPConstants.SOAP11_CONSTANTS);
       call.setOperationName(new javax.xml.namespace.QName("http://www.example.org/MyFirstWSDLFile/", "MyFirst"));
       call.setUsername("alfa");
       call.setPassword("123");              
       call.setTargetEndpointAddress(endPoint);

       java.lang.Object _resp = call.invoke(new Object[0]);

     } catch (Exception e) {
            e.printStackTrace();
     }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:35:41.530

您需要提供适当的异常处理。

当您尝试从客户端连接服务器但服务器已关闭时，您会收到“java.net.ConnectException”。

捕获此异常并返回适当的响应，表明 Web 服务此时已关闭。

# c# - winform 用户控件上标签的数据绑定

> ID：16182934
> 
> 赞同：0
> 
> 时间：2013-04-24T03:36:48.913
> 
> 标签：c#, vb.net, winforms, data-binding, user-controls

我正在为一个包含两个标签的 winform 应用程序创建一个用户控件，一个作为标题，另一个需要通过`Me.usercontrol1.databindings.add()`. 我是用户控件设计的新手，所以我在互联网上搜索以找到如何为我的控件制作数据绑定。我意识到我需要使用`ControlBindingsCollection`，但我不知道具体如何。

我找到了以下代码并添加到我的用户控件中：

```
Private bindingContext_ As BindingContext
Private dataBindings_ As ControlBindingsCollection
Public Overrides Property BindingContext() As BindingContext
    Get
        If bindingContext_ Is Nothing Then
            bindingContext_ = New BindingContext()
        End If
        Return bindingContext_
    End Get
    Set(ByVal value As BindingContext)
        bindingContext_ = value
    End Set
End Property
<DesignerSerializationVisibility(DesignerSerializationVisibility.Content)> _
Public Overloads ReadOnly Property DataBindings() As ControlBindingsCollection
    Get
        If dataBindings_ Is Nothing Then
            dataBindings_ = New ControlBindingsCollection(Me)
        End If
        Return dataBindings_
    End Get
End Property 
```

现在我可以设置`usercontrol1.databindings`参数，但显然缺少一些东西，因为我需要将此绑定中的单个返回值连接到`label2.Text`我的用户控件中，但我不知道如何。

有没有人帮我解决我的问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:26:57.097

我认为您不需要问题中的代码来完成这项工作。

尝试在 UserControl 中创建一个使用第二个标签的属性：

```
Property LabelData As String
  Get
    Return Label2.Text
  End Get
  Set(value As String)
    Label2.Text = value
  End Set
End Property 
```

然后您的数据绑定只是映射到该属性：

```
myUC.DataBindings.Add("LabelData", testObject, "Text", False, _
                      DataSourceUpdateMode.OnPropertyChanged) 
```

testObject 只是一个简单的类对象，在本例中具有 Text 属性，它实现了[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)接口。

# javascript - 在调整窗口大小之前，响应式 Highcharts 无法正确调整大小

> ID：16182935
> 
> 赞同：55
> 
> 时间：2013-04-24T03:36:56.457
> 
> 标签：javascript, css, highcharts, zurb-foundation, dynamic-resizing

我在 Zurb 的 Foundation 框架中使用 Highcharts 进行类项目。我在一个部分选项卡中有三个图表。一个在 12 列 div 内，另外两个在 6 列 div 内的同一行。

当页面加载时，特色图表不会占用 12 列的可用宽度，两个较小的图表会溢出它们的 6 列。但是，当调整窗口大小或我尝试使用 Inspect 元素进行调查时，图表会立即捕捉到正确的尺寸。此行为发生在 Chrome、FF 和 IE 中。

我意识到我可以设置一个特定的宽度，但我真的很想利用 Foundation 并让它们保持响应。

我已经调整了 CSS 和 Highcharts 初始化，但我很难过。有没有其他人遇到过这个问题？谁能看到我错过了什么？

这是我的 HTML 的摘录：

```
<div class="row">
<div class="twelve columns">
    <!--begin tabs below--> 
    <div class="section-container tabs" data-section="tabs">
      <section>
        <p class="title" data-section-title><a href="#">Heart Disease</a></p>
        <div class="content" data-section-content id="heart">

            <div class="row feature-chart">
                <div class="large-12 columns">
                    <div id="heartTimeline-container">
                    <div id="heartTimeline"></div>
                    </div>
                </div> <!--close 12 columns-->
            </div> <!--close row-->
            <div class="row small-charts">
                <div class="large-6 columns">
                    <div id="heartDemo"></div>
                </div>
                <!--close 6-->
                <div class="large-6 columns">
                    <div id="heartStages"></div>
                </div>
                <!--close 6-->
            </div>
            <!--end row-->
        </div>
      </section>
   </div>
   </div>
   <!--end twelve columns--> 
```

这是Highcharts js：

```
$(function () {
    Highcharts.setOptions({
        colors: ['#1A1A1A', '#455D78', '#BDCCD4', '#999999', '#B3B3B3', '#F2F2F2']
    });
    $('#heartTimeline').highcharts({
        chart: {
            type: 'area'
        },
        title: {
            text: 'Heart Disease Death Rates in the U.S.from 1980-2010'
        },
        subtitle: {
            text: 'Source: <a href="http://www.mdch.state.mi.us/pha/osr/deaths/Heartdx.asp">'+ 
                        'Michigan Department of Community Health</a>'
        },
        xAxis: {
            labels: {
                formatter: function() {
                    return this.value; // clean, unformatted number for year
                }
            }
        },
        yAxis: {
            title: {
                text: 'Heart Disease Death Rate Per 100,000 People'
            },
            labels: {
                formatter: function() {
                    return this.value / 1 +'k';
                }
            }
        },
        tooltip: {
            pointFormat: '{series.name} produced <b>{point.y:,.0f}</b><br/>deaths per hundred thousand people in {point.x}'
        },
        plotOptions: {
            area: {
                pointStart: 1980,
                marker: {
                    enabled: false,
                    symbol: 'circle',
                    radius: 2,
                    states: {
                        hover: {
                            enabled: true
                        }
                    }
                }
            }
        },
        series: [{
            name: 'Heart Disease',
            data: [412.1, 397, 389, 388, 378, 375, 365.1, 355.9, 352.5, 332, 321.8, 313.8, 306.1, 309.9, 299.7, 296.3, 288.3, 280.4, 272.4, 267.8, 257.9, 247.8, 240.8, 232.3, 217, 211.1, 200.2, 190.9, 186.5, 180.1, 178.5]
        }, ]
    });
});
$(function () {
    $('#heartDemo').highcharts({
        chart: {
            zoomType: 'xy'
        },
        title: {
            text: 'Most Prevelant Causes and Effects of Heart Disease 2013'
        },
        subtitle: {
            text: 'Source: http://circ.ahajournals.org (The American Heart Association)'
        },
        xAxis: [{
            categories: ['Smoking', 'Obesity (BMI > 25 kg) ', 'Total cholesterol > 200 mg)', 'High Blood Pressure', 'Diabetes Mellitus', 'Prediabetes', 'Total Cardiovascular Disease', 'Stroke', 'Coronary Heart Disease', 'Heart Failure'],
            labels: {
                rotation: -90,
                align:'right'
            }
        }],
        yAxis: [{ // Primary yAxis
            labels: {
                formatter: function() {
                    return this.value +'%';
                },
                style: {
                    color: '#000000'
                }
            },
            title: {
                text: 'Men',
                style: {
                    color: '#BDCCD4'
                }
            },
            opposite: true

        }, { // Secondary yAxis
            gridLineWidth: 0,
            title: {
                text: 'Both Sexes',
                style: {
                    color: '#455D78'
                }
            },
            labels: {
                formatter: function() {
                    return this.value +' %';
                },
                style: {
                    color: '#4572A7'
                }
            }

        }, { // Tertiary yAxis
            gridLineWidth: 0,
            title: {
                text: 'Women',
                style: {
                    color: '#AA4643'
                }
            },
            labels: {
                formatter: function() {
                    return this.value +' %';
                },
                style: {
                    color: '#AA4643'
                }
            },
            opposite: true
        }],
        tooltip: {
            shared: true
        },
        legend: {
            layout: 'vertical',
            align: 'left',
            x: 120,
            verticalAlign: 'top',
            y: 80,
            floating: true,
            backgroundColor: '#FFFFFF'
        },
        series: [{
            name: 'Both Sexes',
            color: '#455D78',
            type: 'column',
            yAxis: 1,
            data: [19, 68.2, 43.4, 33, 8.3, 38.2, 35.3, 2.8, 6.4, 2.1],
            tooltip: {
                valueSuffix: ' %'
            }
        }, {
            name: 'Women',
            type: 'spline',
            color: '#AA4643',
            yAxis: 2,
            data: [16.7, 63.7, 44.9, 32.2, 7.9, 30.5, 34, 3, 5.1, 1.8],
            marker: {
                enabled: false
            },
            dashStyle: 'shortdot',
            tooltip: {
                valueSuffix: ' %'
            }
        }, {
            name: 'Men',
            color: '#BDCCD4',
            type: 'spline',
            data: [21.3, 72.9, 41.3, 33.6, 8.7, 46, 36.7, 2.6, 7.9, 2.5],
            tooltip: {
                valueSuffix: ' %'
            }
        }]
    });
});

$(function () {
    $('#heartStages').highcharts({
        chart: {
            type: 'column'
        },
        title: {
            text: 'Number of Deaths for Different Types of Heart Diseases in the U.S. for 2008'
        },
        subtitle: {
            text: 'Source: <a href="http://www.nhlbi.nih.gov/resources/docs/2012_ChartBook_508.pdf">'+ 
                'Morbitity & Mortality: 2012 Chart Book on Cardiovascular, Lung and Blood Disease</a>'
        },
        xAxis: {
            categories: [
                'Coronary Heart Disease',
                'Heart Attack',
                'Cardiomyopathy',
                'Stroke',
                'Atrial Fibrillation and Flutter',
                'Heart Failure',
                'Diseases of Pulmonary Circulation',
                'Pulmonary Embolism',
            ],
            labels: {
                rotation: -90,
                align:'right'
            }
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Heart Disease Diagnostic Category (thousands)'
            }
        },
        tooltip: {
            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                '<td style="padding:0"><b>{point.y:.1f} </b></td></tr>',
            footerFormat: '</table>',
            shared: true,
            useHTML: true
        },
        plotOptions: {
            column: {
                pointPadding: 0.2,
                borderWidth: 0
            }
        },
        series: [{
            name: 'Heart Disease Related Deaths for 2008',
            data: [405.309, 133.958, 23.932, 134.148, 15.383, 56.830, 12.927, 7.158]

        }]
    });
}); 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-08-15T14:11:27.467

我从另一个答案中得到了这个，所以[在这个问题中](https://stackoverflow.com/questions/16216722/highcharts-hidden-charts-dont-get-re-size-properly)给 thegreyspot 一些信任。

解决方案：`$(window).resize();`在加载图表后调用（或者当你用数据填充它时）

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-06-02T16:11:41.243

只需使用该`chart.reflow()`功能

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-04-24T13:54:26.210

请使用响应式高图查看这些示例：

[http://jsbin.com/anuqav/1/edit](http://jsbin.com/anuqav/1/edit)

[http://jsfiddle.net/2gtpA/show/](http://jsfiddle.net/2gtpA/show/)

```
<div id="container" style="width:100%;margin: 0 auto"></div> 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-10-19T12:12:13.143

这可能会有所帮助：

```
$(Highcharts.charts).each(function(i,chart){
    var height = chart.renderTo.clientHeight; 
    var width = chart.renderTo.clientWidth; 
    chart.setSize(width, height); 
  }); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-10-26T08:29:43.080

对我来说，它需要一些延迟并触发窗口调整大小。

```
window.setTimeout(function(){ $(window).trigger('resize'); }, 500); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-07-11T18:42:16.613

您可以添加一个事件侦听器，以便您的图表在每次重绘时调整大小：

```
mychart = new Highcharts.stockChart('div',   {
    chart: {
        events: {
            redraw: function(e) {
                mychart.reflow();
            }
        }
    }, 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-09-05T12:00:30.097

**在纯javascript中，单页调整多个图表窗口调整大小问题**

```
 window.onresize = function() {
    //- Remove empty charts if you are using multiple charts in single page 
    //- there may be empty charts
    Highcharts.charts = Highcharts.charts.filter(function(chart){
        return chart !== undefined;
    });

    Highcharts.charts.forEach(function(chart) {
        var height = chart.renderTo.chartHeight;
        //- If you want to preserve the actual height and only want to update 
        //- the width comment the above line.
        //- var height = chart.chartHeight; 
        var width = chart.renderTo.clientWidth;
        //- The third args is an animation set to true. 
        chart.setSize(width, height, true);
    });
}; 
```

**我们也需要这个 css 代码**

```
.highcharts-container {
    width: 100%;
}
.highcharts-container svg {
    width: 100%;
    display: flex;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-02-28T15:51:11.800

您可以将此代码用于示例

```
var chart;
$(function() {
  var newh = $("#container").height();
    $( window ).resize(function() {
    newh = $("#container").height();
    chart.redraw();
    chart.reflow();
  });
  chart = new Highcharts.Chart();
}) 
```

[http://jsfiddle.net/Behseini/qheh4w0n/](http://jsfiddle.net/Behseini/qheh4w0n/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-12-23T11:58:20.873

现在有点老话题了，但我在 IE8 上遇到了这个问题。在撰写本文时，当前的 IE 版本是 IE10，但我需要使我的网站与早期版本兼容。对我有用的解决方案是上述和其他人们谈论他们实施的解决方案的网站的组合。我进行了 settimeout 加上调整大小并刚刚为 IE8 执行，我希望这可以帮助像我这样试图找到解决方案几个小时的其他人。

您可能会发现只有**脚本**部分是您需要的唯一部分。

```
<!--[if IE 8]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <script>
    function timeout() {
        $(window).resize();
    }
    window.setTimeout(function() {
        timeout();
    },2000);
  </script>
  <style>
    .highcharts-container{width:100% !important; height:100% !important;}
  </style>
<![endif]--> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-06-23T18:50:56.547

只想添加另一个解决方案：

```
$('.chart').highcharts(options, function(chart) {
  setTimeout(function() {
    chart.reflow();
  });
}); 
```

它所做的是在渲染后将图表重排到下一帧。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-04-06T20:13:50.747

只有这对我有用

```
$(window).resize(function(){ 
    $scope.chartConfig.getChartObj().reflow() 
}); 
```

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2017-02-28T14:18:13.263

```
$(Highcharts.charts).each(function(i,chart){
    var height = chart.renderTo.clientHeight; 
    var width = chart.renderTo.clientWidth; 
    chart.setSize(width, height);
    }); 
```

这个对我有用

# python - matplotlib 中的 bbox_inches='tight' 错误

> ID：16182936
> 
> 赞同：4
> 
> 时间：2013-04-24T03:37:01.923
> 
> 标签：python, matplotlib, plot

我在 ipython 笔记本中使用以下代码将条形图另存为 .png 文件：
`plt.savefig(filename, bbox_inches='tight')`

它适用于我的计算机，我尝试在另一台计算机上运行脚本。但是，当我尝试在另一台机器上运行它时出现以下错误。

```
AssertionError
---> 119 plt.savefig(filename,bbox_inches='tight')

C:\Python27\lib\site-packages\matplotlib\pyplot.pyc in savefig(*args,**kwargs)
---> 472 self.canvas.print_figure(*args,**kwargs)

C:\Python27\lib\site-packages\matplotlib\figure.pyc in savefig(self,*args,**kwargs)
---> 1363 self.canvas.print_figure(*args,**kwargs)

C:\Python27\lib\site-packages\matplotlib\backend_bases.pyc
---> 2054 bbox_inches = self.figure.get_tightbbox(renderer)

C:\Python27\lib\site-packages\matplotlib\figure.pyc in get_tightbbox(self,renderer)
---> 1496 _bbox = Bbox.union([b for b in bb if b.width!=0 or b.height!=0])

C:\Python27\lib\site-packages\matplotlib\transforms.pyc in union(bboxes)
---> 714 assert(len(bboxes))

AssertionError: 
```

删除 bbox_inches='tight' 参数似乎可以解决错误并保存一个文件，但那里没有图片，只有一个完全空白的 .png 文件。

我已经确保我们的 python、matplotlib 和其他包的版本都是一样的。有没有人遇到过这个？我认为这可能是 matplotlib 中的一个错误，但这没有任何意义，因为它在我的计算机上运行良好，而且我们有相同的版本。有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T04:23:45.153

这通常意味着没有图形被渲染到画布上。这也解释了为什么，当您删除参数时，没有相应的图像！例如：

```
import pylab
pylab.savefig('test', bbox_inches='tight') 
```

产生类似的错误：

```
 pylab.savefig('test', bbox_inches='tight')
  File "/usr/lib/pymodules/python2.7/matplotlib/pyplot.py", line 471, in savefig
    return fig.savefig(*args, **kwargs)
  File "/usr/lib/pymodules/python2.7/matplotlib/figure.py", line 1185, in savefig
    self.canvas.print_figure(*args, **kwargs)
  File "/usr/lib/pymodules/python2.7/matplotlib/backend_bases.py", line 1985, in print_figure
    bbox_inches = self.figure.get_tightbbox(renderer)
  File "/usr/lib/pymodules/python2.7/matplotlib/figure.py", line 1326, in get_tightbbox
    _bbox = Bbox.union([b for b in bb if b.width!=0 or b.height!=0])
  File "/usr/lib/pymodules/python2.7/matplotlib/transforms.py", line 675, in union
    assert(len(bboxes)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-11T16:05:20.457

我有同样的错误信息。我通过gui显示图像然后保存它，这产生了错误。我通过首先保存它然后才显示它来解决它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-10T02:46:33.250

内联运行 ipython 时产生错误。

```
ipython.exe notebook --pylab=inline 
```

要解决此问题，只需删除 '=inline'。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-23T23:07:46.517

在我自己的代码中，我通过调用`savefig`图形而不是从 pyplot ( `plt.savefig()`) 来“解决”这个问题，即：

```
fig.savefig(filename, bbox_inches='tight') 
```

`fig`的实例在哪里`matplotlib.figure.Figure`。这对我来说不是问题，因为`ipython`它源于尝试在一个长循环中更新和绘制图形。

# nat - gethostbyaddr() 应该在 NAT 环境中工作吗？

> ID：16182939
> 
> 赞同：3
> 
> 时间：2013-04-24T03:37:13.773
> 
> 标签：nat, gethostbyaddr

如果我让 gethostbyaddr() 查找 NAT 生成的 IP 地址，例如 192.168.0.4，我应该期望它工作吗？

背景：我正在家里对一些用于网络环境的控制代码进行测试。有时，此代码会调用 gethostbyaddr() 来获取发送消息的机器的详细信息。该地址通常是本地机器的地址，有时甚至是当前机器本身的地址。通常，这不会导致任何问题。然而，我已经用 Netgear 路由器替换了我的旧 Netcomm ADSL 路由器，并发现现在在本地 NAT 环境中对机器的 gethostbyaddr() 调用 a) 在 30 秒后超时，b) 返回 NULL 以指示错误。实验性地回到我的旧路由器，我发现同样的调用也失败了，返回 NULL，但立即返回。代码可以处理错误返回（这就是为什么我以前从未注意到这一点），但新的 30 秒超时是一个巨大的麻烦。显然，有很多方法可以解决这个问题，但大多数方法都涉及捕获地址为 192.168 地址的情况并避免调用 gethostbyaddr()。我的问题是，在 NAT 环境中调用 gethostbyaddr() 是否总是失败，或者在某些情况下它会起作用？（在这种情况下，我不想最终避开它们。）或者只是我没有正确设置我的路由器？顺便说一句，我在 OS X 上运行它，并在 Snow Leopard 和 Lion 上看到相同的行为。) 或者只是我没有正确设置我的路由器？顺便说一句，我在 OS X 上运行它，并在 Snow Leopard 和 Lion 上看到相同的行为。) 或者只是我没有正确设置我的路由器？顺便说一句，我在 OS X 上运行它，并在 Snow Leopard 和 Lion 上看到相同的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:57:46.230

除非您设置私有 dns 或将它们添加到主机文件中，否则它们将不起作用。Sendmail 提供了一些很好的文档：

[http://www.sendmail.com/sm/open_source/tips/private_dns/](http://www.sendmail.com/sm/open_source/tips/private_dns/)

最终到达根名称服务器的调用会成为黑洞。

一些路由器可能已经提供反向 DNS。您不需要每个主机都在那里，只需对地址空间具有权威性，这样请求就不会被转发。

# batch-file - 如何将批处理文件中 find 命令的输出捕获到变量中

> ID：16182940
> 
> 赞同：0
> 
> 时间：2013-04-24T03:37:16.550
> 
> 标签：batch-file

```
FOR /F %%G IN ( 'find /i "%Today%" ^< db_backup_%Today%.log') DO (        
   set T=%%G
)    
echo %T% 
```

在这里，今天是今天时间戳 -`yyyymmdd`格式。`db_backup_%Today%.log`我正在我已经生成的名为 file 的文件中搜索此匹配项。

我想将`2013-04-24-07.26.18`find 命令的输出（例如：）保存到变量 T。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:34:03.813

试试这个（见[@foxidrive](https://stackoverflow.com/users/2299431/foxidrive)的评论）：

```
FOR /F "delims=" %%G IN ('find /i "%Today%" ^< db_backup_%Today%.log') DO (        
   set "T=%%G"
)    
echo %T% 
```

# javascript - 将点击侦听器添加到我的 javascript 标签栏的最佳方法是什么？

> ID：16182941
> 
> 赞同：0
> 
> 时间：2013-04-24T03:37:30.670
> 
> 标签：javascript, javascript-events

我打算在 JavaScript 中实现一个标签栏模块。

我想在每次加载页面时创建一个**TabBar ，然后将两个****Tab**放入其中。

**问题是，将点击事件**添加到我的标签的最佳方式是什么？

这是我的代码：

```
 // A tab in tab bar.
 Tab = function(titleID, contentID) {
   this.title = document.getElementById(titleID);
   this.content = document.getElementById(contentID);
 }

 Tab.prototype.show = function() {
   this.title.className = "title-bg-active";
 }

 Tab.prototype.hide = function() {
   this.title.className = "";
 }

 // Tab bar contains several tabs.
 TabBar = function() {
   this.tabs = [];
 }

 TabBar.prototype.add = function(tab) {
   // TODO add click listener to tab
   this.tabs.push(tab);
 }

 TabBar.prototype.open = function(tab) {
   for(var i = 0; i < this.tabs.length; i++) {
     if(tab.title == this.tabs[i].title) {
       tab.show();
     }else{
       tab.hide();
     }
   }
 }

 window.onload = function(){
   tb = new TabBar();
   tb.add(new Tab("famous", "famous-content"));
   tb.add(new Tab("recently", "recently-content"));
 } 
```

我真的不想使用 jQuery 或任何其他库，谢谢！

**编辑：**
我还需要通知其他选项卡关闭，我该怎么做`onclick`？我认为标签应该持有 a `tabbar`，但是如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T03:47:39.557

在您的选项卡构造函数中，添加`this.title.onclick = this.onclick`，然后在原型中定义 onclick：

```
Tab.prototype.onclick = function(event) {
    // handle click
    // 'this' will hold the clicked element
} 
```

* * *

考虑到您的更新，这可能有效：

```
TabBar.prototype.add = function(tab) {
    var bar = this;
    tab.title.onclick = (function(clickedTab){
        return function() {
            // Hide all tabs
            for(var i=0; i<bar.tabs.length; i++) {
                bar.tabs[i].hide();
            }

            // Show clicked tab
            clickedTab.show();
        }
    }(tab));
    this.tabs.push(tab);
} 
```

# asp.net - 将应用程序升级到 ASP.NET 4 时如何自动更新 IIS 处理程序映射

> ID：16182945
> 
> 赞同：0
> 
> 时间：2013-04-24T03:37:53.993
> 
> 标签：asp.net, iis

我最近将几个应用程序从 IIS 6.0 迁移到 IIS 7.5。我们混合了 ASP.NET 2 和 ASP.NET 4 应用程序的应用程序。它们都在目标 IIS 7.5 环境中运行良好。

我的一名团队成员随后将应用程序从 ASP.NET 2.0 升级到 ASP.NET 4。应用程序不再工作，因为 IIS 中的处理程序映射仍配置为将 .aspx 文件传递​​给 ASP.NET 2 处理器。我可以手动进入并开始调整处理程序映射，但这似乎不是正确的做法。

是否有我应该在 IIS 7.5 服务器上或作为我的应用程序部署的一部分使用的进程，它会自动将处理程序映射设置为正确的 ASP、NET v4 应用程序？（并且，为了完整起见，我已将应用程序配置为在 .NET V4 的经典模式下使用应用程序池）

顺便说一句，迁移时已经是 .NET V4 的应用程序已经具有正确的 V4 处理程序映射。

谢谢。我整天都在寻找...

# google-apps-script - 如何找到范围的最后一行？

> ID：16182950
> 
> 赞同：3
> 
> 时间：2013-04-24T03:38:17.263
> 
> 标签：google-apps-script, google-sheets

当我使用 sheet.getLastRow(); 它返回有内容的最后一行。

但是当我使用 range.getLastRow(); 它返回范围的最后一行并且不考虑其中的内容。

谁能建议一种方法来找到该范围内最后一个被占用的单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:03:35.340

您可以在列表中创建一个循环，作为 getRange().getValues() 的返回，检查列表中的当前位置是否为空。

```
function getLastRowWithTextInARange() {
  var sheet = SpreadsheetApp.getActiveSheet();
  var range = sheet.getRange(1,1,5,1).getValues();

  for (var i=0; i<range.length; i++){
    if (range[i][0] == ""){
      Logger.log("Last row with content in the range.");
      break;
    } else {
      Logger.log(range[i][0]);
    }
  }  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:16:17.580

[我在上](https://stackoverflow.com/questions/15786719/pick-from-random-list-and-decrement-result-for-next-pick/15818544#15818544)一篇文章中给出了一段代码，它返回填充的范围（一列）。您可以按如下方式对其进行测试：

```
function readRows() {
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Sheet2');

  var values = getPopulatedRange(sheet,"B").getValues(); // assuming Col B is your range
  var lastCell = "B" + values.length;
  var lastCellValue = values.reverse()[0];

  Logger.log(values); // gives all values upto the final populated in your range
  Logger.log(lastCell); // shows the last cell in notation like: B8
  Logger.log(lastCellValue); // shows the last populated cell value

};

function getPopulatedRange(ss,column) { //Returns the range in a single column from row 1 to the last populated cell in that column
  var lastRow = ss.getMaxRows();
  var values = ss.getRange(column + "1:" + column + lastRow).getValues();
  for (; values[lastRow - 1] == "" && lastRow > 0; lastRow--) {}
  return ss.getRange(column  + "1:" + column + lastRow);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-27T21:58:00.923

我在尝试为自己寻找解决方案时偶然发现了这一点。不幸的是，提供的答案并没有提供基于我认为 OP 想要的解决方案。由于我正在寻找的东西是相似的，所以我继续将一些东西放在一起。它可能不是最好的解决方案，但它解决了 OP 和我自己的担忧。

**我的假设如下：**

*   您想要任何给定范围的最后一行有内容。
*   提供的范围可以有多个列。

**建议的解决方案：**

```
function getLastRowInRange(ss, columnsArr) { //Use numbers for columns in array
  var arr = [];

  //Find last row in each column
  for(var i in columnsArr){
    let lastRN = ss.getRange(ss.getLastRow() + 1,columnsArr[i]).getNextDataCell(SpreadsheetApp.Direction.UP).getRow();
    arr.push([columnsArr,lastRN])
  }

  //Sort and return highest count
  arr.sort(function(a,b){return b[1]-a[1]})
  return arr[0][1];

} 
```

**使用示例：**

```
 var sh = SpreadsheetApp.getActiveSheet();  
  var tss = SpreadsheetApp.getActive();
  var namedSht = tss.getSheetByName('Name of Sheet');
  var columnsArr = [1,2,4]; //Columns A, B and D

  getLastRowInRange(namedSht, columnsArr); 
```

**这个怎么运作：**

确定每列内容的最后一行，然后将其放入排序的数组中。数组中的第一个条目应该是最高计数值并被返回。

# c++ - 绝对奇怪的编译器行为 - 构造函数没有被调用。

> ID：16182951
> 
> 赞同：1
> 
> 时间：2013-04-24T03:38:25.433
> 
> 标签：c++, qt, constructor, declaration

我有一个名为的类[`NitroShare::FileServer`](http://bazaar.launchpad.net/~george-edison55/nitroshare/nitroshare0.3/view/head:/libnitrosharenet/include/nitrosharenet/fileserver.h)，它有两个构造函数：

```
FileServer(QObject * parent = NULL);
FileServer(const Certificate & certificate, QObject * parent = NULL); 
```

第一个构造函数的实现在[这里](http://bazaar.launchpad.net/~george-edison55/nitroshare/nitroshare0.3/view/head:/libnitrosharenet/src/server/fileserver.cpp)（第 29 行）：

```
FileServer::FileServer(QObject * parent)
    : QObject(parent), d(new FileServerPrivate(this))
{
    qDebug("Constructor invoked!");
} 
```

这个类是另一个名为的类的成员[`NitroShareClient`](http://bazaar.launchpad.net/~george-edison55/nitroshare/nitroshare0.3/view/head:/nitroshare-client/src/nitroshareclient.h)：

```
NitroShare::FileServer server; 
```

因此，可以假设在`NitroShareClient`创建类的实例时会调用上面的第一个构造函数。然而，事实并非如此。因此，程序崩溃。

这就是事情从令人沮丧到真正奇怪的地方：如果我将上面第一行中的构造函数声明替换为：

```
FileServer(QObject * parent = NULL) : d(NULL) { qDebug("Constructor invoked!"); } 
```

...构造函数*实际上被调用了！*相同的签名。相同的参数。一样的身体。唯一的区别是函数定义的位置。

谁能解释这里发生了什么？如果有帮助，我在 Linux 上使用 GCC 4.7。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T04:53:34.447

从技术上讲，应归功于[Mark B](https://stackoverflow.com/questions/16182951/absolutely-bizarre-compiler-behavior-constructor-not-getting-called#comment23134343_16182951)和[jogojapan](https://stackoverflow.com/questions/16182951/absolutely-bizarre-compiler-behavior-constructor-not-getting-called#comment23134843_16182951)指出问题。编译器将构造函数用于[此处](http://bazaar.launchpad.net/~george-edison55/nitroshare/nitroshare0.3/view/head:/libnitroshare/src/file/fileserver.cpp)`FileServer`发现的另一个类，违反了单一定义规则。

# c# - 将匿名类型列表转换为动态对象列表

> ID：16182952
> 
> 赞同：20
> 
> 时间：2013-04-24T03:38:37.057
> 
> 标签：c#, .net-4.0, anonymous-types

为什么我不能将 a`List<AnonymousObject>`转换为 a `List<dynamic>`？我有以下代码：

```
var datasource = someList.Select(o => new { x = o.A, y = o.B });
dgvSomeGridView.DataSource = datasource.ToList();
dgvSomeGridView.DataBind(); 
```

然后我使用`GridView.DataSource`以下代码访问：

```
var ds = ((List<dynamic>)dgvSomeGridView.DataSource);
.... 
```

但它在我将它投射到的行上抛出一个错误`List<dynamic>`，它说：

> 无法将类型的对象`System.Collections.Generic.List'1[<>f__AnonymousType0'8[System.Int32,System.String]]`转换为类型`System.Collections.Generic.List'1[System.Object]`。

为什么我不能将匿名类型的列表强制转换为 a `dynamic`，或者像错误所说的那样对`object`类型进行强制转换？我该如何解决这个问题？

我的代码是 C#，框架 4.0，在 VS2010 Pro 中构建，平台是 ASP.NET。

请帮助，提前谢谢。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-24T03:50:20.710

由于`List<T>`是不变的，而不是协变的，因此您必须将其*转换*为`IEnumerable<dynamic>`支持协变的：

```
var ds = ((IEnumerable<dynamic>)dgvSomeGridView.DataSource).ToList(); 
```

[有关协变](http://msdn.microsoft.com/en-us/library/dd799517.aspx)的更多信息

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-24T03:52:59.303

首先，使用泛型进行投射不是那样工作的。此演员表无效：

```
List<string> source = GetStrings();
List<object> source2 = (List<object>) source; 
```

原因是 List 不是协变的。如果是这样，`source2.Add(source2);`当它应该只有字符串时，你可以突然地 source1 包含自己。

其次，[匿名类型](http://msdn.microsoft.com/en-us/library/vstudio/bb397696.aspx)只是编译器声明的具有只读属性和值相等语义的类。如果您创建了一个具有只读属性和值相等语义的类，则您的类将与匿名类型相同，除了您的类型将具有开发人员确定的名称，而匿名类型具有编译器确定的名称。Anon 类型并不特殊。

第三， [动态](http://msdn.microsoft.com/en-us/library/vstudio/dd264741.aspx)变量是绕过编译器类型检查的一种方法。他们不会绕过运行时类型检查。您可以使用 c# 强制转换语法将类型显式转换为动态...注意：这不是强制转换！您不能将运行时强制转换为运行时不存在的类型。

> 但是，包含动态类型表达式的操作不会被编译器解析或类型检查。编译器将有关操作的信息打包在一起，这些信息稍后用于在运行时评估操作。作为该过程的一部分，动态类型的变量被编译为对象类型的变量。因此，动态类型只存在于编译时，而不是运行时。

```
static void convertToDynamic()
{
    dynamic d;
    int i = 20;
    d = (dynamic)i;
    Console.WriteLine(d);

    string s = "Example string.";
    d = (dynamic)s;
    Console.WriteLine(d);

    DateTime dt = DateTime.Today;
    d = (dynamic)dt;
    Console.WriteLine(d);

}
// Results: 
// 20 
// Example string. 
// 2/17/2009 9:12:00 AM 
```

最后，如果您仍然想要一个`List<dynamic>`，请执行以下操作：

```
var anonList = GetAnonList();
List<dynamic> dynamicList = anonList.Select(x => (dynamic)x).ToList(); 
```

但是你可以很容易地做到这一点：

```
var anonList = GetAnonList();
List<object> objectList = anonList.Cast<object>().ToList(); 
```

# java - 异常 java.lang.NoClassDefFoundError: com.google.android.gms.common.AccountPicker

> ID：16182957
> 
> 赞同：4
> 
> 时间：2013-04-24T03:39:14.317
> 
> 标签：java, android, google-drive-api

我正在尝试快速入门：从 Google Drive SDK[在 Android 上运行 Drive 应用程序。](https://developers.google.com/drive/quickstart-android)我遵循了漏洞过程，但是当我在我的设备（真实设备）中运行该应用程序时，它会崩溃并出现以下异常：

```
java.lang.NoClassDefFoundError: com.google.android.gms.common.AccountPicker 
```

最后，它在这段代码的第二行指向我的源代码：

```
credential = GoogleAccountCredential.usingOAuth2(this, DriveScopes.DRIVE);
startActivityForResult(credential.newChooseAccountIntent(), REQUEST_ACCOUNT_PICKER); // <- This one 
```

我的困惑来自于我已经完成了文章指示我做的所有事情：

*   我已经生成了证书

*   启用 API（使用证书指纹）

*   在 Eclipse 中创建并配置 android 项目

    *   使用 Google 插件添加 API
*   复制样本（我实际上做了复制粘贴）

    *   当然，我更正了包名和类名

    *   我还添加了应用程序的权限，甚至是其他权限参考帐户

我什至添加了**Google Play Android Developer API**及其权限。

但是当我运行该应用程序时，它仍然崩溃。所有的图书馆似乎都很好。我想知道它是否特定于 Android APIv17，因为我的设备是 APIv10 和 APIv15（我还添加了支持库）。

请帮忙。请原谅我的英语不好。谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-21T17:52:53.130

我对 jtwitter.jar 库有同样的问题。如果您正在运行 Android Studio，则必须进行清理和构建（AS 目前还没有真正做到这一点）。

转到您的命令行，导航到您的项目根目录并执行`./gradlew clean`

**在你这样做之前**

确保您的 .jar 文件已添加到您的`/libs`文件夹中（如果您使用的是 build 17 或更高版本，则必须是`libs`，而不是`lib`）。右键单击并选择*添加为库...*

然后你将不得不编辑你的 build.gradle 文件（位于你的`/src`目录中）。

它应该看起来像这样：

```
buildscript {
    repositories {
        maven { url 'http://repo1.maven.org/maven2' }
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:0.4'
    }
}
apply plugin: 'android'

dependencies {
    compile files('libs/android-support-v4.jar')
}

android {
    compileSdkVersion 17
    buildToolsVersion "17.0.0"

    defaultConfig {
        minSdkVersion 5
        targetSdkVersion 16
    }
} 
```

将块更改`dependencies`为如下所示：

```
dependencies {
    compile files('libs/android-support-v4.jar')
    compile files('[path/to/.jar]')
} 
```

然后您可以构建并运行您的项目。

# c++ - 如何比较两个 std::set？

> ID：16182958
> 
> 赞同：48
> 
> 时间：2013-04-24T03:39:24.843
> 
> 标签：c++, set, std

我做了两个这样的比较`std::set`

```
#include <cstdlib>
#include <cstdio>
using namespace std;

#include <vector>
#include <set>

int main(int argc, char** argv)
{
    int myints1[]= {10,20,30,40,50};
    int myints2[]= {50,40,30,20,10};
    std::set<int> s1 (myints1,myints1+5);
    std::set<int> s2(myints2,myints2+5);
    if(s1==s2){
        printf("sets: true");
    }else printf("sets: false");
    std::set<int>::iterator it2=s2.begin();
    for(std::set<int>::iterator it1=s1.begin();it1!=s1.end();it1++){
                printf("\ns1: %d  s2: %d",*it1,*it2);
        it2++;
    }
} 
```

输出：

```
sets: true
s1: 10  s2: 10
s1: 20  s2: 20
s1: 30  s2: 30
s1: 40  s2: 40
s1: 50  s2: 50 
```

**问题：**

这是正确的方法吗？还是有任何其他（特殊）方法来比较两组？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-04-24T04:06:56.913

是的，`operator==`为所有标准容器正确定义（无序容器**除外**- 基于标准的 23.2.5.2），并且通常会进行字典比较。例如，请参见[此处](http://en.cppreference.com/w/cpp/container/set/operator_cmp)。相关报价：

> 检查 lhs 和 rhs 的内容是否相等，即 lhs.size() == rhs.size() 和 lhs 中的每个元素是否在 rhs 中的相同位置有相同的元素。

由于`std::set`是有序容器，因此任何具有相同大小和相同元素的集合（假设比较器相同）都必须将它们放在相同的位置，因此将比较相等。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-09-25T14:14:20.087

C++ 标准库 header 中有几个集合操作`<algorithm>`。

[`std::set_difference`](http://en.cppreference.com/w/cpp/algorithm/set_difference)给出那些在集合 1 但不在集合 2 中的元素.

[`std::set_intersection`](http://en.cppreference.com/w/cpp/algorithm/set_intersection)给出两个集合中的元素.

[`std::set_symmetric_difference`](http://en.cppreference.com/w/cpp/algorithm/set_symmetric_difference)给出出现在其中一组但不是同时出现的那些元素.

[`std::set_union`](http://en.cppreference.com/w/cpp/algorithm/set_union)给出在集合 1 或集合 2 中的那些元素.

上述算法也可以应用于除 之外的 STL 容器`std::set`，但容器必须先排序（`std::set`默认已排序）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-22T04:31:39.687

另一种方法是：

```
template<typename Set>

bool set_compare(Set const &lhs, Set const &rhs){
    return lhs.size() == rhs.size() 
        && equal(lhs.begin(), lhs.end(), rhs.begin());
} 
```

灵感来自[这里](https://stackoverflow.com/questions/8473009/how-to-efficiently-compare-two-maps-of-strings-in-c)的优雅答案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-11-06T12:23:37.877

**C++11`==`标准`std::set`**

其他[人提到](https://stackoverflow.com/a/12648810/895245)确实`operator==`比较了`std::set`内容和作品，但这里引用了[C++11 N3337 标准草案](https://github.com/cplusplus/draft/raw/master/papers/n3337.pdf)，我相信这暗示了这一点。

`std::vector`引用与我在以下位置详细解释的引用完全相同： [C++：比较两个向量](https://stackoverflow.com/questions/6248044/c-comparing-two-vectors/58729931#58729931)

作为一个简短的总结，以避免与其他答案重复：

*   23.2.1 “一般容器要求”规定所有容器`equal()`用于`operator==`
*   25.2.11 "Equal" 定义`equal`并明确表明它遍历两个容器，比较每个容器的元素

# c# - 结合 EF Power Tools 和 .edmx 生成 CodeFirst Class 和 DB

> ID：16182961
> 
> 赞同：3
> 
> 时间：2013-04-24T03:39:43.213
> 
> 标签：c#, asp.net-mvc, entity-framework, code-first, ef-power-tools

我使用此步骤在我的 MVC 项目中生成 CodeFirst 类：

1) 使用会员支持运行我的应用程序并调用使用会员资格创建会员默认表的 MVC 操作 (Membership,User,UserInRoles,...)

2) 将新的 .edmx 文件添加到我的项目并在向导中选择**“从数据库生成”**

3) 在 Visual Studio 中编辑 .edmx 文件中的数据库（添加新表）

4)在 .edmx 中使用**“从模型生成数据库”创建新数据库**

**5) 使用带有“逆向工程师代码优先”**的 Entity Framework Power Tools Beta 3

 **6) 删除现有数据库并调用使用我的上下文的 MVC 操作

这种情况有更简单的方法吗？

我收到此错误：

在表“UsersInRoles”上引入 FOREIGN KEY 约束“FK_dbo.UsersInRoles_dbo.Users_Users_UserId”可能会导致循环或多个级联路径。指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION，或修改其他 FOREIGN KEY 约束。无法创建约束。请参阅以前的错误。

请指导我有关错误和任何简单快速的方法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T12:05:33.863

看起来您可能需要禁用“级联删除”。

从此链接[EF Fluent API检查此帖子](http://msdn.microsoft.com/en-us/data/jj591620.aspx)

> 启用级联删除
> 
> 您可以使用 WillCascadeOnDelete 方法对关系配置级联删除。如果依赖实体上的外键不可为空，则 Code First 会在关系上设置级联删除。如果依赖实体上的外键可以为空，Code First 不会在关系上设置级联删除，并且当主体被删除时，外键将设置为空。
> 
> 您可以使用以下方法删除这些级联删除约定：
> 
> modelBuilder.Conventions.Remove() modelBuilder.Conventions.Remove()
> 
> 以下代码将关系配置为必需，然后禁用级联删除。

```
modelBuilder.Entity<Course>()
    .HasRequired(t => t.Department)
    .WithMany(t => t.Courses)
    .HasForeignKey(d => d.DepartmentID)
    .WillCascadeOnDelete(false); 
```

所有这些都应该在您的 EF 上下文文件中。

**注意：**您可能会想到禁用它的缺点！

祝你好运！**

# android - Android：在列表视图中更改蓝色光泽（蓝色突出显示）的颜色

> ID：16182962
> 
> 赞同：2
> 
> 时间：2013-04-24T03:39:43.510
> 
> 标签：android, listview

当我们尝试在列表视图（那里的许多项目）中拉到顶部（或末尾）时，出现了我真的想改变蓝色光泽（蓝色突出显示）的颜色。

因此，我想把这个颜色从蓝色变成橙色，伙计们。

[http://img835.imageshack.us/img835/5609/28746577.jpg](http://img835.imageshack.us/img835/5609/28746577.jpg)

p/s：

*   我知道蓝色是默认的。（来自上面的 ICS）
*   我添加图像来显示，黄色矩形是出现蓝色光芒（或蓝色高光）的位置
*   在 Android 2.3.6（HTC 设备）上，默认颜色是橙色。我知道蓝色是默认颜色。（来自上面的 ICS）

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-15T16:11:48.003

这是一个解决方法，对我有用：

[http://evendanan.net/android/branding/2013/12/09/branding-edge-effect/](http://evendanan.net/android/branding/2013/12/09/branding-edge-effect/)

```
public static void brandGlowEffect(Context context, int brandColor) {

      //glow
      int glowDrawableId = context.getResources().getIdentifier("overscroll_glow", "drawable", "android");
      Drawable androidGlow = context.getResources().getDrawable(glowDrawableId);
      androidGlow.setColorFilter(brandColor, PorterDuff.Mode.SRC_IN);
      //edge
      int edgeDrawableId = context.getResources().getIdentifier("overscroll_edge", "drawable", "android");
      Drawable androidEdge = context.getResources().getDrawable(edgeDrawableId);
      androidEdge.setColorFilter(brandColor, PorterDuff.Mode.SRC_IN);
} 
```

您必须在设置布局后立即在 OnCreate 调用此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:20:08.163

这是不可能的。你会在这里找到解释：

[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/i5a3uNN8jpg](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/i5a3uNN8jpg)

```
public static void brandGlowEffect(Context context, int brandColor) {

      //glow
      int glowDrawableId = context.getResources().getIdentifier("overscroll_glow", "drawable", "android");
      Drawable androidGlow = context.getResources().getDrawable(glowDrawableId);
      androidGlow.setColorFilter(brandColor, PorterDuff.Mode.SRC_IN);
      //edge
      int edgeDrawableId = context.getResources().getIdentifier("overscroll_edge", "drawable", "android");
      Drawable androidEdge = context.getResources().getDrawable(edgeDrawableId);
      androidEdge.setColorFilter(brandColor, PorterDuff.Mode.SRC_IN);
} 
```

您必须在 OnCreate 或 OnCreateView 调用它。

# javascript - jquery访问全局变量时出错

> ID：16182963
> 
> 赞同：0
> 
> 时间：2013-04-24T03:39:46.917
> 
> 标签：javascript, jquery

我有以下js。问题是，我无法访问 getMajorGroups 函数中的变量 jasonServiceUrlObject 。我已经在全局范围内声明了变量，但是当警报运行时，萤火虫会抛出未定义的错误！

```
var jsonServiceUrlObject = null;

function loadServiceXml(){
    $.get("/xml/ServiceUrls.xml", function(xml){
        jsonServiceUrlObject = $.xml2json(xml);

    });
}

function getMajorGroups(){
  var element = $(".item-group-button").first();

  var serviceUrl = getServiceURL("getAllMajorGroups")
  alert(jsonServiceUrlObject.service[1].service_key);
  $.get(serviceUrl , function(data){
    if(data.majorGroups.length != 0){
      $('.panel_list').empty();
      element.empty();
    }
    for(var i = 0; i < data.majorGroups.length; i++){
      var clone = element.clone();
      clone.append("<h3>" + data.majorGroups[i].description + "</h3>");
      clone.attr("id", data.majorGroups[i].majorGroupId);
      $('.panel_list').append(clone);
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T04:02:22.357

在运行所有其他函数之后，您的 AJAX 回调需要一些时间才能返回。因此，该变量在函数使用时未设置。尝试设置`async`为`false`. 然后您的代码将等到 AJAX 调用返回。或者，您可以从 AJAX 回调内部调用使用该变量的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T03:43:48.343

您必须在引用它之前设置变量，仅声明它是不够的。您还没有显示所有代码，但我猜那没有发生。

请注意，在第二个函数之前运行第一个函数是不够的，因为变量是在回调中定义的。如果你想连续运行这些函数，你应该在第一个回调中调用第二个。

```
function loadServiceXml(){
    $.get("/xml/ServiceUrls.xml", function(xml){
        jsonServiceUrlObject = $.xml2json(xml);
        getMajorGroups();
    });
} 
```

# c# - 多个提交按钮和输入键

> ID：16182964
> 
> 赞同：0
> 
> 时间：2013-04-24T03:40:01.143
> 
> 标签：c#, asp.net, focus, master-pages, submit-button

我有一个带有搜索栏和提交搜索按钮的母版页，然后在我的其他页面上可能有一个带有提交按钮的表单。我找到了这个问题的答案，之前我相信将我的搜索放入 asp:Panel 并将 DefaultButton 设置为提交搜索按钮。所以我的母版页的 .aspx 代码如下所示：

```
 <asp:Panel ID = "searchBoxPanel" runat = "server" DefaultButton="SearchBTN">
<asp:TextBox ID="searchText2" class="search-query row-fluid" placeholder="Search"  runat="server" onfocus="Search_Focus"></asp:TextBox>
 </asp:Panel>

 <asp:Button ID="SearchBTN" runat="server"  onclick="SearchBTN_Click" Text="Search Postings"/> 
```

所以奇怪的是，例如，在我的登录页面上，如果我在登录表单中并按 Enter，它就会知道按登录提交按钮。

但是，我有一些其他页面，其中提交按钮的 .aspx 代码相同，但是当我按 Enter 时，它认为我正在按搜索按钮。

为了比较起见，这是我的登录 .aspx 代码（当我按 Enter 时可以正常工作）

```
<asp:Button ID="loginBTN" runat="server" UseSubmitBehavior="true" onclick="loginBTN_Click" Text="Log In" /> 
```

这是另一个无法正常工作的页面的另一个按钮

```
<asp:Button ID="anotherBTN" runat="server" UseSubmitBehavior="true" onclick="anotherBTNClick" Text="Test" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-28T11:29:30.700

每个按钮都必须在一个单独的、唯一的面板中。

```
<asp:Panel ID="pnl1" runat = "server" DefaultButton="btn1">
  <asp:Button ID="btn1" runat="server" Text="Sea" />
</asp:Panel>

<asp:Panel ID="pnl2" runat="server" DefaultButton="btn2">
  <asp:Button ID="btn2" runat="server" Text="Log In" />
</asp:Panel>

<asp:Panel ID = "pnl3" runat = "server" DefaultButton="btn3">
  <asp:Button ID="btn3" runat="server" Text="Log In" />
</asp:Panel> 
```

# docker - 当我尝试拉基地时，我不断收到“bsdtar：无法设置文件标志”

> ID：16182968
> 
> 赞同：1
> 
> 时间：2013-04-24T03:40:22.190
> 
> 标签：docker

昨晚我想开始玩*docker*但无法正常工作。我会运行这个简单的命令`docker pull base`，下载 98M 的数据需要时间。然后它会抱怨几行`./usr/blah/foobar bsdtar: Failed to set file flags`. 如果我再试一次，下载将从头开始，甚至不会继续或发现它已经更早完成了。

我需要做什么才能让它工作？

我的根文件系统是一个 btrfs 文件系统。这会导致问题吗？

如果有人能告诉我*为什么*btrfs 是个问题，那将是比仅仅解决问题更好的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:40:22.190

原来*是*btrfs导致了这个问题。我将我的根目录移到了一个 ext4 文件系统，现在`docker pull base`工作得很好，并`docker run -i -t base /bin/bash`给了我一个很好的命令提示符。

# iphone - 在 iOS 中将视频转换为 320x240@30fps

> ID：16182970
> 
> 赞同：1
> 
> 时间：2013-04-24T03:40:22.513
> 
> 标签：iphone, ios, video, avfoundation

在我的 iPhone 应用程序中，我想将视频从录制的格式 (HD) 转换为较低的分辨率 (320x240)，但我想保持 30fps 的帧速率。

我目前正在使用 AVAssetExportPreset 进行转换，但唯一可用的值是：

```
AVAssetExportPresetLowQuality
AVAssetExportPresetMediumQuality
AVAssetExportPresetHighestQuality 
```

和

```
AVAssetExportPreset640x480
AVAssetExportPreset960x540
AVAssetExportPreset1280x720
AVAssetExportPreset1920x1080 
```

这些似乎都不符合我的要求。低越来越接近，但比特率非常低，它强制帧速率为 15fps，这不好。

如果可能的话，我想使用硬件加速库来实现这一点。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:18:18.773

使用[GPUImage](https://github.com/BradLarson/GPUImage)将视频转换为所需大小和所需质量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T17:27:02.127

如果您在缓冲区中停留的时间过长，相机可能会停止传送帧。因此，样本缓冲区委托的回调必须很快。

将 alwaysDiscardsLateVideoFrames 属性设置为 YES（默认值），以便及早、有效地丢弃迟到的视频帧

如果您在处理过程中使用 CoreGraphics 和/或 OpenGL，它们都可以很好地与“BGRA”配合使用。您可以设置 videoSettings 属性来指定自定义输出格式。

# android - Android Map v2 绘制椭圆

> ID：16182971
> 
> 赞同：0
> 
> 时间：2013-04-24T03:40:23.047
> 
> 标签：android, android-maps, google-maps-android-api-2

我如何在 Google Map Android api 2 中绘制椭圆？有人知道怎么画吗？我一直在寻找，但没有答案。我会很感激任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:00:25.713

我认为由于目前没有`Ellipse`包含两个半径选项的对象或“半径”方法，`Circle`因此您必须使用[折线](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/Polyline)并自己计算所需的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T04:22:38.710

您可以从这个[工作示例](http://www.geocodezip.com/v3_example_eshapes_ellipse_fromBounds.html)中获得帮助，但这已经在 v3 中制作，您也可以在 v2 中做同样的事情

# c - C中的数组及其指针

> ID：16182974
> 
> 赞同：5
> 
> 时间：2013-04-24T03:40:29.443
> 
> 标签：c, memory, heap-memory, stack-memory

老问题，但我仍然有一些想法。

```
char * getarrmal(void)
{
    char *str;
    str = (char *)malloc(10);
    str[0] = 'a';
    str[1] = 'b';
    str[2] = 'c';
    str[3] = '\0';
    return str;
}

char * getarrdef(void)
{
    char *str = "hello";
    return str;
}

char * getarrfix(void)
{
    char str[10] = "world";
    return str;
} 
```

三个功能。前两个将返回字符串地址并将字符串存储在堆中，以便您可以继续使用它，例如 main() 函数。

在最后一个函数中，str 是一个局部变量，不能使用返回的 str。

我的问题是，当我返回调用前两个的函数时，我应该手动释放它们吗？很容易相信 malloc 的情况是正确的，但我不确定 char *str = "hello" 是否也是如此。

如果我使用 getarrdef() 而没有释放它的返回值，那么我会以某种方式发生内存泄漏吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T03:42:02.067

不，您绝对*不*应该尝试释放第二个。它*没有*存储在堆中，而是一个字符串文字，试图释放它是未定义的行为。来自`C++11 7.21.3.3 The free function`：

> ...如果参数与内存管理函数先前返回的指针不匹配，或者如果空间已通过调用 free 或 realloc 被释放，则行为未定义。

对于第一个，是的，分配内存的责任与内存本身一起传递是一种很好的做法。这意味着如果有东西分配它并把它交给你，*那么你*就有责任释放它。

即使你通过将它传递回一个函数来释放它也是如此：`delarrmal()`- 通过这样做，你已经赋予该函数释放它的责任。

# r - Nnetar 和 arima 函数。它是降序读还是升序读？

> ID：16182977
> 
> 赞同：2
> 
> 时间：2013-04-24T03:41:05.400
> 
> 标签：r

我有一个 CSV，最早的数据位于顶部，最新的数据位于底部。

如果我运行`auto.arima(data)`or `nnetar(data)`，计算是否基于`1st entry = yt`and `2nd entry = y(t-1)`... 等？

如果不是，请告知如何反转 R 中的数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T04:12:38.970

`auto.arima`期望`1st entry = y(t)`, `2nd entry = y(t+1)`... 这意味着最早的数据在前，然后是较新的数据。例如，`1-Jan`然后`2-Jan`以此类推。

如果要反转时间序列，请使用`?rev`函数。

# highcharts - 使用addPoint时Highcharts重叠日期时间列

> ID：16182979
> 
> 赞同：0
> 
> 时间：2013-04-24T03:41:39.443
> 
> 标签：highcharts

我正在尝试使用 addPoint() 将数据动态添加到带有日期时间 X 轴的柱形图中。

当我这样做时，在许多情况下，列开始相互重叠。从视觉上看，列宽似乎没有正确更新。

这是一个演示问题的jsfiddle：

[http://jsfiddle.net/AkKqP/6/](http://jsfiddle.net/AkKqP/6/)

下面是对应的代码：

```
var d_t[ 10, 8, 13 ];
var cur=0;
$(function () {
  $('#container').highcharts({
      chart: {
          type: "column"
      },
      series: [{
          data: [ ]
      }],
      xAxis: {
          type: "datetime"
      }
  });
  // the button action
  $('#button').click(function() {
      var chart = $('#container').highcharts();
      var msec = Date.UTC( 2013, 3, d_t[cur] );
      chart.series[0].addPoint( [msec, 10] );
      cur++;
      cur = ( cur >= 4 ) ? 3 : cur;
  });
}); 
```

我已经硬编码了四个导致问题出现的日期。

如果您单击添加点按钮 4 次，您将看到添加的数据和第二次添加时奇怪的列宽（它们看起来太窄）的奇怪行为，以及第三次和第四次添加时的重叠列。

一种解决方法似乎是按排序顺序将日期提供给图表。然后，图表正确绘制。或者也许这是必需的？

我可能遗漏了一些明显的东西，但我四处寻找并摆弄了一下，但无法弄清楚。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:16:56.087

在 Highcharts 中，数据`xAxis`应该按升序排序。看看：http: [//jsfiddle.net/AkKqP/8/](http://jsfiddle.net/AkKqP/8/)

# spring - Spring：从 web 切换到移动 web（两个独立的项目）

> ID：16182983
> 
> 赞同：1
> 
> 时间：2013-04-24T03:42:02.990
> 
> 标签：spring, mobile, web

我目前已经完成了一个 Spring Web 应用程序。我接下来要做的是为移动 Web 应用程序创建一个单独的项目（根据要求）。通过一些研究，我已经将 Spring mobile 视为解决方案，但我不确定这是否可行，因为我的两个项目彼此独立——尽管它们将部署在同一个项目中小服务程序容器。

进行此操作的最佳做​​法是什么？我应该使用 Spring`DeviceResolverHandlerInteceptor`还是一个简单的 Javascript 重定向就足够了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:42:01.833

javascript 重定向和 Spring Mobile 之间的主要区别在于重定向发生的位置；客户端或服务器端。在将某些内容呈现给客户端后，javascript 将执行此操作。与移动客户端打交道时，此过程可能会变得昂贵（且痛苦）。（谷歌有一个很棒的 youtube 视频，关于移动页面的速度和延迟[http://www.youtube.com/watch?v=Il4swGfTOSM&feature=youtu.be](http://www.youtube.com/watch?v=Il4swGfTOSM&feature=youtu.be)）

所以，我会推荐 Spring Mobile 用于以下内容；- 在服务器端完成 -> 客户端第一次获得“正确”页面 - 它允许授予应用程序“客户端类型”上下文（例如，我正在为移动设备获取此数据，因此仅返回 10 行而不是正常 100) - 它允许移动设备、平板电脑和台式机之间的扩展和更清晰的区分

# java - 为什么即使我试图阻止它，它也会一直循环？

> ID：16182986
> 
> 赞同：0
> 
> 时间：2013-04-24T03:42:25.510
> 
> 标签：java

我应该编写一个程序来询问用户“你喜欢 java 吗？” 并不断提示用户回答。如果用户输入“是”或“否”，则打印“谢谢”并退出程序。否则，打印“重试”，然后再次提示用户。

```
import java.util.*;
public class Questionaire{
    public static void main(String[] args){
        Scanner sc=new Scanner(System.in);

        System.out.print("Do you love java? > ");
        String output=sc.nextLine();

        while(!output.equalsIgnoreCase("yes") || !output.equalsIgnoreCase("no")){

            System.out.println("Try again!");
            System.out.print("Do you love java? > ");
            output=sc.nextLine();
            if(output.equalsIgnoreCase("yes") || output.equalsIgnoreCase("no")){
                System.out.println("Thank you!");
                break;
            }
        }

    }
} 
```

通读评论并自己再次尝试。

```
import java.util.*;
public class Questionaire{
    public static void main(String[] args){
        Scanner sc=new Scanner(System.in);

        System.out.print("Do you love java? > ");
        String output=sc.nextLine();

        while(!output.equalsIgnoreCase("yes") || !output.equalsIgnoreCase("no")){
            if(output.equalsIgnoreCase("yes") || output.equalsIgnoreCase("no")){
                System.out.println("Thank you!");
                break;
            }

            System.out.println("Try again!");
            System.out.print("Do you love java? > ");
            output=sc.nextLine();

        }

    }
} 
```

我明白了！谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:59:38.553

试试这个简单的方法，`while loop`运行直到`yes or no`输入。它只会在用户输入时中断，所以**最后**`yes or no`打印。`Thank you!`

 **```
public static void main(String[] args) {
    Scanner sc = new Scanner(System.in);

    System.out.print("Do you love java? > ");
    String output = sc.nextLine();

    while(!(output.equalsIgnoreCase("yes") || output.equalsIgnoreCase("no"))) {
        System.out.println("Try again!");
        System.out.print("Do you love java? > ");
        output = sc.nextLine();
    }

    System.out.println("Thank you!");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T03:54:21.327

重构代码，这应该适合你。使用`do-while`代码将始终执行一次，但如果输出是或否，它不会再次循环。

```
public class Questionaire{
    public static void main(String[] args){
        Scanner sc=new Scanner(System.in);

        String output;

        do{

            System.out.print("Do you love java? > ");
            output=sc.nextLine();

            if(output.equalsIgnoreCase("yes") || output.equalsIgnoreCase("no")){
                System.out.println("Thank you!");
            }
            else
            {
                System.out.println("Try again!");
            }

        }while(!output.equalsIgnoreCase("yes") && !output.equalsIgnoreCase("no"))

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T03:48:34.790

```
while(!output.equalsIgnoreCase("yes") || !output.equalsIgnoreCase("no")) 
```

条件应改为

```
while(!output.equalsIgnoreCase("yes") && !output.equalsIgnoreCase("no")){ 
```

此外，您还必须在 while 之外添加一个 if 块来处理第一个输入案例。

原因：

案例1：假设您输入“ABC”。现在

不等于“是”=真

它不等于“否”= True（由于使用了短路 OR，因此未对其进行评估）。这种情况下工作正常。

案例 2：假设您输入“是”。现在

它不等于“是”=假

它不等于“否”= True。

通过布尔代数：假或真计算为真。因此无限循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T03:49:31.623

试试看（比原来的程序更容易处理）

```
String output = "";
 while (!output.equalsIgnoreCase("yes") || !output.equalsIgnoreCase("no")) {
     System.out.print("Do you love java? > ");
     output = sc.nextLine();
     if (output.equalsIgnoreCase("yes") || output.equalsIgnoreCase("no")) {
         System.out.println("Thank you!");
         break;
     } else {
         System.out.println("Try again!");
     }
 } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-24T03:49:16.673

您班级的最佳解决方案将是：

```
import java.util.*;
public class Questionaire{
    public static void main(String[] args){
        Scanner sc=new Scanner(System.in);
        System.out.print("Do you love java? > ");
        String output=sc.nextLine();
        while(true){ // Keep doing this forever
            if(output.equalsIgnoreCase("yes") || output.equalsIgnoreCase("no")){ // If the user enters yes or enters no
                System.out.println("Thank you!"); //Print thank you
                break; // Exit
            } else {
                System.out.println("Try again"); //Print try again
                output = sc.nextLine(); // Get new user input.
            }
        }
        sc.close();

    }
} 
```**

# php - 停止显示 sql 列中不需要的信息

> ID：16182987
> 
> 赞同：0
> 
> 时间：2013-04-24T03:42:45.563
> 
> 标签：php, mysql

Heloo 我只想问是否有人知道一种搜索mysql全选结果并阻止某些信息显示的方法。

我喜欢这个，因为我使用的数据库有一些我不希望在数据库中显示的不需要的信息，同时也有一些我希望显示的信息，所以我将如何审查结果并阻止某些信息显示。

```
 $query = "SELECT player, data_type, data FROM settings WHERE player = '$searchinfo'";
$result = mysql_query($query) or trigger_error(mysql_error().$query);

echo "<table><tr><th>Username</th>";
echo "<th>Class</th>";
echo "<th>Expirence</th>";
while ($row = mysql_fetch_array($result) or die($result."<br/><br/>".mysql_error())) { 
if($result == "title-prefix") {

} else {

 echo '<tr><td>'
 . $row['player'] . '</td><td>'
 . $row['data_type'] . '</td><td>'
 . $row['data'] .  '</td><td> ';

 } }

} } 
```

如您所见，我尝试使用 if 语句来取消该特定行，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T03:44:56.243

在表中为每一行存储一个权限标志，并修改你的警卫来测试它。

# javascript - Javascript 执行动作以在 MVC4 中移动文件

> ID：16182988
> 
> 赞同：1
> 
> 时间：2013-04-24T03:42:48.453
> 
> 标签：javascript, ajax, asp.net-mvc

单击我的 MVC 视图中的按钮后，将执行以下 javascript 函数

```
<script type="text/javascript">
    function showAndroidUpload(string) {
        Android.AndroidUpload(string);

        var url = '@Url.Action("TestMove","Functions")';
        $.ajax({ url: url, success: DataRetrieved, type: 'POST', dataType: 'json' });
    }
</script> 
```

AndroidUpload 函数是一个 javascript 函数，它在我的 android 设备上运行并将图像上传到我的`~/App_Data/`文件夹中，我希望将此图像移动到我的`~/Content/images/`文件夹中。我在控制器中的操作如下：

```
public ActionResult TestMove()//UploadModel model)//, IEnumerable<HttpPostedFileBase> picture)
{     
    string UploadedPath = "~/App_Data/image.jpg";
    string SavePath = "~/Content/images/movedimage.jpg";

    System.IO.File.Move(UploadedPath, SavePath);
    return RedirectToAction("Index");
} 
```

图像上传有效，但从未执行该操作。这是使用ajax调用它的正确方法吗？

我知道我的文件名等是正确的，所以我不确定问题出在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T04:14:53.293

**编辑：**我之前的回答，虽然在技术上是正确的，但并不是最好的。感谢 BASmith 为我指明了正确的方向。

**EDIT2：**从 ajax 调用中添加了重定向逻辑。

未调用您的操作，因为 TestMove 方法不是此类的成员：

```
public class FunctionsController : Controller
{
} 
```

所以这可以通过以下两种方式之一来解决：

1.  创建一个`FunctionsController : Controller`类并将`TestMove`方法添加到它。
2.  `"Functions"`将 url 字符串中的参数更改为您的`TestMove`方法当前所在的控制器的名称。

由于您通过 ajax 调用您的方法，因此您需要自己处理重定向，如下所示： [MVC RedirectToAction through ajax jQuery call in knockoutjs is not working](https://stackoverflow.com/questions/12005954/mvc-redirecttoaction-through-ajax-jquery-call-in-knockoutjs-is-not-working)

JavaScript：

```
<script type="text/javascript">
    function showAndroidUpload(string) {
        Android.AndroidUpload(string);

        var url = '@Url.Action("TestMove","Functions")';
        $.ajax({ url: url, success: function(response){ window.location.href = response.Url; }, type: 'POST', dataType: 'json' });
    }
</script> 
```

控制器：

```
public ActionResult TestMove()//UploadModel model)//, IEnumerable<HttpPostedFileBase> picture)
{     
    string UploadedPath = "~/App_Data/image.jpg";
    string SavePath = "~/Content/images/movedimage.jpg";

    System.IO.File.Move(UploadedPath, SavePath);
    var redirectUrl = new UrlHelper(Request.RequestContext).Action("Index", "Home");
    return Json(new { Url = redirectUrl });
} 
```

# java - 保存匿名内部类中生成的数据

> ID：16182990
> 
> 赞同：0
> 
> 时间：2013-04-24T03:42:58.403
> 
> 标签：java, swing, jtextfield, inner-classes, anonymous-inner-class

我的程序中有一个 JTextField，我通过使用匿名内部类连接了一个键盘侦听器。侦听器清除文本框并保存当前在其上的单词。

我希望能够在代码的其他部分使用我从中得到的那个词，但我知道内部类中使用的所有变量都必须标记为 final .. 那么我该怎么做呢？

这是我的简化代码给你们一个想法 - 我希望能够使用 userWord

```
 typingArea.addKeyListener(new KeyAdapter() {
        public void keyPressed (KeyEvent e) {
            if (e.getKeyCode() == KeyEvent.VK_ENTER) { // enter key is pressed
                userWord = typingArea.getText().toLowerCase();
                typingArea.setText("");

            }
        }
    }); 
```

编辑：只是想到可能将它作为构造函数变量传递给我可以创建的另一个对象，然后该对象将能够提取并保存该字符串..这行得通吗？抱歉，如果我在询问后一秒钟就想到了解决方案，那么这个毫无意义的问题，哈哈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T03:45:27.023

1.  使用 an[`ActionListener`](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)而不是 a`KeyListener`和`KeyEvent.VK_ENTER`- 有很多原因，但基本上，这就是 an`ActionListener`的设计目的。
2.  使用类字段而不是局部变量...

更像...

```
public class MyForm extends JPanel {

    private JTextField typingArea;
    private String userWord; 

    public MyForm() {

        typingArea = new JTextField();
        typingArea.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                userWord = typingArea.getText().toLowerCase();
                typingArea.setText("");
            }
        });
    }
} 
```

# javascript - 水平滚动时如何防止浏览器在历史记录中后退/前进？

> ID：16182993
> 
> 赞同：15
> 
> 时间：2013-04-24T03:43:33.897
> 
> 标签：javascript, jquery, firefox, browser, webkit

如何在水平滚动时使用 JQuery 或 Native JS 禁用现代浏览器的默认功能以向后或向前？

这通常发生在使用触控板和滚动到可滚动 div 的末尾或开头时。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-24T03:51:09.017

```
history.pushState(null, null, location.href);
window.onpopstate = function(event) {
    history.go(1);
}; 
```

演示：http: [//jsfiddle.net/DerekL/RgDBQ/show/](http://jsfiddle.net/DerekL/RgDBQ/show/)

您将无法返回上一个网页，除非您向返回按钮发送垃圾邮件或按住返回按钮并选择上一个条目。

[注意：（`onpopstate`或 event `onbeforeunload`）似乎不适用于 iOS。]

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-25T00:43:32.580

所以我想，既然我已经创建了一个网络应用程序，为什么不提示用户任何未保存的更改，这将推迟用户丢失任何未保存的更改或结束浏览器历史记录中的上一页或下一页。

如果有人像我一样遇到这个问题，这里是解决方案：

```
window.onbeforeunload = function(e) {
    return 'Ask user a page leaving question here';
}; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-24T03:51:18.730

如果您使用的是 Mac，这是由 Track Pad Gestures 引起的。

```
System Preferences -> Trackpad -> More Gestures. 
```

不是您正在寻找的 JS 解决方案，但如果您只是想自己阻止它，您可以关闭该功能。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-17T16:24:41.377

适用于 Chrome 和 Safari（即使用 Chrome 和 Safari 测试）：

```
// el === element on which horizontal scrolling is done 
// (can be container of scrolled element or body or any other ancestor)
var preventHistoryBack = function (e) {
  var delta = e.deltaX || e.wheelDeltaX;

  if (! delta) {
    return;
  }

  window.WebKitMediaKeyError /*detect safari*/ && (delta *= -1);

  if (((el.scrollLeft + el.offsetWidth) === el.scrollWidth && delta > 0) || (el.scrollLeft === 0 && delta < 0) ) {
    e.preventDefault();
  }
};
el.addEventListener('mousewheel', preventHistoryBack); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-11T00:15:04.147

[以下是使用 CSS 的overscroll-behaviour 属性](https://developer.mozilla.org/en-US/docs/Web/CSS/overscroll-behavior)可能对您有用的东西：

### Javascript

```
document.body.style.overscrollBehaviour = "contain"; 
```

### CSS

```
body {
    overscroll-behaviour: contain;
} 
```

在 2020 年 7 月 10 日撰写本文时，这会导致在页面左端向左滚动不再触发向后的历史导航。

我不确定这会对其他用户体验产生什么其他副作用。我希望这可以应用于元素*内部*，但似乎这仅在应用于文档正文时才有效。