# StackOverflow 问答 14332000-14332999

# android - 更改通知的亮度

> ID：14332003
> 
> 赞同：0
> 
> 时间：2013-01-15T06:08:26.697
> 
> 标签：android, notifications, brightness

通知代码：

```
mNotificationManager = 
             (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
    final Notification notifyDetails = 
            new Notification(R.drawable.ic_launcher,"New Alert, Click Me!",System.currentTimeMillis());
    Context context = getApplicationContext();
      notifyDetails.
    CharSequence contentTitle = "Notification Details...";

    CharSequence contentText = "Browse Android Official Site by clicking me";
    Intent notifyIntent = new Intent(android.content.Intent.ACTION_VIEW,Uri.parse("http://www.android.com"));

    PendingIntent intent1 = 
          PendingIntent.getActivity(this, 0, 
          notifyIntent, android.content.Intent.FLAG_ACTIVITY_NEW_TASK);
    notifyDetails.setLatestEventInfo(context, contentTitle, contentText, intent1);
    mNotificationManager.notify(SIMPLE_NOTFICATION_ID, notifyDetails); 
```

我的通知工作正常，我想要发生的是当通知弹出时屏幕亮度增加到一定值。

我使用 Eclipse 的自动完成功能来找到正确的功能，但没有任何作用。我也搜索了很多，没有运气。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:13:08.080

前段时间我也遇到过类似的亮度问题。看看[这个答案](https://stackoverflow.com/questions/6708692/changing-the-screen-brightness-system-setting-android/9848456#9848456)。它应该为您指明正确的方向。

将此添加到您的活动中：

```
Settings.System.putInt(getContentResolver(),
                    Settings.System.SCREEN_BRIGHTNESS_MODE, Settings.System.SCREEN_BRIGHTNESS_MODE_MANUAL);
Settings.System.putInt(getContentResolver(), Settings.System.SCREEN_BRIGHTNESS, 255);//255 here is your brightness value, an integer that can be between 0 and 255.
float brightness = 1.0f; //Your desired brightness, float value between 0.0 and 1.0
WindowManager.LayoutParams lp = getWindow().getAttributes();
lp.screenBrightness = brightness;
getWindow().setAttributes(lp); 
```

并将此权限添加到 AndroidManifest.xml：

```
<uses-permission android:name="android.permission.WRITE_SETTINGS" /> 
```

我刚刚对其进行了测试，此代码适用于 Android 4.1。

# c# - 基于文本表用十六进制替换字符

> ID：14332008
> 
> 赞同：1
> 
> 时间：2013-01-15T06:08:43.103
> 
> 标签：c#, hex

这篇文章可能比代码更理论。

我想知道是否有一种（相对）`simple`方法来使用文本表（基本上是一个字符数组）并根据它们的值替换字符串中的字符。

让我详细说明。

假设我们有这个两行表：

```
table[0x0] = new char[] {'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p'};
table[0x1] = new char[] {'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', ']', ',', '/', '.', '~', '&'}; 
```

每个数组有 16 个成员，十六进制为 0-F。

假设我们有一个字符串“hello”转换为十六进制（68 65 6C 6C 6F）。我想获取这些十六进制数字，并将它们映射到上表中定义的新位置。

所以，“你好”现在看起来像这样：

```
07 04 0B 0B 0E 
```

我可以轻松地将字符串转换为数组，但我不知道下一步该做什么。我觉得 foreach 循环可以解决问题，但我还不知道它的确切内容。

是否有捷径可寻？似乎它不应该太难，但我不太确定如何去做。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:46:19.463

```
static readonly char[] TABLE = {
    'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p',
    'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', ']', ',', '/', '.', '~', '&',
};

// Make a lookup dictionary of char => index in the table, for speed.
static readonly Dictionary<char, int> s_lookup = TABLE.ToDictionary(
            c => c,                          // Key is the char itself.
            c => Array.IndexOf(TABLE, c));   // Value is the index of that char.

static void Main(string[] args) {

    // The test input string. Note it has no space.
    string str = "hello,world.";

    // For each character in the string, we lookup what its index in the
    // original table was.
    IEnumerable<int> indices = str.Select(c => s_lookup[c]);

    // Print those numbers out, first converting them to two-digit hex values,
    // and then joining them with commas in-between.
    Console.WriteLine(String.Join(",", indices.Select(i => i.ToString("X02"))));
} 
```

输出：

```
07,04,0B,0B,0E,1B,16,0E,11,0B,03,1D 
```

请注意，如果您提供的输入字符不在查找表中，您不会立即注意到它！ `Select`返回一个`IEnumerable`，只有当你去使用它时才会懒惰地评估它。此时，如果未找到输入字符，则字典`[]`调用将抛出异常。

使这一点更明显的一种方法是`ToArray()`在 Select 之后调用，因此您有一个索引数组，而不是`IEnumerable`. 这将迫使评估立即发生：

```
int[] indices = str.Select(c => s_lookup[c]).ToArray(); 
```

参考：

*   [`Array.IndexOf`](http://msdn.microsoft.com/en-us/library/system.array.indexof.aspx)
*   [`Enumerable.ToDictionary`](http://msdn.microsoft.com/en-us/library/bb548657.aspx)
*   [`Enumerable.Select`](http://msdn.microsoft.com/en-us/library/bb548891.aspx)
*   [`String.Join`](http://msdn.microsoft.com/en-us/library/dd783876.aspx)

# mongodb - Mongodb 副本集状态显示“RECOVERING”

> ID：14332010
> 
> 赞同：13
> 
> 时间：2013-01-15T06:09:01.800
> 
> 标签：mongodb, replication

我已经在 3 个 mongo 服务器上设置了副本集并导入了 5 GB 数据。现在辅助服务器的状态显示“正在恢复”。您能否让我知道“恢复”的含义以及如何解决此问题。

状态如下

```
rs.status()
{
    "set" : "kutendarep",
    "date" : ISODate("2013-01-15T05:04:18Z"),
    "myState" : 3,
    "members" : [
        {
            "_id" : 0,
            "name" : "10.1.4.138:27017",
            "health" : 1,
            "state" : 3,
            "stateStr" : "RECOVERING",
            "uptime" : 86295,
            "optime" : Timestamp(1357901076000, 4),
            "optimeDate" : ISODate("2013-01-11T10:44:36Z"),
            "errmsg" : "still syncing, not yet to minValid optime 50f04941:2",
            "self" : true
        },
        {
            "_id" : 1,
            "name" : "10.1.4.21:27017",
            "health" : 1,
            "state" : 1,
            "stateStr" : "PRIMARY",
            "uptime" : 86293,
            "optime" : Timestamp(1358160135000, 18058),
            "optimeDate" : ISODate("2013-01-14T10:42:15Z"),
            "lastHeartbeat" : ISODate("2013-01-15T05:04:18Z"),
            "pingMs" : 0
        },
        {
            "_id" : 2,
            "name" : "10.1.4.88:27017",
            "health" : 1,
            "state" : 3,
            "stateStr" : "RECOVERING",
            "uptime" : 86291,
            "optime" : Timestamp(1357900674000, 10),
            "optimeDate" : ISODate("2013-01-11T10:37:54Z"),
            "lastHeartbeat" : ISODate("2013-01-15T05:04:16Z"),
            "pingMs" : 0,
            "errmsg" : "still syncing, not yet to minValid optime 50f04941:2"
        }
    ],
    "ok" : 1 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T15:07:25.037

“RECOVERING”副本集节点上的消息意味着这些节点仍在执行初始同步。这些节点在转换到辅助状态之前不可用于读取。

初始同步有几个步骤。

有关副本集同步过程的更多信息，请参见此处：http: [//docs.mongodb.org/manual/core/replica-set-sync/](http://docs.mongodb.org/manual/core/replica-set-sync/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-08-22T11:16:17.593

**登录到 RECOVERING 实例。**
检查**RECOVERING**实例**复制状态**，
`db.printReplicationInfo()`
你会得到这样的结果，

> oplog 首次活动时间：2019 年 7 月 30 日星期二 17:26:37 GMT+0000 (UTC)
> oplog 上次活动时间：2019 年 7 月 31 日星期三 16:46:53 GMT+0000
> 现在：2019 年 8 月 22 日星期四 07:36:38 GMT+ 0000 (UTC)

**如果你发现oplog last event time**和**now**之间的区别。

> 这意味着这个特定的实例不是**PRIMARY**和**SECONDARY**，也不是副本**集的****活动成员**。

 ****现在有两个解决方案**
**首先**，
1\. 登录到**RECOVERING 实例2\. 从现有****db**
中 删除数据，这将是**/data/db** 3\. 重新启动此**RECOVERING 实例** 4\. （**可选**）如果您发现以下错误。从指定位置删除该 mongod.pid。

 ******```
Error starting mongod. /var/run/mongod/mongod.pid 
```

5\. 重启实例。
6\. 现在您的恢复实例将处于运行状态
，它将显示 PRIMARY 或 Secondary 代替 RECOVERING。

**其次**，
将其他正在运行的实例**数据**复制到**RECOVERING 实例中**并**重启 mongodb**。********

# spring - 每次我使用实例变量时，Spring都会返回新实例

> ID：14332011
> 
> 赞同：0
> 
> 时间：2013-01-15T06:09:14.250
> 
> 标签：spring, inversion-of-control

我遇到了有线问题。

这是我的对象定义。

```
package unittest.prototypetest;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Component;

@Component("valObject")
@Scope("prototype")
public class ValueObject {
  private String value1;
  private String value2;

  //... getter and setter omitted.
} 
```

我定义了组件扫描标签如下：

```
<context:component-scan base-package="unittest" scoped-proxy="targetClass" /> 
```

然后我尝试通过 ApplicatioinContext 获取它的实例，

```
//ApplicationContextHelper is a class written by me to easily create ApplicationContext
ValueObject valObject = ApplicationContextHelper.getBean("valObject");
valObject.setValue1("v1");
valObject.setValue2("v2");

System.out.println(valObject.getValue1());
System.out.println(valObject.getValue2()); 
```

最连线的结果如下所示：

```
2013-01-15_14:04:02.245| DEBUG | o.s.b.f.s.DefaultListableBeanFactory | Returning cached instance of singleton bean 'valObject'
2013-01-15_14:04:02.246| DEBUG | o.s.b.f.s.DefaultListableBeanFactory | Creating instance of bean 'scopedTarget.valObject'
2013-01-15_14:04:02.246| DEBUG | o.s.b.f.s.DefaultListableBeanFactory | Returning cached instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
2013-01-15_14:04:02.250| DEBUG | o.s.b.f.s.DefaultListableBeanFactory | Returning cached instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
2013-01-15_14:04:02.250| DEBUG | o.s.b.f.s.DefaultListableBeanFactory | Returning cached instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
2013-01-15_14:04:02.252| DEBUG | o.s.b.f.s.DefaultListableBeanFactory | Finished creating instance of bean 'scopedTarget.valObject'
2013-01-15_14:04:02.295| DEBUG | o.s.b.f.s.DefaultListableBeanFactory | Creating instance of bean 'scopedTarget.valObject'
2013-01-15_14:04:02.296| DEBUG | o.s.b.f.s.DefaultListableBeanFactory | Finished creating instance of bean 'scopedTarget.valObject'
2013-01-15_14:04:02.296| DEBUG | o.s.b.f.s.DefaultListableBeanFactory | Creating instance of bean 'scopedTarget.valObject'
2013-01-15_14:04:02.296| DEBUG | o.s.b.f.s.DefaultListableBeanFactory | Finished creating instance of bean 'scopedTarget.valObject'
null
2013-01-15_14:04:02.296| DEBUG | o.s.b.f.s.DefaultListableBeanFactory | Creating instance of bean 'scopedTarget.valObject'
2013-01-15_14:04:02.297| DEBUG | o.s.b.f.s.DefaultListableBeanFactory | Finished creating instance of bean 'scopedTarget.valObject'
null 
```

您可以看到每次我使用 valObject 实例时，Spring 确实为我的访问创建了一个新实例。以便系统输出空值，尽管我设置了值。

我做错什么了吗 ？请指教，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:12:56.063

您已将范围设置为原型，这是一个非单例。在此处阅读更多相关信息[。](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch04s04.html#beans-factory-scopes-prototype)

# c# - MonoTouch：关于作为字典键的值类型

> ID：14332013
> 
> 赞同：4
> 
> 时间：2013-01-15T06:09:21.660
> 
> 标签：c#, ios, xamarin.ios

它说使用值类型作为字典键会“在设备上很快崩溃和烧毁”，这是否意味着我不能使用 Dictionary<int, string> 之类的东西来制作字符串查找表？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T16:55:55.263

> 它说使用值类型作为字典键将“在设备上很快崩溃和烧毁”，

它不是那么戏剧化（没有燃烧）或那么自动 - 但它可能会发生。

Apple 不允许在设备上进行 JIT（即时）编译。这意味着在部署到设备之前，必须（提前）预编译所有内容。这意味着MonoTouch 存在一些[限制，而 .NET / Mono 或 Mono for Android 则没有这些限制。](http://docs.xamarin.com/ios/guides/advanced_topics/limitations)

一般来说，生成*的*泛型代码可以在不同类型之间共享。遗憾的是，这对于*值类型是***不可能**的。这意味着 AOT（提前）编译器必须为正在使用的每种值类型生成代码。

 *在某些情况下，AOT 编译器可能无法检测到运行时*可能*需要的所有可能类型。这将导致`EngineExecutionException`将您指向有问题的代码。

在这个阶段，您可以尝试：

*   *提示*AOT 编译器需要该代码（即添加一些代码，使 AOT 编译器生成所需的缺失代码）；或者

*   重构代码，例如避免值类型；

> 这是否意味着我不能使用 Dictionary 之类的东西来制作字符串查找表？

不，这会奏效。当您创建`Dictionary<int, string>`then 的实例时，AOT 编译器很容易知道需要生成哪些代码。

问题通常发生在嵌套泛型或使用这样做的代码时（例如，具有值类型的 LINQ 查询可以生成此类代码）。*

# wordpress - Wordpress：帖子没有格式

> ID：14332021
> 
> 赞同：0
> 
> 时间：2013-01-15T06:09:45.180
> 
> 标签：wordpress, formatting

我刚刚开始学习开发 WordPress 主题，并且正在开发我的第一个主题，但是我遇到了一个问题，即在显示帖子时未使用可视化编辑器中设置的格式...

所以，我的代码如下：

```
<?php
/*
    Template Name: News
*/
?>

<?php get_header(); ?>
<div id="contentWrap">
        <div id="content">

        <?php
            $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
            $query = array (
                'posts_per_page' => 3,
                'paged' => $paged,
                'cat' => 4
                );
            query_posts ($query); ?>

        <?php if ( have_posts() ) : ?>
            <?php while ( have_posts() ) : the_post(); ?>
                <article <?php post_class() ?> id="post-<?php the_ID(); ?>">
                    <h2><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h2>
                    <div class="meta">
                        <em>Posted on:</em> <?php the_time('F jS, Y') ?>
                    </div>
                    <div class="entry">
                        <?php the_content(); ?>
                    </div>
                </article>                
            <?php endwhile; ?>

            <div class="navigation">
                <div class="alignleft"><?php next_posts_link('&laquo; Older Entries') ?></div>
                <div class="alignright"><?php previous_posts_link('Newer Entries &raquo;') ?></div>
            </div>

            <?php else : ?>
            <h2>Not found</h2>
        <?php endif; ?>

    </div><!-- end content -->
</div><!-- end contentWrap -->
<?php get_footer(); ?> 
```

所以问题是，如果我创建一个帖子并设置一些格式（粗体、斜体等），该帖子仍然显示为纯文本，除了换行符之外没有任何格式......我猜这个问题与如何我收到了帖子，但是由于我是 WordPress 的新手，所以我一直无法找到解决方案...

我错过了什么？

# haskell - 在 Haskell 中获取 IxSet 查询结果的第一个元素

> ID：14332024
> 
> 赞同：2
> 
> 时间：2013-01-15T06:10:05.797
> 
> 标签：haskell

我试图`IxSet`用于类似数据库的目的，所以我建立了一个项目索引，我需要在某些字段上进行完全匹配。

查询运算符`(@=)` [http://hackage.haskell.org/packages/archive/ixset/1.0.2/doc/html/Data-IxSet.html#v:-64--61-](http://hackage.haskell.org/packages/archive/ixset/1.0.2/doc/html/Data-IxSet.html#v:-64--61-)返回一个`IxSet a`类型，但我只需要得到`1`或`0`结果。要检查它是否是`0`结果，我会在上面做`null`项目，但我如何获得第一个项目？

由于[http://hackage.haskell.org/packages/archive/ixset/1.0.5/doc/html/Data-IxSet.html#t:IxSet](http://hackage.haskell.org/packages/archive/ixset/1.0.5/doc/html/Data-IxSet.html#t:IxSet)`IxSet`类型的描述，我没有看到任何类型类具有类似或.`head``fst`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:17:25.583

好的，找到答案了。例如，您应该使用一些可用的功能，例如 getOne [http://hackage.haskell.org/packages/archive/ixset/1.0.5/doc/html/Data-IxSet.html#v:getOne](http://hackage.haskell.org/packages/archive/ixset/1.0.5/doc/html/Data-IxSet.html#v:getOne)。

ps：我发现首先从项目列表创建类型然后添加重复列表操作的操作有点奇怪，但也许我只是新手:)

# html - （HTML 打印）分页后的下一个不会从页面顶部开始

> ID：14332028
> 
> 赞同：0
> 
> 时间：2013-01-15T06:10:25.073
> 
> 标签：html, printing, html-table, page-break

我在这个报告中使用表格，我的问题是当我在页面底部使用分页符以避免最后一行被切断时，下一个元素从下一页的中间开始。

这是我的代码：

```
<tr>
    <td class="1"></td>
    <td class="2"></td>
    <td class="3"></td>
    <td class="4"></td>
</tr>
<tr style="page-break-after: always;"><td colspan="4"></td></tr>
<tr>
    <td class="1"></td>
    <td class="2"></td>
    <td class="3"></td>
    <td class="4"></td>
</tr> 
```

请看截图：

[![](../Images/c4141516844c4e9fa0a4083d39c5e44e.png)](https://i.stack.imgur.com/hGnmM.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-15T06:19:03.013

我想你可能正在使用循环来打印你的报告，

总是使用**`<br>`*** *`<hr>`** 或**`page-break-after`**在循环之外..

从浏览器检查元素，如果有，您将收到错误消息，您可以解决它们..

# .net - mysql与nhibernate太多的连接

> ID：14332030
> 
> 赞同：1
> 
> 时间：2013-01-15T06:10:41.977
> 
> 标签：.net, mysql, nhibernate, orm, fluent-nhibernate

我在 .net 框架上运行 nhibernate，在测试期间我收到此错误 ERROR 91 0 0 0 发生异常：无法打开连接 NHibernate.ADOException：无法打开连接 ---> NHibernate.ADOException：无法从驱动程序创建连接 - --> MySql.Data.My qlClient.MySqlException: #08004连接太多

```
in MySql.Data.MySqlClient.PacketReader.CheckForError()
in MySql.Data.MySqlClient.PacketReader.ReadHeader()
in MySql.Data.MySqlClient.PacketReader.OpenPacket()
in MySql.Data.MySqlClient.NativeDriver.Authenticate411()
in MySql.Data.MySqlClient.NativeDriver.Authenticate()
in MySql.Data.MySqlClient.NativeDriver.Open()
in MySql.Data.MySqlClient.Driver.Create(MySqlConnectionString settings)
in MySql.Data.MySqlClient.MySqlPool.CreateNewPooledConnection()
in MySql.Data.MySqlClient.MySqlPool.GetPooledConnection()
in MySql.Data.MySqlClient.MySqlPool.GetConnection()
in MySql.Data.MySqlClient.MySqlPoolManager.GetConnection(MySqlConnectionString  settings)
in MySql.Data.MySqlClient.MySqlConnection.Open()
in NHibernate.Connection.DriverConnectionProvider.GetConnection()
--- Fine dell'analisi dello stack dell'eccezione interna ---
in NHibernate.Connection.DriverConnectionProvider.GetConnection()
in NHibernate.Impl.SessionFactoryImpl.OpenConnection()
--- Fine dell'analisi dello stack dell'eccezione interna ---
in NHibernate.Impl.SessionFactoryImpl.OpenConnection()
in NHibernate.Impl.SessionImpl.Connect()
in NHibernate.Impl.SessionImpl.get_Connection()
in NHibernate.Transaction.AdoTransaction.Begin(IsolationLevel isolationLevel)
in NHibernate.Transaction.TransactionFactory.BeginTransaction(ISessionImplementor  session, IsolationLevel isolationLevel)
in NHibernate.Transaction.TransactionFactory.BeginTransaction(ISessionImplementor  session)
in NHibernate.Impl.SessionImpl.BeginTransaction()
in interact.VideoSystem.Checks.CheckAviXml() in 
C:\var\projects\videosystem\3.0\VideoServiceSvc\Checks.vb:riga 348
ERROR 91 0 0 0  An exception occurred: cannot open connection
NHibernate.ADOException: cannot open connection ---> NHibernate.ADOException: Could not          create connection from Driver ---> MySql.Data.MyqlClient.MySqlException: #08004Too many connections

in MySql.Data.MySqlClient.PacketReader.CheckForError()
in MySql.Data.MySqlClient.PacketReader.ReadHeader()
in MySql.Data.MySqlClient.PacketReader.OpenPacket()
in MySql.Data.MySqlClient.NativeDriver.Authenticate411()
in MySql.Data.MySqlClient.NativeDriver.Authenticate().......... 
```

我不知道如何解决它！有人能帮我吗' ？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:18:19.563

MySQL 有一个配置设置，它将确定可以创建多少个到服务器的连接。很可能你超过了这个数字。

有关如何解决此问题的更多详细信息，请参阅以下链接：[https ://dev.mysql.com/doc/refman/5.5/en/too-many-connections.html。](https://dev.mysql.com/doc/refman/5.5/en/too-many-connections.html)

如果您正在测试并收到此错误，您可能会遇到连接未关闭的问题。因此，我建议您在 MySQL 管理员甚至命令行中进行测试时查看 MySQL 连接，以确定连接是否正在关闭。听起来你正在泄漏连接。

狩猎快乐！

# java - 为所有模块设置备用 JavaDoc 位置的最佳方法？

> ID：14332031
> 
> 赞同：2
> 
> 时间：2013-01-15T06:10:51.973
> 
> 标签：java, maven, javadoc, maven-javadoc-plugin

我想为多模块 maven 项目中的所有模块设置一个备用 JavaDoc 位置。不幸的是，我不得不依赖相对路径，或者使用像 ${basedir} 这样的 maven 属性，因为这是一个关于颠覆的团队项目，没有绝对路径对我们所有人来说都是相同的。

做这个的最好方式是什么？如果我有一个项目结构

```
父母
   子1
   子2
   子3
      文档

```

我想将 API 放在 sub3/docs 中，那么当父模块识别出与子模块不同的路径时，如何将所有模块指向 sub3/docs 中的输出 HTML 文件？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:23:46.963

您希望尽可能少地污染您的项目构建，尤其是在重复构建调整的情况下。相反，您最好创建一个单独的构建过程，该过程将 javadoc 输出从所有项目的标准位置组装起来，并将其发布到需要的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T07:57:48.453

将以下内容添加到父 pom 并确保子 pom 没有定义自己的 javadoc 插件。

```
 <build>
       <plugins>
       <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-javadoc-plugin</artifactId>
            <version>2.7</version>

            <configuration>
                <outputDirectory>${project.parent.basedir}/sub3</outputDirectory>
                <reportOutputDirectory>${project.parent.basedir}/sub3</reportOutputDirectory>
                <destDir>docs</destDir>
            </configuration>
        </plugin>
        </plugins>
        </build> 
```

# php - 在 PHP 中分解字符串

> ID：14332033
> 
> 赞同：2
> 
> 时间：2013-01-15T06:11:10.853
> 
> 标签：php, arrays, string, explode, delimiter

如果我有一个字符串“123x456x78”，我如何分解它以返回一个包含“123”作为第一个元素和“456”作为第二个元素的数组？基本上，我想取后面跟着“x”的字符串（这就是为什么应该扔掉“78”）。我一直在搞乱正则表达式，但遇到了麻烦。

谢谢！

**编辑**：如果字符串是“123x456x78x”，我需要三个元素：“123”、“456”、“78”。基本上，对于“x”之后的每个区域，我需要记录字符串直到下一个“x”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T06:17:09.210

有很多不同的方式，但这是您尝试的正则**表达式**：

```
$str = "123x456x78";
preg_match_all("/(\d+)x/", $str, $matches);
var_dump($matches[1]); 
```

输出：

```
array(2) { [0]=> string(3) "123" [1]=> string(3) "456" } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T06:14:04.307

```
$arr = explode("x", "123x456x78"); 
```

进而

```
unset($arr[2]); 
```

如果你真的受不了那可怜的78。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T06:14:07.440

使用爆炸

```
$string='123x456x78';

$res = explode('x', $string);
if(count($res) > 0) {
    echo $res[0];
    if(count($res) > 1) {
        echo $res[1];
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T06:14:55.520

```
$var = "123x456x78";
$array = explode("x", $var);
array_pop($array); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T06:15:32.597

使用下面的代码来爆炸。它运作良好！

```
 <?php
    $str='123x456x78';
    $res=explode('x',$str);
    unset($res[count($res)-1]); // remove last array element
    print_r($res);
    ?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T06:16:18.613

要分解并删除最后一个结果：

```
$string='123x456x78'; // original string

$res = explode('x', $string); // resulting array, exploded by 'x'

$c = count($res) - 1; // last key #, since array starts at 0 subtract 1

unset($res[$c]); // unset that last value, leaving you with everything else but that. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-15T06:17:39.490

虽然我完全支持正则表达式，但在这种情况下，使用 PHP 的数组函数可能更容易......

```
$result=array_slice(explode('x',$yourstring),0,-1); 
```

这应该有效，因为只有explode返回的最后一个元素后面不会跟着'x'。不确定如果explode 以'x' 结尾，它是否会添加一个空字符串作为最后一个元素，你可能需要测试它......

# javascript - 页面加载后创建推文按钮

> ID：14332039
> 
> 赞同：1
> 
> 时间：2013-01-15T06:12:04.573
> 
> 标签：javascript, twitter

页面加载后，我需要创建多个推文按钮。每个按钮都会发布一个与他们所在页面不同的 url。我知道我需要为每个推文按钮附加一个适当的 data-url 属性来实现这一点。

但是，Twitter API 似乎没有提供一种直接的方式来在页面加载后使用 Javascript 动态地执行上述操作。我在 StackOverflow 和其他网站上看到了一些建议，它们暗示每当需要创建新的推文按钮时重新加载 widgets.js 脚本：[如何动态创建推文按钮？](https://stackoverflow.com/questions/6981905/how-can-i-dynamically-create-a-tweet-button)

还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:43:16.490

您可以通过将用户重定向到如下所示的 URL 来自动代表用户撰写推文：

[http://twitter.com/home?status=Hey+check+out+this+cool+site+http://www.stackoverflow.com/](http://twitter.com/home?status=Hey+check+out+this+cool+site+http://www.stackoverflow.com/)

所以在回答你的问题时——如果我理解正确的话——你可以创建几个不同的锚点，将该链接作为 HREF：

```
<a href="http://twitter.com/home?status=Hey+check+out+this+cool+site+http://www.stackoverflow.com/" target="_blank">Tweet about Link a</a> 
```

编辑：

经过进一步调查，实际上很容易通过设置一些`data`属性来使用带有计数的推文按钮来计算不同的 URL

我为你敲了一个快速的 jsfiddle：http: [//jsfiddle.net/rghCG/](http://jsfiddle.net/rghCG/)

有关使用推文按钮可以做什么的更多信息：[https ://dev.twitter.com/docs/tweet-button](https://dev.twitter.com/docs/tweet-button)

# php - pdo 执行多个查询

> ID：14332041
> 
> 赞同：1
> 
> 时间：2013-01-15T06:12:09.233
> 
> 标签：php, mysql, sql, pdo

我需要运行插入和同时更新，但我只使用插入测试来捕获错误。

当我定义正确和不正确的表时，PDO 不会报告错误，但是如果我运行查询以选择一个不正确的表，则会报告错误。

我没有足够的知识来解决这个问题，我真的需要一起执行两个查询谢谢。

```
$db-> setAttribute( PDO::ATTR_ERRMODE , PDO::ERRMODE_EXCEPTION );

try{
    $stmt = $db-> prepare( "INSERT INTO test ( name ) values( 'new name' );
                            INSERT INTO xast ( xame ) values( 'new name' );" );
    $stmt->execute();
}catch( PDOException $e ){
    print_r( $e );
}

try{
    $stmt = $db-> prepare( "INSERT INTO xast ( xame ) values( 'new name' );" );
    $stmt->execute();
}catch( PDOException $e ){
    print_r( $e );
}
**Column not found: 1054 Unknown column 'xame'** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:56:49.517

在您的情况下准备多个查询是没有意义的。

首先，专门为 tins 案例发明的准备好的语句：准备一次，执行多次。所以，你可以这样准备

```
INSERT INTO test (name) values(?) 
```

然后执行尽可能多的插入次数

下一个。对于 INSERT 查询，Mysql 在一个查询中支持多个 VALUES 子句，例如

```
INSERT INTO test (name) values ('new name' ),('name'),(...) 
```

等等。

如果您需要在插入后更新 - 也没问题。
只需运行 2 个单独的查询 - 一个 INSERT 和一个 UPDATE。不会有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-16T07:25:01.720

这个（这个链接：[PDO support for multiple queries (PDO_MYSQL, PDO_MYSQLND)](https://stackoverflow.com/questions/6346674/pdo-support-for-multiple-queries-pdo-mysql-pdo-mysqlnd/55169977#55169977)）解决方案帮助您一起运行多个查询，如果出现不正确的查询，它不会执行任何其他查询。

# html - 如何仅在某个类中更改链接属性？

> ID：14332043
> 
> 赞同：0
> 
> 时间：2013-01-15T06:12:17.340
> 
> 标签：html, css

我有一个叫做引文的课程，我正在申请一些东西..

```
.Citation
{ 
    font-size:16px; 
    color:green; 
    text-decoration: none; 
    font-weight:600; 
    font-family:georgia, times new roman; 

} 
```

主要是我想要做的是改变这个类的超链接样式，因为这就是它要应用的内容。我希望能够将类应用于某些超链接，例如：

```
<span class="Citation"> <a href="www.google.com">yatayatayata</a></span></span> 
```

我试过这样

```
.Citation
{ 

    a {textd-ecoration:none }

} 
```

这样

```
a.Citation 
{ 

    font-size:16px; 
    color:green; 
    text-decoration: none; 
    font-weight:600; 
    font-family:georgia, times new roman;

} 
```

而且它们都不起作用，所以请帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:20:50.697

```
a.Citation{
    font-size:16px; 
    color:green; 
    text-decoration: none; 
    font-weight:600; 
    font-family:georgia, times new roman; 
}

<a href="google.com" class="Citation">Style Applied</a>

<a href="yahoo.com">Style not applied</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:15:19.703

您需要将课程 `Citation`放在要应用的链接上：

```
<a class="Citation" href='http:www.google.com'>link</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T06:15:58.790

您尝试的正确 css 选择器是：

```
.Citation a {
    /* stuff here */
} 
```

这将选择带有 class 的标签中的所有锚标签`.Citation`。

您还可以使用直接后代选择器：

```
.Citation > a {
    /* stuff here */
} 
```

当然@William Seiti Mizuta 的回答是另一种方法，就您必须使用的标记而言更简单一些。

# java - Eclipse 建模框架中的实现

> ID：14332044
> 
> 赞同：0
> 
> 时间：2013-01-15T06:12:21.193
> 
> 标签：java, uml, ecore

这些工具允许我们创建接口，但是，我看不到如何创建实现箭头。

可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:10:35.240

您是否有特殊的理由使用 eclipse 建模功能？

如果没有，还有很多其他 uml 工具在您需要的各个方面都更好。

[什么是最好的 UML 图表工具？](https://stackoverflow.com/questions/15376/whats-the-best-uml-diagramming-tool)

# ruby - 将元素附加到可能尚未初始化的数组的 Ruby 习语是什么？

> ID：14332047
> 
> 赞同：0
> 
> 时间：2013-01-15T06:12:30.927
> 
> 标签：ruby, arrays, append, idioms

我发现`<<`除非它已经被初始化，否则它不能被 Array 使用。我目前是这样写的：

```
unless @app
 @app = my_array
else
 @app << my_array
end 
```

有没有更好的方法来写这个？

我以前用过||=，但是

```
(@app ||= []) << [1,2,3] 
```

将返回 [[1, 2, 3]]，这不是我们想要的。我们想要 [1, 2, 3]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T06:13:47.177

您可以在此处使用快捷方式

```
(@app ||= []) << xxx 
```

## 编辑：

如果要将数组推送到`@app`变量中，那么 using`concat`是一个更好的选择：

```
(@app ||= []).concat [1, 2, 3]
(@app ||= []).concat [4, 5, 6]

@app # => [1, 2, 3, 4, 5, 6] 
```

或者，您可以按照@ck3g 的建议使用 splat 运算符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T07:57:03.447

```
> (@app ||= []).push *[1, 2, 3]
=> [1, 2, 3] 
```

is " `*`unarray" 运算符。

```
> array = [1, 2, 3]
=> [1, 2, 3]
> [*array]
=> [1, 2, 3] 
```

方法`<<`和`push`不同之处在于`push`可以采用多个参数。

这也适用于单一值：

```
> (@app2 ||= []).push *1
=> [1] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T06:13:52.980

这里有一个成语：

```
@app ||= []
@app << xxx 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T07:59:59.387

也许您使用 << 错误？<< 表示数组的一个元素，而不是数组的一个块。

```
@app ||= []
@app.concat my_array 
```

# android - 滚动按钮 android

> ID：14332051
> 
> 赞同：1
> 
> 时间：2013-01-15T06:12:40.917
> 
> 标签：android, android-button, android-scrollview, android-scroll

我想要的所有
按钮如下图所示。一个按钮是可滚动的，并获得选定的数字，就像当前选择的图像中的 0 一样。有人有想法吗？

![在此处输入图像描述](../Images/78d81bb1fc74e58586bd346c9517d16c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-06T12:47:45.993

我已经使用下面的代码来实现它。

[https://github.com/ai212983/android-spinnerwheel](https://github.com/ai212983/android-spinnerwheel)

谢谢吉里什

# java - 如何在java中获取浏览的文件路径

> ID：14332055
> 
> 赞同：-1
> 
> 时间：2013-01-15T06:13:04.677
> 
> 标签：java, zk

我想获得一个浏览的文件路径。我试过喜欢它

```
Object objUploadEvent = ctx.getTriggerEvent();
        if (objUploadEvent != null && (objUploadEvent instanceof UploadEvent)) {
            upEvent = (UploadEvent) objUploadEvent;
        }
        if (upEvent != null) {
            Media media = upEvent.getMedia();
            File file=new File(media.getName());
            this.path = file.getAbsolutePath();
        } 
```

但是 getAbsolutePath 是从日食中给出路径。说如果我的文件在 c://doc/abc 中，那么它应该给出路径为 c://doc/abc/myfile.txt

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:21:10.923

如果您将 打印`media.getName()`到您的日志中，您很可能会看到它只是文件名，没有路径：`myfile.txt`

这是因为浏览器会随上传的字节一起发送多少关于文件的信息。大多数浏览器只是给你一个没有路径的名字。试试opera，你应该得到完整的文件路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:05:44.690

如果我理解正确，您想要*客户端上源文件*的位置而不是服务器上文件的位置？

出于安全原因，这是不可能的，抱歉。

您会在 StackOverflow 和其他地方找到大量关于此的讨论（有时是指某些浏览器实现此安全功能的[“假路径”症状](https://stackoverflow.com/questions/9476473/receiving-fake-path-while-uploading)。

无需过多详细说明，此安全功能的推理非常简单；任何网站都不需要（阅读：能够）找出有关用户文件系统的任何信息。因此，当文件上传到服务器时，只应发送文件数据。

从技术上讲，这在一些较旧的浏览器中是可能的（例如：我相信 IE6），但在这一点上它是一个非常普遍的安全功能，你将注定要依赖这些信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T06:16:16.030

如果文件在客户端（浏览器所在的位置）上，通常的文件上传器可能无法做到这一点。[这个问题](https://stackoverflow.com/questions/408735/javascript-file-uploads)有一些替代方案可以解决您面临的完全相同的问题

如果文件在您的服务器上，请尝试[`file.getCanonicalPath()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getCanonicalPath%28%29). 这应该给你整个路径。

另请参阅：[Java 中的 getPath()、getAbsolutePath() 和 getCanonicalPath() 有什么区别？](https://stackoverflow.com/questions/1099300/whats-the-difference-between-getpath-getabsolutepath-and-getcanonicalpath)

顺便说一句，您可以使用`System.getProperty("user.dir"))`. 但是，如果您只需要文件的路径，我不建议使用它。

# c# - 图像未显示在 Windows 应用商店应用程序中

> ID：14332058
> 
> 赞同：1
> 
> 时间：2013-01-15T06:13:15.017
> 
> 标签：c#, image, windows-8, windows-runtime

我正在构建一个 Windows 应用商店 (WinRT) 应用程序，并且我添加了按钮来操作列表中的项目，我正在为这些按钮使用图像。我跟踪了许多信息集，但无法显示这些图像，我尝试了以下方法：

```
<Button>
  <Image Source="/Images/add.png"/>
</Button>

<Button>
  <Image Source="mx-app://Images/add.png"/>
</Button> 
```

我已经尝试将上述图像设置为复制本地，然后使用不同的构建操作，当我运行应用程序时，图像永远不会显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T06:42:32.327

如果您将图像包含在应用程序包中，则应将它们标记为内容（默认情况下，将它们添加到项目中时会标记为内容）。

假设您的项目中有一个名为 Images 的顶级文件夹，您的第一次调用应该可以工作。

您的第二次调用应该是（它只是第一次的更明确的版本）：

```
<Button>
  <Image Source="ms-appx:///Images/add.png"/>
</Button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:22:07.007

尝试将每个图像的构建操作设置为资源。

然后你应该可以写

```
<Button>
    <Image Source="/Images/add.png"/>
</Button> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-03T17:06:16.493

右键单击图像。属性 -> 构建操作。确保“构建行动”是内容

# android - 不幸的是，Facebook 好友列表已停止

> ID：14332060
> 
> 赞同：0
> 
> 时间：2013-01-15T06:13:36.783
> 
> 标签：android, android-emulator

我制作了一个应用程序，在其中获取我所有 Facebook 朋友的列表，但现在我决定在我的应用程序中添加 Tab 功能，但每当我运行我的应用程序时都会收到错误消息：

```
 Unfortunately Facebook Friends List has stopped 
```

*Logcat 说：*

```
01-15 11:34:23.526: E/AndroidRuntime(982): FATAL EXCEPTION: main
01-15 11:34:23.526: E/AndroidRuntime(982): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.chr.tatu.sample.friendslist/com.chr.tatu.sample.friendslist.TabSample}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.chr.tatu.sample.friendslist/com.chr.tatu.sample.friendslist.FriendsList}: java.lang.NullPointerException
01-15 11:34:23.526: E/AndroidRuntime(982):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-15 11:34:23.526: E/AndroidRuntime(982):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-15 11:34:23.526: E/AndroidRuntime(982):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-15 11:34:23.526: E/AndroidRuntime(982):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-15 11:34:23.526: E/AndroidRuntime(982):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-15 11:34:23.526: E/AndroidRuntime(982):  at android.os.Looper.loop(Looper.java:137)
01-15 11:34:23.526: E/AndroidRuntime(982):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-15 11:34:23.526: E/AndroidRuntime(982):  at java.lang.reflect.Method.invokeNative(Native Method)
01-15 11:34:23.526: E/AndroidRuntime(982):  at java.lang.reflect.Method.invoke(Method.java:511)
01-15 11:34:23.526: E/AndroidRuntime(982):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-15 11:34:23.526: E/AndroidRuntime(982):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-15 11:34:23.526: E/AndroidRuntime(982):  at dalvik.system.NativeStart.main(Native Method)
01-15 11:34:23.526: E/AndroidRuntime(982): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.chr.tatu.sample.friendslist/com.chr.tatu.sample.friendslist.FriendsList}: java.lang.NullPointerException
01-15 11:34:23.526: E/AndroidRuntime(982):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-15 11:34:23.526: E/AndroidRuntime(982):  at android.app.ActivityThread.startActivityNow(ActivityThread.java:2023)
01-15 11:34:23.526: E/AndroidRuntime(982):  at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
01-15 11:34:23.526: E/AndroidRuntime(982):  at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:347)
01-15 11:34:23.526: E/AndroidRuntime(982):  at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:749)
01-15 11:34:23.526: E/AndroidRuntime(982):  at android.widget.TabHost.setCurrentTab(TabHost.java:413)
01-15 11:34:23.526: E/AndroidRuntime(982):  at android.widget.TabHost.addTab(TabHost.java:240)
01-15 11:34:23.526: E/AndroidRuntime(982):  at com.chr.tatu.sample.friendslist.TabSample.addTab(TabSample.java:50)
01-15 11:34:23.526: E/AndroidRuntime(982):  at com.chr.tatu.sample.friendslist.TabSample.setTabs(TabSample.java:29)
01-15 11:34:23.526: E/AndroidRuntime(982):  at com.chr.tatu.sample.friendslist.TabSample.onCreate(TabSample.java:25)
01-15 11:34:23.526: E/AndroidRuntime(982):  at android.app.Activity.performCreate(Activity.java:5104)
01-15 11:34:23.526: E/AndroidRuntime(982):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-15 11:34:23.526: E/AndroidRuntime(982):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-15 11:34:23.526: E/AndroidRuntime(982):  ... 11 more
01-15 11:34:23.526: E/AndroidRuntime(982): Caused by: java.lang.NullPointerException
01-15 11:34:23.526: E/AndroidRuntime(982):  at com.chr.tatu.sample.friendslist.FriendsList.init(FriendsList.java:98)
01-15 11:34:23.526: E/AndroidRuntime(982):  at com.chr.tatu.sample.friendslist.FriendsList.onCreate(FriendsList.java:57)
01-15 11:34:23.526: E/AndroidRuntime(982):  at android.app.Activity.performCreate(Activity.java:5104)
01-15 11:34:23.526: E/AndroidRuntime(982):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-15 11:34:23.526: E/AndroidRuntime(982):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-15 11:34:23.526: E/AndroidRuntime(982):  ... 23 more 
```

*TabSample.java：*

```
 public class TabSample extends TabActivity {
/** Called when the activity is first created. */

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tabmain);
    setTabs() ;
}
private void setTabs()
{
    addTab("All", R.drawable.tab_menu, FriendsList.class);
    addTab("Current Month", R.drawable.tab_offers, FriendsList.class);

    addTab("Current Week", R.drawable.tab_location, FriendsList.class);
    addTab("Today", R.drawable.tab_reservation, FriendsList.class);
}

private void addTab(String labelId, int drawableId, Class<?> c)
{
    TabHost tabHost = getTabHost();
    Intent intent = new Intent(this, c);
    TabHost.TabSpec spec = tabHost.newTabSpec("tab" + labelId); 

    View tabIndicator = LayoutInflater.from(this).inflate(R.layout.tab_indicator, getTabWidget(), false);
    TextView title = (TextView) tabIndicator.findViewById(R.id.title);
    title.setText(labelId);
    ImageView icon = (ImageView) tabIndicator.findViewById(R.id.icon);
    icon.setImageResource(drawableId);

    spec.setIndicator(tabIndicator);
    spec.setContent(intent);
    tabHost.addTab(spec);
}
  } 
```

*好友列表.java：*

```
 public class FriendsList extends Activity  implements FacebookRequest, OnItemClickListener {
private static String LOG_TAG = "FriendsList";
private static JSONArray jsonArray;
private static ListView friendsList;
private Handler mHandler;
  private Button saveGreeting;
public void onCreate(Bundle savedInstanceState) {
    mHandler = new Handler();
    super.onCreate(savedInstanceState);     
    try {
        requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
        getActionBar().hide();
    } catch (Exception e) {}
    setContentView(R.layout.friends_list_screen);
    try {
        setProgressBarIndeterminateVisibility(false);
        } catch (Exception e) {}

    init();

    saveGreeting = (Button) findViewById(R.id.greeting);
    saveGreeting.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        customGreeting(v);
        }
    });
}

public void customGreeting(View v) {
    Intent myWebLink = new Intent(android.content.Intent.ACTION_VIEW);
    myWebLink.setData(Uri.parse("http://google.com/"));
    startActivity(myWebLink);
}

@Override
public void onDestroy() {
    super.onDestroy(); 
    exit();
}

private void exit() {
    if (friendsList != null)
        friendsList.setAdapter(null);
    friendsList = null;
    jsonArray = null;
    GetProfilePictures.clear();
}

@Override
public void onBackPressed() {
    super.onBackPressed();
    finish();
    exit();
}

private void init() {
        Bundle extras = getIntent().getExtras();
        String response = extras.getString("FRIENDS");
        Log.d(LOG_TAG, "onCreate()" + response);

        try {
            jsonArray = new JSONArray(response);
        } catch (JSONException e) {
            FacebookUtility.displayMessageBox(this, this.getString(R.string.json_failed));
        }

        friendsList = (ListView) findViewById(R.id.friends_list);
        friendsList.setOnItemClickListener(this);
        friendsList.setAdapter(new FriendListAdapter(this));
        friendsList.setTextFilterEnabled(true);

        // Removing the delimiters between the items. It looks prettier 
        friendsList.setDivider(null); 
        friendsList.setDividerHeight(0);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    Log.d(LOG_TAG, "onCreateOptionsMenu()"); 
    MenuInflater menuInflater = getMenuInflater();
    menuInflater.inflate(R.menu.menu, menu);
    return super.onCreateOptionsMenu(menu);
}
/**
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    Log.d(LOG_TAG, "onOptionsItemSelected()");
    switch (item.getItemId()) {
        case R.id.menu_refresh:
            FacebookUtility.logout(this);
            setProgressBarInDVisibility(true);
            return true;
        case R.id.retry_button:
        GetProfilePictures.clear();
        init();
        return true;                
        default:
            return super.onOptionsItemSelected(item); 

    }
}
**/

public void onRequestReceived(int result, String message) {
    Log.d(LOG_TAG, "onRequestReceived(" + result + ")");
    if(isFinishing())
        return;
   //   setProgressBarInDVisibility(false);
    switch (result) {
    case FacebookRequest.COMPLETED:
        FacebookUtility.clearSession(this);
        finish();
        break;
    case FacebookRequest.IO_EXCEPTION:
    case FacebookRequest.FILE_NOT_FOUND_EXCEPTION:
    case FacebookRequest.MALFORMED_URL_EXCEPTION:
    case FacebookRequest.FACEBOOK_ERROR:
        FacebookUtility.displayMessageBox(this, this.getString(R.string.logout_failed));
        break;
    }
}

public void onItemClick(AdapterView<?> adapterView, View view, int position, long id) {
//  Log.d(LOG_TAG, "onItemClick()");

     try {
            final long friendId;
            friendId = jsonArray.getJSONObject(position).getLong("uid");
            String name = jsonArray.getJSONObject(position).getString("name");
            new AlertDialog.Builder(this).setTitle(R.string.post_on_wall_title)
                    .setMessage(String.format(getString(R.string.post_on_wall), name))
                    .setPositiveButton(R.string.yes, new DialogInterface.OnClickListener() {
                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            Bundle params = new Bundle();

                            params.putString("to", String.valueOf(friendId));
                            params.putString("caption", getString(R.string.app_name));
                            params.putString("description", getString(R.string.app_desc));
                            params.putString("picture", FacebookUtility.HACK_ICON_URL);
                            params.putString("name", getString(R.string.app_action));
                            FacebookUtility.facebook.dialog(FriendsList.this, "feed", params,
                                    (DialogListener) new PostDialogListener());
                        }

                    }).setNegativeButton(R.string.no, null).show();
        } catch (JSONException e) {
            showToast("Error: " + e.getMessage());
        }
    }

    /*
* Callback after the message has been posted on friend's wall.
*/
    public class PostDialogListener extends BaseDialogListener {
        @Override
        public void onComplete(Bundle values) {
            final String postId = values.getString("post_id");
            if (postId != null) {
                showToast("Message posted on the wall.");
            } else {
                showToast("No message posted on the wall.");
            }
        }
    }

    public void showToast(final String msg) {

        mHandler.post(new Runnable() {
            @Override
            public void run() {
                Toast toast = Toast.makeText(FriendsList.this, msg, Toast.LENGTH_LONG);
                toast.show();
            }
        });
    }

public class FriendListAdapter extends BaseAdapter implements SectionIndexer {
    private LayoutInflater mInflater;

    private GetProfilePictures picturesGatherer = null;
    FriendsList friendsList;
    private String[] sections;

    Hashtable<Integer, FriendItem> listofshit = null;

    public FriendListAdapter(FriendsList friendsList) {
        Log.d(LOG_TAG, "FriendListAdapter()");
        this.friendsList = friendsList;
        sections = new String[getCount()];
        listofshit = new Hashtable<Integer, FriendItem>();
        for (int i = 0; i < getCount(); i++) {
            try {

                sections[i] = jsonArray.getJSONObject(i).getString("name").substring(0);
                sections[i] = jsonArray.getJSONObject(i).getString("birthday").substring(1);

                } catch (JSONException e) {
                sections[i] = "";
                Log.e(LOG_TAG, "getJSONObject: " + e.getMessage());
            }
        }
        if (picturesGatherer == null) {
            picturesGatherer = new GetProfilePictures();
        }
        picturesGatherer.setAdapterForListener(this);
        mInflater = LayoutInflater.from(friendsList.getBaseContext());
    }

    public int getCount() {
        Log.d(LOG_TAG, "getCount()");
        if (jsonArray == null)
            return 0;
        return jsonArray.length();
    }

    public Object getItem(int position) {
        Log.d(LOG_TAG, "getItem()");
        return listofshit.get(position);
    }

    public long getItemId(int position) {
        Log.d(LOG_TAG, "getItemId()");
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        Log.d(LOG_TAG, "getView(" + position + ")");

        JSONObject jsonObject = null;
        try {
            jsonObject = jsonArray.getJSONObject(position);
        } catch (JSONException e) {
            Log.e(LOG_TAG, "getJSONObject: " + e.getMessage());
        }

        FriendItem friendItem;

        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.single_friend, null);
            friendItem = new FriendItem();

            convertView.setTag(friendItem);
        }
        else {
            friendItem = (FriendItem) convertView.getTag();
        }

        friendItem.friendPicture = (ImageView) convertView.findViewById(R.id.picture_square);
        friendItem.friendName = (TextView) convertView.findViewById(R.id.name);
        friendItem.friendDob = (TextView) convertView.findViewById(R.id.dob);
        friendItem.friendLayout = (RelativeLayout) convertView.findViewById(R.id.friend_item);

        try {
            String uid = jsonObject.getString("uid");
            String url = jsonObject.getString("pic_square");
            friendItem.friendPicture.setImageBitmap(picturesGatherer.getPicture(uid, url));
        } catch (JSONException e) {
            Log.e(LOG_TAG, "getJSONObject: " + e.getMessage());
            friendItem.friendName.setText("");
            friendItem.friendDob.setText("");
        }

        try {
            friendItem.friendName.setText(jsonObject.getString("name"));
            friendItem.friendDob.setText(jsonObject.getString("birthday"));
        } catch (JSONException e) {
            Log.e(LOG_TAG, "getJSONObject: " + e.getMessage());
            friendItem.friendName.setText("");
            friendItem.friendDob.setText("");
        }

        listofshit.put(position, friendItem);

        return convertView;
    }

    public int getPositionForSection(int position) {
        return position;
    }

    public int getSectionForPosition(int position) {
        return position;
    }

    public Object[] getSections() {
        return sections;
    }
}

class FriendItem {
    TextView friendDob;
    int id;
    ImageView friendPicture;
    TextView friendName;
    RelativeLayout friendLayout;

}
} 
```

# windows-phone-7 - 如何在winRT中为动态创建的图像添加反弹效果？

> ID：14332074
> 
> 赞同：0
> 
> 时间：2013-01-15T06:14:45.730
> 
> 标签：windows-phone-7, windows-runtime

我的目标是在 for 循环中为动态创建的图像提供反弹效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:35:04.400

```
var sb = new Storyboard();
Storyboard.SetTarget(sb, imageTranslateTransform);
sb.RepeatBehavior = RepeatBehavior.Forever;
sb.AutoReverse = true;
var da = new DoubleAnimation();
Storyboard.SetTargetProperty(da, "Y");
da.From = 0;
da.To = 100;
da.Duration = TimeSpan.FromSeconds(1d);
da.EasingFunction = new QuadraticEase {EasingMode = EasingMode.EaseOut};
sb.Children.Add(da);
sb.Begin(); 
```

# java - 端点的骆驼处理器

> ID：14332079
> 
> 赞同：2
> 
> 时间：2013-01-15T06:15:04.663
> 
> 标签：java, apache-camel

我正在尝试使用 Camel，发现它是一种方便的端点集成工具。我设置了以下实验应用程序：

第一个端点是一个简单的 http-get 请求（在命令行上使用 curl）。这与使用 Jetty 的中央交换机连接（这是基于 Camel 的应用程序）。这会进行一些基本的修改并将请求传递给另一个处理请求的端点（Thrift 服务器）。然后将其响应路由回命令行客户端。因此，该设置是一种第 3 层过度设计的 Hello-world 架构。

我的路线通常采用这种形式：

```
from("jetty:http://localhost:8080/hello").process(new DummyProcessor()).process(new HelloProcessor()); 
```

我的问题如下：

鉴于 HelloProcessor 将 Thrift 消息发送到另一个端点进行处理，这不应该是一个组件吗？将处理器用于此类任务是一种好的（可接受的）做法吗？此外，如果确实可以接受，那么编写组件有什么好处。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T09:26:51.750

如果您打算在一条或几条路线中使用它，那么编写组件并没有任何好处。

如果您打算将来在多个路由中使用此处理器，并且您需要一种通过某些参数配置它的方法 - 那么您通常会编写自己的组件。它也可能使路线更具可读性。组件也是在不同的 Camel 应用程序和项目之间共享的简单工件。

```
from("file:///var/files/inbox").to("http://www.example.com/");
vs
from("file:///var/files/inbox").process(sendHttpToExampleDotComProcessor); // or whatever 
```

如果它是一次性使用 - 不要过于复杂。

# c# - C＃。MSMQ . 单条消息的最大大小

> ID：14332080
> 
> 赞同：14
> 
> 时间：2013-01-15T06:15:10.333
> 
> 标签：c#, size, message, msmq

使用**msmq**我想发送一条消息（***接近 1 GB***）。我想发送*字节数组*。但我只能发送**4 MB**。**我怎样**才能绕过这个限制？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-15T06:48:05.793

如您所知，MSMQ 中消息的最大大小为 4Mb，最好使用其他一些解决方案。

**解决方案：** 如果要传输超过此大小的数据，则必须在发送方将其切割成块，并在接收方重新组合。

**为什么 MSMQ 消息有 4MB 的限制？** 看看[这个](http://blogs.msdn.com/b/johnbreakwell/archive/2007/08/22/why-is-there-a-4mb-limit-on-msmq-messages.aspx)博客。

**如何使用 Microsoft 消息队列发送大于 4 MB 的文件**？ [这里](http://support.microsoft.com/kb/198686/en-us)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-15T07:12:48.930

你必须坚持纯 MSMQ 吗？如果您可能考虑切换到[NServiceBus](http://nservicebus.com/)，它有一个称为[DataBus](http://support.nservicebus.com/customer/portal/articles/894156-attachments-databus-sample)的功能，它可以有效地将大型有效负载放置在 MSMQ 之外，但会将有效负载与 MSMQ 消息联系起来。

（根据我的经验，这也使得使用 C# 更愉快地使用 MSMQ。但是 YMMV）

* * *

如果你不能使用 NServiceBus，你至少可以从中得到启发。生成一个随机文件名，将内容存储在两个端点都可以访问的共享上，在您的消息中包含文件名。

# php - 使用 PHP 中的嵌套 while 循环从文件中获取值

> ID：14332081
> 
> 赞同：0
> 
> 时间：2013-01-15T06:15:14.767
> 
> 标签：php, arrays, file

我的PHP代码如下：

```
$file1 = 'file1.txt';
$file2 = 'file2.txt';
$files1 = fopen($file1,'r');
$files2 = fopen($file2,'r');
$title = "";    
while(!feof($files1)){
$data1 = explode(';', fgets($files1));
    while(!feof($files2)){
        $data2 = explode(';', fgets($files2));      

    }
    //I want to output $data2[0] in here
    //and want to make the calculation between $data1[0] - $data2[0]
    // The problem is that I can not use the $data1[0] outside the while loop of file2 that make me can not calculation.

} 
```

我在代码中评论的问题。任何知道的人请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:19:09.267

因为 while 循环是嵌套的，所以您仍然可以`$data1`在您创建的 while 循环内使用`$data2`，因为它也在您定义的 while 循环内`$data1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:17:34.403

```
$file1 = 'file1.txt';
$file2 = 'file2.txt';
$files1 = fopen($file1,'r');
$files2 = fopen($file2,'r');
$title = "";    
while(!feof($files1)){
$data1 = explode(';', fgets($files1));
    while(!feof($files2)){
        $data2 = explode(';', fgets($files2));      
        $data2Array[]=$data2;
    }

     // You can use $data2Array[0] here now

    //I want to output $data2[0] in here
    //and want to make the calculation between $data1[0] - $data2[0]
    // The problem is that I can not use the $data1[0] outside the while loop of file2 that make me can not calculation.

} 
```

# mysql - 使用操作符之间的 Sql 选择

> ID：14332084
> 
> 赞同：1
> 
> 时间：2013-01-15T06:15:28.383
> 
> 标签：mysql, sql, select

在我的数据库表中，有两个名为salary_to 和salary_from 的字段。现在在我网站的前端，用户可以在输入字段中输入薪水，比如20000。现在我想在数据库中检查是否有任何行有salaryto 和salaryfrom 之间值'20000'所在的位置。我想要的算法看起来像这样

```
 SELECT all ROW where salaryto is less than 20000 and salaryfrom is greater than 20000 
```

我可以使用 between 运算符来执行这种过滤，或者我只是使用 >,< 运算符来执行这种过滤吗？前提是我为我的项目使用 mysql 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:16:33.000

between 运算符`INCLUSIVE`意味着它包含 START 和 END 值。虽然`< >`是独家的。

```
SELECT *
FROM  tableName
WHERE salaryto < 20000 and salaryfrom > 20000 
```

因此，此处获取的行的`salaryto`值为 19999 及以下 AND`salaryfrom`值为 20001 及以上，假设它增加 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:21:58.017

**你可以使用这个：**

```
SELECT * FROM yourTable WHERE 2000 BETWEEN salary_to AND salary_from 
```

**但这是推荐的：**

```
SELECT * FROM yourTable WHERE (salary_to < 2000) and (salary_from > 2000) 
```

# android - 在android中drawable中的图像中设置名称或id

> ID：14332086
> 
> 赞同：0
> 
> 时间：2013-01-15T06:15:40.487
> 
> 标签：android, random, android-gridview, android-resources

我正在尝试使用 gridView 创建一个 android 应用程序。在此应用程序中，我尝试将图像随机添加到 GridView 中。我有 5 张图像，这些图像添加到了可绘制对象中，例如 R.drawable.c0、R.drawable.c1、R.drawable.c2、R.drawable.c3、R.drawable.c4。

当我们单击每个网格时，每个网格中的图像会随机更改。我的编码工作正常，可以在每个网格单击中随机更改图像。但是我需要帮助来获取图像名称。

```
 public class MainActivity extends Activity {
 GridView gridview;
 ImageView imageView ;

 public static Integer[] mThumbIds = {
    R.drawable.c0, R.drawable.c1,
    R.drawable.c2, R.drawable.c3,
    R.drawable.c4,

    R.drawable.c0, R.drawable.c1,
    R.drawable.c2, R.drawable.c3,
    R.drawable.c4,

    R.drawable.c0, R.drawable.c1,
    R.drawable.c2, R.drawable.c3,
    R.drawable.c4,

    R.drawable.c0, R.drawable.c1,
    R.drawable.c2, R.drawable.c3,
    R.drawable.c4,

    R.drawable.c0, R.drawable.c1,
    R.drawable.c2, R.drawable.c3,
    R.drawable.c4,

    R.drawable.c0, R.drawable.c1,
    R.drawable.c2, R.drawable.c3,
    R.drawable.c4,

    R.drawable.c0, R.drawable.c1,
    R.drawable.c2, R.drawable.c3,
    R.drawable.c4,

    R.drawable.c0, R.drawable.c1,
    R.drawable.c2, R.drawable.c3,
    R.drawable.c4,

    R.drawable.c0, R.drawable.c1,
    R.drawable.c2, R.drawable.c3,
    R.drawable.c4,

    R.drawable.c0, R.drawable.c1,
    R.drawable.c2, R.drawable.c3,
   };
   @Override
   public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.activity_main);
    gridview = (GridView) findViewById(R.id.gridview);
   gridview.setAdapter(new ImageAdapter(this));
   gridview.setOnItemClickListener(new OnItemClickListener() {
       public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
        //gridview.getId();
         imageView = (ImageView) v;
         Random r=new Random();
            int i=r.nextInt(16);
            Log.e("i",""+i);
          imageView.setImageResource(mThumbIds[i]);

          ImageAdapter im = (ImageAdapter)parent.getAdapter();

       }

      @Override
     public boolean onCreateOptionsMenu(Menu menu) {
      getMenuInflater().inflate(R.menu.activity_main, menu);
      return true;
     }

    public class ImageAdapter extends BaseAdapter {
      private Context mContext;

  // private GridItem[] items;

   public ImageAdapter(Context c) {
       mContext = c;
   }

   public int getCount() {
       return mThumbIds.length;
   }

   public Object getItem(int position) {
       return position;
   }

   public long getItemId(int position) {
       return position;
   }

   // create a new ImageView for each item referenced by the Adapter
   public View getView(int position, View convertView, ViewGroup parent) {
       ImageView imageView;
       if (convertView == null) {  // if it's not recycled, initialize some attributes
           imageView = new ImageView(mContext);
           imageView.setLayoutParams(new GridView.LayoutParams(40,40 ));
           imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
           imageView.setPadding(3, 3, 3, 3);
       } else {
           imageView = (ImageView) convertView;
       }

       Random r=new Random();
       int i=r.nextInt(5);

       imageView.setImageResource(mThumbIds[i]);
       return imageView;
     }

   }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:22:31.327

使用 View 类的 set/getTag 方法。您可以将任何对象附加到视图并稍后检索它。

```
imageView.setImageResource(mThumbIds[i]);
imageView.setTag(mThumbIds[i]); 
```

之后

```
Integer thumbId = (Integer)imageView.getTag(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:03:11.887

使用底座适配器内的支架并更改您的`getview()`并为您的单元格使用 xml

```
 public  class ViewHolder {
        ImageView img;
        }

 public View getView(int position, View convertView, ViewGroup parent) {
               ViewHolder holder;
               if(convertView==null){
                    holder=new ViewHolder();
                    LayoutInflater li = getLayoutInflater();
                    convertView = li.inflate(R.layout.list_item, null);
                    holder.img = (ImageView)convertView.findViewById(R.id.imgView);
                    convertView.setTag(holder); 
                  }
                else
                {
                    holder = (ViewHolder)convertView.getTag();
                }

   Random r=new Random();
   int i=r.nextInt(5);

   holder.img.setImageResource(mThumbIds[i]);//edited
   return convertView;
} 
```

`ViewHolder`允许您处理回收。并且`XML`为您的单元格将在运行时为您提供更大的灵活性和更少的复杂性和计算。

# sql-server - 什么是 MS SQL SERVER 中的更新功能

> ID：14332091
> 
> 赞同：3
> 
> 时间：2013-01-15T06:16:11.983
> 
> 标签：sql-server, sql-server-2008

嗨，昨晚我和我的一位前辈讨论，他问了我一个问题。这真的让我很惊讶，而且我真的从来没有听说过。什么是 Sql server 中的 UPDATE 函数。

不是我们使用的更新语句。

真的是sql server中的任何功能

```
UPDATE () 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T06:17:54.623

[UPDATE() (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187326.aspx)

> 返回一个布尔值，该值指示是否对表或视图的指定列进行了 INSERT 或 UPDATE 尝试。UPDATE() 用于 Transact-SQL INSERT 或 UPDATE 触发器主体内的任何位置，以测试触发器是否应执行某些操作。

# mongodb - 查看最后一次更新 MongoDB 的最快方法是什么

> ID：14332101
> 
> 赞同：1
> 
> 时间：2013-01-15T06:17:08.533
> 
> 标签：mongodb, long-polling

我正在编写一个长轮询脚本来检查我的 mongo 集合中的新文档，而我知道检查循环的过去迭代中是否进行了更改的唯一方法是进行查询以获取最后一个文档的 ID 并解析该 ID 中的时间戳并查看它是否大于自我上次发出请求以来剩余的时间戳。

是否有某种方法不涉及每次都进行查询或使查询最快的方法？

我在想这样的查询：

```
db.chat.find().sort({_id:-1}).limit(1); 
```

但它将使用 PHP 驱动程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:03:11.813

最快的方法是在`timestamp`字段上创建索引。

`Creating index:`

```
db.posts.ensureIndex( { timestamp : 1 } ) 
```

`Optimizes this query:`

```
db.posts.find().sort( { timestamp : -1 } ) 
```

`findOne`只给你一个最后的时间戳。

很高兴帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:56:28.973

@Zagoulkin您的建议肯定会在所需的情况下有所帮助。但是我不认为 sort() 与 findOne() 一起使用。

# c++ - CMake with boost（在 Windows 上）：找不到库？

> ID：14332105
> 
> 赞同：4
> 
> 时间：2013-01-15T06:17:26.150
> 
> 标签：c++, boost, cmake, shared-libraries, static-libraries

我正在尝试使用 CMake 构建我的项目。我也在使用boost。我的 CMakeLists.txt 文件中的 find package 语句是：

find_package(Boost 1.42 所需组件

Python

系统

文件系统

序列化

线

程序选项

正则表达式

test_exec_monitor )

构建失败，我得到的错误消息是：找不到以下 Boost 库：

```
 boost_system
      boost_filesystem
      boost_serialization
      boost_thread
      boost_program_options 
```

当我检查我的 lib 目录时，我发现这些库的名称是：libboost< library_name >-vc100-mt.lib 而不是 boost_< Library_name >

事实上，当我根据 boost_<LibraryName> 前缀重命名我的 lib 文件中的单个库时，它不会抱怨该库。

我看到了 2 个相同的解决方案：

1.在 CMakeLists.txt 文件中进行更改，以便它搜索具有正确前缀（和后缀）的库。

2.其他

什么可能是最好的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T06:30:03.470

来自[FindBoost.cmake](https://github.com/Kitware/CMake/blob/v2.8.10.2/Modules/FindBoost.cmake)

> 最后三个变量也可用作环境变量：另外，请注意它们完全大写，除了 Boost_DIR。
> 
> Boost_DIR 或 搜索 **BOOST_ROOT**或**BOOSTROOT** Boost 的首选安装前缀。如果模块在找到正确的 Boost 安装时遇到问题，请设置此项。

使用这些变量指向安装了 boost 库的文件夹。例如

> cmake .. -DBOOST_ROOT=C:/Boost

# hadoop - 为什么 map reduce 对键进行排序而不是简单地将相同的键组合在一起？

> ID：14332107
> 
> 赞同：0
> 
> 时间：2013-01-15T06:17:31.703
> 
> 标签：hadoop, mapreduce

如果 IMO Hadoop 简单地将相同的密钥组合在一起，则可以节省 CPU 和内存

（就像在[这个答案](https://stackoverflow.com/a/14329793/807893)中一样`O(n)`），

而不是严格排序键（即`O(nlgn)`）。

是否有任何应用程序依赖于严格排序的键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:15:49.453

没错，Map/Reduce 作业不一定需要对键进行排序，Hadoop 这样做主要是因为它用于分组，因为它很方便，而不是因为它是必要的，如果你的应用程序不依赖于订购。

它实际上正在[MAPREDUCE Jira](https://issues.apache.org/jira/browse/MAPREDUCE-1639)上进行辩论，我建议阅读那里的所有评论以获取更多实施细节。

有趣的轶事是，[MARS 项目](http://www.cse.ust.hk/catalac/papers/mars_pact08.pdf)报告说，使用散列而不是使用他们自己的实现进行排序，提高了 45%。

# python - 为什么比较返回整数而不是布尔值？

> ID：14332109
> 
> 赞同：5
> 
> 时间：2013-01-15T06:17:38.863
> 
> 标签：python

我正在测试一些代码

```
True = 2
print 1 - (1 == 1)
print True == (1 == 1) 
```

然后我期待：

```
-1
True 
```

但我得到了这个：

```
0
False 
```

所以，我做了任何 python 程序员都会做的事情：反汇编它。

```
def f():
    True = 2
    print 1 - (1 == 1)
    print True == (1 == 1)

2           0 LOAD_CONST               1 (2)
            3 STORE_FAST               0 (True)

3           6 LOAD_CONST               2 (1)
            9 LOAD_CONST               2 (1)
           12 LOAD_CONST               2 (1)
           15 COMPARE_OP               2 (==)
           18 BINARY_SUBTRACT     
           19 PRINT_ITEM          
           20 PRINT_NEWLINE       

4          21 LOAD_FAST                0 (True)
           24 LOAD_CONST               2 (1)
           27 LOAD_CONST               2 (1)
           30 COMPARE_OP               2 (==)
           33 COMPARE_OP               2 (==)
           36 PRINT_ITEM          
           37 PRINT_NEWLINE       
           38 LOAD_CONST               0 (None)
           41 RETURN_VALUE 
```

然后就有点清楚了，是用`COMPARE_OP (==)`. Witch 应该返回一个布尔值，但它似乎返回一个整数。任何想法为什么？

**编辑：**

简而言之，吸取的教训：更改 True 或 False 的值不会改变布尔逻辑在幕后的表示方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T06:22:11.090

在 Python 中，`bool`是 的子类`int`，`False`和分别具有和`True`的等价值。此外，可以返回它喜欢的任何对象；碰巧的是，对于内置类型，它返回实例。`0``1``__eq__()``bool`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T06:26:03.773

在我看来，您的误解是认为`True`像变量一样对待实际上会改变布尔运算的结果。它没有。 `True`默认情况下用于表示布尔值，但是当您更改其值时它会失去该功能。但是，这不会改变关于如何处理整数的布尔值的规则。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T06:33:59.747

我认为 Ashwini Chaudhary 对这个问题的评论是理解为什么事情没有按照你期望的方式工作的关键。

Python 中的布尔运算符通常返回`bool(1)`or `bool(0)`，而不是 or 的`True`值`False`。在 Python 2 中，`True`和`False`只是分别绑定到`bool(1)`和的名称`bool(0)`。如果您将名称重新绑定`True`到不同的值（例如`2`），它不会更改比较的返回值，它仍然是`bool(1)`。

在 Python 3 中，通过将名称`True`和`False`关键字设为关键字来回避这个问题，因此它们无法重新生成新值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-15T06:28:16.097

```
>>> True = 2 
```

在这里你分配`2`给`True`. 所以现在`True`在模块的范围内实际上是`2`：

```
>>> print(True)
2 
```

* * *

`1 == 1`是`True`。`True`等于。[_`1`](http://docs.python.org/2/library/stdtypes.html#truth-value-testing)

```
>>> 1 - (1 == 1)
0 
```

你可以问为什么不是`2`，如上所述。好吧，变量在模块的范围内`True`等于，并且只是将引用（标签）返回给 real 。一个实数等于，所以等于。`2``(1==1)``True``1==1``True``1``1 - (1 == 1)``0`

* * *

```
>>> print True == (1 == 1)
False 
```

这里`1 == 1`再次返回对 real 的引用`True`。但是`True`表达式的第一部分来自模块的范围，所以它实际上是`2`. 所以这个表达式实际上`2 == (True)`等于`False`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-15T06:22:43.303

当您从布尔值中减去和整数时，将使用其整数表示；因为它们是 的子类`int`。

`int(True)`是`1`，所以你有`1-1`哪个是`0`。

此外，`-1`是一个布尔值`True`（它不是“Falsey”值），因此期望作为答案也不准确：

```
>>> -1 == True
False
>>> -1 == False
False
>>> bool(-1)
True 
```

# python - 构建异步套接字教程：如何在 python 中连接监听套接字？

> ID：14332114
> 
> 赞同：4
> 
> 时间：2013-01-15T06:18:01.393
> 
> 标签：python, asynchronous, asyncore

蟒蛇 2.6 视窗 7

我正在尝试编写一个尽可能简单的关于如何编写协作多任务程序的教程。作为一个示例应用程序，我使用 python 的 asyncore 后端编写了一个聊天服务器。我认为这将是社区的宝贵资源。但是，我还没有让它工作，因此这篇文章。

结构如下。ChatServer 的一个实例在远程计算机上运行。它的套接字在 REMOTE_PORT 上侦听。当它检测到一个传入连接时，它会生成一个 ChatHandler 实例来协调与该连接的通信。现在，这个联系是谁？在用户的本地机器上，我们运行 ChatDaemon 的一个实例。这家伙在 LOCAL_PORT 上收听。当你像这样连接到他

```
import socket
s = socket.socket()
s.connect(('localhost',LOCAL_PORT)) 
```

他检测到连接并产生两个东西，一个 LocalListener 和一个 Connection。Connection 连接到服务器，从上面回答我们的问题。LocalListener 只是等待来自用户的数据。如果您发送数据

```
s.send("Hello, world!") 
```

LocalListener 将其拾取，并将其提供给 Connection，然后将其发送到 ChatServer。然后服务器将数据放入每个 ChatHandler 的缓冲区中，以发送给所有连接的客户端。当 Connection 接收到该数据时，它会将其传递给守护程序，后者将其打印到屏幕上。

（守护程序层似乎过于复杂，但如果没有它，您必须做其他复杂的事情来防止 asyncore 的 select() 循环中的热循环，同时保持用户发送数据的低延迟。我不想走那条路。）

**问题是与守护程序的连接似乎没有建立**。我的确切步骤是

在一个 python 会话中

```
d = ChatDaemon('localhost')
d.start() 
```

当我这样做时，我看到消息“聊天守护程序绑定到 'localhost:7668' 符合预期。

在另一个 python 会话中

```
import socket
s = socket.socket()
s.connect(('localhost',7668)) 
```

当我这样做时，我没有看到打印的“得到新的本地连接”行。

我编辑了我的 etc/hosts 文件以将“localhost”映射到 127.0.0.1，并安装了 Microsoft Loopback 适配器。

**编辑：**我发现并解决了这个问题。下面的代码现在应该可以作为使用 asyncore 的非常简单的聊天实现来接受了。

这里是源

```
import asyncore
import socket
import sys

LOCAL_HOST = 'localhost'
LOCAL_PORT = 7668
REMOTE_HOST = 'localhost'
REMOTE_PORT = 7667

class LocalListener(asyncore.dispatcher):
    """Receive data from user, putting into cxn's buffer"""
    def __init__(self, sock, cxn):
        self.cxn = cxn
        asyncore.dispatcher.__init__(self, sock)

    def writable(self):
        return False

    def readable(self):
        return True

    def handle_read(self):
        data = self.recv(4096)
        if data:
            self.cxn.buf = self.cxn.buf + data

class Connection(asyncore.dispatcher):
    """Mediates between user and server"""
    def __init__(self, host, port, master):
        asyncore.dispatcher.__init__(self)
        self.create_socket(socket.AF_INET, socket.SOCK_STREAM)
        self.connect((host,port))
        self.buf=""

    def writable(self):
        return len(self.buf) > 0

    def readable(self):
        return True

    def handle_read(self):
        data = self.recv(4096)
        if data:
            self.master.newMessage(data)

    def handle_write(self):
        sent = self.send(self.buf)
        self.buf = self.buf[sent:]

class ChatDaemon(asyncore.dispatcher):
    """Listen for local connections and dispatch in/out data"""
    ADDRESS_FAMILY = socket.AF_INET
    SOCKET_TYPE = socket.SOCK_STREAM
    def __init__(self, remoteHost, remotePort=REMOTE_PORT,
                 localHost=LOCAL_HOST, localPort=LOCAL_PORT):
        self.remoteHost = remoteHost
        self.remotePort = remotePort
        self.localHost = localHost
        self.localPort = localPort
        self.buffer = ""
        asyncore.dispatcher.__init__(self)

    def writable(self):
        return False

    def readable(self):
        return True

    def newMessage(self, data):
        print data

    def start(self):
        """Listen for user connection on local port"""
        self.create_socket(self.ADDRESS_FAMILY, self.SOCKET_TYPE)
        print("Chat deamon binding to '%s': %s"%(self.localHost,self.localPort))
        self.bind((self.localHost,self.localPort))
        self.listen(1)
        asyncore.loop()

    def handle_accept(self):
        """Spawn local reader and remote reader/writer"""
        print "Got new local connection"
        (connSock, localAddress) = self.accept()
        print("New connection address is %s"%localAddress)
        #Make a server connection
        cxn = Connection(self.remoteHost, self.remotePort, self)
        #Connect to local user
        LocalListener(connSock, cxn)

### SERVER ###

class ChatHandler(asyncore.dispatcher):
    def __init__(self, sock, map, server):
        self.server = server
        self.buffer = ''
        asyncore.dispatcher.__init__(self, sock, map)

    def writable(self):
        return len(self.buffer) > 0

    def readable(self):
        return True

    def handle_read(self):
        """Notify server of any new incoming data"""
        data = self.recv(4096)
        if data:
            self.server.newMessage(data, self)

    def handle_write(self):
        """send some amount of buffer"""
        sent = self.send(self.buffer)
        self.buffer = self.buffer[sent:]

class ChatServer(asyncore.dispatcher):
    """Receive and forward chat messages

    When a new connection is made we spawn a dispatcher for that
    connection.
    """
    ADDRESS_FAMILY = socket.AF_INET
    SOCKET_TYPE = socket.SOCK_STREAM
    def __init__(self, host=REMOTE_HOST, port=REMOTE_PORT):
        self.map = {}
        self.address = (host,port)
        self.clients = []
        asyncore.dispatcher.__init__(self, map=self.map)

    def serve(self):
        """Bind to socket and start asynchronous loop"""
        self.create_socket(self.ADDRESS_FAMILY, self.SOCKET_TYPE)
        self.bind(self.address)
        self.listen(1)
        asyncore.loop(map=self.map)

    def writable(self):
        return False

    def readable(self):
        return True

    def newMessage(self, data, fromWho):
        """Put data in all clients' buffers"""
        for client in self.clients:
            client.buf = client.buf + data

    def handle_accept(self):
        """Deal with newly accepted connection"""
        print 'got new connection'
        (connSock, clientAddress) = self.accept()
        self.clients.append(ChatHandler(connSock, self.map, self)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:24:42.023

问题是在ChatDaemon中我忘记了可读可写的“return”关键字

# java - 我启动tomcat，我的代码运行良好，但一段时间后发生通信链接故障异常

> ID：14332115
> 
> 赞同：0
> 
> 时间：2013-01-15T06:18:02.500
> 
> 标签：java, tomcat

我启动tomcat，我的代码运行良好，但有时会发生通信链接故障异常。

```
org.springframework.transaction.CannotCreateTransactionException: Could not open Hibernate Session for transaction; nested exception is org.hibernate.TransactionException: JDBC begin failed:
                at org.springframework.orm.hibernate3.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:596)
                at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)
                at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:335)
                at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:105)
                at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
                at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:621)
                at tm.dao.user.UserMasterDAO$$EnhancerByCGLIB$$12662d42.getLogin(<generated>)
                at tm.controller.teacher.BasicController.doSignInPOST(BasicController.java:269)
                at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
                at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
                at java.lang.reflect.Method.invoke(Method.java:616)
                at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
                at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426)
                at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414)
                at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
                at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
                at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
                at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
                at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
                at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
                at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
                at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
                at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
                at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
                at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
                at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
                at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
                at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
                at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
                at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
                at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
                at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
                at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861)
                at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606)
                at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
                at java.lang.Thread.run(Thread.java:679)
        Caused by: org.hibernate.TransactionException: JDBC begin failed:
                at org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:96)
                at org.hibernate.impl.SessionImpl.beginTransaction(SessionImpl.java:1353)
                at org.springframework.orm.hibernate3.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:555)
                ... 36 more
        Caused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

        Last packet sent to the server was 1 ms ago.
                at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
                at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
                at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
                at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
                at com.mysql.jdbc.Util.handleNewInstance(Util.java:406)
                at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1074)
                at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2985)
                at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2871)
                at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3414)
                at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1936)
                at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2060)
                at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2536)
                at com.mysql.jdbc.ConnectionImpl.setAutoCommit(ConnectionImpl.java:4874)
                at com.mchange.v2.c3p0.impl.NewProxyConnection.setAutoCommit(NewProxyConnection.java:881)
                at org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:91)
                ... 38 more
        Caused by: java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.
                at com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:2431)
                at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2882)
                ... 46 more` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-02T12:59:20.117

您还没有真正指定您的环境，或显示您的任何配置，但从您的堆栈跟踪中我可以看到您正在使用 Spring。

在您的 spring 配置 xml 文件中，您可能有一个“dataSource”bean 或类似于以下内容的东西：

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"> 
```

尝试将以下属性添加到该 bean：

```
<property name="validationQuery" value="select 1" /> 
```

此属性在此处解释：[DBCP 配置](http://commons.apache.org/proper/commons-dbcp/configuration.html)

# android - 如何在 Android 上使用网络摄像机

> ID：14332117
> 
> 赞同：1
> 
> 时间：2013-01-15T06:18:09.647
> 
> 标签：android, android-ndk, ip-camera

我想看 IP 摄像机和编码，在 Android 上流式传输

我找到了 3 个选项

1.  使用 ffmpeg
2.  使用 OpenCV
3.  使用 WebView、VideoView

我尝试了选项 1
，但我只能看到 SD CARD 中的视频
--enable-network 出错

所以我会尝试选项 2
是否可以按照我的意愿工作？

有人告诉我建议吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:28:18.307

您的帖子中缺少许多信息。所以我尝试猜测：IP 摄像头意味着您可以通过 TCP/IP（可能是 HTTP？）访问它们。因此，您不需要提供比仅图像检索更多的功能的这些庞大的软件包之一。您只需打开与相机的连接并获取它提供的图像。意味着您必须找出相机提供的通信协议和图像/视频格式。

# java - 如何从受密码保护的私钥文件中创建 PrivateKey？

> ID：14332122
> 
> 赞同：0
> 
> 时间：2013-01-15T06:18:53.420
> 
> 标签：java, private-key

我有一个受密码保护的私钥文件（我有密码）。

我需要把它放在 java.security.PrivateKey 格式。谁能告诉我最安全的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:27:14.380

如果密钥（带有证书）存储在 PKCS#12 中，您可以使用 Java 中的[KeyStore](http://docs.oracle.com/javase/6/docs/api/java/security/KeyStore.html)。

其他充气城堡可以帮助你（我没有充气城堡的经验）。

# eclipse - Eclipse Indigo 和 SVN

> ID：14332125
> 
> 赞同：1
> 
> 时间：2013-01-15T06:19:02.730
> 
> 标签：eclipse, svn

我在 Eclipse 中使用 SVN。在我的 IDE 中的一些资源旁边会出现一个红色感叹号，而另一些则显示一个数据库图标。此外，每个文件夹旁边都有一些褪色的数字。所有这些是什么意思？如何删除红色感叹号和数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T04:58:02.170

红色感叹号显示构建路径错误，因为您可以看到我缺少 jar 文件的错误，这就是它显示此标记的原因，如果我从构建路径中删除此 jar 或者如果我将 jar 添加到正确的位置错误将被删除。看图片。

![这是显示差异的图像](../Images/4a107a191f81b81a361df8424c9fd714.png)

1：该数字显示文档的版本，SVN管理的版本，当您对任何文档进行一些更改并将其提交到SVN时，此版本号将得到更新。

2：在您的情况下，希望图像和 doc 文件（即 jpg、png 和 docx）不正确地存在于该位置。删除此刷新工作空间并重建项目。

3：还有一件事可能是您知道，但是有一个 (>) 大于符号表明该文件已被修改且尚未在 SVN 提交，只要您在 SVN 提交该文件，sing 将被删除。

希望这一切对你有帮助...

# c# - 在不使用 Mutex 类的情况下，我必须在不同应用程序的 xml 文件中写入日志

> ID：14332126
> 
> 赞同：1
> 
> 时间：2013-01-15T06:19:08.210
> 
> 标签：c#, asp.net, xml, multithreading

```
public void WriteXmlLog(string logType, string logFlag, string logModule, string logLocation, string logText, string logStackTrace)
    {
        Mutex objMutex = new Mutex(false, @"Global\MySharedLog");
        objMutex.WaitOne();
        try
        {
            if(!File.Exists(_logFilePath))
            {
                File.WriteAllText(_logFilePath, "<?xml version='1.0' encoding='utf-8' standalone='yes'?>\r\n <AppXmlLogWritter></AppXmlLogWritter>");
            }

            string currentDateTime = DateTime.Now.ToString("yyyyMMddHHmmss");
            XmlDocument xmlDoc = new XmlDocument();

            xmlDoc.Load(_logFilePath);
            XmlElement newelement = xmlDoc.CreateElement("LogData");
            XmlElement xmlLogID = xmlDoc.CreateElement("LogID");
            XmlElement xmlLogDateTime = xmlDoc.CreateElement("LogDateTime");
            XmlElement xmlLogType = xmlDoc.CreateElement("LogType");
            XmlElement xmlLogFlag = xmlDoc.CreateElement("LogFlag");
            XmlElement xmlLogApplication = xmlDoc.CreateElement("LogApplication");
            XmlElement xmlLogModule = xmlDoc.CreateElement("LogModule");
            XmlElement xmlLogLocation = xmlDoc.CreateElement("LogLocation");
            XmlElement xmlLogText = xmlDoc.CreateElement("LogText");
            XmlElement xmlLogStackTrace = xmlDoc.CreateElement("LogStackTrace");

            xmlLogID.InnerText = _logIDPrefix + currentDateTime + randomNumber;
            xmlLogDateTime.InnerText = currentDateTime;
            xmlLogType.InnerText = ((LogTypes)Convert.ToInt32(logType)).ToString();
            xmlLogFlag.InnerText = logFlag;
            xmlLogApplication.InnerText = _logApplication;
            xmlLogModule.InnerText = logModule;
            xmlLogLocation.InnerText = logLocation;
            xmlLogText.InnerText = logText;
            xmlLogStackTrace.InnerText = logStackTrace;

            newelement.AppendChild(xmlLogID);
            newelement.AppendChild(xmlLogDateTime);
            newelement.AppendChild(xmlLogType);
            newelement.AppendChild(xmlLogFlag);
            newelement.AppendChild(xmlLogApplication);
            newelement.AppendChild(xmlLogModule);
            newelement.AppendChild(xmlLogLocation);
            newelement.AppendChild(xmlLogText);

            xmlDoc.DocumentElement.AppendChild(newelement);
            xmlDoc.Save(_logFilePath);

        }
        finally
        {
            objMutex.ReleaseMutex();
        }
    } 
```

我正在几个不同应用程序的 xml 文件中编写日志。请参阅下面的代码，我使用 Mutex 类进行锁定目的意味着当两个线程同时出现时，如果第一个线程执行任务，mutex.waitone() 方法将不会释放第二个线程。是否可以不使用 Mutex 类我必须在不同应用程序的 xml 文件中写入日志

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T06:23:58.563

`Mutex`是一种跨多个进程同步访问共享资源的标准技术。如果它是同一进程中的并发访问，您可以使用更轻量级的类，例如[`ReaderWriterLockSlim`](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx). 但是由于您需要支持跨进程同步，所以互斥锁是要走的路。

或者也许开始问自己在这种情况下是否适合将日志写入文本文件。您是否考虑过记录到将为您处理并发的 EventLog？您是否考虑过将日志记录到一个共享数据库，该数据库也将为您处理并发？

顺便说一句，您是否考虑过使用日志库来执行日志记录，而不是手动执行一些`XmlDocument`？.NET 已经具有内置的跟踪功能。也许您应该在推出此类自定义解决方案之前探索它们。

你现在可能应该问自己很多问题。

# objective-c - 目标c解析从wcf服务返回的json

> ID：14332132
> 
> 赞同：0
> 
> 时间：2013-01-15T06:19:48.600
> 
> 标签：objective-c, wcf, wcf-data-services, nsjsonserialization

所以我最近问了这个问题，我能够让它工作

[目标 c 调用 wcf 休息服务请求](https://stackoverflow.com/questions/14314316/objective-c-calling-wcf-rest-service-request)

这是我的代码

```
NSString *urlStringRequest = [NSString stringWithFormat:@"http://service.mydomain.com/UserAccountService.svc/UserLogin?id=%@&pword=%@", email, incPassword];

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:urlStringRequest]];
    [request setHTTPMethod:@"GET"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

    NSError *error = nil;
    NSURLResponse *response = nil;
    NSData *result = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

    id jsonResult = [self parseJsonResult:result];

    NSLog(@"Json Result Woop: %@", jsonResult); 
```

parseJsonResult 与链接上的完全相同。我的问题是，每当我在 NSLog 上显示**jsonResult**时，它都会显示 json 结果，即：

```
Json Result Woop: {
    Authenticated = 0;
    Message = "Invalid Log In.";
} 
```

但我不太确定如何进入变量并检索密钥及其值。

我试图这样做：

```
NSError *jsonParseError = nil;
NSMutableArray *jsonArray = [NSJSONSerialization JSONObjectWithData:result options:NSJSONReadingMutableContainers|NSJSONReadingAllowFragments error:&jsonParseError];
if(!jsonArray)
    NSLog(@"Parse error: %@", jsonParseError);
else
    for(NSDictionary *item in jsonArray)
        NSLog(@"%@", item); 
```

使用**结果**变量，但它只会给我钥匙。

不太确定该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:32:23.503

JsonResult 已经是一个 NSDictionary，正如 NSLog 所证明的那样，它用花括号显示出来。只需使用

```
jsonResult[@"Message"] 
```

获取 Message 键的值。

# web2py - web2py 组件

> ID：14332136
> 
> 赞同：2
> 
> 时间：2013-01-15T06:19:59.783
> 
> 标签：web2py, web2py-modules

我想在同一个视图中加载不同的 web2py 组件，但不是同时加载。我有 5 个 .load 文件，它们具有用于不同场景的表单字段，这些文件由 onchange 选择脚本动态调用。web2py可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T15:05:35.303

是的，但在这种情况下，不要`LOAD()`在 web2py 视图中使用帮助程序，因为这会生成 Javascript，在页面加载后立即加载组件。相反，创建一个带有 id 的 div 来保存组件，并让您的事件处理程序以 div 的 id 作为目标`onchange`调用该函数：`web2py_component()`

```
<div id='mycomponent'></div>

<script>
$(function() {
  $('some_selector').change(function() {
    web2py_component('{{=URL('default', 'mycomponent')}}', target='mycomponent');
  });
});
</script> 
```

# java - 测试基于 Java 肥皂的 Web 服务的工具

> ID：14332138
> 
> 赞同：2
> 
> 时间：2013-01-15T06:20:05.323
> 
> 标签：java, web-services

谁能告诉我在 JAVA 中用于基于 SOAP 的 Web 服务的最佳 Web 服务测试工具。

如果该工具以 zip 安装和开源的形式提供，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T06:22:33.993

SOAPUI 是最好的[链接](http://www.soapui.org/)，是的，它是开源的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T06:21:43.790

SOAP-UI 是一个很棒的工具，并且有一个免费版本： http: [//www.soapui.org/](http://www.soapui.org/)

您构建测试套件和测试用例以针对您的 Web 服务运行。结果保存在 JUnit 样式的报告中。

测试断言可以通过 XPath 或脚本来完成。该工具公开了可通过 Groovy 脚本访问的对象模型。

大多数 Java 开发人员对该工具感到满意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T06:31:43.980

SOAP-UI 是测试 Web 服务的最佳工具。它提供

功能测试 负载测试 JMS 或 REST 服务测试 模拟服务，您可以在其中模拟静态响应或基于基于 Xpath 的查询请求模拟动态响应。它还提供了测试自动化服务的选项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T06:40:50.740

有一个很好的firefox插件可以访问soap webservice，你也可以试试。 [https://addons.mozilla.org/en-us/firefox/addon/soa-client/](https://addons.mozilla.org/en-us/firefox/addon/soa-client/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T06:27:09.603

[REST-Client](http://code.google.com/p/rest-client/)是另一个很棒的框架，如果您正在测试基于 REST 的服务

# python - 以附加模式将子进程输出转储到文件中

> ID：14332141
> 
> 赞同：6
> 
> 时间：2013-01-15T06:20:10.580
> 
> 标签：python, file-io, subprocess

我必须将子进程的输出转储到以附加模式打开的文件中

```
from subprocess import Popen

fh1 = open("abc.txt", "a+") # this should have worked as per my understanding

# fh1.readlines() # Adding this solves the problem 

p = Popen(["dir", "/b"], stdout = fh1, shell=True)

print p.communicate()[0]
fh1.close() 
```

但是，上面的代码会覆盖我的文件`abc.txt`不想要的文件，取消注释`fh1.readlines()`会将光标移动到适当的位置，这是一个临时解决方案

有什么基本的我失踪了。

```
In [18]: fh1 = open("abc.txt",'a')

In [19]: fh1.tell() # This should be at the end of the file
Out[19]: 0L

In [20]: fh1 = open("abc.txt",'r')

In [21]: print fh1.readlines()
['1\n', '2\n', '3\n', '4\n', '5\n'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-02T13:05:01.893

将光标放在文件末尾而不读取文件的一种简单易用的方法是使用：

```
fh1.seek(2)
# .seek(offset, [whence]) >> if offset = 2 it will put the cursor in the given position relatively
# to the end of the file. default 'whence' position is 0, so at the very end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T11:35:19.750

在我的 OS X 中，python 2.7 和 3.3 都可以正常工作。

```
adylab:Downloads adyliu$ cat ./a.txt
a
b
c
d
e
f
adylab:Downloads adyliu$ python -V
Python 2.7.2
adylab:Downloads adyliu$ python3 -V
Python 3.3.0
adylab:Downloads adyliu$ python -c "print(open('./a.txt','a').tell())"
12
adylab:Downloads adyliu$ python3 -c "print(open('./a.txt','a').tell())"
12 
```

在 python 文档中：

> stdin、stdout 和 stderr 分别指定执行程序的标准输入、标准输出和标准错误文件句柄。有效值为 PIPE、DEVNULL、现有文件描述符（正整数）、现有文件对象和无。PIPE 表示应该创建一个通往子级的新管道。DEVNULL 表示将使用特殊文件 os.devnull。默认设置为None，不会发生重定向；子文件句柄将从父文件继承。此外，stderr 可以是 STDOUT，这表明来自应用程序的 stderr 数据应该被捕获到与 stdout 相同的文件句柄中。

所以'Popen'进程不会重置文件对象的当前流位置。

# spring - Spring 3 按文件夹国际化

> ID：14332142
> 
> 赞同：2
> 
> 时间：2013-01-15T06:20:12.907
> 
> 标签：spring, properties, internationalization

我想以所有语言都由文件夹分隔的方式使用 Spring 的 i18n 实用程序。我计划使用这种文件夹结构来使事情比将所有内容都放在一个文件夹中更有条理：

*   i18n

    *   zh
        *   消息属性
        *   应用程序属性
    *   FR

        *   消息属性
        *   应用程序属性

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:22:06.560

> 这可能吗？

是的。

我最初想到的一个简单的解决方案是使用该[`basenames`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/support/ResourceBundleMessageSource.html#setBasenames%28java.lang.String...%29)属性设置消息源，如下所示：

```
<bean id="messageSource"
        class="org.springframework.context.support.ResourceBundleMessageSource">
    <property name="useCodeAsDefaultMessage" value="true" />
    <property name="basenames">
        <list>
            <value>i18n.en.messages</value>
            <value>i18n.en.application</value>
            <value>i18n.fr.messages</value>
            <value>i18n.fr.application</value>
        </list>
    </property>
</bean> 
```

不过再想一想，我意识到**上述方法行不通**。根据[`ResourceBundle`s 实例化 bundles 的策略](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ResourceBundle.html#getBundle%28java.lang.String,%20java.util.Locale,%20java.lang.ClassLoader%29)，给定一个 bundle 名称，bundle 列表中的第一个名称将解析该 bundle（例如，寻找`messages_fr.properties`策略将寻找`i18n/en/messages_fr.properties`，然后在未找到`i18n/en/messages.properties`时将其解析为默认值）。`messages_fr.properties`

您将需要一些基于自定义文件夹配置来发现您的捆绑包的东西。 **您必须编写自己的[MessageSource](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/MessageSource.html)实现**并在您的应用程序中使用它，而不是 Spring 提供的默认实现。一个基本的实现可能如下所示：

```
package pack.age;
import java.util.Locale;
import java.util.ResourceBundle;

import org.springframework.context.support.ResourceBundleMessageSource;

public class ByFolderResourceBundleMessageSource extends ResourceBundleMessageSource {
    private String rootFolder;

    @Override
    protected ResourceBundle getResourceBundle(String basename, Locale locale) {
        String langCode = locale.getLanguage().toLowerCase();
        String fullBaseName = this.rootFolder + "." + langCode + "." + basename;

        ResourceBundle bundle = super.getResourceBundle(fullBaseName, locale);
        if (bundle == null) {
            String defaultBaseName = this.rootFolder + ".Default." + basename;
            bundle = super.getResourceBundle(defaultBaseName, locale);
        }
        return bundle;
    }

    public void setRootFolder(String rootFolder) {
        this.rootFolder = rootFolder;
    }
} 
```

配置如：

```
<bean id="messageSource" 
        class="pack.age.ByFolderResourceBundleMessageSource">
    <property name="useCodeAsDefaultMessage" value="true" />
    <property name="rootFolder" value="i18n" />
    <property name="basenames">
        <list>
            <value>messages</value>
            <value>application</value>
        </list>
    </property>
</bean> 
```

并使用如下文件夹设置：

```
i18n
  ├───Default
  │     ├─── application.properties
  │     └─── messages.properties
  │
  ├─── en
  │     ├─── application.properties
  │     └─── messages.properties
  │
  └─── fr
        ├─── application.properties
        └─── messages.properties 
```

# java - Spring MVC - 当整数值为零时如何显示空白文本框

> ID：14332143
> 
> 赞同：6
> 
> 时间：2013-01-15T06:20:16.180
> 
> 标签：java, spring, jsp, spring-mvc

我正在使用 spring、hibernate、java 和 jsp。我的问题是，当整数值为零时，它会显示`0`在我的文本框中。我只想显示空字符串，但 Idk 怎么做。请帮忙。

在我的jsp中：

```
<form:form method="POST" commandName="division">
...
...
    <form:input path="number"/>
</form:form> 
```

在我的域中：

```
/**
 * Get the number of the division.
 * @return The number.
 */
@Column(name = "NUMBER")
public int getNumber() {
    return number;
}

/**
 * Set the number of the division.
 * @param number The division number.
 */
public void setNumber(int number) {
    this.number = number;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T08:02:46.793

你将不得不使用`spring:bind`它。

此外，您将不得不使用*JSTL*。导入它：

```
<%@ taglib prefix="core" uri="http://java.sun.com/jsp/jstl/core"%> 
```

为了获得 的值`number`：

```
<spring:bind path="number"> 
```

的结果在其字段中`spring:bind`名为 的变量中返回。检查它是否为 0 并且不打印任何内容，否则打印数字：`status``value`

```
<core:if test="${status.value != 0}">
    ${status.value}    
</core:if> 
```

有关更多信息，请查看[spring:bind 文档](http://static.springsource.org/spring/docs/1.1.5/taglib/tag/BindTag.html)。

# c - 一个奇怪的分段错误错误

> ID：14332144
> 
> 赞同：1
> 
> 时间：2013-01-15T06:20:25.553
> 
> 标签：c

> **可能重复：**
> [声明大型数组时出现堆栈溢出异常](https://stackoverflow.com/questions/571945/getting-a-stack-overflow-exception-when-declaring-a-large-array)

我的系统是`x86-64 linux`，这是我的简单代码：

```
#include<stdio.h>
#define N 1024
int main()
{
    int a[N][N];
    int b[N][N];
    printf("hello world\n");
    return 0;
} 
```

以及来自 objdump 的汇编代码：

```
00000000004004fc <main>:

4004fc: 55                      push   %rbp
4004fd: 48 89 e5                mov    %rsp,%rbp
400500: 48 81 ec 00 00 80 00    sub    $0x800000,%rsp
400507: bf c4 05 40 00          mov    $0x4005c4,%edi
40050c: e8 cf fe ff ff          callq  4003e0 <puts@plt>
400511: b8 00 00 00 00          mov    $0x0,%eax
400516: c9                      leaveq 
400517: c3                      retq   
400518: 0f 1f 84 00 00 00 00    nopl   0x0(%rax,%rax,1)
40051f: 00 
```

奇怪的是这个程序在调用时会崩溃`printf()`奇怪的是这个程序在调用函数但是，如果我将 N 定义为 512，则该程序运行良好。我不知道为什么。是否有任何堆栈大小限制限制堆栈使用的内存？

有人知道为什么吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T06:23:57.603

由于超出堆栈大小而导致的错误。为了摆脱这种情况，在堆中创建数组。为此，请使用`malloc`或其他动态内存分配功能。

像 `int *a = malloc(N*N*sizeof(int))`这种方式内存位于堆中。
此外，您应该通过检查来测试是否已为您分配了此内存：

```
if(a)
     // do stuff with a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T06:25:35.160

是的，最大堆栈大小很小，大多数时候小于几个`KBs`。您正在尝试将数据分配`1024*1024*sizeof(int)=4194304bytes`到`4MBs`单个堆栈分配中，这会导致崩溃。

有两种方法可以解决这个问题：

1）在栈外分配内存

```
#include<stdio.h>
#define N 1024

int a[N][N];
int b[N][N];    

int main()
{
    printf("hello world\n");
    return 0;
} 
```

`main()`或 2)使用以下方法从堆内部动态分配内存`malloc()`：

```
 #include<stdio.h>
    #define N 1024

    int main()
    {
        int **a = malloc(N, sizeof(int*));
        int **b = malloc(N, sizeof(int*));
        for (int i=0; i<N; i++)
        {
          a[i]=malloc(N, sizeof(int));
          b[i]=malloc(N, sizeof(int));
         }
        printf("hello world\n");
        return 0;
    } 
```

**注意**：在处理完数据后不要忘记`free()`任何动态分配的内存，否则您的程序会泄漏内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T07:13:37.550

[我想我不妨给出我的答案，从这里](https://stackoverflow.com/questions/8617466/)借来的：

```
int (*a)[N] = malloc(N * N * sizeof(int));
int (*b)[N] = malloc(N * N * sizeof(int)); 
```

现在您可以像访问原始代码中的二维数组一样访问它们；例如`a[50][100] = 37;`

当你完成它们时，`free(a)`不要忘记。`free(b)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T06:23:42.837

是的，在给定时间您可以在堆栈上分配多少是有限制的。它依赖于编译器。在 Visual Studio 上，默认大小为 1 MB。检查您的编译器设置以了解大小。我的猜测是，由于您超出了此限制，因此它正在崩溃。

# android - 在 Android 中使用它的样式从 EditText 获取文本

> ID：14332146
> 
> 赞同：-1
> 
> 时间：2013-01-15T06:20:30.770
> 
> 标签：android

我有一个带有文本“**这是粗体文本**”和“*这是*斜体文本”的编辑文本

如果我从 edittext 获取文本并在 textview 中显示意味着我得到“这是一个粗体文本”和“这是一个斜体文本”

我想显示“**这是一个粗体文本**”和“*这是一个斜体文本*”

如何实现这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T06:26:57.823

省略`toString`：

```
TextView tv;
EditText et;

...

tv.setText(et.getText()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:37:48.843

您可以使用 text1.setTypeface(edit1.getTypeface()); 和 text1.setTypeface(edit2.getTypeface()); 这将帮助您将 Textview 的样式设置为与 EditText 相同。

# matlab - Matlab错误：下标索引必须是真正的正整数或逻辑

> ID：14332148
> 
> 赞同：0
> 
> 时间：2013-01-15T06:20:34.040
> 
> 标签：matlab

我在 MATLAB 中有以下错误：

> ？？？下标索引必须是实数正整数或逻辑数。
> 
> 错误 ==> Lloyd_Max 在 74 D(w_count) = mean((x - centres(xq)).^2);

这是我的代码：

```
function [ xq,centers,D ] = Lloyd_Max( x,N,min_value,max_value )
%LLOYD_MAX Summary of this function goes here
%   Detailed explanation goes here

x = x';

temp = (max_value - min_value)/2^N;

count=1;
for j=0:temp:((max_value - min_value)-temp),
   centers(count) = (j + j + temp )/2;
   count = count + 1;
end

for i=1:length(centers),
   k(i) = centers(i); 
end

w_count = 0;

while((w_count < 2) || (D(w_count) - D(w_count - 1) > 1e-6))

    w_count = w_count + 1;

    count1 = 2;
    for i=2:(count-1),
       T(i) = (k(i-1) + k(i))/2;
       count1 = count1 +1 ;
    end

    T(1) = min_value;
    T(count1) = max_value; 

    index = 1;
    for j=2:count1,
        tempc = 0;
        tempk = 0;
        for k=1:10000,
            if(x(k) >= T(j-1) && x(k) < T(j))
                tempk = tempk + x(k);
                tempc = tempc + 1; 
            end
        end
        k(index) = tempk;
        k_count(index) = tempc;
        index = index + 1;
    end

    for i=1:length(k),
        k(i) = k(i)/k_count(i);
    end

    for i=1:10000,
        if (x(i) > max_value)
            xq(i) = max_value;
        elseif (x(i) < min_value)
            xq(i) = min_value;
        else
            xq(i) = x(i);
        end
    end

    for i=1:10000,
        cnt = 1;
        for l=2:count1,
           if(xq(i) > T(l-1) && xq(i) <= T(l))
               xq(i) = cnt;
           end
           cnt = cnt +1 ;
        end
    end

   D(w_count) = mean((x - centers(xq)).^2);

end

end 
```

我称之为并有这些输入：

```
M = 10000
t=(randn(M,1)+sqrt(-1)*randn(M,1))./sqrt(2);
A= abs(t).^2;
[xq,centers,D] = Lloyd_Max( A,2,0,4 ); 
```

我试图评论 while 和 D，结果：我的 xq 和中心都正常，xq 在 1-4 范围内，中心 1-4 索引和 0.5-3.5 范围。

我不知道这里出了什么问题...请帮助我。

预先感谢！

谜团解开了！

谢谢大家的帮助！我刚刚退出了 for 循环：

```
for i=1:10000,
        if (x(i) > max_value)
            xq(i) = max_value;
        elseif (x(i) < min_value)
            xq(i) = min_value;
        else
            xq(i) = x(i);
        end
    end 
```

它就像魅力一样......这个循环再次初始化了数组。对此感到抱歉。再次感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:57:27.633

`xq(i) = x(i)`在你的函数中间的某个地方有一个赋值，但是你从外部传递，你计算`A`的地方是由 采样的，所以你不能保证是一个整数。`x``A``t``randn``xq`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:30:28.953

我不确定您的目标是什么，但是您的向量`xq`不包含整数，它包含双精度数。如果您想像使用 一样使用索引向量，`centers(xq)`则向量的所有元素都必须是整数。

经过一番检查，看起来 xq 是 x 值，您应该找到某种方法将它们映射到它们所属的最近单元格的整数（我猜“中心”代表单元格的中心？）

# java - Future.get(timeout) 的底层线程行为

> ID：14332153
> 
> 赞同：1
> 
> 时间：2013-01-15T06:21:01.840
> 
> 标签：java, multithreading, threadpool, future, futuretask

我们正在使用`Future`超时来完成任务。`TimeOutException`当时间限制超过时，我们得到一个。从 的行为`thread dump`，我意识到底层线程仍在继续。

是这样吗？它如何处理漫游的多个线程？如果`IOException`从池中删除的线程抛出 no 怎么办？

如果这是真的，那么`kill`底层线程的方法是什么。`IO`在我的情况下，它一直在等待外部。

线程转储的一部分：

```
Thread 29587: (state = IN_NATIVE)
 - java.net.SocketInputStream.socketRead0(java.io.FileDescriptor, byte[], int, int, int) @bci=0 (Compiled frame; information may be imprecise)
 - java.net.SocketInputStream.read(byte[], int, int) @bci=84, line=129 (Compiled frame)
 - java.io.BufferedInputStream.fill() @bci=175, line=218 (Compiled frame)
 - java.io.BufferedInputStream.read1(byte[], int, int) @bci=44, line=258 (Compiled frame)
 - java.io.BufferedInputStream.read(byte[], int, int) @bci=49, line=317 (Compiled frame)
 - sun.net.www.MeteredStream.read(byte[], int, int) @bci=16, line=116 (Compiled frame)
 - java.io.FilterInputStream.read(byte[], int, int) @bci=7, line=116 (Compiled frame)
 - sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(byte[], int, int) @bci=4, line=2672 (Compiled frame)
 - javax.imageio.stream.FileCacheImageInputStream.readUntil(long) @bci=64, line=121 (Compiled frame)
 - javax.imageio.stream.FileCacheImageInputStream.read(byte[], int, int) @bci=69, line=167 (Compiled frame)
 - com.sun.imageio.plugins.jpeg.JPEGImageReader.readImageHeader(long, boolean, boolean) @bci=0 (Compiled frame)
 - com.sun.imageio.plugins.jpeg.JPEGImageReader.readNativeHeader(boolean) @bci=12, line=532 (Compiled frame)
 - com.sun.imageio.plugins.jpeg.JPEGImageReader.checkTablesOnly() @bci=92, line=277 (Compiled frame)
 - com.sun.imageio.plugins.jpeg.JPEGImageReader.gotoImage(int) @bci=41, line=409 (Compiled frame)
 - com.sun.imageio.plugins.jpeg.JPEGImageReader.readHeader(int, boolean) @bci=2, line=525 (Compiled frame)
 - com.sun.imageio.plugins.jpeg.JPEGImageReader.readInternal(int, javax.imageio.ImageReadParam, boolean) @bci=3, line=968 (Compiled frame)
 - com.sun.imageio.plugins.jpeg.JPEGImageReader.read(int, javax.imageio.ImageReadParam) @bci=8, line=948 (Compiled frame)
 - javax.imageio.ImageIO.read(javax.imageio.stream.ImageInputStream) @bci=55, line=1422 (Compiled frame)
 - javax.imageio.ImageIO.read(java.net.URL) @bci=42, line=1374 (Compiled frame) 
```

一旦 TimeOutException 发生（对于循环中的任何任务），我们将取消这些任务，如下所示：

```
for(Entry<Requests, Future<?>> futureTask : futureTasks.entrySet())
                {
                    Future<?> future = futureTask.getValue();
                    if(!future.isDone() || future.isCancelled())
                    {
                        future.cancel(true);
                        }
                } 
```

不应该解决问题吗？

请指教。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T06:35:08.840

是的，您的线程继续执行并且执行的任务不受影响。*TimeoutException*表示您没有在适当的时间得到结果。

如果您想中断底层线程，您可以处理异常并使用*Future*的使用实现中的*cancel(true)*方法。

 ***编辑**

正如您的堆栈跟踪所解释的那样，我错过了您的线程正在等待阻塞 I/O 的情况。在这种情况下，从*future.cancel(true)调用的**Thread.interrupt(* )将无济于事。

 *这种情况下的常见模式是关闭底层输入流。我对*javax.imageio包不是很熟悉，但是**ImageIO*上有一个接受*InputStream*的重载方法。您可能希望将其存储在某个地方，然后在超时时将其关闭。

它将调用*SocketInputStream*上的*close()* ，然后调用底层*Socket的**close()*方法，该方法正在等待阻塞读取完成。在此套接字上的 I/O 操作（根据您的跟踪）中被阻塞的执行线程将停止等待带有*SocketException*的 EOF 。**

# java - JRMP 连接建立错误

> ID：14332154
> 
> 赞同：13
> 
> 时间：2013-01-15T06:21:03.400
> 
> 标签：java, rmi

我得到以下异常跟踪：

```
java.rmi.ConnectIOException: error during JRMP connection establishment; nested exception is: 
    java.net.SocketTimeoutException: Read timed out
    at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:293)
    at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:190) 
```

我阅读了一些关于此的论坛，但没有弄清楚这个异常的根本原因。这是由于以下原因之一吗？

1.  内存不足。
2.  由于对服务器的请求数量增加导致其中一个请求等待并导致此请求处理超时，RMI 调用失败。
3.  不兼容的 jre 版本或与 JRE 版本相关的任何内容。
4.  任何与网络相关的问题。
5.  防火墙相关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T07:19:27.093

> 1.  内存不足。

不在客户端。可能在服务器上，例如，如果它导致分配线程失败。

> 2.  由于对服务器的请求数量增加导致其中一个请求等待并导致此请求处理超时，RMI 调用失败。

不，错误发生在连接建立阶段，早在服务器端方法实现被调用之前。

> 3.  不兼容的 jre 版本或与 JRE 版本相关的任何内容。

不。

> 4.  任何与网络相关的问题。

是的。

> 5.  防火墙相关。

不会。这会导致连接超时，或者在某些过时的情况下会导致连接被拒绝，而不是读取超时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-21T09:15:29.433

我在客户端有同样的错误。服务器是可访问的，我可以通过 telnet 打开端口。当我在客户端和服务器端使用 Wireshark 观察它时，我看到以下内容：

*   TCP 连接建立

    *   `SYN`
    *   `SYN, ACK`
    *   `ACK`
*   客户端发送：`JRMI, Version 2, Stream Protocol`

*   服务器回复： `JRMI, ProtocolAck`- 但是这个包从未到达客户端

就我而言，它是从 MagicDraw 客户端到许可证服务器的连接。对于其他位置的其他同事，使用代理会有所帮助： `http.proxyHost=xxxx -Dhttp.proxyPort=8080`客户端通过 HTTP 进行通信。所以也许这可以帮助你省略这个问题。 [https://docs.oracle.com/javase/7/docs/platform/rmi/spec/rmi-arch6.html](https://docs.oracle.com/javase/7/docs/platform/rmi/spec/rmi-arch6.html)

我无法具体说明，因为我无法访问 Magic Draw 的源代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-01T12:50:33.663

在这种情况下，当持有 SSH 服务器的局域网外部的 SSH 客户端尝试连接到服务器并且涉及 RMI 以让客户端在服务器上执行 RMI 方法时，我会收到此错误。原因是服务器的不可达性（缺少路由）。似乎所有陈述的案例都与这个原因有关。

# html - :hover 状态不工作

> ID：14332176
> 
> 赞同：0
> 
> 时间：2013-01-15T06:22:46.643
> 
> 标签：html, css, hover, mousehover

我不知道为什么，但是该`:hover`状态不适用于`.social`图像。当我将它们和它们的类隔离在一个单独的 HTML 文件中时，它们就可以工作了。所以我想一定有什么东西干扰了我的其余代码。

这是我的 HTML 和 CSS：

```
<link href='http://fonts.googleapis.com/css?family=Lato:400' rel='stylesheet' type='text/css'></link>
<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<style>
.social{
border-radius:100%;box-shadow:0px 1px 0px white;height:30px;opacity:0.4;
}
.social:hover{
opacity:1;
}
</style>
<style>
.button{
font-size:17px;color:#c3c3c3;text-shadow:0px 1px 1px white;padding:13px;padding-left:20px;padding-right:20px;border:1px solid #c3c3c3;border-radius:4px;box-shadow:0px 2px 7px -3px #c3c3c3;background: #eaeaea; background: -moz-linear-gradient(top, #eaeaea 0%, #dddddd 100%); background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#eaeaea), color-stop(100%,#dddddd)); background: -webkit-linear-gradient(top, #eaeaea 0%,#dddddd 100%); background: -o-linear-gradient(top, #eaeaea 0%,#dddddd 100%); background: -ms-linear-gradient(top, #eaeaea 0%,#dddddd 100%); background: linear-gradient(to bottom, #eaeaea 0%,#dddddd 100%); filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eaeaea', endColorstr='#dddddd',GradientType=0 );
}
.button:hover{
box-shadow:0px 1px 1px white;
}
</style>
<div style="position:absolute;top:0px;left:0px;height:100%;width:100%;background: #f2f2f2; /* Old browsers */
background: -moz-radial-gradient(center, ellipse cover,  #f2f2f2 0%, #cecece 100%); /* FF3.6+ */
background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,#f2f2f2), color-stop(100%,#cecece)); /* Chrome,Safari4+ */
background: -webkit-radial-gradient(center, ellipse cover,  #f2f2f2 0%,#cecece 100%); /* Chrome10+,Safari5.1+ */
background: -o-radial-gradient(center, ellipse cover,  #f2f2f2 0%,#cecece 100%); /* Opera 12+ */
background: -ms-radial-gradient(center, ellipse cover,  #f2f2f2 0%,#cecece 100%); /* IE10+ */
background: radial-gradient(ellipse at center,  #f2f2f2 0%,#cecece 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f2f2f2', endColorstr='#cecece',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */">

<div style="position:absolute;right:25px;top:25px;">
<img src="http://cdn1.iconfinder.com/data/icons/social/128/picons33.png" class="social">&nbsp;&nbsp;<img src="http://cdn1.iconfinder.com/data/icons/social/128/picons48.png" class="social">
</div>

<div style="position:absolute;top:0px;left:0px;width:100%;height:100%;">
<center>
<div style="width:900px;position:relative;height:100%;border:0px solid black;text-align:left;">
<img src="http://i46.tinypic.com/169i979.jpg" style="height:750px;position:absolute;bottom:0px;left:-350px;">

<div style="position:absolute;top:115px;right:0px;font-family:Lato;width:415px;">
<div style="font-size:75px;color:#f5f5f5;text-shadow:0px 2px 3px #c3c3c3;">dumbsearch.</div><span style="text-shadow:0px 1px 1px white;font-size:23px;color:#c3c3c3;">It's search like you've never seen or used.</span><br><span style="text-shadow:0px 1px 1px white;font-size:23px;color:#c3c3c3;">Scroll down to learn more.</span>

<br><br><br>

<span class="button">Apply to be a beta tester</span></div>
</div>

</div>
</center>
</div>
</div> 
```

提前非常感谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T06:29:28.080

看起来`div`两个`.social`图像元素的父级，即`position:absolute`，被其兄弟级重叠`div`。通过对其应用积极的`z-index`CSS 样式，问题将得到解决。

# java - Java Regex：选择平衡括号数据

> ID：14332178
> 
> 赞同：0
> 
> 时间：2013-01-15T06:22:51.910
> 
> 标签：java, regex

```
{{ info {{ abc}} {{ last}} }} {{ fast}} 
```

在这个字符串中，我只需要提取数据，使开始和结束括号平衡。即在这种情况下我需要

1.  `{{ info {{ abc}} {{ last}} }}`
2.  `{{ fast}}`

我目前使用的正则表达式是

```
(\\ {\\{.*\\}\\}) * 
```

但它给了我整个字符串，而不是我期望的字符串。如何正确地做到这一点？

```
String line="{{ Infobox {{aks}} {{ska}}  }} akshat {{ las}}";
String pattern;
System.out.println(line);
Pattern r=Pattern.compile("(\\{\\{.*\\}\\})*");
Matcher m=r.matcher(line); 
```

输出是整个字符串...不是我期望的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T06:25:48.717

使用 Java 正则表达式无法解决此问题。

正则表达式（在数学意义上）无法根据递归语法解析输入。并且您需要递归语法来描述一种语言（例如这种语言），其中任意嵌套的括号是平衡的。

虽然 Java 正则表达式比数学表达式更强大，但它们仍然不支持递归。（某些语言的正则表达式引擎可以......但您要求用 Java 提供解决方案。）

* * *

您可以创建一个正则表达式来处理*有限*数量的嵌套括号级别，但它会变得丑陋且效率低下......特别是如果您必须处理不平衡括号的错误输入！（并且效率问题也适用于涉及递归正则表达式的假设解决方案......）

但是，我建议对字符串进行标记并进行简单的临时解析，计算括号级别并在级别返回零时发出结果。这是一个简单的编码问题：请参阅@Evgeniy Dorofeev 的答案作为起点。（但请注意，他没有处理 2 个错误案例......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:43:12.000

我不认为你可以用正则表达式来做到这一点。但是，如果您对其他解决方案感兴趣，我可以建议

```
 String s = "{{ info {{ abc}} {{ last}} }} {{ fast}}";
    List<String> l = new ArrayList<>();
    StringBuilder sb = new StringBuilder();
    int balance = 0;
    for(char c : s.toCharArray()) {
        sb.append(c);
        if (c == '{') {
            balance++;
        } else if (c == '}' && --balance == 0) {
            l.add(sb.toString());
            sb.setLength(0);
        }
    }
    System.out.println(l); 
```

输出

```
[{{ info {{ abc}} {{ last}} }},  {{ fast}}] 
```

# javascript - 我如何在悬停时从一个图像淡入另一个图像

> ID：14332184
> 
> 赞同：0
> 
> 时间：2013-01-15T06:23:31.597
> 
> 标签：javascript, jquery, image, html, fadein

基本上，下面的 jQuery 代码允许我在悬停时将一个图像交换为另一个图像，但我希望它从第一张图像淡入到另一张图像，并且我不知道如何让它工作（我已经搜索了一些答案我也尝试过自己做）。

这个问题的问题是似乎有很多人在问这个问题，但是在我发现的少数几个可能有一些帮助的答案（至少就我正在尝试做的事情而言），他们仍然不是我要找的。

我有一个来自[这里](http://www.selfcontained.us/2008/03/08/simple-jquery-image-rollover-script/)的工作脚本（http://www.selfcontained.us/2008/03/08/simple-jquery-image-rollover-script/），我只想要淡入淡出效果，我试图搞砸我自己用它，但 jQuery 仍然是我的弱点，哈哈

```
 <script type="text/javascript">
    $(function() {
    $('img[data-hover]').hover(function() {
    $(this)
    .attr('tmp', $(this).attr('src'))
    .attr('src', $(this).attr('data-hover'))
    .attr('data-hover', $(this).attr('tmp'))
    .removeAttr('tmp');
    }).each(function() {
    $('<img />').attr('src', $(this).attr('data-hover'));
    });;
    });
    </script>

    <img src="../logo/Untitled-31.fw.png" data-hover="../logo/Untitled-31.png" /> 
```

这里（http://jqueryfordesigners.com/image-cross-fade-transition/）和这里（http://jqueryfordesigners.com/image-fade-revisited/）是我想做的很好的例子，但是它的代码比我认为需要的要多得多。

欢迎任何和所有想法！另外，如果有人有更容易的路线，我也不介意哈哈。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:48:53.257

这是一个jQuery代码

```
$("img").mouseenter(
  function () {
     $("img").attr("src","http://rhceblog.com/wp-content/uploads/2012/11/Yahoo_3.jpg");
  }
);
$("img").mouseleave(
  function () {
     $("img").attr("src","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTt__9kJSk-ESPLpb_zfQ7SQm7Z_w_m32fyiD07hnTAU7zvFWx_dQ");
  }
); 
```

**演示**：http: [//jsfiddle.net/ipsjolly/R6FnC/](http://jsfiddle.net/ipsjolly/R6FnC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:29:31.953

这里可能有类似的问题：

[jQuery 使用淡入淡出效果更改图像 src](https://stackoverflow.com/questions/5979418/jquery-change-image-src-with-fade-effect)

基本上在悬停时你开始淡出

```
$('img[data-hover]').hover(function() {
var $image=$(this);
$(this)
.attr('tmp', $(this).attr('src'))
.attr('src', $(this).attr('data-hover'))
.attr('data-hover', $(this).attr('tmp'))
.removeAttr('tmp');

$image.fadeOut(400, function() {
        $image.attr('src',$image.attr('data-hover'));
    }).fadeIn(400);

}); 
```

带有回调事件，并将其与 fadeIn 链接。在回调事件中，您更改图像源。

我粘贴的源代码只是说明性的，可能无法完全按照您的预期工作，但您会明白的。

这是一个工作示例：http: [//jsfiddle.net/GxBWt/](http://jsfiddle.net/GxBWt/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-14T22:29:17.560

你可以这样做：

有html代码：

```
<div class="img" style="position:relative; z-index:1;">
  <div class="hover" style="position:absolute; z-index:3; top:0; left:0; display:none;"><img src="image-hover.png" /></div>
  <div style="position:absolute; z-index:2; top:0; left:0"><img src="image.png"></div>
</div> 
```

有jQuery：

```
$('.img').hover(
   function(){
     $(this).find('.hover').fadeIn();
},
   function(){
     $(this).find('.hover').fadeOut();
}
); 
```

如果你想从图像：

```
<img src="../logo/Untitled-31.fw.png" data-hover="../logo/Untitled-31.png" /> 
```

您可以使用 jquery $('img').each(); 将其替换为我上面写的 html 代码；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T07:57:06.627

如果你真的想要那种效果，你可以使用画布。

我们有两个图像 A 和 B。

1.  使用 maxDimension(a, b) 作为画布的维度。
2.  设置`globalComposite`为`lighter`
3.  set `globalAlpha`= 0.1（0.1 是一个步长值，您可以更改它，但范围是 [0, 1]
4.  绘制图像
5.  设置`globalAlpha`= 1 - 步骤
6.  绘制图像 b
7.  重复 3 到 6

    var i = 0.1;// 全局 alpha
    var runID; //间隔id

    函数fadeImage() { if (i > 1) { clearInterval(runID); 返回;
    } ctx.globalAlpha = i;
    ctx.drawImage(imageA, 宽度, 高度);
    ctx.globalAlpha = 1 - i;
    ctx.drawImage(imageB, 宽度, 高度);
    我+= 0.1；
    }

    函数运行（）{ ctx.save（）；ctx.globalComposite = "打火机"; runID = setInterval(fadeImage, 500);
    ctx.restore(); }

示例：http: [//jsfiddle.net/xFryE/1/](http://jsfiddle.net/xFryE/1/)

例如，我只是指定了画布的尺寸，而不是调整两个图像的宽度，使用相同宽度的图像应该会更好。

# ruby-on-rails - 使用 ActiveAdmin 编辑单个记录

> ID：14332190
> 
> 赞同：2
> 
> 时间：2013-01-15T06:24:20.163
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activeadmin

我有一个需要编辑的模型，它与名为 BillingProfile 的当前用户关联。如何添加链接到当前用户的 BillingProfile 的编辑页面的菜单项？我不想要或不需要 BillingProfile 的索引页面，因为用户只能编辑自己的。

```
class User
  has_one :billing_profile
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T00:23:42.287

您可以使用 Cancan 来管理允许用户编辑自己的计费配置文件的能力。

能力.rb

```
...
cannot :edit_billing_profile, User do |u|
  u.user_id != user.id
end
... 
```

管理员/用户.rb

```
ActiveAdmin.register User do
  action_item :only => :show do
    link_to "Edit BP", edit_bp_path(user.id) if can? :edit_billing_profile, user
  end
end 
```

或者你可以尝试这样的事情：

```
ActiveAdmin.register User do
  form do |f|
    f.inputs "User" do
      f.input :name
    end
    f.inputs "Billing Profile" do
      f.has_one :billing_profile do |bp|
        w.input :address if can? :edit_billing_profile, bp.user
      end
    end
    f.buttons
  end
end 
```

我没有测试它，但我在一个项目上做了类似的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T12:07:44.000

这可能会帮助你——

**添加自定义链接：**

```
ActiveAdmin.register User, :name_space => :example_namespace do
  controller do
    private
    def current_menu
      item = ActiveAdmin::MenuItem.new :label => "Link Name", :url => 'http://google.com'
      ActiveAdmin.application.namespaces[:example_namespace].menu.add(item)
      ActiveAdmin.application.namespaces[:example_namespace].menu
    end
  end
end 
```

我基本上创建了一个新的 ActiveAdmin::MenuItem 并将其添加到具有命名空间 example_namespace 的当前 ActiveAdmin 菜单中，并在 current_menu 方法的末尾返回菜单。注意：current_menu 是 ActiveAdmin 期望的方法，所以不要更改它的名称。您可以添加任意数量的项目，这些项目中的每一个都将转换为导航标题上的链接。请注意，这适用于 ActiveAdmin 版本 > 0.4.3，因此如果您想为版本 <= 0.4.3 执行此操作，您可能需要自己进行挖掘。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T07:59:48.820

我定义了一个 LinkHelper，它有以下两种方法：

```
#This will return an edit link for the specified object instance
def edit_path_for_object_instance(object_instance)
  model_name = object_instance.class.to_s.underscore
  path = send("edit_#{model_name}_path", object_instance)
end

#This will return an show link for the specified object instance
def show_path_for_object_instance(object_instance)
  model_name = object_instance.class.to_s.underscore
  path = send("#{model_name}_path", object_instance)
end 
```

您可以直接从您的视图中调用 edit_path_for_object_instance 方法并传入 user.billing_profile 对象。

这将为您提供直接指向实体的链接，从而产生类似 /billing_profile/ID/edit 的 URL

另一种方法是使用 fields_for。这将允许您为用户属性创建表单并同时更新关联的 BillingProfile。它看起来像这样：

```
<%= form_for @user%>
  <%= fields_for @user.billing_profile do |billing_profile_fields| %>
    <%= billing_profile_fields.text_field :name %>    
  <% end %>
<%end%> 
```

见这里：[http ://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html)

# postgresql-9.2 - Post Gre: Natural Full Join-如何用零替换 int 列中的空值？

> ID：14332192
> 
> 赞同：0
> 
> 时间：2013-01-15T06:24:34.623
> 
> 标签：postgresql-9.2

我正在寻找一种方法来替换 int 字段中的所有空值，用
两个表上的 NATURAL FULL JOIN 产生的 0（零）。例如 ：

```
table1

 num | name
-----+------
   1 | a
   2 | b
   3 | c 
```

和表2：

```
 num | value
-----+-------
   1 | 40
   3 | 50
   5 | 60 
```

( select * from table1 natural full join table2 ) 将导致：

```
num | name | value
----+------+---------
  1 | a    | 40
  2 | b    | 
  3 | c    | 50
  5 |      | 60 
```

(4 行)

我需要将值列中的空白位置替换为 0。我该怎么做？我正在寻找一种使它看起来像的方法：

```
num | name | value
----+------+---------
  1 | a    | 40
  2 | b    | 0
  3 | c    | 50
  5 |      | 60 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T06:26:49.777

你可能想使用这样的东西：

```
SELECT (...), COALESCE(intcolumn,0) FROM (...) 
```

# scientific-computing - HDF5 存储开销

> ID：14332193
> 
> 赞同：8
> 
> 时间：2013-01-15T06:24:49.790
> 
> 标签：scientific-computing, hdf5

我正在将大量小型数据集写入 HDF5 文件，生成的文件大小大约是我所输入的数据的幼稚列表所期望的 10 倍。我的数据按层次结构组织如下：

```
group 0
    -> subgroup 0
        -> dataset (dimensions: 100 x 4, datatype: float)
        -> dataset (dimensions: 100, datatype: float)
    -> subgroup 1
        -> dataset (dimensions: 100 x 4, datatype: float)
        -> dataset (dimensions: 100, datatype: float)
    ...
group 1
... 
```

每个子组应占用 500 * 4 Bytes = 2000 Bytes，忽略开销。我不会在数据旁边存储任何属性。然而，在测试中，我发现每个子组占用大约 4 kB，或者​​大约是我预期的两倍。我知道有一些开销，但它来自哪里，我该如何减少它？是在代表组结构吗？

更多信息：如果我将每个子组中两个数据集的维度增加到 1000 x 4 和 1000，那么每个子组占用大约 22,250 字节，而不是我预期的 20,000 字节。这意味着每个子组的开销为 2.2 kB，并且与我使用较小数据集大小得到的结果一致。有没有办法减少这种开销？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T03:05:28.763

我会回答我自己的问题。仅表示组结构所涉及的开销就足够了，以至于存储小型数组或拥有许多组，每个组只包含少量数据是没有意义的。似乎没有任何方法可以减少每组的开销，我测得的开销约为 2.2 kB。

我通过将每个子组中的两个数据集组合成一个 (100 x 5) 数据集来解决这个问题。然后，我消除了子组，并将每个组中的所有数据集组合成一个 3D 数据集。因此，如果我之前有 N 个子组，我现在在每个组中都有一个数据集，形状为 (N x 100 x 5)。因此，我保存了之前存在的 N * 2.2 kB 开销。此外，由于 HDF5 的内置压缩对更大的阵列更有效，因此我现在获得了优于 1:1 的整体打包率，而在此之前，开销占用了文件空间的一半，压缩完全无效。

教训是避免 HDF5 文件中复杂的组结构，并尝试将尽可能多的数据组合到每个数据集中。

# java - JDialog modal=true vs ModalityType.APPLICATION_MODAL

> ID：14332196
> 
> 赞同：3
> 
> 时间：2013-01-15T06:24:55.533
> 
> 标签：java, swing, applet, jframe, jdialog

最初我在桌面 Swing 应用程序中使用了以下代码。MyDialog 是内部类，`frame`是 JFrame。

```
private class MyDialog extends JDialog {
    public MyDialog (String title) {
        super(frame, title, true);
        ...
    } 
```

然后我修改了这段代码以支持桌面和小程序。所以就变成了这样。`owber`是`JFrame`或`JApplet`两者之一。

```
 private class MyDialog extends JDialog {
    public MyDialog (String title) {
        super(SwingUtilities.windowForComponent(owner), title, ModalityType.APPLICATION_MODAL);
        ...
    } 
```

问题是我将代码作为桌面运行，但**模态行为不同**。应用程序启动后，我在任务栏中单击 Eclipse，因此应用程序隐藏在 Eclipse 后面。现在在任务栏中，我单击应用程序图标：

1.  `JFrame`并`JDialog`立即显示在 Eclipse 顶部
2.  在任务栏中有两个选项`JFrame`和`JDialog`，但是对于这两个选项，只有 JDialog 出现在 Eclipse 之上，而 JFrame 没有。

并且 JDialod 没有以下最适合我的构造函数：

```
JDialog(Window owner, String title, boolean modal) 
```

我尝试了不同的字段，`ModalityType`但它们都没有给出与片段 #1 相同的预期结果。我的方法有什么问题，为什么行为不同？

**mKorbel 的**UPD ：****

 **```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class WindowForComp {
    private JFrame mainwindow;
    private CustomDialog customDialog;

    private void displayGUI() {
        mainwindow = new JFrame("MyFrame");
        customDialog = new CustomDialog(mainwindow, "Modal Dialog", true);
        mainwindow.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        JPanel contentPane = new JPanel();
        JButton mainButton = new JButton("Just a button");
        mainButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                EventQueue.invokeLater(new Runnable() {
                    @Override
                    public void run() {
                        customDialog.setVisible(true);
                    }
                });
            }
        });

        contentPane.add(mainButton);
        mainwindow.setContentPane(contentPane);
        mainwindow.pack();
        mainwindow.setLocationByPlatform(true);
        mainwindow.setVisible(true);
    }

    public static void main(String... args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new WindowForComp().displayGUI();
            }
        });
    }
}

class CustomDialog extends JDialog {
    public CustomDialog(JFrame owner, String title, boolean modal) {
        super(SwingUtilities.windowForComponent(owner), title, ModalityType.APPLICATION_MODAL);
        System.out.println(SwingUtilities.windowForComponent(owner));

        JPanel contentPane = new JPanel();
        JLabel dialogLabel = new JLabel("I am a Label on JDialog.", JLabel.CENTER);
        contentPane.add(dialogLabel);
        setContentPane(contentPane);
        pack();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:23:58.980

似乎`SwingUtilities.windowForComponent(JFrame)`返回 null，因此对话框没有父级。

[SwingUtilities.windowForComponent(JFrame) 返回 null](https://stackoverflow.com/questions/14335963/swingutilities-windowforcomponentjframe-returns-null)

现在我改用这种方法，它工作得很好（模态）：

```
public static Window windowForComponent (Component c) {
    if (c instanceof Window) return (Window)c;
    return SwingUtilities.windowForComponent(c);
} 
```**

# c - 关于逐像素渲染位图的算法的建议

> ID：14332201
> 
> 赞同：1
> 
> 时间：2013-01-15T06:25:24.483
> 
> 标签：c, opengl, bitmap, sdl

我一直在研究位图加载器，主要目标只是正确解析数据并在 OpenGL 中渲染。我现在需要在 x/y（即逐个像素）的基础上绘制像素（至少，就渲染而言，我认为这是我需要做的）。我已经绑定了纹理对象并调用了`glTexImage2D(...)`.

目前，我遇到的问题是逐像素算法。

据我了解，位图（又名 DIB）文件将**颜色数据**存储在所谓的**像素数组**中。每行像素由字节数组成`x`，每个像素的字节数可被 4（每像素 32 位）、3（每像素 24 位）、2（每像素 16 位）或 1（每像素 8 位）整除像素）。

**我认为需要遍历像素，同时计算像素数组中的正确偏移量，该偏移量相对于其像素 x/y 坐标。这是真的吗？如果没有，我该怎么办？**[老实说，我有点困惑，尽管我在前一段时间问过的这个问题](https://stackoverflow.com/q/14187783/763053)中做了针对我的事情，但这种方法是否正确。

我认为逐个像素地处理它是正确的方法，主要是因为渲染一个四边形`glVertex*`并`glTexCoord*`只产生一个灰色的矩形（当时我认为 OpenGL 会自己处理这个问题，因此为什么要尝试首先）。

我还应该注意，虽然我的问题显示的是 OpenGL 3.1 着色器，但我转移到了 SDL 1.2，因此我可以暂时使用即时模式，直到我实现了正确的算法，然后切换回现代 GL。

* * *

我正在解析的测试图像：

![位图图像](../Images/c9dfc38cdeceecb986f0ddc39ff3ae7a.png)

它的数据输出（由于长度很长而被粘贴）： http: [//pastebin.com/6RVhAVRq](http://pastebin.com/6RVhAVRq)

**和代码**：

```
void R_RenderTexture_PixByPix( texture_bmp_t* const data, const vec3 center )
{

    glBindTexture( GL_TEXTURE_2D, data->texbuf_id );

    glBegin( GL_POINTS );
    {
        const unsigned width  = data->img_data->width + ( unsigned int ) center[ VEC_X ];
        const unsigned height = data->img_data->height + ( unsigned int ) center[ VEC_Y ];

        const unsigned bytecount    = GetByteCount( data->img_data->bpp );

        const unsigned char* pixels = data->img_data->pixels;

        unsigned color_offset = 0;
        unsigned x_pixel;

        for ( x_pixel = center[ VEC_X ]; x_pixel < width; ++x_pixel )
        {
            unsigned y_pixel;

            for ( y_pixel = center[ VEC_Y ]; y_pixel < height; ++y_pixel )
            {

            }

            const bool do_color_update = true; //<--- replace true with a condition which checks to see if the color needs to be updated.

            if ( do_color_update )
            {
                glColor3fv( pixels + color_offset );
            }

            color_offset += bytecount;
        }
    }
    glEnd();

    glBindTexture( GL_TEXTURE_2D, 0 );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:27:26.923

您在代码中完全错过了 OpenGL 纹理的要点。纹理为您保存图像，光栅器为您对像素数据进行所有迭代。无需自己编写**缓慢**的像素推动器循环。

正如您的代码现在所代表的那样，纹理完全是伪造的并且什么都不做。你可以完全省略对 glBindTexture 的调用，它仍然可以工作——或者不工作，因为你实际上并没有绘制任何东西，你只是设置了 glColor 状态。要绘制一些东西，你必须调用 glVertex。

那么为什么不利用现代 GPU 的像素推动性能并实际使用纹理呢？这个怎么样：

```
void R_RenderTexture_PixByPix( texture_bmp_t* const data, const vec3 center )
{
    if( 0 == data->texbuf_id ) {
        glGenTextures(1, &(data->texbuf_id));
        glBindTexture( GL_TEXTURE_2D, data->texbuf_id );

        glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
        // there are a few more, but the defaults are ok
        // if you didn't change them no need for further unpack settings

        GLenum internal_format;
        GLenum format;
        GLenum type;
        switch(data->img_data->bpp) {
        case 8:
            // this could be a palette or grayscale
            internal_format = GL_LUMINANCE8;
            format = GL_LUMINANCE;
            type = GL_UNSIGNED_BYTE;
            break;

        case 15:
            internal_format = GL_RGB5;
            format = GL_BGR; // BMP files have BGR pixel order
            type = GL_UNSIGNED_SHORT_1_5_5_5;
            break;

        case 16:
            internal_format = GL_RGB8;
            format = GL_BGR; // BMP files have BGR pixel order
            type = GL_UNSIGNED_SHORT_5_6_5;
            break;

        case 24:
            internal_format = GL_RGB8;
            format = GL_BGR; // BMP files have BGR pixel order
            type = GL_UNSIGNED_BYTE;
            break;

        case 32:
            internal_format = GL_RGB8;
            format = GL_BGR; // BMP files have BGR pixel order
            type = GL_UNSIGNED_INT_8_8_8_8;
            break;

        }

        glTexImage2D( GL_TEXTURE_2D, 0, internal_format,
                      data->img_data->width, data->img_data->height, 0,
                      format, type, data->img_data->pixels );
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
    } else {
        glBindTexture( GL_TEXTURE_2D, data->texbuf_id );
    }

    static GLfloat verts[] = {
            0, 0, 
            1, 0,
            1, 1,
            0, 1
    };    
    // the following is to address texture image pixel centers
    // tex coordinates 0 and 1 are not on pixel centers!
    float const s0 = 1\. / (2.*tex_width);
    float const s1 = ( 2.*(tex_width-1) + 1.) / (2.*tex_width);
    float const t0 = 1\. / (2.*tex_height);
    float const t1 = ( 2.*(tex_height-1) + 1.) / (2.*tex_height);
    GLfloat texcoords[] = {
            s0, t0,
            s1, t0,
            s1, t1,
            s0, t1
    };

    glEnableClientState(GL_VERTEX_ARRAY);
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);

    glEnable(GL_TEXTURE_2D);

    glVertexPointer(2, GL_FLOAT, 0, verts);
    glTexCoordPointer(2, GL_FLOAT, 0, texcoords);

    glColor4f(1., 1., 1., 1.);
    glDrawArrays(GL_QUADS, 0, 4);

    glDisableClientState(GL_VERTEX_ARRAY);
    glDisableClientState(GL_TEXTURE_COORD_ARRAY);

    glBindTexture( GL_TEXTURE_2D, 0 );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T06:38:25.517

你的直觉基本上是正确的。像素存储为字节数组，但字节被排列成连续的组，每组代表一个像素。要解决单个像素，您需要进行如下计算：

```
unsigned char* image_data = start_of_pixel_data;
unsigned char* pixel_addr = image_data + bytes_per_pixel * (y * width_in_pixels + x); 
```

请注意以像素为单位的宽度，因为有时在行的末尾会有填充以使以字节为单位的总行宽达到 4/8/16/32/64/等的倍数。我建议首先以十六进制查看位图的实际字节，以了解发生了什么。这是一个很好的学习练习，会让您对自己的像素行走代码充满信心，这正是您想要的。您可能可以使用调试器来执行此操作，或者使用`printf`图像字节编写一个简单的循环。

# css - 单选按钮水平与 css 而不更改 html 代码

> ID：14332202
> 
> 赞同：0
> 
> 时间：2013-01-15T06:25:28.067
> 
> 标签：css

我的代码如下，由软件生成，我无法更改任何值。

```
<div class="cred-field cred-field-ticket-month-or-course">
<div class="cred-label">Month or Course</div>
<div id="cred_form_3584_1_wpcf-ticket-month-or-course-radios" class="myzebra-radios">
<div class="myzebra-radios-single">
<label class="myzebra-style-label">
<input id="cred_form_3584_1_wpcf-ticket-month-or-course_wpcf-fields-radio-option-a6da15467aeb84f539c0dc1cd766ccd6-2" class="myzebra-control myzebra-radio myzebra-prime-name-wpcf-ticket-month-or-course" type="radio" checked="checked" value="wpcf-fields-radio-option-a6da15467aeb84f539c0dc1cd766ccd6-2" name="wpcf-ticket-month-or-course">
<span class="myzebra-radio-replace"></span>
</label>
<label id="cred_form_3584_1_label_wpcf-ticket-month-or-course_wpcf-fields-radio-option-a6da15467aeb84f539c0dc1cd766ccd6-2" for="cred_form_3584_1_wpcf-ticket-month-or-course_wpcf-fields-radio-option-a6da15467aeb84f539c0dc1cd766ccd6-2">per month</label>
</div>
<div class="myzebra-radios-single">
<label class="myzebra-style-label">
<input id="cred_form_3584_1_wpcf-ticket-month-or-course_wpcf-fields-radio-option-f63eb739e2a6499a882c8e82aa35b028-1" class="myzebra-control myzebra-radio myzebra-prime-name-wpcf-ticket-month-or-course" type="radio" value="wpcf-fields-radio-option-f63eb739e2a6499a882c8e82aa35b028-1" name="wpcf-ticket-month-or-course">
<span class="myzebra-radio-replace"></span>
</label>
<label id="cred_form_3584_1_label_wpcf-ticket-month-or-course_wpcf-fields-radio-option-f63eb739e2a6499a882c8e82aa35b028-1" for="cred_form_3584_1_wpcf-ticket-month-or-course_wpcf-fields-radio-option-f63eb739e2a6499a882c8e82aa35b028-1">per course</label>
</div>
</div>
</div>
<div style="clear: both;"></div> 
```

我需要帮助将这个单选按钮并排（水平）放置。

我不能这样做，因为它会影响同一页面上的其他单选按钮。有没有其他技术？

```
.myzebra-radios-single {
  float: left;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:34:57.993

你可以使用css封面，

```
<div id="cred_form_3584_1_wpcf-ticket-month-or-course-radios" class="myzebra-radios"> 
```

添加类'single'，如下所示：

```
<div id="cred_form_3584_1_wpcf-ticket-month-or-course-radios" class="myzebra-radios single"> 
```

和CSS代码：

```
.single .myzebra-radios-single{ float:none;} 
```

该类`single`可以添加到`.myzebra-radios-single`该类前面的任何父亲

像这样添加类：

```
$('#cred_form_3584_1_wpcf-ticket-month-or-course-radios').addClass('single'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:59:50.660

id 应该是唯一的

你可以定位

```
#cred_form_3584_1_wpcf-ticket-month-or-course-radios .myzebre-radios-single 
```

也就是说，您要定位的类，但前提是它是给定 id 的后代

# delphi - 我可以让自定义 Delphi 组件向使用子句添加多个单元吗？

> ID：14332203
> 
> 赞同：13
> 
> 时间：2013-01-15T06:25:28.993
> 
> 标签：delphi, components

我正在研究 XE2 中的一些组件。是否可以将超过组件的单元添加到它所放置的表单的使用子句中？

示例：当我从我构建并安装的包中选择 TCustomComponent 时，CustomComponent 单元被添加到表单的 uses 子句中。我还想添加单位 GlobalConstants。

有谁知道这是否可以做到？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-15T06:55:16.620

为您的组件创建一个设计时包（如果您还没有）。在该包中，创建一个实现[`ISelectionEditor`](http://docwiki.embarcadero.com/Libraries/XE2/en/DesignIntf.ISelectionEditor)接口的类（最简单的方法是从[`TSelectionEditor`](http://docwiki.embarcadero.com/Libraries/XE2/en/DesignEditors.TSelectionEditor)该类派生），覆盖其虚拟[`RequiresUnits()`](http://docwiki.embarcadero.com/Libraries/XE2/en/DesignIntf.ISelectionEditor.RequiresUnits)方法以报告您希望出现在`uses`使用您的组件的任何 Form/Frame/DataModule 的子句中的任何其他单元. 然后，让您的包的函数通过调用（除了）来`Register()`注册该类。[`RegisterSelectionEditor()`](http://docwiki.embarcadero.com/Libraries/XE2/en/DesignIntf.RegisterSelectionEditor)[`RegisterComponents()`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Classes.RegisterComponents)

[Indy 10](http://www.indyproject.org)的, 和组件正是这样做的`TIdTCPServer`，以确保将and单位添加到子句中。查看和单位，了解 Indy 是如何实现这一点的。`TIdCmdTCPClient``TIdUDPServer``IdContext``IdSocketHandle``uses``IdCoreSelectionEditors.pas``IdRegisterCore.pas`

**更新**：`IdCoreSelectionEditors.pas`and`IdProtocolsSelectionEditors.pas`单元于 2014 年 3 月从 Indy 10 中删除。所有每个组件的 SelectionEditor 类都被替换为在`IdRegisterCore`单元本身中实现的新单个类。这个新的 SelectionEditor 类为所有 Indy 组件注册，它查找在设计时放置的任何 Indy 组件的所有实例，使用所有参数的数据类型的 RTTI 和任何分配的事件处理程序的返回值来了解哪个报告以包含在`uses`条款中的单位。

# google-maps - 仅适用于水的谷歌地图彩色叠加/多边形

> ID：14332204
> 
> 赞同：2
> 
> 时间：2013-01-15T06:25:30.980
> 
> 标签：google-maps, google-maps-api-3

我需要绘制一些易于用英语定义的沿海地区（例如“X 纬度以北海湾中的水”），但由于海岸线的原因是高度复杂的多边形。

我是否必须绘制海岸线的整个（相关）部分，或者有没有办法绘制一个只为水着色（并且对陆地没有影响）的矩形？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:27:16.443

地图绘制工具不了解地形类型。显示的图块只是谷歌从各种数据源生成的背景图像：当您使用“这个像素是土地”或“这个像素是水”的 API 时，它们还没有附加数据。即便如此，谷歌地图的绘图工具还是相当“笨拙”：它们只允许您在具有与纬度/经度匹配的坐标系的画布上绘制几何图元。

遗憾的是，这意味着如果您不希望海岸线重叠，则需要绘制几何图形以匹配海岸线。有这方面的资源，例如[NOAA 海岸线数据](http://shoreline.noaa.gov/data/datasheets/ocsshore.html)，但使用数据并在地图中提供数据是一项非常重要的工作。

# android - 检查数据文件夹android里面的数据是否

> ID：14332210
> 
> 赞同：1
> 
> 时间：2013-01-15T06:25:53.533
> 
> 标签：android, android-file

我正在做一个功能，我记录我的声音，然后我将它保存到数据文件夹中。设法解决保存到数据文件夹中的问题。但现在我的问题是我需要检查数据文件夹中是否有特定数据，以便我可以做一些事情。这是我的代码，不知道哪里出了问题：

```
 individualFile = "y1";
            OUTPUT_FILE= mydir + "/"  + individualFile;

            try{
                File file = this.getFileStreamPath("y1");
                if(file.exists()){

                     Log.v("Oh yes the thing is here", OUTPUT_FILE);
                      Share();

                }else{
                    btn.setVisibility(View.VISIBLE);
                }
            }
            catch(Exception e){
                 //Error message
            }
        } 
```

我需要的是检查录制的文件是否已经在数据文件夹中，如果是，那么我需要显示 Share() 否则我需要显示录制按钮。

# c# - 日期在 19000101 到 20001231 之间的正则表达式

> ID：14332217
> 
> 赞同：-1
> 
> 时间：2013-01-15T06:26:15.193
> 
> 标签：c#

任何机构都可以在以下日期范围内建议 REGX

格式为 CCYYMMDD 19000101 到 20001231 空白

我是REGX的新手，请帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T06:29:58.037

正则表达式解析日期时间？？？一位智者曾经说过：

> 有些人在遇到问题时会想：
> 
> *我知道，我会使用正则表达式。*
> 
> 现在他们有两个问题。

来吧，您有用于此类任务的内置方法，例如[`DateTime.TryParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx)：

```
string dateStr = "19000101";
DateTime date;
if (DateTime.TryParseExact(dateStr, "yyyyMMdd", CultureInfo.InvariantCulture, DateTimeStyles.None, out date)
{
    // you could safely use the date instance created for you here
}
else
{
    throw new InvalidFormatException("Sorry the date you have given me is not in the expected format");
} 
```

好的，既然您已经使用上述方法解析了日期，您可以轻松测试该日期是否在预期范围内：

```
DateTime start = new DateTime(1900, 1, 1);
DateTime end = new DateTime(2000, 12, 31);
DateTime date = ... use the previous method to parse your string
if (date > start && date < end)
{
    // success
}
else
{
    // the date is outside the range
} 
```

# iphone - 在 iphone 中添加自定义 AnnotationView

> ID：14332219
> 
> 赞同：0
> 
> 时间：2013-01-15T06:26:24.530
> 
> 标签：iphone, ios, objective-c, cocoa-touch

我正在使用以下代码来制作自定义 AnnotationView。

My`CustomPointAnnotation`是`MKPointAnnotation`具有 setter/getter 的子类`Player`

```
 -(void) showMarkers
    {
        [self.mapView removeAnnotations:[self.mapView annotations]];
        for (int i = 0 ; i < [self.playersArray count];  i ++)
        {
            Players *player = [self.playersArray objectAtIndex:i];

            CustomPointAnnotation *annotationPoint = [[CustomPointAnnotation alloc] init];
            [annotationPoint setPlayer:player];

            if ([player.name isEqualToString:self.name.text])
            {
                NSLog(@"%@ , %@" , player.name,self.name.text);
                annotationPoint.coordinate = CLLocationCoordinate2DMake([player.latitude doubleValue]+.1, [player.longitude doubleValue]+.1);
                  [self.mapView addAnnotation:annotationPoint];
            }
            else
            {
                NSLog(@"%@ , %@" , player.name,self.name.text);
                annotationPoint.coordinate = CLLocationCoordinate2DMake([player.latitude doubleValue], [player.longitude doubleValue]);
                [self.mapView addAnnotation:annotationPoint];
            }
         }
        [self.mapView setUserInteractionEnabled:YES];

    }

    - (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation
    {
      //  self.mapView.centerCoordinate = userLocation.location.coordinate;
        myLocation = userLocation;
    }

    -(MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
    {
        if ([[annotation title] isEqualToString:@"Current Location"] )
        {
               return nil;
        }

        CustomAnnotationView *annView = [[CustomAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"players"];
        CustomPointAnnotation *ptAnnotation = (CustomPointAnnotation *) annotation;
        [annView setPlayer:ptAnnotation.player];

        annView.image = [UIImage imageNamed:@"marker.png"];
        annView.enabled = YES;
        [annView setUserInteractionEnabled:YES];

        return annView;

    } 
```

问题出在`[annView setPlayer:ptAnnotation.player]; Unrecognized selector sent to instance` 我正在添加 CustomPointAnnotation 所以它应该将其转换回来。我该如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:23:52.290

好的，我不确定你是如何声明自定义类的，但它是这样的：

。H：

```
@interface CustomPointAnnotation: NSObject <MKAnnotation> {

}

@property (nonatomic) CLLocationCoordinate coordinate;
// Other properties like title, subtitle, etc. 
```

.m

```
@implementation CustomPointAnnotation 

@synthesize coordinate; // and other properties 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:23:31.497

```
@interface CustomPointAnnotation : NSObject <MKAnnotation>
{

    玩家*玩家；
}
@property(nonatomic,retain) 播放器 *player;
@property (nonatomic) CLLocationCoordinate 坐标；

```

不要子类化 MKAnnotation 而是确认 MKAnnotation 协议。

```
@interface CustomAnnotationView : MKAnnotationView
{

}

```

无需设置播放器。当您需要访问播放器对象时，请使用 CustomAnnotationView 中的注释访问它。

```
CustomPointAnnotation *annotation=self.annotation;
注释.播放器；

```

# c# - 一起搜索不同的词

> ID：14332220
> 
> 赞同：0
> 
> 时间：2013-01-15T06:26:24.943
> 
> 标签：c#, asp.net, web-applications

```
 public string getSearchResult(string qry, string options, string noOfRecords, string strrefine)
 {
     string Query = "";
     if (qry == "") return "";
     string[] qrymod = qry.Split(' ');
     if (qrymod.Length > 1)
     {
         for (int i=1; qrymod.Length > i; i++)
         {
             qry =qrymod[i];
         }
     }

     //qry = qrymod[0];
     qry = qry.Replace("\\", "\\\\").Replace("%", "\\%").Replace("_", "\\_");
     if (options == "A" || options == "AC")
        Query += " Select top " + noOfRecords + " cast(activityid as nvarchar(50)) as 'id',title as 'title',cast(description as varchar(200)) as 'desc' ,'AC' as 'Type' from searchActivity WHERE title like '%" + chkText(qry) + "%' or description like '%" + chkText(qry) + "%'  escape '\\' ";
} 
```

我可以从此函数执行搜索，但问题是每当我输入带有两个单词的文本时，它会在输入空格后搜索该单词，该函数将开始搜索第二个单词我想编译搜索结果以搜索这两个单词

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:28:59.953

你想做一个全文查询...看看[这里](http://msdn.microsoft.com/en-us/library/ms142571.aspx)

# c#-to-vb.net - 在 VB.NET 中使用 Unity AutoConfig 配置拦截

> ID：14332223
> 
> 赞同：0
> 
> 时间：2013-01-15T06:26:42.113
> 
> 标签：c#-to-vb.net, unity-interception

我正在尝试在 vb.net 中进行拦截，因为我的工作只允许这样做。我使用它的方式是配置一些记录器，以便拦截运行的每个业务逻辑功能并将其记录到数据库中（坏主意，但这只是一个示例）。这是我发现的一个例子：

```
 container
    .ConfigureAutoRegistration()
    .Include(If.Implements<IBusinessService>, (x, y) =>
    {
        if (x.IsClass)
            y.Configure<Interception>().
                SetDefaultInterceptorFor(x,new VirtualMethodInterceptor());
    }) 
```

这是我试图在 vb.net 中工作的内容，但它一直抛出错误。

```
 container.
    ConfigureAutoRegistration().
    Include([if].ImplementsITypeName, Function(x, y)
        if x.IsClass
            y.Configure(of Interception)()
                .SetDefaultInterceptorFor(x,new VirtualMethodInterceptor())
    End Function) 
```

错误是：

```
Argument not specified for parameter 'type' of 'Public Shared Function ImplementsITypeName(type as System.Type) As Boolean. 
```

现在显然我需要指定一些类型，但重点是我需要自动注册，那为什么我需要提供一个类型呢？此外，C# 代码不需要它，代码示例也不需要它（见下文）。

```
 var container = new UnityContainer();

        container
            .ConfigureAutoRegistration()
            .ExcludeAssemblies(a => a.GetName().FullName.Contains("Test"))
            .Include(If.Implements<ILogger>, Then.Register().UsingPerCallMode())
            .Include(If.ImplementsITypeName, Then.Register().WithTypeName())
            .Include(If.Implements<ICustomerRepository>, Then.Register().WithName("Sample"))
            .Include(If.Implements<IOrderRepository>,
                     Then.Register().AsSingleInterfaceOfType().UsingPerCallMode())
            .Include(If.DecoratedWith<LoggerAttribute>,
                     Then.Register()
                            .As<IDisposable>()
                            .WithTypeName()
                            .UsingLifetime<MyLifetimeManager>())
            .Exclude(t => t.Name.Contains("Trace"))
            .ApplyAutoRegistration(); 
```

[http://autoregistration.codeplex.com/](http://autoregistration.codeplex.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:48:11.643

我最终使用了结构图。

# r - 在 R 中使用 graph.adjacency()

> ID：14332233
> 
> 赞同：9
> 
> 时间：2013-01-15T06:27:21.450
> 
> 标签：r, graph, plot, igraph, adjacency-matrix

我在 R 中有一个示例代码，如下所示：

```
library(igraph)
rm(list=ls())
dat=read.csv(file.choose(),header=TRUE,row.names=1,check.names=T) # read .csv file
m=as.matrix(dat)
net=graph.adjacency(adjmatrix=m,mode="undirected",weighted=TRUE,diag=FALSE) 
```

我使用 csv 文件作为输入，其中包含以下数据：

```
 23732   23778   23824   23871   58009   58098   58256
23732   0   8   0   1   0   10  0
23778   8   0   1   15  0   1   0
23824   0   1   0   0   0   0   0
23871   1   15  0   0   1   5   0
58009   0   0   0   1   0   7   0
58098   10  1   0   5   7   0   1
58256   0   0   0   0   0   1   0 
```

在此之后，我使用以下命令检查重量值：

```
E(net)$weight 
```

预期的输出有点像这样：

```
> E(net)$weight
 [1]  8  1 10  1 15  1  1  5  7  1 
```

但是我得到了奇怪的值（并且每次都不同）：

```
> E(net)$weight
 [1] 2.121996e-314 2.121996e-313 1.697597e-313  1.291034e-57 1.273197e-312 5.092790e-313 2.121996e-314 2.121996e-314 6.320627e-316 2.121996e-314 1.273197e-312 2.121996e-313
[13] 8.026755e-316  9.734900e-72 1.273197e-312 8.027076e-316 6.320491e-316 8.190221e-316 5.092790e-313  1.968065e-62 6.358638e-316 
```

我无法找到我在哪里做错了什么？请帮助我获得正确的预期结果，也请告诉我为什么这个奇怪的输出，而且每次运行时都不一样。？？

谢谢，尼丁

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-01T00:00:14.457

下面只是一个小的工作示例，比 CSV 输入更清晰。

```
library('igraph');
adjm1<-matrix(sample(0:1,100,replace=TRUE,prob=c(0.9,01)),nc=10); 
g1<-graph.adjacency(adjm1); 
plot(g1) 
```

![在此处输入图像描述](../Images/42523b4bac0cff4acaf5ba7011bc9061.png)

*Ps`?graph.adjacency`有很多很好的例子（记得运行`library('igraph')`）。*

**相关主题**

1.  [创建共现矩阵](https://stackoverflow.com/questions/13281303/creating-co-occurrence-matrix)
2.  [使用 SAC 的共现矩阵？](https://stackoverflow.com/questions/10568540/co-occurrence-matrix-using-sac)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T07:06:33.200

问题似乎是由于矩阵元素的数据类型。`graph.adjacency`需要 type 的元素`numeric`。不确定它是否是一个错误。

做完之后，

```
m <- as.matrix(dat) 
```

将其模式设置为`numeric`：

```
mode(m) <- "numeric" 
```

然后做：

```
net <- graph.adjacency(m, mode = "undirected", weighted = TRUE, diag = FALSE)
> E(net)$weight
[1]  8  1 10  1 15  1  1  5  7  1 
```

# php - 标头已经发送？...在 哪里？

> ID：14332234
> 
> 赞同：-1
> 
> 时间：2013-01-15T06:27:23.793
> 
> 标签：php, http-headers, output-buffering

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我的日志文件中不断出现此错误：

```
[15-Jan-2013 00:50:04] PHP Warning:  Cannot modify header information - headers already sent by (output started at /home/usr/public_html/display.php:1) in /home/usr/public_html/display.php on line 17 
```

因此，我查看了第一行的页面，没有看到任何可能发送标头的地方。

显示.php：

```
<?PHP
require './err/errhandler.php';
require './assets/display.php';
require './assets/excrate.php';

$mysql_host = "sqlhost";
$mysql_database = "db";
$mysql_user = "user";
$mysql_password = "password";

$name = $_REQUEST["q"];
$type = $_GET["s"];
$timeperiod = $_POST["tp"];
$currency = $_POST["c"];

if(isset($currency)){
    setcookie("prefCur", $currency, time()+60*60*24*30*12, "/");
    $_COOKIE["prefCur"] = $currency;
} else {
    if(!isset($_COOKIE["prefCur"])){
        setcookie("prefCur", "usd", time()+60*60*24*30*12, "/");
        $_COOKIE["prefCur"] = "usd";
    }
}
... 
```

错误处理程序.php：

```
<?PHP
ini_set('display_errors', false);
ini_set('log_errors', true);
ini_set('error_log', dirname(__FILE__) . '/_err.log');
ini_set('output_buffering', 'on'); 
```

显示.php：

```
<?PHP
function strip_name($name)
{
    return preg_replace('/\s\([a-zA-Z 0-9]*\)/', '', preg_replace('/[0-9%]+\s/', '', str_replace(":", "", str_replace("-H", "-h", $name))));
} 
```

excrate.php：

```
<?PHP $eur = 0.747807; $gbp = 0.621828; $rub = 30.227148; 
```

然后我想知道是否是我的主机附加了一个 php 文件，所以将我的 htaccess 更改为：

```
php_value auto_prepend_file none
php_value auto_append_file none
Options +FollowSymLinks
... 
```

而且我仍然收到声称标头已发送的错误消息。我现在很难过。第一行的标头在哪里发送？我什至无法启用输出缓冲，因为它在第一行！

编辑： 之前绝对没有任何内容`<?PHP`，即使打开输出缓冲，它也不起作用。它只是从第 17 行下移到第 18 行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:37:05.227

删除调用`setcookie()`并检查输出。仅仅向它抛出输出缓冲并不总是最好的选择。如果您包含的任何文件输出任何内容或您调用的任何函数抛出任何警告/通知，则构成设置的标头。

再次，删除`setcookie()`并从那里开始。从外部进一步诊断是猜测。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:41:26.393

正如 OP 所说，他的要求没有结束标签，所以添加`?>`到每个要求的末尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T06:32:53.133

简单地将这段代码写在文件的顶部

```
ob_start(); 
```

# spring-mvc - spring项目中如何更改web.xml中的默认目录路径

> ID：14332239
> 
> 赞同：0
> 
> 时间：2013-01-15T06:28:01.110
> 
> 标签：spring-mvc

默认情况下，当我们运行项目时，将调用 /src/main/webapp/WEB-INF/views/ 中的 home.jsp 文件。但是如果我在 WEB-INF 中创建一个新文件夹，比如 jsp 并将 home.jsp 放入其中。那么我如何在 web.xml 中为文件提供路径。在 servlet-mapping /home 或控制器中说 @RequestMapping(value = "home", method = RequestMethod.GET)

# javascript - 鼠标悬停在 kineticjs 矩形事件上

> ID：14332242
> 
> 赞同：3
> 
> 时间：2013-01-15T06:28:10.357
> 
> 标签：javascript, html, html5-canvas, kineticjs

正如你在我的[***小提琴***](http://jsfiddle.net/andrewgable/gSEeb/)中看到的那样。或者在我下面的代码中，我试图让一个事件发生。将鼠标悬停在框上并单击空格键时，将出现确认窗口。单击“是”后，该框将被删除。

错误/问题是，一旦您删除该框并再次单击空格键，它就会出现相同的提示。我以为我已经通过关闭监听解决了这个问题`rTwo.setListening(false); layer.drawHit();`

无论如何，任何帮助将不胜感激。**谢谢。**

***代码：***

```
var stage = new Kinetic.Stage({
    container: 'container',
    width: 850,
    height: 400
});
var layer = new Kinetic.Layer();
var rTwo = new Kinetic.Rect({
    x: 0,
    y: 0,
    width: 100,
    height: 50,
    fill: 'blue',
    draggable: true,
});
layer.add(rTwo);
rTwo.on('mouseover', function() {
    document.onkeypress = function(e) {
        e = e || window.event;
        var charCode = (typeof e.which == "number") ? e.which : e.keyCode;
        if (charCode == 32) {
            var b1 = confirm("Would you like to delete router 2?");
            if (b1 == true) {
                rTwo.hide();
                rLayer.draw();
                rTwo.setListening(false);
                rlayer.drawHit();
            } else if (b1 == false) {
                rLayer.draw();
            }
        }
    };
});
stage.add(layer); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:51:01.140

[http://jsfiddle.net/gSEeb/4/](http://jsfiddle.net/gSEeb/4/)

所以这是你的逻辑：在鼠标悬停时你注册 onkeypress 函数，它检查按键，如果那个键是空格键，然后显示一个提示。

mouseover-> 注册函数

功能 -> 检查按键 -> 是空格键吗？-> 显示提示

如果你看这个，你会检查空格键是否是鼠标悬停，因为鼠标悬停只是注册一个函数。基本上你需要重新检查你的鼠标是否在矩形中。

```
 rTwo.on('mouseover mousemove', function(){
      document.onkeypress = function(e) { 
           e = e || window.event;
           var charCode = (typeof e.which == "number") ? e.which : e.keyCode;
           if (charCode == 32 && rTwo.intersects(stage.getUserPosition())) {
                var b1 = confirm("Would you like to delete router 2?");
                if (b1 == true){
                     rTwo.hide();
                     layer.drawHit();  // or whichever layer rTwo is in
                     layer.draw();
                     rTwo.setListening(false);
                }
                else if (b1 == false){
                     layer.draw();  // you don't really need to redraw this here as nothing is changed
                }
           }
      };
 }); 
```

# text - 防止 Fancybox 文本换行

> ID：14332243
> 
> 赞同：0
> 
> 时间：2013-01-15T06:28:13.150
> 
> 标签：text, resize, fancybox, width

我正在使用 Fancybox 2.1.3 在页面加载时显示一些文本。问题是当我希望它全部放在一行时，它会将它包装成两行。我已经尝试过 width、autoSize 和 fitToView 属性，但它们都没有做任何事情。

我不想修改fancybox css 文件，因为我也在使用fancybox 来显示一些图像，并且这些图像工作正常。

Javascript

```
 <script type='text/javascript'>
     $(document).ready(function(){
        // Activate fancyBox
        $('.text').fancybox({
           padding   : 0,
           closeBtn  : false,
           topRatio  : 0.75,
           helpers : { 
              overlay: {
                 css: {'background' : 'rgba(0, 0, 0, 0.0)'}
              } // overlay 
           } // helpers
        });
        // Launch fancyBox on first element
        $('.text').eq(0).trigger('click');
        // Close automatically
        setTimeout('parent.$.fancybox.close();', 10000);
     }); 
```

HTML

```
<a href='#textid' class='text'></a>
<div style='display: none'>
    <div id='textid'>The display text goes here.</div>
</div> 
```

CSS

```
#textid
   {
   font-size: 40px;
   color: red;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:48:10.903

```
#textid {
  font-size: 40px;
  color: red;
  white-space: nowrap;
} 
```

# javascript - 自定义刻度变换属性

> ID：14332247
> 
> 赞同：0
> 
> 时间：2013-01-15T06:28:25.997
> 
> 标签：javascript, d3.js

横轴，日期时间

```
var xAxis = d3.svg.axis()
    .scale(x)
    .orient('bottom')
    .ticks(d3.time.hours, 3)
    .tickSize(-200) 
```

scale(x) 的范围是 [0, 100]

输出 SVG XML

```
<g class="xAxis" transform="translate(0, 182)">
    <g style="opacity: 1;" transform="translate(0,0)">
        <line class="tick" y2="-200" x2="0"></line>
        <text y="3" x="0" dy=".71em" style="text-anchor: middle;">Tue 15</text>
    </g>
    <g style="opacity: 1;" transform="translate(12.5,0)">
        <line class="tick" y2="-200" x2="0"></line>
        <text y="3" x="0" dy=".71em" style="text-anchor: middle;">03 AM</text>
    </g>
    <g style="opacity: 1;" transform="translate(25,0)">
        <line class="tick" y2="-200" x2="0"></line>
        <text y="3" x="0" dy=".71em" style="text-anchor: middle;">06 AM</text>
    </g>
    ... 
```

只是不知道如何进入该变换属性并使用翻译百分比代替=>（0％，12.5％，25％，等等......）

完整代码

```
var width = 960;
var height = 200;
var container = d3.select(".timeTable")
var svg = container.append("svg")
    .attr("width", "100%")
    .attr("height", height)
var roomID = container.attr("data-room")

function draw(times) {
    // domain
    var floor = d3.time.day.floor(d3.min(times, function (d) { return new Date(d.from); }));
    var ceil = d3.time.day.ceil(d3.max(times, function (d) { return new Date(d.until); }));
    // define linear time scale
    var x = d3.time.scale()
        .domain([floor, ceil])
        .range([0, 100])
    // define x axis
    var xAxis = d3.svg.axis()
        .scale(x)
        .orient('bottom')
        .ticks(d3.time.hours, 3)
        .tickSize(-200)
    // draw time bars
    svg.selectAll("rect")
        .data(times)
        .enter().append("rect")
            .attr("class", "timeRange")
            .attr("width", function (d, i) { return x(new Date(d.until)) - x(new Date(d.from)) + "%" })
            .attr("height", "10px")
            .attr("x", function (d, i) { return x(new Date(d.from)) + "%" })
            .attr("y", function (d, i) { return i * 11 })
    // draw x axis
    svg.append("g")
        .attr("class", "xAxis")
        .attr("transform", "translate(0, " + (height - 18) + ")")
        .call(xAxis)
}

d3.json("/time/get/" + roomID, draw); 
```

# ajax - 禁用提交按钮，直到 Ajax 完成

> ID：14332250
> 
> 赞同：1
> 
> 时间：2013-01-15T06:28:34.857
> 
> 标签：ajax, jquery, form-submit, javascript

我正在尝试禁用提交按钮，直到 ajax 功能完成。

现在，我只能弄清楚如何在用户键入时在指定时间内禁用按钮。

如何在加载 ajax 数据之前禁用提交按钮？谢谢你。

```
<script>

    $('#comment_comment').keyup(function() {
      $("#new_comment_button").attr("disabled", true);
      setTimeout(function() { $("#new_comment_button").removeAttr("disabled"); }, 2000);
    });

    $('#comment_comment').preview({ key:'my key', 
      selector : {type:'rich'},
      preview : {
        submit : function(e, data){
          $.ajax({
            dataType: 'script',
            url: this.form.attr('action'),
            type: 'POST',
            data: data
          });
        },
      },
      autoplay : 0,
      maxwidth : 350,
      display : {display : 'rich'}
    });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:39:40.960

使用简单 JS 启动 AJAX 时禁用该按钮，并在 AJAX 请求完成时启用它。

会是这样的

```
$.ajax({...
   success: function(){
     submitButton.enable(); // Pseudo-code
   },
   ...
 }); 
```

您可以使用 AJAX 请求做几件事。看到[这个帖子](https://stackoverflow.com/questions/555315/jquery-checking-success-of-ajax-post)有关更多信息，

编辑：如果你想阻止双重提交请求，有一种方法可以做到，但我不记得了：/我没有在谷歌上找到它。 [这是一种方法](http://buckybits.blogspot.com.ar/2011/08/preventing-double-clicks-in-jqueryajax.html)，但我不喜欢它

# java - 常量数据成员

> ID：14332252
> 
> 赞同：1
> 
> 时间：2013-01-15T06:28:59.563
> 
> 标签：java, constants

当我们使用 final 关键字时，该变量已被声明为常量，那么使用 static 的必要性是什么？我在我们使用的大多数地方都见过

`public static final int nVar = 12`

对于常量数据成员。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T06:37:50.137

`final`意味着变量不能重新分配给另一个对象/原语。

`static`意味着在 JVM 中运行的所有代码共享同一个变量。

`final`不能重新分配非静态变量，但每个实例都有自己的副本。

`static final`字段（无需创建实例即可访问）通常称为“常量”

`final`（非静态）实例变量通常称为“不可变字段”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T06:39:56.267

**final**意味着，一旦分配了变量的值，就不能修改。

**static**表示“与类关联”；没有它，变量将与类的每个实例相关联。如果没有，您创建的每个实例都会有一个。`static`意味着只要加载类，变量就会保留在内存中

像这样声明一个变量是没有意义的。

```
public final int nVar = 12; 
```

如果这不是要修改的，为什么每个实例都有一个副本。

Hence, Class *constants* need to be declared as `static final` where as the variables which you want to be *immutable* on per instance basis, you declare them as `final`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T06:32:00.770

声明它`static`使您无需创建类型的对象即可访问变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T06:32:13.163

“最终”标识符意味着变量的值不能更改。

然而，“静态”意味着在它定义的类中有一个变量实例。

所以 final 和 static 是两个不同的东西，但是你经常看到它们一起用来定义一个类的常量。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-15T06:35:38.113

**一个原因可能**是您不需要创建类的对象来访问该常量，这就是为什么您应该/可以将其声明为`static`. 因为您可以使用类名访问它，因为它是静态的。

检查此代码

```
public class A{
public static final int aa = 1;
}

public class B{
public final int bb = 1;
}

public class Testing{
SOP(A.aa);// a can be accessed with class name
B b = new B();// where to access the constant bb we need to create class object 
SOP(b.bb);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T06:36:06.520

静态变量意味着它在类级别可用。只有该变量的一个实例可用于该类的所有对象。静态变量可以修改，但更改将反映在该类的所有对象中。final 变量意味着它的值在初始化后不能改变。带有 static 修饰符的 final 变量意味着该变量在类级别可用。简而言之，它将充当该类的所有对象的常量

# perl - 如何“使用”特定版本的 perl CPAN 模块？

> ID：14332254
> 
> 赞同：9
> 
> 时间：2013-01-15T06:29:12.793
> 
> 标签：perl, cpan, perl-module

我有很多 perl 代码在测试和生产中做不同的事情，我想将我的代码锁定到 CPAN 模块的特定版本，以防将来对其中一些模块进行一些更改，这可能会破坏我的代码。

所以我想使用我使用的所有模块的特定版本。我的意思是使用

```
use XML::Smart 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T07:33:08.697

要使用特定模块，请[仅参考](http://search.cpan.org/~ingy/only-0.28/lib/only.pm)

```
use only MyModule => 0.30; 
```

* * *

如果您想要的模块版本高于当前安装的模块版本，也会打印错误您可以说

```
use XML::Smart v1.6.9; 
```

或者

```
use XML::Smart 1.6.9; 
```

或
为了向后兼容

```
use XML::Smart 1.006_009; 
```

参考[perldoc](http://perldoc.perl.org/functions/use.html)：

> *   使用模块版本列表
> *   使用模块版本
> *   使用模块列表
> *   使用模块
> *   使用版本
> 
> 如果在 Module 和 LIST 之间存在 VERSION 参数，则用户将使用给定版本作为参数调用 Module 类中的 VERSION 方法。如果给定版本大于变量 $Module::VERSION 的值，则从 UNIVERSAL 类继承的默认 VERSION 方法会发出嘶嘶声。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T18:51:09.390

你可以做低技术的事情：

```
BEGIN {
    use XML::Simple;
    die "..." unless XML::Simple->VERSION eq '1.23';
    } 
```

知道特定模块如何报告其版本令人头疼。该`version`模块应该进行版本数学运算，但我发现它并不可靠，因为指定版本的方法太多。

# javascript - JSON Stringify 最新值替换以前的值

> ID：14332264
> 
> 赞同：1
> 
> 时间：2013-01-15T06:30:03.670
> 
> 标签：javascript, jquery

大家好，我目前正忙于尝试将可复制的表单转换为 jsonstring，对于每个重复项，它需要添加到字符串中，例如提交时使用一个表单，它给了我 -`{"dependant1":[{"name":"lllll"}]}`但是当我添加另一个表单时它给了我 -`{"dependant1":[{"name":"xxx"}],"dependant2":[{"name":"xxx"}]}`所以基本上是最新的一个覆盖前一个。

无论如何 JS Fiddle 链接 - [http://jsfiddle.net/dawidvdh/zWwEb/](http://jsfiddle.net/dawidvdh/zWwEb/)

我真的不擅长解释事情..所以请提出任何问题。

继承人的代码：

JS

```
//Clone Tracking
var g_counter = 1;
var d_counter = 1;
var dependant = ["dependant"];
var group;
//Clone Tracking
//General Variables
var name_input_groups = ["name-group-1"];
var surname_input_groups = ["surname-group-1"];
var input_groups = ["group-1"];
var age_input_groups = ["age-group-1"];
var gender_input_groups = ["gender-group-1"];
var town_input_groups = ["town-group-1"];
var cell_input_groups = ["cell-group-1"];
var pass_input_groups = ["pass-group-1"];
var relation_input_groups = ["relation-group-1"];
//General Variables
//Generate variables
var name_fields=[0];
var surname_fields=[0];
var id_fields = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12, 13];
var passport_fields = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12, 13];
var cell_fields = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
var age_fields=[0];
var gender_fields=[0];
var town_fields=[0];
var relation_fields=[0];

var name_input = "<input class='name' name='name' />";
var surname_input = "<input class='surname' name='surname' />";
var id_input = "<input class='id' maxlength='1' />";
var age_input = "<input class='age' />";
var gender_input = "<input class='gender' maxlength='1' />";
var town_input = "<input class='town' />";
var cell_input = "<input class='cell' maxlength='1' />";
var pass_input = "<input class='pass' maxlength='1' />";
var relation_input ="<input type='checkbox' class='spouse' />" + 
                    "<input type='checkbox' class='ownchild' />" +
                    "<input type='checkbox' class='adopted' />" +
                    "<input type='checkbox' class='stepchild' />" +
                    "<input type='checkbox' class='parent' />" +
                    "<input type='checkbox' class='inlaw' />" +
                    "<input type='checkbox' class='brother' />" +
                    "<input type='checkbox' class='other' />";
//Generate variables
jQuery(document).ready(function(e) {
    //populate jquery generated fields
    jQuery(surname_fields).each(function() {
        jQuery(surname_input).appendTo('#surname-group-1');
    });
    jQuery(name_fields).each(function() {
        jQuery(name_input).appendTo('#name-group-1');
    });
    jQuery(id_fields).each(function() {
        jQuery(id_input).appendTo('#group-1');
    });
    jQuery(age_fields).each(function() {
        jQuery(age_input).appendTo('#age-group-1');
    });
    jQuery(gender_fields).each(function() {
        jQuery(gender_input).appendTo('#gender-group-1');
    });
    jQuery(town_fields).each(function() {
        jQuery(town_input).appendTo('#town-group-1');
    });
    jQuery(cell_fields).each(function() {
        jQuery(cell_input).appendTo('#cell-group-1');
    });
    jQuery(passport_fields).each(function() {
        jQuery(pass_input).appendTo('#pass-group-1');
    });
    jQuery(relation_fields).each(function() {
        jQuery(relation_input).appendTo('#relation-group-1');
    });

    //populate jquery generated fields

    //Cloning Function
    jQuery('#clone').click(function() {
        clone_dependant();
    });

    function clone_dependant() {
        // Store the value of the previous Id to insert the cloned div..
        var oldId = g_counter;
        g_counter++;
        currentdep ='dependant-'+g_counter;
        // Clone the Dependant Div and set a new id
        var $clonedDiv = jQuery('#dependant-1').clone(false).attr('id', 'dependant-'+g_counter);
        var cell_newDiv = 'cell-group-'+ g_counter;
        var town_newDiv = 'town-group-'+ g_counter;
        var gender_newDiv = 'gender-group-'+ g_counter;
        var age_newDiv = 'age-group-'+ g_counter;
        var pass_newDiv = 'pass-group-'+ g_counter;
        var id_newDiv = 'group-'+ g_counter;
        var name_newDiv = 'name-group-'+ g_counter;
        var surname_newDiv = 'surname-group-'+ g_counter;
        var relation_newDiv = 'relation-group-'+ g_counter;

        // Find div's inside the cloned object and set a new id's
        $clonedDiv.find('name-group-1').attr('id',"name-group-" + g_counter );
        $clonedDiv.find('surname-group-1').attr('id',"surname-group-" + g_counter );
        $clonedDiv.find('group-1').attr('id',"group-" + g_counter );
        $clonedDiv.find('age-group-1').attr('id',"age-group-" + g_counter );
        $clonedDiv.find('gender-group-1').attr('id',"gender-group-" + g_counter );
        $clonedDiv.find('town-group-1').attr('id',"town-group-" + g_counter );
        $clonedDiv.find('cell-group-1').attr('id',"cell-group-" + g_counter );
        $clonedDiv.find('pass-group-1').attr('id',"pass-group-" + g_counter );
        $clonedDiv.find('relation-group-1').attr('id',"relation-group-" + g_counter );

        // You don't need to Loop thru the inputs to set the value
        $clonedDiv.find('input').val('');

        // Insert the cloned object 
        $clonedDiv.insertAfter("#dependant-" + oldId);

        name_input_groups.push(name_newDiv);
        surname_input_groups.push(surname_newDiv);
        cell_input_groups.push(cell_newDiv);
        age_input_groups.push(age_newDiv);
        gender_input_groups.push(gender_newDiv);
        town_input_groups.push(town_newDiv);
        pass_input_groups.push(pass_newDiv);
        relation_input_groups.push(relation_newDiv);
        input_groups.push(id_newDiv);
    };
    //Cloning Function
    //Validation

    function validate_gen() {};

    function validate_Id(values) {
            var idNumber = values;
            var correct = true;
            if (idNumber.length != 13 || !isNumber(idNumber)) {correct = false;}
            var tempDate = new Date(idNumber.substring(0, 2), idNumber.substring(2, 4) - 1, idNumber.substring(4, 6));
            var today = new Date();
            var id_date = tempDate.getDate();
            var id_month = tempDate.getMonth();
            var id_year = tempDate.getFullYear();
            var currentYear = (new Date).getFullYear();
            var age = Math.floor((today-tempDate) / (365.25 * 24 * 60 * 60 * 1000));
            var fullDate = id_date + "-" + (id_month + 1) + "-" + id_year;
            if (!((tempDate.getYear() == idNumber.substring(0, 2)) && (id_month == idNumber.substring(2, 4) - 1) && (id_date == idNumber.substring(4, 6)))) {
correct = false;}
            var genderCode = idNumber.substring(6, 10);
            var gender = parseInt(genderCode) < 5000 ? "Female" : "Male";
            var citzenship = parseInt(idNumber.substring(10, 11)) == 0 ? "Yes" : "No";
            var tempTotal = 0;
            var checkSum = 0;
            var multiplier = 1;
            for (var i = 0; i < 13; ++i) {tempTotal = parseInt(idNumber.charAt(i)) * multiplier;
                if (tempTotal > 9) {tempTotal = parseInt(tempTotal.toString().charAt(0)) + parseInt(tempTotal.toString().charAt(1));}
                checkSum = checkSum + tempTotal;
                multiplier = (multiplier % 2 == 0) ? 1 : 2;}
            if ((checkSum % 10) != 0) {correct = false;};
            if (correct) {
                 $.each(age_input_groups , function(i){
                    var id = age_input_groups[i];
                    var values = $.map($('#'+id + ' input') , function(e,i){
                        return $(e).val(age);
                    });
                });
               $.each(gender_input_groups , function(i){
                    var id = gender_input_groups[i];
                    var values = $.map($('#'+id + ' input') , function(e,i){
                        return $(e).val(gender);
                    });
                });
                console.log(idNumber);
            }
            else {
                console.log(idNumber + "-wrong");
            }
            return false;}

        function isNumber(n) {return !isNaN(parseFloat(n)) && isFinite(n);};

    function validate_Pass(pass_values) {
        console.log("passport"+pass_values);
    };

    function validate_Email() {};

    function validate_Cell(cell_values) {
        if (cell_values != 10){
            console.log("Cell= "+cell_values);
        }else{
            console.log("bad");
        }
    };
    //Validation
//Multiple Inputs function
//ID
    $(document).on('keydown', 'input.id', function(e) {
        if (e.keyCode == 8) {
            $(this).val('');
            $(this).prev().val('');
            $(this).prev().focus();
            //Validate(current);
        }
    });

    $(document).on('keyup', 'input.id', function() {
        if (this.value.match(/\d+/)) {
            var $this = $(this);
            if ($this.next('input.id').length) {
                $this.next().focus();
            } else {
                $.each(input_groups , function(i){
                    var id = input_groups[i];
                    var values = $.map($('#'+id + ' input') , function(e,i){
                        return $(e).val();
                    }).join('');
                    validate_Id(values);
                });
            }
        }
    });
//ID
//CELL
    $(document).on('keydown', 'input.cell', function(e) {
        if (e.keyCode == 8) {
            $(this).val('');
            $(this).prev().val('');
            $(this).prev().focus();
            //Validate(current);
        }
    });

    $(document).on('keyup', 'input.cell', function() {
        if (this.value.match(/\d+/)) {
            var $this = $(this);
            if ($this.next('input.cell').length) {
                $this.next().focus();
            } else {
                $.each(cell_input_groups , function(i){
                    var id = cell_input_groups[i];
                    var cell_values = $.map($('#'+id + ' input') , function(e,i){
                        return $(e).val();
                    }).join('');
                    validate_Cell(cell_values);
                });
            }
        }
    });
//CELL
//Pasport
    //Multiple Inputs function
        $(document).on('keydown', 'input.pass', function(e) {
        if (e.keyCode == 8) {
            $(this).val('');
            $(this).prev().val('');
            $(this).prev().focus();
            //Validate(current);
        }
    });

    $(document).on('keyup', 'input.pass', function() {
        if (this.value.match(/\d+/)) {
            var $this = $(this);
            if ($this.next('input.pass').length) {
                $this.next().focus();
            } else {
                $.each(pass_input_groups , function(i){
                    var id = pass_input_groups[i];
                    var pass_values = $.map($('#'+id + ' input') , function(e,i){
                        return $(e).val();
                    }).join('');
                    validate_Pass(pass_values);
                });
            }
        }
    });
//Pasport
//Multiple Inputs function
//submit function

var result = {};
var dependants = {};

jQuery('#submit').click(function(){

    $('.dependant').each(function(k, v){
        dependants['name'] = $(v).find('.name').val();
        result['dependant'+g_counter] = [dependants];
    });

    var jsonData = JSON.stringify(result);
    console.log(g_counter);
    console.log(jsonData);
});

//submit function
}); 
```

HTML

```
<div id="dependant-1" class="dependant">
    name<div id="name-group-1"></div>
    surname<div id="surname-group-1"></div>
    id<div id="group-1"></div>
    age<div id="age-group-1"></div>
    gender<div id="gender-group-1"></div>
    townofbirth<div id="town-group-1"></div>
    cell<div id="cell-group-1"></div>
    passport<div id="pass-group-1"></div>
    relationship<div id="relation-group-1"></div>
</div>

<button id="clone">clone</button>
<button id="submit">submit</button> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T07:04:25.360

很久以前，这个问题占用了我一半的工作日......

修复非常简单 - 移动以下行：

> var 依赖 = {};

在里面

> $('.dependant').each(function(...));

像这样：

```
$('.dependant').each(function(k, v){
    var dependants = {};
    dependants['name'] = $(v).find('.name').val();
    result['dependant'+g_counter] = [dependants];
}); 
```

这导致了您的问题，因为变量**依赖**项对于您的函数是全局的。您正在为其设置不同的值，然后 result[key] 指向它。因此，最后，在您的**结果**对象中，您有几个指向同一个**因**变量的键。而且因为**依赖**项对于函数来说是全局的，所以它毕竟拥有最后一个值。

最后，结果对象的每个键都指向相同的值。

我希望这有帮助。

# android - 安卓构建错误

> ID：14332266
> 
> 赞同：1
> 
> 时间：2013-01-15T06:30:16.337
> 
> 标签：android, java

我在 android 中创建了一些模块来添加一些额外的功能。

我已经定义了自己的 make 文件，但没有任何类似`out/target/common/obj/JAVA_LIBRARIES/My_featuers_intermiediates/ javalib.jar`.

当我构建我的应用程序时，我收到如下错误：

> 没有规则使“out/target/common/obj/APPS/My_features_intermediates/classes-full-debug.jar”需要目标“out/target/common/obj/JAVA_LIBRARIES/my_featuers_intermiediates/javalib.jar”

我的错误可能是什么？

# cakephp - 在 cakephp 2.0 中动态显示所有字段

> ID：14332273
> 
> 赞同：0
> 
> 时间：2013-01-15T06:30:48.303
> 
> 标签：cakephp

我正在 CakePHP 中创建应用程序。现在我正在为最终用户提供功能，以便他/她可以在任何表格中添加自己的自定义字段。现在用户可以正确创建字段，也可以输入和编辑。

为此`$this->Form->inputs();`，当我使用视图或索引页面时，我现在使用该字段未显示。因为编写正确的字段名称不是一个好主意。任何人都知道如何显示所有其他自定义字段。我不想用

```
<?php echo h($student['Student']['id']); ?> 
```

我希望它会直接显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:33:14.950

CakePHP 有一个特殊的功能`Scaffolding`，可以动态创建所有的添加/编辑/索引页面。

请查看[http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Scaffolding.html](http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Scaffolding.html)

# algorithm - 最小最大堆中的删除最大操作

> ID：14332279
> 
> 赞同：5
> 
> 时间：2013-01-15T06:31:40.683
> 
> 标签：algorithm, data-structures, heap, minmax-heap

我正在实现一个最小最大堆，一种双端优先级队列。您可以在[这里](https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=8&cad=rja&ved=0CF4QFjAH&url=http://www.csie.ntnu.edu.tw/~violet/ds92/dsCh9.ppt&ei=3_D0UMKwCYeikwX9zIDwCg&usg=AFQjCNHPjKuE5ZiGwj13cYcVbF8M8U7nsw&bvm=bv.41018144,d.bmk)查看有关最小-最大堆的更多信息。

插入和删除最小操作的代码很简单，可以在网上找到。但是，我也在尝试在最小最大堆上实现**删除最大操作。**

最初，我觉得 min-max heap 中的 delete-max 与 max-min heap 中的 delete-max 相同（如果我们考虑包含最大元素的 min-max heap 的子树，它类似于 max-min heap）。因此，实现将简单且类似于 min-max 堆的 delete-min。

但有个问题： ![在此处输入图像描述](../Images/f779b61141032c5a54b72cd0206a41c1.png)

从上图中可以看出，虽然70是最大元素，但是最小-最大堆**的最后一个元素（12）**不在包含70的子树中。那么，我可以用它来替换左子树中留下的间隙吗删除70后？

如果我们不使用该元素，而是按照**max-min heap 的 delete-max 过程**并使用 20 来替换间隙，那么插入到堆中的下一个元素将是 10 的右孩子，并且永远不会有右孩子9。

那么，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T06:47:01.440

我相信删除最后一层最右边的节点并用它来替换被删除的最大元素是正确的，即使它在树中交叉。理由如下：

1.  删除最后一层中最右边的节点不会改变任何需要为该树中的任何节点保留的不变量：所有处于最小级别的节点仍然小于其所有后代，并且所有处于最大级别的节点仍然比他们的后代更伟大。

2.  这棵树仍然是一棵完全二叉树。

一旦你移动了这个节点，你就可以在最大最小堆中使用正常的修复过程，以确保左子树不变量仍然成立。

希望这可以帮助！

# java - 设置请求标头并转发到另一个应用程序

> ID：14332284
> 
> 赞同：5
> 
> 时间：2013-01-15T06:32:07.803
> 
> 标签：java, servlets, request-headers

我正在编写一个基于 Java 的 Web 应用程序，它在实际生产环境中将由另一个应用程序作为前端，该应用程序将在请求到达我的应用程序之前设置某些 HTTP 请求标头。

但是，在开发环境中，我没有前端应用程序，为此我需要创建一个模拟相同行为的模拟 Web 应用程序。即这个模拟应用程序应该设置请求标头并重定向或转发或我不知道的任何内容:) 到我的应用程序中的某个页面。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T16:51:09.470

以下文章可能对您有所帮助：

*   [将标头信息添加到现有 HTTP 请求](http://bijubnair.blogspot.com/2008/12/adding-header-information-to-existing.html)
*   [如何修改 J2EE Web 应用程序中的请求标头。](http://vangjee.wordpress.com/2009/02/25/how-to-modify-request-headers-in-a-j2ee-web-application/)

* * *

PS
我很抱歉我只提供了链接，这是我对SO的早期回答之一））

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T06:51:44.257

如果您不想按照@user1979427 的建议修改代码，您可以使用代理服务器来修改标头或动态添加标头。

例如，在 Apache HTTPD 中，您将添加如下内容并代理

```
Header add HEADER "HEADERVALUE"
RequestHeader set HEADER "HEADERVALUE" 
```

请参阅[HTTPD 文档](http://httpd.apache.org/docs/current/mod/mod_headers.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T08:39:28.083

您应该创建一个传递 headername 和 header 值的 AddReqHeaderForFrowardWrapper 请求包装器。并且，覆盖请求标头相关的方法以返回您的自定义标头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-04T10:26:26.850

您可以使用 Tracer 来实现这一点。有可用的框架来支持这种实现。Spring 提供了 Sleuth、Zipkin、OpenTracing。我发现 OpenTracing 易于使用，无需担心依赖冲突。在此处阅读更多信息：[https ://opentracing.io/guides/java/](https://opentracing.io/guides/java/)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-01-15T08:53:05.347

我没有编写模拟应用程序，而是使用了允许我添加自定义标题的浏览器插件！

* * *

## 回答 #6

> 赞同：-7
> 
> 时间：2013-01-15T06:46:23.040

要在 java 中设置标头，您可以使用：

```
request.setHeader(attributeName, attributeValue); 
```

对于重定向到另一个页面，您可以使用：

```
request.sendRedirect(URL); 
```

# java - 使用摇摆在文本中绘制虚线以供选择

> ID：14332289
> 
> 赞同：1
> 
> 时间：2013-01-15T06:32:28.107
> 
> 标签：java, swing, drag-and-drop

谁能知道如何在选择文本时显示虚线以便用户可以拖动该文本？

![用户选择文本时选择的文本。](../Images/ea7f6d7c7885397eb674d5eceae4b9dd.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T06:36:06.683

您可以像这里描述的那样添加亮点[http://java-sl.com/tip_vertical_selection.html](http://java-sl.com/tip_vertical_selection.html)并定义自己的`HighLightPainter`。在画家`BasicStroke`中定义虚线并将drawRect与描边线一起使用。

# compass-sass - 响应式网格：Zen Grids 与 Suzy

> ID：14332291
> 
> 赞同：2
> 
> 时间：2013-01-15T06:32:31.383
> 
> 标签：compass-sass, susy-compass

我即将开始一个新项目，我很难在 Zen Grids 和 Susy 之间做出选择。你们能告诉我每个框架的优点/缺点是什么吗？

**以供参考**

*   [http://zengrids.com/](http://zengrids.com/)
*   [http://susy.oddbird.net/](http://susy.oddbird.net/)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:01:18.707

我从未使用过 Zen Grids，但我使用过 Susy——我也从未听说过 Zen Grids 出现在 compass google 讨论组中——但我多次听说过 Susy。

我不知道这是否意味着 Susy 本质上更难使用，或者仅仅是因为它更受欢迎。我倾向于相信后者是真实的——但也许这只是一种偏见，因为我已经使用 Susy 有一段时间了。

无论如何，有另一种选择真是太好了——我很高兴听到其他人的评论，他们对这两个评论都有经验。我很想用 Zen Grids 开始一个新项目，只是为了试一试。

对不起，我没有更客观的意见。我的主要观点是，我知道我听说过 Susy——实际上很多——而且已经很久了。我认为 Susy 更受欢迎，因此我倾向于坚持趋势项目。不过谁知道呢——这就是网络，如今在 CSS 开发的世界里一切皆有可能。所以，愿最好的网格系统获胜！

干杯，-杰里米

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-20T18:33:59.997

对于需要 LTR 和 RTL 方向的站点，zen-grids 非常整洁和简单。但是在奇异点或susy中，有解决方案，但需要一些工作。（对我来说很多工作）。我认为这是 zen-grids 相对于 susy 的主要优势。并且它没有提供很多版本，并且您不需要处理 susyone 等不推荐使用的语法。但是 susy 有很多我不需要使用它们的 zen-grids 功能。所以答案是“这取决于”。

# wicket - 通过 JavaScript 重新排列后，wicket 是否会失去对 HTML 组件的控制？

> ID：14332292
> 
> 赞同：1
> 
> 时间：2013-01-15T06:32:33.823
> 
> 标签：wicket

我在 wicked 中有一个重复组件，需要根据用户要求添加和删除。组件的最大数量是预定义的。所以我在启动时添加组件，并根据需要隐藏和显示。当组件有任何删除时，我需要更改 HTML 标记中组件的排列。我为此使用 JavaScript。我想知道如果我这样做，检票口是否会失去对组件的控制。

```
<div wicket:id="borrowerTabs" id="borrowerTabs">
    <span wicket:id="borrowerTab1" id="borrowerTab1" ></span>
    <span wicket:id="borrowerTab2" id="borrowerTab2" ></span>
    <span wicket:id="borrowerTab3" id="borrowerTab3" ></span>
    <span wicket:id="borrowerTab4" id="borrowerTab4" ></span>
    <button wicket:id="addBorrower" id="addBorrower" type="button"></button>
    <button wicket:id="deleteBorrower" id="deleteBorrower" onclick="updateUIForDeleteBorrower()" type="button"></button>
</div> 
```

如果删除borrowerTab3，则borrowerTab4 中的内容将替换borrowerTab3 中的内容，并且模型对象也将被交换，尽管我没有执行target.add(borrowerTab3)。现在在提交表单时，我没有得到borrowerTab3 中字段的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:59:37.580

我不确定它是否有帮助，但可以在你的 java 代码中尝试 component.setVisible(false) 来隐藏它。

# android - 如何使用 AsyncTask 从 Url 设置图像？

> ID：14332296
> 
> 赞同：5
> 
> 时间：2013-01-15T06:33:12.503
> 
> 标签：android, multithreading, android-asynctask, android-drawable

我是一个新手程序员，我正在制作一个 android 程序，该程序在 ImageView 上显示来自给定 url 的图像。我的问题是你如何在 AsyncTask 上使用它？

这些代码适用于 min SDK 2.2，但我切换到 min SDK 3.0，因此它需要在 AsyncTask 上运行。谢谢您的帮助！:)

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    satellite(); //satellite's image from main menu

}

//******satellite url
private void satellite() {
    // TODO Auto-generated method stub
    ImageView imgView =(ImageView)findViewById(R.id.satellite);
    Drawable drawable = LoadImageFromWeb("http://www.pagasa.dost.gov.ph/wb/sat_images/satellite.gif");
    imgView.setImageDrawable(drawable);        
}

private Drawable LoadImageFromWeb(String url){
      try{
          InputStream is = (InputStream) new URL(url).getContent();
          Drawable d = Drawable.createFromStream(is, "src name");
          return d;
      }catch (Exception e) {
          System.out.println("Exc="+e);
          return null;
      }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:57:20.747

好吧，我不知道为什么 android SDK 不提供对它的支持（但）我通过 UrlImageView 类扩展了 ImageView 类，并提供了异步加载和缓存支持。我把我班级的代码放在下面，即插即用。类正文在我文章的最后，现在我写了两行如何方便地使用它。

现在支持另外两种方法：

```
setImageUrl(URL url) // sets the bitmap by its URL
cancelLoading();     // tell this view to cancel pending load 
```

如何使用你的java代码：

```
// [somewhere in your activity]
UrlImageView urlImg = new UrlImageView(this).setImageUrl("http://abc.png");
...
urlImg.setImageUrl("http://abc2.png"); // works like expected 
```

如何在布局中绑定：

```
<!-- thumbnail -->
<com.gplushub.android.view.UrlImageView
    android:id="@+id/thumbnail"
    android:layout_width="64dp"
    android:layout_height="64dp"
    android:layout_gravity="center_vertical"
    android:layout_marginRight="2dp"
    android:scaleType="fitXY" /> 
```

..再次在您的活动java代码中：

```
((UrlImageView)findViewById(R.id.thumbnail)).setImageUrl("http://foo.bar.png"); 
```

我在超过 100 个条目的列表中使用它 - 非常好。这里是类主体，您可以使用它、修改它、扩展它，随心所欲：

```
package com.gplushub.android.view;

import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import java.net.URLConnection;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.drawable.Drawable;
import android.net.Uri;
import android.os.AsyncTask;
import android.util.AttributeSet;
import android.util.Log;
import android.widget.ImageView;

/**
 * an {@link ImageView} supporting asynchronous loading from URL. Additional
 * APIs: {@link #setImageURL(URL)}, {@link #cancelLoading()}.
 * 
 * @author ep@gplushub.com / Eugen Plischke
 * 
 */
public class UrlImageView extends ImageView {
  private static class UrlLoadingTask extends AsyncTask<URL, Void, Bitmap> {
    private final ImageView updateView;
    private boolean         isCancelled = false;
    private InputStream     urlInputStream;

    private UrlLoadingTask(ImageView updateView) {
      this.updateView = updateView;
    }

    @Override
    protected Bitmap doInBackground(URL... params) {
      try {
        URLConnection con = params[0].openConnection();
        // can use some more params, i.e. caching directory etc
        con.setUseCaches(true);
        this.urlInputStream = con.getInputStream();
        return BitmapFactory.decodeStream(urlInputStream);
      } catch (IOException e) {
        Log.w(UrlImageView.class.getName(), "failed to load image from " + params[0], e);
        return null;
      } finally {
        if (this.urlInputStream != null) {
          try {
            this.urlInputStream.close();
          } catch (IOException e) {
            ; // swallow
          } finally {
            this.urlInputStream = null;
          }
        }
      }
    }

    @Override
    protected void onPostExecute(Bitmap result) {
      if (!this.isCancelled) {
        // hope that call is thread-safe
        this.updateView.setImageBitmap(result);
      }
    }

    /*
     * just remember that we were cancelled, no synchronization necessary
     */
    @Override
    protected void onCancelled() {
      this.isCancelled = true;
      try {
        if (this.urlInputStream != null) {
          try {
            this.urlInputStream.close();
          } catch (IOException e) {
            ;// swallow
          } finally {
            this.urlInputStream = null;
          }
        }
      } finally {
        super.onCancelled();
      }
    }
  }

  /*
   * track loading task to cancel it
   */
  private AsyncTask<URL, Void, Bitmap> currentLoadingTask;
  /*
   * just for sync
   */
  private Object                       loadingMonitor = new Object();

  public UrlImageView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
  }

  public UrlImageView(Context context, AttributeSet attrs) {
    super(context, attrs);
  }

  public UrlImageView(Context context) {
    super(context);
  }

  @Override
  public void setImageBitmap(Bitmap bm) {
    cancelLoading();
    super.setImageBitmap(bm);
  }

  @Override
  public void setImageDrawable(Drawable drawable) {
    cancelLoading();
    super.setImageDrawable(drawable);
  }

  @Override
  public void setImageResource(int resId) {
    cancelLoading();
    super.setImageResource(resId);
  }

  @Override
  public void setImageURI(Uri uri) {
    cancelLoading();
    super.setImageURI(uri);
  }

  /**
   * loads image from given url
   * 
   * @param url
   */
  public void setImageURL(URL url) {
    synchronized (loadingMonitor) {
      cancelLoading();
      this.currentLoadingTask = new UrlLoadingTask(this).execute(url);
    }
  }

  /**
   * cancels pending image loading
   */
  public void cancelLoading() {
    synchronized (loadingMonitor) {
      if (this.currentLoadingTask != null) {
        this.currentLoadingTask.cancel(true);
        this.currentLoadingTask = null;
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T06:38:43.943

如果图像不是那么大，您可以将匿名类用于异步任务。这会是这样的：

```
ImageView mChart = (ImageView) findViewById(R.id.imageview);
String URL = "http://www...anything ...";

mChart.setTag(URL);
new DownloadImageTask.execute(mChart); 
```

任务类是

```
public class DownloadImagesTask extends AsyncTask<ImageView, Void, Bitmap> {
   ImageView imageView = null;
   @Override
   protected Bitmap doInBackground(ImageView... imageViews) {
      this.imageView = imageViews[0];
      return download_Image((String)imageView.getTag());
   }

   @Override
   protected void onPostExecute(Bitmap result) {
      imageView.setImageBitmap(result);
   }

   private Bitmap download_Image(String url) {
       ...
   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T06:51:35.957

试试这个代码，让你的可绘制变量全局并改变你的卫星函数，如下所示：

```
private void satellite() {
      // TODO Auto-generated method stub
      ImageView imgView =(ImageView)findViewById(R.id.satellite);
      new yourTask().execute();
} 
```

然后像这样创建 asyncTask 类：

```
private class yourTask extends AsyncTask<Integer, Void, Integer> {
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        //show a progress bar
    }

    @Override
    protected String doInBackground(Integer... params) {
        drawable  =  LoadImageFromWeb("http://www.pagasa.dost.gov.ph/wb/sat_images/satellite.gif"); 
        return 0; 
    }      

    @Override
    protected void onPostExecute(Integer result) {
        super.onPostExecute(result);
        imgView.setImageDrawable(drawable);   
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T06:42:00.960

这是 Aynctask 实现的代码 使您的可绘制对象在 Aynctask 类中成为全局对象。

```
Class MyDownloader extends AsyncTask<Void,Void,String>{

    Drawable drawable;    
    @Override
    public String doInBackground(Void... args){

        drawable = LoadImageFromWeb("http://www.pagasa.dost.gov.ph/wb/sat_images/satellite.gif");
        return null; // here you can pass any string on response as on error or on success

    }

    public void onPostExecute(String result){

        if(drawable!=null){

            imgView.setImageDrawable(drawable);

        }

    }

} 
```

现在创建这个类的对象并执行它

```
private void satellite() {
    // TODO Auto-generated method stub
  ImageView imgView =(ImageView)findViewById(R.id.satellite);
  new MyDownloader.execute();

} 
```

这是用于缓存图像的很好的示例链接，请查看此链接和示例

[https://github.com/novoda/ImageLoader](https://github.com/novoda/ImageLoader)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T06:44:16.940

当你以后做任何网络操作时你是对的`Android 2.2(Froyo)`必须使用[Asynctask](http://developer.android.com/reference/android/os/AsyncTask.html)

这是最好理解的[例子](http://www.sep.com/mcterry/2012/03/11/android-asynctasks-for-updating-your-ui/)`AsyncTask`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-16T14:10:34.520

只需创建一个新类“ **DownloadImageTask** ”，如下所示，并将其放在您拥有**Activity**的同一文件夹中。

```
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.util.Log;
import android.widget.ImageView;
import android.os.AsyncTask;
import java.io.*;

public class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {
    ImageView bmImage;

    public DownloadImageTask(ImageView bmImage) {
        this.bmImage = bmImage;
    }

    protected Bitmap doInBackground(String... urls) {
        String urldisplay = urls[0];
        Bitmap myImage = null;
        try {
            InputStream in = new java.net.URL(urldisplay).openStream();
            myImage = BitmapFactory.decodeStream(in);
        } catch (Exception e) {
            Log.e("Error", e.getMessage());
            e.printStackTrace();
        }
        return myImage;
    }

    protected void onPostExecute(Bitmap result) {
        bmImage.setImageBitmap(result);
    }
} 
```

**在此添加行之后，在您的Activity**中创建该类。

```
import android.graphics.Bitmap;
import android.os.AsyncTask;
import android.support.v7.app.ActionBarActivity;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.util.Log;
import android.widget.ImageView;

public class HomeScreen extends ActionBarActivity {

    private final String TAG = "test1";
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.d(TAG, "onCreate");
        setContentView(R.layout.activity_home_screen);
        InitHomeScreen();
    }

    protected void InitHomeScreen()
    {
        String imageUrl = "http://s20.postimg.org/4t9w2pdct/logo_android_png.png";
        Log.d(TAG, "Get an Image");
        // Get an Image
        try{
            AsyncTask<String, Void, Bitmap> execute = new DownloadImageTask((ImageView) findViewById(R.id.imageView))
                    .execute(imageUrl);
              // R.id.imageView  -> Here imageView is id of your ImageView
        }
        catch(Exception ex)
        {
        }
    }

   // Other code... 
```

不要忘记允许访问 INTERNET 到您的 Android 应用程序。

检查您的清单文件。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.dmitry.myapplication1" >

    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:allowBackup="true"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".HomeScreen"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-12T12:20:15.323

根据来自 comeGetSome 的回答，我创建了自己的实现，该实现与普通 ImageView 类一起使用，而不是创建新类 UrlImageView，还提供了新选项，例如 - 加载完成或取消时该怎么做

现在根据需要加载图像，就像从三个 loadImage 方法中的任何一个

```
 UrlImageLoader urlImageLoader=new UrlImageLoader();
       ImageView imageView=new ImageView(context);
       //load and set the image to ImageView
       urlImageLoader.loadImage(imageView, "http://www......com/.....jpg");
       //for loading a image only - load image and do any thing with the bitmap
       urlImageLoader.loadImage("http://www......com/.....jpg", new UrlImageLoader.OnLoadingCompleteListener() {

            @Override
            public void onComplete(ImageView imageView, Bitmap bmp) {
                // do anything with the Bitmap
                // here imageView will be null
            }
            @Override
            public void onCancel(ImageView imageView) {

            }
        });
       urlImageLoader.loadImage(imageView, "http://www......com/.....jpg", new UrlImageLoader.OnLoadingCompleteListener() {

            @Override
            public void onComplete(ImageView imageView, Bitmap bmp) {
                // do anything with the Bitmap
                // here imageView is not null
                imageView.setImageBitmap(bmp);
            }
            @Override
            public void onCancel(ImageView imageView) {

            }
        }); 
```

创建此类用于加载 UrlImageLoader

```
/*special thanks to stackoverflow.com user comeGetSome for UrlImageLoadingTask code
 * question - http://stackoverflow.com/questions/14332296/how-to-set-image-from-url-using-asynctask/15797963
 * comeGetSome - http://stackoverflow.com/users/1005652/comegetsome
 */
package com.GameG.SealTheBox;

import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.AsyncTask;
import android.util.Log;
import android.widget.ImageView;

public class UrlImageLoader {
    public static interface OnLoadingCompleteListener {
        public void onComplete(ImageView imageView, Bitmap bmp);
        public void onCancel(ImageView imageView);
    }
    ArrayList<UrlImageLoadingTask> loadingList=new ArrayList<UrlImageLoadingTask>();
    /**
     * Loads a image from url and calls onComplete() when finished<br>
     * @Note you should manually set the loaded image to ImageView in the onComplete()
     * @param imageView
     * @param url
     * @param onComplete
     */
    public void loadImage(ImageView imageView, String url, OnLoadingCompleteListener onComplete){
        try {
            URL url2=new URL(url);
            if(imageView!=null){
                for(int i=0;i<loadingList.size();i++){
                    UrlImageLoadingTask tmptask=loadingList.get(i);
                    if(tmptask.updateView!=null && tmptask.updateView.equals(imageView)){
                        tmptask.cancel(true);
                        break;
                    }
                }
            }
            UrlImageLoadingTask loadtask=new UrlImageLoadingTask(imageView,onComplete,url);
            loadtask.execute(url2);
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }
    }

    /**
     * Loads a image from url and calls onComplete() when finished
     * @param url
     * @param onComplete
     */
    public void loadImage(String url, OnLoadingCompleteListener onComplete){
        loadImage(null,url,onComplete);
    }
    /**
     * Loads a image from url and sets the loaded image to ImageView
     * @param imageView
     * @param url
     */
    public void loadImage(ImageView imageView, String url){
        loadImage(imageView,url,null);
    }
    /**
     * Cancel loading of a ImageView
     */
    public void cancel(ImageView imageView){
        for(int i=0;i<loadingList.size();i++){
            UrlImageLoadingTask tmptask=loadingList.get(i);
            if(tmptask.updateView.equals(imageView)){
                loadingList.remove(i);
                tmptask.cancel(true);
                break;
            }
        }
    }
    /**
     * Cancel loading of a Url
     */
    public void cancel(String url){
        for(int i=0;i<loadingList.size();i++){
            UrlImageLoadingTask tmptask=loadingList.get(i);
            if(tmptask.url.equals(url)){
                loadingList.remove(i);
                tmptask.cancel(true);
                break;
            }
        }
    }
    /**
     * Cancel all loading tasks 
     */
    public void cancelAll(){
        while(loadingList.size()>0){
            UrlImageLoadingTask tmptask=loadingList.get(0);
            loadingList.remove(tmptask);
            tmptask.cancel(true);
        }
    }

    private class UrlImageLoadingTask extends AsyncTask<URL, Void, Bitmap> {
        public ImageView updateView=null;
        public String url;
        private boolean         isCancelled = false;
        private InputStream     urlInputStream;
        private OnLoadingCompleteListener onComplete=null;

        private UrlImageLoadingTask(ImageView updateView, OnLoadingCompleteListener onComplete, String url) {
          this.updateView=updateView;
          this.onComplete=onComplete;
          this.url=url;
        }

        @Override
        protected Bitmap doInBackground(URL... params) {
          try {
            URLConnection con = params[0].openConnection();
            // can use some more params, i.e. caching directory etc
            con.setUseCaches(true);
            this.urlInputStream = con.getInputStream();
            return BitmapFactory.decodeStream(urlInputStream);
          } catch (IOException e) {
            Log.w(UrlImageView.class.getName(), "failed to load image from " + params[0], e);
            return null;
          } finally {
            if (this.urlInputStream != null) {
              try {
                this.urlInputStream.close();
              } catch (IOException e) {
                ; // swallow
              } finally {
                this.urlInputStream = null;
              }
            }
          }
        }

        @Override
        protected void onPostExecute(Bitmap result) {
          if (!this.isCancelled) {
            // hope that call is thread-safe
              if(onComplete==null){
                  if(updateView!=null)
                  this.updateView.setImageBitmap(result);
              }else{
                  onComplete.onComplete(updateView, result);
              }
          }
          loadingList.remove(this);
        }

        /*
         * just remember that we were cancelled, no synchronization necessary
         */
        @Override
        protected void onCancelled() {
          this.isCancelled = true;
          try {
            if (this.urlInputStream != null) {
              try {
                this.urlInputStream.close();
              } catch (IOException e) {
                ;// swallow
              } finally {
                this.urlInputStream = null;
              }
            }
          } finally {
            super.onCancelled();
            if(onComplete!=null)
                onComplete.onCancel(updateView);
            loadingList.remove(this);
          }
        }
      }

} 
```

# android - 使用加速度计android的运动方向不起作用

> ID：14332300
> 
> 赞同：1
> 
> 时间：2013-01-15T06:33:21.480
> 
> 标签：android, android-sensors

我正在开发一个 android 应用程序来获取 android 设备的方向。

我正在使用下面的代码：

```
 public class AccelerometerDirection  extends Activity implements SensorEventListener {
    TextView textView;
    StringBuilder builder = new StringBuilder();

    float [] history = new float[2];
    String [] direction = {"NONE","NONE"};

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        textView = new TextView(this);
        setContentView(textView);

        SensorManager manager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
        Sensor accelerometer = manager.getSensorList(Sensor.TYPE_ACCELEROMETER).get(0);
        manager.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_GAME);
    }

    @Override
    public void onSensorChanged(SensorEvent event) {

        float xChange = history[0] - event.values[0];
        float yChange = history[1] - event.values[1];

        history[0] = event.values[0];
        history[1] = event.values[1];

        if (xChange > 2){
          direction[0] = "LEFT";
        }
        else if (xChange < -2){
          direction[0] = "RIGHT";
        }

        if (yChange > 2){
          direction[1] = "DOWN";
        }
        else if (yChange < -2){
          direction[1] = "UP";
        }

        builder.setLength(0);
        builder.append("x: ");
        builder.append(direction[0]);
        builder.append(" y: ");
        builder.append(direction[1]);

        textView.setText(builder.toString());
    }

    @Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {
        // nothing to do here
    }
} 
```

参考这个[如何使用加速度计获得运动方向？](https://stackoverflow.com/questions/10476625/how-can-i-get-the-direction-of-movement-using-an-accelerometer).

但是工作很糟糕，我没有得到准确的价值。我尝试了不同的常数值，没有用。任何想法请分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:36:42.657

这条线为您提供了不同设备在 50 HZ 或 100 Hz 的非常高频率下的值

```
manager.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_GAME); 
```

因此，对于每次读数，即使设备处于静止状态，您的输出也会发生变化，因为读数加速度计不是很准确。

所以要么用低通滤波器过滤你的读数，要么使用较低频率的读数（比如 1 HZ ）

```
manager.registerListener(this, accelerometer, 1000000); 
```

但是低通滤波器是获得平滑行为的最佳选择

# html - Twitter Bootstrap - 水平描述和内联列表不起作用但其他一切都是？

> ID：14332306
> 
> 赞同：-1
> 
> 时间：2013-01-15T06:34:29.510
> 
> 标签：html, wordpress, twitter-bootstrap

我无法在我的 wordpress 博客中实现以下代码。我已经安装了 twitter 引导插件，但这些标签仍然不起作用：

```
<ul class="inline">
  <li>...</li>
</ul> 
```

这也是：

```
<dl class="dl-horizontal">
  <dt>...</dt>
  <dd>...</dd>
</dl> 
```

bootstrap 上的所有其他东西似乎都可以工作，但这些标签不起作用。想到了什么原因？

（例如，地址标签有效，`<p class="lead">...</p>`有效，但仅以上两个无效）。

对于`<ul>`，我只得到一个正常的多行列表。

对于`<dl>`，我没有得到横向的描述列表；描述总是出现在标题下方，即使是简短的描述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:52:23.703

也许这些元素的 CSS 规则是由 Bootstrap 定义的，但随后会被另一个 CSS 文件覆盖。通过右键单击您的列表，使用开发人员工具（如果您使用 Firefox，请安装 Firebug 扩展），然后选择“检查元素”。将有一个为元素声明的 CSS 属性列表

# jquery - J查询页面上的许多按钮

> ID：14332309
> 
> 赞同：1
> 
> 时间：2013-01-15T06:35:02.843
> 
> 标签：jquery, toggle

我有一个测验博客，我在其中使用 J 查询切换按钮来显示问题的答案。我使用以下模式：

```
Question: 1
<script type="text/javascript">$(function(){$("#butToggle1").click(function(){$('#dvt1').toggle(500);});});</script> 
<div id="dvt1">
Answer
</p></div> <button id="butToggle1">Click for Answer</button>

Question 2
<script type="text/javascript">$(function(){$("#butToggle2").click(function(){$('#dvt2').toggle(500);});});</script> 
<div id="dvt2">
Text 2
</p></div> <button id="butToggle2">Click for Answer</button> 
```

我将 jquery-1.3.2.min.js 用于上述功能。但是，问题是要在页面上显示许多问题和答案，我必须在 css 中添加那么多 dvt 条目。我已经从 dvt1 添加到 dvt20，但这意味着我不能在一个页面上显示 21 个问题。然后，我无法对问题进行分类，因为相同 dvt 的冲突会使切换功能无法工作。

有什么方法可以在没有单独的 dvt 的情况下在 wordpress 帖子上显示许多切换按钮，但为每个按钮分配切换数字。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:56:54.430

**我认为在单个**脚本标签中只使用此代码一次就可以了：

```
$(function () {
  $("button").click(function () {
    $(this).prev('div').toggle(500);
  });
}); 
```

[演示](http://jsfiddle.net/ayecJ/embedded/result/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:58:44.907

You can use just one script to this: [http://jsfiddle.net/GP3M6/](http://jsfiddle.net/GP3M6/)

```
$("button").click(function () {
  $(this).prev('div').toggle(500);
}); 
```

# php - 检查最终用户的 ISP 互联网速度以获得更好的视频流

> ID：14332312
> 
> 赞同：0
> 
> 时间：2013-01-15T06:35:09.153
> 
> 标签：php, drupal-6, video-streaming

> **可能重复：**
> [如何在 PHP 中检测互联网速度？](https://stackoverflow.com/questions/5529620/how-to-detect-internet-speed-in-php)

我有一个 drupal 网站，我在其中展示了一些视频内容。因此，作为一个新增功能，我希望有一个新功能来检查最终用户的互联网速度并自动确定向最终用户显示哪个版本的视频。尽管此人可以选择更改版本。但是会根据网速加载默认值。

那么有什么方法可以确定互联网速度并显示低/高分辨率版本吗？当然在 PHP 中。

# magento - 在 magento 的自定义购物车中添加产品

> ID：14332313
> 
> 赞同：1
> 
> 时间：2013-01-15T06:35:10.220
> 
> 标签：magento, magento-1.7, magento-1.5, php

我创建了一个页面，其中包含一些产品的图像，如产品 1、产品 2、产品 3 等。所有产品都是可配置的产品。在此之下，我为购物车添加了一个自定义块。其中包含上述所有产品的列表（我只想添加 3 个产品）（见下文）

```
Product1    $39 x 1     =     $39
Product2    $25 x 1     =     $25
Product3    $30 x 1     =     $30

TOTAL           $94 
```

当我点击产品的图片时，它会重定向到产品，有一些属性和数量可供选择，还有一个添加到购物车按钮。现在，当我单击“添加到购物车”按钮时，我希望将产品价格和数量添加到适当的位置。假设我选择了 product2 和 3 数量的购物车看起来像

```
Product1    $0 x 0          =     $0
Product2    $25 x 3     =     $75
Product3    $0 x 0          =     $0

TOTAL           $75 
```

我可以做直到重定向到产品，但不能做添加到购物车的下一部分。我想知道我需要在哪些文件中创建步骤和哪些功能？

# facebook-graph-api - 在 iOS 6 中使用社交框架在 Facebook 上发布到朋友墙失败

> ID：14332314
> 
> 赞同：5
> 
> 时间：2013-01-15T06:35:13.827
> 
> 标签：facebook-graph-api, ios6, facebook-wall, social-framework

我正在尝试使用 iOS 6+ 中的社交框架在**我的 facebook 朋友墙上发布对 iOS 应用程序的邀请。**但它给了我以下错误

```
error =     {
        code = 200;
        message = "(#200) Feed story publishing to other users is disabled for this application";
        type = OAuthException;
    }; 
```

[我知道这是因为 Facebook 禁用了Facebook 博客](https://developers.facebook.com/blog/post/2012/10/10/growing-quality-apps-with-open-graph/)和[这个 stackoverflow 问题](https://stackoverflow.com/questions/13829086/oauthexception-when-trying-to-post-to-friends-wall)中提到的这个功能

在 stackoverlow 的页面上，写着使用提要对话框。但我看不到在社交框架中使用提要对话框的任何选项。

在 iOS 6 中使用 Social Framewrok 在朋友墙上 POST 的替代方法是什么？

任何形式的帮助表示赞赏。提前致谢。

# html - 居中的“inline-block” div 的强制垂直边距

> ID：14332317
> 
> 赞同：-1
> 
> 时间：2013-01-15T06:35:23.003
> 
> 标签：html, css

我将两个 div 设置为“display：inline-block”，其中一个父 div 围绕两者，“text-align：center”将两个子 div 居中。

但是，子 div 的顶部不是垂直对齐的。我尝试弄乱每个子 div 的行高以及边距，但它们不会在同一垂直线上排列。

我也不能将它们向左或向右浮动，因为它们需要居中。

[http://jsfiddle.net/aC5FW/](http://jsfiddle.net/aC5FW/)

```
<div id="parent">
    <div id="child-1">Message Here</div>
    <div id="child-2"><img src="image.jpg"></div>
</div> 
```

CSS：

```
#parent {
    width: 100%;
    height: 50%;
    text-align: center;
}

#child-1 {
    display: inline-block;
    height: 50px;
    font-size: 12px;
    line-height: 50px;
}

#child-2 {
    display: inline-block;
    height: 50px;
    width: 50px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T06:40:39.940

### CSS修复：

```
#alert {vertical-align: top;} 
```

### 完整的 CSS

```
#alert {
    display: inline-block;
    height: 50px;
    line-height: 50px;
    vertical-align: top;
    font-family: Helvetica;
    font-size: 14px;
    color: #fff;
    background: #333;
} 
```

### 小提琴：http: [//jsfiddle.net/aC5FW/1/](http://jsfiddle.net/aC5FW/1/)

# php - 从学生表中获取 enrolment_id 为空的记录

> ID：14332318
> 
> 赞同：1
> 
> 时间：2013-01-15T06:35:32.563
> 
> 标签：php, sql, database-design

`enrolment_id`是`student`表中的外键，我想获取尚未设置外键的学生。含义（但这在子句`enrolment_id = NULL`中不起作用）。`WHERE`

该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T06:36:00.603

比较`NULL`值时，请改用`IS NULL`谓词：

```
...
WHERE enrolment_ID IS NULL; 
```

`= NULL`不会工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:45:40.863

```
SELECT * FROM student AS s WHERE s.enrolment_ID IS NULL; 
```

# git - Git 设备上没有剩余空间

> ID：14332320
> 
> 赞同：25
> 
> 时间：2013-01-15T06:35:41.640
> 
> 标签：git, git-rebase, git-pull

我做了**git pull --rebase**，我得到了以下错误：

```
 error: file write error (No space left on device)
 fatal: unable to write sha1 file 
 fatal: unpack-objects failed 
```

我的设备上有很多空间。不知道为什么会显示这个错误。

我第一次得到这个错误。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-15T06:37:49.277

您的驱动器空间不足。从您机器上的任何位置删除一些*未使用*的文件。在你完成一些大扫除之后，你可能会考虑运行`git gc`git 垃圾收集你的存储库；如果你最近对 git 的对象进行了很多更改——就像 rebase 可能发生的那样——你可以从 git 本身回收重要数据。在给 git 一些喘息的空间之后（因为 gc 在工作时需要一点空间来将数据复制到新文件中），`git gc`将尽可能压缩您的 git 存储库，而不会丢失存储库的历史记录。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-28T06:54:16.413

这与其说是一个答案，不如说是对问题的澄清以及问题的实际可能是什么。当我的 Windows 8.1 系统和驱动器上有足够的空间时，我发现 GIT 会定期吐出这种类型的错误代码。

在运行 5 次并在任务管理器中检查内存后，我发现每次系统内存接近最大限制时都会触发此错误。它与可用磁盘空间无关，因此虽然@Matt 的回答在某些情况下可能是正确的，但并非对所有情况都正确。

任务管理器报告 GIT 使用的内存比例很低，但每次 GIT 运行它都会增加使用的内存。此问题似乎与 GIT 中的内存泄漏有关。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-08-11T13:41:56.283

推送到远程时我遇到了类似的错误，实际上这不是由于我的本地计算机上没有足够的空间，而是在 Git 服务器上。

只需检查完整的错误，例如我得到：

```
Failed to write to log, write /var/log/gitlab/gitlab-shell/gitlab-shell.log: no space left on device 
```

通知我错误来自`gitlab-shell`，而不是`git`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-04T00:00:13.663

要添加到[另一个答案](https://stackoverflow.com/a/35054651/6309)，说明：

> 每次 GIT 运行时，它都会增加使用的内存。此问题似乎与 GIT 中的内存泄漏有关。

Git 2.20（2018 年第四季度）专注于压缩 Git 中已知的最后一个内存泄漏案例，在 ref-filter 代码路径中堵住了少量内存泄漏。

请参阅[Olga Telezhnaya ( ) 的](https://github.com/telezhnaya)[提交 f0062d3](https://github.com/git/git/commit/f0062d3b74cfd4425188e16cbda358b1e0228d85)、[提交 deec6b8](https://github.com/git/git/commit/deec6b8e0f855917443fa0d3bad27089f6a8e23a)、[提交 23941dd](https://github.com/git/git/commit/23941dd7b8f30946505118139fb861b86c1a5cc2)（2018 年 10 月 18 日[）](https://github.com/telezhnaya)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 9d00100](https://github.com/git/git/commit/9d00100c3890b1f2fb4b2ea71dda49ba70be5811))^(中，2018 年 10 月 30 日）)[`telezhnaya`](https://github.com/telezhnaya)
^([`gitster`](https://github.com/gitster))

* * *

Git 2.24（2019 年第四季度）更正了“ `for-each-ref`”（以及显示 refs 的朋友没有保护自己免受古老标签的侵害）在被要求显示“ `%(taggername)`”时没有记录标注名称。

请参阅[Mischa POSLAWKY ( ) 的](https://github.com/shiar)[提交 8b3f33e](https://github.com/git/git/commit/8b3f33ef11821a6a030f789eeb0b3af01469901e)（2019 年 8 月 17 日[）](https://github.com/shiar)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 a477abe](https://github.com/git/git/commit/a477abe9e4bdf1dd3627c20b69ed8b51f27c2f81))^(中，2019 年 9 月 9 日）)[`shiar`](https://github.com/shiar)
^([`gitster`](https://github.com/gitster))

> ## `ref-filter`: 初始化空名称或电子邮件字段
> 
> `$(taggername)`由于`SIGABRT`提交f0062d3 ( `munmap_chunk()`: [free](https://github.com/git/git/commit/f0062d3b74cfd4425188e16cbda358b1e0228d85)`ref-filter` item->value and item->value->s, 2018-10-19, Git v2.20.0-rc0)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-20T09:43:37.560

在我的例子中，.gitconfig 被存储在一个网络位置，它基本上保留了我机器的所有配置文件，因此，如果 PC 死机，公司可以在新硬件上恢复相同的配置。无论如何，这个网络驱动器空间不足，所以 git 无法更新文件。您可以增加网络驱动器空间，或者只是断开它，git 将使用主驱动器上的本地配置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-02T09:40:11.917

我使用 Git bash 控制台遇到了这个问题。通过在没有更多问题的地方使用 Windows 控制台。我可以克隆存储库。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-26T02:15:32.607

在我的情况下，它的远程设备空间不足，而不是本地机器。所以如果你的本地机器有足够的空间，也许你应该检查远程机器。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2020-06-04T07:58:53.633

我通过在我的办公桌上做空间解决了我在 mac 中的问题，如果你的办公桌满了，它会给出这样的错误。

# android - onReceive() 方法在设备处于睡眠模式时未打开应用程序..？

> ID：14332321
> 
> 赞同：0
> 
> 时间：2013-01-15T06:35:43.350
> 
> 标签：android, broadcastreceiver, alarmmanager, android-alarms, android-broadcast

嗨朋友我有一个问题...实际上我使用此代码在特定时间打开我的应用程序..应用程序工作正常但是当设备处于睡眠模式时无法工作..??

```
public class MyBroadCastReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context ctx, Intent intent) {
        Intent intent = new Intent(ctx, ActivityMain.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
        ctx.startActivity(intent);
    }

} 
```

ActivityMain.java

意图=新意图（getBaseContext（），MyBroadCastReceiver.class）；

```
 pendingIntent = PendingIntent.getBroadcast(
                getBaseContext(), REQ_CODE, intent, 0);

        alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
        alarmManager.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()
                + (60 * 1000), pendingIntent); 
```

在设备睡眠模式不起作用时，BroadCastReceiver Calss 无法打开 MainActivity 类。

我已在清单中给予许可

```
<uses-permission android:name="android.permission.WAKE_LOCK"/> 
```

请提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:39:46.623

广播接收器的唤醒锁只能保证在 onReceive 方法的持续时间内保持手机处于唤醒状态。如果您需要做超出该方法的工作，则需要获取/管理另一个唤醒锁。

为此目的存在一个 Commonsware 库。看看：[https ://github.com/commonsguy/cwac-wakeful/blob/master/README.markdown](https://github.com/commonsguy/cwac-wakeful/blob/master/README.markdown)

# nopcommerce - NOPCommerce密码保护论坛，所以只有一些人可以访问

> ID：14332322
> 
> 赞同：0
> 
> 时间：2013-01-15T06:35:44.727
> 
> 标签：nopcommerce

我正在尝试保护 NOPCommerce 2.8 网站的论坛（板）文件夹。我想使用现有的会员提供者和附带的角色。我只希望角色组“论坛版主”能够查看论坛中的内容，如果他们点击论坛，任何其他角色组或匿名用户将被重定向到登录页面。

这对于 .aspx 页面来说很容易，我会说“，这会阻止匿名用户访问，但对于 .cshtml 页面，它不起作用。

有没有人有一个简单的解决方案来使用 nopcommerce 的现有角色安全性来保护论坛？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:18:02.920

如果您了解 ActionFilters，您可以通过插件轻松实现结果。您需要做的就是检查 ActionFilters 的“OnActionExecuting”方法中的角色。如果您在 nopCommerce.com 论坛上搜索，我还写了一些帖子来解释这一点。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:09:56.987

这是我在 Nopcommerce 论坛中的某人的帮助下保护论坛的方法

```
@using Nop.Core.Domain.Customers;
@using Nop.Services.Customers;
@using Nop.Core;
@{
bool customerHasRoleX = EngineContext.Current.Resolve<IWorkContext>().CurrentCustomer.IsInCustomerRole("Administrators");
bool customerHasRoleY = EngineContext.Current.Resolve<IWorkContext>().CurrentCustomer.IsInCustomerRole("ForumModerators");
}

@if ((customerHasRoleX == true) | (customerHasRoleY == true)) {

}
else
{
    Response.Redirect("~/login?ReturnUrl=%2fboards");
} 
```

# java - 在 MapReduce 中使用 globStatus 过滤输入文件

> ID：14332330
> 
> 赞同：2
> 
> 时间：2013-01-15T06:36:30.500
> 
> 标签：java, hadoop, mapreduce, cloudera

我有很多输入文件，我想根据最后附加的日期处理选定的文件。我现在对在哪里使用 globStatus 方法来过滤文件感到困惑。

我有一个自定义 RecordReader 类，我试图在它的下一个方法中使用 globStatus 但它没有成功。

```
public boolean next(Text key, Text value) throws IOException {
    Path filePath = fileSplit.getPath();

    if (!processed) {
        key.set(filePath.getName());

        byte[] contents = new byte[(int) fileSplit.getLength()];
        value.clear();
        FileSystem fs = filePath.getFileSystem(conf);
        fs.globStatus(new Path("/*" + date));
        FSDataInputStream in = null;

        try {
            in = fs.open(filePath);
            IOUtils.readFully(in, contents, 0, contents.length);
            value.set(contents, 0, contents.length);
        } finally {
            IOUtils.closeStream(in);
        }
        processed = true;
        return true;
    }
    return false;
} 
```

我知道它返回一个 FileStatus 数组，但我如何使用它来过滤文件。有人可以阐明一下吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-15T06:55:03.723

该`globStatus`方法采用 2 个免费参数，可让您过滤文件。第一个是 glob 模式，但有时 glob 模式不足以过滤特定文件，在这种情况下，您可以定义一个`PathFilter`.

关于 glob 模式，支持以下内容：

```
Glob   | Matches
-------------------------------------------------------------------------------------------------------------------
*      | Matches zero or more characters
?      | Matches a single character
[ab]   | Matches a single character in the set {a, b}
[^ab]  | Matches a single character not in the set {a, b}
[a-b]  | Matches a single character in the range [a, b] where a is lexicographically less than or equal to b
[^a-b] | Matches a single character not in the range [a, b] where a is lexicographically less than or equal to b
{a,b}  | Matches either expression a or b
\c     | Matches character c when it is a metacharacter 
```

`PathFilter`只是一个这样的界面：

```
public interface PathFilter {
    boolean accept(Path path);
} 
```

因此，您可以实现此接口并实现`accept`可以将逻辑用于过滤文件的方法。

一个来自[Tom White 的优秀书籍](https://rads.stackoverflow.com/amzn/click/com/1449389732)的例子，它允许你定义一个`PathFilter`过滤匹配某个正则表达式的文件：

```
public class RegexExcludePathFilter implements PathFilter {
    private final String regex;

    public RegexExcludePathFilter(String regex) {
        this.regex = regex;
    }

    public boolean accept(Path path) {
        return !path.toString().matches(regex);
    }
} 
```

您可以通过在初始化作业时`PathFilter`调用来直接使用实现过滤您的输入。`FileInputFormat.setInputPathFilter(JobConf, RegexExcludePathFilter.class)`

**编辑**：由于您必须在 中传递类`setInputPathFilter`，因此您不能直接传递参数，但您应该能够通过使用`Configuration`. 如果您`RegexExcludePathFilter`也从 扩展`Configured`，您可以取回一个`Configuration`您之前使用所需值初始化的对象，因此您可以在过滤器中取回这些值并在`accept`.

例如，如果您像这样初始化：

```
conf.set("date", "2013-01-15"); 
```

然后你可以像这样定义你的过滤器：

```
public class RegexIncludePathFilter extends Configured implements PathFilter {
    private String date;
    private FileSystem fs;

    public boolean accept(Path path) {
        try {
            if (fs.isDirectory(path)) {
                return true;
            }
        } catch (IOException e) {}
        return path.toString().endsWith(date);
    }

    public void setConf(Configuration conf) {
        if (null != conf) {
            this.date = conf.get("date");
            try {
                this.fs = FileSystem.get(conf);
            } catch (IOException e) {}
        }
    }
} 
```

**编辑 2**：原始代码存在一些问题，请参阅更新后的类。您还需要删除构造函数，因为它不再使用，并检查它是否是一个目录，在这种情况下您应该返回 true，以便也可以过滤目录的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-24T15:51:15.913

对于阅读本文的任何人，我可以说“请不要在过滤器中做任何比验证路径更复杂的事情”。具体来说：不要检查文件是否是目录、获取它们的大小等。等到 list/glob 操作返回，然后使用现在填充`FileStatus`条目中的信息在那里进行过滤。

为什么？所有那些`getFileStatus()`直接或通过`isDirectory()`对 . 更关键的是，针对 S3 和其他对象存储，每个操作都可能发出多个 HTTPS 请求——而这些请求确实需要相当长的时间。更好的是，如果 S3 认为您在整个机器集群中发出过多请求，它会限制您。你不想要那个。

直到调用之后——您返回的文件状态条目是来自对象存储的列表命令的那些，通常每个 HTTPS 请求返回数千个文件条目，因此效率更高。

有关更多详细信息，请检查`org.apache.hadoop.fs.s3a.S3AFileSystem`.

# c# - C# 中的复杂 XML 解析

> ID：14332331
> 
> 赞同：0
> 
> 时间：2013-01-15T06:36:33.067
> 
> 标签：c#, xml, xsd2code

我需要解析一个复杂的大型 (100 MB+) XML 文件。幸运的是我有 XML Schema 定义，但不幸的是我不能使用 xsd2code 来生成自动 XML 反序列化，因为在 XML 的顶层使用了抽象消息类型。XML文件的结构是这样的：

```
<Head>  
    <Batch>   
        <Dog></Dog>   
        <Dog></Dog>  
    </Batch>  
</Head> 
```

xsd 将批处理定义为包含抽象动物，而不是狗。Xsd2Code 可以创建具有正确 XML 属性的 Dog 类，但 dog 类位于另一个 xsd 文件中。我试图将所有 xsd 粘贴在一起，但这无助于解决此问题。
有没有像 Linq to XML 或 Xpath 这样的好方法来循环 Batch 中的元素并创建 Dog 实例而无需手动解析 Dog？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:50:53.677

> 有没有像 Linq to XML 或 Xpath 这样的好方法来循环 Batch 中的元素并创建 Dog 实例而无需手动解析 Dog？

这取决于您所说的“手动”是什么意思。我发现有一个模式很有用，其中每个相关类都有一个静态`FromXElement`工厂方法（或一个构造函数采用一个`XElement`）来提取相关细节。使用 LINQ to XML 非常简单，例如

```
public static Dog FromXElement(XElement element)
{
    // Or whatever...
    return new Dog((string) element.Element("Name"),
                   (double) element.Element("Weight"));
} 
```

然后你可以使用：

```
List<Dog> dogs = batch.Elements("Dog")
                      .Select(x => Dog.FromXElement(x))
                      .ToList(); 
```

（您*也许*可以`Select(Dog.FromXElement)`改用 - 这取决于您使用的 C# 版本。）

要批量处理所有动物，您可能需要以下内容：

```
private static readonly Dictionary<string, Func<XElement, Animal>> Factories =
    new Dictionary<string, Func<XElement, Animal>>
{
    { "Dog", Dog.FromXElement },
    { "Cat", Cat.FromXElement },
    // etc
}
...
List<Animal> animals = batch.Elements()
                            .Select(x => Factories[x.Name.LocalName](x))
                            .ToList(); 
```

# ruby-on-rails - 安装红宝石

> ID：14332332
> 
> 赞同：0
> 
> 时间：2013-01-15T06:36:35.533
> 
> 标签：ruby-on-rails, ruby, gem, bundler

我正在尝试按照[本教程安装 tabulous ruby​​ gem](http://rubysource.com/too-good-to-be-true-twitter-bootstrap-meets-formtastic-and-tabulous/)

我陷入了一个循环：运行 gem update => run gem => bundle install。

有人可以提供一些有关如何进行的信息吗？我已经将 gem 添加到 Gemfile。

以下是命令输出：

```
**22:16:35->gem update --system**
Updating RubyGems
Updating rubygems-update
Successfully installed rubygems-update-1.8.24
Updating RubyGems to 1.8.24
Installing RubyGems 1.8.24
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/commands/update_command.rb:153: warning: Insecure world writable dir /usr/local/git/bin/ in PATH, mode 040777
ERROR:  While executing gem ... (Errno::EACCES)
    Permission denied - /Library/Ruby/Site/1.8/gauntlet_rubygems.rb

**22:17:33->bundle install**
Fetching gem metadata from https://rubygems.org/...........
Fetching gem metadata from https://rubygems.org/..
/Library/Ruby/Gems/1.8/gems/bundler-1.2.3/lib/bundler.rb:263: warning: Insecure world writable dir /usr/local/git/bin/ in PATH, mode 040777
Using rake (10.0.3) 
Using i18n (0.6.1) 
Using multi_json (1.5.0) 
Using activesupport (3.2.11) 
Using actionpack (3.2.11) 
Using sass-rails (3.2.6) 
Using sqlite3 (1.3.7) 
Installing tabulous (1.3.0) 
Gem::InstallError: tabulous requires RubyGems version >= 1.3.7\. Try 'gem update --system' to update RubyGems itself.
An error occurred while installing tabulous (1.3.0), and Bundler cannot continue.
Make sure that `gem install tabulous -v '1.3.0'` succeeds before bundling.

22:18:03->gem install tabulous -v '1.3.0
> `
> '
ERROR:  While executing gem ... (ArgumentError)
    Illformed requirement ["1.3.0\n`\n"]

**22:18:39->gem install tabulous -v 1.3.0**
ERROR:  Error installing tabulous:
    tabulous requires RubyGems version >= 1.3.7\. Try 'gem update --system' to update RubyGems itself.

22:26:25->gem update --system
Updating RubyGems
Updating rubygems-update
Successfully installed rubygems-update-1.8.24
Updating RubyGems to 1.8.24
Installing RubyGems 1.8.24
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/commands/update_command.rb:153: warning: Insecure world writable dir /usr/local/git/bin/ in PATH, mode 040777
ERROR:  While executing gem ... (Errno::EACCES)
    Permission denied - /Library/Ruby/Site/1.8/gauntlet_rubygems.rb 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T06:41:38.917

试用

```
sudo gem update --system 
```

编辑：我还建议按照 Kasumi 评论的方式使用 rvm 或 rbenv。在我安装了 rbenv 之前，我在本地安装 Ruby on Rails 时度过了一段地狱般的时光。

# java - 如何从程序代码进行身份验证以从 android 中的特定 uri 检索数据..？

> ID：14332333
> 
> 赞同：1
> 
> 时间：2013-01-15T06:36:38.883
> 
> 标签：java, android, html, httprequest, authenticator

我正在做一个项目，我需要通过编码通过身份验证并点击 Uri 来获取一些数据。

就像登录页面的 uri 是：

```
 http://www.test.com/login.htm 
```

其中为用户名和密码提供了两个文本字段。单击提交时，我将进入具有 uri 的页面：

```
http://www.test.com/status/info.htm 
```

其中所需的信息以 html 数据的形式提供。

现在我`want to hit info page directly on click of button`通过登录页面。

因为我知道用户名和密码..

我已经尝试过 Authenticator，如图所示：

```
 Authenticator.setDefault(new Authenticator(){
 protected PasswordAuthentication getPasswordAuthentication() { 
    return new PasswordAuthentication("admin","admin".toCharArray());
 }}); 
```

但是没用。。

我什至尝试将 Header 设置为

```
httpGet.setHeader("Authorization","Basic "+ Base64.encodeToString("admin:admin".getBytes(),
                                        Base64.NO_WRAP)); 
```

但它没有那么好..

请提供适当的解决方案.../

# java - toplink 中查询的执行时间更长

> ID：14332347
> 
> 赞同：0
> 
> 时间：2013-01-15T06:38:28.067
> 
> 标签：java, jakarta-ee, oracle11g, toplink

我有一个在下面的代码中分配给这个变量 FILE_DETAILS 的查询，当这个查询在 SQLDeveloper/toad 中执行时，它的执行速度更快，但是当在 toplink 或 jdbc 中使用时，它需要很多执行时间。执行时间较长的可能原因是什么？

```
List resultSet = (List) toplinkMgr
                .readDataQuery(Constants.FILE_DETAILS,
                        arguments, values); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:13:20.557

除非您提供查询和执行计划，否则任何 DBA 都不会帮助您。在 Toad 中针对从 Toplink 执行的查询的第一个执行计划。请参阅 Oracle 视图 V$SQL_PLAN 的定义，在那里您将找到当前正在运行的查询的执行计划。

# android - Android从定义的位置查找X点的纬度经度

> ID：14332348
> 
> 赞同：5
> 
> 时间：2013-01-15T06:38:29.760
> 
> 标签：android, google-maps, location, distance

我正在开发`Android` `MapView`和开发基于地图的应用程序。我需要找到与特定的 X 距离`Co-ordinates`。方向不是我的首要任务距离是我的首要任务可以说我需要从特定位置找到 100 米关于如何做到这一点的任何想法提前感谢您的阅读和回答。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T07:20:07.260

为了计算在距原点给定距离的线上找到一个点，您需要有方位（或方向）以及距离。这是一个函数，它将获取起始位置、方位角和距离（深度）并返回目标位置（对于 Android）：您可能希望将其从 KM 转换为 Meters 或其他任何值。

```
public static Location GetDestinationPoint(Location startLoc, float bearing, float depth) 
{ 
    Location newLocation = new Location("newLocation");

    double radius = 6371.0; // earth's mean radius in km 
    double lat1 = Math.toRadians(startLoc.getLatitude()); 
    double lng1 = Math.toRadians(startLoc.getLongitude()); 
    double brng = Math.toRadians(bearing); 
    double lat2 = Math.asin( Math.sin(lat1)*Math.cos(depth/radius) + Math.cos(lat1)*Math.sin(depth/radius)*Math.cos(brng) ); 
    double lng2 = lng1 + Math.atan2(Math.sin(brng)*Math.sin(depth/radius)*Math.cos(lat1), Math.cos(depth/radius)-Math.sin(lat1)*Math.sin(lat2)); 
    lng2 = (lng2+Math.PI)%(2*Math.PI) - Math.PI;  

    // normalize to -180...+180 
    if (lat2 == 0 || lng2 == 0) 
    {
        newLocation.setLatitude(0.0);
        newLocation.setLongitude(0.0);
    }
    else
    {
        newLocation.setLatitude(Math.toDegrees(lat2));
        newLocation.setLongitude(Math.toDegrees(lng2));
    }

    return newLocation;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-31T11:50:55.730

只是为了将 javram 的答案变成米和弧度而不是度数。

```
/**
 * Create a new location specified in meters and bearing from a previous location.
 * @param startLoc from where
 * @param bearing which direction, in radians from north
 * @param distance meters from startLoc
 * @return a new location
 */
public static Location createLocation(Location startLoc, double bearing, double distance) {
    Location newLocation = new Location("newLocation");

    double radius = 6371000.0; // earth's mean radius in m
    double lat1 = Math.toRadians(startLoc.getLatitude());
    double lng1 = Math.toRadians(startLoc.getLongitude());
    double lat2 = Math.asin(Math.sin(lat1) * Math.cos(distance / radius) + Math.cos(lat1) * Math.sin(distance / radius) * Math.cos(bearing));
    double lng2 = lng1 + Math.atan2(Math.sin(bearing) * Math.sin(distance / radius) * Math.cos(lat1), Math.cos(distance / radius) - Math.sin(lat1) * Math.sin(lat2));
    lng2 = (lng2 + Math.PI) % (2 * Math.PI) - Math.PI;

    // normalize to -180...+180
    if (lat2 == 0 || lng2 == 0) {
        newLocation.setLatitude(0.0);
        newLocation.setLongitude(0.0);
    } else {
        newLocation.setLatitude(Math.toDegrees(lat2));
        newLocation.setLongitude(Math.toDegrees(lng2));
    }

    return newLocation;
} 
```

# sql - 用 JOIN/APPLY 替换子查询

> ID：14332351
> 
> 赞同：1
> 
> 时间：2013-01-15T06:38:54.933
> 
> 标签：sql, sql-server, join, subquery, apply

我有以下 SQL。

```
SELECT t0.QustionId, t1.QuestionText, t2.AnswerText FROM
ActiveQuestion AS t0
INNER JOIN Question AS t1
    ON t1.QuestionId = ActiveQuestion.QuestionId
LEFT OUTER JOIN Answer AS t2
    ON t2.SectionId = t0.SectionId
    AND t1.ParentId IN 
            (SELECT QuestionId 
                    FROM Question WHERE SharedQuestionId = t2.SharedQeustionId) 
```

问题可以共享（具有相同的 SharedQuestionId），问题可以有父问题。

我想摆脱子查询。正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T06:41:43.953

`JOIN`该表`Question`再次使用不同的别名：

```
SELECT 
  t0.QustionId, 
  t1.QuestionText, 
  t2.AnswerText,
  p.questionI ParentQuestionId
FROM ActiveQuestion      AS t0
INNER JOIN Question      AS t1  ON t1.QuestionId      = ActiveQuestion.QuestionId
LEFT OUTER JOIN Answer   AS t2  ON t2.SectionId       = t0.SectionId
LEFT OUTER JOIN Question AS  p  ON t1.ParentId        = p.QuestionId 
                               AND p.SharedQuestionId = t2.SharedQeustionId; 
```

# javascript - javascript 库 / jquery 插件，使我能够单击标签列表来输入它们

> ID：14332358
> 
> 赞同：0
> 
> 时间：2013-01-15T06:39:36.577
> 
> 标签：javascript, jquery, jquery-plugins, tags

我搜索了很多，我能找到的所有标签输入插件都是这样的：http: [//xoxco.com/projects/code/tagsinput/](http://xoxco.com/projects/code/tagsinput/)

您可以在输入框中输入内容，它会以漂亮的样式包装标签并提供自动完成等功能。

但我想要的是这样的：

我有一个推荐标签列表。该插件使标签可点击。当我点击一个标签时，标签进入输入框。当我再次单击该标签时，该标签将从输入框中删除。

当然，输入框还是需要像普通的输入框一样，也就是我还是可以输入的。

这就像[https://delicious.com/](https://delicious.com/)和[http://diigo.com/](http://diigo.com/)上的标记。

有没有插件可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:51:45.130

你想要这个效果吗？这个效果没有jquery方法，这是js代码。

[演示在这里](http://jsfiddle.net/jikeytang/bRxCX/2/)

```
var navs = document.getElementById('nav').getElementsByTagName('li');
var tmp = navs[navs.length-1];
for(var i=0; i<navs.length; i++){
    navs[i].onclick = function(){
        tmp.className = '';
        this.className = 'current';
        tmp = this;
    }
} 
```

# jquery - 搜索和过滤 facebook 返回的好友 JSON 列表

> ID：14332362
> 
> 赞同：0
> 
> 时间：2013-01-15T06:39:47.777
> 
> 标签：jquery, json, search

我正在尝试结交已登录的 Facebook 用户的朋友。我使用 fql，我想为在搜索框中输入的每个字母更新列表。我正在 fql 中进行此操作，并且可以正常工作。

我碰巧读到最好一次阅读所有朋友，然后搜索 JSON 对象。

对于一个数组

```
[{"uid":"1235","name":"user1_abcde","picture":"picurl"},
 {"uid":"1237","name":"user2_abcde","picture":"picur2"},
 {"uid":"1289","name":"user3_agere","picture":"picur3"}
] 
```

如何排序，以在数组中获取搜索字符串的结果（例如：“de”）部分匹配名称字段以返回

```
 [{"uid":"1235","name":"user1_abcde","picture":"picurl"},
   {"uid":"1237","name":"user2_abcde","picture":"picur2"}
  ] 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:06:29.760

```
var searchFriend = function( str ){
    /* make search case-insensitive */
    str = str.toLowerCase();
    /* assuming `friendsArray` is your cached JSON response */
    return friendsArray.filter( 
        function( i ){ return (i['name'].toLowerCase().indexOf( str ) > -1) }
    );
} 
```

[MDN 上的 Array.filter](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:07:10.570

首先，您需要解析 json，然后使用正则表达式进行搜索。

```
function search(json, regex) {
    var result = [];
    $.each(JSON.parse(json), function(i, row) {
       if (row.name.match(regex)) {
          result.push(row);
       }
    });
    return result;
} 
```

您可以使用该功能来搜索 de using`search(json, /de/)`

# java - 禁用 struts2-jqgrid 中的特定行

> ID：14332366
> 
> 赞同：0
> 
> 时间：2013-01-15T06:40:19.843
> 
> 标签：java, javascript, jquery, jqgrid, struts2

我正在使用 Struts 2.3.7，struts2-jquery-grid-plugin-3.5.0。

```
<sjg:grid
    id="gridtable"
    caption="Issue-Summary"
    dataType="json"
    href="%{remoteurl}"
    pager="true"
    gridModel="finalGridModel"
    rowList="10,15,20"
    rowNum="15"
    rownumbers="true"   
>
    <sjg:gridColumn name="issue_id"  id="issueId"  index="id" title="Issue-ID" formatter="integer"  sortable="false"/>
    <sjg:gridColumn name="issue_description" index="issue_description" title="Issue-Details"  sortable="false"/>
    <sjg:gridColumn name="issue_raised_date" index="issue_raised_date" title="Issue-Date"  formatter="date"  sortable="false"/>

    <sjg:gridColumn  name="Details" title="Action"  formatter="formatLink" sortable="false"/>
    <sjg:gridColumn name="issue_status"  index="issue_status" title="Current Status"  sortable="false"/>
    <sjg:gridColumn name="assigned_to"  index="issue_status" title="Assigned To"  sortable="false"/>
</sjg:grid> 
```

在这里，我想禁用特定 **行**或列，即加载 jqgrid 后的**详细信息。**此列是执行某些操作的链接。行的禁用基于 issue_status。如果**current_status**为“已**分配**”，则该行被**禁用**此行，否则启用。如何实现这一点，因为我是新手，所以我希望你们能提供一些好的解决方案。我还添加了截图。![在此处输入图像描述](../Images/205d5178ee2b5eaa0c2accbfb9b4bea2.png)

**更新：** 这些是 jqgrid 执行时生成的 html。

```
<table class="ui-jqgrid-htable" cellspacing="0" cellpadding="0" border="0" aria-labelledby="gbox_gridtable" role="grid" style="width: 925px;">
<thead>
<tr class="ui-jqgrid-labels" role="rowheader">
<th id="gridtable_rn" class="ui-state-default ui-th-column ui-th-ltr" role="columnheader" style="width: 25px;">
<div id="jqgh_gridtable_rn">
<span class="s-ico" style="display:none">
<span class="ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr" sort="asc"></span>
<span class="ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr" sort="desc"></span>
</span>
</div>
</th>
<th id="gridtable_issue_id" class="ui-state-default ui-th-column ui-th-ltr" role="columnheader" style="width: 150px;">
<th id="gridtable_issue_description" class="ui-state-default ui-th-column ui-th-ltr" role="columnheader" style="width: 150px;">
<th id="gridtable_issue_raised_date" class="ui-state-default ui-th-column ui-th-ltr" role="columnheader" style="width: 150px;">
<th id="gridtable_" class="ui-state-default ui-th-column ui-th-ltr" role="columnheader" style="width: 150px;">
<th id="gridtable_issue_status" class="ui-state-default ui-th-column ui-th-ltr" role="columnheader" style="width: 150px;">
<th id="gridtable_assigned_to" class="ui-state-default ui-th-column ui-th-ltr" role="columnheader" style="width: 150px;">
</tr>
</thead>
</table>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:04:40.523

jqgrid 有 aftersavecell 事件。通过使用它，您可以在将值设置为网格时调用一个方法...在该方法中，您可以检查您的条件并将属性设置为您的网格...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:13:13.747

我有一个有点类似的场景，我通过强大的 jQuery DOM 操作来实现。

我使用了 MVC 的 webGrid，它实际上呈现为 html 中的表格，我必须从它的一列的值中应用一些逻辑。

首先检查该网格在执行时生成的 html 元素类型。**如果它生成一个表格**，那么这可能对你有帮助，

```
 $('table#grid').ready(function () {
        MatchColumnValue(5);     //Select column node to match value from..starts from 0!
    }); 
```

这是功能。

```
function MatchColumnValue(nodeValue) {
    $('table#grid tr').each(function () {
        $(this).find('td:nth-child(' + nodeValue + '):contains(Assigned)').parent().attr('disabled', true);
    });
} 
```

# java - Java：使用自定义标签为 Web 应用程序创建 GUI-Builder

> ID：14332370
> 
> 赞同：1
> 
> 时间：2013-01-15T06:40:42.383
> 
> 标签：java, jsp, custom-controls, gui-builder, custom-tags

在我们的项目中，我们开发了一个框架，旨在封装 Java Web 开发的大部分方面。我的客户是使用这个框架的其他程序员。

我们封装的其中一件事是 JSP 标签。我们为所有内容创建了自定义标签，因此用户根本不需要使用常规的 HTML 和 JavaScript。

现在我正在寻找为这些自定义标签创建 GUI-Builder 的方法。意思是某种 GUI 应用程序，它允许用户将图形控件拖放到画布上，然后基于此应用程序将生成页面的 JSP 代码。请注意，我们的自定义标签不仅仅用于抽象。其中许多是可见控件，由 HTML 结构和用于控制它们的 JavaScript 逻辑组成。并且自定义标记的属性（用户在 JSP 中定义）有时会影响它的外观和行为。

如果该工具可以成为 Eclipse 的插件，那将是一个巨大的好处。

是否有任何现有的工具可以做到这一点？

是否有用于创建此类工具的设计模式或最佳实践教程？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:17:15.490

我曾致力于开发类似于您所描述的工具。在我们的例子中，我们需要一个拖放式 GUI 工具，它可以为我们的服务器创建类似于模型的 RDBMS（表、列、关系）。我们为此使用了 eclipse GEF 插件。

GEF（Graphical Editing Framework）是一个非常成熟的框架，可以让你构建一个拖放式的图形编辑器。您可以创建一个调色板，定义不同的形状，将不同的形状与不同的内部“模型”相关联，定义不同类型的连接器，定义将形状拖放到编辑器等时需要完成的操作。当我处理它时，我们将我们的工具构建为普通的 eclipse 插件（在 GEF 插件之上）并将其部署在 eclipse 上。那时 Eclipse RCP 框架才刚刚起步。

[http://www.eclipse.org/gef/](http://www.eclipse.org/gef/)

我的经验是 GEF，我很确定 GEF 会做你的工作。下载演示并浏览代码后，您将了解开发自己的图形编辑器需要做什么。

还有另一个名为 GMF（图形建模框架）的 Eclipse 项目。GMF 建立在 GEF 和 EMF 之上，并提供更高级别的工具来构建图形编辑器，将其与源代码编辑器相关联（一个选项卡上有“图形视图”，另一个选项卡有“源视图”选项卡）等。 GMF 是一种“高级”框架，可为您管理 GEF 管道代码。

[http://www.eclipse.org/modeling/gmp/?project=gmf-tooling#gmf-tooling](http://www.eclipse.org/modeling/gmp/?project=gmf-tooling#gmf-tooling)

请注意，上述两个框架都需要一些时间和精力来理解。GEF 有据可查。如果您之前有过 Eclipse 插件开发经验，那将是一个加分项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:37:37.743

如果您正在创建一个 Eclipse 插件，那么您正在创建一个多页面编辑器。一页（或多页）用于 GUI，一页用于生成的代码。

当您第一次构建 Eclipse 插件时，您遇到的多页面编辑器之一是 MANIFEST.MF 文件和 plugin.xml 文件的编辑器。这是一个多页编辑器，它生成两个代码文件，而不是一个。

面向 RCP 和 RAP 开发人员的 Eclipse 将帮助您启动 Eclipse 插件。

*   打开 Eclipse，并切换到要用于开发插件的工作区。
*   在 Eclipse 菜单栏中，左键单击 File -> New -> Project...
*   在 New Project 对话框中，打开 Plug-in Development 文件夹，然后左键单击 Plug-in Project。
*   左键单击下一步按钮。
*   在插件项目对话框中，为项目命名。您可以接受对话框其余部分的默认值。
*   左键单击下一步按钮。
*   接受“内容”对话框中的默认值，然后左键单击“下一步”按钮。
*   在模板对话框中，左键单击“带有多页编辑器的插件”。
*   左键单击完成按钮。

Eclipse javadoc 位于 Platform Plug-in Developer Guide -> Reference -> API Reference 的 Eclipse 帮助中。

为了帮助理解 Eclipse javadoc，您需要一个很好的教程。Vogella[教程](http://www.vogella.com/eclipse.html)非常好。

如果您对 Eclipse 插件有具体问题，可以在 Stack Overflow 上提问。

# tsql - 启用或禁用部分 TSQL 选择语句（列）

> ID：14332373
> 
> 赞同：0
> 
> 时间：2013-01-15T06:40:53.097
> 
> 标签：tsql

假设我有一个有五列的表。完整的选择语句将是：

```
Select col1, col2, col3, col4, col5 
from tbl 
```

但我需要这个查询是“动态的”，每一列都必须可以启用/禁用。所以，据我所知，我需要五个标签（比如说 bool）。如果我有`tag1=0, tag2=1, tag3=1, tag4=0, tag5 =0`那么选择语句应该是这样的：

```
Select col2, col3 
from tbl 
```

如果我有`tag1=1, tag2=0, tag3=0, tag4=0, tag5 =0`那么选择语句应该是这样的：

```
Select col1 
from tbl 
```

那么在 TSQL 中是否有可能这样做呢？我打算创建 SP 并从 php 执行它。

Ps 我知道有一种解决方案可以制作一堆`IF`具有所有可能变化的语句`tag1...tag5`，但是当列数（和启用标签）很高时，这不是很有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:10:08.330

```
create procedure GetTblList
  @Tag1 bit,
  @Tag2 bit,
  @Tag3 bit,
  @Tag4 bit,
  @Tag5 bit
as

declare @SQL nvarchar(max)
set @SQL = 'select '

if @Tag1 = 1 set @SQL = @SQL + 'Col1,'
if @Tag2 = 1 set @SQL = @SQL + 'Col2,'
if @Tag3 = 1 set @SQL = @SQL + 'Col3,'
if @Tag4 = 1 set @SQL = @SQL + 'Col4,'
if @Tag5 = 1 set @SQL = @SQL + 'Col5,'
if @SQL = 'select ' set @SQL = @SQL + 'null as NoColumnSelected'

set @SQL = stuff(@SQL, len(@SQL), 1, ' from TbL')
exec (@SQL) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:13:30.550

即使很难，这也不是推荐的做法，唯一可能的方法似乎是将 sql 语句创建为字符串并执行它。

如果您在应用程序层中构建 sql 语句字符串，您可以将其发送到 db 层以作为单个字符串执行。这个应该很清楚。

另一方面，如果您想在 DB 级别（例如在 SP 中）构建 sql 语句字符串，您可以使用 sp_executesql 存储过程来执行它。样本：

```
DECLARE @sql nvarchar(MAX); 
SET @sql = 'SELECT col1' 
IF @tag1 = 1 SET @sql = @sql + ', dynamic_col_1'; 
IF @tag2 = 1 SET @sql = @sql + ', dynamic_col_2'; 
IF @tag3 = 1 SET @sql = @sql + ', dynamic_col_3'; 
SET  @sql = @sql + ' FROM myTable' 
EXEC sp_executesql @sql; 
```

无论哪种情况，您都需要将所有标签作为参数发送，或者您可以将它们聚合成一个 5 位字符串参数，其中每个数字代表一个标志。

# objective-c - 如何在获取后从 NSFetchedResultsController 过滤核心数据结果

> ID：14332374
> 
> 赞同：1
> 
> 时间：2013-01-15T06:40:54.647
> 
> 标签：objective-c, uitableview, core-data, filter

我正在尝试在`UITableView`与`NSFetchedResultsController`数据库关联的情况下显示一些 Spot。

问题是我需要按与特定位置的距离（无线电）过滤结果。我读到无法`NSPredicate`计算距离，因此我通过与坐标的简单比较来获取位置周围区域中的所有点。这给了我一个围绕位置的广场。然后，我想迭代结果`fetchedObjects`并删除不在区域中的结果。

```
- (NSFetchedResultsController *)newFetchedResultsControllerWithSearch:(NSString *)searchString{

NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                                                                            managedObjectContext:self.managedObjectContext
                                                                                              sectionNameKeyPath:sectionName
                                                                                                       cacheName:@"Stores"];
aFetchedResultsController.delegate = self;

NSError *error = nil;
if (![aFetchedResultsController performFetch:&error])
{
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}

// ITERATE FETCHED OBJECTS TO FILTER BY RADIO

int n = [aFetchedResultsController.fetchedObjects count];
NSLog(@"Square result count: %i",n);

self.footerLabel.text = [NSString stringWithFormat:NSLocalizedString(@"%i Spots", @"%i Spots"),n];

return aFetchedResultsController; 
```

如何`aFetchedResultsController`在返回之前从 .fetchedObjects 中删除对象？`UITableView`它会改变like中使用的方法`[fetchedResultsController objectAtIndexPath:indexPath]`吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:17:35.110

您*不能修改获取结果控制器*(FRC) 的结果集。您可以过滤结果，但如果将 FRC 用作表视图的数据源，这将无济于事。

可能的解决方案：

*   预先计算到当前位置的距离并将距离作为持久属性存储在数据库中。然后您可以直接在 FRC 的 fetch 请求中对距离使用过滤器。当然，最大的缺点是您必须在当前位置发生变化时重新计算距离。

*   不要使用获取的结果控制器。执行一个抓取请求，将抓取请求的结果根据半径过滤成一个数组，并将这个数组作为表格视图的数据源。这里最大的缺点是您失去了 FRC 的自动更新功能。每次更改半径或其他搜索参数时，您都必须重新加载表格视图。

我知道这两种解决方案都不令人满意，但我认为没有一种方法可以将获取的结果控制器与基于函数的过滤器结合起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:45:53.697

执行此操作的正确方法是设置一个包含您的谓词的新获取请求。获取结果控制器`fetchRequest`是只读的，因此您必须将逻辑放入获取结果控制器本身的延迟初始化中。

```
if (searchIsActive) {
   fetchRequest.predicate = 
       [NSPredicate predicateWithFormat:
          @"(%K < %@ && %K > %@) && (%K < %@ && %K > %@)",
          @"lat", @(locationLat + limit), @"lat", @(locationLat - limit),
          @"lon", @(locationLon + limit), @"lon", @(locationLon - limit)];
}
else { fetchRequest.predicate = nil; } 
```

然后，要更新表，只需将控制器设置为 nil 并重新加载

```
self.fetchedResultsController = nil;
[self.tableView reloadData]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-06T20:13:41.487

地理哈希。

所以它是一个字符串，它有一个位置，您可以在其中执行“喜欢”SQL 查询并在某个区域周围获取结果。

来自维基百科“Geohash 是由 Gustavo Niemeyer 发明并置于公共领域的地理编码系统。它是一种分层空间数据结构，可将空间细分为网格形状的桶，这是所谓的 Z-阶曲线，通常是空间填充曲线。

Geohashes 提供了任意精度等属性，以及逐渐从代码末尾删除字符以减小其大小（并逐渐失去精度）的可能性。

由于精度逐渐下降，附近的地方经常（但不总是）出现相似的前缀。共享前缀越长，两个地方就越接近。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-05T17:03:19.923

使用你 fetchedResultController

```
NSError *error;

    if (filter) { // check if you need to filter
        // set predicate to self.fetchedResultController.fetchRequest
        self.fetchedResultController.fetchRequest.predicate = [NSPredicate predicateWithFormat:@"your filter params"]];
    }else{ 
        // if you dont need to filter and you need to show all objects set predicate to nil
        self.fetchedResultController.fetchRequest.predicate = nil;
    }

    // and perform fetch!
    if (![self.fetchedResultController performFetch:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    } 
```

之后不要忘记更新用户界面`perFormFetch`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-15T06:57:35.537

使用[NSPredicate](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html)搜索/过滤数组。

例子：

```
NSString *modelName = @"honda";
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"model == %@", modelName];
NSArray *filteredArray = [results filteredArrayUsingPredicate:predicate]; 
```

# node.js - 如何防止 Sequelize 使用 Postgres 为主键插入 NULL

> ID：14332376
> 
> 赞同：11
> 
> 时间：2013-01-15T06:41:02.900
> 
> 标签：node.js, postgresql, sequelize.js

我在 postgresql 9 中创建了一个表

```
create table stillbirth(id serial primary key, state varchar(100), count int not null, year int not null); 
```

尝试使用 sequelize 1.4.1 版本在 node.js 上编写示例。

将上表映射为

```
var StillBirth = sequelize.define('stillbirth',
{ id: {type: Sequelize.INTEGER, primaryKey: true, autoIncrement: true},
state: Sequelize.STRING,
year: Sequelize.INTEGER,
count: Sequelize.INTEGER
}, {timestamps: false, freezeTableName: true}); 
```

现在当我尝试创建一个死胎的新实例并保存它时，我得到了错误。

/** 新实例创建代码 **/

```
StillBirth
   .build({state: objs[j].state, year: objs[j].year, count: objs[j].count})
   .save()
   .error(function(row){
         console.log('could not save the row ' + JSON.stringify(row));
        })
   .success(function(row){
       console.log('successfully saved ' + JSON.stringify(row));
   }) 
```

我得到的错误

*执行： INSERT INTO "stillbirth" ("state","year","count","id") VALUES ('Andhra Pradesh',2004,11,NULL) RETURNING *; 无法保存行 {"length":110,"name":"error","severity":"ERROR","code":"23502","file":"execMain.c","line": "1359","例程":"ExecConstraints"}*

如果您查看它生成的 sql，它会将 null 作为主键，理想情况下应该由 db 生成。

有人可以帮助我了解我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-15T07:37:04.997

您必须使用名为的特殊标志实例化 Sequelize `omitNull`：

```
var sequelize = new Sequelize('db', 'user', 'pw', {
  omitNull: true
}) 
```

这将`disable inserting undefined values as NULL`。[http://sequelizejs.com/#usage-options](http://sequelizejs.com/#usage-options)

您可能需要更新到 v1.5.x 或 1.6.0-betaX

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-05T21:12:51.663

`sdepold`按照他的建议，要扩展来自 的答案，您可以`omitNull`防止 sequelize 向`null`生成的 SQL 添加值。一般来说，这很好，它还允许您执行部分更新。

```
var sequelize = new Sequelize('db', 'user', 'pw', {
  omitNull: true
}) 
```

不过，有一个警告。`null`如果那是你想要做的合法的事情，你如何设置一个列？答案是你可以通过`omitNull`作为你保存的一部分。

```
user.address = null;
user.save({omitNull: false}); 
```

或者

```
user.update({address: null}, {omitNull: false}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-02T14:32:21.073

有一个不使用 omitNull 的解决方法。

只需这样做：

```
StillBirth
   .build({state: objs[j].state, year: objs[j].year, count: objs[j].count})
   .save(['state','year','count'])
   .error(function(row){
         console.log('could not save the row ' + JSON.stringify(row));
        })
   .success(function(row){
       console.log('successfully saved ' + JSON.stringify(row));
   }) 
```

通过发送属性数组作为 save 方法的参数，您可以强制 sequelize 仅插入该数组的属性，省略 id，让 DB 自动为您创建 id。=)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-16T10:22:23.277

也可以通过 create 方法定义可以设置哪些属性。例如，使用它可以让您将 User 模型限制为仅设置用户名和地址，但不设置管理标志：

```
User.create({ username: 'barfooz', isAdmin: true }, { fields: [ 'username' ] }).then(user => {
  // let's assume the default of isAdmin is false:
  console.log(user.get({
    plain: true
  })) // => { username: 'barfooz', isAdmin: false }
}) 
```

# jax-rs - jax-rs 插件自定义序列化器和反序列化器

> ID：14332377
> 
> 赞同：0
> 
> 时间：2013-01-15T06:41:10.867
> 
> 标签：jax-rs

jax-rs 中有没有办法插入自定义序列化器和反序列化器，

这对于将一些现有的消费者迁移到 REST 世界非常重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:16:36.470

您应该使用消息正文读取器/写入器定义自定义[提供程序：](http://jackson.codehaus.org/javadoc/jax-rs/1.0/javax/ws/rs/ext/Providers.html)

> 实体提供者在资源表示及其关联的 Java 类型之间提供序列化和/或反序列化服务。支持将表示反序列化为 Java 类型的实体提供程序实现 MessageBodyReader 接口。支持将 Java 类型序列化为表示的实体提供程序实现 MessageBodyWriter 接口。

请参阅[http://www.oracle.com/technetwork/articles/javaee/jax-rs-159890.html](http://www.oracle.com/technetwork/articles/javaee/jax-rs-159890.html)

# google-maps - 在 google transit Api 中设置出发和到达时间

> ID：14332387
> 
> 赞同：0
> 
> 时间：2013-01-15T06:41:57.877
> 
> 标签：google-maps, google-maps-api-3

我目前正在研究一个需要使用“Google Transit API V3”集成“Trip Planner”的旅游领域。我已完成设置地图和旅行计划者所需的所有选项。但在这里我面临着问题。

我想**在 google API 的“TransitDetails”对象中设置“arrival_time”和“departure_time”**。我创建了一个对象，它返回路线上的过境详细信息。但不是按照对象中传递的“出发”和“到达”选项。这就是我在代码中所做的

```
var directions = new google.maps.DirectionsService();
var renderer = new google.maps.DirectionsRenderer();
var startLocationAutocomplete;
var endLocationAutocomplete;
var map, transitLayer;

function initialize() {
    var mapOptions = {
        zoom:14,
        center:new google.maps.LatLng(51.538551, -0.016633),
        mapTypeId:google.maps.MapTypeId.ROADMAP
    };

    map = new google.maps.Map(document.getElementById('map'), mapOptions);

    google.maps.event.addDomListener(document.getElementById('go'), 'click', route);

    var defaultBounds = new google.maps.LatLngBounds(
            new google.maps.LatLng(35.371359, -79.319916),
            new google.maps.LatLng(36.231424, -77.752991));

    var autocompleteOptions = {
        bounds:defaultBounds,
        types:[ "locality", "political", "geocode" ]
    };
    startLocationAutocomplete = new google.maps.places.Autocomplete(document.getElementById('from'));
    endLocationAutocomplete = new google.maps.places.Autocomplete(document.getElementById('to'));

    startLocationAutocomplete.bindTo('bounds', map);
    endLocationAutocomplete.bindTo('bounds', map);

    transitLayer = new google.maps.TransitLayer();

    var control = document.getElementById('transit-wpr');
    map.controls[google.maps.ControlPosition.TOP_RIGHT].push(control);

    google.maps.event.addDomListener(control, 'click', function () {
        transitLayer.setMap(transitLayer.getMap() ? null : map);
    });

    addDepart();
    route();
}

function addDepart() {
    var departHr = document.getElementById('departHr');
    var departMin = document.getElementById('departMin');
    for (var hr = 1; hr < 12; hr++) {
        departHr.innerHTML += '<option value = "'+hr+'">' + hr + '</option>';
    }

    for (var i = 0; i < 12; i++) {
        for (var j = 0; j < 60; j += 5) {
            var x = i < 10 ? '0' + i : i;
            var y = j < 10 ? '0' + j : j;
            departMin.innerHTML += '<option value = "'+y+'">' + y + '</option>';
        }
    }
}

function formatAMPM() {
    var date = new Date();
    var hours = document.getElementById('departHr').value;
    var minutes =  document.getElementById('departMin').value;
    var ampm =  document.getElementById('timeFormat').value;
    /*hours = hours % 12;
    hours = hours ? hours : 12; // the hour '0' should be '12'
    minutes = minutes < 10 ? '0' + minutes : minutes;*/
    console.log(hours);
    if(ampm == 'pm'){
        hours = 12 + parseInt(hours);        }
    var strTime = hours + ':' + minutes;
    return strTime;
}

function route() {
    var startLocation = document.getElementById('from').value;
    var endLocation = document.getElementById('to').value;
    var selectedMode = document.getElementById('modeOfTransportation').value;
    var departure = formatAMPM();
    var bits = departure.split(':');
    var now = new Date();
    var tzOffset = (now.getTimezoneOffset() + 60) * 60 * 1000;

    var time = ($('#travelDate').val() != '') ? new Date($('#travelDate').val()) : new Date();

    time.setHours(bits[0]);
    time.setMinutes(bits[1]);

    var ms = time.getTime() - tzOffset;

    var departureTime = time;

        var request = {
            origin:startLocation,
            destination:endLocation,
            travelMode:google.maps.TravelMode[selectedMode],
            provideRouteAlternatives:true,
            transitOptions:{
                departureTime:departureTime
            }
        };

    console.log(request);
    var panel = document.getElementById('panel');
    panel.innerHTML = '';
    directions.route(request, function (response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            renderer.setDirections(response);
            renderer.setMap(map);
            renderer.setPanel(panel);
            console.log(status);
        } else {
            renderer.setPanel(null);
            alert(status);
        }
    });

}
google.maps.event.addDomListener(window, 'load', initialize); 
```

有人可以通过任何参考或任何代码提示来帮助我纠正它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T23:11:49.380

你需要做这样的事情

```
//TranDep and TranArr have a valid date or ''
if ((TranDep == '') && (TranArr == '')) var Transit = null;
else {
  if ((TranDep != '') && (TranArr != ''))
    var Transit = {arrivalTime: new Date(TranArr), departureTime: new Date(TranDep)}
  else {
    if ((TranDep == '') && (TranArr != ''))
      var Transit = {arrivalTime: new Date(TranArr)}
    else 
      var Transit = {departureTime: new Date(TranDep)}
  }
}

var Dir = new google.maps.DirectionsService();
var request = {
      transitOptions: Transit,
      ......... // the others properties
}; 
```

如果您指定了到达时间，则出发时间将被忽略。

问候

# android - Android：错误膨胀类 xml，应用程序崩溃

> ID：14332395
> 
> 赞同：0
> 
> 时间：2013-01-15T06:43:11.263
> 
> 标签：android, xml, android-layout

我正在使用 MyGauge 的自定义视图类和 RadialGauge 的自定义类导入。下面是我的课程代码。

```
import java.awt.Color;
import java.io.IOException;
import android.content.Context;
import android.graphics.Canvas;
import android.util.AttributeSet;
import android.util.Log;
import android.view.View;
import com.softwarefx.chartfx.gauge.FileFormat;
import com.softwarefx.chartfx.gauge.GaugeFont;
import com.softwarefx.chartfx.gauge.GaugeFontSize;
import com.softwarefx.chartfx.gauge.LayoutTarget;
import com.softwarefx.chartfx.gauge.Needle;
import com.softwarefx.chartfx.gauge.NeedleStyle;
import com.softwarefx.chartfx.gauge.RadialBorderStyle;
import com.softwarefx.chartfx.gauge.RadialCapStyle;
import com.softwarefx.chartfx.gauge.RadialGauge;
import com.softwarefx.chartfx.gauge.RangeType;
import com.softwarefx.chartfx.gauge.Section;
import com.softwarefx.chartfx.gauge.TickmarkStyle;
import com.softwarefx.chartfx.gauge.Title;
public class MyGauge extends View 
{

RadialGauge gauge;

public MyGauge(Context context, AttributeSet attrs) 
{
    super(context, attrs);
    // TODO Auto-generated constructor stub
    init();
}

public MyGauge(Context context)
{
    super(context);
    init();
}

public MyGauge(Context context, AttributeSet attrs, int defStyle) 
{
    super(context, attrs, defStyle);
    init();
}

public void init()
{
gauge = new RadialGauge();

//gauge.setBackColor = java.awt.Color.white;
gauge.getBorder().setColor(new java.awt.Color(230, 232, 250));  // Color Silver
Log.d("iiiiiiiiiiiiiiiii", "iiiiiiiiiiiii"+gauge);
gauge.getBorder().setGlare(true);
gauge.getBorder().setInsideColor(java.awt.Color.black) ;
gauge.getBorder().setStyle(RadialBorderStyle.getSemiCircularBorder07());
gauge.getBorder().setGlare(false);

//Setting the MainScale
gauge.getMainScale().setMax(300);

//Setting first Section
Section section1 = new Section();
section1.setMin(210);
section1.setMax(270);
section1.getBar().setColor(Color.yellow);
section1.getTickmarks().setColor(Color.white);
gauge.getMainScale().getSections().add(section1);

//Setting second Section
section1 = new Section();
section1.setMin(270);
section1.setMax(300);
section1.getBar().setColor(Color.red);
section1.getTickmarks().setColor(Color.white);
gauge.getMainScale().getSections().add(section1);

gauge.getMainScale().getBar().setVisible(false);

gauge.getMainScale().getCap().setStyle(RadialCapStyle.getRotatingCap02());
gauge.getMainScale().getCap().setColor(Color.darkGray);

Needle needle1 =(Needle) gauge.getMainIndicator();
needle1.setStyle(NeedleStyle.getNeedle10());
needle1.setUseRangeColor(RangeType.SECTION);
needle1.setValue("240");

gauge.getMainScale().getTickmarks().getMajor().setColor(Color.darkGray);
gauge.getMainScale().getTickmarks().getMajor().getLabel().setFont(new GaugeFont("Tahoma", GaugeFontSize.SMALLER, java.awt.Font.BOLD));
gauge.getMainScale().getTickmarks().getMajor().getLabel().setColor(Color.white);
gauge.getMainScale().getTickmarks().getMajor().setStep(30);
gauge.getMainScale().getTickmarks().getMajor().setStyle(TickmarkStyle.getTickmark01_2());
gauge.getMainScale().getTickmarks().getMedium().setColor(new java.awt.Color(230, 232, 250));  // Color Silver
gauge.getMainScale().getTickmarks().getMinor().setColor(Color.gray);

//Setting the titles:

Title title1 = new Title();
title1.setText("PSI");
title1.setColor(new java.awt.Color(211, 211, 211));  // Color LightGray
title1.setFont(new GaugeFont("Tahoma", GaugeFontSize.SMALLER, java.awt.Font.BOLD));
title1.getLayout().setTarget(LayoutTarget.ANCHOR_POINT);
title1.getLayout().getAnchorPoint().setLocation(0,0.225);
gauge.getTitles().add(title1);

gauge.setWidth(320);
gauge.setHeight(350);
gauge.setToolTipEnabled(false);
gauge.renderControl();
try {
    gauge.exportGauge(FileFormat.XML, "file:///assets/image.bmp");
} catch (IOException e) {
    Log.d("nnnnnnnnnnnnnnnnnn", "nnnnnnnnn"+gauge);
    // TODO Auto-generated catch block
    e.printStackTrace();
}
}
} 
```

XML文件中的自定义视图代码如下：

```
 <LinearLayout android:id="@+id/gauge"
   android:layout_height="wrap_content"
   android:layout_width="fill_parent"
   android:layout_below="@id/valrow2">

   <view class="com.example.gaugesystems.MyGauge"
       android:id="@+id/gview"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content" />

 </LinearLayout> 
```

我在应用程序崩溃的 xml 中收到错误，因为“错误膨胀类 com.example.gaugesystems.MyGauge”。任何人都可以请帮助为什么会发生这种情况..

编辑：下面是Logcat：

```
01-15 12:32:56.515: E/AndroidRuntime(14795): FATAL EXCEPTION: main
01-15 12:32:56.515: E/AndroidRuntime(14795): java.lang.RuntimeException: Unable to start activity     ComponentInfo{com.example.gaugesystems/com.example.gaugesystems.MyViewStatus}: android.view.InflateException: Binary XML file line #128: Error inflating class com.example.gaugesystems.MyGauge
01-15 12:32:56.515: E/AndroidRuntime(14795):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at     android.os.Looper.loop(Looper.java:137)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at android.app.ActivityThread.main(ActivityThread.java:4898)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at java.lang.reflect.Method.invokeNative(Native Method)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at java.lang.reflect.Method.invoke(Method.java:511)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at dalvik.system.NativeStart.main(Native Method)
01-15 12:32:56.515: E/AndroidRuntime(14795): Caused by: android.view.InflateException: Binary XML file line #128: Error inflating class com.example.gaugesystems.MyGauge
01-15 12:32:56.515: E/AndroidRuntime(14795):    at android.view.LayoutInflater.createView(LayoutInflater.java:613)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:306)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at android.app.Activity.setContentView(Activity.java:1916)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at com.example.gaugesystems.MyViewStatus.onCreate(MyViewStatus.java:21)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at android.app.Activity.performCreate(Activity.java:5184)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
01-15 12:32:56.515: E/AndroidRuntime(14795):    ... 11 more
01-15 12:32:56.515: E/AndroidRuntime(14795): Caused by: java.lang.reflect.InvocationTargetException
01-15 12:32:56.515: E/AndroidRuntime(14795):    at java.lang.reflect.Constructor.constructNative(Native Method)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at android.view.LayoutInflater.createView(LayoutInflater.java:587)
01-15 12:32:56.515: E/AndroidRuntime(14795):    ... 23 more
01-15 12:32:56.515: E/AndroidRuntime(14795): Caused by: java.lang.ExceptionInInitializerError
01-15 12:32:56.515: E/AndroidRuntime(14795):    at com.softwarefx.chartfx.gauge.RadialGauge.<init>(Unknown Source)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at com.example.gaugesystems.MyGauge.init(MyGauge.java:55)
01-15 12:32:56.515: E/AndroidRuntime(14795):    at com.example.gaugesystems.MyGauge.<init>(MyGauge.java:36)
01-15 12:32:56.515: E/AndroidRuntime(14795):    ... 26 more
01-15 12:32:56.515: E/AndroidRuntime(14795): Caused by: java.lang.ExceptionInInitializerError
01-15 12:32:56.515: E/AndroidRuntime(14795):    at ChartFX.internal.WebForms.Gauge.BaseGauge.<clinit>(Unknown Source)
01-15 12:32:56.515: E/AndroidRuntime(14795):    ... 29 more
01-15 12:32:56.515: E/AndroidRuntime(14795): Caused by: java.lang.NoClassDefFoundError: java.awt.Color
01-15 12:32:56.515: E/AndroidRuntime(14795):    at SfxNETGauges.System.Drawing.Color.<clinit>(Unknown Source)
01-15 12:32:56.515: E/AndroidRuntime(14795):    ... 30 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:47:19.177

以下看起来很可疑：

```
 <view class="com.example.gaugesystems.MyGauge" 
```

当我使用自定义视图对象时，我使用以下语法：

```
 <com.example.gaugesystems.MyGauge ...> 
```

不确定这是否是问题，但应该很快尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:37:52.627

根据 logcat 的说法，它似乎`ChartFX.internal.WebForms.Gauge.BaseGauge`试图创建 的静态实例`java.awt.Color`，但 JVM 无法加载后者，所以它抛出`java.lang.NoClassDefFoundError`.

**编辑**：看起来 Software FX 的库已移植到 Android： http: [//www.softwarefx.com/mobile/pgm/clients/android.aspx](http://www.softwarefx.com/mobile/pgm/clients/android.aspx)。我认为你应该使用这个。另一方面，您可以切换到开源仪表库，例如[http://android.codeandmagic.org/2012/08/android-gaugeview-library/](http://android.codeandmagic.org/2012/08/android-gaugeview-library/)。

# c# - 使用通用列表将 Directory.EnumerateFiles 绑定到中继器

> ID：14332397
> 
> 赞同：1
> 
> 时间：2013-01-15T06:43:16.427
> 
> 标签：c#, asp.net, repeater, generic-list

我正在尝试创建一个小型网络应用程序，当我输入游戏名称时，它会搜索一个包含大量图标的文件夹，以找到与输入游戏相似的图标。

然后我想显示一个带有图标名称的转发器，以及它旁边的图标。

到目前为止，我已经使用以下代码成功显示了名称：

```
IEnumerable<string> getfiles =
            from f in
                Directory.EnumerateFiles(Server.MapPath("~/_resources/game_icon"), "*.*", SearchOption.AllDirectories)
            where Path.GetFileName(f).ToLower().Contains(txtGameName.Text.ToLower())
            select Path.GetFileNameWithoutExtension(f);

        List<AllFiles> all = getfiles.Select(file => new AllFiles
            {
                FileName = file, 
                SubdirectoryName = "",
                FileNameWithExtension = ""
            }).ToList();

        rptGameMatches.DataSource = all;
        rptGameMatches.DataBind(); 
```

但是在显示图标方面没有太多运气，该图标将位于`ImageLocation`.

我试过玩：

```
foreach (string file in Directory.EnumerateFiles(Server.MapPath("~/_resources/game_icon"), "*.*", SearchOption.AllDirectories).Count() )
        {
            if(file.)
        } 
```

和

```
for (int i = 0; i < Directory.EnumerateFiles(Server.MapPath("~/_resources/game_icon"), "*.*", SearchOption.AllDirectories).Count(); i++)
        {

        } 
```

没有成功。

我知道有一种简单的方法可以做到这一点，但我似乎不能完全正确。有人可以告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T06:53:40.673

这是您可以做什么的示例（出于紧凑的原因，我将代码和标记放在单个 WebForm 中，但当然您可以将代码放在单独的文件中）：

```
<%@ Page Language="C#" %>
<%@ Import Namespace="System.IO" %>

<script type="text/c#" runat="server">
    protected void BtnSearchClick(object sender, EventArgs e)
    {
        var images =
            from image in Directory.EnumerateFiles(Server.MapPath(folder), "*.*", SearchOption.AllDirectories)
            let relativeLocation = image.Replace(root, string.Empty).Replace("\\", "/")
            let url = ResolveUrl("~/" + relativeLocation)
            where image.ToLower().Contains(txtGameName.Text.ToLower())
            select new 
            {
                Url = url
            };

        results.DataSource = images;
        results.DataBind();
    }
</script>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:TextBox ID="txtGameName" runat="server" />
        <asp:LinkButton ID="btnSearch" runat="server" OnClick="BtnSearchClick" Text="Search" />
        <asp:Repeater ID="results" runat="server">
            <ItemTemplate>
                <asp:Image runat="server" ImageUrl='<%# Eval("Url") %>' />
            </ItemTemplate>
        </asp:Repeater>
    </div>
    </form>
</body>
</html> 
```

好的，所以我们有一个包含文本字段、按钮和转发器的网页。单击按钮时，我们将搜索指定文件夹中名称包含输入文本字段中的文本的所有图像：

```
var images =
    from image in Directory.EnumerateFiles(Server.MapPath(folder), "*.*", SearchOption.AllDirectories)
    let relativeLocation = image.Replace(root, string.Empty).Replace("\\", "/")
    let url = ResolveUrl("~/" + relativeLocation)
    where image.ToLower().Contains(txtGameName.Text.ToLower())
    select new 
    {
        Url = url
    }; 
```

这里有几个步骤：

```
let filename = Path.GetFileName(image) 
```

在这个阶段，我们正在获取文件的物理位置。它看起来像这样：

```
c:\inetpub\wwwroot\_resources\game_icon\image1.png 
```

然后我们剥离应用程序根并替换斜杠：

```
let relativeLocation = filename.Replace(root, string.Empty).Replace("\\", "/") 
```

所以`relativeLocation`变成：

```
_resources/game_icon/image1.png 
```

最后一步是：

```
let url = ResolveUrl("~/" + relativeLocation) 
```

这将变成：

```
/_resources/game_icon/image1.png 
```

所以在一天结束时，图像集合可能看起来像这样（假设用户`image`在文本字段中搜索）：

```
[
    { Url: "/_resources/game_icon/image1.png" },
    { Url: "/_resources/game_icon/subfolder1/image2.png" },
    { Url: "/_resources/game_icon/subfolder2/image1.png" },
    ...
] 
```

正是这个集合绑定到转发器。在中继器内部，我们定义了一个 Image，其`ImageUrl`属性将是绑定到`Url`我们构造的匿名对象的属性的数据。

# eclipse - 如何在 TreeViewer 中仅显示工作区的内容？

> ID：14332400
> 
> 赞同：1
> 
> 时间：2013-01-15T06:43:25.483
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

如何仅显示我的工作区的内容`TreeViewer`？

这是我的主要视图类：

```
import org.eclipse.jface.viewers.TreeViewer;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.ui.part.ViewPart;

public class MainView extends ViewPart {
    public static final String ID = "com.MainView";

    public MainView() {
        // TODO Auto-generated constructor stub
    }

    @Override
    public void createPartControl(Composite parent) {
        TreeViewer tv = new TreeViewer(parent);
        tv.getTree().setLayoutData(new GridData(GridData.FILL_BOTH));
        tv.setContentProvider(new FileTreeContentProvider());
        tv.setLabelProvider(new FileTreeLabelProvider());
        tv.setInput(ResourcesPlugin.getWorkspace());
    }

    @Override
    public void setFocus() {
        // TODO Auto-generated method stub

    }

} 
```

这是我的内容提供者类：

```
import org.eclipse.core.resources.IFile;
import org.eclipse.core.resources.IFolder;
import org.eclipse.core.resources.IProject;
import org.eclipse.core.resources.IWorkspace;
import org.eclipse.core.resources.IWorkspaceRoot;
import org.eclipse.core.resources.ResourcesPlugin;
import org.eclipse.core.runtime.CoreException;
import org.eclipse.jface.viewers.ITreeContentProvider;
import org.eclipse.jface.viewers.Viewer;

public class FileTreeContentProvider implements ITreeContentProvider {

    public void dispose() {

    }

    public void inputChanged(Viewer viewer, Object oldInput, Object newInput) {

    }

    public Object[] getElements(Object inputElement) {
        return null;
    }

    public Object[] getChildren(Object parentElement) {
        if (parentElement instanceof IProject) {
            IProject projects = (IProject) parentElement;
            try {
                return projects.members();
            } catch (CoreException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        if (parentElement instanceof IFolder) {
            IFolder ifolder = (IFolder) parentElement;
            try {
                return ifolder.members();
            } catch (CoreException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        return null;
    }

    public Object getParent(Object element) {
        if (element instanceof IProject) {
            IProject projects = (IProject) element;
            return projects.getParent();
        }
        if (element instanceof IFolder) {
            IFolder folder = (IFolder) element;
            return folder.getParent();
        }
        if (element instanceof IFile) {
            IFile file = (IFile) element;
            return file.getParent();
        }
        return null;
    }

    public boolean hasChildren(Object element) {
        if (element instanceof IProject) {
            IProject projects = (IProject) element;
            try {
                return projects.members().length > 0;
            } catch (CoreException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        if (element instanceof IFolder) {
            IFolder folder = (IFolder) element;
            try {
                return folder.members().length > 0;
            } catch (CoreException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        return false;
    }

} 
```

这是我的标签提供者类：

```
import org.eclipse.core.resources.IFile;
import org.eclipse.core.resources.IFolder;
import org.eclipse.core.resources.IProject;
import org.eclipse.jface.viewers.ILabelProvider;
import org.eclipse.jface.viewers.ILabelProviderListener;
import org.eclipse.swt.graphics.Image;

public class FileTreeLabelProvider implements ILabelProvider {

    public void addListener(ILabelProviderListener listener) {

    }

    public void dispose() {

    }

    public boolean isLabelProperty(Object element, String property) {

        return false;
    }

    public void removeListener(ILabelProviderListener listener) {

    }

    public Image getImage(Object element) {

        return null;
    }

    public String getText(Object element) {
        if (element instanceof IProject) {
            String text = ((IProject) element).getName();
            return text;
        }
        if (element instanceof IFolder) {
            String text = ((IFolder) element).getName();
            return text;
        }
        if (element instanceof IFile) {
            String text = ((IFile) element).getName();
            return text;
        }

        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T05:31:39.183

```
public Object[] getElements(Object inputElement) {
        return ResourcesPlugin.getWorkspace().getRoot().getProjects();
    } 
```

我现在可以得到项目了。我的代码正在运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-16T17:53:31.560

工作空间对象的内容提供者和标签提供者已经存在于 Eclipse 框架中：

*   [`org.eclipse.ui.model.WorkbenchLabelProvider`](https://help.eclipse.org/oxygen/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/model/WorkbenchLabelProvider.html)
*   [`org.eclipse.ui.model.WorkbenchContentProvider`](https://help.eclipse.org/oxygen/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/model/WorkbenchContentProvider.html)

使用它们，您的代码将如下所示：

```
TreeViewer treeViewer = new TreeViewer(parent);
treeViewer.getTree().setLayoutData(new GridData(GridData.FILL_BOTH));
treeViewer.setContentProvider(new WorkbenchContentProvider());
treeViewer.setLabelProvider(new WorkbenchLabelProvider());
treeViewer.setInput(ResourcesPlugin.getWorkspace().getRoot()); 
```

# gwt - 分页不适用于 GWT DataGrid

> ID：14332404
> 
> 赞同：1
> 
> 时间：2013-01-15T06:44:00.490
> 
> 标签：gwt, gwt-celltable, gwt-2.4, gwt-2.5

我有一个显示员工详细信息的 DataGrid。例如，每一行对应一个员工（姓名，年龄，工资），姓名+年龄是锚点，工资是纯文本。

到目前为止一切正常，但是由于行数非常高，我的浏览器开始挂起。所以我决定在我的 DataGrid 中使用分页。我做了类似的事情：

```
List<Employee> tableRowData = new ArrayList<Employee>();
DockPanel dock = new DockPanel();

empTable = new DataGrid<Employee>(tableRowData.size());
SimplePager pager = new SimplePager(TextLocation.CENTER);
pager.setDisplay(hotelsTable);
pager.setPageSize(25); 

dock.add(empTable, DockPanel.CENTER);
dock.add(pager, DockPanel.SOUTH);
dock.setWidth("100%");
dock.setCellWidth(empTable, "100%");
dock.setCellWidth(pager, "100%");

empTable.setRowCount(1, true);
empTable.setRowData(0, tableRowData);
empTable.setStyleName(style.hotelTable());
empTable.setWidget(dock); 
```

现在，我的 pager& 表格在前 25 行中显示良好，但是在单击 pager 表格主体上的下一步时，表格主体会消失，并且一些加载栏会永远显示在主体中。

我还在某处读到，不使用 DataProviders 就无法进行分页。是这样吗？

我在这里看到了[分页的例子](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCellWidgets#paging)。它看起来很简单，但在我的情况下使用时我搞砸了。非常感谢任何帮助。我也希望你能提供基本的代码让我继续前进。

谢谢，莫希特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:39:00.263

我认为您缺少 ListProvider。在你的情况下。你应该尝试：

```
empTable = new DataGrid<Employee>(25);
ListDataProvider<Employee> provider = new ListDataProvider<Employee>(tableRowData);
provider.addDataDisplay(empTable);
.
.
.
//empTable.setRowCount(1, true);
//empTable.setRowData(0, tableRowData); 
```

并通过使用`provider.getList().add()`或类似的方式添加数据。

# java - 创建一个新的 UiBinder 花费太多时间

> ID：14332407
> 
> 赞同：0
> 
> 时间：2013-01-15T06:44:15.570
> 
> 标签：java, jakarta-ee, gwt, gxt

在我的项目中创建新的 UiBinder 文件时遇到问题。创建一个需要太多时间，有时它根本不会创建。创建窗口保持原样。在某些情况下，当我关闭我的 Eclipse 并重新启动时，会显示文件已创建。有人可以帮忙吗？

我正在使用 Eclipse Juno。使用 GXT 3。JDK 1.6。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:10:08.567

Eclipse Juno 存在一些与引入到 Juno 版本中的新接口代码相关的问题。例如，此实现确实存在一些与一遍又一遍地重绘打开的编辑器相关的问题。您可以通过更新到最新版本来解决其中一些问题。甚至有一些修补程序可用于解决其中一些问题。现在我建议您降级到 Indigo。

Kepler 将于 6 月发布 ( [http://wiki.eclipse.org/Simultaneous_Release](http://wiki.eclipse.org/Simultaneous_Release) )，我真的希望到那时能解决其中的一些问题。

# android - 自定义列表视图没有响应点击事件

> ID：14332409
> 
> 赞同：4
> 
> 时间：2013-01-15T06:44:30.503
> 
> 标签：android, listview, listadapter, onitemclicklistener

正如您猜想的那样，一切正常，没有触发点击事件。在我开始之前，我已经阅读了很多关于此的主题，但是我一生都无法弄清楚。这是代码。

activity_main.xml（调用列表的主布局）

```
<LinearLayout
    android:orientation="vertical" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

     <ListView
         android:id="@android:id/list"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent"

         />

</LinearLayout> 
```

list_mainsegments_row.xml（自定义行）

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:clickable="true"
        android:orientation="horizontal" 
        >

        <ImageView
            android:id="@+id/iconView"
            style="@style/generalPagesLogoStyle"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_margin="@dimen/tendpPadding"
            android:scaleType="fitCenter"
            android:src="@drawable/ic_launcher" />

        <TextView
            android:id="@+id/titleMainSegments"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left|center_vertical"
            android:layout_weight="0.5"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textSize="@dimen/generalTextSize"
             />

        <ImageButton
            android:id="@+id/imageButton1"
            android:layout_width="30dp"
            android:layout_height="30dp"
            android:layout_gravity="center_vertical"
            android:scaleType="fitCenter"
            android:src="@drawable/arrow" />
    </LinearLayout> 
```

我的适配器.java

```
 public class MyAdapter extends ArrayAdapter<String> {

    public MyAdapter(Context context, int resource, int textViewResourceId,
            String[] strings) {
        super(context, resource, textViewResourceId, strings);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = LayoutInflater.from(getContext());
        // This is a single row
        View row = inflater.inflate(R.layout.list_mainsegments_row, parent,
                false);
        String[] items = getContext().getResources().getStringArray(
                R.array.segments_main);
        ImageView iv = (ImageView) row.findViewById(R.id.iconView);
        TextView tv = (TextView) row.findViewById(R.id.titleMainSegments);
        tv.setText(items[position]);
        organiseLayout(position, items, iv);
        return row;

    }

    private void organiseLayout(int position, String[] items, ImageView iv) {
        if (items[position].equals(getContext().getResources().getString(
                R.string.segment_one))) {
            iv.setImageResource(R.drawable.img1);
        }
        if (items[position].equals(getContext().getResources().getString(
                R.string.segment_two))) {
            iv.setImageResource(R.drawable.img2);
        }
    }
} 
```

MainActivity.java

```
public class MainActivity extends ListActivity implements OnItemClickListener {

private MyAdapter mAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mAdapter = new MyAdapter(this, android.R.layout.simple_list_item_1,
            R.id.titleMainSegments, getResources().getStringArray(
                    R.array.segments_main));

    setListAdapter(mAdapter);
    getListView().setOnItemClickListener(this);

}

public void onItemClick(AdapterView<?> parent, View view,
        int position, long id) {
    CharSequence text = "Item clicked";
    int duration = Toast.LENGTH_SHORT;
    Toast toast = Toast.makeText(this, text, duration);
    toast.setGravity(Gravity.CENTER_HORIZONTAL | Gravity.CENTER_VERTICAL,
            duration, duration);
    toast.show();
} } 
```

没有错误，所以 logCat 日志不会有用。一切顺利，但点击 ListView 时没有显示 Toast。

编辑：

样式.xml：

```
<!-- Global styles -->
    <style name="horizLayoutHolder">
        <item name="android:layout_width">wrap_content</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:layout_gravity">center_horizontal</item>
    </style>

    <!-- This is for the text based pages -->
    <style name="general_pages">
        <item name="android:layout_width">fill_parent</item>
        <item name="android:layout_height">fill_parent</item>
        <item name="android:orientation">vertical</item>
        <item name="android:paddingBottom">@dimen/generalPadding</item>
        <item name="android:paddingLeft">@dimen/generalPadding</item>
        <item name="android:paddingRight">@dimen/generalPadding</item>
        <item name="android:paddingTop">@dimen/tendpPadding</item>
    </style>

    <style name="generalPagesTitleStyle">
        <item name="android:layout_width">wrap_content</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:layout_marginBottom">@dimen/tendpPadding</item>
        <item name="android:textColor">#000</item>
        <item name="android:textSize">@dimen/generalHeadingTextSize</item>
        <item name="android:textStyle">bold</item>
    </style>

    <style name="generalPageScrollView">
        <item name="android:layout_width">wrap_content</item>
        <item name="android:layout_height">wrap_content</item>
    </style>

    <style name="generalPageMainText">
        <item name="android:layout_width">wrap_content</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:textColor">#000</item>
        <item name="android:textSize">@dimen/generalSmallFontSize</item>
    </style>

    <style name="generalPagesLogoStyle">
        <item name="android:layout_width">wrap_content</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:layout_marginBottom">@dimen/tendpPadding</item>
"                <item name="android:src">@drawable/mainlogo</item>
    </style>

    <style name="generalActionButton">
        <item name="android:layout_width">wrap_content</item>
        <item name="android:layout_height">40dp</item>
        <item name="android:layout_gravity">center_horizontal</item>
        <item name="android:textSize">@dimen/generalVerySmallFontSize</item>
        <item name="android:paddingRight">@dimen/generalPadding</item>
        <item name="android:paddingLeft">@dimen/generalPadding</item>
    </style>

    <style name="generalTextBoxes">
        <item name="android:layout_width">250dp</item>
        <item name="android:layout_height">50dp</item>
        <item name="android:layout_gravity">center_horizontal</item>
        <item name="android:ems">10</item>
        <item name="android:textSize">@dimen/generalSmallFontSize</item>
    </style>

    <!-- End of General / Full text based activities -->

    <!-- I have used this in theme.xml -->
    <style name="windowTitleBackgroundStyle">
        <item name="android:background">#CCCCCC</item>
    </style>

    <style name="windowTitleStyle">
        <item name="android:textColor">#000000</item>
        <item name="android:padding">12dip</item>
        <item name="android:textStyle">bold</item>
        <item name="android:textSize">16sp</item>
    </style>
    <!-- End of Theme.xml stuff --> 
```

主题.xml

```
<style name="Theme.myTheme.TitleBar" parent="android:Theme">
    <item name="android:windowTitleBackgroundStyle">@style/windowTitleBackgroundStyle</item>
    <item name="android:windowTitleStyle">@style/windowTitleStyle</item>
    <item name="android:windowTitleSize">50dip</item>
    <item name="android:background">#F8C845</item>
    <item name="android:textColor">#555</item>
</style> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-15T07:38:26.227

移除**LinearLayout**属性

```
android:clickable="true" 
```

从 XML 文件**list_mainsegments_row.xml 中**，它应该可以正常工作（我刚刚尝试过）。

* * *

## 编辑

当您使用具有包含 Button/ImageButton 的子项的 ListView的**setOnItemClickListener方法时，该方法永远不会被触发，因为 Button/ImageButton 会使用该事件。**

解决方案是使用**setOnClickListener**（对于每个项目）而不是**setOnItemClickListener**（对于 ListView）。

为此，您可以通过以下方式将 OnClickListener 传递给适配器：

适配器应如下所示：

```
private OnClickListener callback;

public class MyAdapter extends ArrayAdapter<String> {

public MyAdapter(Context context, int resource, int textViewResourceId,
        String[] strings ,  OnClickListener callback ) {
    super(context, resource, textViewResourceId, strings);
    this.callback = callback;
} 
```

在**getView**方法中，只需添加以下几行设置点击侦听器，在填充行视图之后：

```
// Set a click listener on the row itself
row.setOnClickListener ( callback );
// Set the position as tag so it can be retrieved from the click listener because the click listener itself does not provide the position like done in the onItemClickListener
row.setTag ( position ); 
```

现在，MainActivity 应该实现**OnClickListener**而不是**OnItemClickListener**，因此删除方法**onItemClick**并从**onCreate**方法中删除以下语句：

```
getListView().setOnItemClickListener(this); 
```

并添加以下方法：

```
@Override
public void onClick ( View view ) {
        // view is the row view returned by getView
        // The position is stored as tag, so it can be retrieved using getTag ()
    CharSequence text = "Item clicked : " + view.getTag () ;
    int duration = Toast.LENGTH_SHORT;
    Toast toast = Toast.makeText(this, text, duration);
    toast.setGravity(Gravity.CENTER_HORIZONTAL | Gravity.CENTER_VERTICAL,
            duration, duration);
    toast.show();
} 
```

最后，以下列方式声明适配器：

```
 mAdapter = new MyAdapter(this, android.R.layout.simple_list_item_1,
            R.id.titleMainSegments, getResources().getStringArray(
                    R.array.segments_main) , this ); 
```

* * *

## 编辑

## 解释 ：

发生在您身上的是一个常见问题，当您有一个包含**按钮**（或类似）的项目的**ListView时会发生这种情况。**

 **在这种情况下，如果您只想为按钮设置一个单击事件，而为项目的其余部分设置另一个单击事件（如果用户单击项目而不是按钮），这就是问题所在： botton 使用 item 的**clickable**属性，这意味着如果 item 不包含任何按钮，则默认情况下它是可点击的（您可以尝试删除按钮）但如果 item 包含按钮，它将是可点击的，因为它有认为它本身是可点击的。

因此，即使您设置了 OnItemClick 事件，如果项目中有一个按钮（或类似的东西，如图像按钮），它也不会被调用，因为它（按钮）将消耗点击事件。

因此，在这种情况下，您不能使用 OnItemClick 事件（直接在 ListView 上分配）。

一种解决方案是在每个项目上分配单击事件（使用 OnItemClick），而不是让 ListView 处理它（因为它不会像上面解释的那样工作）。

您必须直接在项目上分配 OnClick 事件（毕竟这是一个视图），这就是为什么我在适配器的**getView**方法中分配 OnClick 侦听器，其中正在构建项目视图。

到目前为止，不是只有一个侦听器 (OnItemClick)，而是在适配器的**getView**方法中分配了与屏幕上可见的项目一样多的侦听器。

如果用户单击项目视图中的任何位置，则 OnClick 侦听器将被触发，除非他/她单击的位置是可单击的视图（如按钮...）。

所以通过这种方式问题就解决了，你可以给按钮分配一个点击监听器，给项目视图分配一个点击监听器。

如果用户点击了item的按钮，就会执行该按钮的点击监听。如果用户在项目视图内部单击而不是在按钮上单击，则执行项目视图的单击侦听器，因为单击侦听器是在项目视图本身上设置的。

一个小问题是，使用上面的方法，我们不能直接知道被点击的项目视图的位置，因为如果我们使用 OnItemClick 监听器，回调会在参数中提供位置，但是在 OnClick 监听器中，您只有作为参数单击的视图。

为了解决这个小问题，您可以使用**view.setTag ( ... ) 将视图的位置作为标签存储在视图本身上，并使用 view.getTag ()**检索您之前存储的**内容**。实际上，任何视图都可以有一个标签，该标签存储为**object**，因此在检索它时，将其转换回所需的数据类型。

通过这种方式，您可以知道处理 ListView 项上的单击事件，并知道单击项的位置，就像您使用 OnItemClick 侦听器一样。

希望能帮助到你。**

# birt - 如何从 BIRT 中的属性文件加载数据库 url 和凭据

> ID：14332412
> 
> 赞同：4
> 
> 时间：2013-01-15T06:44:43.397
> 
> 标签：birt

BIRT 4.2.1 运行时包部署到 Tomcat 服务器中。现在，我想从属性文件中读取数据库 url 和凭据并与数据源属性绑定。是否可以在 web.xml (BIRT_HOME/WEB_INF/web.xml) 中配置属性并使用它？

我已经[从属性文件中阅读了这篇文章 Birt 数据源参数](https://stackoverflow.com/questions/1340339/birt-data-source-parameters-from-a-property-file)

# c++ - C++ - 确保硬盘（驱动器）在程序执行期间不空闲

> ID：14332413
> 
> 赞同：0
> 
> 时间：2013-01-15T06:44:43.630
> 
> 标签：c++, windows, hard-drive, python-idle

我有几个问题：

1.  经过一定时间后，以下 C++ 代码是否会导致我的硬盘空闲？

    ```
    #include <stdio.h>

    int main()
    {
        while(1);
    } 
    ```

2.  如果是这样，我可以在此代码中添加什么以确保我的硬盘在执行期间不会空闲？

3.  无论如何，通过 C++ 代码检查我的硬盘是否处于空闲状态？

注意：我使用的是 Windows 7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T06:47:24.930

1.  如果启用了空闲，是的，因为它不访问硬盘驱动器。
2.  没有什么; 您的代码甚至可能无法从硬盘运行。即使您添加代码来读取某些数据，它也可能会被缓存并且不会触及磁盘。您可能可以先写入然后刷新，以确保将数据提交到磁盘，但这会在刷新期间阻塞您的程序（而且这种方法也不可靠。）
3.  可能是您可以使用 SMART 左右进行检查，但请记住，您的程序可能不在硬盘驱动器上运行 - 可能在 SSD 上，可能在网络上，可能来自 RAM 磁盘。

一般来说，你不应该在你的程序中包含这样的假设。如果您需要触摸磁盘并且您担心硬盘驱动器可能会关闭并需要很长时间，请要求用户禁用硬盘驱动器睡眠。对于服务器应用程序，这很可能不是问题，因为驱动器始终在运行。对于 SSD 和其他东西，无论如何这都不是问题，因为这些驱动器不会从空闲状态“旋转”。

# networking - dev_add_pack 钩子和内存泄漏

> ID：14332415
> 
> 赞同：1
> 
> 时间：2013-01-15T06:45:04.810
> 
> 标签：networking, kernel, kernel-module

我必须写 lkm，它将重新发送所有传入的数据包。是的，我知道 xt_TEE，但必须自己编写。我浏览了一些示例：[http](http://www.phrack.org/archives/55/p55_0x0c_Building%20Into%20The%20Linux%20Network%20Layer_by_lifeline%20&%20kossak.txt) ://www.phrack.org/archives/55/p55_0x0c_Building%20Into%20The%20Linux%20Network%20Layer_by_lifeline%20&%20kossak.txt （相当旧）和[http://www .xakep.ru/post/20794/default.asp?print=true](http://www.xakep.ru/post/20794/default.asp?print=true)（数据包嗅探器）。
然后我写了我的代码：

```
 //INCLUDES//////////////////////////////////////////////////////////////
    #include <linux/ip.h>
    #include <linux/netdevice.h>
    #include <linux/skbuff.h>
    #include <linux/module.h>
    #include <linux/kernel.h>

    //ABOUT/////////////////////////////////////////////////////////////////

    MODULE_AUTHOR("");
    MODULE_DESCRIPTION("");
    MODULE_LICENSE("GPL");
    MODULE_VERSION("0.0.1");

    //DEFINES///////////////////////////////////////////////////////////////

    //SYSCALLS//////////////////////////////////////////////////////////////

    //PROTOTYPES/////////////////////////////////////////////////////////////
    int new_hook_func(struct sk_buff *skb, struct device *dv, struct packet_type *pt);
    void test();
    //GLOBALS///////////////////////////////////////////////////////////////
    static struct packet_type my_packet_type;
    static char *dev = "eth0";
    struct net_dev *d;

    //INIT//////////////////////////////////////////////////////////////////
    static int __init init(void)
    {
        printk(KERN_ALERT "module init\n");
        d = dev_get_by_name(&init_net, dev);
        my_packet_type.type = htons(ETH_P_ALL); 
        my_packet_type.func = new_hook_func;
        my_packet_type.dev = d;
        dev_add_pack(&my_packet_type);
        return 0;
    }

    //EXIT//////////////////////////////////////////////////////////////////
    static void __exit exit(void)
    {
        dev_remove_pack(&my_packet_type);
        printk(KERN_ALERT "module exit");
    }

    ////////////////////////////////////////////////////////////////////////

    module_init(init);
    module_exit(exit);

    ////////////////////////////////////////////////////////////////////////

    //CORE//////////////////////////////////////////////////////////////////

    int new_hook_func(struct sk_buff *skb, struct device *dv, struct packet_type *pt)
    {
        struct iphdr *ip;
        ip = (struct iphdr*)skb_network_header(skb);
        if(skb->pkt_type != PACKET_OUTGOING)
        {
            if(ip->version == 4 && ip->protocol == IPPROTO_ICMP)
            {
                struct sk_buff *my_skb = 0;
                //copy incoming skb
                my_skb = skb_copy_expand(skb, 16, 16, GFP_ATOMIC);
                //get eth header
                    struct ethhdr *eth = eth_hdr(my_skb);
                //push ethernet layer to skb
                    skb_push(my_skb, ETH_HLEN);
                //set packet type to outgoing
                    skb->pkt_type = PACKET_OUTGOING;
                //send skb struct
                    dev_queue_xmit(my_skb);
                //drop all incoming packets
    //          kfree_skb(my_skb);
    //          kfree_skb(skb);
            }
        }
            return NET_RX_DROP;
    } 
```

此代码应该重新发送收到的每个 icmp 数据包。
所以，我面临三个问题：
1）内存泄漏。一些它是如何泄漏的。我试图评论整个钩子函数，只有返回，但内存仍在泄漏。
2）返回代码不起作用。不管我返回什么（NET_RX_DROP/NET_RX_ACCEPT/NF_DROP/NF_ACCEPT/1/0）仍然接收数据包并回答它。
3）mac层的问题。正如您在我的代码中看到的那样，我复制带有扩展的 skb 结构，并且必须在那里推送 14 字节的 mac 层。否则数据包将在没有任何 mac 字节的情况下发送。
我为我糟糕的英语道歉，并请求帮助。

# .net - MonoTouch 应用程序无法构建/部署到 iphone 设备，但它在 iSimulator 上运行良好

> ID：14332416
> 
> 赞同：2
> 
> 时间：2013-01-15T06:45:05.793
> 
> 标签：.net, ios, ios6, xamarin.ios, monodevelop

我正在使用 Monotouch 的 RedLaser 绑定来创建一个扫描条形码的应用程序。它像 iSimulator 上的魅力一样工作得很好，但是当我尝试部署到真实设备时（切换运行环境 Debug|Simulator -> Debug|iPhone），我什至无法构建。

我正在使用 MonoTouch 6.0.8、MonoDevelop 3.0.6、XCode 4.5.2。

另外，我正在使用 iphone 3GS 设备进行部署。该设备正在运行 iOS 6.0，这就是我的应用程序的目标。我在 MonoTouch bugzilla 上发现了一个具有相同错误代码的 bug [，](https://bugzilla.xamarin.com/show_bug.cgi?id=6998)它建议将目标从 6.0 -> 5.1 更改。我做到了，并没有改变任何事情。

我在 Xcode Organizer 上设置、验证和安装了我的配置文件，证书也是如此。我可以看到两者都很好。

构建输出如下，任何帮助将不胜感激。谢谢

> > /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/g++ -miphoneos-version-min=5.1 -gdwarf-2 -arch armv7 -std=c99 -I/Developer/MonoTouch/ SDKs/MonoTouch.iphoneos.sdk/usr/include -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -c /var/folders/_l/0pvrtd6x6qg83sz4_0906b5c0000gn/ T/tmpee06e1f.tmp/main.armv7.m -o /Users/hasnainaltaiar/Dev/Leopard/SVN/trunk/LD6419/Platforms/iOS/Leopard.Delivery.iOS/Leopard.Delivery.iOS/obj/Release/mtouch-缓存/main..armv7.cache.M0wr77LlBANF6vKjGqQvyVnmWEk=.o /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/g++ -miphoneos-version-min=5.1 -gdwarf-2 - arch armv7 -std=c99 -I/Developer/MonoTouch/SDKs/MonoTouch.iphoneos.sdk/usr/include -isysroot /Applications/Xcode。app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -c /var/folders/_l/0pvrtd6x6qg83sz4_0906b5c0000gn/T/tmpee06e1f.tmp/registrar.m -o /Users/hasnainaltaiar/Dev/ Leopard/SVN/trunk/LD6419/Platforms/iOS/Leopard.Delivery.iOS/Leopard.Delivery.iOS/obj/Release/mtouch-cache/registrar.armv7.cache.Zar9bxp0AZNxwVcgrsOMEFHv0k4=.o /Applications/Xcode.app/Contents /Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/g++ -Wl,-no_pie -miphoneos-version-min=5.1 -gdwarf-2 -arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms /iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk /var/folders/_l/0pvrtd6x6qg83sz4_0906b5c0000gn/T/tmpee06e1f.tmp/Mono.Security.dll.armv7.o /var/folders/_l/0pvrtd6x6qg83sz4_0906b5c0000gn/T/tmpee .tmp/Leopard.Domain.dll.armv7。o /var/folders/_l/0pvrtd6x6qg83sz4_0906b5c0000gn/T/tmpee06e1f.tmp/RedLaser.dll.armv7.o /var/folders/_l/0pvrtd6x6qg83sz4_0906b5c0000gn/T/tmpee06e1f.tmp/System.Core.dll.armv7 folders/_l/0pvrtd6x6qg83sz4_0906b5c0000gn/T/tmpee06e1f.tmp/mscorlib.dll.armv7.o /var/folders/_l/0pvrtd6x6qg83sz4_0906b5c0000gn/T/tmpee06e1f.tmp/System.dll.armv7.o /var/folders/_l/0pvrtd6x6qg83sz4_0906b5c0000gn/ T/tmpee06e1f.tmp/monotouch.dll.armv7.o /var/folders/_l/0pvrtd6x6qg83sz4_0906b5c0000gn/T/tmpee06e1f.tmp/LeopardDeliveryiOS.exe.armv7.o /Users/hasnainaltaiar/Dev/Leopard/SVN/trunk/LD6419/平台/iOS/Leopard.Delivery.iOS/Leopard.Delivery.iOS/obj/Release/mtouch-cache/main..armv7.cache.M0wr77LlBANF6vKjGqQvyVnmWEk=.o /Users/hasnainaltaiar/Dev/Leopard/SVN/trunk/LD6419/平台/iOS/Leopard.Delivery.iOS/Leopard.Delivery。iOS/obj/Release/mtouch-cache/registrar.armv7.cache.Zar9bxp0AZNxwVcgrsOMEFHv0k4=.o -o /var/folders/_l/0pvrtd6x6qg83sz4_0906b5c0000gn/T/tmpee06e1f.tmp/LeopardDeliveryiOS -framework CFNetwork -framework Foundation -framework UIKit -framework Audio -framework QuartzCore -framework CoreGraphics -framework AVFoundation -framework CoreMedia -framework CoreVideo -framework OpenGLES -framework Security -framework SystemConfiguration -lz -liconv -u _mono_pmip -u _monotouch_create_managed_ref -u _monotouch_release_managed_ref -u _monotouch_IntPtr_objc_msgSend_IntPtr -u _monotouch_IntPtr_objc_msgSendSuper_IntPtr -u _CloseZStream -u _CreateZStream - u _Flush -u _ReadZStream -u _WriteZStream -lmono-2.0 -lmonotouch -L/Developer/MonoTouch/SDKs/MonoTouch.iphoneos。sdk/usr/lib -lgcc_eh -force_load /var/folders/_l/0pvrtd6x6qg83sz4_0906b5c0000gn/T/tmpee06e1f.tmp/libRedLaserSDK.a 进程以代码 1 退出，命令：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS。平台/开发者/usr/bin/g++ -Wl,-no_pie -miphoneos-version-min=5.1 -gdwarf-2 -arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/ SDKs/iPhoneOS6.0.sdk /var/folders/_l/0pvrtd6x6qg83sz4_0906b5c0000gn/T/tmpee06e1f.tmp/Mono.Security.dll.armv7.o /var/folders/_l/0pvrtd6x6qg83sz4_0906b5c0000gn/T/tmpee06e1f.mp. dll.armv7.o /var/folders/_l/0pvrtd6x6qg83sz4_0906b5c0000gn/T/tmpee06e1f.tmp/RedLaser.dll.armv7.o /var/folders/_l/0pvrtd6x6qg83sz4_0906b5c0000gn/T/tmpee06e1f.tmp/System.Core.dllo /var/folders/_l/0pvrtd6x6qg83sz4_0906b5c0000gn/T/tmpee06e1f.tmp/mscorlib.dll.armv7.o /var/folders/_l/0pvrtd6x6qg83sz4_0906b5c0000gn/T/tmpee06e1f.tmp/System.dll.armv7.o _l/0pvrtd6x6qg83sz4_0906b5c0000gn/T/tmpee06e1f.tmp/monotouch.dll.armv7.o /var/folders/_l/0pvrtd6x6qg83sz4_0906b5c0000gn/T/tmpee06e1f.tmp/LeopardDeliveropard/has.exe.armv7.oev/用户trunk/LD6419/Platforms/iOS/Leopard.Delivery.iOS/Leopard.Delivery.iOS/obj/Release/mtouch-cache/main..armv7.cache.M0wr77LlBANF6vKjGqQvyVnmWEk=.o/Users/hasnainaltaiar/Dev/Leopard/SVN/ trunk/LD6419/Platforms/iOS/Leopard.Delivery.iOS/Leopard.Delivery.iOS/obj/Release/mtouch-cache/registrar.armv7.cache.Zar9bxp0AZNxwVcgrsOMEFHv0k4=.o -o /var/folders/_l/0pvrtd6x6qg83sz4_0906b5c0000gn/T /tmpee06e1f。tmp/LeopardDeliveryiOS -framework CFNetwork -framework Foundation -framework UIKit -framework AudioToolbox -framework QuartzCore -framework CoreGraphics -framework AVFoundation -framework CoreMedia -framework CoreVideo -framework OpenGLES -framework Security -framework SystemConfiguration -lz -liconv -u _mono_pmip -u _monotouch_create_managed_ref - u _monotouch_release_managed_ref -u _monotouch_IntPtr_objc_msgSend_IntPtr -u _monotouch_IntPtr_objc_msgSendSuper_IntPtr -u _CloseZStream -u _CreateZStream -u _Flush -u _ReadZStream -u _WriteZStream -lmono-2.0 -lmonotouch -L/lib-Developer/MonolgTouch-usr/sdk force_load /var/folders/_l/0pvrtd6x6qg83sz4_0906b5c0000gn/T/tmpee06e1f.tmp/libRedLaserSDK.a 架构 armv7 的未定义符号：
> > “_OBJC_CLASS_$_CLLocationManager”，引用自：libRedLaserSDK.a(StatusManager.o) 中的 objc-class-ref ld：未找到架构 armv7 collect2 的符号：ld 返回 1 个退出状态
> 
> 错误 MT5202：本机链接失败。请查看构建日志。
> 
> - - - - - - - - - - - 完毕 - - - - - - - - - - -
> 
> 项目未指定捆绑标识符。生成“leoparddeliveryios”以匹配配置文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T13:00:45.527

从错误消息中：

```
Undefined symbols for architecture armv7: "_OBJC_CLASS_$_CLLocationManager" 
```

似乎该库已更新，现在依赖于`CoreLocation`.

编辑`[LinkWith]`绑定项目中的属性并添加`CoreLocation`到它的`Frameworks`属性，然后重建绑定（然后重建您的应用程序）。如果这解决了问题，那么请提交错误报告，以便可以在 github 存储库中修复它。

**注意：**作为快速测试，您还可以将以下选项添加到项目的调试**和**发布配置中（在 MonoDevelop 中项目选项中的**mtouch 附加参数**中）。

```
-gcc_args="-framework CoreLocation" 
```

这将导致相同的结果 - 除了您需要为您正在使用的每个项目（和配置）复制该修复程序（因此发现问题很有用，但不是修复它的真正好方法）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T01:53:29.223

好的，我解决了问题，但将在此处记录解决方案以分享经验教训。

首先：它无法构建解决方案，因为绑定时属性`CoreLocation`中缺少它。`Frameworks`感谢 poupou 指出这一点，我也在 GitHub（MonoTouch Binding Repo）上修复了它。

第二：MonoDevelop 无法构建应用程序，因为它找不到 Provisioning 配置文件。您需要手动设置您的配置文件和证书。您可以通过转到`Main Project > Options > Build > iPhone Bundle Signing`> 然后选择您的`Configuration (Debug|Release)`和`Platform (iPhone|Simulator)`并为 Identity and Prov 选择您的证书和配置文件来做到这一点。轮廓。

第三：最后，每次我部署到 iPhone 时，应用程序都会崩溃。我提交了上面评论中提到的错误。然后似乎 RedLaser 框架在扫描二维码时存在错误。通过添加以下行禁用此功能，解决了问题。

```
overlayController.ParentPicker.ScanQRCODE = false; 
```

# javascript - d3.partition 冰柱图的层次结构级别标签

> ID：14332418
> 
> 赞同：1
> 
> 时间：2013-01-15T06:45:26.367
> 
> 标签：javascript, d3.js, label, hierarchy

我对 D3 相当陌生，我正在尝试在[此处创建冰柱图](http://mbostock.github.com/d3/talk/20111018/partition.html)的修改版本。我需要在图表上方添加标签以指定层次结构级别名称（不是每个分区的名称，而是代表层次结构级别的列名）。我有一个数组中的名称，并且在绑定实际的分层数据之前尝试将它们添加到图表中，但我似乎无法让标签出现在该图表上方。我不确定是否需要减少图表占用的垂直空间量，或者是否需要移动每个层次结构级别的标签

```
var levels=["LEV 1", "LEV 2", "LEV 3", "LEV 4"];

vis.selectAll("g").append('g') 
      .data(levels).enter()
      .append("text") 
      .attr("dy", ".55em")
      .attr('y', 5)
      .attr('x', function(d,i){ 
        return (i+1)* (w / levels.length) ;})
      .attr('text-anchor', 'start')
      .attr("class", "pHeader") 
      .text(function(d) {  return d; }); 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-12T23:11:50.077

在我看来，您的问题只是在设置绘图区域的大小时留出空间。

本教程应该会有所帮助： [D3 保证金约定](http://bl.ocks.org/mbostock/3019563)

您可能还想查看使用带有序数刻度的 D3 轴来分隔关卡标签。

# powershell - Powershell 环境变量未更新

> ID：14332419
> 
> 赞同：8
> 
> 时间：2013-01-15T06:45:32.827
> 
> 标签：powershell

我有使用`<Environment />`元素更新环境变量的 wix 安装程序。

环境变量值在注册表中更新。但是当我尝试打开 Powershell 时，除非我重新启动我的电脑，否则它看不到任何变化。

有没有人对我为什么/如何以及如何避免重新启动有任何想法。提前谢谢，没有邮件

**更新**：我找到了为什么会这样。事实证明，会话变量会在重新启动或发送系统广播消息时更新。发送广播消息

```
SendMessage (HWND_BROADCAST, WM_SETTINGCHANGE, 0, (LPARAM)"Environment"); 
```

发送消息的另一种肮脏方式是使用`SETX`将新值写入环境变量并更新会话信息的命令

```
SETX something_that_is_not_important value_that_is_not_important 
```

请注意，您仍然需要关闭并打开命令行或 PowerShell 控制台

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-19T00:34:50.923

这几乎可以肯定是因为您的 WIX 文件部分中缺少一个`<WriteEnvironmentStrings>`元素。`<InstallExecuteSequence>`该自定义操作负责发送广播 WM_SETTINGSCHANGE 消息。

这不完全是 WIX 中的错误，而是一个记录不充分的要求。要有效地使用 WIX，您还必须了解 Windows Installer 数据库参考文档，而不仅仅是 XML。在[环境表](http://msdn.microsoft.com/library/aa368369.aspx)的 MSDN 主题中，描述了调用 WriteEnvironmentStrings 和 RemoveEnvironmentStrings 自定义操作的需要，但使用的术语对于没有本机 MSI 背景的人来说可能是陌生的。

显示此内容的文章位于[http://blogs.technet.com/b/alexshev/archive/2008/03/28/from-msi-to-wix-part-13-installable-items-environment-variable.aspx](http://blogs.technet.com/b/alexshev/archive/2008/03/28/from-msi-to-wix-part-13-installable-items-environment-variable.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T09:03:01.470

似乎是一个特定的 wix 问题，请参阅底部的评论：[this page](http://blogs.technet.com/b/alexshev/archive/2008/03/28/from-msi-to-wix-part-13-installable-items-environment-variable.aspx)

# php - 通过zend创建事件

> ID：14332422
> 
> 赞同：1
> 
> 时间：2013-01-15T06:45:43.357
> 
> 标签：php, zend-framework, google-calendar-api

在我的服务器中，我下载并上传了 zend gdata library。然后作为测试，我创建了一个单独的文件夹并检查它是否工作。是的，它起作用了。所以我保持文件夹结构不变，并将文件移到我的应用程序中。然后它给了我这样的错误。即使我尝试了在测试文件夹中使用的相同代码，它也会给我同样的错误。请帮助我。

错误 `Fatal error: Uncaught exception 'Zend_Gdata_App_HttpException' with message 'Expected response code 200, got 400 [Line 1, Column 451, element gd:when] Badly formatted datetime' in /var/www/vhosts/eyepax.info/rsdesign.eyepax.info/emailApp2/Zend/Gdata/App.php:714 Stack trace: #0 /var/www/vhosts/eyepax.info/[host]/emailApp2/Zend/Gdata.php(219): Zend_Gdata_App->performHttpRequest('POST', 'https://www.goo...', Array, 'performHttpRequest('POST', 'https://www.goo...', Array, 'performHttpRequest('POST', 'https://www.goo...', Array, 'performHttpRequest('POST', 'https://www.goo...', Array in /var/www/vhosts/eyepax.info/[host]/emailApp2/Zend/Gdata/App.php on line 714`

如果这是图书馆的问题，请告诉我该怎么办..

在测试文件夹中，我有 2 个文件和名为 Zend 的文件夹...我使用以下代码作为一个类，并使用它的示例代码对其进行测试。它工作正常。我的问题是为什么它在我的应用程序中不起作用？

类= [http://www.phpclasses.org/browse/file/28780.html](http://www.phpclasses.org/browse/file/28780.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:02:24.270

我收到这个错误有几个原因。我的时间偏移不正确。我输入时间的方式也不正确。它应该是 HH:MM:SS 而不是 HH.MM.SS 。希望这可以帮助某人

# ssh - PuTTy 从一台机器而不是从另一台机器连接到服务器

> ID：14332424
> 
> 赞同：-2
> 
> 时间：2013-01-15T06:45:52.980
> 
> 标签：ssh, ftp, putty, winscp

我正在尝试通过putty从Windows m/c通过SSH连接到服务器（linux）。

我可以使用 putty 从我的 m/c 连接到服务器，但是当我尝试从另一台机器上做同样的事情时，我得到一个错误。

所有的配置都是一样的。您能否就可能出现的问题给出一些指示。

**注意：**我可以在两台机器上通过 WinSCP 对同一服务器进行 FTP（端口 21）。只是腻子没有在其他 m/c 上进行 SSH。在我的m/c上很好。

任何方向将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T06:50:39.963

您可以通过 SFTP/SCP 使用 WinSCP 登录吗？如果没有，那么服务器可能会针对该其他机器设置防火墙。或者可能这两台机器以不同的接口连接到服务器，并且 SSH 被配置为只监听其中一台。检查服务器上的防火墙，最好检查客户端上的防火墙。

# java - 在android中解析json

> ID：14332429
> 
> 赞同：0
> 
> 时间：2013-01-15T06:46:38.320
> 
> 标签：java, android, json

> **可能重复：**
> [在 android 中读取 Json 数组](https://stackoverflow.com/questions/4244879/reading-a-json-array-in-android)

我的 json 字符串就像

> String jsonString = "[{"NotificationID":115,"TaskID":129,"Sender":"v...@live.com","NotificatonMessage":"dd","NotificationCategory":"missed"}, {"NotificationID":114,"TaskID":129,"Sender":"v...@live.com","NotificatonMessage":"129","NotificationCategory":"opened"},{"NotificationID": 112,"TaskID":129,"Sender":"v...@live.com","NotificatonMessage":"dd","NotificationCategory":"missed"},{"NotificationID":111,"TaskID" :129,"Sender":"d...@hotmail.com","NotificatonMessage":"您已被分配任务 Bydip_shres@hotmail.com","NotificationCategory":"notify"},{"NotificationID":72,"TaskID":125,"Sender":"d...@yahoo.com","NotificatonMessage":"您已被分配任务 Byd.stha1st@ yahoo.com","NotificationCategory":"notify"}]";

我想将其转换为 jsonobject。我在做这个。。

```
jsonObject = new JSONObject(jsonString); 
```

但它抛出 JSONException ......我怎样才能将这样的字符串转换为 jsonarray ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:52:30.330

你得到了一个数组：

```
JSONArray arr = new JSONArray( jsonString ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T06:55:58.200

你有一个 JSON 数组而不是一个 JSON 对象。

JSON 对象必须在字符 1 处以 { 开头并以 } 结尾，而 JSONArray 文本必须在字符 1 处以 '[' 开头并以 ] 结尾。

您可以使用获取 JSON 数组

```
JSONArray obj = new JSONArray(jsonString); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T06:57:45.107

使用此代码和更多信息`JSONParsing`请参阅此[链接](http://www.jondev.net/articles/Android_JSON_Parser_Example)

它会对你有所帮助`JSON parsing`。

```
 try
    {
        JSONArray jArray = new JSONArray(jsonString);

        for(int i=0;i<jArray.length();i++)
        {
           JSONObject jsonObj = jArray.getJSONObject(i);

           String NotificationID =jsonObj.getString("NotificationID");
           String TaskID=jsonObj.getString("TaskID");
           String Sender=jsonObj.getString("Sender");
           String NotificatonMessage=jsonObj.getString("NotificatonMessage"); 
           String NotificationCategory=jsonObj.getString("NotificationCategory"); 

        }
    }
    catch(JSONException e)
    {
        Log.e("log_tag", "Error parsing data "+e.toString());
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T07:12:06.747

好 ，

```
you need to extract jsonArray directly by 

    JSONArray array=new JSONArray(jsonString); 
```

然后，您可以使用 for 循环或您想要采用的任何方法迭代数组。

# ios - iOS：实例值在方法调用之间发生变化

> ID：14332431
> 
> 赞同：0
> 
> 时间：2013-01-15T06:46:41.900
> 
> 标签：ios, objective-c

我正在尝试实现切换按钮的自定义实现，以便一次只能选择一个。我遇到了一个奇怪的错误，我使用`[[ajdSwitchButton alloc] init]`. 在初始化中，我设置了一个类属性，如下所示`self.currentSelection = 2`。

问题是在`init`第一次调用和第一次调用`IBAction`方法之间，值更改为 0。我不知道为什么。以下是相关代码：

`ajdSwitchButton.h`

```
#import <UIKit/UIKit.h>

@interface ajdSwitchButton : UIView

@property (nonatomic) NSInteger currentSelection;

// Button Outlets
@property (nonatomic, strong) IBOutlet UIButton *buttonOne;
@property (nonatomic, strong) IBOutlet UIButton *buttonTwo;

// Button Actions
- (IBAction)buttonPress:(id)sender;
- (IBAction)buttonPressTwo:(id)sender;

// Instance Methods
- (void)switchButtonState:(UIButton *)button;

@end 
```

`ajdSwitchButton.m`

```
#import "ajdSwitchButton.h"

@implementation ajdSwitchButton

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        _currentSelection = 2;
    }
    return self;
}

// Handles button press actions for buttonOne
- (IBAction)buttonPress:(id)sender {
    NSLog(@"%@", self);
    // Y button pressed
    if (self.currentSelection == 2) {
        // No button is selected
        // Highlight and select buttonOne
        [self performSelector:@selector(switchButtonState:) withObject:self.buttonOne afterDelay:0.0];
    } else if (self.currentSelection == 1) {
        // No was previously selected
        // Unselect NO and select YES
        [self performSelector:@selector(switchButtonState:) withObject:self.buttonTwo afterDelay:0.0];
        [self performSelector:@selector(switchButtonState:) withObject:self.buttonOne afterDelay:0.0];
    } else {
    // Y button already pressed
    [self performSelector:@selector(switchButtonState:) withObject:self.buttonOne afterDelay:0.0];
    }
    self.currentSelection = 0;
}

- (IBAction)buttonPressTwo:(id)sender {
    // N button pressed
    NSLog(@"%i", self.currentSelection);
    if (self.currentSelection == 2) {
        // No button is selected
        // Highlight and select buttonOne
    [self performSelector:@selector(switchButtonState:) withObject:self.buttonTwo afterDelay:0.0];
} else if (self.currentSelection == 0) {
        // Yes was previously selected
        // Unselect YES and select NO
        [self performSelector:@selector(switchButtonState:) withObject:self.buttonTwo afterDelay:0.0];
        [self performSelector:@selector(switchButtonState:) withObject:self.buttonOne afterDelay:0.0];
    } else {
        // N button already pressed
        [self performSelector:@selector(switchButtonState:) withObject:self.buttonTwo afterDelay:0.0];
    }
    self.currentSelection = 1;
}

// Switches the look and state of the button
- (void)switchButtonState:(UIButton *)button {
    if (!button.selected) {
        button.highlighted = YES;
        button.selected = YES;
    } else {
        button.highlighted = NO;
        button.selected = NO;
    }
}
@end 
```

我将的实例链接`ajdSwitchButton`到. 任何帮助将不胜感激。`IBOutlet``ViewController`

`init`编辑：我粘贴了一些 NSLogs 以在调用该`IBAction`方法后直接检查对象的内存值。这是之前和之后：

`<ajdSwitchButton: 0x746d2e0; frame = (0 0; 0 0); layer = <CALayer: 0x7472c40>>`

`<ajdSwitchButton: 0x7471b10; frame = (77 232; 180 83); autoresize = TM+BM; layer = <CALayer: 0x7471bf0>>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:07:26.487

IBOutlets 通过initWithCoder:(NSCoder)aDecoder init，所以需要实现这个方法。

```
- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {
        // Initialization code
        _currentSelection = 2;
    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:50:57.770

您正在代码中执行此操作...

这可能是一个愚蠢的错误，或者您需要它..请检查您的代码：

```
- (IBAction)buttonPress:(id)sender {
    NSLog(@"%@", self);
    // Y button pressed
    if (self.currentSelection == 2) {
        // No button is selected
        // Highlight and select buttonOne
        [self performSelector:@selector(switchButtonState:) withObject:self.buttonOne afterDelay:0.0];
    } else if (self.currentSelection == 1) {
        // No was previously selected
        // Unselect NO and select YES
        [self performSelector:@selector(switchButtonState:) withObject:self.buttonTwo afterDelay:0.0];
        [self performSelector:@selector(switchButtonState:) withObject:self.buttonOne afterDelay:0.0];
    } else {
    // Y button already pressed
    [self performSelector:@selector(switchButtonState:) withObject:self.buttonOne afterDelay:0.0];
    }

    /*  SEE HERE */

    self.currentSelection = 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T08:03:30.840

问题在于你的问题本身。

您正在初始化变量：

```
- (id)initWithFrame:(CGRect)frame
{
} 
```

您已经提到您正在使用创建对象`[[ajdSwitchButton alloc] init]`。

您`init`不是在调用`initWithFrame`，因此变量永远不会被初始化。所以实现一个函数，如：

```
- (id)init
{
    self = [super init];
    if (self) {
        // Initialization code
        _currentSelection = 2;
    }
    return self;
} 
```

# android - 如何知道我们的应用程序已在 android 中进入后台

> ID：14332437
> 
> 赞同：0
> 
> 时间：2013-01-15T06:47:00.910
> 
> 标签：android, android-activity, android-service

当用户从我的应用程序转到其他应用程序或从我的应用程序等按下设备主页按钮时，我的应用程序将被发送到后台。在后台我正在做一些事情。那么如何知道我的应用程序已经进入后台。一种解决方案是检查是否有任何应用程序活动处于 onstart、onrestart、onresume、onpause、onstop 如果没有，那么我们可以在后台考虑它。但是这个解决方案很乏味，如果你有一个简单的解决方案，请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:15:03.387

使用`onPause`并不乏味，并且可能是您唯一的解决方案。创建一个`Activity`所有`Activity`类都扩展的抽象类，并在其中做任何你需要做的事情`onPause`：

```
public abstract class BaseActivity extends Activity {

    @Override
    public void onPause() {

        super.onPause();
        // Do whatever you need to do in onPause here
    }
} 
```

使用这个例子，你所有的`Activity`类现在都应该扩展`BaseActivity`.

# python - SQL在python中比较日期

> ID：14332440
> 
> 赞同：0
> 
> 时间：2013-01-15T06:47:14.380
> 
> 标签：python, mysql, sql, date-comparison

我需要将用户输入日期`kakko`（yyyy-mm-dd 格式）与表 productinfo 中的 CreateDate 和 UpdateDate 进行比较并返回结果。

这不起作用。

```
cur.execute("SELECT * FROM `productinfo` WHERE CreateDate > %s-%s-%s AND CreateDate <= (SELECT MAX( UpdateDate ) FROM productinfo) AND Updatedate = (SELECT MAX( UpdateDate ) FROM productinfo) ",kakko)
db.commit() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:53:32.003

试试下面的代码

```
sql ='SELECT 
    *
    FROM
        productinfo
    WHERE
        CreateDate > ? AND CreateDate <= (SELECT 
                MAX(UpdateDate)
            FROM
                productinfo) AND Updatedate = (SELECT 
                MAX(UpdateDate)
            FROM
                productinfo)';
cur.execute(sql,kakko)
db.commit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:47:18.203

```
cur.execute("SELECT * FROM `productinfo` WHERE CreateDate > '%s'" %(kakko,))
result = cur.fetchall() 
```

works!

# android - 完成当前活动并开始一个新活动

> ID：14332441
> 
> 赞同：2
> 
> 时间：2013-01-15T06:47:14.780
> 
> 标签：android

我有一个片段 F。从服务获取结果后，F 需要完成它所在的活动并在 Web 浏览器中启动一个页面，我使用 Intent 执行该页面。

如果用户按下后退按钮，它似乎工作正常。但是，如果他从最近的应用程序启动该应用程序，则该活动尚未完成。我已经考虑过其他方法。就像完成当前活动并从父活动打开页面一样。但是我必须对流程进行很多更改。所以这将是我最后的选择。有什么方法可以确保即使我从最近的应用程序启动该活动也已完成？

```
Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse(url));
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent);
getActivity().finish(); 
```

编辑：添加代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T06:50:05.557

尝试使用此代码启动浏览器并清除应用程序的所有堆栈

```
Intent intent  = new Intent(); // need to set your Intent View here
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);        
getActivity().startActivity(intent);
getActivity().finish(); 
```

**更新**

在 AndroidManifiest.xml 文件中的活动中尝试此属性

```
<activity android:name=".MainActivity"
        android:excludeFromRecents="true" ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T11:07:56.417

使用以下代码

```
Intent intent = new Intent(getApplicationContext(), Home.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

startActivity(intent);

this.finish(); 
```

# joomla2.5 - Joomla 2.5 面包屑总是只显示“家”

> ID：14332444
> 
> 赞同：0
> 
> 时间：2013-01-15T06:47:50.477
> 
> 标签：joomla2.5

我有一个 Joomla 2.5 站点多语言站点。但是面包屑有问题。它始终只显示主页。

我在没有启用多语言功能的情况下设置了 joomla 本地副本，然后面包屑工作正常。所以我怀疑多语言功能会是问题所在。我该如何解决这个问题？

非常感谢您..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:09:18.523

我整理了一下。在我的网站主菜单中也有西班牙等价菜单。默认主页菜单项设置为英文菜单主页。所以我创建了另一个菜单，没有分配任何位置 .created 菜单项并将其设置为默认主页。

然后它在索引页面中给了我 404，因为默认主页设置为无处。然后我选择了我的主菜单（英文）并单击主菜单项上的“设为默认主页”方块。然后英国国旗出现了。

现在面包屑工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:15:00.430

这个问题有不同的可能原因，但我会首先尝试禁用面包屑模块​​的缓存：

扩展 -> 模块管理器 -> 面包屑 -> 高级选项 -> 缓存 -> 无

# asp.net - 如何在我的 ASP.net 网站中使用 CSS 模板

> ID：14332447
> 
> 赞同：0
> 
> 时间：2013-01-15T06:47:58.637
> 
> 标签：asp.net

Hiii我在win 7上使用asp.net visual studio-2010 framework 3.5。我已经下载了用css设计的现成模板。我复制了index.html代码并将其粘贴到masterpage中，还复制了div内容的代码并将其粘贴到内容占位符。它正在工作。我想添加另一个页面，例如 about.html，sevice.html 等。请帮助我添加另一个页面的程序，谢谢.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:13:44.003

只需转到添加新项目-> 网络表单并选中选择母版页复选框以选择您现有的母版页。

# c# - 合并两个数据集并显示在一个网格视图中

> ID：14332449
> 
> 赞同：0
> 
> 时间：2013-01-15T06:48:08.897
> 
> 标签：c#, sql-server-2008, ms-access, gridview

我有两个独立的数据库，我想从中检索数据并在一个网格视图中显示。我遇到的困难是我只有一个数据库中的表中有一个产品密钥，并且与另一个数据库中的实际产品产品相同的产品密钥集，现在我想在一个网格视图中显示产品数据.. ..如果这是有道理的。

我该如何做到这一点，合并数据并将产品数据再次显示在一个网格中的键上。

```
string connString = "Data Source=.\\SQLEXPRESS;Initial Catalog=LRVWebsite;user ID=sa;password=lrmg;";
SqlConnection sqlCon;
OleDbConnection conn;

DataSet setOleDb;
DataSet dsSql;
private void bindData()
{
    try
    {
        conn = new OleDbConnection(@"Provider=Microsoft.Jet.OleDb.4.0;
                                Data Source =" + Server.MapPath("App_Data\\LR Product Database 2000.mdb"));
        conn.Open();

        setOleDb = new DataSet();
        OleDbDataAdapter dbaOle = new OleDbDataAdapter("SELECT * FROM tblProducts", conn);

        dbaOle.Fill(setOleDb);
        sqlCon = new SqlConnection(ConfigurationManager.ConnectionStrings["LRVWebsite"].ToString());
        sqlCon.Open();
        dsSql = new DataSet();

        SqlDataAdapter dba = new SqlDataAdapter(@"SELECT C.CustomerFirstName,C.CustomerLastName, C.CustomerCompany,C.CustomerPosition,C.CustomerCountry,C.CustomerProvince,C.CustomerContact,CP.ActionDate,CP.ProductCode,CP.CustomerEmail FROM tblCustomers C INNER JOIN tblCustomerProducts CP ON C.CustomerEmail = CP.CustomerEmail ORDER BY ActionDate DESC", connString);
        //@"SELECT C.CustomerFirstName,C.CustomerLastName,C.CustomerCompany,C.CustomerPosition,C.CustomerCountry,C.CustomerProvince,C.CustomerContact,CP.ActionDate,CP.ProductCode,CP.CustomerEmail FROM tblCustomers C INNER JOIN tblCustomerProducts CP ON C.CustomerEmail = CP.CustomerEmail ORDER BY ActionDate DESC", connString);
        dba.Fill(dsSql);

        dsSql.Merge(setOleDb);

        GridView1.DataSource = dsSql;
        GridView1.DataBind();

        sqlCon.Close(); 
```

这是我尝试过的。现在，我怎样才能让产品密钥与包含相同产品密钥的另一个表中的实际产品相关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:19:25.873

我认为这是一个普遍面临的情况。这是来自msdn的详细链接。

[合并数据集内容](http://msdn.microsoft.com/en-us/library/aszytsd8.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T03:06:45.190

据我了解，您在一个数据库中有 2 个表，在另一个数据库中有一个表，您希望将所有这些数据集组合在一起并将其显示为一个。

如果我是正确的，那么您可以跨数据库进行连接；

```
select * from dbo.firstdatabasetable db1
inner join apple.primarykeys db2
on db2.primary = db1.primary
inner join orange.seconddatabase db3
on db2.productname = db3.productname 
```

如果数据库托管在网络上的不同机器上，那么您可以找到数据库服务器`select sys.servers`

假设第一个服务器是 x，第二个服务器是 y

然后;

```
select * from x.dbo.firstdatabasetable db1
inner join x.dbo.primarykeys db2
on db2.primary = db1.primary
inner join y.dbo.seconddatabase db3
on db2.productname = db3.productname
inner join x.dbo.primarykeys 
```

# python - 如何在 ubuntu 10.04 中为 django 框架安装 libmemcached

> ID：14332451
> 
> 赞同：5
> 
> 时间：2013-01-15T06:48:22.790
> 
> 标签：python, django, libmemcached

我安装了 libmemcached 0,37 和 ln -s /usr/local/lib/libmemcached.so.2 /usr/lib/libmemcached.so.2

但是当我运行 manage.py 它仍然返回
import _pylibmc RuntimeError: pylibmc requires >= libmemcached 0.32, was compiled with 0.31

我尝试安装较新的 libmemcached，但他们没有文件 libmemcached.so.2

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-15T07:11:04.523

您只需要在安装之前安装这些依赖项`pylibmc`

```
sudo apt-get install -y libmemcached-dev zlib1g-dev libssl-dev python-dev build-essential

pip install pylibmc 
```

[这](https://gist.github.com/2203961)是 Github 上的要点，可以帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:58:20.937

You should install `python-memcached`

You can install like this,

```
sudo pip install python-memcached 
```

OR

```
sudo apt-get install python-memcache 
```

python2.7-dev if not installed, you have to install like this,

```
sudo apt-get install python2.7-dev 
```

# javascript - 使用Jquery动态删除添加表行但无法保存变量值

> ID：14332453
> 
> 赞同：2
> 
> 时间：2013-01-15T06:48:31.257
> 
> 标签：javascript, jquery

我在 button.click 事件上动态添加表格行。

如果我使用此代码删除行不起作用。

```
var count = 1;
$('button[id^="product"]').click(function () {
//adding row to table : WORKING FINE

count++;         
});

$(".del_row").click(function() {
//removing row // NOT WORKING
count--;
}); 
```

如果我尝试代码 bwloe。它正在工作，但计数回到 0；和 - 在第二次点击:(

```
$('button[id^="product"]').click(function () {
//adding row to table : WORKING FINE
count++;
$(".del_row").click(function() {
//removing row 
count--;
});     

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T06:50:10.120

```
$("#TABLE_ID").on("click", ".del_row", function() {
   //remove row here
   count--;
}); 
```

# android - Android 将日期添加到日历

> ID：14332455
> 
> 赞同：0
> 
> 时间：2013-01-15T06:48:40.737
> 
> 标签：android, calendar

我使用以下代码将字符串“2013 年 2 月 11 日星期一 08:00:00 CST”转换为日期

```
java.util.Date d=null;
    try {
         d= new SimpleDateFormat("EEE, dd MMM yyyy hh:mm:ss z").parse("date");
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

如何将此日期添加到日历中作为开始时间以及与开始时间相差 30 分钟的结束时间。我还想制作一个弹出表来输入其他详细信息。它应该与所有 android 版本兼容。谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:25:11.640

我知道这可能不是您想要的直接答案，但我最近一直在处理时间/日期操作，并且我安装了 Joda-time API。它更容易控制。

[http://joda-time.sourceforge.net/](http://joda-time.sourceforge.net/)

# opengl - depth_clamp 和 depth_test 的执行顺序

> ID：14332458
> 
> 赞同：1
> 
> 时间：2013-01-15T06:48:42.210
> 
> 标签：opengl, opengl-3, depth-testing

深度钳是在深度测试之前还是深度测试之后发生的？我正在渲染一个坐标 > 1.0 和 <-1.0 的基元，并使用深度钳位和深度测试。但是当我启用深度测试时，它不会渲染任何几何图形。

这是我的代码：

```
GLfloat vertices[]=
    {
0.5f,0.5f,0.5f,                                   
-0.5f,0.5f,0.5f,
-0.5f,-0.5f,0.5f,
0.5f,-0.5f,0.5f,

0.5f,-0.5f,-0.5f,
-0.5f,-0.5f,-0.5f,
-0.5f,0.5f,-0.5f,
0.5f,0.5f,-0.5f  
}

for(int i=0;i<24;i++)
    vertices[3*i+2]*=25;

    glEnable(GL_DEPTH_CLAMP);

        // when i comment stmt below, it draws triangle strips
        glEnable(GL_DEPTH_TEST); 
        glClearDepth(15.0f);
        glClearColor (1.0, 0.0, 0.0, 1.0);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); 
        glDrawArrays(GL_TRIANGLE_STRIP,0,6); 
```

如何同时使用深度测试和夹紧？

为什么上面的代码在启用深度测试的情况下没有在屏幕上绘制任何东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T06:57:24.917

从 OpenGL 4.3、17.3.6 开始：

> 如果启用了深度钳制（参见第 13.5 节），在比较传入片段的 z [w]之前，z [w]被钳制在 [min(n; f ); 范围内。最大值(n; f)]

* * *

> 我假设默认情况下它是 GL_LEQUAL。

这就是为什么当您不知道发生了什么时，您应该发布完整的工作示例。默认深度测试是`GL_LESS`. 1.0 不小于 1.0，因此所有`0.5`深度顶点都未通过深度测试。

另外，你的循环：

```
vertices[3*i+2]*=25 
```

这是覆盖内存。您的索引远离数组的末尾，因为它只有 24 个元素。您可能打算循环 8。

# android - 4 mb 数据库文件未从 android 的 assets 文件夹复制到模拟器中

> ID：14332461
> 
> 赞同：1
> 
> 时间：2013-01-15T06:48:46.613
> 
> 标签：android

****我的日志猫是****

```
01-15 12:09:51.045: D/dalvikvm(14727): Debugger has detached; object registry had 1 entries
01-15 12:09:51.514: I/Database(14733): sqlite returned: error code = 14, msg = cannot open file at source line 25467
01-15 12:09:51.514: E/Database(14733): sqlite3_open_v2("/data/data/com.android.database/databases/mydb.db", &handle, 1, NULL) failed
01-15 12:09:51.614: D/asset(14733): Data exceeds UNCOMPRESS_DATA_MAX (3521536 vs 1048576)
01-15 12:09:51.614: D/AndroidRuntime(14733): Shutting down VM
01-15 12:09:51.614: W/dalvikvm(14733): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
01-15 12:09:51.626: E/AndroidRuntime(14733): FATAL EXCEPTION: main
01-15 12:09:51.626: E/AndroidRuntime(14733): java.lang.Error: Error copying database
01-15 12:09:51.626: E/AndroidRuntime(14733):    at com.android.database.DataBaseHelperSqlFromFile.createDataBase(DataBaseHelperSqlFromFile.java:55)
01-15 12:09:51.626: E/AndroidRuntime(14733):    at com.android.database.Assets.onCreate(Assets.java:19)
01-15 12:09:51.626: E/AndroidRuntime(14733):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-15 12:09:51.626: E/AndroidRuntime(14733):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
01-15 12:09:51.626: E/AndroidRuntime(14733):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
01-15 12:09:51.626: E/AndroidRuntime(14733):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-15 12:09:51.626: E/AndroidRuntime(14733):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-15 12:09:51.626: E/AndroidRuntime(14733):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-15 12:09:51.626: E/AndroidRuntime(14733):    at android.os.Looper.loop(Looper.java:123)
01-15 12:09:51.626: E/AndroidRuntime(14733):    at android.app.ActivityThread.main(ActivityThread.java:4627)
01-15 12:09:51.626: E/AndroidRuntime(14733):    at java.lang.reflect.Method.invokeNative(Native Method)
01-15 12:09:51.626: E/AndroidRuntime(14733):    at java.lang.reflect.Method.invoke(Method.java:521)
01-15 12:09:51.626: E/AndroidRuntime(14733):    at 
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-15 12:09:51.626: E/AndroidRuntime(14733):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-15 12:09:51.626: E/AndroidRuntime(14733):    at dalvik.system.NativeStart.main(Native Method)
01-15 12:09:51.626: W/ActivityManager(59):   Force finishing activity com.android.database/.Assets
01-15 12:09:52.134: W/ActivityManager(59): Activity pause timeout for HistoryRecord{4508d118 com.android.database/.Assets}
01-15 12:09:57.744: D/dalvikvm(185): GC_EXPLICIT freed 151 objects / 11088 bytes in 103ms
01-15 12:10:02.285: W/ActivityManager(59): Activity destroy timeout for HistoryRecord{4508d118 com.android.database/.Assets}
01-15 12:10:05.225: D/dalvikvm(270): GC_EXPLICIT freed 46 objects / 2176 bytes in 158ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:02:18.160

尝试将 mp3 扩展名添加到您保留在资产中的 db 文件名中，例如 /assets/db.mp3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:57:21.140

资产文件夹中的文件大小有限制。将目标文件移动到原始文件夹或阅读[这篇文章](https://stackoverflow.com/questions/2860157/load-files-bigger-than-1m-from-assets-folder)并将您的文件分成几块。

# java - 永远不会调用数据库 onUpgrade 方法

> ID：14332462
> 
> 赞同：1
> 
> 时间：2013-01-15T06:48:52.600
> 
> 标签：java, android, sqlite

我正在尝试将我的数据库从版本 1 升级到版本 2。我正在分配`DATABASE_VERSION = 2`（也分配了第一个版本）但`onUpgrade`从未调用过。可能代码中存在明显错误，但我看不到它，因为我试图解决这个问题很长时间。

这是数据库助手类的代码：

```
public class DatabaseHelper extends SQLiteOpenHelper {

    private static final int DATABASE_VERSION = 2;
    public static String DB_PATH;
    public static String DB_NAME = "db.sqlite3";
    public SQLiteDatabase database;
    public final Context context;

    public DatabaseHelper(Context context) {
        super(context, DB_NAME, null, DATABASE_VERSION);
        this.context = context;

        File direct = new File(Environment.getExternalStorageDirectory()
                + "/.test");
        if (!direct.exists()) {
            if (direct.mkdir())
                ;
        }
        DB_PATH = Environment.getExternalStorageDirectory().getPath()
                + "/.test/";
    }

    public void createDataBase() {
        boolean dbExist = checkDataBase();
        if (!dbExist) {
            try {
                copyDataBase();
            } catch (IOException e) {
                Log.e(this.getClass().toString(), "Copying error");
                throw new Error("Error copying database!");
            }
        }
    }

    private boolean checkDataBase() {
        SQLiteDatabase checkDb = null;
        try {
            String path = DB_PATH + DB_NAME;
            checkDb = SQLiteDatabase.openDatabase(path, null,
                    SQLiteDatabase.OPEN_READONLY);
        } catch (SQLException e) {
            Log.e(this.getClass().toString(), "Error while checking db");
        }
        if (checkDb != null) {
            checkDb.close();
        }
        return checkDb != null;
    }

    private void copyDataBase() throws IOException {
        InputStream externalDbStream = context.getAssets().open(
                "databases/" + DB_NAME);
        String outFileName = DB_PATH + DB_NAME;
        OutputStream localDbStream = new FileOutputStream(outFileName);

        byte[] buffer = new byte[1024];
        int bytesRead;
        while ((bytesRead = externalDbStream.read(buffer)) > 0) {
            localDbStream.write(buffer, 0, bytesRead);
        }
        localDbStream.close();
        externalDbStream.close();
    }

    public SQLiteDatabase openDataBase() throws SQLException {
        String path = DB_PATH + DB_NAME;
        if (database == null) {
            createDataBase();
            database = SQLiteDatabase.openDatabase(path, null,
                    SQLiteDatabase.OPEN_READONLY);
        }
        return database;
    }

    // some unimportant methods

@Override
    public void onCreate(SQLiteDatabase db) {
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w("myLogs", " --- onUpgrade database --- ");
    } 
```

在活动中，我这样调用数据库：

```
DatabaseHelper dbOpenHelper = new DatabaseHelper(this);
SQLiteDatabase database = dbOpenHelper.openDataBase(); 
```

我的错误在哪里？请帮忙。

**UPD：** `database.getVersion()`返回 0

* * *

更新`openDataBase()`的方法（它的工作）：

```
public SQLiteDatabase openDataBase() throws SQLException {
    String path = DB_PATH + DB_NAME;
    if (database == null) {
        createDataBase();
        database = SQLiteDatabase.openDatabase(path, null,
            SQLiteDatabase.OPEN_READWRITE);
        this.getWritableDatabase();
    }
    return database;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T07:14:11.520

本地数据库版本将始终为 0 并且`onUpgrade`不会被调用，因为您从未调用过`getWritableDatabase/getReadableDatabase`，这将碰撞版本并返回本地数据库。

所以你需要：

1.  `getReadableDatabase();`在你的constructor/oncreate中调用，只是为了触发进程，以防数据库版本被改变
    或
2.  手动检查 sdcard 版本，`db.getVersion();`与当前版本进行比较 - `DATABASE_VERSION`. 做任何你需要做的事情——升级或降级。

# c# - 属性值的容器

> ID：14332463
> 
> 赞同：1
> 
> 时间：2013-01-15T06:48:52.400
> 
> 标签：c#, .net

当 .NET 4.5 发布时，我开始使用 .NET 等出色的属性`CallerMemberName`。代码更容易理解，开发人员也可以更快地编写代码。它就像一个片段，不仅仅是用于调试/测试目的的功能。

所以我有一个问题。创建和使用这样的东西是否正常？

```
public class PropertyStore
{
    Dictionary<string, object> data = new Dictionary<string,object>();
    ViewModelBase modelBase;

    internal PropertyStore(ViewModelBase _base)
    {
        modelBase = _base;
    }

    public void SetValue<T>(T value = default(T), [CallerMemberName] string prop = "")
    {
        T prev = GetValue<T>(prop);
        if ((prev == null && value == null) || (prev != null && prev.Equals(value))) return;
        data[prop] = value;
        modelBase.OnPropertyChanged(prop);
    }

    public T GetValue<T>([CallerMemberName] string prop = "")
    {
        if (!data.ContainsKey(prop))
            data[prop] = default(T);
        return (T)data[prop];
    }
} 
```

类助手，使其他类更具可读性，而且我们有我们的属性列表，无需使用反射。用法是：

```
public class SampleClass : ViewModelBase
{
    PropertyStore PropertyStore;

    public SampleClass ()
    {
        PropertyStore = new PropertyStore(this);
    }

    public string Key
    {
        get { return PropertyStore.GetValue<string>(); }
        set { PropertyStore.SetValue(value); }
    }
    public DateTime Date
    {
        get { return PropertyStore.GetValue<DateTime>(); }
        set { PropertyStore.SetValue(value); }
    }
    public bool IsSelected
    {
        get { return PropertyStore.GetValue<bool>(); }
        set { PropertyStore.SetValue(value); }
    }
} 
```

这里的类`ViewModelBase`只是实现了`INotifyPropertyChanged`接口。

据我了解，这种方法类似于 Microsoft Dependency Properties，但我不需要`DependencyObject`类的所有功能，也不想继承它。有了这样的东西我可以使用Binding，因为它足以实现`INotifyPropertyChanged`，而且我们没有字段（对于我来说，我尝试使用属性更聪明，而不是直接使用字段（但是，直接使用没有问题`Dictionary`^_^） )

对不起我的英语不好......不是主要语言，也没有太多练习。

另一个示例（将方法移至基类之后）

```
public class SampleClass : ViewModelBase
{
    public string Key
    {
        get { return GetValue<string>(); }
        set { SetValue(value); }
    }
    public DateTime Date
    {
        get { return GetValue<DateTime>(); }
        set { SetValue(value); }
    }
    public bool IsSelected
    {
        get { return GetValue<bool>(); }
        set { SetValue(value); }
    }
} 
```

与 Microsoft 的 WPF 属性系统没有区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:51:05.337

您将获得的唯一功能是能够通过 Dictionary.Get|Set 方法访问属性值。

您可以通过基于字段的 INotifyPropertyChanged 实现来获得此功能。您可以使用字典通过其名称访问属性值，使用属性名称到预编译的委托映射，就像在[Yappi](http://yappi.codeplex.com/SourceControl/changeset/view/17477#86395)项目中所做的那样。

```
var dateValue= Property<SampleClass>.Get<DateTime>(this,"Date");
Property<SampleClass>.Set<DateTime>(this,"Date",DateTime.Now); 
```

两者都可以重写为扩展方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:51:19.900

好主意，没有反射的属性包，它甚至可以用于混淆。

我看不出它有什么大问题，但你可以考虑以下几点：

1.  prop 参数是可选的，因此在调用中给定一个值可能会引入错误。
2.  值类型将被装箱。
3.  访问这些字段的成本相对较高，可能是一个更昂贵的因素，因为您在简单的获取中拥有更多代码（尤其是使用装箱）。
4.  字典占用的空间比您保留的属性数量要多（尤其是装箱）。
5.  每个属性还存储增加开销的属性名称字符串。

# facebook-like - 为什么相同 URL 的 Facebook 点赞数会发生变化？

> ID：14332465
> 
> 赞同：0
> 
> 时间：2013-01-15T06:48:53.927
> 
> 标签：facebook-like

我已将我的网站从 Joomla 迁移到 RubyOnRails，但是，我注意到在同一个 URL 上的点赞数发生了变化！

旧网站是780左右，新网站变成35

这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:11:02.557

最可能的原因是 URL 不完全相同。很可能是由于 URL 末尾的查询字符串。

如果您确定不是这样，请检查调用 facebook like 按钮的来源是否相同。

这是一个长镜头，但如果它仍然没有修复，您可能需要比较 head 标签内的元数据并在那里寻找差异。

```
<link rel="canonical" href="http://my.website.com" /> 
```

会是一个浮现在脑海中的。

# python - 创建一个新按钮来改变新学生的状态

> ID：14332466
> 
> 赞同：0
> 
> 时间：2013-01-15T06:48:57.540
> 
> 标签：python, openerp

我在创建新按钮以更改新学生的状态时遇到问题。

首先，我创建了一个 XML 文件：

```
...
<record model="ir.ui.view" id="student_form">
<field name="name">sim.student.form</field>
<field name="model">sim.student</field>
<field name="type">form</field>
<field name="arch" type="xml">
<form string="Student">
<field name="name"/>
<field name="student_name"/>
<field name="father_name"/>
<field name="gender"/>
<field name="contact_no"/>
<button name="setuju" states="draft" string="Approve" type="object"/>
</form>
</field>
</record>
... 
```

接下来我创建了一个 Python 文件：

```
from osv import fields, osv
import time
import netsvc
import pooler

class sim_student(osv.osv):
    _name = "sim.student"
    _description = "Data Siswa"

    def setuju(self, cr, uid, ids, context=None):
        workflow = netsvc.LocalService('workflow')

        for name in ids:
            workflow.trg_create(uid, self._name, name, cr)

        return self.write(cr, uid, ids, {'state': 'confirmed'}, context=context)

    _columns = {
        'name': fields.char('Registration Number',size=256,required=True),
        'student_name': fields.char('Student Name',size=256,required=True),
        'father_name': fields.char('Father Name',size=256),
        'gender':fields.selection([('male','Male'),('female','Female')],'Gender'),
        'contact_no':fields.char('Contact Number',size=256),
        'state': fields.selection([('new', 'New'), \
                                    ('confirmed', 'Received'), \
                                    ('cancelled', 'Cancelled')], \
                                'Status', readonly=True, select=True)
    }

sim_student() 
```

然后我创建了一个**init** .py 文件：

```
import sim 
```

最后我创建了一个**openerp** .py 文件：

```
{
'name': 'Student Information Management',
'version': '0.1',
'category': 'Tools',
'description': """Data Siswa.""",
'author': 'Wasis Lukito',
'summary': 'Test, Test, dan Test',
'website': 'http://wasis.wordpress.com/',
'depends': ['base'],
#'init_xml': [],
#'update_xml': ['sim_view.xml'],
#'demo_xml': [],
#'installable': True,
'data': ['sim_view.xml',],
'css':['static/src/css/lunch.css'],
'demo': [],
'installable': True,
'application' : True,
'certificate' : '001292377792581874189',
'images': [],
} 
```

但是，当我执行代码时，它产生了以下错误消息：

```
No handler found. 
```

这是来自控制台的错误：

```
C:\Program Files\OpenERP 7.0alpha-20121206-000102\Server\server\.\pytz\tzinfo.py
:5: DeprecationWarning: the sets module is deprecated
ERROR: couldn't create the logfile directory. Logging to the standard output.
2013-01-15 15:21:39,977 2136 ←[1;32m←[1;49mINFO←[0m ? openerp: OpenERP version 7
.0alpha-20121206-000102
2013-01-15 15:21:39,994 2136 ←[1;32m←[1;49mINFO←[0m ? openerp: addons paths: C:\
Program Files\OpenERP 7.0alpha-20121206-000102\Server\server\openerp\addons
2013-01-15 15:21:40,023 2136 ←[1;32m←[1;49mINFO←[0m ? openerp: database hostname
: localhost
2013-01-15 15:21:40,039 2136 ←[1;32m←[1;49mINFO←[0m ? openerp: database port: 54
32
2013-01-15 15:21:40,055 2136 ←[1;32m←[1;49mINFO←[0m ? openerp: database user: op
enpg
ERROR: couldn't create the logfile directory. Logging to the standard output.
2013-01-15 15:21:40,799 2136 ←[1;33m←[1;49mWARNING←[0m ? openerp.addons.google_d
ocs.google_docs: Please install latest gdata-python-client from http://code.goog
le.com/p/gdata-python-client/downloads/list
2013-01-15 15:21:41,548 2136 ←[1;37m←[1;41mCRITICAL←[0m ? openerp.modules.module
: Couldn't load module web
2013-01-15 15:21:41,568 2136 ←[1;37m←[1;41mCRITICAL←[0m ? openerp.modules.module
: unexpected indent (sim.py, line 10)
2013-01-15 15:21:41,585 2136 ←[1;31m←[1;49mERROR←[0m ? openerp.service: Failed t
o load server-wide module `web`.
The `web` module is provided by the addons found in the `openerp-web` project.
Maybe you forgot to add those addons in your addons_path configuration.
Traceback (most recent call last):
  File "C:\Program Files\OpenERP 7.0alpha-20121206-000102\Server\server\.\opener
p\service\__init__.py", line 53, in load_server_wide_modules
  File "C:\Program Files\OpenERP 7.0alpha-20121206-000102\Server\server\.\opener
p\modules\module.py", line 414, in load_openerp_module
  File "C:\Program Files\OpenERP 7.0alpha-20121206-000102\Server\server\openerp\
addons\web\http.py", line 593, in wsgi_postload
  File "C:\Program Files\OpenERP 7.0alpha-20121206-000102\Server\server\openerp\
addons\web\http.py", line 482, in __init__
  File "C:\Program Files\OpenERP 7.0alpha-20121206-000102\Server\server\openerp\
addons\web\http.py", line 549, in _load_addons
  File "C:\Program Files\OpenERP 7.0alpha-20121206-000102\Server\server\.\opener
p\modules\module.py", line 133, in load_module
  File "C:\Program Files\OpenERP 7.0alpha-20121206-000102\Server\server\openerp\
addons\sim\__init__.py", line 1, in <module>
  File "C:\Program Files\OpenERP 7.0alpha-20121206-000102\Server\server\openerp\
addons\sim\sim.py", line 10
     def setuju(self, cr, uid, ids, context=None):
    ^
 IndentationError: unexpected indent
2013-01-15 15:21:41,849 2136 ←[1;32m←[1;49mINFO←[0m ? openerp.service.netrpc_ser
ver: starting NET-RPC service on 0.0.0.0:8070
2013-01-15 15:21:41,877 2136 ←[1;32m←[1;49mINFO←[0m ? openerp.netsvc: Starting 1
 services
2013-01-15 15:21:41,897 2136 ←[1;32m←[1;49mINFO←[0m ? openerp: OpenERP server is
 running, waiting for connections...
2013-01-15 15:21:41,913 2136 ←[1;32m←[1;49mINFO←[0m ? openerp.service.wsgi_serve
r: HTTP service (werkzeug) running on 0.0.0.0:8069 
```

错误似乎来自“def setuju（...”。我的脚本有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:25:48.407

如果您的模块没有证书，请从 openerp 文件中删除密钥“证书”。另请从`setuju()`功能中删除工作流程。我没有看到为您的班级定义的工作流程。

从日志来看，错误是因为缩进错误。请检查您之前的空格数是否正确`def setuju()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:58:26.693

在OpenERP上开发，即使有经验，也经常会遇到这样的情况。*必须*了解您的日志文件在哪里检查它们是否有错误。

这将取决于您如何安装服务器，但根据[文档](http://doc.openerp.com/v6.0/install/windows/server/index.html#monitoring-the-openerp-server)，它应该位于`C:\Program Files\OpenERP X.X\Server\openerp-server.log.`. 如果没有，请在服务器配置文件中查找。

如果您认真对待 OpenERP 开发，我建议您：

1.  停止服务器服务并在控制台终端中手动启动它。它不仅为您提供有关警告和错误的即时信息，而且还将显示 python`print`语句的结果并让您进入`(Pdb)` [调试模式](http://pythonconquerstheuniverse.wordpress.com/2009/09/10/debugging-in-python/)。

2.  [在 Ubuntu Server](http://www.theopensourcerer.com/2012/12/how-to-install-openerp-7-0-on-ubuntu-12-04-lts/) VM中安装您的OpenERP 服务器。使用 Linux 可能有一个学习曲线，但有很多可用的帮助，从长远来看，您会发现在该平台上获得帮助和解决问题要容易得多。

# c# - 将图像分辨率更改为 300 dpi

> ID：14332470
> 
> 赞同：0
> 
> 时间：2013-01-15T06:49:00.670
> 
> 标签：c#, windows-phone-7, xaml, windows-phone-8

有什么方法可以更改 Windows Phone 8 中图像的分辨率？实际上我需要将图像 dpi 更改为 300 dpi。我实际上在我的应用程序中有那个图像。在 WPF 中，我们有以下方式。

```
Bitmap b=new Bitmap(Image)
b.SetResolution(xxx,yyy) 
```

是否有可能在 Windows Phone 8 中实现相同的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:40:15.070

Windows Phone 8 中有一个选项可以通过 PictureDecoder 更改图像流的分辨率。输入应该是

1.  溪流。
2.  分辨率的宽度和高度。

    PictureDecoder.DecodeJpeg(jpgstream, 1200, 480);

有关更多信息，您可以查看以下链接。

[http://blogs.msdn.com/b/swick/archive/2011/04/07/image-tips-for-windows-phone-7.aspx](http://blogs.msdn.com/b/swick/archive/2011/04/07/image-tips-for-windows-phone-7.aspx)

# jquery - 如何使用ajax将变量值传递给多个url

> ID：14332480
> 
> 赞同：0
> 
> 时间：2013-01-15T06:50:47.303
> 
> 标签：jquery, ajax

在以下代码中，我想使用 ajax post 方法将 id 作为参数传递给多个 url

```
$.ajax({
     type: 'POST',
     url: root + "contacts/primary?json",
     data: { id: $(this).val() },
     success: function (o) {
          ko.applyBindings(new DynamicModel(o.primary),document.getElementById("contactPrimaryForm"));

      },
      dataType: "json"
 }); 
```

那么，如何做到这一点..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:03:45.377

如果我正确理解你的问题，你需要这个

```
$(function() {
 //first ajax call
 ajaxCall('url1' , data , callbackFunction1 );

});

function callbackFunc1(result) {
// second ajax call 
 alert('URL1 work');   
 ajaxCall('url2' , data , callbackFunction2 ); 
};

function callbackFunc2(result) {
    alert('URL2 work');   
}; 

function ajaxCall(url, usrData, callbackFunction) {
$.ajax({
    type: 'POST'
    url: url,
    data: usrData,
    success: callbackFunction
});
}; 
```

# java - 使用部署在 weblogic 集群中的 akka 的应用程序

> ID：14332486
> 
> 赞同：0
> 
> 时间：2013-01-15T06:51:03.717
> 
> 标签：java, weblogic, cluster-computing, akka

我目前正在开发一个将部署在 weblogic 应用程序服务器集群中的应用程序。此应用程序通过 MDB 使用一些 JMS 消息，并通过 AKKA 参与者处理一些业务逻辑。

其中一些代理是单例的，而其他代理则分组在一个池中，并通过循环路由器进行联系。

我试图弄清楚所有这些事情将如何在集群环境中工作：

*   即使应用程序部署在集群中的多个节点上，是否有可能创建一个“独特的”AKKA 系统？在每台服务器上创建的代理是否会相互认识？
*   是否可以在集群中添加新的 weblogic 节点并让 AKKA 框架识别这些新资源？
*   如何配置所有这些东西？

对于我在 AKKA 文档中看到的关于集群实现的内容，似乎支持的架构位于应用程序服务器之外，AKKA 节点从 java shell 命令启动。

遗憾的是，我没有找到任何关于在应用服务器环境中使用 AKKA 的有价值信息。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:32:35.970

当您说 Akka 代理时，您是指演员？另外，我假设循环调度程序是 RoundRobinRouter :)

Akka 没有明确支持应用程序服务器，但您应该能够在代码中实例化 ActorSystem。

至于“唯一性”，如果您使用集群，成员资格会自动为您维护，以便您查看哪些节点可用，并且您可以轻松添加节点。目前还没有在此之上实现命名服务，这是后续版本的目标，因此您必须自己在集群中查找参与者，或者处理集群全局的单例。

我建议阅读文档中的相关部分，了解如何设置和配置集群。 [http://doc.akka.io/docs/akka/2.1.0/cluster/index.html](http://doc.akka.io/docs/akka/2.1.0/cluster/index.html)

# dynamic - SL5 ComponentOne C1FlexGrid 下拉动态过滤

> ID：14332491
> 
> 赞同：1
> 
> 时间：2013-01-15T06:51:27.417
> 
> 标签：dynamic, filtering, silverlight-5.0, componentone, c1flexgrid

我正在使用基于 SL5 的[ComponentOne 的](http://www.componentone.com/SuperPages/AboutComponentOne/) [C1FlexGrid](http://www.componentone.com/superproducts/flexgridwinforms/)并在运行时将数据绑定到控件。对于两列，我将查找数据填充为控件的第一列和第二列中的下拉列表。第一栏我绑定的是公司信息，第二栏我默认绑定的是部门信息。在我的模型中，公司和部门实体之间存在 1-N 关系（也就是说，对于每家公司，都有 N 个与之关联的部门）。

在编辑模式下，我想在第一列中为所选公司过滤掉控件第二列中的部门（即，当我在下拉列表中选择“公司 1”时，我只想绑定与公司关联的那些部门1 在第二个下拉列表中）。这是可以实现的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:49:10.070

我已经按照论坛帖子中提到的建议实现了这一点*[在同一列中的不同下拉列表/组合框？](http://our.componentone.com/groups/silverlight/flexgrid-for-silverlight/forum/topic/different-drop-down-listcombo-box-in-the-same-column/)*.

# c# - c# 中从十六进制到字节的最轻量级转换？

> ID：14332496
> 
> 赞同：14
> 
> 时间：2013-01-15T06:51:45.113
> 
> 标签：c#, hex, byte

> **可能重复：**
> [如何将字节数组转换为十六进制字符串，反之亦然？](https://stackoverflow.com/questions/311165/how-do-you-convert-byte-array-to-hexadecimal-string-and-vice-versa)

我需要一种有效且快速的方法来进行这种转换。我尝试了两种不同的方法，但它们对我来说不够有效。对于具有大量数据的应用程序，是否有任何其他快速方法可以实时完成此任务？

```
 public byte[] StringToByteArray(string hex)
    {
        return Enumerable.Range(0, hex.Length / 2).Select(x => Byte.Parse(hex.Substring(2 * x, 2), NumberStyles.HexNumber)).ToArray(); 
    } 
```

上面的那个对我来说更有效率。

```
 public static byte[] stringTobyte(string hexString)
    {
        try
        {
            int bytesCount = (hexString.Length) / 2;
            byte[] bytes = new byte[bytesCount];
            for (int x = 0; x < bytesCount; ++x)
            {
                bytes[x] = Convert.ToByte(hexString.Substring(x * 2, 2), 16);
            }
            return bytes;
        }
        catch
        {
            throw;
        } 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-15T06:58:37.063

If you *really* need efficiency then:

*   Don't create substrings
*   Don't create an iterator

Or, and get rid of `try` blocks which only have a `catch` block which rethrows... for simplicity rather than efficiency though.

This would be a pretty efficient version:

```
public static byte[] ParseHex(string hexString)
{
    if ((hexString.Length & 1) != 0)
    {
        throw new ArgumentException("Input must have even number of characters");
    }
    int length = hexString.Length / 2;
    byte[] ret = new byte[length];
    for (int i = 0, j = 0; i < length; i++)
    {
        int high = ParseNybble(hexString[j++]);
        int low = ParseNybble(hexString[j++]);
        ret[i] = (byte) ((high << 4) | low);
    }

    return ret;
}

private static int ParseNybble(char c)
{
    // TODO: Benchmark using if statements instead
    switch (c)
    {
        case '0': case '1': case '2': case '3': case '4':
        case '5': case '6': case '7': case '8': case '9':
            return c - '0';
        case 'a': case 'b': case 'c': case 'd': case 'e': case 'f':
            return c - ('a' - 10);
        case 'A': case 'B': case 'C': case 'D': case 'E': case 'F':
            return c - ('A' - 10);
        default:
            throw new ArgumentException("Invalid nybble: " + c);
    }
    return c;
} 
```

The TODO refers to an alternative like this. I haven't measured which is faster.

```
private static int ParseNybble(char c)
{
    if (c >= '0' && c <= '9')
    {
        return c - '0';
    }
    c = (char) (c & ~0x20);
    if (c >= 'A' && c <= 'F')
    {
        return c - ('A' - 10);
    }
    throw new ArgumentException("Invalid nybble: " + c);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-15T10:19:41.537

我从[另一个问题](https://stackoverflow.com/questions/311165/how-do-you-convert-byte-array-to-hexadecimal-string-and-vice-versa)中获取了基准代码，并对其进行了重新设计以测试此处给出的十六进制到字节方法：

```
HexToBytesJon: 36979.7 average ticks (over 150 runs)
HexToBytesJon2: 35886.4 average ticks (over 150 runs)
HexToBytesJonCiC: 31230.2 average ticks (over 150 runs)
HexToBytesJase: 15359.1 average ticks (over 150 runs) 
```

`HexToBytesJon`是[Jon](https://stackoverflow.com/a/14332574/1288598)的第一个版本，`HexToBytesJon2`也是第二个变体。 `HexToBytesJonCiC`是 Jon 的版本，带有[CodesInChaos](https://stackoverflow.com/a/14335076/1288598)的建议代码。 `HexToBytesJase`是我的尝试，基于上述两种方法，但使用替代的 nybble 转换，它避免了错误检查和分支：

```
 public static byte[] HexToBytesJase(string hexString)
    {
        if ((hexString.Length & 1) != 0)
        {
            throw new ArgumentException("Input must have even number of characters");
        }
        byte[] ret = new byte[hexString.Length/2];
        for (int i = 0; i < ret.Length; i++)
        {
            int high = hexString[i*2];
            int low = hexString[i*2+1];
            high = (high & 0xf) + ((high & 0x40) >> 6) * 9;
            low = (low & 0xf) + ((low & 0x40) >> 6) * 9;

            ret[i] = (byte)((high << 4) | low);
        }

        return ret;
    } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-15T09:55:40.197

作为乔恩`if`基于的变体`ParseNybble`：

```
public static byte[] ParseHex(string hexString)
{
    if ((hexString.Length & 1) != 0)
    {
        throw new ArgumentException("Input must have even number of characters");
    }
    byte[] ret = new byte[hexString.Length / 2];
    for (int i = 0; i < ret.Length; i++)
    {
        int high = ParseNybble(hexString[i*2]);
        int low = ParseNybble(hexString[i*2+1]);
        ret[i] = (byte) ((high << 4) | low);
    }

    return ret;
}

private static int ParseNybble(char c)
{
    unchecked
    {
        uint i = (uint)(c - '0');
        if(i < 10)
            return (int)i;
        i = ((uint)c & ~0x20u) - 'A';
        if(i < 6)
            return (int)i+10;
        throw new ArgumentException("Invalid nybble: " + c);
    }
} 
```

# sharepoint - Sharepoint 中的 .Net 客户端对象模型在执行查询时返回 500 内部服务器错误

> ID：14332498
> 
> 赞同：4
> 
> 时间：2013-01-15T06:52:17.223
> 
> 标签：sharepoint, sharepoint-clientobject

我正在尝试使用 sharepoint 客户端对象模型查看我的站点中的所有列表，以下是我的代码

```
 using (ClientOM.ClientContext ctx =    
            new ClientOM.ClientContext(UrlTextBox.Text))
        {
            //Get the site
            ClientOM.Web site = ctx.Web;
            ctx.Load(site);
            //Get Lists
            ctx.Load(site.Lists);
            //Query
            ctx.ExecuteQuery();
 } 
```

上面的代码抛出以下错误“**远程服务器返回错误：（500）内部服务器错误**”也尝试传递凭据，但没有工作，也尝试传递 DefaultNetworkCredentials。没运气..

请指教。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-10-30T04:14:17.460

检查下面的所有内容并确保没有任何内容停止运行。

**1\. 检查您的所有应用程序池。** ![iis](../Images/b21c6d02316079a2876fdcfa3d10bcf3.png "iis")

**2\. 检查这些 SharePoint 服务。** ![sp](../Images/62ccbdfbce9aa2090c16dbd5656020ea.png "sp")

**3\. 检查 IIS 管理服务。** ![服务](../Images/1965d845fda79361dc5152448382d5cf.png "服务")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-27T08:29:21.640

在每个 executeQuery() 之前都需要一个凭证：

```
ctx.Credentials = new NetworkCredential("LoginID", "LoginPW","LoginDomain"); 
```

# c - 什么是外部易失性指针

> ID：14332503
> 
> 赞同：14
> 
> 时间：2013-01-15T06:52:43.880
> 
> 标签：c, volatile

什么是外部易失性指针。

```
extern volatile uint32 *ptr; 
```

在这里，*ptr 的行为是什么？这实际上意味着什么？

而且，什么时候应该使用它？

我试图用谷歌搜索它，但没有得到任何满意的答案，关于这种组合的信息并不多。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-15T08:37:42.647

*extern*和*volatile*关键字都可以独立考虑。这些关键字中的每一个的作用都不与另一个相互作用，因此可以单独详细说明它们中的每一个，如下所示。

**extern**告诉编译器*ptr*的实际定义在另一个模块（另一个`.c`）中。*基本上，编译器处理ptr*的方式没有太大变化- 拥有*extern*只是告诉编译器它不必像在 another 的其他地方那样为*ptr*`.c`保留一些内存空间，并且它的实际内存位置将由稍后*链接器*。

```
 extern uint32 *ptr; 
```

如果您省略*extern*，编译器将不会抱怨。但是，稍后，*链接器*在尝试链接所有对象模块以构建最终的可执行程序时，将抛出错误“ *ptr*已定义两次”（因为它已在另一个中定义`.c`）。

```
 uint32 *ptr; 
```

**volatile告诉编译器***ptr*所在的内存位置可能会被一些外部事件改变/修改，并且它（编译器）不应该依赖于一些效率优化，比如考虑到*ptr*的值在几个范围内不会改变C的顺序行。这样的事件可能是异步中断，发生在CPU执行上述范围并修改*ptr*值时。

*通常（在注释中带有优化 C 的虚拟汇编代码），REGx 是 CPU 寄存器，我们对变量y*不太感兴趣...

```
 int x = 10;

  int func() {
    int y;              // REG4
    printf("%d\n", x);  // Set REG3 = memory(x) and display x
    x += 2;             // Add 2 to REG3
    y = x * x;          // REG4 = REG3 * REG3
    printf("%d %d\n", x, y); // Do printf(..., REG3, REG4)
    x += 5;             // REG3 = REG3 + 5
                        // memory(x) = REG3 (save register to memory)
    return y;           // return REG4
  } 
```

应该显示`10, 12, 144`。为了提高效率（内存访问比寄存器访问成本更高）说编译器将*x*的值存储在内部 CPU 寄存器（RE​​G3）中并在*func*中安全地使用它，直到它存储*x*的新值（它是一个全局变量）到*x*内存位置。*x*最后是 17。

但是想象一下，这个程序比这更复杂，并且每分钟都会有一个时钟中断，将*x*减去 10 。如果中断会发生什么...

```
 void inter_call_by_timer_every_minute() {
     x -= 10;
  } 
```

... 出现在*func*中说就在该`printf("%d\n", x);`行之后？*func*在 REG3 (10) 中有*x*，加 2 (12) 最后加 5 (17) 并将 REG3 结果存储到*x*内存位置 (17)。这是错误的，因为编译器优化已经隐藏了中断效果 (-10)，因为它在最后将 REG3 的值存储到 memory(x) 中，而忽略了中断所做的*减法。*正确的结果是：*x*最初为 10，`printf`在*func*中的第一个之后将其减去 10（0） ，然后添加 2，然后添加 5。结果 7。

添加*挥发物*

```
 volatile int x = 10; 
```

将使编译器避免*func中的**x*优化

 *```
 int func() {
    int y;              // REG4
    printf("%d\n", x);  // display memory(x)
    x += 2;             // memory(x) += 2
    y = x * x;          // REG4 = memory(x) * memory(x)
    printf("%d %d\n", x, y); // Do printf(..., memory(x), REG4)
    x += 5;             // memory(x) += 5
    return y;           // return REG4
  } 
```

并一直从内存中读取*x的值。*结果，在第一个 printf 之后从*inter_call_by_timer_every_minute*中断，是*x* == 7。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T10:16:53.393

`extern`关键字用于声明在其他地方定义的全局变量（这意味着它在其他`.c`文件中定义）。

例如，在一个项目中考虑两个`.c`文件`a.c`并且`b.c`在那里。在 中定义了一个全局变量`a.c`，并且可以在该文件中定义的所有函数中访问该变量。如果我们想在第二个文件中访问同一个全局变量`b.c`，那么该变量应该声明`extern`为`b.c`

`a.c`文件如下

```
int flag = 0;
int main()
{
    .......
    func1();
    printf("\nflag value is %d\n", flag).
    ....... 
} 
```

`b.c`文件如下

```
extern int flag;
void func1();
{
    .....
    flag = 10;
    .....
} 
```

`volatile`关键字用于通知编译器在生成可执行指令时避免进行任何类型的优化。

```
int flag = 0;
int main()
{
    while(flag == 0);
    printf("\nflag value is %d\n", flag);
    return 0;

} 
```

考虑上面的程序，所有编译器都会优化`while(flag == 0);`as `while(1);`。因为在代码中没有在该循环`flag`之前更新值的位置。`while`因此，如果该变量值被其他硬件更新，那么它将永远不会反映在程序执行中。因此，如果我们像下面这样声明该变量`volatile`，编译器将不会对该变量执行任何优化，并且该程序的行为将符合预期。

```
volatile int flag = 0; 
```

但如果程序变量的值无法被其他硬件更新，则无需将该变量声明为`volatile`. 因为对于可变变量，CPU 需要为访问该变量的每条指令执行 I/O 操作。对于永远不会被其他硬件更新的变量，需要考虑这种对性能的影响。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T06:57:22.367

我会解释我通过关键字知道的方式。`extern`表示该变量被定义为在定义范围之外的某处使用。例如，它可以在头文件中定义并在 .c 文件中使用。

`volatile`意味着对该变量的修改应该与外部世界一致。这意味着所有更新都应该提交到主内存，以便共享相同执行空间的其他线程可以看到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T06:56:54.427

Extern 意味着它在其他地方定义 - 可能在头文件中。Volatile 是编译器的信息，它不应该尝试优化它。*

# directshow - Directshow-ISampleGrabberCB::SampleCB 回调频率

> ID：14332506
> 
> 赞同：0
> 
> 时间：2013-01-15T06:53:13.837
> 
> 标签：directshow, video-capture

我正在开发一个应用程序，该应用程序需要从不同的图像采集卡捕获视频帧。我正在使用 directshow`ISampleGrabberCB::SampleCB`回调来接收指向新帧的指针。现在我想知道这个回调什么时候被调用？是否保证每次帧捕获器收到一个新帧时都会自动调用它？

我正在尝试各种分辨率的 120Hz 信号，但我这个回调只被调用了 50-55 次。因此，我的图像采集卡有可能无法以该速率捕获（尽管理论上它可以）。我想知道这个回调是瓶颈还是抓帧卡。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T06:56:49.367

`SampleCB`立即从流线程调用调用，您对每一帧都有一个调用。在回调中，您会阻止进一步的流式传输，即您需要从回调中返回控制权才能恢复（特别是，如果您的回调“慢”，它会降低有效的 FPS）。

# php - 如何应用带有硬编码链接的 .htaccess 或 PHP 替代方案以使用 SEO URL

> ID：14332508
> 
> 赞同：0
> 
> 时间：2013-01-15T06:53:27.247
> 
> 标签：php, apache, .htaccess, mod-rewrite

我正在用 PHP 编码网站

我的链接是：-

[http://example.com/science.php?category=alien&title=Find+UFO+Just+over+your+head+by+clicking+here](http://example.com/science.php?category=alien&title=Find+UFO+Just+over+your+head+by+clicking+here)

现在，我想在我的视图源中显示 url：-

[http://example.com/science.php/alien/Find+UFO+Just+over+your+head+by+clicking+here](http://example.com/science.php/alien/Find+UFO+Just+over+your+head+by+clicking+here)

我也希望这是工作链接：-

从 .htaccess [在 generateit.net > mod_rewrite generator 的帮助下] 这里是代码：-

```
RewriteEngine On
RewriteRule ^([^/]*)/([^/]*)$ /science.php?category=$1&title=$2 [L] 
```

现在我需要在 PHP 中做什么，才能使这个 URL 有效。

我需要写下面的链接： -

```
<a href="http://example.com/science.php?category=<?php echo $rows['category'] ?>&title=<?php echo htmlentities($rows['title']); ?>" > <?php echo $rows['title'] ?></a> 
```

在我的代码中还是我需要写：-

```
<a href="http://example.com/science.php/<?php echo $rows['category'] ?>/<?php echo htmlentities($rows['title']); ?>" > <?php echo $rows['title'] ?></a> 
```

或一些功能来制作上面的网址。

谢谢 ！很长一段时间以来，我一直在寻找这方面的知识。

再次感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:08:14.343

实际上，PHP 端不需要做任何更改，因为 php 会在 .httaccess 文件翻译后收到请求。

现在我认为您的 .httaccess 条件有问题，请尝试以下代码：

```
RewriteEngine On
RewriteBase /
RewriteRule ^([^/]*)/([^/]*)/([^/]*)$ /$1.php?category=$2&title=$3 [L] 
```

保存后，试试下面的链接

```
http://example.com/science/alien/Find+UFO+Just+over+your+head+by+clicking+here 
```

我希望这有帮助

# jquery - jQuery scrollTo 插件

> ID：14332512
> 
> 赞同：2
> 
> 时间：2013-01-15T06:53:44.910
> 
> 标签：jquery, anchor, scrollto, smooth-scrolling

我正在使用 Ariel Flesler 的 scrollTo 插件和引导程序。它看起来很简单，但我无法让它工作。我想单击按钮，它会平滑滚动到相应的 ID。这是一个按钮的示例。

这是html：

```
<a class="btn btn-primary" href="#faqs"></i>FAQS</a>

<div class="id="faqs">

<script src="js/jquery.scrollTo-1.4.3.1-min.js"></script> 
```

**Qn。1** jQuery 应该是什么才能使我的所有按钮都能正常工作？

**Qn。2**顺便说一句，我从 twitter bootstrap 的网站“application.js”中偷了东西，但并不理解它们的含义，只是为了让我的网站正常工作。你能解释一下这些代码的含义吗？

```
//Is this bit of code the convention to add to the start of every jQuery doc?
!function ($) {
$(function(){
var $window = $(window)

//What does this do?
$('[href^=#]').click(function (e) {
  e.preventDefault()
})

//This code scrolls smoothly to top, however it only works when the code below is present. Why?
$("a[href='#top']").click(function() {
  $("html, body").animate({ scrollTop: 0 }, "slow");
  return false;
})

// This is the weird bit of code I don't understand. Without this, my scrollTop doesn't work. Could this bit of code also interfere with scrollTo's plugin? I assume it will...
$('.download-btn .btn').on('click', function () {

  var css = $("#components.download input:checked")
        .map(function () { return this.value })
        .toArray()
    , js = $("#plugins.download input:checked")
        .map(function () { return this.value })
        .toArray()
    , vars = {}
    , img = ['glyphicons-halflings.png', 'glyphicons-halflings-white.png'] 
```

感谢您回答我所有的问题，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:29:10.510

看到这个：

```
//Is this bit of code the convention to add to the start of every jQuery doc?
!function ($) {
$(function(){  //<--------------this is where jQuery starts working 'document ready function'
var $window = $(window) 
```

还有这个：

```
//What does this do?
$('[href^=#]').click(function (e) {
  e.preventDefault();
}); 
```

上面的脚本`.preventDefault()`确保任何`<a>`带有 when clicked page 属性的标签`href="#"`都不会跳到顶部，这与`return false;`

和下面的代码：

```
//This code scrolls smoothly to top, however it only works 
//when the code below is present. Why?
$("a[href='#top']").click(function() {
  $("html, body").animate({ scrollTop: 0 }, "slow");
  return false;
}); 
```

是的，这将起作用，因为它正在选择具有此处属性的`<a>`标签，当单击它时，将滚动到文档位置的顶部。但是，这仅适用于此链接`href='#top'``html, body``0``$("a[href='#top']")`

正如您没有提到完整的代码，但是如果您想滚动到特定的 div，这不会造成任何伤害。您可以修改`$("a[href='#top']").click(function() {`or`$('[href^=#]').click(function (e) {`代码以使所有链接正常工作。

你可以试用这个脚本：

```
 $('[href^=#]').click(function (e) {
     e.preventDefault();
     var div = $(this).attr('href');
     $("html, body").animate({
         scrollTop: $(div).position().top
       }, "slow");
 }); 
```

在这里结帐：http: [//jsfiddle.net/Ja6DN/](http://jsfiddle.net/Ja6DN/)

# mongodb - 在不遍历所有记录的情况下检索 Mongodb 中索引变量的所有值

> ID：14332513
> 
> 赞同：0
> 
> 时间：2013-01-15T06:53:46.733
> 
> 标签：mongodb

我有一个包含数百万条记录的大型 MongoDB 数据库。我想检索具有关联索引的变量的所有值。有没有比遍历所有记录更快的方法来检索这个索引变量的所有值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:07:19.413

当您在 mongo 中编写查询时，它使用自己的查询分析器，它将使用查询的最佳索引。

为了考虑分析器将使用哪个索引`.explain()`，请在查询末尾添加。

# c# - Y/N 或 y/n 循环

> ID：14332514
> 
> 赞同：3
> 
> 时间：2013-01-15T06:54:08.387
> 
> 标签：c#, .net, if-statement, string-comparison, toupper

我无法在循环中实现 Y/N 或 y/n。我设计它的方式是用户可以在循环中使用 Y 和 N 的大写和小写字母作为答案。顺便说一下，这是我的代码，但似乎无法使其工作：

```
do
        {
            Console.WriteLine("\nSelect additional topping/s\n");

            Console.WriteLine("1 - Extra meat: 200");
            Console.WriteLine("2 - Extra cheese: 100");
            Console.WriteLine("3 - Extra veggies: 80\n");

            int selectedTopping = Convert.ToInt32(Console.ReadLine());

            switch (selectedTopping)
            {
                case 1:
                    pizza = new MeatToppings(pizza);
                    break;

                case 2:
                    pizza = new CheeseToppings(pizza);
                    break;

                case 3:
                    pizza = new VeggieToppings(pizza);
                    break;

                default:
                    break;
            }

            Console.WriteLine("\nAdd more toppings? Y/N");

        }

        while ((Console.ReadLine() == "Y") || (Console.ReadLine() == "y")); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T07:00:38.183

Try to use `String.Equals` and [`StringComparison`](http://msdn.microsoft.com/en-us/library/system.stringcomparison.aspx):

```
String.Equals(Console.ReadLine(), "y", StringComparison.CurrentCultureIgnoreCase); 
```

from MSDN:

> ***`CurrentCultureIgnoreCase`***: Compare strings using culture-sensitive sort rules, the current culture, and ignoring the case of the strings being compared.
> 
> ***`OrdinalIgnoreCase`***: Compare strings using ordinal sort rules and ignoring the case of the strings being compared.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-15T06:56:56.783

```
while ((Console.ReadLine() == "Y") || (Console.ReadLine() == "y")); 
```

`ReadLine()`由于您要调用两次，因此这将读取 2 行不同的行。您需要调用一次并保存该值。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-15T06:57:10.817

You can use [`ToUpper`](http://msdn.microsoft.com/en-us/library/ewdd6aed.aspx)

```
while ((Console.ReadLine().ToUpper() == "Y") ); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-15T07:02:07.297

To check `Y` or `y` ignoring case, you should use [string.Equals(string,StringComparison)](http://msdn.microsoft.com/en-us/library/c64xh8f9.aspx) overload.

```
while (Console.ReadLine().Equals("Y", StringComparison.InvariantCultureIgnoreCase)); 
```

**Please see** the [The Turkish İ Problem and Why You Should Care](http://haacked.com/archive/2012/07/05/turkish-i-problem-and-why-you-should-care.aspx) before using `ToUpper` or `ToLower` for string comparison with ignore case.

Your current code is reading the lines from console twice, that is why your code is holding up for the 2nd value.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-15T07:49:53.580

正如 Austin 刚刚指出的那样，您在 while 循环语句中使用了两次 ReadLine。

值得一提的是尽量遵循模块化规则，这将有助于加快实现和调试我们的代码。

自从我进行任何 C# 编程以来已经有一段时间了，所以用 Java 风格对其进行 sudo 编码。

由于它是命令行编程，因此您可能必须多次验证用户输入。我要做的一件事是创建一个实用程序类来包含常见的用户输入任务。

```
public class TerminalUtil {
    private TerminalUtil() {}

    public static boolean isYes(String msg){ return (msg.ToUpper() == "Y" || msg.ToUpper() == "YES"); }
    public static boolean isNo(String msg){ return (msg.ToUpper() == "N" || msg.ToUpper() == "NO"); }
   // You also might want basic conditionals to check if string is numeric or contains letters.

    // I like using recursion for command line utilities so having a method that can re-print messages is handy
    public static void display(String[] messages){
        for(String msg : messages){
            Console.WriteLine(msg);
        }
    }

    public static boolean enterYesOrNo(String[] messages, String[] errorMessages){
        display(messages)
        String input = Console.ReadLine();
        if( isYes(input) ){
            return true;
        } else if( isNo(input) ){ 
            return false; 
        } else {
             display(errorMessages); // Maybe something like, you didn't enter a yes or no value.
             enterYesOrNo(messages, errorMessages); // Recursive loop to try again.
        }

    }
} 
```

这是订购披萨的代码可能看起来像这样

```
public class OrderPizza{
    public static int selectToppings(){
        String[] message = new String[4];
        message[0] = ("\nSelect additional topping/s\n");
        message[1] = ("1 - Extra meat: 200");
        message[2] = ("2 - Extra cheese: 100");
        message[3] = ("3 - Extra veggies: 80\n");

       int option =  TerminalUtils.entryNumeric(message, {"You entered an non-numeric character, try again"} );
       if( option > 0 && option <= 3 ){
           return option;
       } else {
          Console.WriteLine("Number must be between 1 - 3, try again.");
          return selectToppings();
       }
    }

    public static Pizza order(){
        Pizza pizza = new Pizza();

        while(true){
            int toppingCode = selectTopping();
            pizza.addTopping(toppingCode);
            if(!TerminalUtil.enterYesOrNo({"\nAdd more toppings? Y/N"}, {"Please enter a 'Y'es or 'N'o"}) ){
                break;
            }
        }
    }
} 
```

这样做的主要好处是减少了 while 循环的业务逻辑，您可以重用 TerminalUtils 中的代码。此外，这绝不是一个优雅的解决方案，我很懒，现在是 IRL 凌晨 3 点，但它应该足以让球滚动。

您可能应该重新考虑做的一件事是使用整数代码来表示浇头。使用枚举可能会使事情更容易实现。

我还注意到您添加了三种不同类型的比萨饼，我假设它们是三个单独的对象。

由于您正在循环向比萨饼添加配料，因此请创建一个抽象的比萨饼类。通过这种方式，您可以将其扩展为通用的预制比萨，例如意大利辣香肠或奶酪，并在您希望客户定制他们的订单时使用抽象比萨类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-15T23:30:11.340

我没有找到比以下更好的方法：

```
while ( str!="N" )
{
    str = Console.ReadLine();
    str = str.ToUpper();
    if (str == "Y");
       break;
}; 
```

# javascript - 使用 Javascript 刷新页面时切换图像

> ID：14332517
> 
> 赞同：0
> 
> 时间：2013-01-15T06:54:39.560
> 
> 标签：javascript, position, switch-statement, image

如何在页面刷新时使用 Javascript 切换图像？

假设我有 2 张图片：

*   图片A.jpg
*   图片B.jpg

我想在页面刷新时在 locationA 和 locationB 切换这些图像。

**模拟：**

```
- Page Refresh #1
<img id='locationA' src='ImageA.jpg'>
<img id='locationB ' src='ImageB.jpg'>

- Page Refresh #2
<img id='locationA' src='ImageB.jpg'>
<img id='locationB ' src='ImageA.jpg'>

- Page Refresh #3
<img id='locationA' src='ImageA.jpg'>
<img id='locationB ' src='ImageB.jpg'> 
```

**[更新#1]**

我尝试了这个实现，但它不起作用。谁能告诉我这段代码有什么问题？

```
<html>
  <head>
    <script type="text/javascript">
      var images = [];
      images[0] = "I_am_Super_Magnet%21.jpg";
      images[1] = "World_In_My_Hand%21.jpg";

      var index = sessionStorage.getItem('index');
      if(index) index = 0;

      if(index==0)
      {
        document.getElementById("locationA").src=images[index];
        document.getElementById("locationB").src=images[index+1];
        index = index + 1;
      }
      else if(index==1)
      {
        document.getElementById("locationA").src=images[index];
        document.getElementById("locationB").src=images[index-1];
        index = index - 1;
      }
     sessionStorage.setItem('index', index);
    </script>
  </head>
  <body>
    <img id='locationA' src=''>     
    <img id='locationB' src=''>
  </body>
</html> 
```

**[更新#2]**

测试：

*   FF 16.0.1 --> 工作！
*   IE 8 --> 不起作用

这是代码：

```
<html>
  <head>
    <script type="text/javascript">
    function switchImage()
    {
      var images = [];
      images[0] = "I_am_Super_Magnet%21.jpg";
      images[1] = "World_In_My_Hand%21.jpg";

      var index = sessionStorage.getItem('index');

      if(index == null) index = 0;//set index to zero if null

      index = parseInt(index);// parse index to integer, because sessionStorage.getItem() return string data type.

      if(index == 0)
      {
        document.getElementById("locationA").src=images[index];
        document.getElementById("locationB").src=images[index+1];
        index = index + 1;
      }
      else if(index == 1)
      {
        document.getElementById("locationA").src=images[index];
        document.getElementById("locationB").src=images[index-1];
        index = index - 1;
      }
      sessionStorage.setItem('index', index);
    }
    </script>
  </head>
  <body onload="switchImage()">
    <img id='locationA' src='src_locationA'>        
    <img id='locationB' src='src_locationB'>
  </body>
</html> 
```

> 感谢[杰克](https://stackoverflow.com/users/1338292/jack)提供线索！感谢[Jon Kartago Lamida](https://stackoverflow.com/users/946199/jon-kartago-lamida)提供的样品！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:08:48.873

在您的 cookie 中设置一个标志变量（检查[Javascript Cookie](https://stackoverflow.com/questions/2621171/javascript-cookie) SO Question for setting a cookie）。

每次页面加载时，（在您的 onload 函数中）检查标志的值。

1.  说如果值为 0 。在位置 A 中显示图像 A。然后将标志值反转为 1。
2.  否则，如果值为 1 。在位置 A 中显示 ImageB。然后将标志值反转为 0。

标志值将存储在您的 cookie 中。

希望这会有所帮助，Shoubhik

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:11:53.347

我尝试根据 Jack 举个例子，使用 localStorage。大多数现代浏览器都支持这一点。我还没有这个代码，但或多或​​少应该是这样的。

```
 <html>
  <head>
    <script type="text/javascript">
     function init(){

var imageA = 'imageA.jpg';
var imageB = 'imageB.jpg';

// state maintaned using localStorage
var toggle = localStorage.getItem('toggle');

if(toggle) toggle = "A"; // if no state yet, initialize

if(toggle == "A"){
toggle = "B";
document.getElementById('locationA').src=imageA;
document.getElementById('locationB').src=imageB;
}else{
toggle = "A";
document.getElementById('locationA').src=imageB;
document.getElementById('locationB').src=imageA;
}
// put state back to local storage
localStorage.setItem('toggle', toggle);
}
    </script>
  </head>
  <body onload="init()">
    <img id='locationA' src=''>     
    <img id='locationB' src=''>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T02:38:52.567

根据[Damien_The_Unbeliever](https://stackoverflow.com/users/15498/damien-the-unbeliever)评论，我为自己的问题创建了这个答案帖子。

这是我使用的最终工作解决方案。

**[更新#3]**

测试：

*   FF 16.0.1 --> 工作！
*   IE 8 --> 工作！
*   Chrome 24 --> 工作！（注意：这个浏览器需要一点额外的努力才能让它可以读取cookie。见这个[链接](http://www.techtoolblog.com/archives/subdomain-cookies-and-localhost)）

基本上代码仍然与更新#2 相同，不同的是我使用 cookie 而不是`sessionStorage`. 这是完整的代码：

```
<html>
  <head>
    <script type="text/javascript">
    function createCookie(name,value,days) {
        if (days) {
            var date = new Date();
            date.setTime(date.getTime()+(days*24*60*60*1000));
            var expires = "; expires="+date.toGMTString();
        }
        else var expires = "";
        document.cookie = name+"="+value+expires+"; path=/";
    }

    function readCookie(name) {
        var nameEQ = name + "=";
        var ca = document.cookie.split(';');
        for(var i=0;i < ca.length;i++) {
            var c = ca[i];
            while (c.charAt(0)==' ') c = c.substring(1,c.length);
            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
        }
        return null;
    }

    function eraseCookie(name) {
        createCookie(name,"",-1);
    }

    function switchImage()
    {
      var images = [];
      images[0] = "I_am_Super_Magnet%21.jpg";
      images[1] = "World_In_My_Hand%21.jpg";

      var index = readCookie('index'); //sessionStorage.getItem('index');

      if(index == null) index = 0;//set index to zero if null

      index = parseInt(index);// parse index to integer, because sessionStorage.getItem() return string data type.

      if(index == 0)
      {
        document.getElementById("locationA").src=images[index];
        document.getElementById("locationB").src=images[index+1];
        index = index + 1;
      }
      else if(index == 1)
      {
        document.getElementById("locationA").src=images[index];
        document.getElementById("locationB").src=images[index-1];
        index = index - 1;
      }
      createCookie('index', index); //sessionStorage.setItem('index', index);
    }
    </script>
  </head>
  <body onload="switchImage()">
    <img id='locationA' src='src_locationA'>        
    <img id='locationB' src='src_locationB'>
  </body>
</html> 
```

# java - 如果条件导致程序强制关闭

> ID：14332519
> 
> 赞同：1
> 
> 时间：2013-01-15T06:54:46.033
> 
> 标签：java, android, if-statement

我正在做一个 android 应用程序，我正在考虑创建一个主题选项。好吧，我想做的只是让用户单击代表主题的图像按钮。当他点击它时，我开始一个新的活动，即我将他引导到主页。我还创建了一些整数变量，当用户单击按钮时设置为 1。

然后在其他类中，我所做的就是检查变量是否为 1，并根据我应用主题。通过主题我的意思是我只是改变背景壁纸。但这不起作用。我的意思是代码有效，但如果使用 if 循环检查变量值然后应用效果，则会导致错误。

这是完整的代码：

```
package com.example.themetest;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageButton;
import android.widget.LinearLayout;

public class MainActivity extends Activity implements OnClickListener{

    ImageButton ib1;
    ImageButton ib2;
    int water=0;
    int fire=0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ib1 = (ImageButton) findViewById(R.id.imageButton1);
        ib2 = (ImageButton) findViewById(R.id.imageButton2);
        ib1.setOnClickListener(this);
        ib2.setOnClickListener(this);

    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        switch(v.getId()){
        case R.id.imageButton1:
            water = 1;
            Intent wi = new Intent("com.example.themetest.THEME");
            startActivity(wi);
            break;

        case R.id.imageButton2:
            fire = 1;
            Intent fi = new Intent("com.example.themetest.THEME");
            startActivity(fi);
            break;
        }
    }

} 
```

这是我检查哪个变量设置为 1 并应用效果的另一个类。

```
package com.example.themetest;

import java.io.InputStream;

import android.app.Activity;
import android.content.res.Resources;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.widget.EditText;
import android.widget.LinearLayout;

public class Theme extends Activity{

    MainActivity main;
    Resources res;
    Drawable drawable;
    LinearLayout linearLayout;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.theme);

        if(main.water==1){

            res = getResources(); 
            drawable = res.getDrawable(R.drawable.water_theme); 
            linearLayout =   (LinearLayout)findViewById(R.id.ll); 
            linearLayout.setBackgroundDrawable(drawable);
            }
            else if(main.fire==1){
                res = getResources(); 
                drawable = res.getDrawable(R.drawable.fire_theme); 
                linearLayout =   (LinearLayout)findViewById(R.id.ll); 
                linearLayout.setBackgroundDrawable(drawable);
        }
            else{
                res = getResources(); 
                drawable = res.getDrawable(R.drawable.ic_launcher); 
                linearLayout =   (LinearLayout)findViewById(R.id.ll); 
                linearLayout.setBackgroundDrawable(drawable);
        }

    }

    } 
```

我可以在不使用 if 循环的情况下更改墙纸，但我想这样做是行不通的。谁能告诉我为什么？

日志猫：

```
01-15 12:08:23.339: D/dalvikvm(273): GC_EXTERNAL_ALLOC freed 767 objects / 55936 bytes in 235ms
01-15 12:08:25.539: D/AndroidRuntime(273): Shutting down VM
01-15 12:08:25.539: W/dalvikvm(273): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
01-15 12:08:25.559: E/AndroidRuntime(273): FATAL EXCEPTION: main
01-15 12:08:25.559: E/AndroidRuntime(273): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.themetest/com.example.themetest.Theme}: java.lang.NullPointerException
01-15 12:08:25.559: E/AndroidRuntime(273):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
01-15 12:08:25.559: E/AndroidRuntime(273):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
01-15 12:08:25.559: E/AndroidRuntime(273):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-15 12:08:25.559: E/AndroidRuntime(273):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-15 12:08:25.559: E/AndroidRuntime(273):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-15 12:08:25.559: E/AndroidRuntime(273):  at android.os.Looper.loop(Looper.java:123)
01-15 12:08:25.559: E/AndroidRuntime(273):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-15 12:08:25.559: E/AndroidRuntime(273):  at java.lang.reflect.Method.invokeNative(Native Method)
01-15 12:08:25.559: E/AndroidRuntime(273):  at java.lang.reflect.Method.invoke(Method.java:521)
01-15 12:08:25.559: E/AndroidRuntime(273):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-15 12:08:25.559: E/AndroidRuntime(273):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-15 12:08:25.559: E/AndroidRuntime(273):  at dalvik.system.NativeStart.main(Native Method)
01-15 12:08:25.559: E/AndroidRuntime(273): Caused by: java.lang.NullPointerException
01-15 12:08:25.559: E/AndroidRuntime(273):  at com.example.themetest.Theme.onCreate(Theme.java:29)
01-15 12:08:25.559: E/AndroidRuntime(273):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-15 12:08:25.559: E/AndroidRuntime(273):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
01-15 12:08:25.559: E/AndroidRuntime(273):  ... 11 more
01-15 12:08:31.089: I/Process(273): Sending signal. PID: 273 SIG: 9 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T07:03:59.167

我认为更好的方法是传递所选主题用户的名称或代码以及意图。

这可能会有所帮助：[通过 Intent 传递数据并接收它](https://stackoverflow.com/questions/4308232/passing-data-through-intent-and-receiving-it)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:04:16.163

您不能以这种方式访问​​其他活动变量，更好的方法（例如）是使用常量类..

```
public class Constants {
    public static int water=0;
    public staticint fire=0;
} 
```

主要活动：

```
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

    switch(v.getId()){
    case R.id.imageButton1:
        Constants.water = 1;
        Intent wi = new Intent("com.example.themetest.THEME");
        startActivity(wi);
        break;

    case R.id.imageButton2:
        Constants.fire = 1;
        Intent fi = new Intent("com.example.themetest.THEME");
        startActivity(fi);
        break;
    }
} 
```

主题：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.theme);

    if(Constants.water==1){

        res = getResources(); 
        drawable = res.getDrawable(R.drawable.water_theme); 
        linearLayout =   (LinearLayout)findViewById(R.id.ll); 
        linearLayout.setBackgroundDrawable(drawable);
        }
        else if(Constants.fire==1){
            res = getResources(); 
            drawable = res.getDrawable(R.drawable.fire_theme); 
            linearLayout =   (LinearLayout)findViewById(R.id.ll); 
            linearLayout.setBackgroundDrawable(drawable);
    }
        else{
            res = getResources(); 
            drawable = res.getDrawable(R.drawable.ic_launcher); 
            linearLayout =   (LinearLayout)findViewById(R.id.ll); 
            linearLayout.setBackgroundDrawable(drawable);
    }

} 
```

# ios - iOS中的破碎纹理

> ID：14332520
> 
> 赞同：2
> 
> 时间：2013-01-15T06:54:47.907
> 
> 标签：ios, opengl-es, xamarin.ios, core-graphics, opengl-es-2.0

我在 MonoTouch 中使用 OpenTK 在 iOS 中渲染一些纹理，并且一些纹理出现损坏。这是 iPad 屏幕截图的特写，显示了一个正确渲染的纹理（顶部）和下面的两个损坏的纹理：

![破碎的纹理](../Images/8ae40c7287582c45ce5097424a3e26d8.png)

我没有做任何奇怪的事情。我正在使用`CGImage`-> `CGBitmapContext`->从半透明 PNG 加载纹理`GL.TexImage2D`。我用两个三角形渲染每个精灵，我的片段着色器只是从采样器中读取纹素，`texture2D()`并将其乘以 a`uniform vec4`以着色纹理。

文件本身似乎没问题，使用 Mono for Android 的同一应用程序的 Android 端口，以及完全相同的二进制资源完美呈现它们。如您所见，其他透明纹理也可以正常工作。

如果有帮助，当我在模拟器中运行程序时，几乎所有纹理都会被破坏。即使我重建程序，这个问题也仍然存在。

有关如何找出导致此问题的原因的任何想法？

这是我的顶点着色器：

```
attribute vec4 spritePosition;
attribute vec2 textureCoords;
uniform mat4 projectionMatrix;
uniform vec4 color;

varying vec4 colorVarying;
varying vec2 textureVarying;

void main()
{
    gl_Position = projectionMatrix * spritePosition;
    textureVarying = textureCoords;

    colorVarying = color;
} 
```

这是我的片段着色器：

```
varying lowp vec4 colorVarying;
varying lowp vec2 textureVarying;
uniform sampler2D spriteTexture;

void main()
{
    gl_FragColor = texture2D(spriteTexture, textureVarying) * colorVarying;
} 
```

我正在加载这样的图像：

```
using (var bitmap = UIImage.FromFile(resourcePath).CGImage)
{
    IntPtr pixels = Marshal.AllocHGlobal(bitmap.Width * bitmap.Height * 4);
    using (var context = new CGBitmapContext(pixels, bitmap.Width, bitmap.Height, 8, bitmap.Width * 4, bitmap.ColorSpace, CGImageAlphaInfo.PremultipliedLast))
    {
        context.DrawImage(new RectangleF(0, 0, bitmap.Width, bitmap.Height), bitmap);
        int[] textureNames = new int[1];
        GL.GenTextures(1, textureNames);
        GL.BindTexture(TextureTarget.Texture2D, textureNames[0]);
        GL.TexParameter(TextureTarget.Texture2D, TextureParameterName.TextureMagFilter, (int)All.Linear);
        GL.TexParameter(TextureTarget.Texture2D, TextureParameterName.TextureMinFilter, (int)All.Linear);
        GL.TexParameter(TextureTarget.Texture2D, TextureParameterName.TextureWrapS, (int)All.ClampToEdge);
        GL.TexParameter(TextureTarget.Texture2D, TextureParameterName.TextureWrapT, (int)All.ClampToEdge);
        GL.TexImage2D(TextureTarget.Texture2D, 0, PixelInternalFormat.Rgba, bitmap.Width, bitmap.Height, 0, PixelFormat.Rgba, PixelType.UnsignedByte, pixels);
        CurrentResources.Add(resourceID, new ResourceData(resourcePath, resourceType, 0, new TextureEntry(textureNames[0], bitmap.Width, bitmap.Height)));
    }
} 
```

在我的 onRenderFrame 中，我有这个：

```
GL.ClearColor(1.0f, 1.0f, 1.0f, 1.0f);
GL.Clear(ClearBufferMask.ColorBufferBit);
GL.Enable(EnableCap.Blend);
GL.BlendFunc(BlendingFactorSrc.SrcAlpha, BlendingFactorDest.OneMinusSrcAlpha);
GL.UseProgram(RenderingProgram);
GL.VertexAttribPointer((int)ShaderAttributes.SpritePosition, 2, VertexAttribPointerType.Float, false, 0, squareVertices);
GL.VertexAttribPointer((int)ShaderAttributes.TextureCoords, 2, VertexAttribPointerType.Float, false, 0, squareTextureCoords);
GL.EnableVertexAttribArray((int)ShaderAttributes.SpritePosition);
GL.EnableVertexAttribArray((int)ShaderAttributes.TextureCoords);
//...
GL.ActiveTexture(TextureUnit.Texture0);
GL.BindTexture(TextureTarget.Texture2D, textureEntry.TextureID);
GL.Uniform1(Uniforms[(int)ShaderUniforms.Texture], 0);
// ...    
GL.DrawArrays(BeginMode.TriangleStrip, 0, 4); 
```

该三角形条由构成纹理的两个三角形组成，顶点和纹理坐标设置为我想要显示我的精灵的位置。`projectionMatrix`是一个简单的正射投影矩阵。

正如你所看到的，我不想在这里做任何花哨的事情。这都是非常标准的代码，它适用于某些纹理，所以我认为总的来说代码是可以的。我也在 Mono for Android 中做几乎相同的事情，它运行良好，没有任何纹理损坏。

像这样的损坏颜色在某处闻起来像未初始化的变量，并且只在透明部分发生这种情况让我相信我在某处有未初始化的 alpha 值。但是，`GL.Clear(ClearBufferMask.ColorBufferBit)`应该清除我的 alpha 值，即使这样，背景纹理的 alpha 值也是 1，并且使用 current `BlendFunc`，应该将这些像素的 alpha 设置为 1。之后，透明纹理的 alpha 值范围为 0 到 1 ，所以它们应该正确混合。我在任何地方都看不到未初始化的变量。

……或者……这都是 的错`CGBitmapContext`。也许通过这样做`DrawImage`，我不是在对源图像进行 blitting，而是通过混合来绘制它，而垃圾数据来自我这样做的时候`AllocGlobal`。这并不能解释为什么它始终只发生在这两种纹理上......（我将其标记为核心图形，所以也许石英人之一可以提供帮助）

如果您想查看更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:33:11.227

好吧，和我预料的一样。我得到的内存`Marshal.AllocHGlobal`没有初始化为任何东西，`CGBitmapContext.DrawImage`只是将图像呈现在上下文中的任何内容之上，这是垃圾。

所以解决这个问题的方法就是`context.ClearRect()`在我调用之前插入一个调用`context.DrawImage()`。

我不知道为什么它与其他（更大的）纹理一起工作得很好，但也许是因为在这些情况下，我请求了一大块内存，所以 iOS（或单声道）内存管理器获得了一个新的归零块，而对于较小的纹理，我正在重用之前释放的内存，这些内存尚未归零。

如果您的内存被分配给`0xBAADF00D`使用调试堆时的东西，就像`LocalAlloc`在 Windows API 中那样，那就太好了。

另外两件有些相关的事情要记住：

1.  在我发布的代码中，我没有释放使用`AllocHGlobal`. 这是一个错误。`GL.TexImage2D`将纹理复制到 VRAM，因此在此处释放它是安全的。

2.  `context.DrawImage`正在将图像绘制到新的上下文中（而不是从图像中读取原始像素），而 Core Graphics*仅*适用于预乘 alpha（我觉得这很愚蠢）。因此，如果我以这种方式加载，加载的纹理将始终加载预乘 alpha。这意味着我还必须将 alpha 混合函数更改为`GL.BlendFunc(BlendingFactorSrc.One, BlendingFactorDest.OneMinusSrcAlpha)`，并确保所有交叉渐变代码都适用于整个 RGBA，而不仅仅是 alpha 值。

# html - 即使客户端和服务器在同一台机器上，xmlhttprequest 也总是返回状态 0

> ID：14332521
> 
> 赞同：1
> 
> 时间：2013-01-15T06:54:50.863
> 
> 标签：html, xmlhttprequest

我知道这个问题被问了好几次，我指的是所有这些帖子，即使在那之后也无法解决我的问题。我为客户端服务器通信创建了一个 html 页面。这是代码

```
<!DOCTYPE html>
<html>
    <head>
        <title>Sandbox</title>

        <script type="text/javascript">

            function log (text) {
                document.getElementById("contents").innerHTML = document.getElementById("contents").innerHTML + "<br />" + text;
            }

            function ready() {
                log("Ready.");
                var xmlhttp = new XMLHttpRequest();

                xmlhttp.onreadystatechange = function () {
                    log("State: " + xmlhttp.readyState + ", Status: " + xmlhttp.status
+ ", Statustext: " + xmlhttp.responseText);
                    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                        log("CSV Content:");
                        log(xmlhttp.responseText);
                    }
                };

                log("Open.");
                xmlhttp.open("GET", "http://10.5.13.142/iptvservice.xml", false);
                log("Send.");
                xmlhttp.send(null);
                log("Sent.");
                window.removeEventListener('DOMContentLoaded', ready, false);
            }

            window.addEventListener('DOMContentLoaded', ready, false);
        </script>

    </head>
    <body>
        <div id="contents">Loading.</div>
    </body>
</html> 
```

服务器是 Apache 服务器。我在安装服务器的同一台机器上运行此页面。在 Mozilla 状态码为 0 并且在加载时挂起。我没有得到什么问题。我已经读到如果你在同一个域上，你不需要在 manifest.json 上设置权限。那么我哪里出错了。请帮忙。

编辑：实际上我的要求是使用 phonegap 在 android 上运行此代码。所以我想使用java脚本。所以任何人都可以建议使用 xmlhttprequest 如何创建客户端服务器连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:59:31.113

sorry, but just now i got this link

[XMLHttpRequest Fails On Same Domain](https://stackoverflow.com/questions/12940800/xmlhttprequest-fails-on-same-domain)

but in my case Apache server giving xml page. So where i should put my script.and this is just for testing purpose i am using same machine, but after that i need to run same page on different machine. Then what would be the solution. sorry i am asking very simple question, but required little help.

Edit: just for information. I did change according to the link

> [http://www.skill-guru.com/blog/2011/02/04/adding-access-control-allow-origin-to-server-for-cross-domain-scripting/](http://www.skill-guru.com/blog/2011/02/04/adding-access-control-allow-origin-to-server-for-cross-domain-scripting/)

and then ran on google chrome, it worked, but it still not working on firefox. Anyways, atleast my code and server installation is proper.

# mysql - phpmyadmin 不允许我添加外键关系

> ID：14332523
> 
> 赞同：0
> 
> 时间：2013-01-15T06:54:54.737
> 
> 标签：mysql, phpmyadmin

我试图添加外键，但没有添加它。我读了几个关于这个问题的问题。但这些选项不适用于我。（[也尝试过这种方式](https://stackoverflow.com/a/6244893/1395178)

我的表结构如下

**tab_project**

*列名*

ProjectID --> 主键

项目名称

**tab_project_day**

主键----> ProjectID + Day

外键 ----> ProjectID 引用 tab_project 中的 ProjectID

![在此处输入图像描述](../Images/efc97a51bdb36a550b30c3ea1941dd13.png)

**tab_photo**

主键----> ![在此处输入图像描述](../Images/e862df64aafcf2744c08215f1680ea40.png)

我想按如下方式创建 tab_photo 外键：

tab_photo.ProjectID --- > 参考 tab_project_day.ProjectID

tab_photo.Day ------- > 参考 tab_project_day.day

在这里它不允许我添加 tab_photo.Day 键。

我试过这个——

```
ALTER TABLE `tab_photo` ADD FOREIGN KEY (`Day`) REFERENCES
`xyz`.`tab_project_day`(`Day`) ON DELETE RESTRICT ON UPDATE RESTRICT; 
```

它给出了以下错误：

```
#1005 - Can't create table 'xyz.#sql-97c_1c6' (errno: 150) 
```

这是什么原因？请帮忙！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:11:50.907

请检查这两个表的整理顺序。我发现如果表 A 与表 B 的排序规则不同，则无法创建外键。两个表必须是相同的排序规则。此外，列需要是相同的排序规则。

我怀疑这可能是你的问题。运行以下查询以查看排序规则

表整理：

```
SELECT   TABLE_NAME,
         TABLE_COLLATION
 FROM    INFORMATION_SCHEMA.TABLES
 WHERE   TABLE_NAME = "tab_project" 
         OR TABLE_NAME="tab_project_day" 
```

列排序：

```
SELECT       TABLE_NAME
             , COLUMN_NAME
             , COLLATION_NAME
FROM INFORMATION_SCHEMA.COLUMNS
WHERE   TABLE_NAME = "tab_project" 
        OR TABLE_NAME="tab_project_day" 
```

# java - 在 log4j 中使用系统属性或变量

> ID：14332525
> 
> 赞同：17
> 
> 时间：2013-01-15T06:55:04.630
> 
> 标签：java, log4j

我想这样做：

```
<appender name="ErrorLog" class="org.apache.log4j.FileAppender">
        <param name="File" value="${error.log.path}"/>
        <param name="Append" value="true" />
        <param name="Threshold" value="ERROR"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%C{1} %L [%t] %d{dd MMM,yyyy HH:mm:ss.SSS} %-5p - %m%n" />
        </layout>
    </appender> 
```

注意这一行：`<param name="File" value="${error.log.path}"/>`

我试图设置这样的值：

```
public static void main(String[] args) {
     System.setProperty("error.log.path", "/test/crm/log/error.log");
     ApplicationContext context = new ClassPathXmlApplicationContext("blah.xml");
     ..........
     .......... 
  } 
```

但我没有看到任何效果。

在调用方法之前是否配置了 log4j `main`？

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-15T08:03:36.953

看看[这个线程](https://stackoverflow.com/questions/2810926/how-to-give-dynamic-file-name-in-the-appender-in-log4j-xml)

看起来你做的一切都是正确的。我认为在主类中设置属性`System.setProperty()`和通过命令行指定属性之间没有任何区别，只要它发生在实际 log4j 初始化之前。

我认为您的问题是您的日志记录框架在您指定属性*之前被加载。*我可以说，当您调用配置器时，日志框架 (log4j) 将被配置。类似的东西`BasicConfigurator.configure()`（在你的情况下是它的 xml 配置器）。

否则，第一次尝试使用日志会导致类似“log4j 配置不正确”的消息。

真正的问题是您的带有“main”的代码片段是否过于简单。

考虑到这一点，我要问的另一个问题是——您是在某个容器内运行，还是在运行真正的 vanilla 方法 main 并自行配置所有内容？我问是因为如果你在容器中运行，容器本身可能会以某种方式配置其日志记录，例如 JBoss 会这样做。在这种情况下，需要进行更多调查。

希望这可以帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-01T13:22:47.920

系统属性可以用作 ${user.home}，从这里选择需要[http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)

例子 ：

```
<appender name="errorLog" class="com.qait.logger.IOPFileAppender">
    <param name="Threshold" value="ERROR" />
    <param name="File"
        value="${user.home}/Harvestors/IOP Error Logs/error.log" />
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d%-5p  [%c{1}] %m %n" />
    </layout>
    <filter class="org.apache.log4j.varia.LevelMatchFilter">
        <param name="LevelToMatch" value="ERROR" />
        <param name="AcceptOnMatch" value="true" />
    </filter>
    <filter class="org.apache.log4j.varia.DenyAllFilter" />
</appender> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T07:31:55.987

您可以通过务实地配置 appender 来做到这一点

```
 FileAppender fa = new FileAppender();
  fa.setFile("/test/crm/log/error.log");
  fa.setLayout(new 
   PatternLayout("%C{1} %L [%t] %d{dd MMM,yyyy HH:mm:ss.SSS} %-5p - %m%n"));
  fa.setThreshold(Level.ERROR);
  fa.setAppend(true);
  fa.activateOptions();
  Logger.getRootLogger().addAppender(fa);
  // similarly you can add all appenders.

 // or just append file name alone 
 Logger log = Logger.getLogger(YourClass.class);
 FileAppender appender = (FileAppender) log.getAppender("ErrorLog");
 appender.setFile("appender"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-25T06:21:16.453

通过“sys:”前缀访问您的财产。

例子：

```
 <param name="File" value="${sys:error.log.path}"/> 
```

有关更多信息，请点击此链接：[https ://logging.apache.org/log4j/2.x/manual/lookups.html](https://logging.apache.org/log4j/2.x/manual/lookups.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T07:35:16.887

设置系统属性在这里不生效。您需要在执行时将其作为参数传递给 java。尝试

```
 java -Derror_log_path=/test/crm/log/error.log 
```

**注意：**我不确定 dot 是否`.`在那里工作，所以用下划线替换它`_`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-18T02:36:06.190

Maven文档：

> 系统属性。格式为 ${sys:some.property} 和 ${sys:some.property:-default_value}。

来自[Maven 属性替换](https://logging.apache.org/log4j/2.x/manual/configuration.html)

# c# - ReportExecutionServiceSoapClient.Render 到 reportviewer 控件

> ID：14332527
> 
> 赞同：1
> 
> 时间：2013-01-15T06:55:07.137
> 
> 标签：c#, reporting-services, reporting

有没有办法让 ReportExecutionServiceSoapClient.Render 方法将报告呈现给reportviewer控件。我找到了呈现为 PDF 的示例，但不是报表查看器控件。

这是一个渲染到 pdf 的示例 [ReportExecutionService.Render 方法](http://msdn.microsoft.com/en-us/library/reportexecution2005.reportexecutionservice.render.aspx)

如果我可以渲染为 html，那也很好。我正忙着为我的 MVC 应用程序创建一个报告查看器，我可以只指向报告服务 Web 服务，然后所有报告都将作为我的应用程序的一部分提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-17T10:32:19.767

Try this piece of code: [http://ikbalouch.wordpress.com/2010/04/27/calling-sql2008-reporting-server-webservice-programmaticall/](http://ikbalouch.wordpress.com/2010/04/27/calling-sql2008-reporting-server-webservice-programmaticall/)

or try below:

[http://geekswithblogs.net/stun/archive/2010/02/26/executing-reporting-services-web-service-from-asp-net-mvc-using-wcf-add-service-reference.aspx](http://geekswithblogs.net/stun/archive/2010/02/26/executing-reporting-services-web-service-from-asp-net-mvc-using-wcf-add-service-reference.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:50:21.733

据它所知，ReportViewer 控件只是呈现自己的报表格式，因此您可以将报表格式发送到 ReportViewer 控件，或者只是将报表呈现为 HTML4 并使用 WebBrowser 控件或类似的东西。

# jquery - 在 jQuery 中调用淘汰视图模型函数

> ID：14332533
> 
> 赞同：2
> 
> 时间：2013-01-15T06:55:32.740
> 
> 标签：jquery, knockout.js, jscrollpane

如何在 jQuery 函数中调用 viewmodel 函数？我只想从 Javascript 函数中调用 viewmodel 函数的函数。

```
function ContactsViewModel(data) {
  var self = this;
  // Editable data
  self.Contacts = ko.observableArray(JSON.parse(data));
  self.limit = ko.observable(20);
  self.changeNumber = function(item){
    self.limit(self.limit()+20);
    self.Contacts.push(item);
  }
  self.myPostProcessingLogic = function(elements) {
    if ($('#KnockOutContacts').children().length === ko.toJS(self.Contacts).length) {
      // Only now execute handler
      jq();
    }
  }
} 
```

如何`changeNumber`从`jscroll`窗格功能调用？

```
$('.jspScrollable').bind(
  'jsp-arrow-change',
  function(event, isAtTop, isAtBottom, isAtLeft, isAtRight) {
    // Now look at the is* parameters and do what you
    // need to do. All four of the is* parameters are booleans.
    if(isAtBottom) {
      ContactsViewModel.changeNumber();
    }
  }
); 
```

数据来自服务器

```
function returnData(url,data,type){
    $.post(url, data, function(returnedData) {

    if(type == "contacts")
    {   
    ko.applyBindings(new ContactsViewModel(returnedData),$("#KnockOutContacts")[0]);    
    }
    else if(type == "logs")
    {
    ko.applyBindings(new LogsViewModel(returnedData),$("#KnockOutLogs")[0]);    
    }
    else if(type == "sms")
    {
        ko.applyBindings(new SmsViewModel(returnedData,"#KnockOutSms"),$("#KnockOutSms")[0]);   
    ko.applyBindings(new SmsViewModel(returnedData,"#KnockOutSmsData"),$("#KnockOutSmsData")[0]);   

    }
});
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T04:29:06.303

我同意 Anders 关于使用自定义绑定的观点。但是，如果您真的想这样做，请尝试从您的 ContactsViewModel 返回“自我”（参见下面的示例）

```
function ContactsViewModel(data) {
  var self = this;
  // Editable data
  self.Contacts = ko.observableArray(JSON.parse(data));
  self.limit = ko.observable(20);
  self.changeNumber = function(item){
    self.limit(self.limit()+20);
    self.Contacts.push(item);
  }
  self.myPostProcessingLogic = function(elements) {
    if ($('#KnockOutContacts').children().length === ko.toJS(self.Contacts).length) {
      // Only now execute handler
      jq();
    }
  }

  //return self
  return self;

}

//Variable you'll use to reference in jQuery
var myVm = ContactsViewModel(yourdata);
ko.applyBindings(myVm);

myVm.changeNumber(yourItem); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:44:58.080

创建一个连接 jQuery 内容的自定义绑定。你的视图模型中不应该有任何与 DOM 相关的代码，它是一种反模式。

类似的东西（不工作的代码）

```
ko.bindingHandlers.scrollable = {
   init: function(element, valueAccessor) {
      var onScroll = valueAccessor();
      $(element).bind(
        'jsp-arrow-change',
        function(event, isAtTop, isAtBottom, isAtLeft, isAtRight) {
        // Now look at the is* parameters and do what you
        // need to do. All four of the is* parameters are booleans.
        if(isAtBottom) {
           onScroll();
        }
      });
   }
}; 
```

然后从你的角度使用

```
<div data-bind="scrollable: changeNumber"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-21T09:15:23.083

你可以这样做：

* * *

**视图模型**

```
var searchViewModel = function () {
    var self = this;

    self.search = function (param) {
        //do something
    };
} 
```

* * *

**HTML**

```
<button data-bind="click: function () { Search() }" class="" id="searchBtn">Search</button> 
```

* * *

**jQuery**

```
function Search() {
    // paramvalue = 1; 
    viewModel.search(paramvalue);                  
} 
```

# php - 无法在 Debian 上安装 Imagick for PHP

> ID：14332539
> 
> 赞同：9
> 
> 时间：2013-01-15T06:56:12.760
> 
> 标签：php, imagick

把我的头发拉出来。PHP 从源代码构建，一切正常。现在需要安装imagick，无法安装。

我在内核 3.7.1 和 PHP 5.3.20 上运行 Debian（我的应用程序支持的最后一个版本，不能转到 PHP 5.4）。

```
pecl install imagick
...
checking ImageMagick MagickWand API configuration program... found in /usr/bin/Wand-config
checking if ImageMagick version is at least 6.2.4... configure: error: no. You need at least Imagemagick version 6.2.4 to use Imagick.
ERROR: `/tmp/pear/temp/imagick/configure --with-imagick' failed 
```

然而，我安装了 6.7.7 版本：

```
# convert --version
Version: ImageMagick 6.7.7-10 2012-11-06 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2012 ImageMagick Studio LLC
Features: OpenMP 
```

我还尝试安装最新的测试版（pecl install imagick-beta），结果相同。还尝试了旧版本 2.3.0，结果相同。还尝试下载源代码、phpize 和配置——结果相同。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-16T09:23:10.733

我终于能够自己解决这个问题。我最终做了：

```
apt-get remove graphicsmagick-libmagick-dev-compat imagemagick imagemagick-common
apt-get autoremove 
```

然后：

```
apt-get install libmagickwand-dev 
```

最后能够通过 pecl 安装 imagick：

```
pecl install imagick-beta 
```

# javascript - 返回 Text.search(/[^a-zA-Z]+/) === -1?

> ID：14332543
> 
> 赞同：0
> 
> 时间：2013-01-15T06:56:37.333
> 
> 标签：javascript

如果在给定的字符中找到任何特殊字符会返回`text value` 什么，如果没有呢？

`return Text.search(/[^a-zA-Z]+/) === -1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:20:33.037

`return Text.search(/[^a-zA-Z]+/) === -1`

应该返回：**假**

你可以试试这个：http: [//jsfiddle.net/XNJxT/786/](http://jsfiddle.net/XNJxT/786/)

我虽然如果它发现任何特殊字符那将是**错误的**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T07:07:52.590

这意味着您正在字符串中查找非英文字符（不区分大小写）。如果遇到这样的字符，它将返回 false。您正在反转字符集，`[a-zA-Z]`因此它正在寻找任何其他字符。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-15T07:03:17.710

这是一个正则表达式。“^”表示以 开头，“a-zA-Z”表示字母 a 到 z 忽略大小写，“+”表示一个或多个。

# jdeveloper - JDeveloper 调试器中的智能数据和数据选项卡有什么区别？

> ID：14332544
> 
> 赞同：0
> 
> 时间：2013-01-15T06:56:40.800
> 
> 标签：jdeveloper

我想知道Jdeveloper 的调试器视图中调用的两个选项卡`Data`和选项卡之间的区别？`Smart Data`当我尝试调试时，我在两个选项卡中看到相同的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:15:57.850

调试器窗口的数据选项卡显示当前范围内的所有变量，如果有很多变量，这可能会让人不知所措。一种解决方案是在您选择的变量上设置“Watches”，这样您就可以只关注您感兴趣的变量，这些变量出现在 Watches 选项卡中。这没关系，但需要您做一些腿部工作，因为您需要配置所有手表，并且在调试时有点麻烦。智能数据的工作方式不同，因为它假定您将对当前调试器行所在位置的变量 +/- X 行感兴趣，并且在您调试代码时它会自动显示和隐藏“智能数据”选项卡中的变量基于这个 +/- 线的滑动窗口的线。

它通过首选项 -> 调试器 -> 智能数据 -> 要分析的行数进行配置。

# git - 编辑数百条 Git 提交消息的最快方法是什么？

> ID：14332551
> 
> 赞同：48
> 
> 时间：2013-01-15T06:56:59.733
> 
> 标签：git

我有一个相当大的 Git 存储库，其中包含 1000 次提交，最初是从 SVN 导入的。在我公开我的 repo 之前，我想清理数百条在我的新 repo 中没有意义的提交消息，以及删除所有添加的 git-svn 信息文本。

我知道我可以使用 'git rebase -i' 然后使用 'git commit --amend' 来编辑每个单独的提交消息，但是要编辑数百条消息，这对你知道的事情来说是一个巨大的痛苦。

有没有更快的方法来编辑所有这些提交消息？理想情况下，我会将每条提交消息都列在一个文件中，我可以在一个文件中将它们全部编辑。

谢谢！

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2016-06-21T10:04:45.853

这是一个老问题，但由于没有提到`git filter-branch`，我只加了两分钱。

我最近不得不大量替换提交消息中的文本，用另一个文本块替换一个文本块，而不更改其余的提交消息。例如，我必须将*Refs: #xxxxx*替换为*Refs: #22917*。

我`git filter-branch`是这样用的

```
git filter-branch --msg-filter 'sed "s/Refs: #xxxxx/Refs: #22917/g"' master..my_branch 
```

*   我使用了`--msg-filter`仅编辑提交消息的选项，但您可以使用其他过滤器来更改文件、编辑完整的提交信息等。
*   我将其限制`filter-branch`为仅将其应用于不在 master ( `master..my_branch`) 中的提交，但您可以通过省略提交范围将其应用于整个分支。

按照文档中的建议，在您的分支副本上尝试此操作。希望有帮助。

* * *

用于答案的来源

*   何时使用该功能的用例：[https ://git-scm.com/book/en/v2/Git-Tools-Rewriting-History#The-Nuclear-Option:-filter-branch](https://git-scm.com/book/en/v2/Git-Tools-Rewriting-History#The-Nuclear-Option:-filter-branch)
*   函数参考（带有选项列表）：[https ://git-scm.com/docs/git-filter-branch](https://git-scm.com/docs/git-filter-branch)
*   重写示例：[https ://davidwalsh.name/update-git-commit-messages](https://davidwalsh.name/update-git-commit-messages)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-15T07:03:03.763

这很容易做到，如下所示：

*   执行第一次导入。
*   将所有提交导出为文本：

    ```
    git format-patch -10000 
    ```

    数量应大于提交总数。这将创建大量名为`NNNNN-commit-description.patch`.

*   使用一些脚本编辑这些文件。（不要触摸其中的任何内容，除了带有提交消息的顶部）。
*   将已编辑的文件复制或移动到空的 git repo 或分支。
*   将所有已编辑的提交导入回来：

    ```
    git am *.patch 
    ```

这仅适用于单个分支，但效果很好。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2020-06-18T20:12:22.993

现在推荐使用git-filter-repo [https://github.com/newren/git-filter-repo 。](https://github.com/newren/git-filter-repo)我像这样使用它：

```
PS C:\repository> git filter-repo --commit-callback '
>> msg = commit.message.decode(\"utf-8\")
>> newmsg = msg.replace(\"old string\", \"new string\")
>> commit.message = newmsg.encode(\"utf-8\")
>> ' --force
New history written in 328.30 seconds; now repacking/cleaning...
Repacking your repo and cleaning out old unneeded objects
HEAD is now at 087f91945a blah blah
Enumerating objects: 346091, done.
Counting objects: 100% (346091/346091), done.
Delta compression using up to 8 threads
Compressing objects: 100% (82068/82068), done.
Writing objects: 100% (346091/346091), done.
Total 346091 (delta 259364), reused 346030 (delta 259303), pack-reused 0
Completely finished after 443.37 seconds.
PS C:\repository> 
```

您可能不想复制 powershell 额外的东西，所以这里只是命令：

```
git filter-repo --commit-callback '
msg = commit.message.decode(\"utf-8\")
newmsg = msg.replace(\"old string\", \"new string\")
commit.message = newmsg.encode(\"utf-8\")
' --force 
```

如果您想击中所有分支，请不要使用`--refs HEAD`. 如果您不想使用`--force`，可以在 clean 上运行它`git clone --no-checkout`。这让我开始了：[https ://blog.kawzeg.com/2019/12/19/git-filter-repo.html](https://blog.kawzeg.com/2019/12/19/git-filter-repo.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-09-15T09:23:39.513

您可以使用`git rebase -i`和替换`pick`为`reword`（或只是`r`）。然后 git rebase 在每次提交时停止，让您有机会编辑消息。

唯一的缺点是您不会一次看到所有消息，并且当您发现错误时无法返回。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-10-04T17:19:41.703

一个伟大而简单的方法是使用`git filter-branch --msg-filter ""`python 脚本。

python 脚本看起来像这样：

```
import os
import sys
import re

pattern = re.compile("(?i)Issue-\d{1,4}")

commit_id = os.environ["GIT_COMMIT"]
message   = sys.stdin.read()

if len(message) > 0:

    if pattern.search(message):
        message = pattern_conn1.sub("Issue",message)

print message 
```

您将进行的命令行调用是`git filter-branch -f --msg-filter "python /path/to/git-script.py"`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T07:47:26.070

As alternative, consider skipping the import of the whole repository. I would simply checkout, clean up and commit important points in the history.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-29T22:13:23.520

我混合使用这两种解决方案：

1.  Vscodium 和扩展“ [Git rebase 快捷方式](https://bokub.github.io/git-history-editor/)”使用`git rebase -i`简单方法

2.  [Git 历史编辑器](https://marketplace.visualstudio.com/items?itemName=trentrand.git-rebase-shortcuts)，它允许：

*   批量修改姓名+电子邮件
*   在精美的界面中重新编写 Git 提交消息
*   使用日期选择器更改提交日期

您粘贴您的提交，然后使用 Web 界面进行更改，它会为您提供一个正确的`git filter-branch`命令来粘贴到您的终端中。

界面截图：

[![Git 编辑历史](../Images/c36cf37aea9ce111c89cbaa762a1dac3.png)](https://i.stack.imgur.com/WoS2h.png)

祝你好运！

# ruby-on-rails - 从服务器到服务器的文件传输

> ID：14332552
> 
> 赞同：-1
> 
> 时间：2013-01-15T06:57:06.277
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nginx, fileserver

我想在我的 Rails 应用程序（使用 nginx 服务器）中使用两台服务器 - 首先用于 Web 应用程序，其次用于图像。用户可以在第一台服务器上传图片。上传后，图像立即传输到第二个服务器。传输后，用户可以在站点中查看图像。如何组织从服务器到服务器的文件传输？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:55:29.833

有多种方法可以做到这一点。我建议您首先在搜索引擎中输入以下单词，然后返回具体问题：nfs、scp、rsync、unison。

# python - Python/ttk/tKinter - 获取复选框的值

> ID：14332561
> 
> 赞同：0
> 
> 时间：2013-01-15T06:57:40.790
> 
> 标签：python, tkinter, ttk

按照 TkDocs 教程 (http://www.tkdocs.com/tutorial/widgets.html#checkbutton) 我正在尝试设置一个复选框，但我不能完全按照我应该做的事情来“获取”切换值。

```
 self.valAStatus = StringVar()
    self.checkA = ttk.Checkbutton(self.mainframe, text='A', command = lambda: self.getStatus(self.boxA, "A"),variable=self.valAStatus, onvalue='letter', offvalue='colour') 
```

和

```
def getStatus(self, boxRef, value):
    boxRef.insert(1, value) 
```

我不确定的是如何从对象中`onvalue`获取`offvalue``self.checkA`

我不确定我是否正在查看 StringVar `self.valAStatus` （导致`PY_VAR0`并且没有属性`onvalue`）或者我是否应该查看`self.checkA`对象（导致`.40972728.40972656.40972800.41009024`并且没有属性`onvalue`）。

我可能在文档中遗漏了一些东西，但如果有人能指出它在做什么，那么我可以得到`(on|off)value`我有义务的..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:19:00.517

答案是`self.valAStatus.get()`返回与该复选框关联的值（在本例中为`self.valAStatus`）。

# actionscript-3 - flex 4中的标签焦点颜色和标签焦点可见性

> ID：14332562
> 
> 赞同：0
> 
> 时间：2013-01-15T06:57:43.397
> 
> 标签：actionscript-3, apache-flex, flex4.6

有任何方法可以在 flex 4.5 中定义**标签焦点颜色和可见性**以及如何设置标签边框颜色。

# c - What is in the DATA segment of Mac OS executable?

> ID：14332568
> 
> 赞同：2
> 
> 时间：2013-01-15T06:58:10.503
> 
> 标签：c, linker

I am now reading chapter 6 of the book *Expert C Programming* and very curious about the size of the data segment.

I wrote 3 programs to see the difference of the data segment.

My platform is MacBook Pro, OS X 10.8 and I use the command `clang xxx.c` to compile the code.

```
int main()
{
    int i, j;
    return 0;
} 
```

__TEXT 4096 __DATA 0

* * *

```
int arr[10000];
int main()
{
    int i, j;
    return 0;
} 
```

__TEXT 4096 __DATA 40960

* * *

```
int main()
{
    int i, j;
    int arr[10000];
    return 0;
} 
```

__TEXT 4096 __DATA 4096

Why are the all three sizes different from each other?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T07:05:48.983

除非你正在编写程序加载器，或者在嵌入式系统上工作，否则真的不需要关心不同的段。

然而，三个经典的标准段是：

*   **text**，其中包含实际的可执行代码
*   **data**，其中包含初始化的数据（例如初始化的全局变量）
*   和**bss**，其中包含未初始化的数据（例如未初始化的全局变量）

在函数内部的局部变量在运行时被放置在堆栈上，因此没有特定的段。

这些段通常是平台*页面大小*的倍数，在 i386 及其衍生版本上为 4096 字节。因此，即使只需要一个字节，段大小也会向上舍入到 4096 字节。在您的第二个示例中，您有 40000 字节的数据，这是四舍五入到最接近的 4096 倍数，即 40960。

如果有一个**bss**段，其中的数据通常会被程序加载器清零。关于**bss**段的另一个注意事项，它实际上不使用对象或可执行文件中的任何空间。由于它的数据是未初始化的，所以除了内存中的大小之外不需要存储任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T07:05:38.210

文本部分是程序文本（或代码）所在的位置。因此，在您的三个示例中它会保持不变是有道理的。

首先，您没有全局变量，没有字符串文字等。因此数据大小为零。

在您的第二个示例中，您有一个约 40 K 的全局缓冲区，它位于数据部分（实际上可能是 BSS，因为它未初始化，因此不会出现在可执行文件中。）

在您的第三个示例中，[缓冲区](http://en.wikipedia.org/wiki/Call_stack)位于`main()`. 您没有添加任何全局数据，所以我不太确定为什么它的数据大小不为零。

许多可执行格式会将这些节大小调整为便于系统执行的内容。Intel x86 页面大小为 4KiB，这就是为什么我怀疑链接器将这些部分对齐到 4096。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T07:04:57.507

在您的第二个示例中，数组是静态初始化的，即它在进程的整个生命周期内都存在。链接器为数据段中的 10000 个整数保留空间。

在您的第三个示例中，数组是在函数*的堆栈*`main()`上创建的，即它最初*不*存在，并且仅在进程进入后才被初始化*（*`main()`这与“进程的完整生命周期”不同，因为有运行时支持之前运行的代码，以及在其之后运行的清理内容）。链接器在数据节中为某些东西保留空间（我不太确定是什么），其余部分（4096 减去保留项目的大小）是节被页面对齐的效果（即，以页面的倍数分配大小，在这种情况下为 4k）。*`main()`*

# browser - Run Selenium RC script on any browser that is available on user's system

> ID：14332570
> 
> 赞同：0
> 
> 时间：2013-01-15T06:58:20.147
> 
> 标签：browser, system, selenium-rc

I have a selenium script which i want to run on some other user's machine. I have set 'firefox' as my default browser in the selenium script. Now the user's machine does not have 'firefox' installed on his machine. Is there any code available that can fetch which browser is installed on that user's machine and run the script in that browser?

I want to have 3 browsers in my script like IE, Firefox and Chrome. The script must run on any one browser which is installed on user's machine.

Any help will be appreciated. Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:06:09.600

您要么必须有一些代码来查找每种浏览器（例如查找可执行文件，例如 chrome.exe 或 firefox.exe），要么您可能能够摆脱一些尝试获取 Selenium 的 try-catch 块启动浏览器，并将任何异常视为“浏览器不存在”。

我建议专门检查每种浏览器类型是更好的选择。

然后，您可以建立一个可用浏览器的列表，并有一些代码来选择其中一个（基于某种优先级/偏好）作为 Selenium 的目标

# java - 兼容的 Java 编译器可以优化此代码吗？

> ID：14332577
> 
> 赞同：16
> 
> 时间：2013-01-15T06:59:06.127
> 
> 标签：java, optimization, compiler-construction, javac

我今天正在教授一门入门编程课程，并且正在学习一些涉及 Java 变量赋值的简单代码。代码的重点不是炫耀任何特别令人兴奋的东西，而是主要是为了确保学生理解变量赋值语句。

我在板上有以下方法，一次一行地跟踪它：

```
private void simpleMethod() {
    int myInt = 137;
    myInt = 42;
    myInt = myInt + 1;

    /* ... code using myInt ... */
} 
```

一个学生问我`myInt`在程序运行时是否真的会保存值 137 和 42，或者它是否会直接跳转到保存 43。我告诉学生代码将依次执行每一行，所以变量实际上会保存这些中间值。

不过，老实说，我不确定字节码`javac`会发出什么（完全忽略了 JVM 所做的优化）。（或任何 Java 编译器）是否`javac`合法允许优化愚蠢的赋值语句，而直接初始化`myInt`为 43？

根据`javap`，在我的系统上，上面用编译的代码`javac`产生

```
 0: sipush        137
   3: istore_1      
   4: bipush        42
   6: istore_1      
   7: iload_1       
   8: iconst_1      
   9: iadd          
  10: istore_1      
  11: return 
```

所以这里没有优化。不过，我的问题是优化这个是否*合法*，所以这并不能解决任何问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T07:59:57.117

JLS 仅指定程序产生的可观察行为的契约。由于`myInt`是本地的，优化确实可以在编译时进行优化，因为这会产生与规范一致的行为，并且规范中没有任何内容说它是不允许的（至少，不是我发现的！）。[规范的第 1 章](http://docs.oracle.com/javase/specs/jls/se7/html/jls-1.html)明确规定了规范的可观察性：`This document fully specifies the (apparent) order of evaluation of expressions...`. 由于通过恒定折叠到`myInt = 43`，表观行为没有改变，因此优化将与 JLS 一致。

事实上，Java 应用程序的编译目标甚至没有在 JLS 中指定。第 1 章说 Java 应用程序“通常”编译为 JVM 规范（一个单独的文档）中指定的字节码，但并不要求它们这样做。有些[语句](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28)必须在编译时进行优化，但*不是*`myInt`这样。即使`myInt`是一个领域，我认为优化是允许的；不同的行为仍然是有效的行为，即使`myInt`是易变的（因为它代表一种有效的事件顺序）。

所以，简短的回答，我认为你的学生是正确的；将其优化为`myInt = 43`. 也就是说，`javac`通常在优化方面做的很少——几乎没有。优化几乎都是在 JIT 中完成的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-15T07:06:14.017

我相信 Java 编译器可以进行任何可以在编译时静态确定的常量折叠。

所以是的，这*可以*通过`javac`.

但是`javac` *不需要*进行这种优化，因为 JVM JIT 编译器几乎肯定会为您做同样的优化。从这个角度来看，Java -> Bytecode 编译器是否进行这种优化可能与在运行时执行的实际本机代码的影响无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T08:09:31.920

> 所以这里没有优化。

鉴于 Java 使用动态编译，这应该不足为奇。

JVM 在运行时优化了几乎所有的代码，这意味着无论您使用 1996 年为 Java 1.0 编译的代码还是 Scala 或 JRuby、JGo 等，您都可以从针对特定 CPU 模型的本机代码的优化中获得全部好处。

出于这个原因，许多语言都有 JVM 实现，因此它们不需要能够为 JVM 运行的所有平台生成最佳代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T15:58:59.067

> 虽然这是真的，但我的问题是编译器是否在法律上被允许进行这种优化

通过传统的数据流分析（流/传输函数、in-sets、out-sets、gen-sets、kill-sets 等），特别是*一些路径转发数据流*，也就是到达定义（或 use-def 链）。 .. 是的。本质上，优化器可以将变量的每次使用与到达它的定义联系起来。

在这种情况下，优化器可以确定 myInt (=137) 的初始定义永远不会达到它的用途，而另一个定义 (=42 ¹ ) 确实会达到它的用途，因为它永远不会在该定义的任何（某些）路径上重新定义到它的用途。

参考：

*   龙书 1ed (1986) 第 10 章
*   龙书 2ed (2007) 第 9 章（特别是 9.2）

¹ - 我在教学代码中一直使用 42。我敢打赌我们都这样做。

# cakephp - 从 cakephp 中的数据库获取值时出错

> ID：14332579
> 
> 赞同：-1
> 
> 时间：2013-01-15T06:59:12.067
> 
> 标签：cakephp

我从我的 cakephp 应用程序中的表 sessionapps 中获取值。

我有 index.ctp 文件如下

```
<table>
<tr><td>ID</td><td>Title</td><td>Post</td><td>Actions</td><td>Created On</td></tr>
<?php foreach ($sessionapps as $post): ?>
<tr><td><?php echo $post[Sessionapp][id];?></td>
    <td><?php echo $data->Html->link($post[Sessionapp][title],array('controller'=>'sessionapp','action'=>'view',$post[Sessionapp][id]));?></td>
    <td><?php echo $post[Sessionapp][post];?></td>
    <td><?php echo $this->Html->link('Edit Post ', array('action' => 'editarticle', $post[Sessionapp][id]));?></td>
    <td><?php echo $post[Sessionapp][created];?></td></tr>
<?php endforeach; ?>
</table> 
```

我已经创建了它的控制器 sessionapps_controller.php 并在其中添加了操作索引，如下所示

```
function index()
    {
               $this->set('sessionapps', $this->Sessionapp->find('all'));
    } 
```

但它不起作用并给出错误

```
Notice (8): Use of undefined constant Sessionapp - assumed 'Sessionapp' [APP/views/sessionapps/index.ctp, line 14]

Notice (8): Use of undefined constant id - assumed 'id' [APP/views/sessionapps/index.ctp, line 14] 
```

我的数组 $sessionapps 如下

```
Array ( [0] => Array ( [Sessionapp] => Array ( [id] => 1 [title] => The title [body] => This is the post body. [postby] => [created] => 2013-01-15 11:35:13 [modified] => ) ) [1] => Array ( [Sessionapp] => Array ( [id] => 2 [title] => A title once again [body] => And the post body follows. [postby] => [created] => 2013-01-15 11:35:13 [modified] => ) ) [2] => Array ( [Sessionapp] => Array ( [id] => 3 [title] => Title strikes back [body] => This is really exciting! Not. [postby] => [created] => 2013-01-15 11:35:13 [modified] => ) ) ) 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:01:20.217

我认为应该是这样的。

```
<?php foreach ($sessionapps as $post): ?>
<tr><td><?php echo $post['Sessionapp']['id'];?></td>
    <td><?php echo $data->Html->link($post['Sessionapp']['title'],array('controller'=>'sessionapp','action'=>'view',$post['Sessionapp']['id']));?></td>
    <td><?php echo $post['Sessionapp']['post'];?></td>
    <td><?php echo $this->Html->link('Edit Post ', array('action' => 'editarticle', $post['Sessionapp']['id']));?></td>
    <td><?php echo $post['Sessionapp']['created'];?></td></tr>
<?php endforeach; ?> 
```

# ios - Is multiple CAEAGLLayer available in iOS?

> ID：14332580
> 
> 赞同：2
> 
> 时间：2013-01-15T06:59:12.137
> 
> 标签：ios, multi-layer, caeagllayer

I get an OpenGL view by

```
+ (Class) layerClass
{
    return [CAEAGLLayer class];
} 
```

and I want to add sublayer to it by

```
CAEAGLLayer *eaglLayer2 = [[CAEAGLLayer alloc] init];
[self.layer addSubLayer:eaglLayer2]; 
```

The purpose to think this is that I want to draw different thing on different layer so that I can remove something by simply call removeSubLayer:enter code here.

Is it available?

# mysql - is there need of RIGHT join, because we can achieve the same result using LEFT join by just altering the table name

> ID：14332582
> 
> 赞同：0
> 
> 时间：2013-01-15T06:59:16.687
> 
> 标签：mysql, sql

> **Possible Duplicate:**
> [right join versus left join](https://stackoverflow.com/questions/11807226/right-join-versus-left-join)

is there any need of RIGHT join, bacause we can achieve the same result using LEFT join by just altering the table name

i have two tables Persons and Orders

```
P_Id    LastName    FirstName   Address City
1   Hansen  Ola Timoteivn 10    Sandnes
2   Svendson    Tove    Borgvn 23   Sandnes
3   Pettersen   Kari    Storgt 20   Stavanger 
```

and

```
O_Id    OrderNo P_Id
1   77895   3
2   44678   3
3   22456   1
4   24562   1
5   34764   15 
```

and i have a query for left join as:

```
SELECT Persons.LastName, Persons.FirstName, Orders.OrderNo
FROM Persons
LEFT JOIN Orders
ON Persons.P_Id=Orders.P_Id
ORDER BY Persons.LastName 
```

and with right join:

```
SELECT Persons.LastName, Persons.FirstName, Orders.OrderNo
FROM Orders
RIGHT JOIN Persons
ON Orders.P_Id=Persons.P_Id
ORDER BY Persons.LastName 
```

both gives the same result.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:05:30.770

为了方便起见，两个版本都存在。正如你所说，只有一个是必要的。

但是，有时如果只有一个（RIGHT 或 LEFT），并且您想在查询中添加非内部联接而不进行太多更改，则有时必须对大型查询进行相当多的更改。

将两者都作为一个选项，通常很容易将非内部联接加入到预先存在的查询中，而无需对查询进行太多其他修改。

至少那是我发现自己编写 RIGHT JOIN 的唯一一次：当我已经有一个查询并且需要添加一个非内部连接并使其成为 LEFT JOIN 时，我会比我想要的更多地重新编写查询。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-15T07:05:24.443

检查这个以获得更多理解

[http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# asp.net - HTML：如何防止 mp3 文件在嵌入标签中被下载

> ID：14332586
> 
> 赞同：0
> 
> 时间：2013-01-15T06:59:37.247
> 
> 标签：asp.net, html, html5-audio

我正在使用嵌入标签在我的网站上播放背景音乐。它在 IE 上运行良好，但在 Mozilla 和 Chrome 上可以下载。解决方法是什么？

我的标签是

```
 <embed 
    src="http://www.abc.com/xyz.mp3" 
    autostart="true" 
    loop="true" 
    hidden="true"/> 
```

我尝试了 HTML`<audio>`标签，但页面停止响应。

**请注意，我的 mp3 文件在某个远程服务器上，而不是在我的网站目录上。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:35:55.217

这不是最好的方法，但您在这里遇到的具体问题可能与存储您的 mp3 文件的服务器有关。如果它使用 http 标头 Content-Disposition 将文件内容发送到客户端，它可以实现这一点。请在[此处查看第](http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html)**19.5.1 节 Content-Disposition**，基本上它告诉浏览器直接下载文件但不打开它。

为了验证这一点，您可以使用[Fillder](http://www.fiddler2.com/fiddler2/)之类的工具来查看该 mp3 文件请求的响应到底是什么样的。

为了解决这个问题，您可能需要想办法不让该服务器发送 Content-Disposition 标头，或者更改为使用不同的内容服务器不发送 Content-Disposition 标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:39:51.263

为什么不起诉现在相当标准的[<audio>标签？](http://www.w3schools.com/tags/tag_audio.asp)

我**认为**大多数浏览器会根据编解码器的可用性找到支持 mp3 的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T07:43:23.237

正如 Aristos 评论的那样，您可以将 Flash 播放器用作 flowplayer

```
<a id="mb" style="display:block;width:648px;height:30px;"
href="/media/data/fake_empire.mp3"></a>

<script>
$f("mb", "http://releases.flowplayer.org/swf/flowplayer-3.2.15.swf", {

// fullscreen button not needed here
plugins: {
    controls: {
        fullscreen: false,
        height: 30,
        autoHide: false
    }
},

clip: {
    autoPlay: false,
    // optional: when playback starts close the first audio playback
    onBeforeBegin: function() {
        $f("player").close();
    }

}

});
</script> 
```

（[http://flash.flowplayer.org/plugins/streaming/audio.html](http://flash.flowplayer.org/plugins/streaming/audio.html)）

音频标签仅适用于“新”浏览器

```
...

<audio src="http://xxxx/xxxx/xxx.mp3" autoplay="autoplay" />

... 
```

如果不是，您将不得不通过 javascript 检查正在运行的浏览器并做出相应的反应

# mysql - 计算列中的不同值，如果在 Where 子句中找不到则返回零

> ID：14332587
> 
> 赞同：0
> 
> 时间：2013-01-15T06:59:38.953
> 
> 标签：mysql, sql, select

这是我的表：

![这是我的桌子](../Images/25d422d8dc20c5844b0e62dafb8776a9.png)

我正在运行这个查询，

```
SELECT fruits,COUNT(*) as count FROM meva where owner = 'bill' GROUP BY fruits ORDER BY count 
```

我得到的结果是

![在此处输入图像描述](../Images/05b9eeea6cf54f21ada835af2c44cc7c.png)

如果与这样的所有者不匹配，是否可以将其他水果项目设为 0，

```
Fruit   | count
Apple   ,   2
Mango   ,   0
Banana  ,   0
Strawberry ,0
Appricot,   0
Alfonso ,   0 
```

非常感谢对我的查询进行一些修改。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:01:31.703

使用`SUM()`和`CASE`

```
SELECT  fruits, 
        SUM(CASE WHEN owner = 'bill' THEN 1 ELSE 0 END) as `count `
FROM     meva 
GROUP BY fruits 
ORDER BY fruits 
```

或使用`IF`（*仅**在`MySQL`*）

```
SELECT  fruits, 
        SUM(IF(owner = 'bill',1,0)) as `count `
FROM     meva 
GROUP BY fruits 
ORDER BY fruits 
```

*   [SQLFiddle 演示（*CASE 和 IF*）](http://sqlfiddle.com/#!2/1c124/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T07:27:06.730

是的，上面有一个很好的答案。你也可以试试这个！

```
SELECT  fruits, 
        SUM(Coalesce(owner='bill',0)) as counts
FROM     meva 
GROUP BY fruits 
ORDER BY fruits
; 
```

# java - How to remove uncommon elements from two arraylist

> ID：14332588
> 
> 赞同：1
> 
> 时间：2013-01-15T06:59:41.540
> 
> 标签：java, android, multidimensional-array, arraylist

How do I remove uncommon elements from `ArrayList`? The scenario is I have two `ArrayList` objects: `arr1` and `arr2`. `arr2` contains almost all elements of `arr1`. Now I want to remove such elements from `arr1`, which are not in `arr2`.

How can i achieve this? Is there any method or any technique to remove uncommon elements between two `ArrayList` objects?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T07:09:42.900

用途`CollectionUtils.retainAll`：返回一个集合，其中包含 collection1 中的所有元素，这些元素也在 collection2 中。

```
ArrayList commonList = CollectionUtils.retainAll(list1,list2); 
```

然后用 for 循环删除不常见的元素

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T07:08:34.967

您可以使用`retainAll`ArrayList 中实现的方法。它就像一个固定的交叉点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T07:14:18.530

怎么样`arr1.retainAll(arr2);`？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T07:31:25.463

方法一：

```
arr1.retainAll(arr2) 
```

方法二：

```
 List<String> arr1;
    List<String> arr2 ;

    for(String s: arr2){
        if(arr1.contains(s))
            arr1.remove(s);
    } 
```

我个人认为 1 表现力和性能效率更高。如果 arr1 不等于 arr2，JDK 使用`System.arraycopy()`完整复制`arr2`到`arr1`而不是删除单个元素。System.arraycopy 是原生实现的，速度非常快。

以下是执行此操作的 JDK 代码的参考。

```
 private boolean batchRemove(Collection<?> c, boolean complement) {
    final Object[] elementData = this.elementData;
    int r = 0, w = 0;
    boolean modified = false;
    try {
        for (; r < size; r++)
            if (c.contains(elementData[r]) == complement)
                elementData[w++] = elementData[r];
    } finally {
        // Preserve behavioral compatibility with AbstractCollection,
        // even if c.contains() throws.
        if (r != size) {
            System.arraycopy(elementData, r,
                             elementData, w,
                             size - r);
            w += size - r;
        }
        if (w != size) {
            for (int i = w; i < size; i++)
                elementData[i] = null;
            modCount += size - w;
            size = w;
            modified = true;
        }
    }
    return modified;
} 
```

如果只有很少的元素会有所不同，那么方法 2 会更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-16T14:58:01.407

这是我基于以前的一些答案的解决方案

```
/**
 * Returns elements in List A that are not in List B. (i.e. the relative complement of A with respect to B)
 * see https://en.wikipedia.org/wiki/Complement_(set_theory)#Relative_complement
 * @param a
 * @param b
 * @return
 */
private <E> List<E> relativeComplement(List<E> a, List<E> b) {
    return ListUtils.removeAll(a, ListUtils.retainAll(a,b));
} 
```

# java - 自定义 String 类创建

> ID：14332590
> 
> 赞同：10
> 
> 时间：2013-01-15T06:59:47.097
> 
> 标签：java, string, class, final

我试图在我的 Eclipse 工作区的 java.lang 包中创建一个自定义类字符串。最初我怀疑不能在同一个包中创建同一个类，但令我惊讶的是，我能够在同一个包中创建一个类（字符串），即 java.lang

现在我很困惑
1）为什么可能，
2）如果允许的话，可能是什么原因。
3）如果在Java中允许这种类型的java类创建会有什么用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T07:14:08.740

您可以在 java.lang 包中创建一个新类。如果禁止 Oracle 开发人员如何开发 Java？我确信他们使用与我们相同的 javac。

但是您将无法加载它，因为 java.lang.ClassLoader （任何类加载器都扩展）不允许它，每个正在加载的类都经过此检查

```
...
        if ((name != null) && name.startsWith("java.")) {
            throw new SecurityException
                ("Prohibited package name: " + name.substring(0, name.lastIndexOf('.')));
        }
... 
```

所以你最终会得到类似的东西

```
Exception in thread "main" java.lang.SecurityException: Prohibited package name: java.lang
    at java.lang.ClassLoader.preDefineClass(ClassLoader.java:649)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:785)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at Test1.main(Test1.java:11) 
```

至于像你这样隐藏现有类的类，`java.lang.String`它们无法加载，因为系统类加载器（默认）使用“父优先”策略，因此 java.lang 类将使用引导类加载器从 rt.jar 加载。因此，您需要将 rt.jar 中的 String.class 替换为您的版本。或者使用java 选项**覆盖它，该选项将路径添加到引导类加载器搜索路径。**`-Xbootclasspath/p:`这样你就可以

1) 将真实的 String.java 内容复制粘贴到您的 String.java

2）改变方法，例如

```
public static String valueOf(double d) {
    return "Hi";
} 
```

并编译你的 String.java

3）创建一个测试类

```
public class Test1 {

    public static void main(String[] args) throws Exception {
        System.out.println(String.valueOf(1.0d));
    }
} 
```

4）运行它

```
java -Xbootclasspath/p:path_to_your_classes Test1 
```

你会看到

```
Hi 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T07:07:03.733

这称为类阴影。

1.）这是可能的，因为java类不是静态链接的，而是在类加载时链接的。

2.) 如果不允许，那么整个类的加载将很难实现。然后，例如，您还必须针对特定的 Java 版本构建项目。因为 Java 类可能会因版本而异。这不会是一种可维护的方法。

3.) osgi 利用它来加载同一个包的不同版本。另一个常见的用例是替换框架中的错误类，在这种情况下没有其他解决方法是可能的。然而，这种技术应该谨慎使用，因为错误可能很难调试。

请注意，不允许在 java.* 包中隐藏类，因为这会破坏 Java 安全沙箱。所以你会在运行时遇到问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T07:06:07.177

是的，您可以创建名称为**java.lang**的包，也可以创建名为**String**的类。

但是您将无法运行您的 String 类。

1）**为什么会这样：**编译器会成功编译你的类。

2）**如果允许，可能是什么原因：**你的包和类有一个有效的名称，所以编译器不会抱怨。

3）**如果在Java中允许这种类型的java类创建有什么用：**但是这个String类没有太多用处。**Bootstrap 类加载器将从 sun 的 java.lang 包中加载类。**因此，您的自定义 String 类将不会被加载，因此它在运行期间会失败。

*Bootstrap 类加载器是 JVM 实现的一部分，它加载 Java API 的类（包括 java.lang.String）。同样对于每个被加载的类，JVM 会跟踪哪个类加载器是引导程序还是用户定义的加载类。因此，任何加载自定义 String 类的尝试都将失败，因为 String 类已经加载。*

# android - 在 sqlite 中使用 sum 函数时出错

> ID：14332592
> 
> 赞同：0
> 
> 时间：2013-01-15T07:00:02.937
> 
> 标签：android

我的应用程序想要计算一个月的总销售额。我用 sql 语句求和。但是当我运行应用程序时它失败了。我不知道为什么会出现这个错误。希望人们帮我解决这个问题。我非常感谢。代码 DB_Adapter

```
public class DB_Adapter {
public static final String DATE="date";
public static final String COST = "cost";
public static final String SALES = "sales";
public static final String NUMBER = "number";
public static final String PROFIT = "profit";
public static final String DB_NAME = "SAIGONFLEAMARKET";
public static final String DB_TABLE = "shipment";
public static final String MONTH="month";
public static final String YEAR="year";
public static final int DB_VERSION = 2;
private final Context mContext;
private SQLiteDatabase mDB;
private DBHelper mDBHelper;

public DB_Adapter(Context c) {
    mContext = c;
}

private static class DBHelper extends SQLiteOpenHelper
{

    public DBHelper(Context context, String name, CursorFactory factory,
            int version) {
        super(context, name, factory, version);
        // TODO Auto-generated constructor stub
    }

    // Khởi tạo một bảng trong database mang tên Saigonfleamarket
    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        try
        {
            db.execSQL("CREATE TABLE shipment (number integer PRIMARY KEY autoincrement, date text, cost float, sales float, profit float, month text, year text );");
        } catch (SQLException ex)
        {
            ex.printStackTrace();
        }
    }

    // Tạo một database mới
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        Log.i("DBAdapter", "Updating database...");
        db.execSQL("DROP TABLE IF EXISTS shipment");
        onCreate(db);
    }
}

// Mở một kết nối đến database
public DB_Adapter openDB()
{
    mDBHelper = new DBHelper(mContext, DB_NAME, null, DB_VERSION);
    mDB = mDBHelper.getWritableDatabase();
    return this;
}

// sau khi hoàn thành, đóng database lại
public void closeDB()
{
    mDBHelper.close();
}

public Cursor Sum(String _month, String _year)

{
    String sql="select Sum (profit) from shipment where month ='"+_month+"' AND year='"+ _year+"'";
    Cursor mCursor = mDB.rawQuery(sql, null);
    int test = mCursor.getCount();
    if (test != 0)
    {
        mCursor.moveToFirst();
    }

    return mCursor;
}  
} 
```

记录猫错误

```
01-15 13:49:48.840: E/AndroidRuntime(6953): FATAL EXCEPTION: main
01-15 13:49:48.840: E/AndroidRuntime(6953): java.lang.NullPointerException
01-15 13:49:48.840: E/AndroidRuntime(6953):     at Data.DB_Adapter.Sum(DB_Adapter.java:116)
01-15 13:49:48.840: E/AndroidRuntime(6953):     at com.example.xitinshop.Thongtin.onClick(Thongtin.java:40)
01-15 13:49:48.840: E/AndroidRuntime(6953):     at android.view.View.performClick(View.java:2485)
01-15 13:49:48.840: E/AndroidRuntime(6953):     at android.view.View$PerformClick.run(View.java:9080)
01-15 13:49:48.840: E/AndroidRuntime(6953):     at android.os.Handler.handleCallback(Handler.java:587)
01-15 13:49:48.840: E/AndroidRuntime(6953):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-15 13:49:48.840: E/AndroidRuntime(6953):     at android.os.Looper.loop(Looper.java:130)
01-15 13:49:48.840: E/AndroidRuntime(6953):     at android.app.ActivityThread.main(ActivityThread.java:3683)
01-15 13:49:48.840: E/AndroidRuntime(6953):     at java.lang.reflect.Method.invokeNative(Native Method)
01-15 13:49:48.840: E/AndroidRuntime(6953):     at java.lang.reflect.Method.invoke(Method.java:507)
01-15 13:49:48.840: E/AndroidRuntime(6953):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-15 13:49:48.840: E/AndroidRuntime(6953):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-15 13:49:48.840: E/AndroidRuntime(6953):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:21:48.997

使用此方法代替旧方法。

```
public Cursor Sum(String _month, String _year)

{
    String sql="select Sum(profit) from shipment where month =? AND year=?";
    Cursor mCursor = mDB.rawQuery(sql, new String[] { _month ,_year});
    int test = mCursor.getCount();
    if (test != 0)
    {
        mCursor.moveToFirst();
    }

    return mCursor;
} 
```

# android - android Matrix.postRotate() 方法使图片尺寸变大

> ID：14332594
> 
> 赞同：0
> 
> 时间：2013-01-15T07:00:24.870
> 
> 标签：android

```
OverlayObject overlayObject = overlayObjects.get(index);
Bitmap dotIndicator = overlayObject.DTO.dotIndicatorBitmap;

int width = dotIndicator.getWidth();
int height = dotIndicator.getHeight();

Log.d("dotIndicator.getWidth()", "" + width);
Log.d("dotIndicator.getHeight()", "" + height);

Matrix matrix = new Matrix();
matrix.postRotate(gbConstants.dotIndicatorRotationFactor, width/2, height/2);

Bitmap newBitmap = Bitmap.createBitmap(dotIndicator, 0, 0,
    width, width, matrix, true);

Log.d("newBitmap.getWidth()", "" + newBitmap.getWidth());
Log.d("newBitmap.getHeight()", "" + newBitmap.getHeight()); 
```

日志结果： 01-15 14:46:16.485: D/dotIndicator.getWidth()(20739): 102 01-15 14:46:16.485: D/dotIndicator.getHeight()(20739): 102 01- 15 14:46:16.485: D/newBitmap.getWidth()(20739): 104 01-15 14:46:16.485: D/newBitmap.getHeight()(20739): 104

```
01-15 14:46:16.555: D/dotIndicator.getWidth()(20739): 104
01-15 14:46:16.555: D/dotIndicator.getHeight()(20739): 104
01-15 14:46:16.555: D/newBitmap.getWidth()(20739): 106
01-15 14:46:16.555: D/newBitmap.getHeight()(20739): 106 
```

**注意：gbConstants.dotIndicatorRotationFactor = 1 （我把它设置为这个数字为最低值以便调试）

图像每旋转 1 度，每次创建 newBitmap 时，宽度和高度都会增加 2 个像素。我浏览了其他链接和问题，但到目前为止没有人回答我的问题。我还反复尝试调试，以确保没有其他方法引用会影响结果的变量和对象。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:15:20.823

答案很简单。旋转1°的图像将需要更多的宽度和高度空间。因此结果是完全正确的。因为否则图片的边角会被剪掉。

只需拿一张纸并旋转它，您就会看到宽度和高度将如何增加，直到达到 45°。

编辑：也许这对您有帮助：[图像在旋转时会改变大小。我该如何阻止这个？](https://stackoverflow.com/questions/5287483/image-changes-size-as-its-rotated-how-do-i-stop-this?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:17:17.303

这是因为如果您将图像旋转一个角度，则生成的图像将是具有倾斜图像的正方形图像。如下图所示。

![在此处输入图像描述](../Images/cb031d458a7c43ab0efac0f9cdc974b6.png)

# c++ - 使用来自另一个类实例的函数指针调用成员函数

> ID：14332600
> 
> 赞同：0
> 
> 时间：2013-01-15T07:00:49.583
> 
> 标签：c++, inheritance, function-pointers

```
#include<iostream>
#include<conio.h>
using namespace std;
class Base;
typedef void (Base::*function)();
class Base
{
public:
    function f;
    Base()
    {
        cout<<"Base Class constructor"<<endl;
    }
    virtual void g()=0;
    virtual void h()=0;
};
class Der:public Base
{
public:
    Der():Base()
    {
        cout<<"Derived Class Constructor"<<endl;
        f=(function)(&Der::g);
    }
    void g()
    {
        cout<<endl;
        cout<<"Function g in Derived class"<<endl;
    }
    void h()
    {
        cout<<"Function h in Derived class"<<endl;
    }
};
class Handler
{
    Base *b;
public:
    Handler(Base *base):b(base)
    {
    }
    void CallFunction()
    {
        cout<<"CallFunction in Handler"<<endl;
        (b->*f)();
    }
};
int main()
{
    Base *b =new Der();
    Handler h(b);
    h.CallFunction();
    getch();
} 
```

尝试使用基类中声明的函数指针调用派生类中的成员函数时出现错误。函数指针被声明为 public 并且实际上被另一个类 Handler 使用。我在这段代码中使用了不安全的类型转换。(函数)(&Der::g)。有什么办法可以避免吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:08:12.840

`f`似乎不在`Handler::CallFunction`. 我猜你的意思是调用`b->f`using `b`as `this`， as it `(b->*(b->f))()`。当我进行此更改时，您的代码会编译并打印出一些理智的东西。

# android - how to implement pull to refresh in android app

> ID：14332605
> 
> 赞同：2
> 
> 时间：2013-01-15T07:01:11.417
> 
> 标签：android, adt, pull-to-refresh

I have an app for getting the RSS feeds and I am trying to implement pull to refresh. I took reference from [https://github.com/johannilsson/android-pulltorefresh](https://github.com/johannilsson/android-pulltorefresh). Can anyone help to include this in eclipse? Do we have jars for this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:08:39.127

**请按照以下步骤操作：**

在 Eclipse 中执行**File** -> **New** -> **other**（不要使用**File->new->Android application project**）并选择**"Android Project from existing code"**。

单击下一步，然后浏览到具有[pulltorefresh](https://github.com/johannilsson/android-pulltorefresh)库的目录 - 如果要将文件复制到工作区，请选中项目列表框下的复选框。然后单击完成按钮。

重复刚才的操作，但这次选择 pulltorefreshexample 目录。

确保这两个项目都是打开的，然后在包资源管理器中选择 pulltorefreshexample，右键单击它并选择属性。在出现的窗口中选择左侧的 Android，然后在最底部有一个“库”部分。单击添加，您应该会看到一个包含所有打开的库项目的列表。选择 pulltorefresh 之一。

清理并构建库，然后清理并构建示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:05:14.750

您可以参考[此](http://www.youtube.com/watch?v=VjmdELnm3GI)视频和[此](http://www.thoughtsonmobile.com/2012/09/android-pull-to-refresh.html)页面（带有代码）来实现它，因为在 android 中还没有直接控制它

一些片段：在xml中：

```
<!--
  The PullToRefresh-ListView replaces a standard ListView widget,
  and has all the features android.widget.ListView has.
-->
<eu.erikw.PullToRefreshListView
    android:id="@+id/pull_to_refresh_listview"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent" /> 
```

关于活动：

```
// Set a listener to be invoked when the list should be refreshed.
PullToRefreshListView pullToRefreshView = (PullToRefreshListView) findViewById(R.id.pull_to_refresh_listview);
pullToRefreshView.setOnRefreshListener(new OnRefreshListener<ListView>() {
    @Override
    public void onRefresh(PullToRefreshBase<ListView> refreshView) {
        // Do work to refresh the list here.
        new GetDataTask().execute();
    }
});

private class GetDataTask extends AsyncTask<Void, Void, String[]> {
    ...
    @Override
    protected void onPostExecute(String[] result) {
        // Call onRefreshComplete when the list has been refreshed.
        pullToRefreshView.onRefreshComplete();
        super.onPostExecute(result);
    }
} 
```

# jquery - Get the closest img title and set as field title

> ID：14332606
> 
> 赞同：1
> 
> 时间：2013-01-15T07:01:12.643
> 
> 标签：jquery

I am going to explain my question by an example:

Here is my html code:

```
<td>Name<a href="http://manual"><span><img src="x" width="15" title="The name></span></a></td>
<td><input type="text" name="name" maxlength="80" size="93" ></td> 
```

What I want to do is get the closest img title to my input field, and set it as the field title. The purpose is basically check all the page's form fields and set the closest image title to their title, if the title has not been set.

What I have done so far:

```
$('form').find(':input').each(function(){
    if(!$(this).attr('title') && $(this).attr('type') != "hidden" ){

        var title = $(this).siblings('td').find("img").attr("title");
        $(this).attr('title', title);

    }
}); 
```

But no success. I'd be grateful if someone can help me out with this.

Thanks,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:02:50.083

```
$('form').find(':input').each(function(){
    if(!$(this).attr('title') && $(this).attr('type') != "hidden" ){
        var title = $(this).closest("tr").find('td').find("img").attr("title");
        $(this).attr('title', title);

    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T07:07:44.353

你可以这样做：

```
 $('form').find(':input').each(function(){
       var image = $(this).closest('tr').find('img');
    }); 
```

这将搜索最近的 tr 标签并搜索其中的图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T07:07:55.787

```
$('form').find(':input').each(function(){
    if(!$(this).attr('title') && $(this).attr('type') != "hidden" ){
        var title = $(this).parents('td').prev().find('img').attr('title');
        $(this).attr('title', title);

    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T07:09:10.463

```
$('form').find(':input').each(function(){
    if(!$(this).attr('title') && $(this).attr('type') != "hidden" ){
        var title = $(this).closest("tr").find("img").attr("title");
        $(this).attr('title', title);   
    }
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-15T07:41:37.547

First, find all form inputs without title, which aren't hidden. Then search the `img` in the current row and copy it's title

```
$('form :input:not([title]):not([type="hidden"])').each(function() {
  var title = $(this).closest('tr').find('img').attr('title');
  $(this).attr('title', title);
}); 
```

[JSFiddle](http://jsfiddle.net/JRb45/) for testing.

# wpf - Prism AnimatedTabControl customization

> ID：14332607
> 
> 赞同：0
> 
> 时间：2013-01-15T07:01:17.390
> 
> 标签：wpf, prism

* * *

I have a user interface like Prism StockTrader RI application with some changes whrere i put control panel in ResearchRegion contains list of items when i select one item its details are displayed in the AnimatedTabControl in the main region. I need to customize the AnimatedTabControl (from StockTrader RI) like this:

*   The AnimatedTabControl show tab header like normal tab control where header will contain the selected item name

*   When new selection is applied from a control panel that resides in the ResearchRegion a new tab open w/o removing the previous tab selection and w/o animation

*   Tab header contain close button to close any of the open tabs when required

*   Animation take place only when changing the control panel in the ResearchRegion

    ```
     public class AnimatedTabControl : TabControl
    {
        public static readonly RoutedEvent SelectionChangingEvent =     EventManager.RegisterRoutedEvent(
            "SelectionChanging", RoutingStrategy.Direct, typeof(RoutedEventHandler), typeof (AnimatedTabControl));

        private DispatcherTimer timer;

        public AnimatedTabControl()
        {
            DefaultStyleKey = typeof(AnimatedTabControl);
        }

        public event RoutedEventHandler SelectionChanging
        {
            add { AddHandler(SelectionChangingEvent, value); }
            remove { RemoveHandler(SelectionChangingEvent, value); }
        }

        protected override void OnSelectionChanged(SelectionChangedEventArgs e)
        {
            this.Dispatcher.BeginInvoke(
                (Action)delegate
                {
                    this.RaiseSelectionChangingEvent();

                    this.StopTimer();

                    this.timer = new DispatcherTimer { Interval = new TimeSpan(0, 0, 0, 0,     500) };

                    EventHandler handler = null;
                    handler = (sender, args) =>
                    {
                        this.StopTimer();
                        base.OnSelectionChanged(e);
                    };
                    this.timer.Tick += handler;
                    this.timer.Start();
                });
        }

        // This method raises the Tap event
        private void RaiseSelectionChangingEvent()
        {
            var args = new RoutedEventArgs(SelectionChangingEvent);
            RaiseEvent(args);
        }

        private void StopTimer()
        {
            if (this.timer != null)
            {
                this.timer.Stop();
                this.timer = null;
            }
        }
    } 
    ```

    Thanks in Advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T15:59:16.083

我已经回答了您问题的第 3 部分（选项卡标题包含关闭按钮，可在需要时关闭任何打开的选项卡）。

看看我在 SkyDrive 帐户中的公用文件夹：- ( [https://skydrive.live.com/redir?resid=656548C49A72B6CD!105](https://skydrive.live.com/redir?resid=656548C49A72B6CD!105) )

# php - PHP/MySQL code fail to insert duplicate row

> ID：14332613
> 
> 赞同：0
> 
> 时间：2013-01-15T07:01:52.470
> 
> 标签：php, mysql, prepared-statement, json, insert-into

I have some PHP code to select data from & insert data into a MYSQL database. Here's what I'm trying to do: - receive a barcode serial number from a JSON payload - connect to the MySQL database - check a database table (passes) to see if the barcode has been registered - if so, write this barcode + timestamp into another table (activations). Then return a JSON mssage that it was successful - if not, return a JSON message that the barcode was not yet registered.

The code below works OK when I check a specific barcode for the first time. But after that it doesn't insert a new entry in the activations table. Instead I get the message 'Activation not recorded' ..

Any idea what I'm doing wrong? Thanks if you can help!

Andrew

```
<?php
//Messages will be returned as JSON data
header("Content-type: application/json");

//read the POST payload
$payload = json_decode(file_get_contents('php://input'), true);

//get a database connection
require_once("../class/Database.php");
$db = Database::get();

//check for a valid pass
$barcode = $payload['barcode'];
$statement = $db->prepare("SELECT * FROM passes WHERE barcode = ?");
$statement->execute(array($barcode));
$row = $statement->fetch(PDO::FETCH_ASSOC);
if ($row) {
  $statement2 = $db->prepare("INSERT INTO activations(activationDatetime, barcode)     VALUES (?,?)");
  $statement2->execute(array(date("Y-m-d G:i:s"),$barcode));
  if ($statement2->rowCount()==0) {
  print json_encode(array("msg"=>"Activation not recorded"));
  } else {
  print json_encode(array("msg"=>"Pass successfully activated"));
  }
} else 
{
  print json_encode(array("msg"=>"Pass not registered"));
  exit();
}

flush();

exit();

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:06:02.737

我想`if ($statement2->rowCount()==0) {`这个说法是错误的，请检查。您不能在那里使用“rowCount”，因为它是一个插入查询。

而且我认为，它被插入的唯一问题是没有正确显示消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:09:23.983

您应该在页面的调试阶段打印 sql 错误。

我猜，条形码字段是唯一的。

# asp.net-mvc-3 - 如何在 orderby 子句中使用动态变量

> ID：14332614
> 
> 赞同：3
> 
> 时间：2013-01-15T07:01:53.030
> 
> 标签：asp.net-mvc-3, linq, entity-framework, c#-4.0

我是 linq 的新手。我被一个场景困住了。IE，

我必须根据用户输入对搜索结果进行排序。

用户输入是姓氏、名字和头衔。对于输入，有 3 个下拉菜单，我必须根据所选值对结果进行排序。

我试过

```
order = Request["orders"].Split(',');

                var param = order[0];
                var p1 = typeof(Test).GetProperty(param);
                param = order[1];
                var p2 = typeof(Test).GetProperty(param);
                param = order[2];
                var p3 = typeof(Test).GetProperty(param);

model.Test = (from tests in  model.Test
                   select tests).
            OrderBy(x => p1.GetValue(x, null)).
            ThenBy(x => p2.GetValue(x, null)).
            ThenBy(x => p3.GetValue(x, null)); 
```

但它不起作用。

我想要这样的qry

```
from tests in  model.Test
select tests).OrderBy(x => x.lastname).
ThenBy(x => x.firstname).ThenBy(x => x.Title);

order[0]== lastname but how can i use it in the place of OrderBy(x => x.order[0])..? 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T11:14:57.460

我解决了我的情况如下 // 用于排序的列列表

```
 List<string>order = Request["orders"].Split(',').ToList(); 
```

//将列字符串映射到属性

```
var mapp = new Dictionary<string, Func<Test, string>>
            {
                {"FirstName", x => x.FirstName},
                {"LastName", x => x.LastName},
                {"SimpleTitle", x => x.SimpleTitle}

            }; 
```

//用户输入的订单

```
var paras = new List<Func<Test, string>>();
            foreach (var para in order)
            {
                if(!string.IsNullOrEmpty(para))
                paras.Add(mapp[para]);
            }

//sorting
            model.Test= model.Test.OrderBy(paras[0]).ThenBy(paras[1]).ThenBy(paras[2]); 
```

谢谢大家，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T07:10:22.077

实际上，您正在寻找动态 linq 查询，而不是尝试[动态 LINQ（第 1 部分：使用 LINQ 动态查询库）](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

允许这样做

![在此处输入图像描述](../Images/302af9bbd675b827da5240cc49062949.png)

这意味着您可以动态传递字符串属性名以缩短您在 orderby 函数中的集合

您还可以阅读：[使用 Linq 进行动态查询](http://pranayamr.blogspot.ca/2011/04/dynamic-query-with-linq.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T08:07:20.613

您可以从片段中手动组合表达式 (any [`Expression`](http://msdn.microsoft.com/en-us/library/system.linq.expressions.expression.aspx))，然后将其附加到查询的前一部分。[您可以在“使用字符串作为列名在 IQueryable](http://blog.cincura.net/229310-sorting-in-iqueryable-using-string-as-column-name/)中排序”中找到更多信息。

# sql-server-2008 - calculate number of days between two days in sqlserver?

> ID：14332619
> 
> 赞同：0
> 
> 时间：2013-01-15T07:02:30.760
> 
> 标签：sql-server-2008

I want to calculate the number of days an employee has taken leave in the month of january.For that I have two date fields Leave_Start_Date and Leave_End_Date in the database as follows

```
Leave_Approval_Id      Leave_Start_Date           Leave_End_Date             EmpId 
    1               2013-01-25 00:00:00.000      2013-02-10 00:00:00.000      10 
```

Here my problem is the Leave_End_Date is on february.So when i take the datedifference im getting the value as 16,but acctually i want is 6(in the month of january alone).

How can i do it ???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:57:14.977

定义您感兴趣的区间，并使用 a`case`将范围值或您的实际值用作 的参数`datediff()`。

```
declare @FromDate datetime
declare @ToDate datetime

set @FromDate = '20130101'
set @ToDate = '20130131'

select datediff(
                day, 
                case when Leave_Start_Date < @FromDate then @FromDate else Leave_Start_Date end,
                case when Leave_End_Date >= @ToDate then @ToDate else Leave_End_Date end
               )
from .... 
```

这将为您`6`提供您指定的时间间隔。

# python - 如何在 Python 中使用集合来查找列表成员？

> ID：14332621
> 
> 赞同：1
> 
> 时间：2013-01-15T07:02:41.143
> 
> 标签：python, set

鉴于：

`A = [['Yes', 'lala', 'No'], ['Yes', 'lala', 'Idontknow'], ['No', 'lala', 'Yes'], ['No', 'lala', 'Idontknow']]`

我想知道`['Yes', X, 'No']`A中是否存在，`X`我不在乎的东西在哪里。

我尝试过：

```
valid = False
for n in A:
    if n[0] == 'Yes' and n[2] == 'No':
        valid = True 
```

我知道`set()`在这种情况下很有用。但这怎么能做到呢？这可能吗？还是坚持使用我的原始代码对我来说更好？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T07:12:26.883

如果你想检查存在，你可以`['Yes', 'No'] in A`：

```
In [1]: A = [['Yes', 'No'], ['Yes', 'Idontknow'], ['No', 'Yes'], ['No', 'Idontknow']]

In [2]: ['Yes', 'No'] in A
Out[2]: True 
```

对于下一个案例尝试：

```
In [3]: A = [['Yes', 'lala', 'No'], ['Yes', 'lala', 'Idontknow'], ['No', 'lala', 'Yes'], ['No', 'lala', 'Idontknow']]

In [4]: any(i[0]=='Yes' and i[2] == 'No' for i in A)
Out[4]: True 
```

或者你可以定义一个小函数：

```
In [5]: def want_to_know(l,item):
   ...:     for i in l:
   ...:         if i[0] == item[0] and i[2] == item[2]:
   ...:             return True
   ...:     return False

In [6]: want_to_know(A,['Yes', 'xxx', 'No'])
Out[6]: True 
```

`any(i[0]=='Yes' and i[2] == 'No' for i in A*10000)`实际上似乎比转换本身快 10 倍。

```
In [8]: %timeit any({(x[0],x[-1]) == ('Yes','No') for x in A*10000})
100 loops, best of 3: 14 ms per loop

In [9]: % timeit {tuple([x[0],x[-1]]) for x in A*10000}
10 loops, best of 3: 33.4 ms per loop

In [10]: %timeit any(i[0]=='Yes' and i[2] == 'No' for i in A*10000)
1000 loops, best of 3: 334 us per loop 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T07:07:37.503

将您转换`list`为`set`第一个，因为它会将查找时间从 缩短`O(n)`为`O(1)`：

```
In [27]: A = [['Yes', 'No'], ['Yes', 'Idontknow'], ['No', 'Yes'], ['No', 'Idontknow']]

In [28]: s=set(tuple(map(tuple,A)))

In [29]: s
Out[29]: set([('Yes', 'No'), ('No', 'Idontknow'), ('Yes', 'Idontknow'), ('No', 'Yes')])

In [30]: ('Yes', 'No') in s
Out[30]: True 
```

`timeit`比较：

```
%timeit ['Yes', 'No'] in A
1000000 loops, best of 3: 504 ns per loop  

%timeit ('Yes', 'No') in s
1000000 loops, best of 3: 442 ns per loop       #winner

%timeit ['No', 'Idontknow'] in A
1000000 loops, best of 3: 861 ns per loop

%timeit ('No', 'Idontknow') in s
1000000 loops, best of 3: 461 ns per loop       #winner 
```

**编辑：**

如果您只对第一个和最后一个元素感兴趣：

```
In [69]: A = [['Yes', 'No'], ['Yes', 'Idontknow','hmmm'], ['No', 'Yes'], ['No', 'Idontknow']]

In [70]: s={tuple([x[0],x[-1]]) for x in A} # -1 or 2, change as per your requirement
                                         #or set(tuple([x[0],x[-1]]) for x in A)

In [71]: s
Out[71]: set([('Yes', 'No'), ('Yes', 'hmmm'), ('No', 'Idontknow'), ('No', 'Yes')])

In [73]: ('Yes', 'hmmm') in s
Out[73]: True 
```

`timeit`比较`any()`：

```
In [77]: %timeit ('Yes', 'hmmm') in s
1000000 loops, best of 3: 428 ns per loop      #winner

In [78]: %timeit any(x[0]=="Yes" and x[-1]=="hmmm" for x in A)
100000 loops, best of 3: 2.87 us per loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T07:08:04.333

Set 不支持列表，可以转换成元组，

```
A = [['Yes', 'No'], ['Yes', 'Idontknow'], ['No', 'Yes'], ['No', 'Idontknow']]
valid = ('Yes', 'No') in {tuple(item) for item in A} 
```

并且正如@IgnacioVazquez-Abrams 提到的，从列表到元组的转换是 O(n)，所以如果您了解性能，则需要选择其他方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T07:13:34.927

以下是使用 Set() 的方法。

```
>>> A = Set([('Yes', 'No'), ('Yes', 'Idontknow'), ('No', 'Yes'), ('No', 'Idontknow')])
>>> ('Yes','No') in A
True
>>> 
```

Set 的元素应该是可散列的。所以我使用元组作为 Set 元素而不是列表。

# linux - 如何删除 url 中的 index.php？

> ID：14332625
> 
> 赞同：0
> 
> 时间：2013-01-15T07:02:58.300
> 
> 标签：linux, wordpress, nginx

我的主机服务器是**nginx**。

在根目录中我安装了 magento，然后我创建了一个名为 blog 的文件，然后将 wordpress 安装到其中。现在，目录是：

```
app
includes
....
blog/wp-admin 
```

当我`http://www.example.com/blog/index.php/%postname%.html`在永久链接设置中设置时。访问所有帖子，没关系。现在我想删除 index.php。即在`http://www.example.com/blog/%postname%.html`我删除 index.php 时将其更改为 . 并非所有帖子都无法使用，

编辑：我把代码放在 nginx.conf 中。

```
location /blog/ {
    index index.php;
    try_files $uri $uri/ /blog/index.php?$uri&$args;
    rewrite ^ /index.php? last;
} 
```

但它不起作用。我丢了什么东西吗？

# c++ - 析构和删除

> ID：14332630
> 
> 赞同：1
> 
> 时间：2013-01-15T07:03:22.223
> 
> 标签：c++, destructor

我有一个 C++ 类，`MyClass`. 它包含一个构造函数、析构函数和一个 int 指针`private: int *MyPtr;`。

在某处，我动态分配一个`MyClass`对象：

```
MyClass *my = new MyClass(); //... 
```

然后我打电话`delete my;`

应该`MyClass`有一个使用类似的析构函数`delete MyPtr`？还是我打电话时 MyPtr 被破坏了`delete my`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T07:05:11.567

如果您在 MyClass 构造函数中分配了 MyPtr，那么您有责任将其删除。否则，如果您删除未分配的内存，则会导致未定义的行为。

如果您需要动态分配内存并删除它，一种惯用的方法是在类中使用智能指针，智能指针将为您处理内存释放。

可能值得一读：[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T07:04:58.733

`Or is that MyPtr destroyed when I call delete my?`

不，当您调用`delete my;`它时，它将调用析构函数，`MyClass`除非您在析构函数中显式删除 MyPtr，否则您将发生内存泄漏。

`Should MyClass have a destructor which uses something like delete MyPtr?`

始终删除析构函数中动态分配的内存——这就是析构函数的用途。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T07:07:52.173

你打电话时

```
delete my 
```

您不会释放该类的数据（除非您在析构函数中指定它），因此这将导致内存泄漏。

# django - 基于用户选择的 Django 数据库路由器

> ID：14332631
> 
> 赞同：1
> 
> 时间：2013-01-15T07:03:25.127
> 
> 标签：django, python-2.7, django-admin

我正在编写一个 django 项目，该项目需要我根据用户选择将查询路由到某些大型数据库。

所以 django.contrib.auth 和 session 的所有表和东西都将在“中央”数据库中，以及一个将用户映射到他们需要用于主应用程序的数据库的表。

你能帮我想出一种使用 Django 数据库路由器以这种方式路由数据库查询的方法吗？

登录用户表单具有数据库选择选项。如果用户是有效用户，那么他将连接到他选择的数据库

在视图开始时，我可以从 request.user 或其他任何地方获取登录用户，并且在请求的其余部分如何将该变量提供给我的数据库路由器？

欢迎所有建议。

# c - __attribute__(packed) v/s GCC __attribute__((aligned(x))

> ID：14332633
> 
> 赞同：16
> 
> 时间：2013-01-15T07:03:41.877
> 
> 标签：c, gcc

以下 GCC`__attribute__(packed )`将打包到字节边界，对齐用于哪个目的：-

```
u8 rx_buf[14] __attribute__((aligned(8)));  
struct S { short f[3]; } __attribute__ ((aligned (8))); 
```

上面的数组将是 16 字节，对吗？

意味着`sizeof(rx_buff)`将是 16 字节 .. 即在末尾对齐 2 字节

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-15T07:44:44.497

你的问题的答案是否定的。该`aligned`属性不会改变它所应用的变量的大小，但结构成员的情况略有不同。引用[手册](http://gcc.gnu.org/onlinedocs/gcc/Variable-Attributes.html)，

> 对齐（对齐）
> 
> 此属性指定变量或结构字段的最小对齐方式，以字节为单位。例如，声明：
> 
> ```
> int x __attribute__ ((aligned (16))) = 0; 
> ```
> 
> 导致编译器在 16 字节边界上分配全局变量 x。

和，

> 包装好的
> 
> 打包属性指定变量或结构字段应该具有最小可能的对齐方式——变量一个字节，字段一个位，除非您使用对齐属性指定更大的值。
> 
> 这是一个将字段 x 打包的结构，因此它紧跟在 a 之后：
> 
> ```
> struct foo
> {
>     char a;
>     int x[2] __attribute__ ((packed));
> }; 
> ```

请注意，该`aligned`属性可能会通过在成员之间插入填充来更改结构的内存布局。随后，结构的大小将发生变化。例如：

```
struct t {
    uint8_t  a __attribute__((aligned(16))); /* one byte plus 15 as padding here */
    uint16_t b __attribute__((aligned(16)));
}; 
```

之后会导致 15 个字节的填充，`a`而目标架构的默认对齐可能会导致更少。如果您指定了`packed`结构的属性**并**丢失了`aligned`属性，则结构的大小将为 3 个字节。这是一个结构的内存布局在每种**情况**下的样子的说明。

`struct t`在 8 字节边界上没有属性和默认对齐方式：

```
+-+-------+--+-------+
|a|       |bb|       |
+-+-------+--+-------+ 
```

`struct t`当 a 和 b 在 16 字节边界上对齐时：

```
+-+---------------+--+---------------+
|a|    padding    |bb|    padding    |
+-+---------------+--+---------------+ 
```

`struct t`当 a 和 b 没有对齐限制并且 t 被打包时：

```
+-+--+
|a|bb|
+-+--+ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T07:28:26.610

> 上面的数组将是 16 字节，对吗？

不正确。数组仍然是 14 字节长；所做的只是*在数组外部*`__attribute__((aligned))`提供任何必要的填充以将其对齐到 8 字节边界。不可能安全地假设此填充存在于何处，或存在多少。

 *因此，`sizeof(rx_buf)`将保持 14，就像没有对齐一样。*

# c# - 尝试从资源字典访问图像资源时，多个 NUnit 测试类失败

> ID：14332636
> 
> 赞同：4
> 
> 时间：2013-01-15T07:03:56.847
> 
> 标签：c#, wpf, unit-testing, nunit

我有一个用 C# (.NET 4.0) 编写的复杂 WPF 项目，我为 (NUnit) 编写了几个测试。这些测试位于不同的类中，只要我为每个类单独运行测试，一切都很好。但是，一旦我尝试一次运行所有类的所有测试，第一个类的测试成功，但是一旦 testrunner（Resharper 或 nunit-console）开始测试剩余的类，它们都会失败并出现以下堆栈跟踪。

```
System.InvalidOperationException: The calling thread cannot access this object because a different thread owns it
at System.Windows.Threading.Dispatcher.VerifyAccess()
at System.Windows.Media.Imaging.BitmapDecoder.ToString()
at System.Windows.Media.Imaging.BitmapFrameDecode.ConvertToString(String format, IFormatProvider provider)
at System.Windows.Media.ImageSource.ToString()
at MUSTANG.ShowCase.ResourceLibrary.ResourceDictionaryManager.GetUriString(String pKey) in c:\Daten\Jenkins-ci\jobs\MUSTANG-Showcase-Release-VS2010\workspace\MUSTANG-Showcase\MUSTANG.ShowCase.ResourceLibrary\ResourceDictionaryManager.cs:Zeile 49. 
```

对应的代码如下：

```
public object GetValue(string pKey)
{
    if (mDictionary.Contains(pKey))
    {
        return mDictionary[pKey];
    }
    return null;
}

public String GetUriString(string pKey)
{
    object result = GetValue(pKey);
    if (null == result)
    {
        Log.Warn(string.Format(@"Ressource '{0}' nicht gefunden!", pKey));
        return "";
    }
    return result.ToString();
} 
```

当资源是图像时，异常发生在 GetUriString 的最后一行。Nunit 似乎使用不同的线程来运行不同的测试类——它们仍然是按顺序运行的。有没有办法解决这个问题，例如通过告诉 NUnit 或 testrunners 使用单个线程，在每个测试类运行后完全退出或类似的？

编辑1：到目前为止我已经尝试过：

*   `[RequiresSTA]`用属性装饰测试
*   在运行每个测试类之前重置 ResourceDictionaryManager 类（这是发生此错误的地方）。这解决了 ResourceDictionaryManager 类中的问题，但随后在代码中“稍后”出现完全相同的问题。
*   将所有测试复制到同一个巨大的类中。所有测试都运行良好（但这不是我想要的）

问题似乎是 NUnit 为每个包含测试方法的类使用不同的线程，所以我要么需要找到一种方法

*   告诉 NUnit 在同一个线程中运行所有测试类

或者

*   在 TestFixtureTearDown 方法中告诉 NUnit 完全关闭应用程序，以便我可以在下一个测试类中使用实例化一个新应用程序`new Application();`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T07:12:04.480

从堆栈跟踪中，您发布的似乎是“线程关联性”问题 - 即您正试图更新与创建它的线程不同的线程上的 UI 元素。BitmapDecoder 派生自 DispatcherObject，即它需要在单个线程上操作。似乎在您的测试运行中，它是在一个线程上创建的，然后方法调用（ToString）是从另一个线程进行的。

*   你确定你没有在你的代码中产生线程吗？NUnit AFAIK 使用相同的线程来运行测试运行中的所有测试。你运行的是什么版本？
*   `MUSTANG.ShowCase.ResourceLibrary`您是否在跨测试共享相同的实例？如何为每个测试创建一个新实例，即隔离测试？

**更新：**我想我现在已经确定了。

*   如果测试夹具仅标记有 TestFixture 属性（无线程要求），则所有测试都在单个 MTA 线程上运行
*   如果您使用 RequiresSTA 属性标记每个 TestFixture，我看到运行器将为每个测试夹具创建一个新的 STA 线程（这似乎与您报告的内容相匹配）。
*   由于您希望所有测试（跨设备）在同一个 STA 线程上，您应该在程序集级别（在 AssemblyInfo.cs 文件中）指定它。您可以在每个夹具级别删除属性。

.

```
[assembly: RequiresThread(ApartmentState.STA)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:59:59.090

好的，我现在通过 NUnit 控制台运行测试解决了这个问题，其中包含我所有测试类的完全限定名称的`/runlist`参数（例如`C:\NUnit-2.6.0.12051\bin\nunit-console-x86.exe My.Assembly.dll /xml=result.xml /runlist=..\testlist.txt`） 。`testlist.txt`这样，NUnit 似乎为每个要测试的类完全重启了整个应用程序。这种方法的缺点是，我必须添加到这个列表中，一旦我添加了一个新的测试类，但现在，这个解决方案对我来说很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T07:25:37.293

一种选择是确保`Freeze`所有`ImageSource`对象都在`ResourceDictionary`. 如果 a `Freezable`(例如`ImageSource`) 被冻结，则可以从多个线程访问它，但不可修改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T07:20:42.460

尝试将`RequiresSTA`属性添加到测试夹具。见这里：[http ://www.nunit.org/index.php?p=requiresSTA&r=2.5.9](http://www.nunit.org/index.php?p=requiresSTA&r=2.5.9)

还有`RequiresThread`和`RequiresMTA`（多线程）属性，链接自同一篇文章。它可能无法解决您的问题，但听起来应该。

# process - VMWare 虚拟化应用程序及其运行过程指令跟踪

> ID：14332638
> 
> 赞同：0
> 
> 时间：2013-01-15T07:04:09.427
> 
> 标签：process, operating-system, vmware, virtualization, instructions

我正在探索 VMWare 虚拟化概念，主要关注以下两个：

1）是否可以从来宾操作系统中运行的进程中追踪指令？如果是这样
a) 如何在来宾操作系统本身中进行跟踪？
b) 如何在虚拟化层进行跟踪？

基本上，当一个进程在 VMware env 的来宾操作系统中运行时，如何跟踪来自来宾操作系统中进程的调用/指令？

2) 在虚拟化应用程序中是否可以跟踪指令？

请提供任何有用的链接。我真的很感谢你在这方面的时间。非常感谢你.. :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:31:13.157

1.  在来宾操作系统中，只需像在主机上一样使用调试器（gdb？）。不确定是否理解问题...

2.  [您可以使用Qemu 和 GDB](http://files.meetup.com/1590495/debugging-with-qemu.pdf)实现对虚拟化来宾的跟踪。我不知道 WMWare（至少是 Player）的这些事情。

# c# - 从 C# 为 Google 地图渲染的 JavaScript 不会放置标记

> ID：14332639
> 
> 赞同：0
> 
> 时间：2013-01-15T07:04:10.130
> 
> 标签：c#, javascript, asp.net, google-maps-api-3, google-maps-markers

我在标题中有一段非常通用的 JS，它初始化了地图并在其上放置了一个标记。它看起来像这样：

```
<link href='http://fonts.googleapis.com/css?family=Exo:800' rel='stylesheet' type='text/css'>
<!--<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js"></script>-->
<script type ="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="/js/jqueryslidemenu.js"></script>
<script type="text/javascript" src="/js/jquery.jdpicker.js"></script>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=false"></script>
<link href='http://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>
<script>
    function initialize() {
        var myLatlng = new google.maps.LatLng(-33.8688, 151.2195);
        var mapOptions = { zoom: 15, center: myLatlng, mapTypeId: google.maps.MapTypeId.ROADMAP }

        var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

        var marker = new google.maps.Marker({ position: myLatlng, map: map });
</script> 
```

它位于标题中并且工作得很好。

但是，当我现在尝试使用 C# 生成这些脚本中的另一个以便可以根据搜索结果放置标记时，我生成的 JS 在

```
var myLatlng = new google.maps.LatLng(-33.8688, 151.2195); 
```

线。也就是说，当我将它们放入代码中进行调试时，在该行之后不会弹出任何警报。

我究竟做错了什么？这让我发疯，感谢任何人可以提供的任何帮助。

先感谢您。

问候，科斯佳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:39:07.450

声明选项时忘记了分号：

```
var mapOptions = { zoom: 15, center: myLatlng, mapTypeId: google.maps.MapTypeId.ROADMAP }; 
```

这通常会给我带来错误。

# ruby-on-rails - 如何在跨度中找到带有文本的按钮？

> ID：14332641
> 
> 赞同：1
> 
> 时间：2013-01-15T07:04:18.430
> 
> 标签：ruby-on-rails, ruby, rspec, cucumber, capybara

我有这个 html 输出：

```
<a href="#" class="button-submit" onclick="..." style="..."><span>Sign in</span></a> 
```

我该如何使用：

```
click_button I18n.t 'users.sign_in' 
```

我认为水豚因为跨度而找不到按钮。查找和测试按钮的最佳解决方案是什么？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:23:55.367

为什么不使用 rails 标签提交？

尝试一下`<%= submit_tag I18n.t('.users.sign_in') %>`，我认为它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:52:26.123

嗯，就是对应的.erb-Code：

`<%= link_to content_tag(:span,I18n.t("users.sign_in")), "#", style: "margin-left:132px; margin-top:12px;", class: "button-submit-magenta", onclick: "$(this).parents('form:first').submit()" %>`

我需要“跨度”来与 IE7 兼容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-08T07:05:52.257

尝试这个。希望它会工作。

> page.find(:xpath, "//span[text()='登录']").click

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T21:04:21.307

它不起作用，因为您没有正确的链接或按钮。如果页面上只有一个具有相同类的元素，这将起作用：

```
page.find('.button-submit').click 
```

# html - 如何根据其父高度动态裁剪图像

> ID：14332642
> 
> 赞同：0
> 
> 时间：2013-01-15T07:04:24.037
> 
> 标签：html, css, image

```
 .imageButton {
       width: 14px;
       height: 50px;
    }
    .divClass{
       width:100px;
       height: 30px;  
    }

<div class="divClass"><img class="imageButton" /></div> 
```

这里 .divClass 的高度是动态的。现在我的问题是在显示时需要根据 div 的高度裁剪此图像。例如：- 如果 div 的高度为 30，则需要裁剪 img`top-((img's height-div's height)/2)`并`bottom-((img's height-div's height)/2)`

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:08:44.740

将 100% 的高度和宽度应用于图像

```
.imageButton {
   width: 100%;
   height: 100%;
} 
```

您可以根据需要调整高度和宽度。如果您希望它是父母高度或宽度的一半，您可以将其指定为 50%

希望它会有所帮助

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:14:28.573

如果在您的情况下可以将图像设置为 div 的背景而不是将其放置在 HTML 中会产生预期的效果

```
.divClass {
    background: transparent url('imageButton.png') 50% 50% no-repeat;
} 
```

# php - 导出到 csv 文件时，时间显示基于 24

> ID：14332671
> 
> 赞同：0
> 
> 时间：2013-01-15T07:06:41.687
> 
> 标签：php

我有一个 php 项目，在这里我需要将一些数据从数据库导出到 csv。我的数据包含“时间”，值为“ `7.00 PM`”。但是当我在 csv 上导出它时，它显示“ `19.00`”。但我想显示“ `7.00 PM`”这是代码的一部分

```
$out  .= '"'.$val['first_name'].'",';
$out  .= '"'.$val['second_name'].'",';
$out  .= '"'.$val['pgm_time'].'",';
$f = fopen ('registered_users.csv','w');

// Put all values from $out to export.csv. 
fputs($f, $out);
fclose($f);

header('Content-type: application/csv');
header('Content-Disposition: attachment; filename="registered_users.csv"');
readfile('registered_users.csv'); 
```

我刚刚输出了所有这些值，然后它显示正确的时间（7.00 Pm）。但导出后显示 19.0 。我的数据库也包含正确的值（7.00 Pm）我已经在不同的系统中检查了这个。在某些系统中是可以的。但在某些显示 19.00.. 可能是 Microsoft 的版本或可能是编辑器的任何内部设置。我不知道为什么会这样？

我需要一个解决方案来显示基于 12 小时的时间，即所有系统中的 7:00 PM（独立于编辑器）

有谁知道..或任何其他好的代码。请帮助我...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:34:23.813

## 找对地方

> 可能是微软的版本，也可能是编辑器的任何内部设置

如果您在记事本或其他文本编辑器中打开文件 - 您将看到实际存储的文本，（可能）是“7.00 PM”。如果不是这种情况，请修改显示可重现代码的问题，以生成带有“问题”的 csv 文件。

但是，如果您在 Excel 中打开文件，您*不仅仅是在*打开文件 - 它正在通过导入过程运行。Excel 将尝试为每一列分配正确的类型，在这种情况下说它是一个日期，并适当地转换它。您所描述的是用户自己的 Excel 设置如何表示日期。这意味着您的问题与 php 几乎没有关系 - 而是关于 excel 如何读取 csv 文件。

## 在 excel 中强制 csv 文件“显示为文本”

目前尚不清楚您为什么要这样做（知道为什么，可能会导致不同的建议），但是如果您在字段值前加上单引号，`'`这将强制 excel 将单元格值表示为文本，而不是自动确定单元格/列类型：

```
$out  .= '"\''.$val['pgm_time'].'",'; 
```

即获得：

```
"foo","bar","'7.00 PM" 
```

这可能会使 csv 文件对需要读取它的任何其他进程有问题或无用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:21:21.147

为什么要强求呢？这是应该留给任何显示数据的东西之一。事实上，即使您要以 12 小时格式输出数据，在 Excel 等中打开 CSV 也可能只是将其重新格式化为 24 小时格式。最好以任何格式保留时间数据。

# jquery-mobile - jquery-mobile，phonegap，动态数据不显示

> ID：14332672
> 
> 赞同：1
> 
> 时间：2013-01-15T07:06:57.057
> 
> 标签：jquery-mobile, cordova

这是我用于动态创建 div 并从 Phonegap 数据库填充它的代码但是（a）它不会从数据库中添加动态部分。(b) Rows: 转储 html 内容后，在调试器控制台中打印条目。IE。似乎缺乏同步：

```
var newPage;
var qry="SELECT literal,kunyomi from kanji where Unicode in(select b.Unicode from kanji_reading b where substr(b.kunyomi,1,1)='"+yomi+"')";

db.transaction(function (tx)
        {
            newPage = "<div data-role=page data-url=hi><div data-role=header><h1>" + yomi+ "</h1></div><div data-role=content>";
            newPage +="<ul data-role='listview' id='details'>";

            var temp="";    
            tx.executeSql(qry, [], function(tx,res)
                    {
                        var i;
                        var len = res.rows.length;
                        console.log("records"+len); 
                        for (i=0; i<len; i++)
                            {
                                newPage+="<li><span class='tra-info-text'>"+res.rows.item(i).kunyomi+"</span></li>";
                            }
                        newPage+="</ul></div></div>";
                    },null);

            var page=$(newPage);
            console.log("page:"+page);
            console.log("New Page:"+newPage);
            console.log("page container:"+$.mobile.pageContainer);
            page.appendTo($.mobile.pageContainer);
            $.mobile.changePage( page );    

    }); 
```

输出`console.log("New Page:"+newPage);`仅显示静态部分，即在 tx.executeSQL 部分之前。不会显示在 tx.executeSQL 中添加的任何内容。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:23:04.027

SQL 查询是异步的，这意味着您的代码结尾（以 开头`var page = $(newPage)`）很可能会在您的事务完成之前执行。您应该确保其余代码在事务之后执行，最简单的方法是将其放在 SQL 事务的回调中。

```
db.transaction(function (tx)
    {
        newPage = "<div data-role=page data-url=hi><div data-role=header><h1>" + yomi+ "</h1></div><div data-role=content>";
        newPage +="<ul data-role='listview' id='details'>";

        var temp="";    
        tx.executeSql(qry, [], function(tx,res)
                {
                    var i;
                    var len = res.rows.length;
                    console.log("records"+len); 
                    for (i=0; i<len; i++)
                        {
                            newPage+="<li><span class='tra-info-text'>"+res.rows.item(i).kunyomi+"</span></li>";
                        }
                    newPage+="</ul></div></div>";
                    var page=$(newPage);
                    console.log("page:"+page);
                    console.log("New Page:"+newPage);
                    console.log("page container:"+$.mobile.pageContainer);
                    page.appendTo($.mobile.pageContainer);
                    $.mobile.changePage( page );   
                },null);

}); 
```

# c++ - 具有多个值的 C++ 队列

> ID：14332673
> 
> 赞同：1
> 
> 时间：2013-01-15T07:07:03.000
> 
> 标签：c++, data-structures

我正在寻找具有多个值的队列，但默认值`std::queue`仅支持两个值，例如

```
queue<int, int> myqueue; 
```

我有八个元素，并且想要像这样的队列（PUSH、POP 等）的相同功能

```
queue<int, int, int, int, int, int, int, int> myqueue; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:10:21.793

您没有正确使用队列。通过指定`queue<int>`，您可以使用`push`和`pop`插入任意数量的元素，另请参见：[http ://en.cppreference.com/w/cpp/container/queue](http://en.cppreference.com/w/cpp/container/queue)

如果您想要一个可以容纳 8 个元素的容器，您可能需要使用固定大小的 boost::circular_buffer：http: [//www.boost.org/doc/libs/1_52_0/libs/circular_buffer/doc/circular_buffer .html](http://www.boost.org/doc/libs/1_52_0/libs/circular_buffer/doc/circular_buffer.html)

如果要一次推送 8 个元素，只需使用 a`std::vector`作为队列项，或者使用 8 元组`tuple<int, int, int, int, int, int, int, int>`或带有数组成员的结构：`struct EightInt { int data [8]; }`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:11:37.453

例如，只需存储`std::vector`在队列中。或者，如果这些值具有不同的含义，只需创建一个自定义结构并将其存储在队列中即可。顺便说一句，`std::queue`存储一个值意味着每个元素都是一个值（如果这就是你的意思）。

# wcf-data-services - WCF 数据服务 5.2 MaxProtocolVersion

> ID：14332675
> 
> 赞同：1
> 
> 时间：2013-01-15T07:07:04.620
> 
> 标签：wcf-data-services

当我设置`MaxProtocolVersion`为 V3 时，我的服务不再接受声明`MaxDataServiceVersion: 2.0`. 该服务的响应是：

```
HTTP/1.1 400 Bad Request
Cache-Control: private
Content-Length: 158
Content-Type: application/json;odata=verbose;charset=utf-8
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4.0.30319
X-Content-Type-Options: nosniff
DataServiceVersion: 1.0;
X-Powered-By: ASP.NET
Date: Tue, 15 Jan 2013 06:57:05 GMT

{"error":{"code":"","message":{"lang":"nb-NO","value":"The MaxDataServiceVersion '2.0' enter code hereis too low for the response. The lowest supported version is '3.0'."}}} 
```

配置为版本 3 的服务如何处理来自符合版本 2 的客户端的请求？

# android - Android从模拟器获取.apk文件

> ID：14332679
> 
> 赞同：5
> 
> 时间：2013-01-15T07:07:13.993
> 
> 标签：android, apk

我是android开发的新手。只是出于好奇，我想知道是否可以从 android 模拟器取回安装的 .apk 文件？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T07:17:07.437

@thepoosh 链接的问题确实对您的问题有一些正确的答案，但这*不是*公认的答案。向下滚动一点以回答@plaisthos 或@Pratik。

简而言之：您的 .apk 位于模拟器上的 /data/app 目录中。注意：它的名称可能与构建机器上的 .apk 文件的名称不同，因为 .apk 被重命名为类似于您的包名称的名称。

因此，使用 adb shell： - cd /data/app - ls（并检查 .apk 文件的名称） - 退出 adb shell - 在命令提示符下： adb pull /data/app/your.filename.apk

或者从 Eclipse 使用文件浏览器选项卡，如 @Pratik 在另一个线程中所述。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T07:20:11.410

如果您在eclipse中工作，您可以复制路线**，您在模拟器中安装的apk与**您编译时在您的项目中的apk相同，转到文件夹bin，选择.apk ctrl+c并粘贴到您的桌面例子。

**如何从设备中提取 apk 文件：**

首先运行你的模拟器。

如果您在 Windows 中，请打开 cmd 并转到平台工具：在我的情况下 `cd C:\Program Files (x86)\Android\android-sdk\platform-tools`

之后运行 adb 为：

```
adb pull /data/app <the directory where do you wannt to save> 
```

例子：

```
adb pull /data/app C:\Users\tato469\Desktop\app 
```

访问此文件夹并选择您的应用程序。

注意：查看是否只有一个模拟器在运行，否则会抛出错误。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-15T07:18:44.710

您是想在设备上运行应用程序还是只想要 .apk？

在设备上运行它：

1) 单击项目
2) 转到运行 -> 运行配置 -> 目标选项卡
3) 选择始终提示选择设备然后应用。

之后，每次您尝试运行应用程序时，它都会让您选择任何插入的设备

获取 .apk

1) 右键单击​​项目文件
2) 导出
3) 按照说明操作

# javascript - javascript 键和对象

> ID：14332685
> 
> 赞同：1
> 
> 时间：2013-01-15T07:07:39.507
> 
> 标签：javascript, d3.js

我在下面有一个javascript代码：

```
function init() {
   var data_pie = [];
   var data_key = [];

   data_pie.push(10,12,30,40,80,25);        
   data_key.push("x1","x2","x3","x4","x5","x6");        
   g.update(data_pie, data_key);
}

update: function(data, key) {
   var i=-1;

   var streakerDataAdded = d3.range(data.length).map(function() {
     i++;
       return {
         name: key[i],
         totalPlayers: data[i]
       }
   });
} 
```

如何优化我的代码以使用此对象：

```
var data='{"data":[{"x1":"10","x2":"12","x3":"30","x4":"40","x5":"80","x6":"25"}]}'; 
```

而是`data_pie`和`data_key`数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:16:16.847

如果无法对此进行测试（无法访问其余代码），您可以尝试以下操作：

```
function init() {
   var data='{"data":[{"x1":"10","x2":"12","x3":"30","x4":"40","x5":"80","x6":"25"}]}';

   for(key in data.data[0]){        
       g.update(data.data[0][key], key, data.data[0].length);
   }
}

update: function(data, key, length) {    
   var streakerDataAdded = d3.range(length).map(function() {
       return {
         name: key,
         totalPlayers: data
       }
   });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T13:18:23.543

目前还不清楚为什么要使用这样的数据结构，但无论如何，我们开始吧：

```
var jsonData = '{"data":[{"x1":"10","x2":"12","x3":"30","x4":"40","x5":"80","x6":"25"}]}';
// var cleanerJsonData = '{"x1":"10","x2":"12","x3":"30","x4":"40","x5":"80","x6":"25"}';

function update(json){
    var data = JSON.parse(json).data[0]; // why use an array here?
    // var data = JSON.parse(json) - using cleanerJsonData. 
    var streakerDataAdded = d3.map(data).entries().map(function(d){
        return {name: d.key, totalPlayers: d.value} })
    }
} 
```

# ios - 将 UIImage 转换为 cv::Mat

> ID：14332687
> 
> 赞同：32
> 
> 时间：2013-01-15T07:07:46.183
> 
> 标签：ios, objective-c, opencv

我有一个 UIImage，它是从 iPhone 相机捕获的图片，现在我希望将 UIImage 转换为 cv::Mat (OpenCV)。我正在使用以下代码行来完成此操作：

```
-(cv::Mat)CVMat
{

CGColorSpaceRef colorSpace = CGImageGetColorSpace(self.CGImage);
CGFloat cols = self.size.width;
CGFloat rows = self.size.height;

cv::Mat cvMat(rows, cols, CV_8UC4); // 8 bits per component, 4 channels

CGContextRef contextRef = CGBitmapContextCreate(cvMat.data,                 // Pointer to backing data
                                                cols,                      // Width of bitmap
                                                rows,                     // Height of bitmap
                                                8,                          // Bits per component
                                                cvMat.step[0],              // Bytes per row
                                                colorSpace,                 // Colorspace
                                                kCGImageAlphaNoneSkipLast |
                                                kCGBitmapByteOrderDefault); // Bitmap info flags

CGContextDrawImage(contextRef, CGRectMake(0, 0, cols, rows), self.CGImage);
CGContextRelease(contextRef);

return cvMat;
} 
```

此代码适用于横向模式下的 UIImage，但是当我对从纵向模式拍摄的图像使用相同的代码时，图像会向右旋转 90 度。

我是 iOS 和 Objective C 的新手，因此我无法找出问题所在。

有人可以告诉我代码有什么问题还是我错过了什么。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-15T10:52:55.050

这将是因为`UIImage`它实际上不是肖像。使用 iPhone 相机拍摄的所有照片在原始位图状态下都是横向的，例如 3264 宽 x 2488 高。通过图像中设置的方向 EXIF 标志显示“人像”照片，例如，照片库应用程序根据该标志和相机的查看方向旋转图像，这很荣幸。

该标志还影响`UIImage`报告其宽度和高度属性的方式，将它们从标记为肖像的图像的位图值中转置。

`cv::Mat`不理会这些。这意味着（i）在转换为`cv::Mat`纵向图像时，其`size.width`和`size.height`值将被转置，并且（ii）在从您那里转换回来时，`cv::Mat`将丢失方向标志。

`UIImage`从到处理此问题的最简单方法`cv::Mat`是在图像被标记为纵向时交换宽度和高度值：

```
if  (self.imageOrientation == UIImageOrientationLeft
      || self.imageOrientation == UIImageOrientationRight) {
         cols = self.size.height;
         rows = self.size.width;
    } 
```

从 转换回 时`cv::Mat`，`UIImage`您将需要恢复方向标志。假设您的`cv::Mat -> UIImage`代码包含以下内容：

```
self = [self initWithCGImage:imageRef]; 
```

您可以改用此方法，并根据原件重置方向。

```
self = [self initWithCGImage:imageRef scale:1 orientation:orientation]; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-03-08T10:05:25.347

您应该考虑使用本机 OpenCV 函数来回转换：

```
#import <opencv2/imgcodecs/ios.h>
...
UIImage* MatToUIImage(const cv::Mat& image);
void UIImageToMat(const UIImage* image,
                         cv::Mat& m, bool alphaExist = false); 
```

注意：如果您的 UIImage 来自相机，则应在转换为之前对其进行“标准化”（上传后的 iOS UIImagePickerController 结果图像方向），`cv::Mat`因为 OpenCV 不考虑 Exif 数据。如果你不这样做，结果应该是错误的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-08T14:06:35.283

我试图将肖像转换`UIImage`回来`Mat`，但我对这篇文章的两种方法都有问题。

*   `MatToUIImage`带有并`UIImageToMat`导致旋转图像的本机方法。
*   自定义方法`CGContext`最终导致了一个奇怪的颜色错误（不仅是 RGB / BGR 交换）。红色是红色，蓝色是粉红色，绿色是黄色。

我最终使用了`OpenCV`带有旋转的原生：

```
#import <opencv2/imgcodecs/ios.h>

- (cv::Mat)convertUIImageToCVMat:(UIImage *)image
{
    cv::Mat imageMat;
    UIImageToMat(image, imageMat);
    cv::rotate(imageMat, imageMat, cv::ROTATE_90_CLOCKWISE);
    return imageMat;
}

- (UIImage *)convertCVMatToUIImage:(cv::Mat)cvMat
{
    UIImage *image = MatToUIImage(cvMat);
    return image;
} 
```

# jquery - 带有正确文本的拆分按钮列表视图

> ID：14332692
> 
> 赞同：2
> 
> 时间：2013-01-15T07:07:54.697
> 
> 标签：jquery, css, html, jquery-mobile

我有这样的东西：[jsfiddle](http://jsfiddle.net/3Rqwq/22/)

```
<div data-role="content">
    <ul data-role="listview" data-split-icon="gear" data-split-theme="d">
            <li><a href="index.html">
                <h3>TEST LEFT | TEST RIGHT:</h3>

                </a><a href="#purchase" data-rel="popup" data-position-to="window" data-transition="pop">Purchase album</a>
            </li>
</div> 
```

我的问题是我想在齿轮按钮旁边的右侧有“正确的文本：”。

顺序应该是“lefttext”然后是空白，具体取决于按钮的宽度，然后是滚轮旁边的“right text”

我怎样才能做到这一点？

或者：

两个并排的按钮，每个按钮都包含一个没有齿轮按钮的文本

谢谢

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:35:25.857

不知道我这部分是否正确：

> 顺序应该是“lefttext”然后是空白，具体取决于按钮的宽度，然后是滚轮旁边的“right text”

这就是你要找的吗？

```
<div data-role="content">
<ul data-role="listview" data-split-icon="gear" data-split-theme="d">
        <li><a href="index.html">
            <h3><div style="float:left;">TEST LEFT</div> <div style="float:right;">TEST RIGHT:</div></h3>

            </a><a href="#purchase" data-rel="popup" data-position-to="window" data-transition="pop">Purchase album</a>
        </li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:44:52.817

你想像这样排列这些领域[还是](http://jsfiddle.net/vleran/3Rqwq/456/)只是在其中点燃一些东西？

如果你想像我在 jsFiddle 中那样排列列表，这就是你添加的内容：

```
#myCustomGroup > li {
  display: inline-block;
  float: left;
  width:50%;
} 
```

# libgdx - 在特定时间实例化类

> ID：14332700
> 
> 赞同：1
> 
> 时间：2013-01-15T07:08:31.700
> 
> 标签：libgdx

我正在尝试使用 libgdx 制作一个简单的游戏。我坚持的一件事是让敌人在特定时间产生。如果我做类似的事情

```
if (t == 10) 
    new Enemy(); 
```

我可能会错过这个特定的时间，或者可能会两次产生同一个敌人。我现在拥有的是

```
float t = 0
float timeElapsed = 0;

update (float delta) {
    timeElapsed += getDeltaTime();
    if (timeElapsed > 0.1) {
        t++;
        timeElapsed = 0;
    }
} 
```

这给了我 t 的大约十分之一秒的大致经过时间，但它真的不像我应该这样做的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:40:50.390

此外，如果您的帧速度较慢，例如。getDeltaTime() = 0.2，敌人的生成会延迟。

想到的最简单的方法是去掉 t - 直接与 timeElapsed 进行比较，并跟踪对象引用以了解您是否生成了每个敌人。IE。

```
if (enemy1 == NULL && elapsedTime > 10) {
    enemy1 = new Enemy();
}
if (enemy2 == NULL && elapsedTime > 30) {
    enemy2 = new Enemy();
} 
```

对于更具可扩展性的方法，您可以创建一个生成时间的链接列表，并在生成敌人时推进列表指针。这样，您只需每帧比较一次（当前列表节点上的生成时间）。

附录：在浮点数的上下文中使用 == 很少是一个好主意。有关详细信息，请参见[http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T01:04:38.160

我在我的游戏中使用了一个可能有用的解决方案。我实际上创建了一个 Timer 类：

```
public class Timer
{
    protected float remaining;
    protected float interval;

    public Timer(float interval)
    {
        this.interval = interval;
        this.remaining = interval;
    }

    public boolean hasTimeElapsed() { return (remaining < 0.0F); }

    public void reset() { remaining = interval; }

    public void reset(float interval) {
        this.interval = interval;
        this.remaining = interval;
    }

    public void update(float delta) { remaining -= delta; }
} 
```

您将 Timer 初始化为某个时间段，然后在 update(delta) 方法中对所有 Timer 调用 Timer.update(delta)，然后通过调用 Timer.hasTimeElapsed() 检查是否有任何计时器已用完。

在您的情况下，您只需要一个 Timer 对象，因为敌人是按顺序生成的。生成敌人后，重置计时器（如果需要，可以更改生成时间）并等待它再次启动。

您还可以修改 Timer 对象以使用主体观察者模式，以便在计时器关闭时触发回调。如果您的逻辑需要知道定时事件何时发生，但该逻辑无法直接访问增量时间，这将非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T08:46:13.730

为什么要增加`t`然后根据`t`价值产生敌人。你为什么不这样做呢？

```
final float step = 0.1f;
float timeElapsed = 0f;

update (float delta) {
    timeElapsed += delta;
    while (timeElapsed > step){
         timeElapsed-=step;
         createEnemy();
    }
} 
```

使用这种方法，当您的游戏滞后并且您获得 delta 时，假设为 0.5f 而您的步长为 0.1，您将创建 5 个敌人。我不知道你是否想要这种行为

# sharepoint - 使用 C# 修改 SharePoint 母版页文本

> ID：14332701
> 
> 赞同：1
> 
> 时间：2013-01-15T07:08:33.633
> 
> 标签：sharepoint, streamreader

我有一个用于我正在编写的功能的 SharePoint 事件接​​收器。在 FeatureActivated 方法上，我想向 SharePoint 母版页添加一个控件。为此，我选择在母版页中注入一些文本以添加控件，方法是使用 StreamReader 打开文件，将流读取为文本，插入文本，然后使用 SharePoint 对象模型将文件保存回来.

我遇到了 StreamReader 的问题。当它将流读取为文本时，我得到的只是一堆问号。

这是代码：

```
foreach(SPFile file in files)
{
    switch(new FileInfo(file.Name).Extension)
    {
        case ".master":
            string masterString = string.Empty;
            using(StreamReader reader = new StreamReader(file.OpenBinaryStream()))
            {
                masterString = reader.ReadToEnd();
            }
            //
            // Inject the text I want into the masterString
            // Convert masterString into byte []
            // Save the byte [] back to SharePoint, overwriting the master 
            // page                          
            //
            break;
    }
} 
```

masterString 总是以 ???????????????????????????.... 我需要它以纯文本形式返回。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:14:42.737

尝试不同的编码（UTF-8、UTF-16 等）

```
public StreamReader(
string path,
Encoding encoding) 
```

# c++ - 使用 _variant_t.bstrVal 将 _variant_t 转换为 CString 或显示在 ("%s") 中时会出现差异

> ID：14332702
> 
> 赞同：2
> 
> 时间：2013-01-15T07:08:33.700
> 
> 标签：c++, string, cstring, variant

我想转换`_variant_t`为`CString`，并使用它：

```
#define  VartToCStr(vart) (_variant_t(vart)).bstrVal 
```

如果我将值传递给`CString`，它就可以正常工作，但是传递给`CString::Format(_T("%s"))`，它就不起作用：

```
CString str = VartToCStr(properties[VL_INFO]);
CString str2;
str2.Format(_T("%s,"), VartToCStr(properties[VL_INFO])); 
```

结果：

```
str: "ES1-SW1-SW3-..."
str2: "E" 
```

为什么？
补充：（
由
`properties[VL_INFO]`以下人员创建：

```
CString str = _T("ES1-SW1-SW3-...");
properties[VL_INFO] = CStrToVart(str); 
```

在哪里：

```
#define  CStrToVart(str) _variant_t(str) 
```

)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:46:26.247

一种解决方法是使用 CString::SetString() 而不是 Format()：

```
CString str2;
str2.SetString(VartToCStr(properties[VL_INFO])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T03:00:07.290

您可以使用间接方式将其转换为 cstring 格式

```
cstr= (LPCSTR)_bstr_t(variant); 
```

这可以工作

# axis2 - 使用 web 服务（AXIS2）时出现异常

> ID：14332706
> 
> 赞同：2
> 
> 时间：2013-01-15T07:08:44.433
> 
> 标签：axis2

我使用axis2 和tomcat 来开发我的webservices，用于使用Lucene 搜索我的系统。我编写服务器类并对其进行测试，然后使用“Axis2 Service Archiver”进行部署。Web服务中有2种方法。我用浏览器来测试它。[http://localhost:8080/axis2/services/eBook/plus?x=1.1&y=2.2] 这个简单的方法（PLUS）运行良好，返回3.3。但是另一个（使用 lucene）返回一些异常：无法初始化类 org.apache.lucene.codecs.Codec 我不知道是什么造成了这个问题。有人可以帮忙吗？非常感谢。 **下面的错误信息：**

```
org.apache.axis2.AxisFault: Could not initialize class org.apache.lucene.codecs.Codec
 at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:210)
 at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
 at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:114)
 at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
 at org.apache.axis2.transport.http.util.RESTUtil.invokeAxisEngine(RESTUtil.java:144)
 at org.apache.axis2.transport.http.util.RESTUtil.processURLRequest(RESTUtil.java:139)
 at org.apache.axis2.transport.http.AxisServlet$RestRequestProcessor.processURLRequest(AxisServlet.java:837)
 at org.apache.axis2.transport.http.AxisServlet.doGet(AxisServlet.java:273)
 at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
 at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
 at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
 at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
 at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
 at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
 at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
 at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
 at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
 at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
 at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
 at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
 at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1822)
 at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
 at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
 at java.lang.Thread.run(Unknown Source)
 Caused by: java.lang.reflect.InvocationTargetException
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
 at java.lang.reflect.Method.invoke(Unknown Source)
 at org.apache.axis2.rpc.receivers.RPCUtil.invokeServiceClass(RPCUtil.java:212)
 at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:117)
 ... 25 more
 Caused by: java.lang.NoClassDefFoundError: Could not initialize class org.apache.lucene.codecs.Codec
 at org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:299)
 at org.apache.lucene.index.StandardDirectoryReader$1.doBody(StandardDirectoryReader.java:56)
 at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:783)
 at org.apache.lucene.index.StandardDirectoryReader.open(StandardDirectoryReader.java:52)
 at org.apache.lucene.index.DirectoryReader.open(DirectoryReader.java:65)
 at ns.eBook.Search.process2(Search.java:52)
 ... 31 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:00:40.167

我已经解决了这个问题。在尝试了很多方法之后，我明白了。我将 web 服务中使用的每个 jar 文件（lucene）放入“WEB-INF\lib”，它就可以工作了。谢天谢地。

# android - 单击按钮时屏幕锁定

> ID：14332707
> 
> 赞同：2
> 
> 时间：2013-01-15T07:08:47.790
> 
> 标签：android

我想在按钮单击时打开 android 屏幕，现在我为此编写了一个程序，没有显示任何错误，也没有工作..

代码是..

```
public class MainActivity extends Activity {

Button powerOff;
int amountOfTime =20*1000;
Context context = this;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    powerOff = (Button)findViewById(R.id.button1);
    powerOff.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            // TODO Auto-generated method stub
            PowerManager.WakeLock mWLock;
             try {
                  System.out.println("Enter try Block");

                  PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
                  mWLock = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK |
                          PowerManager.ACQUIRE_CAUSES_WAKEUP |
                          PowerManager.ON_AFTER_RELEASE, "WakeLock");
                  mWLock.acquire();
             } catch(Exception e) {
                    Log.e("ScreenLock", "onStart()::acquire() failed " + e.toString());
             }

        }
    });

} 
```

我想锁屏，怎么办？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:54:20.457

使用以下代码

**PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE); PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "我的标签"); wl.acquire();**

在活动中你必须释放唤醒锁

```
wl.release(); 
```

在清单中使用以下权限

**使用权限 android:name="android.permission.WAKE_LOCK"**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:48:06.907

我猜你已经添加了权限 uses-permission android:name="android.permission.WAKE_LOCK"

# jquery - 拖动时鼠标对齐到中心

> ID：14332715
> 
> 赞同：1
> 
> 时间：2013-01-15T07:09:22.387
> 
> 标签：jquery

嗨，我试图创建一个可拖动的对象，我有一些作品，但是鼠标一直捕捉到对象的中心，我该如何解决这个问题。这是我的例子。我希望鼠标停留在用户单击对象的位置

```
<html>
  <head>
    <script type="text/javascript" src="javascript/jquery-1.8.2.min.js"></script>
    <title></title>
<style>
body {
margin: 0px;
padding:0px;
}

#main {
    margin-left: auto;
    margin-right: auto;
    width: 980px;
    height:600px;
}
.contents {
font-family: sans-serif,arial;
font-style: normal;
font-weight: 100;
font-variant: normal;
font-size: 11px;
}

.callout {
position: relative;
margin: 18px 0;
padding: 18px 20px;
background-color: #88BDE9;
border-radius: 6px;
max-width: 550px;
width: 300px;
font-family: sans-serif,arial;
font-weight: bolder;
font-variant: small-caps;
font-style: oblique;
}

.callout .notch{
position: absolute;
top: -10px;
left: 20px;
margin: 0;
border-top: 0;
border-left: 10px solid transparent;
border-right: 10px solid transparent;
border-bottom: 10px solid #88BDE9;
padding: 0;
width: 0;
height: 0;
}

.border-callout{
border:1px solid #6D5151; 
padding:17px 19px;
box-shadow: 0px 0px 25px rgba(0, 0, 0,0.5);
}

.border-callout .border-notch{ 
border-bottom-color:#6D5151;
top: -11px;
}
</style>
  </head>
  <body>

          <div id="main">
              <div class="callout border-callout">
                This is a callout
                <p class="contents">And here is some more text so we can see the diiferent fonts and so on.</p>
                <b class="border-notch notch"></b>
                <b class="notch"></b>
              </div>
          </div>
<script type="text/javascript">
var $dragging = null, w, h;
    $(document.body).on("mousemove", function(e) {
        if ($dragging) {
            $dragging.offset({
                left: e.pageX - w,
                top: e.pageY - h
            });
        }
    });
    $(document).on('mousedown', 'div.callout', function(e){
        $dragging = $('div.callout'),
        w = $dragging.width() / 2,
        h = $dragging.height() / 2
    });
     $(document.body).on("mouseup", function (e) {
        $dragging = null;
    });
</script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:13:56.037

替换 mousedown 事件处理程序如下

```
$(document).on('mousedown', 'div.callout', function(e){
        $dragging = $('div.callout'),
        w = e.pageX-$(this).position().left,
        h = e.pageY-$(this).position().top

    }); 
```

# git - 如何编辑包含数百次合并的 Git 提交并将冲突合并到过去？

> ID：14332719
> 
> 赞同：3
> 
> 时间：2013-01-15T07:09:38.387
> 
> 标签：git, version-control, git-rerere

我需要在存储库历史的最开始附近修改提交。自那次提交以来，可能已经有数百个分支、合并和合并冲突。

我尝试使用带有 --preserve-merges 选项的交互式 rebase，但我仍然收到数百个类似于“CONFLICT（内容）：Foobar.cpp 中的合并冲突”的冲突错误。如果不是不可能的话，再次手动重新解决它们是非常不切实际的。

我听说过“rerere”功能，但只是现在，所以我还没有启用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T07:31:52.973

Rerere 不会在这里为您提供帮助。

您正在寻找`git filter-branch`. 根据您的更改，您可能可以使用比树过滤器更快的索引过滤器。通过这样做，您将更改所有后续的 SHA-1。

确保包含`--all`参数，以便更新所有引用。这将破坏使用此 repo 作为子模块的任何 repo，因为 SHA-1 将引用不存在的 repo。您将需要编写更多脚本来解决此问题。

此外，如果与您一起工作的任何人有任何未推送的提交，他们将不得不将`git rebase --onto`他们出色的工作推向历史上的新位置。

在接下来的几年里，我们希望看到对执行此类恶作剧的更多支持——尤其是在涉及子模块时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-09T11:40:42.187

[newren/git-filter-repo](https://github.com/newren/git-filter-repo)似乎与 共享相同的目标`git filter-branch`，具有更简单的用户体验和更好的性能（请参阅[为什么使用 filter-repo 而不是其他替代方案？](https://github.com/newren/git-filter-repo#why-filter-repo-instead-of-other-alternatives)）：

请参阅下面的[用户手册](https://htmlpreview.github.io/?https://github.com/newren/git-filter-repo/blob/docs/html/git-filter-repo.html)摘录以从 git 历史记录中删除密码泄漏

> 如果要修改文件内容，可以根据文件中的表达式列表进行修改，每行一个。例如，使用名为 expression.txt 的文件，其中包含
> 
> ```
> p455w0rd
> foo==>bar
> glob:*666*==>
> regex:\bdriver\b==>pilot
> literal:MM/DD/YYYY==>YYYY-MM-DD
> regex:([0-9]{2})/([0-9]{2})/([0-9]{4})==>\3-\1-\2 
> ```
> 
> 然后运行
> 
> git filter-repo --replace-text 表达式.txt
> 
> 将通过并将 p455w0rd 替换为***REMOVED*** [...]

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-15T07:26:50.993

这就是我会尝试的。没有保证，但值得一试

1.  启用[rerere](http://www.kernel.org/pub/software/scm/git/docs/git-config.html) ( `git config rerere.enabled true`)
2.  启用[rerere.autoupdate](http://www.kernel.org/pub/software/scm/git/docs/git-config.html) ( `git config rerere.autoupdate true`)
3.  回到旧的提交并修复它，然后合并。希望 rerere 会在您进行过程中学习并开始自动解决冲突。

# node.js - Node.js 生成子进程并实时获取终端输出

> ID：14332721
> 
> 赞同：144
> 
> 时间：2013-01-15T07:09:46.410
> 
> 标签：node.js, spawn, capture-output

我有一个脚本输出'hi'，休眠一秒钟，输出'hi'，休眠1秒，依此类推。现在我想我可以用这个模型解决这个问题。

```
var spawn = require('child_process').spawn,
temp    = spawn('PATH TO SCRIPT WITH THE ABOVE BEHAVIOUR');

temp.stdout.pipe(process.stdout); 
```

现在的问题是需要完成任务才能显示输出。据我了解，这是因为新生成的进程具有执行控制权。显然 node.js 不支持线程所以有什么解决方案吗？我的想法是可能运行两个实例，第一个用于创建任务的特定目的，并让它将输出通过管道传输到第二个实例的进程，考虑到这可以实现。

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2015-09-30T17:57:44.057

现在（6 年后）容易多了！

Spawn 返回一个**childObject**，然后您可以使用它来**监听事件**。这些事件是：

*   类：子进程
    *   事件：'错误'
    *   事件：“退出”
    *   事件：'关闭'
    *   事件：“断开连接”
    *   事件：'消息'

还有一堆**来自 childObject 的对象**，它们是：

*   类：子进程
    *   子标准输入
    *   child.stdout
    *   child.stderr
    *   孩子.stdio
    *   孩子.pid
    *   子连接
    *   child.kill([信号])
    *   child.send(message[, sendHandle][, callback])
    *   child.disconnect()

在此处查看有关 childObject 的更多信息：[https ://nodejs.org/api/child_process.html](https://nodejs.org/api/child_process.html)

# 异步

如果您想在节点仍然能够继续执行的情况下在后台运行您的进程，请使用异步方法。您仍然可以选择在流程完成后以及流程有任何输出时执行操作（例如，如果您想将脚本的输出发送到客户端）。

[child_process.spawn(...);](https://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options) （节点 v0.1.90）

```
var spawn = require('child_process').spawn;
var child = spawn('node ./commands/server.js');

// You can also use a variable to save the output 
// for when the script closes later
var scriptOutput = "";

child.stdout.setEncoding('utf8');
child.stdout.on('data', function(data) {
    //Here is where the output goes

    console.log('stdout: ' + data);

    data=data.toString();
    scriptOutput+=data;
});

child.stderr.setEncoding('utf8');
child.stderr.on('data', function(data) {
    //Here is where the error output goes

    console.log('stderr: ' + data);

    data=data.toString();
    scriptOutput+=data;
});

child.on('close', function(code) {
    //Here you can get the exit code of the script

    console.log('closing code: ' + code);

    console.log('Full output of script: ',scriptOutput);
}); 
```

以下是**使用回调 + 异步方法的方法**：

```
var child_process = require('child_process');

console.log("Node Version: ", process.version);

run_script("ls", ["-l", "/home"], function(output, exit_code) {
    console.log("Process Finished.");
    console.log('closing code: ' + exit_code);
    console.log('Full output of script: ',output);
});

console.log ("Continuing to do node things while the process runs at the same time...");

// This function will output the lines from the script 
// AS is runs, AND will return the full combined output
// as well as exit code when it's done (using the callback).
function run_script(command, args, callback) {
    console.log("Starting Process.");
    var child = child_process.spawn(command, args);

    var scriptOutput = "";

    child.stdout.setEncoding('utf8');
    child.stdout.on('data', function(data) {
        console.log('stdout: ' + data);

        data=data.toString();
        scriptOutput+=data;
    });

    child.stderr.setEncoding('utf8');
    child.stderr.on('data', function(data) {
        console.log('stderr: ' + data);

        data=data.toString();
        scriptOutput+=data;
    });

    child.on('close', function(code) {
        callback(scriptOutput,code);
    });
} 
```

使用上述方法，您可以将脚本的每一行输出发送到客户端（例如，当您在`stdout`or上接收事件时使用 Socket.io 发送每一行`stderr`）。

# 同步

如果您希望节点停止它正在做的事情并**等待脚本完成**，您可以使用同步版本：

[child_process.spawnSync(...);](https://nodejs.org/api/child_process.html#child_process_child_process_spawnsync_command_args_options) （节点 v0.11.12+）

这种方法的问题：

*   如果脚本需要一段时间才能完成，您的服务器将在这段时间内挂起！
*   **只有脚本完成运行后才会返回标准输出**。因为它是同步的，所以在当前行完成之前无法继续。因此，在生成线完成之前，它无法捕获“stdout”事件。

如何使用它：

```
var child_process = require('child_process');

var child = child_process.spawnSync("ls", ["-l", "/home"], { encoding : 'utf8' });
console.log("Process finished.");
if(child.error) {
    console.log("ERROR: ",child.error);
}
console.log("stdout: ",child.stdout);
console.log("stderr: ",child.stderr);
console.log("exist code: ",child.status); 
```

* * *

## 回答 #2

> 赞同：113
> 
> 时间：2013-03-08T03:45:13.510

我仍然对 Node.js 感到困惑，但我有一些想法。首先，我相信你需要使用`execFile`而不是`spawn`; `execFile`用于当您拥有脚本的路径时，而`spawn`用于执行 Node.js 可以针对您的系统路径解析的众所周知的命令。

## 1.[提供一个回调](http://nodejs.org/api/child_process.html#child_process_child_process_execfile_file_args_options_callback)来处理缓冲的输出：

```
var child = require('child_process').execFile('path/to/script', [ 
    'arg1', 'arg2', 'arg3', 
], function(err, stdout, stderr) { 
    // Node.js will invoke this callback when process terminates.
    console.log(stdout); 
}); 
```

### 2\. 为子进程的标准输出[流](http://nodejs.org/api/stream.html#stream_event_data)添加一个监听器（[9thport.net](http://www.9thport.net/articles/how-to-pipe-a-output-from-child-process-into-a-webpage)）

```
var child = require('child_process').execFile('path/to/script', [ 
    'arg1', 'arg2', 'arg3' ]); 
// use event hooks to provide a callback to execute when data are available: 
child.stdout.on('data', function(data) {
    console.log(data.toString()); 
}); 
```

此外，似乎有一些选项可以让您将生成的进程从 Node 的控制终端中分离出来，这将允许它异步运行。我还没有对此进行测试，但是[API 文档](http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)中的示例如下所示：

```
child = require('child_process').execFile('path/to/script', [ 
    'arg1', 'arg2', 'arg3', 
], { 
    // detachment and ignored stdin are the key here: 
    detached: true, 
    stdio: [ 'ignore', 1, 2 ]
}); 
// and unref() somehow disentangles the child's event loop from the parent's: 
child.unref(); 
child.stdout.on('data', function(data) {
    console.log(data.toString()); 
}); 
```

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2017-11-16T20:26:26.237

这是我发现的最干净的方法：

```
require("child_process").spawn('bash', ['./script.sh'], {
  cwd: process.cwd(),
  detached: true,
  stdio: "inherit"
}); 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2016-02-05T02:05:50.677

当我在子进程中生成 npm 时，我在从“npm install”命令获取日志输出时遇到了一点麻烦。依赖项的实时日志记录未显示在父控制台中。

做原始海报想要做的最简单的方法似乎是这样（在 Windows 上生成 npm 并将所有内容记录到父控制台）：

```
var args = ['install'];

var options = {
    stdio: 'inherit' //feed all child process logging into parent process
};

var childProcess = spawn('npm.cmd', args, options);
childProcess.on('close', function(code) {
    process.stdout.write('"npm install" finished with code ' + code + '\n');
}); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-07-27T23:12:09.687

**类似 PHP 的通路**

```
import { spawn } from 'child_process';

export default async function passthru(exe, args, options) {
    return new Promise((resolve, reject) => {
        const env = Object.create(process.env);
        const child = spawn(exe, args, {
            ...options,
            env: {
                ...env,
                ...options.env,
            },
        });
        child.stdout.setEncoding('utf8');
        child.stderr.setEncoding('utf8');
        child.stdout.on('data', data => console.log(data));
        child.stderr.on('data', data => console.log(data));
        child.on('error', error => reject(error));
        child.on('close', exitCode => {
            console.log('Exit code:', exitCode);
            resolve(exitCode);
        });
    });
} 
```

**用法**

```
const exitCode = await passthru('ls', ['-al'], { cwd: '/var/www/html' }) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-08-13T02:14:38.190

孩子：

```
setInterval(function() {
    process.stdout.write("hi");
}, 1000); // or however else you want to run a timer 
```

家长：

```
require('child_process').fork('./childfile.js');
// fork'd children use the parent's stdio 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-06-17T18:20:38.640

我发现自己经常需要这个功能，所以我将它打包到一个名为[std-pour](https://www.npmjs.com/package/std-pour)的库中。它应该让您执行命令并实时查看输出。简单安装：

```
npm install std-pour 
```

然后执行命令并实时查看输出就足够简单了：

```
const { pour } = require('std-pour');
pour('ping', ['8.8.8.8', '-c', '4']).then(code => console.log(`Error Code: ${code}`)); 
```

它是基于承诺的，因此您可以链接多个命令。它甚至与功能签名兼容，[`child_process.spawn`](https://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)因此它应该是您使用它的任何地方的替代品。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-06-08T14:45:00.930

添加一个样本，`exec`因为我也需要实时反馈，直到脚本完成后才得到任何反馈。`exec` *确实*返回一个**EventEmitter**，这与许多只能`spawn`以这种方式工作的说法相反。

这更彻底地补充了我对已接受答案的评论。

exec 的接口类似于 spawn：

```
// INCLUDES
import * as childProcess from 'child_process'; // ES6 Syntax

// DEFINES
let exec = childProcess.exec; // Use 'var' for more proper 
                              // semantics, or 'const' it all
                              // if that's your thing; though 'let' is 
                              // true-to-scope;

// Return an EventEmitter to work with, though
// you can also chain stdout too: 
// (i.e. exec( ... ).stdout.on( ... ); )
let childProcess = exec
(
    './binary command -- --argument argumentValue',
    ( error, stdout, stderr ) =>
    {    // When the process completes:
        if( error )
        {   
            console.log( `${error.name}: ${error.message}` );
            console.log( `[STACK] ${error.stack}` );
        }

        console.log( stdout );
        console.log( stderr );
        callback();                // Gulp stuff
    }
); 
```

现在它就像注册一个事件处理程序一样简单`stdout`：

```
childProcess.stdout.on( 'data', data => console.log( data ) ); 
```

对于`stderr`：

```
childProcess.stderr.on( 'data', data => console.log( `[ERROR]: ${data}` ) ); 
```

您还可以`pipe`标准输出到主进程的标准输出：

```
childProcess.stdout.pipe( process.stdout ); 
```

一点也不差 - HTH

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-22T20:45:42.203

当我生成 Python 3 脚本时，我遇到了上述情况都不起作用的情况。我会从标准输出获取数据，但只有在孩子终止后。

事实证明，Python 默认缓冲标准输出。可以通过包含`-u`作为 python3 的命令行参数来禁用标准输出缓冲。

# google-app-engine - 无法在 Google 应用引擎启动器中运行 helloworld

> ID：14332723
> 
> 赞同：4
> 
> 时间：2013-01-15T07:09:57.660
> 
> 标签：google-app-engine, python-2.7

Google App Engine Launcher 在运行任何应用程序时突然无法正常工作，昨天还运行良好。

**产生的错误：**

```
 wi2013-01-15 14:56:52 Running command: "['C:\\Python27\\pythonw.exe', 'C:\\Program Files (x86)\\Google\\google_appengine\\dev_appserver.py', '--admin_console_server=', '--port=8080', 'C:\\Users\\Lawrence\\Documents\\guestbook-2']"
Traceback (most recent call last):
  File "C:\Program Files (x86)\Google\google_appengine\dev_appserver.py", line 171, in <module>
    run_file(__file__, globals())
  File "C:\Program Files (x86)\Google\google_appengine\dev_appserver.py", line 167, in run_file
    execfile(script_path, globals_)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_main.py", line 166, in <module>
    from google.appengine.tools import appcfg
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 41, in <module>
    import mimetypes
  File "C:\Python27\Lib\mimetypes.py", line 29, in <module>
    import urllib
  File "C:\Python27\Lib\urllib.py", line 26, in <module>
    import socket
  File "C:\Python27\Lib\socket.py", line 47, in <module>
    import _socket
ImportError: Module use of python25.dll conflict with this version of Python.
2013-01-15 14:56:52 (Process exited with code 1) 
```

当你用谷歌搜索这个错误时，很多解决方案告诉你改变 `System/ User Environment`变量以添加`C:\Python27;C:\Python27\Scripts; C:\Python27\Lib; C:\Python27\libs;` 等，删除或添加用户变量等。所有这些技巧对我都不起作用。

我没有安装`python25`。这些程序引用它并使用 import _socket 是谷歌应用引擎启动器本身或谷歌驱动器，我已经停止了我的谷歌驱动器，因为人们发现这可能会导致问题。所以我想当`GAE`它内部发生一些错误时，这本身就会发生冲突。线索是我在谷歌应用程序启动器日志中遇到另一个错误，`C:\Program Files (x86)\Google\google_appengine\launcher\GoogleAppEngineLauncher.exe.log` 我使用的是 win 7 64 位`GAE 1.7.4`，，`Python 2.7.3`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:01:14.287

你需要编辑`app.yaml`

你应该有：

```
runtime: python 
```

用。。。来代替：

```
runtime: python27
threadsafe: true 
```

注意线程安全： [https ://developers.google.com/appengine/docs/python/python25/migrate27#threadsafe](https://developers.google.com/appengine/docs/python/python25/migrate27#threadsafe)

[https://developers.google.com/appengine/docs/python/config/appconfig#Required_Elements](https://developers.google.com/appengine/docs/python/config/appconfig#Required_Elements)的其他设置`app.yaml`

如果您从 Python 2.5 开始，请阅读：https://developers.google.com/appengine/docs/python/python25/migrate27#appyaml

# python - Django 显示菜单/子菜单

> ID：14332729
> 
> 赞同：1
> 
> 时间：2013-01-15T07:10:25.390
> 
> 标签：python, django

我正在尝试以表格格式显示菜单和子菜单，例如

```
Menu1
Menu2

   SubMenu1
   SubMenu2
   SubMenu3

Menu3
   SubMenu4
   SubMenu5
   SubMenu6
Menu4 
```

到目前为止，我能够提出以下代码，但它没有显示任何记录。

视图.py

```
def getCompleteMenuList():
    return Menu.objects.getMenuListing(id)

#mainMenuObj=Menu.objects.getMenuListing(id)
return render_to_response('manageMenu.html', {'title': menu_title,'name':name,'mainMenu':getCompleteMenuList,},context_instance=RequestContext(request)) 
```

模型.py

```
def getMenuListing(self, id):
    mainMenus = self.filter(parent_menu=0,business=id).order_by('order')
    result = []
    menus = []

    for menu in mainMenus:
        menus.append(menu)
        submenu = self.filter(parent_menu=menu,business=id).order_by('order')
        if submenu.exists():
            result.append(submenu)

    return dict(zip(menus, result)) 
```

模板.html

```
{% with mainMenu.items as pop_menus %}
    {% for key, value in pop_menus %}
    display main menu rows
        {% for data in value %}
    display sub menu rows                                   
        {% endfor %}
    {% endfor %}    
{% endwith %} 
```

当前情况 我在表中有 5 行，其中 4 行作为 parent_menu = 0，1 行作为 parent_menu = 1（存在）。

当我尝试打印 mainMenus 时，它的 show 4 菜单对象。

```
< Menu: Menu object >, < Menu: Menu object >, < Menu: Menu object >, < Menu: Menu object > 
```

但是当我在 for 循环中打印菜单时，它只打印 1 个菜单对象菜单对象

你能告诉我我做错了什么还是有其他方法可以实现同样的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:35:16.393

这不是访问模型方法的正确方法，首先您必须拥有您的方法所属的类的对象 Ex：

```
m = Menu.objects.get(id=foo) 
```

foo 只是一个示例，它必须是与您的 id 对应的某个值。

然后通过传递所需参数的对象调用您在 models.py 文件上创建的方法，例如：

```
menus = m.getMenuListing(id) 
```

现在您在变量菜单中有了正确的数据。试试这个方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:39:44.547

在这一行..

`return dict(zip(menus, result))`

你`menus`和`result`长度不相等，因此[这里描述的 zip() 函数](http://docs.python.org/2/library/functions.html#zip)..

> 返回的列表在长度上被截断为最短参数序列的长度。

字典将被截断为菜单的长度。

除了您的 html 模板，请尝试使用 getMenuListing() 结果进行单元测试。

# android - 并非所有的触摸事件都被 Android 视图接收

> ID：14332734
> 
> 赞同：2
> 
> 时间：2013-01-15T07:10:58.400
> 
> 标签：android, touch, motionevent

在我的 Android 应用程序中，我有一个自定义`View`接收触摸事件。但是，我每次触摸它时它都不会做出反应 - 只是有时。据我所知，如果我触摸屏幕，移动手指，然后松开——即使我只移动一点——事件就会被拾取，但如果我点击屏幕太快以至于手指无法滑过它， 没发生什么事。我怎样才能解决这个问题？

这是视图的代码：

```
public class SpeedShooterGameView extends GameActivity.GameView {
    public SpeedShooterGameView(Context arg0, AttributeSet arg1) {
        super(arg0, arg1);
    }

    @Override
    protected GameThread getNewThread(SurfaceHolder holder, Context context) {
        return new SpeedShooterGameThread(holder, context);
    }

    // Program is driven by screen touches
    public boolean onTouchEvent(MotionEvent event) {
        SpeedShooterGameThread thread = (SpeedShooterGameThread) getThread();
        if (thread.isRunning()) {
            return thread.recieveTouch(event);
        } else {
             return false;
        }
    }
} 
```

我非常确信该行`SpeedShooterGameThread thread = (SpeedShooterGameThread) getThread();`中返回的对象正在按我的预期工作，但如果上面的代码看起来不错，我也会发布该类中的相关代码。当`thread.recieveTouch(event);`被调用时，`MotionEvent`它被发送到另一个线程。

编辑：我将继续发布以下代码`SpeedShooterGameThread`：

```
public class SpeedShooterGameThread extends GameActivity.GameView.GameThread {
    //... snip ...
    private Queue<MotionEvent> touchEventQueue;

    //... snip ...

    public synchronized final void newGame() { //called from the constructor, used to go to a known stable state
        //... snip ...
        touchEventQueue = new LinkedList<MotionEvent>();
        //... snip ...
    }

    //...snip...

    public synchronized boolean recieveTouch(MotionEvent event) {
        return touchEventQueue.offer(event);
    }

    private synchronized void processTouchEvents() {
        synchronized (touchEventQueue) {
            while (!touchEventQueue.isEmpty()) {
                MotionEvent event = touchEventQueue.poll();
                if (event == null) {
                    continue;
                }
                //... snip ....
            }
        }
    }

    //... snip ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:33:46.067

我通过完全取出来修复了这个错误`Queue<MotionEvent>`。我的代码现在看起来像这样：

线程不再使用 a `Queue`，并在被调用`MotionEvents`时立即处理：`recieveTouch()`

```
public class SpeedShooterGameThread extends GameActivity.GameView.GameThread {
//The touchEvent member has been removed.

//... snip ...

    public synchronized final void newGame() { //called from the constructor, used to go to a known stable state
        // touchEvents is no longer initialized.

        //...snip...
    }

    //...snip...

    public synchronized boolean recieveTouch(MotionEvent event) {
        //Immediately handle the MotionEvent here,
        //or return false if the event isn't processed
    }

    // The processTouchEvents() method is removed.

    //... snip ...
} 
```

视图不变：

```
public class SpeedShooterGameView extends GameActivity.GameView {
    public SpeedShooterGameView(Context arg0, AttributeSet arg1) {
        super(arg0, arg1);
    }

    @Override
    protected GameThread getNewThread(SurfaceHolder holder, Context context) {
        return new SpeedShooterGameThread(holder, context);
    }

    // Program is driven by screen touches
    public boolean onTouchEvent(MotionEvent event) {
        SpeedShooterGameThread thread = (SpeedShooterGameThread) getThread();
        if (thread.isRunning()) {
            return thread.recieveTouch(event);
        } else {
             return false;
        }
    }
} 
```

# iphone - UIWebView 加载部分图片

> ID：14332738
> 
> 赞同：2
> 
> 时间：2013-01-15T07:11:13.707
> 
> 标签：iphone, objective-c, uiwebview

在我的 UIWebView 中，我正在从文档目录加载 html 页面。html 页面包含大部分图像。但是当我尝试加载该页面时，它显示部分图像，一些图像被裁剪并显示灰色区域。我试图缓存图像，但我仍然面临同样的问题。图像尺寸接近 512x673，大小为 100KB，分辨率为 70dpi。

我找不到确切的问题。

如果有人有想法，请回复。

提前致谢。

# jquery-mobile - 列表项上的单击事件未正确触发（仅限 iOS 6）

> ID：14332740
> 
> 赞同：1
> 
> 时间：2013-01-15T07:11:23.467
> 
> 标签：jquery-mobile, ios6

这是我在 Stack Overflow 上的第一篇文章。我在谷歌上搜索了这个问题的解决方案，并尝试了许多解决方法，但无济于事。这是我的情况。请注意，此代码在客户端 iPad 上的 iOs 5 上运行良好。我的问题仅与 iOs 6 有关

我有一个 ul 标记，其中有多个列表项，单击每个列表项时，我会将 usetr 导航到不同的页面。请查看下面的代码。对不起，如果代码未格式化。我这么着急。

```
<ul class="tp-breadcrumb" style="float: left; width:91%;">
        <li class="current"><a href="#" style="padding-top:8px;height:23px" class="ui-link">Definition</a></li>
        <li id="brdDateTimeRepSpeaker"><a style="padding-top:1px;height:30px" class="ui-link">Date, Rep,<br>Speaker</a></li>
        <li id="brdVenueManagement"><a style="padding-top:8px;height:23px" class="ui-link">Venue</a></li>
        <li id="brdAudienceSupport"><a style="padding-top:8px;height:23px" class="ui-link">Audience</a></li>
        <li id="brdSummary"><a style="padding-top:8px;height:23px" class="ui-link">Summary</a></li>
</ul> 
```

我正在尝试触发列表项的单击（锚标记是带有 href="#" 的空白标记）。**它会第一次触发。但是在导航到另一个页面然后返回后，点击事件没有触发。**

**但是，如果我单击页面上的文本框或任何其他控件，然后单击列表项，则单击第二次触发正常。以下是单击代码**

```
$("#brdVenueManagement").live("click", function () {
    alert('click');

}); 
```

我尝试了以下方法。

*   向列表项添加 onclick="" 处理程序

*   将点击事件移动到超链接而不是列表项并指定 onclick="" 和 href="#"

*   尝试过点击和触摸启动事件。

*   把重点放在（因为我的 li 是动态生成的）

在上述所有情况下，它在导航到另一个页面之前都可以正常工作。返回时，仅当我单击页面中的某个控件然后单击列表项时才会触发单击

请大家帮帮我。我不知道为什么这不适用于 iOS 6。它在桌面浏览器以及 iOs5 或更低版本的 iPad 上运行良好。

谢谢，斯里拉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:20:03.083

没关系，

我自己修好了。这是一个位置：相对于我的 li 导致事件不被触发。我删除了它，一切都很好。

斯里拉姆

# c# - 想要通过后面的页面代码访问选项卡

> ID：14332742
> 
> 赞同：0
> 
> 时间：2013-01-15T07:11:39.563
> 
> 标签：c#, asp.net, ajaxcontroltoolkit

我创建了一个页面，其中我通过 ajax 控制工具包实现了许多选项卡。现在我想从后面实现的页面代码访问该选项卡。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:01:57.637

尝试这样的事情

```
 <asp:TabContainer ID="TabContainer1" runat="server" ActiveTabIndex="0">
           <asp:TabPanel runat="server" HeaderText="TabPanel1" ID="TabPanel1">
              <HeaderTemplate />
              <ContentTemplate>
                  //CONTROLS COMES HERE
              </ContentTemplate>
           </asp:TabPanel>  
        </asp:TabContainer> 
```

# sonarqube - 如何使用 Amazon Elastic BeanStalk 安装声纳服务器？

> ID：14332743
> 
> 赞同：1
> 
> 时间：2013-01-15T07:11:40.663
> 
> 标签：sonarqube, amazon-elastic-beanstalk

我正在尝试使用 Amazon Elastic Beanstalk 部署声纳服务器。我下载了声纳分布。我跑了`build-war.sh`. 然后使用这些说明自定义 EC2 实例： [http ://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html)

我`.ebextensions`在`sonar.war`.

在那个目录中，我创建了一个`sonar.config`包含这些内容的文件（我的目标是解压缩声纳的分发并更新`SONAR_HOME`环境变量：

```
sources:   
  /tmp: http://dist.sonar.codehaus.org/sonar-3.4.1.zip  
option_settings: 
  - option_name: SONAR_HOME  
    value: /tmp/sonar-3.4.1 
```

当我通过 beanstalk（在 Tomcat 7/Linux 64 实例上）部署 sonar.war 时，我收到此错误：

```
--- Java Exception
java.lang.NullPointerException
    at org.sonar.server.ui.JRubyFacade.get(JRubyFacade.java:99)
    at org.sonar.server.ui.JRubyFacade.getServerHome(JRubyFacade.java:466)

05:08:31.883 [localhost-startStop-1] ERROR jruby.rack - unable to create shared application instance
org.jruby.rack.RackInitializationException: java.lang.NullPointerException: null
    from org/sonar/server/ui/JRubyFacade.java:466:in `getServerHome'
    from /var/cache/tomcat7/temp/0-ROOT/WEB-INF/config/environment.rb:52:in `(root)'
    from /var/cache/tomcat7/temp/0-ROOT/WEB-INF/gems/gems/rails-2.3.14/lib/initializer.rb:111:in `run'
    from /var/cache/tomcat7/temp/0-ROOT/WEB-INF/config/environment.rb:32:in `(root)'
    from org/jruby/RubyKernel.java:1058:in `load'
    from /var/cache/tomcat7/temp/0-ROOT/WEB-INF/config/environment.rb:23:in `load_environment'
    from /var/cache/tomcat7/work/Catalina/localhost/_/loader/jruby/rack/rails_booter.rb:65:in `load_environment'
    from <script>:1:in `(root)'

    at org.jruby.rack.DefaultRackApplicationFactory$4.init(DefaultRackApplicationFactory.java:231) ~[jruby-rack-1.1.10.jar:na]
    at org.jruby.rack.DefaultRackApplicationFactory.getApplication(DefaultRackApplicationFactory.java:58) ~[jruby-rack-1.1.10.jar:na]
    at org.jruby.rack.SharedRackApplicationFactory.init(SharedRackApplicationFactory.java:33) ~[jruby-rack-1.1.10.jar:na]
    at org.jruby.rack.RackServletContextListener.contextInitialized(RackServletContextListener.java:48) [jruby-rack-1.1.10.jar:na]
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791) [catalina.jar:7.0.32]
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285) [catalina.jar:7.0.32]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) [catalina.jar:7.0.32]
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901) [catalina.jar:7.0.32]
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877) [catalina.jar:7.0.32]
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633) [catalina.jar:7.0.32]
    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1105) [catalina.jar:7.0.32]
    at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1664) [catalina.jar:7.0.32]
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) [na:1.6.0_24]
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334) [na:1.6.0_24]
    at java.util.concurrent.FutureTask.run(FutureTask.java:166) [na:1.6.0_24]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [na:1.6.0_24]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [na:1.6.0_24]
    at java.lang.Thread.run(Thread.java:679) [na:1.6.0_24]
org.jruby.exceptions.RaiseException: Native Exception: 'class java.lang.NullPointerException'; Message: null; StackTrace: java.lang.NullPointerException
    at org.sonar.server.ui.JRubyFacade.get(JRubyFacade.java:99)
    at org.sonar.server.ui.JRubyFacade.getServerHome(JRubyFacade.java:466)

    at org.sonar.server.ui.JRubyFacade.get(JRubyFacade.java:99) ~[JRubyFacade.class:na]
    at org.sonar.server.ui.JRubyFacade.getServerHome(JRubyFacade.java:466) ~[JRubyFacade.class:na]
Caused by: java.lang.NullPointerException: null
    ... 2 common frames omitted
05:08:31.884 [localhost-startStop-1] ERROR jruby.rack - Error: application initialization failed
org.jruby.rack.RackInitializationException: java.lang.NullPointerException: null
    from org/sonar/server/ui/JRubyFacade.java:466:in `getServerHome'
    from /var/cache/tomcat7/temp/0-ROOT/WEB-INF/config/environment.rb:52:in `(root)'
    from /var/cache/tomcat7/temp/0-ROOT/WEB-INF/gems/gems/rails-2.3.14/lib/initializer.rb:111:in `run'
    from /var/cache/tomcat7/temp/0-ROOT/WEB-INF/config/environment.rb:32:in `(root)'
    from org/jruby/RubyKernel.java:1058:in `load'
    from /var/cache/tomcat7/temp/0-ROOT/WEB-INF/config/environment.rb:23:in `load_environment'
    from /var/cache/tomcat7/work/Catalina/localhost/_/loader/jruby/rack/rails_booter.rb:65:in `load_environment'
    from <script>:1:in `(root)'

    at org.jruby.rack.DefaultRackApplicationFactory$4.init(DefaultRackApplicationFactory.java:231) ~[jruby-rack-1.1.10.jar:na]
    at org.jruby.rack.DefaultRackApplicationFactory.getApplication(DefaultRackApplicationFactory.java:58) ~[jruby-rack-1.1.10.jar:na]
    at org.jruby.rack.SharedRackApplicationFactory.init(SharedRackApplicationFactory.java:33) ~[jruby-rack-1.1.10.jar:na]
    at org.jruby.rack.RackServletContextListener.contextInitialized(RackServletContextListener.java:48) ~[jruby-rack-1.1.10.jar:na]
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791) [catalina.jar:7.0.32]
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285) [catalina.jar:7.0.32]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) [catalina.jar:7.0.32]
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901) [catalina.jar:7.0.32]
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877) [catalina.jar:7.0.32]
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633) [catalina.jar:7.0.32]
    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1105) [catalina.jar:7.0.32]
    at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1664) [catalina.jar:7.0.32]
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) [na:1.6.0_24]
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334) [na:1.6.0_24]
    at java.util.concurrent.FutureTask.run(FutureTask.java:166) [na:1.6.0_24]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [na:1.6.0_24]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [na:1.6.0_24]
    at java.lang.Thread.run(Thread.java:679) [na:1.6.0_24]
org.jruby.exceptions.RaiseException: Native Exception: 'class java.lang.NullPointerException'; Message: null; StackTrace: java.lang.NullPointerException
    at org.sonar.server.ui.JRubyFacade.get(JRubyFacade.java:99)
    at org.sonar.server.ui.JRubyFacade.getServerHome(JRubyFacade.java:466)

    at org.sonar.server.ui.JRubyFacade.get(JRubyFacade.java:99) ~[JRubyFacade.class:na]
    at org.sonar.server.ui.JRubyFacade.getServerHome(JRubyFacade.java:466) ~[JRubyFacade.class:na]
Caused by: java.lang.NullPointerException: null
    ... 2 common frames omitted 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:35:04.737

我有一个类似的问题，我在[这里](http://www.siteduzero.com/forum/sujet/sonar-tomcat-probleme-de-deploy-ubuntu)找到了答案。

[这是我在 Ubuntu 上安装声纳的方法](https://stackoverflow.com/questions/13412527/sonar-throws-exception-when-starting-on-tomcat-6-running-on-os-x-server)

# jquery - jquery 无法从输入元素中获取值

> ID：14332746
> 
> 赞同：0
> 
> 时间：2013-01-15T07:11:59.103
> 
> 标签：jquery, select, text, input, case-sensitive

我正在使用 jquery 尝试检索文本输入的值，但它不起作用。谁能看到我做错了什么？[http://jsfiddle.net/silvajeff/rJNLr/](http://jsfiddle.net/silvajeff/rJNLr/)

```
<input id="mytest2" value="123"/>
<button id="findRow">Find Row</button>

$("#findRow").click(function() {   
  var theVal = $("#myTest2").val();
  alert(theVal);
}); 
```

我向大家道歉，但我最初发布的只是一个错字，当时我正在分解问题以简化它。我将不得不再次重新发布，只是这次我将未简化的代码[放在这里](https://stackoverflow.com/questions/14333135/jquery-cant-get-the-value-from-an-input-element-2)。不过，我将把这个问题留在这里，并添加一个区分大小写的标签，因为我仍然认为这些对于可能有问题的其他人来说是有价值的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T07:12:50.693

更改`$("#myTest2")`为`$("#mytest2")`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-15T07:13:35.090

您使用了`myTest2`不存在的错误 id `mytest2`。Javascript 是**区分大小写**的，所以你需要小心。

**[现场演示](http://jsfiddle.net/rajaadil/rJNLr/1/)**

```
$("#findRow").click(function() {   
  var theVal = $("#mytest2").val();
  alert(theVal);
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-15T07:14:31.173

您错误地提到了您的字段的“id”值。

id 值在 jQuery 中区分大小写

因此，改变

> myTest2 到 mytest2

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-15T07:17:50.637

更改`id="mytest2"`为`id="myTest2"`

试试这个 ：

```
<input id="myTest2" value="123"/>
<button id="findRow">Find Row</button>

$("#findRow").click(function() {   
  var theVal = $("#myTest2").val();
  alert(theVal);
}); 
```

这意味着 id 区分大小写。

# python - python中的**xyz是什么意思？

> ID：14332750
> 
> 赞同：0
> 
> 时间：2013-01-15T07:12:19.633
> 
> 标签：python

> **可能重复：**
> [*args 和 **kwargs？](https://stackoverflow.com/questions/3394835/args-and-kwargs)

我看到函数叫做

```
def x(**xyz):
    print "Ok" 
```

`**xyz`现在在这个函数中， ie的含义`**`是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T07:14:07.070

[如教程中所述，关键字参数。](http://docs.python.org/2/tutorial/controlflow.html#keyword-arguments)

> 当存在 **name 形式的最终形式参数时，它会接收一个字典（请参阅映射类型 - dict），其中包含除了与形式参数相对应的关键字参数之外的所有关键字参数。

# python - 电子邮件在 zip 文件中附加多个 .CSV：google app engine python

> ID：14332751
> 
> 赞同：0
> 
> 时间：2013-01-15T07:12:24.997
> 
> 标签：python, google-app-engine, email

我如何附加`.zip`包含多个`.csv`文件。前任。`text_1.csv, text_2.csv`

请记住，这些 csv 文件是根据数据存储中的数据构建的。

`message = mail.EmailMessage()`

```
message.attachments = .... #??
message.send() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:25:43.127

你想要这个吗？？？

```
import zipfile, StringIO
o=StringIO.StringIO()
file = zipfile.ZipFile(file=o,compression=zipfile.ZIP_DEFLATED,mode="w")
.. . ## add your csv files here
file.close()
o.seek(0)
self.response.headers['Content-Type'] ='application/zip'
self.response.headers['Content-Disposition'] = 'attachment; filename="your_csvs.zip"'
self.response.out.write(o.getvalue()) 
```

欲了解更多信息，请访问：[http ://www.tareandshare.com/2008/09/28/Zip-Google-App-Engine-GAE/](http://www.tareandshare.com/2008/09/28/Zip-Google-App-Engine-GAE/)

# javascript - asp.net DropDown 不会更改所选项目客户端

> ID：14332753
> 
> 赞同：1
> 
> 时间：2013-01-15T07:12:33.877
> 
> 标签：javascript, jquery, asp.net, drop-down-menu

在我的 ASP.Net 页面上，我使用了[这里](http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/)的 js 插件。我有很好的自定义表单元素适合我的网站的外观和感觉。后来我注意到，当我`Styled`在我的 asp.net 下拉列表控件上应用 css 类并将其`AutoPostback`属性设置为 时`false`，我看不到客户端的选定值发生变化。但是，当我单击页面上的按钮时，发布到服务器的 SelectedValue 正在发生变化，但 UI 在没有发布到服务器的情况下不会更新。

**我看到了ryan**提供的 js 文件，并观察到我是否删除`opacity`或`filter`（在 ie 中）下拉菜单开始正常工作，但不幸的是，这会扰乱`DropDownList`. 使用`opacity`cutom-form .js 动态设置

特别是这行代码设置了`opacity`元素

```
document.write('<style type="text/css">input.styled { display: none; } select.styled { position: relative; width: ' + 140 + 'px; opacity: 0; filter: alpha(opacity=0); z-index: 5; } .disabled { opacity: 0.5; filter: alpha(opacity=50); }</style>'); 
```

这是我的标记

```
<asp:DropDownList ID="ddlRestaurants" runat="server" CssClass="styled" AppendDataBoundItems="True" AutoPostBack="false" Width="50">
<asp:ListItem Value="0" Text="All Restaurants"></asp:ListItem>
</asp:DropDownList> 
```

如果还有什么需要澄清的，请在评论中告诉我。任何帮助我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T00:55:17.550

我怀疑不透明度设置的 javascript 中存在错误，该设置正在停止所有进一步的 javascript 处理。

在 Firefox 中查看它并使用 Web Developer > 错误控制台查看是否看到任何错误消息。

# php - 在列而不是行中显示 php 查询

> ID：14332759
> 
> 赞同：0
> 
> 时间：2013-01-15T07:13:15.903
> 
> 标签：php, html, css, postgresql

嘿伙计们，我有一个 postgres 数据库，我正在使用 php 连接并获取数据。我是php的新手。但无论如何我有这个作为我的查询

```
$sql = "SELECT to_char (a.CALLDATE,'yyyymm') as month,min(a.calldate) as   start_time,max(a.calldate) as end_time,
         ceil(SUM (a.CALLDURATION::integer) / 60) AS minutes,
         COUNT (DISTINCT a.IDENTIFIANT) AS distinct_callers,
a.zoneiddest as country_code,b.country
FROM cdr_data a,COUNTRY_CODES b
WHERE  a.CALLSUBCLASS = '002'
     AND  a.CALLCLASS = '008'
and a.zoneiddest::integer > 0
AND SUBSTR (a.CALLEDNUMBER, 1, 2) NOT IN
('77', '78', '75', '70', '71', '41', '31', '39', '76','79')
and not substr(a.zoneiddest , 1 ,3) in ('254','255','256','211','257','250','256')
and trim(a.zoneiddest)  = trim(b.country_code)
GROUP BY to_char (a.CALLDATE,'yyyymm') ,a.zoneiddest,b.country
ORDER BY 1"; 
```

我有这个来返回被查询的数据：

```
// iterate over result set
// print each row
while ($row = pg_fetch_array($result)) {
     echo "Month: " . $row[0] . "<br />";
     echo "Start Time: " . $row[1] . "<br />";
     echo "End Time: " . $row[2] . "<br />";
     echo "Minutes: " . $row[3] . "<br />";
     echo "Distinct Callers: " . $row[4] . "<br />";
     echo "Country Code: " . $row[5] . "<br />";
     echo "Country: " . $row[6] . "<br />";

  } 
```

这会以这种格式返回我的数据

```
Month: 201212
Start Time: 2012-12-28 15:51:04
End Time: 2012-12-28 15:51:04
Minutes: 0
Distinct Callers: 1
Country Code: 44
Country: United Kingdom of Great Britain and Northern Ireland 
```

但是希望在表中包含这些数据，其中月份、开始时间、结束时间、分钟、不同的呼叫者、国家代码和国家是表中的列标题。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:37:01.253

请检查下面的代码。如果我对您的要求的理解不正确，请告诉我。

```
 <table>
    <tr>
    <td>Month</td>
    <td>Start Time</td>
    <td>End Time</td>
    <td>Minutes</td>
    <td>Distinct Callers</td>
    <td>Country Code/td>
    <td>Country</td>
    </tr>
   <?php 
    while ($row = pg_fetch_array($result)) {
      echo '<tr>';
         echo "<td>" . $row[0] . "</td>";
         echo "<td>" . $row[1] . "</td>";
         echo "<td>" . $row[2] . "</td>";
         echo "<td>" . $row[3] . "</td>";
         echo "<td>" . $row[4] . "</td>";
         echo "<td>" . $row[5] . "</td>";
         echo "<td>" . $row[6] . "</td>";
     echo '</tr>';
        }
    ?>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T07:37:06.077

## 不要忘记添加循环

```
echo "<table cellpadding='5' cellspacing='1' style='background-color: #D7D2D2;font-size:12px;font-family:Tahoma;'>";
echo "<tr>";
echo "<th style='background-color: #FFFFFF;font-size:11px' align='left'>Month</th>";
echo "<th style='background-color: #FFFFFF;font-size:11px' align='left'>Start Time</th>";
echo "<th style='background-color: #FFFFFF;font-size:11px' align='left'>End Time</th>";
echo "<th style='background-color: #FFFFFF;font-size:11px' align='left'>Minutes</th>";
echo "<th style='background-color: #FFFFFF;font-size:11px' align='left'>Distinct Callers</th>";
echo "<th style='background-color: #FFFFFF;font-size:11px' align='left'>Country Code</th>";
echo "<th style='background-color: #FFFFFF;font-size:11px' align='left'>Country</th>";
echo "</tr>";
echo "<tr>";
echo "<td style='background-color: #FFFFFF;'>$row[0]</td>";
echo "<td style='background-color: #FFFFFF;'>$row[1]</td>";
echo "<td style='background-color: #FFFFFF;'>$row[2]</td>";
echo "<td style='background-color: #FFFFFF;'>$row[3]</td>";
echo "<td style='background-color: #FFFFFF;'>$row[4]</td>";
echo "<td style='background-color: #FFFFFF;'>$row[5]</td>";
echo "<td style='background-color: #FFFFFF;'>$row[6]</td>";
echo "</tr>";
echo "</table>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T07:39:03.663

你可以这样做

```
$output = "<table>";
$output .= "<tr>";
$output .= "<td> Month </td>";
$output .= "<td> Start Time </td>";
$output .= "<td> End Time </td>";
$output .= "<td> Minutes </td>";
$output .= "<td> Distinct Callers </td>";
$output .= "<td> Country Codes </td>";
$output .= "<td> Country </td>";
$output .= "</tr>";

while ($row = pg_fetch_array($result)) {
     $output .= "<tr>";
     $output .= "<td>". $row[0] . "</td>";
     $output .= "<td>". $row[1] . "</td>";
     $output .= "<td>". $row[2] . "</td>";
     $output .= "<td>". $row[3] . "</td>";
     $output .= "<td>". $row[4] . "</td>";
     $output .= "<td>". $row[5] . "</td>";
     $output .= "<td>". $row[6] . "</td>";
     $output .= "</tr>";

  }
  $output .= "</table>";

  echo $output; 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T07:39:38.610

```
echo "<table>";
   echo "<tr>";
       echo "<td>Month</td>";
       echo "<td>Start Time</td>";
       echo "<td>End Time</td>";
       echo "<td>Minutes</td>";
       echo "<td>Distinct Callers</td>";
       echo "<td>Country Code</td>";
       echo "<td>Country</td>";
   echo "</tr>";

   while ($row = pg_fetch_array($result)) 
   {
    echo "<tr>";
      echo "<td>".$row[0]."</td>";
      echo "<td>".$row[1]."</td>";
      echo "<td>".$row[2]."</td>";
      echo "<td>".$row[3]."</td>";
      echo "<td>".$row[4]."</td>";
      echo "<td>".$row[5]."</td>";
      echo "<td>".$row[6]."</td>";
   echo "</tr>";
  }
echo "</table>"; 
```

# matlab - 如何使用 MATLAB 程序创建一个随机排列为 1、2 和 3 的新列数组？

> ID：14332768
> 
> 赞同：3
> 
> 时间：2013-01-15T07:13:37.600
> 
> 标签：matlab, random

> **可能重复：**
> [生成具有给定概率matlab的随机数](https://stackoverflow.com/questions/13914066/generate-random-number-with-given-probability-matlab)

我需要创建一个随机分配数字 1、2 和 3 的列向量。但是我需要能够控制每个 oif 这三个数字的出现百分比。

**例如**，我有一个`100 x 1`列向量，我希望随机分配 30 个数字 1、50 个数字 2 和 20 个数字 3。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T07:32:39.800

我不确定您是否可以使用`rand`或`randi`功能来做到这一点。

也许你可以写一个像这样的小模块：

```
bit1 = 1 * ones(1,20);
bit2 = 2 * ones(1,50);
bit3 = 3 * ones(1,30);

bits = [bit1 bit2 bit3];
randbits = bits(:, randperm(length(bits))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T07:30:10.477

您可以使用每个数字的百分比的[CDF（累积分布函数）来做到这一点。](http://en.wikipedia.org/wiki/Cumulative_distribution_function)

```
pdf = [ 30 50 20 ]/100; % the prob. distribution fun. of the samples
cdf = cumsum( pdf );
% I assume here all entries of the PDF are positive and sum(pdf)==1
% If this is not the case, you may normalize pdf to sum to 1. 
```

采样本身

```
n = 100; % number of samples required
v = rand(n,1); % uniformly samples
tmp = bsxfun( @le, v, cdf );
[~, r] = max( tmp, [], 2 ); 
```

正如@Dan 所观察到的（见下面的评论），最后一行可以替换为

```
r = numel(pdf) + 1 - sum( tmp, 2 ); 
```

该向量`r`是整数的随机向量，`1,2,3`应满足所需的`pdf`

# oracle11g - 重命名分区名称时的全局索引

> ID：14332770
> 
> 赞同：0
> 
> 时间：2013-01-15T07:13:45.007
> 
> 标签：oracle11g, indexing, data-partitioning

我有一个现有的表，其中有一些索引。我将使用 dbms 重新定义对该表进行分区。我还必须每 24 小时重命名一次分区名称。重命名分区名称后，全局索引是否有问题。请回复。

是否必须有一个主键来执行间隔分区？

我正在使用 oracle 11g

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:58:39.023

重命名分区不会影响索引状态，全局或其他。如果它们在重命名之前有效，则它们保持有效。

间隔分区不需要主键。约束与范围分区相同，但有一些限制。请参阅概念指南中的[间隔分区：](http://docs.oracle.com/cd/B28359_01/server.111/b32024/partition.htm#autoId29)

> *   您只能指定一个分区键列，并且它必须是 NUMBER 或 DATE 类型。
> *   索引组织的表不支持间隔分区。
> *   您不能在间隔分区表上创建域索引。

请注意，在间隔分区表上自动创建的分区名称是系统生成的。您可以在创建它们之后重命名它们，但在 11gR2 中，您不能使用您选择的名称来创建它们。

# jquery - jQuery 动画单个元素

> ID：14332772
> 
> 赞同：0
> 
> 时间：2013-01-15T07:13:49.383
> 
> 标签：jquery, jquery-animate

我正在尝试独立地为一些元素设置动画。作为开始，我尝试了一个这样的元素，我将其类和 id 定义为“星号”。当元素从其原始位置移动 800 像素时，我希望它停止。我已经正确地做到了。但问题是让它回到原来的位置。一旦元素在屏幕上可见，我希望它开始返回。目前它停止在 800 像素。如果我继续向右滚动，它会保持在 800 像素。但是当我开始向左滚动时，它立即开始向左移动。所以我看不到想要的效果。还请告诉我是否有更好的方法来做同样的事情。因为我这样做的方式，当我尝试为更多元素制作动画时，恐怕会变得非常复杂

```
$(function() {
var lastmove = 0;
$("body").mousewheel(function(event, delta) {
    this.scrollLeft -= (delta * 30);
    var move = 0;
    var move1 = 0;
    if (lastmove == 0 && delta == 1) { 
        //do nothing 
    }
    else {
        move = (lastmove * delta * -1) + 30;
    }
    if ((lastmove-move) > 30) { move = move * -1; }
    if (move > 800) { 
        move = 800; 
    }
    var position = $("#star").position();
    if (position.left < 0) { move = 0; }
    if (position.left > 800) { move = 800; }
    lastmove = move;
    $(".star").stop().animate({left: move}, "slow");
    event.preventDefault();
            });
         }); 
```

[jsfiddle链接](http://jsfiddle.net/W2Wjf/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T07:34:12.427

看到这个：http: [//jsfiddle.net/MZUhh/1/](http://jsfiddle.net/MZUhh/1/)

```
 if(this.scrollLeft > 800 && delta == 1) return false; 
```

简化代码：

```
$(function () {
$("body").mousewheel(function (event, delta) {
  this.scrollLeft -= (delta * 30);
  if (this.scrollLeft > 800) return false;
  $(".star").stop().animate({left: this.scrollLeft}, "slow");
  event.preventDefault();
});
}); 
```

[演示](http://jsfiddle.net/MZUhh/2/)

# go - 是否有内置的 go logger 可以滚动

> ID：14332773
> 
> 赞同：3
> 
> 时间：2013-01-15T07:13:59.487
> 
> 标签：go

是否有内置的 Go 记录器可以在达到文件大小限制时滚动日志文件？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T16:52:47.033

不，目前没有内置的记录器具有此功能。
*log4go*，你会在搜索时发现推荐的，~~目前已损坏。~~有一些[问题](http://code.google.com/p/log4go/issues/list)会导致消息丢失（如果主程序退出并且某些消息在写入之前仍在通道缓冲区中）。
这存在于大多数（如果不是全部）示例中。

另见[这个问题](https://stackoverflow.com/questions/14252766/abnormal-behavior-of-log4go/14257272#14257272)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T07:18:01.747

[在syslog 包](http://golang.org/pkg/log/syslog/)之上，这可能不是你真正想要的，标准库中没有这样的东西。

从第 3 方包中，例如[log4go](http://code.google.com/p/log4go/)声称具有此功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-08T22:31:41.200

```
import (
    "os"

    "github.com/nikandfor/tlog"
    "github.com/nikandfor/tlog/rotated"
)

func main() {
    f, err := rotated.Create("logfile_template_#.log") // # will be substituted by time of file creation
    if err != nil {
        panic(err)
    }
    defer f.Close()

    f.MaxSize = 1 << 30    // 1GiB
    f.Fallback = os.Stderr // in case of failure to write to file, last chance to save log message

    tlog.DefaultLogger = tlog.New(tlog.NewConsoleWriter(f, tlog.LstdFlags))

    tlog.Printf("now use it much like %v", "log.Logger")

    log.SetOutput(f) // also works for any logger or what ever needs io.Writer

    log.Printf("also appears in the log")

} 
```

*   记录器[https://github.com/nikandfor/tlog](https://github.com/nikandfor/tlog)
*   旋转文件[https://godoc.org/github.com/nikandfor/tlog/rotated](https://godoc.org/github.com/nikandfor/tlog/rotated)

# css - 为溢出表设置填充/边距

> ID：14332786
> 
> 赞同：0
> 
> 时间：2013-01-15T07:14:44.137
> 
> 标签：css

我有一张住在 div 里面的桌子。该表中有大量内容与窗口重叠，因此我需要向左滚动以查看其内容。问题是表格右侧没有填充或边距以使其更易于阅读。

如何向该表添加填充或边距？

这是 html 的样子（请注意，下面的 css 不起作用）：

```
<html>
<head></head>
<body>
<div id="table">
    <table>
        <thead>...</thead>
        <tbody>...</tbody>
    </table>  
</div>
<style>
table td, table th, table td {border: 1px solid red}
table { padding-right: 100px; border: 1px solid blue}
table thead, table tbody {padding-right: 100px;}
</style>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:44:22.423

你能试试这个吗？

```
<style type="text/css">
      #table table td,#table table th,#table table td {border: 1px solid red}
      #table table { padding-right: 100px;color: blue}
      #table table thead,#table table tbody {padding-right: 100px;}
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:30:52.450

只需添加`display: inline-block;`到表中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T07:52:21.647

在 css 中，您不需要前缀 of 。或 # 到 table,td,tr,p,

在您的问题中，添加以下代码

```
 #table table thead, table tbody {padding-right: 100px;} 
```

注意 # 这里...因为 # 是 Id 选择器。

祝你好运 ..！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T09:40:08.763

谢谢你的回答。但是我发现通过 javascript 来做这件事要容易得多，也非常灵活。在这里，我正在使用 jQuery 框架：

```
 $('#table').width() = $('table').width() + 20;
 $('table').css('padding-right', '10px'); 
```

这将使表格的宽度达到最初的预期。

# php - YII：从另一个字段（不是 PK）获取 getLevel() 值

> ID：14332787
> 
> 赞同：0
> 
> 时间：2013-01-15T07:14:57.760
> 
> 标签：php, yii

我在登录团队应用程序时遇到了一些问题。这是代码.. EWebUser.php

```
<?php
class EWebUser extends CWebUser{

protected $_model;

protected function loadUser()
{
    if ( $this->_model === null ) {
        $this->_model = StaffDb::model()->findByPk($this->id);
    }
    return $this->_model;
}

function getLevel()
{
    $user=$this->loadUser();
    if ($user->kdstpeg == 02){
        if(substr($user->kdorg,1,4) == '0000') $level=1;
        else if (substr($user->kdorg,2,3) == '000') $level=2;
        return $level;
    }
    return 100;
} 
```

用户身份.php

```
<?php

class UserIdentity extends CUserIdentity
{
    private $_id;

    public function authenticate()
    {
            $username = strtolower($this->username);
            $user = MUser::model()->find('LOWER(username)=?', array($username));
                if($user===null)
            $this->errorCode=self::ERROR_USERNAME_INVALID;
            else if ($user->pwd!=$this->password)
            $this->errorCode = self::ERROR_PASSWORD_INVALID;
                else
                {
                    $this->_id = $user->oldStaffCode;
                    $this->username = $user->username;
                    $this->errorCode = self::ERROR_NONE;
                }
        return $this->errorCode == self::ERROR_NONE;
    }

     public function getId()
    {
        return $this->_id;
        }
} 
```

和 StaffDb.php（我的模型之一）

```
public static function model($className=__CLASS__)
{
    return parent::model($className);
}

public function tableName()
{
    return 'staffdb';
}

public function rules()
{
    return array(
        array('oldStaffCode', 'required'),
        ... array('kdstpeg', 'max'=>2),

        array('...', 'safe'),
        array('oldStaffCode, kdstpeg, ...', 'safe', 'on'=>'search'),
    );
}

public function primaryKey()
{
  return 'oldStaffCode';
} 
```

当我尝试访问此应用程序时，会显示错误“尝试获取非对象的属性”。然后，我将这段代码放在 EWebUser.php`print_r ($user);`上，以查看 $user 的视图是什么样的。但它没有任何效果。:(我的问题是，我是否遗漏了代码中的某些内容？因为在我看来，所有对象都是完整的。我希望有解决这个问题的建议。提前致谢。:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:35:45.413

如果`$user=$this->loadUser();`由于未设置 id 或未找到 id 而没有找到任何模型，它将返回 NULL

因此`$user->kdstpeg`将尝试获取调用错误的 NULL 成员 kdstpeg。你需要检查一下`$user !== null`

第二个注意事项： [print_r](http://be2.php.net/manual/en/function.print-r.php)不会显示 NULL，你最好做一个[var_dump](http://php.net/manual/en/function.var-dump.php)，它也会告诉你你转储的变量的类型

**编辑** 如果您正在比较数字，则不应使用**02**，如果`$user->kdstpeg`数据库中的值为 02 ，它将是一个字符串，而`$user->kdstpeg == 02`将再次检查整数 2，并将返回 false，因此您需要`(int)$user->kdstpeg === 2`或`$user->kdstpeg === '02'`

# android - 有没有办法跳转到列表视图中的特定项目

> ID：14332791
> 
> 赞同：0
> 
> 时间：2013-01-15T07:15:07.677
> 
> 标签：android, json, listview

我正在开发一个冗长的列表视图，它是从来自我的服务器的 JSON 数组创建的。当一个项目被选中时，它可能在列表中的任何地方，当我返回时，我想跳回到那个特定的项目。

我正在考虑 setSelection(position) 结构，但我很好奇 position 变量是如何设置的。它是否需要来自 JSON 字符串，或者它是在填充列表视图时创建的变量。如果创建它，检索它的语法是什么，以便我可以将它传递给负责显示更多数据的 Activity，然后在重新显示列表视图时返回原始 Activity。

作为附加信息，我刚刚添加了将其存储在我的首选项中的功能，以便加载速度更快，从而将其存储在手机上。如果数据由于用户交互而发生变化，我会检索新的 JSON 字符串，因此保持位置并不重要。

我希望不需要重建我的 JSON 字符串来包含这个变量。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:22:15.350

将您的索引存储在某处并使用它来关注所选项目：

```
// focus on selected item
View v = myListView.getChildAt(index);
int top = (v == null) ? 0 : v.getTop();
myListView.setSelectionFromTop(index, top); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T07:42:25.180

在 ListView 上使用`setOnItemClickListener`并将当前位置保存在局部变量上（持久或非持久取决于需要），在您返回时在对象上使用此`setSelection`方法（如果它是 Activity），在设置之前检查空值。`ListView``onResume`

# django - 如何处理 MultiObjectsReturned 错误

> ID：14332792
> 
> 赞同：0
> 
> 时间：2013-01-15T07:15:09.367
> 
> 标签：django, django-views

我在尝试加载页面时遇到了这个错误。`get() returned more than one Item -- it returned 2! Lookup parameters were {}`

这是呈现页面的视图：

```
def get_category(request):
    categories = Category.objects.all().prefetch_related('item')
    # need to evaluate the HTTP method
    if request.method == 'POST':
        # add to order..create the bound form
        postdata = request.POST.copy()
        form = forms.PartialOrderItemForm(request.POST,postdata)
        # check validation of posted data
        if form.is_valid():

            order.add_to_order(request)
            # if test cookie worked, get rid of it
            if request.session.test_cookie_worked():
                request.session.delete_test_cookie()
            url =urlresolvers.reverse('order_index')
            # redirect to order page
            return HttpResponseRedirect(url)
    else:
        # it's a GET, create the unbound from. Note request as a Kwarg
        form = forms.PartialOrderItemForm(request.GET)
    # set the test cookie on our first GET request
    request.session.set_test_cookie()
    context={
        'categories':categories,
        'form':form,
#       'menu':menu,

    }
    return render_to_response('category.html',context,context_instance=RequestContext(request)) 
```

此视图在之后的某个时间点调用以下函数`is_valid`，

```
def add_to_order(request):  
    postdata = request.POST.copy()
    #get quantity added, return 0 if empty
    quantity = postdata.get('quantity',0)
    # fetch the item or return  missing page error_message
    i = get_object_or_404(Item,)
    # get items in order
    order_items = get_order_items(request)
    item_in_orders = False
    # check to see if item is already in order
    for order_item in order_items:
        if order_item.item.id == i.id:
            #update the quantity if found
            order_item.augment_quantity(quantity)
            item_in_orders = True
    if not item_in_orders:
        # creat and save a new order item
        oi = OrderItem()
        oi.order_id = _order_id(request)
        oi.quantity = quantity
        oi.item = i
        oi.save() 
```

这是追溯

```
Traceback:
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/mats-invasion/projects/f4l/f4l/live/views.py" in get_category
  26\.           order.add_to_order(request)
File "/home/mats-invasion/projects/f4l/f4l/cart/order.py" in add_to_order
  42\.   i = get_object_or_404(Item,)

File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/shortcuts/__init__.py" in get_object_or_404
  113\.         return queryset.get(*args, **kwargs)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/db/models/query.py" in get
  368\.                 % (self.model._meta.object_name, num, kwargs))

Exception Type: MultipleObjectsReturned at /menu/
Exception Value: get() returned more than one Item -- it returned 2! Lookup parameters were {} 
```

谢谢你 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:23:40.310

在您的行`i = get_object_or_404(Item,)`中尝试获取该项目，但您没有为其指定任何过滤器查询，因此它将尝试`Item.objects.get()`返回所有对象（类似于`Item.objects.all()`）。[`.get()`并`get_object_or_404()`](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#get-object-or-404)`MultipleObjectsReturned`在给定查询有多个对象时引发异常。

因此，您需要将您的行更新为：

```
i = get_object_or_404(Item, id=someid) 
```

# msbuild - 巡航控制 ASPNETCOMPILER : 错误 ASPRUNTIME: 预编译目标目录

> ID：14332794
> 
> 赞同：3
> 
> 时间：2013-01-15T07:15:16.210
> 
> 标签：msbuild, cruisecontrol.net, clearcase

当我尝试通过 CruiseControl 和 MSBuild 版本 4 构建解决方案文件时，我收到以下错误

```
ASPNETCOMPILER : error ASPRUNTIME: The precompilation target directory 
```

它来自哪里以及如何避免它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T07:22:32.280

您需要仔细检查预编译目录位置。

您需要：

*   删除其内容（如“ [`ASPNETCOMPILER`：错误`ASPRUNTIME`：目标目录不为空](https://stackoverflow.com/a/3836958/6309)”）
*   检查其路径（`Debug.AspNetCompiler.TargetPath`或`Release.AspNetCompiler.TargetPath`在解决方案文件中）是否可写（例如，您不能在 ClearCase 中的动态视图的根目录中写入`M:\MyView`：）
*   检查巡航控制是否可以访问您的视图（特别是如果它是动态视图）

如“[尝试使用 aspnet_compiler 从命令行构建和发布 Asp.net 网站](https://stackoverflow.com/a/12097139/6309)”中所示，错误消息通常更完整，类似于：

```
Error: error ASPRUNTIME: The precompilation target directory
(c:\Inetpub\wwwroot\WebsiteOne) 
cannot be in the same tree as the source application directory 
(c:\inetpub\wwwroot\WebsiteOne). 
```

来自博客文章“ [CruiseControl.NET 入门](http://johnnycoder.com/blog/2008/01/29/getting-started-with-cruisecontrolnet/)”：

> 对于 Web 解决方案，将应用程序`TargetPath`的`Debug`和/或`Release`构建更新到源应用程序目录之外。
> 否则，您将收到以下错误：

```
ASPNETCOMPILER : error ASPRUNTIME: The precompilation target directory cannot be in the same tree as the source application directory. 
```

> 这可以通过修改解决方案文件中的以下内容来完成：

```
Debug.AspNetCompiler.TargetPath = “c:\ccnet\PrecompiledWeb\SampleWeb\”
Release.AspNetCompiler.TargetPath = “c:\ccnet\PrecompiledWeb\SampleWeb\” 
```

> 或者，可以更新在应用程序 MSBuild 属性中找到的输出位置。
> 
> 您可能想知道为什么更新的解决方案不会在下一个计划的构建中更新。当它起作用（并且有意义）时，只有应用于源代码控制的更改才会被拉到构建框上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T05:38:06.300

我已通过以下更改解决了该问题：

```
Debug.AspNetCompiler.TargetPath = “c:\ccnet\PrecompiledWeb\SampleWeb\”
Release.AspNetCompiler.TargetPath = “c:\ccnet\PrecompiledWeb\SampleWeb\” 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-21T13:45:50.020

右键单击解决方案资源管理器中的项目选择属性页选择对话框左侧的 MSBuild 选项更改输出文件夹的路径 - 确保您的路径不属于同一路径树

# c++ - 一个类中的触发事件从另一个类订阅

> ID：14332807
> 
> 赞同：0
> 
> 时间：2013-01-15T07:16:16.433
> 
> 标签：c++, algorithm, events

我有一个类`AwesomeMousePointer`，它具有一些开始在鼠标上播放动画的功能：

```
class AwesomeMousePointer{
void startAnimat();
void stopAnimat();
}; 
```

我有另一个对象，我负责确定鼠标动画是否应该启动（这是基于对对象的内部命中测试，例如：如果鼠标在对象内的特定时间）

```
class SomeShape(){
Event<MouseArgs> startAnim
Event<bool> interrutptAnim
bool hitTest(int x, int y);

//Inside some loop function, check if the mouse is inside the object
if(hitTest(mouseXPos, mouseYPos)){
//if the mouse if inside for x time
NotiftyEvent(startAnim, MouseArgs);
}
else{
//mouse left the object
NotifyEvent(interruptAnim, false);
} 
```

现在，再次在我的内部`AwesomeMousePointer`，我将为事件添加侦听器，即

```
AddListener(SomeShape::startAnim, &AwesomeMousePointer::startAnim);
AddListener(SomeShape::interruptAnim, &AweseommousePointer::interruptAnim); 
```

在我尝试过的简短不同示例中，使用单事件系统`NotifyEvent`并且`AddListener`工作正常。现在在我的这个应用程序中，我有很多对象`SomeShape`和一个`AwesomeMousePointer`. 我的问题是，动画的上述逻辑是否有效，或者我是否应该明确传递`SomeShape`对象以订阅他们的事件，在这种情况下事情会变得有点困难。

例如：

```
AddListener(shapeObject1.startAnim, &AwesomeMousePointer::startAnimat);
AddListener(shapeObject2.startAnim, &AwesomeMousePointer::startAnimat);
AddListener(shapeObject3.startAnim, &AwesomeMousePointer::startAnimat); 
```

**或者**

```
AddListener(SomeShape::startAnim, &AwesomeMousePointer::startAnimat); 
```

上面的第二个会成功吗？如果不是，那么在不明确传递对象的情况下如何完成，因为这会导致不清楚并且`ShapeObjects`不应该在`MousePointer`.

如果我将内部的事件`SomeShape`设为静态，这会起作用吗？

```
static Event<MouseArgs> startAnim
static Event<bool> interrutptAnim 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:09:58.183

您说您不希望发送者和目标之间存在耦合。在这种情况下，不适合使用 Poco 事件。根据[http://pocoproject.org/slides/090-NotificationsEvents.pdf](http://pocoproject.org/slides/090-NotificationsEvents.pdf)，您应该使用通知而不是事件，因为那时您的发送者和目标不需要相互了解。

# php - Ajax 请求和回调不起作用我尝试了多少次

> ID：14332813
> 
> 赞同：-3
> 
> 时间：2013-01-15T07:16:47.083
> 
> 标签：php, ajax, json

我有一个简单的 PHP 代码，它从包括图像的表中检索数据并将其存储在 JSON 对象中。

```
<?php
$con = mysql_connect("localhost","root","root");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}
$selected = mysql_select_db("req2",$con)
or die("Could not select req2");
$table_first = 'locationtab';
$query=mysql_query("SELECT Id,City,Image FROM $table_first");

    while ($row=mysql_fetch_assoc($query)) {
        $array=$row;
        $array['Image']=base64_encode($row['Image']); 
       $output[]=$array;
    }

echo json_encode($output);

mysql_close($con);
?> 
```

这工作得很好，我可以使用 print 查看 JSON 对象。在客户端，我编写了一个 Javascript+Ajax 代码来调用这个 PHP 文件，并在成功时显示 JSON 对象中的数据。我不知道下面的代码中缺少什么，但我似乎根本没有让 AJAX 部分工作。请帮忙

```
<html>
<head>
<script src="file://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
</script>
<script>
$(document).ready(function(){ 
$.ajax({
     url:"table.php",
     dataType:'json',
     type:'POST',
      success:function(output) {
alert( output.Id );
               }
});

});
</script>
</head>
<body>
<p>test</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:18:38.453

`output`是一个带有 id 的对象*数组*。

您将其视为具有 id 的单个对象。

您需要`for`循环或获取特定索引。

```
alert( output[0].Id ); 
```

# php - 如何在 wordpress 中找到 url 处理程序？

> ID：14332818
> 
> 赞同：0
> 
> 时间：2013-01-15T07:17:31.090
> 
> 标签：php, wordpress

如果我有一些表格要在网站上发送，我如何才能找到处理该表格的脚本在哪里？

例如一个表格

`action="/#wpcf7-f20-w1-o1"`

在哪里可以找到处理脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:27:42.357

这是典型的`Contact Form 7`插件。您需要挂钩它以获取值。您可以查看[非官方开发人员文档](http://xaviesteve.com/3298/wordpress-contact-form-7-hook-unofficial-developer-documentation-and-examples/)和[文档](http://contactform7.com/docs/)以了解更多详细信息。

以下是有关如何获取发布的值的示例：

```
add_action( 'wpcf7_before_send_mail', 'callback_fn' );

function callback_fn( $data )
{
// manipulate $data to get values
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T07:25:56.833

wpcf7 看起来像是来自[Contact Form 7](http://wordpress.org/extend/plugins/contact-form-7/)。检查您的插件目录。顺便说一句，[WordPress Answers SE](http://wordpress.stackexchange.com)将是一个更好的地方来询问任何与 WordPress 相关的问题。

# iphone - TTStyledTextLabel 打开 URL [打开]

> ID：14332824
> 
> 赞同：0
> 
> 时间：2013-01-15T07:18:10.890
> 
> 标签：iphone, ios, three20, ttstyledtextlabel

我正在尝试使用 TTStyledTextLabel 打开 url。我搜索但发现我必须将它附加`<a href=''></a>`到我的字符串中。

试过了，但还是不行。

```
 TTStyledTextLabel *tnc = ....;
    NSString *message = @"My message";

    message = [NSString stringWithFormat:@"<a href=''></a> %@ http://www.google.co.in", message];
    TTStyledText *text = [TTStyledText textFromXHTML:message lineBreaks:YES URLs:YES];

    tnc.text = text; 
```

我是否以正确的方式这样做。每当我点击 url 时，它都会被高亮显示，但会使我的其他字符串不可见。我应该使用 webView 打开一个 url 还是直接打开一个 safari？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T02:11:37.727

您的消息字符串不正确。可能是以下内容：

```
message = [NSString stringWithFormat:@"<a href='http://www.google.co.in'>%@</a>", message]; 
```

当您点击消息时，它将在 webView 中打开一个 url。

# asp.net - 如何使用 asp.net MVC 部署 Asp.net 站点

> ID：14332828
> 
> 赞同：-3
> 
> 时间：2013-01-15T07:18:46.833
> 
> 标签：asp.net, asp.net-mvc

我有以下问题：-

我创建了一个 MVC 站点并部署在具有不同域的 IIS（不在默认网站中）上。之后我在同一域下创建了一个虚拟目录（带有 asp.net 站点），但它不起作用，因为当我打开 asp.net 站点时它在 MVC 站点上重定向并使用不在 MVC 站点中的虚拟目录名称搜索控制器名称。我该如何解决问题。

地图路线方法的代码是：

公共静态无效注册路由（RouteCollection 路由）{

```
 routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        //routes.MapRoute(
        //    "Default", // Route name
        //    "{controller}/{action}/{id}", // URL with parameters
        //    new { controller = "Category", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        //);

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Category", action = "ShowBrand", id = UrlParameter.Optional } // Parameter defaults
        );

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:58:39.420

您需要在 global.asax RegisterRoutes 方法中处理 URL 请求。您需要考虑希望 MVC 如何知道物理 URL 和控制器请求之间的区别。

或者，您可以将重定向放在控制器中，以转到文件位置。

# breeze - Breeze.js 未从服务器返回自定义验证错误消息

> ID：14332833
> 
> 赞同：1
> 
> 时间：2013-01-15T07:19:21.653
> 
> 标签：breeze

我无法弄清楚为什么**Breeze.js (0.84.3)**不会向客户端返回由在类级别应用于服务器模型的自定义验证属性设置的错误消息。我可以使用 Breeze TODO KO 样本重现这一点，如下所示：

```
using System;
using System.ComponentModel.DataAnnotations;
namespace Todo.Models
{
    [MyCustomValidator] // NEW
    public class TodoItem
    {
        public int Id { get; set; }
        [Required, StringLength(maximumLength: 30)]     
        public string Description { get; set; } // Set to 'error' to trigger server error.        
        public System.DateTime CreatedAt { get; set; }  
        public bool IsDone { get; set; }                
        public bool IsArchived { get; set; }            
    }

    [AttributeUsage(AttributeTargets.Class)] // NEW
    public class MyCustomValidator : ValidationAttribute
    {
        public override Boolean IsValid(Object value)
        {           
            var todo = value as TodoItem;
            if (todo.Description == "error")
            {
                ErrorMessage = "The TodoItem is not valid!";
                return false;
            }
            return true;
        }
    }
 } 
```

我希望错误消息*“TodoItem 无效！”* 将返回给客户端，但 Breeze 似乎总是从服务器返回*“值不能为空。参数名称：源”*。似乎有一个例外发生在：

```
StackTrace:   
at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector) at Breeze.WebApi.EFContextProvider`1.SaveChangesCore(Dictionary`2 saveMap)
at Breeze.WebApi.ContextProvider.SaveChanges(JObject saveBundle)
at Todo.Controllers.TodosController.SaveChanges(JObject saveBundle) in c:\Users\RichardH\Downloads\Software\Web\breeze-runtime-plus-0.84.3\Samples\Todo\Todo\Controllers\TodosController.cs:line 41
at lambda_method(Closure , Object , Object[] )
at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
at System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken) 
```

谁能阐明我如何将服务器上的验证应用于整个模型（而不仅仅是单个属性/字段）？

谢谢，理查德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T08:05:27.320

首先，Breeze.NET 服务器端元数据不会将自定义服务器验证属性传递给 Breeze 客户端。它只传达某些标准的，例如Required、MaxLength 和StringLength。如果要在客户端上复制验证，则必须在客户端上用 JavaScript 编写验证器，并将它们注册到客户端元数据中，如[验证文档中所述](http://www.breezejs.com/documentation/validation)

其次，我猜想失败发生在 EF 中，因为它尝试使用您的自定义验证规则。异常在 SaveChangesCore 中引发，这是 EFContextProvider 要求 EF 保存更改的地方。

`Select`根据堆栈跟踪，它可能是由Breeze 试图告诉您有关验证错误的语句引起的 LINQ 异常。我的意思是`Select`在这里

```
var formattedKey = key.EntitySetName + ";" +
                    key.EntityKeyValues.Select(v => v.ToString()).ToAggregateString(" ,");

```

“值不能为空......”消息表明它`key.EntityKeyValues`为空。我无法解释您的实体是如何在没有关键值的情况下到达这里的。我想你可以设置一个断点并找出答案。

就我们而言，我们需要让这条线路不那么脆弱。我会把它放在我们要修复的事情清单上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T02:41:30.267

好的，这是一个错误，现在已从微风 v1.0.0 修复。

# objective-c - 这段代码有什么问题我无法创建简单的 UIBarButtonItem？

> ID：14332837
> 
> 赞同：-1
> 
> 时间：2013-01-15T07:19:46.543
> 
> 标签：objective-c, xcode4.5

```
UIImage * imageSetting= [UIImage imageNamed:@"setting-button"];
UIImageView * imageView = [[UIImageView alloc]initWithImage:imageSetting];
self.editSettings = [[UIBarButtonItem alloc]initWithCustomView:imageView];
PO(self.editSettings); 
```

此外：

```
self.editSettings = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonItemStylePlain target:nil action:nil];
PO(self.editSettings); 
```

在这两种情况下 self.editSettings 都返回 null。

所以，PO(self.editSettings) 返回 null

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:42:10.167

您没有在问题中显示这一点，但这种行为可以用`editSettings`弱属性来解释。如果您从初始化中直接分配给弱属性，ARC 将删除该对象，因为没有任何东西具有指向它的强指针。

要么使用局部变量来创建栏按钮项，然后确保在超出范围之前将其添加到工具栏或导航栏，或者将属性更改为强。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T07:42:28.693

会不会是因为这个？：

```
[UIImage imageNamed:@"settings-button"]; 
```

您（出于某种原因）没有指定文件扩展名。（最有可能是.png）*。如果文件“settings-button”不存在，则 UIImage *imageSettings 将为 nil。

这反过来会使 initWithImage: 失败（因为没有图像），最后 initWithCustomView:nil 也将返回 nil ...

编辑： ***正如 Martin 在下面所说的，如果它是 png，则扩展名不是必需的，所以我的回答是正确的，它必须是实际文件名中的拼写错误，或者是 .png 以外的其他文件类型。**

# regex - 如何在bash中通过正则表达式分隔包名？

> ID：14332840
> 
> 赞同：0
> 
> 时间：2013-01-15T07:20:01.330
> 
> 标签：regex, bash, awk

我正在编写一个脚本函数来将包 tar 球名称列表分离为包名称版本。

```
xorg-fonts-misc-1.0b-1
Xorg-font-bitstream-75dpi-1.0.0-2.i386
Xorg-font-bitstream-100dpi-1.2a-2.arm
Other-Third-Party-1.2.2-1-any 
```

我正在使用以下脚本来分隔名称和版本。

```
split_pkgname_pipe() {  # split x-x-1.3-1.x -> x-x 1.3-1.x
  [ $opt_v != 0 ] && echo "dbg:split_pkgname_pipe $*" >&2
  awk '{
    f=$0
    sub(/\-[0-9].*$/,"")
    n=$1
    v=substr(f, length(n)+2)
    print n, v
  }'
} 
```

我的代码的问题会导致`Xorg-font-bitstream-75dpi-1.0.0`分开 as`Xorg-font-bitstream`和`75dpi-1.0.0`. 但我想要`Xorg-font-bitstream-75dpi`和`-1.0.0`

[解决了]

```
split_pkgname_pipe() {  # split x-x-1.3-1.x -> x-x 1.3-1.x
  [ $opt_v != 0 ] && echo "dbg:split_pkgname_pipe $*" >&2
  local line namever name ver rel
  while read line ; do
    namever="${line%-*}"
    rel="${line##*-}"
    if [ `expr match $rel '[0-9]'` = 0 ] ; then # rel is 'i386/any'...
      name="${namever%-*}"
      ver="${namever##*-}"
      namever="$name"
      rel="$ver-$rel"
    fi
    name="${namever%-*}"
    ver="${namever##*-}"
    echo "$name $ver-$rel"
  done
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:21:58.520

```
$ package="Xorg-font-bitstream-75dpi-1.0.0"
$ echo "${package%-*}"
Xorg-font-bitstream-75dpi
$ echo "${package##*-}"
1.0.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T12:15:52.173

试试这个

```
sed -re '/^(.*?)((\d[a-z]?\.)+.*)$/\1\t\2/gmi' file.txt 
```

# java - 如何将参数从 php 发送到 blackberry/Java 移动应用程序

> ID：14332843
> 
> 赞同：1
> 
> 时间：2013-01-15T07:20:07.540
> 
> 标签：java, php, blackberry, parameters, response

我是 php 新手。有人可以指导我。我为黑莓开发了一个应用程序。我想将一个布尔参数从我的 php 发送到 java，作为对我的 java 类请求的响应。然后在java端获取该参数。我怎样才能做到这一点？请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:23:04.740

只需将您的响应打印为 json。

```
$myvalue = array();
$myvalue['status'] = 0;

$jsonEncodedvalue = json_encode($myvalue);

print_r($jsonEncodedvalue); 
```

# gcc - Intel x86 0x2E/0x3E Prefix Branch Prediction actually used?

> ID：14332848
> 
> 赞同：32
> 
> 时间：2013-01-15T07:20:38.553
> 
> 标签：gcc, x86, x86-64, branch-prediction

In the latest Intel software dev manual it describes two opcode prefixes:

```
Group 2 > Branch Hints

    0x2E: Branch Not Taken
    0x3E: Branch Taken 
```

These allow for explicit branch prediction of Jump instructions (opcodes like`Jxx`)

I remember reading a couple of years ago that on x86 explicit branch prediction was essentially a no-op in the context of gccs branch prediciton intrinsics.

I am now unclear if these x86 branch hints are a new feature or whether they are essentially no-ops in practice.

Can anyone clear this up?

(That is: Does gccs branch prediction functions generate these x86 branch hints? - and do current Intel CPUs not ignore them? - and when did this happen?)

**Update:**

I created a quick test program:

```
int main(int argc, char** argv)
{
    if (__builtin_expect(argc,0))
        return 1;

    if (__builtin_expect(argc == 2, 1))
        return 2;

    return 3;
} 
```

Disassembles to the following:

```
00000000004004cc <main>:
  4004cc:   55                      push   %rbp
  4004cd:   48 89 e5                mov    %rsp,%rbp
  4004d0:   89 7d fc                mov    %edi,-0x4(%rbp)
  4004d3:   48 89 75 f0             mov    %rsi,-0x10(%rbp)
  4004d7:   8b 45 fc                mov    -0x4(%rbp),%eax
  4004da:   48 98                   cltq   
  4004dc:   48 85 c0                test   %rax,%rax
  4004df:   74 07                   je     4004e8 <main+0x1c>
  4004e1:   b8 01 00 00 00          mov    $0x1,%eax
  4004e6:   eb 1b                   jmp    400503 <main+0x37>
  4004e8:   83 7d fc 02             cmpl   $0x2,-0x4(%rbp)
  4004ec:   0f 94 c0                sete   %al
  4004ef:   0f b6 c0                movzbl %al,%eax
  4004f2:   48 85 c0                test   %rax,%rax
  4004f5:   74 07                   je     4004fe <main+0x32>
  4004f7:   b8 02 00 00 00          mov    $0x2,%eax
  4004fc:   eb 05                   jmp    400503 <main+0x37>
  4004fe:   b8 03 00 00 00          mov    $0x3,%eax
  400503:   5d                      pop    %rbp
  400504:   c3                      retq   
  400505:   66 2e 0f 1f 84 00 00    nopw   %cs:0x0(%rax,%rax,1)
  40050c:   00 00 00 
  40050f:   90                      nop 
```

I don't see 2E or 3E ? Maybe gcc has elided them for some reason?

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-15T09:35:37.497

These instruction prefixes have no effect on modern processors (anything newer than Pentium 4). They just cost one byte of code space, and thus, not generating them is the right thing.

For details, see Agner Fog's optimization manuals, in particular 3\. Microarchitecture: [http://www.agner.org/optimize/](http://www.agner.org/optimize/)

The "Intel® 64 and IA-32 Architectures Optimization Reference Manual" no longer mentions them in the section about optimizing branches (section 3.4.1): [http://www.intel.de/content/dam/doc/manual/64-ia-32-architectures-optimization-manual.pdf](http://www.intel.de/content/dam/doc/manual/64-ia-32-architectures-optimization-manual.pdf)

These prefixes are a (harmless) relict of the Netburst architecture. In all-out optimization, you can use them to align code, but that's all they're good for nowadays.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-15T09:45:27.123

gcc is right to not generate the prefix, as they have no effect for all processors since the Pentium 4\.

But `__builtin_expect` has other effects, like moving a not expected code path away from the cache-hot locations in the code or inlining decisions, so it is still useful.

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-10-25T07:20:01.570

While Pentium 4 is the only generation which actually respects the branch-hint instructions, most CPUs do have some form of **static branch prediction**, which can be used to achieve the same effect. This answer is a bit tangential to the original question, but I think this would be valuable information to anyone who comes to this page.

The [Intel optimisation guide](http://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-optimization-manual.pdf) and [Agner Fog's guide](http://www.agner.org/optimize/microarchitecture.pdf) (which have been mentioned here already) both have excellent descriptions of this feature.

* * *

Intel has this to say about generations **newer than Core 2**:

> Make the fall-through code following a conditional branch be the likely target for a branch with a **forward target**

So conditional branches which jump forward in the code are predicted to be not-taken, by the static prediction algorithm.

This is consistent with what GCC seems to have generated using `__builtin_expect`: the 'expected' `return 1` / `return 2` code is placed in the not-taken paths from the conditional branches, which will be statically predicted as not-taken.

Additionally:

> Branches that do not have a history in the Branch Target Buffer are predicted using a static prediction algorithm:
> 
> *   Predict unconditional branches to be taken.
>     
>     
> *   Predict indirect branches to be NOT taken.

So in the 'expected' not-taken paths where GCC has placed unconditional `jmp`s to the end of the function, those jumps will be statically predicted as taken (i.e. not skipped).

Intel also says:

> make the fall-through code following a conditional branch be the unlikely target for a branch with a **backward target**

So conditional branches which jump *backwards* in the code are predicted to be taken, by the static prediction algorithm.

According to Agner Fog, most **Pentiums** also follow this algorithm:

> On PPro, P2, P3, P4 and P4E, a control transfer instruction which has not been seen before, or which is not in the Branch Target Buffer, is predicted to fall through if it goes forwards, and to be taken if it goes backwards (e.g. a loop). Static prediction takes longer time than dynamic prediction on these processors.

However, the **Core 2** family (and Pentium M) has a completely different policy:

> These processors do not use static prediction. The predictor simply makes a random prediction the first time a branch is seen, depending on what happens to be in the BTB entry that is assigned to the new branch. There is simply a 50% chance of making the right prediction of jump or no jump, but the predicted target is correct.

As do **AMD** processors apparently:

> A branch is predicted not taken the first time it is seen. A branch is predicted always taken after the first time it has been taken. Dynamic prediction is used only after a branch has been taken and then not taken. Branch hint prefixes have no effect.

There is one additional factor to consider: CPUs generally like to execute in a linear fashion, so even correctly-predicted taken branches are often more expensive than correctly-predicted not-taken branches.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-08-24T12:08:31.083

Intel® 64 and IA-32 Architectures Software Developer’s Manual -> Volume 2: Instruction Set Reference, A-Z -> Chapter 2: Instruction Format -> 2.1 Instruction Format for Protected Mode, real-address Mode, and virtual-8086 mode -> 2.1.1 Instruction Prefixes

> Some earlier microarchitectures used these as branch hints, but recent generations have not and they are reserved for future hint usage.

# sql - Access 2007 将事务表转换为摘要

> ID：14332852
> 
> 赞同：2
> 
> 时间：2013-01-15T07:20:44.457
> 
> 标签：sql, ms-access-2007

我在 Access 2007 中有一个事务样式表。例如

```
ID Start Date   End Date    Type        Sub Type
1  1/01/2012    15/02/2012  Supermarket Bread
1  16/02/2012   20/03/2012  Supermarket Milk 
1  21/03/2012   30/09/2012  Supermarket Cheese
1  1/11/2012    15/11/2013  Hardware    Nails 
```

我需要做的就是将其转换为：

```
ID Start Date   End Date    Type        
1  1/01/2012    30/09/2012  Supermarket
1  1/11/2012    15/11/2013  Hardware 
```

每个 ID 有一条记录，开始日期从第一个“超市”记录到最后一个“超市”记录。

如果在 Access 中可行，请感谢任何建议/帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:17:20.590

看起来您想要一个按`ID`和分组的聚合查询`Type`。然后，您可以使用`Min()`和`Max()`检索每个组中最早`Start Date`和最新的。`End Date`

```
SELECT
    ID,
    [Type],
    Min([Start Date]) AS start_date,
    Max([End Date]) AS end_date
FROM YourTable
GROUP BY
    ID,
    [Type]; 
```

# java - 如何在java中处理应用程序/excel类型的响应

> ID：14332857
> 
> 赞同：0
> 
> 时间：2013-01-15T07:21:12.437
> 
> 标签：java, javascript, browser, httpresponse

我正在尝试下载一个仅在运行时创建的 Excel 文件。意味着一旦我点击下载，我在我的 Servlet 中收到请求，然后我写我的文件作为响应并将它的类型设置为

```
response.setContentType("application/excel"); 
```

现在，一旦浏览器出现此响应，浏览器会自动打开下载弹出窗口并开始文件下载。

现在我的问题是，我想阻止我的用户在点击下载文件后立即访问应用程序，直到打开浏览器的下载弹出窗口。

一旦他点击下载，我可以阻止用户，但不知道如何处理应用程序/excel类型的响应。

谢谢是提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:38:20.663

[Http 头字段](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields) [rfc2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html#sec19.5.1)

```
response.setContentType("application/octet-stream");
response.setHeader("Content-Transfer-Encoding", "Binary");
response.setHeader("Content-disposition", "attachment; filename=\""+fileName+"\""); 
```

# json - 如何在 Play Framework 2.1-RC2 中使用新的 JSON API 读写 Anorm 对象？

> ID：14332858
> 
> 赞同：3
> 
> 时间：2013-01-15T07:21:13.263
> 
> 标签：json, scala, playframework-2.0, anorm, playframework-2.1

我正在尝试将我的 Play 2.0.x 应用程序迁移到 Play 2.1-RC2 并偶然发现了以下问题。在我的应用程序中，我有一个看起来像这样的案例类：

```
case class Player(
  playerId: Pk[Long],
  name: Option[String],
  groupId: Long
) 
```

在我的 Play 2.0.x 代码中，我有一个`PlayerFormat`对象用于读取和写入此类的 JSON 实例，如下所示：

```
object PlayerFormat extends Format[Player] {

def reads(json: JsValue): Player = Player(
    (json \ "id").asOpt[Long].map( Id(_) ).getOrElse( NotAssigned ),
    (json \ "name").asOpt[String],
    (json \ "group" \ "id").as[Long]
)

def writes(p: Player): JsValue = toJson(
  Map(
      "id" -> toJson(p.playerId.toOption),
      "name" -> toJson(p.name),
      "group" -> toJson(
          Map("id" -> p.groupId)
      )    
  )
)

} 
```

问题是“我如何在 Play 2.1 中读取可选（可为空）属性“id”并根据它的存在将`playerId`属性设置为`Id[Long]`or `NotAssigned`？

另外，这可以以某种方式重写以使用 JSON 初始宏吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T20:53:47.907

Json Macro Inception 在这里不是一个好的选择，因为这种情况太复杂了。它只支持经典案例，你不能举例`map`。

在这种情况下，您需要一个特定的格式化程序

```
import play.api.libs.json._
import play.api.libs.functional.syntax._
import anorm._

implicit val playerFormat = (
    (__ \ "id").formatNullable[Long] and
    (__ \ "name").formatNullable[String] and
    (__ \ "group" \ "id").format[Long]
)((id, name, group) => Player(id.map(Id(_)).getOrElse(NotAssigned), name, group), 
  (p: Player) => (p.playerId.toOption, p.name, p.groupId)) 
```

这有点复杂，因为您的要求是;)

# android - 如何在 phonegap 和 JQM 中进行登录和注销

> ID：14332860
> 
> 赞同：1
> 
> 时间：2013-01-15T07:21:15.080
> 
> 标签：android, cordova, jquery-mobile

美好的一天，我是 phonegap 和 JQM 的新手......我对 phonegap 和 JQM 有疑问。我做了一个登录和注销应用程序，但 android 上的后退按钮是我注销后返回的安全页面，而不是退出应用程序或执行别的东西......其次，我将如何删除 phonegap 中的后退按钮事件......第三，我必须控制我的应用程序中的后退按钮吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:01:13.050

1.  如果您希望后退按钮在一个页面中退出应用程序，而在另一个页面中作为真正的后退按钮，您应该使用这个：

    ```
     document.addEventListener("backbutton", onBackKeyDown, false);

    function onBackKeyDown() {
        if($.mobile.activePage.is('#loginpage')){
                     navigator.app.exitApp(); // Exit app if current page is a login page
        }
        else {
            navigator.app.backHistory(); // Go back in history in any other case
        }
    } 
    ```

2.  要删除/防止后退按钮事件，请使用：

    ```
    document.addEventListener("backbutton", function(e){
        e.preventDefault();
    }, false); 
    ```

3.  是的，您必须控制您的后退按钮应用事件。

# c# - 如何将 BLOB 转换为图像

> ID：14332862
> 
> 赞同：1
> 
> 时间：2013-01-15T07:21:24.093
> 
> 标签：c#, image, bytearray, blob, picturebox

我在显示存储在我的 MySQL 数据库中的图片时遇到问题。我不知道我是否已成功存储它，但使用此函数将图像转换为 blob 文件，这里是函数：

```
private byte[] imageToByteArray(Image imageIn)
{
    MemoryStream ms = new MemoryStream();
    imageIn.Save(ms, System.Drawing.Imaging.ImageFormat.Gif);
    return ms.ToArray();
} 
```

当我检查我的数据库时，它显示带有蓝色突出显示的 BLOB。现在，我想在我的图片框中显示图像。我还有一个将字节数组转换为图像的功能..

```
private Image byteArrayToImage(byte[] byteArrayIn)
{
    MemoryStream ms = new MemoryStream(byteArrayIn);
    ms.Position = 0;
    Image returnImage = Image.FromStream(ms);
    return returnImage;
} 
```

当我运行应用程序时，它说：

> ArgumentException 未保留，参数无效

我试过使用这种语法：

```
pictureBox1.Image = byteArrayToImage(dr["img"] as byte[]); 
```

或者我在想是否应该先将 BLOB 转换为字节数组？然后使用该函数将字节数组转换为Image？
当我单击名称时，它应该显示信息，不幸的是，我收到了参数异常..

```
int i = dataGridView1.SelectedCells[0].RowIndex;
string firstname = dataGridView1.Rows[i].Cells[0].Value.ToString();
string lastname = dataGridView1.Rows[i].Cells[1].Value.ToString();

Connection connect = new Connection();
MySqlConnection mySqlConnect = new MySqlConnection(connect.connString());
mySqlConnect.Open();

string s = "SELECT * FROM tbl_contacts WHERE username = '" + label1.Text + "' and (fname = '" + firstname + "' and lname = '" + lastname + "')";

MySqlCommand mySQL = new MySqlCommand(s, mySqlConnect);
mySQL.ExecuteNonQuery();
MySqlDataReader dr = mySQL.ExecuteReader();

if (dr.HasRows)
{
    dr.Read();
    txtFname.Text = dr["fname"].ToString();
    txtLname.Text = dr["lname"].ToString();
    txtBday.Text = dr["birthday"].ToString();
    txtEmail.Text = dr["email"].ToString();
    txtMobile.Text = dr["mobile"].ToString();
    txtAddress.Text = dr["address"].ToString();
    txtNotes.Text = dr["notes"].ToString();
    pictureBox1.Image = byteArrayToImage(dr["img"] as byte[]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:56:06.360

尝试这样的事情：

```
byteArrayToImage(dr.GetSqlBytes(dr.GetOrdinal("img")).Buffer); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-16T07:37:12.253

`ArgumentException was unheld, Parameter is not valid`是由于损坏的图像。您的图像未正确保存。将您收到的文件保存`byte[]`在磁盘中的某个文件中，然后尝试将其重命名为`.jpg`或`.png`并尝试打开。

由于各种原因，`Length`二进制数据的损坏发生，二进制数据没有保存或修剪。如果您的数据库被配置为存储`5kb`有人编写的代码来修剪数据`5kb`而不是引发异常，或者附加缓冲区没有正确编码导致丢失最后几个字节。

# java - 地图中的 containsValue 是如何工作的

> ID：14332864
> 
> 赞同：0
> 
> 时间：2013-01-15T07:21:44.793
> 
> 标签：java, methods

java中的containsValue是如何工作的？它是否将给定对象与地图中已有的值进行比较？如果是这样，为什么这不起作用？

我有以下课程：`class Node{ Integer n; Integer wt; String v; }`

并使用此映射： Map map = new HashMap();

这段代码没有按预期工作：`

```
n = Integer.parseInt(st.nextToken());
wt = Integer.parseInt(st.nextToken());
depth = Integer.parseInt(st.nextToken());
set = "";
while(st.hasMoreTokens())
   set = set+st.nextToken()+" ";
Node nd = new Node();
nd.n = n;
nd.wt = wt;
nd.v = set;
if(!map.containsValue((Object)nd)){
map.put(key,nd);
key = key+1;
}` 
```

映射中仍有重复值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T07:24:00.767

一定要实现`hashCode`，`equals`如果你正在使用 HashMap，否则每个新对象都是一个新的和不同的对象，不管它是由什么值组成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:31:00.263

使用 Maps 和 Sets 时，您必须确保值的类（在 Map 的情况下，当然还有键）实现足够的[hashCode()](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)和[equals()](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)方法。如果不明确提供它们，系统可能无法真正理解您的应用程序的语义等价性。

# ios - NSManagedObject 上的最大日期值

> ID：14332866
> 
> 赞同：0
> 
> 时间：2013-01-15T07:21:51.180
> 
> 标签：ios, core-data, key-value-coding

我对键值编码和核心数据感到困惑。

Apple 文档显示拨打此电话

```
NSDate *latestDate = [transactions valueForKeyPath:@"@max.date"]; 
```

但是当我将它添加到我自己的班级时，我得到了这个异常

```
Exception [<MyClass 0x171be8>  valueForUndefinedKey:]: this class is not key value coding-compliant for the key @max. 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:29:48.600

此错误表明您的`Transaction`实体（或其中包含的任何实体`transactions`）具有具有不同名称或类型的日期属性。

请检查数据模型和您的`NSManagedObject`子类以确保它确实是`date`“日期”（数据模型）和“NSDate”（子类）类型。

# java - 如何使用pdfbox解析包含表格格式数据的pdf

> ID：14332868
> 
> 赞同：5
> 
> 时间：2013-01-15T07:21:57.967
> 
> 标签：java, parsing, pdf, web-applications, itext

任何人都可以帮助我了解如何使用 itext 或 pdfbox 提取表格数据，我有一个 1000 页的 pdf，我的工作是解析 pdf 并将数据存储到数据库中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T08:07:54.460

PDF 不包含任何表格结构元素，除非它包含用于定义表格的附加 XML。否则没有结构。我写了一篇关于如何找出答案的[博客文章。](http://blog.idrsolutions.com/2010/09/the-easy-way-to-discover-if-a-pdf-file-contains-structured-content/)

像 PdfBox 这样的一些工具会努力猜测表格，但它可能会被击中和错过

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-18T13:26:12.517

您可以使用此代码以字符串格式提取数据：

```
PDDocument document = PDDocument.load(pathToFile);
PDFTextStripper s = new PDFTextStripper();
String content = s.getText(document); 
```

然后您可以使用 java 正则表达式逐行解析并将值加载到您的 java POJO bean 中。

# java - Heroku 不接受防止 MySql zeroTimeBehavior 错误所需的 URL 参数

> ID：14332870
> 
> 赞同：1
> 
> 时间：2013-01-15T07:21:58.623
> 
> 标签：java, heroku, playframework

我开发了一个运行在本地*MySql上的**Play/Scala*应用程序。但是需要的数据库 URL 参数（Java TimeStamp）被*Heroku*所做的 URL 的进一步连接破坏了，因此我的应用程序无法连接到（Heroku MySql 产品）。*`zeroDateTimeBehavior=convertToNull`*`ClearDB`**

 **这是我的数据库网址：

```
db.default.url="mysql://be32d43afc3cb7:c73c404d@us-cdbr-east-03.cleardb.com/heroku_6cf0eb306e78bc8?reconnect=true&zeroDateTimeBehavior=convertToNull" 
```

以及它变形的后续 Heroku 版本：

```
JDBC URL = jdbc:mysql://us-cdbr-east-03.cleardb.com/heroku_6cf0eb306e78bc8?reconnect=true&zeroDateTimeBehavior=convertToNull?useUnicode=yes&characterEncoding=UTF-8&connectionCollation=utf8_general_ci 
```

`?`和分隔符发生了一些神秘的事情`&`。

Heroku 说错误是由以下原因引起的：

```
java.sql.SQLException: The connection property 'zeroDateTimeBehavior' only accepts values of the form: 'exception', 'round' or 'convertToNull'. The value 'convertToNull?useUnicode=yes' is not in this set. 
```

那么，有没有其他方法可以配置这个参数？没有它，我会收到此错误：

```
play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[SQLException: Value '0000-00-00 00:00:00' can not be represented as java.sql.Timestamp]] 
```

这敲响了任何人的钟声？非常感谢任何可以阐明的人。

**编辑/解决方案：** Heroku 还将几个 args 连接到他们提供给用户的 DB URL。因为 Heroku 使用“？”的连接。在他们自己的参数集之前，尝试将我自己的参数添加到数据库 URL 将不起作用。但是我发现了一个不同的解决方案，它似乎同样有效。

```
SET sql_mode = 'NO_ZERO_DATE'; 
```

我把它放在我的表描述中，它解决了 '0000-00-00 00:00:00' 不能表示为 java.sql.Timestamp 的问题**

# java - 如何在序列化对象上维护单例状态？

> ID：14332888
> 
> 赞同：1
> 
> 时间：2013-01-15T07:23:34.093
> 
> 标签：java, serialization, singleton

如果我将“A”类定义为单例，则意味着我只能创建“A”类的一个对象。如果我将其设置为可序列化并对其进行序列化，那么如何实现同一对象的单例状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T07:39:41.050

引用`Effective Java #77`，你应该看看实现`readResolve`方法。

> readResolve 功能允许您用另一个实例替换由 readObject [Serialization, 3.7] 创建的实例。如果要反序列化的对象的类定义了带有正确声明的 readResolve 方法，则在反序列化后新创建的对象上调用此方法。然后返回此方法返回的对象引用来代替新创建的对象。在此功能的大多数使用中，不会保留对新创建对象的引用，因此它立即成为垃圾回收的条件。

```
public class Elvis implements Serializable {
public static final Elvis INSTANCE = new Elvis();
// readResolve for instance control - you can do better!
private Object readResolve() {
//Return the one true Elvis and let the garbage collector
// take care of the Elvis impersonator.
return INSTANCE;
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T07:29:42.107

为了保证`Serializable`单例的唯一性，您可能需要自定义`readResolve`方法来返回单例对象而不是新反序列化的对象。另一方面，“Effective Java”一书的 Item77 建议：

> 对于实例控制，更喜欢枚举类型而不是 readResolve

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T10:17:14.397

在对任何对象进行反序列化之前，调用了一个方法是 readResolve()，因此我们可以简单地从该方法返回相同的状态对象，而无需实际反序列化它。

请看下文，

```
public final class MySingleton {
  private MySingleton() { }

  private static final MySingleton INSTANCE = new MySingleton();

  public static MySingleton getInstance() { return INSTANCE; }

  private Object readResolve() throws ObjectStreamException {
   // instead of the object we're on, 
   // return the class variable INSTANCE
  return INSTANCE; 
  } 
```

}

# perl - 使用 perl 5.16.1 构建 perl 模块 Proc::ProcessTable 并在“make test”阶段失败

> ID：14332892
> 
> 赞同：-1
> 
> 时间：2013-01-15T07:23:47.850
> 
> 标签：perl, perl-module

我正在使用 5.16.1 的 perl 构建 Proc::ProcessTable

`make`的输出：

```
Skip blib/lib/Proc/ProcessTable.pm (unchanged)
Skip blib/lib/Proc/Killall.pm (unchanged)
Skip blib/lib/Proc/example.pl (unchanged)
Skip blib/lib/Proc/Killfam.pm (unchanged)
gmake[1]: Entering directory `/jxu/tmp/Proc-ProcessTable-0.45/Process'
Skip ../blib/lib/Proc/ProcessTable/Process.pm (unchanged)
Manifying ../blib/man3/Proc::ProcessTable::Process.3
gmake[1]: Leaving directory `/jxu/tmp/Proc-ProcessTable-0.45/Process'
gcc -c    -D_REENTRANT -fno-strict-aliasing -pipe  -DPERL_USE_SAFE_PUTENV -O    -DVERSION=\"0.45\"  -DXS_VERSION=\"0.45\" -fPIC "-I/opt/VRTSperl/lib/5.16.1/i86pc-solaris-thread-multi/CORE"  -DPROC_FS ProcessTable.c
gcc -c    -D_REENTRANT -fno-strict-aliasing -pipe  -DPERL_USE_SAFE_PUTENV -O    -DVERSION=\"0.45\"  -DXS_VERSION=\"0.45\" -fPIC "-I/opt/VRTSperl/lib/5.16.1/i86pc-solaris-thread-multi/CORE"  -DPROC_FS OS.c
Running Mkbootstrap for Proc::ProcessTable ()
chmod 644 ProcessTable.bs
rm -f blib/arch/auto/Proc/ProcessTable/ProcessTable.so
gcc  -G -L/usr/local/lib OS.o  ProcessTable.o  -o blib/arch/auto/Proc/ProcessTable/ProcessTable.so      \
        \

chmod 755 blib/arch/auto/Proc/ProcessTable/ProcessTable.so
cp ProcessTable.bs blib/arch/auto/Proc/ProcessTable/ProcessTable.bs
chmod 644 blib/arch/auto/Proc/ProcessTable/ProcessTable.bs
Manifying blib/man3/Proc::Killall.3
Manifying blib/man3/Proc::ProcessTable.3
Manifying blib/man3/Proc::Killfam.3 
```

好像没问题。

`make test`的输出：

```
gmake[1]: Entering directory `/jxu/tmp/Proc-ProcessTable-0.45/Process'
gmake[1]: Leaving directory `/jxu/tmp/Proc-ProcessTable-0.45/Process'
PERL_DL_NONLAZY=1 /opt/VRTSperl/bin/perl "-MExtUtils::Command::MM" "-e" "test_harness(0, 'blib/lib', 'blib/arch')" t/*.t
t/process.t .. Not a CODE reference at /opt/VRTSperl/lib/5.16.1/i86pc-solaris-thread-multi/DynaLoader.pm line 213.
END failed--call queue aborted at /jxu/tmp/Proc-ProcessTable-0.45/blib/lib/Proc/ProcessTable.pm line 213.
Compilation failed in require at t/process.t line 9.
BEGIN failed--compilation aborted at t/process.t line 9.
t/process.t .. Dubious, test returned 2 (wstat 512, 0x200)
Failed 3/3 subtests 

Test Summary Report
-------------------
t/process.t (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: Bad plan.  You planned 3 tests but ran 0.
Files=1, Tests=0,  0 wallclock secs ( 0.03 usr  0.01 sys +  0.04 cusr  0.00 csys =  0.08 CPU)
Result: FAIL
Failed 1/1 test programs. 0/0 subtests failed.
*** Error code 2
make: Fatal error: Command failed for target `test_dynamic' 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:06:06.013

这不是一个完整的答案。

错误是在 DynaLoader.pm 第 213 行报告的“不是代码参考”：

```
 boot:
    my $xs = dl_install_xsub("${module}::bootstrap", $boot_symbol_ref, $file);

    # See comment block above

    push(@dl_shared_objects, $file); # record files loaded

    &$xs(@args);   # <- line 213 
```

这意味着返回的任何`dl_install_xsub`内容都不是 coderef。更具体地说，它不能是`undef`、数字或字符串，因为它们会导致不同的错误消息。因此`$xs`，此时包含一些其他类型的参考。

`dl_install_xsub`（DynaLoader 的一部分）是一个薄包装器`newXS_flags`（perl 的一部分）。`newXS_flags`返回一个`CV *`（perl 类型：指向“代码值”的指针）。在这一点上，我很困惑，因为我不知道这怎么可能导致非 coderef。

进一步调查的可能途径：使用 perl 调试器在 DynaLoader.pm 第 213 行放置一个断点并检查实际在 中的内容`$xs`，然后向后工作。

# java - 为什么 object.getClass().getClasses() 返回空数组？

> ID：14332898
> 
> 赞同：-1
> 
> 时间：2013-01-15T07:23:56.290
> 
> 标签：java, reflection

出于好奇，我试图`static final int SIZE`从任何拥有它的类中打印该字段。为了获得“任何拥有它的课程”，我只是试图获得*所有*课程。但我注意到它总是返回一个长度为 0 的数组。

医生说

> 如果此 Class 对象没有公共成员类或接口，则此方法返回长度为 0 的数组。如果此 Class 对象表示原始类型、数组类或 void，则此方法还返回长度为 0 的数组

但是 Object 没有被列为原语。那么 Object 是否以某种方式被认为是无效的？

那么，我如何
- 获取所有类的数组？
和
- 为什么这对 Object 不起作用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T07:32:41.403

该`getClasses()`方法返回调用此方法的类对象的所有*内部*类（在主体内声明的类）的数组。对于大多数类，这将始终为零。它永远不是*所有*可用类的联合。看看类加载器——在 Java 中，没有一种方法可以简单地产生所有可用的类。您需要使用提供此信息的特定类加载器。

# wordpress - 如何在 WP-FullCalendar-plugin 中使用简码设置 firstHour 和/或 minTime？

> ID：14332900
> 
> 赞同：0
> 
> 时间：2013-01-15T07:24:18.473
> 
> 标签：wordpress, fullcalendar

FullCalendar-plugin 有问题。如何使用简码设置 firstHour 和/或 minTime？我只想显示从 7 到 17 的小时数或第一个小时 7。我该怎么做？

干杯，萨米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T23:49:19.370

不确定短代码是什么意思，但这是设置 min 和 maxTime 的方法（如果您只想设置第一个小时，请删除 min 和 max 并插入 firstHour）：

```
$('#calendar').fullCalendar({
    events: eventsArrayOrJSONCall,
    ...
    minTime: 7,
    maxTime: 17
}); 
```

# javascript - 从其他 JS 文件访问全局变量

> ID：14332901
> 
> 赞同：3
> 
> 时间：2013-01-15T07:24:36.830
> 
> 标签：javascript, jquery, global-variables

这是我的主文件：

```
$(document).ready(function () {
  function Page() {
    this.menu = new Menu();
    this.management = new Management();
    this.text = "text";
  }
window.Page= Page();
}); 
```

现在我想从其他所有 JS 文件访问页面：

我试过这个：

```
console.log(Page.text); 
```

给我 ：`Uncaught ReferenceError: Page is not defined`

试过这个：

```
console.log(window.Page.text); 
```

给我 ：`Uncaught TypeError: Cannot read property 'text' of undefined`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T07:41:32.820

您的问题是，在 Page 函数中，您没有在全局上下文中创建任何新对象。您正在创建一个新的菜单和新的管理实例，但在当前上下文中。

另外，通过调用 Window.Page = Page()，您可以将 Page 函数的结果（无效）分配给 window.Page 对象。

我建议你这样做：

```
//- from any js file 
    function createPage() {
            var newPage = { title : 'new page', count : '2' };
            return newPage;
          }
    window.Page = createPage(); 
```

...

```
//- and from other js file
    $(document).ready(function () {                
    alert(window.Page.title);
    }); 
```

请注意，我已用此示例的虚拟内容替换了您的菜单和管理属性。可用的示例[@this JSFiddle](http://jsfiddle.net/LyNR6/)

更新：代码已更新以说明多个 js 文件的正确用法。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T07:27:27.667

你需要使用`window.Page = new Page();`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T07:27:57.340

函数定义不需要在`document.ready()`函数内部。只有当 DOM 准备好时需要立即执行的操作才需要放入其中。所以把函数移到顶层。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T07:36:01.150

任何一个

```
window.Page = new Page(); 
```

或者

```
function Page(){
   this.menu = new Menu();
   this.management = new Management();
   this.text = "text";
   return this;
}
window.Page = Page(); 
```

然后确保其他脚本在声明之前不要尝试使用 window.Page。您在 document.ready() 回调函数中声明它，因此只有在 DOM 准备好并且回调函数被触发后才能访问它。

编辑：

没有上下文我不确定这正是你想要做的，但我认为你只需要一个具有一些属性/方法的全局 Page 对象。创建它的最简单方法是

```
window.Page = {
    menu : new Menu(),
    management = new Management(),
    text = "text"
}; 
```

没有 document.ready() 包装器。`Menu`现在显然`Management`需要在执行此代码之前定义。如果这些函数中的任何一个依赖于 DOM，只需将所有脚本移动到文档的末尾即可。任何需要访问 window.Page 的脚本都必须包含在此脚本之后。

# python - Python正则表达式字符串分组

> ID：14332905
> 
> 赞同：0
> 
> 时间：2013-01-15T07:25:04.120
> 
> 标签：python, regex

我正在尝试匹配`@`or 或 string `at`，例如 for`name@email`和`nameatemail`。我想这就像

```
regex = '@|at' 
```

或者

```
regex = '@|(at)' 
```

但我就是找不到正确的语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:27:50.983

我建议您使用[Kodos](http://kodos.sourceforge.net/)来测试您的正则表达式（它还为您的正则表达式提供 Python 代码）。这用于正[则](http://www.regular-expressions.info/tutorial.html)表达式信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:27:34.913

对于您的问题，两者都`regex`可以正常工作：

```
match = re.search("@|at", subject)
if match:
    result = match.group() 
```

# windows-phone-7 - 在社交网络上共享图像/消息时显示应用程序图标

> ID：14332907
> 
> 赞同：0
> 
> 时间：2013-01-15T07:25:14.697
> 
> 标签：windows-phone-7

我有一个 Windows Phone 8 /7 应用程序。它基本上是一个图像编辑套件。我真正想要的是我想在 facebook/twitter 上分享图片，但我不希望在分享图片时出现 Windows Phone Violet 图标。我想要的是我的自定义应用程序图标出现在那里。我想要这样的东西（通过 XYZ 应用程序（后跟自定义图标）。如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:02:51.327

您需要自己实现共享。内置共享不允许您共享图像（仅图像链接）

# eclipse - Eclipse 发现 @Override 的错误错误

> ID：14332909
> 
> 赞同：1
> 
> 时间：2013-01-15T07:25:23.497
> 
> 标签：eclipse, spring-tool-suite

Eclipse（来自[STS 3.1的](http://www.springsource.org/sts/)[Eclipse 3.8.1](http://download.eclipse.org/eclipse/downloads/drops/R-3.8.1-201209141540/)）发现 @Override 的错误错误

```
public class Class1 implements Comparable<Class1> {
...
@Override
public int compareTo(Class1 o) { 
```

copmareTo() 有标记：

```
Multiple markers at this line
    - The method compareTo(Class1 ) of type Class1 must override a superclass method
    - implements java.lang.Comparable<com.funshion.base.mc.entity.McImp>.compareTo 
```

第一条消息是错误的。

.项目内容

```
<projectDescription>
    <name>ProjectName</name>
    <comment></comment>
    <projects>
    </projects>
    <buildSpec>
        <buildCommand>
            <name>org.eclipse.wst.common.project.facet.core.builder</name>
            <arguments>
            </arguments>
        </buildCommand>
        <buildCommand>
            <name>org.eclipse.jdt.core.javabuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
        <buildCommand>
            <name>org.eclipse.wst.validation.validationbuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
        <buildCommand>
            <name>org.springframework.ide.eclipse.core.springbuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
        <buildCommand>
            <name>org.eclipse.m2e.core.maven2Builder</name>
            <arguments>
            </arguments>
        </buildCommand>
    </buildSpec>
    <natures>
        <nature>org.springframework.ide.eclipse.core.springnature</nature>
        <nature>org.eclipse.jem.workbench.JavaEMFNature</nature>
        <nature>org.eclipse.wst.common.modulecore.ModuleCoreNature</nature>
        <nature>org.eclipse.jdt.core.javanature</nature>
        <nature>org.eclipse.m2e.core.maven2Nature</nature>
        <nature>org.eclipse.wst.common.project.facet.core.nature</nature>
    </natures>
</projectDescription> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:26:42.123

项目 Java 版本必须是 1.6，因为 @Override 注释随 Java 6 一起提供。

# c# - 在 webservice 类中的客户端实现接口

> ID：14332910
> 
> 赞同：-1
> 
> 时间：2013-01-15T07:25:23.690
> 
> 标签：c#, wcf

我在我的项目中引用了一个网络服务。我想在客户端项目的 webservice 类对象中实现一个接口。有可能吗？

我试图在同一个命名空间中的 web 服务部分类中实现接口。那没起效。例如

在客户端

```
namespace ABCWebService
{
   public partial class MyWebServiceObject : IInterface
   {

   }
} 
```

MyWebServiceObject 是一个对象。

现在在代码中当我尝试将对象转换为接口时它不起作用

例如

```
foreach(var item in e.Result)

{
    if(item is IInterface) // it doesn't go inside.
    { }
} 
```

有什么建议么。

如果我在服务器项目中实现接口，则该接口也无法访问。

例如

```
public class MyWebServiceObject : IInterface
{

} 
```

现在在客户端我将如何引用这个 IInterface ？它不认识。

我应该更改参考文件吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:27:14.663

您的对象类型应该实现接口，而不是服务。（除非您有一系列服务？）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-15T09:37:36.170

嘿，我发现了问题。我提到了错误的命名空间。我使用的是服务器命名空间，而不是客户端服务命名空间。

我知道这是非常愚蠢的错误。对不起各位，打扰到你们了。

非常感谢您的时间和建议。

对于陷入相同情况的人，上面的示例将起作用。我的意思是你可以在同一个命名空间下的客户端实现接口。

# android - 我的项目有两个问题。1）将字符串值从一个活动传递和获取到另一个活动 2）在 OnPost Execute 对话中的 Listview

> ID：14332911
> 
> 赞同：0
> 
> 时间：2013-01-15T07:25:31.827
> 
> 标签：android, database, listview, android-intent

我正在尝试在 Android 上做一个简单的数据库项目。我的项目有两个问题：

1.  我想将第一个活动的字符串值传递给第二个活动，并在两个活动中将字符串值传递给第三个活动。我无法在第三个活动中获取字符串值。为了检查它，我有一个打印 sts，但它什么也没报告。没有抛出任何错误。
2.  我想在`OnPostExecute`触发时在第二个活动的对话框内的列表视图中显示数据。我收到一个错误，但我只是用 `arrayadapter`. 它显示成功。

我究竟做错了什么？

[在这里](http://pastebin.com/KcVrUXaZ)查看我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:31:41.090

要将值从 Activity 传递给 Activty，请在启动 Activty 之前使用 Intent.putExtra，如下所示

```
`Intent intent = new Intent(getApplicationContext(), NewActivty.class);
intent.putExtra("Key", "Value");
startActivity(intent);` 
```

并在下一个 Activty 上使用 getExtra 接收它

```
 Bundle getValue= getIntent().getExtras();

 if(GetValue!=null);

 String GetIntentValue= GetValue.getExtras("Key"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:34:56.940

在第一堂课

`Intent intent = new Intent(this, nextclass.class);`

`intent = putExtra("YOUR_KEY" , yourstringhere);`

`startActivity(intent);`

在接收班上

`Bundle data = getIntent().getExtras();`

`if(data!=null);`

`String receiver = data.getExtras("YOUR_KEY");`

祝你好运。

# gwt - 模块声明了一个servlet类.......，但是web.xml没有对应的映射

> ID：14332914
> 
> 赞同：0
> 
> 时间：2013-01-15T07:25:37.467
> 
> 标签：gwt, maven-2

我已将 maven 项目提交给 svn 它在我的机器上运行，但是当其他人导入该 maven 项目时，它们会出现异常：

> Module声明了一个servlet类.......，但是web.xml没有对应的映射；请将以下几行添加到您的 web.xml

这个类属于我的项目使用的库。我不明白有什么问题。请帮我。

模块.gwt.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<module rename-to='engile'>
  <!-- Inherit the core Web Toolkit stuff.                        -->
  <inherits name='com.google.gwt.user.User'/>

  <!-- Inherit the default GWT style sheet.  You can change       -->
  <!-- the theme of your GWT application by uncommenting          -->
  <!-- any one of the following lines.                            -->
  <inherits name='com.google.gwt.user.theme.clean.Clean'/>
  <!-- <inherits name='com.google.gwt.user.theme.standard.Standard'/> -->
  <!-- <inherits name='com.google.gwt.user.theme.chrome.Chrome'/> -->
  <!-- <inherits name='com.google.gwt.user.theme.dark.Dark'/>     -->

  <!-- Other module inherits                                      -->

    <inherits name="com.google.gwt.inject.Inject" />
    <inherits name="com.appops.ui.basic.Fields" />
    <inherits name='com.mvp4g.Mvp4gModule' />
    <inherits name="gwtupload.GWTUpload"/>
    <inherits name='com.google.api.gwt.oauth2.OAuth2'/>
    <inherits name="com.google.gwt.xml.XML"/>
    <inherits name="org.atmosphere.gwt.Client"/>

    <!-- Logger at client side -->
    <inherits name = "com.google.gwt.logging.Logging"/>  
    <set-property name="gwt.logging.enabled" value="TRUE"/>
    <set-property name="gwt.logging.logLevel" value="INFO"/>
    <set-property name="gwt.logging.popupHandler" value="DISABLED" />
    <set-property name="gwt.logging.simpleRemoteHandler" value="ENABLED" />

  <!-- Specify the app entry point class.                         -->
  <entry-point class='com.engile.client.Engile'/>

  <!-- Specify the paths for translatable code                    -->
  <source path='client'/>
  <source path='shared'/>

<!--  <set-property name="user.agent" value="safari"/> 
  <set-property name="user.agent" value="gecko1_8"/> -->

</module> 
```

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">
  <filter>
    <filter-name>guiceFilter</filter-name>
    <filter-class>com.google.inject.servlet.GuiceFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>guiceFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
  <listener>
    <listener-class>com.engile.server.guice.BootstrapListener</listener-class>
  </listener>
  <servlet>
    <description>AtmosphereServlet</description>
    <servlet-name>AtmosphereServlet</servlet-name>
    <servlet-class>org.atmosphere.cpr.AtmosphereServlet</servlet-class>
    <init-param>
      <param-name>org.atmosphere.disableOnStateEvent</param-name>
      <param-value>true</param-value>
    </init-param>
    <init-param>
      <param-name>org.atmosphere.cpr.AtmosphereHandler</param-name>
      <param-value>com.engile.server.services.AtmosphereHandler</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>AtmosphereServlet</servlet-name>
    <url-pattern>/engile/gwtComet</url-pattern>
  </servlet-mapping>
  <servlet>
    <servlet-name>remoteLoggingService</servlet-name>
    <servlet-class>com.google.gwt.logging.server.RemoteLoggingServiceImpl</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>remoteLoggingService</servlet-name>
    <url-pattern>/engile/remote_logging</url-pattern>
  </servlet-mapping>

<!--   <servlet> 
  <servlet-name>testImpl</servlet-name> 
  <servlet-class>com.appops.server.TestImpl</servlet-class> </servlet>
   <servlet-mapping> <servlet-name>testImpl</servlet-name>
    <url-pattern>/engile/test</url-pattern>
     </servlet-mapping> -->
  <welcome-file-list>
    <welcome-file>Engile.html</welcome-file>
  </welcome-file-list>
</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:27:29.903

您需要检查所有扩展**RemoteService**并声明**RemoteServiceRelativePath**注释的接口，确保所有此类相对路径都映射到 web.xml

示例 - 在[https://developers.google.com/web-toolkit/doc/latest/tutorial/RPC](https://developers.google.com/web-toolkit/doc/latest/tutorial/RPC)

```
@RemoteServiceRelativePath("stockPrices")
public interface StockPriceService extends RemoteService { 
} 
```

**被映射到**

```
 <!-- Servlets -->
  <servlet>
    <servlet-name>stockPriceServiceImpl</servlet-name>
    <servlet-class>com.google.gwt.sample.stockwatcher.server.StockPriceServiceImpl</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>stockPriceServiceImpl</servlet-name>
    <url-pattern>/stockwatcher/stockPrices</url-pattern>
  </servlet-mapping> 
```

# php - Pinnacle 购物车配置 - 迁移到实时服务器时

> ID：14332915
> 
> 赞同：0
> 
> 时间：2013-01-15T07:25:38.483
> 
> 标签：php, configuration, shopping-cart, cart, pinnacle-cart

使用 pinnacle 购物车构建的站点的基本配置更改（使站点生效时）是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:33:18.897

1.  将所有文件上传到实时服务器。
2.  更改网址

    1.  更改路径`htaccess`
    2.  更改数据库表中的`globalHttpsUrl`,`globalHttpUrl`和。`global server path``setttings`
3.  对 pinnacle cart 提到的所有文件（.htaccess、图像、模板、_custom 等）授予写入权限

4.  更改 engine_config.php 文件中给出的数据库详细信息
5.  更改`define('devmode', true);`为`define('devmode', false);`

# java - HornetQ 重启后不保留消息

> ID：14332916
> 
> 赞同：2
> 
> 时间：2013-01-15T07:25:48.317
> 
> 标签：java, jakarta-ee, jboss, jms, hornetq

我使用 HornetQ 作为队列提供程序，因为它具有持久性功能。但是，在我重新启动应用程序后，队列中的所有消息都丢失了。可能是配置问题？

这是代码：

```
// Step 1\. Create the Configuration, and set the properties accordingly
Configuration configuration = new ConfigurationImpl();
configuration.setPersistenceEnabled(true);
configuration.setPersistIDCache(true);
configuration.setJMXManagementEnabled(true);
configuration.setMessageCounterEnabled(true);
configuration.setPersistDeliveryCountBeforeDelivery(true);
configuration.setSecurityEnabled(false);
configuration.setJournalSyncTransactional(true);
configuration.setJournalSyncNonTransactional(true);
configuration.setJournalType(JournalType.NIO);

HashSet<TransportConfiguration> transports = new HashSet<TransportConfiguration>();

transports.add(new TransportConfiguration(NettyAcceptorFactory.class.getName()));
transports.add(new TransportConfiguration(InVMAcceptorFactory.class.getName()));
    configuration.setAcceptorConfigurations(transports);

// Step 2\. Create and start the server
eServer = new EmbeddedHornetQ();
eServer.setConfiguration(configuration);
eServer.start();

// Step 3\. As we are not using a JNDI environment we instantiate the objects irectly
ServerLocator serverLocator = HornetQClient.createServerLocatorWithHA(new TransportConfiguration(NettyConnectorFactory.class.getName()), new TransportConfiguration(InVMConnectorFactory.class.getName()));
sessionFactory = serverLocator.createSessionFactory();

// Step 4\. Create a core queue
coreSession = sessionFactory.createSession(true, true, true);
QueueQuery qq = coreSession.queueQuery(SimpleString.toSimpleString(QUEUE_NAME));
if(!qq.isExists()) coreSession.createQueue(QUEUE_NAME, QUEUE_NAME, true);
coreSession.close();

// Step 5\. Create the session, and the producer
session = sessionFactory.createSession();
producer = session.createProducer(QUEUE_NAME);

// Step 6\. Create the message consumer and set a listener
ClientConsumer messageConsumer = session.createConsumer(QUEUE_NAME);
messageConsumer.setMessageHandler(new QueueListener(session, producer));

// Step 7\. Start the connection.
session.start();

// ...

// put 50,000 messages into the queue

// ...

session.close();
sessionFactory.close();
eServer.stop(); 
```

我也尝试打印日志文件，但消息数始终为 0：

```
JournalStorageManager.describeMessagesJournal(journalDirectory); 
```

```
#JournalFileImpl: (hornetq-data-1.hq id = 209, recordID = 209)
#JournalFileImpl: (hornetq-data-2.hq id = 210, recordID = 210)
#JournalFileImpl: (hornetq-data-3.hq id = 211, recordID = 211)
#JournalFileImpl: (hornetq-data-4.hq id = 212, recordID = 212)
#JournalFileImpl: (hornetq-data-9.hq id = 213, recordID = 213)
#JournalFileImpl: (hornetq-data-10.hq id = 214, recordID = 214)
#JournalFileImpl: (hornetq-data-17.hq id = 215, recordID = 215)
#JournalFileImpl: (hornetq-data-18.hq id = 216, recordID = 216)
#JournalFileImpl: (hornetq-data-35.hq id = 217, recordID = 217)
#JournalFileImpl: (hornetq-data-36.hq id = 218, recordID = 218)
#JournalFileImpl: (hornetq-data-57.hq id = 219, recordID = 219)
#JournalFileImpl: (hornetq-data-58.hq id = 220, recordID = 220)
#JournalFileImpl: (hornetq-data-71.hq id = 221, recordID = 221)
#JournalFileImpl: (hornetq-data-72.hq id = 222, recordID = 222)
#JournalFileImpl: (hornetq-data-73.hq id = 223, recordID = 223)
#JournalFileImpl: (hornetq-data-74.hq id = 224, recordID = 224)
#JournalFileImpl: (hornetq-data-187.hq id = 225, recordID = 225)
#JournalFileImpl: (hornetq-data-188.hq id = 226, recordID = 226)
#JournalFileImpl: (hornetq-data-207.hq id = 227, recordID = 227)
#JournalFileImpl: (hornetq-data-208.hq id = 228, recordID = 228)

### Surviving Records Summary ###

### Prepared TX ###

### Message Counts ###
message count=0
message reference count
prepared message count=0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:22:19.687

感谢[HornetQ 用户论坛](https://community.jboss.org/thread/219834?tstart=0)的 Andy Taylor先生的回答。问题在于创建非持久消息，例如：

```
ClientMessage cMessage = session.createMessage(false); 
```

我只是将其更改为`true`，现在它运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-26T06:12:01.287

只要你在 hornetq-confuguration.xml 文件中让它持久化为真

# perl - 在 perl 中逐行编辑文件夹（和子文件夹）中的所有文件

> ID：14332919
> 
> 赞同：0
> 
> 时间：2013-01-15T07:25:59.323
> 
> 标签：perl, replace

我希望我的 perl 程序在所有文件中替换所有文件中的 '{' - > '{function('.counter++.')' ，当同一行中有 '{' 和 '}' 时，并且除非“{”出现在“typedef”子字符串下的一行。

```
#!/usr/bin/perl

use strict;
use warnings;
use Tie::File;
use File::Find;

my $dir = "C:/test dir";   

# fill up our argument list with file names:
find(sub { if (-f && /\.[hc]$/) { push @ARGV, $File::Find::name } }, $dir);

$^I = ".bak";   # supply backup string to enable in-place edit 

my $counter = 0; 

# now process our files 
while (<>) 
{
    my @lines;
    # copy each line from the text file to the string @lines and add a function call after every '{' '
    tie @lines, 'Tie::File', $ARGV or die "Can't read file: $!\n"

    foreach  (@lines) 
    {   
        if   (!( index (@lines,'}')!= -1 )) # if there is a '}' in the same line don't add the     macro
            {
                s/{/'{function(' . $counter++ . ')'/ge;
                print;
            }

    }
    untie @lines; # free @lines
} 
```

我试图做的是遍历我在我的目录和子目录中找到的@ARGV 中的所有文件，对于每个 *.c 或 *.h 文件，我想逐行检查并检查此行是否包含'{ '。如果是，程序将不检查是否有'{'并且不会进行替换，如果没有，程序将用'{function('.counter++.');'替换'{'

不幸的是，这段代码不起作用。我很惭愧地说我试图让它整天工作但仍然没有成功。我认为我的问题是我并没有真正使用搜索'{'但我不明白的行为什么。我真的很感激一些帮助。

我还想补充一点，我在 Windows 环境中工作。

谢谢你！！

编辑：到目前为止，在您的帮助下，这是代码：

```
use strict;
use warnings;
use File::Find;

my $dir = "C:/projects/SW/fw/phy";   # use forward slashes in paths

# fill up our argument list with file names:
find(sub { if (-f && /\.[hc]$/) { push @ARGV, $File::Find::name } }, $dir);

$^I = ".bak";   # supply backup string to enable in-place edit 

my $counter = 0; 

# now process our files
while (<>) {
    s/{/'{ function(' . $counter++ . ')'/ge unless /}/;
    print;
} 
```

剩下要做的就是让它忽略 '{' 替换，当它是 'typedef' 子字符串下的一行时，如下所示：

```
typedef struct 
{
}examp; 
```

非常感谢您的帮助！谢谢！:)

编辑#2：这是最终代码：

```
use strict;
use warnings;
use File::Find;

my $dir = "C:/exmp";   

# fill up our argument list with file names:
find(sub { if (-f && /\.[hc]$/) { push @ARGV, $File::Find::name } }, $dir);

$^I = ".bak";   # supply backup string to enable in-place edit 

my $counter = 0; 
my $td = 0;

# now process our files
while (<>) {
    s/{/'{ function(' . $counter++ . ')'/ge if /{[^}]*$/ && $td == 0;
    $td = do { (/typedef/ ? 1 : 0 ) || ( (/=/ ? 1 : 0 ) && (/if/ ? 0 : 1 ) && (/while/ ? 0 : 1 ) &&             (/for/ ? 0 : 1 ) && (/switch/ ? 0 : 1 ) )}; 
    print;
} 
```

代码进行替换，除非替换位置上方的行包含'typedef'，当它上面的行包含'='并且没有'if'，'while'，'for'或'switch'时，替换也不会发生.

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T08:09:12.060

`-i`swith 让您为*备份文件*设置一个扩展名。

使用 perl：

```
perl -pe "/{[^}]*\$/&&do{s/{/{function('.counter++.');/}" -i.bak * 
```

或（相同的结果）：

```
perl -pe "s/{/{function('.counter++.');/ if /{[^}]*\$/" -i.bak * 
```

对于处理子文件夹中的所有文件，这可能更容易使用`find`：

```
find . -type f -print0 |
    xargs -0 perl -pe "s/{/{function('.counter++.');/ if /{[^}]*\$/" -i.bak 
```

使用`GNU sed`让您可以非常快速地完成工作

```
sed -e "/{[^}]*\$/{s/{/{function('.counter++.');/}" -i.bak * 
```

**编辑***仅在上一行**不**包含 word`typedef`*时进行修改：

```
perl -pe "BEGIN { my \$td=1; };s/{/{function('.counter++.');/ if /{[^}]*\$/ && \$td==1 ; \$td=do{/typedef/?0:1};"  -i.bak * 
```

可以写；

```
perl -pe "
BEGIN { my \$td=0; };
s/{/{function('.counter++.');/ if /{[^}]*\$/ && \$td==0 ;
\$td=do{/typedef/?1:0};"  -i.bak * 
```

或更具可读性

```
perl -pe '
    BEGIN { my $td=0; };
    s/{/{function(\047.counter++.\047);/ if /{[^}]*$/ && $td==0;
    $td=do{/typedef/?1:0};
  ' -i.bak * 
```

或作为 perl 脚本文件：`cat >addFunction.pl`

```
#!/usr/bin/perl -pi.bak
BEGIN { my $td = 0; }
s/{/{function(\047.counter++.\047);/ if /{[^}]*$/ && $td == 0;
$td = do { /typedef/ ? 1 : 0 }; 
```

解释：

*   `BEGIN{...}`命令块在程序开始时执行。
*   `s/// if // &&`**如果**当前匹配匹配**且**$td=0则替换
*   `$td=do{ aaa ? bbb : ccc }`assing to td: if aaa then bbb else ccc.

由于 perl 连续运行，`$td`保持他的值直到下一次分配。因此，如果在分配之前进行替换测试`$td`，则检查将使用*先前*的值。

最后，同样使用 sed：

```
sed -e '/{[^}]*$/{x;/./{x;s/{/{function(\o047.counter++.\o047);/;x;};x;};h;s/^.*typedef.*$//;x;' -i.bak * 
```

或更具可读性：

```
sed -e '
    /{[^}]*$/{
        x;
        /./{
            x;
            s/{/{function(\o047.counter++.\o047);/;
            x;
        };
        x;
    };
    h;
    s/^/./;
    s/^.*typedef.*$//;
    x;
' -i.bak * 
```

一些`sed`技巧：

*   `h`将当前行存储（备份）到*保留空间*
*   `x`*与保持空间*交换当前工作线
**   `s///`众所周知的替换字符串命令*   `\o047`八进制刻度：`'`*   `/{[^}]*$/{ ... }`命令块仅在行 macching`{`和 no上执行`}`。*   `/./{ ... }`仅在包含至少 1 个字符的行上执行的命令块*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:03:56.640

如果存在“}”，这是跳过替换的一种方法：

```
if ( $_ !~ /}/ ) {  # same as !( $_ =~ /}/ )

    s/{/'{function(' . $counter++ . ')'/ge;
} 
```

但请确保`print`在条件之外，否则如果缺少“}”，则不会打印该行。

其他写法：

```
unless ( /}/ ) {

    s/{/'{function(' . $counter++ . ')'/ge;
} 
```

或者简单地说：

```
s/{/'{function(' . $counter++ . ')'/ge unless /}/; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T07:35:01.270

我认为这个问题是您正在寻找@lines 中的索引。你要这个：

```
while (<>) 
{
    my @lines;
    # copy each line from the text file to the string @lines and add a function call after every '{' '
    tie @lines, 'Tie::File', $ARGV or die "Can't read file: $!\n"

    foreach  my $line(@lines) 
    {   
        if   ( index ($lines,'}')== -1 ) # if there is a '}' in the same line don't add the     macro
            {
                $line =~ s/{/'{function(' . $counter++ . ')'/ge;
            }
        print $line;

    }
    untie @lines; # free @lines
} 
```

我也有点不清楚 $ARGV 是如何设置的。您可能希望根据脚本的方式在该位置使用 $_ 。*

# php - Codeigniter excel编码问题

> ID：14332922
> 
> 赞同：1
> 
> 时间：2013-01-15T07:26:10.687
> 
> 标签：php, excel, codeigniter

我已经从[http://phpexportxlsclass.googlecode.com/files/export-xls.class-v1.01.zip下载了 php excel 导出器库](http://phpexportxlsclass.googlecode.com/files/export-xls.class-v1.01.zip)

如果我从 zip 独立运行 demo.php 文件，它工作正常。

我已将 export-xls.class.php 文件包含在库文件夹中，并从控制器调用该库

这是代码片段

```
function export_to_excel() {

    require(APPPATH.'libraries/exportxls.php');

    $config['filename'] = 'test1.xls'; // The file name you want any resulting file to be called.
    $xls = new ExportXLS($config);

    $xls->addHeader("Test Spreadsheet");
    $xls->addHeader(null);
    $header = array("Name", "Age", "Height");
    $xls->addHeader($header);
    $row = array();
    $row[] = array('Jack', '24', '6ft');
    $row[] = array('Jim', '22', '5ft');
    $row[] = array('Jess', '54', '4ft');
    $row[] = array('Luke', '6', '2ft');
    $xls->addRow($row);
    $xls->sendFile();
} 
```

但是当我使用 url 运行我的代码时，`http://www.domain.com/controller/export_to_excel`它会给我以下 excel 文件作为输出。 ![在此处输入图像描述](../Images/747097208fa52211b40601e713365bfb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:13:59.150

对于 Windows 支持：在私有函数中添加这些行`textFormat($row, $col, $data)`

```
iconv("UTF-8", "CP1252", $data); 
```

有关此问题的更多讨论，请参阅[此内容。](https://code.google.com/p/phpexportxlsclass/wiki/PHPExportClassHOWTO)

# delphi - 知道 Onclick 事件被触发

> ID：14332923
> 
> 赞同：1
> 
> 时间：2013-01-15T07:26:11.477
> 
> 标签：delphi, events, onclick

我使用服务器客户端组件，当在该组件的 TransferFile 事件中接收到文件时，我使用警报消息组件。所以我希望，如果用户单击警报消息，程序继续执行 TransferFile 事件中的代码，以在单击按钮的情况下接受文件传输，或者在未单击按钮时退出程序。请看下面的代码：

```
procedure TfrmReadFile.ServerReceiveEvent(Sender: TObject;
  Client: TSimpleTCPClient; Event: TTOOCSEvent);
begin
  if (Event is TTOOCSEventFileTransfert) then
  begin
    Alert.Show;
      if Alert.OnAlertClick then
      begin
        with (Event as TTOOCSEventFileTransfert) do
        if (dlgSaveFile.Execute) then
          with TMemoryStream.Create do
            try
              Write(Content[1], Length(Content));
              SaveToFile(dlgSaveFile.FileName);
            finally
              Free;
            end;
      end;
  end;
end; 
```

但是“如果 Alert.OnAlertClick then”是错误的

```
procedure TfrmReadFile.AlertAlertClick(Sender: TObject);
begin

end; 
```

请帮助我获取这些代码。

AlertMessage 是 TMS 组件之一，它没有 ShowModal，但它有我使用的 Alert.Show 程序。我想暂停执行代码，直到警报显示时间结束，如果用户没有单击警报，则执行代码中止并且没有文件保存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T10:30:30.870

从您的代码中很明显，当您显示警报时，**文件传输已经发生**：这只是**“我是否保存到文件”**或**“我是否丢弃我已经收到的内容”的**问题。我从您对 - 该函数的使用中推断出此信息`TMemoryStream.Write()`- 该函数将缓冲区作为参数，因此我假设`Content[1]`为您提供了缓冲区。这也意味着`Content`已经填充了您需要的数据。不转移它已经太晚了，它已经在内存中，你所能做的就是将它保存到磁盘或丢弃它。

我也不知道 TMS 的警报是如何工作的，但我会假设在任何给定时间只能显示一个警报，并且我会假设您将您`Alert`的警报放在一个组件上（即：只有一个警报在整个程序）。

您应该首先更改“接收到的事件”的代码，以立即将内容移动到`TMemoryStream`. 还要确保您不会遇到递归重入的麻烦。在表单中添加一个私有字段，调用它`FLastContentReceived: TMemoryStream`；现在将您的代码更改为如下所示：

```
procedure TfrmReadFile.ServerReceiveEvent(Sender: TObject;
  Client: TSimpleTCPClient; Event: TTOOCSEvent);
begin
  if (Event is TTOOCSEventFileTransfert) then
  begin
    // Re-entry before we managed to handle the previous received file?
    if Assigned(FLastContentReceived) then
      raise Exception.Create('Recursive re-entry not supported.');

    // No re-entry, let's save the content we received so we can save it to file
    // if the user clicks the Alert button.
    FLastContentReceived := TMemoryStream.Create;

    // I don't know what Content is, but you've got that in your code so I
    // assume this will work:
    FLastContentReceived.Write(Content[1], Length(Content); 

    // Show the alert; If the OnAlertClick event fires we'll have the received file content
    // in the FLastContentRecevied and we'll use that to save the file.
    Alert.Show;
  end;
end; 
```

您正在尝试执行 if on `Alert.OnAlertClick`- 所以我假设您的`Alert`组件中有一个名为`OnAlertClick`. 把它写在它的事件处理程序中：

```
procedure TfrmReadFile.AlertAlertClick(Sender: TObject);
begin
  if not Assigned(FLastContentReceived) then raise Exception.Create('Bug');
  try
    if dlgSaveFile.Execute then
      FLastContentReceived.SaveToFile(dlgSaveFile.FileName);
  finally FreeAndNil(FLastContentReceived);
  end;
end; 
```

您还需要一种方法来丢弃`FLastContentReceived`如果在单击警报按钮之前关闭表单或出现超时（警报在用户单击它的情况下消失）。表单关闭时的第一项工作（摆脱 FLastContentReceived）很简单：将其添加到表单的`OnDestroy`：

```
FLastContentRecevid;Free; 
```

处理超时可能有点困难。如果`Alert`有一个在警报超时时调用的事件并且气球在没有被单击的情况下消失，则使用该事件处理程序来执行此操作：

```
FreeAndNil(FLastContentRecevid); 
```

如果它没有提供这样的东西，您可以设置一个`TTimer`等于警报超时的时间间隔（或稍长一些以确保安全），在显示警报之前启用它并从它执行此操作`OnTimer`：

```
procedure TFrmReadFile.Timer1Timer(Sender: TObject);
begin
  Timer1.Enabled := False;
  FreeAndNil(FLastContentRecevid);
end; 
```

# jquery - 从 iFrame 关闭 primefaces 对话框

> ID：14332925
> 
> 赞同：2
> 
> 时间：2013-01-15T07:26:37.173
> 
> 标签：jquery, jsf, jsf-2, primefaces

我有一个页面，我想在其上显示一个对话框。

代码 ：

page1.xhtml

```
<p:commandLink value="Show Dialog" oncomplete="dlgWVar.show();"/>
<p:dialog widgetVar="dlgWVar"
          width="800"
          id="dialog"
          position="top"
          modal="true"
          header="Test Dialog"
          height="500">

    <iframe src="page2.xhtml" width="100%" height="500px" style="border-width: 0PX;">
    </iframe>

</p:dialog> 
```

现在在这个对话框中，我有一个 iFrame，其中 page2.xhtml 被链接。

page2.xhtml

```
 <p:commandButton value ="Close Dialog">
   </p:commandButton> 
```

page2.xhtml 包含一个命令按钮。现在我必须在单击命令按钮后关闭对话框。

不知道该怎么做。我应该在 page2.xhtml 上的 commandButton 中写什么，以便关闭 page1.xhtml 上的对话框。请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T07:39:14.330

对于较旧的 PrimeFaces 版本，请尝试使用`window.parent.dlgWVar.hide()`. 这只有在主窗口和 iframe 都显示来自同一域的页面时才有可能。

对于 5 及以上的 PrimeFaces 版本，请参阅其他答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-23T15:02:35.280

为了我

```
window.parent.PF('dlgWVar').hide() 
```

工作。

# powershell - 如何从powershell中的哈希表数组中获取唯一值？

> ID：14332930
> 
> 赞同：6
> 
> 时间：2013-01-15T07:27:02.330
> 
> 标签：powershell

如何从powershell中的哈希表数组中获取唯一值？

```
$h1 = @{a=1;b=2};
$h2 = @{a=3;b=4};
$h3 = @{a=1;b=2};

$h = $h1,$h2,$h3 
```

我想从 $h 中删除重复值（$h1 或 $h3）。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T08:29:26.330

你可以尝试这样的事情：

```
$h | select @{ Expression = { "$($_.Keys):$($_.Values)" }; Label ="AsString" }, @{ Expression ={$_}; Label = "Hash" } -unique 
                      | select -expand Hash 
```

# iis-7 - 通过 IIS 7.0 配置 Windows 身份验证

> ID：14332931
> 
> 赞同：1
> 
> 时间：2013-01-15T07:27:03.690
> 
> 标签：iis-7

我正在尝试通过 IIS 7.0 为我的 asp.net 应用程序配置 Windows 身份验证。

我注意到当我尝试使用 AD 用户帐户登录时。如果将 AD 用户添加到 IIS_IUSRS 或管理员组，我只能通过 Windows 身份验证模式登录我的应用程序。为什么会这样？这是我需要进行的任何配置，还是需要将需要通过 IIS 7.0 中的 Windows 身份验证登录到 asp.net 应用程序的每个用户帐户都添加到这几个组中？

请指教谢谢

# http - 在 Angular 中同时使用 Promise 和 service

> ID：14332943
> 
> 赞同：20
> 
> 时间：2013-01-15T07:27:53.617
> 
> 标签：http, angularjs

我的问题基于Angular Google 组中的[这个主题](https://groups.google.com/forum/#!msg/angular/qagzXXhS_VI/p9ArYjfivW8J)。
我想提供一个服务来存储通过 $http 从后端检索到的一些基本数据，然后我只需要获取这些数据一次。像，

```
var load = function() {
   return $http.get(...).then(function(data) {
       return data.user; 
   });
};

module.factory("userProvider", function() {
    var user;
    var getUser = function() {
        if(!user) {
            load().then(function(data) {
               user = data;
           });
        }
        return user;
    };
    return {
        getUser : getUser
    }
});

module.controller("UserController", ["userProvider", function UserController("userProvider") {
    var user = userProvider.getUser();
    // do something with user
}]); 
```

问题是promise链在userProvider中结束，而不是在控制器中，所以我第一次使用这个控制器时用户是未定义的，因为数据还没有返回。

如何使用这样的存储服务并正确返回数据？谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-15T07:48:35.467

您可以创建自己的承诺。这是修改后的代码：

```
module.factory( "userProvider", function( $q ) {
  // A place to hold the user so we only need fetch it once.
  var user;

  function getUser() {
    // If we've already cached it, return that one.
    // But return a promise version so it's consistent across invocations
    if ( angular.isDefined( user ) ) return $q.when( user );

    // Otherwise, let's get it the first time and save it for later.
    return whateverFunctionGetsTheUserTheFirstTime()
    .then( function( data ) {
      user = data;
      return user;
    });
  };

  // The public API
  return {
    getUser: getUser()
  };
}); 
```

* * *

**更新：** @yohairosen 下面的解决方案在许多情况下都是一个很好的解决方案，但并非对所有情况都适用。在某些情况下，我们只想缓存*成功*的结果，就像我在这里所做的那样。例如，如果此请求的失败表明用户需要先登录，我们不希望下一次调用（可能是在登录之后）传递缓存的失败。如果方法不一定在所有情况下都与调用保持一致，则此方法更好；在所有其他情况下，@yohairosen 的解决方案更简单，值得推荐。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-05-25T06:19:18.560

创建自己的 promise 有点开销，Angular 的 $http 无论如何都会为您创建一个。您正在寻找的是缓存，http 可以通过将 cache:true 传递给服务调用来为您处理它。

所以你可以简单地做这样的事情：

```
 module.factory("userProvider", function() {
   var getUser = function() {
   return $http.get(..., {cache:true}).then(function(data) {
       return data.user; 
   });

   return {
       getUser : getUser
   }
}); 
```

# android - 我的android设置框架应用程序上的奇怪错误

> ID：14332947
> 
> 赞同：0
> 
> 时间：2013-01-15T07:28:00.363
> 
> 标签：android, image, image-processing, bitmap, frame

我创建了一个将框架设置为图像位图的应用程序...但是当过程给出结果时，我不知道为什么结果位图也保存到我的原始位图变量中，这是我的代码：

主要代码：

```
@Override
public void onCreate (Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.frame);
    tampilFrame = (ImageView)findViewById(R.id.ivframe);
    oribmp = temporary.getBitmap();
            temp = oribmp;
    tampilFrame.setImageBitmap(temp);
    frame00 = (ImageView)findViewById(R.id.frs00);
    frame00.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            frame = Bitmap.createBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.fr00));
            frame = Bitmap.createScaledBitmap(frame, 800, 800, false);
            new backtask().execute();
        }
    });
    frame01 = (ImageView)findViewById(R.id.frs01);
    frame01.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            frame = Bitmap.createBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.fr01));
            frame = Bitmap.createScaledBitmap(frame, 800, 800, false);
            new backtask().execute();
        }
    });
    frame02 = (ImageView)findViewById(R.id.frs02);
    frame02.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            frame = Bitmap.createBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.fr02));
            frame = Bitmap.createScaledBitmap(frame, 800, 800, false);
            new backtask().execute();
        }
    });
    frame03 = (ImageView)findViewById(R.id.frs03);
    frame03.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            frame = Bitmap.createBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.fr03));
            frame = Bitmap.createScaledBitmap(frame, 800, 800, false);
            new backtask().execute();
        }
    });
} 
```

}

变量 frame00, frame01, frame02 是我设置为按钮的 ImageView。当用户点击帧图像时，它会从drawable加载一个图像并存储在一个名为“frame”的变量中，并调用一个名为“backtask”的异步任务。

这是“backtask”代码

```
public class backtask extends AsyncTask<Void, Void, Void> {
    ProgressDialog prog;

    @Override
    protected void onPreExecute(){
        super.onPreExecute();
        prog =  ProgressDialog.show(FrameActivity.this, "", "Progress...");     
    }

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub
        temp = setFrame(oribmp);
        Log.i("temp", "widht : "+String.valueOf(temp.getWidth())+" Height : "+String.valueOf(temp.getHeight()));
        return null;
    }

    @Override
    protected void onPostExecute(Void res){
        super.onPostExecute(res);
        tampilFrame.setImageBitmap(temp);
        prog.dismiss();
        Log.i("setFrame", "Complete");
    }
} 
```

当应用程序运行“setFrame()”代码时，我曾经使用这个 backtask 代码来进行加载。这是我的“setFrame”代码：

```
public Bitmap setFrame(Bitmap bit){
    for (int i=0;i<frame.getWidth();i++){
        for(int j=0;j<frame.getHeight();j++){
            if (Color.alpha(frame.getPixel(i, j))!=0){
                bit.setPixel(i, j, frame.getPixel(i, j));
            }
        }
    }
    frame.recycle();
    return bit;
} 
```

oribmp 是一个变量，当“temp = setFrame(oribmp);”时，它包含从类temporary.getBitmap() 获取的原始位图。完成后，ori bmp 也发生了与 temp 相同的变化。当我检查到临时类时，包含临时类上原始位图的位图变量也会更改为 setFrame 的结果...

这是代码 pf 临时类

```
public class temporary {
private static Bitmap Mbmp;

public static Bitmap getBitmap () {
    return Mbmp;
}

public static void setBitmap(Bitmap oribimp) {
    // TODO Auto-generated method stub
    Mbmp = oribimp;
    Log.i("editor", "simpen bitmap");
} 
```

}

临时类是我用来将位图值发送到我的应用程序中的另一个活动的类。这就是 FrameActivity 在运行时的样子。

strart activity ![这是FrameActivity第一次启动时的样子，原来的位图就是那个壁虎](../Images/80ff8d0c3eb98b7244e007653b15c805.png)这是FrameActivity第一次启动时的样子，原来的位图就是那个gecko

set frame 1 ![这是设置第一帧时的样子](../Images/596780d25daaba1da8e36101f250a342.png)这是设置第一帧时的样子

set frame 2 ![这是设置第二帧时的样子，因为 oribmp 与第一个 seFrame 的结果具有相同的值，在第二个 setFrame 上它们看起来像堆积](../Images/a26f2ddc63d59be75f8abc6043fbd173.png) 这是设置第二帧时的样子，因为 oribmp 的值与第一个 seFrame 的结果相同，在第二个 setFrame 上它们看起来像堆积

对不起，如果我的问题太长，也许任何人都可以给我解决方案：D

# python - Python用户输入控件：如何允许用户重新输入他输入的值之一？

> ID：14332951
> 
> 赞同：0
> 
> 时间：2013-01-15T07:28:38.050
> 
> 标签：python

我正在编写一个脚本，该脚本通过本地保存的存档日志文件解析字符串。在收到用户的反馈后，我想实现一个功能，允许用户以任何方式重新输入他们“搞砸”的字符串。有没有办法基于捕获的组合键来做到这一点，例如在 python 中？这是我正在收集的用户输入列表：

```
serverID = raw_input ("Description: ")
containerID = raw_input ("Description: ")
logtime = raw_input ("Description: ")
andor = raw_input ("Description: ")
string1 = raw_input ("Description: ")
string2 = raw_input ("Description: ")
string3 = raw_input ("Description: ")
string4 = raw_input ("Description: ")
afterIn = raw_input ("Description: ")
beforeIn = raw_input ("Description: ") 
```

确实，如果他们在输入后搞砸了并且必须再次输入所有内容，它可能不是最佳的，因此是问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:04:07.497

您想为数据使用实际的数据结构，这将使这项任务变得更加容易：

```
fields = ["serverID", "containerID", "logtime", "andor"]

data = {field: raw_input("{}: ".format(field)) for field in fields}

while True:
    print("\nYou entered:")
    for key, value in data.items():
        print("{}: {}".format(key, value))
    print("Please type the name of any field you wish to change, or nothing to continue.")
    field = raw_input("Correct a field?: ")
    if not field:
        break
    elif field in data:
        data[field] = raw_input("{}: ".format(field))
    else:
        print("Field name not recognised.")

print(data) 
```

这里我们使用字典来存储数据。请注意，字典是无序的，因此如果顺序很重要，您可能需要使用`collections.OrderedDict`. 除此之外，我们只是循环直到用户对数据感到满意。

# html - 我可以在 URL 的末尾添加绝对地址吗？

> ID：14332953
> 
> 赞同：0
> 
> 时间：2013-01-15T07:28:44.163
> 
> 标签：html, http, url, web

我目前有一个网站，其中 baseadresse 硬编码为[http://www.site1.com/](http://www.site1.com/) 该网站有许多媒体文件，这些媒体文件的相关路径存储在数据库中。因此，在文件夹 folder1 中找到 file1.mp3，我将连接字符串以获得[http://www.site1.com/folder1/file1.mp3](http://www.site1.com/folder1/file1.mp3) - 非常简单。

现在我想将文件移动到另一台服务器 - 让我们称之为[http://www.site2.com](http://www.site2.com) - 但我不想修改 www.site1.com 的代码。（不再可用的银光代码）。相反，我想修改数据库，所以 'folder1' 变成了[http://www.site2.com/folder1](http://www.site2.com/folder1)之类的东西- 这样连接的字符串就变成了：

[http://www.site1.com/http://www.site2.com/folder1/file1.mp3](http://www.site1.com/http://www.site2.com/folder1/file1.mp3)所以文件将从site2获取 - 这种语法显然不起作用，但有没有语法呢？

# linq - 从 DataTable 中选择前 N 条记录，并使用 Linq 进行一些排序

> ID：14332954
> 
> 赞同：0
> 
> 时间：2013-01-15T07:28:52.577
> 
> 标签：linq, linq-to-objects

我创建了一个数据表。经过一些操作，我已经填充了 DataTable 的行。

我对 Linq 很陌生，我想从实现一些分页的 DataTable 中获取前“N”条记录。

让**dataTable**是有一些数据的 DataTable。

我需要这样的东西

```
 var Query = from d in dataTable
        Order by columnName
        skip( some records pageSize * pageNumber)
        Select top N from dataTable 
```

列 Name、Page size、pageNumber 和 N 将作为参数传递

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T07:32:20.403

尝试这个：

```
var query = dataTable.AsEnumerable()
        .OrderBy(c => c.columnName)
        .Select(r => new {...})
        .Skip(10)
        .Take(5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T07:33:34.323

尝试这个，

```
int numberOfObjectsPerPage = 20;
var queryResultPage = dataTable.OrderBy(c => c.columnName).Select(r => r).Skip(numberOfObjectsPerPage * pageNumber).Take(numberOfObjectsPerPage); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T07:34:26.703

尝试这个

```
var Query = dataTable.Select(o=>o).OrderBy(o=>o.columnName).Skip(pageSize * pageNumber).Take(N); 
```

**编辑**

对于通过列名称，您应该添加此代码

```
 public static IQueryable<T> OrderByField<T>(this IQueryable<T> q, string SortField, bool Ascending)
    {
        var param = Expression.Parameter(typeof(T), "p");
        var prop = Expression.Property(param, SortField);
        var exp = Expression.Lambda(prop, param);
        string method = Ascending ? "OrderBy" : "OrderByDescending";
        Type[] types = new Type[] { q.ElementType, exp.Body.Type };
        var mce = Expression.Call(typeof(Queryable), method, types, q.Expression, exp);
        return q.Provider.CreateQuery<T>(mce);
    } 
```

然后你可以这样称呼它

```
var values = dataTable.OrderByField("columnName"); 
```

# java - 如果磁盘中没有空间，Cassandra 将终止

> ID：14332957
> 
> 赞同：4
> 
> 时间：2013-01-15T07:29:16.757
> 
> 标签：java, cassandra

我在我的 java 应用程序中使用 Cassandra DB。我正在使用 Thrift 客户端从我的 java 应用程序连接 Cassandra。如果 Cassandra 磁盘已满，则意味着它会自动终止。因此，从我的 java 程序中，我找不到 Cassandra 停机的正确错误。

那么如何避免 Cassandra 的自动终止，或者他们有什么方法可以识别磁盘已满错误？

此外，我没有物理访问 cassandra 驱动器的权限。它在其他一些远程机器上运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T07:38:42.627

磁盘错误和一般的硬件/系统错误通常不会*在*任何应用程序中正确处理。数据库应该只在这种情况下提供尽可能多的持久性，这是正确的行为 - 尽可能少地关闭和中断。

至于您的应用程序 - 如果您无法连接到数据库，那么导致错误的原因没有区别。你的应用程序无论如何都不会工作。

有一些特殊的工具可以监控你的机器，比如[Nagios](http://www.nagios.org/)。如果您是该服务器的管理员，请使用此类应用程序。当磁盘被填满时，您将收到一封电子邮件或文本。使用这样的工具，不要通过实现数百行代码来处理随机和非常罕见的情况来打破敞开的大门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T07:38:46.310

设置对 Casandra 机器的 ssh 访问权限并使用一些 ssh 客户端（如[JSch](http://www.jcraft.com/jsch/)）从您的 Java 客户端运行`df /casandra/drive`（如果是 Linux）或（如果是 Windows）。`fsutil volume diskfree c:\casandra\drive`捕获简单的输出并解析以获得可用磁盘空间。这样，您的应用程序将监视那里正在发生的事情，并且如果存在磁盘空间不足的威胁，可能应该提醒用户并拒绝添加数据。

如果磁盘空间不足，您还可以使用标准监控工具或设置服务器端脚本来发送消息。但是，这不会阻止您的应用程序崩溃，您需要在看到磁盘空间不足后采取措施。

# extjs - 组合框 ext 4.0 中的动态滚动

> ID：14332961
> 
> 赞同：3
> 
> 时间：2013-01-15T07:29:28.713
> 
> 标签：extjs, combobox

我正在使用 extjs 4.0 并有一个带有 queryMode 'remote' 的组合框。我用来自服务器的数据填充它。问题是来自服务器的记录数量太大，所以我认为最好按部分加载它们。我知道组合框有一个标准的分页器工具，但它不方便，因为需要记录总数。问题是，有没有办法为组合框添加动态滚动？当滚动到列表底部时，我想发送下一部分记录的请求并将它们添加到列表中。我找不到合适的听众来做这件事。

已更新找到解决方案，已发布在答案中

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T17:41:16.613

以下是我的组合框无限滚动的解决方案，Extjs 4.0

```
Ext.define('TestProject.testselect', {
    extend:'Ext.form.field.ComboBox',
    alias: ['widget.testselect'],
    requires: ['Ext.selection.Model', 'Ext.data.Store'],

    /**
     * This will contain scroll position when user reaches the bottom of the list 
     * and the store begins to upload data
     */
    beforeRefreshScrollTop: 0,

    /**
     * This will be changed to true, when there will be no more records to upload
     * to combobox
     */
    isStoreEndReached : false,

    /**
     * The main thing. When creating picker, we add scroll listener on list dom element.
     * Also add listener on load mask - after load mask is hidden we set scroll into position 
     * that it was before new items were loaded to list. This prevents 'jumping' of the scroll.
     */
    createPicker: function() {
        var me = this,
        picker = me.callParent(arguments);
        me.mon(picker, {
            'render' : function() {
                Ext.get(picker.getTargetEl().id).on('scroll', me.onScroll, me);
                me.mon(picker.loadMask, {
                   'hide' : function() {
                      Ext.get(picker.id + '-listEl').scroll("down", me.beforeRefreshScrollTop, false);
                   },
                   scope: me
                });
            },
            scope: me
        });
        return picker;
    },

    /**
     * Method which is called when user scrolls the list. Checks if the bottom of the 
     * list is reached. If so - sends 'nextPage' request to store and checks if 
     * any records were received. If not - then there is no more records to load, and 
     * from now on if user will reach the bottom of the list, no request will be sent.
     */
    onScroll: function(){
        var me = this,
        parentElement = Ext.get(me.picker.getTargetEl().id),
        parentElementTop = parentElement.getScroll().top,
        scrollingList = Ext.get(me.picker.id+'-items');
        if(scrollingList != undefined) {
            if(!me.isStoreEndReached && parentElementTop >= scrollingList.getHeight() - parentElement.getHeight()) {
                var multiselectStore = me.getStore(),
                beforeRequestCount = multiselectStore.getCount();
                me.beforeRefreshScrollTop = parentElementTop;
                multiselectStore.nextPage({
                    params: this.getParams(this.lastQuery),
                    callback: function() {
                            me.isStoreEndReached = !(multiselectStore.getCount() - beforeRequestCount > 0);
                        }
                });
            }
        }
    },

    /**
     * Took this method from Ext.form.field.Picker to collapse only if 
     * loading finished. This solve problem when user scrolls while large data is loading.
     * Whithout this the list will close before finishing update.
     */
    collapse: function() {
        var me = this;
        if(!me.getStore().loading) {
            me.callParent(arguments);
        }
    },

    /**
     * Reset scroll and current page of the store when loading all profiles again (clicking on trigger)
     */
    doRawQuery: function() {
        var me = this;
        me.beforeRefreshScrollTop = 0;
        me.getStore().currentPage = 0;
        me.isStoreEndReached = false;
        me.callParent(arguments);
    }
}); 
```

创建元素时，应该将 id 传递给 listConfig，我也将模板传递给列表，因为我需要它带有 id。我没有找到更优雅的方法来做到这一点。我很感激任何建议。

```
{
                    id: 'testcombo-multiselect',
                    xtype: 'testselect',
                    store: Ext.create('TestProject.testStore'),
                    queryMode: 'remote',
                    queryParam: 'keyword',
                    valueField: 'profileToken',
                    displayField: 'profileToken',
                    tpl: Ext.create('Ext.XTemplate',
                        '<ul id="ds-profiles-boundlist-items"><tpl for=".">',
                            '<li role="option" class="' + Ext.baseCSSPrefix + 'boundlist-item' + '">',
                                '{profileToken}',
                            '</li>',
                        '</tpl></ul>'
                    ),
                    listConfig: {
                        id: 'testcombo-boundlist'
                    }
                }, 
```

还有商店：

```
Ext.define('TestProject.testStore',{
    extend: 'Ext.data.Store',
    storeId: 'teststore',
    model: 'TestProject.testModel',
    pageSize: 13, //the bulk of records to receive after each upload
    currentPage: 0, //server side works with page numeration starting with zero
    proxy: {
        type: 'rest',
        url: serverurl,
        reader: 'json'
    },
    clearOnPageLoad: false //to prevent replacing list items with new uploaded items
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-05T03:06:34.950

感谢 me1111 为我们指明了方向。

```
Ext.define('utils.fields.BoundList', {
    override:'Ext.view.BoundList',
    ///@function utils.fields.BoundList.loadNextPageOnScroll
    ///Add scroll listener to load next page if true.
    ///@since 1.0
    loadNextPageOnScroll:true,
    ///@function utils.fields.BoundList.afterRender
    ///Add scroll listener to load next page if required.
    ///@since 1.0
    afterRender:function(){
        this.callParent(arguments);

        //add listener
        this.loadNextPageOnScroll
        &&this.getTargetEl().on('scroll', function(e, el){
            var store=this.getStore();
            var top=el.scrollTop;
            var count=store.getCount()
            if(top>=el.scrollHeight-el.clientHeight//scroll end
               &&count<store.getTotalCount()//more data
              ){
                  //track state
                  var page=store.currentPage;
                  var clearOnPageLoad=store.clearOnPageLoad;
                  store.clearOnPageLoad=false;

                  //load next page
                  store.loadPage(count/store.pageSize+1, {
                      callback:function(){//restore state
                          store.currentPage=page;
                          store.clearOnPageLoad=clearOnPageLoad;
                          el.scrollTop=top;
                      }
                  });
              }
        }, this);
    },
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T07:43:09.857

您可以将无限网格实现为组合框列表。看这个例子来实现另一个选择器：

[http://www.sencha.com/forum/showthread.php?132328-CLOSED-ComboBox-using-Grid-instead-of-BoundList](http://www.sencha.com/forum/showthread.php?132328-CLOSED-ComboBox-using-Grid-instead-of-BoundList)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-18T09:00:04.107

如果有人在 ExtJS 版本 6 中需要这个，这里是代码：

```
Ext.define('Test.InfiniteCombo', {
    extend: 'Ext.form.field.ComboBox',
    alias: ['widget.infinitecombo'],

    /**
     * This will contain scroll position when user reaches the bottom of the list
     * and the store begins to upload data
     */
    beforeRefreshScrollTop: 0,

    /**
     * This will be changed to true, when there will be no more records to upload
     * to combobox
     */
    isStoreEndReached: false,

    /**
     * The main thing. When creating picker, we add scroll listener on list dom element.
     * Also add listener on load mask - after load mask is hidden we set scroll into position
     * that it was before new items were loaded to list. This prevents 'jumping' of the scroll.
     */
    createPicker: function () {
        var me = this,
            picker = me.callParent(arguments);
        me.mon(picker, {
            'afterrender': function () {
                picker.on('scroll', me.onScroll, me);
                me.mon(picker.loadMask, {
                    'hide': function () {
                        picker.scrollTo(0, me.beforeRefreshScrollTop,false);
                    },
                    scope: me
                });
            },
            scope: me
        });
        return picker;
    },

    /**
     * Method which is called when user scrolls the list. Checks if the bottom of the
     * list is reached. If so - sends 'nextPage' request to store and checks if
     * any records were received. If not - then there is no more records to load, and
     * from now on if user will reach the bottom of the list, no request will be sent.
     */
    onScroll: function () {
        var me = this,
            parentElement = me.picker.getTargetEl(),
            scrollingList = Ext.get(me.picker.id + '-listEl');
        if (scrollingList != undefined) {
            if (!me.isStoreEndReached && me.picker.getScrollY() + me.picker.getHeight() > parentElement.getHeight()) {
                var store = me.getStore(),
                    beforeRequestCount = store.getCount();
                me.beforeRefreshScrollTop = me.picker.getScrollY();
                store.nextPage({
                    params: this.getParams(this.lastQuery),
                    callback: function () {
                        me.isStoreEndReached = !(store.getCount() - beforeRequestCount > 0);
                    }
                });
            }
        }
    },

    /**
     * Took this method from Ext.form.field.Picker to collapse only if
     * loading finished. This solve problem when user scrolls while large data is loading.
     * Whithout this the list will close before finishing update.
     */
    collapse: function () {
        var me = this;
        if (!me.getStore().loading) {
            me.callParent(arguments);
        }
    },

    /**
     * Reset scroll and current page of the store when loading all profiles again (clicking on trigger)
     */
    doRawQuery: function () {
        var me = this;
        me.beforeRefreshScrollTop = 0;
        me.getStore().currentPage = 1;
        me.isStoreEndReached = false;
        me.callParent(arguments);
    }
}); 
```

# javascript - pdf 的 Javascript 弹出窗口

> ID：14332963
> 
> 赞同：0
> 
> 时间：2013-01-15T07:29:35.660
> 
> 标签：javascript, asp.net

**我需要打开 2 个弹出窗口，第一个包含一个用于打开第二个用于打开 pdf 的按钮。在这里，如果我在按钮单击打开第二个时对值（它包含文本框）进行了一些更改，它会重新加载第二个。但焦点不会转移到第二个窗口**。

我在这里附上旧帖子，我尝试过，但我仍然遇到同样的问题。

我想我有一个更好的解决方案，不涉及先关闭窗口。问题是，如果您尝试使用空 URL（即 ''）再次打开它，IE 不会覆盖窗口（PDF 或其他）。但是，它将覆盖具有非空 URL 的 PDF。那可能是一个文件，但 about:blank 效果更好（这是空 URL 通常所做的）。

根据您的代码的编写方式，您可能仍需要 try/catch，但这应该消除需要：

```
windowHandle = window.open('about:blank',name,attributes);
windowHandle.document.location.href = url;
windowHandle.focus(); 
```

about:blank 将强制 PDF 退出子窗口并允许您执行您需要执行的操作。将 URL 和 focus() 的设置放在 windowHandle.onload() 处理程序中可能不是一个坏主意，因此处理 PDF 没有任何时间问题。IE：

```
windowHandle.onload=function(){
    windowHandle.document.location.href = url;
    windowHandle.focus();
}; 
```

谢谢

我的主要问题是调用 windowHandle.focus(); 这会产生pdf错误。

# c# - 无论用户是在组还是子组中，如何在广告中进行递归搜索？

> ID：14332964
> 
> 赞同：2
> 
> 时间：2013-01-15T07:29:37.637
> 
> 标签：c#, asp.net, recursion, active-directory, active-directory-group

嗨，我在 ASP.NET 应用程序中使用 Active Directory 和 C#，如果用户在组或此子组中，我希望得到一个布尔值。我写了一个方法来让我知道用户是否在组中但不在这个子组中:(

如何在我的方法中进行递归搜索：

这是我的代码：

```
public static bool IsUserInGroup(string dc, string User, string group) 
        {
            PrincipalContext ctx = new PrincipalContext(ContextType.Domain, dc);

            GroupPrincipal p = GroupPrincipal.FindByIdentity(ctx, group);

            UserPrincipal u = UserPrincipal.FindByIdentity(ctx, IdentityType.SamAccountName, User);

            bool isMember = u.IsMemberOf(p); 

            return isMember; 
        }

static void Main(string[] args)
        {
            string dc = "company.com";
            string user = "test.w";

            bool isadmin = IsUserInGroup(dc, user, "TAdmin");
            bool isUser = IsUserInGroup(dc, user, "TUser");

            Console.WriteLine("Admin: " + isadmin);
            Console.WriteLine("User: " + isUser);

            Console.ReadLine();

        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T07:36:09.320

而不是`IsMemberOf`方法，你应该使用`GetMembers(Boolean)`'true'。它将返回组的所有成员——甚至是嵌套的。然后做一个循环来检查你的用户原则是否在结果中。检查[此](http://msdn.microsoft.com/en-us/library/bb339975.aspx)链接。

附加说明：试试这样的代码

```
public static bool IsUserInGroup(string dc, string User, string group) 
{
    bool found = false;

    PrincipalContext ctx = new PrincipalContext(ContextType.Domain, dc);
    GroupPrincipal p = GroupPrincipal.FindByIdentity(ctx, group);
    UserPrincipal u = UserPrincipal.FindByIdentity(ctx, IdentityType.SamAccountName, User);

    found = p.GetMembers(true).Contains(u);

    p.Dispose();
    u.Dispose();

    return found; 
} 
```

# nhibernate - 使用 NHibernate QueryOver 进行后期评估

> ID：14332966
> 
> 赞同：3
> 
> 时间：2013-01-15T07:29:43.207
> 
> 标签：nhibernate, queryover

NHibernate.Linq 返回 IQueryable 给我后期评估。这也可以用 QueryOver 来完成吗？

更新：

我将使用它来定义许多只使用子集的查询。因此，Future 不是解决方案，它将全部执行。

我喜欢 NHibernate.Linq 的 IQueryable (IEnumerable) 返回类型，如果从未使用过，它将永远不会执行查询。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T07:56:46.337

首先，even`QueryOver`只是一组定义，稍后将转换为 SQL 语句。因此，直到您使用对 a 的引用

```
IQueryOver<Entity, Entity> ab = session.QueryOver<Entity>(); 
```

而不是调用`List<Entity>()`......执行被推迟。这也是您可以使用分离查询[16.1 的方式。查询的结构](http://nhforge.org/doc/nh/en/index.html#queryqueryover-querystructure)

```
QueryOver<Cat> query = QueryOver.Of<Cat>()
        .Where(c => c.Name == "Paddy"); 
```

另一个强大的功能是`Future`。这代表了一种非常简单的方法，如何将少量查询放在堆栈上，并且仅当需要其中的第一个时……所有查询都被执行并作为*批处理*传递给 DB 服务器。在这里阅读更多： [NHibernate 期货](http://ayende.com/blog/3979/nhibernate-futures)

> 它们本质上是一种将查询执行推迟到以后执行的方式，此时 NHibernate 将获得有关应用程序应该做什么的更多信息，并相应地对其进行优化

最大的不同是不能像`IQueryable`使用时那样返回`QueryOver`

*编辑：扩展问题更新*

虽然`IQueryable<TEntiy>`只能从 a 返回`session.Query<TEntity>()`，而在使用 *QueryOver*、*ICriteria*、*HQL*时不能返回......使用`QueryOver`.

# tridion - Tridion 2011 中的动态菜单问题

> ID：14332968
> 
> 赞同：8
> 
> 时间：2013-01-15T07:30:03.060
> 
> 标签：tridion, tridion-2011, tridion-content-delivery, tridion2009

我们有一个应用程序，它具有通过发布动态组件表示动态生成的菜单。menu.xml 由基于结构组的组件模板写出，并且该组件模板通过事件系统触发，以在结构组时发布已发布。

在从 Tridion 2009 升级 Tridion 2011 之前，此设置运行良好。但自升级以来，菜单不会动态发布，并且每次结构组发生更改时都需要重新发布菜单组件模板。我们检查了事件系统，那里一切都很好。此外，重新发布菜单组件模板会在其他一些页面菜单中引发问题。

在进行一些调试时（我们让组件模板随时写出它正在处理的 pageURI），我们发现正在写出的页面 URI 是错误的。

以下是采取的步骤和得出的结论：

*   已检查所有错误页面；DCP 标记在 JSP 代码中设置了正确的属性

*   Tridion 标签库中添加了额外的 TRACE 语句，这证实了以下几点：

*   XSLT 已从文件系统中正确检索
*   已从缓存中正确检索缓存的菜单
*   XSLT 已使用提供的变量正确转换

*   通过将 XSLT 属性写入 HTML，我们看到 XSLT 处理器提供了错误的参数。

因此，我可以安全地得出结论，该问题已被隔离到以下事件；正在使用不正确的页面 ID 调用 XSL 处理器。最可能的原因是动态组件表示 (DCP) Java 代码中的并发问题，其中 DCP 蜂拥而至并开始混淆哪个页面正在使用当前对象。

如果是这种情况，可以做些什么来纠正它。

任何信息都会有所帮助。提前致谢！

问候，

基尔塔娜 TS

2013 年 1 月 22 日更新：

在更多的调试中，我们发现这个问题在演示端（我们的演示服务器）反复出现，并且事件系统与页面上出现的错误菜单无关。

也就是说，当我们查看从 Tridion 发布的 jsp 页面时，我们有顶部菜单、左侧菜单和面包屑的正确页面 URI：

```
<tridion:ComponentPresentation pageURI="tcm:57-186286-64" componentURI="tcm:57-103196" templateURI="tcm:57-23654-32"/><!-- privat-->
<div id="nav"><div class="wrapper">
<tridion:ComponentPresentation pageURI="tcm:57-186286-64" componentURI="tcm:57-23638" templateURI="tcm:57-23656-32" />
</div></div>
<div id="page" class="clear ">
<div id="content" class="clear">
<tridion:ComponentPresentation pageURI="tcm:57-186286-64" componentURI="tcm:57-23639" templateURI="tcm:57-23656-32" />
<div id="middle" class="rightcolumn">
<tridion:ComponentPresentation pageURI="tcm:57-186286-64" componentURI="tcm:57-23636" templateURI="tcm:57-23656-32" /> 
```

但是，当我们查看网页的源代码时，我们发现页面 URI（我们将页面 URI 写成 html 页面）乱七八糟，如下所示：

```
<div id="middle" class="rightcolumn"> 
```

它生成面包屑，我们得到一个不同的 pageURI 而不是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T08:11:48.327

一些与发布相关的遗留 (VB) 事件在 Tridion 2011 中无法开箱即用。这里有一个遗留事件适配器：http: [//sdltridionworld.com/community/2011_extensions/LegacyEventAdapter.aspx](http://sdltridionworld.com/community/2011_extensions/LegacyEventAdapter.aspx)。

# wix - 带有安装程序的自定义操作项目

> ID：14332970
> 
> 赞同：0
> 
> 时间：2013-01-15T07:30:15.320
> 
> 标签：wix, wix3.5

我的解决方案和自定义操作项目中有 wix 设置项目。

我在安装项目中添加了对自定义操作项目的引用

并添加了以下几行：

```
<Binary Id="CA_DLL" SourceFile="GlobalCustomActions" />
<CustomAction Id="CA_TestConnection" BinaryKey="CA_DLL" DllEntry="TestDatabaseConnection" Execute="immediate" /> 
```

我收到错误“系统找不到文件 GlobalCustomActions”。

我还尝试了以下方法：

```
<Binary Id="CA_DLL" SourceFile="GlobalCustomActions.CA.dll" /> 
```

请问正确的语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:50:21.177

您问题中的第二种语法是正确的 - 您应该指定文件的路径`*.CA.dll`。这里的问题是当前目录不是DLL所在的目录。为了避免以后出现此类问题，请通过预处理器变量指定完整路径，例如：

```
<Binary Id="CA_DLL" SourceFile="$(var.Path)\GlobalCustomActions.CA.dll" /> 
```

# iphone - 如何比较两个 NSMutableArrays？

> ID：14332971
> 
> 赞同：1
> 
> 时间：2013-01-15T07:30:18.033
> 
> 标签：iphone, ios, for-loop, nsmutablearray, compare

我是 iOS 开发新手，无法比较两个`NSMutableArray`.

其中一个（`appDelegate.array`在代码中）包含来自数据库的数据，另一个（`dataArray`在代码中）包含来自服务器响应的数据。

现在我想将 ( ) 的每个元素`dataArray`与整个 ( `appDelegate.array`) 进行比较，如果 ( ) 的某些元素`dataArray`存在于 ( `appDelegate.array`) 中，则什么也不做或中断，如果不存在则将其添加到数据库中。

我试过了，但我无法做到这一点。下面是我正在使用的代码。

先感谢您。

```
NSMutableArray *dataArray = [responseDictionary objectForKey:@"myDATA"];

NSLog(@"%d dataArray count", [dataArray count]);

    for (int i = 0; i < [dataArray count]; i++)
    {   
        NSLog(@"%d delegate array count",[appDelegate.array count]);

        NSInteger ID = [[[dataArray objectAtIndex:i] objectForKey:@"ID"] intValue];
        NSString *Note = [[dataArray objectAtIndex:i] objectForKey:@"Note"];
        NSString *Reminder = [[dataArray objectAtIndex:i] objectForKey:@"Reminder"];
        NSInteger Status = [[[dataArray objectAtIndex:i] objectForKey:@"Completed"]intValue];
        NSInteger DisplayOrder = [[[dataArray objectAtIndex:i] objectForKey:@"Display_Order"] intValue];

        if ([appDelegate.array count] == 0 && Note != nil) 
        {
            NSString *query = [NSString stringWithFormat:@"INSERT INTO Tasks (Note, Reminder, Status, DisplayOrder) VALUES ('%@','%@','%d','%d')",Note, Reminder, Status, DisplayOrder];

            //NSLog(@"%@",query);
            sqlite3 *database_1;

            NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
            NSString *documentsDir = [documentPaths objectAtIndex:0];
            NSString *database_Path = [documentsDir stringByAppendingPathComponent:@"TODO.sqlite"];

            if(sqlite3_open([database_Path UTF8String], &database_1) == SQLITE_OK)
            {
                sqlite3_stmt *compiledStatement_1;
                if(sqlite3_prepare_v2(database_1,[query UTF8String], -1, &compiledStatement_1, NULL) == SQLITE_OK)
                {
                    while(sqlite3_step(compiledStatement_1) == SQLITE_ROW)
                    {
                        sqlite3_step(compiledStatement_1);
                    }
                }
                sqlite3_finalize(compiledStatement_1);
            }
            sqlite3_close(database_1);

            [self readDataFromDatabase];
        }

        else 
        {
           // NSLog(@"Entered Else");

            for (int k = 0; k < [appDelegate.array count]; k++) 
            {

            objectData = [appDelegate.array objectAtIndex:k];
              //  NSLog(@"%d",objectData.ID);

                NSMutableArray *IDArray = [NSMutableArray arrayWithObject:[[NSNumber numberWithChar:objectData.ID]stringValue]];
                NSMutableArray *NoteArray = [NSMutableArray arrayWithObject:objectData.Note];
                NSMutableArray *ReminderArray = [NSMutableArray arrayWithObject:objectData.Reminder];
                NSMutableArray *StatusArray = [NSMutableArray arrayWithObject:[[NSNumber numberWithChar:objectData.Status]stringValue]];
                NSMutableArray *DisplayOrderArray = [NSMutableArray arrayWithObject:[[NSNumber numberWithChar:objectData.DisplayOrder]stringValue]];

                NSLog(@"%@ server",[NSString stringWithFormat:@"%d",ID]);
                NSLog(@"%@ database",IDArray);

                if ([CommonFunctions isValueInArray:[NSString stringWithFormat:@"%d",ID]:IDArray] && [CommonFunctions isValueInArray:Note :NoteArray] && [CommonFunctions isValueInArray:Reminder :ReminderArray] && [CommonFunctions isValueInArray:[NSString stringWithFormat:@"%d",Status] :StatusArray] && [CommonFunctions isValueInArray:[NSString stringWithFormat:@"%d",DisplayOrder] :DisplayOrderArray]) 
                {
                    NSLog(@"Present In appDelegate.array!!!");
                }
                else 
                {
                    NSString *query = [NSString stringWithFormat:@"INSERT INTO Tasks (Note, Reminder, Status, DisplayOrder) VALUES ('%@','%@','%d','%d')",Note, Reminder, Status, DisplayOrder];

                    NSLog(@"%@",query);
                    sqlite3 *database_1;

                    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
                    NSString *documentsDir = [documentPaths objectAtIndex:0];
                    NSString *database_Path = [documentsDir stringByAppendingPathComponent:@"TODO.sqlite"];

                    if(sqlite3_open([database_Path UTF8String], &database_1) == SQLITE_OK)
                    {
                        sqlite3_stmt *compiledStatement_1;
                        if(sqlite3_prepare_v2(database_1,[query UTF8String], -1, &compiledStatement_1, NULL) == SQLITE_OK)
                        {
                            while(sqlite3_step(compiledStatement_1) == SQLITE_ROW)
                            {
                                sqlite3_step(compiledStatement_1);
                            }
                        }
                        sqlite3_finalize(compiledStatement_1);
                    }
                    sqlite3_close(database_1);

                }
        }

    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T07:34:12.657

利用

```
for (int i = 0; i < [dataArray count]; i++)
{  
  if ([appDelegate.array count] == 0 && Note != nil) 
  {

  }
  else
  {
    if(![appDelegate.array containsObject:[dataArray objectAtIndex:i]])
    {
      // Your code
    }
    else
    {
     // Do nothing Continue; or Break;
     Continue;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:20:20.703

```
if ([array1 isEqualToArray:array2]){

   // Equal..
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T07:55:35.927

```
- (BOOL)isEqual:(ModelClassName *)object
{
    if ([self.ID isEqualToString:object.ID]) {
        返回是；
    }
    返回否；
}

```

子类化您的模型对象并覆盖 isEqual 方法，然后使用

```
[数组包含对象：] 方法

```

# javascript - 当 readonly 为 true 时触发 TextBox 的 onchange 事件

> ID：14332972
> 
> 赞同：6
> 
> 时间：2013-01-15T07:30:34.623
> 
> 标签：javascript, jquery, html

我正在尝试更改只读文本框的一些功能。但是，当我尝试使用 javascript 更新文本框时，文本框不会触发更改事件。

```
<script type="text/javascript">
        $(document).ready(function () {
            $('input[id$=_txtTest]').bind("change", function () {
                alert("test");
            });
                        });
        function ChangeText() {
            $('input[id$=_txtTest]').val('hello');
         }
    </script> 
```

我在单击按钮时调用 ChangeText 方法。但它不会触发文本框的 textchange 事件。

谁能告诉我这里有什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T07:40:40.733

那么你必须这样做：http: [//jsfiddle.net/kmvSV/1/](http://jsfiddle.net/kmvSV/1/)

```
 $(document).ready(function () {
   $('input[id$=_txtTest]').bind("change", function () {
     alert($(this).val());
   });
   $('button').bind("click", function () {
     $('input[id$=_txtTest]').val('hello').trigger('change');
   });
 }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T07:33:42.910

更改事件仅由真实用户事件触发，而不是 javascript 操作。

您可以触发更改事件，如下所示：

```
$('input[id$=_txtTest]').val('hello').change(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T07:33:52.457

你可以这样做

```
function setValueOfTextBox()
{
    var myElement = document.getElementById("textboxid");
    myElement.value = "hello";
    //following code fire change event for you text box
    if (myElement.onchange) 
         myElement.onchange();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-28T23:59:56.913

我相信出于某种安全原因，这些事件不会被触发。但是您可以通过触发该元素上的特定事件来实现这一点。例如`$('input[id$=_txtTest]').trigger('change');`

我希望这可以帮助别人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-02T04:22:34.723

## `onkeypress`事件*或*[其他几个事件](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/input_event)之一：

由于只读字段并没有真正改变；该`onChange`事件不会触发它。然而; 您还可以收听[其他几个事件。](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/input_event)

这是一个简短的演示：

```
input {
  font-size: 16px;
  line-height: 30px;
  padding: 3px;
  border: 2px darkblue solid;
}
```

```
<script>
function sayHi(evt) {

  alert('Are you tyring to edit a read-only? Click OK for details.')
  alert(JSON.stringify({
    keyCode: evt.keyCode, 
    charCode: evt.charCode, 
    altKey:evt.altKey, 
    ctrlKey: evt.ctrlKey, 
    shiftKey: 
    evt.shiftKey
  }), null, 2);
}
</script>

<input onkeypress="sayHi(event);" readonly placeholder="A readonly field..." />
```

# vba - 使用 2 级证书签署 VBA 宏

> ID：14332975
> 
> 赞同：0
> 
> 时间：2013-01-15T07:30:58.277
> 
> 标签：vba, code-signing, digital-certificate

我正在尝试签署我的 excel VBA 代码。据我了解，我可以用“2级”或“2级”来做到这一点

我试图找到比老爸更便宜的东西，每年 200 美元对于这项服务来说似乎有点贵。

StartSSL 他们的网站说“目标代码签名” [http://www.startssl.com/?app=39](http://www.startssl.com/?app=39)

这里有一个很好的代码签名方法：[https ://forum.startcom.org/viewtopic.php?f=15&t=1654](https://forum.startcom.org/viewtopic.php?f=15&t=1654)

但是，没有任何内容指定您可以对 Excel 宏进行签名。

我不能成为第一个处理这个问题的人......但我已经搜索了 2 个小时无济于事。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:56:06.053

任何代码签名证书都可用于签署 excel 宏。

如果您不介意人们在每次代码自签名时收到警告，您可以使用自签名证书。

在 excel 2010 中，你可以去这里： ![显示签名的菜单](../Images/18311be79aea2bd09924580e62de584d.png)

添加您购买的证书，或创建自签名证书

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:29:03.050

根据他们的帮助电子邮件，答案是肯定的，该证书将起作用。

我的电子邮件：

```
Hello there Kirill,

If I sign my Excel 2010 VBA macro with your StartSSL Level 2 certificate, will the users of my spreadsheets see any warning? 
```

他们的回应：

```
No, should not if correctly signed.

-- 
Regards

Signer:     Eddy Nigg, COO/CTO
    StartCom Ltd.
Twitter:    Follow StartSSL™
XMPP:   help@startcom.org
Phone:  +1.213.341.0329
    +1.347.534.2026
    +44.20.799.34541
    +972.8.634.4170 
```

PS。这个网站的格式很奇怪。

# regex - 使用正则表达式解析数组

> ID：14332978
> 
> 赞同：0
> 
> 时间：2013-01-15T07:31:07.050
> 
> 标签：regex

我有 JS 文件，我需要在其中解析该数组：

```
something: ['Prefix.All','Ignore.Me','Prefix.Another'] 
```

我需要从具有定义前缀的“某物”数组中获取所有元素。现在我可以得到它，如果数组将只包含一个元素。我的正则表达式：

```
String: something: ['Prefix.All']
Can get element with:
/something\s*:\s*\[['"](Prefix[a-zA-Z0-9.]+)['"]]/ 
```

但是如何在数组中找到许多元素？以及如何在文件中找到多个“某物”数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T08:19:42.130

在 PHP 中，您需要分两步完成（无论如何这可能会更好——将所有内容都塞进一个正则表达式并不总是最好的主意）。

首先，匹配您要查找的数组。`[`请注意，此正则表达式要求分隔符和之间没有括号`]`，因此包含括号的嵌套数组或字符串将导致正则表达式失败（如“匹配错误的文本”）：

```
if (preg_match('/\bsomething: \[([^[\]]*)\]/', $subject, $regs)) {
    $result = $regs[1];
} 
```

这将找到第一次出现的字符串 like`something: ['Prefix.All','Ignore.Me','Prefix.Another']`并`'Prefix.All','Ignore.Me','Prefix.Another'`放入`$result`.

然后你可以从中得到所有的比赛：

```
preg_match_all('/\bPrefix[^\']*/', $result, $final, PREG_PATTERN_ORDER);
$final = $final[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:34:01.070

在正则表达式中，您可以使用 对令牌进行分组`()`，并使用 多次请求它`*`。

所以：`(something)*`会给你“某事”这个词的每一个实例。

进一步：`(__your__token__here__)*`查找您的令牌的每个实例。

在此处粘贴一些数组：http: [//gskinner.com/RegExr/](http://gskinner.com/RegExr/)并使用正则表达式生成器来测试您的正则表达式

这有帮助吗？

# java - SQL Server 存储过程和 jdbc

> ID：14332980
> 
> 赞同：1
> 
> 时间：2013-01-15T07:31:26.527
> 
> 标签：java, sql-server-2005, stored-procedures, jdbc

我正在努力使用 SQL Server 2005 和 JDBC。我有一个存储过程：

```
set ANSI_NULLS ON
set QUOTED_IDENTIFIER ON
go

ALTER proc [dbo].[sp_logincheck]
    @username as nvarchar(50),
    @password as nvarchar(50)
as
begin
    select * 
    from users 
    where user_name = @username 
      and password = @password 
      and is_active = 'Yes'
end 
```

我的`User`课是：

```
import java.sql.*;

public class User {
    private String username;

    private User(String username){
        this.username = username;
    }

    public static User login(String username, char [] password) throws SQLException{
        if(username == null || password == null){
            throw new IllegalArgumentException("Illegal arguments passed to method");
        }
        if(login1(username, password)){
            return new User(username);
        }
        return null;
    }

    private static boolean login1(String username, char [] password) throws SQLException{
        Connection connection = null;
        CallableStatement statement = null;
        try{
            connection = DriverManager.getConnection(AppParameters.dbURL, AppParameters.dbUsername, AppParameters.dbPassword);
        }catch(SQLException e){
            throw e;
        }
        try{
            statement = connection.prepareCall("{ ? = call dbo.sp_logincheck(?,?) }");
            statement.registerOutParameter(1, Types.INTEGER);
            statement.setString(2, username);
            statement.setString(3, new String(password));
            statement.execute();
            if(statement.getInt(1) == 1){
                System.out.println("Login Successfull");
                return true;
            }
            System.out.println("Login Failed");
            return false;
        }catch(SQLException sqle){
            sqle.printStackTrace();
            throw sqle;
        }finally{
            try{
                statement.close();
            }catch(Exception e){
            }
            try{
                connection.close();
            }catch(Exception e){
            }
        }
    }

    public  String getUsername(){
        return username;
    }
} 
```

调用`login()`方法总是打印`Login Failed`。如何在 SQL Server 中使用存储过程并使用 JDBC 执行用户登录？还是使用原始 SQL 语句更好？请指导我。

**编辑：**

我还想知道如何`ResultSet`从上面的存储过程中获取，因为我在`select`存储过程中有一个查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:39:01.457

尝试将`select * from users...`您的 sql 语句更改`select count(*) from users...`为存储过程中。

否则你的表达`if(statement.getInt(1) == 1){`没有任何意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T09:22:31.297

尝试以下操作：

```
ResultSet rs = statement.executeQuery();
if (! rs.isLast()) {
    // match
} else {
    // no match
} 
```

另外，我建议只选择 count ( `select count(*) as cnt from ...`)，并使用 like`int count = rs.next().getInt("cnt");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T09:13:55.967

如果

```
statement.getInt(1)
```

等于结果的行数或至少有一行。那么这可能是一个数据不匹配的情况。没有找到数据

# iphone - 保存并检测特定的摇动手势模式 iphone

> ID：14332981
> 
> 赞同：6
> 
> 时间：2013-01-15T07:31:27.477
> 
> 标签：iphone, ios, xcode, ipad

在我的项目中，我在 iphone 中实现了摇动手势。我想从用户那里保存一个特定的摇动模式（比如像“S”这个词一样摇动），我只需要在特定模式上调用事件。这在iphone中可能吗？如果可能的话，任何人都可以指导我一些参考吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T08:13:54.560

浏览[Core 运动编程指南](http://www.google.co.in/url?sa=t&rct=j&q=core%20motion%20reference%20programming%20guide&source=web&cd=1&cad=rja&sqi=2&ved=0CC4QFjAA&url=http%3A%2F%2Fdeveloper.apple.com%2Flibrary%2Fios%2Fdocumentation%2FEventHandling%2FConceptual%2FEventHandlingiPhoneOS%2FMotionEvents%2FMotionEvents.html&ei=2A71ULX2FoKErQfQsIGIDg&usg=AFQjCNH0dAlFO3QE_DLu48pVITtXU49g3g&bvm=bv.41018144,d.bmk)和[Core 运动框架参考](http://www.google.co.in/url?sa=t&rct=j&q=core%20motion%20reference%20programming%20guide&source=web&cd=2&cad=rja&sqi=2&ved=0CDUQFjAB&url=http%3A%2F%2Fdeveloper.apple.com%2Flibrary%2Fios%2Fdocumentation%2FCoreMotion%2FReference%2FCoreMotion_Reference%2F_index.html&ei=2A71ULX2FoKErQfQsIGIDg&usg=AFQjCNHffaocOSD5CGeO00m74cKywRZ00g&bvm=bv.41018144,d.bmk)。并了解 iPhone 设备动作 api，您将能够实现您的自定义动作事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T06:40:18.653

是的，我认为[听到](http://www.iphoneexamples.com/)iPhone 上的震动效果，或者你可以使用

```
CABasicAnimation *theAnimation; 
theAnimation=[CABasicAnimation animationWithKeyPath:@"transform.translation.x"];
theAnimation.duration=1;
theAnimation.repeatCount=2;
theAnimation.autoreverses=YES;
theAnimation.fromValue=[NSNumber numberWithFloat:0];
theAnimation.toValue=[NSNumber numberWithFloat:-60];
[view.layer addAnimation:theAnimation forKey:@"animateLayer"]; 
```

希望它会帮助你

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T16:06:35.527

借用 pradeepa，您将需要学习使用 Core Motion 和 UIAccelerometer API——[从事件处理编程指南中的“运动事件”一章](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/MotionEvents/MotionEvents.html)开始。

对于您的自定义形状运动识别器，您需要评估设备在 (x/y/z-) 空间中随时间的移动。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-29T01:41:56.857

这个项目可能会有所帮助，[AcceleroMusic](https://github.com/govind678/AcceleroMusic)。您需要定义 x,y,z 来映射您的特定摇动模式（“S”摇动）。

# spring-mvc - org.springframework.web.util.NestedServletException：请求处理失败

> ID：14332982
> 
> 赞同：2
> 
> 时间：2013-01-15T07:31:37.283
> 
> 标签：spring-mvc, jdbctemplate, spring-annotations

我正在使用 spring jdbc 模板进行 CRUD。插入、选择和删除操作工作正常，但我在更新过程中遇到了以下异常。

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [java.lang.Integer]: No default constructor found; nested exception is java.lang.NoSuchMethodException: java.lang.Integer.<init>() 
```

这是我的控制器：

```
@RequestMapping(value="/editCompany/{companyId}", method= RequestMethod.GET)
    public String edit(@PathVariable(value="companyId")Integer companyId,ModelMap map) {

        Company company=companyService.get(companyId);
        map.addAttribute("company", company);
        map.put("companyId", companyId);
        return "editCompany"; 
    }

    @RequestMapping(value="/editCompany/{companyId}", method= RequestMethod.POST)
        public String save(@ModelAttribute("company")Integer companyId,Company company,BindingResult result, ModelMap map) {

        companyValidator.validate(company, result);
        if (result.hasErrors()) {
            return "editCompany";
        } else {
            Integer i=companyService.save(company);

            return "status";
        }
    } 
```

我也`@Autowired`为控制器使用了注释。如何解决？任何形式的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T07:56:38.760

我看到您正在尝试使用 Integer companyId 作为 ModelAttribute。我不会在这种情况下推荐 ModelAttribute （因为它是矫枉过正且容易误用），但如果你使用，你之前有没有声明过 ModelAttribute 的值？

```
public String save(@ModelAttribute("company")Integer companyId,Company company,BindingResult result, ModelMap map) { 
```

如果您只指定上述值，**系统将尝试为所有请求初始化一个 Integer**。这无法完成，因为 Integer 类没有默认讲师。

因此，我建议这样做：

```
public String save(@RequestParam("company")Integer companyId,Company company,BindingResult result, ModelMap map) { 
```

如果您仍想对所有请求使用共享的 ModelAttribute，则必须首先对其进行初始化：

```
@ModelAttribute("company")
public Integer companyId(){
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:50:33.123

我将我的 Post 方法更改为 following 并且它有效。

```
public String save(@ModelAttribute("company")Company company,BindingResult result, ModelMap map) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-10T12:11:21.433

```
@ModelAttribute("company")
public Integer companyId(){
return 0;
} 
```

请注意这一点，您将在所有 companyId 中有 0，这可能对 crud 很危险。

¿你能用吗？

```
@PathVariable(value="companyId") 
```

编辑必须像保存一样，唯一的更改是 companyId，如果您正在保存，则必须为 0 或 null，如果您正在编辑，则必须是公司的 id

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-03-18T03:09:07.273

您的 URL 不能以不同的方式重复。

1.  您必须确定网址
2.  `@ModelAttribute ("company") company`

# javascript - 日期字段的验证

> ID：14332984
> 
> 赞同：0
> 
> 时间：2013-01-15T07:31:50.640
> 
> 标签：javascript, validation

我在表格上有一个日期字段。日期字段中的日期必须晚于今天的日期，而不是过去的日期。它还必须在今天的 30 天内。所以如果今天是 15/01/2013，那么表格只能接受 15/02/2013 之后 30 天内的任何日期，所以 14/04/2007 加上 30 天！

任何人都可以帮助正确的Javascript代码吗？我是个业余爱好者，不知道如何实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:55:02.983

我想你需要这样的东西：http: [//jsfiddle.net/hqNxW/1/](http://jsfiddle.net/hqNxW/1/)

而且代码...

**JavaScript**

```
var output = document.getElementById('messageOutput');
document.getElementById('validate').onclick = function () {
    var value = document.getElementById('date').value;
    if (!validateDate(value)) {
        notify('Invalid date format');
    } else {
        if (!validateDateRange(value)) {
            notify('The date should be after today but not more than 29 days!');
        } else {
            notify('Valid date');
        }
    }
}

function notify(msg) {
    output.innerHTML = msg;
}

function validateDate(date) {
    return (/^\d{2}-\d{2}-\d{4}$/).test(date);
}

function validateDateRange(inputDate) {
    var now = new Date(),
        after30Days = new Date().setDate(now.getDate() + 30)
        date = new Date(inputDate);
    return date > now && date < after30Days;
} 
```

**HTML**

```
<input type="text" id="date" /> <button id="validate">Validate</button>
<div id="messageOutput">Enter a date in the following format: mm-dd-yyyy</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:26:10.703

您的验证功能应该是这样的：

```
function validateDateField()
{
  var result=true;        // optimistic....

  var now=new Date();
  var thisMonth=now.getMonth();
  var maxDate=new Date();
  maxDate.setMonth(thisMonth+1);

  //---------getting the user input:
  var dateStr=document.getElementById('dateField').value;

  //change "dd/mm/yyyy" format to "yyyy/mm/dd" format:
  dateStr = dateStr.replace(" ","");
  dateStr = dateStr.substr(6,4)+"/"+dateStr.substr(3,2)+"/"+dateStr.substr(0,2);

  //---------validation part:
   document.getElementById('feadBackLable').innerHTML="";
  try
  {
    var userDate=new Date(Date.parse(dateStr));
    if(userDate < now || userDate > maxDate)  
     {
           result=false;
           document.getElementById('feedBackLable').innerHTML="your date should be one of the next 30 days";
     }
  }
  catch(err)
  {
     result=false;
     document.getElementById('feadBackLable').innerHTML="please enter a valid date: dd/mm/yyyy";
  }
  //---------------------------
  return result;

} // function 
```

# c# - 想要通过 javascript 显示依赖弹出窗口，这也适用于 IE7 及更高版本

> ID：14332987
> 
> 赞同：0
> 
> 时间：2013-01-15T07:31:58.273
> 
> 标签：c#, javascript, jquery, asp.net

我想通过 javascript 函数显示一个弹出窗口，具有以下条件 - 弹出窗口应该在页面中心。-当弹出窗口打开时，用户无法访问父页面。- 也可以在 IE7 或更高版本中工作。

但是我正在尝试使用后续代码但没有成功。

```
 window.open('PopUp.aspx', 'popjack',
        'toolbar=no,location=no,directories=no,status=no,menubar=no,resizable=yes,copyhistory=no,scrollbars=no,width=955,height=500'); 
```

jQuery可以轻松吗？先谢谢了。！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:35:19.163

来自 jQuery UI[文档](http://jqueryui.com/dialog/#modal)

```
<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Dialog - Basic modal</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
  <script src="/resources/demos/external/jquery.bgiframe-2.1.2.js"></script>
  <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <script>
  $(function() {
    $( "#dialog-modal" ).dialog({
      height: 140,
      modal: true
    });
  });
  </script>
</head>
<body>

<div id="dialog-modal" title="Basic modal dialog">
  <p>Adding the modal overlay screen makes the dialog look more prominent because it dims out the page content.</p>
</div>

<p>Sed vel diam id libero <a href="http://example.com">rutrum convallis</a>. Donec aliquet leo vel magna. Phasellus rhoncus faucibus ante. Etiam bibendum, enim faucibus aliquet rhoncus, arcu felis ultricies neque, sit amet auctor elit eros a lectus.</p>

</body>
</html> 
```

对话框现在应该打开到窗口的中心并且它应该是模态的（用户不能与对话框以外的其他元素交互）。

# php - 如果我使用 eval() 是否需要清理代码

> ID：14332989
> 
> 赞同：-3
> 
> 时间：2013-01-15T07:32:24.543
> 
> 标签：php, eval, sanitization

我在数据库中存储表单以及表单处理脚本、javascript 验证脚本和表单 CSS，`eval()`用于 PHP 代码，所以我的问题是我需要`htmlspecialchars()`吗`htmlentities()`？

无论如何，我正在使用`mysqli_real_escape_string()`并且`nl2br()`你不会警告我如何`eval()`安全使用或等等等等，这不是这里关心的问题，问题是如果我不使用`eval`或者html会像它已经发布在数据库中一样去而不是我需要使用这些功能，或者在这种情况下它们不是真正需要的？`evil``htmlspecialchars``htmlentities``<``<``&lt;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:04:19.327

通用答案：当上下文发生变化时使用转义函数。

将纯文本字符串放入 SQL 时：Escape for SQL。

将纯文本字符串放入 HTML 时：HTML 转义。

将纯文本字符串放入 URL 时：URL 转义。

当做上述不止一件事情时：以正确的顺序进行所有转义，并真正尝试找出您是否没有错过上下文更改。

演示问题：

开始

```
$param = "foo";
$url = "http://www.example.org/newpage"; 
```

结尾

```
<a href="javascript:location='http://www.example.org/newpage?param=foo';return false;">Link</a> 
```

# postgresql - 在 cakephp1.3 中为 Postgres 使用虚拟字段

> ID：14332992
> 
> 赞同：0
> 
> 时间：2013-01-15T07:32:32.377
> 
> 标签：postgresql, cakephp-1.3

我想使用虚拟字段将两个字段连接在一起，这些字段将在我的下拉列表中使用。比如名字和姓氏。

如果我不使用任何分隔符，它显示得很好。

但是当我将这些字段与空格、星号或其他东西连接时出现错误。

这是我的代码：

```
var $virtualFields = array(
             'name' => 'CONCAT(MaterialOwner.first_name,"-",MaterialOwner.last_name)'
        ); 
```

注意：我在 PostgreSQL 中工作。可能这是postgres中的一个问题。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:44:05.747

首先你应该发布你得到的错误。

问题是 PostgreSQL 只使用 ' 作为字符串。" 用于表/列/函数名称。所以使用如下代码：

```
CONCAT(MaterialOwner.first_name,'-',MaterialOwner.last_name) 
```

# java - 设计基准

> ID：14332994
> 
> 赞同：1
> 
> 时间：2013-01-15T07:32:39.780
> 
> 标签：java, database, service

我有一个名为 Employee 的表，其中包含 id、名字、中间名、姓氏作为字段。他们的偏好存储在另一个表中。使用 java 服务获取每个员工的详细信息。每个员工都可以看到其他员工信息。假设有员工 A、B、C 和 D。员工可以将显示名称偏好设置为 first、middle、last 或 last、middle、first。如果员工 A 将其显示格式设置为 first,middle,last 作为首选项，则其他员工的所有搜索结果都应采用首选格式。所以我们认为我们会获取结果，并在服务中应用偏好。

另一种选择是在另一个表中应用首选项，因此首选项表将有两列，每个列都有一个。所以直接从首选项中获取结果。

哪个是最好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:48:40.417

如果您只需要考虑以不同顺序显示名称的偏好，即 ie `one preference`，那`first approach`会做得很好。

（规范化）在名称偏好、要显示的列的偏好等`second approach`情况下会很有用。`user setting multiple preferences (one-to-many relationship)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:33:34.837

如果只影响搜索结果的字段显示顺序，我认为**前者**是一个更好的解决方案。`preferences`但是，我建议您重新考虑`preferences`. `perferences`恕我直言，如果只是将其作为元数据进行查看，则 java 服务应直接将其传递给 Web 层。然后web层中的一些组件接管`perferences`并做相应的显示逻辑。可能是我让整个事情变得复杂......

关于第二种方法，它不太适合您的场景，因为它不利于可扩展性。如果需要在 中显示更多内容`perferences`，则必须更改表以添加必要的列。我认为 TechSpellBound 是对的，在和之间建立**一对多的关系**会很好。`Employee``preferences`

# database - 如何设计我的应用程序以使审计跟踪无法编辑或删除？

> ID：14332998
> 
> 赞同：2
> 
> 时间：2013-01-15T07:32:56.707
> 
> 标签：database, audit, audit-trail

我有这个问题，我需要审计跟踪（通常存储在数据库中）是不可编辑和可删除的，即使对于 DBA 和系统管理员也是如此。

一种方法是应用加密和校验和，但这仅允许检测更改或防止窥探。它不会阻止 DBA 只删除一行。

对此问题的任何讨论表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:41:20.437

If you want the audit trails to be non editable even by the DBAs and system admins, you would need to store them outside of equipment that is in their control.

However that would lead to the same problem - the DBAs and system admins of this system would be able to edit them.

The best bet is to have a system where you store these in two disparate locations that do not share an admin and have periodic comparision checks.

Alternatively you can have triggers on update/delete when they are made by a specific user or from a particular client. These triggers could be programmed to send email or text messages if such a non-application update or delete is made.

It should be known - very well known in the admin/dba community that such triggers exist. You wil not be able to prevent the updates or deletes but will definitely get them to stay away from that table.

There is still a catch however, which is the ability to remove or modify the trigger code.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:08:11.927

存在“一次写入”存档存储系统，例如Plan 9 中的[Venti](http://en.wikipedia.org/wiki/Venti)。当然，这并不能阻止任何具有物理访问权限的人将磁铁带到硬盘或类似设备上；）

一个足够精明的系统管理员可以创建一个稍微修改过的数据版本并替换对venti 分数的引用……但同样精明的系统管理员仍然可以恢复原始数据。

无论如何，我认为您可以从研究仅附加存储系统中学到很多东西。与数据库相比，它们对于存储审计跟踪很有意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-28T14:59:56.297

存在充当嗅探器并且能够记录在数据库上执行的每一个命令的设备。IBM Guardium 就是一个例子。